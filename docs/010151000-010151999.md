# StackOverflow 问答 10151000-10151999

# jquery - 比较两次：jQuery 和数据库

> ID：10151000
> 
> 赞同：1
> 
> 时间：2012-04-14T04:27:33.193
> 
> 标签：jquery

我想比较两个包含时间值的变量，但一个是在创建页面时产生的，另一个是从数据库中检索的。另外，我想创建一个计时器，该计时器在创建页面时启动，并在我们收到数据库时间时显示警报。

您建议在 jQuery 中执行这两项任务的解决方案是什么？

> 1) 如何使用 jQuery 获取数据库时间值？
> 2）如何创建一个在创建页面时启动的计时器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T11:50:16.680

让我们做一些假设

*   您的服务器端脚本语言是 php
*   您的时间值是 Unix simestamp（自 1970 年 1 月 1 日以来的秒数）
*   jQuery 安装在页面上（您的问题被标记为 jQuery）。

首先，在合适的 HTML 容器中为您的页面提供数据库时间值：

```
<?php
//retrieve value from database here.
$dbTimeValue = ......;
?>

<body>
...
<input type="hidden" id="dbTimeValue" value="<?php echo $dbTimeValue ?>" />
...
</body> 
```

然后，客户端，在 javascript 中：

```
$(function() {
    var dbTimeVal = Number( $("#dbTimeValue").val() ) * 1000;//Unix timestamp converted to milliseconds
    var timeNow = (new Date()).getTime();//time now (from client computer's motherboard) expressed in milliseconds since 1 Jan 1970
    var timeOut = setTimeout(function() {
        alert("Time now is later than database time");
    }, timeNow - dbTimeVal);
}); 
```

注意：数据库时间值可以直接提供到 javascript 中，`var dbTimeVal = <?php echo $dbTimeValue ?>;`但这对于菜鸟来说可能更令人困惑。

# compression - 数据压缩和图像压缩的区别

> ID：10151001
> 
> 赞同：0
> 
> 时间：2012-04-14T04:27:40.830
> 
> 标签：compression, jpeg

压缩JPEG图像时，数据压缩和图像压缩有什么区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T10:32:44.250

（为了“标准化”你的问题：我假设“数据压缩”是指一般数据文件压缩 - 例如 .zip 和 .rar）
有一个“大”的区别：

数据压缩是“无损”压缩 - 在这种压缩中，您甚至不能承受丢失/错误的后果。然而..

图像压缩是一种“有损”压缩 - 根据您对数据大小对质量（数据再现）的要求，您**可以**承受丢失/错误一定数量的细节。即您的压缩版本将不是您原始图像文件的精确副本；但在数据压缩 - 压缩版本将重新创建输入文件 -**完全一样**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T19:06:20.243

JPEG 将 RGB 颜色空间转换为 YCbCr 颜色空间。大多数图像数据在 Y 通道中，为了避免信息丢失，可以减少压缩。但是 Cb 和 Cr 通道具有颜色信息，并且大多是重复的。这可以很容易地压缩。

[http://nboddula.blogspot.com/2013/05/image-compression-how-jpeg-works.html](http://nboddula.blogspot.com/2013/05/image-compression-how-jpeg-works.html)

# c# - 循环通过复选框并将复选框值插入数据库

> ID：10151006
> 
> 赞同：0
> 
> 时间：2012-04-14T04:28:14.320
> 
> 标签：c#, asp.net, vb.net

**ASPX 页面：**

```
<asp:ListView ID="lvSubjects" runat="server" >
        <LayoutTemplate>
        <asp:PlaceHolder ID="itemPlaceholder" runat="server" />
        </LayoutTemplate>
        <ItemTemplate>
            <asp:CheckBox ID="cbRegularSubjects" Text=<%# Eval("SubjectName") %> runat="server" />

        </ItemTemplate>

        <AlternatingItemTemplate>
        <asp:CheckBox ID="cbRegularSubjects" Text=<%# Eval("SubjectName") %> runat="server" />
        </AlternatingItemTemplate>
        </asp:ListView> 
```

**代码背后：**

```
For Each ctrl As Control In Page.Controls
            If TypeOf ctrl Is CheckBox AndAlso CType(ctrl, CheckBox).Checked Then
                '**Here I want to get the text of the check box and insert into the DB**
            End If

       Next 
```

我哪里出错了？？我没有收到任何错误...但是这段代码对我不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T04:48:38.887

您只在 Page.Controls 中搜索，而您的复选框在页面控制层次结构的更深处。

```
foreach (ListViewItem row in listView.Rows)
{
  if (row.ItemType == ListViewItemType.DataItem)
  {
    CheckBox chk = row.FindControl("Checkboxid");
    if  (chk.Checked)
    {
     //Write code to store this checkbox value to database here
    }
   }
  } 
```

请用正确的控件名称更改VB中的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T05:36:51.607

```
For i As Integer = 0 To lvSubjects.Items.Count - 1
            Dim coll As ControlCollection = lvSubjects.Items(i).Controls
            For Each c As Control In coll
                If TypeOf c Is CheckBox Then
                    Dim box As CheckBox = CType(c, CheckBox)
                    If box.Checked Then
                        MsgBox(box.Text)
                    End If
                End If
            Next c
        Next i 
```

# sql-server - 有没有办法在 EF CodeFirst 中指定数据库级别的默认值？

> ID：10151007
> 
> 赞同：1
> 
> 时间：2012-04-14T04:28:34.183
> 
> 标签：sql-server, ef-code-first

我需要由 EF CodeFirst 创建的数据库来支持默认值，以便在未提供值时可以将不可为空的值插入到数据库中。

例如，我想将默认日期添加到日期列中，这样当在模型外部插入某些内容时，日期列不需要值。

我知道我可以在使用模型更新时使用代码中的默认值来控制它，但这样做的原因主要是为了模型更新。我经常使用 RedGate 的 SqlCompare 来更新结构，但结构更新通常在不可为空的非默认字段上失败，因为新列需要一些值来验证架构，因此列添加失败。默认值（和可空值）将允许这样做。Nullables 可以工作，但这会在处理代码中的 null 值时引入其他问题，除非模型需要，否则我想避免这些问题。

有什么方法可以使用 Fluent API 或 Attributes 将默认值添加到带有 EF CodeFirst 的列中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T04:37:46.597

是的，您需要将[HasDatabaseGeneratedOption](http://msdn.microsoft.com/en-us/library/system.data.entity.modelconfiguration.configuration.primitivepropertyconfiguration.hasdatabasegeneratedoption%28v=vs.103%29.aspx)方法与[Computed的 DatabaseGeneratedOption 一起使用](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.databasegeneratedoption%28v=vs.103%29.aspx)

```
.HasDatabaseGeneratedOption(DatabaseGeneratedOption.Computed) 
```

[唯一的限制是您无法从代码中更新值。](https://stackoverflow.com/questions/584556/how-to-use-default-column-value-from-database-in-entity-framework)

# iphone - iphone sdk 如何从相机拍照并在同一视图中显示图像？

> ID：10151010
> 
> 赞同：-5
> 
> 时间：2012-04-14T04:29:18.027
> 
> 标签：iphone, objective-c, ios4, uiimagepickercontroller

我将创建一个按钮和图像视图。我将为按钮创建 IBAction 以打开 UIImagepicker 以拍摄照片。之后我需要图像需要显示在图像视图中。如何获得这个。任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T04:37:54.100

`IBAction`在单击按钮时调用此方法。它将打开`UIImagePickerController`以从相机捕获图像。

```
-(IBAction)openCamera
{
    @try 
    {
        UIImagePickerController *picker = [[UIImagePickerController alloc] init];  
        picker.sourceType = UIImagePickerControllerSourceTypeCamera;  
        picker.delegate = self; 

        [self presentModalViewController:picker animated:YES];
        [picker release];
    }
    @catch (NSException *exception) 
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"No Camera" message:@"Camera is not available  " delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil];
        [alert show];
        [alert release];
    }
} 
```

当您完成拍摄图像时，将调用此委托。将该图像存储在您的`UIImageView`.

```
-(void)imagePickerController:(UIImagePickerController*)picker didFinishPickingMediaWithInfo:(NSDictionary*)info
{
    [picker dismissModalViewControllerAnimated:YES];
    self.imageView.image=[info objectForKey:@"UIImagePickerControllerOriginalImage"];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T09:43:27.743

您可以在头文件 (.h) 中声明 UIImagePickerDelegate，然后在按钮单击事件上编写以下代码。

```
-(IBAction)YourMethodName_Clicked:(id)sender
{
UIImagePickerController * picker = [[UIImagePickerController alloc] init];
        picker.delegate = self;
if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])  {
                picker.sourceType = UIImagePickerControllerSourceTypeCamera;
                popover = [[UIPopoverController alloc] initWithContentViewController:picker];
                [popover presentPopoverFromRect:CGRectMake(0.0, 0.0, 400.0, 400.0) 
                                         inView:self.view
                       permittedArrowDirections:UIPopoverArrowDirectionAny 
                                       animated:YES];

//                [self presentModalViewController:picker animated:YES];
            }
            else{
                UIAlertView *altnot=[[UIAlertView alloc]initWithTitle:@"Camera Not Available" message:@"Camera Not Available" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
                altnot.tag=103;
                [altnot show];
                [altnot release];

            }
}

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

    [picker dismissModalViewControllerAnimated:YES];
    UIImageView *imgview1=[[UIImageView alloc]initWithImage:[info objectForKey:@"UIImagePickerControllerOriginalImage"]];

    imgmain1.frame=CGRectMake(0.0, 0.0, 320.0, 460.0);//set your frame here
    [self.view addSubview:imgmain1];
    [imgmain1 relese];

} 
```

# database - 保存 Django 表单提交以供以后使用

> ID：10151017
> 
> 赞同：0
> 
> 时间：2012-04-14T04:30:49.243
> 
> 标签：database, django, forms

我有一个包含大约两打 CharField 和 ChoiceFields 的复杂搜索表单。

我的用户希望能够保存特定查询（给每个查询一个名称），以便他们可以定期运行它们，而无需手动选择所有字段。

我应该只腌制表单对象并将其保存在数据库中吗？

编辑：我应该注意到他们也希望能够在事后修改表单选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T04:33:24.863

不是表单本身，而是从`cleaned_data`属性返回的值。

# java - Java自动化测试工具

> ID：10151020
> 
> 赞同：0
> 
> 时间：2012-04-14T04:31:28.333
> 
> 标签：java, unit-testing

是否有任何自动化测试工具或框架可以测试我们的 Java 代码，而无需从开发人员的角度在测试用例中编写任何代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T04:36:35.963

有一个名为的工具`javac`可以对您的代码运行一些基本测试。

例如，如果您的代码缺少一个`}`，它会告诉您。此外，它会检测您何时尝试使用错误类型的参数调用函数，或调用不存在的函数。

您可能会发现[FindBugs](http://findbugs.sourceforge.net/)很有用，因为它可以警告潜在的危险代码，但它有很多误报。

除此之外，您需要的是某种程序员 AI。如果计算机可以告诉您已经正确实现了代码，为什么不让计算机为您编写代码呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T07:09:29.143

实际上，似乎有一些[工具](https://stackoverflow.com/questions/2131935/automatic-generation-of-unit-tests-for-java)，但我没有使用任何工具。此外，如果您编写一些测试，您可以让[PIT](http://pitest.org/)修改您现有的代码以发现潜在的陷阱。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T04:36:35.277

您可以考虑使用静态代码分析工具，例如[Coverty](http://www.coverity.com/)或[FindBugs](http://findbugs.sourceforge.net/)，它们会尝试仅根据源代码查找潜在的错误，而无需实际执行它。

您还可以尝试[randoop](http://code.google.com/p/randoop/)，它会自动生成随机 JUnit 测试用例（方法调用的随机序列）以查找对象契约违规。它丢弃导致非法参数异常等的方法序列，这是一个很好的积极因素。它还记得构造复杂对象的方法序列，以及导致违反合同的序列。

如果您的代码具有用 JML 编写的规范，康柏的[ESC/Java](http://www.coverity.com/)可以根据这些规范验证您的代码。

# windows-phone-7 - 如何使用 C# 访问 Windows Phone 7 的静音/振动模式？

> ID：10151031
> 
> 赞同：2
> 
> 时间：2012-04-14T04:34:12.980
> 
> 标签：windows-phone-7, silent, vibration

我能够在“aygshell.dll”上使用 p/invoke 来访问 Windows Mobile 6 中的电话声音配置文件，但 Windows Phone 7 不支持以下代码。有没有解决的办法？我希望我的应用能够将手机设置为静音或振动模式。

```
/*The following code works perfectly well with windows moblile 6.0 but fails for 
  windows phone 7 at runtime. */

  public enum SND_SOUNDTYPE
   {
       On,
       File,
       Vibrate,
       None
   }

   private enum SND_EVENT
   {
       All,
       RingLine1,
       RingLine2,
       KnownCallerLine1,
       RoamingLine1,
       RingVoip
   }
 //Marshals
[StructLayout(LayoutKind.Sequential)]
   private struct SNDFILEINFO
   {
       [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 260)]
       public string szPathName;
       [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 260)]
       public string szDisplayName;
       public SND_SOUNDTYPE sstType;
   }

//p/invoke
   [DllImport("aygshell.dll", SetLastError = true)]
    private static extern uint SndSetSound(SND_EVENT seSoundEvent, ref SNDFILEINFO pSoundFileInfo, bool fSuppressUI);

   [DllImport("aygshell.dll", SetLastError = true)]
   private static extern uint SndGetSound(SND_EVENT seSoundEvent, ref SNDFILEINFO pSoundFileInfo);

  //method to set ringer on 
   private static void SetProfileNormal()
   {
       SNDFILEINFO soundFileInfo = new SNDFILEINFO();
       soundFileInfo.sstType = SND_SOUNDTYPE.On;
       SndSetSound(SND_EVENT.All, ref soundFileInfo, true);

   }
 //method to set ringer to vibrate
   private static void SetProfileVibrate()
   {
       SNDFILEINFO soundFileInfo = new SNDFILEINFO();
       soundFileInfo.sstType = SND_SOUNDTYPE.Vibrate;
       SndSetSound(SND_EVENT.All, ref soundFileInfo, true);

   }

  //method to set ringer off - silent mode
  private static void SetProfileMuted()
   {
       SNDFILEINFO soundFileInfo = new SNDFILEINFO();
       soundFileInfo.sstType = SND_SOUNDTYPE.None;
       SndSetSound(SND_EVENT.All, ref soundFileInfo, true);

   }
 //method to check if phone is in vibrate mode
   private bool IsInVibrateMode()
   {
       SNDFILEINFO info = new SNDFILEINFO();
       SndGetSound(SND_EVENT.All, ref info);
       return (info.sstType == SND_SOUNDTYPE.Vibrate);
   }
 //method to check if phone is in silent mode
   private bool IsMuted()
   {
       SNDFILEINFO info = new SNDFILEINFO();
       SndGetSound(SND_EVENT.All, ref info);
       return (info.sstType == SND_SOUNDTYPE.None);
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T16:28:26.360

Windows phone 7 的安全沙盒不允许开发人员访问将手机模式设置为静音或振动。充其量，该应用程序可以调出设置菜单，允许用户个人将手机设置为静音或振动模式。

# asp.net - 获取选定模板字段的数据绑定值

> ID：10151032
> 
> 赞同：-1
> 
> 时间：2012-04-14T04:34:16.847
> 
> 标签：asp.net, vb.net

我希望我的网站允许用户下载作为 blob 存储在数据库中的文件，数据库保存 fileID 文件名和文件。我有一个包含两列的网格视图，fileName 和一个模板列，它是数据绑定到 fileID 并有一个链接按钮。单击链接时，它会调用下载文件的函数。该函数需要fileID来下载文件，我如何获取绑定到所选链接按钮的fileID。

我正在使用 vb.net

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T07:58:02.350

`CommandArgument`将的数据绑定`LinkButton`到文件的 id

# matlab - 为什么使用 GPU 时 Arrayfun 比 for 循环快得多？

> ID：10151033
> 
> 赞同：3
> 
> 时间：2012-04-14T04:34:18.423
> 
> 标签：matlab, gpu

有人能说出为什么 Arrayfun 比 GPU 上的 for 循环快得多吗？（不在 CPU 上，实际上 For 循环在 CPU 上更快）

阵列乐趣：

```
x = parallel.gpu.GPUArray(rand(512,512,64));
count = arrayfun(@(x) x^2, x); 
```

和等效的 For 循环：

```
for i=1:size(x,1)*size(x,2)*size(x,3)
  z(i)=x(i).^2;        
end 
```

可能是因为 For 循环在 GPU 上不是多线程的吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T04:44:11.717

我不认为你的循环是等价的。似乎您正在将数组中的每个元素与您的*CPU 实现平方，但对**arrayfun*执行某种计数。

无论如何，我认为您正在寻找的解释如下：

在 GPU 上运行时，您的代码可以在功能上进行分解——在这种情况下为每个数组单元——并分别平方。这没关系，因为对于给定`i`的 ， 的值`[cell_i]^2`不依赖于其他单元格中的任何其他值。最有可能发生的情况是将数组分解为*S*个缓冲区，其中*S*是您的 GPU 拥有的*流处理单元的数量。*然后每个单元计算其缓冲区每个单元格中数据的平方。结果被复制回原始数组，并将结果返回给计数。

现在不用担心，如果您正在计算看起来 *array_fun* 实际正在做的事情，类似的事情正在发生。该算法最有可能将数组划分为类似的缓冲区，而不是对每个单元格进行平方，而是将这些值相加。您可以将第一步的结果视为一个较小的数组，可以递归地应用相同的过程来计算新的总和。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T08:24:45.433

根据此处的参考页面[http://www.mathworks.co.uk/help/toolbox/distcomp/arrayfun.html](http://www.mathworks.co.uk/help/toolbox/distcomp/arrayfun.html)，“传入用于评估的 MATLAB 函数为 GPU 编译，然后在 GPU 上执行”。在显式`for`循环版本中，每个操作都在 GPU 上单独执行，这会产生开销 - 该`arrayfun`版本是一个 GPU 内核调用。

# java - 默认列表模型和泛型 JAVA

> ID：10151036
> 
> 赞同：2
> 
> 时间：2012-04-14T04:35:23.950
> 
> 标签：java, swing, generics, defaultlistmodel

当我查看 API 规范默认列表模型时，它声明该类使用泛型。当我去创建该类的一个实例时，它不需要它或允许它。泛型如何与 DefaultListModel 集成，如何使用？

谢谢 ：-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T04:40:12.823

您永远*不需要*使用泛型，因为它只是一个编译时检查（有关更多详细信息，请参阅[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)）。

本质上，一旦你的代码被编译，泛型类型信息就会被剥离，所以你的代码永远不需要正确运行。泛型只是为编译器提供了一种执行静态检查的方法，以确保您以一致/安全的方式使用类型。

# ruby - Ruby：枚举器链

> ID：10151038
> 
> 赞同：4
> 
> 时间：2012-04-14T04:36:09.347
> 
> 标签：ruby, enumerable

最初我打算做如下的事情：

```
arr = [[1,2],[3,4]]
new_arr = 
arr.map do |sub_arr|
    sub_arr.map do |x|
        x+1
    end
end

p new_arr 
```

输出：

```
[[2,3],[4,5]] 
```

但后来我试图通过“链接”枚举器来缩短它：

```
arr.map.map{|x| x+1} 
```

然后它给出错误`to_ary method missing`

我调试了它

```
arr.each.each{|x| p x} 
```

输出：

```
[1,2]
[3,4] 
```

，这是原始数组，仅被解剖一次。

如何链接两个地图/每个枚举器，以便将枚举器分成 2 个（或更多）级别？还是必须在区块中？

* * *

**更新：**

经过一番搜索，显然一个链`obj.Enumerator.Enumerator.Enumerator...`只枚举了 obj 一次，并且只有 1 级深度。为了更深入，需要阻塞。我编写了简单的代码，将字符串转换为块（Proc/Lambda；类似于符号到块，但更有用；更像是一种函数式语法），这样就可以避免该块。有人有类似的代码`String#to_proc`，但我找不到，而且里面的`x,y`东西不符合我的口味。我用`$0,$1,$2,...`

示例代码（前面的例子会写成）：

```
arr = [[1,2],[3,4]]
new_arr = arr.map(&'[$0+1,$1+1]')
p new_arr 
```

我稍后会将原始代码推送到github。如果您想在那之前看到它，您可以使用聊天与我联系，因为我真的很拖延:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T08:20:08.313

也许您需要一个`map`您只想在叶子上应用的：

```
module Enumerable
  def nested_map &block
    map{|e|
      case e
      when Enumerable
        e.nested_map(&block)
      else
        block.call(e)
      end
    }
  end
end

p [[1,2], [3,4]].nested_map(&:succ)
#=> [[2, 3], [4, 5]] 
```

或`map`仅适用于`n`嵌套结构的第 - 层的 a。

```
module Enumerable
  def deep_map level, &block
    if level == 0
      map(&block)
    else
      map{|e| e.deep_map(level - 1, &block)}
    end
  end
end

p [[1,2], [3,4]].deep_map(1, &:succ)
#=> [[2, 3], [4, 5]] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T07:20:30.247

听起来像是递归的工作：

```
def zipper(args)
  args[0].respond_to?(:each) ? args.map{|a| zipper(a)} : args.map{|i| i+1}
end

zipper([[1,2],[3,4]])
# => [[2, 3], [4, 5]]

zipper([[[1,2],[3,4]],[5,6]])
# => [[[2, 3], [4, 5]], [6, 7]] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T00:23:19.410

```
arr.map {|x| x.map(&:succ)} #=> [[2, 3], [4, 5]] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T05:03:58.977

为了通过`x+1`只写一次来做到这一点，你需要把它放在一个块中。否则，您可以执行以下操作：

> new_arr = arr.map{|x, y| [x+1, y+1]}

或者，如果你坚持，你可以这样做：

> new_arr = arr.flatten(1).map{|x| x+1}.each_slice(2).to_a

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-14T10:57:20.267

就我个人而言，我只是像下面两个选项之一那样编写它并完成它：

```
arr.map { |a| a.map(&:next) } 
#=> [[2, 3], [4, 5]]
arr.map { |x, y| [x.next, y.next] } 
#=> [[2, 3], [4, 5]] 
```

# android - 手机的存储空间

> ID：10151041
> 
> 赞同：-3
> 
> 时间：2012-04-14T04:36:34.623
> 
> 标签：android, storage

我开发了一个应用程序，它填充了手机的存储空间，知道它的大小只有 600Ko。

这个问题是在我在模拟器中测试时发生的，因此解决方案是增加模拟器的存储容量。

但现在我在手机上测试时空间为 169Mo/181Mo :s 我不知道知道我无法访问数据/数据的内存有多清晰

第二件事我不知道如何在应用程序代码中解决这个问题。

## 编辑：

放下对我毫无意义的评论！

如果我的英语不好是因为我说法语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T12:42:08.650

## Louis Semprini 的回应：

感谢您发布这个问题。我有一些额外的见解可能会帮助一些开发人员。

我正在设备（不是模拟器）上调试我的应用程序。该设备在 /data 上有 21MB 可用空间（在执行“adb shell”时由“df”显示），而我的应用程序只有 5MB。但是，我确实发现如果我删除了设备上的其他应用程序（没有重新启动手机或重新启动 adbd），INSTALL_FAILED_INSUFFICIENT_STORAGE 会消失一段时间，然后再回来。

因此，似乎调试我的 5MB 应用程序需要更多 /data 中的 20MB 空间，此外，每次调试我的应用程序时都会泄漏一些东西。

所以我做了“adb shell”并列出了整个 /data 目录

```
cd /data
ls -a -l -R 
```

并查看 5000 行的输出以了解所有空间的去向。

我在 /data/klog 目录中发现了我设备上大量浪费的空间，这些空间以来自几个月前的调试会话的旧日志文件的形式出现。

这些不是我的日志文件：它们是由 Android 基础架构的某些部分创建的。

我删除了它们并立即保存了 58MB，这在“设置”应用程序中并未归因于任何特定应用程序。我有一个小型设备，所以 58MB 非常重要（大约 40%）。

到目前为止，经过多次运行，我还没有再次获得 INSTALL_FAILED_INSUFFICIENT_STORAGE。让我们希望这是真正的问题，尽管 OP 建议他的设备有足够的空间（但没有说多少）。

希望你们中的一些人也能够通过定期删除 /data/klog/* 来逃避 INSTALL_FAILED_INSUFFICIENT_STORAGE

`ls -a -l -R`或者，如果确实存在一些（隐藏的）空间问题，您至少可以执行in /data 以查看所有空间的去向。

## PS：

***我邀请那些已经放下没有评论的人去学习正确的沟通方式***

# c# - 如何在一个页面中设置 cookie 值并从 asp.net 网站的另一个页面中读取它

> ID：10151045
> 
> 赞同：8
> 
> 时间：2012-04-14T04:36:47.633
> 
> 标签：c#, asp.net, cookies

这是我在 Login.aspx 中的代码

```
protected void LoginButton_Click(object sender, EventArgs e)
{
    HttpCookie loginCookie1 = new HttpCookie("loginCookie");
    Response.Cookies["loginCookie1"].Value = LoginUser.UserName;
    Response.Cookies.Add(loginCookie1);
} 
```

这是在 shop.aspx

```
protected void btnAddCart_Click(object sender, EventArgs e)
{ 
     HttpCookie myCookie = new HttpCookie(dvProduct.DataKey.Value.ToString());
     myCookie["Category"] = dvProduct.DataKey["Category"].ToString();
     myCookie["Product"] = dvProduct.DataKey["Product"].ToString();
     myCookie["Quantity"] = txtQuantity.Text;
     myCookie["Price"] = dvProduct.DataKey["Price"].ToString();
     myCookie.Expires = DateTime.Now.AddDays(1d);
     Response.Cookies.Add(myCookie);
     Response.Redirect("ViewCart.aspx", true);
} 
```

我想从 cookie 中读取用户名的值（在 login.aspx 中设置的值

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-14T04:45:50.603

您基本上需要请求 cookie 在您所在的页面上并不重要是关于 cookie 的解释

[http://msdn.microsoft.com/en-us/library/ms178194.aspx](http://msdn.microsoft.com/en-us/library/ms178194.aspx)

```
HttpCookie aCookie = Request.Cookies["loginCookie"];
string username = Server.HtmlEncode(aCookie.Value); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-14T04:54:15.403

您设置 loginCookie 的代码看起来很奇怪：

```
HttpCookie loginCookie1 = new HttpCookie("loginCookie"); 
Response.Cookies["loginCookie1"].Value = LoginUser.UserName; // <--- strange!!!!
Response.Cookies.Add(loginCookie1); 
```

很可能您的 cookie 没有发送到浏览器 - 请使用[Fiddler](http://www.fiddler2.com)等 HTTP 调试器进行检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T04:40:50.730

这应该这样做：

```
var userName = Request.Cookies["loginCookie"].Value; 
```

# c# - 对于这个自动登录的 Web 服务构造函数示例，我应该如何使布尔线程安全？

> ID：10151047
> 
> 赞同：0
> 
> 时间：2012-04-14T04:36:54.013
> 
> 标签：c#, multithreading, web-services, thread-safety

我相信我已经在这里成功实施了“自旋锁”，但我想研究这样的最佳实践。

我应该使用互锁类吗？如果是这样，哪种方法适合布尔值类型？否则，实现此目的的正确方法是什么（如果我的方法还不是）？

```
// This is a class to encapsulate a bool value that can be used
// as a signal from one thread to another.
public class Condition
{
    private object locker = new object();
    private bool isDone;

    public void Wait()
    {
        while (true) if (!this.Done) Thread.Sleep(100); else break;
    }

    public void Set()
    {
        this.Done = true;
    }

    private bool Done
    {
        get { lock (this.locker) { return this.isDone; } }
        set { lock (this.locker) { this.isDone = value; } }
    }
}

// This is an extension to a WSDL generated web service.
// The idea is to login to the web service as part of instance construction.
public partial class SforceService
{
    private Condition done = new Condition();

    public SforceService(string login, string password)
        : this()
    {
        this.loginCompleted += new loginCompletedEventHandler(SforceService_loginCompleted);
        this.loginAsync(login, password);
        this.done.Wait();
    }

    void SforceService_loginCompleted(object sender, loginCompletedEventArgs e)
    {
        var loginResult = e.Result;
        this.SessionHeaderValue = new SessionHeader();
        this.Url = loginResult.serverUrl;
        this.SessionHeaderValue.sessionId = loginResult.sessionId;
        this.done.Set();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T05:02:30.477

我了解您正在尝试重新实现[`ManualResetEvent`](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx).

看一下 Set() 和 WaitOne() 方法，它们可能是您正在寻找的。

# asp.net - MembershipUser IsOnline 总是返回 false

> ID：10151053
> 
> 赞同：0
> 
> 时间：2012-04-14T04:38:40.950
> 
> 标签：asp.net, asp.net-membership

与我搜索过的其他帖子相反，这些帖子存在 IsOnline 始终返回 true 的问题，我发现 IsOnline 始终返回 false。我同时使用了 Membership.GetUser(username, false) 和 GetAllUsers() 但都将所有用户的 IsOnline 设置为 false。我知道至少它应该让我在线，因为我刚刚登录。（或者我错过了 IsOnline 的全部内容？）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T05:12:06.700

IsOnline 只检查在 web.config 中指定的 TimeFrame 中有多少用户在线。

每次登录的用户访问页面时，会员资格都会保存`LastActivityDate`.

也许你是假的，因为你没有`UserIsOnlineTimeWindow`在你的会员提供者的 web.config 部分设置。[在此处查找文档](http://msdn.microsoft.com/en-us/library/system.web.security.membership.userisonlinetimewindow.aspx)

# python - Python 和 C 文件同时读/写

> ID：10151055
> 
> 赞同：0
> 
> 时间：2012-04-14T04:38:50.890
> 
> 标签：python, c, multithreading

我有一些 C 代码，我在 Python 中对其进行了扩展。扩展的 C 代码具有将一些结构附加到二进制文件的功能：

```
void writefunction(const struct struct1* some,const u_char* struct2){
    f=fopen('save.bin',"ab");
    if(f==NULL){
        printf("Unable to open file");
        exit(-1);
    }
    fwrite(some,sizeof(struct struct1),1,f);
    fwrite(struct2,sizeof(u_char),4,f);
    fclose(f);
} 
```

现在我已经在 Python 中导入了代码。我想在 Python 中启动两个线程：一个将运行这个 writefunction()，另一个将读取同一个文件。writefunction 在一个线程中正常工作，但从文件读取的 Python 函数不工作。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T06:15:35.723

不要这样做。

这里的问题是，“save.bin”文件的内容取决于您使用的 C 编译器 - 可能还取决于您传递给编译器的一些命令行参数。

结构`struct1`在内存中的内部保存方式取决于编译器——至少在使用位域时；编译器也可能添加填充（参见下面的示例）。您将内部存储器结构写入文件。

如果您想与用不同语言编写的程序交换数据（并且可能在不同的服务器上运行），您应该使用一些“有线”（序列化）协议来转换它们。

建议：也许选择 JSON 或 XML。

填充结构的示例：

```
#include <stdio.h>

struct struct1 {
   char a;
   long b;
};

int main() {
   printf("%d %d %d\n", sizeof(char), sizeof(long), sizeof(struct struct1));
   return 0;
} 
```

一种可能的输出是：

```
1 8 16 
```

# html - 防止溢出内容占用空间

> ID：10151056
> 
> 赞同：0
> 
> 时间：2012-04-14T04:39:25.100
> 
> 标签：html, css

我有一个容器 div `listings_container`，其中包含可变数量的 div `listing`，每个都清除它之前的 div 。容器 div`listings_container`具有 CSS 属性`overflow-x: hidden; overflow-y: auto;`和一个固定`width`的和一个已`max-height`定义的。

**问题：**如何防止溢出的 div 占用空间？Say`listings_container`的高度为 30`listing`像素，高度为 10 像素。如果我们有 4 个或更多的`listing`内部`listings_container`，我们`listing`将隐藏第 4 个 div 和一个垂直滚动条`listing_cotainer`。溢出的 div 占用的空间`listing`可能导致`listings_container`清除另一个浮动 div，这是我想要避免的。

任何帮助真的很感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T04:44:58.387

如果您将其保留为自动，溢出内容将始终超出控件的边界，这会产生非常无法使用的效果。如果您设置 div 的大小，您通常不想使用 auto ，除非您知道内容不会溢出。

您的选择是隐藏或滚动以保持大小固定。我个人为此使用滚动容器，这基本上是使用溢出-y：滚动；然后使用固定高度。

# java - Hangman GUI 收到空指针异常并且找不到位置

> ID：10151064
> 
> 赞同：-1
> 
> 时间：2012-04-14T04:40:50.063
> 
> 标签：java, swing, user-interface, nullpointerexception

我目前正在将 Hangman GUI 作为硬件分配工作，并且我已经完成了所有代码（我认为）但是，我得到了一个 nullpointerexception 并且无法弄清楚它的起源，这让我相当愤怒。我需要第二双眼睛来帮助我弄清楚我在哪里犯了错误以及我需要做些什么来纠正它。提前致谢！

NPE 发生在：

```
alphabet = "abcdefghijklmnopqrxtuvwxyz";
            numLetters = 26;
            for (int count = 0; count < numLetters; count++) {
                letterChoice[count] = new JButton(Character.toString(alphabet
                        .charAt(count)));
                letterChoice[count].addActionListener(new CharacterListener(
                        alphabet.charAt(count)));
                letterChoice[count].setMnemonic(65 + count);
                add(letterChoice[count]);
            } 
```

这是我所有的代码。

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.WindowEvent;

import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.ImageIcon;
import javax.swing.SwingConstants;

public class HangmanPanel extends JPanel {
    private JLabel imageLabel, numberLetters, gameOver, youWin;
    private JLabel[] spaces;
    private ImageIcon[] images;
    private JButton exitProgram, newGame, nextImage;
    private JButton[] letterChoice;
    private int imageNumber, letterNumber, numLetters, guesses;
    private WordList wordRand;
    private String word, alphabet;

    public HangmanPanel() {

        newGame = new JButton("New Game");
        newGame.setEnabled(true);
        newGame.setToolTipText("Press to restart game.");
        newGame.addActionListener(new NewGame());

        exitProgram = new JButton("Exit");
        exitProgram.setEnabled(true);
        exitProgram.setToolTipText("Press to close the program.");
        exitProgram.addActionListener(new ExitGame());

        wordRand = new WordList();
        word = wordRand.getWord();

        images = new ImageIcon[8];
        // Populating the array
        {
            images[0] = new ImageIcon("hangman0.png");
            images[1] = new ImageIcon("hangman1.png");
            images[2] = new ImageIcon("hangman2.png");
            images[3] = new ImageIcon("hangman3.png");
            images[4] = new ImageIcon("hangman4.png");
            images[5] = new ImageIcon("hangman5.png");
            images[6] = new ImageIcon("hangman6.png");
            images[7] = new ImageIcon("hangman7.png");
        }

        setBackground(Color.white);
        imageLabel = new JLabel(images[imageNumber]);
        imageNumber++;
        add(imageLabel);

        alphabet = "abcdefghijklmnopqrxtuvwxyz";
        numLetters = 26;
        for (int count = 0; count < numLetters; count++) {
            letterChoice[count] = new JButton(Character.toString(alphabet
                    .charAt(count)));
            letterChoice[count].addActionListener(new CharacterListener(
                    alphabet.charAt(count)));
            letterChoice[count].setMnemonic(65 + count);
            add(letterChoice[count]);
        }

        spaces = new JLabel[word.length()];
        while (letterNumber < spaces.length) {
            numberLetters = new JLabel("___");
            add(numberLetters);
            letterNumber++;
        }

        add(nextImage);
        add(newGame);
        add(exitProgram);

    }

    private class NewGame implements ActionListener {
        public void actionPerformed(ActionEvent event) {
            imageLabel.setIcon(images[0]);
            imageNumber = 0;
            imageNumber++;
            imageLabel.repaint();
        }
    }

    private class ExitGame implements ActionListener {
        public void actionPerformed(ActionEvent e) {
            System.exit(0);
        }
    }

    private class CharacterListener implements ActionListener {
        public CharacterListener(char charAt) {

        }

        public void actionPerformed(ActionEvent e) {
            while (guesses < images.length) {
                int count = 0;
                while (count < word.charAt(count)) {
                    if (letterChoice[count].equals(word.charAt(count))) {
                        spaces[count] = new JLabel("" + letterChoice[count]
                                + "");
                        count++;
                    } else
                        imageLabel.setIcon(images[imageNumber]);
                    imageNumber++;
                    imageLabel.repaint();
                    guesses++;

                }

                if (guesses == 7) {
                    gameOver = new JLabel(
                            "You lose! Press New Game to try again!");
                    add(gameOver);
                } else
                    youWin = new JLabel(
                            "You win! Press New Game to play again or press Exit to remain Victorious!");
                add(youWin);
            }

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T04:54:03.950

NullPointerException 应该告诉您是哪一行导致了问题。您能否发布异常，我们将尝试帮助您找出为什么它会发生在特定行。

如果没有这些信息，可能会出现一些错误。

**第一个可能的错误...** 您没有创建 letterChoice 数组-即您在字母表之前的某处缺少以下内容...

```
letterChoice = new JButton[26]; 
```

**第二个可能的错误...** 您没有创建`nextImage`-即您缺少以下内容...

```
newImage = new JButton("Blah"); 
```

**第三个可能的错误...**

```
 public void actionPerformed(ActionEvent e) {
        while (guesses < images.length) {
            int count = 0;
            while (count < word.charAt(count)) { // probably here
                if (letterChoice[count].equals(word.charAt(count))) { // maybe here too
                    spaces[count] = new JLabel("" + letterChoice[count]
                            + "");
                    count++;
                } else
                    imageLabel.setIcon(images[imageNumber]);
                imageNumber++;
                imageLabel.repaint();
                guesses++;

            } 
```

原因：如果您正在执行类似的命令`word.charAt(count)`，则应首先确保 count 小于单词的长度。将行更改为...

```
while (count < word.length && count < word.charAt(count)) { 
```

**第 4 个可能的错误...** 您的字母列表中没有“s”，而是包含 2 个“s”字符。

# android - 放大到 MapView 路径

> ID：10151067
> 
> 赞同：1
> 
> 时间：2012-04-14T04:41:12.787
> 
> 标签：android, android-mapview

我正在尝试在 Android MapView 上绘制路线，但我发现实际上放大该路径几乎是不可能的。我有以下 gocde

```
Paint mPaint = new Paint();
        mPaint.setDither(true);
        mPaint.setColor(Color.RED);
        mPaint.setStyle(Paint.Style.FILL_AND_STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);
        mPaint.setStrokeWidth(4);
        GeoPoint gP1 = null;
        if (addresses.size() > 0) {
            gP1 = new GeoPoint((int) (addresses.get(0).getLatitude() * 1E6),
                    (int) (addresses.get(0).getLongitude() * 1E6));
        }
        GeoPoint gP2 = null;
        if (addresses2.size() > 0) {
            gP2 = new GeoPoint((int) (addresses2.get(0).getLatitude() * 1E6),
                    (int) (addresses2.get(0).getLongitude() * 1E6));
        }
        Point p1 = new Point();
        Point p2 = new Point();
        Path path = new Path();
        projection.toPixels(gP1, p1);
        projection.toPixels(gP2, p2);
        path.moveTo(p2.x, p2.y);
        path.lineTo(p1.x,p1.y);
        canvas.drawPath(path, mPaint); 

        MapController mc = mymapView.getController(); 
        mc.setZoom(5); 
        mymapView.invalidate(); 
```

我尝试在南卡罗来纳州放置两个位置并使用 mc.animateTo(gP1); 放大到其中一个点；但每次我这样做时，它都会放大到断箭，好的，而不是 gP1 的实际坐标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T05:07:28.903

使用下面的代码通过放大/缩小来绘制路径路径:::

```
public class RoutePath extends MapActivity { 
    /** Called when the activity is first created. */ 

    MapView mapView;
    private RoutePath _activity;
    private CustomDialog _customDialog; 
    GeoPoint srcGeoPoint,destGeoPoint;
    private static List<Overlay> mOverlays;

    @Override 
    public void onCreate(Bundle savedInstanceState) { 
        super.onCreate(savedInstanceState); 
        setContentView(R.layout.main); 
        _activity = this;

        MapView mapView = (MapView) findViewById(R.id.mapview); 
        if(Constants.LOG)Log.d("source geo point","route path:::"+Constants.GPSLAT+"::::"+Constants.GPSLNG);

        double src_lat = getIntent().getExtras().getDouble("SRCLAT");
        double src_long = getIntent().getExtras().getDouble("SRCLNG");

        double dest_lat = getIntent().getExtras().getDouble("DESTLAT");
        double dest_long = getIntent().getExtras().getDouble("DESTLNG");
        srcGeoPoint = new GeoPoint((int) (src_lat * 1E6),(int) (src_long * 1E6)); 
        destGeoPoint = new GeoPoint((int) (dest_lat * 1E6),(int) (dest_long * 1E6)); 

        List<Overlay> mapOverlays = mapView.getOverlays();
        Drawable srcdrawable = this.getResources().getDrawable(R.drawable.pin_green);
        CustomItemizedOverlay srcitemizedOverlay = new CustomItemizedOverlay(srcdrawable, this);
        OverlayItem srcoverlayitem = new OverlayItem(srcGeoPoint, "Hello!", "This is your Location.");

        Drawable destdrawable = this.getResources().getDrawable(R.drawable.pin_red);
        CustomItemizedOverlay destitemizedOverlay = new CustomItemizedOverlay(destdrawable, this);
        OverlayItem destoverlayitem = new OverlayItem(destGeoPoint, "Hello!", "This is dest Location.");

        srcitemizedOverlay.addOverlay(srcoverlayitem);
        destitemizedOverlay.addOverlay(destoverlayitem);

        mapOverlays.add(srcitemizedOverlay);
        mapOverlays.add(destitemizedOverlay);

        connectAsyncTask _connectAsyncTask = new connectAsyncTask();
        _connectAsyncTask.execute();         
        mapView.setBuiltInZoomControls(true);
        mapView.displayZoomControls(true);
        mOverlays = mapView.getOverlays();
        mapView.getController().animateTo(srcGeoPoint); 
        mapView.getController().setZoom(12); 
    } 
    @Override  
    protected void onStop() {  
        super.onStop();  
        //stop custom dialog 
    }  

    @Override 
    protected boolean isRouteDisplayed() { 
        // TODO Auto-generated method stub 
        return false; 
    } 

    private class connectAsyncTask extends AsyncTask<Void, Void, Void>{
        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();
            //customDialog show();
        }
        @Override
        protected Void doInBackground(Void... params) {
            // TODO Auto-generated method stub
            fetchData();
            return null;
        }
        @Override
        protected void onPostExecute(Void result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);            
            if(doc!=null){
                Overlay ol = new MyOverLay(_activity,srcGeoPoint,srcGeoPoint,1);
                mOverlays.add(ol);
                NodeList _nodelist = doc.getElementsByTagName("status");
                Node node1 = _nodelist.item(0);
                String _status1  = node1.getChildNodes().item(0).getNodeValue();
                if(_status1.equalsIgnoreCase("OK")){
                    NodeList _nodelist_path = doc.getElementsByTagName("overview_polyline");
                    Node node_path = _nodelist_path.item(0);
                    Element _status_path = (Element)node_path;
                    NodeList _nodelist_destination_path = _status_path.getElementsByTagName("points");
                    Node _nodelist_dest = _nodelist_destination_path.item(0);
                    String _path  = _nodelist_dest.getChildNodes().item(0).getNodeValue();
                    List<GeoPoint> _geopoints = decodePoly(_path);
                    GeoPoint gp1; 
                    GeoPoint gp2; 
                    gp2 = _geopoints.get(0);
                    for(int i=1;i<_geopoints.size();i++) // the last one would be crash 
                    { 

                        gp1 = gp2;
                        gp2 = _geopoints.get(i);
                        Overlay ol1 = new MyOverLay(gp1,gp2,2,Color.BLUE);
                        mOverlays.add(ol1);
                    } 
                    Overlay ol2 = new MyOverLay(_activity,destGeoPoint,destGeoPoint,3);
                    mOverlays.add(ol2);

                    //customDialog dismiss();

                }else{
                    Util.showAlertGoBack(_activity,"Unable to find the route");
                }
                //              String _status = node.getNodeValue();
                if(Constants.LOG)Log.d("sdsds","dsds"+_status1);                
                Overlay ol2 = new MyOverLay(_activity,destGeoPoint,destGeoPoint,3);
                mOverlays.add(ol2);
                // customDialog dismiss();
            }else{
                //Util.showAlertGoBack(_activity,"Unable to find the route");
            }

        }

    }
    Document doc = null;
    private void fetchData()
    {
        StringBuilder urlString = new StringBuilder();
        urlString.append("http://maps.google.com/maps/api/directions/xml?origin=");
        urlString.append( Double.toString((double)srcGeoPoint.getLatitudeE6()/1.0E6 )); 
        urlString.append(","); 
        urlString.append( Double.toString((double)srcGeoPoint.getLongitudeE6()/1.0E6 )); 
        urlString.append("&destination=");//to 
        urlString.append( Double.toString((double)destGeoPoint.getLatitudeE6()/1.0E6 )); 
        urlString.append(","); 
        urlString.append( Double.toString((double)destGeoPoint.getLongitudeE6()/1.0E6 )); 
        urlString.append("&sensor=true&mode=driving"); 
        if(Constants.LOG)Log.d("xxx","URL="+urlString.toString());          
        HttpURLConnection urlConnection= null; 
        URL url = null; 
        try 
        { 
            url = new URL(urlString.toString()); 
            urlConnection=(HttpURLConnection)url.openConnection(); 
            urlConnection.setRequestMethod("GET"); 
            urlConnection.setDoOutput(true); 
            urlConnection.setDoInput(true); 
            urlConnection.connect(); 
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance(); 
            DocumentBuilder db = dbf.newDocumentBuilder();
            doc = (Document) db.parse(urlConnection.getInputStream());//Util.XMLfromString(response);
        }catch (MalformedURLException e){ 
            e.printStackTrace(); 
        }catch (IOException e){ 
            e.printStackTrace(); 
        }catch (ParserConfigurationException e){ 
            e.printStackTrace(); 
        }
        catch (SAXException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    private List<GeoPoint> decodePoly(String encoded) {

        List<GeoPoint> poly = new ArrayList<GeoPoint>();
        int index = 0, len = encoded.length();
        int lat = 0, lng = 0;

        while (index < len) {
            int b, shift = 0, result = 0;
            do {
                b = encoded.charAt(index++) - 63;
                result |= (b & 0x1f) << shift;
                shift += 5;
            } while (b >= 0x20);
            int dlat = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
            lat += dlat;

            shift = 0;
            result = 0;
            do {
                b = encoded.charAt(index++) - 63;
                result |= (b & 0x1f) << shift;
                shift += 5;
            } while (b >= 0x20);
            int dlng = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
            lng += dlng;

            GeoPoint p = new GeoPoint((int) (((double) lat / 1E5) * 1E6),
                    (int) (((double) lng / 1E5) * 1E6));
            poly.add(p);
        }

        return poly;
    }
} 
```

MyOverLay.java

```
public class MyOverLay extends Overlay 
{ 
    private GeoPoint gp1; 
    private GeoPoint gp2; 
    //private int mRadius=6; 
    private int mode=0; 
    private int defaultColor; 
    private String text=""; 
    private Bitmap img = null; 
    Context mContext;

    public MyOverLay(Context context,GeoPoint gp1,GeoPoint gp2,int mode) // GeoPoint is a int. (6E) 
    { 
        this.gp1 = gp1; 
        this.gp2 = gp2; 
        this.mode = mode; 
        this.mContext = context;
        defaultColor = 999; // no defaultColor 

    } 

    public MyOverLay(GeoPoint gp1,GeoPoint gp2,int mode, int defaultColor) 
    { 
        this.gp1 = gp1; 
        this.gp2 = gp2; 
        this.mode = mode; 
        this.defaultColor = defaultColor; 
    } 
    public void setText(String t) 
    { 
        this.text = t; 
    } 
    public void setBitmap(Bitmap bitmap) 
    { 
        this.img = bitmap; 
    } 
    public int getMode() 
    { 
        return mode; 
    } 

    @Override 
    public boolean draw 
    (Canvas canvas, MapView mapView, boolean shadow, long when) 
    { 
        Projection projection = mapView.getProjection(); 
        if (shadow == false) 
        { 
            Paint paint = new Paint(); 
            paint.setAntiAlias(true); 
            Point point = new Point(); 
            projection.toPixels(gp1, point); 
            // mode=1&#65306;start 
            if(mode==1) 
            { 
                if(defaultColor==999) 
                    paint.setColor(Color.BLUE); 
                else 
                    paint.setColor(defaultColor);                
                // start point
            } 
            // mode=2&#65306;path 
            else if(mode==2) 
            { 
                if(defaultColor==999) 
                    paint.setColor(Color.RED); 
                else 
                    paint.setColor(defaultColor); 
                Point point2 = new Point(); 
                projection.toPixels(gp2, point2); 
                paint.setStrokeWidth(5); 
                paint.setAlpha(120); 
                canvas.drawLine(point.x, point.y, point2.x,point2.y, paint); 

            } 
            /* mode=3&#65306;end */ 
            else if(mode==3) 
            { 
                /* the last path */ 

                if(defaultColor==999) 
                    paint.setColor(Color.GREEN); 
                else 
                    paint.setColor(defaultColor); 
                Point point2 = new Point(); 
                projection.toPixels(gp2, point2); 
                paint.setStrokeWidth(5); 
                paint.setAlpha(120); 
                canvas.drawLine(point.x, point.y, point2.x,point2.y, paint); 
                /* end point */

            } 
        } 
        return super.draw(canvas, mapView, shadow, when); 
    } 

} 
```

# sql - 轻量级数据库（SQL 或 NoSQL）

> ID：10151070
> 
> 赞同：17
> 
> 时间：2012-04-14T04:41:42.590
> 
> 标签：sql, database, memory, nosql

我目前正在开发一个必须存在于内存可用性非常低的虚拟机上的网站（目前我被告知期望 512mb）。不幸的是，至少在不久的将来，数据库和 Web 应用程序必须是同一台服务器。

现在我在这里阅读了一些问题并尝试进行自己的研究，但有很多选择可供选择。本质上，什么是我可以安装的足够轻巧的数据库服务器？SQL 或 NoSQL 并不重要。它不会是数据库密集型的，但我不想受到我现在选择的任何限制。这意味着，如果可能的话，通往多服务器扩展的道路会很好，但显然不是现阶段的要求。

我目前的想法是 MongoDB 或 MySQL，但我不确定它们是否是最佳选择。

我的 Web 应用程序使用 PHP 在 nginx 上运行，我认为这是目前最好的选择，所以我主要关心的是数据库端。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-14T05:04:00.693

**如果您需要最**轻量级的数据库，我会说[sqlite 3](http://sqlite.org/)。它是为此任务而设计的，[体积小，速度快](http://sqlite.org/features.html)，根据我的经验，它可靠且易于使用。

我自己不使用 php，但这里似乎有[支持](http://cl.php.net/sqlite)。

sqlite 几乎支持“标准”sql，除了它不强制类型 - 您可以将列定义为文本，但如果您愿意，可以存储和检索整数值。实际上，这没什么大不了的，只要您不使用此“功能”，您将来可以轻松切换到更大的数据库。

**但是，在实践中**，我会从 mysql 开始，因为它可能已经安装并且可用。如果它给您带来内存使用问题，请切换到 sqlite。但是对于一个简单的、没有多余装饰的数据库，您不妨从 mysql 开始。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-14T05:00:53.903

在关系数据库或面向文档的数据库之间进行选择时，最好关注特定应用程序的数据存储需求。如果更适合关系型数据库的应用程序是在 MongoDB 等面向文档的数据库之上编写的，那么它的效率会降低，并且会消耗更多的资源。

# facebook - facebook openid 提供者

> ID：10151072
> 
> 赞同：0
> 
> 时间：2012-04-14T04:42:08.637
> 
> 标签：facebook, openid

我使用我的 Google 用户名和密码作为 Open-ID 来登录我自己的网站。我需要使用我的 Facebook 用户名和密码作为 Open-ID 登录，而不是使用谷歌。请参阅此链接 twiki.org/cgi-bin/view/Codev/OpenIDProviderList ，它为我提供了相应提供商的 Open-ID 端点。由于我的研究，我发现 facebook 没有端点。它有一种独特的方式来实现 Open-ID 的概念。请帮助我实现我的目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T05:41:14.997

Facebook 不能用作 OpenID，但是，

根据[DotNetOpenAuth](https://dotnetopenauth.uservoice.com/forums/14800-general/suggestions/678767-oauth-2-0-support) Facebook 登录支持通过 OAuth 2.0 包含在 DotNetOpenAuth v4.0 及更高版本中。

> Facebook Connect 现在使用 DotNetOpenAuth 将支持的 OAuth 2.0。 [https://dotnetopenauth.uservoice.com/forums/14800-general/suggestions/678767-oauth-2-0-support](https://dotnetopenauth.uservoice.com/forums/14800-general/suggestions/678767-oauth-2-0-support) OAuth 2.0 的 CTP 包括 Facebook 登录示例。

# java - 泛型 Java 和类型参数的影子

> ID：10151077
> 
> 赞同：7
> 
> 时间：2012-04-14T04:43:43.850
> 
> 标签：java, generics

这段代码似乎工作正常

```
class Rule<T>
{

    public <T>Rule(T t)
    {

    }
    public <T> void Foo(T t)
    {

    }
 } 
```

1.  方法类型参数是否会影响类类型参数？
2.  此外，当您创建一个对象时，它是否使用类的类型参数？

例子

```
Rule<String> r = new Rule<String>(); 
```

**在它们不冲突**的情况下，这通常适用于类的类型参数吗？我的意思是当只有类有类型参数时，没有构造函数，或者这是否在构造函数中寻找类型参数？如果他们**确实发生冲突**，这将如何改变？

**请参阅下面的讨论**

如果我有一个函数调用

```
x = <Type Parameter>method(); // this is a syntax error even inside the function or class ; I must place a this before it, why is this, and does everything still hold true. Why don't I need to prefix anything for the constructor call. Shouldn't Oracle fix this. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-14T04:54:20.137

您的所有s 都是不同的，但只有在使用[完整语法](http://docs.oracle.com/javase/tutorial/java/generics/genmethods.html)`T`调用方法时才能看到它：

例如，此代码是有效的：

```
new <Float>Rule<Integer>().<Character>Foo(); 
```

只是为了让这更容易解释，让我们假设您的代码是这样的：

```
class Rule<A>
{

    public <B>Rule()
    {

    }
    public <C> void Foo()
    {

    }
 } 
```

然后您可以显式声明泛型类型，例如：

```
new <B>Rule<A>().<C>Foo(); 
```

如果类型具有相同的名称，将选择最里面的类型（`T`在方法上，而不是在类上）：

使用此代码，获取参数：

```
class Rule<T>
{

    public <T>Rule(T t)
    {

    }
    public <T> void Foo(T t)
    {

    }
} 
```

那么这是有效的：

```
new <Float>Rule<Integer>(3.2f); 
```

请注意，`T`在构造函数中是`Float`，不是`Integer`。

另一个例子：

```
class Example<T> {

    public <T> void foo1() {
        // T here is the <T> declared on foo1
    }

    public void foo2() {
        // T here is the <T> declared on the class Example
    }
} 
```

我发现另一个问题涉及[调用具有显式泛型类型的方法，而在它们之前没有任何东西](https://stackoverflow.com/questions/2050317/invoking-statically-imported-method-with-explicit-type-parameters)。看起来静态导入和同类方法调用是一样的。`<Type>`由于某种原因，Java 似乎不允许您开始一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T04:54:31.097

> 方法类型参数是否会影响类类型参数？

构造函数的`<T>`声明不引用类类型。所以是的，它隐藏了类类型参数。

在这种情况下，它用作可以与构造函数一起使用的泛型类型参数，例如作为参数。试试这个构造函数：

```
public <P> Rule(P arg1, P arg2) {    
} 
```

正如你所看到的，我定义了一个类型`<P>`，然后我使用它来确保参数是 type `P`。在您的情况下，您正在声明一个对构造函数有效的类型而不使用它。

看看这个[页面](http://docs.oracle.com/javase/tutorial/java/generics/genmethods.html)。

> 此外，当您创建一个对象时，它是否使用类的类型参数？

每个泛型类型定义都具有作为变量的作用域。所以出构造函数返回有效的类类型。

# android - 如何在开发前了解我们的 Android App 或项目的成本？

> ID：10151078
> 
> 赞同：-2
> 
> 时间：2012-04-14T04:43:58.707
> 
> 标签：android

实际上，我在 vb.net/C#.net 上开发了一个基于客户端-服务器的应用程序，现在我想在 Android 上移植或发布该客户端-服务器应用程序。我知道使它对我的 Android 设备有用的工具。而且我还提出了一些重要的观点来找出该项目的成本，但我是新手，所以我不明白如何在 android 中为特定任务分配或修复金额。我的观点是：

1.  开发用于显示数据的爵士外观用户界面。

2.  检查和使用设备的网络连接状态。

3.  使用 Web 服务访问客户端-服务器应用程序的方法/功能。

4.  还要检查和使用 Web 服务的状态是否可用，并根据状态使用功能或获取数据。

5.  同样主要的是维护用于存储数据和通过 Web 服务获取数据的服务器。

对于查找和分配成本/价格/金额到 Android 应用程序的任何帮助，我们将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T04:53:22.910

这通常取决于您的目标市场的规模。如果你有一个很大的目标市场，你可以让这个应用程序以低价出售，因为数量和规模经济会在你的收入增加的同时降低你的成本。

如果您有一个较小的目标市场，您将不得不提高应用程序的价格，以收回交付到如此小的市场的成本，并为利润损失转正。

在大多数情况下，您可以忽略开发应用程序的成本。开发主要是一次性的固定成本，会随着时间的推移而消失。应用程序本身会进行一些维护，随着时间的推移会花费金钱，但这还不足以担心。您的服务器维护将是您成本的首当其冲，但如果您能够将大部分存储和带宽外包给亚马逊极其便宜的随用随付服务器，那么您的运行成本也会相对较低。

您的大部分预算将用于营销（取决于您正在开发的应用程序的类型）。您是否应该与媒体合作，或者通过移动设备、Facebook 等上的广告进行营销。这是您大部分资金的去向。确保用转化产生的收入来抵消转化成本。

如果你给我更多细节，我可以更具体并帮助你更多，但我必须继续，我必须保持广泛。祝你事业顺利。

# python - python中的不可变对象

> ID：10151080
> 
> 赞同：0
> 
> 时间：2012-04-14T04:44:17.800
> 
> 标签：python, variable-assignment, immutability, mutable

我看到一篇关于不可变对象的文章。

它说何时：
`variable = immutable`
将不可变分配给变量。

例如
`a = b # b is a immutable`
它说在这种情况下`a`是指`a copy of b`，不是`reference to b`。如果 b 是`mutable`, 将`a`是`a reference to b`

所以：

```
a = 10
b = a
a =20
print (b) #b still is 10 
```

但在这种情况下：

```
a = 10
b = 10
a is b # return True
print id(10)
print id(a)
print id(b) # id(a) == id(b) == id(10) 
```

if`a`是 的 副本`10`,`b`也是 的 副本`10`, 为什么`id(a) == id(b) == id(10)?`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T04:48:26.100

“简单”的不可变文字（特别是 -1 和 255 之间的整数）是**interned**，这意味着即使绑定到不同的名称，它们仍然是同一个对象。

```
>>> a = 'foo'
>>> b = 'foo'
>>> a is b
True 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-14T04:46:52.590

虽然那篇文章对于某些语言可能是正确的，但对于 Python 来说是错误的。

当您*在 Python 中进行任何正常分配时*：

```
some_name = some_name_or_object 
```

你没有复制任何东西。您只需将名称指向作业右侧的对象。

可变性无关紧要。

更具体地说，原因：

```
a = 10
b = 10
a is b 
```

is `True`, is that `10`is interned - 这意味着 Python`10`在内存中保留一个，并且任何设置为`10`指向相同`10`的 .

如果你这样做

```
a = object()
b = object()
a is b 
```

你会得到`False`，但是

```
a = object()
b = a
a is b 
```

仍然会`True`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-14T09:07:20.450

因为已经解释了实习，所以我将只讨论可变/不可变的东西：

> 将不可变对象分配给变量。

在谈论实际发生的事情时，我不会选择这种措辞。

我们有对象（存在于内存中的东西）和访问这些对象的方法：名称（或变量），它们被“绑定”到引用的对象。（你可以对物体说重点）

名称/变量是相互独立的，它们可以碰巧绑定到同一个对象，也可以绑定到不同的对象。重新定位一个这样的变量不会影响任何其他变量。

不存在按值传递或按引用传递这样的事情。在 Python 中，您**总是**“按对象”传递/分配。在将变量分配或传递给函数时，Python 从不创建副本，它总是传递/分配您已经拥有的相同对象。

现在，当您尝试修改不可变对象时，会发生什么？如前所述，该对象是不可变的，因此会发生以下情况：Python 创建一个修改后的*副本*。

至于你的例子：

```
a = 10
b = a
a =20
print (b) #b still is 10 
```

这与可变性无关。在第一行，将带有值的 int 对象绑定`10`到 name `a`。在第二行，您将引用的对象绑定`a`到 name `b`。

在第三行，您将带有值的 int 对象绑定`20`到 name `a`，这不会更改 name`b`绑定的内容！

> 它说在这种情况下 a 是指 b 的副本，而不是对 b 的引用。如果 b 是可变的，则 a 将是对 b 的引用

如前所述，Python中没有*引用之类的东西。*Python 中的名称绑定到对象。不同的名称（或变量）可以绑定到同一个对象，但不同的名称本身之间没有联系。当你修改东西时，你修改了*objects*，这就是为什么绑定到该对象的所有其他名称“看到更改”，它们绑定到你修改过的同一个对象，对吧？

如果您将名称绑定到不同的对象，这就是发生的情况。其他名字没有魔法，它们保持原样。

至于带有列表的示例：

```
In [1]: smalllist = [0, 1, 2] 
In [2]: biglist = [smalllist]    
In [3]: biglist
Out[3]: [[0, 1, 2]] 
```

而不是 In[1] 和 In[2]，我可能会写：

```
In [1]: biglist = [[0, 1, 2]]
In [2]: smalllist = biglist[0] 
```

这是等价的。

这里要看到的重要一点是 biglist 是一个包含一个项目的列表。这一项当然是一个对象。它是一个列表这一事实并没有让人联想到什么魔法，它只是一个简单的对象，恰好是一个列表，我们将它附加到 name 上`smalllist`。

因此，访问 biglist[i] 与访问 smalllist 完全相同，因为它们是同一个对象。我们从不复制，我们传递了对象。

```
In [14]: smalllist is biglist[0]
Out[14]: True 
```

因为列表是可变的，所以我们可以改变 smallist，并在 biglist 中看到变化。为什么？因为我们实际上修改了smallist所指的对象。我们仍然拥有相同的对象（除了它已更改的事实）。但是 biglist 会“看到”这种变化，因为作为它的第一项，它引用了同一个对象。

```
In [4]: smalllist[0] = 3
In [5]: biglist
Out[5]: [[3, 1, 2]] 
```

当我们“加倍”列表时也是如此：

```
In [11]: biglist *= 2
In [12]: biglist
Out[12]: [[0, 1, 2], [0, 1, 2]] 
```

发生了什么：我们有一个列表：[object1, object2, object3]（这是一个通用示例）我们得到的是：[object1, object2, object3, object1, object2, object3]：它只会*插入*（即修改"biglist") 列表末尾的所有项目。同样，我们插入对象，我们不会神奇地创建副本。

因此，当我们现在更改 biglist 的第一项中的一项时：

```
In [20]: biglist[0][0]=3
In [21]: biglist
Out[21]: [[3, 1, 2], [3, 1, 2]] 
```

我们也可以改变`smalllist`，因为出于所有意图和目的，`biglist`可以表示为：`[smalllist, smalllist]`- 它包含两次相同的对象。

# php - 在 jquery 选项卡中提交表单

> ID：10151082
> 
> 赞同：0
> 
> 时间：2012-04-14T04:44:35.507
> 
> 标签：php, jquery, forms, jquery-ui

我开始使用 jquery 和 jquery-ui。我在尝试提交选项卡内的表单时遇到问题。一旦我点击“提交”，页面就会自行刷新，选项卡消失了，并且 url 更改为选项卡的功能 url。提交按钮正在工作，我得到了想要的结果。但是，它与选项卡不在同一页面上。

有谁知道如何保持页面不刷新？

我的问题的例子：

我有一个名为“index.php”的页面，其中包含 3 个不同的选项卡。其中一个选项卡称为“提交表​​单”，其中我有一个使用 POST 方法的表单，它的源代码来自“form.php”。一旦我点击“提交”按钮，页面刷新，网址从“www.example.com”更改为“www.example.com/form.php”，我在那里得到结果，但页面是“普通的” , 表示它不在选项卡下，只是一个普通页面。

我希望我正确地解释了自己。

谢谢！

编辑：这是我的提交代码：

```
$submit = $_POST['submit'];
$name= $_POST['name'];

if($submit){
echo 'submitted <br><br>';
echo "hello $name";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T04:56:45.947

在 jQuery 中捕获表单提交，然后使用[preventDefault();](https://developer.mozilla.org/en/DOM/event.preventDefault)

```
$(function(){
  $('#formID').on('submit', function(e){
    e.preventDefault();
    var formSrc = $(this).attr('action');
    var formMethod = $(this).attr('method');
    var formData = $(this).serialize();
    $.ajax({
      url: formSrc,
      type: formMethod,
      data: formData,
      success: function(data){
        //work with returned data from requested file
        alert(data);
      }
    });
  });
}); 
```

编辑：

我应该补充一点，我选择使用[on();](http://api.jquery.com/on/) 与默认相反`submit()`。这是因为表单在 DOM.ready 上可能可用也可能不可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-02T16:58:39.963

回答您的第二个问题：“如果我想运行通过同一选项卡中的 php 代码返回的这些信息，我该怎么做？”

让您的 php 脚本以 JSON 格式返回值，例如： $row = mysqli_fetch_array($result,MYSQLI_ASSOC);
回声 json_encode($row); 然后你可以让 javascript 对返回的值做任何你想做的事情，例如 -

```
 $.ajax({
        url: 'sc_getData.php?id=' + ID,
            type:'GET'
    })
    .done(function(myData) { // data = array returned from ajax 
        myData = JSON.parse(myData);    
        for (var i in tFields){
            thisSourceField = sFields[i];
            thisTargetField = tFields[i];
            targetID = '#' + thisTargetField;
            thisValue = myData[thisSourceField];
            $(targetID).val( thisValue );
            console.log(targetID + ': ' + thisValue);
        }
}) 
```

我已经为目标和源字段设置了数组。源字段数组匹配 php 脚本返回的字段名称，而目标字段数组将匹配要填充返回值的表单字段 id。

# mongodb - 通过 Opscode Chef 客户端安装 mongodb 食谱时出现 gpgkeys 主机错误

> ID：10151085
> 
> 赞同：1
> 
> 时间：2012-04-14T04:44:36.983
> 
> 标签：mongodb, amazon-ec2, ubuntu-10.04, chef-infra, amazon-vpc

我正在尝试在 amzaon Virtual Private Cloud 的 ubuntu 10.04 上使用 opscode chef 安装 mongodb 食谱。我的错误堆栈是：

```
[Sat, 14 Apr 2012 04:26:00 +0000] INFO: Processing ruby_block[set-env-java-home] action create (java::openjdk line 36)
[Sat, 14 Apr 2012 04:26:00 +0000] INFO: ruby_block[set-env-java-home] called
[Sat, 14 Apr 2012 04:26:00 +0000] INFO: Processing ruby_block[update-java-alternatives] action nothing (java::openjdk line 43)
[Sat, 14 Apr 2012 04:26:00 +0000] INFO: Processing package[openjdk-6-jdk] action install (java::openjdk line 79)
[Sat, 14 Apr 2012 04:28:03 +0000] INFO: package[openjdk-6-jdk] installed version 6b20-1.9.13-0ubuntu1~10.04.1
[Sat, 14 Apr 2012 04:28:03 +0000] INFO: Processing execute[apt-get update] action nothing (mongodb::10gen_repo line 28)
[Sat, 14 Apr 2012 04:28:03 +0000] INFO: Processing apt_repository[10gen] action add (mongodb::10gen_repo line 32)
[Sat, 14 Apr 2012 04:28:03 +0000] INFO: Processing execute[install-key 7F0CEB10] action run (/var/chef/cache/cookbooks/apt/providers/repository.rb line 23)
[Sat, 14 Apr 2012 04:28:03 +0000] INFO: execute[install-key 7F0CEB10] sh(apt-key adv --keyserver keyserver.ubuntu.com --recv 7F0CEB10)
Executing: gpg --ignore-time-conflict --no-options --no-default-keyring --secret-keyring /etc/apt/secring.gpg --trustdb-name /etc/apt/trustdb.gpg --keyring /etc/apt/trusted.gpg --primary-keyring /etc/apt/trusted.gpg --keyserver keyserver.ubuntu.com --recv 7F0CEB10
gpgkeys: HTTP fetch error 7: couldn't connect to host
[Sat, 14 Apr 2012 04:28:24 +0000] ERROR: execute[install-key 7F0CEB10] (/var/chef/cache/cookbooks/apt/providers/repository.rb line 23) has had an error
[Sat, 14 Apr 2012 04:28:24 +0000] ERROR: apt_repository[10gen] (mongodb::10gen_repo line 32) has had an error
[Sat, 14 Apr 2012 04:28:24 +0000] ERROR: apt_repository[10gen] (/var/chef/cache/cookbooks/mongodb/recipes/10gen_repo.rb:32:in `from_file') had an error:
apt_repository[10gen] (mongodb::10gen_repo line 32) had an error: Chef::Exceptions::ShellCommandFailed: execute[install-key 7F0CEB10] (/var/chef/cache/cookbooks/apt/providers/repository.rb line 23) had an error: Chef::Exceptions::ShellCommandFailed: Expected process to exit with [0], but received '2'
---- Begin output of apt-key adv --keyserver keyserver.ubuntu.com --recv 7F0CEB10 ----
STDOUT: Executing: gpg --ignore-time-conflict --no-options --no-default-keyring --secret-keyring /etc/apt/secring.gpg --trustdb-name /etc/apt/trustdb.gpg --keyring /etc/apt/trusted.gpg --primary-keyring /etc/apt/trusted.gpg --keyserver keyserver.ubuntu.com --recv 7F0CEB10
gpgkeys: HTTP fetch error 7: couldn't connect to host
STDERR: gpg: requesting key 7F0CEB10 from hkp server keyserver.ubuntu.com
gpg: no valid OpenPGP data found.
gpg: Total number processed: 0
---- End output of apt-key adv --keyserver keyserver.ubuntu.com --recv 7F0CEB10 ----
Ran apt-key adv --keyserver keyserver.ubuntu.com --recv 7F0CEB10 returned 2
/usr/lib/ruby/gems/1.8/gems/chef-0.10.8/bin/../lib/chef/shell_out.rb:206:in `invalid!'
/usr/lib/ruby/gems/1.8/gems/chef-0.10.8/bin/../lib/chef/shell_out.rb:192:in `error!'
/usr/lib/ruby/gems/1.8/gems/chef-0.10.8/bin/../lib/chef/mixin/shell_out.rb:36:in `shell_out!'
/usr/lib/ruby/gems/1.8/gems/chef-0.10.8/bin/../lib/chef/provider/execute.rb:58:in `action_run'
/usr/lib/ruby/gems/1.8/gems/chef-0.10.8/bin/../lib/chef/resource.rb:440:in `send'
/usr/lib/ruby/gems/1.8/gems/chef-0.10.8/bin/../lib/chef/resource.rb:440:in `run_action'
/var/chef/cache/cookbooks/apt/providers/repository.rb:26:in `install_key_from_keyserver'
/var/chef/cache/cookbooks/apt/providers/repository.rb:73:in `class_from_file'
/usr/lib/ruby/gems/1.8/gems/chef-0.10.8/bin/../lib/chef/provider.rb:104:in `instance_eval'
/usr/lib/ruby/gems/1.8/gems/chef-0.10.8/bin/../lib/chef/provider.rb:104:in `action_add'
/usr/lib/ruby/gems/1.8/gems/chef-0.10.8/bin/../lib/chef/resource.rb:440:in `send'
/usr/lib/ruby/gems/1.8/gems/chef-0.10.8/bin/../lib/chef/resource.rb:440:in `run_action'
/usr/lib/ruby/gems/1.8/gems/chef-0.10.8/bin/../lib/chef/runner.rb:45:in `run_action'
/usr/lib/ruby/gems/1.8/gems/chef-0.10.8/bin/../lib/chef/runner.rb:81:in `converge'
/usr/lib/ruby/gems/1.8/gems/chef-0.10.8/bin/../lib/chef/runner.rb:81:in `each'
/usr/lib/ruby/gems/1.8/gems/chef-0.10.8/bin/../lib/chef/runner.rb:81:in `converge'
/usr/lib/ruby/gems/1.8/gems/chef-0.10.8/bin/../lib/chef/resource_collection.rb:94
/usr/lib/ruby/gems/1.8/gems/chef-0.10.8/bin/../lib/chef/resource_collection/stepable_iterator.rb:116:in `call'
/usr/lib/ruby/gems/1.8/gems/chef-0.10.8/bin/../lib/chef/resource_collection/stepable_iterator.rb:116:in `call_iterator_block'
/usr/lib/ruby/gems/1.8/gems/chef-0.10.8/bin/../lib/chef/resource_collection/stepable_iterator.rb:85:in `step'
/usr/lib/ruby/gems/1.8/gems/chef-0.10.8/bin/../lib/chef/resource_collection/stepable_iterator.rb:104:in `iterate'
/usr/lib/ruby/gems/1.8/gems/chef-0.10.8/bin/../lib/chef/resource_collection/stepable_iterator.rb:55:in `each_with_index'
/usr/lib/ruby/gems/1.8/gems/chef-0.10.8/bin/../lib/chef/resource_collection.rb:92:in `execute_each_resource'
/usr/lib/ruby/gems/1.8/gems/chef-0.10.8/bin/../lib/chef/runner.rb:76:in `converge'
/usr/lib/ruby/gems/1.8/gems/chef-0.10.8/bin/../lib/chef/client.rb:312:in `converge'
/usr/lib/ruby/gems/1.8/gems/chef-0.10.8/bin/../lib/chef/client.rb:160:in `run'
/usr/lib/ruby/gems/1.8/gems/chef-0.10.8/bin/../lib/chef/application/client.rb:239:in `run_application'
/usr/lib/ruby/gems/1.8/gems/chef-0.10.8/bin/../lib/chef/application/client.rb:229:in `loop'
/usr/lib/ruby/gems/1.8/gems/chef-0.10.8/bin/../lib/chef/application/client.rb:229:in `run_application'
/usr/lib/ruby/gems/1.8/gems/chef-0.10.8/bin/../lib/chef/application.rb:67:in `run'
/usr/lib/ruby/gems/1.8/gems/chef-0.10.8/bin/chef-client:26
/usr/bin/chef-client:19:in `load'
/usr/bin/chef-client:19
[Sat, 14 Apr 2012 04:28:24 +0000] ERROR: Running exception handlers
[Sat, 14 Apr 2012 04:28:24 +0000] FATAL: Saving node information to /var/chef/cache/failed-run-data.json
[Sat, 14 Apr 2012 04:28:24 +0000] ERROR: Exception handlers complete
[Sat, 14 Apr 2012 04:28:24 +0000] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[Sat, 14 Apr 2012 04:28:24 +0000] FATAL: Chef::Exceptions::ShellCommandFailed: apt_repository[10gen] (mongodb::10gen_repo line 32) had an error: Chef::Exceptions::ShellCommandFailed: execute[install-key 7F0CEB10] (/var/chef/cache/cookbooks/apt/providers/repository.rb line 23) had an error: Chef::Exceptions::ShellCommandFailed: Expected process to exit with [
0], but received '2'
---- Begin output of apt-key adv --keyserver keyserver.ubuntu.com --recv 7F0CEB10 ----
STDOUT: Executing: gpg --ignore-time-conflict --no-options --no-default-keyring --secret-keyring /etc/apt/secring.gpg --trustdb-name /etc/apt/trustdb.gpg --keyring /etc/apt/trusted.gpg --primary-keyring /etc/apt/trusted.gpg --keyserver keyserver.ubuntu.com --recv 7F0CEB10
gpgkeys: HTTP fetch error 7: couldn't connect to host
STDERR: gpg: requesting key 7F0CEB10 from hkp server keyserver.ubuntu.com
gpg: no valid OpenPGP data found.
gpg: Total number processed: 0
---- End output of apt-key adv --keyserver keyserver.ubuntu.com --recv 7F0CEB10 ----
Ran apt-key adv --keyserver keyserver.ubuntu.com --recv 7F0CEB10 returned 2 
```

我的源列表文件的内容：

```
deb http://eu.archive.ubuntu.com/ubuntu/ lucid main universe
deb-src http://eu.archive.ubuntu.com/ubuntu/ lucid main universe
deb http://eu.archive.ubuntu.com/ubuntu/ lucid-updates main universe
deb-src http://eu.archive.ubuntu.com/ubuntu/ lucid-updates main universe
deb http://security.ubuntu.com/ubuntu lucid-security main universe
deb-src http://security.ubuntu.com/ubuntu lucid-security main universe 
```

可能是什么问题呢？我用谷歌搜索了它，但没有找到合适的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T06:15:16.783

好的，我和我的朋友在进行了一些研发之后已经做到了。解决方案是改变食谱收据。我已将密钥服务器“keyserver.ubuntu.com”更改为“hkp://keyserver.ubuntu.com:80”。

干杯！！

# php - 如何让 PHP CURL 根据 PHP 自己的规范格式化参数数组？

> ID：10151086
> 
> 赞同：1
> 
> 时间：2012-04-14T04:44:42.523
> 
> 标签：php, curl

PHP 要求具有多个值的查询键以 [] 结尾。例如：

```
<input name="key[]" />
<input name="key[]" /> 
```

这令人沮丧的原因是，当我在 PHP 中使用 CURL 时，CURL 的 PHP 实现不会正确地将数组转换回来。相反，它只是通过`key=Array`.

**我不想从头开始构建查询字符串，因为我可能会同时传输文件（这需要 CURLOPT_POSTFIELDS 是一个数组）**

```
curl_setopt($CURL, CURLOPT_POSTFIELDS, $arguments); 
```

任何想法如何让它发挥作用？如果一个键有多个值，我希望 CURL 以 PHP 期望看到的方式格式化查询字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T04:53:17.257

尝试这个：

```
$arguments = array (
  'key[0]' => 'value1',
  'key[1]' => 'value2',
); 
```

# jquery - Jquery clone() 似乎不适用于 Mustaches

> ID：10151090
> 
> 赞同：1
> 
> 时间：2012-04-14T04:45:13.583
> 
> 标签：jquery, mustache

我正在尝试为我的团队简化复杂的设计过程。长话短说，我们的服务器在我们的单页应用程序中插入了一个隐藏的模板部分，这样我们就可以在 Backbone.js 应用程序中使用 DOM 节点而不是 JST 模板。我发现 jquery 的 .clone() 方法不喜欢某些属性。

当我使用`$('.mainBillboard').clone()`时，这个：

```
<div style="background-image: url({{ banner_url }})" id="mainBillboard"> 
```

...被克隆到这个：

```
<div id="mainBillboard" style=""> 
```

`src='{{ image_url }}'`我已经看到图像标签属性的类似行为。

请注意，如果我从 'style' 中去掉一个 'e'，那么 jquery 会完全按照原样克隆 DOM 元素。我找到了一种解决我们当前需求的方法，但我很好奇为什么 jquery 完全剔除这些属性。这是某种攻击保护（如反 XSS）吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T19:23:03.857

我猜您正在使用 Firefox 进行测试。当我使用这个时：

```
<div id="outerContainer">
    <div style="background-image: url({{ banner_url }})" id="mainBillboard">asdfasdf</div>
</div> 
```

和这个：

```
console.log($('#outerContainer').html());
console.log($('#outerContainer').clone().html()); 
```

演示：http: [//jsfiddle.net/ambiguous/YEPjL/](http://jsfiddle.net/ambiguous/YEPjL/)

在 Safari 或 Chrome 中，我得到相同的输出，但是当我使用 Firefox 时，第二个有一个空`style`属性。但是，如果 HTML 看起来像这样：

```
<div id="outerContainer">
    <div style="background-image: url(does-not-exist)" id="mainBillboard">asdfasdf</div>
</div> 
```

然后我到处都得到相同的输出。

演示：http: [//jsfiddle.net/ambiguous/XukCa/](http://jsfiddle.net/ambiguous/XukCa/)

问题是它`{{ banner_url }}`不是一个有效的 URL，所以 Firefox 显然是在它尝试解析 HTML 时将其删除；即使您的 HTML 在隐藏的 a`<div>`中，浏览器仍然必须像处理正在显示的某些 HTML 一样解析和验证。

在 HTML 中嵌入模板的常用方法是使用`<script>`元素来阻止浏览器尝试解释它们。我建议您切换到这种结构：

```
<script type="text/html" id="tmpl-mainBillboard">
    <div style="background-image: url({{ banner_url }})" id="mainBillboard">asdfasdf</div>
</script>
<script type="text/html" id="tmpl-somethingElse">
    <!-- another template... -->
</script> 
```

因此，每个模板都有一个`<script type="text/html">`（或者`<script type="text/template">`如果您愿意），然后您可以获取内容`$('#tmpl-mainBillboard').html()`并将该输出交给您的模板引擎进行解析。

演示：http: [//jsfiddle.net/ambiguous/cZzW9/](http://jsfiddle.net/ambiguous/cZzW9/)

最后一个演示为`<script>`Firefox、Chrome 和 Safari 中的块生成相同的输出。

# css - 如何正确使用 % 动态调整 div 大小？

> ID：10151096
> 
> 赞同：0
> 
> 时间：2012-04-14T04:46:48.347
> 
> 标签：css, html

[http://i.imgur.com/mFtXm.jpg](http://i.imgur.com/mFtXm.jpg)这里是截图。

标记为红色的区域是问题所在。当我在 Firefox 中查看页面时，它看起来很好，在 chrome 中存在微小的差距，我不处理 ie。

调整这些 div 大小的正确方法是什么，以便每个 div 与其他 div “连接”，而不会在浏览器更改时留下任何间隙？有 jquery 或 js 的东西吗？

html:

```
<!doctype html>
<html>
    <head>
        <link rel="stylesheet" href="./css/main.css" />     
    </head>

    <body>  
        <div id="header">
            <h1>New York Tech Map</h1>
        </div>

        <div id="navlinks">
            <div class="topnav">
                <a href="">About Us</a>
            </div>
            <div class="topnav">
                <a href="">Contact Us</a>
            </div>
            <div class="topnav">
                <a href="">Sign Up</a>
            </div>
            <div class="topnav">
                <a href="">Help</a>
            </div>
        </div>

        <div id="sidebar">

        </div>

        <div id="map">

        </div>

        <div id="footer">
            &copy; 2012 NYC Tech Map
        </div>      
    </body>     
</html> 
```

CSS：

```
html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    background: #F0F0F0;
}

a { text-decoration: none; color: grey; }
a:hover{ color: red; }

#header {
    width: 100%;
    height: 75px;
    background: red;
    margin-top: -21px;
}

#navlinks { float: right; width: 80%;}

.topnav {
    width: 25%;
    height: 25px;
    float: left;
    padding-top: 5px;
    background: #2D2D2D;
    text-align: center;
    font-family: arial, sans serif;
    font-size: 15px;
    font-weight: bold;
}

#sidebar {
    width: 20%;
    height: 500px;
    float: left;
    background: blue;
}

#map {
    height: 80.8%;
    width: 80%;
    float: right;

}
.
.popa:hover {
    background: #D6D6D6;    
}

#footer {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 25px;  
    background: #2D2D2D;
    text-align: center;
    font-family: arial, sans serif;
    font-weight: bold;
    padding-top: 5px;
    color: grey;    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T20:58:21.943

最好只是动态调整大小，使用 js 获取窗口大小，然后相应地调整该元素。

# java - 从一个类指向外部类的指针？

> ID：10151100
> 
> 赞同：0
> 
> 时间：2012-04-14T04:47:35.837
> 
> 标签：java, oop, arraylist, subclass

我有一个对象的 ArrayList，它们用于辅助类的子类中。我正在向子类发送所需的数据，例如`new subclass(ArrayListObject)`，这些子类在辅助类的映射结构中处理。由于一个 ArrayListObject 存储在 helperclass 中，我假设它将链接到子类中，这些子类需要这个对象进行计算。但是，从我在调试器中看到的情况来看，当更改时，子类中的 ArrayListObject 没有更改。

有没有办法让它成为指向另一个类变量的指针？或者是最合适的处理方法是让子类在构造函数中接收对 helperclass 的引用，调用 helperclass.getArrayObject 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T04:52:46.763

你想要完成的，一个指针，在 Java 中是不可用的。要解决此问题，您应该`ArrayListObject`将助手类设为受保护字段。有两种方法可以从这里开始：

1.  如果从不在类及其子类之外访问该字段，请`super.mArrayList`在需要该值时调用。
2.  如果需要在任何地方访问该字段，请创建一个`getArrayListObject()`返回对象值的公共。

# c++ - 我的方法需要使用更少的运算符

> ID：10151101
> 
> 赞同：2
> 
> 时间：2012-04-14T04:48:06.007
> 
> 标签：c++, operators, bit-manipulation

我正在做一个家庭作业，我需要创建一个最多包含 24 个运算符的按位方法。我的代码有效……但我有 25 个操作员，一个太多了。谁能找到一种更有效的方法来编写一段代码？

```
 int isGreater(int x, int y)
    {
      int xSign = (x>>31);
      int ySign = (y>>31);
      int check1 = (xSign & ySign) | (~xSign & ~ySign);
      int same = !((( x + ((~y) + 1) )>>31) & 0x1);
      int check2 = (check1 & same) | (~check1 & !xSign);
      int equal = ((!(x ^ y))<<31)>>31;
      return 0 | (~equal & check2);
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T04:51:42.970

尝试更改此行：

```
int check1 = (xSign & ySign) | (~xSign & ~ySign); 
```

为了这：

```
int check1 = (xSign & ySign) | ~(xSign | ySign); 
```

那是少了一位操作员。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-14T04:59:12.937

`check1`只是一个`xnor`. 你为什么不替换这个：

```
 int check1 = (xSign & ySign) | (~xSign & ~ySign); 
```

有了这个：

```
 int check1 = ~(xSign ^ ySign); 
```

你的版本有 5 个位运算符，我的有 2 个。

请注意，如果您使用此代码，您的代码会更美观：

```
 int check1 = !(xSign ^ ySign); 
```

也就是说，逻辑否定而不是按位否定，但不要担心正确性，因为最后你无论如何都会取消所有高位。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-14T04:54:01.143

这一行：

`return 0 | (~equal & check2);`

可以简化为：

`return (~equal & check2);`

（按位`or`与`0`没有任何效果）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-14T05:02:51.543

假设`int`s 是 32 位宽，您可以替换它：

```
 int equal = ((!(x ^ y))<<31)>>31; 
```

有了这个：

```
 int equal = ((!(x ^ y)) & 0x1; 
```

再救自己一个。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-14T09:16:47.313

`INT_MIN`我在 C 中提出了这个相对较短的解决方案，它可以处理从到的整个整数范围`INT_MAX`。

它期望有符号整数实现为 2 的补码，并且它期望有符号溢出不会产生不良副作用（已知会导致未定义的行为）。

```
#include <stdio.h>
#include <limits.h>

int isGreater(int x, int y)
{
  // "x > y" is equivalent to "!(x <= y)",
  // which is equivalent to "!(y >= x)",
  // which is equivalent to "!(y - x >= 0)".
  int nx = ~x + 1; // nx = -x (in 2's complement integer math)
  int r = y + nx;  // r = y - x (ultimately, we're interested in the sign of r,
                   // whether r is negative or not)

  nx ^= nx & x;    // nx contains correct sign of -x (correct for x=INT_MIN too)

  // r has the wrong sign if there's been an overflow in r = y + nx.
  // It (the r's sign) has to be inverted in that case.

  // An overflow occurs when the addends (-x and y) have the same sign
  // (both are negative or both are non-negative) and their sum's (r's) sign
  // is the opposite of the addends' sign.
  r ^= ~(nx ^ y) & (nx ^ r); // correcting the sign of r = y - x

  r >>= (CHAR_BIT * sizeof(int) - 1); // shifting by a compile-time constant

  return r & 1; // return the sign of y - x
}

int testDataSigned[] =
{
  INT_MIN,
  INT_MIN + 1,
  -1,
  0,
  1,
  INT_MAX - 1,
  INT_MAX
};

int main(void)
{
  int i, j;

  for (j = 0; j < sizeof(testDataSigned)/sizeof(testDataSigned[0]); j++)
    for (i = 0; i < sizeof(testDataSigned)/sizeof(testDataSigned[0]); i++)
      printf("%d %s %d\n",
             testDataSigned[j],
             ">\0<=" + 2*!isGreater(testDataSigned[j], testDataSigned[i]),
             testDataSigned[i]);

  return 0;
} 
```

输出：

```
-2147483648 <= -2147483648
-2147483648 <= -2147483647
-2147483648 <= -1
-2147483648 <= 0
-2147483648 <= 1
-2147483648 <= 2147483646
-2147483648 <= 2147483647
-2147483647 > -2147483648
-2147483647 <= -2147483647
-2147483647 <= -1
-2147483647 <= 0
-2147483647 <= 1
-2147483647 <= 2147483646
-2147483647 <= 2147483647
-1 > -2147483648
-1 > -2147483647
-1 <= -1
-1 <= 0
-1 <= 1
-1 <= 2147483646
-1 <= 2147483647
0 > -2147483648
0 > -2147483647
0 > -1
0 <= 0
0 <= 1
0 <= 2147483646
0 <= 2147483647
1 > -2147483648
1 > -2147483647
1 > -1
1 > 0
1 <= 1
1 <= 2147483646
1 <= 2147483647
2147483646 > -2147483648
2147483646 > -2147483647
2147483646 > -1
2147483646 > 0
2147483646 > 1
2147483646 <= 2147483646
2147483646 <= 2147483647
2147483647 > -2147483648
2147483647 > -2147483647
2147483647 > -1
2147483647 > 0
2147483647 > 1
2147483647 > 2147483646
2147483647 <= 2147483647 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-14T05:49:38.433

由于您显然可以使用加法，因此在我看来，有一种更简单的方法：

```
int isGreater(int x, int y) {
    return ((unsigned)(~x + 1 + y)>>31) & 1;
} 
```

基本思想非常简单——从 y 中减去 x，然后检查结果是否为负。为了保持至少一点挑战，我假设我们不能直接做减法，所以我们必须自己否定这个数字（使用二进制补码，所以翻转位并加一个）。

五个操作员——如果包括演员表的话，六个。

值得注意的一点：你的计算`same`本身就足够了（事实上，你需要消除逻辑否定）。

进行快速测试[编辑：更新测试代码以包含更多边界条件]：

```
int main() {
    std::cout << isGreater(1, 2) << "\n";
    std::cout << isGreater(1, 1) << "\n";
    std::cout << isGreater(2, 1) << "\n";
    std::cout << isGreater(-10, -11) << "\n";
    std::cout << isGreater(-128, 11) << "\n";
    std::cout << isGreater(INT_MIN, INT_MIN) << "\n";
    std::cout << isGreater(INT_MAX, INT_MAX) << "\n";
    return 0;
}

0
0
1
1
0
0
0
0 
```

...一切如预期。

# javascript - 使用命名空间缩小 Javascript

> ID：10151107
> 
> 赞同：0
> 
> 时间：2012-04-14T04:48:48.167
> 
> 标签：javascript, minify

是否有任何允许定义命名空间的 javascript 缩小器（在线）？我的意思是所有这些缩小器都会生成具有短变量名的代码，例如 a,b,c ...，这可能会导致与其他缩小的 javascript 发生冲突。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T05:14:19.183

大多数（好的）minifiers 单独留下全局范围的变量，因为这些是我们默认的命名空间。mikeycgto 建议您确保将其保持在最低限度：

```
var page = ( function(){
  var scopedVar = "I'm something like private.";

  //do some other stuff

  return {
    usefulThing: function(){
        return scopedVar;
    }
  };
}() ); 
```

通过缩小器运行它应该会在全局范围内为您留下一个“页面”变量。page.usefulThing 是一种方法（也应该由 minifier 单独保留）。"scopedVar" 可能会变成 "a" 或 "o" 之类的，但你永远不会在意。您的 API 将保持预期，尽管内部将被弄乱。

# amazon-s3 - 如何终止/删除 Amazon EMR 中的作业流？

> ID：10151110
> 
> 赞同：3
> 
> 时间：2012-04-14T04:50:23.377
> 
> 标签：amazon-s3, amazon-web-services, command-line-interface, elastic-map-reduce, amazon-emr

我使用 Amazon Elastic MapReduce (Amazon EMR) 创建了一个作业流，但由于某些未知原因而失败。然后我尝试通过 AWS 管理控制台终止作业流程，但“终止”按钮被禁用。然后我尝试使用 CLI 终止作业流程，它显示作业流程已终止，但是当通过 CLI 以及管理控制台的 Elastic MapReduce 选项卡查看时，它仍然在作业流程列表中显示为失败。

请让我知道如何从列表中删除工作流程。

当我尝试调试作业流程时，它显示两个错误：

1.  调试功能不适用于此作业流程，因为您在创建 Amazon S3 日志路径时未指定它。
2.  作业流程失败，原因是：无效的存储桶名称“testBucket”：存储桶名称只能包含小写字母、数字、句点 (.) 和破折号 (-)。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-14T13:03:37.130

您在这里面临两个问题：

## 作业流失败

首先也是最重要的，触发[Amazon EMR](http://aws.amazon.com/elasticmapreduce/)作业流程终止状态的问题让您感到恼火，可以立即解决：

> 我使用 Amazon Elastic MapReduce (Amazon EMR) 创建了一个作业流，但由于某些未知原因而失败。

作业流程失败的原因实际上可以从您提供的清单中的错误 2 中推断出来：

> 作业流程失败，原因是：无效的存储桶名称“testBucket”：**存储桶名称只能包含小写字母**、数字、句点 (.) 和短划线 (-)。*[强调我的]*

您的存储桶名称“testBucket”明显违反了规定的小写命名要求，因此仅将名称更改为小写（例如“testbucket”或“test-bucket”）将允许您根据需要运行作业流程。

## 终止状态

此外，[Job Flow](http://docs.amazonwebservices.com/ElasticMapReduce/latest/DeveloperGuide/ProcessingCycle.html)终止状态大概是没有问题的。虽然在极少数情况下可能会发生[Amazon EC2](http://aws.amazon.com/ec2/)实例或其他资源实际上卡在某种状态的情况，但您所看到的乍一看是完全合理和正常的：

*   首先完全终止作业流程可能需要一段时间，请参阅[TerminateJobFlows](http://docs.amazonwebservices.com/ElasticMapReduce/latest/API/API_TerminateJobFlows.html)：

    > 对 TerminateJobFlows 的调用是异步的。根据作业流的配置，作业流**可能需要长达 5-20 分钟才能完全终止并释放分配的资源**，例如 Amazon EC2 实例。*[强调我的]*

*   甚至终止的 EC2 资源也可能会列出很长一段时间，例如 AWS 团队对[EC2 实例陷入“终止”状态](https://forums.aws.amazon.com/message.jspa?messageID=242892#242892)的响应：

    > 终止的意思是“永远消失了”；尽管**有时它会在 UI 中停留数小时**。*[强调我的]*

我经常看到 EC2 实例的这种行为，它通常会在几个小时后从实例列表中消失。因此，我怀疑终止的工作流程同时从您的工作流程列表中消失了。

### 更新

我其实已经怀疑确实是这种情况，但在官方文档中仍然无法找到相关信息；但是，显然终止的工作流可能会以一种或另一种方式可见长达两个月，例如，参见 AWS 团队对[Console 的响应未显示超过一个月的工作](https://forums.aws.amazon.com/message.jspa?messageID=239736#239736)：

> 虽然控制台列出了所有正在运行的作业流，**但它仅显示上个月启动的已终止作业流**。或者，您可以使用 Ruby CLI**列出过去两个月内启动的所有作业流程，**使用以下命令：[...] *[强调我的]*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-14T08:22:50.170

如果您的应用程序在 hadoop yarn 上运行，您可以随时使用 yarn 来管理您的应用程序：

```
yarn application -list
yarn application -kill application_name 
```

# java - Spring的@Cacheable注解可以和被注解的方法的bean有相同的作用域吗？

> ID：10151111
> 
> 赞同：7
> 
> 时间：2012-04-14T04:50:27.260
> 
> 标签：java, spring

是否有一种简单的方法可以将 Spring 的`@Cacheable`注释与非单例（例如会话范围）bean 一起使用，并使缓存具有与所述 bean 相同的范围？

例子：

```
import javax.inject.Inject;
import javax.inject.Named;

import org.springframework.cache.annotation.Cacheable;
import org.springframework.context.annotation.Scope;
import org.springframework.security.core.context.SecurityContextHolder;

@Named
@Scope("session")
public class UserNameRetriever {

    @Inject private UserDao userDao;

    @Cacheable("userName")
    public String getUserName() {
        return userDao.getUserByLogin((String)SecurityContextHolder.getContext().getAuthentication().getPrincipal()).getName();
    }

} 
```

理想情况下，`UserNameRetriever.getUserName()`将从`UserDao`每个会话一次中获取用户名，但此代码实际上在应用程序范围内缓存。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T21:11:56.277

如果您想要会话缓存，请使用会话。也就是说，将用户存储在会话范围 bean 的私有字段中，或者`HttpSession`直接访问对象。`@Cacheable`通常用于应用程序范围的资源。

好吧，您可以使用`key="#user.id"`, 和 使方法`@CacheEvict`上的缓存（手动或使用 ）无效`@PreDestroy`，但是如果您不将两者混合使用会更好 - 缓存和会话数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T08:25:26.447

我认为你是从错误的角度来解决问题的。不是让“*本地*”会话范围的缓存只存储一个值，而是使用一个全局缓存来存储从用户名到`User`值的映射。

在你的情况下`@Cacheable`，`getUserName()`把它放在`UserDao`：

```
public class UserDao {
  @Cacheable("users")
  public User getUserByLogin(String user) {
    //...
  }
} 
```

这不仅是缓存的更惯用用法，而且事实证明它更容易维护和更好地执行。

回到你原来的问题：不，这不可能是开箱即用的。您必须编写自己的[`CacheManager`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/cache/CacheManager.html)- 可能是围绕现有实现的[装饰器。](/questions/tagged/decorator "显示标记为“装饰器”的问题")

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T12:19:00.787

我还没有尝试过，但根据[Spring 参考](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/cache.html#cache-spel-context)我认为这会起作用：

```
@Cacheable(value = "userName", key = "#root.target") 
```

# svn - 颠覆单选按钮在 Hudson 中不可用

> ID：10151112
> 
> 赞同：2
> 
> 时间：2012-04-14T04:50:56.200
> 
> 标签：svn, continuous-integration, hudson, jenkins, hudson-plugins

我在码头运行了最新的 hudson，它的 maven 2/3 项目类型指示为 legacy。当我尝试配置项目时，没有“subversion”单选按钮。只有 CVS，git 可用。我听说 subversion 插件是 hudson 的默认插件，但是为什么我没有看到 subversion 单选按钮。我是不是很愚蠢或者我错过了什么？无论如何我可以手动安装颠覆插件......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T18:37:34.437

要检查是否安装了 Subversion 插件：`http://[hudson_url]/pluginManager/installed`在浏览器中输入。搜索*Subversion 插件*。如果它在那里，但它旁边的框未选中 - 插件被禁用。选中该框并重新启动 Hudson。

如果该插件不存在，请输入`http://[hudson_url]/pluginManager/available`，搜索*Subversion Plugin*，选中它旁边的框，转到页面底部并单击“*安装*”按钮（您可能需要重新启动 Hudson）。

如果插件存在并启用 - 请更新您的问题。您的插件和您的 Hudson 版本之间存在不匹配的可能性也很小。转到并查看*Subversion Plugin*`http://[hudson_url]/pluginManager/`旁边是否有警告。

# java - java.util.regex.Pattern 的正则表达式

> ID：10151114
> 
> 赞同：0
> 
> 时间：2012-04-14T04:51:13.643
> 
> 标签：java, regex

我正在尝试创建一个合适的正则表达式来使用 java.util.regex.Pattern

我正在使用下面显示的正则表达式来匹配字符串，如下所示：`feed_user_at_gmail_dot_com_testfile`

```
final static Pattern PATTERN1 = Pattern.compile("feed_(.*)_([^_]*)"); 
```

这按预期工作。但是，我需要创建另一个模式来匹配字符串，如下所示：`feed_user_at_gmail_dot_com_testfile_ts_20120413_dot_175531_dot_463`

不同之处在于第二个字符串是第一个字符串的时间戳版本。这两个字符串是我数据库中文件名的示例，我需要分别识别它们。如上所示，时间戳版本`_ts_`后跟 DATE。DATE 中的所有点都更改为`_dot_`

谢谢，索尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T05:02:51.240

这个怎么样：

```
"feed_(.*)_([^_]*)_ts_[1-9]+(_dot_[1-9]+)*" 
```

或者更好的是，

```
"feed_(.*)_([^_]*)_ts_[1-9]+(_dot_[1-9]+){2}" 
```

如果日期总是正好有两个点。

# silverlight - Silverlight 水平拉伸和获取位置问题

> ID：10151115
> 
> 赞同：0
> 
> 时间：2012-04-14T04:51:17.583
> 
> 标签：silverlight, grid, position, alignment

我有一个网格（容器），它又具有几个按行排列的网格（子容器）。这些“子容器”中的每一个都有不同的列和控件。这些“子容器”中的每一个都将水平对齐设置为拉伸，并且必须保持这种状态，因为该查看器的布局取决于它。

我使用“容器”将每个控件设置在适当的位置。到目前为止，一切都很好。现在是我的头疼...我想从网格中删除控件并将其放在画布中，在相同的确切位置，只是，它返回的位置好像控件设置为网格的开头而不是这是真正的立场。出于测试目的，我将“子容器”水平对齐设置为居中，并且（尽管布局完全错误）每个控件在发送到画布时都处于正确位置，当 HA = 拉伸时不会发生这种情况。这是我用来获取位置的代码：

```
GeneralTransform gt = nc.TransformToVisual(gridZoom);
Point offset = gt.Transform(new Point()); 
```

所以你可以理解，例如，我的第一个控件应该在 (80, 1090) 之类的地方，但我得到的点是 (3,3)。

谁能帮我？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T11:24:45.040

您应该尝试使用顶级容器（包含所有其他子容器）来获取偏移点。

您也可以尝试：

```
var transform = mySubSubSubElement.TransformToVisual(Application.Current.RootVisual);
var position = transform.Transform(new Point(0, 0)); 
```

# imap - 如何将 IMAP 消息标记为已获取？

> ID：10151116
> 
> 赞同：1
> 
> 时间：2012-04-14T04:51:27.413
> 
> 标签：imap, email

我正在开发应该从 IMAP 服务器获取电子邮件并将它们存储在本地数据库中的 PHP 项目。其他电子邮件客户端（如发件箱等）可以使用相同的 IMAP 服务器。

问题是如何知道我已经获取了哪些消息，而我没有获取哪些消息？我正在考虑使用按日期时间搜索，但它是否可靠（我会有 cronjob，它会每分钟访问用户邮箱，并检查电子邮件，但不确定日期时间是否会导致一些问题，例如在几乎同时到达短消息和带有大附件的消息）。

我在考虑系统标签，但是用户可以通过电子邮件客户端修改它们，所以我可以依赖它们，并且不想修改它们并混淆客户端。

接下来我在考虑自定义标签，但并非所有 IMAP 服务器都支持它们（我们的软件需要尽可能灵活）。

有什么好主意我可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T05:51:58.660

跟踪您正在同步的文件夹的当前最高同步[UID](https://www.rfc-editor.org/rfc/rfc3501#section-2.3.1.1)，并验证文件夹的 UIDVALIDITY 值是否匹配。

> 唯一标识符在邮箱中以严格的升序方式分配；当每条消息被添加到邮箱时，它被分配一个比之前添加的消息更高的 UID。与消息序列号不同，唯一标识符不一定是连续的。

# c# - 用于高速和内存高效检测字符串重复的数据结构选择

> ID：10151117
> 
> 赞同：3
> 
> 时间：2012-04-14T04:51:29.803
> 
> 标签：c#, hash, deduplication

我有一个有趣的问题，可以通过多种方式解决：

*   我有一个接收字符串的函数。
*   如果此函数以前从未见过此字符串，则需要执行一些处理。
*   如果函数之前已经看到过字符串，则需要跳过处理。
*   在指定的时间后，该函数应该接受重复的字符串。
*   这个函数可能每秒调用数千次，字符串数据可能非常大。

这是对实际应用的高度抽象的解释，只是为了问题的目的而试图深入到核心概念。

该函数将需要存储状态以检测重复项。它还需要存储关联的时间戳以使重复项过期。

它不需要存储字符串，字符串的唯一哈希就可以了，前提是没有由于冲突导致的误报（使用完美的哈希？），并且哈希函数足够高效。

天真的实现很简单（在 C# 中）：

```
 Dictionary<String,DateTime> 
```

尽管为了降低内存占用和潜在地提高性能，我正在评估一个自定义数据结构来处理这个问题，而不是一个基本的哈希表。

那么，鉴于这些限制，您会使用什么？

编辑，可能会改变提议的实施的一些附加信息：

*   99% 的字符串不会重复。
*   几乎所有的副本都将背靠背或几乎按顺序到达。
*   在现实世界中，该函数将从多个工作线程中调用，因此需要同步状态管理。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T05:03:23.043

我不相信在不知道完整值集的情况下可以构造“[完美哈希](http://en.wikipedia.org/wiki/Perfect_hash_function)”（尤其是在 C# int 的值数量有限的情况下）。所以任何类型的散列也需要比较原始值的能力。

我认为字典是使用开箱即用的数据结构可以获得的最好的。由于您可以存储定义了自定义比较的对象，因此您可以轻松避免将字符串保存在内存中，并简单地保存可以获得整个字符串的位置。即具有以下值的对象：

```
stringLocation.fileName="file13.txt";
stringLocation.fromOffset=100;
stringLocation.toOffset=345;
expiration= "2012-09-09T1100";
hashCode = 123456; 
```

如果需要，cutomom 比较器将返回保存的 hashCode 或从文件中检索字符串并执行比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T05:04:28.830

> 字符串的唯一散列会很好，前提是没有由于冲突而导致的误报

这是不可能的，如果您希望哈希码比字符串短。

使用哈希码意味着存在误报，只是它们很少见，不会成为性能问题。

我什至会考虑仅从字符串的一部分创建哈希码，以使其更快。即使这意味着您得到更多误报，它也可以提高整体性能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-14T05:13:49.927

如果内存占用是可以容忍的，我建议`Hashset<string>`为字符串使用 a ，并使用队列来存储`Tuple<DateTime, String>`. 就像是：

```
Hashset<string> Strings = new HashSet<string>();
Queue<Tuple<DateTime, String>> Expirations = new Queue<Tuple<DateTime, String>>(); 
```

现在，当一个字符串进来时：

```
if (Strings.Add(s))
{
    // string is new. process it.
    // and add it to the expiration queue
    Expirations.Enqueue(new Tuple<DateTime, String>(DateTime.Now + ExpireTime, s));
} 
```

而且，您必须在某个地方检查到期时间。也许每次你得到一个新字符串时，你都会这样做：

```
while (Expirations.Count > 0 && Expirations.Peek().Item1 < DateTime.Now)
{
    var e = Expirations.Dequeue();
    Strings.Remove(e.Item2);
} 
```

很难击败`Hashset`这里的表现。当然，您正在存储字符串，但这将是保证没有误报的唯一方法。

您也可以考虑使用除`DateTime.Now`. 我通常做的是`Stopwatch`在程序启动时启动 a ，然后使用该`ElapsedMilliseconds`值。这样可以避免在夏令时更改期间、系统自动更新时钟（使用 NTP）或用户更改日期/时间时发生的潜在问题。

上述解决方案是否适合您将取决于您是否能够承受存储字符串的内存冲击。

在“附加信息”发布后添加：

如果这将被多个线程访问，我建议使用`ConcurrentDictionary`而不是`Hashset`，`BlockingCollection`而不是`Queue`。或者，您可以使用`lock`同步访问非并发数据结构。

如果确实 99% 的字符串不会重复，那么您几乎肯定需要一个可以从字典中删除内容的过期队列。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-14T05:44:37.713

如果存储整个字符串的内存占用不可接受，您只有两种选择：

1) 只存储字符串的哈希，这意味着哈希冲突的可能性（当哈希比字符串短时）。良好的哈希函数（MD5、SHA1 等）使这种冲突几乎不可能发生，所以它只取决于它是否足够快以满足您的目的。

2）使用某种无损压缩。字符串通常具有良好的压缩率（大约 10%），并且一些算法（例如 ZIP）允许您在快速（但效率较低）和慢速（具有高压缩率）压缩之间进行选择。压缩字符串的另一种方法是将它们转换为 UTF8，这种方法既快速又容易，对非 unicode 字符串的压缩率接近 50%。

无论您选择哪种方式，它总是在内存占用和散列/压缩速度之间进行权衡。您可能需要进行一些基准测试以选择最佳解决方案。

# java - SAX 解析器换行符

> ID：10151118
> 
> 赞同：1
> 
> 时间：2012-04-14T04:51:32.410
> 
> 标签：java, saxparser

知道我在这里做错了什么。

这是xml文件

```
<text xml:space="preserve">{{Redirect|Anarchist|the fictional character|Anarchist (comics)}}
{{Redirect|Anarchists}}
{{Anarchism sidebar}}
{{Libertarianism sidebar}}
</text> 
```

现在，当我在 SAX 解析器的帮助下解析它时，例如这是我的字符方法

```
public void characters (char ch[], int start, int length) throws SAXException{

    System.out.println(text);
    if (text){
        System.out.println(testData); //testData is StringBuilder
        if (testData != null){
            for (int j=start; j < (start + length); j++){
                testData.append(ch[j]);
            }
        }                           
    }
    text = false
} 
```

这是我的 startElement 方法

```
public void startElement(String uri, String localname, String qName, Attributes attributes) throws SAXException {
    if (qName.equalsIgnoreCase("text")) {
        text = true;
    }
} 
```

但我的字符函数只被调用一次。我以为它会被调用几次，然后我可以附加

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T06:17:52.100

“忽略空白”标志控制 XML 解析器是否认为 XML 元素之间的空白很重要，或者是否应该忽略它。只要您没有设置 ignoreWhitespace，解析器在将所有字符（无论是否空白）提供给您的 characters() 方法时都是非常正确的。

# android - Mirah Android Cast HowTo？

> ID：10151122
> 
> 赞同：2
> 
> 时间：2012-04-14T04:52:05.690
> 
> 标签：android, ruby, mirah

您好，我想知道如何执行以下操作：

```
CheckBoxPreference mCheckBox = (CheckBoxPreference) findPreference("key"); 
```

除了在[米拉](http://github.com/mirah/mirah)？^^^^^^^^^^^^^^^^^^^^^^
                                                                这里的演员阵容是我不知道如何翻译成mirah的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T05:00:08.223

据我了解，在 Mirah 中进行投射是以 的形式包装对象的形式`TypeToCastTo(ObjectToCast)`，例如：

`mCheckBox = CheckBoxPreference(findPreference("key"));`

# r - 如何在 facet_grid 中指定列或如何更改 facet_wrap 中的标签

> ID：10151123
> 
> 赞同：47
> 
> 时间：2012-04-14T04:52:21.660
> 
> 标签：r, ggplot2

我有大量的数据系列，我想用小倍数来绘制。ggplot2 和`facet_wrap`我想要的组合，通常会产生一个 6 x 6 面的漂亮小块。这是一个更简单的版本：

![facet_wrap](../Images/845115ec2305df855b91a32f0879ee6e.png)

问题是我对刻面条中的标签没有足够的控制权。数据框中的列名很短，我想保持这种方式，但我希望构面中的标签更具描述性。我可以使用`facet_grid`，以便我可以利用该`labeller`功能，但似乎没有直接的方法来指定列数，并且一长排方面不适用于此特定任务。我错过了一些明显的东西吗？

![facet_grid](../Images/bc61355239a20c83d7158ce45e52ef8a.png)

**问：如何在使用 facet_wrap 而不更改列名的情况下更改构面标签？或者，如何在使用 facet_grid 时指定列数和行数？**

下面是一个简化示例的代码。在现实生活中，我正在处理多个组，每个组包含数十个数据系列，每个系列都经常更改，因此任何解决方案都必须自动化，而不是依赖手动分配值。

```
require(ggplot2)
require(reshape)

# Random data with short column names
set.seed(123)
myrows <- 30
mydf <- data.frame(date = seq(as.Date('2012-01-01'), by = "day", length.out = myrows),
                   aa = runif(myrows, min=1, max=2),
                   bb = runif(myrows, min=1, max=2),
                   cc = runif(myrows, min=1, max=2),
                   dd = runif(myrows, min=1, max=2),
                   ee = runif(myrows, min=1, max=2),
                   ff = runif(myrows, min=1, max=2))

# Plot using facet wrap - we want to specify the columns
# and the rows and this works just fine, we have a little block
# of 2 columns and 3 rows

mydf <- melt(mydf, id = c('date'))

p1 <- ggplot(mydf, aes(y = value, x = date, group = variable)) +
    geom_line() +
    facet_wrap( ~ variable, ncol = 2)
print (p1)

# Problem: we want more descriptive labels without changing column names.
# We can change the labels, but doing so requires us to
# switch from facet_wrap to facet_grid
# However, in facet_grid we can't specify the columns and rows...

mf_labeller <- function(var, value){ # lifted bodily from the R Cookbook
    value <- as.character(value)
    if (var=="variable") {
        value[value=="aa"]   <- "A long label"
        value[value=="bb"]   <- "B Partners"
        value[value=="cc"]   <- "CC Inc."
        value[value=="dd"]   <- "DD Company"
        value[value=="ee"]   <- "Eeeeeek!"
        value[value=="ff"]   <- "Final"
    }
    return(value)
}

p2 <- ggplot(mydf, aes(y = value, x = date, group = variable)) +
    geom_line() +
    facet_grid( ~ variable, labeller = mf_labeller)
print (p2) 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-14T07:23:33.433

我不太明白。您已经编写了一个将短标签转换为描述性长标签的函数。简单地添加一个新列并`facet_wrap`在该列上使用有什么问题？

```
mydf <- melt(mydf, id = c('date'))
mydf$variableLab <- mf_labeller('variable',mydf$variable)

p1 <- ggplot(mydf, aes(y = value, x = date, group = variable)) +
    geom_line() +
    facet_wrap( ~ variableLab, ncol = 2)
print (p1) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-14T07:23:52.747

要更改标签名称，只需更改您在 中使用的因子的因子水平`facet_wrap`。这些将用于`facet_wrap`条带。您可以使用与在 中使用`labeller`函数类似的设置`facet_grid`。只需执行以下操作：

```
new_labels = sapply(levels(df$factor_variable), custom_labeller_function)
df$factor_variable = factor(df$factor_variable, levels = new_labels) 
```

现在您可以`factor_variable`在`facet_wrap`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-28T11:57:16.567

只需将 labeller = label_both 添加到 facet_wrap() 参数。

```
... + facet_wrap( ~ variable, labeller = label_both) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-12T12:32:31.360

只需添加参数`labeller = label_wrap_gen(width = 25, multi_line = TRUE)`即可`facet_wrap()`。

例如。：`... + facet_wrap( ~ variable, ,labeller = label_wrap_gen(width = 25, multi_line = TRUE))`

更多信息：`?ggplot2::label_wrap_gen`

# c# - 如何找出我的依赖属性已更改？

> ID：10151128
> 
> 赞同：1
> 
> 时间：2012-04-14T04:52:58.023
> 
> 标签：c#, wpf, mvvm

我有一个这样的依赖属性

```
public static readonly DependencyProperty ShowTooltipProperty =
 DependencyProperty.Register(
"ShowTooltip",
  typeof(bool),
  typeof(customtextbox),
  new FrameworkPropertyMetadata(false));
 public bool ShowTooltip
    {
        get
        { return (string)GetValue(ShowTooltipProperty);}
        set
        {SetValue(ShowTooltipProperty, value); }
 } 
```

我想在我的财产发生变化时调用一个方法。如何找出我的财产发生了变化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T04:54:23.240

有一个[重载`FrameworkPropertyMetadata`](http://msdn.microsoft.com/en-us/library/ms557299.aspx)允许您指定属性更改的回调。

# android - 如何在java android中将值动态存储在字符串中？

> ID：10151140
> 
> 赞同：0
> 
> 时间：2012-04-14T04:54:50.893
> 
> 标签：android

在我的项目中，我需要将值动态存储在字符串中，并且需要用“，”分割该字符串。我怎样才能做到这一点 ？请帮我..

我的代码：

```
static ArrayList<ArrayList<String>> listhere;
ArrayList<String> arropids;
String arropids1; 

    for(int q=0;q<listhere.size();q++)
                {
                  arropids = listhere.get(q);

                  if(arropids.get(3).equals("1"))
                  {
                      arropids1 += arropids.get(0) + ","; 

                  System.out.println("arropids1"+arropids1);

                }
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T05:01:19.417

你必须得到 NullPointerException 因为你还没有初始化字符串，将它初始化为

```
String arropids1=""; 
```

它将解决您的问题，但我不推荐 String 用于此任务，因为 String 是不可变类型，您可以为此目的使用 StringBuffer，因此我推荐以下代码：

```
static ArrayList<ArrayList<String>> listhere;
ArrayList<String> arropids;

StringBuffer buffer=new StringBuffer();

    for(int q=0;q<listhere.size();q++)
                {
                  arropids = listhere.get(q);

                  if(arropids.get(3).equals("1"))
                  {
                      buffer.append(arropids.get(0));
                      buffer.append(","); 

                  System.out.println("arropids1"+arropids1);

                }
                } 
```

最后通过以下方式从该缓冲区中获取字符串：

```
 String arropids1=buffer.toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T05:07:47.960

为了在将解析存储在 for 循环中之后拆分结果，您可以在存储的字符串上使用 split 方法并将其设置为等于这样的字符串数组：

```
static ArrayList<ArrayList<String>> listhere;
ArrayList<String> arropids;
String arropids1 = ""; 

for(int q=0;q<listhere.size();q++) {
              arropids = listhere.get(q);

              if(arropids.get(3).equals("1"))
              {
                  arropids1 += arropids.get(0) + ","; 

              System.out.println("arropids1"+arropids1);

              }
      }
      String[] results = arropids1.split(",");
      for (int i =0; i < results.length; i++) {
           System.out.println(results[i]);
      } 
```

我希望这就是你要找的。

# javascript - SCRIPT 600：此操作的目标元素无效。（仅限 IE）

> ID：10151141
> 
> 赞同：0
> 
> 时间：2012-04-14T04:55:04.583
> 
> 标签：javascript, ajax, internet-explorer

我有一个正在处理的 ajax 日历，它像往常一样在 Chrome、Safari 和 Firefox 中运行良好。但是它不适用于 IE9 或更低版本。

我收到以下错误**SCRIPT 600：此操作的目标元素无效。**

这是一个 WP 插件，但这是代码

```
function show_micro_ajax(response) {
    document.getElementById('wp-calendar').innerHTML = response;
}

function microAjax(url, cF) {
    this.bF = function(caller, object) {
        return function() {
            return caller.apply(object, new Array(object));
        }
    };
    this.sC = function(object) {
        if (this.r.readyState == 4) {
            this.cF(this.r.responseText);
        }
    };
    this.gR = function() {
        if (window.ActiveXObject) return new ActiveXObject('Microsoft.XMLHTTP');
        else if (window.XMLHttpRequest) return new XMLHttpRequest();
        else return false;
    };
    if (arguments[2]) this.pb = arguments[2];
    else this.pb = "";
    this.cF = cF;
    this.url = url;
    this.r = this.gR();
    if (this.r) {
        this.r.onreadystatechange = this.bF(this.sC, this);
        if (this.pb != "") {
            this.r.open("POST", url, true);
            this.r.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
            this.r.setRequestHeader('Connection', 'close');
        } else {
            this.r.open("GET", url, true);
        }
        this.r.send(this.pb);
    }
}​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T06:05:44.200

如果您不必支持 IE6，请删除 ActiveX 行，否则，请反转您的测试：

```
 if (window.XMLHttpRequest) return new XMLHttpRequest();
   else if (window.ActiveXObject) return new ActiveXObject('Microsoft.XMLHTTP');
   else return false; 
```

我不确定该实例如何在这里变成一个数组，而且 IE 也可能不会，特别是如果 sn ActiveX 对象中的成员之一。

```
return caller.apply(object, new Array(object)) 
```

# asp.net - 在 asp.net 上获取根域

> ID：10151150
> 
> 赞同：2
> 
> 时间：2012-04-14T04:58:14.247
> 
> 标签：asp.net, .net, url, path, relative-path

我怎样才能只获得域，例如：

网址：**http://localhost:11093/SiteA/Admin/Default.aspx**

然后，我只想得到：**http://localhost:11093/SiteA/**

我在用：

```
Path.GetFileName(Request.Url.Host) 
```

但只得到：**localhost**，并尝试：

```
Path.GetFileName(Request.Url.PathAndQuery) 
```

但是得到整个地址。非常感谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T05:13:03.967

试试这个：

```
var HostAndPath = Request.Url.AbsoluteUri.Replace(Request.Uri.AbsolutePath, "") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T05:03:21.037

尝试这样的事情

```
Uri uri = new Uri("http://localhost:11093/SiteA/Admin/Default.aspx");
string requested = uri.Scheme + uri.SchemeDelimiter + uri.Host + ":" + uri.Port; 
```

您可以直接在请求 URI 上工作

```
Uri uri = Request.Url;
string requested = uri.Scheme + uri.SchemeDelimiter + uri.Host + ":" + uri.Port; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T10:38:47.840

试试这个...

```
Page.ResolveUrl("~").ToString() 
```

# android - 如何从我的 phonegap 应用程序（跨平台）发送电子邮件？

> ID：10151153
> 
> 赞同：-2
> 
> 时间：2012-04-14T04:59:18.257
> 
> 标签：android, iphone, cordova, cross-platform

> **可能重复：**
> [phonegap-android 中的 Webintent 电子邮件？](https://stackoverflow.com/questions/5864888/webintent-email-in-phonegap-android)

我正在phonegap（ios和android）中构建一个应用程序。在我的应用程序中，我想向我的朋友发送电子邮件。请通过提供任何链接来帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T05:36:31.513

您可以为 iOS 创建一个插件。在你的项目中添加 JS 和 .h 和 .m 文件，并在你的 html 文件中引用它。

[https://github.com/phonegap/phonegap-plugins](https://github.com/phonegap/phonegap-plugins)

您可以从上面的 URL 下载 emailComposer 插件。

对于 android，我们可以使用 webIntent 插件。

# database - 分布式数据库

> ID：10151155
> 
> 赞同：0
> 
> 时间：2012-04-14T04:59:45.667
> 
> 标签：database, replication, merge-replication, database-deployment, distributed-database

我需要你的帮助任何想法任何解决方案

情景：一个组织假设 Jason 工业在国家的不同地区都有其分支机构。在每个分支中都有一个本地数据库，他们在本地维护他们的数据。假设纽约有一家，华盛顿有一家，德克萨斯有一家。组织的主要分支中有一个主数据库。在每周或每月结束时，每个分支机构将其数据提交到主数据库。我可以说他们在周末或月底同步数据。请注意，每个分支都有其本地数据库，其中数据以与主数据库断开连接的模式保存。只有在每周或每月结束时，每个分支的全部数据才会提交到主数据库。我的问题是这可能吗？如果是，这个概念叫什么？我可以从哪里获得有关此主题的帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T19:15:53.543

考虑到您将有多个分支（订阅者），它们会离线进行更改并偶尔同步 - 这听起来很适合[Merge Replication](http://msdn.microsoft.com/en-us/library/ms152746.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T21:20:19.490

这还包括数据仓库的概念，在将所有分支的数据放入主数据库之前，您必须经过一系列步骤。

几个步骤是这样的：

*   丢弃不良数据
*   如果多次出现相同的数据，则丢弃该数据的出现
*   ...

# html - HTML5 有效的 Google+ 按钮 - 属性 rel 的错误值发布者

> ID：10151157
> 
> 赞同：6
> 
> 时间：2012-04-13T17:08:06.540
> 
> 标签：html, google-plus-one

我最近将我的网站从 xhtml 过渡到 html5。特别是这样我就可以使用有效的块级锚标签。`<a><div /></a>`.

运行验证时遇到以下错误：

> 元素链接上属性 rel 的错误值发布者：关键字发布者未注册。

但根据这个页面，这正是我应该做的。

[https://developers.google.com/+/plugins/badge/#connect](https://developers.google.com/+/plugins/badge/#connect)

我的代码：

```
<link href="https://plus.google.com/xxxxxxxxxxxxxxxx" rel="publisher" />

<a href="https://plus.google.com/xxxxxxxxxxxxxxx?prsrc=3" style="text-decoration:none;">
  <img src="https://ssl.gstatic.com/images/icons/gplus-16.png" alt="" style="border:0;width:16px;height:16px;"/>
</a> 
```

我不知道如何以符合 html5 的方式实现这一点。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T04:25:23.097

**1** ) 在`<head>`:

```
<!DOCTYPE html>
<head>
    <!--head code-->
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
</head> 
```

**2nd** ) 内的任何地方`<body>`：

```
<body>
    <!--body code-->
    <div class="g-plusone" data-size="small" data-annotation="none" data-href="https://plus.google.com/u/1/+StackExchange/"></div>
</body> 
```

[此代码有效且带有http://validator.w3.org/](http://validator.w3.org/) 的“朋友”

您可以更改`https://plus.google.com/u/1/+StackExchange/`任何您想要的 google+ 网址 ( `https://plus.google.com/xxxxxxxxxxxxxxxx/`)

[**文档**](https://developers.google.com/+/plugins/+1button/#plusonetag)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T23:09:37.913

Google 发送帮助：[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=2539557&topic=2371375&ctx=topic](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=2539557&topic=2371375&ctx=topic)。

您需要添加`?rel=author`到您`<a>`的 s href 值并删除该不合格`<link>`标签：

```
<a href="https://plus.google.com/12345?rel=author">
  <img src="https://ssl.gstatic.com/images/icons/gplus-16.png"/>
</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-12T15:34:15.187

那么，您必须在 head 标签和 body 标签内添加两个链接，如下所示：

```
<head>
  <link href='https://plus.google.com/xxxxxxxxxxxxxxxxx' itemprop='publisher'/>
</head> 
```

之后，在正文中使用 google+ 格式。它应该在body标签下方：

```
<body>
<a href="https://plus.google.com/xxxxxxxxxxxxxxxxx" rel="publisher" />
.....
.....
.....
</body> 
```

这是屏幕截图。哎呀！抱歉，我需要 10 名声望才能在此页面中加载图片... LOL 从这两种格式中，我们将通过 Google Webmaster 和 validator.w3.org 的结构化数据进行验证。如您所知，在微数据模式中使用发布者作为 itemprop 之一，因此，在 body 标记或 html 标记中应该是这样的：

```
<body itemscope="" itemtype="http://schema.org/Blog"> 
```

*) 当您的网站类型是博客时就是这样。

（喜欢这个论坛）tina-andrew-blog 注意：我发现了这个：[https](https://productforums.google.com/d/msg/webmasters/lciIK8HdJXE/kcv8EipRzzcJ) ://productforums.google.com/d/msg/webmasters/lciIK8HdJXE/kcv8EipRzzcJ 但是，我使用上面的代码，效果很好:(

# javascript - javascript循环不起作用？

> ID：10151159
> 
> 赞同：1
> 
> 时间：2012-04-14T05:01:10.567
> 
> 标签：javascript, html

我想知道标签的长度

```
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Untitled Document</title>
  <script type="text/javascript">
    function clickme(){
      var x=document.getElementsByTagName('a');
      for(i=0;i<x.length;i++) {
        alert(x[i].length)
      }
    }
</script>
</head>
<body>
  <a href="#" value="1">first</a>
  <a href="#" value="2">second</a>
  <a href="#" value="3">third</a>
  <input type="submit"  onclick="clickme()"/>
</body> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T05:05:27.550

由于 value 不是链接的标准属性，您可能需要使用`.getAttribute("value")`：

```
var x = document.getElementsByTagName('a');

for (var i=0; i<x.length;i++){
    alert(x[i].getAttribute("value"));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T05:06:34.077

在这个例子中，`x[i]`是一个锚点 DOM Element 对象。它通常没有 value 属性。但是，如果您想使用该属性，可以通过以下方式访问它：

```
x[i].getAttribute('value'); 
```

就个人而言，我会使用 HTML5 数据属性并定义如下锚点：

```
<a href="#" data-value"=1">one</a> 
```

然后通过以下方式访问该值：

```
x[i].getAttribute('data-value'); 
```

如果使用 HTML5 文档类型，这将是有效的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T05:07:19.933

jfriend00 是对的。

我想我还要指出，您可能希望在您的 for 之前或内联声明“i”。否则，您使用的全局“i”可能会在其他地方产生意想不到的后果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-14T05:54:22.173

我很困惑，您已将原始问题代码示例从以下位置更改：

```
<script type="text/javascript">
    function clickme(){
      var x=document.getElementsByTagName('a');
      for(i=0;i<x.length;i++) {
        alert(x[i].value) //<- "value" not a valid property on the anchor tag
      }
    }
</script> 
```

到

```
<script type="text/javascript">
    function clickme(){
      var x=document.getElementsByTagName('a');
      for(i=0;i<x.length;i++) {
        alert(x[i].length) //<- "length" not a valid property on the anchor tag
      }
    }
</script> 
```

如果您只是想确定该锚标记本身的有序编号是多少，您可以只使用“i”（再次 - var it！）：

```
<script type="text/javascript">
    function clickme(){
      var x=document.getElementsByTagName('a');
      for( var i=0;i<x.length;i++) {
        alert(i);
      }
    }
</script> 
```

还是我错过了您要问的东西？

# android - 我如何仅为（例如）5sn 创建对话框？

> ID：10151161
> 
> 赞同：1
> 
> 时间：2012-04-14T05:01:33.137
> 
> 标签：android, android-dialog

我想创建`dialog`临时时间（*说几秒钟后应该自动取消*）。

我用这段代码创建对话框：

```
Dialog    dl=new Dialog(myclass.this);
            dl.setTitle("HELLE WORLD");
            dl.setCanceledOnTouchOutside(true);
            dl.show(); 
```

我用这个结束对话：`dl.cancel();`

但是什么时候写这个？（例如，我在完成对话 5 sn 之后。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T05:10:30.813

你为什么不使用`Handler`和`postDelayed`

像这样，

```
 new Handler().postDelayed(new Runnable() {

        @Override
        public void run() {
            dl.cancel();
        }
    }, 5000); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T05:09:06.207

好的，像往常一样创建一个对话框并启动一个 5 秒的倒数计时器，因为倒数计时器在`onFinish`使用中到期以`dialog.dismiss()` 在一定时间后停止它。

像这样，

```
 new CountDownTimer(30000, 1000) {
        public void onTick(long millisUntilFinished) {
            mTextField.setText("seconds remaining: " + millisUntilFinished
                    / 1000);
        }

        public void onFinish() {
            mTextField.setText("done!");
        }
    }.start(); 
```

有关更多详细信息，请[访问此链接](http://developer.android.com/reference/android/os/CountDownTimer.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T05:05:16.463

您可以为此目的使用 Toast，也可以自定义 Toast。

```
Toast.makeText(this, "Hello toast", 2000); 
```

此指令将在屏幕上显示一条消息，持续 2 秒。要了解有关 toast 的更多信息，请参阅：http: [//developer.android.com/guide/topics/ui/notifiers/toasts.html](http://developer.android.com/guide/topics/ui/notifiers/toasts.html)

但是，如果您仍然坚持使用 Dialog，请在此对话框上设置一个计时器，并在超时时关闭该对话框。

# c# - 如何在子文件夹中创建多个文件夹......！

> ID：10151163
> 
> 赞同：0
> 
> 时间：2012-04-14T05:01:49.640
> 
> 标签：c#, winforms

如何在一个子文件夹中创建多个文件夹

```
 using System;
 using System.Collections.Generic;
 using System.ComponentModel;
 using System.Data;
 using System.Drawing;
 using System.Linq;
 using System.Text;
 using System.Windows.Forms;
 using System.IO;
  namespace Progressbar
 {
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
    string path = @"A:\DMS\SCOSTADL";
         try       
         {        
             // Determine whether the directory exists.
             if (Directory.Exists(path))             
             {  
                 MessageBox.Show("Paths Exists already!!!!!!!!!");
                 return;
                  }
             // Try to create the directory.
              DirectoryInfo di = Directory.CreateDirectory(path);
             MessageBox.Show("Directory Created Successfully....!");
             } 
        catch (Exception e)         
         {
             Console.WriteLine("The process failed: {0}", e.ToString());
           }
             finally { }
         }
        }
         } 
```

在这个例子中，我可以创建一个文件夹（DMS）和子文件夹（SCOSTADL），我想创建许多子文件夹以及子文件夹（SCOSTADL）。请给我建议......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T05:06:12.590

`CreateDirectory`也会在路径中创建所有子目录，因此您可以执行`Directory.CreateDirectory("C:\\abc\\def\\ghi");`.

# python - 使用 Postgres 在 Python 中使用单引号形成插入语句

> ID：10151171
> 
> 赞同：1
> 
> 时间：2012-04-14T05:03:05.947
> 
> 标签：python, postgresql, psycopg2, postgresql-8.4

我有一个名为评论的字段。我正在有效地尝试将一个大表中的值读取到多个表中。因此，我的选择查询为我获取评论字段。

我正在构建一个 Python 脚本来执行从表到表的复制。由于单引号，我的插入查询在遇到诸如“对不起！我们无法处理您的订单”之类的评论字段时失败。

我曾尝试使用 $ 引号，但徒劳无功

这是我正在尝试的

```
#!/usr/bin/python

import psycopg2

conn = psycopg2.connect("dbname='postgres' user='postgres' host='localhost' )
mark=conn.cursor()
/* fectching the rows and doing other stuff */

addthis="insert into my_table(something) values("$$"+str(row[8])+"$$")
mark.execute(addthis)
conn.commit() 
```

感谢帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T05:18:13.697

1.  您的插入语句应使用占位符。在 psycopg2 的情况下，它是`%s`.
2.  您应该将参数作为第二个参数传递给`execute()`. 这样您就没有引用问题，并且可以防止 SQL 注入攻击。

例如：

```
addthis = "INSERT INTO my_table (something) VALUES (%s);"
mark.execute(addthis, ('a string you wish to insert',)) 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-04-14T12:26:47.553

*您可以按照bernie*的建议使用占位符。**这是首选方式。**
但是，在某些情况下，无法使用占位符。然后，您必须手动转义 qoutes。这是通过反斜杠来完成的：

```
addthis="insert into my_table(something) values(%s)" % str(row[8]).replace('"', r'\"').replace("'", r"\'")
mark.execute(addthis) 
```

# android - 在 android 上为外部 jainsip 堆栈使用本地音频驱动程序

> ID：10151174
> 
> 赞同：1
> 
> 时间：2012-04-14T05:03:42.867
> 
> 标签：android, voip, jain-sip

您好，我已经成功地在 android 上实现了 jainsip 堆栈，并且想知道我是否可以使用本地音频库而不是 external.so 库。Jainsip 的修改版本包含在 android 2.3+ 中。我的驱动程序似乎不时解码音频，并希望使用更稳定的库。有什么想法吗？

# python - 从字符串列表中，如何获得包含 3 个或更多字符并且在 python 中均匀分布的单词的元组/列表

> ID：10151183
> 
> 赞同：0
> 
> 时间：2012-04-14T05:05:59.943
> 
> 标签：python

> **可能重复：**
> [检查字符串的字符是否按字母顺序升序，其升序是否均匀分布 python](https://stackoverflow.com/questions/9922436/checking-if-a-strings-characters-are-ascending-alphabetically-and-its-ascent-is)

我有一个字符串/单词列表：

```
mylist = ['twas', 'brillig', 'and', 'the', 'slithy', 'toves', 'did', 'gyre', 'and', 'gimble', 'in', 'the', 'wabe', 'all', 'mimsy', 'were', 'the', 'borogoves', 'and', 'the', 'mome', 'raths', 'outgrabe', '"beware', 'the', 'jabberwock', 'my', 'son', 'the', 'jaws', 'that', 'bite', 'the', 'claws', 'that', 'catch', 'beware', 'the', 'jubjub', 'bird', 'and', 'shun', 'the', 'frumious', 'bandersnatch', 'he', 'took', 'his', 'vorpal', 'sword', 'in', 'hand', 'long', 'time', 'the', 'manxome', 'foe', 'he', 'sought', 'so', 'rested', 'he', 'by', 'the', 'tumtum', 'tree', 'and', 'stood', 'awhile', 'in', 'thought', 'and', 'as', 'in', 'uffish', 'thought', 'he', 'stood', 'the', 'jabberwock', 'with', 'eyes', 'of', 'flame', 'came', 'whiffling', 'through', 'the', 'tulgey', 'wood', 'and', 'burbled', 'as', 'it', 'came', 'one', 'two', 'one', 'two', 'and', 'through', 'and', 'through', 'the', 'vorpal', 'blade', 'went', 'snicker-snack', 'he', 'left', 'it', 'dead', 'and', 'with', 'its', 'head', 'he', 'went', 'galumphing', 'back', '"and', 'has', 'thou', 'slain', 'the', 'jabberwock', 'come', 'to', 'my', 'arms', 'my', 'beamish', 'boy', 'o', 'frabjous', 'day', 'callooh', 'callay', 'he', 'chortled', 'in', 'his', 'joy', '`twas', 'brillig', 'and', 'the', 'slithy', 'toves', 'did', 'gyre', 'and', 'gimble', 'in', 'the', 'wabe', 'all', 'mimsy', 'were', 'the', 'borogoves', 'and', 'the', 'mome', 'raths', 'outgrabe'] 
```

首先，我只需要获取其中包含 3 个或更多字符的单词 - 我假设一个 for 循环用于那个或其他东西。然后我需要得到一个单词列表，其中仅包含按字母顺序从左到右增加并且相隔固定数字的单词。（例如 ('ace', 2) 或 ('ceg', 2) 不必为 2）列表还必须按字母顺序排序，并且每个元素应该是由单词和字符差异组成的元组。

我想我必须使用 for 循环，但我不确定在这种情况下如何使用它，也不知道如何做第二部分。

对于上面的列表，我应该得到的答案是：

```
([]) 
```

我没有最新版本的python。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T06:00:34.670

分步解决这个问题

1.  过滤长度 >= 3 的单词

    `[w for w in mylist if len(w) >= 3]`

2.  看看单词是否定期增加？计算连续字母之间的差异，创建一个集合并检查长度是否 == 1

    `diff =lambda word:len({ord(n)-ord(c) for n,c in zip(word[1:],word)}) == 1`

3.  现在使用这个新功能来过滤剩余的单词

    `[w for w in mylist if len(w) >= 3 and diff(w)]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T05:16:42.637

您可能应该从学习如何使用[for 循环](http://docs.python.org/tutorial/controlflow.html#for-statements)开始。for 循环将从集合中取出内容并将它们分配给变量：

```
for letter in "strings are collections":
    print letter 
```

或者..

```
for thing in ['this is a list', 'of', 4, 'things']:
    if thing == 4:
        print '4 is in the list' 
```

如果你能做的不止这些，那就尝试一些事情，找出你卡在哪里，并更具体地询问你需要什么帮助。

# html - 当我使用浮动左内容跳出块

> ID：10151187
> 
> 赞同：2
> 
> 时间：2012-04-14T05:06:13.843
> 
> 标签：html, css, web, css-float

我在 jsbin 上创建了我的代码示例，这里是

[http://jsbin.com/apaqon/4/edit](http://jsbin.com/apaqon/4/edit)

我想要做的是左右两个设置，但是当我在块元素上使用左浮动时，它会跳出主块容器..

在我的代码中，希望将 leftBlock 和 rightBlock 保留在白色背景内。

谁能帮帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T05:42:53.990

请参阅小提琴的代码和演示

小提琴：http: [//jsfiddle.net/PBGyT/1/](http://jsfiddle.net/PBGyT/1/)

演示：http: [//jsfiddle.net/PBGyT/1/embedded/result/](http://jsfiddle.net/PBGyT/1/embedded/result/)

只有一行 css，我添加了溢出：隐藏：`#Block{margin: 0px 20px; overflow:hidden;}`

看屏幕截图：

![在此处输入图像描述](../Images/5f415b0e0e85c77a9479351687e34603.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T07:28:35.337

检查你的风格规则，

您定义了一个 class `.clear`，但没有具有该 class 属性的 html 标记。这是实际浮动元素所必需的。如果你添加类似的东西

```
<p class="clear"></p> 
```

就在您关闭内容块 div 之前，它会使左右框都显示为白色背景。

# hadoop - 在办公室计算机上运行 Hadoop 软件（当它们空闲时）

> ID：10151189
> 
> 赞同：7
> 
> 时间：2012-04-14T05:06:48.790
> 
> 标签：hadoop, mapreduce, cluster-computing, hbase

是否有一个项目可以帮助在办公室桌面上设置 Hadoop 集群，当它们空闲时？

我想尝试使用 Hadoop/MR/hbase，但无法访问 5-10 台计算机。工作中的计算机在下班后处于空闲状态，并通过非常高速的连接相互连接。此外，这些计算机上的数据保留在我们的网络中，因此不存在隐私问题。

为了让它工作，我需要在每台机器上运行一个相当轻的监视器。当计算机空闲 X 小时后，它将加入集群。如果用户登录，它必须退出集群并返回所有 CPU/内存。

这样的事情存在吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T05:24:42.837

您可以使用任务调度程序来检测空闲状态，然后使用虚拟盒或 vmplayer 启动/停止 hadoop vm。或者您可以编写一个根据资源使用情况启动停止的 powershell 脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T17:57:34.293

您可能想看看弗吉尼亚理工大学的 Project Moon [http://www.wired.com/wiredenterprise/2012/05/project_moon/](http://www.wired.com/wiredenterprise/2012/05/project_moon/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T08:38:50.963

Hadoop 不是一个计算网格，它更像是一个数据网格（参见[本演示文稿](http://www.slideshare.net/steve_l/my-other-computer-is-a-datacentre-2012-edition)中的幻灯片 9 ）。关键是使用hadoop，数据分布在集群上，因此数据必须存储在计算机上。在数据不空闲时复制/删除数据所花费的时间可能不值得 - 你最好在云中使用 hadoop（亚马逊、Azure 等）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T14:10:00.830

我会使用 Condor 之类的东西：[http ://research.cs.wisc.edu/condor/](http://research.cs.wisc.edu/condor/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T13:07:32.963

看看像[NEREUS](http://www-nereus.physics.ox.ac.uk/about_overview.html)这样的解决方案，它是 Java 中一个很好的 MPC 解决方案

# jquery - jquery数据表的排序顺序

> ID：10151190
> 
> 赞同：0
> 
> 时间：2012-04-14T05:07:18.860
> 
> 标签：jquery

我创建了一个 jquery 数据表。我想以这样的方式应用二次排序，如果我们单击特定列，它将对该列进行排序（升序/降序），并保留相对于被单击的列排序的第一列。

如何才能做到这一点？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T05:09:45.940

数据表是指数据表吗？如果是这样，请单击一个进行排序，然后按住 shift 并单击另一个进行排序，同时保留原始排序。

[http://datatables.net/examples/plug-ins/dom_sort.html](http://datatables.net/examples/plug-ins/dom_sort.html)

# java - 如何在不使用模式匹配的情况下使用 java api 用“like”查询 mongodb？

> ID：10151194
> 
> 赞同：2
> 
> 时间：2012-04-14T05:07:54.483
> 
> 标签：java, jsp, mongodb, servlets

目前我正在使用 java 连接到 MONGODB，我想使用 java 驱动程序在 mongodb 中编写这个 sql 查询：

```
select * from tableA where name like("%ab%") 
```

他们是通过java执行相同任务的任何解决方案吗，我知道mongodb中的查询非常简单，查询是

```
db.collection.find({name:/ab/}) 
```

但是如何在java中执行相同的任务

目前我正在使用模式匹配来执行任务，代码是

```
DBObject A = QueryBuilder.start("name").is(Pattern.compile("ab", 
                                           Pattern.CASE_INSENSITIVE)).get(); 
```

但我认为它使查询非常慢，是否存在不使用模式匹配的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T05:10:16.643

可以使用正则表达式。看看以下内容：

[http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-RegularExpressions](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-RegularExpressions)

确保您了解潜在的性能影响！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-17T11:48:48.313

```
DBObject A = QueryBuilder.start("name").is(Pattern.compile("ab", 
                                       Pattern.CASE_INSENSITIVE)).get(); 
```

我认为这是可能的解决方案之一，您需要创建索引来实现这些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T09:46:18.553

使用子句的代码[片段](http://dev.nirmalya.net/articles/java/equivalent-of-like-for-mongodb)**`$regex`**（如**mikeycgto 所述**）

```
String searchString = "ab";
DBCollection coll = db.getCollection("yourCollection");
query.put("name", 
  new BasicDBObject("$regex", String.format(".*((?i)%s).*", searchString)) );
DBCursor cur = coll.find(query);
while (cur.hasNext()) {
  DBObject dbObj = cur.next();
  // your code to read the DBObject ..       
} 
```

只要您不打开和关闭每个方法调用的连接，查询应该很快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T08:51:42.013

你为什么害怕正则表达式？一旦表达式被编译，它们就会非常快，如果表达式是“ab”，结果类似于在字符串中搜索子字符串的函数。

但是，要执行您需要的操作，您有 2 种可能性：

1.  正如您在问题中提到的，第一个使用正则表达式。**而且我相信这是最好的解决方案**。
2.  第二个，使用`$where` [查询](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-JavascriptExpressionsand%7B%7B%24where%7D%7D)。

使用`$where`查询，您可以指定这样的表达式

```
db.foo.find({"$where" : "this.x + this.y == 10"})
db.foo.find({"$where" : "function() { return this.x + this.y == 10; }"}) 
```

因此您可以`.indexOf()`在字符串字段上使用 JavaScript。

# memory - 找出写入此地址的内容

> ID：10151195
> 
> 赞同：0
> 
> 时间：2012-04-14T05:07:57.777
> 
> 标签：memory, assembly

如何定位更改特定内存地址的汇编代码？

例如： 现在：

地址值

0x730b54 1000

然后值改变了：

地址值

0x730b54 6000

我想知道修改这块内存值的汇编代码。我可以这样做吗？

就像 Cheat Engine 的“找出写入该地址的内容”一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T05:27:49.050

通常的方法是使用调试器，设置为在写入地址时中断。

如果你想要做一些事情来做那个监控而不是别的，这是可能的，但是代码是高度特定于平台的，所以你需要告诉我们你想要开发的平台，然后任何人都可以提供很多帮助。

我还要注意，即使您正在监视的代码是用汇编语言编写的，也没有特别的理由以汇编语言编写监视代码。像 C 或 C++ 这样的东西非常适合这项任务，尽管它确实有助于（很多）在汇编语言级别上拥有相当多的知识。即使您在结构中检索 then 以便 C 可以使用它们，您仍然最终会直接修改目标进程的寄存器以对其进行调试。

# php - 从另一个带有一个额外字段的姊妹表插入

> ID：10151199
> 
> 赞同：1
> 
> 时间：2012-04-14T05:09:34.017
> 
> 标签：php, mysql

我有两张桌子，需要将一张复制到另一张`INSERT INTO tbl_new SELECT FROM tbl_old`

他们都有 3 个完全相同的列，但 tbl_new 有第 4 列称为“类型”我如何在同一个查询中填充它。

我需要从 tbl_old 复制行并将值分配给单元格“类型”

```
INSERT INTO tbl_new SELECT FROM tbl_old, (type) values (floor(rand() * 10)) 
```

不工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T05:16:52.443

Say`tbl_old`有两列和`tbl_new`三列

```
tbl_old
colA | colB

tbl_new
colA | colB | colC 
```

假设您想用 colA 和 colB 值的总和填充 colC。你可以使用这个：

```
INSERT INTO tbl_new (colA, colB, colC) SELECT colA,colB,(colA+colB) FROM tbl_old; 
```

在您的示例中：

```
INSERT INTO tbl_new (colA, colB, colC) SELECT colA,colB,floor(rand()*10) FROM tbl_old; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T05:18:16.693

试试下面：

```
 INSERT INTO tbl_new (column1,column2,column3,type) 
 SELECT column1,column2,column3,floor(rand() * 10) FROM tbl_old 
```

注意：将 column1,column1.column3 替换为您的列名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-12T19:04:43.757

上面的这些答案是正确的，但是想象一下，如果除了额外的列之外一切都相同，那么写出列所花费的时间。

如果表的顺序相同且末尾有附加列，则这是一个更简洁的查询：

```
INSERT INTO tbl_new SELECT *, floor(rand()*10) FROM tbl_old; 
```

# routing - Ember.js 路由

> ID：10151202
> 
> 赞同：7
> 
> 时间：2012-04-14T05:09:54.613
> 
> 标签：routing, ember.js

我正在努力寻找任何好的 Ember.js 路由示例。

[我应该使用这样](https://github.com/ud3323/ember-routing)的插件还是我个人喜欢它的外观[？](https://github.com/ghempton/ember-routemanager)

我看到有一个路由集合作为 State 对象的一部分，但我找不到任何如何使用它的示例。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-22T14:37:00.667

路由最近在核心 Ember.js 中可用，请参阅 Tom Dale 的[博客文章](http://tomdale.net/2012/05/ember-routing/)。

核心开发人员 Yehuda Katz 写了一篇关于新路由功能使用的[要点。](https://gist.github.com/2728699)这是一本很好的读物，除了路由之外，还说明了它如何与控制器集成。

为了得到基本的想法，这里有一个取自要点的代码示例：

```
App.Router = Ember.Router.extend({
  root: Ember.State.extend({
    index: Ember.State.extend({
      route: '/',
      redirectsTo: 'calendar.index'
    }),

    calendar: Ember.State.extend({
      route: '/calendar',

      index: Ember.State.extend({
        route: '/'
      }),

      preferences: Ember.State.extend({
        route: '/preferences'
      })
    }),

    mail: Ember.State.extend({
      route: '/mail',

      index: Ember.State.extend({
        route: '/'
      }),

      preferences: Ember.State.extend({
        route: '/preferences'
      })
    })
  })
});

// If the user navigates to the page with the URL
// www.myapp.com/, you will start in the root.calendar.index state.
// The redirection to the calendar.index state will cause the URL
// to be updated to www.myapp.com/calendar

router.transitionTo('preferences');

// URL => www.myapp.com/calendar/preferences

router.transitionTo('mail.preferences');

// URL => www.myapp.com/mail/preferences

router.transitionTo('index');

// URL => www.myapp.com/mail 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T03:15:04.740

我强烈推荐 ember 网站上的本指南：http: [//emberjs.com/guides/router_primer/](http://emberjs.com/guides/router_primer/)

我相信这个内容很新——几周前我第一次开始尝试理解 Ember 路由时，我当然没有注意到它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-16T13:15:43.337

我在我的应用程序中使用[sproutcore-routing](https://github.com/emberjs-addons/sproutcore-routing)，因为：

*   它与 ember.js 配合得很好
*   它被[积极维护](https://github.com/emberjs-addons/sproutcore-routing/commits/master/)
*   它被一些更大的 ember.js 应用程序使用（例如，看看[travis-ci](https://github.com/travis-ci/travis-ci) [路由代码](https://github.com/travis-ci/travis-ci/blob/master/app/assets/javascripts/app.js)）

有关文档，请查看[spoutcore-routing 测试](https://github.com/emberjs-addons/sproutcore-routing/blob/master/tests/routing.js)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-08T23:40:28.387

Ember routing changed entirely over Christmas. They posted some new documentation to help, but removed all the old tutorials. I'm guessing the old ways of doing things (in the previous answers) will be deprecated. [http://emberjs.com/guides/routing/](http://emberjs.com/guides/routing/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-14T13:18:01.553

**编辑：由于 Ember.js 路由器的重大变化，这个答案*在 1.0 PRE-RELEASE 左右*就已经过时了。ember.js 的现代版本应该[使用标准路由指南](http://emberjs.com/guides/routing/)**

我想这是（至少现在）非常个人化的。我喜欢 ghempton 的 ember-routemanager。如果您需要一些帮助，我可以帮助您。连同他的 ember-layout 包，它们一起工作得很好。

[http://codebrief.com/2012/02/anatomy-of-a-complex-ember-js-app-part-i-states-and-routes/](http://codebrief.com/2012/02/anatomy-of-a-complex-ember-js-app-part-i-states-and-routes/)

# android - 在附加到音频会话之前查询频段的 Android AudioEffect Equalizer

> ID：10151203
> 
> 赞同：1
> 
> 时间：2012-04-14T05:09:54.903
> 
> 标签：android, audio

在创建音频 fx 对象并将其附加到音频会话之前，是否有一种干净的方法来查询 Android 音频 fx 以获取支持的参数（即均衡器中的频段数，或者虚拟器是否支持强度）？目前为了得到它，我只是默默地播放一些东西，查询所有 fx 并停止，但这对我来说似乎很笨拙。还有其他想法吗？我怀疑我可以通过每个班级设置获得这些，但我不知道如何使用它们......

# python - 如何在此字典中将字符串转换为整数然后循环遍历它？

> ID：10151205
> 
> 赞同：0
> 
> 时间：2012-04-14T05:10:19.997
> 
> 标签：python

如何在此字典中将字符串转换为整数，然后循环遍历它而不会出现错误，例如*int() 以 10 为底的无效文字*:(

```
mydict = {('6.0', '1.0'): '345.2', ('3.0', '9.0'): '632.7',
    ('2.0', '3.0'): '222.4', ('1.0', '4.0'): '672.1', ('8.0', '6.0'): '822.6',
    ('3.0', '8.0'): '225.5', ('7.0', '7.0'): '534.0', ('4.0', '7.0'): '599.3',
    ('8.0', '9.0'): '273.5', ('5.0', '3.0'): '822.5', ('4.0', '2.0'): '326.6'} 
```

其中`(key1, key2): value`

我也想遍历这本字典，并使用这个公式计算......

```
((key1 * 360 / key2 * 180) + value) 
```

对于每个密钥对。然后，我将打印出计算得出的 3 个最大值。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T05:12:17.840

转换两次。

```
>>> int('1.0')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: invalid literal for int() with base 10: '1.0'
>>> int(float('1.0'))
1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T05:47:01.570

尝试以下实现

```
>>> calc_list=(int(float(a))*360/int(float(b))*180+int(float(v)) 
    for (a,b),v in mydict.iteritems())
>>> print '\n'.join(map(str,heapq.nlargest(3,calc_list)))
389145
129926
108822
>>> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T05:22:45.557

您可以执行以下操作：

```
res = map(lambda x: (float(x[0][0]) * 360.) / (float(x[0][1]) * 180.) + float(x[1]), mydict.items()) 
```

这将产生类似的东西：

```
[357.2, 633.37] 
```

要获得最大的 3 个：

```
sorted(res, reverse=True)[0:3] 
```

希望有帮助。

# c# - 将对象从控制器传递到 JavaScript JQuery

> ID：10151207
> 
> 赞同：1
> 
> 时间：2012-04-14T05:11:03.693
> 
> 标签：c#, javascript, jquery, asp.net-mvc

这真让我抓狂。我要做的就是将一个 Id 传递给一个正在工作的 ActionMethod 并将一个 Object 返回给 javascript。然后在javascript中，我希望能够说类似..Objec.Property，即/ Student.Name或Student.GPA之类的内容。

任何帮助表示赞赏。我尝试了 json 但也无法让它工作。

行动结果：

```
[AcceptVerbs(HttpVerbs.Get)]
public Epic GetEpicPropertyDetails(int id)
{  
   var Epictemplist = epicRepository.Select().Where(x => x.Id.Equals(id));
   return Epictemplist.SingleOrDefault();
} 
```

javascript:

```
<script type="text/javascript">
   $(document).ready(function () {
     $(".ListBoxClass").click(function (event) {
       var selectedid = $(this).find("option:selected").val();
       event.preventDefault();
       $.get("/Estimate/GetEpicPropertyDetails", { id: selectedid }, function (result) {
         $(".TimeClass").val(result);
       });
     });
   });
</script> 
```

`result.Name`显然是错误的，我只是不知道如何正确称呼它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T06:58:33.923

Tman，我遇到了 Darin 帮助我解决的类似问题。我需要在我的 getJSON 中添加一个 $.param。查看这篇文章[MVC ListBox not passing data to Action](https://stackoverflow.com/questions/10036773/mvc-listbox-not-passing-data-to-action)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T05:23:00.480

尝试像这样改变你的方法

```
[AcceptVerbs(HttpVerbs.Get)]
public JsonResult GetEpicPropertyDetails(int id)
{  
  var Epictemplist = epicRepository.Select().Where(x => x.Id.Equals(id)).SingleOrDefault();
  return Json(Epictemplist, JsonRequestBehavior.AllowGet);
} 
```

比你的 JS

```
<script type="text/javascript">
$(document).ready(function () {
  $(".ListBoxClass").click(function (event) {
    var selectedid = $(this).find("option:selected").val();
    event.preventDefault();
    $.get("/Estimate/GetEpicPropertyDetails", { id: selectedid }, function (result) {
      $(".TimeClass").val(result.Name);
    }, 'json');
  });
});
</script> 
```

# mobile - 从 Web 迁移到本地应用程序

> ID：10151209
> 
> 赞同：1
> 
> 时间：2012-04-14T05:11:59.137
> 
> 标签：mobile, hybrid

有问题，我很确定有解决方案。

目前，我们有一个销售商品的网站，并与三十派对购物车集成。购物车集成是通过标准的网络重定向实现的。产品在桌面浏览器上运行良好。在平板电脑上的浏览器上还不错。在手机浏览器上不是很好。移动设备上的问题很明显，因为页面已经过优化。

我们可以做的标准方法是针对移动浏览器进行优化，并感到高兴。我的团队正在为移动网络进行优化，因为他们认为应用程序将很难做到。

如果我们选择原生应用模型，为每个平台开发一个库或包是唯一的方法吗？我在想，在当今技术进步如此之大的世界中，没有。我不喜欢设备上的浏览器视图，也不喜欢流畅的体验。

还有其他选择吗？我正在研究 HTML5 混合应用程序，但无法确定它是否适用于我正在寻找的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T05:28:08.600

除了框架之外，您通常可以[使用](http://www.seabreezecomputers.com/tips/mobile-css.htm)适用于移动设备的样式表并隐藏所有并非绝对重要的内容。你也可以考虑[WML](http://www.stemkoski.com/how-to-design-websites-for-mobile-phones/)，但我认为你可以没有它 IMAO。

为 iOS 编写应用程序需要对 Apple 开发人员工具和 Objective-C 培训进行投资。Android 将需要 Java 和 Eclipse，仅举几例。

谈到“本机应用程序”时，您需要为您所依赖的任何平台编写代码。您使用的平台数量完全取决于您，但是是的，每个新平台可能需要不同的实现。

就个人而言，我会添加一些专门的标记/样式来让尽可能多的*浏览器*满意。如果您想扩展，请尝试查看您的目标受众的真正所在位置，并通过您可以负担得起的任何媒介与他们联系。如果有真正值得追求的好处，我会专注于专门的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T03:15:45.587

如果您正在寻找开发混合应用程序（phonegap + angularJS + 后端），我想推荐[Monaca](http://monaca.mobi/en/)。我最近才发现它。它非常酷，因为它的框架和自己的后端有 phonegap。此外，它还有一个基于 Topcoat 和 AngularJS 的名为[OnsenUI的快速轻量级 UI 框架。](http://onsenui.io/)

即使它是一个混合应用程序，但它会给用户原生应用程序的感觉，因为它还提供了在你的混合应用程序中使用的原生组件。令人印象深刻的是，您甚至不需要在开发过程中每次都构建应用程序并将其安装到您的设备上。这就是我最喜欢这件事的地方。

我希望它有所帮助，因为我认为它就像你所要求的一样。我只是一个新手开发人员，我发现它非常易于使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-15T21:27:58.310

混合应用程序是一个不错的选择，但可能是一个盒子里的魔鬼。

HTML5 的混合方法适合您的开发人员，因为他们仍将使用 HTML、CSS 和 JS（例如使用 PhoneGap），但另一方面，您将获得中等令人满意的 UI（您说您不喜欢的 UI）。

如果您的 Web 应用程序在浏览器中运行良好，那么纯原生应用程序可能有点过头了。

一种方法可能是使用已编译的混合和跨平台兼容解决方案，例如 xamarin 或 appcelerator，尤其是 appcelerator 使用 JS，这对您来说是一个优势。这可能会导致原生 UI（在 JS 中实现）和共享的业务逻辑代码。因此，您有两个好处；首先，只使用 JS，其次，共享业务逻辑代码 -> 工作量少。

其他选择是使用响应式或自适应网站，在 CSS 的帮助下实现。

# javascript - JavaScript 克隆对象丢失了它的原型函数

> ID：10151216
> 
> 赞同：15
> 
> 时间：2012-04-14T05:13:37.560
> 
> 标签：javascript, prototype

我试图在 JavaScript 中克隆一个对象。我制作了自己的具有原型功能的“类”。

**我的问题：**当我克隆一个对象时，克隆无法访问/调用任何原型函数。

当我访问克隆的原型函数时出现错误：

> clone.render 不是函数

**你能告诉我如何克隆一个对象并保留它的原型函数吗**

这个简单的 JSFiddle 演示了我得到的错误：http: [//jsfiddle.net/VHEFb/1/](http://jsfiddle.net/VHEFb/1/)

```
function cloneObject(obj) 
{
   // Handle the 3 simple types, and null or undefined
   if (null == obj || "object" != typeof obj) return obj;

   // Handle Date
   if (obj instanceof Date) {
     var copy = new Date();
     copy.setTime(obj.getTime());
     return copy;
   }

   // Handle Array
   if (obj instanceof Array) {
     var copy = [];
     for (var i = 0, len = obj.length; i < len; ++i) {
         copy[i] = cloneObject(obj[i]);
     }
     return copy;
   }

   // Handle Object
   if (obj instanceof Object) {
     var copy = {};
     for (var attr in obj) {
         if (obj.hasOwnProperty(attr)) copy[attr] = cloneObject(obj[attr]);
     }
     return copy;
   }

   throw new Error("Unable to copy obj! Its type isn't supported.");
}

function MyObject(name)
{
    this.name = name;
    // I have arrays stored in this object also so a simple cloneNode(true) call wont copy those
    // thus the need for the function cloneObject();
}

MyObject.prototype.render = function()
{
    alert("Render executing: "+this.name);
}

var base  = new MyObject("base");
var clone = cloneObject(base);
clone.name = "clone";
base.render();
clone.render();  // Error here: "clone.render is not a function" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-14T06:46:43.883

对代码的一些评论：

```
>    if (obj instanceof Date) {
>      var copy = new Date();
>      copy.setTime(obj.getTime()); 
```

可：

```
if (obj instanceof Date) {
  var copy = new Date(obj); 
```

和

```
>    if (obj instanceof Array) { 
```

如果 obj 是来自另一个全局上下文（例如 iFrame）的数组，则将返回 false。考虑：

```
 if (o && !(o.constructor.toString().indexOf("Array") == -1))

>      var copy = [];
>      for (var i = 0, len = obj.length; i < len; ++i) {
>          copy[i] = cloneObject(obj[i]);
>      } 
```

使用以下方法可以更有效、更准确地将一个数组的索引复制到另一个数组`slice`：

```
 var copy = obj.slice(); 
```

尽管您会错过任何可能已添加的非数字属性。将 0 循环到 length 将向克隆添加稀疏数组中不存在的属性（例如，省略将成为未定义的成员）。

至于克隆部分……</p>

在复制对象属性的部分中，这会将所有属性（包括原始`[[Prototype]]`链上的属性）直接复制到“克隆”对象。真正“克隆”一个对象的唯一方法是将其设置`[[Prototype]]`为与原始对象相同的对象，然后将原始对象上的可枚举属性（用 过滤`hasOwnProperty`）复制到克隆。

第二部分是微不足道的，第一部分不是（在一般意义上）因为你不能保证一个对象的构造函数属性引用了它的对象`prototype`，`[[Prototype]]`也不能保证构造函数的原型没有改变（即是一个不同的对象）同时。

您可以获得的最接近的是使用[Lasse Reichstein Nielsen`clone`](http://groups.google.com/group/comp.lang.javascript/msg/5d06e72e55d5bf11)（由 Douglas Crockford 推广为`beget`），它使原始对象成为`[[Prototype]]`克隆对象，然后将构造函数设置为相同的对象。尽管您可能仍然需要复制可枚举的自己的属性，以便它们掩盖原始的同名属性。

因此，您实际上只能在受限上下文中克隆一个对象，一般情况下您不能这样做。通常，这种实现会导致您不需要一般地克隆对象的设计。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-14T05:25:31.777

代替

```
var copy = {}; 
```

采用

```
var copy = new obj.constructor; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-14T07:02:47.817

您的功能可以简化为：

```
function cloneObject(obj) 
{
   obj = obj && obj instanceof Object ? obj : '';

   // Handle Date (return new Date object with old value)
   if (obj instanceof Date) {
     return new Date(obj); 
   }

   // Handle Array (return a full slice of the array)
   if (obj instanceof Array) {
     return obj.slice();
   }

   // Handle Object
   if (obj instanceof Object) {
     var copy = new obj.constructor();
     for (var attr in obj) {
         if (obj.hasOwnProperty(attr)){
             if (obj[attr] instanceof Object){
                 copy[attr] = cloneObject(obj[attr]);
             } else {
                 copy[attr] = obj[attr];
             }
         }
     }
     return copy;
   }

   throw new Error("Unable to copy obj! Its type isn't supported.");
} 
```

这是一个[工作的jsfiddle](http://jsfiddle.net/KooiInc/JDfVC/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-14T05:34:17.473

我将使用要克隆的对象的构造函数来实例化克隆对象：

```
 var copy = {}; 
```

将会

```
 var copy = new obj.constructor(); 
```

这是一个快速响应，我没有考虑过这种解决方案的缺点（我正在考虑重型构造函数），但是乍一看它应该可以工作（我不会提到（或诉诸）深奥的方法`__proto__`）。

**更新：**

你应该求助于[`object.create`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/create)解决这个问题。

```
 var copy = {}; 
```

将会

```
 var copy = Object.create(obj.constructor.prototype); 
```

通过这种方式，原始构造函数不会被调用来创建对象（考虑一个构造函数，它执行冗长的 ajax 调用以从服务器检索数据），因为 Object.create 等效于

```
Object.create = function (proto) {  
    function F() {}  
    F.prototype = proto;  
    return new F();  
}; 
```

如果您使用的 javascript 引擎不支持此功能，您可以使用此代码（它已添加到 ecmascript 5 规范中）

# php - 自定义帖子类型有条件 - Wordpress

> ID：10151218
> 
> 赞同：3
> 
> 时间：2012-04-14T05:13:59.213
> 
> 标签：php, wordpress

我正在尝试为自定义帖子类型编写条件查询。不过，我需要它与特定帖子相关。例如，我有适用于所有项目的当前代码：

```
<?php if ('project' == get_post_type() ) {  ?> 
// Get content 
<?php } ?> 
```

但是，我需要能够指定一个 ID 为 75 的项目。这可能吗？

任何帮助是极大的赞赏。

干杯，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T01:06:11.167

您可以将 $post 全局变量用于特定的自定义帖子。

`<?php if($post->post_type == 'project' && $post->ID == '75') : ?> //Get Content <?php endif; ?>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-27T08:44:44.867

```
if($post->post_type == 'type your post type here' ) : 
  //Get Content 
```

万一;

这是工作...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T06:52:19.230

您可以使用`get_the_ID()`循环内的功能：http:
[//codex.wordpress.org/Function_Reference/get_the_ID](http://codex.wordpress.org/Function_Reference/get_the_ID)

```
<?php if ('project' == get_post_type() && get_the_ID() == 75) {  ?> 
// Get content 
<?php } ?> 
```

# iphone - 使用 NSPredicate 过滤核心属性和实体

> ID：10151220
> 
> 赞同：1
> 
> 时间：2012-04-14T05:14:38.307
> 
> 标签：iphone, objective-c, ios, core-data, nspredicate

我在核心数据中有两个实体（称它们为 entityOne 和 entityTwo）。我在它们之间有一个 entityOne<--->>entityTwo 关系。

我现在正在尝试编写一个 NSPredicate 以在以下基础上获取 entityTwo 对象：

1.  获取与指定 entityOne 对象有关系的 entityTwo 对象。

2.  过滤掉那些对它们的属性之一没有值的 entityTwo 对象。

我最好在 NSPredicate 中同时执行这两项操作，还是有更好的方法？

我正在尝试以下操作：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(attribute <> "") AND (relationship == entityOne"];
    [request setPredicate:predicate]; 
```

任何关于编码的建议都得到了充分的接受。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T05:25:03.413

您可以使用这样的谓词：

```
[NSPredicate predicateWithFormat:@"entityOneRelationship = %@ AND attribute.length > 0",specifiedEntityOne]; 
```

很常见的方法来做到这一点。

# php - 浏览器运行时 PHP 脚本不显示任何内容

> ID：10151221
> 
> 赞同：-1
> 
> 时间：2012-04-14T05:14:38.933
> 
> 标签：php, eclipse, aptana

我正在学习如何使用 PHP。我正在尝试运行一个简单的 PHP 脚本。但是当我在谷歌浏览器中运行它时，什么都没有显示。这是我的代码：

```
<html>  
<body>  
<?php
    echo "Hello World";
?>
</html>
</body> 
```

我正在运行 XAMMP Apache 和 Eclipse Aptana 插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T01:23:11.420

你很接近，你错误地关闭了你的标签，试试

```
<html>  
<body>  
<?php
    echo "Hello World";
?>
</body>
</html> 
```

更清洁更好的测试是

```
<html>  
<body>  
    <?PHP echo "<p>Hello World</p>"; ?>
</body>
</html> 
```

还要确保您也安装了 PHP。XAMPP 是用于测试 PHP 之类的本地机器网站托管的绝佳解决方案。它将安装您需要的一切，甚至为您提供一个很好的服务管理器等等。

在 google chrome 中测试时，在页面上右击，点击“inspect element”，就可以看到纯 HTML，看看里面到底有什么。

[http://www.apachefriends.org/en/xampp.html](http://www.apachefriends.org/en/xampp.html)

# iphone - 释放对象时内存不减少

> ID：10151224
> 
> 赞同：1
> 
> 时间：2012-04-14T05:15:25.920
> 
> 标签：iphone, objective-c, ios, ipad

(^.^)“再次抱歉，我的英语不好，如果有人喜欢纠正我的编辑，我将不胜感激”

你是对的。但是：首先，当我单击创建按钮时，它会使用 alloc 创建新的视图控制器，并自动保留计数 +1，当我按下终止按钮时，保留计数 -1 和等于 0 这意味着**理论上创建的视图控制器已从内存**我更正了代码：

```
- (IBAction)create:(id)sender{
    if(vc == nil){ //if is not nil this mean vc have some space of memory reference and vc is not created
    //if == nil this mean vc does not have space of memory reference so create.
    vc = [[VC alloc] initWithNibName:@"VC" bundle:[NSBundle mainBundle]];// retain count + 1
    [_VW addSubview:vc.view];
} 
```

和

```
 - (IBAction)kill:(id)sender{
    [vc.view removeFromSuperview]; //When view removeFromSuperview is called also dealloc is called of the vc view
    [vc release];// retain count - 1  the curren count is equal 0 this mean vc does not have space of memory
     vc = nil; // remove the reference of memory.
  } 
```

**但是当我制作项目的配置文件并单击按钮创建和终止时，内存不会减少只会增长**

抱歉，但我无法粘贴图像，因为我是新手发布，但是当我在 Allocations init 中使用 Live Bytes 584,19kb 初始化配置文件并且在 1 分钟内 Live Bytes 为 1,08 mb 时，不会释放任何内容，只会增长。

我现在不知道为什么如果我正确地创建和释放请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T05:34:02.200

您可以使用以下两种方式 - 1\. 分配一次并在 dealloc 中释放 -

```
- (IBAction)create:(id)sender{
    if(vc == nil){ 
        vc = [[VC alloc] initWithNibName:@"VC" bundle:[NSBundle mainBundle]];
        [_VW addSubview:vc.view];
    }
}

- (IBAction)kill:(id)sender{
    [vc.view removeFromSuperview]; 
}

- (void)dealloc {
    [vc release];

    [super dealloc];
} 
```

2\. 每次分配，同时释放——

```
- (IBAction)create:(id)sender{
    if(vc == nil){ 
        vc = [[[VC alloc] initWithNibName:@"VC" bundle:[NSBundle mainBundle]] autorealease];
        [_VW addSubview:vc.view];
    }
}

- (IBAction)kill:(id)sender{
    [vc.view removeFromSuperview]; 
} 
```

现在您可以尝试其中任何一个，然后检查内存占用。

# iphone - 在 UIWebView 中同步加载 html 内容

> ID：10151231
> 
> 赞同：1
> 
> 时间：2012-04-14T05:17:20.087
> 
> 标签：iphone, objective-c, ios, xcode, uiwebview

我使用 UIWebView 在我的应用程序中显示 html 内容，该应用程序包含两个箭头来在主题之间导航，就像 RSS 阅读器应用程序一样，但是当用户点击向上或向下箭头时，下一个主题不会显示，直到数据到来返回，用户仍然可以与 UI 交互，这有点令人困惑，

我的问题：当用户移动到下一个/后退主题时如何阻止用户界面？换句话说，如何使 loadHTMLString:baseURL: 作为同步调用工作？谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T06:08:33.653

您可以让加载异步发生，但将 Web 视图的 userInteractionEnabled 属性设置为 NO。（然后在 didFinishLoad 回调中返回 YES）。

或者，您可以在 Web 视图上方放置一个清晰的彩色视图（将 userInteractionEnabled 设置为 NO），该视图有一个活动指示器和按钮，可以让用户取消加载。

一个更好的主意是在屏幕外放置另外两个 Web 视图并开始为页面 N-1 和 N+1 加载它们。当用户按下页面箭头时，将框架与相应的预取 Web 视图交换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T09:18:04.263

试试这个 - [https://github.com/gavrix/UISynchedWebView-demo](https://github.com/gavrix/UISynchedWebView-demo)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-27T20:15:20.443

If you are in a pinch and have a UIPageViewController and still want to use a UISynchedWebView to ensure that a page has loaded before you run javascript, you can run a block on the main thread's event queue. Still has a slight delay while the javascript runs but won't cause recursion in the run loop.

```
dispatch_async(dispatch_get_main_queue(), ^{
    [self.webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://google.com"]]];    // self.webView is a UISynchedWebView

    NSLog(@"url:%@", [self.webView stringByEvaluatingJavaScriptFromString:@"window.location.href;"]);       // shows google.com instead of about:blank
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T05:24:22.157

您实际上并不想阻止 UI。如果你这样做了，一旦你将它发送到应用商店提交，Apple 很有可能会拒绝你的应用。任何使应用程序感觉迟钝的远程操作都会给您带来沉重的负担。相反，使用 GCD 或 performSelectorInBackground 创建一个后台线程，在其中处理您的加载，然后一旦加载完成，立即将所有信息提供给您的 UIWebView 并提醒它呈现显示。

# ruby-on-rails - ROR 接受_nested_attributes_for 与选择的一对多关系

> ID：10151236
> 
> 赞同：0
> 
> 时间：2012-04-14T05:18:24.800
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-attributes

我有两个模型医生和问题，如以下：

博士模型

```
class Doctor < ActiveRecord::Base
has_many :questions
has_many :brands
accepts_nested_attributes_for :questions
end 
```

问题模型

```
class Question < ActiveRecord::Base
belongs_to :discipline  
belongs_to :doctor
belongs_to :brand
end 
```

现在您可以清楚地看到医生有很多问题和品牌，问题属于医生和品牌。我想从医生编辑页面将以前保存的问题添加到医生。我也想删除它们。我该如何继续？

我试过了：

```
<%= form.fields_for :questions, question,:child_index => (question.new_record? ? "index_to_replace_with_js" : nil) do |question_form| %>

  <table>
    <tr>
      <td>
        <div class="label">Select Question</div>
        <%= question_form.collection_select :id, Question.all, :id, :title ,{:include_blank => true } %>
      </td>          
    </tr>
  </table> 
```

但这对我不起作用。你能给我一个合适的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T05:33:14.150

它类似于
[http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)和
[http://railscasts.com/episodes/197-nested-model-form-part-2](http://railscasts.com/episodes/197-nested-model-form-part-2)

很好地回答这个问题。

# python - 如何使用 Django 从数据库中获取非 unicode 字符串？

> ID：10151237
> 
> 赞同：0
> 
> 时间：2012-04-14T05:18:40.483
> 
> 标签：python, django, unicode

使用 Django，我正在尝试编写一个视图，将通过表单 ( `request.POST['item']`) 提交的内容与该行中数据库中已有的内容进行比较。

我正在使用`Entry.objects.values_list('item', flat=True)`，但这给了我一个`unicode`对象列表，它会引发比较。

如果没有 ，我如何才能将这些对象作为纯列表获取`unicode`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T06:13:38.280

要创建`unicode`对象，您可以使用

```
from settings import DEFAULT_CHARSET
s = unicode(request.POST['item'], request.encoding or DEFAULT_CHARSET) 
```

请注意，里面的项目`request.POST`应该已经是 type `unicode`，因此不需要转换。

```
In [1]: a = u'Täöüß'

In [2]: a
Out[2]: u'T\xe4\xf6\xfc\xdf'

In [3]: type(a)
Out[3]: unicode 
```

以下将起作用，因为`unicode`不需要做任何事情：

```
In [4]: unicode(a)
Out[4]: u'T\xe4\xf6\xfc\xdf' 
```

但是，强制`unicode`从`utf-8`编码解码必须失败，因为`a`不是 8 位字符串而是`unicode`变量：

```
In [5]: unicode(a, 'utf-8')
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
----> 1 unicode(a, 'utf-8')

TypeError: decoding Unicode is not supported 
```

您可以`.encode(encoding)`在`unicode`对象上使用来创建 8 位字符串版本：

```
In [6]: utf8 = a.encode('utf-8')

In [7]: latin1 = a.encode('latin-1')

In [8]: latin1
Out[8]: 'T\xe4\xf6\xfc\xdf'

In [9]: utf8
Out[9]: 'T\xc3\xa4\xc3\xb6\xc3\xbc\xc3\x9f' 
```

请注意，生成的字符串是 type`str`而**不是**type `unicode`。

如果给定了`str`-typed 数据并且知道相应的编码，则可以`unicode`像这样创建对象：

```
In [10]: b = unicode(latin1)
---------------------------------------------------------------------------
UnicodeDecodeError                        Traceback (most recent call last)
----> 1 b = unicode(latin1)

UnicodeDecodeError: 'ascii' codec can't decode byte 0xe4 in position 1:
 ordinal not in range(128) 
```

这必须失败，因为没有给出编码，这意味着`ascii`假定了默认编码（当然，不能处理`0xe4`）。

```
In [11]: b = unicode(latin1, 'utf-8')
---------------------------------------------------------------------------
UnicodeDecodeError                        Traceback (most recent call last)
----> 1 b = unicode(latin1, 'utf-8')

UnicodeDecodeError: 'utf8' codec can't decode byte 0xe4 in position 1:
 invalid continuation byte 
```

`utf-8`使用错误的编码，在这种情况下，在处理字符串时尝试解码`latin-1`，也会引发`UnicodeDecodeError`.

```
In [12]: b = unicode(latin1, 'latin-1') 
```

使用正确的编码将允许`unicode`为给定的`str`实例创建一个对象。`b`等于`a`：

```
In [13]: b == a
Out[13]: True 
```

使用此信息，您应该能够在`unicode`任何需要它们的地方创建实例，从而将`request.POST`数据与数据库中的值进行比较。

有关 Python 中 Unicode 处理的更多信息，请访问[http://docs.python.org/howto/unicode.html](http://docs.python.org/howto/unicode.html)

Django 关于 Unicode 数据的文档可以在这里找到[https://docs.djangoproject.com/en/dev/ref/unicode/](https://docs.djangoproject.com/en/dev/ref/unicode/)

希望有帮助。

# jquery - jQuery插件：文本区域的字符计数

> ID：10151238
> 
> 赞同：2
> 
> 时间：2012-04-14T05:18:48.730
> 
> 标签：jquery

我正在使用下面的插件来计算 textarea 中的字符，但我想添加的唯一功能是，当字符超过限制时，它应该停止并且不允许输入更多字符。我应该只是当它匹配允许的字符时返回？

下面是带有源代码的示例链接。

[http://cssglobe.com/lab/charcount/01.html](http://cssglobe.com/lab/charcount/01.html)

```
(function($) {

    $.fn.charCount = function(options){

        // default configuration properties
        var defaults = {    
            allowed: 140,       
            warning: 25,
            css: 'counter',
            counterElement: 'span',
            cssWarning: 'warning',
            cssExceeded: 'exceeded',
            counterText: ''
        }; 

        var options = $.extend(defaults, options); 

        function calculate(obj){
            var count = $(obj).val().length;
            var available = options.allowed - count;
            if(available <= options.warning && available >= 0){
                $(obj).next().addClass(options.cssWarning);
            } else {
                $(obj).next().removeClass(options.cssWarning);
            }
            if(available < 0){
                $(obj).next().addClass(options.cssExceeded);
            } else {
                $(obj).next().removeClass(options.cssExceeded);
            }
            $(obj).next().html(options.counterText + available);
        };

        this.each(function() {              
            $(this).after('<'+ options.counterElement +' class="' + options.css + '">'+ options.counterText +'</'+ options.counterElement +'>');
            calculate(this);
            $(this).keyup(function(){calculate(this)});
            $(this).change(function(){calculate(this)});
        });

    };

})(jQuery); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T05:54:21.403

为此进行了一些小改动。首先，监控 keydown 而不是 keyup 事件。这允许您阻止默认并阻止添加新文本。接下来，您必须允许删除和退格，以便他们可以纠正错误。您可能应该考虑很多极端情况，例如剪切/粘贴、箭头键等。这就是为什么我不喜欢在这样的东西上修改文本区域的默认行为的原因。无论如何，您应该始终进行预传输和服务器端的双重检查，所以我认为除了可能惹恼您的用户之外，它不会给您带来很多好处。

[http://jsfiddle.net/qfzkw/2/](http://jsfiddle.net/qfzkw/2/)

```
(function($) {

    $.fn.charCount = function(options) {

        // default configuration properties
        var defaults = {
            allowed: 10,
            warning: 5,
            css: 'counter',
            counterElement: 'span',
            cssWarning: 'warning',
            cssExceeded: 'exceeded',
            counterText: '',
            preventTextEntry: true
        };

        var options = $.extend(defaults, options);

        function calculate(obj, event) {

            var count = $(obj).val().length;
            var available = options.allowed - count;
            if (available <= options.warning && available >= 0) {
                $(obj).next().addClass(options.cssWarning);
            } else {
                $(obj).next().removeClass(options.cssWarning);
            }

            if (available < 0) {
                if (options.preventTextEntry && event.which != 46 && event.which != 8) { event.preventDefault() };
                $(obj).next().addClass(options.cssExceeded);                
            } else {
                $(obj).next().removeClass(options.cssExceeded);
            }
            $(obj).next().html(options.counterText + available);
        };

        this.each(function() {
            $(this).after('<' + options.counterElement + ' class="' + options.css + '">' + options.counterText + '</' + options.counterElement + '>');
            calculate(this);
            $(this).keydown(function(e) {
                calculate(this, e)
            });
            $(this).change(function(e) {
                calculate(this, e)
            });
        });

    };

    $('textarea').charCount();

})(jQuery);​ 
```

# javascript - 为什么以下代码没有初始化我的 JavaScript 对象？

> ID：10151240
> 
> 赞同：0
> 
> 时间：2012-04-14T05:19:54.457
> 
> 标签：javascript

```
MyClass = function() {
    var init = function() {
        console.log("Initializing");
    }
    this.init();
}
var myInstance = new MyClass(); 
```

当我运行上述内容时，我得到

TypeError: Object [object Object] 没有方法'init'

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T05:21:54.380

构造函数作用域中的局部变量不会成为实例的属性。

而不是`var init = function...;`，使用`this.init = function...;`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T05:22:11.210

这是因为通过声明`init`为`var`, 或局部变量而不是对象的属性。因此，`init`它不会成为您的对象的成员函数，这就是您的代码未能按预期运行的原因。将其初始化为`this.init = function() {`实现预期的行为。

[http://jsfiddle.net/Y2Rvq/](http://jsfiddle.net/Y2Rvq/)

# blackberry - 如何在没有用户交互的情况下从黑莓中的相机拍照？

> ID：10151241
> 
> 赞同：-4
> 
> 时间：2012-04-14T05:20:04.510
> 
> 标签：blackberry, blackberry-simulator, blackberry-eclipse-plugin

我是一名黑莓开发人员，我创建了一个黑莓相机应用程序。但是我点击时拍照是否可以在没有任何用户交互的情况下拍照。这对我的应用程序是必需的。请建议我并将代码发送给我，我正在经历这个过程。

```
 public void doTakePicture(){
    try
    {

        System.out.println("Inside doTakePicture");
      Invoke.invokeApplication(Invoke.APP_TYPE_CAMERA,new CameraArguments());
      player = javax.microedition.media.Manager.createPlayer("capture://video");
      player.realize();
      player.start();
      videoControl = (VideoControl) player.getControl("VideoControl");

      if(videoControl!=null)
      {
          Field videoField = (Field) videoControl.initDisplayMode (VideoControl.USE_GUI_PRIMITIVE, "net.rim.device.api.ui.Field");
          videoControl.setDisplayFullScreen(true);
          videoControl.setVisible(true);
          System.out.println("videoControl=="+videoControl);
          if(videoField != null)
          {
              add(videoField);
          }

      } 

    }

catch(Exception ex)
 {
    System.out.println(ex);

 }
} 
```

public boolean invokeAction(int action) { System.out.println("Action=="+action); 布尔处理 = super.invokeAction(action);

```
System.out.println("handled=="+handled);
System.out.println("Inside Invoke Camera");

if(handled==false)
{
    System.out.println("Inside First If Blog"); 
    if(action == ACTION_INVOKE)
    {   
        System.out.println("Inside Second If Blog");
        try
        {    
            System.out.println("If Blog of invoke Action");

            System.out.println("videoControl11=="+videoControl);
            byte[] snapshot = videoControl.getSnapshot(null);
            System.out.println("snapshot=="+snapshot);
        }
        catch(Exception e)
        {
            Dialog.alert(e.toString());
        }
    }
}           
return handled; 
```

}

使用此代码我想尝试在调用相机但不自动拍照时自动拍照，我在这里得到一个空值 byte[] snapshot = videoControl.getSnapshot(null); 请帮助我在哪里犯错。
提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T21:28:27.090

您需要从应用程序中实例化相机，而不是调用默认相机应用程序。完成此操作后，您可以通过调用以编程方式拍摄照片`VideoControl.getSnapshot`。例子：

```
Player player = Manager.createPlayer("capture://video");
player.realize();
player.start();
VideoControl videoControl = (VideoControl) player.getControl("VideoControl");

//this will take a photo
byte[] snapshot = videoControl.getSnapshot("encoding=jpeg&width=640&height=480&quality=superfine"); 
```

# json - 将 json 视为数组

> ID：10151243
> 
> 赞同：0
> 
> 时间：2012-04-14T05:20:47.930
> 
> 标签：json

我正在用 json 进行一些测试并遇到了几个问题。希望这个邮件列表上的人可以提供帮助。

```
localStorage[LOC] = JSON.stringify(track);
            var boy = localStorage[LOC];
            alert(boy); 
```

这是我得到的数据

```
[{"lat":42.5877511,"lng":-71.7873177,"acc":67,"date":"Sat Apr 14 2012 01:03:46 GMT-0400 (EDT)"}] 
```

我想知道如何像在常规数组中那样访问 json 对象。

出于调试目的，我做了类似的事情，

```
alert(boy[0].lat); 
```

但是我得到的结果是不确定的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T05:23:34.520

运行字符串`JSON.parse()`以取回您的对象：

```
var boy = JSON.parse(localStorage[LOC]); 
```

`JSON.parse()`本质上是相反的`JSON.stringify()`。您运行`stringify`将一个对象转换为一个字符串用于本地存储，当您将字符串拉回本地存储时，您运行`parse`将字符串转换回一个对象。

# zend-framework - Zend 框架中的模块未加载索引控制器

> ID：10151246
> 
> 赞同：-1
> 
> 时间：2012-04-14T05:22:08.107
> 
> 标签：zend-framework

遵循 Pro Zend Framework 技术，我在模块目录中创建了一个名为“Contact”的模块。这是目录结构。

```
    |_应用
     |_配置
       |_应用程序.ini
     |_控制器
     |_模块
       |_联系方式
          |_控制器
             |_索引控制器
          |_型号
          |_views
          引导程序.php

    引导程序.php

```

应用目录下的Bootstrap文件有一个_initAutoload()函数，如下图：

```
    受保护的函数 _initAutoLoad(){
    $autoLoader = Zend_Loader_Autoloader::getInstance();
    $autoLoader->registerNamespace('CMS_');
    $resourceLoader = 新 Zend_Loader_Autoloader_Resource(
    array('basePath' => APPLICATION_PATH , 'namespace' => '' ,
    'resourceTypes' => array('form' => array('path' => 'forms/' , 'namespace' => 'Form_') ,
    'model' => array('path' => 'models/' , 'namespace' => 'Model_'))));

    返回 $autoLoader;
    }

```

**模块**中的引导文件是：

```
    Contact_Bootstrap 类扩展 Zend_Application_Module_Bootstrap
    {
    受保护的函数 _initAutoLoad(){
    $autoloader=new Zend_Application_Module_Autoloader(array('namespace'=>'Contact_',
    'basePath'=>目录名(__FILE__),));
    返回 $autoLoader;
    }
    }

```

config 文件夹中的 application.ini 文件具有以下几行用于设置模块“联系人”：

```
    resources.frontController.moduleDirectory = APPLICATION_PATH "/modules"
    资源.modules[] = ""
    contact.resources.frontController.defaultControllerName = "索引"

```

我已经设置了一个应用程序错误控制器，它有一个 getmessage() 函数来显示错误。当我尝试加载[http://localhost/zf_cms/public/contact](http://localhost/zf_cms/public/contact)时，它给出了一个错误：

```
    getMessage() ：指定的控制器无效（索引）

```

modules->contact->controller 中的索引控制器名称为 Contact_IndexController。我还为索引控制器创建了一个视图。

请帮我找到错误，如果我错过了一些信息，请告诉我。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T07:42:45.307

将模块和控制器目录重命名为小写。从您的帖子看来，您也没有将 .php 扩展名添加到您的 IndexController 中。

# objective-c - API 的 CoreData 模型对象

> ID：10151251
> 
> 赞同：2
> 
> 时间：2012-04-14T05:23:00.417
> 
> 标签：objective-c, ios, core-data, model

我在我的应用程序中使用 CoreData。我想将所有与 CoreData 相关的东西抽象为 API，以便消费者可以使用 API 而不是直接使用 CoreData 及其生成的模型对象。CoreData 生成托管对象模型如下

```
@interface Person : NSManagedObject

@end 
```

我想定义我的 API，例如 MyAPI，它有一个名为

```
createPerson:(Person*)p; 
```

所以这个 createPerson API 的使用者需要创建一个 Person 数据对象（就像 java world 中的 POJO）并调用这个 API。但我无法使用创建 Person 对象

```
Person *p = [Person alloc] init] 
```

因为 CoreData 创建的这个 Person 模型的指定初始化器不允许这种类型的创建。

那么我是否应该定义相应的面向用户的数据对象可能是 PersonDO，而这个 API 应该采用它来将数据携带到 API 实现中？

我的做法对吗？任何专家建议以这种方式设计 API 是否是一个好的设计模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T05:54:10.957

如果不处理托管对象上下文，就不能使用 CoreData。您**必须**从上下文中获取人员并将其保存在上下文中。如果您不希望您的客户处理这个问题，并且您不在您的应用程序中使用不同的线程，您可以创建一个 api，它将调用您的 appdelegate 的托管对象上下文，而用户需要做的只是调用该方法。

例如，您可以使用 Core Data 自动生成的方法来使您的 API 像这样：

```
+ (Person *)newPersonWithAttributes:(NSDictionary *)userInfo {

    // Call the designated initializer, but customer
    // doesn't need to think about managed object context
    return [Person initPesonWithAttributes:userInfo 
                    inManagedObjectContext:[[AppDelegate sharedAppDelegate] managedObjectContext]];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T07:00:20.693

你需要很多东西来抽象出来。RestKit 提供了这样做的机制。更轻的重量将是 InnerBand（参见教程[InnerBand CoreData](http://raptureinvenice.com/innerband-2/)） - 尽管它不会自动确定多线程的线程/队列。

但是，它是一个非常简单的 API，应该可以满足您的大部分需求。

# android - 在android中加载本机谷歌地图有任何限制吗？

> ID：10151253
> 
> 赞同：1
> 
> 时间：2012-04-14T05:23:08.743
> 
> 标签：android, google-maps

我有以下代码将本机谷歌地图应用程序加载到我的项目中：

```
final Intent intent = new Intent(Intent.ACTION_VIEW, Uri
                    .parse("http://maps.google.com/maps?"
                            + "saddr=43.0054446,-87.9678884"
                            + "&daddr=42.9257104,-88.0508355"));

            intent.setClassName("com.google.android.apps.maps",
                    "com.google.android.maps.MapsActivity");

            startActivity(intent); 
```

我应该知道是否有任何限制或先决条件。
因为它可以在我的笔记本电脑模拟器上工作，但不能在 PC 模拟器上工作。
我只加载本机谷歌地图应用程序，它应该可以在任何模拟器上运行。
我在这里想念什么吗？

我得到空白黑屏和**logcat 错误**是：

> 04-16 16:20:06.051: D/PhoneWindow(841): 无法保存哪个视图有焦点，因为焦点视图 com.android.internal.policy.impl.PhoneWindow$DecorView@450274e8 没有 id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T11:45:16.820

您的模拟器之一是否设置为构建目标“Google APIs (Google Inc.) – API Level XY”和一个设置为“Android AB – API Level XY”？对于 Google Maps API，您应该使用第一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T11:04:05.263

```
intent.setClassName("com.google.android.apps.maps","com.google.android.maps.MapsActivity"); 
```

首先，不需要上述行，因为您正在加载本机地图。并且一旦检查您是否能够在您的 PC 模拟器中启动地图应用程序，因为这些也可能是您的 PC 代理的问题。

# screen-resolution - 网站支持的最低分辨率应该是多少？

> ID：10151254
> 
> 赞同：3
> 
> 时间：2012-04-14T05:23:19.593
> 
> 标签：screen-resolution

我正在开发一个网站，但我不知道“支持”的最低分辨率应该是多少。我知道它可以在所有分辨率下运行，但“支持”是指所有内容都适合页面而不需要左右滚动。我是否应该考虑“支持”1024x768？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T05:38:28.187

除了“了解你的听众”之外，这里没有正确的答案。在开发的早期，这不是一件容易的事，除非您针对的是非常特定的利基受众。

通用网站的常用方法是检查流行网站的当前浏览器显示统计信息：

1.  [W3 柜台](http://www.w3counter.com/globalstats.php)
2.  [W3Schools 浏览器显示统计](http://www.w3schools.com/browsers/browsers_display.asp)

1024x768 仍然是一个非常流行的分辨率，并且是一个安全的选择。而且，虽然我没有找到任何官方统计数据，但这显然是 Stack Exchange 的目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T05:31:03.947

> 暂时没有，因为我计划稍后制作一个移动网站。

在这个答案中，我将重点关注桌面方面的事情。

根据[Net Applications](http://netmarketshare.com/report.aspx?qprid=17&qpob=UV+DESC)的说法，1024x768 是当今最流行的分辨率，占比超过 15%。“桌面”尺寸的下一步是 800x600，但它只有 0.89% 的份额，因此您可能不必费心在桌面站点上支持低于 1024x768 的分辨率。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T06:01:53.137

我 100% 同意@Yannis，这是一个目标受众的问题。1024 宽对于全球受众来说是一个很好的基准，但如果您的网站不适合“普通”互联网用户，那么您可能有充分的理由使用更宽（或更窄的布局）。例如，如果您的目标是高级用户，1280 甚至 1600 可能是可以接受的。

另一种可能性是使用许多现代网站使用的可变布局。这意味着根据当前用户的浏览器宽度调整宽度（甚至整个 CSS）。这给您的网站带来了非常时尚的感觉。

使用可变布局的一个非常好的例子是在 Trello 应用程序中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-14T05:38:52.497

桌面浏览器上内容的安全宽度为 960 像素，这为其他答案中提到的非常常见的 1024x768 显示器上的简单背景留出了足够的空间。960px 的宽度对[网格布局](http://fernvale.wordpress.com/2008/10/07/optimal-html-width-960-pixels/)也很友好。

如果您想走更灵活的路线并支持不要太担心某些分辨率范围（移动设备可能无法承受），请考虑流式[布局](http://www.maxdesign.com.au/articles/liquid/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-06T20:25:23.660

1024x768 应该没问题。但是找出签署支票的人使用的分辨率，并尝试开发一种流畅的布局以避免横向滚动。

# c++ - 从类方法返回结构

> ID：10151264
> 
> 赞同：0
> 
> 时间：2012-04-14T05:24:59.723
> 
> 标签：c++, struct, operator-overloading

我有一个如下所示的头文件：

```
class Model {
 private:
  struct coord {
    int x;
    int y;
  } xy;
 public:
  ....
 coord get() const {
  return xy;
 }
}; 
```

在另一个文件中（假设 ModelObject 存在）：

```
struct c {
 int x;
 int y;
 void operator = (c &rhs) {
   x = rhs.x;
   y = rhs.y;
 };
} xy;

xy = ModelObject->get(); 
```

编译器抛出一个错误，指出从 coord 到 c 没有已知的 covnersion。我相信这是因为它不知道坐标类型，因为它是在类头中声明的。我可以通过在类之外声明结构来解决这个问题，但我想知道是否可以按照我的方式做，或者这通常被认为是不好的做法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T05:26:10.043

您将需要一个隐式转换运算符`Model::coord`to `c`。有关如何执行此操作的信息，我建议查看[C++ Implicit Conversion Operators](https://stackoverflow.com/questions/2483491/c-implicit-conversion-operators)。

此外，当您提到“它不知道类型，因为它在一个类中”时，您将`Model::coord`用作外部世界的结构类型（只要`coord`是公共的，在您当前的情况下不是）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T08:38:12.667

您提供的代码有两个主要问题：
1\. 您没有给出从`struct coord`to的转换`struct c`。
2.你不能`struct coord`在外面使用，`class Model`因为它被声明为私有的。

1.  即使`struct coord`和`struct c`相似，编译器的通灵能力也非常有限。对于编译器来说，这两个结构是不同的，即使它们本质上是一样的。解决这个问题的一种方法是提供`struct c`一个适当的赋值运算符，它采用以下类型`struct coord`：

    ```
    strutc c {  
        ...  
        void operator = (const coord& rhs) { ... }  
    }; 
    ```

2.  您必须`struct coord`公开更多才能在外面使用`class Model`。
    您可以通过以下方式做到这一点：
    a）`struct coord`在类 Model 之外声明或
    b）在类 Model 内将其声明为 public

    如果您执行后者，则必须使用限定名称`Model::coord`来访问该结构。

备注：
考虑改变方法

```
 coord Model::get() const; 
```

至

```
 const coord& Model::get() const; 
```

一个微妙的变化会产生很大的不同。`struct coord`这节省了堆栈上 的隐式构造。

考虑改变运营商

```
 void c::operator = (c &rhs); 
```

至

```
 void c::operator = (const c& rhs); 
```

因为赋值运算符不会改变给定的参数结构 c。
const 正确性不仅是语法糖，而且是强制性的，它提高了可读性。

所以这是我的建议：

```
class Model {
public:
    struct coord {
        int x; int y;
    };

private:
    coord xy;

public:
    const coord& get() const { return xy; }
};

struct c {
    int x; int y;

    void operator = (const c &rhs) { x = rhs.x; y = rhs.y; };
    void operator = (const Model::coord &rhs) { x = rhs.x; y = rhs.y; };
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T05:50:19.150

添加一个带坐标的 c 构造函数足以使编译器进行转换。现在为什么你有*两种*不同的类型呢？将这个坐标类从模型中分解出来并在两个点上都使用它们不是更好吗？

# jquery - 显示错误焦点 - 验证 jQuery

> ID：10151266
> 
> 赞同：0
> 
> 时间：2012-04-14T05:25:22.657
> 
> 标签：jquery, jquery-validate

当用户点击输入框等时，我怎么能显示我的错误？

```
jQuery(document).ready(function() { 
    //Home Validation
    $("#quote").validate({
        rules:{
            companyName:{
                required: true,
                url: true
            }
        }
    });
etc etc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T06:45:21.950

哇，这花了我太长时间才弄清楚。

简短的回答：`input type="input"`应该是`input type="text"`.

然后这将起作用：

```
$("#quote").validate({
    onfocusout: function(element) {
         $(element).valid();
    },
    rules:{
        companyName:{
            required: true,
            url: true
        }
    }
}); 
```

# c# - 在 asp.net C# 中单击按钮时重定向新选项卡或浏览器。（Response.Redirect）

> ID：10151269
> 
> 赞同：1
> 
> 时间：2012-04-14T05:26:20.393
> 
> 标签：c#, asp.net

任何人都可以建议我们如何使用 C# 中的 Response.Redirect 在新窗口或新浏览器中打开页面。我用过： Response.Redirect("page1a.aspx");

但它在现有选项卡中打开。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T05:36:46.747

如果是的话，你能用javascript吗，那么请试试这个

```
 Response.Write("<script>");
        Response.Write("window.open('ClickPicture.aspx','_blank')");
        Response.Write("</script>"); 
```

# asp.net - 获取基类的所有后代类型

> ID：10151272
> 
> 赞同：0
> 
> 时间：2012-04-14T05:26:58.990
> 
> 标签：asp.net, devexpress, xaf

我有一个名为的基类`BaseEvent`和几个后代类：

```
public class BaseEvent {
    // the some properties
    // ...
}

[MapInheritance(MapInheritanceType.ParentTable)]
public class Film : BaseEvent {
   // the some properties
   // ...
}
[MapInheritance(MapInheritanceType.ParentTable)]
public class Concert : BaseEvent {
    // the some properties
    // ...
} 
```

我有一个在运行时创建`BaseEvent`实例的代码：

```
BaseEvent event = new BaseEvent();
// assign values for a properties
// ...    
baseEvent.XPObjectType = Database.XPObjectTypes.SingleOrDefault(
    t => t.TypeName == "MyApp.Module.BO.Events.BaseEvent"); 
```

现在，此事件将显示在`BaseEvent`列表视图中。

我想做以下事情：当用户单击`Edit`按钮时，然后在列表视图查找字段中显示所有后代类型。并且当用户将记录更改保存`ObjectType`到所选值时。

我怎样才能做到这一点？
谢谢。

PS。这是 asp.net 应用程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T15:21:33.097

我不确定您的方法是否适合您想要实现的目标。首先，我将回答您提出的问题，然后我将尝试解释 XAF 如何已经提供了您想要实现的功能，即如何从用户界面选择要创建的记录子类。

为了创建一个允许用户`Type`在应用程序中选择的属性，您可以声明一个 TypeConverter：

```
public class EventClassInfoTypeConverter : LocalizedClassInfoTypeConverter
{
    public override StandardValuesCollection GetStandardValues(ITypeDescriptorContext context)
    {
        List<Type> values = new List<Type>();
        foreach (ITypeInfo info in XafTypesInfo.Instance.PersistentTypes)
        {
            if ((info.IsVisible && info.IsPersistent) && (info.Type != null))
            {
                // select BaseEvent subclasses
                if (info.Type.IsSubclassOf(typeof(BaseEvent))) 
                    values.Add(info.Type);
            }
        }
        values.Sort(this);
        values.Insert(0, null);
        return new TypeConverter.StandardValuesCollection(values);
    }
} 
```

然后您的基本事件类将如下所示：

```
public class BaseEvent: XPObject
{
    public BaseEvent(Session session)
        : base(session)
    { }

    private Type _EventType;
    [TypeConverter(typeof(EventClassInfoTypeConverter))]
    public Type EventType
    {
        get
        {
            return _EventType;
        }
        set
        {
            SetPropertyValue("EventType", ref _EventType, value);
        }
    }
} 
```

但是，我怀疑这不是您需要的功能。修改属性的值不会改变记录的基本类型。也就是说，您最终会`BaseEvent`得到一个属性`Type`等于“音乐会”或“电影”的类型的记录。

XAF 已经提供了一种机制来选择要创建的记录类型。在您的场景中，您会发现该`New`按钮是一个下拉菜单，其中包含不同的子类作为选项：

![在此处输入图像描述](../Images/42bbc70dee489236c82b2ac1d9970f61.png)

因此，您不需要在对象中创建“类型”属性。如果你需要一个列来在列表视图中显示事件的类型，你可以声明一个属性如下

```
[PersistentAlias("XPObjectType.Name")]
public string EventType
{
    get
    {
        return base.ClassInfo.ClassType.Name;
    }
} 
```

# php - 从网页中保存图像 + 也使用 PHP 保存其名称

> ID：10151277
> 
> 赞同：-2
> 
> 时间：2012-04-14T05:28:03.780
> 
> 标签：php

如何保存网页中的图像，例如：

```
http://othersdomain.com/image/colorful.jpg 
```

如何保存图像并将其保存到 FTP 内的目录“图像”中。并从链接中获取“彩色”名称。

作为结论，它将获得 colourful.jpg 并以相同的名称保存在我的目录中，然后键入然后回显到它的链接（在我的 Web 服务器上）。

保存到我的服务器后，它会回显如下内容：

```
http://mydomain.com/image/colorful.jpg 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T05:32:00.367

您可以使用[`file_get_contents`](http://php.net/manual/en/function.file-get-contents.php).

```
$file = file_get_contents('http://othersdomain.com/image/colorful.jpg'); 
```

# vim - 艰难地学习 Emacs/Slime（来自 Vim 10 年）

> ID：10151280
> 
> 赞同：6
> 
> 时间：2012-04-14T05:28:33.187
> 
> 标签：vim, emacs, clojure, slime

这是一个真正的问题，不是为了引发一场激烈的战争。

我已经使用 Vim 超过 10 年了；看着人们使用 Emacs/Slime ... 让我决定学习 Emacs/Slime。

我想尽快跟上进度：

*   我本能地做了一堆“手指宏”——我想找出 Emacs/Slime 中的等价物并重新训练自己

*   由于我熟悉 Clojure，因此编写 elisp 配置不会成为问题（有时减去动态变量）

我应该阅读/记忆什么？

编辑：注意，我尝试过 VimClojure，并决定我更喜欢 Slime/Swank。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-14T05:33:14.230

当我学习一个新的编辑器（或任何类型的工具）时，当我不知道如何做某事（例如保存文件）时，我会在谷歌上搜索答案，然后去做，超过**3 倍**。

在 Emacs 中，保存一个文件是 Cx Cs。每次你记不住是什么的时候，重复三遍。它会很快成为第二天性。

永远不要因为匆忙或懒惰而“作弊”。根据需要研究每个命令，并重复它，直到它变成“手指宏”。

# javascript - 带有 gettext 和 .po 文件的 javascript i18n

> ID：10151284
> 
> 赞同：2
> 
> 时间：2012-04-14T05:29:32.873
> 
> 标签：javascript, python, google-app-engine, localization, gettext

我的翻译机制与 jinja2 模板引擎一起在服务器端工作，webapp2 的 i18n 函数与魔术 _ 函数一起工作，现在我需要它让 Javascript 只本地化几个字符串，但我找不到一个好的实现。有吗？

我想要一个本地化我的网络应用程序的解决方案。javascript 字符串只是几个，但我需要一个翻译机制，字典是 .po 和 .mo 文件。理想情况下，我希望 javascript 采用与 python 相同的字典（.po 文件）

我不需要提取，我需要的是 _ 函数加上一些确定用户语言和加载翻译的方法，不仅适用于单一语言，而且适用于我的所有语言。我查看了一些解决方案，但他们一次只处理一个翻译，我需要处理很多。

例如，[http://www.zomeoff.com/jsin/jsin.1.2.unit.test.html](http://www.zomeoff.com/jsin/jsin.1.2.unit.test.html)做得很成功，但这只是一个本地化。我需要协调翻译，以便 python jinja2 模板和 javascript 使用相同的语言。

你有什么建议或者可以评论我的情况吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T05:34:19.297

[Javascript 获取文本](http://jsgettext.berlios.de/)

不过，您可能可以使用 polib 并动态`json`生成 JSON。

# drupal-7 - Openlayer drupal模块邮政编码错误

> ID：10151289
> 
> 赞同：0
> 
> 时间：2012-04-14T05:31:05.400
> 
> 标签：drupal-7, drupal-modules

我正在使用 openlayer drupal 模块。我在 url 中传递邮政编码并从 url 获取邮政编码并映射位置。它适用于除 45150 以外的所有邮政编码。45150 是“米尔福德”的邮政编码，但在地图上它向我展示了托皮卡。为什么会发生。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T18:51:43.927

您使用的是哪个版本的 OpenLayers 模块？还有，还有哪些模块？这里似乎没有足够的信息来帮助您调试此问题。

新的[D7 手册页面](http://drupal.org/node/1481374)可能会有所帮助，但并不那么具体。

# ios - 递归通知

> ID：10151293
> 
> 赞同：0
> 
> 时间：2012-04-14T05:32:32.327
> 
> 标签：ios, ipad, nsnotificationcenter

我的应用程序是IOS应用程序。我有一个 iPad 日历应用程序的典型场景，当用户从视图转到某个日期时，每个视图都会自行更新并通知其他人。问题是视图之间的通知永远不会结束。

我正在使用 NSNotificationCenter

```
[[NSNotificationCenter defaultCenter] postNotificationName:SelectedDateChangedNotification object:self userInfo:nil]; 
```

我想探讨一些有关如何有效实施此方案的想法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T05:36:01.653

您需要有两种方法来更新每个视图。第一种方式是当用户更新它时，第二种方式是当它被不同的视图更新时。第一种方式向其他视图发送通知，而第二种方式不发送。从实现的角度来看，第一种方式只是对第二种方式的包装，它首先通知其他视图。

# python - 使用 Google App Engine 时无法导入 Flask

> ID：10151294
> 
> 赞同：4
> 
> 时间：2012-04-14T05:32:57.740
> 
> 标签：python, google-app-engine, flask

我正在遵循[本指南](http://f.souza.cc/2010/08/flying-with-flask-on-google-app-engine/)并尝试开发一个 Flask 应用程序以在 Google App Engine 上运行。我按照这封信的指南进行操作，但是当我从启动器启动开发应用程序服务器并转到[http://localhost:8080/](http://localhost:8080/)时，我收到了 HTTP 500 错误。

我检查日志，它说`No module named flask`。然后我通过运行检查管理控制台中的交互式控制台，`import flask`并收到相同的错误消息。我可以在任何其他 python 文件中导入烧瓶而不会出错。

有没有办法来解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-10T00:24:18.160

使用 GAE 和 Flask 我已经意识到这一点：

**直接用 Python 运行**

要直接使用 python ( `python app.py`) 运行应用程序，您需要使用以下命令在您的环境中安装依赖包：`pip install flask`

**使用 dev_appserver.py 运行**

要使用 GAE SDK 提供的 dev_appserver.py 运行应用程序，您需要在项目中包含所有依赖包，例如：Flask、jinja2 ... 在我的另一个答案中查看如何配置此包的示例：[https://stackoverflow。 com/a/14248647/1050818](https://stackoverflow.com/a/14248647/1050818)

# 更新

在 Windows 上运行 Python、Virtualenv、Flask 和 GAE

**安装 Python**

1.  安装 Python [http://www.python.org/ftp/python/2.7.2/python-2.7.2.msi](http://www.python.org/ftp/python/2.7.2/python-2.7.2.msi)
2.  单击 Windows 开始按钮并通过“编辑系统环境”搜索并打开
3.  转到高级选项卡，然后单击“环境变量...”按钮
4.  当 Environment Variables 窗口打开时，从 System variables 列表中选择 Path 并单击 Edit...</li>
5.  将其添加`;C:\Python27;C:\Python27\Scripts`到值的末尾并保存

**安装 setuptools MS Windows 安装程序**（需要在 Windows 上安装 PIP）

1.  [在此页面http://pypi.python.org/pypi/setuptools#files](http://pypi.python.org/pypi/setuptools#files)中为您选择正确的安装程序（我使用了这个： http: [//pypi.python.org/packages/2.7/s/setuptools/setuptools- 0.6c11.win32-py2.7.exe#md5=57e1e64f6b7c7f1d2eddfc9746bbaf20](http://pypi.python.org/packages/2.7/s/setuptools/setuptools-0.6c11.win32-py2.7.exe#md5=57e1e64f6b7c7f1d2eddfc9746bbaf20) )
2.  下载安装程序并安装它

**安装画中画**

1.  下载 PIP [http://pypi.python.org/pypi/pip#downloads](http://pypi.python.org/pypi/pip#downloads)
2.  解压到任意文件夹
3.  从该目录中，键入`python setup.py install`

**安装 Virtualenv**

1.  执行`pip install virtualenv`
2.  执行此`mkdir c:\virtualenvs`操作以创建到 Virtual Envs 的文件夹
3.  执行此`cd c:\virtualenvs`操作以访问该文件夹
4.  执行`virtualenv flaskdemo`为您的项目创建一个 virtualenv
5.  激活虚拟环境`c:\virtualenvs\flaskdemo\scripts\activate`

**安装 Google App Engine SDK**

1.  安装 SDK [https://developers.google.com/appengine/downloads](https://developers.google.com/appengine/downloads)

**创建项目**

1.  为您的项目创建一个目录
2.  创建您的应用程序的主体[https://github.com/maxcnunes/flaskgaedemo/blob/master/main.py](https://github.com/maxcnunes/flaskgaedemo/blob/master/main.py)
3.  为 Google App Engine [https://github.com/maxcnunes/flaskgaedemo/blob/master/app.yaml创建您的应用程序的配置](https://github.com/maxcnunes/flaskgaedemo/blob/master/app.yaml)
4.  创建一个文件让 GAE 初始化您的应用程序[https://github.com/maxcnunes/flaskgaedemo/blob/master/initialize_gae.py](https://github.com/maxcnunes/flaskgaedemo/blob/master/initialize_gae.py)

（在此处查看代码示例：[https](https://github.com/maxcnunes/flaskgaedemo) ://github.com/maxcnunes/flaskgaedemo ）

**安装 Flask 以在本地运行**

1.  执行`pip install flask`

**安装 Flask 以在 GAE 上运行**

1.  下载 Flask [https://github.com/mitsuhiko/flask/archive/0.9.zip](https://github.com/mitsuhiko/flask/archive/0.9.zip)并在你的项目中提取文件夹flask
2.  下载 Werkzeug [https://github.com/mitsuhiko/werkzeug/archive/0.8.3.zip](https://github.com/mitsuhiko/werkzeug/archive/0.8.3.zip)并在项目中解压 werkzeug 文件夹
3.  下载 Jinja2 [https://github.com/mitsuhiko/jinja2/archive/2.6.zip](https://github.com/mitsuhiko/jinja2/archive/2.6.zip)并在您的项目中提取文件夹 jinja2
4.  下载 Simple Json [https://github.com/simplejson/simplejson/archive/v3.0.5.zip](https://github.com/simplejson/simplejson/archive/v3.0.5.zip)并在您的项目中提取文件夹 simplejson

**使用 GAE SDK 运行应用程序**

1.  打开 Google App Engine 启动器
2.  添加新应用程序
3.  运行应用程序
4.  单击浏览按钮以在浏览器上打开您的应用程序
5.  最后单击 Deploy 按钮以部署您的应用程序

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-08T04:40:01.217

通常，模板带有`requirements.txt`. 如果没有，请在此处添加您的依赖项，然后运行`pip install -t lib -r requirements.txt`以强制将库保存在`lib`文件夹中。

如果它还没有，请确保你已经添加`lib`了。`appengine_config.py``vendor.add('lib')`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-17T03:59:16.880

我也遇到了同样的问题，在花了 1 天的时间后发现我的愚蠢错误实际上是在重构我的烧瓶应用程序时更改 `appengine_config.py`为其他名称。

如果您的所有依赖项仅在文件夹中，理想情况下`appengine_config.py`应该如下所示`lib`

```
from google.appengine.ext import vendor

#Add any libraries installed in the "lib" folder.
vendor.add('lib') 
```

并且因为它无法找到并执行`appengine_config.py`所以`lib`文件夹没有注册为依赖文件夹。要检查，您可以尝试打印一些`appengine_config.py`内容以检查它是否在服务器启动时执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-29T14:56:17.793

您是否安装了 Python 的 Extra Libraries 组件？它可以安装

`gcloud components install app-engine-python-extras`

安装这个额外的库后，您应该可以毫无问题地使用内置的烧瓶库。有关更多信息，请参阅[此页面](https://cloud.google.com/appengine/docs/standard/python/download)

[资源](https://github.com/GoogleCloudPlatform/python-docs-samples/issues/1212#issuecomment-345873917)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-24T20:38:15.930

tldr：使用 appengine_config.py 并将您的 virtualenv 复制到名为 lib 的文件夹中，然后确保您正在通过 dev_appserver.py 运行应用程序

（下面是通过ubuntu中的bash）所以经过长时间的战斗，我发现虚拟环境和gcloud玩得不好 -

我从我的虚拟环境目录中复制了所有内容

```
.../.virtualenvs/nimble/local/lib/python2.7/site-packages 
```

进入

```
[projectdir]/lib 
```

我的 appengine_config.py 终于像在云中一样在本地工作了，但我绝对必须运行

```
dev_appserver.py [my proj dir here] 
```

或者 google.appengine 模块不会加载。不知道我应该使用开发服务器。我觉得很笨。

供参考，这是 appengine_config.py

```
"""`appengine_config` gets loaded when starting a new application instance."""

print 'running app  config yaya!'

from google.appengine.ext import vendor
vendor.add('lib')
print 'I am the line after adding lib, it should have worked'
import os
print os.getcwd() 
```

# c# - 多线程批处理（SELECT 和 UPDATE）[.NET][DB2]

> ID：10151302
> 
> 赞同：0
> 
> 时间：2012-04-14T05:34:19.703
> 
> 标签：c#, multithreading, db2, batch-processing

我有以下要求 -

我必须
1.query 一个表并选择大约 20k 行匹配一些条件。
2.处理这些记录并更改一些字段。
3.用改变的记录更新同一张表。

如何使用多线程批处理 SELECT、PROCESS 和 UPDATE 记录？有什么最佳实践吗？使用的最佳线程数是多少？任何替代方法？

！要使用的行相互独立

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T05:40:53.443

当然，您意识到，除非您正在处理的行彼此完全独立，否则并发线程中的处理可能会损害性能。

对？

无论如何，我最好的建议：

1) 除非绝对需要，否则不要使用多线程

2）即使那样，除非“批次”是独立的，否则不要使用多个线程（一个批次中的任何内容都不需要等待另一个持有的锁）

3) 一起做查询、处理和更新，作为一个批次

……而且，最重要的……

4) 尽可能使用存储过程：

[http://publib.boulder.ibm.com/infocenter/db2luw/v8/index.jsp?topic=/com.ibm.db2.udb.doc/ad/c0007033.htm](http://publib.boulder.ibm.com/infocenter/db2luw/v8/index.jsp?topic=/com.ibm.db2.udb.doc/ad/c0007033.htm)

# android - 圆角矩形形状从android中的服务器检索图像

> ID：10151308
> 
> 赞同：1
> 
> 时间：2012-04-14T05:36:26.253
> 
> 标签：android

我想为从服务器获取并在列表视图中显示的图像赋予圆角矩形形状。目前，我能够将图像制作成圆角矩形形状，这些图像可在我的可绘制文件夹中找到。但是发现从服务器获取图像的困难。

请让我知道我该怎么做..

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T06:57:10.693

圆角查看，只需为drawable创建xml，将半径率应用于您的图像角落，您也可以将背景颜色应用于您的视图，检查以下代码和步骤。

在 Res 中创建一个名为*Drawable*的文件夹，在 drawable 中保留在 xml 下方，您可以在运行时或在布局 xml 中设置您的视图。

> round_border.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
<solid android:color="#5a5a5a"/>
<corners android:radius="10px"/>
<padding android:left="20dp" android:top="20dp" android:right="20dp" android:bottom="20dp"/> 
</shape> 
```

> 在xml中

```
 android:background="@drawable/round_border" 
```

> Jave 代码

```
ImageView im=(ImageView)findViewById(R.id.imageView2);
    im.setBackgroundResource(R.drawable.round_border); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-23T04:31:50.410

尝试这个

```
int radius=5;
int margin=5;

Picasso.with(context)
    .load(imageurl)
    .transform(new RoundedCornersTransformation(radius,margin))
    .into(imageview); 
```

RoundedCornersTransformation.java

```
public class RoundedCornersTransformation implements Transformation {

    public enum CornerType {
        ALL,
        TOP_LEFT, TOP_RIGHT, BOTTOM_LEFT, BOTTOM_RIGHT,
        TOP, BOTTOM, LEFT, RIGHT,
        OTHER_TOP_LEFT, OTHER_TOP_RIGHT, OTHER_BOTTOM_LEFT, OTHER_BOTTOM_RIGHT,
        DIAGONAL_FROM_TOP_LEFT, DIAGONAL_FROM_TOP_RIGHT
    }

    private int mRadius;
    private int mDiameter;
    private int mMargin;
    private CornerType mCornerType;

    public RoundedCornersTransformation(int radius, int margin) {
        this(radius, margin, CornerType.ALL);
    }

    public RoundedCornersTransformation(int radius, int margin, CornerType cornerType) {
        mRadius = radius;
        mDiameter = radius * 2;
        mMargin = margin;
        mCornerType = cornerType;
    }

    @Override public Bitmap transform(Bitmap source) {

        int width = source.getWidth();
        int height = source.getHeight();

        Bitmap bitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);

        Canvas canvas = new Canvas(bitmap);
        Paint paint = new Paint();
        paint.setAntiAlias(true);
        paint.setShader(new BitmapShader(source, Shader.TileMode.CLAMP, Shader.TileMode.CLAMP));
        drawRoundRect(canvas, paint, width, height);
        source.recycle();

        return bitmap;
    }

    private void drawRoundRect(Canvas canvas, Paint paint, float width, float height) {
        float right = width - mMargin;
        float bottom = height - mMargin;

        switch (mCornerType) {
            case ALL:
                canvas.drawRoundRect(new RectF(mMargin, mMargin, right, bottom), mRadius, mRadius, paint);
                break;
            case TOP_LEFT:
                drawTopLeftRoundRect(canvas, paint, right, bottom);
                break;
            case TOP_RIGHT:
                drawTopRightRoundRect(canvas, paint, right, bottom);
                break;
            case BOTTOM_LEFT:
                drawBottomLeftRoundRect(canvas, paint, right, bottom);
                break;
            case BOTTOM_RIGHT:
                drawBottomRightRoundRect(canvas, paint, right, bottom);
                break;
            case TOP:
                drawTopRoundRect(canvas, paint, right, bottom);
                break;
            case BOTTOM:
                drawBottomRoundRect(canvas, paint, right, bottom);
                break;
            case LEFT:
                drawLeftRoundRect(canvas, paint, right, bottom);
                break;
            case RIGHT:
                drawRightRoundRect(canvas, paint, right, bottom);
                break;
            case OTHER_TOP_LEFT:
                drawOtherTopLeftRoundRect(canvas, paint, right, bottom);
                break;
            case OTHER_TOP_RIGHT:
                drawOtherTopRightRoundRect(canvas, paint, right, bottom);
                break;
            case OTHER_BOTTOM_LEFT:
                drawOtherBottomLeftRoundRect(canvas, paint, right, bottom);
                break;
            case OTHER_BOTTOM_RIGHT:
                drawOtherBottomRightRoundRect(canvas, paint, right, bottom);
                break;
            case DIAGONAL_FROM_TOP_LEFT:
                drawDiagonalFromTopLeftRoundRect(canvas, paint, right, bottom);
                break;
            case DIAGONAL_FROM_TOP_RIGHT:
                drawDiagonalFromTopRightRoundRect(canvas, paint, right, bottom);
                break;
            default:
                canvas.drawRoundRect(new RectF(mMargin, mMargin, right, bottom), mRadius, mRadius, paint);
                break;
        }
    }

    private void drawTopLeftRoundRect(Canvas canvas, Paint paint, float right, float bottom) {
        canvas.drawRoundRect(new RectF(mMargin, mMargin, mMargin + mDiameter, mMargin + mDiameter),
                mRadius, mRadius, paint);
        canvas.drawRect(new RectF(mMargin, mMargin + mRadius, mMargin + mRadius, bottom), paint);
        canvas.drawRect(new RectF(mMargin + mRadius, mMargin, right, bottom), paint);
    }

    private void drawTopRightRoundRect(Canvas canvas, Paint paint, float right, float bottom) {
        canvas.drawRoundRect(new RectF(right - mDiameter, mMargin, right, mMargin + mDiameter), mRadius,
                mRadius, paint);
        canvas.drawRect(new RectF(mMargin, mMargin, right - mRadius, bottom), paint);
        canvas.drawRect(new RectF(right - mRadius, mMargin + mRadius, right, bottom), paint);
    }

    private void drawBottomLeftRoundRect(Canvas canvas, Paint paint, float right, float bottom) {
        canvas.drawRoundRect(new RectF(mMargin, bottom - mDiameter, mMargin + mDiameter, bottom),
                mRadius, mRadius, paint);
        canvas.drawRect(new RectF(mMargin, mMargin, mMargin + mDiameter, bottom - mRadius), paint);
        canvas.drawRect(new RectF(mMargin + mRadius, mMargin, right, bottom), paint);
    }

    private void drawBottomRightRoundRect(Canvas canvas, Paint paint, float right, float bottom) {
        canvas.drawRoundRect(new RectF(right - mDiameter, bottom - mDiameter, right, bottom), mRadius,
                mRadius, paint);
        canvas.drawRect(new RectF(mMargin, mMargin, right - mRadius, bottom), paint);
        canvas.drawRect(new RectF(right - mRadius, mMargin, right, bottom - mRadius), paint);
    }

    private void drawTopRoundRect(Canvas canvas, Paint paint, float right, float bottom) {
        canvas.drawRoundRect(new RectF(mMargin, mMargin, right, mMargin + mDiameter), mRadius, mRadius,
                paint);
        canvas.drawRect(new RectF(mMargin, mMargin + mRadius, right, bottom), paint);
    }

    private void drawBottomRoundRect(Canvas canvas, Paint paint, float right, float bottom) {
        canvas.drawRoundRect(new RectF(mMargin, bottom - mDiameter, right, bottom), mRadius, mRadius,
                paint);
        canvas.drawRect(new RectF(mMargin, mMargin, right, bottom - mRadius), paint);
    }

    private void drawLeftRoundRect(Canvas canvas, Paint paint, float right, float bottom) {
        canvas.drawRoundRect(new RectF(mMargin, mMargin, mMargin + mDiameter, bottom), mRadius, mRadius,
                paint);
        canvas.drawRect(new RectF(mMargin + mRadius, mMargin, right, bottom), paint);
    }

    private void drawRightRoundRect(Canvas canvas, Paint paint, float right, float bottom) {
        canvas.drawRoundRect(new RectF(right - mDiameter, mMargin, right, bottom), mRadius, mRadius,
                paint);
        canvas.drawRect(new RectF(mMargin, mMargin, right - mRadius, bottom), paint);
    }

    private void drawOtherTopLeftRoundRect(Canvas canvas, Paint paint, float right, float bottom) {
        canvas.drawRoundRect(new RectF(mMargin, bottom - mDiameter, right, bottom), mRadius, mRadius,
                paint);
        canvas.drawRoundRect(new RectF(right - mDiameter, mMargin, right, bottom), mRadius, mRadius,
                paint);
        canvas.drawRect(new RectF(mMargin, mMargin, right - mRadius, bottom - mRadius), paint);
    }

    private void drawOtherTopRightRoundRect(Canvas canvas, Paint paint, float right, float bottom) {
        canvas.drawRoundRect(new RectF(mMargin, mMargin, mMargin + mDiameter, bottom), mRadius, mRadius,
                paint);
        canvas.drawRoundRect(new RectF(mMargin, bottom - mDiameter, right, bottom), mRadius, mRadius,
                paint);
        canvas.drawRect(new RectF(mMargin + mRadius, mMargin, right, bottom - mRadius), paint);
    }

    private void drawOtherBottomLeftRoundRect(Canvas canvas, Paint paint, float right, float bottom) {
        canvas.drawRoundRect(new RectF(mMargin, mMargin, right, mMargin + mDiameter), mRadius, mRadius,
                paint);
        canvas.drawRoundRect(new RectF(right - mDiameter, mMargin, right, bottom), mRadius, mRadius,
                paint);
        canvas.drawRect(new RectF(mMargin, mMargin + mRadius, right - mRadius, bottom), paint);
    }

    private void drawOtherBottomRightRoundRect(Canvas canvas, Paint paint, float right,
                                               float bottom) {
        canvas.drawRoundRect(new RectF(mMargin, mMargin, right, mMargin + mDiameter), mRadius, mRadius,
                paint);
        canvas.drawRoundRect(new RectF(mMargin, mMargin, mMargin + mDiameter, bottom), mRadius, mRadius,
                paint);
        canvas.drawRect(new RectF(mMargin + mRadius, mMargin + mRadius, right, bottom), paint);
    }

    private void drawDiagonalFromTopLeftRoundRect(Canvas canvas, Paint paint, float right,
                                                  float bottom) {
        canvas.drawRoundRect(new RectF(mMargin, mMargin, mMargin + mDiameter, mMargin + mDiameter),
                mRadius, mRadius, paint);
        canvas.drawRoundRect(new RectF(right - mDiameter, bottom - mDiameter, right, bottom), mRadius,
                mRadius, paint);
        canvas.drawRect(new RectF(mMargin, mMargin + mRadius, right - mDiameter, bottom), paint);
        canvas.drawRect(new RectF(mMargin + mDiameter, mMargin, right, bottom - mRadius), paint);
    }

    private void drawDiagonalFromTopRightRoundRect(Canvas canvas, Paint paint, float right,
                                                   float bottom) {
        canvas.drawRoundRect(new RectF(right - mDiameter, mMargin, right, mMargin + mDiameter), mRadius,
                mRadius, paint);
        canvas.drawRoundRect(new RectF(mMargin, bottom - mDiameter, mMargin + mDiameter, bottom),
                mRadius, mRadius, paint);
        canvas.drawRect(new RectF(mMargin, mMargin, right - mRadius, bottom - mRadius), paint);
        canvas.drawRect(new RectF(mMargin + mRadius, mMargin + mRadius, right, bottom), paint);
    }

    @Override public String key() {
        return "RoundedTransformation(radius=" + mRadius + ", margin=" + mMargin + ", diameter="
                + mDiameter + ", cornerType=" + mCornerType.name() + ")";
    }
} 
```

# c# - 37Signals OAuth C# 示例

> ID：10151312
> 
> 赞同：0
> 
> 时间：2012-04-14T05:37:25.577
> 
> 标签：c#, oauth-2.0, 37-signals

我需要一个完整的 C# 示例，说明如何使用 37Signals OAuth，如下所述：[http ://groups.google.com/group/37signals-api/browse_thread/thread/86b0da52134c1b7e](http://groups.google.com/group/37signals-api/browse_thread/thread/86b0da52134c1b7e)

我可以获得第 3 点中提到的限时验证码，但从那里我无法成功发布以兑换代码并取回令牌。

这是我到目前为止所做的，目前代码返回 401 Unauthorized 错误：

```
HttpWebRequest webRequest = null;
WebResponse webResponse = null;
byte[] byteArray = Encoding.UTF8.GetBytes(code);

webRequest = (HttpWebRequest)WebRequest.Create("https://launchpad.37signals.com/authorization/token?client_id=" + clientId + "&redirect_uri=" + redirectUri + "&client_secret=" + clientSecret + "&type=web_server");
webRequest.Method = "POST";
webRequest.ContentLength = byteArray.Length;
webRequest.ContentType = "application/xml','Authorization: OAuth'";

string EncryptedDetails = Convert.ToBase64String(Encoding.ASCII.GetBytes(code));
webRequest.Headers.Add("Authorization", "Token" + code);

Stream dataStream = webRequest.GetRequestStream();
dataStream.Write(byteArray, 0, byteArray.Length);
dataStream.Close();

webResponse = webRequest.GetResponse(); 
```

欢迎任何想法和建议，请:)谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T22:57:50.377

我建议您使用一个为您完成协议级工作的库。我知道的最好的是[http://www.dotnetopenauth.net/](http://www.dotnetopenauth.net/)

`Samples`文件夹中有使用示例。

# c# - 将 %system% 目录展开为完整路径

> ID：10151313
> 
> 赞同：1
> 
> 时间：2012-04-14T05:37:31.853
> 
> 标签：c#, path

在我的程序中，我通过以下代码获取 IIS 中默认网站的路径：

```
ServerManager manager = new ServerManager();
string path = manager.Sites["Default Web Site"].Applications["/"].VirtualDirectories["/"].PhysicalPath; 
```

`path = %ystemdrive%\inetpub\wwwroot`

Path.GetFullPath 看起来不适合这个。我如何从上面得到完整的路径，实际上是`C:\inetpub\wwwroot`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T05:43:38.240

只需使用`System.Environment.ExpandEnvironmentVariables()`

另请参阅[MSDN](http://msdn.microsoft.com/de-de/library/system.environment.expandenvironmentvariables.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T05:43:38.573

你可以使用这个：

```
Environment.ExpandEnvironmentVariables(path); 
```

# graphviz - 如何在 graphviz 中为图形节点提供固定位置以及如何使边缘不重叠？

> ID：10151318
> 
> 赞同：2
> 
> 时间：2012-04-14T05:39:22.117
> 
> 标签：graphviz

我在这里看到了一些类似的问题，但答案并没有解决我的问题。

我想画一个图表。我写了一些这样的代码：

```
digraph {
  {rank = same a b c d e f }
  a -> b -> c -> d -> e -> f
  a -> f
  b -> d -> f
  b -> f
} 
```

但结果是一些边缘相互重叠。

所以我的问题是如何修复边缘以使其不重叠，我也想知道如何给节点一个固定位置？这张图没有问题。但有时当我想要一个带有一系列序列的图表时

```
a b c d e f 
```

但是当我创建一些边缘并且序列会改变如下：

```
a->e b c d f 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T09:51:50.147

您可以使用`pos`节点或边的属性来指定坐标。要查看`dot`节点和边的位置，您可以简单地运行`dot myinputfile.dot`而无需任何输出参数。这将生成带有添加坐标（以及其他添加）的点文件。
基于此，您可以强制`dot`将部分或所有节点放置在特定坐标处。

# mysql - 使用mysql将值插入另一个表时如何更新一个表的值？

> ID：10151320
> 
> 赞同：2
> 
> 时间：2012-04-14T05:40:12.027
> 
> 标签：mysql, phpmyadmin

嗨，我有两张桌子，即

```
sms(Message,sms_index...columns) 
c_paid_bribe(c_addi_info,....) 
```

我想要做的是将 sms 表的 Message 列的值插入到 c_paid_bribe 表的 c_addi_info 列中，只要将新值插入到 sms 表中。我试过这个

```
$query=mysql_query("insert into bd_paid_bribe(c_addi_info) select Message from sms"); 
```

但是当插入一个新值并且我运行 .php 文件时，已经存在的值也再次插入到表中.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T05:47:24.403

```
Q: what i want to do is to insert the values of Message column of sms table into c_addi_info column of c_paid_bribe table automatically whenever a new value is inserted into sms table. 
```

答：如果您想在另一个表发生更改时更新一个表（并且，无论出于何种原因，您不能简单地在应用程序中执行此操作），然后使用“触发器”：

[http://net.tutsplus.com/tutorials/databases/introduction-to-mysql-triggers/](http://net.tutsplus.com/tutorials/databases/introduction-to-mysql-triggers/)

```
Q: But when a new value is inserted and i run the .php file the already existed values are also inserting into the table again..... 
```

A：你想要一个“upsert”。例如：

[如果存在，我如何在 MySQL 中更新，如果不插入（又名“upsert”或“merge”）？](https://stackoverflow.com/questions/1218905/how-do-i-update-if-exists-insert-if-not-aka-upsert-or-merge-in-mysql)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T05:54:18.977

您要做的只是在一个事务中进行两个查询。这就是交易的用途。有关如何执行此操作的示例，请参见此处： [PHP + MySQL 事务示例](https://stackoverflow.com/questions/2708237/php-mysql-transactions-examples)

# c# - 如何在 ASP.NET C# 中的用户控件之间传递值

> ID：10151323
> 
> 赞同：0
> 
> 时间：2012-04-14T05:40:29.293
> 
> 标签：c#, asp.net, sql-server-2008, entity-framework

我的页面中有 3 个用户控件。此用户控件之一是关于 fileUploading ，第二个是关于 fileUploade Keyword 。当文件上传时，fileUploading 用户控件返回记录的插入的 Id。现在我想在 fileUploaded 关键字中使用这个 id，但是什么时候插入标签以查看 fileuploading 用户控件中的 id 显示正确的 id 例如 1 或 2 或 .. 但在关键字 usercontrol 中只显示 0 值。我使用实体框架。我如何在关键字用户控件中访问此 ID。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T05:42:03.533

会话变量可能是最好的方法：

[http://msdn.microsoft.com/en-us/library/ms178581.aspx](http://msdn.microsoft.com/en-us/library/ms178581.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T00:02:13.117

您可以使用委托将 id 传递回父页面。当 id 被传递回父页面时，您在父页面上运行一个函数，该函数调用关键字 usercontrol 上的公共函数。

因此，在您的 Uploading 用户控件上，首先创建父页面将侦听的委托：

```
public delegate void PassIDToParent(string ID);
public event PassIDToParent PassID; 
```

接下来，在您返回 id 后触发委托：

```
protected void Upload() //--- this is your current upload function
{
    //--- other upload code
    string ReturnedID = "1"; //--- whatever is returned
    PassID(ReturnedID);
} 
```

现在您需要在父页面上设置监听器。一旦监听器执行，它将执行“PassID”函数。在此函数中，您将调用关键字 usercontrol 的公共函数“LoadID”。所以在父页面上，这样做：

```
protected void Page_Load(object sender, EventArgs e)
{
    //--- setup the listener to receive the uploaded id
    UploadUserControlID.PassID += new UploadUserControlID_ClassName.PassIDToParent(PassID);
}
protected void PassID(string id)
{
    //--- this method is called from the listener above and it passes the id
    KeywordUserControlID.LoadID(id);
} 
```

您的关键字 usercontrol 的代码如下所示：

```
public void LoadID(string id)
{
    //--- do whatever you need to with the id
} 
```

以下是有关使用代表的更多信息：[http ://webdeveloperpost.com/Articles/Return-value-from-user-control-in-ASP-NET-and-C-Sharp.aspx](http://webdeveloperpost.com/Articles/Return-value-from-user-control-in-ASP-NET-and-C-Sharp.aspx)

希望有帮助！祝你好运！不要忘记标记为答案！

# android - 使用 .getSerializableExtra 将对象从一个类转移到另一个类。

> ID：10151328
> 
> 赞同：2
> 
> 时间：2012-04-14T05:41:21.060
> 
> 标签：android, sqlite, android-intent

我想将对象从一个活动转移到另一个活动。

在我的第一堂课中，我放了以下内容

> 意图意图；
> 
> Intent intentttt.putExtra("user_searchh", cur.toString());

这里 cur 是 Cursor 的对象。我想把它转移到二等舱。

在我的第二堂课中，我放了以下

> 光标 c = (Cursor) getIntent().getSerializableExtra("user_searchh");

我试图在没有上述代码的情况下运行这两个类，它工作正常。

但是，当我放置上面的代码时，它会提示强制关闭错误。

在 DDMS 中存在类似 ... NulpointerException ... DirectCursorDriver .... 等错误。

我从 [如何在 Android 上将对象从一个活动传递到另一个活动中获取参考](https://stackoverflow.com/questions/2736389/how-to-pass-object-from-one-activity-to-another-in-android)

有50票。

如果可能的话帮助我。

谢谢 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:57:43.200

我知道了 ....

首先，当您将对象转换为字符串时..您永远不能将其转换回对象..

其次，与其将对象从一个活动转移到另一个活动，不如将字符串从一个活动转移到第二个活动..然后在第二个活动中计算内容......

在将字符串从一个活动转移到另一个活动时，我犯了两个错误......

1）我犯的第一个错误是......

我使用两个意图对象..例如

> Intent i = new Intent(user_search2.this,rest_name_share.class);

```
 Intent i1= new Intent();
    i1.putExtra("restaurant_email", email_of_restaurant);

     startActivity(i); 
             startActivity(i1); 
```

而你应该像下面这样写

> Intent i = new Intent(user_search2.this,rest_name_share.class);

```
 i.putExtra("restaurant_email", email_of_restaurant);  // here email_of_restaurant is a String object ..
    // you can aslo put more  than one strings...
     startActivity(i); 
```

2）第二个错误是我在类级别调用 getStringExtra() 。

它应该在 onCreate() 方法中调用

在 onCreate() 中调用的东西是

> 意图意图 = getIntent();
> 
> 字符串 email_of_restaurant = intent.getStringExtra("restaurant_detail");

谢谢大家 ，，....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-05T04:59:39.597

这不是 Serializable 的工作方式，您是对的，从根本上讲，对象被转换为字符串，但它比仅调用 obj.toString(); 复杂得多。

您可以通过 Intent 传递的唯一对象是实现[Serializable 接口](http://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html)的对象。

因此，如果 Cursor 中有您需要传递的信息，请将其取出并将其包装在某种 Serializable 对象中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-05T06:06:21.233

我的天啊。这是一个相当小的灾区问题，是吧？

OP 的问题很简单：他将 String 放入 Intent，然后尝试检索 Serializable。当然，String 是可序列化的，但转换为 Cursor 是行不通的。

如果要尝试提供帮助，而不是仅仅正确，可以指出，一般来说，这是行不通的。尝试打包或序列化游标（表示与数据库的连接的对象）几乎是不可能的。考虑一下，将整个游标的数​​据编组为意图意味着什么。但是，我确实说“除了”，因为实际上，使用某种 Binder 魔法，Android**确实**支持跨进程游标（我会包含链接，但 SO 禁止它）。但是，不：您不能将光标放入 Intent。完全没有。曾经。

最后，虽然，大约 3 个答案之前，应该有人停止了疯狂并问：“WTF，伙计？你想做什么？？” 以下是完成 OP 尝试做的任何事情的一些方法：

*   将您需要的数据拉入模型对象树并传递对它的引用
*   重新运行查询（这是上面建议的，但没有支持的理由）
*   将光标放入全局并从两个活动中引用它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-14T05:54:56.090

```
//For passing :
intent.putExtra("MyKey", YourObj);  // From First Activity

// to retrieve object in second Activity
Object obj = getIntent().getSerializableExtra("MyKey"); //In Second Activity 
```

现在您可以转换对象。希望这对您有所帮助。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-14T05:49:43.287

您已将字符串对象放入此代码中

所以试试下面的代码就可以了。

```
 Intent intentttt.putExtra("user_searchh", cur.toString()); 

 String str=getIntent().getStringExtra("user_searchh"); 
```

对于 Pass Cursor 你需要做这样的事情来制作一个像下面这样的类。

```
public class MyCursor implements Serializable{

/**
 * 
 */
private static final long serialVersionUID = 1L;
Cursor mCursor;

public void setCursor(Cursor paramCursor){
    mCursor=paramCursor;
}

public Cursor getCursor(){
    return this.mCursor;
  }
} 
```

现在在将 Object 放入 PutExtra 之前，使用以下代码对其进行初始化

```
 MyCursor mObject=new MyCursor();
    //You can set your Cursor in Below code
   mObject.setCursor(mCursor);
   mIntent.putExtra("mCursor",mObject ); 
```

现在在其他活动中，您可以通过以下代码获取光标。

```
 MyCursor mGetCursor;
  mGetCursor=(MyCursor) getIntent().getSerializableExtra("mCursor");
    if(mGetCursor!=null){
        mGetCursor.getCursor();
    } 
```

# c# - C# RX (System.Reactive) - 异步 - 发布 IEnumerable 给多个观察数据处理者

> ID：10151332
> 
> 赞同：1
> 
> 时间：2012-04-14T05:42:07.170
> 
> 标签：c#, asynchronous, system.reactive

我是 RX 新手。

我想遍历一个 IEnumerable 并发布到在各自线程中处理数据的多个 DataHandlers。

下面是我的示例程序。发布工作并创建了一个新线程，但 3 个 RowHandlers 都在 1 个线程中运行。我需要3个线程。实现这一点的最佳方法是什么？

```
class Program
{

    public class MyDataGenerator
    {
        public IEnumerable<int> myData()
        {
            //Heavy lifting....Don't want to process more than once.
            yield return 1;
            yield return 2;
            yield return 3;
            yield return 4;
            yield return 5;
            yield return 6;
        }
    }

    static void Main(string[] args)
    {
        MyDataGenerator h = new MyDataGenerator();
        Console.WriteLine("Thread id " + Thread.CurrentThread.ManagedThreadId.ToString());
        //
        var shared = h.myData().ToObservable().Publish();
        ///////////////////////////////
        //  Row Handling Requirements
        //
        //      1\. Single Scan of IEnumerable. 
        //      2\. Row handlers process data in their own threads. 
        //      3\. OK if scanning thread blocks while data is processed
        //

        //Create the RowHandlers
        MyRowHandler rn1 = new MyRowHandler();
        rn1.ido = shared.Subscribe(i => rn1.processID(i));
        MyRowHandler rn2 = new MyRowHandler();
        rn2.ido = shared.Subscribe(i => rn2.processID(i));
        MyRowHandler rn3 = new MyRowHandler();
        rn3.ido = shared.Subscribe(i => rn3.processID(i));
        //
        shared.Connect();
    }

    public class MyRowHandler
    {
        public IDisposable ido = null;
        public void processID(int i)
        {
            var o = Observable.Start(() =>
                                        {
                                            Console.WriteLine(String.Format("Start Thread ID {0} Int{1}", Thread.CurrentThread.ManagedThreadId, i));
                                            Thread.Sleep(30);
                                            Console.WriteLine("Done Thread ID"+Thread.CurrentThread.ManagedThreadId.ToString());
                                        }
                                    );
            o.First(); 
        }
    }
} 
```

* * *

发现：

从 Rx 获得的编码速度和代码质量的提高是以牺牲性能为代价的。毫无疑问，任务/代表的速度要快几倍。这意味着需要了解 Rx 的最重要的事情是何时使用 Rx。以下是一份概要指南草案。对于大容量，我可以看到 Rx 在分块、组合和其他许多流多处理程序模型中的用途；但是，基本 Async 不应该使用 rx。

我会发布带有矩阵指南的图像，但该网站不允许我发布图像

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T06:35:44.613

如果我正确理解了您的排序要求并且您想要三个并行运行的扫描，您可以在 TaskPool 上观察并从那里订阅；

```
...

//Create the RowHandlers
MyRowHandler rn1 = new MyRowHandler();
rn1.ido = shared.ObserveOn(Scheduler.TaskPool).Subscribe(i => rn1.processID(i));

... 
```

请注意，由于您随后异步运行并且您的主线程不会等待扫描完成，因此您的程序将立即终止，除非您将 a`Console.ReadKey()`放在程序末尾。

编辑：关于“一路”运行同一个线程，你为此安排了一些奇怪的事情。如果将 observable 放到 rowhandler 中，则可以使用 Scheduler.NewThread 并获得不错的结果；

```
...

var rowHandler1 = new MyRowHandler();
rowHandler1.ido = shared.ObserveOn(Scheduler.NewThread).Subscribe(rowHandler1.ProcessID);

...

public void ProcessID(int i)
{
    Console.WriteLine(String.Format("Start Thread ID {0} Int{1}", Thread.CurrentThread.ManagedThreadId, i));
    Thread.Sleep(30);
    Console.WriteLine("Done Thread ID" + Thread.CurrentThread.ManagedThreadId.ToString(CultureInfo.InvariantCulture));
} 
```

这将为每个订阅提供自己的线程，并坚持下去。

# java - 查找一组字符串共有的任意模式

> ID：10151336
> 
> 赞同：0
> 
> 时间：2012-04-14T05:43:11.260
> 
> 标签：java, pattern-matching, string-matching, longest-substring

## 背景：

我正在开发一个程序，它遍历存储在我的计算机上的所有电影和电视剧集，对它们进行评分（使用烂番茄）并按评分顺序对它们进行排序。

我通过从文件名中删除所有不必要的文本（例如“.avi”、“720p”等）来提取电影名称。

我正在使用 Java。

## 问题：

某些文件夹包含电影文件，例如：

第301话热带雨林Schmainforest.avi

第302话自燃.avi

“剧集”这个词和数字是有效的，并且是电影中的常用词，所以我不能简单地删除它们。但是，从名称的重复性中可以清楚地看出“Episode”和“3XX”应该被删除。

另一个文件夹可能是：

720p.S5.E1.cripple Fight.avi

720p.S5.E2.towelie.avi

**许多像这样的** *任意*模式存在于不同的文件组中，我需要一些东西来识别这些任意模式，以便我可以提取关键字。为每种情况编写正则表达式是不可行的。

## 概括：

是否有工具或 API 可用于查找复杂的重复模式（必须能够匹配数字序列）？[类似于最长的公共序列库]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T07:25:28.653

好吧，您可以简单地在您的目录中获取所有过滤后的名称，然后进行简单的字数统计。您可以对每次（大致）出现在同一地点的单词给予额外的重视。

最后你会得到一个计数和一个重量，你需要决定画什么线。可能不是目录中的每个文件（因为可能是图像或样本），但如果大多数都有某个词，它不是“the”或类似的东西，而且可能它们都出现在“开始”或“第二个”点”，您可以过滤它们。

但这不适用于随机示例 Friends 剧集。他们都被称为“那个......”。**这将在您广受欢迎的算法的每个健全版本中进行过滤**

底线是：由于朋友剧集问题，我认为你不能。想要的重复和不需要的重复之间没有足够的区别。

您唯一能做的就是将您想要过滤的内容列入黑名单，就像您似乎已经对 avi / 720 所做的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T07:25:01.053

我相信你所要求的并不是微不足道的。与单纯的识别相反，模式提取完全属于[人工智能](http://en.wikipedia.org/wiki/Artificial_intelligence)和[知识发现](http://en.wikipedia.org/wiki/Knowledge_discovery)领域。我遇到了几个与 Java 相关的库，但大多数都需要大量额外的代码来定义即使是最简单的任务。

由于这是一个相当*热门*的研究领域，您可能希望在[Google Scholar](http://scholar.google.com)中使用适当的关键字进行粗略搜索。

免责声明：在您使用通过 Internet 找到的任何库或算法之前，您应该调查其法律状态。不幸的是，在活跃的研究领域中开发的许多算法经常受到专利的阻碍，等等……

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-15T09:38:36.533

我在这里发布了一个答案
[http://pastebin.com/Eb0cQyKd](http://pastebin.com/Eb0cQyKd)

我想删除文件名的非唯一部分，例如“720dpi”、“Episode”、“xvid”、“ac3”，而不事先指定它们是什么。但我想保留像 S01E01 这样的信息。我创建了一个巨大的黑名单，但它并不方便，因为黑名单一直在变化。

上面链接的代码使用 Python（不是 Java）来删除文件名中的所有非唯一单词。基本上，它会创建文件名中使用的所有单词的列表，以及它放入字典中的大多数文件中出现的任何单词。然后它遍历文件并从中删除所有这些字典单词。

该脚本还进行了一些清理：一些电影使用下划线 ('_') 或句点 ('.') 来分隔文件名中的单词。我将所有这些转换为空格。

我最近使用了很多，而且效果很好。

# jquery - 在一个 HTML 文档中使用多个 jQuery 版本？

> ID：10151337
> 
> 赞同：1
> 
> 时间：2012-04-14T05:43:34.973
> 
> 标签：jquery

我知道这必须用 来完成`jQuery.noConflict()`，但我无法让它工作。这是我的代码：

[http://pastebin.com/aL5HDkTP](http://pastebin.com/aL5HDkTP)

基本上照片功能需要使用1.3.2版本，同时导航功能需要使用1.6.2版本。

如您所见，我曾尝试使用 执行此操作`jQuery.noConflict()`，但无济于事。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T05:52:14.220

为什么 nivo lib 需要 1.3.2？nivo 网站本身使用 1.7.2 就好了。您的 nivo lib 是否已过时？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T06:10:16.210

您可以使用 noConflict 使用多个版本，在 jquery 中引用特定方法时使用不同的命名空间就是这样。

我不知道你是如何调用这些方法的，但这里是流程。

```
1.Load jQuery version A
2.call var jQuery_A = $.noConflict(true);
3.Load jQuery version B
4.call var jQuery_B = $.noConflict(true); 
```

现在，您使用上面创建的两个命名空间引用这两个版本，如下所示。

```
jQuery_A("#buttonA")
    .click(function() {
           .......
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T05:56:08.353

[乍一看，我没有看到与这篇文章](https://stackoverflow.com/questions/528241/how-do-i-run-different-versions-of-jquery-on-the-same-page)有任何冲突，但我在第 44 行附近得到了一个对 jcps 变量的未知引用。假设它没有在你加载的脚本中声明，那可能会搞砸。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T06:18:33.680

我遇到了几次同样的问题，我克服它的方法是用整个 jquery 代码中的 jQuery 实例替换 jQuery 的 $ 。例如：

```
$(function() {

}) 
```

会变成

```
 jQuery(function() {

    }) 
```

# java - 如何从文件数组创建文件目录和包含的文件

> ID：10151341
> 
> 赞同：0
> 
> 时间：2012-04-14T05:44:26.960
> 
> 标签：java, file

该`File.listRoots()`方法返回代表系统所有根文件夹的文件数组。我想创建一个逻辑文件并将所有这些根添加到它，所以我可以调用一个将`File`其作为参数的方法。

例如，给定这个伪方法：

```
void xyz(final File f) {
    // ....
} 

final File roots = somekindofwrapper(File.listRoots());
xyz(roots); 
```

要求是`roots`在上面显示的伪代码中是一个包含系统上所有根的逻辑文件。这可能吗？

```
 import javax.swing.*;
    import java.io.File;
    public class FileTreeDemo {

    public static void main(String[] args) {

  try{  UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        }catch(Exception e){
            System.out.println("cant done"); 
        }
  // Create a JTree and tell it to display our model
  JTree tree = new JTree();

  // The JTree can get big, so allow it to scroll
  JScrollPane scrollpane = new JScrollPane(tree);
      // Figure out where in the filesystem to start displaying

  File[] roots = File.listRoots();  
  FileTreeModel model = new FileTreeModel(null);

     // for(File root: roots)
     // {
   model=new FileTreeModel(roots[0]);
       tree.setModel(model);
     // }

     JFrame frame = new JFrame("FileTreeDemo");
     frame.getContentPane().add(scrollpane, "Center");
     frame.setSize(400,600);
     frame.setVisible(true);

    }

    }

    import java.io.File;

    import javax.swing.event.TreeModelListener;
    import javax.swing.tree.DefaultTreeSelectionModel;
    import javax.swing.tree.TreeModel;
    import javax.swing.tree.TreePath;
    import javax.swing.tree.TreeSelectionModel;

    public class FileTreeModel  extends DefaultTreeSelectionModel implements TreeModel{
    // We specify the root directory when we create the model.

    protected File root;
    public FileTreeModel(File root) { this.root = root; 
    //setSelectionMode(TreeSelectionModel.DISCONTIGUOUS_TREE_SELECTION); 
    }

    // The model knows how to return the root object of the tree
    public Object getRoot() { return root; }

    // Tell JTree whether an object in the tree is a leaf
    public boolean isLeaf(Object node) {  return ((File)node).isFile(); }

    // Tell JTree how many children a node has
    public int getChildCount(Object parent) {
    String[] children = ((File)parent).list();
    if (children == null) return 0;
    return children.length;
    }

   // Fetch any numbered child of a node for the JTree.
   // Our model returns File objects for all nodes in the tree.  The
   // JTree displays these by calling the File.toString() method.
   public Object getChild(Object parent, int index) {
   String[] children = ((File)parent).list();
   if ((children == null) || (index >= children.length)) return null;
   return new File((File) parent, children[index]);
   }

   // Figure out a child's position in its parent node.
   public int getIndexOfChild(Object parent, Object child) {
   String[] children = ((File)parent).list();
   if (children == null) return -1;
   String childname = ((File)child).getName();
   for(int i = 0; i < children.length; i++) {
   if (childname.equals(children[i])) return i;
   }
   return -1;
   }

   // This method is invoked by the JTree only for editable trees.  
   // This TreeModel does not allow editing, so we do not implement 
   // this method.  The JTree editable property is false by default.
   public void valueForPathChanged(TreePath path, Object newvalue) {}

   // Since this is not an editable tree model, we never fire any events,
   // so we don't actually have to keep track of interested listeners*/
   public void addTreeModelListener(TreeModelListener l) {}
   public void removeTreeModelListener(TreeModelListener l) {}

   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T06:10:03.587

File 对象是系统上物理文件的表示，您不能随意创建“虚拟文件”，其中包含其他文件的分组，与底层操作系统的现实脱节。您可能最接近您想要做的事情可能需要在系统上创建一个带有指向所有根的符号链接的文件夹 - 您可以在 Java 7 中执行此操作。我的直觉告诉我您正在尝试与现有代码集成，在我会问哪一点 - 一个接一个地用每个根文件调用你的函数有什么负面影响？

# vb.net - 如何使用 Visual Studio 2010 创建的 Excel 加载项单击在 excel 中创建的自定义上下文菜单时执行操作

> ID：10151345
> 
> 赞同：3
> 
> 时间：2012-04-14T05:45:29.580
> 
> 标签：vb.net, visual-studio-2010, excel, excel-addins, vba

我正在使用 Visual Studio 2010 创建一个 Excel 加载项。我的目的是向一个单元格添加一个上下文菜单并对选定的一个或多个单元格执行一些操作。这是我现在得到的代码

```
 Public Class CC

    Private Sub ThisAddIn_Startup() Handles Me.Startup
        AddMenu()
    End Sub

    Private Sub ThisAddIn_Shutdown() Handles Me.Shutdown
        DeleteMenu()
    End Sub

    'AddMenu add context menu to excel
    Sub AddMenu()
        On Error Resume Next
        Dim Bar As Microsoft.Office.Core.CommandBar
        Dim NewControl As Microsoft.Office.Core.CommandBarControl
        Application.CommandBars("Cell").Controls("A").Delete()
        Bar = Application.CommandBars("Cell")
        NewControl = Bar.Controls.Add(Microsoft.Office.Core.MsoControlType.msoControlPopup, Id:=1, Temporary:=True)

        With NewControl
            .Caption = "A"
            .BeginGroup = True
            .TooltipText = "Change case of selected cells."
        End With

        With NewControl.Controls.Add(Microsoft.Office.Core.MsoControlType.msoControlButton)
            .Caption = "A1"
            .FaceId = 1144
            .OnAction = "A1"
        End With

        With NewControl.Controls.Add(Microsoft.Office.Core.MsoControlType.msoControlButton)
            .Caption = "A2"
            .FaceId = 1145
            .OnAction = "A2"
        End With

        With NewControl.Controls.Add(Microsoft.Office.Core.MsoControlType.msoControlButton)
            .Caption = "A3"
            .FaceId = 1155
            .OnAction = "A3"
        End With

    End Sub

    'DeleteMenu deletes the context meny added to excel
    Sub DeleteMenu()
        On Error Resume Next
        Application.CommandBars("Cell").Controls("A").Delete()
    End Sub

    Sub A1()
        MsgBox "A1"
    End Sub

    Sub A2()
        MsgBox "A2"
    End Sub

    Sub A3()
        MsgBox "A3"
    End Sub

End Class 
```

当我安装此加载项时，上下文菜单出现在 excel 中，但是当我单击菜单按钮时，我收到一条错误消息，指出该宏在工作簿中不可用。谁能告诉我如何使它工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T12:20:59.267

您的方法 A1、A2 和 A3 不会自动在 Excel 中注册为宏。因此，将它们的名称设置到按钮的 OnAction 字符串中没有任何效果 - Excel 不知道名为“A1”的宏。所以从这个意义上说，VSTO 加载项的行为与 VBA 中的代码完全不同。

不过还有另一种方法：对于 CommandBar 按钮，您可以添加事件处理程序 - 您可以使用 WithEvents 关键字，然后处理按钮的 Click 事件。一些可能让您入门的示例如下：http: [//msdn.microsoft.com/en-us/library/aa189726 (v=office.10).aspx](http://msdn.microsoft.com/en-us/library/aa189726(v=office.10).aspx)

使用[Excel-DNA](http://exceldna.codeplex.com)（我开发的一个开源 .NET/Excel 集成库），您的 .NET 代码中的方法和用户定义函数通过 C API 注册到 Excel。因此，该行为更接近 VBA 的行为，并且您的带有 OnAction="..." 字符串的代码也可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T14:08:49.563

```
Public Class CC

Private WithEvents A1 As Office.CommandBarButton
Private WithEvents A2 As Office.CommandBarButton
Private WithEvents A3 As Office.CommandBarButton

Private Sub ThisAddIn_Startup() Handles Me.Startup
    AddMenu()
End Sub

Private Sub ThisAddIn_Shutdown() Handles Me.Shutdown
    DeleteMenu()
End Sub

'AddMenu add context menu to excel
Sub AddMenu()
    On Error Resume Next
    Dim Bar As Microsoft.Office.Core.CommandBar
    Dim NewControl As Microsoft.Office.Core.CommandBarControl
    Application.CommandBars("Cell").Controls("A").Delete()
    Bar = Application.CommandBars("Cell")
    NewControl = Bar.Controls.Add(Microsoft.Office.Core.MsoControlType.msoControlPopup, Id:=1, Temporary:=True)

    With NewControl
        .Caption = "A"
        .BeginGroup = True
        .TooltipText = "Change case of selected cells."
    End With

    A1 = NewControl.Controls.Add(Microsoft.Office.Core.MsoControlType.msoControlButton)

    With NewControl.Controls.Add(Microsoft.Office.Core.MsoControlType.msoControlButton)
        .Caption = "A1"
        .FaceId = 1144
    End With

    A2 = NewControl.Controls.Add(Microsoft.Office.Core.MsoControlType.msoControlButton)

    With NewControl.Controls.Add(Microsoft.Office.Core.MsoControlType.msoControlButton)
        .Caption = "A2"
        .FaceId = 1145
    End With

    A3 = NewControl.Controls.Add(Microsoft.Office.Core.MsoControlType.msoControlButton)

    With NewControl.Controls.Add(Microsoft.Office.Core.MsoControlType.msoControlButton)
        .Caption = "A3"
        .FaceId = 1155
    End With

End Sub

'DeleteMenu deletes the context meny added to excel
Sub DeleteMenu()
    On Error Resume Next
    Application.CommandBars("Cell").Controls("A").Delete()
End Sub

Sub A1()
    MsgBox "A1"
End Sub

Sub A2()
    MsgBox "A2"
End Sub

Sub A3()
    MsgBox "A3"
End Sub

Private Sub A1_Click(ByVal Ctrl As Office.CommandBarButton, ByRef CancelDefault As Boolean) Handles A1.Click
    A1()
End Sub

Private Sub A2_Click(ByVal Ctrl As Office.CommandBarButton, ByRef CancelDefault As Boolean) Handles A2.Click
    A2()
End Sub

Private Sub A3_Click(ByVal Ctrl As Office.CommandBarButton, ByRef CancelDefault As Boolean) Handles A3.Click
    A3()
End Sub
End Class 
```

这是我为上述问题找到的解决方案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T23:26:47.197

这是一个问题。在 vb.net 中创建 excel 弹出窗口的任何信息都很少。这是我创建半动态菜单的版本。在这种情况下，菜单项来自字典，但可能来自任何地方。创建了此类并将其加载到工作簿启动事件中。

公共类 Popups Private mCmdBarPopFH As Microsoft.Office.Core.CommandBarPopup Private mCmdBarPopPH As Microsoft.Office.Core.CommandBarPopup Private mCmdBarPopRH As Microsoft.Office.Core.CommandBarPopup Private WithEvents tagFH1 As Microsoft.Office.Core.CommandBarButton Private WithEvents tagFH2 As Microsoft。 Office.Core.CommandBarButton Private WithEvents tagFH3 As Microsoft.Office.Core.CommandBarButton Private WithEvents tagPH1 As Microsoft.Office.Core.CommandBarButton Private WithEvents tagPH2 As Microsoft.Office.Core.CommandBarButton Private WithEvents tagPH3 As Microsoft.Office.Core.CommandBarButton Private WithEvents tagRH1 作为 Microsoft.Office.Core.CommandBarButton 私有 WithEvents tagRH2 作为 Microsoft.Office.Core.CommandBarButton 私有 WithEvents tagRH3 作为 Microsoft.Office.Core。CommandBarButton Private WithEvents tag1st As Microsoft.Office.Core.CommandBarButton Private WithEvents tag2nd As Microsoft.Office.Core.CommandBarButton Private WithEvents tagClr As Microsoft.Office.Core.CommandBarButton Private mFHDefDict As New Dictionary(Of String, HeaderDef) Private mPHDefDict As New Dictionary （字符串，HeaderDef）私有 mRHDefDict 作为新字典（字符串，HeaderDef）

```
Private mPHSheet As Excel.Worksheet  'temp until sheet management
Private mRHSheet As Excel.Worksheet
Private mFHSheet As Excel.Worksheet

'************************************************************************************
'Add popup menu for marking sample file.
'************************************************************************************
Public Sub TagsMenuAdd()
    Dim oHeaderDefs As New HeaderDefs
    Dim oCmdBar As Microsoft.Office.Core.CommandBar

    mFHSheet = CType(Globals.ThisWorkbook.Application.Sheets("File Headers"), Excel.Worksheet)
    mPHSheet = CType(Globals.ThisWorkbook.Application.Sheets("Plate Headers"), Excel.Worksheet)
    mRHSheet = CType(Globals.ThisWorkbook.Application.Sheets("Read Headers"), Excel.Worksheet)
    mFHDefDict = oHeaderDefs.DefDictLoad(mFHSheet)  'temp until sheet management
    mPHDefDict = oHeaderDefs.DefDictLoad(mPHSheet)
    mRHDefDict = oHeaderDefs.DefDictLoad(mRHSheet)

    oCmdBar = Globals.ThisWorkbook.Application.CommandBars.Add(Name:="Fil_CellMarking", Position:=Microsoft.Office.Core.MsoBarPosition.msoBarPopup, Temporary:=True)
    With oCmdBar
        tag1st = CType(.Controls.Add(Type:=Microsoft.Office.Core.MsoControlType.msoControlButton), Microsoft.Office.Core.CommandBarButton)
        tag1st.Caption = "Mark 1st Well of 1st data set"
        tag1st.Tag = "1st"
        tag2nd = CType(.Controls.Add(Type:=Microsoft.Office.Core.MsoControlType.msoControlButton), Microsoft.Office.Core.CommandBarButton)
        tag2nd.Caption = "Mark 1st Well of 2nd data set"
        tag2nd.Tag = "2nd"
        mCmdBarPopFH = CType(.Controls.Add(Type:=Microsoft.Office.Core.MsoControlType.msoControlPopup), Microsoft.Office.Core.CommandBarPopup)
        With mCmdBarPopFH
            .Caption = "Mark File Headers"
            .Enabled = True
        End With
        mCmdBarPopPH = CType(.Controls.Add(Type:=Microsoft.Office.Core.MsoControlType.msoControlPopup), Microsoft.Office.Core.CommandBarPopup)
        With mCmdBarPopPH
            .Caption = "Mark Plate Headers"
            .Enabled = True
        End With
        mCmdBarPopRH = CType(.Controls.Add(Type:=Microsoft.Office.Core.MsoControlType.msoControlPopup), Microsoft.Office.Core.CommandBarPopup)
        With mCmdBarPopRH
            .Caption = "Mark Read Headers"
            .Enabled = True
        End With
        tagClr = CType(.Controls.Add(Type:=Microsoft.Office.Core.MsoControlType.msoControlButton), Microsoft.Office.Core.CommandBarButton)
        tagClr.Caption = "Clear All Markings"
        tagClr.Tag = "clr"
    End With

    TagsMenuItemsFH(mFHDefDict)
    TagsMenuItemsPH(mPHDefDict)
    TagsMenuItemsRH(mRHDefDict)
End Sub
'************************************************************************************
'Add popup menu items for marking sample file.
'************************************************************************************
Public Sub TagsMenuItemsFH(DefDict As Dictionary(Of String, HeaderDef))
    Dim iButtons As Integer
    iButtons = 1
    For Each sKey As String In DefDict.Keys
        Select Case iButtons
            Case 1
                With mCmdBarPopFH
                    tagFH1 = CType(.Controls.Add(Type:=Microsoft.Office.Core.MsoControlType.msoControlButton), Microsoft.Office.Core.CommandBarButton)
                    tagFH1.Caption = DefDict(sKey).HeaderName
                    tagFH1.Tag = "FH1"
                End With
            Case 2
                With mCmdBarPopFH
                    tagFH2 = CType(.Controls.Add(Type:=Microsoft.Office.Core.MsoControlType.msoControlButton), Microsoft.Office.Core.CommandBarButton)
                    tagFH2.Caption = DefDict(sKey).HeaderName
                    tagFH2.Tag = "FH2"
                End With
            Case 3
                With mCmdBarPopFH
                    tagFH3 = CType(.Controls.Add(Type:=Microsoft.Office.Core.MsoControlType.msoControlButton), Microsoft.Office.Core.CommandBarButton)
                    tagFH3.Caption = DefDict(sKey).HeaderName
                    tagFH3.Tag = "FH3"
                End With
        End Select
        iButtons = iButtons + 1
    Next
End Sub
Public Sub TagsMenuItemsPH(DefDict As Dictionary(Of String, HeaderDef))
    Dim iButtons As Integer
    iButtons = 1
    For Each sKey As String In DefDict.Keys
        With mCmdBarPopPH
        Select iButtons
                Case 1
                    tagPH1 = CType(.Controls.Add(Type:=Microsoft.Office.Core.MsoControlType.msoControlButton), Microsoft.Office.Core.CommandBarButton)
                    tagPH1.Caption = DefDict(sKey).HeaderName
                    tagPH1.Tag = "PH1"
                Case 2
                    tagPH2 = CType(.Controls.Add(Type:=Microsoft.Office.Core.MsoControlType.msoControlButton), Microsoft.Office.Core.CommandBarButton)
                    tagPH2.Caption = DefDict(sKey).HeaderName
                    tagPH2.Tag = "PH2"
                Case 3
                    tagPH3 = CType(.Controls.Add(Type:=Microsoft.Office.Core.MsoControlType.msoControlButton), Microsoft.Office.Core.CommandBarButton)
                    tagPH3.Caption = DefDict(sKey).HeaderName
                    tagPH3.Tag = "PH3"
            End Select
        End With
        iButtons = iButtons + 1
    Next
End Sub
Public Sub TagsMenuItemsRH(DefDict As Dictionary(Of String, HeaderDef))
    Dim iButtons As Integer
    iButtons = 1
    For Each sKey As String In DefDict.Keys
        With mCmdBarPopRH
            Select Case iButtons
                Case 1
                    tagRH1 = CType(.Controls.Add(Type:=Microsoft.Office.Core.MsoControlType.msoControlButton), Microsoft.Office.Core.CommandBarButton)
                    tagRH1.Caption = DefDict(sKey).HeaderName
                    tagRH1.Tag = "RH1"
                Case 2
                    tagRH2 = CType(.Controls.Add(Type:=Microsoft.Office.Core.MsoControlType.msoControlButton), Microsoft.Office.Core.CommandBarButton)
                    tagRH2.Caption = DefDict(sKey).HeaderName
                    tagRH2.Tag = "RH2"
                Case 3
                    tagRH3 = CType(.Controls.Add(Type:=Microsoft.Office.Core.MsoControlType.msoControlButton), Microsoft.Office.Core.CommandBarButton)
                    tagRH3.Caption = DefDict(sKey).HeaderName
                    tagRH3.Tag = "RH3"
            End Select
        End With
        iButtons = iButtons + 1
    Next
End Sub
Private Sub Button_Click(ByVal Ctrl As Microsoft.Office.Core.CommandBarButton, ByRef CancelDefault As Boolean) Handles tag1st.Click, tag2nd.Click, tagClr.Click
    Select Case Ctrl.Tag
        Case "1st"
            MsgBox("1st")
        Case "2nd"
            MsgBox("2nd")
        Case "clr"
            MsgBox("clr")
    End Select
End Sub
Private Sub Header_Click(ByVal Ctrl As Microsoft.Office.Core.CommandBarButton, ByRef CancelDefault As Boolean) Handles tagFH1.Click, tagFH2.Click, tagFH3.Click, tagPH1.Click, tagPH2.Click, tagPH3.Click, tagRH1.Click, tagRH2.Click, tagRH3.Click
    Select Case Ctrl.Tag
        Case "FH1"
            MsgBox("FH1")
        Case "FH2"
            MsgBox("FH2")
        Case "FH3"
            MsgBox("FH3")
        Case "PH1"
            MsgBox("PH1")
        Case "PH2"
            MsgBox("PH2")
        Case "PH3"
            MsgBox("PH3")
        Case "RH1"
            MsgBox("RH1")
        Case "RH2"
            MsgBox("RH2")
        Case "RH3"
            MsgBox("RH3")
    End Select
End Sub 
```

结束类

# javascript - 如何使用 javascript 优化渲染大量 DOM 元素？

> ID：10151346
> 
> 赞同：8
> 
> 时间：2012-04-14T05:45:38.997
> 
> 标签：javascript, performance, html-rendering

在一个网页上，我有一个相当大的项目列表（例如，产品卡，每个都包含图像和文本） - 其中大约 1000 个。我想在客户端过滤这个列表（只显示那些没有被过滤掉的项目），但是存在渲染性能问题。我应用了一个非常窄的过滤器，只剩下 10-20 个项目，然后取消它（因此必须再次显示所有项目），浏览器（非常好的机器上的 Chrome）挂断一两秒钟。

我使用以下例程重新渲染列表：

```
for (var i = 0, l = this.entries.length; i < l; i++) {
    $(this.cls_prefix + this.entries[i].id).css("display", this.entries[i].id in dict ? "block" : "none")
} 
```

dict 是允许项目的 id 的哈希值

这个函数本身立即运行，它的渲染挂了。是否有比更改 DOM 元素的“显示”属性更优化的重新渲染方法？

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-14T05:53:52.447

为什么要加载 1000 个项目？首先，您应该考虑分页之类的东西。每页显示大约 30 个项目。这样，您就不会加载那么多。

然后，如果您真的很喜欢“循环很多项目”，请考虑使用超时。这是我曾经做过[的一个演示，它说明了循环的后果。](http://jsfiddle.net/23h5Z/)它会阻塞 UI 并导致浏览器滞后，尤其是在长循环时。但是当使用定时器时，你会延迟每次迭代，让浏览器偶尔呼吸，并在下一次迭代开始之前做一些其他的事情。

另一件需要注意的事情是你应该避免[重绘和重排](http://www.stubbornella.org/content/2009/03/27/reflows-repaints-css-performance-making-your-javascript-slow/)，这意味着避免在不必要的时候经常移动元素和改变样式。另外，另一个技巧是从 DOM 中删除实际上不可见的节点。如果您不需要显示某些内容，请将其删除。为什么要浪费内存放一些实际上没有看到的东西？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T05:49:51.203

伙计 - 处理“大量 DOM 元素”的最佳方法是不在客户端上执行此操作，和/或如果可以避免，请不要使用 Javascript。

如果没有更好的解决方案（我相信可能有！），那么至少将您的工作集划分为您当时实际需要显示的内容（而不是整个，大，honkin' enchilada！）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-21T10:08:44.483

您可以使用`setTimeout`从主线程卸载循环调用并避免客户端冻结的技巧。我怀疑整个处理过程——从开始到结束——会持续相同的时间，但至少这样界面仍然可以使用，结果是更好的用户体验：

```
for (var i = 0, l = this.entries.length; i < l; i++) {
  setTimeout(function(){
    $(this.cls_prefix + this.entries[i].id).css("display", this.entries[i].id in dict ? "block" : "none")
  }, 0);
} 
```

# c# - 将 Sharepoint C# 中的 Excel (.xlsx) 文件读取到网格视图

> ID：10151350
> 
> 赞同：1
> 
> 时间：2012-04-14T05:47:12.913
> 
> 标签：c#, asp.net, excel

我想读取存储在本地系统上的 Excel 文件并将其显示在网格视图中。

我创建了一个可视化 WebPart 来读取 Excel 文件并将其显示在网格上。我该怎么做？

我从我的同事那里得到了使用 OpenXML 的建议，我不知道如何使用它。谁能建议我如何去做。任何指导前进的教程或链接都将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T06:00:24.207

我认为从 excel 文件中读取数据的最简单方法之一是使用 linq to excel 这里是它的链接 [http://code.google.com/p/linqtoexcel/](http://code.google.com/p/linqtoexcel/)

这是一个简短的例子

```
var book = new ExcelQueryFactory("pathToExcelFile");

var australia = (from x in book.Worksheet() select x).ToList(); 
```

然后将其绑定到您的gridview

# iphone - 数字格式化程序：我需要 01 而不是 1

> ID：10151352
> 
> 赞同：1
> 
> 时间：2012-04-14T05:47:47.553
> 
> 标签：iphone, ios, timer

> **可能重复：**
> [如何用零填充左侧的整数？](https://stackoverflow.com/questions/6390706/how-can-i-pad-an-integer-on-the-left-with-zeros)

在我的 iPhone 应用程序中，我以这种方式计算时间。

```
int timeTakeInSeconds = (int)(self.timeTaken*[constants timer]);
int timeTakenMins= (int)(timeTakeInSeconds/60);
int timeTakenSecs =(int)(timeTakeInSeconds%60);
NSString *timeText = [NSString stringWithFormat:@"Time %d:%d",timeTakenMins,timeTakenSecs]; 
```

通过这个，我获得了 1,2,...10, 11..等等的第二名。但我需要 01、02、03...10、11、12..等等..我该怎么做？有没有办法通过数字格式化程序来做到这一点？请帮忙。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-14T05:48:41.867

尝试使用`%d:%02d`而不仅仅是`%d:%d`. 这是使用标准 C 风格的 printf 格式化选项。该文档可以在[Format Specifiers](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html#//apple_ref/doc/uid/TP40004265)中找到。

# javascript - 在 jquery validate 插件中检查正整数（不包括零）

> ID：10151354
> 
> 赞同：1
> 
> 时间：2012-04-14T05:48:19.307
> 
> 标签：javascript, jquery, jquery-validate

这个想法是只检查没有零的正整数，但是，添加的自定义规则不起作用，如何解决？谢谢你。

```
 $(document).ready(function(){
  $("#genForm").validate( {
      rules: {
         'fb' : {
              number: true
          },
     'order[]' : {
               required: true,
              number : true
          }, 
           parent: {
      required: function(element) {
        return $("#order[]").val() < 0 ;
      }}       

       }
   });

   $("#order[]").blur(function() {
  $("#parent").valid();
}); 
```

html:

```
foreach ($result as $set) // it determine how many text input box in total
{
<input type='text' id="order[]" name="order[]" >
} 
```

进一步解释：

```
 <input type='text' id="order[]" name="order[]" value="-1" > //not allowed case 1

 <input type='text' id="order[]" name="order[]" value="5" > //not allowed case 2
 <input type='text' id="order[]" name="order[]" value="5" > //not allowed case 2
 <input type='text' id="order[]" name="order[]" value="2" > //not allowed case 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T06:24:30.750

你确定你的语法在这里正确吗？

```
return order[] > 0; 
```

# iphone - iPhone 应用程序失去互联网连接（NSURLConnection 不返回）

> ID：10151356
> 
> 赞同：4
> 
> 时间：2012-04-14T05:49:08.947
> 
> 标签：iphone, ios, nsurlconnection, reachability

我遇到了一个非常难以调试的问题。如果我的应用程序正在使用 WiFi 并且它闲置了大约 30 分钟，有时当我唤醒它时，它`NSURLConnection`不再响应。请求被发送，但从不返回。

起初，我认为这是一个内存错误，实例被释放得太早，因此从未返回响应。但是，如果我将应用程序置于后台，进入设置，关闭 WiFi 以独占使用 3G，然后返回应用程序，互联网连接神奇地恢复了生机，所有待处理`NSURLConnection`的恢复并完成。

显然，这对于使用 WiFi 的人来说是个问题。这真的是 WiFi 问题，还是我遗漏了什么？转到另一个应用程序（如 Safari），使用 WiFi 无线电并返回我的应用程序并不能解决问题 - 连接仍然没有返回。我已经用 Xcode 跟踪了这一点，但我的想法已经不多了。

此外，“应用程序使用 WiFi”Info.plist 标志设置为 ON，这是固件 5.1。“应用程序使用 WiFi”是否与 UIRequiresPersistentWiFi 相同？

**更新**：这与 Wifi 标志无关 - 它可以在 5 分钟内死亡。到目前为止，我只能在带有 5.1 固件的 iPhone 4s 上复制它。这不是一个真正的解决方案，但我正在擦除手机以尝试全新安装，看看是否有任何效果。我已经验证了`NSURLConnection`它总是在主线程上调用，并在`connection:failedWithError:`and处设置断点`connection:didReceiveResponse:`。当连接断开时，这些都不会返回，直到我禁用并重新启用 WiFi，然后立即全部返回。这也发生在本地服务器上，如果我用网络浏览器 ping 它，服务器仍然会返回。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T08:42:25.467

对于遇到此问题的任何其他人，这是由于 TestFlight v1.0 及以下版本：

[为什么 NSURLConnection 无法到达后端？](https://stackoverflow.com/questions/10149811/why-does-nsurlconnection-fail-to-reach-the-backend)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T02:18:55.710

您实际上是否通过 传输/接收任何数据`NSURLConnection`？如果没有，您是否有可能遇到 TCP 会话超时？如果问题在本地服务器上仍然存在，似乎不太可能，但任何介入的状态防火墙/数据包检查器都可能会丢弃您的 TCP 连接。

# file - 如何创建 .tmx 文件“数据”？

> ID：10151362
> 
> 赞同：1
> 
> 时间：2012-04-14T05:50:02.280
> 
> 标签：file, tmx

我目前正在尝试使用 tileD 创建一个随机地图，但我无法解码 .tmx 文件中的“数据”。我读到数据是 base64 编码和 gzip 压缩但没有（我搜索过的）实际上得到了一些有用的结果。

有没有人成功解码“数据”？我可以举一个完整的例子来说明“数据”在 xml 中的样子吗？

如果有人知道在 XML 中创建“数据”的格式是什么，您可以与我们分享吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:23:36.757

Tiled 的 .tmx 格式的完整格式可以在这里找到： [https ://github.com/bjorn/tiled/wiki/TMX-Map-Format](https://github.com/bjorn/tiled/wiki/TMX-Map-Format)

# javascript - 访问动态加载的 JS 元素

> ID：10151365
> 
> 赞同：-2
> 
> 时间：2012-04-14T05:51:20.113
> 
> 标签：javascript, greasemonkey, google-search

我正在尝试编写一个简单的 javascript 来为 Google 的搜索工具添加更多选项（当您按“更多搜索工具”时显示的选项。但是，当我尝试将新元素附加到现有元素时，我收到一个错误。例如：

```
var yr = document.getElementById('qdr_y'); 
yr.parent.insertBefore(k,yr); 
```

第二行抛出异常，因为`yr`为空。通过查看搜索结果页面的直接源代码，我发现基本结果页面仅包含“所有结果”、“更多搜索工具”和隐藏的“更少搜索工具”。所有其他选项都以其他方式注入。

如何访问这些其他元素，以便将新元素添加到正确的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T06:17:27.937

你有它：

```
// ==UserScript==
// @name           TESTE
// @namespace      TESTE
// @description    TESTE
// @include        http*://*.google.*
// ==/UserScript==

var k = document.createElement('div');
k.innerHTML = "<center><b> bla bla </b></center>"
var yr = document.getElementById('gbmm'); 
yr.insertBefore(k,yr.firstChild); 
```

（这只是一个例子。你不应该再使用`<center>`and`<b>`标记）。

![在此处输入图像描述](../Images/5110218f4aa5c804fc8e1e14d6fda240.png)

除非你的意思是这样的

![在此处输入图像描述](../Images/420b93317341d16b902fb3f01e0fd984.png)

那么代码应该是这样的

```
// ==UserScript==
// @name           TESTE
// @namespace      TESTE
// @description    TESTE
// @include        http*://*.google.*
// ==/UserScript==

var k = document.createElement('li');
k.id = 'myoption'
k.className = 'tbou'
k.innerHTML = "<a href='http://userscripts.org/users/rasg' class='q qs'> Here is my option </a>"
var yr = document.getElementById('clir_1'); 
yr.parentNode.appendChild(k); 
```

此外，考虑将 JQuery 添加到您的 GM 脚本中。

```
// @require        http://code.jquery.com/jquery.min.js 
```

编码要容易得多。

*** 编辑 ***

根据您的评论

> 我正在寻找将节点插入到“所有搜索工具”中，就像在您的第二个解决方案中一样。但是，您发布的内容正是我已经在做的事情，除了使用 qdr_y 而不是 clir_1！

以下（非常简单）代码是解决方案

```
// ==UserScript==
// @name           TESTE 3
// @namespace      TESTE 3
// @description    TESTE 3
// @require        http://code.jquery.com/jquery.min.js
// @include        http*://www.google.com/*
// ==/UserScript==

$(window).load(function(){
    $('.tbpc').click()
    $('.tbt').on('DOMNodeInserted', function() {
        if ($('#my_li').length) { $('#my_li').show() }
        else { $('#whv_').parent().append("<li id='my_li' class='tbou' style=''><a class='q qs' href='http://userscipts.org'>Now i am inside</a>") }
    })
    $('.tbpo').on('click', function() { $('#my_li').hide() })
}); 
```

![在此处输入图像描述](../Images/8d4b85161dedb816b73c207728588044.png)

它不像我想的那么漂亮，但谷歌让我们做坏事:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T07:51:35.480

请注意，`parent`在您的代码片段中应该是`parentNode`.

无论如何，一般来说，对于动态元素，您需要检查并等待目标元素。如果需要单击某些内容，您的脚本必须单击它。（在 Google 网站上尝试使用页面 JS 功能通常效果不佳。Google 页面总是为编写脚本提供额外的“乐趣”。;)）

您需要自由地使用轮询来补偿 AJAX 延迟。（挂钩 AJAX 事件或使用突变事件都具有很高的痛苦与成功率。轮询效果很好。）

最后，因为它是谷歌，仅仅触发一次投票是不够的，因为那些搜索选项不断被覆盖。

这是一个适用于美国版 Google 搜索结果的示例脚本（需要 jQuery）：

```
// ==UserScript==
// @name        _Google Search options add
// @include     http://www.google.com/*
// @require     http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js
// ==/UserScript==

if (window.top != window.self)  //-- Don't run on frames or iframes.
    return;

/*-- This script:
    1) Waits for the "More search tools" control.
    2) Clicks that control.
    3) Waits for the target element
    4) Adds our element before that one.
*/

waitForKeyElements ("#tbpi", clickMoreSearchToolsLink);

function clickMoreSearchToolsLink (jNode) {
    var clickEvent  = document.createEvent ('MouseEvents');
    clickEvent.initEvent ('click', true, true);
    jNode[0].dispatchEvent (clickEvent);

    waitForKeyElements ("#qdr_y", addOurExtraNodes);
}

function addOurExtraNodes (jNode) {
    jNode.before ("<li>Look at me, Ma!</li>");
}

/*--- waitForKeyElements():  A handy, utility function that
    does what it says.
*/
function waitForKeyElements (
    selectorTxt,    /* Required: The jQuery selector string that
                        specifies the desired element(s).
                    */
    actionFunction, /* Required: The code to run when elements are
                        found. It is passed a jNode to the matched
                        element.
                    */
    bWaitOnce,      /* Optional: If false, will continue to scan for
                        new elements even after the first match is
                        found.
                    */
    iframeSelector  /* Optional: If set, identifies the iframe to
                        search.
                    */
) {
    var targetNodes, btargetsFound;

    if (typeof iframeSelector == "undefined")
        targetNodes     = $(selectorTxt);
    else
        targetNodes     = $(iframeSelector).contents ()
                                           .find (selectorTxt);

    if (targetNodes  &&  targetNodes.length > 0) {
        /*--- Found target node(s).  Go through each and act if they
            are new.
        */
        targetNodes.each ( function () {
            var jThis        = $(this);
            var alreadyFound = jThis.data ('alreadyFound')  ||  false;

            if (!alreadyFound) {
                //--- Call the payload function.
                actionFunction (jThis);
                jThis.data ('alreadyFound', true);
            }
        } );
        btargetsFound   = true;
    }
    else {
        btargetsFound   = false;
    }

    //--- Get the timer-control variable for this selector.
    var controlObj      = waitForKeyElements.controlObj  ||  {};
    var controlKey      = selectorTxt.replace (/[^\w]/g, "_");
    var timeControl     = controlObj [controlKey];

    //--- Now set or clear the timer as appropriate.
    if (btargetsFound  &&  bWaitOnce  &&  timeControl) {
        //--- The only condition where we need to clear the timer.
        clearInterval (timeControl);
        delete controlObj [controlKey]
    }
    else {
        //--- Set a timer, if needed.
        if ( ! timeControl) {
            timeControl = setInterval ( function () {
                    waitForKeyElements (    selectorTxt,
                                            actionFunction,
                                            bWaitOnce,
                                            iframeSelector
                                        );
                },
                200
            );
            controlObj [controlKey] = timeControl;
        }
    }
    waitForKeyElements.controlObj   = controlObj;
} 
```

# java - 源查找路径正确但调试器找不到文件（Eclipse EE IDE）？

> ID：10151368
> 
> 赞同：2
> 
> 时间：2012-04-14T05:52:19.377
> 
> 标签：java, eclipse, debugging, ide

调试时跨过每一行确实有效。

进入位于另一个文件调试器中的函数会显示： `Source not found.`

还显示选项，`Edit Source Lookup Path...`但那里列出了正确的包。
（还尝试使用目录路径指向。）

没有设置其他断点，这是一种常见的解决方案。

正确方向的任何一点都是有帮助的。

谢谢你。

调试器窗口中的线程[main]：

```
Thread [main] (Suspended)   
    ClassNotFoundException(Throwable).<init>(String, Throwable) line: 217   
    ClassNotFoundException(Exception).<init>(String, Throwable) line: not available 
    ClassNotFoundException.<init>(String) line: not available   
    URLClassLoader$1.run() line: not available  
    AccessController.doPrivileged(PrivilegedExceptionAction<T>, AccessControlContext) line: not available [native method]   
    Launcher$ExtClassLoader(URLClassLoader).findClass(String) line: not available   
    Launcher$ExtClassLoader.findClass(String) line: not available   
    Launcher$ExtClassLoader(ClassLoader).loadClass(String, boolean) line: not available 
    Launcher$AppClassLoader(ClassLoader).loadClass(String, boolean) line: not available 
    Launcher$AppClassLoader.loadClass(String, boolean) line: not available  
    Launcher$AppClassLoader(ClassLoader).loadClass(String) line: not available  
    MyMain.<init>() line: 24    
    MyMain.main(String[]) line: 36 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T11:26:17.593

您确定在您的项目中拥有包源而不仅仅是二进制文件吗？

如果您确定检查用于运行应用程序的启动配置。您可以看到一个名为“Source”的选项卡。你需要的包的来源也有吗？

# jackrabbit - jcr 根据名称、文件大小等进行排序和分页

> ID：10151369
> 
> 赞同：0
> 
> 时间：2012-04-14T05:52:39.143
> 
> 标签：jackrabbit, jcr

我们使用 apache jackrabbit 来存储内容（html、image、pdfs），如下所示：

```
 /folder1 (nt:unstructured)
        /content1(nt:unstructured)
           /file(nt:folder)
               /test.html(nt:file)
               /test.html-contents (nt:resource) 
```

在 UI 中，我们希望显示所有可以按名称、文件大小、文件类型等排序的内容。为此，我尝试使用 XPath 检索内容节点。

1.  是否可以按节点名称排序？我尝试了一些类似的东西

    "/element(*,nt:base) 按@name 升序排列"

但这不起作用。它适用于内容的其他属性，但不适用于名称。2\. 可以按文件大小排序吗？由于文件是内容的子节点，有什么方法可以根据文件大小查询内容吗？（以某种方式通过 jcr:data).length 查询？）

作为一种解决方法，我正在通过节点迭代器检索所有内容并进行内存排序/分页。我希望有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:19:39.967

据我所知，JCR Xpath 查询不支持按名称排序。但是，对于 SQL，它是受支持的。不过，这可能取决于 Jackrabbit 的版本。

使用 SQL，上面的查询是：

```
select * from nt:base order by jcr:name ASC 
```

也不支持对资源的长度进行排序。您可能需要考虑在节点上设置一个额外的属性以进行排序。您可以在处理上传到 Jackrabbit 时执行此操作。

根据在内存中排序的节点数量可能会成为一个很大的负担。

# ef-code-first - 实体框架多重性约束

> ID：10151372
> 
> 赞同：3
> 
> 时间：2012-04-14T05:53:19.477
> 
> 标签：ef-code-first

我有以下（简化的）类结构：

```
public class Foo
{
    public ObservableCollection<Bar> Bars { get; set; }
}

public class Bar
{
    public Baz MyBaz { get; set; }    
}

public class Baz
{
    public ObservableCollection<Quux> Quuces { get; set; }
} 
```

首先使用实体​​框架代码，我用新的（POCO）子级初始化 Foo 的一个实例。

如果每个`Quuces`集合都是空的，SaveChanges() 就可以正常工作。但是，如果任何`Quuces`集合包含 Quux，我会得到：

> 违反了多重性约束。关系“My.Model.Baz_Quuces”的角色“Baz_Quuces_Source”具有多重性 1 或 0..1。

我没有在我的模型中明确配置任何关系。

发生了什么导致这种情况？

# php - 为 Codeigniter 日历中的每个日期生成唯一的 URL

> ID：10151375
> 
> 赞同：0
> 
> 时间：2012-04-14T05:53:49.763
> 
> 标签：php, codeigniter

我有一个显示月历的日历控制器和模型。用户可以单击上一个和下一个超链接来遍历月份。我还能够为每一天生成一个唯一的 URL，因此，例如，当有人想要点击 2012 年 4 月 10 日时，他们会得到一个类似于 .../2012/04/10 的 URL。我的问题是，当我再去一个月时，所有日期 URL 仍将四月显示为月份。

控制器

```
function display($year = null, $month = null) {

    $this->load->model('CalendarModel');

    if ($day = $this->input->post('day')) 
    {
        $this->CalendarModel->add_calendar_data("$year-$month-$day", $this->input->post('data'));
    }

    $data['Calendar'] = $this->CalendarModel->generate($year, $month);

    $this->load->view('Calendar', $data);

} 
```

模型

```
class CalendarModel extends CI_Model 
{

    var $conf;

    function CalendarModel() 
    {
        $date = (!isset($_GET['month']) && !isset($_GET['year'])) ? time() : strtotime($_GET['month'] . '/1/' . $_GET['year']); 

        $day = date('d', $date); 
        $month = date('m', $date); 
        $year = date('Y', $date);

        $this->conf = array(
            'start_day' => 'sunday',
            'show_next_prev' => true,
            'next_prev_url' => '/CodeIgniter/index.php/Calendar/display'
        );

        $this->conf['template'] = '
            {table_open}<table border="0" cellpadding="0" cellspacing="0" class="calendar">{/table_open}

            {heading_row_start}<tr>{/heading_row_start}

            {heading_previous_cell}<th><a href="{previous_url}">&lt;&lt;</a></th>{/heading_previous_cell}
            {heading_title_cell}<th colspan="{colspan}">{heading}</th>{/heading_title_cell}
            {heading_next_cell}<th><a href="{next_url}">&gt;&gt;</a></th>{/heading_next_cell}

            {heading_row_end}</tr>{/heading_row_end}

            {week_row_start}<tr>{/week_row_start}
            {week_day_cell}<td>{week_day}</td>{/week_day_cell}
            {week_row_end}</tr>{/week_row_end}

            {cal_row_start}<tr class="days">{/cal_row_start}
            {cal_cell_start}<td class="day">{/cal_cell_start}

            {cal_cell_content}
                <div class="day_num">{day}</div>
                <div class="content">{content}</div>
            {/cal_cell_content}
            {cal_cell_content_today}
                <div class="day_num highlight">{day}</div>
                <div class="content">{content}</div>
            {/cal_cell_content_today}

            {cal_cell_no_content}<div class="day_num"><a href="/'.$year.'/'.$month.'/{day}">{day}</a></div>{/cal_cell_no_content}
            {cal_cell_no_content_today}<div class="day_num"><a href="/'.$year.'/'.$month.'/{day}">{day}</a></div>{/cal_cell_no_content_today}

            {cal_cell_blank}&nbsp;{/cal_cell_blank}

            {cal_cell_end}</td>{/cal_cell_end}
            {cal_row_end}</tr>{/cal_row_end}

            {table_close}</table>{/table_close}
        ';

    }

    function generate ($year, $month) 
    {

        $this->load->library('calendar', $this->conf);

        //$cal_data = $this->get_calendar_data($year, $month);

        return $this->calendar->generate($year, $month);

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T08:13:05.653

这行得通吗？

```
 function CalendarModel($year = null, $month = null, $day = null)
  {       
         //$date = (!isset($_GET['month']) && !isset($_GET['year'])) ? time() : strtotime($_GET['month'] . '/1/' . $_GET['year']);
         //$day = date('d', $date);
         //$month = date('m', $date);
         // $year = date('Y', $date);  
         if ((is_null($year) || (is_null($month))
             {
                      // Do something if needed?
             }

          $this->conf = array( .... {continue rest of controller here as above} 
```

# java - 为什么我得到错误的输出

> ID：10151379
> 
> 赞同：1
> 
> 时间：2012-04-14T05:54:16.270
> 
> 标签：java, string, hex, int

我编写了一个程序，使用以下代码将十六进制数转换为其等效的二进制形式，但我得到了错误的结果。代码如下：

```
public String convert(String num){
    String res="";
    int []hex={0000,0001,0010,0011,0100,0101,0110,0111,1000,1001,1010,1011,1100,1101,1110,1111};
    int i;
    char ch;
    for(i=0;i<num.length();i++)
    {
        ch=num.charAt(i);
        if(ch>='a' && ch<='f'){
            res+=hex[ch-97+10]+"";
        }
        else if(ch>='A' && ch<='F'){
            res+=hex[ch-65+10]+"";
        }
        else if(ch>='0' && ch<='9'){
            int d=ch-48;
            res+=hex[d]+"";
        }
    }
    return res;
} 
```

如果我将样本输入为“12ae”，那么我将得到相应的输出为“1810101110”。仅当输入字段中有数字并且仅适用于所有字符时才会发生（出错）。但是当我将名为 hex 的数组更改为 String 类型时，它给了我确切的答案。

是因为编译器将整数数组中的数字视为某种形式的八进制数，还是因为其他原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T05:56:55.200

你喜欢的数字`0010`被解释为八进制数。写作`0010`和写作一样`8`。

您可以使用`Integer.binaryString`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T05:58:15.793

你在八进制数字的正确轨道上。以下声明：

```
int []hex={0000,0001,0010,0011,0100,0101,0110,0111,1000,...}; 
```

声明一个整数数组，用单词表示，将是

```
zero
one
eight
nine
sixty-four
sixty-five
seventy-two
seventy-three
one thousand 
```

等等。这显然不是你想要的。如果您声明`hex`为`String[] hex`, 并使用`"0000","0001",...`，那么您将得到预期的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T06:10:44.267

如果你这样写：

```
int []hex={0000,0001,0010,0011,0100,0101,0110,0111,1000,1001,1010,1011,1100,1101,1110,1111}; 
```

那么Java当然不会自动知道这些应该被解释为二进制数。

以 a 开头的整数文字`0`被解释为八进制数。`1`以to开头的整数文字`9`被解释为十进制数字。

如果您使用的是 Java 7，则可以使用`0b`二进制数的新语法：

```
int[] hex ={ 0b0000, 0b0001, 0b0010, 0b0011, ..., 0b1111 }; 
```

否则，使用十进制或十六进制：

```
int[] hex = { 0, 1, 2, 3, 4, ..., 15 };
int[] hex = { 0x0, 0x1, 0x2, 0x3, ..., 0x9, 0xA, 0xB, 0xC, 0xD, 0xE, 0xF }; 
```

但是由于这些只是从 0 到 15 的数字，因此您甚至根本不需要数组：因为`hex[i] == i`，您可以直接使用`i`代替`hex[i]`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T06:13:16.127

低于 8 的数字被视为八进制，顺便说一下，如果它们不被视为八进制，0001 将更改为 1，0101 将更改为 101，因此您将丢失二进制格式所需的零。

顺便说一句，你可以这样做：

```
int value = Integer.parseInt(hex, 16);
String binary = Integer.toBinaryString(value); 
```

# osx-lion - os x-lion：内置 iCal mac 应用程序启动时以编程方式启动我的应用程序？

> ID：10151380
> 
> 赞同：0
> 
> 时间：2012-04-14T05:54:18.460
> 
> 标签：osx-lion

我开发了一个 Mac 应用程序，我是 mac dev 的新手，但在 iOS 开发方面很有名。我的应用程序有一个登录 UI，所以我猜我可能无法在后台运行，而且我什至不知道如何在后台运行我的 Mac 应用程序。我想在 Mac 系统上启动 iCal 应用程序时启动我的应用程序。启动内置 iCal 应用程序时，是否可以以编程方式启动应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T06:05:01.193

可以在登录 UI 中自动启动守护程序，以检测 iCal 启动。对于守护进程，我更愿意将您重定向到这个非常完整的[Apple 文档](http://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/Introduction.html#//apple_ref/doc/uid/10000172i-SW1-SW1)。

有关检测程序启动，请参见`NSWorkspaceDidLaunchApplicationNotification`; `NSNotificationCenter`您必须在通知中心注册此通知。

然后在检测到 iCal 启动时，守护程序将启动您的应用程序。

# objective-c - 数组的大小 - iOS

> ID：10151388
> 
> 赞同：-1
> 
> 时间：2012-04-14T05:56:21.660
> 
> 标签：objective-c, ios, c, arrays

我想知道类似于 API 的数组的大小

```
const CGFloat * CGColorGetComponents 
```

它返回一个数组。如何获得目标 C 中 API 返回的数组的大小？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T06:01:57.043

[https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGColor/Reference/reference.html](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGColor/Reference/reference.html)

> 数组的大小比颜色的颜色空间的分量数大一。

例如，如果您的颜色是 RGBA，则数组`CGFloat`长度为 5。

正如 Dondragmer 所说，如果您仍然不确定，请传递`CGColorRef`into`CGColorGetNumberOfComponents`以获取数组长度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T06:09:25.257

`CGColorGetComponents`不是Objective-C。它是**C**，并返回一个 C 风格的数组指针。无法从自身获取 C 数组的大小。您必须从其他来源获取该信息。

你在哪里找到这些信息？打开Delan Azabani 提供的[CGColor 参考链接。](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGColor/Reference/reference.html)找到 CGColorGetComponents。下一个函数的名称是什么？

在更一般的意义上，您确定您需要了解组件吗？虽然许多较旧的代码示例使用该函数，但现在通常可以将`CGColorRef`from a传递给`UIColor`.

# ruby-on-rails-3 - Rails3 无论何时不能从 cron 工作，但可以从终端完美地工作

> ID：10151396
> 
> 赞同：1
> 
> 时间：2012-04-14T05:58:34.270
> 
> 标签：ruby-on-rails-3, cron, centos5, whenever

在 CentOS 5.6 服务器上使用无论何时 0.7.3、Rails 3.2.2、Ruby 1.9.3、Passenger 3.0.11（我没有使用 rvm）。问题是无论何时创建的 cron 作业都清楚地执行了，我可以在 Cron 日志中看到它们，但是它们实际上并没有执行 Rails 代码。如果我复制 cron 代码并将其粘贴到终端中，它会按预期工作并且确实如此。

要执行的代码：

```
class SomeModel < ActiveRecord::Base

  #Delete all items that haven't been updated for 2 hours or more
  def self.cron_job
    SomeModel.destroy_all(updated_at < ?", 2.hours.ago])
  end
end 
```

schedule.rb：

```
set :output, "/var/log/cron"

every 1.day, :at => '4:45 am' do
  runner "SomeModel.cron_job"
end 
```

它生成了以下 cron（输出 crontab -l）：

```
# Begin Whenever generated tasks for: site_name
45 4 * * * /bin/bash -l -c 'cd /home/user/domains/site_name && script/rails runner -e production '\''SomeModel.cron_job'\'' >> /var/log/cron 2>&1'
# End Whenever generated tasks for: site_name 
```

如果我第二天早上检查，我会在 cron 日志中找到：

```
Apr 14 04:45:01 node1 crond[9155]: (root) CMD (/bin/bash -l -c 'cd /home/user/domains/site_name && script/rails runner -e production '\''SomeModel.cron_job'\'' >> /var/log/cron 2>&1') 
```

但是，应该删除的项目仍在数据库中。如果我复制 cron 应该执行的代码 (/bin/bash -l -c 'cd ... 2>&1' 并从终端执行它，那么这些项目将按预期删除。

此外，当我从终端手动执行代码时，没有错误，在 cron 日志中我看到以下内容：

```
from script/rails:5:in 'require'
from script/rails:5
from script/rails:5:in 'require'
from script/rails:5 
```

在执行多个 cron 作业的时刻，此“错误（？）”仅在日志中打印一次。

从 cronjob 执行某些操作或在终端中输入代码之间有区别吗？为什么会有差异，我如何确保它也适用于 cronjob？日志输出也应该是一个错误，不幸的是它并没有告诉我太多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T06:08:59.867

您可能没有正确设置环境。如果您处于开发环境中：

```
whenever --set environment=development 
```

将为发展创造环境

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T15:08:24.820

好的，现在解决了。问题是我在 /usr/bin 中有一个 Ruby，在 /usr/local/bin 中有一个 Ruby。

我删除了 /usr/bin 中的 ruby​​ 并将正确的路径变量 (PATH="/usr/local/bin:/usr/bin:/bin") 添加到 crontab。现在一切都按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T15:48:53.123

对于未来的 Google 员工：我遇到了完全相同的问题，尽管我的解决方法非常不同......

我通过放入`set :output,'./cronOutput.txt'`我的`schedule.rb`文件来记录输出，并不断得到`No JavaScript runtine found`输出错误。所以我去安装了[execjs](https://github.com/sstephenson/execjs/)和[therubyracer](https://github.com/cowboyd/therubyracer) gems。之后一切都立即开始工作。

我的项目仍在开发中，所以我确实必须遵循史蒂夫的建议（在某种程度上）并包括`set :environment, "development"`在我`schedule.rb`的项目中以查询我的表。

希望这可以帮助其他人！

# php - 用PHP下载MySql多表

> ID：10151399
> 
> 赞同：0
> 
> 时间：2012-04-14T05:58:45.387
> 
> 标签：php, mysql, download

我正在尝试将自定义功能添加到我正在处理的网站的后端。

我有一个 MySql 数据库，其中包含多个表，我希望能够通过单击链接下载这些表。

如果备份文件也可以全部添加到 zip 文件中以供下载，那就太好了。

那么，在 PHP 中，我如何创建所有数据库表的副本（最好是 SQL 格式）并压缩它们以供下载？

我不确定 MySql "INTO OUTFILE" 方法是否适用于我的共享主机帐户。MySql 数据库与我网站的文件位于不同的服务器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T06:28:12.903

试试这个代码。可能需要进行一些调试，但您会明白的。

```
backup_tables('localhost','username','password','blog');

/* backup the db OR just a table */
function backup_tables($host,$user,$pass,$name,$tables = '*')
{

    $link = mysql_connect($host,$user,$pass);
    mysql_select_db($name,$link);

    //get all of the tables
    if($tables == '*')
    {
        $tables = array();
        $result = mysql_query('SHOW TABLES');
        while($row = mysql_fetch_row($result))
        {
            $tables[] = $row[0];
        }
    }
    else
    {
        $tables = is_array($tables) ? $tables : explode(',',$tables);
    }

    //cycle through
    foreach($tables as $table)
    {
        $result = mysql_query('SELECT * FROM '.$table);
        $num_fields = mysql_num_fields($result);

        $return.= 'DROP TABLE '.$table.';';
        $row2 = mysql_fetch_row(mysql_query('SHOW CREATE TABLE '.$table));
        $return.= "\n\n".$row2[1].";\n\n";

        for ($i = 0; $i < $num_fields; $i++) 
        {
            while($row = mysql_fetch_row($result))
            {
                $return.= 'INSERT INTO '.$table.' VALUES(';
                for($j=0; $j<$num_fields; $j++) 
                {
                    $row[$j] = addslashes($row[$j]);
                    $row[$j] = ereg_replace("\n","\\n",$row[$j]);
                    if (isset($row[$j])) { $return.= '"'.$row[$j].'"' ; } else { $return.= '""'; }
                    if ($j<($num_fields-1)) { $return.= ','; }
                }
                $return.= ");\n";
            }
        }
        $return.="\n\n\n";
    }

    //save file
    $handle = fopen('db-backup-'.time().'-'.(md5(implode(',',$tables))).'.sql','w+');
    fwrite($handle,$return);
    fclose($handle);
} 
```

上面的代码也没有使用 zip，因为你可以使用下面描述的函数。

```
/* creates a compressed zip file */
function create_zip($files = array(),$destination = '',$overwrite = false) {
    //if the zip file already exists and overwrite is false, return false
    if(file_exists($destination) &amp;&amp; !$overwrite) { return false; }
    //vars
    $valid_files = array();
    //if files were passed in...
    if(is_array($files)) {
        //cycle through each file
        foreach($files as $file) {
            //make sure the file exists
            if(file_exists($file)) {
                $valid_files[] = $file;
            }
        }
    }
    //if we have good files...
    if(count($valid_files)) {
        //create the archive
        $zip = new ZipArchive();
        if($zip->open($destination,$overwrite ? ZIPARCHIVE::OVERWRITE : ZIPARCHIVE::CREATE) !== true) {
            return false;
        }
        //add the files
        foreach($valid_files as $file) {
            $zip->addFile($file,$file);
        }
        //debug
        //echo 'The zip archive contains ',$zip->numFiles,' files with a status of ',$zip->status;

        //close the zip -- done!
        $zip->close();

        //check to make sure the file exists
        return file_exists($destination);
    }
    else
    {
        return false;
    }
} 
```

# xcode - 沙盒帐户已发布到实时游戏中心板！有什么办法可以删除分数？

> ID：10151402
> 
> 赞同：1
> 
> 时间：2012-04-14T05:59:58.757
> 
> 标签：xcode, game-center

我正在测试我的应用程序的更新，并在设备上登录我的游戏中心沙盒帐户时，在我的 iPhone 上运行我的项目。愚蠢的是，我没有考虑检查我是否处于沙盒模式，而是使用我为测试目的启用的作弊来运行游戏以跳到最后。因此，我的沙盒帐户现在在实时 GC 排行榜上得分最高！

我希望可能有一些后门方法来删除我自己的分数。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T05:46:31.710

如果我正确理解您的问题，您可以登录您的 iTunesConnect 帐户，前往“管理您的应用程序”选择您的游戏，选择“管理游戏中心”，然后点击“删除测试数据”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T17:27:50.717

最近几周我一直在做很多 GameCenter 编码，你在这里表达的行为看起来好像你有以下条件。（除了打开您宝贵的 Apple Developer 故障单以删除该分数之外，我不知道有什么解决方法。）

1.  您在实时 App Store 中有一个版本号为 XY 的应用程序
2.  您使用相同的版本号 XY 将一些新更改编码到应用程序中，并继续使用您的沙盒帐户调试应用程序。您通过您的代码获得了出色的分数，并将其发布到实时游戏中心。

这与版本号 XY 相关吗？我相信你可以通过确定你改变了这一点来控制这种情况？我只是很好奇，希望在接下来的几个月里，当我们发布我们的在线可玩游戏时，我不会陷入同样的​​问题。感谢您对您的情况的任何见解。

# jakarta-ee - Java EE EJB 不断尝试从一个请求向数据库添加新条目

> ID：10151404
> 
> 赞同：2
> 
> 时间：2012-04-14T06:00:11.350
> 
> 标签：jakarta-ee, ejb

我仍然对 JavaEE 缺乏经验。我正在尝试创建一个原型，并且在一周内学到了尽可能多的东西，但是现在我真的陷入了困境。

我通过 POST 从 android 应用程序发送一个 json 对象，然后将内容添加到数据库中。该请求通过我的 servlet 进入，该 servlet 提取数据然后创建一个新实体并用数据填充它。然后我将实体发送到调用保存函数的消息驱动 bean： public void save(Object object) { em.persist(object); em.flush(); servlet 通过 jms/Queue 队列发送实体。

问题：在部署并从应用程序发送请求后，它尝试将信息插入我的数据库（它确实如此），但它似乎继续尝试这样做，用以下内容填充我的控制台：

```
WARNING: Local Exception Stack
Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461):    org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Duplicate entry '2012/03/14-AAAA' for key 'PRIMARY'
Error Code: 1062 
```

我的想法是，消息可能没有正确地从队列中删除，或者可能是它决定继续发送消息的某个地方。我不认为是这种情况，但是我不完全确定 EntityManager 是如何工作的。除了所有这些，我真的不确定要包含哪些代码。

任何帮助都会很棒，我真的很紧张！

谢谢，丹

编辑：使用 MySQL 数据库和 Glassfish 服务器。

# php - 快速日期格式化的东西

> ID：10151405
> 
> 赞同：0
> 
> 时间：2012-04-14T06:00:14.653
> 
> 标签：php

我如何转换`20120204`为类似的东西`Mon, 04 Feb 2012 00:00:00 +0000`？PHP的版本是5.4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T06:18:38.063

`$> php -r 'echo date("r", mktime(0,0,0,2,4,2012));'`会给你`Sat, 04 Feb 2012 00:00:00 +0530`...

您可以在此处查看[日期](http://php.net/manual/en/function.date.php)和[mktime](http://php.net/manual/en/function.mktime.php)的详细语法

同样在应用日期之前，您可能还想检查此方法： `$> php -r 'print_r(strptime("20120204", "%Y%m%d"));'`它将为您提供您拥有的输入数据格式的组件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T07:11:41.117

通常建议使用 PHP 的[DateTime](http://uk.php.net/datetime)类进行日期处理/操作。所以你会做这样的事情

```
$dateString = '20120204';
$dateObject = DateTime::createFromFormat( 'Ymd', $dateString );
echo $dateObject->format( 'r' ); 
```

# java - Hibernate继承变得简单？？三个类层次结构，一个具体表 - 如何？

> ID：10151409
> 
> 赞同：0
> 
> 时间：2012-04-14T06:00:34.827
> 
> 标签：java, hibernate, hibernate-mapping

我有三个班级：

xyz/url/core/datastore/ObjectBase.java
xyz/url/core/test/hibernate/BaseClass.java
xyz/url/core/test/hibernate/ChildClass.java

他们的代码：

对象库

```
package xyz.url.core.datastore;

import java.util.Date;

public abstract class ObjectBase {
    private final long  m_id;
    private final long  m_version;

    private final Date  m_creation_time;

    public ObjectBase() {
        this.m_id = 0;
        this.m_version = 0;

        this.m_creation_time = new Date();
    }

    public long get_id() {
        return this.m_id;
    }

    public long get_version() {
        return this.m_version;
    }

    public Date get_creation_time() {
        return this.m_creation_time;
    }
} 
```

基类

```
package xyz.url.core.test.hibernate;

import java.util.Date;

import xyz.url.core.datastore.ObjectBase;

public abstract class BaseClass extends ObjectBase {

    private final Date  m_another_time;

    public BaseClass() {
        this.m_another_time = new Date();
    }

    public void say_something() {
        final Class<?> my_class = this.getClass();
        final String output = String.format(
                "Hello from the `%s` class! My id is %d!", my_class.getName(),
                this.get_id());
        System.out.println(output);
    }
} 
```

子类

```
package xyz.url.core.test.hibernate;

public class ChildClass extends BaseClass {
    private String  m_text;

    public ChildClass(final String text) {
        this.m_text = text;
    }

    public void set_text(final String text) {
        this.m_text = text;
    }

    public String get_text() {
        return this.m_text;
    }
} 
```

目前我使用隐式多态性；我有一个 HBM.XML 文件，用于唯一的“具体”类 ( `ChildClass`)，名为“ChildClass.hbm.xml”：

```
<?xml version="1.0"?>

<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">

<hibernate-mapping package="xyz.url.core.test.hibernate"
    default-access="field">

    <class name="ChildClass" table="child_class">
        <!-- Attributes of ObjectBase -->
        <id name="m_id" column="id">
            <generator class="increment" />
        </id>

        <version name="m_version" column="version" type="long" />

        <property name="m_creation_time" column="creation_time" type="date" />

        <!-- Attributes of BaseClass -->
        <property name="m_another_time" column="another_time" type="date" />

        <!-- Attributes of ChildClass -->
        <property name="m_text" column="text" type="string" />
    </class>

</hibernate-mapping> 
```

看到上面了吗？我将三个类的所有属性汇总到一张表中。

**我想做和上面一样的事情，得到一个上面的表（“child_class”），但是把它分成三个 HBM.XML 文件。**

我希望 Hibernate (v4.1) 支持某种**“导入”关键字**，因此我可以创建三个 HBM.XML 文件，每个类一个，然后将它们全部链接成一个。
不幸的是，他们“太聪明了”，让事情变得更加复杂。如果我错了，请赐教！

请注意`ObjectBase`和`BaseClass`是`abstract`类。

另一件值得一提的是，当我从数据库中获取一个对象时，我确切地知道它应该是什么类型，所以也许我不应该使用“鉴别器”......？

这是我测试**当前拥有**的东西时的一些控制台输出，我希望它保持这种状态，我的意思是，创建了一个表，读取时获取了一个表（而不是我在 Hibernate 中读过的“连接策略”文档）：

```
Hibernate: 
    drop table child_class if exists
Hibernate: 
    create table child_class (
        id bigint not null,
        version bigint not null,
        creation_time date,
        another_time date,
        text varchar(255),
        primary key (id)
    )
APR 14, 2012 8:49:47 AM org.hibernate.tool.hbm2ddl.SchemaExport execute
INFO: HHH000230: Schema export complete
Hibernate: 
    select
        max(id) 
    from
        child_class
Hibernate: 
    /* insert xyz.url.core.test.hibernate.ChildClass
        */ insert 
        into
            child_class
            (version, creation_time, another_time, text, id) 
        values
            (?, ?, ?, ?, ?) 
```

**同样，我想要的只是将我的 HBM.XML 分解为三个不同的文件，这样我就不必在每个具体类的描述符中编写相同的属性。就这样。**

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T23:26:37.133

`union-subclass`是我所需要的。简单的、类似 OOP 的继承。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-18T06:26:41.563

*您甚至阅读过他评论中发布的链接barsju吗？*

`9.1.5\. Table per concrete class`很可能是你想要的。还有`<!ENTITY allproperties SYSTEM "allproperties.xml">`提到要导入xml。

# http-compression - 用于发布数据的 http 压缩

> ID：10151412
> 
> 赞同：0
> 
> 时间：2012-04-14T06:00:47.790
> 
> 标签：http-compression

我使用 php 的 ob_gzhandler 来获取 gzip 压缩的内容。
在请求标头中， **Accept-Encoding:** gzip, deflate。
在响应标头中， **Content-Encoding:** gzip
我想知道从页面中的浏览器到服务器的发布数据是否会以任何形式压缩。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T20:28:17.170

只有 HTTP 响应会被压缩。

# java - 在 Android 中使用 SharedPreferences 类？

> ID：10151413
> 
> 赞同：0
> 
> 时间：2012-04-14T06:00:52.727
> 
> 标签：java, android, sharedpreferences

我创建了一个 SharedPreferences 类，以便我的其他 Activity 可以在线使用来获取偏好。

```
 public class SPAdapter extends Activity {

    public final String preferenceSettings = "STORAGE";

        // Default value if row does not exist in preference
     public static final String rowExistence = "Row did not exist";

public String prefGet(String preferenceName, String rowId) {
    SharedPreferences preferenceObject = getSharedPreferences(preferenceName, MODE_PRIVATE);
    String value = preferenceObject.getString(rowId, rowExistence);
    return value;
} 
```

我像这样使用这种方法：

```
 public class Splash extends Activity {

     private SPAdapter spObject;
     public String rowNumber(0);
     @Override
     protected void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.splash);

         spObject.prefGet(spObject.preferenceSettings,
            rowNumber);
} 
```

但是，每当我尝试使用此方法时，应用程序都会崩溃并显示有关上下文的错误。任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T06:24:47.260

这种方法的问题是您从 Activity 扩展 SPAdapter 并且没有正确初始化它，它没有正确的 Context 集，因此它无法通过它从框架中获取 SharedPreferences 实例。但无论如何，这不是你应该在 Android 中做事的方式，你不是实例化新 Activity 对象的人，这应该是框架的工作。这里有两种方法可以让这个工作：

*   从 SPAdapter 扩展您的 Splash 活动。

*   不要从 Activity 扩展 SPAdapter，只需传递 Context 对象的引用并使用它获取 SharedPreferences 实例。像这样的东西：

    公共类 SPAdapter { public final String preferenceSettings = "STORAGE";

    ```
    // Default value if row does not exist in preference
    public static final String rowExistence = "Row did not exist";

    private Context ctx;

    public SPAdapter(Context ctx){
        this.ctx = ctx;
    }

    public String prefGet(String preferenceName, String rowId) {
        SharedPreferences preferenceObject = ctx.getSharedPreferences(
                preferenceName, Context.MODE_PRIVATE);
        String value = preferenceObject.getString(rowId, rowExistence);
        return value;
    } 
    ```

    }

像这样使用它：

```
public class FsActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        SPAdapter sa = new SPAdapter(getApplicationContext());
        sa.prefGet("", "");
    }
} 
```

第一个解决方案似乎更好一点。

# google-maps-api-3 - Google Places API wnd Windows 8 Metro Style App

> ID：10151414
> 
> 赞同：4
> 
> 时间：2012-04-14T06:00:53.563
> 
> 标签：google-maps-api-3, microsoft-metro, javascript-injection

我正在开发一个 Metro 风格的应用程序，需要访问 Google Places API（我有一个应用程序密钥）。Windows 8 阻止 Java 脚本注入，除非包装在

```
 MSApp.executeLocalUnsafeFunction( function () { 
      document.write('…etc');
 }); 
```

因此，`maps.googleapis.com/maps/js`无法加载。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T02:04:45.840

使用[异步加载器](https://developers.google.com/maps/documentation/javascript/tutorial#asynch)。它不使用`document.write`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T07:26:46.790

我不确定这是否会对您的问题有所帮助，但我一直收到一个类似于“google undefined”的 JavaScript 错误。我写了这篇关于在 Windows 8 上使用 Google Maps API 的教程，[http://www.creepyed.com/2012/11/how-to-use-the-google-maps-api-on-windows-8/](http://www.creepyed.com/2012/11/how-to-use-the-google-maps-api-on-windows-8/)。它与能够在 Windows 8 中加载外部脚本有关，而 Visual Studio 模板则无法做到这一点。

我希望这有帮助！

# microsoft-sync-framework - DbNotProvisioned 异常

> ID：10151416
> 
> 赞同：0
> 
> 时间：2012-04-14T06:01:21.163
> 
> 标签：microsoft-sync-framework

我正在尝试使用 microsoft 同步框架将远程 SQL 数据库与本地 SQL 数据库同步

当它为 2 个不同的数据库运行本地 SQL 时，它就像魅力一样，当我为远程数据库尝试相同的代码 - 本地数据库同步时，它以错误结束

> 当前操作无法完成，因为没有为同步配置数据库，或者您没有同步配置表的权限。

如何克服上述异常

这是我的代码

> ```
>  var serverProvision = new SqlSyncScopeProvisioning(serverConn);
>             if (!serverProvision.ScopeExists(tableName))
>             {
>                 try
>                 {
>                     var scopeDesc = new DbSyncScopeDescription(tableName);
>                     scopeDesc.Tables.Add(SqlSyncDescriptionBuilder.GetDescriptionForTable(tableName, serverConn));
>                     serverProvision.PopulateFromScopeDescription(scopeDesc);
>                     serverProvision.SetCreateTableDefault(DbSyncCreationOption.Skip);
>                     serverProvision.Apply();
>                 }
>                 catch (Exception exception)
>                 {
>                     MessageBox.Show(exception.Message);
>                 }
>             } 
> ```

```
 var clientProvision = new SqlSyncScopeProvisioning(clientConn);
            if (!clientProvision.ScopeExists(tableName))
            {
                try
                {
                    var scopeDesc = SqlSyncDescriptionBuilder.GetDescriptionForScope(tableName, serverConn);
                    clientProvision.PopulateFromScopeDescription(scopeDesc);
                    clientProvision.Apply();
                }
                catch (Exception exception)
                {
                    MessageBox.Show(exception.Message);
                }
            }

            var serverProvider = new SqlSyncProvider(tableName, serverConn);
            var clientProvider = new SqlSyncProvider(tableName, clientConn);
            var syncOrchestrator = new SyncOrchestrator{Direction = SyncDirectionOrder.DownloadAndUpload,LocalProvider = clientProvider, RemoteProvider = serverProvider};

            ((SqlSyncProvider)syncOrchestrator.LocalProvider).ApplyChangeFailed += ProgramApplyChangeFailed;               
            syncOrchestrator.Synchronize(); 
```

谢谢

维奈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:46:04.867

这是共享数据库托管的权限问题！

感谢 JuneT 的所有帮助。

谢谢你们。

谢谢维奈

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T14:21:54.770

我有另一种情况发生这种情况：用户的默认架构，不是我想要同步的表的架构......这不起作用:-)将同步数据库用户的默认架构更改为表所在的架构相同，然后无缝运行！

# php - PHP自动下载文件

> ID：10151417
> 
> 赞同：0
> 
> 时间：2012-04-14T06:01:25.120
> 
> 标签：php, download

是否可以让 PHP 从远程服务器下载文件并将其保存在本地文件夹中？

编辑

我不知道这是一个重复的问题。在发布之前，我进行了搜索，但正在搜索“php 自动下载文件”，并且正在获得有关如何强制浏览器下载文件而不是打开文件的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T06:05:09.760

```
 <?php
    // set url "http://
           curl_setopt($ch, CURLOPT_URL, "<your url>"); 

          //return the transfer as a string 
         curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 

         // $output contains the output string 
         $output = curl_exec($ch); 

         // close curl resource to free up system resources 
          curl_close($ch); 

    file_put_contents($output,"<file>";
    ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T06:02:49.213

使用[`file_get_contents`](http://php.net/file_get_contents).

# c++ - 使用单个连续内存块索引 3 维数组

> ID：10151418
> 
> 赞同：3
> 
> 时间：2012-04-14T06:01:40.947
> 
> 标签：c++, multidimensional-array, arrayaccess, integer-arithmetic

```
vector<bool> working_lattice(box.rect.length * box.rect.height * box.rect.width); 
```

如何`working_lattice[1][5][3]`使用上述声明样式访问？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T06:08:22.347

您需要以

```
(i * length * height) + (j * height) + k 
```

所以在你的情况下

```
working_lattice[(i * box.rect.length * box.rect.height) + (j * box.rect.height) + k); 
```

或者

```
working_lattice[(1 * box.rect.length * box.rect.height) + (5 * box.rect.height) + 3); 
```

**编辑：**既然你在别处提到 x, y, z

```
working_lattice[(x * box.rect.length * box.rect.height) + (y * box.rect.height) + z); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T06:05:58.020

这取决于您使用的是行优先还是列优先排序。Row-major 在 C/C++ 中更为典型，但如果您手动执行，则可以执行任一操作。

在行优先排序中，要到达第 i、j、k' 个元素，您需要遍历`box.rect.height * box.rect.width * i`元素才能到达`i`第 th 行，加上`box.rect.width * j`元素才能到达该行的`j`第 th 列，再加`k`上才能返回深度方向的`k`第 th 个元素。要超级明确：

```
const size_t n_x = box.rect.length;
const size_t n_y = box.rect.height;
const size_t n_z = box.rect.width;
working_lattice[1 * n_x * n_z + 5 * n_z + 3] 
```

这显然很烦人，因此您可能需要定义一个内联函数或其他帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-28T14:35:52.103

即考虑这个：

```
A[R][S][T] 
```

假设它的基地址是`addr_base_A`，

所以你希望你能得到一个特定元素的地址`A[i][j][k]`，

我认为的答案是：`S*T*i + T*j + k + addr_base_A`。

希望这可以帮助 ：）

# iphone - 使用 XCODE 版本 4.3.2 (4E2002) 为 iOS 4.1 创建应用程序

> ID：10151425
> 
> 赞同：-1
> 
> 时间：2012-04-14T06:03:05.743
> 
> 标签：iphone, objective-c, ios, xcode, ipad

(^.^)“再次抱歉，我的英语不好，如果有人喜欢纠正我的编辑，我将不胜感激”

嗨，我有下一个问题，我想为 iOS 4.1 ++ 创建一个项目，在 Xcode 中我这样做

*   文件
*   新的
*   项目
*   单一视图应用程序
*   等等

在部署目标中我选择 4.1**但是如果我看到 main.m 有一个 @autoreleasepool 但在 iOS 4.1 中不存在**我该如何修复它。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T07:54:09.053

尝试改用它。

```
NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
[pool drain]; 
```

另请阅读[这篇文章](http://iphonedevelopertips.com/xcode/base-sdk-and-iphone-os-deployment-target-developing-apps-with-the-4-x-sdk-deploying-to-3-x-devices.html)，它是关于将 4.x 部署到 3.x，但我认为您应该能够相应地解决您的问题。

# iphone - 检测用户是否按下 Go 或隐藏键盘按钮 UITextField

> ID：10151426
> 
> 赞同：3
> 
> 时间：2012-04-14T06:03:08.573
> 
> 标签：iphone, objective-c, ios, xcode

我正在制作一个浏览器类型的应用程序..

现在我已经让 Url 输入**文本字段**...它显示了键盘..

现在我把它做成了 Url 类型的键盘。**它有 Go 按钮，iPad 有一个隐藏键盘的按钮。**

```
-(BOOL)textFieldShouldReturn:(UITextField *)textField 
```

我知道上面是当用户点击键盘返回时调用的方法..但是对于 iPad ..有两个不同的东西..如果用户按下 Go..我想去新的 URL ..并保持窗口原样用户按下隐藏键盘..但问题是事件报告

```
-(BOOL)textFieldShouldReturn:(UITextField *)textField 
```

**那么我如何区分用户按下Go ..或者只是隐藏键盘..**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-14T06:16:34.613

当用户点击隐藏按钮时，**UIKeyboardWillHideNotification**被调用，所以你应该注册观察它

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                     selector:@selector(keyboardWillHideHandler:)
                                         name:UIKeyboardWillHideNotification
                                       object:nil];

- (void) keyboardWillHideHandler:(NSNotification *)notification {
    //show another viewcontroller here
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-14T06:58:36.380

显然现在看来 Go 按钮只报告

```
-(BOOL)textFieldShouldReturn:(UITextField *)textField 
```

并且隐藏键盘按钮不会..

我很确定昨天不是这种情况..但无论如何..我相信我应该为这个混乱负责..如果有人需要清理，我会留下这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T07:03:48.077

您尝试使用键盘触摸功能，我认为它会起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-03T13:23:14.543

至少在 iOS 12 上，点击隐藏按钮（在 iPad 上）时会调用[textFieldDidEndEditing(_:) 。](https://developer.apple.com/documentation/uikit/uitextfielddelegate/1619591-textfielddidendediting)

希望这可以帮助。

# javascript - 使用 Gnome-Shell JS 接口获取联系人列表

> ID：10151433
> 
> 赞同：1
> 
> 时间：2012-04-14T06:04:24.560
> 
> 标签：javascript, gobject, gnome-shell, gnome-shell-extensions, gjs

我刚刚开始摆弄编写 gnome-shell 扩展，并且想知道如何获取用户拥有的联系人列表。

我已经找到了一些可能的文件：`gnome-shell/js/ui/contactDisplay.js`和`gnome-shell/src/shell_contact_system.c`.

现在我注意到`shell_contact_system.c`以下函数：

```
/**
 * shell_contact_system_get_all:
 * @self: A #ShellContactSystem
 *
 * Returns: (transfer none): All individuals
 */
GeeMap *
shell_contact_system_get_all (ShellContactSystem *self)
{
  GeeMap *individuals;

  g_return_val_if_fail (SHELL_IS_CONTACT_SYSTEM (self), NULL);

  individuals = folks_individual_aggregator_get_individuals (self->priv->aggregator);

  return individuals;
} 
```

这表明在 javascript 界面中我可以使用函数（我的信念被文件也有 a并演示了使用`get_all`的事实加强了），所以我尝试：`.c``shell_contact_system_get_individual``contactDisplay.js``Shell.ContactSystem.get_default().get_individual`

```
contactSys = Shell.ContactSystem.get_default();
// get contacts
contacts = contactSys.get_all(); 
```

有用！（我正在 Gnome-shell 的“镜子”javascript 解释器中尝试它）。

它似乎是一个“Gobject”，所以我不知道如何处理这个对象来获取我的联系人姓名。我注意到（从 C 代码）这个对象是 a `GeeMap *`，所以查看[Gee.Map 的文档](http://people.gnome.org/~dvillevalois/libgee/doc/gee-1.0/Gee.Map.html)，我发现我可以执行以下操作：

```
contacts.size   // returns 31, which is the number of contacts I have !
contacts.values // is a Gee.Collection
contacts.keys   // is a Gee.Set 
```

然后我尝试查看`contacts.values`and `contacts.key`，并注意到这些`to_array()`方法具有：

```
contacts.values.to_array()
contacts.keys.to_array() 
```

但是，当我这样做时，我会得到一个**空数组**：`contacts.xxx.to_array().size`是 0，但是`contacts.size`是 31 吗？！！

当我尝试使用 a`contacts.map_iterator()`遍历地图时也会发生同样的情况；`it.get_value()`并且`it.get_key()`似乎为空。

所以，我的问题是：**如何访问 的各个元素`contacts`？**

我确实注意到评论`shell_contact_system_get_all`说`Returns: (transfer none): ...`while `shell_contact_system_get_individual`says `Returns: (transfer full): ...`，并且后一个功能有效（前提是我知道我要查找的个人的 ID，这是我的问题），而前者没有。这可能与它有关吗？

此外，作为一种解决方法，我目前可以使用`contactSearchProvider`该类来实现这一点（当您安装`gnome-contacts`可以键入联系人姓名的位置时，概览将使用该类，它们将出现在概览中）。我基本上搜索`''`哪个应该返回我每个联系人的列表。不过，这似乎是迂回的-我觉得我应该能够使用该`get_all()`方法来获取所有联系人，而无需搜索空字符串...

```
 const ContactDisplay = imports.ui.contactDisplay;
    cds = new ContactDisplay.contactSearchProvider;
    res = cds.getInitialResultSet(['']); 
    // woohoo! res.length is 31, and res[0], res[1], ... are all not null! 
```

任何帮助将不胜感激（顺便说一句，是否有任何关于此的文档？当我盯着源代码并尝试从中推断出所有文档时，我感到非常不合适！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T06:53:46.680

我相信这是一个错误，并且您已经找到了它的位置：C 方法上的注释应该说明`Returns: (transfer full):`以便将结果返回给绑定。

下一个合乎逻辑的步骤是向他们的 bugzilla 报告错误和补丁，但我需要注意代码在 gnome 3.6 中已删除，所以我怀疑它是否会被修复。

联系人搜索代码现在位于 gnome-contact 应用程序中：

[http://git.gnome.org/browse/gnome-contacts](http://git.gnome.org/browse/gnome-contacts)

# css - 广告位叠加-自动插入页面

> ID：10151435
> 
> 赞同：1
> 
> 时间：2012-04-14T06:04:52.950
> 
> 标签：css, ads, adsense

下面的 css 片段会自动插入。.adslot-overlay {位置：绝对；字体系列：arial、sans-serif；（其余省略）。你可以看看[http://www.iiste.org/journals/index.php/ISEA](http://www.iiste.org/journals/index.php/ISEA)

任何人都可以有任何建议为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T19:13:22.517

请参阅我的帖子：[https ://stackoverflow.com/a/10180134/1336699](https://stackoverflow.com/a/10180134/1336699)

尝试在 Chrome 中禁用 Google Publisher Toolbar。那应该解决它。

# wpf - 在 WPF 中哪个更好，将图像用于图标或 XAML 路径？为什么？

> ID：10151439
> 
> 赞同：2
> 
> 时间：2012-04-14T06:05:51.733
> 
> 标签：wpf, image, vector-graphics

目前我正在努力将我们公司的 ERP 系统升级到新的主要版本，并且我目前正在为使用 WPF 的前端 UI 奠定基础，现在我想知道是使用`Image`元素还是使用 XAML`Path`对象（矢量图形）对于解决方案图标（即添加、删除、保存、复制、搜索...等按钮图标）。根据您的经验，哪个更好，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T08:27:54.653

我同意 CodeWarrior 的观点，但我认为这个决定还有很多因素，包括：

*   谁在制作图像？你？如果是这样，您的设计才能如何？我知道，就我个人而言，我不希望生成看起来像样的位图图标，但我*能够*在 XAML 中生成相当吸引人的图标
*   您需要以各种尺寸显示图标吗？如果是这样，XAML 可以再次为您节省大量时间，因为它往往可以更清晰地扩展
*   您需要以非常小的分辨率显示图标吗？如果是这样，XAML 图标实际上可能看起来不那么吸引人
*   如果您需要组合图像或微妙地改变它们，例如更改它们的粗细、颜色或在禁用它们时“将它们变灰”，XAML 图标将为您提供更大的灵活性
*   最后，没有什么能阻止你两全其美。在我的应用程序中，我知道我在很多地方都需要主图标。我用 XAML 设计了它，然后编写了一个小的支持应用程序，将它作为各种大小的位图吐出。这使它很容易用作我的应用程序图标，并且在每个必要的大小（例如，作为桌面图标、作为窗口图标等）下看起来都很清晰。此外，我在应用程序本身中将其用作 XAML 资源，例如在启动画面中

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T06:14:08.640

这取决于您计划显示的图像的范围。如果您有少量要显示数千次的图像，则 XAML 路径是有意义的。如果它们只是显示几次的几个图像，那么 XAML 路径所花费的时间将超出其价值。同样，如果您有数千个图像，每个图像只显示一次，请使用图像，因为转换为 XAML 路径需要很长时间（除非您有一种以编程方式执行此操作的方法）。

听起来您多次使用少量图像，因此请使用图像。它实际上并不需要大量的处理能力，而 WPF 的一大好处是它将图形渲染内容卸载到 GPU，而不是使用 CPU。

# iphone - Reorder format of string for i18n

> ID：10151441
> 
> 赞同：1
> 
> 时间：2012-04-14T06:06:03.767
> 
> 标签：iphone, objective-c, ios

e.g.

In English:

```
He used <Str_1> to <Str_2> 
```

and in Chinese:

```
他对 <Str_2> 使用了 <Str_1> 
```

How can I order this two `String`s (which are generated in code) differently for the code below?

```
[NSString stringWithFormat:@"%@ %@ %@ %@",
         NSLocalizedString(@"Part1", nil),     // "He used" -> "他对"
         NSLocalizedString(str_1, nil),
         NSLocalizedString(@"Part3", nil),     // "to" -> "使用了"
         NSLocalizedString(str_2", nil), nil]; 
```

I happened saw a related question before, but unluckily, I can't find it now!
The workaround is something like `%2@` & `%1@` to do reorder, I'm not sure.

Thanks in advance!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T06:34:15.830

In your `localizable.strings` file:

```
"He used %@ to %@" = "他对 %2$@ 使用了 %1$@"; 
```

In code:

```
[NSString stringWithFormat: NSLocalizedString(@"He used %@ to %@", nil), 
    str1, str2]; 
```

This should re-order the string parameters.

# java - Java Unchecked exceptions 从 main 中抛出

> ID：10151442
> 
> 赞同：0
> 
> 时间：2012-04-14T06:06:03.827
> 
> 标签：java, exception-handling

如果我从 main 中抛出一个未经检查的异常，那是否总是不会使程序崩溃。我之所以问，是因为我正在运行一个 GUI，并且它目前不会使程序崩溃。它们通常会崩溃还是仅在某些情况下崩溃？对于检查的异常和 GUI 也一样吗

堆栈溢出在我身上崩溃了，所以我没有意识到这个问题被发布了两次，我觉得有两个副本是错误的。这是同一个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T06:13:13.413

检查未检查的异常都会使主线程崩溃。但是，这并不意味着 JVM 会退出。当没有非守护线程正在运行时，JVM 退出。如果你正在运行一个 GUI 应用程序，那么 UI 事件循环是一个非守护线程，它将保持 JVM 运行直到它完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T06:28:35.670

> 如果我从 main 中抛出一个未经检查的异常，那是否总是不会使程序崩溃。

从技术上讲，当 JVM 遇到严重的内部错误并将包含寄存器内容和各种其他晦涩内容的故障转储输出到文件中时，就会发生崩溃。

当主线程由于未捕获的异常而退出时，这不是崩溃。这是（从 JVM 的角度来看）有序的关闭。

Chandra 的回答解释了 JVM 关闭通常是如何发生的，尽管他没有提到调用`System.exit()`是启动有序关闭的另一种方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T07:03:42.127

使用 try-catch (Throwable t) 将 main 方法中的所有代码包装起来。这抓住了一切。

# xpages - 检查计划的本地代理是否可以在 Notes 客户端中运行

> ID：10151443
> 
> 赞同：2
> 
> 时间：2012-04-14T06:06:30.803
> 
> 标签：xpages, lotusscript, xpinc

我在 XPiNC 中有一种方法（您可以添加该标签吗）来检查 Notes 客户端中是否启用了“计划的本地代理”？或者如何在 LotusScript 代理中执行此操作。检查代理是否处于活动状态很容易，但这只是等式的一部分

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T06:13:23.600

请参阅NotesAgent 类的[触发器](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=/com.ibm.designer.domino.main.doc/H_NOTESAGENT_CLASS.html)和属性：`IsEnabled`

> ```
> TRIGGER_AFTER_MAIL_DELIVERY (2) means "After new mail has arrived"
> TRIGGER_BEFORE_MAIL_DELIVERY (6) means "Before new mail arrives"
> TRIGGER_DOC_PASTED (3) means "When documents are pasted"
> TRIGGER_DOC_UPDATE (5) means "After documents are created or modified"
> TRIGGER_MANUAL (4) means "Action menu selection" or "Agent list selection"
> TRIGGER_SERVERSTART (8) means "When the Domino server starts"
> TRIGGER_NONE (0) is not used
> 
> TRIGGER_SCHEDULED (1) means "More than once a day," "Daily," "Weekly," "Monthly," or "Never" 
> ```

**编辑**： [这个论坛帖子建议](http://www-10.lotus.com/ldd/nd6forum.nsf/869c7412fe5d56b7852569fa007826e3/d35785d5b03f54cb852574f8002eea0b?OpenDocument)检查 Notes 客户端是否配置为允许运行计划代理可以这样完成：

```
if (Clng( Session.GetEnvironmentValue( "Preferences", True )) and &H8000000) > 0 then
    msgbox "scheduled agents allowed"
end if 
```

# python - Isinstance() 不起作用

> ID：10151444
> 
> 赞同：0
> 
> 时间：2012-04-14T06:06:32.567
> 
> 标签：python

出于某种原因，我无法让 isinstance() 在 Python 2.7.2 上工作

```
def print_lol(the_list, indent=False, level=0):
    for item in the_list:
        if isinstance(item, list):
            print_lol(item, indent, level+1)
        else:
            print(item) 
```

当我编译并运行它时：

```
>>> list = ["q", "w", ["D", ["E", "I"]]]
>>> print_lol(list) 
```

我收到错误消息：

```
if isinstance(item, list):
TypeError: isinstance() arg 2 must be a class, type, or tuple of classes and types 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-14T06:09:04.530

您已将变量命名为`list`：

```
>>> list = ["q", "w", ["D", ["E", "I"]]] 
```

这隐藏了内置的`list`.

重命名变量后，重新启动 Python（或 IDE）。由于 your`list`是一个全局变量，否则它将一直存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T06:09:18.847

这是你有问题的地方

```
>>> list = ["q", "w", ["D", ["E", "I"]]] 
```

覆盖 python 命名类型，例如`list`将变量名称与新的对象实例绑定。所以后来当你用 list 尝试 isinstance 时，它​​失败了。

当您创建新变量时，请避免将其命名为与内置变量不同的名称，并且不要与命名空间冲突。

在此示例中，使用以下内容将轻而易举

```
>>> mylist = [w for w in mylist if len(w) >= 3 and diff(w)]
>>> isinstance(mylist,list)
True 
```

请注意，如果您污染了命名空间并且您在 IDLE 中运行，则重新启动 IDLE 是一个不错的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T06:09:10.727

`list`问题是您通过分配一个名为的变量来隐藏内置`list`：

```
list = ["q", "w", ["D", ["E", "I"]]] 
```

您应该尽量避免对变量使用任何内置名称，因为这通常会导致令人困惑的错误。解决方案是为您的变量使用不同的名称。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-14T06:10:07.307

您正在覆盖`list`，请先尝试`print list`诊断`isinstance`此类问题。

# windows-phone-7 - 如何将 .xap 安装到我的 WP7 中？

> ID：10151448
> 
> 赞同：0
> 
> 时间：2012-04-14T06:07:21.030
> 
> 标签：windows-phone-7

大家好，我正在开发 WP7 应用程序，我想向客户端显示进度，所以我如何拥有 .xap 文件，所以一旦我可以将此文件提供给客户端，它会直接安装到 WP7 吗？

如果直接安装那么它是如何安装的。？

谢谢。！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T06:18:36.877

为了安装 XAP，您的客户端将需要开发人员解锁的手机和 Zune，以及用于上传 XAP 的 SDK 工具。

一个更好的选择是使用[Marketplace Beta 分发](http://msdn.microsoft.com/en-us/library/hh334585%28v=vs.92%29.aspx)机制，这是一种将应用的 beta 版本分发给任何有手机的用户的快速方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T18:41:52.923

在 Windows 手机上安装 .xap 很容易，假设您已经为它进行了设置。

你会需要：

[Windows Phone 开发人员工具](http://www.microsoft.com/en-us/download/details.aspx?id=13890)和[更新](http://www.microsoft.com/en-us/download/details.aspx?id=23854)

[Zune 软件](http://www.zune.net/en-us/products/software/download/default.htm)

[Windows Live ID](https://accountservices.passport.net/ppnetworkhome.srf?vv=1350&mkt=EN-US&lc=1033)

附加到您的 Live ID 的[App Hub 帐户](http://create.msdn.com/en-US/home/about/developer_registration_walkthrough)

这些链接中的每一个都可以相对快速地获取。除了 App Hub 帐户（截至本文发布时每年 99 美元）之外，它们都是免费的。

一旦有了这些，安装就很简单了。

插入手机，Zune 软件应该会打开。在您的 Windows Phone 开发人员工具中，打开 Windows Phone 开发人员注册。只需输入您的 Windows ID 和密码即可将您的设备注册到您的 App Hub 帐户（确保您的手机已开启、解锁并连接到 Zune）。然后，返回到 Windows Phone 开发人员工具并打开应用程序部署（再次确保手机已打开、解锁并连接到 Zune）。选择 Windows Phone 7 设备作为您的目标，浏览到 .xap，然后点击“部署”。

# actionscript-3 - AS3 FLVPlayback 全屏模式显示黑屏

> ID：10151451
> 
> 赞同：0
> 
> 时间：2012-04-14T06:07:39.347
> 
> 标签：actionscript-3, air, flvplayback

我正在尝试使用 Flash AS3 FLVPlayback 组件的 enterFullScreenDisplayState() 函数，但我没有将视频扩展到填充屏幕，而是完全黑屏。我仍然可以听到视频播放，当我 Esc 时，视频只是正常播放。我作为 Adob​​e AIR 桌面应用程序（运行时版本 3）发布。

我是一名经验丰富的 Flash 开发人员，但以前没有遇到过这个问题，现在已经寻找了几个小时的解决方案。任何帮助，将不胜感激。我的文档类的代码如下。它似乎很基本，我错过了什么吗？

```
package  {

import flash.display.MovieClip;
import fl.video.FLVPlayback;
import flash.events.MouseEvent;
import fl.controls.Button;

public class VidTest extends MovieClip {

    public var vidPlayer:FLVPlayback;
    public var fullscreenBtn:Button;

    public function VidTest() {

        vidPlayer = new FLVPlayback();
        vidPlayer.width = 502;
        vidPlayer.height = 284;
        vidPlayer.source = "airport.f4v";
        addChild(vidPlayer);
        fullscreenBtn.addEventListener(MouseEvent.CLICK, fullscreenHandler);

    }

    public function fullscreenHandler(e:MouseEvent):void
    {
        vidPlayer.enterFullScreenDisplayState();
    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T11:38:04.807

```
<object> 
... 
<param name="allowFullScreen" value="true" /> 
<embed ... allowfullscreen="true" /> 
```

不确定，但这可能是问题所在。

[http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS2E9C7F3B-6A7C-4c5d-8ADD-5B23446FBEEB.html](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS2E9C7F3B-6A7C-4c5d-8ADD-5B23446FBEEB.html)

# java - 使用 maven 构建完整的应用程序文件夹

> ID：10151458
> 
> 赞同：4
> 
> 时间：2012-04-14T06:08:36.130
> 
> 标签：java, maven, build

在部署到生产环境后，几乎所有的 java 独立应用程序最终都会放在一个看起来像这样的文件夹中。

```
myapp  
|->lib (here lay all dependencies)  
|->config (here lay all the config-files) 
|->myapp.bat  
|->myapp.sh 
```

我想知道 maven 中是否有任何东西可以为我构建该结构并将其放入 tar.gz 中。

[Java：如何构建基于 Maven 的项目的独立发行版？](https://stackoverflow.com/questions/1015520/java-how-do-i-build-standalone-distributions-of-maven-based-projects)是没有选择的。我不想让 maven 拆开我需要的所有罐子。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T08:32:44.253

这种部署目录结构非常流行，并被许多优秀的应用程序如 apache maven 和 ant 采用。

是的，我们可以通过在 maven 包阶段使用 maven-assembly-plugin 来实现这一点。

示例 pom.xml：

```
 <!-- Pack executable jar, dependencies and other resource into tar.gz -->
  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-assembly-plugin</artifactId>
    <version>2.2-beta-5</version>
    <executions>
      <execution>
        <phase>package</phase>
        <goals><goal>attached</goal></goals>
      </execution>
    </executions>
    <configuration>
      <descriptors>
        <descriptor>src/main/assembly/binary-deployment.xml</descriptor>
      </descriptors>
    </configuration>
  </plugin> 
```

示例二进制部署.xml：

```
<!--
  release package directory structure:
    *.tar.gz
      conf
        *.xml
        *.properties
      lib
        application jar
        third party jar dependencies
      run.sh
      run.bat
-->
<assembly>
  <id>bin</id>
  <formats>
    <format>tar.gz</format>
  </formats>
  <includeBaseDirectory>true</includeBaseDirectory>
  <fileSets>
    <fileSet>
      <directory>src/main/java</directory>
      <outputDirectory>conf</outputDirectory>
      <includes>
        <include>*.xml</include>
        <include>*.properties</include>
      </includes>
    </fileSet>
    <fileSet>
      <directory>src/main/bin</directory>
      <outputDirectory></outputDirectory>
      <filtered>true</filtered>
      <fileMode>755</fileMode>
    </fileSet>
    <fileSet>
      <directory>src/main/doc</directory>
      <outputDirectory>doc</outputDirectory>
      <filtered>true</filtered>
    </fileSet>
  </fileSets>
  <dependencySets>
    <dependencySet>
      <outputDirectory>lib</outputDirectory>
      <useProjectArtifact>true</useProjectArtifact>
      <unpack>false</unpack>
      <scope>runtime</scope>
    </dependencySet>
  </dependencySets>
</assembly> 
```

# c# - 动态/自定义属性

> ID：10151464
> 
> 赞同：0
> 
> 时间：2012-04-14T06:09:12.320
> 
> 标签：c#, dynamic, properties, dynamic-properties

我想使用动态属性，如下所示：

```
public class CustomProperty
{
  public string PropType { get; set; }
  public string PropValue { get; set; }
  public string PropName { get; set; }
  ...
} 
```

...然后将这些属性保存到数据库中，如下所示：

```
PropType   PropValue   PropName
--------   ---------   --------
String     "William"   "Name"
Int64      "21"        "Age"
String     "John"      "Name"
Int64      "32"        "Age"
String     "Brown"     "Haircolor"
... 
```

我不认为我是第一个有这样的想法的人，所以我正在寻找一个实现（poen source / nuget 等）。但我很难找到一个。

所以我的问题是：是否有可以使用（或在需要时改进）的动态属性的实现？

编辑：正如richardtallent 指出的那样，我正在寻找EAV 模式。那么，有没有可以使用的实现呢？还是我必须自己写一些东西。我想以前已经做过很多次了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T06:18:32.583

您所描述的通常称为“EAV”（实体-属性-值）模式。

当应用于关系数据库时，许多人认为它是一种反模式，因为使用它对维护正确的规范化数据和高效的 CRUD 操作有影响。然而，它确实有它的用途。

此主题的变体用于从 Lotus Notes 到 Google BigTable 的 No-SQL 数据库。因此，如果您不依赖于使用 SQL Server，那么最好的选择可能是研究 C# 可访问的 No-SQL 数据库，例如 MongoDB。

如果您正在寻找可以序列化到传统 RDBMS 的东西，我不知道有任何开源解决方案。在 C# 中有 ExpandoObjects，但我不知道该系统是否包括开箱即用的数据库序列化/反序列化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T06:15:03.117

从 4.0 版本开始有[Expando 对象：动态扩展和收缩对象。](http://msdn.microsoft.com/en-us/library/system.dynamic.expandoobject.aspx)

如果这不是您要搜索的内容，请澄清。

# iphone - 从 iphone sdk 中的 Plist 绘制线条加载

> ID：10151467
> 
> 赞同：1
> 
> 时间：2012-04-14T06:09:39.783
> 
> 标签：iphone, ios

我在代码下面的**touchesMoved 事件**中将绘制线 x 和 y 位置保存到 Plist ：

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    mouseSwiped = YES;
    NSLog(@"You are drawing");
    UITouch *touch = [touches anyObject];   
    CGPoint currentPoint = [touch locationInView:self.view];
    currentPoint.y -= 20;

    UIGraphicsBeginImageContext(self.view.frame.size);
    [drawImage.image drawInRect:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
    CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
    CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 5.0);
    CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 1.0, 0.0, 1.0, 1.0);
    CGContextBeginPath(UIGraphicsGetCurrentContext());
    CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
    CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), currentPoint.x, currentPoint.y);
    CGContextStrokePath(UIGraphicsGetCurrentContext());
    drawImage.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    NSNumber *numx = [NSNumber numberWithFloat:currentPoint.x];
    NSNumber *numy = [NSNumber numberWithFloat:currentPoint.y];
    [xpoints insertObject:numx atIndex:[xpoints count]];
    [ypoint insertObject:numy atIndex:[ypoint count]];

    NSString *bundle = [[NSBundle mainBundle] pathForResource:@"Lines" ofType:@"plist"]; //5

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); //1
    NSString *documentsDirectory = [paths objectAtIndex:0]; //2
    path = [documentsDirectory stringByAppendingPathComponent:@"Lines.plist"];

    NSMutableDictionary *data = [[NSMutableDictionary alloc] initWithContentsOfFile:path];

    //here add elements to data file and write data to file
    int value = [xpoints count];

    [data setObject:[NSNumber numberWithInt:value] forKey:@"Array_count"];
    NSString *obj_str=[NSString stringWithFormat:@"%@,%@",numx,numy];
    NSString *key=[NSString stringWithFormat:@"%d",value];
    [data setObject:obj_str forKey:key];

    [data writeToFile:path atomically:YES];
    [data release];

    NSString *string = [NSString stringWithFormat:@"%f%@%f", lastPoint.x, @"-",lastPoint.y];
   // NSLog(@"Hello is %i",[xpoints count]);
    lblxy.text=string;

    NSString *string2 = [NSString stringWithFormat:@"%f%@%f", currentPoint.x, @"-",currentPoint.y];
   // NSLog(@"Hello is %i",[xpoints count]);
    lbllast.text=string2;

    lastPoint = currentPoint;

    mouseMoved++;

    if (mouseMoved == 10) {
        mouseMoved = 0;
    }

} 
```

此代码将 x 和 y 点保存到 plist，如第一个点保存到键 0 和值 x ，y 点，如 0-25,54 和 1-56,98 .....等。

保存代码工作完美......！，我从 plist 下面的代码加载 x 和 y 点：

```
 - (IBAction)btn_load:(id)sender {

        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); //1
        NSString *documentsDirectory = [paths objectAtIndex:0]; //2
        path = [documentsDirectory stringByAppendingPathComponent:@"Lines.plist"];

        drawImage.image =nil;

        NSMutableDictionary *data = [[NSMutableDictionary alloc] initWithContentsOfFile:path];

        //here add elements to data file and write data to file    
        int value;
        value = [[data objectForKey:@"Array_count"] intValue];

        CGFloat lastx;
        CGFloat lasty;

        for(int i=1;i<=value;i++)
        {
            NSString *key=[NSString stringWithFormat:@"%d",i];
            NSLog(@"This is from .plist %@", [data objectForKey:key]);

            NSString *my_points=[data objectForKey:key];
            NSArray *components = [my_points componentsSeparatedByString:@","];
            [[components objectAtIndex:0] floatValue];

            if(i==1)
            {
                lastx = [[components objectAtIndex:0] floatValue];
                lasty = [[components objectAtIndex:1] floatValue];
            }

            UIGraphicsBeginImageContext(self.view.frame.size);
            [drawImage.image drawInRect:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
            CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
            CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 5.0);
            CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 1.0, 1.0, 1.0, 1.0);
            CGContextMoveToPoint(UIGraphicsGetCurrentContext(),lastx , lasty);
            CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), [[components objectAtIndex:0] floatValue], [[components objectAtIndex:1] floatValue]);
            CGContextStrokePath(UIGraphicsGetCurrentContext());
            CGContextFlush(UIGraphicsGetCurrentContext());
            drawImage.image = UIGraphicsGetImageFromCurrentImageContext();
            UIGraphicsEndImageContext();
            lastx = [[components objectAtIndex:0] floatValue];
            lasty = [[components objectAtIndex:1] floatValue];
        }

} 
```

我的输出如下图：

![在此处输入图像描述](../Images/7a70f22ca8de5dd595ebf93b0fa31587.png)

我从 plist 输出加载 x 和 y 点如下：

![在此处输入图像描述](../Images/08d21a4e7501537b13ed8efef0f7a008.png)

我的问题是从 plist 加载绘制线不像最后一个 x 和 y 点问题..！

我想要输出完美的从 x 和 y 点绘制线..！

请帮助我的任何人都非常感谢..！

谢谢..！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T06:48:12.947

您没有保存“换行符”。属性列表可以包含数组。也许您应该在数组本身中收集每个“绘图”。此外，您没有保存颜色。尝试这个...

在 touchesBegin 中，您正在开始一个新的“绘图”，因此创建一个数组来保存该“绘图”的所有点。在 touchMove 中，添加到该数组。在 touchEnd 中，您已经完成了该操作，因此您可以将该绘图放入文件中，然后重新开始下一个“开始触摸”。

关键是您需要知道何时开始新的“绘图段”，以便您可以“移动”该点并再次开始绘图。

# sql - 在单个 django 模型中路由 NoSQL 和 SQL 支持的字段

> ID：10151470
> 
> 赞同：0
> 
> 时间：2012-04-14T06:10:01.530
> 
> 标签：sql, django, django-models, nosql

是否可以将单个模型中的字段路由到不同的数据库 NoSQL 和 SQL？如果没有，是否有模仿它的设计？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T06:20:44.787

我怀疑是否可以为单个模型的各个字段使用多个数据库。

Django 的多数据库文档可在此处获得[https://docs.djangoproject.com/en/dev/topics/db/multi-db/](https://docs.djangoproject.com/en/dev/topics/db/multi-db/)

# java - java 2d 游戏中的“JUMP”

> ID：10151477
> 
> 赞同：0
> 
> 时间：2012-04-14T06:11:03.120
> 
> 标签：java

我有这段代码，我想在java 2d游戏中启动一个跳转，问题是我的对象没有去任何地方，它只是呆在那里......我希望我的对象在我按下键和程序显示时跳转我的图像上下移动..我试图通过简单的 repaint() 方法 CODE:::: 来做到这一点

```
 public void actionPerformed(ActionEvent e) {
    if(hero.jump()==1){
    int jumpheight=40,j=0;
    while(j<jumpheight){
        hero.y--;             \\changing the y position (up)..
            try {
            Thread.sleep(100);
        } catch (InterruptedException e1) {}
        repaint(); 
        j++;
    }
    j=0;
    hero.jump1=0;
    while(j<jumpheight){
        hero.y++;               \\changing the y position (down)..
            try {
            Thread.sleep(100);
        } catch (InterruptedException e1) {}
        repaint(); 
        j++;
    }
    }
    else {
    hero.move();
    repaint();  
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T07:05:04.777

您需要将位置更改移动到另一个线程中。密钥处理和重绘现在在您现在拥有的代码中的同一个线程中处理。当您调用*repaint()*时，会安排重绘，但直到事件线程再次“空闲”时才会执行，但由于您有一个循环（带睡眠），它永远不会空闲，而是您的重绘将在您的循环完成后发生（而你的英雄又回到了原来的位置）。

# php - 在 colorbox iframe 中定义包含页面

> ID：10151480
> 
> 赞同：0
> 
> 时间：2012-04-14T06:11:38.260
> 
> 标签：php, jquery

我在我的包含/外部页面顶部放置了任何行以防止远程文件包含。此检查包含文件/外部加载仅在我的索引页面中。现在，当我使用 iframe 方法在彩盒灯箱中加载此（外部页面）时，这不起作用，我看到空白页。如果我删除这条线有效！如何解决这个问题？反正 ？

顶部 php 页面：

```
if (!defined('INDEX_ROOT') || (defined('INDEX_ROOT') && INDEX_ROOT != 'true')) die(); 
```

html & 彩盒：

```
<script>$(document).ready(function(){ $(".iframe").colorbox({ iframe:true,scrolling:false,width:665,height:600});});</script>

<a class="iframe" href="test.php">load frame</a> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T09:37:35.530

这应该是您系统的结构

`config.php`

```
//config.php
<?php

const INDEX_ROOT = "INDEX_ROOT";

?> 
```

`protected.php`

```
<?php

if (! defined ( 'INDEX_ROOT' ) || (defined ( 'INDEX_ROOT' ) && INDEX_ROOT != 'true')) {
    die ();
}

function someFunction(){
    echo " Protected" ;
}   

?> 
```

`sampleA.php` // 这会起作用

```
<?php

require 'config.php';
echo "Hello World"

?> 
```

`sampleB.php` // 这会起作用

```
<?php

require 'config.php';
require 'protected.php';

echo "Hello Sample B" , someFunction() ;

?> 
```

`sampleC.php` //**这行不通**

```
<?php

require 'protected.php';
echo "Hello Sample C" , someFunction() ;

?> 
```

# c++ - 指定默认参数 C++

> ID：10151484
> 
> 赞同：3
> 
> 时间：2012-04-14T06:12:12.033
> 
> 标签：c++, arguments, default-arguments

我写了以下课程

```
class worker
{
   int action;
   int doJob(int type,int time = 0);
   public:
   int call();
} 
```

而函数 doJob 就像

```
int worker::doJob(int type,int time = 0)
{
          ....code here
} 
```

当我编译时，我收到以下错误

```
 error: the default argument for parameter 1 of 'int worker::doJob(int, int)' has not yet been parsed 
```

当然这是默认参数规范的问题。那么原型有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T06:13:28.320

您不需要重新定义默认值

`int worker::doJob(int type,int time = 0)`

只能是

`int worker::doJob(int type,int time)`

因为您不需要多次定义参数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-14T06:13:50.993

将默认值放在声明中（即`class worker`在您的示例中），但不在定义中，例如代码：

```
 int worker::doJob(int type,int time)
 {  /* your code here */ } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T06:15:12.953

`int worker::doJob(int type,int time = 0)`给你一个错误，你应该只声明一次你的默认参数。

# sql-server-2008 - SQL Server 2008 需要像对 XML 列的交叉表查询一样吗？

> ID：10151494
> 
> 赞同：-2
> 
> 时间：2012-04-14T06:14:25.097
> 
> 标签：sql-server-2008, xquery-sql

```
<abc id="abc1">
  <def id="def1">
    <ghi att='ghi1'>
      <mn id="0742d2ea" name="RF"  dt="0" df="3" ty="0" />
      <mn id="64d9a11b" name="CJ"  dt="0" df="3" ty="0" />
      <mn id="db72d154" name="FJ"  dt="2" df="4" ty="0" />
      <mn id="39af9fa1" name="BS"  dt="0" df="2" ty="0" />
    </ghi>
    <jkl  att='jkl1'>
       <mn id="0742d2ea" name="RF" dt="1" gl="19" />
       <mn id="64d9a11b" name="CJ" dt="0" gl="6" />
       <mn id="db72d154" name="FJ" dt="0" gl="0" />
       <mn id="39af9fa1" name="BS" dt="0" gl="12" />
       <mn id="ac4f566f" name="DJ" dt="0" gl="9" />
       <mn id="4bf3ba2f" name="RP" dt="0" gl="16" />
       <mn id="db1af021" name="SC" dt="1" gl="10" />
       <mn id="c4c93a2d" name="DN" dt="1" gl="15" />
    </jkl>
  </def>
</abc> 
```

我需要这个输出。这在 SQL Server 2008 中可行吗？

```
id          name ghiDT  ghiDF   ghiTY   jklDT   jklGL
0742d2ea    RF  0   3   0   1   19
64d9a11b    CJ  0   3   0   0   6
db72d154    FJ  2   4   0   0   0
39af9fa1    BS  0   2   0   0   12
ac4f566f    DJ  0   0   0   0   9
4bf3ba2f    RP  0   0   0   0   16
db1af021    SC  0   0   0   1   10
c4c93a2d    DN  0   0   0   1   15 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T07:45:23.637

不太了解交叉表适用于何处。您必须单独查询每个组中的节点，`nodes()`以分解 XML。然后你可以做一个`full outer join`on`id`和 use`coalesce`来确保你得到和列的第一个非`null`值。您还应该使用 coalesce 来获取 a而不是其他列。`id``name``0``null`

[SE-数据](https://data.stackexchange.com/stackoverflow/query/66767)

# php - 如何增加php文件大小上传大小限制

> ID：10151497
> 
> 赞同：0
> 
> 时间：2012-04-14T06:14:58.797
> 
> 标签：php, html, wcf

我通过 nusoap 类在 php 中使用 wcf 服务。我的要求是上传最小文件大小为 10MB，最大文件大小为 32MB。我更改了 PHP.ini、PHP.ini-developer 和 PHP.ini-production 的 max_input_time、upload_max_filesize、post_max_size 属性。但它仍然没有响应。

该页面支持最大 254kb 的文件大小，但如果文件大小超过页面执行不会长时间停止并显示错误**最大页面执行时间超过 30 秒**

如何解决问题。我搜索了很多，但仍然没有运气。

谢谢，
阿维安什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T06:33:44.003

您的带宽没有赶上

```
max_execution_time = 30
max_input_time = 60 
```

将这些值更改为更高。

# android - 将 android 应用程序中的文本数据保存为众多列表视图

> ID：10151504
> 
> 赞同：0
> 
> 时间：2012-04-14T06:15:51.087
> 
> 标签：android, saving-data

我想将用户输入的一些文本数据保存为列表视图..但仍然不知道该怎么做..请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T06:26:37.440

好吧，有几种方法可以做到这一点。

1.  将数据作为原始文本保存到文件 [http://developer.android.com/reference/java/io/FileWriter.html](http://developer.android.com/reference/java/io/FileWriter.html)
2.  创建数据对象并将它们序列化为二进制文件。
3.  将数据存储到数据库中（可能是最佳选择，取决于您要执行的操作）。

[http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

你能解释更多你的应用程序做什么，那么可能会有一个准确的解决方案来解决你的困惑。还可以尝试发布一些代码，这将使人们相信您已经完成了一些工作并陷入了未知领域。

# vb.net - 我的应用程序是否需要 .NET 框架 3.5？

> ID：10151506
> 
> 赞同：-1
> 
> 时间：2012-04-14T06:16:29.280
> 
> 标签：vb.net, text

我正在使用 Visual Basic 2008 Express Edition，现在我正在创建一个文本编辑器。它在我的系统上运行得很好，但是当我尝试在我朋友的系统上运行它时，我收到了这个错误：

```
See the end of this message for details on invoking
just-in-time (JIT) debugging instead of this dialog box.

************** Exception Text **************
System.IO.FileNotFoundException: Could not load file or assembly 'System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' or one of its dependencies. The system cannot find the file specified.
File name: 'System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'
   at WindowsApplication2.frmeditor.getEnglish(String StrSearch)
   at WindowsApplication2.frmeditor.EeditorCMS_Opening(Object sender, CancelEventArgs e)
   at System.Windows.Forms.ToolStripDropDown.OnOpening(CancelEventArgs e)
   at System.Windows.Forms.ToolStripDropDown.SetVisibleCore(Boolean visible)
   at System.Windows.Forms.ContextMenuStrip.SetVisibleCore(Boolean visible)
   at System.Windows.Forms.ToolStripDropDown.Show(Control control, Point position)
   at System.Windows.Forms.ContextMenuStrip.ShowInternal(Control source, Point location, Boolean isKeyboardActivated)
   at System.Windows.Forms.Control.WmContextMenu(Message& m, Control sourceControl)
   at System.Windows.Forms.Control.WmContextMenu(Message& m)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.TextBoxBase.WndProc(Message& m)
   at System.Windows.Forms.RichTextBox.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)

WRN: Assembly binding logging is turned OFF.
To enable assembly bind failure logging, set the registry value [HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) to 1.
Note: There is some performance penalty associated with assembly bind failure logging.
To turn this feature off, remove the registry value [HKLM\Software\Microsoft\Fusion!EnableLog].

************** Loaded Assemblies **************
mscorlib
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.42 (RTM.050727-4200)
    CodeBase: file:///C:/WINDOWS/Microsoft.NET/Framework/v2.0.50727/mscorlib.dll
----------------------------------------
UrduEditor
    Assembly Version: 1.0.0.0
    Win32 Version: 1.0.0.0
    CodeBase: file:///C:/Documents%20and%20Settings/M%20Bilal/Desktop/New%20folder/UrduEditor.exe
----------------------------------------
Microsoft.VisualBasic
    Assembly Version: 8.0.0.0
    Win32 Version: 8.0.50727.42 (RTM.050727-4200)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/Microsoft.VisualBasic/8.0.0.0__b03f5f7f11d50a3a/Microsoft.VisualBasic.dll
----------------------------------------
System.Windows.Forms
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.42 (RTM.050727-4200)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System.Windows.Forms/2.0.0.0__b77a5c561934e089/System.Windows.Forms.dll
----------------------------------------
System
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.42 (RTM.050727-4200)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System/2.0.0.0__b77a5c561934e089/System.dll
----------------------------------------
System.Drawing
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.42 (RTM.050727-4200)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System.Drawing/2.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll
----------------------------------------
System.Runtime.Remoting
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.42 (RTM.050727-4200)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System.Runtime.Remoting/2.0.0.0__b77a5c561934e089/System.Runtime.Remoting.dll
----------------------------------------
System.Configuration
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.42 (RTM.050727-4200)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System.Configuration/2.0.0.0__b03f5f7f11d50a3a/System.Configuration.dll
----------------------------------------
System.Xml
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.42 (RTM.050727-4200)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System.Xml/2.0.0.0__b77a5c561934e089/System.Xml.dll
----------------------------------------
CollapsibleGroupBox
    Assembly Version: 1.0.4486.29379
    Win32 Version: 1.0.4486.29379
    CodeBase: file:///C:/Documents%20and%20Settings/M%20Bilal/Desktop/New%20folder/CollapsibleGroupBox.DLL
----------------------------------------
ExtendedRichTextBox
    Assembly Version: 1.0.0.0
    Win32 Version: 1.0.0.0
    CodeBase: file:///C:/Documents%20and%20Settings/M%20Bilal/Desktop/New%20folder/ExtendedRichTextBox.DLL
----------------------------------------
Interop.SpeechLib
    Assembly Version: 5.4.0.0
    Win32 Version: 5.4.0.0
    CodeBase: file:///C:/Documents%20and%20Settings/M%20Bilal/Desktop/New%20folder/Interop.SpeechLib.DLL
----------------------------------------

************** JIT Debugging **************
To enable just-in-time (JIT) debugging, the .config file for this
application or computer (machine.config) must have the
jitDebugging value set in the system.windows.forms section.
The application must also be compiled with debugging
enabled.

For example:

<configuration>
    <system.windows.forms jitDebugging="true" />
</configuration>

When JIT debugging is enabled, any unhandled exception
will be sent to the JIT debugger registered on the computer
rather than be handled by this dialog box. 
```

操作系统是带有 .NET 框架 2.0 的 Windows XP。

我不想使用 .NET framework 3.5，因为它的大小超过 200 MB。我的代码如下。这段代码真的需要 .NET 框架 3.5 吗？

```
Public Sub ClipboardEnglish(ByVal StrSearch As String)
    If IO.File.Exists(Application.StartupPath & "\eng.txt") Then
        If NotifyIcon1.Visible = True Then
            Dim words() As String = IO.File.ReadAllLines(Application.StartupPath & "\eng.txt")
            Dim startwiths() As String = (From word In words Where LCase(word).StartsWith(LCase(StrSearch & "   ")) Select word).ToArray
            For Each startwith In startwiths
                Dim meanings() As String
                startwith = Replace(LCase(startwith), LCase(StrSearch) & "  ", "")
                meanings = Replace(startwith & ",", ", ", ",").Split(New Char() {","c})
                For Each mean In meanings
                    If Not mean = " " AndAlso Not mean = "" Then
                        If mean.Length > 100 Then
                            mean = mean.Substring(0, 100) & "..."
                        End If
                        If Not TSMIurdu.DropDownItems.Count = TSEnglishcount.Text Then
                            TSMIurdu.DropDownItems.Add(mean)
                        End If
                    End If
                Next
            Next
            If TSMIurdu.DropDownItems.Count > 0 Then
                ContextMenuStrip1.Show(Cursor.Position)
                ContextMenuStrip1.Show()
            End If
        End If
    Else
        MsgBox("انگریزی ڈکشنری دستیاب نہیں", MsgBoxStyle.Critical, "خرابی")
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T08:21:49.023

> Win32 版本：2.0.50727.42 (RTM.050727-4200)

修订版 42 是 .NET 2.0 的原始 RTM 版本。System.Core Version=3.5.0.0 直到 .NET 3.5 才可用。你的朋友至少没有它，因为他非常坚持*从不*使用 Windows 更新。与他通常从 Windows Update 获得的 .NET 3.0、3.5 和 3.5 SP1 更新相比，自修订版 42 以来发布了许多稳定性和安全补丁。上周又发布了一个。永远不要接受他机器上的任何可执行文件，它们很可能有猫腻。

# javascript - Javascript 中未计算小数点后的值

> ID：10151512
> 
> 赞同：2
> 
> 时间：2012-04-14T06:17:21.760
> 
> 标签：javascript, decimal, point

大家好，我正在使用 Javascript 计算文本框的一些值。计算仅适用于小数位前的值，但是当我在一个点之后输入值时，它对结果没有任何影响。这是我的 JS 代码和其中的公式

**更新**

```
var pkrusd;
pkrusd = parseFloat(document.getElementById('txtpkrusd').value, 10); 
var ratelb;
ratelb = parseFloat(document.getElementById('txtRatelb').value, 10);
//Per 10 lb
var pertenlb=roundNumber(((pkrusd*ratelb)/400)*10,2);
parseFloat(document.getElementById('txtpertenlb').value)=addCommas(pertenlb);
//PEr 100 lb
var perhundlb=roundNumber(pertenlb*10,2);
parseFloat(document.getElementById('txtper100lb').value)=addCommas(perhundlb); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T06:20:53.383

您应该使用[`parseFloat`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseFloat)而不是`parseInt`. `int`in是“integer”的`parseInt`缩写，意思是“整数”。

# jquery - jquery自动完成在rails中的ajax加载表单中不起作用

> ID：10151517
> 
> 赞同：1
> 
> 时间：2012-04-14T06:17:58.620
> 
> 标签：jquery, ruby-on-rails, ajax, coffeescript

在我的 Rails 应用程序中，我通过发送 ajax 请求来加载撰写邮件表单

我的 compose.js 文件的代码是

> $('#main').html("<%= j render :partial =>"smails/form" %>");

现在在我的撰写表单中，我使用 jquery 自动完成插件实现了一个自动完成字段，当我在没有 ajax 的情况下加载表单时工作正常。我认为这是因为我正在使用**document.ready**，但我不知道如何使用其他任何东西。

我的 autocomlete.js.coffee 文件的代码

```
$(document).ready ->
  split = (val) ->
    val.split /,\s*/
  extractLast = (term) ->
    split(term).pop()
  $('#smail_receiver').autocomplete
             source: "/autocomplete/users"
             search: ->
               term = extractLast(@value)
               false  if term.length < 2
             focus: ->
               false
             select: (event,ui) ->
               terms = split(@value)
               terms.pop()
               terms.push ui.item.value
               terms.push ""
               @value = terms.join(",")
               false 
```

我也试过document.on

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T06:42:59.237

使用“on”绑定可能有更好的方法，但您可以调用您的：

```
$('#smail_receiver').autocomplete 
```

在创建表单的 ajax 调用的成功方法中。您也可以在表单呈现后将其放入您的 compose.js 文件中。

如上所述，可能有一个更整洁的解决方案，但这可以解决问题。

# git - 管理框架和两个项目代码

> ID：10151518
> 
> 赞同：0
> 
> 时间：2012-04-14T06:18:00.160
> 
> 标签：git

我有两个项目和一个框架。我的框架现在在 bitbucket 上。我的框架处于开发模式。我每天都承诺和推动。

我也将使用 bitbucket 来控制这两个项目。我已经有 3 个回购

fw prjA prjB

prjA 和 prjB 的每个 repo 都会有一个 fw 的副本。我如何为每个项目设置可以提取新版本的框架并单独提交？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T06:59:15.490

您可以将您的框架项目设置为您的`prja`和`prjb`项目中的子模块。

来自[git 书](http://book.git-scm.com/5_submodules.html)：

> Git 的子模块支持允许存储库作为子目录包含外部项目的签出。

从根目录中`prja`，`prjb`只需执行以下操作：

```
git submodule add git://path/to/your/fw.git path/to/fw 
```

第一个路径是您的`fw`git 存储库所在的位置，第二个路径是您希望`fw`在使用它的项目中进入的位置。

[来自Pro Git 书籍的](http://progit.org/book/ch6-6.html)更多信息：

> 经常发生的情况是，在处理一个项目时，您需要使用其中的另一个项目。也许它是第三方开发的库，或者您正在单独开发并在多个父项目中使用。在这些场景中会出现一个常见问题：您希望能够将两个项目视为独立的，但仍然能够在另一个项目中使用其中一个。[...] Git 使用子模块解决了这个问题。子模块允许您将 Git 存储库保留为另一个 Git 存储库的子目录。这使您可以将另一个存储库克隆到您的项目中并保持您的提交分开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T06:41:22.737

您不需要 3 个存储库。我认为`prjA`并且`prjB`只是为了测试你的框架。您可以尝试创建 2 个单独的分支，一个用于 prjA，一个用于 prjB。让框架成为你的`master`分支。如果您愿意，您可以在本地维护同一个 repo 的 3 个副本（用于 prjA、prjB 和 fw 开发）。任何时候你提交到你的`master`分支，你都可以`rebase prjA and prjB`.

# android - 可以从列表中的数据在 Android 列表视图项目上设置项目/视图样式吗？

> ID：10151519
> 
> 赞同：1
> 
> 时间：2012-04-14T06:18:06.110
> 
> 标签：android, listview

我有一个从 sqlite 数据库填充的列表，其数据值范围从 -1 到 1。有没有办法将负项的背景颜色设置为红色，将正项设置为绿色？通过在项目视图中添加一个绿色向上箭头表示正值和一个红色向下箭头图像表示负值，可以产生类似的效果。另一个示例可能是一个待办事项列表，其中包含按优先级值进行颜色编码的项目。在 ios 中，这将发生在 cellforrowat indexpath 中，而在 windows phone/silverlight 中，这将通过将依赖属性绑定到数据来完成。这可以通过Android实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T06:23:39.557

这在 Android 上很容易做到。每当列表出现时，每个列表项都会更新，ListAdapter 中有一个 getView 方法，您可以在其中设置列表项的值。

因此，您将有一个 list_item.xml 布局，仅用于列表项。在自定义 ListAdapter 中，您可以在 getView() 方法中设置背景颜色，您可以在其中设置膨胀（视图）list_item。设置背景（）。

检查这些链接： [http](http://techdroid.kbeanie.com/2009/07/custom-listview-for-android.html) ://techdroid.kbeanie.com/2009/07/custom-listview-for-android.html http://saigeethamn.blogspot.com/2010/04/custom-listview-android-developer。 html

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T06:24:40.457

像这样尝试..在getView方法中

```
 @Override
public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View rowView = inflater.inflate(R.layout.rowlayout, parent, false);
    TextView textView = (TextView) rowView.findViewById(R.id.label);
     ImageView imageview= (ImageView) rowView.findViewById(R.id.img);
    textView.setText(values[position]);
    String s = values[position];
    if (s.startsWith("-")) {
        imageView.setImageResource(R.drawable.uparrow);
   //or set background colour of those views here..
    } else {
        imageView.setImageResource(R.drawable.downarrow);
    }

    return rowView;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T06:23:36.023

在适配器中的 getview 方法中，您可以检查该值并在创建每个项目时以编程方式更改其颜色或可绘制对象。

# spring-mvc - 根据 URL 选择 Spring MVC 布局

> ID：10151528
> 
> 赞同：0
> 
> 时间：2012-04-14T06:19:05.330
> 
> 标签：spring-mvc, apache-tiles

我正在寻找一种基于某些 bean 中设置的某些值动态加载布局的方法。将 Spring MVC 与 apache 瓦片一起使用。

在我的 views.xml 中，我通常会有类似的内容：

```
<definition extends="mytemplate" name="home">
    <put-attribute name="title" value="Home Page Title"/>
    <put-attribute name="heading" value="Home"/>
    <put-attribute name="body" value="/WEB-INF/pages/home.jspx"/> 
    <put-attribute name="side" value="/WEB-INF/pages/side.jspx"/> 
</definition> 
```

然后在 mytemplate.jspx 中会有代码定义模板的外观。

我正在寻找的是一种根据某些 URL 逻辑更改 mytemplate 的方法（检查传入的 url 是 www.example1.com 还是 www.example2.com），通过 RequestInterceptor 拦截 url，在 ThemeLayoutBean 中设置一个值和然后根据是url1还是url2，有mytemplate1和mytemplate2，每一个都有完全不同的布局。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T04:47:05.057

Apache Tiles 具有高级视图准备器，这将使我能够以稍微不同的方式做我需要做的事情。[http://tiles.apache.org/framework/tutorial/advanced/preparer.html](http://tiles.apache.org/framework/tutorial/advanced/preparer.html)

# php - md5 salt hash 在数据库中找不到相等的条目

> ID：10151534
> 
> 赞同：1
> 
> 时间：2012-04-14T06:21:47.977
> 
> 标签：php, mysql

现在我正在尝试检查 MysSql 数据库中的密码是否相同。但我失败了，我不明白为什么。

```
$username = 'blablabla';
$password = 'blablabla.';
$salt = 'blablabla';
$new = md5($password.md5($salt));
echo($new);
$q=mysql_query("SELECT * FROM mdl_user WHERE username = '$username' AND password = '$new'");
while($e=mysql_fetch_assoc($q))
    $output[]=$e;
print(json_encode($output)); 
```

在定义盐字的配置文件中，我使用了与上面相同的内容。

已编辑：是否可以从此代码中获取哈希算法？

```
function validate_internal_user_password($user, $password) {
global $CFG; 
if (!isset($CFG->passwordsaltmain)) { 
$CFG->passwordsaltmain = ''; 
} 
$validated = false; 
if ($user->password === 'not cached') { 
// internal password is not used at all, it can not validate 
} else if ($user->password === md5($password.$CFG->passwordsaltmain) 
    or $user->password === md5($password) 
    or $user->password === md5(addslashes($password).$CFG->passwordsaltmain) 
    or $user->password === md5(addslashes($password))) { 
// note: we are intentionally using the addslashes() here because we 
//       need to accept old password hashes of passwords with magic quotes 
$validated = true; 
} else { 
for ($i=1; $i<=20; $i++) { //20 alternative salts should be enough, right? 
    $alt = 'passwordsaltalt'.$i; 
    if (!empty($CFG->$alt)) { 
        if ($user->password === md5($password.$CFG->$alt) or $user->password === md5(addslashes($password).$CFG->$alt)) { 
            $validated = true; 
            break; 
        } 
    } 
} 
} 
if ($validated) { 
// force update of password hash using latest main password salt and encoding if needed 
update_internal_user_password($user, $password); 
} 
return $validated; 
```

**编辑** 我试过这个代码：

```
$username = 'admin';
$password = 'Vidsodis25.'+'Karolina';
$new = md5($password);
echo($new);
$q=mysql_query("SELECT * FROM mdl_user WHERE password = '$new'");
while($e=mysql_fetch_assoc($q))
    $output[]=$e;
print(json_encode($output)); 
```

数据库使用相同的盐词 Karolina。但是还是找不到正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T07:23:25.300

正如其他人在评论中所说，要么：

1.  密码/名称/盐不正确（输入错误）
2.  哈希不正确（生成方式不同或使用不同的盐）
3.  给定用户的哈希值不正确（例如，不匹配、无记录等）

现在，完成散列的方式看起来......错误。盐的想法是*阻止*彩虹表攻击，这使得攻击者不得不依靠蛮力来“破解”给定的密码。

无论如何，对于*每个*保存的新密码哈希，生成一个新的*随机*盐值（例如，128 位或更多）。然后使用这种独一无二的*随机数*在密码被散列*之前*对密码进行加盐。然后将哈希**和**盐保存在一起（它们通常组合成一个值，但如果它们位于不同的列中也可以）。

因此，要确保密码有效：

1.  *先*找到代表用户的行，提取hash**和**salt
2.  使用盐从密码生成哈希；如果哈希/盐被保存为组合值，则根据需要首先将其分开
3.  验证生成的哈希和存储的哈希

也就是说，查询可能*不*应该搜索`username = '$username' AND password = '$new'"`（`password`真正应该调用的地方`hash`或类似的地方），因为盐*需要可用于*再次生成正确的散列。在上面的代码片段中，它使用 20 种不同的预设盐做一些猴子业务。这不是正确的方法，并且要求在哈希生成中使用每个*潜在*的盐，以便可以找到“正确的哈希”。（翻译成`select`帖子中的，这将需要多达 20 次不同的执行和/或使用`in`或类似的东西。）

此外，请勿将 MD5 用于密码哈希。*蛮力太容易*了。也不要使用 SHAx；它仍然太快，因为它也不是为此目的而设计的。使用类似的东西`bcrypt`or `scrypt`。如果您确实想要“服务器盐”（这是一个*很好的附加层*），请使用 HMAC。这不能代替普通的盐。哦，*请不要使用容易注入 SQL 的代码*！

我会使用现有的经过严格审查的库:)

快乐编码。

# java - jolokia 和 jmxtrans 和有什么不一样？什么时候选择一个而不是另一个？

> ID：10151536
> 
> 赞同：14
> 
> 时间：2012-04-14T06:21:59.117
> 
> 标签：java, jmx

我正在寻找一个 JMX 查询工具。我遇到过 jolokia 和 jmxtrans，它们都支持基于 JSON 的查询。JMXtrans 拥有我认为 Jolokia 中缺少的监控工具的编写者。我用谷歌搜索，但我没有得到太多比较两者的信息。但我已经阅读了这两种工具的正面博客文章。如果有人之前使用过这些，请分享您的经验...

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-21T05:58:25.490

I'm the author of jmxtrans. I considered Jolokia before I developed jmxtrans. I choose to develop with jmxtrans because I had a different usecase in mind.

Jolokia runs as a war in Tomcat. It is similar to jmxtrans in that it allows you to query a JMX server, but that is about where the similarity ends. You would need to implement the rest of jmxtrans on top of Jolokia in order to have feature parity.

On the other hand, jmxtrans is standalone with no requirements on Tomcat. My target audience is the netops/devops role. It is configured with a relatively simple JSON based structure so it doesn't require an engineering degree to configure and use it.

The thought is that you use jmxtrans to continuously monitor services which expose statistics via jmx. You use jmxtrans to 'transform' data from jmx to whatever output format you want. Generally, devops people want to integrate their JVMs with some sort of monitoring solution like Graphite/Ganglia so I provided output writers for those tools.

jmxtrans is also very smart about how it does queries against jmx servers and there is a bit of optimization in there for that. There is also a lot of work to allow you to do things like parallelize requests to many servers to enable to you scale jmxtrans to continuously query hundreds of servers with a single jmxtrans instance.

I hope that clarifies things a bit. If you have any specific questions, I'm happy to answer them.

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-04T09:03:20.427

确实，jmxtrans 和 Jolokia 的侧重点不同。Jmxtrans 是一个带有调度程序的完整监控解决方案，它定期查询 JMX 请求并将结果发送到像石墨或 rrdtool 这样的后端。它使用标准 JSR-160（基于 RMI）通信来查询支持 JMX 的 Java 服务器

另一方面，[Jolokia是一个 HTTP/JSON-JMX 适配器，它允许非 Java 客户端轻松访问，并添加了一些纯 JSR-160 实现所不具备的独特功能。](http://www.jolokia.org)为了集成到监控平台中，还需要另一个软件。对于 Nagios，有[Jmx4Perl](http://www.jmx4perl.org)，它提供了一个功能齐全的 Nagios 插件来查询 Jolokia 代理。

由于我是 Jolokia 的作者，让我强调一下 Jolokia 的一些亮点

*   许多请求可以作为单个批量请求一次发送。这允许通过一次 HTTP 转身查询数百个属性。这在大型环境中确实产生了巨大的差异。
*   由于 HTTP Jolokia 的使用允许跨防火墙边界轻松查询（使用标准 JMX 连接器时这是一场噩梦）
*   使用纯 XML 策略文件可以轻松实现细粒度授权
*   代理不仅适用于 Tomcat 或任何其他 Java EE 容器，还适用于任何 Java 6 应用程序（例如 ActiveMQ 或 Camel）
*   Jmx4Perl 附带了一套不错的命令行工具（例如，基于 readline 的 JMX shell 与上下文相关的命令完成）。
*   可以从 Perl、Javascript、Python 等访问库。
*   .... 欲了解更多信息，请参阅[www.jolokia.org](http://www.jolokia.org)

总而言之，当您需要基于 JSR-160 远程处理的完整监控解决方案（但是，您也可以使用 Nagios 和 check_jmx4perl）时，我认为您应该使用 jmxtrans，而当您需要克服 JSR-160 限制或可以从中受益时，您应该使用 Jolokia以其独特的功能。甚至可以想象将 Jolokia 集成到 jmxtrans 中，以便与要监控的服务器进行通信，然后通过 JSON/HTTP 而不是 JSR-160 RMI（也许这也阐明了差异焦点和支持的用例）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T21:07:39.763

让我再放一个项目 - [https://github.com/dimovelev/metrics-sampler](https://github.com/dimovelev/metrics-sampler) 它使用正则表达式和变量替换查询 JMX 数据，还支持 JDBC 查询作为指标源（主要用于监控我们的 oracle db 统计信息）和 mod_qos 用于 apache mod_qos 的东西。我们只需要石墨作为输出，这是它目前支持的唯一输出。

顺便说一句，恕我直言，JMX 端口对防火墙有问题，只是因为热点在启动时选择了一个随机的临时端口。使用 jrockit 可以使用标准 jvm 选项指定（到与注册表相同的端口）。要在热点上执行此操作，您需要自己编写代码（或重用代码，例如来自 tomcat jmx 连接器的代码）。好的部分是可以将两个端口设置为相同的值，因此只需要一个防火墙规则。

干杯迪莫

# asp.net - 如何恢复 Visual Studio 2008 sp1 工具包中的 Ajax 扩展选项卡？

> ID：10151537
> 
> 赞同：1
> 
> 时间：2012-04-14T06:22:05.780
> 
> 标签：asp.net, visual-studio-2008, ajaxcontroltoolkit

大家好，我不小心删除了工具包中的 ajax 扩展选项卡，因为我认为它是 ajax 控制工具包选项卡。你能帮我恢复工具箱中旧的 ajax 扩展选项卡吗？我尝试重置工具箱，它工作但有很多控件在 ajax 扩展窗格中重复，所以我再次删除它。每次我尝试恢复它时，都会重复相同的控件。此问题的任何解决方法？我只需要 ajax 扩展选项卡中的一组项目。请帮忙 ..

# email - Joomla 扩展，JomSocial：在注册时删除欢迎电子邮件

> ID：10151540
> 
> 赞同：0
> 
> 时间：2012-04-14T06:22:39.140
> 
> 标签：email, joomla, registration

在 Joomla 上！2.5.4 我正在使用 JomSocial 2.6.0 扩展。寻找发送第一封注册通知电子邮件“包含用户名+密码的欢迎电子邮件”的代码，以便我可以将其删除。

目前注册时发送了两封电子邮件，第一封包含用户名和密码，第二封包含验证链接。但是我认为有两封电子邮件是完全没有必要的。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:47:46.757

我从 com_community/controllers/register.php 找到了代码

```
$this->_sendEMail('registration_uncomplete', $tmpUser, $password); 
```

将其设为空是安全的还是一个好主意？

```
//$this->_sendEMail('registration_uncomplete', $tmpUser, $password); 
$var = NULL; 
```

似乎工作...

# javascript - 网络爬虫开发中的问题

> ID：10151547
> 
> 赞同：0
> 
> 时间：2012-04-14T06:24:01.857
> 
> 标签：javascript, xss, web-scraping, jsoup

我想开发一个平台，用户可以在其中输入 URL，然后我的网站将以`iframe`. 现在用户只需右键单击即可修改他的网站，我将为他提供“删除此元素”、“复制此元素”等选项。我快结束了。许多网站都可以完美打开，`iframe`但对于一些网站，出现了一些错误。我无法确定原因，因此寻求您的帮助。

我已经解决了其他问题，例如 XSS 问题。
这是我遵循的过程：-
使用 JavaScript 并将请求发送到我的 Java 服务器，该服务器连接到用户指定的 URL 并获取 HTML，然后使用 Jsoup HTML 解析器将相对 URL 转换为绝对 URL，然后保存HTML 到我的 Java 磁盘。然后我将保存的 HTML 渲染到我的`iframe`.

有什么地方不对吗？
一些网站运行良好，但有些则不然。

例如：-
当我试图打开[http://www.snapdeal.com](http://www.snapdeal.com)它给了我 `Uncaught TypeError: Cannot read property 'paddingTop' of undefined` 错误。我不明白为什么会这样。。

**更新** 我真的很想知道这是如何实现的？@ [http://www.proxywebsites.in/browse.php?u=Oi8vd3d3LnNuYXBkZWFsLmNvbQ%3D%3D&b=13&f=norefer](http://www.proxywebsites.in/browse.php?u=Oi8vd3d3LnNuYXBkZWFsLmNvbQ%3D%3D&b=13&f=norefer)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T06:28:30.460

2期，随便挑一个：

*   您的服务器端代理代码包含错误
*   许多网站要么有明确的帧中断代码，要么至少期望是顶级帧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T06:34:36.423

我的代理服务器端代码：-

```
DateFormat df = new SimpleDateFormat("ddMMyyyyHHmmss");
    String dirName = df.format(new Date());

    String dirPath = "C:/apache-tomcat-7.0.23/webapps/offlineWeb/" + dirName;
    String serverName = "http://localhost:8080/offlineWeb/" + dirName;

    boolean directoryCreated = new File(dirPath).mkdir();
    if (!directoryCreated) 
        log.error("Error in creating directory");

    String html = Jsoup.connect(url.toString()).get().html();
    doc = Jsoup.parse(html, url);

    links = doc.select("link");
    scripts = doc.select("script");    
    images = doc.select("img");

for (Element element : links) {
        String linkHref = element.attr("abs:href");
        if (linkHref != "") {
            element.attr("href", linkHref);
        }
}

for (Element element : scripts) {
    String scriptSrc = element.attr("abs:src");
    if (scriptSrc != "") {
        element.attr("src", scriptSrc);
    }
}

for (Element element : images) {
    String imgSrc = element.attr("abs:src");
        if (imgSrc != "") {
            element.attr("src", imgSrc);
            log.info(imgSrc);
        }
} 
```

现在我只是返回我保存我的html文件的路径这就是我的服务器代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T08:47:41.103

你可以再尝试一件事。在您的代理脚本中，您将网页保存在磁盘上，然后加载到 iframe 中。我认为不要在 iframe 中加载您保存在磁盘上的页面，而是尝试在浏览器中打开该页面。所有那些限制其页面加载到 iframe 的站点现在都将被打开而不会出现任何错误。试试这个，我认为这是一项工作

# uml - Eclipse 中的 UML 插件

> ID：10151551
> 
> 赞同：2
> 
> 时间：2012-04-14T06:24:31.313
> 
> 标签：uml

请告知我可以安装在我的 ecliipse(indigo) 中的插件，用于从现有代码生成 uml 和序列图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T16:23:29.010

我个人最喜欢的是[http://objectaid.com/](http://objectaid.com/)

它可以快速将 java 类可视化为 UML，还有用于序列图的商业工具

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-16T08:40:51.237

使用 Eclipse Indigo 的 Java 最佳 UML 是 EclipseUML Omondo，但不是免费的而且非常昂贵。

你今天没有任何其他的靛蓝工具可以完成这项工作。其他一些工具说他们可以做到，但我从未能够安装它们或成功地将简单方法反转为序列图！

# mysql - 有没有一种简单的方法可以直接将基于 Web 的 MySQL DB 转换为 ER Diagram？

> ID：10151552
> 
> 赞同：0
> 
> 时间：2012-04-14T06:24:32.747
> 
> 标签：mysql, web, entity-relationship

我有一个域，为此我得到了一个由某人创建的网站。他们使用 MySQL 作为数据库，但没有很好地记录这一点，现在完全一团糟，我不知道数据库表如何相互连接（2 个数据库中仍然只有 73 个表）。

我可以选择将所有表模式下载到 SQL 语句、Excel 等中，但希望找到一种从站点本身的 DB 表创建 ER 图的方法，以便以后复制它。

有没有办法从网站本身的表格中获取 ER 图？如果不是，将 SQL Schema 转换为 ER Diagram 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T06:48:15.427

你应该看看[MySql WOrkBench](http://dev.mysql.com/workbench/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T06:31:27.657

我使用[Squirrel SQL Client](http://www.squirrelsql.org/)直观地查看表之间的关系。您可以选择任何表并查看“依赖于该表的表”或查看“所有相关表”。[还可以在这里](http://www.ensode.net/squirrel_sql_part_2_3.html)查看教程

# android - 如何在android中获取LocationProvider的状态

> ID：10151554
> 
> 赞同：0
> 
> 时间：2012-04-14T06:24:46.210
> 
> 标签：android, gps, location, location-provider

我编写了下面的代码以获得最好的提供者。

```
private static String provider;

    public static String setCriteria(LocationManager locationManager) {
        Criteria criteria = new Criteria();
        criteria.setAccuracy(Criteria.ACCURACY_FINE);
        criteria.setAltitudeRequired(false);
        criteria.setBearingRequired(false);
        criteria.setCostAllowed(true);
        criteria.setPowerRequirement(Criteria.POWER_MEDIUM);
        provider = locationManager.getBestProvider(criteria, true);
        LocationProvider locProvide = locationManager.getProvider(provider);        
        if (provider == null) {
            provider = LocationManager.GPS_PROVIDER;
        }
        return provider;
    } 
```

我有这个代码来找到我将用来获取位置的提供者。现在我要检查的是提供者的状态。我从文档中读到 LocationProvider 有 3 个可用状态、停止服务和 TEMPORARILY_UNAVAILABLE。现在我在请求位置监听器之前我需要检查状态。

**如果状态为例如 TEMPORARILY_UNAVAILABLE 或停止服务，则用户将相应地收到消息，否则它将找到该位置。所以我的问题是如何检查状态？**

如果有人有任何想法，请帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T06:51:56.283

您可以尝试在您的 Locationmanager 对象上使用 requestlocationupdates 并实现您的 Locationlistener 对象......就像这样......

```
 LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
LocationListener ll = new mylocationlistener();
lm.requestLocationUpdates(provider, 0, 0, ll);

    private class mylocationlistener implements LocationListener {
  ....

    @Override
public void onStatusChanged(String provider, int status, Bundle extras) {
  switch(status){
   case 0:
   //OutofService
     break;
   case 1:
    //Temporarily unavailable
   break;
   case 2:
  //Available
    break;

  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T07:10:12.840

AFAIK，这是上述问题**[的最终解决方案](https://stackoverflow.com/questions/2021176/how-can-i-check-the-current-status-of-the-gps-receiver)**..没有什么能超越这个你可以告诉 isAvailable 或不使用布尔变量`isGPSfix`

尽管您可以[像这样](https://stackoverflow.com/questions/10151554/how-to-get-status-of-locationprovider-in-android)进行其他尝试，但这并不能保证在所有情况下都可以工作。

# .net - MySQL 连接器/NET 检查表中的新更改

> ID：10151557
> 
> 赞同：3
> 
> 时间：2012-04-14T06:25:56.633
> 
> 标签：.net, mysql, mysql-connector, socks

我正在使用 MySQL Connector/NET，我想检查表中是否有任何更改，通常我使用一个计时器，每次它滴答作响时，它都会检查新的更改。

但是计时器不是一个好的解决方案。每次我的软件必须运行 SELECT 命令时，都会浪费大量时间和资源。我想使用事件而不是检查新更改的计时器。

有人告诉我你必须使用 SOCKS 或其他东西。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T11:39:23.343

正如 aleroot 指出的，如果您使用的是 MSSQL，那么 SqlDependency 正是您正在寻找的答案。但是当您使用 MySQL 时，我们没有太多可用的选项。

HTML 5 中引入了一个称为 WebSockets 的概念。它是一种 PUSH 技术。虽然我不确定它是否可以在您的场景中使用，但请阅读以下文章：http: [//net.tutsplus.com/tutorials/javascript-ajax/start-using-html5-websockets-today/](http://net.tutsplus.com/tutorials/javascript-ajax/start-using-html5-websockets-today/)

剩下的选项是定期轮询数据库以查找数据的任何更改。请在下面找到一些建议，以减少服务器上的负载，同时仍然使用轮询：

1）如果没有定期插入数据，您可以使用查询来检查行数（而不是检索整个数据），并且只有在当前和以前的计数发生变化时才检索数据。

2）您可以使用单独的表，只要数据发生变化，该表就会使用触发器进行更新。您的应用程序可以定期查询新表以确定父表中是否有任何数据发生更改。

尝试即兴创作一个解决方案并分享它。

# flash - Flash AS2 - 访问末尾带有数字的 loadVariable 变量

> ID：10151564
> 
> 赞同：0
> 
> 时间：2012-04-14T06:27:12.457
> 
> 标签：flash, variables, actionscript-2

我有一个从 mysql 数据库加载变量的闪存。它用它们的 id 加载它们并附加变量

示例：
**变量名称**:itemName
**Id** :1
**var 发送到闪存**:&itemName1=(数据库中的项目名称)

现在的问题是在 Flash 加载最后添加了 id 的变量

**代码**：

```
onClipEvent(data){
    t = this.totalItems;
    for(i = 1;i <= t;i++){
        itemNames = this.itemName + i;
        _root.itemList.addItemAt(i, itemNames);
    }
} 
```

但该列表返回**NaN**。到目前为止，我的数据库中有 2 个项目，所以这些是返回的值。

*   项目名称1
*   描述1
*   价格1

*   项目名称2

*   描述2
*   价格2

所以我想会在 for 循环中`this.itemName + i`返回值**itemName1** where **i=1 。**有没有其他方法可以做到这一点？任何想法为什么这不起作用？任何帮助将不胜感激。谢谢。

ps 这是 php 文件返回的内容，
`&totalItems=2&itemName1=Name Change&price1=150&desc1=Buying this will allow a name change.&itemName2=VIP Status&price2=2000&desc2=Allows to have the VIP Status which allow special features.`
我知道它可以工作，因为**t**确实在闪存中返回 2。

编辑：
好的，所以我尝试更改 itemNames = this.itemName + "" + i 并且它只返回 "undefined1"、"undefined2" 等......这变得令人头疼。和 loadvars 只是让我的闪存崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T09:44:09.567

最好使用[LoadVars](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00001174.html)类来加载外部变量。然后，您可以使用括号语法按名称访问它们：

```
var lvars:LoadVars = new LoadVars();
var i:int = 0;
// ...

var key:String = this.itemName + "" + i;
var value:String = lvars[key]; 
```

[此示例](http://snipplr.com/view/8878/)应该可以帮助您开始使用 LoadVars。

# python - 将字典键的 2 个元素分成 2 个列表？

> ID：10151565
> 
> 赞同：2
> 
> 时间：2012-04-14T06:27:45.450
> 
> 标签：python

我如何将此字典的键分成两个单独的列表？

```
score = {(13.5, 12.0): 10.5, (10.7, 19.3): 11.4, (12.4, 11.1): 5.3}

list1 = []
list2 = [] 
```

以便我在打印时可以获得这些列表？

```
list1 = [13.5, 10.7, 12.4]
list2 = [12.0, 19.3, 11.1] 
```

我试过这个，但它不起作用

```
for (a, b), x in score:
    list1.append(a,)
    list2.append(b,) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T06:29:59.200

您的代码几乎是正确的，只需删除`, x`.

遍历字典是遍历它的键，而不是它的键和值。由于您只需要此处的键，因此可以遍历字典。

`score.items()`或者，您可以改为迭代（或`score.iteritems()`仅在 Python 2 上）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T06:30:10.610

您正在遍历字典的键，但分配给`(key, value)`. 要遍历键值对，您可以使用`items`or `iteritems`：

```
for (a, b), x in score.iteritems(): 
```

在这种特定情况下，您可以使用列表推导而不是显式循环：

```
list1 = [a for a, b in score]
list2 = [b for a, b in score] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T06:31:41.843

或者，您可以结合使用 zip 和 splat（解包）

```
>>> score = {(13.5, 12.0): 10.5, (10.7, 19.3): 11.4, (12.4, 11.1): 5.3}
>>> x, y = zip(*score.keys())
>>> x
(10.7, 12.4, 13.5)
>>> y
(19.3, 11.1, 12.0) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T06:30:56.163

你必须正确地循环你的钥匙

```
for (a, b) in score.keys():
    list1.append(a)
    list2.append(b) 
```

# iphone - iPhone UIPickerView 问题

> ID：10151568
> 
> 赞同：2
> 
> 时间：2012-04-14T06:28:12.793
> 
> 标签：iphone

朋友们，我在水平 UIPickerView 中遇到问题。有人可以帮我解决这个问题吗？实际上我得到了水平选择器视图，但我有问题选择器视图内的数据数组不清楚，它的可见性不好我向你展示我想要的图片对不起我无法添加所以请帮助我。

![在此处输入图像描述](../Images/65757f9ca623208c58e2ffe3d8b2fd7f.png) 这是我的代码：

```
- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view{

        CGRect rect = CGRectMake(0, 0, 180, 30);
    UILabel *label = [[UILabel alloc]initWithFrame:rect];
        CGAffineTransform rotate = CGAffineTransformMakeRotation(3.14/2);
        rotate = CGAffineTransformScale(rotate, 2.0, 2.0);
        [label setTransform:rotate];
        label.text = [pickerArray objectAtIndex:row];

        label.textAlignment = UITextAlignmentCenter;
        label.numberOfLines = 2;
        label.font = [UIFont fontWithName:@"Verdana-Bold" size:22];
        label.lineBreakMode = UILineBreakModeWordWrap;
        label.backgroundColor = [UIColor clearColor];
        label.clipsToBounds = YES;
        return label ;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:23:56.443

您不应该通过使用将标签缩放 2 倍，`CGAffineTransformScale(rotate, 2.0, 2.0)`这就是为什么它不是像素完美清晰的原因，如果您想要更大的标签，则应该将字体大小加倍。并将 3.14 替换为常量`M_PI`

# sqlite - 从数据库获取数据时发生 Sqlite 挂起操作

> ID：10151572
> 
> 赞同：0
> 
> 时间：2012-04-14T06:29:16.463
> 
> 标签：sqlite, blackberry

我的代码是：

```
Statement mstatement = null;
URI uri = URI.create(DBPath);
sqliteDb = DatabaseFactory.openOrCreate(uri);

mStatement = sqliteDb.createStatement(strQuery);
mStatement.prepare(); 
```

我的问题是，我在 mstatement.prepare(); 处收到错误为“Sqlite pendingOperation”。请告诉我为什么我会得到这个以及如何删除它。还有一件事，我在多个线程中使用此代码。

# jquery - 鼠标向上时的jquery mobile反向样式

> ID：10151573
> 
> 赞同：0
> 
> 时间：2012-04-14T06:29:32.387
> 
> 标签：jquery, css, jquery-mobile

我在 jquery mobile 中遇到了自定义按钮的问题。

```
<li><a href="about.php">Button</a></li> 
```

我想在按下链接按钮时更改列表元素的背景，然后在释放时将其更改回来。

我尝试了各种零碎的东西，但我遇到了这些问题：

*   使用 vmouseup 和 vmousedown 更改 css 工作，但是当我用手指滚动它们时，即使我没有单击链接，它们也会注册事件

*   滚动时使用tap会停止问题，但它只会更改向下状态的css，然后加载下一页，当我返回第一页时，向下状态样式处于活动状态

我希望这是有道理的，这些文档现在对我来说只是模糊的。

*   基本上我需要在触摸锚时设置锚的样式，然后在停止触摸时反转样式。

*   这需要在下一页加载之前发生。

*   当我的手指滚动屏幕并滑过锚点时，我不希望它注册为触摸并更改样式

看起来它应该很容易，但无论如何我都不知道发生了什么。

任何帮助将不胜感激。

谢谢你

**更新：**

嘿，终于有一个组合工作了，不确定我昨晚是否尝试过这个并且太累而无法注册，或者我只是太累了错过它，但我使用点击更改样式然后点击更改回来。

```
$(function() {
$('.profile-list li a').on( 'click', function () {
// change .css()
  });

$('.profile-list li a').on( 'tap', function (){
// change back
 });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:21:49.263

```
$(function() {
$('.profile-list li a').on( 'click', function () {
// change .css()
 });

$('.profile-list li a').on( 'tap', function (){
// change back
});
 }); 
```

# android - 使用AndroidAnnotations时@Background和屏幕旋转，如何确保收到回调？

> ID：10151578
> 
> 赞同：4
> 
> 时间：2012-04-14T06:30:24.803
> 
> 标签：android, annotations, android-annotations

使用 @Background 注释时，我们启动一个新线程。如果我们在这个线程执行旋转屏幕的时候，我们会丢失来自那个线程的回调吗？或者如何处理？使用 Loaders，这在屏幕后面进行了整理，因此我们不必担心使用异步任务时经常发生的问题。

但是@Background 注释是如何处理这个问题的呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T06:32:11.353

首先，当你使用@Background注解时，代码是在单独的线程上执行的，但这并不一定意味着会启动一个新的线程，因为我们使用了一个普通的线程池（可以替换）所有@Background 方法。

与 AsyncTask 一样，@Background 不会处理您的活动的任何生命周期更改。因此，如果您调用@Background 方法然后旋转屏幕，那么无论如何都会在调用它的实例上执行@Background 代码。如果将@Background 放置在属于该活动的方法上，并依次调用@UiThread 方法，则如果发生配置更改，则可能会在错误的活动实例上调用@UiThread 方法。

在 Android 中，在加载器之前，通常的处理方法是使用 AsyncTask，在 onRetainNonConfigurationInstance() 中保留对这些任务的引用，并在配置更改后将它们重新绑定到新活动。

在最新版本中，AndroidAnnotations 提供了@NonConfiguration 实例注解，可以与@EBean / @Bean 和@Background 组合使用，达到同样的效果。

这是一个示例代码（未经测试，由 gmail 编写）：

```
@EActivity
public class MyActivity extends Activity {

  // Using @NonConfigurationInstance on a @Bean will automatically update the context ref on configuration changes (if the bean is not a singleton)
  @NonConfigurationInstance
  @Bean
  MyBackgroundTask task;

  @Click
  void myButtonClicked() {
    task.doSomethingInBackground();
  }

  void showResult(MyResult result) {
    // do something with result
  }

}

@EBean
public void MyBackgroundTask {

  @RootContext
  MyActivity activity;

  @Background
  void doSomethingInBackground() {
      // do something
     MyResult result = XXX;

      updateUI(result);
  }

  // Notice that we manipulate the activity ref only from the UI thread
  @UiThread
  void updateUI(MyResult result) {
    activity.showResult(result);
  }
} 
```

我认为我们可以提供更好的解决方案，但是有很多不同的用例，我们需要全部考虑。所以现在，@Background 有一个非常简单的行为，我不想改变它。但是，我们可以引入具有高级“线程 + 生命周期”行为的新注释。

感谢“Pierre-Yves Ricau”通过 googlegroup 为 androidannotations 提供此答案。希望这将帮助其他可能遇到类似问题的人。

# ruby-on-rails - 如何像在 Youtube 上一样在用户评论中识别和创建“@”链接

> ID：10151579
> 
> 赞同：1
> 
> 时间：2012-04-14T06:30:26.830
> 
> 标签：ruby-on-rails, youtube

当用户输入评论时，我想研究在他们的网站上制作类似 Youtube 的功能，如果他们有类似“@username”的内容，系统会识别“@”符号并链接到用户名的评论。我正在使用 Rails 3 进行开发，但有关此功能所需逻辑的任何信息将不胜感激，谢谢。

编辑：附加问题：放置逻辑的最佳位置在哪里？我觉得控制器会这样，如果客户端没有javascript，它仍然可以工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T10:26:58.937

我确信有多种（甚至更好）的方法可以做到这一点。我是怎么做到的——

解析输入字符串的函数：我写了一个辅助函数 -

1.  它遍历了帖子中的每个单词以及所有以“@”开头的单词
2.  对于每个这样的词，它都会检查用户是否存在于应用程序中。
3.  如果是，则将该单词替换为指向用户配置文件的链接。
4.  将新帖子（带有链接的帖子）写入数据库。

    ```
    def mention_users_and_tags(post)
        post_with_user_links = ""
        words = post.message.split
        words.each do |word|
            if word[0] =~ /^@.*/ and word.length > 1
                if extract_user_if_exists(word[1,word.length-1])
                    post_with_user_links << "#{link_to "#{word}", :controller => "users", :action => "show", :id => @mentioned_user.id} "
                else
                    post_with_user_links << word << " "
                end
            end
        end
    end 
    ```

编辑 - 我认为这个方法应该写在模型中并在控制器中调用。这是我第一次在 Rails 中编码，所以我不太确定一切都在哪里，我把它写成一个辅助函数。但现在我知道所有业务逻辑都在模型中。由于在帖子中提及用户可以被视为业务逻辑的一部分，因此我会在模型中为其编写一个函数。

# pixelsense - 在 Microsoft Surface 应用程序中显示键盘

> ID：10151581
> 
> 赞同：0
> 
> 时间：2012-04-14T06:30:52.783
> 
> 标签：pixelsense

我正在创建一个打开多个浏览器的应用程序。每个浏览器都有自己的键盘可以输入，但我不知道如何在这个应用程序中显示键盘。当用户想要输入任何 URL 时，我必须为每个用户显示关键字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T08:41:29.867

普通键盘应该 - 至少在表面模式下 - 一旦文本框获得焦点就会出现。缺点：一次只能打开。

如果您确实需要多个触摸键盘，则需要实现自定义控件来显示和模拟键盘（您需要自己处理不同的布局！）。基本上它可以实现为一堆按钮，每个按钮都在标签上添加一个字母。删除按钮将删除最后一个字母。标记、复制、删除等将是有趣的部分。

我们已经做了类似的事情（尽管只有一个键盘）来模拟一个方便的键盘进行促销。老实说：就可用性而言，这并不是最好的体验（比附带的键盘差一点）。它满足了它的需要，而且屏幕键盘根本不是一流的体验（你可能会争辩，但我比任何虚拟键盘更喜欢我的机械键盘，所以这可能是一个品味问题）

# c# - 获取托管我的网站的服务器的当前日期时间

> ID：10151583
> 
> 赞同：0
> 
> 时间：2012-04-14T06:30:56.277
> 
> 标签：c#, javascript, asp.net

我正在研究涉及一些基于时间的任务的功能。我需要检索当前的 EST 时间以继续我的功能。我不需要系统时间，因为每个用户可能不同。是否可以使用 javascript 或 c#从另一个时间服务器获取东部标准时间或从我的托管服务器获取时间，以便我可以将其转换为东部标准时间。

我目前正在使用这行代码来获取东部标准时间，但这不是我想要的，因为它是基于系统时间的。

```
 DateTime eastern = TimeZoneInfo.ConvertTimeBySystemTimeZoneId(DateTime.UtcNow, "Eastern Standard Time"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T06:43:20.763

您当前的代码看起来正确 - 它返回 EST 时区的当前时间。

在您的情况下，“现在”可能有 4 个不同的值，我认为您有一个正确的值：

*   UTC“现在” - 现在在 UTC 时区。- 无论位置/语言环境/任何东西，都具有相同的值。
*   服务器本地时区（即 PST）中的时间 - 取决于服务器配置
*   浏览器用户时区（即印度的半小时时区）中的时间 - 因用户而异。
*   EST 中的时间。- 无论位置/区域设置/任何内容，都具有相同的值。

像您一样将 UTC 转换为已知时区是安全的。

如果您对特定机器上的时间精度/正确性不满意，您可以从支持[Network Time Protocol](http://en.wikipedia.org/wiki/Network_Time_Protocol)的服务器获取时间，但机器之间的时钟同步并非易事，因此请先考虑是否需要。

# jquery - jQuery 动画和谷歌地图的可战斗性问题

> ID：10151584
> 
> 赞同：0
> 
> 时间：2012-04-14T06:31:13.523
> 
> 标签：jquery, google-maps

我正在尝试使用 JQuery hide() & slideDown() 函数来隐藏/显示我的谷歌地图。一切都非常适合地图，除了在向下滑动动画之后，地图没有很好地显示。这是我的代码：

```
$("#map_canvas").hide();
...
...
...
$("#map_canvas").show(200); 
```

（在这种情况下我使用了 show()，但它应该与 slideDown() 一样工作）。地图是这样出来的：……嘘，我没有资格上传图片……好吧，地图只是部分显示，其他地图区域为灰色。

奇怪的是，当我尝试“检查元素”时，地图只是恢复正常。我试过 Firefox 和 Chrome，同样的问题。

我还有一个小问题。Chrome 似乎不适用于地理定位。我在所有主流浏览器上都尝试过地理定位，只有 Chrome 给了我一个错误的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T08:51:35.227

在的回调里面触发`resize`地图的-event`show()`

为了帮助解决其他问题，我们需要更多信息。

# javascript - Django Jquery 神秘错误

> ID：10151587
> 
> 赞同：0
> 
> 时间：2012-04-14T06:31:51.217
> 
> 标签：javascript, jquery, python, django, jquery-plugins

我正在使用 jquery 表单插件[http://jquery.malsup.com/form/#ajaxForm](http://jquery.malsup.com/form/#ajaxForm)通过 ajax 将图像上传到用 Django 编程的服务器端。上传图像时，我使用这个 jquery 插件[http://srobbin.com/jquery-plugins/backstretch/](http://srobbin.com/jquery-plugins/backstretch/)来设置该图像的整页背景。图像被上传并存储，但图像不显示为背景。

它显示了这个错误：

```
http://127.0.0.1:8000/cover/'http://localhost:8000/files/backgrounds/2_17.jpg'
404 NOT FOUND 
```

但是当我像这样硬编码网址时：（用于检查）

```
$.backstretch('http://localhost:8000/files/backgrounds/2_17.jpg') 
```

它显示了背景。这里有什么问题？responseText(来自 django 的响应是上面的正确地址，即

```
 'http://localhost:8000/files/backgrounds/2_17.jpg' 
```

Javascript代码： [https ://gist.github.com/2382470](https://gist.github.com/2382470)

Django 视图.py： [https ://gist.github.com/2382475](https://gist.github.com/2382475)

Django 设置.py：

```
MEDIA_URL = 'http://localhost:8000/files/'
MEDIA_ROOT = '/home/nirmal/try/files/' 
```

Django urls.py：

```
url(r'^cover/$', 'cover.views.backgroundview'), 
```

这里会有什么错误？有人可以帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T06:34:31.467

图片网址错误

```
http://127.0.0.1:8000/cover/'http://localhost:8000/files/backgrounds/2_17.jpg' 
```

它不应该包含`'`并且其中不应该有两个`http://`位。

查看`http://127.0.0.1:8000/cover/`位 - 检查您是否正在运行

```
python manage.py runserver localhost:8000 
```

此外，在您的 Django 视图代码中，您可以删除`'`包装，因为`g.background.url`它已经是一个字符串：

```
return HttpResponse(g.background.url) 
```

# delphi - 插入符号位置受设计模式下 Internet Explorer 中字形使用的影响

> ID：10151597
> 
> 赞同：2
> 
> 时间：2012-04-14T06:34:51.203
> 
> 标签：delphi, mshtml, caret, designmode

我尝试在 Delphi 的设计模式中使用 Internet Explorer 作为 Html 编辑器。我使用 Mshtml 和 SHDocVw 单位，编辑很顺利。我还显示了一些字形，例如 Word 中的“特殊字符”选项（例如段落：¶）。现在，隐藏字形或显示字形之间的插入符号位置似乎有所不同。

1) 隐藏字形

在“示例文本”上按下`<End>`键时，插入符号直接位于最后一个字符“t”之后：示例文本 |

当我现在键入`<1>`密钥时，html 结果与我预期的一样：

```
<p>Sample Text1</p> 
```

2) 显示字形

在“示例文本”上按下`<End>`键时，插入符号不是直接定位在最后一个字符之后，而是在字形之后：示例文本¶ |

当我现在键入`<2>`密钥时，html 结果是

```
<p>Sample Text</p>2 
```

所以'2'结束在段落之外。

我还检查了如果在按下非系统键之前隐藏字形会发生什么：

3) 显示字形并在之后隐藏它们

首先显示字形，按下`<End>`“示例文本”上的键，隐藏字形，插入符号仍然没有直接定位在最后一个字符之后，屏幕上出现了一些空间（但是 html 源中没有真正的字符/元素）：示例正文 | 当我现在键入`<3>`密钥时，html 结果是

```
<p>Sample Text</p>3 
```

所以'3'仍然在段落之外结束。

`<Home>`像和箭头键这样的键也存在同样的问题。

我怎样才能防止这种情况？有没有办法防止在字形之后放置插入符号，或者将其更改为段落的最后一个字符？

# java - 如何从java中的文件中获取类似EOF符号的smth

> ID：10151598
> 
> 赞同：0
> 
> 时间：2012-04-14T06:35:03.420
> 
> 标签：java, sablecc

今天是个好日子。

我正在使用[sableCC](http://sablecc.org/)，它需要一个 Reader 对象作为输入。例如，此代码可以正常工作：

```
compile (new StringReader ("print 1")); 
```

因为 StringReader 在字符串结束后返回 -1：

```
StringReader sr = new StringReader("print 1");
while (sr.ready())
    System.out.println (sr.read()); 
```

给出：

```
112
114
105
110
116
32
49
-1
... always -1 
```

但是当我将相同的字符串写入文件“prog”时，没有任何额外的行或字符，并在其上创建 FileReader，编译器会在不存在的第二行中断，因为 FileReader 返回换行符而不是 -1 字符：

```
FileReader fr = new FileReader( new File("prog"));
while (fr.ready())
    System.out.println (fr.read()); 
```

给出：

```
112
114
105
110
116
32
49
10 
```

从文件阅读器获得与从 StringReader 相同的行为的最短方法是什么，或者 SableCC 允许旁观？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T06:40:44.903

如果`FileReader`返回一个换行符，那是因为文件中有*一个*换行符，即使您的文本编辑器没有显示它。

不幸的是，一些编辑器在保存时会自动在文本文件中添加一个新的空行。例如，我认为 emacs 和 gedit 都这样做。尝试不同的编辑器。

# eclipse - 将 JAX-RS 方面添加到 Eclipse 中的动态 Web 项目后出现异常

> ID：10151601
> 
> 赞同：-1
> 
> 时间：2012-04-14T06:35:45.697
> 
> 标签：eclipse, rest, ejb-3.0, glassfish-3, jax-rs

我是 Oracle Plugin for Eclipse (OEPE) 和 EJB 的新手。[我正在关注http://www.youtube.com/watch?v=on557289GzA&feature=relmfu](http://www.youtube.com/watch?v=on557289GzA&feature=relmfu)上标题为 JavaEE6 and Glassfish with Eclipse的教程（5 of 5）

在为动态 Web 项目启用 JAX-RS 方面后，我收到以下异常。

加载应用程序时出现异常：java.lang.Exception: java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: org.apache.catalina.LifecycleException: com.sun.jersey.api.container。 ContainerException：ResourceConfig 实例不包含任何根资源类。

我重新创建了一个新环境（Eclipse Indigo，Glassfish 3.0.1），但我在同一点上感到震惊。已经有一个关于同一主题的问题。但它被标记为没有答案甚至没有提示的回答！

请帮我。

我的persistence.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="OpenEducation">
        <jta-data-source>jdbc/ScottConn</jta-data-source>
        <class>model.Course</class>
        <class>model.Customer</class>
        <class>model.Registration</class>
    </persistence-unit>
</persistence> 
```

我的 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">
  <display-name>OpenEducation</display-name>
  <servlet>
    <description>JAX-RS Tools Generated - Do not modify</description>
    <servlet-name>JAX-RS Servlet</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>JAX-RS Servlet</servlet-name>
    <url-pattern>/jaxrs/*</url-pattern>
  </servlet-mapping>
</web-app> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T18:24:15.573

您的项目中必须至少有一个标有@Path JAX-RS 注释的类。

# facebook - 如何使用facebook登录openid？

> ID：10151602
> 
> 赞同：0
> 
> 时间：2012-04-14T06:35:48.990
> 
> 标签：facebook, openid

目标是让使用 facebook 的人轻松登录我们的网站，而不一定要与 facebook 集成并向其中添加内容（尚未）。我已经阅读了 facebook connect 上的文档，但仍然无法准确掌握我们需要做什么来完成此操作。我提到了链接[http://developers.facebook.com/docs/authentication/](http://developers.facebook.com/docs/authentication/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T08:28:33.677

为了解决您的查询，这里有一些示例。您可以参考这些示例以了解它是如何完成的。这里的概念也是相同的。以下示例在 Tomcat servlet 引擎中设置的应用程序中使用 facebook 登录场景。

[JSP (tomcat) 中的 Facebook Connect 示例](https://stackoverflow.com/questions/5184959/facebook-connect-example-in-jsp-tomcat)

希望这对您有所帮助。

# c# - 对于 C# 中的每个循环计数

> ID：10151604
> 
> 赞同：-3
> 
> 时间：2012-04-14T06:36:29.673
> 
> 标签：c#, loops, count

我有代码，每次发送消息时，它都会对其进行计数，然后设置状态。很简单，但是我在函数中添加了一些消息发送调用，因此它更快，现在显然计数已关闭，因为它在此示例中每四条消息计数一次：

```
 private void messagespam_worker_DoWork(object sender, DoWorkEventArgs e)
    {
        for (int i = 1; i < numericUpDown1.Value; i++)
            Invoke((MethodInvoker)delegate
            {
                foreach (Chat chat in skype.Chats)
                {
                    if (messagespam_bool == false)
                    {
                        numericUpDown1.Value = 0;
                        break;
                    }
                    try
                    {
                        toolStripStatusLabel3.Text = "- Sent: " + i; // Where the status is changed

                        String contact = listBox1.SelectedItem.ToString();
                        skype.SendMessage(contact, textBox7.Text); //1st message
                        skype.SendMessage(contact, textBox7.Text); //2nd message
                        skype.SendMessage(contact, textBox7.Text); //3rd message
                        skype.SendMessage(contact, textBox7.Text); //4th message
                    }
                    catch (Exception error)
                    {
                        MessageBox.Show(error.Message);
                    }
                    break;
                }
            });
    } 
```

我希望上面的代码在每次发送消息时都计数：

```
skype.SendMessage(contact, textBox7.Text); //1st message
skype.SendMessage(contact, textBox7.Text); //2nd message
skype.SendMessage(contact, textBox7.Text); //3rd message
skype.SendMessage(contact, textBox7.Text); //4th message 
```

发送消息 1 时，应将状态设置为 1，然后发送消息 2 时，应将状态设置为 2，依此类推。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T06:40:07.903

将 skype.SendMessage 包装在一个返回 int 的方法中，最后一行将是 return 1;。将 int 添加到新的变量计数中。当它抛出计数将有成功消息发送的计数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T06:41:24.290

为什么不`SendMessage`直接调整方法呢？用您自己的执行计数/状态更新的方法替换它：

```
private int count;

private void SendAndCount(Contact contact, String text)
{
   // add your count logic here
   count++;
   skype.SendMessage(contact, textBox7.Text); 
} 
```

然后更新你的循环：

```
foreach (Chat chat in skype.Chats)
{
    if (messagespam_bool == false)
    {
        numericUpDown1.Value = 0;
        break;
    }
    try
    {
            String contact = listBox1.SelectedItem.ToString();
            SendAndCount(contact, textBox7.Text); //1st message
            SendAndCount(contact, textBox7.Text); //2nd message
            SendAndCount(contact, textBox7.Text); //3rd message
            SendAndCount(contact, textBox7.Text); //4th message
        }
    catch (Exception error)
    {
        MessageBox.Show(error.Message);
    }
    break;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T06:57:29.087

我认为这应该满足您的要求...

```
private void messagespam_worker_DoWork(object sender, DoWorkEventArgs e)
        {
            for (int i = 1; i < numericUpDown1.Value; i++)
                Invoke((MethodInvoker)delegate
    {
        foreach (Chat chat in skype.Chats)
        {
            if (messagespam_bool == false)
            {
                numericUpDown1.Value = 0;
                break;
            }
            try
            {
                   toolStripStatusLabel3.Text = "- Sent: " + i*4; // 4 is the number of messages, better keep it in a variable

                    String contact = listBox1.SelectedItem.ToString();
                    skype.SendMessage(contact, textBox7.Text); //1st message
                    toolStripStatusLabel3.Text = "- Sent: " + i*4 + 1; // remove this if this is not required
                    skype.SendMessage(contact, textBox7.Text); //2nd message
toolStripStatusLabel3.Text = "- Sent: " + i*4 + 2;
                    skype.SendMessage(contact, textBox7.Text); //3rd message
toolStripStatusLabel3.Text = "- Sent: " + i*4 + 3;
                    skype.SendMessage(contact, textBox7.Text); //4th message
                }
            catch (Exception error)
            {
                MessageBox.Show(error.Message);
            }
            break;
        }

    });
        } 
```

# twitter-bootstrap - 使用 Twitter Bootstrap，您如何“记住”用户操作？

> ID：10151605
> 
> 赞同：3
> 
> 时间：2012-04-14T06:36:36.680
> 
> 标签：twitter-bootstrap

我正在使用 Bootstrap Alerts 框，并希望这些框“记住”它们是否已关闭。这样当用户登录到会员区并关闭警报时；下次他们访问该站点时，警报仍然消失。

有没有办法做到这一点？

```
<div class="alert-message success" data-alert="alert">
<a class="close" data-dismiss="alert" href="#">&times;</a>When I click &times; I'd like this to never appear again.</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T06:49:32.377

您可能必须将该首选项存储在 cookie 中或服务器本身上。可以在**[另一个 SO 线程](https://stackoverflow.com/questions/9809118/standard-way-of-storing-user-preferences-on-client-via-web-application)**中找到很好的阅读。

用于存储 cookie 基本上，您要做的就是围绕您的代码实现 javascript。为简单起见，我使用 jQuery 和一个 jQuery cookie 插件。

```
// jQuery pulled from Google CDN
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
// jQuery cookie plugin. You will have to download it on your own: https://github.com/carhartl/jquery-cookie
<script src="/path/to/jquery.cookie.js"></script>
// jQuery action here
<script>
    function runOnLoad(){
        if($.cookie('alert-box') == null) {
            $.cookie('alert-box', 'open', { expires: 7 });
        } else if($.cookie('alert-box') == 'close') {
            $(".close").hide();
        }

        // php psuedo code here (if you are using the server option)
        <?php
            if(check database for hide option == true){
                echo '$(".close").hide();
            }
        ?>
    }
    function hideMe(){
        $.cookie('alert-box', 'close', {expires:7 });
        $(".close").hide();
    }
</script>

<body onload="runOnLoad()">
    <div class="alert-message success" data-alert="alert">
        <a class="close" data-dismiss="alert" href="hideMe.php" onclick="hideMe()" >&times;</a>When I click &times; I'd like this to never appear again.
    </div>
</body> 
```

如果您使用服务器选项，则必须将 hideMe.php 编码为：

1.  在数据库的表中设置隐藏选项，即 userPreference 为 true
2.  将用户重定向回他正在查看的页面。

免责声明：这些代码旨在让您了解如何完成。但是，不能保证它会按原样工作，因为我没有测试代码。

笔记：

1.  我使用了 jQuery 的[hide](http://api.jquery.com/hide/)。阅读它。
2.  您可以在此处阅读有关[jQuery cookie 插件的](http://www.electrictoolbox.com/jquery-cookies/)更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:20:54.943

我为我的网站编写了一个基本解决方案，非常适合我的需求：

*   我使用[livequery 插件](http://brandonaaron.net/code/livequery/docs)来等待 DOM 上存在警报元素
*   该脚本正在警报 div 上查找具有唯一值的属性 data-id。这将在稍后用于存储在 cookie 或 db 上，并且可以是可选的。
*   我已经使用 cookies 插件来存储关闭的警报数据 ID，这个唯一值可以是可选的，并且可以动态地设置为 html 属性。即使存储方法可以改进很多（例如使用 json 将多个警报作为对象存储在一个 cookie 中），这对我的需求也很好。

DOM 准备好后要使用的 JS：

```
//bind to close alerts link
$('.alert a.close').livequery(function()
{
    $(this).bind('click', function()
    {
        var id = $(this).parents('.'+$(this).data('dismiss')).data('id');

        if(id)
        $.cookie('alert-'+id, 'closed', { path: '/' });
    });
});

//hide closed alerts
$('.alert').livequery(function()
{
    var id = $(this).data('id');

    if($.cookie('alert-'+id))
    $(this).hide();
}); 
```

# javascript - setInterval 循环动画不起作用

> ID：10151607
> 
> 赞同：0
> 
> 时间：2012-04-14T06:36:56.553
> 
> 标签：javascript, jquery, animation, loops, fadein

我有一个简单的 fadeIn fadeOut 动画，它基本上是一个闪烁的箭头。但是，它不会循环。它只进行一次，就完成了。我在这里找到了答案-> [How to repeat (loop) Jquery fadein - fadeout - fadein](https://stackoverflow.com/questions/9319573/how-to-repeat-loop-jquery-fadein-fadeout-fadein)，但是当我尝试遵循它时，我的不起作用。

动画的脚本是

```
<script type="text/javascript">
$(document).ready(function() {
    $('#picOne').fadeIn(1000).delay(3000).fadeOut(1000);
   $('#picTwo').delay(5000).fadeIn(1000).delay(3000).fadeOut(1000);
});
</script> 
```

答案中给出的脚本是

```
$(function () {
    setInterval(function () {
        $('#abovelogo').fadeIn(1000).delay(2000).fadeOut(1500).delay(2000).fadeIn(1500);
    }, 5000);
}); 
```

所以我认为最终的组合是

```
 $(document).ready(function() {
   setInterval(function () {
        $('#picOne').fadeIn(1000).delay(3000).fadeOut(1000);
       $('#picTwo').delay(5000).fadeIn(1000).delay(3000).fadeOut(1000);
    }, 5000);
});
    </script> 
```

有人可以指出我做错了什么吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T06:55:35.470

两个细节：

*   您必须将间隔设置为，`10000`因为您的动画运行 10 秒

*   如果你想让它现在开始，你必须在执行间隔之前调用它一次（第一次执行间隔是在延迟之后）

--

```
$(document).ready(function() {

   function animate() {
       $('#picOne').fadeIn(1000).delay(3000).fadeOut(1000);
       $('#picTwo').delay(5000).fadeIn(1000).delay(3000).fadeOut(1000);
   }

   animate();
   setInterval(animate, 10000);
});​ 
```

在这里演示：http: [//jsfiddle.net/bjhG7/1/](http://jsfiddle.net/bjhG7/1/)

--

使用回调而不是 setInterval 的替代代码（见注释）：

```
$(document).ready(function() {

   function animate() {
       $('#picOne').fadeIn(1000).delay(3000).fadeOut(1000);
       $('#picTwo').delay(5000).fadeIn(1000).delay(3000).fadeOut(1000, animate);
   }

   animate();
});​ 
```

在这里演示：http: [//jsfiddle.net/bjhG7/3/](http://jsfiddle.net/bjhG7/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T06:44:42.947

```
function fadein(){
    $('#picOne,#picTwo').animate({'opacity':'1'},1000,fadeout())
}
function fadeout(){
    $('#picOne,#picTwo').animate({'opacity':'0'},1000,fadein())
}
fadein() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T06:58:56.357

利用 的回调参数`.fadeOut()`。传递对执行淡入淡出的函数的引用作为回调参数。根据计数器选择要淡出的图像：

```
$(function() {
    var imgs = $('#picOne,#picTwo');
    var fadeCounter = 0;

    (function fadeImg() {
        imgs.eq(fadeCounter++ % 2).fadeIn(1000).delay(3000).fadeOut(1000, fadeImg);
    })();
}); 
```

**演示：http:** [//jsfiddle.net/KFe5h/1](http://jsfiddle.net/KFe5h/1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T12:00:22.247

随着动画序列变得越来越复杂，我发现使用[async.js](https://github.com/caolan/async)会导致代码更具可读性和可维护性。使用 async.series 调用。

# ms-access - 现有 Access 2007 宏的代码修改 - 旨在在现有 Excel 2007 工作簿中创建和打开（从 Access）新的 Excel 工作表？

> ID：10151620
> 
> 赞同：0
> 
> 时间：2012-04-14T06:39:56.903
> 
> 标签：ms-access, excel-2007, ms-access-2007, vba

这是制作新 Excel 工作**簿**的代码，但每次单击 Access 2007 控制按钮时，我都需要该代码在同一个 Excel 2007 工作簿中创建新工作**表。**单击控制按钮需要打开 Access 查询并创建 Excel 工作**表**并**打开**Excel 书籍/工作表。Excel 工作簿必须是启用宏的工作簿 .xlsm 格式

```
' Command104ContrDonatWeekly_Click
'
'------------------------------------------------------------
Private Sub Command104ContrDonatWeekly_Click()
On Error GoTo Command104ContrDonatWeekly_Click_Err

    DoCmd.OpenQuery "Contributors Who Donated in Past Week", acViewNormal, acEdit
    DoCmd.OutputTo acOutputQuery, "Contributors Who Donated in Past Week", "ExcelWorkbook(*.xlsx)", "C:\Users\Michael1\Desktop\KSN\DistributionListWeekly.xlsx", True, "", 0, acExportQualityScreen

Command104ContrDonatWeekly_Click_Exit:
    Exit Sub

Command104ContrDonatWeekly_Click_Err:
    MsgBox Error$
    Resume Command104ContrDonatWeekly_Click_Exit

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T08:31:55.930

您可以使用传输电子表格：

```
XLFile = "C:\Docs\MyXLFile.xls"
DoCmd.TransferSpreadsheet acExport, acSpreadsheetTypeExcel9, _
    "MyTableOrQuery", XLFile, True, "Sheet2"

FollowHyperlink XLFile

''OR

Shell "Excel.exe " & xlfile, vbNormalFocus 
```

# winapi - 在winsock中，我将如何阻止接受函数从另一个线程阻塞？

> ID：10151624
> 
> 赞同：4
> 
> 时间：2012-04-14T06:40:51.017
> 
> 标签：winapi, winsock

所以这是我的情况。我正在与 winsock 合作，学习一些有关网络和协议开发的知识，但我陷入了僵局。我现在正在做一个在接受调用时阻塞的服务器，但在后台有另一个线程等待用户输入并处理用户输入。此用户输入用于发送、ping 和say 等命令，但现在我想要一个名为exit 的命令，它将关闭winsock，释放所有打开的连接，然后结束程序。问题是，这个接受线程仍然阻塞。

所以这里的问题。1）无论如何在调用winsock函数时阻止它阻塞，2）在非阻塞模式下是这样的：

```
while(m_continue)
{
      Sleep(1);
      tempsock = accept(m_listenSock, NULL, NULL);
      if(tempsock != INVALID_SOCKET)
      {
            if(WSAGetLastError() == WSAEWOULDBLOCK)
                  continue;
            else 
                  return 1;
      }
      break;
{ 
```

是多余的还是太无能而无法使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T06:45:56.347

从用户命令线程，当您处理“退出”命令时，关闭`m_listenSock`套接字。阻塞`accept()`调用将立即退出`INVALID_SOCKET`。

确保不要关闭`m_listenSock`把手两次。

# javascript - 在鼠标悬停时显示/隐藏 div 不起作用

> ID：10151628
> 
> 赞同：0
> 
> 时间：2012-04-14T06:41:28.007
> 
> 标签：javascript, jquery, html, css, delegates

我有以下代码，我希望当用户将鼠标移到 div 上时它会显示，当鼠标移出 div 时它会隐藏。一切似乎都很好，但它不起作用。任何人都可以为我指出错误吗？

```
 <script type="text/javascript">

    $(document).ready(function () {

        $(document).delegate('#myDiv', 'mouseover', function () { mouse_OverDiv(); });
        $(document).delegate('#myDiv', 'mouseout', function () { mouse_OutDiv(); });
        function mouse_OverDiv() {

            $('#myDiv').css({ "visibility": "visible" });

        }
        function mouse_OutDiv() {

            $('#myDiv').css({ "visibility": "hidden" });

        }
    });

</script> 
<body>
<form id="form1" runat="server">
<div id="myDiv" style="visibility:hidden">
this is my  div</div>

</form>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T06:43:52.207

你（曾经）失踪了`#`：

```
 ||
   vv
$('#myDiv').css({ "visibility": "visible" }); 
```

顺便说一句，您可以使用`:hover`选择器仅使用 css 来执行此操作。也`delegate()`被替换为`on()`. 最后，你不需要创建一个匿名函数来调用另一个函数，你可以这样做：

```
 $(document).delegate('#myDiv', 'mouseover', mouse_OverDiv);

   // Notice there's no `()` invoking the function 
   // since you're using it as a reference. 
```

**编辑**

试试这个：

```
var $div = $('#myDiv'),
    hoverIn = function(){
        $div.css('visibility', 'visible');
    },
    hoverOut = function(){
        $div.css('visibility', 'hidden');
    };

$('#myDiv').hover(hoverIn, hoverOut); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T08:02:51.027

Invisible Elements 不能触发 mouseover 事件，因为它们没有宽度和高度，因此在文档中没有要悬停的位置。

也许css不透明度可以帮助你？另请参阅[此示例](http://jsfiddle.net/rrvpu/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T06:45:53.093

这`$('myDiv').css({ "visibility": "visible" });`

应该

```
 $('#myDiv').css({ "visibility": "visible" }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T08:05:26.813

问题是当您隐藏 div 时，您不能再次将鼠标悬停在它上面。检查这个样本

```
$(document).delegate('#myDiv', 'mouseover', function() {
    mouse_OverDiv();
});
$(document).delegate('#myDiv', 'mouseout', function() {
    mouse_OutDiv();
});

function mouse_OverDiv() {
    $('#myDiv').css({"color": "red"});
}

function mouse_OutDiv() {
    $('#myDiv').css({"color": "blue"});
} 
```

# java - 使用 xmlstream 阅读器时出错

> ID：10151631
> 
> 赞同：0
> 
> 时间：2012-04-14T06:41:48.507
> 
> 标签：java, xml, xmlstreamreader

我`xmlstreamreader`在 java 中使用来读取属性值和其他数据。这是 xml 字符串：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?><samlp:AuthnReques
t xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol" AssertionConsumerServiceURL
="http://localhost:8080/consumer.jsp" **ID="abc"** **IssueInstant="2012-04-14T11:44:49
:796"** ProtocolBinding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST" Version="
2.0">**<saml:Issuer xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion">http://loca
lhost:8080/saml/SProvider.jsp</saml:Issuer>**<Signature xmlns="http://www.w3.org/2
000/09/xmldsig#"><SignedInfo><CanonicalizationMethod Algorithm="http://www.w3.or
g/2001/10/xml-exc-c14n#WithComments"/><SignatureMethod Algorithm="http://www.w3.
org/2000/09/xmldsig#rsa-sha1"/><Reference URI=""><Transforms><Transform Algorith
m="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/></Transforms><DigestM
ethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"/><DigestValue>VzKYOu1g
ert3DDrNUSO1/Au3PGeD1PEyPuJeI2GO6ec=</DigestValue></Reference></SignedInfo><Sign
atureValue>k7hVlbsEhGW5ryelSbrwWWyJq3cdyDuVeQCOqRilbky8hEk/1sHI9DNOvOlPZ7OC9bI4d
EHm46R1
CDXoXkyOoXdq+3M/HbUakHM7eNvF5+j+NUXUX9dijb/rDzq05VNHcSIDXRpvMc1IRBremi0voVqX
ZuHRn+IBeD8hSK1LXsE=</SignatureValue></Signature></samlp:AuthnRequest> 
```

然后我尝试读取属性 ID、IssueInstant 和元素 Issuer。在上面的字符串中，所有 3 都突出显示（实际上在 ** 之间）。我使用了以下代码：

```
while(reader.hasNext()){
    reader.next();
    if(reader.getEventType() == XMLStreamReader.START_ELEMENT){

        if(reader.getLocalName().equals("AuthnRequest"))
        {
         String ns=reader.getNamespaceURI();
         System.out.println(ns);
         id=reader.getAttributeValue(ns,"ID");

         rec_instant=reader.getAttributeValue(ns,"IssueInstant");

        System.out.println("1"+id);
        System.out.println("2"+rec_instant);

        }
        else if(reader.getLocalName().equals("Issuer"))
        {
         rec_issuer=reader.getElementText();
         System.out.println("4"+reader.getElementText());
        }
    }
} 
```

但我得到以下输出：

```
1null
2null
javax.xml.stream.XMLStreamException: ParseError at [row,col]:[1,436]
Message: parser must be on START_ELEMENT to read next text 
```

问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T06:58:58.337

您正在使用 ns 作为属性，但属性实际上在 null ns 中（它们没有命名空间）。至于例外，你打电话`getElementText`两次。此方法不是纯粹的 getter，它还将阅读器推进到结束元素（根据其[Javadoc](http://docs.oracle.com/javase/6/docs/api/javax/xml/stream/XMLStreamReader.html#getElementText%28%29)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T07:34:16.057

正如 Marko 所暗示的，异常是由于`getElementText()`连续调用两次。

如果我改变这个：

```
String rec_issuer=reader.getElementText();
System.out.println("4"+reader.getElementText()); 
```

对此：

```
String rec_issuer = reader.getElementText();
System.out.println("4" + rec_issuer); 
```

然后我得到以下输出：

```
urn:oasis:names:tc:SAML:2.0:protocol
1null
2null
4http://localhost:8080/saml/SProvider.jsp 
```

如果我*也*将`getAttributeValue`调用更改为 use`null`而不是`ns`，如下所示：

```
String id = reader.getAttributeValue(null,"ID");    
String rec_instant = reader.getAttributeValue(null,"IssueInstant"); 
```

我得到：

```
urn:oasis:names:tc:SAML:2.0:protocol
1abc
22012-04-14T11:44:49:796
4http://localhost:8080/saml/SProvider.jsp 
```

那是使用您的原始 XML。

# sencha-touch - 带有列表和表单的 ext js 4.0 hbox？

> ID：10151649
> 
> 赞同：0
> 
> 时间：2012-04-14T06:45:52.190
> 
> 标签：sencha-touch, extjs4, extjs

我是 extjs 4.0 的新手，并试图制作一个包含列表和表单的 hbox 布局，但表单显示不正确，只有标签可见但文本字段不可见，请更正代码

```
Ext.define("Screener.view.PharmacyView", {
    extend: 'Ext.Container',

requires : [ 'Screener.view.Pharmacyform' ],

    xtype: 'pharmacylist',
    config: {
        fullscreen: true,
        layout: 'hbox',
        title: 'Patient Assignments',
        items: [

                //our patient list is built on the Patients store, and has a title and sort button
                {                   
                    xtype: 'list', 
                    id: 'patientList',

                    itemTpl: '{lastname}, {firstname}',
                    store: Ext.create('Screener.store.Patients',{
                        storeId: 'patientStore'

                    }),

                    items:[{
                        xtype: 'titlebar',
                        docked: 'top',
                        title: 'Patients',
                        items:[{
                            xtype: 'button',
                            text: 'Sort',
                            id: 'sortButton',
                            align: 'left'
                        }]
                    }],
                    flex:1,

                },

             {xtype : 'pharmacyform',
             flex:2

             }
                ]
    }

}); 
```

形式如下

> Ext.define("Screener.view.Pharmacyform", {
> 
> ```
>  xtype:'pharmacyform',   extend: 'Ext.form.Panel',    config:{    items: [
>     {
>         xtype: 'textfield',
>         name : 'name',
>         label: 'Name', placeholder: 'nametext'
>     },
>         ]}     }); 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T04:28:53.497

你需要使用别名配置来声明你自己的 xtypes 我相信，试试这个

```
Ext.define("Screener.view.Pharmacyform", {
      extend: 'Ext.form.Panel',
      alias:'widget.pharmacyform', 
```

# magento - Magento：在产品页面上显示所有图像（view.phtml）

> ID：10151654
> 
> 赞同：1
> 
> 时间：2012-04-14T06:46:33.573
> 
> 标签：magento

我可以通过 $this->getGalleryImages() 看到 media.phtml（带有 Cloud Zoom 扩展）如何列出产品页面上的所有图像：

```
<?php foreach ($this->getGalleryImages() as $_image): ?>
<?php ... ?>
<?php endforeach; ?> 
```

但是，当我在目录产品页面模板 view.phtml 中使用 $this->getGalleryImages() 时，它不会返回或输出任何内容。但是，这只会打印产品页面上的第一张图片：

```
<img src="<?php echo $this->helper('catalog/image')->init($_product, 'image')->constrainOnly(TRUE)->keepAspectRatio(TRUE)->keepFrame(FALSE)->setWatermarkImageOpacity(0)->resize(300, null);?>" alt="<?php echo $this->htmlEscape($this->getImageLabel());?>" title="<?php echo $this->htmlEscape($this->getImageLabel());?>" /> 
```

我的问题是如何遍历并显示产品页面上的所有产品图像（view.phtml，而不是 media.phtml）？基本上，我希望它们全部显示在页面上，而不需要缩略图或缩放或任何东西，只是简单的大图像，一个接一个。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-14T08:56:50.693

这是显示产品图片库的代码..

谢谢，吉特

```
<?php $_images = Mage::getModel('catalog/product')->load($_product->getId())->getMediaGalleryImages(); ?>
<?php if($_images){?>            
    <?php $i=0; foreach($_images as $_image){ $i++; ?>
        <img src="<?php echo $this->helper('catalog/image')->init($_product, 'thumbnail', $_image->getFile())->resize(108,90); ?>" alt="<?php echo $this->htmlEscape($_image->getLabel());?>" title="<?php $this->htmlEscape($_image->getLabel());?>" /><?php } ?>
    <?php } ?> 
```

# c# - 从 Web 和 Win 表单应用程序中的 WCF 服务访问实体框架数据时出错？

> ID：10151664
> 
> 赞同：1
> 
> 时间：2012-04-14T06:47:39.730
> 
> 标签：c#, wcf, entity-framework

我在大型网络应用程序的中间，我使用实体框架作为我的数据服务，现在我们需要一些 Windows 应用程序来处理我们的数据，所以我想用 WCF 给他们一个服务

但是当我的客户想要获得服务时，我用于缓存实体模型的公共财产发生了一些错误

```
 public partial class DepositEntities : ObjectContext
    {
        public static DepositEntities Current
        {
            get
            {
                DepositEntities oc = 
                    HttpContext.Current.Items["ObjectContext"] as DepositEntities;

                if (oc == null)
                {
                    oc = new DepositEntities();
                    HttpContext.Current.Items["ObjectContext"] = oc;
                }

                return oc;
            }
        }
    } 
```

在调试代码后，我知道问题出在这一行

```
DepositEntities oc = System.Web.HttpContext.Current.Items["ObjectContext"] as DepositEntities; 
```

当我将我的`Current`财产主体更改为这样的东西时

```
public static DepositEntities Current
{
   get
   {
      DepositEntities oc = new DepositEntities();
      return oc;
   }
} 
```

当我从服务中获取数据时一切正常 我没有问题

但是在我加入我的代码的任何地方我都有问题，因为它认为有不同的数据源，因为`new DepositEntities();`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T06:53:38.060

您很可能遇到问题，因为 WCF 没有 HttpContext.Current。阅读有关 WCF 上下文的更多信息 - 这个问题可能是一个好的开始：[http](http://social.msdn.microsoft.com/Forums/en/wcf/thread/27896125-b61e-42bd-a1b0-e6da5c23e6fc) ://social.msdn.microsoft.com/Forums/en/wcf/thread/27896125-b61e-42bd-a1b0-e6da5c23e6fc 。

[我还认为使用 DI 容器（即Castle Windsor](http://www.castleproject.org/container/index.html)）管理 ObjectContext 的生命周期会更好。多亏了这一点，没有必要公开静态属性 Current，这对于 WCF 服务、单元测试等来说是个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T08:07:58.933

[查看wcf 服务和 ASP.NET](http://msdn.microsoft.com/en-us/library/aa702682.aspx "wcf 服务和 ASP.NET")中的“在 ASP.NET 兼容模式下托管 WCF 服务” 。它解释了如何在 wcf 服务中获取有效的 HttpContext。

# javascript - 如何在 html 中创建一个绝对定位的 div，这会将其他元素推到一边，就像在 Apple 的 Pages 中一样？

> ID：10151667
> 
> 赞同：0
> 
> 时间：2012-04-14T06:48:02.213
> 
> 标签：javascript, jquery, css, css-position

如何创建一个 div，它的行为类似于相对定位的 div（因为它不能允许其后面的元素）并且仍然会像绝对定位的 div（因为它可以自由定位）？如果需要，我愿意使用 javascript 和 jQuery。

示例：![例子](../Images/dcceb4d4a2b6639208e98aaa442e66a1.png)或类似的效果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T07:04:08.083

我不认为你可以按照你要求的方式做你要求的事情。不过，您应该能够充分伪造它。

假设您想“插入”一个侧边栏，将页面上的所有主要内容推高 200 像素（侧边栏的宽度）。您可以将页面/容器的左边距增加 200 像素（如果您想要华丽，请对其进行动画处理），然后将您的 div 绝对定位在您想要的位置（如果您希望它看起来像它正在“推动”其他内容）。如果我正确理解了这个问题，那么这应该可以实现您想要的视觉效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T07:01:16.140

我认为您的意思是 Draggable 元素，您可以使用 jQuery 用户界面：

[http://jqueryui.com/demos/draggable/](http://jqueryui.com/demos/draggable/)

# php - PHP ftp_put 和远程路径

> ID：10151676
> 
> 赞同：2
> 
> 时间：2012-04-14T06:49:13.567
> 
> 标签：php, ftp

你们中的任何人都知道在传递完整的远程路径而不是仅传递文件名时可能导致 ftp_put 失败的原因吗？

我之所以问，是因为根据[http://www.php.net/manual/en/function.ftp-put.php](http://www.php.net/manual/en/function.ftp-put.php)，第二个参数是远程文件路径，但显然有人遇到了问题：[http://www.php。网络/手册/en/function.ftp-put.php#89986](http://www.php.net/manual/en/function.ftp-put.php#89986)

我想避免 ftp_chdir 到所有目标，因为它花费太多时间。

# delphi - 为什么我的 Delphi 2006 应用程序的任务栏按钮上下文菜单不完整？

> ID：10151677
> 
> 赞同：2
> 
> 时间：2012-04-14T06:49:27.123
> 
> 标签：delphi, vcl, taskbar

当我在 Delphi 2006 中创建一个新的 VCL 应用程序并运行它（不添加任何我自己的代码或引用我自己的任何单元）时，该应用程序不会在其任务栏的上下文菜单中拥有所有期望的菜单项按钮。但是，应用程序的系统菜单（左键单击表单图标时获得的菜单）具有所有常规菜单项。正如您在以下屏幕截图中所见，前者缺少`Move`( `Verschieben`)、`Size`( `Größe ändern`) 和`Maximize`( )`Maximieren`

![在此处输入图像描述](../Images/3cbf4eb37c7c52281d81749abb40657e.png) ![在此处输入图像描述](../Images/8651f83cc94ebb22825213426cc9e141.png)

我无法在 Delphi XE（我可以访问的唯一其他 Delphi 版本）中重现这一点，而且我也没有发现任何其他人报告此行为。

我还查看了这些菜单的属性`TForm`以及`TApplication`是否有一个来控制这些菜单，但还没有找到。

我知道的所有应用程序在这两个菜单中都有相同的菜单项集，我也希望我的应用程序也这样做。如何让这两个菜单显示同一组项目？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T09:36:10.363

不同之处在于[Application.MainFormOnTaskBar](http://docwiki.embarcadero.com/VCL/en/Forms.TApplication.MainFormOnTaskBar)，这是 D2007 中引入的一个属性，它自动设置为 True。

为了在早期版本中获得相同的效果，我总是使用以下方法：

**项目.dpr：**

```
uses
  Windows,
  ...

  Application.CreateForm(TMainForm, MainForm);
  ShowWindow(Application.Handle, SW_HIDE);
  Application.Run; 
```

**FMain.pas：**

```
 TMainForm = class(TForm)
  private
    procedure WMSysCommand(var Message: TWMSysCommand);
      message WM_SYSCOMMAND;
  protected
    procedure CreateParams(var Params: TCreateParams); override;
  ...

procedure TMainForm.CreateParams(var Params: TCreateParams);
begin
  inherited CreateParams(Params);
  with Params do
  begin
    ExStyle := ExStyle or WS_EX_APPWINDOW;
    WndParent := GetDesktopWindow;
  end;
end;

procedure TMainForm.WMSysCommand(var Message: TWMSysCommand);
begin
  if Message.CmdType = SC_MINIMIZE then
    ShowWindow(Handle, SW_MINIMIZE)
  else
    inherited;
end; 
```

这仅在`MainForm.Visible`设置`True`设计时间时有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T22:01:39.033

在 D2006 中，任务栏按钮归`TApplication`窗口所有。单击任务栏按钮将显示`TApplication`系统菜单，该菜单由 VCL 更改以始终删除最大化、大小和移动菜单项。`TForm`另一方面，当单击 a时，会显示 Form 的系统菜单，VCL 根据 Form 的`BorderStyle`和`BorderIcon`属性对其进行更改。因此，您实际上是在为两个单独的窗口处理两个单独的菜单。

在现代 Delphi 版本中，将新`TApplication.ShowMainFormOnTaskbar`属性设置为`true`时，任务栏由`TForm`而不是拥有`TApplication`，因此单击任务栏按钮将显示窗体的系统菜单而不是`TApplication`系统菜单。因此，在这种情况下，您实际上是在处理单个窗口的单个菜单。

# database - 搜索数据库所需的时间

> ID：10151679
> 
> 赞同：0
> 
> 时间：2012-04-14T06:49:36.407
> 
> 标签：database, authentication, time, hash, salt

我是 Web 开发和数据库的新手，正在尝试以合理的安全性和速度实现密码身份验证。我已经阅读了关于对密码进行哈希处理并为每个用户附加一个唯一的盐，以阻止人们生成彩虹表。

我的问题涉及我必须搜索以验证用户的时间。由于我不知道谁在任何给定时间尝试连接，在我看来，我需要从 salt 列中检索每个字段，然后对提交的密码 + 每个唯一的 salt 进行哈希处理，然后最后将每个输出与哈希值进行比较表中的字符串？

所以我必须为哈希（密码+盐）的每个组合提交一个单独的查询？这似乎会非常缓慢。我错过了一个可以加快进程的技巧吗？或者它只是为了更好的安全性而牺牲它的速度？还是我弄错了，以当今计算机的速度，这根本不是问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T07:00:52.337

您不能仅根据密码对用户进行身份验证。密码是对用户身份的验证，因此您需要某种用户标识符——姓名或其他任何东西。然后表格看起来像`users(..., name, password, ...)`，您`SELECT password WHERE name = "foo"`从那里开始并继续进行验证。方便的形式是将生成派生密钥所需的所有参数保留在密码字段内，例如：

```
algo$salt$password hash 
```

对于散列本身，您不希望它很快 - 请参阅 PBKDF2、bcrypt 或 scrypt 等密钥派生函数。通常，调整参数以使导出一个密钥大约需要一秒钟是使暴力破解不可行的好方法。

# c# - 通过 FTP 上传文件

> ID：10151680
> 
> 赞同：24
> 
> 时间：2012-04-14T06:49:47.360
> 
> 标签：c#, asp.net, .net, ftp, ftpwebrequest

我想将文件从一台服务器上传到另一台 FTP 服务器，以下是我上传文件的代码，但它引发错误：

> 远程服务器返回错误：(550) 文件不可用（例如，找不到文件，无法访问）。

这是我的代码：

```
string CompleteDPath = "ftp URL";
string UName = "UserName";
string PWD = "Password";
WebRequest reqObj = WebRequest.Create(CompleteDPath + FileName);
reqObj.Method = WebRequestMethods.Ftp.UploadFile;
reqObj.Credentials = new NetworkCredential(UName, PWD);
FileStream streamObj = System.IO.File.OpenRead(Server.MapPath(FileName));
byte[] buffer = new byte[streamObj.Length + 1];
streamObj.Read(buffer, 0, buffer.Length);
streamObj.Close();
streamObj = null;
reqObj.GetRequestStream().Write(buffer, 0, buffer.Length);
reqObj = null; 
```

你能告诉我哪里出错了吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-04-14T07:54:39.690

请确保您的 ftp 路径设置如下所示。

```
string CompleteDPath = "ftp://www.example.com/wwwroot/videos/";

string FileName = "sample.mp4";

WebRequest reqObj = WebRequest.Create(CompleteDPath + FileName); 
```

以下脚本非常适合我通过 ftp 将文件和视频上传到另一个服务器。

```
FtpWebRequest ftpClient = (FtpWebRequest)FtpWebRequest.Create(ftpurl + "" + username + "_" + filename);
ftpClient.Credentials = new System.Net.NetworkCredential(ftpusername, ftppassword);
ftpClient.Method = System.Net.WebRequestMethods.Ftp.UploadFile;
ftpClient.UseBinary = true;
ftpClient.KeepAlive = true;
System.IO.FileInfo fi = new System.IO.FileInfo(fileurl);
ftpClient.ContentLength = fi.Length;
byte[] buffer = new byte[4097];
int bytes = 0;
int total_bytes = (int)fi.Length;
System.IO.FileStream fs = fi.OpenRead();
System.IO.Stream rs = ftpClient.GetRequestStream();
while (total_bytes > 0)
{
   bytes = fs.Read(buffer, 0, buffer.Length);
   rs.Write(buffer, 0, bytes);
   total_bytes = total_bytes - bytes;
}
//fs.Flush();
fs.Close();
rs.Close();
FtpWebResponse uploadResponse = (FtpWebResponse)ftpClient.GetResponse();
value = uploadResponse.StatusDescription;
uploadResponse.Close(); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-15T13:44:22.880

这是在 FTP 服务器上上传文件的示例代码

```
 string filename = Server.MapPath("file1.txt");
    string ftpServerIP = "ftp.demo.com/";
    string ftpUserName = "dummy";
    string ftpPassword = "dummy";

    FileInfo objFile = new FileInfo(filename);
    FtpWebRequest objFTPRequest;

    // Create FtpWebRequest object 
    objFTPRequest = (FtpWebRequest)FtpWebRequest.Create(new Uri("ftp://" + ftpServerIP + "/" + objFile.Name));

    // Set Credintials
    objFTPRequest.Credentials = new NetworkCredential(ftpUserName, ftpPassword);

    // By default KeepAlive is true, where the control connection is 
    // not closed after a command is executed.
    objFTPRequest.KeepAlive = false;

    // Set the data transfer type.
    objFTPRequest.UseBinary = true;

    // Set content length
    objFTPRequest.ContentLength = objFile.Length;

    // Set request method
    objFTPRequest.Method = WebRequestMethods.Ftp.UploadFile;

    // Set buffer size
    int intBufferLength = 16 * 1024;
    byte[] objBuffer = new byte[intBufferLength];

    // Opens a file to read
    FileStream objFileStream = objFile.OpenRead();

    try
    {
        // Get Stream of the file
        Stream objStream = objFTPRequest.GetRequestStream();

        int len = 0;

        while ((len = objFileStream.Read(objBuffer, 0, intBufferLength)) != 0)
        {
            // Write file Content 
            objStream.Write(objBuffer, 0, len);

        }

        objStream.Close();
        objFileStream.Close();
    }
    catch (Exception ex)
    {
        throw ex;
    } 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-09-23T13:01:47.990

您还可以使用更高级别的`WebClient`类型来使用更简洁的代码执行 FTP 工作：

```
using (WebClient client = new WebClient())
{
    client.Credentials = new NetworkCredential(ftpUsername, ftpPassword);
    client.UploadFile("ftp://ftpserver.com/target.zip", "STOR", localFilePath);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-25T22:02:26.830

如果您仍然遇到问题，这就是让我克服这一切的原因。尽管我可以完美地看到我尝试上传的目录中的文件，但我遇到了同样的错误 - 即：我正在覆盖一个文件。

我的 ftp 网址看起来像：

```
// ftp://www.mywebsite.com/testingdir/myData.xml
FtpWebRequest request = (FtpWebRequest)WebRequest.Create("ftp://www.mywebsite.com/testingdir/myData.xml" 
```

因此，我的凭据使用我的测试人员用户名和密码；

```
request.Credentials = new NetworkCredential ("tester", "testerpw"); 
```

好吧，我的“测试人员”ftp 帐户设置为“ [ftp://www.mywebsite.com/testingdir](ftp://www.mywebsite.com/testingdir) ”，但是当我实际 ftp [从资源管理器中说]时，我只是输入了“ [ftp://www.mywebsite.com](ftp://www.mywebsite.com) ”并且使用我的测试人员凭据登录并自动发送到“testingdir”。

因此，为了在 C# 中完成这项工作，我最终使用了 url - [ftp://www.mywebsite.com/myData.xml](ftp://www.mywebsite.com/myData.xml) 提供了我的测试人员帐户凭据，一切正常。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-12-15T11:37:13.410

1.  请确保您传递给的 URL`WebRequest.Create`具有以下格式：

    ```
     ftp://ftp.example.com/remote/path/file.zip 
    ```

2.  使用 .NET 框架上传文件有更简单的方法。

## 最简单的方法

使用 .NET 框架将文件上传到 FTP 服务器的最简单的方法是使用[`WebClient.UploadFile`方法](https://docs.microsoft.com/en-us/dotnet/api/system.net.webclient.uploadfile)：

```
WebClient client = new WebClient();
client.Credentials = new NetworkCredential("username", "password");
client.UploadFile(
    "ftp://ftp.example.com/remote/path/file.zip", @"C:\local\path\file.zip"); 
```

* * *

## 高级选项

如果您需要更大的控制，`WebClient`但不提供（如[TLS/SSL 加密](https://stackoverflow.com/q/4331665/850848#56888555)、ascii/文本传输模式、传输恢复等），[`FtpWebRequest`](https://docs.microsoft.com/en-us/dotnet/api/system.net.ftpwebrequest)请像您一样使用。但是您可以使用以下方法使代码更简单、更高效[`Stream.CopyTo`](https://docs.microsoft.com/en-us/dotnet/api/system.io.stream.copyto)：

```
FtpWebRequest request =
    (FtpWebRequest)WebRequest.Create("ftp://ftp.example.com/remote/path/file.zip");
request.Credentials = new NetworkCredential("username", "password");
request.Method = WebRequestMethods.Ftp.UploadFile;  

using (Stream fileStream = File.OpenRead(@"C:\local\path\file.zip"))
using (Stream ftpStream = request.GetRequestStream())
{
    fileStream.CopyTo(ftpStream);
} 
```

* * *

有关更多选项，包括进度监控和上传整个文件夹，请参阅：
[使用 C# 将文件上传到 FTP](https://stackoverflow.com/q/15268760/850848#45705850)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-14T10:47:44.197

这是解决方案！！！！！！！

**将本地目录(ex:D:\Documents) 中的所有文件上传到 FTP url (ex: ftp:\{ip address}\{sub dir name})**

```
public string UploadFile(string FileFromPath, string ToFTPURL, string SubDirectoryName, string FTPLoginID, string
FTPPassword)
    {
        try
        {
            string FtpUrl = string.Empty;
            FtpUrl = ToFTPURL + "/" + SubDirectoryName;    //Complete FTP Url path

            string[] files = Directory.GetFiles(FileFromPath, "*.*");    //To get each file name from FileFromPath

            foreach (string file in files)
            {
                FtpWebRequest request = (FtpWebRequest)FtpWebRequest.Create(FtpUrl + "/" + Path.GetFileName(file));
                request.Method = WebRequestMethods.Ftp.UploadFile;
                request.Credentials = new NetworkCredential(FTPLoginID, FTPPassword);
                request.UsePassive = true;
                request.UseBinary = true;
                request.KeepAlive = false;

                FileStream stream = File.OpenRead(FileFromPath + "\\" + Path.GetFileName(file));
                byte[] buffer = new byte[stream.Length];

                stream.Read(buffer, 0, buffer.Length);
                stream.Close();

                Stream reqStream = request.GetRequestStream();
                reqStream.Write(buffer, 0, buffer.Length);
                reqStream.Close();
            }
            return "Success";
        }
        catch(Exception ex)
        {
            return "ex";
        }

    } 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-05-25T05:48:47.110

```
 public void UploadImageToftp()

        {

     string server = "ftp://111.61.28.128/Example/"; //server path
     string name = @"E:\Apache\htdocs\visa\image.png"; //image path
      string Imagename= Path.GetFileName(name);

    FtpWebRequest request = (FtpWebRequest)WebRequest.Create(new Uri(string.Format("{0}{1}", server, Imagename)));
    request.Method = WebRequestMethods.Ftp.UploadFile;
    request.Credentials = new NetworkCredential("username", "password");
    Stream ftpStream = request.GetRequestStream();
    FileStream fs = File.OpenRead(name);
    byte[] buffer = new byte[1024];
    int byteRead = 0;
    do
    {
        byteRead = fs.Read(buffer, 0, 1024);
        ftpStream.Write(buffer, 0, byteRead);
    }
    while (byteRead != 0);
    fs.Close();
    ftpStream.Close();
    MessageBox.Show("Image Upload successfully!!");
} 
```

# java - Android popupwindow outsidetouchable 和 ontouch 监听器

> ID：10151684
> 
> 赞同：2
> 
> 时间：2012-04-14T06:51:44.347
> 
> 标签：java, android, android-layout

嗨，我的项目有一个弹出窗口。我想要这些；

弹出窗口的外部将是可触摸的，当点击弹出窗口时弹出窗口将被关闭。

实际上我想像这样使用它

全屏后退按钮。我有一个全屏按钮。它使一些组件全屏显示。我想从全屏视图完全返回一个弹出按钮。

我怎样才能做到这一点 ？

抱歉英语不好。谢谢...

# mysql - MYSQL 触发器 - 如何存储计算字段的结果

> ID：10151687
> 
> 赞同：2
> 
> 时间：2012-04-14T06:52:10.143
> 
> 标签：mysql, triggers

我正在使用 MySQL 5.5。我需要使用 mysql 触发器语法向我的表添加触发器：http: [//dev.mysql.com/doc/refman/5.0/en/trigger-syntax.html](http://dev.mysql.com/doc/refman/5.0/en/trigger-syntax.html)

他们给出的例子并没有解释我该如何去做——

我有一张桌子 - `table(a INT, b INT, c INT);`。field`a`和`b`是数字，而 field`c`应该是`a`+ `b`。现在我敢肯定你想知道为什么不把它放在一个视图中并完成它，或者为什么不把它放在我的代码中。原因是因为我正在与需要自动计算字段的便利性的客户合作，并且能够修改值以防它需要变化。他们是一家审计公司，由于公司缺少审计日期等，通常需要按摩数字。

那么如何创建一个触发器，它将：

```
on insert:
make `c` the value of `a` + `b`.

on update: 
if the value of NEW.`c`==OLD.`c` THEN
make `c` the value of `a` + `b`.
ELSE 
no change 
```

如果新值与旧值不同，更新不会改变的原因是因为这意味着他们希望将数字修改为与实际总和略有不同。

请随意更改我的逻辑 - 我的目标是保留`c`手动输入的值，如果没有手动触摸，则将其爆破。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-02T04:50:30.437

我知道这是一个老问题，但如果这里仍然需要答案，那就是。

首先，为了进行更直接的更新，表中添加了一个 id 列。

```
CREATE TABLE table1
(
  id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  a INT, b INT, c INT
); 
```

现在在`INSERT`触发器中更改逻辑以允许将预先计算的值插入`C`列。

```
CREATE TRIGGER tg_table1_before_insert
BEFORE INSERT ON table1
FOR EACH ROW
  SET NEW.c = IF(NEW.c IS NULL, NEW.a + NEW.b, NEW.c); 
```

更新触发器根据您的要求实现逻辑

```
CREATE TRIGGER tg_table1_before_update
BEFORE UPDATE ON table1
FOR EACH ROW
  SET NEW.c = IF(NEW.c <=> OLD.c, NEW.a + NEW.b, NEW.c); 
```

现在让我们做一些插入和更新

```
INSERT INTO table1 (a, b) VALUES (1, 2), (3, 4);
INSERT INTO table1 (a, b, c) VALUES (5, 6, 0), (7, 8, 100);
UPDATE table1 SET c = 25 WHERE id = 2;
UPDATE table1 SET c = c  WHERE id = 3; 
```

结果我们有

```
| 身份证 | 一个 | 乙| C |
--------------------
| 1 | 1 | 2 | 3 | -- 在插入时计算
| 2 | 3 | 4 | 25 | -- 在更新时显式设置
| 3 | 5 | 6 | 11 | -- 更新时重新计算
| 4 | 7 | 8 | 100 | -- 在插入时显式设置

```

这是**[SQLFiddle](http://sqlfiddle.com/#!2/a54ff/1)**演示

# php - 数组到无序列表

> ID：10151690
> 
> 赞同：5
> 
> 时间：2012-04-14T06:52:43.613
> 
> 标签：php, html, arrays

我正在尝试将一些数组值映射到无序 () 列表。

```
 <?php
            $files = scandir($dir);
            //remove "." and ".."
            print_r($files);
    ?>

    <ul>
        <?php foreach($files as $file): ?>
            <li><?= $file ?></li>
        <?php endforeach; ?>
    </ul> 
```

它确实正确地遍历了数组，因为它为`<li>`元素提供了项目符号。但是，在这些项目符号旁边没有看到字符串输出。另外，当我 print_r 数组时，值就在那里。

输出看起来像这样，带有正确数量的项目符号，但它们旁边没有文本：

> .
> .
> .

我在这里做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T08:36:36.807

```
function array2ul($array) {
    $out = "<ul>";
    foreach($array as $key => $elem){
        if(!is_array($elem)){
            $out .= "<li><span>" . $key . ": " . $elem . "</span></li>";
        } else {
            $out .= "<li><span>" . $key . "</span>" . array2ul($elem) . "</li>";
        }
    }
    $out .= "</ul>";
    return $out; 
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-14T06:56:05.483

```
<?php foreach($files as $file): ?>
    <li><?php echo $file ?></li>
<?php endforeach; ?> 
```

**或者**

```
<?php foreach($files as $file): ?>
    <li><? echo $file ?></li>
<?php endforeach; ?> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-14T06:56:38.230

我不确定这一点，但这可能有效：

```
<?php
  $files = scandir($dir);
  //remove "." and ".."
  print_r($files);
?>

<ul>
  <?php foreach($files as $file) { ?>
  <li><?php echo $file; ?></li>
  <?php } ?>
</ul> 
```

这就是我要使用的，如果这不起作用，可能是因为您的`$dir`变量不包含任何内容（有错误）。您的原始代码可能无法正常工作的一个原因是，我认为这些`<? ?>`标签并非在每台服务器上都兼容。另外，据我所知，`<?=$var ?>`php 中没有任何东西。我以为它只存在于 ASP 之类的。

**编辑：**在回答您关于花括号的劣势的问题时，它们是 PHP 中普遍接受的标准。这在 C/C++/C# 系列中可能有所不同，我不知道。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-12T13:10:10.720

`<?= $file ?>`用php.ini替换`<?php echo $file ?>`或启用您的排序标签；看来您的服务器没有启用它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-15T19:01:46.647

今天用这个：

```
if ( !empty($files) ) echo '<li>' . implode('<li>', $files); 
```

# java - 插件 com.android.ide.eclipse.adt 无法加载类 android

> ID：10151691
> 
> 赞同：24
> 
> 时间：2012-04-14T06:52:49.810
> 
> 标签：java, android, eclipse

我是 android 开发新手 我的 Eclipse 工作正常。但是现在当我开始一个新项目时，它给出了一个错误问题打开向导无法打开选定的向导

详细的错误信息是

```
The selected wizard could not be started.
Plug-in com.android.ide.eclipse.adt was unable to load class com.android.ide.eclipse.adt.internal.wizards.newproject.NewProjectWizard.
An error occurred while automatically activating bundle com.android.ide.eclipse.adt (239). 
```

我也无法运行现有的 Android 项目。但我可以启动一个新的 java 项目并运行。为什么会这样

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-14T07:05:52.593

如果您尚未添加 ADT，请执行以下步骤。

帮助 -> 添加新软件 -> 添加。

在`Name`选项中写入 ADT

如果你已经在你的计算机中安装了 ADT，那么添加它的`Location`路径

`jar:file:/D:/ADT-16.0.1.zip!/`

然后 ADT 将安装。

如果出现问题，请尝试删除该广告并重新安装。

```
1) remove the ADT repo (Window->Preferences->Install/Updates->Available Software Sites)
2) add Indigo repo ("http://download.eclipse.org/releases/indigo")
3) run updates
4) add ADT repo again and install 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-08-10T19:14:49.097

对我来说，似乎有效的是：

1.重新启动应用程序 2.（或）重新启动计算机

我仍然有一些问题。有些项目需要加载。我不确定问题是什么。我认为重新安装 ADT 应该可以解决问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-02T20:16:53.003

实际上没有必要卸载 ADT 插件。只需添加这个 repo(http://download.eclipse.org/releases/indigo) 然后帮助->检查更新

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-01T23:31:04.730

我遇到了类似的问题，似乎是 org.eclipse.objectteams 插件给我带来了麻烦。我需要做的是从我的 Eclipse 插件目录中删除插件，如下所示：

```
mv ~/.eclipse/*/plugins/org.eclipse.objectteams* ~/someDIR 
```

较新版本的 Eclipse 似乎存在依赖性问题。抱歉，如果我不能提供更多信息。

也许看到[https://bugs.eclipse.org/bugs/show_bug.cgi?id=350133](https://bugs.eclipse.org/bugs/show_bug.cgi?id=350133)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-29T09:07:26.080

如果您正在运行 AVD，您也会遇到此故障。关闭 AVD 并重新启动 eclipse

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-11-19T04:50:35.433

我为将来引用此帖子的人发布此答案。

所有提到的方法都需要更多时间。我通过更新插件解决了这个问题。但它不像提到vic12的方式。我通过以下方式做到了这一点

帮助 > 安装新软件 > 点击链接***What is already installed***您可以看到已安装软件的列表。您可以根据需要选择和更新任何一个。如果您单击检查更新，它将更新我们安装的所有软件，这将花费大量时间。通过这种方式，您可以更新您想要的。这可以在一分钟内完成。它可以节省时间。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-11-20T00:16:01.493

在我的情况下，计算机重启解决了所有问题，而无需重新安装 ADT 插件。顺便说一句，我正在使用 MAC + ADT_v22

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-09-18T04:18:59.373

转到帮助 - eclipse 市场 - 搜索 adt。然后更新或安装它。这对我有用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-03-26T07:14:00.953

我有同样的问题，我已经开始阅读上面的答案。然后我停下来阅读并重新启动了eclipse，它对我有用！（这是我对所有电子设备的第一个解决方案，并且通常有效:)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-06-06T15:00:13.537

如果您从构建路径中删除 Android，就会发生这种情况。只需尝试重新链接 JRE6 或 7 并重新启动程序。Eclipse 将为您处理它。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-06-10T09:32:02.057

当我重新启动 Eclipse 并更改正在处理的工作区时，我解决了这个问题。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-06-17T09:49:26.310

您也可以尝试更改工作区。它对我有用！

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-09-17T16:13:26.540

如果您使用的是 Mac 并使用 Eclipse ADT，请转到 ADT -> Preferences -> Android。在那里你应该找到一个设置你的 Android SDK 位置的选项。只需浏览现有的 ADT，然后选择 SDK 文件夹。

当然，这只能在安装 SDK 后完成。

![Eclipse ADT 中的 Android 首选项设置](../Images/db1b43f95476d3926b11626c41f10038.png)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-01-04T11:52:53.973

只需重新启动eclipse。似乎 eclipse 有一些错误导致其他组件无法正确加载。或者首先从后台启动 sdk manager 然后 eclipse。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-01-10T08:24:39.470

简单：这对我有用。请按照以下步骤操作。转到：帮助>>安装新软件>>可用软件站点，然后找到：http: [//download.eclipse.org/releases/indigo](http://download.eclipse.org/releases/indigo)

如果可用，那么只需选择并重新加载 Else ADD >> Location 过去这个 url 在 [http://download.eclipse.org/releases/indigo](http://download.eclipse.org/releases/indigo) ">> OK Then >> Reload

希望这对某人有所帮助。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-01-11T18:12:26.330

输入变量 'PATH' JRE 文件夹 (java) 的路径。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-03-09T19:40:31.320

我希望这会对某人有所帮助：我遇到了同样的问题，具有讽刺意味的是，问题出在一个简单的代码错误中。出于某种原因，这个错误导致 Eclipse 对代码中的所有红线反应过度，并保存错误以及本文中提到的错误。

我解决了这个问题（删除了一个额外的}），所有问题都消失了。

我不知道这次 Eclipse 为何反应过度，但这是在安装、卸载或更新任何内容之前检查的另一种选择。

祝你好运。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2015-08-03T03:52:36.840

我只想在此处添加此问题，因为我刚刚发生了问题。我所做的是`close eclipse`，重新打开它，然后它开始工作。如果这不能解决问题，那么我建议您使用@Bhavin 的答案。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2015-08-14T03:57:18.610

您可能存储了两个 ADT 插件，一个带有链接，另一个带有 zip 文件，您必须删除其中一个帮助 -> 安装新软件 -> 站点可用软件 -> 并删除其中一个 adt 插件。

# python - python fileConfig 记录器的更改级别

> ID：10151698
> 
> 赞同：3
> 
> 时间：2012-04-14T06:54:50.973
> 
> 标签：python, logging

我有一个从文件配置的记录器，并且想更改我的日志记录级别，而不必更改 .conf 文件，而是使用内联代码；

```
import logging.config

logging.config.fileConfig('..\\LoggingConfig\\loggingfile.conf')

logging.StreamHandler.setLevel(logging.info)

logging.debug("Debug")
logging.info("Info") 
```

这应该只将“信息”日志行打印到屏幕上。我不知道在哪个对象上调用 setLevel()！logging.StreamHandler.setLevel(logging.info) 只是在 30 分钟搜索后在黑暗中刺伤......

loggingfile.conf 文件；

```
[loggers]
keys=root

[logger_root]
handlers=screen
level=NOTSET

[formatter_modfunc]
format=%(module)-20s  %(funcName)-25s %(levelno)-3s: %(message)s

[handlers]
keys=screen

[handler_screen]
class=StreamHandler
formatter=modfunc
level=DEBUG
args=(sys.stdout,)
qualname=screen 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-14T07:05:55.347

您需要调用`setLevel`您的`Logger`实例。

```
LOGGER = logging.getLogger('your.module.file.name')
LOGGER.setLevel(_level)
LOGGER.info('foo') 
```

如果你只使用基本的记录器，你可以这样做

```
logging.basicConfig(level=_level)
logging.info('foo') 
```

请参阅[http://docs.python.org/howto/logging.html](http://docs.python.org/howto/logging.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-21T08:00:12.380

当使用 logging.config.fileConfig 并且您想一次动态更改所有子记录器的级别时，您可以...

a)为[根记录器](http://docs.python.org/library/logging.html#logging.getLogger)[设置级别](http://docs.python.org/library/logging.html#logging.Logger.setLevel)：

```
logging.getLogger().setLevel(logging.WARNING) 
```

b)[禁用](http://docs.python.org/library/logging.html#logging.disable)其他级别

```
logging.disable(logging.INFO) 
```

# php - 如何在让用户通过电子邮件将内容发送给他们的朋友的同时防止垃圾邮件？

> ID：10151699
> 
> 赞同：3
> 
> 时间：2012-04-14T06:54:51.410
> 
> 标签：php, javascript

我正在开发一个允许用户生成内容（短篇小说）的应用程序（使用 PHP 和 JavaScript），我想添加一个“通过电子邮件发送给你的朋友”按钮。

不过，我担心这可能会被用来发送垃圾邮件。

我可以做些什么来防止这种情况发生？我在想：

1）用户必须在我发送之前确认他们自己的个人电子邮件地址 2）我在某个地方有一个隐藏的字段，机器人会填写

我还应该做什么？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T07:20:36.113

我看到您的问题有两种解决方案。

1) 只允许注册用户发送电子邮件。如果您打算让非注册人员主要访问该网站，这可能不是一个好主意。

2）在表单中添加[验证码](http://en.wikipedia.org/wiki/CAPTCHA)。这将阻止机器人发送任何东西。

你在网上看到了什么？人们如何在自己的网站上处理这个问题？尝试上网、浏览博客、论坛等，看看他们用什么来保护自己。也许他们比我有更好的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T07:27:16.093

您还可以添加一个速率限制，例如 1/分钟和 10/小时（例如，需要找出适合您的数字），如果违反了 1 小时，如果在该小时结束之前违反了 2 小时等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T07:15:04.290

如果我理解正确，用户还可以添加编辑故事，从而编写垃圾邮件。由于垃圾邮件的一部分发生在廉价的人类用户身上，因此您遇到了问题。只提供**PDF 格式的下载**。然后他们可以自己邮寄。没有验证码，不确定将添加到朋友电子邮件中的内容或地址数据会发生什么。所以它甚至更容易接受，并且可能会为您的应用程序增加成功。*缺点你不能挖掘数据。*

# android - 在 android 的 AsyncTask 的 onPostExecute() 中创建一个窗口

> ID：10151701
> 
> 赞同：0
> 
> 时间：2012-04-14T06:55:03.723
> 
> 标签：android, window, android-asynctask

该应用程序是从服务器下载一些文本并在新窗口中向用户显示文本。我需要一个新窗口，因为文本量可能非常大。

由于下载过程可能会花费太多时间，因此我使用内部`AsyncTask`类将其作为后台任务来处理。下载文本后，我希望在其中创建一个新窗口`onPostExecute()`来`AsyncTask`显示任务。

中的代码`onPostExecute()`如下：

```
Intent intent = new Intent(this.parent, DisplayActivity.class);
Bundle bundle = new Bundle();
bundle.putStringArray("array", fileContent);
intent.putExtra("bundle", bundle);
startActivity(intent); 
```

`this.parent`指当时向用户展示的Activity。文件内容是包含文本的字符串。

但是，代码不起作用。没有窗口显示。任何帮助表示赞赏。

顺便问一下，有没有更好的方法来实现应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T06:57:08.963

```
Intent intent = new Intent(this.parent, DisplayActivity.class); 
```

而不是`this.parent`你应该使用，

```
Intent intent = new Intent(Activity_Name.this, DisplayActivity.class); 
```

# iphone - 滚动视图问题

> ID：10151705
> 
> 赞同：1
> 
> 时间：2012-04-14T06:56:25.110
> 
> 标签：iphone

朋友们

我开发了一个滚动视图设置它的内容大小并在滚动视图上设置三个视图并且它的滚动很好，我也希望它在segmentcontrol点击时移动但它没有发生我的视图在滚动时没有移动有人可以帮我弄清楚这一点问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T08:19:42.293

通过点击 Segment-control 来移动滚动视图...在这里，我为您提供示例代码...您只需要决定要移动滚动视图的段索引...

```
 if (SegmentControll.selectedSegmentIndex==0) 
{
 if ( self.scrollView.contentOffset.x <= self.scrollView.frame.size.width ) {
    CGRect frame;
    frame.origin.x = self.scrollView.contentOffset.x + self.scrollView.frame.size.width;
    frame.origin.y = 0;
    frame.size = self.scrollView.frame.size;
    [self.scrollView scrollRectToVisible:frame animated:YES];
    //pageControlBeingUsed = YES;
 }
}

else if (SegmentControll.selectedSegmentIndex==1) 
{
 if ( self.scrollView.contentOffset.x >= self.scrollView.frame.size.width ) {
    CGRect frame;
    frame.origin.x = self.scrollView.contentOffset.x - self.scrollView.frame.size.width;
    frame.origin.y = 0;
    frame.size = self.scrollView.frame.size;
    [self.scrollView scrollRectToVisible:frame animated:YES];
    //pageControlBeingUsed = YES;
 }
} 
```

我希望这能帮到您...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T07:34:06.450

希望我明白你的问题

尝试这个

-(IBAction)SegmentControll:(id)sender

{

```
[myTableView removeFromSuperview];

if (SegmentControll.selectedSegmentIndex==0) 

{

     Yourscollview.scrollEnabled=NO;

} 
```

if (SegmentControll.selectedSegmentIndex==1)

```
{

    Yourscollview.scrollEnabled=YES;

} 
```

}

如果需要更多帮助问我。

# mysql - 如何查看程序发送到本地 mySQL 数据库的本地流量？

> ID：10151707
> 
> 赞同：0
> 
> 时间：2012-04-14T06:56:38.643
> 
> 标签：mysql, capture

无论我做什么，我似乎都无法让它连接起来。我无法反编译它；所以看看它发送了什么会很有帮助。

例如， MySQL Workbench 会记录*一些*内容，但似乎并没有为每次连接尝试提供非常详细的日志记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T07:51:59.890

试试[MySQL 代理](http://forge.mysql.com/wiki/MySQL_Proxy)。

它位于 MySQL 服务器和客户端之间，允许您监视通信。

# android - 在android中将视频上传到facebook

> ID：10151708
> 
> 赞同：7
> 
> 时间：2012-04-14T06:56:39.120
> 
> 标签：android, facebook

**问题**：

我的视频没有上传到 Facebook。

**问题**：

如何将视频上传到 Facebook？

**注意**：

我可以从我的画廊上传图片。

没有`Exceptions`被抛出。我觉得线路有问题

`params.putString("filename", <selectedviedoPath> )`

```
AsyncFacebookRunner mAsyncFbRunner = new AsyncFacebookRunner(mFacebook);
        Bundle params = new Bundle();
        //convert to byte stream
   **FileInputStream is = new FileInputStream(new File(selectedviedoPath));**
   ByteArrayOutputStream bs = new ByteArrayOutputStream();
        int data = 0;
        while((data = is.read()) != -1)
        bs.write(data);

        is.close();
        byte[] raw = bs.toByteArray();
        bs.close();

        params.putByteArray("video", raw);
        params.putString("filename", <selectedviedoPath> );
        mAsyncFbRunner.request("me/videos", params, "POST", new WallPostListener()); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T05:11:38.027

以下是我所做的，现在非常适合在 Facebook 上发布视频。

**FacebookVideoPostActivity.java**

```
public class FacebookVideoPostActivity extends Activity {
/** Called when the activity is first created. */

private static Facebook facebook = new Facebook("YOUR_APP_ID"); // App ID For the App
private String permissions[] = {""};  
private String statusString = ""; 
private Button btn1;
private String PATH = "/sdcard/test1.3gp"; // Put Your Video Link Here
private ProgressDialog mDialog ;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    btn1 = (Button) findViewById(R.id.button1);
    mDialog = new ProgressDialog(FacebookVideoPostActivity.this);
    mDialog.setMessage("Posting video...");

    btn1.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            facebook.authorize(FacebookVideoPostActivity.this, new String[]{ "user_photos,publish_checkins,publish_actions,publish_stream"},new DialogListener() {                     
                @Override                     
                public void onComplete(Bundle values) {   
                    postVideoonWall(); 

                }                      
                @Override                     
                public void onFacebookError(FacebookError error) {}                      
                @Override                     
                public void onError(DialogError e) {}                      
                @Override                     
                public void onCancel() {}                 
            });

        }
    });
}

public void postVideoonWall() { 
    mDialog.setMessage("Posting ...");
    mDialog.show();
    new Thread(new Runnable() {
        @Override
        public void run() {

            byte[] data = null;
            InputStream is = null;
            String dataMsg = "This video is posted from bla bla bla App";
            Bundle param;

            try {
                is = new FileInputStream(PATH);
                data = readBytes(is);
                param = new Bundle();
                param.putString("message", dataMsg);
                param.putString("filename", "test1.mp4");
                //param.putString("method", "video.upload"); 
                param.putByteArray("video", data);
                AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(facebook);
                mAsyncRunner.request("me/videos", param, "POST", new SampleUploadListener(), null);
            }
            catch (FileNotFoundException e) {
               e.printStackTrace();
            }
            catch (IOException e) {
               e.printStackTrace();
            }
        }
    }).start();

}

private Handler mPostHandler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        mDialog.dismiss();
        if(msg.what==0){
            Toast.makeText(getApplicationContext(), "Image Posted on Facebook.", Toast.LENGTH_SHORT).show();
        }
        else if(msg.what==1) {
            Toast.makeText(getApplicationContext(), "Responce error.", Toast.LENGTH_SHORT).show();
        }else if(msg.what==2){
            Toast.makeText(getApplicationContext(), "Facebook error.", Toast.LENGTH_SHORT).show();
        }
    }
};

public byte[] readBytes(InputStream inputStream) throws IOException {
    // This dynamically extends to take the bytes you read.
    ByteArrayOutputStream byteBuffer = new ByteArrayOutputStream();

    // This is storage overwritten on each iteration with bytes.
    int bufferSize = 1024;
    byte[] buffer = new byte[bufferSize];

    // We need to know how may bytes were read to write them to the byteBuffer.
    int len = 0;
    while ((len = inputStream.read(buffer)) != -1) {
        byteBuffer.write(buffer, 0, len);
    }

    // And then we can return your byte array.
    return byteBuffer.toByteArray();
}

public class SampleUploadListener extends BaseRequestListener {
    public void onComplete(final String response, final Object state) {
        try {             
            Log.d("Facebook-Example", "Response: " + response.toString());             
            JSONObject json = Util.parseJson(response);             
            mPostHandler.sendEmptyMessage(0);
            // then post the processed result back to the UI thread             
            // if we do not do this, an runtime exception will be generated             
            // e.g. "CalledFromWrongThreadException: Only the original             
            // thread that created a view hierarchy can touch its views."          
        } catch (JSONException e) {            
            mPostHandler.sendEmptyMessage(1);
            Log.w("Facebook-Example", "JSON Error in response");         
        } catch (FacebookError e) { 
            mPostHandler.sendEmptyMessage(2);
            Log.w("Facebook-Example", "Facebook Error: " + e.getMessage());         
        }     
    }      
    @Override     
    public void onFacebookError(FacebookError e, Object state) {         
        // TODO Auto-generated method stub      
    } 
} 
```

}

**现在，在您的项目中集成 Facebook SDK 并进行如下更改：**

从 facebook sdk 更改 Util.java 如下

```
public static String openUrl(String url, String method, Bundle params)
          throws MalformedURLException, IOException {
        // random string as boundary for multi-part http post
        String strBoundary = "3i2ndDfv2rTHiSisAbouNdArYfORhtTPEefj3q2f";
        String endLine = "\r\n";

        OutputStream os;

// ADDED By Shreyash For Publish Video 
// sbmmahajan@gmail.com
// Mo. 919825056129
        // Try to get filename key
          String filename = params.getString("filename");
          // If found
           if (filename != null) {
              // Remove from params
                params.remove("filename");
           }
//===================================================

        if (method.equals("GET")) {
            url = url + "?" + encodeUrl(params);
        }
        Util.logd("Facebook-Util", method + " URL: " + url);
        HttpURLConnection conn =
            (HttpURLConnection) new URL(url).openConnection();
        conn.setRequestProperty("User-Agent", System.getProperties().
                getProperty("http.agent") + " FacebookAndroidSDK");
        if (!method.equals("GET")) {
            Bundle dataparams = new Bundle();
            for (String key : params.keySet()) {
                Object parameter = params.get(key);
                if (parameter instanceof byte[]) {
                    dataparams.putByteArray(key, (byte[])parameter);
                }
            }

            // use method override
            if (!params.containsKey("method")) {
                params.putString("method", method);
            }

            if (params.containsKey("access_token")) {
                String decoded_token =
                    URLDecoder.decode(params.getString("access_token"));
                params.putString("access_token", decoded_token);
            }

            conn.setRequestMethod("POST");
            conn.setRequestProperty(
                    "Content-Type",
                    "multipart/form-data;boundary="+strBoundary);
            conn.setDoOutput(true);
            conn.setDoInput(true);
            conn.setRequestProperty("Connection", "Keep-Alive");
            conn.connect();
            os = new BufferedOutputStream(conn.getOutputStream());

            os.write(("--" + strBoundary +endLine).getBytes());
            os.write((encodePostBody(params, strBoundary)).getBytes());
            os.write((endLine + "--" + strBoundary + endLine).getBytes());

            if (!dataparams.isEmpty()) {

                for (String key: dataparams.keySet()){
    // ADDED By Shreyash For Publish Video 
// sbmmahajan@gmail.com
// Mo. 919825056129
// os.write(("Content-Disposition: form-data; filename=\"" + key + "\"" + endLine).getBytes());
                    os.write(("Content-Disposition: form-data; filename=\"" + ((filename) != null ? filename : key) + "\"" + endLine).getBytes());
                    os.write(("Content-Type: content/unknown" + endLine + endLine).getBytes());
                    os.write(dataparams.getByteArray(key));
                    os.write((endLine + "--" + strBoundary + endLine).getBytes());

                }
            }
            os.flush();
        }

        String response = "";
        try {
            response = read(conn.getInputStream());
        } catch (FileNotFoundException e) {
            // Error Stream contains JSON that we can parse to a FB error
            response = read(conn.getErrorStream());
        }
        return response;
    } 
```

将上述函数放入该 Util.Java 并注释其中可用的相同函数。

现在运行项目。如果有任何疑问，请告诉我。

享受 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T15:06:22.053

上传视频的 API 调用不同于普通的 Graph API 查询。请参阅此处的 facebook 教程：[https ://developers.facebook.com/blog/post/493/](https://developers.facebook.com/blog/post/493/)

# php - 从另一个表php中的值排序值

> ID：10151717
> 
> 赞同：0
> 
> 时间：2012-04-14T06:57:58.337
> 
> 标签：php, mysql

我在这里的第一篇文章。

我正在尝试使用 products_categories 表中的值对我的产品表中显示的值进行排序。

我的产品表包含以下字段：

```
id | psku | pname | pdescription 
```

我的 products_categories 表有以下字段：

```
id | psku | subcategory | orderid 
```

我正在构建的站点是一个小型 eshop，其中包含几个子类别。此时的设置允许我将 1 个产品添加到多个类别。

例如，产品 sku# 6001 将列在 2 个子类别中，即化妆品和睫毛。然后，我的 products_subcategories 表中将有 2 个条目，如下所示：

```
id | psku | subcategory | orderid
1 | 6001 | cosmetics | 1
2 | 6004 | eyelashes | 1
3 | 6003 | cosmetics | 2
4 | 6011 | cosmetics | 3
5 | 6020 | eyelashes | 2
6 | 6045 | cosmetics | 4 
```

我目前正在使用以下查询来显示每个子类别中的数据：

```
SELECT * FROM products LEFT JOIN products_subcategories 
ON products.psku = products_subcategories.psku 
WHERE products.psku IN ('6001','6003','6011','6020','6045') 
GROUP BY e2o_products_subcategories.psku 
ORDER BY e2o_products_subcategories.orderid ASC 
```

这应该显示我的结果：

```
Cosmetics:
PSKU 6001
PSKU 6003
PSKU 6011
PSKU 6045

eyelashes:
PSKU 6004
PSKU 6020 
```

它似乎不起作用。尝试了其他一些组合，结果最差。产品显示，但不会按 orderid 排序

有人可以解决这个问题吗？如果需要，我可以提供样本数据。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T07:03:22.437

您需要先订购子类别名称，所以

```
SELECT * FROM products 
    LEFT JOIN products_subcategories 
    ON products.psku = products_subcategories.psku 
WHERE products.psku IN ('6001','6003','6011','6020','6045') 
ORDER BY e2o_products_subcategories.subcategory ASC,
         e2o_products_subcategories.orderid ASC 
```

请注意，我还删除了您的 GROUP BY，因为您只会在结果中返回每个 PSKU 一次，并且您无法自信地预测多个类别中的 PSKU 将返回哪个子类别。如果每个产品在子类别表中都有一个条目，您可能希望将 LEFT JOIN 更改为 INNER JOIN。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T11:59:04.747

我查看了您创建的 sampledata.php 文件。我正在努力理解您正在尝试做的事情。为什么要运行两个查询？当然，您可以通过单个查询获得相同的结果。

您的第一个查询将返回一个 pskus 列表，然后您将其传递给第二个查询 -

```
SELECT psku, subcategory
FROM products_subcategories
WHERE subcategory = 'cosmetics'

+------+-------------+
| psku | subcategory |
+------+-------------+
| 6018 |  cosmetics  |
| 6017 |  cosmetics  |
| 6022 |  cosmetics  |
| 6025 |  cosmetics  |
+------+-------------+ 
```

然后第二个查询是 -

```
SELECT DISTINCT products.*
FROM e2o_products
INNER JOIN e2o_products_subcategories 
    ON e2o_products.psku = e2o_products_subcategories.psku 
WHERE e2o_products.pstatus =  '1' 
AND e2o_products.psku IN (6018,6017,6022,6025)
GROUP BY e2o_products.psku
ORDER BY e2o_products_subcategories.dsporder DESC 
```

鉴于您只是从 products 表中检索字段，您可以这样做 -

```
SELECT p.*
FROM products p
INNER JOIN products_subcategories ps
    ON p.psku = ps.psku 
WHERE p.pstatus = 1
AND ps.subcategory = '$subcat'
ORDER BY ps.dsporder DESC 
```

# ruby - Ruby - nokogiri - 仅解析特定的 html 表

> ID：10151718
> 
> 赞同：0
> 
> 时间：2012-04-14T06:58:22.177
> 
> 标签：ruby, nokogiri

我有一个 HTML 文档可以从那里解析和读取一堆东西。问题是 html 中有多个表，我只对一个表感兴趣。另外，我只想阅读具有一些有用内容的行。这是示例 html 页面，有两个没有 ID 的表，我只想要第二个表和对人类有用的行。

```
<HTML>
<BODY>

<TABLE>
  <TR>
    <TD> I don't want this table </TD></TR>
  <TR>
    <TD></TD>
    <TD> No No No <br></TD>
  </TR>
....
</TABLE>

<TABLE>
  <TR>
    <TD>04/13/2012 22:51  I want this table </TD></TR>
  <TR>
    <TD></TD>
    <TD> First - something there <br></TD>
  </TR>
  <TR>
    <TD>04/13/2012 23:23  Update from xyz</TD></TR>
  <TR>
    <TD></TD>
    <TD>Second - something here <br></TD>
  </TR>
</TABLE>

</BODY>
</HTML> 
```

我正在尝试这段代码，这显然是行不通的。o/p 不是我想要的文本。它包括两个表，我只想要第二个表。帮助！

```
require 'curb'
require 'nokogiri'
c = Curl::Easy.perform("http://server/cgi-bin/page.cgi?id=123456")
html_doc = Nokogiri::HTML(c.body_str.to_s)
puts html_doc.xpath("//table/tr/td") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T07:08:39.653

您是否尝试过 xpath`//table[2]/tr/td`来获取第二个表。如果您可以更改 HTML 的来源，最好的解决方案是为您的表格提供 id 属性。

# jquery - jQuery.complete 在 .live 中不起作用

> ID：10151728
> 
> 赞同：0
> 
> 时间：2012-04-14T07:00:15.123
> 
> 标签：jquery

```
 $(document).ready(function () {
    $('.delete').live('click', function () {    
        $('#loading').html("<img src='Image-web/loading.gif'/>").fadeIn('fast');
        var copyofdel = $(this).parents('.img1');
        var code = $(this).parents('.img1').find('.code').text();
        $.ajax({
            type: "POST",
            url: "Ajaxpage/Manipulate.aspx",
            data: { del: code, typerequest: "delete" },
            success: function (recieve_msg) {
                $("#main").ajaxComplete(function (event, request, settings) {
                    $('#loading').fadeOut();
                    alert("F");
                    $(copyofdel).hide();//************
                });
            }
        });

    });

}); 
```

当用户单击“.delete”类时，我想隐藏 img1 类（其中的每个）。在行（******），不起作用？在此之前一切正常且正常工作，如何使其工作？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T07:47:47.927

我不知道你为什么使用`.ajaxComplete`（背后有什么具体原因吗？），我认为`copyofdel`它在里面不可用`.ajaxComplete`。尝试跟随。

```
$(document).ready(function () {
    $('.delete').live('click', function () {    
        $('#loading').html("<img src='Image-web/loading.gif'/>").fadeIn('fast');
        var copyofdel = $(this).parents('.img1');
        var code = $(this).parents('.img1').find('.code').text();
        $.ajax({
            type: "POST",
            url: "Ajaxpage/Manipulate.aspx",
            data: { del: code, typerequest: "delete" },
            success: function (recieve_msg) {
              $('#loading').fadeOut();
              alert("F");
              $(copyofdel).hide();
            }
        });

    });
}); 
```

# mysql - SQLSTATE [42000]：语法错误或访问冲突：迁移后所有 Magento MySQL 设置文件出现 1064 错误

> ID：10151731
> 
> 赞同：0
> 
> 时间：2012-04-14T07:00:28.913
> 
> 标签：mysql, magento, migration

将网站移至新的托管公司后，我在所有 Magento MySQL 设置文件上都收到以下错误。新的托管公司在 Plesk / Apache 上运行。该网站曾​​经完美运行。

SQLSTATE[42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，了解使用 nea 的正确语法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T07:20:16.713

试试这个 只需更改 \app\etc\config.xml 中的第 41 行

```
<initStatements>SET NAMES utf8</initStatements> 
```

至

```
<initStatements>SET NAMES utf8; SET SQL_BIG_SELECTS = 1</initStatements> 
```

# javascript - Google Chrome 扩展程序如何退出自己的后台进程？

> ID：10151732
> 
> 赞同：1
> 
> 时间：2012-04-14T07:00:33.737
> 
> 标签：javascript, google-chrome, google-chrome-extension

我的目标很简单：当用户安装扩展时，打开选项页面。

我知道如何做到这一点的唯一方法是创建一个背景页面，并在该页面上检查 localStorage.setup。如果不存在，请将其设置为 true 并打开选项页面。这种方法有效，但是除了复杂之外，它效率低下。不仅每次用户打开浏览器时都会加载后台页面，而且会一直在后台运行。

有没有办法告诉 chrome 背景页面已经完成，应该退出？或者有什么方法可以让扩展的背景页面防止自己在未来被加载？或者，有没有更好的方法来解决我的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T19:26:37.013

使用[瞬态后台页面](http://crrev.com/129520)，后台页面将在其运行的所有代码完成后自动退出。此功能将在未来的 Chrome 版本中提供，但由于它仍在积极开发中，因此尚无相关文档。

# php - PHP GD从数组中绘制像素数据在循环中停止

> ID：10151734
> 
> 赞同：2
> 
> 时间：2012-04-14T07:00:44.237
> 
> 标签：php, gd, pixels

我在 JSON 对象中有一组像素数据。我正在尝试使用 PHP 将像素数据重绘为 GD 图像。

我正在使用类似以下的东西（注意，出于测试目的，我已经在 5000 处开始了循环的索引，大约是数组的一半。）

```
$im = imagecreate($w,$h);
$i=5000;
while($i < count($pixels)){
    $item = $data[$i];
    $rgb = $item['rgb'];
    $pos = $item['pos'];
    $col = imagecolorallocate($im, $rgb[0],$rgb[1],$rgb[2]);
    imagesetpixel($im , $pos[0], $pos[1], $col);
    $i++;
}
header("Content-Type: image/png");
imagepng($im); 
```

看来我的脚本只是在它切断并没有错误地转储图像之前将它放到阵列的下方。

下面是当我在数组长度的一半处开始数组索引时的输出。我得到了图像的一小部分。

![在此处输入图像描述](../Images/fd8c01621406deda5a5959ba21b0d3ec.png)

这是因为记忆吗？还是超时？该页面不需要很长时间才能加载或任何东西......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T21:15:28.160

好的，对于其他有这个问题的人。这是修复。使用`imagecreatetruecolor`而不是`imagecreate`. 使用时似乎`imagecolorallocate`最多只能分配 255 种颜色`imagecreate`。虽然`imagecreatetruecolor`没有这样的限制。

# c# - 如何在鼠标悬停时在gridview的第一列显示复选框

> ID：10151736
> 
> 赞同：0
> 
> 时间：2012-04-14T07:00:55.530
> 
> 标签：c#, jquery, asp.net, gridview

我想每个人都知道`chrome browser`这一点，如果我们选择`History`我们将获得所有的浏览数据。当我们将鼠标悬停在特定行上时，a`check box`是可见的，并且当我们选择该按钮已启用时，如何执行此类场景

![在此处输入图像描述](../Images/cc095bbc0becd821f297fb8f1d3cfb6d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T07:15:48.493

将复选框设置为 display:none 然后试试这个

```
protected void RecordsGrid_RowDataBound(object sender, GridViewRowEventArgs e)
            {
                if (e.Row.RowType == DataControlRowType.DataRow)
                {

                    e.Row.Attributes.Add("onmouseover","checkbox.style.display='block'");
                    e.Row.Attributes.Add("onmouseout", "checkbox.style.display='none'");
                }
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T10:18:54.083

尝试这个

```
 $(function(){
            $("#gridviewname tr").live("hover",function(){
                 $(this).find("input[id*='chkName']").show();
            },
            function(){
                 $(this).find("input[id*='chkName']").hide();
            });

            $("#gridviewname tr").live("click",function(){
                 if($(this).find("input[id*='chkName']").attr("checked"))
                 {
                       $(this).find("input[id*='chkName']").removeAttr("checked");
                       $(this).find("input[id*='chkName']").hide();
                 }
                 else
                 {
                       $(this).find("input[id*='chkName']").attr("checked",true);
                       $(this).find("input[id*='chkName']").show();
                 }
            });

         }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T10:42:05.967

@User：您好，您可以使用 j 查询使其突出显示行的后续链接使复选框可见，但使用相同的基础，您也可以使复选框和按钮可见。

[http://www.dotnetcurry.com/ShowArticle.aspx?ID=250](http://www.dotnetcurry.com/ShowArticle.aspx?ID=250)

[http://jquerybyexample.blogspot.com/2011/06/highlight-row-on-mouseover-in-gridview.html](http://jquerybyexample.blogspot.com/2011/06/highlight-row-on-mouseover-in-gridview.html)

# magento - Magento 网站显示错误

> ID：10151738
> 
> 赞同：0
> 
> 时间：2012-04-14T07:01:19.930
> 
> 标签：magento

我是 magento 的新手。在过去的几个月里，我一直在开发一个网站。该网站几乎完成。我计划在几天内启动它，但现在问题是它显示了一些错误，例如

```
"There has been an error processing your request
Exception printing is disabled by default for security reasons.
Error log record number: 783283926636" 
```

错误日志编号正在相应更改。我搜索了很多社区，但没有找到解决方案。我知道该文件来自 var/reports/783283926636。虽然我不断刷新该网站确实回来了。请告诉我这个问题的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T10:24:03.370

检查 var 文件夹的权限，它们应该是 777 以启用您的商店的正确工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T11:48:53.820

Anthony，您需要检查该文件，它包含对错误的更详细说明。Magento 不会在网页上显示它，以防止暴露重要信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T21:40:11.663

在您的 public_html 目录中，您收到文件夹错误

将 local.xml.sample 重命名为 local.xml

那么您的错误将在前端可见，您将能够看到发生了什么

*   它可以是任何东西

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-06T02:37:11.617

这是解决方案：

1.  导航到“错误”文件夹。

2.  将 local.xml.sample 更改为 local.xml

3.  您现在应该在 Magento 页面上看到一个新的疯狂错误列表 - 这没关系。

4.  打开 magento/lib/Zend/Cache/Backend/File.php 并查找：

    受保护的 $_options = 数组（

    'cache_dir' => 'null',

5.  将其更改为：

    受保护的 $_options = 数组（

    'cache_dir' => 'tmp/',

6.  保存。

7.  现在最后一步是在根 Magento 文件夹中创建一个 tmp 文件夹。

8.  而已。

# javascript - 接受 (#id).val() 的 javascript 函数返回错误值

> ID：10151749
> 
> 赞同：-1
> 
> 时间：2012-04-14T07:03:19.227
> 
> 标签：javascript, jquery

我有一个 id="kill" 的按钮。

这是我的 JavaScript：

```
$("#kill").click(function(){ 
    getImage($(this).val()); 
});

function getImage(code){  
    var code, 
        imgstr;
    imgstr="mypath/"+code+".png";  
    return imgstr;
} 
```

不幸的是，返回了错误的值。但是，如果我在函数 getImage 中分配值，如下所示：

```
$("#kill").click(function(){ 
    getImage($(this).val()); 
});

function getImage(code){  
    var code="12", 
        imgstr;
    imgstr="mypath/"+code+".png";  
    return imgstr;
} 
```

然后它返回正确的值。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T07:04:19.537

要检索值，请使用[`.val()`](http://api.jquery.com/val/)函数而不是：

```
getImage($(this.val)); 
```

你应该使用：

```
getImage($(this).val()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T01:24:48.377

只需删除本地“代码”变量即可。它隐藏了参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T08:33:37.997

从以上所有讨论中，我可以说您使用的是旧版本的 jQuery（可能 < 1.6）。检查 jQuery 的版本，如果版本 < 1.6 而不是按钮使用`.attr("value")`而不是`.val()`，可能是这个（未测试）有效！

```
$("#kill").click(function(){ 
    getImage($(this).attr("value")); 
});

function getImage(code){  
    var code, 
        imgstr;
    imgstr="mypath/"+code+".png";  
    return imgstr;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T07:55:28.700

为什么要创建另一个同名的局部变量？（可能是`code`在某些浏览器中覆盖了传递的 ，。）

用这个，

```
$("#kill").click(function(){ 
    getImage($(this).val()); 
});

function getImage(code){  
    var localCode = code,
    imgstr;
    imgstr="mypath/"+localCode+".png";  
    return imgstr;
} 
```

# asp.net - 如何创建 LINQ 或 Entity SQL 查询以从运行时获得表名的表中获取记录

> ID：10151757
> 
> 赞同：1
> 
> 时间：2012-04-14T07:05:03.903
> 
> 标签：asp.net, asp.net-mvc-3

我的应用程序在用 C#.Net 编码的 Asp.net MVC3 中。我有一个视图，它有一个 DropDownList。这个下拉列表有我的数据库中存在的所有表的名称。我的要求是当用户从下拉列表中选择一个特定的表，然后通过 Json 将表的名称传递给 Json 方法，如下面的代码所示。

```
$("#MyTableNames").change(function () {                                         
    $("#MyDiv").load("/../MyController/MyActionMethod", { TableName:$("#MyTableNames").val() }, function () {
    });
}); 
```

以上是我如何将我的表名传递给控制器​​中的 Action。到这里一切都很好。以下是我的操作代码。我尝试了两种方法来编写查询......它也包括实体 SQL。没有 LINQ，因为 LINQ 不支持这个。

```
 //First Method

  public ActionResult MyAction(string TableName)
            {

         var model = db.ExecuteStoreQuery<TableName>("Select * from " + TableName + "      where Delete_Flag='" + false + "'");
ViewBag.MyData=model;
                return PartialView();
            }

//Second Method

    public ActionResult GetRecords(string TableName)
            {
             var sql = "SELECT VALUE emp FROM " + TableName + " AS emp ";
             var query = db.CreateQuery <TableName>(sql);
             Viewbag.MyData=query;       
             return PartialView();
            } 
```

但是上述方法中没有一个作为<>想要参数作为表......我想将查询结果传递给 VierwBag 以便我可以在视图中填充它。建议我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T08:50:54.410

由于您不知道在设计时要使用的类型，因此很难使用强类型泛型。

另一种方法是将 ExpandoObject\dynamic 与诸如[Massive](https://github.com/robconery/massive)之类的微型 ORM 框架一起使用来查询数据。在这种情况下返回的数据是一个 ExpandoObject，如果需要，可以将其返回给客户端。

# android - 如何在android中实现空闲时间备份功能

> ID：10151761
> 
> 赞同：0
> 
> 时间：2012-04-14T07:06:03.433
> 
> 标签：android

我应该在应用程序中实现空闲时间备份功能。任何人都可以帮助我提供任何示例代码或参考资料。

上述功能的一个用例是备份联系人、日历。主要我需要实现空闲时间备份。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T07:38:11.593

假设您的意思是当您的应用程序空闲而不是手机空闲时：

当您的应用程序空闲时使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)在特定延迟后开始备份。

如果您的应用在警报触发之前重新启动，请取消警报。

`OnPause`Activity 的和`onResume`方法可用于确定应用程序何时空闲。

# javascript - 对对象的属性进行排序

> ID：10151763
> 
> 赞同：0
> 
> 时间：2012-04-14T07:06:38.350
> 
> 标签：javascript, sorting, javascript-objects

我的 json 对象如下所示：

```
events:{
"2": {
    "action": "some value",
    "property": "some value"
}
"0": {
    "action": "some value",
    "property": "some value"
}
"1": {
    "action": "some value",
    "property": "some value"
}

} 
```

我需要对对象的属性进行排序。有没有办法做到这一点？结果应该是这样的：

```
events:{
"0": {
    "action": "some value",
    "property": "some value"
}
"1": {
    "action": "some value",
    "property": "some value"
}
"2": {
    "action": "some value",
    "property": "some value"
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T07:12:25.780

结合我的评论，以这种方式存储它：使用数组，然后将这些索引存储为 id。然后你可以使用一些排序算法来移动它们。这里'是一些你可能想看看[的排序算法示例](http://www.sorting-algorithms.com/)

```
events:[
    {
        "id" : 2,
        "action": "some value",
        "property": "some value"
    },
    {
        "id" : 0,
        "action": "some value",
        "property": "some value"
    },
    {
        "id" : 1,
        "action": "some value",
        "property": "some value"
    }
] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T07:17:57.843

为了保证顺序，就像@Joseph 说的那样，它需要在一个数组中：

```
var events = {
  "2": {
    "action": "some value",
    "property": "some value"
  },
  "0": {
    "action": "some value",
    "property": "some value"
  },
  "1": {
    "action": "some value",
    "property": "some value"
  }
};

var eventOrder = [];

for( var prop in events ){
  if( events.hasOwnProperty( prop ) ){
    eventOrder.push( prop );
  }
}

eventOrder.sort(); 
```

注意：这将按字母顺序排序，因为您使用的是字符串，所以如果您有超过 9 个项目，您最终可能会得到 eventOrder 作为 [ "1", "10", "2", ... ] . 如果不希望这样做，您可以在存储到数组之前先解析 Int，然后在进行查找时强制字符串化。

# ios - 如何在不知道 UDID 的情况下在用户设备上部署 ios 应用程序？

> ID：10151768
> 
> 赞同：-1
> 
> 时间：2012-04-14T07:08:43.793
> 
> 标签：ios

如何在不知道其 UDID 的情况下在用户设备上部署 iOS 应用程序？或者我可以通过编程将设备添加到特定的配置文件中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T07:39:48.290

执行此操作的唯一方法是执行以下操作之一：

A) 获取一个 iOS 企业帐户并使用其证书签署您的应用程序（尽管在您的公司之外分发此类应用程序违反了服务条款）

B) 将您的应用放到应用商店。

# facebook - 需要复制：“图片”图形字段不适用于已发布的链接

> ID：10151770
> 
> 赞同：1
> 
> 时间：2012-04-14T07:08:59.730
> 
> 标签：facebook, facebook-graph-api, hyperlink, image

我需要对错误进行验证，看看是我自己还是 FB 错误。通过 Graph 或 FQL，已发布链接的预览图像链接似乎不起作用。

试试这个： [https ://www.facebook.com/coca-cola/posts/168694756574160](https://www.facebook.com/coca-cola/posts/168694756574160)

使用图形资源管理器，转到 [https://graph.facebook.com/168694756574160](https://graph.facebook.com/168694756574160) 并单击“图片”链接。是否出现预览图像？我有一个空白屏幕。

我在我可以尝试的每个发布的链接上都看到了这种行为。

谢谢你在你身边尝试这个。如果是 FB 错误，我会创建错误报告！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T14:54:59.420

大多数对象的`/picture`连接会返回一个 HTTP 301 重定向到 CDN 上图像的 URL。这不适用于 Graph API Explorer，因为它没有被编码来响应重定向。

重定向允许您将（例如）直接`https://graph.facebook.com/USER_ID/picture`放入`<img>`标签中

如果要将图片作为字符串检索，请`/OBJECT_ID?fields=picture`改为访问

# c# - 创建注册表项时访问被拒绝

> ID：10151771
> 
> 赞同：2
> 
> 时间：2012-04-14T07:09:11.280
> 
> 标签：c#, registry, access-denied

我正在尝试在以下位置创建注册表项，但出现拒绝访问错误：

> HKEY_LOCAL_MACHINE\SOFTWARE\MyCompany\MyProgram

这是代码：

```
RegistryKey reg;
reg = Registry.LocalMachine.CreateSubKey(@"SOFTWARE\MyCompany\MyProgram"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T07:23:17.403

您最有可能使用[用户帐户控制 (UAC)](http://technet.microsoft.com/en-us/library/cc709691%28v=ws.10%29.aspx)。这意味着即使您是管理员，您的访问令牌也没有必要的权限来执行诸如在`HKEY_LOCAL_MACHINE`.

但是，通过 UAC 提示，您可以提升您的权限。

Regedit 包含一个[UAC 清单](http://msdn.microsoft.com/en-us/library/bb756929.aspx)，它将在执行之前引发提示，以确保它可以执行它需要能够执行的操作。您还可以右键单击可执行文件或快捷方式，然后选择*Run as administrator*。

所以基本上你有三个选择：

*   关闭 UAC
*   使用*以管理员身份运行*
*   在可执行文件中包含 UAC 清单

第一个解决方案不太安全，最后一个解决方案是最优雅的（但实际上也需要一些努力）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-14T07:11:32.420

您需要在具有足够权限的帐户下运行您的应用程序，以便在指定位置写入注册表。通常`HKEY_LOCAL_MACHINE`分支是为高级用户保留的，因为它包含机器全局设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T12:29:22.190

我尝试了以下语法：

```
SETX /S [Machine Name] [Variable] [Value] /M 
```

我不知道为什么，但在 Windows 7 中，如果您指定要在其上添加系统变量的机器名称，即使对于本地机器也是如此。

# objective-c - NSArray.h 上的致命错误

> ID：10151775
> 
> 赞同：0
> 
> 时间：2012-04-14T07:10:04.887
> 
> 标签：objective-c, gnustep

我有ubuntu机器并使用GNUStep编译objective-c。我写了以下代码：

```
#import <objc/objc.h>
#import <Foundation/Foundation.h>
#import <objc/NSArray.h>

int main ( int argc, char ** argv)
{
  int ar[100] = {0};
  int i;
  NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
  NSArray *arr = [[NSArray alloc] initWithObjects:@"stackOverflow", @"1", @"2", nil];
  NSLog (@ "Counts in the array %i", [arr count]);

  @try {
    NSString *str;
    str = [arr objectAtIndex:1];
    NSLog (@" String value is %@ ", str);
  }
  @catch (NSRangeException * excep)
  {
    NSLog (@"Reached Range caught for %@:%@" [excep name], [excep reason]); 
  }

  [pool release];
} 
```

但我收到以下致命错误：

> 致命错误：objc/NSArray.h：没有这样的文件或目录

我也试过`<NSArray.h>`，但得到同样的错误。我必须提供哪条路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T07:13:50.763

该文件`objc/NSArray.h`不存在，因此出现致命错误。

通过导入删除应该已经可用的`#import <objc/NSArray.h>`as 。`NSArray``Foundation`

请参阅[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)

# android - 基于用户联系人的电子邮件地址输入的预测输入/提前输入？

> ID：10151777
> 
> 赞同：0
> 
> 时间：2012-04-14T07:10:30.837
> 
> 标签：android, user-controls, user-input, addressbook, type-ahead

在 Android 谷歌邮件应用程序中，当您开始在新电子邮件的“收件人：”字段中输入内容时，您将看到一个下拉菜单，该菜单会从您的联系人中自动填充。

我希望在我的应用程序中有这种行为。

目前，当我的用户输入电子邮件地址时，他们必须输入整个内容（本质上，输入“textEmailAddress”输入字段）。我想通过提供基于联系人的预测输入（Google-Mail 样式）让事情变得更容易。

我该怎么做呢？

（到目前为止，我有 1\. googled，2\. 浏览了 Android SDK 文档，3\. 浏览了 Android 源代码（[http://grepcode.com/project/repository.grepcode.com/java/ext/com.google.android /安卓/)](http://grepcode.com/project/repository.grepcode.com/java/ext/com.google.android/android/)) .)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T07:15:23.463

你有两件事要做

1) 获取所有联系人的电子邮件 ID[查看此博客](http://groups.google.com/group/android-developers/browse_thread/thread/9e44fa66e1849c1b/f2bd7a6edfe5e68f)，也可以在获取电子邮件 ID 后搜索更多示例 将它们存储在一个`Array`说`emailArray`

2) 使用 emailArray 在**[AutoCompleteTextView中显示](http://developer.android.com/reference/android/widget/AutoCompleteTextView.html)**

# c# - 如何让 WCF 服务在不从服务中调用其方法的情况下向客户端发送消息？

> ID：10151780
> 
> 赞同：2
> 
> 时间：2012-04-14T07:11:41.543
> 
> 标签：c#, wcf, backgroundworker

我是 WCF 的新手，到目前为止我知道我可以使用 WCF 服务中的方法并返回一些值，但我想知道我是否使用了**后台**工作程序并且我想向客户端发送一条消息，如“作业完成”完成后，我该怎么做？
我应该使用 AutoResetEvent 并等待后台工作程序完成，然后`resetEvent.Set()`让主线程上的方法返回消息吗？
我需要那个线程不要忙，它应该为我从客户端请求的任何其他命令做好准备。所以有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T08:13:24.807

我已经弄清楚了，好吧，如果不调用该方法，我就无法从服务中发回消息，但是当我将服务行为的属性从更改`ConcurrencyMode = ConcurrencyMode.Single`为时，`ConcurrencyMode = ConcurrencyMode.Multiple`它变成了多线程，结果：
该方法因此在新线程中运行属性，我可以在该线程工作时发送其他请求，当它完成时它返回消息/结果。

```
[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Multiple, InstanceContextMode = InstanceContextMode.PerSession)]
public class FileManagerService : IFileManager 
```

# c++ - 强制使应用程序崩溃的指针无效

> ID：10151782
> 
> 赞同：2
> 
> 时间：2012-04-14T07:12:13.940
> 
> 标签：c++, visual-studio-2008

我们有一个类来表示一个非常大的应用程序中的列表：

```
CSMLNode
{
   CSMLNode *pChild;
   CSMLNode *pSibling;  

   CSMLNode()
   {
     pChild = NULL;
     pSibling = NULL;
   }         
} 
```

为了优化，创建的节点对象保存在一个池中，并在应用程序的生命周期内重复使用。仅当节点对象的数量超过特定计数时才释放节点对象。当节点对象被释放到池中或从池中取出时，`pChild`和的值`pSibling`不设置为 NULL。我们怀疑这会在应用程序中造成崩溃。

我打算将 pChild 和 pSibling 的值设置为`0xDDDDDDDD`，如果从池中获取节点对象时其值不为 NULL 。我的意图是强制使应用程序崩溃，当`pChild`或`pSibling`指针被访问时，没有设置适当的对象指针，`pChild`以及`pSibling`从池中获取节点对象之后。

这会按我的预期工作吗？如果没有，我应该为强制访问冲突提供什么指针值。

我已启用整页堆以尽早获取访问冲突。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T07:59:28.393

Visual Studio 调试 CRT 已经这样做了。您从堆中分配的内存被初始化为 0xcdcdcdcd。由于您的结构包含指针，因此取消引用未初始化的指针将自动生成 AV。[此处记录了](http://www.nobugs.org/developer/win32/debug_crt_heap.html)调试堆初始化值。

你不必帮忙。避免保留自己的池，CRT 在 Windows 低碎片堆的充分帮助下已经做得很好。如果您想保留它，那么我建议您使用与调试 CRT 相同的方法。不要跳过它所做的一切，无人区是及早检测内存损坏的好方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T07:14:38.377

它调用未定义的行为，这可能会或可能不会使您的应用程序崩溃。它也可能做其他不需要的事情。

即使只是将值存储`0xDDDDDDDD`为指针（不取消引用它）也是未定义的行为。

# core-data - 发布后向 CoreData 数据存储添加数据

> ID：10151783
> 
> 赞同：2
> 
> 时间：2012-04-14T07:12:15.710
> 
> 标签：core-data

我在我的应用程序中使用核心数据来存储我的游戏中使用的汽车的所有汽车属性。用户可以选择不同的部件（发动机、车轮等），然后这些部件在数据存储中被标记为被选中，因此用户可以更改数据存储中的一些数据。

我的问题[与此类似](https://stackoverflow.com/questions/6234364/pre-populated-database-now-i-want-to-add-more-data-without-messing-the-pre-exis)，如果我想添加一辆新车，应用程序发布后如何在不覆盖用户所做更改的情况下进行此操作？模型没有改变，所以我猜版本控制已经过时了。我知道如何以编程方式添加数据，但是测试数据库是否已经用新数据更新的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:29:25.647

您真正需要做的就是将新对象添加到持久存储中。根据您将新数据放入应用程序的方式，您编写添加新**Car**对象的方法，而无需触及用户数据和标志，只需创建新对象，如您在预填充数据库时所做的。

# php - 使用 PHP 获取最深的文件路径

> ID：10151786
> 
> 赞同：0
> 
> 时间：2012-04-14T07:12:28.050
> 
> 标签：php, arrays, path

有谁知道如何从具有文件路径的数组中获取具有最深路径的元素？如果这听起来很奇怪，想象一下以下数组：

```
/a/b
/a
/1/2/3/4
/1/2
/1/2/3/5
/a/b/c/d/e 
```

我想要得到的是：

```
/1/2/3/4
/1/2/3/5
/a/b/c/d/e 
```

想知道最快的方法是什么，而不必一遍又一遍地遍历整个数组。语言是 PHP (5.2)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T07:34:03.107

```
$aPathes = array(
    '/a/b',
    '/a',
    '/1/2/3/4',
    '/1/2',
    '/1/2/3/5',
    '/a/b/c/d/e'
);

function getDepth($sPath) {
    return substr_count($sPath, '/');
}
$aPathDepths = array_map('getDepth', $aPathes);
arsort($aPathDepths);
foreach ($aPathDepths as $iKey => $iDepth) {
    echo $aPathes[$iKey] . "\n";
} 
```

另请参阅[此示例](http://ideone.com/7RjU2)。

=== 更新 ===

```
$aUsed = array();
foreach ($aPathes as $sPath) {
    foreach ($aUsed as $iIndex => $sUsed) {
        if (substr($sUsed, 0, strlen($sPath)) == $sPath || substr($sPath, 0, strlen($sUsed)) == $sUsed) {
            if (strlen($sUsed) < strlen($sPath)) {
                array_splice($aUsed, $iIndex, 1);
                $aUsed[] = $sPath;
            }
            continue 2;
        }
    }
    $aUsed[] = $sPath;
} 
```

另请参阅[此示例](http://ideone.com/jxR9w)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T17:37:03.070

根据您的说明，这是一个可以做到的功能。它保留一个找到的“最深路径”数组，并将每条路径与其进行比较。最好情况是 O(n)（如果所有路径都是最大路径的子路径），最坏情况是 O(n ² )（如果所有路径完全不同）。

请注意，这`continue 2`意味着“继续外循环”。

```
<?php

function getDeepestPaths($array)
{
    $deepestPaths = array();
    foreach ($array as $path)
    {
        $pathLength = strlen($path);
        // look for all the paths we consider the longest
        // (note how we're using references to the array members)
        foreach ($deepestPaths as &$deepPath)
        {
            $deepPathLength = strlen($deepPath);
            // if $path is prefixed by $deepPath, this means that $path is
            // deeper, so we replace $deepPath with $path
            if (substr($path, 0, $deepPathLength) == $deepPath)
            {
                $deepPath = $path;
                continue 2;
            }
            // otherwise, if $deepPath is prefixed by $path, this means that
            // $path is shallower; so we should stop looking
            else if (substr($deepPath, 0, $pathLength) == $path)
            {
                continue 2;
            }
        }
        // $path matches nothing currently in $deepestPaths, so we should
        // add it to the array
        $deepestPaths[] = $path;
    }
    return $deepestPaths;
}

$paths = array('/a/b', '/a', '/1/2/3/4', '/1/2', '/1/2/3/5', '/a/b/c/d/e');
print_r(getDeepestPaths($paths));

?> 
```

如果您的文件夹名称不以斜杠结尾，您将需要在两个`if`s 中进行额外检查：较深路径中前缀旁边的字符是斜杠，因为否则路径 like`/foo/bar`将被视为“更深的路径”比`/foo/b`（并将取代它）。

```
if (substr($path, 0, $deepPathLength) == $deepPath && $path[$deepPathLength] == '/')
if (substr($deepPath, 0, $path) == $path && $deepPath[$path] == '/') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T07:22:44.567

如果您可以保证“拼写”始终相同（即：“/a/bc/d”与 /a/b\ /c/d），那么您应该能够进行一些简单的字符串比较以查看是否其中一个字符串完全包含在另一个字符串中。如果这是真的丢弃字符串。请注意，您需要在两个方向上进行比较。

# multithreading - Android MediaPlayer寻求栏当前位置线程问题

> ID：10151787
> 
> 赞同：0
> 
> 时间：2012-04-14T07:13:43.087
> 
> 标签：multithreading, seekbar, android-mediaplayer, illegalstateexception

嗨，我是 android 新手，我正在通过示例学习。我正在尝试创建一个活动，其中包含我的原始文件夹中所有歌曲的列表视图，底部有媒体播放器控件。到目前为止，我一切正常，但我似乎无法`SeekBar`停止强制关闭。

这是代码：

```
public class music extends ListActivity implements Runnable {

    private ArrayList<sound> mSounds = null;

    private soundadapter mAdapter = null;
    private ImageButton playbtn;
    private SeekBar seekbar;
    private int total;
    private MediaPlayer mp = null;
    private TextView selelctedFile = null;

    /** Called when the activity is first created. */

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        setContentView(R.layout.music);

        selelctedFile = (TextView) findViewById(R.id.selectedfile);

        seekbar = (SeekBar) findViewById(R.id.seekbar);
        seekbar.setProgress(0);

        // create a simple list

        mSounds = new ArrayList<sound>();

        sound s = new sound();

        s.setDescription("Rudolph The Red Nosed Reindeer");

        s.setSoundResourceId(R.raw.rudolphtherednosereindeer);

        mSounds.add(s);

        s = new sound();

        s.setDescription("Battery");

        s.setSoundResourceId(R.raw.battery);

        mSounds.add(s);

        mAdapter = new soundadapter(this, R.layout.listitem, mSounds);

        setListAdapter(mAdapter);

        playbtn = (ImageButton) findViewById(R.id.play);
        playbtn.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                // TODO Auto-generated method stub
                try {
                    if (mp.isPlaying()) {
                        mp.pause();
                        playbtn.setImageResource(android.R.drawable.ic_media_play);

                    } else {
                        mp.start();
                        playbtn.setImageResource(android.R.drawable.ic_media_pause);

                    }
                } catch (Exception e) {

                    e.printStackTrace();
                    // TODO: handle exception
                }

            }
        });

    }

    @Override
    public void onListItemClick(ListView parent, View v, int position, long id) {

        sound s = (sound) mSounds.get(position);
        if (mp != null) {
            mp.reset();
            mp.release();

        }

        mp = MediaPlayer.create(this, s.getSoundResourceId());
        selelctedFile.setText(s.getDescription());
        playbtn.setImageResource(android.R.drawable.ic_media_pause);
        mp.start();
        total = mp.getDuration();
        seekbar.setMax(total);

        seekbar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {

            @Override
            public void onStopTrackingTouch(SeekBar seekbar) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onStartTrackingTouch(SeekBar seekbar) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onProgressChanged(SeekBar seekBar, int progress,
                    boolean fromUser) {
                // TODO Auto-generated method stub
                if (fromUser) {
                    mp.seekTo(progress);
                    seekBar.setProgress(progress);
                }
            }
        });

        Thread currentThread = new Thread(this);
        currentThread.start();

    }

    @Override
    public void run() {
        // TODO Auto-generated method stub

        try {
            while (mp != null) {
                int currentPosition = mp.getCurrentPosition();
                Message msg = new Message();
                msg.what = currentPosition;
                threadHandler.sendMessage(msg);
                Thread.sleep(100);
            }
        }

        catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } finally {

        }
    }

    private Handler threadHandler = new Handler() {
        public void handleMessage(Message msg) {
            // super.handleMessage(msg);
            // txt.setText(Integer.toString(msg.what));
            seekbar.setProgress(msg.what);
        }
    };

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub

        mp.stop();
        mp.release();
        mp = null;
    }

    @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        if(mp != null) {
            mp.stop();
            mp.release();
            mp = null;
        }
    }   
} 
```

这是我多次点击不同歌曲时不断出现的错误：

```
04-14 02:53:00.452: W/dalvikvm(27452): threadid=19: thread exiting with uncaught    exception (group=0x40018560)    
04-14 02:53:00.466: E/AndroidRuntime(27452): FATAL EXCEPTION: Thread-22
04-14 02:53:00.466: E/AndroidRuntime(27452): java.lang.IllegalStateException
04-14 02:53:00.466: E/AndroidRuntime(27452): at android.media.MediaPlayer.getCurrentPosition(Native Method)
04-14 02:53:00.466: E/AndroidRuntime(27452): at net.cybercore.collapsingfromwithin.music.run(music.java:145)
04-14 02:53:00.466: E/AndroidRuntime(27452): at java.lang.Thread.run(Thread.java:1019) 
```

行错误 145 是：
`int currentPosition = mp.getCurrentPosition();`

我一生都无法弄清楚为什么它可以播放 3 或 4 次然后它会杀死应用程序。

任何帮助表示赞赏。我已经查看了其他几个网站的示例，包括[http://www.androidhive.info/2012/03/android-building-audio-player-tutorial/](http://www.androidhive.info/2012/03/android-building-audio-player-tutorial/)和[http://www.androiddevblog.net/android/playing- android中的音频](http://www.androiddevblog.net/android/playing-audio-in-android)

**

## 更新

** 我想我修好了。感谢您的帮助，我发现[Thread 在 android mediaplayer 上用于 seekbar，](https://stackoverflow.com/questions/9702613/thread-using-for-seekbar-on-android-mediaplayer)所以我将其更改为

```
@Override
public void run() {
    // TODO Auto-generated method stub

    try {
        while (mp != null) {
            int currentPosition = mp.getCurrentPosition();
            Message msg = new Message();
            msg.what = currentPosition;
            threadHandler.sendMessage(msg);

            try {
                Thread.sleep(100);
            } catch (InterruptedException e) {
                e.printStackTrace();
                System.out.println("interrupt exeption" + e);
            }
        }
    }

    catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        System.out.println("My exeption" + e);
    } 
} 
```

我仍然收到错误，但它们并没有杀死我的应用程序。我认为这不是正确的方法，但它的工作原理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T07:43:06.827

您应该在实例化它时准备好您的媒体播放器。

> MediaPlayer 对象必须首先进入 Prepared 状态，然后才能开始播放。有两种方法（同步与异步）可以达到 Prepared 状态：调用 prepare()（同步）在方法调用返回后将对象转移到 Prepared 状态，或者调用 prepareAsync()（异步），它首先在调用返回后将对象转移到准备状态（这几乎是正确的方式），而内部播放器引擎继续进行其余的准备工作，直到准备工作完成。当准备完成或 prepare() 调用返回时，如果 OnPreparedListener 事先通过 setOnPreparedListener(android.media.

[在这里](http://developer.android.com/reference/android/media/MediaPlayer.html)阅读

所以你应该在实例化播放器后调用 mp.prepare() 。

您还应该确保媒体播放器在播放时运行 run 方法。我首先将 mp.isPlaying() 添加到 while 行。

```
while (mp != null && mp.isPlaying()) {
           ...

        } 
```

IllegalStateException 意味着您处于非法状态来调用该方法，例如，如果播放器停止。

我不确定，但我认为这会在您暂停音乐时停止运行方法。所以你应该尽量避免这种情况。我创建了一个布尔值来识别播放器正在播放或暂停，并在此期间使用它。

# android - 与 Android 应用程序共享 Java 库

> ID：10151789
> 
> 赞同：1
> 
> 时间：2012-04-14T07:13:53.680
> 
> 标签：android, netbeans, jar, shared

我刚刚开始进行 Android 开发，并将 Netbeans 与 NBAndroid 和 SDK 17 一起使用。

我想在我的 Java 和 Android 应用程序中使用相同的 Java 源代码。

[http://developer.android.com/guide/developing/projects/projects-eclipse.html](http://developer.android.com/guide/developing/projects/projects-eclipse.html)说如何在 Eclipse 中做到这一点（虽然 .JAR 连接的东西很粗略），但我似乎无法做到在NB工作。

基于该链接，我的理解是，Android 应用程序的正确设置是一个 Android 应用程序项目，它引用了一个 Android 库项目，该项目又引用了一个由 Java 库项目生成的 .JAR 库。然后，我还可以有一个 Java 应用程序项目引用同一个 Java 库项目。

所以，我已经建立了这个项目结构......我有一个 AndroidApp 项目，它是一个 com.ex 包中的基本 HelloAndroid Activity。该项目在 Libraries 文件夹中包含一个 AndroidLib 库项目。我还有一个 LibClass.java 文件，它定义了一个简单的 LibClass 类，它有一个函数 getText()，它只返回一个要显示的字符串。AndroidApp 中的 MainActivity 调用它来获取要输出的字符串。

当我将LibClass.java直接放到AndroidLib项目中时，一切正常。

但我想做的是与Java共享源代码。

所以我想将 LibClass.java 移动到 JavaLib 库中，其 .JAR 文件包含在 AndroidLib 项目中。但是，当我尝试这样做时，我在 MainActivity 类中遇到错误，抱怨它找不到 LibClass。查看 Projects 窗口，我可以在 AndroidLib 项目的 Libraries 文件夹中的 JavaLib.jar 中看到 com.ex 包内的 LibClass.class。AndroidLib 在 AndroidApp 项目的 Libraries 文件夹中是可见的，但它没有在那里显示任何包或其他内容。

所以我觉得我离完成这项工作只有一步之遥。我是否需要对一个或另一个 AndroidManifest 文件做些什么？或者对 build.xml 文件做些什么？还是我完全走错了路？

如果有人可以为此发布操作方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:32:41.913

我正在尝试类似的东西；我有 Java EE 项目，使用 Eclipse 构建，我正在尝试利用我的 Android 项目中的一些代码。这应该给我一个共享的代码库，而不是我以前不得不忍受的一堆令人困惑的 SVN 外部。

而不是创建 JAR 文件，我发现使用源代码和为平台构建效果最好（嗯，它一直在工作，但我现在遇到了问题）。所以，我正在做的是：

```
c:\MySvnFolderStructure\MyJavaProjectFolder\src\     (and then all the source under that)
c:\MySvnFolderStructure\MyJavaProjectFolder\android\ (and all the Eclipse Android project gubbins)
c:\MySvnFolderStructure\MyJavaProjectFolder\jee\     (and all the Eclipse JEE project gubbins) 
```

Android 和 Java EE 项目没有自己的 src 文件夹，它们都链接到其父文件夹中的 src 文件夹。这意味着每个 Java 实现都从源代码构建自己的字节码版本，并使用自己的外部库（例如 Apache HTTP 库）。

当然，他们不能共享诸如 awt 之类的东西（如另一篇文章中所述），但是有很多东西可以交叉，特别是如果它是正在使用的核心 Java 类。

此外，事实证明编写 JUnit 测试有点棘手，因为目前需要对测试代码进行一些重复，因为 Android 需要额外的工具，但我正在努力。

另外，请参阅[这篇关于 Eclipse 中的相对路径](https://stackoverflow.com/a/8338898/1369620)的帖子，这意味着可以将文件夹签出到不同机器上的不同位置（就像我们都使用版本控制签出一样）并且仍然可以共享。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T02:57:56.770

问题是Android中的Java平台与JDK平台不同。

特别是，.JAR 库不能引用任何不包含在 Android 平台中的内容。java.awt.* 是你不能引用的一个例子（除非你可以有 java.awt.fonts）。

JDK String 和 Android String 之间也有区别——Android 没有实现 isEmpty() 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T11:05:54.740

如果我理解您的情况正确，您正在尝试为您的 android 和 java 应用程序使用自定义 java 库。

对于这种情况，您可以先构建 java 库。您可以直接将 jar 放到 android 项目的 libs 文件夹中，并将其添加到 android 项目的构建路径中，而不是将 java 库 jar 添加为 android 库。

如果您使用 ANT 脚本构建 java 库 jar ，则可以考虑将源文件也添加为 jar 的一部分。这将帮助您在开发 android 部分时获得代码帮助。但这部分纯粹是可选的。

# compiler-construction - 你如何缓存一个由 Groovy Script Engine 生成的编译类？

> ID：10151791
> 
> 赞同：3
> 
> 时间：2012-04-14T07:14:10.420
> 
> 标签：compiler-construction, groovy

我正在从 scala 动态运行 groovy 脚本，但是在调用 Groovy 脚本引擎的 loadScriptByName 方法时编译 groovy 脚本需要一些时间。

自从我上次运行应用程序以来，从我的应用程序加载和编译的大多数 groovy 脚本都没有改变，所以我想每次都不需要编译它们。

如果它们没有任何更改，是否有任何方法可以存储已编译的 groovy 脚本并从我的应用程序运行它们？我知道 groovy 脚本引擎缓存编译的脚本如果您在同一个 groovy 脚本上调用 loadScriptBynName 方法两次或更多次，但是当我关闭我的应用程序时这些缓存就消失了。也许它将缓存的脚本存储在内存中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T09:16:38.057

采用：

```
String script = ""     // some script
string scriptName = "" // unique script name

GroovyClassLoader groovyClassLoader = GroovyClassLoader() 
GroovyCodeSource gcs = new GroovyCodeSource(script, scriptName, "/app/script");
Class<?> executableClass = groovyClassLoader.parseClass(gcs, true); 
```

# java - 如何使用 Java 填写 Web 表单（不想提交，只想填写数据库中的字段）

> ID：10151800
> 
> 赞同：0
> 
> 时间：2012-04-14T07:15:47.033
> 
> 标签：java

需要填写一些我有可用的 HTML 源的特定站点的网络表单。我想从数据库记录中填写此表单上的字段。我不想将请求发布到服务器，因为应用程序用户将首先验证填充的数据并手动提交表单。

java中有什么方法可以实现这个吗？我已经在 VB .Net 中实现了这一点，但希望将其作为已经在 java 中开发并实现业务逻辑的更大应用程序的一部分。

您的帮助将不胜感激。

谢谢， SRA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T07:32:54.780

> Java 将在服务器上运行。

在这种情况下，您只需修改服务器，使其生成 HTML，其中的`<input>`元素预先填充了数据库中的值；例如使用`value`属性。对于选择器来说有点复杂，您必须确保预先选择了其中一个选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T09:50:41.013

因此，您需要访问数据库，还需要从客户端填写 Web 表单。如果您使用 Selenium，它将是这种情况：

用户启动您的程序。程序打开浏览器窗口，登录并填写表格。用户检查数据并按下“发送”按钮。浏览器窗口被程序自动关闭（可能会保持浏览器窗口打开，但最好清理资源并完成程序）。

代码示例：

```
public static void main(String[] args) throws InterruptedException {
    webDriver = new FirefoxDriver();

    try {
        processPage();
    } finally {
        webDriver.quit();
    }
}

private static void processPage() throws InterruptedException {
    webDriver.get("http://some_page_url");

    // Page element search example
    List<WebElement> elements = webDriver.findElements(By.xpath(XPATH_STR));

    // Fill page here
} 
```

# javascript - Javascript替换等号

> ID：10151803
> 
> 赞同：0
> 
> 时间：2012-04-14T07:16:11.487
> 
> 标签：javascript, jquery, ruby

我收到如下回复

```
var val = {&quot;Type&quot;=&gt;&quot;D&quot;,&quot;Number&quot;=&gt;33&quot;} 
```

从上面我尝试像这样改变

```
var MyArray = {"Type": "D", "Number": "33"};

for(key in MyArray)
{
  alert("key " + key
    + " has value "
    + MyArray[key]);
} 
```

我尝试替换，替换所有不工作的。有什么建议么？

从评论中粘贴的服务器端代码...

```
 new_transfer_header = @params['my_extra_param']
 p new_transfer_header,'------------ ew_transfer_header----------,new_transfer_header.class
 WebView.execute_js("replaceDeliveryWithScanUnit('#{new_transfer_header}')") 

puts result as "{\"Type\"=>\"D\", \"Number\"=>\"33\"} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T07:20:40.060

```
var val = {&quot;Type&quot;=&gt;&quot;D&quot;,&quot;Number&quot;=&gt;33&quot;} 
```

JavaScript 无效 - 由于解析失败，因此无法在同一脚本/脚本块中修复它。

**您可能需要消除一些人为服务器上的**这段脚本所做的额外 HTML 编码。

如果它是某个 AJAX 调用接收到的文本，您应该能够`&quot;`用相应的字符替换和类似的值，而不是用 JSON.parse 解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T07:43:02.577

您可以在我认为的结果上使用 string.replace 和 cal eval，但是从服务器获取有效的 json 会更好吗？

# python - __getitem__ 方法与使用 Python C-API 的元组参数

> ID：10151806
> 
> 赞同：3
> 
> 时间：2012-04-14T07:16:47.207
> 
> 标签：python, python-c-api

是否可以使用 Python C-API定义一个带有参数的类`__getitem__`？a成员的`tuple`成员必须 是 a ，所以我不知道该怎么做。（但我假设 NumPy做到了。）`sq_item``tp_as_sequence``PyTypeObject``ssizeargfunc``ndarray`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T09:46:40.480

是的，`tp_as_mapping`改为使用。

它`mp_subscript`需要一个`PyObject *`，所以你可以使用任何东西作为索引/键。

要了解它们之间的关系，您可以查看其来源`PyObject_GetItem()`（如文档所述）相当于 Python`o[key]`表达式。您会看到它首先尝试`tp_as_mapping`，如果不存在并且 key 存在`int`，它会尝试`tp_as_sequence`。

# ruby-on-rails - 如何在 ruby on rails 中为 Select_tag 使用“onchange”上的特定控制器\操作

> ID：10151808
> 
> 赞同：3
> 
> 时间：2012-04-14T07:17:06.497
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我知道在 MVC 和 Ruby on rail 环境上我有这个代码 `<%= select :language, :language_id, options_for_select([ "Arabic", "English"]), {:prompt => "#{t('language')}"}, {:onChange => "#{remote_function(:url => {:controller => 'ConfigurationController',:action => "change_language"} )}"} %>` 而且我不能让 Select 来调用这个动作并在更改页面上进行 PostBack

选择索引更改后什么都没有发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T07:25:24.207

因为这是一个远程函数调用。如果服务器返回任何错误，您可以在浏览器的控制台中看到吗？

您使用的 select_tag 的语法看起来不错。

编辑：

你有没有尝试提醒一些事情 onchange 事件？参考这个语法

```
 <%= select_tag "language", options_from_collection_for_select(@collection,'value','name'), html_options = { :onChange=> "alert('');" :style=> "display:block;" } %> 
```

您可以在哪里创建您的收藏，

```
@collection = ["en","ab"]
@collection = @collection.map { |name, value| OpenStruct.new(:value => name, :name => name) } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T09:06:07.940

你用的是什么版本的 Rails？看起来 remote_function 在 3.1 [http://apidock.com/rails/ActionView/Helpers/PrototypeHelper/remote_function中已被弃用](http://apidock.com/rails/ActionView/Helpers/PrototypeHelper/remote_function)

使用 jQuery 响应 change 事件：

```
jQuery ->
  $("#select_id").change ->
    $.ajax(
      url: "url",
      dataType: "json",
      data: "data to send")
        .done (data) ->
          do_something_on_success()
        .fail (data) ->
          do_something_on_fail() 
```

# java - 休眠组

> ID：10151809
> 
> 赞同：0
> 
> 时间：2012-04-14T07:17:10.303
> 
> 标签：java, hibernate

我想知道如何在hibernate中制作groupby。我的代码在下面，但它不起作用请告诉我怎么做：

```
Session session = getSession();
Criteria c = session.createCriteria(CardLog.class);
c.add(Restrictions.ge(CARD_PUNCHING_TIME, todaysDate));
c.setProjection(Projections.groupProperty(USER_ID));
c.addOrder(Order.desc(USER_ID));
cardLogList = c.list();                
System.out.println("----------------" + cardLogList); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T10:41:23.080

我认为你必须像这样使用

```
Session session = getSession();
Criteria c = session.createCriteria(CardLog.class);
c.add(Restrictions.ge("bean property todaydate", todaysDate));
c.setProjection(Projections.groupProperty("bean property userId"));
c.addOrder(Order.desc("bean property userId"));
cardLogList = c.list();                
System.out.println("----------------" + cardLogList); 
```

# php - 如何将带有 pdf 扩展名的 url 的内容转换为文本以便在 PHP 中解析而无需下载？

> ID：10151812
> 
> 赞同：0
> 
> 时间：2012-04-14T07:18:00.060
> 
> 标签：php, pdf, text

如何将带有 pdf 扩展名的 url 的内容转换为文本以便在 PHP 中解析而无需下载？

我看到如何做到这一点（没有垃圾字符）的唯一方法是将文件下载到服务器文件夹并壳一个可执行文件，将二进制文件转换为文本。

以下是我找到的一些可执行库：TET，文本提取工具包 xpdf

我宁愿在不先下载 pdf 的情况下转换 URL pdf（例如打开二进制文件然后转换）。

**有没有办法在不下载 PHP 中的 pdf 的情况下做到这一点？**

**推荐什么方法以最快的执行时间？**

作为一个简短的说明，我将做大约 64 个带有 pdf 扩展名的 URL，并不是所有这些 url 实际上都指向 pdf。实际上，其中一些 url 可能指向别名 html 页面，不一定是 pdf 文件，因此在使用转换工具之前需要辨别差异。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T08:02:27.407

直接从 a 转换`URL`是不切实际的，而且会是`very slow`.. 大多数转换是通过`command line`而不是直接使用来完成的，以`PHP`获得快速和更好的结果

样本转换使用`xpdf` `pdftotext`

安装 (Linux)`apt-get install xpdf`

示例代码

```
$file = $directory . '/' . $filename;
$fileinfo = pathinfo ( $filename );
$content = "";

// pdt to text
if ($fileinfo ['extension'] == 'pdf') {
    $outpath = preg_replace ( "/\.pdf$/", "", $file ) . ".txt";
    system ( "pdftotext -enc UTF-8 " . escapeshellcmd ( $file ), $ret );
    if ($ret == 0) {
        $content = file_get_contents ( $outpath );
        unlink ( $outpath );
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T17:48:42.513

我找到了一些获取 file_get_contents('url.pdf') 内容的源代码并进行了粗略的转换（我的意思是非常粗略）。

由于这似乎是在内存中进行这种转换的最佳方法，我想我别无选择，只能先下载“url.pdf”。

此代码可以下载文件吗？

```
//set to the URL of the file you want to download:
$inPath = "http://somepage.com/hello.jpg";
//set to the local path where the file should be saved:
$outPath = "/usr/local/htdocs/hello.jpg";

$in = fopen($inPath, "rb");
$out = fopen($outPath, "wb");

while ($chunk = fread($in,8192) ) {
fwrite($out, $chunk, 8192);
}

fclose($in);
fclose($out); 
```

# image - 是否有一些易于使用的 Cocoa 图像处理/编辑库？

> ID：10151813
> 
> 赞同：0
> 
> 时间：2012-04-14T07:18:05.070
> 
> 标签：image, cocoa, opencv

像 OpenCV

我希望这个库可以做几个简单的图像编辑操作，比如 DrawLine(UiImage, startPoint, endPoint) 或 ConvertToGray(UiImage)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T07:45:37.760

**[`CoreImage`](http://en.wikipedia.org/wiki/Core_Image)**是 Cocoa 中内置的图像处理库。

例如：[产生黑白效果的最佳 Core Image 滤镜是什么？](https://stackoverflow.com/questions/10030631/what-is-the-best-core-image-filter-to-produce-black-and-white-effects)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T09:23:42.180

我建议使用 OpenCV ，这是一个很棒的算法和图像处理库。选择 Opencv 会给你更多的未来选择。

试试[这个](http://opencv.willowgarage.com/wiki/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T10:38:50.757

OpenCV 不适用于图像编辑。你可以这样做，但这就像买一条大轨道从市场上运送你的杂货一样。

最好的方法是查看一些已经集成的图像编辑库。据我所知，在 Cocoa 中有几个。Dor 提到的 CoreImage 就是其中之一。

并且有一些专门的图像编辑/UI 工具包可以比 OpenCV 更好地帮助您。您可以检查 ImageMagik 或 QT 是否适用于 Mac/iOS

# java - java中的字符串编码

> ID：10151815
> 
> 赞同：1
> 
> 时间：2012-04-14T07:18:05.957
> 
> 标签：java, string, encoding

我有一个字符串`String a="123+>jo`，我想对字符串进行编码，以便我可以将它重定向到一个 url。我最初用**urlencoder**尝试过，但在 urldecoder +(plus) 在解码时被删除。所以我丢失了我的数据。

**什么是正确的编码方法，以便我在解码时也得到相同的字符串？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T07:19:28.767

URLEncoder 完美运行。加号成功编码为`%2B`.

## 编码：有效

这是 IDEONE 项目：http: [//ideone.com/zMDur](http://ideone.com/zMDur)

```
import java.net.URLEncoder;

// ...

    public static void main (String[] args) throws java.lang.Exception
    {
            String str = "123+>jo";
            String str2 = "http://1.com/23+>jo";
            System.out.println(URLEncoder.encode(str));
            System.out.println(URLEncoder.encode(str2));
    } 
```

印刷：

```
123%2B%3Ejo
http%3A%2F%2F1.com%2F23%2B%3Ejo 
```

## 编码+解码：有效

带有解码功能的 IDEONE 项目：http: [//ideone.com/Ypfv4](http://ideone.com/Ypfv4)

```
import java.net.URLEncoder;
import java.net.URLDecoder;

// ...

    public static void main (String[] args) throws java.lang.Exception
    {
            String str = "123+>jo";
            String str2 = "http://1.com/23+>jo";
            System.out.println(URLDecoder.decode(URLEncoder.encode(str)));
            System.out.println(URLDecoder.decode(URLEncoder.encode(str2)));
    } 
```

印刷：

```
123+>jo
http://1.com/23+>jo 
```

* * *

所以一切都使用`java.net.URLEncoder`and `java.net.URLDecoder`。

# iphone - 在objective-c中归档两个数组时出错

> ID：10151817
> 
> 赞同：0
> 
> 时间：2012-04-14T07:19:16.660
> 
> 标签：iphone, nskeyedarchiver

我正在浏览 iOS 5 开头的示例，并尝试对其进行调整以供我使用。我有一个 DataManager 单例对象，它具有以下属性：

```
@property (nonatomic, strong) NSArray *frequencyArray;
@property (nonatomic, strong) NSMutableArray *networkArray; 
```

当我使用 ARC 时，我的单例看起来像：

```
- (id)init {
    if (self = [super init]) {
        _networkArray = [[NSMutableArray alloc] init];
    }
    return self;
}

+ (id)sharedInstance {
    if (sharedDmgr == nil) {
        sharedDmgr = [[super allocWithZone:NULL] init];

    }
    return sharedDmgr;
}

+ (id)allocWithZone:(NSZone *)zone {
    return [self sharedInstance];
}

- (id)copyWithZone:(NSZone *)zone {
    return self;
} 
```

我按照示例代码使此类符合 NSCoding 和 NSCopying。我在这个类中创建了两个方法来存档自己，并取消存档自己。那些是：

```
- (NSString *)dataFilePath {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    return [documentsDirectory stringByAppendingFormat:ARCHIVE_FILE_NAME];
}
- (void)archiveAppData {
    NSMutableData *data = [[NSMutableData alloc] init];
    NSKeyedArchiver *archiver = [[NSKeyedArchiver alloc] initForWritingWithMutableData:data];
    [archiver encodeObject:self forKey:ARCHIVE_DATA];
//    [archiver encodeObject:_frequencyArray forKey:DMGR_FREQUENCY_ARRAY];
//    [archiver encodeObject:_networkArray forKey:DMGR_NETWORK_ARRAY];
    [archiver finishEncoding];
//    BOOL success = [data writeToFile:[self dataFilePath] atomically:YES];
    NSError *error;
    BOOL success = [data writeToFile:[self dataFilePath] options:NSDataWritingAtomic error:&error];
    if (!success) {
        NSLog(@"Could not write file %@", [error description]);
    }
}

- (void)unarchiveAppData {
    NSData *data = [[NSMutableData alloc] initWithContentsOfFile:[self dataFilePath]];
    NSKeyedUnarchiver *unarchiver = [[NSKeyedUnarchiver alloc] initForReadingWithData:data];
    sharedDmgr = [unarchiver decodeObjectForKey:ARCHIVE_DATA];
//    self.frequencyArray = [unarchiver decodeObjectForKey:DMGR_FREQUENCY_ARRAY];
//    self.networkArray = [unarchiver decodeObjectForKey:DMGR_NETWORK_ARRAY];
    [unarchiver finishDecoding];   
} 
```

我得到错误：

> 无法写入文件 Error Domain=NSCocoaErrorDomain Code=513 “操作无法完成。（Cocoa 错误 513。） “操作无法完成。不允许操作"}

我用谷歌搜索了一下，发现它指的是修改捆绑包。但是我看不到我在哪里这样做，因为我认为我正在使用我的 [self dataFilePath] 代码写入文档目录。

当我的应用程序退出活动时，我调用 archiveAppData 方法。当我的第一个 viewController 加载时，我调用 unarchiveAppData。正如您从我注释掉的代码中看到的那样，我尝试只对这两个数组进行编码，然后对它们进行解码，而不是对 DataManager 对象本身进行解码，但这似乎也不起作用。对我做错了什么有任何想法吗？谢谢。

# java - 相机图像处理

> ID：10151822
> 
> 赞同：5
> 
> 时间：2012-04-14T07:20:08.797
> 
> 标签：java, image, image-processing

基本上我有一个摄像头芯片（摄像头模块：C3038，使用 OmniVision 的 CMOS 图像传感器 OV6630）通过 RS232 链路连接到 PC。我想在这种格式的 Java 程序中读取图像数据（根据相机规范）：

数据格式 - YCrCb 4:2:2、GRB 4:2:2、RGB 原始数据

关于如何做的任何提示？

我的实现：

```
import gnu.io.CommPortIdentifier;
import gnu.io.PortInUseException;
import gnu.io.SerialPort;
import gnu.io.SerialPortEvent;
import gnu.io.SerialPortEventListener;
import gnu.io.UnsupportedCommOperationException;

import java.awt.*;
import java.awt.image.*;
import java.io.*;
import java.util.*;
import javax.swing.*;
import javax.imageio.*;

public class SimpleRead1 implements Runnable, SerialPortEventListener {
static CommPortIdentifier portId;
static Enumeration portList;

InputStream inputStream;
SerialPort serialPort;
Thread readThread;
byte [] readBuffer;
static byte [] storeBuffer;

public SimpleRead1() {
    try {
        serialPort = (SerialPort) portId.open("SimpleReadApp", 2000);
    }catch (PortInUseException e) {System.out.println(e);}

    try {
        inputStream = serialPort.getInputStream();
    }catch (IOException e) {System.out.println(e);}

    try {
        serialPort.addEventListener(this);
    } catch (TooManyListenersException e) {System.out.println(e);}

    serialPort.notifyOnDataAvailable(true);

    try {
        serialPort.setSerialPortParams(9600,
            SerialPort.DATABITS_8,
            SerialPort.STOPBITS_1,
            SerialPort.PARITY_NONE);
    } catch (UnsupportedCommOperationException e) {System.out.println(e);}

    readThread = new Thread(this);
    readThread.start();
}

public void run() {
    try {
        Thread.sleep(20000);
    } catch (InterruptedException e) {System.out.println(e);}
}

@Override
public void serialEvent(SerialPortEvent event){
    switch(event.getEventType()) {
    case SerialPortEvent.BI:
    case SerialPortEvent.OE:
    case SerialPortEvent.FE:
    case SerialPortEvent.PE:
    case SerialPortEvent.CD:
    case SerialPortEvent.CTS:
    case SerialPortEvent.DSR:
    case SerialPortEvent.RI:
    case SerialPortEvent.OUTPUT_BUFFER_EMPTY:
        break;
    case SerialPortEvent.DATA_AVAILABLE:
        readBuffer = new byte[Integer.MAX_VALUE];

        try {
            while (inputStream.available() > 0) {

                int numBytes = inputStream.read(readBuffer);
                System.out.print(new String(readBuffer));
            }
           } catch (IOException e) {e.printStackTrace();}

        InputStream in = new ByteArrayInputStream(readBuffer);
        BufferedImage image = null;

        try {
            image = ImageIO.read(in);
        } catch (IOException e) {e.printStackTrace();}

        //GUI for displaying image
        ImageIcon imageIcon = new ImageIcon(image);
        JLabel label = new JLabel();
        label.setIcon(imageIcon);
        JFrame frame = new JFrame("image display");
        frame.getContentPane().add(label,BorderLayout.CENTER);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);                       
        break;
    }
}

public static void main(String[] args) throws Exception {
    portList = CommPortIdentifier.getPortIdentifiers();

    while (portList.hasMoreElements()) {
        portId = (CommPortIdentifier) portList.nextElement();
        if (portId.getPortType() == CommPortIdentifier.PORT_SERIAL) {
             if (portId.getName().equals("COM7")) {
        //                if (portId.getName().equals("/dev/term/a")) {
                SimpleRead1 reader = new SimpleRead1();
           }
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T07:58:43.690

不幸的是，Java 本身不支持串行端口——你需要一个外部库。我建议看一下[RXTX library](http://rxtx.qbang.org/wiki/index.php/Main_Page)，这在当今似乎已成为事实上的标准。

视频传感器芯片本身通常具有相对简单的通信接口（即没有桥接芯片）。通常归结为设置图像参数，启动实际的图像数据传输，然后将多个字节读取到缓冲区中。有时可能涉及图像数据的开始或结束签名，但仅此而已。

如果您手头有芯片的所有文档，这应该不会*太难- 我偶尔会在没有**任何*文档的情况下在 C 中做类似的事情......

**编辑：**

将图像读取到字节数组后，您可能可以使用[BufferedImage 类](http://docs.oracle.com/javase/6/docs/api/java/awt/image/BufferedImage.html)使其可用于 Java。也就是说，我无法确定 Java 是否支持除 ARGB 变体之外的任何东西——如果你想使用非- 传感器中的 RGB 模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T07:58:20.493

这个问题有点宽泛，所以我不知道你有多少经验，但对于 RS-232，你将需要使用 SerialPort。[这](http://www.java-samples.com/showtutorial.php?tutorialid=11)是一个简单的示例，可让您开始从 COM 端口读取数据。

# javascript - 将属性添加到字符串对象中的问题

> ID：10151828
> 
> 赞同：0
> 
> 时间：2012-04-14T07:21:21.777
> 
> 标签：javascript

```
var s = "Hi";

Date.now = function (){
    return new Date();
}

s.createdOn = function (){
    return new Date();
}

alert(s.createdOn()); // This is not working
alert(Date.now()); // This works fine 
```

我是否违反任何规则。因为我可以将新属性添加到 Date 类但不能添加到字符串类。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T07:34:20.177

不能向字符串文字添加属性或方法的原因是，当您尝试访问文字的属性或方法时，Javascript 解释器会临时将字符串的值复制到新对象中，然后使用该对象的属性或方法。这意味着字符串文字只能访问字符串的默认属性或方法以及那些已作为原型添加的属性或方法。

可以从此链接获得更多信息：

[http://www.hunlock.com/blogs/The_Complete_Javascript_Strings_Reference](http://www.hunlock.com/blogs/The_Complete_Javascript_Strings_Reference)

希望对你有帮助

* * *

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T07:35:08.063

代替：

```
var s = "Hi"; 
```

和

```
var s = {}; 
```

# java - 将字符串从客户端传输到服务器时的垃圾值

> ID：10151830
> 
> 赞同：1
> 
> 时间：2012-04-14T07:21:35.833
> 
> 标签：java, xml, base64

这是我在客户端的字符串：

```
<?xml version="1.0" encoding="UTF-8"?><samlp
:AuthnRequest xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol" AssertionConsum
erServiceURL="http://172.16.32.160:8080/ration/consumer.jsp" ID="3dece98b-f89d-4
b59-b7ed-5f278aa56eb0" IssueInstant="2012-04-14T12:47:36" ProtocolBinding="urn:o
asis:names:tc:SAML:2.0:bindings:HTTP-POST" Version="2.0" destination="http://172
.16.32.160:8080/ration/EFORMS/service1level1.html" level="level1"><saml:Issuer x
mlns:saml="urn:oasis:names:tc:SAML:2.0:assertion">http://172.16.32.160:8080/rati
on/SProvider.jsp</saml:Issuer><samlp:NameIDPolicy AllowCreate="true" Format="urn
:oasis:names:tc:SAML:2.0:nameid-format:unspecified"/><samlp:RequestedAuthnContex
t Comparison="exact"/><saml:AuthnContextClassRef xmlns:saml="urn:oasis:names:tc:
SAML:2.0:assertion">urn:oasis:names:tc:SAML:2.0:ac:classes:PasswordProtectedTran
sport</saml:AuthnContextClassRef><Signature xmlns="http://www.w3.org/2000/09/xml
dsig#"><SignedInfo><CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/
xml-exc-c14n#"/><SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rs
a-sha1"/><Reference URI=""><Transforms><Transform Algorithm="http://www.w3.org/2
000/09/xmldsig#enveloped-signature"/></Transforms><DigestMethod Algorithm="http:
//www.w3.org/2001/04/xmlenc#sha256"/><DigestValue>ZrvAtwVXohf0JrjGzWlBt9gt9SNESE
Id6lZuU4iOZkg=</DigestValue></Reference></SignedInfo><SignatureValue>M62OPXOZ8nR
zIDjFcTgBTnYSzZdrjwHL6p93wbpSYHZgBOUD4EZgt47GhtFAVU3oVga5VLt5yK+j
hBvEVtaj2/bKIvFfXDpnOuXKNlsKtdu140iMUMdxRvnMyh8enx77YhUlSl2VCQ0NnYnk3gs4H8QE
qmeorwXsthtjUMTKqAw=</SignatureValue></Signature></samlp:AuthnRequest> 
```

我已经使用愚蠢的代码对其进行了编码：

```
byte[] q3=Base64.encodeBase64(xmlString.getBytes("utf-8"));
        String xmlString1=new String(q3,"utf-8"); 
```

在服务器中，我首先使用以下内容进行解码：

```
byte[] decoded = Base64.decodeBase64(result.getBytes("utf-8"));
                String result10=new String(decoded,"utf-8"); 
```

结果包含以下内容：

```
<?xml version="1.0" encoding="UTF-8"?><samlp:
AuthnRequest xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol" AssertionConsume
rServiceURL="http://172.16.32.160:8080/ration/consumer.jsp" ID="3dece98b-f89d-4b
59-b7ed-5f278aa56eb0" IssueInstant="2012-04-14T12:47:36" ProtocolBinding="urn:oa
sis:names:tc:SAML:2.0:bindings:HTTP-POST" Version="2.0" destination="http://172.
16.32.160:8080/ration/EFORMS/service1level1.html" level="level1"><saml:Issuer xm
lns:saml="urn:oasis:names:tc:SAML:2.0:assertion">http://172.16.32.160:8080/ratio
n/SProvider.jsp</saml:Issuer><samlp:NameIDPolicy AllowCreate="true" Format="urn:
oasis:names:tc:SAML:2.0:nameid-format:unspecified"/☼∟?[[∟♫??\]Y\?↓Y►]]→←???↓►??\
↑\?\??H?^↑X??∟?[[♫?]]→←???↓^↔►?↑\??Y?▲←[←???[[☼H?\????\?\??[Y\?↑??SS♫???♫?\??\?→
[???\????\?\??[Y\?↑??SS♫???♫?X??↑\??\?↑\????¶∟??↓X?↓Y§∟?[??←?☼♂??[[♫?]]→←???↓^↔►
?↑\??Y??¶?Y?]↔\?H▲←[←??H?↔↔∟♫???????????♀♀♂?♫K?←[↓∟?Y???¶?Y?Y↕[???►?[??X?[→^?]→[
?Y]→►[↓??]→←OH?↔↔∟♫???????????♀♀K?L♂?←[♂Y^↑?X?M←????6?v?↨GW&T?WF??B♦▬?v?&?F???&?
GG♥???wwr?s2??&r?#♥♥☻?♥?????G6?r7'6↕?6?‼↕"???&VfW&V?6R♣U$??"#??G&▬?6f?&?3??G&▬?6
f?&?♦▬?v?&?F???&?GG♥???wwr?s2??&r?#♥♥☻?♥?????G6?r6V?fV??♠VB?6?v?↨GW&R"????G&▬?6f
?&?3??F?vW7D?WF??B♦▬?v?&?F???&?GG♥???wwr?s2??&r?#♥♥↕?♥B????V?276?‼#Sb"??◄?????Y?
???i??♣??Ya????)?↔?]?   ????M9§M§%??i?T?=i????◄?????Y?????I?????????M?????%???<S
ignatureValue>M62OPXOZ8nRzIDjFcTgBTnYSzZdrjwHL6p93wbpSYHZgBOUD4EZgt47GhtFAVU3oVg
a5VLt5yK+j
hBvEVtaj2/bKIvFfXDpnOuXKNlsKtdu140iMUMdxRvnMyh8enx77YhUlSl2VCQ0NnYnk3gs4H8QE
qmeorwXsthtjUMTKqAw=</SignatureValue></Signature></samlp:AuthnRequest><br> 
```

如您所见，您是插入中间部分的垃圾值。但是没有任何字符在文档的其余部分中不存在。为什么只有那部分才有垃圾价值？
**编辑**
我正在使用以下代码发送 xmlString。

```
String reqString = "http://172.16.32.160:8080/saml/IDProvider"+"?SAMLRequest=" + xmlString1;

        resp.sendRedirect(reqString); 
```

在我使用的服务器中

```
String result=req.getParameter("SAMLRequest");
                byte[] decoded = Base64.decodeBase64(result.getBytes("utf-8"));
                String result10=new String(decoded,"utf-8"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T08:27:56.253

原则上是正确的；你也可以这样做（如你所知）：

发送：

```
byte[] q3=Base64.encodeBase64(xmlString.getBytes("utf-8"));
String xmlString1=new String(q3,"US-ASCII"); 
```

接收：

```
byte[] decoded = Base64.decodeBase64(result.getBytes("US-ASCII"));
String result10=new String(decoded,"utf-8"); 
```

我认为这是转移：Base64 给出 A-z0-9 和`+`and `/`。您可能必须替换 + 和 /。此外，可能会生成空格/换行符，也必须进行处理。在传输过程中，空格可能会变成 +。

不太可能的错误是将标头中的内容长度设置为原始大小 (6/8) 而不是编码长度。

如果您查看编码结果，您可能会自己看到它。编码为正确的内容+一个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T07:52:35.350

您遗漏了一个重要部分：您发送`xmlString1`到服务器的代码，以及服务器形成`result`字符串的位置。

这可能就是问题所在。当然，该代码将确定您的编码和解码是否适当/正确。

# c++ - 为什么我不能在 char * 和 unsigned char * 之间进行静态转换？

> ID：10151834
> 
> 赞同：56
> 
> 时间：2012-04-14T07:21:56.460
> 
> 标签：c++, char, reinterpret-cast, static-cast, unsigned-char

显然编译器认为它们是不相关的类型，因此`reinterpret_cast`是必需的。为什么这是规则？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-04-14T08:26:34.850

它们是完全不同的类型，见标准：

> 3.9.1 基本类型[basic.fundamental]
> 
> 1 声明为字符 char) 的对象应足够大以存储实现的基本字符集的任何成员。如果该集合中的字符存储在字符对象中，则该字符对象的整数值等于该字符的单个字符文字形式的值。char 对象是否可以保存负值是实现定义的。字符可以显式声明为无符号或有
> 符号。 ***普通字符、有符号字符和无符号字符是三种不同的类型。*** char、signed char 和 unsigned char 占用相同的存储量并具有相同的对齐要求（*basic.types*); 也就是说，它们具有相同的对象表示。对于字符类型，对象表示的所有位都
> 参与值表示。对于无符号字符类型，值表示的所有可能的位模式都表示数字。这些要求不适用于其他类型。在任何特定实现中，普通 char 对象可以采用与带符号字符或无符号字符相同的值；哪一个是实现定义的。

与此类似也是以下失败的原因：

```
unsigned int* a = new unsigned int(10);
int* b = static_cast<int*>(a); // error different types 
```

`a`并且`b`是完全不同的类型，您真正要问的是为什么 static_cast 在可以毫无问题地执行以下操作时如此受限制

```
unsigned int a = new unsigned int(10);
int b = static_cast<int>(a); // OK but may result in loss of precision 
```

为什么不能推断出目标类型是相同的位域宽度并且可以表示？它可以对标量类型但对指针执行此操作，除非目标是从源派生的并且您希望执行向下转换，然后指针之间的转换将不起作用。

Bjarne Stroustrop 说明了为什么`static_cast`'s 在此链接中很有用：http: [//www.stroustrup.com/bs_faq2.html#static-cast](http://www.stroustrup.com/bs_faq2.html#static-cast)但以缩写形式，用户可以清楚地说明他们的意图并给编译器有机会检查您的意图是否可以实现，因为`static_cast`不支持不同指针类型之间的转换，所以编译器可以捕获此错误以提醒用户，如果他们真的想要进行此转换，则应使用`reinterpret_cast`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-14T07:45:52.300

您正在尝试使用 static_cast 转换不相关的指针。这不是 static_cast 的用途。在这里你可以看到：[类型 Casting](http://www.cplusplus.com/doc/tutorial/typecasting/)。

使用 static_cast 您可以转换数字数据（例如 char 到 unsigned char 应该可以工作）或指向相关类的指针（通过某些继承相关）。这两种情况都不是。您想将一个不相关的指针转换为另一个，因此您必须使用 reinterpret_cast。

基本上，您尝试对编译器执行的操作与尝试将 char * 转换为 void * 相同。

* * *

好的，这里有一些额外的想法，为什么允许这样做从根本上是错误的。static_cast 可用于将数字类型相互转换。因此，编写以下内容是完全合法的：

```
char x = 5;
unsigned char y = static_cast<unsigned char>(x); 
```

还有什么可能：

```
double d = 1.2;
int i = static_cast<int>(d); 
```

如果您在汇编程序中查看此代码，您会发现第二次转换不仅仅是对 d 位模式的重新解释，而是在此处插入了一些用于转换的汇编程序指令。

现在，如果我们将这种行为扩展到数组，只需一种不同的方式来解释位模式就足够了，它可能会起作用。但是如何将双精度数组转换为整数数组呢？这就是您必须声明您想要重新解释位模式的地方 - 有一种称为 reinterpret_cast 的机制，或者您必须做一些额外的工作。正如您所看到的，简单地为指针/数组扩展 static_cast 是不够的，因为它需要表现得类似于 static_casting 类型的单个值。这有时需要额外的代码，并且不清楚如何为数组完成此操作。在你的情况下 - 停在 \0 - 因为这是惯例？这对于非字符串情况（数字）是不够的。如果数据类型的大小发生变化（例如 int vs.

无法为所有用例正确定义您想要的行为，这就是它不在 C++ 标准中的原因。否则，您将不得不记住以下内容：“我可以将这种类型转换为另一种类型，只要它们是整数类型，具有相同的宽度并且......”。这样就很清楚了-它们是相关的类-然后您可以转换指针，或者它们是数字类型-然后您可以转换值。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-14T10:31:03.663

除了是指针，`unsigned char *`and`char *`没有任何共同点（EdChum 已经提到`char`,`signed char`和`unsigned char`是三种不同的类型）。您可以对任何不同结构的指针类型`Foo *`说同样的话。`Bar *`

`static_cast`表示源类型的指针可以作为目的类型的指针，需要有子类型关系。因此，它不能在您的问题的上下文中使用；您需要的是`reinterpret_cast`完全符合您的要求或 C 风格的演员表。

# node.js - 提交翡翠表格

> ID：10151837
> 
> 赞同：16
> 
> 时间：2012-04-14T07:22:12.620
> 
> 标签：node.js, pug, form-submit

以下 Jade 表单模板有什么错误？我无法让它提交值。

```
 div
   form(action='/signup',method='post')
     div(data-role='fieldcontain')
       fieldset(data-role='controlgroup')
         label(for='email') email
         input(id='email',type='text',value='',placeholder='@')
     div#passworddiv(data-role='fieldcontain')
       fieldset(data-role='controlgroup
         label(for='password') password
         input(id='password',type='password',value='',placeholder='')
     div(id='hiddendiv',data-role='fieldcontain')
       fieldset(data-role='controlgroup')
         label(for='hidden_password') password
         input(id='hidden_password',type='text',value='',placeholder='')
     div(data-role='fieldcontain')
       fieldset(data-type='vertical',    data-role='controlgroup') 
         label(for='showpass') show password
         input(id='showpass',type='checkbox')
     div(data-role='fieldcontain')   
       input(type='submit',value='Sign Up',data-transition='fade', data-theme='c') 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-14T07:51:11.007

问题是因为您没有给任何输入字段命名。

```
app.post('/signup', function(req,res){
  console.log(req.body);
}) 
```

回报： `{}`

如果您将表单编辑为以下内容：

```
 div
  form(action='/signup',method='post')
    div(data-role='fieldcontain')
      fieldset(data-role='controlgroup')
        label(for='email') email
           input(id='email',type='text',value='',placeholder='@',name='email')
    div#passworddiv(data-role='fieldcontain')
      fieldset(data-role='controlgroup')
        label(for='password') password
           input(id='password',type='password',value='',placeholder='',name='password')
    div(id='hiddendiv',data-role='fieldcontain')
      fieldset(data-role='controlgroup')
        label(for='hidden_password') password
           input(id='hidden_password',type='text',value='',placeholder='',name='password2')
    div(data-role='fieldcontain')
      fieldset(data-type='vertical', data-role='controlgroup')                                           
       label(for='showpass') show password
       input(id='showpass',type='checkbox')
    div(data-role='fieldcontain')   
      input(type='submit',value='Sign Up',data-transition='fade', data-theme='c') 
```

输入一些数据后，

```
app.post('/signup', function(req,res){
  console.log(req.body);
}) 
```

返回：

```
{ email: 'testing@fake.com',
  password: 'asdf',
  password2: 'asdf' } 
```

# ios - iOS着色透明图像

> ID：10151841
> 
> 赞同：-1
> 
> 时间：2012-04-14T07:22:44.557
> 
> 标签：ios, xcode

我正在尝试开发一个着色应用程序。我想从一个空白画布开始，当用户使用触摸颜色时，我只想显示彩色图像的那些触摸区域。我该如何做到这一点？任何帮助都会对我有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T07:58:03.380

可能这会帮助你开始

```
UITouch *touch = [touches anyObject];   

    CGPoint currentPoint = [touch locationInView:drawImage];

    UIGraphicsBeginImageContext(drawImage.frame.size);

    [drawImage.image drawInRect:CGRectMake(0, 0, drawImage.frame.size.width, drawImage.frame.size.height)];

    CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);

    CGContextSetLineWidth(UIGraphicsGetCurrentContext(), size);

      CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), r, g, b, a);

    CGContextBeginPath(UIGraphicsGetCurrentContext());

    CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);

    CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), currentPoint.x, currentPoint.y);

    CGContextStrokePath(UIGraphicsGetCurrentContext());

    drawImage.image = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext(); 
```

虽然我还没有尝试过，但在 SO question 上发现它对你的要求很好

# javascript - 跨度在提交时消失

> ID：10151842
> 
> 赞同：2
> 
> 时间：2012-04-14T07:22:52.197
> 
> 标签：javascript, validation, styles, html

我被要求用 JavaScript 验证代码创建一个简单的表单。我已经构建了整个表单，并且我的所有验证脚本都在工作，但是我被要求在适当字段旁边的 Span 标记中显示任何相关错误（而不是像我习惯的那样显示警报）。

我被告知在每个元素（如文本输入、单选按钮等）旁边有一个跨度标记，并带有先前输入的适当错误文本，然后设置每个跨度的样式以使其隐藏。当按下提交按钮时，脚本应该将适当跨度的样式更改为可见以显示文本。我已经为此编写了代码，但我遇到的问题是我的 Span 错误变得可见，但几乎立即它们消失回隐藏状态。发生这种情况有什么特别的原因吗？

这是我的一些代码。

HTML：

```
< input type="checkbox" name="agree"/> < span id="agreeSpan>Error text< /span> 
```

CSS：

```
span {
color:red;
font-size:small;
visibility:hidden;
} 
```

和 JavaScript：

```
 function validateAgreement()
    {

    var agreeBox = document.registration.agree;
    var agreeSpan = document.getElementById('agreeSpan');

   if (!agreeBox.checked) {
      agreeSpan.style.visibility = 'visible';
      return false;
    } 
```

我错过了一些明显的东西吗？是否有可能我正在尝试设置 1 个特定跨度的样式，并且通用跨度标签的样式属性覆盖了这个特定的跨度？

非常感谢，如果这是一个菜鸟问题，我们深表歉意！我是 JS 新手 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T07:56:00.673

要停止提交，仅返回 false 是不够的。这取决于您如何调用该函数，我想是这样的

```
<form action='blah' onsubmit='return validateAgreement();'>
 ...
</form> 
```

注意返回。on submit 处理程序需要返回 false，因此您需要确保返回函数返回的任何值。如果你刚刚...

```
<form action='blah' onsubmit='validateAgreement();'>
 ...
</form> 
```

那么您的表单将始终被提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T07:40:44.580

`id` 在您的 HTML 代码中，您错过了It should have的结束引号，`id="agreeSpan"`但您输入了`id="agreeSpan`

# iphone - 使用确切的 iOS 5.0 在哪里存储用户上传的文件？没有“不备份”标志

> ID：10151843
> 
> 赞同：3
> 
> 时间：2012-04-14T07:22:56.500
> 
> 标签：iphone, ios, icloud

我正在制作一个 iOS 应用程序，它允许用户将他们的文件上传到 iOS 设备。

我知道使用 iOS 5.0.1 及更高版本我可以将文件存储到 Documents 目录并将其标记为“不备份”，这样文件就不会被 iCloud 同步。

我也知道使用 iOS 4.x 及更低版本我仍然可以将文件放入 Documents，因为不支持 iCloud。

问题是：如何处理确切的 iOS 5.0 版本？它支持 iCloud，但没有“不备份”标志。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T07:39:25.603

请参阅[http://developer.apple.com/library/ios/#qa/qa1719/_index.html](http://developer.apple.com/library/ios/#qa/qa1719/_index.html)：

*重要 新的“不备份”属性仅适用于 iOS 5.0.1 或更高版本。在 iOS 5.0 和更早版本上，应用程序需要将其数据存储在 /Library/Caches 中以避免备份。由于在旧系统上会忽略此属性，因此您需要确保您的应用程序在您的应用程序支持的所有 iOS 版本上都符合 iOS 数据存储指南。*

所以你应该把它放在*/Library/Caches*中。

# python - 编写更好的代码而不是 2 个 for 循环

> ID：10151847
> 
> 赞同：15
> 
> 时间：2012-04-14T07:23:09.440
> 
> 标签：python, list, for-loop

我有 2 个 for 循环，我想让它变得更好，比如列表理解或 lambda 或其他。我怎样才能做到这一点？

例如 ：

```
filename = ['a.txt', 'b.txt', 'c.txt']
for files in filename:
    for f in glob.glob(os.path.join(source_path, files)):
        print f
        ... some processing... 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-14T07:30:48.097

你的代码完全没有问题。您只能通过引入不必要的复杂结构来使其不那么清晰。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-15T01:26:06.977

我会像下面那样做。原因是现在您可以将搜索模式的形成、搜索和文件处理分开。如果它们不相关，则更容易扩展。

如果您的系统有点奇怪（例如分布式网络驱动器），那么带有 glob 和 os.path.join 的行是一条讨厌的行。尽管正如其他人所提到的，两个循环是完全可以的。

```
filename = ['a.txt', 'b.txt', 'c.txt']

searchPatterns = [os.path.join(source_path, files) for files in filename]

searchResults = [glob.glob(pattern) for pattern in searchPatterns]

fileListFlat = sum(searchResults,[])

for file in fileListFlat:
    print file 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-14T07:42:34.730

您可以将两个`for`循环压缩成一个[生成器表达式](http://docs.python.org/reference/expressions.html#generator-expressions)*，并使用一个新`for`循环从中提取文件名。

```
for f in (f_ for files in filename
             for f_ in glob.glob(os.path.join(source_path, files))):
    print f
    # ... 
```

正如另一个答案所说，这***不是***更好，这***更糟***，你***不应该***使用它（我不确定这是否足够强调！）。很难理解发生了什么，并且可能几乎没有性能优势（事实上，额外的间接层意味着它可能会更慢）。

（* 基本上等同于列表推导，但在这种情况下更好。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-14T08:57:40.903

当您必须向右扫描并向后四舍五入时，很难阅读冗长的表达。当有许多局部变量、lambdas 和 comprehensions 时，情况更糟，只是用括号和逗号分隔，只有几行。仅当您的代码不会变得更长和更复杂时才使用它们。
对于你的情况，我更喜欢提取`find`作为权衡。但正如最佳答案所说，您的代码已经足够好了。

```
from itertools import chain

find = lambda p: glob.glob(os.path.join(source_path, p))
for file in chain(map(find, filename)):
    """
    =) I like one-level indentation here.
    =( I don't know which file pattern is used currently,
       unless I use longer expression...
    """ 
```

# javascript - CSS - 1140px 网格 - IE 7,8 问题 - 媒体查询

> ID：10151849
> 
> 赞同：0
> 
> 时间：2012-04-14T07:23:24.587
> 
> 标签：javascript, jquery, css, media-queries

所以，我使用[1140px css grid](http://cssgrid.net/)。这是一个响应式 css 网格设计，我对它印象深刻。但是（什么时候结束？？），IE (7, 8) 搞砸了。作者使用css 3媒体查询来设置768px以下的样式。他还使用[它](http://code.google.com/p/css3-mediaqueries-js/)在不受支持的浏览器中启用媒体查询。但是这些样式从未在 IE 中应用（即 9 可以正常工作）。

我已经解决了一个相当丑陋的黑客来解决这个问题（读取 - 即当屏幕尺寸低于 768px 时创建样式元素的特定 js 文件）。还有另一种方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T07:46:50.880

respond.js(https://github.com/scottjehl/Respond) 在不受支持的浏览器中获取媒体查询。如果您使用modernizr，这确实包括响应。显然不再：http://modernizr.com/news/modernizr-25/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T18:21:58.983

如果您在 PC 上将其作为文件运行，则 js 文件不会执行任何操作。一旦你把它放在服务器上，js就会启动。

# ruby-on-rails - 通过组关系列出属于用户的文档模型的所有实例

> ID：10151851
> 
> 赞同：2
> 
> 时间：2012-04-14T07:23:32.543
> 
> 标签：ruby-on-rails, ruby-on-rails-3, associations

我基本上按照 ROR 指南[http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)创建关系模型，如下所示。

由于直通关联，我认为@user.trips 会为您提供用户创建的行程和属于该用户的行程。但是，当我`@user.trips.count`在控制台中进行操作时，结果只是用户创建的旅行次数；通过“组”关联属于用户的行程不计算在内。

问题：如何让我的视图同时显示用户创建的行程和用户通过“组”所属的行程？

用户/show.html.erb

```
<% unless @user.all_trips.empty? %>
  <% @user.all_trips.each do |trip| %>
     <!-- Content -->
  <% end %>
<% end %> 
```

用户.rb

```
class User < ActiveRecord::Base
  has_many :group_trips, :through => :groups,
                         :source   => :trip
  has_many :trips, :dependent => :destroy
  has_many :groups

  def all_trips
    self.trips | self.group_trips
  end

end 
```

行程.rb

```
class Trip < ActiveRecord::Base
  belongs_to :user
  belongs_to :traveldeal
  has_many :groups

  has_many :users, :through => :groups
end 
```

组.rb

```
class Group < ActiveRecord::Base
  belongs_to :trip
  belongs_to :user
end 
```

谢谢！

编辑：根据 TSherif 的部分解决方案修改代码。编辑 2：修复了 all_trips 方法。在这一点上，一切似乎都对我有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T10:39:16.140

哦！我想我明白你想要做什么以及为什么这是一个问题。我想知道为什么`has_many :trips`被调用*了两次*。但据我了解，您有两种**不同的** `User`关系`Trip`。这两个不能同名，否则一个会隐藏另一个。尝试这样的事情：

```
class User < ActiveRecord::Base
  has_many :group_trips, :through => :groups,
                         :class_name   => "Trip"
  has_many :trips, :dependent => :destroy
  has_many :groups

  def all_trips
    Trip.joins(:groups).where({:user_id => self.id} | {:groups => {:user_id => self.id}})
  end
end 
```

或者，如果您使用的是旧版本的 Rails，它没有`MetaWhere`：

```
def all_trips
  Trip.joins(:groups).where("(trips.user_id = ?) OR (groups.user_id = ?)", self.id, self.id)
end 
```

# spring-mvc - Spring拦截器的json格式的错误响应

> ID：10151856
> 
> 赞同：0
> 
> 时间：2012-04-14T07:24:05.397
> 
> 标签：spring-mvc, jboss, iinterceptor

我正在编写一个基于 REST 的 Web 服务。我需要以 JSON 格式返回所有响应。我有一个拦截器来验证我的身份验证参数。在身份验证失败的情况下，我必须以 JSON 格式返回错误响应。

目前我正在做

response.setHeader("Content-Type","application/json"); response.sendError(HttpServletResponse.SC_UNAUTHORIZED, "{\"error\":\"缺少身份验证参数\"}");

响应正文如下。

JBoss Web/2.1.3.GA - 错误报告

# HTTP 状态 401 - {"error":"Missing Authentication Parameters"}

**类型**状态报告

**消息**{“错误”：“缺少身份验证参数”}

**描述**此请求需要 HTTP 身份验证 ({"error":"Missing Authentication Parameters"})。

### JBoss Web/2.1.3.GA

我只需要 JSON 字符串作为响应。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T10:39:03.653

您可能应该为此使用 spring-security 。如果您想手动执行此操作，则`sendError`在响应上使用的替代方法是使用 spring MVC 的[@ExceptionHandler](http://static.springsource.org/spring/docs/3.1.0.RELEASE/reference/html/mvc.html#mvc-ann-exceptionhandler)以及[内容协商](http://static.springsource.org/spring/docs/3.1.0.RELEASE/javadoc-api/org/springframework/web/portlet/mvc/annotation/AnnotationMethodHandlerAdapter.html)来返回 JSON。

首先定义一个错误类*：

```
public class Error {
    public message;
    public exception;
    public Error(String message, Exception ex) {
        this.message = message;
        this.exception = ex;
    }
} 
```

还有一个例外：

```
public class NotAuthenticatedException extends Exception {
    // ...
} 
```

然后在你的控制器中，你在适当的时候抛出一个异常，捕捉它`@ExceptionHandler`并返回一个`ResponseEntity`包含一个`Error`实例和适当的错误代码。

```
@Controller
public class SimpleController {
    @RequestMapping(...)
    public String aMethod() {
        // ...
        throw new NotAuthenticatedException("Missing Authentication Parameters");
    }

    @ExceptionHandler(NotAuthenticatedException.class)
    public ResponseEntity<Error> handleNotAuthenticatedException(
            NotAuthenticatedException ex, 
            HttpServletRequest request) {
        return new ResponseEntity<Error>(
            new Error(ex.getMessage(), ex), 
            HttpStatus.UNAUTHORIZED
        );
    }
} 
```

*使用 getter/setter 来取悦 java 约定之神

# c++ - STL 映射和指针的问题

> ID：10151859
> 
> 赞同：2
> 
> 时间：2012-04-14T07:25:17.533
> 
> 标签：c++

```
typedef map<char,string> someMap;
someMap *mapPtr=someClass.getMap();
*(mapPtr)["a"].length(); 
```

此代码的最后一行失败。我应该怎么做才能完成这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T07:29:11.477

```
 (*mapPtr)['a'].length(); 
```

运算符的`*`优先级低于`[]`您必须的优先级，但在括号中。也是`"a"`字符串文字（char数组），而你想要`'a'`

可以在[此处找到 C++ 中运算符优先级的完整列表](http://en.cppreference.com/w/cpp/language/operator_precedence)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T07:27:59.593

`[]`优先级高于`*`

这可能是您想要的：

`(*mapPtr)["a"].length();`

# objective-c - Plist不会写入文件

> ID：10151865
> 
> 赞同：1
> 
> 时间：2012-04-14T07:26:49.260
> 
> 标签：objective-c, cocoa, filesystems, plist

当我尝试这段代码时：

```
if ([[NSFileManager defaultManager] fileExistsAtPath:@"~/Library/Application Support/Staying Afloat/stats/static-stats.plist"] == NO) {
    NSMutableDictionary* tempDict = [[NSMutableDictionary alloc]initWithObjectsAndKeys:
                                     [[NSString alloc] initWithString:@"0"],@"completedGames",
                                     [[NSString alloc] initWithString:@"0"],@"floatsCollected",
                                     [[NSString alloc] initWithString:@"0"],@"sec",
                                     [[NSString alloc] initWithString:@"0"],@"subScore",
                                     [[NSString alloc] initWithString:@"0"],@"highScore",
                                     [[NSString alloc] initWithString:@"0"],@"longestSec", nil];

    [tempDict writeToFile:@"~/Library/Application Support/Staying Afloat/stats/static-stats.plist" atomically:YES];

    NSLog(@"written file");

} 
```

这与输出

```
2012-04-14 19:15:10.009 Staying Afloat[3227:9c07] written file 
```

所以循环已经运行，但文件没有被写入？谁能指出我将 plist 保存到非本地化位置的正确方向？

**编辑：**这是为 mac

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T07:38:13.313

您需要`-(NSString *)stringByExpandingTildeInPath`在编写时使用扩展路径并检查文件是否存在。

**编辑：**阅读`writeToFile:automatically`NSDictionary 文档中的方法。它说

> 如果 path 包含波浪号 (~) 字符，则必须在调用此方法之前使用 stringByExpandingTildeInPath 扩展它。

所以只需做类似的事情

```
[tempDict writeToFile:[[NSString stringWithString:@"~/Library/Application Support/Staying Afloat/stats/static-stats.plist"] stringByExpandingTildeInPath] atomically:YES];
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T07:40:50.547

首先你不能只写：

```
[tempDict writeToFile:@"~/Library/Application Support/Staying Afloat/stats/static-stats.plist" atomically:YES];

NSLog(@"written file"); 
```

因为您不检查文件是否真的成功写入。

你应该写：

```
if([tempDict writeToFile:@"~/Library/Application Support/Staying Afloat/stats/static-stats.plist" atomically:YES]) {
    NSLog(@"written file");
} else {
    NSLog(@"file not written");
} 
```

WriteToFile 方法返回一个布尔值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T07:46:57.637

我总是使用 NSUserDefaults 来为你处理所有事情，比如用户偏好或在运行之间存储应用程序状态。在我的脑海中，我建议您没有正确的权限来编写 plist，如果您不小心破坏了操作系统的重要键和值，会发生什么？看一下

[在 iPhone MVC 应用程序中处理用户首选项的最佳实践？](https://stackoverflow.com/questions/962591/best-practices-for-handling-user-preferences-in-an-iphone-mvc-app)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T08:16:44.463

你确定`-writeToFile:atomically:`退货`YES`？

# java - 从数组列表中获取值并保存

> ID：10151867
> 
> 赞同：0
> 
> 时间：2012-04-14T07:27:25.140
> 
> 标签：java, android, database, sqlite, arraylist

需要帮助从arraylist获取值然后保存到另一个arraylist（在另一个类文件中）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T07:31:08.397

用于`Intent`将值传递给另一个类（扩展活动）`intentObj.putExtras()`会有所帮助。

放在：

```
ArrayList<String> arrayList= new ArrayList<String>();
arrayList.add("hello");
arrayList.add("there");
Intent intent = new Intent(getApplicationContext(), secondClass.class);
        intent.putStringArrayListExtra("pass_list", arrayList);
        startActivity(intent); 
```

要得到

```
ArrayList<String> arrayList= getIntent().getStringArrayListExtra("pass_list"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T07:29:09.043

为此使用`get(index)`、`set(index, object)`和方法。`insert(index, object)``add(object)`

例子：

```
List<String> list0 = new ArrayList<String>();
list0.add("this");
list0.add("is");
list0.add("an");
list0.add("answer");

List<String> list1 = new ArrayList<String>();
list1.add(list0.get(1));
list1.add(list0.get(3));
list1.insert(1, list0.get(0)); 
```

结果 list1 将是：“is”、“this”、“answer”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T07:34:48.813

您可以使用 Collection 类的 addAll 方法将 arraylist 的所有元素添加到另一个。

请参阅文档[http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html#addAll%28java.util.Collection%29](http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html#addAll%28java.util.Collection%29)

# mysql - 它运行的 sql 查询会按用户数重复相同的结果

> ID：10151871
> 
> 赞同：1
> 
> 时间：2012-04-14T07:28:36.097
> 
> 标签：mysql

嗨希望有人可以建议

我有一个 sql 查询，它运行它通过用户（条目）的数量重复相同的结果

例如：

```
post_id
20
20
19
19
18
18 
```

这是不带参数的查询，有人可以解释为什么会这样吗？

谢谢

```
SELECT DISTINCT post_look.post_id, post_look.look_id, post_look.date_posted,     looks.title, looks.item_id, user.user_id, user.first_name, user.last_name,    user_account.profile_image, user_account.account_status, add_profile_images.image_name
FROM post_look
JOIN looks ON looks.look_id = post_look.look_id
JOIN add_look_item ON add_look_item.look_id = looks.look_id
JOIN item ON item.item_id = add_look_item.item_id
JOIN add_images ON add_images.item_id = item.item_id
JOIN user_item ON user_item.item_id = item.item_id
JOIN user_account ON user_account.account_id = user_item.account_id
JOIN user ON user.user_id = user_account.user_id
JOIN users_profile_images ON users_profile_images.account_id = user_account.account_id
JOIN add_profile_images ON add_profile_images.image_id = users_profile_images.image_id
ORDER BY post_look.post_id DESC 
LIMIT 0 , 30 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T07:34:19.397

```
SELECT DISTINCT c1, c2, c3 
```

意味着这`{c1, c2, c3}`将是不同的。

您应该考虑添加`GROUP BY post_look.post_id`到您的查询中。

看看这里的区别：

*   [清楚的](http://sqlfiddle.com/#!2/e6890/1)
*   [通过...分组](http://sqlfiddle.com/#!2/e6890/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T07:39:20.970

请你试试看好吗？

```
SELECT post_look.post_id, post_look.look_id, post_look.date_posted,     looks.title, looks.item_id, user.user_id, user.first_name, user.last_name,    user_account.profile_image, user_account.account_status, add_profile_images.image_name
FROM post_look
JOIN looks ON looks.look_id = post_look.look_id
JOIN add_look_item ON add_look_item.look_id = looks.look_id
JOIN item ON item.item_id = add_look_item.item_id
JOIN add_images ON add_images.item_id = item.item_id
JOIN user_item ON user_item.item_id = item.item_id
JOIN user_account ON user_account.account_id = user_item.account_id
JOIN user ON user.user_id = user_account.user_id
JOIN users_profile_images ON users_profile_images.account_id = user_account.account_id
JOIN add_profile_images ON add_profile_images.image_id = users_profile_images.image_id
GROUP BY post_look.post_id
ORDER BY post_look.post_id DESC 
LIMIT 0 , 30 
```

# php - 始终显示必填字段的错误消息

> ID：10151873
> 
> 赞同：0
> 
> 时间：2012-04-14T07:28:49.167
> 
> 标签：php

我的必填字段有错误，但即使已填写，它也会显示我的错误消息，也许我需要一个 else 语句但不完全确定。

```
session_start();
// this sets variables in the session
$id = $_SESSION['user_id'];
foreach($_POST as $key => $value)
$link = mysql_connect(DB_HOST, DB_USER, DB_PASS) or die("Couldn't make connection.");
$err = array();
$result = mysql_query("SELECT `id` FROM users WHERE `banned` = '0'") or 
die  (mysql_error());

if(empty($_SESSION['$user_id']))  // user not logged in; redirect to somewhere else
if (!empty($_POST['doThesis']) && $_POST['doThesis'] == 'Save')
{
    $result = mysql_query("SELECT `id` FROM users WHERE `banned` = '0'") or 
die (mysql_error());

 list($id) = mysql_fetch_row($result);

 if(empty($abstract))
 {
 $err[] = "ERROR - Enter Abstract";
 //header("Location: thesis.php?msg=$err[0]");
 }
 /// Automatically collects the hostname or domain  like example.com)
 $host  = $_SERVER['HTTP_HOST'];
 $host_upper = strtoupper($host);
 $path   = rtrim(dirname($_SERVER['PHP_SELF']), '/\\');

if(empty($err)) {
        for($i = 0; $i < count($_POST["other"]); $i++)
        {
            $thesis_Name = mysql_real_escape_string($_POST['thesis_Name'][$i]);
            $abstract = mysql_real_escape_string($_POST['abstract'][$i]);

$sql_insert = "INSERT into `thesis`
     (`user_id`,`thesis_Name`,`abstract`  )
VALUES
     ('$id','$thesis_Name','$abstract' ";

 mysql_query($sql_insert,$link) or die("Insertion Failed:" . mysql_error());
        }

 header("location: myaccount.php?id=" . $_SESSION['user_id']. "");
} 
```

显然，当数据在框中时，第二个标题是它应该去的地方。如果我包含第一个标题，则错误消息在 URL 栏中，当我不包含标题行时，它在页面上（应该在哪里）帮助！

我的意思是当我收到错误时，这是​​我设置的错误，“输入摘要”一直显示，即使输入了某些内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T07:52:56.887

请用错误更新您的问题以及您想要实现的目标..因为在查看了您的代码之后..很多事情都是错误的

一个 。`mysql`在链接上使用 foreach

```
// this sets variables in the session
$id = $_SESSION['user_id'];
foreach($_POST as $key => $value)
$link = mysql_connect(DB_HOST, DB_USER, DB_PASS) or die("Couldn't make connection."); 
```

乙。多个相互矛盾的 If 语句

```
if(empty($_SESSION['$user_id']))  // user not logged in; redirect to somewhere else
if (!empty($_POST['doThesis']) && $_POST['doThesis'] == 'Save')
{ 
```

C.`{` 未正确关闭...

D. 未使用查询的多个实例

```
$result = mysql_query ( "SELECT `id` FROM users WHERE `banned` = '0'" ) or die ( mysql_error () ); 
```

`ERROR - Enter Abstract`应该是您的问题列表，因为您遇到的原因是因为您没有`declared` `$abstract`...

**编辑 1 我认为你需要什么**

```
session_start ();
// this sets variables in the session
$id = $_SESSION ['user_id'];
$link = mysql_connect ( DB_HOST, DB_USER, DB_PASS ) or die ( "Couldn't make connection." ); // Database
$errors = array (); // Link

/**
 * Check if user is logged in
 */
if (empty ( $_SESSION ['$user_id'] )) {
    header ( "Location: logout.php?action=expired" ); // Change to what you want
    exit ();
}

if (! empty ( $_POST ['doThesis'] ) && $_POST ['doThesis'] == 'Save') {
    $host = $_SERVER ['HTTP_HOST'];
    $host_upper = strtoupper ( $host );
    $path = rtrim ( dirname ( $_SERVER ['PHP_SELF'] ), '/\\' );

    for($i = 0; $i < count ( $_POST ["other"] ); $i ++) {
        $thesis_Name = mysql_real_escape_string ( $_POST ['thesis_Name'] [$i] );
        $abstract = mysql_real_escape_string ( $_POST ['abstract'] [$i] );

        if (empty ( $abstract )) {

            $errors[] =" Adbstract not set for $thesis_Name" ;
            continue;
        }

        $sql_insert = "INSERT into `thesis`
            (`user_id`,`thesis_Name`,`abstract`  )
            VALUES
            ('$id','$thesis_Name','$abstract' ";

        mysql_query ( $sql_insert, $link ) or die ( "Insertion Failed:" . mysql_error () );
    }

    if(count($errors) == 0)
    {
        header ( "location: myaccount.php?id=" . $_SESSION ['user_id'] . "" );
    }
    else
    {
        print_r($errors); // Change it how you want to display your error 
    }

} 
```

谢谢

# php - CakePHP 2创建表单时如何取消所有div？

> ID：10151874
> 
> 赞同：0
> 
> 时间：2012-04-14T07:28:59.650
> 
> 标签：php, cakephp-2.0

创建表单时如何取消所有div？默认值：

```
<form action="/services/edit/1" class="vertical___" id="ServiceEditForm" method="post" accept-charset="utf-8"><div style="display:none;">
<input type="hidden" name="_method" value="PUT"></div>  <fieldset>
<legend>Edit Service</legend>
<input type="hidden" name="data[Service][id]" value="1" id="ServiceId"><div class="input text required"><label for="ServiceName">Name</label><input name="data[Service][name]" maxlength="250" type="text" value="text-text" id="ServiceName"></div>    </fieldset>
<div class="submit"><input type="submit" value="Submit"></div></form> 
```

必须具备：

```
<form action="/services/edit/1" class="vertical" id="ServiceEditForm" method="post" accept-charset="utf-8">
<input type="hidden" name="_method" value="PUT">    
<fieldset>
<legend>Edit Service</legend>
<input type="hidden" name="data[Service][id]" value="1" id="ServiceId"><div class="input text required"><label for="ServiceName">Name</label>
<input name="data[Service][name]" maxlength="250" type="text" value="text-text" id="ServiceName"></div> </fieldset>
<input type="submit" value="Submit"></form> 
```

# python - 如何跳过使用额外变量进行 python 操作？

> ID：10151878
> 
> 赞同：0
> 
> 时间：2012-04-14T07:29:10.313
> 
> 标签：python, for-loop

我正在编写一个我使用临时变量的python代码，因为如果存在任何内容，它将被附加到临时变量，然后它将被附加到标题。
如果没有内容，则将附加临时变量。

因此，它将限制将 '' 值附加到列表中。

我正在寻找任何其他更好的方法来获得相同的结果，但不使用临时变量。
任何建议都会有所帮助。

```
 temp = ''
    header = []
    for ind,content in enumerate(data):   # enumerating for index & content in data
        if content and ind != 0:
            temp = content
            header.append(content)
        else:
            header.append(temp) 
```

输入 ：

```
['column1', '', '', '', 'column2', '', ''] 
```

预期输出：

```
['column1', 'column1', 'column1', 'column1', 'column2', 'column2', 'column2'] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T07:39:43.560

你可以试试这样的

```
>>> data=['column1', '', '', '', 'column2', '', '']
>>> header=data[:]
>>> for i in range(1,len(header)):
    if not header[i]:
        header[i]=header[i-1]

>>> header
['column1', 'column1', 'column1', 'column1', 'column2', 'column2', 'column2']
>>> 
```

注意**我已将答案更新为不更新原始列表。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-14T08:03:42.503

```
for i, x in enumerate(data[1:], 1):
    if not x:
        data[i] = data[i-1]

# or
for i, x in enumerate(data[1:]):
    if not x:
        data[i+1] = data[i] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-14T08:00:53.097

临时版本的另一个版本

代码：

```
REPEAT = object()
def repeated(iterable):
    for x in iterable:
        R = last if (x is REPEAT) else x
        yield R
        last = R 
```

演示：

```
>>> input = ['column1', REPEAT, REPEAT, REPEAT, 'column2', REPEAT, REPEAT]
>>> list( repeated(input) )
['column1', 'column1', 'column1', 'column1', 'column2', 'column2', 'column2'] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-14T08:05:59.290

如果你有灵活性，你可以这样做：

```
>>> ['column1']*4 + ['column2']*3
['column1', 'column1', 'column1', 'column1', 'column2', 'column2', 'column2'] 
```

# asp.net-mvc-3 - MVC Razor 怪癖模式 - umbraco

> ID：10151885
> 
> 赞同：0
> 
> 时间：2012-04-14T07:30:10.303
> 
> 标签：asp.net-mvc-3, razor, umbraco, quirks-mode

我似乎有一个剃刀模板强制浏览器进入怪癖模式的模糊问题。它是 umbraco 5 中的一个简单的 razor 模板。以下代码使 chrome、firefox、IE 都进入 quirks 模式：

```
@inherits RenderViewPage
@using System.Web.Mvc.Html;
@using Umbraco.Cms.Web;
@{
    Layout = "";
}
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html> 
<head>
  <meta charset="utf-8" />
  <title>Page title</title>
</head>
<body>

</body>
</html> 
```

如果我完全移动剃刀语法或将其向下移动，那么它不会在文档类型之前进入标准合规模式。我尝试添加各种 X-UA-Compatible 元标记无效。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html> 
<head>
  <meta charset="utf-8" />
  <title>Page title</title>
</head>
<body>

@inherits RenderViewPage
@using System.Web.Mvc.Html;
@using Umbraco.Cms.Web;
@{
    Layout = "";
}

</body>
</html> 
```

任何人有任何想法可能是什么原因？就好像浏览器认为它在 doctype 之前渲染了一些东西，但我什么也看不到。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T07:35:38.313

您的语句不需要分号`@using`，也许这就是浏览器所看到的？

所以例如

```
@using Umbraco.Cms.Web; 
```

只能是

```
@using Umbraco.Cms.Web 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T14:51:57.160

同样在这里看起来它在打开doctype的标签<之前放置了额外的字符（空格）。我认为这是一个编辑器错误。

尝试删除开头的“<”并将其插入并在此之后保存。doctype 也应该是文件的第一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T13:42:30.987

@ 语句被转换为空格。doctype 应该是文档的第一行。在这种情况下，第一行是空白的，所以 doctype 被定义为一个空行，这[会触发 quirksmode](http://www.quirksmode.org/css/quirksmode.html)。

# yii - 如何在 Yii 的 Web 应用程序操作中调用控制台命令？

> ID：10151887
> 
> 赞同：7
> 
> 时间：2012-04-14T07:30:37.677
> 
> 标签：yii, console-application

我有一个控制台命令来进行消费时间，并且我需要知道如何在 YII 的 Web 应用程序操作中调用（执行）它。

```
class MyCommand extends CConsoleCommand{
      public function actionIndex(){
          $model = new Product();
          $model->title = 'my product';
          ...
          $model->save();
          .
          .
          .
      }
} 
```

我想执行这段代码。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-07-02T10:48:11.310

试试这个：

```
 Yii::import('application.commands.*');
    $command = new MyCommand("test", "test");
    $command->run(null); 
```

必须设置值为“test”的 2 个参数但没有影响，它们用于使用控制台时的 --help 选项。

```
/**
 * Constructor.
 * @param string $name name of the command
 * @param CConsoleCommandRunner $runner the command runner
 */
public function __construct($name,$runner)
{
    $this->_name=$name;
    $this->_runner=$runner;
    $this->attachBehaviors($this->behaviors());
} 
```

[https://github.com/yiisoft/yii/blob/master/framework/console/CConsoleCommand.php#L65](https://github.com/yiisoft/yii/blob/master/framework/console/CConsoleCommand.php#L65)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-13T15:13:39.583

试试这个

```
Yii::import('application.commands.*');
$command = new GearmanCommand('start', Yii::app()->commandRunner);
$command->run(array('start', '--daemonize', '--initd')); 
```

其中 array('start', '--daemonize', '--initd') 是一个动作和动作参数

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-28T15:02:16.573

我有同样的问题 - 我需要从内部控制器和命令调用操作

我说的是同样的问题，因为它实际上是一样的——你有需要从控制台调用的操作，也可以从控制器调用它。

`If you need to call an action(command) as a part of controller action, then i think you need to modify this solution a little`. 或者我的解决方案对你来说足够了吗？

所以这是我的解决方案：

首先按照[http://www.yiichina.net/doc/guide/1.1/en/basics.controller#action中的说明创建动作](http://www.yiichina.net/doc/guide/1.1/en/basics.controller#action)

```
class NotifyUnsharedItemsAction extends CAction
{
    public function run()
    {
        echo "ok";
    }
} 
```

然后像往常一样加载控制器动作：

```
class TestController extends Controller
{

    public function actions() {
        return array(
            'notifyUnsharedItems'=>'application.controllers.actions.NotifyUnsharedItemsAction',
    );
} 
```

在命令中，我以这种方式运行操作：

```
class NotifyUnsharedItemsCommand extends CConsoleCommand
{
    public function run($args)
    {
        $action = Yii::createComponent('application.controllers.actions.NotifyUnsharedItemsAction',$this,'notify');
        $action->run();
    }

} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-07T11:30:12.297

接受我们在 linux 服务器上，对于 Yii 1.1 的实际示例将是：

```
$run = '/usr/bin/php ' . Yii::getPathOfAlias('root').'/yiic' [command]
exec(sprintf("%s > %s 2>&1 & echo $! >> %s", $run, '/dev/null', '/dev/null')); 
```

这将在后台运行 Yii 控制台命令。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-14T07:42:25.527

[Yii 是 PHP -> 您可以使用http://php.net/manual/en/function.exec.php](http://php.net/manual/en/function.exec.php)中指定的标准 php 构造以及页面底部附近的相关方法，具体取决于您想要实现的目标.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-06-18T08:19:46.887

此外，`cebe`on [gist](https://gist.github.com/cebe/2126943)的另一个非常干净的解决方案：

```
<?php
// ...
$runner=new CConsoleCommandRunner();
$runner->commands=array(
    'commandName' => array(
        'class' => 'application.commands.myCommand',
    ),
);

ob_start();
$runner->run(array(
    'yiic',
    'idbrights',
));
echo nl2br(htmlentities(ob_get_clean(), null, Yii::app()->charset));

Yii::app()->end(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-25T20:35:56.080

通常，在这些情况下您应该做的是重构。将“通用”代码移出 MyCommand 并将其放入`components`文件夹中的类中。现在，您可以将任何头放在“通用”代码之上，而无需更改您的功能。例如：

受保护/组件/Mywork.php：

```
<?php
class Mywork
{
    public function doWork()
    {
        $model = new Product();
        $model->title = 'my product';
        ...
        $model->save();
        ...
    }
} 
```

受保护/控制器/MyworkController.php：

```
<?php
class MyworkController
{
    public function actionDowork()
    {
        $mywork = new Mywork;
        ...
    }
} 
```

受保护/命令/MyworkCommand.php：

```
<?php
class MyworkCommand extends CConsoleCommand
{
    public function run($args)
    {
        $mywork = new Mywork;
        ...
    }
} 
```

这种方法也使测试更容易，因为您可以将 Mywork 作为您正在使用的视图之外的单个单元进行测试。

# r - GAMMA.INV(probability,alpha,beta) Excel 函数的等效 R 函数是什么？

> ID：10151888
> 
> 赞同：3
> 
> 时间：2012-04-14T07:30:40.600
> 
> 标签：r, statistics, gamma-distribution

我需要找到伽马累积分布的倒数。我知道在excel中有`GAMMA.INV(probability,alpha,beta)`功能可以做到这一点。如何在 R 语言中实现这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-14T07:52:44.647

在 R 中，对于大多数概率分布，有四个函数，称为 d、p、q、r，（例如 、`dnorm`、`pnorm`、`qnorm`）`rnorm`给出密度（d）、累积分布函数（p，因为结果是概率） ，它的倒数（q，因为结果是分位数），以及 r 从分布中采样。

因此，对于 Gamma 分布，累积分布函数的倒数是`qgamma`。

# ios - 实时地址补全

> ID：10151893
> 
> 赞同：-2
> 
> 时间：2012-04-14T07:32:10.163
> 
> 标签：ios, windows-phone-7, autocomplete

我正在开发一个 Windows Phone/iOS 应用程序（都是本机应用程序），我想要的一个功能是在用户输入物理地址时在下拉菜单中自动完成一个**文本框**（即，如果用户输入“新”，下拉菜单应显示“纽约市、新奥尔良等”，但仅限市/县级）。

就像谷歌的即时搜索完成一样：http: [//support.google.com/websearch/bin/answer.py ?hl=en&answer=106230](http://support.google.com/websearch/bin/answer.py?hl=en&answer=106230)

更具体，

1）我应该把这个城市名称数据库放在哪里？我想本地是一个好主意，因为对于城市级别来说它不会太大而且没有延迟？2) 我在哪里可以获得完整的北美城市列表？3）是否有任何可以自动完成的开源库？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:24:30.773

从 WP7 的角度来看。您可以使用[自动完成框](http://windowsphonegeek.com/articles/autocompletebox-for-wp7-in-depth)。除非有充分的理由拥有动态列表，否则我会备份应用程序中的城市列表，因为这将使自动完成更快。

# html - 有没有办法使 Div 宽度与其中包含的内容一样宽？

> ID：10151894
> 
> 赞同：2
> 
> 时间：2012-04-14T07:32:26.850
> 
> 标签：html, css, css-float

我一直在尝试制作一个水平网页。但是我不想继续将宽度设置为某个宽度以适应浮动的内容有没有办法让 Div 自动重新调整为它包含的内容的大小？这样所有内容都是浮动的还是“水平”滚动的？我正在使用宽度：“特定大小”，但是一旦我有太多内容就会溢出，有没有办法不发生这种情况，而且我不必指定特定的宽度大小？

编辑：我想要的是整个网站水平滚动。我不希望特定的 div 本身有滚动条，但我希望 div 能够调整它的宽度以适应内容，无论我是否有 3 个 div 或者我决定稍后添加 6 个 div 到分区。

[例如我想要的是这样的。](http://quiriniustheme.tumblr.com/)（即使我有更多内容，它也不会掉到下一行）我的意思是这可以单独使用 css 来实现吗？）我特别想要整个网站滚动的效果，而不仅仅是我不知道的 div如果该网站正在这样做。基本上我希望整个网站水平滚动，而不仅仅是特定 div 本身的滚动条。

例如，如果您有更多内容，您可以垂直向下滚动，这就是我想要的，但我希望在网站的水平滚动中，这甚至可能吗？

这是我的代码[Jfiddle Code](http://jsfiddle.net/QGzGG/)，它适用于 tumblr，但我想要的不仅仅是 tumblr。因为我正在考虑为常规网站执行此操作，但我会在其中手动添加更多列表项或 Div。我只是想看看是否有办法让宽度调整到内容，这样浮动内容就不会下降到下一行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T07:43:21.147

检查这个[小提琴](http://jsfiddle.net/R46gv/)，这是你需要的

```
div{
    width:auto;
    overflow:auto;
    white-space:nowrap;
}​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T07:48:58.987

我想你需要的是`display: inline-block;`

像这样：http: [//jsfiddle.net/ZDJbH/](http://jsfiddle.net/ZDJbH/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T08:16:32.560

1\. `display:inline-block`
2.`float:left`或者`float:right`因为它会破坏线框。
3.`position:absolute；（and without top, left or position:absolute)` 可能需要知道信息才能使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T07:34:18.557

将 CSS 宽度属性设置为 auto

```
#yourDiv {width : auto;} 
```

# c# - 使用 ASP/C# 在 MYSQL 中显示 blob 图像

> ID：10151903
> 
> 赞同：0
> 
> 时间：2012-04-14T07:34:16.277
> 
> 标签：c#, asp.net, mysql, odbc

我需要使用 C# 在 ASP 页面中使用 ODBC 连接将存储在 mysql db 中的图像显示为 blob 字段。请帮我

```
<%@ WebHandler Language="C#" Class="stdImg" %> 
```

使用系统；使用 System.Web；

公共类 stdImg : IHttpHandler {

```
public void ProcessRequest(HttpContext context)
{

    System.Data.Odbc.OdbcConnection con = new System.Data.Odbc.OdbcConnection();
    con.ConnectionString = System.Configuration.ConfigurationManager.ConnectionStrings["sis"].ConnectionString;

    con.Open();
    System.Data.Odbc.OdbcCommand cmd = con.CreateCommand();
    cmd.CommandText = "SELECT PHOTOGRAPH FROM student_mast WHERE ADMISSION_NO='1000000001'";

    byte[] buf = (byte[])cmd.ExecuteScalar();

    context.Response.Clear();
    context.Response.OutputStream.Write(buf, 0, buf.Length);
    context.Response.ContentType = "image/jpeg";
    context.Response.BinaryWrite(buf);
}

public bool IsReusable
{
    get
    {
        return false;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T07:40:13.950

像这样使用连接字符串

```
<add name="MYSQLConnectionString" connectionString="Driver={MySQL ODBC 3.51 Driver};database=DB;option=0;pwd=pwd;port=3306;server=yourserver;uid=user;sslverify=0"
   providerName="System.Data.Odbc" /> 
```

首先安装 MYSQl 的 ODBC 驱动程序

这是下载链接

[http://dev.mysql.com/downloads/connector/odbc/3.51.html](http://dev.mysql.com/downloads/connector/odbc/3.51.html)

**更新** 使用数据网格并连接到数据库并在数据网格中使用此代码

```
 <asp:TemplateColumn  HeaderText="Image">
         <ItemTemplate >
            <img runat="server" 
                 src='<%# "getImage.aspx?ID=" + DataBinder.Eval(Container.DataItem, 
                 "ImageIdentity")  %>' ID="Img1"/>
         </ItemTemplate>
     </asp:TemplateColumn> 
```

验证您的图像字段名称

# f# - 在 F# 中创建记录类型

> ID：10151908
> 
> 赞同：2
> 
> 时间：2012-04-14T07:34:35.493
> 
> 标签：f#, type-providers

我想根据提供的字段制作一个简单的记录类型。

那是 ：

```
let rectype = MakeRecordType(['fieldname1'; 'fieldname2']) 
```

对于这样一个简单的任务，直接去找类型提供者看起来像是强大的火力。

还有其他方法吗？

*更新*

我发现以下问题看起来非常相似 [通过反射创建 F# 记录](https://stackoverflow.com/questions/8139223/creating-f-record-through-reflection)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T17:40:03.320

撇开最终结果的有用性不谈，下面的片段完全按照[我的其他相关答案](https://stackoverflow.com/a/9967890/917053)的精神实现了您所要求的：

```
#if INTERACTIVE
#r @"C:\Program Files (x86)\Microsoft F#\v4.0\FSharp.Compiler.dll"
#r @"C:\Program Files (x86)\FSharpPowerPack-1.9.9.9\bin\FSharp.Compiler.CodeDom.dll"
#endif

open System 
open System.CodeDom.Compiler 
open Microsoft.FSharp.Compiler.CodeDom
open Microsoft.FSharp.Reflection

type RecordTypeMaker (typeName: string, records: (string*string) []) = 
    let _typeDllName = "Synth"+typeName+".dll"
    let _code = 
        let fsCode = new System.Text.StringBuilder()
        fsCode.Append("module ").Append(typeName).Append(".Code\ntype ").Append(typeName).Append(" = {") |> ignore
        for rec' in records do fsCode.Append("  ").Append(fst rec').Append(" : ").Append(snd rec').Append(";\n") |> ignore
        fsCode.Append("}").ToString()
    let _compiled =
        use provider = new FSharpCodeProvider() 
        let options = CompilerParameters([||], _typeDllName) 
        let result = provider.CompileAssemblyFromSource( options, [|_code|] ) 
        result.Errors.Count = 0
    let mutable _type: Type = null

    member __.RecordType
        with get() = if _compiled && _type = null then
                         _type <- Reflection.Assembly.LoadFrom(_typeDllName).GetType(typeName+".Code+"+typeName)
                     _type 
```

的草图实现`RecordTypeMaker`接受一个任意`Record type`定义，其中包含和`type name`的数组`field names`。`field type names`然后在幕后组装一段定义请求的 Record 类型的 F# 代码，通过 编译此代码`CodeDom provider`，加载容器程序集并通过 Reflection 提供对这个新创建的合成 Record 类型的访问。一个测试片段

```
let myType = RecordTypeMaker("Test", [|("Field1", "string"); ("Field2", "int")|]).RecordType
printfn "IsRecordType=%b" (FSharpType.IsRecord(myType))
printfn "Record fields: %A" (FSharpType.GetRecordFields(myType)) 
```

为纯合成类型演示`myType`概念证明：

```
IsRecordType=true
Record fields: [|System.String Field1; Int32 Field2|] 
```

# python - 存储异常引发时创建的对象，Python

> ID：10151915
> 
> 赞同：0
> 
> 时间：2012-04-14T07:35:59.147
> 
> 标签：python, exception

这是我的异常类，

```
class SampleError(Exception):
    def __init__(self):
        self.history = Stack() 
```

这是功能，

```
def f(x):
    raise SampleError 
```

运行 f(x) 时，如何存储在引发 SampleError 时创建的堆栈。

一如既往的感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T07:49:42.393

如果“存储”是指分配给变量进行分析，请使用[`sys.exc_info()`](http://docs.python.org/library/sys.html#sys.exc_info)：

```
import sys
try:
    f()
except:
    exc_type, exc, trace = sys.exc_info() # trace is the traceback object 
```

请注意规范中有关循环引用的警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T07:45:14.167

只需查看[回溯](http://docs.python.org/library/traceback.html)模块。它将使您能够从任何实例生成回溯。您还可以在经过一些后期处理后以任何您想要的形式存储。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T08:47:38.910

也许你正在尝试做这样的事情？？？

导入回溯

```
class SampleError(Exception):
    def __init__(self):
        self.history = traceback.extract_stack()

def f(x):
    raise SampleError

try:
    f(5);
except SampleError, e:
    print e.history
    out = traceback.format_list(e.history)
    print out[0] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T09:43:06.830

如果您只想访问异常属性：

```
try:
    f()
except SampleError, error:
    history = error.history 
```

# java - 刷新简单验证码

> ID：10151920
> 
> 赞同：5
> 
> 时间：2012-04-14T07:37:21.237
> 
> 标签：java, javascript, html, jsp, captcha

我在我的 JSP 中使用[简单的验证码。](http://simplecaptcha.sourceforge.net/)一切都好。我想在验证码旁边提供一个刷新按钮，以允许用户更改验证码。验证码仅在刷新整个页面时才会更改，但我不想为它重新加载整个页面。

我需要您对如何实现这一点的建议，例如使用 AJAX 或 JQuery 仅重新加载验证码，而不是整个页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T11:29:51.520

```
<script type="text/javascript">
    function reloadCaptcha(){
        var d = new Date();
        $("#captcha_image").attr("src", "/captcha_generator.jsp?"+d.getTime());
    }
</script>
   ...
<img id="captcha_image" src="/captcha_generator.jsp" alt="captcha image" width="200" height="50"/>
<img src="reload.jpg" onclick="reloadCaptcha()" alt="reload"width="40" height="40"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T08:38:51.957

我不记得 SimpleCaptcha 是如何工作的，但通常，您应该简单地更改验证码的 'src' 属性`<img>`。`onClick`在刷新按钮上是这样的：

```
var img = document.getElementById('captcha_id');// captcha_id is the id attribute of your caprtcha img
img.src = 'Some new captcha url'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T04:42:55.373

```
<script type="text/javascript">
    function reloadCaptcha(){
        var d = new Date();
        $("#captcha_image").attr("src", "captcha.php?"+d.getTime());
    } </script>

<img id="captcha_image" src="captcha.php" alt="captcha image" width="90" height="33"/> <img src="images/refresh.png" alt="reload" width="22" height="22" border="0" onclick="reloadCaptcha()" /> 
```

# c++ - 是否有必要在 Windows 注册表中转义字符串中的斜杠？

> ID：10151922
> 
> 赞同：5
> 
> 时间：2012-04-14T07:37:37.850
> 
> 标签：c++, winapi, registry

这是一个主要与 WinAPI RegSetValueEx 有关的问题。如果您在[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724923%28v=vs.85%29.aspx)查看 MSDN 中的描述，您会发现：

> lpData [in] 要存储的数据。
> 
> REG_SZ，字符串必须以空值结尾。对于 REG_MULTI_SZ 数据类型，字符串必须以两个空字符结束。反斜杠前面必须有另一个反斜杠作为转义字符。例如，指定“C:\\mydir\\myfile”来存储字符串“C:\mydir\myfile”。

我的问题是，我真的需要逃避斜线吗？因为我以前从未这样做过，而且效果很好。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-14T08:06:34.297

这确实是一个文档错误。您不需要在此处转义反斜杠。您发送到此 API 的确切字符串将存储在注册表中。不会执行反斜杠处理。

现在，在 C 和 C++ 中确实需要对字符串文字中的某些字符进行转义，但这与 Win32 API 文档无关。这是针对特定语言的源代码到目标代码翻译的问题，并且远远超出了本文档的范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T07:38:48.320

是的，因为`\`在 C++ 中有一个含义，而`\\`意味着一个普通的反斜杠。

当`\`出现在字符串中时，C++ 编译器将查看下一个字符并将组合转换为某种东西（例如`\n`将转换为“换行符”字符）。`\\`将转换为常规反斜杠。这称为“转义”（历史上，在旧终端上，ESC+组合键用于许多不在键盘上的键）。

# php - MSBuild 复制特定文件和文件夹

> ID：10151928
> 
> 赞同：2
> 
> 时间：2012-04-14T07:38:15.043
> 
> 标签：php, tfs, msbuild, tfsbuild

假设我有以下文件夹结构

```
app
-->folder1
----->subfolder2
----->subfolder3
-->folder2
----->subfolder4
-->folder3 
```

我想使用该`Copy`任务来复制`folder2`（包括子文件夹）和`subfolder3`我的输出。

我怎样才能做到这一点？顺便说一句，我正在将 MSBuild 用于 PHP 网站，在实际情况下，我要复制更多的子文件夹和特定文件夹。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T22:38:15.207

在其中创建一个项目组，`folder2`然后`subfolder3`使用该`copy`任务。

例如：

```
<ItemGroup>
  <sourceFiles Include="app\folder1\subfolder3\**\*.*" />
  <sourceFiles Include="app\folder2\**\*.* />
</ItemGroup>

<Copy SourceFiles="@(sourceFiles)" DestinationFolder="c:\output\%(RecursiveDir)"></Copy> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T00:38:27.927

你可以试试 RoboCopy：

```
<UsingTask AssemblyFile="MSBuild.ExtensionPack.dll" TaskName="MSBuild.ExtensionPack.FileSystem.RoboCopy"/>

<MSBuild.ExtensionPack.FileSystem.RoboCopy 
  Source="$(YourSourcePath)" 
  Destination="$(YourOutputPath)" 
  Files="*.*"
  Options="/MIR"/> 
```

该`/MIR`选项复制整个文件夹树，包括空文件夹

机械复制参考：

*   [http://technet.microsoft.com/en-us/library/cc733145(WS.10).aspx](http://technet.microsoft.com/en-us/library/cc733145(WS.10).aspx)

[MSBuild 扩展包](http://www.msbuildextensionpack.com/)

# android - Android eclipse 中的 Tabhost

> ID：10151946
> 
> 赞同：0
> 
> 时间：2012-04-14T07:41:07.257
> 
> 标签：android, eclipse, android-emulator, android-tabhost

我目前正在按照以下链接在 Android Eclipse 中创建 tabhost： [http ://www.androidhive.info/2011/08/android-tab-layout-tutorial/](http://www.androidhive.info/2011/08/android-tab-layout-tutorial/)

问题开始于运行后，项目控制台显示为

```
[2012-04-14 12:37:25 -AndroidTabhosting] Failed to install AndroidTabhosting.apk on
  device 'emulator-5554': device not found
[2012-04-14 12:37:25 -AndroidTabhosting] com.android.ddmlib.InstallException:device
   not found
[2012-04-14 12:37:25 - AndroidTabhosting] Launch canceled! 
```

谁能告诉我如何克服这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:06:55.347

你试过 DDMS 吗？只需在 Eclipse 中打开这个透视图，看看是否正确找到了模拟器。[您还可以在此处](http://developer.android.com/guide/developing/devices/emulator.html)的 android 开发指南中找到有关 Android 模拟器的更多信息

# php - wp-clear 主题功能在 single.php 中不起作用？

> ID：10151958
> 
> 赞同：0
> 
> 时间：2012-04-14T07:43:43.000
> 
> 标签：php, wordpress, wordpress-theming

我在 wordpress wp-clear 主题中遇到问题，single.php 不加载在 header.php 中声明的导航栏，而 index.php 加载。我还包括`<?php get_header(); ?>`在 single.php 的顶部。像这个[http://wordpress.org/support/topic/get_header-call-not-working-except-in-indexphp](http://wordpress.org/support/topic/get_header-call-not-working-except-in-indexphp)一样的问题，在 header.php 中定义的导航部分为：

```
<?php if ( get_option('solostream_show_catnav') == 'yes'  ) { ?>
        <div id="catnav">
            <div class="limit clearfix">
                <?php if (function_exists('wp_nav_menu')) { ?>
                    <ul class="clearfix">
                        <?php wp_nav_menu(array('container'=>false,'theme_location'=>'catnav','fallback_cb'=>'catnav_fallback','items_wrap'=>'%3$s')); ?>
                        <li class="rss-comments"><a title="<?php _e("Comments RSS Feed", "solostream"); ?>" href="<?php bloginfo('comments_rss2_url'); ?>">Comments</a></li>
                    <li class="rss-content"><a title="<?php _e("Posts RSS Feed", "solostream"); ?>" href="<?php bloginfo('rss2_url'); ?>">Posts</a></li>
                    </ul>                

                <?php } else { ?>
                    <ul class="clearfix"><?php wp_list_categories('title_li='); ?></ul>
                <?php } ?>
            </div>
        </div>
        <?php } ?> 
```

**注意：**实际上它会在输出中打印 html，例如

```
<div id="catnav">

  <div class="limit clearfix">
<ul class="clearfix">

    <li id="menu-item-17" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-17"><a href="/"></a></li>
</ul>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T12:43:21.290

我认为您的问题来自插件。

实际上我不久前解决了这个问题。

插件创建问题是“简单地排除”。当我添加一些要从首页小部件中排除的页面时，此插件产生了问题。它仅在仅选择搜索时才有效。

--> 在你的情况下，它可能是不同的。

检查您激活的插件。

# php - 上传 SWF 文件时限制检查条件

> ID：10151960
> 
> 赞同：0
> 
> 时间：2012-04-14T07:44:16.683
> 
> 标签：php, flash

我正在创建一个使用 PHP 在文件夹中上传 swf 文件的应用程序。除了我检查扩展名是否为 swf 的第一个 if 条件之外，我的脚本都可以正常工作，但我似乎有一些错误。

我不确定是否`video/swf`是 SWF 文件的有效检查参数。我的完整脚本如下。我正在使用 getimagesize() 检查 SWF 的大小。有些人可能想知道 getimagesize 是否适用于图像，但我看到了一些示例，其中 getimagesize() 已用于获取 SWF 文件的大小。

它给我消息“无效的 swf 文件”，这意味着它根本不满足第一个检查条件。

```
<?php
        foreach($_FILES['item_swf']['tmp_name'] as $key=>$val)
        {

        list($width, $height) = getimagesize($_FILES['item_swf']['tmp_name'][$key]);

        if (( ($_FILES["item_swf"]["type"][$key] == "video/swf") || ($_FILES["item_swf"]["type"][$key] == "video/SWF") )
        && ($_FILES["item_swf"]["size"][$key] < 800000))
           {
                if ($_FILES["item_swf"]["error"][$key] > 0)
                  {
                     echo "Error: " . $_FILES["item_swf"]["error"][$key] . "<br />";
                  }
                else if($width==1000 && $height==328)
                  {
                   if (file_exists('../../swf_folder/header_swf/' . $_FILES["item_swf"]["name"]))
                            {
                               echo $_FILES["item_swf"]["name"][$key] . " already exists. ";
                             }
                   else
                            { 

                               move_uploaded_file($val, '../../swf_folder/header_swf/'.$_FILES['item_swf']['name'][$key]);
                               echo "done";
                        }
                  }
             else 
                 {
                    echo "size doest permit";
                 }  
            }
        else
            {
               echo "Not a valid swf file::";
            }                       

        }
        ?> 
```

下面给出的行

```
move_uploaded_file($val, '../../swf_folder/header_swf/'.$_FILES['item_swf']['name'][$key]); 
```

在将文件上传到专用文件夹时工作正常，不知何故，仅 SWF 文件的检查参数似乎设置不正确。

## 编辑

我得到了我的答案。而不是使用`video/swf`我需要使用`application/x-shockwave-flash`.

所以最终的代码将是：

```
<?php
        foreach($_FILES['item_swf']['tmp_name'] as $key=>$val)
        {

        list($width, $height) = getimagesize($_FILES['item_swf']['tmp_name'][$key]);

        if (($_FILES["item_swf"]["type"][$key] == "application/x-shockwave-flash") 
        && ($_FILES["item_swf"]["size"][$key] < 800000))
           {
                if ($_FILES["item_swf"]["error"][$key] > 0)
                  {
                     echo "Error: " . $_FILES["item_swf"]["error"][$key] . "<br />";
                  }
                else if($width==1000 && $height==328)
                  {
                   if (file_exists('../../swf_folder/header_swf/' . $_FILES["item_swf"]["name"]))
                            {
                               echo $_FILES["item_swf"]["name"][$key] . " already exists. ";
                             }
                   else
                            { 

                               move_uploaded_file($val, '../../swf_folder/header_swf/'.$_FILES['item_swf']['name'][$key]);
                               echo "done";
                        }
                  }
             else 
                 {
                    echo "size doest permit";
                 }  
            }
        else
            {
               echo "Not a valid swf file::";
            }                       

        }
        ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T08:24:45.610

你可以试试

```
$savePath = "PATH_TO_SAVE";
$errors = array ();
$output = array ();
//

if (isset ( $_FILES ['item_swf'])) {

    foreach ( $_FILES ['item_swf'] ['tmp_name'] as $key => $val ) {

        $fileName = $_FILES ['item_swf'] ['name'] [$key];
        $fileSize = $_FILES ['item_swf'] ['size'] [$key];
        $fileTemp = $_FILES ['item_swf'] ['tmp_name'] [$key];

        $fileExtention = pathinfo ( $fileName, PATHINFO_EXTENSION );
        $fileExtention = strtolower ( $fileExtention );

        if ($fileExtention != ".swf") {
            $errors [$fileName] [] = "Invalid File Extention";
            continue;
        }

        if ($fileSize > 800000) {
            $errors [$fileName] [] = "File Too large";
            continue;
        }

        list ( $width, $height ) = getimagesize ( $fileTemp );

        if ($width != 1000 && $height != 328) {
            $errors [$fileName] [] = "Wrong File dimention ";
            continue;
        }

        if (file_exists ( $savePath . DIRECTORY_SEPARATOR . $fileName )) {
            $errors [$fileName] [] = "File Exist";
            continue;
        }

        if(!is_writable($savePath ))
        {
            $errors [$fileName] [] = "File Destination not writeable";
        }

        if(count($errors [$fileName]) == 0)
        {
            if(@move_uploaded_file ( $fileTemp, $savePath . DIRECTORY_SEPARATOR . $fileName))
            {
                $output[$fileName] == "OK" ;
            }
            else
            {
                $errors [$fileName] [] = "Error Saving File";
            }

        }

    }
        var_dump($errors, $output);
} 
```

如果您还有其他挑战，请告诉我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T04:46:44.510

好的，我得到了答案......

而不是使用`video/swf`我需要使用`application/x-shockwave-flash`

所以最终的代码将是

```
<?php
        foreach($_FILES['item_swf']['tmp_name'] as $key=>$val)
        {

        list($width, $height) = getimagesize($_FILES['item_swf']['tmp_name'][$key]);

        if (( ($_FILES["item_swf"]["type"][$key] == "application/x-shockwave-flash") || ($_FILES["item_swf"]["type"][$key] == "video/SWF") )
        && ($_FILES["item_swf"]["size"][$key] < 800000))
           {
                if ($_FILES["item_swf"]["error"][$key] > 0)
                  {
                     echo "Error: " . $_FILES["item_swf"]["error"][$key] . "<br />";
                  }
                else if($width==1000 && $height==328)
                  {
                   if (file_exists('../../swf_folder/header_swf/' . $_FILES["item_swf"]["name"]))
                            {
                               echo $_FILES["item_swf"]["name"][$key] . " already exists. ";
                             }
                   else
                            { 

                               move_uploaded_file($val, '../../swf_folder/header_swf/'.$_FILES['item_swf']['name'][$key]);
                               echo "done";
                        }
                  }
             else 
                 {
                    echo "size doest permit";
                 }  
            }
        else
            {
               echo "Not a valid swf file::";
            }                       

        }
        ?> 
```

# jquery - 列表中的 JQuery prevendDefault [禁用链接]，而不是子列表中的那些

> ID：10151961
> 
> 赞同：1
> 
> 时间：2012-04-14T07:44:21.590
> 
> 标签：jquery, parent-child, children, preventdefault

我有一个要禁用的链接。问题是它位于具有子列表的 li 中，因此它也会禁用这些链接。HTML 看起来基本上是这样的：

```
<div id="main">
<ul class="index"><li class="firstLI"><a href="some other URL"></a></li>

<li class="secondLI"><a href="disableMe">Disable this Link</a>
   <ul>
        <li><a href="dontDisableMe">Don't Disable Me</a></li>
        <li><a href="dontDisableMe">Don't Disable Me</a></li>
   </ul>
</li>
<li>third</li></ul>
</div> 
```

我想禁用“li”类 secondLI 中的“a”，但不是所有伴随的 UL 的孩子。

我试过了：

```
function preventDefault(e) {
        e.preventDefault()};

    $("#main li:nth-child(2) a").bind("click", preventDefault);

    $(".secondLI").unbind("click", prevenDefault); 
```

和

```
$("#main li:nth-child(2) a").click(function(e) {
    e.preventDefault();
    //do other stuff when a click happens
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T07:49:43.417

使用仅选择直接子级的[`>`选择器。](http://api.jquery.com/child-selector/)

```
$("#main li:nth-child(4) > a").click(function(e) { ... 
```

或者，如果只有一个链接，请使用[`:first`选择器](http://api.jquery.com/first-selector/)。

```
$("#main li:nth-child(4) a:first").click(function(e) { ... 
```

或者更好的是，如果可以的话，给链接一个类或一个 ID，然后直接选择它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T08:14:29.940

单击事件[气泡](http://www.quirksmode.org/js/events_order.html)：首先触发 li 元素的单击处理程序（如果有），然后是父级的单击处理程序，然后是父级的父级的单击处理程序，依此类推。此链中的任何处理程序都可以取消默认操作。因此，如果您在`li li`without中有一个事件处理程序`preventDefault`（或根本没有事件处理程序），并且在父级上有一个事件处理程序`li`with `preventDefault`，那么默认操作将被阻止。

解决这个问题的两种简单方法：

*   在外部的事件处理程序中`li`，检查 click() 的目标，如果它不在子级内部，则`e.target`仅调用；`preventDefault``ul`
*   在 inner 的事件处理程序中`li`，取消冒泡（`e.stopPropagation`）；这样，`li`根本不会调用父级的事件处理程序。

# flash - 对象嵌入不适用于 Node Express 路由

> ID：10151963
> 
> 赞同：0
> 
> 时间：2012-04-14T07:45:12.470
> 
> 标签：flash, node.js, routes, express

我的 index.jade 文件中有以下代码

```
 object(type="application/x-shockwave-flash", data="VideoIO.swf", id="video1")
    param(name="movie", value="VideoIO.swf")
    param(name="quality",value="high")
    param(name="bgcolor",value="#000000")
    param(name="allowScriptAccess",value="always")
    param(name="flashVars", value="controls=true") 
```

在我的快速应用程序中，我设置了我的路线，例如

```
 app.get('/',function(req,res){  
res.render('index.jade',{title:'Express'});

    }) 
```

这很好，但是当我添加这条路线时：

```
 app.get('/:username',function(req,res){
The Flash swf file does not load.
  }) 
```

这里可能有什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T10:45:42.297

我找到了解决方法..

我为我想像这样嵌入的 swf 文件定义了一个单独的路由

```
 app.get('/services/loadSwf',function(req,res){
         res.render('jade_file_containing_objectembed_code',{title:'hello'})

    }) 
```

现在，我通过将 iframe 的“src”属性设置为“services/loadSwf”，使用 iframe 将该 swf 文件加载到我的主应用程序中，它工作正常。

# c++ - C ++中的可变数量的函数参数

> ID：10151969
> 
> 赞同：2
> 
> 时间：2012-04-14T07:45:46.430
> 
> 标签：c++, function, arguments

因此，在 C 中，标准方式是 stdarg.h。但我正在寻找一些像这样的东西：

```
template<int A>
class MyClass {
public:
    MyClass(...) {
        // fill each value of array with an argument.
    };

    virtual ~MyClass() { };
private:
    float array[A];
}; 
```

显然，这个想法并不是对每一个可能的论点都有不同的结构。任何建议，标准方法，无论如何？

谢谢，

朱利安。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T07:50:04.897

在 C++11 中，您可以为这种场景使用[std::initializer_list构造函数。](http://en.cppreference.com/w/cpp/utility/initializer_list)这允许这种类型的初始化：

```
MyClass<5> x{1,2,3,4,5}; 
```

尽管您必须定义尺寸不匹配时会发生什么。但是对于这些静态大小的数组，值得一看[std::array](http://en.cppreference.com/w/cpp/container/array)。当初始化器的尺寸与它们自己的尺寸不匹配时，它们具有明确定义的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T08:03:48.873

你需要使用`initializer_list`

```
explicit MyClass(std::initializer_list<T> list_args){
    // fill each value of array with an argument.
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T07:54:26.487

如果您无权访问 C++11 initializer_lists，则可以只传递一个向量。

```
MyClass(const std::vector& values) {
    //copy values into array
};

MyClass someClass( std::vector<int>(10,4) ); //adds 10x 4 to the vector 
```

# javascript - 用户登录时如何删除登录对话框？

> ID：10151971
> 
> 赞同：0
> 
> 时间：2012-04-14T07:46:16.293
> 
> 标签：javascript, html

我的网站有一个问题，即当我网站的主页加载时，它会显示一个登录对话框，当注册用户登录时，它会说注销，但我的登录对话框会重新出现，尽管我已登录，我认为它因为再次加载同一页面，因为我在 body 标记内调用 onload 事件，该事件调用外部 JavaScript 的文件函数。我希望一旦用户登录登录对话框不应该再次出现。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T07:56:34.053

可能一旦用户按下登录按钮，您应该始终检查会话变量，如果它不为空，则隐藏登录面板！

# actionscript-3 - 如何将移动应用程序（餐厅菜单）与使用 flash builder 4.6 和 actionscript 开发的 micros pos 集成？

> ID：10151973
> 
> 赞同：1
> 
> 时间：2012-04-14T07:46:26.770
> 
> 标签：actionscript-3, flash-builder, point-of-sale

我**为 samsung galaxy tab 8.9 开发了一个餐厅菜单应用程序**。我想将所有订购的详细信息发送到 micros pos，例如项目名称、表名订购数量、项目价格到 pos。我使用 flash builder 4.6 开发了这个应用程序，即使用了 flex 4.6和 actionscript 作为技术。**那么我如何将我的应用程序与 micros pos 集成以通过 micros pos 发送所有订购的数据**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T05:35:23.600

[MICROS](http://www.micros.com/ServicesAndSupport/ProductIntegration/RestaurantIntegration/MicrosPosIntegration.aspx)将允许您集成，但您通常需要支付入场费。他们甚至在他们的网站上告诉你起价为 15,000 美元。与业务中的所有费用一样，这笔费用取决于您对他们的好处，并且可以根据您带来的收益进行协商。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T07:55:22.757

简单：您需要一个服务器和该服务器上的应用程序，您是否也开发了它？那么通过 http/https 将您的数据从您的应用程序发送回您的服务器应该不难。你的 Flash 应用只是一个客户端应用，就像三星上的应用一样，它们是客户端，你需要一个服务器应用。

# .htaccess - 使用 URL 重写创建对 SEO 友好的 URL

> ID：10151974
> 
> 赞同：0
> 
> 时间：2012-04-14T07:46:36.257
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, seo

我需要通过以下[URL 重写来制作](http://en.wikipedia.org/wiki/Rewrite_engine)[SEO](http://en.wikipedia.org/wiki/Search_engine_optimization)友好的 URL ：

```
http://www.myurl.com/subfolder/index.php?service=example1&location=city1

http://www.myurl.com/subfolder/cars.php?service=example1&location=city1

http://www.myurl.com/subfolder/bicycle.php?service=example1&location=city1 
```

至

```
http://www.myurl.com/subfolder/example1/example2/index.html

http://www.myurl.com/subfolder/example1/example2/cars.html

http://www.myurl.com/subfolder/example1/example2/bicycle.html 
```

我的 URL 重写根本不起作用，

```
Options +FollowSymLinks
RewriteEngine On
RewriteRule ^index/(\w+)/?$ index.php?service=$1&location=$2
RewriteRule ^cars/(\w+)/?$ cars.php?service=$1&location=$2
RewriteRule ^bicycles/(\w+)/?$ bicycles.php?service=$1&location=$2 
```

我应该把[.htaccess](http://en.wikipedia.org/wiki/.htaccess)文件放在哪里？在根目录还是子文件夹中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T10:01:56.447

这应该可以工作：

```
Options +FollowSymLinks
RewriteEngine On
RewriteRule ^([^/]*)/([^/]*)/([^/]*)\.html$ /subfolder/$3.php?service=$1&location=$2 [L] 
```

你应该把它放在根目录下。

# android - Android：findViewById 给了我错误的指针？

> ID：10151975
> 
> 赞同：0
> 
> 时间：2012-04-14T07:46:42.613
> 
> 标签：android, application-lifecycle

在我的 updateGUI() 函数中，我像这样更新每个 TextView：

```
((TextView) findViewById(R.id.lbTrackerLat)).setText(String.valueOf(lat));
((TextView) findViewById(R.id.lbTrackerLong)).setText(String.valueOf(lng));
((TextView) findViewById(R.id.lbTrackerAlt)).setText(String.valueOf(alt)); 
```

当我通过在 onCreate 中分配 onclick 按下按钮调用 updateGUI() 时，更新总是有效的。

我有一个 locationListener ，当用户单击另一个按钮时启动，并且在每个更新事件中我也在那里调用 updateGUI() ，它一直工作到屏幕第一次旋转，之后由于某种原因屏幕没有刷新。

在试图找出原因时，我已将此代码添加到 updateGUI() 函数中：

```
TextView t = (TextView) findViewById(R.id.lbTrackerPostLastRefresh);
t.setText(formattedDate);
Log.d("H","EXIT  lbTrackerPostLastRefresh="+t.toString()); 
```

旋转后（再次调用 onCreate），当从按钮单击调用它时，我得到 44c76a78 作为指针。locationListener更新函数调用findVIewByID时，返回指针44c1b518！！？？

我知道布局被破坏并重新创建，但为什么 findViewById 返回旧指针值？

Spitballing：即使在设备旋转时实例化了新视图之后，从初始 onCreate 开始的视图的第一个实例就好像继续愉快地继续（连同它的资源）。也许 LocationListener 这样做是因为我没有停止它。但是每次旋转设备时停止和启动它似乎很愚蠢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T08:02:28.853

我猜测 locationListener 是 Activity 的匿名内部类，这意味着它持有对其父类的引用。所以现在如果在 onCreate() 调用之后*没有*重新创建这个 locationListener，它将引用旧的 Activity，并且对 findViewById() 的调用将返回该旧 Activity 持有的对象。这不仅会导致您的程序执行不正确，还会导致内存泄漏（基本上原始 Activity 创建的所有内容都会被保留）。

如果上述不是原因，那么我将需要有关 locationListener 及其使用方式的更多信息以提供帮助。

# c++ - 调用 PyErr_SetString 两次而不清除

> ID：10151976
> 
> 赞同：2
> 
> 时间：2012-04-14T07:46:45.460
> 
> 标签：c++, exception-handling, cpython

我有一个 C++ 函数来解析 python 字符串：

```
std::string parse_string(PyObject* py_string) { 
  std::string out; 
  if (!PyString_Check(py_string)) { 
    PyErr_SetString(PyExc_TypeError,"expected a string");
    return out; 
  }
  out = PyString_AsString(py_string); 
  return out; 
} 
```

我正在从 python 包装器中调用该函数：

```
PyObject* some_func(PyObject* self, PyObject* args) { 
// ...
  std::string my_first_string = parse_string(first_py_string);
  if (PyErr_Occurred()) { 
    PyErr_SetString(PyExc_TypeError,"more verbose error for this string"); 
    return 0; 
  }
  std::string my_second_string = parse_string(second_py_string);
  if (PyErr_Occurred()) { 
    PyErr_SetString(PyExc_TypeError,"some other error for this string"); 
    return 0; 
  }
// ...
} 
```

这将根据需要引发 python 异常，但我担心`PyErr_SetString`再次调用以提供更详细的消息。会不会造成泄漏？

# ruby - 在 ruby 中处理 json

> ID：10151980
> 
> 赞同：0
> 
> 时间：2012-04-14T07:46:52.100
> 
> 标签：ruby, json

在 ruby​​ 中如何将以下内容转换为有效的 json

> "{\"transferType\"=>\"D\", \"accountNumber\"=>\"123\", \"employeeId\"=>\"12\", \"districtNumber\"=>\" 15\", \"orderedBy\"=>\"vbcb\", \"部门\"=>\"vghghj\", \"po\"=>\"23434\", \"电话\"=> \"4542433435\", \"说明\"=>\"vbvcnvbnb\"}"

上面的类是字符串。因为没有正确的 Json 转换，我的问题就像 [Javascript 替换为等号](https://stackoverflow.com/questions/10151803/javascript-replace-for-equal-symbol)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-26T10:05:20.470

首先，您应该将其转换为正确的 JSON 格式。因此将**=>**替换为**:** 然后尝试**JSON.load**或**JSON.parse**将成功。

```
2.2.3 :015 > data
 => "{\"transferType\"=>\"D\", \"accountNumber\"=>\"123\", \"employeeId\"=>\"12\", \"districtNumber\"=>\"15\", \"orderedBy\"=>\"vbcb\", \"department\"=>\"vghghj\", \"po\"=>\"23434\", \"Phone\"=>\"4542433435\", \"Instructions\"=>\"vbvcnvbnb\"}" 
2.2.3 :016 > JSON.parse(data.gsub("=>", ":"))
 => {"transferType"=>"D", "accountNumber"=>"123", "employeeId"=>"12", "districtNumber"=>"15", "orderedBy"=>"vbcb", "department"=>"vghghj", "po"=>"23434", "Phone"=>"4542433435", "Instructions"=>"vbvcnvbnb"} 
```

从结果中你可以做任何你想做的事情:)

# jquery - 在json中插入今天的日期

> ID：10151989
> 
> 赞同：0
> 
> 时间：2012-04-14T07:49:46.050
> 
> 标签：jquery, json

我有一个需要特定日期的 json 代码，我希望它是今天的日期。我查看并找不到任何示例：我想用今天替换***date=2012-04-14下面的最后一行**

```
<script src="http://code.jquery.com/jquery-latest.js"> </script>
   <script type="text/javascript">// <![CDATA[
         $(document).ready(function() {
          var inputField = $('#postnummer');
          var outputElement = $('#textResult');
          inputField.keyup(function() {
           if (inputField.val().length > 3) {
            $.getJSON('http://fraktguide.bring.no/fraktguide/products/SERVICEPAKKE/all.json?from=2862&to='+ inputField.val() +'&weightInGrams=2&**date=2012-04-14&callback=?**', 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T09:20:23.030

```
var now = new Date();
var strDate = now.getFullYear() + '-' + (now.getMonth()+1) + '-' + now.getDate(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T07:56:12.967

要在 Javascript 中获取当前日期，只需实例化一个新的日期对象

```
var currentDate = new Date(); 
```

# c# - C#- 更新刚刚更新的列

> ID：10151990
> 
> 赞同：1
> 
> 时间：2012-04-14T07:49:52.143
> 
> 标签：c#, dataadapter

我有一个网络表格。有 20 个字段对应于数据库表中的列。假设有一条记录具有 BIRTHDATE 列，我将其值从 2000 年 7 月 13 日更改为 1985 年 2 月 12 日。但我不碰其余的列。在 C# 中有没有办法像这样运行更新语句：

```
UPDATE TABLE1 SET BIRHDATE=NEWVALUE WHERE ID=1111 
```

而不是像这样更新行的所有列：

```
UPDATE TABLE1 SET COLUMN1=NEWVALUE1, COLUMN2=NEWVALUE2,......,BIRTHDATE=NEWVALU 
```

我认为这会浪费资源。我错了吗？我认为 DataAdapters 就是为此目的，但我不确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T08:01:10.200

您可以通过这种方式向 Oracle 引擎发送直接更新语句。

```
using (OracleConnection cnn = new OracleConnection(connString)) 
using (OracleCommand cmd = new OracleCommand("UPDATE TABLE1 SET BIRHDATE=:NewDate WHERE ID=:ID", cnn)) 
{ 
        cmd.Parameters.AddWithValue(":NewDate", YourDateTimeValue);
        cmd.Parameters.AddWithValue(":ID", 111);
        cnn.Open(); 
        cmd.ExecuteNonQuery(); 
} 
```

编辑：

如果您不知道哪些字段已更改（并且不想使用 ORM 工具），那么您需要保留最初用于填充字段的原始 DataSource（数据表、数据集？）。然后更新相关行并使用 OracleDataAdapter。

```
using(OracleConnection cnn = new OracleConnection(connString)) 
using (OracleCommand cmd = new OracleCommand("SELECT * FROM TABLE1 WHERE 1=0", cnn))  
{
     OracleAdapter adp = new OracleDataAdapter();
     adp.SelectCommand = cmd;
     // The OracleDataAdapter will build the required string for the update command
     // and will act on the rows inside the datatable who have the  
     // RowState = RowState.Changed Or Inserted Or Deleted
     adp.Update(yourDataTable);
} 
```

请记住，这种方法效率低下，因为它需要两次访问数据库。第一个发现您的表结构，第二个更新更改的行。此外，为了让 OracleDataAdapter 准备所需的 UpdateCommand/InsertCommand/DeleteCommand，它需要表中的主键。

相反，如果您有很多行要更新，这很方便。

最后一种选择（可能是最快的）是 StoredProcedure，但在这种情况下，您需要回到我的第一个示例并调整 OracleCommand 以使用 StoredProcedure，（将所有字段添加为参数，将 CommandType 更改为 CommandType.StoredProcedure 并更改命令的文本是 StoredProcedure 的名称）。然后 StoredProcedure 将选择需要更新哪些字段。

# java - REST如何传递空路径参数？

> ID：10151992
> 
> 赞同：16
> 
> 时间：2012-04-14T07:50:08.237
> 
> 标签：java, rest, jax-rs

我正在使用构建`REST`网络应用程序`Netbean 7.1.1 Glassfish 3.1.2`

我有 2 个网址：

```
"http://myPage/resource/getall/name"  (get some data by name)

"http://myPage/resource/getall" (get all data) 
```

当客户端使用第一个 URL 发送请求时，会调用下面的 servlet 并执行一些处理。

```
@Path("getall/{name}")
@GET
@Produces("application/json")
public Object Getall(@PathParam("name") String customerName) {
      //here I want to call SQL if customerName is not null. is it possible???
} 
```

但我也想要第二个 URL 来调用这个 servlet。

我以为 servlet 会被调用，我可以检查 customerName == null 然后调用不同的 SQL 等等。

但是当客户端使用第二个 URL（即没有路径参数）发送请求时，不会调用 servlet，因为 URL 没有 {name} 路径参数。

不能调用第二个 URL 并调用上面的 servlet 吗？

我能想到的一种选择是使用`query parameter`：

```
http://myPage/resource/getall?name=value 
```

也许我可以解析它，看看是否`"value"`为空，然后采取相应的行动..

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-14T08:12:14.247

你可以为你的路径参数指定一个正则表达式（参见[2.1.1.@](http://jersey.java.net/nonav/documentation/latest/jax-rs.html#d4e104) Path ）。

如果你使用`.*`匹配空和非空名称所以如果你写：

```
@GET
@Path("getall/{name: .*}")
@Produces("application/json")
public Object Getall(@PathParam("name") String customerName) {
      //here I want to call SQL if customerName is not null. is it possible???
} 
```

它将匹配“http://myPage/resource/getall”和“http://myPage/resource/getall/name”。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-03-16T06:23:43.160

```
@GET
@Path("getall{name:(/[^/]+?)?}")
@Produces("application/json")
public Object Getall(@PathParam("name") String customerName) {
  //here I want to call SQL if customerName is not null. is it      

 possible??? 
  } 
```

# c# - HtmlAgilityPack 中的 NullReferenceException

> ID：10151993
> 
> 赞同：5
> 
> 时间：2012-04-14T07:50:11.893
> 
> 标签：c#, html-agility-pack

我正在尝试从下面提到的 url中提取`link`using`xpath`

```
string url = "http://www.album-cover-art.org/search.php?q=Ruin+-+Live+Album+Version+Lamb+of+God" 
```

我的代码：

```
HtmlAgilityPack.HtmlWeb web = new HtmlAgilityPack.HtmlWeb();
HtmlAgilityPack.HtmlDocument htmlDoc = new HtmlAgilityPack.HtmlDocument();
htmlDoc = web.Load(url); //Exception generated here Line 23

if (htmlDoc.DocumentNode != null)
{
  HtmlNode linkNode = htmlDoc.DocumentNode.SelectSingleNode(".//*[@id='related_search_row']/img/@src");
  if (linkNode != null)
        Console.WriteLine(linkNode.InnerText);
} 
```

上面的代码编译得很好，但是当我尝试运行它时会产生异常

```
Unhandled Exception: System.NullReferenceException: Object reference not set to an instance of an object. 
```

完整的堆栈跟踪

```
System.NullReferenceException: Object reference not set to an instance of an object.
   at HtmlAgilityPack.HtmlDocument.ReadDocumentEncoding(HtmlNode node) in C:\Source\htmlagilitypack\Trunk\HtmlAgilityPack\HtmlDocument.cs:line 1916
   at HtmlAgilityPack.HtmlDocument.PushNodeEnd(Int32 index, Boolean close) in C:\Source\htmlagilitypack\Trunk\HtmlAgilityPack\HtmlDocument.cs:line 1805
   at HtmlAgilityPack.HtmlDocument.Parse() in C:\Source\htmlagilitypack\Trunk\HtmlAgilityPack\HtmlDocument.cs:line 1468
   at HtmlAgilityPack.HtmlDocument.Load(TextReader reader) in C:\Source\htmlagilitypack\Trunk\HtmlAgilityPack\HtmlDocument.cs:line 769
   at HtmlAgilityPack.HtmlWeb.Get(Uri uri, String method, String path, HtmlDocument doc, IWebProxy proxy, ICredentials creds) in C:\Source\htmlagilitypack\Trunk\HtmlAgilityPack\HtmlWeb.cs:line 1515
   at HtmlAgilityPack.HtmlWeb.LoadUrl(Uri uri, String method, WebProxy proxy, NetworkCredential creds) in C:\Source\htmlagilitypack\Trunk\HtmlAgilityPack\HtmlWeb.cs:line 1563
   at HtmlAgilityPack.HtmlWeb.Load(String url, String method) in C:\Source\htmlagilitypack\Trunk\HtmlAgilityPack\HtmlWeb.cs:line 1149
   at HtmlAgilityPack.HtmlWeb.Load(String url) in C:\Source\htmlagilitypack\Trunk\HtmlAgilityPack\HtmlWeb.cs:line 1107
   at ScreenScrapping.Program.Main(String[] args) in c:\Users\ranveer\csharp\ScreenScrapping\ScreenScrapping\Program.cs:line 23 
```

所以，我的问题是为什么我会得到这个例外。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T08:29:46.413

这是 HtmlAgilityPack 中的一个错误。您尝试解析的文档`<meta http-equiv="Content-Type" content="text/html; charset=iso-utf-8">`中的`charset`值 ( `iso-utf-8`) 无法被 AgilityPack 解析为有效的编码名称。正如 Simon Mourier[所说](https://stackoverflow.com/questions/4767318/htmlagilitypack-webget-load-gives-error-object-reference-not-set-to-an-instance/5953331#comment6898877_5953331)，*这是 1.4.0.0 中引入的一个错误*。

为避免这种情况，请从流中手动加载文档并手动设置编码，如下所示：

```
var htmlDoc = new HtmlDocument();
htmlDoc.OptionReadEncoding = false;
var request = (HttpWebRequest)WebRequest.Create(url);
request.Method = "GET";
using (var response = (HttpWebResponse)request.GetResponse())
{
    using (var stream = response.GetResponseStream())
    {
        htmlDoc.Load(stream, Encoding.UTF8);
    }
} 
```

# delphi - 在 Delphi XE2 中的创建/显示表单上设置变量样式

> ID：10151994
> 
> 赞同：1
> 
> 时间：2012-04-14T07:50:17.170
> 
> 标签：delphi, delphi-xe2, vcl-styles

我正在尝试创建一个将用户选择的样式保存到 ini 文件（JvFormStorage 和 JVIniFileStorage）的表单。我遇到的问题是，如果我将代码放在 OnCreate 中它不起作用，在 OnShow 中起作用但我收到错误：

> *“无法在 OnShow 或 OnHide 中更改可见”*

即使这是 OnShow 或过程调用中的唯一代码*（Green1 是 MenuItem 但将转换为组合框选项）*即：

```
Procedure TForm1.ChangeTheme;
begin
if Assigned(TStyleManager.ActiveStyle) then Begin
 If (Green1.Checked) and (TStyleManager.ActiveStyle.Name<>'Light Green') then
  TStyleManager.TrySetStyle('Light Green') else
 ... else
 TStyleManager.TrySetStyle(fdefaultStyleName);
end; 
```

也试过：

```
 Application.Initialize;
    Application.CreateForm(TForm1, Form1);
    Form1.ChangeTheme;
    Form1.Show;
    Application.Run; 
```

确实有效，但会从普通窗口闪烁到“样式化”，如果可能的话，不希望闪烁。

我很可能会以完全错误的方式解决这个问题。谢谢保罗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T15:25:14.837

在您的情况下，*OnCreate*事件是加载 vcl 样式的正确位置。

这是一个最小的示例工作应用程序，（应用程序必须包含“carbon”和“auric”样式）

**项目代码**

```
program Project2;

uses
  Vcl.Forms,
  Unit1 in 'Unit1.pas' {Form1};

{$R *.res}

begin
  Application.Initialize;
  Application.MainFormOnTaskbar := True;
  Application.CreateForm(TForm1, Form1);
  Application.Run;
end. 
```

**表格代码**

```
unit Unit1;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls;

type
  TForm1 = class(TForm)
    Button1: TButton;
    Green1: TCheckBox;
    procedure FormCreate(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

uses
 Vcl.Styles,//including this unit init the vcl styles services.
 Vcl.Themes;

{$R *.dfm}

procedure TForm1.FormCreate(Sender: TObject);
var
 fdefaultStyleName : string;
begin
 fdefaultStyleName:='Auric';
 if StyleServices.Enabled then
   If (Green1.Checked) and (not SameText(TStyleManager.ActiveStyle.Name,'Carbon')) then
    TStyleManager.TrySetStyle('Carbon')
   else
   TStyleManager.TrySetStyle(fdefaultStyleName);
end; 
```

**dfm**

```
object Form1: TForm1
  Left = 520
  Top = 299
  Caption = 'Form1'
  ClientHeight = 294
  ClientWidth = 534
  Color = clBtnFace
  Font.Charset = DEFAULT_CHARSET
  Font.Color = clWindowText
  Font.Height = -11
  Font.Name = 'Tahoma'
  Font.Style = []
  OldCreateOrder = False
  OnCreate = FormCreate
  PixelsPerInch = 96
  TextHeight = 13
  object Button1: TButton
    Left = 32
    Top = 256
    Width = 75
    Height = 25
    Caption = 'Button1'
    TabOrder = 0
  end
  object Green1: TCheckBox
    Left = 32
    Top = 56
    Width = 97
    Height = 17
    Caption = 'Green1'
    TabOrder = 1
  end
end 
```

# php - MYSQL按评分逻辑和意见排序内容？

> ID：10151996
> 
> 赞同：1
> 
> 时间：2012-04-14T07:51:19.883
> 
> 标签：php, mysql, sorting, rating

我正在设计一个网站，但不知道如何根据逻辑对系统进行评分。

结果是我希望获得 1000 票的 4 星项目的排名高于 1 票 5 星的项目。但是，我不希望 1 星和 1000 票的项目排名高于 4 星和 200 票的项目。

有人对该怎么做有任何想法或建议吗？

我发现了这两个问题

[在 SQL 中按加权评分排序？](https://stackoverflow.com/questions/1880597/sorting-by-weighted-rating-in-sql)

[MySQL 评级系统 - 查找评级](https://stackoverflow.com/questions/3098472/mysql-rating-system-find-rating)

他们有他们的缺点，在第一个中，我不明白获胜者的意思是“如果你有很多收视率，你可能希望出于性能原因将这个收视率值非规范化为事件。” 请分享一些见解？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T08:12:35.230

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T08:25:48.307

He means, you should put rating-data into the event-table (and thus have redundant data) to optimize it for performance.

See the wiki for Denormalization: [http://en.wikipedia.org/wiki/Denormalization](http://en.wikipedia.org/wiki/Denormalization)

The data you have to determine the rank of items is:

*   average rating
*   number of ratings

The hard part is probably to make **rules for the ranking**. Like: If the average rating for an item > 4 and the number of ratings < 4 treat it like rated 3.9

For convenience, I would put this value (how to treat the items for ranking) in the item-table.

# javascript - 缩小 Javascript 代码和 css 代码的最佳应用程序

> ID：10151998
> 
> 赞同：15
> 
> 时间：2012-04-14T07:51:50.980
> 
> 标签：javascript, css, minify

用于完成这些任务的最佳、安全且 100% 免费的工具是什么？已经被问了很多次，但我想问那些有经验的用户。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-14T07:56:10.400

我使用 Google Closure Tools，它使用 Rhino 来解释你的代码，同时修改它以确保它在缩小后仍然可以工作。存在许多免费工具：YUI Compressor、UglifyJS 等。

UglifyJS 也不错，在这里试试[http://marijnhaverbeke.nl/uglifyjs](http://marijnhaverbeke.nl/uglifyjs)

谷歌关闭工具：[https ://developers.google.com/closure/](https://developers.google.com/closure/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T07:56:09.247

如果你用谷歌缩小，有很多用于 js 的在线缩小器——这些基本上都做同样的事情。在 CSS 方面，有类似的东西会使文件文件更小。您需要小心使用 CSS 执行此操作，因为您需要根据文件大小衡量可维护性 - 当然，除非您在发布时自动缩小。您仍然需要小心，因为更改 CSS 可能会对您的网站产生不利影响。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-14T07:57:27.717

试试 MinifyCSS，它也适用于 JavaScript -> [http://www.minifycss.com/](http://www.minifycss.com/)

还有 JSMIN (http://www.crockford.com/javascript/jsmin.html) 但它仅适用于 JavaScript。