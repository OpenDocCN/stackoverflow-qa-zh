# StackOverflow 问答 12471000-12471999

# objective-c - 如何绘制自定义窗口控件（关闭、最小化和缩放按钮）

> ID：12471000
> 
> 赞同：10
> 
> 时间：2012-09-18T05:41:12.960
> 
> 标签：objective-c, macos, cocoa

我已经尝试绘制自定义 NSButton，但似乎我在这里重新发明了轮子。有没有办法只替换用于关闭、最小化和缩放按钮的默认图像？

几个应用程序已经这样做了：

*   OSX 10.8 的提醒应用程序（当窗口不是关键时，它们显示为深灰色，而大多数显示为浅灰色）
*   Tweetbot（所有按钮看起来完全自定义）

更多信息：

我可以像这样生成系统默认值`standardWindowButton:NSWindowCloseButton`。但是从那里`setImage`设置器不会改变按钮的外观。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-02T10:31:59.157

**编辑**：自从我写了这个，[INAppStore](https://github.com/indragiek/INAppStoreWindow)已经实现了一个非常好的方法来做到这一点`INWindowButton`。如果您正在寻找拖放解决方案，请检查那里，但下面的代码仍将帮助您实现自己的。

* * *

所以我找不到改变`standardWindowButton`s的方法。这是我如何创建自己的按钮的演练。

**注意：**按钮可以处于 4 种状态

*   窗口不活动![窗口非活动控件](../Images/c836f3282557cddcfa6355176018693d.png)
*   窗口活动 - 正常![窗口活动正常控件](../Images/f7f2e5d47300ce28b38772aeab4bc888.png)
*   窗口活动 - 悬停![窗口活动悬停控件](../Images/aeab9092c8ac520216dd5215405a6a4f.png)
*   窗口活动 - 按下![Window Active Press 控件](../Images/2844e496cbe553271a0c173d76a31d1d.png)

进入演练！

**第 1 步：隐藏预先存在的按钮**

```
NSButton *windowButton = [self standardWindowButton:NSWindowCloseButton];
[windowButton setHidden:YES];
windowButton = [self standardWindowButton:NSWindowMiniaturizeButton];
[windowButton setHidden:YES];
windowButton = [self standardWindowButton:NSWindowZoomButton];
[windowButton setHidden:YES]; 
```

**第 2 步：在 Interface Builder 中设置视图**

你会注意到在悬停时按钮都变成了悬停状态，所以我们需要一个容器视图来接收悬停。

*   创建一个 54px 宽 x 16px 高的容器视图。
*   `NSButton`在容器视图内创建 3 个 Square 样式，每个 14px 宽 x 16px 高。
*   将按钮隔开，使它们之间有 6px 的间隙。

设置按钮

*   在属性检查器中，将`Image`每个按钮的属性设置为 window-active-normal 图像。
*   将`Alternate`image 属性设置为 window-active-press 图像。
*   关闭`Bordered`。
*   设置`Type`为`Momentary Change`。
*   对于每个按钮，将标识符设置为`close`,`minimize`或`zoom`（下面您将看到如何使用它来简化 NSButton 子类）

**第 3 步：子类化容器视图和按钮**

**容器：**

创建一个新文件，子类 NSView。在这里，我们将使用通知中心来告诉按钮何时应该切换到悬停状态。

*HMTrafficLightButtonsContainer.m*

```
// Tells the view to pick up the hover event
- (void)viewDidMoveToWindow {
    [self addTrackingRect:[self bounds]
                    owner:self
                 userData:nil
             assumeInside:NO];
}

// When the mouse enters/exits we send out these notifications
- (void)mouseEntered:(NSEvent *)theEvent {
    [[NSNotificationCenter defaultCenter] postNotificationName:@"HMTrafficButtonMouseEnter" object:self];
}
- (void)mouseExited:(NSEvent *)theEvent {
    [[NSNotificationCenter defaultCenter] postNotificationName:@"HMTrafficButtonMouseExit" object:self];        
} 
```

**纽扣：**

创建一个新文件，这次是 NSButton 的子类。这个需要解释更多，所以我将发布所有代码。

*HMTrafficLightButton.m*

```
@implementation HMTrafficLightButton {
    NSImage *inactive;
    NSImage *active;
    NSImage *hover;
    NSImage *press;
    BOOL activeState;
    BOOL hoverState;
    BOOL pressedState;
}

-(id)initWithCoder:(NSCoder *)aDecoder {
    self = [super initWithCoder:aDecoder];
    if (self) {        
        [self setup];
    }
    return self;
}

- (id)initWithFrame:(NSRect)frameRect {
    self = [super initWithFrame:frameRect];
    if (self) {
        [self setup];
    }
    return self;
}

- (void)setup {
    // Setup images, we use the identifier to chose which image to load
    active = [NSImage imageNamed:[NSString stringWithFormat:@"window-button-%@-active",self.identifier]];
    hover = [NSImage imageNamed:[NSString stringWithFormat:@"window-button-%@-hover",self.identifier]];
    press = [NSImage imageNamed:[NSString stringWithFormat:@"window-button-%@-press",self.identifier]];
    inactive = [NSImage imageNamed:@"window-button-all-inactive"];

    // Checks to see if window is active or inactive when the `init` is called
    if ([self.window isMainWindow] && [[NSApplication sharedApplication] isActive]) {
        [self setActiveState];
    } else {
        [self setInactiveState];
    }

    // Watch for hover notifications from the container view
    // Also watches for notifications for when the window
    // becomes/resigns main
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(setActiveState)
                                                 name:NSWindowDidBecomeMainNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(setInactiveState)
                                                 name:NSWindowDidResignMainNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(hoverIn)
                                                 name:@"HMTrafficButtonMouseEnter"
                                               object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(hoverOut)
                                                 name:@"HMTrafficButtonMouseExit"
                                               object:nil];
}

- (void)mouseDown:(NSEvent *)theEvent {
    pressedState = YES;
    hoverState = NO;
    [super mouseDown:theEvent];
}

- (void)mouseUp:(NSEvent *)theEvent {
    pressedState = NO;
    hoverState = YES;
    [super mouseUp:theEvent];
}

- (void)setActiveState {
    activeState = YES;
    if (hoverState) {
        [self setImage:hover];
    } else {
        [self setImage:active];
    }
}

- (void)setInactiveState {
    activeState = NO;
    [self setImage:inactive];
}

- (void)hoverIn {
    hoverState = YES;
    [self setImage:hover];
}

- (void)hoverOut {
    hoverState = NO;
    if (activeState) {
        [self setImage:active];
    } else {
        [self setImage:inactive];
    }
}

- (void)dealloc {
    [[NSNotificationCenter defaultCenter] removeObserver:self];
}

@end 
```

在 IB 中，将容器视图的自定义类和所有 3 个按钮设置为我们刚刚创建的各自的类。

**第 4 步：设置按钮操作**

这些从视图控制器调用的方法与`standardWindowButton`s' 相同。将它们链接到 IB 中的按钮。

```
- (IBAction)clickCloseButton:(id)sender {
    [self.view.window close];
}
- (IBAction)clickMinimizeButton:(id)sender {
    [self.view.window miniaturize:sender];
}
- (IBAction)clickZoomButton:(id)sender {
    [self.view.window zoom:sender];
} 
```

**步骤 5：将视图添加到窗口**

*我有一个单独的 xib 和视图控制器设置，专门用于窗口控件。视图控制器称为 HMWindowControlsController*

```
(HMWindowControlsController*) windowControlsController = [[HMWindowControlsController alloc] initWithNibName:@"WindowControls" bundle:nil];
NSView *windowControlsView = windowControlsController.view;
// Set the position of the window controls, the x is 7 px, the y will
// depend on your titlebar height.
windowControlsView.frame = NSMakeRect(7.0, 10.0, 54.0, 16.0);
// Add to target view
[targetView addSubview:windowControlsView]; 
```

希望这可以帮助。这是一个相当长的帖子，如果您认为我犯了错误或遗漏了什么，请告诉我。

# sitecore - 为营销人员使用 Web 表单的条件字段？

> ID：12471002
> 
> 赞同：4
> 
> 时间：2012-09-18T05:41:22.993
> 
> 标签：sitecore, sitecore6, web-forms-for-marketers

我需要根据在另一个字段中输入的值显示/隐藏一个字段。有条件可见的字段也需要是必填字段。

这可能使用WFFM吗？我需要使用自定义字段吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:35:12.393

您需要构建一个自定义复杂类型来执行此操作。您也许可以在自定义类型中重用现有字段类型，但专门为新的复杂类型创建它们可能会更简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-04T13:29:28.603

您可以为此使用 JQuery，也可以为此创建自定义字段，您只需复制并粘贴前一个字段并反映 Sitecore.Forms.Core.dll 并查看如何实现此目的的代码。但是如果我可以通过这个来管理，我通常会使用 JQuery

# c++ - 手臂动态链接

> ID：12471003
> 
> 赞同：0
> 
> 时间：2012-09-18T05:41:25.860
> 
> 标签：c++, linux, arm, embedded-linux

我想在我的 ARM 项目中使用 libftdi。我构建了 libftdi，所有示例都可以正常工作。

**程序：**

```
#include <stdio.h>

int main()
{
    printf("hello world\n");    
    return 0;
} 
```

**编译：**

```
/usr/local/arm/4.3.4-armv4t-arm920t-eabi/usr/bin/arm-linux-gcc main.cpp -lftdi 
```

**strace 输出：**

```
execve("./unwork", ["./unwork"], [/* 17 vars */]) = 0
mmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x40005000
open("/lib/libftdi.so.1", O_RDONLY)     = 3
fstat(3, {st_mode=S_IFREG|0755, st_size=59028, ...}) = 0
mmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x40006000
read(3, "\177ELF\1\1\1\0\0\0\0\0\0\0\0\0\3\0(\0\1\0\0\0\370\24\0\0004\0\0\0\24"..., 4096) = 4096
mmap2(NULL, 57344, PROT_NONE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x4000e000
mmap2(0x4000e000, 20744, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_FIXED, 3, 0) = 0x4000e000
mmap2(0x4001b000, 740, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED, 3, 0x5) = 0x4001b000
close(3)                                = 0
munmap(0x40006000, 4096)                = 0
open("/lib/libgcc_s.so.1", O_RDONLY)    = 3
fstat(3, {st_mode=S_IFREG|0644, st_size=44280, ...}) = 0
mmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x40006000
read(3, "\177ELF\1\1\1\0\0\0\0\0\0\0\0\0\3\0(\0\1\0\0\0p'\0\0004\0\0\0\20"..., 4096) = 4096
mmap2(NULL, 77824, PROT_NONE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x4001c000
mmap2(0x4001c000, 42492, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_FIXED, 3, 0) = 0x4001c000
mmap2(0x4002e000, 2072, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED, 3, 0xa) = 0x4002e000
close(3)                                = 0
munmap(0x40006000, 4096)                = 0
open("/lib/libc.so.0", O_RDONLY)        = 3
fstat(3, {st_mode=S_IFREG|0755, st_size=342748, ...}) = 0
mmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x40006000
read(3, "\177ELF\1\1\1\0\0\0\0\0\0\0\0\0\3\0(\0\1\0\0\0\20\270\0\0004\0\0\0\364"..., 4096) = 4096
mmap2(NULL, 393216, PROT_NONE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x4002f000
mmap2(0x4002f000, 335672, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_FIXED, 3, 0) = 0x4002f000
mmap2(0x40089000, 5112, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED, 3, 0x52) = 0x40089000
mmap2(0x4008b000, 15120, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x4008b000
close(3)                                = 0
munmap(0x40006000, 4096)                = 0
open("/home/xav/Projects/compile/libusb-compat/lib/libusb-0.1.so.4", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/home/xav/Projects/compile/libusb/lib/libusb-0.1.so.4", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/lib/libusb-0.1.so.4", O_RDONLY)  = 3
fstat(3, {st_mode=S_IFREG|0755, st_size=44642, ...}) = 0
mmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x40006000
read(3, "\177ELF\1\1\1\0\0\0\0\0\0\0\0\0\3\0(\0\1\0\0\0\24\21\0\0004\0\0\0$"..., 4096) = 4096
mmap2(NULL, 45056, PROT_NONE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x4008f000
mmap2(0x4008f000, 11748, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_FIXED, 3, 0) = 0x4008f000
mmap2(0x40099000, 4012, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED, 3, 0x2) = 0x40099000
close(3)                                = 0
munmap(0x40006000, 4096)                = 0
open("/home/xav/Projects/compile/libusb-compat/lib/libusb-1.0.so.0", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/home/xav/Projects/compile/libusb/lib/libusb-1.0.so.0", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/lib/libusb-1.0.so.0", O_RDONLY)  = 3
fstat(3, {st_mode=S_IFREG|0755, st_size=161417, ...}) = 0
mmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x40006000
read(3, "\177ELF\1\1\1\0\0\0\0\0\0\0\0\0\3\0(\0\1\0\0\0\320\34\0\0004\0\0\0\200"..., 4096) = 4096
mmap2(NULL, 81920, PROT_NONE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x4009a000
mmap2(0x4009a000, 45328, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_FIXED, 3, 0) = 0x4009a000
mmap2(0x400ad000, 1024, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED, 3, 0xb) = 0x400ad000
close(3)                                = 0
munmap(0x40006000, 4096)                = 0
open("/home/xav/Projects/compile/libusb-compat/lib/librt.so.0", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/home/xav/Projects/compile/libusb/lib/librt.so.0", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/lib/librt.so.0", O_RDONLY)       = 3
fstat(3, {st_mode=S_IFREG|0755, st_size=4752, ...}) = 0
mmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x40006000
read(3, "\177ELF\1\1\1\0\0\0\0\0\0\0\0\0\3\0(\0\1\0\0\0000\6\0\0004\0\0\0\210"..., 4096) = 4096
mmap2(NULL, 36864, PROT_NONE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x400ae000
mmap2(0x400ae000, 3024, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_FIXED, 3, 0) = 0x400ae000
mmap2(0x400b6000, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED, 3, 0) = 0x400b6000
close(3)                                = 0
munmap(0x40006000, 4096)                = 0
open("/home/xav/Projects/compile/libusb-compat/lib/libpthread.so.0", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/home/xav/Projects/compile/libusb/lib/libpthread.so.0", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/lib/libpthread.so.0", O_RDONLY)  = 3
fstat(3, {st_mode=S_IFREG|0755, st_size=52952, ...}) = 0
mmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x40006000
read(3, "\177ELF\1\1\1\0\0\0\0\0\0\0\0\0\3\0(\0\1\0\0\0 C\0\0004\0\0\0h"..., 4096) = 4096
mmap2(NULL, 110592, PROT_NONE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x400b7000
mmap2(0x400b7000, 45132, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_FIXED, 3, 0) = 0x400b7000
mmap2(0x400ca000, 6808, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED, 3, 0xb) = 0x400ca000
mmap2(0x400cc000, 23368, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x400cc000
close(3)                                = 0
munmap(0x40006000, 4096)                = 0
open("/home/xav/Projects/compile/libusb-compat/lib/libc.so.0", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/home/xav/Projects/compile/libusb/lib/libc.so.0", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/lib/libc.so.0", O_RDONLY)        = 3
fstat(3, {st_mode=S_IFREG|0755, st_size=342748, ...}) = 0
close(3)                                = 0
open("/lib/libc.so.0", O_RDONLY)        = 3
fstat(3, {st_mode=S_IFREG|0755, st_size=342748, ...}) = 0
close(3)                                = 0
open("/home/xav/Projects/compile/libusb/lib/libusb-1.0.so.0", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/lib/libusb-1.0.so.0", O_RDONLY)  = 3
fstat(3, {st_mode=S_IFREG|0755, st_size=161417, ...}) = 0
close(3)                                = 0
open("/home/xav/Projects/compile/libusb/lib/librt.so.0", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/lib/librt.so.0", O_RDONLY)       = 3
fstat(3, {st_mode=S_IFREG|0755, st_size=4752, ...}) = 0
close(3)                                = 0
open("/home/xav/Projects/compile/libusb/lib/libpthread.so.0", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/lib/libpthread.so.0", O_RDONLY)  = 3
fstat(3, {st_mode=S_IFREG|0755, st_size=52952, ...}) = 0
close(3)                                = 0
open("/home/xav/Projects/compile/libusb/lib/libc.so.0", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/lib/libc.so.0", O_RDONLY)        = 3
fstat(3, {st_mode=S_IFREG|0755, st_size=342748, ...}) = 0
close(3)                                = 0
open("/lib/librt.so.0", O_RDONLY)       = 3
fstat(3, {st_mode=S_IFREG|0755, st_size=4752, ...}) = 0
close(3)                                = 0
open("/lib/libpthread.so.0", O_RDONLY)  = 3
fstat(3, {st_mode=S_IFREG|0755, st_size=52952, ...}) = 0
close(3)                                = 0
open("/lib/libc.so.0", O_RDONLY)        = 3
fstat(3, {st_mode=S_IFREG|0755, st_size=342748, ...}) = 0
close(3)                                = 0
open("/lib/libc.so.0", O_RDONLY)        = 3
fstat(3, {st_mode=S_IFREG|0755, st_size=342748, ...}) = 0
close(3)                                = 0
open("/lib/libc.so.0", O_RDONLY)        = 3
fstat(3, {st_mode=S_IFREG|0755, st_size=342748, ...}) = 0
close(3)                                = 0
stat("/lib/ld-uClibc.so.0", {st_mode=S_IFREG|0755, st_size=21200, ...}) = 0
mprotect(0x40089000, 4096, PROT_READ)   = 0
mprotect(0x400b6000, 4096, PROT_READ)   = 0
mprotect(0x400ca000, 4096, PROT_READ)   = 0
mprotect(0x4000c000, 4096, PROT_READ)   = 0
ioctl(0, SNDCTL_TMR_TIMEBASE or TCGETS, {B38400 opost isig icanon echo ...}) = 0
ioctl(1, SNDCTL_TMR_TIMEBASE or TCGETS, {B38400 opost isig icanon echo ...}) = 0
getrlimit(RLIMIT_STACK, {rlim_cur=8192*1024, rlim_max=1074584348}) = 0
setrlimit(RLIMIT_STACK, {rlim_cur=2044*1024, rlim_max=1074584348}) = 0
getpid()                                = 479
rt_sigaction(SIGRTMIN, {0x400bd988, [], 0x4000000 /* SA_??? */}, NULL, 8) = 0
rt_sigaction(SIGRT_1, {0x400bd8ac, [RTMIN], 0x4000000 /* SA_??? */}, NULL, 8) = 0
rt_sigaction(SIGRT_2, {0x400bd224, [], 0x4000000 /* SA_??? */}, NULL, 8) = 0
rt_sigprocmask(SIG_BLOCK, [RTMIN], NULL, 8) = 0
rt_sigprocmask(SIG_UNBLOCK, [RT_1], NULL, 8) = 0
--- SIGSEGV (Segmentation fault) @ 0 (0) ---
+++ killed by SIGSEGV +++ 
```

我得到“分段错误”而不是在 ARM 上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T03:07:07.027

我需要将标志添加`-pthread`到`gcc`参数中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T10:52:01.323

通过在目标本身的调试器中运行回溯、使用 remote-gdb 或通过收集可以在主机系统上分析的核心文件来收集回溯。

# java - java中用于匹配Pattern类中的模式的正则表达式

> ID：12471008
> 
> 赞同：1
> 
> 时间：2012-09-18T05:42:05.740
> 
> 标签：java, regex

我有一个字符串`m="hell,hj;nk,.txt"`

我想要我的字符串作为字符串`m="hellhjnk.txt"`

我在用：

```
 Pattern p=Pattern.compile("(\"([^\"]*)(\\.)([a-z]{1,4}[\"]))|'([^']+)(\\.)([a-z]{1,4})'"); 
```

它适用于双引号和扩展名。如何删除空格、逗号、分号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T05:53:05.447

你可以这样做：

```
m = m.replaceAll("[,; ]",""); 
```

该类`Pattern`用于匹配。你基本上可以做同样的事情：

```
 Pattern p = Pattern.compile("[;, ]");
     String m = "hell,hj;nk,.txt";
     Matcher matcher = p.matcher(m);
     System.out.println(matcher.replaceAll("")); 
```

# php - php在服务器端每x时间刷新一次

> ID：12471011
> 
> 赞同：0
> 
> 时间：2012-09-18T05:42:15.333
> 
> 标签：php, lamp

我想知道如何每隔 x 时间调用同一个文件。我习惯了 ajax，但这仅适用于网站有用户时，我不希望任何用户我只是想对某些文件进行一些操作每x时间，假设每20分钟一次。谢谢你。有谁知道一些可以帮助我解决这个问题的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T05:44:19.917

您需要在服务器端执行此操作。你试过cron作业吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T06:00:36.833

在你的 linux 服务器的命令行中输入：

```
crontab -e 
```

将此添加到文件中并保存：

```
20 * * * * curl -s http://example.com 
```

这将每 20 分钟获取一次该 url，curl 的 -s 选项只会使任何输出静音。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T05:58:13.113

这可能会对您有所帮助，该链接说明了如何在 hostagator 中设置 cron 作业。链接中的视频足以让你去我猜

[http://support.hostgator.com/articles/cpanel/how-do-i-create-and-delete-a-cron-job](http://support.hostgator.com/articles/cpanel/how-do-i-create-and-delete-a-cron-job)

# java - 带有条件的java中的正则表达式

> ID：12471014
> 
> 赞同：2
> 
> 时间：2012-09-18T05:42:26.907
> 
> 标签：java, regex

我必须根据以下条件用Java编写Regex：

*   总位数字符限制 = 64
*   单个数字 0 是可以接受的
*   如果多于一个数字，则第一个数字必须是 1 到 9
*   以下数字可以是 0 到 9
*   小数点后允许两位数
*   不接受逗号

到目前为止，我只得到了这个：

```
(\\d{1,64}) 
```

有人能帮我吗

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-18T05:45:59.040

```
Pattern regex = Pattern.compile(
    "^             # Start of string                 \n" +
    "(?!.{65})     # Assert length not 65 or greater \n" +
    "(?:           # Match either                    \n" +
    " 0            #  0                              \n" +
    "|             # or                              \n" +
    " [1-9]\\d*    #  1-n, no leading zeroes         \n" +
    ")             # End of alternation              \n" +
    "(?:           # Match...                        \n" +
    " \\.          #  a dot                          \n" +
    " \\d{2}       #  followed by exactly 2 digits   \n" +
    ")?            # ...optionally                   \n" +
    "$             # End of string", 
    Pattern.COMMENTS); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T05:57:22.440

如果你把它分成 4 个场景，可能是最清晰的：

```
(0(\.\d{1,2})?|[1-9](\d{0,63}|\d{0,61}\.\d|\d{0,60}\.\d\d)) 
```

这是一个 0 可选地后跟一个小数和一个或两个数字，或者一个 1-9 后跟以下之一：

*   多达 63 位数字
*   最多 61 位数字、一个小数和一个数字
*   最多 60 位数字、一个小数位和两位数字

绝对值得在 Java 正则表达式中添加一些注释，但我对 Java 的正则表达式语法不太了解，所以我将把它作为练习留给读者。

# c# - 从.net c#访问oracle数据库时获取解决方案

> ID：12471015
> 
> 赞同：0
> 
> 时间：2012-09-18T05:42:30.777
> 
> 标签：c#, .net, oracle, oracle10g

我有一个使用 System.Data.OracleClient 访问 oracle 数据库的 C# 程序。

该代码使用 OracleCommand、Dataset 对象。

命令结构如下

```
con = new OracleConnection(conStr);
con.Open();
OracleDataAdapter adp = new OracleDataAdapter("select * from sample", con);
DataSet ds = new DataSet();
adp.Fill(ds);
DataTable dt = ds.Tables[0];
con.Close(); 
```

和初始化值为

```
 public static String conStr = "SERVER=(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=******)(PORT=1521))(CONNECT_DATA=(SERVICE_NAME=******)));uid=#####;pwd=#######;";
private OracleConnection con;
private String query;
private OracleCommand cmd;
private OracleDataReader rd; 
```

和

我收到错误

堆栈跟踪：

```
 at System.Data.OracleClient.OciHandle..ctor(OciHandle parentHandle, HTYPE handleType, MODE ocimode, HANDLEFLAG handleflags)
   at System.Data.OracleClient.OracleInternalConnection.OpenOnLocalTransaction(String userName, String password, String serverName, Boolean integratedSecurity, Boolean unicode, Boolean omitOracleConnectionName)
   at System.Data.OracleClient.OracleInternalConnection..ctor(OracleConnectionString connectionOptions)
   at System.Data.OracleClient.OracleConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningObject)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject)
   at System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject)
   at System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection)
   at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)
   at System.Data.OracleClient.OracleConnection.Open()
   at oracleTest.Program.showdata() in D:\oracle\oracletst[via-oracleclient]\oracletst\Program.cs:line 43
   at oracleTest.Program.Main(String[] args) in D:\oracle\oracletst[via-oracleclient]\oracletst\Program.cs:line 22
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

目标站点：

```
{Void .ctor(System.Data.OracleClient.OciHandle, HTYPE, MODE, HANDLEFLAG)} 
```

信息 ：

```
OCIEnvCreate failed with return code -1 but error message text was not available. 
```

我不知道我被困在哪里了。

我正在使用 oracle 10g 和 dotnet 2010。

等待您的宝贵回复和意见......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T05:49:04.687

检查这个： http: [//oraclepoint.com/oralife/2010/08/19/oracle-odbc-connection-issue-of-system-exception-ocienvcreate-failed-with-return-code-1-on-windows-with -asp/](http://oraclepoint.com/oralife/2010/08/19/oracle-odbc-connection-issue-of-system-exception-ocienvcreate-failed-with-return-code-1-on-windows-with-asp/)

# php - Fackbook 应用程序处理 de-auth

> ID：12471016
> 
> 赞同：0
> 
> 时间：2012-09-18T05:42:32.117
> 
> 标签：php, facebook

我有一个 facebook 应用程序，当前打开沙盒模式，当他们没有应用程序或他们没有登录时，我的应用程序将自动踢出安装应用程序

我的应用程序也有一个 btn 来投票，这将是一个 ajax 功能，当人们没有安装应用程序/没有登录时，ajax 将返回消息，然后调用 fb.login() 要求人们在弹出窗口中登录

我正在测试一个案例，假设我安装了应用程序，

1.  我转到有 ajax 按钮的页面

2.  然后我在另一个浏览器选项卡上打开我的帐户页面，然后删除该应用程序

3.  我将浏览器选项卡交换到页面

4.  我单击 btn，ajax 返回未安装消息，它调用 fb.login()

5.  它会弹出一个错误弹出窗口，我检查弹出 url，它的段包含一个 accessToken

6.  然后我再次单击 btn，ajax 返回未安装消息并调用 fb.login()

7.  正常弹出登录框

不同的是成功登录的 url 不会在 url 段中包含 accessToken

谁能告诉我如何处理这种情况，如果我希望人们在删除应用程序并且没有刷新页面后在弹出框中登录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T06:21:36.013

一般来说，在你用 Javascript 做任何事情之前，你可以通过调用 Facebook 服务器的“ [getLoginStatus](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/) ”来检查他们是否仍然登录。然后在呼叫响应后处理您的操作。

您还可以使用位于 HTML 页面中的[事件订阅侦听器。](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)如果用户注销，那么您可以强制刷新

```
FB.Event.subscribe('auth.authResponseChange', function(response) {
    alert('The status of the session is: ' + response.status);
}); 
```

如果您回调 PHP，则每个 PHP 页面都应启动 facebook 对象（检查[Facebook SDK](https://github.com/facebook/facebook-php-sdk)）并检查用户是否已登录。

```
require 'facebook-php-sdk/src/facebook.php';

$facebook = new Facebook(array(
  'appId'  => 'YOUR_APP_ID',
  'secret' => 'YOUR_APP_SECRET',
));

// Get User ID
$user = $facebook->getUser(); 
```

# java - PersistenceAnnotationBeanPostProcessor 有什么用处吗？

> ID：12471019
> 
> 赞同：16
> 
> 时间：2012-09-18T05:42:38.997
> 
> 标签：java, spring, jakarta-ee, entitymanager, spring-data

根据其 JavaDoc，PersistenceAnnotationBeanPostProcessor 似乎负责使用注解 @PersistenceContext 注入 EntityManager。它似乎暗示没有在 Spring 应用程序上下文 xml 中声明此 bean，@PersistenceContext 注释将不起作用。

然而，根据我的实验，事实并非如此。

## 持久性.xml

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence 
        http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd"
    version="1.0">
    <persistence-unit name="default" transaction-type="RESOURCE_LOCAL" />
</persistence> 
```

## Spring 应用程序上下文 XML

```
<context:component-scan base-package="com.test.dao" />

<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource"/>
    <property name="persistenceUnitName" value="default"/>
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="showSql" value="true"/>
            <property name="generateDdl" value="true"/>
            <property name="databasePlatform" value="org.hibernate.dialect.DerbyDialect"/>
        </bean>
    </property>
</bean>

<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="org.apache.derby.jdbc.ClientDriver"/>
    <property name="url" value="jdbc:derby://localhost:1527/c:\derbydb\mydb"/>
    <property name="username" value="APP"/>
    <property name="password" value="APP"/>
</bean>

<tx:annotation-driven/>

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean>

<!-- 
    <bean id="persistenceAnnotation" class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />
 --> 
```

## UserDaoImpl

```
@Repository("userDao")
public class UserDaoImpl implements UserDao {

    @PersistenceContext
    protected EntityManager entityManager;

    @Transactional
    public void save(User user) {
            entityManager.persist(user);
    }
} 
```

无论我注释或取消注释persistenceAnnotation bean，结果都是一样的。把豆子留在身边并没有什么坏处，但是这个豆子有什么用呢？

我正在使用 Spring 3.0.5。

有人可以提供一个场景，取出这个 bean 会导致失败吗？

我也不喜欢仅仅为了愚弄 Spring 而创建一个空的持久性单元。幸运的是，这个问题已经在 Spring 3.1.0 中得到解决。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-19T12:18:36.333

由元素`PersistenceAnnotationBeanPostProcessor`透明激活。`<context:component-scan />`准确地说，它`<context:annotation-config />`是激活 bean 的元素，但这个元素又被透明地激活`<context:component-scan />`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-07-28T15:25:13.440

正如 Oliver Gierke 所提到的，`org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor`当使用基于注释的配置时，Spring 会自动将其加载到 App Context 中。它的职责之一是搜索`EntityManagerFactory`可以`EntityManager`为您提供`@PersistenceContext`注释属性的适当实体。

如果你`EntityManagerFactory`的spring config/context中有多个bean并且你有`@PersistenceContext`没有属性的注释`unitName`（假设你正在使用一个带有这样一个bean的框架，并且你不能接触框架代码），你可能会遇到这个异常：`org.springframework.beans.factory.NoUniqueBeanDefinitionException`.

我找到了这个解决方法，以防你进入这个：

```
<bean id="org.springframework.context.annotation.internalPersistenceAnnotationProcessor"
class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" >
<property name="defaultPersistenceUnitName" value="entityManagerFactory"/>
</bean> 
```

这将覆盖`PersistenceAnnotationBeanPostProcessor`Spring 加载的默认值，并使用`defaultPersistenceUnitName`.

# c++ - DrawIconEx 留下蒙版伪影

> ID：12471020
> 
> 赞同：4
> 
> 时间：2012-09-18T05:42:51.323
> 
> 标签：c++, windows, winapi, icons

我正在使用`IImageList`和为任何给定路径提取巨型图标`SHGetFileInfo`。一旦我有了它，我就可以将它渲染`HICON`成一个`HBITMAP`使用`DrawIconEx`GDI+`Bitmap`和`Graphics`对象的最终渲染。

现在，这一切都很好，除了当我对位图进行最终渲染时，最左边的边缘总是有一个黑色伪影。对于我得到的几乎所有图标都是如此，并且始终是左边缘。

![我在左边的 explorer.exe 中看到的，我绘制的图标看起来像右边](../Images/d0af1c1bb419770b6b2ff939cb6f6c8d.png)

暗线可能来自哪里的任何想法？

我使用的代码大致是：

### 1.提取图标：

```
// Get the image list index of the icon
SHFILEINFO sfi;
if (!SHGetFileInfo(pszPath, 0, &sfi, sizeof(sfi), SHGFI_SYSICONINDEX)) return NULL;

// Get the jumbo image list
IImageList *piml;
if (FAILED(SHGetImageList(SHIL_JUMBO, IID_PPV_ARGS(&piml)))) return NULL;

// Extract an icon
HICON hicon;
piml->GetIcon(sfi.iIcon, ILD_SCALE|ILD_TRANSPARENT, &hicon);
return hicon; 
```

### 2.生成位图

```
HDC hDC = GetDC(NULL);
HDC hMemDC = CreateCompatibleDC(hDC);
HBITMAP hMemBmp = CreateCompatibleBitmap(hDC, x, y);
HBITMAP hResultBmp = NULL;
HGDIOBJ hOrgBMP = SelectObject(hMemDC, hMemBmp);

HBRUSH hbr = CreateSolidBrush(bg);

RECT rr = { 0, 0, 256, 256 }; // jumbo icons
FillRect(hMemDC, &rr, hbr);
DeleteBrush(hbr);
DrawIconEx(hMemDC, 0, 0, hicon, size, size, 0, NULL, DI_NORMAL);

hResultBmp = hMemBmp;
hMemBmp = NULL;

SelectObject(hMemDC, hOrgBMP);
return hResultBitmap; 
```

### 3.将GDI+位图渲染到“窗口位图”：

```
Bitmap *b = ::New Bitmap(hResultBitmap, NULL);

Graphics    graphics(hdc);
graphics.SetTextRenderingHint(TextRenderingHintClearTypeGridFit);

SolidBrush  bgbrush(Color(255, 255, 255, 255));
Rect r(0, 0, hwnd_w, hwnd_h);
graphics.FillRectangle(&bgbrush, r);

graphics.SetInterpolationMode(InterpolationModeHighQualityBicubic);
Rect r(5, 5, 128, 128);
graphics.DrawImage(dpd->image_to_draw, r); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T02:37:34.887

哇，我昨晚又玩了一会儿。这是`ILD_SCALE`在`IImageList::GetIcon`。

摆脱它，一切都会再次完美无缺。去图吧……</p>

### 1.提取图标：

```
// Get the image list index of the icon
SHFILEINFO sfi;
if (!SHGetFileInfo(pszPath, 0, &sfi, sizeof(sfi), SHGFI_SYSICONINDEX)) return NULL;

// Get the jumbo image list
IImageList *piml;
if (FAILED(SHGetImageList(SHIL_JUMBO, IID_PPV_ARGS(&piml)))) return NULL;

// Extract an icon
HICON hicon;
piml->GetIcon(sfi.iIcon, ILD_TRANSPARENT, &hicon);
return hicon; 
```

# c++ - Win32：将 lParam 传递给 CreateWindow 并跟踪打开的窗口

> ID：12471024
> 
> 赞同：1
> 
> 时间：2012-09-18T05:43:11.837
> 
> 标签：c++, c, windows, winapi, operating-system

首先，这是我收到的文档中的描述。注意：我所要做的就是更改现有代码以满足这些要求

更改代码以创建 4 个按演示所示组织的窗口。当用户关闭一个窗口时，如果还有其他窗口仍然打开，它不会杀死程序。用户必须全部关闭才能停止程序，

您将需要跟踪打开的窗口数量（并在它们关闭时减去）。不允许全局。不允许静态。

此外，您的程序必须使用 lParam 和 CREATESTRUCT 初始化计数。

```
Possible functions and structs:

SetWindowLong()
GetWindowLong()
SetClassLong()
GetClassLong()
CREATESTRUCT 
```

好的，这就是我结束的内容。我可以打开 4 个所需的窗口，并且关闭一个窗口（发送 WM_DESTROY 消息）并没有结束整个程序。我对 lParam 的传递和使用 CREATESTRUCT 感到困惑。

这是我的 wndproc.c：

```
 LRESULT CALLBACK HelloWndProc (HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam){
    HDC     hdc;
    PAINTSTRUCT ps;
    RECT    rect;
    int number = GetClassLongPtr(hwnd, 0);

    switch (message){
        case WM_CREATE:
            if(number == 0){
                SetClassLongPtr(hwnd, 0, (LONG)((CREATESTRUCT*)lParam)->lpCreateParams);
            }
            number++;
            return 0;

        case WM_PAINT:
            hdc = BeginPaint(hwnd, &ps);

            GetClientRect(hwnd, &rect);
            DrawText(hdc, TEXT("Unique yet the same!"), -1, &rect,
                    DT_SINGLELINE | DT_CENTER | DT_VCENTER);

            EndPaint(hwnd, &ps);
            return 0;

        case WM_DESTROY:
            number--;
            if(number == 0){
                PostQuitMessage(0);
            }
            return 0;
    }
    return DefWindowProc(hwnd, message, wParam, lParam); 
```

我正在尝试获取作为创建的第一个窗口的 lParam 传递的变量，以设置为 Class Extra。那有意义吗？这是我的main.c：

int WINAPI WinMain (HINSTANCE hInstance, HINSTANCE hPrevInstance, PSTR szCMLine, int iCmdShow){ static TCHAR szAppName[] = TEXT ("HelloApplication"); HWND hwnd; 味精味精；WNDCLASS wnd类；长*计数；

```
wndclass.style      = CS_HREDRAW | CS_VREDRAW;
wndclass.lpfnWndProc = HelloWndProc;
wndclass.cbClsExtra = 5;
wndclass.cbWndExtra = 0;
wndclass.hInstance  = hInstance;
wndclass.hIcon      = LoadIcon (NULL, IDI_APPLICATION);
wndclass.hCursor    = LoadCursor (NULL, IDC_ARROW);
wndclass.hbrBackground = (HBRUSH) GetStockObject (WHITE_BRUSH);
wndclass.lpszMenuName = NULL;
wndclass.lpszClassName = szAppName;

if (!RegisterClass (&wndclass)){
    MessageBox (NULL, TEXT ("This program requires Windows 95/98/NT"),
                szAppName, MB_ICONERROR);
    return 0;
}

hwnd = CreateWindow(szAppName,      
                    TEXT("Hello World for Windows"), 
                    WS_OVERLAPPEDWINDOW,    
                    100,        
                    50,     
                    400,        
                    300,        
                    NULL,               
                    NULL,           
                    hInstance,          
                    count = 0);
ShowWindow(hwnd, iCmdShow);
UpdateWindow(hwnd); 
```

任何帮助，将不胜感激; 我已经在课堂上对这个信息进行过测验，但我不明白。我发布这个问题只是为了我自己的理解。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T12:02:06.200

由于您必须计算同一窗口类的窗口（实例）的数量，因此所需的计数器可以看作是窗口类的**静态**数据成员。

所以目标是向窗口类添加一些额外的数据（这里是整数计数器）。为此，需要告诉 Windows 分配这些额外的数据。这可以通过将正确的值传递给`RegisterClass()`. 对于所需的计数器，将`cbClsExtra`类型结构的成员（`WNDCLASS`其引用传递给`RegisterClass()`）设置为整数计数器的大小。

要在消息调度程序的回调方法中访问 Windows 类的静态数据（以及整数计数器），请使用`GetClassLongPtr()`.

因为我认为这是家庭作业，所以我将游戏的其余部分留作练习...... ;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T06:17:07.623

`SetClassLongPtr`- 此函数对与窗口类关联的内存进行操作。这本质上是一个静态变量。实际上，您有打开窗口的简单静态计数器。它只是隐藏在烟幕下。

从技术上讲，从 C/C++ 的角度来看，您的计数器不是`static/global variable`. 但从概念的角度来看 - 它是。

lParam 和 CREATESTRUCT 在这里不是重要的细节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T07:56:34.103

错了，眼镜他们无能为力！

*   您不能将自动变量传递给`CreateWindowEx`，并期望该变量的**地址**（而不是您实际传递的值）通过
*   您不能将值分配给自动变量（*int number = GetClassLongPtr(hwnd, 0);*），对该变量进行更改，并期望它们是持久的。

简而言之：

*   传递指向 的指针`CreateWindowEx`，而不是值
*   当您想要更改其中存储的值时取消引用该指针

您可能需要更新关于[指针](http://www.ontko.com/pub/rayo/cs35/pointers.html)的知识。

# java - DefaultMessageListenerContainer，关于要监听的队列的知识

> ID：12471030
> 
> 赞同：1
> 
> 时间：2012-09-18T05:43:50.137
> 
> 标签：java, spring, queue, jms, spring-jms

在 onMessage 方法中是否有可能知道 MessageListener 正在侦听哪个队列？

**我的 Spring-config（它的一部分）：**

```
<bean id="abstractMessageListenerContainer" class="org.springframework.jms.listener.DefaultMessageListenerContainer" abstract="true">
    <property name="connectionFactory" ref="connectionFactory" />
    <property name="maxConcurrentConsumers" value="5"/>
    <property name="receiveTimeout" value="10000" />
</bean>

<bean class="org.springframework.jms.listener.DefaultMessageListenerContainer" parent="abstractMessageListenerContainer">
    <property name="destinationName" value="MY.QUEUE" />
    <property name="messageListener" ref="myMessageListener" />
</bean>

<bean id="myMessageListener" class="my.package.structure.ListenerClass"></bean> 
```

**我的听众班：**

```
public class ListenerClass implements MessageListener {

    public void onMessage(Message msg) {

    //where do I know from, on which queue the message has been written to?

    }

} 
```

有没有开箱即用的解决方案？或者任何自定义解决方案来获取队列/目标名称？

在后续的批处理中确实需要队列...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T06:36:45.297

简单的。至少在微不足道的情况下：

`msg.getJMSDestination()`将为您提供作为 javax.jms.Destination 对象的目的地。通常`.toString()`返回如下内容：`queue://MYQUEUENAME`

但是，在某些 JMS 实现中，可能存在多跳队列，例如 WebSphere MQ 中的静态发布/订阅设置，您可以将消息写入一个队列，然后它会围绕一条路由反弹，最终进入一个完全不同的队列。此外，您可能会遇到 ESB 的情况，其中包含路由消息的中间逻辑。在这种情况下，在过度依赖 JMSDestination 属性之前，您需要三思而后行。否则，继续。

# c++ - reinterpret_cast< type-id > 的“type-id”可以是一个变量吗？

> ID：12471032
> 
> 赞同：1
> 
> 时间：2012-09-18T05:44:01.697
> 
> 标签：c++, casting

目前我有一个排序功能：

```
bool operator()( CVParent* lhs, CVParent* rhs ) 
{
  double dFirstValue  = reinterpret_cast< CVChild * >( lhs )->GetValue( m_lFeature );
  double dSecondValue = reinterpret_cast< CVChild * >( rhs )->GetValue( m_lFeature );
  ....
} 
```

现在 type-id 被硬编码为 CVChild* 但它可以是一个参数吗？我不想为 CVParent 的每个派生类编写一个函数。

编辑：我根据 Rost 的建议进行了更改：

```
class Compare_Functor
{
public:

    Compare_Functor( const long& lFeature, const bool& bIsAscending )
    {
        m_lFeature = lFeature;
        m_bIsAscending = bIsAscending;
    }

    template <class T> 
    bool operator()( CVParent* lhs, CVParent* rhs ) 
    {
      double dFirstValue  = reinterpret_cast< T * >( lhs )->GetValue( m_lFeature );
      double dSecondValue = reinterpret_cast< T * >( rhs )->GetValue( m_lFeature );
      ....
    }

private: 

    long m_lFeature;
    bool m_bIsAscending;
} 
```

当前用法（如何修改 stl 排序函数调用？）：std::sort( m_pList, m_pList+GetCOunt(), Compare_Functor(lFeature, TRUE) );

我修复了代码。谢谢大家的帮助！

```
template <class T>
class Compare_Functor
{
public:

    Compare_Functor( const long& lFeature, const bool& bIsAscending )
    {
        m_lFeature = lFeature;
        m_bIsAscending = bIsAscending;
    }

    bool operator()( CVParent* lhs, CVParent* rhs ) 
    {
      double dFirstValue  = reinterpret_cast< T * >( lhs )->GetValue( m_lFeature );
      double dSecondValue = reinterpret_cast< T * >( rhs )->GetValue( m_lFeature );
      ....
    }

private: 

    long m_lFeature;
    bool m_bIsAscending;
}

//Usage
std::sort( m_pList, m_pList+GetCOunt(), Compare_Functor<CChild>(lFeature, TRUE) ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T06:02:49.730

不可能将任何动态（仅在运行时已知）类型传递给`reinterpret_cast`. 它必须是静态的（在编译时已知）。

您可以使用其他答案中提到的模板，但是您需要为每个函数调用显式设置要转换的类型，因为编译器将无法从调用表达式中推断出它：

```
template <class T> struct Functor
{
   bool operator()(CVParent* lhs, CVParent* rhs) { ... }
};

CVParent p1, p2;
...

// Usage
Functor<CVChild1>().operator()(&p1, &p2);
Functor<CVChild2>().operator()(&p1, &p2);
Functor<CVChild3>().operator()(&p1, &p2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T05:51:34.123

您始终可以在实现中使用[模板](http://www.cplusplus.com/doc/tutorial/templates/)。

```
template <class Type>
bool operator()( CVParent* lhs, CVParent* rhs ) 
{
  double dFirstValue  = reinterpret_cast< Type * >( lhs )->GetValue( m_lFeature );
  double dSecondValue = reinterpret_cast< Type * >( rhs )->GetValue( m_lFeature );
  ....
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T06:16:50.323

我建议使用模板，但使用类模板，而不是函数模板。这将使在标准库算法和容器中使用更自然：

```
template <typename T>
struct CVFuntor 
{
  bool operator()( CVParent* lhs, CVParent* rhs ) const
  {
    double dFirstValue  = reinterpret_cast<T*>( lhs )->GetValue( m_lFeature );
    double dSecondValue = reinterpret_cast<T*>( rhs )->GetValue( m_lFeature );
    ....
  }
}; 
```

然后

```
typedef CVFunctor<CVChild> ParentToChild;
typedef CVFunctor<CVOtherChild> ParentToOtherChild;

....

ParentToChile p2ch;
bool b = p2ch(SomeParentPtr1, SomeParentPtr2); 
```

您应该重新考虑使用`reinterpret_cast`. 在我看来，检查调用`dynamic_cast`更适合这里：

```
T* t = dynamic_cast<T*>( lhs);
if (!t) return false; 
```

# php - 显示记录的sql条件

> ID：12471034
> 
> 赞同：-1
> 
> 时间：2012-09-18T05:44:09.373
> 
> 标签：php, mysql, sql, database, codeigniter

tbl_users

```
u_id | u_type | u_first_name
 1      U        I_am_user
 2      E        I_am_emp   
 3      E        I_am_emp2 
```

tbl_order

```
o_id | u_id | e_id | o_status | pay_status
  1     1       0    pending    Unpaid
  2     1       2    pick       Paid
  3     1       0    pending    Unpaid
  4     1       3    Pick       paid 
```

我试过这个查询来显示用户和员工姓名

```
SELECT o.*, a.u_first_name as user, b.u_first_name as emp
  FROM `tbl_order` AS o
       LEFT JOIN tbl_users AS a ON a.u_id = o.u_id 
       LEFT JOIN tbl_users AS b ON b.u_id = o.e_id

o_id | u_id | e_id |  user |  emp | pay_staus 
```

我们如何给条件（order by 或其他 1）先显示未付（`pay_status`）记录然后`e_id=0`记录然后全部休息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T06:06:13.860

试试这个：

```
select * from(
SELECT o.*, a.u_first_name as user, b.u_first_name as emp, 0 as rnk 
FROM `tbl_order` AS o
LEFT JOIN tbl_users AS a ON a.u_id = o.u_id 
LEFT JOIN tbl_users AS b ON b.u_id = o.e_id
where pay_status='Unpaid'    
union all
SELECT o.*, a.u_first_name as user, b.u_first_name as emp, 1 as rnk 
FROM `tbl_order` AS o
LEFT JOIN tbl_users AS a ON a.u_id = o.u_id 
LEFT JOIN tbl_users AS b ON b.u_id = o.e_id
where pay_status!='Unpaid' and    e_id=0
union all
SELECT o.*, a.u_first_name as user, b.u_first_name as emp, 2 as rnk 
FROM `tbl_order` AS o
LEFT JOIN tbl_users AS a ON a.u_id = o.u_id 
LEFT JOIN tbl_users AS b ON b.u_id = o.e_id
where pay_status!='Unpaid' and    e_id!=0)a
order by rnk 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T06:51:53.380

您的 from`WHERE`子句查询应该是这样的：

```
WHERE e_id = 0 OR pay_status = 'Unpaid'
ORDER BY pay_status DESC; 
```

所以你的整个查询应该是这样的：

```
SELECT o.*, a.u_first_name as user, b.u_first_name as emp
  FROM `tbl_order` AS o
       LEFT JOIN tbl_users AS a ON a.u_id = o.u_id 
       LEFT JOIN tbl_users AS b ON b.u_id = o.e_id
  WHERE e_id = 0 OR pay_status = 'Unpaid'
  ORDER BY pay_status DESC; 
```

**编辑：（**来自[OP的评论](https://stackoverflow.com/questions/12471034/sql-condition-to-display-record#comment16777075_12471764)）

如果要显示所有记录但按特定顺序，您只需要使用[`ORDER BY`](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)这样的子句：

```
ORDER BY pay_status DESC, e_id ASC; 
```

# xcode - 如何创建带有两个箭头的动画菜单？

> ID：12471039
> 
> 赞同：0
> 
> 时间：2012-09-18T05:44:29.077
> 
> 标签：xcode, button, menu, animated

我有一个带有两个箭头的动画菜单，一个在按钮的左侧，一个在按钮的右侧，箭头的方向是右箭头，左箭头是左箭头

我想当我单击右侧的箭头时显示另一个而不退出当前视图，左箭头相同，但他显示另一个按钮（选项）以供选择

当我单击右侧或左侧按钮时，我希望他向我展示带有动画的新按钮，当他更改按钮时，它看起来像火车动画

你能告诉我我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T05:50:36.323

您可以创建一个`UIScrollView`with`UIButtons`并将两个`UIButtons`左右滚动。您可以按照本教程进行操作 -

[http://blog.sallarp.com/iphone-sliding-menu/](http://blog.sallarp.com/iphone-sliding-menu/)

# wordpress - 将 www 重定向到非 www 作品适用于除根以外的所有 URL

> ID：12471040
> 
> 赞同：0
> 
> 时间：2012-09-18T05:44:34.707
> 
> 标签：wordpress, apache, .htaccess, mod-rewrite

我的 Apache htaccess 文件中有以下代码，用于将所有 www URL 重定向到 wordpress 上的非 www URL。这适用于除根以外的所有 URL。

例如，[http://www.noshon.it/recipes](http://www.noshon.it/recipes)正确重定向到[http://noshon.it/recipes](http://noshon.it/recipes)。但是，[http:](http://www.noshon.it) //www.noshon.it 错误地重定向到[http://noshon.it/wordpress](http://noshon.it/wordpress)（它会收到 404 页面）。

我无法弄清楚为什么除了根目录之外所有 ULR 都有效。任何帮助将非常感激。

```
RewriteEngine On   
RewriteCond %{HTTP_HOST} ^www\.noshon\.it$ [NC]  
RewriteRule ^(.*)$ http://noshon.it/$1 [R=301,L]  
RewriteBase /  
RewriteRule ^index\.php$ - [L]  
RewriteCond %{REQUEST_FILENAME} !-f  
RewriteCond %{REQUEST_FILENAME} !-d  
RewriteRule . /index.php [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T14:26:13.057

感谢@WebChemist 建议重定向发生在另一个文件中。我在 Bitnami EC2 实例的 /opt/bitnami/apps/wordpress/conf/ 目录中找到了一个名为 wordpress.conf 的文件。该文件具有以下代码：

```
# App url moved to root
DocumentRoot "/opt/bitnami/apps/wordpress/htdocs"
#Alias /wordpress/ "/opt/bitnami/apps/wordpress/htdocs/"
#Alias /wordpress "/opt/bitnami/apps/wordpress/htdocs"

<Directory "/opt/bitnami/apps/wordpress/htdocs">
    Options Indexes MultiViews +FollowSymLinks
    AllowOverride All
    Order allow,deny
    Allow from all
    RewriteEngine On
    #RewriteBase /wordpress/
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . index.php [L]
<//Directory>

# Uncomment the following lines to see your application in the root
# of your URL. This is not compatible with more than one application.
RewriteEngine On
RewriteRule ^/$ /wordpress/ [PT] 
```

重写发生在该文件的最后一行：

```
RewriteRule ^/$ /wordpress/ [PT] 
```

我将此文件修改为以下内容，并且重定向现在可以正常工作：

```
# App url moved to root
DocumentRoot "/opt/bitnami/apps/wordpress/htdocs"
#Alias /wordpress/ "/opt/bitnami/apps/wordpress/htdocs/"
#Alias /wordpress "/opt/bitnami/apps/wordpress/htdocs"

<Directory "/opt/bitnami/apps/wordpress/htdocs">
    Options Indexes MultiViews +FollowSymLinks
    AllowOverride All
    Order allow,deny
    Allow from all
    RewriteEngine On
    #RewriteBase /wordpress/
    RewriteBase /
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . index.php [L]
<//Directory>

# Uncomment the following lines to see your application in the root
# of your URL. This is not compatible with more than one application.
#RewriteEngine On
#RewriteRule ^/$ /wordpress/ [PT] 
```

# node.js - 支持布局和部分的节点表达模板引擎

> ID：12471043
> 
> 赞同：4
> 
> 时间：2012-09-18T05:44:59.167
> 
> 标签：node.js, express, template-engine

有没有做模板的好方法（允许我写 html - 不是玉），这将支持布局和部分？

我只能使用 ejs 和 express-partials npm 插件来获得这种行为。但是我觉得 ejs 网站已经过时并且没有得到很好的支持。

我正在寻找好的例子。

例如，我想创建一个包含页眉和页脚的主布局，并为导航包含一个单独的模板。

Knockoutjs 看起来得到了很好的支持，但我找不到很多将它与 express 一起使用的示例。

更新：我从 LinkedIn 对 js 模板的评估中发现了一篇非常好的文章：http: [//engineering.linkedin.com/frontend/client-side-templating-throwdown-mustache-handlebars-dustjs-and-more](http://engineering.linkedin.com/frontend/client-side-templating-throwdown-mustache-handlebars-dustjs-and-more)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T12:58:21.483

您可以使用 EJS 中的“包含”功能轻松模仿这一点。它不像 Express 2.x 中的布局那样优雅，但它适用于您只需要页眉和页脚以及不需要使用 Jade 的简单场景。

基本上，您可以创建两个“布局”页面（layoutTop.ejs 和 layoutBottom.ejs）并手动将它们包含在每个页面上。

**我的页面.ejs**

```
include layoutTop
html for my page.ejs goes here
include layoutBottom 
```

（无耻插件）可以看这里更详细的解释：http: [//hectorcorrea.com/Blog/Using-layouts-with-EJS-in-Express-3.x](http://hectorcorrea.com/Blog/Using-layouts-with-EJS-in-Express-3.x)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T08:39:26.257

我已经决定将 visionmedia 的 ejs 与 ejs-locals 一起用于布局、包含和块。

[https://github.com/RandomEtc/ejs-locals](https://github.com/RandomEtc/ejs-locals) https://github.com/visionmedia/ejs

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T06:35:47.823

试试 twigjs。很符合你的描述。

[https://github.com/fadrizul/twigjs](https://github.com/fadrizul/twigjs)

但是 ejs 也不会在不受支持的情况下寻找我。我认为这甚至是解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T15:30:20.223

试试[车把](http://handlebarsjs.com/)。

您可以将它与[加热板](https://github.com/thlorenz/hotplates)一起使用，以自动解析您的模板。

它还支持重用您的部分客户端。

# azure - 有关使用 Active Directory 实施 azure ACS 的示例或分步教程

> ID：12471044
> 
> 赞同：1
> 
> 时间：2012-09-18T05:45:00.400
> 
> 标签：azure, active-directory, asp.net-mvc-4, acs

我正在寻找有关如何使用 Active Directory 实现 Azure ACS 的 ASP.NET (MVC)、C# 示例或分步教程。

感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T05:49:37.717

下面是两个简单的建议

1.  [堆栈答案](https://stackoverflow.com/a/6061903/1557322)
2.  [微软模式和实践](http://claimsid.codeplex.com/)

# ios - CoreBluetooth 框架是否支持请求 Blob 读取？

> ID：12471047
> 
> 赞同：1
> 
> 时间：2012-09-18T05:45:13.350
> 
> 标签：ios, core-bluetooth, bluetooth-lowenergy

蓝牙 4.0 的核心规范定义了 GATT 过程 Read Long Characteristic Values，用于请求一个长于 ATT_MTU - 1 字节限制的特征值。

CoreBluetooth（和iOS）是否支持此功能？外围设备是 TI CC2541 开发套件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:12:27.503

是的，iOS6 无论如何都支持它——如果您请求读取设置为超过 20 个字节的字符，那么 iOS 将返回更长的数据。

# php - 如何清除内容 使用按钮

> ID：12471050
> 
> 赞同：0
> 
> 时间：2012-09-18T05:45:40.357
> 
> 标签：php, mysql, html

我已经编写了 php 代码来将数据从数据库检索到网页中的 div。我有另一个具有提交按钮的表单，当我单击该按钮时，该按钮将执行检索数据库值的功能，并且该值将显示在一个部门中. 我在部门中有以下代码如何使用按钮清除它。

这是从以前的表单提交值时检索的 php 代码

```
 <div id="result" style="margin-left:10px;">
<?php
    mysql_connect("localhost", "root") or die (mysql_error ());
    mysql_select_db("theaterdb") or die(mysql_error());
    $strSQL =("SELECT theater_name,address FROM theaters WHERE theater_name='" . mysql_real_escape_string($_POST['course']) . "'");
    $rs = mysql_query($strSQL);
    while($row = mysql_fetch_array($rs)) {
    echo "<b>Theater Name:</b><br>";
    echo $row['theater_name'] . "<br /><br /><br />";
    echo "<b>Theater Address:</b><br>";
    echo $row['address'] . "<br />";
     }
     mysql_close();
    ?> 
```

我有一个按钮的以下 HTML 代码

```
<form method="post">
<input type="reset" value="reset" />
</form> 
```

我正在使用这个按钮。当我点击这个按钮时，它应该清除部门的内容，如何做到这一点..谁能帮助我....

提前致谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T05:56:47.420

如果你有它，你可以用 jQuery 来做

```
$('input[type="reset"]').on('click', function(e){
    e.preventDefault();
    $('#result').empty();
}) 
```

示例：[jsFiddle](http://jsfiddle.net/EwpkB/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T06:06:12.427

重置按钮无法清除`DIV`内容。您可以使用表单提交事件来完成。在普通的 javascript 中，它应该是这样的：

```
<script>
function clear_div() {
    document.getElementById("result").innerHTML = "";
}
</script>

<div id="result"></div>
<form method="POST" action="process.php" onsubmit="clear_div()">
<input type="submit"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T05:54:52.530

使用 jQuery：

```
$("form").submit(function(e){
 e.preventDefault();
 $("#result").empty();
}); 
```

# eclipse - Eclipse 在项目资源管理器中显示大量不相关的文件

> ID：12471051
> 
> 赞同：0
> 
> 时间：2012-09-18T05:45:46.220
> 
> 标签：eclipse

我是 Eclipse 新手，在 Visual Studio 和 XCode 中进行了大量开发。

当我在源代码树中创建 C++ 项目时，项目资源管理器会显示该文件夹和子文件夹中的所有文件。但是有很多我不想看到的不相关的文件。

在 Visual Studio 和 XCode 中，我必须手动将源代码链接到项目。这使我能够控制项目的混乱。默认情况下，非项目文件是“隐藏的”，因为它们没有添加到项目中。在 Eclipse 中，默认情况下会添加所有内容。您似乎无法将文件系统的存储与您在项目资源管理器中看到的视图分离。

此外，我的树中有一堆源代码，我不想将其编译为该项目的一部分。因为它适用于不同的平台。如果不从文件系统中删除它们，我看不到如何从编译列表中删除这些文件。

阅读文档并没有多大帮助。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T00:52:47.437

此解决方案有 2 个部分。第一个文件名过滤器可以按照这篇文章中的描述定义： [Eclipse：如何在项目资源管理器中隐藏自定义文件](https://stackoverflow.com/questions/6137848/eclipse-how-to-hide-custom-files-in-project-explorer?rq=1)

第二个我不想编译的剩余文件可以通过右键单击它们和属性-> C++ 构建-> 从构建中排除资源来排除。

所以这更像是一个负空间的事情。在传统系统中，您必须显式地将代码添加到项目中。在 Eclipse 中，您必须从项目中显式地删除代码。我更喜欢旧方法，因为有时您想在磁盘上包含来自不同区域的代码，这只会使 eclipse 的全包模型中断。但我想当我到达时我会越过那座桥。*叹*

# php - 友好的网址 onChange()

> ID：12471053
> 
> 赞同：0
> 
> 时间：2012-09-18T05:45:49.450
> 
> 标签：php, mod-rewrite

我通过 mysql 查询填充表单选择的选项。

结果看起来像这样：

```
<form method="get" action="">

  <select name="recordlabel" onChange="submit()">
    <option selected="selected"></option>
    <option value="1">COLUMBIA</option>
    <option value="2">SONY</option>
    <option value="3">EMI</option>
  </select>

</form> 
```

当我选择一个选项时，它会自动提交表单，如下所示：

```
http://www.mysite.com/?recordlabel=3 
```

我想要的是使用友好的网址，应该是这样的：

```
http://www.mysite.com/recordlabel/emi.3

http://www.mysite.com/recordlabel/columbia.1 
```

现在，我知道我需要使用 mode_rewrite ......我没有问题，看起来像这样：

```
RewriteRule ^/recordlabel/.*\.([0-9]+)$ /mysite.com?recordlalel=$1 [L] 
```

我不明白的部分是如何格式化字符串，使其看起来像一个友好的 url onChange() 我如何实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T05:50:24.903

您需要使用 javascript 来提交表单，而不是依赖本机提交。

如果你使用 jQuery，你可以这样做（未经测试）：

```
$("form").submit(function(e){
  e.preventDefault();
  var formData = $(this).serialize();
  $.get('/recordlabel/'+formData.recordLabel', function(data){
   //do something with response data.
  });
}); 
```

# algorithm - 证明 n^k = Ω(c^n)

> ID：12471054
> 
> 赞同：-1
> 
> 时间：2012-09-18T05:45:55.877
> 
> 标签：algorithm, big-o

我们如何证明

**n^k = Ω(c^n)**

我试图按照定义去做

**n^k >= 某个常数 * c^n**

但我无法为常数获得任何价值。我的意思是我无法正确解决问题

****编辑****

对不起，功能应该是错误的

**n^k = O(c^n)**

那么我面临的主要障碍是使用定义计算常数的值。

从定义开始：

第 1 步：**n^k<= p* (c^n)**

第 2 步：**(n^k/c^n)<= p**

我被困在这里。我试图区分这些功能，因为**n-> infinity**它的**无穷大/无穷大**形式，但我仍然无处可去！

证明方程

**n^k = O(c^n)**

除了尝试获取常量的值之外，我们还可以使用哪些方法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T07:26:53.783

好吧，如果你区分 k 次的分子和分母，`n^k / c^n`你会得到你想要的：

```
k! / (ln c)^k * c^n   ->    0  when n-> Inf 
```

所以不仅

```
n^k = O(c^n) 
```

但即使

```
n^k = o(c^n) 
```

# elasticsearch - 我应该在elasticsearch的boost领域打多少分

> ID：12471057
> 
> 赞同：1
> 
> 时间：2012-09-18T05:46:11.007
> 
> 标签：elasticsearch

在我的文档中，我有一个名为 Tag 和 SuperTag 的字段。每当标签匹配时，它都会提高一些分数，但如果在 SuperTag 上匹配，它将显着提高，使其成为第一选择。在您看来，我应该在 Tag 和 SuperTag 的 boost 字段中添加什么值？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:13:44.950

这很难回答，这在很大程度上取决于字段包含的数据和它们拥有的分析器。

显然，如果两者的数据几乎相同，我会将 supertag 字段的提升设置为`2.0`.

如果他们不保存相同的数据，我们可以想象这样的场景：

```
{tag: 'tagnice tagnice tagnice'}

{supertag: 'tagnice'} 
```

即使使用增强的超级标签，标签也可能更相关，因为`tf-idf`它给出了更高的分数。

例如，为了解决这个问题，将过滤器设置为两者的分析器将有所帮助。

如前所述，这在很大程度上取决于数据以及如何将其存储在 lucene 中。乍一看，在不知道那么多的情况下，将升压加倍是可行的。

# sql - 如何验证sql server中的数据？

> ID：12471062
> 
> 赞同：0
> 
> 时间：2012-09-18T05:46:40.057
> 
> 标签：sql, sql-server, database, database-administration

我有一个与 sql server 中的数据相关的问题。在我的数据库中，一些约束没有启用，即它们没有被检查，经过一段时间的处理，我们发现这个问题可以在不删除子行的情况下删除父行，这是一个问题。我使用查询启用了数据库中的所有约束

```
ALTER TABLE tbl_name CHECK CONSTRAINT ALL 
```

上面的查询在该数据库的所有表上执行，没有任何错误。但我担心的是它是否会起作用，如果它适用于现有数据，那么那些父表数据已被删除的数据会发生什么。

我想知道是否有任何方法可以验证整个数据库中不存在父记录的此类数据数据。有关于`270 constraint`包含`FOREIGN KEY AND UNIQUE KEY`. 我不想选择手动选项。

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T06:13:45.057

```
ALTER TABLE tbl_name CHECK CONSTRAINT ALL 
```

仅重新启用约束。重要的是，约束*不会*针对数据库中的现有数据进行检查（优化器也不信任它们）。如果您希望发生这种情况，您还需要指定`WITH CHECK`：

```
ALTER TABLE tbl_name WITH CHECK CHECK CONSTRAINT ALL 
```

（是的，这个词`CHECK`出现了两次）

如果执行此操作，并且存在孤立的子行（或其他无效约束），`ALTER TABLE`则将失败并显示错误消息。SQL Server 无法解决此问题 - 由您决定是 a) 删除孤立的行，还是 b) 以某种方式为它们重新创建合适的父行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T19:45:59.013

您还可以将“ON DELETE CASCADE”代码添加到外键的末尾，以防止孤立的子行持续存在。

这更像是一种“更好的实践”，而不是一个解决方案，但我相信 Damien_The_Unbeliever 已经回答了你的主要问题。

# php - 如何使用 Propel 检索具有所有功能的行？

> ID：12471065
> 
> 赞同：2
> 
> 时间：2012-09-18T05:47:05.703
> 
> 标签：php, mysql, symfony1, propel

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T03:02:29.927

我相信这是您想要的 SQl（无论如何似乎在我的[SQL Fiddle中工作）：](http://sqlfiddle.com/#!2/2a4f60/13/0)

```
SELECT car_id FROM
  (SELECT COUNT(car_id) AS feature_count, car_id FROM feature
    WHERE feature IN ('f1', 'f2', 'f3') GROUP BY car_id
  ) car_features
WHERE car_features.feature_count=3 
```

现在要在 Propel 中获得它，您需要执行以下操作：

```
$features = array("f1", "f2", "f3");
$featureCount = FeatureQuery::create()
  ->withColumn("COUNT(car_id)", "feature_count")
  ->add(FeaturePeer::FEATURE, $features, Criteria::IN)
  ->addGroupBy(CarPeer::ID);
$cars = CarQuery::create()
  ->addSelectQuery($featureCount, "car_features")
  ->where("car_features.feature_count = ?", sizeof($features))
  ->find(); 
```

# java - 带有正文内容的 Google API Java GET 请求

> ID：12471066
> 
> 赞同：0
> 
> 时间：2012-09-18T05:47:11.353
> 
> 标签：java, google-api, google-tasks-api

我的目标是为具有指定结果的 TASKLIST 请求 GoogleTaskAPI。它工作正常，如果我没有通过**requestBody**。但是我需要将*请求参数*传递给要返回的特定数量的结果。当我这样做时，它会创建新的任务列表，而不是列出。那么如何做到这一点呢？

我的代码：

```
 GoogleAccessProtectedResource access = new GoogleAccessProtectedResource(accessToken, httpTransport, jsonFactory, clientId, clientSecret, refreshToken);
    HttpRequestFactory rf = httpTransport.createRequestFactory(access);

    String endPointUrl = "https://www.googleapis.com/tasks/v1/users/@me/lists";
    String requestBody = "{\"maxResults\":3}";

    GenericUrl endPoint = new GenericUrl(endPointUrl);
    ByteArrayContent content = new ByteArrayContent("application/json", requestBody.getBytes());

    //Try 0: Works, But Retrieving all of my Tasklist, I need only 3
    //HttpRequest request = rf.buildGetRequest(endPoint);
    //-------

    //Try 1: Fails to retrieve
    //HttpRequest request = rf.buildGetRequest(endPoint);
    //request.setContent(content);
    //request.getContent().writeTo(System.out);
    //-------

    //Try 2: Fails to retrieve
    HttpRequest request = rf.buildRequest(HttpMethod.GET, endPoint, content);
    request.getContent().writeTo(System.out);
    //-------

    HttpResponse response = request.execute();
    String str = response.parseAsString();
    utils.log(str); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T13:46:56.280

`maxResults`是一个查询参数，不是请求参数，所以你可以把它放在url中：

```
String endPointUrl = "https://www.googleapis.com/tasks/v1/users/@me/lists?maxResults=3"; 
```

您还应该考虑使用 Java 客户端的 Tasks 接口来发出请求；它可能会更容易一些，因为它会为您处理 url 的详细信息：

[http://code.google.com/p/google-api-java-client/wiki/APIs#Tasks_API](http://code.google.com/p/google-api-java-client/wiki/APIs#Tasks_API)

# jquery - 将 jQuery 导入 Joomla

> ID：12471067
> 
> 赞同：11
> 
> 时间：2012-09-18T05:47:11.993
> 
> 标签：jquery, joomla, joomla2.5, joomla3.0, joomla3.1

我已经成为 Joomla 开发人员将近一年了。我每天都在努力将 jQuery 导入 joomla。Joomla 带有 mootools。当我导入 jQuery 时它崩溃了。此外，当我创建模块时，我必须将 jQuery 导入到每个模块中，这会使网站变慢。有时它会使整个网站崩溃。我希望 mootools 和 jquery 携手合作，这样我就可以同时使用它们而不会出现任何崩溃。

**将 jQuery 导入 Joomla 的最佳方法是什么？**是否有一个特定的地方应该进行导入以在整个站点范围内使用一个 jquery 库（**后端和前端**）？

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-18T09:16:46.150

这是我们用来确保只导入 1 个 jQuery 副本的代码。它只是检查 jQuery 是否已经被导入，如果没有，那么我们导入它:)

**Joomla 2.5**

```
<?php
  $app = JFactory::getApplication();
  if (!$app->get('jquery'))
  {
     $app->set('jquery', true);
     JFactory::getDocument()->addScript(JUri::root() . 'templates/template_name/js/jquery.js');
  }
?> 
```

**Joomla 3.x（无冲突模式）：**

```
JHtml::_('jquery.framework'); 
```

**Joomla 3.x（正常模式）：**

```
JHtml::_('jquery.framework', false); 
```

您需要将此代码插入到模板的*index.php*中，最好靠近顶部，以便您记住它的位置。如果您不想覆盖模板的*index.php*文件，那么您也可以开发一个小[插件](http://docs.joomla.org/Portal:Plugin_Development)

**更新：**

正如鲍比所说。很多扩展都包含他们自己的 jQuery 副本，其中很多不使用这种方法，因此会导致冲突。我所知道的是，任何优秀的开发人员都应该知道多个 jQuery 库会导致冲突，并且应该使用此代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-13T15:31:20.397

这是一个很棒的插件。

[http://extensions.joomla.org/extensions/core-enhancements/performance/jquery-scripts/18327](http://extensions.joomla.org/extensions/core-enhancements/performance/jquery-scripts/18327)

> 该插件旨在帮助清理和解决在 Mootools 库旁边使用 jQuery 实例时的前端和后端问题。
> 
> 开箱即用的功能
> 
> *   从 Google CDN 调用 jQuery 和 jQuery UI 库（有或没有协议）——但你也可以在本地进行，
> *   在 MooTools 调用完美兼容性之后放置 jQuery 库，
> *   在 jQuery 库调用旁边添加 noConflict() 代码，
> *   去除额外的 jQuery 和 jQuery UI 库，包括其他模块或插件添加的 noConflict() 调用，
> *   让您选择 jQuery UI 基本样式或自定义主题。
> 
> 你可以调整什么
> 
> *   在前端暂时禁用 MooTools 库，
> *   在网站的特定部分启用或禁用插件，从模板到单页，
> *   使用报告来获取有关插件引擎所做工作的反馈，
> *   添加或删除脚本和样式表，
> *   去除对页面进行修改留下的空白行，
> *   防止一些库被剥离，
> *   修改引擎默认的工作方式（不要添加或删除 noConflict() 代码...），

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T06:33:14.420

使用 Joomla！3.0 — 如果您已经尝试了那么长时间，您应该帮助使用[Joomla！JavaScript 工作组](http://docs.joomla.org/JavaScript_Working_Group)就是为解决这个问题而建立的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-09T19:00:15.907

在 Joomla 3.x 中，JApplication 不再从 JObject 扩展，这意味着当您想在 Joomla 2.5 和 Joomla 3.x 的扩展中使用相同的代码时，您必须编写 if 条件，例如

```
if (!version_compare(JVERSION, '3', 'ge') && !JFactory::getApplication()->get('jquery', false)) { 
```

否则会崩溃！！可以在这里找到一个示例[https://github.com/Digital-Peak/DPExtensions/blob/master/mod_dpslider/tmpl/default.php#L13](https://github.com/Digital-Peak/DPExtensions/blob/master/mod_dpslider/tmpl/default.php#L13)

# android - three.js - webgl 和画布渲染性能问题

> ID：12471074
> 
> 赞同：0
> 
> 时间：2012-09-18T05:47:45.543
> 
> 标签：android, iphone, three.js, html5-canvas

我用下面的代码创建了一个 3d 场景。

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>3d Model using HTML5 and three.js</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <style>
            body {
                font-family: Monospace;
                background-color: #f0f0f0;
                margin: 0px;
                overflow: hidden;
            }
        </style>
    </head>
    <body>

        <script src="three.min.js" type="text/javascript"></script>
        <script src="Curve.js" type="text/javascript"></script>
        <script src="TubeGeometry.js" type="text/javascript"></script>      
        <script src="Stats.js" type="text/javascript"></script>
        <script src="Detector.js" type="text/javascript"></script>

        <script>
        // variables
        var container, stats;

        var camera, scene, renderer, splineCamera, cameraHelper, cameraEye;

        var text, plane, tube, tubeMesh, parent;

        var targetRotation = 0;
        var targetRotationOnMouseDown = 0;

        var mouseX = 0;
        var mouseXOnMouseDown = 0;

        var windowHalfX = window.innerWidth / 2;
        var windowHalfY = window.innerHeight / 2;

        var binormal = new THREE.Vector3();
        var normal = new THREE.Vector3();

        init();                     
        animate();

        function init(){

            // container
            container = document.createElement( 'div' );
            document.body.appendChild( container );

            // info div
            info = document.createElement( 'div' );
            info.style.position = 'absolute';
            info.style.top = '10px';
            info.style.width = '100%';
            info.style.textAlign = 'center';
            //info.innerHTML = 'Drag to spin the cylinder<br/> You can identify cylinder face by clicking on it.</br>';         
            container.appendChild( info );

            // camera
            camera = new THREE.PerspectiveCamera( 60, window.innerWidth / window.innerHeight, 1, 10000 );
            camera.position.set(30,10,10);
            //camera.up = new THREE.Vector3( 0, 1, 1 );

            // scene            
            scene = new THREE.Scene();
            camera.lookAt(scene.position);

            // light            
            scene.add( new THREE.AmbientLight( 0x404040 ) );
            light = new THREE.DirectionalLight( 0xffffff );
            light.position.set( 0, 1, 0 );
            scene.add( light );

            // CONTROLS
            controls = new THREE.TrackballControls( camera );

            // Grid
            geometry = new THREE.Geometry();
            geometry.vertices.push( new THREE.Vector3( - 500, 0, 0 ) );
            geometry.vertices.push( new THREE.Vector3( 500, 0, 0 ) );

            for ( var i = 0; i <= 20; i ++ ) {

                line = new THREE.Line( geometry, new THREE.LineBasicMaterial( { color: 0x000000, opacity: 0.2 } ) );
                line.position.z = ( i * 50 ) - 500;
                scene.add( line );

                line = new THREE.Line( geometry, new THREE.LineBasicMaterial( { color: 0x000000, opacity: 0.2 } ) );
                line.position.x = ( i * 50 ) - 500;
                line.rotation.y = 90 * Math.PI / 180;
                scene.add( line );
            }

            // extrudePath, Helix Curve
            extrudePath = new THREE.SplineCurve3([
                                                new THREE.Vector3(0, 10, 10),
                                                new THREE.Vector3(10, 0, 10),
                                                new THREE.Vector3(10, 0, 0)
                                            ]);

            console.log(extrudePath);

            // Tube Geometry
            var segments = 50;
            var closed = false;
            var debug = true;
            var radiusSegments = 12;

            //alert('hello');                       
            var tube = new THREE.TubeGeometry(extrudePath, segments, 2, radiusSegments, closed, debug);

            // Tube Mesh
            tubeMesh = THREE.SceneUtils.createMultiMaterialObject( tube, [
                new THREE.MeshLambertMaterial({
                    color: 0xff00ff,
                    opacity: tube.debug ? 0.2 : 0.8,
                    transparent: true
                }),
                new THREE.MeshBasicMaterial({
                    color: 0x000000,
                    opacity: 0.5,
                    wireframe: true
            })]);

            parent = new THREE.Object3D();
            parent.position.y = 100;

            if ( tube.debug ) tubeMesh.add( tube.debug );
            //parent.add( tubeMesh );                   
            scene.add( tubeMesh );

            // projector
            projector = new THREE.Projector();

            // renderer
            //renderer = new THREE.CanvasRenderer();
            renderer = new THREE.WebGLRenderer( { antialias: true } ); 
            renderer.setSize( window.innerWidth, window.innerHeight );
            container.appendChild( renderer.domElement );               

            // stats
            stats = new Stats();
            stats.domElement.style.position = 'absolute';
            stats.domElement.style.top = '0px';
            container.appendChild( stats.domElement );

            document.addEventListener( 'mousedown', onDocumentMouseDown, false );
            document.addEventListener( 'mouseover', onDocumentMouseOver, false );
            document.addEventListener( 'touchstart', onDocumentTouchStart, false );
            document.addEventListener( 'touchmove', onDocumentTouchMove, false );               

            window.addEventListener( 'resize', onWindowResize, false );

        }           

        function onWindowResize() {

            camera.left = window.innerWidth / - 2;
            camera.right = window.innerWidth / 2;
            camera.top = window.innerHeight / 2;
            camera.bottom = window.innerHeight / - 2;
            camera.aspect = window.innerWidth / window.innerHeight;
            //camera.updateProjectionMatrix();
            renderer.setSize( window.innerWidth, window.innerHeight );

        }

        function onDocumentMouseDown( event ) {
            event.preventDefault();

            document.addEventListener( 'mousemove', onDocumentMouseMove, false );
            document.addEventListener( 'mouseup', onDocumentMouseUp, false );
            document.addEventListener( 'mouseout', onDocumentMouseOut, false );

            mouseXOnMouseDown = event.clientX - windowHalfX;
            targetRotationOnMouseDown = targetRotation;         
        }

        function onDocumentMouseMove( event ) {

            mouseX = event.clientX - windowHalfX;

            targetRotation = targetRotationOnMouseDown + ( mouseX - mouseXOnMouseDown ) * 0.02;

        }

        function onDocumentMouseUp( event ) {

            document.removeEventListener( 'mousemove', onDocumentMouseMove, false );
            document.removeEventListener( 'mouseup', onDocumentMouseUp, false );
            document.removeEventListener( 'mouseout', onDocumentMouseOut, false );

        }

        function onDocumentMouseOut( event ) {

            document.removeEventListener( 'mousemove', onDocumentMouseMove, false );
            document.removeEventListener( 'mouseup', onDocumentMouseUp, false );
            document.removeEventListener( 'mouseout', onDocumentMouseOut, false );

        }

        function onDocumentMouseOver( event ) {

            document.removeEventListener( 'mousemove', onDocumentMouseMove, false );
            document.removeEventListener( 'mouseup', onDocumentMouseUp, false );
            document.removeEventListener( 'mouseout', onDocumentMouseOut, false );

        }

        function onDocumentTouchStart( event ) {

            if ( event.touches.length === 1 ) {

                event.preventDefault();

                mouseXOnMouseDown = event.touches[ 0 ].pageX - windowHalfX;
                targetRotationOnMouseDown = targetRotation;

            }

        }

        function onDocumentTouchMove( event ) {
            if ( event.touches.length === 1 ) {
                event.preventDefault();
                mouseX = event.touches[ 0 ].pageX - windowHalfX;
                targetRotation = targetRotationOnMouseDown + ( mouseX - mouseXOnMouseDown ) * 0.05;
            }
        }

        function animate() {
            requestAnimationFrame( animate );
            render();
            update();
        }

        function update()
        {
            controls.update();
            stats.update();
        }

        function render() {             
            tubeMesh.rotation.y += ( targetRotation - tubeMesh.rotation.y ) * 0.15;         
            camera.updateMatrixWorld();
            renderer.render( scene, camera );
        }           

        </script>
    </body>
</html> 
```

现在，当我将渲染从 WebGL 更改为 Canvas 时，移动浏览器上的 FPS 从 56-57 FPS 下降到 1-2 FPS。本机浏览器在页面上不显示任何内容，并且在 Opera 页面中操作变得太慢。如何使用 Canvas 渲染快速进行页面操作，或者如何在移动浏览器上启用 webgl 渲染？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T14:17:19.867

画布渲染器仅是软件模式，这意味着没有 GPU 加速，CPU 必须完成所有艰苦的工作，这就是你的 fps 下降的原因。

AFAIK 并不是每个移动浏览器都能够使用 webgl 渲染器，你可以试试 opera mobile 它能够使用 webgl。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T07:24:42.540

加快画布渲染的一种方法是减少 TubeGeometry 中使用的段数

# jquery - 悬停效果在 IE 浏览器中无法正常工作

> ID：12471077
> 
> 赞同：0
> 
> 时间：2012-09-18T05:47:48.517
> 
> 标签：jquery, html, internet-explorer, css

我正在使用 css 为精灵图像提供悬停效果（更改背景位置），它在火狐中工作正常，但在 IE 浏览器中工作正常，我需要在下面的代码中添加什么？

```
.social ul li { width:32px; height:32px; float:left; margin:10px 10px 0px 0px;
padding:20px 0px;}
.social ul li:last-child { margin:0px}
.social ul li.twitter a{ background:url(../images/grey_bg_sprite.png) no-repeat 0px
-192px; width:32px; height:32px;}
.social ul li.twitter a:hover {background:url(../images/grey_bg_sprite.png) no-repeat 0px
-226px; width:32px; height:32px; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T23:09:15.267

根据 IE 的版本，如果您`<a>`没有包含非空字符串的 href，则 a:hover 将不起作用。所以，如果你的 a 看起来像这样： `<a class="foo">Bar</a>`那么它需要有一个这样的 href： `<a href="#" class="foo">Bar</a>` 旧版本的 IE 不会认为它是没有填充 href 属性的有效锚标记，因此会忽略 :hover 伪类。

# java - 没有参数的方法不适用于eclipse java

> ID：12471079
> 
> 赞同：0
> 
> 时间：2012-09-18T05:48:03.477
> 
> 标签：java, eclipse, compiler-construction, jvm, openjdk

> **可能重复：**
> ['java.lang.NoSuchMethodError：线程“main”中的主要异常'的原因](https://stackoverflow.com/questions/5407250/causes-of-java-lang-nosuchmethoderror-main-exception-in-thread-main)

我遇到了一个问题，当我在 Eclipse 中键入以下代码时，出现错误“线程“main”中的异常 java.lang.NoSuchMethodError: main”

```
public class Hello {

    public void main() {

System.out.println("Hello world!");
    }

} 
```

这是我第一次使用 eclipse，我想看看它是什么样的。我正在使用带有 java-6-openjdk-i386 的 ubuntu 12.04

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T05:49:23.583

你需要使用：

```
public static void main(String[] args) {
    System.out.println("Hello world!"); 
} 
```

或等效地：

```
public static void main(String... args) {
    System.out.println("Hello world!"); 
} 
```

# nullpointerexception - EntityManager 注入在 websphere 7.0.0.17 中失败，但在 7.0.0.0 中同样有效

> ID：12471080
> 
> 赞同：1
> 
> 时间：2012-09-18T05:48:18.413
> 
> 标签：nullpointerexception, websphere, entitymanager

我在 websphere 7.0.0.0 中成功运行应用程序，但在 websphere 7.0.0.17 中失败。我正在使用@PersistenceContext 注入实体管理器。当我尝试使用 entitymanager 时，它会抛出 NullPointerException。但是相同的代码在 Websphere 7.0.0.0 中成功运行。我在 websphere 中使用 JTA 和定义的数据源。我的 DAO 是从另一个无状态 bean 调用的无状态 bean（DAO 在此处注入）。调用 SLSB 的方法和 DAO 方法都在 Trasaction 范围内运行（Transaction.Supported）。我正在使用 openJPA 1.1（默认为 websphere 7）。

我尝试将 websphere 运行时更新到最新的 7.0.0.23 但没有用，每当我尝试注入实体管理器时它仍然会抛出 Nullpointer 异常。

任何帮助都感激不尽。

# python - 将东西放入新的函数属性是不好的做法吗？

> ID：12471081
> 
> 赞同：3
> 
> 时间：2012-09-18T05:48:24.140
> 
> 标签：python

假设我有一个类和一个函数：

```
class AddressValidator(self):
    def __init__(self):
        pass
    def validate(address):
        # ...

def validate_address(addr):
    validator = AddressValidator()
    return validator.validate(addr) 
```

如果您愿意，该函数是使用该类的快捷方式。现在，如果这个函数必须运行数千次怎么办？如果验证器类实际上必须在实例化时做一些事情，比如连接到数据库，那么一遍又一遍地创建它是非常浪费的。我想知道我是否可以做这样的事情：

```
def validate_address(addr):
    if not hasattr(validate_address, 'validator'):
        validate_address.validator = AddressValidator()

    validator = validate_address.validator
    return validator.validate(addr) 
```

现在验证器类只被实例化一次并保存在“函数中”，也就是说。不过，我从未见过这样做，所以我猜这是不好的做法。如果是这样，为什么？

*注意：我知道我可以将验证器对象缓存在全局模块中。当我想避免乱扔模块时，我只是好奇这是否是一个可行的解决方案。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T05:52:43.547

我会使用默认参数（在函数定义时评估一次并绑定到函数）：

```
def validate_address(addr, validator=AddressValidator())
    return validator.validate(addr) 
```

如果 的实例`AddressValidator`被认为是不可变的（即它们不包含修改其内部状态的方法），这是完全可以接受的，并且它还允许您稍后在发现需要时覆盖验证器的选择（例如，提供专门的验证器特定国家）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T06:04:36.223

尽管“一切都是对象”，但一切都不像受良好控制的类的实例那么好。这个问题看起来像是在 python 中调用的“[函子](http://en.wikipedia.org/wiki/Function_object)”或“[可调用对象”的典型情况。](http://docs.python.org/reference/datamodel.html#emulating-callable-objects)

代码看起来像

```
class AddressValidator(self):
    def __init__(self):
        pass
    def __call__(self,address):
        # ...

validate_address = AdressValidator() 
```

或者您可以将您的函数定义为绑定方法的快捷方式

```
class AddressValidator(self):
    def __init__(self):
        pass
    def validate(self,address):
        # ...

validate_adress = AdressValidator().validate 
```

# algorithm - 寻找丢失的号码？

> ID：12471082
> 
> 赞同：-4
> 
> 时间：2012-09-18T05:48:31.193
> 
> 标签：algorithm

我遇到了这个非常有趣的问题？我有 3 亿个 SSN 号码（9 位号码）

找到丢失的 SSN 号码？

您有无限的驱动器空间，但只有 2MB 的 RAM？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T06:48:58.587

假设只有一个元素丢失.. 由于我们有内存限制，我们需要将文件部分加载到内存中，因此划分给定文件 3*10pow(8)/2MB 并将以下方法应用于部分文件（从外部排序借用的技术）。该技术很简单 XOR 所有元素。基本概念来自汉明码。如果我们对从 1 到 2power(n-1) 的所有元素进行异或运算，结果应该等于零。如果缺少元素，则结果将是缺少数字。

在忙碌的方法中：我们还可以应用从 1 到 n 的自然数的算术和，即 n(n+1)/2，然后在一次遍历中计算给定数组的总和并找到 n(n+1)/2 之间的差并获得总和。它应该给出缺失的数字。由于十亿数字的总和是一个非常大的数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T06:36:07.117

让我们首先分析一个较小的问题。假设您有 9 个唯一的 1 位数字，并且您正试图找到丢失的那个。您可以做的是将 10 个唯一的 1 位数字相加：

0 + 1 + 2 + 3 + 4 + 5 + 6 + 7 + 8 + 9 = 45

然后，您可以将您拥有的 9 个数字相加并减去差值以找到缺少的数字。可以将相同的策略应用于您的问题，但问题在于找到总和，因为如果可能的话，您不想手动进行。

让我们看一下 100 个唯一的 2 位数字的情况：

前 10 个数字 = 45（如上图）

接下来的 10 个数字都将有一个额外的 10 + 1 位数字值，给我们一个 145 的结果。接下来的 10 个，每个都有一个额外的 20 -> 245，依此类推，直到我们得到最后 10 个具有总和的数字945。我们将这些加在一起得到 4950。

现在，让我们寻找与数字数量相关的模式。

1 位 = 45（那里没有太多内容，但它确实提供了一个额外的数据点来验证）

2 位数 = 4950

让我们回想一下我们是如何添加数字的，首先看 2 位数的情况可能更容易。

让我们将 x 称为 1 到 9 中最左边的数字。我们会将先前位数的答案添加到 10 *（x -> 之后有 1 个零，如果是 2 位数的解决方案。）所以在这里我们可以再次利用我们找到的 1 位数的答案并看到10 * 10 + 20 * 10 + 30 * 10 + 40 * 10 + 50 * 10 + 60 * 10 + 70 * 10 + 80 * 10 + 90 * 10 = 10 * (10 + 20 + 30 + 40 + 50 + 60 + 70 + 80 + 90) = 100 * (1+2+3+4+5+6+7+8+9) = 100 * 45 = 4500。然后我们也有 45 十次，所以得到我们 450。4500 + 450 = 4950。

现在，是时候推广到递归方程了。

所有 n 位唯一数字的总和 =

1（后面有 n 个零）* ans(n-1) + 1（有 n-1 个零）* ans(n-1) + 1（有 n-2 个零）* ans(n-2) ... 10 * 45 + 1 * 0

我已经完成了进一步的分解，但我希望我说清楚了，这也能用一些数学乐趣回答你的问题！

# django - 视图 customer_reg.views.Set_Checkout_Attributes 未返回 HttpResponse 对象

> ID：12471083
> 
> 赞同：1
> 
> 时间：2012-09-18T05:48:39.320
> 
> 标签：django, django-templates, django-views

我正在制作一个应用程序，在用户注册后，他会参考一个页面，在该页面上他可以单击一个链接来填写另一个订单详细信息。当我单击该链接时，以下视图处于活动状态

```
def Checkout_Attributes(request):

    check_form = Check_Attribute_Form()
    context={'check_form':check_form}
    return render_to_response('checkout.html',context,context_instance=RequestContext(request)) 
```

提交表单后，以下视图处于活动状态

```
def Set_Checkout_Attributes(request):

    #if request.user.is_authenticated():
        #return HttpResponseRedirect('/checkout/')

    if request.method == 'POST':
        check_form = Check_Attribute_Form(request.POST)
            if check_form.is_valid():
            customer_check=Customer_check_attributes(billing_add=check_form.cleaned_data['billing_add'],shipping_add=check_form['shipping_add'],payment_method=check_form['payment_method'],shipping_method=check_form['shipping_method'],reward_points=check_form['reward_points'])
            customer_check.save()
            return render_to_response('sucess.html')
    else:
        check_form=Check_Attribute_Form()
        return render_to_response('a.html',{'check_form':check_form} , context_instance=RequestContext(request)) 
```

在这个视图中，我收到**Set_Checkout_Attributes 的错误，没有返回 HttpResponse 对象。**

还有一件事，当我提交空白表单时，它没有显示验证错误

模板是

```
<form action="/checkout1/" method="post">
{% csrf_token %}
{% if check_form.errors  %}<h2>Please correct the following fields:</h2>{% endif %}
<div class="register_div">
        {% if check_form.billing_add.errors %}<p class="error">{{ check_form.billing_add.errors }}</p>{% endif %}
    <p><label for="billing_add" {% if check_form.billing_add.errors %} class="error"{% endif %}>Billing Address:</label></p>
    <p>{{ check_form.billing_add }}</p>
</div>
.
.
.
.
.
<p><input type="submit" value="submit" aly="register"/></p>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T06:35:55.353

首先，请为您的变量和视图使用正确的 PEP-8 名称。

其次，不要在成功时呈现模板 - 重定向到新页面。

最后，想想你的观点的逻辑。表格无效时会发生什么？在那种情况下返回什么？再次查看文档中的示例，它准确显示了您应该使用的结构。

# ruby-on-rails - 文件 routes.rb 中的 rails 语法问题

> ID：12471085
> 
> 赞同：0
> 
> 时间：2012-09-18T05:48:51.383
> 
> 标签：ruby-on-rails, rails-routing

我的文件夹具有以下结构：root 是 /home3/username

我的网络应用程序位于 rails_apps/my_app/ 下，因此我的视图位于 rails_apps/my_app/app/views 下

```
username@company.com [~]# ls -la rails_apps/my_app/app/views/
total 24
drwxr-xr-x 6 username username 4096 Sep 17 00:48 ./
drwxr-xr-x 8 username username 4096 Sep 13 23:13 ../
drwxr-xr-x 2 username username 4096 Sep 17 01:51 home/
drwxr-xr-x 2 username username 4096 Sep 15 08:47 layouts/
drwxr-xr-x 2 username username 4096 Sep 17 00:00 projects/
drwxr-xr-x 2 username username 4096 Sep 17 00:49 scenarios/

username@company.com [~]# ls -la rails_apps/my_app/app/views/home/
total 16
drwxr-xr-x 2 username username 4096 Sep 17 01:51 ./
drwxr-xr-x 6 username username 4096 Sep 17 00:48 ../
-rw-r--r-- 1 username username  311 Sep 17 00:14 index.html.erb
username@company.com [~]# 

username@company.com [~]# cat rails_apps/my_app/app/views/home/index.html.erb
<center><h1>my_app</h1></center>
<html>
  <head>
  </head>
  <body>
    <form action = "/projects">
      <br>
      <input type="submit" value="Manage Projects" />
    </form>
    <form action = "/scenarios">
  <br>
      <input type="submit" value="Manage Scenarios" />
    </form>
  </body>
</html>
username@company.com [~]# 
```

这是我的 rails_apps/my_app/config/routes.rb 文件

```
My_app::Application.routes.draw do

  resources :scenarios

  resources :projects do
    collection do
      get :update_fields
      get :annual_production
    end
  end

  get "home/index"

  match ':controller(/:action(/:id(.:format)))'

  root :to => 'home#index'

end 
```

这样，我的 Web 应用程序可以正确显示文件 rails_apps/my_app/app/views/home/index.html.erb 的内容，但是当我单击“管理项目”按钮时，它会生成此错误

```
Internal Server Error

The server encountered an internal error or misconfiguration and was unable to complete your request.

Please contact the server administrator, webmaster@my_app.company.com and inform them of the time the error occurred, and anything you might have done that may have caused the error.

More information about this error may be available in the server error log.

Additionally, a 500 Internal Server Error error was encountered while trying to use an ErrorDocument to handle the request.

Apache Server at my_app.company.com Port 80 
```

我相信这是一个路由问题，因为我有另一个与这个非常相似的网络应用程序，除了它直接在根目录下，而这个在 rails_apps 文件夹下，但我似乎无法修复它。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T05:56:36.810

我认为您的表单会将您带到项目控制器的创建操作，因为默认情况下，表单将发出发布请求。

您可能想尝试这样的事情，它会告诉表单发出获取请求，这应该会将您带到索引操作。

```
<%= form_tag projects_path, :method => :get do %>
  <%= submit_tag "Manage projects" %>
<% end %> 
```

但如果我是你，我可能只是使用一个链接并将它的样式设置为使用 css 的按钮。

# c# - 如何将两个gridview文本框值传递给javascript函数

> ID：12471086
> 
> 赞同：1
> 
> 时间：2012-09-18T05:48:51.290
> 
> 标签：c#, javascript, asp.net

嗨，我是 javascript 新手，

我的问题是我有一个简单的日期检查功能如下

```
function CompareDates(str1, str2) 
   {
          var dt1 = parseInt(str1.substring(0, 2), 10);
          var mon1 = parseInt(str1.substring(3, 5), 10);
          var yr1 = parseInt(str1.substring(6, 10), 10);
          var dt2 = parseInt(str2.substring(0, 2), 10);
          var mon2 = parseInt(str2.substring(3, 5), 10);
          var yr2 = parseInt(str2.substring(6, 10), 10);
          var date1 = new Date(yr1, mon1, dt1);
          var date2 = new Date(yr2, mon2, dt2);

          if (date2 < date1) {
                alert("To date cannot be greater than from date");
                return false;
          }
          else
          {
                return true;
          } 

      } 
```

**在网格视图中**

```
 <asp:TemplateField HeaderText="Start Dtae">
                           <ItemTemplate>
                                        <asp:TextBox ID="txtStartDate" runat="server" Text='<%# Bind("StartDate") %>'></asp:TextBox>
                                        <asp:CalendarExtender ID="txtStartDate_CalendarExtender" runat="server" Format="dd/MM/yyyy"                 Enabled="True" TargetControlID="txtStartDate"></asp:CalendarExtender>
                            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="End Dtae">
                           <ItemTemplate>
                                        <asp:TextBox ID="txtEndDate" runat="server" Text='<%# Bind("EndDate") %>' **onchange="CompareDates(txtStartDate.Text,this.Text)**;" ></asp:TextBox>
                                        <asp:CalendarExtender ID="txtEndDate_CalendarExtender" runat="server" Format="dd/MM/yyyy" Enabled="True" TargetControlID="txtEndDate">**strong text**</asp:CalendarExtender>
                           </ItemTemplate>
         </asp:TemplateField> 
```

网格是动态的，用户可以向其中添加任意数量的行。我需要检查日期，而不是在单击提交按钮时循环整个 gridview 行。txtenddate 的 onchange 我想传递两个文本框的值..

有谁能够帮我..

谢谢你..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T07:12:44.037

使用`GridView_RowDataBound`gridview 事件和属性，您可以附加 javascript`onchange`事件

```
void GridView_RowDataBound(Object sender, GridViewRowEventArgs e)
{

    if(e.Row.RowType == DataControlRowType.DataRow)
    {
        if(e.Item.ItemType == ListItemType.Item)
        {
            TextBox txtStartDate = e.Row.FindControl("txtStartDate") as TextBox;
            TextBox txtEndDate= e.Row.FindControl("txtEndDate") as TextBox;

            txtEndDate.Attributes.Add("onchange", "CompareDates('" + txtStartDate.ClientID+ "', '" +txtEndDate.ClientID+ "');");
        }
} 
```

}

在你的 javascript 函数中

```
function CompareDates(ctrlStartID, ctrlEndID) 
{ 
   var startDate = document.getElementByID(ctrlStartID).value; 
   var endDate = document.getElementByID(ctrlEndID).value; 
   //your further code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T06:25:39.993

您可以尝试以下代码

```
TextBox txtStartDate = yourGridViewName.SelectedRow.FindControl("txtStartDate") as TextBox;
TextBox txtEndDate = yourGridViewName.SelectedRow.FindControl("txtEndDate") as TextBox; 
```

然后你可以像往常一样获取文本：

```
 string startDate = txtStartDate.Text;
 string endDate = txtEndDate .Text; 
```

请考虑以下代码**未经测试**。您可以尝试 GridView 的 RowDataBound 事件来添加 JavaScript 功能

```
protected void yourGridView_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
         //Get TextBoxes
         TextBox txtStartDate = yourGridViewName.SelectedRow.FindControl("txtStartDate") as TextBox;
         TextBox txtEndDate = yourGridViewName.SelectedRow.FindControl("txtEndDate") as TextBox;

         //Get text
         string startDate = txtStartDate.Text;
         string endDate = txtEndDate .Text;

         //Assign the function
         e.Row.Attributes.Add("Onchange", "CompareDates('" + startDate + "', '" + endDate + "'");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T07:44:46.903

我建议您的最佳方法是添加 Row_DataBound 并在此事件中读取行并以编程方式添加更改事件。

无效客户GridView_RowDataBound（对象发件人，GridViewRowEventArgs e）{

```
if(e.Row.RowType == DataControlRowType.DataRow)
{
            Textbox text1 = ((Textbox )e.Row.FindControl("Textbox1"));
            Textbox text2 = ((Textbox )e.Row.FindControl("Textbox2"));
            text2 .Attributes.Add("onfocus", "EventName('"+text1 .Text+"','"+text1.Text+"')"+);

} 
```

}

# wireless - 如何区分来自具有相同IP地址的两个设备的数据并将它们无线转发到两个服务器？

> ID：12471094
> 
> 赞同：-1
> 
> 时间：2012-09-18T05:49:23.717
> 
> 标签：wireless, router

有两台设备有相同的IP地址（写在设备上，不能更改！；不是MAC地址！）。我想使用无线路由器从这两个设备接收数据并以无线方式将数据传递给两个服务器：数据从设备 A 到服务器 A，从设备 B 到服务器 B。问题是路由器不'由于IP地址相同，因此不知道到达路由器的数据来自哪个设备，因此不知道将数据转发到哪里。可能的解决方案可能是使用端口号或使用 VLAN？但我不知道如何准确地使用它。有谁知道如何解决这个问题？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T06:10:43.383

好吧，我不完全确定你所问的细节，但我会告诉你我所知道和观察到的。

在网络上拥有相同 IP 地址的两台设备会使一切变得混乱。最终可能会发生的是路由器一次只能识别一个。更糟糕的是，计算机将继续接管有问题的 IP 地址，因此最终在网络上可用的 IP 地址会经常变化（几秒钟到几分钟到几小时）。

最后，除非您有一些非常昂贵的路由器，否则我认为您无法使用现有的设置来做到这一点。如果不出意外，您需要第二台路由器，或者您可以连接两台服务器并使用 vlan（但如果您走那条路线，您需要记住各种事情）。最简单的解决方法是使用不同的原始 IP 地址。

# apache - SSL 的问题（Apache 和 Django）

> ID：12471095
> 
> 赞同：0
> 
> 时间：2012-09-18T05:49:31.117
> 
> 标签：apache, ssl

我似乎无法让 SSL 工作。我花了大约 15 个小时试图让我的网站使用 HTTPS。
我从 Comodo 获得了我的 SSL 证书。我按照[这些指示](https://support.comodo.com/index.php?_m=knowledgebase&_a=viewarticle&kbarticleid=1203&nav=0,96,1,95)。

我首先尝试在我的 ssl.conf 中编辑正确的字段，但最终我只是在我的 httpd.conf 中添加了另一个虚拟主机。但是，无论哪种方式都不允许我使用 https 访问我的网站。

我的网站是[foodchute.com](http://www.foodchute.com/)。我不知道该怎么做，过去几天我一直在玩弄 apache 和 ssl。任何帮助都是极好的。

旁注：我的证书链文件是否需要 PEM 编码？我的链文件仅包含 4 个证书。我查看了一些默认链文件，我看到了一堆证书以及其他信息，如下所示：

```
Certificate:

Data:
    Version: 3 (0x2)
    Serial Number:
        61:8d:c7:86:3b:01:82:05
    Signature Algorithm: sha1WithRSAEncryption
    Issuer: CN=ACEDICOM Root, OU=PKI, O=EDICOM, C=ES
    Validity
        Not Before: Apr 18 16:24:22 2008 GMT
        Not After : Apr 13 16:24:22 2028 GMT
    Subject: CN=ACEDICOM Root, OU=PKI, O=EDICOM, C=ES
    Subject Public Key Info:
        Public Key Algorithm: rsaEncryption
            Public-Key: (4096 bit)
            Modulus:
                00:ff:92:95:e1:68:06:76:b4:2c:c8:58:48:ca:fd:
                80:54:29:55:63:24:ff:90:65:9b:10:75:7b:c3:6a:
                db:62:02:01:f2:18:86:b5:7c:5a:38:b1:e4:58:b9:
                fb:d3:d8:2d:9f:bd:32:37:bf:2c:15:6d:be:b5:f4:
                21:d2:13:91:d9:07:ad:01:05:d6:f3:bd:77:ce:5f:
                42:81:0a:f9:6a:e3:83:00:a8:2b:2e:55:13:63:81:
                ca:47:1c:7b:5c:16:57:7 
```

这些是我的文件。httpd.conf

```
</VirtualHost>

<VirtualHost *:80>
    DocumentRoot /home/ec2-user/foodchute/foodchute
    ServerName www.foodchute.com
    #Redirect / https://23.23.93.154/
    ErrorLog /home/ec2-user/foodchute/foodchute/logs/apache_error.log
    CustomLog /home/ec2-user/foodchute/foodchute/logs/apache_access.log combined
    WSGIScriptAlias / /home/ec2-user/foodchute/foodchute/foodchute/wsgi.py

    <Directory /home/ec2-user/foodchute/foodchute/foodchute>
    <Files wsgi.py>
        Order deny,allow
        Allow from all
    </Files>
    </Directory>

    <Directory /home/ec2-user/foodchute/foodchute/images>
        Order deny,allow
        Allow from all
    </Directory>

    <Directory /home/ec2-user/foodchute/foodchute/foodchute>
        Order deny,allow
        Allow from all
    </Directory>

    #LogLevel warn

    #Alias /media/ /home/djangotest/helloworld/media

</VirtualHost>

<VirtualHost *:443>
    SSLEngine On
    SSLCertificateFile /etc/pki/tls/certs/foodchute.crt
    SSLCertificateKeyFile /etc/pki/tls/certs/foodchute.key
    SSLCertificateChainFile /etc/pki/tls/certs/foodchute.ca-bundle

    DocumentRoot /home/ec2-user/foodchute/foodchute
    ServerName www.foodchute.com
    #Redirect / https://23.23.93.154/
    ErrorLog /home/ec2-user/foodchute/foodchute/logs/apache_error.log
    CustomLog /home/ec2-user/foodchute/foodchute/logs/apache_access.log combined
    WSGIScriptAlias / /home/ec2-user/foodchute/foodchute/foodchute/wsgi.py

    <Directory /home/ec2-user/foodchute/foodchute/foodchute>
    <Files wsgi.py>
        Order deny,allow
        Allow from all
    </Files>
    </Directory>

    <Directory /home/ec2-user/foodchute/foodchute/images>
        Order deny,allow
        Allow from all
    </Directory>

    <Directory /home/ec2-user/foodchute/foodchute/foodchute>
        Order deny,allow
        Allow from all
    </Directory>

    #LogLevel warn

    #Alias /media/ /home/djangotest/helloworld/media

</VirtualHost>

WSGIPythonPath /home/ec2-user/foodchute/venv/lib/python2.6/site-packages

Alias /static/ /home/ec2-user/foodchute/venv/lib/python2.6/site-packages/django/contrib/admin/static/ 
```

wsgi.py

```
"""
WSGI config for foodchute project.

This module contains the WSGI application used by Django's development server
and any production WSGI deployments. It should expose a module-level variable
named ``application``. Django's ``runserver`` and ``runfcgi`` commands discover
this application via the ``WSGI_APPLICATION`` setting.

Usually you will have the standard Django WSGI application here, but it also
might make sense to replace the whole Django WSGI application with a custom one
that later delegates to the Django one. For example, you could introduce WSGI
middleware here, or combine a Django application with an application of another
framework.

"""
import os,sys

apache_configuration = os.path.dirname(__file__)
project = os.path.dirname(apache_configuration)
workspace = os.path.dirname(project)
sys.path.append(workspace)
sys.path.append('/home/ec2-user/foodchute/foodchute')
sys.path.append('/home/ec2-user/foodchute')

os.environ.setdefault("DJANGO_SETTINGS_MODULE", "foodchute.settings")

# This application object is used by any WSGI server configured to use this
# file. This includes Django's development server, if the WSGI_APPLICATION
# setting points here.
from django.core.wsgi import get_wsgi_application
application = get_wsgi_application()

# Apply WSGI middleware here.
# from helloworld.wsgi import HelloWorldApplication
# application = HelloWorldApplication(application) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T23:00:42.177

我解决了这个问题。我忘记为我的 amazon ec2 实例打开端口 423……问题解决了。

# python - 谷歌地图的 Python 包装器使 Google App Engine 崩溃？

> ID：12471103
> 
> 赞同：-1
> 
> 时间：2012-09-18T05:50:08.237
> 
> 标签：python, google-app-engine, google-maps

我目前正在尝试使用涉及使用 Google Maps API 的 Google App Engine 构建网络应用程序。因为我在 python 中编码，所以我尝试为谷歌地图导入 python 包装器（在[此处](http://pypi.python.org/pypi/googlemaps/)找到）；但是，执行导入会导致我的 Web 应用程序崩溃。有什么建议可以解决这个问题吗？我猜测崩溃可能与我需要将 google maps python 包装器合并到我的应用程序中这一事实有关，但我该怎么做呢？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:35:52.607

如果您无法调试当前问题，您是否考虑过通过直接网络电话使用它？

包装器似乎所做的只是让这样的调用更容易一些。

```
http://maps.google.com/maps/api/geocode/json?address=1600+Amphitheatre+Parkway,+Mountain+View,+CA&sensor=false 
```

这是我从那里获得该链接的地方，那里有更多信息。

[http://blog.notdot.net/2010/04/Using-the-Google-Maps-APIs-from-App-Engine](http://blog.notdot.net/2010/04/Using-the-Google-Maps-APIs-from-App-Engine)

# javascript - highcharts- php/mysql 数据获取

> ID：12471106
> 
> 赞同：0
> 
> 时间：2012-09-18T05:50:20.473
> 
> 标签：javascript, jquery, highcharts

我已经在另一个文件中回显了数据库中的数据。现在我正在获取数据。我是 jquery 和 highchart 的新手。请帮助我传递的数据格式是：

```
[
{"name":"a","data":0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49]},
{"name":"b","data":[34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49]}
] 
```

我的 highchart 代码是：

```
var chartOptions = {
    chart: {
        renderTo: 'container',
        zoomType: 'x',
        defaultSeriesType: 'line',        
        backgroundColor: null,
        plotBackgroundColor: null,
        borderRadius:20,
        plotShadow: false,
        events: {
            load: function() {
                //    event.exporting.buttons.infoButton.symbolX=5;
                //    event.exporting.buttons.infoButton.symbolY=2;
                //    info_img=0;
                   // this.renderer.rect(5, 5, 60, 25, 15).attr({    fill: issue_col[1],    zIndex: 0 }).add();
                    }
        },
        style: {
            zIndex: 1
                },
        marginRight:30

    },
    title: {
        text: 'hello',
         style: { 
            fontFamily: 'Arial',
             fontWeight: 'bold',
             fontSize: '12px',
             textShadow: 'none'
                }
    },
    xAxis: {
        type:'datetime',
        title: {
        text: null
                }
    },
    yAxis: {
       title: {
       text: 'nothing is coming',
            style: { 
            fontFamily: 'Arial',
             fontWeight: 'bold',
             fontSize: '12px',
             textShadow: 'none'
                }
             },
       min: 0.0,

    },
    credits: {
        enabled: true,
        position: {
            align: 'center',
            x: 10,
            verticalAlign: 'bottom',
            y: -3
        },
        href: "http://www.interscapetech.com",
        style: {
            cursor: 'pointer',
            color: '#909090',
            fontSize: '9px'
        },
        text: "(c)1997- Interscape Technologies Inc. All rights reserved."
    },
    /*labels:{
        items: [{
            html: "TM",
            style: {
                fontSize:'8px',
                left: '330px',
                top: '140px'
            }
        }],
        style: {
            color: 'grey'
            }
    },*/
    lang:{
          downloadButtonTitle:'Download Chart',
          printButtonTitle :'Print Chart',
          infoButtonTitle:'Chart Information',
           switchButtonTitle:'Click to Enlarge'        
     //      switchButtonTitle:'Switch to Bar Chart'
      },

    navigation:{
        buttonOptions:{
            align:'right',
            verticalAlign:'middle',
            height:15,
            symbolFill: '#4572A7',
            hoverSymbolFill: '#768F3E',
            hoverBorderColor:'#92A8CD',
            borderColor:'#3D96AE',
            backgroundColor:'white',
            borderRadius:5,
            borderWidth:2,
            width:20,
            symbolX:10,
            symbolY:8,
            symbolSize:10
        }
    },
    subtitle: {
        text: '',
        align:'left',
        style: {
            fontFamily: 'Arial',
             fontWeight: 'bold',
             fontSize: '12px',
             textShadow: 'none',
             color: 'white'
                },
        x:3,    //-165 if center
        y:12
    },
    plotOptions: {
        line: {
            lineWidth: 1,
            marker: {
               enabled: false,
               states: {
                  hover: {
                     enabled: true,
                     radius: 5
                         }
                       }

                    },
            shadow: false,
            states: {
               hover: {
                  lineWidth: 1                  
                      }
                    },
            zindex:1
            },
        series:[{
                zindex:1
            }]
    }
    ,
    tooltip: {
        formatter: function() {
            var ctime= Highcharts.dateFormat('%m/%d/%Y %H:%M:%S',this.x);
            var s = '<b>'+ ctime +'</b>';
            $.each(this.points, function(i, point) {
                var result=Math.round(point.y*10)/10;
                s += '<br/>'+ point.series.name +': '+result;
            });
            return s;
        },
        shared: true,
        backgroundColor: '#FCFFC5'
    },
    legend: {
        itemStyle: { 
            fontFamily: 'Arial',
             fontSize: '12px',
             textShadow: 'none'
                },
         enabled: true
//        symbolPadding: 10
    },
    series: []
   };

$(document).ready(function()
    {

      var url='highchars_test2.php';
alert('helo');

   $.getJSON(url, function(seriesData){

    $(seriesData).each(function(i, pdata){
    console.log();
                if(i==(seriesData.length-1) || i==(seriesData.length-2))
                {}
                else
                {
                    alert(pdata['data']);
                    chartOptions.series.push(pdata);
                }
            });
               chart = new Highcharts.Chart(chartOptions);
   });
   }); 
```

无法创建图表..请帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T06:35:15.240

似乎在 a 系列中，数据数组之前缺少左方括号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T06:41:16.483

在系列中，数据格式不正确（缺少左括号）我添加了它并且它的工作
检查了这个[http://jsfiddle.net/q6LVV/](http://jsfiddle.net/q6LVV/)

# java - 连接池在 Glassfish 3.1.2 中遇到 ClassCastException

> ID：12471107
> 
> 赞同：0
> 
> 时间：2012-09-18T05:50:23.673
> 
> 标签：java, glassfish-3

我在 Glassfish 3.1.2 中创建了一个名为“userdb”的连接池和一个名为“userdbresource”的数据源。在创建数据源时，我在管理控制台中将类型指定为“javax.sql.Datasource”。

在我的 REST web 服务中，我编写了以下代码

```
 DataSource ds = null;
        try
        {
        InitialContext ctx = new InitialContext();

            ds = (DataSource) ctx.lookup("userdbresource");
        }
        catch (NamingException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Connection con = (Connection) ds.getConnection();
        Statement stmt=con.createStatement(); 
```

我总是在`Connection con = (Connection) ds.getConnection();`

我已将以下内容添加到 web.xml

```
 <resource-ref>
        <res-ref-name>userdbresource</res-ref-name>
        <res-type>javax.sql.DataSource</res-type>
        <res-auth>Container</res-auth>
        <res-sharing-scope>Shareable</res-sharing-scope>
    </resource-ref> 
```

但没有变化。在使用 com.mysql.jdbc.Connection 查找连接后，我尝试解开连接。但没有变化。

日志中实际的 classcast 异常是

```
java.lang.ClassCastException: com.sun.gjc.spi.jdbc40.ConnectionHolder40 cannot be cast to com.mysql.jdbc.Connection 
```

如果有人知道我需要进行哪些更改才能使用从池中检索的连接，请告诉我！

谢谢卡维塔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T06:00:25.350

`import java.sql.Connection;`不是 jdbc 连接，因此您不需要任何连接转换并且您的数据源连接变为

```
Connect con = ds.getConnection(); 
```

# c# - 字符编码错误

> ID：12471111
> 
> 赞同：0
> 
> 时间：2012-09-18T05:50:34.047
> 
> 标签：c#, asp.net

使用带有母版页的 asp.net 页面并出现错误：

> 未声明纯文本文档的字符编码。如果文档包含 US-ASCII 范围之外的字符，则文档将在某些浏览器配置中呈现乱码。文件的字符编码需要在传输协议中声明或者文件需要使用字节序标记作为编码签名

如果母版页不适用于内容页面，则页面工作正常。请为此问题提供一些解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T05:53:24.310

检查：[如何：为 ASP.NET 网页全球化选择编码](http://msdn.microsoft.com/en-us/library/39d1w2xf%28v=vs.100%29.aspx)

您需要像这样指定所有页面的编码

```
<configuration>
  <system.web>
    <globalization
      fileEncoding="utf-8"
      requestEncoding="utf-8"
      responseEncoding="utf-8"
      culture="en-US"
      uiCulture="de-DE"
    />
  </system.web>
</configuration> 
```

或者

对于页面

```
<%@ Page RequestEncoding="utf-8" ResponseEncoding="utf-8" %> 
```

# ruby-on-rails - 第一个页面加载和后续页面加载之间的标签空白不同

> ID：12471116
> 
> 赞同：0
> 
> 时间：2012-09-18T05:51:31.737
> 
> 标签：ruby-on-rails, ruby-on-rails-3, haml, asset-pipeline, minify

我什至很难找到开始调试的点。基本上，我正在设置一个[Shapado](http://shapado.com/questions)的副本，这是一个相当普通的 Rails 3 应用程序，它有很多这样的 .html.haml 视图：

```
.author
  %span
    = I18n.t('global.by_semi')
  = render :partial => "users/user_mini" ... 
```

我第一次在生产模式下在我的网站上加载页面时，输出中的所有标签都会一起处理：

```
<div class="author"><small><span>Asked by</span><a href="/users/jpatokal"
data-layout="user" rel="author">Jani</a>6 
```

错误地呈现为“ [Jani](http://example.com) 6 询问”。

但在开发模式下，以及（更奇怪的是）我第二次及以后在生产模式下加载同一页面时，标签由换行符分隔：

```
<div class="author">
<small>
<span>
Asked by
</span>
<a href="/users/jpatokal" data-layout="user" rel="author">Jani</a>
6 
```

由于换行符是 HTML 中的空格，因此现在可以正确呈现：“由[Jani](http://example.com) 6 询问”

我认为这与 Rails 3 资产流水线、缩小和/或缓存有关，但据我所知，配置（[请参阅 Gitorious](https://gitorious.org/shapado/shapado/trees/master/config)）实际上并没有流水线 Haml。通过 config/environments/development.rb 与 c/e/production.rb 的差异快速查看也没有显示任何明显相关的内容。帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T06:40:21.793

后续调用中的输出不应更改。尝试使用`bundle update haml`.

您可以`false`在您的`application.rb`or中强制“丑陋”模式`production.rb`：

```
Haml::Template.options[:ugly] = false 
```

[http://haml.info/docs/yardoc/file.HAML_REFERENCE.html#options](http://haml.info/docs/yardoc/file.HAML_REFERENCE.html#options)

# c++ - 这个结构的大小不加起来

> ID：12471118
> 
> 赞同：0
> 
> 时间：2012-09-18T05:51:45.740
> 
> 标签：c++, struct, sizeof

> **可能重复：**
> [为什么结构的 sizeof 不等于每个成员的 sizeof 之和？](https://stackoverflow.com/questions/119123/why-isnt-sizeof-for-a-struct-equal-to-the-sum-of-sizeof-of-each-member)
> [sizeof(struct) 返回意外值](https://stackoverflow.com/questions/5596428/sizeofstruct-returns-unexpected-value)

我编写了一个程序来查找以下结构 abc 的大小。

一个。内置的 sizeof() 运算符提到这个结构的大小是 40，而实际上它是 32？我也尝试减去地址来确定这一点，结果也是 40。

湾。当我注释掉“char g[3];” 在 struct abc 内部，abc = 32 的大小。这对我来说也没有任何意义。这不应该是28吗？

C。为什么我需要强制转换为 "unsigned int" ？如果我不进行强制转换，我会收到以下编译错误消息。&a[0] 实际上不是一个地址（应该是一个 int）吗？

size_of_struct\size_of_struct.cpp(24)：错误 C2440：“=”：无法从“abc *”转换为“无符号整数”

信息：我正在运行 win 7、64 位系统。MS Visual Studio 编译器。

```
#include <iostream>

struct char_three{
    char a[3];
};

struct int_three{
    int a[3];
};

struct abc 
{
    int a; // 4 bytes
    double b; // 8
    void *ptr; // 4
    char g[3]; // 4 due to padding ?
    int c[3]; // 12
}; // Total size of struct - 31 / 32.

int main () 
{
    abc a[2]; 
    unsigned int add0, add1;
    add0 = (unsigned int) &a[0];
    add1 = (unsigned int) &a[1];
    printf("add1 of a is :%x add0 is :%x\n", add1, add0);

    printf("size of struct abc : %d\n", add1-add0);
    printf("size of int: %d\n", sizeof(int));
    printf("size of double: %d\n", sizeof(double));
    printf("size of void ptr: %d\n", sizeof(void *));
    printf("size of 3 char: %d\n", sizeof(char_three));
    printf("size of 3 int: %d\n", sizeof(int_three));
    printf("size of a: %d\n", sizeof(a));
    system("pause");
    return 0;
}

O/P:
add1 of a is :51f828 add0 is :51f800
size of struct abc : 40
size of int: 4
size of double: 8
size of void ptr: 4
size of 3 char: 3
size of 3 int: 12
size of a: 80
Press any key to continue . . . 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T05:57:00.977

您不能显式依赖结构的 sizeof()。编译器是否引入填充是实现定义的，如果是，它在哪里引入。如果您使用 GCC 兼容的编译器并且不介意其他工具链（等等，还有其他工具链吗？），您可以`__attribute__((packed))`告诉编译器根本不要向您的结构添加填充。

# jquery - 在 jQuery 中使用多个选择器

> ID：12471121
> 
> 赞同：2
> 
> 时间：2012-09-18T05:52:37.270
> 
> 标签：jquery

我有一个有效的jQuery语句如下

```
 var firstHeaderLineElement = $(".resultGridTable .tableColGroupAssociate"); 
```

我需要通过将 .tableColGroupAssociate 作为变量来使其更通用。我使用以下方法实现了这一点：

```
 var hideClass = '.tableColGroupAssociate';
    var firstHeaderLineElement = $(".resultGridTable").find(hideClass); 
```

然而，它需要一个“发现”。有没有更好的 jQuery 方式来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T05:54:45.630

使用字符串连接：

```
var hideClass = '.tableColGroupAssociate';
var firstHeaderLineElement = $(".resultGridTable " + hideClass ); 
```

jQuery`$(selector, context)`格式：

```
var hideClass = '.tableColGroupAssociate';
var firstHeaderLineElement = $(".resultGridTable", hideClass); 
```

但在内部它实现了`.find()`.

* * *

# 笔记

但是 jQuery 总是不实现该`find()`方法。在现代浏览器中，它尝试实现，`document.querySelectorAll()`以便浏览器尝试将其解析为有效的 CSS 选择器。

***[如果此默认引擎失败，则 jQuery 使用其默认引擎Sizzle](http://sizzlejs.com/)***解析选择器，该引擎使用其内部机制进行 DOM 遍历。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T05:54:55.667

您可以在选择器标识中使用多个字符串

```
var hideClass = '.tableColGroupAssociate';
var firstHeaderLineElement = $(".resultGridTable " + hideClass); 
```

# matlab - 双曲面部分的 3D 图

> ID：12471125
> 
> 赞同：0
> 
> 时间：2012-09-18T05:53:22.693
> 
> 标签：matlab, 3d, plot

我想通过以下方式绘制一个夸张的 3D 图，该图在其底部被切割（图）

有任何想法吗？![在此处输入图像描述](../Images/0c6d70be852e315943b61f148a12a6b0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T06:54:52.850

好的，这是我对你的问题的看法。这是我一直在使用的实验脚本：

```
%%# first part    
%#------------------

clf

%# use cylinder to get unit cone
[x,y,z] = cylinder( linspace(1, 0, 1e3), 1e3);

%# intersect the cone with this surface
inds = z < (cos(x).*sin(pi*y/2)+1)/4;

x(inds) = NaN; %# remove all corresponding 
y(inds) = NaN; %# indices, in all arrays
z(inds) = NaN;

%# Now plot the cone. Note that edges are ugly when 
%# using a large number of points
surf(x, y, z, 'edgecolor', 'none');

%%# second part
%#------------------

hold on

%# the surface to intersect the cone with
f = @(x,y) (cos(x).*sin(pi*y/2)+1)/4;

%# add the surfacfe to the cone plot
[x,y] = meshgrid( linspace(-1,1, 1e3) );
surf(x,y, f(x,y), 'edgecolor', 'none') 
```

第一部分显示与曲线相交的圆锥。您可能需要稍微修改一下曲线以使整体形状正确，这就是第二部分的用途。

如果你想要一个抛物面（或其他），只需使用

```
[x,y] = meshgrid( linspace(-1,1, 1e3) );
z = 1-x.^2-y.^2;  %# or whatever other equation 
```

而不是`cylinder`命令。

# java - 如何解析 JSON 响应

> ID：12471129
> 
> 赞同：-1
> 
> 时间：2012-09-18T05:53:31.800
> 
> 标签：java, android, json, arrays

我正在开发一个我得到`JSON`响应的应用程序。响应如下：

```
 [
    {
        "CID": 5,
        "ChildMenus": [],
        "Level": null,
        "MenuUrl": "",
        "Name": "Jewelry",
        "PCID": 235,
        "REnum": null,
        "isLooseDiamond": "NO"
    },
    {
        "CID": 122,
        "ChildMenus": [],
        "Level": null,
        "MenuUrl": "",
        "Name": "Collection",
        "PCID": 235,
        "REnum": null,
        "isLooseDiamond": "NO"
    },
    {
        "CID": 459,
        "ChildMenus": [],
        "Level": null,
        "MenuUrl": "http://jewelry.roughdiamondxchange.in/Guide.aspx",
        "Name": "Education",
        "PCID": 235,
        "REnum": null,
        "isLooseDiamond": "NO"
    },
    {
        "CID": 483,
        "ChildMenus": [],
        "Level": null,
        "MenuUrl": "",
        "Name": "Design Your Own ",
        "PCID": 235,
        "REnum": null,
        "isLooseDiamond": "NO"
    },
    {
        "CID": 486,
        "ChildMenus": [],
        "Level": null,
        "MenuUrl": "http://jewelry.roughdiamondxchange.in/About.aspx",
        "Name": "Policy",
        "PCID": 235,
        "REnum": null,
        "isLooseDiamond": "NO"
    },
    {
        "CID": 56,
        "ChildMenus": [],
        "Level": null,
        "MenuUrl": "",
        "Name": "Diamonds",
        "PCID": 235,
        "REnum": null,
        "isLooseDiamond": "YES"
    },
    {
        "CID": 611,
        "ChildMenus": [],
        "Level": null,
        "MenuUrl": "",
        "Name": "Overview",
        "PCID": 235,
        "REnum": null,
        "isLooseDiamond": "NO"
    }
] 
```

为了解析这个我使用了下面的代码

```
try {
    // Getting Array of Contacts
    /*JSONObject jsonObject = new JSONObject(json);*/
    /*JSONArray array = json.getJSONArray("Value");*/
    JSONArray array=new JSONArray();
    array.put(getJSONFromUrl());

    // looping through All Contacts
    for(int i = 0; i < array.length(); i++){
        JSONObject c = array.getJSONObject(i);
        /*  JSONObject object = jsonObject.getJSONObject("FirstObject");*/
        // Storing each json item in variable
        /*String cid = c.getString(TAG_CID);*/
        String name = c.getString(TAG_NAME);
        String pcid = c.getString(TAG_PCID);
        String menuurl = c.getString(TAG_MENUURL);

        // Phone number is agin JSON Object

        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();

        // adding each child node to HashMap key => value
        /*  map.put(TAG_CID, cid);*/
        map.put(TAG_NAME, name);
        map.put(TAG_PCID, pcid);
        map.put(TAG_MENUURL, menuurl);

        // adding HashList to ArrayList
        menuList.add(map);
    }

} catch (JSONException e) {
    e.printStackTrace();
} 
```

它给了我一个`org.json.JSONException: No value for name`错误。我无法解析数据。我将不胜感激有关如何解析日期的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T07:29:48.287

尝试这个

```
 List<String>mCid = new ArrayList<String>();
         List<String>mLevel = new ArrayList<String>();
         String value,result;
         InputStream is,in;
         JSONArray jArray = null;

           try {

                   HttpClient httpclient=new DefaultHttpClient();
                HttpPost httppost=new HttpPost("url");
                //namevaluepair=new ArrayList<NameValuePair>(1);
                //namevaluepair.add(new BasicNameValuePair("key",value));//if you want to send data to server

                //httppost.setEntity(new UrlEncodedFormEntity(namevaluepair));
                HttpResponse httpresponse=httpclient.execute(httppost);
                in=httpresponse.getEntity().getContent();
            //inputStream = response.getEntity().getContent();
            }catch(Exception e){Log.e("","error in http connection");}

            try{
                BufferedReader reader = new BufferedReader(new InputStreamReader(in,"iso-8859-1"),8);
                StringBuilder sb1 = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null) {
                        sb1.append(line + "\n");
                }
                in.close();
                result=sb1.toString();

                       Toast.makeText(getBaseContext(), result, Toast.LENGTH_LONG).show();
                      try{
                      JSONObject json=new JSONObject(result);

                       jArray=json.getJSONArray("Array_name_in_response"); //whatever name of your array in response
                       System.out.println(jArray.length());

                        //if(jArray.length()!=0){
                       for(int i=0;i<jArray.length();i++)
                        {

                         value = jArray.getJSONObject(i).optString("CID");
                         mCid.add(value);
                         value = jArray.getJSONObject(i).optString("Level");
                         mLevel.add(value);
                         System.out.println(value);
                        } 
                    // }

                   }catch(JSONException e){
                        Log.e("log_tag", " Error parsing data "+e.toString());
                        }

        }catch(Exception e){
                Log.e("log_tag", "Error converting result "+e.toString());
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T06:15:02.490

检查字符串 TAG_NAME = "Name" 而不是 "name"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T07:02:58.223

我认为您需要检查 String `TAG_NAME`。将您的代码更改为以下代码后进行更改。希望它会帮助你。

```
 for(int i = 0; i < array.length(); i++){
            JSONObject c = array.getJSONObject(i);
            /*  JSONObject object = jsonObject.getJSONObject("FirstObject");*/
            // Storing each json item in variable
            /*String cid = c.getString(TAG_CID);*/
            String name = c.getString("Name");
            String pcid = c.getString("PCID");
            String menuurl = c.getString("MenuUrl");

            // Phone number is agin JSON Object

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            /*  map.put(TAG_CID, cid);*/
            map.put("Name", name);
            map.put("PCID", pcid);
            map.put("MenuUrl", menuurl);

            // adding HashList to ArrayList
            menuList.add(map);
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T06:18:04.773

当您尝试访问**不在 jsonObject 中的 TAG_NAME 时会发生此错误。****通过has(TAG_NAME)**返回布尔值 检查 TAG_NAME 的存在

字符串名称 = c.getString(TAG_NAME);

# html - Elastislide + fancybox（两者都是响应式的）不起作用。令人惊讶的是控制台上没有错误

> ID：12471131
> 
> 赞同：1
> 
> 时间：2012-09-18T05:54:12.160
> 
> 标签：html, jquery, fancybox, fancybox-2

我现在正在使用响应式设计，我使用 elastislide ( [http://tympanus.net/Development/Elastislide/](http://tympanus.net/Development/Elastislide/) ) 制作了一个滑块，现在我想用 Fancybox ( [http://fancyapps ) 调用一个带有 ajax 或 Iframe 的表单.com/fancybox/#examples](http://fancyapps.com/fancybox/#examples)）单击滑块的每个图像，但它不起作用，并且我的 fire bug 的控制台以及我的 web-developer 工具上没有错误。

这是代码。

```
<div id="carousel" class="es-carousel-wrapper">
                <div class="es-carousel">
                    <ul>
                        <li><a href="http://localhost/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/1.jpg" alt="image01" /></a></li>
                        <li><a href="http://localhost/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/2.jpg" alt="image02" /></a></li>
                        <li><a href="http://localhost/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/3.jpg" alt="image03" /></a></li>
                        <li><a href="http://localhost/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/4.jpg" alt="image04" /></a></li>
                        <li><a href="http://localhost/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/5.jpg" alt="image05" /></a></li>
                        <li><a href="http://localhost/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/6.jpg" alt="image06" /></a></li>
                        <li><a href="http://localhost/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/7.jpg" alt="image07" /></a></li>
                        <li><a href="http://localhost/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/8.jpg" alt="image08" /></a></li>
                        <li><a href="http://localhost/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/9.jpg" alt="image09" /></a></li>
                        <li><a href="http://localhost/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/10.jpg" alt="image10" /></a></li>
                        <li><a href="http://localhost/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/11.jpg" alt="image11" /></a></li>
                        <li><a href="http://localhost/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/12.jpg" alt="image12" /></a></li>
                        <li><a href="http://localhost/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/13.jpg" alt="image13" /></a></li>
                        <li><a href="http://localhost/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/14.jpg" alt="image14" /></a></li>
                        <li><a href="http://localhost/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/15.jpg" alt="image15" /></a></li>
                        <li><a href="http://localhost/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/16.jpg" alt="image16" /></a></li>
                        <li><a href="http://localhost/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/17.jpg" alt="image17" /></a></li>
                        <li><a href="http://localhost/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/18.jpg" alt="image18" /></a></li>
                        <li><a href="http://localhost/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/19.jpg" alt="image19" /></a></li>
                        <li><a href="http://localhost/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/20.jpg" alt="image20" /></a></li>
                        <li><a href="http://localhost/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/21.jpg" alt="image21" /></a></li>
                        <li><a href="http://localhost/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/22.jpg" alt="image22" /></a></li>
                        <li><a href="http://localhost/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/23.jpg" alt="image23" /></a></li>
                        <li><a href="http://localhost/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/24.jpg" alt="image24" /></a></li>
                        <li><a href="http://localhost/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/25.jpg" alt="image25" /></a></li>
                    </ul>
                </div>
            </div>

    <script type="text/javascript" src="fancybox/lib/jquery-1.8.0.min.js"></script>
<!-- Add mousewheel plugin (this is optional) -->
<script type="text/javascript" src="fancybox/lib/jquery.mousewheel-3.0.6.pack.js"></script>

<!-- Add fancyBox main JS and CSS files -->
<script type="text/javascript" src="fancybox/source/jquery.fancybox.js?v=2.1.0"></script>
<link rel="stylesheet" type="text/css" href="fancybox/source/jquery.fancybox.css?v=2.1.0" media="screen" />

<!-- Add Button helper (this is optional) -->
<link rel="stylesheet" type="text/css" href="fancybox/source/helpers/jquery.fancybox-buttons.css?v=1.0.3" />
<script type="text/javascript" src="fancybox/source/helpers/jquery.fancybox-buttons.js?v=1.0.3"></script>

<!-- Add Thumbnail helper (this is optional) -->
<link rel="stylesheet" type="text/css" href="fancybox/source/helpers/jquery.fancybox-thumbs.css?v=1.0.6" />
<script type="text/javascript" src="fancybox/source/helpers/jquery.fancybox-thumbs.js?v=1.0.6"></script>

<!-- Add Media helper (this is optional) -->
<script type="text/javascript" src="fancybox/source/helpers/jquery.fancybox-media.js?v=1.0.3"></script>
<script type="text/javascript" src="js/jquery.easing.1.3.js"></script>
    <script type="text/javascript" src="js/jquery.elastislide.js"></script>
    <script type="text/javascript">

       $('.fancybox').fancybox();           

       $('#carousel').elastislide({
            imageW  : 180,
            minItems    : 5
        });

    </script> 
```

当我评论 elastislide 时，fancybox 可以工作，但两者都不能正常工作...... :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T07:42:11.953

我找到了解决方案:)首先我将类从'a'标签替换为'li'标签，然后使用手动ajax调用它，所以我更新的代码在这里......

```
 <div id="carousel" class="es-carousel-wrapper">
                <div class="es-carousel">
                    <ul>
                        <li class="fancybox fancybox.ajax"><a href="http://192.168.3.12/test/Elastislide/fancybox/demo/iframe.html" class=" "><img src="images/large/1.jpg" alt="image01" /></a></li>
                        <li class="fancybox fancybox.ajax"><a href="http://192.168.3.12/test/Elastislide/fancybox/demo/iframe.html" ><img src="images/large/2.jpg" alt="image02" /></a></li>
                        <li class="fancybox fancybox.ajax"> <a href="http://192.168.3.12/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/3.jpg" alt="image03" /></a></li>
                        <li class="fancybox fancybox.ajax"><a href="http://192.168.3.12/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/4.jpg" alt="image04" /></a></li>
                        <li class="fancybox fancybox.ajax"><a href="http://192.168.3.12/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/5.jpg" alt="image05" /></a></li>
                        <li class="fancybox fancybox.ajax"><a href="http://192.168.3.12/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/6.jpg" alt="image06" /></a></li>
                        <li class="fancybox fancybox.ajax"><a href="http://192.168.3.12/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/7.jpg" alt="image07" /></a></li>
                        <li class="fancybox fancybox.ajax"><a href="http://192.168.3.12/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/8.jpg" alt="image08" /></a></li>
                        <li class="fancybox fancybox.ajax"><a href="http://192.168.3.12/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/9.jpg" alt="image09" /></a></li>
                        <li class="fancybox fancybox.ajax"><a href="http://192.168.3.12/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/10.jpg" alt="image10" /></a></li>
                        <li class="fancybox fancybox.ajax"><a href="http://192.168.3.12/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/11.jpg" alt="image11" /></a></li>
                        <li class="fancybox fancybox.ajax"><a href="http://192.168.3.12/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/12.jpg" alt="image12" /></a></li>
                        <li class="fancybox fancybox.ajax"><a href="http://192.168.3.12/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/13.jpg" alt="image13" /></a></li>
                        <li class="fancybox fancybox.ajax"><a href="http://192.168.3.12/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/14.jpg" alt="image14" /></a></li>
                        <li class="fancybox fancybox.ajax"><a href="http://192.168.3.12/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/15.jpg" alt="image15" /></a></li>
                        <li class="fancybox fancybox.ajax"><a href="http://192.168.3.12/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/16.jpg" alt="image16" /></a></li>
                        <li class="fancybox fancybox.ajax"><a href="http://192.168.3.12/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/17.jpg" alt="image17" /></a></li>
                        <li class="fancybox fancybox.ajax"><a href="http://192.168.3.12/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/18.jpg" alt="image18" /></a></li>
                        <li class="fancybox fancybox.ajax"><a href="http://192.168.3.12/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/19.jpg" alt="image19" /></a></li>
                        <li class="fancybox fancybox.ajax"><a href="http://192.168.3.12/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/20.jpg" alt="image20" /></a></li>
                        <li class="fancybox fancybox.ajax"><a href="http://192.168.3.12/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/21.jpg" alt="image21" /></a></li>
                        <li class="fancybox fancybox.ajax"><a href="http://192.168.3.12/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/22.jpg" alt="image22" /></a></li>
                        <li class="fancybox fancybox.ajax"><a href="http://192.168.3.12/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/23.jpg" alt="image23" /></a></li>
                        <li class="fancybox fancybox.ajax"><a href="http://192.168.3.12/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/24.jpg" alt="image24" /></a></li>
                        <li class="fancybox fancybox.ajax"><a href="http://192.168.3.12/test/Elastislide/fancybox/demo/iframe.html" class="fancybox fancybox.ajax"><img src="images/large/25.jpg" alt="image25" /></a></li>
                    </ul>
                </div>
            </div> 
```

在脚本中我在脚本中做了这个改变

```
 <script>
  $(".fancybox").click(function() {

$.fancybox.open([
    {
        href : 'http://192.168.3.12/test/Elastislide/fancybox/demo/iframe.html',                
        title : '1st title',
    type: 'ajax'
    }
], {
    padding : 0
});

return false;

}); 
```

希望这可以帮助任何面临同样问题的人....

# html - 如何在提交按钮中设置文本颜色？

> ID：12471132
> 
> 赞同：42
> 
> 时间：2012-09-18T05:54:25.890
> 
> 标签：html, css, button, submit-button

我试图更改提交按钮类型中文本的颜色，但我不知道为什么我无法更改它。

```
.button {
  width: 105px;
  height: 20px;
  background-image: url('tiny.gif');
  line-height: 20px;
  padding-bottom: 2px;
  vertical-align: middle;
  font-family: "Lucida Grande", Geneva, Verdana, Arial, Helvetica, sans-serif;
  font-size: 13px;
  <!--font-weight: bold;
  -->text-transform: none;
  border: 1px solid transparent;
}

.button:hover {
  background-image: url('tiny_.gif');
}
```

```
<input type="submit" value="Fetch" class="button" />
```

当我尝试更改提交按钮的颜色时遇到问题。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-09-18T06:07:03.457

```
.button
{
    font-size: 13px;
    color:green;
}
```

```
<input type="submit" value="Fetch" class="button"/>
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-09-18T06:18:14.583

你试试这个：

```
<input type="submit" style="font-face: 'Comic Sans MS'; font-size: larger; color: teal; background-color: #FFFFC0; border: 3pt ridge lightgrey" value=" Send Me! "> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-12-04T09:30:02.317

```
<button id="fwdbtn" style="color:red">Submit</button> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-18T05:57:19.610

使用这个 CSS：

```
color: red; 
```

就这样。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-05-15T16:04:34.637

```
<input type = "button" style ="background-color:green"/> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-12-18T09:30:25.773

```
.btn{
    font-size: 20px;
    color:black;
} 
```

# c - C 新手... struct 找不到我确定的变量

> ID：12471135
> 
> 赞同：1
> 
> 时间：2012-09-18T05:54:45.793
> 
> 标签：c, struct

我是整个 C 语言的新手，但我的代码不断出现这个错误

```
UArray2.c:19:error: request for member ‘i’ in something not a structure or union 
```

这显然是我主要功能中的 uarray.i，但我不明白为什么它没有看到它。

这是我的 .h 文件。不太有趣...

```
//UArray2.h
#include <stdlib.h>
#include <stdio.h>
#ifndef UARRAY2_INCLUDED
#define UARRAY2_INCLUDED
#define T UArray2_T
typedef struct T *T;

#undef T
//#undef UARRAY2_INCLUDED //undef?                 
#endif 
```

这是我的 .c 文件。很简单的东西。

```
//UArray.c                                              
#include <stdlib.h>
#include <stdio.h>
#include "UArray2.h"
#define T UArray2_T

struct T{
     int i;
};

int main()
{
     UArray2_T uarray;
     uarray.i=0;
     return 0;
}
#undef T 
```

那么，有没有人知道我为什么会收到这个编译错误？这可能是我做的一些愚蠢的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T06:00:31.300

在你的头文件中

```
typedef struct T *T; 
```

这意味着当您声明变量时，`uarray`您实际上是在声明一个指针。所以你应该将`i`成员初始化为

```
uarray->i = 0; 
```

然而，这很可能会崩溃，因为指针未初始化并且可以指向内存中的任何位置。为指针分配内存

```
UArray2_T uarray = malloc(sizeof(*uarray)); 
```

或者让它指向另一个结构

```
struct UArray2_T real_uarray;
UArray2_T uarray = &real_uarray; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T06:16:16.583

我认为初始化存在问题，因为您使用的是头文件中的指针。

```
 typedef struct T *T; 
```

您实际上是通过声明 uarray 来指向内存位置。尝试纠正这个错误。

# c# - 如何在 C# 中使用 itextsharp 创建带有泰米尔语字体的 PDF 文件？

> ID：12471136
> 
> 赞同：2
> 
> 时间：2012-09-18T05:54:46.763
> 
> 标签：c#, asp.net, c#-4.0, itextsharp

我们通过传递泰米尔语文本（一种印度语言）在我们的 C# 应用程序中创建 pdf 文件。所以，我已经为我的泰米尔语字体安装了 AVVAIYAR.TTF（一种泰米尔语字体）字体。但是当我运行下面提到的pgm，创建的 pdf 文件不包含任何泰米尔语字体显示。它显示空行而不是泰米尔语文本...

C#代码：

```
Document document = new Document();
PdfWriter writer = PdfWriter.GetInstance(document, new FileStream(@"C:\pdfout.pdf", FileMode.Create));
document.Open();

PdfContentByte pcb = writer.DirectContent;
Font ft = new Font();
FontFactory.Register(@"C:\WINDOWS\Fonts\AVVAIYAR.TTF", "AVVAIYAR");
ft = FontFactory.GetFont("AVVAIYAR");

Paragraph pr1 = new Paragraph("இது முதல் பேரா", ft);
Paragraph pr2 = new Paragraph("This is a Sub Paragraph");
Paragraph pr3 = new Paragraph("This is the Second Paragraph");

document.Add(pr1);
document.Add(pr2);
document.Add(pr3);
document.Close(); 
```

**我的输出pdf文件是：**

```
<blank line>
This is a Sub Paragraph
This is the Second Paragraph 
```

而且我还必须支持更多的印度语言来创建 PDF 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T06:13:08.850

你能试试下面的代码片段吗？

```
string fontpath = Environment.GetEnvironmentVariable("SystemRoot") + "\\fonts\\AVVAIYAR.TTF";
BaseFont basefont = BaseFont.CreateFont(fontpath, BaseFont.IDENTITY_H, true);
Font AVVAIYARFont = new iTextSharp.text.Font(basefont, 24, iTextSharp.text.Font.NORMAL, iTextSharp.text.Color.BLUE); /*For test color blue is placed with some foramtting.*/

Paragraph pr1 = new Paragraph("இது முதல் பேரா", AVVAIYARFont); 
```

这应该工作...

一个开箱即用的想法，iText 目前还没有完全支持所有印度语言......看到[这里](http://support.itextpdf.com/node/83)他们说他们没有足够的志愿者来支持这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T07:11:13.020

我已经引用了 ARIALUNI.TTF。我试过这样，

```
string fontpath = Environment.GetEnvironmentVariable("SystemRoot") + "\\fonts\\ARIALUNI.TTF"; 
BaseFont basefont = BaseFont.CreateFont(fontpath, BaseFont.IDENTITY_H, true);
Font font = new iTextSharp.text.Font(basefont, 24, iTextSharp.text.Font.NORMAL, iTextSharp.text.Color.BLUE);
Paragraph pr1 = new Paragraph("இது முதல் பேரா", AVVAIYARFont); 
```

所以，现在泰米尔语字体显示在pdf文件中。但是简单的拼写错误......所以我正在阅读这个问题......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-25T03:53:29.250

进行1：

第 1 步：转到[http://software.nhm.in/services/converter](http://software.nhm.in/services/converter)网站

step2:粘贴这个词படிவம்-டி ஊதியம் சீட்டு /விடுப்பு அட்டை</p>

step3:1.将第一个下拉列表更改为 Unicode ，2.将第二个下拉列表更改为 TAB

step5：点击按钮转换器

step6.text 将被对齐。

步骤 7：主要过程从听到开始

1.将第二个下拉菜单更改为 TSCI 并单击转换。（不要惊慌，不会存在任何更改）

2.现在将第一个下拉菜单自动更改为 Unicode，泰米尔语文本将更改为“ÀÊÅõ-Ê °¾¢Âõ º£ðÎ /Å¢ÎôÒ «ð¨¼”；

3.复制内容并将其放在记事本中。

过程2：

1.首先下载TSC-Sri.ttf( [http://www.eaglefonts.com/download.php?action=zip&image_id=129859](http://www.eaglefonts.com/download.php?action=zip&image_id=129859) )

2.保存或移动到c:\Windows\fonts

3.最后在c#程序中粘贴下面的代码

```
 string fontpath = Environment.GetEnvironmentVariable("SystemRoot") + "\\fonts\\TSC-Sri.ttf";
    BaseFont basefont = BaseFont.CreateFont(fontpath, BaseFont.IDENTITY_H, true);
    iTextSharp.text.Font font = new iTextSharp.text.Font(basefont, 24, iTextSharp.text.Font.NORMAL, iTextSharp.text.BaseColor.BLUE);
    Paragraph pr1 = new Paragraph("ÀÊÅõ-Ê °¾¢Âõ º£ðÎ /Å¢ÎôÒ «ð¨¼ ", font); 
```

4.运行 itextsharp pdf 程序输出为例外 100% 工作。

# linux - 在输出流中查找常用字符

> ID：12471154
> 
> 赞同：0
> 
> 时间：2012-09-18T05:56:37.407
> 
> 标签：linux, unix, sed, awk, grep

我有一个命令的输出，如下所示：

```
/user/bin/this_text_area_islands[0]
/user/bin/this_text_area_seas[0]
/user/bin/this_text_area_volcanoes[0]
/user/bin/this_text_area_continents[0] 
```

我想通过管道传输并在输出流中获取常用字符：

```
/user/bin/this_text_area_[0] 
```

再举一个例子：

```
/user/bin/this_text_area_islands
/user/bin/this_drawing_area_seas
/user/bin/this_paint_area_volcanoes
/user/bin/this_play_area_continents 
```

应该输出类似：[只匹配所有行中的所有常见字符]

```
/user/bin/this_area_ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T13:37:47.423

不确定它是否适用于所有情况，但以下适合您的示例：

```
#! /bin/bash

FIRST=$(head -1 $1)
LNB=$(wc -l < $1)

keepright () {
  M=$FIRST
  while [ -n "$M" ]
  do
    M=${M%?}
    [ $(fgrep -c "$M" "$1") -eq $LNB ] && break
  done
}

keepleft () {
  M=$FIRST
  while [ -n "$M" ]
  do
    M=${M#?}
    [ $(fgrep -c "$M" "$1") -eq $LNB ] && break
  done
}

keepright $1; printf "%s" "$M"
keepleft $1; printf "%s\n" "$M" 
```

# c++ - 程序运行但程序中的第二个功能不打印？输出没有错误

> ID：12471160
> 
> 赞同：0
> 
> 时间：2012-09-18T05:57:04.957
> 
> 标签：c++, visual-studio-2010

```
#include <iostream>
#include <iomanip>
using namespace std;

int main ()
{
double a;
double b;
a =(3.0);
b =(5.0);
cout << "  " << fixed << setprecision (1) << a << "\n" << endl;
cout << "* " << fixed << setprecision (1) << b << "\n" << endl;
cout << "------" << endl;
cout << fixed << setprecision (2) << a*b << "\n" << endl;
system("PAUSE");

return 0;
}

int calculate ()
{
   double a;
   double b;
   double c;
   a = (7.1);
   b = (8.3);
   c = (2.2);
   cout << fixed << setprecision(1) << endl;
   cout << "  " << fixed << setprecision (1) << a << "\n" << endl;
   cout << "* " << fixed << setprecision (1) << b << "\n" << endl;
   cout << "- " << fixed << setprecision (1) << c << "\n" << endl;
   cout << "------" << endl;
   cout << std::setprecision(2) << (a * b) - c << "\n" << std::endl;

system("PAUSE");

return 0;
} 
```

-Visual Studio 不报告任何错误但是没有打印第二个函数（即：（a * b）-c）？

为什么是这样？我需要添加“int计算（int a，int b，int c）”吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T05:58:32.193

您没有调用函数，您需要从 main 调用它`calculate ()`并在使用前声明。

```
//....

int calculate();   //declaration
int main()
{
   //....
   calculate();
}

int calculate()    //implementation
{
   //....
} 
```

这都是非常基本的东西。我建议你阅读一本介绍性的 C++ 书籍。

# c# - 如何使用迭代检索 couchbase 视图结果？

> ID：12471165
> 
> 赞同：0
> 
> 时间：2012-09-18T05:57:30.617
> 
> 标签：c#, foreach, couchbase

这是我从 couchbase 中检索评论列表的代码。设计文档名称为“Task”，视图名称为：“GetComments”。

```
public List<CommentsVO> GetComments(string TaskID, int LastCommentID, int totalCommentCount)
        {

            int startCount = LastCommentID - 1;

            int endCount = startCount - 19;
            int remainingCount = totalCommentCount - endCount;
            if (endCount < 0)
            {
                endCount = 0;// totalCommentCount - remainingCount;
            }

            IView<CommentsVO> results = oCouchbase.GetView<CommentsVO>("Task", "GetComments");

           results.StartKey(new object[] { TaskID, startCount }).EndKey(new object[] { TaskID, endCount });

            if (results != null)
            {
                List<CommentsVO> resultlist = new List<CommentsVO>();

                foreach (CommentsVO vo in results)//Here it is not entering inside the loop... Am i missing anything in this condition
                {
                    resultlist.Add(vo);
                }

                resultlist.Reverse();
                return resultlist;
            }

            return null;

        } 
```

我的 CommentsVo 代码是：

```
public class CommentsVO
    {
        public CommentsVO()
        {
            CommentedOn = Convert.ToString(DateTime.Now);
            IsActive = "1";
        }
        [JsonIgnore]
        public string TaskID { get; set; }

        [JsonProperty("commented_user_id")]
        public string CommentedUserID { get; set; }

        [JsonProperty("commented_user_name")]
        public string CommentedUserName { get; set; }

        [JsonProperty("comment_description")]
        public string CommentDescription { get; set; }

        [JsonProperty("commented_on")]
        public string CommentedOn { get; set; }

        [JsonProperty("is_active")]
        public string IsActive { get; set; }

        [JsonProperty("seq")]
        public string Sequence { get; set; }
    } 
```

我的沙发床视图代码是：

```
function(doc) {
    for(var i in doc.comments) {
        emit([doc._id,doc.comments[i].seq],doc.comments[i]);
    }
} 
```

我尝试过不使用 startkey 和 endkey 进行迭代，但是当我尝试使用 startkey 和 endkey 时，它没有进入循环内部。

请帮帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T15:08:52.807

使用复合键时，您将在 StartKey/EndKey 中指定一个键数组。在您的代码中，您实际上是通过第二次调用 StarKey 和 EndKey 来覆盖密钥。

所以像：

```
results.StartKey(new object[] { TaskId, startCount }).EndKey(new object[] { TaskId, endCount }); 
```

# python - python2 re.sub：在回溯中中止灾难性模式

> ID：12471169
> 
> 赞同：2
> 
> 时间：2012-09-18T05:57:56.267
> 
> 标签：python, regex

我正在使用`re.sub()` 一些可能导致回溯的复杂模式（由代码创建）。

在 Python 2.6 中经过一定次数的迭代后，是否有任何实用的方法可以中止`re.sub`（比如假装未找到模式，或引发错误）？

示例（这当然是一个愚蠢的模式，但它是由复杂的文本处理引擎动态创建的）：

`>>>re.sub('[i1l!|](?:[^i1l!|\\w]|[i1l!|])*[l1i!|](?:[^l1i!||\\w]|[l1i!|])*[i1l!|](?:[^i1l!|\\w]|[i1l!|])*[l1i!|](?:[^l1i!||\\w]|[l1i!|])*[i1l!|](?:[^i1l!|\\w]|[i1l!|])*[l1i!|](?:[^l1i!||\\w]|[l1i!|])*[i1l!|](?:[^i1l!|\\w]|[i1l!|])*[l1i!|](?:[^l1i!||\\w]|[l1i!|])*[i1l!|](?:[^i1l!|\\w]|[i1l!|])*[l1i!|](?:[^l1i!||\\w]|[l1i!|])*[i1l!|](?:[^i1l!|\\w]|[i1l!|])*[l1i!|](?:[^l1i!||\\w]|[l1i!|])*[i1l!|](?:[^i1l!|\\w]|[i1l!|])*[l1i!|](?:[^l1i!||\\w]|[l1i!|])*[i1l!|](?:[^i1l!|\\w]|[i1l!|])*[l1i!|](?:[^l1i!||\\w]|[l1i!|])*[i1l!|](?:[^i1l!|\\w]|[i1l!|])*[l1i!|](?:[^l1i!||\\w]|[l1i!|])*[i1l!|](?:[^i1l!|\\w]|[i1l!|])*[l1i!|](?:[^l1i!||\\w]|[l1i!|])*[i1l!|](?:[^i1l!|\\w]|[i1l!|])*[l1i!|](?:[^l1i!||\\w]|[l1i!|])*[i1l!|](?:[^i1l!|\\w]|[i1l!|])*[l1i!|](?:[^l1i!||\\w]|[l1i!|])*[i1l!|](?:[^i1l!|\\w]|[i1l!|])*[l1i!|](?:[^l1i!||\\w]|[l1i!|])*[i1l!|](?:[^i1l!|\\w]|[i1l!|])*[l1i!|](?:[^l1i!||\\w]|[l1i!|])*','*','ilililililililililililililililililililililililililililililililililil :x')`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T06:39:39.190

除了分析正则表达式的灾难性回溯（外部正则表达式的一个难题）或使用不允许回溯的不同正则表达式引擎之外，我认为唯一的方法是使用这种性质的超时：

```
import re
import signal

class Timeout(Exception): 
    pass 

def try_one(pat,rep,s,t=3):
    def timeout_handler(signum, frame):
        raise Timeout()

    old_handler = signal.signal(signal.SIGALRM, timeout_handler) 
    signal.alarm(t) 

    try: 
        ret=re.sub(pat, rep, s)

    except Timeout:
        print('"{}" timed out after {} seconds'.format(pat,t))
        return None

    finally:
        signal.signal(signal.SIGALRM, old_handler) 

    signal.alarm(0)
    return ret

try_one(r'^(.+?)\1+$', r'\1' ,"a" * 1000000 + "b") 
```

尝试替换单个字符的大量重复（在本例中为一百万个“a”字符）是[典型的灾难性正则表达式失败](http://swtch.com/~rsc/regexp/regexp1.html)。这需要数万年才能完成（至少对于 Python 或 Perl。Awk 不同）。

尝试 3 秒后，它会优雅地超时并打印：

```
"^(.+?)\1+$" timed out after 3 seconds 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-18T06:02:43.697

`count`可以在这里为您提供帮助：

```
In [9]: re.sub ?
Type:       function
Base Class: <type 'function'>
String Form:<function sub at 0x00AC7CF0>
Namespace:  Interactive
File:       c:\python27\lib\re.py
Definition: re.sub(pattern, repl, string, count=0, flags=0)
Docstring:
Return the string obtained by replacing the leftmost
non-overlapping occurrences of the pattern in string by the
replacement repl.  repl can be either a string or a callable;
if a string, backslash escapes in it are processed.  If it is
a callable, it's passed the match object and must return
a replacement string to be used.

In [13]: a = "bbbbbbb"

In [14]: x = re.sub('b', 'a', a, count=3)

In [15]: x
Out[15]: 'aaabbbb' 
```

# c# - is there a Mono Alternitive to user.dll setparent and SetWindowPos?

> ID：12471170
> 
> 赞同：0
> 
> 时间：2012-09-18T05:57:59.020
> 
> 标签：c#, mono, user32

I am trying to embed an application inside another one so the user can use the application in it. I have this working correctly inside of a windows only applications but i don't want to limit it to windows so im going to convert all the normal C# code to a mono C# application witch is easy enough but im using some windows only code like the user32.dll so i was wondering if there is an alternative one i can use to get the same effect as the setParent and setWindowPos functions inside the user32.dll. it would be awesome if there is a cross platform option but if there is not is there atleast one i can use to get the same result for mac and linux? At this time mainly mac. I have been searching all over the place and i cant find qny alternatives to it.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T20:48:57.283

You have to find a different way than user32.dll on alternative platforms, the structure in for instance OSX and Linux is very different from Windows so you will have to go different ways. However depending on what you do there might be a different way to do things using only managed code. A good place for looking for managed alternatives is [PInvoke.net](http://pinvoke.net) which suggest that you can [use MDI instead of setParent](http://pinvoke.net/default.aspx/user32/SetParent.html)

But describe what you want to accomplish with calls to setParent and setWindowPos and maybe a OSX solutions is available you can utilize.

# c# - DateTime 有趣的时间值

> ID：12471176
> 
> 赞同：-3
> 
> 时间：2012-09-18T05:58:36.960
> 
> 标签：c#

我正在使用 DateTime.Now.ToString() 在应用程序中显示当前时间。在某些计算机中它看起来不错，但在其他计算机中，时间显示出有趣的值。例如，它显示 2010/11/09\0؎鹖撗䄠ϗ퉌؎鵢 任何想法如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T06:02:22.707

请检查机器的日期格式。它应该与支持应用程序的格式相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T06:05:02.670

转换时可以给它一个格式：

```
DateTime.Now.ToString("dd/MM/yyyy hh:mm:ss"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T06:05:17.487

这不好笑..转到控制面板并更改`Regional and Language Options settings`..然后再试一次

或使用文化信息

# vb.net - 为什么 vb.net 中的 server.transfer 过程很慢？

> ID：12471177
> 
> 赞同：0
> 
> 时间：2012-09-18T05:58:40.157
> 
> 标签：vb.net, server.transfer

我需要你的帮助，vb.net 中的 server.transfer 代码有问题，它运行速度太慢了。我的问题：

1.  为什么它运行缓慢（需要 5 分钟在网页 (.aspx) 之间移动）？
2.  我应该如何检查这个问题？
3.  是因为操作系统吗？我用的是windows 7，在我用windows XP之前没有这样的问题...
4.  server.transfer 是否与数据库连接相关（不确定）？我使用 mysql（XAMPP 包）。
5.  或者可能是因为我在 Windows 7 中错过了其他配置。仅供参考：我在几个网络浏览器中尝试相同的结果（加载 5 分钟）..

感谢每一位回答我问题的人，非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-09T21:29:19.210

我发现的一件事是它可能与传输页面返回的状态代码有关。如果它返回 500 错误，它可以使您的服务器传输运行五分钟以上。

如果可以的话，测试这一点的一种方法是单独运行传输的页面，并在另一端生成任何正在传输的信息，以查看是否生成了任何错误。

我花了一天的时间才弄清楚这一点。希望它可以帮助别人。

# blackberry - 亚洲的设备未收到 BlackBerry BIS 推送通知

> ID：12471178
> 
> 赞同：1
> 
> 时间：2012-09-18T05:58:44.517
> 
> 标签：blackberry, push-notification

我们正在使用 Verivo 开发平台开发一个 BB 应用程序。应用服务器在注册 BIS Push 后使用 RIM 提供的设置推送通知。我们观察到美国的 BB 设备正在成功接收通知。但是亚洲（新加坡和斯里兰卡）的设备不是。这些设备具有有效的 BIS 计划并正确连接到 BIS。可能是什么问题？

我们在使用 push 注册时确实勾选了所有三个区域。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T01:08:40.440

原因是 BB 中遗留的损坏的配置数据库。Verivo 支持建议不要使用可能导致此问题的 BB 桌面管理器安装应用程序。清除了这个重新安装，它工作。

# python - Google Drive drive.files.get API 的常见 HTTP 500 内部错误

> ID：12471180
> 
> 赞同：12
> 
> 时间：2012-09-18T05:59:02.110
> 
> 标签：python, google-drive-api

我们有一个高度依赖 Google Drive 的服务（它使用[Python SDK](https://developers.google.com/api-client-library/python/)），我们的服务通过 Google Drive 集合和文件。

查看生产日志，我们发现在调用 Google Drive 的`drive.files.get`API 端点时有很多 HTTP 500 Server Internal Errors。错误率约为 0.5%。经过调查，我发现极端情况是一小时内连续 9 次 HTTP 500 失败。

异常如下所示：

```
 File "/home/xxxxxx/xxxxxxx/storage.py", line 1185, in get_file
    gdrive_file = self.client.files().get(fileId='0Bxn2GmQxR4zHYlNvaUlFNjl6MkE', fields='id,title,modifiedDate,createdDate,fileSize,mimeType,downloadUrl,labels').execute()
  File "/usr/lib/python2.7/dist-packages/apiclient/http.py", line 389, in execute
    raise HttpError(resp, content, self.uri)
HttpError: <HttpError 500 when requesting https://www.googleapis.com/drive/v2/files/0Bxn2GmQxR4zHYlNvaUlFNjl6MkE?fields=id%2Ctitle%2CmodifiedDate%2CcreatedDate%2CfileSize%2CmimeType%2CdownloadUrl%2Clabels&alt=json returned "Internal Error"> 
```

我们的服务托管在美国 WEST-2 数据中心的 Amazon Web Service 上。

有没有人有类似的问题？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-28T12:57:03.783

由于 Google 基础架构复杂、规模庞大且分布式，因此几乎不可能实现 0% 的错误率 - 服务器或硬盘在请求期间死机、内部服务器之间的意外超时、数据中心中断或负载增加、试探性 DOS 攻击、行为不端的应用程序... - 所有这些都可能提高 500 的错误率 - 因此，作为一般的良好做法，在处理 Web API 时，在您的端实施指数退避和重试策略是很好的，实际上，如果您想提供，这几乎是强制性的一项可靠的服务，在您的终端上，它可能会消除临时网络故障等......

现在 0.5% 有点高，我相信全球平均错误率较低，但我将把它提交给 Drive 团队，以便他们进行调查并尝试减少这种情况（有时只是将超时增加到其中之一我们的服务器依赖项）。我们一直在降低错误率，但有时我们必须花时间构建新功能，尤其是当产品相当新时:)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-18T10:18:19.117

这与我看到的错误率大致相同。只需进行指数退避并重试即可。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-12-19T21:50:42.197

我曾经[`tenacity`](https://github.com/jd/tenacity)重试请求。首先安装它

```
pip install tenacity 
```

然后

```
from tenacity import retry, retry_if_exception_type, wait_exponential, stop_after_attempt
from googleapiclient.errors import HttpError

@retry(reraise=True, retry=retry_if_exception_type(HttpError),
       wait=wait_exponential(),
       stop=stop_after_attempt(5))
def function_that_calls_the_google_drive_api():
    pass 
```

# iphone - 如何检查是否在 UIButton 上添加了 uiimage 视图

> ID：12471183
> 
> 赞同：0
> 
> 时间：2012-09-18T05:59:17.027
> 
> 标签：iphone, uiscrollview

我已经从数组中的照片库中获取所有图像，然后在 UIButtons 上显示所有这些图像并将它们放入滚动视图以显示网格视图。现在，当用户单击按钮时，它应该看起来像他选择了该图像，为此我已经拍摄了一个刻度线图像并将其添加到 UIImageView 中，并在单击时在按钮上添加了该图像视图。但是现在当用户再次单击同一个按钮时，当用户已经选择了多个图像时，如何从按钮中删除该 UIImageview。这是我的代码

```
-(void)loadImagesOnScrollView
{
    scrollView.contentSize=CGSizeMake(0, 55*[assets count]);

    int x=0,y=0;
    for (int i=0; i<[assets count]; i++) {
        ALAsset *asset = [assets objectAtIndex:i];

        UIButton *btn=[UIButton buttonWithType:UIButtonTypeCustom];
        btn.frame=CGRectMake(x, y, 100, 100);
        btn.tag=i;
        [btn setImage:[UIImage imageWithCGImage:[asset thumbnail]] forState:UIControlStateNormal];
        [btn addTarget:self action:@selector(btnClkd:) forControlEvents:UIControlEventTouchUpInside];

        if(i==0)
        {

        }
        else if(i%2 ==0)
        {
            x=0;
            y=y+110;
        }
        else
        {
            x=x+110;
        }

        [scrollView addSubview:btn];

    }
}

-(void)btnClkd:(UIButton*)sender
{
    if (sender.selected) {
        sender.selected=FALSE;
     }
    else
    {
        sender.selected=TRUE;
    }

    if(sender.selected)
    {

    [sender addSubview:imgView];

    }
    else
    {

    }

} 
```

除此之外，我还有一个问题，如何设置滚动视图的内容大小，以便可以使用任意数量的图像进行调整。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T15:53:41.300

当您在选择按钮上添加图像时，设置其标签 = 常量（比如 9999）+ sender.tag。现在再次单击按钮检查是否存在带有标签 9999+sender.tag 的子视图。如果是，请从超级视图中删除该子视图

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T09:23:20.877

在您的 .h 文件中创建一个 BOOL 变量，例如：

```
BOOL isButtonClicked; // in .h file 
```

然后在你的 .m 文件中

```
-(IBAction)onButtonClick:(UIButton *)checkBoxButton
    {
        if (!isButtonClicked) {
            [checkBoxButton setImage:[UIImage imageNamed:@"tickMark.png"] forState:UIControlStateNormal];
            isButtonClicked=YES;
        }
        else
        {
            [checkBoxButton setImage:[UIImage imageNamed:@"NormalImage.png"] forState:UIControlStateNormal];
            isButtonClicked=NO;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T06:48:55.730

要检查 UIImageView 是否添加到 UIButton 使用以下..

检查按钮是否有任何 UIImage

```
 if ( [button.currentImage isEqual:[NSNull null]]) {
        NSLog(@"image exist");
    } 
```

或者

检查按钮是否有任何背景图片

```
 if ( [button.currentBackgroundImage isEqual:[NSNull null]]) {
        NSLog(@"background image exist");
    } 
```

# c++ - 编译时单例多于一次实例化检测

> ID：12471191
> 
> 赞同：2
> 
> 时间：2012-09-18T05:59:52.483
> 
> 标签：c++, templates, c++11

是否可以创建一个模板元构造，它可以在第一次（或第一次 n 次）被调用时采用一个执行路径，如果它被多次调用（超过 n 次），则可以采用另一个执行路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T06:07:55.877

不会。模板仅在编译时进行评估。

问题是关于运行时发生的事情（执行路径）。
现在应该很有可能在代码中构建这个结构，但它不是模板元结构（虽然它可以是模板元程序的一部分，但进行测试的代码将是运行时代码（即普通代码） ））。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T07:01:07.323

**使用模板可以实现的是路径的编译时间决策，就像在这个例子中使用模板专业化：**

```
template <bool whichOne>
class ExecutionExampleImpl;

template <>
class ExecutionExampleImpl<true> {
public:
  static void doIt() {
    std::cout << "Do it for the first time(s)\n";   
  }
};

template <>
class ExecutionExampleImpl<false> {
public:
  static void doIt() {
    std::cout << "Do it for the second time(s)\n";   
  }
};

template <unsigned execution>
void executionExample()
{
   const unsigned ExecutionExampleFirstLimit = 3;

   ExecutionExampleImpl<execution <= ExecutionExampleFirstLimit>::doIt();
}

int main() {
   executionExample<1>();
   executionExample<2>();
   executionExample<3>();
   executionExample<4>();
   executionExample<5>();
   executionExample<6>();
} 
```

* * *

* * *

**但是，我相信您会更喜欢运行时决策。您可以使用静态局部变量进行此操作：**

```
void executionExample()
{
   const unsigned ExecutionExampleFirstLimit = 3;
   static unsigned executionCounter = 0;
   if (executionCounter++ <  ExecutionExampleFirstLimit)
   {
      std::cout << "Do it for the first time(s)\n";   
   }
   else
   {
       std::cout << "Do it for the second time(s)\n";   
   }
}

int main() {
   for (unsigned int i = 0; i < 6; ++i)
      executionExample();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T07:02:52.210

该问题与两个明显不相关的事物相匹配：模板由编译器*实例化*（不*执行*），所需的实例由*机器*（而不是编译器）在运行时执行。

您可以做的是制作一个模板，根据常量值进行不同的实例化。如果这些实例是递归的，那么您就有一种“编译时执行”来决定要实例化什么。

[std::conditional](http://en.cppreference.com/w/cpp/types/conditional)可以是一个很好的示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T06:08:28.370

在一般情况下，是否遵循特定路径以及遵循多少次，可以在运行时决定——如果函数调用在`if`语句体中，举一个明显的例子。然而，任何依赖于模板（及其参数）的指令执行流程的构造都必须在编译时知道这一点。所以不，它不能完成。

# php - PHP登录系统在网页上显示代码

> ID：12471192
> 
> 赞同：1
> 
> 时间：2012-09-18T05:59:56.173
> 
> 标签：php, mysql, html, css

我一直在尝试通过 PHP 制作登录系统。当我尝试运行它时，所有代码`($errors as $error)`都显示在实际网页上。我一直在尝试测试它几个小时。

注意：当我将 更改为`>`时`<`，它可以正常工作，`if(count($errors) > 0){` 但这使得即使密码/用户名出现错误，他们仍然可以按 Enter 键。

请提供任何帮助！提供了代码。

```
<?
    mysql_pconnect('localhost', 'root', '');
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Login</title>
</head>
<body>
    <?php
        if(!$_POST['submit']) {
    ?>
            <form action="index.php" method="post">
                <table border="1">
                    <tr>
                        <td>
                            Username:
                        </td>
                        <td>
                            <input type="text" name="username" />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Password:
                        </td>
                        <td>
                            <input type="text" name="password" />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Retype Password:
                        </td>
                        <td>
                            <input type="text" name="passwordconf" />
                        </td>
                    </tr>
                     <tr>
                        <td>
                            Email Address:
                        </td>
                        <td>
                            <input type="text" name="email" />
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" align="center">
                            <input type="submit" value="Create User" name="submit" />
                        </td>
                    </tr>
                </table>
            </form>
    <?php
        } else {     
            $username = $_POST['username'];
            $password = $_POST['password'];
            $passwordconf = $_POST ['passwordconf'];
            $email = $_POST ['email'];

            $errors = array();

            if(!$username) {

                $errors[1] = "Please enter a username.";

            }
            if(!$password) {

                $errors[2] = "Please enter a password.";

            }
            if(!$passwordconf) {

                $errors[3] = "Please retype password.";

            }
            if(!$email) {

                $errors[4] = "Please enter an email address.";

            }
            if($password != $passwordconf) {

                $errors[5] = "Passwords do not match.";

            }
            if(count($errors) > 0){

                foreach($errors as $error) {

                    echo "$error<br>";

                }

            } else {
                mysql_query("INSERT INTO 'users' . 'user_info'
                ('username', 'password', 'email', 'user_admin_level')
                VALUES ('".$username."', '".md5($password)."', '".$email."', '1');");
            }
        }
    ?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T06:13:11.027

从 URL :file:///C:/Users/User/Desktop/LoginSystem.php 您正在访问一个不会被 PHP 解释器（wamp 或 lamp）解释的文件。

您需要安装一个 php 服务器（wamp、xamp 或 Lamp）并将您的文件放在相应的网络服务器目录中，然后通过输入这样的 url 来执行您的文件：

```
localhost/LoginSystem.php 
```

希望这会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T06:12:26.033

你不能那样运行 PHP。您需要 Web 服务器来运行 PHP。按着这些次序，

使用 XAMPP 非常简单。按着这些次序 -

1.  安装并运行[XAMPP](http://www.apachefriends.org/en/xampp.html)应用程序。通过它打开 Apache & MySQL（如果您的应用程序需要数据库）服务。
2.  单击 XAMPP 控制面板上的“探索”按钮 - 在打开的窗口中，检查 htdocs 文件夹。
3.  htdocs 文件夹是所有 PHP 脚本所在的文件夹。这是 Apache 指向的文件夹。
4.  您可能希望在 /htdocs/ 文件夹中创建一个单独的文件夹来保存所有 PHP 程序。我们称它为“我的程序”。
5.  将您的 php 脚本保存在 /htdocs/myprograms 文件夹中。（例如 test.php）
6.  现在，启动您的网络浏览器并输入以下地址：`http://localhost/myprograms/test.php`

您的浏览器现在将执行脚本并向您显示输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T06:09:41.787

如果没有为它们提供服务的网络服务器，您将无法调用 PHP 文件。PHP 是“PHP Hyptertext Preprocessor”的首字母缩写词，这意味着需要一个预处理器来解释这些文件。

尝试使用[XAMPP](http://www.apachefriends.org/en/xampp.html)，这是一个轻量级的服务器系统，带有一个 apache 网络服务器、一个 mySQL 服务器以及 PHP 和 PERL 支持。

使用 XAMPP 时，已将 php 文件放入 XAMPP 安装的 htdocs 文件夹中，然后调用`http://localhost/yourscript.php`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T06:09:49.873

@Rick Roll'd

像这样打开你的 php 页面

```
http://localhost/path_to_page/LoginSystem.php 
```

不要将您的页面存储在目录中的`Desktop`保存 php 页面上。`www/htdocs`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T06:54:11.817

也许您应该先放置 HTML 代码。空字段并不总是错误。例如：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Login</title>
</head>
<body>

<form action= "<?php $_SERVER[ 'PHP_SELF' ] ?>" method="post">
  <table border="1">
    <tr>
      <td>
        Username: </td>
      <td>
        <input type="text" name="username" />
      </td>
    </tr>
    <tr>
      <td>
        Password: </td>
      <td>
        <input type="text" name="password" />
      </td>
    </tr>
    <tr>
      <td>
        Retype Password: </td>
      <td>
        <input type="text" name="passwordconf" />
      </td>
    </tr>
    <tr>
      <td>
        Email Address: </td>
      <td>
        <input type="text" name="email" />
      </td>
    </tr>
    <tr>
      <td colspan="2" align="center">
        <input type="submit" value="Create User" name="submit" />
      </td>
    </tr>
  </table>
</form>

</body>
</html>

<?php
if ( isset ( $_POST[ 'submit' ] ) ) {

  if ( $_POST[ 'username' ] ) {
    $username = $_POST[ 'username' ];
    $username = trim( $username) ; // Remove spaces
  }
  else {
    echo "Please enter a username.<br /><br />";
    die;
  }

 // And so on....

  mysql_pconnect( 'localhost', 'root', '' );
  mysql_query( "INSERT INTO 'users' . 'user_info'
                ('username', 'password', 'email', 'user_admin_level')
                VALUES ('" . $username . "', '" . md5( $password ) . "', '" . $email . "', '1');" );
}
?> 
```

您可以按照建议安装本地服务器进行测试，或将文件上传到您的 ISP 服务器。

希望这可以帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-18T06:09:24.430

尝试显示 $errors 和大小（**print_r($errors); echo count($errors);**），看看它是否真的没有内容。

另外我会将**if(!$username)**更改为**if (empty($username))** + 接受用户输入为 $var = $_POST['varname'] 是非常糟糕的做法。

此外，数组始终以键 0 开头（您手动将其分配给键 1）。要简单地将元素添加到数组中，请使用**$errors[] = "you forgot something";**

我个人建议您从 Drupal/cakePHP/phpBB/...等项目中选择登录/会话类。

# php - 如何将两个 preg_replace 添加在一起？

> ID：12471197
> 
> 赞同：0
> 
> 时间：2012-09-18T06:00:22.590
> 
> 标签：php

我如何将这两个 preg_replace 加在一起？我不知道该怎么做。

```
<?= preg_replace('/@(\w+)/', '<a href="https://www.twitter.com/$1">@$1</a>', stripslashes($row['tweet_text']))?>
<?= preg_replace('/#(\w+)/', '<a href="https://twitter.com/#!/search/$#$1">#$1</a>', stripslashes($row['tweet_text']))?> 
```

它会做这两件事

```
stripslashes($row['tweet_text'] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T06:05:49.137

你可以这样做：

```
$regex = array('/@(\w+)/','/#(\w+)/');
$replace = array(
  '<a href="https://www.twitter.com/$1">@$1</a>',
  '<a href="https://twitter.com/#!/search/$#$1">#$1</a>'
);
preg_replace($regex,$replace,stripslashes($row['tweet_text'])); 
```

检查文档： http: [//php.net/manual/en/function.preg-replace.php](http://php.net/manual/en/function.preg-replace.php)

另外，[这是一个很好的例子](http://3v4l.org/aevH0)。

# javascript - Javascript 数组动态

> ID：12471201
> 
> 赞同：0
> 
> 时间：2012-09-18T06:00:40.593
> 
> 标签：javascript

我有一个如下的javascript代码

```
function createArray()
{
    var myArr = new Object();
    myArr[0] = createSubArray('apple');
    myArr[1] = createSubArray('Mango');
    myArr[2] = createSubArray('Pineapple');
    myArr[3] = createSubArray('Grape'); */
    document.getElementById("a").innerHTML = JSON.stringify(myArr);
    return myArr;
} 

function createSubArray(name){
    var arr = new Object();
    elems = document.getElementsByName(name);
    for (var i=0;i<elems.length;i++){
        if (elems[i].checked){
            arr[name] =  elems[i].value;
            arr['price'] =  elems[i].getAttribute('data-price');
        }
    }
    return arr;

} 
```

我需要将此 createArray() 函数更改为 dynimic 但我不知道这怎么可能这是我尝试过的代码

```
function createArray()
{
    var myArr = new Object();
    elems = document.getElementsByTagName("input");
     for (var i=0;i<elems.length;i++){
        var elmcheck = elems[i].getAttribute('type');
        //alert(elmcheck);
        if (elems[i].checked)
        {
         alert("A Radio Is Check "+elems[i].getAttribute('name'));
         myArr[i] = createSubArray(elems[i].getAttribute('name'));
        }
    }
    document.getElementById("a").innerHTML = JSON.stringify(myArr);
    return myArr;
} 

function createSubArray(name){
    var arr = new Object();
    elems = document.getElementsByName(name);
    for (var i=0;i<elems.length;i++){
        if (elems[i].checked){
            arr[name] =  elems[i].value;
            arr['price'] =  elems[i].getAttribute('data-price');
        }
    }
    return arr;

} 
```

但它不起作用任何人都可以帮助我解决..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T06:04:31.543

试试这个它可能对你有用

```
function createArray()
{
    var myArr = new Object();
    var elems = document.getElementsByTagName("input");
     for (var i=0;i<elems.length;i++)
     {
       if (elems[i].checked)
       {
          myArr[i] = createSubArray(elems[i].getAttribute('name'));
       }
     }
    document.getElementById("a").innerHTML = JSON.stringify(myArr);
    return myArr;
} 

function createSubArray(name){
    var arr = new Object();
    var elems = document.getElementsByName(name);
    for (var i=0;i<elems.length;i++)
    {
        if (elems[i].checked)
        {
            arr[name] =  elems[i].value;
            arr['price'] =  elems[i].getAttribute('data-price');
        }
    }
    return arr;
} 
```

# cassandra - Cassandra 超柱结构

> ID：12471207
> 
> 赞同：2
> 
> 时间：2012-09-18T06:01:41.970
> 
> 标签：cassandra, super-columns

我是 Cassandra 的新手，对超级专栏不熟悉。

考虑这种情况：假设我们有一个客户实体的一些字段，例如

*   姓名
*   联系方式
*   地址

我们可以将所有这些值存储在一个普通列中。我想安排当一个人从一个位置移动到另一个位置（代表字段可以存储经度和纬度）时，值将相对于客户位置*连续存储。*我认为我们可以使用超级列来做到这一点，但我很困惑如何设计架构来实现这一点。

请帮助我创建此架构并了解超级列背后的概念。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T14:14:55.580

超级柱真的不再推荐了……仍在使用，但越来越多的人改用复合柱。例如 playOrm 使用这个概念进行索引。如果我正在索引一个整数，并且索引行可能看起来像这样

```
rowkey =  10.pk56 10.pk39 11.pk50 
```

在这种情况下，列名类型是复合整数和字符串。这些行最多可以有大约 1000 万列，尽管我自己只运行了高达 100 万的过期时间。例如，playOrm 的查询使用这些类型的索引来执行对 1,000,000 行花费 60 毫秒的查询。

使用 playOrm，您可以在 noSQL 中构建可扩展的关系模型……您只需要弄清楚如何正确地对数据进行分区，因为您可以在每个表中拥有任意数量的分区，但分区实际上不应超过 10万行。

回到这个例子，如果你有一个包含 numShares、price、username、age 列的表，你可以索引 numShares，上面的行就是那个索引，所以你可以通过键获取索引，或者更好的是，获取所有列numShares > 20 且 numShares < 50 的名称

一旦你有了这些列，你就可以得到作为主键的列名的后半部分。主键不是值的原因是因为在上面的示例中，有两行 pk56 和 pk39 具有相同的 10，并且您不能有两个名为 10 的列，但您可以有 10.pk56 和 10.pk39。

后来，迪恩

# java - 如何使用正则表达式找到重叠的单词集？

> ID：12471208
> 
> 赞同：2
> 
> 时间：2012-09-18T06:01:44.487
> 
> 标签：java, regex

现在我有一个正则表达式，看起来像是`"\\w+ \\w+"`找到 2 个单词的短语，但是，它们不重叠。例如，如果我的句子是`The dog ran inside`，则输出会`"The dog", "ran inside"`在我需要它时显示`"The dog", "dog ran", "ran inside"`。我知道有一种方法可以做到这一点，但我对使用正则表达式太陌生了，不知道如何做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T07:42:01.267

您可以使用前瞻、捕获组和单词边界锚点来执行此操作：

```
Pattern regex = Pattern.compile("\\b(?=(\\w+ \\w+))");
Matcher regexMatcher = regex.matcher(subjectString);
while (regexMatcher.find()) {
    matchList.add(regexMatcher.group(1));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T07:31:17.997

简单（大字符串更快）的方法是使用*split*：

```
 final String[] arrStr = "The dog ran inside".split(" ");
    for (int i = 0, n = arrStr.length - 1; i < n; i++) {
        System.out.format("%s %s%n", arrStr[i], arrStr[i + 1]);
    } 
```

输出

```
The dog
dog ran
ran inside 
```

没有发现正则表达式的技巧

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T06:20:18.823

纯粹使用正则表达式是不可能的，你不能两次匹配相同的字符（“狗”不能在两个单独的组中）。像这样的东西根本不需要正则表达式，你可以简单地用空格分割字符串，然后按照你喜欢的方式组合它：

```
>>> words = "The dog ran inside".split(" ")
>>> [" ".join(words[i:i+2]) for i in range(len(words)-1)]
['The dog', 'dog ran', 'ran inside'] 
```

如果这不能解决您的问题，请提供有关您要完成的工作的更多详细信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T06:20:35.513

使用先行获得第二个单词，将非先行与先行部分连接起来。

```
# This is Perl. The important bits:
#
# $1 is what the first parens captured.
# $2 is what the second parens captured.
# . is the concatenation operator (like Java's "+").

while (/(\w+)(?=(\s+\w+))/g) {
   my $phrase = $1 . $2; 
   ...
} 
```

抱歉，对 Java 的了解不够，但这在 Java 中也应该很容易做到。

# java - 如何将 3 个命令包含到 1 个 java 类中

> ID：12471211
> 
> 赞同：1
> 
> 时间：2012-09-18T06:02:10.300
> 
> 标签：java

请在以下问题中提出建议。

有 UNIX 服务器。我有 3 个可以在 UNIX 服务器中执行的单独命令：

```
 1\. java com.documentum.server.impl.utils.TestConnection SERVER_NAME PORT_NUMBER do_method
 2\. dmqdocbroker -t SERVER_NAME -p PORT_NUMBER -c getserver
 3\. dmqdocbroker -t SERVER_NAME -p PORT_NUMBER -c getservermap <REPOSITORY_NAME> 
```

注意：dmqdocbroker - shell 脚本。

我想将 3 个命令包含到一个 java 类中，并将每个命令的输出写入单独的日志文件。但我不知道如何实现它。

另外，您能否建议如何在eclipse中检查它？

请指教。

带着敬意！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T06:32:20.377

根据其他答案，shell 实现如下所示：

```
#!/bin/sh
java com.documentum.server.impl.utils.TestConnection SERVER_NAME PORT_NUMBER do_method &> log_file_1
dmqdocbroker -t SERVER_NAME -p PORT_NUMBER -c getserver &> log_file_2
dmqdocbroker -t SERVER_NAME -p PORT_NUMBER -c getservermap <REPOSITORY_NAME> &> log_file_3 
```

如果您很好奇，这`command &> filename`意味着您将标准输出和错误输出都放在同一个日志文件中。如果您希望它们转到不同的日志文件，您可以`> fileA`对标准输出和`2> fileB`标准错误进行任意组合。

最后，如果你想让这三个命令同时发生，你可以`&`在最后加上一个bare。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T06:11:41.553

查看 Process 和 Runtime.exec 的 api。在 Process 中，您可以使用 getInputStream() 和 getErrorStream() 来获取进程的 stdout 和 stderr 并进行重定向。

但是，为此目的编写 java 程序对我来说没有意义。编写一个 shell 脚本会简单得多。

# c# - C#.NET MVC Ajax 表单提交

> ID：12471213
> 
> 赞同：1
> 
> 时间：2012-09-18T06:02:40.410
> 
> 标签：c#, .net, ajax, asp.net-mvc-3

感觉好像我在这里遗漏了一些简单的东西 - 当我提交此表单时，它会将我带到一个带有我编码的 JSON 模型的白页，而不是停留在我所在的页面上。

局部视图中的表单，在每个页面上加载：

```
@using (Ajax.BeginForm("Inquiry", "Home", new AjaxOptions { HttpMethod = "POST", OnSuccess = "success" })) 
```

而我的行动：

```
 public ActionResult Inquiry()
    {
        return PartialView("_Inquiry",new Inquiry());
    }

    [HttpPost]
    public JsonResult Inquiry(Inquiry model)
    {
        if (ModelState.IsValid)
        {
            db.Inquiries.Add(model);
            db.SaveChanges();
        }
        return Json(model);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T06:04:10.077

确保您在页面中引用了以下脚本：

```
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script> 
```

这就是使`Ajax.*`助手工作的原因。

# content-management-system - 如何为管理员 cms 上的 yii 控制器操作设置 cpanel cron 作业

> ID：12471216
> 
> 赞同：1
> 
> 时间：2012-09-18T06:02:47.293
> 
> 标签：content-management-system, yii, cron, command, cpanel

我有一个基于 yii 框架的网站。我需要为 Cpanel cron 作业中的控制器操作设置一个 cron 作业。我已经尝试了以下命令并且它工作正常 GET [http://www.mydomain.com/controller/action](http://www.mydomain.com/controller/action)

这是我的问题。我需要执行 admincms 中的控制器操作。命令应该如下，GET [http://www.mydomain.com/admincms/controller/action](http://www.mydomain.com/admincms/controller/action)

但这没有运行。我认为这是因为管理员 CMS 的密码保护。（这个 cron 正在为站点生成站点地图。这与 CMS 有关。这就是为什么我需要在管理员中使用控制器）

任何想法表示赞赏？？？

伊拉万

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T06:45:10.193

是的，您是正确的，应该更改此控制器的 yii 访问规则。

打开控制器类并转到**accessRules**函数并包括未经身份验证的用户的操作。

```
 array('allow',  // allow all users to perform 'index' and 'view' actions
    'actions'=>array('action'), 
    'users'=>array('*'),
), 
```

# plugins - erb 评论 vi 插件

> ID：12471218
> 
> 赞同：3
> 
> 时间：2012-09-18T06:02:52.110
> 
> 标签：plugins, comments, vi, erb

我总是使用 nerdcommenter 来注释我的代码中的块，它几乎适用于所有类型的编程语言。但是，我最近一直在编辑很多 .html.erb 文件。当我评论

```
<%= text_field_tag 'sid',nil,:class=>"input-medium search-query" %> 
```

打字后`,cb`

我得到以下结果

```
<%#<%= text_field_tag 'sid',nil,:class=>"input-medium search-query" %>%> 
```

我想要的是

```
<%#= text_field_tag 'sid',nil,:class=>"input-medium search-query" %> 
```

我如何使它工作或者是否有任何其他好的插件可以在 vi 编辑器下编辑 erb 文件。

# iphone - 如何连接谷歌api

> ID：12471225
> 
> 赞同：1
> 
> 时间：2012-09-18T06:03:48.677
> 
> 标签：iphone, xcode, google-api

对于我的应用程序，我需要使用 GOOGLE API 获取附近的酒店。如何将我的应用程序与 GOOGLE API 连接以从谷歌获取图像？从谷歌数据库中，我必须访问酒店的图像，这样我才能找出是否有可用的房间......
有可能还是有其他可用的方法？怎么做到呢？
实际上我将 JSON 解析器类文件添加到我的代码中，但后来我找不到如何从谷歌获取图像。

谢谢你的代码！！！！

# ios - 升级应用问题

> ID：12471229
> 
> 赞同：0
> 
> 时间：2012-09-18T06:04:20.593
> 
> 标签：ios, screenshot, upgrade

我的 App 已经在 App Store 上架了。现在我想升级它。

在我上传新的二进制文件之前，我可以先通过 iTunes connect 更新 App Store 中的描述吗？

在我上传新的二进制文件之前，这个更新的描述会显示在 App Store 中吗？

我已更改描述但无法保存，因为旧屏幕截图需要更改其大小。

但是如果我选择“取消”按钮，而不是点击“保存”，我更改的描述是否会被保存，除了屏幕截图吗？

如果我更改的描述被保存，那么下次我只需要更改屏幕截图。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T07:09:27.867

登录 iTunes Connect -> 管理您的应用程序 -> 您的应用程序 -> 当前版本 -> 元数据和上传编辑后，可以编辑应用程序当前版本的元数据。在这里您可以对描述进行更改。![请参阅随附的屏幕截图](../Images/beabee64b4ab6fcea1e8abe39edeed84.png).

点击添加版本可以添加应用程序的新版本，填写“版本号”。&“这个版本有什么新东西？”。在此之后单击您的新版本并编辑此新版本应用程序的元数据，一旦获得批准，此元数据将与新版本一起在应用商店中提供。![参考图片](../Images/3b2d8507ae20da486284ca9aa142e5c9.png)

我希望这能回答您的问题。

# mysql - mysqldump 文件的位置

> ID：12471233
> 
> 赞同：0
> 
> 时间：2012-09-18T06:04:46.500
> 
> 标签：mysql, mysqldump, ubuntu-12.04

目前我正在使用 ubuntu 中的命令行学习 MySql，并使用 mysqldump 命令备份了名为“sandwich”的数据库。

**mysql> #mysqldump -u root -p123456 三明治> db_backup.sql;**

我可以在磁盘上的哪里找到这个“db_backup.sql”文件。请告诉我一个特定的文件路径，我可以在其中找到该文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T06:31:49.983

这取决于您执行命令时所处的位置 - db_backup.sql 将在那里找到，因为您没有指定完整路径。

如果您不记得，请尝试您的主目录或网络目录 - 输入 mysql 时您可能去过的任何地方。如果一切都失败了，你可以使用 find：

```
find / -name 'db_backup.sql' 
```

这可能需要一些时间，因此如果您可以缩小搜索范围并将 / 替换为 ~/ 例如，那将有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-04T12:07:15.107

在不登录 mysql 终端的情况下运行以下命令。

```
mysqldump -u root -p db_name > db_dump.sql 
```

它会要求输入密码。输入密码。

转储完成后，键入以下命令。

```
ls 
```

您将`db_dump.sql`在列表中看到文件。

# php - 在 PHP 中从 localhost 站点下载文件

> ID：12471234
> 
> 赞同：-1
> 
> 时间：2012-09-18T06:04:52.850
> 
> 标签：php

当我下载带有扩展名的文件时，例如 mp3，flv 等，它现在将下载它开始缓冲当我从它下载的文件中删除扩展名时......

你能告诉它背后的问题是什么......

要下载的文件是 => theangelfoundation-12-5-2012-09-17-27-somebody.mp3

提前致谢 ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T06:29:30.907

```
 $file_types=array();

             $file_types['mp3']   ='audio/mpeg';
             $file_types['mpeg']  ='video/mpeg';
             $file_types['mpg']   ='video/mpeg';
             $file_types['pdf']   ='application/pdf';
             $file_types['pps']   ='application/vnd.ms-powerpoint';
             $file_types['ppt']   ='application/vnd.ms-powerpoint';
             $file_types['ps']    ='application/postscript';
             $file = 'you.mp3';  
             download($file,$file_types);    

function download($file_name,$file_types){

          $file = $file_name;
          $ext = end(explode('.',$file_name));
          if($ext && array_key_exists($ext,$file_types)){
          if (file_exists($file)) {
             header('Content-Description: File Transfer');
             header('Content-Type: application/octet-stream');
             header('Content-Disposition: attachment; filename='.basename($file));
             header('Content-Transfer-Encoding: binary');
             header('Expires: 0');
             header('Cache-Control: must-revalidate');
             header('Pragma: public');
             header('Content-Length: ' . filesize($file));
             ob_clean();
             flush();
             readfile($file);
             exit;
             }
          }
         else {
            die("this is not a downloadable file");
             }

        }

?>
<a href="force_download.php?file=ok.txt"> download ok.txt</a> 
```

# ios - 运行 AVFoundation/AVAudioPlayer 框架时出现 XCode 链接器错误

> ID：12471237
> 
> 赞同：1
> 
> 时间：2012-09-18T06:05:03.613
> 
> 标签：ios, xcode

所以我尝试了一个简单的应用程序来播放一个简单的 mp3，出于某种原因，无论我尝试什么，我都会遇到同样的错误。每当我包含 AVFoundation/AVAudioPlayer 时它就无法运行，它会在我身上崩溃。但是一旦我删除了该框架，它就可以正常工作。请帮忙。

这是我收到的错误..

```
 ld: warning: ignoring file /Users/nnamdiokeke/Desktop/Play/AVFoundation.framework/AVFoundation, file was built for unsupported file format ( 0xce 0xfa 0xed 0xfe 0x c 0x 0 0x 0 0x 0 0x 9 0x 0 0x 0 0x 0 0x 6 
0x 0 0x 0 0x 0 ) which is not the architecture being linked (i386): /Users/nnamdiokeke/Desktop/Play/AVFoundation.framework/AVFoundation
    Undefined symbols for architecture i386:
      "_OBJC_CLASS_$_AVAudioPlayer", referenced from:
          objc-class-ref in ViewController.o
    ld: symbol(s) not found for architecture i386
    clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

代码粘贴在下面。

头文件

```
//
//  ViewController.h
//  Play
//
//  Created by Nnamdi Okeke on 9/13/12.
//  Copyright (c) 2012 Nnamdi Okeke. All rights reserved.
//

#import <UIKit/UIKit.h>
#import <AVFoundation/AVAudioPlayer.h>

@interface ViewController : UIViewController <AVAudioPlayerDelegate> {

    AVAudioPlayer *song;
    NSURL *songlink;
}

 @property (nonatomic, retain) AVAudioPlayer *song;

-(IBAction)play:(id)sender;

@end 
```

实施文件

```
//
//  ViewController.m
//  Play
//
//  Created by Nnamdi Okeke on 9/13/12.
//  Copyright (c) 2012 Nnamdi Okeke. All rights reserved.
//

#import "ViewController.h"
#import <AVFoundation/AVAudioPlayer.h>

@implementation ViewController

- (void)viewDidLoad
{
    songlink = [NSURL fileURLWithPath:[[NSBundle mainBundle]pathForResource:@"A4Hood" ofType:@"mp3"]];
    song = [[AVAudioPlayer alloc] initWithContentsOfURL:songlink error:nil];
    song.delegate = self;
    //[song play];

    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

-(IBAction)play:(id)sender {
    songlink = [NSURL fileURLWithPath:[[NSBundle mainBundle]pathForResource:@"A4Hood" ofType:@"mp3"]];
    song = [[AVAudioPlayer alloc] initWithContentsOfURL:songlink error:nil];
    song.delegate = self;
    [song play];

}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T06:38:36.447

> 每当我包含 AVFoundation/AVAudioPlayer 时它都无法运行

因为包含头文件是不够的 - 你必须再次**链接 AVFoundation.framework**，否则动态加载器如何知道从哪里加载不在你的二进制文件中的符号？因此，您必须在 Xcode 中将 AVFoundation 框架添加到您的项目中。

更多关于为什么这在[此处](http://caml.inria.fr/pub/docs/oreilly-book/html/book-ora065.html)是必要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T09:56:54.680

我实际上遇到了同样的问题，编译器对此感到困惑：

```
#if defined(__cplusplus)
    #define AVF_EXPORT extern "C"
#else
    #define AVF_EXPORT extern
#endif 
```

在 AVAudioSettings 中，此定义被使用，编译器不解释。可能是因为我在我的应用程序中使用了一些 C++ 吗？

测试后，问题就来了。要解决这个问题，请创建另一个包含 AVAudio 的类，并使用您的音频执行您必须做的事情。

似乎 AVAudio 和 C++ 并没有很好。我希望它可以帮助

# javascript - javascript: TypeError: document.getElementById("myTable") 为空

> ID：12471249
> 
> 赞同：0
> 
> 时间：2012-09-18T06:05:59.743
> 
> 标签：javascript, html, dom, getelementbyid

我收到以下错误：

```
TypeError: document.getElementById("myTable") is null 
```

在 document.write(document.getElementById("myTable").rows[i].innerHTML); 它进入了一个永无止境的循环。

有人可以告诉我我做错了什么吗？谢谢你。

我的代码：

```
<script type="text/javascript">
function colorRows(){
count=document.getElementById("myTable").rows.length;
alert("count is:"+count);
            for (i=0;i<=count;i++){
                if (i%2===0){
                    document.write(document.getElementById("myTable").rows[i].innerHTML);
                }
            }
}
</script> 
</head>

<body>
<table id="myTable">

<tr>
    <th>emp_id</th>
    <th>name</th>
    <th>age</th>
</tr>
<tr>
    <td>1</td>
    <td>vaani</td>
    <td>35</td>
</tr>
<tr>
    <td>2</td>
    <td>Ramu</td>
    <td>37</td>
</tr>
<tr>
    <td>3</td>
    <td>Iniyan</td>
    <td>5</td>
</tr>
<tr>
    <td>4</td>
    <td>Mickey</td>
    <td>10</td>
</tr>
</table>
<form method="post" action="JavaScript:colorRows();">
<input type="submit" value="Submit" />
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T06:33:30.613

这是因为当您`document.write`第一次在循环中执行时，您清除了 dom 并且没有更多的 table 元素，而当您`document.write`在第二次执行时，则`document.getElementById("myTable")`提供了`null`. 因此浏览器停止脚本提供错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T06:37:47.197

当我运行您的代码时，我遇到了同样的错误。我将 myTable 放到 for 之外的一个新变量中。它工作正常。像那样。

```
var myTableVar = document.getElementById("myTable");
    var i;
    for (i=0;i<=count;i++){
        alert("i = " + i);
        if (i%2===0){
            document.write(myTableVar.rows[i].innerHTML);
        }
    } 
```

完整代码：

```
<html>
<head>
<script type="text/javascript">
    function colorRows(){
    count=document.getElementById("myTable").rows.length;
    alert("count is:" + count);
    var myTableVar = document.getElementById("myTable");
    var i;
    for (i=0;i<=count;i++){
        alert("i = " + i);
        if (i%2===0){
            document.write(myTableVar.rows[i].innerHTML);
        }
    }
}
</script> 
</head>

<body>
<table id="myTable">

<tr>
    <th>emp_id</th>
    <th>name</th>
    <th>age</th>
</tr>
<tr>
    <td>1</td>
    <td>vaani</td>
    <td>35</td>
</tr>
<tr>
    <td>2</td>
    <td>Ramu</td>
    <td>37</td>
</tr>
<tr>
    <td>3</td>
    <td>Iniyan</td>
    <td>5</td>
</tr>
<tr>
    <td>4</td>
    <td>Mickey</td>
    <td>10</td>
</tr>
</table>
<form method="post" action="JavaScript:colorRows();">
<input type="submit" value="Submit" />
</form>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T06:40:53.307

试试这个

```
function colorRows(){
    var table = document.getElementById("myTable");
    count=table.rows.length;
    alert("count is:"+count);
    for (i=0;i<=count;i++){
        if (i%2===0){
            document.write(table.rows[i].innerHTML);
        }
    }
} 
```

无论如何，最好只访问表一次。document.write() 清除页面，因为它调用了 document.open()

# php - CakePHP - 我应该使用 HABTM，如果没有，如何为多重自引用模型设置连接表？

> ID：12471252
> 
> 赞同：0
> 
> 时间：2012-09-18T06:06:35.407
> 
> 标签：php, has-and-belongs-to-many, cakephp-2.1

所以我正在建立一个课程系统，课程有前置要求。一门课程可能是许多其他课程的先决条件，并且本身也可能有许多先决条件。我有一个 Course 模型，我目前正在使用 HABTM 连接表，因为我还需要跟踪 pre-req 的类型（常规、co-req 或我们所说的“pre-req with concurrency”：你可以同时接受先决条件）。这是课程模型：

```
class Course extends AppModel {
        public $name = 'Course';
        public $belongsTo = 'Department';
        public $hasMany = array(
            'Instance' => array('className' => 'Instance'),
        );
        public $hasAndBelongsToMany = array(
            'Prereq' => array(
                'className' => 'Course',
                'joinTable' => 'prereq_successor',
                'foreignKey' => 'successor_id',
                'associationForeignKey' => 'prereq_id', 
                'unique' => 'keepExisting'
            )
        );
} 
```

问题是我需要为 saveAll 构建一些数据（来自通过文件上传的数据，而不是表单）并且无法从文档中弄清楚如何做到这一点。

我已经尝试过这个（控制器代码），基于 cakePHP 2.0 书，但它默默地失败了：

```
//test based on cakePHP 2.0 book fails:
$data = array(
    'Course' => array('id' => 1),
    'Prereq' => array(
        'successor_id' => 1,
        'prereq_id' => 3,
        'type' => 'prereq'
    )
);
$result = $this->Course->saveAssociated($data); 
```

我试过这个（控制器代码）但没有成功：

```
//test based on cakePHP 2.0 book fails:
$data = array(
    array(
        'Course' => array('id' => 1),
        'Prereq' => array(
            'successor_id' => 1,
            'prereq_id' => 3,
            'type' => 'prereq'
        )
    )
);
$result = $this->Course->saveAll($data); 
```

在此先感谢，戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:40:49.180

我认为问题出在您的数据上。尝试这个：

```
$data = array(
    array(
        'Course' => array('id' => 1),
        'Prereq' => array(
            array(
                'successor_id' => 1,
                'prereq_id' => 3,
                'type' => 'prereq'
            )
        )
    )
);
$result = $this->Course->saveAll($data); 
```

# wix - VS2012 和 Wix 3.6 - 使用我的应用程序安装 .Net 4.5

> ID：12471254
> 
> 赞同：2
> 
> 时间：2012-09-18T06:06:50.913
> 
> 标签：wix, .net-4.5, wix3.6, bootstrapper, burn

我对安装程序世界很陌生。

我已经成功地为我的应用程序制作了一个 .msi，它正在使用快捷方式构建，并且可以正确卸载。

我的下一个目标是将 .Net 4.5 与安装程序打包，并在安装我的应用程序之前安装它。

我也有需要安装的第三方应用程序。它被打包为一个 msi。

据我所知，我需要开发一个引导程序解决方案来按顺序安装这些应用程序。

任何人都可以提供有关如何以这种方式实施安装程序的指南吗？我的搜索提出了一堆部分实现，并假设在 Visual Studio 中设计了 Wix Bootstrapper 项目。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-25T23:22:53.763

我希望这可以帮助别人。我花了5个小时才弄明白。也许，我的错，但在文档或博客中没有找到任何关于它的信息。

所以我的方案是：VS 2012，带有 Burn bootsrapper 的 WIX 3.6，创建一个安装程序可执行文件以检查 .NET Framework 4.5 并通过下载（如果尚未安装）进行安装。听起来很简单。它是。其实很。

1.  创建您的 MSI 安装程序项目 (WIX Setup Project)，为您的应用程序生成安装程序。
2.  为您的安装程序可执行文件创建一个 WIX 引导程序项目。
3.  按照[此处](http://wix.sourceforge.net/manual-wix3/authoring_bundle_intro.htm)的说明创建您的 Boundle.wxs
4.  添加对可在 WIX 程序目录中找到的 WixNetFxExtension.dll 的引用。
5.  在您的链中包含以下行：

`<PackageGroupRef Id="NetFx45Redist"/>`

实际上，WixNetFx 扩展包含 .NET Framework 4.5 的有效安装包定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T14:30:39.293

正如caveman_dick 提到的，WiX 3.6 中的 Burn 支持这一点，但您可能还想看看 dotNetInstaller ( [http://dblock.github.com/dotnetinstaller/](http://dblock.github.com/dotnetinstaller/) )。我们使用它来安装 .NET 4.0，但我确信它也适用于安装 4.5。它还可以非常轻松地安装其他 MSI 依赖项。

# objective-c - 如何在 iOS 中将 AutoScroll 添加到 Scrollview？

> ID：12471261
> 
> 赞同：2
> 
> 时间：2012-09-18T06:07:51.410
> 
> 标签：objective-c, ios, scrollview

我在 iOS 中有 Scollview。在那个滚动视图中，我有两个**Table Views**。

如果 Table 视图的内容动态增加（按行），那么我想将**AutoScroll**添加到**Scrollview**。

有人对此有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T06:32:05.133

您可以使用以下行进行一次自动滚动。

如果要水平滚动设置 x，否则设置 y 垂直滚动。

```
[scrollView setContentOffset:CGPointMake(x, y) animated:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T06:45:56.127

我在文本字段中这样编码....

```
-(BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
    if(textField == expenseAmount)
    {

        [self.expenseScrollview setContentOffset:CGPointMake(0.0,50) animated:YES];
       // [self registerForKeyboardNotifications];
    }
    if(textField == exchangeRate){

        [self.expenseScrollview setContentOffset:CGPointMake(0.0,120) animated:YES];

    }

    return YES;
} 
```

通过遵循这个想法，您可以在表格视图增量中实现[在您需要设置的点]

你需要增加滚动大小的东西意味着你需要使用它....

```
scrollView.contentSize = CGSizeMake(yourWidth,yourHeight); 
```

# java - 如何为每个 Windows Azure 虚拟机操作系统设置一些唯一标识符

> ID：12471264
> 
> 赞同：2
> 
> 时间：2012-09-18T06:08:02.600
> 
> 标签：java, azure, environment-variables, virtual-machine, azure-vm-role

我有一些使用相同配置运行的虚拟机。在这些虚拟机上，我安装了我的应用程序。

我想在我的 VM 中设置一些自定义唯一标识符，以便我知道如果特定（来自我的应用程序）请求来自该请求来自哪个 VM（或者该应用程序在哪个 VM 中运行）。由于相同的应用程序在所有 VM 中运行，因此为了区分每个请求，我想在创建虚拟机时设置一些唯一的自定义标识符。

我想在创建虚拟机时设置一些系统属性/环境变量。

我正在使用 Windows Azure Rest API 和 Java 在 Windows Azure 门户上创建和管理虚拟机。我想通过使用 Java 编程语言来实现这一点。

如果您有相同的信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T06:37:58.743

~~每个实例都应该有一个不同的 SID，因为机器是使用 generalize 选项进行系统准备的（当您想要提供自定义映像时同样适用）。[您可以使用此问题](https://stackoverflow.com/questions/2254660/get-machine-sid-including-primary-domain-controller)中的代码获取 SID ，并将其用作标识符：~~

 ~~```
 string domainName;
        Helper.SID_NAME_USE accountType;
        SecurityIdentifier machineSID = 
                Helper.LookupAccountName("", Environment.MachineName, out domainName, out accountType); 
```~~ 

~~注意：即使它在代码中显示 domainName，您的机器也不需要在域中才能正常工作。~~

要在 VM 上设置“自定义标识符”，您可以使用环境变量。由于您使用的是 Java，因此设置这些的最简单方法可能是**setx.exe**命令行工具（[下载](http://support.microsoft.com/kb/927229)）。您可以像这样调用该工具：

```
setx.exe VmIdentifier 123 -m 
```

然后你应该能够使用系统阅读它：

```
System.getenv("VmIdentifier") 
```

我不清楚您使用的是虚拟机 (IaaS) 还是云服务 (PaaS)。如果您使用的是虚拟机，则由您自行部署应用程序，在此过程中，您还可以执行**setx.exe**。

现在，如果您使用云服务，您实际上上传了一个部署在您的实例上的包。您还可以获得对启动任务（在应用程序启动之前运行）的支持：[How to Define Startup Tasks for a Role](http://msdn.microsoft.com/en-us/library/windowsazure/gg456327.aspx)。您可以使用启动任务来运行 setx.exe，但请确保在 executionContext 设置为提升的情况下运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T06:30:43.003

您可以使用远程桌面服务连接到您的虚拟机，因此连接并将设置添加到应用程序的 web.config 文件以标识部署应该很简单，或者，如果您希望您的 web.config 文件相同，那么您可以上传一个小文本文件。

或者，您的服务器必须已经有一个唯一的名称。我假设您正在运行 .Net 应用程序？如果是这样，那么您应该能够使用`Server.MachineName`（[http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.machinename%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.machinename%28v=vs.71%29.aspx)）来获取的唯一名称你的代码正在运行的盒子。

# javascript - Jquery-Image-Gallery-issue

> ID：12471266
> 
> 赞同：1
> 
> 时间：2012-09-18T06:08:17.527
> 
> 标签：javascript, jquery

我正在尝试创建一个 jquery 图像库，但我在下一个和上一个中遇到问题，我应该遵循我在小提琴演示中使用的结构。最初我需要在单击下一个其他图像/视频时显示两个图像应该可见

这是我尝试过的。

我不应该使用任何插件

[http://jsfiddle.net/T657N/41/](http://jsfiddle.net/T657N/41/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T06:21:11.410

这有效：http: [//jsfiddle.net/T657N/40/](http://jsfiddle.net/T657N/40/)

我`var $tDiv = $('#thumbs div');`改为`var $tDiv = $('#thumbs > div');`

您只需要选择`#thumbs`.

# c# - 如何通过选择另一个下拉列表动态更改下拉列表值

> ID：12471267
> 
> 赞同：1
> 
> 时间：2012-09-18T06:08:20.013
> 
> 标签：c#, asp.net, sql-server-2008

我有两个下拉列表。一个是工作日，另一个是食物类型。在页面加载中，我在工作日下拉列表中获取工作日值列表。

现在的问题是通过在工作日下拉列表中选择值，必须从数据库中获取食物的相应值。

示例：假设如果我在 weekday 下拉列表中选择 monday，则第二个下拉列表需要显示 monday day 中存在的项目。

数据库已经设计好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T06:12:33.053

在第一个下拉列表的选择更改事件中，从数据库中获取第二个下拉列表的详细信息并绑定它。要在用户选择新项目时触发选择更改事件，`AutoPostback=true`请为下拉列表设置。

如果你想使用 Ajax；你可以看看[Cascading Drop Down Extender](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/CascadingDropDown/CascadingDropDown.aspx)

在这里你不应该设置，`AutoPostback=true`因为扩展器会处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T06:48:28.360

您可以使用工作日组合框的选择更改事件。在该事件中，根据当前选定的项目获取数据，然后将结果设置到食物组合框。

列出输出食物列表；

//检索食物和评估结果到列表中…………

for（输出食物列表中的字符串食物）{ `foodCmb.Items.Add(food);` }

# mysql - mysql 用图像加入一对多

> ID：12471273
> 
> 赞同：1
> 
> 时间：2012-09-18T06:09:08.040
> 
> 标签：mysql, sql, image, join

我有两张桌子...

**项目表**

```
+----+--------+
| id | client |
+----+--------+
|  1 | James  |
|  2 | John   |
+----+--------+ 
```

**图像表**

```
+----+-----------+-------------------+
| id | projectId |     imagePath     |
+----+-----------+-------------------+
|  1 |         1 | images/image1.jpg |
|  2 |         1 | images/image2.jpg |
|  3 |         2 | images/image3.jpg |
|  4 |         2 | images/image4.jpg |
|  5 |         2 | images/image5.jpg |
+----+-----------+-------------------+ 
```

如您所见，一个项目有许多图像。我想以这种方式显示...

```
James

images/img1.jpg
images/img2.jpg

John

images/img3.jpg
images/img4.jpg
images/img5.jpg 
```

这篇文章给了我我想要的 [https://stackoverflow.com/a/2451065/1214535](https://stackoverflow.com/a/2451065/1214535)

但是当我像这样回声

```
<img src='".$row['imagePath']."/> 
```

图像标签中的结果我得到了这个

```
<img src="images/img3.jpg,images/img4.jpg,images/img5.jpg"> 
```

代替

```
<img src="images/img3.jpg"/> 
<img src="images/img4.jpg"/>
<img src="images/img5.jpg"/> 
```

如何更改查询以便我可以正确/单独显示图像

这是我正在使用的查询

```
$sql="SELECT images.projectId,project.client,
GROUP_CONCAT(images.imagePath SEPARATOR ', ') 
AS 'imagePath' 
from project left JOIN images on project.id=images.projectId 
GROUP BY project.id ASC"; 
```

谢谢你们...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T06:13:39.150

你必须像下面那样打破字符串

```
$imgArray = explode(',',$row['imagePath']);
//then do 
foreach($imgArray as $im)
{
 if( is_readable($im) ) {
         echo "<img src='$im' title='Image' />";
 }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T06:14:06.983

我相信[EXPLODE](http://php.net/manual/en/function.explode.php)就是答案。看看[PHP explode - running loop through each array item](https://stackoverflow.com/questions/5925800/php-explode-running-loop-through-each-array-item) Stack overflow question。我相信它会回答你的问题。

另外，我认为（另一种方法）如果您将您的查询更改为

```
SELECT tp.CLIENT,ti.IMAGEPATH
FROM tblProject tp 
JOIN tblImage ti ON tp.Id = ti.ProjectId 
```

那么一个简单的循环将很容易让你通过。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T06:14:41.947

您可以尝试使用`foreach`循环不同的值。

句法：

```
foreach (array_expression as $value)
    statement 
```

首先将您获得的所有值插入到这样的数组中：

```
$imgArray = explode(',',$row['imagePath']); 
```

然后循环遍历这个数组：

```
foreach ($imgArray as $img)
{
 echo "<img src='$img'" />";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T06:13:51.260

因为您使用的是[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)，它将所有非空值作为字符串返回。

您可以使用以下查询：

```
$sql="SELECT images.projectId,project.client,images.imagePath SEPARATOR
AS 'imagePath'
from project left JOIN images on project.id=images.projectId 
GROUP BY project.id ASC"; 
```

并遍历结果。

# javascript - 用于前端开发的 Javascript 框架

> ID：12471279
> 
> 赞同：2
> 
> 时间：2012-09-18T06:09:51.013
> 
> 标签：javascript, javascript-framework

过去可能有人问过这个问题，但我不太清楚谷歌要什么才能得到答案。

我正在编写一个 Web 应用程序，其中整个后端都可以作为 API 使用。我想知道哪些 javascript 框架对编写前端有好处。哪些 javascript 框架适用于前端开发？

我不需要像 Meteor 和 Node.js 提供的整个堆栈，我只需要一些逻辑控制器和视图。Node.js 对此有好处吗？是否存在其他框架？我可能会在前端有业务逻辑，所以有一个对此有好处的框架会很好。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-18T06:37:48.283

20 个值得一试的 JavaScript 框架

**[芽核](http://www.sproutcore.com/)**

Sproutcore 为许多知名应用程序提供支持，包括 MobileMe 等。与其他选项相比，Sproutcore 的学习曲线更陡峭，但一旦他/她学会了绳索，开发人员的生产力就可以弥补这一点。这个框架拥有一个 UI 框架、市场标准的 MVC 架构和编写良好的文档。

相关链接：将 SproutCore 2.0 与 jQuery UI 结合使用 使用 SproutCore 构建微博 何时使用 SproutCore，何时不使用

**[卡布奇诺](http://cappuccino.org/)**

Cappuccino 由 280North 团队创建，现在归摩托罗拉所有。随着 280Slides 的发布，该框架获得了广泛的关注——完全使用 Cappuccino 构建。这个框架与其他框架有很大的不同，因为开发人员不需要理解或使用任何前端三重奏——HTML、CSS 或 DOM。您需要掌握的只是框架！

**[JavaScriptMVC](http://javascriptmvc.com/)**

JavaScriptMVC 建立在 jQuery 之上，早在 2008 年就已经是前端框架战场上的老兵了。具有熟悉且明显的 MVC 架构，该框架功能非常全面，支持代码生成器、测试和依赖管理。

**[体式月神](http://asana.com/luna/)**

Luna 是人们一直在谈论的那些安静的私有框架之一。有充分的理由，我必须承认。该框架具有许多细节，包括进化的 MVC 架构、发布订阅、缓存、路由和身份验证。

**[骨干网.js](http://documentcloud.github.com/backbone/)**

Backbone 通过提供具有键值绑定和自定义事件的模型、具有可枚举函数的丰富 API 的集合、具有声明性事件处理的视图，并通过 RESTful JSON 接口将其全部连接到现有应用程序，从而为 JavaScript 繁重的应用程序提供结构。

**[酷狗](http://qooxdoo.org/)**

qooxdoo 是一个通用的 JavaScript 框架，使您能够为各种平台创建应用程序。借助其面向对象的编程模型，您可以构建丰富的交互式应用程序 (RIA)、用于移动设备的类本机应用程序、轻量级的传统 Web 应用程序，甚至是在浏览器之外运行的应用程序。

**[脊柱](http://maccman.github.com/spine/)**

Spine 是一个用于构建 JavaScript Web 应用程序的轻量级框架。Spine 为您提供了 MVC 结构，然后让您摆脱束缚，让您专注于有趣的事情，构建出色的 Web 应用程序。

**[ActiveJS](http://www.activejs.org/)**

ActiveJS 是一个 JavaScript 应用程序框架，它提供本地和基于 REST 的数据建模和纯 DOM 视图构建，带有后退按钮和历史支持，以及框架不可知性和缺乏外部依赖关系。

**[眼球](http://github.com/paulca/eyeballs.js)**

eyeballs.js 是一个精简的 javascript 库，旨在位于 javascript 框架之上，例如 jQuery 或 Prototype。eyeballs.js 可以位于已经实现的 Web 应用程序之上，并具有经过深思熟虑的对象模型。它还可以用于构建独立的 JavaScript 应用程序，由 HTML5 本地存储或 CouchDB 之类的东西提供支持。

**[萨米](http://sammyjs.org/)**

Sammy.js 是一个小型 JavaScript 框架，旨在减轻痛苦并为开发 JavaScript 应用程序提供基本结构。Sammy 试图通过提供一个小型“核心”框架和不断增长的特定功能插件列表来实现这一目标。

**[巧克力](https://github.com/ahe/choco)**

Choco 将 MVC 带到了客户端！一个 Choco 应用程序只包含一个 HTML 页面，所有交互都由 Javascript 管理。您的 UI 仅使用 HTML 和 CSS！

**[敏捷](http://agilityjs.com/)**

Agility.js 是一个用于 Javascript 的 MVC 库，可让您编写可维护和可重用的浏览器代码，而无需其他 MVC 库中的冗长或基础设施开销。目标是使开发人员能够至少像使用 jQuery 一样快速编写 Web 应用程序，同时通过 MVC 对象简化长期可维护性。

**[角](http://angularjs.org/#/)**

Angular 支持整个开发过程，为您的 Web 应用程序提供结构，并与最好的 JS 库一起使用。使用 Angular，视图和数据模型始终保持同步——无需手动操作 DOM。Angular 很小，只有 60kb，与所有现代浏览器兼容，并且与 jQuery 配合得很好。

**[ExtJS](http://www.sencha.com/products/extjs/)**

Ext JS 4 通过将流行的模型-视图-控制器模式引入 Ext JS，为构建客户端应用程序带来了一种全新的方式。通过允许数据管理、逻辑和界面元素的分离，Ext JS 4 使即使是大型开发团队也可以更轻松地独立工作，而不必担心互相踩脚。Ext JS 4 附带了一个有用的 MVC 入门指南。

**[昏死](http://knockoutjs.com/)**

Knockout 是一个 JavaScript 库，可帮助您使用干净的底层数据模型创建丰富的响应式显示和编辑器用户界面。任何时候您的 UI 部分都可以动态更新（例如，根据用户的操作或外部数据源发生更改），KO 可以帮助您更简单和可维护地实现它。

[贾马尔](http://jamal-mvc.com/)

Jamal 是一组约定和小型 javascript 库，用于在您的 Web 应用程序中实现 html、css 和 javascript 的完全分离。Jamal 基于 jQuery 构建，并受到 MVC 框架（如 Ruby on Rails、CakePHP 及其衍生产品）的启发。

**[纯MVC](http://puremvc.org/)**

PureMVC 是基于经典模型、视图和控制器概念创建应用程序的轻量级框架。这个免费的开源框架基于经过验证的设计模式，最初以 ActionScript 3 语言实现，可与 Adob​​e Flex、Flash 和 AIR 一起使用，现在正被移植到所有主要的开发平台。

**[修剪结](http://code.google.com/p/trimpath/wiki/TrimJunction)**

开源的 Junction 框架是一个约定优于配置的、用于 JavaScript 的同步 Web MVC 框架。TrimPath Junction 是出色的 Ruby on Rails Web MVC 框架到 JavaScript 的克隆或移植。

**[CorMVC](http://www.bennadel.com/projects/cormvc-jquery-framework.htm)**

CorMVC 是一个基于 jQuery 的模型-视图-控制器 (MVC) 框架，可以帮助开发基于 Web 的单页应用程序。CorMVC 代表仅客户端所需的模型视图控制器，旨在成为学习单页应用程序架构的最低入口点。

**[蝙蝠侠](http://batmanjs.org/)**

batman.js 是一个从实际使用中提取的全栈微框架，旨在最大限度地提高开发人员和设计师的幸福感。它支持约定优于配置、无模板视图和高性能，因为它根本不做太多事情。这一切加起来形成了速度极快的 Web 应用程序，并具有出色的开发过程；它是 batman.js。

**资料来源： http:** [//net.tutsplus.com/articles/web-roundups/20-javascript-frameworks-worth-checking-out/](http://net.tutsplus.com/articles/web-roundups/20-javascript-frameworks-worth-checking-out/)

# javascript - 在事件处理程序中查询 DOM

> ID：12471283
> 
> 赞同：0
> 
> 时间：2012-09-18T06:10:08.027
> 
> 标签：javascript, events, animation, dojo

我正在使用 DOJO 来创建一些动画。`h1`当鼠标悬停在该部分时，我正在尝试为该部分内部设置动画。

**这确实有效：**

HTML：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <script src="//ajax.googleapis.com/ajax/libs/dojo/1.8.0/dojo/dojo.js" data-dojo-config="async: true, isDebug: true"></script>
        <script type="text/javascript" src="script.js"></script>
    </head>
    <body>
        <div id="section">
            <div id="title">Something</div>
        </div>
    </body>

</html> 
```

JavaScript：

```
require(["dojo/fx", "dojo/on", "dojo/dom", "dojo/mouse","dojo/query","dojo/domReady!"], function(fx, on, dom, mouse,query) {
    var section = dom.byId("section"),
        title = dom.byId("title");

    on(section, mouse.enter, function(evt){
        fx.slideTo({
            node: title, 
            top: "0"
        }).play();
    });

    on(section, mouse.leave, function(evt){
        fx.slideTo({
            node: title, 
            top: "200"
        }).play();
    });
}); 
```

**我想要工作（它没有）：**

HTML：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <script src="//ajax.googleapis.com/ajax/libs/dojo/1.8.0/dojo/dojo.js" data-dojo-config="async: true, isDebug: true"></script>
        <script type="text/javascript" src="script.js"></script>
    </head>
    <body>
        <section>
            <h1>Something</h1>
        </section>
    </body>

</html> 
```

JavaScript：

```
require(["dojo/fx", "dojo/on", "dojo/dom", "dojo/mouse","dojo/query","dojo/domReady!"], function(fx, on, dom, mouse,query) {
    var section = query("section");

    on(section, mouse.enter, function(evt){
        fx.slideTo({
            node: query("h1",this), 
            top: "0"
        }).play();
    });

    on(section, mouse.leave, function(evt){
        fx.slideTo({
            node: query("h1",this), 
            top: "200"
        }).play();
    });
}); 
```

我正在尝试`h1`使用 , 来获取元素`query("h1",this)`来滑动它。我得到的只是我的开发工具中的一个错误。我已经尝试寻找解决方案，但我找不到。我该如何解决这个问题？

```
 Uncaught TypeError: Object [object HTMLHeadingElement] has no method 'getBoundingClientRect' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T11:34:05.080

问题是它`query`不返回一个节点，它返回一个`NodeList`. 您可以在错误中看到这一点，它指的是`Object [object HTMLHeadingElement]`— 这实际上是一个类似数组的对象 ( `Object [...]`)，其中包含一个项目，一个`HTMLHeadingElement`.

您需要 DomNode，因此最简单的解决方案是更改它：

```
node: query("h1", this) 
```

对此：

```
node: query("h1", this)[0] 
```

请注意，这仅在查询返回有效节点时才有效。否则，你会得到一个越界错误。

[您可以在 dojo/query 的 API 文档中看到更多信息。](http://dojotoolkit.org/api/1.8/dojo/query)

# ruby-on-rails - 如何在ruby中比较两个对象

> ID：12471290
> 
> 赞同：3
> 
> 时间：2012-09-18T06:11:14.373
> 
> 标签：ruby-on-rails, attributes

我有两个用户对象`existing_user, current_user`，我应该如何遍历`User.attributes.keys`并检查它们是否相等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T06:20:23.847

大概是这样的：

```
class User < ActiveRecord::Base

  # ...

  # untested, but the logic seems sound.
  def equals?(user)
    User.attributes.keys.each do |k|          
      return false unless self[k] == user[k]
    end
    true
  end

end 
```

然后您可以调用`current_user.equals?(existing_user)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T07:03:02.393

这个问题的背景对我来说并不完全清楚。通常当一个人提到`current_user`像你一样时，背景是ruby-on-rails，而不仅仅是主题中所说的ruby。我*猜*，您是`current_user`通过外部登录过程（cas、facebook 等）获得的，并在内部保留一个用户表以获取其他属性。

鉴于我的假设是正确的，我建议识别**外部**用户模型的一个 uniq 属性并将其存储在您的内部用户表中。您可能想要验证此属性的唯一性。在进行比较时，仅限于比较外部登录用户和内部保留用户的单个属性。

# maven - 使用 m2eclipse 构建 CDT 源代码

> ID：12471298
> 
> 赞同：0
> 
> 时间：2012-09-18T06:12:31.137
> 
> 标签：maven, eclipse-plugin, eclipse-cdt

全部，

我正在尝试构建 CDT 插件之一并将其独立导出。例如，我构建了“org.eclipse.cdt.ui”插件，然后我收到以下构建错误消息：

项目尚未设置 MavenProject: org.eclipse.cdt:org.eclipse.cdt.ui:5.5.0-SNAPSHOT @ C:\Documents and Settings\0359\workspace\org.eclipse.cdt\core\org.eclipse .cdt.ui\pom.xml org.eclipse.cdt.ui 第 1 行 Maven 问题

我对这个问题一无所知，任何建议都是好的。谢谢。

它的 pom.xml 如下：

```
 <?xml version="1.0" encoding="UTF-8"?>
<project
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"
xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<modelVersion>4.0.0</modelVersion>

<parent>
    <groupId>org.eclipse.cdt</groupId>
    <artifactId>cdt-parent</artifactId>
    <version>8.2.0-SNAPSHOT</version>
    <relativePath>../../pom.xml</relativePath>
</parent>

<version>5.5.0-SNAPSHOT</version>
<artifactId>org.eclipse.cdt.ui</artifactId>
<packaging>eclipse-plugin</packaging>
< /project> 
```

# c# - 以文本格式显示 doc 文件 asp.net c#

> ID：12471302
> 
> 赞同：0
> 
> 时间：2012-09-18T06:12:48.057
> 
> 标签：c#, asp.net

我想阅读文件的内容。但这些代码没有帮助。

```
string[] readText = File.ReadAllLines(path); this line is giving error.

protected void btnRead_Click(object sender, EventArgs e)
{
    string path = fileupload1.PostedFile.FileName;
    if (!string.IsNullOrEmpty(path))
    {
        string[] readText = File.ReadAllLines(path);
        StringBuilder strbuild = new StringBuilder();
        foreach (string s in readText)
        {
            strbuild.Append(s);
            strbuild.AppendLine();
        }
        textBoxContents.Text = strbuild.ToString();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T06:19:26.563

该`File.ReadAllText`函数期望文件存在于指定位置。您尚未将其保存在服务器上，但您正在尝试阅读它。如果您不需要将上传的文件保存在服务器上，您可以直接从输入流中读取。

```
protected void btnRead_Click(object sender, EventArgs e)
{
    if (fileupload1.PostedFile != null && fileupload1.PostedFile.ContentLength > 0)
    {
        using (var reader = new StreamReader(fileupload1.PostedFile.InputStream))
        {
            textBoxContents.Text = reader.ReadToEnd();
        }
    }
} 
```

这适用于文本文件。如果您想解析一些其他格式，例如 Word 文档，您将需要一个库来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T06:21:48.713

这应该工作

```
string[] lines = System.IO.File.ReadAllLines(@"..\asd.txt");
for (i = 0; i < lines.Count; i++)
System.Console.WriteLine("Contents = " + lines[i]);
} 
```

# javascript - 有没有办法在 HTML 中搜索以某个字符串开头的属性

> ID：12471303
> 
> 赞同：8
> 
> 时间：2012-09-18T06:12:57.003
> 
> 标签：javascript, html, mootools, css-selectors

有没有办法找到所有具有以特定字符串开头的属性的元素？

我正在使用 Mootools 框架，这是我尝试过的：

```
$$('*[data-media-*]'); 
```

但它只是输出页面中的所有元素。

那么有没有办法获取页面中所有具有以 开头的属性的元素`data-media-`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T13:50:26.440

您可以通过迭代容器中每个元素的属性并查看属性名称是否与您正在寻找的正则表达式匹配来近似这样的东西：

例如，[在这个 jsFiddle 中，我正在寻找具有和属性的`li`元素`data-media-tv``data-media-dvd`](http://jsfiddle.net/pSpbG/1/)。

您可以定制正则表达式以仅返回您想看到的内容。只想查看具有 data-media-* 的元素（如您的问题）？[给你](http://jsfiddle.net/pSpbG/2/)。

* * *

请记住，**这不是完全可扩展**的。因为我们正在遍历页面上的每一个元素，并检查每一个属性（但如果找到则提前返回），这对于大页面来说可能而且可能会很慢。

仅限于您想要搜索的容器，或者仅限于您想要迭代的元素！如果你运行这个`document.body`，它会遍历页面中的每一个元素，如果你的房子因此被烧毁，我将不负责。:)

* * *

这里是函数化的：

```
function attrMatch(elements, regexp) {
    // Iterate through all passed-in elements, return matches
    var matches = elements.filter(function(li) {
    var numAttr = li.attributes.length;
    for(x=0;x<numAttr;x++) {
        var attr = li.attributes[x];
        return attr['name'].test(regexp);
    }
    });

    return matches;
}; 
```

在`elements`中，仅传入您要检查的元素，可能通过 选择`$$`。如果要检查容器元素中的所有元素，请在上面的每个实例中替换`elements`为`container`and 。`container.getChildren()``element`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T15:32:01.817

试试[这个 jsfiddle](http://jsfiddle.net/KXPwx/6/) 只知道属性的（常见）索引/位置`data-media-*`并相应地在代码中使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T14:18:47.597

您可以过滤已经必须返回具有匹配 data-* 属性的元素。

```
Elements.implement({
    filterData: function(substring){
        return this.filter(function(element){
            var attribs = element.attributes,
                len,
                ii = 0;

            for (len = attribs.length; ii < len; ++ii) {
                if (attribs[ii].name.indexOf('data-') === 0 && attribs[ii].name.indexOf(substring) !== -1) {
                    return true;
                }
            }
        });

    }
});

console.log($$("div").filterData('foo'));
console.log($$("div").filterData('bar'));
console.log($$("div").filterData('oba')); 
```

在行动：http: [//jsfiddle.net/dimitar/pgZDw/](http://jsfiddle.net/dimitar/pgZDw/)

缺点：您已经需要将它传递给有意义的元素集合，例如。div.foo 或 #someid *

一个更优雅的解决方案是`:data()`向 Slick 添加一个伪：

```
(function(){
    // cache reusable string 
    var data = 'data',
        hyphen = '-',
        // set the fallback via XMLSerializer, if no outerHTML (eg. FF 2 - 10)
        XS = this.XMLSerializer && new XMLSerializer();

    Slick.definePseudo(data, function(value){
        return (this.outerHTML || XS.serializeToString(this)).test([data, value].join(hyphen));
    });
}());

console.log($$("div:data(foo)"));
console.log($$(":data(media-)")); 
```

更新示例：http: [//jsfiddle.net/dimitar/pgZDw/3/](http://jsfiddle.net/dimitar/pgZDw/3/)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-09-18T06:25:20.210

```
$$('div[attrName="attrnameValue"]').each(function() {
    // `this` is the div
}); 
```

# paypal - Paypal：L_ERRORCODE0:10401 订单总额无效且参数无效

> ID：12471304
> 
> 赞同：4
> 
> 时间：2012-09-18T06:12:58.887
> 
> 标签：paypal, paypal-sandbox, express-checkout, paypal-nvp

我按照[https://www.paypal-labs.com/integrationwizard/ecpaypal/main.php](https://www.paypal-labs.com/integrationwizard/ecpaypal/main.php)在我的应用程序中实现了 paypal 沙箱帐户。我的代码跨越 3 个 jsp 页面，例如 index.jsp -> expresscheckout.jsp -> paypalfunctions.jsp 。

expresscheckout.jsp

```
<%@ include file="paypalfunctions.jsp"%>
<%
    String paymentAmount = "25";

    String currencyCodeType = "USD";
    String paymentType = "Sale";

    String returnURL = "http://2.appid.appspot.com/sucess.jsp";

    String cancelURL = "http://2.appid.appspot.com/canceled.jsp";

    HashMap nvp = CallShortcutExpressCheckout(paymentAmount,
            currencyCodeType, paymentType, returnURL, cancelURL,
            session);
    String strAck = nvp.get("ACK").toString();
    if (strAck != null && strAck.equalsIgnoreCase("Success")) {
        //' Redirect to paypal.com
        RedirectURL(nvp.get("TOKEN").toString(), response);
    } else {

        String ErrorCode = nvp.get("L_ERRORCODE0").toString();
        String ErrorShortMsg = nvp.get("L_SHORTMESSAGE0").toString();
        String ErrorLongMsg = nvp.get("L_LONGMESSAGE0").toString();
        String ErrorSeverityCode = nvp.get("L_SEVERITYCODE0")
                .toString();
    }
%> 
```

paypalfunctions.jsp 如下：

```
<%

    gv_APIUserName  = "myid_78955666_biz_api1.gmail.com";
    gv_APIPassword  = "1347856389";
    gv_APISignature = "AFcWxV21C7fd0v3bYYYRCpSSRl31AuP4KrN6UABOJ1fGdNRYoIpc.qjr";

    //BN Code is only applicable for partners
    gv_BNCode       = "PP-ECWizard"; 

    boolean bSandbox = true;

    if (bSandbox == true)
    {
        gv_APIEndpoint = "https://api-3t.sandbox.paypal.com/nvp";
        PAYPAL_URL = "https://www.sandbox.paypal.com/webscr?cmd=_express-checkout&token=";
    }
    else
    {
        gv_APIEndpoint = "https://api-3t.paypal.com/nvp";
        PAYPAL_URL = "https://www.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=";
    } 

    String HTTPREQUEST_PROXYSETTING_SERVER = "";
    String HTTPREQUEST_PROXYSETTING_PORT = "";
    boolean USE_PROXY = false;

    gv_Version  = "2.3";

    //WinObjHttp Request proxy settings.
    gv_ProxyServer  = HTTPREQUEST_PROXYSETTING_SERVER;
    gv_ProxyServerPort = HTTPREQUEST_PROXYSETTING_PORT;
    gv_Proxy        = 2;    //'setting for proxy activation
    gv_UseProxy     = USE_PROXY;

%>

<%!

    String gv_APIEndpoint;
    String gv_APIUserName;
    String gv_APIPassword;
    String gv_APISignature;
    String gv_BNCode;

    String gv_Version;
    String gv_nvpHeader;
    String gv_ProxyServer;  
    String gv_ProxyServerPort; 
    int gv_Proxy;
    boolean gv_UseProxy;
    String PAYPAL_URL;

    public HashMap CallShortcutExpressCheckout( String paymentAmount, String currencyCodeType, String paymentType, 
                                                String returnURL, String cancelURL,
                                                HttpSession session)
    {

        session.setAttribute("paymentType", paymentType);
        session.setAttribute("currencyCodeType", currencyCodeType);
ored in $nvpstr
        */
        String nvpstr = "&Amt=25&PAYMENTACTION=" + paymentType + "&ReturnUrl=" + URLEncoder.encode( returnURL ) + "&CANCELURL=" + URLEncoder.encode( cancelURL ) + "&CURRENCYCODE=" + currencyCodeType;

        /* 
        Make the call to PayPal to get the Express Checkout token
        If the API call succeded, then redirect the buyer to PayPal
        to begin to authorize payment.  If an error occured, show the
        resulting errors
        */

        HashMap nvp = httpcall("SetExpressCheckout", nvpstr);
        String strAck = nvp.get("ACK").toString();
        session.setAttribute("nvpstr", nvpstr);
        session.setAttribute("strAck", strAck);
        if(strAck !=null && strAck.equalsIgnoreCase("Success"))
        {
            session.setAttribute("TOKEN", nvp.get("TOKEN").toString());
        }

        return nvp;
    }

    public HashMap CallMarkExpressCheckout( String paymentAmount, String currencyCodeType, String paymentType, String returnURL, 
                                String cancelURL, String shipToName, String shipToStreet, String shipToCity, String shipToState,
                                String shipToCountryCode, String shipToZip, String shipToStreet2, String phoneNum,
                                HttpSession session)
    {

        session.setAttribute("paymentType", paymentType);
        session.setAttribute("currencyCodeType", currencyCodeType);

        String nvpStr = "ADDROVERRIDE=1&Amt=" + paymentAmount + "&PAYMENTACTION=" + paymentType;
        nvpStr = nvpStr + "&CURRENCYCODE=" + currencyCodeType + "&ReturnUrl=" + URLEncoder.encode( returnURL ) + "&CANCELURL=" + URLEncoder.encode( cancelURL );
        nvpStr = nvpStr + "&SHIPTONAME=" + shipToName + "&SHIPTOSTREET=" + shipToStreet + "&SHIPTOSTREET2=" + shipToStreet2;
        nvpStr = nvpStr + "&SHIPTOCITY=" + shipToCity + "&SHIPTOSTATE=" + shipToState + "&SHIPTOCOUNTRYCODE=" + shipToCountryCode;
        nvpStr = nvpStr + "&SHIPTOZIP=" + shipToZip + "&PHONENUM" + phoneNum;

        HashMap nvp = httpcall("SetExpressCheckout", nvpStr);//made a change from original code
        String strAck = nvp.get("ACK").toString();
        if(strAck !=null && (strAck.equalsIgnoreCase("Success") || strAck.equalsIgnoreCase("SuccessWithWarning")))
        {
            session.setAttribute("TOKEN", nvp.get("TOKEN").toString());
        }           
        return nvp;
    }

    public HashMap GetShippingDetails( String token, HttpSession session)
    {

        String nvpstr= "&TOKEN=" + token;

        HashMap nvp = httpcall("GetExpressCheckoutDetails", nvpstr);
        String strAck = nvp.get("ACK").toString();
        if(strAck !=null && (strAck.equalsIgnoreCase("Success") || strAck.equalsIgnoreCase("SuccessWithWarning")))
        {
            session.setAttribute("PAYERID", nvp.get("PAYERID").toString());
        }           
        return nvp;
    }

    public HashMap ConfirmPayment( String finalPaymentAmount, HttpSession session, HttpServletRequest request)
    {

        String token            =  session.getAttribute("TOKEN").toString();
        String currencyCodeType =  session.getAttribute("currencyCodeType").toString();
        String paymentType      =  session.getAttribute("paymentType").toString();
        String payerID          =  session.getAttribute("PAYERID").toString();
        String serverName       =  request.getServerName();

        String nvpstr  = "&TOKEN=" + token + "&PAYERID=" + payerID + "&PAYMENTACTION=" + paymentType + "&AMT=" + finalPaymentAmount;
        nvpstr = nvpstr + "&CURRENCYCODE=" + currencyCodeType + "&IPADDRESS=" + serverName;

        HashMap nvp = httpcall("DoExpressCheckoutPayment", nvpstr);

        return nvp;
    }

    HashMap DirectPayment ( String paymentType, String paymentAmount,
                        String creditCardType, String creditCardNumber, String expDate, String cvv2,
                        String firstName, String lastName, String street, String city, String state, String zip, String countryCode,
                        String currencyCode, String IPAddress)
    {
        String nvpStr = "Amt=" + paymentAmount + "&PAYMENTACTION=" + paymentType;
        nvpStr += "&IPADDRESS=" + IPAddress;
        nvpStr += "&CREDITCARDTYPE=" + creditCardType + "&ACCT=" + creditCardNumber + "&EXPDATE=" + expDate + "&CVV2=" + cvv2;
        nvpStr += "&FIRSTNAME=" + firstName + "&LASTNAME=" + lastName + "&STREET=" + street + "&CITY=" + city + "&STATE=" + state + "&COUNTRYCODE=" + countryCode + "&ZIP=" + zip;
        nvpStr += "&CURRENCYCODE=" + currencyCode;

        return httpcall("DoDirectPayment", nvpStr);
    }

    public HashMap httpcall( String methodName, String nvpStr)
    {

        String version = "2.3";
        String agent = "Mozilla/4.0";
        String respText = "";
        HashMap nvp=null;

        String encodedData = "METHOD=" + methodName + "&VERSION=" + gv_Version + "&PWD=" + gv_APIPassword + "&USER=" + gv_APIUserName + "&SIGNATURE=" + gv_APISignature + nvpStr + "&BUTTONSOURCE=" + gv_BNCode;

        try 
        {
            URL postURL = new URL( gv_APIEndpoint );
            HttpURLConnection conn = (HttpURLConnection)postURL.openConnection();

            // Set connection parameters. We need to perform input and output, 
            // so set both as true. 
            conn.setDoInput (true);
            conn.setDoOutput (true);

            // Set the content type we are POSTing. We impersonate it as 
            // encoded form data 
            conn.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
            conn.setRequestProperty( "User-Agent", agent );

            //conn.setRequestProperty( "Content-Type", type );
            conn.setRequestProperty( "Content-Length", String.valueOf( encodedData.length()) );
            conn.setRequestMethod("POST");

            // get the output stream to POST to. 
            DataOutputStream output = new DataOutputStream( conn.getOutputStream());
            output.writeBytes( encodedData );
            output.flush();
            output.close ();

            // Read input from the input stream.
            DataInputStream  in = new DataInputStream (conn.getInputStream()); 
            int rc = conn.getResponseCode();
            if ( rc != -1)
            {
                BufferedReader is = new BufferedReader(new InputStreamReader( conn.getInputStream()));
                String _line = null;
                while(((_line = is.readLine()) !=null))
                {
                    respText = respText + _line;
                }           
                nvp = deformatNVP( respText );
            }
            return nvp;
        }
        catch( IOException e )
        {
            // handle the error here
            return null;
        }
    }

    public HashMap deformatNVP( String pPayload )
    {
        HashMap nvp = new HashMap(); 
        StringTokenizer stTok = new StringTokenizer( pPayload, "&");
        while (stTok.hasMoreTokens())
        {
            StringTokenizer stInternalTokenizer = new StringTokenizer( stTok.nextToken(), "=");
            if (stInternalTokenizer.countTokens() == 2)
            {
                String key = URLDecoder.decode( stInternalTokenizer.nextToken());
                String value = URLDecoder.decode( stInternalTokenizer.nextToken());
                nvp.put( key.toUpperCase(), value );
            }
        }
        return nvp;
    }

    public void RedirectURL( String token, HttpServletResponse response )
    {
        String payPalURL = PAYPAL_URL + token; 

        //response.sendRedirect( payPalURL );
        response.setStatus(302);
        response.setHeader( "Location", payPalURL );
        response.setHeader( "Connection", "close" );
    } 
```

%>

当我点击快速结帐时，它会重定向到[https://www.sandbox.paypal.com/webscr?cmd=_express-checkout&token=EC-9CY1483461514290L](https://www.sandbox.paypal.com/webscr?cmd=_express-checkout&token=EC-9CY1483461514290L)。但是在“您的订单摘要”中，没有显示当前的购买金额。同样在使用我的买家帐户登录并确认地址和付款后，我的 success.jsp 页面中会显示以下错误消息：

**TIMESTAMP:2012-09-18T06:07:32Z CORRELATIONID:b4fe3695b410a ACK:Failure VERSION:84.0 BUILD:3622349 L_ERRORCODE0:10401 L_SHORTMESSAGE0:由于参数无效，交易被拒绝。有关详细信息，请参阅其他错误消息。L_LONGMESSAGE0：订单总数无效。L_SEVERITYCODE0：错误**

但是当我打印我的名称值对（nvp）时，它包含金额

**NVPSTR===>&Amt=25&PAYMENTACTION=Sale&ReturnUrl=http%3A%2F%2F2.appid.appspot.com%2Fsucess.jsp&CANCELURL=http%3A%2F%2F2.appid.appspot.com%2Fcanceled.jsp&CURRENCYCODE=USD**

请解决或提出解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T16:29:29.630

您必须在 DoExpressCheckoutPayment API 调用和 SetExpressCheckout API 调用中提交金额。目前，您不会同时为您的 SetEC 和 DoEC 提交金额，仅针对您的 SetEC。（如果您没有为 SetEC 设置它，您将永远不会获得令牌。）

您的 DoEC 调用应该与您的 SetEC 调用几乎相同，只是您不需要 RETURNURL 和 CANCELURL。

此外，除非您提交交易的行项目详细信息，否则金额不会显示在订单摘要下：

```
L_PAYMENTREQUEST_0_NAME0=Books 
L_PAYMENTREQUEST_0_AMT0=154.00 
L_PAYMENTREQUEST_0_NUMBER0=ABC123 
L_PAYMENTREQUEST_0_QTY0=2 
L_PAYMENTREQUEST_0_NAME1=CDs 
L_PAYMENTREQUEST_0_AMT1=50.00 
L_PAYMENTREQUEST_0_NUMBER1=BY-Z4736 
L_PAYMENTREQUEST_0_QTY1=3 
PAYMENTREQUEST_0_ITEMAMT=458.00 
PAYMENTREQUEST_0_SHIPPINGAMT=20.00 
PAYMENTREQUEST_0_TAXAMT=46.20 
PAYMENTREQUEST_0_AMT=524.20 
```

# c# - Object 类的 ToString 方法如何能够发现对象的类型？

> ID：12471305
> 
> 赞同：0
> 
> 时间：2012-09-18T06:13:02.603
> 
> 标签：c#, .net

Object 类的方法如何`ToString`能够发现对象的类型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T06:18:33.127

默认实现`Object.ToString`是使用[Object.GetType](http://msdn.microsoft.com/en-us/library/system.object.gettype.aspx)方法，其实现依赖于 CLR。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T06:22:23.897

```
Debug.WriteLine(this.GetType().FullName); 
```

来自微软的源代码：

```
// Returns a String which represents the object instance.  The default 
// for an object is to return the fully qualified name of the class. 
//
public virtual String ToString() 
{
    return GetType().ToString();
} 
```

`GetType().ToString()`基本上返回类型的'Name'，也就是“全名”或者完全限定名，比如`System.Object`. 请注意，名称包括命名空间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T06:27:20.913

对象的`ToString()`方法实际上是设置对象如何被表示为字符串，因此如果它在任何类中实现，则该类的实例将显示为其在该方法中的集合。

看看[文档](http://msdn.microsoft.com/en-us/library/system.object.tostring.aspx)中的这个例子：

```
using System;

public class Object2
{
   private object value;

   public Object2(object value)
   {
      this.value = value;
   }

   public override string ToString()
   {
      return base.ToString() + ": " + value.ToString();
   }
}

public class Example
{
   public static void Main()
   {
      Object2 obj2 = new Object2('a');
      Console.WriteLine(obj2.ToString());
   }
}
// The example displays the following output: 
//       Object2: a 
```

如果 Methode 在子类中实现，它将在此类中被调用并运行 ToString() 的类特定实现，确定可以在其中调用它的类类型，例如通过[GetType](http://msdn.microsoft.com/en-us/library/system.object.gettype.aspx)或[typeof](http://msdn.microsoft.com/en-us/library/58918ffs%28v=vs.71%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T06:15:28.607

`ToString()`类通过**覆盖**基类方法提供自己的实现。这就是您如何看待该方法的特定实现。

您可能会看到：[如何：重写 ToString 方法（C# 编程指南）](http://msdn.microsoft.com/en-us/library/ms173154%28v=vs.100%29.aspx)

来自上述链接的示例：

```
class Person
    {
        public string Name { get; set; }
        public int Age { get; set; }

        public override string ToString()
        {
            return "Person: " + Name + " " + Age;
        }
    } 
```

要使用它：

```
Person person = new Person { Name = "John", Age = 12 };
Console.WriteLine(person);
// Output:
// Person: John 12 
```

在上面的示例中，您有一个类`Person`是基类的重写`ToString`方法`object`。现在，当您调用`person.ToString()`它时，它会调用您的`ToString`方法的实现，因为您已经覆盖了现有的实现。

# vim - Vim 可以打开的最大文件大小是多少？（64 位）

> ID：12471311
> 
> 赞同：7
> 
> 时间：2012-09-18T06:13:23.843
> 
> 标签：vim, 64-bit, text-editor

显然 Vim 可以在 32 位机器上编辑 2GB（禁用交换和备份）。但是对于 64 位机器，有什么限制呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-18T06:25:23.643

[文档](http://vimdoc.sourceforge.net/htmldoc/vi_diff.html#limits)只是说明了这一点：

> 当长整数为 32 位时，最大文件大小为 2147483647 字节（2 GB）。64 位长的更多。也受限于 |swap-file| 的可用磁盘空间。

所以“更多”很可能会遇到您的硬盘驱动器限制，因为它的可分配大小达到了艾字节。

# javascript - 检索 Google Chrome 扩展程序 ID 的最佳方法是什么？

> ID：12471316
> 
> 赞同：3
> 
> 时间：2012-09-18T06:14:03.270
> 
> 标签：javascript, google-chrome-extension

我知道获取 Google Chrome 扩展 ID 的两种方法：

```
chrome.app.getDetails().id;

chrome.i18n.getMessage('@@extension_id'); 
```

其中之一有什么缺点吗？

我倾向于使用第一个，因为它更短，但谁知道呢。我可能错了。

**- - 编辑 - -**

因为我是唯一关心的人，所以我做了以下基准测试：

```
console.time('t1');
for (var i=0; i < 10000; i++) { chrome.app.getDetails().id; }; 
console.timeEnd('t1');

console.time('t2');
for (var i=0; i < 10000; i++) { chrome.i18n.getMessage('@@extension_id'); }; 
console.timeEnd('t2'); 
```

结果如下：

```
t1: 5190.766ms

t2: 860.697ms 
```

看起来**使用 i18n 总体上要快得多，**但第一个在开始时更快，在执行 3 或 4 次后，i18n 更好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T06:21:31.913

尝试通过类似的查询： [How to reference the version information in a Google Chrome extension?](https://stackoverflow.com/questions/6436039/how-to-reference-the-version-information-in-a-google-chrome-extension)

在那里，您可以更广泛地了解您正在使用的第一个电话。

```
 chrome.app.getDetails().id; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T18:23:53.333

最后，我创建了一个小型 Chrome 扩展程序来对三种已知的检索 Chrome 扩展程序 ID 的方法进行基准测试：

*   `chrome.app.getDetails().id;`
*   `chrome.i18n.getMessage('@@extension_id');`
*   `chrome.extension.getURL('/').slice(19, -1);`
*   `chrome.runtime.id;`

~~正如您在下面的结果中看到的那样，`chrome.extension.getURL('/').slice(19, -1);`总体上花费的时间似乎更少，**但**第一次调用与其他调用相同。~~

![Google Chrome 27.0.1430.0（官方版本 186115）开发版的基准图像](../Images/f54ea1d61154ffb7fca24c98e3b904ef.png)

正如我们所见，***`chrome.runtime.id`wins***。

[注意#1：您可以在此处](https://docs.google.com/open?id=0B8R1QvA3x5IbUFBQUWI2dktBMDA)下载扩展的 zip 存档

注意＃2：我曾经`performance.now()`获得准确的时间。

注意＃3：我添加`chrome.runtime.id`到基准工具中。感谢康斯坦丁·斯莫利亚宁！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T22:23:01.863

似乎从 chrome 22 开始，获取扩展 ID 的最佳方法是 built-in property `chrome.runtime.id`。[请参阅文档。](http://developer.chrome.com/extensions/runtime.html#property-id)

```
console.log(chrome.runtime.id); 
```

# database - 分页和数据库错误 cakephp

> ID：12471319
> 
> 赞同：1
> 
> 时间：2012-09-18T06:14:33.543
> 
> 标签：database, cakephp

> **可能重复：**
> [CakePHP 网站在分页后崩溃](https://stackoverflow.com/questions/12469128/cakephp-website-crashing-after-pagination)

我有一个可以工作的页面，但后来决定添加分页功能 - 它在该页面上工作，现在尝试将其复制到另一个页面我现在收到 pdo 数据库错误。说变量`Relationship.sender_id`不存在。

我有一张`relationship`桌子，其中包含 -`id, sender_id, receiver_id, expiry_date,active`

这是函数中的代码

```
 public function index_admin(){

    //retrieve Account Id of current User       
    $accountid=$this->Auth->user('account_id');

    //Conditions
    $conditions=array(
    "OR"=> array(
        'Relationship.sender_id' => $accountid,
        'Relationship.receiver_id' => $accountid)
    );

    //Find all Relationships where receiver_id = accountid
    $relationships=$this->Relationship->find('all', array(
    'conditions' => $conditions));

    $compName = $this->Account->field('account_name', array('id' => 'Relationship.id'));

    $this->paginate = array(
    'limit' => 10,
    'conditions'=> $conditions);

    $this->set('accountid', $accountid); 
    $this->set('relationship', $this->paginate());  

    $this->set('compName', $compName);  
} 
```

这真的让我很失望，任何帮助将不胜感激。

这是代码创建的 sql 查询

```
SELECT `Relationship`.`id`, `Relationship`.`sender_id`, `Relationship`.`receiver_id`,
 `Relationship`.`active`, `Relationship`.`requested`, `Relationship`.`expiry_date`, 
`ReceiverAccount`.`id`, `ReceiverAccount`.`street`, `ReceiverAccount`.`city`, 
`ReceiverAccount`.`postcode`, `ReceiverAccount`.`state`, `ReceiverAccount`.`country`,
 `ReceiverAccount`.`active`, `ReceiverAccount`.`account_name`, `ReceiverAccount`.`abn`,
 `SenderAccount`.`id`, `SenderAccount`.`street`, `SenderAccount`.`city`, 
`SenderAccount`.`postcode`, `SenderAccount`.`state`, `SenderAccount`.`country`, 
`SenderAccount`.`active`, `SenderAccount`.`account_name`, `SenderAccount`.`abn` 
FROM 
`pra`.`relationships` AS `Relationship` LEFT JOIN 
`pra`.`accounts` AS `ReceiverAccount` ON (
`Relationship`.`receiver_id` = `ReceiverAccount`.`id`) LEFT JOIN 
`pra`.`accounts` AS `SenderAccount` ON (
`Relationship`.`sender_id` = `SenderAccount`.`id`) WHERE (
(`Relationship`.`sender_id` = 2) OR (`Relationship`.`receiver_id` = 2)) 
```

当我在注释掉分页后调试 $relationships 时，我得到以下输出

```
array(
    (int) 0 => array(
        'Relationship' => array(
            'id' => '5',
            'sender_id' => '3',
            'receiver_id' => '2',
            'active' => false,
            'requested' => false,
            'expiry_date' => '2012-05-09'
        ),
        'ReceiverAccount' => array(
            'id' => '2',
            'street' => '50 Simmington Circuit',
            'city' => 'Greenvale',
            'postcode' => '3059',
            'state' => 'VIC',
            'country' => 'Australia',
            'active' => true,
            'account_name' => 'Kialla Transport (Operations) Pty Ltd',
            'abn' => '2147483647'
        ),
        'SenderAccount' => array(
            'id' => '3',
            'street' => '31 Simmington Circuit',
            'city' => 'Greenvale',
            'postcode' => '3059',
            'state' => 'VIC',
            'country' => 'Australia',
            'active' => true,
            'account_name' => 'MGD Kialla Pty Ltd',
            'abn' => '2147483647'
        )
    ), 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:16:21.583

删除行：

```
$this->paginate = array(
'limit' => 10,
'conditions'=> $conditions); 
```

在关系控制器的顶部添加变量：

```
public $paginate = array(
  'Relationship' = > array(
    'limit' => 10)
   )
); 
```

然后尝试：

```
$this->set('relationship', $this->paginate('Relationship', $conditions)); 
```

这应该可以解决问题...

# iphone - 将 iphone/ipod 记忆歌曲设置为铃声

> ID：12471322
> 
> 赞同：0
> 
> 时间：2012-09-18T06:15:06.403
> 
> 标签：iphone, objective-c, ios, xcode, ringtone

目前我正在开发一个应用程序，其中需要在应用程序中将 iPhone/iPod 记忆歌曲设置为铃声。最初，我在我的应用程序表视图中添加了 iPhone 的默认记忆歌曲。`MPMediaPickerController`现在我想将所选歌曲设置为特定时间间隔的铃声。我已经搜索了我最好的，但没有找到任何解决方案。如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T06:20:22.753

您不能从您的应用程序设置铃声。API 不支持此功能。

# asp.net - 在asp.net中测量互联网速度

> ID：12471329
> 
> 赞同：0
> 
> 时间：2012-09-18T06:15:50.173
> 
> 标签：asp.net, bandwidth

我正在开发一个需要根据互联网速度/带宽改变内容的网站。

> 在带宽较低的地方，Web 应用程序应该只显示纯文本，而对于正常带宽，则显示正常的网站。

几天以来我一直在考虑它，但我无法找到合适的解决方案。有没有一种简单的方法来检测 asp.net 中的带宽？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-02T11:23:37.280

按照给定的代码检查您的互联网连接速度添加命名空间

使用 System.Net；

在测试按钮单击事件上编写代码..

```
 Uri URL = new Uri("http://sixhoej.net/speedtest/1024kb.txt");

    WebClient wc = new WebClient();

    double starttime = Environment.TickCount;

    // download file from the specified URL, and save it to C:\speedtest.txt

    wc.DownloadFile(URL, @"C:\speedtest.txt");

    // get current tickcount

    double endtime = Environment.TickCount;

    // how many seconds did it take?

    // we are calculating this by subtracting starttime from endtime

    // and dividing by 1000 (since the tickcount is in miliseconds.. 1000 ms = 1 sec)

    double secs = Math.Floor(endtime - starttime) / 1000;

    // round the number of secs and remove the decimal point

    double secs2 = Math.Round(secs, 0);

    // calculate download rate in kb per sec.

    // this is done by dividing 1024 by the number of seconds it

    // took to download the file (1024 bytes = 1 kilobyte)

    double kbsec = Math.Round(1024 / secs);

    Label1.Text = "Download rate: " + kbsec + " kb/sec";

    try

    {

        // delete downloaded file

        System.IO.File.Delete(@"C:\speedtest.txt");

         Response.Write("Done.");

    }

    catch

    {

        Response.Write("Couldn't delete download file.");

         Response.Write("To delete the file yourself, go to your C-drive and look for the file 'speedtest.txt'.");            

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T06:28:54.750

请检查以下链接，希望您能从服务请求中获得有关带宽检查的想法

1.  [堆栈答案](https://stackoverflow.com/a/379543/1358004)
2.  [堆栈答案](https://stackoverflow.com/a/400668/1358004)

# sql - 如果您有每日数据，如何每周分组

> ID：12471346
> 
> 赞同：9
> 
> 时间：2012-09-18T06:17:17.173
> 
> 标签：sql, sql-server, tsql

我目前遇到了这个问题。假设我有以下每日数据

```
 +-------------------------+-----+----+
    |          Date           | C1  | C2 |
    +-------------------------+-----+----+
    | 2012-08-01 00:00:00.000 |  44 | 44 |
    | 2012-08-02 00:00:00.000 |  51 | 49 |
    | 2012-08-03 00:00:00.000 |  60 | 59 |
    | 2012-08-04 00:00:00.000 |  68 | 67 |
    | 2012-08-05 00:00:00.000 |  82 | 78 |
    | 2012-08-06 00:00:00.000 |  62 | 59 |
    | 2012-08-07 00:00:00.000 |  58 | 53 |
    | 2012-08-08 00:00:00.000 |  69 | 65 |
    | 2012-08-09 00:00:00.000 |  82 | 72 |
    | 2012-08-10 00:00:00.000 |  70 | 68 |
    | 2012-08-11 00:00:00.000 |  75 | 71 |
    | 2012-08-12 00:00:00.000 |  64 | 64 |
    | 2012-08-13 00:00:00.000 |  74 | 69 |
    | 2012-08-14 00:00:00.000 |  60 | 56 |
    | 2012-08-15 00:00:00.000 |  66 | 60 |
    | 2012-08-16 00:00:00.000 |  57 | 51 |
    | 2012-08-17 00:00:00.000 |  52 | 49 |
    +-------------------------+-----+----+ 
```

我将如何对它进行分组，以便每周汇总 C1 和 C2？预期输出应该是

```
+---------------------------+------+----+
|          Date             |  C1  | C2 |
+---------------------------+------+----+
| 2012-08-06 to 2012-12-12  |  480 | 452|
| 2012-08-13 to 2012-08-19  |  430 | 394|
+---------------------------+------+----+ 
```

它从 2012-08-06 开始，因为周期应该是周一到周日。我已经尝试了大约一个小时左右的谷歌搜索，似乎没有结果适合我的问题，我希望有人可以帮助我。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-18T06:31:43.620

试试这个：

[SET DATEFIRST](http://msdn.microsoft.com/en-us/library/ms181598.aspx) 1 会将您的一周开始时间设置为星期一

```
SET DATEFIRST 1

    SELECT CAST(MIN( [DATE]) AS VARCHAR(20))+' TO '+CAST (MAX([DATE]) AS VARCHAR(20)) AS DATE,
           SUM(C1) AS GRU,
           SUM(C2) AS C1
    FROM   YOUR_TABLE
    GROUP BY DATEPART(WEEK,[DATE])
    HAVING COUNT(DISTINCT[DATE])=7

SET DATEFIRST 7 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T07:34:04.353

可能是这样的（记得接受答案）

```
declare @t table(Date datetime, C1 int, C2 int)
insert @t values('2012-08-01',44,44)
insert @t values('2012-08-02',51,49)
insert @t values('2012-08-03',60,59)
insert @t values('2012-08-04',68,67)
insert @t values('2012-08-05',82,78)
insert @t values('2012-08-06',62,59)
insert @t values('2012-08-07',58,53)
insert @t values('2012-08-08',69,65)
insert @t values('2012-08-09',82,72)
insert @t values('2012-08-10',70,68)
insert @t values('2012-08-11',75,71)
insert @t values('2012-08-12',64,64)
insert @t values('2012-08-13',74,69)
insert @t values('2012-08-14',60,56)
insert @t values('2012-08-15',66,60)
insert @t values('2012-08-16',57,51)
insert @t values('2012-08-17',52,49)

select 
convert(varchar(10), dateadd(week, datediff(week, 0, date-1),0), 120)+' to '+
convert(varchar(10), max(dateadd(week, datediff(week, 0,date-1),6)), 120) Date,
sum(C1) GRU, sum(C2) C1
from @t
group by dateadd(week, datediff(week, 0, date-1),0)
having datediff(day, 0, min(date)) %7 = 0 
```

# ruby-on-rails - 如何匹配水豚中的css类和文本

> ID：12471348
> 
> 赞同：1
> 
> 时间：2012-09-18T06:17:22.477
> 
> 标签：ruby-on-rails, capybara, bdd

我有以下集成步骤来检查一个`.credits_count`类和一个`0 credits on it`.

```
it "show credits available at the top." do 
  user = Factory.create(:user)
  login_as(user, :scope => :user)
  page.should have_selector('.credits_count', text: '0 credits')
end 
```

问题是当`.credits_count`页面上带有文本时出现以下错误。

```
 Credits when user is non-enabled show user credits available at the top.
   Failure/Error: page.should have_selector('.credits_count', text: '0 credits')
   expected css ".credits_count" with text "0 credits" to return something
   # ./spec/requests/credits_spec.rb:12:in `block (3 levels) in <top (required)>' 
```

知道为什么它没有看到`.credits_count`选择器吗？

视图布局如下所示。

```
# app/views/layouts/application.html.haml
- if current_user
  %li.credits_count
    = current_user.credits_count
    credits 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T08:30:54.770

要使 Capybara 的“页面”工作，您需要使用 Capybara 的“访问”检索页面，请参阅[有关 RSpec 和 Capybara 的这个问题](https://stackoverflow.com/questions/7260720/rspec2-and-capybara)。

# esent - 我应该如何将 Esent 与托管 Esent 包装器一起使用？

> ID：12471350
> 
> 赞同：4
> 
> 时间：2012-09-18T06:17:27.800
> 
> 标签：esent

我尝试按照示例进行操作，使用 Using 语句打开实例、创建会话、附加到数据库、打开它，然后执行一些操作，例如打开事务和保存记录。但是当我对每个操作都使用这种模式时。每个操作（如保存）大约需要 0.5 秒。所以我认为我做错了。但我不确定我应该怎么做。

我应该只有一个实例吗？如果它们的名称不同，我可以拥有更多吗？

如果我有多个线程，我可以/我应该有更多吗？

我看到我可以同时打开多个会话，我认为可以，但是每个会话都需要附加吗？应该为每个会话打开数据库吗？当我测试这些不同的场景时，我得到的结果不一致，有时我的测试通过有时我得到异常，例如尝试使用已处置的对象或 EsentTempPathInUseException。

那么有什么关于我应该如何使用它的指导吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T21:49:55.813

我在其他地方或通过反复试验找到了这些答案，但对于在这里看到它们的任何人......

您应该只有一个实例，创建实例非常昂贵，它实际上是在创建数据库，并且因为它会从意外关闭中自我修复，如果需要，它可能会运行这些例程。如果您将其命名为不同的实例，则不能打开多个实例，它将创建与第一个不同的第二个实例。如果你重叠它们，那么你会得到一个错误。

多线程没有问题。打开一个数据库一次。附加一次会话。会话不应跨线程。您可以有多个线程，每个线程都有自己的会话，每个会话都访问数据库。确保您处理托管的 escent 对象。所以请按照示例使用“使用”语句或确保对象处理它们。

当当前实例仍在使用时，尝试打开第二个实例时抛出 EsentTempPathInUseException。

我遇到的已处置对象异常是因​​为我不应该重叠创建和处置 Managed Esent 对象。

# c# - C# 中的只读属性与只读成员变量

> ID：12471352
> 
> 赞同：3
> 
> 时间：2012-09-18T06:17:34.503
> 
> 标签：c#

我有一个`ExProperty`类似下面的课程：

```
class ExProperty
{
    private int m_asimplevar;
    private readonly int _s=2;

    public ExProperty(int iTemp)
    {
        m_asimplevar = iTemp;  
    }

    public void Asimplemethod()
    {
        System.Console.WriteLine(m_asimplevar);
    }

    public int Property
    {
        get {return m_asimplevar ;}
        //since there is no set, this property is just made readonly.
    }
}

class Program
{
    static void Main(string[] args)
    {
        var ap = new ExProperty(2);
        Console.WriteLine(ap.Property);
    }
} 
```

1.  使/使用属性只读或只写的唯一目的是什么？我明白了，通过下面的程序，`readonly`达到了同样的目的！

2.  当我将属性设为只读时，我认为它不应该是可写的。当我使用

    ```
    public void Asimplemethod()
    {
        _s=3; //Compiler reports as "Read only field cannot be used as assignment"
        System.Console.WriteLine(m_asimplevar);
    } 
    ```

    是的，这没关系。

    但是，如果我使用

    ```
    public ExProperty(int iTemp)
    {
        _s = 3 ; //compiler reports no error. May be read-only does not apply to constructors functions ?
    } 
    ```

    为什么在这种情况下编译器不报告错误？

3.  表白`_s=3`好吗？或者我应该`_s`使用构造函数声明并分配它的值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T06:24:26.317

是的，`readonly`关键字意味着该字段只能在字段初始值设定项和构造函数中写入。

如果需要，可以结合`readonly`属性方法。`private`可以声明属性的支持字段，`readonly`而属性本身只有一个 getter。然后，支持字段只能在构造函数（以及可能的字段初始值设定项）中分配。

您可以考虑的另一件事是制作一个字段。由于字段本身是只读的，因此如果 getter 所做的只是返回字段值，那么实际上您并没有从 getter 中获得什么。**`public`** `readonly`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T06:27:56.607

属性的关键是为类外部提供接口。通过不定义`Set`或将其设为私有，您可以将其设置为在类外部“只读”，但仍然可以从类方法内部对其进行更改。

By making field `readonly`, you are saying it should never change, no matter from where this change comes.

# psexec - PSEXEC 是否支持域间执行？

> ID：12471354
> 
> 赞同：0
> 
> 时间：2012-09-18T06:17:45.920
> 
> 标签：psexec

必须将文件从当前机器复制到另一台机器。一旦完成，他复制的文件必须被触发。这里的问题是机器位于不同的网络域。

PSEXEC 是否支持域间执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:55:59.830

是的。我正在这样做。话虽如此，我在使用 PsExec 执行一些更复杂的操作时遇到问题，一旦完成就永远不会返回。尽管通过 -u \[domain][username] 和 -p [password] 并运行基本的 DOS 命令，这对我来说效果很好。请参阅下面的链接以获取指向我的问题的链接。

[PsExec 1.98（从 C# 进程产生）在跨域运行 7Zip 时永远不会完成](https://stackoverflow.com/questions/13940288/psexec-1-98-spawned-from-c-sharp-process-never-completes-when-running-7zip-acr)

# javascript - 从给定的 DATE PERIOD 的几个月计算季度需要微调的解决方案

> ID：12471357
> 
> 赞同：0
> 
> 时间：2012-09-18T06:17:55.850
> 
> 标签：javascript, google-apps-script

我想计算编号。给定 DATE 期间的季度数（四舍五入到小数点后 2 位）。

```
Fr eg, 
DATE FORMAT:DD/MM/YYYY
START DATE = 1/3/2012
END DATE = 1/6/2012
No of quarters shld be = 3  

DATE FORMAT:YYYY-MM-DD
START DATE = 2012-09-05
END DATE = 2012-11-21
No of quarters shld be = 0.85 
```

我已经编写了一个脚本（谷歌应用程序脚本）来计算计算 fnctn 的季度，它工作正常！我的脚本超过了 1000 行，里面写了许多硬编码/常量，比如硬编码月份、年份来计算闰年，..,..etc

那么，有人可以给我一个更好的想法/建议/解决方案来改进/减少我的编码吗？还是我没有使用最好的概念来编写我的脚本？

注意：我使用的场景：

为了获得我为每种可能性计算的十进制值。这就像“一年以上”和“一年内”。在这个“一年内”中，我使用了“一个多月”和“一个月内”。如果满足“超过一个月”和“一年内”，我会通过每月检查来检查月份持续时间。

我只是[在这里](http://cloud.github.com/downloads/chockalingamr/file/quarters%20code.txt)添加了我的代码以获得更多许可。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:19:54.667

我认为这样的事情可能会奏效：

(年 2 - 年 1)*4 + (月 2 - 月 1)/3

如果您使用实际日期而不是字符串，则可以调用 getFullYear 和 getMonth 来查找每个日期的年份和月份。

顺便说一句，开始日期 = 2012 年 1 月 3 日结束日期 = 2012 年 1 月 6 日如何
工作？3天=3个季度怎么算？

# javascript - 过滤/搜索功能不针对动态添加的行

> ID：12471361
> 
> 赞同：0
> 
> 时间：2012-09-18T06:18:05.593
> 
> 标签：javascript, jquery, html, filter, html-table

我找到了一个如何在表中搜索值的示例。

```
 var $userRows = $('#UserTableContainer tr');
    $('#searchuser').keyup(function () {
        var val = $.trim($(this).val()).replace(/ +/g, ' ').toLowerCase();

        $userRows.show().filter(function () {
            var text = $(this).text().replace(/\screen+/g, ' ').toLowerCase();
            return ! ~text.indexOf(val);
        }).hide();
    }); 
```

它适用于“普通”表，例如参见[http://jsfiddle.net/7BUmG/2/](http://jsfiddle.net/7BUmG/2/)但是，我使用 jQuerys 模板函数向我的表添加值。

```
function PrintUsers(item) {
    $.template('userList', '<tr>\
         <td>${Firstname} ${Lastname}</td>\
         </tr>');

    $.tmpl('userList', item).appendTo("#UserTableContainer");
} 
```

当我尝试在我的表中搜索元素时，它只会过滤我的标题，即此表中的“名称”行。

```
 <table id="UserTableContainer">
        <tr>
            <th>Name</th>
        </tr>
    </table> 
```

有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T06:29:30.100

**更新代码** [http://jsfiddle.net/7BUmG/128/](http://jsfiddle.net/7BUmG/128/)
您需要`'on'`用于动态添加的 dom 元素。因此我们不能在当前 dom 上使用 using keyup 。使用方法是：：

```
 $(document).on(events, selector, data, handler); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T06:31:37.027

Tobias，您的标记可能是错误的。

顺便说一句，如果您将使用表头并且您不希望它过滤这些：

```
var $rows = $('#table tr').not(':first'); 
```

# javascript - 内容安全策略的值无效：Google Chrome 扩展程序

> ID：12471362
> 
> 赞同：3
> 
> 时间：2012-09-18T06:18:13.727
> 
> 标签：javascript, google-chrome, google-chrome-extension, manifest, content-security-policy

我一直在更新`manifest_version`我们的 chrome 应用程序，并在`content_security_policy`. 他们已经停止支持内联 js 和很多东西。我想通过在我的清单中添加以下行来放松这个限制

```
"content_security_policy": "script-src 'self' 'unsafe-eval'; object-src 'self'" 
```

当我尝试从 chrome 加载未打包的扩展时，它给了我一条错误消息 `Invalid value for content_security_policy`。具有讽刺意味的是，我从[谷歌的 chrome 扩展开发者文档](http://developer.chrome.com/trunk/extensions/contentSecurityPolicy.html#H3-1)中复制了这一行（请参阅“评估的 Javascript”部分）

**编辑：清单版本 2 中不支持的** [Google 线程](http://code.google.com/p/googleappengine/issues/detail?id=7795)状态`unsafe-eval`。我现在如何使用我认为需要的 jquery 和类似脚本`unsafe-eval`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T13:01:53.303

`unsafe-eval`[在开发、主干和beta](http://developer.chrome.com/beta/extensions/contentSecurityPolicy.html)版本的文档中都提到了，但在[稳定](http://developer.chrome.com/stable/extensions/contentSecurityPolicy.html)的文档中却没有。您可能必须等待当前的测试版变得稳定。[在此之前，您可以在](http://www.chromium.org/developers/calendar)[Chrome Canary](https://tools.google.com/dlpage/chromesxs)上测试您的扩展程序。

# html - index.html 在 IOS 应用程序开发中的行为不符合要求

> ID：12471365
> 
> 赞同：0
> 
> 时间：2012-09-18T06:18:26.543
> 
> 标签：html, objective-c, css, ios, xcode

我的 index.html 包含以下代码：

```
<!DOCTYPE html>
<html>
    <head>
      <title>Index Page</title> 
    </head>
    <body id="bd" style="border:2px solid yellow;width:100%;height:100%">

        <div id="toolHome" class="toolbar" style="postion:fixed;height:40%;top:0;border:2px solid green;width:100%">
            <div id="div1"  style="width:28%;float:left" onclick="edit()">Edit</div>
        </div>

    </body>
</html> 
```

被`div id="toolHome"`保存在体内，但身体并没有占据整个空间。我也尝试为 body 标签提供 100% 的高度和 100% 的宽度。我不知道为什么会这样。头部分中不包含其他文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T06:30:35.947

***[演示](http://tinkerbin.com/aINdqWSz)***

嗨，现在给`html and body height:100%;`

像这样

```
html, body{
height:100%;
} 
```

***[现场演示](http://tinkerbin.com/aINdqWSz)***

# c# - 如何获取workflowservicehost工作流状态

> ID：12471372
> 
> 赞同：0
> 
> 时间：2012-09-18T06:19:03.693
> 
> 标签：c#, workflow, workflow-foundation-4, workflowservice

我有工作流说 WF1 托管在工作流服务主机中。
现在在客户端我想获取 WF1 的状态。
有什么办法可以得到状态。
我不想使用工作流跟踪来获取状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T01:17:23.717

在我看来，最好的方法是设置一个工作流跟踪参与者并将其添加到工作流应用程序的扩展中。然后，跟踪参与者可以将数据提供给客户端可以引用的另一个 WCF 服务，以获取工作流的运行状况。

另一种方法是设置您的工作流程，以便它通过使用包含在**PickBranch活动中的****ReceiveAndSendReply**活动提供两种 Web 方法。其中一个**Receive**活动可以执行您的正常操作，而另一个**Receive**活动可以提供工作流的状态。在我看来，这不是一个干净的解决方案。

# php - 您需要采取哪些步骤/流程来创建 API

> ID：12471373
> 
> 赞同：-1
> 
> 时间：2012-09-18T06:19:07.463
> 
> 标签：php, api, oop, web-applications, social-networking

我需要采取哪些步骤/流程来计划为我的网站（使用 PHP 和 SQL 技术）创建 API？另外，我需要知道哪些信息？

例如，第一步：创建索引页面，第二步：创建这组或库代码等...

我正在从头开始创建一个社交网站，我想在 alpha 阶段实现一个 API。我假设我需要使应用程序面向对象，这没有问题。但是您在 API 实施过程中究竟从哪里开始呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T06:39:45.870

首先：决定为什么你真的需要这个 API。如果您要生成一些使用此 API 本身的客户端应用程序，这是一个很好的理由。如果您只是希望一旦您的服务变得流行，有人会使用该 API 来做有趣的事情，那么这是一个糟糕的理由。您将花费很长时间在 API 上工作，而没有人愿意使用它。让您的服务受欢迎并首先衡量对 API 的兴趣。

话虽如此，API 只是您网站上的另一个 URL，您可以在其中以结构化的、机器可读的 XML 或 JSON（或其他格式）提供数据，它与为您的常规页面提供的 HTML 文档根本没有什么不同。
主要区别在于 API 需要设计良好且*稳定*。您可以随时重新设计您的 HTML，但是一旦编写了客户端以使用您的 API，它不应该在未来一段时间内改变。所以你需要好好规划API的使用和数据格式。如果您清楚它的用途，这会更容易。详细研究其他大型服务的现有 API，看看它们是如何解决一些细节的。

在内部，您将希望以模块化方式构建您的应用程序。使用例如 MVC 模式正确分离关注点。您将在模型中拥有核心逻辑，并且您将拥有*两个*（或更多）视图；一个常规 HTML 视图和一个 JSON/XML API 视图，用于基本相同的数据。这意味着：不要将任何重要的逻辑与您必须在 API 视图中复制的 HTML 混合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T06:26:39.240

对于 PHP，请尝试[http://laravel.com/](http://laravel.com/) - [https://tutsplus.com/lesson/restful-controllers/](https://tutsplus.com/lesson/restful-controllers/)获取教程。有一个很好的 nettuts 视频，关于使用 laravel 作为backbonejs 后端，但我找不到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T07:55:46.173

您还可以尝试使用后端即服务提供程序来自动为您的数据模型生成休息接口。例如[www.apiomat.com](http://www.apiomat.com)提供生成的 php-client 代码来访问生成的 REST 接口。

# java - 在 Linux 上构建 OpenJDK 时可以设置多少调试选项？

> ID：12471377
> 
> 赞同：2
> 
> 时间：2012-09-18T06:19:30.633
> 
> 标签：java, build, jvm, openjdk

我想在我自己的 PC 上构建一个调试版本的 openJDK，有没有人可以在构建 openJDK 时告诉我所有的调试选项。

到目前为止，我知道：

```
DEBUG_NAME=all_fastdebug
BUILD_JAXWS=false
BUILD_JAXP=false 
```

还要别的吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T12:20:17.010

您可以查看 openjdk7 的[Makefile](http://hg.openjdk.java.net/jdk7/jdk7/file/ee67ee3bd597/Makefile)并查看所有选项。

仅`DEBUG_NAME`与调试有关，其余仅用于选择要构建的组件

这是我在makefile中找到的：

```
DEBUG_NAME=fastdebug
BUILD_HOTSPOT=false
BUILD_JDK=false
BUILD_LANGTOOLS=false
BUILD_CORBA=false
BUILD_JAXP=false
BUILD_JAXWS=false
UILD_INSTALL=false
BUILD_SPONSORS=false 
```

# javascript - 使用动力学 js 一次在画布上加载一张图片加载多张图片

> ID：12471378
> 
> 赞同：0
> 
> 时间：2012-09-18T06:19:44.237
> 
> 标签：javascript, html, kineticjs

如何使用 Kinetic.js 将一组图像加载到画布中，并且一次也不应加载所有图像。如果单击下一个图像，则应遍历图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T12:30:48.710

在 KineticJS 中替换图像（显示一个代替另一个）可以通过以下方式完成。

假设您有 2 张图片已上传到数组变量 imgs[]。如果您在处理图像之前不确定如何加载图像，可以[在此处阅读](http://aniruddhaloya.blogspot.com/2012/03/how-to-ensure-images-are-loaded-before.html)

让我们说：

```

```
var imgs = new Array(2);
imgs[0] = "images/image1.png";
imgs[1] = "images/image2.png"; 
```

让我们定义你的显示区域如下：

```
    var dispArea = new Kinetic.Image(
    {

    图片：imgs[0]，
    // 您可以在内部指定初始 x,y 位置坐标或稍后设置它们。
    // 同样对于宽度、高度等
    });
    dispArea.currIndex = 0; //这会设置当前显示图像的索引
    displayLayer.add(dispArea); //假设你的层被命名为displayLayer

```

因此，对于**下一个按钮的** *“onClick”*事件，您可以调用定义如下的函数*“changeImage” ：*

```
    函数改变图像（）
    {
    // 增加索引，如果超过所有图像，则将其设为零
    dispArea.currIndex = (dispArea.currIndex + 1)%imgs.length;

    dispArea.setImage(imgs[dispArea.currIndex]);

    displayLayer.draw();
    }

```

```

# c++ - 有什么方法可以知道点击win8 webview是下载还是导航？

> ID：12471381
> 
> 赞同：0
> 
> 时间：2012-09-18T06:20:13.490
> 
> 标签：c++, windows, webview

我尝试了很多，发现很多事件目前在 win8 webview 元素中不起作用。

# jquery - SimpleModal 上的倒数计时器

> ID：12471382
> 
> 赞同：1
> 
> 时间：2012-09-18T06:20:17.527
> 
> 标签：jquery, .net, simplemodal

在 n 秒后看到关于自动关闭 SimpleModal 的相关帖子（效果很好），但我还想在模态内容中显示倒数计时器。这里的参考是自动关闭解决方案。有什么想法吗？

```
$.modal('<div>HELLO</div>', {
overlayClose: true,
onShow: function() {
    var timer;
    $('#simplemodal-container').bind({
        mouseenter: function() {
            clearTimeout(timer);
        },
        mouseleave: function() {
            timer = setTimeout($.modal.close, 1500);
        }
    })
    .trigger('mouseleave');
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:52:54.183

在 onShow 参数中有这个对我有用：

```
onShow: function (dialog) {
   var modal = this;
   $('.messageTimeout', dialog.data[0]).append(message3);
   countdow = 59;
   setInterval(function() {
      $('.messageTimeout', dialog.data[0]).html('You will be logged out in ' + countdow + ' seconds if you do not take any action.');
      countdow -= 1;
   },1000);
} 
```

# c++ - 调试对已释放内存的非法访问

> ID：12471388
> 
> 赞同：0
> 
> 时间：2012-09-18T06:20:41.163
> 
> 标签：c++, memory-management

我现在正在追逐一个错误几周。我正在使用多线程环境（C++、VC2010），有时我看到的是新建或删除时崩溃。

当我查看输出时，我看到一个关于内存被释放并在之后被修改的抱怨（`HEAP: Free Heap block 55e6128 modified at 55e619c after it was freed`）。当我查看同一地址 ( `0x55e6128`) 的内存时，我可以看到`0xFEE`E 的模式，然后`00 00 00 00`又看到了`FE EE`。

在我看来，它是一个已删除的对象，它有一个长的 4 个字节的成员（或指针），并且有人试图在对象被删除后将此成员设置为零。

知道如何调试吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T06:40:40.763

4 字节成员是公开的吗？如果是这样，这就是为什么公共数据成员不好的一个例子，您应该几乎总是将它们设为私有或受保护（并可能提供 getter/setter）。

因此，如果它是公开的，我建议将其设为私有并添加一个 getter 和一个 setter。然后在 setter 处设置断点并继续运行应用程序，每次都检查，直到看到 setter 调用了已释放的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-06T22:30:39.727

几周后我发现了问题。有一个指向在 2 个线程之间共享的对象的原始指针。您无法判断哪个线程首先完成它，所以这是谁负责删除的问题。其中一个删除了指针，另一个仍在使用它并将某些值设置为零（因此我在已删除的内存上看到了 4 个字节的零）。解决方案是使用 std::shared_ptr 而不是带有 new 和 delete 的原始指针。shared_ptr 是线程安全的。

# java - 是否可以实现以下访问级别

> ID：12471392
> 
> 赞同：2
> 
> 时间：2012-09-18T06:21:09.730
> 
> 标签：java, access-modifiers

请让我知道这些访问级别在 java 中是否可行，如果不是，有什么替代方案。

问题一：

```
From same class:                yes
From subclass same package:     yes
From any class same package:    no
From subclass outside package:  no
From any class outside package: no 
```

和问题 2：

```
From same class:                yes
From subclass same package:     yes
From any class same package:    no
From subclass outside package:  yes
From any class outside package: no 
```

没有一个访问修饰符（public/private/default/protected）提供上述控制集。

例如：我有一个只能在同一个类中访问的私有成员。如我的第一个问题所述，如何对其进行访问控制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T06:36:41.067

没有一个 java 范围符合您的*要求*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T06:40:18.087

java 中可用的访问说明符不符合您的要求。

没有区别

```
From subclass same package:      
From subclass outside package: 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T07:15:29.047

不同包中的子类不能被赋予单独的访问级别。

唯一可能的解决方法是重新构建包:-(

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T06:25:55.617

你应该可以在这里找到它们：http: [//docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T06:26:03.420

这种细分应该可以帮助您确定答案。

```
From same class:                 //private, default, protected, public
From subclass same package:      //default, protected, public
From any class same package:     //default, protected public
From subclass outside package:   //protected, public
From any class outside package:  //public 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-18T06:37:25.310

不，不可能达到您想要的 2 访问级别要求。

Java 中只有 4 个访问级别，public、default、protected 和 private。它们都不符合您的要求。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-04T06:27:02.777

Yes, It's possible. but as mentioned above, it's not achieved by simply using the default available access modifiers. you need to add a *getter* to control the access to your attribute or method.

```
package house;

public class Father {
    private String secret = "I am your father";

    // for Q1 use default, for Q2 use protected
    protected String getSecret() {
        if(this.getClass().getName() != "house.Father") return secret;
        else return "some talk about the weather...";
    }
} 
```

This getter allow the access by inheritance exclusively, and a direct access to the private attribute is always available. but the access by reference is denied.

# c# - 阅读PDF文件？

> ID：12471395
> 
> 赞同：0
> 
> 时间：2012-09-18T06:21:18.110
> 
> 标签：c#, pdf, .net-4.0, itextsharp, extract

这将是我第一次阅读 PDF。

我四处寻找，发现了使用 C# 执行此操作的选项并选择使用 iTextSharp。

到目前为止，我已经完成了基本的操作，例如读取文件并毫无问题地获取内容。

```
PdfReader reader = new PdfReader(iPDF.Text);
for (int x = 2; x <= reader.NumberOfPages; x++)
{
    iResult.Text = Encoding.UTF8.GetString(reader.GetPageContent(x));
    break;
} 
```

如您所见，这是一个非常基本的代码，只是将 PDF 的第二页读入文本文件，但是，我注意到文本文件中有很多代码，我对如何仅解析有点迷茫我需要的数据。

我想知道的是，是否有一种模式或其他东西可以帮助我只获得 PDF 的那部分。查看纯文本文件，似乎有些东西定义了行的开始/结束、颜色等。

部分提取数据：

```
1 0 0 1 0 612 cm 0 0 0 rg
0 0 0 RG
28.35 -28.35 735.3 -526.95 re
W
n
0 0 0.502 sc
28.35 -65.5 735.3 -12.75 re
f
28.35 -543.9 735.3 -11.4 re
f
q
92.25 -28.35 560.9 -18 re
W
n
1 1 1 sc
92.25 -28.35 560.9 -18 re
f
BT
1 0 0 1 95.25 -39.1 Tm
0 0 0 sc
/i 10.75 Tf
(Name - Live) T 
```

注意：以上只是第 2 页的部分初始数据，以指出我之前的意思。

这些数据是表格形式的东西吗？我怎么能只提取那个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T06:33:17.583

尝试使用 a `PdfTextExtractor`，因为它会为您提供更多人类可读的 pdf 文本：

```
for (int page = 2; page <= reader.NumberOfPages; page++)
{
    var strategy = new SimpleTextExtractionStrategy();
    string text = PdfTextExtractor.GetTextFromPage(reader, page, strategy);
    iResult.Text = text;
} 
```

# javascript - JQuery：最有效的事件声明方式是什么？

> ID：12471396
> 
> 赞同：1
> 
> 时间：2012-09-18T06:21:22.240
> 
> 标签：javascript, jquery, javascript-events

我正在升级一个包含 2 个具有大量元素的视图的 Web 项目。

这时候所有的元素都有mouseenter、mouseleave、click、...等几个事件**在网页渲染的时候被一一定义**。

我的问题是：使用最后一个 JQuery 方法[.on()](http://api.jquery.com/on/)使用事件映射和动态选择器是否**更有效：**

```
$("#main-container").on({
    mouseenter: function (event) {    
       //Do stuff
    },            
    mouseleave: function (event) {
       //Do stuff     
    },
    mousedown: function (event) {
       //Do stuff
    }
    },
    ".cartridge"
); 
```

比当前事件声明：

```
$('[id^="cartridge"]').each(function(index) {       
    $(this).click(function(){
        //Do stuff
    }); 
    $(this).mouseenter(function(){
        //Do stuff
    }); 
    $(this).mouseleave(function(){
        //Do stuff
    }); 
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T06:32:51.027

根据 .on() 的 jquery API，它更有效，因为只有一个事件附加到您的 #main-container 并且来自不同 .cartridge 的事件只需要“冒泡”到这个容器。

从jQuery API：

> 除了能够处理尚未创建的后代元素上的事件之外，委托事件的另一个优点是当必须监视许多元素时，它们的开销可能会大大降低。在其 tbody 中有 1,000 行的数据表上，此示例将处理程序附加到 1,000 个元素：
> 
> ```
> $("#dataTable tbody tr").on("click", function(event){
>   alert($(this).text());
> }); 
> ```
> 
> 委托事件方法仅将事件处理程序附加到一个元素，即 tbody，并且事件只需要冒泡一个级别（从单击的 tr 到 tbody）：
> 
> ```
> $("#dataTable tbody").on("click", "tr", function(event){
>   alert($(this).text());
> }); 
> ```

[http://api.jquery.com/on/](http://api.jquery.com/on/)请参阅“直接和委托事件”

# iphone - Spotify 打开音频播放器

> ID：12471397
> 
> 赞同：1
> 
> 时间：2012-09-18T06:21:24.767
> 
> 标签：iphone, ios4, cocoalibspotify-2.0

目前我可以播放Spotify曲目。我可以听曲目。但是，如果我想像 spotify 一样打开一个音频播放器并希望看到播放器及其控件以及收听，该怎么办？我的代码在这里：

```
// Invoked by clicking the Cell in the UI.

// arrfileteredURL -> list of track urls 

NSURL *trackURL = [NSURL URLWithString:[NSString stringWithFormat:@"%@",[arrfileteredURL objectAtIndex:indexPath.row]]];
NSLog(@"trackURL > %@",trackURL);
[[SPSession sharedSession] trackForURL:trackURL callback:^(SPTrack *track)
 {
     if (track != nil)
     {
         [SPAsyncLoading waitUntilLoaded:track timeout:kSPAsyncLoadingDefaultTimeout then:^(NSArray *tracks, NSArray *notLoadedTracks) 
          {
              [self.playbackManager playTrack:track callback:^(NSError *error)
               {
                   if (error)
                   {
                       UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Cannot Play Track" message:[error localizedDescription] delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
                       [alert show];
                   } else 
                   {
                   }
               }];
          }];
     }
 }]; 
```

playManagerWillStartPlayingAudio 会做什么？它只会播放音频还是让用户也能看到播放器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T16:42:00.077

`playbackManagerWillStartPlayingAudio`只是告诉您噪音已经开始传递到扬声器/耳机/等。

CocoaLibSpotify 不附带任何播放器 UI。如果你想要这个，你必须自己构建它。

# vim - 如何在 PHP 文件中启用 HTML 片段？

> ID：12471398
> 
> 赞同：4
> 
> 时间：2012-09-18T06:21:29.257
> 
> 标签：vim

当我处理 PHP 文件时，我很可能会在其中嵌入一些 HTML。问题是当我编辑一个名为`foo.php`Vim 的文件时，它会自动将其文件类型设置为 php，而 html 的片段在其中不起作用。

*好吧，我可以快速*将文件类型设置为html *(`:set ft=html`*

我使用 snipMate 作为我的片段管理器。我怎样才能达到我想要的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T06:21:29.257

PHP 和 HTML 条件很容易*（如果您使用 snipMate）*，我还没有尝试过其他文件类型。您可以在 ~/.vimrc 文件中设置它：

```
autocmd filetype php set filetype=php.html 
```

需要注意的一点是，当您将文件类型设置为 时`php.html`，突出显示的是 PHP，并且代码段将从 html 导入。上面的配置将与`set ft=html.php`（以及片段将起作用）不同，因为将为 html 启用突出显示，并且我们知道 php 美化了 html 但 html 不会美化 php。以同样的方式，如果您执行`set filetype=php.css.html`所有三种文件类型的片段，则将导入所有三种文件类型，但 vim 将根据 PHP 突出显示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T07:23:29.080

您没有告诉我们您正在使用的片段插件。对于原始的*snipMate*插件，创建一个`~/.vim/ftplugin/php_snipMate.vim`包含以下内容的文件：

```
silent call ExtractSnipsFile(g:snippets_dir . 'html.snippets', &l:filetype) 
```

由于脚本名称和位置，它将自动为所有 PHP 文件提供源，并在所有现有 PHP 片段之外导入 html 片段。

# asp.net-mvc-3 - 是否可以使用特定的 url 地址作为 MVC3 的返回视图？

> ID：12471403
> 
> 赞同：0
> 
> 时间：2012-09-18T06:21:36.127
> 
> 标签：asp.net-mvc-3

是否可以在 Controller Method 的 return View 中添加特定链接？

例如：

公共动作结果测试（）{

返回视图（“http://www.facebook.com”）

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T06:23:01.840

当然，如果您想将其作为纯字符串返回，您可以使用`ContentResult`：

```
public ActionResult test() {
    return Content("http://www.facebook.com");
} 
```

或者，如果您想重定向到给定的 url，请使用`RedirectResult`：

```
public ActionResult test() {
    return Redirect("http://www.facebook.com");
} 
```

# java - java应用程序中的Microsoft翻译API类路径错误

> ID：12471407
> 
> 赞同：0
> 
> 时间：2012-09-18T06:21:51.553
> 
> 标签：java, classpath, noclassdeffounderror

我正在尝试在我的 java（windows 窗体）应用程序中制作 Microsoft 翻译 API。我在 Windows azure Marketplace 中注册并注册了我的 Microsoft Translate 应用程序，所以我有这些 ClientId 和 Client Secret 密钥，但它仍然不起作用。我找不到我做错了什么。

这是我的代码：

```
import com.memetix.mst.language.Language;
import com.memetix.mst.translate.Translate

public class Main {
public static void main(String[] args) {
    try{
        Translate.setClientId(/* my Client Id */);
        Translate.setClientSecret(/* my Client Secret */);

        String translatedText = Translate.execute("Bonjour le monde", Language.FRENCH, Language.ENGLISH);

        System.out.println(translatedText);
    }
    catch(Exception e) {
        System.err.println("Exception: " + e.getMessage());
    }
} 
```

}

这是我得到的错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: com/memetix/mst/translate/Translate
    at Main.main(Main.java:9)
Caused by: java.lang.ClassNotFoundException: com.memetix.mst.translate.Translate
at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
... 1 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T06:30:49.893

您应该在[Linux/Solaris 的类路径](http://docs.oracle.com/javase/7/docs/technotes/tools/solaris/classpath.html)上拥有 Microsoft 的翻译库。

如果这是一个独立程序，您可以尝试以下命令：

`java -classpath "%classpath%;.;<path_to_the_translation_library.jar>" Main`

这`<path_to_the_translation_library.jar>`应该与您用于编译此类的库或 JAR 相同`Main`。

# powershell - powershell 脚本 - 创建 zip 文件，不包括某些文件和文件夹

> ID：12471408
> 
> 赞同：2
> 
> 时间：2012-09-18T06:21:59.897
> 
> 标签：powershell, 7zip

我正在尝试创建powershell脚本函数来压缩一个文件夹，不包括一些文件夹和文件这里是我的代码，它创建包括所有文件和文件夹的zip文件

```
# Zip creator method

function create-zip([String] $aDirectory, [String] $aZipfile){
    [string]$pathToZipExe = "C:\Program Files\7-zip\7z.exe";
    [Array]$arguments = "a", "-tzip", "$aZipfile", "$aDirectory";
    & $pathToZipExe $arguments;
} 
```

但我想排除 *.tmp 文件以及 bin 和 obj 文件夹

我发现`Get-ChildItem "C:\path\to\folder to zip" -Recurse -Exclude *.txt, *.pdf | %{7za.exe a -mx3 "C:\path\to\newZip.zip" $_.FullName}`作为 powershell 命令可以正常工作，但是如何在脚本文件的功能中使用它

请建议...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T02:12:59.277

如果该单行代码有效，那么将其放入函数中非常简单：

```
function Create-Zip([string]$directory, [string]$zipFile, [string[]]$exclude=@())
{
    $pathToZipExe = "C:\Program Files\7-zip\7z.exe"
    Get-ChildItem $directory -Recurse -Exclude $exclude | 
        Foreach {& $pathToZipExe a -mx3 $zipFile $_.FullName}
} 
```

如果您需要排除目录，请将 Get-ChildItem 行更改为：

```
 Get-ChildItem $directory -Recurse -Exclude $exclude | Where {!$_.PSIsContainer} | 
```

# python - 惰性对象返回了意外的类型。对管理页面进行身份验证时出错

> ID：12471409
> 
> 赞同：2
> 
> 时间：2012-09-18T06:22:03.083
> 
> 标签：python, django, django-admin

我正在尝试使用[All-Auth](https://github.com/pennersr/django-allauth)进行社交身份验证。

将其所需设置加载到我的应用程序 settings.py 后，我必须进入管理页面才能输入社交令牌。

我一登录管理页面。它给了我这个错误：

```
Environment:

    Request Method: GET
    Request URL: http://127.0.0.1:8000/admin/

    Django Version: 1.5
    Python Version: 2.7.1
    Installed Applications:
    ('django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.admin',
    'main',
    'allauth',
    'allauth.account',
    'allauth.socialaccount')
    Installed Middleware:
    ('django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware')

    Traceback:
    File "/Library/Python/2.7/site-packages/django/core/handlers/base.py" in get_response

    response = callback(request, *callbackargs, **callback_kwargs) File "/Library/Python/2.7/site-packages/django/contrib/admin/sites.py" in wrapper
    return self.admin_view(view, cacheable)(*args, **kwargs) File "/Library/Python/2.7/site-packages/django/utils/decorators.py" in _wrapped_view
    response = view_func(request, *args, **kwargs) File "/Library/Python/2.7/site-packages/django/views/decorators/cache.py" in _wrapped_view_func
    response = view_func(request, *args, **kwargs) File "/Library/Python/2.7/site-packages/django/contrib/admin/sites.py" in inner
    return view(request, *args, **kwargs) File "/Library/Python/2.7/site-packages/django/views/decorators/cache.py" in _wrapped_view_func
    response = view_func(request, *args, **kwargs) File "/Library/Python/2.7/site-packages/django/contrib/admin/sites.py" in index
    app['models'].sort(key=lambda x: x['name']) File "/Library/Python/2.7/site-packages/django/utils/functional.py" in lt
    other = other.cast() File "/Library/Python/2.7/site-packages/django/utils/functional.py" in __cast
    return self.text_cast() File "/Library/Python/2.7/site-packages/django/utils/functional.py" in __text_cast
    return func(*self.args, **self.kw) File "/Library/Python/2.7/site-packages/django/utils/text.py" in
    capfirst = lambda x: x and forcetext(x)[0].upper() + force_text(x)[1:] File "/Library/Python/2.7/site-packages/django/utils/functional.py" in __wrapper
    raise TypeError("Lazy object returned unexpected type.")
    Exception Type: TypeError at /admin/
    Exception Value: Lazy object returned unexpected type 
```

我应该怎么做才能解决这个问题以及为什么会出现异常？任何帮助或想法将不胜感激。亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:33:13.023

那里的函数强制文本到什么... unicode？... 在一种情况下是 forcetext(x) ，在第二种情况下是 force_text(x) 。在一种情况下，它可能会返回错误消息，因为方法不存在......

艾伦

# c - 附加到 C 数组时出现总线错误

> ID：12471411
> 
> 赞同：0
> 
> 时间：2012-09-18T06:22:08.993
> 
> 标签：c, arrays, string, concatenation

我在尝试手动连接没有库函数的两个字符串（学校作业）时遇到了总线错误。代码如下：

```
#include <stdio.h>

char *strcattest(char string1[ ], char string2[ ]);

int main() {
    printf("*****STRING CONCATENATION*****\n");
    printf("Hello plus Hello: %s\n", strcattest("Hello","Hello"));
    printf("Hello plus Hellp: %s\n", strcattest("Hello","Hellp"));
    printf("Helo plus Hello: %s\n", strcattest("Helo","Hello"));
    printf("Hello plus Helo: %s\n", strcattest("Hello","Helo"));

    return(0);
}

char *strcattest(char string1[ ], char string2[ ]) {
    int counter = 0;
    while(string1[counter]!='\0') {
        counter++;
    }
    int str2counter = 0;
    while(string2[str2counter]!='\0') {
        string1[counter] = string2[str2counter];
        str2counter++;
        counter++;
    }
    string1[counter]='\0';
    return string1;
} 
```

我做了一些研究，我想我从概念上理解为什么这不起作用。（我打电话试图修改一个基于静态字符串的变量——string1。）但是，我不知道如何纠正它，以便它自己运行。我尝试在 strcattest 函数中引入一个局部变量，它的行为类似于 string1 的副本，但这让编译器对我大喊大叫，因为我从函数中返回了一个局部变量。

任何帮助深表感谢。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T06:25:43.283

您尝试将一个字符串文字连接到*另一个*字符串文字。除了太短之外，这些字符串文字是*只读*的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T06:27:37.300

**问题：**

```
printf("Hello plus Hello: %s\n", strcattest("Hello","Hello")); 
```

这里的字符串`"Hello"`是字符串文字，并放置在实现定义的（只读）内存中。你不能修改它们。修改它们会导致**未定义的行为**。因此，您不能简单地将字符串文字附加到另一个字符串文字，因为它们不是可修改的。

**解决方案：**

如果您想获得一个带有两个字符串文字的字符串，那么您需要执行以下操作：

1.  在函数中有一个指向动态内存分配（malloc）缓冲区的指针。
2.  在此缓冲区中附加字符串文字，您可以修改其内容，因为内存归您所有。
3.  返回指向此动态分配内存的指针。
4.  不要忘记释放（释放）返回的指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T06:31:48.393

您是正确的，因为您正在尝试修改静态（只读）字符串；这样做是 C 标准术语“未定义的行为”（在您的情况下表现为崩溃）。

要解决此问题，您需要分配一个可以修改的字符数组。您可以静态（在堆栈上）或动态（使用`malloc`）执行此操作。

静态地，要初始化具有特定内容的字符数组，您可以这样做

```
char mystring[1024] = "Hello!"; 
```

这将使用字符串内容初始化字符数组，复制它们（请注意，类似的外观`char *mystring = "Hello!";`不是数组初始化，而是*指向*`mystring`静态字符串）。您可以将该声明放在全局范围内（在任何函数之外，除非您有特定理由使用全局，否则不推荐），或者在您的`main`方法中（然后您可以将其传递给`strcattest`）。

动态地，声明看起来像

```
char *mystring = malloc(1024); 
```

获得一个足够大的未初始化缓冲区以容纳 1024 个字符（计算空终止符）。但是，如果你`malloc`有什么东西，你必须`free`稍后再做，否则你最终会出现内存泄漏。把东西放进去，做

```
strcpy(mystring, "Hello!"); 
```

请注意，`mystring = "Hello!"`在这种情况下将不起作用：为什么不呢？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T11:23:43.580

您传递给函数的“Hello”参数实际上位于程序的 .data 部分。您无权修改此部分。任何这样做的尝试都会给您带来错误（在您的情况下是总线错误）。

您只能操作位于堆栈（局部变量和数组）或堆（使用 [mc]alloc() 函数分配的内存）中的那部分内存。

# firefox - CloudBees 上 Firefox 的 Selenium 测试

> ID：12471414
> 
> 赞同：1
> 
> 时间：2012-09-18T06:22:15.157
> 
> 标签：firefox, selenium, cloudbees

我在 cloudbees 上运行 Selenium。在运行期间，我收到以下错误：

`Failed to connect to binary FirefoxBinary(/usr/bin/firefox) on port 7055; process output follows: Error: no display specified Error: no display specified Build info: version: '2.25.0', revision: '17482', time: System info: os.name: 'Linux', os.arch: 'i386', os.version: '2.6.34.7-66.fc13.i686.PAE', java.version: '1.7.0_04' Driver info: driver.version: FirefoxDriver`

我错过了什么吗？我怀疑我需要为 Display 设置一些东西，因为错误说`no display specified`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T09:18:29.920

You can use xvnc (or xfvb) to run a headless virtual graphical environment and start browser (firefox and google-chrome are available on CloudBees build slaves). See [http://wiki.cloudbees.com/bin/view/DEV/Testing+GUI+applications](http://wiki.cloudbees.com/bin/view/DEV/Testing+GUI+applications)

Another option is to subscribe to SauceLabs service and user on-demand browsers.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T07:16:21.800

FirefoxDriver 需要一个窗口来执行测试。您的测试运行的 linux 机器似乎没有配置 windows。

看看这些链接：

*   [链接1](http://www.alittlemadness.com/2008/03/05/running-selenium-headless/)
*   [链接2](http://www.seleniumtests.com/2012/04/headless-tests-with-firefox-webdriver.html)

# groovy - 使用 groovy 脚本清除所有属性值

> ID：12471415
> 
> 赞同：-1
> 
> 时间：2012-09-18T06:22:15.517
> 
> 标签：groovy, soapui

任何人都可以帮助我使用 groovy 代码来清除在 datasink 步骤中创建的属性的所有属性值。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T14:13:25.543

这似乎对我有用：

```
def datasink = testCase.testSteps["DataSink"]

String[] props = new String[datasink.getPropertyCount()]
props = datasink.getPropertyNames();

for (int i=0;i<props.size();i++)
{
    datasink.setPropertyValue(props[i],"")
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-27T09:20:59.047

尝试以下操作：

```
datasink = tcontext.testCase.getTestStepByName("DataSink");
datasink.clearPropertyValues(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-08-17T08:55:11.267

我只粘贴在这里，什么对我有用。

```
def datasink = testRunner.testCase.getTestStepByName("DataSink");
//log.info datasink.getName()
datasink.clearPropertyValues(); 
```

# cocoa-touch - 更改 Cocoa 单元测试的系统日期

> ID：12471418
> 
> 赞同：10
> 
> 时间：2012-09-18T06:22:25.110
> 
> 标签：cocoa-touch, cocoa, unit-testing, nsdate

我正在测试一个调用`-[NSDate date]`，并使用系统时间作为参考来做一些逻辑的方法。我需要在一年中的某些特定日子测试逻辑是否正确，但我不能等到那一天。那么我可以在单元测试时以编程方式更改系统日期吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-09T19:38:48.537

您需要使用[Mock 对象](http://en.wikipedia.org/wiki/Mock_object)，在 Objective C 中，您可以通过仅覆盖您需要的方法来轻松地使用类别。例如，您可以使用以下类别：

```
// ------------- File: NSDate+NSDateMock.h
@interface NSDate (NSDateMock)

 +(void)setMockDate:(NSString *)mockDate;
 +(NSDate *) mockCurrentDate;

@end

// -------------- File: NSDate+NSDateMock.m

#import "NSDate+NSDateMock.h"

@implementation NSDate (NSDateMock)

static NSDate *_mockDate;

+(NSDate *)mockCurrentDate
{
    return _mockDate;
}

+(void)setMockDate:(NSString *)mockDate
{
    _mockDate = [NSDate dateWithString:mockDate];
}

@end 
```

此外，您还需要[SwizzleClassMethod](https://stackoverflow.com/a/3267898/438025)

```
void SwizzleClassMethod(Class c, SEL orig, SEL new) {

    Method origMethod = class_getClassMethod(c, orig);
    Method newMethod = class_getClassMethod(c, new);

    c = object_getClass((id)c);

    if(class_addMethod(c, orig, method_getImplementation(newMethod), method_getTypeEncoding(newMethod)))
        class_replaceMethod(c, new, method_getImplementation(origMethod), method_getTypeEncoding(origMethod));
    else
        method_exchangeImplementations(origMethod, newMethod);
} 
```

然后在您的单元测试中，您将能够像这样使用它

```
SwizzleClassMethod([NSDate class], @selector(date), @selector(mockCurrentDate));
[NSDate setMockDate:@"2007-03-24 10:45:32 +0200"];
NSLog(@"Date is: %@", [NSDate date]); 
```

# ruby-on-rails-3 - 验证响应的内容：是控制器测试还是集成测试？

> ID：12471419
> 
> 赞同：1
> 
> 时间：2012-09-18T06:22:38.183
> 
> 标签：ruby-on-rails-3, unit-testing, rspec, integration-testing

假设我有一个命名小部件的列表。在我的测试代码的某个地方，我想验证

```
widget = FactoryGirl.create(:widget)
get :index 
```

生成一个页面，其中某处包含字符串#{widget.name}。

我的问题：我是把它写成控制器测试还是集成测试？

*（除了＃1：这似乎超出了控制器测试的范围，因为它假设知道呈现什么视图。但是将其编写为集成测试感觉太重了，因为它只需要一个请求/响应事务。）*

*（除了＃2，我的一般问题是“你如何决定控制器测试中的内容以及集成测试中的内容？”但这对于堆栈溢出问题来说可能过于宽泛。）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T08:27:26.363

*有时我认为 Stack Overflow 应该授予 RTFM 徽章，我应该是第一个获得它的人！*

进一步挖掘，我发现 RSpec 支持专门用于测试渲染内容的“查看规范”——这正是我最初的问题所在。

测试在 spec/views/ 中编写。 [可以在此处找到文档和示例](https://www.relishapp.com/rspec/rspec-rails/v/2-0/docs/view-specs/view-spec)，但请务必查看您当前版本的 RSpec 的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T07:21:05.507

我认为这些不同类别的测试没有任何普遍认可的定义，但我个人将其称为“请求规范”，一种集成测试，但仅涉及单个请求/响应周期。它显然不仅仅是一个控制器测试，因为它涉及 MVC 架构的所有元素。另一方面，您不会四处点击然后找到按钮，单击它们等，所以这不是我通常认为的“集成测试”。

区分我所说的“请求规范”和您通常所说的“集成测试”的一种简单方法是使用[`get`](http://api.rubyonrails.org/classes/ActionDispatch/Integration/RequestHelpers.html#method-i-get)（来自 ActionDispatch）与[`visit`](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Session#visit-instance_method)（来自 capybara）。如果您只使用`get`（`post`等），那么它是一个请求规范。如果您正在使用，`visit`那么它是一个集成测试。

有关 和 之间区别的更多信息`get`，`visit`请参阅这篇文章：[http](http://blog.plataformatec.com.br/2012/06/improving-the-integration-between-capybara-and-rspec/) ://blog.plataformatec.com.br/2012/06/improving-the-integration-between-capybara-and-rspec/在那篇文章中有一个建议完全摆脱规范/请求，并将其替换为规范/API（我称之为“请求规范”）和规范/功能（我称之为“集成测试”）。

无论如何请注意，我上面写的只是我个人看待这种区别的方式，其他人可能不同意。

# php - 将消息从 php 加密到 .net

> ID：12471420
> 
> 赞同：0
> 
> 时间：2012-09-18T06:22:48.713
> 
> 标签：php, .net, encryption, httprequest

我需要从 php 服务器向 .NET 服务器发送请求。
这个请求必须被cypted，所以我想到了

*   序列化参数
*   打字
*   Base64 编码以将其作为 HTTP 请求

在这里我将如何在 php 中做

```
$url = 'http://my.server.net';
$params = array('var1' => 5, 'var2' => 'machin', 'var3' => 'chose');
$serialized = json_encode($params);
$crypted = encrypt($serialized, $salt);
$request = $url.'?'.base64_encode($crypted); 
```

`encrypt()`将使用调味加密序列化的参数。

问题是

1.  我应该使用哪些函数来加密我的消息，以便使用 .net 轻松解密？
2.  json 是 .net 的一个很好的序列化选择吗？

*我对.net一无所知，这将由其他人完成*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T06:31:14.323

# 对于问题一

*   **PHP 方面**我认为你可以使用 php [http://php.net/manual/fr/book.openssl.php](http://php.net/manual/fr/book.openssl.php)的 openssl 扩展。它为你带来了一个强大的 API 来做你想做的事。

*   **.NET 方面**您可以查看[http://msdn.microsoft.com/en-us/library/system.net.security.sslstream.aspx](http://msdn.microsoft.com/en-us/library/system.net.security.sslstream.aspx)或[http://www.dart.com/sockets-net-api -库.aspx](http://www.dart.com/sockets-net-api-library.aspx)

# 对于问题 2：

json 是一个很好的序列化工具，但由于它是无类型的，所以有点有损。所以这里有两个解决方案：

*   您知道 .net 应用程序将与您共享相同的类体系结构，因此使用起来`serialize()`很好。

*   您不知道，或者您知道它将以其他方式开发，因此 json_encode 是最好的方法。我只想指出这样一个事实，如果您将其 5 作为 GET，如果您选择 POST 请求，您将被限制为 255 个字符而不是无限。此外，如果您希望它们可读，您必须对您的 json 数据进行 urlencode

要发送 POST 请求而不是 GET，您可以查看此脚本： [http ://www.jonasjohn.de/snippets/php/post-request.htm](http://www.jonasjohn.de/snippets/php/post-request.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T06:30:09.130

你的问题就是答案。

您可以使用`JSON`,`XML`将数据从 发送`PHP`到`.NET`。`json`正在发送比 更快的响应`XML`。

Yes`JSON`是序列化的好选择。

[http://msdn.microsoft.com/en-us/library/bb410770.aspx](http://msdn.microsoft.com/en-us/library/bb410770.aspx)

# javascript - javascript - 检查 CSSRule 是否与 Element 匹配

> ID：12471421
> 
> 赞同：1
> 
> 时间：2012-09-18T06:22:52.333
> 
> 标签：javascript, css, dom

有没有办法检查一个 CSS 选择器（获得`document.styleSheets[666].rules[1984].selectorText`）是否匹配一个特定的元素？

我要求一个跨浏览器的纯 javascript 解决方案，但如果只是在其中完成，我会考虑使用 jQuery。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T06:31:51.393

对于现代浏览器，有[`matchesSelector`](https://developer.mozilla.org/en-US/docs/DOM/Element.mozMatchesSelector). 对于不太现代的浏览器，您可以使用[`querySelectorAll`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)和[遍历 DOM](https://gist.github.com/2851541)。

**不要**使用 jQuery。[嘶嘶声](http://sizzlejs.com/)就足够了。

```
Sizzle.matchesSelector(element, selector) 
```

[https://github.com/jquery/sizzle/wiki/Sizzle-Documentation](https://github.com/jquery/sizzle/wiki/Sizzle-Documentation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T06:34:36.397

**搜索特定的 CSS 规则**

**下面的示例在样式表中搜索“a:hover”规则，如果找到，则返回对它的引用：**

```
var mysheet=document.styleSheets[0]
var myrules=mysheet.cssRules? mysheet.cssRules: mysheet.rules
for (i=0; i<myrules.length; i++){
if(myrules[i].selectorText.toLowerCase()=="a:hover"){ //find "a:hover" rule
targetrule=myrules[i]
break;
}
} 
```

参考：[http ://www.javascriptkit.com/dhtmltutors/externalcss3.shtml](http://www.javascriptkit.com/dhtmltutors/externalcss3.shtml)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-18T06:30:01.643

在 jQuery 中非常简单：

```
$(element).is(cssSelector); 
```

# javascript - 手机网站，点击谷歌地图打开原生谷歌地图应用

> ID：12471424
> 
> 赞同：-1
> 
> 时间：2012-09-18T06:23:16.200
> 
> 标签：javascript, android, iphone, google-maps

我需要制作一个谷歌地图，点击或按下后，打开移动设备上的本机应用程序以显示地图，传递图钉的纬度 lng。

我环顾四周，认为以前一定有人这样做过。我需要这个才能为 iPhone 和 Android 工作。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T06:47:48.263

您可能想检查以下链接：

**- 对于 iOS：**

*   [在 Xcode 中打开原生谷歌地图](https://stackoverflow.com/questions/8282369/opening-native-google-maps-in-xcode)

**- 对于安卓：**

*   [Android - 通过网页 url 启动谷歌地图](https://stackoverflow.com/questions/4642481/android-launch-google-map-via-web-url)

希望这可以帮助。

# html - 缩放网页时更改对齐方式

> ID：12471425
> 
> 赞同：1
> 
> 时间：2012-09-18T06:23:27.730
> 
> 标签：html, webpage

这是我的 HTML 文件

```
<html>
<head>

<style type="text/css">
body
{
background-image: url(Images/android_background.png);
background-repeat: no-repeat;
}
</style>
</head>
<body>

<div class="wrapper">

<div id='cssmenu' style="position:relative;   top:100px; ">
<ul>
<li class='active '><a href='#'><span>Home</span></a></li>
<li><a href='#’&gt;<span>Android</span></a>
</li>
<li><a href='#'><span>About</span></a></li>
<li><a href='#'><span>Contact</span></a></li>
<li><a href='#'><span>extra</span></a></li>
</ul>
</div>

<center>

<table  border="1" style="position:relative; top:200px; "> 
<tr><td> Under Construction </td> </tr> 
<tr><td> Under Construction </td> </tr>  
<tr><td> Under Construction </td> </tr>   
<tr><td> Under Construction </td> </tr>
<tr><td> Under Construction </td> </tr>  
<tr><td> Under Construction </td> </tr>  
<tr><td> Under Construction </td> </tr>  
<tr><td> Under Construction </td> </tr>
</table>

</center>

<div class="push"></div>

</div>

<div class="footer" style=" position:relative; top:300px;" >
<img src="android/Images/home_background.png" />
</div>

</body>
</html> 
```

输出 ：![在此处输入图像描述](../Images/5dfd35af97dde96e4749a3ebf65e0555.png)

缩小此网页时，背景和页脚图像的对齐方式已更改。缩小后的输出为：![在此处输入图像描述](../Images/176e57062457ad295b4ee0b00b85f986.png)

我对网页设计很陌生。我不知道为什么会这样？你能给出一些解决方案吗？

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T06:25:57.180

你可以试试 boostrap 响应式负载。它会让你的生活更轻松。

您面临的问题是由于硬编码的像素值。您应该尝试以百分比表示的相对值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T06:34:26.740

由于您使用的是背景图像，因此您无能为力。这是一个很容易复制 w/css3 的效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T07:20:52.560

我被添加`min-width:100%;`了 img 标签的样式。它正在工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T22:18:28.027

您正在缩小页面，但您的背景图像并非无穷无尽，这就是您可以看到左侧空白区域的原因。您可以调整 CSS 以水平重复背景：

```
body {
  background-image: url(Images/android_background.png);
  background-repeat: repeat-x;
} 
```

您还可以通过将图像文件裁剪为仅 1 px 宽来减小图像文件的大小。您的背景在视觉上将是相同的，但网站的加载速度会更快。

# uiviewcontroller - UIPageViewController 使用 Storyboard 和 Xcode 4.5

> ID：12471429
> 
> 赞同：1
> 
> 时间：2012-09-18T06:23:57.167
> 
> 标签：uiviewcontroller, storyboard, uipageviewcontroller, xcode4.5

我想问一些关于 Xcode 4.5 的问题。我正在使用情节提要创建应用程序。这个应用程序有`UIPageViewController`。但是如果我想`UIViewController`在故事板的 IB 中定义标识符，就没有地方了。

你能告诉我，我在哪里可以简单地定义（使用 IB）视图控制器的标识符？

![在此处输入图像描述](../Images/77e25a0eef95210ba81430a4e1df3c77.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T18:59:16.047

似乎在 XCode 4.5 中，属性检查器下方的标识符已移至身份检查器下方的故事板 ID。

# ruby-on-rails - 从“mysite.herokuapp.com”重定向到“www.mysite.com”

> ID：12471433
> 
> 赞同：1
> 
> 时间：2012-09-18T06:24:20.357
> 
> 标签：ruby-on-rails, ruby, heroku, http-redirect

> **可能重复：**
> [如何将 Heroku 应用程序 DNS 配置到 Godaddy 域？](https://stackoverflow.com/questions/7170664/how-to-configure-heroku-application-dns-to-godaddy-domain)

我从 GoDaddy 购买了一个域名，说它是 www.mysite.com，我在 Heroku mysite.herokuapp.com 上托管我的应用程序。当我点击 mysite.herokuapp.com 时，它应该重定向到 www.mysite.com，我的网站从代码或类似内容重定向到各个页面（例如 myapp.herokuapp.com/users），但是（mysite.herokuapp.com 应该无法访问)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:22:46.463

您应该在 Rails 应用程序中执行此操作。

创建一个检查`HTTP_HOST`变量的 Rack 中间件。如果值不匹配`www.mysite.com`，则发送重定向状态代码并将用户重定向到正确的路径。

这里有几个例子，你可以从中开始了解

*   [如何使用 Rails 3 / Rack 在没有 www 的情况下重定向？](https://stackoverflow.com/questions/4046960/how-to-redirect-without-www-using-rails-3-rack)
*   [https://github.com/stjhimy/rack-www](https://github.com/stjhimy/rack-www)

# ios - 为 iPhone 和 iPad 制作通用游戏（常规和 Retina）

> ID：12471440
> 
> 赞同：0
> 
> 时间：2012-09-18T06:24:53.593
> 
> 标签：ios, cocos2d-iphone, ios-universal-app

我正在`Cocos2d`引擎上制作游戏，我必须制作通用游戏。我正在遵循的做法如下所述。我有一组 2 个图像，一个是非高清图像，另一个是下面提到的 -HD。

例子：

> image1.png -> 我只在 Iphone 上使用它

和

> image1-hd.png -> 我将它用于 Iphone-Retina、Ipad + Ipad-Retina

这就是我所关注的，这是一项耗时的任务。我可以做任何其他好的和简单的自动程序还是我必须坚持上面的程序？

单独为 Iphone 提供 1 个“Image.png”，为 Iphone-Retina、Ipad + Ipad-Retina 提供 1 个“Image-HD.png”（这会在 Ipad Retina 和 Ipad 上产生不好的结果）

这是一个好习惯吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T22:44:05.120

是的。这是一个很好的做法，也是我推荐的唯一做法。在您的情况下，我肯定会考虑添加 -ipadhd 资源，否则您的游戏将看起来像 Retina iPad 上的常规 iPad 游戏。

对于这个过程，我推荐[TexturePacker](http://www.codeandweb.com/texturepacker)。它具有 Auto-SD 功能，可自动从高分辨率图像重新调整标准分辨率图像。它会自动从 atlas-hd.png 和 ipad 版本创建相应的 atlas.png。

# php - 查找在 php 中选中的单选按钮

> ID：12471441
> 
> 赞同：0
> 
> 时间：2012-09-18T06:25:09.333
> 
> 标签：php, html

我想确定选中了哪个单选按钮...这就是我填充单选按钮列表的方式：

```
$sql="SELECT * from intrebari where cod_chestionar='".$_SESSION['cod']."' ";
$result=mysql_query($sql);

echo "<br><br>";
echo "<table border='1'>";

while($row=mysql_fetch_array($result))

{ 
echo "<tr>";
echo "<td>";
 echo "<input type='radio' name='intrebare' value=''>";
 echo $row[denumire_intrebare];
 echo "<br>";
 echo "</td>";
 echo "</tr>";

 }

echo "</table>"; 
```

现在假设这给我带来了 4 个元素的列表。如何找出选中了哪些单选按钮。如果是第一个或第二个或......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T06:33:12.230

首先，您需要为单选按钮分配某种唯一值：

```
 ... 
   while( $row = mysql_fetch_array($result) )
    { 
        echo "<tr><td>";
        echo "<input type='radio' name='intrebare' value='" . $row["someColumnName"] . "'/>";
        echo $row[denumire_intrebare];
        echo "<br/></td></tr>";
    }
    ... 
```

然后，当 POST 完成后，您可以通过以下方式检索该值：

```
 if( isset($_POST["intrebare"]) ) {
        switch ($_POST["intrebare"]) {
            case "value1":
                 // do something
                 break;
            case "value2":
                 // do something else
                 break;
            case "value3:
                 // do something
                 break;
        }
    } 
```

使用 来检查值是否存在很重要`isset()`，因为不必检查单选按钮

# iphone - 在 iPad 上运行时，非通用 iPhone 应用程序构建会自动加载 iPad 笔尖

> ID：12471442
> 
> 赞同：0
> 
> 时间：2012-09-18T06:25:12.083
> 
> 标签：iphone, ios, ipad, xib, nib

我的应用程序最初是一款仅限 iPad 的应用程序。现在我将其转换为适合 iPhone 的较小版本。我使用的是相同的代码库，并且许多控制器实际上不需要进行太多更改 - 只是需要重新制作视图以适应较小的屏幕。这不是一个通用应用程序，因为 iPad 和 iPhone 版本之间的某些功能不同，并且 App Store 中的价格点也非常不同。

我添加了单独的目标，设备系列设置为 iPhone。原始目标将此设置为 iPad。

我重新制作了一堆笔尖，文件名遵循格式`view~iphone.xib`，当我在 iPhone 上运行 iPhone 构建时，这些笔尖被正确加载，而不是原始的 iPad 笔尖（文件名采用格式`view.xib`）。

问题是当我在 iPad 上运行**iPhone**版本时。正如您对 iPhone 应用程序所期望的那样，它在那个小的 iPhone 窗口中运行（可以加倍到 2 倍）。但加载的笔尖是**iPad**笔尖，显然不适合 iPhone 大小的显示器或调整其大小。我不明白为什么 iOS 不会自动加载 iPhone 版本。如果我测试`UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad`，它返回 false，所以它知道它在 iPhone 模式下运行！

鉴于我无法阻止客户在 iPad 上运行 iPhone 应用程序，我想让它正常工作。我尝试了一些事情，但它们似乎不正确：

*   将代码更改为`[[MyViewController alloc] initWithNibName:@"MyView~iphone" bundle:nil];`将加载正确的笔尖，但这意味着我必须在指定笔尖名称的所有位置周围放置条件代码 - 这是一个很大的应用程序，所以有很多，这可能容易出错将来当我或其他开发人员忘记在新代码中执行此操作时。
*   重命名所有`~iphone`笔尖以具有与 iPad 版本相同的文件名（即`view.xib`），将它们移动到单独的目录中（这样它们不会与原件的名称冲突）并将它们重新添加回项目中，但仅包括在内在 iPhone 目标（而不是 iPad 目标）中，并从 iPhone 目标（但仍包含在 iPad 目标中）取消勾选原始 iPad 笔尖将导致在运行时加载正确的笔尖（因为“错误”笔尖没有每个构建的捆绑包中更长的时间），无论命名如何。请注意，如果我将文件名保留为`view~iphone.xib`，那么当 iPhone 构建在 iPad 上运行时，尝试加载该笔尖时会出现异常：`Could not load NIB in bundle`. 相同的文件名使这种方法非常不愉快，乍一看并不明显发生了什么。
*   在 iPad 上运行 iPhone 版本时，将原始 xib 重命名为`view~ipad.xib`（将 iPhone 笔尖命名为`view~iphone.xib`）仍会导致加载 iPad 笔尖。

一定有比这两种方法更好的方法吗？当设备清楚地知道它正在运行 iPhone 应用程序时，为什么会加载错误的 (iPad) 笔尖？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T06:35:52.700

您应该`MyView~iPad`从 iPhone 目标中删除（单击 nib 文件，然后在右侧面板中的`Target Membership`部分下取消选中该文件。

同时取消选中 iPhone nibs for iPad target。这将排除笔尖，因此它们不会被复制到`app`包中。您可以对资源使用相同的方法来减小应用程序大小。

# php - 如何以递归格式显示 xml 数据以显示数据中的真实子/父关系

> ID：12471445
> 
> 赞同：0
> 
> 时间：2012-09-18T06:25:21.377
> 
> 标签：php, xml, recursion, multidimensional-array, treeview

我正在尝试以树格式显示 XML 源的数据，以显示正确的父 -> 子关系。

问题是子节点本身可以​​有多个子节点（没有限制）

在 Flash 中工作的输出示例 = [http://fluffyduck.com.au/example-layout.jpg](http://fluffyduck.com.au/example-layout.jpg)

但是，我无法在 PHP / html 中复制它。我在这里提供了一个示例 XML 源：http: [//www.fluffyduck.com.au/sampleXML.txt](http://www.fluffyduck.com.au/sampleXML.txt)

在其他人的帮助下，父 ID 及其孩子的列表如下：

```
<?php

$content = file_get_contents('http://www.fluffyduck.com.au/sampleXML.txt');
$xml = new SimpleXMLElement($content);

$users = array ();
myUserReader($xml->user, $users);

function myUserReader($node, &$users)
{
    if (array_key_exists("{$node['id']}", $users) === false)
    {
        $users["{$node['id']}"] = array ();
    }
    if (isset($node->user))
    {
        for ($key = 0; ($key < count($node->user)); $key++)
        {
            $user = $node->user[$key];
            if (!in_array("{$node['id']}", $users["{$node['id']}"]))
            {
                $users["{$node['id']}"][] = "{$user['id']}";
#                $users["{$node['id']}"][] = $user;
            }
            myUserReader($user, $users);
        }
    }
}

foreach ($users as $parent => $children)
{
    echo "{$parent}: " . implode(", ", $children) . "\n";
}
?> 
```

我无法计算出我需要什么代码来解析上述结果并根据上面的附图显示信息。

我曾考虑将 XML 转换为数组，但仍然遇到同样的问题，我尝试过的代码是：

```
function xmlstr_to_array($xmlstr) {
  $doc = new DOMDocument();
  $doc->loadXML($xmlstr);
  return domnode_to_array($doc->documentElement);
}
function domnode_to_array($node) {
  $output = array();
  switch ($node->nodeType) {
   case XML_CDATA_SECTION_NODE:
   case XML_TEXT_NODE:
    $output = trim($node->textContent);
   break;
   case XML_ELEMENT_NODE:
    for ($i=0, $m=$node->childNodes->length; $i<$m; $i++) {
     $child = $node->childNodes->item($i);
     $v = domnode_to_array($child);
     if(isset($child->tagName)) {
       $t = $child->tagName;
       if(!isset($output[$t])) {
        $output[$t] = array();
       }
       $output[$t][] = $v;
     }
     elseif($v) {
      $output = (string) $v;
     }
    }
    if(is_array($output)) {
     if($node->attributes->length) {
      $a = array();
      foreach($node->attributes as $attrName => $attrNode) {
       $a[$attrName] = (string) $attrNode->value;
      }
      $output['@attributes'] = $a;
     }
     foreach ($output as $t => $v) {
      if(is_array($v) && count($v)==1 && $t!='@attributes') {
       $output[$t] = $v[0];
      }
     }
    }
   break;
  }
  return $output;
}

$moo = xmlstr_to_array($content);
print_r($moo); 
```

但是存在同样的问题，我不知道如何循环并以正确的 Parent -> Child 方式递归显示信息。

由于数据的构造方式，我也无法弄清楚如何检索“单个”条目，如果我能做到，也许我可以手动重建树，我不确定每条记录如何没有唯一标识符。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T06:55:35.000

在这种情况下可能会更好地避免使用 DOM 或 SimpleXML，而是使用 XSLT，因为它是为处理递归而设计的。创建一个样式表，如下所示：

```
$xslt=new SimpleXMLElement('<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

   <xsl:template match="*">
       <ul>
            <li><xsl:value-of select="local-name()"/>
             <xsl:apply-templates/>
            </li>
       </ul>
    </xsl:template>
</xsl:stylesheet>'); 
```

然后使用 PHP 的内置 XSL 库对其进行转换（请注意，某些机器可能已编译 PHP 以使其没有内置，但很可能是这样）：

```
$content = file_get_contents('http://www.fluffyduck.com.au/sampleXML.txt'); 
$xml = new SimpleXMLElement($content); 
$xsl_processor = new XSLTProcessor(); 
$xsl_processor->importStylesheet($xslt); 
echo $xsl_processor->transformToXml($xml); 
```

这只是一个简单的例子，但它应该生成一个长的、无序列的所有父母和他们的孩子的列表，正确嵌套。修改“value-of”指令以提取您可能宁愿显示的属性等。

# android - 旋转我的安卓手机时是否可以只旋转屏幕中的一些视图？

> ID：12471450
> 
> 赞同：1
> 
> 时间：2012-09-18T06:25:53.160
> 
> 标签：android, rotation, orientation

当 时`screenOrientation="portrait"`，它看起来像：

![在此处输入图像描述](../Images/80c4c72adb167040fd6b4f44131491c5.png)

当 时`screenOrientation="landscape"`，它看起来像：

![在此处输入图像描述](../Images/b33318a7945b7c065927d95f2d979cac.png)

你可以看到只有中心视图被旋转了，其他的没有改变。

在android中是否有可能，如果可以，如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T06:28:16.760

请参阅：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

关于方向的部分

例如：

```
res/layout-xlarge-land/my_layout.xml // layout for extra large in landscape orientation

res/layout-xlarge-port/my_layout.xml // layout for extra large in portrait orientation 
```

或者在代码中。自己填写更改布局的代码。

活动：

```
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);

    if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
    } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT){
    }
  } 
```

显现：

```
<activity android:name=".MyActivity"
          android:configChanges="orientation"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:13:11.380

Since your requirement is to view the image in correct orientation in different layouts, I would suggest you rotate the image rather than providing alternative resources which means you have to make everything rotated (i mean the text inside the button, has to be rotated. The same goes for the other components).

You can detect the orientation changes and just rotate the imageview alone which would save you a bit of work.

You can take control of the orientation changes by specifying it in the manifest of the activity as follows.

```
 <activity android:name=".MyActivity"
      android:configChanges="orientation|screenSize"/> 
```

you can then override the onConfigurationChanged(Configuration newConfig) method as suggested by klaasvaak and just rotate the image. You can follow the [link](http://xjaphx.wordpress.com/2011/06/22/image-processing-rotate-image-on-the-fly/) to see how to rotate images.

# java - Mysql导出错误

> ID：12471455
> 
> 赞同：1
> 
> 时间：2012-09-18T06:26:26.650
> 
> 标签：java, mysql, eclipse, export

这是我尝试导出数据库的代码。

```
 //MysqlPath = "C:\Program Files\MySQL\MySQL Server 5.1\bin\"
    String executeCmd = "\"" +Mysqlpath+ " mysqldump -u " + dbUser
                + " -p" + dbPass + " " + dbName + " -r " + FilePath + "\\"
                + FileName;

    System.out.println(executeCmd);
    Process runtimeProcess = Runtime.getRuntime().exec(executeCmd); 
```

我收到以下错误：

```
***Cannot run program """C:\Program": CreateProcess error=87, The parameter is incorrect*** 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T06:37:23.890

我希望这可以帮助你，从java代码运行转储命令

```
 Runtime.getRuntime().exec("mysqldump -u username -p password  databasename > /../.. datadump.sql"); 
```

如果错了请纠正我

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T07:44:31.467

试试这个 ：

```
File fMysqlPath = new File("C:\\Program Files\\MySQL\\MySQL Server 5.1\\bin\\");
String executeCmd = "mysqldump -u " + dbUser
            + " -p" + dbPass + " " + dbName + " -r " + FilePath + "\\"
            + FileName;

System.out.println(executeCmd);
Process runtimeProcess = Runtime.getRuntime().exec(executeCmd, null, fMysqlPath); 
```

**Java 1.4.2**

# c - 关于如何在 C 结构中表示缓冲区

> ID：12471458
> 
> 赞同：1
> 
> 时间：2012-09-18T06:26:53.077
> 
> 标签：c, struct

我最近看到以下类似结构可以包含有关缓冲区的信息。我知道“ `buffer`”字段可能指向缓冲区的起始地址，所以我们可以使用`memcpy(pDst, pEntry->buffer, bufferLen)`将缓冲区复制到另一个地方（`pDst`），但是我们如何分配`Entry`呢？

```
struct Entry
{
    // data fields.
    size_t bufferLen;
    unsigned char buffer[1];
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T06:41:55.407

这是在 C99 中转换为“灵活数组成员”的旧的 C99 之前的“struct hack”示例。假设您要存储一个字符串。您可以使用以下方法动态分配空间：

```
struct Entry *make_entry(const char *str)
{
    size_t  len = strlen(str) + 1;
    struct Entry *e = malloc(sizeof(struct Entry) + len);
    if (e != 0)
    {
        e->bufferLen = len;
        strcpy(e->buffer, str);
    }
    return e;
} 
```

在 C99 中，您将编写相同的代码；但是，结构的声明会有所不同，因为您没有指定数组的大小：

```
struct Entry
{
    size_t bufferLen;
    unsigned char buffer[];
}; 
```

这将使用更少的空间，尤其是在`sizeof(size_t) == 8`.

此类结构（灵活的数组成员样式和 struct hack 样式）存在重大限制，其中之一是您不能简单地分配结构。您必须留出额外的空间并使用`memmove()`or复制它`memcpy()`。

```
struct Entry *dup_entry(const struct Entry *e)
{
    struct Entry *r = malloc(sizeof(struct Entry) + e->bufferLen);
    if (r != 0)
        memmove(r, e, sizeof(struct Entry) + e->bufferLen);
    return r;
} 
```

您也不能创建此类结构的数组（但您可以创建指向此类结构的指针数组）。

* * *

> 我认为在您的`make_entry()`函数中，我们可以少分配一块内存，因为`Entry->buffer`已经存储了一个字符。

有趣的评论——而且是轻描淡写。曾经有另一个答案（现已删除），它收集了一些有趣和中肯的评论，我将加入这个答案。

[迈克尔·伯尔](https://stackoverflow.com/users/12711/michael-burr)指出：

> `memcpy(pDst, pEntry, offsetof(struct Entry, buffer[pEntry->bufferLen]))`将是一个更安全的习惯用法 - 如果在结构末尾的数组破解之前碰巧有多个条目，您不必手动考虑所有这些条目，它可以让编译器处理之前的任何填充自动破解数组。同样，实例的分配可以是：`pEntry = malloc(offsetof(struct Entry, buffer[desiredVarArrayElements]))`

这是一个有趣的观察，并且与您的建议非常一致。这种使用`offsetof()`会导致结果不是编译时常量；结果取决于运行时用作下标的值。这是非正统的，但我看不出有什么问题。用作下标的大小在计数中包含空字节至关重要。

它还导致了一个有趣的观察结果，即如果将这种技术用于短字符串，则最终为结构分配的字节数可能会比`sizeof(struct Entry)`本来的少。这是因为整个结构在大多数 32 位机器上是 4 字节对齐的，而在大多数机器上是 8 字节对齐的`sizeof(size_t) == 8`（通常是 64 位 Unix 系统，但不是 64 位 Windows）。

因此，如果要分配的字符串只有 3 个字节（2 个字符和 1 个空终止符字节），则指定的大小`malloc()`将是 7 或 11（分别在 32 位或 64 位机器上），与结构大小相比8 或 16。

因此，我为“struct hack”结构编写的代码（如问题所示）采用了（安全）快捷方式，并过度分配了所需的总内存，可能是 4 个字节或 8 个字节。有可能减少这种过度分配。请注意，内存分配器本身通常分配向上取整的大小——通常（但不一定）在 32 位系统上为 8 字节的倍数，在 64 位系统上为 16 字节。这意味着分配更少字节的尝试可能没有您期望的那么多好处（尽管有时它会带来一些好处）。

请注意，C99 灵活数组成员根本不会浪费任何空间；结构的大小根本不包括灵活的数组成员。这比 struct hack 更容易使用；您不必担心以同样的方式浪费空间。

[史蒂夫杰索普](https://stackoverflow.com/users/13005/steve-jessop)指出：

> 如果您要使此类结构可复制，那么无论如何您应该在结构中具有容量和大小字段。然后编写一个函数来复制它们，它检查容量、复制大小（但不是容量）并复制数据。如果你分别做这三件事，那么你不必担心布局。而且由于有很多事情要做，结构的用户不应该尝试自己复制它，他们应该使用函数。

当然，这正是我定义的原因`dup_entry()`；确实有必要防止人们在复制时出丑。和函数必须实现为彼此一致，但这并不难`make_entry()`。`dup_entry()`

# php - 如何在 Yii 中更改 403 异常消息

> ID：12471461
> 
> 赞同：1
> 
> 时间：2012-09-18T06:27:16.853
> 
> 标签：php, iphone, yii

我正在使用 iphone 和 Yii 框架（PHP 服务器端）开发一个应用程序，我已经实现了基于滚动的访问控制 (RBAC)，当用户通过 iphone 登录并执行他未经授权的删除操作时，Yii 会抛出 403 异常错误，我的问题是我们如何更改此默认消息，并且有什么方法可以为这种异常错误设置 JSON 数组。

请帮忙。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T06:37:39.867

`onException`每次处理异常时，WebApplication 都会生成事件。您可以处理此事件。我已经使用必须附加到 Yii 应用程序的行为来完成它。`onException`处理程序接收 CExceptionEvent 参数，其中包含 CExceptionEvent::$exception 属性。研究 CExceptionEvent 类参考。

在`onException`处理程序中，您可以将所需的任何格式的任何数据发送给客户端。

# c# - 查找二维矩阵中的相邻元素

> ID：12471463
> 
> 赞同：5
> 
> 时间：2012-09-18T06:27:30.427
> 
> 标签：c#, algorithm, matrix

我有一个 m *n 阶的二维矩阵

```
00 01 02 03 ....0n
10 11 12 13 ....1n
20 21 22 23 ....2n
..
m0 m1 m2  m3 ...mn 
```

由此，给定一个元素，我需要编写一个返回其相邻元素的方法。相邻元素水平、垂直或对角相邻。

例如01的相邻元素是00,02,10,11,12 00的相邻元素是01 ,10,11 11的相邻元素是00,01,02,10,12,20,21,22

有人可以帮我用一种乐观的算法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-18T08:28:39.000

```
public static IEnumerable<T> AdjacentElements<T>(T[,] arr, int row, int column)
{
    int rows = arr.GetLength(0);
    int columns = arr.GetLength(1);

    for (int j = row - 1; j <= row + 1; j++)
        for (int i = column - 1; i <= column + 1; i++)
            if (i >= 0 && j >= 0 && i < columns && j < rows && !(j == row && i == column))
                yield return arr[j, i];
}

...

var arr = new[,] { {1, 2, 3, 4}, {5, 6, 7, 8}, {9, 10, 11, 12} };

var results = AdjacentElements(arr, 1, 3);

foreach(var result in results) 
    Console.WriteLine(result) 
```

This yields the answer: 3 4 7 11 12 (the elements adjacent to the 8).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T09:34:17.227

二维数组中的元素（be a[n][m]）似乎在水平和垂直方向上增加。所以对于给定的问题，我们需要首先找到元素的索引。因此，如果我们能以更快的方式找到元素，那么我们就可以优化解决方案。问题是我们如何以有效的方式找到它。一种方法是取矩阵的中间元素并用它检查给定元素

> 如果给定元素小于中间元素，那么我们的解决方案在于矩阵 a[0][0] 到 a[n/2][m/2] 因为右边和下面的所有元素都大于中间（因为给定元素小于比中间元素），所以我们将搜索空间从 a[n][m] 减少到 a[n/2][m/2]，这是原始大小的四分之一。
> 
> 如果给定元素大于中间元素，那么我们的解决方案不在于矩阵 a[0][0] 到 a[n/2][m/2] 因为左边和上面的所有元素都小于中间（因为给定元素是大于中间元素），所以我们的搜索空间是总数组减去 a[0][0] 到 a[n/2][m/2]，它是原始大小的四分之三。 **总数组减去 a[0][0] 到 a[n/2][m/2]**意味着，将有三个带有数组索引的递归调用

```
 --------->a[0][m/2](start index) to a[n/2][m](end index)  
    --------->a[n/2][0](start index) to a[n][m/2](end index)
    --------->a[n/2][m/2](start index) to a[n][m](end index) 
```

现在根据我们的搜索空间递归调用相同的函数。

我们函数的时间复杂度如下。 **注意：**在时间函数中，n 表示元素的总数，而不是提到的行数。**n** =(no_of_rows)*(no_of_columns)

```
 _________________T(n/4)  if given element is less than middle of the array.
               / 
              /
T(n)==========------------------- 1 if n=1 (if element found)
              \
               \_________________3T(n/4) if given element is greater than middle element of array 
```

所以超时功能将

T(n)=3T(n/4) 或 T(n)=T(n/4)

```
In worst case T(n)=3T(n/4)
               T(n)=3{3T(n/4)}
               T(n)=3power(i)T(n/(4)poweri)     equation------> (1) 
```

但是 T(1)=1 （猜测给定的元素是在数组中找到的）

```
so  n/(4power(i))=1
====> n=2power(2*i)
====> n=2power(2*i) 
```

双方对话日志到base 2 `(log[n])/2=i` ====> i=log(sqrt(n))

代入方程 1 我们得到 T(n)=3power(log[sqrt(n)])

所以在使用索引找到元素后，我们可以找到它的邻居。让我们说在 a[i][j] 找到的元素然后打印

```
 {
a[i-1][j-1],
a[i-1][j],
a[i-1][j+1],
a[i][j-1],
a[i][j+1],
a[i+1][j-1],
a[i+1][j],
a[i+1][j+1]
} 
```

假如

```
 0<i<n and 0<j<n . 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T07:00:00.853

假设你有 的矩阵`string [n,m]`，你可以通过展平矩阵得到结果，示例代码如下：

```
var array = matrix.Cast<string>()
                       .ToList();

var index = array.IndexOf(input);

var indexList = new List<int>() {
    index - n - 1, 
    index - n, 
    index - n + 1,
    index - 1, 
    index + 1, 
    index + n - 1, 
    index + n , 
    index + n + 1};

var result = array.Where((item, i) => indexList.Contains(i)); 
```

# javascript - HTML5 拖放 -- 哪些事件可用 setDragImage()？

> ID：12471465
> 
> 赞同：1
> 
> 时间：2012-09-18T06:27:38.663
> 
> 标签：javascript, html, drag-and-drop

我目前正在编写 HTML5 拖放代码。在某个区域上，我希望将其拖动图像设置为垃圾图标，并且当鼠标悬停在可拖动区域上时以具有非特定图像。我有事件和逻辑为此工作，但似乎 setDragImage() 函数可能仅在 dragstart 函数上可用。这真的是您可以分配 setDragImage() 的唯一事件吗？我已经查看了规范，它似乎并没有说任何一种方式。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T05:10:16.097

这是 Firefox 代码库中的相关部分，它显示 DataTransfer 对象（保存拖动图像）在拖动启动后设置为只读。

[https://mxr.mozilla.org/mozilla-central/source/content/events/src/nsEventStateManager.cpp#2141](https://mxr.mozilla.org/mozilla-central/source/content/events/src/nsEventStateManager.cpp#2141)

```
2138       // now that the dataTransfer has been updated in the dragstart and
2139       // draggesture events, make it read only so that the data doesn't
2140       // change during the drag.
2141       dataTransfer->SetReadOnly(); 
```

这是 setDragImage 方法，它表明它在允许设置图像之前检查只读。

[https://mxr.mozilla.org/mozilla-central/source/content/events/src/nsDOMDataTransfer.cpp#581](https://mxr.mozilla.org/mozilla-central/source/content/events/src/nsDOMDataTransfer.cpp#581)

```
580 NS_IMETHODIMP
581 nsDOMDataTransfer::SetDragImage(nsIDOMElement* aImage, int32_t aX, int32_t aY)
582 {
583   if (mReadOnly)
584     return NS_ERROR_DOM_NO_MODIFICATION_ALLOWED_ERR;
585 
586   if (aImage) {
587     nsCOMPtr<nsIContent> content = do_QueryInterface(aImage);
588     NS_ENSURE_TRUE(content, NS_ERROR_INVALID_ARG);
589   }
590   mDragImage = aImage;
591   mDragImageX = aX;
592   mDragImageY = aY;
593   return NS_OK;
594 } 
```

从上面的代码可以看出，拖动图像只能在 Gecko 中的 dragstart 事件中更新。

# reporting-services - 如何使用 TeamCity 自动部署/构建 SSAS 和 SSRS 解决方案

> ID：12471469
> 
> 赞同：4
> 
> 时间：2012-09-18T06:28:14.840
> 
> 标签：reporting-services, msbuild, continuous-integration, teamcity, ssas

我们正在使用 MS SS*S 进行一些 BI 项目，并且我们还有 asp.net Web UI 作为 SSRS 报告的容器，该报告从 OLAP 多维数据集读取数据 使用 TeamCity 作为 asp.net 的 CI 工具非常简单网站，我们正在为 SS*S 寻找类似的方法，我们做了一些练习来使用脚本来构建和部署 SSAS，但它需要将 BIDS 安装到 teamcity 服务器，那么 MSbuild 是否支持 SS*S 构建和部署？是否有任何用于 SS*S 构建和部署的 TeamCity 嵌入式工具？有什么最佳实践吗？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T09:19:34.077

Teamcity buildagents 旨在在其上安装所需的工具。如果您需要 BIDS 来构建您的项目 - 将其安装在您的 teamcity buildagent 上。如果您不想在您的 teamcity 服务器上安装它 - 只需将您的代理移动到另一台服务器。

当 TeamCity 服务器也充当自己的构建代理时，这是非常流行的做法，但这不是强制性的，您可以使用特定项目构建所需的所有工具设置另一个服务器\VM 作为构建代理。通过这种方式，您可以根据需要设置各种构建环境（尤其是在无法并排安装不同版本的构建工具时）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-31T17:20:25.000

这是我的做法，在代理上安装了 Visual Studio 2017 (SSDT)。

1.  我为 msbuild 创建了一个 xml 文件，第一个命令是构建项目，这将创建 asdatabase 文件。第二个命令是部署多维数据集。

[![在此处输入图像描述](../Images/443eb19e5381d6b6dfdc7f228915ec9d.png)](https://i.stack.imgur.com/oqOLm.png)

2.  我在 teamcity 中创建了一个构建步骤，指向之前创建的 xml [![在此处输入图像描述](../Images/522cd7bf6049640657a625fa9b1046d2.png)](https://i.stack.imgur.com/LawBf.png)

[![在此处输入图像描述](../Images/a0a417c686378a58c5170b497b7f790a.png)](https://i.stack.imgur.com/V3eyf.png)

希望这有帮助

# java - 更改 RadioGroupFieldEditor 的值

> ID：12471473
> 
> 赞同：0
> 
> 时间：2012-09-18T06:28:36.337
> 
> 标签：java, swt

> **可能重复：**
> [在 SWT 中设置/获取 RadioGroupFieldEditor 的值](https://stackoverflow.com/questions/12199127/set-get-values-for-radiogroupfieldeditor-in-swt)

我有一个 RadioGroupFieldEditor 字段和一个用于在我的应用程序中选择数据类型的浏览器，用户可以选择数据类型的单选按钮，也可以使用浏览按钮选择新的数据类型。如果用户选择一个单选按钮，然后单击浏览按钮，我想删除 RadioGroupFieldEditor 的选择。我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T10:50:02.403

`Button`您可以通过遍历 的子级来设置个人 s 的选择`RadioGroupFieldEditor`。这有点hacky，但我没有看到更简单的方法：

```
public static void main(String[] args) {
    final Display display = new Display();
    final Shell shell = new Shell(display);
    shell.setLayout(new FillLayout());

    String[][] radioButtonOptions = new String[][] { { "Button1", "button1" }, { "Button2", "button2" } };

    final RadioGroupFieldEditor radioButtonGroup = new RadioGroupFieldEditor("PrefValue", "Choose Button1 or Button2", 2, radioButtonOptions, shell, true);

    Button button = new Button(shell, SWT.PUSH);
    button.setText("Deselect");

    button.addListener(SWT.Selection, new Listener() {

        @Override
        public void handleEvent(Event arg0) {
            Composite temp = radioButtonGroup.getRadioBoxControl(shell);
            Control[] children = temp.getChildren();

            for(Control child : children)
            {
                if(child instanceof Button)
                {
                    ((Button)child).setSelection(false);
                }
            }
        }
    });

    shell.pack();
    shell.open();
    while (!shell.isDisposed()) {
        if (!display.readAndDispatch()) {
            display.sleep();
        }
    }
    display.dispose();
} 
```

# java - 为什么我们需要@PUT、@POST、@DELETE注解？我的代码没有它们也能工作

> ID：12471477
> 
> 赞同：3
> 
> 时间：2012-09-18T06:29:01.533
> 
> 标签：java, jax-rs, resteasy

我有使用`@PUT`,`@POST`注释的方法。如果没有这些注释，这些方法运行良好。那么这些注解有什么用呢？

```
@GET    
@Path ("/{stockId}")
@Produces("application/xml")
public StockDetail search(@PathParam("stockId") Integer stockId) {

    final String methodName="search";
    mLogger.debug(mClassName+"::" +methodName+"::Entered");
    StockDetail stockDetails=null;
    try {

         stockDetails = mStockBean.retrieve(stockId);
    } catch(Exception exception) {

        mLogger.error("ClassName::" +mClassName+ "MethodName::" +methodName+"Error::"+exception.getMessage());
    }
    return stockDetails;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T06:59:40.583

好吧，例如，这些注释允许您为不同的方法使用相同的路径：

```
@GET    
@Path ("/{stockId}")
@Produces("application/xml") 
```

和

```
@PUT
@Path ("/{stockId}")
@Consumes("application/xml") 
```

在这里，对于相同的路径，我们将有不同类型的请求。

UPD。根据评论，我会注意到，如果我们有方法`A()`并且我们将它`@GET`与上面声明的 Web 服务签名一起使用，那么我们在没有任何参数的情况下使用它（因为它不消耗任何请求正文）。对于第二个，我们将使用该方法`A(String body)`，因为我们使用一些实体来处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T06:35:06.197

注释提供有关程序的数据，这些数据不属于程序本身。它们对它们注释的代码的操作没有直接影响。

引用[Oracle 的 Java 教程](http://docs.oracle.com/javase/tutorial/java/javaOO/annotations.html)：

> 注释有许多用途，其中包括：
> 
> 1.  编译器信息——编译器可以使用注解来检测错误或抑制警告。
> 2.  编译器时和部署时处理——软件工具可以处理注释信息以生成代码、XML 文件等。
> 3.  运行时处理——一些注解可以在运行时检查。

注释不会影响方法的工作

# asp.net - 动态数据asp.net DropdownList中的外键关系，如何自定义？

> ID：12471478
> 
> 赞同：2
> 
> 时间：2012-09-18T06:29:01.767
> 
> 标签：asp.net, linq-to-sql, asp.net-dynamic-data

我正在努力`Asp.Net Dynamic Data project with linq to sql`。

我创建了一个数据库，该数据库`one to one relationship`在使用外键指定的两个表之间。

即我有一张桌子`Employee`和桌子`Department`

```
Employee table
empid empname address departmentId 

Department table
departmentId departmentname 
```

现在`Student`表需要`departmentId`一个`foreign key`

当我导航到它时`/Insert.aspx`，它会`department_name`在下拉列表中显示一个列表。

它这样做 - 但它显示了所有`department_name`进入下拉列表

> 我如何以及在哪里可以编写 linq 查询，以便我可以自定义那些 department_name 值

如果假设我只想`computers`在该下拉列表中填充为部门名称，我怎么能做到这一点？

代码：在 FieldTemplate 文件夹中`ForeignKey_Edit.ascx.cs`

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (DropDownList1.Items.Count == 0)
        {
            if (Mode == DataBoundControlMode.Insert || !Column.IsRequired)
            {
                DropDownList1.Items.Add(new ListItem("[Not Set]", ""));
            }
            PopulateListControl(DropDownList1);
        }

        SetUpValidator(RequiredFieldValidator1);
        SetUpValidator(DynamicValidator1);
    } 
```

数据动态正在内部填充下拉列表。

在此声明之前或之后`PopulateListControl(DropDownList1);`

我应该编码什么，以便我只能填充特定的值..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T17:31:42.607

而不是`PopulateListControl(DropDownList1);` 尝试这样的事情

```
 if (ForeignKeyColumn.ParentTable.Name == "Departments")
        {
            List<Department> departments = // code to grab the correct Departments

            foreach (Department d in departments)
            {
                DropDownList1.Items.Add(new ListItem(d.Name, d.Id.ToString()));
            }
        } 
```

# php - Drupal 7：找不到包装器“公共”

> ID：12471482
> 
> 赞同：0
> 
> 时间：2012-09-18T06:29:38.027
> 
> 标签：php, drupal-7

任何人都可以帮助我解决我遇到的这个主要问题。我已经下载了在当前服务器上运行良好的 Drupal 7 站点，但我无法在 localhost 或我试图移动它的新服务器上运行它...

它只是给了我“白屏死机”......在 boostrap.inc 中评论“set_error_handler”后，我发现这些错误都与“public://”包装器有关。

这是所有错误的样子：

> > 警告：is_dir() [function.is-dir]: Unable to find the wrapper "public" - 你是否在配置 PHP 时忘记启用它

所有这些错误都来自以下文件：

> /includes/file.inc

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-04T08:10:19.747

我通过刷新所有缓存解决了这个问题。为此使用了drush -`drush cc all`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-06T17:05:41.203

包装器在 drupal 引导的早期阶段没有加载，因此您可能需要仔细检查包装器在调用它们时是否已经实例化（在 hook_boot() 或安装/更新过程中不是这种情况）。

Raheel Hasan（他也在 do 上发布）的解决方案非常糟糕，因为它包括 hacking 核心、移除核心灵活性以及向您的根目录添加自定义文件，这使您的网站可能受到 ddos​​ 攻击，并且已经找到了其中的功能在管理面板的性能页面下。

目前，我没有看到可以在完整引导完成之前使用流包装器的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-27T15:31:56.507

我遇到了这个错误，不像 OP，但是当我尝试使用 Drush 对大量内容进行节点导出导出时，我可以从 D6 迁移到 D7 站点。在 D6 站点中，在底部的站点配置 > 节点导出设置页面中，它试图将本地文件导出到`public://`，因此我将其设置为“远程文件导出，URL”并且该错误消失了，因为我有 FTP访问并可以手动下载文件。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-18T10:20:16.897

我花了好几个小时才找到解决方案。我把它贴在这里： [drupal.org/node/158043#comment-6490390](http://drupal.org/node/158043#comment-6490390)

# vb.net - 在 Visual Basic 宏中访问 Visual Studio 2010 项目属性

> ID：12471487
> 
> 赞同：4
> 
> 时间：2012-09-18T06:30:08.723
> 
> 标签：vb.net, properties, macros, project, lint

我的公司`LINT`在`compile LINT`. 然而，我们遇到了一个问题。因为**Visual Studio 2010**解决方案文件的格式发生了变化，我们的宏不再起作用，所以我的公司让我负责更新它们。我的问题就在这里。我正在尝试访问**宏中当前选定的 VS 项目**的预处理器定义，但“项目属性”页面中使用的名称未出现在代码中。我一直在互联网上搜索，试图找到一种在我的代码中访问这些信息的方法，但是我找到的所有答案都指向了错误的方向。
我认为我应该使用的类是`DTE.Project and DTE.Configuration classes.` 关于如何访问我在代码中寻找的信息的任何想法？

编辑：我知道（感谢[http://msdn.microsoft.com/en-us/library/aa984571(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa984571(v=vs.71).aspx)）**没有通过 ProjectProperties 接口直接以编程方式访问属性**，但是这并不是不可能的。

编辑：项目和配置类的对象属性与项目属性 UI 中显示的属性不匹配。我正在搜索的属性可能存在*于*这些属性之一下，也可能存在于不同的类中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:01:18.280

在与我的上级交谈后，我们决定朝着 VS 插件的方向前进，因为 Damien_The_Unbeliever 是正确的。但是，我很快在 C# 中遇到了与 VB 中相同的问题。它是通过大量的元编程解决的。 [http://social.msdn.microsoft.com/Forums/en-US/vsx/thread/23763118-c34f-45fc-97aa-5fe5c4ad4d5c/](http://social.msdn.microsoft.com/Forums/en-US/vsx/thread/23763118-c34f-45fc-97aa-5fe5c4ad4d5c/) 这是我在两天的搜索中发现的唯一有用的链接，对于其他任何人遇到这个问题。

我希望能解释它:)

# unicode - Unicode 键盘集成 TinyMCE

> ID：12471491
> 
> 赞同：3
> 
> 时间：2012-09-18T06:30:12.137
> 
> 标签：unicode, keyboard, tinymce

我想用 tinyMCE 开发一个基于 Unicode（پشتو）的语言文本编辑器。我已经有一个可以在我的字典应用程序中完美运行的键盘

**http://thepashto.com**

现在我想将此键盘集成到 TinyMCE 中，它有一些在文本区域的 Keyup 事件上执行的 java 脚本函数，当我删除编辑器时，它可以在正常文本区域中正常工作，但在 TinyMCE 集成后停止工作。

请在这方面提供帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T07:31:57.087

您需要意识到tinymce 不等于您的textarea。在初始化时，tinymce 会隐藏 textarea 并创建一个 contenteditable iframe。您需要将您的事件绑定到此 iframe（或 iframe 主体），以便能够正确做出反应。

解决以前的 textarea 将不起作用，因为您输入的内容是在 iframe 中输入的，并且隐藏的 textarea 会不时使用实际编辑器内容进行更新。

# android-tabhost - 如何使标签小部件宽度填充android中的父级

> ID：12471493
> 
> 赞同：0
> 
> 时间：2012-09-18T06:30:13.417
> 
> 标签：android-tabhost

我在布局底部创建了一个 TabWidget。选项卡小部件中有 5 个选项卡。但是这些标签并没有占据整个宽度。xml文件如下：

```
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tabHost1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
     <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="5dp">

        <FrameLayout
           android:id="@android:id/tabcontent"
           android:layout_width="fill_parent"
           android:layout_height="wrap_content"
           android:padding="5dp"
           android:layout_weight="1"/>

        <TabWidget
           android:id="@android:id/tabs"
           android:layout_width="fill_parent"
           android:layout_height="wrap_content"
           android:layout_weight="0"
           android:layout_marginBottom="-4dp"/>

    </LinearLayout>

</TabHost> 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:28:10.387

为什么不尝试使用 RelativeLayout 而不是 LinearLayout

```
<RelativeLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="5dp"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T02:23:56.993

我相当确定从您的线性布局和框架布局中删除 android:padding="5dp" 标记应该可以满足您的需求...

所以你会看这个

```
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tabHost1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
     <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">

        <FrameLayout
           android:id="@android:id/tabcontent"
           android:layout_width="fill_parent"
           android:layout_height="wrap_content"
           android:layout_weight="1"/>

        <TabWidget
           android:id="@android:id/tabs"
           android:layout_width="fill_parent"
           android:layout_height="wrap_content"
           android:layout_weight="0"
           android:layout_marginBottom="-4dp"/>

    </LinearLayout>

</TabHost> 
```

# django - 用于选择多行并在操作之间进行选择的表格形式

> ID：12471495
> 
> 赞同：1
> 
> 时间：2012-09-18T06:30:32.407
> 
> 标签：django, select, row

我正在整理一个 Django 网站，并且处于一个常规状态。

该站点具有许多用于添加和编辑数据的表单，这非常基本，但是当涉及外键关系时，我需要更多选择。假设我有一个已售出的“产品”类，对于数据库中的所有产品，我想添加一个对象“维护”、“年费”等等。

我可以简单地制作一个带有多选字段的表单，在其中选择我想要的产品，然后选择另一个字段用于输入维护对象的参数。这可以添加，但是如果我想编辑/删除/绘制关系/生成报告和类似的东西怎么办？

我的想法是，如果产品列在可滚动、可排序、可过滤的表格中（这些东西我可以轻松处理），那就太好了。然后，此表需要让我能够选择行（即：对象。）我想要采取行动，然后为各种功能提供多个提交按钮。

提交按钮，我可以处理，但我不知道如何使表格行可选择。一些javascript，我收集？

我在某处读到，如果每一行都有一个与对象主键绑定的隐藏复选框，那么 javascript 可以处理对该行的点击并选择/取消选择隐藏的复选框并适当地为该行着色。

或者，还有 JQuery 的“可选”，但这对我来说似乎很抽象。

什么是解决这个问题的好方法？建议？示例代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T11:50:17.850

是的，这需要做很多工作，所以就到这里吧。

当我想创建一个使用 tabledata 而不是用户输入数据的表单时，我使用以下类：

```
class TableRowForm():
    '''
    This form is special, because usually, forms include a range of inputs
    to be filled out by the user. This form however, no inputs are filled in. The
    form is given a queryset of objects and a list of field names, and with those,
    a table is made. Each row in the table represents an object. clicking a row
    will select the object. Multiple submit buttons can be given with various
    functions. What these buttons have in common is that they all operate on the
    selected objects, e.g. selecting three objects and pressing delete will delete
    those three objects. The form is different in that it does not create new objects,
    it manipulates already existing objects.
    '''
    def __init__(self, queryset, fields):
        if not fields:
            raise Exception('A TableRowForm must be supplied both queryset and fields')
        self.queryset = queryset
        self.fields = fields

    def __unicode__(self):
        '''
        Builds the html table rows for the form.
        '''
        if not self.queryset: return '<tr><td>No data...<td></tr>'
        colcount = 0
        res = ""
        res += "<tr>"
        for f in self.fields:
            res += "<th>"+self.queryset[0]._meta.get_field_by_name(f)[0].verbose_name+"</th>"
        res += "</tr>\n"
        for obj in self.queryset:
            res += '<tr onclick="selectRow(this)">'
            res += '<td><input style="display:none;" type="checkbox" name="slct" id="%s" value="%s"/>'%(obj.pk,obj.pk)

            vals = [getattr(obj, x) for x in self.fields]
            colcount = len(vals)
            for x in vals:
                res += '%s</td><td>'%(str(x))
            res = res[:-4]
            res += '</tr>\n'
        res += '<tr><th colspan="%d"><span style="font-size:9pt;"><b>Selctable table:</b> Click a row to select it</span></th></tr>'%(colcount)

        # Add the javascript that implements functionality
        res += '''\
        <script>
        // Allows for selectable tablerows in forms
        function selectRow(row)
        {
            // Check/uncheck the checkbox
            var chk = row.getElementsByTagName('input')[0];
            chk.checked = !chk.checked;

            // Color the row in response to the checkbox's boolean value
            if (chk.checked) {
                row.style.backgroundColor = 'gray';
            } else {
                row.style.backgroundColor = 'white';
            }
        }
        </script>'''
        return res 
```

这样做是它需要一个数据查询集和一个要显示的所需字段的列表，然后它使用提供的数据构建表格，并为每一行隐藏一个复选框。

建立表格后，将附加一个 javascript 以帮助选择复选框并相应地为表格行着色。

创建这样的表单可能是这样的：

```
trform = TableRowForm(queryset=Item.objects.all(),
                                 fields=('serial',
                                         'prod',
                                         'discount',
                                         'price',
                                         'account',
                                         'vat',)) 
```

在模板中使用此表单时，应该这样做

```
<form action="{% url bla.bla.bla %}" method="post">
<table>
{{ form|safe }}
</table>
<input type="submit" name="testform" value="Test" />
</form> 
```

过滤器“|safe”确保 HTML 被解释而不是仅仅写为文本。

表格标签没有自动生成的原因是表格可能不是整个表格本身，所以表格只为表格生成行。

如果我们有多个提交按钮，则将“名称”属性放在表单中的提交按钮上是一种管理要执行的操作的好方法。可以想象对一张数据表执行任意数量的操作。

最后，处理表单数据，当点击提交按钮时，可以如下完成：

```
if 'testform' in request.POST:
        # These two lines fetch all the selected objects from the tablerow form
        selections = request.POST.getlist('slct')
        its = Item.objects.filter(pk__in=selections) 
```

此示例假定 table-row-form 上使用的对象类型是 Item。'slct' 是自动赋予表单中复选框的名称。可以想象，通过允许从 request.POST 的实例创建表单，让表单自动从 POST 数据中提取信息，从而使这变得更智能，但我还没有做到这一点；）

“request.POST.getlist('slct')” 基本上获取所有以 'slct' 命名的值并将它们放在一个列表中。在此之后，您可以通过查询主键轻松检索它们所代表的对象。

我希望这对我以外的人有用。我为我所取得的成就感到非常自豪:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:06:17.957

您不必创建自己的表单类 - 并将 javascript 嵌入其中。正确的方法是使用[form media](https://docs.djangoproject.com/en/dev/topics/forms/media/)，或者简单地按照以下方式进行：

```
{% for a in some_queryset %}
   <tr>
      <td><input type="checkbox" id="pk" name="pk" value={{ a.pk }} /></td>
      <td>{{ a.name }}</td>
   </tr>
{% endfor %}

# later on ...

<input 
    type="submit"
    name="action1"
    value="Do Action 1"
    id="action1_btn" class="btn btn-primary disabled" />
<input
    type="submit"
    name="action2"
    value="Do Action 2"
    id="action2_btn"
    class="btn btn-danger disabled" />

# and other buttons... 
```

最后，这段javascript：

```
<script type="text/javascript">
$('#pk').click(function() {
  if ($('input[name="pk"]:checked').length > 0)
  {
     // more than one check box is checked
     $("#action1_btn").removeClass('disabled');
     $("#action2_btn").removeClass('disabled');
     // other actions you want to do

  } else {

     // No check boxes are checked
     $("#action1_btn").addClass('disabled');
     $("#action2_btn").addClass('disabled');
  }
});
</script> 
```

*此脚本仅在选中行时启用按钮。*

最后，django 提供了完全按照您在此处复制的内容的[表单集。](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#changing-the-queryset)

# php - 使用 php 进行 XML 解析未显示某些标签数据

> ID：12471500
> 
> 赞同：1
> 
> 时间：2012-09-18T06:30:49.973
> 
> 标签：php, rss, xml-parsing, simplexml

我正在尝试从链接解析 RSS 提要。这是我的代码：

```
 $content = file_get_contents($this->feed);     
            print_r($content);   
            $rss = new SimpleXmlElement($content);
            print_r($rss);
            $rss_split = array();
           /* foreach ($rss->channel->item as $item) {
                $title = (string) $item->title; // Title
                $link = (string) $item->link; // Url Link
                $description = (string) $item->description; //Description               
                $rss_split[] = '<div><a href="' . $link . '" target="_blank" title="" >' . $title . ' </a><hr></div>';
            }*/ 
```

完整的 XML 正在从这里下载： http: [//devilsworkshop.org/feed/](http://devilsworkshop.org/feed/)

下面是一个摘录来说明结构：

```
<item>
    <title>Windows 8 Appstore resembles a ghost town</title>
    <link>http://devilsworkshop.org/windows-appstore-resembles-ghost-town/</link>
    <comments>http://devilsworkshop.org/windows-appstore-resembles-ghost-town/#comments</comments>
    <pubDate>Tue, 18 Sep 2012 05:30:22 +0000</pubDate>
    <dc:creator>Vibin</dc:creator>
    <category><![CDATA[Analysis]]></category>
    <category><![CDATA[Windows 8]]></category>

    <guid isPermaLink="false">http://devilsworkshop.org/?p=62284</guid>
    <description><![CDATA[<p>Microsoft is all set to release Windows 8 for public in the coming weeks. Apparently, the biggest change in Windows 8 seems to be the Metro UI (I know it&#8217;s no more called Metro, but let&#8217;s keep it like that [...]</p><p>--
            This Post <a href="http://devilsworkshop.org/windows-appstore-resembles-ghost-town/">Windows 8 Appstore resembles a ghost town</a> is Published on <a href="http://devilsworkshop.org">Devils Workshop</a> .
        </p><h3>Related posts:</h3><ul>
            <li><a href='http://devilsworkshop.org/googles-new-look-resembles-yahoo-search/' rel='bookmark' title='Google&#8217;s new look resembles Yahoo Search'>Google&#8217;s new look resembles Yahoo Search</a></li>
        </ul>]]></description>
    <content:encoded><![CDATA[<p>Microsoft is all set to release Windows 8 for public in the coming weeks. Apparently, the biggest change in Windows 8 seems to be the Metro UI (I know it&#8217;s no more called Metro, but let&#8217;s keep it like that for simplicity) and apps.</p>
        <ul>
        <h2>Apps are less advanced</h2>
        <p>Metro is great on tablets, but on desktop, it looks like an OS with dumbed down apps. Take Skitch for example, it is an app for taking and editing screenshots and was previously a Mac-only app but recently came to Windows 8\. Just compare these two apps and you&#8217;ll know what I meant.</p>
        <p>Here&#8217;s how Skitch looks in Windows 8:</p>
        <p><a href="http://devilsworkshop.org/files/2012/09/SkitchinWindows8.png"><img style=' display: block; margin-right: auto; margin-left: auto;'  class="aligncenter size-full wp-image-62302" title="SkitchinWindows8" src="http://devilsworkshop.org/files/2012/09/SkitchinWindows8.png" alt="" width="740" height="570" /></a></p>
        <p>And now, this is the Mac version of Skitch:</p>
        <p><a href="http://devilsworkshop.org/files/2012/09/SkitchinMac.png"><img style=' display: block; margin-right: auto; margin-left: auto;'  class="aligncenter size-full wp-image-62301" title="SkitchinMac" src="http://devilsworkshop.org/files/2012/09/SkitchinMac.png" alt="" width="671" height="575" /></a></p>
        <p>Another example can be Newsmix, an app which will let you read stuff that matters to you &#8211; in a Magazine layout. Apparently, this app is a fail for someone like me who subscribe to 50+ blogs.</p>
        <p><a href="http://devilsworkshop.org/files/2012/09/NewsmixinWindows8.png"><img style=' display: block; margin-right: auto; margin-left: auto;'  class="aligncenter size-large wp-image-62305" title="NewsMix in Windows 8" src="http://devilsworkshop.org/files/2012/09/NewsmixinWindows8-1024x640.png" alt="news-mix-windows-8" width="620" height="387" /></a><br />
            Sure, it will be great on a Windows slate, but not really on a PC/laptop.</p>
        <li><a href='http://devilsworkshop.org/how-to-enable-hibernate-option-in-windows-vistawindows-7/' rel='bookmark' title='How to enable Hibernate Option in Windows Vista/Windows 7'>How to enable Hibernate Option in Windows Vista/Windows 7</a></li>
        <li><a href='http://devilsworkshop.org/windows-store/' rel='bookmark' title='Microsoft to Introduce Windows Store with Windows 8 Platform'>Microsoft to Introduce Windows Store with Windows 8 Platform</a></li>
        </ul>]]>
    </content:encoded>          
    <wfw:commentRss>http://devilsworkshop.org/windows-appstore-resembles-ghost-town/feed/</wfw:commentRss>
    <slash:comments>0</slash:comments>
</item> 
```

当我打印`$content`时，它会显示`content:encoded`标签中的图像。但是打印`$rss`根本没有显示该标签，并且描述标签也显示了`SimpleXMLElement Object()`。

我想解析两个标签。我在哪里做错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T12:21:53.420

首先，`print_r()`对于预测 SimpleXML 对象的行为方式不是一个好的选择，因为它们不是“正常”的 PHP 对象。你可以试试[我的`simplexml_dump()`函数](http://github.com/IMSoP/simplexml_debug)，它列出了特定节点或节点列表的内容、子节点和属性。

其次，该`content:encoded`元素位于命名空间`content`中，因此您需要告诉 SimpleXML 访问该命名空间中的节点，而不是使用默认的[`->children()`方法](http://php.net/manual/en/simplexmlelement.children.php)。例如`echo $item->children('content', true)->encoded;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T07:28:11.987

当然打印`$rss`并没有显示数据..它显示了它的含义，因为它本身确实是一个`SimpleXMLElement Object`.

但是，据我所知，您的 xml 文档无法解析，因为它无效`UTF-8`。把它复制给我的客户，并梳理它，我发现了一堆`xA0`和`x92`字符。

在用相应的字符（空格和撇号）替换它们并保存文档后，它解析得很好。

这肯定是你的问题。

此问题的解决方案如下：

```
$char_arr = array('/\xa0/','/\x92/','/\x96/');
$rep_arr = array('&nbsp;','\'','-');
$content = preg_replace($char_arr, $rep_arr, $content); 
```

确保将此代码放在声明您的 simpleXML 对象之前：

```
$content = file_get_contents($this->feed);     
print_r($content);
$char_arr = array('/\xa0/','/\x92/','/\x96/');
$rep_arr = array('&nbsp;','\'','-');
$content = preg_replace($char_arr, $rep_arr, $content);
$rss = new SimpleXmlElement($content); 
```

那应该可以解决您的问题；我自己测试过，它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T14:16:41.257

感谢 IMSoP 的回答，我直接访问了[http://php.net/simplexml](http://php.net/simplexml)，在那里找到并使用了 xaviered_at gmail_dot_com 的 xmlObjToArr($obj) 函数来解决同样的问题。

对于那些仍在寻找一种在 content:encoded 之间标记内容的简单方法的人来说，这是一个简短而明显的脚本

```
<?php

echo "<pre>";

$url = "http://devilsworkshop.org/feed/";
$rss = simplexml_load_file($url);

if($rss){

    $items = $rss->channel->item;

    foreach($items as $item){

        $title = $item->title;
        $image = $item->image;
        $link = $item->link;
        $published_on = $item->pubDate;
        $description = $item->description;

        // bringing in to array <content:encoded> items from SimpleXMLElement Object()
        $content = xmlObjToArr($item->children('content', true)->encoded);

        echo "

        title: $title
        image: $image
        link: $link
        published on: $published_on
        description: $description
        content: 
        ";

        print_r($content);

    }
}

function xmlObjToArr($obj) {
        $namespace = $obj->getDocNamespaces(true);
        $namespace[NULL] = NULL;

        $children = array();
        $attributes = array();
        $name = strtolower((string)$obj->getName());

        $text = trim((string)$obj);
        if( strlen($text) <= 0 ) {
            $text = NULL;
        }

        // get info for all namespaces
        if(is_object($obj)) {
            foreach( $namespace as $ns=>$nsUrl ) {
                // atributes
                $objAttributes = $obj->attributes($ns, true);
                foreach( $objAttributes as $attributeName => $attributeValue ) {
                    $attribName = strtolower(trim((string)$attributeName));
                    $attribVal = trim((string)$attributeValue);
                    if (!empty($ns)) {
                        $attribName = $ns . ':' . $attribName;
                    }
                    $attributes[$attribName] = $attribVal;
                }

                // children
                $objChildren = $obj->children($ns, true);
                foreach( $objChildren as $childName=>$child ) {
                    $childName = strtolower((string)$childName);
                    if( !empty($ns) ) {
                        $childName = $ns.':'.$childName;
                    }
                    $children[$childName][] = xmlObjToArr($child);
                }
            }
        }

        return array(
            'name'=>$name,
            'text'=>$text,
            'attributes'=>$attributes,
            'children'=>$children
        );
    }

?> 
```

# javascript - 以相等的时间间隔更改类名（悬停时）

> ID：12471504
> 
> 赞同：-1
> 
> 时间：2012-09-18T06:30:58.647
> 
> 标签：javascript, html

当用户悬停它时，我想在 div 元素上显示一些动画效果。有人可以为此提供我的代码片段吗？

```
<div id="myDiv" class="c1"></div> 
```

js.code

```
$('#myDiv').hover(function(){
    //after each 400ms
    //when mouse over #myDiv class should increment from c1 > c2 > c3 > c4 >c5
    //acutally its from cn > cn+1
}, function(){
    //after each 400ms
    //when mouse out #myDiv class should decrement from c5 > c4 > c3> c2 > c1
    //actuall its from cn > cn-1
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T06:37:01.683

试试这个代码：

```
 <script type="text/javascript">
$(document).ready(function(){
$('#myDiv').hover(function(){
    //after each 400ms
    //when mouse over #myDiv class should increment from c1 > c2 > c3 > c4 >c5
    //acutally its from cn > cn+1
    $(function() {
        var $target = $('#myDiv');
          var classes = ['c1','c2', 'c3', 'c4', 'c5'];
          var current = 0;

          setInterval(function() {
              if (current==4){
                clearInterval();
              }
              else{
                $target.removeClass(classes[current]);
                current = (current+1)%classes.length;
                $target.addClass(classes[current]);
                }
              }, 400); // 1500 ms loop

    });

}, function(){
    $(function() {
        var $target = $('#myDiv');
          var classes = ['c5', 'c4', 'c3', 'c2', 'c1'];
          var current = 0;

          setInterval(function() {
              if (current==4){
                clearInterval();
              }
              else{
                $target.removeClass(classes[current]);
                current = (current+1)%classes.length;
                $target.addClass(classes[current]);
                }
              }, 400); // 1500 ms loop
    });
});

});
</script> 
```

**这是 jfiddle：http:** [//jsfiddle.net/xDSaX/](http://jsfiddle.net/xDSaX/)

你现在只需要设置你想要的类..

# c# - 使用 AsyncFileUpload 时如何在客户端重命名服务器端文件名

> ID：12471506
> 
> 赞同：1
> 
> 时间：2012-09-18T06:31:22.330
> 
> 标签：c#, javascript, asp.net

服务器端代码

```
protected void UploadComplete(object sender, AjaxControlToolkit.AsyncFileUploadEventArgs e)
{
    rlativepath =GeneratePrefixFileName() + AsyncFileUpload1.PostedFile.FileName;
    databasepath = "~/Image/" + rlativepath;
    filePath = Request.PhysicalApplicationPath + "image\\"+rlativepath;
    AsyncFileUpload1.SaveAs(filePath);
} 
```

客户端代码

```
<script type="text/javascript">

function upLoadStarted() {
    $get("imgDisplay").style.display = "none";
}
function showConfirmation(sender, args) {
    var txt = document.getElementById('<%=statusoutput.ClientID %>');
    var img = document.getElementById('<%=statusoutput.ClientID %>');
    txt.value = "Upload Successful";

    var imgDisplay = $get("imgDisplay");
    imgDisplay.src = "ajaxupload.jpg";
    imgDisplay.style.cssText = "height:100px;width:100px";
    var img = new Image();
    img.onload = function () {
        imgDisplay.style.cssText = "height:100px;width:100px";
        imgDisplay.src = img.src;
    };
    <%# UploadFolderPath1+=rlativepath %>
    img.src = "<%=ResolveUrl(UploadFolderPath1) %>"+ args.get_fileName();
    alert(img.src);
    var imagedescrip = $get("imagedescrip");
    imagedescrip.style.cssText = "visibility:visible;";
    } 
```

页面：

```
<asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
        content of page
    FNever increase, beyond what is necessary, the number of entities required to explain anything." William of Ockham (1285-1349)
    <asp:AsyncFileUpload ID="AsyncFileUpload1" runat="server" OnUploadedComplete="UploadComplete" ThrobberID="imgLoader" OnClientUploadStarted="upLoadStarted" UploaderStyle="Modern" OnClientUploadComplete="showConfirmation"
     Width="400px" CompleteBackColor="White" UploadingBackColor="#CCFFFF"></asp:AsyncFileUpload>
    <input type="text" id="statusoutput" runat="server" readonly="readonly" tabindex="-1000" style="border:0px;background-color:transparent;" /> 
    <asp:Image ID="imgLoader" runat="server" ImageUrl="ajaxupload.jpg" Height="100px" Width="100px" />

    <img id = "imgDisplay" alt="" src="" style = "display:none;height:100px;width:100px"/> 
```

我正在使用 AsyncFileUpload 上传文件，在将文件保存在服务器上之前，我重命名了所选文件。如何在客户端获取这个新文件名？现在我的问题是我没有在客户端使用 args.get_filename() 重命名文件名。如何获得它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T07:24:08.443

将 HiddenField 控件添加到窗体中：

```
<asp:HiddenField runat="server" ID="UploadedPathHiddenField" /> 
```

改写`UploadComplete`方法如下：

```
protected void UploadComplete(object sender, AsyncFileUploadEventArgs e)
{
    var fileName = GeneratePrefixFileName() +  System.IO.Path.GetFileName(e.FileName);
    var relativePath = "~/Image/" + fileName;
    var filePath = Server.MapPath(relativePath);
    AsyncFileUpload1.SaveAs(filePath);
    ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "filePath", "top.$get(\"" + UploadedPathHiddenField.ClientID + "\").value = '" + ResolveClientUrl(relativePath) + "';", true);
} 
```

之后，您可以通过以下方式在 showConfirmation 方法中获取保存图像的路径：

```
var src = $get("<%= UploadedPathHiddenField.ClientID %>").value; 
```

# objective-c - 如何在 mac os x 上本地化 MenuBar

> ID：12471508
> 
> 赞同：3
> 
> 时间：2012-09-18T06:31:34.663
> 
> 标签：objective-c, macos, localization, menubar

我正在开发适用于 Mac OS X 的应用程序。现在我希望界面上显示的每个单词、标题或字符串都进行本地化。

目前，我已经完成了大部分工作，但是我对 MainMenu.xib 中的 MenuBar 感到困惑。

我有什么方法可以翻译 MenuBar 项目的标题目录吗？还是我必须为每个项目制作 IBOutlet 并将它们的标题设置为 NSLocalizedString？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T09:05:39.167

您绝对应该查看有关本地化的文档。不过，重要的是，随着 Xcode 4 的发展，Apple 改变了一些步骤。现在很多教程都有一些不正确的步骤。我将把我的评论限制在笔尖的本地化，因为这是问题的本质。

**在项目/信息选项卡中添加新的本地化**

![添加本地化](../Images/9284eff68faf8500ac487aeed38848af.png)

只需单击 (+)，它将显示本地化语言的弹出菜单。选一个。

**选择要本地化的资源**

![选择资源](../Images/d8fe7cd8200989424d793a120558976d.png)

**本地化笔尖** 现在，在 Project Navigator 中，我选择本地化的 MainMenu.xib 具有法语本地化：

![现在 xib 下的多个本地化](../Images/ba001e24e1d4e48e1704cf0ba83fa240.png)

请注意，您的所有 IBOutlets 和操作都将被保留。现在您可以简单地处理显示文本、格式、UI 元素的大小等，以对应于所选的 xib。

![笔尖的本地化](../Images/e68abf0c03040fe61eae770b31df8768.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-04T10:18:14.437

我可能来晚了，但是因为我自己需要它，所以我创建[了一个 Ruby gem](https://rubygems.org/gems/cocoalocalize)，一旦您添加了必要的本地化，您就可以使用它来自动翻译 MainMenu.xib 中的（几乎所有“常见”）项目。

**您所要做的就是安装 gem：**

```
sudo gem install cocoalocalize 
```

**并通过终端运行它：**

```
cocoalocalize your_project_folder your_app_name 
```

*`your_project_folder`是包含您的 .lproj 文件夹（例如 es.lproj、fr.lproj）的文件夹。

该工具将负责将不同的`MainMenu.strings`文件翻译成所有可用的语言。

享受！:)

# java - 如何让 JTree 节点在被选中时自动展开？

> ID：12471513
> 
> 赞同：-2
> 
> 时间：2012-09-18T06:31:48.363
> 
> 标签：java, swing, jtree

基本上我希望树节点的选择事件表现得像展开事件。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T07:10:37.720

[`JTree#setExpandsSelectedPaths`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTree.html#setExpandsSelectedPaths%28boolean%29)是你要找的

# php - Heroku 在 GD 中不支持 jpg

> ID：12471516
> 
> 赞同：1
> 
> 时间：2012-09-18T06:31:53.267
> 
> 标签：php, git, facebook-graph-api, heroku, git-bash

我最近才知道 jpg 在 heroku 的 gd 中不起作用。我正在开发使用 jpg 格式的个人资料图片的 facebook 应用程序。我如何在没有 gd 的情况下处理这些 jpg 图像。我正在使用 Windows git bash 实用程序。我想要任何一个的答案..

1）如何在不使用 php gd 的情况下将 jpg 图像转换为 Png？（所以我可以使用 php gd 处理这个 png 图像）。

2）我如何设置一个环境来处理带有php gd的jpg图像或使用git在heroku中的任何其他图像？（我可能需要详细的一步一步的教程，因为我只有关于git bash的基本知识。请提及在哪里下载资源)

3）在graph api中有什么东西可以改变返回图像的扩展名，比如graph.facebook.com/user/picture?ext=png之类的？

谢谢你的支持

# rest - 用于高度可扩展的 REST Web 服务实施的技术堆栈

> ID：12471519
> 
> 赞同：0
> 
> 时间：2012-09-18T06:32:25.093
> 
> 标签：rest, scalability

我们需要提出一个基于 REST 的 Web 服务实现，该实现从需要高度可扩展的数据存储中返回 JSON。主要的设计要求是高可扩展性，因为该服务将在预定义的轮询间隔内受到数十万个客户端应用程序 (C++) 的影响。

我们被要求为 Web 服务和数据库提出技术栈。

最初，我们为 REST API 考虑了 ASP.NET MVC 3，为数据库考虑了 SQL Server 2008。但是客户问我们这是否足够可扩展。

由于我们是 Microsoft 团队，因此我们更倾向于 MS 技术，但我们希望不偏不倚，并提出一些最适合这种情况的方案。如果其他一些技术堆栈更适合处理负载和规模，那么我们希望将其展示给客户，而不是试图为自己打包项目。

我们只是不确定如何进行比较，因为实现 REST 的框架和可用技术太多了。我们还试图弄清楚基于 NoSQL 的解决方案是否有助于扩展性，因为没有真正的理由使用关系数据模型，因为数据库只会用作数据存储。

是否有任何机构对选择最适合处理上述要求的技术有任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T20:11:45.380

任何成熟的 Web 技术（.net、java、php 等）都可用于创建可扩展的 REST api。如果您的应用程序是数据密集型的，那么我会继续说，除了 Web 技术之外，更重要的是数据存储。

要决定数据存储，您应该首先检查应用程序是读取密集型还是写入密集型。如果它是读取密集型的，带有缓存解决方案（EhCache、Memcache 等）的 RDBMS 应该可以很好地为您服务。

如果它的写入密集，您可能需要某种写入分片 - 您可能最好使用 NoSQL 解决方案，如 Cassandra/MongoDB 等。

还要考虑许可成本。对于 SQL Server，大多数可伸缩性功能（分区等）都是企业功能。对于 MSSQL 2012，许可证是按逻辑内核而不是按物理处理器的。如果这是一个问题，您可能会认真考虑 MySQL 而不是 MSSQL。

# .htaccess - htaccess 重写 codeigniter

> ID：12471520
> 
> 赞同：0
> 
> 时间：2012-09-18T06:32:35.497
> 
> 标签：.htaccess, codeigniter, mod-rewrite, rewrite

我想重写codeigniter url rewrite的代码。

我使用了以下代码。

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /test/index.php?/$1 [L]
RewriteRue ^list/shows/cid-([0-9]+).html /list/shows?cid=$1 
```

注意：“test”是我的网站目录。

它适用于 index.php 删除。但它不适用于 url 重写

我想制作[http://example.com/test/list/shows?cid=1](http://example.com/test/list/shows?cid=1)

变得

[http://example.com/test/list/shows/cid-1.html](http://example.com/test/list/shows/cid-1.html)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T07:52:21.030

为什么不使用框架内置的[路由功能呢？](https://ellislab.com/codeigniter/user-guide/general/routing.html "路由.php")

您可以轻松地将这样的内容添加到`application/config/routes.php`：

```
$route['list/shows/cid-([0-9]+)'] = '/list/shows/$1'; 
```

（*我省略了该`.html`部分，因为如果您将其设置为 URL 后缀，则不会考虑*该部分）

**编辑：根据OP的第一条评论更新（在答案中移动了我的评论）**：

现在，所有请求都被这个指令捕获：

```
RewriteRule ^(.*)$ /test/index.php?/$1 [L] 
```

按照 diEcho 的建议，尝试在指令之后立即移动您的自定义规则`RewriteEngine On`，更正您的`RewriteRule`拼写错误并添加到您的规则中。`[L]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T06:49:44.263

尝试

```
RewriteEngine on
RewriteBase /test
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /test/index.php/$1 [NC,L]
RewriteRule ^list/shows/cid-([0-9]+).html /list/shows?cid=$1 [NC] 
```

# android - 具有缩放效果的水平滚动图像

> ID：12471523
> 
> 赞同：-1
> 
> 时间：2012-09-18T06:33:04.873
> 
> 标签：android

任何人都可以帮助我水平滚动图像视图以及放大、缩小效果。我正在使用图库进行水平滚动，但无法使用图库实现缩放。在 web 视图中缩放是存在的，但是如何使用水平滚动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T06:50:57.563

我认为您正在寻找图库视图。Android 默认具有 Galleryview。它具有水平滚动功能，并且中间的图像会被缩放。希望此[链接](http://saigeethamn.blogspot.in/2010/05/gallery-view-android-developer-tutorial.html)对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T06:37:11.903

使用带有 ZOOMCONTROL 的 ViewFlipper

这将有所帮助：[在 viewflipper 中缩放图像](https://stackoverflow.com/questions/9846914/zooming-image-in-viewflipper)

# php - PHP CSV Generation - 波兰语字符转向他们的 html 实体

> ID：12471530
> 
> 赞同：0
> 
> 时间：2012-09-18T06:33:24.543
> 
> 标签：php, csv, polish

当我尝试在 Csv 文件中插入波兰语字符时。波兰语字符自动转换为它们各自的 htmlentities

```
<?php

header('Content-Type: text/csv; charset=UTF-8');   
header( 'Content-Disposition: attachment;filename=reports.csv');

echo ('åĄĆĘŁŃÓŚŹŻąćęłńóśźż');

?>
Output: å&#260;&#262;&#280;&#321;&#323;Ó&#346;&#377;&#379;&#261;&#263;&#281;&#322;&#324;ó&#347;&#378;&#380; 
```

我需要在那里显示波兰字符。

谁能帮我解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T06:51:19.247

试试这个：

```
<?php

header('Content-type: application/ms-excel');
header('Content-Disposition: attachment; filename=reports.csv');

$data = 'åĄĆĘŁŃÓŚŹŻąćęłńóśźż';

$csv_output = '="'.$data.'"'.chr(9).chr(13);

$csv_output = chr(255).chr(254).mb_convert_encoding($csv_output, 'UTF-16LE', 'UTF-8');

echo $csv_output;

?> 
```

也不要忘记**将您的 php 文件保存为没有 BOM 的 UTF-8** ...

`chr(9)`分隔字段并`chr(13)`分隔行...

# facebook - fb_all.js 可以在本地渲染吗？

> ID：12471533
> 
> 赞同：0
> 
> 时间：2012-09-18T06:33:37.243
> 
> 标签：facebook

我正在编写一个 Facebook 应用程序，每次重新加载页面时，我都需要从 Facebook 服务器获取 fb_all.js 文件。由于该文件是初始化应用程序所必需的，所以我无法避免它。

文件的大小很大，因此我觉得页面变慢了。现在，如果已经下载文件并在本地加载它，一切都按预期工作。

```
<script type="text/javascript" src="/fb_all.js" /> 
```

但是这种实现真的安全还是会引起任何问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T12:44:58.760

> 但是这种实现真的安全还是会引起任何问题

这会导致更新问题——一旦 FB 修复了 SDK 中的错误（或者甚至可能完全重构某些内容），您就必须更新本地版本。但是你怎么知道什么时候该做呢？

如果我要在本地嵌入 SDK（我避免这样做，因为它也可能导致其他问题），我至少会通过设置一个定期获取当前版本的 cronjob 或类似的方式来使其自行更新。

# oracle - 从 Oracle Invoice Matching 发送到应付帐款所需的标准文件格式是什么？

> ID：12471535
> 
> 赞同：1
> 
> 时间：2012-09-18T06:33:55.873
> 
> 标签：oracle, invoice, oracleapplications

我正在开展一个项目，该项目需要将一些发票从 Oracle 零售发票匹配上传到应付帐款。我想使用平面文件，但需要找出它的确切格式。我试图浏览 Oracle ReIM 和 AP 的文档，但我得到的唯一提示是

> 对于每张发票，程序应在平面文件中包含值以填充 AP_EXPENSE_REPORT_HEADERS 中的以下外键列：
> 
> o VENDOR_ID
> 
> o VENDOR_SITE_ID
> 
> o ACCTS_PAY_CODE_COMBINATION_ID
> 
> 对于每个发票分配，包括填充 AP_EXPENSE_REPORT_LINES 中的会计弹性域列的值：
> 
> o CODE_COMBINATION_ID
> 
> 此外，如果您要导入外币发票，请在 AP_EXPENSE_REPORT_HEADERS 中包含信息以填充以下列：
> 
> o DEFAULT_EXCHANGE_RATE_TYPE
> 
> o DEFAULT_EXCHANGE_RATE
> 
> o DEFAULT_EXCHANGE_DATE
> 
> 如果此汇率信息对于您导入的所有发票和发票分配都相同，则您可以将此信息包含在您的 SQL*Loader 控制文件中。
> 
> 最后，确保您的发票平面文件具有适当的信息来填充 AP_EXPENSE_REPORT_HEADERS 和 AP_EXPENSE_REPORT_LINES，如前面的表格描述中所示。如果某列需要注释值，则可以将该列留空。

但我不确定这是否正是我想要的，因为根据它我必须编写一个程序来手动生成文件。考虑到 ReIM 和 AP 都是 Oracle 的产品。我想 ReIM 应该能够生成某种可以被 AP 直接识别的平面文件。

谁能帮我？非常感谢！

# c++ - 在 C++ 中包含目录时指定完整路径

> ID：12471539
> 
> 赞同：0
> 
> 时间：2012-09-18T06:34:30.667
> 
> 标签：c++, boost, compiler-construction, linker, mingw

在 C++ 中，我弄乱了 boost 库，并且我有一个包含所有 boost .hpp 文件和目录的“boost\”目录，等等在我的编译器的包含文件夹中的“MinGW\include\boost\”。现在让我感到困惑的是，当我想使用文件“lambda.hpp”时，我必须实际输入：

```
 #include <boost/lambda/lambda.hpp> 
```

但如果我包含整个目录，例如“boost\algorithm\”，我只需要输入：

```
#include <algorithm> 
```

即使“算法”文件夹不在目录“MinGW\include”中，它也在“MinGW\include\boost\”中。为什么在包含整个目录而不是单个头文件时不需要提供完整路径？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T06:38:41.017

头文件`<algorithm>`是标准库的一部分，而不是 Boost 的一部分。

这些路径与预处理器搜索头文件的路径列表相关。因此，在其中一个路径的根目录中`<algorithm>`有一个文件的情况下，而在另一个搜索路径的情况下，该路径具有一个子文件夹，该子文件夹具有一个文件。`algorithm``<boost/lambda/lambda.hpp>``boost``lambda``lambda.hpp`

顺便说一句，所有 Boost 头文件都有后缀（即扩展名）`.hpp`，而标准库头文件根本没有。

至于认为你包含完整的目录`algorithm`，预处理器不支持它，而是你必须`boost/algorithm`分别在路径中包含文件。

# iphone - 使用 tableview 索引

> ID：12471540
> 
> 赞同：0
> 
> 时间：2012-09-18T06:34:35.010
> 
> 标签：iphone, uitableview

我需要为 tableview 实现索引。我的数组包含 NSManagedObjects。我有排序数组 Contactarray，其中包含排序名称的数组。

```
 AddressBook *adBook=nil;
    adBook= [self.contactArray objectAtIndex:indexPath.row];  
    cell.lblContactName.text=[adBook valuForKey:@"name"]; 
```

我不知道如何访问对象的名称属性。

```
NSLog(@"abook%@",adBook);--->results <NSManagedObject: 0x8160630> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:23:28.500

好吧，信息如下：

地址簿 *adBook=nil; 是一个对象，并且要具有值，您可以使用空格或点运算符

作为

```
cell.lblContactName.text=adBook.name; 
```

或者

```
cell.lblContactName.text=[adBook name]; 
```

# c# - 如何将 wpf Richtextbox 垂直滚动与拆分容器 Panel2 同步

> ID：12471550
> 
> 赞同：1
> 
> 时间：2012-09-18T06:35:30.657
> 
> 标签：c#, winforms

在 Windows Froms 中，我在 Panle1 中有一个拆分容器，我有一个 WPF 富文本框，因此我想将富文本框的垂直滚动与 Panel2 同步，反之亦然。我知道如何同步面板的滚动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:14:10.657

如果将富文本框包装在滚动查看器控件中

```
<ScrollViewer ScrollChanged="ScrollViewer_ScrollChanged_1" Name="scvOriginal">
          <RichTextBox Name="rtbOrginal"   ScrollViewer.CanContentScroll="True" />
</ScrollViewer>

<ScrollViewer Name="scvChanged">
          <RichTextBox Name="rtbChanged" ScrollViewer.CanContentScroll="True" />
</ScrollViewer> 
```

然后点击滚动查看器的滚动更改事件

```
 private void scvOriginal_ScrollChanged(object sender, ScrollChangedEventArgs e)
 {
     scvChanged.ScrollToVerticalOffset(e.VerticalOffset);
 } 
```

这将允许设置 2 个富文本框的水平和垂直滚动。

# iphone - 如何逐部分解析xml文件？

> ID：12471553
> 
> 赞同：2
> 
> 时间：2012-09-18T06:35:52.217
> 
> 标签：iphone

我正在开发一个应用程序。我通过 xml 收到 500 到 600 个问题。但是，如果我一次解析整个文件，则需要很长时间。

所以我想逐部分解析xml文件以节省时间。这意味着首先我解析前三个问题的xml文件，在显示这三个问题之后，我可以解析接下来的三个问题，依此类推。

但是得到三个问题后如何停止解析呢？

如果有人知道任何其他快速解析的方法，请告诉我。顺便说一句，我`TBXML`用于解析。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T06:57:53.623

尝试这个。我希望它会帮助你：

```
-(void) loadXML:(NSString *)urlStr
{
    NSData  *data   = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:urlString]];
    parser          = [[NSXMLParser alloc] initWithData:data];
    parser.delegate = self;
    [parser parse];
}

/****
e.g.
<name>Romit</name>
**/
-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    // method to make operation when element stated. <name>
}

- (void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    // you get all data in this delegate method. from string variable.
    // name value
}

- (void) parser:(NSXMLParser *)parser didStartElement:(NSString *)elementname namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
   // make operation when element finished.
  //</name>
} 
```

# java - CCJSqlParserManager.parse 不支持 NOW()？

> ID：12471558
> 
> 赞同：0
> 
> 时间：2012-09-18T06:36:11.507
> 
> 标签：java, sql

我在我的程序中使用了这段代码：

```
CCJSqlParserManager pm = new CCJSqlParserManager();
net.sf.jsqlparser.statement.Statement statement = 
                                     pm.parse(new StringReader(processedSql)); 
```

processdSql `INSERT INTO　XX(FOO, BAR, CREATE_TIME) VALUES(foo, bar, NOW())` 之后`pm.parse()`，`NOW()`sql 中的 改为`NOW`，括号不见了！

# java - 如何正确获取 HTML Asset

> ID：12471562
> 
> 赞同：1
> 
> 时间：2012-09-18T06:36:33.620
> 
> 标签：java, android, parsing, htmlcleaner

我一直在关注使用 HtmlCleaner 解析 HTML 的教程，特别是这个：http: [//xjaphx.wordpress.com/2012/02/04/android-xml-adventure-parsing-html-using-htmlcleaner/](http://xjaphx.wordpress.com/2012/02/04/android-xml-adventure-parsing-html-using-htmlcleaner/)

有一部分代码获取了一个 url 并修改了该页面的 html：

```
HtmlCleaner htmlCleaner = new HtmlCleaner();
CleanerProperties props = htmlCleaner.getProperties();
props.setAllowHtmlInsideAttributes(false);
props.setAllowMultiWordAttributes(true);
props.setRecognizeUnicodeChars(true);
props.setOmitComments(true);

URL url = new URL(incommingURL);
TagNode root = htmlCleaner.clean(url);
Object[] statsNode = root.evaluateXPath(incommingXPath); 
```

如何正确保存网页，将其存储为资产并实现相同的目标？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T07:27:02.793

这是一种可能的方法。抱歉，不能发布任何生产代码。但好消息是，这个想法已经被成功应用了。

如果“网页”表示单个文件，只需将其复制到项目中的资产中即可。如果有多个文件，请将它们压缩在一起。

请注意，有一些帖子包含一些魔术路径，可让您直接寻址设备上的资产文件夹。据我所知，这些没有记录，只是巧合。所以我会避免使用它们。

相反，使用 AssetManager (Context.getAssets().open(...)) 来获取输入流。将文件复制或解压缩（使用 ZipInputStream 包装流，迭代其 ZipEntry 元素）您的文件到本地存储 (Context.getFilesDir()) 或 SD 卡 (Context.getExternalFilesDir(...))。

然后将您的网页文件副本的 URL (file://...) 放在 incommingURL 中。

# java - 显示列表成员

> ID：12471570
> 
> 赞同：0
> 
> 时间：2012-09-18T06:37:01.543
> 
> 标签：java, jsp

您好我正在使用以下代码来检索列表的值，但它没有显示任何内容。我的课程代码是：

```
 private List MyList;
    public List getMyList() {
            System.out.println("MyList:"+MyList.get(0).toString());
            return MyList;
    }

    public void setMyList(List MyList) {
            this.MyList = MyList;
    } 
```

我的jsp：

```
 <c:forEach var="item" items="${MyList}">
   <div>${item}</div>
 </c:forEach> 
```

控制台中的结果：MyList:Swimming

但在浏览器中没有结果！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T06:59:32.890

由于 jstl 表达式将由 getter/setter 的命名约定进行评估，因此您必须在 jsp 中使用以下内容：

```
<c:forEach var="item" items="${myList}">
   <div>${item}</div>
 </c:forEach> 
```

`${myList}`将被评估为`getMyList()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T07:16:12.573

尝试类似（如果语法错误，请纠正我）：

```
<c:forEach var="item" items="${myList}">
   <div>${item.toString()}</div>
 </c:forEach> 
```

并确保您的项目可以用 ToString() 方法表示。在您的情况下， getList Methode 在 Foreach 循环中被调用一次，但它在该部分之前而不是在该`<div>`部分中。

# java - 在嵌入式 tomcat 服务器中调用 JAX-RS API 时来自浏览器的 415（不支持的媒体类型）

> ID：12471572
> 
> 赞同：2
> 
> 时间：2012-09-18T06:37:06.117
> 
> 标签：java, javascript, web-services, jquery, jax-rs

当我尝试通过 JAX-RS REST API 上传 csv 格式的 excel 文件时，我从浏览器收到 415（不支持的媒体类型）。Web 应用程序在嵌入式 Tomcat 服务器下部署和运行。

如果我在不是嵌入式 tomcat 的 tomcat 7 服务器中部署我的 web 应用程序，我可以成功上传 csv 文件。

感谢您为解决我的问题提供的意见。

> 网址：ipaddress:8090/config/configutil/upload

## 浏览器标头请求失败：

```
Request URL:http://localhost:8090/config/configutil/upload
Request Method:POST
Status Code:415 Unsupported Media Type
Request Headersview source
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Cache-Control:max-age=0
Connection:keep-alive
Content-Length:2346
Content-Type:multipart/form-data; boundary=----WebKitFormBoundarycWT1QSyGGxijtUUP
Host:localhost:8090
Origin:http://localhost:8090
Referer:http://localhost:8090/
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1
Request Payload
------WebKitFormBoundarycWT1QSyGGxijtUUP
Content-Disposition: form-data; name="UserExportFormat"

XML
------WebKitFormBoundarycWT1QSyGGxijtUUP
Content-Disposition: form-data; name="uploadedFile"; filename="1-06092012 (3).csv"
Content-Type: application/vnd.ms-excel

------WebKitFormBoundarycWT1QSyGGxijtUUP--
Response Headersview source
Cache-Control:no-cache
Content-Length:1117
Content-Type:text/html;charset=utf-8
Date:Tue, 18 Sep 2012 00:09:35 GMT
Server:Apache-Coyote/1.1 
```

## JAX-RS API

```
/**
     * API will import the ConfigSet from CSV file request and returns the response in Text/Html format.
     * @param is
     * @param request
     * @param response
     */

@POST
@Path("/upload")
@Consumes(MediaType.MULTIPART_FORM_DATA)
@Produces(MediaType.TEXT_HTML)
public void upload(@FormDataParam("uploadedFile") InputStream is, @Context HttpServletRequest request, @Context HttpServletResponse response) {
    // read it with BufferedReader

    ObjectMapper mapper = new ObjectMapper();
    PrintWriter out;
    BufferedReader br = null;
    try {
        br = new BufferedReader(new InputStreamReader(is));
        ConfigSetResponse configSetResponse = new CSVReader().csvReader(br);
        out = response.getWriter();
        mapper.writeValue(out, configSetResponse);

    } catch (Exception e) {
        logger.error("Error while uploading :", e);
        e.printStackTrace();
    } finally {
        // Close the file once all data has been read.
        try {
            if (null != br) {
                br.close();
            }
            if (null != is) {
                is.close();
            }
        } catch (IOException e) {
            logger.error("Error while uploading :", e);
            e.printStackTrace();
        }
    }
} 
```

## 调用此 JAX-RS API 的 Java 脚本代码：

```
var importForm = $( modal ).find("#icwExportForm");                 

                        importForm.ajaxForm({
                            contentType: false,
                            success : function(responseObj) {
                                try{

                                    refreshConfigSetUI(eval(responseObj));
                                    ccw.modal.hide(modal);
                                }catch(e){
                                    ccw.modal.hide(modal);
                                    $('#runtimeErrorMessages').html(commonErrorData);                                   
                                }
                            },
                            error : function(request, msg,  err) {
                                ccw.modal.hide(modal);
                                $('#runtimeErrorMessages').html(commonErrorData);
                            }
                        });

                        importForm.attr("action", "config/configutil/upload");
                        importForm.attr("Content-Type" ,"multipart/form-data");
                        importForm.submit();
                    }); 
```

## HTML页面：

```
<form class="icwExportForm" id="icwExportForm"   method="post" action="" name="ExportOptionInputForm" enctype="multipart/form-data" accept-charset="utf-8">

<div class="icwImportContent" style="padding: 5px 0px 10px 20px">
                    <input type="file" name="uploadedFile" value="" id="icwUploadFile" class="icwButton" size="45"  tabindex="1" />

</div>

</form> 
```

# python - 如何在分布式环境中分发多个python进程

> ID：12471575
> 
> 赞同：2
> 
> 时间：2012-09-18T06:37:13.403
> 
> 标签：python

我有薮 python 进程通过套接字相互交谈；每个过程都有特定的角色或功能。

这些进程最初是在有线 LAN 上运行的（机器的 ip 是静态的），所以我为它们中的每一个分配了一个 ip 地址和端口号，让它们相互找到并相互交谈；但是当我切换每个python进程的ip地址不是静态的动态环境时，每次都配置进程的ip地址很繁琐。**目前，我使用SSH登录和启动不同的进程，有两台机器有很多不同的进程**。

**如何在分布式环境中轻松部署这些进程，例如在无线 LAN 或整个 Internet 中，以便它们可以自己找到对方；我将使用 twitter 的谋杀将我的代码分发到这些机器上。**

我想应该有类似名称服务的东西，但我不确定我应该做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T08:05:46.013

你可以

*   使用 dns 代替 ip 地址
*   创建您自己的名称服务（可能是提供注册和查找功能的休息服务）
*   使用 bonjour 或 avahi 之类的 zeroconf 实现（取决于您的操作系统）

# html - HTML表格单元格按左列高度拉伸

> ID：12471578
> 
> 赞同：0
> 
> 时间：2012-09-18T06:37:24.333
> 
> 标签：html, html-table

所以我有这样的表：http: [//img607.imageshack.us/img607/5295/1stv.jpg](http://img607.imageshack.us/img607/5295/1stv.jpg)

但我想做这样的事情：http: [//img684.imageshack.us/img684/3500/2ndjn.jpg](http://img684.imageshack.us/img684/3500/2ndjn.jpg)

左列高度不固定。右边的行号也不固定。我只希望右边的行同样被左列高度拉伸，并一直填充到底部的整个间隙，就像我的第二个例子一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T11:58:22.620

这可能有效：

HTML

```
<table>
  <tr>
    <th rowspan="0">pic</th>
      <td>text</td>
      <td>text</td>
  </tr>
    <tr>
      <td>text</td>
      <td>text</td>
    </tr>
    <tr>
      <td>text</td>
      <td>text</td>
    </tr>
</table> 
```

CSS

```
table {
  table-layout: fixed;
  border-collapse: collapse;
  width: 100%;
}

td, th{
  border: 1px solid #000;
  width: auto;
}

td+th {
  width: auto;
}

th {
  height:300px;
} 
```

`th`只需在 CSS 中更改 a 的高度或向单元格添加不同大小的图片。您还可以向 HTML 添加可变数量的行。

笔记！`rowspan=0`可能仅适用于 Firefox 和 Opera。至少它不适用于 Safari。如果您事先不知道行数或无法使用`php`或`JavaScript`动态确定行数，您可能希望在左侧添加一张图片并在其右侧添加两列表格。

另请参阅此答案：[Table with table-layout: fixed; 以及如何使一列更宽](https://stackoverflow.com/questions/6253963/table-with-table-layout-fixed-and-how-to-make-one-column-wider)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T06:45:01.987

你可以尝试使用`table-layout:fixed`

```
<table style='table-layout:fixed;'>
<tr>
<td>Hello World</td>
<td>Hello World</td>
</tr>
<tr>
<td>Hello World</td>
<td>Hello World</td>
</tr>
<tr>
<td>Hello World</td>
<td>Hello World</td>
</tr>
</table> 
```

然后尽可能在列和行中**设置一些宽度和高度**

# java - 在一个大矩阵中找到多个最小的子矩阵

> ID：12471580
> 
> 赞同：0
> 
> 时间：2012-09-18T06:37:28.773
> 
> 标签：java

我很难在大矩阵 M 和 m=M/2 中找到一些最小的子矩阵 m；

我需要在同一循环中找到子矩阵的数量以找到最小的子矩阵
这是我所做的。

```
public static void FindSmalSubMatrix(int mat3[][],int rows,int colums)
{
    int subm,i,j,temp=0,location1=0,location2=0, min=0;
    ArrayList submin = new ArrayList();
    if(rows>=colums)
      subm=colums/2;
    else
      subm= rows/2;
    min= Firstmin(mat3,subm);

    for (i=0;i<rows-subm+1;i++)
      for(j=0;j<colums-subm+1;j++)
      {
          for(int k=i; k <i+subm;k++)
              for (int l =j;l<j+subm;l++)
              {

                 temp=temp+ mat3[k][l];
              }

           if (temp <= min)
           {
               min=temp;
              submin.add(min);

              location1=i;
              location2=j;
           }

           temp=0;
      }
    System.out.println(min+" location is :"+location1+" "+location2);
    for( Object value:submin)
      System.out.print(value); 
} 
```

这是一个例子

6 6 4 4 3
2 2 3 3 8
5 0 2 2 5
4 9 2 1 4
1 6 8 1 3
7 位置是：2 2

161514977

但我需要打印 min =7 Location :1 1
2 3
0 2

最小 =7
位置：2 2
2 2
1 2

如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T07:06:44.030

你的代码没那么糟糕。您是否尝试调试它并检查保存到 submin 的内容？因为它看起来像 16,15,14,9,7,7（最后 2 个数字很好，不是吗？）什么是 FirstMin？

```
public static void FindSmalSubMatrix(int mat3[][],int rows,int colums)
{
    int subm,i,j,temp=0,location1=0,location2=0, min=0;
    ArrayList<Point> locations = new ArrayList<Point>();
    if(rows>=colums)
      subm=colums/2;
    else
      subm= rows/2;
    min= Integer.MAX_VALUE;

    for (i=0;i<rows-subm+1;i++)
      for(j=0;j<colums-subm+1;j++)
      {
       temp = 0;
          for(int k=i; k <i+subm;k++)
              for (int l =j;l<j+subm;l++)
              {

                 temp=temp+ mat3[k][l];
              }

           if (temp < min)
           {
              locations.clear();  //you dont need data about larger min, right?
               min=temp;

              Point point = new Point(i,j);
              locations.add(point);

           } else (temp == min) {
              Point point = new Point(i,j);
              locations.add(point);

           }

      }
    // And to print use something like these, but its better to create new class
    // which contain location and small matrixes or just use old bigger to print parts
    // for example just print location (min are equal to all result) and using   
    // location print parts from  mat3

} 
```

我想我在这个例子中犯了一些错误，但你会发现它;）我使用 Point 类只是为了保存最小矩阵的位置，你可以使用另一个类

**编辑：** 我不得不稍微修复它，因为我的代码很难看（但无论如何......）

# sql - 如何将 ms-access 中的 sgn() 函数转换为 t-sql

> ID：12471581
> 
> 赞同：2
> 
> 时间：2012-09-18T06:37:37.990
> 
> 标签：sql, tsql, ms-access

如何`sgn()`在以下查询中将 Access 中的函数转换为 T-SQL：

```
SELECT 
    DISTINCT Customer.Branch_ID, 
    Customer.Bankrupt, 
    -Sgn([Bankrupt]) AS [Counts]
FROM 
    Customer 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T06:42:21.830

它[`SIGN`](http://msdn.microsoft.com/en-us/library/ms188420.aspx)在 TSQL 中：

> 返回指定表达式的正 (+1)、零 (0) 或负 (-1) 符号。

```
SELECT DISTINCT Customer.Branch_ID, 
    Customer.Bankrupt, -SIGN([Bankrupt]) AS [Counts] 
FROM Customer 
```

# css - 响应式问题

> ID：12471583
> 
> 赞同：-1
> 
> 时间：2012-09-18T06:37:41.160
> 
> 标签：css, html, size

我正在尝试将页面上的文本更改为页面大小。例如，根据屏幕的分辨率，该行将在不同的位置结束，以便所有文本都可以放在 div 中。

我确信有一种非常简单的方法可以做到这一点，但我根本无法弄清楚。

任何帮助表示赞赏，

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T08:13:30.137

如果您正在考虑响应，您必须学会放弃对您的设计的一定程度的控制。线路长度会在不同的设备上发生变化，但这是预期的行为......

如果您真的刚刚开始，您应该阅读开始这一切的[原始文章。](http://www.alistapart.com/articles/responsive-web-design/)[Ethan Marcotte 的书](http://www.abookapart.com/products/responsive-web-design)也是不可或缺的。

如果您希望缩小/扩大标题文本以适应可用空间（并且您习惯于使用 jQuery），请查看[FitText](http://fittextjs.com/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T06:40:53.290

媒体查询：

```
@media all and (min-width: 800px) {
  body { background: red; }
} 
```

# solaris - 如何在solaris中计算时差

> ID：12471585
> 
> 赞同：1
> 
> 时间：2012-09-18T06:37:45.583
> 
> 标签：solaris

我的服务器中正在运行一个进程，用户可能不会丢弃该进程。我想设置一个可以计算时间差并自动终止的脚本。有人可以帮我计算solaris中两个日期之间的时间差吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:45:56.647

这就是我在一个脚本中的内容，该脚本通过计算开始时间和结束时间之间的差异来记录它运行了多长时间：

```
START="$(perl -e 'print time')"
  [... body of script ...]
perl -e '$runtime = time - $ARGV[0];
         printf("Runtime: %d:%02d\n", $runtime/3600, ($runtime%3600)/60); ' \
        "${START}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T15:30:21.223

通过一点搜索，[此链接](http://compgroups.net/comp.unix.solaris/how-to-get-the-time-difference-in-a-script/58431)可能会有所帮助。

```
date1=$(/usr/xpg4/bin/awk 'BEGIN{srand();print srand()}')
# ... processing ...
date2=$(/usr/xpg4/bin/awk 'BEGIN{srand();print srand()}') 
```

# xslt - FOP 不生成可读的 PDF

> ID：12471591
> 
> 赞同：1
> 
> 时间：2012-09-18T06:38:10.097
> 
> 标签：xslt, glassfish, apache-fop

我的环境是：

Glassfish 3.12 FOP-1.0，我正在尝试通过 servlet 使用 FOP 生成 PDF。

XML 文件是：

```
<?xml version='1.0' encoding='iso-8859-1'?>
    <LIST>
        <user>
            <FIRSTNAME>Hi</FIRSTNAME>
            <LASTNAME>Hello</LASTNAME>
            <EMAIL>a@a.com</EMAIL>
</user>
        <user>
            <FIRSTNAME>aa</FIRSTNAME>
            <LASTNAME>ddd</LASTNAME>
            <EMAIL>a@kk.com</EMAIL>
</user>
</LIST> 
```

XSL 是：

```
<?xml version="1.0"?>

<xsl:stylesheet version="1.0"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:template match="LIST">
        <fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format">
            <fo:layout-master-set>
                <fo:simple-page-master master-name="my-page">
                    <fo:region-body margin="1in"/>
                </fo:simple-page-master>
            </fo:layout-master-set>

            <fo:page-sequence master-reference="my-page">
                <fo:flow flow-name="xsl-region-body" font="12pt Times">

                    <fo:table table-layout="fixed" width="100%">
                        <fo:table-body>
                            <fo:table-row>
                                <fo:table-cell border="solid 1px black" 
               text-align="center" font-weight="bold">
                                    <fo:block>
                                        First Name.
                                    </fo:block>
                                </fo:table-cell>
                                <fo:table-cell border="solid 1px black" 
               text-align="center" font-weight="bold">
                                    <fo:block>
                                        Last Name.
                                    </fo:block>
                                </fo:table-cell>
                                <fo:table-cell border="solid 1px black" 
               text-align="center" font-weight="bold">
                                    <fo:block>
                                        Email
                                    </fo:block>
                                </fo:table-cell>
                            </fo:table-row>
                            <xsl:for-each select="./user">
                                <fo:table-row>
                                    <fo:table-cell border="solid 1px black" text-align="center">
                                        <fo:block>
                                            <xsl:value-of select="position()" />
                                        </fo:block>
                                    </fo:table-cell>
                                    <fo:table-cell border="solid 1px black" text-align="center">
                                        <fo:block>
                                            <xsl:value-of select="FIRSTNAME" />
                                        </fo:block>
                                    </fo:table-cell>
                                    <fo:table-cell border="solid 1px black" text-align="center">
                                        <fo:block>
                                            <xsl:value-of select="LASTNAME" />
                                        </fo:block>
                                    </fo:table-cell>
                                    <fo:table-cell border="solid 1px black" text-align="center">
                                    <fo:block>
                                        <xsl:value-of select="EMAIL" />
                                    </fo:block>
                                </fo:table-cell>
                                </fo:table-row>
                            </xsl:for-each>
                        </fo:table-body>
                    </fo:table>

                </fo:flow>
            </fo:page-sequence>
            </fo:root>
    </xsl:template>

</xsl:stylesheet> 
```

servlet代码是：

```
try
{
response.setContentType("application/pdf");
FopFactory fopFactory = FopFactory.newInstance();

            TransformerFactory tFactory = TransformerFactory.newInstance();
            ByteArrayOutputStream bout = new ByteArrayOutputStream();
            FOUserAgent foUserAgent = fopFactory.newFOUserAgent(); 
            //Setup FOP
            Fop fop =
                    fopFactory.newFop(MimeConstants.MIME_PDF,foUserAgent, bout);
            //Setup Transformer
            Source xsltSrc = new StreamSource(new File("test.xsl"));
            Transformer transformer = tFactory.newTransformer(xsltSrc);
            //Make sure the XSL transformation's result is piped through to FOP
            Result res = new SAXResult(fop.getDefaultHandler());
            //Setup input
            Source src = new StreamSource(new File("xmlfile2.xml"));
            //Start the transformation and rendering process

            transformer.transform(src, res);
            //Prepare response

            response.setContentLength(bout.size());

            //Send content to Browser

             response.addHeader("Content-Disposition", 
                    "attachment;filename=pdffile.pdf");
            response.getOutputStream().write(bout.toByteArray());
            response.getOutputStream().flush();

        } 

        catch(TransformerConfigurationException tce)
        {
                tce.printStackTrace();
        }
        catch(FOPException fope)
        {
                 fope.printStackTrace();
        }
        catch(TransformerException te)
        {
                 te.printStackTrace();

         } 
```

PDF已生成/下载，但当我尝试打开它时，它说：

```
Adobe Reader could not open the file 'pdffile.pdf' because it is etiher not a supported file or because the file has been  damaged. 
```

知道我在哪里失踪吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T07:48:20.323

您还没有关闭 OutputStream：

```
response.getOutputStream().close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T15:36:51.857

移动 response.setContentType("application/pdf"); 就在这些行之上：

```
response.addHeader("Content-Disposition", 
                    "attachment;filename=pdffile.pdf");
            response.getOutputStream().write(bout.toByteArray());
            response.getOutputStream().flush(); 
```

并且代码现在工作正常。谢谢

# html - 如何将 NSAttributed 字符串同步到 MS Sharepoint 服务器

> ID：12471593
> 
> 赞同：0
> 
> 时间：2012-09-18T06:38:10.030
> 
> 标签：html, ios, sharepoint, core-text, rich-text-editor

我有要求用户编辑富文本编辑功能的注释。然后用户将这些笔记同步到共享点。我的问题是，sharepoint 列类型是否支持存储属性字符串，或者我必须将 NSAttributed 字符串转换为 HTML 标记？sharepoint 是否支持将 unicode 字符属性字符串或 HTML 页面存储为列类型

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T06:53:12.090

转换`NSAttributedString`为`NSData`使用`NSKeyedArchiver`和上传：

```
NSString *theString = @"Example";
NSDictionary *theAttributes = [[NSDictionary alloc] initWithObjectsAndKeys:
                               [NSFont fontWithName:@"Helvetica" size:26], NSFontAttributeName,
                               [NSColor whiteColor], NSForegroundColorAttributeName, nil];
NSAttributedString *theAttributedString = [[NSAttributedString alloc] 
                                           initWithString:theString
                                           attributes: theAttributes];
NSData *theData = [NSKeyedArchiver archivedDataWithRootObject:theAttributedString]; 
```

从服务器下载数据并将其转换回`NSAttributedString`使用：

```
NSAttributedString *theAttributedString = [NSKeyedUnarchiver unarchiveObjectWithData:theData]; 
```

`NSAttributedStrings`通常我以两种格式上传：

*   存档`NSAttributedString`以确保我以后可以检索完全相同的对象。
*   `NSAttributedString`允许搜索和显示服务器端的普通版本。

# javascript - Javascript正则表达式字符串用逗号分隔符替换货币

> ID：12471596
> 
> 赞同：0
> 
> 时间：2012-09-18T06:38:24.670
> 
> 标签：javascript, regex

> **可能重复：**
> [如何在 JavaScript 中将数字格式化为货币？](https://stackoverflow.com/questions/149055/how-can-i-format-numbers-as-money-in-javascript)

输入字符串是任何可能有或没有小数位的数字，我们必须

在货币编号的适当位置放置逗号。例如-

```
input - 1000        output - 1,000

input - 1000.00     output - 1,000.00

input - 1200000     output - 1,200,000 
```

（逗号（，）分隔符出现在每 3 位数字之后，忽略小数位）。

我们可以只通过 javascript 中的正则表达式来完成这项工作吗？

请指导。

# android - 如何制作 viewpager 循环？

> ID：12471597
> 
> 赞同：4
> 
> 时间：2012-09-18T06:38:31.610
> 
> 标签：android, android-viewpager

我希望我的 ViewPager 实现在视图之间循环，而不是在最后一个视图处停止。例如，如果我有 3 个视图要通过 ViewPager 显示，它应该在第三个视图之后返回到第一个视图，而不是在第三个视图处停止。我希望它在用户在最后一页向前翻页时返回到第一页/视图

循环示例；

A,B,C,D <--- A,B,C,D ---> A,B,C,D

非常感谢，

我的页面适配器；

```
package com.example.pictures;

import android.content.Context;
import android.media.AudioManager;
import android.os.Parcelable;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.LayoutInflater;
import android.view.View;

public class MyPagerAdapter extends  PagerAdapter{

public int getCount() {
    return 6;
}

public Object instantiateItem(View collection, int position) {

    View view=null;

    LayoutInflater inflater = (LayoutInflater) collection.getContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    int resId = 0;
    switch (position) {
    case 0:
        resId = R.layout.picture1;
        view = inflater.inflate(resId, null);         
        break;
    case 1:
        resId = R.layout.picture2;   
        view = inflater.inflate(resId, null);
        break;
    case 2:
        resId = R.layout.picture3;
        view = inflater.inflate(resId, null);
        break;
    case 3:
        resId = R.layout.picture4;
        view = inflater.inflate(resId, null);
        break;
    case 4:
        resId = R.layout.picture5;
        view = inflater.inflate(resId, null);   
        break;
    case 5:
        resId = R.layout.picture6;
        view = inflater.inflate(resId, null);
        break;
    }

    ((ViewPager) collection).addView(view, 0);

    return view;
}

@SuppressWarnings("unused")
private Context getApplicationContext() {
    // TODO Auto-generated method stub
    return null;
}

private void setVolumeControlStream(int streamMusic) {
    // TODO Auto-generated method stub

}

@SuppressWarnings("unused")
private Context getBaseContext() {
    // TODO Auto-generated method stub
    return null;
}

@SuppressWarnings("unused")
private PagerAdapter findViewById(int myfivepanelpager) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public void destroyItem(View arg0, int arg1, Object arg2) {
    ((ViewPager) arg0).removeView((View) arg2);
}

@Override
public boolean isViewFromObject(View arg0, Object arg1) {
    return arg0 == ((View) arg1);

}

@Override
public Parcelable saveState() {
    return null;
}

public static Integer getItem(int position) {
    // TODO Auto-generated method stub
    return null;
}

} 
```

OnPageChangeListener;

```
package com.example.pictures;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.support.v4.view.ViewPager;
import android.support.v4.view.ViewPager.OnPageChangeListener;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

public class Pictures extends Activity implements OnPageChangeListener{
SoundManager snd; 
int sound1,sound2,sound3;
View view=null;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.picturespage);

 MyPagerAdapter adapter = new MyPagerAdapter();
 ViewPager myPager = (ViewPager) findViewById(R.id.myfivepanelpager);
 myPager.setAdapter(adapter);
 myPager.setCurrentItem(0); 
 myPager.setOnPageChangeListener(this);
snd = new SoundManager(this);
 sound1 = snd.load(R.raw.sound1);
 sound2 = snd.load(R.raw.sound2);
 sound3 = snd.load(R.raw.sound3);

}
public void onPageScrollStateChanged(int arg0) {
    // TODO Auto-generated method stub

}

public void onPageScrolled(int arg0, float arg1, int arg2) {
    // TODO Auto-generated method stub

}

public void onPageSelected(int position) {
    // TODO Auto-generated method stub

    switch (position) {
    case 0:
            snd.play(sound1);
        break;
    case 1:
        snd.play(sound2);
        break;
    case 2:
            snd.play(sound3);
        break;
    case 3:
      Toast.makeText(this, "1", Toast.LENGTH_SHORT).show();
        break;
    case 4:
       Toast.makeText(this, "2", Toast.LENGTH_SHORT).show();
        break;
    case 5:
        Toast.makeText(this, "3", Toast.LENGTH_SHORT).show();
        break;
    }
}
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T06:50:57.400

您需要创建一个如图所示的圆形适配器，然后将该适配器用作：

```
class MyGestureDetector extends SimpleOnGestureListener {
        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
            try {
                if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH)
                    return false;
                // right to left swipe
                if(e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                    Toast.makeText(SelectFilterActivity.this, "Left Swipe", Toast.LENGTH_SHORT).show();
                }  else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                    Toast.makeText(SelectFilterActivity.this, "Right Swipe", Toast.LENGTH_SHORT).show();
                }
            } catch (Exception e) {
                // nothing
            }
            return false;
        }

    } 
```

上面的代码是从这里复制的[Flinggesture detection on grid layout](https://stackoverflow.com/questions/937313/android-basic-gesture-detection/938657#938657)

也请参阅以下答案：

[在 PagerAdapter 中实现循环滚动](https://stackoverflow.com/questions/8239056/implementing-circular-scrolling-in-pageradapter)

# asp.net-mvc - 如何加载同步融合基本调度程序

> ID：12471601
> 
> 赞同：0
> 
> 时间：2012-09-18T06:38:51.317
> 
> 标签：asp.net-mvc, visual-studio-2010, syncfusion

我正在使用 Telerik 开放访问，我想加载 syncfusion 基本调度程序，我想将调度程序设置为只读。我想显示具有特定 id 值的人的特定日程，所以我想知道如何将参数传递给 action 方法以加载具有特定 id 值的日程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:52:55.503

我们可以使用带有局部视图的“Ajax.BeginFormExt”来满足您的要求。请参考以下代码查看页面：

```
 <%using (Ajax.BeginFormExt("SubmitButton", "Home", new AjaxOptions { UpdateTargetId = "Schedule", HttpMethod = "Post" }))
          { %>
        <%=Html.TextBox("ownerID")%>
        <input type="submit" id="btn_subit" value="submit" class="Button" width="75px" />enter code here
        <% } %>
        <div id="Schedule">
            <% Html.Rende`enter code here`rPartial("SchedulerView"); %>
        </div> 
```

控制器代码：

```
 public ActionResult SubmitButton(SchedulePropertiesModel model, int ownerID)
    {
        ViewData["data"] = FilterScheduleData(ownerID);
        return PartialView("SchedulerView",model);
    }

    private List<Appointments> FilterScheduleData(int ownerID)
    {
        var query = context.Appointments.Where(p => p.Owner == ownerID);
        return query.ToList();
    } 
```

# java - 输入一个整数，输出一个有边a和b的矩形，差应该是最小的

> ID：12471602
> 
> 赞同：0
> 
> 时间：2012-09-18T06:38:55.223
> 
> 标签：java, algorithm

有人可以有这个问题的想法或代码实现吗？非常感谢！这不是家庭作业。

给定一个整数，写一个函数 foo(int area)，这个函数应该返回一个矩形，这个矩形在 a 和 b 两侧的差最小，而且 a*b 必须大于 area 并且小于等于 (面积 + 2)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T06:59:55.417

好的，如果你没有大面积（如果输入“int”那么是的），复杂度为 O(sqrt(n)) 的解决方案对你来说就足够了。然后你可以使用愚蠢的解决方案。

```
#include "math.h"

void foo(int area)
{
    long a = (long)sqrt(area + 2);
    while ((area + 1)  % a != 0 && (area + 2) % a != 0) a--;
    long total_area = ((area + 1) % a == 0) ? (area + 1) : (area + 2);
    long b = total_area / a;
    printf("%ld = %ld X %ld", total_area, a, b);
} 
```

此任务的复杂度为 O(N^(1/2))。即使对于长类型，这也足够了。如果您要长期寻找解决方案。然后你需要使用更复杂的算法：

1.  使用快速分解方法得到所有素数除数的数组。
2.  使用动态规划解决标准任务。两部分的连续数组，因此所有部分的总乘积应尽可能接近。

# php - 检索通用变量时出错

> ID：12471603
> 
> 赞同：-1
> 
> 时间：2012-09-18T06:38:56.823
> 
> 标签：php, mysql

我遇到了一个问题，我收到一个错误，上面写着未定义的变量，虽然它已经定义了，这里是片段：

名称.php

```
session_start();
$uname=$_SESSION['login'];

$host="localhost";
$username="root";
$password="";
$db_name="sampledb";
$tbl_name="tblsched";
$cd = date("F d");
$cd1 = date("Y-n-d");
$ctr = 0;

// retrieving values from cookies that were created is located before this function
function mymainfunc()
{
dateto();
datefrom();
sunday();
monday();
tuesday();
thursday();
wednesday();
friday();
satday();
$arrayto = array();
$arrayfrom = array();
$arraysu=array();
$arraysa=array();
$arraym=array();
$arraytu=array();
$arrayw=array();
$arrayth=array();
$arrayf=array();

$arrayto = dateto();
$arrayfrom = datefrom();
$arraysu=sunday();
$arraysa=satday();
$arraym=monday();
$arraytu=tuesday();
$arrayw=wednesday();
$arrayth=thursday();
$arrayf=friday();

for($x=0;$x<=count($arrayto);$x++)
{
echo "<tr>";
echo "<td align=$tdali bgcolor=$bgcolor>"+ $arrayfrom[x] + "-" + $arrayto[x] + "</td>";
echo "<td align=$tdali>" + $arraysu[x] + "</td>";
echo "<td align=$tdali>" + $arraym[x] + "</td>";
echo "<td align=$tdali>" + $arraytu[x] + "</td>";
echo "<td align=$tdali>" + $arrayw[x] + "</td>";
echo "<td align=$tdali>" + $arrayth[x] + "</td>";
echo "<td align=$tdali>" + $arrayf[x] + "</td>";
echo "<td align=$tdali>" + $arraysa[x] + "</td>"; 
echo "</tr>";
}
}

//the other functions are found before this function
function dateto()
{
$sql="SELECT SchedTimeTo FROM $tbl_name WHERE teacherID=(SELECT teacherID FROM tblteacher WHERE teacherName=$uname) AND SchedDateFrom<=$cd1 AND SchedDateTo>=$cd1";
$result=mysql_query($sql);

$count=mysql_num_rows($result);
$row = mysql_fetch_array($result);

$STF = array();
$STF[] = $row;
return $STF;
} 
```

显示here.php

//我在里面插入了这个片段

```
<?php
include "names.php";
mymainfunc();
?> 
```

有什么建议么？？其他函数虽然没有返回任何错误

它在函数 dateto() 的 sql 部分中显示未定义的变量 tbl_name

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T06:50:02.643

调用全局定义的变量时，您需要通过`global`关键字使函数可以访问它们：

```
<?php
$my_global_var = 42;

function doSomethingImportant() {
    global $my_global_var;

    // now you can safely use that variable:
    if ($my_global_var == 42) {
        //...
    }
}
?> 
```

或者（正如其他回答者所解释的）您可以使用`$_GLOBALS['my_global_var']`-array 来实现目标：

```
<?php
$_GLOBALS['my_global_var'] = 42;

function doSomethingImportant() {

    // now you can safely use that variable:
    if ($_GLOBALS['my_global_var'] == 42) {
        //...
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T06:49:13.133

您应该将变量显式声明为全局变量以确保其范围：

```
//the other functions are found before this function
function dateto()
{
    global $tbl_name;
    global $uname;
    //Add all you global-scoped variables
    $sql="SELECT SchedTimeTo FROM $tbl_name WHERE teacherID=(SELECT teacherID FROM  tblteacher WHERE teacherName=$uname) AND SchedDateFrom<=$cd1 AND SchedDateTo>=$cd1";
    $result=mysql_query($sql);

    $count=mysql_num_rows($result);
    $row = mysql_fetch_array($result);

    $STF = array();
    $STF[] = $row;
    return $STF;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T06:49:27.070

您正在尝试访问函数范围内的全局变量，请查看[此页面](http://php.net/manual/en/language.variables.scope.php)上的第二个示例。

你可以移动`$tbl_name = ..`到函数，或者放在`global $tbl_name;`sql语句之前，或者你可以使用`$_GLOBALS['tbl_name']`$tbl_name来代替。

# spring - Spring：复杂的对象创建

> ID：12471604
> 
> 赞同：1
> 
> 时间：2012-09-18T06:39:01.560
> 
> 标签：spring, dependency-injection, assisted-inject

我试图通过使用 spring 的`@Autowired`注释来创建一个复杂的对象，但它看起来是不可能的。

我正在尝试创建两个对象：`View`and `Presenter`，使用`prototype`范围，然后将它们的引用相互注入。更重要的是：我想从实例的创建者传递两个额外的参数，并从 IoC 容器中注入一些额外的服务。

在 Guice 中，可以通过“辅助注射”来实现，但我怎样才能在春天实现呢？

# python - 如何确定函数返回值是否是生成器？

> ID：12471610
> 
> 赞同：2
> 
> 时间：2012-09-18T06:39:49.600
> 
> 标签：python, python-3.x

yield 返回一个 collections.Iterable 但许多类型也是可迭代的

```
def aaaa():
    yield 1
    yield 2
    yield 3 

d = aaaa()

print(d,type(d),isinstance(d, collections.Iterable)) 
```

打印类型

```
<generator object aaaa at 0x0000000002626B88> <class 'generator'> True 
```

我没有找到“生成器”类，或者我无法进行类型检查。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-18T06:45:17.290

如果要检查*可迭代*对象是否为生成器对象：

```
import types
isinstance(aaaa(), types.GeneratorType) # ==> True 
```

如果要检查*函数*是否包含`yield`语句（即函数是生成器）：

```
import inspect
inspect.isgeneratorfunction(aaaa) # ==> True 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-18T06:44:30.763

看看检查模块，特别是[inspect.isgeneratorfunction](http://docs.python.org/library/inspect.html#inspect.isgeneratorfunction)。

也就是说，更有趣的问题是它是列表还是其他可迭代的。要回答这个问题，您只需检查是否`__getitem__`已在其上定义。

# css - CSS圆角框

> ID：12471616
> 
> 赞同：1
> 
> 时间：2012-09-18T06:40:25.973
> 
> 标签：css

这可能是一个非常初学者的问题，但这就是我在 CSS 中的问题。我有这个：

```
<div id="box">
        SAMPLE TEXT TO DISPLAY IN BOX!
</div> 
```

此框的 css 位于外部工作表中（正确链接到 html 页面）：

```
#box {
border-radius: 28px; 
-moz-border-radius: 28px; 
-webkit-border-radius: 28px; 
border: 5px solid #3B5998;
} 
```

当我尝试在我的页面中使用代码时，它不起作用！知道为什么吗？如果问题太简单，再次抱歉:)

编辑：我在另一个中心的 div 中使用的框。这是它的使用方式：

```
<div id="center">
    <div id="box">
        Hdadjlsd
    </div>
</div> 
```

这是中心的CSS：

```
#center { 
margin-right:200px;
background-color:white; 
min-height:700px; /* for modern browsers */
height:auto !important; /* for modern browsers */
height:700px; /* for IE5.x and IE6 */
} 
```

在这个标签之外它可以工作。

编辑：屏幕截图显示了 chrome 突出显示的问题。检查元素时，它显示了红色框现在的位置![在此处输入图像描述](../Images/ddbdfa9c7163cc482fcfe06b34476e07.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T06:47:27.453

将此代码复制粘贴到您的 html 中，检查其是否正常工作。我确定如果您使用 chrome 会这样做 :)，如果它有效，则将 css 输入到您的 html 中并运行它。

```
 <html>
  <head>
  <style type="text/css"> 
   div
 {
 border:2px solid #a1a1a1;
 padding:10px 40px; 
 background:#dddddd;
 width:300px;
 border-radius:25px;
 }
 </style>
 </head>
 <body>
 <div>The border-radius property allows you to add rounded corners to elements.</div> 
 </body>
  </html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T06:43:19.777

您是否**尝试过在页面中包含 css**？一般趋势是在页面内部使用此类 CSS，而不是作为外部链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T06:52:35.547

您可以使用这些代码；

```
-moz-box-shadow: 2px 2px 7px #000000;
-webkit-box-shadow: 2px 2px 7px #000000;
 box-shadow: 2px 2px 7px #000000;
-moz-border-radius-topleft: 28px;
-moz-border-radius-topright:28px;
-moz-border-radius-bottomleft:28px;
-moz-border-radius-bottomright:28px;
-webkit-border-top-left-radius:28px;
-webkit-border-top-right-radius:28px;
-webkit-border-bottom-left-radius:28px;
-webkit-border-bottom-right-radius:28px;
border-top-left-radius:28px;
border-top-right-radius:28px;
border-bottom-left-radius:28px;
border-bottom-right-radius:28px; 
```

[您可以在此处](http://www.css3maker.com)查看您的 CSS 代码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T06:55:25.670

...................... 给`border-radius` 你的`#center`id div

像这样

```
 #center { 
      border-radius:28px 28px 0 0;
-webkit-border-radius:28px 28px 0 0;
-moz-border-radius:28px 28px 0 0;
    } 
```

***[演示](http://tinkerbin.com/vc455m4s)***

# sql-server-2008 - 从 Sql Server 2005 升级到 Sql Server 2008 R2 后查询运行缓慢

> ID：12471625
> 
> 赞同：1
> 
> 时间：2012-09-18T06:40:58.267
> 
> 标签：sql-server-2008, tsql

在最近的 Sql server 从 Sql server 2005 升级到 2008 r2 后，我看到了奇怪的行为。在升级之前，下面的查询在亚秒内运行，但现在升级后需要 10 秒。两个表都有数百万行..

模型表中的可空列 colB 上有索引。下面的查询显然是在进行索引扫描，因为在 Join 子句中使用了标量函数 isnull..

```
 select distinct a.colA
             from ptransaction a
             inner join model b on ISNULL(b.colB,0) = a.colB
             where a.transid = 234 
```

我没有任何升级前计划信息，但此查询从未运行超过 1 秒。所以不确定 Sql server 2008 中的优化器行为是否发生了变化，导致其运行缓慢。

我知道替代解决方案，但不想匆忙修改架构。我知道我可以将模型中的 colB 转换为 notnull 来解决这个问题。其他解决方案是创建可以解决此问题的索引计算列。我们环境中的架构更改并不容易，所以想探索这里的 Sql 大师是否有一些想法或其他不需要架构更改的解决方案。我仍然无法理解优化器或整体 sql server 升级如何使这个查询变得更糟。任何帮助表示赞赏。

新泽西州

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T07:27:56.290

以我的经验，如果有很多记录 ISNULL 会减慢查询速度。

试试这段代码，结果是一样的，但我倾向于得到最好的性能：

```
(b.colB is not null and b.colB = a.colB ) OR (b.colB is null and a.colB = 0) 
```

# java - 如何创建包含共享库（.so）的 JAR 文件

> ID：12471628
> 
> 赞同：0
> 
> 时间：2012-09-18T06:41:20.110
> 
> 标签：java, android, jar, java-native-interface

对于我的一个项目，我需要将本机 c 代码调用到我的`java class`. 为此，我做了以下步骤。

1.  在我的 java 类中，我声明了我的项目所需的一些本机方法。IE

    ```
    public native String print(String pM,int len);

    public native int openPrint(); 
    ```

2.  我启动了如下库文件

    ```
    static
    {
        System.loadLibrary("print");
    } 
    ```

3.  在此之后，我创建了关于 java 代码的头文件。

4.  创建c文件并在c中实现上述方法

5.  在此之后我生成了库文件，即`libprint.so`使用`ndk-build`

6.  库文件创建成功`libs->armeabi->libprint.so`

7.  每当我运行该 java 应用程序时，它都会给出错误提示

    ```
    Exception in thread "main" java.lang.UnsatisfiedLinkError: 
      no print in java.library.path 
    ```

我该如何解决这个问题。？

我想将这种应用程序提供给其他 Android 开发人员，以便他们可以在不进行 Native 调用且不创建`libprint.so`文件的情况下创建此应用程序

这意味着我必须将自己的 API 提供给应用程序开发人员。为此，我必须创建 JAR 文件。其中包括`java.class`，`libprint.so`（共享库）等...

如何创建 JAR 文件，其中`libprint.so`还包括..

我正在使用 Eclipse 和 open-jdk6 在 ubuntu 中完成上述所有工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T07:35:48.403

在 Windows 中，如果 jar 使用 dll，则必须将 dll 复制到 jar 内的根文件夹中。之后程序会找到它。

试试看，也许对你有帮助。

# google-chrome - <'WebDriver'>.switchTo().frame(<'frameId'>) 不适用于 Chrome 驱动程序

> ID：12471629
> 
> 赞同：9
> 
> 时间：2012-09-18T06:41:31.813
> 
> 标签：google-chrome, iframe, selenium, webdriver

需要访问模态 iframe 中的元素。

下面的代码对于 FireFox 驱动程序非常有效，而对于 Chrome 则失败 -

```
String frameId = null;
List<WebElement> frameSet = driver.findElements(By.tagName("iframe"));  
for (WebElement frameName : frameSet){  
    if(!(frameName.getAttribute("id").isEmpty()) && (frameName.getAttribute("id").contains("DlgFrame"))){
            frameId = frameName.getAttribute("id");
        }
}

try {
    Thread.sleep(10000);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
    e.printStackTrace();
    }

Logger.info("Switch to Frame - "+frameId);
driver.switchTo().frame(driver.findElement(By.id(frameId))); 
```

Chrome 驱动是否支持 switchTo.frame(<'frameId'>)？

使用 Chrome 驱动程序时出错 -

> org.openqa.selenium.WebDriverException：未知命令。选项：ActivateTab、CaptureEntirePage、CloseTab、DeleteCookie、...
> 
> 命令持续时间或超时：220 毫秒构建信息：版本：'2.25.0'，修订：'17482'，时间：'2012-07-18 22:18:01' 系统信息：os.name：'Windows 7'， os.arch: 'amd64', os.version: '6.1', java.version: '1.7.0_05' 驱动程序信息: driver.version: RemoteWebDriver 会话 ID: cbde65cb0394ee0434b3bb528918ce40 at org.openqa.selenium.remote.ErrorHandler.createThrowable( ErrorHandler.java:188) 在 org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:145) 在 org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:498) 在 org.openqa.selenium .remote.RemoteWebElement.execute(RemoteWebElement.java:244) 在 org.openqa.selenium.remote.RemoteWebElement.sendKeys(RemoteWebElement.java:87) 在 com.shn.services.Office365。sharePointUploadFile(Office365.java:173) at com.shn.test.RunOffice365Test.testSharePointUploadAndDeleteFile(RunOffice365Test.java:55) at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:74) at org.apache .maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:92) 在 org.apache.maven.surefire.Surefire.run(Surefire.java:180) 在 org.apache.maven.surefire.booter.SurefireBooter.runSuitesInProcess (SurefireBooter.java:350) 在 org.apache.maven.surefire.booter.SurefireBooter.main(SurefireBooter.java:1021)在 org.apache.maven.surefire.booter.SurefireBooter.runSuitesInProcess(SurefireBooter.java:350) 在 org.apache.maven.surefire.Surefire.run(Surefire.java:180) 在 org 执行(TestNGXmlTestSuite.java:92) .apache.maven.surefire.booter.SurefireBooter.main(SurefireBooter.java:1021)在 org.apache.maven.surefire.booter.SurefireBooter.runSuitesInProcess(SurefireBooter.java:350) 在 org.apache.maven.surefire.Surefire.run(Surefire.java:180) 在 org 执行(TestNGXmlTestSuite.java:92) .apache.maven.surefire.booter.SurefireBooter.main(SurefireBooter.java:1021)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-18T06:59:05.610

ChromeDriver 支持 switchTo，因为它实现了 WebDriver 接口。这对我来说可以。

你必须这样做：

```
driver.switchTo().frame(driver.findElement(By.id("frameId")));
//do your stuff
driver.switchTo().defaultContent(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T16:13:07.927

问题既不是 chromeDriver 也不是 selenium。两者都在最新版本上运行。

chromeDriver - 23.0.1240.0

硒 - 2.25.0

问题出在 Chrome 浏览器上。

我的浏览器在版本上运行。12.0.742.112。自动更新失败的原因是 -

> 更新服务器不可用（错误：7）

我必须卸载并重新安装浏览器才能将其更新到最新版本。21.0.1180.89 米。

现在问题已解决，我可以在帧之间切换。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-10-18T18:53:36.933

我不知道这是否会帮助任何人，但我在轮询框架时遇到了类似的问题，这就是我的解决方案。

切换到 DefaultContent()：

```
_driver.SwitchTo().DefaultContent(); 
```

获取帧：

```
IWebElement iFrames = _driver.FindElements(By.XPath("//iframe")); 
```

轮询帧，但只有在“Displayed”为真时才切换到它：

```
foreach (var frame in iFrames)
{
    if (!frame.Displayed)
        continue;

    _driver.SwitchTo().Frame(frame);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-21T08:27:00.260

看起来问题不在 iframe 中。错误列表包括`org.openqa.selenium.remote.RemoteWebElement.sendKeys(RemoteWebElement.java:87) at`. 所以我假设你的代码的另一部分导致 app. 失败。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-04T12:10:35.933

这是我为所有浏览器切换到框架的实现，因为按 Id 或名称切换到框架不适用于 Chrome（最新版本）

*   使用 Xpath（更优雅/可读的代码）：

```
/**
 * This switch to frame method improves standard way to switching to frame
 * ( driver.switchTo().{@linkplain org.openqa.selenium.WebDriver.TargetLocator#frame(String) frame(String nameOrId)} )
 * because Chrome browser has problem with this method.   <br/>
 *
 * Bug: http://code.google.com/p/chromedriver/issues/detail?id=107
 * @param frameIdOrName the id or name of the &lt;frame&gt; or &lt;iframe&gt; element
 * @return This driver focused on the given frame.
 */
public WebDriver switchToFrameByIdOrName(String frameNameOrId) {
    if (driver instanceof ChromeDriver) {
        String frameElementXpath = String.format("//frame[@name='%1$s' or @id='%1$s']", frameNameOrId);
        WebElement f = driver.findElement(By.xpath(frameElementXpath));
        return driver.switchTo().frame(f);
    }
    return driver.switchTo().frame(frameNameOrId);
} 
```

或者

*   使用 CSS 选择器（因为 CSS 选择器应该是查找元素的更快方法。有关更多信息，请参阅[选择 WebDriver 定位器](http://darrellgrainger.blogspot.sk/2011/12/selecting-webdriver-locators.html)：

```
public WebDriver switchToFrameByIdOrName(String frameIdOrName) {
    if (!(driver instanceof ChromeDriver)) {
        return driver.switchTo().frame(frameIdOrName);
    }
    WebElement frame = null;
    try {
        frame = driver.findElement(By.cssSelector("frame[id='" + frameIdOrName + "']"));
    } catch (NoSuchElementException e) { /* It's ok for the moment */  }

    if (frame == null) {
        try {
            frame = driver.findElement(By.cssSelector("frame[name='" + frameIdOrName + "']"));
        } catch (NoSuchElementException e) {
            log.severe(String.format("CORE > switchToFrameByIdOrName() error: Frame with name or id '%s' not found.", frameIdOrName));
        }
    }
    return driver.switchTo().frame(element);
} 
```

我正在使用：

```
Selenium 2.37.1
Session info: chrome=31.0.1650.57)
Driver info: chromedriver=2.7.236900,platform=Windows NT 6.1 SP1 x86_64 
```

# java - 如何在jsp中保持变量不变？

> ID：12471631
> 
> 赞同：0
> 
> 时间：2012-09-18T06:41:38.453
> 
> 标签：java, jsp

我在jsp中有以下代码片段：

```
String Key=null;

if(request.getParameter("project")!=null) { 
        Key = request.getParameter("project").trim();
}

if (AM == null) {
        response.sendRedirect("../portal/login.jsp?from=index.jsp");
} 
```

在这里重定向后，变量 Key 发生了变化。重定向后如何保持此变量不变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T07:32:08.787

您可以在会话参数中使用密钥，否则您可以像这样使用

```
String Key=null;

    if(request.getParameter("project")!=null){ 
        Key=request.getParameter("project").trim();
     }

if (AM == null) {
        response.sendRedirect("../portal/login.jsp?from=index.jsp&project="+Key);
    } 
```

在会话中使用密钥更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T06:56:21.970

您不能在每个页面重定向的变量中保留值，因为 WEB 是无状态的。所以你需要使用会话

[http://www.jsptut.com/sessions.jsp](http://www.jsptut.com/sessions.jsp)

# web-services - 如何将 Web 服务添加到 Netty-Server？

> ID：12471633
> 
> 赞同：2
> 
> 时间：2012-09-18T06:41:51.053
> 
> 标签：web-services, jax-ws, netty

我开发了一个基于低级 tcp/ip 协议的 netty 服务器。现在这个服务器应该也处理 Web 服务调用 (jax-ws)。有谁知道从这里去哪里？

我已经阅读了几乎所有关于 netty+ws 的帖子，但我不得不承认所提供的信息对我来说还不够清楚。

干杯，马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T21:11:04.087

我想看看[Apache CXF](http://cxf.apache.org/)，特别是因为他们使用 Netty 作为本地 I/O 提供者，我想。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T00:50:16.740

Restlet 支持 Netty： [http ://www.restlet.org/documentation/2.0/jse/ext/org/restlet/ext/netty/package-summary.html](http://www.restlet.org/documentation/2.0/jse/ext/org/restlet/ext/netty/package-summary.html)

您还可以使用 Xitrum，它具有类似于 JAX-RS 的功能：http: [//ngocdaothanh.github.com/xitrum/](http://ngocdaothanh.github.com/xitrum/)

# spring - 如果未找到特定服务，则使用模拟对象

> ID：12471637
> 
> 赞同：1
> 
> 时间：2012-09-18T06:42:05.863
> 
> 标签：spring, easymock

在我们的单元测试中，我们通常将所有依赖项配置为 EasyMocks...并配置它们...在 spring 上下文 xml 文件中，我们需要像这样添加这些依赖项 -

```
<bean id="myService" class="mypackage.EasyMockNiceCreator">
        <property name="iface"
                  value="myservicePackage.MyService"/>
</bean> 
```

其中 EasyMockNiceCreator 是 Spring FactoryBean 的一个实现，它在 getObject() 方法中创建一个 EasyMock.createNiceMock()。

我怎样才能使它成为默认配置，以便spring在找不到明确定义的自动装配依赖项时使用此配置，即后备。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T10:31:10.207

我认为这段代码会有所帮助 -

**自动 bean 创建器**

```
import com.google.common.collect.Iterables;
import org.springframework.beans.BeansException;
import org.springframework.beans.MutablePropertyValues;
import org.springframework.beans.PropertyValue;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.config.BeanDefinition;
import org.springframework.beans.factory.config.ConfigurableListableBeanFactory;
import org.springframework.beans.factory.support.BeanDefinitionRegistry;
import org.springframework.beans.factory.support.BeanDefinitionRegistryPostProcessor;
import org.springframework.beans.factory.support.RootBeanDefinition;

import java.lang.reflect.Field;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collection;
import java.util.List;
import java.util.logging.Level;
import java.util.logging.Logger;

public class AutoBeanDeclarer implements BeanDefinitionRegistryPostProcessor {

    private Collection<String> mockedDefinitions;

    public AutoBeanDeclarer() {
        mockedDefinitions = new ArrayList<String>();
    }

    private Iterable<Field> findAllAutoWired(Class targetBean) {
        List<Field> declaredFields = Arrays.asList(targetBean.getDeclaredFields());
        return Iterables.filter(declaredFields, new Predicate<Field>() {
            @Override
            public boolean apply(Field input) {
                return input.isAnnotationPresent(Autowired.class);
            }
        });
    }

    private void registerOn(final BeanDefinitionRegistry registry,final String beanName, final Class type){
        RootBeanDefinition definition = new RootBeanDefinition(MocksFactory.class);

        MutablePropertyValues values = new MutablePropertyValues();
        values.addPropertyValue(new PropertyValue("type", type));
        definition.setPropertyValues(values);

        registry.registerBeanDefinition(beanName, definition);
    }

    @Override
    public void postProcessBeanDefinitionRegistry(BeanDefinitionRegistry registry) throws BeansException {
        for(String beanName: registry.getBeanDefinitionNames()) {
            BeanDefinition beanDefinition = registry.getBeanDefinition(beanName);
            String beanClassName = beanDefinition.getBeanClassName();
            try {
                Class beanClass = Class.forName(beanClassName);
                for (final Field field : findAllAutoWired(beanClass)) {
                    String fieldName = field.getName();
                    boolean invalidType = field.getType().isArray() || field.getType().isPrimitive();
                    if( invalidType ) {
                        continue;
                    }
                    if( !registry.isBeanNameInUse(fieldName) ) {
                        registerOn(registry, fieldName, field.getType());
                        mockedDefinitions.add(fieldName);
                        // Now field will be available for autowiring.
                    }
                }
            } catch (ClassNotFoundException ex) {
                Logger.getLogger(AutoBeanDeclarer.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
    }

    @Override
    public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) throws BeansException {
        for(String beanName: mockedDefinitions) {
            if( !beanFactory.containsBean(beanName) ) {
                Logger.getLogger(AutoBeanDeclarer.class.getName()).log(Level.SEVERE, "Missing definition %s", beanName);
            }
        }
    }
} 
```

**模拟工厂类**

```
import org.mockito.Mockito;
import org.springframework.beans.factory.FactoryBean;

public class MocksFactory implements FactoryBean {

    private Class type;// the created object type

    public void setType(final Class type) {
        this.type = type;
    }

    @Override
    public Object getObject() throws Exception {
        return Mockito.mock(type);
    }

    @Override
    public Class getObjectType() {
        return type;
    }

    @Override
    public boolean isSingleton() {
        return true;
    }
} 
```

**上下文.xml**

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

    <bean id="autoConfigurer" class="....AutoBeanFinder"></bean>

    <bean id="targetClass" class="....Target"></bean>

</beans> 
```

> 在 Target 类中自动装配的所有服务都将被模拟。

# objective-c - 合适的视图按钮动作

> ID：12471641
> 
> 赞同：1
> 
> 时间：2012-09-18T06:42:29.640
> 
> 标签：objective-c, ios, uitableview

在我的表格视图中，我在每个单元格中都有一个按钮

```
UIButton *editButton = [UIButton buttonWithType:UIButtonTypeCustom];
editButton.frame = CGRectMake(281,0, 20, 50);
UIImage *editButtonImage = [UIImage imageNamed:@"edit.png"];
[editButton setImage:editButtonImage forState:UIControlStateNormal];
[editButton setBackgroundColor:[UIColor clearColor]];
[editButton setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
[editButton addTarget:self action:@selector(editButtonAction:) forControlEvents:UIControlEventTouchUpInside];
[cell.contentView addSubview:editButton]; 
```

按钮动作是这个

```
-(IBAction)editButtonAction:(id)sender{
     UIButton *btn = (UIButton*) sender;
     UITableViewCell *cell = (UITableViewCell*) btn.superview.superview;
     NSIndexPath *indexPath =[self.table indexPathForCell:cell]; 
     int row = indexPath.row;
     NSLog(@"Selected row is: %d",row);
} 
```

当我在表格视图中单击按钮时，**所选行**总是给出 0 知道吗？和任何代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T06:48:33.967

替代解决方案：

```
.
.
editButton.tag = indexPath.row;
[editButton setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
[editButton addTarget:self action:@selector(editButtonAction:) forControlEvents:UIControlEventTouchUpInside];
.
.

-(IBAction)editButtonAction:(id)sender{
UIButton *btn = (UIButton*) sender;
NSLog(@"Selected row is: %d",btn.tag);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T06:51:56.217

您创建按钮分配

将按钮标签设置为 tableView 单元格的索引。

```
[editButton setTag:indexPath.row]; 
```

在按钮

```
-(IBAction)editButtonAction:(id)sender
{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:[sender tag] inSection:0]];

    NSLog(@"Selected Cell is: %@",cell);
    NSLog(@"Selected row is: %d",[sender tag]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T06:52:43.890

在这个方法中..

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

添加这一行：

```
 button.tag = indexPath.row; 
```

在这个按钮动作中，

```
 -(IBAction)editButtonAction:(id)sender 
```

添加这一行：

```
int row = [sender tag]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T07:18:30.920

实际上代码工作正常..您选择哪一行进行测试？是 0 吗？尝试记录行和部分。

还要检查连接的表的插座？以及该插座的参考是否在任何地方发生了变化

否则代码对我来说运行良好

```
 NSLog(@"Row: %d\n ,Section :%d",indexPath.row,indexPath.section);; 
```

# jquery - 根据单元格中的值选择表格单元格

> ID：12471642
> 
> 赞同：0
> 
> 时间：2012-09-18T06:42:34.213
> 
> 标签：jquery

我有一个表格，如[http://jsfiddle.net/Lijo/UqdQp/4/](http://jsfiddle.net/Lijo/UqdQp/4/)所示。我需要将所有值为“1”的列的背景颜色设置为红色。使用 jQuery 执行此操作的最佳方式（就性能而言）是什么？

注意：做背景色后，我还需要提醒表格单元格的值。这意味着我需要在所选单元格上使用“this”运算符。

**参考答案：**

1.  [http://jsfiddle.net/Lijo/uGKHB/11/](http://jsfiddle.net/Lijo/uGKHB/11/)
2.  [http://jsfiddle.net/Lijo/uGKHB/12/](http://jsfiddle.net/Lijo/uGKHB/12/)
3.  [当表包含跨列单元格时使用 jQuery 查找列索引](https://stackoverflow.com/questions/1166452/finding-column-index-using-jquery-when-table-contains-column-spanning-cells)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T06:49:20.450

我已经使用`each`jQuery 的功能来遍历每个表格单元格，并在匹配所需条件时突出显示该单元格。
工作演示：http: [//jsfiddle.net/saji89/uGKHB/](http://jsfiddle.net/saji89/uGKHB/)

```
$('.resultGridTable td').each(function()
{
    if($(this).html()==1)
    {
        $(this).css({'background':'#FF0000'});
    }        
}); 
```

使用`contains`选择器而不是`if`条件，应该更快：http: [//jsfiddle.net/saji89/WbXTr/](http://jsfiddle.net/saji89/WbXTr/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T06:55:06.637

```
var $tds = $("td").filter(function(i){
    return $(this).html() == 1;
});

$tds.css({ background: 'red' });

$.each($tds, function(i, x){
    console.log($(x).html());
}); 
```

出于显而易见的原因，我使用了 console.log 而不是 alert。

# oracle - 获取免费/已用表空间报告的最佳方法是什么

> ID：12471645
> 
> 赞同：0
> 
> 时间：2012-09-18T06:42:45.320
> 
> 标签：oracle, oracle10g, oracle11g

请向我咨询 - 获取我们数据库 (Oracle) 中可用/已用表空间报告的最佳方法是什么 - (表空间名称、可用 MB、已用 MB)

可能是 Oracle 有一些我想要的实用程序提供报告吗？或者如果没有，请咨询/建议其他方法。

带着敬意！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T07:38:12.237

`sysdba`以用户（或具有`DBA`or 角色的用户）身份在 SQL*Plus 中运行以下代码`SELECT ANY DICTIONARY`。最好将其保存为 SQL 文件（例如`fs.sql`）并使用`@fs`

它将报告每个表空间的有用信息，包括大小、可用 Mb %free 等

```
COLUMN ts_name   FORMAT A25       HEADING "Tablespace"
COLUMN ts_size   FORMAT 999,999.9 HEADING "Size mb"
COLUMN ts_free   FORMAT 999,999.9 HEADING "Free Mb"
COLUMN pct_free  FORMAT 999.99    HEADING "% free"
COLUMN max_size  FORMAT 999,999.9 HEADING "Max Mb"
COLUMN frags     FORMAT 99,999    HEADING "Frags"
COLUMN largest   FORMAT 9,999.99  HEADING "Largest"
COLUMN smallest  FORMAT 9,999.99  HEADING "Smallest"
COLUMN average   FORMAT 9,999.99  HEADING "Average"
COLUMN dfiles    FORMAT 999       HEADING "DFs"
COLUMN ts_type   FORMAT A4        HEADING "Type"
COLUMN ex        FORMAT A2        HEADING "Ex"
COLUMN status    FORMAT A7        HEADING "Status"
COLUMN big       FORMAT A3        HEADING "Big"

SET PAGESIZE 9999
SET NULL 0

SELECT  SUBSTR(t.tablespace_name, 1, 25) AS ts_name,
    ts.ts_size,
    CASE WHEN(t.contents = 'TEMPORARY') THEN
        ts.ts_size - NVL(te.free_space, 0)
    ELSE
        NVL(te.free_space, 0)
    END AS ts_free,
    CASE WHEN(t.contents = 'TEMPORARY') THEN
        100-(100*NVL(te.free_space, 0)/ts_size)
    ELSE
        100*NVL(te.free_space, 0)/ts_size
    END AS pct_free,
    ts.max_size,
    NVL(te.fragments, 0) AS frags,
    NVL(te.largest, 0) AS largest,
    NVL(te.smallest, 0) AS smallest,
    NVL(te.average, 0) AS average,
    ts.dfiles,
    SUBSTR(t.contents, 1, 4) AS ts_type,
    SUBSTR(t.extent_management,1 ,1) AS ex,
    t.status,
    DECODE(t.bigfile, 'NO', 'No', 'Yes') AS big
FROM
    dba_tablespaces t
LEFT
JOIN   (SELECT  tablespace_name,
        SUM(bytes)/1024/1024 AS ts_size,
        COUNT(bytes) AS dfiles,
        SUM(DECODE(maxbytes, 0, bytes, maxbytes))/1024/1024 AS max_size
    FROM
        dba_data_files
    GROUP
    BY  tablespace_name
    UNION
    SELECT  tablespace_name,
        SUM(bytes)/1024/1024 AS ts_size,
        COUNT(bytes) AS dfiles,
        SUM(DECODE(maxbytes, 0, bytes, maxbytes))/1024/1024 AS max_size
    FROM
        dba_temp_files
    GROUP
    BY  tablespace_name
       ) ts ON t.tablespace_name = ts.tablespace_name
LEFT
JOIN   (SELECT  tablespace_name,
        MAX(bytes)/1024/1024 AS largest,
        MIN(bytes)/1024/1024 AS smallest,
        COUNT(bytes) AS fragments,
        SUM(bytes)/1024/1024 AS free_space,
        ROUND(AVG(bytes))/1024/1024 AS average
    FROM
        dba_free_space
    GROUP
    BY  tablespace_name
    UNION
    SELECT  tu.tablespace,
        0 AS largest,
        0 AS smallest,
        0 AS fragments,
        SUM(tu.blocks * ts.block_size)/1048576 AS free_space,
        0 AS average
    FROM
        v$tempseg_usage tu
    LEFT
    JOIN    dba_tablespaces ts ON tu.tablespace = ts.tablespace_name
    GROUP
    BY  tu.tablespace   
       ) te ON t.tablespace_name = te.tablespace_name
ORDER
BY  t.tablespace_name
/ 
```

它适用于 10g 和 11g。

# java - 在 Hadoop 中使用 DBOutputFormat

> ID：12471648
> 
> 赞同：1
> 
> 时间：2012-09-18T06:43:03.693
> 
> 标签：java, mysql, hadoop, bigdata, sqoop

当使用带有hadoop的**DBOutputFormat**时，说最终的结果是去MySql数据库。每次必须写入结果时，Hadoop 会创建单独的连接吗？（DB 是否会承受**太多打开的连接**）。我没有使用这种格式，所以任何关于相同的建议都是可以接受的。它会比**Sqoop**有优势吗？Sqoop 也可用于将输出文件导出到数据库。请分享您的观点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T23:10:32.583

这是我从 Cloudera找到[这篇博文的解释：](http://www.cloudera.com/blog/2009/03/database-access-with-hadoop/)

> DBOutputFormat 通过在每个 reducer 中生成一组 INSERT 语句来写入数据库。reducer 的 close() 方法然后在批量事务中执行它们。同时从几个reduce任务中执行大量这些可能会淹没数据库。如果要导出大量数据，最好将 INSERT 语句生成文本文件，然后使用数据库提供的批量数据导入工具进行数据库导入。

所以看起来每个reducer只会打开一个连接，所以数据库可能不会有太多打开的连接，但它仍然可能导致性能问题。我不确定，但 Sqoop 可能稍微更有效和更健壮。

# uipopovercontroller - 发生方向更改时出现 Ti.UI.iPad.createPopover 大小问题

> ID：12471650
> 
> 赞同：0
> 
> 时间：2012-09-18T06:43:05.037
> 
> 标签：uipopovercontroller, titanium-mobile, appcelerator-mobile, orientation-changes

伙计们，我在“方向更改”上遇到“如何调整大小”弹出框的问题。请拿[Demo source-code](http://support.appcelerator.com/tickets/APP-186174/tickets)。

执行以下步骤以重新生成问题：

*   下载随附的源代码，打开并运行它。:)

    => 你会看到一个白色的窗口，在窗口的顶部中间只有一个未命名的按钮。

*   点击按钮。

    => 它将从按钮打开 Popover 控件。它包含一个空白的 Tableview。

*   从纵向 <-> 横向更改 iPad 方向。

    => 检查方向改变时，弹出框大小正在改变，但内部内容（表格视图）的大小没有改变。所以，它会在 Tableview 周围留下蓝色的空白部分。

请让我知道是否有任何方法可以治疗 Popovers 并赢得他们的心。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:34:23.903

我建议，而不是更改弹出框的大小，更改表格的高度和宽度，并使用简单的辅助函数使弹出框调整大小（像这样：）

```
function resizepopover () {
    popover.height = popover.children[0].height;
    popover.width = popover.children[0].width   
    Ti.API.info("Popover Width: " + popover.width)
    Ti.API.info("Table Width:" + table.width)
    Ti.API.info("Popover height: " + popover.height)
    Ti.API.info("Table height:" + table.height) 
} 
```

我注意到的一件事是，您在事件侦听器中创建了表和弹出框，这意味着每次单击标签时，都会创建一个新的 Popover 实例和一个新的表实例（尽管它应该被垃圾收集，因为您覆盖了它每次，并且不应该再引用旧的）但我会避免它

并在事件监听器之外创建弹出框和表格。而它的点击事件功能，你可以只调用`show`弹出框的方法和`resizepopover`方法。

```
var     popover = Ti.UI.iPad.createPopover({
        title : 'Search',
        arrowDirection : Ti.UI.iPad.POPOVER_ARROW_DIRECTION_UP,
        backgroundColor : 'white',
        layout: 'horizontal',
        height:"auto",
        width:"auto"
});
    var table = Titanium.UI.createTableView({
        top: 0,
        left: 0,
        right: 0,
        bottom: 0,
        height:900,
        width:700
    });
    popover.add(table);

label1.addEventListener('click', function (e) {
    popover.show({
        view : label1,
        animated : true
    });
    resizepopover();

}); 
```

在手势事件监听器中设置表格宽度而不是弹出框宽度

```
[...]
    if(root.ui.isPortrait || root.ui.isLandscape) {

        if(root.ui.isPortrait) {
            table.width = 600;

            table.height = 800;

            Ti.API.info('Portrait');
        } else {
            table.width = 800;
            table.height = 600;
            Ti.API.info('Landscape');

        }

        resizepopover();

    }
[...] 
```

这是**一种**可能的方式，

[我在Dropbox](http://dl.dropbox.com/u/73856843/Resources.zip)上添加了 Resources.zip

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T06:16:38.807

Titanium 已为此问题创建票证，这是他们的内部错误。

[购票链接](https://jira.appcelerator.org/browse/TIMOB-11004)

# apache - 跨域http中继服务器？

> ID：12471652
> 
> 赞同：0
> 
> 时间：2012-09-18T06:43:30.430
> 
> 标签：apache, http, vpn

我在 NAT 后面有一个 HTTP 服务器（A），另一个服务器（B）作为中继节点，还有一个带有浏览器的随机设备（C）。

要在 A 和 B 之间进行通信，将有一个 VPN。

C是一个随机设备（可能是IPAD、Win、Linux...），所以我们这里不想使用VPN。

这是结构：

A（VPN 10.0.0.200）<----->（VPN 10.0.0.1）B（WAN 220.220.220.220）<--------->（WAN 140.140.140.140）C

场景可能如下：

在IE上输入“220.220.220.220:9999”，B将9999的传入数据分配并中继到10.0.0.200:80（C），C通过相同的路径回复，然后我们可以在任何地方用任何设备浏览A。

这种情况是否可能，我应该如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:00:13.633

据我了解，您（C）希望将 A 和 B 与 vpn 连接并向 A 发出请求，如果是这种情况，A 应将此请求转发给 B 并将结果返回给您（C），

你可以在 A 上使用 squid，因为 A 有两个 IP 地址，当你向 aaaa 发出请求时，它会使用 bbbx 并与 bbbb 对话

```
C (c.c.c.c) --> (a.a.a.a) A (b.b.b.x)(some ip with B's lan) <----VPN-----> B (b.b.b.b) 
```

# android - EditText 失去焦点

> ID：12471655
> 
> 赞同：3
> 
> 时间：2012-09-18T06:43:57.417
> 
> 标签：android, android-layout, android-edittext

我在 ScrollView 小部件中有两个 EditText 小部件。整体结构为：

*   线性布局
    *   滚动视图
        *   相对布局
            *   编辑文本
            *   编辑文本

我`OnFocusChangeListener`在两个 EditText 组件上都有，我说如果该组件具有焦点，则从另一个组件*中删除焦点并**请求*该组件的焦点

问题是，当我在第一个 EditText 中开始编写文本然后按回车键或触摸另一个 EditText 时，焦点会回到第一个 EditText 并继续在那里。这只会发生一次，并且在刷新活动之前永远不会再次发生。

PS 仅当焦点从第一个 EditText 更改为第二个时才会发生这种情况，但如果我从第二个变为第一个，它会正常工作

可以做些什么来摆脱这个小错误

我想我找到了问题所在。我还有一个 onKeyboardOut 监听器，在键盘弹出之前我先移除焦点，然后再将其设置回来，这导致了一个奇怪的问题

# windows-installer - ClickOnce 安装程序 .exe 到 MSI 转换器

> ID：12471659
> 
> 赞同：1
> 
> 时间：2012-09-18T06:44:22.657
> 
> 标签：windows-installer, clickonce, exe

我有一个[ClickOnce](http://en.wikipedia.org/wiki/ClickOnce)部署包 (.exe)。如果我将此 EXE 文件转换为[MSI](http://en.wikipedia.org/wiki/Windows_Installer)，是否会影响 ClickOnce 部署功能，如自动更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T06:56:44.873

如果我正确理解[文档](http://msdn.microsoft.com/en-us/library/bb384248.aspx)，部署包用于将部署安装到执行实际 ClickOnce 安装的中心位置。

例如，当您的客户不允许您远程发布 ClickOnce 应用程序和更新时，您可以向他发送一个部署包，他执行该部署包以将部署复制到他选择的位置。从那里他将照常执行 ClickOnce 安装。

将较新的版本放到该位置会导致已安装的客户端像往常一样执行更新。

当通过 VS2010 远程部署失败时，我们有时会这样做：`C:\Temp`例如，我们部署到然后将文件和子文件夹发送给客户，让他将它们复制到该位置。只有我们发送一个 ZIP 文件，而您正在创建一个自动执行操作的安装程序。

# jquery - Jquery 使用 Append() 或 html() 或 text() 移动 SelectBox

> ID：12471663
> 
> 赞同：0
> 
> 时间：2012-09-18T06:44:30.973
> 
> 标签：jquery, html, text, append, drop-down-menu

我在隐藏的 div 下有一个选择框，我做了一个功能，当我在某个地方单击时，选择框会出现正确的选项，但渲染效果不佳，控件无法正常工作，这是代码：

```
$(function () {
    $('.NewDiv').click(function () {
        $(this).append($('#MySelectBox'));
        $('#MySelectBox').val($(this).attr('value'));
    });
});

<select id="MySelectBox>
    <option...
</select> 
```

我尝试了 append、html 和 text，它们都呈现了选择框，但在 Chrome 和 Firefox 上证明它不能正常工作。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T07:09:10.953

您看到此问题的原因是您将事件绑定到 div，即现在包含选择框的 div。因此，当您选择一个选项时，它会将选项更改为“0”，因为它没有读取任何值。

[此示例](http://jsfiddle.net/hghNJ/)解决了您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T06:49:24.567

我看到的一个问题是您当前的代码将`select`放入`div`，因此任何单击事件`select`都会导致操作重复。

破碎的例子：http: [//jsfiddle.net/XnWyY/](http://jsfiddle.net/XnWyY/)

也许这就是您正在寻找的（点击后移动`select`，`div`追加新`option`）：http: [//jsfiddle.net/XnWyY/1/](http://jsfiddle.net/XnWyY/1/)

或点击显示，追加新的：http `option`: [//jsfiddle.net/XnWyY/2/](http://jsfiddle.net/XnWyY/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T06:49:00.900

用下面的代码改变你的行。

```
$(this).append($('#MySelectBox').html()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T07:13:43.323

隐藏 div 可能更简单，然后在单击触发器后显示（）它。相关代码在[http://jsfiddle.net/L67LT/1/](http://jsfiddle.net/L67LT/1/)

```
$('#MySelectBox').hide();
var externalValue="Fighter";
$(function () {
    $('#newDiv').click(function () {
        console.log("clicked!");
        var box = $('#MySelectBox');
        box.show(); box.val(externalValue);
    });
}); 
```

另请注意，使用`$(this).attr('value')`失败（在这种情况下，它是对`newDiv`div 的引用，它没有名为 的属性`value`）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-18T07:23:27.870

抱歉，我想我误解了现在修复代码的问题：

```
$('#newDiv').click(function () {
    $(this).append($('#MySelectBox'));
    $('#MySelectBox').val($(this).attr('value'));
    $('#MySelectBox').bind("click", function(e) {
        e.stopPropagation();
    });
}); 
```

小提琴：http: [//jsfiddle.net/hghNJ/1/](http://jsfiddle.net/hghNJ/1/)

# java - 没有封闭的类型实例是可访问的。

> ID：12471664
> 
> 赞同：6
> 
> 时间：2012-09-18T06:44:31.353
> 
> 标签：java, multithreading, thread-safety, static-methods

整个代码是：

```
public class ThreadLocalTest {
    ThreadLocal<Integer> globalint = new ThreadLocal<Integer>(){
        @Override
        protected Integer initialValue() {
            return new Integer(0);
        }
    };

    public class MyThread implements Runnable{
        Integer myi;
        ThreadLocalTest mytest;

        public MyThread(Integer i, ThreadLocalTest test) {
            myi = i;
            mytest = test;
        }

        @Override
        public void run() {
            System.out.println("I am thread:" + myi);
            Integer myint = mytest.globalint.get();
            System.out.println(myint);
            mytest.globalint.set(myi);
        }
    }

    public static void main(String[] args){
        ThreadLocalTest test = new ThreadLocalTest();
        new Thread(new MyThread(new Integer(1), test)).start();
    }
} 
```

为什么下面的片段：

```
ThreadLocalTest test=new ThreadLocalTest();
    new Thread(new MyThread(new Integer(1),test)).start(); 
```

导致以下错误：

> 无法访问 ThreadLocalTest 类型的封闭实例。必须使用 ThreadLocalTest 类型的封闭实例来限定分配（例如 xnew A()，其中 x 是 ThreadLocalTest 的实例）。

* * *

核心问题是：我想在静态方法中初始化内部类。这里有两个解决方案：

1.  使内部类成为外部类

2.  使用外部参考，如：

`new Thread(test.new MyRunnable(test)).start();//Use test object to create new`

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-18T13:22:50.900

如果将 class 更改`MyThread`为*static*，则可以消除问题：

```
public static final class MyThread implements Runnable 
```

由于您的`main()`方法是静态的，因此如果不首先创建封闭类的实例，就不能依赖封闭类的非静态类型或字段。不过，更好的是甚至不需要这样的访问，这是通过使有问题的类静态来实现的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T07:18:34.053

由于`MyThread`是一个内部类，您必须使用以下实例访问它`MyThreadTest`：

```
public static void main(String args[]) {
    MyThreadTest test = new MyThreadTest();
    new Thread(test.new MyThread(new Integer(1),test)).start();
} 
```

# java - 如何找到没有单元测试的类？

> ID：12471667
> 
> 赞同：5
> 
> 时间：2012-09-18T06:44:42.133
> 
> 标签：java, eclipse, unit-testing, junit

按照标准约定，我将源代码和单元测试保存在单独的文件夹中。创建测试时，我遵循相同的包结构。

例如，如果文件夹`OrderGenerator`中的包中有一个类，我的单元测试将在文件夹中。`com.kshitiz``src``OrderGeneratorTest``com.kshitiz``test`

在我目前的设置中，这种类型的组织在一段时间后变得难以管理。我不能在代码之前编写单元测试。其他一些开发人员负责编写代码，我应该跟进测试用例。（是的，我知道应该反过来，但我无能为力）

由于测试用例是第二次编写的，因此我必须遍历所有包以查找类并在这些类中查找方法，以确保我已经对它们进行了测试。有 100 个类和 1000 个方法，这非常痛苦。

有没有办法确保您的测试用例覆盖率与代码一致？有没有一种简单的方法可以在某处找到没有相应测试用例的类？

我正在使用 Java、Eclipse 和 Junit 4。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T06:46:53.220

[艾玛](http://www.eclemma.org/)

> EclEmma 是一个免费的 Eclipse Java 代码覆盖工具，在 Eclipse Public License 下可用。它将代码覆盖率分析直接引入 Eclipse 工作台：
> 
> *   快速开发/测试周期：从工作台内启动，如 JUnit 测试运行，可以直接分析代码覆盖率。
> *   丰富的覆盖率分析：覆盖率结果立即在 Java 源代码编辑器中进行汇总和突出显示。
> *   非侵入性：EclEmma 不需要修改您的项目或执行任何其他设置。

代码覆盖率不仅会告诉您测试（直接或间接）测试了哪些类，还会告诉您测试覆盖了哪些方法以及其中的哪些分支。它可以是一个非常好的指南，可以帮助您确定在哪里进行早期测试工作。

这是它为您提供的报告类型：

![在此处输入图像描述](../Images/aeb119078f6aea275948fff4578c9249.png)

您可以在右下角的面板中看到每个课程涵盖了多少，因此倒数第二个课程几乎没有经过测试。在右上角，它显示了哪些分支被覆盖——显然该方法从未使用空输入进行过测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T07:00:06.077

根据[您项目的性质](http://www.atlassian.com/software/clover/pricing)，您可能对**Clover**感兴趣，它也可作为 eclipse 插件使用。更多信息，请访问[Atlassian 网站](https://confluence.atlassian.com/display/CLOVER/1.+Clover+for+Eclipse+in+10+minutes)。

# symfony1 - 将 SimpleSAMLPHP 集成到应用程序

> ID：12471670
> 
> 赞同：1
> 
> 时间：2012-09-18T06:45:07.433
> 
> 标签：symfony1, single-sign-on, saml, federated-identity

我正在尝试将 simpleSAMLphp 与我的 symfony 应用程序集成。我的服务提供者是一个外部应用程序。我的应用程序作为身份提供者工作。

我将 simpleSAMLphp 配置为返回一些属性而不检查身份验证。我不知道如何从我的应用程序发起 idp 请求，所以我只是从 saml2/idp/SSOService.php 复制了以下副本。

```
require_once('ServiceProvider/ssp/www/_include.php');

\SimpleSAML_Logger::info('SAML2.0 -...e');

$metadata = \SimpleSAML_Metadata_MetaDataStorageHandler::getMetadataHandler();

$_GET['spentityid']='https://saml.serviceprovider.example.com';

$idpEntityId = $metadata->getMetaDataCurrentEntityID('saml20-idp-hosted');

$idp = \SimpleSAML_IdP::getById('saml2:' . $idpEntityId);

\sspmod_saml_IdP_SAML2::receiveAuthnRequest($idp);

assert('FALSE'); 
```

但它给出了一个错误

```
in /lib/SAML2/Binding.php at line 95        
            throw new Exception('Unable to find the current binding.');

at SAML2_Binding ::getCurrentBinding () modules/saml/lib/IdP/SAML2.php at line 285 
at sspmod_saml_IdP_SAML2 ::receiveAuthnRequest (object(SimpleSAML_IdP)) 
```

有人知道如何从应用程序发起 idp 请求吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T06:09:18.767

该 API 记录在[SP API 参考 中](http://simplesamlphp.org/docs/1.10/simplesamlphp-sp-api)。

我们首先加载一个使用自动加载器注册 simpleSAMLphp 类的文件。调整路径以指向您的 ssp 目录（取决于您的应用程序所在的位置）

```
require_once('../../lib/_autoload.php'); 
```

我们选择我们的身份验证源。替换`ldap-auth`为您选择的身份验证源。

```
$as = new SimpleSAML_Auth_Simple('ldap-auth'); 
```

然后我们需要身份验证：

```
$as->requireAuth(); 
```

并打印属性：

```
$attributes = $as->getAttributes();
print_r($attributes); 
```

其他选项也可用。查看[SP API 参考](http://simplesamlphp.org/docs/1.10/simplesamlphp-sp-api)文档以获取所有参数的列表。

# asp.net - 在 asp.net 中将大图像保存到磁盘时出现内存不足异常

> ID：12471673
> 
> 赞同：1
> 
> 时间：2012-09-18T06:45:10.603
> 
> 标签：asp.net, c#-4.0

我正在尝试将巨大的图像（1200mm * 1800mm）保存在文件夹中，但出现“内存不足”的异常，所以请给我建议..

提前致谢

```
protected void btncreateimage_Click(object sender, ImageClickEventArgs e)
{
    string finalImage = null;
    //lblXY.Value=":"download- x + "-" + y + ";";
    pos = lblXY.Value;
    //if (pos != "")
    {
        //get all the files in a directory
        string[] files = Directory.GetFiles(Server.MapPath(@"Upload\"));
        //combine them into one image
        System.Drawing.Bitmap stitchedImage = Combine(files);
        try
        {
            if (finalImage == null)
            {
                Guid g;
                // Create and display the value of two GUIDs.
                g = Guid.NewGuid();
                //save the new image

                Session["guid"] = "output" + g + ".jpg";
                stitchedImage.Save(Server.MapPath(@"Upload\mergeimage\" + Session["guid"].ToString() + ""), System.Drawing.Imaging.ImageFormat.Jpeg);

                stitchedImage.Dispose();
                lblXY.Value = "";
                if (Generate.GenerateWM(Server.MapPath(@"Upload\mergeimage"), Session["guid"].ToString()))
                {
                    string imgname = Session["guid"].ToString();
                    string OriginalFile = Server.MapPath(@"Upload\mergeimage") + "\\" + imgname.Substring(0, imgname.LastIndexOf('.')) + "wm.jpg";
                    System.Drawing.Image FullsizeImage = System.Drawing.Image.FromFile(OriginalFile);

                    MemoryStream ms = new MemoryStream();
                    FullsizeImage.Save(ms, ImageFormat.Jpeg);

                    //byte[] contentBuffer = new byte[ms.Length];
                    //ms.Position = 0;//Reset the position at the start
                    //ms.Read(contentBuffer, 0, (int)ms.Length);
                    //Response.ContentType = "image/jpeg";
                    //Response.BinaryWrite(contentBuffer);

                    FullsizeImage = System.Drawing.Image.FromStream(ms, true, false);
                    System.Drawing.Bitmap NewImage = (Bitmap)FullsizeImage.GetThumbnailImage(14173, 21260, null, IntPtr.Zero);

                    FullsizeImage.Dispose();
                    //ms.Close();

                    NewImage.SetResolution(300, 300);

                    NewImage.Save(Server.MapPath(@"Upload\mergeimage") + "\\" + imgname.Substring(0, imgname.LastIndexOf('.')) + "wm.jpg", ImageFormat.Jpeg);

                    Response.Redirect("SignEditor1.aspx");
                }
            }

        }
        catch (Exception ex)
        {
            throw ex;
        }

    }

} 
```

# java - 在扩展类上声明proporder

> ID：12471674
> 
> 赞同：6
> 
> 时间：2012-09-18T06:45:11.613
> 
> 标签：java, annotations, jaxb

可以说我有课

```
@XmlType(propOrder = {
        "one",
        "two"
    })

@XmlRootElement(name = "search")
public class Search {

    protected One one;  
    protected Two two;

    //getters & setters
} 
```

我想要一个扩展这个类的类

**例如**

```
@XmlType(propOrder = {
        "three"
    })

@XmlRootElement(name = "searchExtended")
public class SearchExtended extends Search {

    protected Three three;  
    //getters & setters
} 
```

您如何正确声明 propOrder，我之前尝试过，但它没有使用我认为的顺序。注释是如何处理的？/ 你应该如何在扩展类中声明这个？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-18T10:52:32.557

父属性将根据其在子属性之前的指定顺序进行编组。`propOrder`如果用 注释父类，则可以在子类的中包含父类的属性`@XmlTransient`。

*   [http://blog.bdoughan.com/2012/08/jaxbs-xmltransient-and-property-order.html](http://blog.bdoughan.com/2012/08/jaxbs-xmltransient-and-property-order.html)

* * *

**更新**

> 有什么办法可以让它瞬变但仍然可以正常使用吗？

不，`@XmlTransient`对类进行设置会将其从 JAXB 认为已映射的类中删除。JAXB 将超类的属性编组在子类的属性之前的原因是为了匹配 XML 模式的规则。当您的`Search`类没有标记`@XmlTransient`相应的 XML 模式时，如下所示。根据 XML 模式规则，为了使类型`searchExtended`元素有效，超类型中的元素必须出现在子类型中定义的任何元素之前。

```
 <xs:complexType name="searchExtended">
    <xs:complexContent>
      <xs:extension base="search">
        <xs:sequence>
          <xs:element name="three" type="three" minOccurs="0"/>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>

  <xs:complexType name="search">
    <xs:sequence>
      <xs:element name="one" type="one" minOccurs="0"/>
      <xs:element name="two" type="two" minOccurs="0"/>
    </xs:sequence>
  </xs:complexType> 
```

您可以通过运行以下代码来查看与您的 JAXB 模型对应的 XML 模式：

```
import java.io.IOException;
import javax.xml.bind.*;
import javax.xml.transform.Result;
import javax.xml.transform.stream.StreamResult;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(SearchExtended.class);
        jc.generateSchema(new SchemaOutputResolver() {

            @Override
            public Result createOutput(String namespaceUri,
                    String suggestedFileName) throws IOException {
                StreamResult result = new StreamResult(System.out);
                result.setSystemId(suggestedFileName);
                return result;
            }

        });
    }

} 
```

# azure - 无法使用通过 VS2010 发布在 Windows Azure 上发布网站

> ID：12471678
> 
> 赞同：34
> 
> 时间：2012-09-18T06:45:21.083
> 
> 标签：azure, azure-deployment

当我尝试通过 Visual Studio 2010 在 Windows Azure 上发布我的 Web 应用程序时，我遇到了这个问题。我正在尝试通过右键单击项目并选择发布和导入从 Windows Azure 平台下载的发布配置文件。

我收到此错误：

> 错误 1 ​​Web 部署任务失败。（无法连接到远程计算机（“waws-prod-am2-001.publish.azurewebsites.windows.net”）。在远程计算机上，确保已安装 Web Deploy 并且所需的进程（“Web Management Service ") 已启动。了解更多信息，请访问：http: [//go.microsoft.com/fwlink/](http://go.microsoft.com/fwlink/?LinkId=221672#ERROR_DESTINATION_NOT_REACHABLE) ?LinkId =221672#ERROR_DESTINATION_NOT_REACHABLE。) 0 0 MeraSungard

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2015-04-03T22:53:07.477

对于那些答案不起作用的人（比如我）。或者，您可以在 Azure 网站中设置应用设置：

1.  在 Azure 管理门户设置中设置**WEBSITE_WEBDEPLOY_USE_SCM = false**（在网站 → 配置 → 应用程序设置下）。确保`false`在值字段中。

2.  在 VS 或您用于部署的任何内容中再次下载发布设置。

3.  部署成功。

*取自：*

[https://social.msdn.microsoft.com/Forums/en-US/efa56eb2-a8b2-4690-92d0-33d97946ed29/cant-deploy-could-not-connect-to-the-remote-computer-xxxscmazurewebsitesnet-using- the?forum=windowsazurewebsitespreview](https://social.msdn.microsoft.com/Forums/en-US/efa56eb2-a8b2-4690-92d0-33d97946ed29/cant-deploy-could-not-connect-to-the-remote-computer-xxxscmazurewebsitesnet-using-the?forum=windowsazurewebsitespreview)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-18T20:46:59.427

当您尝试将 Web 应用程序从 VS2010 发布到 Windows Azure 网站时，发布过程会连接到特定端口上的 Windows Azure 网站，该端口为 Web 部署服务启用。在 VS 2010 中，如果与此服务端口的连接失败，则 VS 返回错误为“Web Deploy is installed........ on remote server。事实是 WebDeploy 服务已经在运行并且其他机器可以连接到同一台服务器和部署问题特定于您的网络和您的机器。

有两个主要的地方要寻找 1) 你的部署机器防火墙 2) 代理服务器，如果你在代理后面。尝试在本地更改网络相关设置，以便使其正常工作。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-02-15T14:44:09.907

重置您的“发布配置文件”也可以 :) 您可以从您的 Web 应用程序的 Azure 门户重置它。 [![在此处输入图像描述](../Images/d21d0ff476dd211b79414655eaae5eba.png)](https://i.stack.imgur.com/GeG8b.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-02-01T22:12:35.913

尝试以管理员身份运行 Visual Studio。这解决了我的问题。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-03-01T20:42:22.653

确保您没有运行 Web 调试代理来记录您的计算机和 Internet 之间的所有 HTTP(s) 流量。我的问题是 Fiddler 正在运行，因为我正在调试 Web API。关闭 Fiddler 后，我能够成功发布。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-07-21T15:19:36.513

对我来说，网络重新连接后发布开始工作。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-03-16T15:06:32.160

我在尝试从 VS2013 更新 5 部署到 Azure 时遇到了同样的问题。它间歇性地发生。有时出版作品，有时它没有。在我的情况下，它原来是网络相关的。我们使用一个负载平衡路由器，它连接了两个 WAN。如果在部署过程中外部IP地址发生变化，因为路由器切换了广域网，就会失败。希望这会帮助某人。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-08-27T17:56:34.210

我想与同样的问题分享我的解决方案。此外 `MsDepSvc (Web Deployment Agent Service)`，并且`WMSvc (Web Management Service)`在远程 VM 上运行，Visual Studio 2015 仍然返回错误。

我去`Azure portal`> `All Resources`> 找到我的`Network Security Group`并点击它。>**`Inbound security rules`**并添加新规则：

**名称**：您的选择。
**来源**：*任何*。
**服务**：*自定义*
**协议**：*任何*
**端口范围**：***8172***
**操作**：*允许*

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-05-16T05:42:37.990

同样的问题，解决方案略有不同。我使用 IP 限制对网站的访问。这是通过应用服务-> 网络-> 配置访问限制完成的。

我的解决方法是将 IP 添加到两个选项卡、网站选项卡和 scm 选项卡。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-05-27T09:55:17.483

我没有将密码保存在我的发布配置文件中。即使在从门户检查并仔细检查密码并在提示时输入密码后，发布也失败了。我知道问题与密码有关，因为我可以输入任何伪造的密码，但仍然会得到完全相同的发布失败错误。

我所做的是在我的项目的发布选项卡上单击“配置”，并在再次输入凭据后单击“连接”选项卡上的“验证连接”。

它能够成功验证，并且所有后续发布也成功。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-06-22T18:05:01.390

唉，使用完整的设置选项重新启动 Web 部署解决了我的问题。确保您已从 IIS 管理工具在后台启动管理服务。

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2021-08-23T02:48:15.130

禁用我的 VPN 为我解决了这个问题。

# eclipse - 在eclipse包资源管理器中，如何一键展开树？

> ID：12471682
> 
> 赞同：9
> 
> 时间：2012-09-18T06:45:45.480
> 
> 标签：eclipse

例如，我有一个这样的文件夹结构：

```
src
└─test
    ├─java
       └─com
           └─google
              └─test
                  │  AllTests.java 
```

为了查看文件 AllTests.java，我需要多次单击以展开树。我想知道是否有“全部展开”选项可以一键展开树。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-18T17:04:44.020

您可以通过使用平面包表示（这是默认设置）来避免分层布局：

![截屏](../Images/33ae4d8fc920ecee6d04440205a1d8fa.png)

如果您通常只想查找当前在编辑器中打开的文件，请激活编辑器链接：

![在此处输入图像描述](../Images/036ae0c4994c9f85064b48862e3c3004.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-18T07:40:19.767

查看 以展开`Shift + Numpad_multiply`所有并 `Shft + Ctrl + Numpad_divide`折叠所有

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-23T13:25:58.310

只需按下即可`Numpad_Multiply`使用 Eclipse Luna 扩展包资源管理器中所选项目的所有子树。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-28T09:53:30.743

使用 Eclipse Juno 和 Mac OS X 10.7.5，您可以使用 进行扩展`Alt+Right`，但这会扩展所有内容，包括方法和变量。

# asp.net-mvc - MVC Html Helper：来自字符串表达式的模型元数据

> ID：12471684
> 
> 赞同：2
> 
> 时间：2012-09-18T06:46:05.720
> 
> 标签：asp.net-mvc, html-helper, modelmetadata

我正在尝试构建一个可以访问模型元数据的 html 助手。我需要两个版本的助手才能工作：来自字符串表达式和来自 lambda 表达式：示例：

```
public static MvcHtmlString MyLabel(this HtmlHelper html, string htmlFieldName)
{
    return LabelHelper(html, htmlFieldName);
}

public static MvcHtmlString MyLabelFor<TModel, TValue>(this HtmlHelper<TModel> html, Expression<Func<TModel, TValue>> expression)
{
    return LabelHelper(html, ExpressionHelper.GetExpressionText(expression));
}

private MvcHtmlString LabelHelper(HtmlHelper html, string htmlFieldName)
{
     ModelMetadata m = ModelMetadata.FromStringExpression(htmlFieldName);
     // the rest of the code...
} 
```

上面代码的问题是它不适用于复杂类型。例如，如果我的模型看起来像这样：

```
public class MyViewModel
{
    public int Id { get; set; }
    public Company Company { get; set; }
}

public class Company
{
    public int Id { get; set; }

    [Required]
    public string Name { get; set; }
} 
```

我的 html 助手将无法读取以下元数据：

```
@Html.MyLabel("Company.Name") 
```

我可以让它为接受表达式的助手工作，因为它`ModelMetadata.FromLambdaExpression(...)`实际上可以很好地处理复杂的对象，但这对我来说还不够。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T08:25:09.350

总之，不可能只使用 FromStrinExpression(...) 方法。在内部， ModelMetadata.FromStringExpression(...) 将尝试获取嵌套属性的 ViewDataInfo - 在您的情况下为“名称”。如果 View 是强类型的，但 Model 为 null，则
ViewData.GetViewDataInfo 将返回 null。在这种情况下，它将仅循环 ModelMetadata.Properties 并且无法找到嵌套属性。如果 Model 不为 null，则该方法将返回正确的 ModelMetadata，因为 ViewDataInfo 是正确的。另一个上的 ModelMetadata.FromLamdaExpression(...) 有足够的关于容器和属性类型的信息，这就是它适用于复杂对象的原因。

我有一个勇敢的建议:)。您有字符串表达式和 Html.ViewData。您可以递归循环 Html.ViewData.ModelMetadata.Properties 并尝试获取嵌套属性的 ModelMetadata。

# c# - 从 Visual Studio 重新打开创建的 Windows 窗体应用程序

> ID：12471685
> 
> 赞同：1
> 
> 时间：2012-09-18T06:46:11.057
> 
> 标签：c#, visual-studio-2010, user-interface

如何重新打开创建的视觉工作室项目？当我在visual studio中重新打开一个创建的项目（通过双击.csproj）时，GUI（我制作的windows窗体应用程序）没有出现，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T06:47:29.213

您需要打开包含**.sln**扩展名的文件，**而不是 .csproj**文件，因为这只会打开一个项目，而不是整个解决方案。

你可以这样理解：

csproj = C Sharp 项目；sln = 解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T07:26:28.200

也只是为了说明这一点：

查看 > 解决方案资源管理器 > Program.cs

# android - Android paddingBottom 在没有 paddingTop 的情况下无法工作

> ID：12471688
> 
> 赞同：6
> 
> 时间：2012-09-18T06:46:29.240
> 
> 标签：android, layout, scrollview, padding

我目前正在使用在 ScrollView 中包含 RelativeLayout 的布局。

我希望将 RelativeLayout 包含在距离 ScrollView 底部 5dp 的位置，这样它就不会与我背后的背景重叠，为了实现这一点，我使用了这个 XML：

```
<ScrollView
    android:id="@+id/scrollView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignTop="@+id/backgroundView1"
    android:fadingEdge="none"
    android:scrollbars="none"
    android:paddingTop="5dp"
    android:paddingBottom="5dp">

    <RelativeLayout
        android:id="@+id/innerLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content">
    </RelativeLayout>
</ScrollView> 
```

这工作得很好，但是我不再需要顶部的填充。移除 paddingTop 行时，paddingBottom 不再起作用。即使我将 paddingBottom 设置为 100dp，它对我的​​布局也没有影响。

我试过 paddingTop="0dp" 也没有解决问题，似乎 paddingBottom 只有在 paddingTop 大于 0 时才有效。

任何人都知道为什么 paddingBottom 在没有 paddingTop 的情况下不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-15T04:10:16.027

您编写了 xml 属性**android:layout_alignParentBottom="true"**因此您的**ScrollView**将始终与**底部**对齐。

删除**android:layout_alignParentBottom="true" 并重**试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-15T07:35:01.733

将这种布局用于滚动视图并根据您的需要进行更改。不要在滚动视图中使用相对布局。在这里您可以在图像中设置任何类型的高度，但您仍然会在底部看到填充而没有任何 paddingtop

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/backgroundView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ScrollView
        android:id="@+id/scrollView"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:background="#cccccc"
        android:paddingBottom="5dp"
        android:scrollbars="none" >

        <LinearLayout
            android:id="@+id/innerLayout"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <ImageView
                android:layout_width="match_parent"
                android:layout_height="700dp"
                android:background="@android:color/transparent"
                android:scaleType="fitXY"
                android:src="@drawable/image2" />
        </LinearLayout>
    </ScrollView>

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-25T23:49:52.177

您可以使用

```
 android:layout_marginTop="10dip" 
```

或者

```
 android:layout_marginBottom="20dip" 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-03-27T17:23:00.573

**这是为了在顶部和底部有 (5 dp) 空间**

```
<ScrollView
    android:id="@+id/scrollView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignTop="@+id/backgroundView1"
    android:fadingEdge="none"
    android:scrollbars="none"
    android:paddingTop="5dp"
    android:paddingBottom="5dp">

    <RelativeLayout
        android:id="@+id/innerLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dp"
        android:layout_marginBottom="5dp">
    </RelativeLayout>
</ScrollView> 
```

**这是为了在顶部、底部、左侧和右侧有 (5 dp) 空间**

```
<ScrollView
    android:id="@+id/scrollView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignTop="@+id/backgroundView1"
    android:fadingEdge="none"
    android:scrollbars="none"
    android:paddingTop="5dp"
    android:paddingBottom="5dp">

    <RelativeLayout
        android:id="@+id/innerLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="5dp">
    </RelativeLayout>
</ScrollView> 
```

# c# - 当有多个服务器广播时，客户端如何接收多个广播消息？

> ID：12471690
> 
> 赞同：1
> 
> 时间：2012-09-18T06:46:47.087
> 
> 标签：c#, sockets, client-server, broadcastreceiver, inter-process-communicat

我正在使用 system.Net.Socket 从服务器向客户端发送和接收消息。但是当多个服务器广播消息然后接收器程序突然关闭时遇到问题。

我的广播服务器代码如下..

```
using System;
using System.Net;
using System.Net.Sockets;
using System.Text;

public class Broadcst
{
    public static void Main()
    {
        Socket sock = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
        IPEndPoint iep1 = new IPEndPoint(IPAddress.Broadcast, 9050);
        IPEndPoint iep2 = new IPEndPoint(IPAddress.Parse("192.168.1.255"), 9050);

        string hostname = Dns.GetHostName();
        byte[] data = Encoding.ASCII.GetBytes(hostname);

        sock.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.Broadcast, 1);
        sock.SendTo(data, iep1);
        sock.SendTo(data, iep2);
        sock.Close();
    }
} 
```

我的接收方代码如下所示...

```
 using System;
    using System.Net;
    using System.Net.Sockets;
    using System.Text;

    public class RecvBroadcst
    {
        public static void Main()
        {
            Socket sock = new Socket(AddressFamily.InterNetwork,
                            SocketType.Dgram, ProtocolType.Udp);

While(true){
  IPEndPoint iep = new IPEndPoint(IPAddress.Any, 9050);
            sock.Bind(iep);
            EndPoint ep = (EndPoint)iep;
            Console.WriteLine("Ready to receive...");

            byte[] data = new byte[1024];
            int recv = sock.ReceiveFrom(data, ref ep);
            string stringData = Encoding.ASCII.GetString(data, 0, recv);
            Console.WriteLine("received: {0}  from: {1}",
                                  stringData, ep.ToString());

            data = new byte[1024];
            recv = sock.ReceiveFrom(data, ref ep);
            stringData = Encoding.ASCII.GetString(data, 0, recv);
            Console.WriteLine("received: {0}  from: {1}",
                                  stringData, ep.ToString());

}
            sock.Close();
        }
    } 
```

那么当有多个服务器广播时，客户端如何接收多个广播消息呢？

当我再次从服务器发送消息时，它会抛出错误，例如“每个套接字地址（协议/网络地址/端口）通常只允许使用一次”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T13:01:35.897

您`Bind`多次调用具有相同参数的同一个 Socket 实例（每次迭代一个）。你应该打电话`Bind`一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T04:42:05.420

我已经通过在接收方的后续操作解决了上面代码中的更改问题。我每次都只是绑定套接字，所以我现在只绑定一次，并且每次只从指定的端口迭代传入的数据。

```
using System;
using System.Net;
using System.Net.Sockets;
using System.Text;

public class RecvBroadcst
{
    public static void Main()
    {
       Socket sock = new Socket(AddressFamily.InterNetwork,
                           SocketType.Dgram, ProtocolType.Udp);
     //  int port_no=Convert.ToInt32(sock.RemoteEndPoint);

         int portnumber = 9050;

            sock = new Socket(AddressFamily.InterNetwork,
                           SocketType.Dgram, ProtocolType.Udp);
            IPEndPoint iep = new IPEndPoint(IPAddress.Any,portnumber);
            sock.Bind(iep);
            EndPoint ep = (EndPoint)iep;
            Console.WriteLine("Ready to receive...");
          // int port_no = Convert.ToInt32(sock.RemoteEndPoint);
            while (true)
            {

                byte[] data = new byte[1024];
                int recv = sock.ReceiveFrom(data, ref ep);
                string stringData = Encoding.ASCII.GetString(data, 0, recv);
                Console.WriteLine("received: {0}  from: {1}",
                                      stringData, ep.ToString());

                //data = new byte[1024];
                //recv = sock.ReceiveFrom(data, ref ep);
                //stringData = Encoding.ASCII.GetString(data, 0, recv);
                //Console.WriteLine("received: {0}  from: {1}",
                //                      stringData, ep.ToString());

                data = null;
            }
            //portnumber--;

        sock.Close();
    }
} 
```

我刚刚成功了..感谢您的响应。这很有帮助。

# jquery - jQuery colorbox 类名不是函数

> ID：12471694
> 
> 赞同：0
> 
> 时间：2012-09-18T06:47:14.437
> 
> 标签：jquery

我无法找到我做错了什么

我正在使用 jQuery 颜色框

```
<a title="Add Externaal attendee" class ="addmeetingroom" href="http://webfaction/UI/user/attandee.php" style="background-color:orange;text-align:center;text-decoration:none;"> Add Attendee<a> 
```

这是彩盒的脚本

```
 <script>
    function getLBTitle(that){
         title= $(that).data("title");
         if(typeof title == 'undefined'){
                title = $(that).attr("original-title")
         }
         if(typeof title == 'undefined'){
                title = $(that).attr("title")
         }
         return title;
         }
    $(".addmeetingroom").colorbox({width: "600", initialWidth: "500", height:"500", top:"5%",title:function(){return getLBTitle($(this));}});
</script> 
```

我不知道为什么我会得到

```
TypeError: $(".addmeetingroom").colorbox is not a function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T06:51:56.817

1) 确保 colorbox 插件已加载

2) 将代码包装在 $.ready 函数中，以便在加载 dom 时执行：

```
$(function(){
    $(".addmeetingroom").colorbox({wid...
}); 
```

# php - 如果用户付款或取消定期付款，Paypal IPN 会发送信息

> ID：12471697
> 
> 赞同：0
> 
> 时间：2012-09-18T06:47:32.223
> 
> 标签：php, paypal, paypal-subscriptions

我正在构建一个具有订阅功能的网站，我对 Paypal IPN 和定期付款方式有一些疑问。

如果是定期付款的到期日，是否会将 IPN 发送给您？

**例如：**

用户在 9 月 1 日订阅了您的产品，然后在 10 月 2 日（到期付款）用户进行了付款（*通过 paypal 的定期付款自动扣除*）。是否会在您的服务器上发送 IPN 并告诉您该用户已向您付款？

只是一个后续问题。如果用户取消他/她的定期付款，是否会在您的服务器中发送一个 IPN 以便您能够知道他/她取消了定期付款？

如果否，我如何知道用户已取消付款？

谢谢！您的帮助将不胜感激和奖励！:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T13:40:34.660

AFAIK 答案是肯定的。每当付款时，PayPal 都会通知您，即使该付款是在很长一段时间后付款。（请参阅[此处](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_ECRecurringPayments)的定期付款通知部分）

> PayPal 通过 IPN 和电子邮件通知您定期付款事件。但是，通常您可以调用 GetTransactionDetails 来获取您需要的信息。

此外，当取消订单时，PayPal 会发送 IPN 消息。

但是，您有责任模拟和处理您的 php 脚本中的不同情况，以确保何时取消 IPN 消息或定期付款。

# biztalk - 适配器减慢 BizTalk

> ID：12471698
> 
> 赞同：6
> 
> 时间：2012-09-18T06:47:34.300
> 
> 标签：biztalk, biztalk-2010

我遇到了慢速（自定义）BizTalk 适配器的问题。

每天晚上，应用程序会在几分钟内向 MSMQ 发送超过 10,000 条消息。不幸的是，BizTalk 需要几个小时来处理它们。

我没有任何编排，只是将消息路由到多方。对于一方，我们必须开发一个自定义适配器，但是这个适配器/接口非常慢。所以我认为 BizTalk 会自动限制整个应用程序，并且只从队列中读取它可以通过这个慢速适配器发送的尽可能多的消息。

因此，MSMQ 为空需要数小时。

如果我停止这个慢速适配器，例如只启用一个写入本地文件系统的文件适配器，则需要几秒钟来处理来自 MSMQ 的数千条消息。

是否可以调整 BizTalk 以更快地处理传入消息并仅限制此发送端口的传出消息？不幸的是，所有其他方都必须等待消息，因为一方速度慢。

感谢您的任何建议！

最好的问候迈克尔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T22:36:24.437

您可能会遇到**基于速率的限制**条件（[请参阅 MSDN](http://msdn.microsoft.com/en-au/library/aa559893.aspx)）。当**Publishing Rate**（消息进来的速度）超过**Delivery Rate * Rate Overdrive Factor**（发送的消息率 * 限制百分比）时，就会发生这种情况。

避免这种限制状态的一种简单方法是在 BizTalk 主机配置设置中增加您的速率过载因子。这可能不是最佳实践，因为听起来您需要将 Rate Overdrive Factor 设置为非常高的值，这可能会产生其他影响。

根据您构建解决方案的方式，您的另一种选择是将您的发送端口/适配器拆分到其自己的主机实例上。由于限制是在每个主机实例的基础上执行的，因此拆分此特定适配器的处理意味着它将不再影响通过标准适配器功能传递给其他方的消息的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T10:22:26.077

我可以想到一种可以帮助您解决问题的架构方法，特别是考虑到您的评论：

> 是否可以调整 BizTalk 以更快地处理传入消息并仅限制此发送端口的传出消息？**不幸的是，所有其他方都必须等待消息，因为一方速度慢。**

对于每一方，创建一个新的 MSMQ“方队列”并从传入（大消息量）队列直接写入该队列 - 单个接收端口/位置，多个“方”发送端口订阅传入消息并写入各自的'派对队列'。

您现在可以读取每个单独的“派对队列”并使用关联的发送端口（如果需要，使用慢速适配器）发送消息 - 这应该比使用单个发送端口快得多；您实际上将接收端与发送端分离。

我还会考虑审查您的主机/主机实例策略，以确保您从节流的角度进行适当的分离。

# javascript - 延迟加载图像功能修改

> ID：12471707
> 
> 赞同：1
> 
> 时间：2012-09-18T06:48:02.070
> 
> 标签：javascript, image, function, load, lazy-evaluation

我想为延迟加载插件修改 javascript trigger 'ready' 和 'ajaxStop'

```
$(document).ready(function() {
    $("img.lazy").lazyload({
        threshold:50,
        skip_invisible : false,
        effect: "fadeIn"
    }).removeClass("lazy");
});

$(document).ajaxStop(function() {
    $("img.lazy").lazyload({
        threshold:50,
        skip_invisible : false,
        effect: "fadeIn"
    }).removeClass("lazy");
}); 
```

它应该是这样的：

```
 $(document).any-possible-function(function() {
        ...
    }); 
```

为了最小化代码，请帮助修改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T06:55:24.130

不知道你想实现什么，但要尽量减少你的代码，这样写：

```
var lazyLoader = function() {
    $("img.lazy").lazyload({
        threshold:50,
        skip_invisible : false,
        effect: "fadeIn"
    }).removeClass("lazy");
};

$(document)
    .ready(lazyLoader)
    .ajaxStop(lazyLoader); 
```

# c# - 如何使用 c# 在 winform 中的按钮单击事件上将多个面板移动到不同位置？

> ID：12471708
> 
> 赞同：0
> 
> 时间：2012-09-18T06:48:12.097
> 
> 标签：c#, winforms, panel

我在一个事件上生成了几个面板，在这些面板中我有一个按钮，它将删除该特定面板。现在我想在删除没有间隙的面板时移动其他面板。我的面板生成功能是....

```
public void generate_editpanel(string c)
    {
        int i, j, k, b;
        int m, n;

        //Bitmap bmp = drawled(16, 16, Color.Black, Color.White);
        //imglst.Images.Add(bmp);

        for (i = 0; i <= 20; i++)
        {
            epnl[i] = new Panel();
            epnl[i].Visible = false;
            epnl[i].Enabled = true;
            epnl[i].Name = "epnl" + c;
            epnl[i].Location = new System.Drawing.Point(x, 0);
            epnl[i].Width = 260;
            epnl[i].Height = 173;
            epnl[i].BorderStyle = BorderStyle.Fixed3D;
            EditPanel.Controls.Add(epnl[i]);

            grid[i] = new DataGridView();
            cellstl = new DataGridViewCellStyle();

            grid[i].Visible = true;
            grid[i].AllowUserToAddRows = false;
            grid[i].AllowUserToDeleteRows = false;
            grid[i].AllowUserToOrderColumns = false;
            grid[i].AllowUserToResizeRows = false;
            grid[i].AllowUserToResizeColumns = false;
            grid[i].ColumnHeadersVisible = false;
            grid[i].RowHeadersVisible = false;
            grid[i].Name = "grid" + c;
            grid[i].Location = new System.Drawing.Point(120,5);
            grid[i].Size = new System.Drawing.Size(129, 129);
            grid[i].BackgroundColor = Color.Black;
            grid[i].GridColor = Color.Green;
            grid[i].CellBorderStyle = DataGridViewCellBorderStyle.None;
            grid[i].ScrollBars = ScrollBars.None;
            fill(Color.Black, Color.White);
            for (j = 1; j <= 8; j++)
            {

                col = new DataGridViewImageColumn();
                col.Width = 16;
                col.Image = imglst.Images[0];
                col.ImageLayout = DataGridViewImageCellLayout.Normal;
                grid[i].Columns.Add(col);
                grid[i].Columns[j - 1].FillWeight = 1;
            }
            for (k = 1; k <= 8; k++)
            {
                grid[i].Rows.Add();
                grid[i].Rows[k - 1].Height = 16;
            }
            cellstl.Alignment = DataGridViewContentAlignment.MiddleCenter;
            cellstl.BackColor = Color.White;
            grid[i].CellMouseClick += new DataGridViewCellMouseEventHandler(this.gridmouseclick);
            grid[i].CellMouseMove += new DataGridViewCellMouseEventHandler(this.gridmousemove);
            grid[i].CellMouseDown += new DataGridViewCellMouseEventHandler(this.gridmousedown);
            grid[i].CellMouseUp += new DataGridViewCellMouseEventHandler(this.gridmouseup);

            //for (m = 1; m <= 8; m++)
            //{
            //    for (n = 1; n <= 8; n++)
            //    {
            //        griddata[m, n] = 0;
            //    }
            //}
            epnl[i].Controls.Add(grid[i]);

            cbtn[i] = new Button();
            cbtn[i].Visible = true;
            cbtn[i].Location = new System.Drawing.Point(1, 1);
            cbtn[i].Name = "ctbn" + c;
            cbtn[i].Width = 25;
            cbtn[i].Height = 25;
            cbtn[i].Click += new System.EventHandler(this.dropedit);
            cbtn[i].BackgroundImage = Video_Project.Properties.Resources.w2;
            cbtn[i].BackgroundImageLayout = ImageLayout.Stretch;
            epnl[i].Controls.Add(cbtn[i]);

            lbl[i] = new Label();
            lbl[i].Visible = true;
            lbl[i].Location = new System.Drawing.Point(3, 79);
            lbl[i].Name = "lblr" + c;
            lbl[i].Width = 45;
            lbl[i].Height = 13;
            lbl[i].Text = "Repeat:";
            epnl[i].Controls.Add(lbl[i]);

            lbl[i] = new Label();
            lbl[i].Visible = true;
            lbl[i].Location = new System.Drawing.Point(3, 106);
            lbl[i].Name = "lbls" + c;
            lbl[i].Width = 45;
            lbl[i].Height = 13;
            lbl[i].Text = "Speed:";
            epnl[i].Controls.Add(lbl[i]);

            lbl[i] = new Label();
            lbl[i].Visible = true;
            lbl[i].Location = new System.Drawing.Point(3, 145);
            lbl[i].Name = "lblt" + c;
            lbl[i].Width = 45;
            lbl[i].Height = 13;
            lbl[i].Text = "Text:";
            epnl[i].Controls.Add(lbl[i]);

            lbl[i] = new Label();
            lbl[i].Visible = true;
            lbl[i].Location = new System.Drawing.Point(3, 0);
            lbl[i].AutoSize = false;
            lbl[i].Width = 70;
            lbl[i].Height = 70;
            lbl[i].Text = c;
            lbl[i].TextAlign = ContentAlignment.MiddleCenter;
            epnl[i].Controls.Add(lbl[i]);
            b = Convert.ToInt32(c);
            b += 1;
            c = Convert.ToString(b);

            txt[i] = new TextBox();
            txt[i].Visible = true;
            txt[i].Location = new System.Drawing.Point(50, 72);
            txt[i].Name = "txtr" + c;
            txt[i].Width = 35;
            txt[i].Height = 20;
            txt[i].MaxLength = 2;
            epnl[i].Controls.Add(txt[i]);

            txt[i] = new TextBox();
            txt[i].Visible = true;
            txt[i].Location = new System.Drawing.Point(50, 103);
            txt[i].Name = "txts" + c;
            txt[i].Width = 35;
            txt[i].Height = 20;
            txt[i].MaxLength = 2;
            epnl[i].Controls.Add(txt[i]);

            txt[i] = new TextBox();
            txt[i].Visible = true;
            txt[i].Location = new System.Drawing.Point(50, 142);
            txt[i].Name = "txtt" + c;
            txt[i].Width = 200;
            txt[i].Height = 20;
            txt[i].MaxLength = 250;
            epnl[i].Controls.Add(txt[i]);

            x = x + 280;
        }

    } 
```

我正在为另一个事件设置特定面板的可见模式

```
 private void viewscreen_MouseDown(object sender, MouseEventArgs e)
    {
        int i;
        if (e.Button == MouseButtons.Right)
        {
            for (i = 0; i <= 20; i++)
            {
                //string c = Convert.ToString(b);
                //generate_editpanel(c);
                if (b == i)
                {
                    epnl[i].Visible = true;
                }
            }
        }
    } 
```

我正在删除另一个事件的特定面板......

```
public void dropedit(object sender, EventArgs e)
    {
        int i;
        for (i = 0; i <= 20; i++)
        {
            if (cbtn[i].Capture)
            {
                EditPanel.Controls.Remove(epnl[i]);
                epnl[i].Dispose();
            }
        }
    } 
```

所以现在我在删除一个面板时遇到了一个间隙，我想将其余的面板向左移动并消除该间隙。任何人请帮助...如果您需要其他信息，请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T06:59:32.130

您可以将[FlowLayoutPanel](http://msdn.microsoft.com/en-us/library/y62k236c.aspx) 用作面板的容器。

# properties - 在 cloudbees 环境中访问属性文件

> ID：12471712
> 
> 赞同：0
> 
> 时间：2012-09-18T06:48:36.023
> 
> 标签：properties, resources, filepath, cloudbees

这是我的问题的减少：

我有以下文件：src/main/resources/configs/config.properties
该文件有一个属性：uselive = true

我想从托管在 Cloudbees 平台上的 Java Web 应用程序访问此文件并阅读其内容。

为了读取这个文件，我应该使用什么访问路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T09:15:14.740

You can't rely on filesystem on RUN@Cloud. Filesystem is not persistent neither distributed, so as your application is (re)deployed it will get a fresh new node with empty filesystem, or if you scale-out on the cluster all nodes won't see consistent files.

We provide [http://wiki.cloudbees.com/bin/view/RUN/Configuration+Parameters](http://wiki.cloudbees.com/bin/view/RUN/Configuration+Parameters) to handle application configuration. You also can put system properties configuration in [http://wiki.cloudbees.com/bin/view/RUN/CloudBeesWebXml](http://wiki.cloudbees.com/bin/view/RUN/CloudBeesWebXml) as well if you prefer this option

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T02:08:04.577

通常，您将使用类加载器访问部署在 WEB-INF 文件夹中的资源：

[http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html#getResourceAsStream(java.lang.String](http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html#getResourceAsStream(java.lang.String)

所以像下面这样的东西会给你一个流：

```
getClassLoader().getResourceAsStream("configs/config.properties"); 
```

# c# - Workspace.DeleteMapping 方法在给定映射路径时抛出

> ID：12471713
> 
> 赞同：2
> 
> 时间：2012-09-18T06:48:43.437
> 
> 标签：c#, tfs, tfs-sdk

我正在使用 TFS SDK。我在 Visual Studio 上使用 TFS 映射了一个项目。在我的代码中，我检查了服务器路径和本地路径是否已经映射？它们的值是 true，但是当我尝试删除映射路径时，workspace.DeleteMapping() 方法会抛出。

它说“在 [本地路径] 中找不到任何映射”。但是 workspace.IsLocalPathMapped(LocalFolder) 方法返回真值？

```
WorkingFolder workfolder = new WorkingFolder(ServerFolder, LocalFolder);
workspace = workspaces[0];
if (workspace.IsServerPathMapped(ServerFolder) && workspace.IsLocalPathMapped(LocalFolder))
{
    workspace.DeleteMapping(workfolder);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T11:42:48.787

IsServerPathMapped 和 IsLocalPathMapped 告诉您给定的服务器路径或本地路径是否位于（或等效于）其中一个工作区映射*之下。*例如，假设您有一个这样的递归映射设置：

```
C:\dev\project -> $/TeamProject/Main 
```

如果您在项目“$/TeamProject/Main/Solution/foo.cs”上运行 IsServerPathMapped，它将返回 true，因为该文件位于您的递归映射之一之下。IsServerPathMapped 函数询问“如果我执行 GetLatest，此文件是否会在我的工作区中”，答案是肯定的。

如果您能详细解释一下您尝试使用此代码完成的工作，我可能会为您指出要使用的不同 API。

# php - 如何准确使用 onDelete = "SET NULL" - Doctrine2

> ID：12471715
> 
> 赞同：34
> 
> 时间：2012-09-18T06:48:47.790
> 
> 标签：php, doctrine-orm

我有一个包含这个的类**类别：**

```
/**
 * @ORM\OneToMany(targetEntity="Friend", mappedBy="category")
 * @ORM\OrderBy({"name" = "ASC"})
 */
protected $friends; 
```

和一个班级**朋友**：

```
 /**
 * @ORM\ManyToOne(targetEntity="Category", inversedBy="friends")
 * @ORM\JoinColumn(name="category_id", referencedColumnName="id",  onDelete="SET NULL")
 */
protected $category; 
```

我想要的是能够删除类别，无论是否有这个类别的一些朋友，如果有 - 这个朋友的类别字段设置为 NULL。

我尝试放入`onDelete="CASCADE"`ManyToOne 注释，然后放入 OneToMany，我尝试了上面显示的内容，我尝试`cascade={"remove"}`在 OneToMany 注释中使用，但没有任何效果！我也找不到一个例子。请你帮助我好吗？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-09-18T10:22:43.053

这一定是一个疯狂的答案，但是您是否更新了数据库架构？`onDelete="SET NULL"`在数据库级别，它必须在 innoDB 上工作。

# windows-7 - 在 Windows 7 中使用 Open MPI 和 CUDA

> ID：12471717
> 
> 赞同：4
> 
> 时间：2012-09-18T06:48:49.210
> 
> 标签：windows-7, cuda, mpi, gpgpu, openmpi

我正在尝试运行一个简单的**CUDA**程序，该程序使用**Windows 7 Professional 64**位机器中的**Open MPI v1.6.1**（64 位）查询节点中的 GPU 数量。当我在根节点中运行应用程序时，得到了正确的 GPU 计数。但是，当尝试使用 Open MPI 在不同节点上远程运行相同的应用程序时，GPU 计数变为 0，即显示为节点中**不存在支持 CUDA 的 GPU 。**

 ****具有支持 CUDA 2.1 的 GPU 的根和节点。当一个正常的 MPI 应用程序运行时，它工作正常。

> 使用 Open MPI v1.6.1 在 Windows 7 中运行 CUDA 应用程序是否需要任何特殊设置？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-18T08:38:45.457

在 Windows 上，显示 GPU 需要使用 Microsoft 的[WDDM](http://en.wikipedia.org/wiki/Windows_Display_Driver_Model)驱动程序模型。在 Windows 机器上运行远程任务时（例如，通过 RDP 或 MPI），您在一个[受限会话](http://msdn.microsoft.com/en-us/windows/hardware/gg463353.aspx)中运行，该会话具有虚拟显示驱动程序，因此无法访问 WDDM 设备，因此没有 GPU（即没有 CUDA GPU）。

NVIDIA 的[TCC](http://www.nvidia.com/object/software-for-tesla-products.html)驱动程序模型将 GPU 带出 WDDM 环境并使其显示为非显示设备，这意味着它可以通过 RDP 和 MPI 用于 CUDA 工作。当然，这也使它无法显示。

所有 Tesla 和部分 Quadro 设备都支持 TCC。****

# fluent-nhibernate - 具有自定义类型成员的 MVC 4 模型不起作用

> ID：12471722
> 
> 赞同：1
> 
> 时间：2012-09-18T06:48:56.230
> 
> 标签：fluent-nhibernate, asp.net-mvc-4

我正在开发一个 MVC 4 应用程序，但遇到了一些麻烦。这是我的模型的摘录：

```
public class RegistryModel
{
    [DisplayName("Registry id")]
    public  int registryId { get; set; }

    [Required]
    [DataType(System.ComponentModel.DataAnnotations.DataType.Date)]
    [DisplayName("Reception date")]
    public  DateTime? receivedDate { get; set; }

    [Required]
    [DisplayName("Source")]
    public  Source source { get; set; }
} 
```

源对象：

```
public class Source
{
    public virtual string sourceCode { get; set; }
    public virtual string fullName { get; set; }
    public virtual string shortName { get; set; }
    public virtual string type { get; set; }
    public virtual IList<Registry> registryList { get; set; }
} 
```

控制器：

```
public ActionResult Create()
{
    var sourceRepo = new Repository<DTOS.Source>(MvcApplication.UnitOfWork.Session);
    IEnumerable<SelectListItem> sourcesEnum = sourceRepo.FilterBy(x=>x.type.Equals("C")).Select(c => new SelectListItem { Value = c.sourceCode, Text = c.fullName });
    ViewBag.Sources = sourcesEnum;
    return View();
} 
```

最后是视图

```
@model Registry.Models.RegistryModel

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

<fieldset>
    <legend>New Registry</legend>      

    <div class="editor-label">
        @Html.LabelFor(model => model.source)
    </div>
    <div class="editor-field">
         @Html.DropDownListFor(Model => Model.source.sourceCode, (IEnumerable<SelectListItem>)ViewBag.Sources, String.Empty)
         @Html.ValidationMessageFor(model => model.source)
    </div> 
```

如果我从下拉列表中选择一个来源，它工作正常。但是，如果我在没有选择任何内容的情况下提交它，即使它在模型中被注释为 [Required]，我也没有错误消息。

在控制器级别调试 HttpPost Create 后，我看到返回的 RegistryModel 的源成员被实例化，但它的所有成员都是空的（sourceCode、fullName 等）。

如果我在提交表单之前没有在下拉列表中选择任何源，为什么 MVC 会实例化模型的源成员？

我试图通过这个来修改vue：

```
@Html.DropDownListFor(Model => **Model.source**, (IEnumerable<SelectListItem>)ViewBag.Sources, String.Empty) 
```

这次如果我在没有选择任何来源的情况下提交，我会收到错误消息，但是如果我选择一个，则提交后我会收到另一条错误消息，说“*提交前选择的值用户代码*无效”

非常感激任何的帮助 ！B.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:21:24.083

我相信模型绑定器将创建一个 Source 对象，然后在提交表单时尝试填写它具有的值（无论是否存在）。RequiredAttribute 没有像你可能瘦的那样起作用。看这里：

[http://bradwilson.typepad.com/blog/2010/01/input-validation-vs-model-validation-in-aspnet-mvc.html](http://bradwilson.typepad.com/blog/2010/01/input-validation-vs-model-validation-in-aspnet-mvc.html)

# xml - 删除一些空格

> ID：12471725
> 
> 赞同：-1
> 
> 时间：2012-09-18T06:49:05.407
> 
> 标签：xml, xslt, xslt-1.0

我有一个字符串如下。

```
<freeForm>
   <text>FI77 1270 3000 0164 15</text>
</freeForm> 
```

从上面的 xml 部分我需要得到像 FI77 12703000 016415 这样的字符串。

请提供使用 xslt1.0 实现相同的指针。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-18T07:03:25.323

它使用 xslt 中的 translate() 函数工作。

# matlab - matlab中的逻辑索引

> ID：12471727
> 
> 赞同：1
> 
> 时间：2012-09-18T06:49:18.913
> 
> 标签：matlab

考虑以下示例：

```
time = [733774,733774,733775,733775,733775,733776,733776];
depth = [0,10,0,5,10,0,10];
d = [1,1.3,1,2.5,2.5,1,1.2];
data = horzcat(time',depth',d');

dz = 1; 
```

在这里，我连续三天进行了多次测量。第一天在 2 个不同的深度进行了 2 次测量，第二天在 3 个深度进行了 3 次测量，第三天在 2 个深度进行了 2 次测量。

我想生成一个新变量“newData”，它线性插值（interp1）数据中的值。但是，我只想在任何给定日期的测量次数超过 2 时执行此操作。因此，对于上面的示例，这仅适用于 733775。在这里，我想进行深度测量并增加垂直分辨率，例如

```
newDepth = min(depth):dz:max(depth); 
```

但仅在测量次数超过 2 的情况下执行此操作。因此，我所描述的结果应该是：

```
733774  0
733774  10
733775  0
733775  1
733775  2
733775  3
733775  4
733775  5
733775  6
733775  7
733775  8
733775  9
733775  10
733776  0
733776  10 
```

加上来自“数据（：，3）”的插值。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T07:04:20.380

这是执行此操作的一种方法（这次解决 OP 的编辑版本）：

```
[idx,~,uniqueTimes] = grp2idx(time);

counts = hist(time,uniqueTimes);

%# expand data with counts greater than minCount
minCount = 2;
dz = 1;

expandedData = mat2cell(data,counts,3)

for ii = find(counts>minCount)'
    minZ = expandedData{ii}(1,2);
    maxZ = expandedData{ii}(end,2);

    intData(:,2) = (minZ:dz:maxZ)';
    intData(:,1) = expandedData{ii}(1,1);
    intData(:,3) = interp1(expandedData{ii}(:,2),expandedData{ii}(:,3),intData(:,2));

    expandedData{ii} = intData;

end

out = cat(1,expandedData{:}) 
```

# c# - 动态生成时如何在屏幕上保留图块

> ID：12471736
> 
> 赞同：0
> 
> 时间：2012-09-18T06:49:52.007
> 
> 标签：c#, windows-phone-7

每次用户单击“新建”按钮时，我都试图在屏幕上放置一个图块。我的实现工作，但我无法让任何动态生成的图块（从“新”按钮单击事件创建）在应用程序关闭然后重新加载后持续存在。我不知道问题出在哪里，因为当我导航到应用程序中的其他页面然后返回 Tile 页面时，tile 仍然存在。我所拥有的如下：

TilePage.xaml.cs

```
public TilePage()
    {
        InitializeComponent();

        CreateTileList();  //create main tile first always and check if others exist 
    }

private void CreateTileList()
    {
        tileItems = new ObservableCollection<TileItem>()             
        {                
            new TileItem() { ImageUri = mainImage, Title = "main", /*Notification = "",*/ Message = "main", GroupTag = "MainGroup", TileName = "main" },

        };

        //Set the first tile item
        this.tileList.ItemsSource = tileItems;  //sets the tileList Listbox ItemsSource to tileItems ObservableCollection            

        if (Settings.TileList.Value.Count > 0)  //add other tiles accordingly
        {
            foreach (var existingItem in Settings.TileList.Value)
            {
                tileItems.Add(existingItem);
            }
        }

        this.tileList.ItemsSource = tileItems;
    }

void addNew_Click(object sender, EventArgs e)
    {
        BitmapImage newTileImage = new BitmapImage();

        var newItem = new TileItem() { ImageUri = newTileImage, Title = "new", /*Notification = "",*/ Message = "new browser", GroupTag = "TileGroup", TileName = "new" };
        tileItems.Add(newItem); //update UI immediately
        Settings.TileList.Value.Add(newItem); //update saved TileList
    } 
```

我有一个 Settings.cs 类，用于通过另一个 Setting.cs 类将数据保存在隔离存储中

```
public class Settings
{        
    public static Setting<ObservableCollection<TileItem>> TileList = new Setting<ObservableCollection<TileItem>>("TileList", new ObservableCollection<TileItem>());
} 
```

我总是在构造函数中调用该`CreateTileList()`方法来生成第一个图块（无论如何它总是有效），然后检查用户是否创建了其他图块。如果是这样，我也尝试添加这些图块（仅在应用程序尚未关闭然后重新打开时才有效）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T07:18:22.607

请访问[此链接](http://www.windowsphonegeek.com/tips/all-about-wp7-isolated-storage-store-data-in-isolatedstoragesettings)以获取`IS settings implementation`. 添加每个项目后，您也需要保存`IS Settings`。这样，您的应用程序列表将存储在应用程序加载时的 IS 设置中，您需要将其复制到已绑定 UI 的列表 (tileItems)。我希望它有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T07:19:38.733

当您从其他页面导航回来时，您正在谈论的主页会保持缓存，磁贴也是如此，这就是您看到它们的原因。

在我看来，错误出在从隔离存储中保存/加载数据的某个地方。如果你可以在

```
if (Settings.TileList.Value.Count > 0) 
```

并检查隔离存储设置磁贴列表中的内容，您可能会注意到那里什么都没有。

# launching-application - 协议处理程序

> ID：12471738
> 
> 赞同：6
> 
> 时间：2012-09-18T06:50:00.203
> 
> 标签：launching-application, protocol-handler

**要求**：我们希望通过按钮或链接从网页启动外部比较工具（如 BeyondCompare 或 WinMerge）。文本文件路径应在启动时传递给该工具，以便它理解它们并在左侧和右侧比较面板中打开它们。

**尝试过的解决方案**：

1) 使用**JavaScript 的 ActiveXObject**：用户可以简单地点击一个按钮/链接并启动安装在其机器上的比较工具。但它只适用于 Internet Explorer，所以我们不能这样做。

参考：[如何使用超链接运行外部程序，例如记事本？](https://stackoverflow.com/questions/2800081/how-to-run-an-external-program-e-g-notepad-using-hyperlink)

2) 使用**Java Applet**：出于安全原因，浏览器内嵌的小程序不允许访问本地文件系统，会抛出“访问控制异常”。因此，我们也不能这样做。

参考：[为什么我的小程序会抛出 AccessControlException？](https://stackoverflow.com/questions/10568345/why-is-my-applet-throwing-an-accesscontrolexception)

3）使用**协议处理**程序：我们可以设置一个自定义的URL协议来触发程序。就像我们使用 mailto:user@email.com 语法来创建电子邮件链接一样，这将自动在 Windows 上启动 Outlook。“mailto”是 Windows 注册表中的预定义协议。

同样，我们创建了自己的协议，在注册表中说“launchCompareTool”，并且能够启动任何应用程序，如 WinMerge 或 BeyondCompare。但是，我们无法实现将左侧和右侧文件路径作为参数传递给应用程序。可能是正在启动的应用程序需要期待这些参数。

参考：[http ://www.dreamincode.net/forums/topic/220444-run-program-from-server-on-client-computer/](http://www.dreamincode.net/forums/topic/220444-run-program-from-server-on-client-computer/) [http://msdn.microsoft.com/en-us/library/aa767914% 28v=vs.85%29.aspx#app_reg](http://msdn.microsoft.com/en-us/library/aa767914%28v=vs.85%29.aspx#app_reg)

与“mailto”协议不同，后者将“body”和“subject”参数传递给可以理解它们的邮件客户端（如 Outlook）。这些比较工具没有可以从协议传递的参数。

有没有其他方法可以满足这个要求？

谢谢， 阿卜杜勒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T14:45:56.067

最近创造了另一种方法来执行相同的操作。基本上，这种新方法依赖于创建一个 Handler 应用程序，它只不过是一个基于 Windows 控制台的 ClickOnce 应用程序。ClickOnce 处理程序应用程序将充当主机（网页或 Outlook 或任何可以嵌入链接的东西）和目标应用程序（如 WinMerge 或 Beyond Compare）之间的拦截器。处理程序应用程序将在单击主机应用程序中的嵌入链接时被调用。链接只不过是一个 http url，它将保存查询字符串参数中的信息。由于处理程序应用程序是 ClickOnce 部署的，因此它允许将自己发布到 Web 服务器。嵌入链接（HTTP URL）将调用处理程序应用程序，然后处理程序应用程序将解析接收到的查询字符串参数，最后调用相关的目标应用程序。可以将处理程序应用程序视为 Click Once Deployed 解析器应用程序。以下是带有代码示例的详细文章[Custom-HyperLinks-Using-a-Generic-Protocol-Handler](http://www.codeproject.com/Articles/545083/Custom-HyperLinks-Using-a-Generic-Protocol-Handler)。

安舒尔·梅赫拉

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-18T03:08:02.237

自定义 url 可以调用解析参数然后调用 winmerge 的 dos 批处理文件或 vbscript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T15:21:13.890

我有一个类似的要求，我需要从浏览器应用程序与桌面客户端进行通信。我采用的方法是 Java Applet。

很快我就遇到了您提到的完全相同的问题，即由于安全原因而出现的“访问控制异常”。处理这个问题的正确方法是**签署**一个小程序，你就可以开始了。这些是我签署我的小程序的步骤，

```
javac MyClient.java
jar cvf MyClient.jar MyClient.class
keytool -genkey -validity 3650 -keystore pKeyStore -alias keyName
keytool -selfcert -keystore pKeyStore -alias keyName -validity 3650
jarsigner -keystore pKeyStore MyClient.jar keyName 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-24T07:32:25.797

是的，您可以通过这种方式传递参数在 html 代码中执行此操作

`"<a href='alert:\"Hello World\"'>this link</a>"`

这将生成html为

`<a href="alert:"Hello World"">this link</a>`

它将传递您的 exe 两个参数，即“alert:Hello”和“World”。我仍在寻找如何在不进行任何解析的情况下仅制作第一个参数“Hello”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-01T14:30:54.807

首先，我将介绍要求。

然后我会告诉你如何满足每一个要求

要求：

1.  创建一个小型命令行应用程序，它将目标应用程序路径作为参数并在“？”之后 将为目标应用程序接受参数。
2.  创建一个包含自定义 URL 注册表信息的 .reg 文件。
3.  使用自定义 URL 在您的网页上为应用程序创建一个链接。

让我们开始吧：

1.  创建命令行应用程序： 步骤：
    1.  打开 Microsoft Visual Studio 并选择使用 Visual Basic 模板创建一个新的控制台应用程序。我们将其称为“MyLauncher”。
    2.  在项目属性 >> 应用程序中将目标框架版本设置为 .NET 2.0，以确保任何人都可以使用此应用程序。C. 添加对项目的引用 - System.Windows.Forms D. 将 Module1.vb 文件中的所有默认代码覆盖为以下内容：

代码：

```
 Imports System.IO
 Imports System.Threading
 Imports System
 Imports System.Windows.Forms

  Module Module1

Dim array As String()

Sub Main()

    Dim origCommand As String = ""
    Dim sCommand As String = Command().ToString

    If String.IsNullOrEmpty(sCommand) Then
        Application.Exit()
    End If

    origCommand = sCommand
    origCommand = origCommand.Substring(origCommand.IndexOf(":") + 1)
    origCommand = origCommand.Split("""")(0)

    execProgram(origCommand)

End Sub

Private Sub execProgram(ByVal sComm As String)
    Try

        Dim myPath As String = Nothing
        Dim MyArgs As String = Nothing
        Dim hasArgs As Boolean

        If sComm.Contains("""") Then
            sComm = sComm.Replace("""", "").Trim()
        End If

        If sComm.EndsWith("?") Or sComm.Contains("?") Then
            hasArgs = True
            MyArgs = sComm.Substring(sComm.IndexOf("?") + 1)
            myPath = sComm.Substring(0, sComm.IndexOf("?"))
        Else
            myPath = sComm
        End If

        If hasArgs Then
            startProg(myPath, MyArgs)
        Else
            startProg(myPath)
        End If

    Catch ex As Exception
        Dim errMsg As String = sComm & vbCrLf & vbCrLf & "The program you are trying to launch was not found on the local computer" & vbCrLf & vbCrLf & vbCrLf &
      "Possible solutions:" & vbCrLf & vbCrLf &
     "If the program doesn;t exist on the computer, please install it. " & vbCrLf & vbCrLf &
     "If you did install the program, please make sure you used the provided default path for istallation. " & vbCrLf & vbCrLf &
      "If none of the avove is relevant, please call support" & vbCrLf & vbCrLf

        If ex.Message.Contains("The system cannot find the file specified") Then

            MessageBox.Show(errMsg, "System Error", MessageBoxButtons.OK, MessageBoxIcon.Error, MessageBoxDefaultButton.Button1, MessageBoxOptions.RightAlign)
        Else
            MessageBox.Show(ex.Message, "Default Error", MessageBoxButtons.OK)
        End If
    End Try

End Sub

Private Sub startProg(myPath As String, Optional MyArgs As String = "")
    Try
        Dim proc As Process
        If Not String.IsNullOrEmpty(MyArgs) Then
            proc = New Process()
            proc.EnableRaisingEvents = False
            proc.StartInfo.FileName = myPath
            proc.StartInfo.Arguments = MyArgs
            proc.Start()
        Else
            proc = New Process()
            proc.EnableRaisingEvents = False
            proc.StartInfo.FileName = myPath
            proc.Start()
        End If
    Catch ex As Exception

    End Try

End Sub

End Module 
```

E. 编译程序并在本地测试后，将其放在中央位置，最好放在每个人都可以访问的网络驱动器上。

2\. 创建一个包含以下代码的 .reg 文件：
代码：

```
 Windows Registry Editor Version 5.00

     [HKEY_CLASSES_ROOT\mylauncher]
     "URL Protocol"="\"\""
     @="\"URL: mylauncher Protocol\""

     [HKEY_CLASSES_ROOT\mylauncher\shell]

     [HKEY_CLASSES_ROOT\mylauncher\shell\open]

     [HKEY_CLASSES_ROOT\mylauncher\shell\open\Command]

     ;example path to the launcher is presented below. Put your own and mind the escape characters that are required.
     @="\"\\\\nt_sever1\\Tools\\Launcher\\BIN\\mylauncher.exe\" \"%1\"" 
```

A. 通过您的系统管理员中央分发分发 reg 密钥或在每台 PC 上启动 .reg 文件。
B. 用法：
mylauncher:AppYouWantToLaunchPathGoesHere?ArgumentsGoHere

3.  在您的网页上创建超链接：
    代码：

    ```
     <!doctype html>
     <html>
     <head>

      </head>
      <body>

       <div class="test-container">
          <a href='mylauncher:C:\Program Files\IBM\Client Access\Emulator\pcsfe.exe?U=MyUserName' >TEST</a>
       </div>

       </body>
        </html> 
    ```

    如果有什么不起作用，请写信给我。我会帮你的。
    祝朋友好运。

# jquery - Struts2 Grid 插件 - 删除全选复选框

> ID：12471739
> 
> 赞同：0
> 
> 时间：2012-09-18T06:50:01.693
> 
> 标签：jquery, struts2, grid

我想使用以下示例：

```
<s:url var="remoteurl" action="jsontable"/>
    <sjg:grid
        id="gridtable"
        caption="Customer Examples"
        dataType="json"
        href="%{remoteurl}"
        pager="true"
        gridModel="gridModel"
        rowList="10,15,20"
        rowNum="15"
        rownumbers="true"
        multiselect="true"
        multiboxonly="true"
    >
        <sjg:gridColumn name="id" index="id" title="ID" formatter="integer" sortable="false"/>
        <sjg:gridColumn name="name" index="name" title="Name" sortable="true"/>
        <sjg:gridColumn name="country" index="country" title="Country" sortable="false"/>
        <sjg:gridColumn name="city" index="city" title="City" sortable="false"/>
        <sjg:gridColumn name="creditLimit" index="creditLimit" title="Credit Limit" formatter="currency" sortable="false"/>
    </sjg:grid> 
```

多选和多选框选项在网格左侧显示一个复选框。问题是我只希望用户能够进行一项选择，因此不需要添加在顶部的“全选”复选框。

有没有办法这样做？或者有没有办法扩展 JQuery 网格标签来删除这个按钮？我查看了标签模板和一些源文件，但不知道从哪里开始（以及它是否是正确的方法）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T13:37:34.727

您可以尝试以下脚本：

```
$("input#cb_gridtable").hide(); // this hides the checkbox 
```

ps：gridtable = id 为您的网格

# c# - 将计数器放在 zedgraph 的 Xaxis 中

> ID：12471742
> 
> 赞同：-1
> 
> 时间：2012-09-18T06:50:10.450
> 
> 标签：c#, zedgraph

C#、W7、VS2010 和 Zedgraph。

在桌面应用程序中，有一个 numericUpDown 范围从 1 到 3300。 numericUpDown 的每个 1 等于 1 秒。在 ZedGraph 上，如何将这个 numericUpDown 以 00:00~55:00 的格式放在 Xaxis 中，间隔为 5 分钟？

在此先感谢，庞特斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:40:26.040

你的 XAxis 中应该改变的 numericUpDown 是什么？maxScale 值？，如果是，则将以下代码添加到 numericUpDown 事件`zedGraphControl1.GraphPane.XAxis.Scale.Max = numericUpDown1.Value`

# asp-classic - 无法使用经典的 asp iis 7.5 下载文件

> ID：12471747
> 
> 赞同：0
> 
> 时间：2012-09-18T06:50:28.780
> 
> 标签：asp-classic, connection, download

我正在开发一个用经典 asp 编码的客户端网站，在终端服务器上安装了 iis 7.5 和 windows server 2008 r2。我遇到的问题是当用户尝试下载 jpg 文件时。该代码很好，并且在他们更改服务器之前可以正常工作，但是现在当您单击下载链接时，您会看到以下页面之一：

```
The connection was reset                       ( Firefox)
Connection closed by remote server             (  Opera )
Internet Explorer cannot display the webpage   (   ie   ) 
```

这只发生在尝试从这些页面下载文件时，所有其他页面都按预期工作。我完全不知道问题可能是什么，我已经花了几个小时浏览论坛和我能想到的任何东西。我猜这更像是一个后端配置问题，但我并不积极，也不知道需要改变什么才能让它再次工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T00:17:11.880

此代码适用于 iis 7.5 win2k8r2：

* * *

```
Sub s_getFile(sPath, sfilename, sBaseName)

Response.Buffer = False 
Server.ScriptTimeout = 30000 

Response.ContentType = "application/x-unknown" 

Response.AddHeader "Content-Disposition", "attachment; filename=" & sfilename 

Set adoStream = CreateObject("ADODB.Stream") 

adoStream.Open() 
adoStream.Type = 1 
adoStream.LoadFromFile(sPath & "\" & sBaseName) 

iSz = adoStream.Size 
```

`Response.AddHeader "Content-Length", iSz`可能需要

```
chunk = 2048 
For i = 1 To iSz \ chunk 
    If Not Response.IsClientConnected Then Exit For 
    Response.BinaryWrite adoStream.Read(chunk) 
Next 

If iSz Mod chunk > 0 Then 
    If Response.IsClientConnected Then 
        Response.BinaryWrite adoStream.Read(iSz Mod chunk) 
    End If 
End If 

adoStream.Close 
Set adoStream = Nothing 

Response.End 
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T07:00:43.640

可能有很多问题。我建议运行 Fiddler 的副本以查看是否有响应错误代码。

由于这是经典的 asp，请检查代码中是否存在任何可能隐藏错误的内容。这将是`on error resume next`。使用粗略的调试技术，例如`response.write "got here"`将代码进度写入日志文件，以查看停止的位置。

它可能根本不是 IIS。我的猜测是这是一个文件权限问题。

**其他要查看的链接：**

[如何获得在 IIS 7.0 下运行的经典 asp 应用程序的指南](https://stackoverflow.com/questions/637326/how-to-guide-for-getting-a-classic-asp-application-working-under-iis-7-0)

# php - Mysql给出空结果

> ID：12471748
> 
> 赞同：-1
> 
> 时间：2012-09-18T06:50:28.760
> 
> 标签：php, mysql, sql, phpmyadmin

```
 <?php  $bolge="MARMARA";
         $sorgu = "SELECT * FROM veriler WHERE bolge=\"$bolge\"";
         $sonuc=mysql_query($sorgu);
         echo $sorgu;
         $sonuc= mysql_query($sql,$baglanti);
         if(!$sonuc)
         die(mysql_error());
         while($satir= mysql_fetch_array($sonuc))
         {
         $id= $satir["id"];
         $sehir= $satir["sehir"];
         $firma= $satir["firma"];
         $adres= $satir["adres"];
         $tel= $satir["tel"];
         $web= $satir["web"];
        ?> 
```

它是我的代码。

![mysql结果](../Images/0a6f3bd2161e7be9987aff082d560e06.png)

它是我的数据库和连接完成。

给出这个结果；

```
SELECT * FROM veriler WHERE bolge="MARMARA";
**Query was empty** 
```

为什么给出“**查询为空**”错误？我有查询，需要给出结果。（抱歉英语不好）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T06:52:13.607

尝试用单引号将值括起来

```
$sorgu = "SELECT * FROM veriler WHERE bolge='$bolge'"; 
```

和

```
$sorgu = "SELECT * FROM veriler WHERE bolge='$bolge'";
$sonuc = mysql_query($sorgu);

while ($satir = mysql_fetch_array($sonuc)) 
{
    $id= $satir["id"];
    // other fields.. 
} 
```

但是您的代码容易受到`SQL Injection`. 或者，改为使用`PDO`或`MySQLi`扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T06:56:35.547

1.  不推荐使用 mysql_* 函数

2.  将 PDO 或 mysqli 与准备好的语句一起使用

3.  试试这个 ：

    ```
    $sorgu = "SELECT * FROM veriler WHERE bolge='{$bolge}'"; 
    ```

但是，您也可以使用 mysql_real_escape_string

只是一个问题，这是什么意思：

```
$sonuc=mysql_query($sorgu);  //OK, valid SQL
echo $sorgu;
$sonuc= mysql_query($sql,$baglanti); //Bad, empty (undeclared variable) 
```

$sql 变量未设置这导致**查询为空**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T06:56:31.363

我会说尝试删除（至少评论）这一行：

```
$sonuc= mysql_query($sql,$baglanti); 
```

它使用未声明的变量`$sql`和`$baglanti`

# ruby-on-rails - Rspec Ruby 1.9 错误

> ID：12471755
> 
> 赞同：0
> 
> 时间：2012-09-18T06:51:09.133
> 
> 标签：ruby-on-rails, ruby, testing, rspec

在执行命令以测试我的整个应用程序时，我收到以下错误：

```
rspec spec/
/Users/ivankutsarov/railstwitter/twitter/spec/requests/static_pages_spec.rb:5:in `<top (required)>': undefined method `subject' for main:Object (NoMethodError)
from /Users/ivankutsarov/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:245:in `load'
from /Users/ivankutsarov/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:245:in `block in load'
from /Users/ivankutsarov/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
from /Users/ivankutsarov/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:245:in `load'
from /Users/ivankutsarov/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in `block in load_spec_files'
from /Users/ivankutsarov/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in `map'
from /Users/ivankutsarov/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in `load_spec_files'
from /Users/ivankutsarov/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.11.1/lib/rspec/core/command_line.rb:22:in `run'
from /Users/ivankutsarov/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.11.1/lib/rspec/core/runner.rb:69:in `run'
from /Users/ivankutsarov/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.11.1/lib/rspec/core/runner.rb:8:in `block in autorun' 
```

# java - 使用 Swagger 的 CXF REST API 文档

> ID：12471760
> 
> 赞同：12
> 
> 时间：2012-09-18T06:51:43.660
> 
> 标签：java, documentation-generation, api-design, swagger, cxfrs

根据 Swagger 的教程，似乎[swagger](http://swagger.wordnik.com)只支持[Jersey](https://jersey.java.net)框架（参见[https://github.com/wordnik/swagger-core/wiki/java-jax-rs](https://github.com/wordnik/swagger-core/wiki/java-jax-rs)）

有人有使用[CXF JAX-RS](http://cxf.apache.org/docs/jax-rs.html)实现的经验吗？你能在这里分享你的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-04T17:05:27.330

是的，可以使用 swagger-jaxrs_2.10 模块将 Swagger 与 CXF JAX-RS 实现一起使用。

在 CXF 环境中使用 Swagger 需要一些可以通过 Spring 应用程序上下文完成的特定配置。

这是一个很好的[教程](https://github.com/wordnik/swagger-core/wiki/Java-CXF-Quickstart)和这种配置的[例子](https://github.com/wordnik/swagger-core/tree/master/samples/java-jaxrs-cxf)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-11-26T11:07:35.443

是的，可以将 swagger 与 Apache CXF 一起使用。下面是我的工作 API 中的招摇用法。

```
@GET
    @Path("/version")
    @Produces(MediaType.APPLICATION_JSON)
    @ApiOperation(value = "For paged fetches returns a version for future fetches")
    public long version(@Context HttpHeaders headers) {
        return ABC.version();
    } 
```

# c++ - 创建多个 TCP Socket 连接

> ID：12471761
> 
> 赞同：4
> 
> 时间：2012-09-18T06:51:45.310
> 
> 标签：c++, c, multithreading, sockets, visual-c++

在我的一个解析程序中，我必须执行以下操作（在 C、C++、VC++ 中）：-

我必须通过套接字编程连接 100 台机器（透析机）。向每台机器发送请求并接收来自机器的响应以及我将从机器获得的数据我必须解析该数据并将值写入文件中。我必须每 5 秒后向每台机器发送请求.

所以为了完成上述任务，我想这样做： -

我将从数据库中读取每台机器的ip和端口，创建一个线程连接到每台机器，并在每个线程中创建一个子线程（子线程），它将发送和接收并解析来自机器的数据每 5 秒（并将值写入 txt 文件）。我的解析功能将是通用的。

是否可行的解决方案。请帮助我。提前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T07:15:48.913

您的解决方案听起来很合理，除了一点。您提到您将创建一个线程来连接到每台机器，然后创建一个子线程来管理发送、接收和解析。我不明白你为什么需要创建一个子线程。您应该能够处理连接线程中的所有内容。还要考虑每个连接 1 个线程可能无法很好地扩展，如果此应用程序必须处理大量机器，则应避免每台机器一个线程。

甚至可以使用简单的线程池而不是每个连接 1 个线程来实现这一点，这不会很好地扩展。您可以考虑创建每 5 秒放入工作队列的任务，线程池将连接、读取、断开连接、解析和处理。假设这是 TCP/IP，您可能不应该保持连接打开，而是每次读取都连接/断开连接，类似于 HTTP。

[这](https://stackoverflow.com/q/9989784/1158895)是一个 vc++ 线程池相关的问题。这里有一些更相关的信息[。](http://msdn.microsoft.com/en-us/library/system.threading.threadpool%28v=vs.71%29.aspx)

另一种选择是使用[libevent](http://libevent.org/)进行套接字通信。至于解析，还有其他库可以使用，例如[Apache Thrift](http://thrift.apache.org/)或[JSon](http://www.json.org/)，它们都是开源的。这些解析库的缺点是您可能还必须修改透析机，这可能不是一个选项。如果您可以使用 Thrift 之类的东西，您可以从一个库中获取所有内容：套接字通信和解析。

以下是每个连接 1 个线程的简单情况的一些代码：

```
class ThreadInfo
{
public:
  ThreadInfo(const string &ipAddress, uint16_t port) : ipAddress_(ipAddress), port_(port) {}
  string getIpAddress() {return ipAddress_;}
  uint16_t getPort() {return port_;}
  string getRecvBuffer() {return recvBuffer_;}

private:
  string ipAddress_;
  uint16_t port_;
  string recvBuffer_;
};

void *threadEntryPoint(void *userData)
{
  ThreadInfo *threadInfo = (ThreadInfo*) userData;

  // You need to decide if you want to keep the connection open while sleeping
  // or open and close it for each transaction. Change code here accordingly.
  // Create socket with threadInfo->getIpAddress() and threadInfo->getPort()

  // while(1)
  //   Send request to each machine
  //   Get response from each machine and store in threadInfo->getRecvBuffer()
  //       The buffer could also be a local var in this function, decide accordingly
  //   parse data accordingly
  //   sleep 5 seconds
}

uint16_t getPort(int machineNum) { return 3456; }
string getIpAddress(int machineNum) { return string("192.168.1.2"); }
int main(int argc, char **argv)
{
   // 3 items that we need, and that you will have to plugin accordingly:
   //   1) Num threads, assuming 100 for now
   //   2) IP address of each external machine, implement getIpAddress() accordingly
   //   3) port of each machine, implement getPort() accordingly

   int numThreads(100);
   list<pthread_t> threadIdList;

   for(int i = 0; i < numThreads; ++i)
   {
      pthread_t threadId;
      ThreadInfo *threadInfo = new ThreadInfo(getIpAddress(i), getPort(i));
      pthread_create(&threadId, NULL, threadEntryPoint, threadInfo);
      threadIdList.push_back(threadId);
   }

   // Wait for the threads to finish
   std::list<pthread_t>::iterator iter = threadIdList.begin();
   while(iter != threadIdList.end())
   {
     pthread_t threadId = *iter++;
     pthread_join(threadId, NULL);
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T09:22:21.500

对于 100 台机器，每 5 秒轮询一次，每台机器一个线程是合理的 - 大多数时间线程将在 Sleep(5000) 上阻塞，而在套接字 I/O 或磁盘 I/O 上阻塞大部分时间其余时间。对于这种加载（甚至是加载的五倍），我认为没有必要求助于异步 I/O 或线程池 - 为什么不必要地使事情复杂化？

正如@Brady 所指出的，我不明白为什么每个连接需要多个线程，假设您发布的要求是 - 每隔约 5 秒轮询一次并将回复写入文本文件。

我猜，（希望 :)，5 秒间隔不是安全关键的实时要求，如果由于某些临时软件或网络延迟而偶尔为 6 秒，透析机将继续正常运行. 我不是血液科医生/肾脏科医生，但如果任何透析机可以对整体治疗做出任何重大改变（这需要数小时），如果投票/指示偶尔延迟一秒钟，我会感到惊讶。

编辑-重新。'解析函数并将数据写入文件函数对于所有线程都是通用的' - 应该没问题，假设每台机器都有不同的文本文件。如果所有日志都写入一个日志文件，那就更成问题了——每个日志条目实际上应该排到一个记录器线程的队列中，该线程单独写入日志文件。使用已经支持这种功能的现有的、经过验证的记录器框架将是最简单的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T07:44:51.867

如果你对网络和磁盘 IO 都使用[boost::asio](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio.html)框架，你可能会得到比每台机器处理一个线程少得多的线程。

另外，它有一个很好的用于套接字编程的高级接口。

# sql - Ruby Snytax 实现这个 SQL 查询

> ID：12471769
> 
> 赞同：0
> 
> 时间：2012-09-18T06:52:12.017
> 
> 标签：sql, ruby-on-rails

我正在开发一个 RoR Webapp，它是一个仪表板。为此，我需要在执行结果计数之前执行 2 个表的 INNER JOIN

我如何使用 Active Record 在 Ruby 语法中编写它

```
SELECT COUNT(*) FROM feedbacks 
  INNER JOIN feedback_categories ON feedbacks.id=feedback_categories.feedback_id 
  WHERE feedback_categories.category_id=1 
```

这两个表是feedbacks 和feedback_categories。？任何指针都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T07:00:50.627

您可以使用连接：

```
Feedback.joins(:feedback_category).where(:feedback_categories => {:category_id => 1}).count 
```

请注意，joins 和 where 子句中的 feedback_category 可以根据您的关系进行不同的复数形式。在它总是复数的地方，在连接中它可以是单数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T06:58:24.763

[http://guides.rubyonrails.org/active_record_querying.html](http://guides.rubyonrails.org/active_record_querying.html)

这会有所帮助.. :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T07:36:11.837

假设您有一个名为 Feedback 的模型，只需使用它：

```
Feedback.count :conditions => "feedback_categories.category_id = 1",
               :joins => "INNER JOIN feedback_categories ON feedbacks.id=feedback_categories.feedback_id" 
```

# regex - 使用 Perl 将键替换为文件中的值

> ID：12471770
> 
> 赞同：1
> 
> 时间：2012-09-18T06:52:12.107
> 
> 标签：regex, perl

我必须用其各自的哈希值替换哈希中的所有键。此操作在文件中执行。

下面是我的代码：

```
my $file= 'IFandENDIF.txt';
my $bak= "$file.bak";
rename $file, $bak or die "cannot rename $file into $bak: $!";

open( my $in,  '<', $bak)  or die "cannot open $bak: $!";
open( my $out, '>', $file) or die "cannot create $file: $!";

while( <$in>)
{ 
    s/if(exists(%replstr))/$replstr{$1}/xeg;    
    print {$out} $_;   
}

close $in; 
close $out; 
```

请指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T07:06:10.380

用哈希值替换所有键实例：

```
while ( my $line = <$in> ) {

    $line =~ s/$_/$replstr{$_}/g for keys %replstr;
    print $out $line;
} 
```

请注意，`/e`修饰符将替换视为代码，而不是模式

# python - 在 python 中获取 Windows 版本的更好方法是什么？

> ID：12471772
> 
> 赞同：3
> 
> 时间：2012-09-18T06:52:16.900
> 
> 标签：python, windows, operating-system, version, platform

我将编写一个执行 Windows 操作系统版本检查的程序，因为我可以使用 sys.windowsversion()[0] 或返回字符串而不是 int 的平台模块来执行此操作，获得 Windows 发布版本的更好方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T06:55:01.927

你可以通过调用来做到这一点[`sys.getwindowsversion`](http://docs.python.org/library/sys.html#sys.getwindowsversion)。例如这个输出：

```
>>> sys.getwindowsversion()
sys.getwindowsversion(major=6, minor=1, build=7601, platform=2, service_pack='Service Pack 1') 
```

适用于 Windows 7。

来源： http: [//mail.python.org/pipermail/tutor/2003-November/026227.html](http://mail.python.org/pipermail/tutor/2003-November/026227.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-27T17:07:27.073

在 C 中执行此操作的常用方法是通过 _WIN32_WINNT 宏，其值在[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383745%28v=vs.85%29.aspx#macros_for_conditional_declarations)记录。[sys.getwindowsversion()](http://docs.python.org/library/sys.html#sys.getwindowsversion)可以间接用于确定 _WIN32_WINNT，因为它公开了所有必要的位。

```
import sys

WIN_10 = (10, 0, 0)
WIN_8 = (6, 2, 0)
WIN_7 = (6, 1, 0)
WIN_SERVER_2008 = (6, 0, 1)
WIN_VISTA_SP1 = (6, 0, 1)
WIN_VISTA = (6, 0, 0)
WIN_SERVER_2003_SP2 = (5, 2, 2)
WIN_SERVER_2003_SP1 = (5, 2, 1)
WIN_SERVER_2003 = (5, 2, 0)
WIN_XP_SP3 = (5, 1, 3)
WIN_XP_SP2 = (5, 1, 2)
WIN_XP_SP1 = (5, 1, 1)
WIN_XP = (5, 1, 0)

def get_winver():
    wv = sys.getwindowsversion()
    if hasattr(wv, 'service_pack_major'):  # python >= 2.7
        sp = wv.service_pack_major or 0
    else:
        import re
        r = re.search("\s\d$", wv.service_pack)
        sp = int(r.group(0)) if r else 0
    return (wv.major, wv.minor, sp) 
```

用法：

```
if get_winver() >= WIN_XP_SP3:
     ... 
```

# php - 无法使用 NSXMLParser 检索 xml 值

> ID：12471774
> 
> 赞同：0
> 
> 时间：2012-09-18T06:52:31.243
> 
> 标签：php, iphone, objective-c, cocoa-touch, xml-parsing

我在 xml 中的 php 响应属于这种类型

```
<users>
<username>myemail</username>
<password>mypass</password>
 </users> 
```

现在这是我的 parseUrl 类

```
 NSURL *parserUrl = [[[NSURL alloc] initWithString:urlString] autorelease];
        NSXMLParser *parser = [[[NSXMLParser alloc] initWithContentsOfURL:parserUrl] autorelease];
        [parser setDelegate:self];

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {

    if ( [elementName isEqualToString:@"users"]) 
    {
        return;
    }

    if ( [elementName isEqualToString:@"username"] ) 
    {
        NSString *val = [attributeDict  objectForKey:@"username"] ;    
      return;
    }

} 
```

现在的问题是，`attributeDict`它给出了 0 对。该函数正在读取`username, password and users`意味着它可以进入这个循环

```
 if ( [elementName isEqualToString:@"username"] ) 
        {
            NSString *val = [attributeDict  objectForKey:@"username"] ;    
          return;
        } 
```

但是我怎样才能检索这个节点的值呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T07:14:11.527

删除`return`语句

并且 attributeDict 总是包含属性。

例如

这里'id'是用户的属性。

要获取字符串值，您需要编写

```
//take string variable in header file 'elementname'

NSString *elementname;

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {

elementname = elementName;
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {

    elementname = elementName;
}

-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{

   if([elementname isEqualToString:@"username"])
   {
       NSLog(@"username : %@",string);
   }
   else if([elementname isEqualToString:@"password"])
   {
       NSLog(@"password : %@",string);
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T07:02:18.333

尝试这个

```
-(void) parserDidStartDocument:(NSXMLParser *)parser
{
    list = [[NSMutableArray alloc] init];
    resultArray = [[NSMutableArray alloc] init];
    currentElementValue = [[NSMutableString alloc] init];
}
-(void) parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName
{
currentElementName = [elementName copy];

if([elementName isEqualToString:@"username"])
{
    list = [[NSMutableArray alloc] init];
}
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName
  namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName 
{
if([elementName isEqualToString:@"username"])
{
    [resultArray addObject: currentElementValue];
}
}

-(void) parserDidEndDocument:(NSXMLParser *)parser
{
NSLog(@"Result Array= %@",resultArray);
NSLog(@"list Array= %@",list);
} 
```

# c# - 如何在 aspx 页面中检查新会话？

> ID：12471778
> 
> 赞同：0
> 
> 时间：2012-09-18T06:52:39.273
> 
> 标签：c#, asp.net

如何在 aspx 页面中检查新会话？以下三行检查会话有什么区别

```
1\. if (Session["DETAILS"] == null) 
2\. if (Session["DETAILS"] == "")
3\. if (Session["DETAILS"].ToString() == "new") 
```

请帮助我如何在 aspx 页面的页面加载事件中检查会话。所以我需要如果会话是新的，我需要输入新的值。如果会话是编辑，我需要编辑已经存在的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T07:01:25.170

前两个`if`语句检查 key 标识的会话值`DETAILS`是否存储在当前会话中。

`NullReferenceException`当具有给定键的对象未存储在会话中并且调用导致`null`引用时，第三个可能会抛出 a 。这是不安全的。

如果我做对了，当密钥不在会话中时，会话是“新的”。它还取决于值的类型，因此`string`代码可能看起来像

```
var sessionValue = SESSION["DETAILS"];
if(string.IsNullOrEmpty(sessionValue))
{
   // session is "new", i.e. the value was not set
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T07:01:46.527

如果通过“新会话”，您的意思是检查会话是否为空，然后使用

```
if(string.isNullOrEmpty(Session["Obj"].toString())) //This will return true or false
{
   //Do this if true
}
else
{
   //Do this if false
   //Below will force the session to be cleared
   Session.Abandon();
   Session.Clear();
   Response.Redirect(Request.RawUrl); //Which will reload the current page
} 
```

`if (Session["DETAILS"]== null)`检查会话是否为空，
`if (Session["DETAILS"]== "")`检查会话字符串是否为空，

**注意上面两个可以换成** `string.isNullOrEmpty(Session["Obj"].toString());`

`if (Session["DETAILS"].tostring()== "new")`检查会话是否等于相关字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T07:04:08.040

```
if (Session["DETAILS"]== null) 
```

***用于检查会话是否存在。（如果会话存在与否）***

```
if (Session["DETAILS"]== "") 
```

***用于检查会话是否为空（不包含任何值。）***

```
if (Session["DETAILS"].tostring()== "new") 
```

***用于将 Session 值与其他值进行比较（在这种情况下 => “new”）***

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T07:04:55.540

查看 Global.asx 中的事件，尤其是 Session_Start 和 Session_End 事件：

```
protected void Session_Start(object sender, EventArgs e)
{
    // Code that runs when a new session is started
    if (HttpContext.Current.Session["DETAILS"] != null)
    {
        HttpContext.Current.Session["DETAILS"] = "[type here your data]";
    }
} 
```

[参考](http://msdn.microsoft.com/en-us/library/ms178583%28v=vs.100%29.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T07:09:48.503

您可能会发现这很有帮助

```
Session.IsNewSession 
```

更多信息：http: [//msdn.microsoft.com/en-us/library/system.web.sessionstate.httpsessionstate.isnewsession.aspx](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.httpsessionstate.isnewsession.aspx)

对于解释，您得到了很多答案，而@kakarott 的答案又精确又小

# r - 在R中将矩阵的对角线设置为零

> ID：12471780
> 
> 赞同：14
> 
> 时间：2012-09-18T06:52:44.473
> 
> 标签：r

我在这里尝试了一些建议的解决方案。但这不适用于我的情况。我有一个代码，在这里：

```
a <- read.table("Whirr_127.csv", header=T, sep=",", row.names=1) # task assignment / people vs task
b <- read.table("Files_Whirr_127.csv", header=T, sep=",", row.names=1) #task vs files 
a
b

#calc cr , cr = ta * tf * transpose(ta)
cr <- as.matrix(a) %*% (as.matrix(b) %*% as.matrix(t(b)) %*% as.matrix(t(a)))
cr

#set value to 1, to initialize table
cr[cr>=1]<-1
cr

#identify diagonal matrix, set to zero
cr<-as.matrix(0,ncol=ncol(cr),nrow=nrow(cr))
cr<-diag(cr,x=0) 
```

我想将对角线值设置为零。最后两行中使用的代码似乎不适用于我的情况。

另外，我想使用中的文件名`a`，并将其保存为我尝试使用的 AB_Files_Whirr_127.csv

```
write.csv(cr,file = paste("CR_", a,".csv") 
```

但是，我的目录中没有任何内容。

cr的示例输出：

```
 Adrian Cole Alison Wong Andrei Savu Bruno Dumon Edward J. Yoon Eugene Koontz Jakob Homan Kelvin Kakugawa Kirk True Lars George Soren Macbeth Stu Hood
Adrian Cole               0           0           0           0              0             0           0               0         0           0             0        0
Alison Wong               0           0           0           0              0             0           0               0         0           0             0        0
Andrei Savu               0           0           1           0              0             0           0               0         0           1             1        0
Bruno Dumon               0           0           0           0              0             0           0               0         0           0             0        0
Edward J. Yoon            0           0           0           0              0             0           0               0         0           0             0        0
Eugene Koontz             0           0           0           0              0             0           0               0         0           0             0        0
Jakob Homan               0           0           0           0              0             0           0               0         0           0             0        0
Kelvin Kakugawa           0           0           0           0              0             0           0               0         0           0             0        0
Kirk True                 0           0           0           0              0             0           0               0         0           0             0        0
Lars George               0           0           1           0              0             0           0               0         0           1             1        0
Soren Macbeth             0           0           1           0              0             0           0               0         0           1             1        0
Stu Hood                  0           0           0           0              0             0           0               0         0           0             0        0
Tibor Kiss                0           0           0           0              0             0           0               0         0           0             0        0
Tom White                 0           0           1           0              0             0           0               0         0           1             1        0
Unassigned                0           0           0           0              0             0           0               0         0           0             0        0
                Tibor Kiss Tom White Unassigned
Adrian Cole              0         0          0
Alison Wong              0         0          0
Andrei Savu              0         1          0
Bruno Dumon              0         0          0
Edward J. Yoon           0         0          0
Eugene Koontz            0         0          0
Jakob Homan              0         0          0
Kelvin Kakugawa          0         0          0
Kirk True                0         0          0
Lars George              0         1          0
Soren Macbeth            0         1          0
Stu Hood                 0         0          0
Tibor Kiss               0         0          0
Tom White                0         1          0
Unassigned               0         0          0 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-18T06:55:02.723

`a`不能用于输出文件的名称，因为它不是字符变量，而是数据框。

```
infile <- "Whirr_127.csv"
a <- read.table(infile, header=T, sep=",", row.names=1)
....
diag(cr) <- 0
write.csv(cr, file = paste0("CR_", infile, ".csv") 
```

该`diag`行的语法对于新的 R 用户来说往往看起来很有趣，但实际上它只是调用赋值函数的替代语法`diag<-`，即被`diag(x) <- 0`解释为`diag<-(x, 0)`.

**更新：多个文件**

如果您想对多个配对文件重复上述操作，您可以这样做。

```
a.files <- grep("^Whirr", dir(), value=TRUE)
b.files <- paste0("Files_", a.files)
for(i in length(a.files)){
    a <- read.table(a.files[i], ...)
    b <- read.table(b.files[i], ...)
    ...
    write.csv(cr, paste0("CR_", a.files[i], ".csv"))
} 
```

# objective-c - 获得 ASIFormDataRequest 响应后应用程序崩溃

> ID：12471783
> 
> 赞同：0
> 
> 时间：2012-09-18T06:52:54.453
> 
> 标签：objective-c, ios, asiformdatarequest

在我的应用程序中，我使用 ASIFormDataRequest 发送我的新用户注册请求。该请求包含用户详细信息以及使用 base64Encoding 转换的图像。我也得到了回应。但应用程序在收到响应后崩溃。请帮我解决这个问题。这段代码有什么错误吗？

```
NSString *sx=@"male";
        registrationStatusBlock = response;
        NSDateFormatter *dateOfBirthFormatter = [[NSDateFormatter alloc] init];
        [dateOfBirthFormatter setDateFormat:@"YYYY:MM:dd"];
        [dateOfBirthFormatter setTimeZone:[NSTimeZone timeZoneWithName:@"UTC"]];
        NSString *formattedDate = [dateOfBirthFormatter stringFromDate:userDetails.dateOfBirth];

        NSLog(@"URL: %@", [NSString stringWithFormat:@"%@&firstName=%@&lastName=%@&password=%@&emailId=%@&portrait=%@&dob=%@&gender=%@&task=createUser",webServiceURL,userDetails.firstName, userDetails.lastName, userDetails.emailAddress, userDetails.password, userDetails.profilePicture, formattedDate, sx]);
        NSLog(@"Gender %@",userDetails.gender);

        int lengthOfData=0;
        NSString *encodedString ;
        NSData *    imageData = UIImagePNGRepresentation(userDetails.profilePicture);

        registrationStatusBlock = response;
        self.responseData = [NSMutableData data];
        if(userDetails.profilePicture !=NULL)
        {
            lengthOfData = imageData.length;
            encodedString =  [NSString base64StringFromData:(NSData *) imageData length:lengthOfData];
        } 
        else
            encodedString=@"";

        NSLog(@"URL: %@", [NSString stringWithFormat:@"%@&firstName=%@&lastName=%@&password=%@&emailId=%@&portrait=%@&portrait_type=png&dob=%@&gender=%@&task=createUser",webServiceURL,userDetails.firstName, userDetails.lastName, userDetails.emailAddress, userDetails.password, encodedString, formattedDate, sx]);

        NSMutableString *URLString = [[NSMutableString alloc]initWithString:webServiceURL];
        [URLString appendString:[NSString stringWithFormat:@"%@&firstName=%@&lastName=%@&password=%@&emailId=%@&portrait=%@&portrait_type=png&dob=%@&gender=%@&task=createUser",webServiceURL,userDetails.firstName, userDetails.lastName, userDetails.emailAddress, userDetails.password, encodedString, formattedDate, sx]];

        ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:[NSURL URLWithString:[webServiceURL stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding]]];

        [request addPostValue:userDetails.firstName       forKey:@"firstName"];
        [request addPostValue:userDetails.lastName        forKey:@"lastName"];
        [request addPostValue:userDetails.password        forKey:@"password"];
        [request addPostValue:userDetails.emailAddress    forKey:@"emailId"];
        [request addPostValue:encodedString forKey:@"portrait"];
        [request addPostValue:@"png" forKey:@"portrait_type"];

        [request addPostValue:formattedDate forKey:@"dob"];

        [request addPostValue:sx forKey:@"gender"];

        [request addPostValue:@"createUser"                   forKey:@"task"];
        [request setRequestMethod:@"POST"];
        NSLog(@" user registration request %@",request);
        [request setDelegate:self];
        [request startAsynchronous];
        [NSThread sleepForTimeInterval:5];
        NSLog(@"response %@",[request responseString]);
        registrationStatusBlock =[[request responseString]JSONValue]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T07:51:25.460

```
[request setDelegate:self];
[request startAsynchronous];
NSThread sleepForTimeInterval:5];
NSLog(@"response %@",[request responseString]);
registrationStatusBlock =[[request responseString]JSONValue]; 
```

那是什么？你开始一个异步请求，然后睡觉，然后像得到响应一样醒来？这不是异步的工作方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T08:58:04.193

使用委托获取响应字符串。

```
[request setDelegate:self];
[request setDidFinishSelector:@selector(requestFinished:)];
[request setDidFailSelector:@selector(requestFailed:)];
[request startAsynchronous]; 
```

然后捕获委托的响应：

```
- (void)requestFinished:(ASIHTTPRequest *)theRequest {
     NSLog(@"response %@",[theRequest responseString]);
}

- (void)requestFailed:(ASIHTTPRequest *)theRequest {
     NSLog(@"response Failed%@, Error:%@",[theRequest responseString],[theRequest error]);
} 
```

# android - 是否可以建立内部 APNs 服务器？

> ID：12471786
> 
> 赞同：4
> 
> 时间：2012-09-18T06:53:29.057
> 
> 标签：android, ios, push-notification, apple-push-notifications, google-cloud-messaging

我正计划构建一个企业 iOS/Android 应用程序。我想从推送通知中受益（对于 Android，它被称为 Google Cloud Messaging）。但是，我们的设备不会连接到互联网，而是通过 Wifi 连接到 Intranet。因此，我们无法使用 Apple 或 Google 提供的标准 APN 或 GCM。

我只是想知道是否可以建立一个私有 APNs 服务器？以及任何可用的开源库。或者如果没有。我在哪里可以买到一个？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T12:33:04.367

对于 Apple iOS，您不能购买一台，因为核心操作系统使用证书来确保它连接到 Apple 的 APN 服务器。

因为谷歌安卓是开源的，你可以修改核心系统连接到自己的APN网络。但是您最大的问题将是制作二进制文件并安装在现有的不同硬件上。

# jquery - jQuery单击功能无法正常工作

> ID：12471789
> 
> 赞同：0
> 
> 时间：2012-09-18T06:53:45.403
> 
> 标签：jquery, wordpress, syntax, click

我正在尝试通过 jQuery 创建一个单击事件

这是HTML代码

```
<div class="wpcart_gallery" style="text-align:center; padding-top:5px;">

<a class="thickbox cboxElement"  href="0037.jpg" rev=" 0037.jpg">
<img class="attachment-gold-thumbnails colorbox-736" width="50" height="50" src="0037-50x50.jpg">
</a>

<a class="thickbox cboxElement"  href="0038.jpg" rev=" 0038.jpg">
<img class="attachment-gold-thumbnails colorbox-736" width="50" height="50" src="0038-50x50.jpg">
</a>

<a class="thickbox cboxElement"  href="0039.jpg" rev=" 0039.jpg">
<img class="attachment-gold-thumbnails colorbox-736" width="50" height="50" src="0039-50x50.jpg">
</a>

</div> 
```

请注意，图像链接的类名称为thickbox cboxElement。当页面加载类 cboxElement 从 div 内的第一个图像中删除时，我要做的是当用户单击任何图像以从该图像链接中删除类名 cboxElement 并将类 cboxElement 添加到其他图片链接。

```
<script type="text/javascript">
    jQuery('document').ready(function($){
         $(".wpcart_gallery a:first").removeClass("cboxElement");
         jQuery(".wpcart_gallery img").click(function($){
             jQuery(".wpcart_gallery a").removeClass('cboxElement').siblings().addClass('cboxElement');
        });
    });
</script> 
```

上面的代码工作......排序。它从第一个图像链接中删除了类名 cboxElement，但是单击事件不起作用，当我单击任何图像时，它会将类 cboxElement 添加到所有图像链接中。

我要做的是将类 cboxElement 添加到所有图像链接，除了被点击的链接。

我的 jQuery 代码错误控制台中没有任何错误，jquery.js 文件位于标头中并且正在运行。

这是一个示例……请注意大图下方的 3 张图片。[http://www.taranmarlowjewelry.com/products-page/rings/product-1-2/](http://www.taranmarlowjewelry.com/products-page/rings/product-1-2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T07:04:07.023

当你做一个

```
 jQuery(".wpcart_gallery a") 
```

您将获得 div 中所有标签的列表，而不是您单击的标签。因此，当首先删除类然后将其添加到所有兄弟姐妹时意味着：

1.  从所有标签中删除类
2.  将类添加到所有标签

要获得属于被点击的图像的 a，请执行以下操作：

```
jQuery(this).closest('a') 
```

希望这有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T07:02:44.463

从函数参数中删除 $

```
jQuery(".wpcart_gallery img").click(function(){
             jQuery(".wpcart_gallery a").removeClass('cboxElement').siblings().addClass('cboxElement');
        }); 
```

# iphone - 显示在启动应用程序时从 TableView 中删除行的特征，如下图

> ID：12471790
> 
> 赞同：0
> 
> 时间：2012-09-18T06:53:47.917
> 
> 标签：iphone, ios, tableview

我想在启动应用程序时显示带有此图像的表格视图。

![在此处输入图像描述](../Images/dfeb6d754a1d42636d1abd51db6470c1.png)

之后我们可以删除带有此图像的行。

![在此处输入图像描述](../Images/2e3522d7ef9519a53af55e0359f15507.png)

我看到了一些示例，但它与按钮（编辑）一起使用。我们可以这样做吗？请给出简单的代码。提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T07:10:09.047

你应该试试这个[链接](https://stackoverflow.com/questions/5451027/delete-rows-from-uitableview)。

可能对你有帮助。你只需要正确的一个委托方法

# php - 用 Python 编码的 PHP 中的解码字符串

> ID：12471792
> 
> 赞同：0
> 
> 时间：2012-09-18T06:53:59.440
> 
> 标签：php, python, utf-8, decode, encode

我想在 PHP 中解码一个字符串，但问题是我需要在 PHP 中解码的字符串是用 Python 编码的。那么我怎样才能得到正确的解码字符串呢？

用 Python 编码的字符串从一端放入数据库，我需要获取该编码字符串并在 PHP 中使用 UTF-8 对其进行解码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T07:22:49.527

假设数据库配置为正确处理 UTF8 编码的数据，您可以返回一个带有`utf8_decode()`;的 ISO 字符串。见[http://php.net/manual/en/function.utf8-decode.php](http://php.net/manual/en/function.utf8-decode.php)。也就是说，我认为数据是 UTF8 是有原因的，所以最好只在尝试在不支持编码的环境中显示它之前进行解码。

# http - 要求 解释

> ID：12471797
> 
> 赞同：1
> 
> 时间：2012-09-18T06:54:15.763
> 
> 标签：http, caching

摘自 Flight PHP 微框架网站：

> **HTTP缓存**
> 
> Flight 提供了对 HTTP 级别缓存的内置支持。如果满足缓存条件，Flight 将返回 HTTP 304 Not Modified 响应。下次客户端请求相同的资源时，会提示使用他们本地缓存的版本

我设法安装了框架并开始使用它。

作为一个 PHP n00b，`HTTP level caching`欢迎任何解释。扩展`caching condition`也很棒。

提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T07:10:40.170

“HTTP 级缓存”仅表示“HTTP 级缓存”，即通过 HTTP 标头完成的缓存（例如`Cache-Control`、`Expires`、`If-Modified-Since`）。这些标头可以由服务器或客户端设置。

客户端可以设置缓存条件，例如`If-Modified-Since`仅在其缓存副本过期时才获取更新的内容。服务器查看`If-Modified-Since`客户端的日期并将其与资源上的日期进行比较；如果资源较新，则提供。否则，服务器会返回一个小的`304 Not Modified`响应，通知客户端自上次请求以来没有任何变化。

# algorithm - 需要算法将数字集分成两个平衡的偶数集

> ID：12471798
> 
> 赞同：2
> 
> 时间：2012-09-18T06:54:16.763
> 
> 标签：algorithm, discrete-mathematics

我有一组数字。我正在使用 66 组，但它可以是任何大小的组，可以分成两个相等的组（例如，每个组 33 个）

这些数字不是连续的，也不是相互关联的。可以有重复。

我需要一个数学算法来确定是否有任何方法可以在两组之间分配数字，以便一组 33 中的一些等于另一组 33 中的一些。

前任。1, 8, 5, 12 = 8, 8, 8, 2（两边都等于 26）。

我知道这些是平等的。如果存在，我需要算法来找到这个分布。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T07:06:28.723

对数字进行排序。

从最高点开始，然后将下一个数字添加到总和较低的集合中。

例如，对于数字 9 7 3 3 2：

S0 = S1 = 0

9 到 S0，S0 = 9，S1 = 0

7 到 S1，S0 = 9，S1 = 7

3 到 S1，S0 = 9，S1 = 10

3 到 S0，S0 = 12，S1 = 10

2 到 S1，S0 = 12，S1 = 12

该算法将为您提供差异最小的两组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T06:59:24.830

我想这是一个直接的背包问题

1）总结所有数字让我们说S。

2) 使用所有数字作为权重，尝试放入大小为 S>>1 的麻袋

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T10:14:26.927

您的任务是众所周知的分区问题。您可以在 wiki 上找到有关它的信息： [http ://en.wikipedia.org/wiki/Partition_problem](http://en.wikipedia.org/wiki/Partition_problem)

这是NP完整的任务。如果您可以使用近似算法，那么您可以使用@Ari 的变体。但它并不总是给出正确的答案。样品：13、12、5、5、5、5、5

可以使用具有伪多项式复杂度 O(n * s) 的动态规划来建立给出正确答案的最佳解决方案，其中 n - 所有数字的计数，s - 它们的总和。

让我们拥有 P - 数字数组。那么确切的解决方案是：

```
bool hasSolution(long n, long *P, long sum)
{
   long A[SIZE][SIZE] = {{0}};
   for (long i = 1; i <= n; i++)
       for (long j= 1; j <= sum / 2; j++)
          if (j-P[i]>=0) 
             A[i][j] = MAX (A[i-1][j] , A[i-1][j-P[i - 1]] + P[i - 1])
          else
             A[i][j] = A[i-1][j];

   bool hasSolution = (A[n][sum / 2] == sum / 2);
   return hasSolution;
} 
```

# jquery - 在 Gallery Formatter 中添加指向网站的链接

> ID：12471799
> 
> 赞同：0
> 
> 时间：2012-09-18T06:54:31.673
> 
> 标签：jquery, css, drupal, module, hyperlink

[我使用带有 Drupal 7.x 的Gallery Formatter](http://drupal.org/project/galleryformatter)构建了一个投资组合网站，我想知道是否可以以某种方式为每个图库项目添加一个链接图标，用户点击后会带到另一个网站..？任何提示，提示和帮助表示赞赏！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T19:00:40.503

没弄明白，所以我继续为我的投资组合画廊使用了不同的设计

# multithreading - 同时执行多个线程周期的并发编程？

> ID：12471801
> 
> 赞同：1
> 
> 时间：2012-09-18T06:54:49.250
> 
> 标签：multithreading, parallel-processing, thread-synchronization

我想知道是否有人知道并发（即多线程、并行等）编程语言的设置使得各个线程不会仅仅因为操作系统未能为它们提供 CPU 时间而彼此落后。我什至不确定装配是否可以避免这种情况。:P 但显然，我不确定，因此提出了这个问题。

我并不是说程序需要实时访问 CPU 周期，而是说线程不应该不同步。此外，如果该语言编译为二进制可执行文件而不是字节码，或者只是由解释器运行，那将是非常好的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T07:02:49.113

我相信没有这样的事情。

原因是多个线程只有在不同的内核上执行才能真正并行执行。事实上，在多核处理器出现之前，技术上不可能同时运行（计算）不同的线程。

现代操作系统使用大量进程，因此使用大量线程（至少在逐个进程中，线程是进程的“工作”部分）。尽管有多核处理器，但在所有常见用法中，系统上的活动线程仍然比可用内核多。

当我写这些行时，我有 357 个线程活动用于“仅”8 个可用内核。

这就是调度程序的用途。它们在不同线程之间共享可用的计算时间，以避免饥饿并产生同时执行的错觉。

为了保证不同的线程同时运行并且不时不时地被放置，您应该修改操作系统的调度程序，如果可能的话，这至少是一个坏主意。

解释器的使用无济于事，因为它运行多线程应用程序的唯一方法是创建解释线程，这将有相同的问题

为了确保不同的线程同步**，您应该使用屏障或信号量**，因为您将永远无法修改用户计算机的操作系统调度程序

* * *

注意：在 HPC 应用程序中，研究人员尽量避免在上下文切换中浪费时间（保存线程运行的环境以便稍后恢复它的操作）。因此，他们根据可用内核分配线程（通常他们只为操作系统和 I/O 留下一个内核）并将其他线程固定到特定内核。这有助于他们确保尽可能高效地完成计算。

然而，这并不能保证同步，并且可能仍然需要使用特定的机制，如屏障。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-01T05:37:49.597

使用现代处理器，很难确保任何特定的计算以绝对已知的速率进行。

例如：发生缓存未命中的线程可能需要比缓存命中的同一线程多几百个周期。所以现在速度取决于缓存中的内容。缓存中的内容取决于过去线程执行的复杂控制和数据流。有很多不受控制的延迟来源（管道中断、取决于操作数的可变长度指令执行、OOO CPU 中的内部资源争用、通过各种内存层次结构和跨总线到其他 CPU 的内存延迟、消息传输/接收时间……）

因此，要使线程以完全相同的速度运行，需要大量的控制或预知能力，而这是您几乎无法获得的。（超级计算的人几乎会关闭操作系统以最小化背景噪音，例如，随机发生的中断。即使这样也无济于事）。

更好的方法是让线程发出信号，表明他们已经完成的工作可供另一个需要它的人使用。如果信号/等待很少发生，那么它会被线程的计算工作所淹没，并且处理器被有效地使用。

实现上述目标还是很困难的。如果你在所有 CPU 上进行*相同*的计算[例如，大数据并行计算]，并且非常有规律，那么总体速率可能非常相似；最后你仍然需要一些（障碍）同步，以确保它们都回到同步状态。

在每个 CPU 上将所有计算组织为“相同”是非常困难的。您更有可能有很多不规则（不同大小）的计算“颗粒”。如果您可以跟踪这些，那么您可以将它们分布在许多线程/CPU 上，依靠各个颗粒之间的显式同步以使它们整体正常工作，并将新颗粒交给突然空闲的 CPU 以保持忙碌。这可以通过“工作窃取”的概念很好地完成：每个 CPU 都有一个可以运行的未执行颗粒池，并尽可能快地处理它们。谷物可能会制造更多的谷物（如果你用完了，你就完成了计算！）。如果一个 CPU 的颗粒池变空，它会从池中为其他 CPU 窃取工作。一个工作窃取调度器很难构建。他们必须是对的，

我们的[PARLANSE](http://www.semdesigns.com/Products/PARLANSE)并行编程语言旨在处理此类问题。我们在代表程序的非常大的图表上运行它；它往往会为图中每个适度半径的补丁产生一些工作。在这样的图中有一百万个节点，我们有很多工作要做。

# java - 具有运行时 pojos 的带有 Hibernate 的 OSGi 片段包

> ID：12471804
> 
> 赞同：3
> 
> 时间：2012-09-18T06:54:57.300
> 
> 标签：java, hibernate, osgi

我的要求是使用 hibernate 映射各种数据库（特别是 SQL Server、MySQl 和 Postgres）；从 db 记录创建一个 xml 文件。

对于休眠，我正在使用 JAssist 在运行时创建 hbm 文件和 pojos。我的代码效果很好，为了进一步模块化，我为每个数据库实现了片段包。这样我的主机包将处理运行时类的创建并将它们添加到类加载器、hbm 文件创建逻辑和 BL 中。片段通过传递参数调用它。

当我为每个数据库创建一个片段包时，在我的主机包中创建的运行时 pojo 类在我的片段包中可见，我检查了“Thread.currentThread().getContextClassLoader().loadClass()”并能够创建它的实例,

问题是当我从片段包中调用休眠函数时，我得到“实体未映射”，AFAIK 当休眠无法找到带有表的映射类时出现这些异常。所以我猜 Hibernate 没有找到我的运行时 pojo 类。它可以在主机中找到。

Host : 运行时 Pojo 创建、HBM 和 CFG 创建和更新逻辑 BL

Fragment : Hibernate 层，调用 Hibernate 函数，XML 创建逻辑

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T16:09:55.163

如果您在多个捆绑包上使用 Hibernate，则始终会出现此问题。在 Hibernate 配置中，您无法确定在哪个 Bundle 中可以找到映射文件和 pojo 类文件。Hibernate 不使用 OSGI 为此提供的机制。因此，hibernate 只查找与 Hibernate 库位于同一包中的映射文件和类。

我不知道是否有针对此问题的专业解决方案（第三方产品）。

解决这个问题有两种可能：

1.  忘记您的片段包，将所有使用 Hibernate/HQL 的 Hibernate 库、映射文件、pojo、类用于所有数据库放入一个包中。使用不同的hibernate.cfg.xml文件时可以在不同的数据库之间切换；每个数据库都有自己的配置文件。这些 hibernate.cfg.xml 文件可以在包之外。

2.  编写你自己的扩展 org.hibernate.cfg.Configuration 的配置类，在这个类中你必须

    *   编写自己的类加载器，即使在其他包中也能找到 pojo 类
    *   覆盖 addResource(String resourceName, ClassLoader classLoader) 的方式，它也在其他包中找到资源
    *   覆盖 doConfigure 和 buildSessionFactory 以便它们使用您的类加载器而不是标准类加载器（使用 Thread.setContextClassLoader 并从超类调用该方法，即从标准 Hibernate 配置类）。
    *   覆盖所有其他返回 Configuration 实例的方法，以便它们返回您的 Configuration 类的实例，而不是 Hibernate Configuration 类的实例。

我们做了解决方案 2。这是一些工作，但现在运行良好。（想一想，当再次更改 Hibernate 版本时，可能需要做一些工作。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-29T22:37:48.520

Hibernate OSGi 目前有几个注意事项，其中一个需要单个持久性单元客户端捆绑包。由于各种原因，我们在构建负责处理持久性实体、映射和资源的 ClassLoader 时必须使用“requestingBundle”。

看看： [https ://github.com/hibernate/hibernate-orm/blob/master/hibernate-osgi/src/main/java/org/hibernate/osgi/OsgiClassLoader.java](https://github.com/hibernate/hibernate-orm/blob/master/hibernate-osgi/src/main/java/org/hibernate/osgi/OsgiClassLoader.java)

OsgiPersistenceProviderService 和 OsgiSessionFactoryService 都在调用服务时将“requestingBundle”添加到 ClassLoader。正如 Johanna 所建议的那样，除了 requestingBundle 或 persistence.xml 文件本身的位置之外，没有真正好的方法来了解哪些 Bundle 构成了持久性单元。

但是，我很想听听有关如何更好地支持这样的设置的想法。我最初在清单中使用了额外的元数据来表示“我是持久性单元 x 的一部分”，但从来没有真正有时间考虑清楚。

绝对不要*使用*上面推荐的使用 ClassLoaderHelper 的解决方案。这是一个完全临时的 hack，将在 ORM 5 中消失。它的存在纯粹是由于 ORM 4 的静态特性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-29T10:47:31.610

看看 org.hibernate.internal.util.ClassLoaderHelper。

您所要做的就是用能够解析实体类的 ClassLoader 替换 ClassLoader。Hibernate-Osgi 也将其设置为 OSGI ClassLoader（参见 org.hibernate.osgi.HibernateBundleActivator）。所以建议如下：

```
BundleWideClassLoader cl = new BundleWideClassLoader();

if (ClassLoaderHelper.overridenClassLoader != null 
    && ClassLoaderHelper.overridenClassLoader instanceof OsgiClassLoader) 
{
    OsgiClassLoader ocl = (OsgiClassLoader)ClassLoaderHelper.overridenClassLoader;
    for (Bundle b : cl.getBundles()) {
        ocl.addBundle(b);
    }
} else {
    ClassLoaderHelper.overridenClassLoader = new BundleWideClassLoader();
} 
```

我通过覆盖执行此例程并返回 super.buildSessionFactory 的 buildSessionFactory 将它放到我的 HibernateConfiguration 类中。

BundleWideClassLoader 看起来像这样

```
public class BundleWideClassLoader extends ClassLoader
{

@Override
protected Class<?> findClass(String name) throws ClassNotFoundException {
    for (BundleClassLoader cl : this.getAllClassLoader()) {
        try {
            Class clazz = cl.findClass(name);
            return clazz;
        } catch (Exception ex) {
        }
    }
    throw new ClassNotFoundException(name);
}

@Override
protected Class<?> loadClass(String name, boolean resolve) throws ClassNotFoundException {
    Class clazz = this.findClass(name);
    if (resolve) {
        this.resolveClass(clazz);
    }
    return clazz;
}

@Override
public URL findResource(String name) {
    for (BundleClassLoader cl : this.getAllClassLoader()) {
        URL ret = cl.findResource(name);
        if (ret != null) {
            return ret;
        }
    }
    return null;
}

/**
 * Returns a list of all available BundleClassLoader.
 *
 * @return classloader
 */
public HashSet<BundleClassLoader> getAllClassLoader() {
    //
    // Do some magic here to get your ClassLoaders from all of your Bundles
    //
}

/**
 * Returns a list of all bundles which are registered in this BundleWideClassLoader.
 *
 * @return list of managed bundles
 */
public HashSet<Bundle> getBundles() {
    HashSet<Bundle> bundles = new HashSet<>();
    for (BundleClassLoader cl : this.getAllClassLoader()) {
        bundles.add(cl.getBundleContext().getBundle());
    }
    return bundles;
}

} 
```

最后是 BundleClassLoader：

```
public class BundleClassLoader extends ClassLoader
{
/**
 * Bundle context.
 */
private BundleContext context;

/**
 * Constructor.
 * @param ctx Bundle Context
 */
public BundleClassLoader(BundleContext ctx) {
    this.context = ctx;
}

@Override
protected Class<?> findClass(String name) throws ClassNotFoundException {
    return this.context.getBundle().loadClass(name);
}

@Override
protected Class<?> loadClass(String name, boolean resolve) throws ClassNotFoundException {
    Class clazz = this.findClass(name);
    if (resolve) {
        this.resolveClass(clazz);
    }

    return clazz;
}

@Override
public URL findResource(String name) {
    return this.context.getBundle().getResource(name);
}

/**
 * Returns bundle context.
 * @return bundle context
 */
public BundleContext getBundleContext() {
    return this.context;
}

} 
```

我建议在每个 BundleActivators 中创建一个新的 BundleClassLoader 并将其添加到某种注册表中，以便 BundleWideClassLoader 可以从那里获取 BundleClassLoader 列表。当捆绑停止或删除时，不要忘记删除 BundleClassLoader。

# .net - 将通知从 web 服务器推送到 winforms 客户端应用程序

> ID：12471809
> 
> 赞同：4
> 
> 时间：2012-09-18T06:55:06.997
> 
> 标签：.net, winforms, node.js, web, push-notification

我正在为我们的 Winforms 应用程序寻找解决方案。我想知道是否有可用的技术可以将通知推送到 .net Winforms 客户端。我想要的是，当应用程序启动时，它可以从 php 网络服务器检索通知。

我已经看过 node.js 之类的东西，一些示例展示了如何将通知推送到网站而不是客户端。而且我不知道这些技术是否可以用于我想要的。你们中有人有这方面的经验吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-22T16:07:22.603

您可以将[ASP.NET 与 SignalR 一起](http://www.asp.net/signalr/overview/guide-to-the-api/hubs-api-guide-net-client#establishconnection)使用。
该站点上的示例使用 WPF，但您可以使用 WinForms 执行完全相同的操作。

这是 SignalR 的[概述](http://www.asp.net/signalr/overview/getting-started/introduction-to-signalr)。
它允许您从客户端上的服务器和服务器上的客户端调用方法。
正如您在这些网站上看到的那样，SignalR 主要是为 Web 应用程序构建的，但将它用于标准 Winforms 客户端没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-26T13:39:44.483

SignalR 是一种很好的技术，可以与 ASP.Net 服务器端和 JavaScript、WinForms 和 WPF 等客户端一起使用。

由于您的服务器代码是用 PHP 编写的，因此无法直接集成 SignalR。相反，您可以使用 IIS 8 或更高版本设置 Windows 服务器并部署一个中间 ASP.Net 网站，该网站将充当您的 PHP 服务器和 WinForm 客户端之间的中介。WinForm 客户端将通过 SignalR 及其传输协议连接到 ASP.Net 服务器。您可以通过 HTTP 请求将通知发送到 ASP.Net 网站，ASP.Net 站点会将通知传递给连接的客户端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-26T17:05:41.200

这正是 Reactive Extensions (RX) 的设计目的。使用 RX，客户端“订阅”到“主题”，类似于事件处理程序注册侦听器的方式。它几乎支持任何类型，并且当接收到内容时，它是默认订阅的“在线程上”；但是，您可以将其附加到您想要的任何其他线程。Lee Campbell 撰写了该主题的出色介绍。

[http://www.introtorx.com/](http://www.introtorx.com/)

# sql - 从每一行中选择最大值

> ID：12471816
> 
> 赞同：0
> 
> 时间：2012-09-18T06:55:45.623
> 
> 标签：sql, oracle, oracle10g

我必须比较每一行的三个 COLUMNS 并从这些列中获取 MAX 数据。我的样本数据是：

```
create table sept18 ( t1 number, t2 number, t3 number );

insert all
  into sept18 values (1,2,3)
  into sept18 values (-1,-2,3)
  into sept18 values (1,null,13)
  into sept18 values (-1,-2,-3)
  into sept18 values (-1,0,0)
select * from dual; 
```

我的操作应该显示三列和每行的最大值的字段。例如，第一行和第二行是 3，第三行是 13，第四行是 -1，第五行是 0。

我怎样才能做到这一点？我必须使用分区吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T21:01:31.447

不，您不必使用分析查询（我假设这就是分区的意思？）。分析函数用于计算某种描述的总量。您不希望跨列聚合任何内容；你想*连续*找到最大值。

为此，您需要使用[`greatest()`](http://www.techonthenet.com/oracle/functions/greatest.php)与[`least()`](http://www.techonthenet.com/oracle/functions/least.php).

```
select a.*, greatest(t1, t2, t3)
  from sept18 a 
```

被警告; *如果单列*为空，这两个函数都将返回空。你如何处理这是你的决定。我的正常策略是使用[`nvl()`](http://www.techonthenet.com/oracle/functions/nvl.php)完全荒谬的值。这可能很危险，因为您选择的“荒谬”值可能会变得正确，因此请确保您了解您的数据。

```
select a.*, greatest(nvl(t1,-9999), nvl(t2, -9999), nvl(t3, -9999))
  from sept18 a 
```

这是一个小[SQL Fiddle](http://www.sqlfiddle.com/#!4/a4f03/2)来演示这两个查询。

如果所有列都为空，那么您甚至可以进一步陷入荒谬。您必须[`nullif()`](http://www.techonthenet.com/oracle/functions/nullif.php)使用`greatest()`，或者更简单地说，只需使用 WHERE 来排除所有列都为空的行。

一点额外的点。表的存在`sept18`似乎有点可疑。如果您实际上每天有一个表，那么您应该考虑规范化您的数据库并创建例如一个包含一列的[临时表。](http://en.wikipedia.org/wiki/Temporal_database)`created_date`

# php - 'like' 功能的最佳实践

> ID：12471818
> 
> 赞同：5
> 
> 时间：2012-09-18T06:55:57.610
> 
> 标签：php, oop, model, social-media-like

我正在开发一个 Flash 游戏网站。我有两个模型：**游戏**和**用户**以及一个中间表，我在其中保存用户的操作，例如：“用户 1 喜欢游戏 3”。

1.  我喜欢的功能的最佳位置在哪里？
2.  **在游戏**模型中获取当前用户 ID 是一种好习惯吗？还是我应该将它作为参数传递？

出于性能原因，我也在游戏表中增加了喜欢的字段。为了简单起见，我省略了检查用户是否已经喜欢该游戏。
这是我的选择：

第一个版本：

```
$user->like(12345);

class User  
{
  public function like($game_id)
  {
    $like = new User_Game();  
    $like->user_id = $this->id;  
    $like->game_id = $game_id;  
    $like->save();  

    $obj = new Game($game_id);  
    $obj->likes++;  
    $obj->save();  
  }
} 
```

第二个版本：

```
$game->like(); // by current user

class Game  
{  
  public function like()  
  {

    $like = new User_Game();    
    $like->user_id = $_SESSION[‘user_id’];    
    $like->game_id = $this->id;    
    $like->save();   

    $this->likes++;    
    $this->save();    
  }    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T07:19:34.733

老实说，我不确定这是否是解决此类问题的最佳场所。也许 codereview 更合适。撇开所有事情不谈，IMO，你建议的两种方法都不是*“最好的方法”*。但与往常一样，这可能是个人的事情。
在我看来，进行 OOP 的最佳方式是尽快将所有数据推送到对象中，并实现一个服务层来处理需要多个查询或多个对象的操作。

如果我假设您使用的是 MVC 模式，那么您的控制器会接收数据。在那里，您实例化一个`Game`对象，并将 id 设置为`123456`. 您可以将该实例传递给名为 的服务方法`fillGameModel(Game $gameInstance)`。此方法连接到数据库，并设置`Game`对象的所有其他属性并返回它。对象也是如此`User`。然后可以将这两个对象传递给另一个服务方法：`likeGame(Game $game, User $user)`. 该方法可以解决其余的问题。
就个人而言，我会更进一步，使用映射器来访问我的数据库，但我现在不打算这样做。这是一个使用服务的示例，以及一种更面向对象的方法：

```
//controller:
$user = new User();
$user->setId($_SESSION['user_id']);
$game = new Game();
$game->setId(123456);//wherever you get this from
$service = new MainService();
$service->userLikes($game,$user);

//service:
public function userLikes(Game $game, User $user)
{
    $user = $this->_completeUser($user);
    $game = $this->_completeGame($game);
    //insert or update whatever data you need...
}

protected function _completeUser(User $user)
{
    $db = $this->_getConnection();//asuming PDO, to keep things simple
    $query = 'SELECT * FROM my_db.users WHERE id = ?';
    $stmt = $db->prepare($query);
    $row = $stmt->fetch(PDO::FETCH_ASSOC);
    foreach ($row as $field => $value)
    {//this implies getters and setters in your model
        $user->{'set'.ucfirst(strtolower($field))}($value);
    }
    return $user;
}

protected function _completeGame(Game $game)
{
    $db = $this->_getConnection();
    $query = 'SELECT * FROM my_db.games WHERE id = ?';
    $stmt = $db->prepare($query);
    $row = $stmt->fetch(PDO::FETCH_ASSOC);
    foreach ($row as $field => $value)
    {//field id becomes "setId" method, field name "setName" etc...
        $game->{'set'.ucfirst(strtolower($field))}($value);
    }
    return $game;
}

//just for show: a pseudo-overloader method, if your models all share the same
//abstract class. 
protected function _completeAny(Model_Abstract $model)
{
    $modelName = get_class($model);
    if (method_exists($this,'_complete'.$modelName))
    {
        return $this->{'_complete'.$modelName}($model);
    }
    throw new Exception('No completion method for '.$modelName.' found');
} 
```

同样，通过结果集的循环可以替换为抽象模型类中的方法，该方法将数组作为参数，并将字段名转换为相应的设置器。有足够的抽象空间，我会说;-)

# jquery - 如何使用jquery参考另一个文本框来验证动态生成的文本框

> ID：12471823
> 
> 赞同：0
> 
> 时间：2012-09-18T06:56:12.657
> 
> 标签：jquery, html

在阅读此问题之前，请检查 [此-单击此处的](http://codebins.com/bin/4ldqp7a/2)工作演示。如果用户向我的父文本框提供任何值（这是静态文本框），我正在生成 3 个文本框（在按键事件中动态）。现在我想做验证

我有一个文本框（比如父文本框），如果用户在其中输入任何数字，则动态生成 3 个文本框。（即 id、用户名、金额）现在我想对其进行 aj 查询验证，这样所有输入的金额值的总和应等于在父文本框中输入的值。

```
 <!DOCTYPE html>
                                <html>
                                <head>
                                  <style>#multiple{
                                  margin-bottom:10px;
                                  border:1px solid #333;
                                  background:#efefef;
                                  color:#000;
                                }
                                #autoresult input{
                                  margin-left:5px;
                                  border:1px solid #333;
                                  background:#a4c4f4;
                                  margin-top:5px;
                                }
                                  </style>
                                  <script src="http://code.jquery.com/jquery-latest.js"></script>
                                </head>
                                <body align="center">
                               <form id="frm">
                 Please select your friends: <select id="multiple" multiple="multiple" style="width: 120px;height: 120px;">
                    <option value="1" >
                      Ashutosh
                    </option>
                    <option value="6">
                      Jems Bond
                    </option>
                    <option value="7">
                      Danial Crack
                    </option>
                    <option value="8">
                      Dan Brown
                    </option>
                    <option value="9">
                      Angilina Jolly
                    </option>
                  </select>
                  <br/>
                  <input type="text" id="amount" name="amount" size="33" id="" placeholder="Enter Total Budget Amount" style="background-color:orange;font-size: 22px;color: blue"/>

                  <!--User will  enter the amount in this textbox -->
                  <div id="autoresult">
                  </div>
                </form>

                                <script>
                                  $(function() {
                    $("#multiple").change(function() {
                        var multipleValues = $("#multiple").val() || "";
                        var autoresult = "";
                        if (multipleValues != "") {
                            var aVal = multipleValues.toString().split(",");
                            var count = $("#multiple :selected").length;
                            $.each(aVal, function(i, value) {
                                autoresult += "<div>";
                                autoresult += "<input type='text' readonly='true' name='opval" + (parseInt(i) + 1) + "' value='" + value.trim() + "'>";
                                autoresult += "<input type='text' readonly='true' name='optext" + (parseInt(i) + 1) + "' value='" + $("#multiple").find("option[value=" + value + "]").text().trim() + "'>";
                                autoresult += "<input type='text' name='option" + (parseInt(i) + 1) + "' value='' ' placeholder='Enter my amount' size='120'> <p>Want a validation for this textbox</p>   <font color='red'>Error SUM of all dynamic generated textbox values exceeds the total budget amount <font>"

                                ; //autoresult should display in this textbox .i.e (autoresult= amount/count )
                                autoresult += "</div>"; 
                            });
                        }
                        //Set autoresult
                        $("#autoresult").html(autoresult);

                    });

                    $("#amount").keyup(function() {
                        var multipleValues = $("#multiple").val() || "";
                        var amount = $("#amount").val();
                        var aVal = multipleValues.toString().split(",");
                        var count = $("#multiple :selected").length;
                        if (multipleValues != "")
                        {
                               $.each(aVal, function(i, value) {
                                var price = amount / count;
                                $("input[name=option" + (parseInt(i) + 1) + "]").val(price);
                            });
                        }

                    });
                         $("#amount").keydown(function() {
                        var multipleValues = $("#multiple").val() || "";
                        var amount = $("#amount").val();
                        var aVal = multipleValues.toString().split(",");
                        var count = $("#multiple :selected").length;
                        if (multipleValues != "")
                        {
                               $.each(aVal, function(i, value)
                            {
                                var price = amount / count;
                                $("input[name=option" + (parseInt(i) + 1) + "]").val(price);
                            });
                        }

                    });

                });
                                </script>
                                </body>
                                </html> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-18T07:23:24.817

工作演示：[http ://codebins.com/bin/4ldqp7a/3](http://codebins.com/bin/4ldqp7a/3)

请检查上面的链接

# excel - 如何从 Excel VBA 中释放 vb.net 类库对象

> ID：12471824
> 
> 赞同：2
> 
> 时间：2012-09-18T06:56:13.937
> 
> 标签：excel, release, vba

由于 Excel VBA 的性能对于我的计算来说很差，我将我的代码迁移到了一个 VB.net 类库，我将其添加为 Excel 中的参考。我的所有读写功能都使用 VBA，但处理是在我的 dll 中完成的。

除了释放已用内存外，一切正常。我已经在 VB.net 类库中的以下函数中实现了。

```
 Public Sub releaseObject(ByRef obj As Object)
    Try
        System.Runtime.InteropServices.Marshal.FinalReleaseComObject(obj)
        obj = Nothing
    Catch ex As Exception
        obj = Nothing
    Finally
        GC.Collect()
        GC.WaitForPendingFinalizers()
    End Try
End Sub 
```

但是 Excel 仍然保留内存。我该怎么做才能最终释放我的对象？

谢谢，克里斯

# android - IntentService 中的 Android AsynchTask

> ID：12471826
> 
> 赞同：0
> 
> 时间：2012-09-18T06:56:28.640
> 
> 标签：android, android-asynctask, intentservice

我正在尝试在 IntentService 中运行异步任务以下载文件。但是，当我启动下载线程时，我收到以下警告，并且该过程不会继续。

```
W/MessageQueue(10371): java.lang.RuntimeException: Handler{406ee8f8} sending message to a Handler on a dead thread 
```

我搜索了一下这个问题，发现它很可能与Pipeline Threading的Handler和Looper有关。原因可能是线程下载文件的过程被传递给 IntentService 的处理程序，该处理程序在完成其过程后很快就死了。我知道线程应该传递给主线程（UI线程）的Handler，而不是IntentService。有人说在 MainActivity 类或 Application 类的 onCreate() 中编写以下代码是可行的，以便将线程传递给适当的 Handler（主线程的 Handler），

```
Class.forName("name.of.class.doing.asynch.task"); 
```

，但对我不起作用。

让我详细介绍一下我正在使用的代码和库。

### - 意向服务

扩展“Google Cloud Messaging”的类 GCMBaseIntentService (http://developer.android.com/guide/google/gcm/index.html)。上面的错误发生在 LogCat 上的 Log.i(TAG, "STARTING CONNECTION") 之后。

```
public class GCMIntentService extends GCMBaseIntentService{

    public GCMIntentService() {
        super(Environment.GCM_SENDER_ID);
    }

    @Override
    protected void onMessage(Context context, Intent intent) {
        String[] allowedContentTypes = new String[] { "image/jpeg" };
        Log.i(TAG, "STARTING CONNECTION");
        AsynchConnector.getForBinaryResponse("MY_URL", new BinaryHttpResponseHandler(allowedContentTypes){
            @Override
            public void onSuccess(byte[] imageData) {
                Log.i(TAG, "SUCCESS!!");
        });
    }

    (... @Override methods follows)
 } 
```

### - 线程下载文件

使用有助于异步 http 连接的“Android 异步 Http 客户端”（http://loopj.com/android-async-http/）。

```
public class AsynchConnector{                                                                                                                                                 
    private static final String BASE_URL = Environment.SERVER_URL;
    private static AsyncHttpClient client = new AsyncHttpClient();

    public static void getForBinaryResponse(String url, BinaryHttpResponseHandler binaryHttpResponseHandler){
        client.get(getAbsoluteUrl(url), binaryHttpResponseHandler);
    }
} 
```

### 应用程序的 onCreate()

```
class MyApp extends Application{
    @Override
    onCreate(){
        try {                                                                                                                                                                 
            Class.forName("com.myapp.AsynchConnector");
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }
    }
} 
```

我怎样才能使这项工作？请帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T07:39:09.487

GCMBaseIntentService 扩展了 IntentService。

IntentService 有时会在 onHandleIntent 函数中调用错误的处理程序 - 例如，当收到消息时。您可以通过使用异步任务来避免此警告：

```
 @Override
    protected void onMessage(Context context, Intent intent) {
    AsyncTask<Void, Void, Void> task = new AsyncTask<Void, Void, Void>() {
            @Override
            protected Void doInBackground(Void... params) {
                          // getForBinaryResponse()
            }
            @Override
            protected void onPostExecute(Void result) {

            }
        };
        task.execute(null,null,null);
    } 
```

您的 AsynchConnector 应该可以工作

# jquery - jquery datatables.net 复选框未设置选中属性

> ID：12471831
> 
> 赞同：0
> 
> 时间：2012-09-18T06:56:37.057
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, datatables

所以我正在使用 JQuery datatables.net(www.datatables.net) 并取得了很大的成功。但最近我尝试添加一些复选框列，但没有取得多大成功。视觉上一切正常，但是当我实际选中/取消选中它时，它不会改变下面的底层值，无论是当我用 chrome 检查元素还是在 javascript 中捕获它时。我是否需要更新表格或其他东西来刷新 DOM 对象？

Javascript创建数据表：

```
$('#userGroupSettings').dataTable({
"bJQueryUI": true,
"aoColumns": [
/* ID */
    {
    "bVisible": false
},
/* Group Name */null,
/* Display Group */null,
/* Group Minimised*/null,
/* Send Fault Email*/null],
"aaSorting": [[1, "asc"]] 
```

});

用于创建表的 asp mvc razor 代码：

```
<table id="userGroupSettings">
    <thead>
        <th>Group ID</th>
        <th>Group Name</th>
        <th>Display Group</th>
        <th title="When loading the webpage this will determine if the group is minimised or not">Group Minimised</th>
        <th title="Send me a fault email when an issue occurs in this group">Send Fault Email</th>
    </thead>
    <tbody>
    @foreach (MvcApplication2.Models.UserGroup group in user.Groups)
    {
        <tr>
            <td>@group.GroupID</td>
            <td>@group.GroupName</td>
            <td><input class="SettingsDisplayGroup" type="checkbox" name="displayGroup" value="@group.DisplayGroup" @(group.DisplayGroup ? "checked=\"checked\"" : "")/></td>
            <td><input class="SettingsMinimiseGroup" type="checkbox" name="minimiseGroup" value="@group.GroupMinimised" @(group.GroupMinimised ? "checked=\"checked\"" : "")/></td>
            <td><input class="SettingsSendFaultEmail" type="checkbox" name="sendFaultEmail" value="@group.SendFaultEmail" @(group.SendFaultEmail ? "checked=\"checked\"" : "")/></td>
        </tr>
    }
    </tbody>
</table>
<button id="saveUserGroupSettings">Save</button> 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T22:28:05.840

选中的复选框仅意味着它的值将作为帖子发送，不需要更改任何其他内容。当然，如果您有多个具有相同名称的复选框，如果选中其中一个复选框，则将发送其值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T01:12:34.600

所以我解决了这个问题。我遇到的主要问题是，当我访问数据时，我将字符串转换为 javascript 元素，并且因为它没有 checked="checked" 属性，所以它被设置为 false：

```
$($('#userGroupSettings').dataTable().fnGetData(i)[2]) 
```

因此，我不得不使用 javascript 表格行元素并以这种方式搜索它们，而不是使用 fnGetData 循环遍历数据表：

```
$('#userGroupSettings tbody tr').each(function () {
    var isChecked = $(this).find('.SettingsDisplayGroup')[0].checked;
} 
```

我认为因为我正在从数据表内容（字符串）创建一个新的 jquery 元素，所以尚未在此处设置选中的属性

请注意，如果您有任何 datatables.net 隐藏列，那么您将无法像访问它们一样访问它们。

# ios4 - UIButton 应该在 24 小时内触发一次方法

> ID：12471833
> 
> 赞同：0
> 
> 时间：2012-09-18T06:56:46.923
> 
> 标签：ios4, uibutton

对不起这个问题。我必须节省点击按钮的时间

第一次，然后将时间与未来时间进行比较，如果大于或

等于我必须触发一个方法或一个警报的同时。

这是代码。

```
-(IBAction)checkInButtonClicked
{
    now = [NSDate date];
   [[NSUserDefaults standardUserDefaults]setObject:now forKey:@"theFutureDate"];

    NSTimeInterval timeToAddInDays = 60 * 60 * 24;
    theFutureDate = [now dateByAddingTimeInterval:timeToAddInDays];

    switch ([now compare:theFutureDate]){
    case NSOrderedAscending:{
    NSLog(@"NSOrderedAscending");

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"" message:
    [NSString stringWithFormat:@"Oops! The Check In will activate after 24Hrs"] 
    delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil ];
    [alert show];
    }
    break;
    case NSOrderedSame:{
    NSLog(@"NSOrderedSame");
    [self insertPoints];
   }
    break;
    case NSOrderedDescending:{
    NSLog(@"NSOrderedDescending");
   }
    break;
   }
  } 
```

但是这段代码不能完全正常工作。谁能帮帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:00:34.570

问题是您总是`now`在与未来的日期进行比较。这种比较总是有相同的结果。

如果我理解正确，您想要完全相反。您必须`now`与用户第一次单击该按钮的时间进行比较。因此，您`NSUserDefaults`仅在第一次设置日期并在第二次和后续时间进行比较。

```
- (IBAction)checkInButtonClicked {     
    NSDate *now = [NSDate date];
    NSDate *firstTimeClicked = [[NSUserDefaults standardUserDefaults] objectForKey:@"firstTimeClicked"];
    if (firstTimeClicked) {
        /* this is at least the second time the button has been clicked */        
        NSTimeInterval delta = [now timeIntervalSinceDate:firstTimeClicked];
        if (delta > 24 * 3600) {
            /* button clicked > 1 day ago */
        } else {
            /* button clicked <= 1 day ago */
        }
    } else {
        /* not present in NSUserDefaults, it's first click */
        [[NSUserDefaults standardUserDefaults] setObject:now forKey:@"firstTimeClicked"];   
    }
} 
```

# php - 生成随机字符串的更好（更短）方法？

> ID：12471834
> 
> 赞同：0
> 
> 时间：2012-09-18T06:56:47.587
> 
> 标签：php

之间的任何随机数`0`都`100`可以像这样生成：

```
<?php
    $min = 0;
    $max = 100;
    $random =  rand($min,$max);
?> 
```

现在我可以将它`$random`放在我的文件中的任何位置以生成一个随机数。但问题是，当我将它放在多个地方时，所有这些地方都具有相同的值*（如果一个随机数是`17`全部将是`17`）*。

我在不止一个地方做这样的事情：

```
 $random2 =  rand($min,$max);
    $random3 =  rand($min,$max);
    $random4 =  rand($min,$max);
    $random5 =  rand($min,$max); 
```

并将它们放置在所有位置。

这样做会在我的脚本中占用更多空间。有没有更好的方法来做我想做的事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T07:08:16.223

为什么不做一个函数？：

```
function myRand(){
    $min = 0;
    $max = 100;
    return mt_rand($min, $max);
}
echo myRand(); 
```

这样你就必须只调用函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T07:20:36.530

```
<?php
 function randd(){
 $min = 0;
$max = 100;
return $random =  rand($min,$max).'<br>';
}
echo $random = randd();
echo $random= randd();
echo $random= randd();
echo $random= randd();
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T07:50:44.563

```
<?php

/*
* str_shuffle to generate a random series of characters based on those provided, uniqid added, then shuffled again.
* substr will trim the output down to between 10 and 12 characters randomly.
*/

//Generate 10 Random Strings
$i = 1;
while($i <= 10){
echo substr(str_shuffle(uniqid(str_shuffle("abcdefghjkmnpqrstwxyzABCDEFGHJKMNPQRSTWXYZ23456789"))), 0, rand(10,12))."<br/>";
$i++;
}

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T07:12:30.187

很久以前就在stackoverflow上建立了这个

```
 function getRandom($lengthOfStringToGen)
 {
 $characters = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
$randString= '';
for ($i = 0; $i < $lengthOfStringToGen; $i++) {
    $randString.= $characters[rand(0, strlen($characters) - 1)];
}
return $randString;
} 
```

# c++ - 我应该传递一个 std::vector 还是固定数量的参数？

> ID：12471835
> 
> 赞同：1
> 
> 时间：2012-09-18T06:56:48.720
> 
> 标签：c++, performance, utf-8, arguments, stdvector

我正在编写一个将[UTF8](http://en.wikipedia.org/wiki/UTF-8#Description)字符转换为其代表 Unicode 代码点的类方法。我的原型候选人如下：

```
static uint32_t Utf8ToWStr( uint8_t Byte1,        uint8_t Byte2 = 0x00,
                            uint8_t Byte3 = 0x00, uint8_t Byte4 = 0x00,
                            uint8_t Byte5 = 0x00, uint8_t Byte6 = 0x00);

static uint32_t Utf8ToWStr(const std::vector<uint8_t> & Bytes); 
```

在我的应用程序中；
`Byte1`将是大约 90% 的时间中唯一的非零字节。
`Byte1`并且`Byte2`将是大约 9% 的时间中唯一的非零字节。
`Byte1`，`Byte2`并且`Byte3`将是唯一少于 1% 的时间的非零字节。
`Byte4`，`Byte5`并且`Byte6`几乎总是为零。

为了速度，我应该更喜欢哪个原型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T07:24:21.203

我会用

```
// if you want it as simple as possible
typedef uint8_t data_t[6]; 
```

或者

```
// if you like C++11
typedef std::array<uint8_t, 6> data_t; 
```

或者

```
// if it should be extensible
typedef struct { uint8_t data[6]; } data_t; 
```

在编译时指出输入数据的固定长度性质。这样，它可以为您节省大量实际调用该函数的输入。

对我来说，使用可变长度向量会以某种方式暗示可能有更多或更少或空的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T07:18:23.467

可能两者都没有。

想想调用这个函数的代码——他们可能不得不跳过很多圈才能使用它：

```
uint8_t c1 = *cursor++;
uint8_t c2 = 0;
uint8_t c3 = 0;
uint8_t c4 = 0;
uint8_t c5 = 0;
uint8_t c6 = 0;
if(c1 >= 0x80)
    c2 = *cursor++;
if(c1 >= 0xc0)
    c3 = *cursor++;
if(c1 >= 0xe0)
    c4 = *cursor++;
if(c1 >= 0xf0)
    c5 = *cursor++;
if(c1 >= 0xf8)
    c6 = *cursor++;
uint32_t wch = Utf8ToWStr(c1, c2, c3, c4, c5, c6); 
```

我真诚地怀疑这个界面是否有用。

我的转换例程的正常界面是

```
bool utf8_to_wchar(uint8_t const *&cursor, uint8_t const *end, uint32_t &result); 
```

返回值用于传达错误（例如，您的函数将如何对参数做出反应`(0x81, 0x00)`？

最后但并非最不重要的一点是，您可能希望有一个模式来指定非规范化的 UTF-8 是否应该给出错误 - 从安全 POV 来看，禁止编码`U+003F`为`0x80 0x3f`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T07:06:01.337

std::vector 可能更慢，因为它将这些字节存储到堆中并为它们分配内存。

您也可以只传递一个指向字节数组的指针，或者如果使用 C++11，则使用 std::array。

# visual-studio-2010 - Azure 项目在 VS 2012 中不起作用

> ID：12471836
> 
> 赞同：0
> 
> 时间：2012-09-18T06:56:55.187
> 
> 标签：visual-studio-2010, visual-studio

当我尝试将项目从 VS2010 升级到 VS2012 时，我收到此错误：

此版本的 Visual Studio 未安装或不支持以下项目类型：

NimbleSchedule.Azure.CloudService

Azure 项目在 VS 2010 上正常工作

有没有人遇到过这个问题？如何修复？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T07:29:01.287

我找到了答案。我们需要完全为 VS 2012 安装 Windows Azure SDK。我只是去添加 -> 新项目。然后我选择了 Azure SDK，VS 2012 告诉我应该从 VS 2012 安装 SDK。我按照 VS 2012 建议的链接，通过 Web 安装程序安装了 Azure SDK for VS 2012

# android - 在扩展 SherlockMapActivity 的活动中未调用 onActivityResult() 方法

> ID：12471837
> 
> 赞同：1
> 
> 时间：2012-09-18T06:56:57.477
> 
> 标签：android, android-intent, actionbarsherlock, actionbarsherlock-map

我有一个扩展 SherlockActivity 的活动“SearchActivity”。在这个活动中，我有一个选项菜单，其中有一个搜索栏和一个“开始”按钮。在搜索栏中输入的数据必须传递给扩展 SherlockMapActivity 的前一个活动“NavigationActivity”。

这是我的 SearchActivity 代码的一部分：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {

        case R.id.go:
           Intent intent = new Intent();
           intent.putExtra("SearchText", enteredText);
           setResult(200, intent);
           startActivityForResult(intent, 100);
           finish();
           break;

    }
    return true;
} 
```

这是 NavigationActivity 中的 onActivityResult() 方法：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    System.out.println("In onActivityResult method");
    if(data != null && resultCode == 200 && requestCode == 100) {
        String text = data.getStringExtra("SearchText");
        System.out.println("The data is: " + text);
        Toast.makeText(this, "The text entered in the search bar is: " + text, Toast.LENGTH_LONG).show();
    }       
} 
```

问题是在 NavigationActivity 中永远不会调用 onActivityResult() 方法。按下“开始”按钮后，我可以从 SearchActivity 导航到 NavigationActivity，但无法获取 NavigationActivity 中的数据。你能在这方面帮助我吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T07:02:25.183

请参阅下面的示例代码并相应地修改您的代码。

导航活动

```
public class NavigationActivity extends Activity {

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.navigationActivity);

    Button btnTest = (Button) findViewById(R.id.button1);
    btn1.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) 
                    {
          Intent intent = new Intent(Launcher.this,Activity2.class);
          startActivityForResult(intent, 100);
        }

    });

}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) 
    {
    super.onActivityResult(requestCode, resultCode, data);

    if(resultCode ==  200)
    {

        String enteredText = "no action defined for this requestcode :"+resultCode;
        if(requestCode == 100)
        {
            enteredText = (String)data.getStringExtra("SearchText");

        }
        Toast.makeText(Launcher.this,enteredText,Toast.LENGTH_SHORT).show();
    }
    else
    {
        Toast.makeText(Launcher.this,"some exception occurred",Toast.LENGTH_SHORT).show();
    }
}
} 
```

搜索活动

```
public class SearchActivity extends Activity{

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.search);

    Button btnGO = (Button)findViewById(R.id.buttonGo);
    btnGO .setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent intent = new Intent();
            EditText edtSearchBar = (EditText )findViewById(R.id.tvTest);

               intent.putExtra("SearchText", edtSearchBar .getText().toString());

            setResult(200,intent);
            finish();

        }
    });
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T07:10:19.717

不需要反过来吗？

据我了解，您需要`startActivityForResult(..)`从您的`NavigationActivity`而不是从`SearchActivity`.

在`NavigationActivity`：

```
Intent intent= new Intent(context, SearchActivity.class);
startActivityForResult(intent, 200); 
```

然后在`SearchActivity`通话中

```
setResult(..);
finish(); 
```

将结果返回给调用活动并触发您的`onActivityResult(..)`方法。

请参阅此[相关答案](https://stackoverflow.com/a/1985694/620338)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T07:10:43.510

`startActivityForResult`用于将被调用Activity的数据返回给调用Activity，即如果ActivityA正在调用B，则可以使用`startActivityForResult`B返回数据给A

# iphone - 在特定时间后终止在后台运行的应用程序？

> ID：12471839
> 
> 赞同：0
> 
> 时间：2012-09-18T06:57:09.070
> 
> 标签：iphone, objective-c, ios, ios4

我可以在特定时间后终止在后台运行的应用程序吗？例如：在后台运行应用程序 24 小时后，我想杀死该应用程序。然后，当您启动应用程序时，应用程序应该加载为新的..（如 viewDidLoad ..）

我可以在 iOS 中执行此操作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T07:20:37.307

正如在其他讨论中所指出的，终止您的应用程序可能会让您的应用程序被 Apple 拒绝。

这不是一个真正的答案，但你可以简单地覆盖

> *   (void)applicationDidEnterBackground:(UIApplication *)application

保存用户退出您的应用程序的日期。

> *   (void)applicationWillEnterForeground:(UIApplication *)application

并将当前日期与最后一个日期进行比较，以了解您是否应该重新启动您的应用程序。通过重新启动您的应用程序，我向您的用户展示您的第一个 UIViewController（并可能清理一些数据）。

# c# - 什么 VS 调试器使增量运算符执行得比什么都不做更快？

> ID：12471840
> 
> 赞同：6
> 
> 时间：2012-09-18T06:57:10.427
> 
> 标签：c#, .net, performance, increment

这是不言自明的代码（执行十亿次操作）：

```
int k = 0;

Stopwatch sw = new Stopwatch();
sw.Start();
for (int a = 0; a < 1000; a++)
    for (int b = 0; b < 1000; b++)
        for (int c = 0; c < 1000; c++)
            k++;

sw.Stop();
Console.WriteLine(sw.ElapsedMilliseconds);

sw = new Stopwatch();
sw.Start();

for (int a = 0; a < 1000; a++)
    for (int b = 0; b < 1000; b++)
        for (int c = 0; c < 1000; c++)
            ; // NO-OP

sw.Stop();
Console.WriteLine(sw.ElapsedMilliseconds); 
```

结果（至少在我的计算机上）大约（以毫秒为单位）

```
2168
2564 
```

第二个总是大约半秒。

增加一个变量十亿次的运行时间怎么可能比执行相同次数的无操作运行时间更长？

**编辑：**这仅在调试时发生。发布正确地做到了这一点，第一个持续时间更长，至少在我的电脑上。正如评论中所指出的，即使在 RELEASE 构建中，也有人遇到过这个问题。但是在产生这种效果的 DEBUG 上会发生什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T07:32:43.107

问题正如 Azodious 提到的，您不能使用调试模式来测量时间，因为它不准确。

打开发布模式后，我得到以下数字：

**递增`k`**：445

**编号**：402

`IL`递增版本中还有 4条指令：

```
IL_0001:  ldc.i4.0    
IL_0002:  stloc.0     
IL_0003:  ldc.i4.0    
IL_0004:  stloc.1     
IL_0005:  br.s        IL_003B
IL_0007:  ldc.i4.0    
IL_0008:  stloc.2     
IL_0009:  br.s        IL_0029
IL_000B:  ldc.i4.0    
IL_000C:  stloc.3     
IL_000D:  br.s        IL_0017
IL_000F:  ldloc.0     
IL_0010:  ldc.i4.1    
IL_0011:  add         
IL_0012:  stloc.0     
IL_0013:  ldloc.3     
IL_0014:  ldc.i4.1    
IL_0015:  add         
IL_0016:  stloc.3     
IL_0017:  ldloc.3     
IL_0018:  ldc.i4      E8 03 00 00 
IL_001D:  clt         
IL_001F:  stloc.s     04 
IL_0021:  ldloc.s     04 
IL_0023:  brtrue.s    IL_000F
IL_0025:  ldloc.2     
IL_0026:  ldc.i4.1    
IL_0027:  add         
IL_0028:  stloc.2     
IL_0029:  ldloc.2     
IL_002A:  ldc.i4      E8 03 00 00 
IL_002F:  clt         
IL_0031:  stloc.s     04 
IL_0033:  ldloc.s     04 
IL_0035:  brtrue.s    IL_000B
IL_0037:  ldloc.1     
IL_0038:  ldc.i4.1    
IL_0039:  add         
IL_003A:  stloc.1     
IL_003B:  ldloc.1     
IL_003C:  ldc.i4      E8 03 00 00 
IL_0041:  clt         
IL_0043:  stloc.s     04 
IL_0045:  ldloc.s     04 
IL_0047:  brtrue.s    IL_0007 
```

-verison`NOP`有相同数量的分支，但少一个`add`：

```
IL_0001:  ldc.i4.0    
IL_0002:  stloc.0     
IL_0003:  ldc.i4.0    
IL_0004:  stloc.1     
IL_0005:  br.s        IL_0037
IL_0007:  ldc.i4.0    
IL_0008:  stloc.2     
IL_0009:  br.s        IL_0025
IL_000B:  ldc.i4.0    
IL_000C:  stloc.3     
IL_000D:  br.s        IL_0013
IL_000F:  ldloc.3     
IL_0010:  ldc.i4.1    
IL_0011:  add         
IL_0012:  stloc.3     
IL_0013:  ldloc.3     
IL_0014:  ldc.i4      E8 03 00 00 
IL_0019:  clt         
IL_001B:  stloc.s     04 
IL_001D:  ldloc.s     04 
IL_001F:  brtrue.s    IL_000F
IL_0021:  ldloc.2     
IL_0022:  ldc.i4.1    
IL_0023:  add         
IL_0024:  stloc.2     
IL_0025:  ldloc.2     
IL_0026:  ldc.i4      E8 03 00 00 
IL_002B:  clt         
IL_002D:  stloc.s     04 
IL_002F:  ldloc.s     04 
IL_0031:  brtrue.s    IL_000B
IL_0033:  ldloc.1     
IL_0034:  ldc.i4.1    
IL_0035:  add         
IL_0036:  stloc.1     
IL_0037:  ldloc.1     
IL_0038:  ldc.i4      E8 03 00 00 
IL_003D:  clt         
IL_003F:  stloc.s     04 
IL_0041:  ldloc.s     04 
IL_0043:  brtrue.s    IL_0007 
```

这些是在没有优化的情况下编译的，因为我想看看到底发生了什么。

实际上，它们之间的唯一区别是：

```
IL_0012:  stloc.0     
IL_0013:  ldloc.3     
IL_0014:  ldc.i4.1    
IL_0015:  add 
```

**简单地说：**你得到奇怪的数字，因为你处于调试模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T18:54:18.113

除了测试错误的代码之外，您犯的一个核心错误是假设您测量了增量运算符的成本。你没有，你测量了 for() 循环的成本。这比增量需要更多的 cpu 周期。

for() 循环的一个问题是 CPU 被迫分支，跳回到循环的开头。现代CPU*不太*喜欢分支，它们被优化为顺序执行代码。*管道的*副作用，核心架构实现细节旨在使处理器快速执行代码。一个分支可能会迫使处理器刷新管道，从而丢掉大量被证明是无用的工作。在 cpu 设计中分配了大量资源，以减少必须冲洗管道的成本。一个核心部分是*分支预测器*，它试图预先猜测分支将走向哪条路，以便它可以用*可能的指令填充管道*被执行。猜错是非常昂贵的。如果你的 for() 循环足够长，你就不必为此担心太多。

现代处理器的另一个问题是它们对分支目标的对齐非常敏感。换句话说，循环开始的指令的地址。如果它未*对齐*，而不是位于可被 4 或 8 整除的地址，则预取单元需要额外的周期来开始解码正确的指令。这是抖动需要处理的实现细节，它可能必须插入额外的 NOP 指令才能使指令对齐。x86 抖动不执行优化，x64 抖动执行。

对齐问题的一个可观察到的副作用是交换两段代码可能会影响您的测量。

基准代码是现代 CPU 上的一次危险冒险，通过分析代码的合成版本观察到的*实际代码的可能性并不大。*15% 或更少的差异没有统计学意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T07:15:39.410

我跑了 3 次，输出是：

> 3786
> 
> 3252

* * *

> 3800
> 
> 3256

* * *

> 3840
> 
> 3255

因此，如果您是根据在调试模式下收集的统计数据做出决定，请不要这样做。

调试模式将大量数据附加到代码中，以在调试期间帮助调试器。

# php - 显示存储在服务器中的pdf文件并使用php下载

> ID：12471841
> 
> 赞同：1
> 
> 时间：2012-09-18T06:57:20.340
> 
> 标签：php, file, filesystems, download

我已将 .pdf、.doc、.txt 文件存储在 Web 服务器的目录中。我能够显示存储在目录中的所有文件，但下载失败。每次我点击超链接 sample.txt 都会下载空白内容。请查看代码并建议我。

这就是我在 show_directory.php 中使用的

```
<?PHP
    // Define the full path to your folder from root 
    $path = "/public_html/bc/upload/"; 

    // Open the folder 
    $dir_handle = @opendir($path) or die("Unable to open $path"); 

    // Loop through the files 
    while ($file = readdir($dir_handle)) { 

    if($file == "." || $file == ".." || $file == "download_file.php" ) 

        continue; 
        echo "<a href=\"download_file.php\">$file</a><br />"; 

    } 
    // Close 
    closedir($dir_handle); 
?> 
```

download_file.php 的内容为：

```
<?PHP
//download.php
//content type
header('Content-type: text/plain');
//open/save dialog box
header('Content-Disposition: attachment; filename="sample.txt"');
//read from server and write to buffer
readfile('test.txt');
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T07:03:55.417

```
....
header('Content-Description: File Transfer');
header('Content-type: application/octet-stream');
header('Content-Disposition: attachment; filename="' . 'test.txt' . '"');
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate');
header('Pragma: public');
readfile('test.txt');
.... 
```

为什么不使用二进制？

# php - 为什么 fpdi 会裁剪 pdf 页面？

> ID：12471842
> 
> 赞同：4
> 
> 时间：2012-09-18T06:57:22.720
> 
> 标签：php, fpdf, fpdi

因此，我使用`fpdi`1.2 版在文档的每一页上添加一些小标记。这是我的代码：

```
public static function markPdf($file, $text){
    define('FPDF_FONTPATH','font/');
    require_once('fpdi/fpdf.php');
    require_once('fpdi/fpdi.php');
    try{
        $pdf = new FPDI();
        $pagecount = $pdf->setSourceFile($file);
        for($i = 1 ; $i <= $pagecount ; $i++){
            $tpl  = $pdf->importPage($i);
            $size = $pdf->getTemplateSize($tpl);

            // Here you can see that I'm setting orientation for every single page,
            // depending on the orientation of the original page
            $orientation = $size['h'] > $size['w'] ? 'P':'L';
            $pdf->AddPage($orientation);
            $pdf->useTemplate($tpl);

            $pdf->SetXY(5, 5);
            $pdf->SetTextColor(150);
            $pdf->SetFont('Arial','',8);
            $pdf->Cell(0,0,$text,0,1,'R');
        }
        $pdf->Output($file, "F");
    }catch(Exception $e){
        Logger::log("Exception during marking occurred");
        return false;
    }
    return true;
} 
```

一切都很好，除了一个小问题：当我有一个第一页横向的文档时，生成的文档中的所有页面都从底部和右侧裁剪（如果第一页是纵向模式，一切都很好，即使后续页面处于横向模式）。问题很明显：这个函数有什么问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-18T09:32:16.680

最后一个参数`useTemplate()`指定是否调整页面大小。它默认为`false`，但我们希望它是`true`。

更改此调用：

```
$pdf->useTemplate($tpl); 
```

至（对于较旧的 fpdf 版本）：

```
$pdf->useTemplate($tpl, null, null, $size['w'], $size['h'], true); 
```

或（对于较新的 fpdf 版本）：

```
$pdf->useTemplate($tpl, null, null, $size['width'], $size['height'], true); 
```

Consider updating all `fpdf`-related libraries (`fpdf`, `fpdf_tpl` and `fpdi`) to the most recent versions - that's important, too.

P.S.: When pushing new version of `fpdi` on testing server, I found that it doesn't work with relatively old versions of PHP interpreter - it does work with version 5.3.10, but it can't work with 5.3.2 or older. So, make sure that you have an up-to-date PHP version too.

# iphone - xcode 4.5 GM 上的 ld 警告，

> ID：12471845
> 
> 赞同：2
> 
> 时间：2012-09-18T06:57:32.863
> 
> 标签：iphone

当我在开发人员视图上运行我的代码时它可以工作但在 GM 种子上它给出以下错误

```
Ld /Users/GhostMac/Library/Developer/Xcode/DerivedData/Retail_Wizard_Solution-eazomrmcxqeysfehcgngulleshls/Build/Intermediates/iFurniture.build/Debug-iphoneos/iFurniture.build/Objects-normal/armv7s/iFurniture normal armv7s
    cd /Volumes/GhostWork/HomeWork/Sachchaudary/furniture-wizard/FurnitureWizard
    setenv IPHONEOS_DEPLOYMENT_TARGET 5.0
    setenv PATH "/Volumes/GraveYard/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Volumes/GraveYard/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Volumes/GraveYard/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch armv7s -isysroot /Volumes/GraveYard/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk -L/Users/GhostMac/Library/Developer/Xcode/DerivedData/Retail_Wizard_Solution-eazomrmcxqeysfehcgngulleshls/Build/Products/Debug-iphoneos -L/Volumes/GhostWork/HomeWork/Sachchaudary/furniture-wizard/FurnitureWizard/../OpenSSL/lib -F/Users/GhostMac/Library/Developer/Xcode/DerivedData/Retail_Wizard_Solution-eazomrmcxqeysfehcgngulleshls/Build/Products/Debug-iphoneos -filelist /Users/GhostMac/Library/Developer/Xcode/DerivedData/Retail_Wizard_Solution-eazomrmcxqeysfehcgngulleshls/Build/Intermediates/iFurniture.build/Debug-iphoneos/iFurniture.build/Objects-normal/armv7s/iFurniture.LinkFileList -dead_strip -all_load -fobjc-arc -fobjc-link-runtime -miphoneos-version-min=5.0 -lz -lTBXML-iOS -lsqlite3 -lFMDB -lcrypto -lssl -lxml2 -framework SystemConfiguration -framework QuartzCore -framework ExternalAccessory -framework CFNetwork -framework AddressBook -framework AddressBookUI -framework MessageUI -framework CoreText -lHTTPServer -framework CoreData -lAshleyWebservice -lCommon -lDDXML -lFTPServer -lTapkuLibrary -lWizardScanner -framework UIKit -framework Foundation -framework CoreGraphics -o /Users/GhostMac/Library/Developer/Xcode/DerivedData/Retail_Wizard_Solution-eazomrmcxqeysfehcgngulleshls/Build/Intermediates/iFurniture.build/Debug-iphoneos/iFurniture.build/Objects-normal/armv7s/iFurniture

ld: warning: ignoring file /Users/GhostMac/Library/Developer/Xcode/DerivedData/Retail_Wizard_Solution-eazomrmcxqeysfehcgngulleshls/Build/Products/Debug-iphoneos/libTBXML-iOS.a, file was built for archive which is not the architecture being linked (armv7s): /Users/GhostMac/Library/Developer/Xcode/DerivedData/Retail_Wizard_Solution-eazomrmcxqeysfehcgngulleshls/Build/Products/Debug-iphoneos/libTBXML-iOS.a
ld: file is universal (3 slices) but does not contain a(n) armv7s slice: /Volumes/GhostWork/HomeWork/Sachchaudary/furniture-wizard/OpenSSL/lib/libcrypto.a for architecture armv7s
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T07:14:59.950

Armv7s 指的是 iPhone5 硬件。从 Xcode 4.5 GM 开始，这是默认架构。如果您有权访问该库的源代码，则应将架构 armv7s 添加到`Target -> Architectures`.

如果您无法重建库，只需从项目目标设置中的架构和有效架构以及您拥有的任何子项目中删除 armv7s。

您也可以在[此处](http://www.galloway.me.uk/2012/09/hacking-up-an-armv7s-library/)尝试该方法，但是，鉴于您问题中的目录位于作业目录中，我假设您不会提交到应用商店，因此可以从您的架构中省略 armv7。

# php - 为什么函数 is_null 与 $_FILES 不准确？

> ID：12471849
> 
> 赞同：1
> 
> 时间：2012-09-18T06:58:10.183
> 
> 标签：php

我想测试用户是否选择了文件，所以我测试了 if `$_FILES['input_name']['name']`is not null。

我使用了 PHP 函数`is_null($_FILES['input_name']['name'])`，但代码转到了应该选择文件的语句！

所以我用`$_FILES['input_name']['name'] != ""`.

那么为什么 $_FILES['name'] 不`is_null`准确呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T07:02:43.607

别忘了，null 和 "" 是不一样的。

"" 表示一个空字符串，而 null 可以表示一个未初始化的字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T07:03:06.230

Is_null 与 ''（空字符串）不同。

这在 var_dumping 值时很容易看到！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T07:04:49.707

这意味着 $_FILES 数组未初始化为 NULL 值数组。我认为你必须`empty()`改用

[http://php.net/manual/en/function.empty.php](http://php.net/manual/en/function.empty.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T07:36:57.417

is_null(var) 如果 var 为 null，则返回 TRUE，否则返回 FALSE。

```
if(is_null($_FILES['input_name']['name'])){
 block of code;//file name is null
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T07:09:47.567

尝试使用`empty()`函数而不是`== ""`

# mysql - 查询性能慢的原因是什么

> ID：12471851
> 
> 赞同：3
> 
> 时间：2012-09-18T06:58:27.777
> 
> 标签：mysql, performance-testing

我正在读取`tick`最大记录的值`id`。以下导致执行缓慢的查询有什么区别？

### 慢查询：

```
SELECT tick
FROM   eventlog
WHERE  id IN (SELECT max(id) FROM eventlog) 
```

### 快速查询：

```
SELECT max(id) INTO @id
FROM   eventlog;

SELECT tick
FROM   eventlog
WHERE  id = @id; 
```

### 架构

```
CREATE TABLE eventlog (
    id INT (11) NOT NULL AUTO_INCREMENT,
    tick INT NOT NULL,
    eventType_id INT NOT NULL,
    compType INT (10) UNSIGNED NOT NULL,
    compID INT (10) UNSIGNED NOT NULL,
    value_double DOUBLE NOT NULL,
    value_int INT (10),
    hierarchy_id VARCHAR (255) NOT NULL,
    PRIMARY KEY (id),
    INDEX htet (
        hierarchy_id,
        tick,
        eventType_id
    )
) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T07:14:06.940

因为`in`查询不使用索引，所以mysql会扫描所有记录来查找行。

来自[http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html)

> **B-Tree 索引特征**
> 
> B 树索引可用于使用 =、>、>=、<、<= 或 BETWEEN 运算符的表达式中的列比较。

没有`IN`

和

> **哈希索引特征**
> 
> 哈希索引与刚才讨论的有些不同：
> 
> 它们仅用于使用 = 或 <=> 运算符的相等比较（但速度非常快）。它们不用于查找值范围的比较运算符，例如 <。

也没有`IN`。

正如@tombom 提到的，`foo IN ('bar', 'bla')`是 的缩写`foo = 'bar' OR foo = 'bla'`，但是，我相信它们是不同的。于是我对一张有足够数据记录的表进行了测试，发现如下：

```
mysql> show columns from t_key;   
+-------+---------+------+-----+---------+----------------+
| Field | Type    | Null | Key | Default | Extra          |
+-------+---------+------+-----+---------+----------------+
| a     | int(11) | NO   | PRI | NULL    | auto_increment |
| b     | int(11) | YES  | MUL | NULL    |                |
+-------+---------+------+-----+---------+----------------+
2 rows in set (0.00 sec)

mysql> select count(a) from t_key;
+----------+
| count(a) |
+----------+
|   989901 |
+----------+
1 row in set (0.00 sec)

mysql> explain select a from t_key where a in (select max(a) from t_key);  
+----+--------------------+-------+-------+---------------+---------+---------+------+--------+------------------------------+
| id | select_type        | table | type  | possible_keys | key     | key_len | ref  | rows   | Extra                        |
+----+--------------------+-------+-------+---------------+---------+---------+------+--------+------------------------------+
|  1 | PRIMARY            | t_key | index | NULL          | PRIMARY | 4       | NULL | 989901 | Using where; Using index     |
|  2 | DEPENDENT SUBQUERY | NULL  | NULL  | NULL          | NULL    | NULL    | NULL |   NULL | Select tables optimized away |
+----+--------------------+-------+-------+---------------+---------+---------+------+--------+------------------------------+
2 rows in set (0.00 sec)

mysql> explain select a from t_key where a =(select max(a) from t_key);
+----+-------------+-------+-------+---------------+---------+---------+-------+------+------------------------------+
| id | select_type | table | type  | possible_keys | key     | key_len | ref   | rows | Extra                        |
+----+-------------+-------+-------+---------------+---------+---------+-------+------+------------------------------+
|  1 | PRIMARY     | t_key | const | PRIMARY       | PRIMARY | 4       | const |    1 | Using index                  |
|  2 | SUBQUERY    | NULL  | NULL  | NULL          | NULL    | NULL    | NULL  | NULL | Select tables optimized away |
+----+-------------+-------+-------+---------------+---------+---------+-------+------+------------------------------+
2 rows in set (0.00 sec) 
```

然后我尝试`IN`使用静态序列进行查询，它像@tombom 提到的那样工作：

```
mysql> explain select a from t_key where a in (100,200);
+----+-------------+-------+-------+---------------+---------+---------+------+------+--------------------------+
| id | select_type | table | type  | possible_keys | key     | key_len | ref  | rows | Extra                    |
+----+-------------+-------+-------+---------------+---------+---------+------+------+--------------------------+
|  1 | SIMPLE      | t_key | range | PRIMARY       | PRIMARY | 4       | NULL |    2 | Using where; Using index |
+----+-------------+-------+-------+---------------+---------+---------+------+------+--------------------------+
1 row in set (0.00 sec)

mysql> explain select a from t_key where a=100 or a=200;
+----+-------------+-------+-------+---------------+---------+---------+------+------+--------------------------+
| id | select_type | table | type  | possible_keys | key     | key_len | ref  | rows | Extra                    |
+----+-------------+-------+-------+---------------+---------+---------+------+------+--------------------------+
|  1 | SIMPLE      | t_key | range | PRIMARY       | PRIMARY | 4       | NULL |    2 | Using where; Using index |
+----+-------------+-------+-------+---------------+---------+---------+------+------+--------------------------+
1 row in set (0.00 sec) 
```

我不知道mysql是否会在可能的情况下将`IN`查询转换为`ORs`一个（例如，在查询之前知道序列），我没有找到相关文档，但`explain`表明它确实在这种情况下扫描了表。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-18T07:01:20.627

尝试查看查询计划，DBMS 在这种情况下可能无法使用索引。尝试将查询更改为：

```
SELECT tick
FROM   eventlog
WHERE  id = (SELECT max(id) FROM eventlog) 
```

**编辑** 实际上可能有更好的方法。在上面的查询中，您执行了两个 INDEX ACCESS 操作（如果索引不是唯一的，则执行另外一个 INDEX RANGE SCAN）和一个 TABLE ACCESS。相反，您可以这样做：

```
SELECT tick
FROM   eventlog
ORDER BY id DESC
LIMIT 1 
```

有了这个，应该有一个 INDEX ACCESS 加上一个 TABLE ACCESS。事实上，可能存在相当小的差异，因为 TABLE ACCESS 是显着更昂贵的操作，因此可能会在大数据集上看到差异。

# android - android中的多种语言和字体支持

> ID：12471854
> 
> 赞同：0
> 
> 时间：2012-09-18T06:58:49.997
> 
> 标签：android, android-layout, android-fonts

我知道使用语言代码后缀为该语言创建一个新的值目录。对于德语：*values-de*或法语：*values-fr*然后将我们的*string.xml*复制到其中并翻译每个条目。这基于电话本地化设置

我知道，我们可以绕过电话设置，让用户使用下面的代码在应用程序中选择他需要的语言。

```
Locale appLoc = new Locale("en");
Locale.setDefault(appLoc);
Configuration appConfig = new Configuration();
appConfig.locale = appLoc;
getBaseContext().getResources().updateConfiguration(appConfig, getBaseContext().getResources().getDisplayMetrics()); 
```

我在我的应用程序中提供了语言选择选项，并让用户为应用程序选择他想要的语言。在 string.xml 之间动态切换（用于不同的语言）。

我的问题是......应用程序内提供的语言选项是否应该通过电话强制支持？因为，考虑到我的手机不支持卡纳达语区域语言，如果用户在我的应用程序中选择卡纳达语作为语言选项。这些值显示为 [][][][]（框）。如何为整个应用程序设置字体支持？

我不想在android中的每个视图上都使用字体，如下所示

```
Typeface tf = Typeface.createFromAsset(getAssets(), "fonts/comicsans.ttf");

for(int i = 0; i <root.getChildCount(); i++) {
    View v = root.getChildAt(i);
    if(v instanceof TextView ) {
        ((TextView)v).setTypeface(tf);
    } else if(v instanceof Button) {
        ((Button)v).setTypeface(tf);
    } else if(v instanceof EditText) {
        ((EditText)v).setTypeface(tf);
    } else if(v instanceof ViewGroup) {
        changeFonts((ViewGroup)v);
    }
} 
```

我们可以使用一些本地设置来配置整个应用程序的字体吗？

# linux - 检查linux是否在正常模式下运行

> ID：12471861
> 
> 赞同：0
> 
> 时间：2012-09-18T06:59:14.953
> 
> 标签：linux, security

如何在我的应用程序中检查系统是否以正常模式运行，而不是使用 CD-ROM 或 USB 等可启动媒体启动。需要忽略哪些文件、服务或任何其他内容？

这确实是必需的，因为我需要实现一定程度的安全性以及我用来保护我的应用程序的其他措施和技术。有任何想法吗？

PS 我使用 Ubuntu 12.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T07:15:46.203

您可以在此处查看内核命令行，`cat /proc/cmdline`您可以看到用于启动内核的根驱动器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:20:59.113

总结一下，如果您想知道您的系统是否通过 grub 或 lilo 的常规引导过程正常启动，您可以检查`/proc/cmdline`，它告诉您系统在哪里启动，以及引导扇区的唯一 ID 是什么该引导分区，例如：`BOOT_IMAGE=/boot/vmlinuz-*****-generic`.

这个文件不仅可以告诉你系统不同分区的 UUID，还有其他方法可以帮助你做同样的事情：

1-`ls -l /dev/disk/by-uuid/`

lrwxrwxrwx 1 根 9 Oct 13 14:12 3894c432-c0ab-4610-b1de-b2121e54b4e3 -> ../../md1

lrwxrwxrwx 1 根 10 年 10 月 13 日 14:12 87431be0-6af5-459e-9ddb-91028fd637cb ->./../sdd1

lrwxrwxrwx 1 根 13 年 10 月 11 日 14:12 b781ce12-657f-4831-8ed5-e3c5b7c04cf7 ->../..md125

lrwxrwxrwx 1 根 9 Oct 13 14:12 c87d9576-55a6-4c3e-a1fb-04e15c72d94e -> ../../md2

2-`blkid`

/dev/sda1: UUID="b781ce12-657f-4831-8ed5-e3c5b7c04cf7" SEC_TYPE="ext2" TYPE="ext3"

/dev/sdb1: UUID="bb10b5c9-acb6-e72c-768b-29c85cd8b45c" TYPE="linux_raid_member"

/dev/sdd1: LABEL="backups" UUID="87431be0-6af5-459e-9ddb-91028fd637cb" SEC_TYPE="ext2" TYPE="ext3"

/dev/md125: UUID="b781ce12-657f-4831-8ed5-e3c5b7c04cf7" TYPE="ext3"

/dev/md1: UUID="3894c432-c0ab-4610-b1de-b2121e54b4e3" TYPE="swap"

/dev/md2: UUID="c87d9576-55a6-4c3e-a1fb-04e15c72d94e" TYPE="ext3"

* * *

可能还有其他工具可以做同样的工作，但我认为以上足以解决像我这样的问题。

PS 感谢所有在此线程中做出贡献的人 :))

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T07:04:54.590

这不能从应用程序上下文中完成。

构建这样一个系统的最明智的方法是拥有一个需要由授权人员解锁的加密硬盘——这样从可移动媒体启动的人无法访问应用程序或其数据。

# c++ - 通过 ctor 右值参数进行 Lambda 赋值

> ID：12471863
> 
> 赞同：3
> 
> 时间：2012-09-18T06:59:17.843
> 
> 标签：c++, gcc, c++11

从代码项目中获得了这个 ScopeExit 类，但它不会在 GCC 4.5.3 上构建。感谢任何帮助。

```
class ScopeExit : private boost::noncopyable
{
    typedef std::function<void()> func_t;

public:
    ScopeExit(func_t&& f) : func(f) {}
    ~ScopeExit() { func(); }

private:
    // no default ctor
    ScopeExit();

    // Prohibit construction from lvalues.
    ScopeExit(func_t&);

    // Prohibit new/delete.
    void* operator new(size_t);
    void* operator new[](size_t);
    void operator delete(void *);
    void operator delete[](void *);

    const func_t func;
};

ScopeExit exit = [&]() { }; 
```

gcc 4.5.3 错误：

```
In member function ‘void test()’:
error: conversion from ‘test()::<lambda()>’ to non-scalar type ‘ScopeExit’ requested 
```

编辑：

```
ScopeExit exit([&]() { }); // this works 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T07:17:14.290

这是复制/移动初始化。您的副本 c-tor 已删除，移动 c-tor 也已删除。

n3337 12.8/9

> 如果类 X 的定义没有显式声明移动构造函数，当且仅当
> 
> **— X 没有用户声明的复制构造函数，**
> 
> **— X 没有用户声明的复制赋值运算符，**
> 
> — X 没有用户声明的移动赋值运算符，
> 
> **— X 没有用户声明的析构函数，并且**
> 
> — 移动构造函数不会被隐式定义为已删除。

不知道为什么第一个案例不起作用，但这个案例工作正常

```
template<typename T>
ScopeExit(T&& f) : func(std::move(f)) {}
ScopeExit(ScopeExit&& rhs) : func(std::move(rhs.func)) { }] 
```

**编辑。**

当我们使用`copy-initialization`类类型的变量时，仅使用标准和省略号隐式转换。从 lambda 到函数指针或从函数指针到`std::function`is`user-defined conversion`和未使用的转换。

n3337 8.5/16

> 初始化器的语义如下。目标类型是正在初始化的对象或引用的类型，源类型是初始化表达式的类型。如果初始化器不是单个（可能是带括号的）表达式，则未定义源类型。
> 
> 如果目标类型是（可能是 cv 限定的）类类型：
> 
> 否则（即，对于剩余的复制初始化情况），可以从源类型转换到目标类型或（当使用转换函数时）到其派生类的用户定义转换序列被枚举，如 13.3 中所述。 1.4，最好的一个是通过重载决议（13.3）选择的。如果转换无法完成或不明确，则初始化格式错误。

n3337 13.3.1.4/1

> 在 8.5 中指定的条件下，作为类类型对象的复制初始化的一部分，可以调用用户定义的转换来将初始化表达式转换为正在初始化的对象的类型。重载解析用于选择要调用的用户定义转换。假设“cv1 T”为被初始化对象的类型，T为类类型，候选函数选择如下：
> 
> — T 的转换构造函数（12.3.1）是候选函数。
> 
> 1.  在这两种情况下，参数列表都有一个参数，即初始化表达式。[注意：这个参数将与构造函数的第一个参数和转换函数的隐式对象参数进行比较。——尾注]

n3337 13.3.2

> 1\. 从为给定上下文 (13.3.1) 构建的候选函数集合中，选择一组可行函数，通过比较参数转换序列以获得最佳拟合，从中选择最佳函数 (13.3.3)。可行函数的选择考虑自变量和函数参数之间的关系，而不是转换序列的排名。
> 
> 其次，为了使 F 成为一个可行的函数，每个参数都应该存在一个隐式转换序列（13.3.3.1），该序列将该参数转换为 F 的相应参数。

n3337 13.3.3.1/4

> 但是，当考虑构造函数或用户定义的转换函数的参数时，当在类复制初始化的第二步中被调用以复制/移动临时对象时，13.3.1.3 为候选者，当传递时由 13.3.1.7初始化器列表作为单个参数，或者当初始化器列表只有一个元素并且转换到某个类 X 或对（可能是 cv 限定的）X 的引用被视为 X 的构造函数的第一个参数时，或由 13.3.1.4 、13.3.1.5 或 13.3.1.6 在所有情况下，仅考虑标准转换序列和省略号转换序列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T07:28:06.397

您通过将复制构造函数设为私有来禁止复制初始化（这是第一种情况下发生的情况）。但是您的构造函数`ScopeExit(func_t&& f) : func(f) {}`是公共的，这就是在第二个（工作）声明中调用的内容。玩弄两个 ctor 的访问控制规范应该可以验证这一点。

编辑：ForEver 指出的错误术语，实际上`ScopeExit(func_t&& f) : func(f) {}`- 不是移动构造函数。但这就是在第二种情况下被调用的原因，这就是它起作用的原因，而 copy-ctor 的隐私是第一种情况不起作用的原因。

# javascript - 如何使用 javascript 和正则表达式替换双引号字符串中的双引号？

> ID：12471865
> 
> 赞同：0
> 
> 时间：2012-09-18T06:59:28.677
> 
> 标签：javascript, regex, json

如何`"`使用下面 JSON 字符串的正则表达式转义双引号内的双引号 ()？

```
[{
     "LDAP_ID":"a",
     "LAC_NO":"1153274",
     "ACTION":"VBE",
     "DATE_OF_ACTION":"06-01-2006 AM 12:00:00",
     "RESPONSE":"DPP",
     "DEF_OBSERV":"M",
     "REMARK":"visited b"         s emp & rcd 1 emi",
     "OPR_ID":"FCTV1",
     "ACTION_TO_BE":"",
     "ACTION_TO_BE_DT":"",
     "AMOUNT_TOBECHG":"",
     "DELEGATED_TO":"",
     "BRANCH_CODE":"100",
     "DISP_DATE_OF_ACTION":"06-JAN-06",
     "DISP_ACTION_TO_BE_DT":"",
     "SRNO":"142871",
     "DELETED_FLAG":"",
     "TIMESTAMP":"10-08-2012 AM 11:38:30",
     "STAMPDATETIME":"2012-08-10 11:38:30"
}] 
```

需要转义的关键行：

```
"REMARK":"visited b"         s emp & rcd 1 emi", 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T07:43:07.760

这个问题不能用正则表达式来解决。你甚至可以想出一个适用于 99% 的案例，但仅此而已。

无效 JSON 无效，必须由服务器端的人员修复。正则表达式并非旨在解决此类问题。你最好在服务器端修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T07:36:26.070

使用正则表达式修复 JS 中无效 JSON 的唯一方法是将其作为字符串接收，进行替换，然后将其重新评估为 JSON。最后一步可能不安全。这是一个类似问题的问题：[Convert object string to JSON](https://stackoverflow.com/questions/9036429/convert-object-string-to-json)

所以我建议在收到 JSON 之前修复它。无论如何，如果你不能，这里有一个正则表达式的解决方案。

正则表达式仅在值的分隔符之间操作：" 和 "，以确保仅转义值中的双引号（已**编辑**）。

```
:\s*"[^"]*"[^"]*"\s*(,|\s*\}) 
```

这是替换的完整代码（正则表达式**编辑**）：

```
var str = '[{ "LDAP_ID":"a", "LAC_NO":"1153274", "ACTION":"VBE", "DATE_OF_ACTION":"06-01-2006 AM 12:00:00", "RESPONSE":"DPP", "DEF_OBSERV":"M", "REMARK":"visited b" s emp & rcd 1 emi", "OPR_ID":"FCTV1", "ACTION_TO_BE":"", "ACTION_TO_BE_DT":"", "AMOUNT_TOBECHG":"", "DELEGATED_TO":"", "BRANCH_CODE":"100", "DISP_DATE_OF_ACTION":"06-JAN-06", "DISP_ACTION_TO_BE_DT":"", "SRNO":"142871", "DELETED_FLAG":"", "TIMESTAMP":"10-08-2012 AM 11:38:30", "STAMPDATETIME":"2012-08-10 11:38:30" }]'

var j = str.replace(/(:\s*"[^"]*)"([^"]*"\s*(,|\s*\}))/g, '$1\\"$2');

var json = JSON.stringify(eval("(" + j + ")")); 
```

# javascript - Struts 按钮 - 如何防止页面刷新 onclick 事件？

> ID：12471869
> 
> 赞同：0
> 
> 时间：2012-09-18T06:59:43.187
> 
> 标签：javascript, jsp

我正在使用以下代码：

```
<s:submit type="input" value="clickme" onclick="func()"/> 
```

并且`func()`我有一个警报（“hereee”），但是当我单击它时，它会在警报窗口中显示“hereee”。但它也会刷新页面。如何防止页面刷新onclick事件？

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T07:01:12.767

用于`return false`防止页面刷新。

```
<s:submit type="input" value="clickme" onclick="func(); return false;"/> 
```

[**看演示**](http://jsfiddle.net/akhurshid/DtTxK/)

# python - 将 ND 数组合并为单个数组和列表

> ID：12471873
> 
> 赞同：1
> 
> 时间：2012-09-18T06:59:59.883
> 
> 标签：python, arrays, numpy

我所拥有的是：

```
x = array([a, a, a, a, a, a],
          [b, b, b, b, b, b],
          [................],
          [z,z,z,z,z,z,z,z,]) 
```

我正在寻找一种方法：

一世。如何将此数组转换为一维数组 x = array[a,a,a,a,a,a,a,a,b,b,b,b,b,..,z,z,z] 和 a一维列表 x = [a,a,a,a,a,a,a,b,b,b,b,b,...,z,z,z]。

ii. 计算该数组的确切尺寸：我尝试使用 len(x[0]) 和 len(x) 来获取两个维度的坐标，但这种方式似乎有点骇人听闻。是否有任何内置函数来获取数组的维度？

注意：有些数组值是正整数，有些是浮点数，有些是负浮点数，有些是负整数。

提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T07:33:35.757

我`np.ravel`用于这个任务。
如果这是您想要的输出方式，只需调用列表构造函数。
`.shape`将分别为您提供行数和列数，但您实际上并不需要知道它们。

```
>>> import numpy as np
>>> a = np.random.random_integers(0, 9, (3, 4))
>>> a.shape
(3, 4)
>>> print a
[[9 5 1 8]
 [3 1 3 1]
 [3 9 6 6]]
>>> a.ravel()
array([9, 5, 1, 8, 3, 1, 3, 1, 3, 9, 6, 6])
>>> list(a.ravel())
[9, 5, 1, 8, 3, 1, 3, 1, 3, 9, 6, 6] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T07:25:24.000

要从 ND 数组创建一维数组，请使用`ndarray.flatten()`

```
x = array([a, a, a, a, a, a],
      [b, b, b, b, b, b],
      [................],
      [z,z,z,z,z,z,z,z,])
x.flatten() 
```

要从中获取列表，请使用`ndarray.tolist()`

```
xlist = x.tolist() 
```

要获取数组的维度，请使用`ndarray.shape`

```
print x.shape
(4, 6) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T08:18:36.193

*   要将二维数组转换为一维数组，您可以使用`np.ravel(a)`. 如果你想这样做到*位*，你也可以使用`a.shape=-1`。该`a.flatten`方法将返回初始数组的*副本*，这很浪费。
*   要将一维数组转换为列表，您可以使用`list(a)`或`a.tolist()`。要将您的二维数组转换为平面列表，到目前为止更简单的是`list(a.flat)`（`.flat`返回一个“平面”迭代器）。请注意，`a.tolist`在二维数组上使用会给你一个列表列表，而使用`list(a)`会给你一个数组列表。
*   用于`a.shape`获取`a`沿每个维度的大小，作为具有与维度一样多的元素的元组。请注意`len(a)==a.shape[0]`. 使用您的二维数组，`len(a[0])=a.shape[1]`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T07:03:37.170

将数组合并成一个新数组：

```
newArray = array()
for y in x
  newArray += y 
```

找到长度：

```
len(newArray) 
```

# tridion - Tridion：加载程序集“Tridion.ContentDelivery.Interop”时出错

> ID：12471876
> 
> 赞同：0
> 
> 时间：2012-09-18T07:00:06.183
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我们正在将 VBScript 模板转换为 .net 复合模板，并且在使用 Broker Query Mechanism 时遇到了一些问题。

我们的旧代码如下所示：

```
sQuery = "query" & nNumber &  ".AddCriteria(""schema"",""="", ""1132"");"& vbcrlf
if objFields.Item("FilterBD").Value.Count >0 Then
     if objFields.Item("FilterBD").Value(1) = "Yes" Then
      sQuery = sQuery & "query" & nNumber & ".AddOperator(Query.QueryOperator.AND_Field);"& vbcrlf
         sQuery = sQuery & "query" & nNumber & ".AddCriteria(""categorization"", ""="", ""Broker_Dealer/test"");" & vbcrlf
     End If
End If 
```

在将其转换为 .net 时，我们将 Tridion.ContentDelivery.DynamicContent dll 的引用添加到我们的项目中，以便我们可以将代码（示例）编写为：

```
using Tridion.ContentDelivery.DynamicContent.Query;
Tridion.ContentDelivery.DynamicContent.Query.Query query = new Tridion.ContentDelivery.DynamicContent.Query.Query();
ItemSchemaCriteria isArticle = new ItemSchemaCriteria(1132);
CategoryCriteria bdCategory = new CategoryCriteria("Broker_Dealer/\" + \"test\"");
Criteria bdCriteria = CriteriaFactory.And(isArticle, bdCategory);
query.Criteria = bdCriteria; 
```

到目前为止，这种方法在 Visual Studio 中运行良好，但是在模板生成器中构建 CT 时，我们收到错误“无法加载文件或程序集‘无法加载文件或程序集’Tridion.ContentDelivery.Interop，版本 = 6.1。 0.43，Culture=neutral，PublicKeyToken=ddfc895746e5ee6b'或其依赖项之一。系统找不到指定的文件。'

按照[这些在 GAC 中注册 dll 的步骤后](http://sdllivecontent.sdl.com/LiveContent/web/pub.xql?action=home&pub=SDL_Tridion_2011_SPONE&lang=en-US#addHistory=true&filename=MakingCustomCodeWorkWithNewCDAssemblies.xml&docid=task_A3E701D765BB44A4AE3BFDA6A537DBFA&inner_id=&tid=&query=&scope=&resource=&eventType=lcContent.loadDoctask_A3E701D765BB44A4AE3BFDA6A537DBFA)，我们仍然收到同样的问题吗？

我们错过了什么？请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T08:46:37.747

如果您需要查询经纪人，那么 .Net TBB 不是这样做的地方。在您的 VBSscript 模板中，您似乎一直在将服务器端代码写入输出，这是正确的方法。在您的模块化模板中，您应该采用相同的方法 - 写出适当的 .Net 代码，或者可能是更好的方法，写出 .Net 控制标记，当 IIS 处理该标记时，将直接调用 CD API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T08:51:55.787

如果您确定 bin 文件夹中存在 Interop dll，那么我唯一能想到的是它是错误的版本。你能确定 DLL 的版本是 6.1.0.43 吗？

# jquery - 调整浏览器大小时使用jQuery更改图像src

> ID：12471882
> 
> 赞同：4
> 
> 时间：2012-09-18T07:00:35.283
> 
> 标签：jquery, image, replace, screen-size, window-resize

我有两个不同尺寸的图像，一个用于小于 759 像素的屏幕，另一个用于大于 759 像素的屏幕。

我已经设法让图像的来源在文档加载时根据窗口宽度进行更改。但是我真的希望在调整浏览器大小时也能够做到这一点，但是对于我的生活，我无法做到这一点，它似乎只在页面最初加载时才起作用。

这是我的代码：

```
$(document).ready(function() {
    function imageresize() {
        var contentwidth = $(window).width();
        if ((contentwidth) < '700'){
            $('.fluidimage').each(function(){
                var thisImg = $(this);
                var newSrc = thisImg.attr('src').replace('x2', 'x1');
                thisImg.attr('src', newSrc);
            });
        } else {
            $('.fluidimage').each(function(){
                var thisImg = $(this);
                var newSrc = thisImg.attr('src').replace('x1', 'x2');
                thisImg.attr('src', newSrc);
            });
        }
    }

    imageresize();//Triggers when document first loads

    $(window).bind("resize", function(){//Adjusts image when browser resized
        imageresize();
    });
 }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T07:18:41.910

尝试使用 css3 媒体查询，而不是在 jQuery 或 javascript 中进行。

[http://css-tricks.com/media-queries-sass-3-2-and-codekit/](http://css-tricks.com/media-queries-sass-3-2-and-codekit/)

考虑在 . 每当屏幕大小从 600px 调整为 900px 时；x2.jpg 将被加载。默认情况下将使用 x1.jpg。

前任：

```
.img-src {
   background-image: url("http://imageurlhere.com/x1.jpg");
}

@media (min-device-width:600px) and (max-width:900px) {
  .img-src {
      background-image: url("http://imageurlhere.com/x2.jpg");
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T07:11:40.090

先试试这个...

更改以下代码行

```
$(window).bind("resize", function(){//Adjusts image when browser resized
        imageresize();
    }); 
```

到

```
// Bind event listener
    $(window).resize(imageresize); 
```

并将警报放入 imageresize 以查看它是否有效...

万一上述不成功...我相信可能有一个问题..

在你的代码中

```
$(document).ready(function() {

 $(window).bind("resize", function(){//Adjusts image when browser resized
        imageresize();
    });
} 
```

因此驻留在 jquery 中的函数可能无法正常工作。最重要的是尝试使用简单的javascript；我有类似的问题，并使用纯 javascript 解决，而 jquery 在某些浏览器中不起作用。

听起来很奇怪，足以阻止你尝试它，但会奏效......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-29T03:50:01.367

它不是 jQuery，但您可以简单地使用`document.getElementById("myId").src="another.jpg";`id 为“myId”定义 img 的新 src。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T07:33:19.563

如我所见，您的代码运行良好，但我更喜欢使用`setTimeout`, 有时页面可能会变慢而无需调整大小暂停。

```
$(document).ready(function() {
    var resizeTimer,
        $window = $(window);

    function imageresize()
    {
        if ($window.width() < 700)
        {
            $('.fluidimage').text('< 700');
        }
        else
        {
            $('.fluidimage').text('>= 700');
        }
    }
    imageresize();//Triggers when document first loads

    $window.resize(function() {
        clearTimeout(resizeTimer);
        resizeTimer = setTimeout(imageresize, 100);
    });
 }); 
```

示例：[jsfiddle.net/SAbsG/](http://jsfiddle.net/SAbsG/)

# iphone - 如何将 UITableview 显示为 UIAlertview

> ID：12471884
> 
> 赞同：0
> 
> 时间：2012-09-18T07:00:36.360
> 
> 标签：iphone

我正在开发一个使用一个 UIButton 的应用程序。

当我单击该按钮时，它需要显示 UITableView 和其他剩余控件不起作用。我需要显示 UITableView 的行为就像 UIAlertView。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T07:03:31.453

创建`UITableViewController`. 并将模型视图呈现为页面。它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T07:07:15.743

对于您问题的第一部分，只需添加`tableview.userInteractionEnabled = NO`等等即可禁用按钮。如果你想让`UIAlertView`动作像一个`UITableView`简单的添加动画到`UITableView`.

或者你甚至可以制作一个 Custom `UIAlertView`。

# magento - 如何为 Magento 创建动态名称值？

> ID：12471886
> 
> 赞同：0
> 
> 时间：2012-09-18T07:00:40.723
> 
> 标签：magento

我可以将一堆代码添加到 app/design/frontend/default/mytheme/catalog/product/list.phtml，但我想知道是否有一种方法可以在另一个文件中创建“名称”值并简洁地检索它在上述文件中。

我不想为每个项目硬编码名称，而是将每个产品属性的名称拼凑在一起，并根据产品类型使用不同的逻辑。

半伪代码：

```
$attributes = $product->getAttributes();
// universal attributes:
$manuf = $attributes['manufacturer']->getFrontend()->getValue($product);
$color = $attributes['color']->getFrontend()->getValue($product);
$type = $attributes['product_type']->getFrontend()->getValue($product);

// base name, added to below
$name = $manuf . ' ' . $type . ' in ' . $color;

// then logic for specific types
switch($type) {
  case 'baseball hat':
    $team = $attributes['team']->getFrontend()->getValue($product);
    $name .= ' for ' . $team;
  break;
  case 'stilts':
    $length = $attributes['length']->getFrontend()->getValue($product);
    $name .= ' - ' . $length . ' feet long';
  break;
} 
```

由于这个逻辑可能会变得很长，我觉得它不应该全部塞进 list.phtml 中。但是我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T07:47:08.143

您可以使用自定义块类。但是为名称生成创建辅助方法更容易。有关助手的更多信息：

*   [http://www.pierrefay.com/magento-helper-howto-tutorial-113](http://www.pierrefay.com/magento-helper-howto-tutorial-113)
*   [http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-1-introduction-to-magento#6](http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-1-introduction-to-magento#6)
*   [http://pravams.com/2011/06/10/magento-call-helper-files-in-template-block-models/](http://pravams.com/2011/06/10/magento-call-helper-files-in-template-block-models/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T07:56:55.647

这种代码应该放在产品模型中。最好的方法是[覆盖产品类](http://www.magentocommerce.com/boards/viewthread/266479/#t360775)，但为简单起见，我将描述更简单的方法：

1) 复制

```
/app/code/core/Mage/Catalog/Model/Product.php 
```

至

```
/app/code/local/Mage/Catalog/Model/Product.php 
```

2) 向文件中添加新方法

```
/**
 * Get custom name here...
 *
 * @return    string
 */
public function getCombinedName()
{
    // your code below....
    $attributes = $this->getAttributes();
    // universal attributes:
    $manuf = $attributes['manufacturer']->getFrontend()->getValue($product);
    $color = $attributes['color']->getFrontend()->getValue($product);
    $type = $attributes['product_type']->getFrontend()->getValue($product);

    // base name, added to below
    $name = $manuf . ' ' . $type . ' in ' . $color;

    // then logic for specific types
    switch($type) {
        case 'baseball hat':
            $team = $attributes['team']->getFrontend()->getValue($product);
            $name .= ' for ' . $team;
      break;
      case 'stilts':
        $length = $attributes['length']->getFrontend()->getValue($product);
        $name .= ' - ' . $length . ' feet long';
      break;

    }

    return $name;
} 
```

# javascript - 需要帮助来访问不同域中的 XML 数据

> ID：12471891
> 
> 赞同：0
> 
> 时间：2012-09-18T07:00:57.217
> 
> 标签：javascript, xml, json, xmlhttprequest

我在不同的域上有一个 web 服务（基本上是一个身份验证 servlet），它以 XML 格式返回数据，所以每当我尝试创建一个 XMLHttpRequest 对象并调用这个服务时，我都会遇到 Access-Control-Allow-Origin 问题此数据存在于不同的域中。我也尝试过使用 JSONP，但由于服务返回了 XML，这不起作用。那么您对我能做什么有什么建议吗？（如果可能的话，可能会更改 JSONP 调用中返回数据的 MIME 类型）此外，最糟糕的是我无法从 XML 更改服务的返回类型到 JSON。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T07:12:06.207

域 1：加载发出 xml 请求的 javascript 的域

域 2：您尝试从中获取 xml 的域

您必须在域 2 的响应头中设置 Access-Control-Allow-Origin 选项。它的值应该是域 1 的 url。

# javascript - 当损坏的 url 不存在时，如何用默认值替换损坏的 img url

> ID：12471893
> 
> 赞同：1
> 
> 时间：2012-09-18T07:01:08.240
> 
> 标签：javascript, html

我正在制作一个搜索工具，公司的所有员工都可以在其中找到他们的名字。这些值是使用json检索的。（这包括指向员工图像的链接）。

我的问题。有时链接不存在（由于自动生成，来自其他系统的错误输入）。如果就是这样，我想用默认图像替换图像。我如何检查图像链接是否不存在/是否错误？

```
 for ( i = 0; i < totalResultsToShow; i++) {
        //when the photoURL isn't given     
        if (searchResults[i].photoURL == "") {
            searchResults[i].photoURL = imagesURL + "silhouette.jpg";
        }
        //when the photoURL doesn't exists

        //do something??

        HTMLContent += "<div class=resultTableRow id=" + i + " onclick=resultClicked(" + i + ");>";
        HTMLContent += "<div class=resultTableItemImage><img width ='" + resultsImageWidth + "' src='" + searchResults[i].photoURL + "' class=stretchWidth /></div>";
        HTMLContent += "<div class=resultTableItemUser><p>" + searchResults[i].user + "</p></div>"
        HTMLContent += "<div class=resultTableItemUsername><p>" + searchResults[i].username + "</p></div>"
        HTMLContent += "</div>"; "</div>";
    }
//put results on screen 
```

我认为一种解决方案是将图像的代码放在 try/catch 块中。但我个人不喜欢 try/catch 块。

[编辑 1] 我同意你关于检查存在和未定义的观点。结果数组中仅存在链接。但它是一个损坏的链接。有没有办法在将链接添加到 Javascript 中的 html 之前检查链接？

[编辑 2] 我得到的错误是： GET http://...... /---.jpg 404 (Not Found)

[解决方案] 注意 onerror=this.src='"+imagesURL+"/silhouette.jpg'

```
HTMLContent += "<div class=resultTableItemImage><img width ='" + resultsImageWidth + "' src='" + searchResults[i].photoURL + "' class=stretchWidth onerror=this.src='"+imagesURL+"/silhouette.jpg' /></div>"; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T07:04:22.220

```
if (!searchResults[i].photoURL) {
        searchResults[i].photoURL = imagesURL + "silhouette.jpg";
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T07:04:29.770

您可以通过以下方式检查是否存在`searchResults[i].photoURL`：

```
if(searchResults[i].photoURL) { 
    // your code 
} else { 
    // what to do if not found
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T07:03:29.923

```
if (typeof searchResults[i].photoURL === "undefined") {
    searchResults[i].photoURL = imagesURL + "silhouette.jpg";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T18:14:10.510

[解决方案] 注意*onerror=this.src='"+imagesURL+"/silhouette.jpg'*
**Html + javascript 在 1 行。**

```
HTMLContent += "<div class=resultTableItemImage><img width ='" + resultsImageWidth + "' src='" + searchResults[i].photoURL + "' class=stretchWidth onerror=this.src='"+imagesURL+"/silhouette.jpg' /></div>"; 
```

当发生错误时，'onerror=' 将给定的 src 替换为 onerror 后面提供的 src

# android - 在 ASyncTask 中的 startActivity() 之后访问视图组件

> ID：12471898
> 
> 赞同：0
> 
> 时间：2012-09-18T07:01:45.760
> 
> 标签：android, android-intent, android-asynctask

我有一个 AsyncTask 从服务器检索数据，然后需要启动一个新的 Activity 来显示数据。

在异步 onPostExecute 中执行此操作...（但不会启动新活动）

```
setContentView(R.layout.activity_list);
TextView textListDate = ((TextView)findViewById(R.id.textListDate));
textListDate.setText(FormatUtilities.formatDateLong(list.getDateFor())); 
```

这样做会导致空指针异常（由于 TextListDate 为空

```
Intent in = new Intent(super.getAppContext(), List.class);
in.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
super.getAppContext().startActivity(in);
TextView textListDate = ((TextView)findViewById(R.id.textListDate));
textListDate.setText(FormatUtilities.formatDateLong(list.getDateFor())); 
```

这样做会导致屏幕加载我想要的内容，然后几乎立即被空白......

```
Intent in = new Intent(super.getAppContext(), List.class);
in.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
super.getAppContext().startActivity(in);
setContentView(R.layout.activity_list);
TextView textListDate = ((TextView)findViewById(R.id.textListDate));
textListDate.setText(FormatUtilities.formatDateLong(list.getDateFor())); 
```

关于我所缺少的任何建议？我认为这与 findViewById 试图访问“当前”活动的视图而不是新的活动有关......

我是否需要以某种方式将我的数据传递给新的活动并在下一个活动中执行 findViewById ？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T07:08:08.943

1)- 您应该将数据保存在 ArrayList 中或根据服务器的响应，并将该数据与**键、值**对与意图一起放入，然后在下一个活动中检索该意图。2)- 现在您可以在所需位置显示该数据，即列表视图、文本视图等。

谢谢

# java - RESTEasy 和 JAX-RS 之间的区别

> ID：12471901
> 
> 赞同：13
> 
> 时间：2012-09-18T07:01:53.483
> 
> 标签：java, jax-rs, resteasy

什么是安逸？RESTEasy 和 JAX-RS 有什么区别？`@PathParam`和 和有什么不一样`@QueryParam`？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-18T07:10:51.123

根据[其主页](http://www.jboss.org/resteasy/)RESTEasy 是

> [... JAX-RS](http://jsr311.java.net/)规范的完全认证和可移植的实现。

所以 JAX-RS 是一个规范，说明在 Java 中实现 REST API 的库应该是什么样子，而 RESTEasy 是该规范的一个实现。

这实际上意味着 JAX-RS 上的任何文档也应该 1:1 应用于 RESTEasy。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-18T11:03:35.440

**查询参数**是从请求 URI 查询参数中提取的，并通过使用方法参数参数中的 javax.ws.rs.QueryParam 注释来指定。

例子：

```
@Path("smooth")
@GET
public Response smooth(
    @DefaultValue("2") @QueryParam("step") int step,
    @QueryParam("minm") boolean hasMin,
    @QueryParam("test") String test
    ) { ... }

URL: http://domain:port/context/XXX/smooth?step=1&minm=true&test=value 
```

* * *

URI**路径参数**是从请求 URI 中提取出来的，参数名称对应于 @Path 类级注解中指定的 URI 路径模板变量名。URI 参数使用方法参数参数中的 javax.ws.rs.PathParam 注释指定

例子：

```
@Path("/{userName}")
public class MyResourceBean {
...
@GET
public String printUserName(@PathParam("userName") String userId) {
    ...
}
}

 URL: http://domain:port/context/XXX/naveen 
```

在这里，naveen 将用户名（路径参数）作为

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-18T10:19:45.127

JAX-RS 是一组没有真正实现的接口和类，它们属于[`javax.ws.rs.*`](http://docs.oracle.com/javaee/6/api/javax/ws/rs/package-summary.html)包（它们是 Oracle 的 Java SE 6 的一部分）。

[RESTEasy](https://www.jboss.org/resteasy/)以及[Jersey](http://jersey.java.net/)或[Apache CXF](http://cxf.apache.org/docs/jax-rs.html)等都是 JAX-RS 类的开源实现。

在编译期间，您只需要 JAX-RS。在运行时，您只需要其中一种实现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T11:48:35.320

另请注意，JAX-RS 只是服务器端规范，RESTEasy 对其进行了扩展，以通过 RESTEasy JAX-RS 客户端框架将 JAX-RS 带到客户端。

有关参数的信息， [@PathParam 和 @QueryParam 之间有什么区别](https://stackoverflow.com/questions/5579744/what-is-the-difference-between-pathparam-and-queryparam) 这里有一些关于参数的要点， [何时使用 @QueryParam 与 @PathParam](https://stackoverflow.com/questions/11552248/when-to-use-queryparam-vs-pathparam) - Gareth 的回答

# java - 没有任何框架的java p2p

> ID：12471902
> 
> 赞同：0
> 
> 时间：2012-09-18T07:01:56.667
> 
> 标签：java

我需要开发一个不使用 JXTA 之类的框架的 p2p 应用程序。我在 StackOverflow 中搜索了各种主题，但没有得到我想要的。我有一个维护客户端列表及其资源的服务器。客户端将联系服务器以找出哪个客户端拥有什么。客户端从服务器获取此信息后，将与其他客户端建立 p2p 连接——服务器不参与此操作。

我需要知道如何在同一个程序中创建客户端套接字和服务器套接字，即程序应该像服务器和客户端一样。请帮帮我。

```
for ex:
 client code 
 Socket clientSocket = new Socket("localhost", 10000);

 server code
 ServerSocket welcomeSocket = new ServerSocket(10000);

     while(true)
     {
        //client socket
        Socket connectionSocket = welcomeSocket.accept();
        .......
        .......
     } 
```

如何将 serversocket 添加到我的客户端并使其像服务器一样工作？我知道我必须使用线程，但是谁能详细解释一下？或者请发布相关主题。我厌倦了浏览各种论坛和网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T07:28:58.307

实际上有很多方法可以编写与线程和 IO 相关的网络代码（参见[http://www.kegel.com/c10k.html](http://www.kegel.com/c10k.html)）。我猜传统的方式是创建一个线程来处理每个连接，在[Java 教程](http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html)的底部有解释。这很好，如果连接建立，做某事，然后关闭。

但是，如果您一直保持连接打开，您最终可能会创建过多的线程和开销。因此，其他方法。

此外，您应该考虑使用一些通用的 java 网络库。您可以实现自己的协议和通信模型，但仍然可以节省一些精力，并且最终可能会得到更好的代码。

# android - 如何将 Object 转换为 JSONObject

> ID：12471903
> 
> 赞同：0
> 
> 时间：2012-09-18T07:01:58.337
> 
> 标签：android, json, object, android-listview

我有一个使用`JSONArray`. 然后我将上下文菜单添加到我的列表中。

现在我想检索用户选择的列表项的值，所以我使用了

```
 AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();       
 Object object=  list.getItemAtPosition(info.position); 
```

现在的问题是`getItemAtPosition()`返回一个 Object 。如何将其转换为相对**JSONOBject**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T05:09:37.287

因为我使用了 JSONArray 然后我将其解析为相应的 HashMap ，所以在我的适配器中使用了它。因此，函数 getItemAtPosition 以对象的形式返回了一个 HashMap，我的代码问题是我将 HashMap 值转换为 JSONObject，因此我没有将其转换为 JSONObject，而是使用了 Hashmaps。 `HashMap object= (HashMap) list.getItemAtPosition(info.position);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T07:10:04.227

您需要将返回值转换为 JSONObject。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T07:11:55.100

```
AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();       
JSONObject object = (JSONObject) list.getItemAtPosition(info.position); 
```

这里不需要 gson 库，因为 JSON`org.json.JSONObject`自 Api 1 以来就是 Android 库的一部分。

# php - 当邮件包含附件和 HTML 正文时，如何设置标题以在 php 中发送邮件

> ID：12471904
> 
> 赞同：0
> 
> 时间：2012-09-18T07:02:00.180
> 
> 标签：php

我需要使用 php 代码发送一封邮件。邮件包含 HTML 部分、文本和两个附件 (xls) 文件。我如何设置标题和消息正文。对我来说，一次只有一个邮件正文或附件在工作。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T07:20:34.113

你可以试试这个功能，我在[这里](http://www.finalwebsites.com/forums/topic/php-e-mail-attachment-script)找到的，如果你谷歌你也可以得到一些其他的代码

```
<?php
function mail_attachment($filename, $path, $mailto, $from_mail, $from_name, $replyto, $subject, $message) {
    $file = $path.$filename;
    $file_size = filesize($file);
    $handle = fopen($file, "r");
    $content = fread($handle, $file_size);
    fclose($handle);
    $content = chunk_split(base64_encode($content));
    $uid = md5(uniqid(time()));
    $name = basename($file);
    $header = "From: ".$from_name." <".$from_mail.">\r\n";
    $header .= "Reply-To: ".$replyto."\r\n";
    $header .= "MIME-Version: 1.0\r\n";
    $header .= "Content-Type: multipart/mixed; boundary=\"".$uid."\"\r\n\r\n";
    $header .= "This is a multi-part message in MIME format.\r\n";
    $header .= "--".$uid."\r\n";
    $header .= "Content-type:text/plain; charset=iso-8859-1\r\n";
    $header .= "Content-Transfer-Encoding: 7bit\r\n\r\n";
    $header .= $message."\r\n\r\n";
    $header .= "--".$uid."\r\n";
    $header .= "Content-Type: application/octet-stream; name=\"".$filename."\"\r\n"; // use different content types here
    $header .= "Content-Transfer-Encoding: base64\r\n";
    $header .= "Content-Disposition: attachment; filename=\"".$filename."\"\r\n\r\n";
    $header .= $content."\r\n\r\n";
    $header .= "--".$uid."--";
    if (mail($mailto, $subject, "", $header)) {
        echo "mail send ... OK"; // or use booleans here
    } else {
        echo "mail send ... ERROR!";
    }
}
?> 
```

和用法

```
$my_file = "somefile.zip";
$my_path = $_SERVER['DOCUMENT_ROOT']."/your_path_here/";
$my_name = "Olaf Lederer";
$my_mail = "my@mail.com";
$my_replyto = "my_reply_to@mail.net";
$my_subject = "This is a mail with attachment.";
$my_message = "Hallo,\r\ndo you like this script? I hope it will help.\r\n\r\ngr. Olaf"; 
```

函数调用：

```
mail_attachment($my_file, $my_path, "recipient@mail.org", $my_mail, $my_name, $my_replyto, $my_subject, $my_message); 
```

# javascript - textarea SLOW 中的文本编辑器 - javascript

> ID：12471905
> 
> 赞同：1
> 
> 时间：2012-09-18T07:02:05.590
> 
> 标签：javascript, html, textarea

我正在使用固定大小（不会自动增长）文本区域在 html 中实现一个简单（不丰富）的文本编辑器。我制作了一个分页系统，可以拆分文本以适应该文本区域。对于相对较大的文本（20 页 = 20 个文本区域），这 20 页的函数总共需要大约 100 毫秒（如果文本较少，则更少）。逻辑是这样的：

```
function paginate() {
    clienth = textarea.clientheight;
    while (maxTextSize>minTextSize+1) {
        textarea.value = text;
        // a binary subdivision algorithm which runs in logarithmic time
        if (textarea.scrollheight>clienth) {
            text = newsmallertext;
        } else {
          text = newbiggertext;
        }
        maxTextSize = newvalue1;
        minTextSize = newvalue2;
    }
} 
```

因此对于大约 14 KB 的文本（19pages），该函数被调用 187 次（每页 10 次），firefox 的时间约为 100 毫秒，chrome 和 opera 的时间约为 60 毫秒，IE 的时间约为 200 毫秒。在这 100 毫秒中，大约 40 毫秒用于将文本分配给文本区域（.value = blabla），其余 60 毫秒用于检查滚动高度是否大于客户端高度。因此，99% 的时间都花在了那里。

这看起来并不多，但确实如此。为什么 ？因为我需要每次用户在 textarea 中键入（按一个键）调用该函数，以便相应地应用新文本。用户可以键入字母、退格、删除、回车等等。因此，对于每个 keydown，我再次调用 paginate 函数来计算适合 textarea 的新文本。这使得打字非常慢，因为每个按键都有 100 毫秒的延迟。

所以我想知道是否有优化将文本分配给文本区域或检查滚动高度，或者完全不同的方式。

提前感谢您的所有建议。

请不要建议让 textarea 自动增长，它不在要求中。

编辑：使 while() 循环更清楚地了解它的作用。

# ruby-on-rails-3 - 质量分配错误 simple_form 嵌套属性

> ID：12471908
> 
> 赞同：1
> 
> 时间：2012-09-18T07:02:18.210
> 
> 标签：ruby-on-rails-3, nested-attributes, simple-form, mass-assignment

我实在想不通这个。我已经阅读了很多关于批量分配错误的类似问题，但我尝试过的每个解决方案都失败了。

我正在尝试使用 accept_nested_attributes_for 和 simple_form 将我的机构模型嵌套到我的课程模型中。我的代码如下：

课程模式：

```
 # Attributes 
  attr_accessible :class_end, :class_start, :cost, :effort, :level, :name, :overview, :prerequisites, :tags, :tag_list

  # Associations 
  belongs_to :institution 
  accepts_nested_attributes_for :institution 
```

机构模式：

```
# Attributes
attr_accessible :bio, :city, :country, :name, :state, :twitter_url, :type, :url, :image_url, :email

 # Associations
 has_many :courses 
```

嵌套 simple_form 的视图：

```
<%= simple_form_for(@course) do |f| %>
  <%= f.simple_fields_for :institutions do |i| %>
    <%= i.input :name %>            
    <%= f.input :name %>
    <%= f.input :overview %>
    <%= f.input :cost %> 
    <%= f.input :level %>
    <%= f.input :tag_list %> 
    <%= f.input :class_start %>
    <%= f.input :class_end %>
    <%= f.input :effort %>
    <%= f.input :prerequisites %>

    <%= f.button :submit %>
  <% end %>
<% end %> 
```

我得到的错误：

```
Can't mass-assign protected attributes: institutions

{"utf8"=>"✓",
 "authenticity_token"=>"GRoBHYhpv3QyzvH2UHBaJQ/62+9QIDKIwp/VLiLMjus=",
 "course"=>{"institutions"=>{"name"=>"asdfa"},
 "name"=>"sdaf",
 "overview"=>"asdf",
 "cost"=>"Free",
 "level"=>"Beginner",
 "tag_list"=>"asdf",
 "class_start(1i)"=>"2012",
 "class_start(2i)"=>"9",
 "class_start(3i)"=>"18",
 "class_end(1i)"=>"2012",
 "class_end(2i)"=>"9",
 "class_end(3i)"=>"18",
 "effort"=>"asdf",
 "prerequisites"=>"asdf"},
 "commit"=>"Create Course"} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T07:05:24.137

您需要将institution_attributes 添加到课程的attr_accessible 并为fields_for 使用正确的名称，我认为它应该是：institution，而不是：institutions。表单应如下所示：

```
<%= simple_form_for(@course) do |f| %>
  <%= f.simple_fields_for :institution do |i| %>
    <%= i.input :name %>            
  <% end %>
  <%= f.input :name %>
  <%= f.input :overview %>
  <%= f.input :cost %> 
  <%= f.input :level %>
  <%= f.input :tag_list %> 
  <%= f.input :class_start %>
  <%= f.input :class_end %>
  <%= f.input :effort %>
  <%= f.input :prerequisites %>

  <%= f.button :submit %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-29T07:28:37.277

您是否在控制器中“建立”了机构？

尝试包括：

```
@course.build_institution 
```

在你的 CoursesController

# php - preg_replace 正则表达式与其他表达式冲突

> ID：12471910
> 
> 赞同：1
> 
> 时间：2012-09-18T07:02:25.837
> 
> 标签：php, regex, preg-replace

所以我在这里

```
<? $regex = array('/@(\w+)/','/#(\w+)/','/((www|http:\/\/)[^ ]+)/');
    $replace = array(
    '<a href="https://www.twitter.com/$1">@$1</a>',
    '<a href="https://twitter.com/#!/search/%23$1">#$1</a>',
    '<a href="\1">\1</a>'
); ?>

<?= preg_replace($regex,$replace,stripslashes($row['tweet_text']));?> 
```

前两个假设将带有 @ 和 # 的任何内容转换为链接。这显然是针对推特的。但是第三个应该将带有 http 或 www 的任何内容转换为链接。但这似乎与前两个弄乱了链接相冲突。

我怎样才能让第三个链接在不与其他两个冲突的情况下创建 http 或 www 链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T07:06:20.690

这充其量是hacky，但你可以试试这个：

```
<? $regex = array('/((www|http:\/\/)[^ ]+)/', '/(?<!>)@(\w+)/', '/(?<!>)#(\w+)/');
    $replace = array(
    '<a href="\1">\1</a>',
    '<a href="https://www.twitter.com/$1">@$1</a>',
    '<a href="https://twitter.com/#!/search/%23$1">#$1</a>'
); ?> 
```

翻转顺序，首先修复链接，然后仅在它们前面没有 a 的情况下替换`@`和处理（如果它们已经在锚标记内，它们就是这样）。`#``>`

# java - 使用 Java 实现 HTML5 Websocket 服务器端向浏览器发送消息？

> ID：12471913
> 
> 赞同：3
> 
> 时间：2012-09-18T07:02:43.563
> 
> 标签：java, html, websocket, socketserver

您好我已经实现了从这个线程读取的 WebSocket 帧[我如何在服务器端发送和接收 WebSocket 消息？](https://stackoverflow.com/questions/8125507/how-can-i-send-and-receive-websocket-messages-on-the-server-side/12471677)， 真的谢谢。

我成功地实现了握手。我成功地接收到消息并将框架从浏览器读取到 Java。

这是我在 Java 中的发送实现。

```
public void brodcast(String mess) throws IOException{
    byte[] rawData = mess.getBytes();

    int frameCount  = 0;
    byte[] frame = new byte[10];

    frame[0] = (byte) 129;

    if(rawData.length <= 125){
        frame[1] = (byte) rawData.length;
        frameCount = 2;
    }else if(rawData.length >= 126 && rawData.length <= 65535){
        frame[1] = (byte) 126;
        byte len = (byte) rawData.length;
        frame[2] = (byte)((len >> 8 ) & (byte)255);
        frame[3] = (byte)(len & (byte)255); 
        frameCount = 4;
    }else{
        frame[1] = (byte) 127;
        byte len = (byte) rawData.length;
        frame[2] = (byte)((len >> 56 ) & (byte)255);
        frame[3] = (byte)((len >> 48 ) & (byte)255);
        frame[4] = (byte)((len >> 40 ) & (byte)255);
        frame[5] = (byte)((len >> 32 ) & (byte)255);
        frame[6] = (byte)((len >> 24 ) & (byte)255);
        frame[7] = (byte)((len >> 16 ) & (byte)255);
        frame[8] = (byte)((len >> 8 ) & (byte)255);
        frame[9] = (byte)(len & (byte)255);
        frameCount = 10;
    }

    int bLength = frameCount + rawData.length;

    byte[] reply = new byte[bLength];

    int bLim = 0;
    for(int i=0; i<frameCount;i++){
        reply[bLim] = frame[i];
        bLim++;
    }
    for(int i=0; i<rawData.length;i++){
        reply[bLim] = rawData[i];
        bLim++;
    }

    out.write(reply);
    out.flush();

} 
```

当我像广播（“Hello world”）一样调用这个函数时；服务器立即广播消息，浏览器接收信息并显示。套接字立即关闭并抛出“软件导致连接中止套接字写入错误”。我无法在后面发送消息。

# c++ - C ++如何将比率转换为双倍

> ID：12471919
> 
> 赞同：1
> 
> 时间：2012-09-18T07:02:52.220
> 
> 标签：c++

我需要一些常数，发现我可以在标准库比率中得到它，但不能直接得到。假设我想要一个双值 one_nano，我可以这样做。

```
const double one_nano = (double)nano::num / nano::den; 
```

但就我个人而言，我不认为这比这更好：

```
const double one_nano = 1e-9; 
```

我只是不想自己定义常量，是否有类似 nano::value 或其他的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T07:10:35.113

直接定义常量更具可读性。如果你觉得它很难看，你总是可以把它放在标题中，而不是放在代码的顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T07:20:38.207

`nano::value`不是比率类的成员。只有`nano::den`和`nano::num`会员可用。

也许您可以使用 nano::den 的除法而不是乘以`nano::value`[不可用]。

或者你可以使用一个头文件来定义你的常量。

# android - 在 Android 中实现布局作为背景

> ID：12471924
> 
> 赞同：0
> 
> 时间：2012-09-18T07:03:07.633
> 
> 标签：android, android-layout, background

在我的应用程序中，我创建了一个包含 5 个按钮的相对布局，现在我想在其他布局中使用相同的布局作为背景。我正在尝试代码`android:background+"@layout/dashboard"`，但 Eclipse 显示错误。我想将该布局显示为**Parent Bottom**以便我可以实现滚动视图并可以调用除**仪表板**之外的所有元素。请帮助我让我知道：

1.  如何添加另一个布局作为背景
2.  如何将该布局设置为 alignParentBottom
3.  如何修改 scrollView 以使仪表板保持静态而其余元素可以滚动..

dashboard.xml 的代码

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/b1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentBottom="true"
        android:text="Home" />

    <Button
        android:id="@+id/b2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@+id/b1"
        android:layout_alignParentBottom="true"
        android:text="Explore" />

    <Button
        android:id="@+id/b3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:text="MIC" />

    <Button
        android:id="@+id/b4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toLeftOf="@+id/b5"
        android:layout_alignParentBottom="true"
        android:text="Msngr" />

    <Button
        android:id="@+id/b5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentBottom="true"
        android:text="Profile" />

</RelativeLayout> 
```

showdashboard.xml 的代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@layout/dashboard" >

</LinearLayout> 
```

我得到的错误是：

**无法解析文件 C:\Users\%username%\Documents\eclipse\CustomList\res\layout\dashboard.xml 异常详细信息记录在 Window > Show View > Error Log**

请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T08:50:01.710

由于您希望页面底部有一个静态视图 pf 按钮，因此您可以将这些按钮包装在线性布局中，并将其余按钮放在滚动视图中。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:weightSum="1" >

<ScrollView
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="0.7"
    android:id="@+id/s_view" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <!-- You can put your components here -->
    </LinearLayout>
</ScrollView>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="0.3"
    android:orientation="horizontal" >

    <!-- your 5 buttons here -->
    <Button
        android:layout_width="match_parent"
        android:layout_height="20dp" />
    <Button
        android:layout_width="match_parent"
        android:layout_height="20dp" />
    <Button
        android:layout_width="match_parent"
        android:layout_height="20dp" />
    <Button
        android:layout_width="match_parent"
        android:layout_height="20dp" />
    <Button
        android:layout_width="match_parent"
        android:layout_height="20dp" />
</LinearLayout> 
```

您可以通过调整布局权重来更改底部布局/滚动视图的大小。

如果您想为多个活动使用相同的布局，则制作单独的线性布局（或其他，如果您愿意），然后您可以将它们添加到活动中的滚动视图。

```
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.new_layout);
    ScrollView sv = (ScrollView) findViewById(R.id.s_view);
    LayoutInflater lInflator = getLayoutInflater();
    sv.addView(lInflator.inflate(R.layout.view_component, null));

} 
```

其中 s_view 是滚动视图的 id，组件视图是目标布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T07:18:26.513

我通过你的写作得到了什么你想做的`Static Buttons`但其他布局应该有一个`ScrollView`

所以你可以通过这个布局做到这一点

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="fill_parent"
android:layout_height="fill_parent" android:layout_weight="1.0" android:background="#ffffff" android:orientation="vertical">
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="fill_parent"
    android:layout_height="fill_parent" android:layout_weight="1.0" android:background="#ffffff" android:orientation="vertical">
    <LinearLayout android:layout_width="fill_parent" android:layout_height="wrap_content" android:background="#ffffff"
    android:orientation="vertical" android:layout_weight="1.0">
        <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_weight="1.0">
            ---Your Scroll Vieww Layout hereee-------
        </ScrollView>
    </LinearLayout>
</LinearLayout>

<LinearLayout android:layout_width="fill_parent" android:layout_height="wrap_content"
    android:background="#F3F0EC" android:orientation="horizontal">

        ----your  5 Button Layout hereee-------
</LinearLayout>
</LinearLayout> 
```

# android - 为不同的屏幕尺寸缩放文本大小

> ID：12471926
> 
> 赞同：1
> 
> 时间：2012-09-18T07:03:10.583
> 
> 标签：android

我有一些布局，我想将我的文本大小调整为屏幕大小。我对所有尺寸都使用了 sp，但是当我切换到平板电脑时，我的文字看起来仍然很小。

是否有一个通用的比例公式或其他东西可以简单地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T07:06:12.717

尝试`View.getHeight()`并`View.getWidth()`相应地应用您的逻辑。

**或者**

用这个 ：

```
Display display = ((WindowManager) getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay(); 
int width = display.getWidth(); 
int height = display.getHeight(); 
```

**或者**

要以英寸为单位获取屏幕尺寸，请尝试：

```
DisplayMetrics dm = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(dm);
double x = Math.pow(dm.widthPixels/dm.xdpi,2);
double y = Math.pow(dm.heightPixels/dm.ydpi,2);
double screenInches = Math.sqrt(x+y);
Log.d("debug","Screen inches : " + screenInches); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T07:05:14.420

使用`dip`而不是，`sp`但我确定默认文本大小取决于其容器，例如 textView 或 Button

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T07:05:24.607

您可以使用

```
android:textSize="dip" 
```

例如。`10 dip,20 dip`

# javascript - 如何创建类似谷歌官方博客导航栏的导航栏

> ID：12471935
> 
> 赞同：0
> 
> 时间：2012-09-18T07:03:51.220
> 
> 标签：javascript, jquery, css

我访问了[谷歌官方博客](http://googleblog.blogspot.com/)，对谷歌博客导航栏和标题很感兴趣！我想要制作菜单和像谷歌博客导航栏这样的位置，第一个位置是相对的，滚动时是固定的，但不知道要制作它。

在谷歌上搜索并且永远不知道它所以也许谷歌开发人员看看它并给我信息;D或其他人知道它请分享..

谢谢，

# c# - 为什么 .ToList().Distinct() 抛出错误，但不是 .Distinct().ToList() 与 linq 查询

> ID：12471937
> 
> 赞同：8
> 
> 时间：2012-09-18T07:04:00.113
> 
> 标签：c#, linq

我不知道**LinqQuery.ToList().Distinct()**和**LinqQuery.Distinct().ToList() 之间的区别；**对我来说，两者看起来都一样。

考虑这个示例代码：

```
List<string> stringList = new List<string>();

List<string> str1  = (from item in stringList
                                select item).ToList().Distinct();

List<string> str2 = (from item in stringList
                                 select item).Distinct().ToList(); 
```

str1 显示错误为：“无法将类型 'System.Collections.Generic.IEnumerable' 隐式转换为 'System.Collections.Generic.List'。存在显式转换（您是否缺少演员表？）”

但 str2 没有错误。

请帮助我了解这两者之间的差异。谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-18T07:06:35.743

`.Distinct()`是一种对 进行操作`IEnumerable<T>`并*返回*一个`IEnumerable<T>`（惰性求值）的方法。An`IEnumerable<T>`是一个序列：它**不是**一个`List<T>`. 因此，如果您想以列表结尾，请将 the`.ToList()`放在最后。

```
// note: this first example does not compile
List<string> str1  = (from item in stringList
                            select item) // result: IEnumerable<string>
                         .ToList() // result: List<string>
                         .Distinct(); // result: IEnumerable<string>

List<string> str2 = (from item in stringList
                             select item) // result: IEnumerable<string>
                         .Distinct() // result: IEnumerable<string>
                         .ToList(); // result: List<string> 
```

为了说明为什么会这样，请考虑以下粗略的实现`Distinct()`：

```
public static IEnumerable<T> Distinct<T>(this IEnumerable<T> source) {
    var seen = new HashSet<T>();
    foreach(var value in source) {
        if(seen.Add(value)) { // true == new value we haven't seen before
            yield return value;
        }
    }
} 
```

# android - android检测GPS提供程序但没有获取位置

> ID：12471938
> 
> 赞同：0
> 
> 时间：2012-09-18T07:04:00.223
> 
> 标签：android, gps, location

事情就是这样。我使用了与我在单独的类中所做的相同的功能，该功能仅包含特定于 gps 的功能，仅供试用。它有效，尽管我必须说坐标值不正确。现在我尝试在我的真实项目中实现相同的功能，但它不起作用。它确实检测到我是否在手机中启用或禁用了 GPS，但没有出现协调值。

对于代码，我做了两个类。Froyo2Activity 和 MyLocationListener。Froyo2Activity 是仅扩展 Activity 和 MyLocationListener 实现 LocationListener 的主要活动。为了更好地查看，这是我的代码。

```
public class Froyo2Activity extends Activity{
Spinner priorSpin, genderSpin;
ImageView femaleView, maleView;
Button submit, agePrev, ageNext, bpPrev, bpNext, pPrev, pNext, butLoc;
SeekBar seekAge, seekBP;
EditText ageEdit, bpEdit, pEdit, locEdit, fname, lname; 
TextView tv;

String commandline="", ageString="", bpString="", pString="";
int age = 0, bp = 0, p = 0;
double latitude, longitude, altitude, pitch = 0;    

private static final int REQUEST_CODE = 10;
private LocationManager locationManager;
private String provider;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_froyo2);       

    fname = (EditText) findViewById(R.id.editText1);
    lname = (EditText) findViewById(R.id.editText2);
    ageEdit = (EditText) findViewById(R.id.editText7);
    pEdit = (EditText) findViewById(R.id.editText9);
    locEdit = (EditText) findViewById(R.id.editText3);
    femaleView = (ImageView)findViewById(R.id.femaleView);
    maleView = (ImageView)findViewById(R.id.maleView);
    priorSpin = (Spinner) findViewById(R.id.prior_spin);
    genderSpin = (Spinner)findViewById(R.id.gender_spin);
    tv = (TextView) findViewById(R.id.textView14);

    //---set the GPS---
    //Get the location manager
    LocationManager mlocManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
      LocationListener mlocListener = new MyLocationListener();
      mlocManager.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, mlocListener);

      if (mlocManager.isProviderEnabled(LocationManager.GPS_PROVIDER)) {
          if(MyLocationListener.latitude>0)
          {
              latitude=MyLocationListener.latitude;
              longitude=MyLocationListener.longitude;
              tv.setText("Latitude: "+ Double.toString(latitude) +" Longitude: "+  Double.toString(longitude)+" Altitude:"+  Double.toString(pitch)+"");                        
           }
           else
           {
              tv.setText("Signal Not Available");
            }
        } else {
            tv.setText("GPS is not turned on...");              
       }
    //---end GPS--- 
```

这是 MyLocationListener 的代码

```
 package com.example.froyo2;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.content.Context;
import android.location.Criteria;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.widget.TextView;
import android.widget.Toast;

public class MyLocationListener implements LocationListener {
public static double latitude;
public static double longitude;
public static double salah=90;

@Override
public void onLocationChanged(Location loc)

   {
//        loc.getLatitude();
//        loc.getLongitude();
        latitude=loc.getLatitude();
        longitude=loc.getLongitude();
        salah=1;
}

@Override
public void onProviderDisabled(String provider)
{
    salah=2;
}

@Override
public void onProviderEnabled(String provider)
{

    salah=3;
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras)
    {
        salah=4;
    }
} 
```

有谁知道如何解决这个问题。就像我之前说的，当我用自己的类对 gps 功能进行试用时；意思是没有实现其他功能或活动，特别是仅针对 GPS 功能测试的类，它确实有效 - 至少指出了位置的数量。但是，在用其他功能实现 GPS 时，它说信号不可用（请参阅代码）。如果这个问题能得到解决，那将是有帮助的。

感谢提前。（萨拉布朗）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:02:34.353

使用以下代码：

```
locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,
                MINIMUM_TIME_BETWEEN_UPDATES,
                MINIMUM_DISTANCE_CHANGE_FOR_UPDATES, locationListener); 
```

对于 locationListener 你可以使用这个（**把它放在你的 Froyo2Activity 中**）：

```
LocationListener locationListener = new LocationListener() {
        public void onLocationChanged(Location location) {
            // Called when a new location is found by the GPS location
            // provider.

            String message = String.format(
                    "New Location \n Longitude: %1$s \n Latitude: %2$s",
                    location.getLongitude(), location.getLatitude());
            Toast.makeText(LbsGeocodingActivity.this, message,
                    Toast.LENGTH_LONG).show();
            // Here you can set your Value of Textview

        } 
```

我在我的代码中使用了它，它工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:49:37.437

我认为你需要更换

```
if(MyLocationListener.latitude>0) 
```

和

```
if(mlocListener.latitude>0) 
```

希望能帮助到你

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-20T08:22:58.733

更改此行

```
if (mlocManager.isProviderEnabled(LocationManager.GPS_PROVIDER)) 
```

至

```
if (mlocManager.isProviderEnabled(locationManager.GPS_PROVIDER)) 
```

它会正常工作

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-18T08:10:34.350

有时 GPS 提供商它不会工作。尝试使用网络提供商

# android - Android JNI方法中的lstat函数

> ID：12471939
> 
> 赞同：0
> 
> 时间：2012-09-18T07:04:05.963
> 
> 标签：android, c, linux, android-ndk

我有这样的事情：

```
DIR *dir = opendir(curdir);
struct dirent *de = readdir(dir);
struc stat st;
lstat(de->d_name, &st); 
```

我想知道`de`是目录还是文件，st应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:54:30.523

正确而简单的方法是检查`if (de->d_type == DT_DIR)`。你不必为此使用`lstat`。

# c# - 如何在 Gridview 中进行数据绑定？

> ID：12471950
> 
> 赞同：1
> 
> 时间：2012-09-18T07:04:36.730
> 
> 标签：c#, asp.net, sql, sql-server

我将如何将`DataBind`SQL 2005 数据库添加到`GridView`Button`OnClick();`事件中？

我还想以表格格式显示数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T07:07:24.040

这是一个示例代码，它可能对您有所帮助..

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="BasicGridView" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title>Untitled Page</title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:GridView ID="GridView1" runat="server">
        </asp:GridView>

    </div>
    </form>
</body>
</html>

File: Default.aspx.cs

using System;
using System.Data;
using System.Configuration;
using System.Collections;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
using System.Web.Configuration;
using System.Data.SqlClient;

public partial class BasicGridView : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!this.IsPostBack)
        {
            string connectionString = WebConfigurationManager.ConnectionStrings["Northwind"].ConnectionString;
            string selectSQL = "SELECT ProductID, ProductName, UnitPrice FROM Products";
            SqlConnection con = new SqlConnection(connectionString);
            SqlCommand cmd = new SqlCommand(selectSQL, con);
            SqlDataAdapter adapter = new SqlDataAdapter(cmd);
            DataSet ds = new DataSet();

            adapter.Fill(ds, "Products");

            GridView1.DataSource = ds;
            GridView1.DataBind();
        }
    }
}

File: Web.config

<?xml version="1.0"?>
<configuration>
  <connectionStrings>
    <add name="Northwind" connectionString="Data Source=localhost\SQLEXPRESS;Initial Catalog=Northwind;Integrated Security=SSPI"/>
  </connectionStrings>
</configuration> 
```

阅读另一篇文章以供参考..

[http://www.c-sharpcorner.com/uploadfile/john_charles/data-binding-in-Asp-Net-2-0-using-gridview-control/](http://www.c-sharpcorner.com/uploadfile/john_charles/data-binding-in-Asp-Net-2-0-using-gridview-control/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T07:16:44.683

也许您需要从学习 ADO.NET 开始，使用 SQL 数据适配器与数据库进行通信。

使用数据适配器，您可以使用 SQL 数据库中的记录填充 DataTable。

为了将您的数据表与 Gridview 一起使用，您最好查看绑定对象。

我使用绑定源，它将 DataTable 和 Gridview 绑定在一起，在 DataTable 中所做的更改将自动反映在 GridView 中。

互联网上有数百万个这样的例子。

希望这能让你朝着正确的方向前进。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T07:54:04.027

如果您开始学习基本的 ADO.NET，那就太好了，因为它很有趣！这是您怀疑的示例，希望这可能会有所帮助。 [ASP.Net 将 GridView 绑定到 DataTable](http://www.ezineasp.net/post/ASP-Net-Bind-GridView-to-DataTable.aspx)

如果您想通过流程学习（意味着创建连接，然后使用在数据访问层，业务层中创建的对象和方法，在后面的代码中使用），那么您可以问。

# shell - 文本对齐中心 - shell 脚本

> ID：12471951
> 
> 赞同：9
> 
> 时间：2012-09-18T07:04:44.963
> 
> 标签：shell, ubuntu

我正在使用 shell 脚本创建一个简单的基于控制台的脚本。它将在我的 bash shell 上运行它是一个基于简单菜单的驱动显示一些选项集。

现在我想根据屏幕大小对文本进行居中对齐。如何在屏幕中心对齐文本？请帮助我

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-18T12:31:43.337

最后我找到了解决方案:)

```
COLUMNS=$(tput cols) 
title="Hello world!" 
printf "%*s\n" $(((${#title}+$COLUMNS)/2)) "$title" 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-06-04T15:08:23.850

在包括 MacOS 在内的基于 BSD 的系统上，该`fmt`实用程序具有一个`-c`使文本居中的标志。

```
echo $text | fmt -c -w $COLUMNS 
```

不幸的是，GNU`fmt`有一个不兼容的 -c 标志并且没有替代居中的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T07:09:37.723

简单的 Perl 解决方案：

```
perl -pe '$sp = " " x (($ENV{COLUMNS} - length) / 2); s/^/$sp/' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-22T12:47:31.880

在中心打印文本：

```
echo "Some Text" | sed  -e :a -e "s/^.\{1,$(tput cols)\}$/ & /;ta" | tr -d '\n' | head -c $(tput cols) 
```

输出：

```
 Some Text 
```

# .net - 在与应用程序文件夹相同的文件夹中部署 .net 4.0 二进制文件

> ID：12471953
> 
> 赞同：1
> 
> 时间：2012-09-18T07:04:49.507
> 
> 标签：.net, deployment, setup-deployment

我必须部署一个针对 .net 4.0 框架的应用程序。

我使用一个 zip 来打包所有二进制文件并在“客户端”上将它们交付（解压缩）到指定的文件夹。出于安全原因，我只能使用指定的文件夹。

鉴于“客户端”没有安装 .net 4.0，是否可以在该 zip 中包含 .net 4.0 二进制文件。我应该包括哪些二进制文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T07:17:32.873

如果您使用的是完整安装程序，您可能能够引导 .NET 运行时安装，但您不能简单地 xcopy-deploy .NET；对于“正常”使用，您的用户将需要安装 .NET 运行时。这是一个系统级软件包，可安装到您无法选择的预定位置。

有*专门的*工具试图解决这个问题，例如 thinstall 或[Salamander](http://www.remotesoft.com/linker/)，但它们通常不是免费的。此外，这不是“正常的”，所有通常的支持/可靠性期望都将不在讨论范围内。

# jquery - jQuery：选择器解析机制

> ID：12471959
> 
> 赞同：2
> 
> 时间：2012-09-18T07:05:18.693
> 
> 标签：jquery, jquery-selectors

来自文档：

`$(selector, context)`在内部实现该`.find()`方法。

但是当我们写一些选择器时；

`$('#a .b .c')`

或者

`$('#a > .b > .c')`

等等

这是否实现`.find()`方法？或用于此的其他机制 jQuery。

请让我清楚这个解析机制。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T07:07:10.673

现代实现会将选择器交给`document.querySelectorAll()`浏览器尝试将其解析为 CSS 选择器的位置（假设它是有效的）。

如果做不到这一点，jQuery 会退回到它自己的选择器引擎[Sizzle](http://sizzlejs.com)，它在实现后代和兄弟选择器时使用内部方法和计算来遍历 DOM，这些选择器很可能*不*使用这样的方法，`.find()`因为那样会产生不必要的开销。

# javascript - 每15分钟检查一次的javascript循环

> ID：12471964
> 
> 赞同：1
> 
> 时间：2012-09-18T07:05:47.743
> 
> 标签：javascript, loops

嗨，我有点困惑写这个循环。它应该每隔 15 分钟发出一次警报，说明为 0 分钟。

```
var i = 0;
var l = 900;
var m = 90000;
for (i=i; i<=m; i++){
    alert(i+l);
    i=i+l;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T07:08:40.020

您需要的是[setInterval](http://www.w3schools.com/jsref/met_win_setinterval.asp)方法：

```
setInterval(function(){
    alert('hi');
},15*60*1000); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T07:09:14.447

```
window.setInverval(function(){
    alert("msg");
}, 1000*60*15); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T07:26:22.653

使用@janith 的回答，我怀疑您的下一个问题将是`how do I stop an interval`：

```
var intId = setInterval(function()
{
    alert('foo');
},15*60000);//assign to var
clearInterval(intId);//stops the interval 
```

甚至更好（并且更安全，没有全局变量）：

```
var intervalMgmt = (function(intId)
{
    var start = function(cb,time)
    {
        intId = setInterval(cb,time);
    };
    var stop = function()
    {
        clearInterval(intId);
    };
    return {start:start,stop:stop};
})();
intervalMgmt.start(function()
{
    console.log('foo');
},5000);//logs "foo" every 5 seconds
//some time later:
intervalMgmt.stop();//stops the interval 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T07:25:22.717

使用以下代码：

```
var i = 0;
var l = 900;
var m = 90000;

 var setIntervalConst = setInterval(function(){
      if(i > m){
       clearInterval(setIntervalConst ); return;
      }
      alert(i+l);
       i=i+l;
  },15*60*1000); 
```

# mysql - 在多个连接表上使用 MySQL GROUP_CONCAT 或 PIVOT

> ID：12471965
> 
> 赞同：2
> 
> 时间：2012-09-18T07:05:52.563
> 
> 标签：mysql, sql, pivot, group-concat

**问题**

我正在为一所学校开发内容管理系统，我希望能够创建多个连接表的视图。除了加入表之外，我还需要执行 PIVOT 或 GROUP_CONCAT（或其他一些函数）以便从每个表中获取多行并将它们用作视图中的列。为了帮助可视化，这里是我正在使用的简化：

**设置**

结构体：

```
DROP TABLE IF EXISTS `date`;
CREATE TABLE `date` (
  `col_pkid` int(11) NOT NULL AUTO_INCREMENT,
  `col_guid` varchar(100) NOT NULL DEFAULT '',
  `col_entry` varchar(100) NOT NULL,
  `col_inquiry_name` varchar(100) NOT NULL,
  `col_value` int(11) DEFAULT NULL,
  PRIMARY KEY (`col_pkid`)
);

DROP TABLE IF EXISTS `bigText`;
CREATE TABLE `bigText` (
  `col_pkid` int(11) NOT NULL AUTO_INCREMENT,
  `col_guid` varchar(100) NOT NULL DEFAULT '',
  `col_entry` varchar(100) NOT NULL,
  `col_inquiry_name` varchar(100) NOT NULL,
  `col_value` text,
  PRIMARY KEY (`col_pkid`)
);

DROP TABLE IF EXISTS `smallText`;
CREATE TABLE `smallText` (
  `col_pkid` int(11) NOT NULL AUTO_INCREMENT,
  `col_guid` varchar(100) NOT NULL,
  `col_entry` varchar(100) NOT NULL,
  `col_inquiry_name` varchar(100) NOT NULL,
  `col_value` varchar(100) DEFAULT '',
  PRIMARY KEY (`col_pkid`)
); 
```

数据：

```
INSERT INTO `date` (`col_pkid`, `col_guid`, `col_entry`, `col_inquiry_name`, `col_value`)
VALUES
    (1,'d2kih1ho5z','1','Semester',1294834220),
    (2,'d2kih1j99y','2','Semester',1327077210);

INSERT INTO `bigText` (`col_pkid`, `col_guid`, `col_entry`, `col_inquiry_name`, `col_value`)
VALUES
    (16,'d2kih1kxwh','1','Description','Lorem ipsum dolor sit amet...'),
    (17,'d2kih1mhnn','2','Description','Consectetur adipiscing elit...');

INSERT INTO `smallText` (`col_pkid`, `col_guid`, `col_entry`, `col_inquiry_name`, `col_value`)
VALUES
    (1,'d2kih1njuj','1','Title','Addition and Subtraction'),
    (2,'d2kih1ot0x','1','Course','Math'),
    (16,'d2kj5osy71','1','Location','Building 7'),
    (17,'d2kj5p0z8f','1','Teachers','John'),
    (18,'d2kj5p5efi','1','Teachers','Jane'),
    (19,'d2kj5p98xv','1','Teachers',''),
    (20,'d2kj5pasi9','1','Teachers',''),
    (21,'d2kj5pbqbg','1','Teachers',''),
    (22,'d2kj5pdxdb','2','Title','Reading Mark Twain'),
    (23,'d2kih198do','2','Course','Literature'),
    (24,'d2kj5opcgo','2','Location','Building 4'),
    (25,'d2hd00n5eb','2','Teachers','Billy'),
    (26,'d2hea3jo74','2','Teachers','Bob'),
    (27,'d2hec78m5e','2','Teachers',''),
    (28,'d2hec7bnar','2','Teachers',''),
    (29,'d2hec7cbrq','2','Teachers',''); 
```

**一些失败的尝试**

通过执行以下操作，我可以很好地将表格连接在一起：

```
DROP VIEW IF EXISTS entries;
CREATE VIEW entries AS
SELECT
    st.col_entry,
    if(st.col_inquiry_name = 'Title', st.col_value, NULL) AS 'Title', 
    if(st.col_inquiry_name = 'Course', st.col_value, NULL) AS 'Course',
    if(bt.col_inquiry_name = 'Description', bt.col_value, NULL) AS 'Description',
    if(d.col_inquiry_name = 'Semester', d.col_value, NULL) AS 'Semester',
    if(st.col_inquiry_name = 'Location', st.col_value, NULL) AS 'Location',
    if(st.col_inquiry_name = 'Teachers', st.col_value, NULL) AS 'Teachers'
FROM smallText st
INNER JOIN bigText bt
ON st.col_entry = bt.col_entry
INNER JOIN date d
ON bt.col_entry = d.col_entry
GROUP BY col_entry; 
```

但在这里我只从每个表中获取第一行的值。这就是为什么我尝试介绍的原因，`GROUP_CONCAT`尽管我也没有取得太大的成功：

```
DROP VIEW IF EXISTS entries;
CREATE VIEW entries AS
SELECT
    st.col_entry,
    GROUP_CONCAT(if(st.col_inquiry_name = 'Title', st.col_value, NULL)) AS 'Title', 
    GROUP_CONCAT(if(st.col_inquiry_name = 'Course', st.col_value, NULL)) AS 'Course',
    GROUP_CONCAT(if(bt.col_inquiry_name = 'Description', bt.col_value, NULL)) AS 'Description',
    GROUP_CONCAT(if(d.col_inquiry_name = 'Semester', d.col_value, NULL)) AS 'Semester',
    GROUP_CONCAT(if(st.col_inquiry_name = 'Location', st.col_value, NULL)) AS 'Location',
    GROUP_CONCAT(if(st.col_inquiry_name = 'Teachers', st.col_value, NULL)) AS 'Teachers'
FROM smallText st
INNER JOIN bigText bt
ON st.col_entry = bt.col_entry
INNER JOIN date d
ON bt.col_entry = d.col_entry
GROUP BY col_entry; 
```

我可以让视图中的每一列都填充有表中的相应值，但是根据它们加入的原始行数（7 次），日期和 bigText 列被复制。

（另外，作为另一个增加的复杂程度......我想拥有它，以便不同的老师也能找到自己的专栏：Teacher_01，Teacher_02，..Teacher_05，我猜这可能涉及对我所拥有的东西进行重大重组。）

谢谢！

...更新

因此，我能够生成一个查询，该查询输出的内容与我正在寻找的内容更接近，但我不能在视图中使用它，因为`FROM`子句中有一个子查询：

```
SELECT
st.col_entry,
Title,
Course,
Description,
Semester,
Location,
Teachers
FROM smallText st
JOIN (SELECT smallText.col_entry, GROUP_CONCAT(if(smallText.col_inquiry_name = 'Title', smallText.col_value, NULL)) AS 'Title' 
    FROM smallText GROUP BY smallText.col_entry) a
ON a.col_entry = st.col_entry
JOIN (SELECT smallText.col_entry, GROUP_CONCAT(if(smallText.col_inquiry_name = 'Course', smallText.col_value, NULL)) AS 'Course'
    FROM smallText GROUP BY smallText.col_entry) b
ON b.col_entry = st.col_entry
JOIN (SELECT bigText.col_entry, GROUP_CONCAT(if(bigText.col_inquiry_name = 'Description', bigText.col_value, NULL)) AS 'Description'
    FROM bigText GROUP BY bigText.col_entry) c
ON c.col_entry = st.col_entry
JOIN (SELECT date.col_entry, GROUP_CONCAT(if(date.col_inquiry_name = 'Semester', date.col_value, NULL)) AS 'Semester'
    FROM date GROUP BY date.col_entry) d
ON d.col_entry = st.col_entry
JOIN (SELECT smallText.col_entry, GROUP_CONCAT(if(smallText.col_inquiry_name = 'Location', smallText.col_value, NULL)) AS 'Location'
    FROM smallText GROUP BY smallText.col_entry) e
ON e.col_entry = st.col_entry
JOIN (SELECT smallText.col_entry, GROUP_CONCAT(if(smallText.col_inquiry_name = 'Teachers', smallText.col_value, NULL)) AS 'Teachers'
    FROM smallText GROUP BY smallText.col_entry) f
ON f.col_entry = st.col_entry
GROUP BY st.col_entry 
```

**结果**

此查询的输出如下所示：

```
Entry   Title                           Course      Description                     Semester    Location    Teachers
---------------------------------------------------------------------------------------------------------------------------------
1       Addition and Subtraction        Math        Lorem ipsum dolor sit amet...   1294834220  Building 7  NULL
2       Reading Mark Twain              Literature  Consectetur adipiscing elit...  1327077210  Building 4  NULL 
```

除了空`Teachers`列之外，它基本上是我正在寻找的（但以某种方式生成，我可以在视图中使用查询）。

此外，正如我上面提到的，我希望能够将相同的多个值提取`inquiry_name`到单独的列中。所以最终所需的输出如下所示：

**期望的结果**

```
Entry   Title                           Course      Description                     Semester    Location    Teachers_01 Teachers_02 Teachers_03 Teachers_04 Teachers_05
---------------------------------------------------------------------------------------------------------------------------------
1       Addition and Subtraction        Math        Lorem ipsum dolor sit amet...   1294834220  Building 7  John        Jane        NULL        NULL        NULL
2       Reading Mark Twain              Literature  Consectetur adipiscing elit...  1327077210  Building 4  Billy       Bob         NULL        NULL        NULL 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T16:59:08.480

这是一个模拟`PIVOT`应用`rownum`给老师的例子：

```
select s.col_entry,
  max(case when s.col_inquiry_name = 'Title' then s.col_value end) AS 'Title',
  max(case when s.col_inquiry_name = 'Course' then s.col_value end) AS 'Course',
  max(case when b.col_inquiry_name = 'Description' then b.col_value end) AS 'Description',
  max(case when d.col_inquiry_name = 'Semester' then d.col_value end) AS 'Semester',
  max(case when s.col_inquiry_name = 'Location' then s.col_value end) AS 'Location',
  max(case when tch.grp = 'Teachers_01' then tch.col_value end) AS 'Teachers_01',
  max(case when tch.grp = 'Teachers_02' then tch.col_value end) AS 'Teachers_02',
  max(case when tch.grp = 'Teachers_03' then tch.col_value end) AS 'Teachers_03',
  max(case when tch.grp = 'Teachers_04' then tch.col_value end) AS 'Teachers_04',
  max(case when tch.grp = 'Teachers_05' then tch.col_value end) AS 'Teachers_05'
from smallText s
left join bigText b
  on s.col_entry = b.col_entry 
left join date d
  on b.col_entry = d.col_entry 
left join
(
  select col_entry, col_value, concat('Teachers_0', group_row_number) grp
  from
  (
    select col_entry, col_value,
      @num := if(@col_entry = `col_entry`, @num + 1, 1) as group_row_number,
      @col_entry := `col_entry` as dummy
    from smallText , (SELECT @rn:=0) r
    where col_inquiry_name = 'Teachers'
      and col_value != ''
  ) x
) tch
  on s.col_entry = tch.col_entry
group by s.col_entry; 
```

# 请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/56971/43)

编辑#1，根据您提供的附加字段，`col_order`您可以使用它来确定教师而不使用`rownum`变量：

```
select s.col_entry,
  max(case when s.col_inquiry_name = 'Title' then s.col_value end) AS 'Title',
  max(case when s.col_inquiry_name = 'Course' then s.col_value end) AS 'Course',
  max(case when b.col_inquiry_name = 'Description' then b.col_value end) AS 'Description',
  max(case when d.col_inquiry_name = 'Semester' then d.col_value end) AS 'Semester',
  max(case when s.col_inquiry_name = 'Location' then s.col_value end) AS 'Location',
  max(case when s.col_inquiry_name = 'Teachers'
        and s.col_order = 1 then s.col_value end) AS 'Teachers_01',
  max(case when s.col_inquiry_name = 'Teachers'
        and s.col_order = 2 then s.col_value end) AS 'Teachers_02',
  max(case when s.col_inquiry_name = 'Teachers'
        and s.col_order = 3 then s.col_value end) AS 'Teachers_03',
  max(case when s.col_inquiry_name = 'Teachers'
        and s.col_order = 4 then s.col_value end) AS 'Teachers_04',
  max(case when s.col_inquiry_name = 'Teachers'
        and s.col_order = 5 then s.col_value end) AS 'Teachers_05'
from smallText s
left join bigText b
  on s.col_entry = b.col_entry 
left join date d
  on b.col_entry = d.col_entry 
group by s.col_entry 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/f796f/4)

# iphone - 如何倾斜图像？

> ID：12471973
> 
> 赞同：0
> 
> 时间：2012-09-18T07:06:21.783
> 
> 标签：iphone, image-processing, gpuimage

![在此处输入图像描述](../Images/fb2973c80c55752355016725e207dde2.png)

当我按下并拖动红色圆角时，该角仅根据 X，Y 而不是图像的其余部分增加。如何处理这个问题。请帮我。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T07:57:13.957

CATransform3D 应该可以帮助您解决这个问题。也许你可以通过这个[链接](http://watchingapple.com/2008/04/core-animation-3d-perspective/)。还有[这个](https://stackoverflow.com/a/353611/942966)

**编辑**

其他相关链接：

1.  [iPhone 图像拉伸（倾斜）](https://stackoverflow.com/questions/2351586/iphone-image-stretching-skew)
2.  [如何在 UIView 上使用 CATransform3D 添加特定类型的透视图？](https://stackoverflow.com/questions/3275982/how-do-i-use-catransform3d-on-a-uiview-to-add-a-specific-type-of-perspective)

# arrays - as3 更改数组的顺序 - 消除零？

> ID：12471978
> 
> 赞同：0
> 
> 时间：2012-09-18T07:06:44.697
> 
> 标签：arrays, actionscript-3, flash, actionscript

嗨，我有一个包含 10 个项目的数组。

```
var myArray:Array = ["One", "Two", "Three","Four", "Five", "Six","Seven", "Eight", "Nine","Ten"]; 
```

我想保留这十个相同的项目，但希望数组以 1 而不是 0 开头。

例如，如果我打电话。

```
trace(myArray[1]); // this should display "One"; 
```

如果这样做...

```
trace(myArray[7]); // this should display "Seven"; 
```

**我可以写什么简单的函数来改变这个顺序？**

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T07:21:27.770

添加“零”作为该数组的第一个元素。应该做 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T08:35:23.253

```
function returnArrayVal(i:uint):*{  
    return myArray[--i];
}
trace(returnArrayVal(5)); 
```

# android - Android AudioTrack 中的“status -12”是什么意思？

> ID：12471979
> 
> 赞同：8
> 
> 时间：2012-09-18T07:06:45.913
> 
> 标签：android, soundpool, audioflinger

使用 Android soundpool/audioTrack 时，我不断收到以下错误：

```
AudioFlinger could not create track, status: -12
Error creating AudioTrack 
```

谁能解释一下`-12`是什么？它是源代码中一些枚举的值吗？

我已经看到了其他处理错误的问题，`-12`但我没有明确地看到这个常数实际上代表什么。有人知道 AudioFlinger 的可能状态列表吗？我也看到过错误`-22`，但我也不知道这意味着什么。

由源代码或文档支持的答案是最好的，但我会在这一点上获取我能获得的任何信息。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-18T07:39:56.053

```
-12 is ENOMEM Not enough space

-22 is EINVAL Invalid argument. 
```

这些是标准的 POSIX 错误代码

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-12T19:08:31.220

-12 表示您不能再创建轨道。Android Audio Framework 只允许每个混音器线程同时播放 32 个音轨（包括播放/停止/暂停/...）。

尝试在后台删除一些应用程序，您可以创建一个。

# android - Android在库项目中获取资源drawable

> ID：12471980
> 
> 赞同：1
> 
> 时间：2012-09-18T07:06:48.583
> 
> 标签：android, resources

我有一个 Android 库项目，我想使用可绘制资源。我该怎么做呢？

`Bitmap fr = BitmapFactory.decodeResource(null, R.drawable.fr)`不起作用，因为我需要替换`null`为`Resources`，由 检索`getResources()`。但是，由于我的图书馆项目有或没有活动，因此没有`getResources()`方法，我似乎无法使用这些资源。在没有活动的情况下使用资源的任何解决方法或解决方案？（不过，我宁愿不硬编码文件路径。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T07:41:40.810

如果可以将 Context 对象传递给函数，则可以使用

```
context.getResources() 
```

# android - 如何在对话框中全屏显示视频视图？

> ID：12471981
> 
> 赞同：0
> 
> 时间：2012-09-18T07:06:51.563
> 
> 标签：android, dialog, android-videoview

我有一个视频视图。当我触摸它时，它应该显示在一个几乎全屏视图的对话框中。为此，我使用了以下代码：

```
mVideoFirst.setOnTouchListener(new OnTouchListener() {
                    @Override
                    public boolean onTouch(View v, MotionEvent event) {
                        mVideoFirst.stopPlayback();
                        mVideoDialog.show();
                        mVideoFullScreen.setVideoPath(clip1.getAbsolutePath());
                        mMediaController3.setMediaPlayer(mVideoFullScreen);
                        mVideoFullScreen.setMediaController(mMediaController3);
                        mVideoFullScreen.requestFocus();
                        mVideoFullScreen.start();
                        return false;
                    }
                }); 
```

对于对话框，我使用了以下 java 代码：

```
mVideoDialog = new Dialog(this);
    mVideoDialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
    mVideoDialog.setContentView(R.layout.fullscreen_video);
    mVideoDialog.setOnKeyListener(this);
    mVideoFullScreen = (VideoView) mVideoDialog.findViewById(R.id.fullscreen_videoview); 
```

这是我对对话框的 xml 恶意代码：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <VideoView
        android:id="@+id/fullscreen_videoview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true" >
    </VideoView>

</RelativeLayout> 
```

现在的问题是，视频正在对话框中播放。但是视频出现在对话框的右侧。对话框左侧有很多空白区域。控制器隐藏在对话框后面。所以我无法使用视频控制器控制视频，因为我无法触摸它。

谁能帮我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T07:19:42.343

我想在`mVideoDialog.setContentView(R.layout.fullscreen_video);`你打电话之前`mVideoDialog.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN)` 让对话框全屏显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T07:26:42.200

您需要将布局和视频视图的高度和宽度设置为匹配父级。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<VideoView
    android:id="@+id/fullscreen_videoview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true" >
</VideoView> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-05T04:46:20.230

您可以像这样制作自定义视频视图控件：

```
public class FullScreenVideoView extends VideoView {
    public FullScreenVideoView(Context context) {
        super(context);
    }

    public FullScreenVideoView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public FullScreenVideoView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec){
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        setMeasuredDimension(widthMeasureSpec, heightMeasureSpec);
    }
}
```

并在您的 xml 中使用此控件：

```
 <com.yourpackagename.FullScreenVideoView
                android:id="@+id/videoView"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" />
```

对话画面：

```
 AlertDialog.Builder dialogBuilder = new AlertDialog.Builder(this);
        LayoutInflater inflater = getLayoutInflater();
        View dialogView = inflater.inflate(R.layout.your_custom_dialog_xml, null);
        dialogBuilder.setView(dialogView);
        final Dialog dialog = dialogBuilder.create();
        dialog.setCancelable(false);
        dialog.show();
```

# delphi - TCanvas 上的“附加”文本渲染？

> ID：12471982
> 
> 赞同：4
> 
> 时间：2012-09-18T07:06:58.690
> 
> 标签：delphi

令我惊讶的是，我发现在 TCanvas 上重复渲染文本在某种程度上是“附加的”。我意识到设置`Canvas.Brush.Style:=bsClear`是问题的原因，但我确实需要透明且重复地渲染文本（即在`OnPaint`事件中）。这样做之后，文本看起来不太好。

我怎样才能避免这种情况？

这是一些示例代码；如果您在一个名为`btn1`.

```
procedure TForm1.btn1Click(Sender: TObject);
begin
Form1.Canvas.Brush.Style:=bsClear; //if you omit this, everything is OK.
Form1.Canvas.Font.Color:=clRed;
Form1.Canvas.Font.Name:='Times new Roman';
Form1.Canvas.Font.Style:=[fsBold];
Form1.Canvas.Font.Size:=12;
Form1.Canvas.TextOut(50,50,'www.stackoverflow.com');
end; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T08:08:40.793

这是因为 GDI 在绘制文本时应用了一些抗锯齿，以使文本看起来更好。这会导致绘制文本之外的一些背景像素在文本附近被涂成红色/微红色。下一次绘制文本时，如果不清除背景，抗锯齿会导致这些带红色的像素变得更红。

您可以将背景清除为[Arioch '](https://stackoverflow.com/users/976391/arioch-the)他的[回答](https://stackoverflow.com/a/12472378/243614)中所述，或者如果您确实需要透明且重复地渲染文本，您可以关闭抗锯齿。

[TOndrej](https://stackoverflow.com/users/11480/tondrej)在[这个答案](https://stackoverflow.com/a/3717053)中提供了一个很好的函数来指定文本输出质量。使用它，代码变为：

```
begin
Form1.Canvas.Brush.Style:=bsClear;
Form1.Canvas.Font.Color:=clRed;
Form1.Canvas.Font.Name:='Times new Roman';
Form1.Canvas.Font.Style:=[fsBold];
Form1.Canvas.Font.Size:=12;
SetFontQuality(Form1.Canvas.Font, NONANTIALIASED_QUALITY);  // <--
Form1.Canvas.TextOut(50,50,'www.stackoverflow.com');
end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T07:33:56.790

您应该在渲染之前清理背景。

*   通常 Windows 会为它提供特殊信号，WM_ERASEBKGND [http://msdn.microsoft.com/ru-ru/library/windows/desktop/ms648055.aspx](http://msdn.microsoft.com/ru-ru/library/windows/desktop/ms648055.aspx)
*   VirtualTreeView 或 QuantumTreeList 等一些组件具有特殊的事件处理程序来绘制单元格背景。

如果控件未公开此类消息/事件，则必须记住最后呈现的文本 TRect（函数 TCanvas.TextExtent 或类似函数）并在呈现下一个文本之前对其进行清理。

有时也可能和更简单（尽管是一种“肮脏和丑陋”的解决方法）将只保留一个透明的 TLabel 漂浮在画布上方的适当位置，并在需要时更改其标题。

# sql - 如何编写检索最后更改的 sql

> ID：12471987
> 
> 赞同：1
> 
> 时间：2012-09-18T07:07:14.370
> 
> 标签：sql, oracle10g, max

```
43  RÜQİİ, Siyəzən QİS   960037  9900001621  5  2455239  25022  
44  RÜQİİ, Sumqayıt QİS  960077  9900001621  6  2455092  43395  
45  RÜQİİ, Sumqayıt QİS  960077  9900001621  5  2455092  47185  
46  RÜQİİ, Tovuz QİS     960060  9900001621  5  2455240  39237  
47  RÜQİİ, Tərtər QİS    960059  9900001621  5  2455240  39244 
```

嗨，大家好。当我从数据库中选择时，它会返回这样的结果。第 7 列是“STATECHANGETIME”，我想编写只返回最后一次更改的 sql（第 7 列的最大值）

我的sql是：

```
SELECT ORG.DESCRIPTION, ORG.EXTERNALKEY, P.VALUE AS VOEN, AGR.STATECODE, AGR.STATECHANGEDATE, AGR.STATECHANGETIME
FROM organization org, AGREEMENT AGR, PROPERTY P, PMTSVCAGREEMENT PSA
WHERE     AGR.RECEIVERID = ORG.ID AND P.ID = ORG.ID AND PSA.ID=AGR.ID
    AND P.IDX = 4 AND (org.ownerid = (SELECT id 
                                      FROM organization
                                      WHERE externalkey = '960000') 
    OR ORG.EXTERNALKEY = '960000')
ORDER BY CASE WHEN ORG.EXTERNALKEY = '960000' THEN 0 ELSE 1 END, ORG.DESCRIPTION; 
```

怎么写。感谢你

我希望检索此结果：

```
43  RÜQİİ, Siyəzən QİS   960037  9900001621  5  2455239  25022    
44  RÜQİİ, Sumqayıt QİS  960077  9900001621  5  2455092  47185  
45  RÜQİİ, Tovuz QİS     960060  9900001621  5  2455240  39237  
46  RÜQİİ, Tərtər QİS    960059  9900001621  5  2455240  39244 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T08:15:20.810

如果没有更多信息，我想[这段代码](http://sqlfiddle.com/#!4/9ca95/13)可以帮助你。它获取按`STATECHANGEDATE, STATECHANGETIME`降序排序的集合，然后通过使用

```
WHERE ROWNUM <= 1 
```

希望能帮助到你。

# vb.net - Mongodb异常无法获取下一个数据vb.net

> ID：12471991
> 
> 赞同：0
> 
> 时间：2012-09-18T07:07:37.553
> 
> 标签：vb.net, mongodb, mongodb-.net-driver

我有一个从数据库 mongodb 获取数据的程序，但我未能获取下一个数据

这段代码

```
Dim listOfBusiness = New Generic.List(Of Business)
Dim mongo As MongoServer = MongoServer.Create(otherComputerToServerSafeUpdate)
mongo.Connect()
Dim db = mongo.GetDatabase("namedatabase")
Using mongo.RequestStart(db)
    Dim collection = db.GetCollection(Of BsonDocument)("tablebusiness")
    Dim queryPlaces = query.WithinRectangle("LongitudeLatitude", (Longitude - minimumBlock), (Latitude - minimumBlock), (Longitude + minimumBlock), (Latitude + minimumBlock))
    Dim ListCollectionBusinessCursor = collection.Find(queryPlaces)
    For Each ReturnedDocument In ListCollectionBusinessCursor
        Dim aBusiness = New Business(ReturnedDocument)
        listOfBusiness.Add(aBusiness)
    Next ReturnedDocument   'Got exception here
End Using 
```

这是我的例外

MongoDB查询异常

```
QueryFailure flag was assertion db\key.cpp:409 (response was { "$err" : "assertion db\\key.cpp:409" }) 
```

我在 mongodb shell 中尝试 queryplace，得到 13 个结果

```
Queryplace="{ "LongitudeLatitude" : { "$within" : { "$box" : [[-80.293072110482868, 26.29], [-80.213072110482855, 26.369999999999997]] } } }" 
```

有什么问题，为什么会这样？它只偶尔发生一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:47:06.333

我收到此错误消息，解决方案是修复数据库。

`mongod --repair`

# php - Wamp 错误日志观察器？

> ID：12471992
> 
> 赞同：1
> 
> 时间：2012-09-18T07:07:45.730
> 
> 标签：php, logging, wampserver

像许多其他人一样，我在本地机器上使用 WAMP 来测试我的 PHP 代码，并经常使用 trigger_error 来确定我的脚本的问题。这确实很好用，但经常令人烦恼的一件事是 error_log 文件的冗长性。每个 PHP 通知都伴随着堆栈跟踪等。

我经常玩弄编写一些描述的应用程序的想法，这将帮助我快速将我想要的信息归零，而不会造成眼睛疲劳（我通常在浏览器中保持打开 error_log 文件，然后刷新它以检查最新的条目）。但是，这将偏离实际工作，并且很可能已经存在某种性质的东西。我已经在 Google 上搜索了很多以找到现成的解决方案，但还没有找到。也许这里有人可以为我指出正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T07:23:32.067

我认为您正在寻找的是`tail`cmd 中的命令。

*   下载：[http ://www.microsoft.com/en-us/download/confirmation.aspx?id=17657](http://www.microsoft.com/en-us/download/confirmation.aspx?id=17657)
*   额外信息： http: [//www.windows-commandline.com/2010/08/tail-command-for-windows.html](http://www.windows-commandline.com/2010/08/tail-command-for-windows.html)

运行脚本时只需运行`tail -f <path to *.log>`并观察您的 cmd。

现在您不必再刷新了。

还是我完全误解了你的问题？:)

# jquery - jQuery Live，多次函数执行

> ID：12471998
> 
> 赞同：0
> 
> 时间：2012-09-18T07:08:09.530
> 
> 标签：jquery

当我在动态页面中使用 jQuery`live`函数时（页面通过 Ajax 显示），使用 检测到的按钮事件`live`是重复的。而且，每次我访问包含这些按钮的页面时，单击都会导致功能执行多次。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T07:13:09.373

这意味着您已多次将同一处理程序附加到同一事件。

如果没有代码，就不可能提供进一步的帮助，但我相信你现在知道如何自己修复它了 :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T07:46:30.980

`live()`您可能（不经意间）在同一个元素上多次重新绑定事件（例如，绑定实时事件的代码重复了多次）。尝试使用`one()`；这只会绑定*一次*，如果完全相同的事件已经绑定到元素，则不会重新绑定。

示例用法：

```
$("#foo").one("click", function() {
    //event on click, bind this just once, even if this block of code is repeated
}); 
```

假设您使用 将事件绑定到链接单击`one()`，它只会在每次单击时执行（并*继续*执行）该操作，但会阻止它在每次单击时触发 xxx 次（xxx 是它被绑定的时间）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T07:18:58.753

我建议您使用`.on()`并且`.off()`已经`.live()`被弃用并显示了很多问题

[http://api.jquery.com/on/](http://api.jquery.com/on/)

[http://api.jquery.com/off/](http://api.jquery.com/off/)

[http://api.jquery.com/live/](http://api.jquery.com/live/)

你可以做的是`.off()`在绑定`.on()`到元素之前设置，这样我们就可以确保所有以前的事件处理程序都被删除。

由于您没有提供任何代码，我只是猜测您的问题是什么。

我认为在每个 ajax 响应中，DOM 都会随着`.live()`再次调用的代码而改变，以监听新注入的 DOM 的事件。现在从我之前所说的开始`.on()`，并且`.off()`已经开始救援了。调用`.off()`以确保删除所有现有的事件处理程序，然后通过以下方式重新创建所有事件侦听器`.on()`

# android - Android中的RSA加密解密

> ID：12471999
> 
> 赞同：49
> 
> 时间：2012-09-18T07:08:10.830
> 
> 标签：android, rsa, public-key-encryption, encryption

我正在 Android 中实现 RSA 加密和解密的演示。我可以很好地执行加密，但在解密时我得到一个例外：`>>java.security.InvalidKeyException: unknown key type passed to RSA`。

```
 KeyPairGenerator kpg;
    KeyPair kp;
    PublicKey publicKey;
    PrivateKey privateKey;
    byte [] encryptedBytes,decryptedBytes;
    Cipher cipher,cipher1;
    String encrypted,decrypted;

    public String RSAEncrypt (final String plain) throws NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException, IllegalBlockSizeException, BadPaddingException 
    {
        kpg = KeyPairGenerator.getInstance("RSA");
        kpg.initialize(1024);
        kp = kpg.genKeyPair();
        publicKey = kp.getPublic();
        privateKey = kp.getPrivate();

        cipher = Cipher.getInstance("RSA");
        cipher.init(Cipher.ENCRYPT_MODE, publicKey);
        encryptedBytes = cipher.doFinal(plain.getBytes());
        encrypted = new String(encryptedBytes);
        System.out.println("EEncrypted?????"+encrypted);
        return encrypted;

    }

    public String RSADecrypt (final String result) throws NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException, IllegalBlockSizeException, BadPaddingException 
    {

        cipher1=Cipher.getInstance("RSA");
        cipher1.init(Cipher.DECRYPT_MODE, privateKey);
        decryptedBytes = cipher1.doFinal(result.getBytes());
        decrypted = new String(decryptedBytes);
        System.out.println("DDecrypted?????"+decrypted);
        return decrypted;

    } 
```

我从这里调用函数：

```
encrypt.setOnClickListener(new OnClickListener()
        { 
            public void onClick(View arg0) 
            {
                    try
                    {
                        RSAEncrypt rsaencrypt=new RSAEncrypt();
                        rsaencrypt.RSAEncrypt(name);

                        result=rsaencrypt.RSAEncrypt(name);
                        Toast.makeText(getBaseContext(), result.toString(),Toast.LENGTH_SHORT).show();

                        System.out.println("Result:"+result);
                    }
                    catch(Exception e)
                    {
                        e.printStackTrace();
                        Toast.makeText(getBaseContext(), e.toString(),Toast.LENGTH_LONG).show();
                    }
            }
        });

        decrypt.setOnClickListener(new OnClickListener()
        { 
            public void onClick(View arg0) 
            {
                {
                    try
                    {
                        RSAEncrypt rsadecrypt=new RSAEncrypt();

                        rsadecrypt.RSADecrypt(result);

                        ans=rsadecrypt.RSADecrypt(result);
                        System.out.println("Result is"+ans);
                        Toast.makeText(getBaseContext(), ans.toString(),Toast.LENGTH_LONG).show();
                    }
                    catch(Exception e)
                    {
                        e.printStackTrace();
                        Toast.makeText(getBaseContext(), e.toString(),Toast.LENGTH_LONG).show();
                        System.out.println("Exception is>>"+e);
                    }
            }
        }); 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-09-18T09:32:06.777

在 RSA 中，您应该使用公钥进行加密，使用私钥进行解密。

您的示例代码用于加密和解密公钥 - 这是行不通的。

因此，在解密部分，您应该以这种方式初始化密码：

```
cipher1.init(Cipher.DECRYPT_MODE, privateKey); 
```

此外，您的代码还有第二个重大错误：

您正在将具有二进制内容的字节数组转换为字符串。

**永远不要将二进制数据转换为字符串！**

字符串用于字符串字符，而不是二进制数据。如果您想将二进制数据打包成字符串，则将其编码为可打印字符，例如使用 Hex 或 Base64。

以下示例使用来自[org.apache.common.codec](http://commons.apache.org/codec/)包的十六进制编码器 - 必须安装第三方库。

```
public byte[] RSAEncrypt(final String plain) throws NoSuchAlgorithmException, NoSuchPaddingException,
        InvalidKeyException, IllegalBlockSizeException, BadPaddingException {
    kpg = KeyPairGenerator.getInstance("RSA");
    kpg.initialize(2048);
    kp = kpg.genKeyPair();
    publicKey = kp.getPublic();
    privateKey = kp.getPrivate();

    cipher = Cipher.getInstance("RSA");
    cipher.init(Cipher.ENCRYPT_MODE, publicKey);
    encryptedBytes = cipher.doFinal(plain.getBytes());
    System.out.println("EEncrypted?????" + new String(org.apache.commons.codec.binary.Hex.encodeHex(encryptedBytes)));
    return encryptedBytes;
}

public String RSADecrypt(final byte[] encryptedBytes) throws NoSuchAlgorithmException, NoSuchPaddingException,
        InvalidKeyException, IllegalBlockSizeException, BadPaddingException {

    cipher1 = Cipher.getInstance("RSA");
    cipher1.init(Cipher.DECRYPT_MODE, privateKey);
    decryptedBytes = cipher1.doFinal(encryptedBytes);
    decrypted = new String(decryptedBytes);
    System.out.println("DDecrypted?????" + decrypted);
    return decrypted;
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-05-21T20:19:00.557

我的课：

```
package com.infovale.cripto;

import java.io.UnsupportedEncodingException;
import java.math.BigInteger;
import java.security.InvalidKeyException;
import java.security.KeyPair;
import java.security.KeyPairGenerator;
import java.security.NoSuchAlgorithmException;
import java.security.PrivateKey;
import java.security.PublicKey;
import java.util.Arrays;

import javax.crypto.BadPaddingException;
import javax.crypto.Cipher;
import javax.crypto.IllegalBlockSizeException;
import javax.crypto.NoSuchPaddingException;

public class RSA {

KeyPairGenerator kpg;
KeyPair kp;
PublicKey publicKey;
PrivateKey privateKey;
byte[] encryptedBytes, decryptedBytes;
Cipher cipher, cipher1;
String encrypted, decrypted;

public String Encrypt (String plain) throws NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException, IllegalBlockSizeException, BadPaddingException 
{
    kpg = KeyPairGenerator.getInstance("RSA");
    kpg.initialize(1024);
    kp = kpg.genKeyPair();
    publicKey = kp.getPublic();
    privateKey = kp.getPrivate();

    cipher = Cipher.getInstance("RSA");
    cipher.init(Cipher.ENCRYPT_MODE, publicKey);
    encryptedBytes = cipher.doFinal(plain.getBytes());

    encrypted = bytesToString(encryptedBytes);
    return encrypted;

}

public String Decrypt (String result) throws NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException, IllegalBlockSizeException, BadPaddingException 
{           

    cipher1=Cipher.getInstance("RSA");
    cipher1.init(Cipher.DECRYPT_MODE, privateKey);
    decryptedBytes = cipher1.doFinal(stringToBytes(result));
    decrypted = new String(decryptedBytes);
    return decrypted;

}

public  String bytesToString(byte[] b) {
    byte[] b2 = new byte[b.length + 1];
    b2[0] = 1;
    System.arraycopy(b, 0, b2, 1, b.length);
    return new BigInteger(b2).toString(36);
}

public  byte[] stringToBytes(String s) {
    byte[] b2 = new BigInteger(s, 36).toByteArray();
    return Arrays.copyOfRange(b2, 1, b2.length);
}
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-12-05T15:47:26.080

以下是 Android 的示例：

*   生成私有/公共 RSA 密钥对
*   加密字符串
*   解密加密的字符串

这些方法处理所有 base 64 编码/解码。

```
 public void TestEncryptData(String dataToEncrypt) {
        // generate a new public/private key pair to test with (note. you should only do this once and keep them!)
        KeyPair kp = getKeyPair();

        PublicKey publicKey = kp.getPublic();
        byte[] publicKeyBytes = publicKey.getEncoded();
        String publicKeyBytesBase64 = new String(Base64.encode(publicKeyBytes, Base64.DEFAULT));

        PrivateKey privateKey = kp.getPrivate();
        byte[] privateKeyBytes = privateKey.getEncoded();
        String privateKeyBytesBase64 = new String(Base64.encode(privateKeyBytes, Base64.DEFAULT));

        // test encryption
        String encrypted = encryptRSAToString(dataToEncrypt, publicKeyBytesBase64);

        // test decryption
        String decrypted = decryptRSAToString(encrypted, privateKeyBytesBase64);
    }

    public static KeyPair getKeyPair() {
        KeyPair kp = null;
        try {
            KeyPairGenerator kpg = KeyPairGenerator.getInstance("RSA");
            kpg.initialize(2048);
            kp = kpg.generateKeyPair();
        } catch (Exception e) {
            e.printStackTrace();
        }

        return kp;
    }

    public static String encryptRSAToString(String clearText, String publicKey) {
        String encryptedBase64 = "";
        try {
            KeyFactory keyFac = KeyFactory.getInstance("RSA");
            KeySpec keySpec = new X509EncodedKeySpec(Base64.decode(publicKey.trim().getBytes(), Base64.DEFAULT));
            Key key = keyFac.generatePublic(keySpec);

            // get an RSA cipher object and print the provider
            final Cipher cipher = Cipher.getInstance("RSA/ECB/OAEPWITHSHA-256ANDMGF1PADDING");
            // encrypt the plain text using the public key
            cipher.init(Cipher.ENCRYPT_MODE, key);

            byte[] encryptedBytes = cipher.doFinal(clearText.getBytes("UTF-8"));
            encryptedBase64 = new String(Base64.encode(encryptedBytes, Base64.DEFAULT));
        } catch (Exception e) {
            e.printStackTrace();
        }

        return encryptedBase64.replaceAll("(\\r|\\n)", "");
    }

    public static String decryptRSAToString(String encryptedBase64, String privateKey) {

        String decryptedString = "";
        try {
            KeyFactory keyFac = KeyFactory.getInstance("RSA");
            KeySpec keySpec = new PKCS8EncodedKeySpec(Base64.decode(privateKey.trim().getBytes(), Base64.DEFAULT));
            Key key = keyFac.generatePrivate(keySpec);

            // get an RSA cipher object and print the provider
            final Cipher cipher = Cipher.getInstance("RSA/ECB/OAEPWITHSHA-256ANDMGF1PADDING");
            // encrypt the plain text using the public key
            cipher.init(Cipher.DECRYPT_MODE, key);

            byte[] encryptedBytes = Base64.decode(encryptedBase64, Base64.DEFAULT);
            byte[] decryptedBytes = cipher.doFinal(encryptedBytes);
            decryptedString = new String(decryptedBytes);
        } catch (Exception e) {
            e.printStackTrace();
        }

        return decryptedString;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T08:33:27.000

我认为问题在于您应该使用相同的密钥对来加密和解密密码。参考JavaDoc：

```
 genKeyPair() This will generate a new key pair every time it is called. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-04T14:49:04.543

使用RSAEcvypt方法时，填写PublicKey和private key。当您解密生成的字节 [] 时，您的 publicKey 和 privateKey 为 NULL。因此，您会收到此错误。

您应该使用静态密钥；

```
enter code here

KeyPairGenerator kpg;
KeyPair kp;
static PublicKey publicKey;
static PrivateKey privateKey;
byte [] encryptedBytes,decryptedBytes;
Cipher cipher,cipher1;
String encrypted,decrypted; 
```