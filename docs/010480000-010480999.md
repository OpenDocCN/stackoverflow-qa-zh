# StackOverflow 问答 10480000-10480999

# visual-studio - “选择您的数据连接对话框”中的连接字符串（实体数据模型向导）

> ID：10480005
> 
> 赞同：12
> 
> 时间：2012-05-07T09:52:08.880
> 
> 标签：visual-studio, entity-framework-4

我删除了一个旧的 edmx 文件，并尝试通过 Add > New Item> Visual C# Templates (data) - ADO.NET Entity Data Model 添加一个新文件。

![在此处输入图像描述](../Images/69b09b2ee0d15b57c25e5a9861aed39b.png)

在向导中，在“选择您的数据连接”窗口中，有一些预先存在的连接字符串。这些值是从哪里得到的？我在我的解决方案中搜索了连接字符串，但没有。

如何删除这些预先存在的连接字符串，以便它们下次不会出现？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-07T10:01:43.937

这些连接不会存储在您的解决方案中 - 它们与您的解决方案完全无关。它们存储在 Visual Studio 中的某个位置。如果您打开服务器资源管理器并展开数据连接节点，您将看到所有这些节点，并且您将能够删除那些您不想再使用的节点。

# svn - 如何在颠覆中获得运行历史差异日志？

> ID：10480006
> 
> 赞同：1
> 
> 时间：2012-05-07T09:52:13.513
> 
> 标签：svn, diff

是否可以获得对某个文件的所有更改的历史记录，包括更改**的**实际行？

像`svn log --with-diffs myfile.txt`往常一样输出提交消息+差异的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T09:56:17.143

升级到 subversion 1.7 然后使用 svn log --diff

[http://subversion.apache.org/docs/release-notes/1.7.html](http://subversion.apache.org/docs/release-notes/1.7.html)

# python - Mac QT统一工具栏中选中的工具栏按钮与标题栏边框之间的间隙需要减少为零

> ID：10480016
> 
> 赞同：1
> 
> 时间：2012-05-07T09:52:52.010
> 
> 标签：python, macos, qt, pyqt, toolbar

在mac中，用标题栏创建了一个统一的mac工具栏。还将工具按钮样式设置为 textundericon。但是在检查或按下工具栏按钮时，发现工具栏按钮和标题栏边框之间存在间隙。

希望有人有办法将差距缩小到零。

附上窗口截图

谢谢

![在此处输入图像描述](../Images/778bb913586053959447fc8d8f5aff4c.png)

即使在调整添加到工具栏的工具按钮的大小后，工具栏边框和工具按钮之间的空间也不会减少。有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T20:48:49.273

我从未使用 Qt 专门为 Mac 开发过，但我通常会调用`QWidget::setContentsMargins(int left, int top, int right, int bottom)`并将适当的参数设置为零。在这种情况下，您可以尝试调用`setContentsMargins(x,x,x,0)`QToolBar 并查看结果，其中 x 是您选择的值。IIRC，我认为 11 是 QWidget 的默认边距间距，但它可能会有所不同（从屏幕截图来看，确实看起来不同）`QToolBar`，您可以进行一些试验，看看您是否得到了您想要实现的外观。

我还使用类似的方法`QLayout`成功地调整了子类中的间距。

# file - TREC 格式是什么？

> ID：10480022
> 
> 赞同：11
> 
> 时间：2012-05-07T09:53:30.773
> 
> 标签：file, format, information-retrieval

我正在寻找**TREC 格式**的规范。我一直在谷歌搜索，但我没有找到任何线索。

有谁知道在哪里可以找到有关它的任何信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-02T10:31:31.490

AFAIK TREC 是 NIST 文本检索会议的缩写。为了让索引器知道文档边界在文件中的位置，每个文档必须具有开始文档和结束文档标记。这些标记类似于 HTML 或 XML 标记，实际上是 TREC 文档的格式。

TrecParser：此解析器可识别 TEXT、HL、HEAD、HEADLINE、TTL 和 LP 字段中的文本。

资料来源：[TREC 维基百科](http://en.wikipedia.org/wiki/Text_Retrieval_Conference)

资料来源：[狐猴指南](http://www.cs.cmu.edu/~lemur/LemurGuide.html#data)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-23T11:17:14.450

它也是 TechSmith Camtasia 的新录制文件格式。[https://feedback.techsmith.com/techsmith/topics/mac_upgrade-ri5ox](https://feedback.techsmith.com/techsmith/topics/mac_upgrade-ri5ox)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T09:04:54.173

发现：http: [//sourceforge.net/apps/trac/lemur/wiki/Indexer%20File%20Formats](http://sourceforge.net/apps/trac/lemur/wiki/Indexer%20File%20Formats)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-17T12:41:52.893

它也是 IBM Watson 用于知识摄取的文件格式

# mysql - MySQL 服务器性能

> ID：10480023
> 
> 赞同：1
> 
> 时间：2012-05-07T09:53:31.293
> 
> 标签：mysql, windows-server-2008-r2

我有几个关于在 Windows Server 2008 R2 下运行的 MySQL 服务器的问题。

1）如何检查允许的连接数？

2) 如何打开查询日志以查看执行查询的性能？

3) 据我了解 MySQL 是多线程的，增加允许的连接数会提高四核系统的性能吗？

4) 集群设置会提高性能吗？

5) 如何在集群中设置多台 MySQL 服务器的负载卸载？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:37:41.960

所以最后我移动了这个问题，我得到了一个很好的答案。

答案可以在[https://dba.stackexchange.com/questions/17511/mysql-server-performance/17540#17540查看](https://dba.stackexchange.com/questions/17511/mysql-server-performance/17540#17540)

谢谢

# c# - 从数据集中读取数据

> ID：10480024
> 
> 赞同：2
> 
> 时间：2012-05-07T09:53:31.573
> 
> 标签：c#

我有从 sql 查询填充的数据集，像这样

```
cmd_sql.CommandText = " SELECT BrDok " +
                      " FROM ordersstavke " +
                      " WHERE SifParFil = '" + rw_mat["sifskl_kor"] + "'";

MySqlDataAdapter sql_adapter = new MySqlDataAdapter(cmd_sql);
DataSet ds_dok = new DataSet("ordersstavke");
sql_adapter.Fill(ds_dok); 
```

现在我想从数据集中提取值以进行 sql 更新，就像这个

```
myQuery = "UPDATE ordersstavke " +
          "SET BrDok = '" + rw_mat["brdok"] + "', " +
          "SifParFil = '" + rw_mat["sifskl_kor"] + "', " +
          "WHERE BrDok = " + ds_dok.Tables["ordersstavke"].Rows[0]["BrDok"] + "'"; 
```

我试过这个`ds_dok.Tables["ordersstavke"].Rows[0]["BrDok"]`但我得到了一个错误，我正在考虑做这样的事情

```
string BrDok;
BrDok  = ds_dok.["BrDok"].ToString(); 
```

但是什么都没有，如何提取该 BrDok 或将其放入程序中？

谢谢前面！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:10:26.963

尝试这个

```
ds_dok.Tables[0].Rows[0]["BrDok"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T09:56:30.820

做了

```
 DataSet ds_dok = new DataSet("ordersstavke");
 sql_adapter.Fill(ds_dok,"BrDok"); 
```

然后使用

```
ds_dok.Tables["BrDok"].Rows[0]["BrDok"].ToString() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T10:33:29.530

只是对 sql 命令的一个小提示。您应该使用 sql-parameters 来防止 sql-injection。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T10:06:46.903

如果您为数据集类提供字符串参数，那么它将是数据集名称而不是数据表名称。并且数据库中没有您为数据集提供的名称的表，因此请在填充数据集时提供它。写一些像下面这样的东西。

```
DataSet ds_dok = new DataSet();
sql_adapter.Fill(ds_dok,"ordersstavke"); 
```

并且您可以在代码部分中编写所有剩余的代码。

你的第二个更新查询有一些语法错误，如下所示

```
myQuery = "UPDATE ordersstavke " +           "SET BrDok = '" + rw_mat["brdok"] + "', "
 +           "SifParFil = '" + rw_mat["sifskl_kor"] + "', " +           "WHERE BrDok 
 = '" + ds_dok.Tables["ordersstavke"].Rows[0]["BrDok"] + "'"; 
```

**您忘记在where**子句中添加一个逗号。

# c++ - 查询集成 Fortran 和 C++ 代码

> ID：10480028
> 
> 赞同：1
> 
> 时间：2012-05-07T09:53:55.453
> 
> 标签：c++, integration, fortran

我正在尝试将一些 C++ 代码集成到 Fortran 中。我对类型之间的等价有疑问，

Fortran **integer*1**是否等效于 C++ **bool**？¿ 如果不是，正确的 C++ 等效类型是什么？¿

非常感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T10:00:19.200

[从此链接](http://fortran.comsci.us/etymology/type/char.html)引用：

> INTEGER(1) 类型应该用于大型数组，当内存对于仅具有 -129 到 127 范围内的正、负和零整数值的变量非常宝贵时。

所以，我会说它的`C/C++`等价物是`signed char`. 相当于`bool`是 Fortran 的`logical`类型。

编辑：MSB 的回答比我的要好得多；你最好按照他的建议去做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T22:25:04.900

最好的办法是使用提供与 C 类型匹配的类型的 Fortran ISO_C_Binding。该方法与编译器和平台无关。我对 C++ 类型不太确定，但如果你确定它们的 C 等价物你应该很好。ISO_C_Binding 提供 Fortran 类型 C_BOOL 以匹配 C 类型 _Bool。该绑定提供了一长串等效类型。该列表出现在 gfortran 手册的“内在模块”一章中。另请参阅“混合语言编程”一章。虽然我引用了 gfortran 手册，但作为 Fortran 2003 语言标准的一部分，这些功能并不是该编译器所特有的。

PS 评论建议使用 int8_t。在 Fortran 端与 ISO C 绑定的匹配类型是 C_INT8_T。

# cuda - OpenCL：NVIDIA GPU 上的 clAmdFft（来自 AMD 的 OpenCL FFT 库）

> ID：10480029
> 
> 赞同：4
> 
> 时间：2012-05-07T09:54:02.023
> 
> 标签：cuda, opencl, fft, gpgpu, amd-processor

有没有人在 NVIDIA GPU 上运行 AMD (http://developer.amd.com/libraries/appmathlibs/pages/default.aspx) 的 OpenCL FFT 库？

我正在尝试将现有算法从 CUDA（具有最新的 CUFFT）移植到 OpenCL。新代码在 AMD GPU 上运行良好，但在我的 NVIDIA GPU 上却不行。NVIDIA GPU 被正确识别，但结果数组完全为零，没有抛出任何错误。顺便说一句，代码在 Intel Core i3 CPU 上也能正常运行。所以我的代码似乎很好。

AMD 和 NVIDIA 似乎拒绝支持这个话题。

有任何想法吗？

编辑：

我的环境是 Windows 7 Professional x64 操作系统，我正在使用带有内置 x86 编译器的 Visual Studio C++ Professional IDE。NVIDIA GPU 是 GeForce GTX 560 Ti（MSI N560GTX-Ti Twin Frozr II/OC 1GB）。运行良好的 CPU 是 Intel Core i3-2100 (2x3.1GHz)，然后是 Radeon HD 6850 (Sapphire Radeon HD 6850 1GB)。我尝试针对 AMD、NVIDIA 和 Intel 的最新 OpenCL 版本编译代码，结果相同，并且安装了最新的开发者驱动程序。

这是我非常基本的示例代码...

```
#include <stdio.h>  
#include <stdlib.h>  
#include <complex>  

#include <clAmdFft.h>  

#if defined (__APPLE__) || defined(MACOSX)  
    #include <OpenCL/opencl.h>  
#else  
    #include <CL/opencl.h>  
#endif  

// Typedef for complex field objects  
using namespace std;  
typedef std::complex<float> cl_compl_flt;   

int main(int argc, char* argv[])  
{  
          cl_uint width = 1024, height = 1024;                                                  // Field dimensions  
          cl_uint cl_platformsN = 0;                                                                                // Platform count  
          cl_platform_id *cl_platformIDs = NULL;                                                  // IDs of OpenCL platforms  
    cl_uint cl_deviceCount = 0;                                                                                // Device count  
    cl_device_id *cl_devices = NULL;                                                            // Device IDs  
          cl_int cl_err = 0;                                                                                                    // Buffer for error informations  
          cl_context cl_dev_context;                                                                                // Context  
          cl_command_queue cl_queue;                                                                                // Queue  
          clAmdFftSetupData fftSetupData;                                                                      // FFT setup data  
          clAmdFftPlanHandle fftPlan;                                                                                // FFT plan  
          clAmdFftDim fftDim = CLFFT_2D;                                                                      // FFT dimension  
          size_t fftSize[2];                                                                                                    // FFT size  
                    fftSize[0] = width;  
                    fftSize[1] = height;  
          cl_mem d_data;                                                                                                              // Device level data  
          cl_compl_flt* h_src;                                                                                          // Host level input data  
          cl_compl_flt* h_res;                                                                                          // Host level output data  

          // Allocate host memory  
          h_src = (cl_compl_flt*)malloc(width*height*sizeof(cl_compl_flt));  
          h_res = (cl_compl_flt*)malloc(width*height*sizeof(cl_compl_flt));  

          // Get source field  
          createPinholeField( h_src, width, height, 5 );  

          // Get FFT version  
          checkCL( clAmdFftInitSetupData(&fftSetupData) );  
          printf("Using clAmdFft %u.%u.%u\n",fftSetupData.major,fftSetupData.minor,fftSetupData.patch);  

          // Get available platforms  
          checkCL( clGetPlatformIDs ( 0, NULL, &cl_platformsN));  
          cl_platformIDs = (cl_platform_id*) malloc( cl_platformsN * sizeof(cl_platform_id));  
          checkCL( clGetPlatformIDs( cl_platformsN, cl_platformIDs, NULL) );  

          // Loop over platforms  
          for( cl_uint i = 0; i < cl_platformsN; i++)  
          {  
                    // Get number of available devices for this platform  
                    checkCL( clGetDeviceIDs( cl_platformIDs[i], CL_DEVICE_TYPE_ALL, NULL, NULL, &cl_deviceCount));  

                    // Skip platform if no device available  
                    if(cl_deviceCount < 1)  
                              continue;  

                    // Get available device IDs for this platform  
                    cl_devices = (cl_device_id*) malloc( cl_deviceCount * sizeof(cl_device_id));   
                    checkCL( clGetDeviceIDs( cl_platformIDs[i], CL_DEVICE_TYPE_ALL, cl_deviceCount, cl_devices, NULL));  

                    // Print platform name  
                    char platform_name[1024];  
                    checkCL( clGetPlatformInfo( cl_platformIDs[i], CL_PLATFORM_NAME, 1024, &platform_name, NULL) );  
                    printf("\nCompute using OpenCl platfrom #%i [ %s ]\n", i,platform_name);  

                    // Loop over devices  
                    for( cl_uint j = 0; j < cl_deviceCount; j++)  
                    {  
                              // Print device name and type  
                              cl_device_type device_type;  
                              char device_name[1024];  
                              checkCL( clGetDeviceInfo( cl_devices[j], CL_DEVICE_NAME, 1024, &device_name, NULL) );  
                              checkCL( clGetDeviceInfo( cl_devices[j],CL_DEVICE_TYPE, sizeof(cl_device_type), &device_type, NULL) );  
                              printf("\n\tUsing OpenCl device #%i [ %s -- %s ]\n", j, device_name, getDevTypeString(device_type));  

                              // Create OpenCL context  
                              cl_context_properties cps[3] =   
                              {  
                                        CL_CONTEXT_PLATFORM,   
                                        (cl_context_properties)cl_platformIDs[i],   
                                        0  
                              };  
                              cl_dev_context = clCreateContext( cps, cl_deviceCount, cl_devices, NULL, NULL, &cl_err);  
                              checkCL( cl_err);  

                              // Create command queue  
                              cl_queue = clCreateCommandQueue( cl_dev_context, cl_devices[j], CL_QUEUE_PROFILING_ENABLE, &cl_err);  
                              checkCL( cl_err);  

                              // Create device buffer  
                              d_data = clCreateBuffer( cl_dev_context, CL_MEM_READ_WRITE, width*height*sizeof(cl_compl_flt), NULL, &cl_err);  
                              checkCL( cl_err);  

                              // Setup FFT  
                              checkCL( clAmdFftSetup(&fftSetupData) );  

                              // Create FFT plan  
                              checkCL( clAmdFftCreateDefaultPlan( &fftPlan, cl_dev_context, fftDim, fftSize) );  

                              // Copy data from host to device  
                              clEnqueueWriteBuffer( cl_queue, d_data, CL_TRUE, 0, width*height*sizeof(cl_compl_flt), h_src, 0, NULL, NULL);  

                              // Execute FFT  
                              checkCL( clAmdFftEnqueueTransform( fftPlan, CLFFT_FORWARD, 1, &cl_queue, 0, NULL, NULL, &d_data, NULL, NULL) );  
                              clFinish( cl_queue);  

                              // Copy result from device to host  
                              checkCL( clEnqueueReadBuffer(cl_queue, d_data, CL_TRUE, 0, width*height*sizeof(cl_compl_flt), h_res, 0, NULL, NULL) );  
                              clFinish( cl_queue);  

                              // Save result  
                              char filename[512];  
                              sprintf( filename, "raw/result_%u_%u_in.raw",i,j);  
                              printf("\tSave result to \"%s\" ", filename);  
                              saveRawData( h_res, filename, width, height, true);  
                              printf("\n");  

                              // Free FFT plan  
                              checkCL( clAmdFftDestroyPlan( &fftPlan) );  

                              // Free FFT  
                              checkCL( clAmdFftTeardown() );  

                              // Free device memory  
                              checkCL( clReleaseMemObject(d_data) );  

                              // Release OpenCL context and queue  
                              checkCL( clReleaseCommandQueue( cl_queue ) );  
                              checkCL( clReleaseContext( cl_dev_context) );  
                    }   
                    // Free OpenCL devices  
                    free( cl_devices);  
          }  

          free( h_src);  
          free( h_res);  

          printf("\n\nPress any key ...");  
          getchar();  
          return 0;  
} 
```

以及其他使用的功能...

```
// Generate a pinhole  
void createPinholeField( cl_compl_flt* data, cl_uint width, cl_uint height, cl_uint radius)  
{  
          if(data==NULL)  
                    data = (cl_compl_flt*)malloc(width*height*sizeof(cl_compl_flt));  

          if(radius < 1)  
                    radius = (width>height)?height/2:width/2;  

          cl_float min_val = 0.0f;  
          cl_float max_val = 255.0f;  

          for(cl_uint y = 0; y < height; y++)  
        for(cl_uint x = 0; x < width; x++)  
                    {  
                              if ( ceil( sqrt( pow(x-width/2., 2.) + pow(y-height/2., 2.) )) <= radius )  
                              {  
                                        data[x+y*width].real(max_val);  
                                        data[x+y*width].imag(0.f);  
                              }  
                              else  
                              {  
                                        data[x+y*width].real(min_val);  
                                        data[x+y*width].imag(0.f);  
                              }  
                    }  
}  

// Save a cl_compl_flt array as an unsigned char raw image file  
void saveRawData( cl_compl_flt* char_array, const char* filepath, cl_uint width, cl_uint height, bool print_minmax )  
{  
          cl_float* abs_v = (cl_float*) malloc(width*height*sizeof(cl_float));   

          for( cl_uint i = 0; i < width*height; i++)  
                    abs_v[i] = abs(char_array[i]);  

          cl_float min = abs_v[0];  
          cl_float max = abs_v[0];  

          for( cl_uint i = 1; i < width*height; i++)  
          {  
                    if( abs_v[i] < min)  
                              min = abs_v[i];  
                    if( abs_v[i] > max)  
                              max = abs_v[i];  
          }  

          if( print_minmax)   
                    printf(" [min=%f , max=%f] ",min,max);  

          max *= .01f;  

          cl_uchar* temp = (cl_uchar*) malloc(width*height*sizeof(cl_uchar));  

          for( cl_uint i = 0; i < width*height; i++)  
                    temp[i] = 255*(cl_uchar)(( (cl_float)abs_v[i] - min) / ( max-min ));  

          FILE *pFile = NULL;  
          pFile=fopen(filepath,"wb");  
          fwrite(temp,1,width*height,pFile);  
          fclose(pFile);  
          free(abs_v);  
          free(temp);  
}  

// Check functions that return OpenCL error IDs.  
bool checkCL( cl_int oclErrorCode)  
{  
          if( oclErrorCode == CL_SUCCESS)  
                    return true;  
          else  
          {  
                    printf("\n\nAn OpenCL related error occured!\nError ID #%d\nPress ENTER to exit the program...\n\n", oclErrorCode);  
                    getchar();  
                    exit( oclErrorCode);  
                    return false;  
          }  
}  

// Get device type as string  
char* getDevTypeString(cl_device_type type)  
{  
          switch(type)  
          {  
          case CL_DEVICE_TYPE_CPU:  
                    return "CPU";  
                    break;  
          case CL_DEVICE_TYPE_GPU:  
                    return "GPU";  
                    break;  
          case CL_DEVICE_TYPE_ACCELERATOR:  
                    return "ACCELERATOR";  
                    break;  
          default:  
                    return "DEFAULT";  
                    break;  
          }  
} 
```

我希望这有助于缩小问题的范围。

PS：图片可以在这里看到：http: [//devgurus.amd.com/thread/159149](http://devgurus.amd.com/thread/159149)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T02:25:20.913

为了将这个问题从未回答的列表中移出......

根据[Nvidia 和 AMD 硬件上的 OpenCL FFT？](https://stackoverflow.com/questions/11304268/opencl-fft-on-both-nvidia-and-amd-hardware), AMD OpenCL FFT 应该可以在 NVidia 硬件上运行。但是，NVIDIA 不正式支持这个库，我怀疑 AMD 也不支持，所以你没有得到正确的结果我并不感到惊讶。

正如评论中提到的，[ArrayFire](http://www.accelereyes.com/arrayfire/opencl/c/)可能是一个很好的跨平台解决方案。有一个单 GPU 非商业用途的免费版本，因此您可以对其进行评估。

# java - 如何在 apache POI XSSF 中获取空白单元格值

> ID：10480030
> 
> 赞同：0
> 
> 时间：2012-05-07T09:54:05.253
> 
> 标签：java, apache-poi

我对 Apache POI XSSF 有疑问，因为它没有读取空白单元格值。

我有一个实现 DefaultHandler 的类。在该类中，所有非空白单元格都能够从 startElement 和 endElement 方法中读取。

我想读取数据单元格中间的空白单元格。

任何人都可以提供如何执行此操作的示例或有关如何调试的说明吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:29:04.877

今天遇到了同样的问题。我使用的是 XSSF 事件模型。但是 XSSF 不会为空白列提供列元素或值元素。很可能是因为支持 XML 就是这种方式。

关键是检查单元格引用的属性（您知道 Excel 使用的 A1、A2、A3）。属性被传递给`startElement()`回调方法。然后我们可以检测丢失的单元格引用。因此，如果我们为前一列元素获取 L1 并为当前列元素获取 N1，我们知道 M1 是空白/缺失单元格。

```
public void startElement(String uri, String localName, String qName,        Attributes atts) throws SAXException {
if (qName.equals("c")) {
    String newColRef = atts.getValue("r");
    coverColumnDistanceWithNulls(currentColRef, newColRef); 
```

并且`coverColumnDistanceWithNulls()`只需为 currentColRef 和 newColRef 之间的每个缺失单元格引用添加空值

```
private void coverColumnDistanceWithNulls(String fromColRefString, String toColRefString) {
    int colRefDistance = getDistance(fromColRefString, toColRefString);
    while (colRefDistance > 1) {
        logger.debug("Covering distance with null");
        rowValues.add(null);
        --colRefDistance;
    }
}

private int getDistance(String fromColRefString, String toColRefString) {
    String fromColRef = getExcelCellRef(fromColRefString);
    String toColRef = getExcelCellRef(toColRefString);
    logger.debug("fromCol: {} toCol: {}", new Object[] {fromColRefString, toColRefString});
    return excelCellReferenceOrder.get(toColRef) - excelCellReferenceOrder.get(fromColRef);
}

private String getExcelCellRef(String fromColRef) {
    if (fromColRef != null) {
        int i = 0;
        for (;i &lt; fromColRef.length(); i++) {
            if (Character.isDigit(fromColRef.charAt(i))) {
                break;
            }
        }
        if (i == 0) {
            return fromColRef;
        }
        else {
            return fromColRef.substring(0, i);
        }
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-30T19:40:49.403

以 Sab Than 的回答为基础：

```
private void coverColumnDistance(String fromColRefString, String toColRefString) {
    int colRefDistance = getDistance(fromColRefString, toColRefString);
    while (colRefDistance > 0) {
        c = getRow().addCell("");
        colRefDistance--;
    }
}

private int getDistance(String fromColRefString, String toColRefString) {
    String fromColRef = getExcelCellRef(fromColRefString);
    String toColRef = getExcelCellRef(toColRefString);
    int distance = 0;
    if (fromColRef == null || fromColRef.compareTo(toColRef) > 0)
        return getDistance("A", toColRefString) + 1;
    if (fromColRef != null && toColRef != null) {
        while (fromColRef.length() < toColRef.length() || fromColRef.compareTo(toColRef) < 0) {
            distance++;
            fromColRef = increment(fromColRef);
        }
    }
    return distance;
}

public String increment(String s) {
    int length = s.length();
    char c = s.charAt(length - 1);

    if(c == 'Z') {
        return length > 1 ? increment(s.substring(0, length - 1)) + 'A' : "AA";
    }

    return s.substring(0, length - 1) + ++c;
}

private String getExcelCellRef(String fromColRef) {
    if (fromColRef != null) {
        int i = 0;
        for (; i < fromColRef.length(); i++) {
            if (Character.isDigit(fromColRef.charAt(i))) {
                break;
            }
        }
        if (i == 0) {
            return fromColRef;
        }
        else {
            return fromColRef.substring(0, i);
        }
    }
    return null;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T18:14:55.353

如果我没记错的话，如果您尝试读取尚未分配值的单元格值，您会得到 NullPointerException 或类似的。您可以在 try-catch 语句中包围检查单元格的代码，然后编写自己的代码来处理这种情况。

如果我的记忆不能正确地为我服务并且抛出的错误不是 NullPointerException，那么将 catch 异常类更改为相关的类。

# ajax - Drupal 表单验证：检测到非法选择

> ID：10480031
> 
> 赞同：3
> 
> 时间：2012-05-07T09:54:08.950
> 
> 标签：ajax, forms, drupal, drupal-6

我在验证 Drupal 6 表单时遇到问题。

我有 2 个下拉菜单。第二个下拉列表（项目）的选项取决于第一个下拉列表（客户端）的选定选项。更改客户端时，我从该客户端获取所有项目。

现在，当验证表单时，选择另一个客户端作为 default_value，项目的选项与表单构建中的选项不同。这意味着，项目的选定选项不在为表单构建的选项数组中。

有什么方法可以更改选项数组以进行表单验证？验证中项目的选项数组是根据客户的选择构建的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T10:42:08.217

这里要实现的主要事情是，您的表单构建函数不仅在初始表单构建时调用一次，而且在表单提交时，*在验证发生之前*再次调用。因此，您可以调整表单构建功能，`$options`为项目选择字段构建不同的数组，具体取决于所选客户端（如果选择了任何客户端）。

你可以通过检查来做到这一点`$form_state['values']`，有点像这样：

```
function your_form(&$form_state) {
  // ... other form building stuff
  // Start with initial default options for project select
  $project_options = array('- Please select client first -');
  // Adjust, if client already selected
  if (isset($form_state['values']) && $form_state['values']['your_client_select']) {
    $selected_client = $form_state['values']['your_client_select'];
    $project_options = your_function_to_build_project_options_by_client($selected_client);
  }
  // ... build project select using those options
  // ... other form building stuff
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:30:27.343

您无需任何编码即可完成此操作。有一个名为[Conditional fields](http://drupal.org/project/conditional_fields)的模块。此模块将允许您为表单设置规则。根据某些字段的某些值隐藏某些元素。

# javascript - Python 中没有在 Bottle 上提供静态文件

> ID：10480037
> 
> 赞同：9
> 
> 时间：2012-05-07T09:54:31.437
> 
> 标签：javascript, python, css, bottle

我正在尝试设置一个应用程序，它采用模板 HTML 文件并对其进行实时修改。它在一定程度上可以正常工作，但是页面上的图像和 CSS 没有被提供，并且在请求它们时控制台上会出现 HTTP 500 错误。

这是我的目录结构

```
Server/
    assets/
        css/
            img/
            jquery.css
            kickstart.css
            zellner.css
        js/
            jquery.min.js
            kickstart.js
        style.css
        tb_404.png
        tbrun1.png
        tbservers.png
    403.html
    404.html
    500.html
    appid
    index.html
    maintenance.html
    server.log
    server.py 
```

这就是我在 server.py 中设置路由的方式：

```
@error(403)
def error403(error):
    return static_file("403.html")

@error(404)
def error404(error):
    return static_file("404.html")

@error(500)
def error500(error):
    return static_file("500.html")

@route('assets/<filepath:path>')
def server_static(filepath):
    return static_file(filepath, root='assets') 
```

在我的 html 文件中，文件的链接如下：

```
<script type="text/javascript" src="assets/js/jquery.snippet.min.js"></script> 
```

可能是因为静态资源位于 assets/ 的子​​目录中吗？还是我完全误解了如何使用 static_file？

这是我在 Python 控制台上遇到的错误类型：

```
[07/May/2012 10:51:05] "GET /tempus/23 HTTP/1.1" 200 4501 <h1>Critical error while processing request: /tempus/assets/js/jquery.snippet.min.js</h1> 
```

我不明白为什么它会路由到 /tempus/assets/ ...

有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-07T10:12:22.467

我在提供静态文件时也遇到了问题。这是我的解决方案：

```
@route('/static/:filename#.*#')
def send_static(filename):
    return static_file(filename, root='./static/') 
```

当您想访问静态文件时，例如。一个模板文件：

```
@route('/')
def index():
    output = template('static/index.tpl')
    return output 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T13:32:15.850

您必须将文件的完整路径放在 root= 中，这取决于程序运行的位置。看看这个：[http ://bottlepy.org/docs/dev/tutorial.html?highlight=static_file#tutorial-static-files](http://bottlepy.org/docs/dev/tutorial.html?highlight=static_file#tutorial-static-files)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T22:53:08.300

您的 @route 装饰器对于 serve_static 不正确。

它应该是 @route('/assets/')

# c - 将枚举与C中的字符串相关联

> ID：10480039
> 
> 赞同：5
> 
> 时间：2012-05-07T09:54:39.793
> 
> 标签：c, string, enums

我看过这个链接

[如何在c中将枚举名称转换为字符串](https://stackoverflow.com/questions/9907160/how-to-convert-enum-names-to-string-in-c)

我在客户端提供的库头文件中以以下方式定义了一系列`enums`（我无法更改）：

枚举也是稀疏的。

```
typedef enum
{
    ERROR_NONE=59,   
    ERROR_A=65,  
    ERROR_B=67
} 
```

我想在我的函数中打印这些值，例如我想打印`ERROR_NONE`而不是`59`. 有没有更好的方法来使用`switch` `case`或`if else`构造来完成这项工作？例子

```
 int Status=0;
   /* some processing in library where Status changes to 59 */
   printf("Status = %d\n",Status); /* want to print ERROR_NONE instead of 59 */ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T10:30:21.353

字符串化运算符的直接应用可能会有所帮助

```
#define stringize(x) #x

printf("%s\n", stringize(ERROR_NONE)); 
```

您已经提到您无法更改库文件。如果您另有决定:)，您可以`X`按如下方式使用宏

```
enumstring.c
#include <stdio.h>

#define NAMES C(RED)C(GREEN)C(BLUE)

#define C(x) x,

enum color { NAMES TOP };

#undef C

#define C(x) #x,

const char * const color_name[] = { NAMES };

int main( void ) 
{ printf( "The color is %s.\n", color_name[ RED ]);  
  printf( "There are %d colors.\n", TOP ); }

stdout
The color is RED. 
There are 3 colors. 
```

[在这里](http://userpage.fu-berlin.de/~ram/pub/pub_jf47ht81Ht/c_preprocessor_applications_en)阅读更多

**编辑**：对于您向我们展示的具体示例，恐怕`switch-case`是您可以获得的最接近的示例，尤其是当您有 sparse 时`enums`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T10:26:10.010

[常见问题解答 11.17](http://c-faq.com/ansi/stringize.html)。使用`xstr()`宏。您可能应该使用它：

```
 #define str(x) #x
 #define xstr(x) str(x)

 printf("%s\n", xstr(ERROR_A)); 
```

# html - 通过 CSS 的元素边框不起作用

> ID：10480040
> 
> 赞同：4
> 
> 时间：2012-05-07T09:54:43.770
> 
> 标签：html, css

我过去只将边框应用于特定列，它对我来说根本不起作用..

其他属性就像背景颜色一样工作..

**浏览器是否不支持表格上的列级边框？**

这是我的代码

```
<style type="text/css">
.check_border {
     border-right: 1px solid black;
     background-color: #0000ff;
}
 </style>

<table cellspacing='0'>
<colgroup>
<col/>
<col class="check_border"/>
<col class="check_border"/>
<col class="check_border"/>
<col/>
</colgroup>

<tr>
<td>Country</td>
<td>Salmon</td>
<td>Shrimps</td>
<td>Oysters</td>
<td>Rice</td>
<td>Wheat</td>
</tr>
<tr>
<td>United Kingdom</td>
<td>2050</td>
<td>1545</td>
<td>1156</td>
<td>5007</td>
<td>12254</td>
</tr>
<tr>
<td>United States</td>
<td>1358</td>
<td>1884</td>
<td>784</td>
<td>10597</td>
<td>24554</td>
</tr>
<tr>
<td>Australia</td>
<td>985</td>
<td>65</td>
<td>518</td>
<td>2548</td>
<td>10548</td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T11:24:40.690

PPK 有一篇关于这一切的好文章。总结就是，a的样式`col`在浏览器支持上有些多变，在应用中也很麻烦。

[http://www.quirksmode.org/css/columns.html](http://www.quirksmode.org/css/columns.html)

# jmeter - 如何解决启动 Jmeter 时出现“无法访问 jarfile ApacheJMeter.jar errorlevel=1”的错误？

> ID：10480042
> 
> 赞同：46
> 
> 时间：2012-05-07T09:54:52.390
> 
> 标签：jmeter

下载 Jmeter 并执行批处理文件（Jmeter\apache-jmeter-2.6\bin\jmeter.bat）。
我们在控制台中收到错误消息：

```
Unable to access jarfile ApacheJMeter.jar errorlevel=1 
```

请帮助我解决问题。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-05-18T09:22:17.627

[尝试从http://www.apache.org/dist/jmeter/binaries/](http://www.apache.org/dist/jmeter/binaries/)下载 apache-jmeter-2.6.zip

这包含启动所需的正确 ApacheJMeter.jar。

转到命令提示符下的 bin 文件夹并尝试 java -jar ApacheJMeter.jar 如果下载正确，这应该会打开 GUI。

**2018 年 8 月 23 日编辑：**

*   **当前现代 JMeter 版本的正确答案是** [https://stackoverflow.com/a/51973791/460802](https://stackoverflow.com/a/51973791/460802)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2019-05-22T17:29:08.213

我今天收到了这个错误，因为“ [Source](https://jmeter.apache.org/download_jmeter.cgi#source) ”缺少 ApacheJmeter.jar。[我从“二进制文件](https://jmeter.apache.org/download_jmeter.cgi#binaries)”再次下载了它，一切都按预期工作。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-08-22T19:23:34.350

JMeter 应该使用以下命令启动：

*   jmeter/bin/jmeter.sh for Linux
*   用于 Windows 的 jmeter/bin/jmeter.bat

这将确保读取正确的属性文件并加载 lib 中必要的 jar。

任何其他方法都会给您带来很多麻烦。

投票最多的答案是错误的！

请参阅参考文档中的 1.4 运行 JMeter：

*   [https://jmeter.apache.org/usermanual/get-started.html](https://jmeter.apache.org/usermanual/get-started.html)

如果您想了解更多关于 JMeter 和性能测试的信息，[本书](https://leanpub.com/master-jmeter-from-load-test-to-devops)可以为您提供帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-25T19:40:59.217

我正在运行 JMeter 2.8 (Windows 7) 并收到类似于原始帖子中的消息：

```
C:\>jmeter
Error: Unable to access jarfile C:\local\software\jMeter\apache-jmeter-2.8\binApacheJMeter.jar
errorlevel=1
Press any key to continue . . . 
```

我创建了一个 Windows 环境变量 JMETER_BIN 并将其设置为我可以看到包含 ApacheJMeter.jar 的 JMeter 路径（所以这不是 jar 丢失的问题）。

我当时应该注意到这部分错误：“binApacheJMeter.jar”

当我去 jmeter.bat 文件进行故障排除时，我注意到了这一行：

```
%JM_START% %JM_LAUNCH% %ARGS% %JVM_ARGS% -jar "%JMETER_BIN%ApacheJMeter.jar" %JMETER_CMD_LINE_ARGS% 
```

这导致我重新访问错误的“binApacheJMeter.jar”部分。

发生的事情是批处理文件需要在 JMETER_BIN 环境变量中路径末尾的斜杠以正确指定 .jar 的位置。

一旦我更正了我的环境变量，添加了斜杠，一切都很棒。

YMMV，但这对我有用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-05-03T09:29:49.817

我下载的时候遇到了同样的错误，下载`Jmeter Source`后就解决了`Jmeter Binary`。请观看[此视频](https://www.youtube.com/watch?v=hLpEjw_HJe4)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-06-12T13:51:12.867

如果您使用的是 linux 并在创建链接时遇到此类问题，请尝试更改原始 jmeter 文件的 jar 文件路径。

```
+ java -server -XX:+HeapDumpOnOutOfMemoryError -Xms512m -Xmx512m -XX:NewSize=128m -XX:MaxNewSize=128m -XX:MaxTenuringThreshold=2 -XX:PermSize=64m -XX:MaxPermSize=128m -XX:+CMSClassUnloadingEnabled -jar ./ApacheJMeter.jar -help 
```

改成：

```
java $ARGS $JVM_ARGS -jar "/opt/apache-jmeter-2.11/bin/ApacheJMeter.jar" "$@" 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-04-16T19:30:21.410

导航到位于二进制文件下的 URL [http://jmeter.apache.org/download_jmeter.cgi-->download](http://jmeter.apache.org/download_jmeter.cgi--) apache-jmeter-2.11.zip。

发生此错误是因为 bin 文件夹中缺少 Apache jmeter.jar

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-08-13T05:37:29.207

尝试使用现在更新的[JMeter 版本](http://jmeter.apache.org/download_jmeter.cgi)`JMeter 3.0`。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-01-31T09:02:50.897

如果您要完成以下步骤：

1.  在终端类型`brew install jmeter`中并按 Enter
2.  完成后键入`jmeter`并再次按 Enter

您不必解决任何类型的问题。不要感谢

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-11-14T12:11:56.547

由于 jmeter 和 java 的版本不匹配，也可能发生此错误。由于 jmeter 版本支持不同的 java 版本，如下所示。

[![jmeter 版本支持的 java 版本的图像](../Images/5c85df2e1c4411c2b76df57738aa649d.png)](https://i.stack.imgur.com/Ju1cQ.png)

相应地下载 zip，您就可以开始了。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-05-15T07:20:05.140

对于仍然遇到问题的人。

我面临同样的问题，似乎缺少一些 .jar 文件。

因此，请在控制台中尝试`tar -xf apache-jmeter-5.2.1.tgz`，而不仅仅是右键单击解压缩。此外，如果源包仍有问题，请尝试二进制包。这解决了我的问题（我正在使用 ubuntu）

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-09-16T09:10:31.097

当我们下载 apache-jmeter-xxtgz 的二进制文件时，其中 x 可以是任何版本的 apache Jmeter。**ApacheJMeter.jar**必须存在于 apache-jmeter-x/bin 文件夹中，如果它不存在于您的包未正确下载的某个地方。原因可能是网速慢或关机不当

再次下载包并确保 **ApacheJMeter.jar**存在于 apache-jmeter-x/bin 文件夹中。一旦它出现，点击 sh jemeter.sh

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-06-23T10:20:54.860

对于窗口，如果你下载 scr 文件夹说 apache-jmeter-5.3_src 那么你不会在 bin 文件夹中找到 ApacheJMeter.jar 文件。可能已经在源代码部分下载了 zip 文件。在二进制部分下形成此链接下载 zip 文件，然后单击 bin 文件夹中的 ApacheJMeter.jar [https://jmeter.apache.org/download_jmeter.cgi](https://jmeter.apache.org/download_jmeter.cgi)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-02-02T05:47:48.420

1.  转到链接[https://downloads.apache.org/jmeter/binaries/](https://downloads.apache.org/jmeter/binaries/)
2.  下载文件（我下载了**apache-jmeter-5.2.1.tgz** 文件）

而已。顺便说一句，它适用于 Windows 系统。如果在其他类似 ubuntu 或 mac 上也发生同样的情况，请告诉我...

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-06-21T07:20:54.650

我已将 apache jmeter 文件夹移动到 c:，使用管理员授权打开 cmd 并执行 jmater.bat。

这为我解决了这个问题。

# cassandra - Cassandra中的双范围查询

> ID：10480044
> 
> 赞同：3
> 
> 时间：2012-05-07T09:54:56.827
> 
> 标签：cassandra, cql

我想执行一个双范围查询以获取一个点附近的纬度和经度点，

在 Cassandra 现在似乎有可能，我刚刚尝试过

```
create column family users
 with comparator=UTF8Type
 AND key_validation_class=UTF8Type
 and column_metadata=[{column_name: full_name, validation_class: UTF8Type},
 {column_name: type, validation_class: UTF8Type, index_type: KEYS},
 {column_name: lat, validation_class: LongType, index_type: KEYS},
 {column_name: lon, validation_class:  LongType, index_type: KEYS}];

SET users['a']['type']='test';                                             
SET users['b']['type']='test';
SET users['c']['type']='test';
SET users['a']['lat']='12';                                                
SET users['b']['lat']='9'; 
SET users['c']['lat']='12';
SET users['b']['lon']='1'; 
SET users['a']['lon']='4';
SET users['c']['lon']='2';
get users where type = 'test' and lon < '6' and lon > '3' and lat > '10' and lat < '13'; 
```

RowKey: a => (column=lat, value=12, timestamp=1336339056413000) => (column=lon, value=4, timestamp=1336339088170000) => (column=type, value=test, timestamp=1336339033765000)

返回 1 行。

但是我很担心添加数千点时的性能，如果这 3 列被索引。

1）我必须使用索引的“类型”列，因为没有它，查询会失败

```
No indexed columns present in index clause with operator EQ 
```

有可能绕过它吗？

2）自然地按纬度或经度对所有数据进行排序可能会很有趣，然后只查询另一个，

所以只需对 x 和 y 之间的 lat 做一个 SliceQuery，然后是一个查询

```
get users where type = 'test' and lon < '6' and lon > '3'; 
```

要不是按行名而是按另一个字段（例如：字符串 lat+lon 和 UTF8 比较器）对 CF 进行排序，该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:57:42.523

您的解决方案可能适用于较小的数据集。一旦它增长，您需要一些空间索引来执行快速查找。Cassandra 目前不支持空间索引。我建议你看看**GeoCell / GeoHash**

您为每个点坐标创建哈希，然后您可以对字符串执行范围查询。在这种情况下，Cassandra 范围查询将是一个不错的选择。

> **GeoHash**是一种分层的空间数据结构，它将空间细分为网格形状的桶。

**链接：**

*   [地理散列](/questions/tagged/geohashing "显示标记为“geohashing”的问题")
*   维基百科：[http ://en.wikipedia.org/wiki/Geohash](http://en.wikipedia.org/wiki/Geohash)
*   Java 实现[http://code.google.com/p/javageomodel/](http://code.google.com/p/javageomodel/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T11:22:15.217

是的，就像 vladaman 说的那样，Cassandra geocells 是（唯一的？）好方法，在[Python](http://code.google.com/p/geomodel/source/browse/trunk/geo/geocell.py)或[Java中](http://code.google.com/p/javageomodel/source/browse/trunk/geocell/src/test/java/com/beoui/utils/HowToUseGeocell.java)

# java - 如何从我的程序中的 Java 文件创建 Java 类文件？

> ID：10480046
> 
> 赞同：4
> 
> 时间：2012-05-07T09:55:02.913
> 
> 标签：java

假设有一个 Java 文件存在于外部文件夹中。我可以编写一个 Java 程序来生成该 Java 文件的 .class 文件并将 .class 文件放在同一个外部文件夹中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T09:58:29.147

（对我而言）最简单的方法是包含`tools.jar`并调用`com.sun.tools.javac.Main.compile(`) 函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T10:00:17.653

是的，你可以用java编译器来做

```
JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
StandardJavaFileManager fileManager = compiler.getStandardFileManager(null,null,null); 
```

[检查此以获取更多详细信息](http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T10:08:49.427

它在这里：[`java.lang.Compiler`](http://docs.oracle.com/javase/6/docs/api/java/lang/Compiler.html)。这个类有方法`compileClass(Class class)`和`compileClasses(String names)`

# android - 如何制作侧边栏菜单

> ID：10480049
> 
> 赞同：8
> 
> 时间：2012-05-07T09:55:10.170
> 
> 标签：android, android-layout, android-widget

我正在寻找一种方法来开发可以通过在当前屏幕左侧滑动来显示的菜单。一个例子是移动版的火狐，当你向左滑动时，你可以进入当前的标签页导航，但主页面仍然可见。我认为它被称为侧边栏：

[例子](http://blog.higosoft.com/wp-content/uploads/auto_save_image/2012/01/093122XSx.png)

一种可能的方法是使用 ViewFlipper，我猜，但也许有更简单和更有效的可能性？而且恐怕处理水平和垂直滚动可能有点困难......

感谢您的任何答案，

马克西特。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T10:49:26.797

也许这会给你一个想法

[https://github.com/korovyansk/android-fb-like-slideout-navigation](https://github.com/korovyansk/android-fb-like-slideout-navigation)

[https://github.com/walkingice/gui-sliding-sidebar](https://github.com/walkingice/gui-sliding-sidebar)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-13T12:39:59.293

你可以试试[SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)。lib中有例子。

# .htaccess - .htaccess 到 nginx 重写规则，不包括某些文件夹

> ID：10480052
> 
> 赞同：2
> 
> 时间：2012-05-07T09:55:27.600
> 
> 标签：.htaccess, nginx, rewrite

所以我试图将应用程序从 apache 移动到 NginX，但我发现我需要重新编写 .htaccess 文件，我已经环顾四周，但最后我需要寻求帮助。

下面是来自 apache 的 .htaccess 文件，我试图将所有请求重定向到 index.php，但对 /html、/css、/images、/php 的请求除外。

提前感谢您的帮助！账单

```
RewriteEngine on 
RewriteRule ^html [L,NC]
RewriteRule ^css [L,NC]
RewriteRule ^images [L,NC]
RewriteRule ^php [L,NC]
RewriteRule ^.*$ index.php [L,QSA]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !directory/(.*)$
RewriteCond %{REQUEST_URI} !(.*)$
RewriteRule ^(.*)$ http://www.domain.com/$1 [R=301,L] 
```

到目前为止，我有以下内容，对 html、css、图像和 php 文件的请求运行良好。

但是，当我向 www.domain.com/blah/blah/blah/ 发出请求时，我得到了 404，我真正想要的是将 URL 重新命名为 www.domain.com/blah/blah/blah/ 但加载index.php 文件

```
location ~ directory/(.*)$ {
}

location ~ (.*)$ {
}

location /html {
rewrite ^/html / break;
}

location /css {
rewrite ^/css / break;
}

location /images {
rewrite ^/images / break;
}

location /php {
rewrite ^/php / break;
}

location / {
rewrite ^(.*)$ /index.php break;
if (!-e $request_filename){
rewrite ^(.*)$ http://www.domain.com/$1 redirect;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T11:01:31.853

尝试按照以下方式过滤对特定文件夹中内容的请求：

```
RewriteEngine On
# if not requesting content in one of the specified folders
RewriteCond %{REQUEST_FILENAME} !^(html|css|images|php)/ [NC]
# redirect visitor to the index page
RewriteRule ^(.*)$ index.php [L,QSA] 
```

重写条件前的感叹号 (!) 表示否定，因此如果请求的文件名不以 html 或 css 或 .... 开头，则应用重写规则。

# sql - 由于驱动程序导致与 Oracle 的 VBSCRIPT 连接失败

> ID：10480054
> 
> 赞同：4
> 
> 时间：2012-05-07T09:55:42.030
> 
> 标签：sql, oracle, vbscript

我正在使用连接到 SQL 的 vbscript。我的连接字符串看起来像

```
connectionString = "DRIVER={Microsoft ODBC for Oracle};SERVER=convcsd;User Id=sysman;Password=csaadmin;"
    Set connection = CreateObject("ADODB.Connection") 
```

它在一台服务器上工作，但不在另一台服务器上工作。它给出了一个错误：

> 未找到 oracle(tm) 和网络组件。这些组件由 oracle 公司提供。
> 
> 在安装这些组件之前，您将无法使用此驱动程序。

请让我知道如何添加 ODBC 驱动程序。我研究了但无法通过。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T15:31:44.617

SQL Plus 是一个 Oracle 客户端，是的，但这还不足以使用您的脚本。在要使用脚本的每台电脑上，您都需要一个 ODBC 驱动程序并为 Oracle 预置一个 OleDb 驱动程序（更快）。

使用 Microsoft ODBC 管理员（在您的开始菜单搜索窗口中键入 ODBC）比较两台 2 pc 之间的 ODBC 驱动程序，您会发现差异。使用您的 Oracle installpackage 并选中安装 OleDb 驱动程序的选项。

有微软和甲骨文版本，最好还是用甲骨文驱动。Oracle OleDb 的连接字符串是

```
Provider=OraOLEDB.Oracle;User ID=<user name>;Password=<password>;Data Source=<data source> 
```

# apache - 通过 htaccess 进行 301 重定向

> ID：10480061
> 
> 赞同：0
> 
> 时间：2012-05-07T09:56:32.763
> 
> 标签：apache, .htaccess, mod-rewrite

我正在尝试通过 htaccess 进行 301 重定向

```
Redirect 301 /page_one http://site.com/ 
```

但是这段代码也会重定向**/page_one的每个子链接**

例如，它还将**site.com/page_one/article**重定向到**site.com/article**

如何使 301 完全从**/page_one**重定向到**site.com/**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:13:59.393

该[`Redirect`](http://httpd.apache.org/docs/2.0/mod/mod_alias.html#redirect)指令使用前缀匹配，如下例所示：

> ```
> Redirect /service http://foo2.bar.com/service 
> ```
> 
> 如果客户端请求*http://myserver/service/foo.txt*，它将被告知访问*http://foo2.bar.com/service/foo.txt*。

尝试使用[`RedirectMatch`](http://httpd.apache.org/docs/2.0/mod/mod_alias.html#redirectmatch)：

```
RedirectMatch 302 ^/page_one$ http://site.com 
```

`302`测试后更改`301`。并且可能您需要删除尾随`/`.

# django - Django i18n url 不适用于 en-us 子语言

> ID：10480062
> 
> 赞同：4
> 
> 时间：2012-05-07T09:56:36.710
> 
> 标签：django, internationalization, django-urls

我的 django 应用程序在 urls.py 中使用 i18n_patterns，当我使用以下网址访问我的应用程序时：

myapp.com/en/

myapp.com/de/

myapp.com/en-gb/

上面的网址工作正常，但网址**myapp.com/en-us/**给了我一个 404 错误。

我认为问题在于（[https://code.djangoproject.com/browser/django/trunk/django/conf/global_settings.py）Django](https://code.djangoproject.com/browser/django/trunk/django/conf/global_settings.py)的默认LANGUAGE_CODE是'en-us'但没有'en-us'默认语言设置。这就是我得到404页面的原因。

我应该将 LANGUAGE_CODE 更改为“en”还是将“en-us”添加到 LANGUAGES 设置？

与 i18n URL 一起使用时，默认的“en-us”LANGUAGE_CDE 设置是否无用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T11:34:38.670

您应该`en-us`像这样添加到 LANGUAGES：

```
LANGUAGES += (
    ('en-us', ugettext('English-American')),
) 
```

虽然我认为它会一样简单`en - English`。

# windows-phone-7 - 如何在 windows mobile 7 中使用 post 方法而不是 webclient 方法

> ID：10480065
> 
> 赞同：0
> 
> 时间：2012-05-07T09:56:46.310
> 
> 标签：windows-phone-7

使用**Post**方法，在 signup_button_click 上必须通过 URL 触发用户凭据，并作为返回从服务获取确认消息。

# java - 使用 Google Contacts API 创建只读字段

> ID：10480066
> 
> 赞同：0
> 
> 时间：2012-05-07T09:56:52.453
> 
> 标签：java, google-api, google-contacts-api

我一直在尝试使用 Google Contacts API 添加一个谷歌联系人，它有一些自定义字段，只能由我正在创建的谷歌应用程序修改，同时对用户保持只读状态。问题是使用该方法并更新联系人后

[https://developers.google.com/gdata/javadoc/com/google/gdata/data/IEntry](https://developers.google.com/gdata/javadoc/com/google/gdata/data/IEntry)

```
 void   setCanEdit(boolean canEdit)
          Sets whether the server allows this entry to be modified by the client. 
```

仍然可以从拥有电子邮件的用户编辑该字段。

我使用了正确的方法吗？有没有人有类似的样品，因为我在互联网上找不到？

是否可以设置一些访问限制（例如将联系人设置为只读或仅可编辑）

# synchronization - 单例模式 - 为什么我们需要检查可变变量的初始化两次？

> ID：10480068
> 
> 赞同：0
> 
> 时间：2012-05-07T09:57:24.080
> 
> 标签：synchronization, thread-safety, critical-section

线程只有在条件`uniqueInstance == null`设置为真时才会进入同步代码，那有什么必要在临界区内再次检查呢？

![在此处输入图像描述](../Images/0b7d86ba9653b896b1b4ad5d768ec0f8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T10:02:37.857

因为在检查和同步调用之间，您可能会被另一个获取信号量、写入单例并退出的进程中断。除非您再次检查，否则您可能会覆盖其他进程已经初始化的值。

另一方面，如果您使整个方法同步，您将在每次调用单例时支付同步成本，而不仅仅是第一次调用。最好检查两次。

# symfony1 - symfony 1.4 是否有任何 1 对 1 聊天插件/应用程序可用？

> ID：10480072
> 
> 赞同：2
> 
> 时间：2012-05-07T09:57:36.187
> 
> 标签：symfony1, symfony-1.4

我在 google 中搜索了一个为 symfony 1.4 构建的 1-1 聊天插件，但找不到任何东西，但我找到[了 sfKoreroPlugin](http://www.symfony-project.org/plugins/sfKoreroPlugin)，但它是一个基于频道的聊天。我正在寻找仅适用于 symfony 1.4 的 1-1 聊天插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T10:20:21.827

据我所知，symfony 1.4 没有 1-1 聊天插件。

这个用于 Symfony 2.0 的包，但可以帮助您为 symfony 1.4 [ServerGroveLiveChat编写一个](https://github.com/servergrove/ServerGroveLiveChat)

或者你可以试试这个问题[的答案](https://stackoverflow.com/questions/3218849/one-to-one-chat-component-with-php-mysql)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T14:24:25.217

有一个名为[ChatPlugin](http://code.google.com/p/chatsrikanth/)的插件，一个使用了一年的插件，它使用基于[jquery 的聊天](http://anantgarg.com/2009/05/13/gmail-facebook-style-jquery-chat/)。

# iphone - iPhone 开发 - UIWebview：使用方法失败：loadHTMLString

> ID：10480076
> 
> 赞同：0
> 
> 时间：2012-05-07T09:57:56.753
> 
> 标签：iphone, objective-c

尝试使用 Web 视图的方法“loadHTMLString()”加载 html 文档时，是否可以接收 UIWebView 事件“didFailLoadWithError”？我尝试了几种方法，但 Web 视图总是成功加载。如果我只使用“loadHTMLString()”方法，我什至应该实现“didFailLoadWithError”事件吗？

# php - 检查单选按钮的值是否已经存在？

> ID：10480079
> 
> 赞同：0
> 
> 时间：2012-05-07T09:58:13.627
> 
> 标签：php, html, mysqli

我想进行查询并检查日历数据库上的 is_availble 表上是否已经存在数据，使其不可用。我有 16 个单选按钮。

我现在有这段代码，但是如果我选择这 16 个单选按钮中的任何单选按钮，第一个单选按钮会消失吗？

```
$squery = mysql_query("SELECT * FROM is_availble WHERE datetime=$v_datetime ");
echo"<div  class='box'>
<div class='boxbut'>";

if(mysql_fetch_array($squery))  {
echo" Booked ";
}
else{
echo" <input type='radio' name='datetime' value='". $row['day1']."   ".$row['time1']."'>
<d>". $row['day1'] ,"</d><br/><t>". $row['time1'] ."</t>";
}
echo"</div></div>";

//---------------------------------- choeckbox 2(bookable time 2)------------------------\\

echo"<div  class='box'>
<div class='boxbut'>";
if(mysql_fetch_array($squery))  {
    echo" Booked ";
}
else{
echo" <input type='radio' name='datetime' value='". $row['day1']."   ".$row['time2']."'>
<d>". $row['day1'] ,"</d><br/><t>". $row['time2'] ."</t>";
}
echo"</div></div>"; 
```

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:06:52.967

我相信这是不受检查的，因为`name`两种类型的收音机都一样。

制作第一台收音机`datetime`和第二台收音机`datetime2`，它应该可以工作。

# git - 带有外部文件位置的 Windows Git

> ID：10480085
> 
> 赞同：1
> 
> 时间：2012-05-07T09:58:42.020
> 
> 标签：git, ftp

我在 Windows 上使用 Git GUI。我的项目位于这样的外部 linux 服务器上：

/home/site_dev /home/site_prod

在编辑 PHP、JS 和 CSS 文件时，我只是使用支持 FTP 打开/保存的文本编辑器。

如何使用 Git 管理我的项目？“创建新存储库”只允许我选择本地文件位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T10:04:00.490

处理项目的最佳方法是将项目克隆到本地目录、工作、提交，然后部署和/或推送到服务器。

可以从 FTP 进行克隆，只需执行以下操作：

```
git clone ftp://user@server/project.git 
```

它会将项目克隆到当前目录中的新目录。

提交更改后，只需`git push origin`将更改传播回服务器。

查看[这篇文章](https://stackoverflow.com/q/5141205/11343)以讨论 ftp 服务器上的 git 远程存储库。

编辑

如果您想远程执行所有操作，最好的办法是将 FTP 位置挂载为网络驱动器，并将其提供给 git 接口。有关解决方案，请参阅[本文](http://smallvoid.com/article/ftp-map-network-drive.html)。但是，由于 FTP 协议的限制，可能会出现一些问题。如果您遇到 FTP 问题，可能值得与 Samba 共享您的文件。

# iphone - UISegmentedControl 选中状态图标图片

> ID：10480087
> 
> 赞同：11
> 
> 时间：2012-05-07T09:58:47.143
> 
> 标签：iphone, objective-c, ios, cocoa-touch, ios5

如何设置`selected`状态的图标图像`UISegmentedControl`？是`UISegmentedControl`真的缺少这个功能还是只是我缺少技能？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-07T10:08:11.020

```
 [segmentedControl addTarget:self action:@selector(segmentAction:) forControlEvents:UIControlEventValueChanged];

-(void)segmentAction:(UISegmentedControl*)sender {

    [sender setImage:[UIImage imageNamed:@"image.png"] forSegmentAtIndex:sender.selectedSegmentIndex];

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T10:06:43.093

在这里，我以编程方式创建了两个 UISegmentedControl 元素，您可以设置图像图标。

```
UISegmentedControl *switchView=[[UISegmentedControl alloc] initWithItems:[[[NSMutableArray alloc] initWithObjects:@"Yes",@"No",nil] autorelease]];
[switchView setFrame:CGRectMake(180,802,94,27)];
switchView.selectedSegmentIndex=1;
switchView.segmentedControlStyle=UISegmentedControlStyleBar;
[switchView setImage:[UIImage imageNamed:@"switchBlueBg.png"] forSegmentAtIndex:0];   // set icon for when selected
[switchView setImage:[UIImage imageNamed:@"switchOffPlain.png"] forSegmentAtIndex:1];  //set icon for when unselected
[switchView addTarget:self action:@selector(checkOnOffState:) forControlEvents:UIControlEventValueChanged];             
[scrollview addSubview:switchView];

UISegmentedControl *switchView1=[[UISegmentedControl alloc] initWithItems:[[[NSMutableArray alloc] initWithObjects:@"Yes",@"No",nil] autorelease]];
[switchView1 setFrame:CGRectMake(180,1003,94,27)];
switchView1.selectedSegmentIndex=1;
switchView1.segmentedControlStyle=UISegmentedControlStyleBar;
[switchView setImage:[UIImage imageNamed:@"switchBlueBg.png"] forSegmentAtIndex:0];  // set icon for when selected
[switchView setImage:[UIImage imageNamed:@"switchOffPlain.png"] forSegmentAtIndex:1];  ////set icon for when unselected
[switchView1 addTarget:self action:@selector(checkOnOffState1:) forControlEvents:UIControlEventValueChanged];
[scrollview addSubview:switchView1];

-(IBAction)checkOnOffState:(id)sender
{
    UISegmentedControl* tempSeg=(UISegmentedControl *)sender;

    if(tempSeg.selectedSegmentIndex==0)
    {
        //your codes
    }
    else
    {
        //your codes
    }   
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-29T16:39:40.277

```
[segmentedControl setBackgroundImage:image 
                            forState:UIControlStateSelected
                          barMetrics:UIBarMetricsDefault] 
```

您还必须设置图像才能`UIControlStateNormal`使其生效。

[苹果文档](https://developer.apple.com/documentation/uikit/uisegmentedcontrol#//apple_ref/occ/instm/UISegmentedControl/setBackgroundImage:forState:barMetrics:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-12T00:02:57.813

**斯威夫特 4**

这就是我管理它的方式。使用图像制作分段控件并插入分段。

请务必将一张图像设置为选中，因为这将是初始选择的索引。还要将*backgroundColor*和*tintColor*设置为清除，以便分段控件仅显示您的图像。

```
var newSegmentedControl: UISegmentedControl = {
        let segmentedControl = UISegmentedControl()

        segmentedControl.insertSegment(with: UIImage(named: "x_Selected.jpg"), at: 0, animated: true)
        segmentedControl.insertSegment(with: UIImage(named: "y_Normal.jpg"), at: 1, animated: true)

        segmentedControl.addTarget(self, action: #selector(segmentedControlChanged), for: .valueChanged)

        segmentedControl.selectedSegmentIndex = 0
        segmentedControl.backgroundColor = .clear
        segmentedControl.tintColor = .clear            

    }() 
```

当分段控件的值发生变化时调用的函数。

```
@objc func segmentedControlChanged(sender: UISegmentedControl) {

    if sender.selectedSegmentIndex == 0 {
        sender.setImage(UIImage(named: "x_Selected.jpg"), forSegmentAt: sender.selectedSegmentIndex)
        sender.setImage(UIImage(named: "y_Normal.jpg"), forSegmentAt: 1)
    } else if sender.selectedSegmentIndex == 1 {
        sender.setImage(UIImage(named: "x_Normal.jpg"), forSegmentAt: 0)
        sender.setImage(UIImage(named: "y_Selected.jpg"), forSegmentAt: sender.selectedSegmentIndex)
    } 

} 
```

希望你觉得这个有用.. ：）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T10:07:01.490

您可以使用单行代码进行设置**[uisegmentButtonRef setImage:[UIImage imageNamed:@"allbtndown.png"] forSegmentAtIndex:segmentIndex];**

如果您使用 Xib，请找到图片

![在此处输入图像描述](../Images/5521a8240690951cde0472851e996871.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-15T13:55:17.277

**增强@Kuldeep 的答案**

段控制中可能有两个或多个控件

```
[_segmentcontrol addTarget:self action:@selector(segmentAction:) forControlEvents:UIControlEventValueChanged]; 
```

如果您想以不同于使用此代码的方式替换所有图像..

```
-(void)segmentAction:(UISegmentedControl*)sender
{
    if(sender.selectedSegmentIndex==0)
    {
        [sender setImage:[UIImage imageNamed:@"calf_selected.png"] forSegmentAtIndex:sender.selectedSegmentIndex];//0 index
        [sender setImage:[UIImage imageNamed:@"wrist.png"] forSegmentAtIndex:1];
    }
    else
    {
        [sender setImage:[UIImage imageNamed:@"calf.png"] forSegmentAtIndex:sender.selectedSegmentIndex];//for 1 index
        [sender setImage:[UIImage imageNamed:@"wrist_selected.png"] forSegmentAtIndex:0];
    }
} 
```

# javascript - wicket 复选框 AttributeAppender

> ID：10480089
> 
> 赞同：1
> 
> 时间：2012-05-07T09:58:58.680
> 
> 标签：javascript, ajax, checkbox, wicket, onchange

在我正在处理的代码中，有一个普通的（无 ajax）`checkbox`我想将 JavaScript`onchange`事件附加到它，例如：

```
checkbox.add(new AttributeAppender("onchange", Model.of("func(this);"), "")); 
```

还有一个`AjaxEventBehavior("onclick")`添加到`checkbox`.

即使我多次`onchange`选中和取消选中，事件必须调用的函数也只调用一次。`checkbox`我猜这与“ajax”“onclick”事件有关。

如何在选中或未选中`func(this)`时进行调用？`checkbox`

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T10:22:10.447

可能您可以将`func(this);`函数称为`AjaxEventBehavior. getPreconditionScript()`or ，而不是在事件上`getSuccessScript()`添加 and 。`AttributeAppender``onchange`

看看 [http://wicket.apache.org/apidocs/1.5/org/apache/wicket/ajax/AbstractDefaultAjaxBehavior.html#getPreconditionScript](http://wicket.apache.org/apidocs/1.5/org/apache/wicket/ajax/AbstractDefaultAjaxBehavior.html#getPreconditionScript) ()

您的`AjaxEventBehavior`将与此类似：

```
new AjaxEventBehavior("onclick") {

     protected void onEvent(AjaxRequestTarget target) {
             System.out.println("ajax here!");
     }

     protected CharSequence getSuccessScript() {
             return "func(this);";
     }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T13:44:56.667

关于我对另一个答案的评论，这是我建议使用`AjaxCallDecorator`

```
new AjaxEventBehavior('onclick'){
    protected void onEvent(AjaxRequestTarget target) {
      //call your onclick handling logic here
    }

    protected IAjaxCallDecorator getAjaxCallDecorator(){
      return new IAjaxCallDecorator(){
         public CharSequence decorateScript(Component component,
                        CharSequence script){
            //prepend your javascript call to ajax server call
            return "func(this);"+script;
         }
         public CharSequence decorateOnSuccessScript(Component component,
                                 CharSequence script){
            return script;
         }
         public CharSequence decorateOnFailureScript(Component component,
                                 CharSequence script){
            return script;
         }
      };
    }
} 
```

# android - 滚动视图 Android

> ID：10480092
> 
> 赞同：1
> 
> 时间：2012-05-07T09:59:14.547
> 
> 标签：android, android-layout

欢迎。

我对 Scrollview 有疑问。

这正是底部的按钮每次都应该具有相同的大小，并且应该移动复选框中的文本。

我究竟做错了什么？

下面是代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/tvKtorePytanie"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="right"
        android:text="1/10" />

    <ImageView
        android:id="@+id/imageView"
        android:layout_width="220dp"
        android:layout_height="180dp"
        android:src="@drawable/icon"
        android:layout_gravity="center" />

    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/linearLayout2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/tvPytanie"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:text="Pytanie"
                android:textSize="16sp" />

            <CheckBox
                android:id="@+id/cbOdpowiedz1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_margin="1dip"
                android:text="CheckBox"
                android:textSize="10sp" />

            <CheckBox
                android:id="@+id/cbOdpowiedz2"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_margin="1dip"
                android:text="CheckBox"
                android:textSize="10sp" />

            <CheckBox
                android:id="@+id/cbOdpowiedz3"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_margin="1dip"
                android:text="CheckBox"
                android:textSize="10sp" />
        </LinearLayout>
    </ScrollView>

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/linearLayout2"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="bottom"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/bPoprzednie"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Poprzednie" />

        <Button
            android:id="@+id/bSprawdz"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Sprawdź" />

        <Button
            android:id="@+id/bNastepne"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Następne" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T10:06:30.520

`ScrollView`包含可用屏幕的所有宽度。您必须以 dpi 或 px 为单位提供固定（静态）高度，以便您可以将按钮设置在`ScrollView`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T10:13:49.127

使用相对布局作为父布局。将“linearLayout2”设为 alignParentBottom="true"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T10:40:46.010

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/tvKtorePytanie"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="right"
            android:text="1/10" />

        <ImageView
            android:id="@+id/imageView"
            android:layout_width="220dp"
            android:layout_height="180dp"
            android:layout_gravity="center"
            android:src="@drawable/ic_launcher" />
    </LinearLayout>

    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1">

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/linearLayout2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/tvPytanie"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:text="Pytanie"
                android:textSize="16sp" />

            <CheckBox
                android:id="@+id/cbOdpowiedz1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_margin="1dip"
                android:text="CheckBox"
                android:textSize="10sp" />

            <CheckBox
                android:id="@+id/cbOdpowiedz2"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_margin="1dip"
                android:text="CheckBox"
                android:textSize="10sp" />

            <CheckBox
                android:id="@+id/cbOdpowiedz3"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_margin="1dip"
                android:text="CheckBox"
                android:textSize="10sp" />
        </LinearLayout>
    </ScrollView>

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/linearLayout2"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:gravity="bottom"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/bPoprzednie"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Poprzednie" />

        <Button
            android:id="@+id/bSprawdz"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Sprawdź" />

        <Button
            android:id="@+id/bNastepne"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Następne" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T11:12:07.677

试试这个输出

```
<LinearLayout 
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_alignParentBottom="true"
      android:layout_alignParentLeft="true">
      <----put your items here---->
</LinearLayout> 
```

# c# - 基于复选框列表选择MVVM启用WPF按钮

> ID：10480097
> 
> 赞同：0
> 
> 时间：2012-05-07T09:59:26.627
> 
> 标签：c#, wpf, mvvm, .net-4.0, prism

我有一个使用 MVVM 模式绑定到可观察集合的运动复选框列表。用户可以选择他/她喜欢的任意数量的运动，当按下 OK 按钮时，所选运动必须显示在消息框中（为了问题而简化了代码）。

The OK button must be enabled only if one or more sports have been selected, at the moment this is not working.The enabling\disabling of the button is done using `IsValid`, is there any way to execute this method everytime one of the checkboxes is checked ?

我不能使用`<Button IsEnabled="{Binding ElementName=checkBox1, Path=IsChecked}" />`，因为开发代码中有多个属性需要在使用按钮之前检查其有效性，并且因为我使用的是 Prism，所以如果可能的话，**应该使用该`IsValid`方法**来实现。

**XAML**

```
<Window x:Class="WpfApplication13.MVVM.ComboboxWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:prism="clr-namespace:Microsoft.Practices.Composite.Presentation.Commands;assembly=Microsoft.Practices.Composite.Presentation"
        xmlns:local="WpfApplication13.MVVM" Title="MainWindow" Height="170" Width="507">
    <Grid>
        <ListBox ItemsSource="{Binding Sports}" Name="lbModules" ScrollViewer.VerticalScrollBarVisibility="Visible" 
                 Height="72" Margin="3" VerticalAlignment="Top">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <CheckBox Content="{Binding Text}" IsChecked="{Binding IsChecked,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Name="chkModules" Margin="0,5,0,0" />
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
        <Button Height="27" Width="70" Margin="3,80,3,3" VerticalAlignment="Top" 
                Content="OK" HorizontalAlignment="Left" 
                prism:Click.Command="{Binding Path=NewCommand}"></Button>
    </Grid>
</Window> 
```

**查看模型**

```
using System;
using System.Collections.ObjectModel;
using System.ComponentModel;
using System.Linq;
using System.Windows;
using Microsoft.Practices.Composite.Presentation.Commands;

namespace WpfApplication13.MVVM
{
    public class MainWindowViewModel : INotifyPropertyChanged
    {
        public DelegateCommand<object> NewCommand { get; protected set; }
        public event PropertyChangedEventHandler PropertyChanged;

        private ObservableCollection<ListHelper> modules = new ObservableCollection<ListHelper>();
        public ObservableCollection<ListHelper> Sports
        {
            get { return modules; }
            set { modules = value; OnPropertyChanged("Sports"); }
        }

        protected virtual void OnPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
            {
                NewCommand.RaiseCanExecuteChanged();
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }
        }

        public MainWindowViewModel()
        {
            ListHelper item1 = new ListHelper() { Text = "Footbal", IsChecked = false };
            ListHelper item2 = new ListHelper() { Text = "Boxing", IsChecked = false };
            ListHelper item3 = new ListHelper() { Text = "Basketball", IsChecked = false };

            Sports.Add(item1);
            Sports.Add(item2);
            Sports.Add(item3);

            NewCommand = new DelegateCommand<object>(NewTemplate, IsValid);
        }

        private bool IsValid(object parameter)
        {
            //TODO:This method must execute EVERYTIME any of the checkboxes are checked\unchecked.(currently not happening)
            //The return value then determines the enabled state of the button.
            return Sports.Any(e => e.IsChecked);
        }

        private void NewTemplate(object parameter)
        {
            //Display a list of selected sports
            string sports = String.Empty;
            Sports.Where(e => e.IsChecked).ToList().ForEach(c => sports += c.Text + " ");
            MessageBox.Show(sports);
        }
    }

    public class ListHelper
    {
        public String Text { get; set; }

        private bool isChecked = false;
        public Boolean IsChecked 
        {
            get { return isChecked; }
            //The setter is executed everytime the checkbox is checked
            set {isChecked = value;}
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:07:17.400

当复选框被选中/取消选中时，您必须表示`NewCommand`（由 决定）的可用性发生变化。`IsValid`你必须这样称呼：

```
NewCommand.RaiseCanExecuteChanged(); 
```

每当`ListHelper.IsChecked`更新。你必须想出一个很好的方法来把它们连接在一起。您有几个选项，但最直接的可能是提供`ListHelper`一个参考，以`MainViewModel`允许它在视图模型上调用适当的方法。

或者，如果您想避免创建的强耦合，您可以实现`INotifyPropertyChanged`in`ListHelper`并让`MainViewModel`监听`IsChecked`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T10:39:52.453

我认为您的问题的原因是 PRISM DelegateCommand 不包括重新查询支持。[此站点http://compositewpf.codeplex.com/discussions/44750?ProjectName=compositewpf](http://compositewpf.codeplex.com/discussions/44750?ProjectName=compositewpf)描述了此问题的适当解决方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T11:33:47.677

必须更改 ListHelper 类，如下所示。现在按预期执行按钮验证：

```
 public class ListHelper : INotifyPropertyChanged
    {
        private DelegateCommand<object> _command = null;
        private string _propertyName = String.Empty;

        public ListHelper(DelegateCommand<object> command,string propertyName)
        {
            _command = command;
            propertyName = _propertyName;
        }

        public event PropertyChangedEventHandler PropertyChanged;

        public String Text { get; set; }

        private bool isChecked = false;
        public Boolean IsChecked 
        {
            get { return isChecked; }
            //The setter is executed everytime the checkbox is checked
            set 
            {
                isChecked = value;
                OnPropertyChanged(_propertyName);
            }
        }

        protected virtual void OnPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null && _command != null)
            {
                _command.RaiseCanExecuteChanged();
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-27T06:41:08.600

我有最好的解决方案：打电话

```
CommandManager.InvalidateRequerySuggested(); 
```

从您的支票 IsChecked 二传手的二传手：

```
 public bool IsChecked 
    {
        get { return isChecked; }
        set 
        {
            isChecked = value;
            CommandManager.InvalidateRequerySuggested();
        }
    } 
```

无需对命令进行强引用。至少可从 .NET 4.0 获得。

# c# - 具有 128 位输出的 DES 加密

> ID：10480100
> 
> 赞同：-3
> 
> 时间：2012-05-07T09:59:39.177
> 
> 标签：c#, cryptography, des, 3des, iso8583

我在 C# 中使用普通 DES 加密有问题，我想要一个 16 字符长度（16 字节 128 位）的输出字符串，它只包含字母和数字字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:21:14.790

如果您被限制为仅包含字母数字字符的 16 字符输出，则意味着您有大约 95 位可用的输出空间（如果您可以使用 Base-64 编码，则正好是 96 位，即包括 2 个非字母数字字符）。

因此，您无法使用此限制加密超过 95 位。如果这对你来说足够了，那是可能的。

像这样的东西（CTR 模式下的 3DES）是它如何工作的一个例子（使用 Base-64），但正如评论中所述，它真的取决于你真正想要做什么。

```
void Main()
{
    var data = new byte[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12 };
    var key = new byte[] { 01, 12, 23, 34, 45, 56, 67, 78, 89, 90, 09, 98, 87, 76, 65, 54, 43, 32, 21, 10, 11, 22, 33, 44 };
    var encrypted = Encrypt(data, key, 0);
    Console.WriteLine(encrypted);
    var decrypted = Decrypt(encrypted, key, 0);
    // decrypted should be equal to data here
}

public string Encrypt(byte[] data, byte[] key, long nonce)
{
    return Convert.ToBase64String(Transform(data, key, nonce));
}

public byte[] Decrypt(string data, byte[] key, long nonce)
{
    return Transform(Convert.FromBase64String(data), key, nonce);
}

byte[] Transform(byte[] data, byte[] key, long nonce)
{
    if (data.Length > 96/8) throw new ArgumentException("Too much data");

    using (var des = new TripleDESCryptoServiceProvider())
    {
        des.Key = key;
        des.Mode = CipherMode.ECB;
        using (var encryptor = des.CreateEncryptor())
        {
            var output = new byte[data.Length];
            var offset = 0;
            for(int counter = 0; counter <= data.Length / 8; ++counter)
            {
                var counterData = BitConverter.GetBytes(((long)counter) ^ nonce);
                var counterEncryption = new byte[des.BlockSize / 8];
                var counterEncryptionLen = encryptor.TransformBlock(counterData, 0, counterData.Length, counterEncryption, 0);
                Debug.Assert(counterEncryptionLen == counterEncryption.Length);
                for (var i = 0; i < des.BlockSize / 8 && offset < output.Length; ++i, ++offset)
                {
                    output[offset] = (byte)(data[offset] ^ counterEncryption[i]);
                }
            }
            return output;
        }
    }
} 
```

# javascript - 有什么方法可以检查是否强制执行严格模式？

> ID：10480108
> 
> 赞同：84
> 
> 时间：2012-05-07T10:00:03.873
> 
> 标签：javascript, ecmascript-5, ecma262, strict-mode

无论如何要检查是否强制执行严格模式“使用严格”，我们想为严格模式执行不同的代码，为非严格模式执行其他代码。寻找类似的功能`isStrictMode();//boolean`

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-05-07T10:08:11.907

`this`在全局上下文中调用的函数内部不会指向全局对象的事实可用于检测严格模式：

```
var isStrict = (function() { return !this; })(); 
```

演示：

```
> echo '"use strict"; var isStrict = (function() { return !this; })(); console.log(isStrict);' | node
true
> echo 'var isStrict = (function() { return !this; })(); console.log(isStrict);' | node
false 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-09-20T12:26:27.693

我更喜欢不使用异常并且在任何情况下都可以使用的东西，而不仅仅是全局的：

```
var mode = (eval("var __temp = null"), (typeof __temp === "undefined")) ? 
    "strict": 
    "non-strict"; 
```

它使用了 in strict 模式`eval`不会将新变量引入外部上下文的事实。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-05-07T10:36:33.710

```
function isStrictMode() {
    try{var o={p:1,p:2};}catch(E){return true;}
    return false;
} 
```

看起来你已经得到了答案。但是我已经写了一些代码。所以在这里

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-05-07T10:07:40.007

是的，当您处于严格模式时，`this`它在全局方法中。`'undefined'`

```
function isStrictMode() {
    return (typeof this == 'undefined');
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2020-07-05T04:18:46.477

## 警告+通用解决方案

这里的许多答案都声明了一个检查严格模式的函数，但是这样的函数不会告诉你它被调用的范围，只会告诉你它被声明的范围！

```
function isStrict() { return !this; };

function test(){
  'use strict';
  console.log(isStrict()); // false
} 
```

与跨脚本标签调用相同。

因此，每当您需要检查严格模式时，都需要在该范围内编写整个检查：

```
var isStrict = true;
eval("var isStrict = false"); 
```

与最受欢迎的答案不同，Yaron 的这项检查不仅适用于全球范围。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-08-30T10:42:24.833

更优雅的方式：如果 "this" 是对象，则将其转换为 true

```
"use strict"

var strict = ( function () { return !!!this } ) ()

if ( strict ) {
    console.log ( "strict mode enabled, strict is " + strict )
} else {
    console.log ( "strict mode not defined, strict is " + strict )
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-23T10:18:04.997

另一种解决方案可以利用这样一个事实，即在严格模式下，声明的变量`eval`不会暴露在外部范围内

```
function isStrict() {
    var x=true;
    eval("var x=false");
    return x;
} 
```

# ruby-on-rails - 是否可以更改 Rails 项目中的文件夹结构？

> ID：10480109
> 
> 赞同：4
> 
> 时间：2012-05-07T10:00:05.380
> 
> 标签：ruby-on-rails, ruby-on-rails-3, api, rest

我来自.Net MVC 背景，希望在 RoR 中做一个项目。具体来说，我正在开发一个 REST api。

我将描述我的想法，希望你能引导我朝着正确的方向前进。我的 api 必须支持版本，最强大的版本 api 方法是为每个版本复制代码。这样在一个版本中修复问题不会影响其他版本。在 .NET MVC 中执行此操作时，区域是您最好的朋友，因为每个版本的源文件都可以通过使用区域很好地分割。

所以我的问题是：在 RoR 中是否有可能改变目录结构，所以这个层次结构

```
app/
  controllers
    /v1
      c1_controller.rb
      c2_controller.rb
    /v2
      c1_controller.rb
      c2_controller.rb
  models/
    /v1
      m1.rb
      m2.rb
    /v2
      m1.rb
      m2.rb
  views/
    /v1
      view1.html.erb
      view2.html.erb
    /v3
      view1.html.erb
      view2.html.erb 
```

可以重新排列到这个？

```
app/
  v1/
    controllers/
      c1_controller.rb
      c2_controller.rb
    models/
      m1.rb
      m2.rb
    views/
      view1.html.erb
      view2.html.erb
  v2/
    controllers/
      c1_controller.rb
      c2_controller.rb
    models/
      m1.rb
      m2.rb
    views/
      view1.html.erb
      view2.html.erb 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-07T10:07:06.603

查看此页面，它将为您提供有关 Rails 3+ 项目目录结构的一些见解：

[http://edgeapi.rubyonrails.org/classes/Rails/Engine.html](http://edgeapi.rubyonrails.org/classes/Rails/Engine.html)

> 从 Rails 3.0 开始，应用程序和引擎具有更灵活的路径配置（与之前的硬编码路径配置相反）。这意味着您不需要将控制器放置在应用程序/控制器上，而是放置在您认为方便的任何地方。

不要害怕它是关于引擎的，它在一开始就声明：每个 Rails 应用程序都是一个引擎。

更新：我自己从来没有机会这样做，但是根据该页面和[this](http://api.rubyonrails.org/classes/Rails/Application/Configuration.html#method-i-paths)，您应该将以下内容添加到您的`config/application.rb`inside `class Application < Rails::Application`：

```
config.paths["app/controllers"] << "app/v1/controllers"
config.paths["app/controllers"] << "app/v2/controllers"
config.paths["app/controllers"] << "app/v3/controllers"

config.paths["app/models"] << "app/v1/models"
config.paths["app/models"] << "app/v2/models"
config.paths["app/models"] << "app/v3/models"

config.paths["app/views"] << "app/v1/views"
config.paths["app/views"] << "app/v2/views"
config.paths["app/views"] << "app/v3/views" 
```

以这个项目为例：[https ://github.com/forker/multiversion](https://github.com/forker/multiversion)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T23:40:05.183

我认为您可能试图在稍微错误的地方解决您的问题。如果您需要同时支持应用程序的多个版本，并且能够独立地对它们进行修复等等，使用 git 进行版本控制（如果您还没有）并为每个版本创建一个单独的分支听起来像这样去找我。（我相信你可以用 Mercurial、SVN 等做类似的事情，但 Git 似乎确实是 Rails 的事实标准）。

这是有关分支的一些信息的链接：http: [//git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging](http://git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T23:28:34.613

如果您始终使用支持符号链接的系统，那么仅使用符号链接可能会更简单

```
app/controllers/v1 -> app/v1/controllers
app/models/v1 -> app/v1/models
app/views/v1 -> app/v1/views 
```

等等。或者反过来。

然后 Rails 会`app/controllers/v1/c1_controller.rb`照常读取并假设它位于 V1 命名空间 (" `class V1::C1Controller`") 中。

请记住使链接相对。

# c# - 如何在asp.net中检查会话是否过期

> ID：10480110
> 
> 赞同：33
> 
> 时间：2012-05-07T10:00:09.697
> 
> 标签：c#, asp.net

我在 web.config 文件中指定了会话超时。当会话超时时，我没有重定向到登录页面，但我收到一条错误消息，指出对象引用未设置为实例。

谁能告诉我这个问题的解决方案？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-07T10:02:42.910

您可以检查该`HttpContext.Current.User.Identity.IsAuthenticated`属性，该属性将使您知道当前是否存在经过身份验证的用户。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-07T10:02:10.260

**编辑**

您可以使用 IsNewSession 属性检查会话是否是根据页面请求创建的

```
protected void Page_Load() 
{ 
   if (Context.Session != null) 
   { 
      if (Session.IsNewSession) 
      { 
         string cookieHeader = Request.Headers["Cookie"]; 
         if ((null != cookieHeader) && (cookieHeader.IndexOf("ASP.NET_SessionId") >= 0)) 
         { 
            Response.Redirect("sessionTimeout.htm"); 
         } 
      } 
   } 
} 
```

**预**

`Userid`当用户登录网站并检查您的母版页或创建的其他页面继承的基本页面表单时，存储在会话变量中。然后在页面加载中检查`Userid`是否存在，如果不存在则重定向到登录页面。

```
if(Session["Userid"]==null)
{
  //session expire redirect to login page 
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-07T10:05:06.497

我不想在代码中检查会话变量，而是使用 FormAuthentication。它们具有内置功能，可重定向到 web.config 中指定的给定 LoginPage。

但是，如果您想明确检查会话，您可以检查您之前在会话中创建的任何变量的 NULL 值，正如 Pranay 回答的那样。

您可以创建 Login.aspx 页面并在那里写下您的消息，当会话到期时 FormAuthentication 会自动重定向到 FormAuthentication 部分中给出的 loginUrl

```
<authentication mode="Forms">
  <forms loginUrl="Login.aspx" protection="All" timeout="30">
  </forms>
</authentication> 
```

问题是您不能为 Login 和 SessionExpire 提供单独的页面，因此您必须显示/隐藏 Login.aspx 上的某些部分以双向操作。

还有另一种方法可以在超时后重定向到 sessionexpire 页面而不更改 formauthentication->loginurl ，请参阅以下链接：[http ://www.schnieds.com/2009/07/aspnet-session-expiration-redirect.html](http://www.schnieds.com/2009/07/aspnet-session-expiration-redirect.html)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-07-03T17:43:35.920

使用`Session.Contents.Count`：

```
if (Session.Contents.Count == 0)
{
    Response.Write(".NET session has Expired");
    Response.End();
}
else
{
    InitializeControls();
} 
```

上面的代码假设您在用户第一次访问您的网站时创建了至少一个会话变量。如果您没有，那么您很可能不会为您的应用程序使用数据库。对于您的情况，您可以使用下面的示例手动分配会话变量。

```
protected void Page_Load(object sender, EventArgs e)
{
    Session["user_id"] = 1;
} 
```

祝你好运！

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-05-07T10:02:16.017

检查它是否为空，例如

```
if(Session["mykey"] != null)
{
  // Session is not expired
}
else
{
  //Session is expired
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-01T20:58:43.370

我使用@Adi-lester 答案并添加一些方法。

验证会话是否处于活动状态的方法

```
public static void SessionIsAlive(HttpSessionStateBase Session)
{
    if (Session.Contents.Count == 0)
    {
        Response.Redirect("Timeout.html"); 
    }
    else
    {
        InitializeControls();
    }
} 
```

在页面加载中创建会话变量

```
protected void Page_Load(object sender, EventArgs e)
{
    Session["user_id"] = 1;
} 
```

创建 SaveData 方法（但您可以在所有方法中使用它）

```
protected void SaveData()
{
    // Verify if Session is Alive
    SessionIsAlive(Session);

    //Save Data Process
    // bla
    // bla
    // bla
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-01-27T08:33:45.180

这样很多人检测会话是否已过期。下面的代码可以帮助你。

```
protected void Page_Init(object sender, EventArgs e)
    {
        if (Context.Session != null)
        {
            if (Session.IsNewSession)
            {
                HttpCookie newSessionIdCookie = Request.Cookies["ASP.NET_SessionId"];
                if (newSessionIdCookie != null)
                {
                    string newSessionIdCookieValue = newSessionIdCookie.Value;
                    if (newSessionIdCookieValue != string.Empty)
                    {
                        // This means Session was timed Out and New Session was started
                        Response.Redirect("Login.aspx");
                    }
                }
            }
        }
    } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-09-17T09:58:30.553

在这里，我正在检查会话值（在上一页的文本框中填写了两个值）

```
protected void Page_Load(object sender, EventArgs e)
{
    if (Session["sessUnit_code"] == null || Session["sessgrcSerial"] == null)
    {
        Response.Write("<Script Language = 'JavaScript'> alert('Go to GRC Tab and fill Unit Code and GRC Serial number first')</script>");
    }
    else
    {

        lblUnit.Text = Session["sessUnit_code"].ToString();
        LblGrcSr.Text = Session["sessgrcSerial"].ToString();
    }
} 
```

# log4j - 记录器初始化不成功

> ID：10480113
> 
> 赞同：2
> 
> 时间：2012-05-07T10:00:27.453
> 
> 标签：log4j

我在 tomcat 6.0.35 中使用下面提到的 log4j.properties 文件

```
log4j.appender.request=org.apache.log4j.rolling.RollingFileAppender
log4j.appender.request.Append=true
log4j.fileName=logs/test
log4j.appender.request.File=${log4j.fileName}.log
log4j.appender.request.RollingPolicy=org.apache.log4j.rolling.FixedWindowRollingPolicy
log4j.appender.request.RollingPolicy.FileNamePattern=${log4j.fileName}.%i.log.zip
log4j.appender.request.RollingPolicy.MinIndex=1
log4j.appender.request.RollingPolicy.MaxIndex=10

log4j.appender.request.TriggeringPolicy=org.apache.log4j.rolling.SizeBasedTriggeringPolicy
log4j.appender.request.TriggeringPolicy.MaxFileSize=10485760

log4j.appender.request.layout=org.apache.log4j.PatternLayout
log4j.appender.request.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n

log4j.rootLogger=info, request 
```

但我收到以下消息

```
log4j:WARN Failed to set property [rollingPolicy] to value "org.apache.log4j.rolling.FixedWindowRollingPolicy".
log4j:WARN Failed to set property [triggeringPolicy] to value "org.apache.log4j.rolling.SizeBasedTriggeringPolicy".
log4j:WARN Please set a rolling policy for the RollingFileAppender named 'request'
log4j:WARN Failed to set property [rollingPolicy] to value "org.apache.log4j.rolling.FixedWindowRollingPolicy".
log4j:WARN Failed to set property [triggeringPolicy] to value "org.apache.log4j.rolling.SizeBasedTriggeringPolicy".
log4j:WARN Please set a rolling policy for the RollingFileAppender named 'request'
log4j:ERROR No output stream or file set for the appender named [request]. 
```

在 log4j 配置中设置属性存在一些问题。有什么帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:02:02.317

我今天使用 apache-log4j-extras1.1.jar 遇到了这个问题。经过一段时间的摔跤，我发现我的 log4j.jar 版本是 1.2.14 是问题所在。我更新到 1.2.17 并解决了我的问题。确保它位于您的 tomcat（或您的应用程序）中的任何其他 log4j 之前。

# c++ - C++ - 如何永久导入 DLL 文件？

> ID：10480114
> 
> 赞同：0
> 
> 时间：2012-05-07T10:00:39.247
> 
> 标签：c++, file, dll, import

> **可能重复：**
> [如何将动态 dll 转换为静态库？](https://stackoverflow.com/questions/2576910/how-to-convert-a-dynamic-dll-to-static-lib)

假设我们有一个 DLL 文件。命名为“dllfile.dll”。我想将它导入我的 C++ 项目（.exe，Dev-C++ 上的控制台应用程序），以便它符合 DLL 文件本身，然后我可以发布它，而无需将 .dll 文件包含在与我的 .exe 文件相同的目录中. 有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:02:44.700

为此，您需要一个静态库，通常不能为此使用 DLL 编译代码。

如果您有 DLL 的源代码，您应该能够将其编译为静态库并链接到该库。这将导致不依赖于该库的 DLL 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:33:26.373

> 我可以在不包含与我的 .exe 文件相同目录中的 .dll 文件的情况下发布它。

一般来说，你不能这样做。

为此，您需要反编译 dll 并将其转换为静态库，这将违反免费软件、专有、GPL 和 LGPL 项目的许可证。静态链接 dll 的内容可能会引入问题（CRT 混淆）。

或者您可以尝试获取库 dll 表示的静态库版本，并静态链接。对于专有项目（除非您愿意付出很多并且他们愿意出售），免费软件项目，不能用于 GPL/LGPL dll（静态链接 => 派生工作 => 您的项目是现在是 GPL/LGPL，这可能不是你想要的）。

# javascript - knockoutjs ObservableArrays 和排序功能：UI 未更新

> ID：10480118
> 
> 赞同：6
> 
> 时间：2012-05-07T10:01:21.470
> 
> 标签：javascript, knockout.js, ko.observablearray

在我的视图模型中，我有一个 knockoutjs ObserableArray。在我初始化 ViewModel 之后，它就成功绑定了数据。然后，我需要做的是对集合进行排序。

```
$.each(vm.searchResults(), function (i, property) {
    console.log(property.Name());
});

vm.searchResults().sort(function (a, b) {
    return a.Name().toLowerCase() > b.Name().toLowerCase() ? 1 : -1;
});

$.each(vm.searchResults(), function (i, property) {
    console.log(property.Name());
}); 
```

如您所见，我将元素的名称输出到控制台以查看排序前后的顺序。排序工作得很好。问题在于 UI 更新。不知何故，用户界面没有更新。

然后，尝试使用以下代码从数组中删除一条记录，以查看 UI 是否会响应：

```
vm.searchResults().shift(); 
```

UI 保持不变，没有再次更新。这里会有什么问题？

**编辑：**

这也是一个示例案例：http: [//jsfiddle.net/tugberk/KLpwP/](http://jsfiddle.net/tugberk/KLpwP/)

这里也有同样的问题。

**编辑：**

我解决了这个示例中显示的问题：http: [//jsfiddle.net/tugberk/KLpwP/16/](http://jsfiddle.net/tugberk/KLpwP/16/)但我仍然不确定为什么它像我最初尝试的那样有效。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-07T10:28:42.623

当您要对它进行排序时，您正在展开可观察数组。这是导致问题的原因，因为 KO 无法跟踪数组已更改。`ko.observableArray()`具有`sort`相同签名的功能，它会通知 observable 的订阅者它已被更改。解决方案很简单：删除大括号`vm.searchResults().sort`=> `vm.searchResults.sort`。查看我的示例：http: [//jsfiddle.net/RbX86/](http://jsfiddle.net/RbX86/)

另一种告诉 KO 数组发生变化的方法 -`valueHasMutated`在使用数组操作后调用方法。请查看此示例： http: [//jsfiddle.net/RbX86/1/](http://jsfiddle.net/RbX86/1/) 当您需要在数组中进行许多更改并且只想刷新一次 UI 时，这种方法非常好。

# c# - 使用“Microsoft.Office.Interop.Word._Document.Close”时出现警告 CS0467

> ID：10480119
> 
> 赞同：2
> 
> 时间：2012-05-07T10:01:26.607
> 
> 标签：c#, compiler-warnings

问题（C# 编译器警告消息）：

> 警告 CS0467：方法 'Microsoft.Office.Interop.Word._Document.close(ref object, ref object, ref object)' 和非方法 'Microsoft.Office.Interop.Word.DocumentEvents2_Event.Close' 之间存在歧义。使用方法组。

（部分..）解决方案： [使用“Microsoft.Office.Interop.Word._Document.Close”时的编译时警告](https://stackoverflow.com/questions/8640594/ambiguity-between-method-microsoft-office-interop-word-document-close)

困境：如果我明确地转换为`Microsoft.Office.Interop.Word._Document`，ReSharper 会警告我“类型转换是多余的”

问题：这个警告信息是否有真正的解决方案，而不仅仅是拼凑？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T08:42:39.917

只是不要强制转换，C# 不需要它：

```
Word._Application app = new Word.Application();
Word._Document doc = app.Documents.Add(...);
doc.Close(...);    // No ambiguity
app.Quit(...); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T10:08:26.273

好吧，如果你需要铸造以避免错误......铸造！

Resharper 有（好的）通用规则，但有时它们无法应用。

在这种特定情况下，您可以“隐藏”resharper 警告消息（“使用评论抑制检查 xxx”），或者......与（如果可以/被允许）一起使用。

编辑：好的，收到 lib 版本 12.0.0.0 的警告

所以你可以试试

```
_Document w = new Document(); 
```

你应该避免 c# 和 resharper 警告。

# http - HTTP 管道和使用 SPDY 的 HTTP 多路复用之间的区别

> ID：10480122
> 
> 赞同：53
> 
> 时间：2012-05-07T10:01:42.767
> 
> 标签：http, spdy, multiplexing, http-pipelining

感谢 Google 和 Stack Overflow，我想我理解了常规 HTTP 流水线和 HTTP 多路复用（例如，使用 SPDY）之间的区别，所以我制作了下图来展示基于三个常规 HTTP 请求的流水线和多路复用之间的区别。

![在此处输入图像描述](../Images/d5b6b4b46fe4f8dad268fa0c96ffd164.png)

我的两个问题是：

1.  图像是否正确？
2.  如果流水线没有[线头阻塞问题](http://en.wikipedia.org/wiki/Head-of-line_blocking)，它是否会像 HTTP 多路复用一样快？还是我错过了额外的差异？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-05-07T16:23:26.987

这不是不正确的，但它忽略了一个重要方面。HTTP 要求您在任何其他请求可以继续之前交付*整个响应。*您在图中显示的内容是正确的，因为使用 SPDY，我们最终可以打破“线头”要求并在响应可用时提供响应。但是，我们也不必等待任何请求完全完成。

想象一下两个请求，大小都是几个 kb：每个请求都有多个数据包，调用它们`[r1p1, r1p2]`并`[r2p1, r2p2]`. HTTP 要求 pN 以准确的顺序到达。另一方面，SPDY 允许我们：`[r2p1, r1p1, r1p2, r2p2]`.

还值得一提的是，使用 SPDY，我们可以使用请求优先级来提示服务器哪些请求应该优先，即使它稍后在线上到达（在六个其他很棒的特性中）。

# php - 下载成功后如何更新数据库？

> ID：10480125
> 
> 赞同：2
> 
> 时间：2012-05-07T10:01:51.020
> 
> 标签：php, download

我已经编写了一个下载脚本，它将从一个目录下载一个文件。成功下载后，我需要更新数据库，所以我编写了以下代码。

```
$path = $_SERVER['DOCUMENT_ROOT']."/upload/"; // change the path to fit your websites document structure

$fullPath = $path.$_GET['download_file'];

if ($fd = fopen ($fullPath, "r")) {
    $fsize = filesize($fullPath);
    $path_parts = pathinfo($fullPath);
    $ext = strtolower($path_parts["extension"]);
    switch ($ext) {
        case "pdf":
        header("Content-type: application/pdf"); // add here more headers for diff. extensions
        header("Content-Disposition: attachment; filename=\"".$path_parts["basename"]."\""); // use 'attachment' to force a download
        break;
        default;
        header("Content-type: application/octet-stream");
        header("Content-Disposition: filename=\"".$path_parts["basename"]."\"");
    }
    header("Content-length: $fsize");
    header("Cache-control: private"); //use this to open files directly
    while(!feof($fd)) {
        $buffer = fread($fd, 2048);
        echo $buffer;
    }
}
fclose ($fd);
$update = mysql_query("Update query");
if($update) {
echo "updated";
}
else {
echo 'error'.mysql_error();
}
exit; 
```

但是当我点击下载链接并且当我点击取消按钮时会在弹出窗口中出现一个浏览器弹出窗口时，它不应该执行更新查询，因为文件没有下载但是在使用上面的代码时，即使我点击执行更新查询的取消按钮。

那么我的代码中的错误是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T10:06:46.557

您将需要检查用户是否中止了请求，如果没有，则仅插入该行。

```
if (connection_status() == CONNECTION_NORMAL) {
    // do query here
} 
```

看：

*   [http://www.php.net/manual/en/function.ignore-user-abort.php](http://www.php.net/manual/en/function.ignore-user-abort.php)
*   [http://www.php.net/manual/en/function.connection-status.php](http://www.php.net/manual/en/function.connection-status.php)
*   [http://www.php.net/manual/en/function.connection-aborted.php](http://www.php.net/manual/en/function.connection-aborted.php)

# mongodb - MongoDB 和 DateTimeOffset 类型

> ID：10480127
> 
> 赞同：9
> 
> 时间：2012-05-07T10:01:58.273
> 
> 标签：mongodb, mongodb-.net-driver

我正在尝试查找在指定时间内创建的所有文档。我正在使用 c# 和 mongodb c# 驱动程序。

我的实体如下：

```
public class Entity
{
    public Gid Id { get; private set; }
    public DateTimeOffset CreationTimestamp { get; private set; }
    public Entity()
    {
    }
} 
```

所以我想我可以这样做：

```
DateTime compareTime = DateTime.UtcNow.AddMinutes(-15);
var result = _collection.Find(Query.GT("CreationTimestamp", compareTime)).Count(); 
```

即使集合中有数据，结果也是零计数。如果我从 DateTimeOffset 更改为 DateTime 我会得到一个结果。

是不支持 DateTimeOffset 类型的问题吗？如果是这样，有没有办法解决这个问题，因为我需要我的实体使用 DateTimeOffset？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-07T12:57:19.377

DateTimeOffset 根本不序列化为 Date，而是（默认情况下）作为 [ticks, timezone offset] 的数组。因此，您不能以与正常日期相同的方式查询它。相反，我们将根据刻度进行查询。您需要确保您的时区偏移量相同，否则这将不起作用。

```
DateTimeOffsett compareTime = DateTimeOffsett.UtcNow.AddMinutes(-15);
var result = _collection.Find(Query.GT("CreationTimestamp.0", compareTime.Ticks)).Count(); 
```

基本上，我们将存储数组的第一个元素与滴答计数进行比较。再次为得到这个答案所花费的时间感到抱歉。

# html - Underlining an html anchor with different color

> ID：10480129
> 
> 赞同：13
> 
> 时间：2012-05-07T10:02:02.740
> 
> 标签：html, css, anchor

Is it possible to underline an anchor tag with a color other than its text color? Any example will be appreciated.

**EDIT:** Is it possible to specify color as hex e.g. #8f867c ?

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-07T10:03:59.490

You cannot specify the underline color separately, but you can use a little trick:

```
a {
    color: red;
    text-decoration: none;
    border-bottom: 1px solid green;
} 
```

Note that the border will not appear *exactly* where the underline would have appeared, sorry.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2021-04-17T04:45:15.087

CSS3 allows you to use `text-decoration-color: #8f867c` to set the color directly.

```
p {
  color: green;
  text-decoration: underline;
  text-decoration-color: #8f867c;
}

span {
  color: #8f867c;
}
```

```
<p>My underline is <span>#8f867c</span></p>
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-07T10:06:08.287

Assuming you want the "border" to only show when user moves his mouse over it you should do something like this:

```
a {
  text-decoration: none;
}

a:hover {
  border-bottom: 1px solid blue;
  text-decoration: none;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-07T10:04:05.887

It's better you can give **border** to it. write like this:

```
a{
text-decoration: none;
color:green;
border-bottom:1px solid red;
} 
```

Check this [http://jsfiddle.net/dgc4q/](http://jsfiddle.net/dgc4q/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-12-21T16:07:08.180

> Is it possible to underline an anchor tag with a color other than its text color? Any example will be appreciated.

I find that weird, but I just learned: [Yes, it is](https://codepen.io/fnocke/pen/vpXOwG), if you wrap a span inside.

**html:**

```
<a href='#'><span>Howdy Partner</span></a> 
```

**css (sass)**

```
html
  font-size: 6em

a
  color: red

span  
  color: green 
```

[![enter image description here](../Images/a5567647752421c6425950ad7b33050c.png)](https://i.stack.imgur.com/LZD7M.png)

**little advantage over `border-bottom`-solution:**

You are certainly not affecting base-line, line-height, margin collapse, spacing between lines... (depending on situtation, border-bottom could do that)

# ruby-on-rails - Libarchive Gem 不工作 (RoR)

> ID：10480130
> 
> 赞同：2
> 
> 时间：2012-05-07T10:02:04.500
> 
> 标签：ruby-on-rails, gem, compression

我正在尝试让 libarchive 在我的 Rails 应用程序中工作。具体来说，我需要解压缩文件并将其内容重新压缩为 .CPGZ 文件。我相信 Libarchive 是我最好的选择。

但是，当我运行 bundle install 时，我收到以下错误：（它抱怨 archive.h 丢失）。

```
Using heroku (2.24.1) 
Using multi_xml (0.4.4) 
Using httparty (0.8.3) 
Using itunes-search-api (0.1.0) 
Using kgio (2.7.4) 
Using less (2.2.1) 
Using less-rails (2.2.2) 
Installing libarchive (0.1.2) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /Users/Chris/.rvm/rubies/ruby-1.9.2-p290/bin/ruby extconf.rb 
checking for gcc... gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables... 
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking for special C compiler options needed for large files... no
checking for _FILE_OFFSET_BITS value needed for large files... no
checking for a BSD-compatible install... /usr/bin/install -c
configure: creating ./config.status
config.status: creating config.h
checking for config.h... yes
checking for archive.h... no
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/Users/Chris/.rvm/rubies/ruby-1.9.2-p290/bin/ruby

Gem files will remain installed in /Users/Chris/.rvm/gems/ruby-1.9.2-p290/gems/libarchive-0.1.2 for inspection.
Results logged to /Users/Chris/.rvm/gems/ruby-1.9.2-p290/gems/libarchive-0.1.2/ext/gem_make.out
An error occured while installing libarchive (0.1.2), and Bundler cannot continue.
Make sure that `gem install libarchive -v '0.1.2'` succeeds before bundling. 
```

我的 Gemfile 是相当标准的，包括该行`gem 'libarchive'`

我将在 Heroku 上运行它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:05:06.583

我相信这意味着 Heroku 的堆栈中没有 libarchive 库。对雪松也不起作用，我发现了。唉，因此您不能使用 libarchive gem，因为它只是 C 库的一个包装器，直到它们包含它。

# mysql - csf.conf 文件。允许从外部 IP 地址访问 MySQL - 不工作，

> ID：10480131
> 
> 赞同：0
> 
> 时间：2012-05-07T10:02:08.617
> 
> 标签：mysql, firewall, cpanel

我在 vi 中编辑了我的 CSF 文件，但是保存后 ConfigServer Security&Firewall 不会加载到 Web 浏览器中，所以我必须还原。我假设是因为语法无效？

我允许这些端口（CSF 工作正常并在 WHM 中显示）：

```
# Allow incoming TCP ports
TCP_IN = "20,21,22,25,53,80,110,143,443,465,587,993,995"

# Allow outgoing TCP ports
TCP_OUT = "20,21,22,25,37,43,53,80,110,113,443,587,873" 
```

但是，当我还添加此行时：

```
tcp|in|d=3306|s=11.22.33.44 
```

到 conf 文件并保存，ConfigServer Security&Firewall 中的 WHM 将不会显示。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-23T09:29:55.203

You can white list IPs using the command.

> csf -a IP

after that restarting csf is a good practice.

> csf -r

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T13:14:52.590

将此添加到 WHM 上的允许 IP 框中将解决该问题。不要将其直接添加到 CSF 文件中。

# java - 使用 POST 将数据从 Android 发送到 AppEngine Datastore

> ID：10480136
> 
> 赞同：2
> 
> 时间：2012-05-07T10:02:18.213
> 
> 标签：java, android, google-app-engine, http, datastore

对不起，如果这是一个简单的问题，但我只是不知道我应该做什么，我认为我在这里有点超出我的深度。我想将数据从 Android 应用程序发送到我在 Google App Engine 上运行的应用程序。必须从那里将数据写入数据存储区。我的数据主要是对象的形式，我正在使用 Java。

我遇到了以下问题：[how-can-i-connect-a-google-app-engine-application-with-my-android](https://stackoverflow.com/questions/5934939/how-can-i-connect-a-google-app-engine-application-with-my-android)

我想我明白 Android 端会发生什么。我也了解 doPost 方法的工作原理以及它应该做什么。但我的问题是，我现在如何使用 PersistenceManagerFactory 将此数据写入我的数据存储区，或检索它？即，如果我想在那里使用 PersistenceManagerFactory，doPost 中的代码会怎样？

本质上，我的移动应用程序必须能够像我的 AppEngine 应用程序那样进行数据检索/写入。

还是我应该忘记这种方法并做一些不同的事情？

任何指向正确方向的指针将不胜感激！

编辑：

我已经开始实施 Sam 的解决方案，如下所示。但是，有些事情仍然不对劲。这是我目前正在做的事情：

在我的 GAE 应用程序的 web.xml 中映射我的 servlet：

```
<servlet>
    <servlet-name>this_servlet</servlet-name>
<servlet-class>*app-details*.server.JsonNews</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>this_servlet</servlet-name>
    <url-pattern>/my_app/my_app_place</url-pattern>
</servlet-mapping> 
```

doPost() 方法的实现与 Sam 的相同。

在我的 Android 应用中：

```
DefaultHttpClient hc=new DefaultHttpClient();
ResponseHandler <String> res=new BasicResponseHandler();
HttpPost postMethod=new HttpPost("http://my_application.appspot.com/my_app/my_app_place");
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();  
nameValuePairs.add(new BasicNameValuePair("value1", "Value my user entered"));  
postMethod.setEntity(new UrlEncodedFormEntity(nameValuePairs));  
String response=hc.execute(postMethod,res); 
```

但是，hc.execute 方法失败，并为我提供以下消息：内部服务器错误

这让我相信错误一定是在服务器端——但我不确定哪里或为什么会出错。我完全复制了 Sam 的代码，只更改了必要的内容，例如“News”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:02:41.883

您应该使用 RequestFactorys 来解决这个问题。

[https://developers.google.com/web-toolkit/doc/latest/DevGuideRequestFactory](https://developers.google.com/web-toolkit/doc/latest/DevGuideRequestFactory)

使用 RequestFactory，您可以在客户端（andorid 或 gwt-client）上使用代理对象并将其发送回服务器。

检查这个例子： [http ://code.google.com/p/cloud-tasks-io/source/browse/trunk/CloudTasks-AppEngine/](http://code.google.com/p/cloud-tasks-io/source/browse/trunk/CloudTasks-AppEngine/)

这是一个通过 C2dm 上的 RequestFactory 注册的 Andorid 应用程序（推送服务）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T17:19:22.117

您还可以制作一个简单的 HttpServlet。以下示例返回数据存储区中所有新闻项目的 JSON 字符串...

```
public class JsonNews extends HttpServlet {

@Override
  protected void doPost(HttpServletRequest req, HttpServletResponse resp)
      throws ServletException, IOException {

        PrintWriter out = resp.getWriter();
        resp.setContentType("application/json");

        //out.write("{news}");

        PersistenceManager pm = Pmf.getPersistenceManager();
        Query q = pm.newQuery(News.class);

        List<News> news = null;
        String retStr="";
        try {
            news = (List<News>) q.execute();
            Gson g = new Gson();
            //retStr = g.toJson(news);
            retStr = "{\"success\": true, \"news\": " + new Gson().toJson(news,new TypeToken<List<News>>() {}.getType()) + '}';

             out.write( retStr);
        } catch (JDOException e) {
            e.printStackTrace();

        } finally {
            q.closeAll();
            pm.close();

        }

  }
} 
```

单例 Pmf 级

```
public final class Pmf  {
private static final PersistenceManagerFactory pmfInstance =
    JDOHelper.getPersistenceManagerFactory("transactions-optional");

private Pmf() {}

public static PersistenceManager getPersistenceManager() {

    PersistenceManager pm = pmfInstance.getPersistenceManager();

    return pm;

}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T10:32:38.093

这个问题解决了我的确切问题：

[如何使用 android 发送一个 json 对象-over-request-with-android](https://stackoverflow.com/questions/3027066/how-to-send-a-json-object-over-request-with-android)

请参阅 dmazzoni 和 primpop 的答案。

# search - 我如何更改 Magento Go 中搜索页面的布局

> ID：10480137
> 
> 赞同：0
> 
> 时间：2012-05-07T10:02:19.913
> 
> 标签：search, magento, layout

在“Magento go”中，我的搜索页面显示在带有右栏的 2 列中，但我希望搜索页面显示在 1 列中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T10:12:57.247

> **请忽略 Magento Go**我添加了这个实际上不适用于 Magento Go 的答案。道歉 - 留在这里，以防有人想在 Magento CE 安装上这样做。如果您希望我删除它，请发表评论。

我不确定 Magento Go 中是否相同。但是在 Magento CE 中，您将更改布局文件`catalogsearch.xml`并更改

```
<catalogsearch_result_index translate="label">
    <label>Quick Search Form</label>
    <reference name="root">
        <action method="setTemplate"><template>page/2columns-right.phtml</template></action>
    </reference> 
```

至

```
<catalogsearch_result_index translate="label">
    <label>Quick Search Form</label>
    <reference name="root">
        <action method="setTemplate"><template>page/1column.phtml</template></action>
    </reference> 
```

# .net - 防止单个可执行文件的多个进程实例

> ID：10480141
> 
> 赞同：3
> 
> 时间：2012-05-07T10:02:33.250
> 
> 标签：.net, windows, process, multiple-instances

我正在使用带有 C# 的 .NET。

我想阻止同一可执行文件的两个实例同时运行，但我不想阻止从另一个文件夹运行的同一进程。

例如，我有一个位于两个不同位置的可执行文件：

*   C:\MyProject\Master\Program.exe

*   C:\MyProject\Slave\Program.exe

这些是相同的 .exe 文件，但位于两个不同的位置。

我想允许一个从主文件夹运行的 Program.exe 实例和一个从从文件夹运行的实例，但没有两个实例。

我试图通过检查具有相同名称（Process.GetProcessesByName）的进程数来做到这一点，但是我无法区分两者。

我发现最接近的是从流程中获取模块。

列表中的第一个是 exe 的 ProcessModule。但我不确定这是否永远是列表中的第一个。对此有任何保证，还是对解释的问题有更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:54:56.657

我会使用全局互斥锁而不是依赖程序集名称。例如，另一个应用程序可能正在使用相同的文件名。

参见例如这个答案： [Run single instance of an application using Mutex](https://stackoverflow.com/questions/819773/run-single-instance-of-an-application-using-mutex)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T10:17:12.350

一种方法是，通过另一项服务，可能会执行以下操作：

```
Process[] processes = Process.GetProcessesByName("Program"); 
```

将为您提供程序的所有活动进程。

然后您可以从中获取目录：

```
string fullPath = process.MainModule.FileName; 
```

比较所有实例的目录，如果两个具有相同的文件夹，则关闭其中一个。

# json - json字符串解码遇到无效转义

> ID：10480148
> 
> 赞同：7
> 
> 时间：2012-05-07T10:02:42.927
> 
> 标签：json

我正在使用`simplejson`解码以下 json 字符串。

这是一个用 Python 编写的演示：

```
from simplejson import loads

loads("""["\s"]""") 
```

解码器将抛出：

```
JSONDecodeError: Invalid \escape 
```

如何应对？预期的输出是：

```
["\\s"] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T13:22:46.887

"\s" 不是有效的 JSON 转义字符串。

根据[json.org](http://www.json.org/)，只有以下转义是有效的

*   \"
*   \\
*   /
*   \b
*   \F
*   \n
*   \r
*   \t
*   \u*四位十六进制数字*

# c++ - 我们是否需要 volatile 关键字和互斥锁一起来确保线程安全？

> ID：10480153
> 
> 赞同：1
> 
> 时间：2012-05-07T10:03:00.833
> 
> 标签：c++, multithreading, thread-safety, volatile

为临界区设置互斥锁意味着多个线程将无法破坏临界区，但是为什么我们需要**volatile**变量来处理同一件事呢？

如果下面的代码中没有**volatile**字会发生什么？

![在此处输入图像描述](../Images/acf518d41f00e80b3efdf22fadbce969.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T10:13:14.370

该`volatile`关键字不提供任何锁定。

其目的是防止编译器优化会“缓存”该值，以便线程可能正在检查过时的数据。

Volatile 在语言之间存在细微差别，并且总是有点问题。仔细阅读您的规格并遵循可信赖的示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T10:13:55.433

volatile 关键字使双重检查锁定在 1.5 和更高版本的 JVM 上正常工作，请参阅该页面[的新 Java 内存模型](http://www.cs.umd.edu/~pugh/java/memoryModel/DoubleCheckedLocking.html)部分。

如果没有 volatile 关键字，则可能会在 1.5 和更高版本的 JVM 上创建两个实例。在 1.5 之前的 JVM 上，双重检查锁定被认为是完全损坏的，不应使用。

然而，在初始化单例的情况下，使用双重检查锁定通常被认为是不值得的，简单的静态初始化就足够了。如果您绝对知道单例将在某个时候由您的应用程序初始化，那么惰性实例化是多余的。去吧：

```
private static Singleton s_instance = new Singleton() 
```

或任何 C++ 等价物。好又安全！

由于这个问题最终导致了 Java 和 C++ 的混乱，请注意，我指的是上面的 Java。在 C++ 中没有 synchronized 关键字，并且 volatile 不适用于并发。

# c - 如何连接指针数组？

> ID：10480155
> 
> 赞同：0
> 
> 时间：2012-05-07T10:03:28.897
> 
> 标签：c, arrays, pointers

> **可能重复：**
> [在 C 中连接 char 数组](https://stackoverflow.com/questions/2218290/concatenate-char-array-in-c)

如何连接：

```
char *a="abcd";
char *b="1234"; 
```

使用 strcat()？当用户输入 *a 和 *b 时回答相同？

**编辑**错过了这一点：不使用另一个数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T13:46:59.317

您不能随意使用您已经初始化的字符串文字 - 它们位于内存中的某个位置并且不能/不应该被重写。

如果您不想要另一个静态定义的数组但不介意动态分配，下面的代码可能会完成您正在寻找的内容：

```
char *a = "abcd";
char *b = "1234";
char *out;

if((out = (char *)malloc(strlen(a) + strlen(b) + 1)) != NULL)
{
   strcpy(out, a);
   strcat(out, b);
}
else
{
   //you don't have enough memory, handle it
} 
```

如果这仍然不可接受，请考虑使用不同的方法来初始化字符串文字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T10:11:07.707

你需要创建一个目标位置，有足够的空间来容纳你想要连接的所有东西。

```
char newchar[50];

strcpy(newchar, a); //per the comment
strcat(newchar, b); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T12:45:26.623

> 如何在不使用另一个数组的情况下连接

是不可能的。a 和 b 都只是指向驻留在 ROM 中的字符串文字的指针。您尚未分配任何可以读取数据的内存。

你可以做的是：

```
char a[9] = "abcd";
const char* b = "1234";
strcat(a, b); 
```

在这里，您将“a”静态分配为 RAM 中的 9 个字节，足以容纳 8 个符号 + 1 个字节用于字符串终止。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T10:10:48.957

编辑：以下答案适用于编辑问题之前的 OP 问题。

你不能那样做。但是您可以将字符串连接成一个字符数组。您必须确保字符数组有足够的空间用于连接字符串。这是一个例子：

```
char *a = "abcd";
char *b = "1234";
char arr[10] = {0};

strcat(arr, a);
strcat(arr, b);
printf("%s\n", arr); 
```

注意：为什么 arr[] 需要初始化为 0 是你的功课。:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T10:16:20.063

复制多个字符串的典型方法是创建一个足够大的缓冲区，将第一个字符串复制出来，然后将剩余的字符串一个接一个地连接起来。然而，字符串操作经常充满错误——安全漏洞——你应该格外小心。

我建议你阅读这篇文章：[strlcpy 和 strlcat - 一致、安全、字符串复制和连接](http://www.gratisoft.us/todd/papers/strlcpy.html)

编辑关于 OP 的编辑：

> 不使用另一个数组

您没有任何数组开始。您有指向只读字符串文字的 char 类型的指针。您不能修改任何一个字符串。这样做会调用未定义的行为。但是，您可以读取这些字符串并将其复制到其他字符串（您拥有的内存——在堆栈上或堆上——因此可以修改）。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-05-07T10:59:32.830

我认为以下功能应该可以工作

```
void stcat (char *str1, char *str2)
{
    int i = 0,len = 0;
    while(*(str1+len)!='\0')
    len++;
       while(*(str2+i)!='\0')
   {
           *(str1+len) = *(str2+i);
           i++;
           len++;
   }
   *(str1+len) = '\0';
} 
```

# javascript - 如何使用 Jquery 从动态创建的文本框中检索值

> ID：10480156
> 
> 赞同：1
> 
> 时间：2012-05-07T10:03:39.230
> 
> 标签：javascript, jquery, css

我的一种形式允许使用 Jquery 添加多个元素。下面的 HTML 显示了演示内容，

```
<form name="my-location-frm">
    <div class="address">
        <input type="text" name="house-name" value='house1'>
        <input type="text" name="street-no" value='street1'>
    </div>

    <div class="address">
        <input type="text" name="house-name" value='house2'>
        <input type="text" name="street-no" value='street2'>
    </div>

    <div class="address">
        <input type="text" name="house-name" value='house3'>
        <input type="text" name="street-no" value='street3'>
    </div>

    <input type="submit">
</form> 
```

这里`class="address"`wrapper 会重复很多次。如何使用 Jquery 检索每个元素（房屋名称、街道编号）值

尝试如下，

```
$.each($(".address"), function(key,value) { 

     hn = $(value).children("input[name=house-name]").val();
     console.log(n);
} 
```

但是失败了:(

预期的 Javascript 输出，

```
house1,street1
house2,street2
house3,street3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T10:05:34.340

请改用此变体：

```
$(".address").each(function() {
    var house = $(this).children("input[name='house-name']").val();
    var street = $(this).children("input[name='street-no']").val();
    console.log(house + "," + street);
}); 
```

或者（如果需要）您可以收集数组中的所有输入值：

```
$(".address").each(function() {
    var values = [];
    $(this).children("input").each(function() {
        values.push(this.value);
    });
    console.log(values.join(","));
}); 
```

**演示：http:** [//jsfiddle.net/PtNm5/](http://jsfiddle.net/PtNm5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T10:05:20.383

```
$.each($(".address"), function(key,value) { 
     var hn = $(this).children('input[name="house-name"]').val(),
         sn = $(this).children('input[name="street-no"]').val();
     console.log(hn.concat(', ' + sn));
}); 
```

或者

```
 $.each($(".address"), function(key,value) { 
         var hn = $('input[name="house-name"]', this).val(),
             sn = $('input[name="street-no"]', this).val();
         console.log(hn.concat(', ' + sn));
    }); 
```

或者

```
$.each($('.address'), function() {
  var output = $('input[name="house-name"]', this).val().concat(', ' + $('input[name="street-no"]', this).val());
  console.log(output);
}); 
```

# asp.net-mvc-2 - 如何设置 MVC textAreaFor<> 框的默认值？

> ID：10480157
> 
> 赞同：0
> 
> 时间：2012-05-07T10:03:43.347
> 
> 标签：asp.net-mvc-2, textarea, default-value

好的，这是我的情况，已经到了这个……戏剧性的停顿……

我的 MVC 视图中有以下 TextAreaFor<> 框：

```
 <div class="editor-label">
            <%: Html.LabelFor(model => model.Monday) %>
        </div>
        <div class="editor-field">
            <%: Html.TextAreaFor(model => model.Wednesday, 6, 40, new { })%>
            <%: Html.ValidationMessageFor(model => model.Monday) %>
        </div>

        <div class="editor-label">
            <%: Html.LabelFor(model => model.Wednesday) %>
        </div>
        <div class="editor-field">
            <%: Html.TextAreaFor(model => model.Wednesday, 6, 40, new {})%>
            <%: Html.ValidationMessageFor(model => model.Wednesday) %>
        </div>

        <div class="editor-label">
            <%: Html.LabelFor(model => model.Friday) %>
        </div>
        <div class="editor-field">
            <%: Html.TextAreaFor(model => model.Friday, 6, 40, new {}) %>
            <%: Html.ValidationMessageFor(model => model.Friday) %>
        </div> 
```

对于那些有很多经验的人，你可能已经注意到我使用强类型视图来减少开发时间，所以这里有很多默认项。

我需要知道，如何设置 TextAreaFor<> 框的默认值？IE，我可能想要其中的文本作为模板。用户添加到这些 textAreas 的任何内容都将存储在数据库中（后端已经完成且功能齐全）。正如文章[ASP.NET MVC - How can I set the Default Value in a Strongly Typed TextArea?](https://stackoverflow.com/questions/3655033/asp-net-mvc-how-can-i-set-the-default-value-in-a-strongly-typed-textarea) ，我不确定我是否可以使用这种方法，因为我不确定模型变量是否会被发送回我的控制器。

另一个快速问题（QuestionCeption）如果我将这些 textAreas 中的数据保存到数据库中（使用 SQL Server Express 2008），它会保留换行符吗？

这是我需要的默认值示例。

```
Traditional:
Healthy Lifestyle:
Chill out:
Vegetarian:
Soup:
Sandwich:
No thanks. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T10:06:24.563

您可以在呈现此视图的控制器操作中执行此操作：

```
public ActionResult Index()
{
    MyViewModel model = ...
    model.Friday = "some default value";
    return View(model);
} 
```

并且您将有一个相应的 POST 操作来检索值：

```
[HttpPost]
public ActionResult Index(MyViewModel model)
{
    // model.Friday will contain the text entered by the user in the corresponding textarea
    // here you could store for example the values in the database
    ...
} 
```

> 另一个快速问题（QuestionCeption）如果我将这些 textAreas 中的数据保存到数据库中（使用 SQL Server Express 2008），它会保留换行符吗？

是的，您只需将文本按原样保存在数据库中，无需进行任何转换。当您稍后在 textarea 中显示文本时，这将起作用，但是如果您想在例如 a 中显示它，`<div>`则必须对其进行 HTML 编码并将新行替换为`<br/>`. 例如，您可以为此作业编写[自定义 HTML 帮助程序。](https://stackoverflow.com/a/7353519/29407)

# javascript - 小胡子模板对象

> ID：10480158
> 
> 赞同：1
> 
> 时间：2012-05-07T10:03:47.010
> 
> 标签：javascript, mustache

我想用 mustache 模板化一些数据。模板的数据如下：

```
var data = {
            "lib" : "L1",
            "group" : 
               {"echelle" : "Bassin"}
           } 
```

我尝试使用小胡子：

```
var templateResult = "<tr><td><p>{{lib}}</p></td><td><p>{{>group}}</p></td></tr>";
var partials = {"group" : "{{#group}}<td><p>{{echelle}}</p></td>{{/group}}"}

$("#result_indic_table").append(Mustache.render(templateResult, data, partials)); 
```

它只是不起作用......我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:29:27.320

我已经解决了我的问题......数据不像我想的那样：

```
data = {
            "indicateur" : {
              "lib" : "L1",
              "group" : 
                 {"echelle" : "Bassin"}
            }
        } 
```

所以模板应该是这样的：

```
var templateResult = "{{#indicateur}}<tr><td><p>{{lib}}</p></td><td><p>{{>group}}</p></td></tr>{{/indicateur}}";
var partials = {"group" : "{{#group}}<td><p>{{echelle}}</p></td>{{/group}}"} 
```

它已经完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T10:06:09.337

mustachejs 的问题在于它是什么。我宁愿去`Swig`或`Dust.js`

# java - 用单引号而不是双引号来编组一个属性？

> ID：10480167
> 
> 赞同：1
> 
> 时间：2012-05-07T10:04:10.037
> 
> 标签：java, xml, jaxb

我正在使用 JAXB 将我的一个实体编组为：

```
<User id="blabla">asd,123</User> 
```

在接收端，有一些遗留代码不接受带双引号的 xml 属性，只接受单引号。所以它无法解析我的xml。

是否可以将我的实体编组为：

```
<User id='blabla'>asd,123</User> 
```

属性`id`用单引号而不是双引号括起来？

# iphone - 如何从 UIImagePickerController 中选择任何视频或电影文件

> ID：10480170
> 
> 赞同：32
> 
> 时间：2012-05-07T10:04:23.907
> 
> 标签：iphone, uiimagepickercontroller

在我的应用程序中，我需要选择任何视频文件并显示应用程序中视频文件的 url。

```
-(void)viewDidLoad{

    [super viewDidLoad];

    self.imgPicker = [[UIImagePickerController alloc] init];
    self.imgPicker.delegate = self;
    self.imgPicker.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;
    self.imgPicker.mediaTypes = [NSArray arrayWithObjects:(NSString *)kUTTypeMovie, (NSString *)kUTTypeImage, nil];
    self.imgPicker.allowsEditing = NO;

    [self presentModalViewController:self.imgPicker animated:YES];
}

-(void)imagePickerControllerDidCancel:(UIImagePickerController *)picker{

    [picker dismissModalViewControllerAnimated:YES];
}

-(void)imagePickerController:(UIImagePickerController *)picker
      didFinishPickingImage : (UIImage *)image
                 editingInfo:(NSDictionary *)editingInfo{

}

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info{

    value = 1;

    IMAGE_COUNTER = IMAGE_COUNTER + 1;

    NSString* mediaType = [info objectForKey:UIImagePickerControllerMediaType]; 
    if ( [mediaType isEqualToString:@"public.movie" ])
    {
        NSLog(@"Picked a movie at URL %@",  [info objectForKey:UIImagePickerControllerMediaURL]);
        NSURL *url =  [info objectForKey:UIImagePickerControllerMediaURL];
        NSLog(@"> %@", [url absoluteString]); 
    } 

    else
    {
        UIImage *image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];

        NSData* imageData = UIImageJPEGRepresentation(image, 1.0);

        NSString* incrementedImgStr = [NSString stringWithFormat: @"UserCustomPotraitPic%d.jpg", IMAGE_COUNTER];

        NSArray* paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString* documentsDirectory = [paths objectAtIndex:0];

        NSString* fullPathToFile2 = [documentsDirectory stringByAppendingPathComponent:incrementedImgStr];
        [imageData writeToFile:fullPathToFile2 atomically:NO];
    }
} 
```

我已经使用上面的代码显示图像和视频，一切都很好，但是当我选择任何视频文件时，它没有来到 UIImagePickerController 委托方法，视频文件直接播放，我不想播放任何视频文件，当我选择任何视频文件时，它应该出现在其委托属性中

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-05-10T10:05:24.737

从 iPhone 库中挑选视频不适用于 iOS 模拟器。在真正的 iPhone 上试用。

这是从我在项目中使用的 iOS 照片库中挑选视频的代码。只需将视频方法从选择器添加到您想要的按钮。

```
- (void)video {
    UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
    imagePicker.delegate = self;
    imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
    imagePicker.mediaTypes = [[NSArray alloc] initWithObjects:(NSString *)kUTTypeMovie,      nil];

    [self presentModalViewController:imagePicker animated:YES];
 }

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    NSString *mediaType = [info objectForKey: UIImagePickerControllerMediaType];

    if (CFStringCompare ((__bridge CFStringRef) mediaType, kUTTypeMovie, 0) == kCFCompareEqualTo) {
        NSURL *videoUrl=(NSURL*)[info objectForKey:UIImagePickerControllerMediaURL];
        NSString *moviePath = [videoUrl path];

        if (UIVideoAtPathIsCompatibleWithSavedPhotosAlbum (moviePath)) {
            UISaveVideoAtPathToSavedPhotosAlbum (moviePath, nil, nil, nil);
        }
    }

    [self dismissModalViewControllerAnimated:YES];
    [picker release];
} 
```

该字符串 `moviepath` 为您提供所选视频的路径，可用于对该视频执行任何所需的操作。

不要忘记将`MobileCoreServices.framework`框架添加到您的项目中！然后像这样导入它：

```
#import <MobileCoreServices/UTCoreTypes.h> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-07T10:20:49.043

试试这个：-

```
 UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
    imagePicker.delegate = self;
    imagePicker.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;
    imagePicker.mediaTypes = [NSArray arrayWithObject:(NSString *)kUTTypeMovie];
    NSArray *sourceTypes = [UIImagePickerController availableMediaTypesForSourceType:imagePicker.sourceType];
    if (![sourceTypes containsObject:(NSString *)kUTTypeMovie ])
    {
        //NSLog(@"no video");
    }

    [self presentModalViewController:imagePicker animated:YES]; 
```

在委托方法中： -

```
 - (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
    {
            NSString *type = [info objectForKey:UIImagePickerControllerMediaType];
            //NSLog(@"type=%@",type);
            if ([type isEqualToString:(NSString *)kUTTypeVideo] || 
                [type isEqualToString:(NSString *)kUTTypeMovie])
            {// movie != video
                NSURL *urlvideo = [info objectForKey:UIImagePickerControllerMediaURL];
}
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-28T10:36:27.717

斯威夫特 3 更新：

```
func galleryVideo() 
{        
    if UIImagePickerController.isSourceTypeAvailable(UIImagePickerControllerSourceType.savedPhotosAlbum) {

        let videoPicker = UIImagePickerController()
        videoPicker.delegate = self
        videoPicker.sourceType = .photoLibrary
        videoPicker.mediaTypes = [kUTTypeMovie as String]
        self.present(videoPicker, animated: true, completion: nil)
    }
} 
```

导入**导入 MobileCoreServices**并添加委托**UIImagePickerControllerDelegate**和**UINavigationControllerDelegate**。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-15T17:58:59.530

@Dinesh Kaushik 的代码有助于解决我遇到的同样问题。

我变了 ：

```
 //NSArray * availableMediaTypes = [UIImagePickerController availableMediaTypesForSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
        //imagePickerController.mediaTypes = availableMediaTypes;

        imagePickerController.mediaTypes = [[NSArray alloc] initWithObjects:(NSString *)kUTTypeMovie,      nil]; 
```

只有这样，我才能看到视频并选择它。奇怪的

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2015-03-26T15:10:55.557

不要使用 UIImagePicker，只需使用资产库，实现自定义视频选择器，直接访问选定的视频文件，保存视频文件并根据需要压缩文件..

# java - java中不可修改列表的类型是什么

> ID：10480173
> 
> 赞同：6
> 
> 时间：2012-05-07T10:04:41.660
> 
> 标签：java, collections

java中不可修改的列表可以创建为：

```
List<String> unModifiableStringList = Collections.unmodifiableList(myActualModifiableList); 
```

这很好，但是上述函数返回的列表的实际运行时类型是什么？我们如何访问该类？甚至可能吗？

**更新：**实际上我需要在编译时知道一个不可修改的列表正在被修改，因为我必须处理很多列表，其中一些是可修改的，而另一些则不是。所以跟踪起来很麻烦？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T10:50:48.797

> 实际上我需要在编译时知道一个不可修改的列表正在被修改。

这是不可能的。

或者至少，不创建完全不同的集合接口/类层次结构是不可能的。这是一个坏主意，因为没有任何设计用于使用常规集合的方法可以使用它。

我想有可能编写一个静态代码分析器来检测这种事情......在*某些*情况下......但这并不是严格意义上的“编译时间”。此外，我不知道任何现有的“开箱即用”的静态代码分析器。

* * *

> 我想知道他们这样做是否有原因。

好吧，您*可能*执行此操作的所有方法都没有真正起作用。

替代#1：

```
 public interface UnmodifiableList<T> {
     public T get(int pos);
     ....
 }

 public interface List<T> extends UnmodifiableList<T> {
     public void add(T elem);
     ....
 } 
```

虽然静态类型可以阻止我们在需要可修改列表的情况下使用不可修改列表，但反之则不然。每个 List 也是一个 UnmodifiableList ......这没有任何意义。

备选方案 2：

```
 public interface List <T> {
     public T get(int pos);
     public void add(T elem);
     ....
 }

 public interface UnmodifiableList<T> {
     // A marker interface
 } 
```

现在静态类型可以阻止我们在需要不可修改列表的情况下使用可修改列表，但反之则不行。（这符合您的要求......）此外，实现的类`UnmodifiableList`仍然继承该`add`操作，并且没有什么可以阻止应用程序尝试调用它。

简而言之，静态类型系统无法充分处理这种限制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T10:08:56.637

你试过`unModifiableStringList.getClass().getName()`吗？

对我来说，它给了

```
java.util.Collections$UnmodifiableRandomAccessList 
```

从源代码中可以看出，它是一个包访问静态内部类`Collections`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-07T10:12:10.430

这是

```
static class UnmodifiableList<E> extends UnmodifiableCollection<E>
                      implements List<E>

static class UnmodifiableRandomAccessList<E> extends UnmodifiableList<E>
                                      implements RandomAccess

static class UnmodifiableCollection<E> implements Collection<E>, Serializable 
```

它是 的内部类`Collections`，因为`Collections`它是不可实例化的，并且是具有包可见性的内部类，所以你**无法**访问该类，它是隐藏在 OOP 中的实现。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-07T10:09:12.920

请参阅： http: [//grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/Collections.java#Collections.unmodifiableList%28java.util.List%29](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/Collections.java#Collections.unmodifiableList%28java.util.List%29)

这是一个内部类`Collections`：

```
static class UnmodifiableList<E> extends UnmodifiableCollection<E>
                                 implements List<E> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T10:15:43.900

您的声明清楚地表明它仍然引用 List，但它禁止修改列表。

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collections.html#unmodifiableList(java.util.List](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collections.html#unmodifiableList(java.util.List) )

如果您共享不可修改的列表引用，请确保没有人更改它并允许只读操作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-07T10:09:43.220

调试显示运行时类型是`Collections.UnmodifiableRandomAccessList`，所以它是内部类。代码分析也表明它可能是`Collections.UnmodifiableList`.

你不应该尝试访问这个类，它应该是不可变的。尝试使用通用接口，在这种情况下 = `Collection`。

# ruby-on-rails - 带有链接的条款和条件国际化

> ID：10480176
> 
> 赞同：2
> 
> 时间：2012-05-07T10:05:06.340
> 
> 标签：ruby-on-rails, internationalization, conditional-statements

大家好，我有一个关于内部化和条款和条件的问题：

在我看来，我有这个：

```
I18n.t("user.registration.form.accept_terms_conditions", :conditions => link_to(I18n.t("user.registration.form.conditions"), page_url('privacy_policy')), :terms => link_to(I18n.t("user.registration.form.terms"), page_url('terms_and_conditions'))) 
```

在我的 it.yml 我有这个：

```
accept_terms_conditions: "Accetto le %{conditions} e i %{terms}"
  conditions: "condizioni sulla privacy"
  terms: "termini di utilizzo" 
```

问题是结果不是我所期望的，弄乱了病毒。我想要的就是这个：

> Accetto le **condizioni sulla privacy** ei **termini di utilizzo**

我该怎么做？非常感谢！马西莫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:44:06.080

您的 YAML 存在命名空间问题。在这种情况下`accept_terms_conditions`是一个命名空间，因此它不能直接包含内容 - 它需要一个子命名空间来包含内容。

例如，您可以像这样构建您的翻译：

```
accept_terms_conditions:
  text: "Accetto le %{conditions} e i %{terms}"
  conditions: "condizioni sulla privacy"
  terms: "termini di utilizzo" 
```

并且`.t`您认为的调用将如下所示：

```
I18n.t("accept_terms_conditions.text",
  :conditions => link_to(I18n.t("accept_terms_conditions.conditions"), page_url('privacy_policy')),
  :terms => link_to(I18n.t("accept_terms_conditions.terms"), page_url('terms_and_conditions'))) 
```

# java - 如何诊断在脚本语言中发生的 Java ClassNotFound 异常而不是 Java 代码

> ID：10480179
> 
> 赞同：0
> 
> 时间：2012-05-07T10:05:09.150
> 
> 标签：java, clojure, jodatime, jython

我正在尝试在 Windows 上使用 Java 中的 Joda Time。我已经下载了 Joda Time 1.2 并将 JAR 放在我的 CLASSPATH 中：

```
PS D:\Java\Jars> $env:CLASSPATH
.;C:\Program Files\Java\jre6\lib\ext\QTJava.zip;D:\Java\Jars\joda-time-2.1.jar 
```

以下 Java 代码完美运行：

```
import org.joda.time.*;

class Foo {
    public static void main (String[] args) {
        System.out.println("Hello, world");
        DateTime d = new DateTime();
        DateTime b = new DateTime(1981,12,25,0,0);
        Period p = new Period(b,d);
        System.out.println(p.toString());
    }
} 
```

但是，当我尝试从脚本语言导入 joda time 时，我收到 ClassNotFound 错误。

杰通：

```
PS D:\Java\Jars> java -jar .\jython.jar
Jython 2.5.2 (Release_2_5_2:7206, Mar 2 2011, 23:12:06)
[Java HotSpot(TM) Client VM (Sun Microsystems Inc.)] on java1.6.0_31
Type "help", "copyright", "credits" or "license" for more information.
>>> from org.joda.time import DateTime
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named joda
>>> import os
>>> os.getenv("CLASSPATH")
'.;C:\\Program Files\\Java\\jre6\\lib\\ext\\QTJava.zip;D:\\Java\\Jars\\joda-time-2.1.jar' 
```

Clojure：

```
PS D:\Java\Jars> java -jar .\clojure-1.4.0.jar
Clojure 1.4.0
user=> (import (org.joda.time DateTime Period))
ClassNotFoundException org.joda.time.DateTime  java.net.URLClassLoader$1.run (:-1) 
```

我如何诊断这里出了什么问题？大概有一些特定于脚本环境的东西导致了这个问题。我知道 Python，但我对 Jython 的 Java 互操作方面不是很熟悉。除了设置上述测试之外，我对 Clojure 知之甚少。

Jython 中的类路径看起来不错，如图所示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:34:11.430

您正在直接从它们的 JAR 中运行这两个程序：

```
java -jar archive.jar 
```

其中不使用系统类路径。可执行 JAR 必须与它的所有依赖项捆绑在一起。出于测试目的尝试这个简单的替代方案：

```
java -cp "D:\Java\Jars\joda-time-2.1.jar;D:\Java\Jars\clojure-1.4.0.jar" clojure.main 
```

它将运行 Clojure 命令行评估器，其中包括 Joda Time 库。Jython 也应该可以使用类似的东西。

# java - 如何在没有语法类型的情况下使用 java 应用程序在 cacls 中挂起用户

> ID：10480180
> 
> 赞同：0
> 
> 时间：2012-05-07T10:05:19.397
> 
> 标签：java, file-permissions, cacls

我想问你。我已经在我的项目文件中尝试了这些语法，并且它有效。但是，我想把这些程序改得更强大。

这是我的语法：

```
public class Main {

public static void main(String[] args) throws InterruptedException, IOException {

    frame f = new frame();
    f.show();

    File f = new File("D:/lala/coba");

    //System.out.println("insert the username:");
   // hide(f);
}

public static  void hide(File src) throws InterruptedException, IOException {
// win32 command line variant
ProcessPerm p = Runtime.getRuntime().exec("cacls " + src.getPath() + " /E /C /P DINA:n");
p.waitFor(); }} 
```

如果我想在不写语法的情况下更改用户“DINA”，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:12:02.300

像 java Main scott 这样调用 java 应用程序

使用以下代码，用户将是 scott

```
public class Main {

public static void main(String[] args) throws InterruptedException, IOException {

    frame f = new frame();
    f.show();

    File f = new File("D:/lala/coba");

    //System.out.println("insert the username:");
   hide(f, args[0]);
}

public static  void hide(File src, String user) throws InterruptedException, IOException {
// win32 command line variant
ProcessPerm p = Runtime.getRuntime().exec("cacls " + src.getPath() + " /E /C /P " + user + ":n");
p.waitFor(); }} 
```

# sql - NHibernate 使用现有数据库而不使用设计器创建映射

> ID：10480182
> 
> 赞同：0
> 
> 时间：2012-05-07T10:05:22.063
> 
> 标签：sql, asp.net-mvc, asp.net-mvc-3, nhibernate, nhibernate-mapping

首先 - 我是 NHibernate 的新手。

我正在为客户端使用 C# 和 MVC3 在 VS 2010 中创建应用程序。客户端有一个包含数百个表的庞大数据库，应用程序只需要从其中几个表中读取数据。

当客户端在网络服务器上安装应用程序时，他/她应该指定到数据库的连接字符串，并且应该从中读取表数据的名称（在 web.config 或类似文件中），仅此而已。应用程序将从中读取数据的表的列是已知的（基本上它只是 id 和一些其他字段），但不是表的名称是未知的（表的名称的格式为“CompanynameTablename”）并且应该由客户指定。

NHibernate 甚至可以做到这一点吗？如果是这样 - 我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T10:21:10.870

是的，这是可能的，如果我对你的问题没有误解，你必须创建一个高度可配置的映射：为了做到这一点，你可以更喜欢通过代码解决方案而不是标准 hbm xml 文件的 N [H 3.x 映射。](https://stackoverflow.com/questions/5777898/docs-examples-for-nhibernate-3-2-mapping-by-code)有了这个，您可以将表的名称放入 cfg 文件中，并完全用代码编写映射策略。无论如何，如果您是使用 NH 的新手，您可能会在实施最终解决方案之前练习一些更标准的解决方案来训练自己。无论如何要小心，NH 是一个 OR/M，只要将它用于映射关联和集合、标识映射、自动持久性等，您就会获得好处。还可以考虑使用 Micro Orm，因为[Dapper](http://code.google.com/p/dapper-dot-net/)可能会更好地帮助您。

# android - 如何共同发送列表项和微调器和复选框的 HttpPost

> ID：10480183
> 
> 赞同：1
> 
> 时间：2012-05-07T10:05:33.923
> 
> 标签：android, listview, checkbox, http-post, spinner

我在一个布局中有一个 ListView 、复选框和微调器，在不同的布局上，我通过从 xml 解析它来调用 listview 项。如何使用 http post 将复选框、微调器和列表视图项目名称的值一起发送我想要详细代码进行解释。

这是我已解析为 xml 并将其声明为 listview 的活动

```
public class Hut extends ListActivity {

static final String URL = "http://192.168.1.112/andro/index.php/androctrl/provider_detail/";

    // XML node keys
    static final String KEY_ITEM = "element"; // parent node
    static final String KEY_ID = "foodjoint_id";
    static final String KEY_NAME = "foodjoint_name";
    static final String KEY_LAT = "foodjoint_latitude";
    static final String KEY_DESC = "foodjoint_description";

     @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.pizzahut);

            ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

            XMLParser parser = new XMLParser();
            String xml = parser.getXmlFromUrl(URL); // getting XML
            Document doc = parser.getDomElement(xml); // getting DOM element

            NodeList nl = doc.getElementsByTagName(KEY_ITEM);
            // looping through all item nodes <item>
            for (int i = 0; i < nl.getLength(); i++) {
                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();
                Element e = (Element) nl.item(i);
                // adding each child node to HashMap key => value
                map.put(KEY_ID, parser.getValue(e, KEY_ID));
                map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
                map.put(KEY_LAT, "Rs." + parser.getValue(e, KEY_LAT));
                map.put(KEY_DESC, parser.getValue(e, KEY_DESC));

                // adding HashList to ArrayList
                menuItems.add(map);
            }

            // Adding menuItems to ListView
            ListAdapter adapter = new SimpleAdapter(this, menuItems,
                    R.layout.list_item,
                    new String[] { KEY_NAME, KEY_DESC, KEY_LAT }, new int[] {
                            R.id.name, R.id.desciption, R.id.cost });

            setListAdapter(adapter);

            // selecting single ListView item
            ListView lv = getListView();

     }
     //the continue button
     public void onClick(View v)
        {
            Intent personal = new Intent(this, UserPersonal.class);
            startActivity(personal);
        } 
```

这是我的 Pizzahut.xml，这只是我的列表视图和提交按钮

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/white" >
 <RelativeLayout
        android:id="@+id/RelativeLayout1"
        android:layout_width="181dp"
        android:layout_height="504dp"
        android:background="@color/white"
        android:gravity="fill"
        android:orientation="vertical" >
  <ListView
            android:id="@android:id/list"
            android:layout_width="216dp"
            android:layout_height="483dp"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:layout_alignParentRight="true" >

        </ListView>

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentRight="true"
            android:text="@string/picktime" />

    </RelativeLayout>

</ScrollView> 
```

这是我的 list_item.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">  

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="483dp"
        android:orientation="vertical" >

        <!-- Name Label -->

        <TextView
            android:id="@+id/name"
            android:layout_width="104dp"
            android:layout_height="wrap_content"
            android:paddingBottom="2dip"
            android:paddingTop="6dip"
            android:textColor="#dc6800"
            android:textSize="16sp"
            android:textStyle="bold" />

        <!-- Description label -->
        <TextView
            android:id="@+id/desciption"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textColor="#acacac"
            android:paddingBottom="2dip">
        </TextView>
        <!-- Linear layout for cost and price Cost: Rs.100 -->
        <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal">
        <!-- Cost Label -->
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="#5d5d5d"
            android:gravity="left"
            android:textStyle="bold"
            android:text="Cost: " >
        </TextView>
        <!-- Price Label -->
        <TextView
            android:id="@+id/cost"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="#acacac" 
            android:textStyle="bold"
            android:gravity="left">
        </TextView>

        </LinearLayout>

        <CheckBox
            android:id="@+id/checkBox1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="CheckBox" />

        <Spinner
            android:id="@+id/spinner1"
            android:layout_width="118dp"
            android:layout_height="wrap_content" />

    </LinearLayout>

</LinearLayout> 
```

每当我点击按钮检查 [ Pizzahut.xml 和 PizzaHut.java]

我想 HTTPPost 菜单项名称 [来自 xmlparsing ]，复选框值（如果选中），微调器值一起。请给我完整的解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T06:07:42.843

从您上面的代码中，我发现您正在从 XML 解析中获取标题、描述和成本值。您可以从 XML 中获取此值并通过以下代码将其传递给您的其他活动

```
list.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

                HashMap<String, String> data = menuItems.get(position);

                String title = data.get("foodjoint_name");
                String description = data.get("foodjoint_description");
                String price = data.get("foodjoint_latitude");

                Intent personal = new Intent(this, UserPersonal.class);
            startActivity(personal);
                in.putExtra("title", title);
                in.putExtra("descp", description);
                in.putExtra("DURATION", pubdate);
                in.putExtra("URL", imagename);
                startActivity(personal);

            }
        }); 
```

在其他活动中，您可以通过以下代码检索它

```
Bundle extras = getIntent().getExtras(); 
        if(extras !=null)
        {
            Title = extras.getString("title");
            Description = extras.getString("descp");
            ImageUrl = extras.getString("URL");
        } 
```

# class - 从命令行参数加载类

> ID：10480186
> 
> 赞同：1
> 
> 时间：2012-05-07T10:05:53.737
> 
> 标签：class, scala

将类名作为命令行参数传递。

```
$program-name class-name 
```

如何在 Scala 中从此类实例化一个对象？换句话说，是否可以从类名中获取对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T10:26:38.530

是的，有可能。例如：

```
Class.forName("java.lang.String").newInstance 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T10:25:42.367

由于您可以在 scala 中调用所有 java 方法，因此您可以调用`Class.forName(classname)`.

# javascript - 使用 Javascript 映射

> ID：10480187
> 
> 赞同：0
> 
> 时间：2012-05-07T10:05:56.837
> 
> 标签：javascript, map

我想使用 JavaScript 使用地图。

如果我使用静态数据，我可以获得预期的输出。

```
var tempMap={91: "Live", 41: "Aggr-Pack", 92: "Test", 118: "Group", 115: "Inner Cartons", 122: "SNDC", 102: "Web Service", 82: "EXTERNAL_DEF", 137: "PARTIAL", 72: "Return", 112: "Kit Master Cartons", 46: "SHIP", 134: "VEHICLE_TYPE", 121: "SGTIN", 135: "VEHICLE_ID", 45: "DE-COM", 113: "Bulk Cartons ", 136: "VEHICLE_COLOR", 131: "CARRIER", 52: "Invoice Number", 101: "File", 114: "Product Master Cartons ", 81: "GLN", 42: "Kit", 53: "Shipping Number", 47: "RECEIVE", 111: "Pallet", 133: "SHIPMENT_TYPE", 71: "Sale", 43: "DIS", 116: "Kits", 21: "en", 123: "SSCC", 22: "es", 117: "Products", 44: "COM", 132: "EXPECTED_DELIVERY_DATE", 73: "Transfer", 51: "Purchase Order Number"};
var key=116;
alert(tempMap[key]); 
```

我想从响应中创建动态地图。

回应是

```
"{91=Live, 41=Aggr-Pack, 92=Test, 118=Group, 115=Inner Cartons, 122=SNDC, 102=Web Service, 82=EXTERNAL_DEF, 137=PARTIAL, 72=Return, 112=Kit Master Cartons, 46=SHIP, 134=VEHICLE_TYPE, 121=SGTIN, 135=VEHICLE_ID, 45=DE-COM, 113=Bulk Cartons , 136=VEHICLE_COLOR, 131=CARRIER, 52=Invoice Number, 101=File, 114=Product Master Cartons , 81=GLN, 42=Kit, 53=Shipping Number, 47=RECEIVE, 111=Pallet, 133=SHIPMENT_TYPE, 71=Sale, 43=DIS, 116=Kits, 21=en, 123=SSCC, 22=es, 117=Products, 44=COM, 132=EXPECTED_DELIVERY_DATE, 73=Transfer, 51=Purchase Order Number}" 
```

我使用下面的 javascript 代码修改了 tempMap 数据中给出的响应。

```
var map=(str.replace(/=/gi,"\"= \"").replace(/,/gi,"\",\"").replace(/=/gi,":"));
map="{\""+map.substring(2,(map.length)-1)+"\"}" 
```

但是我无法通过传递键值来获得输出。我不想使用任何其他第三方来执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T10:08:28.697

假设将您的响应转换为 JSON 的 RegEx 是正确的（我没有测试它），您必须在使用它之前通过 JSON 解析器传递它。在那之前你所拥有的只是一个字符串。

```
map= JSON.parse( "{\""+map.substring(2,(map.length)-1)+"\"}" ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T10:17:41.683

你几乎做对了。

将空白字符添加到第二次替换

```
var map=(str.replace(/=/gi,"\"= \"").replace(/,\s*/gi,"\",\"").replace(/=/gi,":"));
map="{\""+map.substring(2,(map.length)-1)+"\"}"; 
```

这样以后你就可以执行

```
map = JSON.parse(map); 
```

或者

```
map = eval("(" + map + ")"); 
```

如果您正在处理不支持`JSON`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T10:33:42.163

由于将源字符串评估为 javascript 对象是微不足道的，我假设您在将响应字符串`'{91=Live, 41=Aggr-Pack}'`从`'{"91": "Live", "41": "Aggr-Pack"}'`.

```
// this pattern matches each attribution and saves references to its left
// and right sides; i.e: after match "41=Aggr-Pack", $2 is "41" and $3 is
// "Aggr-Pack".
var pat = /([\w -]+)=([\w -]+)/gi;

// this uses the referenced matches to build another string;
// i.e: '{91=Live, 41=Aggr-Pack}' -> '{"91": "Live", "41": "Aggr-Pack"}';
var tmp = str.replace(re, '"$2": "$3"');

// the following evaluates the string as a javascript object (you can also
// use eval(tmp):
var map = JSON.parse(tmp) 
```

我希望它能解决你的问题。

# internet-explorer - bootstrap-sass 生成一个太大的 css 文件，IE 不能在它上面工作

> ID：10480188
> 
> 赞同：1
> 
> 时间：2012-05-07T10:06:05.687
> 
> 标签：internet-explorer, twitter-bootstrap

我在我的项目中使用的是bootstrap-sass，生成的文件大于288KB，在IE6和IE7中不起作用。

如何处理这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T21:40:34.317

没见过Bootstrap的SASS实现，但对LESS版本比较熟悉。在引导文件中，您会注意到它执行了几个包含以包含所有其他 LESS，在您的情况下是 SASS 文件。我首先会从 Bootstrap 中排除您不需要的 CSS。注意有些有依赖关系，但您可以切换 SASS 文件中的项目并适当地重新打包以处理依赖关系。

希望有帮助。

# java - 奇怪的opengl es 2 on android错误

> ID：10480191
> 
> 赞同：1
> 
> 时间：2012-05-07T10:06:14.440
> 
> 标签：java, android, opengl-es

我试图从[http://developer.android.com/resources/tutorials/opengl/opengl-es20.html](http://developer.android.com/resources/tutorials/opengl/opengl-es20.html)做教程 但我想要的是在多个类中创建它以便于编辑。我的问题是 eclipse 没有显示任何类型的错误或问题，应用程序运行但仅显示白色背景（未显示三角形）并且 logcat 不断抛出错误“称为未实现的 OpenGL ES API”。我不知道我做错了什么，并且 Eclipse 没有告诉我错误在哪里，有人可以告诉我出了什么问题，或者至少让我走上解决方案的轨道吗？

编辑：我使用 android 2.3.7 在 htc 上运行这个应用程序。当我从谷歌教程复制粘贴代码时，一切都运行得很好。

我的课程看起来像这样：

活动：

```
import android.app.Activity;
import android.opengl.GLSurfaceView;
import android.os.Bundle;
import android.view.Window;
import android.view.WindowManager;

public class Androdvlpr2Activity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(
        WindowManager.LayoutParams.FLAG_FULLSCREEN,
        WindowManager.LayoutParams.FLAG_FULLSCREEN); 

    GLSurfaceView View = new GLSurfaceView(this);
    View.setRenderer(new Renderer());
    setContentView(View);
}
} 
```

渲染器：

```
import javax.microedition.khronos.egl.EGLConfig;
import javax.microedition.khronos.opengles.GL10;

import android.opengl.GLES20;
import android.opengl.GLSurfaceView;

public class Renderer implements GLSurfaceView.Renderer {
Triangle triangle = new Triangle();
private int mProgram;
private int maPositionHandle;

public void onSurfaceCreated(GL10 unused, EGLConfig config) {
    GLES20.glClearColor(0.92f, 0.92f, 0.92f, 1.0f);

    Triangle.initTriangle();

    mProgram = GLES20.glCreateProgram();             // create empty OpenGL Program
    GLES20.glAttachShader(mProgram, Shader.vertexShader);   // add the vertex shader to program
    GLES20.glAttachShader(mProgram, Shader.fragmentShader); // add the fragment shader to program
    GLES20.glLinkProgram(mProgram);                  // creates OpenGL program executables

    // get handle to the vertex shader's vPosition member
    maPositionHandle = GLES20.glGetAttribLocation(mProgram, "vPosition");
}

public void onDrawFrame(GL10 unused) {
    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT | GLES20.GL_DEPTH_BUFFER_BIT);

    GLES20.glUseProgram(mProgram);
    // Prepare the triangle data
    GLES20.glVertexAttribPointer(maPositionHandle, 3, GLES20.GL_FLOAT, false, 12, Triangle.verticesBuffer);
    GLES20.glEnableVertexAttribArray(maPositionHandle);
    // Draw the triangle
    GLES20.glDrawArrays(GLES20.GL_TRIANGLES, 0, 3);
}

public void onSurfaceChanged(GL10 unused, int width, int height) {
}  
} 
```

三角形：

```
import java.nio.ByteBuffer;
import java.nio.ByteOrder;
import java.nio.FloatBuffer;

public class Triangle {
static FloatBuffer verticesBuffer = null;

public static void initTriangle(){
    float triangleCoords[] = {
                // X, Y, Z
                -0.5f, -0.25f, 0,
                 0.5f, -0.25f, 0,
                 0.0f,  0.559016994f, 0
            }; 

    ByteBuffer vbb = ByteBuffer.allocateDirect(triangleCoords.length * 4);
    vbb.order(ByteOrder.nativeOrder());
    verticesBuffer = vbb.asFloatBuffer();
    verticesBuffer.put(triangleCoords);
    verticesBuffer.position(0);
}
} 
```

着色器：

```
import android.opengl.GLES20;

public class Shader {
    private final static String vertexShaderCode = 
        "attribute vec4 vPosition; \n" +
        "void main(){              \n" +
        " gl_Position = vPosition; \n" +
        "}                         \n";

    private final static String fragmentShaderCode = 
        "precision mediump float;  \n" +
        "void main(){              \n" +
        " gl_FragColor = vec4 (0.63671875, 0.76953125, 0.22265625, 1.0); \n" +
        "}                         \n";

    final static int vertexShader = loadShader(GLES20.GL_VERTEX_SHADER, vertexShaderCode);
    final static int fragmentShader = loadShader(GLES20.GL_FRAGMENT_SHADER, fragmentShaderCode);

private static int loadShader(int type, String shaderCode){

    // create a vertex shader type (GLES20.GL_VERTEX_SHADER)
    // or a fragment shader type (GLES20.GL_FRAGMENT_SHADER)
    int shader = GLES20.glCreateShader(type); 

    // add the source code to the shader and compile it
    GLES20.glShaderSource(shader, shaderCode);
    GLES20.glCompileShader(shader);

    return shader;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:15:30.233

在里面`onSurfaceChanged`，必须设置视口。

*在每次*OpenGL 调用后检查错误！我曾经在自定义 ROM 中看到过一些*未实现*的警告；你想追踪到底是哪些电话引发了这些。

# titanium - 使用 iOS 模块构建 Native View 并在 Titanium 中使用它们

> ID：10480211
> 
> 赞同：7
> 
> 时间：2012-05-07T10:07:15.637
> 
> 标签：titanium, appcelerator, titanium-mobile, appcelerator-mobile, titanium-modules

我想构建一个 iOS 模块，其中有一个带有 .xib 文件的 viewController 类。现在的问题是如何从我的钛代码中调用该视图。我知道有可用的视图代理，但由于文档不太好，我不知道如何使用它们。

到目前为止，我已经创建了一个可以传递非图形数据的模块，但是如何从我的模块中获取 View 控制器。

我已经检查了 appcelerator wiki，但这没有帮助任何可以指导我的教程都会有所帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T22:47:35.753

查看 iOS 模组开发指南中的 TiModdevguideDemoView.h/m 和 TiModdevguideDemoViewProxy.h/m：

[https://github.com/appcelerator/titanium_modules/tree/master/moddevguide/mobile/ios/Classes](https://github.com/appcelerator/titanium_modules/tree/master/moddevguide/mobile/ios/Classes)

它简单地演示了视图和视图代理之间的关系。在这种情况下，它是一个正方形。

你可以在这里看到它在 JavaScript 中的使用： [https ://github.com/appcelerator/titanium_modules/blob/master/moddevguide/mobile/ios/example/demos/viewproxyDemo.js](https://github.com/appcelerator/titanium_modules/blob/master/moddevguide/mobile/ios/example/demos/viewproxyDemo.js)

一旦你掌握了这些，并且可以做出一个简单的看法，你就可以开始下一步来解决你的问题了。您需要将您的 XIB 转换为 NIB。最简单的方法是将XIB添加到本机项目，编译项目，然后拉出NIB。将其转储到模块的资产中，然后从模块代码中引用它。不幸的是，我没有任何使用 NIB 链接的公共资源，但我可以向您展示一个片段。（我们维护的许多模块都使用这种方法，所以我知道你可以成功地让它工作！Jira、Gigya、Urban Airship 等。）

```
NSBundle* bndl = [NSBundle bundleWithPath:[[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"ti.jira/1.0/assets/JMC.bundle"]];
JMCSketchViewController *sketchViewController = [[[JMCSketchViewController alloc] initWithNibName:@"JMCSketchViewController" bundle:bndl] autorelease]; 
```

请注意，我们通常不使用 NIB，除非我们有来自第三方的东西迫使我们这样做。以命令方式创建视图比以声明方式创建视图更容易。

您可以在我们的 iOS 模组开发指南中阅读更多关于视图和视图代理的信息。一旦您理解了我在 mod 开发指南中链接的内容（并成功创建了您自己的），mod 开发指南将对您更有用。（顺便说一下，我对指南进行了一些更新，这将使其更容易理解）。[http://docs.appcelerator.com/titanium/2.0/index.html#!/guide/iOS_Module_Development_Guide](http://docs.appcelerator.com/titanium/2.0/index.html#!/guide/iOS_Module_Development_Guide)

希望这可以帮助。如果有什么我可以进一步充实的，请告诉我。您需要克服一点理解障碍，但是一旦您投入了一些精力，您将全速进行模块开发。

# java - 将html解码为普通字符java

> ID：10480213
> 
> 赞同：1
> 
> 时间：2012-05-07T10:07:29.037
> 
> 标签：java, character-encoding

我有将文本打印到屏幕的套接字流。如果我有一个应该是“sælger”的字符串，我会收到“s&AAOGlger”。

我的问题：是否有某种库能够解码以下文本，使其成为 sælger？

我使用最多的字符是丹麦字母æøåÆØÅ。

此致

# bison - Lex - 识别模棱两可的标记

> ID：10480215
> 
> 赞同：0
> 
> 时间：2012-05-07T10:07:30.817
> 
> 标签：bison, yacc, lex, flex-lexer

全部，

在我的 Lex 文件中，我们将一些运算符识别为令牌，其中一些运算符是

```
":p" 
and 
":" 
```

问题是任何以 :p like 开头的单词`":presentation"`都不会被识别为

```
':' word             /*grammar*/ 
```

并且由于返回的 lex 值`":p"`作为下一个令牌而触发了解析错误

我该如何解决这种歧义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:23:34.567

相反，您应该定义一个词法分析器规则来匹配整个“符号”标记，即类似

```
:[a-zA-Z_][a-zA-Z0-9_]*    { yylval.symbol = strdup(yytext + 1); return SYMBOL; } 
```

如果需要，您可以检查此规则`:p`并对其进行特殊处理，例如：

```
:[a-zA-Z_][a-zA-Z0-9_]*    {
    if (strcmp(yytext, ":p") == 0) {
        return OP_P;
    }

    yylval.symbol = strdup(yytext + 1);
    return SYMBOL;
} 
```

# php - 我如何在来自 Twitter RSS 的可点击推文上创建链接

> ID：10480216
> 
> 赞同：0
> 
> 时间：2012-05-07T10:07:32.720
> 
> 标签：php, simplexml

我使用 SimpleXML 通过 RSS 获取我的推文。我想让推文上的链接可点击。但我不知道怎么做。我尝试了一些不起作用的东西。需要您的帮助。

这是我的代码；

```
<? 
$twitterRssFeedUrl =  "https://api.twitter.com/1/statuses/user_timeline.rss?screen_name=puzzletravel";
$twitterUsername = "puzzletravel";
$amountToShow = 5;

$twitterPosts = false;
$xml = @simplexml_load_file($twitterRssFeedUrl);
$reg_exUrl = "/(http|https|ftp|ftps)\:\/\/[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(\/\S*)?/";
$text = $xml;
if(is_object($xml)){
    //Rest of our code will be here
}else{
    die('cannot connect to twitter feed');
}

foreach($xml->channel->item as $twit){
    if(is_array($twitterPosts) && count($twitterPosts)==$amountToShow){
        break;
    }
     $d['title'] = stripslashes(htmlentities($twit->title,ENT_QUOTES,'UTF-8'));
    $description = stripslashes(htmlentities($twit->description,ENT_QUOTES,'UTF-8'));
    if(strtolower(substr($description,0,strlen($twitterUsername))) == strtolower($twitterUsername)){
        $description = substr($description,strlen($twitterUsername)+1);
    }
    $d['description'] = $description;
    $d['pubdate'] = strtotime($twit->pubDate);
    $d['guid'] = stripslashes(htmlentities($twit->guid,ENT_QUOTES,'UTF-8'));
    $d['link'] = stripslashes(htmlentities($twit->link,ENT_QUOTES,'UTF-8'));
    $twitterPosts[]=$d;
}

if(is_array($twitterPosts)){
    echo '<ul>';
    foreach($twitterPosts as $post){
        echo '<li><p>'.$post['description'].'</p><p class="date">'.date(' j F',$post['pubdate']).'</p></li>';
    }
    echo '</ul>';
}else{
    echo '<p>No Twitter posts have been made</p>';
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T10:26:51.870

改变这个：

```
 echo '<li><p>'.$post['description'].'</p><p class="date">'.date(' j F',$post['pubdate']).'</p></li>'; 
```

对此：

```
 echo '<li><p><a href="'.$post['link'].'">'.$post['description'].'</p><p class="date">'.date(' j F',$post['pubdate']).'</a></p></li>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:56:20.757

我找到了解决我的问题的方法。这是可能需要的人的解决方案。此解决方案将包含 http、https 的文本转换为可点击的 url。

```
<? 
$twitterRssFeedUrl =  "https://api.twitter.com/1/statuses/user_timeline.rss?screen_name=puzzletravel";
$twitterUsername = "puzzletravel";
$amountToShow = 7;

$twitterPosts = false;
$xml = @simplexml_load_file($twitterRssFeedUrl);
$reg_exUrl = "/(http|https)\:\/\/[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(\/\S*)?/";

if(is_object($xml)){
    //Rest of our code will be here
}else{
    die('Tweetler Alinamiyor');
}

foreach($xml->channel->item as $twit){
    if(is_array($twitterPosts) && count($twitterPosts)==$amountToShow){
        break;
    }
     $d['title'] = stripslashes(htmlentities($twit->title,ENT_QUOTES,'UTF-8'));
    $description = stripslashes(htmlentities($twit->description,ENT_QUOTES,'UTF-8'));
    if(strtolower(substr($description,0,strlen($twitterUsername))) == strtolower($twitterUsername)){
        $description = substr($description,strlen($twitterUsername)+1);
    }
    $d['description'] = $description;
    $d['pubdate'] = strtotime($twit->pubDate);
    $d['guid'] = stripslashes(htmlentities($twit->guid,ENT_QUOTES,'UTF-8'));
    $d['link'] = stripslashes(htmlentities($twit->link,ENT_QUOTES,'UTF-8'));
    $twitterPosts[]=$d;
}

if(is_array($twitterPosts)){
    echo '<ul>';
    foreach($twitterPosts as $post){

        if(preg_match($reg_exUrl, $post['description'], $url)) {
            $post['description']=preg_replace($reg_exUrl, "<a href={$url[0]}>{$url[0]}</a> ", $post['description']);
        }

        echo '<ul id="twitter_update_list">
              <li>
    <div id="tweet">'.$post['description'].'<a href="'.$post['link'].'">'.date(' j F',$post['pubdate']).'<br></a></li>';
    }
    echo '</ul>';
}else{
    echo '<p>Güncel Tweetler Oluşturulamadı Sayfayı Yenilemeyi Deneyin.</p></div>';
}

?> 
```

# html - Tinymce mceInsertContent 在末尾加入所有关闭的跟随标签

> ID：10480218
> 
> 赞同：2
> 
> 时间：2012-05-07T10:07:50.103
> 
> 标签：html, tinymce

我正在使用 mceInsertContent 在 Tinymce 编辑器中插入外部文本。此文本需要标签（例如`<tag>text</tag>`），因为稍后需要搜索此标签......当插入它是连续的时会发生问题。

一个通用的例子，它点击了 3 次：

```
<button onclick="tinyMCE.execCommand('mceInsertContent',false,'<tag>text</tag>');"> 
```

然后在编辑器中查看生成的 html：

预期结果：

```
<tag>text</tag><tag>text</tag><tag>text</tag> 
```

实际结果：

```
<tag>text<tag>text<tag>text</tag></tag></tag> 
```

有没有办法禁用这种转换？

甚至将光标定位在其他地方（点击之间）并返回到插入的前面......不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-08T12:57:15.997

您可以在文本末尾添加 '\uFEFF'。

`<button onclick="tinyMCE.execCommand('mceInsertContent',false,'<tag>text</tag>\uFEFF');">`

我已经在 Chrome 中测试了这个解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-22T06:48:49.040

利用

```
    文本');">

```

在 HTML 末尾使用空格字符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-22T06:53:22.200

您可以在 html 的末尾添加 ( ) 空格字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-25T19:20:36.540

我对标签和 mceInsertContent 也有类似的问题。在我的情况下发生的事情是我正在插入包含在跨度标记中的内容，并且在插入后，跨度保持打开状态，即使我可以看到结束跨度标记。在最后添加 '\uFEFF' 字符串是可行的，但是我必须将整个元素组合成一个调用。在此之前，我连续使用了一些 mceInsertContent 命令来构建元素并将 \uFEFF 添加到末尾并没有在那里工作，直到我将所有内容组合成一行。

```
 tinymce.activeEditor.execCommand('mceInsertContent', false, "<span class=\'ima\' style=\'color:blue\'>");
        tinymce.activeEditor.execCommand('mceInsertContent', false, "<-");
        tinymce.activeEditor.execCommand('mceInsertContent', false, "UNKNOWN (" + curPos + ")");
        tinymce.activeEditor.execCommand('mceInsertContent', false, "->");
        tinymce.activeEditor.execCommand('mceInsertContent', false, "</span>\uFEFF"); 
```

没用，但是：

```
tinymce.activeEditor.execCommand('mceInsertContent', false, "<span class=\'ima\' style=\'color:blue\'><-UNKNOWN (" + curPos + ")-></span>\uFEFF"); 
```

工作过

# python - 关系中 Django 模型的 related_name 的字符限制是什么？

> ID：10480221
> 
> 赞同：0
> 
> 时间：2012-05-07T10:07:58.070
> 
> 标签：python, django, django-models

我注意到您不能`-`在`+`. 您也不能使用,或.`/``*``related_name``:``|``.`

如果您在 中包含上述任何字符`related_name`，尽管 Django`models.py`会验证，但每当您进行查询查找时，它都会抛出类似的错误

```
Q(userprofile.user__place__managers=user)
SyntaxError: keyword can't be an expression 
```

我想使用特殊字符的原因是因为我喜欢`related_name`以`{class_name}{field_name}`. 因此，例如对于`UserProfile`模型类，我会做类似的事情

```
class UserProfile(models.Model)
    user = models.OneToOneField(User, related_name='userprofile-user')
    user_type = models.ManyToManyFields(UserType, related_name='userprofile-user_type') 
```

这样，当我执行涉及向后跟踪关系的查询时，仍然知道我是如何向后跟踪它的*。*例如，如果我只是这样做

```
user_type = models.ManyToManyFields(UserType, related_name='user_type') 
```

然后我可以`UserType`从`User`做访问`User.objects.get(pk=1).user_type.all()`。但这使它看起来像是`user_type`一个领域`User`。

相反，如果我能做类似的事情`User.objects.get(pk=1).userprofile-user_type.all()`，我就会知道我将从`User`to`UserProfile`到 to `UserType`。

好吧，我的思维方式可能是少数，我认为大多数人只会这样做`related_name='user_type'`，甚至可能使用 default `user_type_set`。

另一个问题是：**什么是好的命名风格`related_name`？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T10:26:38.727

**userprofile-user_type**不是有效的 python 标识符。

Python 认为您正在尝试从 userprofile 中减去 user_type。

在您的具体情况下`profiles`，将是一个足够好的相关经理名称。

这样当您有一个 UserType 实例时：

```
utype = UserType.objects.get(...)
utype.profiles.all() 
```

它将为您提供与该用户类型关联的所有配置文件。

也没有 ManyToManyField* *s* *，去掉“s”。

尽量不要比传达关系含义所需的内容更冗长。相关名称中的字段名称是多余且不必要的。

**更新：** 请不要命名`userprofiles_from_user_type`

就像有这个：

```
class Person:
    def PersonWalk(self):
        ... 
```

代替：

```
class Person:
    def walk(self):
        ... 
```

让我给你一个更复杂的例子，中间表

```
class Service(Model):
    name = models.CharField(max_length=32)

class Person(Model):
    services = models.ManyToManyField('self', through='PersonServiceRel', null=True, related_name='friends', symmetrical=False)

class PersonServiceRel(Model):
    provider = models.ForeignKey(Person, related_name='provided_services')
    consumer = models.ForeignKey(Person, related_name='consumed_services')
    service = models.ForeignKey(Service) 
```

现在假设我们有人互相提供某种服务，我想知道用户“rantaplan”是否提供“跟踪”服务以及向谁提供服务。

```
rantaplan = Person.objects.get(name='rantanplan')
tracking = Service.objects.get(name='tracking')
PersonServiceRel.objects.filter(provider=rantaplan, service=tracking)
# or
rantaplan.provided_services.filter(service=tracking) 
```

请注意 PersonServicesRel 字段“提供者”和“消费者”及其相关管理器。还要注意必要的查询。我认为它的可读性很好。

所以我建议你根据他们的目的和用途来命名你的字段和相关经理，尽可能少的冗长。

# android - 使用viewflipper的android类

> ID：10480222
> 
> 赞同：0
> 
> 时间：2012-05-07T10:07:58.023
> 
> 标签：android

我正在为视图使用四个不同的类，现在我想将四个类的对象组合在一个类中，然后想要实现 ontouchlistener，但它向我显示了错误。我不理解那个错误。我的代码如下：

```
public class AdActivity extends Activity {

    DemoView demoview ;
    DemoView2 finalview;
    DemoView3 dview;
    DemoView4 deview;
    LowerView lview;
    Finalview fview;

    ViewFlipper c,d ;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        demoview = new DemoView(this);
        finalview = new DemoView2(this);
        dview= new DemoView3(this);
        deview = new DemoView4(this);
        lview= new LowerView(this);
        fview=new Finalview(this);
        setContentView(fview);
    }

    public class Finalview extends View {
        public Finalview(Context context) {
            super(context);
            // TODO Auto-generated constructor stub
            c=(ViewFlipper)findViewById(R.id.viewFlipper2);
            c.addView(demoview,0);
            c.addView(finalview, 1);
            c.addView(dview, 2);
            c.addView(deview, 3);
            c.setAutoStart(true);
            c.setFlipInterval(1000);
            c.startFlipping();

            d=(ViewFlipper)findViewById(R.id.viewFlipper3);
            d.addView(lview,0);
        }
    } 
} 
```

我的堆栈跟踪显示以下错误。我没有收到此错误。

```
05-07 15:28:56.900: E/AndroidRuntime(515): FATAL EXCEPTION: main
05-07 15:28:56.900: E/AndroidRuntime(515): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.ad/com.example.ad.AdActivity}: java.lang.NullPointerException
05-07 15:28:56.900: E/AndroidRuntime(515):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
05-07 15:28:56.900: E/AndroidRuntime(515):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
05-07 15:28:56.900: E/AndroidRuntime(515):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
05-07 15:28:56.900: E/AndroidRuntime(515):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
05-07 15:28:56.900: E/AndroidRuntime(515):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-07 15:28:56.900: E/AndroidRuntime(515):  at android.os.Looper.loop(Looper.java:123)
05-07 15:28:56.900: E/AndroidRuntime(515):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-07 15:28:56.900: E/AndroidRuntime(515):  at java.lang.reflect.Method.invokeNative(Native Method)
05-07 15:28:56.900: E/AndroidRuntime(515):  at java.lang.reflect.Method.invoke(Method.java:521)
05-07 15:28:56.900: E/AndroidRuntime(515):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-07 15:28:56.900: E/AndroidRuntime(515):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-07 15:28:56.900: E/AndroidRuntime(515):  at dalvik.system.NativeStart.main(Native Method)
05-07 15:28:56.900: E/AndroidRuntime(515): Caused by: java.lang.NullPointerException
05-07 15:28:56.900: E/AndroidRuntime(515):  at com.example.ad.AdActivity$Finalview.<init>(AdActivity.java:420)
05-07 15:28:56.900: E/AndroidRuntime(515):  at com.example.ad.AdActivity.onCreate(AdActivity.java:44)
05-07 15:28:56.900: E/AndroidRuntime(515):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-07 15:28:56.900: E/AndroidRuntime(515):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
05-07 15:28:56.900: E/AndroidRuntime(515):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T21:09:51.083

堆栈跟踪的重要部分是：

```
05-07 15:28:56.900: E/AndroidRuntime(515): Caused by: java.lang.NullPointerException
05-07 15:28:56.900: E/AndroidRuntime(515):  at com.example.ad.AdActivity$Finalview.<init>(AdActivity.java:420)
05-07 15:28:56.900: E/AndroidRuntime(515):  at com.example.ad.AdActivity.onCreate(AdActivity.java:44) 
```

它表示通过调用 findViewByID() 将 FinalView 构造函数中的“c”或“d”设置为 null。

您确定 R.id.viewFlipper2 和 R.id.viewFlipper3 实际上是在创建 AdActivity 时自行构建的吗？这些部分是否是此活动的 UI XML 描述？

# html - HTML 和 BODY 不同的背景

> ID：10480225
> 
> 赞同：0
> 
> 时间：2012-05-07T10:08:05.120
> 
> 标签：html, css

我想在整个 HTML 文档中都有渐变，并且在 BODY 标签的中心，我需要另一个背景居中。

**编辑看看它失败了多少试试：**

[http://xn--wiadomesny-37b.pl/bg](http://xn--wiadomesny-37b.pl/bg)

这张图片解释了它：

![在此处输入图像描述](../Images/36f8829417d40a896b33ab1975017be7.png)

如果我输入 CSS，它会失败，即使下面应该显示重复-y 背景，也只会显示 1 个背景：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<style type="text/css">
html {
    background-color: #ffeacd;
    background-image: url(bg.png);
    background-repeat: repeat-x;
}
body {
    background-image: url(bg_overlay.png);
    background-repeat: no-repeat;
    background-position: center;
}
.content {
    width:1020px;
    padding: 0px;
    margin-top: 0px;
    margin-right: auto;
    margin-bottom: 0px;
    margin-left: auto;
}
</style>
</head>
<body>
<div class="content">
  <p>This content is closed in 1020px wide DIV, as to merge in most displays. </p>
  <p>Rest around is an background seen or unseen depends on users screen size. </p>
  <p>Me got 24'' so its obvious that I will see all backgrounds and even gradients as 
    blank space fillers</p>
  <p>
  <h1>See how much it fails in various browsers:</h1>
  <ul>
    <li><a href="chrome.png">Chrome</a></li>
    <li><a href="ff.png">Firefox</a></li>
    <li><a href="ie.png">IE</a></li>
  </ul>
  </p>
  )</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T10:21:15.743

如果您没有看到两个背景，可能是因为您的`body`元素与`html`.

下面演示了元素可以有不同的背景（[http://jsfiddle.net/ZVHqs/](http://jsfiddle.net/ZVHqs/)）：

```
<!doctype html>
<style>
html { background: green; }
body { background: yellow; margin: 1em; }
</style>
Hello world 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T11:26:12.867

我认为这应该可以帮助您：

```
html {
           background: #ffeacd url(bg.png) 0 0 repeat-x;
           width:100%;
           height:100%;
     }
body {
           background:transparent url(bg_overlay.png) center center no-repeat;
           width:100%;
           height:100%;
     }
.content {
           width:1020px;
           padding: 0px;
           margin-top: 0px;
           margin-right: auto;
           margin-bottom: 0px;
           margin-left: auto;
         } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T10:13:13.683

你应该尝试这样做，

```
body{
    background-position: fixed;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T10:14:56.613

您应该使用两个 DIV，一个用于左侧栏，一个用于主要内容。将 BODY 的背景设置为渐变，将左侧栏的 DIV 设置为您想要的任何内容。

然后你只需要专注于为 div 创建两列布局。[这](http://www.barelyfitz.com/screencast/html-training/css/positioning/)是一本很好的 CSS 定位入门。

# javascript - 在导航到另一个页面之前，如何确保功能完全执行？

> ID：10480232
> 
> 赞同：0
> 
> 时间：2012-05-07T10:08:23.700
> 
> 标签：javascript, jquery, asp.net

我正在使用网络服务删除某些记录。jquery ajax 请求写在超链接的onclick 中。当我使用firebug逐行执行脚本时，它会被删除，否则不会。有没有人遇到过这样的情况？请帮忙

代码示例：

```
 $(".target").click(function() { 
            func();  //This function should be executed completely before navigating to another page
        });

 var func = function() {
            var items = $("#flag").find('td input.itemClass');
            id = items[0].value;
            var status = items[1].value;
            var type = items[2].value;
            var params = '{' +
                            'ID:"' + id + '" ,Type:"' + type + '" ,Status:"' + status + '"}';
            $.ajax({
                type: "POST",
                url: "WebMethodService.asmx/DeleteItem",
                data: params,
                //contentType: "plain/text",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function(msg) {
                    $("#deleteNotificationMessage").val("Item has been removed"); // keep a separate label to display this message
                }

                //Event that'll be fired on Success

            });

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T10:13:44.230

jQuery ajax 函数返回延迟对象，因此我们`return $.ajax`. 那么你应该使用延迟。[`done`](http://api.jquery.com/deferred.done/)当 AJAX 完全完成时执行回调。当 AJAX 为`done`时，请改用 JS 导航：

```
var func = function() {
    ...
    return $.ajax({...});                   //return our ajax deferred
}

$(".target").click(function() { 
    var target = this;                      //preserve "this" since this in the callback may be different 
    func().done(function(){                 //our done callback executed when ajax is done
        window.location.href = target.href; //assuming .target is a link
    });
    return false;                           //prevent the natural click action
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T10:15:55.620

您可以`async: false`在等待那里完成调用的 ajax 调用上使用。

```
var func = function() {
            var items = $("#flag").find('td input.itemClass');
            id = items[0].value;
            var status = items[1].value;
            var type = items[2].value;
            var params = '{' +
                            'ID:"' + id + '" ,Type:"' + type + '" ,Status:"' + status + '"}';
            $.ajax({
                type: "POST",
                async: false,
                url: "WebMethodService.asmx/DeleteItem",
                data: params,
                //contentType: "plain/text",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function(msg) {
                    $("#deleteNotificationMessage").val("Item has been removed"); // keep a separate label to display this message
                }

                //Event that'll be fired on Success

            });
    } 
```

或者，您可以在请求后提交。

```
$(".target").click(function() { 
            func();  //This function should be executed completely before navigating to another page
            return false;
        });

var func = function() {
            var items = $("#flag").find('td input.itemClass');
            id = items[0].value;
            var status = items[1].value;
            var type = items[2].value;
            var params = '{' +
                            'ID:"' + id + '" ,Type:"' + type + '" ,Status:"' + status + '"}';
            $.ajax({
                type: "POST",
                async: true,
                url: "WebMethodService.asmx/DeleteItem",
                data: params,
                //contentType: "plain/text",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function(msg) {
                    $("#deleteNotificationMessage").val("Item has been removed"); // keep a separate label to display this message
                    $("#YourFormID").submit();
                }

                //Event that'll be fired on Success

            });

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T10:16:24.570

只需将事件移动到 ajax 请求中的“成功”处理程序：

```
 $.ajax({
            type: "POST",
            url: "WebMethodService.asmx/DeleteItem",
            data: params,
            //contentType: "plain/text",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function(msg) {
                $("#deleteNotificationMessage").val("Item has been removed");
                //Event that'll be fired on Success
            }              

        }); 
```

或者使用 jQuery ajax 回调方法。

# clojure - 在 clojurescript 中编写 clojurescript REPL

> ID：10480235
> 
> 赞同：4
> 
> 时间：2012-05-07T10:08:29.900
> 
> 标签：clojure, embed, read-eval-print-loop, clojurescript

我有兴趣在网页中嵌入 clojurescript REPL。如何在 clojurescript 中编写 clojurescript 评估器，以便我可以将其编译为 javascript 并将 javascript 嵌入网页中？我无法在云中将 clojurescript 编译为 javascript。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-03-01T13:05:14.220

现在有可能:)) [http://app.gadjett.com/cljs_compiler/index-dev.html](http://app.gadjett.com/cljs_compiler/index-dev.html)

Github [https://github.com/viebel/klipse](https://github.com/viebel/klipse)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T16:19:37.300

没有办法做到这一点，因为 ClojureScript 不会自行引导。目前该项目的非目标，但我确信有人可以在分叉中追求这个想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-01T16:01:43.270

有[`clojurescript.net`](http://clojurescript.net/)，源代码可[在此处](https://github.com/kanaka/cljs-bootstrap)获得。

或[clojurescript.io](http://clojurescript.io/)，它使用[`re-plumb`](https://github.com/ScalaConsultants/replumb).

# php - 多个 XML 到 DOM

> ID：10480237
> 
> 赞同：0
> 
> 时间：2012-05-07T10:08:31.500
> 
> 标签：php, xml

我有多个具有相同方案的 XML 提要，并希望将它们组合到一个包中。我目前保存1个这样的文件：

```
$dom = new DOMDocument('1.0', 'UTF-8');
$dom->load( 'http://FEEDURL.COM/FEED.PHP' ); 
$dom->encoding='UTF-8';
$dom->save( 'data.xml' ); /* <?xml version="1.0" encoding="UTF-8"?> */ 
```

我需要这个脚本来加载多个提要并将它们全部保存到一个名为 data.xml 的文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T10:23:39.497

`importNode`在 DOM 中使用。

[http://php.net/manual/en/domdocument.importnode.php](http://php.net/manual/en/domdocument.importnode.php)

# svn - Msbuild 中的 TortoiseSVN diff 命令

> ID：10480240
> 
> 赞同：2
> 
> 时间：2012-05-07T10:08:48.243
> 
> 标签：svn, msbuild, tortoisesvn, cruisecontrol.net

我正在使用 TortoiseSVN。我想显示最新修订版和当前修订版之间所有文件的差异。为此，我通过 msbuild 执行了一个脚本。

你能告诉我如何执行这个 diff 命令，以便我可以比较以前和当前版本之间的所有文件。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:34:54.457

这里有些混乱。我怀疑您不仅使用 TortoiseSVN，还使用一些用于 MS VisualStudio 的集成 SVN 客户端（例如 AnkhSVN）。我在下面的回答仅适用于 TortoiseSVN，不适用于集成客户端。

您似乎正在尝试创建一个补丁：右键单击您的根文件夹（即您要比较所有文件的文件夹）-> 创建补丁-> 选择您要比较的所有文件-> 确定->选择名称-> 保存。这样创建的文件将包含您的工作副本 (WC) 和从中获得它的修订版之间的所有差异。如果您事先更新您的 WC，它将包含您的 WC 和上一个版本之间的差异。

要获得两个提交的修订之间的所有差异：右键单击根文件夹 -> 显示日志 -> 检查要比较的修订（按住 ctrl 键并单击它们 -> 右键单击​​ -> 将差异显示为统一diff。它将打开一个包含所有差异的窗口。然后您可以单击文件 -> 保存（或另存为）。

# liferay-6 - 可重用 Liferay (6.0.6) 服务

> ID：10480244
> 
> 赞同：0
> 
> 时间：2012-05-07T10:08:54.777
> 
> 标签：liferay-6

我正在尝试在不使用 ext 和 servicebuilder 的情况下实现可重用的自定义服务。我参考了这篇文章： http: [//www.devatwork.nl/2010/04/implementing-a-reusable-liferay-service-without-ext-or-service-builder/](http://www.devatwork.nl/2010/04/implementing-a-reusable-liferay-service-without-ext-or-service-builder/)，但我对如何实现这个感到困惑使用日食？以下是我执行此操作的步骤：

```
- Created liferay-plugin project within eclipse.
- Created package containing CustomServices (interface) and CustomServicesUtil.
- Created jar file of package in step 2.
- Placed that jar file in tomcat\lib\ext\
- Then created package (with in same liferay-plugin project), that includes CutomServicesImpl and CustomServicesBaseImpl
- Defined portlet-spring.xml, service.properties, and modified web.xml (as per the article), and finally deployed the project. 
```

在部署时，项目已成功部署，但是当我尝试通过 CustomServicesUtil.getCustomMethod() 使用 CustomServicesImpl 中定义的 customMethods 时，出现以下错误：

```
 "java.lang.ClassNotFoundException: com.demo.custom.services.CustomServicesUtil" 
```

我将构建路径配置为包含 customservices.jar 文件，但它无法正常工作，仍然显示相同的错误。我不知道这是否是实现可重用服务的正确方法。我试过这个，以便我可以在我的一个项目中使用自定义方法。

这是自定义服务的代码：

*   定制服务.java

    ```
     package com.demo.custom.services;

     import com.liferay.portal.model.User;

     public interface CustomServices {
        String getCustomName(User user);
     } 
    ```

*   CustomServicesUtil.java

    ```
     package com.demo.custom.services;

        import com.liferay.portal.model.User;

        public class CustomServicesUtil {
            private static CustomServices services;

            public static CustomServices getServices() {
                if (services == null) {
                    throw new RuntimeException("Custom Services not set");
                }

                return services;
            }

            public void setServices(CustomServices pServices) {
                services = pServices;
            }

            public static String getCustomName(User user){
                return getServices().getCustomName(user);
            }
        } 
    ```

*   CustomServicesBaseImpl.java

    ```
    package com.demo.custom.services.impl;

    import com.demo.custom.services.CustomServices;
    import com.liferay.portal.kernel.exception.SystemException;
    import com.liferay.portal.service.base.PrincipalBean;
    import com.liferay.portal.util.PortalUtil;

    public abstract class CustomServicesBaseImpl extends PrincipalBean implements CustomServices {
        protected CustomServices services;

        public CustomServices getServices() {
            return services;
        }

        public void setServices(CustomServices pServices) {
            this.services = pServices;
        }
        protected void runSQL(String sql) throws SystemException {
            try {
                PortalUtil.runSQL(sql);
            } catch (Exception e) {
                throw new SystemException(e);
            }
        }
    } 
    ```

*   CustomServicesImpl.java

    ```
    package com.demo.custom.services.impl;

    import com.liferay.portal.model.User;

    public class CustomServicesImpl extends CustomServicesBaseImpl {

        @Override
        public String getCustomName(User user) {
            // TODO Auto-generated method stub

            if(user == null){
                return null;
            }else{
                return new StringBuffer().append(user.getFirstName()).append(" ").append(user.getLastName()).toString();
            }
        }

    } 
    ```

这是我的另一个 portlet 的控制器类的代码，我在其中使用此服务。

*   HelloCustomName.java

    ```
    package com.test;

    import java.io.IOException;

    import javax.portlet.PortletException;
    import javax.portlet.RenderRequest;
    import javax.portlet.RenderResponse;

    import com.demo.custom.services.CustomServicesUtil;
    import com.liferay.portal.kernel.util.WebKeys;
    import com.liferay.portal.model.User;
    import com.liferay.portal.theme.ThemeDisplay;
    import com.liferay.util.bridges.mvc.MVCPortlet;

    public class HelloCustomName extends MVCPortlet {

        @Override
        public void doView(RenderRequest renderRequest,
                RenderResponse renderResponse) throws IOException, PortletException {
            System.out.println("--doview----");
            ThemeDisplay themeDisplay = (ThemeDisplay)renderRequest.getAttribute(WebKeys.THEME_DISPLAY);
            User user = themeDisplay.getUser();
            String customName = CustomServicesUtil.getCustomName(user); //getting error here
            System.out.println("customName:" + customName);
            }
    } 
    ```

请指出我如何实施可重复服务？任何指导都会非常有用。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T13:14:03.953

我的想法是，您不需要服务的复杂性。只需制作实用程序类并将其放入`tomcat/lib/ext`. 确保在`tomcat/lib/ext`中正确配置`tomcat/conf/catalina.properties`，如下所示：

```
 common.loader=${catalina.home}/lib/ext/*.jar 
```

# ios4 - 如何隐藏导航栏的左键？

> ID：10480248
> 
> 赞同：1
> 
> 时间：2012-05-07T10:09:07.590
> 
> 标签：ios4, uinavigationbar

如何隐藏我在 Interface Builder 中创建的导航栏的左按钮？*在 Interface Builder 中，有一个Hidden*复选框，但我无法以编程方式设置它（`UINavigationBar.topItem.leftBarButtonItem`没有这样的属性）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T10:30:01.213

只需为您的 uibarbuttonitem 制作一个 IBOutlate 并通过该属性隐藏该按钮，就像

`@property (nonatomic,strong) IBOutlet UIBarButtonItem *hide;`

现在将其附加到 xib 中导航栏的左侧 barbutton 项

现在使用此代码

`hide.hidden = YES;`

你喜欢在哪里隐藏和展示它

`hide.hidden = NO;`

很简单

快乐编码

# facebook - 登录后如何删除 facebookWebView？Flash Builder 4.6 ios开发

> ID：10480252
> 
> 赞同：1
> 
> 时间：2012-05-07T10:09:12.873
> 
> 标签：facebook, actionscript-3, apache-flex, flash-builder, flex4.6

按下 facebook 按钮后，用户登录，然后该 web 视图立即转到 facebook 移动站点。我需要的是让那个 webview 消失，这样我就可以继续与我的应用程序交互，而不是 facebook 移动网站。

如果我不清楚，我很抱歉，现在是凌晨 5 点，我在这里有点疯狂，哈哈。看看代码...

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
    xmlns:s="library://ns.adobe.com/flex/spark"
    backgroundColor="#2F28C1" title="Setup"
    creationComplete="application1_creationCompleteHandler(event)">
<fx:Script>
    <![CDATA[
        import com.facebook.graph.FacebookMobile;

        import mx.events.FlexEvent;

        import views.setup_first.facebook;
        import views.setup_first.flickr;
        import views.setup_first.google;
        import views.setup_first.tumblr;
        import views.setup_first.twitter;

        public var permissions:Array = ["user_birthday", "read_stream", "publish_stream"];

        protected function application1_creationCompleteHandler(event:FlexEvent):void
        {
            FacebookMobile.init("262320357178421", loginHandler);

        }

        protected function loginHandler(success:Object,fail:Object):void
        {

        }

        protected function login():void
        {
            var facebookWebView:StageWebView = new StageWebView();
            facebookWebView.viewPort = new Rectangle (0,0, stage.width, stage.height);
            FacebookMobile.login(loginHandler, this.stage, permissions, facebookWebView);
            trace("I'm logged in!");

        }

        protected function logout():void
        {
            FacebookMobile.logout(onLogout, "https://m.facebook.com/dialog/permissions.request?app_id=262320357178421&display=touch&next=http%3A%2F%2Fwww.facebook.com%2Fconnect%2Flogin_success.html&type=user_agent&perms=publish_stream&fbconnect=1");

        }

        protected function onLogout(result:Object):void
        {
            trace("Perfect Log Out!")
        }

    ]]>
</fx:Script>
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>

<s:navigationContent/>

<s:Button left="62" top="86" click="navigator.pushView(views.setup_first.google)"
          icon="@Embed('../Setup/Setup_0002_Layer-5.png')"/>

<s:Button right="64" top="86" click="login()" icon="@Embed('../Setup/Setup_0001_Layer-6.png')"/>

<s:Button click="navigator.pushView(views.setup_first.tumblr)" horizontalCenter="-4"
          icon="@Embed('../Setup/Setup_0000_Layer-7.png')" verticalCenter="-14"/>

<s:Button left="62" bottom="117" click="navigator.pushView(views.setup_first.flickr)"
          icon="@Embed('../Setup/Setup_0004_Setup.png')"/>

<s:Button right="63" bottom="117" click="navigator.pushView(views.setup_first.twitter)"
          icon="@Embed('../Setup/Setup_0005_Layer-1.png')"/>

<s:Button right="54" bottom="10" label="Skip" click="navigator.pushView(thirdPage)"/>
<s:Button id="logOut" x="323" y="210" height="28" label="LogOut" fontSize="15"
          click="logout()"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:50:54.227

你好科里我不知道你是否解决了你的问题，但我只是做了一会儿，所以我会告诉你我的经历。

使用您的代码，如果用户登录并在他的 facebook 应用程序中安装应用程序，loginHandler 将与 FacebookSession 一起成功调度，并且 facebookWebView 会自动删除。但是，如果用户取消安装或不允许请求的权限，则不会发送任何事件，并且 facebookWebView 会显示一个带有“成功”字样的白页。我已经修复了将侦听器添加到位置 chage 事件的 facebookWebView 的问题。然后总是 facebookWebView 更改显示方法已调度的 url，包括当用户拒绝错误时（在用户不允许应用程序时调度）。这是我的代码：

```
private var facebookWebView:StageWebView = new StageWebView(); 

protected function login():void{
    facebookWebView.addEventListener(LocationChangeEvent.LOCATION_CHANGE, locationChange);
    facebookWebView.addEventListener(LocationChangeEvent.LOCATION_CHANGING, locationChange);
    facebookWebView.viewPort = new Rectangle(0, 0, stage.width, stage.height);
    FacebookMobile.login(onLogin, this.stage, permissions, facebookWebView);
}

private function locationChange(e:LocationChangeEvent):void
{
    var url:String = e.location;
    if(url.search("error") != -1)
        removeFacebookView();   
}

protected function onLogin(success:Object, fail:Object):void{
    if(success){
        //save user content FacebookSession(success).user
        removeFacebookView();
        setCurrentState("login");   
    }
}

private function removeFacebookView():void
{   
    facebookWebView.removeEventListener(LocationChangeEvent.LOCATION_CHANGE, locationChange);
    facebookWebView.removeEventListener(LocationChangeEvent.LOCATION_CHANGING, locationChange);
    this.actionBarVisible = true;
    facebookWebView.stage = null;
} 
```

如您所见，要删除 facebookWebView 我在视图中有一个变量，而不是函数的局部变量。（您也可以通过 e.target 获得它）。您将使用 facebookWebView.stage = null; 删除它 之前不要删除事件监听器。仅当 loginhandle 成功发送，并且出现错误且您必须删除 facebookWebView 时。

# ios - Core Data (iOS) 中的多列索引

> ID：10480255
> 
> 赞同：2
> 
> 时间：2012-05-07T10:09:19.473
> 
> 标签：ios, ios5, core-data, indexing, multiple-columns

我记得在某处阅读过有关 Core Data (iOS) 中多列索引的信息，但我在任何地方都找不到该信息。

iOS5 Core Data 是否可以进行多列索引？

我可以在单列上设置多个索引，但找不到多列索引的选项。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T21:49:54.907

我在 WWDC 2011 视频中找到了我正在寻找的内容，即 Core Data (iOS5) 中的新功能。

他们称之为“复合索引”，它们是通过在 XCode 中选择实体来设置的，然后当您可以设置看起来像多列索引的内容时，您在检查器中有一个“索引”字段：“attribute1,attribute2”。

我刚刚测试了它，它确实有效，所以从 iOS5 开始支持多列索引

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-05-07T11:07:33.507

CoreData 无法创建或使用多列索引。这意味着当您执行与您的多属性谓词对应的查询时，CoreData 只能使用一个索引进行选择。随后它使用索引进行属性测试之一，但是 SQLite 不能使用索引来收集第二个属性的匹配项，因此必须在内存中完成所有操作，而不是使用其磁盘索引结构。

[资源](https://stackoverflow.com/questions/5111865/is-this-a-bug-i-should-submit-to-apple-or-is-this-expected-behavior)

# php - 寻求在 PHP 中处理 XML 的建议

> ID：10480259
> 
> 赞同：1
> 
> 时间：2012-05-07T10:09:43.717
> 
> 标签：php, xml, csv

我正在创建一个处理联盟营销公司提供的提要的 Wordpress 插件。

内容将采用 CSV 或 XML 格式

问题是不同公司之间没有标准，因此它们会带有不同的键、标题和内容。

在解析 CSV 时，我使用了 Kazuyoshi Tlacaelel 的[CSV Parser](http://code.google.com/p/php-csv-parser/)

这是解析 CSV 文件的一种干净、简单的方法：

```
$csv = new File_CSV_DataSource;

$csv->load($file);

$csv->countRows();

$csv->getHeaders();

$csv->getrawArray(); 
```

最重要的是，它对不同的标题和行完全不可知

我正在考虑使用 SimpleXML 来解析 XML，但由于标签会因一个来源而异，它似乎不是一个可行的解决方案。

查看另一个处理附属提要的 Wordpress 插件，我看到他们在解析内容之前将其 XML 文件转换为 CSV。

你会为这个问题实施什么解决方案？

# scala - 对类型化类使用 scala 通配符

> ID：10480263
> 
> 赞同：0
> 
> 时间：2012-05-07T10:09:51.953
> 
> 标签：scala, wildcard

这可能是一个非常愚蠢的问题，但无论如何我都会尝试。我正在尝试将通配符与类型化类一起使用，以便获取它的属性。

我正在尝试提供一个 sintax（类似 DSL）来创建对象，这些对象将根据其类型参数化处理传入的消息。我真的很喜欢 sintax 看起来像这样：

```
// Types of message
trait TypeMessage
case class TypeMessage1 extends TypeMessage{
    val a : String,
    val b : Int
}
case class TypeMessage2 extends TypeMessage{
    val c : Double,
    val d : String
}

// Here is the problem
class TreatMsg[T <: TypeMessage] {
    // I'm using a random sintax here, just for ilustration
    def getParamInfo( variable : ?? ) = { 
        println("name: " + variable.name + "  value: " + variable.val + "  type: " + variable.val.getClass)
    }
}
object TreatMsg{
    def apply[T <: TypeMessage] = new TreatMsg[T]
}

// Creating actors
TreatMsg[TypeMessage1].getParamInfo(_.a)
TreatMsg[TypeMessage2].getParamInfo(_.d) 
```

那么，如何让这个通配符工作呢？我的意思是，我希望“getParamInfo()”函数只接受传递给 TreatMsg 的类中的属性。我有一个使用[反射](https://stackoverflow.com/questions/1589603/scala-set-a-field-value-reflectively-from-field-name)的解决方案，但我想摆脱这种反射。任何的想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:54:35.317

```
def useVariable[RetVal](func: (T)=>RetVal) = //... 
```

# android - 显示所选按钮

> ID：10480264
> 
> 赞同：0
> 
> 时间：2012-05-07T10:10:23.173
> 
> 标签：android, android-layout

我有一组按钮，使用户能够在触摸屏上选择某些视图。

我想让用户通过在按钮周围显示一个光环（或任何其他样式）来知道哪个视图处于活动状态。我的意思是当单击按钮时，它的正常状态会更改为不同的样式，但它仍然是正常的。

我用谷歌搜索并检查了stackoverflow，无法在运行时更改样式。我怎样才能达到预期的效果？我有一些愚蠢的想法，除非万不得已，否则我不会实施，例如在相同位置制作两个按钮并更改它们的可见性。或者，如果可能的话，我可以将每个按钮放在它自己的线性布局中，然后设置每个按钮的背景颜色。或者一些 ImageButton 操作。

我已经为正常按下状态覆盖了按钮的默认样式。并且设置焦点（在focusInTouchMode中时）会导致问题，所以这是一个NO（已经尝试过）。

即使样式不能改变，也请指教一些技巧以达到效果，不必按照样式的方式进行。我只想让用户知道通过按钮选择了哪个视图。

[![示例图像](../Images/0fe7a641c013f20b07b71e0db15855b2.png)](https://i.stack.imgur.com/nNMN6.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:15:06.583

使用状态列表并将其聚焦状态设置为可绘制的按钮，周围有一个环，然后在运行时说`button.requestFocus()`。有关状态列表的更多信息，请参见[此处...](http://developer.android.com/guide/topics/resources/drawable-resource.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T10:15:41.797

为每个按钮选择选择器 xml 背景。最佳度假村

检查此链接 [如何为不同状态设置图像按钮背景图像？](https://stackoverflow.com/questions/4755871/how-to-set-image-button-backgroundimage-for-different-state)

这有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T10:16:32.997

或者你可以使用::

```
Button button;
public void onClick(View v)
{
    button.button.setBackgroundColor(**color**);
    button.setBackgroundResource(**res**)
} 
```

# jquery - jquery - 在不刷新页面的情况下向 CKeditor 提供新内容

> ID：10480274
> 
> 赞同：0
> 
> 时间：2012-05-07T10:11:02.887
> 
> 标签：jquery, ajax, ckeditor

我有加载的下拉列表（有内容）和CKeditor（没有任何内容）！脚本需要能够将相关内容（从数据库）返回给选定的下拉列表值，并将其放入 CKeditor 而不重新启动页面。我使用 jQuery ajax 来做到这一点！

问题：我不知道如何在 CKeditor 中插入内容！我试图在 textarea 标签之间插入值，但它不起作用！

# ios - iOS - 自动引用计数 (ARC) 与手动保留释放 (MRR)

> ID：10480278
> 
> 赞同：2
> 
> 时间：2012-05-07T10:11:44.110
> 
> 标签：ios, memory-management, automatic-ref-counting

几个月前，当我开始为 iOS 开发应用程序时（我是经验丰富的 Java 开发人员），我在 iOS 方面经验丰富的同事警告我远离 ARC（因为他们声称它有点错误）。现在我对 MRR 很满意。但如果真的值得，我想继续使用 ARC。在查看 Apple 的文档时，即[“关于内存管理”](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)。我发现：

“如果你打算为**iOS**编写代码，你必须**使用显式内存管理**”

所以我仍然很困惑是否去ARC。我只关心 iOS（不是 Mac 开发）。

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-07T10:21:36.847

您的同事听起来对 iOS 没有经验。ARC不是错误的。我听说过的每一位经验丰富的 iOS 开发者都提到了 ARC，他们在批准条款时都这样做了。我在 iOS 方面有超过三年的经验，我强烈推荐 ARC，只要你真正了解幕后发生的事情。苹果自己，在您链接的指南中说：

> 强烈建议您将 ARC 用于新项目。

当 Apple 说您必须使用显式内存管理时，他们将传统的手动内存管理和 ARC 组合在一起作为显式内存管理，与垃圾收集相反。

另外，请注意您链接到的是 Mac 开发者库中的文档，而不是 iOS 开发者库中的文档。如果您需要为 iOS 开发，请使用 iOS 开发人员库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T10:24:02.633

我个人的意见是，你应该开始学习使用 ARC 并在你自己的项目中实现它们（除非出于某种原因你的客户/老板不想要）。越来越多的库正在创建并转换为使用 ARC。Apple 还建议您在自己的项目中使用 ARC（请参阅 Jim 的回答）。虽然我必须坚持**任何开始学习objective-c和iOS的人都应该熟悉传统的内存管理**，然后再去ARC。另外，你可以检查这个[答案](https://stackoverflow.com/questions/8542718/starting-with-objective-c-to-arc-or-not-to-arc)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T10:24:25.410

选择 ARC，因为它在某些情况下可以提高应用程序的性能阅读下面的博客

*   [http://www.learn-cocos2d.com/2011/11/everything-know-about-arc/](http://www.learn-cocos2d.com/2011/11/everything-know-about-arc/)

*   [http://longweekendmobile.com/2011/09/07/objc-automatic-reference-counting-in-xcode-explained/](http://longweekendmobile.com/2011/09/07/objc-automatic-reference-counting-in-xcode-explained/)

*   [http://www.raywenderlich.com/5677/beginning-arc-in-ios-5-part-1](http://www.raywenderlich.com/5677/beginning-arc-in-ios-5-part-1)

还有很多

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-07T10:27:29.480

我是一个有点经验的程序员，但是从我的角度来看，ARC 可以让你节省很多时间，因为你不用担心`retain`/`release`对象和实现`dealloc`方法。此外，它还可以让您从**对象图**的角度进行思考。在这种情况下，您需要注意应用程序中的循环。

那里有很多关于如何迁移到 ARC 的教程。这是我的最爱：

1.  [http://www.mikeash.com/pyblog/friday-qa-2011-09-30-automatic-reference-counting.html](http://www.mikeash.com/pyblog/friday-qa-2011-09-30-automatic-reference-counting.html)
2.  [http://blog.mugunthkumar.com/articles/migrating-your-code-to-objective-c-arc/](http://blog.mugunthkumar.com/articles/migrating-your-code-to-objective-c-arc/)

希望能帮助到你。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-21T13:35:05.763

如果您有使用 MMR 的经验，并且可能知道任务内存管理可能变得多么乏味。使用 ARC 时，不需要保留和释放调用，不仅如此，在许多情况下，ARC 还可以显着提高性能。

就个人而言，我觉得如果你在你的代码中使用了很多 C 库，那么现在使用 ARC 会有点困难（所以如果你主要使用第三方 C 库和 CoreFoundation 之类的东西，你可能会考虑不管它是否有意义），但即便如此，如果这些库大多与您的 Objective-C 控制器等隔离，ARC 仍然很好。

遵循本指南： http: [//www.learn-cocos2d.com/2011/11/everything-know-about-arc/](http://www.learn-cocos2d.com/2011/11/everything-know-about-arc/)

# java - 解析字符串中的状态模式用法

> ID：10480279
> 
> 赞同：1
> 
> 时间：2012-05-07T10:11:45.360
> 
> 标签：java, parsing, state-pattern

> 状态模式在解析字符串时很有用。状态意味着工作的一部分，就像方法一样。当您从字符串中解析一些单词时，您会将状态更改为新的

这是什么意思？我真的很困惑。

我有一个格式为“OPERATOR OBJECT [FILTER] [VALUES]”的字符串，并且在解析查询时应该使用状态模式。有四种状态：OPERATOR、OBJECT、FILTER 和 VALUES"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T10:33:53.710

我认为您引用的作者可能指的是自动机理论的*接受者*，它使用不同的状态来存储当前的匹配进度。为了说明这一点，我将举一个例子。但是，状态不像方法，而是以不同的方式实现相同的方法。

```
/** Accepts strings which contain SO */
class Acceptor {

    private enum State {
        NOTHING_YET {
            @Override
            State nextState( char c ) {
                if(c == 'S') {
                    return FOUND_S;
                } else {
                    return NOTHING_YET;
                }
            }
        },
        FOUND_S {
            @Override
            State nextState( char c ) {
                if(c == 'O') {
                    return FOUND_SO;
                } else if(c == 'S') {
                    return FOUND_S;
                } else {
                    return NOTHING_YET;
                }
            }
        },
        FOUND_SO {
            @Override
            State nextState( char c ) {
                return FOUND_SO;
            }
        };

        abstract State nextState( char c );
    }

    boolean accept( String word ) {
        State current = State.NOTHING_YET;
        for(char c : word.toCharArray()) {
            current = current.nextState( c );
        }
        return current == State.FOUND_SO;
    }

} 
```

# android - 为什么 ProgressDialog Box 给出 NULL？

> ID：10480280
> 
> 赞同：1
> 
> 时间：2012-05-07T10:11:59.333
> 
> 标签：android, progressdialog

下面是我的代码。我在这里运行一个带有标题的 ProgressBar 线程。

在线程的 run() 中，如果我的互联网连接正常，则 ELSE 部分将执行并关闭该 ProgressBar。但是，如果我的互联网连接不工作，那么如果 pat 被执行，当我尝试关闭 ProgressBar 时，我得到空异常。我还添加了 null 检查**if(m_ProgressDialog == null)**，并在 NULL 中打印 DialobBox ..

我的代码怎么了？ProgressBar 在 ELSE 部分中解散，但在 IF 中抛出 NULL 异常...

```
public void onCreate(Bundle savedInstanceState) {
.....................
.....................
//some CODE //
.....................
.....................
viewOrders = new Runnable(){
                @Override
                public void run() {
                    try {
                        if(!utilityFunctions.HaveNetworkConnection(SplashScreenActivity.this)) //checking internet connection
                        {
                            Log.i(UtilityFunctions.APP_TAG, "NO Connecttion");
                            //updateUI(0);
                            if(m_ProgressDialog == null)
                                Log.i(UtilityFunctions.APP_TAG, "DialogBox is NULL");
                            else
                                m_ProgressDialog.dismiss();

                            Log.i(UtilityFunctions.APP_TAG, "Dismissed");
                            handler.sendEmptyMessage(0);
                        }
                        else
                        {                                  
                            try {                                   
                                m_ProgressDialog.dismiss();                                                                 
                                }
                            } catch (Exception e1) {
                                // TODO Auto-generated catch block
                                e1.printStackTrace();
                            }                       

                            Intent mainIntent = new Intent().setClass(SplashScreenActivity.this, MainActivity.class);
                            Log.i(UtilityFunctions.APP_TAG, "Starting Program");                    

                            startActivity(mainIntent);
                            finish();
                        }
                    }
                    catch(Exception e) {
                        e.printStackTrace();
                    }

                }

                private Handler handler = new Handler()
                {
                    @Override
                    public void handleMessage(Message msg) {
                        //super.dispatchMessage(msg);
                        super.handleMessage(msg);
                        updateUI(msg.what);
                    }
                };  
            };

            Thread thread =  new Thread(null, viewOrders, "MagentoBackground");
            thread.start();
            m_ProgressDialog = ProgressDialog.show(SplashScreenActivity.this, "Please wait...", "Getting required data from server. This is an one time activity...", true);
}

public void updateUI(int code){
        Log.i(UtilityFunctions.APP_TAG, "updateUI");
        if(code == 0)
            Toast.makeText(SplashScreenActivity.this, "Unable to verify application signature. Please Check your internet connection & try again", Toast.LENGTH_LONG).show();
        else
            Toast.makeText(SplashScreenActivity.this, "Unable to process request. ", Toast.LENGTH_LONG).show();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T10:33:33.567

尝试`ProgressDialog()`在顶部声明

```
public void onCreate(Bundle savedInstanceState) {
....................
.....................
//some CODE //
m_ProgressDialog = ProgressDialog.show(SplashScreenActivity.this, "Please wait...", 
"Getting required data from server. This is an one time activity...", true);
.....................
viewOrders = new Runnable(){
            @Override
            public void run() {
                try {
                      if(!utilityFunctions.HaveNetworkConnection(SplashScreenActivity.this)) //checking internet connection
                    {
                        Log.i(UtilityFunctions.APP_TAG, "NO Connecttion");
                        //updateUI(0);
                        if(m_ProgressDialog == null)
                            Log.i(UtilityFunctions.APP_TAG, "DialogBox is NULL");
                        else
                            m_ProgressDialog.dismiss();

                        Log.i(UtilityFunctions.APP_TAG, "Dismissed");
                        handler.sendEmptyMessage(0);
                    }
                    else
                    {                                  
                        try {                                   
                            m_ProgressDialog.dismiss();                                                                 
                            }
                        } catch (Exception e1) {
                            // TODO Auto-generated catch block
                            e1.printStackTrace();
                        }                       

                        Intent mainIntent = new Intent().setClass(SplashScreenActivity.this, MainActivity.class);
                        Log.i(UtilityFunctions.APP_TAG, "Starting Program");                    

                        startActivity(mainIntent);
                        finish();
                    }
                }
                catch(Exception e) {
                    e.printStackTrace();
                }

            }

            private Handler handler = new Handler()
            {
                @Override
                public void handleMessage(Message msg) {
                    //super.dispatchMessage(msg);
                    super.handleMessage(msg);
                    updateUI(msg.what);
                }
            };  
        };

        Thread thread =  new Thread(null, viewOrders, "MagentoBackground");
        thread.start();

}

public void updateUI(int code){
    Log.i(UtilityFunctions.APP_TAG, "updateUI");
    if(code == 0)
        Toast.makeText(SplashScreenActivity.this, "Unable to verify application   
signature. Please Check your internet connection & try again", 
Toast.LENGTH_LONG).show();
    else
        Toast.makeText(SplashScreenActivity.this, "Unable to process request. ",  
Toast.LENGTH_LONG).show();
} 
```

希望这可以帮助你..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T11:03:53.983

在调用线程之前初始化进度对话框。

```
m_ProgressDialog = ProgressDialog.show(SplashScreenActivity.this, "Please wait...", "Getting required data from server. This is an one time activity...", true);
    Thread thread =  new Thread(null, viewOrders, "MagentoBackground");
    thread.start(); 
```

希望这有帮助...

# ruby - 在 RVM 安装 1.9.3 期间运行配置时出错

> ID：10480284
> 
> 赞同：2
> 
> 时间：2012-05-07T10:12:07.730
> 
> 标签：ruby, osx-lion, rvm

运行“rvm install 1.9.3”时出现以下错误：

> 运行时出错' ./configure --prefix=/Users/jordan/.rvm/rubies/ruby-1.9.3-p194 --enable-shared --disable-install-doc --with-libyaml --with-opt- dir=/Users/jordan/.rvm/usr '，请阅读/Users/jordan/.rvm/log/ruby-1.9.3-p194/configure.log 运行configure时出现错误。停止安装。

这是 configure.log 的输出：

```
[2012-05-07 19:07:43]  ./configure --prefix=/Users/jordan/.rvm/rubies/ruby-1.9.3-p194 --enable-shared --disable-install-doc --with-libyaml  --with-opt-dir=/Users/jordan/.rvm/usr 
configure: WARNING: unrecognized options: --with-libyaml
checking build system type... x86_64-apple-darwin11.3.0
checking host system type... x86_64-apple-darwin11.3.0
checking target system type... x86_64-apple-darwin11.3.0
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether /usr/bin/gcc-4.2 accepts -g... yes
checking for /usr/bin/gcc-4.2 option to accept ISO C89... none needed
checking whether we are using the GNU C++ compiler... yes
checking whether g++-4.2 accepts -g... yes
checking how to run the C preprocessor... /usr/bin/gcc-4.2 -E
checking for grep that handles long lines and -e... /usr/bin/grep
checking for egrep... /usr/bin/grep -E
checking whether /usr/bin/gcc-4.2 needs -traditional... no
checking whether the linker is GNU ld... no
checking whether /usr/bin/gcc-4.2 -E accepts -o... yes
checking for real target cpu... x86_64
checking for ranlib... ranlib
checking for ar... ar
checking for as... as
checking for objdump... no
checking for gobjdump... no
checking for objcopy... no
checking for gobjcopy... no
checking for nm... nm
checking whether ln -s works... yes
checking whether make sets $(MAKE)... yes
checking for a BSD-compatible install... /usr/bin/install -c
checking for a thread-safe mkdir -p...  -d
use 'mkdir -p' as MKDIR_P
checking for dot... no
checking for doxygen... no
checking for pkg-config... pkg-config
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking minix/config.h usability... no
checking minix/config.h presence... no
checking for minix/config.h... no
checking whether it is safe to define __EXTENSIONS__... yes
checking for cd using physical directory... cd -P
checking whether -Wno-unused-parameter is accepted... yes
checking whether -Wno-parentheses is accepted... yes
checking whether -Wno-long-long is accepted... yes
checking whether -Wno-missing-field-initializers is accepted... yes
checking whether -Werror=pointer-arith is accepted... yes
checking whether -Werror=write-strings is accepted... yes
checking whether -Werror=declaration-after-statement is accepted... yes
checking whether -Werror=shorten-64-to-32 is accepted... yes
checking whether -Werror=implicit-function-declaration is accepted... yes
checking whether -Wextra is accepted... yes
checking whether -ggdb is accepted... yes
checking whether -fvisibility=hidden is accepted... yes
checking whether -Wl,-unexported_symbol,_Init_* is accepted... yes
checking for special C compiler options needed for large files... no
checking for _FILE_OFFSET_BITS value needed for large files... no
checking whether byte ordering is bigendian... no
checking for an ANSI C-conforming const... yes
checking whether char is unsigned... no
checking for inline... inline
checking for working volatile... yes
checking for long long... yes
checking for off_t... yes
checking char bit... 8
checking size of int... 4
checking size of short... 2
checking size of long... 8
checking size of long long... 8
checking size of __int64... 0
checking size of off_t... 8
checking size of void*... 8
checking size of float... 4
checking size of double... 8
checking size of time_t... 8
checking for printf prefix for long long... ll
checking for pid_t... yes
checking for convertible type of pid_t... INT
checking for uid_t... yes
checking for convertible type of uid_t... UINT
checking for gid_t... yes
checking for convertible type of gid_t... UINT
checking for time_t... yes
checking for convertible type of time_t... LONG
checking for dev_t... yes
checking for convertible type of dev_t... INT
checking for mode_t... yes
checking for convertible type of mode_t... UINT
checking for rlim_t... yes
checking for convertible type of rlim_t... ULL
checking for prototypes... yes
checking token paste string... ansi
checking stringization... #expr
checking string literal concatenation... yes
checking for variable length prototypes and stdarg.h... yes
checking for variable length macro... yes
checking for noreturn function attribute... __attribute__ ((noreturn)) x
checking for deprecated function attribute... __attribute__ ((deprecated)) x
checking for noinline function attribute... __attribute__ ((noinline)) x
checking for stdcall function attribute... x
checking for cdecl function attribute... x
checking for fastcall function attribute... x
checking for function alias... no
checking for atomic builtins... yes
checking for exported function attribute... __attribute__ ((visibility("default")))
checking whether sys_nerr is declared... yes
checking whether Mac OS X 10.5 or later... yes
checking for broken crypt with 8bit chars... no
checking for crypt in -lcrypt... (cached) no
checking for dlopen in -ldl... yes
checking for shl_load in -ldld... no
checking for socketpair in -lsocket... no
checking for clock_gettime in -lrt... no
checking for dirent.h that defines DIR... yes
checking for library containing opendir... none required
checking for stdbool.h that conforms to C99... yes
checking for _Bool... yes
checking for sys/wait.h that is POSIX.1 compatible... yes
checking limits.h usability... yes
checking limits.h presence... yes
checking for limits.h... yes
checking sys/file.h usability... yes
checking sys/file.h presence... yes
checking for sys/file.h... yes
checking sys/ioctl.h usability... yes
checking sys/ioctl.h presence... yes
checking for sys/ioctl.h... yes
checking sys/syscall.h usability... yes
checking sys/syscall.h presence... yes
checking for sys/syscall.h... yes
checking fcntl.h usability... yes
checking fcntl.h presence... yes
checking for fcntl.h... yes
checking sys/fcntl.h usability... yes
checking sys/fcntl.h presence... yes
checking for sys/fcntl.h... yes
checking sys/select.h usability... yes
checking sys/select.h presence... yes
checking for sys/select.h... yes
checking sys/time.h usability... yes
checking sys/time.h presence... yes
checking for sys/time.h... yes
checking sys/times.h usability... yes
checking sys/times.h presence... yes
checking for sys/times.h... yes
checking sys/param.h usability... yes
checking sys/param.h presence... yes
checking for sys/param.h... yes
checking syscall.h usability... no
checking syscall.h presence... no
checking for syscall.h... no
checking pwd.h usability... yes
checking pwd.h presence... yes
checking for pwd.h... yes
checking grp.h usability... yes
checking grp.h presence... yes
checking for grp.h... yes
checking a.out.h usability... no
checking a.out.h presence... no
checking for a.out.h... no
checking utime.h usability... yes
checking utime.h presence... yes
checking for utime.h... yes
checking direct.h usability... no
checking direct.h presence... no
checking for direct.h... no
checking sys/resource.h usability... yes
checking sys/resource.h presence... yes
checking for sys/resource.h... yes
checking sys/mkdev.h usability... no
checking sys/mkdev.h presence... no
checking for sys/mkdev.h... no
checking sys/utime.h usability... no
checking sys/utime.h presence... no
checking for sys/utime.h... no
checking xti.h usability... no
checking xti.h presence... no
checking for xti.h... no
checking netinet/in_systm.h usability... yes
checking netinet/in_systm.h presence... yes
checking for netinet/in_systm.h... yes
checking float.h usability... yes
checking float.h presence... yes
checking for float.h... yes
checking ieeefp.h usability... no
checking ieeefp.h presence... no
checking for ieeefp.h... no
checking for ucontext.h... (cached) no
checking intrinsics.h usability... no
checking intrinsics.h presence... no
checking for intrinsics.h... no
checking langinfo.h usability... yes
checking langinfo.h presence... yes
checking for langinfo.h... yes
checking locale.h usability... yes
checking locale.h presence... yes
checking for locale.h... yes
checking sys/sendfile.h usability... no
checking sys/sendfile.h presence... no
checking for sys/sendfile.h... no
checking time.h usability... yes
checking time.h presence... yes
checking for time.h... yes
checking for net/socket.h... (cached) no
checking for sys/socket.h... (cached) yes
checking process.h usability... no
checking process.h presence... no
checking for process.h... no
checking for size_t... yes
checking size of size_t... 8
checking size of ptrdiff_t... 8
checking for printf prefix for size_t... z
checking for printf prefix for ptrdiff_t... t
checking for struct stat.st_blksize... yes
checking for struct stat.st_blocks... yes
checking for struct stat.st_rdev... yes
checking size of struct stat.st_size... SIZEOF_LONG
checking size of struct stat.st_blocks... SIZEOF_LONG
checking for struct stat.st_atim... no
checking for struct stat.st_atimespec... yes
checking for struct stat.st_atimensec... no
checking for struct stat.st_mtim... no
checking for struct stat.st_mtimespec... yes
checking for struct stat.st_mtimensec... no
checking for struct stat.st_ctim... no
checking for struct stat.st_ctimespec... yes
checking for struct stat.st_ctimensec... no
checking for struct timespec... yes
checking for struct timezone... yes
checking for clockid_t... no
checking for fd_mask... yes
checking for int8_t... yes
checking size of int8_t... 1
checking for uint8_t... yes
checking size of uint8_t... 1
checking for int16_t... yes
checking size of int16_t... 2
checking for uint16_t... yes
checking size of uint16_t... 2
checking for int32_t... yes
checking size of int32_t... 4
checking for uint32_t... yes
checking size of uint32_t... 4
checking for int64_t... yes
checking size of int64_t... 8
checking for uint64_t... yes
checking size of uint64_t... 8
checking for int128_t... no
checking for uint128_t... no
checking for intptr_t... yes
checking size of intptr_t... 8
checking for uintptr_t... yes
checking size of uintptr_t... 8
checking for ssize_t... yes
checking size of ssize_t... 8
checking for stack end address... no
checking for gc_mark and gc_children stack frame approximate size(word)... 20
checking for uid_t in sys/types.h... (cached) yes
checking type of array argument to getgroups... (cached) gid_t
checking return type of signal handlers... void
checking for working alloca.h... yes
checking for alloca... yes
checking for dynamic size alloca... ok
checking for working memcmp... yes
checking for broken erfc of glibc-2.3.6 on IA64... no
checking for dup2... yes
checking for memmove... yes
checking for strerror... yes
checking for strchr... yes
checking for strstr... yes
checking for crypt... yes
checking for flock... yes
checking for isnan... yes
checking for finite... yes
checking for isinf... yes
checking for hypot... yes
checking for acosh... yes
checking for erf... yes
checking for tgamma... yes
checking for lgamma_r... yes
checking for cbrt... yes
checking for strlcpy... yes
checking for strlcat... yes
checking for ffs... yes
checking for setproctitle... no
checking for signbit... yes
checking for fmod... yes
checking for killpg... yes
checking for wait4... yes
checking for waitpid... yes
checking for fork... yes
checking for spawnv... no
checking for syscall... yes
checking for __syscall... yes
checking for chroot... yes
checking for getcwd... yes
checking for eaccess... no
checking for truncate... yes
checking for ftruncate... yes
checking for ftello... yes
checking for chsize... no
checking for times... yes
checking for utimes... yes
checking for utimensat... no
checking for fcntl... yes
checking for lockf... yes
checking for lstat... yes
checking for truncate64... no
checking for ftruncate64... no
checking for ftello64... no
checking for fseeko... yes
checking for fseeko64... no
checking for link... yes
checking for symlink... yes
checking for readlink... yes
checking for readdir_r... yes
checking for fsync... yes
checking for fdatasync... (cached) no
checking for fchown... yes
checking for posix_fadvise... no
checking for setitimer... yes
checking for setruid... yes
checking for seteuid... yes
checking for setreuid... yes
checking for setresuid... no
checking for socketpair... yes
checking for setrgid... yes
checking for setegid... yes
checking for setregid... yes
checking for setresgid... no
checking for issetugid... yes
checking for pause... yes
checking for lchown... yes
checking for lchmod... yes
checking for getpgrp... yes
checking for setpgrp... yes
checking for getpgid... yes
checking for setpgid... yes
checking for initgroups... yes
checking for getgroups... yes
checking for setgroups... yes
checking for getpriority... yes
checking for getrlimit... yes
checking for setrlimit... yes
checking for sysconf... yes
checking for close... yes
checking for getgrnam_r... yes
checking for dlopen... yes
checking for sigprocmask... yes
checking for sigaction... yes
checking for sigsetjmp... yes
checking for _setjmp... yes
checking for _longjmp... yes
checking for setsid... yes
checking for telldir... yes
checking for seekdir... yes
checking for fchmod... yes
checking for cosh... yes
checking for sinh... yes
checking for tanh... yes
checking for log2... yes
checking for round... yes
checking for setuid... yes
checking for setgid... yes
checking for daemon... (cached) no
checking for select_large_fdset... no
checking for setenv... yes
checking for unsetenv... yes
checking for mktime... yes
checking for timegm... yes
checking for gmtime_r... yes
checking for clock_gettime... no
checking for gettimeofday... yes
checking for poll... yes
checking for ppoll... no
checking for pread... yes
checking for sendfile... yes
checking for shutdown... yes
checking for sigaltstack... yes
checking for dl_iterate_phdr... no
checking for unsetenv returns a value... yes
checking for __builtin_setjmp... no
checking for setjmp type... _setjmp
checking whether struct tm is in sys/time.h or time.h... time.h
checking for struct tm.tm_zone... yes
checking for struct tm.tm_gmtoff... yes
checking for external int daylight... yes
checking for external timezone... long
checking for external altzone... no
checking for timezone... yes
checking whether timezone requires zero arguments... yes
checking for negative time_t for gmtime(3)... yes
checking for localtime(3) overflow correctly... yes
checking whether right shift preserve sign bit... yes
checking read count field in FILE structures... _r
checking read buffer ptr field in FILE structures... _p
checking size of struct stat.st_ino... SIZEOF_LONG
checking whether _SC_CLK_TCK is supported... yes
checking stack growing direction on x86_64... -1
checking for pthread_kill in -lthr... no
checking for pthread_kill in -lpthread... yes
checking for pthread_np.h... no
checking for sched_yield... yes
checking for pthread_attr_setinheritsched... yes
checking for pthread_getattr_np... no
checking for pthread_attr_get_np... no
checking for pthread_attr_getstack... yes
checking for pthread_get_stackaddr_np... yes
checking for pthread_get_stacksize_np... yes
checking for thr_stksegment... no
checking for pthread_stackseg_np... no
checking for pthread_getthrds_np... no
checking for pthread_condattr_setclock... no
checking for pthread_sigmask... yes
checking if fork works with pthread... yes
checking for backtrace... yes
checking valgrind/memcheck.h usability... no
checking valgrind/memcheck.h presence... no
checking for valgrind/memcheck.h... no
checking whether ELF binaries are produced... no
checking whether OS depend dynamic link works... yes
checking for strip... strip
checking for prefix of external symbols... _
checking pthread.h usability... yes
checking pthread.h presence... yes
checking for pthread.h... yes
checking for if make is GNU make... yes
checking for nroff... /usr/bin/nroff
.ext/include/x86_64-darwin11.3.0/ruby/config.h updated
ruby library version = 1.9.1
configure: creating ./config.status
config.status: creating Makefile
config.status: creating ruby-1.9.pc
Unknown keyword 'URL' in './ruby.tmp.pc' 
```

我正在运行 lion，并且我有最新版本的 XCode，并且已经下载了命令行工具。我见过很多人对 gcc 有问题，但在这种情况下这似乎不是问题。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T06:42:59.783

我认为这是因为您的路径中有旧版本的 pkg-config。运行`pkg-config --version`，它应该是 Xcode 4.3.2 的 0.25。它应该在`/usr/local/bin`. 如果你有一个旧版本`/usr/bin`，你可以删除它，一切都会很酷。

# android - 在两台 Android 设备之间共享标签 NFC

> ID：10480291
> 
> 赞同：-2
> 
> 时间：2012-05-07T10:12:30.440
> 
> 标签：android, nfc

有可能的？我声明我的手机上启用了 NFC，并且一切看起来都正确我尝试使用 NXP 的名为 NFC TagWriter 的应用程序但不起作用。我用这个应用程序创建了一个标签，然后我尝试用其他设备收听但不工作，然后我在另一台设备上安装了相同的应用程序但不工作。请帮助我或向我建议另一种方法（分享标签 NFC）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:04:56.907

Android Beam™ 功能允许设备通过物理轻敲设备将 NDEF 消息推送到另一台设备上。与蓝牙等其他无线技术相比，这种交互提供了一种更简单的数据发送方式，因为使用 NFC，不需要手动设备发现或配对。当两个设备进入范围时，连接会自动开始。Android Beam 可通过一组 NFC API 使用，因此任何应用程序都可以在设备之间传输信息。例如，联系人、浏览器和 YouTube 应用程序使用 Android Beam 与其他设备共享联系人、网页和视频。

[来自开发者文档的参考](http://developer.android.com/guide/topics/nfc/nfc.html)

还要检查这个[博客](http://www.jessechen.net/blog/how-to-nfc-on-the-android-platform/)，它解释了如何在设备之间进行通信。

您可以在 2 个方向上进行（独立的）p2p 通信，现在不推荐使用 enableForegroundNdefPush；请使用[setNdefPushMessage](http://developer.android.com/reference/android/nfc/NfcAdapter.html#setNdefPushMessage%28android.nfc.NdefMessage,%20android.app.Activity,%20android.app.Activity...%29)

# r - 为什么我会收到这样的深色文字？

> ID：10480292
> 
> 赞同：1
> 
> 时间：2012-05-07T10:12:31.220
> 
> 标签：r, graph, ggplot2

我正在使用以下数据来绘制我的图表：

```
transData = structure(list(Type = c("A", "B", "A", 
"A", "A", "B", "B", 
"B", "A", "A", "A", 
"A", "A", "A", "A", 
"A", "A", "B", "A", 
"B", "A", "A", "B", 
"A", "A", "B", "A", 
"A", "A", "B", "A", 
"A", "B", "B", "A", 
"B", "A", "A", "B", 
"B", "A", "A", "A", 
"A", "B", "B", "A", 
"A", "A", "A", "B", 
"A", "A", "A", "A", 
"A", "A", "B", "B", 
"A", "A", "A", "A", 
"B", "A", "A", "B", 
"B", "A", "A", "C", 
"A", "B", "B", "A", 
"A", "A", "A", "B", 
"A", "B", "B", "A", 
"A", "B", "B", "B", 
"A", "B", "A", "A", 
"B", "A", "C", "A", 
"B", "A", "C", "B", 
"A", "B", "A", "A", 
"A", "B", "A", "A", 
"B", "A", "A", "B", 
"A", "A", "A", "B", 
"B", "C", "B", "B", 
"A", "B", "C", "B", 
"A", "B", "A", "A", 
"B", "B", "B", "A", 
"B", "B", "B", "A", 
"A", "A", "A", "A", 
"A", "A", "A", "A", 
"A", "B", "A", "B", 
"A", "C", "B", "B", 
"B", "B", "A", "A", 
"B", "A", "A", "A", 
"B", "A", "A", "A", 
"C", "A", "B", "A", 
"A", "B", "B", "B", 
"A", "A", "A", "B", 
"C", "B", "A", "A", 
"B", "A", "A", "A", 
"B", "C", "A", "B", 
"C", "B", "A", "B", 
"B", "A", "B", "B", 
"A", "A", "C", "C", 
"A", "B", "A", "A", 
"A", "A", "A", "A", 
"B", "B", "A", "A", 
"B", "A", "B", "B", 
"B", "A", "C", "A", 
"A", "A", "A", "A", 
"B", "B", "A", "C", 
"A", "B", "B", "B", 
"B", "B", "B", "B", "B", 
"B", "A", "A", "B", 
"A", "B", "A", "B", 
"B"), Time = c(53L, 195L, 48L, 172L, 73L, 39L, 469L, 
135L, 46L, 121L, 158L, 158L, 53L, 261L, 53L, 72L, 153L, 90L, 
53L, 13L, 568L, 173L, 163L, 619L, 156L, 11L, 67L, 88L, 264L, 
392L, 45L, 969L, 37L, 150L, 187L, 407L, 46L, 88L, 37L, 139L, 
508L, 78L, 51L, 803L, 17L, 21L, 255L, 64L, 154L, 47L, 400L, 459L, 
189L, 236L, 52L, 86L, 153L, 25L, 56L, 265L, 384L, 123L, 356L, 
66L, 44L, 124L, 151L, 357L, 860L, 54L, 187L, 80L, 105L, 13L, 
100L, 92L, 794L, 284L, 238L, 383L, 533L, 319L, 146L, 152L, 769L, 
216L, 13L, 123L, 19L, 206L, 81L, 26L, 51L, 243L, 1041L, 258L, 
65L, 164L, 23L, 60L, 51L, 383L, 137L, 460L, 12L, 52L, 766L, 415L, 
72L, 111L, 355L, 68L, 690L, 56L, 156L, 20L, 309L, 120L, 74L, 
136L, 284L, 101L, 191L, 160L, 12L, 309L, 655L, 586L, 14L, 17L, 
590L, 31L, 20L, 152L, 68L, 68L, 44L, 167L, 54L, 510L, 68L, 142L, 
73L, 72L, 263L, 74L, 654L, 73L, 207L, 185L, 194L, 412L, 274L, 
538L, 111L, 702L, 198L, 192L, 136L, 78L, 141L, 904L, 88L, 155L, 
78L, 352L, 106L, 901L, 40L, 572L, 242L, 237L, 776L, 215L, 357L, 
138L, 118L, 70L, 761L, 39L, 191L, 153L, 146L, 22L, 109L, 102L, 
293L, 184L, 34L, 201L, 183L, 295L, 541L, 79L, 130L, 46L, 87L, 
338L, 515L, 362L, 76L, 947L, 46L, 67L, 45L, 140L, 465L, 359L, 
45L, 166L, 88L, 49L, 352L, 77L, 137L, 245L, 79L, 106L, 94L, 59L, 
488L, 45L, 250L, 83L, 293L, 195L, 106L, 452L, 691L, 34L, 499L, 
239L, 75L, 25L, 621L, 20L, 674L, 332L, 95L, 146L, 383L, 333L, 
185L, 220L, 161L), ecd = c(0.123382007072638, 0.579233848636846, 
0.0786196511057343, 0.563264580971557, 0.25540176985161, 0.205968448867862, 
0.883020300954129, 0.481843067137138, 0.0563442242940052, 0.439070404900086, 
0.534762525168779, 0.534762525168779, 0.123382007072638, 0.707356897514424, 
0.123382007072638, 0.247948427268574, 0.520566487876686, 0.384657985094701, 
0.123382007072638, 0.0339245874143578, 0.916735757432192, 0.566242533967276, 
0.530245731736262, 0.933461362751899, 0.52861203702137, 0.00379752844190573, 
0.221696756400061, 0.324190792033976, 0.711629244852033, 0.814633142929477, 
0.0413783184717687, 0.987792084736299, 0.195825883320939, 0.508900457285717, 
0.591470533493511, 0.829918194908147, 0.0563442242940052, 0.324190792033976, 
0.195825883320939, 0.490893843257014, 0.894172687433377, 0.277338792913825, 
0.102722458164836, 0.970008967699362, 0.0718524027278913, 0.104416209117233, 
0.70075802439891, 0.19962437183804, 0.521818581749886, 0.0676046090590684, 
0.822259845883637, 0.869706096343547, 0.594177763489619, 0.678296475524949, 
0.112350044838497, 0.314554745266578, 0.520566487876686, 0.13253374262251, 
0.27733033750534, 0.713042080506252, 0.826931862405035, 0.44684523104516, 
0.804673355780782, 0.31380243358281, 0.0261247694624456, 0.449603221603695, 
0.511210620421209, 0.778097754711309, 0.976692441752255, 0.135767584304834, 
0.593356785279394, 0.289402886583983, 0.421889586860552, 0.0339245874143578, 
0.372142603340045, 0.338259927920001, 0.968553831576454, 0.735469789005262, 
0.630104906723208, 0.826161993874892, 0.920441779142075, 0.731641323438662, 
0.497140488316611, 0.517512394037326, 0.982610484343107, 0.604076013860979, 
0.0339245874143578, 0.44684523104516, 0.0906976376208484, 0.632831931777804, 
0.294275900576978, 0.13978069273248, 0.102722458164836, 0.670274658368286, 
0.992614338166867, 0.662969350780867, 0.206578568890543, 0.544851846840752, 
0.117517682241808, 0.176545236121216, 0.257140144622541, 0.826161993874892, 
0.466421887954519, 0.870416744217526, 0.0201585468124496, 0.112350044838497, 
0.96496675183161, 0.837624013038181, 0.247948427268574, 0.410077663660513, 
0.775645184259245, 0.23097747923047, 0.951760545506844, 0.147560954975381, 
0.519739236380322, 0.099416130002057, 0.732309565687999, 0.455829997310084, 
0.340052848937483, 0.458562460872066, 0.688681782939603, 0.2929238262752, 
0.572967926707701, 0.540464628348082, 0.0201585468124496, 0.757728295629516, 
0.943055109050608, 0.942483267140303, 0.0416304055443915, 0.0718524027278913, 
0.924569804233431, 0.165255779363598, 0.099416130002057, 0.51320432285321, 
0.23097747923047, 0.23097747923047, 0.0261247694624456, 0.550642121114702, 
0.135767584304834, 0.895247119338082, 0.23097747923047, 0.480406422903166, 
0.25540176985161, 0.247948427268574, 0.668190952388487, 0.261653779123873, 
0.963448788746657, 0.25540176985161, 0.626978757948857, 0.562762069020079, 
0.577920536717353, 0.835567018465482, 0.678048703302267, 0.906431363259505, 
0.410077663660513, 0.973591354293581, 0.614397387523054, 0.600252110793388, 
0.458562460872066, 0.350701751609994, 0.476438638940119, 0.982199962775588, 
0.324190792033976, 0.525233391963199, 0.277338792913825, 0.771499549043497, 
0.390424865907514, 0.981929239775977, 0.211095112264435, 0.936992673934714, 
0.637241095586956, 0.6798954332414, 0.966176545236121, 0.647950119287322, 
0.778097754711309, 0.476796103368962, 0.452475513853067, 0.237187188034043, 
0.963723118052148, 0.205968448867862, 0.597536420703541, 0.520566487876686, 
0.497140488316611, 0.109432111267583, 0.340819916114193, 0.381262584389435, 
0.697305337109764, 0.586321201461237, 0.182803525372237, 0.621774589262449, 
0.559613285020333, 0.698950932767924, 0.907581936007851, 0.354182819348407, 
0.474437886675422, 0.0563442242940052, 0.319503900103213, 0.771884724665133, 
0.952509809227439, 0.809817092773388, 0.346461178183199, 0.985702441583053, 
0.0563442242940052, 0.221696756400061, 0.0413783184717687, 0.473765249318962, 
0.872447166714607, 0.780249687495055, 0.231459358534154, 0.546454374714472, 
0.324190792033976, 0.250130540040191, 0.800113365256087, 0.348723872213168, 
0.486336809126727, 0.642130413455909, 0.283286238811526, 0.317886618860777, 
0.348589702373902, 0.168711189319978, 0.884181316728989, 0.0413783184717687, 
0.696071132468148, 0.36597098055349, 0.697305337109764, 0.608339960406761, 
0.317886618860777, 0.86644896025448, 0.971344483298786, 0.182803525372237, 
0.902150350480229, 0.631165050079906, 0.343059225620659, 0.13253374262251, 
0.954382189591607, 0.099416130002057, 0.967721008243801, 0.781780342126191, 
0.354190284428351, 0.502966819095239, 0.826161993874892, 0.749521353185968, 
0.585929172095227, 0.6082374721119, 0.527745692178674)), .Names = c("Type", 
"Time", "ecd"), row.names = c(92048L, 159572L, 29319L, 895L, 
96262L, 125686L, 151273L, 147065L, 28209L, 95224L, 103747L, 10879L, 
49632L, 69265L, 33170L, 48374L, 16205L, 143414L, 82739L, 154277L, 
13742L, 117040L, 143588L, 18939L, 116302L, 144944L, 64894L, 102723L, 
1421L, 135064L, 75449L, 5061L, 168170L, 160731L, 19821L, 173593L, 
62523L, 50640L, 167359L, 137913L, 67097L, 27037L, 104748L, 96568L, 
128256L, 178185L, 115092L, 37467L, 53973L, 2762L, 125710L, 116687L, 
82651L, 43058L, 93370L, 22432L, 18723L, 178221L, 119588L, 11606L, 
80362L, 59335L, 29222L, 162110L, 7119L, 31354L, 165632L, 139490L, 
79415L, 89257L, 189343L, 96964L, 159220L, 130710L, 115290L, 29444L, 
93645L, 13899L, 130561L, 112611L, 181065L, 121678L, 1852L, 47480L, 
171098L, 121083L, 172035L, 38523L, 157838L, 27012L, 64525L, 120340L, 
6908L, 185441L, 94868L, 127875L, 40124L, 189556L, 176948L, 84118L, 
138852L, 92739L, 93656L, 70139L, 119493L, 20076L, 4803L, 127323L, 
97064L, 101198L, 136526L, 24723L, 102465L, 101097L, 150643L, 
174126L, 185593L, 163301L, 128247L, 17460L, 163927L, 195729L, 
138856L, 41180L, 154046L, 29339L, 63140L, 140632L, 157913L, 168675L, 
42034L, 118559L, 160614L, 118860L, 49961L, 35882L, 78742L, 26291L, 
64902L, 49245L, 103381L, 101070L, 32259L, 13696L, 164332L, 101497L, 
152968L, 88841L, 191957L, 121281L, 118529L, 173451L, 125052L, 
44653L, 2222L, 172544L, 116888L, 104866L, 61270L, 155764L, 17674L, 
98520L, 40820L, 194711L, 43838L, 155574L, 32706L, 9154L, 120867L, 
156124L, 154257L, 95360L, 37296L, 54368L, 121511L, 194348L, 159059L, 
43141L, 29429L, 160099L, 103555L, 8503L, 42416L, 153399L, 186559L, 
77999L, 176027L, 188806L, 175228L, 92429L, 136741L, 174362L, 
51964L, 161122L, 121702L, 93140L, 22541L, 190945L, 182507L, 22773L, 
177446L, 111509L, 6628L, 66138L, 62548L, 89360L, 15893L, 144181L, 
176730L, 11872L, 54318L, 142521L, 35141L, 152314L, 141205L, 126686L, 
73151L, 188807L, 29005L, 108612L, 83108L, 49737L, 11175L, 170696L, 
120640L, 8301L, 188871L, 14800L, 136572L, 132040L, 166694L, 128195L, 
146465L, 179101L, 181150L, 155944L, 126596L, 3857L, 9142L, 152723L, 
95394L, 151840L, 103143L, 119138L, 158685L), class = "data.frame") 
```

我正在使用的代码如下：

```
plot =  ggplot(transData, aes(x=Time, y=ecd)) + 
  geom_line(size=1.5, aes(color=Type, group=Type, linetype=Type)) + 
  scale_y_continuous("P[X<x]", lim=c(0,1)) +
  scale_x_continuous("") + 

  geom_hline(aes(yintercept=0.5), linetype=4) +
  geom_text(aes(1100, .55, label="Median"),size=7) +
  geom_hline(aes(yintercept=0.95), linetype=4) +
  geom_text(aes(1100, 0.90, label="95th Percentile"),size=7) +

  geom_vline(aes(xintercept=30), linetype=4) +
  geom_text(aes(40, .85, label="1 month"),size=7) +
  geom_vline(aes(xintercept=90), linetype=4) +
  geom_text(aes(190, .15, label="6 months"),size=7) +
  geom_vline(aes(xintercept=365), linetype=4) +
  geom_text(aes(380, .40, label="1 year"),size=7) +
  geom_vline(aes(xintercept=365*2), linetype=4) +
  geom_text(aes(380*2, .15, label="2 years"),size=7) +
  geom_vline(aes(xintercept=365*3), linetype=4) +
  geom_text(aes(380*3, .15, label="3 years"),size=7) +
  theme_bw() +

  opts(plot.title = theme_text(size=36, colour="black", face="bold"),
       axis.text.y=theme_text(size=16, colour="black"), 
       axis.text.x=theme_text(size=16, colour="black"),
       axis.title.y=theme_text(angle=90, size=14, vjust=0.2, hjust=0.5, face="bold"), 
       axis.title.x=theme_text(size=14, vjust=0.2, hjust=0.5, face="bold"),
       legend.position = "top", 
       legend.title = theme_blank(),
       strip.text.y=theme_text(size=12, colour="black", face="bold"), 
       strip.text.x=theme_text(size=12, colour="black", face="bold"),
       legend.text = theme_text(size=12, face="bold"),
       legend.key.size = unit(1.5, "lines"),
       legend.key.width = unit(4, "line"),
       legend.direction = "horizontal")

print(plot) 
```

有谁知道为什么我从`geom_text`这么黑的地方得到文字？当我将其插入 pdf 文件时，它变得非常丑陋。关于如何解决这个问题的任何建议？

![在此处输入图像描述](../Images/dcc9cc2b8a31a190c09ffd36686e7628.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:20:26.700

答案是[kohske](https://stackoverflow.com/users/314020/kohske)本人[在这里](https://stackoverflow.com/questions/2409357/how-to-nicely-annotate-a-ggplot2-manual)列出的。一个示例的绘图方式是这样的：

```
data2.labels <- data.frame(
  time = c(7, 15), 
  value = c(.9, .6), 
  label = c("correct color", "another correct color!"), 
  type = c("NA*", "MVH")
  )

ggplot(data2, aes(x=time, y=value, group=type, col=type))+
  geom_line()+
  geom_point()+
  theme_bw() +
  geom_text(data = data2.labels, aes(x = time, y = value, label = label)) 
```

# symfony1 - 使用 XAMPP 在 Windows 上安装 symfony

> ID：10480293
> 
> 赞同：-3
> 
> 时间：2012-05-07T10:12:41.903
> 
> 标签：symfony1, symfony-1.4, xampp, pear

我是 LINux 用户，最近我搬到了 Windows 操作系统，我想在那里启动我在 linux 环境中创建的所有项目。所以我开始使用 XAMPP 服务器在 Windows 上安装 symfony ..

升级 pear: pear upgrade pear
安装 phing: pear install -a [http://phing.info/pear/phing-current.tgz](http://phing.info/pear/phing-current.tgz) --alldeps
安装 symfony: pear channel-discover pear.symfony-project.com
pear install symfony/symfony

路径变量 = ;g:\xampp\php\PEAR\symfony;g:\xampp\mysql\bin;g:\xampp\php;g:\xampp\php\PEAR

这些是我遵循的步骤。毕竟，当我在命令提示符下输入 symfony 项目创建命令时，它说“'symfony' 不被识别为内部或外部命令、可运行程序或批处理文件。” 谁能帮我！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T10:18:43.787

[这](http://seiler.it/installing-symfony-framework.html)是一篇关于在 XAMPP for Windows 上安装 symfony 的详细文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T10:21:00.463

你的 symfony 是什么版本？1.4 还是 2.0？

在 1.4 中，确保 symfony 已安装在您的`lib/vendor`文件夹中，然后生成您的项目。

查看此[文档](http://www.symfony-project.org/getting-started/1_4/en/03-Symfony-Installation)以获取更多详细信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T11:08:42.990

[http://www.softpedia.com/get/Internet/Servers/Server-Tools/XAMPP.shtml](http://www.softpedia.com/get/Internet/Servers/Server-Tools/XAMPP.shtml) 这是一个xampp服务器安装链接，这个版本对windows系统是全用户的，对linus系统是禁用的，这是一个mysql连接在一起还。

# python - 使用blob值时mysql db插入错误

> ID：10480296
> 
> 赞同：0
> 
> 时间：2012-05-07T10:12:56.490
> 
> 标签：python, mysql, blob

使用 python adbapi 在 mysql 的表中插入一行

像 insert ，id 是一个 int，value 是一个 blob

```
db.runQuery("INSERT INTO t (id, blob_value) VALUES (%(id)s, %(blob_value)s)", \
{
    "id" : id,
    "blob_value" : blob_value
} 
```

`Traceback: <class '_mysql_exceptions.ProgrammingError'>: (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near INSERT INTO t (id, blob_value) VALUES (%(id)s, %(blob_value)s)",`

我认为它可能是一个引号字符 - ' ，`blob_value`这是它失败的原因吗？

OK，原因是表名——“unlock”，这是mysql的一个关键词。

有人会帮助如何删除名为“解锁”的表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:26:47.643

简短的答案：

```
DROP TABLE `UNLOCK`
SELECT * FROM `UNLOCK` 
```

使用强大的`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T12:27:55.093

只需在表名周围加上反引号：

```
drop table `unlock`; 
```

# symfony - 来自 Symfony 2 控制器的“在非对象上调用成员函数 has()”

> ID：10480299
> 
> 赞同：8
> 
> 时间：2012-05-07T10:13:09.517
> 
> 标签：symfony

我收到一个错误

> `Fatal error: Call to a member function has() on a non-object in /labs/Projects/What2Do/vendor/symfony/src/Symfony/Bundle/FrameworkBundle/Controller/Controller.php on line 161`

我不确定如何调试它。错误在 Symfony 2 文件中，不是我的……我的控制器如下所示。我正在运行`indexAction`

```
<?php
class ProjectsController extends Controller {

    /**
     * @var EntityManager 
     */
    protected $em;

    public function __construct() {
        $this->em = $this->getDoctrine()->getEntityManager();
    }

    /**
     * @Route("/")
     * @Route("/projects", name="listProjects")
     * @Template()
     */
    public function indexAction() {
        $projects = $this->em->getRepository(Project::NAME)->findAll();

        return array('projects' => $projects);
    }

    /**
     * @Route("/projects/{projId}", name="viewProject") 
     * @Template()
     */
    public function viewAction($projId) {
        // retrieve project
        $proj = $this->em->getRepository(Project::NAME)->findOneById($projId);
        if ($proj == null)
            throw $this->createNotFoundException ('Invalid project');

        return array('proj' => $proj);
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-07T10:36:56.093

Symfony 2 控制器没有 __construct 方法，所以虽然调用父构造函数不是一个坏主意，但它不会有帮助。

问题是容器在 __construct 之后被注入，因此试图在构造函数中获取您的学说实体管理器根本行不通。我知道这有点违反直觉，但让经理了解你的行动方法。

而且我假设您的 Project::NAME 类常量中包含类似“ProjectBundle:Project”的内容。

# ruby-on-rails - 橡胶宝石 AMI 错误

> ID：10480307
> 
> 赞同：0
> 
> 时间：2012-05-07T10:13:47.317
> 
> 标签：ruby-on-rails

在 Rubber.yml 配置文件中。如果我设置：

```
cloud_providers:
  aws:
    region: eu-west-1 
```

橡胶帽：create_staging 将失败，AMI ID '' 不存在。为什么？以及如何绕过它？

如果我将其设置为：

```
cloud_providers:
  aws:
    region: us-east-1 
```

一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:19:59.713

我的错，没有意识到我在不同地区需要不同的 AMI。

一旦我找到了合适的，它就起作用了。AMI 当然可以在亚马逊上找到，也可以在[alestic上找到](http://alestic.com/)

# cross-domain - 在禁用 cookie 的情况下，我们如何将会话数据传输到另一个子域。？

> ID：10480313
> 
> 赞同：-2
> 
> 时间：2012-05-07T10:14:07.347
> 
> 标签：cross-domain, php

我们想知道将会话数据传输到子域的源代码。

```
www.xyz.com // session data transfer to dev.xyz.com
dev.xyz.com // 
```

如果用户端禁用了 Cookie，我们将无法获取数据。请建议我。

谢谢

聚苯乙烯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T10:24:30.353

我能想到的一种方法是这样的：

使用访问者 IP 和浏览器进行哈希处理，并将其与编码（[base64](http://www.php.net/base64_encode)？）`$_SESSION`数据一起发送到第二个服务器，例如：

```
file_get_contents('http://dev.xyz.com/gateway.php?session=$IPBrowser&session=$session') 
```

在第二台服务器上将其保存到`temporary table?`/`file`并将用户重定向到第二个域。然后你根据 IP 和浏览器检查他的信息并应用 SESSION 数据。

这是一个非常脆弱的解决方案，但它是一个解决方案。我发布了这个想法，你正在使用它`dev`。

不，我不会制作源代码。

# c# - 发送击键的最快方法 C#

> ID：10480314
> 
> 赞同：8
> 
> 时间：2012-05-07T10:14:08.853
> 
> 标签：c#, .net, performance, testing

我想知道使用 C# 发送击键的最快方法是什么。目前我正在使用`SendKeys.Send()`and `SendKeys.SendWait()`with `SendKeys.Flush()`.

我正在使用以下代码来计算它们两个工作所需的时间：

```
Stopwatch sw1 = new Stopwatch();
sw1.Start();
for (int a = 1; a <= 1000; a++)
{
    SendKeys.Send("a");
    SendKeys.Send("{ENTER}");
}
sw1.Stop(); 
```

和：

```
Stopwatch sw2 = new Stopwatch();
sw2.Start();
for (int b = 1; b <= 1000; b++)
{
    SendKeys.SendWait("b");
    SendKeys.SendWait("{ENTER}");
    SendKeys.Flush();
}
sw2.Stop(); 
```

2的结果是：

```
Result 1: 40119 milliseconds
Result 2: 41882 milliseconds 
```

现在，如果我们将`SendKeys.Flush()`第二个测试放在循环之外，我们会得到：

```
Result 3: 46278 milliseconds 
```

我想知道为什么代码中的这些更改会使速度大不相同。

我还想知道是否有一种更快的方式来发送许多击键，因为我的应用程序经常这样做。（这些测试是在一个非常慢的上网本上完成的）

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-10T20:21:33.600

If you have a lot of text to push to a client, you may notice that SendKeys is really sluggish. You can vastly speed things up by using the clipboard. The idea is to put the text you wish to "type" into a target text box in the clipboard and then send a CTRL-V to the target application to paste that text. Here's an illustration:

```
Clipboard.Clear();  // Always clear the clipboard first
Clipboard.SetText(TextToSend);
SendKeys.SendWait("^v");  // Paste 
```

I found this worked well for me with a cordless bar code scanner that talks via WiFi to a host app that sends long bar codes to a web app running in Google Chrome. It went from tediously pecking out 30 digits over about 4 seconds to instantly pasting all in under a second.

One obvious downside is that this can mess with your user's use of the clipboard. Another is that it doesn't help if you intend to send control codes like TAB or F5 instead of just plain old text.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-07T10:22:29.793

`SendWait()`速度较慢，因为它*等待*消息已被目标应用程序处理。相反，该`Send()`函数不会等待并尽快返回。如果应用程序有点忙，则差异可能会更加明显。

如果您调用`Flush()`，您将停止您的应用程序来处理与键盘相关的**所有**事件，这些事件在消息队列中排队。如果您使用它们发送它们并没有太大意义，`SendWait()`并且您会减慢很多应用程序，因为它在循环内（想象`Flush()`作为一个选择性`DoEvents()`- 是的，它有所有缺点 - 它也被`SendWait()`自己调用）。

如果您对它的性能感兴趣（但它们总是受限于您的应用程序处理消息的速度），请[在 MSDN 上阅读此内容](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.sendwait.aspx)。总之，您可以更改`SendKeys`类以使用该`SendInput`函数，而不是日志挂钩。作为快速参考，只需将此设置添加到您的 app.config 文件中：

```
<appSettings>
    <add key="SendKeys" value="SendInput"/>
</appSettings> 
```

无论如何，新实现的目标不是速度，而是跨不同版本的 Windows 和选项的一致行为（我猜，提高的性能是一种副作用）。

# java - Java 中的 EscPos 打印机事件

> ID：10480318
> 
> 赞同：1
> 
> 时间：2012-05-07T10:14:30.833
> 
> 标签：java, printing

我想用java写一个POS打印机类。使用低 ESCPOS 编码，一切似乎都很简单，但我对打印机事件有疑问。我如何知道打印机是否出现错误或纸卷是否用完？我阅读了 ESCPOS 命令参考，每个命令（显然）都是单向的。例如，如果纸张结束，我无法打印收据，如果发生这种情况，我的应用程序必须知道并停止记录现金问题。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:55:55.143

据我所知，纸质文件和其他基本事件都通过（硬件）事件发出信号。您必须将事件侦听器添加到您的端口（ParallelPortEventListener 或 SerialPortEventListener）才能检索这些事件。

[http://docs.oracle.com/cd/E17802_01/products/products/javacomm/reference/api/javax/comm/ParallelPortEventListener.html](http://docs.oracle.com/cd/E17802_01/products/products/javacomm/reference/api/javax/comm/ParallelPortEventListener.html)

# sql - st_intersects 与 st_overlaps

> ID：10480320
> 
> 赞同：11
> 
> 时间：2012-05-07T10:14:37.137
> 
> 标签：sql, postgis, spatial, overlap

这两个查询有什么区别：

```
select a.gid, sum(length(b.the_geom)) 
  from polygons as a 
     , roads as b 
 where st_intersects(a.the_geom,b.the_geom) 
 group by a.gid ;

select a.gid, sum(length(b.the_geom)) 
  from polygons as a 
     , roads as b 
 where st_overlaps(a.the_geom,b.the_geom) 
 group by a.gid ; 
```

第一个查询给出正确的输出，而第二个查询根本不检索任何行。与多边形相交的道路也与它重叠，对吧？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-06-10T21:03:52.690

来自 PostGIS 的文档

[http://postgis.net/docs/ST_Intersects.html](http://postgis.net/docs/ST_Intersects.html)

> 如果几何或地理共享空间的任何部分，则它们相交。Overlaps, Touches, Within 都暗示着空间的交叉。如果上述任何一个返回 true，则几何图形也在空间上相交。

[http://postgis.net/docs/ST_Overlaps.html](http://postgis.net/docs/ST_Overlaps.html)

> 如果几何“空间重叠”，则返回 TRUE。我们的意思是它们相交，但一个并不完全包含另一个。

区别在于：如果两个几何图形 100% 重叠，则它们不再重叠。

这是一个 POSTGIS 示例：

```
SELECT ST_Overlaps(a,b) As a_overlap_b, ST_Intersects(a, b) As a_intersects_b, ST_Contains(b, a) As b_contains_a
FROM (SELECT 
    ST_Polygon(ST_GeomFromText('LINESTRING(1 1,3 1,3 3,1 1)'), 4326)  As a,
    ST_Polygon(ST_GeomFromText('LINESTRING(1 1,3 1,3 3,1 1)'), 4326)  As b)
    As foo;
    -- INTERSECT is TRUE, OVERLAP is FALSE because B equals A

    SELECT ST_Overlaps(a,b) As a_overlap_b, ST_Intersects(a, b) As a_intersects_b, ST_Contains(b, a) As b_contains_a
FROM (SELECT 
    ST_Polygon(ST_GeomFromText('LINESTRING(1 1,3 1,3 3,1 1)'), 4326)  As a,
    ST_Polygon(ST_GeomFromText('LINESTRING(1 1,4 1,4 4,1 1)'), 4326)  As b)
    As foo;
    -- INTERSECT is TRUE, OVERLAP is FALSE because B contains A

    SELECT ST_Overlaps(a,b) As a_overlap_b, ST_Intersects(a, b) As a_intersects_b, ST_Contains(b, a) As b_contains_a
FROM (SELECT 
    ST_Polygon(ST_GeomFromText('LINESTRING(0 0,2 0,2 2,0 0)'), 4326)  As a,
    ST_Polygon(ST_GeomFromText('LINESTRING(1 1,3 1,3 3,1 1)'), 4326)  As b)
    As foo;
    -- INTERSECT is TRUE, OVERLAP is TRUE because not all of A intersects B and not all of B intersects A 
```

# ruby - 如何在 Ruby 中获取类似于 Python 的 cgi.fieldstorage() 的表单数据？

> ID：10480321
> 
> 赞同：0
> 
> 时间：2012-05-07T10:14:43.903
> 
> 标签：ruby, forms, form-data, http-post

为了帮助自己学习 Ruby，我将我制作的一个简单的 Python 网站转换为 Ruby。不过，我不知道如何在 Ruby 中获取表单值。我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T12:10:25.507

```
require "cgi"
cgi = CGI.new
params = cgi.params # a hash with field-names and their values 
```

# django - 在 Django 中，在多对多关系中强制执行至少一个值？

> ID：10480322
> 
> 赞同：14
> 
> 时间：2012-05-07T10:14:45.227
> 
> 标签：django, orm

我在 Django(1.4) 模型中有一个多对多的关系。

```
class UserProfile(models.Model):
    foos = models.ManyToManyField(Foo) 
```

我想强制每个用户（配置文件）至少有一个 Foo。Foos 可以有零个或多个用户（配置文件）。

我希望在模型和管理员级别执行此操作，但仅在管理员中执行就足够了。

如果我理解正确，Django 中的“许多”是零个或多个。

我想要一个 ManyToOneOrMore 关系。我怎样才能做到这一点？

谢谢，

克里斯。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-07T16:19:14.673

您不能像@Greg 详细信息那样在模型级别强制执行此操作，但您*可以*通过简单地将字段设为必填来在表单上强制执行此操作。这不会阻止任何具有 shell 级别访问权限的人手动创建没有 foo 的 UserProfile，但它会强制任何人使用基于浏览器的表单创建方法。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-07T11:00:14.950

不幸的是，我认为这在模型级别是不可能的，因为 ManyToMany 数据与其他模型字段分开保存。您应该能够通过指定自定义表单并在表单上编写 clean() 方法在管理员级别强制执行它。

# java - 非法尝试将集合与休眠中的两个打开会话相关联

> ID：10480324
> 
> 赞同：1
> 
> 时间：2012-05-07T10:14:57.950
> 
> 标签：java, spring, hibernate

我正在使用hibernate和spring，执行以下代码时出现此异常：

```
Session oSession = getSession();
     try
     {
         oSession.setFlushMode(FlushMode.COMMIT);
         getHibernateTemplate().delete(oProject);
         oSession.flush();
         bResult = true;
     }
     catch (Exception e)
     {
         bResult = false;
         logger.error(e);
     } 
```

我已经阅读了一些关于休眠的会话管理，并且我预感这段代码的会话处理能力很差。有两个公开会议的原因可能是什么？Hibernate APIs 表示该`getSession()`函数返回一个新的会话对象或一个现有的。在这种情况下，它从哪里获得现有的会话对象？如果它创建了一个新的会话对象，那么处理所涉及的集合仍然可以吗？

任何帮助将不胜感激。提前致谢！更多的权力堆栈溢出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T10:20:39.480

`HibernateTemplate.delete(Object entity)`将使用内部的其他 Session 删除对象，`HibernateTemplate`但您自己打开一个新`Session`对象，这是错误的根本原因。所以你应该尝试如下：

```
 try
 {
     getHibernateTemplate().delete(oProject);
     bResult = true;
 }
 catch (Exception e)
 {
     bResult = false;
     logger.error(e);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T10:17:48.597

Hibernate 检查是否已经为当前线程打开了一个会话。如果没有，它会使用 SessionFactory 创建一个新的；否则它会重用已经打开的会话。好吧，您可以重新附加实体对象，包含实体对象的集合也是如此。

但是您还没有提到 Hibernate 是如何配置来处理会话的。可能是您手动打开了会话，而您发布的代码实际上打开了 2 个会话。

# php - 如何获取在 CodeIgniter 中自动加载的配置文件的值

> ID：10480326
> 
> 赞同：1
> 
> 时间：2012-05-07T10:15:00.483
> 
> 标签：php, codeigniter

我正在使用 CodeIgniter，我想自动加载电子邮件配置文件并在我的控制器、库中使用。

我将电子邮件配置添加到*config/autoload.php*

```
<?php if (!defined('BASEPATH')) exit('No direct script access allowed');
/*
...some code ...
*/
$autoload['libraries'] = array(
  'database',
  'session',
  'locale',
  'util/ScriptLoader',
  'activity/Message',
  'Auth_lib',
  'email'
); 
```

我的*配置/email.php*

```
<?php if (!defined('BASEPATH')) exit('No direct script access allowed');
/*
...some code ...
*/
$config['useragent']       = "CodeIgniter";
$config['mailpath']        = "/usr/bin/sendmail"; // or "/usr/sbin/sendmail"
$config['protocol']        = "mail";
$config['smtp_host']       = "localhost";
$config['smtp_user']       = "";
$config['smtp_pass']       = "";
$config['smtp_port']       = "25";
$config['system_email']    = "noreply@xxxx.com";
$config['help_email']      = "help@xxxxx.com";
$config['inquiries_email'] = "inquiries@xxxx.com";
$config['support_email']   = "support@xxxx.com"; 
```

我试图`support_email`在我的控制器中使用

```
$this->config->item('support_email') 
```

但不起作用，如何在控制器中获取自动加载的值？请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T10:31:14.850

您需要在以下位置自动加载配置文件：`$autoload['config'] = 'email';`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T10:39:15.843

如果您不需要自动加载它，

```
1) Place the email.php under application/config
2) In your controller

   $this->config->load('email');
   $this->config->item('support_email') 
```

# android - 关闭 DialogFragment onClick

> ID：10480330
> 
> 赞同：10
> 
> 时间：2012-05-07T10:15:19.517
> 
> 标签：android, dialog, android-fragments

我试图制作一个 DialogFragment 可以在点击时关闭，经过一番搜索后我决定使用这个实现：

```
public class ErrorDialogFragment extends RoboDialogFragment {

private static final String MESSAGE_ARG = "message";
private TextView text;

public ErrorDialogFragment newInstance (String message){
    ErrorDialogFragment f = new ErrorDialogFragment();

        Bundle args = new Bundle();
        args.putString(MESSAGE_ARG, message);
        f.setArguments(args);

        return f;
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {     
    View v = inflater.inflate(R.layout.error_dialog_fragment, container, false);
    v.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            ErrorDialogFragment.this.dismiss();
        }
    });

    text = (TextView) v.findViewById(R.id.error_dialog_text_textView);
    text.setText(getArguments().getString(MESSAGE_ARG));
    return v;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setStyle(DialogFragment.STYLE_NO_TITLE, 0);
} 
```

警报对话框可以有一条自定义消息，并在点击时将被关闭。

您认为实现这一目标的更好方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-08T11:38:41.860

您可以使用**dialog.setCanceledOnTouchOutside(true);** 如果您在对话框外触摸，它将关闭对话框。或者

试试这个教程[http://iserveandroid.blogspot.com/2010/11/how-to-dismiss-custom-dialog-based-on.html](http://iserveandroid.blogspot.com/2010/11/how-to-dismiss-custom-dialog-based-on.html)。希望能帮助到你..！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T11:53:06.537

```
final AlertDialog alertDialog = new AlertDialog.Builder(this).create();
        alertDialog.setTitle(title);
        alertDialog.setMessage(msg);
        alertDialog.setButton("OK", new DialogInterface.OnClickListener() 
        {
            public void onClick(DialogInterface dialog, int which) 
            {
                alertDialog.dismiss();
            }
        });
        alertDialog.setIcon(R.drawable.error_icon);
        alertDialog.show(); 
```

只要您想显示警报，只需使用此代码，它的 ok onclick 事件对话框将关闭。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-08T18:40:03.580

我正在从 Activity 调用 DialogFragment。单击对话框中的按钮后，我使用接口调用活动中的方法。在那个活动中，我正在执行这个：

```
// This is the code inside the activity that call the dialog
Fragment fragment = getSupportFragmentManager().findFragmentByTag("MyDialog");
if(fragment != null) {
    DialogFragment dialog = (DialogFragment) fragment;
    dialog.dismiss();
} 
```

# jquery - jQuery - 在拖放“可拖动 div”时更改“普通 div”内容

> ID：10480332
> 
> 赞同：0
> 
> 时间：2012-05-07T10:15:27.590
> 
> 标签：jquery, drag-and-drop, draggable

我的页面上有两个 div。一个是可拖动的，另一个是正常的。

可拖动的 div：

```
<div id='draggable'>
     AAAAAA
</div> 
```

普通div：

```
<div id='dropbox'>
     BBBBBB
</div> 
```

当 'draggable' div 放在 'dropbox' div 上时，我想将 'draggable' div 的内容附加到 'dropbox' div。

**所以在 drop 之后，'dropbox' div 的内容应该是：**

```
AAAAAA
BBBBBB 
```

请指导我如何使用 jQuery 执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:21:23.647

```
$("#dropbox").droppable({
    drop: function(event, ui) {
        $(this).append(ui.draggable.html());
    }
})​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T10:22:15.267

尝试使用 UI droppable

```
$(function() {
        $( "#draggable" ).draggable();
        $( "#droppable" ).droppable({
            drop: function( event, ui ) {
                $( this ).append( ui.draggable.html();
            }
        });
    }); 
```

[http://jqueryui.com/demos/droppable/](http://jqueryui.com/demos/droppable/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T10:22:55.910

```
$(function() {
        $( "#draggable" ).draggable();//your drag handler
        $( "#dropbox" ).droppable({ //your drop handler
            drop: function( event, ui ) {
                $( this ).append( ui.draggable.html() );
            }
        });
    }); 
```

参见[JSFiddle中的演示](http://jsfiddle.net/SgmRm/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T10:18:20.857

您可以使用以下[`drop`](http://jqueryui.com/demos/droppable/#event-drop)事件`droppable`：

```
$("#dropbox").droppable({
    drop: function(event, ui) {
        $("<div></div>").text(ui.draggable.text()).appendTo(this);
    }
})​ 
```

**演示：http:** [//jsfiddle.net/UrMrt/](http://jsfiddle.net/UrMrt/)

# php - PHP / Mysql mysql_query 和 mysql_fetch_object 的奇怪错误

> ID：10480333
> 
> 赞同：0
> 
> 时间：2012-05-07T10:15:27.863
> 
> 标签：php, mysql

我有一个问题，我不明白发生了什么。我有一个完美运行的 mysql 查询。它应该在表中返回一行。

```
$res = mysql_query($query);     
$myobj = mysql_fetch_object($res); 
```

当我做 ：

```
var_dump($myobj); 
```

它返回：

```
object(stdClass)#3 (25) { ["id"]=> string(2) "10" ["cookie"]=> string(3) "yes" ["nb_pts_per_question"]=> string(2) "50" ["product"]=> string(10) "MyProduct" } bool(false) 
```

该对象听起来很完整，但在 var_dump 的末尾您可以看到一个 bool(false)

同样，当我将它运行到 mysql 中时，查询工作正常。

任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:21:21.640

看起来像个流浪者`var_dump`。你不把你`var_dump`放在一个while循环中吗？这将解释`bool (false)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T10:20:00.650

这确实有点奇怪……

只是出于好奇，什么输出给出了 print_r($myobj) ？

最后，使用你的对象有用吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T10:20:50.853

当你使用`mysql_fetch_object()`这就是你得到这个结果的原因时，请查看这个链接[http://php.net/manual/en/function.mysql-fetch-object.php](http://php.net/manual/en/function.mysql-fetch-object.php)。您可以使用`mysql_fetch_assoc()`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-07T10:23:17.970

`bool(false)`值是没有更多的数据指示器在这个[链接](http://php.net/manual/en/function.mysql-fetch-object.php)中看到 它说

```
Return Values

Returns an object with string properties that correspond to the fetched row,  
or FALSE if there are no more rows. 
```

# javascript - 寻找一个 Flash MP3 播放器

> ID：10480338
> 
> 赞同：0
> 
> 时间：2012-05-07T10:16:05.727
> 
> 标签：javascript, flash, mp3

我需要一个能够使用 JavaScript 控制播放、暂停、停止和搜索的网站的 mp3 播放器，播放器不能是 HTML 5。

任何人都知道这种播放器是否存在，如果它做了，它的名字是什么。我到处搜索，没有找到一个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:21:47.533

[http://flash-mp3-player.net/](http://flash-mp3-player.net/) google上的第一个链接，开源

# jquery - 使用 jquery 和 Datalist 控件的 EditItemTemplate

> ID：10480344
> 
> 赞同：0
> 
> 时间：2012-05-07T10:16:43.247
> 
> 标签：jquery, asp.net, datalist, edititemtemplate

是否可以使用 jquery 访问 Datalist 控件的 EditItemTemplate 内的控件。我很难做到这一点，因为“编辑”行没有在 html 中呈现。

我感谢的唯一替代方法是不使用 DataList EditItemTemplate，而是只使用 jquery 来隐藏和显示行并使用 ajax 来更新行的内容。

但是，我仍然希望听到 EditItemTemplate 和 jquery 的选项。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T10:23:43.893

html**被**呈现，但只有当你点击 [编辑] 看到这篇文章它应该帮助你[http://forums.asp.net/t/1668230.aspx/1](http://forums.asp.net/t/1668230.aspx/1)

试试这个：

```
<script type="text/javascript">
    $(document).ready(function () {         
        showID();
    });

    function showID() {         
        if ($("[id*=QtyTextBox]").length)
            alert($("[id*=QtyTextBox]").attr("id"));
    }
</script> 
```

编辑项目模板：

```
<EditItemTemplate>              
            Quantity:
            <asp:TextBox ID="QtyTextBox" Text='<%# DataBinder.Eval(Container.DataItem, "Qty") %>'
                runat="server" />
            <br />              
            <asp:LinkButton ID="UpdateButton" Text="Update" CommandName="Update"
                runat="server" />               
        </EditItemTemplate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:17:36.830

我遵循了您的解决方案，但是有一个问题。现在我可以触发一个事件，但是下面的代码将 id 返回为“未定义”，尽管它是在 datalist 中声明的。

```
function bindPicker() {
            $("input[type=text][id*=txtStartDate]").click(
            function()
            {
                alert($(this).id);
            });
        } 
```

我不确定如何引用触发事件的控件。

# objective-c - SIMBL 在取景器中大放异彩

> ID：10480348
> 
> 赞同：4
> 
> 时间：2012-05-07T10:17:22.543
> 
> 标签：objective-c, macos, finder, swizzling, simbl

我设法将 Mac Os Finder 中的图标覆盖（如 Dropbox）与 SIMBL 插件集成在一起！我使用 swizzle 方法来覆盖一些查找器功能。

这是我的调酒方法：

```
void PluginSwizzleInstanceMethod(Class cls, SEL oldSel, SEL newSel) 
{
    Method mnew = class_getInstanceMethod(cls, newSel);
    Method mold = class_getInstanceMethod(cls, oldSel);
    method_exchangeImplementations(mnew, mold);
} 
```

所以目前我像这样覆盖drawWithFrame方法：

```
Class cls = NSClassFromString(@"TIconAndTextCell");
SEL oldSel = @selector(drawWithFrame:inView:);
SEL newSel = @selector(PluginDrawWithFrame:inView:);
PluginSwizzleInstanceMethod(cls, oldSel, newSel); 
```

我的所有图标都显示但不在我的桌面或将项目显示为图标的视图上...为什么？

谢谢你 ，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T21:28:51.657

我只是设法为桌面做一些事情，所以我会发布以防它仍然与某人相关：

如您所见，Finder 在桌面上绘制图标的方式不同。
负责此的一类是**TDesktopIcon**。
例如，可以通过覆盖 drawIconInContext: 方法来更改图标，并将 thumbnailImage 属性设置为他喜欢的任何 NSImage*。

```
- (void) FO_drawIconInContext:(struct CGContext *)arg1 {
    NSImage *image;
    // set image... 
    [(TDesktopIcon*)self setThumbnailImage:image];
    [self FO_drawIconInContext:arg1];
} 
```

获取每个项目的 url 并不像使用 TIconAndTextCell 或 IKImageBrowserCell 那样直接。

为了获取 URL，您需要覆盖 TDesktopViewController 的 prepareToDrawNode:**方法**。您从 arg1 获取 URL，如下所示：

```
- (void) FO_prepareToDrawNode:(const struct TFENode *)arg1 {
    struct OpaqueNodeRef *opr = arg1->fNodeRef;  
    struct FINode *fiNode = [FINode nodeFromNodeRef:opr];  
    NSURL *url = [fiNode previewItemURL];  
    // save url somewhere (I use NSUserDefaults) 
    [self FO_prepareToDrawNode:arg1];  
} 
```

也许有更好的方法，但这就是我想出来的......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T14:20:01.877

知道了！（此代码仅适用于 10.7）我遇到了问题，因为在将最终图像渲染为缩略图之前绘制了图标....所以我得到了这些工件，其中原始图标丢失了....覆盖总是在那里......这是我错误的绘制操作顺序......！

我什至有目标节点的名称...您需要 TFENodeHelper 类将 TFENode 转换为文件路径...

```
//
//  DesktopViewIconOverlay.h
//  FinderIconOverlayExample
//
//  Created by Orbitus007 on 2/20/13.
//
//

#import <Foundation/Foundation.h>
#import <Quartz/Quartz.h>
#import "Finder.h"

@interface DesktopViewIconOverlay : NSObject

+ (void)pluginLoad;
- (void) FO_prepareToDrawNode:(const struct TFENode *)arg1;
- (void) FO_drawIconInContext:(struct CGContext *)arg1;

@end

//
//  DesktopViewIconOverlay.m
//  FinderIconOverlayExample
//
//  Created by Orbitus007 on 2/20/13.
//
//

#import "DesktopViewIconOverlay.h"
#import "FinderIconOverlayExample.h"
#include <objc/objc.h>
#include <objc/runtime.h>
#import <Quartz/Quartz.h>
#import "TFENodeHelper.h"

static TFENodeHelper *gNodeHelper;

@implementation DesktopViewIconOverlay

+ (void)pluginLoad
{

    // Create helper object
    gNodeHelper = [[TFENodeHelper alloc] init];
    if (gNodeHelper == nil) {
        NSLog(@"Failed to instantiate 'TFENodeHelper' class");
        return;
    }

    Method old, new;
    Class self_class = [self class];
    Class finder_class = [objc_getClass("TDesktopIcon") class];

    class_addMethod(finder_class, @selector(FO_drawIconInContext:),
                    class_getMethodImplementation(self_class, @selector(FO_drawIconInContext:)),"v@:@");

    old = class_getInstanceMethod(finder_class, @selector(drawIconInContext:));
    new = class_getInstanceMethod(finder_class, @selector(FO_drawIconInContext:));
    method_exchangeImplementations(old, new);

    finder_class = [objc_getClass("TDesktopViewController") class];

    class_addMethod(finder_class, @selector(FO_prepareToDrawNode:),
                    class_getMethodImplementation(self_class, @selector(FO_prepareToDrawNode:)),"v@:@");

    old = class_getInstanceMethod(finder_class, @selector(prepareToDrawNode:));
    new = class_getInstanceMethod(finder_class, @selector(FO_prepareToDrawNode:));
    method_exchangeImplementations(old, new);

}

- (void) FO_prepareToDrawNode:(const struct TFENode *)arg1 {

    NSString *path = [gNodeHelper pathForNode:arg1];
    NSLog(@"Path = %@", path);
    [[NSUserDefaults standardUserDefaults] setValue:path forKey:@"TDesktopIconURL"];

    //struct OpaqueNodeRef *opr = arg1->fNodeRef;

    //NSLog(@"path = %@", [[FINode nodeWithFENode:arg1] fullPath]);

    //id fiNode = [FINode nodeFromNodeRef:opr];
    //NSURL *url = [fiNode previewItemURL];
    //[[NSUserDefaults standardUserDefaults] setValue:[url path] forKey:@"TDesktopIconURL"];
    //NSLog(@"sending ", arg1->fNodeRef);
    // save url somewhere (I use NSUserDefaults)
    [self FO_prepareToDrawNode:arg1];
}

- (void) FO_drawIconInContext:(struct CGContext *)arg1
{
    [self FO_drawIconInContext:arg1];

    NSString *iconPath = [[NSUserDefaults standardUserDefaults] valueForKey:@"TDesktopIconURL"];
    NSLog(@"recieved %@", iconPath);

    if (![iconPath isEqualToString:@"/Users/h0xff/Desktop/Restart Finder.app"])
        return;

    NSString *imagePath = @"/Users/h0xff/Desktop/020513_icons/128_synced_green.png";
    NSImage *overlay = [[NSImage alloc] initWithContentsOfFile:imagePath];

    NSImage *mainImage = [(TDesktopIcon*)self thumbnailImage];

    float width = 256.0;
    float height = 256.0;

    NSImage *finalImage = [[NSImage alloc] initWithSize:NSMakeSize(width, height)];

    [finalImage lockFocus];

    // draw the base image
    [mainImage drawInRect:NSMakeRect(0, 0, width, height)
                 fromRect:NSZeroRect operation:NSCompositeSourceOver fraction:1.0];

    // draw the overlay image at some offset point
    [overlay drawInRect:NSMakeRect(0, 0, [overlay size].width/1.5, [overlay size].height/1.5)
               fromRect:NSZeroRect operation:NSCompositeSourceOver fraction:1.0];

    [finalImage unlockFocus];

    // set image...
    [(TDesktopIcon*)self setThumbnailImage:finalImage];
    [self FO_drawIconInContext:arg1];
}

@end 
```

此代码源自 Alexey Zhuchkov 和许多其他人......如果您有任何问题，请提出问题！

```
//
//  TFENodeHelper.h
//  FinderMenu
//
//  Helper class to get full path from TFENode
//
//  Created by Alexey Zhuchkov on 11/4/12.
//  Copyright (c) 2012 InfiniteLabs. All rights reserved.
//

#import <Foundation/Foundation.h>

// Forward declarations
struct TFENode;

typedef enum {
    TFENodeCtorTypeUnknown,
    TFENodeCtorTypeNodeWithFENode,  // nodeWithFENode
    TFENodeCtorTypeNodeFromNodeRef,  // nodeFromNodeRef
} TFENodeCtorType;

typedef enum {
    TFENodePathMethodTypeUnknown,
    TFENodePathMethodTypeFullPath,  // fullPath
    TFENodePathMethodTypePreviewItemURL,  // previewItemURL
} TFENodePathMethodType;

@interface TFENodeHelper : NSObject {
    @private
    Class _class;
    TFENodeCtorType _ctorType;
    TFENodePathMethodType _pathMethodType;
}

- (NSString *)pathForNode:(const struct TFENode *)node;
@end

//
//  TFENodeHelper.m
//  FinderMenu
//
//  Created by Alexey Zhuchkov on 11/4/12.
//  Copyright (c) 2012 InfiniteLabs. All rights reserved.
//

#import "TFENodeHelper.h"

#import <objc/runtime.h>

#import "Finder.h"

@implementation TFENodeHelper

- (id)init {
    self = [super init];
    if (self) {
        _class = NSClassFromString(@"FINode");
        _ctorType = TFENodeCtorTypeUnknown;
        _pathMethodType = TFENodePathMethodTypeUnknown;

        if (_class) {
            if (class_getClassMethod(_class, @selector(nodeWithFENode:))) {
                _ctorType = TFENodeCtorTypeNodeWithFENode;
            } else if (class_getClassMethod(_class, @selector(nodeFromNodeRef:))) {
                _ctorType = TFENodeCtorTypeNodeFromNodeRef;
            }

            if (class_getInstanceMethod(_class, @selector(fullPath))) {
                _pathMethodType = TFENodePathMethodTypeFullPath;
            } else if (class_getInstanceMethod(_class, @selector(previewItemURL))) {
                _pathMethodType = TFENodePathMethodTypePreviewItemURL;
            }
        }

        if (!_class
            || (_ctorType == TFENodePathMethodTypeUnknown)
            || (_pathMethodType == TFENodePathMethodTypeUnknown)) {

            [self release];
            return nil;
        }
    }
    return self;
}

- (NSString *)pathForNode:(const struct TFENode *)node {
    FINode *fiNode = nil;
    NSString *path = nil;
    switch (_ctorType) {
        case TFENodeCtorTypeNodeWithFENode:
            fiNode = [_class nodeWithFENode:node];
            break;
        case TFENodeCtorTypeNodeFromNodeRef:
            fiNode = [_class nodeFromNodeRef:node->fNodeRef];
            break;
        default:
            break;
    }

    NSURL *url;
    if (fiNode) {
        switch (_pathMethodType) {
            case TFENodePathMethodTypeFullPath:
                path = [fiNode fullPath];
                break;
            case TFENodePathMethodTypePreviewItemURL:
                url = [fiNode previewItemURL];
                path = [url path];
            default:
                break;
        }
    }

    return path;
}

@end 
```

# visual-c++ - CMake 使用（预打包的标头和 dll）创建 exe 和 lib

> ID：10480349
> 
> 赞同：1
> 
> 时间：2012-05-07T10:17:29.090
> 
> 标签：visual-c++, cmake

```
 cmake_minimum_required(VERSION 2.8 FATAL_ERROR)
    project(ImageProc)

    set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/lib)
    set(CMAKE_LIBRARY_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/lib)
    set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/bin)

    find_package(PCL 1.2 REQUIRED)
    find_package(OpenCV REQUIRED)

    add_definitions( -fPIC -Wall -O3)
    include_directories(${PCL_INCLUDE_DIRS})
    #link_directories(${PCL_LIBRARY_DIRS}) Dont think neccesary..
    add_definitions(${PCL_DEFINITIONS})

    add_executable (ImageProc svm.cpp ImageProc.cpp testImageProc.cpp)
    target_link_libraries (ImageProc ${OpenCV_LIBS} ${PCL_LIBRARIES})
    add_library(ImageProcLib STATIC svm.cpp ImageProc.cpp)
    target_link_libraries (ImageProcLib ${OpenCV_LIBS} ${PCL_LIBRARIES}) 
```

目前，我运行它并使用 VS C++ 打开并生成一个 exe 和 lib。该exe在我的机器上运行。

当前限制：
当我将 exe 传递给我的朋友时，他无法在他的机器上运行它，因为他被缺少的 dll 主机击中。当我使用 lib 文件在 VS C++ 中创建一个新项目时，找不到头文件会出现致命错误。
我知道，我可以手动添加所有 dll 和/或打包 lib 的所有头文件和库文件。但它肯定也很麻烦和丑陋。

问题：
CMake 是否提供了一种方法，以便在编译成

1.  一个exe（它会自动在bin目录中找到所有必要的dll）

2.  进入一个库（它会自动将所有头文件以及链接部分的必要库导出到 lib 目录中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T19:13:43.240

准备你的包以部署在其他开发环境中仍然是一项艰巨的任务。您需要正确设置自己的接口/API，并且需要处理跨 dll 问题、不同的运行时等。

但是，您可以使用 CMake 的一些工具：

*   查看[安装](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command:install)和[导出](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command:export)。您可以使用它来指定（在您的 CMakeLists.txt 中）部署所需的文件。这样，您可以标记哪些头文件，以及哪些目标（libs 和 exes）应该被部署。

*   还可以结合 NSIS 查看 CPack，它可用于构建项目的 NSIS 安装程序。

*   与[InstallRequiredSystemLibraries](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#module:InstallRequiredSystemLibraries)和[BundleUtilities](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#module:BundleUtilities)一起，您可以准备一个`install`或`package`目标。另请参阅[this](https://stackoverflow.com/questions/5970845/cmake-how-to-determine-all-the-dll-so-files-that-are-need-for-an-executable)和[this](https://stackoverflow.com/questions/10022993/cmake-build-cross-platform-distribution) question 演示如何将第三方 dll 添加到此类部署包中。

*   [InstallRequiredSystemLibraries](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#module:InstallRequiredSystemLibraries)对于将 vcredist 附加到您自己的软件包安装程序非常有用，如果您在非开发 PC 上安装项目，您肯定会需要它。

# javascript - 在 iframe 中使用 iScroll

> ID：10480353
> 
> 赞同：2
> 
> 时间：2012-05-07T10:17:51.480
> 
> 标签：javascript, html, iframe, iscroll4

全部

我想在 iframe 中使用[iScroll](http://cubiq.org/iscroll)。

这是我的代码

HTML

```
<form>
        <input type="text" class="frmUrlVal">
        <input type="submit" class="frmSubmit" value="Go">
      </form>
      <iframe src="http://www.css-tricks.com" width="360" height="500" id="dynFrame"></iframe> 
```

JS

```
$(function()
{
  $('.frmSubmit').click(function(e)
  {
    $('#dynFrame').attr('src', $('.frmUrlVal').attr('value'));
    e.preventDefault();
  });
}); 
```

这是我的 jsfiddle 链接： http: [//jsfiddle.net/ajaypatel_aj/JtCJa/](http://jsfiddle.net/ajaypatel_aj/JtCJa/) 您可以看到这里有垂直滚动条，我想使用 iSroll 而不是那个常规滚动条。我尝试应用 id，但它对我不起作用。

提前致谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T14:09:24.960

我认为您将拥有的最接近的选项是[http://jsfiddle.net/JtCJa/9/](http://jsfiddle.net/JtCJa/9/)它仍然需要调整，您无法单击链接，但它可以按预期工作:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T19:53:23.263

您不能从父框架执行此操作。您必须将 iScroll 的脚本直接添加到`"http://www.css-tricks.com"`页面。如果此站点不属于您，则不能这样做，因为出于安全原因，禁止在来自不同域的页面上执行 JavaScript 代码。

可以设置很大的框架高度，使框架内的滚动条消失，只保留父框架的滚动条。此滚动条可以使用 JavaScript 设置样式，因为它属于您的域。但我认为在框架内使用鼠标滚动页面将不起作用（您无法从第三方框架接收鼠标事件）。并且页面高度变得非常大（您无法确定框架内容的高度）。

好吧，您可以在服务器端下载整个页面内容并在您的站点上显示其副本。在这种情况下，此页面上的 JavaScript 将起作用，并且可以设置滚动条的样式。有几个脚本可以做到这一点。Trey 被称为“网络代理”。您可以使用其中之一，例如[PHProxy](http://sourceforge.net/projects/poxy/)。自己实现此功能很复杂，因为存在一些技术难题（下载相关文件、重定向 ajax 请求、保存 cookie 等）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T11:06:27.187

嘿，ajajy，您还必须在文件中添加类

```
<iframe src="http://www.css-tricks.com" width="360" height="500" id="navbar" class="navbar_relative"></iframe> 
```

和js函数

```
function magentoScrollMimic(){
 j(document).scroll(function(e){
      if(j(window).scrollTop()>138)
        {
            j('#dynFrame').addClass('navbar_fixed');
            j('#dynFrame').removeClass('navbar_relative');

        }
        else
        {
            j('#dynFrame').removeClass('navbar_fixed');
            j('#dynFrame').addClass('navbar_relative');
        }
   }); 
} 
```

三焦

并直接使用

```
<ul id="dynFrame" class="navbar_relative"> 
```

我用这个和它的工作

```
j(document).ready(function(){
    magentoScrollMimic(); } 
```

# php - PHP IMAP 从服务器检索 UNSEEN 电子邮件

> ID：10480354
> 
> 赞同：0
> 
> 时间：2012-05-07T10:17:52.150
> 
> 标签：php, imap

我正在编写一个 Cron 作业脚本，该脚本将 Google imap 服务器中的 Unseen 电子邮件收集到我的数据库中。但有时，有些电子邮件没有被阅读，因此它们不会被保存到数据库中。这是代码：

 `````
$connection = imap_open ($imapaddressandbox, $imapuser, $imappassword)
        or die("Can't connect to '" . $imapaddress .
        "' as user '" . $imapuser .
        "' with password '" . $imappassword .
        "': " . imap_last_error());

$m_search=imap_search ($connection, 'UNSEEN');
if($m_search === false){
email_log("No New Messages ");
} 
````  `似乎由于某种原因，一些电子邮件被跳过了，尽管它们是未读的。

谁能知道为什么？

请注意，电子邮件类似于 me@mydomain.com，但使用的是谷歌电子邮件。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-19T08:36:28.833

利用

```
 imap_open($incoming_server,$username, $password,FT_PEEK); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T02:06:43.263

尝试

```
if (!$m_search) {
    // No new mails found
} 
`````

# python - 从 MySQL 表中获取并呈现获取的值作为 XML

> ID：10480355
> 
> 赞同：0
> 
> 时间：2012-05-07T10:17:57.670
> 
> 标签：python, mysql, xml

我正在从表中的查询中获取结果：

```
def getdata()
    self.cursor.execute("....")
    fetchall = self.cursor.fetchall()
    result ={}
    for row in fetchall:
       detail1 = row['mysite']
       details2 = row['url']
       result[detail1] = row
     return result 
```

现在我需要处理生成的结果集：

```
def genXML()
    data = getdata()
    doc = Document() ""create XML tree structure""" 
```

这样的数据将保存从查询中获取的所有行，并且我可以从中提取每个列的值？不知何故，我没有得到想要的结果。我的要求是通过数据库查询获取结果集并将结果存储到占位符中，以便以后可以在其他方法或位置轻松访问它？

==================================================== ===============================

我尝试了以下技术，但仍然在方法'getXML（）'中我无法获取每个字典行，以便我可以遍历和操作：

```
 fetchall = self.cursor.fetchall()
        results= []
        result={}
        for row in fetchall:
                result['mysite'] = row['mysite']
                result['mystart'] = row['mystart']
                ..................................
                results.append(result)
        return results

def getXML(self):
        doc = Document()
        charts = doc.createElement("charts")
        doc.appendChild(charts)
        chartData = self.grabChartData()
        for site in chartData:
                print site[??] 
```

那么如何获取每个 chartData 行值，然后我可以为每个循环？

注意：我发现只有最后一行获取的值会像在 chartData 中一样打印出来。假设我知道查询返回了 2 行。因此，如果我在 getXML() 方法中打印列表，如下所示，两行都是相同的：

```
chartData[0]
chartData[1] 
```

如何将每个结果唯一地添加到列表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:32:10.320

在这里，您正在一遍又一遍地修改和添加*相同的 dict到结果中：*

```
 result={}
    for row in fetchall:
            result['mysite'] = row['mysite']
            result['mystart'] = row['mystart']
            ..................................
            results.append(result) 
```

在循环内创建字典来解决这个问题：

```
 for row in fetchall:
        result={} 
```

# c++ - 限制（放大器）函数类型

> ID：10480359
> 
> 赞同：2
> 
> 时间：2012-05-07T10:18:42.383
> 
> 标签：c++, lambda, gpgpu, ppl, c++-amp

我可以`restrict(amp)`按如下方式创建函数：

```
auto f = [](int& item) restrict(amp) {item += 1;}; 
```

我可以在其他`restrict(amp)`功能中使用此功能，例如：

```
concurrency::parallel_for_each(av.extent,
    [=](concurrency::index<1> idx) restrict(amp) 
    { 
      f(av[idx]); 
    }
); 
```

编译后用什么代替" `auto`"？我尝试使用“std::function”：

```
std::function<void (int&) restrict(amp)> f
           = [](int& item) restrict(amp) {item += 1;}; 
```

但收到编译错误。

感谢您的关注！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T10:28:23.413

lambda 表达式的结果是一个闭包对象，而闭包对象的类型是不可知的。您*只能*用于`auto`声明其确切类型的变量。

但是，您可以**将**闭包对象转换为合适的 an 实例`std::function`，如果 lambda 是非捕获的，您甚至可以将其转换为函数指针。但是，这种转换可能会带来（巨大的）成本，因此您应该`auto`尽可能多地使用来处理实际的闭包类型。

`bind`表达式也是如此。

相关标准部分为 5.1.2(3)：

> lambda 表达式的类型（也是闭包对象的类型）是唯一的、未命名的非联合类类型——称为闭包类型——其属性如下所述。此类类型不是聚合。

也就是说，我不确定特殊的 AMP 扩展在这种情况下的表现如何，并且可以想象，受 AMP 限制的 lambda*不能*转换为其他任何东西。我会尝试在 AMP 规范中查找这一点。

**更新：**[AMP 规范](http://download.microsoft.com/download/4/0/E/40EA02D8-23A7-4BD2-AD3A-0BFFFB640F28/CppAMPLanguageAndProgrammingModel.pdf)的第 2.2.3 和 2.3 节似乎适用于这个问题。

# android - Android - 服务器请求在模拟器上工作但不在手机上

> ID：10480363
> 
> 赞同：0
> 
> 时间：2012-05-07T10:19:00.353
> 
> 标签：android, http, connection, emulation

我很茫然。我的异步服务器请求正在模拟器上运行，但在我自己的 Android 设备上出现以下错误消息：

> java.net.SocketException：操作超时。

在测试期间，其他应用程序和互联网正在我的 Android 设备上运行。即使在我的应用程序中，包括谷歌地图也可以正常工作。还有服务器响应，因为我用模拟器测试它并且它在那里工作。

你有什么想法可能是问题所在吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T10:24:07.610

重置您的互联网连接。或重新启动您的设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-05T19:49:19.027

我有同样的问题，我查看了我的清单文件，发现

```
 <uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

不见了，补充说为我修复了它。令人误解的是，当应用程序请求未在 manifest.xml 中声明的功能时，应用程序应该崩溃，但它没有，但在模拟器上完美运行。

# mysql - 如果可能的话，优化这个 mysql 查询以使用我的索引？

> ID：10480366
> 
> 赞同：3
> 
> 时间：2012-05-07T10:19:19.153
> 
> 标签：mysql, query-optimization

我有一个 mysql 查询，我认为应该使用我的索引，但似乎仍然需要扫描很多行（我认为）。

这是我的查询：

```
SELECT DISTINCT DAY(broadcast_at) AS 'days' 
from v3211062009 
where month(broadcast_at) = 5 and 
year(broadcast_at) = 2012 
and deviceid = 337 order by days; 
```

在我的桌子上，我在**broadcast_at, deviceid**上有一个索引设置。但是，对此查询的解释结果如下所示：

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE  v3211062009 ref indx_deviceid,indx_tracking_query   indx_tracking_query 4   const   **172958**  Using where; Using index; Using temporary; Using filesort 
```

我不明白为什么它需要查找这么多行。此 deviceid 记录的总行数仅为**184085**，因此我的查询似乎几乎是为了获得结果集而查看所有行。broadcast_at 上的索引是否不起作用。

我显然在做一些根本错误的事情，但无法弄清楚。更改索引中列的顺序不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T10:24:25.087

`broadcast_at`如果您在该字段上使用函数，我认为 MySQL 无法利用索引。

如果你这样做，它的表现如何：

```
SELECT DISTINCT DAY(broadcast_at) AS 'days' 
from v3211062009 
where broadcast_at >= ('2012-05-01') AND
      broadcast_at < ('2012-06-01') 
and deviceid = 337 order by days; 
```

# java - 播放列表的 GUI / 相当于 Java 中的 WPF ListView？

> ID：10480376
> 
> 赞同：1
> 
> 时间：2012-05-07T10:20:19.877
> 
> 标签：java, wpf, swing, listview, playlist

使用 Swing 我需要创建一个显示播放列表的 GUI。播放列表应如下图所示： 标题（如 Song xyz）和它的图像（例如，表示文件类型，如 MP3、OGG...）。在 WPF 中，我会为此使用 ListView，但在这种情况下，我需要使用 Java 和 Swing - 在 Java/Swing 中执行类似操作的最佳方法是什么？如果拖放（重新排列项目，例如将标题 3 拖到标题 1 之前）是可能的，那就太好了。感谢您的任何提示！

![在此处输入图像描述](../Images/953e2ab6f8d8766b414949faac6c4c74.png)

提示：当然这只是一个草图，标题和图像应该在行中垂直居中;-)

# magento - Magento 主页上的“将代码存储到 URL”

> ID：10480378
> 
> 赞同：1
> 
> 时间：2012-05-07T10:20:24.270
> 
> 标签：magento, mod-rewrite, url-rewriting

我打开了“将代码存储到 URL”选项（管理员 -> 系统 -> 配置 -> 网络 -> url 选项）。

问题是，如果我在没有商店代码的情况下访问我的主页，它就可以工作。我的意思是这两个例子都有效： http: [//example.com/](http://example.com/) http://example.com/code/ 但是第一个 url（没有商店代码）应该重定向到带有商店代码的 url。我试图将重写规则放入 htaccess 但没有成功，我尝试了各种可能性。

Magento 内置重写规则似乎没有帮助 - 我尝试将“/”重写为“code”，但结果是“/code/code”url 后缀。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T11:45:17.157

这种行为的原因可以在 中找到`Mage_Core_Model_Url_Rewrite::rewrite`。没有商店代码的基本 URL 没有重定向。

下面是一个非常丑陋的解决方案，但它应该适用于您的情况。只要在请求 URI 中找不到当前商店代码，它将重定向到包含商店代码的基本 URL：

应用程序/代码/本地/Danslo/RedirectToStore/Model/Observer.php：

```
<?php

class Danslo_RedirectToStore_Model_Observer
{

    public function redirectToStore($observer)
    {
        $request    = $observer->getFront()->getRequest();
        $storeCode  = Mage::app()->getStore()->getCode();
        $requestUri = $request->getRequestUri();

        if (strpos($requestUri, $storeCode) === false) {
            $targetUrl = $request->getBaseUrl() . '/' . $storeCode;
            header('HTTP/1.1 301 Moved Permanently');
            header('Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0');
            header('Pragma: no-cache');
            header('Location: ' . $targetUrl);
            exit;
        }
    }

} 
```

应用程序/代码/本地/Danslo/RedirectToStore/etc/config.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
    <global>
        <events>
            <controller_front_init_before>
                <observers>
                    <redirect_to_store>
                        <class>Danslo_RedirectToStore_Model_Observer</class>
                        <method>redirectToStore</method>
                        <type>singleton</type>
                    </redirect_to_store>
                </observers>
            </controller_front_init_before>
        </events>
    </global>
</config> 
```

应用程序/etc/modules/Danslo_RedirectToStore.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
    <modules>
        <Danslo_RedirectToStore>
            <active>true</active>
            <codePool>local</codePool>
        </Danslo_RedirectToStore>
    </modules>
</config> 
```

# asp.net-mvc-3 - 如何在 mvc 中从一个网站管理不同 Web 应用程序上的会话

> ID：10480381
> 
> 赞同：0
> 
> 时间：2012-05-07T10:20:43.497
> 
> 标签：asp.net-mvc-3, session-state

我正在从事分类广告项目，该项目包含 Visual Studio 2010 中的 3 个不同的解决方案（网站）

```
1\. Classified Ads (main project include all type of ads)
2\. Property Ads ( for property ads)
3\. Auto-mobile Ads (for Auto-mobile Ads) 
```

我已在主要解决方案中管理所有登录和会话管理（1.分类广告）

所以现在我想在主要解决方案 (1) 的基础上管理其他两个解决方案 (2,3) 的会话

意思是如果用户从主解决方案（网站）登录，那么用户可以使用我在主网站中创建的这个会话访问其他两个解决方案。

我怎样才能做到这一点？以及管理这些不同网站的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:20:38.970

Asp.net 会话仅适用于单个应用程序中的一个用户。所以没有内置的方法可以做到这一点。我想您可以使用 SqlServer 会话状态并在数据库中挖掘 ASP.NET 表结构。基于这些知识，可以手动将 IIS 与相同的表记录相关联。无论如何，这是一种非常棘手的方式，并且没有证据表明它会在未来工作（表结构可以更改，但 asp.net 开发人员可以随时更改）

**编辑** 顺便说一句，您可以实现自己的会话提供程序 - 这样您将始终知道位于何处以及如何处理它。

这是自定义会话提供程序实现的一个小示例

[http://msdn.microsoft.com/en-us/library/ms178588.aspx](http://msdn.microsoft.com/en-us/library/ms178588.aspx)

这是另一个（您可以通过下载类文件链接下载源代码）

[http://www.sharepointsecurity.com/sharepoint/sharepoint-development/building-a-custom-asp-net-2-0-session-state-provider/](http://www.sharepointsecurity.com/sharepoint/sharepoint-development/building-a-custom-asp-net-2-0-session-state-provider/)

# post - POST 从生产环境中测试服务器

> ID：10480382
> 
> 赞同：0
> 
> 时间：2012-05-07T10:20:46.397
> 
> 标签：post, replication

我有一个生产网络应用程序通过 POST 从第三方接收数据。我也希望将相同的数据发布到我的登台服务器。我怎样才能最有效地做到这一点？我想我可以将负载均衡器配置为向两台服务器发布，但我的开发人员说不推荐。除了从生产主机发布到暂存主机之外，我还有其他明智的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:24:48.060

如果您的负载均衡器也可以将其转发到登台系统（当然不会从该系统返回响应），那是最干净的方式。

您还可以让生产系统简单地将所有这些请求记录到数据库中，然后让脚本从数据库中检索请求并将它们发布到登台系统。

任何其他方式都需要您向生产系统添加代码以转发这些请求——这在生产系统中是我不想要的。

# javascript - Opencart - jQuery 购物车总更新 - 修改输出

> ID：10480386
> 
> 赞同：1
> 
> 时间：2012-05-07T10:20:52.713
> 
> 标签：javascript, jquery, opencart

运行最新版本的 OpenCart，在 product.tpl 底部的 javascript 中有如下代码行：

```
$('#cart-total').html(json['total']); 
```

此行无需重新加载页面即可更新购物车总数，因此`$('#cart-total').html(json['total']);`输出`<span id="cart-total">6 item(s) - $693.50</span>`

但是，我自定义了 cart.tpl 模块和 cart.php 语言文件，以稍微不同地显示购物车输出，使其输出如下：

```
<span id="cart-total">
     <div class="mini-cart-items">6 Items</div>
     <div class="mini-cart-total">Your total is $693.50</div>
</span> 
```

因此，由于某种原因，当`$('#cart-total').html(json['total']);`更新购物车总数时，它会删除我在其中的两个 div，只显示没有我设置的格式的信息。

是否可以更新 javascript 使其不删除信息？

如果上下文需要，我可以提供更多代码。

EDTI：这是整个 javascript 部分，`$('#cart-total').html(json['total']);`位于：

```
if (json['success']) {
                $('#notification').html('<div class="success" style="display: none;">' + json['success'] + '<img src="catalog/view/theme/default/image/close.png" alt="" class="close" /></div>');

                $('.success').fadeIn('slow');

                $('#cart-total').html(json['total']);

                $('html, body').animate({ scrollTop: 0 }, 'slow'); 
            } 
```

当前代码，编辑如下：

```
 if (json['success']) {
            $('#notification').html('<div class="success" style="display: none;">' + json['success'] + '<img src="catalog/view/theme/default/image/close.png" alt="" class="close" /></div>');

            $('.success').fadeIn('slow');

            console.log(json['total']);
            var output = $(json['total']).text().split('-');
            $('.mini-cart-items').html(output[0]);
            $('.mini-cart-total').html('Your total is ' + output[1]);

            $('html, body').animate({ scrollTop: 0 }, 'slow'); 
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T10:32:23.490

如果你`json['total']`只包含数字量，那么你可以试试这个：

```
$('#cart-total .mini-cart-total').empty().html('Your total is $' + json['total']); 
```

根据您的编辑：

```
var output = $(json['total']).text().split('-');

$('.mini-cart-items').html(output[0]);
$('.mini-cart-total').html('Your total is ' + output[1]); 
```

***[演示](http://jsfiddle.net/QStkd/17/)***

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T21:53:21.630

我也遇到了麻烦，我找到了解决问题的方法。

如何工作 json['total'] 我在**catalog/controller/checkout/cart.php**

```
$json['total'] = sprintf($this->language->get('text_items') ....... 
```

但它不是那么重要，'text_items' 放在两个地方

```
catalog/language/russian/module/cart.php 
```

和

```
catalog/language/russian/checkout/cart.php 
```

很有意思，先用**module文件**，用jsoncheckout**文件**

这是我的'text_items'，我把它放在两个语言文件中

```
// Text
$_['text_items'] = 'In cart: <div class="header-product">%s product</div> summ %s'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T10:37:14.313

以上工作，你总是可以给你的 div 一个 id

```
<div id="mini-cart-total" class="mini-cart-total">Your total is $574.00</div> 
```

在你的脚本中：

```
$('#mini-cart-total').html(json['total']); 
```

在一天结束时， $('#id').html(str) 将 id 中的所有 html 替换为您传入的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-14T19:39:51.753

我已经通过这个解决了

```
setTimeout(function(){
  $('#cart-total').html('Your total is $' + json['total']); 
}, 100); 
```

只需添加延迟

# android - 线程的 ANR 错误

> ID：10480387
> 
> 赞同：1
> 
> 时间：2012-05-07T10:20:54.730
> 
> 标签：android, process

一些用户在我的应用程序在线 threadAudio.start() 上遇到 (ANR keyDispatchingTimedOut) 错误

```
private void startAudio(int audioId) {

    mPlayer = MediaPlayer.create(this, audioId);

    mPlayer.setOnCompletionListener(new OnCompletionListener() {

        @Override
        public void onCompletion(MediaPlayer mp) {
            mp.stop();
            mp.release();
            mPlayer = null;
        }
    });

    mPlayer.start();
    vSeek.setMax(mPlayer.getDuration());

    threadAudio = new Thread(thread);
    threadAudio.start();
}

public Runnable thread = new Runnable() {
    public void run() {
        try {
            while(mPlayer != null){
                int currentPosition = mPlayer.getCurrentPosition();
                Message msg = new Message();
                msg.what = currentPosition;
                handler.sendMessage(msg);
            }
            Thread.sleep(100);
        } catch (Exception e) {
        }
    }
};

private Handler handler = new Handler() {
    public void handleMessage(Message msg){
        vSeek.setProgress(msg.what);
    }
}; 
```

首先，我无法在我的设备上重现错误！这可以是特定于设备的吗？

我正在按照 android doc 建议使用处理程序，以避免从 UI 线程外部访问 Android UI 工具包...

或者也许我必须在两行之间的某个地方调用 threadAudio.stop() ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:49:32.637

我想你的意思是把`Thread.sleep(100);`你的`while(mPlayer != null){`循环？本质上，您的 while 循环不断向您的处理程序发送大量消息，该处理程序在 UIThread 上运行，这就是导致 ANR keyDispatchingTimedOut 错误的原因：所有 CPU 时间要么用于处理这些消息，要么用于发送这些消息。不是一个好地方：P

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T10:24:26.470

这是因为`never ending while loop`线程内部......你应该找到一种更好的方法来完成你的任务......具有较低ram内存的设备或具有大量应用程序的设备将无法为这样的代码制作内存..

# google-app-engine - google-app-engine ：导入仅在刷新后有效

> ID：10480390
> 
> 赞同：-1
> 
> 时间：2012-05-07T10:21:11.540
> 
> 标签：google-app-engine, importerror, python-2.5, gflags

在简单导入 httplib2 出现一些问题后（请参阅我的帖子），我[在](https://stackoverflow.com/questions/10471111/google-app-engine-importerror-httplib2-in-google-api-python-client-hello-world#comment13527322_10471111 "google-app-engine：google api python客户端hello world中的ImportError httplib2")导入 gflags 时遇到了另一个问题。

事实上，在开发服务器上，我第一次启动应用程序时遇到了 ImportError。但是，如果我刷新浏览器，这些应用程序就会工作！如果我查看日志，我可以看到：

```
...
ImportError: No module named gflags
[App Instance] [0] [dev_appserver.py:2891] INFO "GET / HTTP/1.1" 500 -
[App Instance] [0] [py_zipimport.py:148] INFO zipimporter('/usr/lib/python2.5/site-packages/setuptools-0.6c11-py2.5.egg', '')
[App Instance] [0] [py_zipimport.py:148] INFO zipimporter('/usr/lib/python2.5/site-packages/python_gflags-2.0-py2.5.egg', '') 
```

因此，应用程序在开发服务器上刷新后可以工作，但在 apppot 上载后它根本不工作：

```
<type 'exceptions.ImportError'>: No module named gflags
Traceback (most recent call last):
  File "/base/data/home/apps/s~yoyocontacts/2.358733066847060730/main.py", line 33, in <module>
from apiclient.discovery import build
  File "/base/data/home/apps/s~yoyocontacts/2.358733066847060730/apiclient/discovery.py", line 48, in <module>
from apiclient.http import HttpRequest
  File "/base/data/home/apps/s~yoyocontacts/2.358733066847060730/apiclient/http.py", line 47, in <module>
from model import JsonModel
  File "/base/data/home/apps/s~yoyocontacts/2.358733066847060730/apiclient/model.py", line 27, in <module>
import gflags 
```

我的应用程序是这个[HelloWorld](http://code.google.com/p/google-api-python-client/source/browse/#hg%2Fsamples%2Fappengine "google-api-python-client Appengine")：

```
lrwxrwxrwx 1 yoyo   77 2012-05-06 16:24 apiclient -> /home/yoyo/dev/outils/google_appengine/lib/google-api-python-client/apiclient/
-rw-r--r-- 1 yoyo  169 2012-05-06 16:19 app.yaml
-rw-r--r-- 1 yoyo  358 2012-05-06 15:20 client_secrets.json
lrwxrwxrwx 1 yoyo   60 2012-05-07 12:12 gflags -> /home/yoyo/dev/outils/google_appengine/lib/python-gflags/
-rw-r--r-- 1 yoyo  554 2012-03-02 20:00 grant.html
lrwxrwxrwx 1 yoyo   60 2012-05-06 16:20 httplib2 -> /home/yoyo/dev/outils/google_appengine/lib/httplib2/httplib2/
-rw-r--r-- 1 yoyo  471 2012-03-02 20:00 index.yaml
-rw-r--r-- 1 yoyo 3,4K 2012-05-07 11:45 main.py
lrwxrwxrwx 1 yoyo   56 2012-05-06 16:24 oauth2 -> /home/yoyo/dev/outils/google_appengine/lib/oauth2/oauth2/
lrwxrwxrwx 1 yoyo   80 2012-05-07 10:59 oauth2client -> /home/yoyo/dev/outils/google_appengine/lib/google-api-python-client/oauth2client/
-rwxr-xr-x 1 yoyo  163 2012-05-07 11:14 run*
-rwxr-xr-x 1 yoyo  115 2012-05-07 11:50 upload*
lrwxrwxrwx 1 yoyo   79 2012-05-06 16:24 uritemplate -> /home/yoyo/dev/outils/google_appengine/lib/google-api-python-client/uritemplate/
-rw-r--r-- 1 yoyo  102 2012-03-02 20:00 welcome.html 
```

我的问题：

*   为什么 zipimporter 仅在刷新后才有效？
*   如何在 apppot 上修复此错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:41:59.323

谢谢@greg。

我添加`__init__.py`了 with`import gflags`然后我修改`apiclient/model.py`了 with`from gflags import gflags`而不是`import gflags`.

# jsf - p：dataTable多项选择不起作用

> ID：10480392
> 
> 赞同：4
> 
> 时间：2012-05-07T10:21:18.470
> 
> 标签：jsf, jsf-2, primefaces, facelets, mojarra

我似乎没有在 PrimeFaces dataTables 中进行多项选择。

我正在尝试实现客户列表（dataList）并在嵌套数据表中显示他们各自的预订，并可以选择多个预订进行计费：

```
<p:dataList value="#{clientController.allClients}" var="client">
<p:column>
    <p:dataTable value='#{client.bookingsDataModel}' var='item' selection="#{client.bookingsToBill}">
        <p:column selectionMode="multiple" />
    </p:dataTable>
</p:column>
</p:dataList> 
```

我的控制器和支持 bean 类：

```
public class ClientController {
    public List<Client> getAllClients() {
        return clients;
    }
}

public class Client {

    private List<Booking> bookings;
    private Booking[] bookingsToBill;

    public LeistungDataModel getBookingsDataModel() { 
        return new BookingsDataModel(bookings); 
    }

    public Booking[] getBookingsToBill() { 
        return bookingsToBill; 
    }

    public void setBookingsToBill(Booking[] bookingsToBill) { 
        this.bookingsToBill = bookingsToBill;
    }

} 
```

数据模型类：

```
public class BookingsDataModel extends ListDataModel<Booking> implements SelectableDataModel<Booking> {    

    public BookingsDataModel(List<Booking> data) {  
        super(data);  
    }  

    @Override  
    public Booking getRowData(String rowKey) { 
        List<Booking> bookings = (List<Booking>) getWrappedData();
        for(Booking booking : bookings) {  
            if(("booking_"+booking.getId().toString()).equals(rowKey)) {
                return booking;
            } 
        }
        return null;  
    }  

    @Override  
    public Object getRowKey(Booking booking) {  
        return "booking_"+booking.getId().toString();  
    }

} 
```

当我提交带有我的选择的表单时，浏览器会将以下数据发布到服务器：

```
j_idt9%3Aj_idt13%3A0%3Aj_idt15_selection:booking_300,booking_301,booking_302
j_idt9%3Aj_idt13%3A1%3Aj_idt15_selection:booking_566,booking_567
j_idt9%3Aj_idt13%3A2%3Aj_idt15_selection: 
```

另外，我在调试过程中发现返回正确的对象（选定的对象）的方法`getRowData`。`BookingsDataModel``Booking`

但是，总是将空数组传递给`setBookingsToBill`我的`Client`对象。这里可能出了什么问题？

* * *

**更新：**

空数组仅传递第一个`Client`对象 - 是否选择了预订无关紧要。所有其他`Client`对象的`setBookingsToBill`方法都使用参数值调用`null`。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-27T19:11:11.543

不是真的，如果你想用复选框进行多项选择，你必须像 jfs 那样做：

在陈列柜中，有一个例子表明了这一点。它将创建一个包含供用户选择的框的列。您也可以按照您所说的使用 p:dataTable 的属性进行操作，但是这不会创建框，用户必须控制 + 单击才能进行多选。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-12T15:47:32.817

selectionMode 应该是`<p:dataTable>`标签的一部分。

这是一个展示的链接，其中有一个示例。 [http://www.primefaces.org/showcase/ui/datatableRowSelectionMultiple.jsf](http://www.primefaces.org/showcase/ui/datatableRowSelectionMultiple.jsf)

# parsing - PDF 页面组件（解析、字体、图形等）的渲染时间

> ID：10480395
> 
> 赞同：2
> 
> 时间：2012-05-07T10:21:21.687
> 
> 标签：parsing, pdf, pdf-rendering

我想知道PDF页面渲染（对于普通技术书籍）中哪些操作花费的时间最多。是字体渲染吗？是对象解析吗？是图形绘制吗？或者还有什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T17:38:14.173

以我的经验，解析是次要的，次要的成本。PDF 解析受 I/O 限制。在 Acrobat 的原始版本中，JPEG 解码是最大的成本之一，如果您有使用 DCT 的图像（因为 FPU 不是标准的）。除非打开希腊化，否则抗锯齿字体渲染在小点大小时会很昂贵。对于 PDF 渲染中的每个高成本项目，通常都有一种机制来缓解它（字体缓存、希腊化、路径缓存、空闲时间页面渲染等）。

# javascript - 使用 Javascript onresize 函数的并发症

> ID：10480397
> 
> 赞同：0
> 
> 时间：2012-05-07T10:21:29.103
> 
> 标签：javascript, html, jquery, jquery-events, onresize

我正在开发一个项目的原型，我需要根据浏览器窗口大小调整网站内容的外观。

现在对于原型，我正在使用示例图像，并且我想根据窗口的高度和宽度调整图像的高度和宽度。

这是我正在使用的代码：

```
$(window).resize(function() {
   document.write("<img src='sample_image.jpg' border='0' height='"+window.innerHeight+"' width='"+window.innerWidth+"'>");
}); 
```

上面的代码不能正常工作。我想在用户调整窗口大小时动态更改图像的高度和宽度。我也尝试实施[此解决方案](https://stackoverflow.com/questions/1500312/javascript-onresize-event)。但这也没有用。任何想法我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:31:30.880

好吧，由于这仅*用于测试目的*，而且您似乎使用[jQuery](http://api.jquery.com/resize/)，请尝试以下代码：

```
<img src="sample_image.jpg" border='0' height="1" width="1" style="display: block;">

<script>
    var resize = function() {
        $("img").width($(window).width()).height($(window).height());            
    };
    $(window).resize(function() {
       resize();
    });
    resize();
</script>​ 
```

**演示：http:** [//jsfiddle.net/GvRJ7/](http://jsfiddle.net/GvRJ7/)

否则，我和这里的其他人**强烈**建议您使用良好的 HTML/CSS 标记来使您的设计适合任何分辨率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T10:27:37.720

您可以尝试使用百分比代替**window.innerHeight**和**window.innerWidth**。这将根据窗口的高度和宽度调整图像的大小。

```
document.write("<img src='sample_image.jpg' border='0' height='"70%"' width='"70%"'>"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T10:27:44.957

想想`window.resize()`火灾的频率（如果你有任何疑问，`console.log()`它）。只应在其中执行廉价的操作，例如递增计数器或计算位置。

在您的特定情况下，我认为 100% 宽度/高度的图像将仅使用 CSS（或使用 JavaScript 生成的 CSS，如果需要）。当然，当图像超出其实际大小时，这看起来会很糟糕，并且当图像低于其实际大小时会浪费带宽，但它会以一小部分费用对您的代码产生相同的效果。

附带说明一下，应该很少使用 document.write()。请改用 DOM 操作函数。

# datetime - 如何同步机器的时间

> ID：10480407
> 
> 赞同：2
> 
> 时间：2012-05-07T10:22:11.823
> 
> 标签：datetime, batch-file

我一次在 4 台机器上工作。这是一个实时环境，所以我必须将时间同步到毫秒，有没有办法以毫秒精度同步系统时钟？

目前我在批处理脚本命令的帮助下同步机器`NET TIME \\TIMESRV /SET /YES`，但我不确定它同步机器的时间是否达到毫秒。有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T10:41:14.453

Microsoft 不保证此类精度：

> 我们不保证也不支持网络上节点之间的 W32Time 服务的准确性。W32Time 服务不是满足时间敏感应用需求的全功能 NTP 解决方案。
> 
> W32Time 服务主要用于执行以下操作：
> 
> *   使 Kerberos 版本 5 身份验证协议工作。
> *   为客户端计算机提供宽松的同步时间。
> 
> W32Time 服务无法可靠地将同步时间保持在 1 到 2 秒的范围内。此类公差超出了 W32Time 服务的设计规范。

[http://support.microsoft.com/kb/939322/en-us](http://support.microsoft.com/kb/939322/en-us)

# java - J2me 检测应用程序的首次启动

> ID：10480413
> 
> 赞同：0
> 
> 时间：2012-05-07T10:22:26.707
> 
> 标签：java, java-me, midp

我的问题很简单，如何识别应用程序的首次启动？我认为可以通过在 RMS 中保存一些值并在应用程序启动时读取它并决定做什么来完成。

但是没有更简单的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T10:30:09.000

据我所知，没有更简单的方法，但无论如何这很容易；

```
 public static boolean isFirstRun() {
        RecordStore rs = null;
        try {
            rs = RecordStore.openRecordStore("myAwesomeRecordStore", false); //check
            return false; //record store exists, so it's not our first run
        } catch (Exception e) {
            //RecordStoreNotFoundException, but we need to catch others anway
            try {
                rs = RecordStore.openRecordStore("myAwesomeRecordStore", true); //create
            } catch (Exception e1) {}
        }
        finally {
            if (rs != null) try {rs.closeRecordStore();} catch (Exception e) {}
        }
        return true; //so, record store did not exist and it was created (if no error occured (there shouldn't be any errors anyway))
    } 
```

# algorithm - 具有特定运行时 Theta(...) 的递归函数

> ID：10480418
> 
> 赞同：0
> 
> 时间：2012-05-07T10:23:03.647
> 
> 标签：algorithm, recursion

我被我从算法课程中得到的这个作业困住了：

> 编写一个运行时间为 Theta(n^4 logn) 的递归函数。

我想过这样的事情，但我对我的方法非常不确定。

```
function(int n)
{
   for-loop (1..n^4)
     //do something

   return function(n/2);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:34:59.807

您应该不确定，您的功能有一些问题：

1.  它没有初始值，并且永远运行。
2.  如果您为函数设置初始值，它将为：

    T(n) = T(n/2) + O(n^4)

根据主定理，这是 Θ(n^4)。

提示：你应该增加 的系数`T(n/2)`，但要增加多少？自己找。对于这种增加，您可以称其为`x`次。

* * *

`log n`当我们有这样的递归时，Master theorem就会发生：

> T(n) = a T(n/b) + n ^(a/b)

在您的情况下，您有 a/b = 4，因此您可以修复 b = 2 和 a = 8 来实现这一点。

> T(n) = 8T(n/2) + n ⁴

为了达到这个目的，您可以调用 T(n/2) 8 次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T10:34:43.703

提示：n ⁴可以是从 1 到 n 的四个嵌套循环。对数运行时间因子通常是通过将问题大小递归减半直到达到 1 来获得的。你的提议有点工作，但是很生硬，你甚至可以这样做

```
func(int n)
  for i = 1 to n^4 log n
     nop() 
```

但我不相信这是正在寻找的东西。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-07T10:35:49.027

你的方法是理智的，你的不安全感是正常的。您现在应该证明您的算法是 Theta(n^4 log n)。应用您的常规算法分析技术来显示`function`执行`do something`n^4 log_2 n 次。

提示：计算`function`递归调用的次数以及循环在每次调用中运行的频率。您会看到您的函数中仍然存在一个小错误；`n`每次递归调用中的因子`n^4`都会减少。

# mysql - 如何从动态表名中进行选择

> ID：10480429
> 
> 赞同：5
> 
> 时间：2012-05-07T10:23:45.347
> 
> 标签：mysql, select, dynamic

我有像这样的桌子

```
changes201101
changes201102
changes201103
...
changes201201 
```

`whichchanges`以及包含行 Year 和 MONTH 的表

如何从更改中选择 * `whichchanges`？

我输入这个查询

```
SET @b := SELECT CONCAT('changes',year,month) FROM whichchanges;
((((@b should contain now multiple rows of changesYearMonth)))))
SET @x := SELECT * FROM @b;
Prepare stmt FROM @b;
Prepare stmt FROM @x;
Execute stmt; 
```

> #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'SELECT CONCAT('changes',year,month) FROM changes)' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T10:26:24.037

您打开 1`(`并关闭 2 `)`。删除最后一个：

```
SELECT CONCAT('changes',year,month) FROM changes 
```

## 编辑

第二个陈述应该是

```
SET @x := SELECT * FROM (@b) as b; 
```

这有效，但不确定这是否是您想要的：

```
SET @b := 'SELECT CONCAT(''changes'',`year`,`month`) FROM whichchanges';
SET @x := 'SELECT * FROM (SELECT CONCAT(''changes'',`year`,`month`) FROM whichchanges) as b';
Prepare stmt FROM @b;
Prepare stmt FROM @x;
Execute stmt; 
```

## 编辑2

如果我理解正确，您正在寻找那个单一的查询：

```
select * from changes
where change_column in (select distinct concat(`year`, `month`) from whichchanges) 
```

## 编辑3

```
select @b := group_concat(concat(' select * from changes', `year`, `month`, ' union ') separator ' ') as w from whichchanges;
set @b := left(@b, length(@b) - 6);

Prepare stmt FROM @b;
Execute stmt; 
```

[SQLFiddle 示例](http://sqlfiddle.com/#!2/5d23e/20)

# c# - 不接收具有 C# 串行端口类的数据（4800bps，偶校验，2 个停止位，7 个数据位）

> ID：10480436
> 
> 赞同：1
> 
> 时间：2012-05-07T10:24:26.470
> 
> 标签：c#, serial-port

我必须通过串口与 MarCator 数字指示器通信（我使用串口转 USB 适配器）。协议是：DTR 到 -Vdd 100ms 到 1s。然后在 15ms 到 160ms 之后发出 9 个字节的帧。

使用 TeraTerm，它就像一个魅力，但我无法让它与 C# 一起使用。

```
Char[] buff = new Char[9];
SerialPort port = new SerialPort("COM25", 4800, Parity.Even, 7, StopBits.Two);

Console.WriteLine("Created");
port.Open();
port.DtrEnable = true;
Console.WriteLine("Open");
Thread.Sleep(500);

port.DtrEnable = false;
Thread.Sleep(500);
port.DtrEnable = true;

Thread.Sleep(200);
if (port.BytesToRead != 0) {
    port.Read(buff, 0, 9);
    Console.WriteLine(buff);
}
else {
    Console.WriteLine("Fail...");
}
port.Close(); 
```

我看到 MarCator 正在接收 DTR 命令，但 port.BytesToRead 始终为 0。

问候，瓦尔

# python - python中带有子文件夹的ZIP文件夹

> ID：10480440
> 
> 赞同：11
> 
> 时间：2012-05-07T09:12:01.823
> 
> 标签：python, zip

我需要使用 python 压缩一个包含 .xml 文件和 .fgdb 文件的文件夹。有人可以帮我吗？我尝试了一些在互联网上找到的脚本，但总是存在一些技术问题（例如创建一个空的 zip 文件，或者创建 zip 文件我无法打开“无权限”等。）

提前致谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-07T09:51:58.657

让它发挥作用的关键是[`os.walk()`](https://docs.python.org/3/library/os.html#os.walk)功能。这是我过去组装的一个应该可以工作的脚本。如果你有任何例外，请告诉我。

```
import zipfile
import os
import sys

def zipfolder(foldername, target_dir):            
    zipobj = zipfile.ZipFile(foldername + '.zip', 'w', zipfile.ZIP_DEFLATED)
    rootlen = len(target_dir) + 1
    for base, dirs, files in os.walk(target_dir):
        for file in files:
            fn = os.path.join(base, file)
            zipobj.write(fn, fn[rootlen:])

zipfolder('thenameofthezipfile', 'thedirectorytobezipped') #insert your variables here
sys.exit() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-11-29T22:17:01.440

[这个答案](https://stackoverflow.com/a/10480441/271351)非常有帮助，但我花了一点时间才完全理解`rootlen`它的用途。这个例子使用一些更长的变量名来帮助说明这里到底发生了什么。还包括一个用于验证 zip 文件是否正确的块。

```
import os
import zipfile

src_path = os.path.join('/', 'some', 'src', 'path')
archive_name = 'myZipFile.zip'
archive_path = os.path.join('/', 'some', 'path', archive_name)

with zipfile.ZipFile(archive_path, 'w', zipfile.ZIP_DEFLATED) as archive_file:
    for dirpath, dirnames, filenames in os.walk(src_path):
        for filename in filenames:
            file_path = os.path.join(dirpath, filename)
            archive_file_path = os.path.relpath(file_path, src_path)
            archive_file.write(file_path, archive_file_path)

with zipfile.ZipFile(archive_path, 'r') as archive_file:
    bad_file = zipfile.ZipFile.testzip(archive_file)

    if bad_file:
        raise zipfile.BadZipFile(
            'CRC check failed for {} with file {}'.format(archive_path, bad_file)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-30T15:10:11.137

如果有人想要在您的项目中使用一些通用功能

```
def zip_compression_tree(root_path, zip_name):
with zipfile.ZipFile(zip_name, 'w') as z:
    for root, dirs, files in os.walk(root):
        for file in files:
            z.write(os.path.join(root, file))
        for directory in dirs:
            z.write(os.path.join(root, directory)) 
```

# java - 自定义小数的正则表达式

> ID：10480443
> 
> 赞同：2
> 
> 时间：2012-05-07T10:24:47.253
> 
> 标签：java, regex

我对**自定义小数的定义 =>**数字可以表示为 (p,s)，其中 p 是精度，s 是比例，然后描述关于精度和比例的所有内容。如果您需要在小数部分存储超过八位的小数，请使用自定义小数。最大小数位数为 29，最大精度为 30。数字的非小数部分最大为 29 位。

P 和 S 可能不同...

假设 P= 18 S=12 即/ (P,S) = (18,12)

整数长度 = 12

小数长度=18

**一段代码**

```
String regExprCD = "^-?\\d{1,"+intLength+"}(?>\\.\\d{0,"+fractionalLength+"})?$";

                    info("regExprCD = "+regExprCD );
                    if (value.matches(regExprCD ) || value.isEmpty()){
                        Window.alert("Valid CUSTOM_DECIMAL value");
                    }else{
                        Window.alert("Valid CUSTOM_DECIMAL value");
                    } 
```

我尝试遵循正则表达式，但错误出现在**“正则表达式中的语法错误”页面上**

**`^-?\\d{1,"+intLength+"}(?>\\.\\d{0,"+fractionalLength+"})?$`**

这是允许以下情况的完美正则表达式：

**正则表达式应接受以下自定义小数：**

123456789012345678

1234567.1234567890

1.123456789012

1234567890.1234567

12345678901234567。

12345。

**正则表达式不应接受以下自定义小数：**

12345678901234567890：原因 P > 18 :: P 不应大于 18

1234567.1234567890123 : 原因 s>12 : :: S 不应大于 12

.1 或 .1232 :: 无效

我使用**`^-?\\d{1,"+intLength+"}(?>\\.\\d{0,"+fractionalLength+"})?$`** 了这个正则表达式。

这个正则表达式在示例 java 程序中工作正常。不在 GWT 中工作

在网页上抛出错误（在 GWT 中开发）::“正则表达式中的语法错误”

intLength 和 fractionalLength 的数据类型应该是什么？整数或字符串？

**哪个是完美的正则表达式？**

在此问题上的任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T10:49:28.380

你可以试试这个表达式：`^-?\d{0,x}(?>\.\d{0,y})?$`它应该匹配任何以可选减号开头的数字，然后是`x`数字，然后是一个点，最后是`y`数字。

`x`和`y`将是你的`intLength`和`fractionalLength`。

如果您想让整数或小数部分成为要求（这样`.1`或`1.`不匹配），只需将数字区间中的零替换为 1，即`^-?\d{1,x}(?>\.\d{1,y})?$`.

*更新*：

这是一个固定长度的 SSCCE：

```
String expression = "^-?\\d{1,18}(?>\\.\\d{0,12})?$";

//prints true
System.out.println("12345678".matches(expression)); 

//prints true
System.out.println("1234.5678".matches(expression)); 

//prints false -> integer part too long
System.out.println("1234567890123456789.5678".matches(expression)); 

//prints false -> fraction part too long
System.out.println("1234.1234567890123".matches(expression)); 

//prints false -> integer part missing
System.out.println(".5678".matches(expression)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-20T07:06:30.840

试试：^[\d]{1,3}[.]{1}[\d]{1,1}|^[\d]{1,3}

```
public class RegexTestStrings {
    public static void main(String[] args) {
        String[] EXAMPLE_TEST = {"123", "0", "123.4", ".1", "123.", "12a", "a12"};
        int P= 4, S=1;
        for(int i = 0; i< EXAMPLE_TEST.length; i++){
            System.out.println(EXAMPLE_TEST[i]+" -- "+EXAMPLE_TEST[i].matches("^[\\d]{1,"+(P-S)+"}[.]{1}[\\d]{1,"+(S)+"}|^[\\d]{1,"+(P-1)+"}"));    
        }
    }
} 
```

结果 ：

```
123——真的
0 -- 真
123.4 -- 真
.1 -- 错误
123\. -- 错误
12a -- 错误
a12 -- 错误

```

# jquery - 在 MVC3 中使用 JQuery 将 IEnumerable 集合传递给控制器

> ID：10480447
> 
> 赞同：0
> 
> 时间：2012-05-07T10:25:13.673
> 
> 标签：jquery, asp.net-mvc-3, collections

我想`IEnumerable`在 MVC3 中使用 JQuery 从视图到控制器将集合从视图传递到控制器。

我有一个`IEnumerable`收集`Person`模型的页面。使用 JQuery 添加/修改人员集合后，我想通过将集合传递给控制器​​来更新整个人员集合。我试图通过在 Jquery 中构造一个数组对象来传递集合，但它不起作用。

如何将集合传递给控制器​​？

它可以是任何集合，而不仅仅是 IEnumerable 集合。

真的很紧急。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:36:10.343

为此，您需要在视图上拥有控件的名称才能拥有集合的索引，例如

```
<input type='text' name='collection[0].Name' />
<input type='text' name='collection[0].Age' />
<input type='text' name='collection[1].Name' />
<input type='text' name='collection[1].Age' /> 
```

查看 Phil Haack 的这篇关于 [绑定到列表的帖子](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

# scala - Scala 脚本的有用资源

> ID：10480448
> 
> 赞同：4
> 
> 时间：2012-05-07T10:25:20.047
> 
> 标签：scala, scripting, resources

我希望能够找到一个资源来很好地介绍 scala 脚本。涵盖正确使用库依赖项的内容，以及执行系统进程和正确处理输入/输出的示例。

我在网上找到了一些零碎的东西，但对于初学者来说，没有什么真正有用的可靠参考。也许在我还没有找到的许多 scala 书籍之一中有一章。

任何帮助跟踪此类事件将不胜感激。

问候，亚当

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:30:05.557

看看标准包[scala.sys](http://www.scala-lang.org/api/rc/index.html#scala.sys.package)

这个包被添加到 Scala 2.9 并包含从编译器和 sbt 迁移的实用程序，以帮助执行系统任务和脚本。它包含使用 Scala ProcessBuilder 和其他工具访问系统属性、环境变量、运行时、线程和最后但并非最不重要的进程。

对于脚本，您还可以考虑使用 scalax [Scala-io](http://jesseeichar.github.com/scala-io-doc/0.4.0/index.html#!/overview)库，它可能很快与 Scala 一起分发。这些库支持对 I/O、文件系统、路径和文件的良好抽象，并使用自动资源管理、路径集、通配符和其他有用的特性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T10:33:54.560

您可以将任何您想要的代码写入带有 .scala 扩展名的脚本中。编写“正常”代码没有区别。您可以照常保存后执行代码。
请注意，大多数 IDE 不支持脚本。
这是一篇文章的[链接](http://www.codecommit.com/blog/scala/scala-as-a-scripting-language)，描述了该主题。

# templates - 将数据库转换为 UTF-8 后，Templavoila 松散了它的映射

> ID：10480454
> 
> 赞同：0
> 
> 时间：2012-05-07T10:26:14.910
> 
> 标签：templates, encoding, utf-8, mapping, typo3

我正在使用 TemplaVoila 1.5.5 和 TYPO3 4.5.5。我试图将 TYPO3 数据库从`latin1_swedish_ci`(ISO-8859-1) 切换到`utf8_general_ci`. 因此，我编写了一个 PHP 脚本，它将所有内容都转换为二进制，然后将所有内容都转换为 utf8_general_ci。除了 TemplaVoila（Typo3 中的所有其他设置已经为 UTF-8 而不是数据库准备好了），一切似乎都正常工作。打开 TYP3 页面时收到以下消息：

> 找不到表/行“pages:x”的数据结构集。请先选择一个数据结构和模板对象。

如果我查看模板映射，我会收到下一条消息，即没有可用的映射。`tx_templavoila_tmplobj`在列中的表中`templatemapping`，映射存储为 BLOB。当转换为 UTF-8 时，一切都消失了。因为它的二进制文件我无法访问它并以简单的方式对其进行转换。

我怎样才能保留映射？我不想映射所有新的东西。我能做些什么？

[这里](http://bugs.typo3.org/view.php?id=2856)有两个建议的解决方案，但我想知道是否有更好的解决方案。在迈克尔的解决方案中，我还必须重新映射所有内容？

恢复映射的最快方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:28:34.543

我不能说您是否能够在转换后恢复数据，但如果您愿意运行转换脚本，我已经通过以下方法取得了一些成功：

1.  反序列化 tx_templavoila_tmplobj 表的模板映射字段中的数据。
2.  将未序列化的数据数组转换为您的目标编码（有一个辅助方法 t3lib_cs::convArray，您可以将其用于此目的）。
3.  序列化转换后的数据并将其保存回模板映射字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:38:51.253

最快的方法：只需手动将字段更改回`mediumtext`. 所有映射都应该再次正常。我知道，它又快又脏，但对我有用......

# c# - 从我的过程中获取输出

> ID：10480455
> 
> 赞同：0
> 
> 时间：2012-05-07T10:26:16.250
> 
> 标签：c#

我正在使用 sqlcmd （来自我的应用程序）查询 sql server 的版本，并想在富文本框中显示信息，例如，我该如何处理，这是代码：

```
 Process proc = new Process();
        proc.StartInfo.UseShellExecute = false;
        proc.StartInfo.RedirectStandardOutput = true;
        proc.StartInfo.FileName = "sqlcmd";
        proc.StartInfo.Arguments = @"-U sa -P somepassword -q 'SELECT @@VERSION' -S (localhost)\InstanceName";
        proc.Start();    

        StringBuilder q = new StringBuilder();
        while (!proc.HasExited)
        {
            q.Append(proc.StandardOutput.ReadToEnd());

        }
        string r = q.ToString();
        rtbCheckVersion.Text = r;
        proc.WaitForExit(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T10:30:51.380

由于您必须执行 sql 脚本，您可以使用 SqlConnection 和 SqlCommand 来获取输出，而不是启动一个单独的进程。

检查此问题中的此答案和其他答案以获取一些示例：[https ://stackoverflow.com/a/949933/559144](https://stackoverflow.com/a/949933/559144)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T10:36:48.530

我看到您不想使用`SqlConnection`and `SqlCommand`...
我不确定，但可能是您的进程在获得输出之前就退出了。
尝试这个：

```
proc.Start();    
string s = proc.StandardOutput.ReadToEnd(); 
```

# c# - 如何在 C# 中更新或刷新与 Ms-access 连接的数据网格视图

> ID：10480462
> 
> 赞同：1
> 
> 时间：2012-05-07T10:27:30.087
> 
> 标签：c#, ms-access, datagridview

嗨，我已经连接了数据库`Ms-access 2010(.mdb)`，`C#`然后我想在`datagrid`视图中显示它，这是我用来保存的代码或`insert the data`

```
OleDbCommand cmd = new OleDbCommand();
        cmd.CommandType = CommandType.Text;
        cmd.CommandText = "insert into VMS(PlateNo,JobCardNo,Model,DateIn,Status,PartList,PurchNo,PurchDate,Remark)" + "values('" + textBox1.Text + "','" + textBox2.Text + "','" + textBox3.Text + "','" + textBox4.Text + "','" + textBox5.Text + "','" + textBox6.Text + "','" + textBox7.Text + "','" + textBox8.Text + "','" + textBox9.Text + "')";
        cmd.Connection = mycon;
        mycon.Open();
        cmd.ExecuteNonQuery();
        mycon.Close(); 
```

这很好用，问题是当我保存新数据时，它保存在 MS-access 中，但它不会更新或显示在 datagridview 中。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T03:54:17.043

这是插入一些数据后更新数据网格视图的最佳方法。

`Dataset sDs = new DataSet();`

`sAdapter.Fill(sDs, "T1");`

`sTable = sDs.Tables["T1"];`

`dataGridView1.DataSource = sDs.Tables["T1"];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T10:38:44.907

要在插入一些数据后更新你的 datagridview，你应该重新绑定你的数据网格视图，一些 sudocode 可能是这样的：

```
OledbConnection conn=new OledbConnection("your connectionstring");
OledbCommand comm=new OledbCommand("SELECT * FROM yourtablename",conn);
OledbDataAdapter da=new OledbDataAdatpter(comm);
Dataset ds=new dataSet();
conn.open();
da.Fill(ds,"T1");
datagridView.DataMember="T1";
datagridview.DataSource=ds;
conn.close(); 
```

注意：如果您的项目是分配数据源后的 asp.net 项目，则必须以这种方式将 DataBind() 方法写入 datagridview：

```
datagridview.DataSource=ds;
datagridview.DataBind(); 
```

但在 Windows 应用程序中，您不必执行 DataBind() 方法

如果您解决了您的问题，请标记为答案

# ios - 在 AppDelegate.m 上设置 label.text

> ID：10480468
> 
> 赞同：1
> 
> 时间：2012-05-07T10:28:03.863
> 
> 标签：ios, uiviewcontroller, uiapplicationdelegate

我有`ViewController`并且由于某些原因我必须从 AppDelegate.m 设置 label.text 我该怎么做？

我试过这段代码但没有成功：

```
- (void)applicationWillEnterForeground:(UIApplication *)application
{
    HomeViewController *home = [[HomeViewController alloc] init];
    home.dateCreatedLabel.text = @"date createdddd";
} 
```

我必须把它放在 AppDelegate 中的原因是因为我从网站获取 JSON，我必须这样做`applicationWillEnterForeground:`以检查每次更新，我解决了更新核心数据但没有如何更改 label.text 的问题。

或者我可以如何强制`HomeViewController`刷新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T10:56:36.517

首先，针对其他一些答案，将公共界面中的某些 UI 组件暴露给您的视图或视图控制器实际上并不是一个糟糕的主意。

例如，Apple 通过直接公开标签和视图开始使用表格视图单元格来执行此操作，因为它对开发人员来说更容易和更灵活。所以他们现在有一个属性，`textLabel`而以前他们只有一个`setText:`方法。这意味着您现在可以设置标签文本，以及自定义标签本身所需的任何其他内容。

在您的情况下，您可以将标签公开为视图控制器上的标准属性，然后从应用程序委托访问它。但在访问它之前，您需要确保视图控制器的视图已加载，否则标签属性将返回 nil。`-view`您可以通过查询控制器上的方法来强制加载视图：

```
// force view to load
[viewController view];
// and now access the label
viewController.label.text = @"whatever"; 
```

如果您需要弄清楚如何从应用程序委托中获取指向视图控制器的引用/指针，您应该能够深入了解根视图控制器上的属性，或者使用委托，以便应用程序委托可以实现委托接口提供标签的文本。

**编辑：**

为了响应您对示例代码的更新，您肯定需要在访问标签之前执行此操作：

```
// force view to load
[home view];
home.dateCreatedLabel.text = @"date createdddd"; 
```

不过要警告一句：如果您的视图控制器由于内存警告而被卸载，您之前设置的文本将会丢失。

最好使用`NSDate`属性在视图控制器上设置日期，并在属性更改时让视图控制器设置标签的文本，并且在`-viewDidLoad`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-07T10:34:51.183

只需在 viewController 的 .h 文件和 appdelegate.m 中为此创建一个属性

`- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`

在 viewController 初始化时在这个方法中分配属性。

# file - C++ \\ DLL - 如何防止 DLL 欺骗？

> ID：10480469
> 
> 赞同：0
> 
> 时间：2012-05-07T10:28:04.340
> 
> 标签：file, dll, spoof

我有一个我购买的 DLL 文件（没有源代码），我将它链接到我的应用程序，只需使用“LoadLibrary(“file.dll”)”，然后它导入一个获取唯一 ID 的函数计算机。现在假设我们的黑客检测到了这个函数的名称，现在他正在创建一个新的 dll 文件，其中包含相同的名称和相同的函数名称。他的新 DLL 文件将被替换（只需将他的 dll 抓取到目录并替换为我的），并且唯一 ID 的功能可用但不返回任何内容。所以现在我的应用程序得到了一个空白的唯一 ID，黑客就从我手中逃脱了。

任何想法如何防止它？我的项目是用 C++ 编程的。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T13:06:29.513

您可以要求获得 DLL 的公司提供该 DLL 的 LIB。然后你可以静态链接到这个 LIB。这样做时，库的代码将成为您代码的一部分，因此对挂钩是透明的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:11:25.127

另一种可能性（在确实需要外部 DLL 的情况下）：您可以尝试说服您的 DLL 提供程序不按名称而是按序号导出函数。这通过默默无闻导致安全。这不会阻止挂钩或替换，但至少这不会使导出的函数明显易于理解。像 73（按编号导出函数）而不是 CreateMyFile（按名称导出函数）。

# c# - VS11 Beta 中的“.NET for Metro 风格应用程序”参考究竟是如何工作的？

> ID：10480472
> 
> 赞同：1
> 
> 时间：2012-05-07T10:28:15.127
> 
> 标签：c#, windows-8, visual-studio-2012

当您在 VS11 beta 中创建一个新的 C# Metro 风格应用程序时，它只有两个引用：一个指向 Windows.winmd，这是一个文件，我明白了；一个指向“.NET for Metro 风格应用程序”，它似乎指向 Reference Assemblies 下的 .NETCore 文件夹，而不是特别指向任何文件。两个参考的文件类型属性都是“SDK”。

我是否正确猜测文件夹引用有效地引用了该文件夹中的每个文件？那里有什么特别有趣的编译时事情吗？有没有办法可以创建一个可以以相同方式引用的文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:25:34.367

当您提高构建详细度、工具 + 选项、项目和解决方案、构建和运行、MSBuild 项目构建输出详细度设置时，您可以看到这一点。它在“TargetMonikerDisplayName”之后变得有趣，其中显示一条消息，显示它计算的引用程序集以及`Task "Csc"`显示传递给 C# 编译器的命令行选项的通知。

你会看到它通过了*它们*。我在 .NETCore\v4.5 目录中有 71 个引用程序集，编译器有 72 个 /reference 选项，Windows.winmd 有 1 个额外的

因此，您始终可以在 C# Metro 应用程序中编写这样的代码；）

```
 string newline = Microsoft.VisualBasic.Constants.vbCrLf; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T18:18:31.340

如果您`msbuild`在控制台上使用构建项目，您将能够看到**到底**发生了什么。所有 .Net 引用都作为编译器选项传递给编译`/reference`器，所以我认为编译时不会发生任何特别或有趣的事情。

似乎做了一些特殊的工作`msbuild`来包含对 Windows SDK 和 .Net 的引用，而不是可以用于其他目的的标准功能。如果您打开该`csproj`文件，您会看到所有 .Net 和 Windows 引用都已自动添加。

# android - Multitouch Android，简单的应用程序不起作用，为什么？

> ID：10480475
> 
> 赞同：0
> 
> 时间：2012-05-07T10:28:29.280
> 
> 标签：android, eclipse, touch, multi-touch

我试图制作一个简单的应用程序来学习如何制作多点触控，但它不能正常工作，我必须触摸一个奇怪的按钮组合才能启动动作，有什么想法吗？

代码在那里： [http ://wklej.to/MnwGl](http://wklej.to/MnwGl)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:45:24.700

我认为您正在尝试为单独的视图对象实现多点触控。

希望这个[链接](http://www.passsy.de/multitouch-for-all-views/)有帮助

# php - 在 symfony 中的两个表中具有不同字段的非相关表的分页

> ID：10480478
> 
> 赞同：1
> 
> 时间：2012-05-07T10:28:39.073
> 
> 标签：php, mysql, symfony-1.4

我想对两个数据库表 Table1 和 Table2 的记录进行分页，它们彼此不相关，并且两个数据库表都有不同数量的字段。每个查询都应该有一些条件，并且还与其他一些表连接。

我想同时对两个表的记录进行分页，以便我可以按如下方式显示数据 -

```
Row1 = Table1's - name, address,...
Row2 = Table2's - tool_name, quantity,...
Row3 = Table1's - name, address,...
Row4 = Table2's - tool_name, quantity,...
.
.
. 
```

如果 table1 没有记录，那么它将对 table2 进行分页，反之亦然。我希望在 symfony PHP 框架上完成此操作。有人可以帮助形成这种分页类型的查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T04:25:16.780

我结束了这样的事情。

获取不同查询的所有数据并存储到一个数组中，然后缓存它。

```
foreach($queries as $key => $query) {
 foreach ($query->fetchArray() as $result) {
    $data[] = $result;
 }
}

$c = new sfFileCache(
    array(
     'cache_dir' => sfConfig::get('sf_cache_dir').'/function',
     'lifetime'  => 3600,
    )
 );
$c->set('myarray',serialize($data)); 
```

我扩展了 sfDoctrinePager 以便它可以找到所有这些查询的总页数等。

比我使用 PHP usort() 根据特定顺序对数据进行排序。

```
usort($data, array($this,'activity_sort')); 
```

然后我使用 PHP array_chunk() 来获取有限的记录。

```
$chunkedData  = array_chunk($data, $limit);
$finalData = $chunkedData[$page - 1]; 
```

是的，它违反了分页规则，但当时我没有更好的解决方案。

# rss - RSS阅读器上的验证码？

> ID：10480479
> 
> 赞同：1
> 
> 时间：2012-05-07T10:28:40.357
> 
> 标签：rss, feed, aggregator

这个问题来自一个非技术人员。我已经要求一个团队构建一种 RSS 阅读器。从本质上讲，它是一个新闻聚合器。我们最初的想法是直接从特定来源获取新闻：ft.com、reuters.com 和bloomberg.com。

现在，开发团队提出了一种特定的方法（因为它会更容易）......那就是使用 news.google.com 并返回任何结果。现在我知道这有可疑的合法性，我们对这个事实并不那么满意，但是当法律部门正在检查时......我们已经开始使用原型。

现在出现了技术问题......因为该方法实际上是通过news.google.com模拟搜索，一段时间后它返回一个验证码。我怀疑这是因为该方法是使用显示为**RSS 的结果**进行搜索，而不是直接使用**RSS** ......但是开发团队说 RSS 是完全相同的东西......并且它也会提供验证码。

我有疑问。如果是这样的话，其他新闻聚合网站是如何完成来自不同来源的提要的汇编的？

供您参考，这里是最终提供验证码的 URL 相同 [https://news.google.com/news/feeds?hl=en&gl=sg&as_qdr=a&authuser=0&q=dbs+bank+singapore&bav=on.2， or.r_gc.r_pw.r_cp.,cf.osb&biw=1280&bih=963&um=1&ie=UTF-8&output=rss](https://news.google.com/news/feeds?hl=en&gl=sg&as_qdr=a&authuser=0&q=dbs+bank+singapore&bav=on.2,or.r_gc.r_pw.r_cp.,cf.osb&biw=1280&bih=963&um=1&ie=UTF-8&output=rss)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T10:33:40.650

“搜索”通常在验证码后面，因为它非常耗费资源，因此他们尽其所能防止机器人搜索。正常的 RSS 提要与资源密集型相反。总结一下：正常的 RSS 提要可能不会触发 CAPTCHA。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T10:45:34.890

由于 Google 于 2011 年 5 月 26 日宣布其新闻 API 已弃用，因此可能按照本组帖子[http://productforums.google.com/forum/#!topic/news/RBRH8pihQJI中的建议使用](http://productforums.google.com/forum/#!topic/news/RBRH8pihQJI)[NewsCred](http://www.newscred.com/)可能是您商业用途的一个选项.

# android - Android - 主屏幕小部件中的可滚动列表视图

> ID：10480489
> 
> 赞同：2
> 
> 时间：2012-05-07T10:29:44.163
> 
> 标签：android, listview, widget, scrollable

我有问题，我想创建一个带有列表视图的主屏幕小部件，它应该是可滚动的。我在文档页面上读到，该列表视图仅在 3.0 android 的远程视图中受支持。

但我仍然认为，这并不完全正确，或者我遗漏了一些东西。好的，当我尝试将列表视图添加到我的主屏幕数字时，我收到错误：`class not allowed to be inflated android.widget.listview`。但是在我的手机上我有 android 2.2.3，我可以添加主屏幕小部件（它的一些电子邮件应用程序小部件），它显示我的电子邮件的 SCROLLABLE 列表，看这里：

[http://i50.tinypic.com/2gslq2q.png](http://i50.tinypic.com/2gslq2q.png)

我的问题是：这怎么可能，怎么做，以何种方式？我在谷歌上搜索了几个小时，但完全不知道这怎么可能（可能动态生成项目 int 垂直线性布局并在右侧创建手动滚动条，但听起来非常复杂）。！[在此处输入图像描述][1]

编辑：如果用户用手指向上或向下移动，也许可以将一长串项目生成线性布局并检测...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:09:31.327

> 我在文档页面上读到，该列表视图仅在 3.0 android 的远程视图中受支持。

正确的。

> 我可以添加显示我的电子邮件的 SCROLLABLE 列表的主屏幕小部件（它的一些电子邮件应用程序小部件）

那不是应用程序小部件。这是该主屏幕实现的一个功能。

> 如果用户用手指向上或向下移动，也许它可以将一长串项目生成线性布局并检测......

不，对不起。

# algorithm - 配置文件的多属性匹配

> ID：10480491
> 
> 赞同：3
> 
> 时间：2012-05-07T10:29:56.893
> 
> 标签：algorithm, matching, n-dimensional

我正在尝试解决约会网站的问题。这是问题

应用程序的每个用户都会有一些属性——比如他读的书、他看的电影、音乐、电视节目等。这些是定义的顶级属性类别。这些类别中的每一个都可以有任意数量的值。例如在书中：喷泉头，爱情故事......

现在，我需要根据个人资料属性匹配用户。这是我打算做的事情：

使用反向索引存储数据。如果喷泉头、爱情故事等中的每一个都是具有该属性的用户集的索引键。

当有新用户加入时，获取该用户的属性，查找该用户的哪些索引键，获取这些键的所有用户，桶（或基数排序或类似排序）根据用户进入的次数进行排序这个合并列表。

这是好事，坏事，还是更糟？还有其他建议吗？

谢谢阿杰

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T10:39:58.833

您描述的算法还不错，尽管它使用了一个非常简单的人与人之间的相似性概念。

让我们使它更可调整，而无需创建复杂的匹配标准。假设喜欢同一本书的人比听相同音乐的人更相似。每一种兴趣都是如此。即不同领域的相似度具有不同的权重。

就像你说的，你可以为个人资料中拥有这些兴趣的人保留一份列表（如一本书、一首歌等）。然后，假设您要查找 guy 的匹配项`g`：

```
for each interest i in g's interests:
  for each person p in list of i
    if p and g have mismatching sexual preferences
      continue
    if p is already in g's match list
      g->match_list[p].score += i->match_weight
    else
      add p to g->match_list with score i->match_weight

sort g->match_list based on score 
```

然而，权重的选择并不是一项简单的任务。你需要很多心理学才能做到这一点。但是，使用您的常识，您可以获得不那么遥远的值。

一般来说，匹配人比对一些分数求和要复杂得多。例如，一组匹配的兴趣可能比它们单独的总和具有更多（或在某些情况下更少）的影响。此外，无论存在什么其他匹配的兴趣，对一个人的兴趣都可能完全导致另一个人的拒绝（以两个非常相似的人为例，他们中的一个喜欢而另一个讨厌暮光之城）

# bash - 这个 bash 脚本函数有什么作用

> ID：10480495
> 
> 赞同：0
> 
> 时间：2012-05-07T10:30:03.257
> 
> 标签：bash, shell, scripting

我是 shell 脚本的新手，我在给定的脚本文件中找到了这个函数。

```
##############################
# rotate_daily(filename)
rotate_daily() {
  _code=0
  _file_src=$1

  _today=`date '+%Y-%m-%d'`
  _file_dest=${_file_src}.${_today}
  if [ -f ${_file_dest} ]; then
    printk "rotate_daily(): ${_file_dest} already exist"
    _code=1
  else
    if [ -f ${_file_src} ]; then
      printk "rotate_daily(): ${_file_src} => ${_file_dest}"
      cp -p ${_file_src} ${_file_dest}
      _code=$?
      >${_file_src}
    fi
  fi
} 
```

我知道这是一种从一个位置到另一个位置的应对文件。但是，它没有旋转对吗？有人可以解释一下它的真正作用。

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:49:09.093

除非 _file_dest 已经存在，否则它将 _file_src 复制到位置 file_dest。将打印一条信息性消息，告诉您文件是否已存在或 file_src_ 将被复制，它还会仅在文件为文件时移动 _file_src。

编辑：忘记提及该命令的`>{_file_src}`作用-它只是清除了源文件的内容。因此，您最终会将 _file_src 的内容移动到 file_dest 并且 _file_src 将为空。我不明白为什么不简单地做一个 move(with `mv`) 然后创建一个空文件，但这是你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T10:52:27.097

如果时间戳文件已存在，则此代码片段仅通过 printk 打印一条消息，表明这一点。如果它不存在，它将源文件复制到它并截断源文件。我猜你不太明白的那一行是：

```
>${_file_src} 
```

该行在复制原始文件后截断它。请注意，存在竞争条件，在复制和截断之间写入文件的任何数据都将丢失。

# r - 在目录中加载新文件

> ID：10480499
> 
> 赞同：6
> 
> 时间：2012-05-07T10:30:21.713
> 
> 标签：r

我有一个 R 脚本来加载目录中的多个文本文件并将数据保存为压缩的 .rda。看起来像这样，

```
#!/usr/bin/Rscript --vanilla

args <- commandArgs(TRUE)
## arg[1] is the folder name

outname <- paste(args[1], ".rda", sep="")

files <- list.files(path=args[1], pattern=".txt", full=TRUE)

tmp <- list()
if(file.exists(outname)){
  message("found ", outname)
  load(outname)
  tmp <- get(args[1]) # previously read stuff
  files <- setdiff(files, names(tmp))

}

 if(is.null(files)) 
    message("no new files") else {

## read the files into a list of matrices
results <- plyr::llply(files, read.table, .progress="text")
names(results) <- files

assign(args[1], c(tmp, results))
message("now saving... ", args[1])
save(list=args[1], file=outname)
}
message("all done!") 
```

这些文件非常大（每个 15Mb，通常 50 个），因此运行此脚本通常需要几分钟时间，其中很大一部分用于编写 .rda 结果。

我经常用新的数据文件更新目录，因此我想将它们附加到以前保存和压缩的数据中。这就是我在上面所做的，通过检查是否已经存在具有该名称的输出文件。最后一步仍然很慢，保存 .rda 文件。

有没有更聪明的方法可以在某些包中解决这个问题，跟踪哪些文件已被读取，并更快地保存？

我看到它`knitr`用于`tools:::makeLazyLoadDB`保存其缓存的计算，但没有记录这个函数，所以我不确定在哪里使用它有意义。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T11:19:45.703

对于我需要经常读取（或写入）的中间文件，我使用

```
save (..., compress = FALSE) 
```

这大大加快了速度。

# c# - asp.net mvc 3 razor 两个控制器在一个视图中

> ID：10480500
> 
> 赞同：0
> 
> 时间：2012-05-07T10:30:23.943
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor

想在一个视图中使用两个模型。我有两个控制器，一个用于当前用户

```
 public class ProfileModel
    {
        public int ID { get; set; }
        public decimal Balance { get; set; }
        public decimal RankNumber { get; set; }
        public decimal RankID { get; set; }
        public string PorfileImgUrl { get; set; }
        public string Username { get; set; }
    } 
```

第二个朋友

```
 public class FriendsModel 
    {
        public int ID { get; set; }
        public string Name { get; set; }
        public string ProfilePictureUrl { get; set; }
        public string RankName { get; set; }
        public decimal RankNumber { get; set; }
    } 
```

个人资料模型始终包含一项，朋友模型包含列表

我制作了包含两种模型的新模型：

```
public class FullProfileModel 
    {
        public ProfileModel ProfileModel { get; set; }
        public FriendsModel FriendModel { get; set; }
    } 
```

我试图像这样填充 FullProfile 模型

```
List<FriendsModel> fmList = GetFriendsData(_UserID);

            FullProfileModel fullModel = new FullProfileModel();

            fullModel.ProfileModel = pm;
            fullModel.FriendModel = fmList.ToList(); 
```

但视觉工作室在 .ToList() 上给出错误

错误：

```
Cannot implicitly convert type 'System.Collections.Generic.List<NGGmvc.Models.FriendsModel>' to 'NGGmvc.Models.FriendsModel' 
```

请告诉我一些如何在单个视图中显示两个模型的方法。

ps im 使用 mvc3 razor 视图引擎

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:33:21.817

更正您的 ViewModel

```
public class FullProfileModel 
    {
        public ProfileModel ProfileModel { get; set; }
        public IList<FriendsModel> FriendModels { get; set; }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T10:33:36.377

我觉得你需要收藏

```
public class FullProfileModel 
{
    public ProfileModel ProfileModel { get; set; }
    public List<FriendsModel> FriendModels { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T10:35:13.017

您正在尝试设置值为 List 的 FriendsModel 类型的属性。

```
 public FriendsModel FriendModel { get; set; } 
```

改成：

```
public class FullProfileModel 
    {
        public ProfileModel ProfileModel { get; set; }
        public IList<FriendsModel> FriendModel { get; set; }
    } 
```

# ruby-on-rails - nginx 不响应对 rails 应用程序的请求

> ID：10480501
> 
> 赞同：1
> 
> 时间：2012-05-07T10:30:25.657
> 
> 标签：ruby-on-rails, deployment, nginx, amazon-ec2, passenger

我尝试通过 nginx 和乘客将我的应用程序部署到 EC2 子 Amazon。我做了乘客安装评论所说的。但是当我运行我的 nginx 并尝试进入我的站点时，它甚至没有响应错误消息。它永远循环。我查看了我的非工作 nginx 的 pstree 输出：

```
init─┬─PassengerWatchd─┬─PassengerHelper─┬─ruby─┬─ruby─┬─ruby─┬─ruby───{ruby}
     │                 │                 │      │      │      └─{ruby}
     │                 │                 │      │      └─{ruby}
     │                 │                 │      └─2*[{ruby}]
     │                 │                 └─27*[{PassengerHelper}]
     │                 ├─PassengerLoggin───{PassengerLoggin}
     │                 └─3*[{PassengerWatchd}]
     ├─acpid
     ├─atd
     ├─avahi-daemon───avahi-daemon
     ├─cron
     ├─dbus-daemon
     ├─dhclient3
     ├─6*[getty]
     ├─mysqld───17*[{mysqld}]
     ├─nginx───nginx
     ├─rsyslogd───3*[{rsyslogd}]
     ├─sshd───sshd───sshd───bash───pstree
     ├─udevd───2*[udevd]
     ├─upstart-socket-
     ├─upstart-udev-br
     └─whoopsie───{whoopsie} 
```

我的笔记本电脑里也有 nginx，它工作正常，它在收到请求后（部分）给出了这个 pstree 输出：

```
├─PassengerWatchd─┬─PassengerHelper─┬─ruby
     │                 │                 └─27*[{PassengerHelper}]
     │                 ├─PassengerLoggin───{PassengerLoggin}
     │                 └─3*[{PassengerWatchd}] 
```

我看到请求后我的 EC2 实例上有一些僵尸进程：

你对这个问题有什么看法以及解决它的任何建议？

等待后它给出网关超时 504

# eclipse - Disappearing navpoints

> ID：10480503
> 
> 赞同：0
> 
> 时间：2012-05-07T10:30:37.393
> 
> 标签：eclipse, tooltwist

I edited my navpoints from within the ToolTwist workbench, and after restarting the server all my navpoints had disappeared. I've checked the navpoint file, and it looks to be correct. I've tried restarting the server, but still ALL the navpoints have disappeared.

Can anybody tell me what I've done wrong, or suggest something to try?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T00:27:58.453

Normally there is no need to edit the navpoint definition files - the navpoint tab in the Designer should be used. If for some reason it does need to be edited, make sure you restart the server immediately after making the changes or else they may be overwritten by the Designer. Make sure that the encoding for the file is correct. The navpoint allows multi-lingual descriptions, SEO fields, etc, so needs to be stored as Unicode.

To check this, right click on the file in the Workbench (e.g. webdesign/myproject/navpoints/myproject.xml) and select properties. On the Resource tab, you'll see a section titled "Text file encoding". The correct value for this is UTF-16

# caliburn.micro - Caliburn.micro : 使用选项卡控件绑定 ViewModel 的两个视图

> ID：10480507
> 
> 赞同：0
> 
> 时间：2012-05-07T10:30:46.767
> 
> 标签：caliburn.micro

我试图通过编辑 Caliburn.Micro 源代码中包含的示例源代码 Caliburn.Micro.SimpleMDI 将 viewmodel 的两个视图绑定到选项卡控件的两个选项卡。该项目包含 ShellViewModel 和 TabViewModel 和 TabView。我添加了一个名为 TabViewDetails 的视图。我编辑了 ShellViewModel 如下。

```
public class ShellViewModel : Conductor<IScreen>.Collection.OneActive 
{
    int count = 1;

    public void OpenTab()
    {
        TabViewModel  vm = null;
        if (Items.Count != 0)
        {
            vm = new TabViewModel() { DisplayName = "Detail Tab " + count++ };   
            var secondView = new TabViewDetails();

            ViewModelBinder.Bind(vm, secondView , null);

        }
        else
        {
            vm = new TabViewModel() { DisplayName = "Tab " + count++ }; 
        }

        ActivateItem(vm);
    }

} 
```

第一个标签是好的。但是第二个选项卡什么也没显示。有人可以帮忙找出问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T16:00:57.300

我没有太多使用 Caliburn.Micro，但简单的解决方案是一个视图，一个视图模型。如果您将代码更改为：

```
public class ShellViewModel : Conductor<IScreen>.Collection.OneActive {
    int count = 1;

    public void OpenTab()
    {
        Screen screen;

        if (count != 0)
        {
            screen = new TabViewModel
                            {
                                DisplayName = "Tab " + _count++
                            };
        }
        else
        {
            screen = new TestViewModel
                            {
                                DisplayName = "Tab " + _count++
                            };
        }

        ActivateItem(screen);
    }
} 
```

其中 TestViewModel 可以是 TabViewModel

```
public class TestViewModel : TabViewModel
{
} 
```

那么这可以正常工作。

[Caliburn 文档](http://caliburnmicro.codeplex.com/wikipage?title=Screens,%20Conductors%20and%20Composition&referringTitle=Documentation)确实*在同一视图模型上有多个视图*部分，但我还没有弄清楚。

# asp.net-mvc - 按条件更改 ASP.NET MVC 3 中属性的验证

> ID：10480509
> 
> 赞同：2
> 
> 时间：2012-05-07T10:30:49.077
> 
> 标签：asp.net-mvc, asp.net-mvc-3, validation, validationattribute

这是我的模型：

```
[RegularExpression(@"^08[589][0-9]{8}$", ErrorMessage = "Invalid Number!")]
public string Phone { get; set; }

[ForeignKey]
public long PhoneType { get; set; } // 1-CellPhone , 2-Phone 
```

因此，如果我想说更具体的话，我想`RegularExpression`通过更改来更改验证：`PhoneType`

如果用户`CellPhone`从`DropDownList`验证中选择

```
[RegularExpression(@"^08[589][0-9]{8}$", ErrorMessage = "Invalid Number!")] 
```

如果选择`Phone`验证是

```
 [RegularExpression("^[1-9][0-9]{9}$", ErrorMessage = "Invalid Number!")] 
```

你的建议是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T11:24:34.017

您可以编写自定义验证属性：

```
public class PhoneAttribute : ValidationAttribute
{
    private readonly string _phoneTypeProperty;
    public PhoneAttribute(string phoneTyperoperty)
    {
        _phoneTypeProperty = phoneTyperoperty;
    }

    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        var property = validationContext.ObjectType.GetProperty(_phoneTypeProperty);
        if (property == null)
        {
            return new ValidationResult(string.Format("Unknown property: {0}", _phoneTypeProperty));
        }

        var phone = Convert.ToString(value, CultureInfo.CurrentCulture);
        if (string.IsNullOrEmpty(phone))
        {
            return null;
        }

        var phoneType = (long)property.GetValue(validationContext.ObjectInstance, null);
        Regex regex = null;
        if (phoneType == 1)
        {
            regex = new Regex(@"^08[589][0-9]{8}$");
        }
        else if (phoneType == 2)
        {
            regex = new Regex("^[1-9][0-9]{9}$");
        }
        else
        {
            return new ValidationResult(string.Format("Unknown phone type: {0}", phoneType));
        }

        var match = regex.Match(phone);
        if (match.Success && match.Index == 0 && match.Length == phone.Length)
        {
            return null;
        }

        return new ValidationResult(FormatErrorMessage(validationContext.DisplayName));
    }
} 
```

然后用这个属性装饰你的视图模型属性：

```
public class MyViewModel
{
    [Phone("PhoneType", ErrorMessage = "Invalid Number!")]
    public string Phone { get; set; }

    public long PhoneType { get; set; }
} 
```

* * *

如果您想通过验证让您的生活更轻松，另一种可能性（我强烈推荐）是使用[FluentValidation.NET](http://fluentvalidation.codeplex.com/)。看看定义验证规则是多么容易，而不是编写大量的管道代码，并且不再能够理解哪个部分是管道，哪个部分是实际验证。使用 FluentValidation.NET 没有管道。您以流利的方式表达您的验证要求：

```
public class MyViewModelValidator : AbstractValidator<MyViewModel>
{
    public MyViewModelValidator()
    {
        RuleFor(x => x.Phone)
            .Matches(@"^08[589][0-9]{8}$").When(x => x.PhoneType == 1)
            .Matches("^[1-9][0-9]{9}$").When(x => x.PhoneType == 2);
    }
} 
```

只需将此验证器与前一个进行比较。

# html - 动态 HTML5 画布动画

> ID：10480517
> 
> 赞同：0
> 
> 时间：2012-05-07T10:31:36.893
> 
> 标签：html, animation, dynamic, canvas

我想创建一个动态的 HTML5 画布动画。此动画应使用服务器端变量。

目标是在浏览器中显示一个画布，其中包含一条路径和一些正在移动该路径的对象（服务器端变量）。每个对象都应该有速度（服务器端变量）。所以每个物体都以不同的速度运动。一个对象代表一个用户，每个用户都可以改变他的对象的速度，这个变化应该更新每个正在运行的画布，所以每个用户都观看相同的动画。

这可以用 HTML5 Canvas 创建吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T19:09:52.863

是的，画布可以成为解决方案的一部分，因为它对于客户端的快速动画非常方便。

但是你会有更多的工作服务器端，介于两者之间。

在服务器端，您应该使用一种能够轻松完成多任务处理和长时间任务的技术。Java 或 Go 服务器可以轻松地做到这一点（例如）。

对于从服务器向浏览器发送 thobject 属性（包括位置和速度），我建议使用 websockets，因为它们使服务器能够在计算数据后立即将数据推送到浏览器（浏览器仍然必须打开连接，但它可以根据需要保持打开状态）。

# ms-access - 如何在 ms-access 中使用 ISNULL 函数

> ID：10480518
> 
> 赞同：3
> 
> 时间：2012-05-07T10:31:40.287
> 
> 标签：ms-access, ms-access-2003

我有以下字段的数据库表

FieldId FieldGroupId 字段名

我需要从 FieldId = "?" 的字段表中选择 FieldGroupId 如果 FieldGroupId 为空，它应该返回一些默认值。

如果数据库中不存在 FieldID，则以下查询不起作用。

```
select IIf(IsNull(FieldGroupID),"AA",FieldGroupID) from Fields where FieldID ='ALPHAA' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T11:30:56.027

如果您将在 Access 应用程序会话中执行此操作，则可以使用`DLookup()`来检索与您的值`FieldGroupID`匹配的`FieldID`值。

```
DLookup("FieldGroupID", "[Fields]", "FieldID ='ALPHAA'") 
```

`DLookup()``FieldID`找不到时会给你 Null 。您可以使用该`Nz()`函数将所需的值替换为 Null。

```
Nz(DLookup("FieldGroupID", "[Fields]", "FieldID ='ALPHAA'"), "AA") 
```

# php - 简单的 PHP 投票系统

> ID：10480520
> 
> 赞同：7
> 
> 时间：2012-05-07T10:32:01.820
> 
> 标签：php, mysql

我有一个简单的应用程序，它允许用户提交“问题”然后对其发表评论。我正在尝试制作一个简单的投票系统，以便用户可以“投票”问题，这反过来又会将他们推到更高的位置。我有一些 PHP 的基本知识，到目前为止一切正常，我只是不知道如何让它工作。

我已经在线学习了一个教程，到目前为止，我的问题.php页面上有这个......

```
if (isset($_GET['vote'], $_GET['id'])){
        add_problem_vote($_GET['id]'], $_GET['vote']);
    }

<a href="?vote=up&amp;id=<?php echo $problemID; ?>">Vote</a> 
```

在我的functions.php页面上......

```
function add_problem_vote($problemID, $vote){

    $problemID = (int)$problemID;

    $vote = ($vote === 'up') ? '+' : '-';

    $sql = "UPDATE `problems` SET `votes` = `votes` {$vote} 1 WHERE `id` = {$problem_id}";

    mysql_query($sql);
} 
```

我所有的表字段都绝对正确命名。我知道有很多事情需要考虑，比如在会议结束后重新投票，但只要我展示了这个想法，它不一定是完美的。在单击链接的那一刻，它会重定向到一个页面，但 mysql 表中的投票不会改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T11:29:42.293

```
$sql = "UPDATE `problems` SET `votes` = `votes` ".$vote." 1 WHERE `id` = ".$problem_id;
mysql_query($sql) or die(mysql_error()); 
```

Check what error you are getting ?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:40:58.257

对此完全不确定，但是：

```
$problemID = (int)$problemID; 
```

应该是：

```
$problemID = intval($problemID); 
```

每当某事停止工作时，我总是添加一个

```
echo $sql; 
```

在调用 mysql_query(); 之前 这样我就可以将结果复制并粘贴到 SQL 浏览器中，看看它是否正确。

编辑：再看一眼，因为之前有人逃脱了 SQL 语句，我认为值得一提的是：

```
$sql = "UPDATE `problems` SET `votes` = `votes` {$vote} 1 WHERE `id` = {$problem_id}"; 
```

至：

```
$sql = "UPDATE `problems` SET `votes` = `votes` {".$vote."} 1 WHERE `id` = {$problem_id}"; 
```

但是如果所有的 SQL 都在上升，那么为什么不尝试：

```
$sql = "UPDATE `problems` SET `votes` = `votes`+1 WHERE `id` = {$problem_id}"; 
```

因为这正是您正在做的，所以不需要传递 $vote 参数。

其他简单的调试选项是：

```
print_r($_POST); // to show all the POSTED variables from a form
print_r($_GET);  // to show all the parameters from the URL 
```

大块头

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T10:53:20.030

我猜这是因为您没有建立与数据库的 MYSQL 连接，所以这种方式不起作用。

对于我的 PHP 项目，我（重新）使用我曾经编写过的一个类，包装所有这些函数，并进行适当的错误处理等。

也许您应该考虑这样的事情，或者您至少需要`mysql_connect`在执行查询之前添加。

希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-22T06:17:44.153

请检查以下错误

*   在 problem.php 中包含 functions.php
*   使用 mysqli_query($sql) insted of mysql_query($sql)。因为它已被弃用。你也可以使用 PDO
*   使用 die(mysqli_error($connection_varible)) 函数来跟踪 sql 错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T11:04:18.183

尝试这个 ：

```
"UPDATE `problems` SET `votes` = `votes` ".mysql_real_escape_string($vote)." 1 WHERE `id` = ".mysql_real_escape_string($problem_id); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-01T08:21:42.223

如果你想继续你的第一个解决方案，查询应该是：

```
$sql = "update `problems` set `votes` = `votes` + 1 where `id` = '$problem_id'"; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-04T10:27:22.263

我很抱歉我的英语不好。我希望你能理解 :) 所以首先最好使用**mysqli**或 pdo。如果您创建新的投票表，将来您将有更多选择（加入用户行列，平均具体用户排名，验证用户之前是否投票过，...）

做的灵感：用户端（用于发送使用jquery - ajax）：

```
<a href="IDOFPROBLEM" title="VoteUp" class="voteUp">VoteUp</a>
    <script>
        $(document).ready(function() {
            $(".voteUp").click(function(e) {
                e.preventDefault();

                var id = $(this).attr("href");

                $.ajax({
                    type: "POST",
                    //This is destination of php script
                    url: "YOURVOTEUPFILE.php?vote=up",
                    data: {id: id}
                })
                        .done(function(msg) {
                    //msg contains data from php script so you can show message to user good or bad :)
                    alert(msg);
                });
            });
        });
    </script> 
```

服务器端：

```
final class manageVote {

    /**
     * Id of problem
     * @var int|string 
     */
    private $voteFor;
    /**
     * Id of user
     * @var int|string 
     */
    private $whoVote;

    /**
     * Mysqli
     * @var \mysqli 
     */
    private $database;

    /**
     * Construct - initialize variable
     * @param int|string $voteFor
     * @param int|string $whoVote
     * @param \mysqli $db
     */
    public function __construct($voteFor, $whoVote, &$db) {

        $this->voteFor = $voteFor;
        $this->whoVote = $whoVote;
        $this->database = $db;
    }

    /**
     * Try to make vote
     * @param string $upOrDown "up" or "down"
     * @return boolean
     */
    public function vote($upOrDown) {
        if (!$this->verifyIfUserCannote() || ($upOrDown != "up" && $upOrDown != "down"))
            return false;
        //Change database name to your name
        //Better solution is sql table for all ranks
        //And you need "whoVote" because I think one problem - one vote for one user
        /*
         * Table could be:
         * idvote PK NN AI
         * vote INT NN
         * idproblems FK NN
         * whoVote FK NN
         */
        $sql = "INSERT INTO `DATABASENAME`.`problems` (`idproblems`, `vote`, `whoVote`) VALUES('" . $this->voteFor . "', '" .
                ($upOrDown == "up" ? 1 : -1) . "', '" . $this->whoVote . "')";
        $query = $this->database->query($sql);
        if (!$query)
            return false;
        return true;
    }

    private function verifyIfUserCannote() {
        $sql = "SELECT COUNT(*) AS 'cnt' FROM `DATABASENAME`.`problems` WHERE `idproblems` = '" . $this->voteFor . "' AND `whoVote` = '" . $this->whoVote . "'";

        $query = $this->database->query($sql);

        if (!$query)
            return false;

        $result = mysqli_fetch_array($query);

        return ($result["cnt"] == 0 ? true : false);
    }

}

if (isset($_GET["vote"])) {
    $voteClass = new manageVote($_POST["id"], $someYourIdentificatorWhoVote, $mysqliDatabaseReference);

    echo ($voteClass->vote($_GET["vote"]) == true ? "TRUE" : "FALSE");
}
 else 
     echo "FALSE"; 
```

对于投票的最终排名，请使用 SQL 命令 SELECT SUM(vote) FROM ....... GROUP BY idProblems

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-15T18:58:38.023

首先查询不正确

```
$sql = "UPDATE `problems` SET `votes` = `votes` {$vote} 1 WHERE `id` = {$problem_id}"; 
```

更正

```
$sql = "update `problems` set `votes` = '$vote' where `id` = '$problem_id'"; 
```

我会建议另一种方式。使用这些列制作表格投票： - 用户（用户的 ID） - 问题（需要投票的事物的 ID） - 投票（或数字（例如：0 到 4）或选项（a，b， C...） ）

主键 = 用户、问题

现在您可以轻松插入/更新投票

```
mysql_query("replace into votes values ( $userid, $question, $vote )"); 
```

完毕！并且您可以轻松获得平均值（如果您选择投票为数字）或票数（如果您选择了选项）！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-02-11T12:41:08.543

在 is-set 函数中的两个数据之间使用“和”，或者只是其中一个数据可用于 is-set 函数。

```
 if (isset($_GET['vote'] &&  $_GET['id'])){
                add_problem_vote($_GET['id]'], $_GET['vote']);
            }

        <a href="?vote=up&amp;id=<?php echo $problemID; ?>">Vote</a>

    function add_problem_vote($problem_id,$vote)
{
$query_select="select votes from problems where id='".$problem_id."'";
$query_run=mysql_query($query_select);
if(mysql_num_rows($query_run)>0)
{
$vote_num=mysql_result($query_run,0,votes)
if($vote==up)
$vote_num=+$vote_num;
else
$vote_num=-$vote_num
}
$sql = "UPDATE `problems` SET `votes` = '$vote_num'  WHERE `id` = '".$problem_id.'"";

    mysql_query($sql);

} 
```

# jakarta-ee - 在用于聊天和通知的 Java Web 应用程序中实现 BOSH 和 Ejabberd

> ID：10480524
> 
> 赞同：1
> 
> 时间：2012-05-07T10:32:11.367
> 
> 标签：jakarta-ee, ejabberd

是否有人在 Java Web 应用程序中实现了 BOSH 和 Ejabberd，用于聊天和其他目的，如通知。

有没有其他办法..？

当服务器上出现任何新内容时，我希望服务器到客户端推送。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:16:35.463

有许多替代方案可用于在网页上推送。ejabberd + XMPP + Bosh 只是其中之一。在 ProcessOne，我们甚至为此构建了一个推送平台，并且还有其他一些竞争对手。选择正确的平台很大程度上取决于您想要实现的目标。

如果您可以分享一些细节，人们将能够发表更多相关的评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:24:32.477

当您已经有一个聊天系统用于应用程序中的用户到用户消息传递时，添加推送通知之类的内容绝对很容易。我有一些客户在这个特定的用例上提供过帮助。

如果您想要聊天和推送通知，我相信您可以找到不涉及 XMPP 服务器的解决方案，但我不确定我是否会推荐它们。XMPP 协议为与客户端交换信息以及在客户端收到信息后路由信息提供了很多内置支持。例如，您可以发送带有特殊标签或 xml 命名空间的消息，以便您的客户端可以区分推送通知从普通用户到用户聊天消息。strophejs库使这[变得](http://strophe.im/strophejs/)特别容易。

有一个[HTTP XMPP Gateway](http://chatmongers.com/blog/introducing-the-chatmongershttp-to-xmpp-gateway/)服务可用于允许应用程序通过 HTTP post 向 XMPP 用户发送消息。这对于在应用程序中实现推送通知绝对有帮助。

# php - 有抄送时发送两封电子邮件的 PHP 脚本

> ID：10480530
> 
> 赞同：0
> 
> 时间：2012-05-07T10:32:51.410
> 
> 标签：php, email

第一封邮件只发给我，第二封给我和抄送。没有密件抄送。

电子邮件代码：

```
$to = 'to@email.com';
$subject = 'Email';
$message = '<html><body><p>Hello from me!<br>';
$headers = 'MIME-Version: 1.0' . "\r\n";
$headers = $headers . 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers = $headers . 'From: from@email.com' . "\r\n";
$headers = $headers . 'Reply-To: from@email.com' . "\r\n";
$headers = $headers . 'CC: cc@email.com' . "\r\n";
mail($to, $subject, $message, $headers); 
```

如您所见，只有一个抄送和一个“收件人”地址。我不认为这是 PHP.ini 文件：

```
[PHP]

engine = On

max_execution_time = 60     ;
 Maximum execution time of each script, in seconds 
max_input_time = 120    ;
 Maximum amount of time each script may spend parsing request data
memory_limit = 128M      ; 
Maximum amount of memory a script may consume (8MB)

post_max_size = 150M

default_mimetype = "text/html"

default_charset = "UTF-8"

file_uploads = On

upload_max_filesize = 150M

allow_url_fopen = On

user_agent="PHP"

default_socket_timeout = 60

cgi.fix_pathinfo = 1

cgi.fix_pathinfo = 1 
```

但它就在那里。为什么我要双打？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T10:35:46.853

我建议您使用 Swift Mailer 等电子邮件处理库。它处理这种事情比将你自己的标题串在一起要好得多。

[http://swiftmailer.org/](http://swiftmailer.org/)

# c# - 允许非管理员更新程序文件中的 .Config 文件

> ID：10480535
> 
> 赞同：0
> 
> 时间：2012-05-07T10:33:32.663
> 
> 标签：c#, configuration-files, non-admin

我正忙于开发一个在安装文件夹（C:/Program Files/...）中存储 .config 文件的软件。使用该软件时需要更新此配置文件，当用户具有管理员权限时当前工作正常，但是当非管理员用户尝试使用该软件时会发生异常，因为他们无权更新 C 中的文件： /程序文件/。

用于更新配置文件的代码如下：

```
Configuration config = ConfigurationManager.OpenExeConfiguration(fileName);
config.AppSettings.Settings.Add("New Setting");
config.Save(); 
```

是否允许非管理员用户更新此配置文件？也许通过更改实际配置文件中的某些内容或更改我更新它的方式？

理想情况下，我会将文件移动到 App Data 文件夹，但这可能是一项相当大的工作，所以我宁愿避免这样做。

任何帮助将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:38:30.410

您的安装程序（甚至是应用程序，当它检测到它以管理员身份运行时）可以在配置文件上设置 ACL，以允许普通用户读取和写入该特定文件。

然而，正确的方法——正如你自己所说的——是使用应用程序数据文件夹。

# security - 从 Phonegap App 到外部域的安全签名

> ID：10480537
> 
> 赞同：2
> 
> 时间：2012-05-07T10:33:34.567
> 
> 标签：security, cordova, code-access-security

我正在用 PhoneGap 制作一个应用程序。我需要向外部域发送一些日期，以帮助我将其放入 MySQL 数据库中。

我想创建一个标志，将我的请求发送到服务器，以检查这些日期是否来自我自己的应用程序。我不希望第三方能够从外部向我的外部域发出请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T10:49:28.050

在我看来，您需要一个 OTP 系统（一次性密码）。我以前从来没有做过这样的事情，但我可以给你一些关于它是如何工作的提示。

它适用于在客户端和服务器中同步的伪随机数生成器 (PRNG)。为此，您将一个秘密种子传递给您的 PRNG（客户端和服务器端），它将在预定的时间间隔后生成一个随机数，这将是您在该时间间隔内的密码（在新的随机数之前）被建造）。由于两个 PRNG 具有相同的种子和算法，它们都生成相同的随机数，允许匹配密码。我希望这有帮助。

# php - 如何在一行中编写此表达式，codeigniter

> ID：10480539
> 
> 赞同：0
> 
> 时间：2012-05-07T10:33:39.960
> 
> 标签：php, codeigniter

我有一段代码，我想在线获取结果

```
 $lang = $this->config->item('email');
    echo $lang['support_email'] ; die; 
```

当我`var_dump` `$lang`的结果

```
array(11) {
  ["useragent"]=>
  string(11) "CodeIgniter"
  ["mailpath"]=>
  string(17) "/usr/bin/sendmail"
  ["protocol"]=>
  string(4) "mail"
  ["smtp_host"]=>
  string(9) "localhost"
  ["smtp_user"]=>
  string(0) ""
  ["smtp_pass"]=>
  string(0) ""
  ["smtp_port"]=>
  string(2) "25"
  ["system_email"]=>
  string(21) "noreply@elephanti.com"
  ["help_email"]=>
  string(18) "help@elephanti.com"
  ["inquiries_email"]=>
  string(23) "inquiries@elephanti.com"
  ["support_email"]=>
  string(21) "support@elephanti.com"
} 
```

我试过

回声`$this->config->item('email')['support_email']`

和

```
echo echo `$this->config->item('email')->support_email 
```

请帮忙.............

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T10:40:41.467

```
$lang = $this->config->item('email', 'support_email'); 
```

从文档：

[http://codeigniter.com/user_guide/libraries/config.html](http://codeigniter.com/user_guide/libraries/config.html)

> `// Retrieve a config item named site_name contained within the` blog_settings 数组`
> 
> `$site_name = $this->config->item('site_name',` `'blog_settings');`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T10:37:41.223

你只能`echo $this->config->item('email')['support_email']`在 PHP 5.4+ 中做

否则你能做的最好的就是：

```
$lang=$this->config->item('email');echo $lang['support_email'];exit; 
```

或者编写一个自定义函数来为你做这件事。

*但是然后问自己，为什么必须在一行中执行此操作……？*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T10:40:23.887

> `echo $this->config->item('email')['support_email']`

这实际上适用于 PHP > 5.4。在旧版本中，不可能在一个语句中完成，因此您必须将数组存储在单独的局部变量中。您可以创建一个函数来检索这样的值：

```
 <?php
 function array_get( array $array, $index ) {
    return isset( $array[$index] ) ? $array[$index] : false;
 }

 echo array_get( $this->config->item( 'email' ), 'support_email' ); 
```

但这真的没用。您想在一行中执行此操作的任何特殊原因？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T10:39:35.990

尝试：

```
foreach($lang as $key=>$val)
{
  if($key == "support_email")
  {
    echo $val;
  }
} 
```

# c# - 为什么我不应该实现 IObservable ?

> ID：10480542
> 
> 赞同：12
> 
> 时间：2012-05-07T10:33:49.523
> 
> 标签：c#, system.reactive

阅读有关响应式扩展等的 msdn 时，我发现一个建议说我不应该实现 IObservable，而应该使用 Observable.Create...当我读到这篇文章时，我的项目已经有了一个`ObservableImplementation<T>`类，我d 用作 IObservable 源，在任何我想将事件转换为 Observable 的地方。

我已经阅读了`AbstractObservable<T>`System.Reactive 中的实现，我没有发现他们的代码和我的代码有任何重大区别。那么实现 IObservable 有什么问题呢？我可以向它添加我自己的属性，等等......

为了完整起见，这是我的实现，如果我做错了什么，请告诉我！

```
public sealed class ObservableImplementation<T> : IObservable<T>
{
    class Subscription : IDisposable
    {
        private readonly Action _onDispose;
        public Subscription(Action onDispose)
        {
            _onDispose = onDispose;
        }

        public void Dispose()
        {
            _onDispose();
        }
    }

    public void Raise(T value)
    {
        _observers.ForEach(o => o.OnNext(value));
    }
    public void Completion()
    {
        _observers.ForEach(o => o.OnCompleted());
        _observers.Clear();
    }

    private readonly List<IObserver<T>> _observers = new List<IObserver<T>>();  
    public IDisposable Subscribe(IObserver<T> observer)
    {
        var subscription = new Subscription(() => _observers.Remove(observer));
        _observers.Add(observer);
        return subscription;
    }
    public bool AnyObserverPresent { get { return _observers.Any(); } }
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-23T23:19:01.413

我们不建议人们直接实现 IObservable<T> 有几个原因。

一是缺乏对违反观察者语法的保护。例如，您的序列可能会在 OnCompleted 调用之后显示 OnNext 调用的行为，这是无效的。Observable.Create<T> 方法和 ObservableBase<T> 基类型通过在接收到终端消息时自动分离观察者来处理这一点。因此，即使您的代码做错了事，观察者也不会看到格式错误的序列。

顺便说一句，这类似于 C# 中的迭代器。手动实现 IEnumerable<T> 应该使得当枚举器的 MoveNext 返回 false（类似于 OnCompleted）时，后续调用不会改变主意并开始返回 true（类似于 OnNext）：

> 如果 MoveNext 超过集合的末尾，则枚举数位于集合中的最后一个元素之后，并且 MoveNext 返回 false。当枚举数位于此位置时，对 MoveNext 的后续调用也将返回 false，直到调用 Reset。（来源：MSDN）

在 C# 2.0 或 VB 11.0 中使用迭代器时，会为您解决这些问题。这类似于我们的 Observable.Create<T> 方法和 ObservableBase<T> 基本类型。

与上述讨论相关的一个原因是清理。从订阅的 Dispose 调用返回后，观察者将不再看到任何消息吗？向观察者发送终端消息后，是否会自动调用相关订阅的 Dispose 逻辑？两者都不是微不足道的，所以我们的基本实现会处理这个问题。

另一个原因与我们的 CurrentThreadScheduler 有关，确保在该调度程序上运行时订阅调用可以是异步的。本质上，我们需要在调用订阅期间检查是否需要在当前线程上安装蹦床。我们不希望每个人都知道这一点并做正确的事。

在您的特定情况下 - 正如其他人在这里所注意到的那样 - 您正在构建一个主题。要么只使用我们的主题之一，要么通过包含在您自己的类型中将其包装（例如，如果您希望发送“观察者”端可以被其他方访问，而不是接收“可观察”端）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-07T17:45:53.190

您不应该实施`IObservable<T>`的原因与您通常不实施的原因相同`IEnumerable<T>`，因为有人很可能已经构建了您想要的东西。在这种情况下，您基本上已经重新实现`Subject<T>`了大部分。

**编辑：**关于评论中的懒惰问题，我会这样实现：

```
var lazyObservable = Observable.Create<TFoo>(subj => { /*TODO: Implement Me to load from reflection*/ })
    .Multicast(new Subject<TFoo>())   // This means it'll only calc once
    .RefCount();    // This means it won't get created until someone Subscribes 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-18T23:55:31.470

Rx 团队最近的[一篇博客文章](http://blogs.msdn.com/b/rxteam/archive/2012/06/14/testing-rx-queries-using-virtual-time-scheduling.aspx "博文")包含三个原因。因为这篇文章很长，所以我复制了相关部分。

**执行合同**

> Observable.Create 接受一个委托，该委托将成为生成的 IObservable 实现上的 Subscribe 方法的核心实现。我们对这个委托做了一些巧妙的包装，以强制执行观察者契约等（这就是为什么你不应该自己实现接口的原因）。

**一次性包装纸**

> 返回的一次性有一个小包装器，用于确保在从 Dispose 调用返回后不会再调用观察者，即使调度程序可能还没有处于良好的停止点。（还有一个你永远不应该手动实现 IObservable 接口的原因。哦，顺便说一句，还有更多！）

**完成后自动处理**

> 这里的兴趣点是在向下游发送 OnCompleted 时应用于源订阅的自动处置行为。（这也是强烈反对手动实现 IObservable 的另一个原因。在使用 Observable.Create 时，我们会为您解决这个问题。）

# vb.net - 是否可以通过调用子例程来刷新另一个打开形式的数据网格？

> ID：10480559
> 
> 赞同：0
> 
> 时间：2012-05-07T10:35:16.373
> 
> 标签：vb.net, datagrid, refresh, subroutine

是否可以通过调用子例程来刷新另一个打开形式的数据网格？

这个应用程序有一个带有 2 个数据网格的表单。当用户双击其中一个网格时，会打开另一个显示数据详细信息的表单。在用户更改详细信息后，用户单击保存按钮。

我们已将此代码放在详细信息表单的关闭事件中。

```
Private Sub FormParents_FormClosing(sender As System.Object, e As System.Windows.Forms.FormClosingEventArgs) Handles MyBase.FormClosing

    FormParentsAndStudents.RefreshDataGrids()
End Sub 
```

代码确实执行了，因为我们在其中放置了一个 msgbox 来测试它。

这是我们试图用来刷新数据网格的代码。它采用 2 个数据网格的形式：

```
Public Sub RefreshDataGrids()

    Me.ParentsTableAdapter.Fill(Me.DataSetParentsStudents.Parents)
    Me.StudentsTableAdapter.Fill(Me.DataSetParentsStudents.Students)
    LightGridParents.Refresh()
    LightGridStudents.Refresh()
End Sub 
```

您能否告诉我们刷新此数据需要哪些额外的编码，或者我们是否使用不正确的位置从详细信息表单中调用此代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T13:20:09.407

我找到了一种方法，希望它可以帮助其他人。

我从刷新数据网格的详细信息表单中删除了调用。

相反，当用户双击以获取详细信息表单时，我将表单称为对话窗口。我在调用对话框表单之后进行了编码以重新填充表格适配器，这就是诀窍。

这是编码：

```
' Control handlers - Grid handlers.
'----------------------------------
Private Sub LightGrid_MouseDoubleClick(ByVal sender As System.Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles LightGridParents.MouseDoubleClick

    If ParentsBindingSource.Count > 0 Then

        ' Call the parents form.
        '-----------------------
        objFormParents = New FormParents(IDTextBox.Text, "From Parents And Students")
        objFormParents.ShowDialog()

        ' Refresh the data grid.
        '-----------------------
        Me.ParentsTableAdapter.Fill(Me.DataSetParentsStudents.Parents)
    End If
End Sub

Private Sub LightGridStudents_MouseDoubleClick(sender As System.Object, e As System.Windows.Forms.MouseEventArgs) Handles LightGridStudents.MouseDoubleClick

    If StudentsBindingSource.Count > 0 Then

        ' Call the students form.
        '------------------------
        objFormStudents = New FormStudents(StudentsIDTextBox.Text, "From Parents And Students")
        objFormStudents.ShowDialog()

        ' Refresh the data grid.
        '-----------------------
        Me.StudentsTableAdapter.Fill(Me.DataSetParentsStudents.Students)
    End If
End Sub 
```

# android - 如何禁用 Android 视图上的任何事件？

> ID：10480560
> 
> 赞同：6
> 
> 时间：2012-05-07T10:35:17.660
> 
> 标签：android, android-layout, android-view

我的问题很简单：如何禁用 Android 视图上的任何事件？（包括删除它的可聚焦性，就像我只是希望它在视觉上存在但在其他所有东西上都不存在）它是否适用于整个视图树？（例如，如果我在根上禁用事件，所有事件都将为其子级禁用？）。

现在，在你说什么之前，我已经尝试了以下所有方法：

*   [设置启用](http://developer.android.com/reference/android/view/View.html#setEnabled%28boolean%29)
*   [设置焦点](http://developer.android.com/reference/android/view/View.html#setFocusable%28boolean%29)
*   [设置选定](http://developer.android.com/reference/android/view/View.html#setSelected%28boolean%29)
*   [设置可点击](http://developer.android.com/reference/android/view/View.html#setClickable%28boolean%29)
*   [设置激活](http://developer.android.com/reference/android/view/View.html#setActivated%28boolean%29)

这些方法似乎都不起作用，认真的。

我已经直接在 a`WebView`以及所有内容的父布局上尝试过它们，但我仍然能够与之交互。

任何的想法？

谢谢！

**编辑#1**

在需要禁用的视图之上添加视图的解决方案不起作用。其实点击内视图还是可以的，我试过一个简单的例子：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    >
    <LinearLayout 
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical"
        android:background="#ff0000">
        <Button
            android:id="@+id/button"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:text="Click Me!"
        />
    </LinearLayout>

    <FrameLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#00000000"
    />
</FrameLayout> 
```

在这里仍然可以点击`button`。

**编辑#2**

我想这样做的原因与我几周前提出的[以下问题有关。](https://stackoverflow.com/questions/10029447/how-to-cleanly-superpose-scrollableviews-in-android)

我所拥有的是一个`ListView`充当导航栏的导航栏，它位于`View`包含我的应用程序内容的下方。这个实现的问题是，当我尝试滚动`ListView`时，当它上面的图层中有一个可聚焦的视图时，它`ListView`不会滚动，而是顶部视图获得焦点（当有一个 `Webview`或一个`EditText`等）。

所以是的，正如其中一个答案所述，我可以`WebView`通过覆盖来禁用 a 上的任何点击事件，`setOnTouchListener`但视图仍然集中，我认为这就是我的导航栏仍然存在相同问题的原因。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T10:45:10.577

只需将视图放在视图之上。您可以通过设置 view.visibility =gone/visible 来关闭它。

```
<FrameLayout>
<WebView/>
<FrameLayout This view will be on top/>
</FrameLayout> 
```

编辑：刚刚偶然发现这个链接：[https](https://stackoverflow.com/a/3856199/969325) ://stackoverflow.com/a/3856199/969325 基本上禁用了webview的所有触摸事件。试过了吗？

编辑 2 重新编辑：尝试将列表视图下方的顶部视图的可见性设置为消失。

# wordpress - WP：找不到页面

> ID：10480561
> 
> 赞同：0
> 
> 时间：2012-05-07T10:35:25.253
> 
> 标签：wordpress

我正在使用 WP-3.3.2 并创建了一个网站[eyepractice](http://www.eyepractice.ca/optometris/guelph/?month=5&year=2012)，我的脚本从 url 获取月份和年份，然后显示该月份和年份的日历，但是当我与 Wp 集成时，它仅适用于 2012 年并且如果我使用[http:/ /www.eyepractice.ca/optometris/guelph/?month=1&year=2013](http://www.eyepractice.ca/optometris/guelph/?month=1&year=2013)它显示页面未找到但是我已经从 Wp 管理员创建了一个名为 guelph 的页面。我搜索了 2012 年的整个项目，但它没有硬编码。

![在此处输入图像描述](../Images/05d5815f1c454b8f2899c6221a439473.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-05T22:40:15.590

这是一个非常古老的问题，但我在寻找完全相同的问题的解决方案时遇到了它，所以我会在这里留下答案。我使用了基于此链接的日历创建脚本：http: [//davidwalsh.name/php-event-calendar](http://davidwalsh.name/php-event-calendar)

在 Wordpress 中，显然使用 'year' 和 'month' 作为 $_GET 变量与 Wordpress 内部查询变量处理冲突，因此日历仅适用于我的当年，并在下一年抛出了 'page not found' 错误。

解决方案很简单。正如@janw 建议的那样，更改参数名称。在脚本中 $_GET 变量被称为“月”或“年”的地方，将其更改为“cal_month”或“cal_year”之类的其他内容。奇迹般有效。

# html - 为什么 Google 使用无效的 HTML 属性？这是否意味着我也可以？

> ID：10480564
> 
> 赞同：2
> 
> 时间：2012-05-07T10:35:45.607
> 
> 标签：html, markup, custom-data-attribute

> **可能重复：**
> [什么是 xhtml 的角色属性？你用它来做什么？](https://stackoverflow.com/questions/1678238/what-is-xhtmls-role-attribute-what-do-you-use-it-for)

我注意到 Gmail 中的一个元素有一个名为“role”的属性，即`<div role="whatever">`. 从技术上讲，这是无效的。但我也知道大多数浏览器都可以毫无困难地理解它，jQuery（也许还有直接的 JS？）也是如此。就个人而言，我更喜欢在所有自定义属性前加上“data-”。

知道为什么谷歌会这样做吗？我能做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:43:31.863

role="" 是用于屏幕阅读器和辅助辅助功能的 ARIA 属性。阅读[http://www.accessibleculture.org/articles/2011/04/html5-aria-2011/](http://www.accessibleculture.org/articles/2011/04/html5-aria-2011/)了解更多信息。我建议人们开始在他们的网站上使用它们，以帮助那些以不同方式查看我们网站的人获得与“普通”用户相同的访问级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T14:29:44.327

角色属性实际上在 HTML5 中验证。在以前的 HTML（和 XHTML）版本中，它不会验证，但屏幕阅读器支持它，并且无论您的文档类型如何，浏览器都会忽略它。因此，可访问性倡导者鼓励人们使用它，尽管验证失败，因为它提供了可以帮助辅助技术用户的额外语义。哲学本质上是遵循规则（验证），但也知道什么时候可以打破规则（例如，如果这样做有助于一些用户而不伤害其他用户）。一个更好的解决方案是升级到 HTML5 - 这样您就可以使用 ARIA 标记**和**验证。

# php - MySQL“IN”子句中的逗号分隔值

> ID：10480568
> 
> 赞同：27
> 
> 时间：2012-05-07T10:35:49.057
> 
> 标签：php, mysql, sql

我的一个表中有一个列，其中存储了多个用逗号分隔的 id。有没有一种方法可以在查询的“IN”子句中使用该列的值。

column( `city`) 的值如下`6,7,8,16,21,2`

我需要用作

```
select * from table where e_ID in (Select city from locations where e_Id=?) 
```

我对 Crozin 的回答感到满意，但我愿意接受建议、观点和选择。

随时分享您的观点。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-20T00:49:57.607

在@Jeremy Smith 的 FIND_IN_SET() 示例的基础上，您可以使用连接来完成，因此您不必运行子查询。

```
SELECT * FROM table t
JOIN locations l ON FIND_IN_SET(t.e_ID, l.city) > 0
WHERE l.e_ID = ? 
```

众所周知，这执行得很差，因为它必须进行表扫描，为和中的*每个*行组合评估 FIND_IN_SET() 函数。它不能利用索引，也没有办法改进它。`table``locations`

我知道您说过您正在努力充分利用糟糕的数据库设计，但您必须了解这是多么糟糕。

解释：假设我要你在电话簿中查找第一个、中间或最后一个首字母是“J”的每个人。在这种情况下，书籍的排序顺序没有任何帮助，因为无论如何您都必须扫描每一页。

`LIKE`@fthiella 给出的解决方案在性能方面也有类似的问题。它不能被索引。

另请参阅我对[在数据库列中存储分隔列表真的那么糟糕吗？](https://stackoverflow.com/questions/3653462/is-storing-a-comma-separated-list-in-a-database-column-really-that-bad/3653574#3653574)对于这种存储非规范化数据的方式的其他缺陷。

如果您可以创建补充表来存储索引，则可以将位置映射到城市列表中的每个条目：

```
CREATE TABLE location2city (
 location INT,
 city INT,
 PRIMARY KEY (location, city)
); 
```

假设您有一个所有可能城市的查找表（不仅仅是 中提到的那些`table`），您可以承受一次生成映射的低效率：

```
INSERT INTO location2city (location, city)
  SELECT l.e_ID, c.e_ID FROM cities c JOIN locations l
  ON FIND_IN_SET(c.e_ID, l.city) > 0; 
```

现在您可以运行更有效的查询来查找您的条目`table`：

```
SELECT * FROM location2city l
JOIN table t ON t.e_ID = l.city
WHERE l.e_ID = ?; 
```

这可以利用索引。现在您只需要注意任何 INSERT/UPDATE/DELETE 中的行`locations`也会将相应的映射行插入`location2city`.

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-05-07T10:48:50.003

从 MySQL 的角度来看，您存储的不是多个用逗号分隔的 id - 您存储的是一个**文本**值，其含义与“Hello World”或“I like cakes！”完全相同。- 即它没有任何意义。

您需要做的是创建一个单独的表，它将数据库中的两个对象链接在一起。阅读有关基于 SQL 的数据库中[的多对多](https://www.google.com/search?sourceid=chrome&ie=UTF-8&q=%22What+you+have+to+do+is+to+create%22#hl=en&sclient=psy-ab&q=sql+many-to-many&oq=sql+many-to&aq=0&aqi=g1g-v3&aql=&gs_l=serp.3.0.0j0i15l3.101322.103578.0.104533.11.9.0.2.2.0.243.1515.0j6j3.9.0...0.0.6akpF40-5_U&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&fp=ecb6a798695883bc&biw=1600&bih=775)或[一对多](https://www.google.com/search?sourceid=chrome&ie=UTF-8&q=%22What+you+have+to+do+is+to+create%22#hl=en&sclient=psy-ab&q=sql+one-to-many&oq=sql+one-to-many&aq=f&aqi=g1g-v3&aql=&gs_l=serp.3..0j0i15l3.18638.18793.1.19074.3.3.0.0.0.2.255.604.0j2j1.3.0...0.0.MlkN60aXAUw&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&fp=ecb6a798695883bc&biw=1600&bih=775)（取决于您的要求）关系的更多信息。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-11-16T14:43:08.617

`IN`与其在您的查询中使用，不如使用`FIND_IN_SET`（[docs](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_find-in-set)）：

```
SELECT * FROM table 
WHERE 0 < FIND_IN_SET(e_ID, (
             SELECT city FROM locations WHERE e_ID=?)) 
```

关于第一种形式规范化的常见警告适用（数据库不应在单个列中存储多个值），但如果您坚持使用它，那么上述语句应该会有所帮助。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2012-11-18T22:58:23.813

这不使用 IN 子句，但它应该做你需要的：

```
Select *
from table
where
  CONCAT(',', (Select city from locations where e_Id=?), ',')
  LIKE
  CONCAT('%,', e_ID, ',%') 
```

但你必须确保它`e_ID`不包含任何逗号或任何快乐字符。

例如

```
CONCAT(',', '6,7,8,16,21,2', ',') returns ',6,7,8,16,21,2,'

e_ID=1  --> ',6,7,8,16,21,2,' LIKE '%,1,%'  ? FALSE
e_ID=6  --> ',6,7,8,16,21,2,' LIKE '%,6,%'  ? TRUE
e_ID=21 --> ',6,7,8,16,21,2,' LIKE '%,21,%' ? TRUE
e_ID=2  --> ',6,7,8,16,21,2,' LIKE '%,2,%'  ? TRUE
e_ID=3  --> ',6,7,8,16,21,2,' LIKE '%,3,%'  ? FALSE
etc. 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-11-23T07:01:18.117

不知道这是否是你想要完成的。使用 MySQL 具有连接组[GROUP_CONCAT中的值的功能](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_group-concat)

你可以尝试这样的事情：

```
select * from table where e_ID in (Select GROUP_CONCAT(city SEPARATOR ',') from locations where e_Id=?) 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-11-21T12:22:54.833

这个用于 oracle ..here 字符串连接由 wm_concat 完成

```
select * from table where e_ID in (Select wm_concat(city) from locations where e_Id=?) 
```

是的，我同意 raheel shan 的观点。为了将这个“in”子句放入，我们需要将该列放入代码下面的行中，以便完成这项工作。

```
select * from table  where to_char(e_ID) 
in (
  select substr(city,instr(city,',',1,rownum)+1,instr(city,',',1,rownum+1)-instr(city,',',1,rownum)-1) from 
  (
  select ','||WM_CONCAT(city)||',' city,length(WM_CONCAT(city))-length(replace(WM_CONCAT(city),','))+1 CNT from locations where e_Id=? ) TST 
  ,ALL_OBJECTS OBJ where TST.CNT>=rownum
    ) ; 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2012-11-22T13:42:06.483

你应该使用

**FIND_IN_SET**返回值在逗号分隔值字符串中的位置

```
mysql> SELECT FIND_IN_SET('b','a,b,c,d');
    -> 2 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2012-11-23T10:33:57.943

您需要“拆分”城市列值。它会像：

```
SELECT *
  FROM table
 WHERE e_ID IN (SELECT TO_NUMBER(
                                 SPLIT_STR(city /*string*/
                                           , ',' /*delimiter*/
                                           , 1 /*start_position*/
                                           )
                                 )
                  FROM locations); 
```

您可以在此处阅读有关 MySQL split_str 函数的更多信息：http: [//blog.fedecarg.com/2009/02/22/mysql-split-string-function/](http://blog.fedecarg.com/2009/02/22/mysql-split-string-function/)

另外，我在这里使用了 Oracle 的 TO_NUMBER 函数。请用适当的 MySQL 函数替换它。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2012-05-07T10:51:18.283

IN 采用行，因此以逗号分隔的列进行搜索不会满足您的要求，但如果您提供这样的数据（'1'，'2'，'3'），这将起作用，但您不能在您的字段中保存这样的数据无论您在列中插入什么，它都会将整个内容作为一个字符串。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-12-30T08:05:19.463

[您可以像这样](http://sqlfiddle.com/#!2/bda66/1)动态创建准备好的语句

```
set @sql = concat('select * from city where city_id in (',
                  (select cities from location where location_id = 3),
                  ')');
prepare in_stmt from @sql;
execute in_stmt;
deallocate prepare in_stmt; 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-03-04T13:45:33.230

参考：[在 MySQL](https://stackoverflow.com/a/60527102/7889523)[中使用逗号分隔的字符串`IN ()`](https://stackoverflow.com/a/60527102/7889523)

> 最近我遇到了同样的问题，这就是我解决它的方法。
> 
> 它对我有用，希望这就是你想要的。

```
select * from table_name t where (select (CONCAT(',',(Select city from locations l where l.e_Id=?),',')) as city_string) LIKE CONCAT('%,',t.e_ID,',%'); 
```

> **示例：** *它看起来像这样*

```
select * from table_name t where ',6,7,8,16,21,2,' LIKE '%,2,%'; 
```

# objective-c - NSMutableArray - 对自定义类进行排序

> ID：10480573
> 
> 赞同：-1
> 
> 时间：2012-05-07T10:36:17.660
> 
> 标签：objective-c, cocoa, nsmutablearray

> **可能重复：**
> [如何对包含自定义对象的 NSMutableArray 进行排序？](https://stackoverflow.com/questions/805547/how-to-sort-an-nsmutablearray-with-custom-objects-in-it)

我有一个自定义类，其中一个值是名称。想象一下这个类叫做Person。我想根据 name 变量对这些值进行排序，我将它们保存在 NSMutableArray 中，但是：

```
[testarray sortUsingSelector:@selector(compare:)]; 
```

仅适用于字符串数组。

鉴于以下情况，我正在尝试弄清楚如何按字母顺序排列数组：

```
Person *person;
person = [array objectAtIndex:0];
[person name];

Person *person;
person = [array objectAtIndex:1];
[person name]; 
```

我如何比较两者？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T10:43:55.037

```
NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"name" ascending:YES];
NSArray *sortDescriptors = [NSArray arrayWithObject:sortDescriptor];
NSArray *sortedArray = [array sortedArrayUsingDescriptors:sortDescriptors]; 
```

# java - 如何使用 javacomplete 完成用户定义的类方法

> ID：10480575
> 
> 赞同：5
> 
> 时间：2012-05-07T10:36:25.590
> 
> 标签：java, editor, vim

我在 Mac OS X 10.7 下工作。我在 Pathogen 的帮助下得到了*javacomplete*，*但*它只**完成**了 JDK 类，而不是我创建的类。当尝试全方位完成我的一个对象时，我得到“找不到模式”。这真的仅限于 JDK 类吗？如果没有，任何人都可以描述他们的配置。

 ***顺便说一句，我尝试过创建*ctags*，但它也不适用于 javacomplete。但是，*ctrl-x ctrl-]*与创建的 ctags 一起工作得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:03:57.303

您需要为源设置类路径。

从 javacomplete 文档：

```
3\. Set classpath using the following function: >
    javacomplete#AddClassPath('jarfile_or_classes_path')
    javacomplete#DelClassPath('jarfile_or_classes_path')
    javacomplete#SetClassPath('semicolon_separated_string')

    Another two variables will be used if they are existing:
        |g:java_classpath|  global classpath
        |b:classpath|       associated with current buffer 
```

我已将以下内容添加到我的*.vimrc*以自动完成 android 项目：

```
if filereadable('AndroidManifest.xml')
    call javacomplete#SetClassPath('/home/tidbeck/android/sdk/android-sdk-linux_x86/platforms/android-17/android.jar:libs/android-support-v4.jar:bin/classes')
    call javacomplete#SetSourcePath('src')
endif 
```

我注意到两件事：

*   `javacomplete#AddClassPath``jar`即使文档这么说也不支持文件
*   我必须删除我的标签文件才能完成工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-12T21:21:45.457

安装 vim 插件后，您必须将这些行添加到`.vimrc`：

```
" Only do this part when compiled with support for autocommands.
if has("autocmd")
  autocmd Filetype java setlocal omnifunc=javacomplete#Complete
endif 
```

我也无法让它与现有的标签文件（由创建`ctags`）一起工作。如前所述，一种解决方法是取消设置`tags`里面的 vim 选项`.vimrc`。但这对我来说不是一个选择。我只是操纵`javacomplete.vim`“忽略”标签文件。

补丁如下：

```
--- 自动加载/javacomplete.vim 2011-01-30 21:33:46.000000000 +0100
+++ /home/kndl/.vim/autoload/javacomplete.vim 2015-02-12 20:46:48.227465321 +0100
@@ -2510,7 +2510,8 @@
 呸！s:GetClassInfoFromSource（类，文件名）
   让 ci = {}
   如果 len(tagfiles()) > 0
- 让 ci = s:DoGetClassInfoFromTags(a:class)
+ " kndl: 停用 ctags 功能，因为这不起作用。看来我无法构建可接受的标签文件。
+ "让 ci = s:DoGetClassInfoFromTags(a:class)
   万一

   如果为空（ci）

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T13:00:29.737

我使用了 javacomplete 插件和 supertab，我发现启用方法完成的最简单方法是使用另一个名为[easytags.vim](https://github.com/xolox/vim-easytags)的插件，它会在您编译类时自动创建标签。从内存中它确实提供了用户定义的类和方法完成。***

# assembly - 自定义键盘中断处理程序

> ID：10480576
> 
> 赞同：4
> 
> 时间：2012-05-07T10:36:27.870
> 
> 标签：assembly, dos, masm, x86-16, interrupt-handling

我正在尝试编写一个简单的程序，它将标准键盘中断替换为自定义键盘中断，该程序将减少一个变量。但是，如果不调用旧处理程序，它将无法工作。这是我的中断处理程序：

```
handler proc
  push ax
  push di
  dec EF
  ;pushf      ;when these to instructions commented keyboard interrupts handling hangs
  ;call [OLD]
  mov al,20h
  out 20h,al
  pop di
  pop ax
  iret
handler endp 
```

我还应该在我的处理程序中执行哪些操作以使其在不调用旧处理程序的情况下工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:06:32.937

1.  您需要将 DS 保存在堆栈上并将其设置为适合您的程序的值，然后在`iret`.

2.  这部分：

    ```
    mov al,20h
    out 20h,al 
    ```

    确认中断。如果您调用 BIOS 中断处理程序，那么您也不应该这样做，因为 BIOS 处理程序会这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-16T18:13:56.357

在从键盘缓冲区读取当前数据之前，您将不会从键盘接收任何进一步的数据。在将 EOI 发送给 PIC 之前，请使用

```
in al,60h 
```

读取当前等待处理的扫描码。调用旧中断处理程序的原因是因为它确实从键盘读取等待的数据。

正如 Michael Slade 所指出的，您需要关注标签`EF`和`OLD`相对于*DS*寄存器的访问这一事实。到达中断处理程序时，不能依赖*DS*中的值。唯一保证可用的段寄存器是*CS*，因为它是根据中断向量表 (IVT) 中中断向量的段值设置的。如果您设计其余代码以使变量`EF`和`OLD`与中断处理程序位于同一段中，那么您可以通过以下方式覆盖内存操作数上的段：

```
dec cs:[EF]
pushf
call cs:[OLD] 
```

# macos - .rvmrc 在打开新标签时不会自动切换（ lion os x ）

> ID：10480577
> 
> 赞同：0
> 
> 时间：2012-05-07T10:36:28.063
> 
> 标签：macos, terminal, rvm

使用 Mac OS X Lion，当我在终端中创建一个新选项卡，并且我与 .rvmrc 文件位于同一目录中时，新选项卡自动位于同一目录，并且 .rvmrc 自动切换我的 Ruby。

但是，在我更改了我的 RVM（降级到 1.6）之后，当我打开一个新选项卡时，它不会自动加载这个 .rvmrc 文件。

创建新的终端选项卡时，如何使其自动更改我的红宝石？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:22:03.693

RVM 不支持旧版本，原因是 - 它已经修复并且在新版本中按预期工作。

您应该更新到新的 RVM，它将按预期工作。

如果您在更新 RVM 时遇到问题，请尝试以下操作：

```
curl -L get.rvm.io | bash -s stable --auto 
```

并打开新的终端窗口。

# struts - struts项目中Action类测试用例的文件夹结构，找不到/WEB-INF/web.xml，为什么？

> ID：10480578
> 
> 赞同：0
> 
> 时间：2012-05-07T10:36:29.857
> 
> 标签：struts, directory, structure, testcase

我正在使用 struts1.3.8、AJAX 和 spring jdbc。我根据要求开发了代码。现在我必须测试开发的代码。我必须在哪里编写测试用例以及测试 Struts Action 类的文件夹结构是什么。我应该在项目中使用 web.xml 和 struts-config.xml 吗？我使用了相同的方法，但找不到 web.xml。
Struts 测试用例必须与项目一起使用，或者对于测试用例我必须创建一个新项目？？？？
一些带有测试用例的示例文件结构可能会很有帮助。
提前致谢。
拉克斯曼杂烩

# android - tablelayout 在滚动视图中给出错误

> ID：10480583
> 
> 赞同：1
> 
> 时间：2012-05-07T10:36:51.643
> 
> 标签：android

我正在尝试在滚动视图中创建表格布局，但它给了我错误我在屏幕上有多个表格布局，我在这里使用 imageview 动态填充我把我的 logcat 错误

```
Logcat error

05-07 15:36:33.193: E/AndroidRuntime(681): java.lang.ClassCastException: android.widget.TableLayout$LayoutParams 
```

主要的.xml

```
 <?xml version="1.0" encoding="utf-8"?>

 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >
       <ScrollView 
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
        >
     <TableLayout  android:layout_height="wrap_content"
                  android:layout_width="wrap_content"
                  android:id="@+id/itable">
        <TableRow
                 android:id="@+id/trstate"
                 android:layout_height="wrap_content"
                  android:layout_width="wrap_content"
         >
        <TextView
        android:id="@+id/tstate"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="NewYork"
        android:textAppearance="?android:attr/textAppearanceLarge" />
          </TableRow>
        <TableRow
                 android:id="@+id/trimage"
                 android:layout_height="wrap_content"
                  android:layout_width="wrap_content"
                >
        <ImageView  
                 android:id="@+id/iimage"
         android:layout_width="wrap_content"
            android:layout_height="wrap_content"
                         />

        </TableRow>

    </TableLayout>

       </ScrollView>

</LinearLayout> 
```

表活动.java

```
 package com.table.image;

     import java.io.BufferedInputStream;
     import java.io.InputStream;
     import java.net.URL;
     import java.net.URLConnection;
     import android.app.Activity;
     import android.content.Context;
     import android.graphics.Bitmap;
     import android.graphics.BitmapFactory;
       import android.os.Bundle;
    import android.util.Log;
    import android.view.Gravity;
     import android.widget.ImageView;
     import android.view.ViewGroup;
    import android.widget.TableLayout;
   import android.widget.TableLayout.LayoutParams;
   import android.widget.TableRow;
import android.widget.TextView;

public class TableLayoutActivity extends Activity {
    /** Called when the activity is first created. */

    public TableLayout itable;
    public TableRow trimage;
    public TableRow trstate;
    public ImageView iimage;
    public TextView tstate;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        itable = (TableLayout)findViewById(R.id.itable);
        itable.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                LayoutParams.WRAP_CONTENT));

        for (int i = 0; i < 3; i++) {

            trstate = new TableRow(this);
            trstate.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                    LayoutParams.WRAP_CONTENT));

            tstate = new TextView(this);
            tstate.setLayoutParams(new TableRow.LayoutParams(50,50));
            tstate.setText("NewYork");
            trstate.addView(tstate);

            trimage = new TableRow(this);
            trimage.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                    LayoutParams.WRAP_CONTENT));
            for (int j = 0; j < 3; j++)
            {   
                Log.i("Test",Integer.toString(i) + "-" + Integer.toString(j));
                iimage = new ImageView(this);
                iimage.setPadding(8,8,8,8);
                iimage.setLayoutParams(new TableRow.LayoutParams(100,100));
                iimage.setImageResource(R.drawable.abc);
                trimage.addView(iimage);
             }            
            itable.addView(trimage);
            itable.addView(trstate);

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T10:48:42.073

您正在创建不正确的`TableLayout`内部。`LinearLayout`制作`ScrollView`为根布局。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical">

<LinearLayout
android:id="@+id/linearLayout1"
android:layout_width="fill_parent"
android:layout_height="wrap_content" 
android:gravity="center">

<AutoCompleteTextView
android:id="@+id/autoCompleteTextView1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_weight="1"
android:ems="10"
android:text="AutoCompleteTextView" >

<requestFocus />

</AutoCompleteTextView>

</LinearLayout>

<ScrollView 
android:id="@+id/scrollview1"
android:layout_width="fill_parent" 
android:layout_height="fill_parent"
android:orientation="vertical" android:layout_marginTop="10dip">

<TableLayout  android:layout_height="wrap_content"
          android:layout_width="wrap_content"
          android:id="@+id/itable">
<TableRow
         android:id="@+id/trstate"
         android:layout_height="wrap_content"
          android:layout_width="wrap_content">

 </TableRow>
 <TableRow
         android:id="@+id/trimage"
         android:layout_height="wrap_content"
          android:layout_width="wrap_content"
        >
<ImageView  
         android:id="@+id/iimage"
 android:layout_width="wrap_content"
    android:layout_height="wrap_content"
                 />

<TextView
    android:id="@+id/tstate"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="NewYork"
    android:textAppearance="?android:attr/textAppearanceLarge" />

</TableRow>

</TableLayout>

</ScrollView>

</LinearLayout> 
```

编辑：

```
 public class SampleAndroidActivity extends Activity {
/** Called when the activity is first created. */

public TableLayout itable;
public TableRow trimage;
public TableRow trstate;
public ImageView iimage;
public TextView tstate;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    itable = (TableLayout) findViewById(R.id.itable);
    /*Remove this line 
     * itable.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
     * LayoutParams.WRAP_CONTENT));
     */

    for (int i = 0; i < 3; i++) {

        trstate = new TableRow(this);
        trstate.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                LayoutParams.WRAP_CONTENT));

        tstate = new TextView(this);
        tstate.setLayoutParams(new LayoutParams(50, 50));
        tstate.setText("NewYork");
        trstate.addView(tstate);

        trimage = new TableRow(this);
        trimage.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                LayoutParams.WRAP_CONTENT));
        for (int j = 0; j < 3; j++) {
            Log.i("Test", Integer.toString(i) + "-" + Integer.toString(j));
            iimage = new ImageView(this);
            iimage.setPadding(8, 8, 8, 8);
            iimage.setLayoutParams(new LayoutParams(100, 100));
            iimage.setImageResource(R.drawable.events);
            trimage.addView(iimage);
        }
        itable.addView(trimage);
        itable.addView(trstate);

    }

}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T10:52:17.457

更改您的 .xml 文件代码。把标签放在它意味着的标签外面，

```
<ScrollView 
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
        >
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

 <TableLayout  android:layout_height="wrap_content"
                  android:layout_width="wrap_content"
                  android:id="@+id/itable">
        <TableRow
                 android:id="@+id/trstate"
                 android:layout_height="wrap_content"
                  android:layout_width="wrap_content"
         >
        <TextView
        android:id="@+id/tstate"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="NewYork"
        android:textAppearance="?android:attr/textAppearanceLarge" />
          </TableRow>
        <TableRow
                 android:id="@+id/trimage"
                 android:layout_height="wrap_content"
                  android:layout_width="wrap_content"
                >
        <ImageView  
                 android:id="@+id/iimage"
         android:layout_width="wrap_content"
            android:layout_height="wrap_content"
                         />

        </TableRow>

    </TableLayout>

</LinearLayout>

 </ScrollView> 
```

可能会解决您的问题。

# jquery - 为使用 $.plugin() 而不是 $(selector).plugin() 准备插件

> ID：10480587
> 
> 赞同：3
> 
> 时间：2012-05-07T10:36:59.950
> 
> 标签：jquery

简单地：

```
(function($){
    $.fn.plugin = function()
    {
        // results in error
        // when called like
        // $.plugin();
    }
})(jQuery); 
```

错误是（从 Chrome 控制台复制）：

```
Uncaught TypeError: Object function ( selector, context ) {
        // The jQuery object is actually just the init constructor 'enhanced'
        return new jQuery.fn.init( selector, context, rootjQuery );
    } has no method 'plugin' 
```

为了使我的插件在没有元素选择的情况下工作，我必须遵循哪些规则？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T10:47:58.597

只需将函数直接分配给`$.plugin`：

```
(function($){
    $.plugin = function()
    {
        // ...
    }
})(jQuery); 
```

当然`this`不会再引用选定的元素，而是引用`jQuery`自身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:52:52.427

问题是您已经宣布了一个插件，作为对象 $.fn 的方法，并试图以对象 jQuery 的方法访问插件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T15:40:47.237

保持 jQuery 的约定，并喜欢以这种方式使用它：

```
$(this).plugin() 
```

# facebook - Facebook 演示文稿

> ID：10480588
> 
> 赞同：-2
> 
> 时间：2012-05-07T10:37:04.487
> 
> 标签：facebook

我在哪里可以找到 facebook 关于他们的技术和架构的所有演示文稿？对 facebook 一些令人印象深刻的演示的任何建议，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:08:13.833

其中大部分都发布到[Facebook 工程](http://www.facebook.com/Engineering)博客。特别是[工程视频](http://www.facebook.com/Engineering/videos)页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:29:19.620

在这里，您可以找到所有指标和技术细节，它们是如何实现的。[http://highscalability.com/blog/category/facebook](http://highscalability.com/blog/category/facebook)

# mercurial - 在克隆公共源存储库时在 Windows 中设置可汗学院开发环境时出现问题

> ID：10480592
> 
> 赞同：1
> 
> 时间：2012-05-07T10:37:40.137
> 
> 标签：mercurial, repository, clone, development-environment, kiln

我使用 TortoiseHG 源代码控制工具从[https://khanacademy.kilnhg.com/Code/Website/Group/stable](https://khanacademy.kilnhg.com/Code/Website/Group/stable)使用以下命令 克隆了可汗学院[网站](http://khanacademy.org)的公共存储库 但是我得到一个错误“流意外结束”在中间的克隆过程。`hg clone https://khanacademy.kilnhg.com/Code/Website/Group/stable`

这是我的问题。由于此源存储库无法正常工作，如何在我的本地计算机 win7（我已安装 Python、Google 应用程序引擎、gdata python 客户端和所需的所有基础设施）中获得准确的可汗学院网站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T11:00:21.753

注意这篇文章提到了这个克隆地址：

```
hg clone https://khanacademy.kilnhg.com/Repo/Website/Group/stable
# instead of:
#  clone https://khanacademy.kilnhg.com/Code/Website/Group/stable 
```

这与您使用的不同。[你会在这个函数](https://khanacademy.kilnhg.com/Code/Website/Group/stable/File/offline/setup.py?rev=tip#71)
中找到一个类似的地址[`setup.py` `get_khanacademy_code()`](https://khanacademy.kilnhg.com/Code/Website/Group/stable/File/offline/setup.py?rev=tip#71)

* * *

[就您而言，我更希望5 月 6 日 FogBugz 按需升级和网络维护](http://status.fogcreek.com/2012/05/fogbugz-on-demand-upgrade-and-network-maintenance-sunday-may-6-0200-utc.html)会出现某种问题。

# android - Android：无法在 JNI 实现中打开设备文件

> ID：10480594
> 
> 赞同：1
> 
> 时间：2012-05-07T10:37:55.727
> 
> 标签：android, c++, android-ndk, java-native-interface, android-framework

我采用了 Code Aurora 的 FM Radio 代码并与我的 Android Gingerbread 代码库合并。

FM 应用程序框架尝试使用 JNI 访问 fm 无线电设备 ( /dev/radio )，该 JNI 在名为 android_hardware_fm.cpp 的文件中实现。该文件中有一个函数尝试在读/写模式下使用 open() 获取设备节点的文件描述符。但是，调用失败并出现错误代码 -13 : Permission denied。

我还制作了一个小的 C 可执行文件，它试图打开 /dev/radio 文件（在 RDWR 模式下），打印它的 fd 并关闭它。它从目标系统中的 /system/bin 运行并显示有效的 fd。

顺便说一句，JNI 实现是 android 核心库的一部分。它位于 frameworks/base/core/jni 并作为 libandroid_runtime.so 的一部分编译

有什么想法/解决方案吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T04:44:06.160

显然，您无权从用户空间打开设备。在第二种情况下，当您从终端运行可执行文件时，您可能拥有权限，因为您`su`在运行可执行文件之前已经完成。

对于您的问题，可以做两件事。

**1）**从终端更改节点的权限。

**涉及的步骤：**

*   打开终端 ( `adb shell`)

*   做`su`（为了做到这一点，您的设备必须植根）

*   `chmod 777 /dev/radio`在终端做

完成此操作后，您的无线电节点将拥有适当的权限供用户读写。所以你现在可以`open()`打电话了，它会起作用的。

**2）**您可以通过调用以下函数以编程方式实现此目的（假设您的设备已植根并且 su 正在您的设备上运行） - `changePerm()`。这是我编写的一个小函数，它将更改设备节点的权限，或者更确切地说是任何没有用户访问权限的系统文件。获得权限后，您可以从用户空间打开它。open() 调用将在此之后正常工作。

```
void changePerm()
{
    Process chperm;
    try {
        chperm=Runtime.getRuntime().exec("su");

   DataOutputStream os = 
          new DataOutputStream(chperm.getOutputStream());
        os.writeBytes("chmod 777 /dev/radio\n");
        os.flush();

        os.writeBytes("exit\n");
        os.flush();

          chperm.waitFor();

} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (InterruptedException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
} 
```

我已经对其他节点进行了测试。所以它也应该适用于广播。如果您遇到任何困难，请告诉我。谢谢

# android - AsyncTask 在 Android 中的工作原理

> ID：10480599
> 
> 赞同：19
> 
> 时间：2012-05-07T10:38:24.987
> 
> 标签：android, android-asynctask

我想知道 AsyncTask 在内部是如何工作的。

我知道它使用[Java Executor](http://docs.oracle.com/javase/tutorial/essential/concurrency/executors.html)来执行操作，但仍然有一些我不理解的问题。像：

1.  Android 应用程序一次可以启动多少个 AsyncTask？
2.  当我启动 10 个 AsyncTask 时，所有任务会同时运行还是一个接一个？

我曾尝试使用 75000 AsyncTask 进行测试。我没有遇到任何问题，似乎所有任务都将被推送到堆栈并一个接一个地运行。

此外，当我启动 100000 个 AsyncTasks 时，我开始收到 OutOfMemoryError。

那么一次可以运行的 AsyncTask 是否有任何限制？

注意：我已经在 SDK 4.0 上测试过这些

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-07T11:04:25.970

`AsyncTask`有一个相当长的故事。

当它首次出现在 Cupcake (1.5) 中时，它使用一个附加线程（一个接一个）处理后台操作。在 Donut (1.6) 中进行了更改，因此开始使用线程池。并且可以同时处理操作，直到池用完为止。在这种情况下，操作被排队。

由于 Honeycomb 默认行为切换回使用单个工作线程（一个接一个处理）。但是引入了新方法（[executeOnExecutor](http://developer.android.com/reference/android/os/AsyncTask.html#executeOnExecutor%28java.util.concurrent.Executor,%20Params...%29)），以便您可以根据需要运行同时执行的任务（有两个不同的标准执行程序：`SERIAL_EXECUTOR`和`THREAD_POOL_EXECUTOR`）。

任务入队的方式还取决于您使用的执行器。在并行的情况下，您的限制为 10 ( `new LinkedBlockingQueue<Runnable>(10)`)。如果是连载，则不受限制（`new ArrayDeque<Runnable>()`）。

因此，处理任务的方式取决于您运行它们的方式以及运行它们的 SDK 版本。至于线程限制，我们没有任何保证，但是查看 ICS 源代码我们可以说池中的线程数可以在 range 范围内变化`5..128`。

当您使用默认`execute`方法启动 100000 时，将使用串行执行程序。由于无法立即处理`OutOfMemoryError`的任务被排入队列（数千个任务被添加到数组支持的队列中）。

您可以一次启动的确切任务数量取决于您正在运行的设备的内存类别，以及您使用的执行程序。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-12-04T01:14:22.910

让我们深入了解 Android 的 Asynctask.java 文件，从设计者的角度来理解它，以及它是如何在其中很好地实现 Half Sync-Half Async 设计模式的。

在类的开头几行代码如下：

```
 private static final ThreadFactory sThreadFactory = new ThreadFactory() {
        private final AtomicInteger mCount = new AtomicInteger(1);

        public Thread newThread(Runnable r) {
            return new Thread(r, "AsyncTask #" + mCount.getAndIncrement());
        }
    };

 private static final BlockingQueue<Runnable> sPoolWorkQueue =
            new LinkedBlockingQueue<Runnable>(10);

    /**
    * An {@link Executor} that can be used to execute tasks in parallel.
    */
    public static final Executor THREAD_POOL_EXECUTOR
            = new ThreadPoolExecutor(CORE_POOL_SIZE, MAXIMUM_POOL_SIZE, KEEP_ALIVE,
                    TimeUnit.SECONDS, sPoolWorkQueue, sThreadFactory); 
```

第一个是负责创建工作线程的 ThreadFactory。这个类的成员变量是到目前为止创建的线程数。在它创建一个工作线程的那一刻，这个数字会增加 1。

接下来是BlockingQueue。正如您从 Java 阻塞队列文档中知道的那样，它实际上提供了一个线程安全的同步队列，实现了 FIFO 逻辑。

接下来是一个线程池执行器，它负责创建一个工作线程池，可以在需要时执行不同的任务。

如果我们查看前几行，我们会知道 Android 将最大线程数限制为 128（从 private static final int MAXIMUM_POOL_SIZE = 128 可以看出）。

现在下一个重要的类是 SerialExecutor，它的定义如下：

```
private static class SerialExecutor implements Executor {
       final ArrayDeque<Runnable> mTasks = new ArrayDeque<Runnable>();
       Runnable mActive;

       public synchronized void execute(final Runnable r) {
           mTasks.offer(new Runnable() {
               public void run() {
                   try {
                       r.run();
                   } finally {
                       scheduleNext();
                   }
               }
           });
           if (mActive == null) {
               scheduleNext();
           }
       }

       protected synchronized void scheduleNext() {
           if ((mActive = mTasks.poll()) != null) {
               THREAD_POOL_EXECUTOR.execute(mActive);
           }
       }
   } 
```

Asynctask 中接下来重要的两个函数是

```
public final AsyncTask<Params, Progress, Result> execute(Params... params) {
        return executeOnExecutor(sDefaultExecutor, params);
    } 
```

和

```
public final AsyncTask<Params, Progress, Result> executeOnExecutor(Executor exec,
            Params... params) {
        if (mStatus != Status.PENDING) {
            switch (mStatus) {
                case RUNNING:
                    throw new IllegalStateException("Cannot execute task:"
                            + " the task is already running.");
                case FINISHED:
                    throw new IllegalStateException("Cannot execute task:"
                            + " the task has already been executed "
                            + "(a task can be executed only once)");
            }
        }

        mStatus = Status.RUNNING;

        onPreExecute();

        mWorker.mParams = params;
        exec.execute(mFuture);

        return this;
    } 
```

从上面的代码可以清楚地看出，我们可以从 Asynctask 的 exec 函数中调用 executeOnExecutor ，在这种情况下，它需要一个默认的执行器。如果我们深入 Asynctask 的源代码，我们会发现这个默认的执行器只不过是一个串行执行器，其代码已在上面给出。

现在让我们深入研究 SerialExecutor 类。在这堂课中，我们有final`ArrayDeque<Runnable> mTasks = new ArrayDeque<Runnable>();.`

这实际上作为不同线程上不同请求的序列化程序。这是一个半同步半异步模式的例子。

现在让我们看看串行执行器是如何做到这一点的。请看一下 SerialExecutor 的代码部分，它写成

```
 if (mActive == null) {
                scheduleNext();
            } 
```

因此，当第一次在 Asynctask 上调用 execute 时，这段代码在主线程上执行（因为 mActive 将被初始化为 NULL），因此它会将我们带到 scheduleNext() 函数。ScheduleNext() 函数编写如下：

```
protected synchronized void scheduleNext() {
            if ((mActive = mTasks.poll()) != null) {
                THREAD_POOL_EXECUTOR.execute(mActive);
            }
        } 
```

因此，在 schedulenext() 函数中，我们使用已在 dequeue 末尾插入的 Runnable 对象初始化 mActive。这个 Runnable 对象（它只是 mActive）然后在从线程池中取出的线程上执行。在那个线程中，“finally”块被执行。

现在有两种情况。

1.  另一个 Asynctask 实例已创建，我们在执行第一个任务时调用它的 execute 方法。

2.  在执行第一个任务时，在 Asynctask 的同一实例上第二次调用 execute 方法。

场景一：如果我们看一下Serial Executor的execute函数，我们会发现实际上我们新建了一个可运行线程（Say thread t）来处理后台任务。看下面的代码片段——

```
 public synchronized void execute(final Runnable r) {
           mTasks.offer(new Runnable() {
               public void run() {
                   try {
                       r.run();
                   } finally {
                       scheduleNext();
                   }
               }
           }); 
```

从该行可以清楚地看出`mTasks.offer(new Runnable)`，每次调用 execute 函数都会创建一个新的工作线程。现在，您可能能够找出 Half Sync - Half Async 模式与 SerialExecutor 的功能之间的相似之处。不过，让我澄清一下这些疑问。就像 Half Sync - Half Async 模式的异步层一样，

```
mTasks.offer(new Runnable() {
....
} 
```

部分代码在调用执行函数时创建一个新线程并将其推送到队列（mTasks）。它是绝对异步完成的，因为它在将任务插入队列的那一刻，函数返回。然后后台线程以同步方式执行任务。所以它类似于半同步 - 半异步模式。对？

然后在那个线程 t 中，我们运行 mActive 的 run 函数。但是由于它在 try 块中，finally 只会在该线程中的后台任务完成后才会执行。（记住 try 和 finally 都发生在 t 的上下文中）。在 finally 块中，当我们调用 scheduleNext 函数时，mActive 变为 NULL，因为我们已经清空了队列。但是，如果创建了同一个 Asynctask 的另一个实例并且我们在它们上调用 execute，这些 Asynctask 的执行函数不会被执行，因为执行前的同步关键字，也因为 SERIAL_EXECUTOR 是一个静态实例（因此同一个类的所有对象将共享同一个实例......这是一个类级锁定的例子）我的意思是同一个 Async 类的任何实例都不能抢占在线程 t 中运行的后台任务。即使线程被某些事件中断，再次调用 scheduleNext() 函数的 finally 块也会处理它。这一切都意味着只有一个活动线程运行任务。对于不同的任务，这个线程可能不一样，但一次只有一个线程会执行该任务。因此，只有在第一个任务完成时，后面的任务才会一个接一个地执行。这就是为什么它被称为 SerialExecutor。即使线程被某些事件中断，再次调用 scheduleNext() 函数的 finally 块也会处理它。这一切都意味着只有一个活动线程运行任务。对于不同的任务，这个线程可能不一样，但一次只有一个线程会执行该任务。因此，只有在第一个任务完成时，后面的任务才会一个接一个地执行。这就是为什么它被称为 SerialExecutor。即使线程被某些事件中断，再次调用 scheduleNext() 函数的 finally 块也会处理它。这一切都意味着只有一个活动线程运行任务。对于不同的任务，这个线程可能不一样，但一次只有一个线程会执行该任务。因此，只有在第一个任务完成时，后面的任务才会一个接一个地执行。这就是为什么它被称为 SerialExecutor。

场景二：在这种情况下，我们会得到一个异常错误。要了解为什么不能在同一个 Asynctask 对象上多次调用执行函数，请查看以下代码片段，该代码片段取自 Asynctask.java 的 executorOnExecute 函数，尤其是在下面提到的部分：

```
 if (mStatus != Status.PENDING) {
            switch (mStatus) {
                case RUNNING:
                    throw new IllegalStateException("Cannot execute task:"
                            + " the task is already running.");
                case FINISHED:
                    throw new IllegalStateException("Cannot execute task:"
                            + " the task has already been executed "
                            + "(a task can be executed only once)");
            }
        } 
```

从上面的代码片段可以清楚地看出，如果我们在任务处于运行状态时调用执行函数两次，它会抛出 IllegalStateException 说“无法执行任务：任务已经在运行。”。

如果我们想要并行执行多个任务，我们需要调用 execOnExecutor 传递 Asynctask.THREAD_POOL_EXECUTOR （或者可能是用户定义的 THREAD_POOL 作为 exec 参数。

你可以在这里阅读我关于 Asynctask 内部的讨论[。](https://docs.google.com/document/d/1_zihWXAwgTAdJc013-bOLUHPMrjeUBZnDuPkzMxEEj0/edit?usp=sharing)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-07T11:12:01.400

AsyncTasks 内部有一个固定大小的队列，用于存储延迟任务。队列大小默认为 10。例如，如果您连续启动 15 个任务，则前 5 个将进入它们的`doInBackground()`，但其余的将在队列中等待空闲工作线程。随着前 5 个任务之一完成，从而释放工作线程，队列中的任务将开始执行。在这种情况下，最多 5 个任务将一起运行。

是的，一次可以运行多少个任务是有限制的。所以 AsyncTask 使用线程池执行器，工作线程的最大数量有限，延迟任务队列使用固定大小 10。工作线程的最大数量为 128。如果您尝试执行超过 138 个自定义任务，您的应用程序将抛出[RejectedExecutionException](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/RejectedExecutionException.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T11:04:34.913

1.  Android 应用程序一次可以启动多少个 AsyncTask？

    `AsyncTask`由`LinkedBlockingQueue`容量为 10（在 ICS 和姜饼中）的 a 支持。因此，这实际上取决于您尝试开始多少任务以及完成它们需要多长时间 - 但绝对有可能耗尽队列的容量。

2.  当我启动 10 个 AsyncTask 时，所有任务会同时运行还是一个接一个？

    同样，这取决于平台。姜饼和 ICS 中的最大池大小为 128 - 但 *默认行为* 在 2.3 和 4.0 之间更改 - 从默认情况下的并行到串行。如果你想在 ICS 上并行执行，你需要调用 [executeOnExecutor][1] 连同`THREAD_POOL_EXECUTOR`

尝试切换到并行执行器并使用 75 000 个任务向其发送垃圾邮件 - 串行 impl。有一个`ArrayDeque`没有容量上限的内部（OutOfMemoryExceptions ofc 除外）。

# php - 在我的 vps 上将 mysql 5.1 升级到 5.5 是否安全？

> ID：10480601
> 
> 赞同：0
> 
> 时间：2012-05-07T10:38:27.763
> 
> 标签：php, mysql

我有一个带有 CPANEL-whm 的虚拟服务器，我看到了将 mysql 升级到 5.5 的可能性，它安全吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T10:39:56.320

没有人能向你保证这一点。

如果有人说它是安全的——不要相信他们

PS：经验法则：它有效 - 不要触摸它

没有特定原因的升级（即修复了您的软件受影响的一些错误）永远不会带来好的结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:05:49.207

查看迁移指南：

[http://dev.mysql.com/doc/refman/5.5/en/upgrading-from-previous-series.html](http://dev.mysql.com/doc/refman/5.5/en/upgrading-from-previous-series.html)

没有太多巨大的差异，主要是 InnoDB 插件在内部是如何工作的，以及一些编码的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T10:40:28.160

这取决于：您是否使用了一些不可用和/或在两个版本之间更新的功能？等等

最好的了解方法：在另一台服务器上尝试，测试应用程序，如果一切正常，然后在您的实时生产服务器上进行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T13:15:54.640

测试一下。在您自己的机器或一些不重要的机器上安装 mysql 5.1，然后升级到 mysql 5.5。然后运行您可能拥有的任何测试。在 VPS 上，您通常可以自由支配已安装和未安装的内容，因此您应该能够安装在测试中发现的任何内容。

如果您没有任何测试，请熟悉升级中所做的更改，并确定这些更改是否会立即产生影响。

永远不要只是升级，因为。

# c# - 如何解决这个编译错误？

> ID：10480605
> 
> 赞同：-10
> 
> 时间：2012-05-07T10:38:51.503
> 
> 标签：c#, sqlcommand

我收到此编译错误消息。我该如何解决？

> 错误 28“WindowsFormsApplication1.SqlCommand”不包含“Parameters”的定义，并且找不到接受“WindowsFormsApplication1.SqlCommand”类型的第一个参数的扩展方法“Parameters”（您是否缺少 using 指令或程序集引用？） C:\Users\cofex\Desktop\Gestion de salair - pompier - ARAB - 复制 - Copy\Gestion de salair - pompier - ARAB - 复制 - Copy\WindowsFormsApplication1\Classes\employeurclass.cs 152 26 WindowsFormsApplication1

在此代码上：

```
SqlCommand command = new SqlCommand (query, _connection); // Form1.connection.Open(); 
command.Parameters.AddWithValue("@N_Securite_Social", N_Securite_Social);
command.Parameters.AddWithValue("@N_CCP", N_CCP); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T10:41:04.113

添加

```
using System.Data;
using System.Data.SqlClient; 
```

命名空间到您的文件

# web - 如果一个页面没有链接到主网站，搜索引擎可以找到它吗？

> ID：10480607
> 
> 赞同：2
> 
> 时间：2012-05-07T10:38:58.727
> 
> 标签：web, search-engine

我想在我的网站 (www.mywebsite.com) 中放置一个秘密页面。页面 URL 是“www.mywebsite.com/mysecretpage”。

如果主页（www.mywebsite.com）中没有指向这个秘密页面的可点击链接，搜索引擎还能找到它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T10:44:18.287

如果你想躲避网络爬虫：[http ://www.robotstxt.org/robotstxt.html](http://www.robotstxt.org/robotstxt.html)

网络爬虫收集链接并查找它们。因此，如果您没有链接到该站点，并且没有其他人链接到该站点，则该站点将不会在任何搜索引擎上找到。

但是你不能确定，寻找你的页面的人不会找到它。如果你想要秘密数据，你应该使用某种脚本来授予那些将获得访问权限的人的访问权限。

这是一个更有用的链接：[http ://www.seomoz.org/blog/12-ways-to-keep-your-content-hidden-from-the-search-engines](http://www.seomoz.org/blog/12-ways-to-keep-your-content-hidden-from-the-search-engines)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T10:41:46.133

不会。网络蜘蛛会根据前几页的链接进行爬网。如果没有页面链接它，搜索引擎将无法找到它。

# image-processing - 如何对单个图像执行分水岭分割和 Blob 分析？

> ID：10480609
> 
> 赞同：0
> 
> 时间：2012-05-07T10:39:16.717
> 
> 标签：image-processing, opencv, pattern-matching, computer-vision, watershed

我打算使用 Open-CV 编写一个程序来计算类似于下图的图像中对象的数量。

![示例图像](../Images/52384f9a17652e5c88ea96cbf420ef35.png)

我计划采用的方法是使用直方图对图像进行阈值处理，然后使用 Blob 检测来计算识别的 Blob 数量。只要颗粒状物体不相互接触，这将正常工作。（虽然重叠超出了范围）我研究了使用分水岭分割来识别相互接触的对象的可能性。

我不清楚的是，如何将这两种技术应用于可能有或没有重叠颗粒的图像。如果图像中至少有一个颗粒相互接触，我是否要同时执行这两种技术？如果有，按什么顺序？还是我只执行分水岭，因为某处会重叠，并且执行 Blob 检测会由于合并的 blob 而导致错误的输出？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T06:23:19.347

您说“只要图像中至少有一个重叠实例”，但也说“重叠超出范围”。

如果分水岭算法处理具有重叠颗粒的图像，则斑点检测可能不会提供任何优势（因为它将合并重叠对象）。

如果你真的想组合这些方法，你可以在它们自己的管道中运行它们，并使用概率模型将两者结合起来。但是最好从简单的开始，看看你首先会得到什么样的结果。

这是一个使用 Matlab 的示例，它使用 Watershed 执行细胞分割：

[http://blogs.mathworks.com/steve/2006/06/02/cell-segmentation/](http://blogs.mathworks.com/steve/2006/06/02/cell-segmentation/)

如果您需要避免计算仅部分可见的对象，您可以使用 Voronoi 图并删除与边缘连接的对象：

[http://pythonvision.org/basic-tutorial](http://pythonvision.org/basic-tutorial)

# c# - 如何在不干扰索引的情况下比较字符串列

> ID：10480617
> 
> 赞同：0
> 
> 时间：2012-05-07T10:39:37.463
> 
> 标签：c#, .net, sql

我有一个问题，我必须将字符串列与用户插入的任何值进行比较。

列中的值可以是以下任何格式；并且字符串不能超过 19 个字符

```
00000000000
(000) 000-0000
000-000-0000
22222222222222
000 000 00000
000 000 0000
000-000-0000
000-000-00000
00 00 000 0000
000000000000
0000 0000 000 
```

问题是我们拥有的数据包含如此多的格式，我们无法在 sqlserver 中进行比较时处理所有数据，因为在查询时我有一些限制，我不能在 where 子句中使用任何标量函数，因为它会干扰索引和性能。

我唯一的选择是通过 C# 代码处理它。

任何人都可以帮助我并指导我在 C# 中创建一个通用函数来处理上述所有情况以及其他可能的情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T11:00:23.050

我建议添加包含格式化值的规范化值的新列。归一化值只是没有不重要字符（空格、括号等）的原始值

当用户提供新输入时，对其进行规范化并使用查询将其与数据库中的规范化值进行比较。

将数据保存到数据库时，同时保存原始值和标准化值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T10:58:46.513

数据看起来可能是电话号码。如果是这种情况，那么空格、括号和破折号就不重要了。所以你可以把它们去掉，留下只由数字组成的字符串。

您应该能够更轻松地比较这种标准化形式。

如果保留用户输入的格式很重要，请将规范化的表单作为单独的列存储在数据库中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T11:05:13.787

假设 '(',')',' ' 和 '-' 可以忽略

```
public class ColumnComparer : IEqualityComparer<string> {
     private static readonly string[] remove = {"(",")"," ","-"};
     public bool Equal(string x, string y){
          //remove ignorable characters;
          var tempX = string.Concat(x.Split(remove,StringSplitOptions.IgnoreEmptyEntries));
          var tempY = string.Concat(y.Split(remove,StringSplitOptions.IgnoreEmptyEntries));
          return tempX == tempY;
     }

     public int GetHashCode(string x){
          return string.Concat(
               x.Split(remove,StringSplitOptions.IgnoreEmptyEntries)
               ).GetHashCode();
     }
} 
```

split 和 concat 可能看起来有点奇怪，但它通常是从字符串中删除不需要的字符的最快方法。曾经有一个关于该主题的问题，但它似乎已被删除。

# php - 构建一个字符串 json_encode

> ID：10480618
> 
> 赞同：0
> 
> 时间：2012-05-07T10:39:38.647
> 
> 标签：php, json

我正在使用一个 php 文件。我想展示 8 个 CSS 按钮。

```
 echo "<div class='num_outer'>right ";

   <button type="num-btn" onclick="do_some_code()">"1"</button>
   <button type="num-btn" onclick="do_some_code()">"2"</button>
   <button type="num-btn" onclick="do_some_code()">"3"</button>
   <button type="num-btn" onclick="do_some_code()">"4"</button>

   echo $colors;
   echo " </div>";// end num_outer 
```

好的，所以我希望他们选择一种或多种颜色并将它们连接到变量 $colors 中。所以 $colors 看起来像“142”，如果选择了 3。经过数小时的研究，似乎 json_encode 可能是最好的。但我愿意接受任何建议。

我也希望它适用于所有浏览器。谢谢您的帮助。

编辑 ------------------------------ 建议代码 ----- ------

```
 echo "<div class='num_outer'>right ";
  echo "<script language=\"JavaScript\">\n";
  echo "var str = ''; \n";
  echo " function do_some_code(val)";
  echo "{";
echo "   str+=val;";
echo "}";
  echo "</script> ";
  echo " <button type="num-btn" onclick="do_some_code('1')">"1"</button>";
  echo " <button type="num-btn" onclick="do_some_code('2')">"2"</button>";
  echo "  <button type="num-btn" onclick="do_some_code('3')">"3"</button>";
  echo "  <button type="num-btn" onclick="do_some_code('4')">"4"</button>";

  echo "   <button type="num-btn" onclick="window.location.href='get_tst1a.php?        str='+str">Show me value</button>";
   $str = $_GET['str']; 
   echo " </div>";// end num_outer 
```

* * *

我的文件名是 get_tst1a.php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T11:36:14.440

为什么要对所有 html 标签使用 echo。您的 php 字符串连接正在中断。下面试试。

```
<div class='num_outer'>right 
<script language="JavaScript">
var str = ''; 
function do_some_code(val)
{str+=val;}
</script>
<button type="num-btn" onclick="do_some_code('1')">"1"</button>
<button type="num-btn" onclick="do_some_code('2')">"2"</button>
<button type="num-btn" onclick="do_some_code('3')">"3"</button>
<button type="num-btn" onclick="do_some_code('4')">"4"</button>
<button type="num-btn" onclick="window.location.href='get_tst1a.php?str='+str">Show me value</button>"
<? 
    echo $str = $_GET['str']; 
?>
</div> 
```

# java - 尽管 jar 在类路径中，但由于缺少类而引发异常，REST - JERSEY

> ID：10480619
> 
> 赞同：0
> 
> 时间：2012-05-07T10:39:40.010
> 
> 标签：java, rest, jersey, noclassdeffounderror

我正在将 Jersey 用于 REST 应用程序，尽管我的类路径中有以下罐子，但我为类 AbstractRuntimeDelegate 得到了这个 NoClassDefException ......

*   commons-httpclient-3.1.jar
*   项目清单
*   javax.ws.rs.jar
*   jersey-core-1.9.1-sources.jar
*   jersey-server-1.1.2-ea.jar

该课程在 jersey-core-1.9.1-sources.jar 中，我可以从这里看到
[http://www.jarvana.com/jarvana/inspect/com/sun/jersey/jersey-core/1.9.1/ jersey-core-1.9.1-sources.jar?folder=com/sun/jersey/core/spi/factory/](http://www.jarvana.com/jarvana/inspect/com/sun/jersey/jersey-core/1.9.1/jersey-core-1.9.1-sources.jar?folder=com/sun/jersey/core/spi/factory/)

你有过这样的问题吗？有什么建议吗？

谢谢

例外：

```
Exception in thread "bq-main" java.lang.NoClassDefFoundError: com/sun/jersey/core/spi/factory/AbstractRuntimeDelegate
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
        at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
        at java.net.URLClassLoader.access$000(URLClassLoader.java:73) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T10:42:21.077

我认为你应该使用[jersey-core-1.9.1.jar](http://repo1.maven.org/maven2/com/sun/jersey/jersey-core/1.9.1/jersey-core-1.9.1.jar)而不是它的源 jar。

# c# - 从其他文件编码\转换错误中提取二进制文件

> ID：10480622
> 
> 赞同：0
> 
> 时间：2012-05-07T10:39:53.153
> 
> 标签：c#, file, encoding, byte, type-conversion

我有两个二进制文件，`"bigFile.bin"`和`"smallFile.bin"`. 包含.
_ 以无与伦比的方式打开它证实了这一点。 `"bigFile.bin"``"smallFile.bin"`

我想将较小的文件从较大的文件中提取到等于`"smallFile.bin"`.
我有两个关键字——一个用于起始位置（“Section”），一个用于结束位置（“Man”）；

我尝试了以下方法：

```
 byte[] bigFile = File.ReadAllBytes("bigFile.bin");
   UTF8Encoding enc = new UTF8Encoding();
   string text =  enc.GetString(bigFile);

   int startIndex = text.IndexOf("Section");
   int endIndex = text.IndexOf("Man");

   string smallFile = text.Substring(startIndex, endIndex - startIndex);

   File.WriteAllBytes("result.bin",enc.GetBytes(smallFile)); 
```

我试图将结果文件与无法比较的原始小文件进行比较，它显示了十六进制表示比较。
没有字节是相等的——但有些不是。

例如，在我有的新文件中，`84`但在旧文件中我有`EF BF BD`序列。

什么会导致这些差异？我错在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T10:42:53.337

由于您使用的是二进制文件，因此不应使用与文本相关的功能（包括编码等）。改为使用与字节相关的方法。

您当前的代码可以通过如下方式转换为工作：

```
 byte[] bigFile = File.ReadAllBytes("bigFile.bin");

   int startIndex = /* assume we somehow know this */
   int endIndex = /* assume we somehow know this */

   var length = endIndex - startIndex;
   var smallFile = new byte[length];
   Array.Copy(bigFile, startIndex, smallFile, 0, length);
   File.WriteAllBytes("result.bin", smallFile); 
```

找到`startIndex`并且`endIndex`你甚至可以使用你以前的技术，但这样的东西[会](https://stackoverflow.com/questions/283456/byte-array-pattern-search)更合适。

然而，这仍然是有问题的，因为：

1.  将二进制数据和“文本”填充到同一个文件中会使事情复杂化
2.  这里仍然*有很多*不必要的复制；你应该将你的输入作为一个`Stream`而不是一个字节数组来工作
3.  甚至比不必要的复制更糟糕的是，任何非流解决方案要么需要像上面那样将所有输入文件加载到内存中（浪费），要么编码*非常*复杂

那么该怎么办？

1.  不要将内存中的文件内容作为字节数组读取。改为使用[`FileStream`](http://msdn.microsoft.com/en-us/library/system.io.filestream.aspx)。
2.  将 a 包裹`StreamReader`起来`FileStream`并使用它来查找开始和结束索引的标记。更好的是，更改您的文件格式，这样您就不需要搜索文本。
3.  知道`startIndex`and之后`length`，使用流函数查找输入流的相关部分并将`length`字节复制到输出流。

# iphone - 启动屏幕后的电影或启动屏幕作为电影

> ID：10480623
> 
> 赞同：0
> 
> 时间：2012-05-07T10:39:54.167
> 
> 标签：iphone, objective-c, ios, xcode

无论如何，我可以在应用程序启动后播放 .mov、.gif 或任何格式吗？任何建议都可以:) 或者我可以在图像中使用动画并将其加载到“应用程序 didFinishLaunching”中。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:35:05.453

将此添加到您的 appDelegate.m 文件中

```
 -(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
 {
     [viewController showSplash];

 } 
```

将此添加到您的视图 controller.m 文件中

```
 -(void)showSplash
 {
     UIViewController *modalViewController = [[UIViewController alloc] init];
     modalViewController.view = //here you use your video file
     [self presentModalViewController:modalViewController animated:NO];

  }
 - (IBAction)hideSplash
  {
      [[self modalViewController] dismissModalViewControllerAnimated:YES];

  } 
```

试试这个并告诉我们它是否对您有帮助；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:14:58.547

同样，我刚刚搜索了“video splashscreen objective-c”，我发现了这些：

[将视频添加到启动屏幕或应用程序的第一个视图中（IOS xcode 4.0）](https://stackoverflow.com/questions/6972638/add-a-video-into-splash-screen-or-in-the-first-view-of-the-app-ios-xcode-4-0)

[如何播放动画/电影而不是 iPhone 闪屏？](https://stackoverflow.com/questions/2474960/how-to-play-animation-movie-instead-of-iphone-splash-screen)

[iPhone - 将视频显示为闪屏](https://stackoverflow.com/questions/4575273/iphone-showing-video-as-a-splash-screen)

而且我认为您可以找到有关此主题的更多信息，这是一个非常常见的主题。

# java - How to measure length of line which is drawn on image in java?

> ID：10480628
> 
> 赞同：1
> 
> 时间：2012-05-07T10:40:13.997
> 
> 标签：java, netbeans, line, platform, measurement

I m making app in netbeans platform in java using Swing technology for dentist. i want to measure length of line which is drawn by user on image's of teeth? so, then Doctor can find the length of root canal of teeth.and line can also be not straight, line can be ZigZag.if any one have idea about that then share with me please.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T10:49:59.203

That is not very easy because the images are taken from different angles or distances as I suppose. You will need some kind of scale in the image which length you know. Think of a tag with a size of 5mm x 5mm which is pasted on the tooth. In you application you can then measure this tag. Lets say its edge size is 200x200 Pixel. Then you know that 200 Pixels are 5mm and you have the formula to calculate the real size from the line length.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:01:34.190

You can use one of the many [line detection algorithms](http://en.wikipedia.org/wiki/Line_detection) to detect the existence of lines and then measure the line in pixels.

You can use an image processing library that already has these algorithms implemented, or you can implement them your self (better use a library though), [this](https://stackoverflow.com/questions/603283/what-is-the-best-java-image-processing-library-approach) question is about image processing libraries and approaches in java.

# iphone - 如何调整 UITableViewCell 的大小并将其平稳地在屏幕上居中？

> ID：10480629
> 
> 赞同：0
> 
> 时间：2012-05-07T10:40:16.857
> 
> 标签：iphone, objective-c, ios

我想生长一个选定的单元格以几乎填满屏幕。

我熟悉使用`beginUpdates`and更改单元格的高度`endUpdates`，但结果是单元格的大小正确，部分位于屏幕外。

我可以滚动使单元格在屏幕上居中，使用`setContentOffset:`or `scrollToRowAtIndexPath:`，但这是与高度变化分开的动画，看起来不太好。

有没有办法将两者结合起来并平稳地生长一个细胞，使其居中且更大？

# objective-c - 区分 Cocoa touch app 和 Cocos2d app

> ID：10480632
> 
> 赞同：1
> 
> 时间：2012-05-07T10:40:35.243
> 
> 标签：objective-c, ios, cocoa-touch, cocos2d-iphone

我有一个适用于 iOS 应用程序的 SDK。SDK 用于 Cocoa 应用程序和 Cocos2d 应用程序。SDK 也有一个 UIPageControl 可以在 Cocoa 应用程序中正常工作，而在 Cocos2d 应用程序中不能正常工作。我想弄清楚哪个应用程序/平台正在使用我的 SDK，无论是 Cocos2D 还是 Cocoa。我如何在目标 C 中做到这一点？

在这方面的任何帮助都会有所帮助。

# cakephp - i18n 控制台任务 - 如何使用它？

> ID：10480643
> 
> 赞同：3
> 
> 时间：2012-05-07T10:41:42.407
> 
> 标签：cakephp, internationalization, translation

我有蛋糕 php 应用程序，我正在使用翻译功能`<?php __('msg'); ?>`。我在我的 app/config/bootstrap.php 中添加了一行`Configure::write('Config.language', 'eng');`- 我希望英语作为默认语言。

我创建了文件夹`app/Locale/eng/LC_MESSAGES`。

然后我在我的应用程序文件夹中打开 Windows 控制台并输入“cake i18n extract” - 有几个提示 - 我选择扫描应用程序目录并输出到 Locale 目录。

在我的文件夹 app/Locale 中的 i18n 程序之后，出现了几个文件：

```
cake.pot
cake_dev.pot
default.pot 
```

app/Locale/eng 中没有任何内容

所以我只是将 default.pot 复制到 app/Locale/eng/LC_MESSAGES 并添加了一些翻译，但是当我通过网站打开时，没有打印任何内容来代替 __('') 函数......

如何正确设置这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T11:02:52.673

:) 你需要从你刚刚创建的 .pot 文件中为每个语言创建一个 .po 文件。我建议使用[poedit](http://www.poedit.net/)来做到这一点

在 Poedit 中，转到`File->New Catalog from POT file`，然后选择`default.pot`蛋糕烘焙生成的文件。它会询问你一些信息，然后你会看到所有要翻译的文本，一个完成，保存到`app/Locale/eng/LC_MESSAGES/default.po`

当您在代码中添加/删除/修改其中一些字符串时，您需要再次运行烘焙以提取文本。它将更新 .pot 文件，在 Poedit 中，您需要打开您的 .po 文件并转到`Catalog->Update from POT`它会显示您需要翻译的所有新行，有时它会尝试根据您的以前的翻译

希望这可以帮助

# html - 为 Internet Explorer 7 及更早版本设计网站的最佳方式

> ID：10480651
> 
> 赞同：-2
> 
> 时间：2012-05-07T10:42:56.670
> 
> 标签：html, css, internet-explorer

在开发具有丰富用户界面的网站时，我们最终会遇到 Internet Explorer 的问题。

如果我们有一个单独的 css 只为 IE 指定，那么在 IE 上工作的最佳方式是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:51:42.860

IE6可读就可以（没有阴影和小细节，老电脑），IE7、IE8尊重布局，IE9更容易。您可以查看[http://modernizr.com/](http://modernizr.com/)和有关此脚本的教程以获得最佳用法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T13:37:04.563

考虑为旧 IE 版本使用单独的隔离简化样式表。例如，[通用 Internet Explorer 6 CSS](http://www.stuffandnonsense.co.uk/blog/about/universal_internet_explorer_6_css/)。

# grails - 打开现有的 grails 项目

> ID：10480652
> 
> 赞同：0
> 
> 时间：2012-05-07T10:43:00.330
> 
> 标签：grails

我有一个简单的 grails(2.0.3) 应用程序，其中包含几个域模型、控制器和服务。在我保存它并尝试在另一台机器上运行后，我得到了一些奇怪的行为。

索引页面上生成的控制器链接看起来是正确的，但被点击时会将我重定向到 localhost:8080/appname/appname 并使用 404 而不是 localhost:8080/appname/controller/action。

但是当我尝试使用“grails generate-domain-class”手动重新创建模型时，生成一个控制器并创建一个服务类，它工作正常。似乎某些项目数据在移动后丢失了，或者它可能存储在我的项目文件夹之外的某个地方。

我需要做什么才能将我的工作项目保存在第一台机器上并在第二台机器上重新打开它？我的应用程序是在不使用任何 IDE 的情况下创建的，只使用命令行和文本编辑器。

**编辑**

在尝试重现此行为而不发布所有不必要的代码后，无需将项目移动到另一台机器就可以了。

当我创建一个使用注入服务的控制器时（阅读后[）](http://www.kromhouts.net/blog/grails/grails-service-and-controller-interface/)：

```
class BookController {

    def bookService

    def index() {
        redirect(action: "list", params: params)
    }

    def list() {
        def result = bookService.list(params)
        if(!result.error) {
            return [ bookInstanceList: result.bookInstanceList,
                bookInstanceTotal: result.bookInstanceTotal ]
        }
        flash.message = g.message(code: result.error.code, args: result.error.args)
        redirect( url: resource(dir:'') )
    }
} 
```

并生成视图我尝试在索引页面访问生成的控制器 url 并使用 404 获取 localhost:8080/appname/appname。grails 控制台中没有显示错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:52:50.403

在将项目移动到另一台机器后遇到 grails 问题时，我发现有两件事有帮助。首先是运行

```
grails upgrade 
```

当它提示您是否要升级项目时，请说是。这样做将重写您可能没有移过的任何丢失的配置文件。二是跑

```
grails clean 
```

这将删除您可能已经从旧系统转移到新系统的所有编译类。

# c++ - MacOS 的“-std=gnu++0x”选项

> ID：10480654
> 
> 赞同：4
> 
> 时间：2012-05-07T10:43:09.010
> 
> 标签：c++, xcode, gcc, c++11, osx-lion

我正在尝试编译一个使用

```
set(CMAKE_CXX_FLAGS ${CMAKE_CXX_FLAGS} "-Wall -std=gnu++0x") 
```

在 MacOS X Lion 下的 CMakeLists.txt 文件中。我已经安装了 XCode 4.2.1。但是编译器失败了：

```
cd something/src/lib && /usr/bin/c++   -Dlib_ginacra_EXPORTS -Wall -std=gnu++0x -fPIC   -o CMakeFiles/lib_ginacra.dir/utilities.cpp.o -c something/src/lib/utilities.cpp
cc1plus: error: unrecognized command line option "-std=gnu++0x" 
```

编译器的版本是：

```
c++ --version
i686-apple-darwin11-llvm-g++-4.2 (GCC) 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.1.00) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T11:49:46.517

GCC 4.2 是古老的，但 Apple 没有发布更新的版本。

您可以从 Mac Ports 之类的地方安装现代 GCC（这可能更简单快捷），也可以按照[http://gcc.gnu.org/wiki/InstallingGCC上的说明自行构建](http://gcc.gnu.org/wiki/InstallingGCC)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-06T12:42:34.587

对于面临此问题的 Lion 用户：

[从此处](https://distfiles.macports.org/MacPorts/)下载并安装**MacPorts-2.2.1-10.7-Lion.pkg** MacPorts 安装程序包

在终端中，搜索更新的 GCC 版本：

```
$  port search --name --glob 'gcc*' 
```

安装较新的版本（我使用 gcc5）

```
$  sudo port install gcc5 
```

获取新版本的名称，并将其设置为默认值

```
$ port select --list gcc

Available versions for gcc:
    llvm-gcc42
    mp-gcc5
    none (active)

$ sudo port select --set gcc mp-gcc5 
```

打开一个新终端并验证您是否已更新：

```
$ c++ --version
c++ (MacPorts gcc5 5.2.0_0) 5.2.0 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-11-01T05:11:29.853

**大多数人在安装需要使用node-** gyp 进行 C++ 编译的 nodejs 扩展时收到错误**“cc1plus: error: unrecognized command line option -std=gnu++0x”**。那么如何解决这个错误所以这里是解决方案。基本上，由于 Nodejs 版本不同，您会收到这些错误，因为许多节点库在安装时需要 C 或 C++ 编译。因此，Nodejs 旧版本使用**python 2.7**，  **gcc**编译器低于 4.2 版本，但 Nodejs 新版本使用**gcc44**编译器，这就是为什么在安装任何 nodejs 库时会出现上述错误。

 ******因此，如果您的系统上安装了多个 python 版本，则需要降级 nodejs 和 node-gyp 版本并指定 python 版本，然后您将不再出现上述错误。

[点击这里查看完整教程](http://webbio.nl/wikiweb/nodejs-node-gyp-build-error-while-installing-extension-cc1plus-error-unrecognized-command-line-option-stdgnu0x/)******

# linux - 在 ELF 二进制文件中导入名称

> ID：10480657
> 
> 赞同：5
> 
> 时间：2012-05-07T10:43:33.323
> 
> 标签：linux, import, dllimport, file-format, elf

ELF 格式在哪里存储导入函数的名称？是否总是可以枚举所有导入名称，例如 PE 可执行文件？

例如，如果一个二进制文件正在使用`printf`，是否可以通过对二进制文件本身的静态分析来判断它是否使用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T10:51:59.537

在 ELF 中，它们被称为未定义符号。您可以通过以下方式查看未定义符号的列表：

*   `nm -D <file>|grep -w U`

*   `objdump -T <file>|grep "\*UND\*"`

ELF 文件没有指定哪些符号来自哪些库；它只是将共享库列表添加到 ELF 二进制文件中，并让链接器在库中查找符号。

# symfony - Symfony2 KnpPaginator 包，在我看来无法使用 2 个分页表进行排序

> ID：10480661
> 
> 赞同：1
> 
> 时间：2012-05-07T10:43:46.507
> 
> 标签：symfony, knppaginator

我有 1 个控制器，它使用 KnpPaginator Bundle 将 2 个分页结果集传递给一个树枝（作为代表表格的 2 个数组）。

虽然两个表都显示并分页，但我无法对它们中的任何一个进行排序。 **编辑：**当我更改表 1 的页面时，表 2 的页面也会更改为该页码。

尝试对它们中的任何一个进行排序返回：在给定的查询中没有 [t] 别名的组件或给定的查询中没有 [r] 别名的组件。

控制器：

```
 $em = $this->getDoctrine()->getEntityManager();
    $pageSize =  $this->container->getParameter('page_size');
    $paginator = $this->get('knp_paginator');

    /* Queries */
    $queryTest = $em
        ->createQuery('
            SELECT t FROM PanasonicTestEtAvisBundle:Test t
            JOIN t.product p
            WHERE p.id = :id
            AND t.isDeleted = :isdeleted
            ORDER BY t.creationDate DESC'
        )->setParameter('id', $id)
         ->setParameter('isdeleted', '0');

    $queryReview = $em
        ->createQuery('
            SELECT r FROM PanasonicTestEtAvisBundle:Review r
            JOIN r.product p 
            WHERE p.id = :id
            AND r.isDeleted = :isdeleted
            ORDER BY r.creationDate DESC'
        )->setParameter('id', $id)
         ->setParameter('isdeleted', '0');

    /* paginated results */
    $paginationTest = $paginator->paginate($queryTest, $this->get('request')->query->get('page', 1), $pageSize);
//        compact('paginationTest');

    $paginationReview = $paginator->paginate($queryReview, $this->get('request')->query->get('page', 1), $pageSize);
//        compact('paginationReview');
//        compact('pagination');

    return $this->render('PanasonicTestEtAvisBundle:Product:show.html.twig', array(
        'paginationTest' => $paginationTest,
        'paginationReview' => $paginationReview
    )); 
```

**仅当我通过两个分页（paginationTest 和 paginationReview）时才会显示该错误，如果我只通过一个它可以完美地工作。**

任何人都可以告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T06:58:37.400

您的示例不起作用，因为您对两个分页集都使用了相同的页面变量“page”。

如果你想在同一个地方使用两个或多个分页集，你必须这样做：

你的控制器：

```
...

$pagename1 = 'page1'; // Set custom page variable name
$page1 = this->get('request')->query->get($pagename1, 1); // Get custom page variable
$paginationReview = $paginator->paginate(
    $queryReview, 
    $page1, 
    $pageSize,
    array('pageParameterName' => $pagename1)
);

$pagename2 = 'page2'; // Set another custom page variable name
$page2 = this->get('request')->query->get($pagename2, 1); // Get another custom page variable
$paginationReview = $paginator->paginate(
    $queryReview, 
    $page2, 
    $pageSize,
    array('pageParameterName' => $pagename2)
);

return $this->render('PanasonicTestEtAvisBundle:Product:show.html.twig', array(
    'paginationTest' => $paginationTest,
    'paginationReview' => $paginationReview
)); 
```

您的看法：

```
// PanasonicTestEtAvisBundle:Product:show.html.twig
{# First set #}
{% for test in paginationTest %}
<tr>
    <td>{{ test.id }}</td>
</tr>
{% endfor %}
{{ paginationTest.render()|raw }}

{# Second set #}
{% for review in paginationReview %}
<tr>
    <td>{{ review.id }}</td>
</tr>
{% endfor %}
{{ paginationReview.render()|raw }} 
```

享受！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-01T10:53:28.603

现在是 2017 年，我遇到了类似的问题。仅供参考，我正在使用：

```
 "knplabs/knp-paginator-bundle": "^2.5", 
```

我试图用 Symfony 的爬虫运行几个功能测试。他们中的一些人使用带有以下选项的 Knp Paginator：

```
[
    'defaultSortFieldName' => 'voucher.id',
    'defaultSortDirection' => 'DESC',
    'wrap-queries' => true,
    'defaultFilterFields' => ['voucherText.title']
] 
```

而其他有这些选项的人：

```
[
    'defaultSortFieldName' => 'event.id',
    'defaultSortDirection' => 'DESC',
    'wrap-queries' => true,
    'defaultFilterFields' => ['event.name', 'eventText.description']
] 
```

排序参数名称出现问题，因为两个分页器都使用默认的“排序”键，从全局 $_GET 数组中获取 - 您可以自己检查它：*Knp\Component\Pager\Event\Subscriber\Sortable\Doctrine\ORM\QuerySubscriber*。

然而，神秘的部分是抛出的错误：

```
UnexpectedValueException: There is no component aliased by [event] in the given Query 
```

为了避免这种怪异/废话，我找到了一个“ **sortFieldParameterName** ”选项，您可以将其添加到所有分页器的选项中：

```
[
    'sortFieldParameterName' => 'sort_event',
    'defaultSortFieldName' => 'event.id',
    'defaultSortDirection' => 'DESC',
    'wrap-queries' => true,
] 
```

# ios - Facebook API iOS 5.1 示例？

> ID：10480664
> 
> 赞同：0
> 
> 时间：2012-05-07T10:44:00.193
> 
> 标签：ios, xcode, facebook

有一些 iOS 5.1 与 Facebook 集成的教程或示例吗？我已经在 Facebook 开发者网站上尝试过，但在保留属性[https://developers.facebook.com/docs/mobile/ios/build/](https://developers.facebook.com/docs/mobile/ios/build/)时出现错误。我对IOS真的很陌生，所以如果你能帮助我，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:47:17.320

使用保留很可能会出错，因为当您创建新项目时，Xcode 询问您是否要使用自动引用计数 (ARC)，并且您选择了该复选框（我认为它是默认选中的）。ARC 不允许手动内存管理调用，例如保留。上传有问题的行，我将编辑这篇文章，向您展示如何修复它。

# file - 在驱动器中查找文件结构？

> ID：10480667
> 
> 赞同：0
> 
> 时间：2012-05-07T10:44:16.477
> 
> 标签：file, map

我想知道是否有办法以可读的格式有效地写出驱动器的文件结构。所以我的意思是它是否可以写出类似于...的结果

```
C:/
  File here 
  Another file here
     Sub file here
  Another file here 
```

所以有点像。我不知道它叫什么，但如果有什么东西可以做到这一点，那就太好了！如果可以分批做就更好了（无论如何都不管）谢谢:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T10:50:05.893

在 Windows 中打开命令提示符。写：

```
tree 
```

如果你想要选项写树/？

# iphone - 当应用程序在 Background-iphone 上时，一个事件应该调用一个方法

> ID：10480669
> 
> 赞同：-1
> 
> 时间：2012-05-07T10:44:20.873
> 
> 标签：iphone, background, event-handling, invoke

即使应用程序在后台，每次发生事件时我都需要调用一个方法。就我而言 - 每次从服务器获取图片时，我都想展示它，如果应用程序在后台，我希望它重新进入前台并展示图片。

可能吗？如果不是，最近的替代方案是什么？

谢谢，阿萨夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T11:16:21.530

我认为这是不可能的，但使用通知来做到这一点，应用程序将在收到通知时变为活动状态。

进一步查看这些线程

[iPhone OS 4.0.x - 从后台过渡到前台](https://stackoverflow.com/questions/3419559/iphone-os-4-0-x-transition-from-background-to-foreground)

[如何以编程方式将应用程序带到前台](https://stackoverflow.com/questions/9904566/how-to-bring-app-to-foreground-programatically)

# javascript - 日期验证日期选择器

> ID：10480671
> 
> 赞同：-1
> 
> 时间：2012-05-07T10:44:40.003
> 
> 标签：javascript

我是 javascript 新手，我试图找到一个日期选择器，它在第一次加载时显示今天的日期，然后当一个人选择一个日期时，如果日期早于今天的日期，它会通过警报通知用户。有没有人知道我在哪里可以找到一些帮助来建立这个？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T10:46:28.003

当然，我会推荐看看 jQuery UI 的 Datepicker：

[http://jqueryui.com/demos/datepicker/](http://jqueryui.com/demos/datepicker/)

它允许您指定 minDate，以便用户无法选择指定 mindate 之前的任何日期。

# sql-server - 存储过程不显示结果

> ID：10480672
> 
> 赞同：1
> 
> 时间：2012-05-07T10:44:42.103
> 
> 标签：sql-server, sql-server-2008, stored-procedures, reporting-services, sql-server-2008-r2

我创建了一个存储过程（在 SSRS 中使用），它的参数值大于一个。当我通过提供该参数的值在 SSMS 中执行此存储过程时，SP 不返回任何结果。它应该返回超过 1 行

下面是给出的SP

```
CREATE PROCEDURE [dbo].[sp_tst_CSENG_JulieCapitalHours]
        @StartDate DATETIME ,
        @EndDate DATETIME ,
        @ProjHomeGrp NVARCHAR(MAX) ,
        @ProjHier NVARCHAR(MAX)
AS  
BEGIN
    SELECT  [Capital Project] ,
                    [Capital Task] ,
                    ResourceName ,
                    ProjectName ,
                    [Project Home Group] ,
                    ActualWork ,
                    TimeByDay ,
                    ResourceStandardRate ,
                    ActualWork * ResourceStandardRate AS Dollars ,
                    [Project Hierarchy]
    FROM [IR.CapOnly]
    WHERE ( TimeByDay >= @StartDate )
      AND ( [Project Home Group] IN ( @ProjHomeGrp ) )
      AND ( TimeByDay <= @EndDate )
      AND ( ActualWork > 0 )
      AND ( [Project Hierarchy] IN ( @ProjHier ) )
    ORDER BY ProjectName ,
             ResourceName
END 
```

您可以看到在 where 子句中，Project Home Group ( `@ProjHomeGrp`) 和 Project Hierarchy ( `@ProjHier`) 是参数，其值在提供时（大于 1）SP 返回零值。

我传递的价值是：

```
Start Date: 1/1/2011 
End Date: 12/31/2012
@ProjHomeGrp : PHG1,PHG2,PHG3,PHG4,PHG5,PHG6,PHG7
@ProjHier: PROH1, PROH2, PROH3 
```

让我知道任何问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:47:42.077

这看起来不对：

```
[Project Home Group] IN ( @ProjHomeGrp ) 
```

您不能使用`IN`类型`NVARCHAR`并期望能够直接对其使用基于集合的操作。

这可能更接近您正在寻找的内容：

```
[Project Home Group] = @ProjHomeGrp 
```

并且（从您的使用中猜测`IN`）如果您将`NVARCHAR(MAX)`参数用作分隔文本（例如以逗号作为分隔符的整数），则有更好的方法 - 您应该为此类事情使用[表值参数](http://msdn.microsoft.com/en-us/library/bb510489.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-03T08:04:47.553

创建过程，如：

```
CREATE PROCEDURE Show_Sproceduresome
   AS 
 Begin
    select points,coursename,c.type from OfferType o,Courses c,Candidate cd, CourseOffer
     where name = 'Francisco' 
     and o.OfferId = co.OfferId 
     and co.CourseId = c.CourseId 
     and co.UCASNumber = cd.UCASNumber
 End 
```

执行如下程序：

```
exec Sproceduresome 
```

不显示结果或输出

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T11:26:23.063

正如 Oded 所说，表值参数是要走的路。然而，这里是一个基于动态 sql 的解决方案，所有的问题都可能暗示...

```
create procedure [dbo].[sp_tst_CSENG_JulieCapitalHours]
        @StartDate datetime ,
        @enddate datetime ,
        @ProjHomeGrp nvarchar(MAX) ,
        @ProjHier nvarchar(MAX)
    as  
begin
    declare @sql nvarchar(max)
    declare @paramDefs nvarchar(max)

    select @sql = N'select  [Capital Project] ,
            [Capital Task] ,
            ResourceName ,
            ProjectName ,
            [Project Home Group] ,
            ActualWork ,
            TimeByDay ,
            ResourceStandardRate ,
            ActualWork * ResourceStandardRate AS Dollars ,
            [Project Hierarchy]
    from    [IR.CapOnly]
    where   ( TimeByDay >= @StartDate )
            and ( [Project Home Group] IN (' + @ProjHomeGrp + ') )
            and ( TimeByDay <= @EndDate) )
            and ( ActualWork > 0 )
            and ( [Project Hierarchy] IN ( ' + @ProjHier + ' ) )
    order by ProjectName, ResourceName'

    select @paramDefs = N'@StartDate datetime, @EndDate datetime'

    exec sp_executesql @sql, @paramDefs, @StartDate = @StartDate, @EndDate =  @EndDate
end 
```

# powershell - 在文件中查找和替换失败

> ID：10480673
> 
> 赞同：35
> 
> 时间：2012-05-07T10:44:42.543
> 
> 标签：powershell, powershell-2.0

我正在尝试使用以下方法在文件中查找和替换。

```
Function Find-Replace ($FileFullpath, $FindString, $ReplacementString) {

   Get-Content $FileFullpath | 
   Foreach-Object {$_ -replace $FindString, $ReplacementString } |  
   Set-Content $FileFullpath

}

Find-Replace "c:\program files (x86)\MyProj\web.config" $OldServiceName $NewServiceName 
```

但我总是出错。

> Set-Content ：该进程无法访问文件 'c:\program files (x86)\MyProj\web.config'，因为它正被另一个进程使用。

该文件未在任何地方打开。我认为 Get-content 尚未发布该文件。

为什么会发生？如何在同一个文件中查找和替换没有问题？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-05-07T10:55:24.537

您不能在打开同一个文件时对其进行读写，Get-Content 会打开文件进行读取，同时 Set-Content 会尝试对其进行写入。将 Get-Conetnt 调用放在括号中，它将打开文件，读取其内容并关闭它。

```
(Get-Content $FileFullpath) | ... 
```

# php - php测验显示正确和错误答案的数量

> ID：10480676
> 
> 赞同：0
> 
> 时间：2012-05-07T10:45:01.310
> 
> 标签：php, if-statement, counter

我有一个像这样的多项选择测验问题的 php 页面

```
<p>1\. Is Manhattan near New York?<br>
    <input type="radio" name="ans1" value="3">
    Yes<br>
    <input type="radio" name="ans1" value="2">
    Maybe<br>
    <input type="radio" name="ans1" value="1">
    No</p>
  <p>2\. Do you like Indian food?<br>
    <input type="radio" name="ans2" value="1">
    Some times<br>
    <input type="radio" name="ans2" value="3">
    Never<br>
    <input type="radio" name="ans2" value="2">
    Always</p> 
```

该页面向自身发布并检查答案是否正确

```
if($ans1 == "3") { 
$test_complete .="Question one is <span class='green'>correct</span>, well done!<br/>";  
}else{ 
$test_complete .="Question one is <span class='red'>incorrect</span>!<br/>"; 
} 
// change the quest2 to the right answer
if($ans2 == "2") { 
$test_complete .="Question two is <span class='green'>correct</span>, well done!<br/>"; 
}else{ 
$test_complete .="Question two is <span class='red'>incorrect</span>!<br/>"; 
} 
```

现在，我不想告诉用户答案一或两个是正确的，而是运行一个计数器，它计算正确答案的数量和错误答案的数量，并将其显示在两个表格框中，一个框显示问题总数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:48:27.003

像这样...？

```
$result = $ans1 == 3;
$result += $ans2 == 2;
$result += $ans3 == 1;

echo "You got $result/3 questions right"; 
```

[http://codepad.org/6zBQXQIT](http://codepad.org/6zBQXQIT)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T10:49:50.673

有多种方法可以做到这一点。我会有一系列与问题相对应的正确问题，然后进行比较。例如：

```
$correct_answers = array('3', '2');
for ($i = 0; $i < $number_of_questions; $i++)
{
   $ans_var = 'ans'.$i;
   if ($_POST[$ans_var] == $correct_answers[$i])
   {
      $score++;
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T10:53:43.733

如果我正确理解了这个问题...

```
session_start();
if (!isset($_SESSION['total'])){$_SESSION['total']=0;}
if (!isset($_SESSION['correct'])){$_SESSION['correct']=0;}
if($ans1 == "3") {$_SESSION['correct']+=1;}
if($ans2 == "2") {$_SESSION['correct']+=1;}
if (isset($ans1) || isset($ans2)) {$_SESSION['total']+=1}
echo '<table><tr><td>Correct answers:</td><td>'.$_SESSION['correct'].'</td></tr>';
echo '<tr><td>Wrong answers:</td><td>'.$_SESSION['total']-$_SESSION['correct'].'</td></tr>';
echo '<tr><td>Total answers</td><td>'.$_SESSION['total'].'</td></tr></table>'; 
```

# c# - 如何将列表项设置为空 C#？

> ID：10480679
> 
> 赞同：4
> 
> 时间：2012-05-07T10:45:22.170
> 
> 标签：c#, memory-leaks, dispose

我有一个名为容器的用户控件，我在运行时在其中添加其他用户控件。

我想从容器中删除所有控件，我正在这样做，`container.Controls.Clear()`但我的控件仍在内存中，我怎样才能使它们为 null ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T10:47:05.867

调用 Clear 方法不会从内存中删除控制句柄。您必须显式调用 Dispose 方法以避免内存泄漏。

阅读更多：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.control.controlcollection.clear.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controlcollection.clear.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T10:48:01.087

假设面板是您包含所有子控件的父控件，因此遍历所有子控件并调用每个子控件的 dispose 方法......这可能会解决您的问题

```
 while (panel.Controls.Count > 0)
  {
     panel.Controls[0].Dispose();
  } 
```

调用 clear 方法只是从容器控件而不是内存中删除控件，因此您需要处理它们...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T20:35:38.463

调用`Dispose()`父容器还将释放其所有子控件，假设它们也实现了`IDisposable`. 一般来说，所有 WinForms 控件都将实现 IDisposable 所以这应该可以工作。

如果他们不这样做（与 WPF 一样，因为 WPF 控件不会隐式使用非托管代码），则需要向控件添加一些自定义清理方法。内存泄漏的最常见来源之一是未分离的事件处理程序。我通常会执行以下操作：

```
public void CleanUp()
{
    //detach event handlers
    //other cleanup as necessary
} 
```

如果您将此虚拟化并将其添加到您的用户控件将继承的基类中，这将特别有用，因此您可以简单地调用`CleanUp()`而无需检查类型。我个人喜欢这种方法而不是实现 IDisposable，因为 IDisposable 主要用于清理非托管资源。

# android - 在远程服务中使用 AsyncTask

> ID：10480685
> 
> 赞同：1
> 
> 时间：2012-05-07T10:45:53.573
> 
> 标签：android, android-asynctask, android-service

我在其中使用 Service 和 AsyncTask 时遇到了一点问题。我编写了一个做一些 HTTP 工作的小类，它执行一个 AsyncTask 以在后台完成所有 HTTP 工作，当它完成时，它用响应数据调用一个侦听器。

现在我需要在服务（远程服务）中使用该类，并且每次该类尝试从 AsyncTask 类创建一个对象时，它都会崩溃并在日志 cat 中显示以下消息：

```
05-07 10:30:01.847: E/JavaBinder(1026): *** Uncaught remote exception!  (Exceptions are not yet supported across processes.)
05-07 10:30:01.847: E/JavaBinder(1026): java.lang.ExceptionInInitializerError
05-07 10:30:01.847: E/JavaBinder(1026):     at com.lowlevel.umusic.VK.getById(VK.java:46)
05-07 10:30:01.847: E/JavaBinder(1026):     at com.lowlevel.umusic.Song.requestUri(Song.java:109)
05-07 10:30:01.847: E/JavaBinder(1026):     at com.lowlevel.umusic.PlayService$1.playSong(PlayService.java:149)
05-07 10:30:01.847: E/JavaBinder(1026):     at com.lowlevel.umusic.IPlayService$Stub.onTransact(IPlayService.java:55)
05-07 10:30:01.847: E/JavaBinder(1026):     at android.os.Binder.execTransact(Binder.java:320)
05-07 10:30:01.847: E/JavaBinder(1026):     at dalvik.system.NativeStart.run(Native Method)
05-07 10:30:01.847: E/JavaBinder(1026): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
05-07 10:30:01.847: E/JavaBinder(1026):     at android.os.Handler.<init>(Handler.java:121)
05-07 10:30:01.847: E/JavaBinder(1026):     at android.os.AsyncTask$InternalHandler.<init>(AsyncTask.java:421)
05-07 10:30:01.847: E/JavaBinder(1026):     at android.os.AsyncTask$InternalHandler.<init>(AsyncTask.java:421)
05-07 10:30:01.847: E/JavaBinder(1026):     at android.os.AsyncTask.<clinit>(AsyncTask.java:152)
05-07 10:30:01.847: E/JavaBinder(1026):     ... 6 more
05-07 10:30:01.847: W/dalvikvm(1026): threadid=8: thread exiting with uncaught exception (group=0x40015560)
05-07 10:30:01.847: E/AndroidRuntime(1026): FATAL EXCEPTION: Binder Thread #2
05-07 10:30:01.847: E/AndroidRuntime(1026): java.lang.ExceptionInInitializerError
05-07 10:30:01.847: E/AndroidRuntime(1026):     at com.lowlevel.umusic.VK.getById(VK.java:46)
05-07 10:30:01.847: E/AndroidRuntime(1026):     at com.lowlevel.umusic.Song.requestUri(Song.java:109)
05-07 10:30:01.847: E/AndroidRuntime(1026):     at com.lowlevel.umusic.PlayService$1.playSong(PlayService.java:149)
05-07 10:30:01.847: E/AndroidRuntime(1026):     at com.lowlevel.umusic.IPlayService$Stub.onTransact(IPlayService.java:55)
05-07 10:30:01.847: E/AndroidRuntime(1026):     at android.os.Binder.execTransact(Binder.java:320)
05-07 10:30:01.847: E/AndroidRuntime(1026):     at dalvik.system.NativeStart.run(Native Method)
05-07 10:30:01.847: E/AndroidRuntime(1026): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
05-07 10:30:01.847: E/AndroidRuntime(1026):     at android.os.Handler.<init>(Handler.java:121)
05-07 10:30:01.847: E/AndroidRuntime(1026):     at android.os.AsyncTask$InternalHandler.<init>(AsyncTask.java:421)
05-07 10:30:01.847: E/AndroidRuntime(1026):     at android.os.AsyncTask$InternalHandler.<init>(AsyncTask.java:421)
05-07 10:30:01.847: E/AndroidRuntime(1026):     at android.os.AsyncTask.<clinit>(AsyncTask.java:152)
05-07 10:30:01.847: E/AndroidRuntime(1026):     ... 6 more 
```

有什么想法，或者我必须修改我的课程以同步工作？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T13:14:17.713

我回答我自己的问题，希望它可以帮助正在尝试相同问题并找到此消息的其他人。

AsyncTask 可以在服务中使用，但不能在存根中使用。就如此容易。

如果您需要从存根调用它们，有几种方法可以让它们工作：

**1.**示例代码：

```
public class MyService extends Service {
    private static final int MSG_CALLTASK = 0;

    private Handler mHandler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            switch (msg.what) {
            case MSG_CALLTASK:
                new MyAsyncTask().execute();
                break;
            }
        }
    };

    private IMyService.Stub mStub = new IMyService.Stub = {
        public void myFunction() {
            /* Call task */
            mHandler.sendMessage(mHandler.obtainMessage(MSG_CALLTASK));
        }
    };

    [...]
} 
```

**2.**第二种方法是避免从存根调用方法，只向服务发送一个意图并在'onStartCommand'方法中解析它（发送意图时会调用它）。

我希望这是有帮助的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T14:21:13.167

```
public class LoginService_Service extends Service {
    NotificationManager mNM;
    static String stcode="";

    @Override
    public void onCreate() {
        mNM = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
        new DoLogin().execute(null);
    }
    @Override
    public void onDestroy() {
        mNM.cancel(R.string.notify_cancel);
        Log.i("Finish", "OnDestroy Called");
    }

    @Override
    public IBinder onBind(Intent intent) {
        return mBinder;
    }

    private final IBinder mBinder = new Binder() {
        @Override
        protected boolean onTransact(int code, Parcel data, Parcel reply,
                int flags) throws RemoteException {
            return super.onTransact(code, data, reply, flags);
        }
    };
    public class DoLogin extends AsyncTask<Void, Void, Void> {
        @Override
        protected Void doInBackground(Void... params) {
            HttpClient client = new DefaultHttpClient();
            HttpConnectionParams
                    .setConnectionTimeout(client.getParams(), 10000); // Timeout
            try {
                HttpPost request = new HttpPost(
                        "myurl");
                JSONStringer jsonstr = new JSONStringer().object().key(
                "UserName").value(prefs.getString("unm", "")).key(
                "Password").value(prefs.getString("pwd", ""))
                .endObject();

                Log.i("JSONStringer", jsonstr.toString());
                StringEntity entity = new StringEntity(jsonstr.toString());
                entity.setContentType("application/json;charset=UTF-8");// text/plain;charset=UTF-8
                entity
                        .setContentEncoding(new BasicHeader(
                                HTTP.CONTENT_TYPE,
                                "application/json;charset=UTF-8"));
                request.setEntity(entity);
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpResponse res = httpClient.execute(request);
                Log.i("Request", request.toString());
            } catch (Exception e) {
                e.printStackTrace();
                Log.i("Error", "Cannot Estabilish Connection");
            }
            return null;
        }
        @Override
        protected void onPostExecute(Void result) {
            super.onPostExecute(result);
            if (stcode != null) {
                if (stcode.equalsIgnoreCase("0")) {
                    Log.i("ReLogin", "ReLogin Success");
                } else {
                    Log.i("ReLogin", "ReLogin Failed");
                }
            }
            LoginService_Service.this.stopSelf();
        }

    }
} 
```

# ruby-on-rails - Rails 3 多态关联，查看页面

> ID：10480687
> 
> 赞同：1
> 
> 时间：2012-05-07T10:46:23.670
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, polymorphic-associations

考虑以下多态关系

```
class Person
  has_many :photos, :as => :attachable
end

class Animal
  has_many :photos, :as => :attachable
end

class Photo
  belongs_to :attachable, :polymorphic => true
end 
```

Person 或 Animal 对象的视图页面包含其各自照片的图库。这些页面包含以下代码：

```
...
  <%= link_to(image_tag(photo.image_url(:thumb).to_s), [@attachable, photo]) %>
... 
```

但是，在我的照片的查看页面中，我想根据它属于人还是动物来呈现不同的信息。例如，如果它是一个人，它应该显示他/她的身高，宠物列表；如果是动物，则应显示其品种、所有者等。

这样做的最佳解决方案是什么？

我可以想到两种可能的解决方案：

一种方法可能是针对每个类在照片中指向单独的控制器操作。就像是

```
<%= link_to(image_tag(photo.image_url(:thumb).to_s), show_person_path[@attachable, photo]) %>
<%= link_to(image_tag(photo.image_url(:thumb).to_s), show_animal_path[@attachable, photo]) %> 
```

但是我认为这种方法在多态类中引入了视图逻辑的不正确委派。

另一种方法是在每个 Person 和 Animal 类中引入一个控制器动作来显示它们的相应信息。图库应链接到此操作而不是上面的操作，并且该操作应渲染照片。

但是，我觉得要显示的相应信息很少，值得每个班级自己采取行动。也许助手就足够了，但我不确定正确的方法（如果上述假设属实，请纠正我）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T10:58:49.543

如果 Animal 和 Person 之间的差异不能证明单独的控制器是合理的，那么您可以拥有一个控制器，并且在画廊的操作中，只需根据 @attachable 的类型呈现不同的视图：

```
if @attachable.is_a? Person
  render 'gallery_person'
elsif @attachable.is_a? Animal
  render 'gallery_animal'
end 
```

我在这里看到的唯一缺点是，每当您引入一种新的可附加类型时，您都需要返回并扩展逻辑。您可以添加默认图库视图来缓解这种情况。

# android - Android DefaultHttpClient 中超时值的默认连接

> ID：10480689
> 
> 赞同：2
> 
> 时间：2012-05-07T10:46:43.560
> 
> 标签：android, http

`DefaultHttpClient`Android中的默认连接超时值是多少？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T11:15:34.550

连接超时默认值为零，表示不使用超时。

# c# - OWC 电子表格控件中的页脚

> ID：10480691
> 
> 赞同：1
> 
> 时间：2012-05-07T10:46:49.770
> 
> 标签：c#, asp.net-mvc, asp-classic

我正在使用 OWC 电子表格控件并希望在保存和加载电子表格时添加页脚。是否有可能然后请提供任何对我有帮助的示例。

提前致谢。

# javascript - 检测与选择框的交互

> ID：10480695
> 
> 赞同：2
> 
> 时间：2012-05-07T10:47:05.633
> 
> 标签：javascript, jquery, forms, select, dom-events

我如何（使用 Javascript 或 jQuery）检测何时从选择框中选择了一个值，即使它与之前选择的选项相同（即没有触发更改事件）。

主要是我需要这个来进行鼠标交互，但是一个适用于键盘的解决方案也很方便。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T10:58:53.743

如果您可以将事件处理程序附加到选择框选项元素并单击存储其值，我不知道它是否可以从我的头顶开始工作。

适用于鼠标，不适用于键盘[http://jsfiddle.net/w4DEJ/4/](http://jsfiddle.net/w4DEJ/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:26:35.263

我认为 focus() 函数会帮助你..试试这个： [http ://api.jquery.com/focus/](http://api.jquery.com/focus/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T11:58:39.263

`change`我发现唯一可行的解​​决方案是通过将 的值设置为`select`其他 on来引发事件`mousedown`。在标记中，我创建了一个额外的选项（即第一个孩子）并将其隐藏（像往常一样完美地隐藏在 Chrome/FF/Safari、IE 中）。所以看起来不错。

```
<select>
    <option style="display: none"></option>
    <option>First</option>
    <option>Second</option>
    <option>Third</option>
</select>​ 
```

然后使用 jQuery，我们以一种在触发时将其值重置为隐藏选项的值的方式绑定`change`和`mousedown`事件。`mousedown``select`

```
$("select").on({
    change: function() {
        console.log($(this).val());
    },
    mousedown: function() {
        $(this).val($(":first", this).val());
    }
});​ 
```

**演示：http:** [//jsfiddle.net/LzNrS/](http://jsfiddle.net/LzNrS/)

**更新：**为了在用户单击`select`但决定不选择任何内容时保留所选值，我们可以修改代码添加`blur`事件和更新`mousedown`。

```
var special = ""; // special hidden option value
var value = ""; // temporary variable

$("select").on({
    change: function() {
        console.log($(this).val());
    },
    mousedown: function() {
        if (this.value == special) {
            $(this).val(value);
            return;
        }
        value = this.value;
        $(this).val(special);
    },
    blur: function() {
        if (this.value == special)
            $(this).val(value);
    }
});​ 
```

**演示：http:** [//jsfiddle.net/LzNrS/1/](http://jsfiddle.net/LzNrS/1/)

# jquery - 点击时保持 Bootstrap 下拉菜单打开

> ID：10480697
> 
> 赞同：87
> 
> 时间：2012-05-07T10:47:15.900
> 
> 标签：jquery, twitter-bootstrap

我使用引导下拉菜单作为购物车。购物车中有一个“删除产品”按钮（链接）。如果我单击它，我的购物车脚本会删除该产品，但菜单会消失。有没有办法防止这种情况发生？我尝试了 e.startPropagation，但这似乎不起作用：

```
<div id="shoppingcart" class="nav-collapse cart-collapse">
 <ul class="nav pull-right">
  <li class="dropdown open">
    <a href="#" data-toggle="dropdown" class="dropdown-toggle">Totaal:
    &acirc;&sbquo;&not; 43,00</a>

    <ul class="dropdown-menu">
      <li class="nav-header">Pakketten</li>

      <li>
       <span class="quantity">1x</span>
       <span class="product-name">Test Product </span>
       <span class="product-remove"><a class="removefromcart" packageid="4" href="#">x</a>
        </span></li>

      <li><a href="#">Total: &euro; 43,00</a></li>

      <li><a href="/checkout">Checkout</a></li>
    </ul>
  </li>
</ul> 
```

如您所见，带有 class="dropwdown-toggle" 的元素使其成为下拉列表。另一个想法是我只是在以编程方式单击时重新打开它。因此，如果有人可以向我解释如何以编程方式打开 Bootstrap 下拉菜单，那将很有帮助！

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-05-07T11:43:15.083

尝试像这样删除按钮本身的传播：

```
$('.dropdown-menu a.removefromcart').click(function(e) {
    e.stopPropagation();
}); 
```

**编辑**

这是来自上述解决方案的评论中的演示：

[http://jsfiddle.net/andresilich/E9mpu/](http://jsfiddle.net/andresilich/E9mpu/)

相关代码：

**JS**

```
$(".removefromcart").on("click", function(e){
    var fadeDelete = $(this).parents('.product');
    $(fadeDelete).fadeOut(function() {
        $(this).remove();
    });

    e.stopPropagation();
}); 
```

**HTML**

```
<div id="shoppingcart" class="nav-collapse cart-collapse">
 <ul class="nav pull-right">
  <li class="dropdown open">
    <a href="#" data-toggle="dropdown" class="dropdown-toggle">Totaal:
    &acirc;&sbquo;&not; 43,00</a>

    <ul class="dropdown-menu">
      <li class="nav-header">Pakketten</li>
        <li class="product">
            <span class="product-remove"><a class="removefromcart" packageid="2" href="#"><i class="icon-remove"></i></a></span>
            <span class="product-name">Test Product </span>
            <span class="quantity"><span class="badge badge-inverse">1</span></span>
        </li>
        <li class="product">
            <span class="product-remove"><a class="removefromcart" packageid="2" href="#"><i class="icon-remove"></i></a></span>
            <span class="product-name">Test Product </span>
            <span class="quantity"><span class="badge badge-inverse">10</span></span>
        </li>
        <li class="product">
            <span class="product-remove"><a class="removefromcart" packageid="2" href="#"><i class="icon-remove"></i></a></span>
            <span class="product-name">Test Product </span>
            <span class="quantity"><span class="badge badge-inverse">8</span></span>
        </li>
        <li class="product">
            <span class="product-remove"><a class="removefromcart" packageid="2" href="#"><i class="icon-remove"></i></a></span>
            <span class="product-name">Test Product </span>
            <span class="quantity"><span class="badge badge-inverse">3</span></span>
        </li>
        <li class="product">
            <span class="product-remove"><a class="removefromcart" packageid="2" href="#"><i class="icon-remove"></i></a></span>
            <span class="product-name">Test Product </span>
            <span class="quantity"><span class="badge badge-inverse">4</span></span>
        </li>
        <li class="divider"></li>
        <li><a href="#">Total: &euro; 43,00</a></li>
        <li><a href="/checkout">Checkout</a></li>
    </ul>
  </li>
</ul> 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-10-02T08:19:44.413

该答案只是已接受答案的旁注。感谢 OP 和 Andres 的问答，它解决了我的问题。然而，后来，我需要一些可以在我的下拉列表中动态添加的项目。遇到此问题的任何人都可能对 Andres 的一种变体解决方案感兴趣，该解决方案既适用于初始元素，也适用于页面加载后添加到下拉列表中的元素：

```
$(function() {
    $("ul.dropdown-menu").on("click", "[data-keepOpenOnClick]", function(e) {
        e.stopPropagation();
    });
}); 
```

或者，对于动态创建的下拉菜单：

```
$(document).delegate("ul.dropdown-menu [data-keepOpenOnClick]", "click", function(e) {
    e.stopPropagation();
}); 
```

然后，根据您的情况，将该`data-keepOpenOnClick`属性放在任何`<li>`标签或其子元素中的任何位置。例如：

```
<ul class="dropdown-menu">
    <li>
        <-- EG 1: Do not close when clicking on the link -->
        <a href="#" data-keepOpenOnClick>
            ...
        </a>
    </li>
    <li>
        <-- EG 2: Do not close when clicking the checkbox -->
        <input type="checkbox" data-keepOpenOnClick> Pizza
    </li>

    <-- EG 3: Do not close when clicking the entire LI -->
    <li data-keepOpenOnClick>
        ...
    </li>
</ul> 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2017-12-20T16:47:41.417

在引导程序 4 上，当您将表单放入下拉菜单中时，在其中单击时它不会折叠。

所以这对我来说最有效：

```
<div class="dropdown">
    <!-- toggle button/link -->
    <div class="dropdown-menu">
        <form>
            <!-- content -->
        </form>
    </div>
</div> 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2014-07-23T07:15:54.853

总之，你可以试试这个。它对我有用。

```
<span class="product-remove">
  <a class="removefromcart" onclick=" event.stopPropagation();" packageid="4" href="#">x</a>
  </span> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-11-17T10:05:23.007

当您为菜单提供`show`类时，菜单会打开，因此您可以自己实现该功能而无需使用`data-toggle="dropdown"`.

```
<div class="dropdown">
  <button class="btn btn-secondary" type="button">
    Dropdown button
  </button>
  <div class="dropdown-menu">
    <a class="dropdown-item" href="#">Action</a>
    <a class="dropdown-item" href="#">Another action</a>
    <a class="dropdown-item" href="#">Something else here</a>
  </div>
</div>
<div id="overlay"></div> 
```

```
#overlay{
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  z-index: 1000;
  display: none;
}

#overlay.show{
  display: block;
}

.dropdown-menu{
  z-index: 1001;
} 
```

```
$('button, #overlay').on('click', function(){
  $('.dropdown-menu, #overlay').toggleClass('show')
}) 
```

[在codepen](https://codepen.io/masamoto-miyata/pen/eQEENE)中试试这个。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-06-11T20:41:12.843

我在 Bootstrap 3 的下拉菜单中嵌套的手风琴/切换子菜单遇到了同样的问题。从[源代码](https://github.com/twbs/bootstrap/blob/master/js/dropdown.js#L149)中借用了这个语法来阻止所有折叠切换关闭下拉菜单：

```
$(document).on(
    'click.bs.dropdown.data-api', 
    '[data-toggle="collapse"]', 
    function (e) { e.stopPropagation() }
); 
```

您可以替换`[data-toggle="collapse"]`为您想要停止关闭表单的任何内容，类似于@DonamiteIsTnt 添加属性的方式。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-09-15T17:20:21.280

我写了几行代码，让它在我们需要更多控制的情况下工作得尽可能完美：

```
$(".dropdown_select").on('hidden.bs.dropdown', function () {
    if($(this).attr("keep-open") == "true") {
        $(this).addClass("open");
        $(this).removeAttr("keep-open");
    }
});

$(".dropdown_select ul li").bind("click", function (e) {
    // DO WHATEVER YOU WANT
    $(".dropdown_select").attr("keep-open", true);
}); 
```

# html - 网页存储

> ID：10480702
> 
> 赞同：1
> 
> 时间：2012-05-07T10:47:33.777
> 
> 标签：html

我必须使用 HTML 本地存储来存储价值。但我不直接存储值。值来自我正在解析的 xml。请帮我解决我应该如何存储这些值。

javascript中的代码段是：

```
function html5_storage_support() {
  try {
    return 'localStorage' in window && window['localStorage'] == null;
  } catch (e) {
    return false;
  }
}

unction checekAnswer() {
    $("#btnSubmit").attr("disabled","true");
    $("#btnSubmit").attr("onclick","");

    attempted_count++;
    var feedback=question[i].getElementsByTagName("feedback");
    var answer=question[i].getElementsByTagName("answer"); 
    var score=question[i].getElementsByTagName("score"); 
    var left=question[i].getElementsByTagName("answer")[0].getAttribute("left");
    var top=question[i].getElementsByTagName("answer")[0].getAttribute("top");
    var single=question[i].getElementsByTagName("image")[0].getAttribute("single");

    if(answer[0].getAttribute("mcq")=="true")    
    {
        var ans=$('input:radio[name=rdOptions]:checked').val(); 
        var correct;
        var option=answer[0].getElementsByTagName("options");

        for(var k=0;k<option.length;k++)
        {
            if(option[k].getAttribute("correctAnswer")=="true")
            {
                correct=option[k].getAttribute("value");
            }
        }

        if(ans==correct)
        { 
            correctAnswers++;             
            $("#feedback").html("Correct Answer:"+ans+"<br/>");
            $("#feedback").append(score[0].childNodes[0].nodeValue);
            $("#feedback").append("<br/>");
            $("#feedback").append(feedback[0].childNodes[0].nodeValue);
        }
        else
        {
            $("#feedback").html("Your Answer:"+ans+"<br/>");
            $("#feedback").append("Correct Answer:"+correct+"<br/>");
            $("#feedback").append(score[1].childNodes[0].nodeValue);
            $("#feedback").append("<br/>");
            $("#feedback").append(feedback[0].childNodes[0].nodeValue); 
        }
    } 
    else 
    {

        $("#draggableImg").draggable({disabled:true});
        var diff=0;

        if(single=="true")
            diff=2;
        else
            diff=7;

        if(xPos<=(parseInt(left)+7) && xPos>=(parseInt(left)-7) && yPos<=(parseInt(top)+diff) && yPos>=(parseInt(top)-diff))
        {
            **//Displaying the feedbacks and scores**                     
            correctAnswers++;
            $("#feedback").append(score[0].childNodes[0].nodeValue);
            $("#feedback").append("<br/>");
            $("#feedback").append(feedback[0].childNodes[0].nodeValue); 
        }
        else
        {
            $("#feedback").html(score[1].childNodes[0].nodeValue);
            $("#feedback").append("<br/>");
            $("#feedback").append(feedback[0].childNodes[0].nodeValue); 
        }

        //$("#counter").html("left="+xPos+",top="+yPos);    
        $("#trFeedBack").show("slow");  
        display_nav(j,obj)  
    }
} // end function 
```

# javascript - 如何在 perl CGI 中获取访问者浏览器窗口的大小

> ID：10480705
> 
> 赞同：1
> 
> 时间：2012-05-07T10:47:52.360
> 
> 标签：javascript, html, perl, web

有谁知道如何在 Perl CGI 脚本中获取用户浏览器窗口的高度和宽度？

或者我怎样才能将这个值从 javascript 或其他语言传递给我的 $var ???

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T12:03:19.950

如果您正在谈论通过表单调用然后打印网站的 perl 脚本，您可以使用 javascript 获取浏览器大小，将其放入隐藏的表单变量中，然后在您的 perl 脚本中使用[CGI检索它们。](http://search.cpan.org/dist/CGI/)然后它可以对这些值做出反应，例如更改静态网页布局的大小。

在网站上，像这样使用 javascript：

```
<script type="text/javascript">
document.forms[0].windowheight.value = window.innerHeight;
document.forms[0].windowwidth.value = window.innerWidth;
</script> 
```

但请记住，不同的浏览器在 JS 中使用不同的方式来获取大小值。也许[这](http://www.howtocreate.co.uk/tutorials/javascript/browserwindow)有帮助。您还可以使用[jQuery](http://api.jquery.com/height/)来确定这些值。

当您将它们放入`<form>`并提交时，您可以使用该`CGI`模块来读取它们，就像读取所有其他表单参数一样。不管它们是通过 POST 还是 GET 发送的。

```
use strict;
use warnings;
use CGI;
my $cgi = CGI->new;
my $windowHeight = $cgi->param('windowheight');
my $windowWidth = $cgi->param('windowwidth'); 
```

# jquery - Jquery淡入淡出图像交换

> ID：10480706
> 
> 赞同：2
> 
> 时间：2012-05-07T10:47:53.433
> 
> 标签：jquery, image, fade

我已经制作了这段代码。当我将鼠标悬停在一个框上时，它会更改背景图像。但是，我希望进来的图片淡入淡出。我该怎么做？:)

```
$(document).ready(function(){

    $("#box1").mouseover(function(){
        $("#background").addClass("hover1");
        $("#content").html(box1);
    });

    $("#box1").mouseout(function(){
        $("#background").removeClass("hover1");
        $("#content").html(content);            
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T10:52:57.377

我认为 jquery-ui switchClass 可能会帮助你：

[开关类](http://jqueryui.com/docs/switchClass/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:43:40.123

你可以使用[switchClass](http://docs.jquery.com/UI/Effects/switchClass)或[toggleClass](http://docs.jquery.com/UI/Effects/toggleClass)

```
$("p").click(function () {
    $(this).switchClass("ClassToBeRemoved", "ClassToBeAdded", 1000);
});

$('#foo').toggleClass(className, addOrRemove); 
```

我认为 switchClass auita 你

# c++ - Windows x64 的近绝对调用 (0xFF 0x15) 寻址

> ID：10480709
> 
> 赞同：2
> 
> 时间：2012-05-07T10:48:10.827
> 
> 标签：c++, windows, assembly, reverse-engineering, 64-bit

我找到了与 linux x86_64 绝对寻址相关的主题： [Absoluteaddressing for runtime code replacement in x86_64](https://stackoverflow.com/questions/7978973/absolute-addressing-for-runtime-code-replace-in-x86-64)。据说 linux 不支持绝对寻址。

windows x64 怎么样，支持近乎绝对的调用吗？

对于 windows x86，函数的地址可以通过以下方式从接近绝对调用 (0xFF 0x15) 中获取：

```
unsigned char call_nearAbsolute[2] = {0xFF, 0x15};

if(memcmp(bytes, call_nearAbsolute, sizeof(call_nearAbsolute)) == 0) {
{        
    unsigned char offset[] = {
                *(bytes + 0x5),
                *(bytes + 0x4),
                *(bytes + 0x3),
                *(bytes + 0x2)
            };
        PDWORD_PTR absolute_addr = 
        (PDWORD_PTR)(((offset[0] & 0xFF) << 24) | 
        ((offset[1] & 0xFF) << 16) | 
            ((offset[2] & 0xFF) << 8) | 
        offset[3] & 0xFF);
} 
```

如果 x64 支持，如何正确获取程序地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-19T14:58:02.270

利用

```
MOV rax, address(your routine)'
CALL rax 
```

在 1 个命令（营销或任何愚蠢的原因）中（尚未）在该模式下没有绝对调用。提到的组合（必要时用其他临时寄存器替换）可以让你得到你想要的。预测器应该至少通过它在内存中的放置来识别这样的调用，而不会受到惩罚（调用命令本身）。虽然我没有测试第一次调用惩罚，但它应该与间接地址调用相同或更低（正确对齐时）。

# css - CSS居中图像

> ID：10480712
> 
> 赞同：0
> 
> 时间：2012-05-07T10:48:21.073
> 
> 标签：css, image, center

我正在编写一个移动网站，并且我已经寻找了几个小时来解决我遇到的中心问题。该网站是[http://peatarian.com ，您可以使用](http://peatarian.com)[transmog](http://transmog.net/iphone-simulator/mobile-web-browser-emulator.php)模拟 iphone 浏览器。

CSS 可以在[这个页面](http://peatarian.com/qa-theme/Mobile/qa-styles.css)上找到，但最重要的部分如下：

```
html, body {height:100%;float:center;text-align:center;}
body {background-url:url(raypeat.gif) no-repeat left top;margin:0; padding:0; text-            align:center;color:black;}
body,td,input,textarea {font-size:100%; font-family:Verdana, Arial, Helvetica, sans-serif;}
a:link,a:active,a:visited {text-decoration:none;}
a:hover {text-decoration:underline;}
p {margin-top:0;}
table {background: none repeat scroll 0 0 white;} 
```

和

```
.qa-nav-main {float:center;clear:both;border-top:1px solid black;border-bottom:1px solid black;background-color:#B7E3DA;margin:auto;margin-top:10px;padding:10px 0px;display:block;margin-left:auto;margin-right:auto;}
.qa-nav-main-list {font-size:125%; list-style:none;margin:auto;display:block;margin-left:auto;margin-right:auto;}
.qa-nav-main-item,.qa-nav-main-item-opp {margin:auto;display:block;float:left;margin-left:auto;margin-right:auto;}
.qa-nav-main-item {display:block;margin-left:auto;margin-right:auto;}
.qa-nav-main-item-opp {margin:auto;display:block;margin-left:auto;margin-right:auto;}
.qa-nav-main-link {color:#fff; display:block; padding:6px 10px; background-color:none;}
.qa-nav-main-selected {background-color:none; text-decoration:none;}
.qa-nav-main-hot .qa-nav-main-link {background:none;}
.qa-nav-main-hot .qa-nav-main-link:hover, .qa-nav-main-hot .qa-nav-main-selected {background:#396E63;} 
```

图像是（主）菜单。如果您将 iphone 侧放，您会发现它们没有居中....我尝试在 .qa-nav-main 和 .qa-nav-mean-item 中编辑很多东西但是如果我`float:center`在后者中设置菜单项都在一个新行上（尽管它们是居中的）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T12:04:09.787

如果您想像现在一样保持您的代码结构，那么只需将一个类添加到`<span>`包含您`<center>`的包含您的按钮的类。该类将具有以下规则：

```
display: block;
width: 200px; /* this should be the width you need, please assign your own */
margin: 0 auto; 
```

在您的 .qa-nav-main 类中添加以下规则：

```
text-align:center; 
```

这应该会给您希望的跨度在中间浮动的效果。但我建议你稍微修改一下标记，去掉所有的 span 和 center 标签。

以上为您提供了下图所示的结果： ![在此处输入图像描述](../Images/aed052c7c2c3c91e69da57b47cffa02d.png)

# iphone - 在 iphone 的 facebook 墙上分享图像和文字不起作用？

> ID：10480718
> 
> 赞同：0
> 
> 时间：2012-05-07T10:48:49.157
> 
> 标签：iphone, objective-c, ios, facebook

**大家好，我想直接在 iphone 中分享图片并分享文字。我在按钮单击时实现了以下代码，但它什么也没做......**

```
 NSMutableDictionary *variables = [NSMutableDictionary dictionaryWithCapacity:4];

 [variables setObject:[NSString stringWithFormat:@"Hi... Testing APp"] forKey:@"message"];
 [variables setObject:@"http://icon.png" forKey:@"picture"];       //http://tinyurl.com/45xy4kw
 [variables setObject:@"Create post" forKey:@"name"];
 [variables setObject:@"Write description." forKey:@"description"];

 [facebook requestWithGraphPath:@"/me/feed" andParams:variables andHttpMethod:@"POST" andDelegate:self]; 
```

**我正在为此 [Facebook API使用 facebook direct api](https://developers.facebook.com/docs/)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T05:19:35.163

使用此代码工作正常

```
-(IBAction)postMeFeedButtonPressed:(id)sender {

    NSMutableDictionary *variables = [NSMutableDictionary dictionaryWithCapacity:8];

    //create a UIImage (you could use the picture album or camera too)
    UIImage *picture = [UIImage imageNamed:@"Icon@2x.png"];

    //create a FbGraphFile object insance and set the picture we wish to publish on it
    FbGraphFile *graph_file = [[FbGraphFile alloc] initWithImage:picture];

    //finally, set the FbGraphFileobject onto our variables dictionary....
    [variables setObject:graph_file forKey:@"file"];

    NSArray *idarry=[[NSArray alloc]initWithArray:Delegate.IdListArray];
    NSLog(@"Delegate array %@",Delegate.IdListArray);

    //NSString *str=[NSString stringWithFormat:@"100001912715296,100001912715296"];
    NSString *str=[idarry componentsJoinedByString:@","];

    NSLog(@"The string contents are %@",str);

   NSString *idstr=[NSString stringWithFormat:@"100002875785051,100001912715296"];

    [variables setObject:idstr forKey:@"tags"];
    [variables setObject:@"110506962309835" forKey:@"place"];

    [variables setObject:@"Hello All my dear friends,I am using MySafety APP" forKey:@"message"];
    [variables setObject:@"http://techilasolutions.com/product.html" forKey:@"link"];
    [variables setObject:@"My Safety" forKey:@"name"];
    [variables setObject:@"http://techilasolutions.com/images/car_tag.png" forKey:@"picture"];
    [variables setObject:@"This is a must have app for all women whether you are a working lady, a house wife or a school going girl.This app lets you save 6 emergency contacts whom you want to alert in case of emergency.Whenever you feel you are in danger, just press the SOS button and it will send sms to your contacts with your current location and a alarm will go on with flashing lights" forKey:@"description"];

    FbGraphResponse *fb_graph_response = [fbGraph doGraphPost:@"me/feed" withPostVars:variables];
    NSLog(@"postMeFeedButtonPressed:  %@", fb_graph_response.htmlResponse);

    //parse our json
    SBJSON *parser = [[SBJSON alloc] init];
    NSDictionary *facebook_response = [parser objectWithString:fb_graph_response.htmlResponse error:nil];
    [parser release];

    //let's save the 'id' Facebook gives us so we can delete it if the user presses the 'delete /me/feed button'
    self.feedPostId = (NSString *)[facebook_response objectForKey:@"id"];
    NSLog(@"feedPostId, %@", feedPostId);
    NSLog(@"Now log into Facebook and look at your profile...");

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T10:55:43.983

您可以使用此代码发布图像尝试此代码一次。

```
-(IBAction)postPictureButtonPressed:(id)sender 
  {
     NSMutableDictionary *variables = [NSMutableDictionary dictionaryWithCapacity:2];

     UIImage *picture = [UIImage imageNamed:@"75x75.png"];

     FbGraphFile *graph_file = [[FbGraphFile alloc] initWithImage:picture];

     [variables setObject:graph_file forKey:@"file"];

     [variables setObject:@"this is a test message: postPictureButtonPressed" forKey:@"message"];

     FbGraphResponse *fb_graph_response = [fbGraph doGraphPost:@"117795728310/photos" withPostVars:variables];
     NSLog(@"postPictureButtonPressed:  %@", fb_graph_response.htmlResponse);

     NSLog(@"Now log into Facebook and look at your profile & photo albums...");

   } 
```

# android - 为什么 strftime() 将字符串插入整数列

> ID：10480720
> 
> 赞同：1
> 
> 时间：2012-05-07T10:48:57.163
> 
> 标签：android, sqlite

我有一个“已创建”列，它是 INTEGER，这就是我将 sqlite 日期插入其中的方式：

```
 ContentValues vals = new ContentValues();
 vals.put(Column._CREATED_DATE, "strftime('%s','now')");
 db.insert(Table.ARTICLE.name, null, vals); 
```

令人难以置信的是，他将`strftime('%s','now')`字符串插入 INTEGER 列！

有没有搞错？

编辑：当我`insert into article (created) values (strftime("%s","now"))`在 SQLite 浏览器中运行时，会插入正确的整数值......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T13:08:28.203

改为向您的表添加默认值，例如

```
CREATE TABLE article (
    _id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT,
    _created_date INTEGER DEFAULT (strftime('%s', 'now'))
); 
```

如果您在创建行时未设置其列值，这会将 unix 纪元放入 _created_date。如果您想要一个时间戳（例如 2012-05-07 13:07:58），您可以将其定义为

```
_created_date INTEGER DEFAULT CURRENT_TIMESTAMP 
```

# java - 臭名昭著的Goto，Java，自动代码

> ID：10480722
> 
> 赞同：2
> 
> 时间：2012-05-07T10:49:23.040
> 
> 标签：java, code-generation, goto, labels, internal-class

想象一下，你有一个这样的 Java 代码：

```
public class MyClass {
    public static Object doSmthg(Object A,Object B){
        if(smthg){ //if is given has an example, it can be any thing else
            doSmthg;
            GOTO label;
        }
        doSmthg;

        label;
        dosmthg1(modifying A and B);
        return an Object;
    }
} 
```

我正在自动生成代码。当生成器在生成 goto 的那一刻到达时（并且它不知道它在 if 块中），它不知道之后会发生什么。

我尝试使用标签，中断，继续，但这不起作用。

我尝试使用内部类（执行 dosmthg1），但 A 和 B 必须声明为 final。问题是必须修改 A 和 B。

如果没有其他解决方案，我将不得不在我的生成器中传播更多知识。但我更喜欢更简单的解决方案。

有任何想法吗 ？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:58:21.523

```
public static Object doSmthg(Object A,Object B){
    try {
    if(smthg){ //if is given has an example, it can be any thing else
        doSmthg;
        throw new GotoException(1);
    }
    doSmthg;

    } catch (GotoException e) {
         e.decrementLevel();
        if (e.getLevel() > 0)
            throw e;
    }
    dosmthg1(modifying A and B);
    return an Object;
} 
```

可以执行 goto 异常，但要针对正确的“标签”，要么必须检查异常消息，要么考虑嵌套级别。

我不知道我是否觉得这不丑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T10:58:46.603

您可以在标签前面的块周围添加一个虚拟循环，并使用带标签的 break 作为 goto 的等效项：

```
public static Object doSmthg(Object A,Object B){
    label:
    do { // Labeled dummy loop
        if(smthg){ //if is given has an example, it can be any thing else
            doSmthg;
            break label; // This brings you to the point after the labeled loop
        }
        doSmthg;
    } while (false); // This is not really a loop: it goes through only once
    dosmthg1(modifying A and B);
    return an Object;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T11:00:22.987

如果你想跳过某些东西，像这样：

```
A
if cond goto c;
B
c: C 
```

你可以这样做

```
while (true) {
    A
    if cond break;
    B
}
C 
```

# ios - 为 iOS 生成带有两个参数的按钮网格

> ID：10480727
> 
> 赞同：2
> 
> 时间：2012-05-07T10:49:33.633
> 
> 标签：ios, interface-builder, uibutton

我需要为 iOS 应用程序生成一个按钮网格。每个按钮需要两个参数：列数和行数。按钮也将有两种状态，激活和停用。

加载应用程序时，我希望有 21 行和 16 列。屏幕上的某个地方还会有一个按钮，上面写着“添加列”，每次单击它都会添加 4 个额外的列。

有什么建议我应该怎么做？我可以从在 IB 中添加前 21*16 按钮开始，但这是否允许我稍后用额外的列来扩展它，以及如何？

*编辑：赏金只是开始奖励 mbm30075，不需要新的答案*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T10:59:18.527

这可以使用滚动视图`UIScrollView`和使用两个`for`循环在运行时添加所需按钮来实现，例如

```
for(int col = 0; col < [max column]; col++)
{
   for(int row = 0; row < [max row]; row++)
   {
      //add buttons assigning them proper frame size
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T12:49:26.013

我相信这是一个更完整的解决方案。这是我为测试编写的 .h/.m 对：

***视图控制器.h***

```
#import <UIKit/UIKit.h>
@interface ViewController : UIViewController 
@property (assign, nonatomic) int numColumns;
@property (assign, nonatomic) int numRows;
@property (strong, nonatomic) NSMutableArray *buttonsArray;
@property (strong, nonatomic) IBOutlet UIScrollView *scrollView;
@property (strong, nonatomic) IBOutlet UIButton *addButtons;
@property (strong, nonatomic) IBOutlet UIView *buttonsView;
- (IBAction)addFourMoreColumns;
@end 
```

***视图控制器.m***

```
#import "ViewController.h"
@implementation ViewController
@synthesize addButtons;
@synthesize buttonsArray;
@synthesize buttonsView;
@synthesize numColumns;
@synthesize numRows;
@synthesize scrollView;
- (void)viewDidLoad {
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    [self setButtonsArray:[NSMutableArray array]];
    [self setNumColumns:16];
    [self setNumRows:21];
    [self layoutButtons];
}
- (void)layoutButtons {
    static int width  = 100;
    static int height = 37;
    static int buffer = 8; // space between buttons (horiz. & vert.)
    static int margin = 20;
    CGPoint topLeft = CGPointMake(margin,margin); // standard "top left" in iOS
    // Since you appear to be wanting to modify the number of columns,
    // I'm going to make the multi-dimension array an array of columns, 
    // with each column containing an array of buttons (representing the rows)

    // Iterate through how many columns SHOULD exist ([self numColumns])
    for (int i = 0; i < [self numColumns]; i = i + 1) {
        // Check if this "column" exists (does this index exist in [self buttonsArray]?)
        if (i >= [[self buttonsArray] count]) {
            // It doesn't exist, so we need to add a blank array
            [[self buttonsArray] addObject:[NSMutableArray array]];
        }
        NSMutableArray *column = [[self buttonsArray] objectAtIndex:i];
        // Now, we iterate through how many rows/buttons SHOULD exist ([self numRows])
        for (int j = 0; j < [self numRows]; j = j + 1) {
            // Check if this "row"/"cell"/"button" exists
            if (j >= [column count]) {
                // It doesn't exist, so we need to add a new button AND PLACE IT!
                // Of course, you need to make your button type correctly
                // This is just standard button code...
                UIButton *btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
                [btn setFrame:CGRectMake(topLeft.x,topLeft.y,width,height)];
                // Do whatever else you need to do with the button...
                // Set title...
                [btn setTitle:[NSString stringWithFormat:@"(%d,%d)", i + 1, j + 1] forState:UIControlStateNormal];
                // Add target actions...
                [btn addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
                // Add the button to the view
                [[self buttonsView] addSubview:btn];
                // Add the button to the array
                [column addObject:btn];
            }
            // Increment topLeft to the next "row" for correct button placement...
            topLeft = CGPointMake(topLeft.x, topLeft.y + height + buffer);
        }
        // Increment topLeft to the next "column" for correct button placement...
        topLeft = CGPointMake(topLeft.x + width + buffer, margin);
    }
    // So, I'm assuming your "add columns" button will be placed equivalent to 
    // "(columnCount + 1, 1)", or at the top of the screen, just to the right
    // of the right-most column of buttons
    // [self addButtons] is the property to the UIButton that calls [self addFourMoreColumns]
    [[self addButtons] setFrame:CGRectMake(topLeft.x, topLeft.y, [[self addButtons] frame].size.width, [[self addButtons] frame].size.height)];
    // Now, update the view that holds the buttons to give it a new size (based on the buttons added)
    CGRect viewFrame = CGRectMake(0, 0, CGRectGetMaxX([[self addButtons] frame]) + buffer, 20 + ([[self buttonsArray] count] * (height + buffer)));
    [[self buttonsView] setFrame:viewFrame];
    [[self scrollView] setContentSize:viewFrame.size];
    // Redraw the view...
    [[self view] setNeedsDisplay];
}
- (IBAction)addFourMoreColumns {
    [self setNumColumns:[self numColumns] + 4];
    [self layoutButtons];
}
// Shows in the log which button you pressed: "(col, row)"
- (void)buttonPressed:(id)sender {
    for (int i = 0; i < [[self buttonsArray] count]; i = i + 1) {
        NSMutableArray *col = [[self buttonsArray] objectAtIndex:i];
        for (int j = 0; j < [col count]; j = j + 1) {
            if (sender == [col objectAtIndex:j]) {
                NSLog(@"button (%d,%d) pressed", i + 1, j + 1);
                break;
            }
        }
    }
}
@end 
```

Xib 设置是基本的：

```
View                 // tied to [ViewController view]
|
--->ScrollView       // tied to [ViewController scrollView]
    |
    --->View         // tied to [ViewController buttonsView]
        |
        --->UIButton // tied to [ViewController addButtons] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T12:16:30.450

您将需要使用 2 个循环以编程方式添加按钮。还要识别按钮为它们分配标签，这些标签是由列号和行号组合而成的数字。例如：- 第 1 行和第 1 列的按钮的标签可能为 11。使用标签值，您可以识别单击了哪个按钮并执行相应的操作。

# visual-studio-2010 - 水晶报表登录失败 - 数据库没有时提示用户/通过

> ID：10480729
> 
> 赞同：0
> 
> 时间：2012-05-07T10:49:40.280
> 
> 标签：visual-studio-2010, login, crystal-reports

即使我的数据库没有用户名和密码，我的水晶报表查看器也会提示我登录。当我将用户名和密码留空时，它仍然无法登录。

请朋友们帮帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T05:16:23.457

谢谢aMazing，但我找到了解决方案

我在某处读到，如果源表未填充水晶报告提示登录，但是当我试图将填充表设置为报告的数据源时，出现错误，我认为 crdb_adoplus.dll 未找到它是因为安装错误下面的链接解决了问题

[http://www.sourcehints.com/articles/how-to-use-crystal-report-2010-in-vs2010.html](http://www.sourcehints.com/articles/how-to-use-crystal-report-2010-in-vs2010.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T04:58:30.720

在将数据集添加到报表之前，有一个复选框显示集成安全性。将您的 ID 和密码留空，然后选中该复选框并尝试。或许能解决你的问题。

# c# - 使用 XamlReader 加载带有 xml:space="preserve" 的 xaml 时出现奇怪的问题

> ID：10480730
> 
> 赞同：-1
> 
> 时间：2012-05-07T10:49:41.513
> 
> 标签：c#, silverlight, xaml, xamlreader

当使用 XamlReader 从预定义的 xaml 文件加载我的应用程序菜单时，我发现了一个非常奇怪的问题。我需要定义的属性`xml:space="preserve"`和xaml是这样的：

```
<m:MenuManager>
   ...
    <m:Resource>
        <m:Resource.ResourceTitle>
            <sys:String xml:space="preserve">Click the Button&#xA;(InvokeCommandAction)&#xA;View</sys:String>
        </m:Resource.ResourceTitle>
    </m:Resource>
...
</m:MenuManager> 
```

将 xaml 内容加载到字符串并用于`XamlReader.Load`将其转换为 MenuManager 对象。第一次`XamlReader.Load`调用该方法时，只会返回 tag 内的单词`<sys:String xml:space="preserve">`，第二次才返回预期的结果。

```
 var uri = new Uri("/Sample;component/Assets/Menu.xaml", UriKind.Relative);
        var info = Application.GetResourceStream(uri);
        string xaml = null;
        using (StreamReader reader = new StreamReader(info.Stream))
        {
            xaml = reader.ReadToEnd();
        }
        //when the first time load, only a string value of
        //"Click the Button&#xA;(InvokeCommandAction)&#xA;View" is returned
        var temp1 = XamlReader.Load(xaml); 

        //when the second time load, all menu content loaded successfully and
        //converted to the object of MenuManager 
        readXaml = XamlReader.Load(xaml) as MenuManager; 
```

当我删除属性`xml:space="preserve"`或将其更改为它时，`xml:space="default"`它会正常工作，并且我可以通过`XamlReader.Load`只调用一次方法来获取 MenuManager 的对象。但是我真的需要在我的页面上保留空格，这里的代码看起来很奇怪。有人可以解释一下吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-02T06:00:00.817

如果您不想添加`xml:space="preserve"`到所有元素，可以使用此附加参数`XamlReader.Load`：

```
XamlReader.Load(xaml, new ParserContext() { XmlSpace = "preserve" }); 
```

# authentication - $facebook->getUser() 总是返回 0

> ID：10480733
> 
> 赞同：0
> 
> 时间：2012-05-07T10:49:55.820
> 
> 标签：authentication, facebook-canvas

我试图建立 facebook 游戏，但我坚持保存分数。

我已经完全按照[http://developers.facebook.com/docs/guides/games/getting-started/#step4](http://developers.facebook.com/docs/guides/games/getting-started/#step4)中的内容进行了尝试，但它根本不会保存分数。

我认为问题出在此清单中：

```
$facebook = new Facebook(array(
      'appId' => $app_id,
      'secret' => $app_secret,
    ));

  $user = $facebook->getUser();
  print('user : '.$user.' '); 
```

尽管我的 fb 帐户已登录，但始终为 0。由于这个问题，我无法保存或更新高分。**我需要帮助才能找到检索 $user 的方法**。

我真的很感激对我的每一个好处。谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T11:40:53.563

你有这部分吗？

```
// If the user has not installed the app, redirect them to the Auth Dialog
   if (!$user) {
     $loginUrl = $facebook->getLoginUrl(array(
       'scope' => $scope,
       'redirect_uri' => $app_url,
     ));

     print('<script> top.location.href=\'' . $loginUrl . '\'</script>');
   } 
```

它需要登录用户并获取他的数据。

这是很好的解释[http://developers.facebook.com/docs/authentication/server-side/](http://developers.facebook.com/docs/authentication/server-side/)

# android - ListActivity 中某个项目的 SharedPreferences

> ID：10480735
> 
> 赞同：0
> 
> 时间：2012-05-07T10:50:02.527
> 
> 标签：android, sharedpreferences

我有一个 ListActivity 包含从 JSON 对象中获取的项目。当用户单击其中一个项目时，每个项目都会在 DetailActivity 类中显示其详细信息和属性。

所以我有一个 Activity 来显示 ListActivity 中所选项目的属性。在 DetailActivity 类上有一个 CheckBox，用于将 Item 标记为“Favorite”。所以每次勾选DetailActivity里面的CheckBox，当用户再次打开那个Item的DetailActivity时，总是勾选CheckBox的状态。

到目前为止，我通过 SharedPreferences 放置布尔值来实现。但是我的方法只保存了 DetailActivity 类的状态，而不管哪个 Item 被选中为收藏。所以它不保存某个项目的状态，只保存 DetailActivity 类的状态。

我怎么能这样做？

这是我的片段：

```
final CheckBox cb_fav = (CheckBox) findViewById(R.id.cb_tool_fav);
        cb_fav.setOnClickListener(this);
        boolean isChecked = getBooleanFromPreferences("isChecked");
        Log.i("start",""+isChecked);
        cb_fav.setChecked(isChecked);

        cb_fav.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener(){
            @Override
            public void onCheckedChanged(CompoundButton buttonView,
            boolean isChecked) {
                Log.i("boolean",""+isChecked);
                DetailsActivity.this.putBooleanInPreferences(isChecked,"isChecked");

            }
            });

    }

     public void putBooleanInPreferences(boolean isChecked,String key){
            SharedPreferences sharedPreferences = this.getPreferences(Activity.MODE_PRIVATE);
            SharedPreferences.Editor editor = sharedPreferences.edit();
            editor.putBoolean(key, isChecked);
            editor.commit();        
        }
        public boolean getBooleanFromPreferences(String key){
            SharedPreferences sharedPreferences = this.getPreferences(Activity.MODE_PRIVATE);
            Boolean isChecked = sharedPreferences.getBoolean(key, false);
            return isChecked;       
        } 
```

这是我要提取到我的 ListActivity 的对象类，这些是在 DetailsActivity 类中显示的属性。

```
public class VideoLocation {

    public String deleted_at = null;
    public int documentary_video_length = -1;
    public int id = -1;
    public double latitude = 0d;
    public double longitude = 0d;
    public int position = -1;
    public String updated_at = null;
    public String name = null;
    public String text = null;
    public String documentary_video_url = null;
    public String documentary_thumbnail_url = null;
    public String audio_text_url = null;
    public Footage[] footages = null;

    public VideoLocation(){

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:27:23.687

当然，您需要保存每个项目的复选框状态。

从属性来看，我相信“id”属性对于每个对象都是唯一的。因此，您可以通过以下方式通过“id”属性保存对象的状态：

```
putBooleanInPreferences(check_uncheck,String.valueOf(videoLocationObject.id)); 
```

现在，每当您显示对象时，您都可以通过以下方式检索状态：

```
boolean check_uncheck=getBooleanFromPreferences(String.valueOf(videoLocationObject.id)); 
```

如果“id”属性不是唯一的，则选择每行唯一的属性作为 SharedPreferenceStorage 的键。

**你的代码：**

```
final CheckBox cb_fav = (CheckBox) findViewById(R.id.cb_tool_fav);

        boolean isChecked = getBooleanFromPreferences(String.valueOf(yourObject.id));
        Log.i("start",""+isChecked);
        cb_fav.setChecked(isChecked);
cb_fav.setOnClickListener(this);

        cb_fav.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener(){
            @Override
            public void onCheckedChanged(CompoundButton buttonView,
            boolean isChecked) {
                Log.i("boolean",""+isChecked);
                putBooleanInPreferences(isChecked,String.valueOf(yourObject.id));

            }
            }); 
```

我希望这对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:27:06.453

据我了解，您必须将多个项目设为收藏夹。为此，您必须在共享首选项中使用字符串数组或使用数据库来存储列表项的状态。如果您正在使用共享首选项数组，您可以查看此[链接](https://stackoverflow.com/questions/6761885/array-of-strings-in-sharedpreferences)

# mysql - Mqsql 查询以从每个组中选择行数

> ID：10480737
> 
> 赞同：2
> 
> 时间：2012-05-07T10:50:15.943
> 
> 标签：mysql, select-query

我想通过mysql查询从每个组中选择3条记录我的表结构是这样的 -

```
id | customer | catId
---------------------
 1 | Joe      | 2
 2 | Sally    | 2
 3 | Joe      | 2
 4 | Sally    | 2
 5 | Joe      | 2
 6 | Sally    | 3
 7 | Joe      | 3
 8 | Sally    | 3
 9 | Joe      | 3
10 | Sally    | 4
11 | Joe      | 4
12 | Sally    | 4 
```

我想为每个不同的 catId 方法选择 3 条记录

```
id | customer | catId
---------------------
 1 | Joe      | 2
 2 | Sally    | 2
 3 | Joe      | 2
 6 | Sally    | 3
 7 | Joe      | 3
 8 | Sally    | 3
10 | Sally    | 4
11 | Joe      | 4
12 | Sally    | 4 
```

我尝试了这个查询，但它只为每个不同的 catId 显示一条记录。l

> SELECT * FROM `table`GROUP BY CatIds

我得到

```
id | customer | catId
---------------------
 1 | Joe      | 2
 6 | Sally    | 3
10 | Sally    | 4 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-05-07T11:08:57.227

您可以只运行 3 个查询。

```
SELECT * FROM table WHERE catId=2 LIMIT 3
SELECT * FROM table WHERE catId=3 LIMIT 3
SELECT * FROM table WHERE catId=4 LIMIT 3 
```

# iphone - 如何处理 CellForRowAtIndexpath 方法

> ID：10480738
> 
> 赞同：0
> 
> 时间：2012-05-07T10:50:23.057
> 
> 标签：iphone, ipad, uitableview

我有一个表格视图，其中一个部分有**15 行**。因此，当表视图被加载时，它只显示**前 9 行**，我使用 CellForRowAtIndexpath 方法检查了它，但我希望在此方法中为 viewload 方法调用所有 15 行。请帮帮我。

提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:53:14.420

这取决于您设置的行数

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
```

如果您有一个数组，则返回 `[arr count];`为行数，如果您想要静态行，则`return 15;`在此方法中使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T11:25:39.583

您使用这些方法，或者如果您希望所有单元格都位于第一次视图的前面，那么您应该使用最后一个方法降低单元格的高度。并且还要检查您的数组他有多少值。

```
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView 
{
return 1;
}

-(NSInteger)tableView:(UITableView *)tableView  numberOfRowsInSection:(NSInteger)section 
{
return [Array count];

}
-(UITableViewCell *)tableView:(UITableView *)tableView
     cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
   static NSString *CellIdentifier = @"Cell";
   UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
   if (cell == nil) {
    cell = [[[UITableViewCell alloc]
             initWithStyle:UITableViewCellStyleSubtitle
             reuseIdentifier:CellIdentifier]
            autorelease];
 }
   cell.textLabel.text=[Array objectAtIndex:indexPath.row];

    return cell;
}
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 20;//use this method for cell height
} 
```

# html - 解析自定义 HTML 标签

> ID：10480740
> 
> 赞同：2
> 
> 时间：2012-05-07T10:50:35.287
> 
> 标签：html, parsing, custom-tag

我有这样的自定义标签：

```
<!--a_word_with_numbers2323-->
    Some content here
<!--/a_word_with_numbers2323--> 
```

我正在尝试使用此模式查找所有标签：

```
<!--[a-z_]+[0-9]*-->.*<!--/[a-z_]+[0-9]*--> 
```

它正在工作。

但是，如果我有这样的事情：

```
<!--a_word_with_numbers2323-->
    <--some_embedded_tag-->asafssaf<--/some_embedded_tag-->
<!--/a_word_with_numbers2323--> 
```

如何编写可以防止嵌入标签的正则表达式。因此，首先会找到内部标签，然后在我删除这些标签（替换为空字符串）后，会找到外部标签。我想要这样的东西：

```
<!--[a-z_]+[0-9]*-->[^(<!--)]*<!--/[a-z_]+[0-9]*--> 
```

Where`(<!--)`应该被解释为一个完整的表达式，而不是被限制的字符（ < ! - and ）

我试图谷歌，但我没有发现任何有用的东西，我知道我不应该用正则表达式解析 HTML，但我正在解析自定义标签，而不是 HTML。

# javascript - 字符串化和解析 JSON（序列化对象结构）和反序列化，将 JSON 字符串转换为对象结构？

> ID：10480743
> 
> 赞同：1
> 
> 时间：2012-05-07T10:50:45.377
> 
> 标签：javascript, json, object

谁能指导我如何在 Javascript 中执行此操作？使用两种方法创建一个对象。它应该对 JSON 进行字符串化和解析，即它有一个序列化对象结构的方法，以及另一个反序列化方法，将 JSON 字符串转换为对象结构。

方法应该处理循环引用，而不是 kracha 或 retunera 一个空结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T10:54:36.393

采用`JSON.parse`

```
var originalObject = { foo: "bar" };
var jsonString = JSON.stringify( originalObject ); // "{foo:'bar'}"
var objectFromString = JSON.parse( jsonString );   // { foo: "bar" } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T10:54:12.807

错误.. [JSON.parse 和 JSON.stringify](https://developer.mozilla.org/En/Using_native_JSON#Parsing_JSON.C2.A0strings)？[这些天](http://caniuse.com/#search=json)它几乎得到了支持。

# sql - SQL 更新查询错误

> ID：10480746
> 
> 赞同：3
> 
> 时间：2012-05-07T10:50:51.170
> 
> 标签：sql, sql-server, sql-server-2008, tsql

以下查询抛出错误。请帮助我并告诉我错误是什么。

此查询返回以下结果：

```
string sqlcmd = "UPDATE branch SET brac_subj = " + query_data + " WHERE (braid = "+dd_branch+")";

     UPDATE branch SET brac_subj = "'11' , '12' , '13' , '14' , '15' , '16' , '17' , '18' , '19' , '20' , '21'" WHERE (braid = 1) 
```

如何以以下格式存储字符串：

```
'11' , '12' , '13' , '14' , '15' , '16' , '17' , '18' , '19' , '20' , '21' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T19:21:20.030

您遇到 Enigma 的问题称为 Escaping。由于单引号是受限制的字符，并且定义了 SQL 中字符串的开头，因此您不能在同一个字符串中按原样使用它。

除此之外，您似乎认为 SQL Server 使用双引号来定义字符串，而事实并非如此。

此语法不起作用：

```
UPDATE branch SET brac_subj = "'11' , '12' , '13'" 
```

此语法将起作用：

```
UPDATE branch SET brac_subj = '''11'' , ''12'' , ''13''' 
```

诀窍是使用您的编程代码在值周围添加那些额外的撇号，从而得到其他人建议的答案。

此外，测试此语法的一种简单方法是使用简短的 select 语句：

```
SELECT "'11' , '12' , '13'" 
```

对比

```
SELECT '''11'' , ''12'' , ''13''' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T11:05:19.690

如果你想要它作为一个字符串。这应该有效：

```
query_data="'"+query_data.Replace("'","''")+"'"; 
```

如果你想要他们这样`"11 , 12 , 13 , 14 , 15 , 16 , 17 , 18 , 19 , 20 , 21"`。然后这样做：

```
query_data="'"+query_data.Replace("'","")+"'"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T11:03:27.593

用两个替换每个撇号，如果你想要“duncan o'tool”，你应该在 sql 查询中使用 'duncan o''tool'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T11:05:05.977

如果这是您要插入的数据类型（即不带单引号），请尝试此操作

```
UPDATE branch SET brac_subj = '11,12,13' WHERE (braid = 1) 
```

如果你想插入单引号以及用双引号替换单引号

```
UPDATE branch SET brac_subj = '"11","12","13"' WHERE (braid = 1) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-28T14:39:17.850

最简单的方法是使用：

SET QUOTED_IDENTIFIER OFF

更新分支 SET brac_subj = "'11' , '12' , '13'"

当 SET QUOTED_IDENTIFIER 为 ON 时，标识符可以用双引号分隔，文字必须用单引号分隔。当 SET QUOTED_IDENTIFIER 为 OFF 时，标识符不能被引用并且必须遵循标识符的所有 Transact-SQL 规则。有关详细信息，请参阅[数据库标识符](http://msdn.microsoft.com/en-us/library/ms175874.aspx)。

# video - 从视频标签中删除控件

> ID：10480748
> 
> 赞同：0
> 
> 时间：2012-05-07T10:50:59.047
> 
> 标签：video, html5-video

我想知道如何永久禁用视频标签上的控件。目前我有一个 5 秒的视频作为学校项目网站的介绍，我希望视频没有任何控件（没有重播，没有暂停按钮或类似的东西）。

有谁知道如何做到这一点？在网上搜索了很多，但我似乎找不到答案。

一切顺利！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T11:02:55.317

`controls`是一个布尔属性，如果不包含，则保持未设置。用户不再有播放按钮，所以不要忘记设置`autoplay`属性。

```
<video autoplay>
  <source ...>
</video> 
```

# php - 选择查询以获取所有值以及不同的值

> ID：10480749
> 
> 赞同：0
> 
> 时间：2012-05-07T10:51:02.167
> 
> 标签：php, mysql

嗨，我正在尝试从同一个表 A 中获取不同的值和其他一些数据。我试过的代码是

```
$query2="select DISTINCT(from_id) from messages where to_id='$userid' order by messagedate DESC";
$res2=mysql_query($query2);
while($row2=mysql_fetch_row($res2))
{
$query="select * from messages where to_id='$userid' and from_id='$row2[0]' ORDER BY messagedate DESC" 
```

使用上述方法我无法过滤不同的值，因此我尝试这样

```
select msgid,DISTINCT(from_id) from messages where to_id='21' order by messagedate DESC 
```

它是一个错误。需要帮助请

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:58:18.993

像这样试试

```
select DISTINCT(from_id),msgid from messages where to_id='21' order by from_id DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T10:53:51.230

查看`GROUP BY`声明

我认为你需要类似的东西

```
SELECT    msgid, from_id 
FROM      messages
WHERE     to_id = 21
GROUP BY  from_id
ORDER BY  messagedata DESC 
```

[http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)

# java - 如何获取调度任务调用批处理文件的名称，并将其传递给 Java 程序？

> ID：10480750
> 
> 赞同：1
> 
> 时间：2012-05-07T10:51:03.867
> 
> 标签：java, batch-file, windows-task-scheduler

假设我有多个在不同时间运行的计划任务，但所有这些任务都在运行一个常见的 Windows 批处理文件。该批处理文件依次执行 Java 程序。

我希望我的批处理文件获取调用它的计划任务的名称，并将其名称传递给我的批处理正在执行的程序。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T11:03:22.797

您可以将计划任务的名称作为参数传递给批处理文件。如果没有外部的帮助，您无法从批次内部弄清楚。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T13:40:20.407

就像乔伊说的，如果没有外界的帮助，就没有办法做到这一点。

您可以为每个任务创建一个单独的批处理实例，每个任务中都有一个参数指定分配哪个任务来运行它。您还可以像这样创建较小的批次：

```
CALL mybatch.bat 1st_task 
```

这会将您的第一个任务的名称作为`%1`变量传递到批处理中。

你也可以让你的批处理根据它使用变量运行的时间来计算它`%time%`，但这需要一些解析我敢肯定，因为你不能总是保证它同时运行到第二个。

它可能看起来像这样：

```
if '%time:~0,5%'=='10:30' set var=1st_task
if '%time:~0,5%'=='12:00' set var=2nd_task 
```

等等

（最后一个假设您的任务仅在一天中的指定时间运行......如果由于某种原因它们在不同的时间执行，这将不起作用）

# ruby-on-rails - rails 3.2：无法在生产模式下运行

> ID：10480754
> 
> 赞同：0
> 
> 时间：2012-05-07T10:51:36.707
> 
> 标签：ruby-on-rails, ruby-on-rails-3, production-environment

在生产模式下运行应用程序时出现问题。我想将其设置为默认值以将其作为生产运行。

```
RAILS_ENV="production" 
```

我在 application.rb 中添加了上面的行，但没有运气。任何想法如何使它成为可能。当我将应用程序上传到 heroku 时，它仍在开发中运行，因此我无法将我的数据库分开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:58:35.070

application.rb 不是定义环境变量的最佳位置。在 Heroku 上，您可以使用 heroku config 定义 RAILS_ENV：添加 RAILS_ENV=production

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T10:57:32.077

添加`RAILS_ENV="production"`到`application.rb`不会有帮助。阅读[Heroku 文档](https://devcenter.heroku.com/articles/rails3)以了解入门。

# iphone - 电子邮件中的数据附件？

> ID：10480766
> 
> 赞同：0
> 
> 时间：2012-05-07T10:52:13.990
> 
> 标签：iphone, objective-c, nsmutablearray, nsdata, mfmailcomposeviewcontroller

我将我的对象保存在 NSData 格式的 NSMutablearray 中。不，我尝试附加到电子邮件正文中。这里是代码。

```
 - (IBAction)sendEmail
     {

   if ([MFMailComposeViewController canSendMail])
  {
       NSArray *recipients = [NSArray arrayWithObject:@"example@yahoo.com"];
       MFMailComposeViewController *controller = [[MFMailComposeViewController 
            alloc] init];
       controller.mailComposeDelegate = self;
       [controller setSubject:@"Iphone Game"];
       NSString *string = [viewArray componentsJoinedByString:@"\n"];
       NSString *emailBody = string; 
       NSLog(@"test=%@",emailBody);
       [controller setMessageBody:emailBody isHTML:YES];
       [controller setToRecipients:recipients];
       [self presentModalViewController:controller animated:YES];
       [controller release];
    }
else 
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Alert" 
            message:@"Your device is not set up for email." delegate:self 
            cancelButtonTitle:@"OK" otherButtonTitles: nil];
    [alert show];   
    [alert release];
}

 } 
```

我没有收到任何错误，但在 E-mail.in NSLog 中没有看到任何数据我看到了这个..2012-05-07 15:33:22.984 Note List[273:207] test=>]请建议任何一种更好的解决方案我如何在电子邮件正文中附加我的 NSMutableArray 数据..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T10:59:49.523

我不清楚你的问题，试试这种方式来设置你的数据。并在将其传递给作曲家之前检查您要设置的值，

看到这个

```
MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
    picker.mailComposeDelegate = self;

    NSString *mSubject;

    if(isInvite)
    {
        mSubject=@"TAPP Invitation";
    }
    else 
    {
        mSubject= @"TAPP email";
    }

    [picker setSubject:mSubject];

    NSString *mBody;

    if(isInvite)
    {
        NSString *pTappId=[[DataModel sharedDataModel] getValueForKey:USER_TAPP_ID];
        NSString *currentUserName=[[DataModel sharedDataModel] getValueForKey:CURRENT_USER_NAME];
         mBody=[NSString stringWithFormat:@"<HTML><BODY>Hi,<br><br>We already know one another, and I would like us to keep in touch.<br><br>Let's connect through TAPP (<a href=\"http://download.mytapp.com\">Download Here</a>) a smarter, private way to exchange and manage contact information.<br><br>Join TAPP and secure your preferred, unique ID before it is too late, and then connect with me. My TAPP ID is %@.<br><br>For more information, <a href=\"http://www.mytapp.com\">click here</a><br><br>Regards,<br><br>%@</BODY></HTML>",pTappId,currentUserName];
    }
    else 
    {
        mBody= [NSString stringWithFormat:@"<HTML><BODY><br /><br />Connected by <a href=http://www.mytapp.com>TAPP</a></BODY></HTML>"];
    }

    // Set up recipients
    NSArray *toRecipients = [NSArray arrayWithObject:selectedEmailId]; 
    //NSArray *toRecipients = [NSArray arrayWithObject:@""]; 

    [picker setToRecipients:toRecipients];

    // Attach an image to the email
    //NSString *path = [[NSBundle mainBundle] pathForResource:@"rainy" ofType:@"png"];

    //NSData *myData = UIImagePNGRepresentation(photo.image);
    //[picker addAttachmentData:myData mimeType:@"image/png" fileName:@"abc.png"];

    // Fill out the email body text
    NSString *emailBody = mBody;
    [picker setMessageBody:emailBody isHTML:YES];

    [self presentModalViewController:picker animated:YES];

    [picker release]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T11:12:47.703

如果您尝试将数据作为标准电子邮件附件附加，请使用：

```
NSData *data = UIImageJPEGRepresentation(artworkImageView.image, 0.0);
[picker addAttachmentData:data mimeType:@"image/jpeg" fileName:@"Photo.jpeg"]; 
```

可以是您想要的`data`任何内容，只需提供适当的 mime 类型和文件名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T11:54:55.470

也许您对 viewArray 的定义是错误的？

在您的 .h 文件中：

```
@property(nonatomic, retain) NSMutableArray *viewArray; 
```

在您的 .m 文件中：

```
@synthesize viewArray; 
```

请查看方法“componentsJoindedByString”的苹果文档，因为我找不到非常清楚的错误。

我使用 api 的 viewArray 初始化测试：（效果很好）

```
- (IBAction)sendEmail {

  self.viewArray = [NSArray arrayWithObjects:@"here", @"be", @"dragons", nil];

  if ([MFMailComposeViewController canSendMail])
  {
    NSArray *recipients = [NSArray arrayWithObject:@"example@yahoo.com"];
    MFMailComposeViewController *controller = [[MFMailComposeViewController 
                                            alloc] init];
    controller.mailComposeDelegate = self;
    [controller setSubject:@"Iphone Game"];

    //is anything in the array?
    NSLog(@"viewArray: %@", viewArray);

    NSString *string = [viewArray componentsJoinedByString:@"\n"];
    NSString *emailBody = string; 
    NSLog(@"test=%@",emailBody);
    [controller setMessageBody:emailBody isHTML:YES];
    [controller setToRecipients:recipients];
    [self presentModalViewController:controller animated:YES];
    [controller release];
  }
  else 
  { 
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Alert" 
                                                message:@"Your device is not set up for     email." delegate:self 
                                      cancelButtonTitle:@"OK" otherButtonTitles: nil];
    [alert show];   
    [alert release];
  } 
} 
```

# asp.net - Response.Redirect 大新闻

> ID：10480776
> 
> 赞同：0
> 
> 时间：2012-05-07T10:52:43.853
> 
> 标签：asp.net, response.redirect

在我的 asp.net 应用程序中使用 Response.Redirect 时出现了一个奇怪的现象，事情是这样的：

```
Response.Redirect("~/somepage.aspx"); 
```

当页面位于虚拟目录的根目录中时，获取（查找）页面大约需要 15 毫秒

```
Response.Redirect("~/somedir/somepage.aspx"); 
```

当我将页面移动到一个目录时，几乎需要2秒才能获取（找到）页面，浏览网站的时间难以忍受，我尝试了很多方法来修复它最终仍然不知道为什么会发生这种情况，各位好心人能否给我一些建议，非常感谢。顺便说一句， somepage.aspx 里面什么都没有，除了正文节点中的两个词：“帮助我”。

ps somedir中有72个aspx页面，根目录中有大约10个aspx页面。

我找到了一些线索，我创建了一个只有 somepage.aspx 的新目录 newdir，然后再次获取页面所花费的时间是 15 毫秒，所以测试使我得出这个结论：Response.Redirect 工作的时间是基于关于目录中的文件数量，也许我错了，但这是我得到的唯一事实。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:57:08.090

据我所知，这不是 Response.Redirect 的问题。

实际上问题将基于页面上的内容和控件，这需要时间来加载所有信息。

# html - Chrome中的定位问题（其他浏览器工作正常）

> ID：10480777
> 
> 赞同：1
> 
> 时间：2012-05-07T10:52:57.057
> 
> 标签：html, css, google-chrome, css-float

我做了3个截图来解释它，请查看所有3个然后点击我的最后一个链接：

![](../Images/1cc01e63a0cecc92f519429577319bda.png)

![](../Images/d48681b32b20b48c6e0ebae74ebb5bfe.png)

![](../Images/46479e39c0eda722997a54ff4736e509.png)

如您所见，Chrome 正在将元素 #4 (class=".newsline2") 向下推。

Firefox 和 IE9 完美地显示了这一点。

有人可以帮我解决这个问题吗？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T11:10:11.867

当元素是绝对的时，它需要适当的宽度和高度以及上下左右位置。添加`height: 16px`而不是自动。它也可以在 Chrome 中运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:13:10.747

向 CSS 规则“.contentContainer h2”添加高度，如下所示

```
.contentContainer h2 {
height: 16px;
...
...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T11:15:08.157

尝试添加这个：

```
.newsline2 { position: absolute; right:0; top:0; } 
```

而不是`float:right`您当前正在使用的。

# jquery - 使用 .not() 和 .serialize()

> ID：10480779
> 
> 赞同：1
> 
> 时间：2012-05-07T10:53:05.600
> 
> 标签：jquery, html, forms, serialization

我使用[.serialize()](http://api.jquery.com/serialize/)函数创建一个键 -> 值对字符串，以使用 HTML 表单更新数据库。最近我一直想从数据字符串中省略一个输入字段。我认为[.not()](http://api.jquery.com/not/)函数应该可以工作，但它没有（就我在这里使用它的方式而言）。请参阅小提琴以获取问题示例。[http://jsfiddle.net/9RbZ4/](http://jsfiddle.net/9RbZ4/)

在此示例中，有四个字段，名称分别为 a、b、c 和 d。我希望从序列化函数中省略 name="a" 的字段。我该怎么做？请注意我希望引用元素的名称属性。

我该怎么做呢？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T10:57:11.367

您的调用 $('form') 选择所有表单元素，然后调用 .not('[name="a"]') 将过滤掉所有具有属性 name="a" 的表单元素，但它们都没有这个属性。

你想要达到的是

```
$('form input').not('[name="a"]').serialize(); 
```

上面的代码选择表单元素内的所有输入元素，然后过滤掉具有给定名称的输入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T11:01:38.073

这看起来确实有点奇怪，因为您希望不过滤掉您不想要的位。

但是，您选择的是表单本身而不是输入，这就是它无法过滤的原因。

```
$('form *[name]').not('[name="a"]').serialize(); 
```

应该做的伎俩。

注意 - 我使用 *[name] 因为您可能涉及输入以外的元素......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T11:04:19.153

```
var the_data = $('form :input[name!="a"]').serialize(); 
```

**[*演示*](http://jsfiddle.net/9RbZ4/2/)**

# python - 路径突然被反斜杠

> ID：10480786
> 
> 赞同：0
> 
> 时间：2012-05-07T10:53:26.680
> 
> 标签：python, windows, file, path, size

我正在尝试获取获取目录大小的功能。

```
def fsize(path, returntype='b'):
    size = 0
    if isdir(path):
        for root, dirs, files in walk(path):
            for file in files:
                size += getsize(join(path,file))

    else:
        print abspath(path)
        size = getsize(abspath(path))

    if returntype != 'b':
        return convert_size(size, returntype)
    return size

path = r"D:\Library\Daniel's_Books"

print fsize(path, 'm') 
```

我得到了这个有趣的错误：

```
size = getsize(abspath(path))
File "C:\Python27\lib\genericpath.py", line 49, in getsize
return os.stat(filename).st_size
WindowsError: [Error 2] The system cannot find the file specified: "D:\\Library\\Daniel's_Books\\cover.jpg"
D:\Library\Daniel's_Books\cover.jpg 
```

为什么它反斜杠反斜杠？我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T11:05:41.000

关于你的第一个问题

> 为什么它反斜杠反斜杠？

这只是一个展示的问题。与`\`转义字符一样，您可以在 as或 as中给出带有`\`s 的字符串。也正是以这种方式显示，换句话说：[与](http://docs.python.org/library/functions.html#repr)[函数](http://docs.python.org/library/functions.html#repr)返回的完全一样。`r'\'``'\\'`[`repr()`](http://docs.python.org/library/functions.html#repr)

顺便说一句：你的

```
path = "D:\Library\Daniel's_Books" 
```

由于同样的原因，它是有问题的：它只起作用，因为`\D`并且`\L`没有有效的转义。你最好把它写成

```
path = r"D:\Library\Daniel's_Books" 
```

作为原始字符串或

```
path = "D:\\Library\\Daniel's_Books" 
```

作为带有正确转义`\`的字符串。

* * *

然而，你的第二个问题，

> 我该如何解决这个错误？

有点棘手。

我认为你有多重递归的问题：一方面，`walk()`完全遍历树。所以从第 2 级开始，`join(path,file)`是错误的，你应该`path`用`root`. 另一方面，您`fsize()`递归调用，这可能会导致文件重复。

假设您有以下树：

```
.
+- A
|  +- a
|  +- b
+- B
|  +- a
|  +- b
+- a
+- b 
```

`os.walk()``root, dirs, files`通过为每个目录级别产生来遍历给定的树。

在这个例子中，它将产生

```
'.', ['A', 'B'], ['a', 'b']
'.\\A', [], ['a', 'b']
'.\\B', [], ['a', 'b'] 
```

因此包含驻留`root`的当前处理目录。`files`

我想您`cover.jpg`驻留在 的子目录中`Daniel's_Books`，而不是在此目录本身中。将其与正确的目录结合将使其被发现。

# iphone - 如何在 iphone 的核心绘图图中写入日期时间值

> ID：10480788
> 
> 赞同：1
> 
> 时间：2012-05-07T10:53:32.470
> 
> 标签：iphone, objective-c, xcode4, core-plot

我已经使用链接[http://www.johnwordsworth.com/2011/10/adding-charts-to-your-iphone-ipad-app-using-core-plot/实现了核心绘图图](http://www.johnwordsworth.com/2011/10/adding-charts-to-your-iphone-ipad-app-using-core-plot/)

**在此示例中，作者对 x,y 点使用了两个浮点值**

但现在***我需要为 y 轴点使用时间值我应该如何编写代码来分配 x,y 点***

```
AppDelegate *app =  (AppDelegate*)[[UIApplication sharedApplication] delegate];
NSMutableArray * times = app.timesArray;
NSMutableArray * painlevels = app.PainlevelsArray;
[super viewWillAppear:animated];
//Xand y Points to draw a graph
 NSMutableArray *data = [NSMutableArray array];
for(int i=0 ; i< [painlevels count]; i++)
{
    [data addObject:[NSValue valueWithCGPoint:CGPointMake([[painlevels objectAtIndex:i]floatValue] , [[times objectAtIndex:i]floatValue])]];
} 
```

**//X,y 点代表以前的值 在作者示例中浮动值**

/* [data addObject:[NSValue valueWithCGPoint:CGPointMake(@"fd", 0)]]; [data addObject:[NSValue valueWithCGPoint:CGPointMake(-8, 10)]]; [data addObject:[NSValue valueWithCGPoint:CGPointMake(-6, 40)]]; [数据 addObject:[NSValue valueWithCGPoint:CGPointMake(-5, 20)]]; [data addObject:[NSValue valueWithCGPoint:CGPointMake(0, 50)]]; [data addObject:[NSValue valueWithCGPoint:CGPointMake(3, 3)]]; [data addObject:[NSValue valueWithCGPoint:CGPointMake(4, 18)]]; [data addObject:[NSValue valueWithCGPoint:CGPointMake(6, 36)]]; [data addObject:[NSValue valueWithCGPoint:CGPointMake(9, 66)]];*/

```
self.scatterPlot = [[ScatterPlot alloc] initWithHostingView:_graphHostingView andData:data];
[self.scatterPlot initialisePlot]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T23:23:45.157

Core Plot 包括两种不同的格式化日期值的方法。`CPTTimeFormatter`根据相对于参考日期的以秒为单位的时间间隔格式化日期。`CPTCalendarFormatter`让您指定时间间隔（天、月、小时等）。

DatePlot 和 Plot Gallery 示例应用程序演示了如何使用`CPTTimeFormatter`. 有关 [如何](https://groups.google.com/forum/?fromgroups#!topic/coreplot-discuss/grjwkFnNKvY)使用`CPTCalendarFormatter`.

`CPTCalendarFormatter`确实很棒，但在 1.0 版中不可用。您可以从上面引用的链接将其添加到您的项目中。

# java - 跟踪资源并在不需要时卸载它们

> ID：10480794
> 
> 赞同：2
> 
> 时间：2012-05-07T10:53:52.773
> 
> 标签：java, memory-management, garbage-collection

我一直在尝试用 Java 设计一个系统，我可以在其中跟踪从磁盘加载的图像和音频文件等资源，并在没有引用时卸载它们。

在 C++ 中，我可以覆盖删除运算符，以便减少引用。但是 Java 使用自动垃圾收集，当对象没有引用时它会破坏它。

因为我在资源管理器中跟踪所有资源，所以对对象的引用永远不会为空，因此如果不需要资源，将永远不会卸载它们。

有没有办法在没有实体引用的情况下跟踪对象同时删除它们？

我听说解构器不安全，所以这也不是一种选择

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T10:59:28.293

在资源管理器中使用 Wea​​kRefence，例如 WeakHashMap。

您可以在此处找到对 WeakReferences（和其他参考资料，例如 Softreference）的很好解释：[http ://weblogs.java.net/blog/2006/05/04/understanding-weak-references](http://weblogs.java.net/blog/2006/05/04/understanding-weak-references)

简单地说：弱引用是不强制对象留在内存中的引用。如果没有对该对象的强引用，但您的资源管理器中仍有弱引用，则该对象仍然有资格进行垃圾回收，并且可以被垃圾回收器删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T11:03:30.960

您可以强制资源的用户在`dispose`使用完资源后手动使用他们使用的资源，类似于 package.json 中的`close()`方法`java.io`。

在此类`dispose`方法中，您可以减少一个计数器，当达到零时，您可以显式释放底层资源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T11:36:47.310

Java 7 确实有一种允许基于范围的[自动资源管理](http://metoojava.wordpress.com/2010/12/19/java-7-awesome-aspect-automatic-resource-management/)的巧妙方法，您可以将关闭资源与关闭特定程序范围联系起来。但是，据我了解，由于 Java 对象破坏的不确定性，基于对象的资源管理（您似乎正在描述）是不可能的。

对于更复杂的场景，资源关闭必须发生在资源打开的原始范围之外（例如在另一个线程上或收到事件后），必须执行手动关闭。遗憾的是，引用计数实现（C++ 通用）是不可能的。

# function - 如何在 postgresql 中将变量值或函数参数分配给 custom_variable_class

> ID：10480797
> 
> 赞同：1
> 
> 时间：2012-05-07T10:54:28.203
> 
> 标签：function, postgresql, session-variables, plpgsql

我正在使用一个 pl/pgsql 函数，`custom_variable_class`函数代码是

```
CREATE OR REPLACE FUNCTION can_connect("pUserId" character varying)
RETURNS boolean AS
$BODY$DECLARE
user_id integer ;
BEGIN

SELECT users.user_serial INTO user_id
FROM public.users
WHERE users.user_id="pUserId"
;

set public.userId  to user_id  ;
 set public.companyId  to "pUserId" ;
RETURN true ;    

EXCEPTION
 WHEN OTHERS THEN
raise notice ' error %',sqlerrm ;
END ;

$BODY$
LANGUAGE plpgsql VOLATILE 
```

现在使用该功能

```
 select can_connect ('amr' );
 t 
```

没关系，返回值`t`符合预期。

但是当试图检索会话变量值时

```
select current_setting('public.userId') ;
the result is 
 user_id 
```

使用函数参数时，哪个变量名与值不同

```
select current_setting('public.pUserId') ;
the result is 
pUserId 
```

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T13:01:13.593

使用 plpgsql [EXECUTE](http://www.postgresql.org/docs/9.1/static/plpgsql-statements.html#PLPGSQL-STATEMENTS-EXECUTING-DYN)强制解析器插入变量的值：

```
EXECUTE 'set public.userId  to ' || quote_literal(user_id);
EXECUTE 'set public.companyId to ' || quote_literal( "pUserId"); 
```

作为奖励，它也适用于旧版本的 PostgreSQL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T11:42:25.677

这种方式只允许[`SET`](http://www.postgresql.org/docs/current/interactive/sql-set.html)PostgreSQL的配置参数。

在 PostgreSQL 9.1 上，我有以下输出：

```
SET user_id TO bbb;
ERROR:  unrecognized configuration parameter "user_id" 
```

由于 PostgreSQL 没有包，所以保持状态的最好方法是使用[临时表](http://www.postgresql.org/docs/current/static/plpgsql-porting.html)。

# android - Android 文本到语音选择对话框只有一次

> ID：10480799
> 
> 赞同：0
> 
> 时间：2012-05-07T10:54:40.117
> 
> 标签：android, text-to-speech

```
I am using the TTS in my Activity. I Want the tts dialog appear only one time. 
```

![在此处输入图像描述](../Images/e1ab36258bef5a5bf05e4300ccadfaa9.png)

*   例如：在屏幕截图中，假设我选择 pico tts。当我下次打开此活动时。我不希望它下次打开

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:04:24.170

您可以使用共享首选项。假设您定义了一个布尔值，在选择要使用的 TTS 时将其设置为 true 并保存到共享首选项中。下次您运行应用程序时，您应该检查所述布尔值的值，并且只有在它为 false 时才启动对话框。

例子：

```
private SharedPreferences preferences;
private String PREFS_NAME = "com.example.stackoverflow";
private String PREFS_CHECK = "com.example.stackoverflow.check";
private Boolean check;

preferences = this.getSharedPreferences(PREFS_NAME,MODE_PRIVATE); 
check = preferences.getInt(PREFS_CHECK_STATS,false);

if(check){
.
.
.
}else{
.
.
.
preferences.edit().putBoolean(PREFS_CHECK,true).commit(); //Here you set the value.
} 
```

# emacs - 功能“magit-simple-keys”的emacs 24.x递归“要求”

> ID：10480800
> 
> 赞同：4
> 
> 时间：2012-05-07T10:54:46.007
> 
> 标签：emacs

我刚刚升级了我的整个发行版，我正在尝试使用我以前的设置来设置我的 emacs，当使用我的“magit”插件并输入“Mx magit-status”时，我收到以下错误：

```
Recursive `require' for feature `magit-simple-keys' 
```

这是我的配置（.emacs.d/init.el）

```
(require 'package)
(add-to-list 'package-archives '("elpa" . "http://tromey.com/elpa/"))
(add-to-list 'package-archives
             '("marmalade" . "http://marmalade-repo.org/packages/") t)
(package-initialize)
(setq required-packages
      (list 'mwe-log-commands 'drag-stuff 'flymake-ruby 'flymake-haml 'regex-tool 'mic-paren 'highline 'android-mode 'css-mode 'csv-mode 'apache-mode 'crontab-mode 'emms 'switch-window 'multi-term 'undo-tree 'rvm 'auto-complete 'yasnippet-bundle 'ruby-electric 'rinari 'inf-ruby 'coffee-mode 'yaml-mode 'feature-mode 'scss-mode 'haml-mode 'magit-simple-keys))
(dolist (package required-packages)
  (when (not (package-installed-p package))
    (package-refresh-contents)
    (package-install package)))

;; Setup external directory variable
(setq elisp-dir
      (expand-file-name "elisp" user-emacs-directory))
(setq elisp-external-dir
      (expand-file-name "external" elisp-dir))

;; Add external projects to load path
(add-to-list 'load-path elisp-external-dir)

(dolist (project (directory-files elisp-external-dir t "\\w+"))
  (when (file-directory-p project)
    (add-to-list 'load-path project)))

; Keybinding
(global-set-key [f1] 'twit)
(global-set-key [f2] 'gist-region-or-buffer)
(global-set-key [f3] 'switch-window)
(global-set-key [f4] 'magit-display-log)
(global-set-key [f5] 'magit-status)
(global-set-key [f6] 'multi-term)
(global-set-key [f7] 'split-window-vertically)
(global-set-key [f8] 'next-multiframe-window)
;; f9 is taken by git-status somewhere.
(global-set-key [f10] 'undo-tree-visualize)
(global-set-key [f12] 'switch-full-screen)

(global-set-key (kbd "C-x f") 'rinari-find-file-in-project)
(global-set-key (kbd "C-x g") 'rinari-rgrep)

(global-set-key (kbd "C-c I") 'irc)

;fullscreen mode
(defun switch-full-screen ()
  (interactive)
  (shell-command "wmctrl -r :ACTIVE: -btoggle,fullscreen"))

;; Allow using mouse thumb button to browse URLs
(global-set-key [mouse-10] 'browse-url-at-mouse)

; stop emacs from contaminating each directory with semantic.cache
(setq semanticdb-default-save-directory "/tmp")

; General settings
(setq-default tab-width 4)
(menu-bar-mode 1)         ;; enable the menu bar
(tool-bar-mode -1)        ; Disable tool-bar
(display-battery-mode)
(setq column-number-mode t)
(display-time)
(setq backup-inhibited t) ;; disable backup

;; Org-mode options
(add-hook 'org-mode-hook 'turn-on-visual-line-mode)
;; (add-hook 'org-mode-hook 'my-org-mode-autosave-settings)
;; (defun my-org-mode-autosave-settings ()
;;   (set (make-local-variable 'auto-save-visited-file-name) t)
;;   (setq auto-save-interval 20))

(add-to-list 'auto-mode-alist '("\\.org$" . org-mode))
(global-set-key "\C-cl" 'org-store-link)
(global-set-key "\C-ca" 'org-agenda)
(setq org-agenda-files '("~/Dropbox/org/"))
(setq org-directory "~/Dropbox/org")
(setq org-mobile-inbox-for-pull "~/Dropbox/org/inbox.org");; new notes will be stored here
(setq org-support-shift-select t)
(setq org-mobile-directory "~/Dropbox/MobileOrg")         ;; Set to <your Dropbox root directory>/MobileOrg.

;; Set color
(custom-set-faces
 ;; custom-set-faces was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(default ((t (:inherit nil :stipple nil :background "black" :foreground "white" :inverse-video nil :box nil :strike-through nil :overline nil :underline nil :slant normal :weight normal :height 98 :width normal :foundry "unknown" :family "DejaVu Sans Mono")))))

; Auto complete settings
(setq hippie-expand-try-functions-list
      '(try-complete-abbrev
    try-complete-file-name
    try-expand-dabbrev))

; -------------------- Custom Settings --------------------
(custom-set-variables
 ;; custom-set-variables was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(column-number-mode t)
 '(display-battery-mode t)
 '(display-time-mode t)
 '(ecb-options-version "2.32")
 '(inhibit-startup-screen t)
 '(org-agenda-files (quote ("~/Dropbox/org")) t)
 '(rails-ws:default-server-type "mongrel")
 '(send-mail-function (quote smtpmail-send-it))
 '(smtpmail-smtp-server "smtp.googlemail.com")
 '(smtpmail-smtp-service "smtp")
 '(tool-bar-mode nil)
 '(tooltip-mode nil))

; -------------------- File plugins --------------------
; Interactively Do Things
(ido-mode t)                            

; tramp - remote ssh editing
(require 'tramp)
(setq tramp-default-method "ssh")

; -------------------- Rails setting files --------------------
(require 'yaml-mode)
(add-to-list 'auto-mode-alist '("\\.yml$" . yaml-mode))

; -------------------- Rails minor plugin -------------------- 
(setq x-select-enable-clipboard t)
(setq interprogram-paste-function 'x-cut-buffer-or-selection-value)

;; https://github.com/remvee/emacs-rails
;; Currently this interfers with auto complete, using rinari instead
;; automatically adds end to blocks.
(require 'rails)            

;; Rinari - Rails plugin
(add-to-list 'load-path "~/.emacs.d/rinari/")
(require 'rinari)
(add-hook 'ruby-mode-hook
          (lambda ()
            (defadvice ruby-mode-set-encoding
              (around ruby-mode-set-encoding-disable activate) nil)))

; -------------------- Rails Views -------------------- 
; haml-sass
(require 'haml-mode nil 't)
 (add-hook 'haml-mode-hook
  '(lambda () (setq tab-width 2)))
(setq scss-compile-at-save nil)

; stylesheets
(autoload 'css-mode "css-mode")
(setq auto-mode-alist (cons '("\\.css\\'" . css-mode) auto-mode-alist))

; html2haml function to convert current buffer to haml
(defun haml-ify ()
  "run html2haml on current buffer"
  (interactive)
  (setf filename buffer-file-name)
  (setf newfilename (concat filename ".haml"))
  (save-buffer)
  (shell-command (concat
    "html2haml " filename " > " newfilename))
  (kill-buffer (current-buffer))
  (delete-file filename)
  (find-file newfilename))
;; -------------------- Rails Testing -------------------- 
;; Cucumber
(require 'feature-mode)

;; -------------------- Rails Tools -------------------- 
;; Check out abbrev-mode instead as it seems lighter.
(require 'snippet)

;; -------------------- Ruby plugins -------------------- 
(add-to-list 'auto-mode-alist '("Capfile" . ruby-mode))
(add-to-list 'auto-mode-alist '("Gemfile" . ruby-mode))
(add-to-list 'auto-mode-alist '("Rakefile" . ruby-mode))
(add-to-list 'auto-mode-alist '("god" . ruby-mode))
(add-to-list 'auto-mode-alist '("Guardfile" . ruby-mode))
(add-to-list 'auto-mode-alist '("\\.rake\\'" . ruby-mode))
(add-to-list 'auto-mode-alist '("\\.rb\\'" . ruby-mode))
(add-to-list 'auto-mode-alist '("\\.ru\\'" . ruby-mode))
(add-to-list 'auto-mode-alist '("\\.html.erb\\'" . html-mode))
(add-to-list 'auto-mode-alist '("\\.ejs\\'" . html-mode))
(add-to-list 'auto-mode-alist '("\\.eco\\'" . html-mode))
(add-to-list 'auto-mode-alist '("\\.hamlc\\'" . haml-mode))

;; Ruby-electric
(require 'ruby-electric)
(add-hook 'ruby-mode-hook 'ruby-electric-mode)

;; Issues under some compiles of emacs
;; (require 'ruby-electric)
;; (add-hook 'ruby-mode-hook
;;           (lambda()
;;             (add-hook 'local-write-file-hooks
;;                       '(lambda()
;;                          (save-excursion
;;                            (untabify (point-min) (point-max))
;;                            ;(delete-trailing-whitespace)
;;                            )))
;;             (set (make-local-variable 'indent-tabs-mode) 'nil)
;;             (set (make-local-variable 'tab-width) 2)
;;             (imenu-add-to-menubar "IMENU")
;;             (require 'ruby-electric)
;;             (ruby-electric-mode t)))

;; Inferior Ruby Mode
(autoload 'inf-ruby "inf-ruby" "Run an inferior Ruby process" t)
(autoload 'inf-ruby-keys "inf-ruby" "" t)
(eval-after-load 'ruby-mode '(add-hook 'ruby-mode-hook 'inf-ruby-keys))

;; -------------------- SQL --------------------
(defun my-sql-interactive-mode-hook ()
  (setq tab-width 8))
(add-hook 'sql-interactive-mode-hook 'my-sql-interactive-mode-hook)
(require 'sql)
(put 'upcase-region 'disabled nil)

;; -------------------- Autocomplete --------------------
;; Use with Rsense for Ruby autocomplete:
;; http://cx4a.org/software/rsense/
;; Follow instructions on: http://itstickers.blogspot.com/2010/11/all-about-emacs.html
(require 'auto-complete-config)
(add-to-list 'ac-dictionary-directories "~/.emacs.d/ac-dict")
(ac-config-default)

;; Rsense
(setq rsense-home "/opt/rsense-0.3")
(add-to-list 'load-path (concat rsense-home "/etc"))
(require 'rsense)

;; Rsense + Autocomplete
(add-hook 'ruby-mode-hook
          (lambda ()
            (add-to-list 'ac-sources 'ac-source-rsense-method)
            (add-to-list 'ac-sources 'ac-source-rsense-constant)))

;; Complete by C-c .
(add-hook 'ruby-mode-hook
          (lambda ()
            (local-set-key (kbd "C-c .") 'rsense-complete)))

;; RVM in emacs
;; (require 'rvm)
;; (rvm-use-default) ;; use rvm’s default ruby for the current Emacs session

;; Switch windows easier when you have 3 or more.
(require 'switch-window)

;; gist
(require 'gist)
(setq gist-authentication-function 'gist-basic-authentication)

(setq the-secrets-file
      (expand-file-name "secrets.el" user-emacs-directory))
(when (file-exists-p the-secrets-file)
  (load the-secrets-file))

;; highline-mode
(require 'highline) 
(defun highline-mode-on ()
  (highline-mode 1)) 
;; Turn on local highlighting for Dired (C-x d) 
(add-hook 'dired-after-readin-hook #'highline-mode-on) 
;; Turn on local highlighting for list-buffers (C-x C-b) 
(defadvice list-buffers (after highlight-line activate) (save-excursion (set-buffer "*Buffer List*") (highline-mode-on)))

;; mic-paren - advanced highlighting of matching parentheses
(paren-activate)

;; flyspell
(add-hook 'org-mode-hook
      (lambda ()
        (flyspell-mode)
        (setq flyspell-issue-message-flag 'nil)))
(add-hook 'ruby-mode-hook
      (lambda ()
        (flyspell-prog-mode)
        (setq flyspell-issue-message-flag 'nil)))

;; flymake haml
(add-hook 'haml-mode-hook 'flymake-haml-load)

;; undo
(add-hook 'ruby-mode-hook 'undo-tree-mode)

;; multi-term
;; (setq term-default-fg-color "#aaa")  

;; Upgrade all packages
(defun package-update-all ()
  "Update all packages"
  (interactive)
  (dolist (elt package-alist)
    (let* ((name (car elt))
           (file-name (symbol-name name))
           (available-pkg (assq name package-archive-contents))
           (available-version (and available-pkg
                                   (package-desc-vers (cdr available-pkg))))
           (current-version (package-desc-vers (cdr elt)))
           )
      (when (and available-version
                 (version-list-< current-version available-version))
        (message "Updating to: %s - %s" file-name
                 (package-version-join available-version))
        (package-install name)
        (package-delete file-name (package-version-join current-version))))))

;; Music player
(add-to-list 'load-path "~/.emacs.d/elisp/external/bongo")
(setq bongo-global-lastfm-mode t)
(autoload 'bongo "bongo"
  "Start Bongo by switching to a Bongo buffer." t)

;; Volume manager (Use 'v' in bongo music player)
(add-to-list 'load-path "~/.emacs.d/elisp/external/volume-el")
(autoload 'volume "volume"
   "Tweak your sound card volume." t)

;; Twitter mode
(add-to-list 'load-path "~/.emacs.d/elisp/external/twitter-mode")
(require 'twittering-mode)
(setq twittering-icon-mode t)  
(setq twittering-timer-interval 40) 
(setq twittering-url-show-status nil) 
(add-hook 'twittering-edit-mode-hook (lambda () (ispell-minor-mode) (flyspell-mode)))
(setq twittering-use-master-password t) ;; Don't prompt for authorisation. 

;; drag-stuff
(require 'drag-stuff)

;; coffee-mode
(defun coffee-custom ()
  "coffee-mode-hook"
 (set (make-local-variable 'tab-width) 2))

;; (define-key coffee-mode-map [(meta r)] 'coffee-compile-buffer)
;; (define-key coffee-mode-map [(meta R)] 'coffee-compile-region)

(add-hook 'coffee-mode-hook
  '(lambda() (coffee-custom)))

;; Don't ask to save abbrevs
(setq save-abbrevs 'silently)

;; log commands.
;; M-x mwe:open-command-log-buffer
(add-hook 'LaTeX-mode-hook (function mwe:log-keyboard-commands))

;; screensaver
(setq zone-when-idle t)

;; IRC reconnect
(eval-after-load 'rcirc
  '(defun-rcirc-command reconnect (arg)
     "Reconnect the server process."
     (interactive "i")
     (unless process
       (error "There's no process for this target"))
     (let* ((server (car (process-contact process)))
        (port (process-contact process :service))
        (nick (rcirc-nick process))
        channels query-buffers)
       (dolist (buf (buffer-list))
     (with-current-buffer buf
       (when (eq process (rcirc-buffer-process))
         (remove-hook 'change-major-mode-hook
              'rcirc-change-major-mode-hook)
         (if (rcirc-channel-p rcirc-target)
         (setq channels (cons rcirc-target channels))
           (setq query-buffers (cons buf query-buffers))))))
       (delete-process process)
       (rcirc-connect server port nick
              rcirc-default-user-name
              rcirc-default-full-name
              channels))))

;; Video editor
;; (load "~/.emacs.d/elisp/external/gneve.el") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T04:53:35.950

问题是我只需要安装'magit 而不是'magit-simple-keys。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T14:48:41.953

我猜你需要更新`magit`和中的一个或另一个`magit-simple-keys`（你也可以两者都做）。

我可以看到您正在`magit-simple-keys`通过 package.el 安装，但不是通过`magit`自身安装，因此您可能也希望`magit`从那里获取资源，以尝试保持版本同步。

# android - Android Phonegap - 使用 Google Checkout 进行应用内购买

> ID：10480801
> 
> 赞同：3
> 
> 时间：2012-05-07T10:54:48.583
> 
> 标签：android, cordova, in-app-purchase

寻找应用内购买的解决方案，因为贝宝不再是数字商品购买的选择。我没有看到任何你想的简单的支付解决方案......我已经检查了 phonegap 的插件：[https ://github.com/luoihoc/CallbackBillingPlugin](https://github.com/luoihoc/CallbackBillingPlugin)

有人可以指出我正确的方向吗？

# php - PHP basename() 删除变量，奇怪的效果

> ID：10480804
> 
> 赞同：2
> 
> 时间：2012-05-07T10:55:01.587
> 
> 标签：php, opencart

我有一个奇怪的错误，在以下代码中，basename() 已完成删除`$file`：

```
$files = glob(DIR_APPLICATION . 'controller/module/*.php');

if ($files) {

    foreach ($files as $file) {

        $extension = basename($file, '.php');
        print($file).'<br />'; 
```

调试时，如果我在`print()`上面添加代码，`basename`它会按预期工作。如果我在它下面添加它完全删除`$file`.

这可能是什么原因？

```
if ($files) {

    foreach ($files as $file) {

        echo $file . '<br />';
        var_dump($file);
        echo '<br />';
        $extension = basename($file, '.php');
        var_dump($file);
        echo '<br /><br />'; 
```

PHP 版本 5.3.10

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T11:00:08.857

对我来说似乎很好：

```
<?php
$file = '/path/to/some/file.php';
var_dump($file);
var_dump(basename($file, '.php'));
var_dump($file);

string(22) "/path/to/some/file.php"
string(4) "file"
string(22) "/path/to/some/file.php" 
```

[http://codepad.org/E9Nb1SUG](http://codepad.org/E9Nb1SUG)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T11:13:19.470

您可以通过在代码顶部添加这一行来检查它是否正常工作..

```
echo basename('/home/shop/www/admin/controller/module/cloudbackup.php', '.php'); exit; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T11:13:07.187

`var_dump`为您的字符串提供与其显示的人类可读字符数不同的长度（具体来说，每个长度比正常情况大 6）。

这意味着您的路径名包含多字节字符，而文档[`basename`](http://php.net/manual/en/function.basename.php)说

> basename() 是区域设置感知的，因此要使用多字节字符路径查看正确的基本名称，必须使用 setlocale() 函数设置匹配的区域设置。

所以，为了解决我建议的问题：

1.  使用`bin2hex`或类似的东西来查看组成每条路径的所有字节的序数；这将告诉您路径名中的哪些字符不是单字节的。6 个字节的差异意味着它*可能*是三个字符，所以我的精神力量告诉我，它`www`可能并不完全是它的样子。

2.  如果可能，重命名有问题的目录以使路径为单字节字符串，问题将自动解决。

3.  如果以上都做不到，那么：

    一种。找出返回路径的编码是什么

    湾。编写您自己的实现`basename`，使用多字节字符串函数，将编码传递给它们。

# macos - 在 OS X 中使用委托

> ID：10480805
> 
> 赞同：0
> 
> 时间：2012-05-07T10:55:02.530
> 
> 标签：macos, cocoa, delegates, nsobject

我是 OS X 开发的新手，在获取委托回调时遇到问题，我怀疑这可能是内存问题。我有一个 NSViewController。在它的 init 方法中，我设置了一个自定义 NSObject，如下所示：

```
 MyObject *aManager = [[MyObject alloc] initManager];
    __theManager = aManager;
    self.theManager.delegate = self; 
    [aManager release]; 
```

我设置为非原子的委托，分配。查看断点，我应该在我的视图控制器中看到回调，但这永远不会发生。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T10:57:38.170

`__theManager = aManager;`应该是`self.theManager = aManager;`，假设`theManager`是保留属性。您遇到的问题是保留计数为+1 `alloc] init];`。不会增加该计数，因为 iVar 是直接设置的。当您释放它时，保留计数变为 0，因此它被释放。`aManager``__theManager = aManager;`

# python - 比较忽略特定键的字典

> ID：10480806
> 
> 赞同：35
> 
> 时间：2012-05-07T10:55:02.597
> 
> 标签：python, dictionary

如何在不考虑某些键的情况下测试两个字典是否相等。例如，

```
equal_dicts(
    {'foo':1, 'bar':2, 'x':55, 'y': 77 },
    {'foo':1, 'bar':2, 'x':66, 'z': 88 },
    ignore_keys=('x', 'y', 'z')
) 
```

应该返回 True。

UPD：我正在寻找一种高效、快速的解决方案。

UPD2。我最终得到了这段代码，它似乎是最快的：

```
def equal_dicts_1(a, b, ignore_keys):
    ka = set(a).difference(ignore_keys)
    kb = set(b).difference(ignore_keys)
    return ka == kb and all(a[k] == b[k] for k in ka) 
```

计时：[https ://gist.github.com/2651872](https://gist.github.com/2651872)

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-07T11:01:41.360

```
def equal_dicts(d1, d2, ignore_keys):
    d1_filtered = {k:v for k,v in d1.items() if k not in ignore_keys}
    d2_filtered = {k:v for k,v in d2.items() if k not in ignore_keys}
    return d1_filtered == d2_filtered 
```

编辑：这可能更快，内存效率更高：

```
def equal_dicts(d1, d2, ignore_keys):
    ignored = set(ignore_keys)
    for k1, v1 in d1.iteritems():
        if k1 not in ignored and (k1 not in d2 or d2[k1] != v1):
            return False
    for k2, v2 in d2.iteritems():
        if k2 not in ignored and k2 not in d1:
            return False
    return True 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-07T11:11:32.340

使用 dict 理解：

```
>>> {k: v for k,v in d1.items() if k not in ignore_keys} == \
... {k: v for k,v in d2.items() if k not in ignore_keys} 
```

`.viewitems()`在 Python 2 上改用 。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-11-28T17:00:36.390

这是另一个变体：

```
set(ignore_keys).issuperset(k for (k, v) in d1.items() ^ d2.items()) 
```

它的优点：

*   C快速识别dicts之间的差异
*   C 快速检查忽略键集中的成员资格
*   如果发现单个不匹配，则提前退出

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T11:03:38.180

非常*非常*粗略，您可以删除任何被忽略的键并比较这些字典：

```
def equal_dicts(d1, d2, ignore_keys=()):
    d1_, d2_ = d1.copy(), d2.copy()
    for k in ignore_keys:
        try:
            del d1_[k]
        except KeyError: 
            pass
        try:
            del d2_[k]
        except KeyError: 
            pass

    return d1_ == d2_ 
```

（注意这里我们不需要深拷贝，我们只需要避免修改`d1`and `d2`。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-07T11:10:07.500

```
def compare_dict(d1, d2, ignore):
    for k in d1:
        if k in ignore:
            continue
        try:
            if d1[k] != d2[k]:
                return False
        except KeyError:
            return False
    return True 
```

评论编辑：你可以做类似`compare_dict(d1, d2, ignore) and compare_dict(d2, d1, ignore)`或复制`for`

```
def compare_dict(d1, d2, ignore):
    ignore = set(ignore)
    for k in d1:
        if k in ignore:
            continue
        try:
            if d1[k] != d2[k]:
                return False
        except KeyError:
            return False

    for k in d2:
        if k in ignore:
            continue
        try:
            if d1[k] != d2[k]:
                return False
        except KeyError:
            return False
    return True 
```

无论是更快更清洁！更新：演员表（忽略）

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-07-14T20:16:15.223

只忽略一键情况的最优解

```
return all(
    (x == y or (x[1] == y[1] == 'key to ignore')) for x, y in itertools.izip(
          d1.iteritems(), d2.iteritems())) 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-02-01T11:11:20.767

如果您的字典包含列表或其他字典：

```
def equal_dicts(d1, d2, ignore_keys, equal):
    # print('got d1', d1)
    # print('got d2', d2)
    if isinstance(d1, str):
        if not isinstance(d2, str):
            return False
        return d1 == d2
    for k in d1:
        if k in ignore_keys:
            continue
        if not isinstance(d1[k], dict) and not isinstance(d1[k], list) and d2.get(k) != d1[k]:
            print(k)
            equal = False
        elif isinstance(d1[k], list):
            if not isinstance(d2.get(k), list):
                equal = False
            if len(d1[k]) != len(d2[k]):
                return False
            if len(d1[k]) > 0 and isinstance(d1[k][0], dict):
                if not isinstance(d2[k][0], dict):
                    return False
                d1_sorted = sorted(d1[k], key=lambda item: item.get('created'))
                d2_sorted = sorted(d2[k], key=lambda item: item.get('created'))
                equal = all(equal_dicts(x, y, ignore_keys, equal) for x, y in zip(d1_sorted, d2_sorted)) and equal
            else:
                equal = all(equal_dicts(x, y, ignore_keys, equal) for x, y in zip(d1[k], d2[k])) and equal
        elif isinstance(d1[k], dict):
            if not isinstance(d2.get(k), dict):
                equal = False
            print(k)
            equal = equal_dicts(d1[k], d2[k], ignore_keys, equal) and equal
    return equal 
```

# java - Android：日期中的 AChartEngine mRenderer.setPanLimits

> ID：10480810
> 
> 赞同：3
> 
> 时间：2012-05-07T10:55:12.430
> 
> 标签：java, android, achartengine, linechart

我有折线图，使用 achartengine 库。在 x 轴上有日期。我需要设置最小的可见日期。如果 x 轴由`Date`对象组成并且 setPanLimits 取值，该怎么做`double`？

```
 Date minDate = new GregorianCalendar(2008, 1, 01).getTime();
    Date maxDate = new GregorianCalendar(2008, 1, 30).getTime();
    // mRenderer.setPanLimits(new double[] { minX, maxX, minY, maxY});
    mRenderer.setPanLimits(new double[] { minX, maxX, 0, 1000});
    mRenderer.setZoomLimits(new double[] { minXe, maxX, 0, 1000 }); 
```

如果我将最小 x 轴设置为 0，则根本无法移动 x 轴，但会在视图中显示所有 x 值。我需要为最小值设置一点小x，为最大值设置一点大x，所以可以将图表向左和向右移动一点

我发现大约 3 天是`private static final double THREEDAYS = 81300000 *3;`，但是从 Date 转换为 double 怎么样，所以我可以减去得到 minX？

我希望你能理解我的问题。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T12:34:28.203

这会将视口延长至 3 天

```
double THREEDAYS = 81300000 *3;
double minX = minDate.getTime() - THREEDAYS;
double maxX = maxDate.getTime() + THREEDAYS; 
```

希望这对其他人有帮助

# ios - iOS下载文件时的进度条

> ID：10480815
> 
> 赞同：6
> 
> 时间：2012-05-07T10:55:38.733
> 
> 标签：ios, nsdata, uiprogressview

我正在使用以下内容从互联网下载文件：

`NSData *myXMLData1 = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:@"Link]];`

现在，我想在下载过程中放置​​一个进度条。我检查了各种帖子，但我不知道如何准确地做到这一点。

请帮我！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T12:00:20.827

我建议查看 ASIHTTP 库，其中包含许多关于移动处理和下载处理的有用类。

这是一个链接，他们描述了 ASIHTTP 在下载进度跟踪方面可以提供什么：http: [//allseeing-i.com/ASIHTTPRequest/How-to-use#progress](http://allseeing-i.com/ASIHTTPRequest/How-to-use#progress)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-14T03:55:38.580

添加

```
expectedBytes = [response expectedContentLength]; 
```

至

```
-(void)connection:(NSURLConnection*)connection didReceiveResponse:(NSURLResponse*)response 
```

并添加

```
float progress = ((_bytesReceived/(float)_expectedBytes)*100)/100; 
```

至

```
-(void)connection:(NSURLConnection*)connection didReceiveData:(NSData*)data 
```

然后 setProgress: 在你的 UIProgressView

来自： http: [//www.developers-life.com/progress-bar-download-file-on-iphone.html](http://www.developers-life.com/progress-bar-download-file-on-iphone.html)

# java - 如何将 org.eclipse.birt.php.birtengine.BirtEngine 类添加到 JavaBridge？

> ID：10480818
> 
> 赞同：0
> 
> 时间：2012-05-07T10:55:43.927
> 
> 标签：java, php, birt, php-java-bridge

我正在使用 Apache+PHP、Tomcat 和 JavaBridge 运行测试，以尝试加载 BIRT 并呈现文档。这是 PHP 文件：

```
<?php       
ini_set('display_errors','On');
error_reporting(E_ALL);

require_once('http://127.0.0.1:8081/Bridge/java/Java.inc');
$here = getcwd();

session_start(); 

$here = getcwd();

$ctx = java_context()->getServletContext();
$birtReportEngine = java("org.eclipse.birt.php.birtengine.BirtEngine")->getBirtEngine($ctx);
java_context()->onShutdown(java("org.eclipse.birt.php.birtengine.BirtEngine")->getShutdownHook());

try{

$report = $birtReportEngine->openReportDesign("${here}/TopNPercent.rptdesign");
$task = $birtReportEngine->createRunAndRenderTask($report);
$taskOptions = new java("org.eclipse.birt.report.engine.api.PDFRenderOption");
$outputStream = new java("java.io.ByteArrayOutputStream");
$taskOptions->setOutputStream($outputStream);
$taskOptions->setOutputFormat("pdf");

$task->setRenderOption( $taskOptions );
$task->run();
$task->close();

} catch (JavaException $e) {
 echo $e; //"Error Calling BIRT";

}

//echo $outputStream;
echo java_values($outputStream->toByteArray());
?> 
```

一旦我通过 Apache+PHP 访问它，我就会收到以下错误：

```
<br />
<b>Fatal error</b>:  Uncaught [[o:Exception]:&quot;java.lang.Exception:
 ReferenceClass failed: new org.eclipse.birt.php.birtengine.BirtEngine. Cause: 
java.lang.ClassNotFoundException: org.eclipse.birt.php.birtengine.BirtEngine VM: 
1.7.0_04@http://java.oracle.com/&quot; at:
#-10 org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1438)
#-9 org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1284)
#-8 java.lang.Class.forName0(Native Method)
#-7 java.lang.Class.forName(Unknown Source)
#-6 php.java.bridge.Util.classForName(Util.java:1518)
#-5 php.java.bridge.JavaBridge.CreateObject(JavaBridge.java:445)
#-4 php.java.bridge.Request.handleRequest(Request.java:444)
#-3 php.java.bridge.Request.handleRequests(Request.java:500)
#-2 php.java.bridge.http.ContextRunner.run(ContextRunner.java:145)
#-1 php.java.bridge.ThreadPool$Delegate.run(ThreadPool.java:60)
#0 http://127.0.0.1:8081/Bridge/java/Java.inc(232): java_ThrowExceptionProxyFactory-&gt;getProxy(3, 'org.apache.cata...', 'T', false)
#1 http://127\. in <b>http://127.0.0.1:8081/Bridge/java/Java.inc</b> on line <b>195</b><br /> 
```

127.0.0.1:8081 是 Tomcat 服务器。似乎无法找到“org.eclipse.birt.php.birtengine.BirtEngine”类。我将 birt-runtime-3_7_2/lib 文件夹的内容复制到 JavaBridge 的 WEB-INF/lib 中，但没有帮助。我已经尝试在各个站点上搜索答案，但唯一一个，我认为实际上没有答案的相同问题在这里：[LINK](https://stackoverflow.com/questions/5416141/using-eclipse-birt-report-designer-via-php)。有谁知道这个问题的解决方案或如何让 JavaBridge 看到那个类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T15:54:55.433

我不确定 require_once 将 URL 作为参数。您是否尝试过文件的绝对路径？我的看起来像这样：“C：/Program Files/Apache Software Foundation/Tomcat 7.0/webapps/JavaBridge/java/Java.inc”，它可以工作。

此外，您可能想查看这篇文章，其中详细介绍了正确的配置步骤：

[http://www.birt-exchange.org/org/devshare/deploying-birt-reports/743-calling-birt-from-php/](http://www.birt-exchange.org/org/devshare/deploying-birt-reports/743-calling-birt-from-php/)

无论如何，祝你好运，我知道当我不得不做这个配置时我掉了很多头发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-06T19:11:54.833

通过将 birt_runtime jar 复制到 JavaBridge/WEB-INF/lib，您走在了正确的道路上。缺少的 org.eclipse.birt.php.birtengine.BirtEngine 位于 birtEngine.jar 文件中。在网上寻找它，它只有一个缺失的类。

# php - Git 与 phpDesigner 8 的集成

> ID：10480822
> 
> 赞同：1
> 
> 时间：2012-05-07T10:55:59.887
> 
> 标签：php, git, phpdesigner

我安装了 phpDesigner 8 和 Git，但 phpDesigner 说“找不到 git”。我还在设置/集成/SVN+GIT -> C:\Program Files\Git\Git Bash.vbs 中附加了它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T12:09:01.880

在 Settings / integration / SVN/GIT 你应该指向 git.exe 文件。它位于您的 GIT bin 文件夹 (\Git\bin\git.exe) 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-18T18:07:32.993

实际上，在 phpDesigner 8 中，它是工具 -> 首选项 -> 集成 -> TortoiseSVN+Git -> Git。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-28T14:27:30.937

您可以在以下目录中找到您的 Git 可执行文件

```
C:\Users\<username>\AppData\Local\GitHub\PortableGit_<numbersandletters>\bin\git.exe 
```

享受！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-14T10:24:04.063

尝试通过输入以下链接文件连接到 PhpDesigner（它的工具 -> 首选项 -> 集成 -> TortoiseSVN+Git -> Git。）：

```
C:\Program Files (x86)\Git\bin\git.exe 
```

# python - 添加列表元素

> ID：10480826
> 
> 赞同：-3
> 
> 时间：2012-05-07T10:56:31.470
> 
> 标签：python, list

我的最终名单是这样的......

```
lst = ['Ram:50', 'Ram:80', 'Ram:90', 'Ram:20', 'Sam:40', 'Sam:70', 'Sam:80'] 
```

如何将所有 Ram 分离到一个列表中，并将所有 Sam 分离到 Python 中的另一个列表中。

例子：

```
[50,80,90,20]
[40,70,80] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T11:05:44.620

使用[列表推导](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)：

```
>>> l = ['Ram:50', 'Ram:80', 'Ram:90','Ram:20', 'Sam:40', 'Sam:70', 'Sam:80']
>>> [int(x[4:]) for x in l if x.startswith('Ram:')]
[50, 80, 90, 20]
>>> [int(x[4:]) for x in l if x.startswith('Sam:')]
[40, 70, 80] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T11:37:26.857

```
>>> lis = ['Ram:50', 'Ram:80', 'Ram:90','Ram:20', 'Sam:40', 'Sam:70', 'Sam:80']
>>> D = {'Ram':[], 'Sam':[]}
>>> for k,v in (x.partition(':')[::2] for x in lis):
...    D[k].append(v)
... 
>>> D['Ram']
['50', '80', '90', '20']
>>> D['Sam']
['40', '70', '80'] 
```

稍微高级一点是像这样初始化 D

```
D = collections.defaultdict(list) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T11:05:42.200

```
([int(x[4:]) for x in l if x[:3] == 'Ram'],
 [int(x[4:]) for x in l if x[:3] == 'Sam']) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T11:14:09.413

也可以使用正则表达式和列表推导来完成 -

```
>>> list = ['Ram:50', 'Ram:80', 'Ram:90', 'Ram:20', 'Sam:40', 'Sam:70', 'Sam:80']
>>> [re.findall(r'[0-9]*$',s)[0] for s in list if 'Ram' in s]
['50', '80', '90', '20']
>>> [re.findall(r'[0-9]*$',s)[0] for s in list if 'Sam' in s]
['40', '70', '80'] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T11:15:41.140

这是一个强大的解决方案。

第一阶段将输入列表转换为表单元组列表`[(key,value),(key,value)...]`。该`map`操作在此处使用 split 函数进行此转换。

```
l = ['Ram:50', 'Ram:80', 'Ram:90', 'Ram:20', 'Sam:40', 'Sam:70', 'Sam:80']

def split( input ):
    sp = input.split(":")
    return (sp[0], sp[1])
l2 = map(split, l)
print l2

#[('Ram', '50'), ('Ram', '80'), ('Ram', '90'), ('Ram', '20'), ('Sam', '40'), ('Sam', '70'), ('Sam', '80')] 
```

第二阶段迭代这样的列表并填充`store`字典。如果键不存在，它会创建一个映射到键的列表（一个元素）。否则它会添加到该列表中

```
store = {}
for i in l2:
    key, value = i[0], i[1] 
    if key not in store.keys():
        store[key] = [value]
    else:
        store[key].append(value)

print store
#{'Ram': ['50', '80', '90', '20'], 'Sam': ['40', '70', '80']} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-07T12:05:15.627

如果列表已经订购，`'ram'`那么`'sam'`你可以这样做

```
>>> from itertools import groupby
>>> from operator import itemgetter
>>> lst = ['Ram:50', 'Ram:80', 'Ram:90', 'Ram:20', 'Sam:40', 'Sam:70', 'Sam:80']
>>> [[int(y) for x,y in v] for k,v in groupby((el.split(':') for el in lst),itemgetter(0))]
[[50, 80, 90, 20], [40, 70, 80]] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-07T11:08:22.230

```
Ram = map(lambda y: int(y[y.find(":")+1:]), filter(lambda x: x[:x.find(":")] == "Ram", lst)) 
```

我刚才看到 root45 的解决方案是类似的，但更容易。

一天后回来总结常识：

```
for name in ('Ram', 'Sam'):
    globals()[name] = [int(x[x.find(":")+1:]) for x in lst if x[:x.find(":")] == name] 
```

# url - Wikipedia URL 中附加的新 #_ 是什么？为什么？

> ID：10480827
> 
> 赞同：2
> 
> 时间：2012-05-07T10:56:35.253
> 
> 标签：url, redirect, wikipedia

维基百科的 URL 最近开始添加`#_`（附加或嵌入）到网站的**移动**版本。

*   这是什么意思？
*   为什么维基百科开始使用这个新约定？

我知道[shebang/hashbang](https://stackoverflow.com/a/3009501) ( `#!`)，但我不确定我是否理解维基百科新的`#_`.

*   这也与AJAX有关吗？
*   它是如何工作的？

顺便说一句，在没有 . 的浏览器地址中键入 URL 会`#_`导致自动重定向到附加的`#_`URL，这会对我的浏览器造成重大的性能影响。必须有充分的理由使用这个新`#_`方案。我只是不知道（还）它是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T12:04:27.007

它只是一个用作 kluge 的虚拟值。设置它的代码于 5 月 1 日在名为["fix jump to top"](https://gerrit.wikimedia.org/r/gitweb?p=mediawiki/extensions/MobileFrontend.git;a=commitdiff;h=4c2098da7ec10995818e2768f7a236bb1b510cd2)的提交中引入，并带有以下提交消息：

> “当前点击跳转到顶部链接没有效果。这是因为打开一个部分会将哈希设置为与跳转到顶部链接相同。通过首先重置它，我们可以恢复我们想要的行为”

如果它确实在您的浏览器中引起了性能问题，您可能应该将[其报告为 MediaWiki 中的错误](http://www.mediawiki.org/wiki/Bugzilla)。实际上，您也应该将其报告为浏览器中的错误。

# scala - 使用 scala 编译器优化类文件

> ID：10480833
> 
> 赞同：1
> 
> 时间：2012-05-07T10:57:07.747
> 
> 标签：scala, compiler-construction

我在 jar 中有一些类文件。现在我正在寻找一种方法来使用 scala 编译器的一些组件（最显着的 Inliners）来优化该类文件。
我的想法是：

1.  使用 ICodeReader 从类文件中发出 ICode

2.  使用 Inliner 类的实例以实现所需的优化

我不知道这是否是正确的方法

问题是

1.  如何使用 ICodeReader 读取类文件并生成所需的 ICode。ICodeReader 继承自 ClassfileParser。对我来说更可能使用的唯一方法是 parse(file: AbstractFile, root: Symbol) 但问题是根参数。

欢迎任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:20:35.050

Scala 编译器作用于源代码和中间步骤的结果以生成字节码，如果启用，它将尝试应用几个优化。

在您的情况下，如果我理解正确，您没有源代码，只有编译的类，我不希望您能够在编译的类上使用 Scala 编译器的功能。

在我的理解中，您应该关注的是一个字节码优化器，例如 ProGuard，它能够获取现有字节码并对其进行优化，而无需访问源代码

[http://proguard.sourceforge.net/#FAQ.html](http://proguard.sourceforge.net/#FAQ.html)

# android - 将图像添加到 jar 库

> ID：10480836
> 
> 赞同：1
> 
> 时间：2012-05-07T10:57:10.837
> 
> 标签：android, image, add

我想将图像添加到 jar 库中以防止任何人都可以更改它，但我不知道该怎么做。有人可以帮我吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T07:46:29.080

在寻找其他一些方法之后，我测试了“base 64 code/decode”，它真的很好用。只需要这样做：

```
String encodedImage = "encoded string of image";    
byte[] decodedString = Base64.decode(encodedImage, Base64.DEFAULT);
Bitmap decodedByte = BitmapFactory.decodeByteArray(decodedString, 0, decodedString.length); 
```

然后只需要 setImageBitmap 到 ImageView 或者你需要的。

为了对图像进行编码，我使用了这个：

[http://www.motobit.com/util/base64-decoder-encoder.asp](http://www.motobit.com/util/base64-decoder-encoder.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T11:41:23.407

1）右键单击您的项目-> 导出。

2）展开java文件夹并选择“Jar File”

3) 单击下一步。（将打开一个窗口）。

4）选择要导出为jar的类和图像文件。（在“选择要导出的资源”面板中）

5) 设置导出目的地，点击完成。

现在 jar 将包含您想要的所有类和图像文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T11:06:14.857

将图像放在设备上的任何方法都将允许有足够动力的用户更改它。无论您认为“将图像添加到 jar 库”意味着什么，都不会改变这一点。

如果您不希望用户更改您的图像，请不要将图像放在用户的设备上。

# ado.net - SSIS 2008 与 ADO.NET 目标一起使用

> ID：10480839
> 
> 赞同：0
> 
> 时间：2012-05-07T10:57:18.940
> 
> 标签：ado.net, ssis

我正在尝试使用 SSIS 2008 将数据从错误文件源加载到 Sybase IQ 15.1 目标。我正在使用 ADO.NET 目标组件和 Sybase IQ ODBC 数据提供程序连接到 Sybase IQ db。虽然包能够加载数据，但包的性能非常慢。它每分钟只加载 150 行。我正在通过 SQL Server 代理执行包。包中没有数据转换。谁能告诉我如何提高性能？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T22:06:08.980

ODBC 驱动程序通常很慢​​。你拉了多少列？另外，你检查过你的缓冲区大小和东西吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-14T15:09:19.523

使用**BulkInsertWheneverPossible**属性为 true，它将提高性能。要访问该属性，请右键单击-> ADO.NET 目标-> 选择属性或 ShowAdvanceEditor

（MSDN 参考） [http://technet.microsoft.com/en-us/library/ms135971 (v=sql.105).aspx#adonet](http://technet.microsoft.com/en-us/library/ms135971(v=sql.105).aspx#adonet)

一个值，指定是否使用 System.Data.SqlClient.SqlBulkCopy 接口来提高批量插入操作的性能。只有某些 ADO.NET 提供程序支持此接口。

默认值是true。

# javascript - 将 Javascript Onclick 添加到 .css 文件

> ID：10480840
> 
> 赞同：0
> 
> 时间：2012-05-07T10:57:21.763
> 
> 标签：javascript, css

我想知道是否有人可以帮助我。

我正在使用[这个](http://www.mapmyfinds.co.uk/development/gallerytest.php)页面来允许用户查看他们的图片库。

您可以看到我在每个图像的底部添加了一个叉号，我将使用它来删除该图像，这在我的`.css`文件中设置为：

```
 .galleria-thumbnails .galleria-image {
    width: 80px;
    height: 80px;
    float: left;
    margin: 0 7px 7px 0;
    border: 2px solid #fff;
    cursor: pointer;
    background: url(cross.png) no-repeat bottom;
    padding-bottom: 20px;
    background-color:#FFFFFF; 
```

我遇到的问题是我非常不确定如何将单独的图像`.ccs file`与 Javascript 命令链接以删除我的画廊页面上的图像。

我只是想知道是否有人能够就我如何克服这个问题提供一些指导。

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:05:55.317

您需要添加一个可以处理点击的元素（例如跨度）。我可以看到你实际上已经有了这样的东西：

```
<span class="btn-delete icon-remove icon-white"></span> 
```

你甚至已经有了点击处理程序：

```
$(".btn-delete").live("click", function()
{ var img = $(this).closest(".galleria-image").find("img");
alert('Deleting image... ' + $(img).attr("src")); return false; }); 
```

您需要做的就是应用样式，以便您可以实际使用它。就像是：

```
.galleria-thumbnails .btn-delete {
    display: block; /* Or just use a div instead of a span*/
    position: absolute;
    bottom: 0px; /*align at the bottom*/
    width: 80px;
    height: 80px;
    cursor: pointer;
    background: url(cross.png) no-repeat bottom;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:19:07.317

`<td>`如果您在只写 onclick 事件中设置上面的样式表...

这里有一个样本

```
<td id="Homebutton" runat="server" style="height: 35px; width: 101px; cursor: pointer;"
                class="menubuttonhome" align="center" onclick="navigate(id)" onmouseover="this.className='menubuttonhomefocus'"
                onmouseout="this.className= 'menubuttonhome'">
                Home
            </td> 
```

这是我的CSS

```
 .menubuttonhome
        {
            background-image: url('Images/homebutton.png');
            background-repeat: no-repeat;
            vertical-align: top;
            color: #005a8c;
            font-family: Arial;
            padding-top:11px;
            font-size: 10pt;
            font-weight: 500;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T11:06:34.747

CSS 用于样式，而 JS 用于行为。您不能将两者混为一谈，而且两者在功能上都没有关系。您需要的是一个删除图像的 JS。

符合标准的 JS 版本

```
var db = document.querySelectorAll('.galleria-thumbnails .btn-delete'),
    dbLength = db.length,
    i;

for(i=0;i<dbLength;i++){
     db[i].addEventListener('click',function(){
        var thumbnail = this.parentNode;
        thumbnail.parentNode.removeChild(thumbnail);
    },false);
} 
```

一个 jQuery 1.7+ 版本是这样的：

```
$('.galleria-thumbnails').on('click','.btn-delete',function(){
    $(this).closest('.galleria-image').remove()
}) 
```

# google-docs-api - 如何更改文件的最后修改日期

> ID：10480841
> 
> 赞同：3
> 
> 时间：2012-05-07T10:57:27.190
> 
> 标签：google-docs-api, google-drive-api

如何使用 Document List Api 更改文件的最后修改日期？这可能吗？Google Drive 客户端以某种方式做到了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T06:35:44.953

尝试使用[files.touch](https://developers.google.com/drive/v2/reference/files/touch)

将文件的更新时间设置为当前服务器时间。

```
POST https://www.googleapis.com/drive/v2/files/fileId/touch 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T22:34:53.013

修改文件内容最后修改日期应自动更改。

你有这方面的问题吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-21T14:57:51.333

使用`touch`然后你可以改变它

# gcc - 解释 valgrind 错误 大小为 4 的无效写入

> ID：10480843
> 
> 赞同：15
> 
> 时间：2012-05-07T10:57:29.547
> 
> 标签：gcc, valgrind

我最近试图在我正在使用 valgrind 开发的程序中查找一些错误，我得到的错误之一是：

```
==6866== Invalid write of size 4
==6866==    at 0x40C9E2: superneuron::read(_IO_FILE*) (superneuron.cc:414) 
```

违规行＃414读取

```
amplitudes__[points_read] = 0x0; 
```

和振幅__ 之前定义为

```
uint32_t * amplitudes__ = (uint32_t* ) amplitudes; 
```

现在显然 uint32_t 有 4 个字节长，所以这是写入大小，但有人能告诉我为什么它无效吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T11:01:01.053

`points_read`很可能超出范围，您正在写过去（或之前）分配给 `amplitudes`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-28T13:17:34.993

新程序员收到此警告的典型错误是：

```
struct a *many_a;
many_a = malloc(sizeof *many_a * size + 1); 
```

然后尝试在“size”位置读取或写入内存：

```
many_a[size] = ...; 
```

这里的分配应该是：

```
many_a = malloc(sizeof *many_a * (size + 1)); 
```

# android - 在 ViewPager 中翻转视图

> ID：10480847
> 
> 赞同：0
> 
> 时间：2012-05-07T10:57:36.650
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

是否可以在 ViewPager 中翻转视图。基本上我想在 hompage 中放置几个​​视图，并且每个视图后面都有一个视图，即用户也必须能够翻转视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:04:03.723

是 非常可能。

你需要旋转动画

看这里

[如何在 Android 中进行平滑的图像旋转？](https://stackoverflow.com/questions/1634252/how-to-make-a-smooth-image-rotation-in-android)

和

[http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/animation/Rotate3dAnimation.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/animation/Rotate3dAnimation.html)

我使用了上述方法并成功实现了您的要求。

在 android 的 api demo 中寻找它的例子

# mysql - MySQL：如何将多行转换为单行？在mysql中

> ID：10480850
> 
> 赞同：3
> 
> 时间：2012-05-07T10:58:17.257
> 
> 标签：mysql, pivot

我想根据周将多行转换为单行。它应该如下所示。谁能帮我？

```
id      |   Weight   |  Created   |
 1      |    120     | 02-04-2012 |
 2      |    110     | 09-04-2012 |
 1      |    100     | 16-04-2012 |
 1      |    130     | 23-04-2012 |
 2      |    140     | 30-04-2012 |
 3      |    150     | 07-05-2012 | 
```

结果应如下所示：

```
id      |   Weight_week1  | Weight_week2  |  weight_week3  | weight_week4  |
 1      |     120         |     100       |      130       |               |
 2      |     110         |     140       |                |               |
 3      |     150         |               |                |               | 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:31:39.760

如果这是一张桌子，那么

```
SELECT GROUP_CONCAT(weight) as Weight,
        WEEK(Created) as Week
Group by Week(Created) 
```

这会给你一行，每个都有周 id 和逗号分隔的 whights

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T11:16:52.190

你可以这样做：

```
SELECT
    t.id,
    SUM(CASE WHEN WeekNbr=1 THEN Table1.Weight ELSE 0 END) AS Weight_week1,
    SUM(CASE WHEN WeekNbr=2 THEN Table1.Weight ELSE 0 END) AS Weight_week2,
    SUM(CASE WHEN WeekNbr=3 THEN Table1.Weight ELSE 0 END) AS Weight_week3,
    SUM(CASE WHEN WeekNbr=4 THEN Table1.Weight ELSE 0 END) AS Weight_week4
FROM
    (
    SELECT  
        (
           WEEK(Created, 5) - 
           WEEK(DATE_SUB(Created, INTERVAL DAYOFMONTH(Created) - 1 DAY), 5) + 1 
        )as WeekNbr,
        Table1.id,
        Table1.Weight,
        Table1.Created
    FROM
        Table1
    ) AS t
GROUP BY
    t.id 
```

我不知道您是否想要`AVG`, `SUM`,`MAX`或者`MIN`但是您可以将聚合更改为您想要的。

有用的参考资料：

*   [mysql中每月一周的功能](https://stackoverflow.com/questions/785206/function-for-week-of-the-month-in-mysql)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T11:05:52.540

您不能像那样即时创建字段，但可以对它们进行分组。

用于`GROUP_CONCAT`提供带有分隔符的结果，您可以稍后将其分隔。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T12:30:35.177

你也可以这样做：

```
SELECT id, created, weight, (
    SELECT MIN( created ) FROM weights WHERE w.id = weights.id
) AS `min` , round( DATEDIFF( created, (
   SELECT MIN( created )
FROM weights
WHERE w.id = weights.id ) ) /7) AS diff
FROM weights AS w
ORDER BY id, diff 
```

此代码不做数据透视表。您应该添加一些额外的代码来将数据转换为您的需要。如果您使用 WEEK() 可能会遇到麻烦，因为这些年。

# javascript - 解析JSON数据的优化方式

> ID：10480853
> 
> 赞同：0
> 
> 时间：2012-05-07T10:58:25.220
> 
> 标签：javascript, jquery, json

我有一个 JSON 数据

```
[
    {
        "Name": "Tom",
        "Email": "tom@gmail.com",
        "Notes": "Yea, it's good",
        "Ratings": "5",
        "Messages": [
            "Tom - I am good",
            "System - How're you doing?",
            "Tom - True, that!",
            "System - Oh Yes! ;) "
        ]
    },
    {
        "Name": "Sunny",
        "Email": "sunny@gmail.com",
        "Notes": "Yea, it's good",
        "Ratings": "2",
        "Messages": [
            "Sunny-I am good",
            "System - How're you doing?",
            "Sunny - True, that!",
            "System - Oh Yes! ;) "
        ]
    }
] 
```

我正在使用 jQuery 解析它并像这样迭代它；

```
 var jsonData = $("#jsonData").val();
            var plainData = $.parseJSON(jsonData);

            for (var j = 0; j < plainData.length; j++) {
                var Name = plainData[j].Name;
                var Email = plainData[j].Email;
                var Notes = plainData[j].Notes;
                var Ratings = plainData[j].Ratings;

                var Messages = plainData[j].Messages;
                var _messages = " ";
                for (var i = 0; i < Messages.length; i++)
                    _messages += Messages[i] + "\n";

            } 
```

我不太确定在 for 循环中迭代它是否是一个好主意。谁能建议我一种更好/优化的方法来迭代解析的 json 值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T11:03:16.487

你刚才做的方式是最有效的方式，除了：

```
var Messages = plainData[j].Messages;
var _messages = " ";
for (var i = 0; i < Messages.length; i++)
    _messages += Messages[i] + "\n"; 
```

也可以写得更好：

```
_messages = plainData[j].Messages.join('\n') + '\n'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T12:15:42.470

在较旧的浏览器（以及一些不太旧的浏览器）中，如果可以使用负 while 循环，它将比 for 循环更快：

代替

```
for (var j = 0; j < plainData.length; j++) { 
```

利用

```
var j=plainData.length;
while(j--) { 
```

曾经有一个博客引用了一些定量指标，但是那个页面已经死了，但是结果可以很容易地复制。

关于为什么是比较等于零而不是大于或小于比较的推测​​，以及作为解释语言的 Javascript 可以内联代码以使用已知的术语点进行优化，但我没有定量知识在这个声明上。

在网络房间里转了一圈后，我发现了一些量化：

[https://blogs.oracle.com/greimer/entry/best_way_to_code_a](https://blogs.oracle.com/greimer/entry/best_way_to_code_a)

# java - 为什么 SwingWorkers 没有按预期更新 textArea？

> ID：10480855
> 
> 赞同：1
> 
> 时间：2012-05-07T10:58:25.807
> 
> 标签：java, swing, user-interface, swingworker

我使用 swingworkers 提取 zipfile 并将提取 prosecc 附加到 GUI 中的 textArea。它仅从压缩文件中提取一项，并且在 textArea 中没有显示任何内容。

**任何人都可以提出任何解决方案吗？**

```
public class UnzipWorkers extends SwingWorker<String,Void> {
private WebTextArea statusTextArea;
private File archive,outputDir;

public UnzipWorkers(WebTextArea statusTextArea,File archive,File outputDir) {
    this.archive=archive;
    this.outputDir=outputDir;
    this.statusTextArea = statusTextArea;
}

@Override
protected String doInBackground() throws Exception {
        statusTextArea.append(String.valueOf(System.currentTimeMillis()));
        try {
            ZipFile zipfile = new ZipFile(archive);
            for (Enumeration e = zipfile.entries(); e.hasMoreElements(); ) {
                ZipEntry entry = (ZipEntry) e.nextElement();
                unzipEntry(zipfile, entry, outputDir);

            }
        } catch (Exception e) {
            OeExceptionDialog.show(e);
        }

    return "Extracted successfully: " + archive.getName() + "\n";  
}

@Override
protected void done() {
    super.done();
    try {
        statusTextArea.append( get());
        FileTreePanel.btnRefresh.doClick();
    } catch (InterruptedException e) {
        e.printStackTrace();  
    } catch (ExecutionException e) {
        e.printStackTrace(); 
    }
}

private String unzipEntry(ZipFile zipfile, final ZipEntry entry, File outputDir)  {
    String success = "Extracted failed: "+ entry + "\n";
    if (entry.isDirectory()) {
        createDir(new File(outputDir, entry.getName()));
    }

    File outputFile = new File(outputDir, entry.getName());
    if (!outputFile.getParentFile().exists()){
        createDir(outputFile.getParentFile());
    }
    try {
        BufferedInputStream inputStream = new BufferedInputStream(zipfile.getInputStream(entry));
        BufferedOutputStream outputStream = new BufferedOutputStream(new FileOutputStream(outputFile));
        IOUtils.copy(inputStream, outputStream);
        outputStream.close();
        inputStream.close();
        success="Extracted successfully: " + entry + "\n";
    }catch (IOException io){
        OeExceptionDialog.show(io);
    }catch (NullPointerException n){
        OeExceptionDialog.show(n);
    }catch (ArithmeticException a){
        OeExceptionDialog.show(a);
    }
    return success;
}

private void createDir(File dir) {
    if (!dir.exists()) {
        try {
            dir.mkdirs();
        } catch (RuntimeException re) {
            OeExceptionDialog.show(re);
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T11:16:32.080

`SwingWorker`没有指定以这种方式工作，对于`doInBackground()`是否有方法`process()`的定期输出`publish()`，您可以

1）使用`Runnable#Thread`而不是`SwingWorker`你的代码通过添加`JTextArea.append()`, 包装到`invokeLater()`

2）在这个方法中添加`process()`或添加`publish()`到，并定期添加到`SwingWorker``IOStream``JTextArea`

3) 出于实施的原因，我建议[使用方法 get()](https://stackoverflow.com/questions/7053865/cant-get-arrayindexoutofboundsexception-from-future-and-swingworker-if-threa)

# sql - 订购sql查询数据

> ID：10480856
> 
> 赞同：1
> 
> 时间：2012-05-07T10:58:30.540
> 
> 标签：sql, sql-server, sql-server-2005

我有一个查询：

```
select * from
(
select i.id, i.art_id, i.c_izm, i.c_zime_izm, i.ac_izm, i.rc_izm, i.f_nos, convert(nvarchar,dateadd(mi,-30,i.datums),100) as dat
from nol_art_izmaina i
inner join nol_art a on i.art_id=a.id
where datepart(year,print_dat)=2005
order by a.nos --when I add this row, the error shows
union all
select distinct null,null,'','','','', f_nos, min(dat)
from nol_art_izmaina 
where datepart(year,print_dat)=2005
group by f_nos
)tablePlusHeaders
order by dat desc 
```

我需要什么？我需要第一个查询的数据按 a.nos 值排序。我怎么做？

**编辑**
结果表应如下所示，但仅包含我的数据：

```
Name   ImpFile/Job         Year
--------------------------------
       Imp01 20.01.2012              This is from set2
John   Clerk               1986    This is from set1
James  Assistant           1990    This is from set1
       Imp02 26.02.2012              This is from set2
Anna   Manager             1982    This is from set1
Sam    Salesman            1985    This is from set1
Dean   Cleaner             1985    This is from set1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:43:12.963

该错误可能是因为没有列号，而是f_nos。要订购联合，您需要为每个选择添加一个标记，然后按 f_nos 和该标记排序：

```
select * from
(
  select i.id, i.art_id, i.c_izm, i.c_zime_izm, i.ac_izm, i.rc_izm, i.f_nos, 
         convert(nvarchar,dateadd(mi,-30,i.datums),100) as dat,
         0 set_id
    from nol_art_izmaina i
   inner join nol_art a on i.art_id=a.id
   where datepart(year,print_dat)=2005
   union all
  select distinct null,null,'','','','', f_nos, min(dat),
         1 set_id
    from nol_art_izmaina 
   where datepart(year,print_dat)=2005
   group by f_nos
) tablePlusHeaders
order by f_nos, set_id, dat desc 
```

# c++ - 如何根据不同的参数定义相同的宏功能

> ID：10480858
> 
> 赞同：3
> 
> 时间：2012-05-07T10:58:40.237
> 
> 标签：c++, macros

```
#define UPUT_SET_CHECK_POINT1(appType, tag, argNum1, v1, ...)  \

if(NUMARGS(##__VA_ARGS__) == 0)           \
UPUT_SET_CHECK_POINTx(1, appType, tag,  argNum1, v1,  UPUT_P_INVALID, 0, UPUT_P_INVALID, 0, UPUT_P_INVALID, 0, UPUT_P_INVALID, 0, __FILE__, __LINE__, UPUT_SEQUENTIAL);                   \
else                                     \
UPUT_SET_CHECK_POINTx(1, appType, tag,  argNum1, v1,  UPUT_P_INVALID, 0, UPUT_P_INVALID, 0, UPUT_P_INVALID, 0, UPUT_P_INVALID, 0, __FILE__, __LINE__ , __VA_ARGS__) 
```

因此，当**VA_ARGS**为空时，我会收到编译时错误“在 ')' 标记之前的预期主表达式”。任何修复编译错误的方法。

```
void UPUT_SET_CHECK_POINTx(int numArg, CtblAppType appType, int tag, UputArgPos argNum1, int v1, UputArgPos argNum2, int v2, UputArgPos argNum3, int v3, UputArgPos argNum4, int v4, UputArgPos argNum5, int v5, char* fileName, unsigned int lineNumber, UputCheckPointAlgo checkPointAlgo=UPUT_SEQUENTIAL); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T12:52:23.630

如果您使用的是 GCC，则可以在为空时[使用`, ## __VA_ARGS__`](http://gcc.gnu.org/onlinedocs/cpp/Variadic-Macros.html)来消除逗号。`__VA_ARGS__`

```
#define UPUT_SET_CHECK_POINT1(appType, tag, argNum1, v1, ...)  \
    UPUT_SET_CHECK_POINTx(1, appType, tag,  argNum1, v1, \
                          UPUT_P_INVALID, 0, \
                          UPUT_P_INVALID, 0, \
                          UPUT_P_INVALID, 0, \
                          UPUT_P_INVALID, 0, \
                          __FILE__, __LINE__ , ## __VA_ARGS__) 
```

另请参阅[GCC 的 ##__VA_ARGS__ 技巧的标准替代方案？](https://stackoverflow.com/questions/5588855/standard-alternative-to-gccs-va-args-trick). 如果您必须使用预处理器，则没有标准的解决方法。

# javascript - 使用 DIV 容器的导航菜单

> ID：10480864
> 
> 赞同：1
> 
> 时间：2012-05-07T10:58:53.483
> 
> 标签：javascript, jquery, html, css

如何定义默认情况下应该在“menu1”下显示“submenu11”的内容？

```
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
</head>

<body>
        <ul id="css3menu1" class="menu">
        <li class="topfirst"><a class="pressed" href="#menu1" style="height:40px;line-height:40px;"><span><img src="menu_files/css3menu1/db.png"/>MENU1</span></a>
                <ul>
                    <li><a href="#submenu11">SUBMENU11</a></li>
                    <li><a href="#submenu12">SUBMENU12</a></li>
                    <li><a href="#submenu13">SUBMENU13</a></li>
                    <li><a href="#submenu14">SUBMENU14</a></li>
                </ul></li>
                <li class="menu"><a href="#menu2" style="height:40px;line-height:40px;"><img src="menu_files/css3menu1/schedule.png"/>MENU2</a></li>
                <li class="menu"><a href="#menu3" style="height:40px;line-height:40px;"><img src="menu_files/css3menu1/analysis.png"/>MENU3</a></li>
                <li class="toplast"><a href="#menu4" style="height:40px;line-height:40px;"><img src="menu_files/css3menu1/gps.png"/>MENU4</a></li>
            </ul>

    <div id='submenu11'>
    <p> Content </p>
    </div>

    <div id='submenu12'>
    <p> Content </p>
    </div>

    <div id='submenu13'>
    <p> Content </p>
    </div>

    <div id='submenu14'>
    <p> Content </p>
    </div>

    <script>
        $('ul.menu').each(function() {
            var $active, $content, $links = $(this).find('a');
            $active = $links.first().addClass('active');
            $content = $($active.attr('href'));
            $links.not(':first').each(function() {
                $($(this).attr('href')).hide();
            });

            $(this).on('click', 'a', function(e) {
                $active.removeClass('active');
                $content.hide();
                $active = $(this);
                $content = $($(this).attr('href'));
                $active.addClass('active');
                $content.show();
                e.preventDefault();
            });
        });
    </script>
</body> 
```

CSS 样式表：

```
html,body {
    font: normal .8em/1.5em Arial, Helvetica, sans-serif;
    background: #ffffff;
    width: 100%;
    margin: 0px auto;
}

p {
    margin: 0 0 2em;
}

h1 {
    margin: 0;
    font:bold 12px Arial;
}

h2 {
    margin:0;
    color: #55aaff;
    font:bold 12px Arial;
}

h3 {
    margin:0;
    font:normal 10px Arial;
}

h4 {
    margin:0;
    font:normal 12px Arial;
}

a {
    color: #339;
    text-decoration: none;
}

a:hover {
    text-decoration: underline;
}

div#header {
    padding:1em;
    background:#00557f 100% 10px no-repeat;
    border-bottom:6px double gray;
}

div#header p {
    font:normal 10px Arial;
    text-align:right;
    color:#b7ddf2;
    margin:0;
}

div.scrollbar {
    height: 300px;
    overflow: auto;
    border: solid 1px #000;
    padding: 5px;
}

div#content {
    padding:1em 1em 5em; /* bottom padding for footer */
}

div#content p {
    text-align:justify;
    padding:0 1em;
}

div#footer {
    position:absolute;
    width:100%;
    bottom:0; /* stick to bottom */
    padding:1em;
    background:#ddd 98% 10px no-repeat;
    border-bottom:6px double gray;
}
div#footer p {
    font-style:italic;
    font-size:1.1em;
    margin:0;
}

/* ----------- Menu ----------- */
ul#css3menu1,ul#css3menu1 ul{
    margin:0;
    list-style:none;
    padding:0;
    background-color:#dedede;
    border-width:1px;
    border-style:solid;
    border-color:#b7ddf2;
    -moz-border-radius:5px;
    -webkit-border-radius:5px;
    border-radius:5px;
}
ul#css3menu1 ul{
    display:none;
    position:absolute;
    left:0;
    top:100%;
    -moz-box-shadow:3.5px 3.5px 5px #000000;
    -webkit-box-shadow:3.5px 3.5px 5px #000000;
    box-shadow:3.5px 3.5px 5px #000000;
    background-color:#FFFFFF;border-radius:6px;
    -moz-border-radius:6px;
    -webkit-border-radius:6px;
    border-color:#d4d4d4;
    padding:0 10px 10px;
}
ul#css3menu1 li:hover>*{
    display:block;
}
ul#css3menu1 li{
    position:relative;
    display:block;
    white-space:nowrap;
    font-size:0;
    float:left;
}
ul#css3menu1 li:hover{
    z-index:1;
}
ul#css3menu1{
    font-size:0;
    z-index:999;
    position:relative;
    display:inline-block;
    zoom:1;
    *display:inline;
}
ul#css3menu1>li{
    margin:0;
}
* html ul#css3menu1 li a{
    display:inline-block;
}
ul#css3menu1 a:active, ul#css3menu1 a:focus{
    outline-style:none;
}
ul#css3menu1 a{
    display:block;
    vertical-align:middle;
    text-align:left;
    text-decoration:none;
    font:bold 12px Arial;
    color:#000000;
    text-shadow:#FFF 0 0 1px;
    cursor:pointer;
    padding:10px;
    background-color:#ebf4fb;
    background-image:url("mainbk.png");
    background-repeat:repeat;
    background-position:0 0;
    border-width:0 0 0 1px;
    border-style:solid;
    border-color:#C0C0C0;
}
ul#css3menu1 ul li{
    float:none;
    margin:10px 0 0;
}
ul#css3menu1 ul a{
    text-align:left;
    padding:4px;
    background-color:#FFFFFF;
    background-image:none;
    border-width:0;
    border-radius:0px;
    -moz-border-radius:0px;
    -webkit-border-radius:0px;
    font:11px Arial;
    color:#000;
    text-decoration:none;
}
ul#css3menu1 li:hover>a,ul#css3menu1 a.pressed{
    background-color:#b7ddf2;
    border-color:#C0C0C0;
    border-style:solid;
    color:#000000;
    text-decoration:none;
    text-shadow:#FFF 0 0 1px;
    background-position:0 100px;
}
ul#css3menu1 img{
    border:none;
    vertical-align:middle;
    margin-right:10px;
}
ul#css3menu1 img.over{
    display:none;
}
ul#css3menu1 li:hover > a img.def{
    display:none;
}
ul#css3menu1 li:hover > a img.over{
    display:inline;
}
ul#css3menu1 li a.pressed img.over{
    display:inline;
}
ul#css3menu1 li a.pressed img.def{
    display:none;
}
ul#css3menu1 span{
    display:block;
    overflow:visible;
    background-position:right center;
    background-repeat:no-repeat;
    padding-right:0px;
}
ul#css3menu1 li:hover>a,ul#css3menu1 li>a.pressed{
    background-color:#b7ddf2;
    background-position:0 100px;
    border-style:solid;
    border-color:#C0C0C0;
    color:#000000;
    text-decoration:none;
    text-shadow:#FFF 0 0 1px;
}
ul#css3menu1 ul li:hover>a,ul#css3menu1 ul li>a.pressed{
    background-color:#FFFFFF;
    background-image:none;
    color:#868686;
    text-decoration:none;
}
ul#css3menu1 li.topfirst>a{
    border-radius:5px 0 0 5px;
    -moz-border-radius:5px 0 0 5px;
    -webkit-border-radius:5px;
    -webkit-border-top-right-radius:0;
    -webkit-border-bottom-right-radius:0;
}
ul#css3menu1 li.toplast>a{
    border-radius:0 5px 5px 0;
    -moz-border-radius:0 5px 5px 0;
    -webkit-border-radius:0;
    -webkit-border-top-right-radius:5px;
    -webkit-border-bottom-right-radius:5px;
}
/* --------- End of Menu --------- */ 
```

EDIT1：我包括了脚本和样式表。![在此处输入图像描述](../Images/a97f28edcf2c623a3f1a02ddeefd685d.png)

EDIT2：请看图片。它应该澄清这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:05:20.560

我猜你想要这样的东西：[http ://www.cssmenus.co.uk/dropdown.html](http://www.cssmenus.co.uk/dropdown.html)

如果您展示示例或绘图，我们可以为您提供更好的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T11:17:28.120

问题出在这一行：

```
 $active = $links.first().addClass('active'); 
```

它采用菜单中的第一个链接并使其处于活动状态。您`<a>`在带有类菜单的 ul 中的第一个标签不是第一个菜单项，而是：

```
<a class="pressed" href="#menu1" style="height:40px;line-height:40px;"><span><img src="menu_files/css3menu1/db.png"/>MENU1</span></a> 
```

因此，您需要确保以第一个菜单项为目标。例如，您可以为其分配一个 id：

```
<li><a href="#submenu11" id="submenu-default">SUBMENU11</a></li> 
```

然后您必须将该行 javascript 重写为：

```
$active = $('#submenu-default').addClass('active'); 
```

这应该够了吧。显然，您可以使用任何其他方式来定位该链接。

编辑：也许更好的解决方案是重写你的 html 如下：

```
<ul id="css3menu1">
    <li class="topfirst"><a class="pressed" href="#menu1" style="height:40px;line-height:40px;"><span><img src="menu_files/css3menu1/db.png"/>MENU1</span></a>
            <ul  class="menu">
                <li><a href="#submenu11">SUBMENU11</a></li>
                <li><a href="#submenu12">SUBMENU12</a></li>
                <li><a href="#submenu13">SUBMENU13</a></li>
                <li><a href="#submenu14">SUBMENU14</a></li>
            </ul></li>
            <li class="menu"><a href="#menu2" style="height:40px;line-height:40px;"><img src="menu_files/css3menu1/schedule.png"/>MENU2</a></li>
            <li class="menu"><a href="#menu3" style="height:40px;line-height:40px;"><img src="menu_files/css3menu1/analysis.png"/>MENU3</a></li>
            <li class="toplast"><a href="#menu4" style="height:40px;line-height:40px;"><img src="menu_files/css3menu1/gps.png"/>MENU4</a></li>
        </ul> 
```

这样您就不必更改 javascript，因为现在菜单中的第一个链接确实是菜单的第一项。我把它留给你找出最适合你的方法。

# javascript - IE 8 数组迭代

> ID：10480867
> 
> 赞同：1
> 
> 时间：2012-05-07T10:59:03.363
> 
> 标签：javascript, arrays, internet-explorer, debugging

嗨，我正在为 IE8 兼容模式调试我的页面，而这个脚本就是不喜欢工作和崩溃。

基本上它必须遍历一个 3D 数组，并为变量添加一个本地路径。好吧，否则我可以这样做，但我只是好奇为什么*** * 它永远不会起作用...

欢迎任何建议:) 这是代码：

```
for(i=0;i<menu_items_p.length;i++)
for(j=0;j<menu_items_p[i].length;j++)
menu_items_p[i][j][1]='http://127.0.0.1/'+menu_items_p[i][j][1]; 
```

数组看起来像这样：

```
var menu_items_p =
[
    [   //Products
        ['Health Care', 'products/health.php'],
        ['Aroma Therapy','products/scents.php'],
    ],
            [      // Empty
             ],
    [   //Test
        ['What ever', 'spirulina/about.php'],
    ]
] 
```

但问题是它有时有空值，并且 array.length 会触发一些错误......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T11:20:25.267

使用原始数组声明时：

```
var menu_items_p =
[
    [   //Products
        ['Health Care', 'products/health.php'],
        ['Aroma Therapy','products/scents.php'],
    ],
            [      // Empty
             ],
    [   //Test
        ['What ever', 'spirulina/about.php'],
    ]
] 
```

错误发生在 IE8 中，但不在 IE9 中。只需删除两个逗号：

```
var menu_items_p =
[
    [   //Products
        ['Health Care', 'products/health.php'],
        ['Aroma Therapy','products/scents.php'] // here comma removed
    ],
            [      // Empty
             ],
    [   //Test
        ['What ever', 'spirulina/about.php'] // here comma removed
    ]
] 
```

一切都必须正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:20:43.873

也许您的代码可以通过这种方式处理空值：

```
for(var i = 0; i < menu_items_p.length; i++) {
    // we skip the value if it is empty or an empty array 
    if(!menu_items_p[i] || !menu_items_p[i].length) continue; 
    for(var j = 0; j < menu_items_p[i].length; j++) {
       // again, we skip the value if it is empty or an empty array
       if(!menu_items_p[i][j] || !menu_items_p[i][j].length) continue;
       menu_items_p[i][j][1] = 'http://127.0.0.1/' + menu_items_p[i][j][1];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T18:55:06.267

正如 Yoshi 和 ThiefMaster 所建议的那样，我做了以下，这就是解决它的方法：

```
for(var i=0;i<menu_items_p.length;i++)
if (menu_items_p[i] !== undefined)
for(var j=0;j<menu_items_p[i].length;j++)
if (menu_items_p[i][j] !== undefined)
menu_items_p[i][j][1]='http://127.0.0.1/'+menu_items_p[i][j][1]; 
```

1.  替换了全局变量。
2.  检查未定义。

很遗憾他们没有以正式的方式回答，所以我不得不回答我自己:) 谢谢大家！

# android - 在android应用程序中播放警报声音时出错

> ID：10480878
> 
> 赞同：-1
> 
> 时间：2012-05-07T10:59:51.530
> 
> 标签：android, notifications

我正在开发一个 android 应用程序，我必须在其中播放警报并设置提醒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T11:29:29.023

Android [AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)实际上并没有发出声音警报。如果您安排警报，警报管理器将通过启动`PendingIntent`您提供的（在您的情况下为 AlarmService）在设置的警报时间通知您的应用程序。它不再做任何事情。如果您想要声音，您的 AlarmService 应该在服务启动时播放。您可以为此使用 android[媒体](http://developer.android.com/reference/android/media/MediaPlayer.html)播放器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T05:33:26.727

要在通知中播放声音，您必须设置声音文件的 url，如下所示

```
SharedPreferences pref = PreferenceManager.getDefaultSharedPreferences(context);
boolean isSound = pref.getBoolean("sound", true);
String soundUri;
if(isSound) {
    soundUri = pref.getString("Ringtone", String.valueOf(RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION)));
}
notification.sound = Uri.parse(soundUri); 
```

对于设置通知声音，您可以使用`RingtonePreference`

这是首选项屏幕的演示 xml

```
 <CheckBoxPreference android:title="Vibrate"
        android:key="Vibrate" android:defaultValue="true"></CheckBoxPreference>
    <CheckBoxPreference android:title="Notification Sound"
        android:key="Sound" android:defaultValue="true"></CheckBoxPreference>
    <RingtonePreference android:title="Ringtone"
        android:key="Ringtone" android:dependency="Sound" android:summary="Select Ringtone"
        android:ringtoneType="notification" />
</PreferenceCategory>
<PreferenceCategory android:title="Synchronized Task Notification">
    <CheckBoxPreference android:title="Notify for new synchronized task"
        android:key="syncNotification" android:defaultValue="true"></CheckBoxPreference>
    <ListPreference
    android:title="Check for Synchronized tasks after every..."
        android:key="syncTime"
        android:dependency="syncNotification"
        android:defaultValue="300000"
        android:entries="@array/syncCheckTimeNames"
        android:entryValues="@array/syncCheckTimeValues" />
</PreferenceCategory> 
```

# jquery - Unable to hide the img using jquery?

> ID：10480880
> 
> 赞同：-2
> 
> 时间：2012-05-07T11:00:03.033
> 
> 标签：jquery, html

here is my code-snippet:

```
 <div id="navbar">
        <a href="index.html" >
        <img class="navbar" src="http://ssss.com/imgs/WG_home.png" />
        </a>Home
    </div>

    function used to hide:

    $(document).ready(function() { 
     alert("hello");
    if (location.search=="?value=nohome")
       {
        $("img[class='navbar']").hide();
       }

 }); 
```

Any one having any idea how to hide the image?

mrana

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T11:02:31.650

Try this instead:

```
if (window.location.href.indexOf("nohome") >= 0)
{
   $("img.navbar").hide(); // changed...........
} 
```

Notice that instead of `$("img[class='navbar']")`, you can simply use `$("img.navbar")` or `$(".navbar")` if `navbar` is applied only on images you want to target.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T11:16:30.413

Try

```
 $(document).ready(function() { 

if (location.href.indexOf("nohome") >= 0)
   {
    $("img[class='navbar']").hide();
   } 
```

});​</p>

Here is the [fiddle](http://jsfiddle.net/parush/5Sqg9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T11:03:40.370

try

```
$('.navbar']).hide(); 
```

make use of class selector insted of the selector you use ..

**EDIT**

To hide only one image out of 10-15 image with the same class , in that case you cannot go for class selector you need to make use of id selector which uniquelly identify the image...`("#id").hide();`

# android - 某些选项的默认值

> ID：10480882
> 
> 赞同：1
> 
> 时间：2012-05-07T11:00:12.287
> 
> 标签：android, default, option

我只想更改我的`CMParts`. 是的，在第一次启动时，该值为 true，但它不起作用（该选项刚刚选中但与未选中相同）。

例如，我改变了这个：

```
 mPowerWidgetIndicatorHide.setChecked((Settings.System.getInt(getContentResolver(),
            Settings.System.EXPANDED_HIDE_INDICATOR, 0) == 1)); 
```

进入这个：

```
 mPowerWidgetIndicatorHide.setChecked((Settings.System.getInt(getContentResolver(),
            Settings.System.EXPANDED_HIDE_INDICATOR, 1) == 1)); 
```

和 xml 值从`false`to`true`但没有任何反应。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T13:55:21.863

为什么不使用 SharedPreferences 来存储值？

# android - 即使将 url 设置为 imageview，图像也无法显示

> ID：10480883
> 
> 赞同：0
> 
> 时间：2012-05-07T11:00:13.470
> 
> 标签：android, bitmap, imageview

这是我的活动。

```
private ImageLoader testing;
testing = new ImageLoader(this);
imageview = (ImageView)findViewById(R.id.image_alllatestnewstitle);
...
...
... 
```

这是在列表视图中，因此它将显示多个图像。

```
private void filldata() {
    lv = (ListView) findViewById(android.R.id.list);

    String[] from = new String[] { "particularlatestnewstitle",
            "newscategorytitle", "newsdate" };
    int[] to = new int[] { R.id.text_particularlatestnewstitle,
            R.id.text_newscategorytitle, R.id.text_newsdate };

    fillMaps = new ArrayList<HashMap<String, String>>();
    for (int i = 0; i < webservice.news.size(); i++) {
        HashMap<String, String> map = new HashMap<String, String>();
        map.put("particularlatestnewstitle", webservice.news.get(i)
                .getNtitle());
        map.put("newscategorytitle", webservice.news.get(i).getNewCatName());
        map.put("newsdate", webservice.news.get(i).getNArticalD());

        fillMaps.add(map);
        imageview = (ImageView)findViewById(R.id.image_alllatestnewstitle);
        imageview.setTag(imagepath[i]);
        testing.DisplayImage(imagepath[i], imageview);
    }
    SimpleAdapter adapter = new SimpleAdapter(this, fillMaps,
            R.layout.main_alllatestnewslist, from, to);
    lv.setAdapter(adapter); 
```

这是我的 ImageLoader 类

```
public void DisplayImage(String url, ImageView imageView)
{
    imageViews.put(imageView, url);
    Bitmap bitmap=memoryCache.get(url);
    if(bitmap!=null){
        System.out.println(url.toString());
        System.out.println(bitmap.toString());
        imageView.setImageBitmap(bitmap);
    }else
    {
        queuePhoto(url, imageView);
    }
} 
```

这是xml布局

```
<ImageView
    android:id="@+id/image_alllatestnewstitle"
    android:layout_width="134px"
    android:layout_height="80px"
    android:layout_marginBottom="5px"
    android:layout_marginLeft="10px"
    android:layout_marginRight="10px"
    android:layout_marginTop="5px"
    android:scaleType="centerCrop" /> 
```

我正在打印结果

```
url and bitmap 
```

两者都不为空并显示正确的 url 链接。

但是当setimagebitmap时，它没有错误，但imageview也没有显示图像。

问题是什么？

p/s：如果需要，请索取更多代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T11:11:14.033

我确定您使用的是 Fedor 的延迟加载逻辑。

现在，根据您提供的代码，我可以说一件事，即您在调用 DisplayImage() 方法之前忘记将 TAG 设置为 ImageView。

```
testing.setTag(imagepath[i]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:17:53.310

尝试此代码`donwload image`并在`imageview`.

```
 try {
            URL url = new URL(urlStr);
            URLConnection ucon = url.openConnection();

            InputStream is = ucon.getInputStream();
            Bitmap bitmap = BitmapFactory.decodeStream(is);
            if(bitmap!=null){
                System.out.println(url.toString());
                System.out.println(bitmap.toString());
                imageView.setImageBitmap(bitmap);
            }
        } catch (MalformedURLException e1) {
            e1.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

# python - 从列表中排序元素

> ID：10480888
> 
> 赞同：0
> 
> 时间：2012-05-07T11:00:31.397
> 
> 标签：python

我需要从列表中步进一些元素（在本例中为 n）我还有另一个列表（o 列表）

```
n=['A','B','C','D','E']
o=['A','B','C','D','E','AS','sd','Z','R']
n.sort() 
```

现在，如果我使用此代码：

```
for o in sorted(n): 
```

代码为`'A','B','C','D','E'`.

我需要运行 for 代码，但只需要运行`'AS','sd','Z','R'`项目。

类似的东西：运行 o 列表中的项目的代码，而没有 n 列表中的项目

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T11:04:05.780

这仅在`o`没有重复项时才有效：

```
n = ['A','B','C','D','E']
o = ['A','B','C','D','E','AS','sd','Z','R']
a = sorted(set(o) - set(n))

# a == ['AS', 'R', 'Z', 'sd'] 
```

否则使用这个：

```
n = ['A','B','C','D','E']
o = ['A','B','C','D','E','AS','sd','Z','R', 'AS']
s = set(n)
a = sorted(elem for elem in o if elem not in s)

# a == ['AS', 'AS', 'R', 'Z', 'sd'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T11:09:50.707

我建议使用[列表推导](http://en.wikipedia.org/wiki/List_comprehension#Python)进行过滤并使用 sorted() 进行排序：

```
for item in sorted(element for element in n if element not in o):
  print item 
```

如果`n`往往很大，那么首先创建一个集合会更快：

```
forbidden = set(o)
for item in sorted(element for element in n if element not in forbidden):
  print item 
```

**编辑：**按照评论中的建议添加了一个集合并使用生成器表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T11:09:04.013

Set 有这样的操作。

```
n=['A','B','C','D','E']
o=['A','B','C','D','E','AS','sd','Z','R']

for ab in set(o).difference(set(n)):
    print ab 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T11:31:33.577

```
n = ['A','B','C','D','E']
o = ['A','B','C','D','E','AS','sd','Z','R']
result = sorted(set(o) - set(n)) 
```

# html - CSS将粗体测试更改为黄色背景

> ID：10480889
> 
> 赞同：-1
> 
> 时间：2012-05-07T11:00:31.600
> 
> 标签：html, css

我有一个 html 测试：

```
<body>
<div class="test">This is a <b>paragraph</b>.</div>
</body> 
```

我的CSS：

```
.test
{
color: #1F1FFF;
} 
```

我希望用黄色背景突出显示粗体文本，我该如何使用 css？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T11:02:00.057

演示：http: [//jsfiddle.net/PuC9e/](http://jsfiddle.net/PuC9e/)

```
.test b
{
  background-color: yellow;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T11:04:27.060

您可以使用

```
.test b
{
background-color:yellow;
} 
```

或者您可以使用内联样式，例如

```
<b style="background-color:yellow;">XYZ</b> 
```

[在这里演示](http://jsfiddle.net/NcAsz/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T11:05:04.070

```
<style>
.test b
{
    background-color:#FF0;

}
</style>
<body>
<div class="test">This is a <b>paragraph</b>.</div>
</body> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T11:06:13.000

只需再添加一个 css 属性

```
.test b {
    background-color: yellow;
    color: #FF0000;
} 
```

请根据您的需要更改背景颜色。

# javascript - 使用递归从对象中获取值

> ID：10480890
> 
> 赞同：0
> 
> 时间：2012-05-07T11:00:38.043
> 
> 标签：javascript, arrays, data-structures, recursion

我有一个 JavaScript 对象：

```
var testJSON = {
    "Divisions": {
        "modes": [{
            "number": 1,
            "name": "Fruits",
            "Fruits": [{

                "name": "Mango",

                "Mango": [{
                    "number": 1,
                    "name": "Nagpur"
                }]
            }]
        }, {
            "number": 4,
            "name": "Coffee",
            "Coffee": [{

                "name": "Germany",
                "Germany": [{
                    "number": 1,
                    "name": "Germany"
                }]

            }, {

                "name": "Italy",
                "Italy": [{
                    "number": 1,
                    "name": "Italy"
                }]
            },

            ]
        }, {
            "number": 5,
            "name": "Burger",
            "Burger": [{
                "number": 2,
                "name": "McDonalds"
            }, {
                "number": 1,
                "name": "Ham"
            }]
        }]

    }
}; 
```

我想将每个级别中“名称”的值获取到不同的数组..

我试过代码

```
function recursion(input)
    {
        var arrayLength=input.Divisions.modes.length;

        for(var i=0;i<arrayLength;i++)
            {
                var elem = input[i];

                if(input[i].name==undefined);   
                {       
                    return;
                }

                recursion(elem);

        }

}

var c=recursion(testJSON); 
```

这行不通。我想这是我做错的递归部分。对象的级别不是固定的。

# node.js - 如何检测来自同一用户的多个 socket.io 连接

> ID：10480891
> 
> 赞同：14
> 
> 时间：2012-05-07T11:01:00.510
> 
> 标签：node.js, express, socket.io

我已按照本指南：[http](http://www.danielbaulig.de/socket-ioexpress/) : //www.danielbaulig.de/socket-ioexpress/ 将 express.js 链接到 socket.io，并且效果很好。

我让用户在一个页面上登录（设置会话对象的 express.js POST 请求），当他们通过身份验证时，它会将他们引导到加载 socket.io 的新页面，并且服务器上的 socket.io 可以获取会话是从快递设置的。这样一切正常。

现在我在使用 socket.io 的页面上有用户，当刷新该页面时 - 有时 socket.io 连接仍然存在（即它不会断开连接）。我想要做的是改变`io.set('authorization')`函数以确保当用户连接时 - 它会断开仍然对该客户端开放的所有现有 socket.io 实例。

这是它目前的样子：

```
//socket.io connect to express
var parseCookie = require('connect').utils.parseCookie;
io.set('authorization', function (data, accept) {
    if (data.headers.cookie) 
    {
        data.cookie = parseCookie(data.headers.cookie);
        data.sessionID = data.cookie['express.sid'];
        // (literally) get the session data from the session store
        sessionStore.get(data.sessionID, function (err, session) 
        {
            if (err || !session) 
            {
                // if we cannot grab a session, turn down the connection
                //note: a session is created when the user logs in
                accept('Error', false);
            } 
            else 
            {
                //TODO something here before we accept the connection
                //??

                // save the session data
                data.session = session;
                //accept the connection
                accept(null, true);
            }
        });
    } 
    else 
    {
        return accept('No cookie transmitted.', false);
    }
}); 
```

如何检查即将被接受的客户端是否有以前的连接，并且它仍然是打开的（因此我们需要断开那个旧的连接）。

express 会话中有一个“用户名” - 所以我们可以获取会话对象并获取用户名，我只是不知道如何浏览所有 socket.io 客户端的列表并查看 express每个会话并检查它是否与当前正在验证的用户相同。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T06:02:00.217

在我的应用程序中，我明确地管理 socket.io 会话。在服务器端，每当建立新连接时，我都会执行以下操作：`socketio_session[user_id].push(session)`. 这使我可以访问为特定用户连接的所有会话。在您的情况下，您可能不需要存储每个用户的会话列表，而只存储最新会话并`onconnect`在存储新会话之前强制断开现有会话（如果有）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-22T04:55:34.190

Socket.IO上有很多代码已经老了。

新文档（Socket.IO 1.3.6，现在）说：

“旧的 io.set () 和 io.get () 方法已被弃用，仅支持向后兼容。这里是一个示例授权旧样式到中间件的翻译。” 在“从 0.9 迁移”部分

如果您使用新版本的 Socket.IO。您需要的代码类似于：

```
 var sessionStore    = new MongoStore({ url: config.db });
    var cookie          = require('cookie-parser')("SECRET");
    io.use(function(socket, callback) {
        if (socket.request.headers.cookie) {
            cookie(socket.request, null, function(err) {
                sessionStore.get(socket.request.signedCookies["connect.sid"], function(err, session) {
                    if (err || !session) {
                      callback('Session error', false);
                    } else {
                      socket.request.sessionID = socket.request.signedCookies["connect.sid"];
                      console.log(socket.request.sessionID);
                      callback(null, true);
                    }
                  });
            });
        }
        else {
            return callback('No session.', false);
        }
    });
    io.on('connection', function(socket) {
        console.log(socket.request.sessionID);
    }); 
```

# c# - 从 C# 中的单词中删除前缀和后缀

> ID：10480893
> 
> 赞同：6
> 
> 时间：2012-05-07T11:01:07.420
> 
> 标签：c#, c#-4.0

我有一串单词，我想从每个单词中删除一些后缀和前缀（位于数组中），然后将词干存储在字符串中。请问有什么建议吗？提前致谢。

后缀和前缀的总数超过100个，用什么来表示它们更好？大批？正则表达式？请问有什么建议吗？

```
public static string RemoveFromEnd(this string str, string toRemove)
{
if (str.EndsWith(toRemove))
    return str.Substring(0, str.Length - toRemove.Length);
else
    return str;
} 
```

这可以与后缀一起使用，那么前缀呢？有没有一种同时处理后缀和前缀的快速方法？我的绳子太长了。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-07T12:03:10.647

[我的 StringHelper 类](http://geekswithblogs.net/mnf/archive/2006/07/13/84942.aspx)有（除其他外）方法 TrimStart、TrimEnd 和 StripBrackets，它们对你很有用

```
//'Removes the start part of the string, if it is matchs, otherwise leave string unchanged
    //NOTE:case-sensitive, if want case-incensitive, change ToLower both parameters before call
    public static string TrimStart(this string str, string sStartValue)
    {
        if (str.StartsWith(sStartValue))
        {
            str = str.Remove(0, sStartValue.Length);
        }
        return str;
    }
    //        'Removes the end part of the string, if it is matchs, otherwise leave string unchanged
    public static string TrimEnd(this string str, string sEndValue)
    {
        if (str.EndsWith(sEndValue))
        {
            str = str.Remove(str.Length - sEndValue.Length, sEndValue.Length);
        }
        return str;
    }
//        'StripBrackets checks that starts from sStart and ends with sEnd (case sensitive).
//        'If yes, than removes sStart and sEnd.
//        'Otherwise returns full string unchanges
//        'See also MidBetween
        public static string StripBrackets(this string str, string sStart, string sEnd)
        {
            if (StringHelper.CheckBrackets(str, sStart, sEnd))
            {
                str = str.Substring(sStart.Length, (str.Length - sStart.Length) - sEnd.Length);
            }
            return str;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:31:36.593

如果您无法从字典中检查哪些单词实际上是单词，那么像“premium”之类的单词将很难不误认为是前缀。从理论上讲，您可以创建某种规则来检查“mium”是否是英文单词，但它永远不会完整并且需要大量工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T11:07:49.013

1.  将您的字符串拆分为一个字符串数组，每个条目都是每个单词。为此，您使用`yourString.Split(',')`. 使用分隔你的单词的字符而不是`','`，它可能是一个 spcae`' '`
2.  使用 foreach 检查您的单词是否有任何前缀或后缀，这样做您使用`yourWord.StartsWith("yourPrefix")`和 `yourWord.EndsWith("yourPrefix")`
3.  使用 yourWord.Replace 或 yourWord.SubString 删除前缀/后缀。如果前缀/后缀位于单词的中间，请注意不要删除它！

# php - ffmpeg 两个音频，一个视频在输出

> ID：10480898
> 
> 赞同：0
> 
> 时间：2012-05-07T11:01:30.073
> 
> 标签：php, audio, video, ffmpeg

大家好，我刚刚安装了ffmpeg，我对它很陌生。设法合并/合并音频和视频文件，但现在我想将 2 个音频文件和一个视频合并到一个输出文件中。音频文件是：.wav 视频文件是：.flv 输出是：.flv

目前我有这个代码，我应该添加什么：

`system("$ffmpegpath -i audio1.wav -i audio2.wav -i video1.flv -y output.flv");`

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-10T17:41:18.300

找到了这个项目，这是我的解决方案：

```
<?php
    $ffmpegpath = "ffmpeg.exe"; /////ffmpeg.exe path, I have it in the same folder
    $videoFile = "videoplayback.flv";
    $audioFile = "comment.wav";
    $targetVideo = "output.flv";

    //
    system("$ffmpegpath -i $audioFile -i $videoFile -y $targetVideo");
?> 
```

让我知道它是否有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T06:44:55.073

我认为您必须使用选项-map。阅读此链接，[如何使用 ffmpeg 同时对具有不同选项的多个音频流进行编码](http://ubuntuforums.org/showthread.php?t=1943934)

例子：

```
ffmpeg -i merged-vobs.mpeg -map 0:0 -s 640x368 -f ogg -vcodec libtheora -r 25 -b:v 1200k -metadata:s:v:0 title= "Video Title" -acodec libvorbis -ar 48000 -map 0:1 -ac:a:0 6 -b:a:0 192k -metadata:s:a:0 title="Track1 Title" -map 0:4 -ac:a:1 2 -b:a:1 96k -metadata:s:a:1 title="Track2 Title" -async 1 -pass 2 -passlogfile "outputlog" "output.ogv" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-09T06:39:08.263

```
 ffmpeg -i file1.mp3 -i file2.mp3 mix.mp4 -map 0:0 -map 1:0 -newaudio 
```

# visual-studio-2010 - 你需要在 BizTalk 中开发什么

> ID：10480905
> 
> 赞同：4
> 
> 时间：2012-05-07T11:01:45.643
> 
> 标签：visual-studio-2010, biztalk

我工作的公司最近购买了 BizTalk 2010。

卖家让我们创建运行 ms server 2008、biztalk server、sql server 和 visual studio 的虚拟机。这是我机器上的一个重大减速，我想知道，你需要在 BizTalk 中开发所有这些吗？你不能只在本地视觉工作室工作来做你的开发，有一个部署这些本地项目的测试环境，并从这个环境创建一个 msi 来现场安装吗？

卖家自己似乎认为这是不可能的，我的谷歌技能无法帮助我告诉我我的想法是否可行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T16:14:06.897

这是我的设置方式：

在我的本地机器上：

*   视觉工作室 2010
*   BizTalk 服务器 (2010)
*   微软 SQL 服务器

我不使用虚拟机进行开发。VM 通常比“直接在熨斗上”运行相同的东西慢 5%。我以前使用过虚拟机，并且为了提高开发速度而放弃了这种做法。

您可以在另一台计算机上托管 BizTalk 和 SQLServer。我更喜欢把它们放在我的机器上，所以我有自己的测试环境。它更快，我不必担心在开发时会影响其他人。

您至少需要 4 gig 的 RAM。不过，我会推荐 8 gig。我的机器运行 4 gig 并不慢。

我还建议您查看[biztalk 开发框架项目](http://biztalkdeployment.codeplex.com/) ，它通过脚本为您提供一键式部署。在进行大量开发时非常方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T14:07:11.193

您当然可以在另一台机器上托管您的本地开发 SQL 实例。但是没有办法（至少是 BizTalk 2009）将开发工具与产品本身分离。但是您是正确的，因为您不需要在本地部署到您的开发 BizTalk 实例。

然而，在本地拥有所有这些东西确实简化了生活。不确定通过远程托管所有内容会获得什么。RAM/处理器足够便宜。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T14:15:38.647

您可以在本地托管 BizTalk。安装的复杂性实际上取决于您寻求的功能集。最简单的 BizTalk 环境使用 Visual Studio、SQL Server 数据库和 BizTalk windows 服务。您还可以使用与 SharePoint 耦合的 BAM 门户，但这不是必需的。

我知道有些公司通过 VM 方法来简化部署。它在 VM 中非常慢，但可以很容易地让开发人员快速运行而无需担心配置。我发现配置对于专业的 BizTalk 开发人员来说是最重要的方面——它只取决于您进入的级别。

部署 BizTalk 解决方案就像通过导入/导出命令打包 MSI 和绑定配置一样简单。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T11:09:58.170

您将需要 SQL Server，因为它为 BizTalk 进行消息管理。

为了减少您机器上的工作，您可以在另一台机器上安装 SQL Server，但要确保它在同一个域中。当它必须跨域通信时，我发现了问题（请注意 BTS 2006）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T08:47:59.643

从理论上讲，您可以在本地开发并部署到远程机器，但是我认为这会大大减慢您的开发周期。正如 Jay 所提到的，如果其他人也部署到同一环境中，您可能会遇到冲突。

我自己是 BizTalk 开发的虚拟机的大用户 - 事实上，我为每个客户都有一个单独的开发 VM，它是根据他们的独特要求设置的。我不会在裸机上本地运行任何开发环境，因为我倾向于每年升级一次笔记本电脑，而且我不想每次都为重建而头疼。

您没有提到您使用的虚拟化解决方案，但是您已经提到您正在您的机器上运行它。如果您正在寻找一个不错的桌面 VM 解决方案，我强烈推荐 VirtualBox（请参阅[http://www.virtualbox.org](http://www.virtualbox.org)）。它归甲骨文所有，但最初是 Sun Microsystems 的产品。我确实尝试过 VirtualPC 和 VMWare，但我发现 VirtualBox 最适合我的稳定和快速需求。

至于我当前的 BizTalk 2010 VM 开发环境，我目前正在一台具有 8Gb 和固态驱动器的 64 位笔记本电脑上运行具有 4Gb RAM 的 VM；我在虚拟机上安装了以下软件：

*   Windows Server 2008 R2 标准版 64 位
*   SQL Server 2008 R2 64 位
*   BizTalk Server 2010 开发者版
*   Visual Studio 2010 专业版

N。

# javascript - 从 JavaScript 调用 Perl 脚本

> ID：10480908
> 
> 赞同：0
> 
> 时间：2012-05-07T11:02:00.150
> 
> 标签：javascript, perl, firefox-addon

我正在开发一个 Firefox 插件，并且我有一个用于执行特定任务的 Perl 脚本。这个 Perl 脚本需要从插件中调用。实现这一点的最佳方法是什么？我正在考虑在 perl（在我的服务器上）中创建一个套接字程序来监听传入的连接（来自我的插件），然后调用我所需的 Perl 脚本。但是，我将如何从 Firefox 插件中的 JavaScript 调用这个 Perl 脚本呢？另外，有没有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:06:04.990

执行此操作的典型方法是设置一个支持[Perl CGI](http://perldoc.perl.org/CGI.html)的适当 Web 服务器，并在客户端使用 JavaScript 和 Ajax 调用您的脚本。

这两种技术都有大量的在线资源。

# java - :inputText 只返回空值？（未达到设置器）

> ID：10480909
> 
> 赞同：0
> 
> 时间：2012-05-07T11:02:01.503
> 
> 标签：java, netbeans, jsf-2, jsf-1.2

我在 jsf 中编写一个注册表格：

在 *.xhtml 文件中：

```
 <h:outputLabel class="Float" for="password" value="Passwort"/>
   <h:inputText id="password" rendered="true" value="#{Register.password}" label="Passwort">
   <f:validateLength minimum="3" maximum="8"/>
  </h:inputText>
 </fieldset>
</h:form> 
```

在豆子里：

```
public String getPassword() {
    return password;
}

public void setPassword(String pwd) {
    this.password = pwd;
} 
```

我设置了一个断点并注意到我的设置器没有到达？

为什么？

**++++1.更新++++++**

注册.java：

```
import java.io.Serializable;
import java.util.ArrayList;
import java.util.Date;
import java.util.HashMap;
import java.util.List;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import javax.faces.context.FacesContext;
import javax.faces.event.ValueChangeEvent;

@ManagedBean(name="Register")
@SessionScoped
public class Register implements Serializable{

    private String password = "Fill in!";

    /** Creates a new instance of Customer */
    public Register() {
        //null
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String pwd) {
        this.password = pwd;
    } 
```

**++++2.更新++++++**

```
<div id="buttons">
   <h:commandButton id="enter" accesskey="r" value="Registrieren" action="#{Register.registerPlayer()}" immediate="true"/>
</div> 
```

**++++3.Update++++++** 我的表单代码：

```
<!-- Login-->

<h:form>
                        <h3><span xml:lang="en">Login</span> Daten </h3>
                        <div class="formblock">

                            <fieldset>
                                <div>
                                    <h:outputLabel class="Float" for="username" value="Username"/>
                                    <h:inputText id="username" rendered="true" value="#{Register.username}" label="Username">
                                    </h:inputText>
                                </div>

                                <div>
                                    <h:outputLabel class="Float" for="password" value="Passwort"/>
                                    <h:inputSecret id="password" rendered="true" value="#{Register.password}" label="Passwort">
                                    </h:inputSecret>
                                </div>
                            </fieldset>

                        </div>
                        <div id="buttons">
                            <h:commandButton id="enter" accesskey="r" value="Registrieren" action="#{Register.registerPlayer()}" immediate="true"/>
                              <!-- <h:outputText value="#{msg.wrongpwd}" rendered="#{loginCtrl.loginfailed}" style="color: red"/>
                              <h:messages style="color: red"/> -->
                        </div>
                    </h:form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:51:58.590

将您的`h:commandButton`和`<h:inputText`放在您尝试提交的相同表单中...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:47:49.967

我注意到你`immediate="true"`的`commandButton`. 这似乎是您的模型未更新的可能原因。

[这个博客条目](http://radio.javaranch.com/gthought/2005/01/04/1104874993000.html)似乎描述了一个类似的问题，如果不一样的话。现在，有一些解决方法，您可以使用`bind`属性直接从组件中获取提交的值，或者您也可以`immediate="true"`在输入组件上使用，但我认为最好的解决方案是不要`immediate`在您的提交上使用按钮，除非你真的需要它。

# c# - 在数据绑定 DevExpress.XtraEditors.TextEdit 控件上用空字符串替换“01-01-0001”

> ID：10480912
> 
> 赞同：3
> 
> 时间：2012-05-07T11:02:27.497
> 
> 标签：c#, winforms, devexpress

`DateTime.Mindate`当记录的列具有 NULL 值时，我们的不可更改数据层返回。因此，当您`null`在记录的列中输入一个值并再次读取它时，您会得到`01-01-0001`.

当将此值绑定到此`DevExpress.XtraEditors.TextEdit control`值 (01-01-0001) 时，当然会显示在控件中。

现在我们想将控件显示为空（无内容），但我不知道如何实现。

我确实发现当对象的属性为 NULL 时，您可以为控件设置自定义显示文本，但这当然行不通，因为该值为`01-01-0001`而不是 null。

简而言之：如果是值为 的日期，则`01-01-0001`在控件中不显示任何内容，否则显示日期。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:59:30.650

您可以处理`FormatEditValue`事件以按照您想要的方式格式化日期。

在另一个方向，您使用`ParseEditValue`事件来解析用户输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T14:32:56.337

您可以使用`DateEdit`控件而不是`TextEdit`

将`NullDate`属性设置为`1-1-0001`

如果不需要，请关闭“按钮”设置中的下拉按钮。然后它看起来就像一个`TextEdit`.

![图片](../Images/9084ab033feb4a5560f73e7f20ae82d6.png)

# c# - 停止服务

> ID：10480914
> 
> 赞同：1
> 
> 时间：2012-05-07T11:02:33.303
> 
> 标签：c#, windows-services

我正在尝试使用我制作的控制台程序停止正在运行的服务。这是我的代码：

```
ServiceController sc = new ServiceController(ServiceName, ".");
sc.Stop(); 
```

然后我等待服务状态变为已停止，但这永远不会发生。它似乎有 StopPending 并且从未停止过。当我检查 Services.msc 时，它被列为已停止，并且在任务管理器中，该进程消失了。

它会永远处于待处理状态吗？难道我做错了什么？如果我需要在那里修改某些内容，我也有该服务的代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T11:06:23.943

> 难道我做错了什么？

您可以在停止服务后尝试[等待：](http://msdn.microsoft.com/en-us/library/35st9aw1.aspx)

```
sc.Stop();
sc.WaitForStatus(ServiceControllerStatus.Stopped, TimeSpan.FromSeconds(25)); 
```

该`WaitForStatus`方法将等待服务达到指定状态或指定超时到期后再返回。

# c# - 按拆分字符串 C# 和 LINQ 排序

> ID：10480916
> 
> 赞同：0
> 
> 时间：2012-05-07T11:02:40.493
> 
> 标签：c#, linq

我有一个这样的数据库表：

```
## Settings ##
ID (string)
Value (string) 
```

ID 是一个类似于 Area.Category.SettingName 的字符串。我正在尝试基于 ID 构建菜单结构，所以我希望它像这样呈现。

```
- Area
-- Category
--- SettingName 
```

数据可能是这样的：

```
AreaOne.CategoryOne.MySetting
AreaOne.CategoryOne.MySecondSetting
AreaTwo.CategoryOne.MySetting
... 
```

因此，为此，我尝试获取所有一级设置，并尝试使用以下代码：

```
List<Settings> settings = settings.GroupBy(x => x.ID.Split('.')[0]).FirstOrDefault().ToList() 
```

并期待这个结果：

```
AreaOne
AreaTwo 
```

但是得到了这个结果：

```
AreaOne
AreaOne
AreaTwo 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:05:43.803

如果您想要的只是一级设置，那么正确的查询将是

```
var delimiter = new[] {'.'};
settings.Select(x => x.ID.Split(delimiter, 2)[0]).Distinct().ToList() 
```

这会切断每一行的 L1 设置，并用于`Distinct`确保您只将它们中的每一个取回一次。`GroupBy`除非您想获取有关每个 L1 设置的汇总信息（例如，如果您想从数据库中获取完整信息，但由于某种原因很方便，因此按 L1 设置名称分组），否则无需使用。

我还使用了`Split`带有“限制”参数的重载，因为做你要扔掉的工作是没有意义的。

最后，使用 和 的组合在`FirstIndexOf`性能`Substring`方面会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:06:13.460

添加一个 '.Distinct()' ，或者重新编码来做

```
var result = settings.Select(s => x.ID.Split('.')[0]).Distinct(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T11:06:51.930

您需要从结果列表中删除重复条目。有三个输入，因此您将获得三个输出：

像下面这样的东西应该只返回一个：

```
settings.Select(x => x.ID.Split('.')[0]).Distinct().ToList() 
```

# c++ - 如果结构有构造函数，奇怪的“强类型不匹配”lint 警告

> ID：10480927
> 
> 赞同：1
> 
> 时间：2012-05-07T11:03:30.543
> 
> 标签：c++, lint

我遇到了一个奇怪的“警告 639：**二进制操作**中类型 'myip' 的强**类型不匹配**”

 **```
//file ip4.h
#include <IPAddress.h>   // which have ::ip::IPAddress

typedef ::ip::IPAddress myip;

myip myiptest;   // lint Warning 639 
::ip::IPAddress ip2;  // No lint warnings 
```

IPAddress.h 文件包含 ::ip::IPAddress 如下

```
namespace ip
{
    struct IPAddress
    {
        IPAddress();
            ...
    };
} 
```

我认为这里没有不匹配！此错误的 PC-lint 手册说明：

> 当一个值通过二元运算符与另一种类型连接（即组合）时，检查强类型。

那么有什么问题呢？

**更新：**经过试验，似乎只有在结构具有构造函数时才会引发此警告，我认为这以某种方式解释了当我声明一个对象时它返回类型`::ip::IPAddress`不是`myip` 这里是不匹配的事情。我对吗？**

# php - PHP/MySql 中的格式化时间

> ID：10480931
> 
> 赞同：1
> 
> 时间：2012-05-07T11:03:44.240
> 
> 标签：php, mysql

我想以这种格式格式化 MySql 结果中的日期（代码是我在网站上其他地方使用的代码，而不是我尝试使用的实际代码，我只想要这种格式）......

```
date("j F, Y", strtotime($result['comm_date'])); 
```

我已经在网站的其他地方做过，但不知道如何格式化以下结果。它是 for 循环的一部分，$str_comments 最终会被回显以显示带有用户名和评论日期的评论列表。

```
$str_comments .= "<span class='comment'>" . mysql_result($result, $j, 'comment') . "</span>";
$str_comments .= " by " . mysql_result($result, $j, 'username');
$str_comments .= " on " . mysql_result($result, $j, 'comm_date') . "</br><br/>"; 
```

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:10:06.170

不应该只是：

```
$str_comments .= "<span class='comment'>" . mysql_result($result, $j, 'comment') . "</span>";
$str_comments .= " by " . mysql_result($result, $j, 'username');
$str_comments .= " on " . date("j F, Y", strtotime(mysql_result($result, $j, 'comm_date'))) . "</br><br/>"; 
```

# c# - MySQL 返回的 ID 不正确

> ID：10480932
> 
> 赞同：1
> 
> 时间：2012-05-07T11:03:48.763
> 
> 标签：c#, mysql

我有一个看起来像这样的存储过程

```
BEGIN
insert into `TheSomaProject`.`Projects` 
( `ProjectNr`, `MachineName`, `MachineNameEng`, `Type_Id`, 
  `SerialNr`, `Description`, `Created`, `CompanyId`, `MachineType` ) 
values 
( param_ProjectNr, param_MachineName, param_MachineNameEng, param_TypeId, 
  param_Serial, param_Description, NOW(), param_CompId, param_MachineType); 
SELECT last_insert_id(); 
END 
```

但是返回值给了我 ID，它看起来像这个 0x00000000。C# 代码如下所示

```
MySqlDataReader Reader;
MySql.Data.MySqlClient.MySqlCommand cmd = new MySql.Data.MySqlClient.MySqlCommand();
cmd.Connection = conn;
cmd.CommandText = "CALL stp_InsertProject(@param_ProjectNr, @param_MachineName, @param_MachineNameEng, @param_TypeId, @param_Serial, @param_Description, @param_CompId, @param_MachineType);";
cmd.Parameters.AddWithValue("@param_ProjectNr", projectNr);
cmd.Parameters.AddWithValue("@param_MachineName", MachineName);
cmd.Parameters.AddWithValue("@param_MachineNameEng", MachineNameEng);
cmd.Parameters.AddWithValue("@param_TypeId", TypeId);
cmd.Parameters.AddWithValue("@param_Serial", SerialNr);
cmd.Parameters.AddWithValue("@param_Description", Description);
cmd.Parameters.AddWithValue("@param_CompId", CompanyId);
cmd.Parameters.AddWithValue("@param_MachineType", MachineType);
conn.Open();
Reader = cmd.ExecuteReader();
while (Reader.Read())
{
    Id = Convert.ToInt32(Reader["last_insert_id()"]);
}
conn.Close(); 
```

但是，如果我尝试在 phpMyAdmin 中使用相同的 stp_InsertProject，我会得到正确的 id。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T11:22:24.747

您的存储过程不会返回包含名为“last_insert_id()”的列的结果集，因此使用 an`MySqlDataReader`将不起作用（如您所料）。

用于`ExecuteScalar()`获取结果。请注意，返回的值实际上是一个[64 位整数](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)，因此应该使用`Int64`(or `long`) 类型来保存结果：

```
Int64 lastInsertId = (Int64)cmd.ExecuteReader(); 
```

如果您需要一个`Int32`变量，并且如果插入太多行则有溢出的风险，请确保您不要直接转换为`Int32`(or `int`)，因为这将导致 an ，`InvalidCastException`因为返回类型实际上不是`Int32`but `Int64`。在这种情况下使用`Convert.ToInt32`. 但我真的建议您使用 64 位整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T11:16:49.640

`Int64 i = (Int64)cmd.ExecuteScalar();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T11:15:47.050

我想你必须用单独的查询来代替

```
//your code till the line "conn.Open();" goes here
cmd.ExecuteNonQuery();
cmd.CommadText="SELECT last_insert_id()";
Id=Convert.ToInt32(cmd.ExecuteScalar()); 
```

# amazon-ec2 - 格式错误的输入未知命令：“mon-put-metric-alarm”

> ID：10480950
> 
> 赞同：1
> 
> 时间：2012-05-07T11:04:39.460
> 
> 标签：amazon-ec2, amazon-web-services

我正在配置我的 aws ec2 ubuntu 实例以进行自动缩放。我已经设置了启动配置文件和自动缩放组。我在设置自动缩放策略方面也非常成功。我有一个返回 POLICY-ARN 必须用于设置云监视策略。

当我运行 as-put-metric-alarm 命令时，我得到了这个

“格式错误的输入未知命令：'mon-put-metric-alarm'”

我试图解决它我能够理解实际上出了什么问题。

请帮帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T12:03:08.827

我终于弄明白了。问题是 PATH 变量设置不正确。

# c# - 敌人之间的生成延迟

> ID：10480951
> 
> 赞同：1
> 
> 时间：2012-05-07T11:04:40.573
> 
> 标签：c#, xna, delay, spawning

我正在 XNA 中开发一款塔防游戏，并且我有一个名为 Tank 的类，它创建一个敌人，该敌人沿着通过 A* 找到的地图的路线前进。现在，我可以创建多个 Tank 实例，但它们都是同时生成的。这意味着他们在沿着路线行驶时处于完全相同的位置，从而看起来只有一个敌人。

这是我加载新浪潮的代码：

```
if (spawn == true)
{
    maxTanks += 2;
    killsInWave += 2;

    tanks = new Tank[maxTanks];
    for (int i = 0; i < maxTanks; i++)
    {
        tanks[i] = new Tank();
        tanks[i].Initialize(map);
        tanks[i].LoadContent(Content);                                  
    }
    waveNum += 1;
    spawn = false;
} 
```

谁能给我一点帮助，让每个敌人在它和最后一个之间产生延迟？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T11:16:28.897

你需要一个基于时间的生成率，类似于这个......

```
 SpawnUnitsCount = n;
   Units_Per_Second = 5; // 5 Per second

   void Update(float ElapsedSeconds)  // (float) gametime.ElapsedTime.TotalSeconds
   {      
    if (SpawnUnitCount>0)
    {
      CreationRate += Units_per_second * ElapsedSeconds;
      while ( CreationRate >= 1 )
      {
         CreationRate--;
         MakeNewUnit(); 
         SpawnUnitsCount --;
         if (SpawnUnitCount == 0)
         {
            CreationRate = 0; // The wave is finished
         }
      }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:54:07.707

不确定 XNA 的具体情况，但如果您需要间隔执行一些重复操作，您可以使用类似的东西：

```
 Action addTank = null;
        int interval = 1000; // 1000 milliseconds
        int requiredNumberOfTanks = 10;
        int tanksCreated = 0;

        var timer = new Timer(o => addTank());
        addTank = () =>
                         {
                             CreateTankMethod();  // your method to create tank
                             tanksCreated = tanksCreated + 1;
                             if (tanksCreated < requiredNumberOfTanks)
                                 timer.Change(interval, 0);
                         };
        timer.Change(interval, 0); 
```

此代码将以最有效的方式利用线程。它比`Thread.Sleep()`

您可能还想让坦克之间的间隔显得更加随机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T11:29:42.580

我会这样做：

```
//need to be defined in your loop
int nextTankToCreate(0);
int iterationCount(0);
int CreateTime(500); //create every 500 iteration

iterationCount++;
if (spawn == true && iterationCount >= createTime)
        {
            iterationCount = 0;
            maxTanks += 2;
            killsInWave += 2;

            tanks = new Tank[maxTanks];
            tanks[nextTankToCreate] = new Tank();
            tanks[nextTankToCreate].Initialize(map);
            tanks[nextTankToCreate].LoadContent(Content);                                  
            nextTankToCreate++;

            if (nextTankToCreate == maxTanks)
            {
                nextTankToCreate = 0;
                waveNum += 1;
                spawn = false;
            }
        } 
```

# javascript - JavaScript - 按名称设置对象键

> ID：10480959
> 
> 赞同：0
> 
> 时间：2012-05-07T11:05:23.700
> 
> 标签：javascript, object, key

我有输入 JS 函数的名称的实时提要，我想创建一个对象，例如：

```
var renderObj= {
{"name": "test1", "size": 3938},
{"name": "test2", "size": 3812},
{"name": "test3", "size": 6714}
}; 
```

所以`renderObj`是空的开始。每次输入名称时，我都需要检查它是否存在于对象中。如果是，请更新大小。

任何人都可以建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T11:11:09.180

您不能在对象中包含未命名的项目。改用数组：

```
var renderObj = [
  {"name": "test1", "size": 3938},
  {"name": "test2", "size": 3812},
  {"name": "test3", "size": 6714}
]; 
```

循环遍历数组以检查名称是否存在：

```
var index = -1;
for (var i = 0; i < renderObj.Length; i++) {
  if (renderObj[i].name == name) {
    index = i;
    break;
  }
} 
```

现在检查结果。如果名称尚不存在，我假设您想添加一个对象。您没有说您希望如何更新大小，所以我假设您想将新值添加到以前的值：

```
if (index == -1) {
  renderObj.push({ name: name, size: size });
} else {
  renderObj[index].size += size;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T11:23:27.450

这就是您可能想要的结构：

```
var renderObj= {
    "test1" : 3938,
    "test2" : 3812,
    "test3" : 6714
}; 
```

当然，您可以拥有一个完整的对象，例如：

```
var renderObj= {
    "test1" : {"size": 3938},
    "test2" : {"size": 3812},
    "test3" : {"size": 6714}
}; 
```

关键是您的对象的属性是您的“关键”，因此您可以轻松检查名称是否在您的`renderObj`：

```
function addItem(obj, name) {
   var value = obj[name]
   if (typeof value === "number")
       obj[name] = value + 1
   else
       obj[name] = 1
} 
```

如果对象更复杂：

```
function addItem(obj, name) {
   var value = obj[name]

   if (value)
       value.size++ 
   else
       obj[name] = {"size": 1}
} 
```

进而：

```
addItem(renderObj, "test1")
addItem(renderObj, "test4")
// etc.. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T11:23:42.757

我会将名称映射与对象并排保存，并使用一个函数来检查该映射：

```
var renderObj = [
      { name: "test1", size: 3938},
      { name: "test2", size: 3812},
      { name: "test3", size: 6714}
    ]
  , nameMap = {}
  ;

function notAlreadyInrenderObj( newObj ){
   //IE7 and above, use typeof ... === "undefined" if you need lower browsers
  return ( undefined === nameMap[newObj.name] );
} 
```

然后添加新对象：

```
if( notAlreadyInrenderObj( ojb ) ){
  nameMap[newObj.name] = renderObj.length; //in case you need to find it quickly later
  renderObj.push( ojb );
} 
```

# c# - 在 C# 中使用 SSL (https) 使用 Web 服务

> ID：10480960
> 
> 赞同：2
> 
> 时间：2012-05-07T11:05:29.203
> 
> 标签：c#, wcf, ssl, security-context

我想在 C# 中使用 ssl 安全 Web 服务。请求如下所示：

```
<soapenv:Envelope
  xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
  xmlns:biw="http://tempuri.org/ws_returnTable"
  xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd"
  >
  <soapenv:Header>
    <wsse:Security>
      <wsse:UsernameToken>
        <wsse:Username>sasdemo</wsse:Username>
        <wsse:Password>sasch.111</wsse:Password>
      </wsse:UsernameToken>
    </wsse:Security>
  </soapenv:Header>
   <soapenv:Body>
      <biw:meansclass />
   </soapenv:Body>
</soapenv:Envelope> 
```

WSDL 中的端点声明如下所示：

```
<wsdl:service name="meansclass">
  <wsdl:port binding="tns:meansclassSoapBinding" name="meansclassPort">
    <soap:address location="https://sas.ssz.intra.stzh.ch:8443/SASBIWS/services/Shared%20Data/ws/meansclass" /> 
  </wsdl:port>
</wsdl:service> 
```

app.config 如下所示：

```
<bindings>
    <basicHttpBinding>
        <binding name="meansclassSoapBinding" closeTimeout="00:01:00"
            openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
            allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
            maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
            messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
            useDefaultWebProxy="true">
            <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                maxBytesPerRead="4096" maxNameTableCharCount="16384" />
            <security mode="Transport">
                <transport clientCredentialType="None" proxyCredentialType="None"
                    realm="" />
                <message clientCredentialType="UserName" algorithmSuite="Default" />
            </security>
        </binding>
    </basicHttpBinding>
</bindings>
<client>
    <endpoint address="https://localhost:8443/SASBIWS/services/Shared%20Data/ws/meansclass"
        binding="basicHttpBinding" bindingConfiguration="meansclassSoapBinding"
        contract="ServiceReference1.meansclassPortType" name="meansclassPort" />
</client> 
```

我尝试使用该 C# 代码访问 Web 服务：

```
var service = new meansclassPortTypeClient();

service.ClientCredentials.UserName.UserName = "username";
service.ClientCredentials.UserName.Password = "password";

var test = service.meansclass(); 
```

但是总是有meanclass()抛出的异常。在德语中它说：

> “客户端身份验证”类型的异常 (...) 没有安全上下文。

我用谷歌搜索了很多，但还没有发现我做错了什么。如何制作这样的“安全上下文”？或者有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T03:13:11.943

如果没有其他上下文（WSDL 的视图），我正在掌握，但您可能会将 SSL 安全性与 Web 服务安全性混淆，并且服务会抱怨 SOAP 标头中的意外凭据。

SSL 安全性作为传输 Web 服务请求和响应的过程的一部分应用。协调 SSL 交互的要求是客户端通过将证书拉入 C# 使用的信任库来信任服务器的证书。

请求中显示的是“消息级别”wss（Web 服务安全）用户名/密码凭证。

建议：

1.  如果您可以控制服务实施，请确保从 Web 服务中删除任何安全策略。如果您不这样做，并且您不确定服务消费是否需要用户名和密码，请从soap 标头中删除用户名和密码。
2.  同样，如果您可以控制服务实现，请尝试删除 SSL 要求并执行服务以确定是否可以通过不安全的 (http) 连接调用服务。
3.  只添加 SSL 并检查异常...记住服务器的公共证书必须受运行 C# 的上下文的信任。证书通常可以通过在浏览器中访问 Web 服务 (https) 地址并使用浏览器的机制将证书保存到适当的信任存储区 ( [http://balajiramesh.wordpress.com/2007/12/28/save ) 来获取-ssl-certificate-to-cer-file/](http://balajiramesh.wordpress.com/2007/12/28/save-ssl-certificate-to-cer-file/) )

# php - 努力接收 Paypal 沙盒 IPN 发布数据

> ID：10480961
> 
> 赞同：2
> 
> 时间：2012-05-07T11:05:31.993
> 
> 标签：php, paypal, paypal-ipn

我的主机启用了 php 5.0 和 SSL，但经过严格搜索在线论坛和博客后，我终生无法弄清楚为什么我空手而归，我试图使用 Paypal IPN 脚本。我正在使用沙盒模拟器来测试脚本，因此在检索 Post 数据时不费吹灰之力。请参阅我的以下代码 -

```
$header = '';

$req = 'cmd=_notify-validate';

foreach($_POST as $key => $value) {
    //All PayPal reqs must be URL encoded
    $value = urlencode(stripslashes($value));
    //Append key => value pair to CMD string
    $req .= "&$key=$value";
} 

//Post info back to paypal for verification
$header .= "POST /cgi-bin/webscr HTTP/1.0\r\n";
// $header .= "Host: ssl://www.sandbox.paypal.com\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n";
$header .= "Content-Length: " . strlen($req) . "\r\n\r\n";
//$header .= "Connection: Close\r\n";
$fp = fsockopen ('ssl://www.sandbox.paypal.com', 443, $errno, $errstr, 30);

$con=mysql_connect("localhost","quadsour_xswitch","xswitch");
mysql_select_db("quadsour_xswitch",$con);//$data="NULL"

if(!$fp) {
    //Process HTTP Error
     $filename = 'debug.txt';
    $filehandle=fopen($filename, 'w');
    fwrite($filehandle, $errstr.'('.$errno.')');
    fclose($filehandle);
    die();

 $message .= "\n HTTP ERROR. \n";

} else {
    fputs ($fp, $header . $req);
    while (!feof($fp)) {
        $res = stream_get_contents($fp, 1024);
        /* $data="INSERT INTO ipn SET
        complete='".$errstr."',invoice='".$errno."'";
        $query=mysql_query($data);
        */

        //VERIFIED TRANSACTION
        //PAYMENT
        if($_POST['payment_status'] == 'completed') {
            $data="INSERT INTO ipn SET
            complete='cond'";
            $query=mysql_query($data);

            $data="INSERT INTO ipn SET
            complete='true',
            invoice='".$_POST['invoice']."',
            email='".$_POST['payer_email']."'
            ";
            $query=mysql_query($data);

            //$subscription = //Do SQL to retrieve the subscription based on $_POST['invoice']

        } 

    }

    fclose ($fp);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T23:41:38.700

作为编写了几个 PHP 库以使用 PayPal IPN（下面的 CodeIgniter 和 Symfony2 的）的人，我不得不说您的脚本远不足以以安全和健壮的方式处理 PayPal IPN 的所有可能性。

无需重新发明轮子，只需插入以下库之一，具体取决于您的 PHP 设置：

*   [https://github.com/Quixotix/PHP-PayPal-IPN](https://github.com/Quixotix/PHP-PayPal-IPN)（通用 PHP 5）
*   [https://github.com/webtechnick/CakePHP-Paypal-IPN-Plugin](https://github.com/webtechnick/CakePHP-Paypal-IPN-Plugin)
*   [https://github.com/orderly/codeigniter-paypal-ipn](https://github.com/orderly/codeigniter-paypal-ipn)
*   [https://github.com/orderly/symfony2-paypal-ipn](https://github.com/orderly/symfony2-paypal-ipn)

# ruby-on-rails - Rails 3 设计生产模式问题超类不匹配

> ID：10480963
> 
> 赞同：0
> 
> 时间：2012-05-07T11:05:38.857
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, production-environment

我有：
Rails 3.0.9
设计 1.5.3

我正在使用设计进行用户身份验证。
当我处于开发模式时，一切都很完美。
但是当我尝试将 Rails 从开发模式切换到生产模式时，我收到一条消息：

**C:/Sites/eFiling2/app/controllers/user_controller.rb:1:in 'top (required)': su perclass mismatch for class User (TypeError)**

```
C:/Sites/eFiling2/app/controllers/user_controller.rb:1:in `<top (required)>': su
perclass mismatch for class User (TypeError)
        from C:/Ruby/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.9/lib/ac
tive_support/dependencies.rb:239:in `require'
        from C:/Ruby/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.9/lib/ac
tive_support/dependencies.rb:239:in `block in require'
        from C:/Ruby/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.9/lib/ac
tive_support/dependencies.rb:227:in `load_dependency'
        from C:/Ruby/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.9/lib/ac
tive_support/dependencies.rb:239:in `require'
        from C:/Ruby/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.9/lib/ac
tive_support/dependencies.rb:346:in `require_or_load'
        from C:/Ruby/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.9/lib/ac
tive_support/dependencies.rb:300:in `depend_on'
        from C:/Ruby/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.9/lib/ac
tive_support/dependencies.rb:216:in `require_dependency'
        from C:/Ruby/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.0.9/lib/rails/e
ngine.rb:138:in `block (2 levels) in eager_load!'
        from C:/Ruby/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.0.9/lib/rails/e
ngine.rb:137:in `each'
        from C:/Ruby/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.0.9/lib/rails/e
ngine.rb:137:in `block in eager_load!'
        from C:/Ruby/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.0.9/lib/rails/e
ngine.rb:135:in `each'
        from C:/Ruby/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.0.9/lib/rails/e
ngine.rb:135:in `eager_load!'
        from C:/Ruby/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.0.9/lib/rails/a
pplication.rb:108:in `eager_load!'
        from C:/Ruby/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.0.9/lib/rails/a
pplication/finisher.rb:41:in `block in <module:Finisher>'
        from C:/Ruby/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.0.9/lib/rails/i
nitializable.rb:25:in `instance_exec'
        from C:/Ruby/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.0.9/lib/rails/i
nitializable.rb:25:in `run'
        from C:/Ruby/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.0.9/lib/rails/i
nitializable.rb:50:in `block in run_initializers'
        from C:/Ruby/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.0.9/lib/rails/i
nitializable.rb:49:in `each'
        from C:/Ruby/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.0.9/lib/rails/i
nitializable.rb:49:in `run_initializers'
        from C:/Ruby/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.0.9/lib/rails/a
pplication.rb:134:in `initialize!'
        from C:/Ruby/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.0.9/lib/rails/a
pplication.rb:77:in `method_missing'
        from C:/Sites/eFiling2/config/environment.rb:5:in `<top (required)>'
        from C:/Ruby/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.9/lib/ac
tive_support/dependencies.rb:239:in `require'
        from C:/Ruby/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.9/lib/ac
tive_support/dependencies.rb:239:in `block in require'
        from C:/Ruby/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.9/lib/ac
tive_support/dependencies.rb:225:in `block in load_dependency'
        from C:/Ruby/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.9/lib/ac
tive_support/dependencies.rb:596:in `new_constants_in'
        from C:/Ruby/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.9/lib/ac
tive_support/dependencies.rb:225:in `load_dependency'
        from C:/Ruby/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.9/lib/ac
tive_support/dependencies.rb:239:in `require'
        from C:/Sites/eFiling2/config.ru:3:in `block in <main>'
        from C:/Ruby/Ruby192/lib/ruby/gems/1.9.1/gems/rack-1.2.5/lib/rack/builde
r.rb:46:in `instance_eval'
        from C:/Ruby/Ruby192/lib/ruby/gems/1.9.1/gems/rack-1.2.5/lib/rack/builde
r.rb:46:in `initialize'
        from C:/Sites/eFiling2/config.ru:1:in `new'
        from C:/Sites/eFiling2/config.ru:1:in `<main>'
        from C:/Ruby/Ruby192/lib/ruby/gems/1.9.1/gems/rack-1.2.5/lib/rack/builde
r.rb:35:in `eval'
        from C:/Ruby/Ruby192/lib/ruby/gems/1.9.1/gems/rack-1.2.5/lib/rack/builde
r.rb:35:in `parse_file'
        from C:/Ruby/Ruby192/lib/ruby/gems/1.9.1/gems/rack-1.2.5/lib/rack/server
.rb:162:in `app'
        from C:/Ruby/Ruby192/lib/ruby/gems/1.9.1/gems/rack-1.2.5/lib/rack/server
.rb:253:in `wrapped_app'
        from C:/Ruby/Ruby192/lib/ruby/gems/1.9.1/gems/rack-1.2.5/lib/rack/server
.rb:204:in `start'
        from C:/Ruby/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.0.9/lib/rails/c
ommands/server.rb:65:in `start'
        from C:/Ruby/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.0.9/lib/rails/c
ommands.rb:30:in `block in <top (required)>'
        from C:/Ruby/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.0.9/lib/rails/c
ommands.rb:27:in `tap'
        from C:/Ruby/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.0.9/lib/rails/c
ommands.rb:27:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>' 
```

**用户控制器.rb：**

```
class User < Devise::RegistrationsController
    before_filter :authenticate_user!
end 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:04:14.927

检查您的 Gemfile 以及您在`environment.rb`第 5 行中需要什么

并且至少`before_filter :authenticate_user!`从`user_controller`.. 中删除，因为如果尚未登录，您将无法注册新用户

如果你看到[https://github.com/plataformatec/devise/blob/master/app/controllers/devise/registrations_controller.rb](https://github.com/plataformatec/devise/blob/master/app/controllers/devise/registrations_controller.rb)

有

```
class Devise::RegistrationsController < DeviseController
  prepend_before_filter :require_no_authentication, :only => [ :new, :create, :cancel ]
  prepend_before_filter :authenticate_scope!, :only => [:edit, :update, :destroy] 
```

所以如果你添加了 before_filter，你就破坏了所有的功能

# android - 如何在 Android 中打开 PDF

> ID：10480974
> 
> 赞同：6
> 
> 时间：2012-05-07T11:06:09.687
> 
> 标签：android

如何从服务器打开 pdf 文件而不将其保存在设备上且不使用任何第三方应用程序。因为我不希望我的用户下载任何应用程序来使用我的应用程序。而且我不想使用 web 视图打开 pdf文件。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-07T11:18:20.397

此方法适用于旧版本的 android：

在一项新活动中：

```
 WebView webview = new WebView(this);
        setContentView(webview);
        webview.getSettings().setJavaScriptEnabled(true);
        webview.getSettings().setPluginsEnabled(true);
        webview.loadUrl("http://docs.google.com/gview?embedded=true&url=URL_of_PDF/fileName.pdf");
        setContentView(webview); 
```

`internet`在清单文件中授予权限。

使用以下方法打开已安装 3rd 方应用程序的 PDF 文件。

要在应用程序中打开 PDF，请使用：

```
Uri path = Uri.fromFile(file);
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(path, "application/pdf");
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T03:00:41.540

使用[PdfViewer.jar并制作如下代码 - 从](http://www.ziddu.com/download/19248664/PdfViewer.jar.html)[此处](https://stackoverflow.com/questions/10299839/how-to-read-pdf-in-my-android-application)复制

**第一个.java**

```
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    File images = Environment.getExternalStorageDirectory();
    imagelist = images.listFiles(new FilenameFilter()
    {  
            public boolean accept(File dir, String name)  
            {  
                    return ((name.endsWith(".pdf")));
            }  
    }); 
    pdflist = new String[imagelist.length]; 
    for(int i = 0;i<imagelist.length;i++)
    {
            pdflist[i] = imagelist[i].getName();
    }
    this.setListAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, pdflist));
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) 
{
        super.onListItemClick(l, v, position, id);
        String path = imagelist[(int)id].getAbsolutePath();
        openPdfIntent(path);
}

private void openPdfIntent(String path) 
{
    try
    {
      final Intent intent = new Intent(First.this, Second.class);
      intent.putExtra(PdfViewerActivity.EXTRA_PDFFILENAME, path);
      startActivity(intent);
    }
    catch (Exception e) 
    {
      e.printStackTrace();
    }
} 
```

**二.java**

```
public class Second extends PdfViewerActivity 
{

@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
}

public int getPreviousPageImageResource() {
    return R.drawable.left_arrow;
}

public int getNextPageImageResource() {
    return R.drawable.right_arrow;
}

public int getZoomInImageResource() {
    return R.drawable.zoom_in;
}

public int getZoomOutImageResource() {
    return R.drawable.zoom_out;
}

public int getPdfPasswordLayoutResource() {
    return R.layout.pdf_file_password;
}

public int getPdfPageNumberResource() {
    return R.layout.dialog_pagenumber;
}

public int getPdfPasswordEditField() {
    return R.id.etPassword;
}

public int getPdfPasswordOkButton() {
    return R.id.btOK;
}

public int getPdfPasswordExitButton() {
    return R.id.btExit;
}

public int getPdfPageNumberEditField() {
    return R.id.pagenum_edit;
}
} 
```

希望这对你有很大帮助。尝试这个。不要忘记在清单中添加您的 Second.java。在您的可绘制对象中添加一些在 second.java 中需要的可绘制对象。并且，请参考[GitHub中的示例](https://github.com/jblough/Android-Pdf-Viewer-Library)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T11:10:54.030

为此，您必须使用 pdf 阅读器库。此链接将对您有所帮助

[https://stackoverflow.com/questions/4665957/pdf-parsing-library-for-android](https://stackoverflow.com/questions/4665957/pdf-parsing-library-for-android)

# c - switch 语句中的 C 字符串

> ID：10480979
> 
> 赞同：5
> 
> 时间：2012-05-07T11:06:24.917
> 
> 标签：c, switch-statement

> **可能重复：**
> [在 C 中打开字符串的最佳方法](https://stackoverflow.com/questions/4014827/best-way-to-switch-on-a-string-in-c)

与 switch 语句一起用于字符串（c 字符数组）的一般方法是什么？我正在查询我的数据库中存储为的货币

```
"USD"
"EUR"
"GBP" 
```

等等。来自 PHP 背景，我会简单地做：

```
switch ($string) {
  case "USD":
   return "$";
   break;
  case "EUR":
   return "€";
   break;   
  case "GBP":
   return "£";
   break;
  default:
   return "$";
} 
```

在 C 中，case-value 必须是整数。我将如何在 C 中实现类似的东西？我最终会在一个巨大的 if/else 块中写很多 strcmp 吗？另请注意，我不能简单地比较货币的第一个字符，因为有些（但在此示例中不是）以相同的字符开头。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T11:09:09.177

一种方法是定义一个 C 字符串数组，并将其用作您的排序定义：

```
const char *currencies[] = {"USD", "GBP", "EUR"}; 
```

现在您可以搜索`currencies`您的字符串，并在 switch 语句中使用它的*索引。*

您可以花哨并 - 对您的字符串进行排序，并使用它[`bsearch`](http://www.cplusplus.com/reference/clibrary/cstdlib/bsearch/)来查找索引`O(LogN)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T11:09:26.753

许多语言的正确答案是某种*关联容器*。`std::map`例如，在 C++ 中。在 Glib 中有一个关联数组的 C 实现：见[这里。](http://developer.gnome.org/glib/stable/glib-Hash-Tables.html)还有其他图书馆有自己的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T11:12:24.847

我建议对这种带有`strcmp`函数的情况使用 if 语句。

# javascript - 添加全选复选框

> ID：10480984
> 
> 赞同：1
> 
> 时间：2012-05-07T11:06:48.430
> 
> 标签：javascript, php

我想为此脚本添加一个选中/取消选中所有按钮：

php:

```
require_once('includes/commons.php');

$query_get_addresses = 'SELECT * FROM user ORDER BY first_name ASC, last_name ASC';
$result_get_addresses = mysql_query($query_get_addresses);
$addresses_count = mysql_num_rows($result_get_addresses);

?> 
```

脚本：

```
<script>
$(document).ready(function() {
    // initialize
    var recipient = $('input[name=recipient]').val();
    var recipient_array = new Array();
    if(recipient != '') {
        recipient_array = recipient.split(',');
        for(var i = 0; i < recipient_array.length; i++) {
            recipient_array[i] = $.trim(recipient_array[i]);

            if(recipient_array[i] == '')
                recipient_array.splice(i, 1);
        }

        $('input[type=checkbox]').each(function() {
            if($.inArray(this.value, recipient_array) >= 0) {
                $(this).attr('checked', true);
            }
        });
    }
    // add and/or remove
    $('input[type=checkbox]').click(function() {
        var recipient_list = '';

        $('input[type=checkbox]').each(function() {
            var index = $.inArray(this.value, recipient_array);
            if(this.checked) {
                if(index < 0)
                    recipient_array.push(this.value);
            }
            else {
                if(index >= 0) {
                    recipient_array.splice(index, 1);
                }
            }
        });

        $('input[name=recipient]').val(recipient_array);
    });
});
</script> 
```

html:

```
<h2>Choose recipient</h2>
<div><?php

if($addresses_count > 0) {

    ?><form name="select-recipient-form"><ul><?php

        while($row_get_addresses = mysql_fetch_assoc($result_get_addresses)) {
            $row_get_addresses = unsanitize($row_get_addresses);

            ?><li><input type="checkbox" name="recipient[]" id="recipient-1" value="<?php echo $row_get_addresses['recipient']; ?>" /><label for="recipient-1"><?php echo $row_get_addresses['first_name'].' '.$row_get_addresses['last_name'].' &lt;'.$row_get_addresses['recipient'].'&gt;'; ?></label></li><?php
        }

    ?></ul>
    </form><br /><?php

} else {

    ?><p>You don't have any contacts.</p><?php
}

?>
</div> 
```

我试图遵循一些指南。例如，就像[这个](http://www.plus2net.com/javascript_tutorial/checkbox-checkall.php)，但我无法让它工作。知道如何实现这一目标吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-02-20T10:09:33.400

这对我有用：

```
 <script type="text/javascript"> 
$('#form1').ready(function(){
    $('.gumb:button').toggle(function(){
        $('.tocheck ').attr('checked','checked');
        $(this).val('uncheck all')
    },function(){
        $('.tocheck ').removeAttr('checked');
        $(this).val('check all');        
    })
})

</script>

<input type="button" class="gumb" value="check all" />
<input name="checkbox[]" class="tocheck" type="checkbox" value="<?php echo $rows['member_id'] ?>" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T11:12:30.480

为您添加一个类复选框，然后使用：

```
<form ...>
    <input type="checkbox" class="check-class" ... />
    ...
    <button type="button" class="check-all">Check All</button>
</form>

<script type="text/javascript">
    (function() {
        var checked = false;
        $('button.check-all').click(function() {
            checked = !checked;
            $('.checkbox-class').prop('checked', checked); // jQuery 1.6+
            if (checked) $(this).text('Uncheck All');
            else $(this).text('Check All);
        });
    })();
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T15:56:44.390

如果以下是 HTML `<input class="checkbox-class" type="checkbox" value="1" /><input class="checkbox-class" type="checkbox" value="2" /> <input class="checkbox-class" type="checkbox" value="3" /> <input type="button" id="clickit" value="Check All" />`

JS 将完成这项工作

```
$("#clickit").click(function() {
    if ($(this).val() == 'Check All') {
        $('.checkbox-class').attr('checked', 'checked');
        $(this).val('Uncheck All');
    } else {
        $('.checkbox-class').removeAttr('checked');
        $(this).val('Check All');
    }

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T11:16:31.380

```
<span><input type="checkbox" class="checkall" />check all</span> 
```

向所有复选框添加一个类，除了全选复选框

```
<input type="checkbox" class="tocheck ... />
    ...
    ....

$(document).ready(function(){
$('.checkall').click(function() {
    $('.tocheck ').attr('checked', true); 
});
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-04T00:14:37.613

只有那对我有用（顺便说一句，使用复选框，而不是按钮）

```
<script type="text/javascript">
$(document).ready(function(){
    $('#select_all').on('click',function(){
        if(this.checked){
            $('.checkbox').each(function(){
                this.checked = true;
            });
        }else{
             $('.checkbox').each(function(){
                this.checked = false;
            });
        }
    });

    $('.checkbox').on('click',function(){
        if($('.checkbox:checked').length == $('.checkbox').length){
            $('#select_all').prop('checked',true);
        }else{
            $('#select_all').prop('checked',false);
        }
    });
});
</script>
<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js'></script>

<ul class="main">
    <li><input type="checkbox" id="select_all" /> Select all</li>
    <ul>
        <li><input type="checkbox" class="checkbox" value="1"/>Item 1</li>
        <li><input type="checkbox" class="checkbox" value="2"/>Item 2</li>
        <li><input type="checkbox" class="checkbox" value="3"/>Item 3</li>
        <li><input type="checkbox" class="checkbox" value="4"/>Item 4</li>
        <li><input type="checkbox" class="checkbox" value="5"/>Item 5</li>
    </ul>
</ul> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-09T15:38:57.573

这段代码适用于我

jQuery

```
<script type="text/javascript">
$(document).ready(function(){ 
$("#select_all").change(function(){
  $(".checkbox_class").prop("checked", $(this).prop("checked"));
  });
});
</script> 
```

您只需将类**checkbox_class**添加到所有复选框

HTML

```
<input type="checkbox" id="selecctall">

<input class="checkbox_class" name="recipient[]" value="'.$recipientId.'" type="checkbox" /> 
```

简单易行：D

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-30T08:00:33.907

Check-uncheck all / select-unselect all checkboxes 按照下面的代码，下面的代码真的很简单

在您的 html 表单中添加以下代码行

```
<input type="checkbox" id='checkall' /> Select All 
```

并使用以下脚本代码

```
 <script type='text/javascript'>
 $(document).ready(function(){
   // Check or Uncheck All checkboxes
   $("#checkall").change(function(){
     var checked = $(this).is(':checked');
     if(checked){
       $(".checkbox").each(function(){
         $(this).prop("checked",true);
       });
     }else{
       $(".checkbox").each(function(){
         $(this).prop("checked",false);
       });
     }
   });

  // Changing state of CheckAll checkbox 
  $(".checkbox").click(function(){

    if($(".checkbox").length == $(".checkbox:checked").length) {
      $("#checkall").prop("checked", true);
    } else {
      $("#checkall").removeAttr("checked");
    }

  });
});
</script> 
```

请记住，脚本代码中的 .checkbox 是来自其他 html 表单复选框的类名

例如，如果您输入复选框如下

```
<input class="checkbox" name="emailid[]" type="checkbox" value="<?php echo $email;?>" /> 
```

# jquery - 使用 Fancybox 仅加载一个画廊

> ID：10480987
> 
> 赞同：0
> 
> 时间：2012-05-07T11:06:55.527
> 
> 标签：jquery, load, fancybox, gallery

我的网站使用一张图片来加载图库。在旧版本的 Fancybox 中，您使用 .js 文件来加载图像并且效果很好。使用新的，我必须隐藏图像，并且在用户访问我的网站时加载每个图像。

我该如何防止呢？用户应该只从他们正在访问的图库中加载图像。

您可以在这里查看我的网站：[http ://www.mogm.nl/2011.html](http://www.mogm.nl/2011.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T18:46:46.337

您不必加载隐藏的所有图像`div`（没有用处），只需加载锚点，因此：

```
<div style="display:none">
 <a class="fancybox" rel="Rhodos11" href="http://www.mogm.nl/bilder/2011/rhodos11/rhodos1101.jpg"><img src="http://www.mogm.nl/bilder/2011/rhodos11/rhodos1101.jpg" /></a>
 ... etc 
```

可以简化为：

```
<div style="display:none">
 <a class="fancybox" rel="Rhodos11" href="http://www.mogm.nl/bilder/2011/rhodos11/rhodos1101.jpg"></a>
 ... etc 
```

这将显着减少加载页面。

另一方面，您始终可以使用`ajax`动态加载每个画廊的内容，但无论如何您都必须在隐藏`div`文件或外部文件中设置对图像的链接引用。如果您更喜欢第二种选择，请告诉我，我将发布一个我已经拥有的脚本。

# ios - 使用 AVFoundation 向视频添加自定义元数据

> ID：10480991
> 
> 赞同：4
> 
> 时间：2012-05-07T11:07:20.273
> 
> 标签：ios, objective-c, avfoundation

我想在视频中添加一些信息（元数据）。我找到了一种检索元数据的方法，但没有找到任何设置或修改元数据的解决方案。我正在使用`AVURLAsset`,`AVAssetWritter`也`AVMutableComposition`用于创建视频。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-14T13:31:31.887

使用[`-[AVAssetWriter setMetadata:]`](https://developer.apple.com/library/ios/documentation/AVFoundation/Reference/AVAssetWriter_Class/index.html#//apple_ref/occ/instp/AVAssetWriter/metadata).

这设置为`NSArray`s `AVMutableMetadataItem`。请注意，您不能在写入开始后设置该值。

元数据键和键空间在 中列出`AVMetadataFormat.h`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-10T17:57:35.213

使用时`AVMutableComposition`，您可以`metadata`在写入时设置属性`AVAssetExportSession`，而不是在资产（组合）本身上设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T03:46:22.227

如果您需要“离线”进行。我使用了 id3taggenerator 和相关工具，它们工作得很好。

在此处查看更多信息：http: [//developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/StreamingMediaGuide/UsingHTTPLiveStreaming/UsingHTTPLiveStreaming.html](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/StreamingMediaGuide/UsingHTTPLiveStreaming/UsingHTTPLiveStreaming.html)

或者这是我用来添加定时元数据的教程，非常好：http: [//jmacmullin.wordpress.com/2010/11/03/adding-meta-data-to-video-in-ios/](http://jmacmullin.wordpress.com/2010/11/03/adding-meta-data-to-video-in-ios/)

如果您想在应用程序内添加元数据（如用户录制视频并添加他们自己的元数据），我不确定。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-20T23:08:34.240

看看 gusutils ==>

[https://github.com/gpambrozio/GusUtils](https://github.com/gpambrozio/GusUtils)

有一个用于创建静态库的 xcode 项目，可让您将元数据和地理位置信息添加到视频中，然后持久保存到资产库中。

# sql-server - 发布在 SQL Server Management Studio 中创建的数据库

> ID：10480994
> 
> 赞同：0
> 
> 时间：2012-05-07T11:07:26.660
> 
> 标签：sql-server, database

我在 SQL Server 中创建了一个数据库，并且能够生成一个脚本。

我想保存数据库，所以我可以在我的 C# 应用程序中使用它。

如何重新创建此数据库或将其发布到目标位置？例如文件

```
 CREATE TABLE Emails_Log
(
email_Id int,
e_to varchar(255),
e_from varchar(255),
e_Subject varchar(255),
e_date date,
PRIMARY KEY (email_Id)
) 
```

我已经执行了上面的查询，它已经在我的数据库中创建了表，现在我如何完成我的数据库以便它可以在其他程序中使用？

我在哪里可以找到数据库文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T18:22:11.470

在 Red Gate，我们有一个新工具[SQL Connect](http://www.red-gate.com/products/sql-development/sql-connect/index-2)，它可以让您创建一个可以添加到您的 Visual Studio 解决方案的数据库项目。我们热衷于找出缺少的内容，因为我们可以在未来添加许多其他功能。

如果您将数据库作为 VS 解决方案的一部分进行维护，最好是在源代码控制中，您随后可以使用[SQL Compare Pro](http://www.red-gate.com/products/sql-development/sql-compare/index-b)对其进行部署。这会生成一个 SQL 脚本，其中包含升级现有数据库或创建新数据库所需的命令。

# actionscript-3 - AS3 getDefinitionByName - 错误 #1065：未定义变量 {类名}

> ID：10480997
> 
> 赞同：0
> 
> 时间：2012-05-07T11:07:58.220
> 
> 标签：actionscript-3, flash

我的问题比标题所暗示的要复杂一些。我在一家拥有 20 款 Flash 游戏的公司工作。我们的玩家也有他们可以自定义的头像，这些头像在我们的游戏中使用。

我们有一个文件 Avatar.swf，它由我们的预加载器加载，然后传递到 GameName.swf。我想使用这个 Avatar 影片剪辑并创建一个工厂类，这样我们就可以在我们的游戏中拥有它的许多实例。

我可以毫无问题地从加载器中获取 Avatar 影片剪辑的实例。我知道有两种方法可以从 AS3 中的实例获取构造函数。

1.) Object(myInstance).constructor 作为类

2.) getDefinitionByName(getQualifiedClassName(myInstance)) 作为类

1 间歇性地工作，但在 3 中大约有 1 次我得到结果实例抛出的空引用错误。我不知道为什么，但这不是一个一致的问题。就好像脚本在那里，但资产库不在那里。它发生在调试模式和发布模式下。使用 FlashDevelop 和 CS5.5 编译时也会发生这种情况。

2 次抛出错误 #1065：未定义变量头像。我知道这是因为我没有导入 Avatar 包并声明了 Avatar 的虚拟实例，但这就是重点。例如，如果我们通过添加一件新衣服来更改头像，我们绝对不希望必须遍历我们不断扩大的游戏列表并重新编译它们。换句话说，我不想在每个游戏中都使用 Avatar 代码，这会否定在我们的预加载器中加载它的意义。

有没有人有什么建议？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:36:01.247

1.  确保将 Avatar.swf 加载到相同的[应用程序域中](http://help.adobe.com/en_US/as3/dev/WSd75bf4610ec9e22f43855da312214da1d8f-8000.html)。
2.  [确保您至少](http://jwopitz.wordpress.com/2008/02/21/getdefinitionbyname-trick/)使用过每个头像类一次（例如在 Avatar.swf 的文档类中），或者如果它们是 Flash 库项目，请将它们导出到 Avatar.swf 的第 1 帧中。