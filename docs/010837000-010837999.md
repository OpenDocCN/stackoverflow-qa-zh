# StackOverflow 问答 10837000-10837999

# php - Extbase 查询：对父级的棘手访问

> ID：10837014
> 
> 赞同：1
> 
> 时间：2012-05-31T15:50:54.810
> 
> 标签：php, sql, typo3, extbase

我正在编写一个非常大的 extbase 扩展，并且必须处理一些复杂的过滤器功能。这将是纯 sql 中的一个衬里，但是，由于各种原因，我必须使用 Extbase ORM。

这是关于戏剧表演的。每一戏都有多重表演，戏是总根。

我必须在给定的时间范围内找到表演，这很容易。但是，该类别是父级（游戏）的子级。我没有在表演中保存该剧的参考，而是在剧中（那是因为必须将TCA配置为选择类型）。

我必须将结果转发到分页器小部件，这需要 QueryResultInterface 的实例。当我将戏剧用作聚合根并从那里提取表演时，它会返回 ObjectStorage 并破坏小部件。

如果父类别的孩子匹配或者我认为是正确的：没有合理的机会，是否有可能以某种方式限制输出？

```
public function findByTimeRangeInBeginTimeAndAttendCategoryAndStartOfBooking(Datetime $startRange, Datetime $endRange, $category = 'undefined') {

        $query = $this->createQuery();

        $constraints = array();
        $constraints[] = $query->greaterThanOrEqual('timebegin', $startRange->getTimestamp());
        $constraints[] = $query->lessThanOrEqual('timebegin', $endRange->getTimestamp());

        if($category !== 'undefined') {
            $constraints[] = $query->equals('play.category.name', $category);
        }

        $query->matching (
            $query->logicalAnd($constraints)
        );
        $query->setOrderings (
                        Array('timebegin' => Tx_Extbase_Persistence_Query::ORDER_ASCENDING)
        );

        return $query->execute();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:14:44.120

我认为没有参考该剧的机会不大。我什至会说你的域模型不能这样工作。要么您将戏剧作为聚合根，然后选择戏剧并从那里转到表演，要么表演也有一个存储库，从这个意义上说，它本身就是一个聚合根，但是您会想要参考该戏剧。 .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:18:20.260

> 由于各种原因，我必须使用 Extbase ORM。什么原因？你确定你真的需要吗？

它不会解决您的问题，但您应该阅读以下内容：http: [//lists.typo3.org/pipermail/typo3-dev/2011-May/043180.html](http://lists.typo3.org/pipermail/typo3-dev/2011-May/043180.html)

我真的很喜欢将 MVC 和 ORM 引入 TYPO3 的想法，而且我自己也在使用 Extbase，但如果我必须编写**复杂**的数据库驱动的东西，我会选择“常规”的 TYPO3-Extension 或其他框架。

# python - 如何忽略 BeautifulSoup AttributeError/Continue on Exception

> ID：10837015
> 
> 赞同：0
> 
> 时间：2012-05-31T15:50:59.223
> 
> 标签：python, beautifulsoup

我用 Python 和 Beautiful Soup 构建了一个网络爬虫

有时某些元素存在，有时则不存在。我有很多。为每个“find”和/或“find_all”设置自定义异常对我来说真的没有意义

我只想忽略这些错误，以便我的刮刀不会因异常而停止。这是我的终端的错误输出：

```
Traceback (most recent call last):
  File "listing-scraper.py", line 80, in <module>
    'engine_size':soup.find("span",{"id":"infoEngine Size"}).contents[0],
AttributeError: 'NoneType' object has no attribute 'contents' 
```

我怎么能继续？

这是我的源代码的一个片段 - 所以你可以看到它是如何设置的。（请客气，我是 Python 新手）

```
 dealer_info = {
        'name':dealer_box.find("h4").contents[0],
        'address':dealer_address,
        'phone':re.sub(r'[^\d.]+','',soup.find("div",{"class":"PhoneNumber"}).contents[0]),
        'logo':soup.find("div",{"class":"dealerLogo"}).img['src'],
        'about':dealer_about,
        'website':website,
        'video':dealer_video
    }

    thumbnails = soup.find("div",{"class":"imageThumbs"}).find_all('img')
    dealer_thumbnails = []

    for thumbnail in thumbnails:
        dealer_thumbnails.append(thumbnail['src'])

    motorcycle = {
        'insert_date':time.time() * 1000,
        'year':soup.find("span",{"id":"infoYear"}).contents[0],
        'make':soup.find("span",{"id":"infoMake"}).contents[0],
        'model':soup.find("span",{"id":"infoModel"}).contents[0],
        'type':soup.find("span",{"id":"infoType"}).contents[0],
        'location':soup.find("span",{"id":"infoLocation"}).contents[0],
        'color':soup.find("span",{"id":"infoColor"}).contents[0],
        'engine_size':soup.find("span",{"id":"infoEngine Size"}).contents[0],
        'description':description,
        'price':soup.find("h3",{"class":"askingPriceNumber"}).contents[1],
        'thumbnails':dealer_thumbnails,
        'dealer_info':dealer_info
    }

    listing.update(motorcycle) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:24:19.117

考虑类似的事情：

```
def getcontents(item, index):
    if item is None:
        return None
    return item.contents[index]

motorcycle = {
        'insert_date':time.time() * 1000,
        'year':getcontents(soup.find("span",{"id":"infoYear"}), 0),
        ... 
```

通常，如果您可以避免首先引起异常，则不应忽略该异常。

# python - 如何在python中制作固定大小的格式化字符串？

> ID：10837017
> 
> 赞同：73
> 
> 时间：2012-05-31T15:51:12.473
> 
> 标签：python, python-2.7

我想创建一个固定大小的格式化字符串，字段之间的位置固定。一个例子解释得更好，这里显然有 3 个不同的字段，并且字符串是固定大小的：

```
XXX        123   98.00
YYYYY        3    1.00
ZZ          42  123.34 
```

如何将这种格式应用于python（2.7）中的字符串？

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2012-05-31T15:53:28.807

当然，使用[.format](http://docs.python.org/library/stdtypes.html?highlight=str.format#str.format)方法。例如，

```
print('{:10s} {:3d}  {:7.2f}'.format('xxx', 123, 98))
print('{:10s} {:3d}  {:7.2f}'.format('yyyy', 3, 1.0))
print('{:10s} {:3d}  {:7.2f}'.format('zz', 42, 123.34)) 
```

将打印

```
xxx        123    98.00
yyyy         3     1.00
zz          42   123.34 
```

您可以根据需要调整字段大小。请注意，它`.format`独立`print`于格式化字符串。我只是使用 print 来显示字符串。简要说明：

> `10s`格式化一个有 10 个空格的字符串，默认左对齐
> 
> `3d`格式化一个保留 3 个空格的整数，默认右对齐
> 
> `7.2f`格式化浮点数，保留7个空格，小数点后2个，默认右对齐。

定位/格式化字符串有许多附加选项（填充、左/右对齐等），[字符串格式化操作](https://docs.python.org/3/library/string.html#formatstrings)将提供更多信息。

f 字符串模式的更新。例如，

```
text, number, other_number = 'xxx', 123, 98
print(f'{text:10} {number:3d}  {other_number:7.2f}') 
```

对于右对齐

```
print(f'{text:>10} {number:3d}  {other_number:7.2f}') 
```

# java - 应用程序服务器线程和 JPA/Hibernate 乐观锁定 - OptimisticLockException

> ID：10837020
> 
> 赞同：1
> 
> 时间：2012-05-31T15:51:17.927
> 
> 标签：java, multithreading, spring, hibernate, jpa

我在应用程序服务器上运行了一个 Spring MVC 应用程序。对应用程序的每个请求都会导致 Hibernate 调用 entityManager.merge() 来更新数据库中的一行。

我今天运行测试发送多个请求，并注意到我收到以下错误：

```
javax.persistence.OptimisticLockException
        at org.jboss.resteasy.core.SynchronousDispatcher.handleApplicationException(SynchronousDispatcher.java:340) [resteasy-jaxrs-2.3.1.GA.jar:]
        at org.jboss.resteasy.core.SynchronousDispatcher.handleException(SynchronousDispatcher.java:214) [resteasy-jaxrs-2.3.1.GA.jar:]
        at org.jboss.resteasy.core.SynchronousDispatcher.handleInvokerException(SynchronousDispatcher.java:190) [resteasy-jaxrs-2.3.1.GA.jar:]
        at org.jboss.resteasy.core.SynchronousDispatcher.getResponse(SynchronousDispatcher.java:540) [resteasy-jaxrs-2.3.1.GA.jar:]
        at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:502) [resteasy-jaxrs-2.3.1.GA.jar:]
        at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:119) [resteasy-jaxrs-2.3.1.GA.jar:]
        at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:208) [resteasy-jaxrs-2.3.1.GA.jar:]
        at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:55) [resteasy-jaxrs-2.3.1.GA.jar:]
        at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:50) [resteasy-jaxrs-2.3.1.GA.jar:]
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.10.Final.jar:]
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.10.Final.jar:]
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.10.Final.jar:]
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.10.Final.jar:]
        at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.0.Final.jar:7.1.0.Final]
        at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:154) [jboss-as-web-7.1.0.Final.jar:7.1.0.Final]
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.10.Final.jar:]
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.10.Final.jar:]
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.10.Final.jar:]
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.10.Final.jar:]
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.10.Final.jar:]
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.10.Final.jar:]
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.10.Final.jar:]
        at java.lang.Thread.run(Thread.java:619) [rt.jar:1.6.0_20] 
```

为了能够解决上述问题，我需要了解以下内容：

*   应用服务器上的请求是如何处理的？是不是每个请求都由自己的线程处理？

*   查看错误我注意到它们被称为（http--10.10.4.16-8080-1）和（http--10.10.4.16-8080-7）。最后的数字是处理请求的线程号吗？

*   optimistiLockException 表明在 JPA/Hibernate 发出提交之前尝试更新相同的消息。如果我将相关代码放在同步块中，我如何确保请求进入的顺序是同步块可用时处理它们的顺序？

*   如果有未提交的更改，有没有办法指示 JPA/Hibernate 不要尝试更新消息？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T16:06:25.973

您可用的修复取决于您如何构建您的层以及您要合并的实体来自何处。分离的实体是由 spring 数据绑定器组装的，还是存储在 Web 会话中，或者您是从数据库中获取实体并在请求到达时对其进行更改？

> 应用服务器上的请求是如何处理的？是不是每个请求都由自己的线程处理？

它们由线程池处理。因此，每个请求都不会获得“自己的”线程，但在任何给定时间，每个活动请求都由一个单独的线程处理，是的。（或者排队等待一个人释放。）

> 查看错误我注意到它们被称为（http--10.10.4.16-8080-1）和（http--10.10.4.16-8080-7）。最后的数字是处理请求的线程号吗？

整个事情就是线程的名称。Tomcat 将数字放在末尾以使它们唯一，但除了由 tomcat 分配的任意顺序字符串之外，# 没有任何特殊含义。

> optimistiLockException 表明在 JPA/Hibernate 发出提交之前尝试更新相同的消息。如果我将相关代码放在同步块中，我如何确保请求进入的顺序是同步块可用时处理它们的顺序？

如果订单很重要，您需要在处理之前将它们放入某种队列中。同步不承诺等待线程执行的顺序。如果此过程不能失败，请考虑在数据库中使用悲观锁，而不是在应用服务器上同步。使用该表的其他一些线程可能不会打扰 sycnhing 并且无论如何都会导致异常。

> 如果有未提交的更改，有没有办法指示 JPA/Hibernate 不要尝试更新消息？

并非如此，没有任何直接的方法可以检查实体是否在其他会话的内存缓存中具有待处理的更新。OptimisticLock 检查*是*了解其他人是否进行了更改的机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T16:18:11.787

javax.persistence.OptimisticLockException

此异常通常发生在您的实体正在更新时，它具有自动生成的 id ..尝试添加注释

```
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY) 
```

如果这不起作用，请尝试

```
@OptimisticLock(excluded=true) 
```

参考：[链接](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#entity-hibspec-identifier)

# javascript - 将 PHP 日期转换为 javascript 日期格式

> ID：10837022
> 
> 赞同：27
> 
> 时间：2012-05-31T15:51:23.377
> 
> 标签：javascript, php, json, datetime, date-conversion

我有一个输出数据数组的 PHP 脚本。然后将其转换为`JSON`使用该`json_encode()`功能。

**我的问题是我的数组中有一个日期，但它的 JavaScript 格式不正确。我怎样才能在 PHP 中转换它呢？**

```
$newticket['ThreadID'] =  $addticket;
$newticket['Subject'] =  $subject;
//$newticket['DateCreated'] =  date('d-m-Y G:H'); 
```

而不是上面的日期，我需要等效的 JavaScript 函数

> 新日期（）

当我输出上述内容时，我得到以下“Fri Jun 01 2012 11:08:48 GMT+0100 (GMT Daylight Time)” 但是，如果我将 PHP 日期格式化为相同，则 JavaScript 会拒绝它。使困惑...

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-31T15:58:28.017

您可能应该只使用时间戳

```
$newticket['DateCreated'] = strtotime('now'); 
```

然后将其转换为 Javascript 日期

```
// make sure to convert from unix timestamp
var now = new Date(dateFromPHP * 1000); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-03-16T23:35:27.620

Javascript Date 类支持 ISO 8601 日期格式，所以我建议：

```
<?php 
      date('c', $yourDateTime); 
      // or for objects
      $dateTimeObject->format('c');
?> 
```

文档说：格式字符“c”是 ISO 8601 日期（在 PHP 5 中添加）
例如：2004-02-12T15:19:21+00:00

更多信息： http: [//php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-07-08T06:38:51.737

这很简单。

PHP代码：

```
$formatted_date = $newticket['DateCreated'] =  date('Y/m/d H:i:s'); 
```

Javascript代码：

```
var javascript_date = new Date("<?php echo $formatted_date; ?>"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-01T22:57:37.530

如果您想更精确地使用时间戳，您应该使用 microtime() 而不是 now()。

这给了你：

```
echo round(microtime(TRUE)*1000); 
```

php 中的一毫秒，类似 javascript 的时间戳。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-07-12T13:36:30.043

很简单，我用这个：

```
new Date("<?= date('Y/m/d H:i:s'); ?>"); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-02-14T13:59:02.763

@jeremyharris 答案的改进或简化将是这个：

PHP 中的 DateTime 对象具有`getTimestamp()`格式，使用它并将值乘以 1000：

```
<?php 
    $phpDateTimeStamp = new Date('Y/m/d H:i:s')->getTimestamp() * 1000; 
?>

// JavaScript
let startTime = new Date(phpDateTimeStamp); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-31T15:53:42.747

```
$newticket['DateCreated'] = date('d-m-Y G:H', strtotime($phpDateVariable)); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-15T17:15:56.930

最可靠的方法是扩展您的日期对象以将字符串解析为您的应用程序可以使用的对象。解析 mysql 日期时间字符串的简单示例

```
DateFromString(str){
 let months = ["January", "Febuary", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
 let date = str.split(" ")[0];
 let time = str.split(" ")[1];

 let [Y, M, d] = [date.split("-")[0], date.split("-")[1], date.split("-")[2]];
 let [H, m, s] = [time.split(":")[0], time.split(":")[1], time.split(":")[2]];

 return {
  FullYear: Y,
  Month: M - 1,
  MonthString: months[M - 1],
  Date: d,
  Time: {Hour: H, Minute: m, Second: s},
 };
} 
```

如果您愿意，您可以包含第二个参数，该参数描述了使用默认值传递的字符串类型，并进行字符串测试以确定它是 unix 时间戳还是 javascript 时间戳或字符串，然后使用返回的对象要解析您的日期和时间，这是一个更全面的解决方案，因为它允许您构建一个动态处理多个日期说明符的接口。

# javascript - 阻止 javascript 执行 \n

> ID：10837023
> 
> 赞同：1
> 
> 时间：2012-05-31T15:51:32.983
> 
> 标签：javascript

是否可以防止 javascript 从字符串中执行 \n。

我有包含 \n 的字符串（即“ `ksqOOEe+sqQwexx12lMf31V\nLqW23ds`”）。这是加密字符串，我必须用 Javascript 处理它。问题是JS把它分成两行，而不是浏览器注册非法操作。我不想用其他特殊字符对其进行转义，因为它是加密字符串，我必须在接下来的步骤中使用解密过程进行数据重建。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T15:53:14.993

转义斜线，使其不会将其视为转义序列。这样做会告诉 javascript 它是一个文字斜杠，而不是在字符串中存储两个斜杠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T08:50:30.780

由于我使用 Web 服务并在 Java 端生成加密字符串，因此我使用 URLEncoder 对其进行编码，然后再将其返回给客户端。比在包含相同编码字符串的下一个请求中，我使用 URLDecoder 解码它，而不是使用 base64 解码器......它有效，感谢大家的帮助:)

# java - 向左/向右滚动到新页面

> ID：10837025
> 
> 赞同：2
> 
> 时间：2012-05-31T15:51:53.433
> 
> 标签：java, android, user-interface, tabs, scroll

我正在创建一个显示多个“页面”内容的应用程序。通常，这代表基于桌面的应用程序上的选项卡。

在 android 上，我希望能够在信息选项卡之间轻弹，在屏幕上的任何位置使用手指。这些选项卡的内容只是 XML 视图，或以编程方式创建的视图。

查看 android 上的应用程序，有几个应用程序可以做到这一点。Google Play、Gmail、Beautiful Widgets、BBC News、Contacts、Engadget。

我查找了几个术语，主要是可滚动的选项卡，但没有找到与上述应用程序类似的任何内容。我目前正在查看 TabHost、TabWidget 和 ViewPaper，但不确定这些是否符合我的要求。

谁能告诉我可以在android中使用哪个控件来获得该功能。在列出的应用程序中，我希望它的样式更像 Google Play 商店，标签名称位于顶部，附近标签的名称位于左侧和右侧（如果适用）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T17:50:12.503

在 android 博客上有一个示例，用于 google play 应用程序。

[使用 ViewPager 滑动水平视图](http://android-developers.blogspot.com.br/2011/08/horizontal-view-swiping-with-viewpager.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T16:05:42.603

听起来你正在寻找[这个](https://github.com/JakeWharton/Android-ViewPagerIndicator)。它与 ViewPager、v4 兼容库和 ActionBarSherlock 兼容。

# php - 使用登录和在线显示照片上传照片的工作流程

> ID：10837028
> 
> 赞同：-2
> 
> 时间：2012-05-31T15:52:00.597
> 
> 标签：php, javascript, android, cordova, photo-upload

你好，我正在开发一个教育应用程序，只是为了我自己的学习，用户可以登录，上传照片，然后让它们显示在网站上。我对它应该如何工作的一般想法有点困惑。我知道这不是解决这类问题的最佳地点，但我在其他任何地方都找不到。

基本上我希望用户能够使用 OpenID 之类的东西登录，然后上传照片（我正在使用 phonegap，因此他们会使用 Phonegap API 来执行此操作，我在这里了解移动端）到服务器然后有托管在服务器上，并且能够将用户的照片一起显示。

我是否需要将每张照片提交到数据库，如果需要，我将如何存储照片信息？如果您有任何意见，我将不胜感激。我知道服务器端的 php，我只是不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:56:46.250

> 我需要将每张照片提交到数据库吗

仅当您愿意时，您才可以使用 base64 对其进行编码或将其存储为 blob。您最好的选择是将图像存储在数据库之外的服务器上的某个位置，而是将其地址或路径与唯一 ID 一起存储在数据库中。

> 我将如何存储照片信息？

什么照片信息，exif数据？还是您在谈论其他一般信息？（上传日期、上传用户等）无论哪种方式，您都可以在数据库表中为要存储的每个数据块创建一列。

例如，如果您想存储每张照片的上传日期以及上传照片的用户，您可以设置列，使数据库中的一行看起来像这样：

```
(columns)   id    photo               user         date 
(row)       58    uploads/img58.jpg   myuser192    1338483324 
```

至于实际在您的服务器上获取照片，也许您可​​以使用像[Uploadify这样的 html5 友好解决方案](http://www.uploadify.com/)

# yii - Yii 中使用 PostgreSQL 的布尔类型

> ID：10837029
> 
> 赞同：1
> 
> 时间：2012-05-31T15:52:04.860
> 
> 标签：yii

简单的 Postgres 表：

```
CREATE TABLE public.test (
  id INTEGER NOT NULL, 
  val BOOLEAN NOT NULL, 
  CONSTRAINT test_pkey PRIMARY KEY(id)
); 
```

**这样做**：

```
Yii::app()->db->createCommand()->insert('test', array(
        'id'=>1,
        'val'=>true,
    )); 
```

万事如意：

```
Executing SQL: INSERT INTO "test" ("id", "val") VALUES (:id, :val). Bound with :id=1, :val=true 
```

但是**这样做**

```
Yii::app()->db->createCommand()->insert('test', array(
        'id'=>1,
        'val'=>false,
    )); 
```

我收到**错误**：

```
SQLSTATE[22P02]: Invalid text representation: 7 ERROR: invalid input syntax for type boolean: ""
LINE 1: INSERT INTO "test" ("id", "val") VALUES ('1', '')
^. The SQL statement executed was: INSERT INTO "test" ("id", "val") VALUES (:id, :val). Bound with :id=1, :val=false 
```

我错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:27:41.237

在“db”组件中，将[**emulatePrepare**](http://www.yiiframework.com/doc/api/1.1/CDbConnection#emulatePrepare-detail)属性设置为 false/null。将其设置为 true 通常会触发此错误。

*Postgres 支持准备好的语句，因此无需模拟。*

# regex - 匹配特定格式的数字字符串的正则表达式？

> ID：10837032
> 
> 赞同：1
> 
> 时间：2012-05-31T15:52:17.103
> 
> 标签：regex

我需要一个正则表达式来判断字符串是否采用以下格式。数字组必须用逗号分隔。可以包含一系列由 - 分隔的数字

```
 300, 200-400, 1, 250-300 
```

这些组可以按任何顺序排列。

这是我到目前为止所拥有的，但它与整个字符串不匹配。它只匹配数字组。

```
([0-9]{1,3}-?){1,2},? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T16:13:41.953

试试这个：

```
^(?:\d{1,3}(?:-\d{1,3})?)(?:,\s*\d{1,3}(?:-\d{1,3})?|$)+ 
```

由于您没有指定数字范围，因此我将其留给您。无论如何，您都应该使用正则表达式进行数学运算:)

解释：

```
"
^                       # Assert position at the beginning of the string
(?:                     # Match the regular expression below
   \\d                  # Match a single digit 0..9
      {1,3}             # Between one and 3 times, as many times as possible, giving back as needed (greedy)
   (?:                  # Match the regular expression below
      -                 # Match the character “-” literally
      \\d               # Match a single digit 0..9
         {1,3}          # Between one and 3 times, as many times as possible, giving back as needed (greedy)
   )?                   # Between zero and one times, as many times as possible, giving back as needed (greedy)
)
(?:                     # Match the regular expression below
                        # Match either the regular expression below (attempting the next alternative only if this one fails)
      ,                 # Match the character “,” literally
      \\s               # Match a single character that is a “whitespace character” (spaces, tabs, and line breaks)
         *              # Between zero and unlimited times, as many times as possible, giving back as needed (greedy)
      \\d               # Match a single digit 0..9
         {1,3}          # Between one and 3 times, as many times as possible, giving back as needed (greedy)
      (?:               # Match the regular expression below
         -              # Match the character “-” literally
         \\d            # Match a single digit 0..9
            {1,3}       # Between one and 3 times, as many times as possible, giving back as needed (greedy)
      )?                # Between zero and one times, as many times as possible, giving back as needed (greedy)
   |                    # Or match regular expression number 2 below (the entire group fails if this one fails to match)
      \$                # Assert position at the end of the string (or before the line break at the end of the string, if any)
)+                      # Between one and unlimited times, as many times as possible, giving back as needed (greedy)
" 
```

**![测试样品](../Images/2a658e32a98247bd2c40f2982487a1df.png)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T16:05:02.143

```
^(\d+(-\d+)?)(,\s*(\d+(-\d+)?))*$ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T15:57:51.437

这应该有效：

```
/^([0-9]{1,3}(-[0-9]{1,3})?)(,\s?([0-9]{1,3}(-[0-9]{1,3})?))*$/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T15:59:13.340

你需要一些重复：

```
(?:([0-9]{1,3}-?){1,2},?)+ 
```

为确保数字正确，即您不匹配 010 之类的数字，您可能需要稍微更改正则表达式。我还更改了正则表达式的范围部分，以便您不匹配 100-200- 之类的内容，而只匹配 100 或 100-200，并在逗号后添加了对空格的支持（可选）：

```
(?:(([1-9]{1}[0-9]{0,2})(-[1-9]{1}[0-9]{0,2})?){1,2},?\s*)+ 
```

此外，根据您要捕获的内容，您可能希望将捕获括号`()`更改为非捕获括号`(?:)`

**更新**

基于最新评论的修订版：

```
^\s*(?:(([1-9][0-9]{0,2})(-[1-9][0-9]{0,2})?)(?:,\s*|$))+$ 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-31T15:57:26.467

```
([0-9-]+),\s([0-9-]+),\s([0-9-]+),\s([0-9-]+) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-31T15:58:57.737

试试这个正则表达式

```
^(([0-9]{1,3}-?){1,2},?\s*)+$ 
```

# eclipse - 在 Eclipse 中设置自定义语法高亮的快速方法

> ID：10837035
> 
> 赞同：11
> 
> 时间：2012-05-31T15:52:36.947
> 
> 标签：eclipse, syntax-highlighting, springsource

我知道我不是第一个需要这个的人。我正在研究一个内部创建的代码库，我想在 Eclipse 中对其应用突出显示。在 Notepad++ 中，我可以为正在查看的文件设置语言。有没有办法为 Eclipse 做到这一点？

我正在处理的代码将使用与 C++ 相同的语法样式。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-01T02:01:59.190

您最好的选择是转到首选项 -> 常规 -> 编辑器 -> 文件关联。添加您尝试打开的内容的文件扩展名，并将 C++ 编辑器添加为关联的默认编辑器。

如果没有文件扩展名，那么事情就有点困难了。不要双击打开文件，而是右键单击 -> 打开方式... -> 其他 -> C++ 编辑器。这只会记住您对该文件的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-22T15:54:07.377

正如[Andrew Eisenberg 所说](https://stackoverflow.com/a/10843530/4561887)，转到`Window`--> `Preferences`--> `General`--> `Editors`-->`File Associations`并确保根据您的需要为每种文件类型选择的编辑器是正确的。

但是，对于 Eclipse CDT，您的大多数文件类型都是在`Preferences`--> `C/C++`-->中设置的`File Types`。

还有，就像他说的，可以通过右键菜单选择自己的编辑器，包括外部系统编辑器，比如Sublime Text 3、Atom、Visual Studio Code、Notepad++等
`Right click on the file`--> `Open With`--> `Other...`-- > 根据您的喜好选择“内部编辑器”或“外部程序”，可选择选中底部的框以使其成为下次的默认选择。

# android - HTC opensense SDK 是否仅适用于带有 HTC Sense 的安卓设备？

> ID：10837042
> 
> 赞同：2
> 
> 时间：2012-05-31T15:53:08.260
> 
> 标签：android, htc-android

最近我刚刚发现了 HTC opensense SDK。

此 SDK 是否仅适用于 HTC 设备或安装了 HTC Sense 的设备，还是适用于其他设备？

链接：[http ://www.htcdev.com/devcenter/opensense-sdk](http://www.htcdev.com/devcenter/opensense-sdk)

有人用过这个SDK吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T22:24:18.570

本页底部展示了一些使用 SDK 的成功第三方应用程序：http: [//htcdev.com/devcenter/opensense-sdk](http://htcdev.com/devcenter/opensense-sdk)

SDK 的功能通常仅适用于 HTC 设备，尽管有时会包含一个库来帮助在模拟器上进行开发，例如使用 Scribe 主动笔 API。我们建议您将应用程序编写为适用于所有设备的单个 APK，无论是 HTC 还是其他设备。

您可以像定位高版本 Android 一样定位 SDK，然后使用反射或其他方法检查何时使用额外功能。这与大多数开发人员用于支持仅在较新版本的 Android 中引入的功能相同的方法。如果需要，您还可以拥有一个以 SDK 为目标的 Android 库项目和一个以其他目标为目标的主项目，并且仍然生成单个 APK。

您可以在插件的示例目录中看到第一种技术的示例。那是 android-sdk\add-ons\addon-opensense_sdk_for_tablets-htc-12\samples 其中 android-sdk 是您安装 SDK 的位置，并且您从 Google SDK Manager 安装了当前的 OpenSense SDK。示例项目名称是 SingleApkDemo。插件的名称可能会在下一个版本中更改，但目录中仍然会有示例。

# xcode - 在 xcode 中设置宏

> ID：10837044
> 
> 赞同：0
> 
> 时间：2012-05-31T15:53:16.290
> 
> 标签：xcode, macros

我创建了一个新的 xcode 项目并放入了 clunk 库的源文件（http://sourceforge.net/projects/clunk/）。当我尝试构建该项目时，出现以下错误：

```
error turn on SSE support with CLUNK_USES_SSE macro 
```

如何将该宏设置为...我不知道..在 xcode 中为真？？？或者它需要什么价值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T20:56:42.323

将宏添加到预处理器宏构建设置。我没有使用 Clunk，但是将 CLUNK_USES_SSE 添加到 Preprocessor Macros 构建设置应该将宏设置为 true。

# javascript - 通过内容可编辑 div 内的表格进行选项卡？

> ID：10837045
> 
> 赞同：1
> 
> 时间：2012-05-31T15:53:18.643
> 
> 标签：javascript, html, css

我试图弄清楚如何在 contenteditable div 中通过 HTML 表格单元格进行制表符。我知道大多数人会说你为什么要这样做。我正在开发一个文本编辑器，它允许用户在他们想要的任何地方插入一个预先格式化的表格。我已经解决了在用户光标处动态插入表格的问题，但我无法弄清楚如何让用户从内容到 html 表格并通过每个单元格进行选项卡。我已经尝试过输入框，它允许他们通过标签，但它在每个角落留下选择器栏，并且仍然需要用户双击单元格来添加内容。我也只尝试过表格单元格，它不会跳到只是跳过它们的单元格。任何帮助将不胜感激......在征服了插入表格的光标跟踪之后，我以为我在家自由...... :(

```
 <div id="divbilltext" runat="server" contenteditable="true" style="height:auto;">
                        <table>
                            <tr>
                                <td>
                                <input type="text" id="a" tabindex="1"/>
                                </td>
                                <td>
                                <input type="text" id="b" tabindex="2"/>
                                </td>
                                <td>
                                <input type="text" id="c" tabindex="3"/>
                                </td>
                            </tr>
                        </table>

                      </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:11:39.947

tabindex 将是实现这一目标的最一致的方式：

[http://www.w3.org/TR/html4/interact/forms.html#adef-tabindex](http://www.w3.org/TR/html4/interact/forms.html#adef-tabindex)

但是 tabindex 仅受特定元素支持：A、AREA、BUTTON、INPUT、OBJECT、SELECT 和 TEXTAREA。

# google-maps - 缓存 Google Places API 结果

> ID：10837048
> 
> 赞同：12
> 
> 时间：2012-05-31T15:53:38.510
> 
> 标签：google-maps, google-places-api

我正在构建一个列出帖子的移动应用程序，每个帖子都有一个附加的位置。

我希望列表能够显示与用户位置的距离。在不缓存任何内容的情况下，它需要存储每个帖子的地点参考，并在列出从 Google Places API 获取地点的几何图形时，这听起来是一个非常糟糕的主意。

我是否可以在我的数据库中存储该地点的 ID、参考、名称和几何形状并使用我的 API 交付？这仅用于性能目的

另一种实现可能是将此数据缓存在移动设备上的本地 sqlite db 中，但随后用户将不得不下载每个未缓存位置的信息，因此对于 X 个不同位置的列表，客户端将执行 X api 调用，听起来速度慢而且浪费电池。

我是否允许在我的数据库中的一个表中拥有一个中央缓存，该表将每隔一段时间刷新一次，如果在 30 天内不访问则将其驱逐？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-06-06T18:30:24.947

[Google 的 Places 页面](https://developers.google.com/places/webservice/policies#pre-fetching_caching_or_storage_of_content)声明允许缓存 Places ID。

[10.5.d](https://developers.google.com/maps/terms#section_10_5)中的条款规定，出于*性能原因*，您可以将*有限*数量的内容存储不超过 30 个日历日。由于这是您想要做的，那么我希望您可以存储 ID、位置和名称。

 *当您开始缓存更多信息时，您将违反 API 的条款。目前还不清楚这些是什么，但我认为只要你是*合理*的，那么你会没事的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-01-03T14:25:48.510

根据当前政策，Place Id 不受缓存限制。

[内容的预取、缓存或存储](https://developers.google.com/maps/documentation/directions/policies)

> 使用 Directions API 预先获取、缓存或存储内容应用程序受 Google Maps Platform 服务条款的约束。条款第 3.2.4(a) 节规定，除非条款中规定的有限条件，否则您不得预取、缓存、索引或存储任何内容。
> 
> 请注意，用于唯一标识地点的地点 ID 不受缓存限制。因此，您可以无限期地存储地点 ID 值。地点 ID 值在 Directions API 响应的 place_id 字段中返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-08T23:48:54.513

“请注意，用于唯一标识地点的地点 ID 不受缓存限制。因此，您可以无限期地存储地点 ID 值。地点 ID 在地点 API 响应的 place_id 字段中返回。” [https://developers.google.com/places/web-service/policies#usage_limits](https://developers.google.com/places/web-service/policies#usage_limits)*

# git - 创建尽可能小的 git 存储库

> ID：10837056
> 
> 赞同：1
> 
> 时间：2012-05-31T15:53:58.130
> 
> 标签：git

我将创建大量的小型 git 存储库，并且我试图避免在 , 等目录中浪费宝贵的`hooks`空间`info`。

我知道可以使用指向一个空模板目录

`git-init --template`

但是有没有办法不被强制指定目录？奇怪的`--no-template`是，它被认为是一个有效的参数，但它只会使用默认模板。

另外，有没有办法防止 git 添加`.git/logs`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T16:45:22.897

根据以下大小测量，您只需要删除 .git/hooks/* 文件即可获得非常小的 .git 存储库。幸运的是，删除钩子是完全安全的（没有钩子；没有动作）。

```
ebg@taiyo(509)$ du -sh foo/.git
 52K    foo/.git
ebg@taiyo(510)$ du -sh foo/.git/*
  4K    foo/.git/HEAD
  0B    foo/.git/branches
  4K    foo/.git/config
  4K    foo/.git/description
 36K   foo/.git/hooks
  4K    foo/.git/info
  0B    foo/.git/objects
  0B    foo/.git/refs
ebg@taiyo(511)$ du -sh foo/.git/hooks/*
  4K    foo/.git/hooks/applypatch-msg.sample
  4K    foo/.git/hooks/commit-msg.sample
  4K    foo/.git/hooks/post-update.sample
  4K    foo/.git/hooks/pre-applypatch.sample
  4K    foo/.git/hooks/pre-commit.sample
  8K    foo/.git/hooks/pre-rebase.sample
  4K    foo/.git/hooks/prepare-commit-msg.sample
  4K    foo/.git/hooks/update.sample 
```

表演`rm -f .git/hooks/*.sample`完再表演`git init`。将它捆绑在一个 shell 函数中。当然，如果你真的打算砍掉你可以做的钩子`sudo rm -f <path-to-git-install>/share/git-core/templates/hooks/*`

如果您需要删除更多内容，您将进入破坏 git 的领域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T16:47:16.420

# vb.net - FluentValidation 与对象列表

> ID：10837057
> 
> 赞同：0
> 
> 时间：2012-05-31T15:54:01.043
> 
> 标签：vb.net, asp.net-mvc-3, validation, lambda, fluentvalidation

现在我有一个包含三个输入列表的视图模型；文本框输入、下拉列表输入和复选框输入。这些列表中的每一个都是输入对象的列表，其中包含四个值；参数、参数名称、参数类型和值。我正在使用这些输入列表在表单上生成可变数量的字段，具体取决于每个列表包含的对象数量。

我目前的问题是我不确定如何使用流利的验证来验证列表对象中的变量。我知道每个列表的行为在返回 Nothing 方面应该如何表现，但我不知道如何使用 FluentValidation 对该行为进行编码。

输入模型：

```
Public Class Input
    Property value As String
    Property ParamName As String
    Property ParamType As String
    Property ParamEnums As List(Of String)
End Class 
```

参数视图模型：

```
Imports FluentValidation
Imports FluentValidation.Attributes

<Validator(GetType(ParamViewModelValidator))> _
Public Class ParamViewModel
    Property TextBoxInput As List(Of Input)
    Property DropdownListInput As List(Of Input)
    Property CheckBoxInput As List(Of Input)
End Class 
```

我的观点：

```
@Modeltype SensibleScriptRunner.ParamViewModel

<h2>Assign Values to Each Parameter</h2>

@Code
    Using (Html.BeginForm("Index", "Parameter", FormMethod.Post))
    @<div> 
        <fieldset>
            <legend>Parameter List</legend>
            @For i = 0 To (Model.TextBoxInput.Count - 1)
                    Dim iterator = i
                    @Html.EditorFor(Function(x) x.TextBoxInput(iterator), "TextInput")
            Next
            @For i = 0 To Model.DropdownListInput.Count - 1
                    Dim iterator = i
                    @Html.EditorFor(Function(x) x.DropdownListInput(iterator), "EnumInput")
            Next
            @For i = 0 To Model.CheckBoxInput.Count - 1
                    Dim iterator = i
                    @Html.EditorFor(Function(x) x.CheckBoxInput(iterator), "CheckBoxInput")
            Next
            <p>
                <input type="submit" value="Query Server"/>
            </p>
        </fieldset>
    </div>
    Html.EndForm()
    End Using
End Code 
```

编辑器模板之一的示例：

```
@modeltype SensibleScriptRunner.Input

@Code
    @<div class="editor-label">
        @Html.LabelFor(Function(v) v.value, Model.ParamName)
    </div>
    @<div class="editor-field">
        @Html.TextBoxFor(Function(v) v.value)
    </div>
End Code 
```

当前 FluentValidation 代码：

```
Imports FluentValidation

Public Class ParamViewModelValidator
    Inherits AbstractValidator(Of ParamViewModel)

    Public Sub New()
        RuleFor(Function(x) x.TextBoxInput).NotEmpty.[When](Function(x) Not IsNothing(x.TextBoxInput))
        RuleFor(Function(x) x.DropdownListInput).NotEmpty.[When](Function(x) Not IsNothing(x.DropdownListInput))
        RuleFor(Function(x) x.CheckBoxInput).NotEmpty.[When](Function(x) Not IsNothing(x.CheckBoxInput))
    End Sub

End Class 
```

我目前要做的事情是确认在我的每个列表中的每个对象中，它们都具有一个不为空的 value 属性。我可以通过验证输入模型来做到这一点吗？现在，代码用于确认列表本身不为空，但列表中的对象仍然可以包含所有空值。有没有一种简单的方法可以做到这一点？

或者，我应该以不同的方式设置我的代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:58:10.833

嗯，我想通了。对于任何好奇的人，我所要做的就是添加一个 inputvalidator 类。

```
Imports FluentValidation

Public Class InputValidator
Inherits AbstractValidator(Of Input)

Public Sub New()
    RuleFor(Function(x) x.value).NotEmpty()
    RuleFor(Function(x) x.ParamName).NotEmpty()
    RuleFor(Function(x) x.ParamType).NotEmpty()
End Sub

End Class 
```

将此添加到我的输入模型中解决了所有问题。我不确定代码在哪里实际检查此验证（我的编辑器模板指向输入作为模型，也许这与它有关；也可能是当我的 paramviewmodelvalidator 检查列表是否有效时，它还检查该列表中每个对象的标准（我认为是这个））。无论如何，如果有人遇到类似问题，这里有一个解决方案。

# html - 显示带有未复制空格的文本

> ID：10837063
> 
> 赞同：2
> 
> 时间：2012-05-31T15:54:17.417
> 
> 标签：html, css

我想在网站上显示一个帐号。为了更容易阅读，我想在几个地方放置空格来对数字进行分组。简单的。但是，我希望这样当用户选择并复制该数字时，粘贴时文本中不会有任何空格。这样它就不会弄乱例如对字符数有限制的在线银行帐户字段。

关于如何以一种好的方式解决这个问题的任何想法？

我正在考虑以下几点，但想知道是否有更好的方法。

```
// CSS
span.acc_no span {display:inline-block; margin: 0 .5em}

// HTML
<span class="acc_no">12345<span>12</span>1234</span> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T16:01:07.487

我就是这样做的。如果您不希望在复制数字时出现空格，那么您需要使用某种填充或边距来呈现空格的外观。

CSS：

```
.acc_no span {
    display:inline-block;
    padding-left:0.5em;
}
.acc_no span:first-child {
    padding-left:0;
} 
```

HTML

```
<span class="acc_no"><span>12345</span><span>12</span><span>1234</span></span> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T16:05:07.947

另一种选择是使用 :after 伪标签。

```
Here is your Account number: <span class="AccountNumber"><span>12345</span><span>12</span><span>1234</span></span>

.AccountNumber span:before
{
    content: " ";
} 
```

[http://jsfiddle.net/chrisvenus/DUsUN/](http://jsfiddle.net/chrisvenus/DUsUN/)

Though that might depend on your browser compatibility requirements...

Edit: Thanks to jasssonpet for pointing out to me that the implementation of copying differs by browsers... FF and chrome do not copy the spaces added this way. IE does. This means this is probably not the best solution but still an interesting one to note so I'm not getting rid of it. :)

# c++ - 从向量中删除要擦除的指针

> ID：10837066
> 
> 赞同：0
> 
> 时间：2012-05-31T15:54:31.410
> 
> 标签：c++, stl, stdvector, delete-operator, erase

假设我有一个指向“ `Order`”对象的指针向量。现在我想从这个向量中删除一个订单。我想知道以下是否是删除此类指针的正确方法？

```
std::vector<Order*> orders; 

// somehow I obtained a vector of Order*, and an iterator it that points to
// an order that I want to remove completely. 

// does the following work? 
Order *order = *it;
orders.erase(it);
delete order; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T15:58:56.533

这将删除订单对象。所以是的，这是正确的方法。
不过，您应该考虑使用智能指针，如`unique_ptr`or `shared_ptr`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T16:05:45.663

指针是 的结果`new`吗？有没有人先删了？如果“是”和“否”，那么您的代码将删除该对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T15:58:22.243

是的。这是正确的方法。容器在擦除时不会删除其内容。

# php - $_POST 不起作用，$_GET 起作用

> ID：10837069
> 
> 赞同：0
> 
> 时间：2012-05-31T15:54:49.830
> 
> 标签：php, html, forms

我有一个烦人的问题。当我使用 method="post" 提交以下代码并查找 $_POST 变量时，代码无法识别它。当我切换到 method="get" 并查找 $_GET 变量时，它工作正常。我宁愿不使用Get。有什么建议么？我的最终代码也将包含其他输入，但是，我希望文件输入是可选的。因此，仅当实际发送文件输入时，我才需要处理代码。谢谢你的帮助！

```
 //form.html.php
<form action="index.php" method="post" enctype="multipart/form-data">
<label id="upload">Select file to upload:
<input type="file" id="upload" name="foobar" /></label>
<input type="submit" value="Submit" />
</form>

//index.php
if(isset($_POST['foobar']))
{
//some code
} 
```

但是，这很好用

```
//form.html.php
<form action="index.php" method="get" enctype="multipart/form-data">
<label id="upload">Select file to upload:
<input type="file" id="upload" name="foobar" /></label>
<input type="submit" value="Submit" />
</form>

//index.php
if(isset($_GET['foobar']))
{
//some code
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T15:56:16.937

要获取文件，请使用[`$_FILES`](http://php.net/manual/en/reserved.variables.files.php)，并且必须使用`post`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T15:57:21.473

您正在上传文件，除了“文件”类型输入之外没有任何输入。因此将不会有任何 $_POST 值发送到 $_FILES 数组。并且您的表单需要设置 method="post" 。

检查此代码

```
echo "Upload: " . $_FILES["file"]["name"] . "<br />";
echo "Type: " . $_FILES["file"]["type"] . "<br />";
echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
echo "Stored in: " . $_FILES["file"]["tmp_name"]; 
```

# asp.net - appharbor 在推送后编译时出错

> ID：10837070
> 
> 赞同：2
> 
> 时间：2012-05-31T15:54:55.790
> 
> 标签：asp.net, compilation, compiler-errors, appharbor

我从 appharbor 得到这个错误：

```
Build started 5/31/2012 4:52:13 PM.
Project "D:\temp\woojnpbm.drx\input\wsolver.sln" on node 1 (default targets).
ValidateSolutionConfiguration:
  Building solution configuration "Release|Any CPU".
D:\temp\woojnpbm.drx\input\wsolver.sln.metaproj : warning MSB4121: The project configuration for project "wsolver" was not specified in the solution file for the solution configuration "Release|Any CPU". [D:\temp\woojnpbm.drx\input\wsolver.sln]
Project "D:\temp\woojnpbm.drx\input\wsolver.sln" (1) is building "D:\temp\woojnpbm.drx\input\wsolver.metaproj" (2) on node 1 (default targets).
Build:
  C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_compiler.exe -v /wsolver -p ..\..\WebSites\wsolver\ -u -f D:\temp\woojnpbm.drx\output\_PublishedWebsites\wsolver\ 
ASPNETCOMPILER : error 1003: The directory 'D:\temp\WebSites\wsolver\' doesn't exist. [D:\temp\woojnpbm.drx\input\wsolver.metaproj]
Done Building Project "D:\temp\woojnpbm.drx\input\wsolver.metaproj" (default targets) -- FAILED.
Done Building Project "D:\temp\woojnpbm.drx\input\wsolver.sln" (default targets) -- FAILED.

Build FAILED.

"D:\temp\woojnpbm.drx\input\wsolver.sln" (default target) (1) ->
(ValidateProjects target) -> 
  D:\temp\woojnpbm.drx\input\wsolver.sln.metaproj : warning MSB4121: The project configuration for project "wsolver" was not specified in the solution file for the solution configuration "Release|Any CPU". [D:\temp\woojnpbm.drx\input\wsolver.sln]

"D:\temp\woojnpbm.drx\input\wsolver.sln" (default target) (1) ->
"D:\temp\woojnpbm.drx\input\wsolver.metaproj" (default target) (2) ->
(Build target) -> 
  ASPNETCOMPILER : error 1003: The directory 'D:\temp\WebSites\wsolver\' doesn't exist. [D:\temp\woojnpbm.drx\input\wsolver.metaproj]

    1 Warning(s)
    1 Error(s)

Time Elapsed 00:00:00.62 
```

我的应用程序是 aspx.net 4.0 - 有人见过吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:23:46.763

您可能应该检查解决方案和项目文件中的路径。从错误中，`D:\temp\WebSites\wsolver\`被引用，但是当您的代码在 AppHarbor 上构建时找不到该路径。

调试此问题的一个好方法是将您的代码签出或克隆到另一台机器以检查它是否在那里构建。

# c# - 从内容类型为 application/json 的请求中检索值

> ID：10837082
> 
> 赞同：6
> 
> 时间：2012-05-31T15:55:51.567
> 
> 标签：c#, asp.net-mvc, json

我有以下脚本将数据发送到 MVC 中的控制器：

```
$.ajax({
    url: '/products/create',
    type: 'post',
    contentType: 'application/json; charset=utf-8',
    data: JSON.stringify({
        'name':'widget',
        'foo':'bar'
    })
}); 
```

我的控制器如下所示：

```
[HttpPost]
public ActionResult Create(Product product)
{
    return Json(new {success = true});
}

public class Product 
{ 
    public string name { get; set; }
} 
```

有没有一种方法可以在我的控制器操作中获取“foo”变量，而无需

*   修改模型
*   修改动作的签名

**如果是常规的表单提交，我可以访问 Request.Form["foo"]，但是这个值为 null，因为它是通过 application/json 提交的。**

我希望能够从动作过滤器访问这个值，这就是我不想修改签名/模型的原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-27T12:27:34.500

我今天想做几乎完全相同的事情，发现这个问题没有答案。我也用与 Mark 类似的解决方案解决了这个问题。

这在asp.net MVC 4中对我来说非常有效。即使它是一个旧问题，也可以帮助其他人阅读这个问题。

```
 [HttpPost]
        public ActionResult Create()
        {
            string jsonPostData;
            using (var stream = Request.InputStream)
            {
                stream.Position = 0;
                using (var reader = new System.IO.StreamReader(stream))
                {
                    jsonPostData = reader.ReadToEnd();
                }
            }
            var foo = Newtonsoft.Json.JsonConvert.DeserializeObject<IDictionary<string, object>>(jsonPostData)["foo"];

            return Json(new { success = true });
        } 
```

重要的部分是重置流的位置，因为它已经被一些 MVC 内部代码或其他东西读取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T04:14:59.227

> 我希望能够从动作过滤器访问这个值，这就是我不想修改签名/模型的原因。

如果不更改方法的签名，则从 Action 过滤器访问值会很棘手。从这篇[文章](http://build.mt.gov/2012/2/14/requestinputstream%20and%20json%20model%20binding%20in%20aspnet%20mvc%203.aspx)中可以更好地理解原因。

此代码将在授权过滤器或模型绑定之前运行的代码中运行。

```
public class CustomFilter : FilterAttribute, IAuthorizationFilter
  {
    public void OnAuthorization(AuthorizationContext filterContext)
    {
      var request = filterContext.RequestContext.HttpContext.Request;

      var body = request.InputStream;
      var encoding = request.ContentEncoding;
      var reader = new StreamReader(body, encoding);
      var json = reader.ReadToEnd();

      var ser = new JavaScriptSerializer();

      // you can read the json data from here
      var jsonDictionary = ser.Deserialize<Dictionary<string, string>>(json); 

      // i'm resetting the position back to 0, else the value of product in the action  
      // method will  be null.
      request.InputStream.Position = 0; 
    }
  } 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-31T16:00:31.660

即使这个 'foo' 没有绑定，它也可以通过以下方式在你的操作过滤器中使用：

```
filterContext.HttpContext.Current.Request.Params 
```

如果您看到您的参数，请查看这些集合。

所以是的，只需创建您的操作过滤器，不要更改它将起作用的签名。

以防万一调试您的过滤器以确定值在哪里。

最后，您需要在 global.asax 中注册 json 的值提供程序：

```
protected void Application_Start() 
{
  RegisterRoutes(RouteTable.Routes);
  ValueProviderFactories.Factories.Add(new JsonValueProviderFactory());
} 
```

您的参数也是错误的，它需要更像：

```
$.ajax({
    url: '/products/create',
    type: 'post',
    contentType: 'application/json; charset=utf-8',
    data: JSON.stringify({
        name:'widget',
        foo:'bar'
    })
}); 
```

没有报价。

**编辑（更准确地说）：**

您的过滤器将包含这些方法

```
public void OnActionExecuting(ActionExecutingContext filterContext)
{

}
public void OnActionExecuted(ActionExecutedContext filterContext)
{

} 
```

# c# - 通过网络读取文件非常慢

> ID：10837084
> 
> 赞同：2
> 
> 时间：2012-05-31T15:56:02.643
> 
> 标签：c#, .net, winforms, file-io, network-programming

我在读取网络驱动器上的大文件（~400 mb）时遇到了一个有趣的问题。最初，我将完整的网络地址输入 FileInfo 并使用 CopyTo 函数将其传输到本地临时驱动器，然后读取它。这似乎工作正常，它不慢但不快 - 只是嗯。CopyTo 功能将使运行该程序的计算机的网络利用率始终保持在 50% 以上，这非常好。

为了加快这个过程，我尝试将网络文件直接读入内存流中，可以说是切断了中间人。当我尝试这个（使用[这里](https://stackoverflow.com/a/1247042/643619)描述的异步复制模式）时，速度非常慢。我的网络利用率甚至从未超过 2% - 几乎就像是有什么东西在限制我。仅供参考，我在通过 Windows 资源管理器直接复制同一文件时观察了我的网络利用率，它达到了 80-90%……不知道这里发生了什么。下面是我使用的异步复制代码：

```
string line;
List<string> results = new List<string>();

Parser parser = new Parser(QuerySettings.SelectedFilters, QuerySettings.SearchTerms,
QuerySettings.ExcludedTerms, QuerySettings.HighlightedTerms);

byte[] ActiveBuffer = new byte[60 * 1024];
byte[] BackBuffer = new byte[60 * 1024];
byte[] WriteBuffer = new byte[60 * 1024];

MemoryStream memStream = new MemoryStream();
FileStream fileStream = new FileStream(fullPath, FileMode.Open, FileSystemRights.Read, FileShare.None, 60 * 1024, FileOptions.SequentialScan);

int Readed = 0;
IAsyncResult ReadResult;
IAsyncResult WriteResult;

ReadResult = fileStream.BeginRead(ActiveBuffer, 0, ActiveBuffer.Length, null, null);
do
{
    Readed = fileStream.EndRead(ReadResult);

    WriteResult = memStream.BeginWrite(ActiveBuffer, 0, Readed, null, null);
    WriteBuffer = ActiveBuffer;

    if (Readed > 0)
    {
        ReadResult = fileStream.BeginRead(BackBuffer, 0, BackBuffer.Length, null, null);
        BackBuffer = Interlocked.Exchange(ref ActiveBuffer, BackBuffer);
    }

    memStream.EndWrite(WriteResult);
}
while (Readed > 0);

StreamReader streamReader = new StreamReader(memStream);
while ((line = streamReader.ReadLine()) != null)
{
    if (parser.ParseResults(line))
    results.Add(line);
}

fileStream.Flush();
fileStream.Close();

memStream.Flush();
memStream.Close();

return results; 
```

**更新** 根据评论，我刚刚尝试了以下内容。我的网络利用率只有 10-15% 左右……为什么这么低？

```
MemoryStream memStream = new MemoryStream();
FileStream fileStream = File.OpenRead(fullPath);

fileStream.CopyTo(memStream);

memStream.Seek(0, 0);
StreamReader streamReader = new StreamReader(memStream);

Parser parser = new Parser(QuerySettings.SelectedFilters, QuerySettings.SearchTerms,
QuerySettings.ExcludedTerms, QuerySettings.HighlightedTerms);

while ((line = streamReader.ReadLine()) != null)
{
if (parser.ParseResults(line))
results.Add(line);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-20T20:03:05.127

I'm late to the party, but having had the same problem of low network utilization recently, after trying a lot of different implementations if found at last that a StreamReader with a large buffer (1MB in my case) increased the network utilization to 99%. None of the other options did make a significant change.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T09:11:34.887

复制整个文件然后解析它是没有意义的。只需从网络驱动器打开文件，让 .Net Framework 尽最大努力为您提供数据。你可以比 MS 开发人员更聪明，你可以比他们更快地创建一个复制方法，但这确实是一个挑战。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T20:14:58.217

使用 Reflector，我看到您的调用是：

```
FileStream fileStream = File.OpenRead(fullPath); 
```

最终使用大小为 4096 字节（ 0x1000 ）的缓冲区。

```
public FileStream(string path, FileMode mode, FileAccess access, FileShare share) : this(path, mode, access, share, 0x1000, FileOptions.None, Path.GetFileName(path), false)
{
} 
```

您可以尝试显式调用**FileStream**构造函数之一，并指定更大的缓冲区大小和**FileOption.SequentialScan**。

不确定这会有所帮助，但很容易尝试。

# less - 带有可选参数的较少 css

> ID：10837085
> 
> 赞同：6
> 
> 时间：2012-05-31T15:56:03.443
> 
> 标签：less, default-value, optional-parameters

这可能是一个快速而简单的问题，但我仍然无法找到答案。

简而言之，有什么方法可以使用 mixin（比如`.mixin(@a: 2, @b: 3) { /* css here */ }`）并且只为给定的参数提供值？我知道我可以将其用作`.mixin(5)`与 相同的`.mixin(5, 3)`东西，但是我可以做类似的事情`.mixin(@b: 5)`吗？含义相同`.mixin(2, 5)`（但是我不必知道 a 的值即可使用默认值）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-31T18:40:34.737

在使用无点编译器的情况下，您可以做到

.mixin(@b:3);

这将在 1.3.1（下一个版本）中的原始 less.js 中 - 请参阅[https://github.com/cloudhead/less.js/pull/268](https://github.com/cloudhead/less.js/pull/268)

# ruby - Gollum `_Header.md` 不会渲染

> ID：10837087
> 
> 赞同：0
> 
> 时间：2012-05-31T15:56:11.403
> 
> 标签：ruby, wiki, gollum-wiki

与[咕噜一起](https://github.com/github/gollum)工作我无法获得要渲染的标题。文件名`_Header.md`符合[规范](https://github.com/github/gollum#header-files)，内容如下

```
Hello Header! 
```

但是，当访问`gollum`在存储库的根目录中运行的站点并访问位于`http://localhost:3000/`.

这特别令人费解，因为我能够让侧边栏和页脚正确呈现，但不能正确呈现页眉，可能是什么导致了这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T02:18:25.173

版本 2.0 不支持`_Header.ext`更`'[[_TOC_]]`明显的是，这里有些东西不正确，这可能不是我在做一些愚蠢的事情。

2.1 版应该很快就会发布。

# iphone - 如何知道 managedObjectContext 在另一个视图控制器中发生了变化

> ID：10837090
> 
> 赞同：0
> 
> 时间：2012-05-31T15:56:15.647
> 
> 标签：iphone, core-data

我正在关注这里的核心数据教程。我们有 RootViewcontroller 和 addRecipeViewController。

我列出了一些类和一些函数以及下面的流程屏幕，这样您就不会迷路

* * *

```
Recipe.h
#import <CoreData/CoreData.h>
@interface Recipes :  NSManagedObject  
{
}
@property (nonatomic, retain) NSString * recipeName;
@property (nonatomic, retain) NSString * cookingTime;

@end 
```

* * *

```
addRecipeViewController.h
@class Recipes;

@interface AddRecipeViewController : UIViewController <UITextFieldDelegate> {
    Recipes *recipes;
    UITextField *textFieldOne;
    UITextField *textFieldTwo;
} 
```

* * *

```
addRecipeViewController.m
    - (void)save {
        1.recipes.recipeName = textFieldOne.text;
        2.recipes.cookingTime = textFieldTwo.text;
        3.NSError *error = nil;
        4.if (![recipes.managedObjectContext save:&error]) {
            // Handle error
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            exit(-1);  // Fail
        }   
        [self dismissModalViewControllerAnimated:YES];
    } 
```

* * *

根视图控制器.m

```
- (void)insertNewObject {
    AddRecipeViewController *addRecipeView = [[AddRecipeViewController alloc] initWithNibName:@"AddRecipeViewController" bundle:[NSBundle mainBundle]];
    Recipes *recipes = (Recipes *)[NSEntityDescription insertNewObjectForEntityForName:@"Recipes" inManagedObjectContext:self.managedObjectContext];
    addRecipeView.recipes = recipes;
    UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController: addRecipeView];
    [self.navigationController presentModalViewController:navController animated:YES];
    [addRecipeView release];
} 
```

* * *

流量图片： ![在此处输入图像描述](../Images/1145e24e5241d48a8d59b6116489ccc0.png)

* * *

当`Save`点击 addRecipeViewController 的事件时，它会保存`recipes`到 `managedObjectContext`. rootViewConroller 迟早会`managedObjectContext`使用`NSFetchedResultsController`

**问题**：我不明白所有视图控制器的相同之处，以便在添加或删除后您`manageObjectContext`将获得最新的更新`manageObjectContext``rootViewController``Recipe``manageObjectContext``addRecipeViewController`

请帮助我理解这个问题。

欢迎所有评论在这里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:00:51.340

managedObjectContext 基本上是您的持久层，它包括一个缓存和一种检索尚未在缓存中的对象的方法。您希望避免在您的应用程序中有多个托管对象上下文，这样您就不需要处理令人讨厌的缓存同步问题。

因此，我不确定您到底遇到了什么问题导致您暂停，但请不要使问题过于复杂。Core Data 非常好，可以为您提供持久存储的单个入口点，并为您保持所有内容同步，因此您应该使用它运行 :)

另外，请务必不要混淆`NSManagedObjectContext`和`NSManagedObject`。托管对象存在于上下文中。它们不是同一件事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T16:03:42.087

当您的上下文发生变化时，您可能希望收到通知。如果是这样，请阅读以下内容：[是否有 Core Data 回调方法？](https://stackoverflow.com/questions/10771811/are-there-core-data-call-back-methods/10772908#10772908)

# google-app-engine - 如果您不是高级帐户，在哪里可以找到 appengine 的支持/状态？

> ID：10837093
> 
> 赞同：1
> 
> 时间：2012-05-31T15:56:21.803
> 
> 标签：google-app-engine

我们是 appengine 的非 Premier 帐户持有人。我们经历了几集，在大约一天的时间里，我们总是遇到 500 个错误，然后事情就解决了。在这些事件中（现在正在发生），我们检查了[Google Group](https://groups.google.com/forum/?fromgroups#!forum/google-appengine)、[System Status page](http://code.google.com/status/appengine)和[Stack Overflow](https://stackoverflow.com/questions/tagged/google-app-engine)，但在遇到问题时没有提及任何内容。事后，我们有时会看到有人提到谷歌大约在同一时间遇到了一些问题（不过我忘记了我在哪里看到的）。

似乎没有任何地方可以询问其他人是否遇到问题，除非可能是在 Google Group 中。该组的流量似乎非常低，而且似乎几乎未使用。

真正的问题是：有没有办法在没有高级帐户的情况下从 Google 获得支持？有什么方法可以询问 Google 是否遇到了可能会影响我们的应用的问题。有什么方法可以询问其他人是否遇到类似的问题。

我看了又看，但找不到任何地方可以获得这种信息。是不是就隐藏在眼前？非常欢迎任何帮助找到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T16:19:43.923

据我所知，您可以使用您提到的 Google Group。还有一个停机通知组：[http ://groups.google.com/group/google-appengine-downtime-notify](http://groups.google.com/group/google-appengine-downtime-notify)

您还可以在 App Engine 问题列表中提交生产问题：[http ://code.google.com/p/googleappengine/issues/list](http://code.google.com/p/googleappengine/issues/list)

你得到你付出的我认为的。

# c++ - 自定义 QAbstractItemModel 和 QTableView 中的选择损坏

> ID：10837094
> 
> 赞同：1
> 
> 时间：2012-05-31T15:56:22.033
> 
> 标签：c++, qt, model, model-view

我正在研究一个`QTableView`延迟加载的控件。

我有成千上万的记录必须显示，当我使用简单的`QListWidget`方法时，它曾经严重滞后。

现在我通过以下`data`方法使用 QAbstractItemModel：

```
QVariant MyModel::data(const QModelIndex & index, int role) const
{
    int col = index.column();
    int row = index.row();

    if (role == Qt::DecorationRole && col == 0)
    {            
        return getIcon(row); // icons in the first column
    }
    else if (role == Qt::DisplayRole && col == 1)
    {
        return getText(row); // text in the second column            
    }
    else
    {
        return QVariant();
    }
} 
```

生成的表格视图效果很好：它快速而流畅。

但是有一个主要问题：选择完全被破坏了。

当我选择一个项目/项目时，它们不会立即以蓝色突出显示，我需要滚动表格以便它重新绘制并显示蓝色背景。（我使用的是 Windows 7。）

选择项目时我也看不到虚线矩形。

我查了一下，表格视图的选择模型不为空。我还查看了 Qt 中的其他一些模型实现，它们具有类似的数据方法，但它们没有选择问题。

我也尝试从`QAbstractTableItem`and子类化`QAbstractListItem`，什么都没有。

在这里感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T17:07:07.763

对不起这个愚蠢的问题......

我通过删除以下行解决了这个问题：

```
tableView->setRootIndex(model->index(0, 0)); 
```

# php - 从 php 中的电子邮件地址获取网站

> ID：10837099
> 
> 赞同：1
> 
> 时间：2012-05-31T15:57:00.490
> 
> 标签：php, mysql

如何从 php/mysql 中的电子邮件地址中提取网站名称。在这里爆炸太昂贵了，因为我必须为数据库中的数千个数据做这件事

```
original data
test@example.com
test@example1.com

needed data
example.com
example1.com 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T16:01:59.073

```
function getDomain( $email ) {
    return substr( $email, strpos( $email, '@' ) + 1 );
}

$website = getDomain( 'test@example.com' ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T16:00:37.300

使用 查找@ 的索引，`strrpos`然后使用 对剩余部分进行子串化`substr`。

```
$atpos = strrpos($eaddress, '@');
$domain = substr($eaddress, $atpos + 1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T16:00:41.017

使用[strpos](http://www.php.net/manual/en/function.strrpos.php)查找`@`和[substr](http://www.php.net/manual/en/function.substr.php)以获取它之后的部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T16:03:15.437

```
foreach(... as $email) {
  $domains[] = substr($email, strpos('@', $email) + 1);
} 
```

这应该可以很好地工作 - 请注意，没有验证`strpos`返回 false，表示该行不包含 @ 符号。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-31T16:11:07.480

如果您在数据库中有很长的电子邮件列表，那么最好从数据库中修剪网站而不是在 Web 服务器上查询应该是

```
SELECT SUBSTRING_INDEX(email_field, '@', -1) FROM email_table; 
```

因为**-1**右侧字符串将在第一次出现**@后返回**

希望有帮助

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-31T16:15:24.393

只是有点不同：`preg_match`域名捕获：

```
<?php
  $address = array("test@example.com","test@example.co.uk","test2@ez.example.com");
  foreach ($address as $email) {
   preg_match(";\b.+@([a-z0-9-]+(\.[a-z0-9-]+)*\.([a-z]{2,}))\b;", $email,$matches);
   echo $matches[1];
   echo "\n";
  }
?> 
```

输出：

```
example.com
example.co.uk
ez.example.com 
```

# api - Get likes/dislikes from a youtube video with Zend Framework PHP

> ID：10837108
> 
> 赞同：1
> 
> 时间：2012-05-31T15:57:33.633
> 
> 标签：api, zend-framework, youtube

I'm unable to find any documentation where I can find a code example for receiving the likes and dislikes of a video. That's my current code:

```
$videoId = 'AyJl2NyQ0hI';
$videoEntry = $yt->getVideoEntry($videoId);

echo "Views: <strong>".$videoEntry->getVideoViewCount()."</strong><br />"; 
```

It works fine, but who to get the likes/dislikes? Thanks.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-31T17:19:17.340

Just look through the source for classes `Zend_Gdata_YouTube_VideoEntry` and `Zend_Gdata_YouTube_Extension_Statistics`:

```
$videoEntry->getStatistics()->getViewCount(); 
```

Edit: You edited your question and you are now looking for Likes/Dislikes

Step 1: Change the protocol version to v2

```
$yt = new Zend_Gdata_YouTube();
$yt->setMajorProtocolVersion(2); 
```

Step 2: The last stable release of the zend gdata youtube client is missing methods to access the likes and dislikes, but the data is returned. You can get at it by looking through the extension attributes of the Rating extension:

```
$videoId = 'AyJl2NyQ0hI';
$videoEntry = $yt->getVideoEntry($videoId);

foreach ($videoEntry->getExtensionElements() as $extension)
{
    if ($extension->rootElement == 'rating')
    {
        $attributes = $extension->getExtensionAttributes();
        var_dump($attributes);
    }
} 
```

Which should return:

```
array(2) {
  ["numDislikes"]=>
  array(3) {
    ["namespaceUri"]=>
    NULL
    ["name"]=>
    string(11) "numDislikes"
    ["value"]=>
    string(2) "57"
  }
  ["numLikes"]=>
  array(3) {
    ["namespaceUri"]=>
    NULL
    ["name"]=>
    string(8) "numLikes"
    ["value"]=>
    string(3) "657"
  }
} 
```

# python - 具有多个变量的循环

> ID：10837109
> 
> 赞同：0
> 
> 时间：2012-05-31T15:57:33.750
> 
> 标签：python, cgi

这可能是一个愚蠢的问题，但我就是不知道如何简化这段代码。

我有一个包含十一个文件上传按钮的网络表单。这些被标记为 p1-3、q1-5、x1-2 和 cb。

在处理上传的脚本中，我需要检查是否正在上传新文件，或者是否只有一个（或没有）被更改。

如果更改了，我会保存它并创建一个 ogg 以在音频标签中使用。

这是问题。如何干净地遍历变量名？现在我有十一个这样的街区，这让我畏缩。

我想简单地创建一个函数来处理之后的所有事情`if:raise`很容易，但我想做的只是传递一个函数我正在寻找的名称列表，让它分配一个变量，并照顾商业。

```
 try:
            x2 = form['x2']
            if not x2.filename: raise
            outfile = '%s/x2.wav' % savepath
            oggfile = '%s/x2.ogg' % oggdir
            open(outfile, 'wb').write(x2.file.read())
            command = 'oggenc %s -o %s' % (outfile, oggfile)
            output = subprocess.check_output(command, shell=True, stderr=subprocess.STDOUT)
    except:
            pass 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T16:02:39.047

尝试以下操作：

```
for x in ('p1', 'p2', 'p3', 'q1', 'q2', 'q3', 'q4', 'q5', 'x1', 'x2'):
    try:
        f = form[x]
        if not f.filename: raise
        outfile = '%s/%s.wav' % (savepath, x)
        oggfile = '%s/%s.ogg' % (oggdir, x)
        open(outfile, 'wb').write(f.file.read())
        command = 'oggenc %s -o %s' % (outfile, oggfile)
        output = subprocess.check_output(command, shell=True, stderr=subprocess.STDOUT)
    except:
        pass 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T16:05:55.307

```
fields = ('p1', 'p2', 'p3', 'q1', 'q2', 'q3', 'q4', 'q5', 'x1', 'x2', 'cb')
for name in fields:
    field = form[name]
    if not field.filename: 
        continue # skips to the next field

    outfile = '%s/%s.wav' % (savepath, name)
    oggfile = '%s/%s.ogg' % (oggdir, name)
    # and so on ... 
```

# php - 使用PHP解析xml中具有空值的变量

> ID：10837111
> 
> 赞同：0
> 
> 时间：2012-05-31T15:57:52.903
> 
> 标签：php, simplexml

我已经问了几个问题，这些问题很快得到了回答，并帮助我达到了这一点，但是我遇到了一个小问题。我认为最好创建一个新问题，而不是在这些问题中提出另一个问题。我正在尝试解析一个 xml 文件，该文件包含具有相同属性的每个 varValue（如下所示）的多个元素。当这些值存在时，我的脚本可以正常工作，但是如果它们被排除，我会收到警告。在下面的示例中，电子邮件和 send_transcript 都被排除在第二个会话之外。我的最终目标是将数据导入到 oracle 中，除了我上面提到的情况外，它工作正常。

下面是我正在使用的 xml 文件的示例。

```
<Report account="7869" start_time="2012-02-23T00:00:00+00:00" end_time="2012-02-23T15:27:59+00:00" user="twilson" more_sessions="false">
 <Session id="ID742247692" realTimeID="4306650378">
  <VarValues>
   <varValue id="ID2051978" source="PreChat" sourceName="null" time="2012-02-23T00:07:07+00:00" name="identifier">Andy</varValue> 
   <varValue id="ID2051979" source="Internal" sourceName="null" time="2012-02-23T01:09:42+00:00" name="DisconnectedBy">VisitorClosedWindow</varValue> 
   <varValue id="ID2055925" source="PostChat" sourceName="null" time="2012-02-23T01:09:53+00:00" name="send_transcript">yes</varValue> 
   <varValue id="ID2055926" source="Operator" sourceName="null" time="2012-02-23T01:13:17+00:00" name="email">address1@myexample.com</varValue> 
   <varValue id="ID2073144" source="PreChat" sourceName="null" time="2012-02-23T00:07:07+00:00" name="survey0373014">a group, team or business</varValue> 
   <varValue id="ID2074007" source="Operator" sourceName="null" time="2012-02-23T01:13:17+00:00" name="survey99630314">Pricing</varValue> 
   <varValue id="ID2075240" source="Operator" sourceName="null" time="2012-02-23T01:13:17+00:00" name="survey99630317">No</varValue> 
   <varValue id="ID2075243" source="Operator" sourceName="null" time="2012-02-23T01:13:17+00:00" name="survey99630320">Dont Know</varValue> 
   <varValue id="ID2083900" source="PostChat" sourceName="null" time="2012-02-23T01:09:53+00:00" name="survey99630223">none of the above</varValue> 
   <varValue id="ID2119346" source="Internal" sourceName="null" time="2012-02-23T00:06:20+00:00" name="LP_Visitor_Category">0</varValue> 
   <varValue id="ID2329945" source="PreChat" sourceName="null" time="2012-02-23T00:07:07+00:00" name="survey23360124">55379</varValue> 
  </VarValues>
 </Session>
 <Session id="ID742247695" realTimeID="4306650379">
  <VarValues>
   <varValue id="ID2051978" source="PreChat" sourceName="null" time="2012-02-23T00:04:37+00:00" name="identifier">Aram</varValue> 
   <varValue id="ID2051979" source="Internal" sourceName="null" time="2012-02-23T00:26:39+00:00" name="DisconnectedBy">RepStoppedChat</varValue> 
   <varValue id="ID2073144" source="PreChat" sourceName="null" time="2012-02-23T00:04:37+00:00" name="survey0373014">a group, team or business</varValue> 
   <varValue id="ID2074007" source="Operator" sourceName="null" time="2012-02-23T00:46:39+00:00" name="survey99630314">Turn Time</varValue> 
   <varValue id="ID2075240" source="Operator" sourceName="null" time="2012-02-23T00:46:39+00:00" name="survey99630317">No</varValue> 
   <varValue id="ID2075243" source="Operator" sourceName="null" time="2012-02-23T00:46:39+00:00" name="survey99630320">Likely</varValue> 
   <varValue id="ID2119346" source="Internal" sourceName="null" time="2012-02-23T00:04:23+00:00" name="LP_Visitor_Category">0</varValue> 
   <varValue id="ID2329945" source="PreChat" sourceName="null" time="2012-02-23T00:04:37+00:00" name="survey23360124">07452</varValue> 
  </VarValues>
 </Session>
</Report> 
```

这是我用来解析文件的代码。

```
 $xml_object = simplexml_load_file('C:/PHP/sessions.xml');

foreach($xml_object->Session as $session) {
    $sessionid = $session['realTimeID'];
    foreach($session->VarValues->varValue as $varValue) {
        if($varValue['name'] == 'email') {
            $email = (string) $varValue;
        }
    }
    foreach($session->VarValues->varValue as $varValue2) {
        if($varValue2['name'] == 'identifier') {
            $identifier= (string) $varValue2;
        }
    }
    foreach($session->VarValues->varValue as $varValue5) {
        if($varValue5['name'] == 'send_transcript') {
            $sendTranscript= (string) $varValue5;
        }
    }

$s = "$sessionid,'$email',$sendTransript'";

echo $s; 
```

当我执行脚本时，我收到一条警告，指出未定义变量：电子邮件。正如我上面提到的，我收到此消息是因为我们表单中的电子邮件字段是可选的并且通常被排除在外。

我想要的输出如下。

```
Sessionid|email|send_transcript
4306650378,address1@myexample.com,yes
4306650379,'','' 
```

有人知道我如何解释空值吗？如果我在代码的开头创建一个变量 $email = '' 那么它似乎忽略了错误但是它重复了以前的值而不是 null？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:03:40.793

只需在第二级 foreach 语句之前初始化变量：

```
foreach($xml_object->Session as $session) {
    $email = '';
    $identifier = '';
    $sendTranscript = '';
    $sessionid = $session['realTimeID'];
    ... 
```

那么一切都应该正常工作！

# linq-to-sql - 'System.Data.IsolationLevel' 和 'System.Transactions.IsolationLevel' 之间的 LINQ to SQL 模棱两可的 'IsolationLevel'

> ID：10837112
> 
> 赞同：0
> 
> 时间：2012-05-31T15:57:53.437
> 
> 标签：linq-to-sql

我有一个 SQL 语句，里面有一堆 NOLOCK。在做了一些研究之后，我发现了一种在 LINQ to SQL 中处理这个问题的方法。这是我的做法：

```
int year = 2011;
int quarter = 4;

DateTime timeframe = new DateTime(year, (quarter * 3), 01).AddMonths(1); 

using (var txn = new TransactionScope(
    TransactionScopeOption.Required, 
    new TransactionOptions
    {
        IsolationLevel = IsolationLevel.ReadUncommitted
    }))
{
    // Your LINQ to SQL query goes here
    var results =

        from wo in WORKORDERs

            join wot in WORKORDERTYPEs on wo.Wot_oi equals wot.Wotyoi

            join pri in PRIORITies on wo.Prio_oi equals pri.Priooi

            join s in SITEs on wo.BEparn_oi equals s.Siteoi

        where wo.Audt_created_dttm.Value.Year >= year - 3 && wo.Audt_created_dttm.Value.Year >= 2006    
            && wo.Audt_created_dttm < timeframe && (s.Id =="NM" || s.Id == "TH") && 
            (!wot.Id.Contains("stand") && wo.Ci_cnc_date != null && pri.Prioid != "1 - Routine") &&
            (pri.Prioid.Contains("1") || pri.Prioid.Contains("2") || pri.Prioid.Contains("3"))

        select new {PM = wo.Wosource, Site = s.Id, Priority = pri.Prioid, Worktype = wot.Id,
            WoNumber = wo.Id, Description = wo.Aenm, CreateDate = wo.Audt_created_dttm, 
            CloseDate = wo.Clsdt_date, Planning = 
                (pri.Prioid == "1 - Routine" || pri.Prioid == "6 - Planned Outage") ? "Planned" : "Unplanned"}; 
} 
```

问题是我收到此错误并且找不到任何信息。

```
'IsolationLevel' is an ambiguous reference between 'System.Data.IsolationLevel' and 'System.Transactions.IsolationLevel'

Cannot implicitly convert type 'System.Data.IsolationLevel' to 'System.Transactions.IsolationLevel'. An explicit conversion exists (are you missing a cast?) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T16:02:12.667

它看起来像这样的代码：

```
new TransactionOptions
{
    IsolationLevel = IsolationLevel.ReadUncommitted
} 
```

应该：

```
new TransactionOptions
{
    IsolationLevel = System.Transactions.IsolationLevel.ReadUncommitted
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T16:02:10.420

如果我猜的话，你对和都有一个`using`声明。问题是在这两种类型中都有一个名为 IsolationLevel 的类型，编译器不知道该使用哪一种。删除 System.Data 引用，或者执行`System.Data``System.Transactions`

```
new TransactionOptions
{
    IsolationLevel = System.Transactions.IsolationLevel.ReadUncommitted
} 
```

# c++ - Linux 中的 MFC CList 之类的功能？

> ID：10837120
> 
> 赞同：1
> 
> 时间：2012-05-31T15:58:26.210
> 
> 标签：c++, linux, clist

我已经阅读了一些关于 CList 的教程，这似乎比`std::list`C++ STL 的功能丰富得多。特别是引起我注意的是，我可以通过一个值搜索 CList 并且它会返回一个位置（假设所有值都是唯一的，在我的情况下总是如此）。我正在尝试使用提升智能指针列表。使用指针的值查询列表或快速更改位置值以跳转到元素对我来说非常方便。是否有任何专门的列表库可以让我这样做？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T15:59:35.217

就在这里。它在标准头文件[`<algorithm>`](http://en.cppreference.com/w/cpp/algorithm)中，即函数模板[`std::find`](http://en.cppreference.com/w/cpp/algorithm/find)中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T16:11:58.013

我不需要将 MFC 称为比 STL 更丰富的功能，但它肯定有利于成员方法和继承的设计，而不是自由函数和模板接口。

[您可以使用算法](http://www.cplusplus.com/reference/algorithm/)中的函数搜索元素，例如`std::find`,`std::find_if`等，这些函数通常也适用于 STL 容器`vector`。

对于您的具体情况，您可能想要执行以下操作：

```
#include <list>
#include <algorithm>

typedef std::list<int> IntList;
int nums[] = { 1,2,3,4,5,6,7,8,9 };
IntList numbers(nums, nums + sizeof(nums) / sizeof(int));
IntList::const_iterator found = std::find(numbers.begin(), numbers.end(), 7);
if (found != numbers.end())
    ;// then found is an iterator to the element containing the value 7
else
    ;// didn't find 
```

现在，就在 Linux 上获得类似 MFC 的行为而言，我推荐[Qt](http://qt.nokia.com/products/)。这是一个庞大的跨平台框架，有很多有用的东西。更好的是，它是开源和免费的，并带有自己的名为 QtCreator 的 IDE，它也不错。

# javascript - 导致错误的全局变量

> ID：10837125
> 
> 赞同：1
> 
> 时间：2012-05-31T15:58:48.587
> 
> 标签：javascript, internet-explorer-8

尝试在 IE8 中声明全局变量时，会引发以下错误：

```
SCRIPT438: Object doesn't support this property or method
Script.js, line 2 character 5 
```

这是一个精简版的代码，它会导致同样的错误。

```
$(document).ready(function () {
    GlobalVar = {};
} 
```

有谁知道为什么 IE8 及之前的版本会在简单地声明全局变量时导致错误？

谢谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:13:02.007

我只是添加一个听起来相似的问题。

确保该变量不是从另一个脚本设置的。然后，您将在先前初始化的变量和您的调用“GlobalVar = {}”之间发生冲突。

通过在它前面添加 var 来确保 GlobalVar 是 jQuery 就绪调用的本地变量。var GlobalVar = {};

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T16:19:44.287

隐式全局变量是一种不好的编码习惯。你应该做

```
window.GlobalVar 
```

反而。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T16:02:30.953

做：

```
var GlobalVar;

$(document).ready(function () {
    GlobalVar = {};
}); 
```

工作？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T16:10:29.683

**在 document.ready 上，全局变量被初始化为 10 。它可以在该脚本内的任何函数内全局访问..**

```
<script>

    var GlobalVar;

    $(document).ready(function () {
        GlobalVar = 10;
        temp();
    });

    function temp()
    {
      var a = GlobalVar;

      alert(a); //gives you that 10 

    }

    </script> 
```

# java - 用于 webdriver 的 Javascript

> ID：10837127
> 
> 赞同：0
> 
> 时间：2012-05-31T15:58:56.353
> 
> 标签：java, javascript, selenium, webdriver, selenium-webdriver

有没有关于编写 Webdriver 特定 JavaScript 的好的学习资料或链接？我浏览了（[http://seleniumhq.org/docs/03_webdriver.html](http://seleniumhq.org/docs/03_webdriver.html)），它给出了非常基本的想法，但对编写 JavaScript 帮助不大，这可以帮助我的 Webdriver 代码在浏览器中模拟各种类型的鼠标和键盘操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T16:03:22.243

Javascript in`WebDriver`可以做任何其他 Javascript 可以做的事情——所以如果你想了解更多，可以去任何 Javascript 资源。这里很好地描述了一些添加：[`JavaScriptExecutor.executeScript()`](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/JavascriptExecutor.html#executeScript%28java.lang.String,%20java.lang.Object...%29)

如果您对浏览器中的鼠标和键盘操作特别感兴趣，您可能会喜欢[Advanced User Interactions API](http://code.google.com/p/selenium/wiki/AdvancedUserInteractions)和[JavaDoc here](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/interactions/Actions.html)。

# android - 在 Android 的 TabHost 中隐藏选项卡

> ID：10837133
> 
> 赞同：3
> 
> 时间：2012-05-31T15:59:16.840
> 
> 标签：android, tabs, visibility

```
if( ......)
    {

        tabHost.getTabWidget().getChildAt(0).setVisibility(View.GONE);
                    //to hide the first tab in the TabHost

    } 
```

这段代码有什么问题吗？当我在 onCreate() 方法中添加这段代码时，应用程序崩溃了。知道吗？

我的日志猫：

```
05-31 22:03:38.471: E/AndroidRuntime(598): Caused by: java.lang.NullPointerException 05-31 22:03:38.471: E/AndroidRuntime(598): at swayam.dev.mushtouch.MushTouchActivity.setVisibilityControls(MushTouchActivity.j‌​ava:75) 05-31 22:03:38.471: E/AndroidRuntime(598): at swayam.dev.mushtouch.MushTouchActivity.onCreate(MushTouchActivity.java:220) 05-31 22:03:38.471: E/AndroidRuntime(598): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 05-31 22:03:38.471: E/AndroidRuntime(598): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611) 
```

也试过这段代码。仍然不断崩溃。

```
getTabHost().getTabWidget().removeViewAt(0); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-31T16:47:25.610

我的回答会太长，所以我把它放在一个答案中。

到目前为止你有

```
TabHost  tabHost = (TabHost)findViewById(android.R.id.tabhost);
tabHost.getTabWidget().getChildAt(0).setVisibility(View.GONE); 
```

您收到 NullPointerException，这意味着无论何时使用该行代码，您都在尝试更改屏幕上不存在的东西，或者可能是屏幕外的东西。

检查 R 的导入语句。

在您的包裹声明下方，您应该具有以下内容：

```
import your.package.R; 
```

并不是

```
import android.R; 
```

修复后，当您引用选项卡主机时，请使用以下内容：

```
TabHost  tabHost = (TabHost)findViewById(R.id.tabhost); 
```

如果这不起作用，请确保 tabhost 实际上在屏幕上，并且您不在单独的活动中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T16:22:25.200

如果你想隐藏 Tab 你应该使用：

**getChildTabViewAt()**而不是**getChildAt()**

所以你的代码应该是这样的：

```
 tabHost.getTabWidget().getChildTabViewAt(0).setVisibility(View.GONE); 
```

# websphere - IBM Management Center for WebSphere Commerce：用户帐户已禁用

> ID：10837137
> 
> 赞同：0
> 
> 时间：2012-05-31T15:59:31.443
> 
> 标签：websphere, websphere-commerce

我尝试使用我的帐户访问管理中心，但这显示错误消息“用户帐户已禁用。请联系您的站点管理员了解您的访问权限”。如何启用用户帐户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T11:20:43.367

参考文档：

[http://publib.boulder.ibm.com/infocenter/wchelp/v5r6/index.jsp?topic=/com.ibm.commerce.esupport.doc/html/Runtime/swg21178298.html](http://publib.boulder.ibm.com/infocenter/wchelp/v5r6/index.jsp?topic=/com.ibm.commerce.esupport.doc/html/Runtime/swg21178298.html)

也应该适用于版本 6 和 7。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T19:23:40.810

答案是使用 WebSphere Commmerce Org Admin。好像你已经得到了答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-24T02:19:38.943

启用用户帐户的 SQL -

update userreg set status = 1 where logonid='(login id)';

# svn - svn - 远程文件列表与本地文件列表不匹配

> ID：10837142
> 
> 赞同：0
> 
> 时间：2012-05-31T15:59:40.430
> 
> 标签：svn, tortoisesvn

我的 subversion 中的文件似乎没有出现在我的远程 svn 存储库中，但根据 Tortoise，它们在我的目录结构下显示为版本控制。此外，Tortoise 允许我提交这些文件并成功接受我所做的任何更改，但我尝试在新计算机上签出整个项目，并且根据存储库浏览器缺少许多文件。

有没有人遇到过这个问题？有一些简单的解决方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T16:37:29.370

将文件夹复制到您的 svn checkout 目录总是一个问题。做这个，

*   再次检查您的项目。
*   使用 meld 或 araxis merge 来比较你的 checkin/workinprogress 文件夹。
*   现在在 checkin 目录中手动创建任何文件夹，并将所有文件从 workinprogress 复制到 checkin 文件夹。

不

*   从 workinprogress 复制文件夹
*   将任何 .svn 文件夹从 workinprogress 复制到签入。

现在，做一个

*   svn状态
*   添加/删除所有？/！文件/文件夹。或者只运行 sudo svn --force add。
*   最后 sudo svn commit。

svn ROCKS 上的命令行。乌龟很好，但命令行胜过一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T16:02:30.923

是的...我知道痛苦。也许您从另一个文件夹/项目中复制了一些文件夹...属于另一个存储库。SVN 不会抱怨 - 它只是让您使用 2 个独立的存储库。发生在我身上几次。检查您的所有文件是否属于同一个存储库。

# html - 为什么我的 ' 字符在 POST 到我的服务器时变成了 \'？

> ID：10837148
> 
> 赞同：0
> 
> 时间：2012-05-31T16:00:08.907
> 
> 标签：html, forms, post, encoding

我的 HTML 不是很厉害，每次都会遇到一些编码问题。

在这里，我有一个类似的表格：

```
<head>
    <META http-equiv="Content-Type" Content="text/html; charset=ISO-8859-1">
[...]
<form method="post" action="thispage.php" >
    <input name="title" type="text" id="title" size=75 value="" />          
    <textarea name="description" rows="10" cols="80" id="description"></textarea>
    <input type="submit" value="GO"  />
</form> 
```

当我写一些引号时，例如：`'`，它会以`\'`
So `o'clock`will be`o\'clock`

你有想法吗？

编辑 ：

奇怪的是，根据萤火虫的说法，POST 变量中的引号没有转义！

![查看](../Images/e10e5a00e9ea4645e58976693b0ab8e0.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T16:02:13.510

您似乎使用的 PHP 版本不是最新版本，并且打开了[魔术引号。](http://php.net/manual/en/security.magicquotes.php)

# google-chrome-extension - 鼠标悬停时获取标签

> ID：10837149
> 
> 赞同：1
> 
> 时间：2012-05-31T16:00:08.997
> 
> 标签：google-chrome-extension

我想知道是否有任何方法可以使用javascript获取鼠标所在的标签ID？
我想从页面中获取 html 并显示在单独的 div 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:48:16.680

目前这是不可能的。没有公开可用的事件类型，这将使​​其成为可能： [http ://code.google.com/chrome/extensions/tabs.html#global-events](http://code.google.com/chrome/extensions/tabs.html#global-events)

# php - 如何在 PHP 上使用“$box”进行 Mongo 查询

> ID：10837156
> 
> 赞同：-1
> 
> 时间：2012-05-31T16:00:37.873
> 
> 标签：php, mongodb

我试图在 Mongo 上进行此查询：

```
{"localization": {"$within" : {"$box" : [ [-3.725502, 40.447323],[-3.659039095404374 , 40.4189327481702]]}}} 
```

我翻译成一个数组，它看起来像这样：

```
array("localization" => array('$within' => array('$box' => array('[[-3.725502, 40.447323]', '[-3.659039095404374 , 40.4189327481702]]')))) 
```

而且我没有得到任何结果，如果我在服务器上进行先前的 Mongo 查询，我会得到 200 个结果，但在 PHP 中没有。结果是：

```
object(MongoCursor)#5 (0) { } 
```

有什么想法可能是错的吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:09:00.403

看起来您正在 $box 传递 PHP 中的字符串数组，而不是数组数组。

尝试：

`'$box' => array(array(-3.725502, 40.447323), array(-3.659039095404374 , 40.4189327481702'))`

# c# - WPF UserControl MVVM如何关闭对话框

> ID：10837170
> 
> 赞同：1
> 
> 时间：2012-05-31T16:01:34.600
> 
> 标签：c#, wpf, mvvm

我是 MVVM 的新手，遇到了如何在其自己的 ViewModel c#-file 中打开对话框并随后关闭对话框的问题。寻找可能的解决方案，没有找到合适的。我的解决方案如下所示，但我不确定这是否有一些缺点。定义了一个 UserControl 并使用以下命令打开它：

```
void ChangeDataPathExecute()
{
    Window window = new Window
    {
        Content = new ChangeDataRootPathUserControl(),
    };

    window.ShowDialog(); 
} 
```

在 UserControl 文件的 ViewModel 中实现：

```
private void DetermineMyWindow()
{
    foreach (Window window in App.Current.Windows)
    {
        ChangeDataRootPathUserControl uc = window.Content as ChangeDataRootPathUserControl;
        if (uc == null)
            continue;

        myWindow = window;
    } 
```

最后在 Close 方法中：

```
void OkChangeDataRootPathExecute()
{
    DetermineMyWindow();

    myWindow.Close();
} 
```

你怎么看待这件事？破解还是好的解决方案？感谢反馈节拍

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T16:22:58.357

在`ViewModel`MVVM 场景中，不必了解`View`. 在您的示例中，它似乎必须对视图了解很多。

许多人使用许多不同的模式从 ViewModel 打开/关闭窗口。我更喜欢事件/回调：

```
class ViewModel {
    public event EventHandler ChangeDataRootPath;
}

class View : Window {
    public View() {
        InitializeComponent();

        var vm = new ViewModel();
        vm.ChangeDataRootPath += (s, e) => {
            Window window = new Window {
                Content = new ChangeDataRootPathUserControl {
                    DataContext = vm
                }
            };
            window.ShowDialog(); 
        };
        DataContext = vm;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T16:16:08.450

您可以通过从 UserControl 内部引用 this.Parent 来更轻松地访问窗口（只要它是第一个内容元素）。

对于您正在尝试做的事情，一种更正统的方法是为 Window 创建一个新的 XAML 文件，将 UserControl 的一个实例放在 XAML 中的 Window 内。

如果您希望您的 UserControl 能够关闭其父窗口，则向 UserControl 添加一个简单的 Close 事件。现在，在您的 Window XAML 中，您可以向 close 事件添加一个事件处理程序，并在 UserControl 引发事件时让 Window 调用 Close()。

```
// UserControl.cs
public event EventHandler Close;

void OkChangeDataRootPathExecute()
{
    if (Close != null)
        Close(this, EventArgs.Empty);
}

// Window.cs
void UserControl_Close(object sender, EventArgs e)
{
    Close();
} 
```

然后，如果要添加任何额外的选项或样式，可以将其添加到 XAML，例如 SizeToContent、WindowStartupLocation、BorderStyle 等，以控制对话框的外观。

然后当你想在代码中显示你的对话框时，你可以这样写：

```
void ChangeDataPathExecute()
{
    var window = new ChangeDataRootPathWindow();

    window.ShowDialog();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T06:33:07.233

在我个人的实现中，我不会让我的视图模型了解有关窗口、用户控件或任何其他可视元素的任何信息。但这需要定义一个完整的框架。有很多，只需搜索并使用最适合您的那个。

但是为了快速解决，如果您要从任何地方关闭的窗口是当前具有焦点的窗口，则可以使用此方法访问它：

```
public static Window GetCurrentFocusedWindow()
{
    Window window = null;

    Control currentControl = System.Windows.Input.Keyboard.FocusedElement as Control;

    if (currentControl != null)
        window = Window.GetWindow(currentControl);

    return window;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T06:19:49.543

您的视图模型应该只打开一个**DialogService**。看[这里](https://stackoverflow.com/questions/3801681/good-or-bad-practise-for-dialogs-in-wpf-with-mvvm)以获得一个起点。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-31T16:33:59.343

如果你要做 MVVM，[你会想要一个 MVVM 框架](http://www.lhotka.net/weblog/UsingTheMVVMPatternRequiresAFramework.aspx)。我推荐[Caliburn.Micro](http://caliburnmicro.codeplex.com/)，看看它的[窗口管理器](http://caliburnmicro.codeplex.com/wikipage?title=The%20Window%20Manager&referringTitle=Documentation)。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-11-13T22:25:53.810

这个怎么样？

```
Window parentWindow = (Window)this.Parent;
parentWindow.Close(); 
```

# database - 根据暂存或生产切换 Azure ConnectionString

> ID：10837171
> 
> 赞同：1
> 
> 时间：2012-05-31T16:01:48.393
> 
> 标签：database, azure, connection-string

有没有办法根据生产或登台环境使用不同的 ConnectionString？如何 ？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T16:35:24.117

我强烈建议您首先不要将“暂存地段”视为传统暂存环境。相反，它应该被视为在部署上线之前“冒烟测试”部署的临时区域。如果您需要持久的登台环境，请改用不同的托管服务来满足该需求。

执行此操作后，维护多个云服务配置文件变得相当简单，每个环境一个。

# html - DOCTYPE声明IE问题

> ID：10837178
> 
> 赞同：1
> 
> 时间：2012-05-31T16:02:14.547
> 
> 标签：html, css, internet-explorer

在我的网页上，我正在申请`css zoom`标记`<body>`以正确适应屏幕上的网页内容。我的问题是当我使用

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
```

zoom 在 IE 中不起作用，但在 Firefox 和 Chrome 中起作用。当我刚刚放

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" >
<HTML> 
```

它在 Internet Explorer 中不起作用。知道什么是跨浏览器兼容的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:14:31.910

IE、opera 和 chrome 支持缩放，但对于 Firefox，您可以使用

```
div.zoom {
      zoom: 2; /* all browsers */
     -moz-transform: scale(2);  /* Firefox */
} 
```

CSS3 与文档类型无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T16:04:27.220

`<!DOCTYPE html>`是您对 HTML5 所需要的一切，而这正是您应该与 CSS3 一起使用的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T16:19:55.440

您似乎想在 chrome 中使用“几乎符合标准的模式”，在 Internet Explorer 中使用“标准符合模式”。

利用

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

将 IE 在 chrome 中置于“几乎符合标准的模式”，然后

```
<meta http-equiv="X-UA-Compatible" content="IE=«whatever version of IE you're developing for, for example 8»" /> 
```

强制 IE 进入标准遵从模式。

# mysql - 在 MySQL 中，如何拆分字符串值并将每个标记插入表中？

> ID：10837181
> 
> 赞同：0
> 
> 时间：2012-05-31T16:02:38.770
> 
> 标签：mysql, stored-procedures, split, record, stored-functions

我有一个名为“关键字”的表，其中包含以下字段：

ID [主键] | 关键字 [varchar(255)]

每条记录的关键字字段都包含一个字符串值，例如“this, is, only, a test”

我不知道如何创建一个存储过程来用“，”作为分隔符分割这个字符串，并将每个标记作为新记录插入新表中。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:10:52.717

在这里，困难是用分隔符切割你的字符串。您需要像这样声明一个 FUNCTION：http: [//fdegrelle.over-blog.com/article-1342263.html](http://fdegrelle.over-blog.com/article-1342263.html) 之后，您只需将值存储在表中，这很容易。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T03:28:39.670

1.  使用 instr() 查找 delimiter(,) 的第一次出现。

2.  Substring() 将输入字符串从第零个字符拆分到第一个出现的字符现在您已经分离了第一个字符串。将分隔的字符串插入表中。

3.  对输入字符串使用 replace() 以删除第一个值。

4.  重复步骤 1 到 3，直到您的输入字符串为空。希望这有效..祝你好运..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T16:10:04.887

MySQL 没有任何类型的 SPLIT() 或 EXPLODE() 字符串函数。简而言之，您需要手动遍历字符串以搜索逗号并在到达分隔符（逗号）或字符串末尾时插入值。或者，您可以尝试使用 INSTR() 进行花哨的旋转，这样，您的里程可能会有所不同。

我建议阅读MySQL的[String Functions 参考页面](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html)底部的一些评论。在页面上搜索 (Ctrl-F) 进行拆分，您会看到一些有用的想法。

# objective-c - 直接初始化委托产生ARC警告和EXC_BAD_ACCESS崩溃

> ID：10837183
> 
> 赞同：6
> 
> 时间：2012-05-31T16:02:40.030
> 
> 标签：objective-c, delegates, automatic-ref-counting

我在自己的类中创建了一个实现[UITextFieldDelegate](http://www.google.it/url?sa=t&rct=j&q=uitextfielddelegate&source=web&cd=1&ved=0CFsQFjAA&url=http://developer.apple.com/library/ios/documentation/uikit/reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html&ei=_JLHT8mMEcGfOrHV7OQO&usg=AFQjCNH88tX0MZc8H0Hbtwrr_re8pyDA-w&sig2=kQWlf60cyZDcVCMAlQVzDg)`NumericTextFieldDelegate`的委托对象，然后我以这种方式在我的控制器中初始化了委托：

```
textFieldName.delegate = [NumericTextFieldDelegate new]; 
```

我从编译器那里得到了这个警告：

```
Assigning retained object to unsafe property; object will be released after assignment 
```

这意味着该对象将在分配后被释放，事实上，当我运行应用程序并关注 UITextField 时，我得到一个`EXC_BAD_ACCESS`并且应用程序崩溃......

我发现使其工作的唯一方法是使用工厂方法创建一个静态变量，该工厂方法调度以下实例`NumericTextFieldDelegate`：

```
@interface NumericTextFieldDelegate : NSObject <UITextFieldDelegate>

+(NumericTextFieldDelegate *) getDelegate;

@end

@implementation NumericTextFieldDelegate

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {

    NSString *resultingString = [textField.text stringByReplacingCharactersInRange: range withString: string];

    // This allows backspace
    if ([resultingString length] == 0) {
        return true;
    }

    NSInteger holder;
    NSScanner *scan = [NSScanner scannerWithString: resultingString];

    return [scan scanInteger: &holder] && [scan isAtEnd];
}

+(NumericTextFieldDelegate *) getDelegate {
    static NumericTextFieldDelegate *del;
    @synchronized(del) {
        if(del == nil)
            del = [NumericTextFieldDelegate new];
    }
    return del;
}

@end 
```

然后当我以这种方式分配代表时：

```
textFieldName.delegate = [NumericTextFieldDelegate getDelegate]; 
```

一切正常，但我的问题是：

**为什么我不能简单地分配一个匿名的新类实例？** 为什么赋值后对象会自动释放？

**为什么我需要这个解决方法？**

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T01:54:14.960

我同意@Inaziger 的分析。UITextField 实例的委托是一种弱引用。它不持有分配给它的委托。根据 ARC，delegate 将是 nil ，因为没有人持有它的引用。因此，将由分配者保留它，以便调用委托。您编写之前的解决方法是这样的：

```
- (void) somemethod {
...
id<UITextFieldDelegate> tempDelegate = [NumericTextFieldDelegate new];
textFieldName.delegate = tempDelegate;
...
} 
```

textFieldName 的实例获得了对以某种方式在本地创建的委托的引用。ARC 将在方法调用后将 temDelegate 设置为 nil。但是，文本字段的委托仍然持有指向分配给的内存的指针，该指针随后由 ARC 释放。这就是为什么您遇到糟糕的内存访问崩溃的原因。

通过将 del 作为静态变量保留在您的类中，只要您没有将其设置为 nil，它将在您的应用程序运行周期中保留。我认为最好将静态 del 保留为类级别成员并提供一个 setter，以便您记得释放它。就像是：

```
// in interface definition
+(NumericTextFieldDelegate *) getDelegate;
+(void) setDelegate:(id)newDel;

// in implementation
static NumericTextFieldDelegate* del;

+(NumericTextFieldDelegate *) getDelegate {
  @synchronized(del) {
    if(del == nil)
      del = [NumericTextFieldDelegate new];
    }
  return del;
}

+(void) setDelegate:(id)newDel {
   del = newDel;
} 
```

顺便说一句，您还可以保持以前的解决方法代码不变。您可以将委托保留在文本字段的类中作为类成员变量或属性。

```
@interface myTextFieldContainer () {
@proerpty (strong) id<UITextFieldDelegate> delHolder;
...
}

@implementaion myTextFieldContainer {
@sythysis delHolder = _delHodler;
...
self.delHolder = [NumericTextFieldDelegate new];
textFieldName.delegate = self.delHolder; 
```

The benefit of above strategy is that you would not worry about release the delegate when your view controller is gone.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T16:21:52.943

问题是，Cocoa (Touch) 中的代表通常是未保留的。这可以防止保留循环。但这也意味着其他东西需要保留对该对象的引用，以便在您完成它时释放它——否则该对象就会被泄露。这就是委托关系在此模式中的工作方式。

您的`getDelegate`方法有效的原因是对委托的引用存储在静态变量`del`中，这使 ARC 无法释放对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T20:44:19.650

> 为什么我不能简单地分配一个匿名的新类实例？为什么赋值后对象会自动释放？
> 
> 为什么我需要这个解决方法？

您可以分配该类的新实例。但是它会立即被释放，因为它没有强引用 - 只有一个弱引用（不安全未保留）由 textfield.delegate 来防止已经提到的保留循环。这正是警告告诉你的。但是，我不会使用这种类似单例的模式。只需为您的委托对象添加一个强属性并将该属性值分配为您的文本字段的委托。

```
@property (nonatomic,strong) MyDelegateObject delegateObject;

Self.delegateObject = [MyDelegateObject new];
Textfield.delegate = self.delegateObject; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T18:48:04.093

好吧，“为什么”是因为该`UITextField`属性`delegate`被声明为：

```
@property(nonatomic, assign) id<UITextFieldDelegate> delegate 
```

（参见[类参考](http://developer.apple.com/library/ios/ipad/#DOCUMENTATION/UIKit/Reference/UITextField_Class/Reference/UITextField.html)。）

声明的属性`assign`意味着“setter 使用简单赋值”，因此不实现任何内存管理功能，例如保留（或未分配时释放）。（参见[Objective-C 编程语言，声明的属性](https://developer.apple.com/library/mac/ipad/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html)）

# apache - apache的高级重写规则

> ID：10837184
> 
> 赞同：0
> 
> 时间：2012-05-31T16:02:43.873
> 
> 标签：apache, mod-rewrite, websvn

我通过互联网搜索，但没有找到匹配的问题或帖子。我花了几个晚上试图让它发挥作用，但没有成功。如果有人可以提供帮助并提供指导以使此高级 mod_rewrite 正常工作，我将不胜感激。（您可能想直接跳到下面**的问题**。）

**环境：** 我已经在 Apache 2.x 上安装了 websvn 最新版本，它具有 MultiView 功能，它可以在没有任何重写规则的帮助下生成以下格式的 URL：

```
https://svnweb.hostname.com/wsvn/Group.Repname/path/to/files/and/folders/in/svn/ 
```

这里的“组”不过是 SVNParentPath，而“Repname”是实际的 SVN 存储库。请注意“。” 在 Group 和 Repname 之间。

我配置了 SVN 1.7 + Apache 2，下面是 URL 格式：

```
https://svn.hostname.com/Group/Repname/path/to/files/and/folders/in/svn/ 
```

**该问题与此 SVN URL 无关。**为了限制和管理用户对 SVN 存储库的访问，我为每个 Repname 配置了 LDAP 身份验证和基于 LDAP 组的访问。此配置是在我创建的脚本的帮助下自动完成的。

**要求/问题：** 我想在 WEBSVN 使用 MultiView apache 功能构建其 url 的 URL 中将**/wsn/Group.Repname/**转换为**/Group/Repname/ 。**

如果您仔细观察，“Group”和“Repname”不是 WEBSVN URL 中的单独文件夹，并且与存储库的 SVN URL 路径不匹配。我想对 svnweb.hostname.com 的每个 Repname 使用相同的 svn.hostname.com LDAP 身份验证和基于 LDAP 组的权限。要使其正常工作，svnweb URL 必须与 SVN 服务器 URL 匹配，例如

这： [https://svnweb.hostname.com/](https://svnweb.hostname.com/) **Group/Repname** /path/to/files/and/folders/in/svn/

而不是 [https://svnweb.hostname.com/wsvn/Group.Repname](https://svnweb.hostname.com/) **/** path/to/files/and/folders/in/svn/

**可能的解决方案和限制：** 要实现/解决此问题，我不想修改 Web 应用程序或创建新的 apache LDAP 身份验证和支持路径中的“Group.Repname”的 LDAP 组配置。想象一下超过 500 多个 SVN 存储库和维护开销。我认为 mod_rewrite 可以帮助我为我实现重写的 URL 并保护 WEBSVN，确保人们可以访问他们应该访问的内容。

我尝试了几个重写选项，但我无法将**/wsn/Group.Repname/**转换为**/Group/Repname/**。如果您知道如何使用重写来实现这一点，请告诉我。感谢您的阅读，感谢您的意见和建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:11:50.057

尝试以下操作：

```
RewriteEngine On
RewriteBase /
RewriteRule ^wsvn/([^./]+)\.(.+)$ https://svnweb.hostname.com/$1/$2 [L,NC] 
```

`[^./]+`意思是“多于一个符号，但不是点或斜线”，`.+`意思是“多于一个符号”。如果重定向应该是永久性的，您可能需要在`R=301`之后添加。`NC`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T21:18:53.177

试试这个规则？

```
RewriteEngine On
RewriteBase /
RewriteCond %{ENV:REDIRECT_STATUS} !200
RewriteRule ^wsvn(\.php)?/(.*?)\.(.*) $2/$3 [L,NC,QSA] 
```

您是否也想更改域？从你的问题中我不明白这一点。

** 编辑 **：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/wsvn
RewriteRule ^(.*)/(.*)$ wsvn.php/$1.$2 [L] 
```

# php - OOPHP：SQL Server 和 MySQL 的类

> ID：10837186
> 
> 赞同：0
> 
> 时间：2012-05-31T16:02:54.087
> 
> 标签：php, mysql, sql-server, oop, web-applications

我正在开发一个从客户端 SQL Server 数据库查询数据的 Web 应用程序。访问所述数据库的凭据存储在我们服务器上的 MySQL 数据库中。单独查询它们真的不是那么难，（两个字母与函数的区别），但我最近有我的“哦，天哪，真是一团糟”的时刻，我正试图让事情变得更整洁一些。

OOP 来了。所以现在我已经在 MySQL 和 SQL Server 的单独文件中获得了基本的 CRUD 类，但我觉得完全没有必要为这种相似的（两个字母，来吧......）功能提供两个不同的包含。

我试图将两个类添加到一个文件中，但没有用。

那么这里的最佳实践是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T16:12:57.123

一个好的方法是使用[PDO](http://php.net/pdo)，它为多个引擎（MySQL、MSSQL、PostgreSQL 等）抽象数据库连接。它也已经是 OOP 了。

如果您的代码是旧代码并且您无法更改为 PDO，则有几种选择。您可以使用反射抽象两个 CRUD 类之间的大部分公共代码：

```
abstract class AbstractLegacyConnection
{
    protected $connectFunction = '';
    protected $queryFunction = '';

    public function connect($host, $user, $pass) 
    {
        return call_user_func($this->connectFunction, $host, $user, $pass);
    }

    public function query($sql) 
    {
        return call_user_func($this->queryFunction, $sql);
    }
}

class MySQLLegacyConnection extends AbstractLegacyConnection
{
    protected $connectFunction = 'mysql_connect';
    protected $queryFunction = 'mysql_query';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T16:05:10.903

使用带有相关驱动程序的[PDO 对象](http://php.net/manual/en/book.pdo.php)。有 MySQL 和 MSSQL 的驱动程序。使用工厂生成正确的 PDO 对象，然后使用该对象实际写入数据库。

例如（伪代码）：

```
$PDO = PDOFactory::getPDO( $database_type, $username, $password );
$PDO->write($data); 
```

您的 CRUD 不关心它正在使用哪个 PDO，只关心它与 PDO 接口有关。如果再次更改数据库，则只需更新数据库类型。此外，对于单元测试，您可以传入一个模拟 PDO。

要记住的一件事 - 并非所有数据库都提供相同的功能。某些东西可以在 MSSQL 中工作，而在 MySQL 中不起作用。在这种情况下，您可以将 CRUD 语句包装在异常中。

另外，请考虑查看诸如 Doctrine 和 Propel 之类的 ORM。即使您选择不实施它们，它们也会教给您很多东西。

# xtk - 覆盖体积的颜色

> ID：10837189
> 
> 赞同：1
> 
> 时间：2012-05-31T16:03:01.580
> 
> 标签：xtk

我正在尝试覆盖几个 NRRD（卷）文件以在卷顶部显示 ROI 等。有没有办法将体积的颜色设置为红色？有什么建议可以解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:12:56.140

XTK 同时支持 1 个卷和 1 个标签映射。

您可能希望在本课中执行以下操作：http: [//jsfiddle.net/gh/get/library/pure/xtk/lessons/tree/master/11/#run](http://jsfiddle.net/gh/get/library/pure/xtk/lessons/tree/master/11/#run)

彩色覆盖是标签映射，它使用颜色表将 .nrrd 文件的标量值映射到颜色。此示例使用 3D Slicer 颜色表，但它也适用于 Freesurfer 颜色表。

如果您有多个包含每个标签的 .nrrd 文件，您首先必须添加它们以将它们作为一个标签映射加载。然后，您可以编写自己的颜色表或使用标准颜色表为标签图着色。

颜色表具有以下格式：

```
0 background 0 0 0 0
1 tissue 128 174 128 255
2 bone 241 214 145 255
3 skin 177 122 101 255
4 connective_tissue 111 184 210 255 
```

所以`scalar value`, `some name`, `r`, `g`, `b`_`a`

# asp.net-mvc-3 - ASP.NET MVC3 TextBoxFor、EditorFor、ValidateFor 不呈现

> ID：10837190
> 
> 赞同：1
> 
> 时间：2012-05-31T16:03:05.147
> 
> 标签：asp.net-mvc-3, rendering, editorfor

我一直在为这个问题绞尽脑汁。我有一个围绕 ASP.NET 中的网站构建的遗留应用程序。我添加了适当的东西以允许向其中添加 MVC，并且它大部分都可以正常工作。

我有一个剃刀视图，其中有一个表单标记（封装在 Html.BeginForm 中）。我还为字符串创建了一个自定义模板编辑器。我遇到的问题是，当我想渲染一个普通的文本框、editorfor 或 ValidateFor 时，ValidationSummary 不会生成任何标记。我的自定义模板已执行，但任何正常的 HtmlHelper 似乎都不起作用。

这是我的观点（这是部分观点）

```
@model L1.Web.UI.Infrastructure.SectionWrapper<L1.Web.ViewModel.PersonInfoViewModel>

<div class="section">
   @using (Html.BeginForm())
   {
      <div class="pad_10" data-bind="with: sections['PersonInfo']">
         <div data-bind="with: data">
            @Html.ValidationSummary(true)
            <table class="full-table form-horizontal">
               <tbody>
                  <tr>
                     <td width="30%" class="dotted-border-right">
<!-- This kinda work -->
                    @Html.EditorFor(m => m.SectionData.Data.LastName,       
                       "modelTemplateString",
                        new {SectionName = "PersonInfo"})
!-- This doesn't render anything -->
                    @Html.EditorFor(m => m.SectionData.Data.LastName) 
```

在我的自定义模板中，我正在渲染纯 HTML，它可以工作。当我在我的自定义模板中执行 EditorFor 时，它会部分起作用。我没有看到任何正在生成的验证属性。我的自定义模板中的 ValidateFor 或 ValidationMessageFor 也不会生成任何标记。这是我的自定义模板中的代码（位于 /Shared/EditorTemplates 中）

```
@inherits WebViewPage<string>

<div class="control-group">
<label class="control-label" for="@String.Format("input{0}", ViewData.ModelMetadata.PropertyName)" data-bind="localized: {resourceId: '@ViewData.ModelMetadata.PropertyName', resourceStore: $root}"></label>
<div class="controls">
    <input id="@String.Format("input{0}", ViewData.ModelMetadata.PropertyName)" class="input-small" type="text" data-bind="visible: $root.sectionDefinitions['@ViewData["SectionName"]'].isEditing, value: @ViewData.ModelMetadata.PropertyName"/>
    <a class="edit-link" data-bind="visible: $root.sectionDefinitions['@ViewData["SectionName"]'].isInReadMode">
        <strong data-bind="text: @ViewData.ModelMetadata.PropertyName"></strong>
    </a>
    @{ Html.ValidateFor(m => m); }
</div> 
```

我还尝试从项目中完全删除我的自定义模板，认为它总是被使用，即使没有在 EditorFor 中指定自定义模板名称。这并没有什么不同。看起来我的项目部分无法呈现任何 HtmlHelpers。

我还检查了创建表单标记后 ViewContext.FormContext 不为空，并且该部分看起来很好。

任何帮助/建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:07:45.060

/Shared/EditorTemplates 文件夹中编辑器模板的完整文件名是什么？

@Html.EditorFor(m => m.SectionData.Data.LastName) 可能会调用 String.cshtml 而你的另一个应该调用 modelTemplateString.cshtml

您还需要确保 @model 字符串标签位于编辑器模板的顶部

从我可以看到您的模板并没有真正使用您发送给它的模型数据，它只是使用 ViewData 对象。

# python - 在 Linux AMI 上安装 MySQLdb Python 模块时出现问题

> ID：10837192
> 
> 赞同：2
> 
> 时间：2012-05-31T16:03:10.333
> 
> 标签：python, mysql-python, amazon-ami

我正在尝试使用 mysql（5.1 或更高版本）、python（2.6 或更高版本）和 mysqldb python 模块在 ec2 中设置 linux ami。有 2 个选项，从头开始或解决我已经开始的问题。

如果从头开始最简单，你能建议一个 ami 和相关的命令来进行这个配置吗？

这是我尝试过的。我从这个 ami 开始：LAMP_Rails_Python_plus_goodies (ami-5db76434)。这给了我mysql和python。我有 mysqldb 模块，但我相信它需要 python-devel 包。我尝试使用以下内容安装它：

百胜安装python-devel

这导致：

```
Transaction Check Error:
  file /etc/rpm/macros.python from install of python-1:2.6-2.22.amzn1.noarch conflicts with file from package system-release-2011.09-2.3.noarch 
```

这就是我卡住的地方。我不知道如何解决这个冲突。构建 mysqldb 模块（python setup.py build）会导致：

```
In file included from _mysql.c:29:
pymemcompat.h:10:20: error: Python.h: No such file or directory
_mysql.c:30:26: error: structmember.h: No such file or directory
_mysql.c:36:23: error: my_config.h: No such file or directory
_mysql.c:38:19: error: mysql.h: No such file or directory
_mysql.c:39:26: error: mysqld_error.h: No such file or directory
_mysql.c:40:20: error: errmsg.h: No such file or directory
_mysql.c:62: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token 
```

谷歌搜索让我相信我需要安装 python-devel。也许我应该使用不同的 ami，但我觉得此时我正在玩猜谜游戏。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T04:46:03.167

在运行`yum update -y`之前运行`yum install python-devel`它应该正确安装（没有事务检查错误）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T19:47:26.503

您可以通过下载 RPM 并使用 rpm -ivH --replacefiles .rpm 安装它来安装它。然而，这意味着您的 python rpm 并不是真正为您的发行版制作的（或者没有真正经过很好的测试）。

换句话说，东西可能会坏掉。

# backbone.js - 在backbone.js 中创建向导进程

> ID：10837199
> 
> 赞同：14
> 
> 时间：2012-05-31T16:03:41.823
> 
> 标签：backbone.js

我是backbone.js 的新手，在解决我设计“向导”类型流程（又名多步骤表单）时遇到的问题时遇到了一些麻烦。该向导应该能够根据用户对问题的响应处理不同的屏幕分支逻辑，随着用户的进行存储对每个屏幕的响应，最后能够将所有表单响应（每一步）序列化为一个大对象（可能是 JSON）。向导问题每年都会发生变化，我需要能够同时支持多个类似的向导。

就创建屏幕（使用主干形式）而言，我已经掌握了基础知识，但我现在已经到了要保存用户输入的地步，我想不出最好的方法来做到这一点。我见过的大多数示例都有一种特定类型的对象（例如`Todo`），您只需创建它们的集合（例如`TodoList`），但是由于屏幕类型不同，我有一个混杂的 Backbone.Model 定义，所以它没有看起来并不那么简单。关于我应该如何实例化我的向导及其包含的屏幕并记录用户响应的任何指示？

如果它有帮助，我可以用我的视图代码发布一个 jsfiddle，到目前为止只能向前和向后屏幕（没有用户输入响应记录或屏幕分支）。

```
var Wizard = Backbone.Model.extend({

    initialize: function(options) {
        this.set({
            pathTaken: [0]
        });
    },

    currentScreenID: function() {
        return _(this.get('pathTaken')).last();
    },

    currentScreen: function() {
        return this.screens[this.currentScreenID()];
    },

    isFirstScreen: function(screen) {
        return (_(this.screens).first() == this.currentScreen());
    },

    // This function should be overridden by wizards that have
    // multiple possible "finish" screens (depending on path taken)
    isLastScreen: function(screen) {
        return (_(this.screens).last() == this.currentScreen());
    },

    // This function should be overridden by non-trivial wizards
    // for complex path handling logic
    nextScreen: function() {
        // return immediately if on final screen
        if (this.isLastScreen(this.currentScreen())) return;
        // otherwise return the next screen in the list
        this.get('pathTaken').push(this.currentScreenID() + 1);
        return this.currentScreen();
    },

    prevScreen: function() {
        // return immediately if on first screen
        if (this.isFirstScreen(this.currentScreen())) return;
        // otherwise return the previous screen in the list
        prevScreenID = _(_(this.get('pathTaken')).pop()).last();
        return this.screens[prevScreenID];
    }
});

var ChocolateWizard = Wizard.extend({
    nextScreen: function() {
        //TODO: Implement this (calls super for now)
        //      Should go from screen 0 to 1 OR 2, depending on user response
        return Wizard.prototype.nextScreen.call(this);
    },
    screens: [
        // 0
        Backbone.Model.extend({
            title : "Chocolate quiz",
            schema: {
                name: 'Text',
                likesChocolate:  {
                    title: 'Do you like chocolate?',
                    type: 'Radio',
                    options: ['Yes', 'No']
                }
            }
        }),
        // 1
        Backbone.Model.extend({
            title : "I'm glad you like chocolate!",
            schema: {
                chocolateTypePreference:  {
                    title: 'Which type do you prefer?',
                    type: 'Radio',
                    options: [ 'Milk chocolate', 'Dark chocolate' ]
                }
            }
        }),
        //2
        Backbone.Model.extend({
            title : "So you don't like chocolate.",
            schema: {
                otherSweet:  {
                    title: 'What type of sweet do you prefer then?',
                    type: 'Text'
                }
            }
        })
    ]
});

wizard = new ChocolateWizard();

// I'd like to do something like wizard.screens.fetch here to get
// any saved responses, but wizard.screens is an array of model
// *definitions*, and I need to be working with *instances* in
// order to fetch 
```

编辑：根据要求，我希望看到已保存的向导的 JSON 返回值看起来像这样（作为最终目标）：

```
wizardResponse = {
    userID: 1,
    wizardType: "Chocolate",
    screenResponses: [
      { likesChocolate: "No"},
      {},
      { otherSweet: "Vanilla ice cream" }
    ]
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-31T17:07:14.380

您需要做的最重要的事情是将工作流与视图本身分开。也就是说，您应该有一个对象来协调视图之间的工作流，保存输入到视图中的数据，并使用视图的结果（通过事件或其他方式）来确定去向下一个。

我已经在博客中对此进行了更详细的介绍，这里有一个非常简单的向导式界面示例：

[http://lostechies.com/derickbailey/2012/05/10/modeling-explicit-workflow-with-code-in-javascript-and-backbone-apps/](http://lostechies.com/derickbailey/2012/05/10/modeling-explicit-workflow-with-code-in-javascript-and-backbone-apps/)

和这里：

[http://lostechies.com/derickbailey/2012/05/15/workflow-in-backbone-apps-triggering-view-events-from-dom-events/](http://lostechies.com/derickbailey/2012/05/15/workflow-in-backbone-apps-triggering-view-events-from-dom-events/)

这是第一篇文章中的基本代码，它显示了工作流对象以及它如何协调视图：

```
 orgChart = {

  addNewEmployee: function(){
    var that = this;

    var employeeDetail = this.getEmployeeDetail();
    employeeDetail.on("complete", function(employee){

      var managerSelector = that.selectManager(employee);
      managerSelector.on("save", function(employee){
        employee.save();
      });

    });
  },

  getEmployeeDetail: function(){
    var form = new EmployeeDetailForm();
    form.render();
    $("#wizard").html(form.el);
    return form;
  },

  selectManager: function(employee){
    var form = new SelectManagerForm({
      model: employee
    });
    form.render();
    $("#wizard").html(form.el);
    return form;
  }
}

// implementation details for EmployeeDetailForm go here

// implementation details for SelectManagerForm go here

// implementation details for Employee model go here 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-01T16:07:21.977

我将 Derick 的答案标记为已接受，因为它比我所拥有的更干净，但这不是我可以在我的情况下使用的解决方案，因为我有 50 多个屏幕要处理，我无法闯入漂亮的模型 - 我已经得到了他们的内容，只需复制它们。

这是我想出的处理屏幕切换逻辑的 hacky 模型代码。我敢肯定，随着我继续努力，我最终会更多地重构它。

```
var Wizard = Backbone.Model.extend({

    initialize: function(options) {
        this.set({
            pathTaken: [0],
            // instantiate the screen definitions as screenResponses
            screenResponses: _(this.screens).map(function(s){ return new s; })
        });
    },

    currentScreenID: function() {
        return _(this.get('pathTaken')).last();
    },

    currentScreen: function() {
        return this.screens[this.currentScreenID()];
    },

    isFirstScreen: function(screen) {
        screen = screen || this.currentScreen();
        return (_(this.screens).first() === screen);
    },

    // This function should be overridden by wizards that have
    // multiple possible "finish" screens (depending on path taken)
    isLastScreen: function(screen) {
        screen = screen || this.currentScreen();
        return (_(this.screens).last() === screen);
    },

    // This function should be overridden by non-trivial wizards
    // for complex path handling logic
    nextScreenID: function(currentScreenID, currentScreen) {
        // default behavior is to return the next screen ID in the list
        return currentScreenID + 1;
    },

    nextScreen: function() {
        // return immediately if on final screen
        if (this.isLastScreen()) return;
        // otherwise get next screen id from nextScreenID function
        nsid = this.nextScreenID(this.currentScreenID(), this.currentScreen());
        if (nsid) {
            this.get('pathTaken').push(nsid);
            return nsid;
        }
    },

    prevScreen: function() {
        // return immediately if on first screen
        if (this.isFirstScreen()) return;
        // otherwise return the previous screen in the list
        prevScreenID = _(_(this.get('pathTaken')).pop()).last();
        return this.screens[prevScreenID];
    }

});

var ChocolateWizard = Wizard.extend({

    initialize: function(options) {
        Wizard.prototype.initialize.call(this); // super()

        this.set({
            wizardType: 'Chocolate',
        });
    },

    nextScreenID: function(csid, cs) {
        var resp = this.screenResponses(csid);
        this.nextScreenController.setState(csid.toString()); // have to manually change states
        if (resp.nextScreenID)
            // if screen defines a custom nextScreenID method, use it
            return resp.nextScreenID(resp, this.get('screenResponses'));
        else
            // otherwise return next screen number by default
            return csid + 1;
    },

    // convenience function
    screenResponses: function(i) {
        return this.get('screenResponses')[i];
    },

    screens: [
        // 0
        Backbone.Model.extend({
            title : "Chocolate quiz",
            schema: {
                name: 'Text',
                likesChocolate:  {
                    title: 'Do you like chocolate?',
                    type: 'Radio',
                    options: ['Yes', 'No']
                }
            },
            nextScreenID: function(thisResp, allResp) {
                if (thisResp.get('likesChocolate') === 'Yes')
                    return 1;
                else
                    return 2;
            }
        }),
        // 1
        Backbone.Model.extend({
            title : "I'm glad you like chocolate!",
            schema: {
                chocolateTypePreference:  {
                    title: 'Which type do you prefer?',
                    type: 'Radio',
                    options: [ 'Milk chocolate', 'Dark chocolate' ]
                }
            },
            nextScreenID: function(thisResp, allResp) {
                return 3; // skip screen 2
            }
        }),
        // 2
        Backbone.Model.extend({
            title : "So you don't like chocolate.",
            schema: {
                otherSweet:  {
                    title: 'What type of sweet do you prefer then?',
                    type: 'Text'
                }
            }
        }),
        // 3
        Backbone.Model.extend({
            title : "Finished - thanks for taking the quiz!"
        }
    ]
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-21T07:34:53.513

在[CloudMunch](https://github.com/cloudmunch/marionette-wizard)，我们有类似的需求并构建了[Marionette-Wizard](https://github.com/cloudmunch/marionette-wizard)。

wrt 显式 Q，在此向导中，所有内容都存储在 localStorage 中，并且可以作为类似于您指定格式的对象进行访问。

# objective-c - 在ARC下，[[X alloc] initWith..]和[X xWith...]有什么区别吗？

> ID：10837201
> 
> 赞同：2
> 
> 时间：2012-05-31T16:03:45.993
> 
> 标签：objective-c, automatic-ref-counting, alloc

以 NSMutableArray 为例：

```
NSMutableArray* a1 = [[NSMutableArray alloc] initWithCapacity:10];
NSMutableArray* a2 = [NSMutableArray arrayWithCapacity:10]; 
```

在手动引用计数下，第二行返回了一个自动释放的对象。现在启用 ARC，第二个返回 __autoreleasing 对象而另一个不返回吗？有什么区别，如果有的话？

如果我正在初始化的类是一个已转换为 ARC 的自定义类，其中的转换从初始化程序中删除了自动释放消息：

```
MyClass b1 = [[MyClass alloc] initWithNumber:1];
MyClass b2 = [MyClass myClassWithNumber:1];

// MyClass implementation of myClassWithNumber
+(id) myClassWithNumber:(int)num
{
    return [[self alloc] initWithNumber:num];
} 
```

b1 和 b2 之间有什么区别，与 a1 和 a2 的创建方式有什么不同吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:20:38.850

学习Cocos2D，

ARC 不会更改调用约定。如果您的方法名称将在 MRR 下返回一个自动释放的对象，那么它将在 ARC 下返回一个。ARC 是对每种方法的局部优化。这就是为什么您可以在同一个项目中混合和匹配 MRR 和 ARC 代码。（甚至类别也可以有不同的内存管理方法。）

在您的第二个代码示例中，如果需要，ARC 会向返回的值添加自动释放。为什么是最后一件事？因为 ARC 部分是为了最大限度地减少内存占用。因此，它想要管理在方法中创建的每个对象的生命周期。在方法中创建的唯一会自动释放的对象是返回值。

一般来说，ARC 应该对您的代码具有最小的侵入性。基本上，您将内存管理的责任移交给编译器。（无论如何它总是应该存在的地方。） ARC 表面的问题是将免费桥接 CF 对象带入 Objective-C 代码。大多数情况下，使用 __bridged 存储修饰符处理免费桥接项目。Apple 的 ARC 文档非常好。Clang 文档是精确的。

不要出汗ARC。与现代编译器的情况一样，它可能会比您更好地管理内存。

安德鲁

# javascript - 如何为 NodeJS 中的事件扩展对象文字对象？

> ID：10837203
> 
> 赞同：9
> 
> 时间：2012-05-31T16:04:00.787
> 
> 标签：javascript, events, node.js, object-literal, eventemitter

我正在尝试让我的**Node.js**对象强制转换**事件**。现在，如果我制作“静态”对象并实例化它们，这不是问题，但是当我的对象没有静态爷爷时，我该怎么做，比如使用**对象文字**符号创建对象时？

我习惯于编写 ExtJS 语法，所以我更喜欢对象文字中的所有内容。

```
// var EventEmitter = require('events').EventEmitter; // How where when?

myObject = {
  myFunction: function() {
    console.log('foo');
  },
  urFunction: function() {
    console.log('bar');
  }
}; 
```

这是一个对象。它没有构造函数，因为不需要更多实例。

现在我如何允许`myObject`发出事件？

我已经尝试并尝试调整代码，但**如果不将我的对象重写为具有如下构造函数的表单，我将无法使其工作**：

```
var EventEmitter = require('events').EventEmitter;
var util = require('util');

function myClass() {
  EventEmitter.call(this);

  myFunction: function() {
    this.emit('foo');
  },
  urFunction: function() {
    this.emit('bar');
  }
};

myClass.prototype = Object.create(EventEmitter.prototype);
// or // util.inherits(myClass, EventEmitter);
var myObject = new myClass; // Shouldn't be necessary for my single-instance case 
```

**或者将我的函数/原型添加到这样构造的东西中**：

```
var EventEmitter = require('events').EventEmitter;
var util = require('util');

var myObject = new EventEmitter();
// or // var myObject = Object.create(new EventEmitter); // Dunno difference
myObject.myFunction = function() {
    this.emit('foo');
  },
myObject.urFunction = function() {
    this.emit('bar');
  }
};

util.inherits(myObject, EventEmitter); 
```

如何允许`myObject`发出事件，同时保持对象文字表示法？有很多令人困惑的方法来做到这一点，但在那些*类似*JSON 的标记对象中却没有一种。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-01T01:30:03.697

为什么不使用组合而不是继承？

```
var myObject = {
  myFunction: function() {
    console.log('foo');
  },
  urFunction: function() {
    console.log('bar');
  },
  emitter: new EventEmitter()
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-01T01:21:49.787

不幸的是，您想要的对象文字语法是不可能的。这是因为

```
var obj = {}; 
```

相当于

```
var obj = Object.create(Object.prototype); 
```

因为它`obj`的原型在创建时是固定的`Object.prototype`，以后不能更改。

由于您只想要一个实例，我认为创建一个实例并为其分配属性*确实*有意义：`EventEmitter`

```
var EventEmitter = require('events').EventEmitter;
var obj = new EventEmitter();

obj.doStuff = function() {
  this.emit('stuff');
}; 
```

你不需要`util.inherits`这里，因为你只有一个实例，所以没有设置链。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-31T16:27:13.823

这是一个完全疯狂的猜测，因为我只为浏览器编写了 JavaScript。但是，您不能在创建对象文字*后*`EventEmitter`直接调用您的对象吗？

 *```
myObject = {
    myFunction: function() {
        console.log('foo');
    },
    urFunction: function() {
        console.log('bar');
    }
};
EventEmitter.call(myObject); 
```*

# c# - NHibernate 的二级缓存和架构更改的错误

> ID：10837206
> 
> 赞同：3
> 
> 时间：2012-05-31T16:04:17.697
> 
> 标签：c#, .net, nhibernate, memcached

我有一个使用 NHibernate 映射并缓存在二级缓存 (memcached) 中的类“公司”。我们的团队最近为此类添加了一个新的 bool 属性，该属性将存储在数据库中。

在我们的开发环境中一切正常，但是一旦我们部署到我们的暂存环境（共享实时数据库），我们就开始收到以下错误：

```
System.IndexOutOfRangeException: Index was outside the bounds of the array.
at (Object , Object[] , SetterCallback )
at NHibernate.Tuple.Entity.PocoEntityTuplizer.SetPropertyValuesWithOptimizer(Object entity, Object[] values)
at NHibernate.Tuple.Entity.PocoEntityTuplizer.SetPropertyValues(Object entity, Object[] values)
at NHibernate.Persister.Entity.AbstractEntityPersister.SetPropertyValues(Object obj, Object[] values, EntityMode entityMode)
at NHibernate.Cache.Entry.CacheEntry.Assemble(Object[] values, Object result, Object id, IEntityPersister persister, IInterceptor interceptor, ISessionImplementor session)
at NHibernate.Cache.Entry.CacheEntry.Assemble(Object instance, Object id, IEntityPersister persister, IInterceptor interceptor, ISessionImplementor session)
at NHibernate.Event.Default.DefaultLoadEventListener.AssembleCacheEntry(CacheEntry entry, Object id, IEntityPersister persister, LoadEvent event)
at NHibernate.Event.Default.DefaultLoadEventListener.LoadFromSecondLevelCache(LoadEvent event, IEntityPersister persister, LoadType options)
at NHibernate.Event.Default.DefaultLoadEventListener.DoLoad(LoadEvent event, IEntityPersister persister, EntityKey keyToLoad, LoadType options) 
```

我最好的猜测是 NHibernate 不能将旧的缓存条目（没有新属性）反序列化到新的 Company 对象中。我相信我确认了这一点，因为我在我们的暂存环境中禁用了二级缓存并且 ISE 停止了。

所以我想我的问题是，如果 NHibernate 不能反序列化缓存条目而不是冒泡异常，我们如何强制它进入数据库？有没有其他人遇到过这个问题？

我认为现在，我们将不得不在关闭二级缓存的情况下进行部署，重新启动 memcached 服务器，然后重新启用二级缓存。然而，这种解决方案并不理想。如果有人有更好的建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T14:30:10.907

作为对任何感兴趣的人的更新，我遵循了我的帖子中概述的步骤：

> [...] 我们将不得不在关闭二级缓存的情况下进行部署，重新启动 memcached 服务器，然后重新启用二级缓存。

...一切正常。它比我们的正常部署要复杂一些，但我们没有任何错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T17:58:10.633

做所有不必要的事情——关闭二级缓存并重新启动等等。我认为您真正想要的只是使缓存中的项目无效以使 nhibernate 进入数据库。

如果找到与 memcached 相关的 gem - 您可以通过从 telnet 接口刷新整个缓存来使其无效。

```
telnet SomeServerInCluster 11211
flush_all 
```

并且您已经通过重新启动所有 memcached 机器完成了您想要完成的任务。

[http://www.lzone.de/articles/memcached.htm](http://www.lzone.de/articles/memcached.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-19T21:16:15.500

你们在使用缓存区域前缀吗？我已经实现的是，每当我们有核心定义更改时，我们都会写入不同的缓存区域前缀。这类似于刷新缓存区域。

好处是您不会遇到新定义与缓存的旧定义不匹配的问题。

不利的一面是，这会降低性能，因为现在需要重建缓存。

为了降低性能，您始终可以包括（作为部署过程的一部分）一个缓存预热例程，该例程在您看到应用程序的任何大量流量之前启动缓存。

希望这可以帮助。

# javascript - 正则表达式精确数字且只有正数

> ID：10837207
> 
> 赞同：0
> 
> 时间：2012-05-31T16:04:25.637
> 
> 标签：javascript, regex

我有一个小问题要获得一个正则表达式，它满足匹配列表中的确切数字并且数字为正的事实，一开始我正在使用以下内容：

```
<!DOCTYPE html>
<html>
<body>

<script type="text/javascript">
    var patt1=/\b(100|101)/g;

    var str="-101";
    document.write(str.match(patt1));
    document.write("<br/>");
    var str="101";
    document.write(str.match(patt1));

</script>

</body>
</html> 
```

但我意识到，在这种情况下，它将返回 101 和 -101 作为有效值。然后我尝试了

```
var var patt1=/[^-]\b(100|101)/g; 
```

但结果是`null`两种情况，然后

```
var patt1=/(^-)\b(100|101)/g; 
```

但结果`null`却`101`相反`-101 null`。
我想要 101 而不是 -101 关于如何做到这一点的任何想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T16:06:08.003

你**可以**用这个`regex`

```
var patt1 = /^(100|101)$/; 
```

它仅排除`100`或`101`作为有效输入。

但是对于这个简单的测试，我会使用：

```
if (str === "100" || str === "101")
    // Do something. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T16:08:37.293

这将匹配一个没有任何内容的字符串中的数字，或者`-`它前面的字符：

```
var patt1 = /(^|[^-\d])(100|101)\b/;
var str1 = "Does this string contain 100 somewhere?"
var str2 = "Does this string contain -100 somewhere?"

console.log(str1.match(patt1)); // Finds a match
console.log(str2.match(patt1)); // Doesn't 
```

# ruby-on-rails - Rails 2.3.14 为会话设置 expire_after 被忽略

> ID：10837210
> 
> 赞同：2
> 
> 时间：2012-05-31T16:04:29.007
> 
> 标签：ruby-on-rails, session, cookies, nginx, passenger

我的 environment.rb 中有下一个配置：

```
config.action_controller.session_store = :cookie_store
config.action_controller.session = {
:expire_after   => 14.days,
:domain         => DOMAIN,
:session_key    => '_session',
:secret         => 'some_string'
} 
```

将 session_store 设置为**active_record_store**或**mem_cache_store**没有帮助。我也试过从控制器设置cookie（所有已建立的过期选项）：

```
cookies[:test] = { :value => 'test' , :expires => 3600.to_i.from_now.utc } 
```

在这两种方式中，所有会话和 cookie 在关闭浏览器窗口后都会被删除 - 它们仅用于浏览器会话。我已经尝试了几乎所有在互联网上创建的变体 - 没有运气（

我的配置是：Ubuntu 10.04 LTS、rails 2.3.14、ruby Enterprise Edition 1.8.7、Phusion Passenger 版本 3.0.11 和 Phusion Passenger 编译的 Nginx。

我有一个选项是 Nginx 不允许设置一些标头，但也没有找到任何解决方案。

任何帮助表示赞赏！谢谢

UPD。我试图将会话的所有配置放入 config/initializers/session_store.rb - 没有任何改变。我有一种感觉，这不是铁路问题。可能是phusion + nginx错误？我什至不知道如何检查问题出在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:18:38.683

把它放在 config/initializers/session_store.rb

```
ActionController::Base.session = {
  :expire_after   => 14.days,
  :domain         => DOMAIN,
  :session_key    => '_session',
  :secret         => 'some_string'
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T16:31:30.357

尝试这个：

```
config.action_controller.session_store = :cookie_store
ActionController::Base.session_options[:expire_after] = 14.days 
```

对于 Rails 3

```
Rails.application.config.session_store :cookie_store, :key => "whatever", :expire_after => 14.days 
```

# spring - 日期对象的依赖注入

> ID：10837215
> 
> 赞同：0
> 
> 时间：2012-05-31T16:04:40.610
> 
> 标签：spring, jakarta-ee

我正在尝试 DI 一个 Date 对象

这是xml文件的代码

```
<bean id="date" class="java.util.Date"/>
<bean id="obj"   class="com.Person.Implementor" autowire="byName">
    <property name="username"><value>Abc</value></property>
    <property name="password"><value>password</value></property>
</bean> 
```

这是课程：

```
package com.Person;
import java.util.Date;
import org.springframework.beans.factory.annotation.Autowired;
public class Implementor {

String username;
String password;

Date date;

public Date getDate() {
    return date;
}

@Autowired
public void setDate(Date date) {
    this.date = date;
}

@Override
public String toString() {
    return "Implementor [username=" + username + ", password=" + password
            + ", date=" + date + "]";
}

public String getUsername() {
    return username;
}
public void setUsername(String username) {
    this.username = username;
}
public String getPassword() {
    return password;
}
public void setPassword(String password) {
    this.password = password;
}

} 
```

但它似乎不起作用，日期参考在打印时似乎有 NULL 值，它适用于自定义创建的类，很难

更新：得到 Spring 支持表单的回复：http: [//forum.springsource.org/showthread.php?127017-Dependancy-Injection- for-Date-Object&p=414519#post414519](http://forum.springsource.org/showthread.php?127017-Dependancy-Injection-for-Date-Object&p=414519#post414519)

“这是由 Spring 设计的。Spring 不会为“简单”属性（例如原语、字符串和日期）进行自动装配。但我认为您没有充分的理由使用 Date 类型自动装配 bean。“

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T17:43:36.750

更新：得到 Spring 支持表单的回复：http: [//forum.springsource.org/showthread.php?127017-Dependancy-Injection- for-Date-Object&p=414519#post414519](http://forum.springsource.org/showthread.php?127017-Dependancy-Injection-for-Date-Object&p=414519#post414519)

“这是由 Spring 设计的。Spring 不会为“简单”属性（例如原语、字符串和日期）进行自动装配。但我认为您没有充分的理由使用 Date 类型自动装配 bean。“

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T17:14:57.527

您的 spring 配置文件还有更多内容吗？因为您需要`<context:annotation-config />`激活执行自动装配的后处理器。

在 XML 中指定两个依赖项然后对第三个使用自动装配似乎很奇怪。在这种情况下，执行以下操作会更加一致：

```
<bean id="obj"   class="com.Person.Implementor" autowire="byName">
    <property name="username"><value>Abc</value></property>
    <property name="password"><value>password</value></property>
    <property name="date"><ref bean = "date"/></property>
</bean> 
```

# asp.net - Asp.net 在 url 末尾添加字符串，可能与会话相关

> ID：10837216
> 
> 赞同：0
> 
> 时间：2012-05-31T16:04:53.247
> 
> 标签：asp.net, url

当我单击菜单上的其中一个链接时，它会转到页面 url，例如：

[http://www.url.com/my-page.aspx](http://www.url.com/my-page.aspx)

但就在它到达那里之后，它会在末尾添加一个字符串，它看起来像：

[http://www.url.com/my-page.aspx#.T8eVgMWxmHM](http://www.url.com/my-page.aspx#.T8eVgMWxmHM)

或者

[http://www.url.com/my-page.aspx#.T8eVuNXSoR8](http://www.url.com/my-page.aspx#.T8eVuNXSoR8)

我的猜测是它与会话有关，关于如何摆脱它的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:34:26.557

url 上的这个符号`#`用于使浏览器在 html 文档中显示和页面顶部带有此代码的链接。

例如，如果您放置在页面内

```
<a name="tips">Useful Tips Section</a> 
```

并在网址上创建一个链接

```
urlpage.aspx#tips 
```

然后浏览器将具有“有用提示部分”行的页面置于顶部。所以没有视图状态。后面的代码也无法读取 # 之后的内容。

# symfony - 如何在 Symfony2 中将 @session 服务注入到自定义 EntityManager

> ID：10837225
> 
> 赞同：5
> 
> 时间：2012-05-31T16:05:19.133
> 
> 标签：symfony

在我的配置文件中，我定义了自定义实体管理器：

```
parameters:
    doctrine.orm.entity_manager:
        class: Strict\UserBundle\Entity\Manager\MyEntityManager 
```

是否可以将@session 服务（我需要访问 getLocale() 方法）注入/添加到此实体管理器中？我试过这个：

```
parameters:
    doctrine.orm.entity_manager:
        class: Strict\UserBundle\Entity\Manager\MyEntityManager
        arguments: 
            session: "@session" 
```

但它抛出了这个异常：

```
InvalidArgumentException: You cannot dump a container with parameters that contain references to other services (reference to service "session" found in "/doctrine.orm.entity_manager/arguments/session"). 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-31T16:28:18.013

参数不允许服务作为参数，您是否尝试过做同样的事情但使用服务：

```
service:
   my.entity.manager:
      class: Strict\UserBundle\Entity\Manager\MyEntityManager
      arguments: 
        session: "@session" 
```

# facebook - 打开图形操作的自定义属性 - 类型数组

> ID：10837226
> 
> 赞同：0
> 
> 时间：2012-05-31T16:05:19.553
> 
> 标签：facebook, facebook-opengraph

发布 OG 操作时，我遇到了正确传递参数的问题。该操作具有数组类型的自定义属性“配置文件”。我想将 2 个元素传递给这个参数。如何为此生成链接？

我尝试了这些变体：

FB.api("/me/APP_NAMESPACE:ACTION?OG_OBJECT=LINK_TO_OG_OBJECT&profile[]=1&profile[]=2",....)

FB.api("/me/APP_NAMESPACE:ACTION?OG_OBJECT=LINK_TO_OG_OBJECT&profile[0]=1&profile[1]=2",....)

它们不起作用 - FB 返回错误。

请帮忙

* * *

我试图将数组作为 JSON 和转义 JSON 传递。

```
var q = new Array();
q.push(*VALUE1*);
q.push(*VALUE2*);

q = $.toJSON(q); 
```

试过这个： '...profile[]='+q+'...' ， '...profile='+q+'...' 和这个： '...profile[]='+escape(q )+'...', '...profile='+escape(q)+'...'

并尝试将 q 作为 JSON 中的对象传递（转义）。

不工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:41:27.520

还没有尝试过，我会假设在大多数情况下使用 Graph API 你应该将数组数据作为 JSON 传递......？

# c++ - 从 Winlogon 桌面切换到用户桌面

> ID：10837229
> 
> 赞同：1
> 
> 时间：2012-05-31T16:05:33.703
> 
> 标签：c++, desktop, winlogon

我有一个在 Windows 7 的 Winlogon 桌面上运行的应用程序。我需要通过单击应用程序按钮切换到用户桌面。我们可以通过按 ctrl+shift+esc 手动切换到用户桌面。但是热键被另一个应用程序阻止了。有没有其他的切换方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:38:07.800

通常，系统会在创建线程时将桌面与线程相关联。您可以使用此线程更改其桌面。因此，通过跟踪此线程，您可以在桌面之间来回切换。

例如，您可以使用[GetThreadDesktop](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683232%28v=VS.85%29.aspx)、[SwitchDesktop](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686347%28v=vs.85%29.aspx)、[SetThreadDesktop](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686250%28v=vs.85%29.aspx) `API`来获取用户桌面的句柄。也许您可以使用其他[类似的 API](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682024%28v=vs.85%29.aspx)来完成您的任务。

# java - 如何使用 Java 执行 SSH 命令行？

> ID：10837236
> 
> 赞同：0
> 
> 时间：2012-05-31T16:05:46.243
> 
> 标签：java, ssh, exec

我试过了

```
Runtime.getRuntime().exec("ssh guest@guest password");
Runtime.getRuntime().exec("do something at guest@guest"); 
```

但这会提示我输入密码。我想自动化 ssh 登录并做一些事情，比如在远程客户端创建一个文件。

最好的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:07:16.640

自动登录的最佳方法是设置`ssh`密钥。请参阅[HOWTO](http://paulkeck.com/ssh/)。

至于实际`ssh`交互，与其执行外部命令，不如使用合适的库。有关一些指示，请参阅[Java 的 SSH 库。](https://stackoverflow.com/questions/995944/ssh-library-for-java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T16:09:56.557

你可以考虑这个库

[http://www.jcraft.com/jsch/index.html](http://www.jcraft.com/jsch/index.html)

或者 sshj

[https://github.com/shikhar/sshj/](https://github.com/shikhar/sshj/)

在这里你会发现一个类似的问题： [Send ssh command from Java code](https://stackoverflow.com/questions/4723508/send-ssh-command-from-java-code)

# javascript - 带有 Google 前置广告的 HTML5 视频播放器

> ID：10837237
> 
> 赞同：1
> 
> 时间：2012-05-31T16:05:47.057
> 
> 标签：javascript, html, html5-video

我一直在开发一个包含前贴片视频的自定义 HTML5 视频播放器。我现在正在实施 Google IMA SDK 并遇到了一些问题。

集成文档在这里： [https ://developers.google.com/interactive-media-ads/docs/sdks/googlehtml5_ads](https://developers.google.com/interactive-media-ads/docs/sdks/googlehtml5_ads)

我不明白的是实际调用 requestAds 和 onAdsLoaded 函数的原因。看起来它应该是直截了当的，但我必须遗漏一些东西。

您可以在这里查看源代码：http: [//jsfiddle.net/cncpts/SZ895/1/](http://jsfiddle.net/cncpts/SZ895/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T16:33:23.243

我能够弄清楚，实际上很简单。我刚刚从 requestAd 函数中删除了事件侦听器和 adrequest。这是最终的脚本。

```
<script src="http://www.google.com/uds?file=ima&v=1&nodependencyload=true"></script>
<script>

var adsManager;
var adsLoader;
var clickTrackingOverlay = document.getElementById('clickTrackingOverlay');
var videoElement = document.getElementById('myVideoElement');   
var adsLoader = new google.ima.AdsLoader();  

  // Add event listeners
adsLoader.addEventListener(
    google.ima.AdsLoadedEvent.Type.ADS_LOADED,
    onAdsLoaded,
    false);
adsLoader.addEventListener(
    google.ima.AdErrorEvent.Type.AD_ERROR,
    onAdError,
    false);

   // Create request object
   var adsRequest = {
      adTagUrl: "http://ad.doubleclick.net/pfadx/AngelaSite;kw=html5linearnonlinear;sz=300x300;ord=5036130;dcmt=text/xml",
      adType: "video"
    };

  // Make request
  adsLoader.requestAds(adsRequest);

  function onAdsLoaded(adsLoadedEvent) {
    // Get the ads manager
    adsManager = adsLoadedEvent.getAdsManager();
    adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR, onAdError);

    // Listen and respond to events which require you to pause/resume content
    adsManager.addEventListener(
        google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,
        onPauseRequested);
    adsManager.addEventListener(
        google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,
        onResumeRequested);

    // Set a visual element on which clicks should be tracked for video ads
    adsManager.setClickTrackingElement(clickTrackingOverlay);
    try {
      // Call play to start showing the ad.
      adsManager.play(videoElement);
    } catch (adError) {
      // An error may be thrown if there was a problem with the VAST response.
    }
  }

  function onAdError(adErrorEvent) {
    // Handle the error logging.
    console.log(adErrorEvent.getError());
  }

  function onPauseRequested() {
    videoElement.pause();
    // Setup UI for showing ads (e.g. display ad timer countdown,
    // disable seeking, etc.)
    // setupUIForAd();
  }

  function onResumeRequested() {
    // Setup UI back for showing content.
    // setupUIForContent();
    videoElement.play();
  }

</script> 
```

# haskell - ghci 中的命令 ls 或 dir

> ID：10837238
> 
> 赞同：13
> 
> 时间：2012-05-31T16:05:52.627
> 
> 标签：haskell, ghci

我是 Haskell 的新手。

我正在使用`ghci`. 我知道我可以使用命令在目录中移动`:cd <dir>`。但我找不到列出目录中文件的命令（比如 Unix`ls`或 Microsoft `dir`）。

是否可以在 GHCI 中做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-31T16:08:02.710

您可以调用 bash 命令`:!ls`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-31T16:11:48.817

`tab`您可以在某些命令后按下，例如`:load`列出工作目录中的文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-30T14:17:51.063

：显示路径

`type :?`在 GHCI 中寻求帮助；在底部，有一个`Commands for displaying information`标题

# java - AppEngine Java 上的全文。按日期排序在本地机器上工作但未部署（SDK 1.6.6）

> ID：10837243
> 
> 赞同：0
> 
> 时间：2012-05-31T16:06:02.237
> 
> 标签：java, google-app-engine, full-text-search

日期字段上 AppEngine Java 上的结果排序全文。如何？使用 SDK 1.6.6 部署。（所有这些都在本地机器上工作，但在部署时却不行）

**错误：g-(IndexImpl.java:277)com.google.appengine.api.search.IndexImpl$3.wrap> null**

1.  **使用这个没有**结果：按日期排序，默认值“2000-01-01”

    SortOptions sortOptions = SortOptions.newBuilder().addSortExpression(SortExpression.newBuilder().setExpression("date").setDirection(SortExpression.SortDirection.DESCENDING).setDefaultValue("2000-01-01")).set`Limit(limit ）。建造（）;

2.  **使用这个没有**结果：使用默认值“”按日期排序

    SortOptions sortOptions = SortOptions.newBuilder().addSortExpression(SortExpression.newBuilder().setExpression("date").setDirection(SortExpression.SortDirection.DESCENDING).setDefaultValue("")).setLimit(limit).build();

3.  **是**- 使用此结果：按主题排序

    SortOptions sortOptions = SortOptions.newBuilder().addSortExpression(SortExpression.newBuilder().setExpression("subject").setDirection(SortExpression.SortDirection.DESCENDING).setDefaultValue("")).setLimit(limit).build();

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:09:58.983

如果您`.setDefaultValueNumeric()`在日期字段排序表达式中使用，这应该可以工作，例如 `.setDefaultValueNumeric(0.0)`.

这是一种解决方法——除了字符串和数字字段的现有方法之外，还应该有一个“设置默认值”方法来对日期字段进行排序。已提交内部问题以将此添加到 API。

# java - mandelbrot 设置垂直显示

> ID：10837244
> 
> 赞同：-1
> 
> 时间：2012-05-31T16:06:04.787
> 
> 标签：java, graphic, fractals, mandelbrot

只是想知道如何垂直显示 mandelbrot 集，就像水平放置的 mandelbrot 集：

!['兄弟](../Images/bc8b6d48411d24620bc053269d68ccf7.png)

我想更像是从垂直轴查看较小的尺寸。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T16:12:10.197

使用与显示水平 Mandelbrot 集完全相同的方程，但`y`使用`x`和切换。`x``-y`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-31T16:13:15.763

伪代码：

```
if width > height:
    transpose_coordinates(pixels) 
```

或者像伊维拉说的

```
if width > height:
    rotate(img, 90) 
```

# vb.net - 如何从 onClick() 触发 VB 函数

> ID：10837246
> 
> 赞同：0
> 
> 时间：2012-05-31T16:06:09.833
> 
> 标签：vb.net

正在显示从数据库中检索到的数据网格中的可用文档列表。一旦我们点击一​​个特定的，它就会从服务器检索 PDF 文档并将其显示在浏览器中。

目前，如果我从数据网格的列表中单击一个文档，那么它将在新浏览器中显示 PDF 文件。这是代码：

```
ds.Tables(0).Rows(i).Item("DOC") = "<font color=blue onmouseover=""this.style.cursor='hand';"" title=""Click for PDF"" " + _
             "onclick=""location.replace('index.aspx?Name=" & link & "')"">" & docNum & "</font>" 
```

但是，现在一旦我单击文档，它应该通过将文档编号作为参数转发给该函数来触发一个新的 VB 函数。

我不知道，一旦我们从数据网格中单击特定文档，如何触发 VB 函数。它不是单击按钮的 onClick 事件，因为它显示了可用文档的列表。我在 VB.Net 1.1 中工作，因此它没有使用命令名称、行命令的选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:15:03.333

自从我完成 asp.net 1.1 以来已经有很长时间了，但是这个文档说你应该仍然有命令名称：

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datagrid.itemcommand(v=vs.71](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datagrid.itemcommand(v=vs.71) )

# php - PHP-REGEX：重音字母匹配非重音字母，反之亦然。如何做到这一点？

> ID：10837247
> 
> 赞同：4
> 
> 时间：2012-05-31T16:06:13.563
> 
> 标签：php, regex, case-insensitive, non-ascii-characters

我想做典型的高亮代码。所以我有类似的东西：

```
$valor = preg_replace("/(".$_REQUEST['txt_search'].")/iu", "<span style='background-color:yellow; font-weight:bold;'>\\1</span>", $valor); 
```

现在，请求词可能类似于“josé”。有了它，我也想突出显示“jose”或“JOSÉ”或“José”等。

使用这个表达式，如果我写“josé”，它会匹配“josé”和“JOSÉ”（以及所有大小写变体）。它始终只匹配重音变体。如果我搜索“jose”，它匹配“JOSE”、“jose”、“Jose”，但不匹配重音的。所以我有部分我想要的，因为我对重音和非重音分别不区分大小写。

我需要它完全结合，这意味着重音（unicode）不敏感，所以我可以搜索“jose”，并突出显示“josé”、“josÉ”、“José”、“JOSE”、“JOSÉ”、“JoSé”... .

我不想替换单词上的重音符号，因为当我在屏幕上打印它时，我需要看到真实的单词。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-31T16:32:14.397

您可以尝试创建一个函数来根据您的 txt_search 创建正则表达式，将任何可能的匹配替换为所有可能的匹配，如下所示：

```
function search_term($txt_search) {
    $search = preg_quote($txt_search);

    $search = preg_replace('/[aàáâãåäæ]/iu', '[aàáâãåäæ]', $search);
    $search = preg_replace('/[eèéêë]/iu', '[eèéêë]', $search);
    $search = preg_replace('/[iìíîï]/iu', '[iìíîï]', $search);
    $search = preg_replace('/[oòóôõöø]/iu', '[oòóôõöø]', $search);
    $search = preg_replace('/[uùúûü]/iu', '[uùúûü]', $search);
    // add any other character

    return $search;
} 
```

然后将结果用作 preg_replace 上的正则表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T16:37:09.867

您可能必须解析搜索字符串，并修改正则表达式中的模式，以便 if 包含 [eéÉ] 之类的情况。将 e/E/é/É 的所有实例替换为一个包罗万象的 [eEéÉ]。对所有其他情况执行相同的操作。所以在你的例子中，搜索模式，而不是 Jose/José/JOSÉ，将是`jos[éÉeE]`

# java - MySQL 连接器/J 中的 ClassNotFoundException

> ID：10837248
> 
> 赞同：0
> 
> 时间：2012-05-31T16:06:16.767
> 
> 标签：java, mysql, exception, jdbc, classloader

以前有人问过这个问题，但我找不到我需要的答案。

1）`Class.forName("com.mysql.java.Driver")`在eclipse IDE中使用一切正常。我加载了正确的 jar (mysql-connector-java-5.1.20-bin.jar)，没有例外。

当我为我的应用程序 a1.jar 创建一个 jar 并双击该 jar 时，我得到了`ClassnotFoundException`.

我在 Windows XP 中创建了一个 .bat 文件

`java -classpath c:\temp\mysql-connector-java-5.1.20-bin.jar -jar c:\temp\a1.jar`应用程序 statrs 具有相同的例外。

此外，在 IDE 中使用`System.getProperty ("java.class.path")`节目`c:\temp\a1.jar`时，我可以看到几个目录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:29:10.267

司机是`com.mysql.jdbc.Driver`，不是`com.mysql.java.Driver`。

您收到 ClassNotFoundException，因为 Connector/J 库中没有`com.mysql.java.Driver`类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T16:21:15.073

当您从 jar 运行应用程序时，您可能需要检查添加类路径依赖项的清单文件方式。看看这个[清单类路径](http://docs.oracle.com/javase/tutorial/deployment/jar/downman.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T16:32:19.343

您可以做的另一件事是将所有必需的库放在可执行 jar 中的单个文件中。以下回复可能会有很大帮助：

*   [eclipse 创建可执行jar](https://stackoverflow.com/a/8159427/870248)

从 Eclipse 3.5 开始，您还可以使用 eclipse 向导导出可执行的 jar。

使用 File > Export... 并选择 Runnable JAR 文件。Runnable Jar Export 窗口有一个单选按钮，您可以在其中选择提取或将所需的库打包到生成的 jar 中。

![出口](../Images/20fa396eb08d29268be7be759a73dba8.png) ![可运行的 JAR 文件导出](../Images/9b22f7bc1dd413b5d1ccbface0ca3968.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T18:28:34.173

如果您使用 执行文件`-jar`，则任何外部类路径（在命令行或环境中提供）都将被忽略。它只查看文件中的`Class-path:`条目`META-INF/MANIFEST.MF`。如果未在此处指定 MySQL jar，则不会加载它。

# jquery - 如何在新添加的 DOM 项上应用颜色框？

> ID：10837251
> 
> 赞同：0
> 
> 时间：2012-05-31T16:06:26.360
> 
> 标签：jquery, ajax, dom, colorbox

```
$(function () {
    loadFiles('Reports');
    var colorboxOptions = GetColorboxOptions();
    colorboxOptions.onOpen = onViewFileClicked;
    $("a.link_file").colorbox(colorboxOptions);

}); 
```

我需要用 ajax 调用填充一个空的 div `loadFiles('Reports')`。但是如何添加`colorbox`到新创建的`<a>`标签中呢？上面的代码永远不会起作用。似乎`colorbox`无法找到`a.link_file`在 之后创建的所有标签`$(document).ready()`。有人可以帮我吗？谢谢你。

- -更新 - -

`loadFiles`正在使用 jTemplate

```
function loadFiles(folder) {
$.ajax({
    url: '/Api/Files/' + folder,
    type: "GET",
    contentType: "application/json; charset=utf-8",
    success: function (result) {
        console.log(result);
        $('#Container').setTemplateURL("/Templates/FileList.htm", null, { filter_data: false });
        $('#Container').processTemplate(result);
    }
}); 
```

}

它的作用是生成 Html 代码来填写`<div>`被调用的`Container`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T16:23:11.620

如果您的 loadFiles 函数正在调度 ajax 调用，那么可能发生的是它正在生成一个新线程来处理抓取数据并继续执行其余的函数。当您希望在 ajax 调用完成后发生某些事情时，您需要将您想要发生的事情放在 ajax 调用中的“success:”函数中。否则，你无法保证事情会按照你想要的顺序发生。

如果您可以编辑 loadFiles 函数，只需输入

```
var colorboxOptions = GetColorboxOptions();
colorboxOptions.onOpen = onViewFileClicked;
$("a.link_file").colorbox(colorboxOptions); 
```

在ajax调用的成功函数中。

或者，您可以添加

```
async: false, 
```

到您的 Ajax 调用。我个人不推荐这条路线，因为它可能会导致其他错误，但如果您将此功能用于多种用途，这可能是您的最佳选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T16:58:52.303

```
$(function () {
    loadFiles('Reports');
});

function loadFiles(folder) {
$.ajax({
    url: '/Api/Files/' + folder,
    type: "GET",
    contentType: "application/json; charset=utf-8",
    success: function (result) {
        console.log(result);
        $('#Container').setTemplateURL("/Templates/FileList.htm", null, { filter_data: false });
        $('#Container').processTemplate(result);

        var colorboxOptions = GetColorboxOptions();
        colorboxOptions.onOpen = onViewFileClicked;
        $("a.link_file").colorbox(colorboxOptions);
    }
}); 
```

我不保证，但我猜测您的 colorBox 代码需要在 ajax 调用返回后运行，请尝试将其置于上述成功回调中。

# objective-c - 在目标 C (ios) 中管理表单（创建、编辑、显示...）

> ID：10837253
> 
> 赞同：0
> 
> 时间：2012-05-31T16:06:29.740
> 
> 标签：objective-c, ios, cocoa-touch, ios5

我有一个包含许多字段（名字，姓氏......）的静态表格视图。每个字段都是我的 Card 模型的属性。

在创建时，我显示空表单。但是我该怎么做才能显示编辑表单？

*   我填写创建表格并填写字段？
*   我在情节提要上复制了我的表格视图？
*   我只制作一个表格并且在可编辑的稳定状态下我将标签字段切换到文本字段？

我从ios开始，我不知道该怎么做？

谢谢你的建议。

# r - 具有固定行数的 ddply

> ID：10837258
> 
> 赞同：1
> 
> 时间：2012-05-31T16:07:05.200
> 
> 标签：r, plyr

我想按“行数”分解我的数据。也就是说，我想向我的函数发送固定数量的行，当我到达数据帧的末尾（最后一个块）时，我只需要发送块，无论它是否具有固定数量的行数或更少。像这样的东西：

```
ddply(df, .(8 rows), .fun=somefunction) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T16:20:26.637

如果要使用`plyr`，可以添加类别列：

```
df <- data.frame(x=rnorm(100), y=rnorm(100))

somefunction <- function(df) {
    data.frame(mean(df$x), mean(df$y))
}

df$category <- rep(letters[1:10], each=10)

ddply(df, .(category), somefunction) 
```

但是，在这种情况下，apply 系列可能是更好的选择：

```
somefunction <- function(n, x, y) {
    data.frame(mean(x[n:(n+9)]), mean(y[n:n+9]))
}

lapply(seq(1, nrow(df), by=10), somefunction, x=df$x, y=df$y) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T17:03:13.127

如果对速度和简洁感兴趣，那么为了完整性（并使用 4 而不是 8 的块大小来保持示例简短）：

```
require(data.table)
set.seed(0)
DT = data.table(a=rnorm(10))
DT
                 a
 [1,]  1.262954285
 [2,] -0.326233361
 [3,]  1.329799263
 [4,]  1.272429321
 [5,]  0.414641434
 [6,] -1.539950042
 [7,] -0.928567035
 [8,] -0.294720447
 [9,] -0.005767173
[10,]  2.404653389

DT[,list(sum=sum(a),groupsize=.N),by=list(chunk=(0:(nrow(DT)-1))%/%4)]
     chunk       sum groupsize
[1,]     0  3.538950         4
[2,]     1 -2.348596         4
[3,]     2  2.398886         2 
```

诚然，这是一个相当长的声明。它命名列并返回组大小，以显示最后一个块确实只包含所需的 2 行。

一旦感到舒服它正在做正确的事情，它就可以缩短为：

```
DT[,sum(a),by=list(chunk=(0:(nrow(DT)-1))%/%4)]
     chunk        V1
[1,]     0  3.538950
[2,]     1 -2.348596
[3,]     2  2.398886 
```

请注意，您可以像这样*动态地进行*聚合；它们不需要先添加到数据中。如果您在生产脚本中有很多不同的聚合，或者只是想与命令行中的数据进行交互，那么像这样非常小的生产力差异有时会有所帮助，具体取决于您的工作流程。

注意：我选择了`sum`，但可以用`somefunction(.SD)`或（更有可能）替换为`list(exp1,exp2,...)`每个`exp`将列名视为变量名的任何 R 表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T00:24:55.313

您可以在对 的调用中定义 8 行 ID `ddply`。

不是特别优雅，但使用`ddply`（以及`head`示例函数）

```
df <- data.frame(x = rnorm(100), y = rnorm(100))
ddply(df, .(row_id = rep(seq(ceiling(nrow(df) / 8)), each = 8)[1:nrow(df)]),
             head, n = 1) 
```

# c++ - 当我们需要提供模板参数来定义一个类？

> ID：10837259
> 
> 赞同：1
> 
> 时间：2012-05-31T16:07:06.100
> 
> 标签：c++

```
template<typename T> class A // template parameterization
{
   private:
      T t;
   A(const T& v) : t(v) {}
};

class B
{
    template<typename T>
    B(const T& v)
    {
        std::cout << v << std::endl;
    }
};

// usage of A and B
A<int> a;
B      b(10); 
```

问题> 在什么情况下，我们必须提供模板参数才能定义一个类变量。

例如，

如果类包含模板成员变量或 ???

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T16:12:36.933

如果类是类模板，则必须提供模板参数来创建实例。在您的示例中，`class A`是一个类模板，而`class B`不是。

类模板：

```
template <typename T> class A {}; 
```

不是类模板：

```
class B { 
  // code may include function template, etc.
  // but the class itself is not a class template
}; 
```

在您的示例中，`class B`有一个模板构造函数，编译器可以使用该参数来确定要进行的专业化。所以在这种情况下，它会生成一个等效于的构造函数

```
B(const int&); 
```

因为字面`10`量是一个`int`. 构造函数不像函数，所以只有在编译器能够弄清楚它是什么的情况下才能工作`T`。有关更多详细信息，请参阅[此相关问题](https://stackoverflow.com/questions/3960849/c-template-constructor)。

# extjs - ExtJS 将值从 URL 传递给 store.filter

> ID：10837260
> 
> 赞同：1
> 
> 时间：2012-05-31T16:07:08.143
> 
> 标签：extjs, store, extjs3

这是我的两个 URL 的示例：

[http://myurl.com/viewer/?color=red](http://myurl.com/viewer/?color=red)

[http://myurl.com/viewer/?color=red&priority=1](http://myurl.com/viewer/?color=red&priority=1)

好的，我需要做的是能够过滤出现的任何一种情况——这意味着脚本将接受带有一个或两个参数的 URL，然后使用 store.filter 过滤掉显示的数据屏幕上。

这是我正在使用的代码 - 如果我将两者都放在 store.filter 中，我可以让它工作，但如果只设置一个（如第一个 URL），那么它会崩溃。

我需要做什么才能动态接受一个或两个？

我完全被困住了......

```
var events_ds = new Ext.data.JsonStore({
            autoLoad: true,
            autoDestroy: true,
            url: '<% $base %>json/events/viewer.json',
            storeId: 'events_ds',
            idProperty: 'id',
            fields: [ 'id', 'precedence', 'affectedWWN', 'eventType', 'color', 'CollectTime' ],
            listeners:
                    { 'load': function(store)
                            {
                             store.filter([
                                {property: 'color' , value: $_GET['color'] , anyMatch: true , caseSensitive: false},
                                {property: 'precedence' , value: $_GET['priority'] , anyMatch: true , caseSensitive: false}
                            ]);
                            }
                    }

    }); 
```

# entity-framework-4 - EF Code First 4.3：迁移/种子

> ID：10837265
> 
> 赞同：1
> 
> 时间：2012-05-31T16:07:21.830
> 
> 标签：entity-framework-4, ef-code-first, entity-framework-migrations

我正在尝试在我的迁移配置文件中播种一些数据。我创建了位置类的新实例

```
var location = new Location
            {
                Name = "Test",
                Street = "Test",
                City = "Test",
                State = "Test",
                ZipCode = "Test",
                Country = "US",
                PhoneNumber = "Test",
                EmailAddress = null,
                Website ="Test",
                Latitude = Convert.ToDecimal(35.137592),
                Longitude = Convert.ToDecimal(-85.124883)
            }; 
```

为了播种，我有

```
context.Locations.AddOrUpdate(
                t =>
                new
                    {
                        t.Name,
                        t.Street,
                        t.City,
                        t.State,
                        t.ZipCode,
                        t.Country,
                        t.PhoneNumber,
                        t.EmailAddress,
                        t.Website,
                        t.Latitude,
                        t.Longitude
                    }, location); 
```

纬度和经度都是十进制的？类型。

尝试运行此迁移时出现以下错误：

没有为类型“System.Nullable`1[System.Decimal]”和“System.Decimal”定义二元运算符 Equal。

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:13:52.360

将其更改为

```
context.Locations.AddOrUpdate(t  => t.Name,location); 
```

这样它只检查名称列（在本例中为字符串）

# android - Android - 不透明渐变可绘制

> ID：10837267
> 
> 赞同：1
> 
> 时间：2012-05-31T16:07:28.397
> 
> 标签：android, xml, resources, drawable

是否有可能仅使用可绘制对象来创建具有向外辐射的白色模糊的黑色背景？

这是最终产品，虽然齿轮是 ImageViwe，文本是 TextView，但我希望将黑白模糊设置为单个可绘制对象，我可以将其分配给包含的 LinearLayout：

![在此处输入图像描述](../Images/30bcf2ab8de81a9a622ae6cfde9fd888.png)

这是布局的代码（最终在 GridView 中使用）。如果可能的话，我想将 LinearLayout 的背景设置为上述 Drawable：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_margin="10dp"
    android:background="#000000"
    android:gravity="center_vertical|center_horizontal"
    android:orientation="vertical"
    android:padding="5dp" >

    <ImageView
        android:id="@+id/tile_image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="10dp"
        android:adjustViewBounds="true"
        android:contentDescription="@string/temp_image"
        android:src="@drawable/ic_logo" />

    <TextView
        android:id="@+id/tile_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-31T16:16:40.430

当然，以下是径向渐变可绘制对象，将用作背景。更改颜色/渐变半径以获得所需的效果。**（在可绘制文件夹“ radialbg** ”中创建 xml 文件，或者您喜欢哪个名称）

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"      
        android:shape="rectangle">
<gradient
    android:startColor="#FFFFFFFF"
    android:endColor="#00FFFFFF"
    android:gradientRadius="270"
    android:type="radial"/>

</shape> 
```

要应用它，请在您的线性布局中使用以下行

```
android:background="@drawable/radialbg"> 
```

# php - 比较两个整数

> ID：10837271
> 
> 赞同：4
> 
> 时间：2012-05-31T16:07:44.977
> 
> 标签：php, integer, compare

你如何比较php中的两个整数？

我试过了

```
print (1 > 2);           // No output
$a = 1;
$b = 2;
$c = ($a > $b) ? true : false;
print ($c);              // No output 
```

var_dump 工作正常。我安装了最新的 PHP。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T16:11:19.773

您的两个比较都返回`false`不会打印出值。

```
<?php
echo true;
echo false; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T16:10:47.023

`print(false)`不会输出任何东西。

如果要显示`false`，请尝试`var_export(false)`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-31T16:11:39.523

在这两种情况下，您都尝试打印 false ，这将被强制转换为空字符串，因此您看不到任何打印内容。

尝试使用[var_dump](http://uk3.php.net/var_dump)代替或输出具有适当控制结构的字符串（即 if else）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-05-30T13:20:27.357

**您可以使用Spaceship 运算符**比较 php 中的两个变量（int，float，string）值（**php 7 的新功能**）

*   **整数**
    回显 1 <=> 1; // 0
    回声 1 <=> 2; // -1
    回声 2 <=> 1; // 1
*   **浮动**
    echo 1.5 <=> 1.5; // 0
    回声 1.5 <=> 2.5; // -1
    回声 2.5 <=> 1.5; // 1
*   **字符串**
    echo "a" <=> "a"; // 0
    echo "a" <=> "b"; // -1
    echo "b" <=> "a"; // 1

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T16:12:29.783

您示例中的比较工作正常。问题是当您打印真值或假值时，它们不会呈现任何内容。尝试这样的事情：

```
$ php -a
$ print (1 > 2) ? 'true' : 'false';
$ $a = 1;
$ $b = 2;
$ $c = ($a > $b) ? true : false;
$ print ($c) ? 'true' : 'false'; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-31T16:12:45.990

```
echo ($a > $b) ? "true" : "false"; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-31T16:23:44.720

要么使用类似的东西：

```
$c = $a > $b;
echo $c; 
```

或使用`var_dump()`

# search - Kentico CMS：记录访问者在我的网站内进行的搜索

> ID：10837275
> 
> 赞同：1
> 
> 时间：2012-05-31T16:08:09.060
> 
> 标签：search, logging, content-management-system, kentico

我的 Kentico 网站上有一个搜索框 Web 部件。

有没有办法查看访问者在我的网站中搜索的内容？

也许在某处的站点管理器中记录了所有搜索的日志？

如果默认情况下不存在此信息，是否有办法收集此信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T08:25:02.623

此功能是在 2011 年 10 月发布的第 6 版中添加的。它允许您使用 Kentico Web 分析模块跟踪在现场搜索中使用的关键字（请参阅报告内容 -> 现场搜索关键字）。

还有另一份报告显示在客户访问您的网站之前搜索引擎（Google 等）中使用的关键字（流量来源 -> 搜索关键字）。

如何跟踪搜索关键字（以及更多）的另一种方法是使用 Kentico EMS——它将现场搜索作为访问者活动进行跟踪，以后可用于个性化、细分或潜在客户评分。

# asp.net - 无法在 ASP.NET 中解析 DNS（在控制台中工作）

> ID：10837276
> 
> 赞同：1
> 
> 时间：2012-05-31T16:08:11.910
> 
> 标签：asp.net, dns

当我从桌面上的控制台应用程序调用 Dns.GetHostEntry("SomeServerName") 时，它可以很好地解析 IP 地址。当我在同样在我的桌面上运行的 ASP.NET 应用程序中执行相同的代码时，我得到一个带有消息“未知主机”的 SocketException。

我感觉我的 IIS / ASP.NET 安装可能有问题，但我现在没有时间尝试重新安装。

作为测试，我在 machine.config 中更改了 ASP.NET 帐户的身份以使用我自己的网络凭据，但这没有任何区别。

有任何想法吗？

更新：

看来我需要澄清一下。我在工作站上从 ASP.NET 进行网络通信时遇到问题。这包括尝试使用 SmtpClient 发送电子邮件以及尝试通过 ODBC 连接连接到 IBM DB2。在控制台应用程序中运行时，这些东西都可以正常工作。根本原因似乎是当代码在 ASP.NET 下运行时，DNS 解析失败，虽然我不知道为什么。我能想到的唯一区别是安全上下文。

更新 2：

以下是运行 Wireshark 的一些结果： 当从控制台应用程序进行调用时，我立即看到通过网络发送 2 个“标准域名系统查询”。当从 ASP.NET 应用程序发出相同的调用时，延迟大约 8 秒后，我看到 3 个“NetBIOS 名称服务查询”通过网络发送。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:56:04.753

问题已解决：我工作站上的防病毒程序明确阻止来自 IIS 的传出连接，表面上是为了阻止蠕虫在网络中传播。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T16:12:33.667

[http://social.msdn.microsoft.com/forums/en-US/netfxnetcom/thread/2a8ca3c8-e1ec-490a-a7e5-5ec533080f00/](http://social.msdn.microsoft.com/forums/en-US/netfxnetcom/thread/2a8ca3c8-e1ec-490a-a7e5-5ec533080f00/)

> 如果您将 IP 地址文字传递给 GetHostEntry，它将尝试 DNS 反向解析，而不是仅仅将 IP 地址返回给您。如果成功反向解析的数据不在您的 DNS 服务器中，这将失败。如果您不想要这种语义（即没有反向查找），请使用 Dns.GetHostAddresses。

# linux - CygWin下Shell脚本循环内存不足

> ID：10837277
> 
> 赞同：3
> 
> 时间：2012-05-31T16:08:28.543
> 
> 标签：linux, bash, shell, memory, cygwin

我编写了一个在 CygWin 下运行的 shell 脚本，其目的是监视文件的更改。如果 MD5 哈希与之前的哈希匹配失败，它将执行命令来处理文件。我在哈希检查之间使用了 1 秒的延迟。这可以运行几个小时，但随后会出现“内存不足”错误，实际上会使 Windows 7 崩溃。

该脚本在循环中使用循环；外循环在设计上是无限的，内循环在找到不匹配的哈希并处理文件时结束。它在运行内部循环时中断，当时没有修改文件。该文件之前被多次修改，触发了内部循环下方的代码，但不是在内存错误发生的时候。

我只是想知道为什么这里的循环会随着时间的推移消耗越来越多的内存。我一遍又一遍地将新的 MD5 值分配给现有变量，而不是为每个 MD5 分配分配新变量。（对吗？？） 1 秒的延迟是否可能太短了……系统是否需要时间在内循环的每次迭代之间释放某些东西？

```
#!/bin/sh

FILE_TO_CHECK=/mypath/style.less

echo "Reading hash for $FILE_TO_CHECK with md5sum"
MD5PRINT=`md5sum $FILE_TO_CHECK | cut -d " " -f1`

MD5PRINTNEW=$MD5PRINT

while [[ 1 = 1 ]]
do
        echo "Waiting for file to change..."

        while [[ "$MD5PRINT" = "$MD5PRINTNEW" ]]
        do
                sleep 1

                MD5PRINTNEW=`md5sum $FILE_TO_CHECK | cut -d " " -f1`
        done

        echo "File was modified ... Running compiler..."

        /mypath/lessc $FILE_TO_CHECK /mypath/style.css -x

        echo "Reading hash for $FILE_TO_CHECK with md5sum"
        MD5PRINT=`md5sum $FILE_TO_CHECK | cut -d " " -f1`

        MD5PRINTNEW=$MD5PRINT
done 
```

任何帮助，将不胜感激。如果需要，我可以提供确切的内存错误，但我需要一些帮助才能知道 CygWin 中的哪些日志（如果有）要查看、四处挖掘并找到错误文本。（我宁愿不要整天运行它来再次重现错误。该错误肯定与我的 CygWin shell 内存不足有关。）谢谢！

（如果您提出一个涉及增加 CygWin 可用内存的解决方案，这似乎不合逻辑，因为脚本会随着时间的推移逐渐增加其自身的内存使用量。因此，我认为这样的解决方案只会延迟不可避免的事情。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T20:25:59.413

这是男孩住宅区找到的信息的摘要。作为记录 ：）

描述此问题的 cygwin 邮件列表的邮件/线程位于[http://thread.gmane.org/gmane.os.cygwin/134041](http://thread.gmane.org/gmane.os.cygwin/134041)

[http://cygwin.com/faq/faq.using.html#faq.using.bloda](http://cygwin.com/faq/faq.using.html#faq.using.bloda)是指向可能导致 cygwin 出现此“bloda”问题的应用程序的链接。

# java - Java 客户端/服务器套接字

> ID：10837279
> 
> 赞同：3
> 
> 时间：2012-05-31T16:08:41.653
> 
> 标签：java, sockets, client, serversocket

我从 java 套接字开始并且有奇怪的 [缺少] 输出。这是我的套接字方法的来源：

客户端源代码：

```
public void loginToServer(String host, String usnm ) {
    try {
        Socket testClient = new Socket(host,1042);
        System.out.println ("Connected to host at " + host);
        logString = ("CONNECTED: " + host);
        outGoing = new PrintWriter(testClient.getOutputStream(), true);
        outGoing.print("Hello from " + testClient.getLocalSocketAddress());
        InputStream inFromServer = testClient.getInputStream();
        DataInputStream in = new DataInputStream(inFromServer);
        System.out.println("Server says " + in.readLine());
        testClient.close();
    }
    catch (Exception e) {
        System.err.println ("Error connecting to host at " + host + ":1042.\n Reason: " + e);
        logString = ("CONNECT FAILED: " + host + ":1042: " + e);
    }
    printLog(logString);
    // send server usnm and os.name [System.getProperty(os.name)] ?
} 
```

和服务器代码：

```
public void runServer() {
        try{
            server = new ServerSocket(1042); 
        }
        catch (IOException e) {
            printLog("LISTEN FAIL on 1042: " + e);
            System.err.println("Could not listen on port 1042.");
            System.exit(-1);
        }
        try{
            client = server.accept();
        }
        catch (IOException e) {
            printLog("ACCEPT FAIL on 1042: " + e);
            System.err.println("Accept failed: 1042");
            System.exit(-1);
        }
        try{
            inComing = new BufferedReader(new InputStreamReader(client.getInputStream()));
            outGoing = new PrintWriter(client.getOutputStream(), true);
        }
        catch (IOException e) {
            printLog("READ FAIL on 1042: " + e);
            System.err.println("Read failed");
            System.exit(-1);
        }
        while(true){
            try{
                clientData = inComing.readLine();
                //processingUnit(clientData, client);
                outGoing.print("Thank you for connecting to " + server.getLocalSocketAddress() + "\nGoodbye!");
            }
            catch (IOException e) {
            printLog("READ FAIL on 1042: " + e);
                System.out.println("Read failed");
                System.exit(-1);
            }
        }
    } 
```

而客户给出的输出仅仅是`Connected to host at localhost`.

这是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T16:12:33.457

您正在编写文本并阅读二进制文件。由于您的输出和输入不匹配，因此在这种情况下极有可能挂起。

我建议您使用带有 writeUTF/readUTF 的二进制文件或带有 println/readLine 的文本。

BTW：readUTF 读取两个字节以确定要读取的数据长度。由于前两个字节是 ASCII 文本，您可能要等待大约 16,000 个字符才能返回。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T04:53:42.697

您正在阅读线路，但您没有发送线路。更改`print()`为`println()`。`readLine()`将永远阻塞等待换行符。它将在流结束时返回 null，即当对等方关闭连接时，但您也没有检查它，因此您无限循环。

# android - Android - 播放拨号按钮的声音

> ID：10837281
> 
> 赞同：0
> 
> 时间：2012-05-31T16:08:47.950
> 
> 标签：android, audio, keyboard-events

我正在编写我的自定义拨号键盘。有谁知道如何在系统拨号盘上播放敲击声？(* # 0..9)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T16:18:38.853

看看[ToneGenerator](http://developer.android.com/reference/android/media/ToneGenerator.html)类。它包含正确的音调和演奏方式。这是默认拨号器应用程序播放音调的方式。

# php - 插件分页？

> ID：10837283
> 
> 赞同：0
> 
> 时间：2012-05-31T16:08:50.103
> 
> 标签：php, pagination, wordpress

所以我有一个插件，可以向 WordPress 添加短代码。应用时，它从远程 API 中提取数据，对其进行解析并相应地显示。API 在内部以查询参数“per_page”和“page”的形式对数据进行分页，其中“per_page”是每页显示的项目数，“page”是要显示的集合中的哪个页面。我遇到的问题是找出在前端处理此类分页的最佳方法。到目前为止，我提出的唯一选择是提取总页数，相应地显示分页栏，并将任何数字（或下一个/上一个）作为 POST 变量传递回显示数据的函数。这个解决方案充其量似乎是骇人听闻的，并且需要重新加载我不想拥有的多余页面。有没有人对更清洁的处理方式有任何建议？理想情况下，我希望它内联加载数据，即；根本不重新加载页面。

这是我目前正在使用的...

```
<?php if ($result->info['pages'] > '1') {
    if ($result->info['page'] != '1') {
        echo '<a onClick="location.replace(\'?page=' . ($result->info['page'] - 1) . '\');">Prev</a> ';
    } else {
        echo 'Prev ';
    }
    for ($i = 1; $i <= $result->info['pages']; $i++) {
        if ($i == $result->info['page']) {
            echo $i . ' ';
        } else {
            echo '<a onClick="location.replace(\'?page=' . $i .'\');">' . $i . '</a> ';
        }
    }
    if ($result->info['page'] != $result->info['pages']) {
        echo '<a onClick="location.replace(\'?page=' . ++$result->info['page'] . '\');">Next</a>';
    } else {
        echo 'Next';
    }
} ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T02:21:50.953

我不确定我是否正确理解了这个问题 -

但为什么不使用[wordpress“内置”](http://codex.wordpress.org/Function_Reference/paginate_links)分页功能呢？

或者 - 您也可以尝试在查询中使用 offset 参数。

您可能还想看[这里](http://www.kriesi.at/archives/how-to-build-a-wordpress-post-pagination-without-plugin)- 这个分页功能可以获得自定义循环的参数。

**编辑我**（在评论建议问题不是关于查询而是关于ajax）

这是一个非常简单的示例，您必须根据页面结构对其进行一些更改以使其适合您。

```
<div id=”content”&gt;
<div id=”post-list”&gt;
            (Post Loop Here)
</div>
</div>
<div id=”ajaxPagination”&gt;Load more</div> 
```

Javascript/jQuery

```
$(document).ready(function() {

var pageNumber = 1;
var baseURL = $(location).attr(‘href’);

$(‘#ajaxPagination’).click(function() {
$(‘#ajaxPagination’).html(‘Loading…’);
pageNumber++;
var link = baseURL + ‘page/’ + pageNumber + ‘/’;
$.ajax({
url: link,
success: function(html) {
var result = $(html).filter(‘#content’);
$(‘#post-list’).append(result);
$(‘#ajaxPagination’).html(‘Load more’);
},
error: function(html) {
$(‘#ajaxPagination’).html(‘No more..’);
}
});
});

}) 
```

或者，有很多插件可以做到这一点，还有一些网络上的教程，您可以剖析代码并查看它是如何完成的（或者只是按原样使用插件）

示例：[http ://wordpress.org/extend/plugins/ajax-pagination/installation/](http://wordpress.org/extend/plugins/ajax-pagination/installation/)

[http://www.99points.info/2011/01/ajax-pagination-using-jquery-and-php-with-animation/](http://www.99points.info/2011/01/ajax-pagination-using-jquery-and-php-with-animation/)

ETC ..

# linux - 列出 tar.gz 中深度级别为 1 的目录

> ID：10837287
> 
> 赞同：10
> 
> 时间：2012-05-31T16:08:58.350
> 
> 标签：linux, find, grep

一级目录如何在 tar.gz 存档中列出？例如 \dir1\ \dir2\ \dir3\ \dir4\ \dir1\

不是 \dir1\bla \dir1\bla2

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-31T16:17:18.310

您可以使用该`--exclude`选项排除目录中的所有内容。

```
tar tfz archive.tar.gz --exclude '*/*' 
```

例子：

```
[me@home]$ tar tfj CUnit-2.1-2-src.tar.bz2 | head -n5
CUnit-2.1-2/
CUnit-2.1-2/NEWS
CUnit-2.1-2/Makefile.am
CUnit-2.1-2/configure
CUnit-2.1-2/cunit.pc.in

[me@home]$ tar tfj CUnit-2.1-2-src.tar.bz2 --exclude '*/*'
CUnit-2.1-2/ 
```

# php - 如何使用 JQuery Ajax 上传文件

> ID：10837290
> 
> 赞同：1
> 
> 时间：2012-05-31T16:09:23.490
> 
> 标签：php, jquery, ajax

> **可能重复：**
> [通过 JQuery 中的 AJAX](https://stackoverflow.com/questions/1686099/file-upload-via-ajax-within-jquery)
> [上传文件如何在不提交表单的情况下轻松上传文件（使用 jQuery + AJAX）](https://stackoverflow.com/questions/2550166/how-to-easily-upload-files-without-form-submission-with-jquery-ajax)

我知道我们可以使用表单上传文件，`enctype="multipart/form-data"`但我想弄清楚的是使用 Jquery Ajax 上传文件..

有小费吗？？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:13:23.210

试试这个 jQuery 插件[http://valums.com/ajax-upload/](http://valums.com/ajax-upload/)

然后使用这个javascript代码

```
var uploader = new qq.FileUploader({
   // pass the element
   element: $(selector)[0],
   // path to server-side upload script
   action: '/server/upload'
}); 
```

有关更多信息，请查看文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T16:15:41.327

我过去使用过[http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)，它提供了很棒的演示和文档。

[在https://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)上查看

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T16:21:59.027

提到的插件都很有用，但如果你想知道这个过程背后的逻辑，它是这样的：

1.  创建一个处理上传文件并可以返回错误的 php 文件 ( `echo`)。
2.  使用您的表单和所有内容创建一个 HTML 页面
3.  创建一个 jquery 函数：
    *   避免提交表单
    *   为您在第一步中创建的 php 文件创建一个 ajax 请求
    *   在 div 中显示 php 文件的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T16:36:29.220

您需要使用 FormData 对象，但它只适用于较新的浏览器。

```
if (window.FormData) {
    $('input[type=file]').change(function() {
        var formdata = new FormData();
        var file = this.files[0];
        formdata.append("files[]", file);
        $.ajax({
            url: "upload.php",
            type: "POST",
            data: formdata,
            processData: false,
            contentType: false
        });
    });
} 
```

更多信息：[https ://developer.mozilla.org/en/XMLHttpRequest/FormData](https://developer.mozilla.org/en/XMLHttpRequest/FormData)

您还可以查看带有示例 HTML 和一些附加功能的 lib：http: [//net.tutsplus.com/tutorials/javascript-ajax/uploading-files-with-ajax/](http://net.tutsplus.com/tutorials/javascript-ajax/uploading-files-with-ajax/)

为了支持旧浏览器，您可以制作 iframe，将文件输入元素克隆到 iframe 并在那里提交表单。这样一来，页面就不会刷新，而且会像 AJAX 一样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T16:19:24.023

取决于你的需要。

对于单个文件， http: [//valums.com/ajax-upload/](http://valums.com/ajax-upload/)就足够了

对于 multipla 文件上传 + 多文件选择，您将需要其他技术，如 flash 或 html5，您可以检查[plupload](http://www.plupload.com/example_queuewidget.php)或[Uploadify](http://www.uploadify.com/demos/)

plupload 支持 flash、html5、silvernight html4 上传方式。并且还支持多文件选择（html4除外）

uploadify 支持 flash 和 html5 进行多文件选择

# java - 在java中将bmp转换为jpg

> ID：10837292
> 
> 赞同：3
> 
> 时间：2012-05-31T16:09:24.707
> 
> 标签：java, jpeg, bmp

你如何在Java中将bmp转换为jpg？我知道如何使用这种`ImageIO`方式，但有更快或更好的方式吗？

这是我在网上找到的 ImageIO 方法。

```
`//Create file for the source  
File input = new File("c:/temp/image.bmp");  

//Read the file to a BufferedImage  
BufferedImage image = ImageIO.read(input);`

//Create a file for the output  
File output = new File("c:/temp/image.jpg");  

//Write the image to the destination as a JPG  
ImageIO.write(image, "jpg", output); 
```

如果我使用这种方式，我会失去质量吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T16:11:56.733

是的你将会。实际上，无论将 BMP（无损）转换为 JPG（有损）的方式如何，您总是会丢失质量。如果您将 JPG 质量设置为 100%（我认为这与目的不符），您可以限制损坏。

使用本[教程](http://www.universalwebservices.net/web-programming-resources/java/adjust-jpeg-image-compression-quality-when-saving-images-in-java)修复它。

# ios - iOS：ViewDidAppear 上的方向检查旋转

> ID：10837294
> 
> 赞同：3
> 
> 时间：2012-05-31T16:09:35.557
> 
> 标签：ios, xcode, ipad, rotation, orientation

**背景：**我想确保我的 viewController 在它出现时正确旋转。我的 viewController 具有出色的代码来管理可见时的旋转和方向。

**问题：**给定 NavigationController 中的两个 viewController，`viewC1`并且`viewC2`. 我做了以下事情：

1.) 将 rootViewController 设置为`viewC1`

2.) 推`viewC2`入 NavigationController

3.) 旋转

4.) 流行音乐`viewC2`

5.)`viewC1`仍然停留在旧方向外观（如未 `willAnimateRotationToInterfaceOrientation`调用转换代码中）与新方向。

我能做些什么来确保`viewC1`调用`willAnimateRotationToInterfaceOrientation`重建自身以在新的轮换中正确显示？

**附加信息：** 这是所有代码（没有故事板/xib）。我对所有观点都有`shouldAutorotateToInterfaceOrientation`回报。`YES`我`willAnimateRotationToInterfaceOrientation`用来管理我所有的轮换。

哦，请不要黑客。例如，从轮换中复制代码，然后手动检查轮换并在`viewDidAppear`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:13:48.787

想想方法的名称，以及你想要实现的目标。

`willAnimateRotationToInterfaceOrientation`表示由视图控制器控制的视图即将动画到特定方向。如果您的视图位于导航堆栈的中间，则它不会显示在屏幕上。为不在屏幕上的东西制作动画是昂贵的，最终毫无价值。所以，那个特定的方法是不可能的，但剩下的问题是在 UIKit 中没有其他更合适的方法了。原因是在屏幕外旋转某些东西（即使没有动画）是毫无价值的成本。开发人员有责任在视图出现时处理方向的变化（“按需转换”）。

您说您不想要 hack，但您描述为 hack 的方法可能是最合适的做法。拥有一个名为 like 的通用方法 `-(void) updateLayoutForOrientation:(UIInterfaceOrientation)orientation animated:(BOOL)animated { ... }` 并不是一个坏主意。这可以是整个视图控制器的方向变化转换的处理程序。

您可能需要检查/处理方向问题的地方是

`-(void) viewWillAppear:(BOOL)animated`

`-(void) willAnimateRotationToInterfaceOrientation: (UIInterfaceOrientation) interfaceOrientation duration: (NSTimeInterval) duration`

在这两种情况下，请致电`updateLayoutForOrientation:animated:`为您完成工作。

# python - 使用 matplotlib 对极坐标图中的“细胞”进行阴影处理

> ID：10837296
> 
> 赞同：11
> 
> 时间：2012-05-31T16:09:36.270
> 
> 标签：python, plot, matplotlib

我有一堆规则分布的点 (θ = n*π/6, r=1...8)，每个点的值都在 [0, 1] 中。我可以在 matplotlib 中使用它们的值绘制它们

```
polar(thetas, rs, c=values) 
```

但与其只有一个微不足道的小点，我想用与点值对应的颜色来遮蔽相应的“单元格”（即直到相邻点一半的所有内容）：

![带阴影单元的极坐标图](../Images/9148165b163d23cef0e06a0264a0d722.png)

（请注意，这里我的值只是 [0, .5, 1]，实际上它们将是 0 到 1 之间的所有值。是否有任何直接的方法可以使用 matplotlib 实现这一点（或足够接近的东西）？也许更容易将其视为二维直方图？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-01T10:22:56.170

这可以通过将其视为极性堆叠条形图来很好地完成：

```
import matplotlib.pyplot as plt
import numpy as np
from random import choice

fig = plt.figure()
ax = fig.add_axes([0.1, 0.1, 0.8, 0.8], polar=True)

for i in xrange(12*8):
    color = choice(['navy','maroon','lightgreen'])
    ax.bar(i * 2 * np.pi / 12, 1, width=2 * np.pi / 12, bottom=i / 12,
           color=color, edgecolor = color)
plt.ylim(0,10)
ax.set_yticks([])
plt.show() 
```

产生：

![在此处输入图像描述](../Images/2e684599eed25ee98dee858f0a18d558.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-31T17:38:47.180

当然！只需`pcolormesh`在极轴上使用。

例如

```
import matplotlib.pyplot as plt
import numpy as np

# Generate some data...
# Note that all of these are _2D_ arrays, so that we can use meshgrid
# You'll need to "grid" your data to use pcolormesh if it's un-ordered points
theta, r = np.mgrid[0:2*np.pi:20j, 0:1:10j]
z = np.random.random(theta.size).reshape(theta.shape)

fig, (ax1, ax2) = plt.subplots(ncols=2, subplot_kw=dict(projection='polar'))

ax1.scatter(theta.flatten(), r.flatten(), c=z.flatten())
ax1.set_title('Scattered Points')

ax2.pcolormesh(theta, r, z)
ax2.set_title('Cells')

for ax in [ax1, ax2]:
    ax.set_ylim([0, 1])
    ax.set_yticklabels([])

plt.show() 
```

![在此处输入图像描述](../Images/73af6b95f0b952e98d436354efab7baf.png)

如果您的数据尚未在常规网格上，则需要对其进行网格化以使用 pcolormesh。

不过，它看起来像是在您的情节中的常规网格上。在这种情况下，网格化非常简单。如果它已经订购，它可能就像调用一样简单`reshape`。否则，一个简单的循环或利用`numpy.histogram2d`您的`z`值作为权重将满足您的需求。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-31T20:19:51.217

嗯，它总体上相当粗糙，但这里有一个版本可以完善这些部分。

```
from matplotlib.pylab import *
ax = subplot(111, projection='polar')

# starts grid and colors
th = array([pi/6 * n for n in range(13)]) # so n = 0..12, allowing for full wrapping
r = array(range(9)) # r = 0..8
c = array([[random_integers(0, 10)/10 for y in range(th.size)] for x in range(r.size)])

# The smoothing
TH = cbook.simple_linear_interpolation(th, 10)

# Properly padding out C so the colors go with the right sectors (can't remember the proper word for such segments of wedges)
# A much more elegant version could probably be created using stuff from itertools or functools
C = zeros((r.size, TH.size))
oldfill = 0
TH_ = TH.tolist()

for i in range(th.size):
    fillto = TH_.index(th[i])

    for j, x in enumerate(c[:,i]):
        C[j, oldfill:fillto].fill(x)

    oldfill = fillto

# The plotting
th, r = meshgrid(TH, r)
ax.pcolormesh(th, r, C)
show() 
```

# java - Java转Jython——在自身内部获取类对象

> ID：10837298
> 
> 赞同：4
> 
> 时间：2012-05-31T16:10:02.677
> 
> 标签：java, python, jython

我正在尝试将 Java 代码转换为 Jython，并且正在使用 apache Log 和 LogFactory 导入。我正在尝试在 Jython 中模拟 Foo.class 代码块如下：在 Java 中

```
 import org.apache.commons.logging.Log;
    import org.apache.commons.logging.LogFactory;

    public class MyClass {

    private static final Log log = LogFactory.getLog(MyClass.class);

    public MyClass(Document dom)
    { //code
    } 
```

如何在 Jython/Python 中模拟 MyClass.class 的相同行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T17:42:29.973

为了说明我的评论：

```
from org.apache.commons.logging import LogFactory

class MyClass(object):
    def __init__(self, dom):
        "code"

log = LogFactory.getLog(MyClass) 
```

或者

```
MyClass.log = LogFactory.getLog(MyClass) 
```

# javascript - 交换 observableArray 中的 2 个项目 - 淘汰赛

> ID：10837300
> 
> 赞同：2
> 
> 时间：2012-05-31T16:10:11.580
> 
> 标签：javascript, knockout.js, observablecollection, knockout-2.0

我想用淘汰赛替换 observableArray 中的 2 个项目，但出了点问题..

替换项目后，我将更改 displayOrder 属性（在两个 itmems 中）并将其发送到服务器（或者我应该为此采取其他方法）

```
 ReplaceBetweenTwoitemsInArray: function () {
            console.log("ranking down msg");
            var currentItemindex = viewModel.myobservableArray.indexOf(this); 
            var nextItemIndex = currentItemindex + 1;
            viewModel.myobservableArray .replace(
                 viewModel.myobservableArray ()[nextItemIndex], 
                viewModel.myobservableArray ()[currentItemindex]
             );

        } 
```

只有第一项更改为第二项，但第二项未变为第一项

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T22:32:53.303

类似于 Paoli 的答案，但也会触发对可观察对象的更新，可能是 DRYer。

[http://jsfiddle.net/marrok/ckMJE/101/](http://jsfiddle.net/marrok/ckMJE/101/)

```
<ul data-bind="foreach: colors">
    <li><span data-bind="text:color"></span>
    </li>
</ul>
<br/>
<span>From:</span><input type="text" data-bind="value:from"/>
<br/>
<span>TO:</span><input type="text" data-bind="value:to"/>
<br/>
<button data-bind="click:swap">Swap It</button>​ 
```

Javascript：

```
var ViewModel = function() {
    this.self = this;
    self.from = ko.observable(0); // default
    self.to = ko.observable(1); // default
    self.colors = ko.observableArray([{
        color: 'red'},
    {
        color: 'green'},
    {
        color: 'pink'},
    {
        color: 'blue'},
    {
        color: 'yellow'}]);

    self.swap= function() {
        var iTo = parseInt(self.to());
        var iFrom = parseInt(self.from());
        var from = self.colors()[iFrom];
        var to = self.colors()[iTo];
        console.log("Before", self.colors().map(function(d){return d.color;} ), from, to, iFrom, iTo)
        self.colors()[iTo] = from;
        self.colors()[iFrom] = to;
        console.log("After ", self.colors().map(function(d){return d.color;} ), from, to, iFrom, iTo)
        self.colors.valueHasMutated()

    };
};
model = new ViewModel()
ko.applyBindings(model);​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T21:02:24.910

您可以使用临时变量：

```
var arr = ko.observableArray([0, 1])

// Should produce arr() = [0, 1]

var tmp = arr()[0];

arr()[0] = arr()[1];
arr()[1] = tmp;

// At this point, arr() is [1, 0] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-22T23:03:09.383

您可以直接在 observableArray 上使用 remove 和 splice 函数，如下所示：

```
var arr=ko.observableArray(["x","y"]);
var index=arr.indexOf("y");
var tmp=arr()[index-1];
arr.remove(tmp);
arr.splice(index,0,tmp); 
```

# php - jquery中是否有一个人签名生成器？

> ID：10837305
> 
> 赞同：0
> 
> 时间：2012-05-31T16:10:44.567
> 
> 标签：php, jquery

jquery上是否有一个插件，您可以创建签名，或者您可以通过计算机签名而不打印并签名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T16:15:18.173

[http://thomasjbradley.ca/lab/signature-pad/](http://thomasjbradley.ca/lab/signature-pad/)

[http://www.unbolt.net/jSignature/](http://www.unbolt.net/jSignature/)

……

# objective-c - 在 iOS 中线程化 TCP 控制器

> ID：10837311
> 
> 赞同：0
> 
> 时间：2012-05-31T16:11:13.557
> 
> 标签：objective-c, ios

今天我正在测试我在两个不同的控制器中构建的项目，一个 ViewController 和一个 TCPController。我的 ViewController 实例化了更新输出和输入流的 TCPController（单例）。现在在测试中，我可以确定 GUI 界面有一些滞后，这很容易归咎于 TCPController。

在我使用 Apple 网站上的标准教程之前，是否有关于如何线程化 TCP 控制器（客户端）的最佳实践：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/CreatingThreads /CreatingThreads.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/CreatingThreads/CreatingThreads.html)

非常欢迎有关如何解决此问题的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T02:18:11.030

阅读文档总是一个好主意。

你所做的部分取决于你的沟通框架。大多数好的框架已经提供了异步方法。如果你的没有。寻找别的东西。

除此之外，一般来说，您将希望在后台线程中执行您的代码。如果这是一项长期的工作，那么以下应该可以解决问题......

```
dispatch_queue_t commQ = dispatch_queue_create("some.unique.labe", 0);
dispatch_async(commQ, ^{
    // Now, any code running in this block is running in a different thread.
    // When you get done, and want to talk to the UI, you must use the main
    // queue for any UIKit calls...

    dispatch_async(dispatch_get_main_queue(), ^{
        // Now this code is running on the main queue
        // Do all your UI stuff here...

    });
});
dispatch_release(commQ); 
```

# jquery - 在 li 中查找文本并用 jquery 替换

> ID：10837313
> 
> 赞同：0
> 
> 时间：2012-05-31T16:11:20.313
> 
> 标签：jquery

我想要做的是找到一个`<li>`包含人的词，然后用人和图像替换它？

这是当前的html

```
<div class="subMenu">
        <ul>
            <li class="">
               <span>
                   <a href="/sally">People</a>
               </span>
            </li>
            <li class="">
               <span>
                   <a href="/working-us">Working with us</a>
               </span>
            </li>
            <li class="">
               <span>
                   <a href="/delegate">Delegate Resource</a>
               </span>
            </li>
        </ul>
    </div> 
```

我想用''替换文本'People `People <img src="/Img/banner.png" alt="">`'

可以这样做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T16:14:44.643

基本上，您想将图像附加到具有文本 People 的 li 中。尝试如下，

```
$('.subMenu li:contains(People)')
        .append('<img src="/Img/banner.png" alt="">'); 
```

使用[:contains](http://api.jquery.com/contains-selector/)选择器，它在 li 中查找文本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T16:14:04.393

这个查找包含文本的`<a>`元素中的所有元素，然后[在 after()](http://api.jquery.com/after/)之后插入图像：`<li>``People`

`$("li a:contains('People')").after('<img src="/Img/banner.png" alt="">');`

这个找到`<li>`包含文本的所有元素，`People`然后在子元素之后插入图像（`<a>`如果有）：

`$("li:contains('People') a").after('<img src="/Img/banner.png" alt="">');`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T16:14:32.210

`$('*:contains("People")').html('People <img src="/Img/banner.png" alt="">');`

# database - 如何从多个 SQLite 数据库中选择所有列

> ID：10837315
> 
> 赞同：2
> 
> 时间：2012-05-31T16:11:22.650
> 
> 标签：database, sqlite

我在**SQLite**中对多个数据库进行查询，并且在查询中使用 .* 时遇到问题。我已经成功地使用了 ATTACH 函数来引用这两个数据库：

```
dbOne.execute("ATTACH DATABASE 'dbOne.sql' as db1");
dbOne.execute("ATTACH DATABASE 'dbTwo.sql' as db2"); 
```

这里的这个查询给了我一个语法错误（* 附近的语法错误）：

```
dbOne.execute("SELECT db2.myTable.* FROM db2.myTable"); 
```

我可以`db2.myTable.*`吗？还是我必须一次选择每一列？

```
SELECT db2.myTable.columnA, db2.myTable.columnB, db2.myTable.columnC, etc. 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T07:52:56.223

如果您还没有解决这个问题，这将起作用：

一种）`dbOne.execute("SELECT * FROM db2.myTable");`

b)`dbOne.execute("SELECT abc.* FROM db2.myTable abc");`

此外，当表名在所有附加数据库中是唯一的时，您不必指定数据库名称。

b) 通常在您选择或连接多个表时使用，例如

`SELECT abc.*, xyz.* FROM db2.myTable abc, db1.myOtherTable xyz`

# scala - 带有理解的Scala事务块

> ID：10837317
> 
> 赞同：1
> 
> 时间：2012-05-31T16:11:28.590
> 
> 标签：scala, transactions, persistence, dao

被我创建的 DAO 层卡住了；在单一情况下工作得很好，但是当需要在事务块中保留几个 bean 实例时，我发现我已经把自己编码到了一个角落。为什么？查看下面的 DAO 创建方法：

```
def create(e: Entity): Option[Int] =
  db.handle withSession { implicit ss: Session=>
    catching( mapper.insert(e) ) option match {
      case Some(success) => Some(Query(sequenceID))
      case None => None
    }
  } 
```

会话块中发生的查询设置为自动提交，因此我无法将多个持久性操作包装在事务块中。例如，这是处理新成员订阅的简化理解

```
val result = for{
  u <- user.dao.create(ubean)
  m <- member.dao.create(mbean)
  o <- order.dao.create(obean)
} yield (u,m,o)
result match {
  case Some((a,b,c)) => // all good
  case _ => // failed, need to rollback here
} 
```

我可以手动执行查询，但这很快就会变得丑陋

```
db.handle withSession { implicit ss: Session=>
  ss.withTransaction {
    val result = for{
      u <- safe( UserMapper.insert(ubean) )
      ...
    }
    def safe(q: Query[_]) = 
      catching( q ) option match {
        case Some(success) => Some(Query(sequenceID))
        case None => None
      }
  }
} 
```

因为我最终会重复错误处理，必须在整个应用程序中提供数据库、会话等，而不是封装在 DAO 层中

任何人都在这里有一些关于如何解决这个问题的明智建议？我真的很喜欢 for comprehension 的简洁性，Scala 摇滚 ;-)，想法赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:45:07.510

好的，除非有人有更好的主意，否则这就是我的想法：

由于 DAO 到实体是一对一的关系，并且 ScalaQuery 自动提交在会话块中执行的查询，因此通过我的 DAO 实现不可能在单独的实体上执行多个插入。

解决方法是创建一个不绑定到特定实体的 GenericDAO，它提供事务查询功能，并将错误处理提取到父特征中

```
 def createMember(...): Boolean = {
      db.handle withSession { implicit ss: Session=>
        ss.withTransaction {
          val result = for{
            u <- safeInsert( UserMapper.insert(ubean) )(ss)
            ...
          }
          ... 
```

在控制器层，实现变得`dao.createMember(...)`非常好，imo，事务性插入使用安全的理解，很酷的东西。

# visual-c++ - Bgrdge 图的 GMFBridge 问题

> ID：10837318
> 
> 赞同：0
> 
> 时间：2012-05-31T16:11:29.277
> 
> 标签：visual-c++, directshow, video-capture

我有捕获 mp4 捕获视频的捕获图形应用程序，我想在其中使用 GMFbridge，我构建我的图表如下

第一张图

```
Video Source --> x264vfw - H.264/MPEG-4 AVC Codec -->  GMFBridge Sink Filter --> 
```

第二张图

```
 --> GMF Source Filter -->  GDCL Mux --> Filter Writer 
```

所有过滤器都按照上图连接，但是当我调用 GMFBridge 的 BridgeGraph 方法来连接两个图时，它给了我

```
error : A subscription cannot be stored unless its event class already exists any idea 
```

这个组合有什么问题我应该使用不同的组合吗？还是有其他问题？？

请帮我...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:33:49.343

问题已解决，我只渲染视频流，并添加了对音频和视频流的控制`GMFBridge Controller`，因此我删除了音频流，我的问题得到解决。

谁有这个问题，请交叉检查您的应用程序是否正在重新渲染使用`m_pBridge.AddStream()`方法添加的流，

# shell - Shell 脚本：替换文本

> ID：10837319
> 
> 赞同：0
> 
> 时间：2012-05-31T16:11:33.893
> 
> 标签：shell, sed, replace

机器名称=机器 1

替换： MACHINEDOTS="'uname -n'" 为 MACHINEDOTS="machine1"

我尝试了以下 sed cmd，

sed 's/MACHINEDOTS="'uname -n'"/MACHINEDOTS="'$machineName'"/g' tmp mv -f tmp 路径

显示错误：sed: 无效选项 -- '"'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:23:24.450

当我尝试在 Mac OS X 10.7 上运行您的示例时，我得到一个“未终止的替代模式”，因为您使用了双引号 " 而不是单引号 ' 或反引号 `。

用单引号替换双引号并在 tmp 之后摆脱垃圾（您的意思是 && mv -f tmp path 吗？），如下所示：

```
sed 's/MACHINEDOTS=''uname -n''/MACHINEDOTS="'$machineName'"/g' tmp 
```

有效，但我不能 100% 确定这是否是您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T16:27:49.437

> sed 's/MACHINEDOTS="'uname -n'"/MACHINEDOTS="'$machineName'"/g' tmp mv -f tmp 路径

你的意思是评价`uname -n`？它将需要在反引号中。像这样：

```
$ sed 's/\(MACHINEDOTS="\)'`uname -n`'"/\1'$machineName'"/g' 
```

# flash - 如何将具有“DocumentMain.as”的 swf 文件导入另一个 swf 文件？

> ID：10837333
> 
> 赞同：0
> 
> 时间：2012-05-31T16:12:14.657
> 
> 标签：flash, flash-cs5

我正在使用单独的“DocumentMain.as”代码在 Flash CS5 actionScript3 中创建一个游戏，我想将其导入另一个 swf 文件，即菜单。我想当我点击菜单中的开始时，它会将我带到游戏文件！

这是我使用的代码

```
 btnstart.addEventListener(MouseEvent.CLICK,gamecontent);
function gamecontent(myevent:MouseEvent):void{
    var myURL:URLRequest=new URLRequest("game.swf");
    myLoader.load(myURL);
    myLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, onCompleteHandler);
    function onCompleteHandler(loadEvent:Event):void
    {
        addChild(loadEvent.currentTarget.content);

    }

} 
```

但是，它不起作用，它向我显示了这条消息“TypeError：错误 #1009：无法访问空对象引用的属性或方法。在 DocumentMain()”

拜托我需要你的帮忙！！！非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T20:59:00.813

要找到问题，最简单的方法是尝试在 URLRequest 中添加 game.swf 的完整路径。如果它有效，那么您知道您所要做的就是将其改回“game.swf”，重新将 fla 文件保存在与 game.swf 相同的文件夹中，然后将预览 swf 导出到同一文件夹并重试。当我遇到完全相同的问题时，这对我有用。它似乎没有知道它的根文件夹在哪里。

```
 import flash.net.URLRequest;
    import flash.display.Loader;

  btnstart.addEventListener(MouseEvent.CLICK,gamecontent);
  function gamecontent(myevent:MouseEvent):void{
  var myURL:URLRequest=new URLRequest("file:///c:/yourfolder/folder/game.swf");
  myLoader.load(myURL);
  myLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, onCompleteHandler);
  function onCompleteHandler(loadEvent:Event):void
          {
           addChild(loadEvent.currentTarget.content);            
          }
         } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T22:44:02.097

您可能正在`stage`构造函数中访问`DocumentMain`。这在将 SWF 加载到另一个 SWF 时会引发错误，因为该阶段在子 SWF 中不可用。

将访问阶段的任何代码从`DocumentMain`构造函数移动到`ADDED_TO_STAGE`处理程序，如下所示：

```
public function DocumentMain()
{
    addEventListener(Event.ADDED_TO_STAGE, addedToStageHandler);
}

public function addedToStageHandler(ev:Event)
{
    trace(stage);
    //Code that was previously in the constructor
} 
```

# ios - 如何从服务器获取管道字符串并在 xcode 中解析它？

> ID：10837334
> 
> 赞同：0
> 
> 时间：2012-05-31T16:12:18.840
> 
> 标签：ios

我在服务器上有数据，我正在尝试将这些数据作为管道字符串获取。我编写了服务器端代码，但我不知道如何检索这些数据并在 iOS 中解析它。这是我的[数据](http://www.tefaltv.com/ios/iOshandler.ashx?act=10)示例。有什么文章或代码可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:07:26.267

一些起点：要从服务器检索数据流，请查看 Apple 的[Stream Programming Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Streams/Streams.html#//apple_ref/doc/uid/10000188i)。要解析您的数据，如果您有有效的 XML 数据，您可以使用`NSScanner`（[字符串编程指南：扫描程序](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Strings/Articles/Scanners.html#//apple_ref/doc/uid/20000147-BCIEFGHC)）或`CFXMLParser`（[Core Foundation 的 XML 编程主题）。](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFXML/CFXML.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T23:18:00.783

您的输出似乎不是像 xml 或 json 这样的有效格式。但是，如果您在应用程序中将内容作为字符串使用，请使用此代码段

```
- (void)viewDidLoad{
    [super viewDidLoad];

    NSURLRequest *site_request = 
        [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://...."]
                         cachePolicy:NSURLRequestUseProtocolCachePolicy
                     timeoutInterval:10.0];

    NSURLConnection *site_connection = 
        [[NSURLConnection alloc] initWithRequest:site_request
                                        delegate:self];

}

- (void)connection:(NSURLConnection *)site_connection didReceiveData:(NSData *)data{

    NSString *site_response = 
        [[NSString alloc] initWithData:data
                              encoding:NSUTF8StringEncoding];

    NSLog(@"OUTPUT: %@", site_response);
} 
```

日志将输出控制台内的字符串。

# asp.net - 域名及发展时间

> ID：10837336
> 
> 赞同：0
> 
> 时间：2012-05-31T16:12:21.787
> 
> 标签：asp.net

有没有办法在win 7（甚至win2008）中通过域名开发网站？我的意思是在开发时（在 VS 2010 中），当我按下 F5 时，我看到我的应用程序在一个真实的域名下，例如： [MyDomainName.com] 而不是 [localhost\ProjectName]

非常感谢您的反馈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:31:06.020

您应该避免对您的网址进行硬编码，以便可以在不破坏您的代码的情况下更改域。而不是使用域信息构建 url，只需将它们构建为相对链接（ ~/pagename.aspx 而不是 localhost/project/pagename.aspx ），这样网站发布的位置就无关紧要了。如果您需要为需要完整 url 的东西构建完整 url，您可以使用以下代码获取站点的当前位置。

```
Private m_serverName As String = ""

Private Sub WebForm1_InitComplete(sender As Object, e As System.EventArgs) Handles Me.InitComplete

  Dim tempPort As String = Context.Request.ServerVariables("SERVER_PORT").Trim

  If tempPort = "80" Or tempPort = "443" Then
     m_serverName = Context.Request.ServerVariables("SERVER_NAME")
  Else
     m_serverName = String.Format("{0}:{1}", Context.Request.ServerVariables("SERVER_NAME"), tempPort)
  End If

  If Request.IsSecureConnection = True Then
     m_serverName = String.Format("https://{0}", m_serverName)
  Else
     m_serverName = String.Format("http://{0}", m_serverName)
  End If
End Sub 
```

然后，当您需要构建一个 url 时，请使用以下内容：

```
Dim tempUrl As String = String.Format("{0}/pagename.aspx", m_serverName) 
```

# c - C 语言中的 Windows 程序不工作

> ID：10837337
> 
> 赞同：-2
> 
> 时间：2012-05-31T16:12:26.483
> 
> 标签：c, windows

我需要用 C 编写一些程序，但我无法让窗口工作。它提出了大约 30 个错误，主要是说；当有一个，没有存储类或类型说明符，以及预期的声明时，应该是预期的，不确定这些是什么意思。我看过两个教程，它们看起来都非常相似，而我的看起来一样，所以不确定这些缺失的东西是什么。

这是我的代码

```
#include <windows.h>

LRESULT CALLBACK WindowFunc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)
{
    switch(msg)
    {
        case WM_CLOSE:
            DestroyWindow(hwnd);
        break;
        case WM_DESTROY:
            PostQuitMessage(0);
        break;
        default:
            return DefWindowProc(hwnd, msg, wParam, lParam);
    }
    return 0;
}

int WINAPI WinMain(HINSTANCE hThisInst, 
                         HINSTANCE hPrevInst, 
                         LPSTR lpszArgs, 
                         int nWinMode);

{
WNDCLASS wcls;
HWND hwnd;
MSG msg;

LPCWSTR szClassName = L"ThreadsProgram";
LPCWSTR szWinName = L"My Threads Program"

    //Register Class
  wcls.style         =0; 
  wcls.lpfnWndProc   =WindowFunc;
  wcls.cbClsExtra    =0;
  wcls.cbWndExtra    =0;
  wcls.hInstance     =hThisInst;
  wcls.hIcon         =LoadIcon(NULL, IDI_APPLICATION);
  wcls.hCursor       =LoadCurser(NULL, IDC_ARROW);
  wcls.hbrBackground =(HBRUSH)GetStockObject(WHITE_BRUSH);
  wcls.lpszMenuName  =NULL;
  wcls.lpszClassName =szClassName;

      if(!RegisterClass(&wcls))
    {
        MessageBox(NULL, "Window Registration Failed!",
            MB_ICONEXCLAMATION | MB_OK);
        return 0;
    }

//Make Window 
hwnd = CreateWindow(szClassName,
szWinName,
WS_OVERLAPPINGWINDOW,
100,
100,
400,
400,
HWND_DESKTOP,
NULL,
hThisInst,
NULL);

//Show Window

if(hwnd == NULL)
    {
        MessageBox(NULL, "Window Failed!",
            MB_ICONEXCLAMATION | MB_OK);
        return 0;
    }

ShowWindow(hwnd, nWinMode);
UpdateWindow(hwnd);

//Main Message Loop
while(GetMessage(&msg, NULL, 0, 0))
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }
    return (int)msg.wParam;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T16:15:48.213

我看到的第一个问题在这里：

```
int WINAPI WinMain(HINSTANCE hThisInst, 
                     HINSTANCE hPrevInst, 
                     LPSTR lpszArgs, 
                     int nWinMode);      /* <---- This semi-colon causes grief! */

{
WNDCLASS wcls; 
```

由于后面的分号，您有一个函数声明`int nWinMode);`。

去掉它。

也可能存在其他问题；我没有进一步看，也不打算这样做。如果您自己的代码审查没有帮助，编译器将指导您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T16:19:15.940

那里有很多错别字。

1.  WinMain 后的分号

2.  MessageBox() 函数采用 3 而不是 4 参数。

3.  LPWCSTR 参数

4.  带有 nCmdShow 的 ShowWindow() 不...显示

5.  WS_OVERPLAPPEDWINDOW（不是 WS_OVERLAPPINGWINDOW）

6.  LoadCursor 的 LoadCursor 插入

现在应该可以工作了。下次仔细打字

```
#include <windows.h>

LRESULT CALLBACK WindowFunc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)
{
     switch(msg)
     {
         case WM_CLOSE: DestroyWindow(hwnd); break;
         case WM_DESTROY: PostQuitMessage(0); break;
         default: return DefWindowProc(hwnd, msg, wParam, lParam);
     }
     return 0;
}

int WINAPI WinMain(HINSTANCE hThisInst,  HINSTANCE hPrevInst,  LPSTR lpszArgs,  int nWinMode)
{
    WNDCLASS wcls;
    HWND hwnd;
    MSG msg;

    LPCSTR szClassName = "ThreadsProgram";
    LPCSTR szWinName = "My Threads Program";

    //Register Class
    wcls.style         =0; 
    wcls.lpfnWndProc   =WindowFunc;
    wcls.cbClsExtra    =0;
    wcls.cbWndExtra    =0;
    wcls.hInstance     =hThisInst;
    wcls.hIcon         =LoadIcon(NULL, IDI_APPLICATION);
    wcls.hCursor       =LoadCursor(NULL, IDC_ARROW);
    wcls.hbrBackground =(HBRUSH)GetStockObject(WHITE_BRUSH);
    wcls.lpszMenuName  =NULL;
    wcls.lpszClassName =szClassName;

     if(!RegisterClassA(&wcls))
    {
        MessageBoxA(NULL, 0, "Window Registration Failed!", MB_ICONEXCLAMATION | MB_OK);
        return 0;
    }

    //Make Window 
    hwnd = CreateWindowA(szClassName, szWinName,
       WS_OVERLAPPEDWINDOW,
       100, 100, 400, 400,
       HWND_DESKTOP,
       NULL, hThisInst, NULL);

    //Show Window

    if(hwnd == NULL)
    {
        MessageBoxA(NULL, 0, "Window Failed!", MB_ICONEXCLAMATION | MB_OK);
        return 0;
    }

    ShowWindow(hwnd, SW_SHOW/*nWinMode*/);
    UpdateWindow(hwnd);

    //Main Message Loop
    while(GetMessage(&msg, NULL, 0, 0))
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }
    return (int)msg.wParam;
} 
```

# sql - 如何创建一个很长的 INSERT sql INTO EXCEL

> ID：10837340
> 
> 赞同：1
> 
> 时间：2012-05-31T16:12:32.013
> 
> 标签：sql, oracle

oracle：如何创建一个很长的 INSERT sql INTO EXCEL 提示 excel 给出：你的 sql 很大，使用连接函数

请指导我如何做到这一点

例子

```
="insert into customers(20 columns one after another) values('" &B3 &"','" & C3 & "','"&D3&"'.........20th value); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:25:08.880

在 Excel 表中使用这些值：

```
A1 = INSERT INTO mytable(id, col2, col3, col4, col5) VALUES ('
A2 = '',' 
```

和 A4:E4 中的数据，如下所示：

```
A4 = testID
B4 = value
C4 = value2
D4 = value3
E4 = value4 
```

您可以像这样构建另一列：

```
G4 = =CONCATENATE($A$1,A4,$A$2,B4,$A$2,C4,$A$2,D4,$A$2,E4,"');") 
```

评估结果如下：

```
INSERT INTO mytable(id, col2, col3, col4, col5) VALUES ('testID','value','value2','value3','value4'); 
```

使用引用可以在将来更轻松地添加其他列，因为您不必记住在对公式文本进行更改后“填写”整列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T16:18:02.580

使用 Excel CONCATENATE 函数代替连接符号 &。

```
=CONCATENATE("insert into customers(20 columns one after another) values('", B3, "','", C3, "','", D3, "'.........20th value") 
```

# git - 在 Windows 8 上运行 git

> ID：10837348
> 
> 赞同：2
> 
> 时间：2012-05-31T16:12:58.110
> 
> 标签：git, windows-8

我在 Windows 8 上使用 git，并且在移动添加到源代码管理的文件时遇到问题。如果在运行 Windows 8 时将文件添加到我的计算机上，则文件未完全添加。例如，我的意思是我可以使用 gitk 查看文件的版本历史记录。但是，如果我执行 git-move，我会得到文件不受版本控制的答案，因此我无法移动文件。我用谷歌搜索了这个问题，找不到其他人有这个问题。我只知道我的同事有完全相同的问题。（我使用的是 git 版本 1.7.10.3）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:14:40.177

也许这是文件名案例的一个技巧？对于`git` `FileName.TXT`和`filename.txt`是两个完全不同的文件，而对于 Windows，它们是完全一样的。

请检查您在磁盘和`git`索引中使用的文件的情况。查看大小写是否有任何区别，然后使用`git`索引中使用的文件名作为`git`命令的参数。

# sql - 如何删除这些条件？

> ID：10837350
> 
> 赞同：1
> 
> 时间：2012-05-31T16:13:08.700
> 
> 标签：sql, sql-server-2005, sql-delete

如何从没有主键的表中删除满足多个条件的行？（实际上主键是由每一列组成的）

经过这么多尝试，我有一个代码首先创建一个临时表，在其中插入我要删除的行，最后我尝试从原始表中删除符合与临时表相比条件的行。

但它给了我关于无法链接几个部分标识符#temp.idCarga 的错误

也许这很容易，但我已经尝试了很多时间，但我无法正确集中注意力。

```
CREATE TABLE #TEMP 
(
    CC int,
    idCarga int, 
    Tipo nvarchar(50),
    Importe float,
    Bloque nvarchar(50),
    idsistema int
)

INSERT INTO #TEMP(CC,idCarga,Importe,Bloque,Tipo,IdSistema)
select distinct CI.CC,CI.idCarga,CI.Importe,CI.Bloque,CI.Tipo,CI.idSistema
from CONT_INGRESOS_InformeMayor CI
INNER JOIN 
(
    SELECT idCarga,CC,Bloque,Importe,TIpo
    FROM CONT_INGRESOS_InformeMayor
) CI2 
    ON CI.CC = CI2.CC 
    AND CI.Bloque = CI2.Bloque 
    AND CI.TIpo <> CI2.Tipo
WHERE CI.idCarga = @idCarga 
    AND CI2.idCarga = @idCarga 
    AND CI.Importe = 0

DELETE 
FROM CONT_INGRESOS_InformeMayor 
WHERE idCarga = #temp.idCarga 
    AND tipo = #temp.tipo 
    AND importe = #temp.importe 
    and bloque = #temp.bloque 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T16:20:29.730

您错过了您的`DELETE`. 试试这个：

```
DELETE _d
FROM CONT_INGRESOS_InformeMayor AS _d
INNER JOIN #temp AS _t
    ON _d.idCarga = _t.idCarga 
    AND _d.tipo = _t.tipo 
    AND _d.importe = _t.importe 
    AND _d.bloque = _t.bloque 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T16:20:41.960

您的餐桌`DELETE`上缺少一个`JOIN``#temp`

```
DELETE t1
FROM CONT_INGRESOS_InformeMayor t1
INNER JOIN #temp t
    ON t1.idCarga = t.idCarga 
        AND t1.tipo = t.tipo 
        AND t1.importe = t.importe 
        and t1.bloque = t.bloque 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T07:27:19.353

另一方面，您可以尝试在不涉及临时表的情况下删除行：

```
DELETE FROM CI
from CONT_INGRESOS_InformeMayor CI
INNER JOIN 
(
    SELECT idCarga,CC,Bloque,Importe,TIpo
    FROM CONT_INGRESOS_InformeMayor
) CI2 
    ON CI.CC = CI2.CC 
    AND CI.Bloque = CI2.Bloque 
    AND CI.TIpo <> CI2.Tipo
WHERE CI.idCarga = @idCarga 
    AND CI2.idCarga = @idCarga 
    AND CI.Importe = 0 
```

# android - Android在第三方意图中启动不起作用

> ID：10837353
> 
> 赞同：0
> 
> 时间：2012-05-31T16:13:14.190
> 
> 标签：android, android-intent, camera

我正在尝试在单击按钮时启动相机应用程序，但我不想让它表现得像 lauc´ncher 启动的那样，但是当我调用我的代码时，应用程序只是关闭并且相机是'没有开始。甚至没有错误代码。

代码 ：

```
if(v == camera)
    {

        //Intent in=new Intent(MediaStore.ACTION_IMAGE_CAPTURE); 

            // this.startActivity(in);

        Intent startupIntent = new Intent();
        ComponentName distantActivity = new ComponentName("com.android.camera","com.android.camera/.Camera");
        startupIntent.setComponent(distantActivity);
        startupIntent.setAction(Intent.ACTION_MAIN);
        startActivity(startupIntent);    

        finish();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:20:56.690

使用`android.intent.action.VIEW`而不是`Intent.ACTION_MAIN`：

```
 Intent startupIntent = new Intent();

    ComponentName distantActivity= new ComponentName("YOUR_CAMRA_APP_PACKAGE","YOUR_CAMRA_APP_PACKAGE.ACTIVTY_NAME");

// LIKE IN LG  DEVICE WE HAVE AS

//ComponentName distantActivity= new //ComponentName("com.lge.camera","com.lge.camera.CameraApp");

    startupIntent .setComponent(distantActivity);

    startupIntent .setAction("android.intent.action.VIEW");

    startActivity(startupIntent); 
```

# jquery - jQuery - 可调整大小 + 可拖动，不添加滚动（左，上）

> ID：10837356
> 
> 赞同：3
> 
> 时间：2012-05-31T16:13:21.403
> 
> 标签：jquery, jquery-ui-draggable, jquery-ui-resizable

我有一个拖动和可调整大小的框的问题。它工作正常，可以很好地拖动和调整，但我有一个包含这些元素的容器，一旦我触发溢出并尝试调整 div，它就会失败并重置回容器宽度。[http://jsfiddle.net/JTTYM/26/](http://jsfiddle.net/JTTYM/26/)

![预览](../Images/7aaa7e8d927726229650ca421c356261.png)

* * *

***更新:: 好的，也许我描述的问题是错误的，转到这个网址：http: [//jsfiddle.net/JTTYM/52](http://jsfiddle.net/JTTYM/52)并滚动找到绿色框，然后尝试调整它的大小。一旦调整大小，溢出滚动条就会消失。如上所述，就像溢出值不计入调整大小***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T13:40:44.583

这来自您的`.layer { position: absolute; }`.

当您使用绝对位置时，请记住始终在父级上设置相对位置，否则您会遇到很多问题。

在您的情况下，只需添加此 CSS ：

```
.layers_group {
   position: relative;   
} 
```

例子：

```
$(function() {
    $(".live_resizable").resizable();
    $(".live_draggable").draggable();
});
```

```
.main {    
    position:absolute;
    right:25px;
    left: 25px;
    top: 25px;
    bottom: 25px; /*200*/
    overflow:auto;
    border:2px solid red;
}
.layers_group {
   position: relative;   
}
#stuff {
    width: 600px;
}
.layer {    
    background-color: green;
    width: 100px; 
    height: 100px; 
    top: 900px; 
    left: 900px;
    cursor:move;
}

/* Jquery to add hangles i think */
.ui-resizable { position: absolute;}
.ui-resizable-handle { position: absolute;font-size: 0.1px; display: block;  }
.ui-resizable-disabled .ui-resizable-handle, .ui-resizable-autohide .ui-resizable-handle { display: none; }
.ui-resizable-n { cursor: n-resize; height: 7px; width: 100%; top: -5px; left: 0; }
.ui-resizable-s { cursor: s-resize; height: 7px; width: 100%; bottom: -5px; left: 0; }
.ui-resizable-e { cursor: e-resize; width: 7px; right: -5px; top: 0; height: 100%; }
.ui-resizable-w { cursor: w-resize; width: 7px; left: -5px; top: 0; height: 100%; }
.ui-resizable-se { cursor: se-resize; width: 12px; height: 12px; right: 1px; bottom: 1px; background:url(images/corner.gif); }
.ui-resizable-sw { cursor: sw-resize; width: 9px; height: 9px; left: -5px; bottom: -5px; }
.ui-resizable-nw { cursor: nw-resize; width: 9px; height: 9px; left: -5px; top: -5px; }
.ui-resizable-ne { cursor: ne-resize; width: 9px; height: 9px; right: -5px; top: -5px;}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<link href="https://code.jquery.com/ui/1.8.18/themes/smoothness/jquery-ui.css" rel="stylesheet"/>
<script src="https://code.jquery.com/ui/1.8.18/jquery-ui.min.js"></script>
<div class="main">
    <div id="stuff">
        <div class="layers_group aaasdasd">
            <div class="live_draggable live_resizable layer"></div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:55:00.067

您必须应用约束运动。[在这里](http://jqueryui.com/demos/draggable/#constrain-movement)检查

编辑：现场演示：http: [//jsfiddle.net/JTTYM/51/](http://jsfiddle.net/JTTYM/51/)

# internet-explorer - ie8标准兼容模式下的css box-sizing

> ID：10837360
> 
> 赞同：0
> 
> 时间：2012-05-31T16:13:38.997
> 
> 标签：internet-explorer, css, internet-explorer-8

我知道 Internet Explorer 传统上通过在总框宽度中包含填充和边框宽度来实现 CSS 框大小“错误”。当页面以标准兼容模式呈现时，IE8+“修复”了此框大小，并使用 -ms-box-sizing 属性实现 CSS3 框大小。

但这里有一些有趣的东西。以下代码呈现了一些具有各种宽度 + 填充 + 边框 + 框大小组合的 div：

```
<html>
<head>
    <style type="text/css">
        div { margin-bottom: 1em; background-color: #5555e9; }

        #test1 { width: 500px; }
        #test2 { width: 500px; padding: 10px; }
        #test3 { width: 500px; padding: 10px; border: 5px solid red; }
        #test4 { width: 500px; padding: 10px; border: 5px solid red;
            -ms-box-sizing: border-box;
            -moz-box-sizing: border-box;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
        }
    </style>
</head>
<body>
    <div id="test1">Hello World!</div>
    <div id="test2">Hello World!</div>
    <div id="test3">Hello World!</div>
    <div id="test4">Hello World!</div>
</body> 
```

在 IE8 quirks 模式下，所有 div 以相同的 500px 宽度输出，正如 IE 对盒子大小的古怪计算所预期的那样：

![以 IE8 怪癖模式呈现的 html 代码](../Images/e0fd8fc4e889dc6392c29b9ebdc4fc32.png)

但是，如果我添加以下 doctype 声明以在 IE8 标准合规模式下呈现：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

输出变成这样：

![在此处输入图像描述](../Images/adc4d4f1c860517265ce6869ecaeb245.png)

请注意，最后一个框与第三个框的尺寸相同，即使 box-sizing 属性使用 css 设置为边框框。我真的希望 IE8 在标准合规模式下使用边框框方法，但是鉴于这个测试，我不知道如何实现它。有人有建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T19:28:39.557

感谢 Knyri 的回答：

问题是我的 IE8 浏览器实例默认以 IE 7 标准模式呈现，而不是 8。（IE7 不支持 CSS3 box-sizing。）我能够通过强制页面以 IE 8 标准兼容模式呈现来解决此问题。我在我的 html 头标签中添加了以下内容：

```
 <meta http-equiv="x-ua-compatible" content="IE=8"/> 
```

它必须在 html 头标签中的其他标签之前，除了标题和其他元标签。这导致以下渲染：

![在此处输入图像描述](../Images/131dd3552d0be05cc748dfeced5f35ca.png)

如您所见，前三个框使用 content-box box-sizing（W3C 标准）呈现，第四个使用边框框呈现，因为它是使用 CSS 显式设置的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T16:41:29.597

在标准模式下，它遵循正确的盒子模型。

```
---------------------------------------------
|  margin                                   |
|  ---------------------------------------  |
|  |Border                               |  |
|  |  ---------------------------------- |  |
|  |  |padding                         | |  |
|  |  | -----------------------------  | |  |
|  |  | |Content                     | | |  |
|  |  | |____________________________| | |  |
|  |  |________________________________| |  |
|  |_____________________________________|  |
|___________________________________________| 
```

CSS 中的宽度和高度会影响标准模式下内容区域的宽度和高度，以及在 quirks 模式下会影响边框框的宽度和高度。

# java - java压力测试和内存

> ID：10837365
> 
> 赞同：3
> 
> 时间：2012-05-31T16:13:51.413
> 
> 标签：java, memory, heap-memory

我正在测试一个启动restlet的应用程序，当一个http请求到达restlet时，启动一个新线程并处理请求，应用程序创建一个新对象并存储在地图中（对于压力测试，我正在使用Jmeter ，我看到 java 进程内存有问题，我不知道问题是堆、堆栈还是其他问题，让我们展示一下问题：

我多次启动相同的案例，首先运行我的项目（当然是空缓存）：

1.  500 个线程 -> 线程的平均时间为 1900 毫秒
2.  500 个线程 -> 线程的平均时间为 600 毫秒
3.  500 个线程 -> 线程的平均时间为 598 毫秒
4.  500 个线程 -> 线程的平均时间是 670 毫秒 ....

如您所见，我的问题是第一次执行所需的时间比其他执行要长得多。每个线程都将实例化对象存储在 Map 中，并且当它为空时似乎工作很慢。有人知道谁可能会去吗？我试图增加 jvm 的堆启动内存，但不起作用。如果有人知道任何可以阅读以帮助我欣赏它的参考资料

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T16:16:57.353

我怀疑您的 JVM 在第一次执行时没有预热。尝试添加`-XX:+PrintCompilation`以查看代码是否在第一个测试中被编译，而不是第二个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T16:28:35.027

在对 Java 应用程序进行性能测试时，您必须始终确保 JVM 有时间“热身”。这是由于现代 JVM（例如 Oracle 的[HotSpot JVM](http://en.wikipedia.org/wiki/HotSpot)在代码运行时进行的优化）所致。

要获得有意义的结果，您需要运行足够的测试用例以使时间稳定，然后再为给定的配置/负载获取结果。

看：

[http://stuq.nl/weblog/2009-01-28/why-many-java-performance-tests-are-wrong](http://stuq.nl/weblog/2009-01-28/why-many-java-performance-tests-are-wrong)

[http://buytaert.net/files/oopsla07-georges.pdf](http://buytaert.net/files/oopsla07-georges.pdf)

# c# - 在 C#.net 中读取 XML 文件

> ID：10837372
> 
> 赞同：0
> 
> 时间：2012-05-31T16:14:15.083
> 
> 标签：c#, xml, visual-studio-2008

我正在尝试从 192.com 读取 XML 响应。

这是对客户详细信息的验证。

XML 响应设置如下（已删除客户详细信息）：

```
<?xml version="1.0"?>
<Search Type="Result">
  <CountryCode>GBR</CountryCode>
  <Person>
    <Name>
      <Forename>XXXXX</Forename>
      <Surname>XXXXX</Surname>
    </Name>
    <DateOfBirth>XXXX-XX-XX</DateOfBirth>
    <Age>XX</Age>
  </Person>
  <Addresses>
    <Address Current="1">
      <Premise>X</Premise>
      <Postcode>XX99 9XX</Postcode>
      <CountryCode>GBR</CountryCode>
    </Address>
  </Addresses>
  <SearchOptions>
    <ProductCode>ProveID</ProductCode>
  </SearchOptions>
  <OurReference>XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</OurReference>
  <SearchDate>2012-05-30T12:39:55</SearchDate>
  <Result>
   <Summary>
      <ReportSummary>
        <DatablocksSummary>
          <DatablockSummary>
            <Name>CreditReference</Name>
            <Decision>1</Decision>
          </DatablockSummary>
        </DatablocksSummary>
      </ReportSummary>
    </Summary>
    <CreditReference Type="Result">
      <Summary>
        <Decision>1</Decision>
        <DecisionReasons>
          <DecisionReason>
            <Element>CreditReferenceSummary/TotalNumberOfVerifications</Element>
            <Decision>1</Decision>
          </DecisionReason>
          <DecisionReason>
            <Element>CreditReferenceSummary/OpenAccountsMatch</Element>
            <Decision>1</Decision>
          </DecisionReason>
          <DecisionReason>
            <Element>CreditReferenceSummary/DateOfBirthMatch</Element>
            <Decision>1</Decision>
          </DecisionReason>
          <DecisionReason>
            <Element>CreditReferenceSummary/ElectoralRollMatch</Element>
            <Decision>-1</Decision>
          </DecisionReason>
          <DecisionReason>
            <Element>CreditReferenceSummary/ElectoralRollDateOfBirthMatch</Element>
            <Decision>-1</Decision>
          </DecisionReason>
          <DecisionReason>
            <Element>CreditReferenceSummary/TelephoneDirectoryMatch</Element>
            <Decision>1</Decision>
          </DecisionReason>
          <DecisionReason>
            <Element>CreditReferenceSummary/BOEMatch</Element>
            <Decision>-1</Decision>
          </DecisionReason>
          <DecisionReason>
            <Element>CreditReferenceSummary/PEPMatch</Element>
            <Decision>-1</Decision>
          </DecisionReason>
          <DecisionReason>
            <Element>CreditReferenceSummary/OFACMatch</Element>
            <Decision>-1</Decision>
          </DecisionReason>
          <DecisionReason>
            <Element>CreditReferenceSummary/DeceasedMatch</Element>
            <Decision>-1</Decision>
          </DecisionReason>
          <DecisionReason>
            <Element>CreditReferenceSummary/COAMatch</Element>
            <Decision>-1</Decision>
          </DecisionReason>
          <DecisionReason>
            <Element>CreditReferenceSummary/CIFASMatch</Element>
            <Decision>-1</Decision>
          </DecisionReason>
          <DecisionReason>
            <Element>CreditReferenceSummary/NoOfCCJ</Element>
            <Decision>-1</Decision>
          </DecisionReason>
          <DecisionReason>
            <Element>CreditReferenceSummary/NoOfOpenAccountsLenders</Element>
            <Decision>1</Decision>
          </DecisionReason>
        </DecisionReasons>
      </Summary>
      <CreditReferenceSummary>
          <CreditReferenceDecision/>
          <CreditReferenceScore/>
          <TotalNumberOfVerifications>7</TotalNumberOfVerifications>
          <OpenAccountsMatch>1</OpenAccountsMatch>
          <DateOfBirthMatch>1</DateOfBirthMatch>
          <ElectoralRollMatch>0</ElectoralRollMatch>
          <ElectoralRollDateOfBirthMatch>0</ElectoralRollDateOfBirthMatch>
          <TelephoneDirectoryMatch>1</TelephoneDirectoryMatch>
          <PhoneNumberMatch>0</PhoneNumberMatch>
          <DriverLicenceMatch/>
          <PassportMatch/>
          <DFATMatch/>
          <BOEMatch>0</BOEMatch>
          <PEPMatch>0</PEPMatch>
          <OFACMatch>0</OFACMatch>
          <DeceasedMatch>0</DeceasedMatch>
          <COAMatch>0</COAMatch>
          <CIFASMatch>0</CIFASMatch>
          <GoneAwayMatch/>
          <HighRiskAddressMatch/>
          <CommercialEntitiesAtAddressMatch/>
          <NoOfCommercialEntitiesAtAddress/>
          <NoOfCCJ>0</NoOfCCJ>
          <NoOfOpenAccountsLenders>5</NoOfOpenAccountsLenders>
          <IDVerified/>
      </CreditReferenceSummary>
      <CreditReferenceDetails>
        <StandardisedAddress Current="1">
          <SubPremise/>
          <Premise>999999</Premise>
          <SubStreet/>
          <Street>XXXXXXXXX</Street>
          <SubLocality/>
          <Locality>XXXXXXXXXXXXXXXXXXX</Locality>
          <PostTown>XXXXXXXXXXXXXXXXXXX</PostTown>
          <Region>XXXXXXXXXXXXXXX</Region>
          <Postcode>XX999XX</Postcode>
          <CountryCode>GBR</CountryCode>
        </StandardisedAddress>
      </CreditReferenceDetails>
    </CreditReference>
  </Result>
</Search> 
```

我需要从此 XML 中提取以下元素`<CreditReferenceSummary>`

*   `<TotalNumberOfVerifications>7</TotalNumberOfVerifications>`
*   `<OpenAccountsMatch>1</OpenAccountsMatch>`
*   `<DateOfBirthMatch>1</DateOfBirthMatch>`
*   `<DeceasedMatch>0</DeceasedMatch>`
*   `<NoOfOpenAccountsLenders>5</NoOfOpenAccountsLenders>`

非常感谢任何帮助。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:16:12.083

我会使用 LINQ 来读取 XML

看一下

[LINQ 读取 XML](https://stackoverflow.com/questions/670563/linq-to-read-xml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T16:47:53.840

假设根元素称为 root，因为您没有在示例中显示它，您可以使用 XPath 来读取所需元素的值：

```
XmlDocument doc = new XmlDocument();
doc.LoadXml(responseXml);
int totalNumberOfVerifications = int.Parse(doc.SelectSingleNode("Search/Result/CreditReference/CreditReferenceSummary/TotalNumberOfVerifications"));
// etc. 
```

或者，您也可以使用 XML 反序列化来使用 XML 中的数据填充对象。我相信你可以通过四处搜索找到很多这样的例子：

[http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T10:43:30.223

您可以使用此库和 XPath 来获取值：[https ://github.com/ChuckSavage/XmlLib/](https://github.com/ChuckSavage/XmlLib/)

```
XElement root = XElement.Parse(string); // or .Load(file)
int TotalNumberOfVerifications = root.XGetElement("//TotalNumberOfVerifications", 0);
int OpenAccountsMatch = root.XGetElement("//OpenAccountsMatch", 0);
int DateOfBirthMatch = root.XGetElement("//DateOfBirthMatch", 0);
int DeceasedMatch = root.XGetElement("//DeceasedMatch", 0);
int NoOfOpenAccountsLenders = root.XGetElement("//NoOfOpenAccountsLenders", 0); 
```

XGetElement 具有以下语法：

```
public T XGetElement<T>(xpath search string, default value to use if not found, param objects for search) 
```

# c# - LoginView 并将凭据传递给 Powershell

> ID：10837377
> 
> 赞同：0
> 
> 时间：2012-05-31T16:14:34.943
> 
> 标签：c#, asp.net, powershell

我有一个 ASP.NET C# Web 应用程序，其登录控件通过 AD 进行身份验证。是否可以在 Powershell cmd 上使用登录控件的凭据，我需要在不被要求输入密码的情况下指定凭据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T18:44:19.707

我找到了一个解决方案，但我不知道它有多安全。

```
string un = System.Web.HttpContext.Current.Session["UserName"].ToString();

string pw = System.Web.HttpContext.Current.Session["Password"].ToString();

sText += "$securePasssword = ConvertTo-SecureString \"" + pw + "\" -AsPlainText -Force  \n";

sText += "$credentials = New-Object System.Management.Automation.PSCredential ($un, $securePasssword) \n";

sText += "$Session = New-PSSession -ConfigurationName Microsoft.Exchange -ConnectionUri $url -Authentication Kerberos -Credential $credentials \n";

sText += "Import-PSSession $Session \n"; 
```

建议？

# ruby-on-rails - 如何防止从外部网站/网址加载的图像减慢我在 ruby on rails 中的应用程序页面加载时间？

> ID：10837378
> 
> 赞同：1
> 
> 时间：2012-05-31T16:14:43.040
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems, ruby-on-rails-3.2

我使用 Ruby Open Graph Protocol Gem 来抓取与 YouTube、Vimeo、Metacafe 和 Dailymotion 视频相关的图像以及它们的标题和描述。这些图像显示时带有播放按钮，当用户单击图像时，它使用 ajax 加载和播放图像的相关视频。

无论如何，我注意到我的页面在刷新后需要超过 15 秒才能加载。当我删除所有附有视频（图像）的微博时，页面加载时间恢复正常。

当用户发布微博时，他们可以链接到他们想要包含在微博中的视频，并且该链接/url 的 url 存储在我的数据库中设置的 microposts 表的链接列中。

在我看来，我将当前正在循环的微帖子的链接传递到我的辅助方法中，以获取视频的开放图形协议对象。然后从返回的对象中获取图像属性并使用 image_tag 助手来显示相关图像。

```
image_tag get_video_data(micropost.link).image 
```

**这就是我与开放图形协议 gem 进行通信的方式.. 助手：**

```
def get_video_data(url)
  OpenGraph.fetch(url)
end 
```

无论如何，这一切都会大大减慢我的页面加载时间。我想知道是否有办法解决这个问题？我认为这个问题是由于必须从不同的 URL 加载这些单独的图像引起的。我这样说是因为当我删除相关的微博并重新加载我的页面时，它的加载时间又恢复了正常。位于我的应用程序中的图像不会导致任何问题。

当用户发布微博时，他们基本上将他们希望添加到帖子中的视频链接粘贴到其中，然后将视频的图像显示回给他们，他们点击发布并发布微博。

我想知道是否应该将该图像上传到我的应用程序，这样我就可以显示以下视频的图像：

```
image_tag micropost.video_image 
```

这样，页面将快速加载，因为它不需要从外部 URL 中提取图像。

我不太确定大型网站是如何做到这一点的，例如 fb、google+，但我想知道如何以及在可能的情况下获得解决方案，谢谢。

亲切的问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T16:46:37.327

这是因为 OpenGraph.fetch(url) 会发起一个 http 请求来获取必要的数据来查找图像标签。由于这必须在您的操作呈现期间发生，因此在它们全部完成之前，您不能向客户端发送任何信息。

虽然有很多方法可以解决这个问题，但我建议创建一个新操作，给定一个 opengraph 标识符将返回 opengraph 数据（基本上将辅助方法放入控制器中）并且仅将标识符输出到主操作的视图 html 中。然后，在 javascript 中，找到所有这些并执行 AJAX 请求以获取 OpenGraph 数据并在获得响应后更新页面的 HTML。这将允许浏览器并行执行 http 请求，同时也不会阻塞页面的呈现。对于奖励积分，您可以将 OpenGraph 响应缓存在 memcache 或具有合理到期时间的东西中，并节省每次都必须从您的应用程序发出 HTTP 请求的延迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T17:27:12.180

假设

*   video_image 带有 db 列的回形针
*   用于后台处理的延迟作业

基本代码可能如下所示：

```
class Micropost
   # 
   has_attached_file :video_image, :default_url => "/path/to/progress_image"

   after_save :fetch_external_video 

 protected

   def fetch_video_image 
     img = OpenGraph.fetch(url)
     reload.video_image = img
     save!
   end
   # put in background 
   handle_asyncronously :fetch_video_image

end 
```

那么你可以在你的视图中使用

```
image_tag micropost.video_image.url 
```

这将在仍在获取视频时显示默认 img。即使 url 没有改变，这个简单的解决方案也会在每次保存时重新获取图像。

如果您的用户可能会重复使用相同的链接，那么您最好

*   将视频图像提取到新类
*   有 micropost :has_one video_image，可能多态为 video_linkable
*   将 fetch_video_image 作为 after_create 回调
*   你使用 micropost.video_image.find_or_create_by_url(url)

有了这个，您可以制作多个指向各种对象的视频链接，而无需重复和仅获取一次。

# html - 是否有在部署到静态 HTML 之前编译的轻量级 Web 模板系统？

> ID：10837383
> 
> 赞同：2
> 
> 时间：2012-05-31T16:15:01.827
> 
> 标签：html, templates

我目前正在使用静态 HTML/CSS 构建网站。如有必要，我可以放入 PHP 后端，但如果可能的话，我想避免这种额外的复杂性。

该站点有大约 10 个不同的 HTML 页面，对导航栏或其他布局元素的任何更改都需要在所有单独的 HTML 文档上手动实现更改。

是否有任何简单的解决方案，我可以在 HTML 中实现包含页眉和页脚的布局模板，然后为每个页面拥有单独的内容文件，并在部署之前将其全部编译为静态 HTML？我想我可以在 Python 中推出自己的解决方案，但如果有一个预先存在的解决方案会很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T16:16:46.933

[Template-Toolkit](http://template-toolkit.org/)包括执行此操作的[ttree 实用程序](http://template-toolkit.org/docs/tools/ttree.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T17:04:33.753

我随后还遇到了 Ruby 中的[nanoc](http://nanoc.stoneship.org/)，它似乎是一个更现代的选择。

# c# - Visual Studio 2010 和 FoxPro 9.0 运行时错误：“功能不可用。”

> ID：10837386
> 
> 赞同：2
> 
> 时间：2012-05-31T16:15:08.540
> 
> 标签：c#, visual-studio, oledb, foxpro, dbf

亲爱的 Stackoverflow 社区，

在 Visual Studio 2010 中使用带有 .NET 4.0 客户端配置文件的 VFPOleDb 库 (9.0Sp2) 我有点困惑。我想做什么？使用 C# 编辑现有的并创建新的 FoxPro 数据库文件。

尝试编译我自己的示例，并基于“如何在 C# 中从头开始创建 dbf 文件”（[1](https://stackoverflow.com/questions/4932530/how-to-create-a-dbf-file-from-scratch-in-c "如何在 C# 中从头开始创建 dbf 文件")）、“如何从 C# 读取 FoxPro 8.0 数据库”（[2](https://stackoverflow.com/questions/4049891/how-do-i-read-a-foxpro-8-0-database-from-c "如何从 c# 读取 FoxPro 8.0 数据库")）和“使用 Visual 进行数据库编程”中看到的示例FoxPro” ( [3](https://stackoverflow.com/questions/10550390/programming-databasing-with-visual-foxpro "使用 Visual FoxPro 进行编程/数据库") ) 我收到一个编译错误：“功能不可用”。Stacktracing 异常消息显示 OleDbConnection 工厂无法识别连接字符串？我已经添加了“Interop.VFPOLEDBLib”作为参考，但由于缺少清单文件，我无法添加“vfpoledb.dll”？

**代码示例**

```
using System;
using System.IO;
using System.Data;
using System.Data.Odbc;
using System.Data.OleDb;
using System.Data.Common;

    namespace VFPExample
    {

        class VFPExample
        {
            /*
            https://stackoverflow.com/questions/754436/odbc-dbf-files-in-c-sharp/

            http://www.devnewsgroups.net/group/microsoft.public.dotnet.framework/topic62548.aspx
            */

            static void Main(String[] args)
            {

                {
                    string strTestDirectory = @"Provider=VFPOLEDB.1; DataSource=D:\TEMP\";

                    using (OleDbConnection vfpro_con_insert =
                    new OleDbConnection(strTestDirectory) )
                    {
                    vfpro_con_insert.Open(); // FIXME: Ex.Message: "Feature not available"; 

                    OleDbCommand createTable = new OleDbCommand(@"Create Table TestDBF (Field1 I, Field2 C(10))", vfpro_con_insert);
                    OleDbCommand insertTable1 = new OleDbCommand(@"Insert Into TestDBF Values (1, 'Hello')", vfpro_con_insert);
                    OleDbCommand insertTable2 = new OleDbCommand(@"Insert Into TestDBF Values (2, 'World')", vfpro_con_insert);

                    createTable.ExecuteNonQuery();
                    insertTable1.ExecuteNonQuery();
                    insertTable2.ExecuteNonQuery();

                    Console.WriteLine("Wrote in " + vfpro_con_insert.DataSource);
                    }

                    Console.ReadLine();

                    /*
                --------------------------------------------------------------------------------
                    */

                    using (OleDbConnection vfpro_con_read = new OleDbConnection(strTestDirectory))
                    {
                        vfpro_con_read.Open();

                        OleDbCommand readTable = new OleDbCommand("Select * From TestDBF (Field1 I, Field2 C(10))", vfpro_con_read);

                        OleDbDataAdapter da = new OleDbDataAdapter(readTable);

                        DataSet ds = new DataSet();
                        //  DataRow dr = new DataRow();

                        da.Fill(ds);

                        foreach (DataRow dr in ds.Tables[0].Rows)
                        {
                            Console.WriteLine(dr.ItemArray[1].ToString());
                        }

                    }

                    Console.ReadLine();

                }
                catch (Exception e)
                {
                    Console.WriteLine("\n\n Exception:\n\n{0}", e.Message); // Set Breakpoint here for detailed StackTrace
                }
            }

        }
    } 
```

**堆栈跟踪**

```
> e {"Feature is not available."}   System.Exception {System.Data.OleDb.OleDbException}
>       [System.Data.OleDb.OleDbException]
>       {"Feature is not available."}
>       System.Data.OleDb.OleDbException
> Data  {System.Collections.ListDictionaryInternal}
>        System.Collections.IDictionary {System.Collections.ListDictionaryInternal}
> HelpLink  null    string
> InnerException    null    System.Exception
> Message   "Feature is not available." string
> Source    "Microsoft OLE DB Provider for Visual FoxPro"   string
> StackTrace    "
>    at System.Data.OleDb.OleDbConnectionInternal..ctor(OleDbConnectionString constr, OleDbConnection connection)
>    at System.Data.OleDb.OleDbConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningObject)
>    at System.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup)
>    at System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection)
>    at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)
>    at System.Data.OleDb.OleDbConnection.Open()
>    at bestsellerList.VFPExample.Main(String[] args)
>    in  D:\Visual Studio 2010\Projects\VFPExample\VFPExample.cs:Line 37."  string
> TargetSite    {Void .ctor(System.Data.OleDb.OleDbConnectionString, System.Data.OleDb.OleDbConnection)}    System.Reflection.MethodBase {System.Reflection.RuntimeConstructorInfo}
>    Static Member      
>    No(t) public Member        
> e.Message "Feature is not available." string 
```

（试图修复本地化）

因此，我需要对 Visual Studio 中的 VFPOleDb/Visual FoxPro 进行一些说明：

*   Visual FoxPro 库是否仅支持 .NET Client Profile 2.0 和/或 Visual Studio 2003/5（及更早版本）？此外，我可以清楚地看到 VSFoxPro ( [5](http://msdn.microsoft.com/en-us/vfoxpro/bb190225.aspx "Microsoft Visual FoxPro 9.0 主页") ) 已达到其产品生命周期结束 ( [4](http://support.microsoft.com/lifecycle/?p1=7992 "微软支持生命周期") ) - 至少对于主流支持而言。在 2015 年之前仍会提供延长支持。Microsoft 是否还有其他关于 FoxPro 数据库迁移的（半）官方文档或博客条目？已经看过“从 Visual FoxPro 迁移”（[6](https://stackoverflow.com/questions/415061/migrating-from-visual-foxpro "从 Visual Foxpro 迁移")）。

*   .NET 3.x（客户端配置文件）及更高版本是否报告了任何成功的编译？

*   我在 Visual Studio 中的代码示例和/或参考中缺少什么？

* * *

因此，我采用了示例代码，根据我的需要对其进行了修改——读取一个包含六列和许多行的表，该表导出为 csv 文件；在我的本地机器上工作正常（像往常一样，我们都知道）——并将可执行文件复制到安装了 .NET 3.5.x 的 Windows 2008 Server R2 并尝试启动应用程序。您是否已经进行了有根据的猜测？

我再次收到与第一次相同的异常，但这次看起来像那样

```
 DataSet ds = new DataSet();
            da.Fill(ds); // throws Exception 
```

`da.Fill(ds)`是麻烦制造者，但这对我来说真的没有意义，因为我还将基于更正代码的编译示例应用程序复制到服务器，它只是做了它应该做的事情......

感谢您的任何提示。

**例外**

```
System.Data.OleDb.OleDbException: Feature is not available.
   at System.Data.OleDb.OleDbCommand.ExecuteCommandTextErrorHandling(OleDbHResult hr)
   at System.Data.OleDb.OleDbCommand.ExecuteCommandTextForSingleResult(tagDBPARAMS dbParams, Object& executeResult)
   at System.Data.OleDb.OleDbCommand.ExecuteCommandText(Object& executeResult)
   at System.Data.OleDb.OleDbCommand.ExecuteCommand(CommandBehavior behavior, Object& executeResult)
   at System.Data.OleDb.OleDbCommand.ExecuteReaderInternal(CommandBehavior behavior, String method)
   at System.Data.OleDb.OleDbCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.OleDb.OleDbCommand.System.Data.IDbCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.Common.DbDataAdapter.FillInternal(DataSet dataset, DataTable[] datatables, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)
   at System.Data.Common.DbDataAdapter.Fill(DataSet dataSet, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)
   at System.Data.Common.DbDataAdapter.Fill(DataSet dataSet)
   at Program.Main(String[] args)

System.Collections.ListDictionaryInternal

   at System.Data.OleDb.OleDbCommand.ExecuteCommandTextErrorHandling(OleDbHResult hr)
   at System.Data.OleDb.OleDbCommand.ExecuteCommandTextForSingleResult(tagDBPARAMS dbParams, Object& executeResult)
   at System.Data.OleDb.OleDbCommand.ExecuteCommandText(Object& executeResult)
   at System.Data.OleDb.OleDbCommand.ExecuteCommand(CommandBehavior behavior, Object& executeResult)
   at System.Data.OleDb.OleDbCommand.ExecuteReaderInternal(CommandBehavior behavior, String method)
   at System.Data.OleDb.OleDbCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.OleDb.OleDbCommand.System.Data.IDbCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.Common.DbDataAdapter.FillInternal(DataSet dataset, DataTable[] datatables, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)
   at System.Data.Common.DbDataAdapter.Fill(DataSet dataSet, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)
   at System.Data.Common.DbDataAdapter.Fill(DataSet dataSet)
   at Program.Main(String[] args) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T21:19:20.027

我按照建议修复了代码，对其进行了清理并改进了一些小部分。有用。

```
using System;
using System.IO;
using System.Data;
using System.Data.Odbc;
using System.Data.OleDb;
using System.Data.Common;

namespace VFPExample
{
    class VFPExample
    {
        /*
         * http://stackoverflow.com/questions/754436/odbc-dbf-files-in-c-sharp/
         * http://www.devnewsgroups.net/group/microsoft.public.dotnet.framework/topic62548.aspx
         */
        static void Main(String[] args)
        {
            try
            {
                string strTestDirectory = @"Provider=VFPOLEDB.1; Data Source=D:\TEMP\";

                using (OleDbConnection vfpro_con_insert = new OleDbConnection(strTestDirectory) )
                {
                    vfpro_con_insert.Open(); 

                    OleDbCommand createTable = new OleDbCommand(@"Create Table TestDBF (Field1 N(2,0), Field2 C(10))", vfpro_con_insert);
                    OleDbCommand insertTable1 = new OleDbCommand(@"Insert Into TestDBF (Field1, Field2) Values (1, 'Hello')", vfpro_con_insert);
                    OleDbCommand insertTable2 = new OleDbCommand(@"Insert Into TestDBF (Field1, Field2) Values (2, 'World')", vfpro_con_insert);

                    createTable.ExecuteNonQuery();
                    insertTable1.ExecuteNonQuery();
                    insertTable2.ExecuteNonQuery();

                    Console.WriteLine("Wrote in " + vfpro_con_insert.DataSource);
                }

                Console.ReadLine();

                using (OleDbConnection vfpro_con_read = new OleDbConnection(strTestDirectory))
                {
                    Console.WriteLine("Read from " + vfpro_con_read.DataSource);

                    vfpro_con_read.Open();

                    OleDbCommand readTable = new OleDbCommand(@"Select * From TestDBF", vfpro_con_read);

                    OleDbDataAdapter da = new OleDbDataAdapter(readTable);

                    DataSet ds = new DataSet();

                    da.Fill(ds);

                    foreach (DataRow dr in ds.Tables[0].Rows)
                    {
                        Console.WriteLine(dr.ItemArray[1].ToString());
                    }
                }
                Console.ReadLine();
            }
            catch (Exception e)
            {
                Console.WriteLine("\n\n Exception:\n\n{0}", e.Message); // Set Breakpoint here for detailed StackTrace
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T18:09:21.357

“功能不可用”异常是由于连接字符串不正确造成的。使用“数据源”而不是“数据源”。</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T16:59:07.540

我已经使用 VFPOleDb 使用 VS2010 构建 WPF 应用程序没有问题......虽然我在 32 位开发机器上运行。VFP 不支持 64 位 - PERIOD，并且不知道这是否可能是您遇到的情况。

另外...路径“D:\TEMP”是否存在？它不会自动尝试创建路径，但在我看来这会引发不同的错误。

您还可以删除 System.Data.ODBC 和 System.Data.Common，我认为您正在工作的示例中不需要这些。

我也没有任何明确的“Interop.VFPOLEDBLib”添加引用。从我遇到的情况来看，只有 System.Data 和你所拥有的

```
using System.Data;
using System.Data.OleDb; 
```

应该很好去。OleDB 提供程序在尝试加载“Provider=VFPOLEDB.1;”时实际上会查看“注册”的内容。部分。

也就是说，我会先让它变得更简单......只需尝试打开连接然后关闭它

```
static void Main(String[] args)
{
   string strTestDirectory = @"Provider=VFPOLEDB.1; DataSource=D:\TEMP\";

   OleDbConnection VFPConn = new OleDbConnection(strTestDirectory);
   VFPConn.Open();
   if( VFPConn.State == System.Data.ConnectionState.Open )
      VFPConn.Close();
} 
```

看看这是否崩溃......如果是这样，你知道它与创建、插入、选择的任何其他准备无关，而是明确的连接。

# jsf - 如何显示带有丰富的工具提示：消息

> ID：10837387
> 
> 赞同：2
> 
> 时间：2012-05-31T16:15:16.903
> 
> 标签：jsf, richfaces, tooltip

对不起我糟糕的英语。
我正在使用 RichFaces 4.2.2.Final。
当验证错误时，我只想显示图标。
我想在鼠标悬停时将错误消息显示为工具提示。
这可能吗？
根据[文件](http://docs.jboss.org/richfaces/latest_4_2_X/Component_Reference/en-US/html_single/#sect-Component_Reference-Output_and_messages-richmessage)，这似乎是可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T16:33:27.280

谢谢你的回复。
我决定使用 notifyMessages 而不是工具提示。

```
# xthml
<rich:notifyMessages ajaxRendered="true" stayTime="2000" nonblocking="true" showDetail="true" showSummary="false" />
<rich:message ajaxRendered="true" for="clientId" showDetail="false" showSummary="true" escape="false" /> 

# backing bean
FacesMessage msg = new FacesMessage(FacesMessage.SEVERITY_ERROR, "&nbsp;", message);
FacesContext.getCurrentInstance().addMessage("clientId", msg); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T06:06:03.460

我从来没有使用过 Richfaces 4.X，但是当我想实现一个工具提示时，我尝试了以下方式......

```
 <h:outputText title="#{log.message}" value="#{fn:substring(log.message,0,10)}..."  rendered="#{(fn:length(log.message)>=10)}"/>
 <h:outputText title="#{log.message}" value="#{log.message}" rendered="#{!(fn:length(log.message)>10)}" /> 
```

希望对你有帮助

# objective-c - 目标 c - 在消息传递应用程序中保存图像

> ID：10837388
> 
> 赞同：0
> 
> 时间：2012-05-31T16:15:17.703
> 
> 标签：objective-c, ios, image, core-data, uiimage

我正在构建一个消息传递应用程序，用户当然可以互相发送短信，现在我想添加图像发送支持。

我有一个`NSManagedObject`子类`ChatMessage`来表示具有诸如 messageId、senderId、senderName、text、receiverId 等属性的聊天消息...

现在处理图像的最佳做法是什么？
我不是在谈论如何发送和接收图像，而是在谈论如何保存它们（当用户获取图像以及用户上传和发送图像时）

`ChatMessage`将图像属性添加到Core Data 并将其保存是一个好主意吗？或者也许将其保存到单独的文件中？我需要在保存之前调整它们的大小吗？当我处理图像时，我是否应该期待遇到特别的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T13:06:15.197

埃亚尔，

Core Data 可以很好地处理图像。特别是，在 iOS v5 和 Lion 中，大型 BLOB 存储在持久存储之外。小型 BLOB 仍存储在数据库中。有两个警告。首先，在 Core Data 中，创建保留周期非常容易，虽然这绝不是一件好事，涉及大型 BLOB 的保留周期会导致操作系统相对快速地杀死您的进程。因此，最佳实践是创建一个仅包含 BLOB 和反向链接的叶实体。这大大降低了您使用 BLOB 创建保留周期的可能性。我建议与 BLOB 的关系是一对一的关系。其次，大 BLOB 会导致内存警告。Core Data 似乎不会将这些图像内存映射到 RAM 中。因此，它们不能轻易地从您的常驻内存集中自动清除。就我而言，我有一个让 CD 处理 BLOB 的应用程序。我还有一个应用程序，其中 BLOB 非常大（12-24 MB）。在后一种情况下，我自己处理 BLOB 存储和内存映射。

是否调整图像大小实际上取决于您的应用程序和存储要求/限制。CD 中的 BLOB 存储不会影响此问题。

安德鲁

# sql - 查询以确定列是否组合以创建唯一键

> ID：10837396
> 
> 赞同：11
> 
> 时间：2012-05-31T16:15:40.087
> 
> 标签：sql, oracle

我正在尝试确定 Oracle 中表上的一组三列是否构成唯一键并且可以在 1:1 关系中使用。

如果我运行此查询，并且键是唯一组合，我不应该看到`count`> 1，对吗？

```
select count(*) from my_table t    
group by t.a, t.b, t.c 
```

有没有更好/替代的方法来做出这个决定？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-31T16:20:09.413

使用该`HAVING`子句轻松识别重复项。

```
select t.a, t.b, t.c, count(1) 
from my_table t    
group by t.a, t.b, t.c 
having count(1) > 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T16:21:16.580

如果表有大量的数据，它可能更容易做到

```
SELECT t.a, t.b, t.c, count(*)
  FROM my_table t
 GROUP BY t.a, t.b, t.c
HAVING COUNT(*) > 1 
```

如果该查询返回 0 行，则这三列（当前）是唯一的。如果该查询返回 1 行或更多行，您将知道哪些值是重复的。

当然，如果您发现这三列当前是唯一的，那么如果您打算利用这一事实，则需要创建一个唯一约束。

# c# - 即使对于 32 位，编辑并继续在 VS2010 中也不起作用

> ID：10837398
> 
> 赞同：2
> 
> 时间：2012-05-31T16:15:43.087
> 
> 标签：c#, winforms, visual-studio-2010

我已经看过所有这些，但我还没有找到答案。现在时间已经过去了，有解决办法吗？

测试获胜形式目标 3.5 或 4 净。Win7 Ultimate 64 位。按照建议将项目设置为 32 位。没有花哨的代码或链接的项目或 dll，只是一个没有代码的标准测试项目。

我运行表单而不是打开表单的 cs 代码，然后按 CR 添加评论。然后我收到错误消息...

在代码运行或禁用“一个进程中断时中断所有进程”选项时，不允许编辑并继续更改。该选项可以在工具、选项、调试中启用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T17:30:43.987

我的理解始终是“编辑并继续”不允许您在应用程序“运行”时编辑代码......

你需要暂停你的代码；然后你可以“继续”。

如果您的表单正在运行并且您想在 .CS 代码中添加注释 - 您需要先让代码遇到断点或手动暂停代码（cntrl+alt+break - 或在 Debug / Break All 中可用)

在执行点或附近修改代码时，我似乎在编辑和继续方面运气最好。我相信有人可以为此给出技术原因，但我不知道它是不是在我的脑海中。

（如果你这样做，我很抱歉*，*我只是误读了你的问题）

# sql-server-2005 - 在 SSRS 2005 IIF 表达式中使用 Like 运算符

> ID：10837399
> 
> 赞同：2
> 
> 时间：2012-05-31T16:15:43.507
> 
> 标签：sql-server-2005, reporting-services

我在 SSRS 中有一个非常复杂的 IIF 表达式，我想在其中更改单元格的背景颜色会根据某些条件而改变。它在当前状态下工作正常，但我正在尝试向它添加一个 Like 条件......

所以，这就是它现在的样子（工作）：

```
 =IIf(inscope("matrix1_errorType"), 

IIf(

(
    FormatPercent(Sum(Fields!numberOfIssues.Value)/First(Fields!totalItems.Value),3) >= .0001 & "%" 
    And ( First(Fields!errorType.Value) = "TypeA")
)

Or 
(
    FormatPercent(Sum(Fields!numberOfIssues.Value)/First(Fields!totalItems.Value),3) >= .04 & "%" 
    And First(Fields!errorType.Value) = "TypeB"
)

Or 
(
    FormatPercent(Sum(Fields!numberOfIssues.Value)/First(Fields!totalItems.Value),3) >= .02 & "%" 
    And First(Fields!errorType.Value) = "TypeC"
    )
,
"Maroon", "Transparent")
, "Transparent") 
```

我想做的是在这一行的某处添加一个 Like 类型的语句，它会说 ...and location LIKE “Scan” - 换句话说，一个在标题中某处带有“Scan”的位置。locationName 也是我在报告中显示的字段。

```
(
    FormatPercent(Sum(Fields!numberOfIssues.Value)/First(Fields!totalItems.Value),3) >= .0001 & "%" 
    And ( First(Fields!errorType.Value) = "TypeA")
) 
```

like 语句类似于：

```
... And ( First(Fields!errorType.Value) = "TypeA") And First(Fields!locationName.Value) Like "*Scan*" 
```

但这不起作用。我也试过：

```
And ( First(Fields!errorType.Value) = "TypeA" And First(Fields!locationName.Value.ToString().Contains("Scan") 
```

这也不起作用。

有什么办法可以在 SSRS 2005 表达式中做到这一点？
谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T17:23:19.023

我认为你的问题是语法。仔细检查 () 和 , 在您的声明中作为 Contains 的位置应该适用于您正在尝试的内容。

我也注意到你的说法：

```
First(Fields!locationName.Value.ToString().Contains("Scan")) 
```

应该是：

```
First(Fields!locationName.Value).ToString().Contains("Scan") 
```

* * *

你也可以试试这个`IndexOf`功能。IndexOf 返回您传递的字符串在源中出现的字符位置。因此，如果它大于（或等于）零，则您的字符串包含字符“扫描” - 如果小于零，则源不包含该字符串。

```
Fields!YourField.Value.ToString().IndexOf("Scan") >= 0 
```

尽管它的工作方式与您使用它的方式大致相同。

# linux - 在服务器中设置哪个时区：Etc/UTC 或 Etc/Universal？

> ID：10837402
> 
> 赞同：3
> 
> 时间：2012-05-31T16:15:51.957
> 
> 标签：linux, time, timezone, administration

ubuntu 10.04 上提供了两个时区（Etc/UTC & Etc/Universal）。无法确定为 Web 服务器选择哪一个。

我认为 Etc/UTC 指向特定时区而不是 Etc/Universal 的理论在语义上指向当前的“基准”时间。所以Universal是不二之选。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T19:41:39.427

Etc/Universal 只是 Etc/UTC 的旧命名标准。Etc/Zulo 也是如此。它有效，在每个实际方面都是一样的，但如果你想真正正确的话；Etc/UTC 是可以选择的。

从 tz 数据库等文件：

```
# The following link uses older naming conventions,
# but it belongs here, not in the file `backward',
# as functions like gmtime load the "GMT" file to handle leap seconds properly.
# We want this to work even on installations that omit the other older names.

Link    Etc/UTC             Etc/Universal
Link    Etc/UTC             Etc/Zulu 
```

# .net - f# 获取数组中 4 个相邻数字的乘积

> ID：10837403
> 
> 赞同：0
> 
> 时间：2012-05-31T16:15:52.210
> 
> 标签：.net, f#

我正在尝试获取数组中 4 个相邻数字的最大乘积，这就是我现在得到的：

```
let max4 line =
    let rec loop acc = function
        |a :: b :: c :: [] -> acc
        |a :: b :: c :: d :: tl -> loop (max(acc, a*b*c*d)) tl
        |_ -> 0
    loop 0 line 
```

我得到一个关于这`max(,)`句话的编译错误：

> 错误 FS0001：类型不匹配。期望一个 'a 但给定一个 'a * 'b -> 'a * 'b 当统一 ''a' 和 ''a * 'b -> 'a * 'b' 时，结果类型将是无限的

* * *

有人知道这段代码有什么问题吗？（或其他解决方案）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T17:04:49.423

作为使用显式递归的替代方法，您还可以使用现有的 F# 库函数来解决此问题。这是大多数 F# 数据处理的编写方式，但学习如何手动编写递归函数总是好的（因为您有时需要它们）。

因此，为了完整起见，这里有一种使用现有函数更声明性地解决问题的方法：

```
let max4 line = 
  line |> Seq.windowed 4 
       |> Seq.map (Seq.reduce (*))
       |> Seq.max 
```

第一行将列表转换为 4 元素数组（窗口）的序列。然后将其传递给`Seq.map`将窗口变成元素的产品。为此，我使用`Seq.reduce`指定的函数（这里是`(*)`运算符）来减少序列（在本例中为窗口）。最后，要找到产品的最大元素，可以使用`Seq.max`函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T16:43:16.780

假设输入是一个整数列表：

```
let max4 line =
    let rec loop acc = function
        | x1::(x2::x3::x4::_ as xs) -> loop (max acc (x1*x2*x3*x4)) xs
        |_ -> acc
    loop System.Int32.MinValue line 
```

你犯了一些错误：

*   内置`max`函数采用 curry 形式`max: 'a -> 'a -> 'a`。
*   在你的函数中要解决的下一个案例应该是`b::c::d::tl`，`tl`不仅仅是。
*   该产品可能是负面的，所以`0`不是一个好的起点。请注意可能会发生整数溢出（我还没有在我的函数中解决这个问题）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T18:36:10.043

其他两个答案都是滑动窗口的总和，但在你的问题中它们是连续的。如果你想要后者，你可以定义这样一个函数：

```
let groupsOf n items =
  if n <= 0 then invalidArg "n" "must be greater than zero"
  if List.isEmpty items then invalidArg "items" "empty list"
  let rec loop i acc items =
    seq {
      match i, items with
      | 0, [] -> yield List.rev acc
      | _, [] -> ()
      | 0, _ ->
        yield List.rev acc
        yield! loop n [] items
      | _, x::xs -> yield! loop (i - 1) (x::acc) xs
    }
  loop n [] items 
```

然后使用类似于 Tomas 的代码：

```
let max4 line = 
  line |> groupsOf 4 
       |> Seq.map (Seq.reduce (*))
       |> Seq.max 
```

`groupsOf`最后忽略任何部分组（就像您的代码一样）。

# xml - 棘手的 Linq 到 XML

> ID：10837406
> 
> 赞同：1
> 
> 时间：2012-05-31T16:15:59.943
> 
> 标签：xml, linq

请查看下面的代码并建议需要做什么才能在输出中获得额外的最后一行，如预期输出中所示

```
class test {

   static void Main(string[] args)
    {

        XDocument doc = XDocument.Load("E:\\BI_analytics\\Data\\so.xml");
        var query = from test in doc.Descendants("tester")
                    from testreq in test.Descendants("testRequest")
                    from testresp in test.Descendants("testResponse")
                    let id = testreq.Element("id") == null ? string.Empty : testreq.Element("id").Value

                  //  select id;
                    from itm in testresp.Descendants("item")
                    select new
                    {
                        ID = (string)id,
                        Name = (string)itm.Attribute("itemname"),
                        Code = (string)itm.Attribute("itemocde"),
                    };

        foreach (var result in query)
        {
            Console.WriteLine(result);
        }
    }
} 
```

电流输出

```
{ ID = 2，名称 = 测试项目 1，代码 = 111 }
{ ID = 2，名称 = 测试项目 2，代码 = 222 }
{ ID = 3，名称 = 测试项 3，代码 = 333 }
{ ID = 3，名称 = 测试项 4，代码 = 444 }

```

预期产出

```
{ ID = 2，名称 = 测试项目 1，代码 = 111 }
{ ID = 2，名称 = 测试项目 2，代码 = 222 }
{ ID = 3，名称 = 测试项 3，代码 = 333 }
{ ID = 3，名称 = 测试项 4，代码 = 444 }
{ ID = 4，名称 = ，代码 = }

```

```
<?xml version="1.0" encoding="utf-8"?>
<root>
  <tester>
    <testRequest>
      <id>2</id>
    </testRequest>
    <testResponse>
      <items>
        <item itemname="test item1" itemocde="111"/>
        <item itemname="test item2" itemocde="222"/>
      </items>
    </testResponse>
  </tester>
  <tester>
    <testRequest>
      <id>3</id>
    </testRequest>
    <testResponse>
      <items>
        <item itemname="test item3" itemocde="333"/>
        <item itemname="test item4" itemocde="444"/>
      </items>
    </testResponse>
  </tester>
  <tester>
    <testRequest>
      <id>4</id>
    </testRequest>
    <testResponse>
      <items />
    </testResponse>
  </tester>
</root> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T16:25:10.480

我使用一个类来帮助我返回值，即使它是 null 看起来像这样：

```
public static class LinqToXMLUtility
{
    /// <summary>
    /// Used to Get check the XElement Value and return 
    /// empty string if it is null (used for optional or missing xml items)
    /// </summary>
    /// <param name="pElement"></param>
    /// <param name="pstrElementName"></param>
    /// <returns></returns>
    public static string GetXElementValue(XElement pElement, string pstrElementName)
    {
        string strRet = string.Empty;
        try
        {
            XElement lElement = pElement.Element(pstrElementName);
            if (lElement != null)
            {
                strRet = lElement.Value;
            }
        }
        catch { }
        return strRet;
    }
} 
```

并像这样使用它。

```
class test
{
    static void Main(string[] args)
    {
        XDocument doc = XDocument.Load("E:\\BI_analytics\\Data\\so.xml");
        var query = from test in doc.Descendants("tester")
                    from testreq in test.Descendants("testRequest")
                    from testresp in test.Descendants("testResponse")
                    let id = testreq.Element("id") == null ? string.Empty : 
                             testreq.Element("id").Value

                    //  select id;
                    from itm in testresp.Descendants("item")
                    select new
                    {
                        ID = LinqToXMLUtility.GetXElementValue(itm, "id"),
                        Name = LinqToXMLUtility.GetXElementValue(itm, "itemname"),
                        Code =  LinqToXMLUtility.GetXElementValue(itm, "itemocde"),
                    };

        foreach (var result in query)
        {
            Console.WriteLine(result);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T16:25:09.880

这就是问题：

```
from itm in testresp.Descendants("item") 
```

你没有*任何*元素`item`，所以你可能想要：

```
from itm in testresp.Descendants("item").DefaultIfEmpty() 
```

...此时您需要：

```
select new
{
    ID = (string)id,
    Name = itm == null ? "" : (string)itm.Attribute("itemname"),
    Code = itm == null ? "" : (string)itm.Attribute("itemocde"),
}; 
```

# javascript - 仅在 HTML / JS 中的 REST API 客户端

> ID：10837410
> 
> 赞同：0
> 
> 时间：2012-05-31T16:16:18.933
> 
> 标签：javascript, api, rest, client, csrf

是否可以仅在 HTML / JS 中为 REST API 创建客户端并防止 CSRF？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:33:02.950

这是可能的。

CSRF 预防通常针对简单的网站，而不是 API，因为 API 通常旨在被其他网站访问。隐藏的 crumbs 和 token 是防止此类攻击的最常用方法，但在可消耗的 API 上无法正常工作。

您可能需要一个良好的主要身份验证机制。易受 CSRF 影响的 Web 应用程序的主要弱点之一是 cookie。如果您的 API 不需要它们，则使用另一种身份验证机制（如 OAuth 或 HTTP Digest）可能是答案，因此外部用户仍然可以安全地使用 API（没有讨厌的碎屑验证）。

HTTP Auth Basic 和 OAuth 2.0 在 JS 客户端应用程序下都是可行的。这里有一个 OAuth2 的演示：[https ://gist.github.com/563893](https://gist.github.com/563893)

Twitter 在主网站内使用自己的公共 API，因此有证据表明这样的事情是可能的，尽管我不确定它们如何具体防止外部 CSRF。每个请求都由接收者发出（位于此处：[https](https://api.twitter.com/receiver.html) ://api.twitter.com/receiver.html ），授权令牌通过 cookie 进行隧道传输。您可能需要进一步研究它们的实现。

# jquery - 使用 JQuery 和正则表达式解析文件名

> ID：10837411
> 
> 赞同：0
> 
> 时间：2012-05-31T16:16:19.123
> 
> 标签：jquery, regex, parsing, hyperlink, filenames

所以我有几个链接：

```
<a href="#">2k01</a>
<a href="#">3a01</a>
<a href="#">5a01</a>
etc... 
```

当我点击一个链接时，我想显示一组与标签之间的文本相关联的图像。我有一个 images/ 文件夹，其中包含所有图像，图像名称的格式为“some text_2k01_some text”、“some text_3a01_some text”等。我只想显示带有单击链接内的文本的图像。我怀疑有一个使用 JQuery 和正则表达式的解决方案，但我找不到它。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:26:05.557

我认为您之前可以插入（作为`data-*`属性）您想要获取的图像的名称，就像这样

```
<a href="#" data-image="folder/your-image-2k01.jpg">2k01</a>
<a href="#" data-image="folder/other-image-3a01.jpg">3a01</a>
<a href="#" data-image="folder/foobar-image-5a01.jpg">5a01</a> 
```

所以js会很简单

```
$(document).on('click', 'a[data-image]', function() {
   var $this = $(this),
       url   = $this.data('image'),
       img   = $('<img src="'+ url +'" />');

   $this.append(img);
}) 
```

而且你不会被文件名格式束缚得太深

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T16:23:26.570

不要为此使用正则表达式。您可以使用 jQuery：

```
jQuery("a").click(function() {
   var linkText = jQuery(this).text();
   var filename = "sometext_" + linkText + "_sometext";
   ...
   ...code to display your images
   ...
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T16:30:07.083

```
$('a').on('click', function(){
     $('img').hide();
     $('img[src|="' + $(this).text() + '"]').show();
}); 
```

当您单击链接时，它将在图像源包含的页面上找到所有图像（这就是它的`|=`作用）链接中的任何文本并显示它们。还首先隐藏所有图像，假设您只想要与显示的单击链接相关联的图像。

# c# - 使用 Facebook 帐户登录应用程序

> ID：10837412
> 
> 赞同：0
> 
> 时间：2012-05-31T16:16:19.480
> 
> 标签：c#, .net, facebook

我正在使用“https://ssl.connect.facebook.com/js/api_lib/v0.4/FeatureLoader.js.php”从我的应用程序连接到 Facebook，现在它不起作用。当我让它 http 它工作正常。这是什么原因？如何使其与https一起使用。facebook是否更改了网址...这是我的代码...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:16:33.307

旧的 featureloader JS SDK 已被弃用，我认为它已经被删除 - 如果它仍然有效，您应该立即停止使用它并查看当前的 SDK 和文档以了解如何实现登录。

首先，包含[当前 JS SDK](https://developers.facebook.com/docs/reference/javascript/)的方法是：

```
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : 'YOUR_APP_ID', // App ID
      channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // Additional initialization code here
  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script> 
```

# jquery - 可访问性样式表切换器

> ID：10837413
> 
> 赞同：2
> 
> 时间：2012-05-31T16:16:19.740
> 
> 标签：jquery, insert, stylesheet, switch-statement, head

好的，我需要做的是，

*   关闭和打开可访问性样式表

*   设置 10 天的 cookie

*   检查 cookie 是否在其上，是否将样式表添加到头部。

我让它与不稳定的行为一起工作。

```
$(document).ready(function() {      

     if( $.cookie('accessibility-visual') == "on" ) { 
                   $('head').append(' <link id rel="stylesheet" type="text/css" media="screen" href="css/accessibility.css" />');  

      }       

      $('#visual').on('click', function(e){

      if( $.cookie('accessibility-visual') == "on" ) { 

          $.cookie("accessibility-visual", null);
          $(this).text("Off");
           $('link').attr('href', 'css/accessibility.css').remove(); 
           return false;

      }

      else {

           $.cookie("accessibility-visual", "on", { expires: 7 });
           $(this).text("On");
           $('head').append(' <link rel="stylesheet" type="text/css" media="screen" href="css/accessibility.css" />');  

      }

      });   
}); 
```

# ios - NSString 常量可以弱链接吗？

> ID：10837418
> 
> 赞同：7
> 
> 时间：2012-05-31T16:16:33.340
> 
> 标签：ios

NSString 常量可以弱链接吗？ `AVCaptureSessionPresetiFrame960x540`在 iOS 5 之前没有定义。我避免实际引用它并且它在 gdb 中加载良好，但是当我加载 ipa 时，它似乎在调用 main 之前在 dyld 中崩溃。

相关问题[Using Weakly Linked Framework's extern constants Crash](https://stackoverflow.com/questions/9274088/using-weakly-linked-frameworks-extern-constants-crash)似乎说“不”，我采取了同样的方法：直接使用字符串值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T14:47:09.870

常量也可以是弱链接。要测试常量是否可用，您必须`NULL`在尝试使用它之前检查它的地址是否不可用：

```
if (&AVCaptureSessionPresetiFrame960x540 != NULL) {
     // Constant is available and can be used
} 
```

注意`&`运算符取常量的地址。

# c# - Teamcity 概览，不显示构建历史

> ID：10837420
> 
> 赞同：1
> 
> 时间：2012-05-31T16:16:38.653
> 
> 标签：c#, svn, teamcity, teamcity-7.0

我刚刚在我的项目中创建了一个新构建，我所有的构建都曾经有构建历史，但是即使构建成功，这个构建配置也不会显示在概览选项卡中。

这不是一个大问题，但仍然很烦人。

此版本的唯一区别是它没有任何特殊触发器，因为我手动触发它并提示输入 2 个特殊参数。

我很快在 HSQL MYSQL 上使用 teamcity 7.0。

见截图。

![在此处输入图像描述](../Images/071821b8ee7de3fb67f72b1d7a8d9472.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:45:04.153

请升级到最新的 Team city 版本 (7.0.3)。在那里修复了类似的问题。

# objective-c - 在 Objective-C 中选择 NSArray 的随机元素

> ID：10837423
> 
> 赞同：9
> 
> 时间：2012-05-31T16:16:43.303
> 
> 标签：objective-c, arrays, cocoa, random, nsarray

> **可能重复：**
> [在 NSArray 中选择一个随机对象](https://stackoverflow.com/questions/3318902/picking-a-random-object-in-an-nsarray)

我在 Objective-C 中有一个带有字符串的数组：

```
NSArray *tips;
tips = [NSArray arrayWithObjects:
       @"Foo",
       @"Bar",
       @"Baz",
       nil]; 
```

我想要一个从数组中获取随机项并返回它的方法。有没有方法，或者我自己怎么写？谢谢。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-05-31T16:19:58.710

使用此代码：

```
uint32_t rnd = arc4random_uniform([tips count]);

NSString *randomObject = [tips objectAtIndex:rnd]; 
```

**编辑：** 在处理我的项目时，我决定为 NSArray 创建一个类别。这很简单，但我发现它很有用。

以下是文件：

**NSArray+Random.h**

```
#import <Foundation/Foundation.h>

@interface NSArray (Random)

- (id)randomObject;

@end 
```

**NSArray+随机数.m**

```
#import "NSArray+Random.h"

@implementation NSArray (Random)

-(id)randomObject {
    NSUInteger myCount = [self count];
    if (myCount)
        return [self objectAtIndex:arc4random_uniform(myCount)];
    else
        return nil;
}

@end 
```

然后在当前示例中，您可以像这样使用它：

```
NSString *randomObject = [tips randomObject]; 
```

使用类别还有另一个优点：当您决定更改在应用程序中选择随机对象的方式时，您只需修改 randomObject 方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T16:46:00.977

```
NSUInteger i = arc4random();
NSString *string = [tips objectAtIndex: i];

-(NSString *) returnArrayItem: (NSArray *) array {
    //Sets randNum equal to a random number between 0 and the number of elements in the array parameter
    NSUInteger randNum = arc4random() % [array count];
    //Sets the string returnValue to a random string in the array
    NSString *returnValue =  [array objectAtIndex:randNum];
    //Returns array
    return returnValue;
} 
```

希望这可以帮助

# actionscript-3 - AS3 嵌入式字体列表及其名称

> ID：10837426
> 
> 赞同：7
> 
> 时间：2012-05-31T16:16:53.390
> 
> 标签：actionscript-3, embedded-fonts

如何使用 AS3 获取所有嵌入字体及其名称的列表。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-31T16:31:06.777

使用[`Font.enumerateFonts()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/Font.html#enumerateFonts()).

```
var fonts:Array = Font.enumerateFonts();
for each(var font:Font in fonts)
    trace( font.fontName+":"+font.fontType ); 
```

# android - Android 对操作栏和选项菜单使用不同的图标

> ID：10837429
> 
> 赞同：3
> 
> 时间：2012-05-31T16:17:03.423
> 
> 标签：android, android-actionbar, android-menu

我在应用程序中使用 ActionBarSherlock。我遇到的问题是，当设备较旧并且操作溢出由底部的选项菜单处理时，我需要切换图标以适应它。如何判断操作栏项目是否在溢出中？我可以在drawable中使用选择器状态吗？

# c# - URL 用文件扩展名重写 url

> ID：10837430
> 
> 赞同：1
> 
> 时间：2012-05-31T16:17:10.927
> 
> 标签：c#, asp.net, url-rewriting, file-extension

使用 IIS7.5 和 ASP.net，我有重写规则：

```
<rewrite url="~/store/playgame/([0-9]+)/(.*)" to="~/handlers/storeGetPlayGameContent?p1=$1&amp;p2=$2" processing="stop"/> 
```

这适用于 URL：

```
http://127.0.0.1/store/playgame/1/c2runtime
Requested URL: http://127.0.0.1:80/handlers/storeGetPlayGameContent?p1=1&p2=c2runtime 
```

但对于网址：

```
http://127.0.0.1/store/playgame/1/c2runtime.js
Requested URL: http://127.0.0.1:80/store/playgame/1/c2runtime.js 
```

如您所见，请求的 URL 现在不正确。任何带有 NOT 文件扩展名的 URL`.aspx`都将被错误地重写。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:57:17.223

在默认配置中，IIS 将自己提供 js 文件，而不通过 ASP.Net 框架。这意味着永远不会咨询您的重写器。您必须将 js 扩展（以及您想要处理的任何其他扩展）添加到 IIS 管理工具中的处理程序映射。

# c# - XNA，如何绘制所有 DrawableGameObjects？

> ID：10837435
> 
> 赞同：0
> 
> 时间：2012-05-31T16:17:28.330
> 
> 标签：c#, xna

我记得不久前看到了一些绘制和更新所有可绘制游戏对象的方法。我认为这是一个 foreach 循环，例如

```
 foreach(DrawableGameComponent dgc in Game.Components) 
```

有人可以告诉我正确的方法吗，或者他们是否知道它的教程？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:03:00.447

你可以这样做：

```
foreach(var dgc in Game.Components.OfType<DrawableGameComponent>()
                                  .OrderBy(x => x.DrawOrder))
{

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T17:39:17.020

你是对的，你可以简单地遍历 Components 数组中的每个项目并调用它的 draw 方法，但是你应该考虑一些事情，下面的代码应该适合你。

如果它对您无关紧要，您可能不需要通过 DrawOrder 订购，而且您可能不应该使用 linq 来订购，因为它非常慢，但可以。

```
foreach (var component in Components.OrderBy(x => ((IDrawable)x).DrawOrder))
  if (component is IDrawable)
  {
     IDrawable drawableComponent = (IDrawable)component;
     if (drawableComponent.Visible)
        drawableComponent.Draw(gameTime);
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:09:35.057

由于对象可能会扩展 DrawableGameObject，因此您始终可以将其添加到游戏组件中：

```
class MyGame: Game
{
     //...Your code
     override public Load()
     {
           //... YOURCODE  
           Components.Add(myDrawableObj);
     }
 } 
```

你会注意到他们会开始自己画画:)

# php - 使用 ImageMagick (php) 将 RGB 通道合并回单个图像

> ID：10837436
> 
> 赞同：4
> 
> 时间：2012-05-31T16:17:53.907
> 
> 标签：php, image-processing, imagemagick

所以我有一个 ImageMagick 和 php 的情况，我需要分别处理每个 RGB 通道，然后将它们重新合并到最终图像中。所以在我下面的代码中，$red、$green 和 $blue 是通道（作为灰度图像）。以下代码是我尝试过的（以及一些变体），但每次我最终得到的图像只有青色、洋红色或黄色显示。在这种情况下，生成的图像是青色的。

```
$im->removeImage();
$im->addImage($red);
$im->addImage($green);
$im->addImage($blue);
$img = $im->combineImages(self::CHANNEL_ALL);

$im->removeImage();
$im->removeImage();
$im->removeImage();
$im->addImage($img); 
```

我认为我的部分问题是 PHP 文档没有太多说明如何使用 combineImages 并且据我所知没有示例。因此，我很可能错误地使用了该特定方法，并且我怀疑这与我如何在单个 Imagick 对象中组合图像开始有关。

编辑

这个问题最终归结为：如何仅使用 php 重新创建以下脚本？

```
convert tmp_r.png tmp_g.png tmp_b.png -combine tmp_rgb.png 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T18:35:22.033

**[编辑]** 我不得不承认，进一步查看文档，我不确定常量 CHANNEL_ALL 的作用。他们确实声明您可以通过逻辑或将它们连接在一起来连接通道。你可以试试：

$im->combineImages(imagick::CHANNEL_RED | imagick::CHANNEL_GREEN | imagick::CHANNEL_BLUE);

**[原创]** 我一直在研究这个 API，老实说，我认为您正在寻找的是 convert 函数，而不是 combine 函数。

查看下面提供的链接并专门单击“组合 RGB 通道图像” [http://www.imagemagick.org/Usage/color_basics/](http://www.imagemagick.org/Usage/color_basics/)

试试看，如果您需要进一步的帮助，请发表评论:-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T20:48:43.140

所以我想我已经想出了如何让它发挥作用。缺少的部分是对 flattenImages() 的调用。我不确定为什么会这样，但这似乎是我想要的。这是代码（请记住，$this 是在扩展 Imagick 的类的成员方法的上下文中）：

```
$this->removeImage(); // gets rid of the old, unprocessed image
$rgb = clone $this;

$rgb->addImage($red);
$rgb->addImage($green);
$rgb->addImage($blue);
$rgb->flattenImages(); // this is what was missing above

$rgb = $rgb->combineImages(self::CHANNEL_ALL);

$this->addImage($rgb); 
```

任何人都可以评论为什么会这样吗？我希望 flattenImages() 将三个图像合并为一个并破坏一些信息，但它似乎实际上告诉 ImageMagick 一起处理所有包含的图像，而它之前是独立处理它们的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-04T18:44:15.693

试试这个：

```
$im->addImage($red);
$im->addImage($green);
$im->addImage($blue);
$im->combineImages(imagick::CHANNEL_RED | imagick::CHANNEL_GREEN | imagick::CHANNEL_BLUE); 
```

顺便说一句 combineImages 不返回 imagick 对象，但 true/false 表示成功或失败，因此`$im`将包含您的组合图像。

编辑：显然 combineImages 很糟糕，所以这里有一个替代方案：`imagick::compositeImage`

```
$im->compositeImage($red, imagick::COMPOSITE_COPY, 0, 0, imagick::CHANNEL_RED);
$im->compositeImage($green, imagick::COMPOSITE_COPY, 0, 0, imagick::CHANNEL_GREEN);
$im->compositeImage($blue, imagick::COMPOSITE_COPY, 0, 0, imagick::CHANNEL_BLUE); 
```

# c# - Interop.Word Documents.Open 为空

> ID：10837437
> 
> 赞同：22
> 
> 时间：2012-05-31T16:17:59.227
> 
> 标签：c#, asp.net, ms-word, asp.net-4.0, openxml

我正在尝试使用 Interop.Word.Application 打开 .docx 文件并转换为 PDF。它作为控制台应用程序工作，但如果我在我的 Web 应用程序中使用它，它就不起作用。我试图查看文件夹的权限。我完全控制了“网络服务”，但我仍然得到未在 word.Documents.Open 中设置的对象引用。你能告诉我可能是什么问题吗？我被这个错误困住了。请告诉我。我很感激任何建议。谢谢你。

```
 Microsoft.Office.Interop.Word.Application word = new Microsoft.Office.Interop.Word.Application();

    object oMissing = System.Reflection.Missing.Value;

    word.Visible = false;
    word.ScreenUpdating = false;
    string fileName = @"c:\OUTPUT\test.docx");
    Document doc = word.Documents.Open(filename, ref oMissing,
            ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing,
            ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing,
            ref oMissing, ref oMissing, ref oMissing, ref oMissing);
        doc.Activate(); 
```

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-07-06T09:43:03.633

如果您仍在寻找答案，我刚刚为我的项目找到了答案。

打开 DCOM 配置设置：

1.  开始->`dcomcnfg.exe`
2.  计算机
3.  本地计算机
4.  配置 DCOM
5.  搜索`Microsoft Word 97-2003 Documents`-> 属性

选项卡`Identity`，从 更改`Launching User`为`Interactive User`

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-07-10T08:23:40.500

试试这个可能对你有帮助。

*   在“C:\Windows\SysWOW64\config\systemprofile\”中创建一个新的“桌面”目录

经过漫长漫长的一天寻找解决方案后，它对我有用。

这似乎是一个配置文件问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-23T15:12:43.587

我做了以下步骤，一切正常：

*   创建[桌面文件夹](https://stackoverflow.com/a/1680214)
*   将 DCOM 元素更改为使用特定用户而不是启动/交互式用户登录
*   更改了服务，使其以相同的特定用户身份启动

**编辑于 2019-09-29。** 由于 Windows 大更新，我不得不重新进行确切的进度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-16T12:53:22.243

为了解决这个问题，我必须做两件事：

*   创建目录：

    *   `C:\Windows\System32\config\systemprofile\AppData\Local\Microsoft \Windows\INetCac‌he`
    *   `C:\Windows\System32\config\systemprofile\Desktop`
*   [正如@gianni-b 所说，](https://stackoverflow.com/a/11359745/513401)启用 DCOM 设置。

如果您因为语言不同而难以找到 DCOM 条目，您可以这样做：

1.  开始菜单 >`regedit`
2.  导航`HKEY_LOCAL_MACHINE\SOFTWARE\Classes\AppID\{00020906-0000-0000-C000-000000000046}`
3.  右键单击>新建>字符串值

    *   对于键，放`RunAs`
    *   对于价值，把`Interactive User`

您可以对 AppID 上的 Excel 执行相同的操作`{00020812-0000-0000-C000-000000000046}`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-29T08:45:31.887

这对我有用。 [https://social.msdn.microsoft.com/Forums/en-US/0f5448a7-72ed-4f16-8b87-922b71892e07/word-2007-documentsopen-returns-null-in-aspnet](https://social.msdn.microsoft.com/Forums/en-US/0f5448a7-72ed-4f16-8b87-922b71892e07/word-2007-documentsopen-returns-null-in-aspnet)。

如果这对你有帮助，请回答

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-31T16:26:03.887

正如 Paulie 在他对 OP 的评论中所说，我认为这个问题主要是因为网络服务器上的库。您可能能够破解以使其在网络应用程序上运行，但我建议不要这样做。

**编辑**：啊，我误读了这篇文章，只是假设了 Excel。根据我的经验，这就是大多数人在使用 Office.Interop 时所寻求的；）

有一个使用 DocX 格式的开放库（[在此处输入链接描述](http://docx.codeplex.com/)）。*不幸*的是，他在页面上承认，如果没有 Office.Interop 库，几乎不可能转换为 PDF 等格式（[http://cathalscorner.blogspot.com/2009/10/converting-docx-into-doc-pdf-html.html](http://cathalscorner.blogspot.com/2009/10/converting-docx-into-doc-pdf-html.html) )

[这](https://stackoverflow.com/questions/285700/programatically-convert-word-docx-to-doc-without-using-ole-automation)是一个“有希望”的替代方案，但 YMMV。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-01T08:31:52.067

很可能您的网络服务器上有一个不同的单词 dll，也许是一个较旧的。我建议您引用特定的 dll 并将其复制到 Web 服务器，这样您就可以确定您使用的 dll 与您测试代码时使用的单词相同，并且您知道它可以工作。使用互操作时可能会出现一些问题，但是，单词互操作是唯一可以确保最正确地转换单词文件的方法。

# java - 观察者与注册回调

> ID：10837439
> 
> 赞同：0
> 
> 时间：2012-05-31T16:18:10.990
> 
> 标签：java, android, design-patterns

使用 Observer 与仅注册回调相比有哪些优缺点，例如：

```
worker.setOnJobIsDone(func); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:33:15.383

如果你使用函数指针，对象完全不知道它的用户；它只是调用一个允许更大灵活性的函数（用户不需要继承任何东西，您可以根据需要连接该对象的用户）。

观察者模式要求你定义一个接口。这不太灵活但更明确。

为了可读性，我更喜欢观察者模式；如果您以前从未见过代码，那么跟踪工作流程会容易得多。用于传递成员函数的 C++ 语法也有点难看。

# android - Android - Eclipse 快速视图不会通过 Escape 关闭 LogCat

> ID：10837443
> 
> 赞同：1
> 
> 时间：2012-05-31T16:18:53.220
> 
> 标签：android, eclipse, escaping, logcat, dismiss

除了 2004 年的 Eclipse 错误报告（我假设已经修复！）之外，似乎找不到任何关于此的内容。

在使用 Eclipse (Galileo) 时，我喜欢将 LogCat 保持在快速视图中，以保持我的屏幕干净且充满代码。但是我经常不得不在追逐错误的同时在代码和 LogCat 之间来回切换。我有一个很好的按键设置来显示快速视图，但不会关闭这个特定的快速视图（是的，它适用于其他快速视图！）。

有什么建议吗？移动鼠标并单击一个不显示 LogCat 的 Eclipse 是我所知道的关闭此快速视图的唯一方法 - 由于我是一名键盘程序员，这不仅是一种痛苦，而且它真的让我慢下来向下。

现在是 2000 字的信息：这是我正常编码屏幕的图片： ![在此处输入图像描述](../Images/33789d5aef06bc97bce5302449883252.png)

以下是 LogCat 的样子： ![在此处输入图像描述](../Images/45ecc9642af8263438efd2dfc9caf4d2.png)

谢谢，-s

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:03:08.933

是的，我也面临这个问题。我现在正在做的是使用**LogCat(deprecated)**。它的工作很好尝试使用已弃用的

# dependency-injection - ServiceStack 中的 Funq 使用

> ID：10837445
> 
> 赞同：7
> 
> 时间：2012-05-31T16:19:02.730
> 
> 标签：dependency-injection, servicestack, funq

*   如何`Container`从控制器访问实例？
*   我必须`Container.Resolve`在我的课堂上使用，但我怎样才能访问`Container`实例？
*   是单例吗？
*   我可以使用`new Container()`还是有类似的链条`Funq.StaticContainer`？

感谢 Mythz[的要点提示](https://gist.github.com/2844693)，a) 或 b) 或 c)。

我将使用 Mythz 的解决方案，它被我接受，但它的模式 ( `ServiceLocator`Pattern) 存在问题，您可以[在此处查看更多信息](http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx)。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-31T19:48:20.463

有几种方法可以静态引用您的 AppHost 实例。您可以通过[IAppHost](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/IAppHost.cs)实例解决依赖关系：

```
HostContext.TryResolve<T>();
HostContext.Resolve<T>();
HostContext.AppHost.TryResolve<T>(); 
```

如果由于某种原因您需要访问具体的`Funq.Container`，您可以通过单例访问它：

```
ServiceStackHost.Instance.Container 
```

在服务、Razor 视图页面等中，您可以使用：

```
base.TryResolve<T>(); 
```

# c - module_init 没有显示我想要的 printk

> ID：10837446
> 
> 赞同：0
> 
> 时间：2012-05-31T16:19:07.743
> 
> 标签：c, linux, module, terminal, kernel

我正在尝试让我的模块显示一个`printk`. 我是新手，所以我可能会遇到一些编程错误。这是我的模块 C 文件：

```
#include <linux/linkage.h>
#include <linux/time.h>
#include <linux/module.h>

asmlinkage long sys_mycall(int myid, char* firstname)
{
    printk ("Hello, %s! \n sys_mycall called from process %d with  ID %d. \n",
        firstname, current->id, myid);

    return 0;
}

static int my_init(void)
{
    return 0;
}

static int my_exit(void)
{
    printk("Goodbye!");
    return 0;
}

module_init(sys_mycall);
module_exit(my_exit); 
```

第一件事是我不知道箭头指针是如何工作的，所以我通常将它从中省略，`printk`这样它就可以完美地编译。如果有人可以给我一个链接或有关如何理解它的东西，我将不胜感激。

当我使用`insmod`在终端中插入它然后使用显示消息时，`dmesg`我通过`module_init`调用获取消息`sys_mycall`但我无法向它添加任何参数并且它显示消息但它不显示任何内容 for`firstname`或 for `myid`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:47:17.613

我认为模块 init 期望函数中没有参数的问题，它必须是 void （你可以以不同的方式添加它们），所以基本上你的函数是用当前在堆栈中的垃圾调用的，这可能不是它可能为零，否则您的内核将崩溃。

你想打印什么？我了解 current->id，但不了解其他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T16:34:12.933

您没有指定日志级别，所以我怀疑它被过滤掉了，低于阈值。在您的格式字符串前面粘贴一个 KERN_WARNING 并验证它是否打印。没有日志级别的消息在 .config 文件中的 CONFIG_DEFAULT_MESSAGE_LOGLEVEL 处解释。

# algorithm - 找到区间的最大子集

> ID：10837453
> 
> 赞同：2
> 
> 时间：2012-05-31T16:19:30.123
> 
> 标签：algorithm, puzzle

我试图在[这里](https://www.interviewstreet.com/challenges/dashboard/#problem/4fbcda3baf3e5)解决这个问题。

另外，发布问题：给你一个 N 个区间的列表。挑战是选择最大的区间子集，使得子集中没有三个区间共享一个公共点？

但无法找到解决方案。这是我到目前为止所尝试的：

1.  DP：不要认为问题有重叠的子问题，所以这不起作用
2.  将其简化为一个图，每个点都是一个顶点，区间是无向图的边。然后问题减少到在图中找到最大长度的不相交路径。也想不出一个巧妙的方法来做到这一点
3.  尝试将其减少到网络流量，但效果不佳。

你们能否给我一些关于如何解决这个问题的提示，或者我是否遗漏了什么。对不起，我做了很长时间后才做算法，最近失去了联系。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T18:44:13.393

我将在不编程的情况下用一般语言给出解决方案。

让我们将段表示为 s [1] , s [2] , ..., s [n]。它们的开头为 b [1] , b [2] ,... b [n]，结尾为 e [1] , e [2] ,... e [n]。

按段的开头对段进行排序，因此 b [1] < b [2] <...< b [n]。如果没有三个段覆盖一个点的条件成立，检查它们就足够了。我们将按照从 b [1]到 b [n]的顺序执行此操作。因此，从 b [1]开始，移动到下一个点，以此类推，直到某个点 b [i]有三个段覆盖它。这些将是段 s [i]和另外两个段，比如说 s [j]和 s [k]。在这三个段中，删除具有最大端点的段，即 max{e [i] , e [j] , e [k]}。移动到下一段的开头 (b [i+1] )。当我们到达 b [n]时，这个过程就完成了。剩下的所有线段构成最大的线段子集，因此没有三个线段共享一个公共点。

为什么这将是最大子集。假设我们的解决方案是 S（段集）。假设存在最优解 S*。再次，按照起点坐标对 S 和 S* 中的段进行排序。现在，我们将遍历 S 和 S* 中的段并比较它们的端点。通过为 S 中的任何第 k 段构造 S，^其结束坐标小于S* 中第 k 段的结束坐标（^(ek) [<] = [ek] *）。因此，S 中的段数不少于 S*（在 S* 中移动，我们总是超过 S）。

如果这还不够令人信服，请先尝试考虑一个更简单的问题，即没有两个片段可以重叠。解决方案是相同的，但更直观地了解为什么它给出了正确的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T03:17:24.670

沙法是对的；

```
#include <iostream>
#include <set>

using namespace std;

class Interval{
public:
int begin;int end;
Interval(){
    begin=0;end=0;
}

Interval(int _b,int _e){
    begin=_b;end=_e;
}

 bool operator==(const Interval& i) const {
     return (begin==i.begin)&&(end==i.end);
 }

 bool operator<(const Interval& i) const {
     return begin<i.begin;
 }
};

int n,t,a,b;
multiset<Interval> inters;
multiset<int> iends;

multiset<Interval>::iterator it1;
multiset<int>::iterator et1;

int main(){
scanf("%d",&t);
while(t--){
    inters.clear();
    iends.clear();
    scanf("%d",&n);
    while(n--){
        scanf("%d %d",&a,&b);
        Interval inter(a,b);
        inters.insert(inter);
    }
    it1=inters.begin();
    while(it1!=inters.end()){
        iends.insert(it1->end);
        et1=iends.lower_bound(it1->begin);
        multiset<int>::iterator t=et1;
        if((++et1!=iends.end())&&(++et1!=iends.end())){
            //æŠŠå‰©ä¸‹çš„çº¿æ®µå…¨éƒ¨åˆ æŽ‰
            while(et1!=iends.end()){
                multiset<int>::iterator te=et1;
                et1++;
                iends.erase(te);
            }
        }
        it1++;
    }
    printf("%d\n",iends.size());
}
system("pause");
return 0;
} 
```

# java - 网页中的可移动对象

> ID：10837458
> 
> 赞同：0
> 
> 时间：2012-05-31T16:19:45.310
> 
> 标签：java, web-applications, metadata

假设我有一个表格和图表站点，我希望能够移动这些项目（拖放）并以某种元数据格式保存结束位置，所以下次用户进入页面时使用相同的页面格式和表格弹出。我对如何格式化后端表有一个想法，但对如何实际编码它并没有一个好主意。有任何想法吗？最好在 java/jsp 中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T16:22:11.290

查看 jquery / jquery-ui。您将无法仅在 java/jsp 中执行此操作。

特别是，请查看这些演示。

jqueryui.com/demos/draggable 和 jqueryui.com/demos/droppable

# uiview - 在 UIView 布局中，什么是“更新周期”？

> ID：10837459
> 
> 赞同：7
> 
> 时间：2012-05-31T16:19:52.117
> 
> 标签：uiview

根据以下[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW28)`-[UIView setNeedsLayout]`：

> 由于此方法不会强制立即更新，而是等待下一个更新周期，因此您可以使用它在更新这些视图中的任何一个之前使多个视图的布局无效。此行为允许您将所有布局更新合并到一个更新周期，这通常对性能更好。

听起来不错 - 但是当我在`setNeedsLayout`没有 then call的情况下使用时`layoutIfNeeded`，我发现我的控件并没有自行布局。我曾希望在下一次显示控件之前会发生“更新周期”，但我想这不是它的工作原理。那么什么是“更新周期”？什么时候发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T12:28:16.053

“更新周期”发生在当前[运行循环](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html#//apple_ref/doc/uid/10000057i-CH16-SW1)周期的末尾。

`setNeedsLayout` **必须**在主线程（主运行循环）上调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T17:31:45.397

这很奇怪，我使用了很多我更改的自定义绘制的东西，并经常调用“[self setNeedsLayout]”，而我从来不需要调用“layoutIfNeeded”......

你确定你的“drawRect”没有问题吗？在您调用“setNeedsLayout”之前，它的数据可能还没有准备好。

以下[线程](https://stackoverflow.com/questions/1503761/what-is-the-most-robust-way-to-force-a-uiview-to-redraw)的第一个答案可以进一步帮助您。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-02T11:42:09.097

我不认为 UIKit 中存在如此明显的错误。作为你，我会检查我的代码是否调用了我覆盖的所有基本方法。特别是在有问题的对象的层次结构父级中。如果这没有帮助，我会用一些标准视图替换自定义父视图，看看问题是否仍然存在。这将有助于隔离问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-11-28T07:00:21.027

请改用 layoutIfNeeded，这会触发立即布局更新。

setNeedsLayout 只是将布局调度到处理程序，一直执行到下一个更新周期。参考： http: [//www.iosinsight.com/setneedslayout-vs-layoutifneeded-explained](http://www.iosinsight.com/setneedslayout-vs-layoutifneeded-explained)

# http - 使用 groovy 和数据发送 POST 已经是 URL 编码的

> ID：10837461
> 
> 赞同：3
> 
> 时间：2012-05-31T16:19:55.877
> 
> 标签：http, encoding, groovy

我正在尝试使用 Groovy HTTPBuilder 发送一个 POST，但我要发送的数据已经是 URL 编码的，所以我希望 HTTPBuilder 按原样发布它。我尝试了以下方法：

```
def validationString = "cmd=_notify-validate&" + postData
def http = new HTTPBuilder(grailsApplication.config.grails.paypal.server)
http.request(Method.POST) {
    uri.path = "/"
    body = validationString
    requestContentType = ContentType.TEXT

    response.success = { response ->
            println response.statusLine
    }
} 
```

但它给了我一个 NullPointerException：

```
java.lang.NullPointerException
at groovyx.net.http.HTTPBuilder$RequestConfigDelegate.setBody(HTTPBuilder.java:1200) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T16:55:18.727

由于您使用的是预编码的表单值，因此您不能使用默认的基于地图的内容类型编码器。您必须指定内容类型，以便`EncoderRegistry`知道如何处理正文。

您可以使用指定正文为 URL 编码字符串的内容类型创建 HttpBuilder：

```
def http = new HTTPBuilder(url, ContentType.URLENC) 
```

或者使请求显式传递内容类型：

```
http.request(Method.POST, ContentType.URLENC) {
  // etc. 
```

* * *

作为参考，我是这样想的——在我读到这个问题之前我不知道。

*   查看`request`方法的 API 文档以了解闭包预期包含的内容。我`HTTPBuilder`只是顺便用过，所以我想看看`body`“应该”或“可能”是什么，以及两者是否不同。
*   请求方法的[四参数版本](http://groovy.codehaus.org/modules/http-builder/apidocs/groovyx/net/http/HTTPBuilder.html#request%28java.lang.Object,%20groovyx.net.http.Method,%20java.lang.Object,%20groovy.lang.Closure%29)链接到[`RequestConfigDelegate`该类](http://groovy.codehaus.org/modules/http-builder/apidocs/groovyx/net/http/HTTPBuilder.RequestConfigDelegate.html)，并表示在其文档中讨论了这些选项。
*   [`RequestConfigDelegate.setBody`方法](http://groovy.codehaus.org/modules/http-builder/apidocs/groovyx/net/http/HTTPBuilder.RequestConfigDelegate.html#setBody%28java.lang.Object%29)，也就是`body`setter，声明主体“[...] 可以是相关[请求编码器](http://groovy.codehaus.org/modules/http-builder/apidocs/groovyx/net/http/EncoderRegistry.html)支持的任何类型。也就是说， 的值`body`将由与当前[请求内容相关联的编码器解释-键入](http://groovy.codehaus.org/modules/http-builder/apidocs/groovyx/net/http/HTTPBuilder.RequestConfigDelegate.html#getRequestContentType%28%29)。”
*   [请求编码器](http://groovy.codehaus.org/modules/http-builder/apidocs/groovyx/net/http/EncoderRegistry.html)链接指向该类`EncoderRegistry`。它有一个采用字符串的[`encode_form`方法](http://groovy.codehaus.org/modules/http-builder/apidocs/groovyx/net/http/EncoderRegistry.html#encodeForm%28java.lang.String,%20java.lang.Object%29)，并声明它“假设字符串是一个已经编码的 POST 字符串”。听起来不错。
*   请求内容类型链接指向一个`HttpBuilder`内部类方法，[`RequestConfigDelegate.getRequestContentType`](http://groovy.codehaus.org/modules/http-builder/apidocs/groovyx/net/http/HTTPBuilder.RequestConfigDelegate.html#getRequestContentType%28%29)该方法又具有指向[`ContentType`enum](http://groovy.codehaus.org/modules/http-builder/apidocs/groovyx/net/http/ContentType.html)的链接。
*   该枚举具有一个[`URLENC`值](http://groovy.codehaus.org/modules/http-builder/apidocs/groovyx/net/http/ContentType.html#URLENC)，使我相信这将是最好的第一个猜测。
*   我尝试让[`HTTPBuilder`ctor 采用 content type](http://groovy.codehaus.org/modules/http-builder/apidocs/index.html)，这很有效。
*   回到`request`方法并注意到有一个版本也采用内容类型。

我猜总时间约为 5-10 分钟，比输入我所做的要短得多。不过，希望它能让你相信，通过文档可以在相对较短的时间*内*找到这种东西。

IMO 这是开发人员培养的一项关键技能，让你看起来像个英雄。它可以很有趣。

# putty - 来自 IP 的 SCP 文件

> ID：10837463
> 
> 赞同：3
> 
> 时间：2012-05-31T16:19:59.730
> 
> 标签：putty, scp

我有一个要下载的 IP 上的文件文件夹。我可以使用 PUTTY 执行此操作吗？

我试过使用

```
scp user@servername:/home/folder-to-download C:\temp\ 
```

但它似乎不起作用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T16:23:19.577

如果您使用的是 putty，则命令为`pscp`. 保罗的`-r`提示也很重要：

```
pscp -r user@servername:/home/folder-to-download C:\temp\ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T16:21:40.153

您需要使其成为递归副本：

```
scp -r user@servername:/home/folder-to-download C:\temp\ 
```

有关可能选项的列表，请参见[scp 手册页](http://linux.die.net/man/1/scp)，包括`-r`.

# jquery - 不使用 jQuery 重新加载的页面转换

> ID：10837464
> 
> 赞同：0
> 
> 时间：2012-05-31T16:20:02.923
> 
> 标签：jquery, ajax, html, web

所以我搜索了一段时间，我想我找到了答案，但我不确定如何应用它。

我的问题是：我有一个有菜单的网站（该网站用 PHP 和 HTML5 编码），每个菜单项都链接到另一个页面。页面的工作方式是：

```
http://domainhere/index.php#home
http://domainhere/index.php#about
http://domainhere/index.php#contact 
```

等等……

到目前为止，该网页并不理想，因为如果用户想直接链接到 about 页面，index.php#home 页面将被加载。我想要的是一个功能，当文档加载地址时，它可以读取主题标签后的值并在我编写的#content div容器中加载适当的内容。到目前为止，我有使用动画和 show()/hide() 的 jQuery 函数来隐藏每个页面的 div。另外，我的主页与其他页面的格式不同，它需要一个动画来减小页眉的大小。我已经阅读了这个并且很多解决方案都提出了 AJAX，但我不确定如何应用它。任何对首发的提醒都会很棒，我会继续努力！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:39:07.100

我使用 jQuery 读取主题标签并对其进行响应的解决方案如下。

我使用的 jQuery 插件：jquery.ba-hashchange.min.js，位于：[http ://benalman.com/projects/jquery-hashchange-plugin/](http://benalman.com/projects/jquery-hashchange-plugin/)

我将哈希更改功能设置为在页面加载和哈希更改时发生。因此，不是从菜单单击调用您的显示/隐藏函数，您只需将它们放在哈希更改函数中并让它处理页面加载和菜单选择。然后，您的菜单链接只需要关心更改哈希即可。

而且，如果您最终切换到使用 AJAX 单独加载页面内容，而不是一举加载整个站点，那么切换中的函数调用可以使 ajax 调用返回特定内容。或者，您可以将主题标签传递给通用 ajax 调用，ajax Web 方法/服务调用可以根据传递的主题标签确定要返回的内容。

```
$(function () {
    $(window).hashchange(function () {
        var hash = location.hash;

        //This part here untested - you'll need to write it custom for your menu.
        switch (hash){
          case "#about":
              ShowAboutDiv(); 
              //this should be the function you already call to show the about div.
              break;
          case "#contact":
              ShowContactDiv();
              break;
          default :
              //show home div, or maybe it already shows.
              break;
        };
    });

    //handle page load hash...
    $(window).hashchange();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T16:30:54.493

如果我的问题是正确的，你可以做这样的事情，

```
$(document).ready(function(){
   var target = location.hash;

   // Code to hide all section

   // Show the section/div whose is placed on url
   $(target).show('fast');

}); 
```

# android - Android上的电话对电话通信

> ID：10837469
> 
> 赞同：0
> 
> 时间：2012-05-31T16:20:18.993
> 
> 标签：android

我正在构建一个将文本消息转换为语音并将它们发送到目的地的应用程序。在另一端，语音被转换回文本消息。

[我想Twilio](http://www.twilio.com/)可能很容易，但我不想使用互联网连接。一个简单的调用应该足以传输数据。

关于我应该如何进行此操作的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:06:26.333

我认为这真的不可能，你的任务会很重......

1.  TTS-没问题 android 有一个用于该[TTS 的库并记录它](http://android-developers.blogspot.com/2009/09/introduction-to-text-to-speech-in.html)

2.  拨打电话并监控状态[拨打电话监控状态](https://stackoverflow.com/questions/1556987/how-to-make-a-phone-call-in-android-and-come-back-to-my-activity-when-the-call-i)

3.  发送您的合成消息 - 无法找到执行此操作的方法，[通过电话网络发送录制的消息](https://stackoverflow.com/questions/3823704/can-i-send-a-short-voice-recording-to-another-non-mobile-phone)似乎有问题有人建议您可以通过扬声器播放录音，麦克风可能会接听，似乎是一个好方法将更多错误引入系统

4.  在另一端必须接听电话 -[接听电话](https://stackoverflow.com/questions/8740223/android-auto-answer-the-incoming-call-programatically)

5.  记录来电 - 这在无根电话上似乎很成问题[记录来电？](https://stackoverflow.com/questions/2283208/is-it-possible-to-record-phone-calls-via-an-android-app)或[记录来电](https://stackoverflow.com/questions/3370278/record-phone-calls-on-android-phone)

6.  在没有服务器后端优势的情况下进行录制并进行可靠的 STT，这也很成问题，因为即使在高端服务器应用程序上的翻译错误有时也很可笑

因此，如果没有带有自定义 rom 的 root 手机，即使您可以克服双翻译 TTS -> STT 的低质量问题，我认为这一切都不可能实现

Twillo 似乎是关于通过网络拨打电话与电话数字网络而不是关于通过电话连接发送文本（本质上）

似乎只是为了避免互联网连接费用（大约 2 秒和几个字节！）

# java - jini starter kit 2.1 用于安装 blitz javaSpaces

> ID：10837470
> 
> 赞同：6
> 
> 时间：2012-05-31T16:20:25.330
> 
> 标签：java, jini, javaspaces

我需要设置 blitz JavaSpaces [(here)](http://www.dancres.org/bjspj/docs/docs/install_guide.html)。在 Blitz 安装指南中，需要的软件包之一是[JINI 2.1 的入门工具包](http://www.dancres.org/bjspj/docs/docs/required_packages.html)，但提供的链接已损坏，我似乎无法在其他任何地方找到它。我一直在查看 Apache River 项目，¿我应该安装它而不是缺少的 JINI 2.1 吗？几乎没有文档或根本没有文档，闪电战正在维护其先决条件之一的断开链接，这确实让我感到烦恼。这让我想到了另一个问题——闪电战实施可靠吗？

多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-09T12:58:33.363

我支持一个遗留应用程序并且也需要这个。您可以在此处找到入门套件：[maven 存储库](http://repo1.maven.org/maven2/com/sun/jini/jini-starterkit/2.1/jini-starterkit-2.1.zip)。

# asp.net-mvc-3 - IsUserInRole 在 CSHTML 中不起作用

> ID：10837472
> 
> 赞同：0
> 
> 时间：2012-05-31T16:20:27.297
> 
> 标签：asp.net-mvc-3

我有这段代码，但我不知道为什么它不能正常工作。我创建了一个自定义角色提供程序。

```
@if (Roles.IsUserInRole(User.Identity.Name, "Manager"))
{
    <li>@Html.ActionLink("User Management", "Index", "User")</li>
} 
```

这是自定义代码，其余未修改。

```
 public override bool IsUserInRole(string username, string roleName)
    {      
        UserRoleType usrt = (from usr in db.Users
                   join usrRole in db.UserRoles on usr.UserID equals usrRole.UserID
                   where usr.Email == username
                   select usrRole.UserRoleType).FirstOrDefault();

        if (roleName.Split(',').Contains(usrt.UserRoleTypeName))
            return true;

        return false;
    } 
```

当我这样做时，这确实有效：

```
UserRoleProvider roleProvider = System.Web.Security.Roles.Provider as UserRoleProvider;

if (roleProvider.IsUserInRole(httpContext.User.Identity.Name, Roles) || String.IsNullOrEmpty(Roles))
            return true; 
```

编辑：

```
 public override string[] GetRolesForUser(string roleName)
    {
        return db.UserRoleTypes.Select(u => u.UserRoleTypeName).ToArray();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:52:48.020

事实证明 GetRolesForUser 是正确编写的，它正在拉取所有用户，因此它基于所有用户进行身份验证，这意味着它首先是。

重新阅读文档以在此处获得我的答案。

[http://msdn.microsoft.com/en-us/library/system.web.security.roleprovider.gettrolesforuser.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.roleprovider.getrolesforuser.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T13:44:23.320

看起来

```
User.IsInRole(角色名)
```

用途

```
MembershipProvider.GetRolesForUser(用户名)
```

我花了一段时间才弄明白。

# nservicebus - NService Bus 3.2 - 自定义 IManageMes sageFailures 和 SLR

> ID：10837475
> 
> 赞同：1
> 
> 时间：2012-05-31T16:20:31.773
> 
> 标签：nservicebus

有没有人可以帮助我完成以下查询：

我一直在考虑通过创建 IManageMes​​sageFailures 的实现来配置我自己的错误处理。

但是，在使用 NServicebus 3.2 提供的 ErrorHandlingSample 配置自定义错误处理后，会禁用二级重试（如评论中所述）。

有谁知道： 1\. 为什么会这样？2\. 是否可以配置自定义错误处理并启用 SLR？

我对 NSB 还很陌生，如果我遗漏了一些明显的东西，我深表歉意。

谢谢马克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T12:57:54.103

SLR 挂钩到默认的故障管理器，这就是您无法将其与您自己的实现结合起来的原因。

# object - SlickGrid 行属性语法？

> ID：10837476
> 
> 赞同：0
> 
> 时间：2012-05-31T16:20:34.440
> 
> 标签：object, syntax, slickgrid

<rant>我对~~缺少~~SlickGrid 文档感到非常沮丧。</rant>

抱歉 - 现在这超出了我的系统。. .

我试图找出在连续单元格中返回值的正确语法。例如，假设我有以下数据：

```
ID   Object      Color
1    This        Red
2    That        White
3    OtherThing  Blue 
```

我想做与此类似的事情（我将以 onMoveRows 事件为例）：

```
grid.onMoveRows = function (rows, insertBefore) {
    for (var i = 0; i < rows.length; i++) {
        if (rows[i].Color == "Blue") {
            // do something
            }
    }
}; 
```

**rows[i].Color == "Blue"**是我的问题。我不知道这个的正确语法（或者即使这是可能的），我在任何地方都找不到它的文档，我不想浪费我的时间试图弄清楚（我已经花了几个小时试图这样做）。

有人可以给我线索吗？

提前致谢 。. .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:39:55.380

'rows' 是一个正在移动的行号数组。
例如，如果您选择了第 1,2 和 5 行，“行”将包含 [0,1,4]（它从 0 开始）。

# javascript - Pagedown 编辑器 insertimagedialog 钩子

> ID：10837480
> 
> 赞同：5
> 
> 时间：2012-05-31T16:20:58.070
> 
> 标签：javascript, markdown, pagedown

我创建了自己的 insertImageDialog 挂钩，以允许直接在编辑器中上传文件。

```
 $('div#insertImageDialog input[type=file]').ajaxfileupload({
                action: $file.attr('data-action'),
                onStart: function() {
                    $loader.show();
                },
                onComplete: function(response) {
                    $loader.hide();
                    if (response.success) {
                        callback(response.imagePath); // <---- oO
                        dialogClose();
                    } else {
                        alert(response.message);
                        $file.val('');
                    }
                }
            }); 
```

这在我第一次插入图像时效果很好。

每次之后，它都会失败，但出现以下异常：

> 未捕获的类型错误：无法调用 null Markdown.Editor.js:1683 commandProto.doLinkOrImage.linkEnteredCallback Markdown.Editor.js:1683 self.initMarkdownEditor.editor.hooks.set.$.ajaxfileupload.onComplete 的方法“removeChild”

上传在编辑器之外工作正常，所以我只能认为这是回调的某种范围问题。

一天中的大部分时间都在为此拉扯我的头发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T13:03:40.503

问题有两个方面

1.  我没有意识到**每次**用户单击图像按钮时都会调用该钩子。这意味着我实际上为文件上传设置了多个“更改”处理程序。
2.  我使用的上传插件希望处理程序注册一次（即使我们清除它）。

我已经在我的[博客](http://ben.onfabrik.com/posts/pagedown-markdown-editor-custom-image-dialog)上记录了完整的工作解决方案。

# asp.net - 使用 Web 服务进行身份验证的自定义成员资格

> ID：10837484
> 
> 赞同：0
> 
> 时间：2012-05-31T16:21:08.967
> 
> 标签：asp.net, asp.net-mvc-3, web-services, membership-provider

我在 ASP.NET MVC 3 中构建 Web 门户，它使用远程 Web 服务作为与数据库通信的唯一方式。Web 服务要求始终在请求标头中传递用户名/密码，否则它会拒绝调用。

我已经重写了 ASP.NET 成员资格，以便我的 ValidateUser 方法将用户名/密码发送到 Web 服务登录方法，如果身份验证成功则返回 true/false。它与 MVC 3 Empty Internet 模板提供的 AcountController 配合使用非常好。由于我必须在每个 Web 服务调用中传递用户名/密码，因此我将它们保存在 Session 中。

我的问题是：

如果我关闭浏览器并重新打开它...我仍然登录到网站，但我的 Session 变量已过期，因此我对 Web 服务的请求都没有被接受，即使我仍然使用凭据登录。

我正在寻找如何将用户登录状态与会话状态同步的好建议。要么让它们都保持不变，直到使用注销，要么让它们都在浏览器关闭时处理。

感谢所有建议:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:06:09.347

当用户使用您的 AccountController 登录时，尝试像这样设置 auth cookie：

```
FormsAuthentication.SetAuthCookie(model.UserName, false); 
```

This should tell ASP.NET to delete the cookie when the browser window is closed. Then, when user opens up a new browser, both the session and the auth cookie should both be destroyed.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T18:17:55.757

会话是客户端的 cookie。表单身份验证（使用您的会员提供商）也使用 cookie。

它们是不同的。

您的身份验证票或 cookie 是否持久？[这个 MS KB](http://support.microsoft.com/kb/910443)将比我在这里更详细地解释事物和场景......

嗯。

# javascript - 在 swf 文件中使用 jQuery 定位文本

> ID：10837485
> 
> 赞同：0
> 
> 时间：2012-05-31T16:21:13.253
> 
> 标签：javascript, jquery, xml, actionscript-3, flash

我有一个连接到 XML 的 SWF 文件，我不知道如何在不获取新的 .fla 或 .swf 文件的情况下定位 SWF 内的链接。我想用 jQuery 或 Javascript 来做这件事有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:26:26.490

您无法访问文件`javascript`内的内容`.swf`。这种类型的元素在带有插件的浏览器中工作，这个文件是插件的二进制代码编译器。

# sql - Rails 执行过多的 SQL

> ID：10837492
> 
> 赞同：1
> 
> 时间：2012-05-31T16:21:42.003
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3

我已经开始通过终端注意到我的 Rails 应用程序产生了太多的 SQL 语句，其中许多不是必需的。我确实记得在某处读过这可能是一个问题，现在随着我的数据增长，它明显减慢了应用程序的速度。

例如，我有包含曲目的版本。艺术家可以被分配到轨道和版本。当我加载一个只有 8 个轨道的版本时，它似乎正在运行数据库中的每个轨道以找到这些关系！？！

例如，请参见下文，这是一个非常小的示例，但这些曲目实际上都没有与发布相关联。它通过数据库中的每一个轨道！

任何通用指针？

```
Artist Load (0.6ms)  SELECT `artists`.* FROM `artists` INNER JOIN `artists_tracks` ON `artists`.`id` = `artists_tracks`.`artist_id` WHERE `artists_tracks`.`track_id` = 12
  Artist Load (0.6ms)  SELECT `artists`.* FROM `artists` INNER JOIN `artists_tracks` ON `artists`.`id` = `artists_tracks`.`artist_id` WHERE `artists_tracks`.`track_id` = 19
  Artist Load (0.6ms)  SELECT `artists`.* FROM `artists` INNER JOIN `artists_tracks` ON `artists`.`id` = `artists_tracks`.`artist_id` WHERE `artists_tracks`.`track_id` = 21
  Artist Load (0.9ms)  SELECT `artists`.* FROM `artists` INNER JOIN `artists_tracks` ON `artists`.`id` = `artists_tracks`.`artist_id` WHERE `artists_tracks`.`track_id` = 22
  Artist Load (0.7ms)  SELECT `artists`.* FROM `artists` INNER JOIN `artists_tracks` ON `artists`.`id` = `artists_tracks`.`artist_id` WHERE `artists_tracks`.`track_id` = 23
  Artist Load (0.6ms)  SELECT `artists`.* FROM `artists` INNER JOIN `artists_tracks` ON `artists`.`id` = `artists_tracks`.`artist_id` WHERE `artists_tracks`.`track_id` = 24
  Artist Load (0.9ms)  SELECT `artists`.* FROM `artists` INNER JOIN `artists_tracks` ON `artists`.`id` = `artists_tracks`.`artist_id` WHERE `artists_tracks`.`track_id` = 25
  Artist Load (1.0ms)  SELECT `artists`.* FROM `artists` INNER JOIN `artists_tracks` ON `artists`.`id` = `artists_tracks`.`artist_id` WHERE `artists_tracks`.`track_id` = 26
  Artist Load (0.6ms)  SELECT `artists`.* FROM `artists` INNER JOIN `artists_tracks` ON `artists`.`id` = `artists_tracks`.`artist_id` WHERE `artists_tracks`.`track_id` = 27
  Artist Load (0.9ms)  SELECT `artists`.* FROM `artists` INNER JOIN `artists_tracks` ON `artists`.`id` = `artists_tracks`.`artist_id` WHERE `artists_tracks`.`track_id` = 28
  Artist Load (0.6ms)  SELECT `artists`.* FROM `artists` INNER JOIN `artists_tracks` ON `artists`.`id` = `artists_tracks`.`artist_id` WHERE `artists_tracks`.`track_id` = 29
  Artist Load (0.6ms)  SELECT `artists`.* FROM `artists` INNER JOIN `artists_tracks` ON `artists`.`id` = `artists_tracks`.`artist_id` WHERE `artists_tracks`.`track_id` = 30
  Artist Load (0.6ms)  SELECT `artists`.* FROM `artists` INNER JOIN `artists_tracks` ON `artists`.`id` = `artists_tracks`.`artist_id` WHERE `artists_tracks`.`track_id` = 31 
```

以下是涉及的模型：

```
class Artist < ActiveRecord::Base  
  has_many :artist_releases
  has_many :releases, :through => :artist_releases 
  has_many :artists_tracks
  has_many :tracks, :through => :artists_tracks
end

class ArtistRelease < ActiveRecord::Base
  belongs_to :artist
  belongs_to :release
end

class ArtistsTrack < ActiveRecord::Base
  belongs_to :artist
  belongs_to :release
  belongs_to :track
end

class Release < ActiveRecord::Base
  has_many :artist_releases
  has_many :artists, :through => :artist_releases
  accepts_nested_attributes_for :artists, :reject_if => lambda { |a| a[:name].blank? }
  accepts_nested_attributes_for :artist_releases    
  has_many :releases_tracks, :dependent => :destroy
  has_many :tracks, :through => :releases_tracks, :order => "releases_tracks.position"
  accepts_nested_attributes_for :tracks, :reject_if => lambda { |a| a[:name].blank? }, :allow_destroy => :true
  accepts_nested_attributes_for :releases_tracks    
end

class ReleasesTrack < ActiveRecord::Base
  default_scope :order => 'releases_tracks.position ASC'
  acts_as_list :scope => :release_id
  belongs_to :release
  belongs_to :track
end

class Track < ActiveRecord::Base
  has_many :releases_tracks, :dependent => :destroy
  has_many :releases, :through => :releases_tracks
  has_many :artists_tracks
  has_many :artists, :through => :artists_tracks
  accepts_nested_attributes_for :artists, :reject_if => lambda { |a| a[:name].blank? }
  accepts_nested_attributes_for :artists_tracks
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T16:32:36.803

从 Rails 生成的查询来看，您似乎正在做这样的事情，当您引用它时，它会单独加载每个艺术家：

```
release.tracks.each{ |t| t.artist } 
```

您应该急切地加载艺术家，以便在单个查询中预先加载它们：

```
release.tracks.includes(:artist).each{ |t| t.artist } 
```

该`includes`方法非常灵活，并且允许您急切地加载多个关联，甚至是嵌套关联：

```
Release.first.includes(:releases_tracks => {:track => :artist}) 
```

这将在 4 个查询（每个表 1 个）中加载第一个版本，然后是它的所有 ReleaseTrack，然后是它们的所有 Track，以及所有 Track 的 Artists。这比单独加载每条记录要高效得多。

[Active Record Query interface guide 中的 Eager Loading Associations](http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations)部分提供了更多信息。

# openssl - Openssl 命令行无法验证之前创建的分离的 smime 签名

> ID：10837494
> 
> 赞同：4
> 
> 时间：2012-05-31T16:21:55.487
> 
> 标签：openssl, signature, verify, pkcs#7, smime

我在 OSX 10.6 上使用 openssl 1.0.1b 的命令行界面。

首先，我创建一个 DSA 密钥。

```
openssl dsaparam -noout -out privatekey.pem -genkey 1024 
```

接下来，我从该密钥创建一个自签名证书。

```
openssl req -new -outform PEM -out certificate.pem -key privatekey.pem -keyform PEM -sha1 -x509 -days 1000 
```

接下来，我使用该证书和密钥来创建文件的分离 smime 签名。

```
openssl smime -sign -in file.zip -out file.zip.signature -outform DER -inkey privatekey.pem -signer certificate.pem 
```

最后我立即尝试验证相同的文件/签名*

```
openssl smime -verify -in file.zip.signature -inform DER -content file.zip -noverify certificate.pem > /dev/null 
```

但不知何故，我得到了一个消化失败。

```
PKCS7 routines:PKCS7_signatureVerify:digest failure:pk7_doit.c:1097:
PKCS7 routines:PKCS7_verify:signature failure:pk7_smime.c:410 
```

没有改变文件，手动 md5 哈希匹配前后，但不知何故签名摘要失败。有没有人知道我做错了什么？

谢谢。

`**请注意，-noverify 用于告诉 openssl 不要警告我证书正在自签名*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T15:12:21.090

我已经弄清楚了这个问题。

因为我没有使用 -binary 标志 openssl 正在将输入文件中的 \n 转换为 \r\n

# html - 在 HTML5 之间进行选择 标签和 Soundmanager2

> ID：10837499
> 
> 赞同：3
> 
> 时间：2012-05-31T16:22:21.050
> 
> 标签：html, audio-streaming, html5-audio, soundmanager2

我正在重新设计一个音乐播放器。目前使用 Soundmanager2 V2.97a.20110801。但是现在既然 HTML5 如此易于使用，我还有什么理由继续使用 Soundmanager2 吗？还是有我不知道的优点？您能否帮助对 2 进行简单的比较和对比？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:32:12.993

Soundmanager 使用 flash，HTML5 音频使用浏览器的本机功能。一个陷阱`<audio>`是您必须至少对音频进行两次编码，分别为 mp3 和 ogg。

另一件事是较旧的浏览器，尤其是 IE8，不支持`<audio>`. 您可能想要[检测](http://diveintohtml5.info/detect.html#video)* 音频支持，如果没有，则回退到 Soundmanager。

*   [关于音频编解码器](http://diveintohtml5.info/video.html#audio-codecs)
    *   该网页谈论`<video>`，但检测`<audio>`几乎以相同的方式完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T16:37:26.520

HTML5 音频标签仍在进行中，不幸的是，在支持的音频格式方面仍然存在太多浏览器特定的差异，无法实现简单的跨浏览器解决方案。

它仍然根据您想要完成的任务而有很大差异。

这是您应该阅读的信息的链接： [http ://www.schillmania.com/projects/soundmanager2/doc/getstarted/#intro](http://www.schillmania.com/projects/soundmanager2/doc/getstarted/#intro)

* * *

这可能有点离题，但我在 github 上构建了一个开源音频库，用于播放像这样的多声道声音......

```
// play the lowest piano key (1)
jThump( 1, 'piano' );

// play the highest piano key (88)
jThump( 88, 'piano' ); 
```

下面是一个简单的演示，当您按下“z”键时会播放随机音符

[http://jthump.com](http://jthump.com)

# wpf - 如何在网格周围加边框

> ID：10837500
> 
> 赞同：0
> 
> 时间：2012-05-31T16:22:23.367
> 
> 标签：wpf

我需要在网格周围和每一行网格周围画一个边框？

围绕一个网格很简单。但是在每一行内我都有另一个网格，所有内部网格都有多列并且在所有列中都有按钮。所以我需要在每一列、每个网格和每个按钮周围绘制边框。

我试图通过对每一行使用多个来做到这一点，但错误来了，你不能在边框内有ribbonbutton。

我需要在每个网格的每一列周围使用多个吗？

我试过了，但没有任何效果。我是 WPF 的新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-14T10:27:13.163

它旨在用于调试目的，但可以帮助您

```
<Grid ShowGridLines="True" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T16:44:14.650

我不确定功能区按钮是否可以在功能区之外使用。这与您的边界问题无关。您可能只需要使用常规按钮。您可以通过多种方式对其进行模板化以改善视觉效果。

这是在网格和单元格周围放置边框的简单示例：

```
<Window x:Class="TestingWPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:properties="clr-namespace:TestingWPF.Properties"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <Style TargetType="{x:Type Border}">
            <Setter Property="BorderThickness" Value="2" />
            <Setter Property="BorderBrush" Value="Red" />
        </Style>
        <Style TargetType="{x:Type Button}">
            <Setter Property="Margin" Value="5" />
            <Setter Property="Content" Value="Test" />
        </Style>
    </Window.Resources>
    <Border BorderBrush="Green" BorderThickness="4" Padding="1">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition />
                <ColumnDefinition />
                <ColumnDefinition />
                <ColumnDefinition />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition />
                <RowDefinition />
                <RowDefinition />
                <RowDefinition />
            </Grid.RowDefinitions>

            <Border Grid.RowSpan="4" Grid.ColumnSpan="4" BorderBrush="#FF00FF51"/>

            <Border Grid.Row="0" Grid.Column="0">
                <Button />
            </Border>
            <Border Grid.Row="0" Grid.Column="1">
                <Button />
            </Border>
            <Border Grid.Row="0" Grid.Column="2">
                <Button />
            </Border>
            <Border Grid.Row="0" Grid.Column="3">
                <Button />
            </Border>

            <Border Grid.Row="1" Grid.Column="0">
                <Button />
            </Border>
            <Border Grid.Row="1" Grid.Column="1">
                <Button />
            </Border>
            <Border Grid.Row="1" Grid.Column="2">
                <Button />
            </Border>
            <Border Grid.Row="1" Grid.Column="3">
                <Button />
            </Border>

            <Border Grid.Row="2" Grid.Column="0">
                <Button />
            </Border>
            <Border Grid.Row="2" Grid.Column="1">
                <Button />
            </Border>
            <Border Grid.Row="2" Grid.Column="2">
                <Button />
            </Border>
            <Border Grid.Row="2" Grid.Column="3">
                <Button />
            </Border>

            <Border Grid.Row="3" Grid.Column="0">
                <Button />
            </Border>
            <Border Grid.Row="3" Grid.Column="1">
                <Button />
            </Border>
            <Border Grid.Row="3" Grid.Column="2">
                <Button />
            </Border>
            <Border Grid.Row="3" Grid.Column="3">
                <Button />
            </Border>
        </Grid>
    </Border>
</Window> 
```

您可以通过在循环中创建网格轻松地在代码中复制它。您可能想研究模板以获得更好的结果，但您必须更具体地说*明您*要完成的工作，而不是您要*如何*完成某事。

# mysql - 临时表卡住数据库——如何优化？

> ID：10837504
> 
> 赞同：3
> 
> 时间：2012-05-31T16:22:45.637
> 
> 标签：mysql, group-by, query-optimization, temp-tables

如果这个问题太具体，我提前道歉，但我认为这是一个相当典型的场景：`join`并且`group by`陷入了数据库和解决它的最佳方法。我的具体问题是我需要根据以下内容创建记分牌：

*   播放 (userid,gameid,score) 40M 行
*   游戏 (gameid) 100K 行
*   app_games (appid,gameid) 即游戏被分组到应用程序中，并且应用程序的总分是所有相关游戏的总和 <20 行

用户可以玩多次，并记录他们在每场比赛中的最佳成绩。制定查询很容易，我已经做了几个变体，但是在负载下它们有一个令人讨厌的趋势，即在“复制临时表”中锁定 30-60 秒。

我能做些什么？是否有我应该调整的服务器变量，或者有没有办法重新制定查询以使其更快？我正在使用的查询的派生版本如下（减去用户表连接来获取名称）：

```
 select userID,sum(score) as cumscore from  
        (select userID, gameID,max(p.score) as score 
        from play p join app_game ag using (gameID)  
        where ag.appID = 1 and p.score>0
        group by userID,gameID ) app_stats 
    group by userid order by cumscore desc limit 0,20; 
```

或作为临时表：

```
 drop table if exists app_stats;
    create temporary table app_stats 
        select userID,gameID,max(p.score) as score 
        from play p join app_game ag using (gameID)  
        where ag.appID = 1 and p.score>0
        group by userid,gameID;
    select userID,sum(score) as cumscore from app_stats group by userid 
        order by cumscore desc limit 0,20; 
```

我的索引如下：

```
show indexes from play;
+-------+------------+----------------------+--------------+------------------+-----------+-------------+----------+--------+------+------------+---------+
| Table | Non_unique | Key_name             | Seq_in_index | Column_name      | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+-------+------------+----------------------+--------------+------------------+-----------+-------------+----------+--------+------+------------+---------+
| play  |          0 | PRIMARY              |            1 | playID           | A         |    38353712 |     NULL | NULL   |      | BTREE      |         |
| play  |          0 | uk_play_uniqueID     |            1 | uniqueID         | A         |    38353712 |     NULL | NULL   | YES  | BTREE      |         |
| play  |          1 | play_score_added     |            1 | dateTimeFinished | A         |    19176856 |     NULL | NULL   | YES  | BTREE      |         |
| play  |          1 | play_score_added     |            2 | score            | A         |    19176856 |     NULL | NULL   |      | BTREE      |         |
| play  |          1 | fk_playData_game     |            1 | gameID           | A         |       76098 |     NULL | NULL   |      | BTREE      |         |
| play  |          1 | user_hiscore         |            1 | userID           | A         |      650062 |     NULL | NULL   | YES  | BTREE      |         |
| play  |          1 | user_hiscore         |            2 | score            | A         |     2397107 |     NULL | NULL   |      | BTREE      |         |
+-------+------------+----------------------+--------------+------------------+-----------+-------------+----------+--------+------+------------+---------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T16:54:43.140

我怀疑创建临时表时的两个查询基本上都需要遍历表中的所有数据（同样在你的 do-everything-at-once 查询中）。如果你有很多数据，那只需要一点时间。

我会维护一个单独的表格，其中包含每个玩家的 ID 和总分。每当您更新播放表时，也要更新汇总表。如果它们不同步，只需停止汇总表并从播放表重新创建数据。（或者如果你已经在你的基础设施中使用了 redis，你可以在那里维护摘要——它具有使这个特定的东西变得非常快的功能）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T16:41:32.263

与其制作临时表，不如尝试制作一个视图。您可以像查询普通表一样查询它，但它也会在视图中的任何数据发生更改时更新。这比每次删除表并重新创建它要快得多。

# c++ - 创建 C++ FTP 服务器

> ID：10837514
> 
> 赞同：2
> 
> 时间：2012-05-31T16:23:31.533
> 
> 标签：c++, sockets, ftp

我需要通过 FTP 将一些文件传输到移动设备。我选择不使用裸套接字，因为我想要 FTP 服务器提供的轻松访问。我想通过 C++ 创建自己的 FTP 服务器。我尝试[了这](http://sourceforge.net/projects/cftpserver/)门课，但试图让它工作时遇到了一些错误。有人知道在构建 C++ FTP 服务器时要使用的类、示例或库吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T16:51:27.393

我会用[`boost::asio`](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio.html). Boost 是一组非常知名的 C++ 库，`asio`是实现网络支持的部分。

[在这里](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio/examples.html)，您可以看到示例列表，从简单示例到 HTTP 服务器。不幸的是，没有创建 FTP 服务器的示例，但上一个链接中的示例将为您指明正确的方向。

当然，如果您不需要构建自己的 FTP 服务器，那么您可以寻找一些完全实现 FTP 服务器的项目。

# excel - 如何使用每个系列的不同 X 值创建具有多个系列的图表？

> ID：10837515
> 
> 赞同：9
> 
> 时间：2012-05-31T16:23:34.887
> 
> 标签：excel, graph, excel-2008

我想画几张图并将它们组合成一个图。我将在一个例子中解释这个问题。假设我想用这些点画两张图：

图 #1（X 和 Y 定义一个坐标）。

```
X - Y
_____

1 - 5
2 - 5
5 - 7
9 - 10 
```

图#2

```
X - Y
_____

6 - 8
8 - 12
9 - 7
12 - 8
15 - 11
21 - 11 
```

我所做的是创建一个图表并单击“选择数据”。在那里我创建了两个系列并选择 X 和 Y 值。但是，这不起作用，因为它不允许我为不同的图形选择不同的 X 值。虽然我为这两个系列选择了不同的 X 值，但两者都选择了第二个。这就是它最终的样子：

![截屏](../Images/e49b7d9ce485c2428c2f2e51b6c978db.png)

你知道如何解决这个问题吗？我正在使用 Excel 2008 for Mac。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-31T16:35:48.080

您需要使用*Scatter*图表类型而不是*Line*。这将允许您为每个系列定义单独的 X 值。

# c++ - 使用中心单元设置 3x3 QGridLayout

> ID：10837516
> 
> 赞同：3
> 
> 时间：2012-05-31T16:23:37.680
> 
> 标签：c++, qt, resize, qgridlayout

我正在用 C++ Qt 4.6.3 开发一个小游戏，我偶然发现了一个布局问题。我正在寻找的布局是一个 3x3 QGridLayout，其中中央单元 (1,1) 包含主要小部件（它是一个棋盘游戏）。(0,1) 单元格应该包含一个 QLabel，显示轮到谁了，(1,0) 和 (1,2) 单元格被细分为 QVBoxLayouts 以容纳最多 3 个记分牌，而 (2,1) -cell 还拥有某种 QLabel。

![布局图](../Images/02b6d1c1dabce657a5ddbad7fed3003e.png)

这是我到目前为止所得到的：

```
QGridLayout *mainLayout = new QGridLayout(this);
QVBoxLayout *leftLayout = new QVBoxLayout;
QVBoxLayout *rightLayout = new QVBoxLayout;  
mainLayout->addLayout(leftLayout,   1, 0, AlignTop);
mainLayout->addWidget(topText,      0, 1, AlignCenter);
mainLayout->addWidget(board,        1, 1);
mainLayout->addLayout(bottomText,   2, 1, AlignCenter);
mainLayout->addLayout(rightLayout,  1, 2, AlignTop); 
```

现在，在 MS Windows（我 GF 的笔记本电脑）上，我通过重新实现`resizeEvent()`函数解决了这个问题：

```
void Game::resizeEvent(QResizeEvent *)
{
    mainLayout->setRowMinimumHeight(1, 0.8 * height());
    mainLayout->setColMinimumWidth(1, 0.8 * height());
    // some other stuff
} 
```

这很好用！但是，在 Unix 上似乎存在问题（或者可能是由于版本差异？4.6 vs 4.8）。在调用该`setRowMininmumHeight()`方法时，似乎发出了另一个 resize-event，导致递归调用！我希望我的应用程序可以在两个平台上运行，所以很明显我必须找到另一个解决方案。我摆弄了一下`setRowStretch()`，`setColStretch()`但这些都没有达到预期的结果。我尝试了各种组合，但现在我很困惑......

有没有人能解决这个看似简单的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T17:08:09.450

您应该使用拉伸而不是最小尺寸来解决问题。在将小部件添加到布局后执行此代码以将 80% 的高度分配给中间行：

```
mainLayout->setRowStretch(0, 1); // 10% for top row
mainLayout->setRowStretch(1, 8); // 80% for middle row
mainLayout->setRowStretch(2, 1); // 10% for bottom row 
```

请注意，包含的小部件的最小尺寸约束仍然受到尊重（除非您将尺寸策略设置为忽略）。因此，如果您想将整个高度减去第 0 行和第 2 行的两个最小尺寸（正如您所说的它们应该“尽可能小”），请将 100% 分配给中间行，将 0% 分配给第 0 行2；他们仍然尊重最小尺寸：

```
mainLayout->setRowMinimumHeight(0, 20); // 20px for top row
mainLayout->setRowMinimumHeight(2, 20); // 20px for bottom row
mainLayout->setRowStretch(0, 0);
mainLayout->setRowStretch(1, 1); // remaining height for middle row
mainLayout->setRowStretch(2, 0); 
```

# wpf - WPF 将 selectedvalue 数据网格绑定到组合框

> ID：10837517
> 
> 赞同：0
> 
> 时间：2012-05-31T16:23:40.933
> 
> 标签：wpf, binding, datagrid, combobox, selectedvalue

我有一个数据网格，其数据绑定到具有多个属性的类。当我可以更改值时，我需要将选定的行值绑定到几个组合框或文本框（两种方式绑定）。想象一下，数据网格有一个 Person 列表，其属性如 Age 和 Name 与 2 个组合框相关联，我可以在其中选择值。

如何将所选值属性绑定到组合框？

提前致谢！

编辑：如果可能的话，我更喜欢在 xaml

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T09:08:23.617

在数据网格上，您需要使用 Name 属性指定控件的名称。

```
<DataGrid Name= "dgPersons"/> 
```

在组合框上，您可以参考数据网格来绑定所选值。

```
<ComboBox SelectedValue="{Binding ElementName=dgPerosn,Path=SelectedItem.PersonId,Mode=TwoWay}/> 
```

# azure - Azure - 发布到 Azure 时如何忽略（不发布）特定文件

> ID：10837520
> 
> 赞同：2
> 
> 时间：2012-05-31T16:23:46.743
> 
> 标签：azure

我发现了一个关于 -[忽略一个项目](https://stackoverflow.com/questions/5914279/ignore-files-in-windows-azure-virtual-application)

但是，我不想将某些单独的文件或文件夹（在 Web 应用程序内）发布到 Azure。例如 InternalOnly.aspx、/LocalOnlyFolder/

有什么办法可以设置不发布的文件或文件夹列表？

预先感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T18:21:04.713

任何您不想发布的文件，您只需将文件属性设置为“复制到输出目录不复制”。这样，当您打包应用程序时，该特定文件将不会成为包的一部分，并且永远不会在 Azure 上。

![在此处输入图像描述](../Images/8f1ecc7037d986038de0179ef964d4c6.png)

如您所见，ASPX 将不在包中：

![在此处输入图像描述](../Images/133f3bfcac9cce6403ea42cf6cb288dc.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T16:41:06.740

您可以从 blob 存储中提取代码，而不是与您的部署捆绑。这使您可以有效地控制“部署”容器中的内容。

# facebook - 跟踪 OAuth 视图

> ID：10837524
> 
> 赞同：0
> 
> 时间：2012-05-31T16:24:14.387
> 
> 标签：facebook, oauth

我想知道是否有人有任何关于跟踪显示我们的应用程序身份验证对话框的用户的信息？

更具体地说，当新用户尝试启动我们的应用程序时，他们将被引导至 Auth Dialog Screen。在连接 FB 的站点中，将通过 FbJS SDK 出现一个浏览器弹出窗口。

在用户决定允许或禁止权限之前，我们可以调用服务器上的页面吗？也许是某种像素跟踪？我不是在谈论 Facebook Insights，我们想自己处理跟踪。我在 Google 或 FB Docs 上找不到太多关于该主题的信息。

我非常有信心答案是肯定的，但我想如果有人能给出答案，那就是你们。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:37:58.487

当用户单击触发 JS SDK 方法调用的按钮/链接时，您为什么不向您的服务器发出 AJAX 请求……？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T18:48:11.230

如果我正确理解了您的问题，您想知道是否有可能掌握显示授权对话框的数量，然后再不允许您的应用访问？

假设您知道有多少用户授予您访问权限，那么问题应该通过您开始跟踪您启动了多少 FB 弹出窗口来解决。即您启动了多少个授权过程。取那个数字并减去成功完成的数字，这就是你从未点击过“允许”的人数。

这是我相信你可以使用的唯一指标，但它应该就足够了。

无法跟踪授权页面本身发生的情况，因为它完全不受您的控制。

# email - Magento 使用 CSV 发送帖子

> ID：10837525
> 
> 赞同：2
> 
> 时间：2012-05-31T16:24:27.890
> 
> 标签：email, magento, csv, attachment

我有一个通过电子邮件发送给店主的表格。没什么特别的，只是一堆输入字段和选择字段。

我正在尝试将其转换为附加到电子邮件的 CSV 文件。

在我的控制器中，我有：

```
 public function postAction() {
    $post = $this->getRequest()->getPost();
    if ($post) {
        #Mage::log($post,null,'tmp.log');

        #not using this at the moment...
        $postObject = new Varien_Object();
        $postObject->setData($post);

        $file = fopen('temp/temp.csv','w+');

        foreach($post as $sections) {
            fputcsv($file, $sections);
        };

        fclose($file);

        $mailTemplate = Mage::getModel('core/email_template')->loadDefault('training_email_template');
        $mailTemplate->setSenderName('Joe Schmoe');
        $mailTemplate->setSenderEmail('eat@joes.com');
        $mailTemplate->setTemplateSubject('Form Submission');
        $attachment = $mailTemplate->getMail()->createAttachment($file);
        $attachment->filename = 'file.csv';

        $mailTemplate->send(
            'store@owner.com',
            Mage::getStoreConfig(self::XML_PATH_EMAIL_SENDER),
            $post
        );
    }
} 
```

现在文件本身被创建了，我可以很好地打开 temp.csv，看起来应该是这样。但是，附加的文件是空的，或者（当我尝试了其他一些事情时）编码会很不稳定......显然不是正确的格式。

感觉我只是在这里遗漏了一些简单的东西......有人有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T16:42:03.807

您将文件资源作为参数发送到`createAttachment()`. 它应该是一个字符串。尝试这个：

```
$mailTemplate->getMail()->createAttachment(
    file_get_contents('temp/temp.csv'),
    Zend_Mime::TYPE_OCTETSTREAM,
    Zend_Mime::DISPOSITION_ATTACHMENT,
    Zend_Mime::ENCODING_BASE64,
    'file.csv'
); 
```

[这是Zend_Mail](http://framework.zend.com/manual/en/zend.mail.attachments.html)的文档

```
/**  
 * Creates a Zend_Mime_Part attachment
 *
 * Attachment is automatically added to the mail object after creation. The
 * attachment object is returned to allow for further manipulation.
 *
 * @param  string         $body
 * @param  string         $mimeType
 * @param  string         $disposition
 * @param  string         $encoding
 * @param  string         $filename OPTIONAL A filename for the attachment
 * @return Zend_Mime_Part Newly created Zend_Mime_Part object (to allow
 * advanced settings)
 */
public function createAttachment($body,
                                 $mimeType    = Zend_Mime::TYPE_OCTETSTREAM,
                                 $disposition = Zend_Mime::DISPOSITION_ATTACHMENT,
                                 $encoding    = Zend_Mime::ENCODING_BASE64,
                                 $filename    = null) 
```

# javascript - jquery重新加载后dojo组件未解析

> ID：10837530
> 
> 赞同：2
> 
> 时间：2012-05-31T16:25:01.127
> 
> 标签：javascript, jquery, dom, dojo

每个人。我正在处理的当前项目需要一个 DOJO 选项卡式窗格来保存来自 DB 的数据，并且它需要刷新页面的一部分（一个 id 为“可刷新”的 div，其中包含选项卡式窗格 div）以保持选项卡式窗格中的数据向上-迄今为止。

这里的问题是当我用萤火虫调用以下方法时

```
j('#refreshable').load(url+' #refreshable > *', function (response) {
    console.log("hello");
    dojo.parser.parse(Dojo.byId('tabbedPane'));
    console.log("hello again !");
}); 
```

似乎在萤火虫控制台中只显示“你好”但没有“再次你好！” 没有任何错误信息。似乎对 Dojo 解析器的调用在 jquery reload 函数中被破坏了。

然后结果是每次刷新“可刷新”时，选项卡式窗格中的所有表都会显示在堆栈上——Dojo 解析器失败。

我该如何解决这个问题？提前致谢 ！。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-16T09:30:29.483

这里有几件事是错误的：1）大写的“Dojo”。dojo 总是小写，句号。2）你“持有错误”。您需要掌握小部件实例及其生命周期的概念。

似乎您使用的是旧的 AMD 之前（1.7？左右）版本的 dojo，因为否则 dojo 不会作为全局变量导出。

如果是较新版本，则必须查看文档以获取较新版本。

那么你的 dojo 片段做了什么：

dojo.byId('foo') 返回给定 domNode 的引用，但它是 ID 属性。dojo.parser.parse(node) 解析节点，在其上查找 data-dojo-type 或 dojo-type 属性，并在其上实例化相应的小部件。

如果你多次解析，你会得到各种各样的错误，因为你正在做你不应该做的事情：

试图重新解析已经实例化的小部件。

您不能重新解析已经实例化的 dojo 小部件。即使您清除了 dom 并重置它，您也会在小部件注册表中泄漏一个实例。

你必须先摧毁它。

为此，在伪代码中：

```
require(['dijit/_base/registry'], function(registry){
 registry.byNode(document.getElementById('tabbedPane'))[0].destroy();
}) 
```

这个片段是异步的，因为它使用了 require。如果你使用非amd dojo，你可以简单地做`dijit.byNode(document.getElementById('tabbedPane'))[0].destroy();`

# asp.net - ASP.NET AJAX 选项卡容器

> ID：10837535
> 
> 赞同：0
> 
> 时间：2012-05-31T16:25:13.203
> 
> 标签：asp.net, vb.net, ajaxcontroltoolkit

我需要一个类似标签的 Asp 网站控件。这是 AJAX Control Toolkit Tab Container 的教程。下面的代码调试成功，但浏览器上没有显示任何内容。请解释。

```
<cc1:TabContainer ID="TabContainer1" runat="server" ActiveTabIndex="0" 
            Width="600">
            <cc1:TabPanel ID="TabPanel1" runat="server">
                <HeaderTemplate>
                   Tab Panel One
                  </HeaderTemplate>
                <ContentTemplate>
                    <asp:Image ID="Image1" runat="server" Height="140px" ImageUrl="~/dg1.gif" 
                        Width="138px" />
                    Tab Panel1
                </ContentTemplate>
            </cc1:TabPanel>
            <cc1:TabPanel ID="TabPanel2" runat="server">
                <HeaderTemplate>
                  Tab Panel Two
                 </HeaderTemplate>
                <ContentTemplate>
                    <asp:RadioButtonList ID="RadioButtonList1" runat="server">
                        <asp:ListItem>Items</asp:ListItem>
                        <asp:ListItem>Items</asp:ListItem>
                        <asp:ListItem>Items</asp:ListItem>
                        <asp:ListItem>Itens</asp:ListItem>
                        <asp:ListItem>Items</asp:ListItem>
                       <asp:ListItem>Items</asp:ListItem>
                    </asp:RadioButtonList>
                    <asp:Image ID="Image3" runat="server" Height="89px" ImageUrl="~/dg2.gif" 
                        Width="122px" />
                    Tab Panel2
                </ContentTemplate>
            </cc1:TabPanel>
            <cc1:TabPanel ID="TabPanel3" runat="server">
                <HeaderTemplate>
                  Tab Panel Three
                 </HeaderTemplate>
                <ContentTemplate>
                    <asp:Image ID="Image2" runat="server" Height="151px" ImageUrl="~/dg3.gif" 
                        Width="106px" />
                    Tab panel 3
                </ContentTemplate>
            </cc1:TabPanel>
       </cc1:TabContainer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:03:42.990

您是否在页面上添加了一个`scripmanager`并`<%@ Register`在您的页面上为 ajax 控件工具包添加了一个？
你的代码对我来说很好。

# mysql - 按 IP 地址范围匹配的 MySQL 详细记录汇总 - 需要 mySQL Jedi Knight

> ID：10837536
> 
> 赞同：1
> 
> 时间：2012-05-31T16:25:14.073
> 
> 标签：mysql

因此，我必须利用 SO 必须提供的最伟大的 mySQL 头脑的所有力量。我必须根据每条记录中的 IP 地址汇总详细记录。这是场景：

简而言之，我们有联盟想知道：“***我联盟中的哪些学校观看了哪些视频多少次***”？在 SQL 术语中，它相当于对详细记录进行计数，按它可能属于哪个 IP 范围进行分组。

1.  我们有几个大学联盟——每个联盟都有几个不同的学校是成员。
2.  联盟内的每所学校都使用不同的 IP 范围来访问我们为这些学校提供的视频。
3.  IP 范围使用通配符指定，因此每所学校都指定诸如“100.200.35.x、100.201.xx、100.202.39.50 等”之类的内容，每所学校的平均范围数为 10 或 15。
4.  要汇总的原始文本日志文件已经在数据库中（每个日志条目一行），并且具有访问视频文件的实际 IP 地址。
5.  有 100 条数以百万计的详细记录，所以我完全预计这是一个长期缓慢的过程，会运行相当长的时间。
6.  存在可以将通配符“分解”到所代表的各个 IP 中的 PHP 脚本，但我担心这将是最终答案，可能需要数周时间才能运行。

（*为了简单起见，我只会参考被访问的视频文件名并计算它的日志条目，但实际上所有细节，如开始/停止/持续时间等都在那里，最终将成为一部分这个解决方案的*。）

使用 Consortium 记录如下内容：（*除日志详细信息外的所有表设计均可供建议*）：

```
| id|consortium   |
| 10|Ivy League   |
| 20|California   | 
```

School/IP 记录如下内容：

```
|  id|school     |consortium_id|
| 101|Harvard    |10           |
| 102|Yale       |10           |
| 103|UCLA       |20           |
| 104|Berkeley   |20           |

| id|school_id|ip_range         |
|  1| 101     |100.200.x.x      |
|  2| 101     |100.201.65.x     |
|  3| 101     |100.202.39.50    |
|  4| 101     |100.202.39.51    |
|  5| 101     |100.200.x.x      |
|  6| 101     |100.201.65.x     |
|  7| 101     |100.202.39.50    | 
```

详细记录如下：

```
|session     |ip_address     |filename          |
|560554790925|100.202.390.500|history101.mp4    |
|406417611526|43.22.90.5     |newsreel.mp4      |
|650423700223|100.202.39.50  |history101.mp4    |
|650423700223|100.202.50.12  |science101.mp4    |
|513057324209|100.202.39.56  |history101.mp4    | 
```

我喜欢认为我对 mySQL 非常方便，但是这个正在扩展它，并且希望有人可以提供一个壮观的功能或一组步骤。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T16:34:18.510

使用您现有的数据结构，您可以按如下方式进行字符串匹配（但效率不高）：

```
SELECT   schools.school, detail.filename, COUNT(*)
FROM     schools
    JOIN ipranges ON schools.id = ipranges.school_id
    JOIN detail   ON detail.ip_address LIKE REPLACE(ipranges.ip_range, 'x', '%')
WHERE    schools.consortium_id = ?
GROUP BY schools.school, detail.filename 
```

更好的方法是将您的 IP 范围存储为网络地址和前缀长度：

```
ALTER TABLE ipranges
  ADD COLUMN network INT UNSIGNED,
  ADD COLUMN prefix  TINYINT;
UPDATE ipranges SET
  network = INET_ATON(REPLACE(ip_range, 'x', 0)),
  prefix  = 32 - 8*(CHAR_LENGTH(ip_range) - CHAR_LENGTH(REPLACE(ip_range,'x',''));
ALTER TABLE ipranges
  DROP COLUMN ip_range;

ALTER TABLE detail
  ADD COLUMN ip_address_new INT UNSIGNED;
UPDATE detail SET
  ip_address_new = INET_ATON(ip_address);
ALTER TABLE detail
  DROP COLUMN ip_address,
  CHANGE ip_address_new ip_address INT UNSIGNED; 
```

那么它只是执行一些位比较的情况：

```
SELECT   schools.school, detail.filename, COUNT(*)
FROM     schools
    JOIN ipranges ON schools.id = ipranges.school_id
    JOIN detail   ON detail.ip_address & ~((1 << 32 - ipranges.prefix) - 1)
                   = ipranges.network
WHERE    schools.consortium_id = ?
GROUP BY schools.school, detail.filename 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T16:51:35.560

```
SELECT D.filename, S.school, COUNT(D.*)
FROM detail_records AS D
     INNER JOIN ip_map AS I ON D.ip_address LIKE CONCAT(SUBSTRING(I.ip_range, 1, LOCATE('x', I.ip_range)-1), '%')
     INNER JOIN school AS S ON S.id = I.school_id
     INNER JOIN consortium AS C ON C.id = S.consortium_id
WHERE S.consortium_id = <consortium identifier>
GROUP BY D.filename, S.school 
```

# jena - Fuseki 服务功能 - 以编程方式

> ID：10837538
> 
> 赞同：2
> 
> 时间：2012-05-31T16:25:24.107
> 
> 标签：jena

我正在使用提供的配置文件启动一个 fuseki 服务器（见下文）。我想做的是在创建服务后检索服务的功能。原因是，可能有多个这样的 SPARQL 服务（可通过网络获得，但我不知道功能），我想根据它们的功能选择一些（例如，具有更新功能的服务）。有没有办法以编程方式找到（即服务能力）？对此的任何建议将不胜感激。

## 配置文件

```
@prefix :        <#> .
@prefix fuseki:  <http://jena.apache.org/fuseki#> .
@prefix rdf:     <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs:   <http://www.w3.org/2000/01/rdf-schema#> .
@prefix tdb:     <http://jena.hpl.hp.com/2008/tdb#> .
@prefix ja:      <http://jena.hpl.hp.com/2005/11/Assembler#> .

[] rdf:type fuseki:Server ;
   fuseki:services (
     <#animal_service_pellet>
   ) .

# TDB
[] ja:loadClass "com.hp.hpl.jena.tdb.TDB" .
tdb:DatasetTDB  rdfs:subClassOf  ja:RDFDataset .
tdb:GraphTDB    rdfs:subClassOf  ja:Model .

<#animal_service_pellet> rdf:type fuseki:Service ;
    rdfs:label                          "TDB Service (RW)" ;
    fuseki:name                         "animals/pellet" ;
    fuseki:serviceQuery                 "query" ;
    fuseki:serviceQuery                 "sparql" ;
    fuseki:serviceUpdate                "update" ;
    fuseki:serviceUpload                "upload" ;
    fuseki:serviceReadWriteGraphStore   "data" ;
    fuseki:serviceReadGraphStore        "get" ;
    fuseki:dataset                      <#inferred_pellet> ;
    .

<#inferred_pellet>
  a ja:RDFDataset;
    ja:defaultGraph [
                      a ja:InfModel;
                      ja:reasoner [
                                    ja:reasonerClass "org.mindswap.pellet.jena.PelletReasonerFactory";
                                  ];
                      ja:baseModel <#data_and_ontology_graph>
                    ];
  .

<#data_and_ontology_graph>
  a tdb:GraphTDB ;
  tdb:location "TDB_LOC" ;
  . 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:42:38.717

Jena 用户邮件列表中也提出了同样的问题。

[http://mail-archives.apache.org/mod_mbox/jena-users/201206.mbox/%3C4FC884AE.5020409%40apache.org%3E](http://mail-archives.apache.org/mod_mbox/jena-users/201206.mbox/%3C4FC884AE.5020409%40apache.org%3E)

试试 DatasetRegistry - 有一个全局的，通过它的 get() 静态访问。

org.apache.jena.fuseki.server.DatasetRegistry

另一种方法是将配置文件作为 RDF 读取并查看。

配置解析器在 FusekiConfig

将来，将支持 SPARQL 服务描述 [1]。欢迎投稿。

[1] [http://www.w3.org/TR/sparql11-service-description/](http://www.w3.org/TR/sparql11-service-description/)

# java - 应用程序运行 (F5) 但不构建 (F6)

> ID：10837540
> 
> 赞同：0
> 
> 时间：2012-05-31T16:25:41.103
> 
> 标签：java, netbeans, jdbc, eclipselink

好的，我刚开始使用 Java，所以我无法理解 [调试器的输出](http://pastebin.com/A5brzMEK)。它指向的这两行包含：

```
<j2seproject3:javac gensrcdir="${build.generated.sources.dir}"/> 
```

和

```
<javac debug="@{debug}" deprecation="${javac.deprecation}" destdir="@{destdir}" encoding="${source.encoding}" excludes="@{excludes}" executable="${platform.javac}" fork="yes" includeantruntime="false" includes="@{includes}" source="${javac.source}" sourcepath="@{sourcepath}" srcdir="@{srcdir}" target="${javac.target}" tempdir="${java.io.tmpdir}"> 
```

我想开始使用它，而不是通过 NetBeans！^^'

# iphone - 在特定标签栏选中或突出显示按钮 selectedindex

> ID：10837541
> 
> 赞同：0
> 
> 时间：2012-05-31T16:25:41.183
> 
> 标签：iphone, objective-c, ios5, uibutton, uitabbarcontroller

[我创建了一个按钮，并使用本指南](http://idevrecipes.com/2010/12/16/raised-center-tab-bar-button/)将其放在标签栏上。

我希望仅当 selectedIndex 为 2 时才突出显示/选择此按钮。当 selectedIndex 为 0 1 3 4 时，我不希望其处于正常状态。这可能吗？

我尝试了以下操作，它突出显示了该按钮，但是一旦我单击该按钮，突出显示就会消失并且不会返回。

```
if (self.tabBarController.selectedIndex == 2) {
    button.selected = YES;
    button.highlighted = YES;
}else {      
    button.selected = NO;
    button.highlighted = NO;
} 
```

如有必要，在标签栏上加载按钮的代码：

```
UIButton* button = [UIButton buttonWithType:UIButtonTypeCustom];
CGRect buttonFrame = button.frame;
buttonFrame.size.height = 55;
buttonFrame.size.width = 64;
buttonFrame.origin.x = 128;
buttonFrame.origin.y = 424;
button.frame = buttonFrame;
[button setBackgroundImage:[UIImage imageNamed:@"button.png"] forState:UIControlStateNormal];
[button setBackgroundImage:[UIImage imageNamed:@"buttonhighlight.png"] forState:UIControlStateHighlighted];
[button setBackgroundImage:[UIImage imageNamed:@"buttonhighlight.png"] forState:UIControlStateSelected];

[button addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];

[_tabBarController.view addSubview:button]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T21:12:01.937

你在哪里调用你的按钮突出显示代码？我认为每次触摸选项卡时都需要调用它（实现知道用户何时切换选项卡的`UITabBarControllerDelegate`方法）。`tabBarController:didSelectViewController:`

例子：

```
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController { 

    if([viewController.title isEqualToString:@"View controller 1"]) {

        NSLog(@"View controller 1 was selected");

    } else {

        NSLog(@"Some other view controller was selected");

     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T23:13:16.787

iv 将此添加到我的自定义 tabbar.m 文件中。

```
- (void)tabBar:(UITabBar *)theTabBar didSelectItem:(UITabBarItem *)item {
NSUInteger indexOfTab = [[theTabBar items] indexOfObject:item];
NSLog(@"Tab index = %u", indexOfTab);

if (indexOfTab == 0) {
    [button setSelected:false];
}
if (indexOfTab == 1) {
    [button setSelected:false];
}

if (indexOfTab == 3) {
        [button setSelected:false];
    }
if (indexOfTab == 4) {
        [button setSelected:false];

    }
}

- (void)buttonPressed:(id)sender {
        [button setSelected:true];

        [self setSelectedIndex:2];} 
```

这对我有用，希望对其他人有帮助....

# .net - Linq to sql 没有正确更新

> ID：10837543
> 
> 赞同：0
> 
> 时间：2012-05-31T16:25:56.707
> 
> 标签：.net, linq-to-sql

我正在尝试使用 linq to sql 更新记录。该代码不会引发任何错误，但更改不会进入数据库。我不知道如何调试这个问题。为数据上下文启用了对象跟踪，如此处建议的[LINQ to SQL database row not updated](https://stackoverflow.com/questions/6390808/linq-to-sql-database-row-not-updating)

我确信我的数据上下文指向正确的数据库。

```
 Dim myAverageWeeklyLab As AverageWeeklyLab = (From l In myAlexanderValidation.AverageWeeklyLabs Where l.labname = lab).First
        myAverageWeeklyLab.GracePeriod = standardDeviation  
        myAlexanderValidation.SubmitChanges()  //this should set the gracePeriod field=standardDeviation, but does not 
```

我错过了什么？我可以采取哪些步骤来调试此问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:29:03.387

确保您的表作为主键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T16:32:33.190

替换`.First`为`.First()`

确保`myAlexanderValidation`是一个`DataContext`

在每一行的末尾放置一个分号

# iframe - 跨域 iFrame - cookie 未传输

> ID：10837546
> 
> 赞同：0
> 
> 时间：2012-05-31T16:26:05.090
> 
> 标签：iframe, cookies, google-analytics, cross-domain, tracking

我们有一个网站，我们的应用程序在多个域和子域的 iFrame 中运行。主网站 (www.example.com) 只有静态内容，其中包含指向带有框架应用程序站点的站点的链接。所以 sub.example.com、sub2.example.com、search.another.com 都有运行应用程序的所有 iFrame。

我们希望使用 Google Analytics (GA) 跟踪所有这些网站。子域跟踪工作正常，但我找不到使跨域准确工作的方法。主要问题是我无法在顶级域之间共享访问者 cookie 信息。因此，访问 sub.example.com 和 search.another.com 的同一访问者会获得 2 个不同的 cookie，这会导致各种问题。（例如膨胀的访客计数器，无法正确跟踪推荐信息等）

你能帮我解决这个问题吗？

（我在网上做了一个相当彻底的搜索，尝试了几个场景，但到目前为止没有运气）

这是我们 GA 实现的核心：

在 sub.example.com（以及主网站的所有子域）上

```
_gaq.push(['b._setAccount', 'UA-XXX']);
_gaq.push(['b._setDomainName', 'example.com']);
_gaq.push(['b._setAllowLinker', true]);
_gaq.push(['b._addIgnoredRef', 'example.com']);
_gaq.push(['b._addIgnoredRef', 'search.another.com']);
_gaq.push(['b._trackPageview']); 
```

在 search.another.com 上（所有外部子域都有变体）

```
_gaq.push(['b._setAccount', 'UA-XXX']);
_gaq.push(['b._setDomainName', 'search.another.com']);
_gaq.push(['b._setAllowLinker', true]);
_gaq.push(['b._addIgnoredRef', 'example.com']);
_gaq.push(['b._addIgnoredRef', 'search.another.com']);
_gaq.push(['b._trackPageview']); 
```

就在所有页面上的 iframe 之后

```
 <script type="text/javascript">
    _gaq.push(function ()
    {
      var iFrameTracker = _gat._getTrackerByName('b');
      var iframe = document.getElementById('myframe');
      iframe.src = iFrameTracker._getLinkerUrl(iframe.src);
    });
  </script> 
```

在 www.example.com 上的链接上

```
<a href="http://search.another.com" onClick="_gaq.push(function ()
  {
    var tracker = _gat._getTrackerByName('b');
    var linkerUrl = tracker._getLinkerUrl('http://search.another.com');
  });"> 
```

linkerUrl 具有正确的 Url 和 www.example.com 的 cookie。但出于某种奇怪的原因，GA 在 search.another.com 上分配了一个新的 cookie。我尝试将域名设置为无（['b._setDomainName', 'none']），但没有帮助。我不确定我是否在这里遗漏了一个简单的基本点。我猜这个问题可能与跨域 iFrame 有关，链接可以在 iFrame 或框架集中。所以我想跟踪两者。

我使用 Chrome GA Debugger 插件进行调试。

（顺便说一句，理论上我们可以拥有无​​限数量的顶级/子域。因此，不能在 GA 上手动为每个域创建过滤器。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T18:15:05.513

您只是将 linkerUrl 分配给一个变量。您需要将用户重定向到该网址。

您应该在 onClick 处理程序上返回 false 以防止浏览器执行通常的重定向。

```
<a href="http://search.another.com" onClick="_gaq.push(function ()
  {
    var tracker = _gat._getTrackerByName('b');
    var linkerUrl = tracker._getLinkerUrl('http://search.another.com');
    window.location.href = linkerUrl;
  });return false;"> 
```

或者，您应该使用`_link`. 这几乎是一样的。

```
<a href="http://search.another.com" 
   onClick="_gaq.push(['b._link', this.href]);return false;"> 
```

# c - 用 C 语言更新表格格式

> ID：10837548
> 
> 赞同：3
> 
> 时间：2012-05-31T16:26:10.593
> 
> 标签：c, printf, tabular

我正在使用 C 语言。我想显示一个表格。我知道如何使用`printf`. 但是我有很多记录（超过几千条），我想一直在屏幕上保留两件事，并让记录的中间部分不断更新......

假设这里有一个表：

```
================================
No.| Name | Some Data | Comments
================================
001   xyz     234        abc
002   uvw     5862       abc
003   lmn     8993       abc
004
005
006
007
...
...
================================
Some result analysis goes here: 
================================ 
```

现在让我们假设这个表中有数千个条目，并且在不到一秒的时间内这个表正在更新，最终会发生什么？我将松开表格的页眉和页脚，例如：否，名称，一些数据和注释，以及页脚结果分析..

我想要的是不断更新条目，但保留表格的页眉和页脚。我该如何实现这个！任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T16:33:44.163

我会看一个像[curses](http://en.wikipedia.org/wiki/Curses_%28programming_library%29)这样的 TUI 库。

> Curses 旨在促进纯文本设备上的类似 GUI 的功能，例如在控制台模式下运行的 PC、硬件 ANSI 终端、Telnet 或 SSH 客户端或类似设备。

在 Curses 中，您可以在屏幕上创建包含页眉、页脚和数据的区域，并处理一些键盘键以实现滚动行。大概其他 TUI 库具有类似的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T16:30:52.027

假设您在具有典型终端的 Unix 环境中，您可以使用[GotoXY()](http://www.cprogramming.com/snippets/source-code/gotoxy)。

使用该功能，您可以将光标向上移动到顶行（标题下方），打印一堆行，然后再次返回顶行以打印更多内容。

您必须跟踪已打印的行数（以及适合的行数），但这应该是一些相对微不足道的计数。

该代码使用终端转义序列来控制光标移动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T16:46:01.760

您使用的是 Unix/Linux 系统吗？如果是，可能你有[ncurses](http://www.gnu.org/software/ncurses/)库（man 3）。它是一个操作字符界面的库。
您可以创建“窗口”（屏幕部分）并仅更新此部分（保留页眉和页脚）。

# ajax - CORS 如何比没有跨域限制更安全？在我看来，它可以被恶意使用

> ID：10837549
> 
> 赞同：5
> 
> 时间：2012-05-31T16:26:16.757
> 
> 标签：ajax, xmlhttprequest, cross-domain, security, cors

我已经阅读了一些关于解决跨域策略的文章，现在我知道了两种对我有用的方法，但我很难理解 CORS 比完全没有跨域限制更安全。

据我了解，设置了跨域限制是因为理论上可以将恶意脚本插入到用户正在查看的页面中，这可能导致将数据发送到不相关的服务器（即不同域）到用户专门加载的站点。

现在有了 CORS 功能，恶意人员似乎可以解决这个问题，因为允许授权跨域请求的是恶意服务器本身。因此，如果恶意脚本决定将详细信息发送到已`Access-Control-Allow-Origin: *`设置的恶意服务器，它现在可以接收该数据。

我确定我在这里误解了一些东西，有人可以澄清吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T09:10:00.410

我认为@dystroy 有一点，但不是我想要的全部。这个答案也有帮助。[https://stackoverflow.com/a/4851237/830431](https://stackoverflow.com/a/4851237/830431)

我现在明白这与防止发送数据无关，更多的是与防止未经授权的行为有关。

例如：您登录的网站（例如社交网络或银行）可能通过您的浏览器打开了一个受信任的会话。如果您随后访问一个狡猾的站点，他们将无法使用您登录的站点执行跨站点脚本攻击（例如发布垃圾邮件状态更新、获取个人详细信息或从您的帐户转账），因为跨域限制策略。他们能够执行跨站点脚本攻击的唯一方法是浏览器未启用跨站点限制，或者社交网络或银行是否已实施 CORS 以包含来自不受信任域的请求。

如果一个网站（例如银行或社交网络）决定实施 CORS，那么他们应该确保它不会导致未经授权的操作或未经授权的数据被检索，但是像新闻网站内容 API 或雅虎管道这样的东西不会有任何损失通过在 * 上启用 CORS

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T16:33:13.530

您可以设置比“*”更精确的原点过滤器。

如果您决定打开您的特定页面以包含在另一个页面中，这意味着您将承担后果。

但主要问题不可能是服务器可以接收奇怪的数据：这并不是什么新鲜事：服务器接收到的所有内容都是可疑的。该保护主要是针对不能被异常的来源组合滥用的用户（例如，能够读取全集数据的全集用户）。因此，如果您允许页面的所有来源，请不要放入您只想与您的用户共享的数据。

# android - 有没有办法确定 DownloadManager 在完成时为哪个接收器（或哪个 URI）发送了意图？

> ID：10837552
> 
> 赞同：0
> 
> 时间：2012-05-31T16:26:43.960
> 
> 标签：android, android-intent, download-manager

我有一堆文件要下载（如果可能的话，同时下载）。所以我为 N 个请求注册 N 个 BroadcastReceivers`ACTION_DOWNLOAD_COMPLETE`并将 N 个请求排入队列。

好的，在我收到 DownloadManager 广播的 Intent 之前，一切都比预期的要好。是的，每个接收者都会收到这个 Intent。

唔。我可以为特定的下载 ID（`DownloadManager.enqueue`返回）获取一行，并检查带有链接到此接收器的 URL 的文件的状态是否为`STATUS_SUCCESSFUL`，执行我需要的操作，然后取消注册接收器。

但是......你知道，这不是最好的方法。

有没有办法从意图中确定 URL 或其他一些信息，或者 DownloadManager 是否只在完成某事时通知我？或者我如何同时处理多个下载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:41:59.190

Intent 具有`extra_download_id`等于入队请求之一的 ID 的字段。

[如何识别哪个文件触发了 Download_Complete 意图](https://stackoverflow.com/questions/6713115/how-to-identify-which-file-triggered-download-complete-intent)

# php - 通过 php 在 MySql 数据库中上传图像

> ID：10837556
> 
> 赞同：1
> 
> 时间：2012-05-31T16:27:03.507
> 
> 标签：php, mysql, html

我目前正在开发一个需要用户上传不同产品图片的网站。我通过 php 使用 MySql 数据库来实现它。

我用于获取用户输入的基本表单的代码是：

```
<form enctype="multipart/form-data" action="testimage1.php" method="post" name="changer">
<input name="MAX_FILE_SIZE" value="102400" type="hidden">
<input name="image" accept="image/jpeg" type="file">
<input value="Submit" type="submit">
</form> 
```

我的数据库表是：

```
 mysql> CREATE TABLE tbl_images (
 > id tinyint(3) unsigned NOT NULL auto_increment,
 > image blob NOT NULL,
 > PRIMARY KEY (id)
 > ); 
```

testimage1.php 有以下代码：-

```
 $username = "root";
 $password = "";
 $host = "localhost";
 $database = "thinstrokes";

 $link = mysql_connect($host, $username, $password);
 if (!$link) {
 die('Could not connect: ' . mysql_error());
 }

// Select your database
mysql_select_db ($database);

    if (isset($_FILES['image']) && $_FILES['image']['size'] > 0) { 

  // Temporary file name stored on the server
  $tmpName  = $_FILES['image']['tmp_name'];  

  // Read the file 
  $fp      = fopen($tmpName, 'r');
  $data = fread($fp, filesize($tmpName));
  $data = addslashes($data);
  fclose($fp);

  // Create the query and insert
  // into our database.
  $query = "INSERT INTO tbl_images ";
  $query .= "(image) VALUES ('$data')";
  $results = mysql_query($query, $link) or die(mysql_error());

  // Print results
  print "Thank you, your file has been uploaded.";

  }
  else {
  print "No image selected/uploaded";
  } 
```

提交表单时出现错误：`No image selected/uploaded`

我没有收到错误...而且我之前已经要求过这个：

*   [在mysql数据库中插入图像时出现mysql错误](https://stackoverflow.com/questions/10829775/mysql-error-during-inserting-a-image-in-mysql-database)

*   [如何使用 PHP 在 MySQL 数据库中插入图像？](https://stackoverflow.com/questions/10829313/how-can-i-insert-an-image-in-a-mysql-database-using-php)

但直到现在我还没有成功地将图像存储在数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:41:05.070

你的脚本工作得很好，这是我测试的：

```
<?

if (isset($_FILES['image']) && $_FILES['image']['size'] > 0) { 

  // Temporary file name stored on the server
  $tmpName  = $_FILES['image']['tmp_name'];  

  // Read the file 
  $fp      = fopen($tmpName, 'r');
  $data = fread($fp, filesize($tmpName));
  $data = addslashes($data);
  fclose($fp);

  // Create the query and insert

  // Print results
  print "Thank you, your file has been uploaded.";

  }
  else {
  print "No image selected/uploaded";
  }

?>

<form enctype="multipart/form-data" action="" method="post" name="changer">
<input name="MAX_FILE_SIZE" value="102400" type="hidden">
<input name="image" accept="image/jpeg" type="file">
<input value="Submit" type="submit">
</form> 
```

它工作得很好，如果你想看到它的实际效果，我可以给你发链接。

一定是其他东西破坏了您的代码（*请注意，我删除了数据库查询以避免出现 mysql 错误，但脚本即使在那里也能正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:17:08.623

//这里是你的问题的解决方案

```
<form enctype="multipart/form-data" action="" method="post" name="changer">
    <input name="MAX_FILE_SIZE" value="102400" type="hidden">
    <input name="image" accept="image/jpeg" type="file">
    <input value="Submit" type="submit">
</form>
<?php

    // connection to database
    include 'includes/connection.php';
?>

<?php

    if (isset($_FILES['image']) && $_FILES['image']['size'] > 0) { 
        // Temporary file name stored on the server
        $tmpName  = $_FILES['image']['tmp_name'];  
        // Read the file 
        $fp      = fopen($tmpName, 'r');
        $data = fread($fp, filesize($tmpName));
        $data = addslashes($data);
        fclose($fp);
        $result = mysql_query("INSERT INTO image (image)VALUES ( '$data')", $connection);
        if(!$result)
        {
            die("Database query failed: ". mysql_error());
        }
        // Print results

        print "Thank you, your file has been uploaded.";
    }
    else 
    {
        print "No image selected/uploaded";
    }
?>

<?php
    //close connection
    include 'includes/close.php';
?> 
```

# android - 西瓦克。locpoll 停止更新？

> ID：10837561
> 
> 赞同：0
> 
> 时间：2012-05-31T16:27:26.430
> 
> 标签：android, commonsware-cwac

locpoll 在一段时间（25 秒）内获取位置，似乎有时它会停止发送位置更新或接收器停止接收。这是我的代码。有什么问题吗。。

```
public class LocationReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        try {
            Bundle b = intent.getExtras();
            Location loc = (Location) b.get(LocationPoller.EXTRA_LOCATION);
            String msg;
            if (loc == null) {
                loc = (Location) b.get(LocationPoller.EXTRA_LASTKNOWN);
                if (loc == null) {
                    msg = intent.getStringExtra(LocationPoller.EXTRA_ERROR);
                    cPosicion.latitud = 0;
                    cPosicion.longitud = 0;
                    cPosicion.timeStamp = System.currentTimeMillis();
                } else {
                    msg = "TIMEOUT, lastKnown=" + loc.toString();
                    Log.e("e_timeout", "timeout");
                    cPosicion.latitud = 0;
                    cPosicion.longitud = 0;
                    cPosicion.timeStamp = System.currentTimeMillis();
                }
            } else {
                msg = loc.toString();
                cPosicion.latitud = loc.getLatitude();
                cPosicion.longitud = loc.getLongitude();
                cPosicion.timeStamp = System.currentTimeMillis();
            }
            if (msg == null) {
                msg = "Invalid broadcast received!";
            }
        } catch (Exception e) {
            Log.e(getClass().getName(), "Exception", e);
        }
    }
} 
```

这就是我启动gps的方式

```
private void handleIntent(Intent intent) {
    if (Intent.ACTION_SEARCH.equals(intent.getAction())) {
        String query = intent.getStringExtra(SearchManager.QUERY);
        doMySearch(query);
    } else {
        startGPS();
    }
}

// .....
private void startGPS() {
    mgr = (AlarmManager) getSystemService(ALARM_SERVICE);
    Intent i = new Intent(this, LocationPoller.class);
    i.putExtra(LocationPoller.EXTRA_INTENT, new Intent(this,
            LocationReceiver.class));
    i.putExtra(LocationPoller.EXTRA_PROVIDER, LocationManager.GPS_PROVIDER);
    pi = PendingIntent.getBroadcast(this, 0, i, 0);
    mgr.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP,
            SystemClock.elapsedRealtime(), PERIOD, pi);
} 
```

这就是我关闭活动的方式

```
private void stopGPS() {
    mgr.cancel(pi);
} 
```

在此先感谢帕梅拉

# c++ - 错误：CLASS_NAME 尚未声明/未命名类型（c++）

> ID：10837562
> 
> 赞同：0
> 
> 时间：2012-05-31T16:27:28.533
> 
> 标签：c++

我不知道为什么我会收到这个错误，因为它在一小时前编译得很好，我在这里没有做任何改变。

我有一个名为 SocketsStatus 的类，然后我有许多线程，每个线程都实现一个套接字连接。所以我传递一个对 SocketsStatus 对象的引用来控制哪些是连接的，哪些不是。

SocketsStatus 的标头：

```
#ifndef SOCKETSSTATUS_H_
#define SOCKETSSTATUS_H_

#include <QMutex>
#include <BufferDatos.h>

class SocketsStatus {
public:
    SocketsStatus();
    int setBufferStatus(int bufferId, bool status);
    bool isEveryBufferDisconnected();
    virtual ~SocketsStatus();

private:
    void init();

    bool bufferRawMeasConnected;
    bool bufferPosConnected;
    bool bufferRtkConnected;
    QMutex *mutex;
};

#endif /* SOCKETSSTATUS_H_ */ 
```

然后，BufferDatos 头的开头，这是我的 Thread 类：

```
#ifndef BUFFERDATOS_H_
#define BUFFERDATOS_H_

#include <QThread>
#include <QTcpSocket>
#include <SocketsStatus.h>
#include "Global.h"

class BufferDatos: public QThread {
public:
    BufferDatos(QString ip, qint16 port, SocketsStatus &buffersStatusPassed);
    virtual QByteArray extraerSiguienteMensaje(void) = 0;
    virtual ~BufferDatos();

protected:
    void run(void);
    bool connect(void);
    void receiveData(void);
    bool reconnect(int &timeoutsWithOpenSocket);

protected:
    QTcpSocket *tcpSocket;
    QString ip;
    qint16 port;
    SocketsStatus &buffersStatus;
//... 
```

我收到**错误：'SocketsStatus' has not been declared** at the ctr，然后在将变量声明为受保护时，我也收到**错误：'SocketsStatus' does not name a type**。

一定是一些愚蠢的细节，但我没有碰巧看到在哪里！有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T16:29:41.747

你有一个`#include`循环依赖。您的每个标题都尝试包含另一个标题。`SocketsStatus`真的需要了解一下吗`BufferDatos`？您需要删除两个`#include`s 之一，您可以将其中一个替换为前向声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T16:35:01.513

打破你的循环`#include`依赖（通过省略其中一个`#include`指令）并用一个（或几个）前向声明替换它。

实际上，我认为您不需要`#include <Bufferdatos.h>`在第一个标题中。

# java - 为多个环境配置单个属性文件

> ID：10837563
> 
> 赞同：0
> 
> 时间：2012-05-31T16:27:32.607
> 
> 标签：java, configuration

如何为多个环境配置单个配置（属性/xml）文件？就像是：

```
<env="dev">
<webservice-url>http:server1:1010</webservice-url>
</env>
<env="preprod">
<webservice-url>http:server2:1010</webservice-url>
</env>
<env="prod">
<webservice-url>http:server3:1010</webservice-url>
</env> 
```

这里 env 值作为 JVM 参数（-D 选项）给出，例如 -D=preprod。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T19:12:30.647

您可以使用环境名称作为属性名称的前缀。

```
dev.webservice-url=http:server1:1010
preprod.webservice-url=http:server2:1010
prod.webservice-url=http:server3:1010 
```

如果将 JVM 选项指定为`-Ddeployment=dev`，则可以按如下方式访问相应的选项：

```
propertyName = System.getProperty("deployment") + ".webservice-url";
url = props.getProperty(propertyName); 
```

# mysql - 解析 PubMed XML 以提交到 mySQL 数据库 (XML::Twig)

> ID：10837564
> 
> 赞同：3
> 
> 时间：2012-05-31T16:27:36.133
> 
> 标签：mysql, perl, xml-parsing, xml-twig, pubmed

我是 XML::Twig 的新手，我正在尝试解析 PubMed XML 2.0 最终摘要以放入 mySQL 数据库。我已经做到了这一点：

```
#!/bin/perl -w
use strict;
use DBI;
use XML::Twig;

my $uid = "";
my $title = "";
my $sortpubdate = "";
my $sortfirstauthor = "";
my $dbh = DBI->connect ("DBI:mysql:medline:localhost:80",
                           "root", "mysql");
my $t= new XML::Twig(   twig_roots => { 'DocumentSummary' => $uid => \&submit },
                        twig_handlers => { 'DocumentSummary/Title' => $title, 'DocumentSummary/SortPubDate' => $sortpubdate, 'DocumentSummary/SortFirstAuthor' => $sortfirstauthor});
$t->parsefile('20112.xml'); 
$dbh->disconnect();
exit;

sub submit
    {   my $insert= $dbh->prepare( "INSERT INTO medline_citation (uid, title, sortpubdate, sortfirstauthor) VALUES (?, ?, ?, ?);");
        $insert->bind_param( 1, $uid);
        $insert->bind_param( 2, $title);
        $insert->bind_param( 3, $sortpubdate);
        $insert->bind_param( 4, $sortfirstauthor);
        $insert->execute();
        $t->purge;
    } 
```

但是 Perl 似乎因为某种原因而停滞不前。我这样做对吗？我正在尝试使用 twig_roots 来减少解析量，因为我只对几个字段感兴趣（这些是大文件）。

以下是 XML 的示例：

```
<DocumentSummary uid="22641317">
    <PubDate>2012 Jun 1</PubDate>
    <EPubDate></EPubDate>
    <Source>Clin J Oncol Nurs</Source>
    <Authors>
        <Author>
            <Name>Park SH</Name>
            <AuthType>
                Author
            </AuthType>
            <ClusterID>0</ClusterID>
        </Author>
        <Author>
            <Name>Knobf MT</Name>
            <AuthType>
                Author
            </AuthType>
            <ClusterID>0</ClusterID>
        </Author>
        <Author>
            <Name>Sutton KM</Name>
            <AuthType>
                Author
            </AuthType>
            <ClusterID>0</ClusterID>
        </Author>
    </Authors>
    <LastAuthor>Sutton KM</LastAuthor>
    <Title>Etiology, assessment, and management of aromatase inhibitor-related musculoskeletal symptoms.</Title>
    <SortTitle>etiology assessment and management of aromatase inhibitor related musculoskeletal symptoms </SortTitle>
    <Volume>16</Volume>
    <Issue>3</Issue>
    <Pages>260-6</Pages>
    <Lang>
        <string>eng</string>
    </Lang>
    <NlmUniqueID>9705336</NlmUniqueID>
    <ISSN>1092-1095</ISSN>
    <ESSN>1538-067X</ESSN>
    <PubType>
        <flag>Journal Article</flag>
    </PubType>
    <RecordStatus>
        PubMed - in process
    </RecordStatus>
    <PubStatus>4</PubStatus>
    <ArticleIds>
        <ArticleId>
            <IdType>pii</IdType>
            <IdTypeN>4</IdTypeN>
            <Value>N1750TW804546361</Value>
        </ArticleId>
        <ArticleId>
            <IdType>doi</IdType>
            <IdTypeN>3</IdTypeN>
            <Value>10.1188/12.CJON.260-266</Value>
        </ArticleId>
        <ArticleId>
            <IdType>pubmed</IdType>
            <IdTypeN>1</IdTypeN>
            <Value>22641317</Value>
        </ArticleId>
        <ArticleId>
            <IdType>rid</IdType>
            <IdTypeN>8</IdTypeN>
            <Value>22641317</Value>
        </ArticleId>
        <ArticleId>
            <IdType>eid</IdType>
            <IdTypeN>8</IdTypeN>
            <Value>22641317</Value>
        </ArticleId>
    </ArticleIds>
    <History>
        <PubMedPubDate>
            <PubStatus>entrez</PubStatus>
            <Date>2012/05/30 06:00</Date>
        </PubMedPubDate>
        <PubMedPubDate>
            <PubStatus>pubmed</PubStatus>
            <Date>2012/05/30 06:00</Date>
        </PubMedPubDate>
        <PubMedPubDate>
            <PubStatus>medline</PubStatus>
            <Date>2012/05/30 06:00</Date>
        </PubMedPubDate>
    </History>
    <References>
    </References>
    <Attributes>
        <flag>Has Abstract</flag>
    </Attributes>
    <PmcRefCount>0</PmcRefCount>
    <FullJournalName>Clinical journal of oncology nursing</FullJournalName>
    <ELocationID></ELocationID>
    <ViewCount>0</ViewCount>
    <DocType>citation</DocType>
    <SrcContribList>
    </SrcContribList>
    <BookTitle></BookTitle>
    <Medium></Medium>
    <Edition></Edition>
    <PublisherLocation></PublisherLocation>
    <PublisherName></PublisherName>
    <SrcDate></SrcDate>
    <ReportNumber></ReportNumber>
    <AvailableFromURL></AvailableFromURL>
    <LocationLabel></LocationLabel>
    <DocContribList>
    </DocContribList>
    <DocDate></DocDate>
    <BookName></BookName>
    <Chapter></Chapter>
    <SortPubDate>2012/06/01 00:00</SortPubDate>
    <SortFirstAuthor>Park SH</SortFirstAuthor>
</DocumentSummary> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T04:26:40.237

我这样做的方法是为 DocumentSummary 提供一个处理程序，它为 DB 提供数据，然后清除记录。没有必要比这更花哨。

此外，我发现 DBIx::Simple，嗯，比原始 DBI 更易于使用，它负责为我准备和缓存语句：

```
#!/bin/perl

use strict;
use warnings;

use DBIx::Simple;
use XML::Twig;

my $db = DBIx::Simple->connect ("dbi:SQLite:dbname=t.db"); # replace by your DSN

my $t= XML::Twig->new(   twig_roots => { DocumentSummary => \&submit },)
                ->parsefile('20112.xml'); 

$db->disconnect();
exit;

sub submit
    { my( $t, $summary)= @_;
      my $insert= $db->query( "INSERT INTO medline_citation (uid, title, sortpubdate, sortfirstauthor) VALUES (?, ?, ?, ?);",
                              $summary->att( 'uid'),
                              map { $summary->field( $_) } ( qw( Title SortPubDate SortFirstAuthor))
                            );
      $t->purge;
    } 
```

如果您想知道`map { $summary->field( $_) } ( qw( Title SortPubDate SortFirstAuthor))`，这只是一种更奇特（恕我直言，更易于维护）的编写方式`$summary->field( 'Title'), $summary->field( 'SortPubDate'), $summary->field( 'SortFirstAuthor' )`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T16:44:11.937

您的处理程序语法错误。有关示例，请参阅[文档：](http://p3rl.org/XML%3a%3aTwig)

```
my $twig=XML::Twig->new(   
    twig_handlers => 
      { title   => sub { $_->set_tag( 'h2') }, # change title tags to h2
        para    => sub { $_->set_tag( 'p')  }, # change para to p
        hidden  => sub { $_->delete;       },  # remove hidden elements
        list    => \&my_list_process,          # process list elements
        div     => sub { $_[0]->flush;     },  # output and free memory
      },
    pretty_print => 'indented',                # output will be nicely formatted
    empty_tags   => 'html',                    # outputs <empty_tag />
                         ); 
```

# java - 如何在 Grails 中删除 java.sql.BatchUpdateException？

> ID：10837565
> 
> 赞同：2
> 
> 时间：2012-05-31T16:27:40.427
> 
> 标签：java, grails

我有一个类似的域

```
class BusinessOrganization {

    static hasMany = [organizationBusinessTypes:OrganizationBusinessType]

    String name
    String icon

    static constraints = {
        name(blank:false,unique:true)
        icon(unique:true)
    }

    String toString() {
        return "${name}"
    }

} 
```

第一次保存时数据保存无误。但是当我第二次尝试保存时，我得到了这个错误：

```
Class java.sql.BatchUpdateException Message
Batch entry 0 insert into business_organization (version, icon, name, id) values ('0', '', '', '2') was aborted. Call getNextException to see the cause. 
```

它说 ：

```
def save() {
23:        def businessOrganizationInstance = new BusinessOrganization(params)
24:        if (!businessOrganizationInstance.save(flush: true)) {
25:            render(view: "create", model: [businessOrganizationInstance: businessOrganizationInstance])
26:            return
27:        } 
```

第 24 行出错。我无法弄清楚我做错了什么。在其他领域，这工作正常。请有人帮忙。我是 Grails 的新手，现在被困在这里。我正在使用 PostGreSQL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-11T22:38:36.580

尝试输入

```
insert into business_organization (version, icon, name, id) values ('0', '', '', '2') 
```

直接进入您的数据库（在控制台或 pgAdmin 中）并检查异常。

另请注意，您对名称和图标值施加了独特的限制 - 检查您保存的条目中的那些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T01:07:51.667

将保存（第 24 行）包装在 try/catch 中，并向视图层提供适当的反馈

# php - 索引PHP的问题

> ID：10837569
> 
> 赞同：1
> 
> 时间：2012-05-31T16:27:56.273
> 
> 标签：php, post, syntax, indexing

```
for($c=1;$c<=$num;$c++)
{

$row=mysql_fetch_array(mysql_query("SELECT * FROM `$quiztitle` WHERE id=$c"));

        if($row['answer']==$_POST['answer'][$c]) // NOT WORKING
            {
                echo "correct";
                echo "<br>";
            }

        else
            {
                echo "incorrect";
                echo "<br>";
            }
    } 
```

在它说“不工作”的行上，索引 [$c] 没有从循环中获取值。但是当我指定它并将其更改为 $_POST['answer1'] 时，它正在工作。什么是正确的语法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T16:31:44.617

尝试这个。

for($c=1;$c<=$num;$c++) {

```
 $row=mysql_fetch_array(mysql_query("SELECT * FROM `$quiztitle` WHERE id=$c"));

    if($row['answer']==$_POST['answer'.$c]) // NOT WORKING
        {
            echo "correct";
            echo "<br>";
        }

    else
        {
            echo "incorrect";
            echo "<br>";
        }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T16:32:02.090

您在这里将“答案”视为一个数组，在其中寻找索引。

您想要连接该值。

```
if($row['answer']==$_POST["answer{$c}']) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T16:30:56.333

根据您的注释，您似乎想要：

```
$_POST["answer$c"] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T16:31:30.243

正确的是：

```
if ($row['answer'] == $_POST['answer' . $c]) {
  ....
} 
```

# ios - Xcode 崩溃后的 RestKit 错误

> ID：10837576
> 
> 赞同：1
> 
> 时间：2012-05-31T16:28:24.213
> 
> 标签：ios, xcode, compilation, compiler-errors, restkit

在过去的几个月里，我一直在一个项目中使用 RestKit，没有任何问题。我按照 Github wiki 上的说明进行了设置。今天 Xcode 在连接到模拟器时挂了。我刚刚编辑了一些与 RestKit 完全无关的琐碎 UI 代码。我不得不强制退出 Xcode 并重新启动。当我重新启动并再次编译时，RestKit 构建成功，但我得到了一串与我的应用程序相关的错误。仔细观察，它们都与 RestKit 相关。从 RKRequestSerializable 开始会出现一连串错误，然后扩散到每个引用它的 RestKit 类。

第一个错误是该行的“预期类型”：

```
 @protocol RKRequestSerializable 
```

然后是“Objective-C 方法的预期选择器”：

```
 - (NSString*)HTTPHeaderValueForContentType; 
```

然后“期望一个方法体”：

```
 @optional 
```

我做的第一件事是恢复自上次成功编译以来所做的更改，但这并没有什么不同。然后，我将 RestKit 回滚以防我不小心进行了更改，但这没有任何效果。我试过删除派生数据，删除并重新添加 RestKit，但没有任何效果。我的项目不会编译。

最奇怪的是RestKit编译成功了。错误来自我的项目的编译。到目前为止，我已经为此浪费了三个小时，非常感谢任何关于如何解决这个问题的意见或建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:17:06.080

您还在为模拟器构建吗？我在 XCode 崩溃后看到了这种行为。Schema 被设置为 OS X 64 位或其他东西，RestKit 不会在那里编译。

# javascript - Kendo UI 使用 Knockout JS 绑定在 Kendo UI 窗口内复制网格

> ID：10837577
> 
> 赞同：1
> 
> 时间：2012-05-31T16:28:25.587
> 
> 标签：javascript, knockout.js, kendo-ui

我正在使用 Kendo UI 和 Knockout JS 库，但遇到了一个奇怪的问题。我试图在剑道窗口中显示剑道网格​​，但网格内的行会重复。这是一段代码：

JS：

```
$(document).ready(function () {
        var clients = { FilteredClients: [{ ClientName: '1', ClientCode: 'Value 1' }, { ClientName: '2', ClientCode: 'Value 2'}], Header: 'TEST' };
        var viewModel = ko.mapping.fromJS(clients);
        ko.applyBindings(viewModel);

        var showClientLookupWindow = function () {

            var window = $("#clientLookupWindow").data("kendoWindow");
            window.center();
            window.open();
        }

        $('#btnClientLookup').bind('click', showClientLookupWindow);
    }); 
```

HTML：

```
<div>
    <a id="btnClientLookup" href="#" class="k-button k-button-icontext k-grid-search"><span
            class="k-icon k-search"></span>Client Lookup</a>

    <span data-bind="text: Header"></span>
    <div id="clientLookupWindow" data-bind="kendoWindow: { isOpen: false, visible: false, width: '600px', height: '230px', modal: true, resizable: false, title: 'Client Lookup'}">
        <div id="gridClients" data-bind="kendoGrid: { data: FilteredClients, columns: [ { field: 'ClientName', title : 'Client Name' }, { field: 'ClientCode', title: 'Client Code' } ], scrollable: false, sortable: true, pageable: false }">
        </div>
    </div>
    <div id="gridClientsOutside" data-bind="kendoGrid: { data: FilteredClients, columns: [ { field: 'ClientName', title : 'Client Name' }, { field: 'ClientCode', title: 'Client Code' } ], scrollable: false, sortable: true, pageable: false }">
    </div>
</div> 
```

在浏览器中运行，我们看到gridClientsOutside有2行，但是点击btnClientLookup后，弹出的窗口是gridClients，共4行。有没有人遇到过这个问题或有解决方法？

在此先感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:44:52.530

快速浏览一下，该`kendoWindow`部分内的绑定似乎被绑定了两次，这导致了问题。

那里的绑定可以在异步模式下运行，这可能`kendoWindow`是在淘汰剑道库中应该如何设置的。

目前，您可以这样做：

```
<div id="clientLookupWindow" data-bind="kendoWindow: { async: true, isOpen: false, visible: false, width: '600px', height: '230px', modal: true, resizable: false, title: 'Client Lookup'}"> 
```

这增加`async: true`了`kendoWindow`绑定选项。否则，您可以`ko.bindingHandlers.kendoWindow.options.async = true;`在调用 applyBindings 之前对其进行全局设置。

这是一个示例：http: [//jsfiddle.net/rniemeyer/2MexC/](http://jsfiddle.net/rniemeyer/2MexC/)

# python - 为 pipe2py 设置环境

> ID：10837578
> 
> 赞同：0
> 
> 时间：2012-05-31T16:28:28.893
> 
> 标签：python, module, pipe, yahoo, pipeline

我是雅虎新手！管道，我创建了一个稍微改变雅虎 RSS 源的管道。我想让这个动态并在 2000 个 RSS 提要上执行这个管道，因此偶然发现了 pipe2py (https://github.com/ggaughan/pipe2py)。但是，我不明白创建使用 pipe2py 的环境的说明。我知道我必须为 pipe2py 导入一个模块，但是每次我按照指示进行操作时都会被告知“没有名为 pipe2py 的模块”

有没有人遇到过这个问题，或者现在如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T13:11:32.753

我最近`setup.py`为 pipe2py 添加了一个文件，因此您应该能够：

```
python setup.py install 
```

将其安装到您的 Python 环境中。

或者，您可以使用以下命令直接下载并安装它：

```
pip install pipe2py 
```

# xcode - 当我分配/初始化一个变量时，为什么 Xcode 自动完成无法工作？

> ID：10837582
> 
> 赞同：1
> 
> 时间：2012-05-31T16:28:40.577
> 
> 标签：xcode, ide, xcode4.3

我对 Xcode 4.3.2 有一个荒谬的问题。每当我声明一个新变量 say `NSMutableDictionary *var = [NSMutableDictionary alloc] init];`时，Xcode`NSMutableArray`会在表达式的 LHS 中自动完成，但不会在 RHS 中自动完成。

![Xcode自动完成问题](../Images/a09182c5e0d5001ba12373458892d800.png)

这显然令人恼火。经常会导致我必须重新更正的拼写错误，并且肯定会阻碍流程。根据我的经验，它不会在任何其他情况下发生。

还有其他人遇到过这种情况吗？我应该提出一个错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T17:24:05.170

我认为这是因为 Xcode 不知道您是否想对类进行一些操作并尝试找到合适的变量。因此，如果您希望 Xcode 在 RHS 中自动完成您的类名，请先编写`[]`然后开始在里面输入：`[NS...]`

# gnupg - gpg2.exe 和 gpg.exe 退出代码 255

> ID：10837583
> 
> 赞同：1
> 
> 时间：2012-05-31T16:28:49.080
> 
> 标签：gnupg

我有以下系统配置：

带有 Service Pack 1 的 Windows 2008 Server 64 位

Gpg4win，版本 2.1.0

2.1.0 版中包含的 Gpg4win 组件有：

```
GnuPG:          2.0.17
Kleopatra:      2.1.0 (2011-02-04)
GPA:            0.9.1-svn1024
GpgOL:          1.1.2
GpgEX:          0.9.7
Claws-Mail:     3.7.8cvs47
Kompendium DE:  3.0.0
Kompendium EN:  3.0.0-beta1 
```

我要做的是使用 GnuPG 和 Process.Start 从 .NET 3.5 Web 服务解密本地文件。

当从那台机器上的 cmd.exe 运行时，下面的这个命令工作得很好。

`"c:\Program Files (x86)\GNU\GnuPG\pub\" --charset utf8 --no-tty --output c:\decrypted_file.txt" --batch -r "name_for_secret_key" --passphrase-file "C:\path_to_passphrase_file.txt" --decrypt "c:\encrypted_file.gpg"`

但是，当从部署在 IIS 7.5 下的 Web 服务执行时，它不起作用。尝试了以下方法：

```
- impersonated user with admin rights (in the application pool or in the code itself) to run the process under
- ran the cmd.exe process directly with Process.Start and passed in the arguments as described above (by redirecting standard input) 
```

结果

```
- exit code for gpg2.exe is 255 and nothing else happened
- in event viewer / application found errors like: Faulting application gpg2.exe, version 0.0.0.0, time stamp 0x4d6e6194, faulting module unknown, version 0.0.0.0, time stamp 0x00000000, exception code 0xc0000005, fault offset 0x00000000, process id 0x1a914, application start time 0x01cd3f46059b0031.
- by redirecting standarderror I only got the same 255 exit code
- ran Process Monitor on that machine but that hasn't helped either, there were some "Name Not Found" issues, no access denied problems and both gpg.exe and gpg2.exe results were SUCCESS and exit codes were 255.
- DEP has default settings, it's on on essential windows programs and services 
```

你能想出一些与我已经尝试过的不同的东西来让它工作吗？

# hibernate - Hibernate JPA如何在persistence.xml中配置动态更新

> ID：10837584
> 
> 赞同：5
> 
> 时间：2012-05-31T16:28:51.180
> 
> 标签：hibernate, jpa, persistence.xml

我不想在我的 java 源代码中进行配置，可以这样做：

```
@org.hibernate.annotations.Entity(
        dynamicUpdate = true) 
```

因为我希望它是可配置的。

我没有使用hibernate.properties，只有persistence.xml，因为我使用的是JPA。我怎样才能使所有实体`dynamicUpdate`只使用？`true``persistence.xml`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T23:00:18.803

您正在将 JPA 标准与 Hibernate 实现一起使用。在这种情况下，您尝试配置特定于 Hibernate 实现而不是 JPA 标准的一部分的东西。如果它是一个有助于配置实现的属性，那么其中许多可以通过 persistence.xml 传递给实现，但是在这种情况下，您尝试为每个实体配置属性，您将不得不这样做休眠方式。您可能已经在 Bozho 的回答中看到过[这个问题。](https://stackoverflow.com/questions/8807609/can-i-configure-hibernate-jpa-to-update-an-entity-record-when-only-non-timestamp)

尽管如此，如果您决定继续使用 org.hibernate.* 注释进行配置，您将无法真正使其可配置，因为注释值必须是常量表达式。

一个有趣的解决方案是在启动监听器中修改所有持久类并添加属性。您可以读取配置的值并使用[该问题](https://stackoverflow.com/questions/9192253/hibernate-global-dynamic-insert)的答案中描述的机制进行设置。

# javascript - 如何使用 javascript 从字符串中解析值？

> ID：10837587
> 
> 赞同：2
> 
> 时间：2012-05-31T16:28:58.827
> 
> 标签：javascript

我是文本“data-RowKey=xxx”内的字符串名称内容。我试图摆脱 xxx 所以我尝试了以下方法：

```
var val = content.substring(12 + content.indexOf("data-RowKey="), 3); 
```

这根本不起作用。而不是只得到三个字符，我得到一个很长的字符串。谁能看到我做错了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T16:31:24.150

[`.substring()` *^([MDN])*](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/substring)有两个索引，[`.substr()` *^([MDN])*](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/substr)有一个索引和长度。尝试：

```
var val = content.substr(12 + content.indexOf("data-RowKey="), 3); 
```

如果`"data-RowKey=xxx"`是整个字符串，还有其他各种获取方法`xxx`：

```
var val = content.replace('data-RowKey=', '');
var val = content.split('=')[1]; // assuming `=` does not appear in xxx 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T16:31:48.640

你使用了错误的工具。当您想捕获与某种模式匹配的数据时，您应该使用[正则表达式](https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions)。如果您的值恰好是三个符号，则正确的表达方式是`/data-RowKey=(...)/`代表`.`任何符号并`()`指定要捕获的部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T16:34:08.583

这有效：

```
var value = content.match(/data-RowKey=(.*)/)[1]; 
```

[**现场演示**](http://jsfiddle.net/BL9uq/)

如果 之后可能有值`xxx`，请使用：

```
"data-RowKey=123abc".match(/data-RowKey=(.{3}).*/)[1] // 123 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T17:02:26.060

如果您的 rowkey 是数字，这可能是最好的，因为您将数字作为整数并且以后不需要转换：

```
var val = parseInt( content.split("data-RowKey=")[1] ); 
```

如果总是三个字符和/或不需要转换：

```
var val = content.split("data-RowKey=")[1].substring(0,3); 
```

# java - 无法使用 executeQuery() 和 StringTokenizer 发出数据操作语句

> ID：10837588
> 
> 赞同：1
> 
> 时间：2012-05-31T16:28:58.870
> 
> 标签：java, jdbc

嗨，我想做这样的事情：

```
StringTokenizer tokenizer = new StringTokenizer(getCompletedAnswers, "$");
                while(tokenizer.hasMoreTokens()){

                    System.out.println(tokenizer.nextToken());
                    rs = st.executeQuery("INSERT INTO "+db+".answersTable(`answer`) VALUES ('"+tokenizer.nextToken()+"')");

                } 
```

但这给了我一个错误 `Can not issue data manipulation statements with executeQuery().`

正如我在必须使用的文档中阅读的那样，`executeUpdate()`我正在这样做：

```
rs = st.executeUpdate("INSERT INTO "+db+".answersTable(`answer`) VALUES ('"+tokenizer.nextToken()+"')"); 
```

它告诉我：`Type mismatch: cannot convert from int to ResultSet`

知道如何使用 StringTokenizer 将这些令牌放入数据库吗？谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T16:33:59.653

您应该改用**Statement.executeUpdate**

executeUpdate 方法返回一个 int：

> 返回：(1) SQL 数据操作语言 (DML) 语句的行数或 (2) 0 用于不返回任何内容的 SQL 语句

# actionscript-3 - 碰撞后玩家速度永远不会归零？

> ID：10837591
> 
> 赞同：3
> 
> 时间：2012-05-31T16:29:18.323
> 
> 标签：actionscript-3

我的碰撞代码应该反转 x 速度并将其减少到三分之一，然后当玩家没有按“A”或“D”键时，速度应该慢慢减少到零，但是，一旦玩家碰撞速度仅减少到 0.25 和 0.70 之间的小数（根据先前的方向，正数或负数。）

```
//Function to determine what to do with keys
function KeyHandler():void{
    //A Key Handlers
    if(aKeyPressed == true){
        if(Math.abs(_vx) < MaxSpeed){
            _vx += -6;
        }
    }
    //Player _vx somehow won't hit zero!!!
    else if(aKeyPressed == false){
        if(_vx < 0){
            _vx += 1;
        }
    }
    //D Key Handlers
    if(dKeyPressed == true){
        if(Math.abs(_vx) < MaxSpeed){
            _vx += 6;
        }
    }
    else if(dKeyPressed == false){
        if( _vx > 0){
            _vx += -1;
        }
    }
    //W Key Handlers
    if(wKeyPressed == true){
        if(Jumped == false){
            _vy = -15;
            Jumped = true;
        }
    }
    else if(wKeyPressed == false){

    }
}
//Code for Right Collision
    if(RightCollision){
        while(RightCollision){
            Player.x -= 0.1;
            RightCollision = false;
            if(_boundaries.hitTestPoint((Player.x + (Player.width / 2)), (Player.y - (Player.height / 2)), true)){RightCollision = true;}
        }
        _vx *= -.33
    }
    //Code for Left Collision
    if(LeftCollision){
        while(LeftCollision){
            Player.x += 0.1;
            LeftCollision = false;
            if(_boundaries.hitTestPoint((Player.x - (Player.width / 2)), (Player.y - (Player.height / 2)), true)){LeftCollision = true;}
        }
        _vx *= -.33
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T16:38:43.827

注意`abs(-.25) + abs(.7) ~ 1.0`

碰撞将速度设置为非整数（例如`2 * .33 ~ .7`），因此 +/- 1 将跳过 0 而不会落在它上面。

简单的解决方法是将速度保持为整数，例如，可以使用 来完成[`Math.floor`](http://flash-creations.com/notes/asclass_math.php)。（考虑 +/- 速度的差异：`floor`仅将数字移动一个方向。）

快乐编码。

* * *

另外，我不确定该[`int`](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7f9c.html)类型在 AS3 中是如何工作的，这可能值得探索。

# drupal-6 - 在 drupal 主链接就像是空的

> ID：10837594
> 
> 赞同：1
> 
> 时间：2012-05-31T16:29:43.550
> 
> 标签：drupal-6

我正在 Drupal 6.26 中制作网页，但我阻止了一件奇怪的事情。我在本地主机和在线开发，奇怪的是，一些在线主要链接是空的（但我可以在 /admin/build/menu-customize/primary-links 中看到它的元素也在这个页面中菜单元素出现在该位置，但在其他页面中没有），但在 Localhost 中一切正常，我检查了所有设置，它们是相同的，主题文件是相同的，（我没有'不要更改其他drupal文件中的任何内容），唯一的区别是在线页面设置为离线（因为正在维护中），我尝试使其在线，但问题仍然存在，所以我没有' t真的有任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T21:27:36.407

这可能是一个主题问题。确保您的本地配置与公共服务器上的安装具有相同的活动主题。尝试切换到 Drupal 附带的默认主题。

另一个原因可能是您的模块之一。尝试禁用除系统模块以外的所有模块，然后开始一一重新启用它们以查看哪个更改了您的菜单。

# java - 为什么我的 SQL 数据库无法在 Android 中运行？

> ID：10837596
> 
> 赞同：-2
> 
> 时间：2012-05-31T16:29:52.170
> 
> 标签：java, android, sql, error-handling

在我的应用程序中，单击图像按钮会将您带到画廊。单击图像后，我想调用`onActivityResult`以存储图像路径，但它不起作用。在我的`LogCat`它总是告诉我它在尝试保存图像路径时崩溃。

我的`onActivityResult`方法：

```
mImageRowId = savedInstanceState != null ? savedInstanceState.getLong(ImageAdapter.KEY_ROWID) : null;

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
  if(requestCode == PICK_FROM_FILE && data != null && data.getData() != null) {
    Uri uri = data.getData();

    if(uri != null) {
      Cursor cursor = getContentResolver().query(uri, new String[] {
        android.provider.MediaStore.Images.ImageColumns.DATA
      }, null, null, null);
      cursor.moveToFirst();
      String image = cursor.getString(0);
      cursor.close();

      if(image != null) {
      // HERE IS WHERE I WANT TO SAVE THE IMAGE. HERE MUST BE THE ERROR!
        if (mImageRowId == null) {
          long id = mImageHelper.createImage(image);

          if (id > 0) {
            mImageRowId = id;
          }
        }

        // Set the image and display it in the edit activity
        Bitmap bitmap = BitmapFactory.decodeFile(image);
        mImageButton.setImageBitmap(bitmap);
      }
    }
  }
} 
```

这是我的`onSaveInstanceState`方法：

```
private static final Long DEF_ROW_ID = 0L;
  @Override
  protected void onSaveInstanceState(Bundle outState) {
    outState.putLong(ImageAdapter.KEY_ROWID, mImageRowId != null ? mImageRowId : DEF_ROW_ID);
    super.onSaveInstanceState(outState);
} 
```

这是我的一部分`DbAdapter`：

```
public long createImage(String image) {
  ContentValues cv = new ContentValues();
  cv.put(KEY_IMAGE, image);
  return mImageDb.insert(DATABASE_TABLE, null, cv);
} 
```

你能找到问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:36:18.190

你的 mImageHelper 是什么？

否则，您将尝试使用包含 android.provider.MediaStore.Images.ImageColumns.DATA 的变量图像创建位图。但是此列不是文件路径:)

对 onActivityresult (data.getData) 中收到的数据对象进行查询以检索列 MediaStore.Images.Media.DATA。

您应该从路径创建图像。

祝你好运。

# c - 在 c 中标记字符串时出现段错误

> ID：10837602
> 
> 赞同：0
> 
> 时间：2012-05-31T16:30:08.090
> 
> 标签：c

几天前我刚开始用 C 编程。我的程序打开一个文件，逐行读取它，然后删除我不需要的东西（括号、换行符等），然后一旦我有了逗号分隔格式的数据，我想将它添加到数组中（然后将该数组添加到数组数组中）。我正在对逗号分隔的字符串进行标记，但是`EXC_BAD_ACCESS, Could not access memory.`当我在调试器中运行它时，我不断得到它。

我究竟做错了什么？这是给我问题的代码部分：

```
//now data(variable: line) looks like this:  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 2, 2, 4
char *str_ptr;
str_ptr = strtok(line, ",");
  for(; str_ptr != NULL ;){
    fprintf(stdout, "%s\n", str_ptr);
    str_ptr = strtok(NULL, ",");
  } 
```

这是我的整个代码：

```
#include <stdio.h>

int main() {

    char line[1024];
    FILE *fp = fopen("/Users/me/Desktop/output.txt","r");

    printf("Starting.. \n");
    if( fp == NULL ) {
        return 1;
    }
    int count = 0;
    int list[30]; //items will be stored here

    while(fgets(line, 1024, fp) != EOF) {
        count++;
        //parse the text in the line Remove the open bracket, then remove the last newline,comma and close bracket
        // data looks like this: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 2, 2, 4],
        size_t len = strlen(line);
        memmove(line, line+1, len-4);
        line[len-4] = 0;
        printf("%s \n",line);

        //parse the numbers in the char
        //now data looks like this:  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 2, 2, 4
        char *str_ptr;
        str_ptr = strtok(line, ",");
          for(; str_ptr != NULL ;){
            fprintf(stdout, "%s\n", str_ptr);
            str_ptr = strtok(NULL, ",");
          }

        //for testing just stop the file after two lines
        if (count == 2) {
            break;
        }

        if ( count > 1000000) {
            printf("count is higher than 1,000,000 \n");
            count = 0;
        }
    }
    printf(" num of lines is %i \n", count);

    return 0;
} 
```

除了调试器，我不确定在这种情况下如何获取有意义的信息。

## 更新

抱歉，不知道该怎么做。这是调试器中堆栈的副本（除了 main，如果我单击它们，它们都会说“没有可用的源代码..”然后列表中的项目：

```
Thread [1] (Suspended : Signal : EXC_BAD_ACCESS:Could not access memory)    
    strlen() at 0x7fff875ef4f0  
    __vfprintf() at 0x7fff875908c3  
    vfprintf_l() at 0x7fff8758f18e  
    fprintf() at 0x7fff87598d9a 
    main() at learningC.c:77 0x100000d5a 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:43:10.487

`fgets`返回`NULL`错误或 EOF。检查那个不是`EOF`.

```
while(fgets(line, 1024, fp) != NULL){ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T02:16:41.123

如果输入文件始终有效，我看不出有什么问题。我尝试在我的 Mac 上编译和运行它，它工作得非常好。也许您可以将示例文件上传到某个地方，这样我们就可以确切地看到发生了什么，因为`memmove`部分代码对于无效输入（例如空行或短行）来说太脆弱了。我建议将其更改为

```
char* data = line;
size_t len = strlen(line);
if (len > 3) {
    line[len - 3] = '\0';
    data++;
}

char *str_ptr;
str_ptr = strtok(data, ",");
for(; str_ptr != NULL ;){
    fprintf(stdout, "%s\n", str_ptr);
    str_ptr = strtok(NULL, ",");
} 
```

我的代码离完美的数据验证还很远，但至少它不会在空行上抛出段错误。

# c# - 在 Visual Studio 中创建数据库作为新的数据库项目，然后将其用作测试数据库

> ID：10837612
> 
> 赞同：1
> 
> 时间：2012-05-31T16:31:01.810
> 
> 标签：c#, .net, sql, visual-studio, oracle

我希望在 Visual Studio 中创建一个数据库作为新的数据库项目，然后将其用作测试数据库来选择/插入/删除/更新/等。目前我的程序连接到生产数据库，我只在停机或周转期间进行测试。有没有一种方法可以手动创建类似的数据库或复制现有数据库的一部分并将其用作我的代码运行的数据库。我正在使用 Visual Studio 2010 和 c#.NET 谢谢，

德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:51:32.923

创建生产数据库的备份，将其复制到您的系统。然后在您的系统上创建一个新数据库。将您所做的备份还原到新数据库

在这里检查：http: [//kb.eukhost.com/backup-and-restore-ms-sql-server-2008-database/](http://kb.eukhost.com/backup-and-restore-ms-sql-server-2008-database/) http://www.sqlteam.com/article/introduction-to-sql-server-database -备份

如果您可以访问 Management Studio，那就更容易了

# css - Gravity Forms - 选择时是否会自动清除输入字段？

> ID：10837615
> 
> 赞同：0
> 
> 时间：2012-05-31T16:31:13.273
> 
> 标签：css, input-field

当使用 Gravity Forms 作为电子邮件捕获弹出窗口时，如何在用户单击字段（名称、电子邮件等）时自动清除它们？就目前而言，他们必须单击，选择“名称”，然后将其删除，然后才能输入自己的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:35:40.640

看看[这个教程](http://www.gravityhelp.com/clearing-default-form-field-values-with-jquery/)。只需添加一些 JS，然后将一些类添加到您想要影响的字段中。

# javascript - JavaScript 库 + jQuery 插件矛盾：如何调试？

> ID：10837630
> 
> 赞同：0
> 
> 时间：2012-05-31T16:32:19.997
> 
> 标签：javascript, jquery, workflow, conflicting-libraries

我不是最优秀的专家，但我可以做得很好，美观且功能强大的网站或 Web 应用程序。我的主要工具是 PHP5、HTML5、CSS2 和 3、数据库（SQLite、MySQL）以及 JavaScript 和 jQuery。

我根本不是 JavaScript 专家。我经常找到有趣的 jQuery 插件或教程，并尝试将它们混合起来以实现所需的功能。这次我混合了来自不同来源的太多插件和 js 文件。

事实上，我的应用程序做我想做的事，除了某些行为。没有错误，一切看起来都很好，但错误行为仍然存在。所以也许我需要指定一个我不知道的类，或者一个与另一个插件的另一个相矛盾，我就是不明白，例如，为什么 a`<button type="button">DON'T submit</button>`只是提交表单。

无论如何，我的观点是：我该如何调试这种情况？是否有通用工具、建议、工作流程或其他东西可以帮助我理解库或插件之间的冲突或遗漏？（JavaScript 库、我自己的 JavaScript 和 jQuery 插件）？

## 编辑

我知道 Chrome 的调试器和 Firebug。但也许我只是不知道如何获得我需要的功能。阅读如何使用这些工具对我没有帮助。例如：我有一个标签继承了一个我没有手动分配给它的类（例如：`<button type="button" disabled>DON'T submit</button>`我没有自己写禁用）所以一些 JavaScript 文件正在分配它，但我怎么能看到谁做了这？哪个文件？班级？插入？图书馆？ETC？这是我要问的另一个例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T16:36:37.270

您可能正在使用两个使用 $() 函数的库。在 jQuery 中，$() 函数只是 jQuery() 的简写，因此您可以尝试使用 jQuery 代码并将“$(”的每个实例替换为“jQuery(”，看看是否有帮助。不知道您使用什么脚本'正在使用我不知道这是否可行，但如果您一次加载了多个框架（例如 jQuery），这可能是问题所在。

只要确保您没有将任何非 jQuery 函数从 $() 更改为 jQuery() ，否则它们会中断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T16:38:29.220

<button> 标签的默认功能与 <input type="submit"> 相同。

[http://htmldog.com/reference/htmltags/button/](http://htmldog.com/reference/htmltags/button/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T16:50:41.743

是的，有一些工具可以调试 javascript。

Chrome 作为内置调试器（按 F12 打开它）

但我最喜欢的是`firebug`（它是 Firefox 的插件，从[这里](http://www.getfirebug.com/)下载）

要解决冲突问题，请阅读[此处](http://docs.jquery.com/Using_jQuery_with_Other_Libraries/)

此外，默认情况下`<button>`提交`form`.

如果不想`<button>`提交`form`，可以使用这个，

```
<button type="button" onclick='return false;'>DON'T submit</button> 
```

# asp.net-mvc - Url.Action 未指向本地主机

> ID：10837631
> 
> 赞同：0
> 
> 时间：2012-05-31T16:32:32.610
> 
> 标签：asp.net-mvc, html, razor

我遇到了一个问题 w/ Url.Action 没有指向正确的本地主机，有人可以告诉我如何纠正这个问题吗？

相同的信息适用于“Html.ActionLink”

```
@<li>@Html.ActionLink(cattext, "Topic", "Tutorial", New With {.categorypassed = "INTRO"}, vbNull)</li> 
```

返回以下链接：

```
http://localhost:62510/Tutorial/Topic?categorypassed=INTRO 
```

但是，如果我将此信息用作“Url.Action”：

```
<a data-role="button" data-transition="fade" href="@Url.Action("Topic", "Tutorial", New With {.categorypassed = "INTRO"}, vbNull)" data-icon="arrow-l" data-iconpos="left">Back</a> 
```

它返回一个虚假的本地主机：

```
1://localhost/Tutorial/Topic?categorypassed=INTRO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T17:27:11.970

省略最后一个参数：vbNull。

使用该参数调用方法重载来指定 URL 的协议，例如“http”或“https”。Null 不是一个有效的选项，这可能是您在输出中得到“1://”的原因。Web 服务器处理不同端口号上的协议，因此更改协议将导致您更改 URL 中的端口。

听起来这是您正在寻找的 URL.Action 的重载：

```
Public Function Action ( _
    actionName As String, _
    controllerName As String, _
    routeValues As RouteValueDictionary _
) As String 
```

# android - android运行工作，调试不

> ID：10837633
> 
> 赞同：-1
> 
> 时间：2012-05-31T16:32:34.607
> 
> 标签：android

您好，我正在使用带有 Eclipse 的外部库（[https://github.com/johannilsson/android-actionbar](https://github.com/johannilsson/android-actionbar)）（在 eclipse->project->properties->android->library 中，我也未选中“Is Library”）。

现在我无法调试，而不是收到这样的消息

```
[2012-05-31 18:28:42 - MyLocationDemo] Uploading MyLocationDemo.apk onto device 'CM7-Blade'
[2012-05-31 18:28:42 - MyLocationDemo] Installing MyLocationDemo.apk...
[2012-05-31 18:28:44 - MyLocationDemo] Success! 
```

我明白了

```
[2012-05-31 18:27:28 - Reactivame] Uploading Abc.apk onto device 'CM7-Blade'
[2012-05-31 18:27:29 - Reactivame] Installing Abc.apk...
[2012-05-31 18:27:36 - Reactivame] Success!
[2012-05-31 18:27:36 - Reactivame] \Abc\bin\Abc.apk installed on device
[2012-05-31 18:27:36 - Reactivame] Done! 
```

我尝试使用 Log.v()，但即使这样也行不通。我重新启动了 PC 和我拥有的两个测试设备，但它没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:13:48.730

日志不会打印到控制台。日志打印到 Logcat。在 Eclipse 中执行以下操作。

```
Window > Show View > Other > Android > Logcat 
```

交替

```
Window > Show Perspective > Other > DDMS 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T11:10:43.527

我在使用 AndroidManifest.xml 时遇到问题，因为我试图将我的主要活动用作可搜索活动，这里是关于如何执行该[Android 的答案：如何将活动声明为主要活动和可搜索活动？](https://stackoverflow.com/questions/5739652/android-how-to-declare-an-activity-as-main-and-searchable)

# c - 用 Bloodshed 为 C 中的文本添加颜色

> ID：10837639
> 
> 赞同：1
> 
> 时间：2012-05-31T16:33:05.360
> 
> 标签：c

这可能吗？

我知道可以在命令提示符下使用 COLOR ##

但是在C语言中可以使用流血吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T16:45:15.360

什么操作系统？你有什么终端可用？请注意，这与C无关，更不用说流血事件了。您输出一个字符串，终端可能会或可能不会选择将其解释为颜色。你必须看看如何用你的终端来做到这一点。该解决方案当然是不可移植的。支持转义序列的终端的一个这样的例子是

```
printf("\\x1b[1;33mThis is yellow\\x1b[m(Back to default)\n"); 
```

您可能对[ANSI 终端的颜色转义序列感兴趣](http://en.wikipedia.org/wiki/ANSI_escape_code#Colors)

您可能还想寻找为有限数量的终端执行此操作的库。例如，[ncurses](http://en.wikipedia.org/wiki/Ncurses)可以在 Linux 中为您提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T16:55:25.463

如果您使用 *nix、osx 或在 Windows 上使用 cygwin msys，您的终端应该支持 Fred Larson 提到的 ANSI 序列（不确定 osx）。普通的 windows 终端没有。但是**bloodshed**可以使用cygwin，所以你很幸运。

这是一个例子：

```
#include <stdio.h>

#define BOLDMAGENTA "\033[1;35m"
#define BOLDGREEN "\033[1;32m"

int main(void) {
    printf("%shello %sworld\n", BOLDMAGENTA, BOLDGREEN);
    return 0;
} 
```

请注意，这会使终端保持亮绿色，但如果您的提示设置了颜色，它将被重置。

以下是 ANSI 转义码的一些解释： [http ://en.wikipedia.org/wiki/ANSI_escape_code](http://en.wikipedia.org/wiki/ANSI_escape_code)

# c++ - 如何区分来自同一子网和不同 IP/用户的 sockaddr_in 结构

> ID：10837646
> 
> 赞同：0
> 
> 时间：2012-05-31T16:33:28.827
> 
> 标签：c++, c, tcp, winsock

我正在使用 Windows 的 Winsock2 API 开发游戏服务器，直到现在将其移植到 Linux。

我发现的主要问题是我不知道如何区分来自同一路由器/网络的游戏客户端。假设 2 个在同一网络中的游戏玩家通过相同的路由器 IP 和端口访问 Internet，例如 IP 220.100.100.100 和端口 5000，我的 C/C++ 服务器如何区分两个 TCP 连接并知道它们是两个不同的玩家吗？

当 accept(...) 返回时，我可以在返回套接字的 sockaddr_in 结构中找到任何区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:08:05.270

如果两个客户端（游戏玩家）位于路由器后面，则仅使用套接字很难区分它们。

如果您使用的是 TCP，那么它应该不是问题。每个客户端都通过一个唯一的套接字连接，因此您知道该套接字上的任何内容都来自它们。当他们第一次登录时，我假设他们提供了一些凭据（名称、密码），因此只需将凭据与套接字相关联。

如果您使用的是无连接协议，例如 UDP，他们第一次联系您时，您会给他们一个唯一的号码或令牌。下次他们联系您时，他们必须在消息中包含他们的令牌，以便您识别他们。

我错过了什么吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T16:40:30.687

您不能通过测试调用 socket() 的套接字描述符来区分吗？回报？

# c# - 在异常上显示自定义错误消息：从客户端检测到潜在危险的 Request.Form 值

> ID：10837647
> 
> 赞同：14
> 
> 时间：2012-05-31T16:33:30.700
> 
> 标签：c#, asp.net, sql-injection, validation, login-control

我在我的 Web 应用程序中使用 ASP.NET 的登录控制。当发生此异常时，我想在标签上显示一种有趣的错误类型，`System.Web.HttpRequestValidationException: A potentially dangerous Request.Form value was detected from the client` 当用户尝试通过在登录控件的用户名文本字段中输入它们来执行 sql 注入攻击或某些 HTML 或 SCRIPT 操作时，就会发生这种错误。我尝试了很多事情，例如将身份验证登录包含在 try catch 块中，并捕获 `System.Web.HttpRequestValidationException`异常也对我创建的事件执行相同操作，与用户名文本框的 onTextChange 相同。但所有这些尝试都失败了。请告诉我如何检查此异常并向攻击者显示一条有趣的消息？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-31T16:56:14.967

以下是一些如何提供更友好的错误消息的示例：

[http://romsteady.blogspot.com/2007/06/how-to-catch-httprequestvalidationexcep.html](http://romsteady.blogspot.com/2007/06/how-to-catch-httprequestvalidationexcep.html)

[如何在生产中捕获 HttpRequestValidationException](https://stackoverflow.com/q/5028206/698)

您需要记住的是，在页面代码发生之前会引发此异常。因此，您通常无法在页面代码中捕获错误，而只能在 Application_Error 中捕获错误。

我自己没有尝试过，但是[这个站点](http://gargmanoj.wordpress.com/tag/httprequestvalidationexception/)提供了另一种方法来允许您的页面代码执行，但仍然使用内置逻辑保护自己免受恶意输入，以及在您自己的代码中捕获异常。

# javascript - 它显示一个链接两次，而不是一次

> ID：10837649
> 
> 赞同：0
> 
> 时间：2012-05-31T16:33:38.550
> 
> 标签：javascript, jquery, html

我在下面有这段代码，问题是它显示`<span>`标签“Open Grid”两次，而它应该只显示一次：

```
$('.gridTxt', context).each( function() {

    var $this = $(this);
    var $optionsText = $("<div>Option Type:</div><input type='text' class='gridTxtRow maxRow' readonly='readonly' />")
.attr('name',$this.attr('name')+"[]")
.attr('value',$this.val())
.appendTo( $options )
.after("<span href='#' class='showGrid'>[Open Grid]</span>");

$questionType = $this.val();

}); 
```

现在，如果我删除`<div>`字符串“Option Type”周围的标签，那么它会显示一次“Open Grid”链接，但不会显示字符串“Option Type”。

那么如何显示“选项类型：”但确保它只显示一次“打开网格”链接？

这是[Jsfiddle](http://jsfiddle.net/hnbsV/2/)。只需单击“添加问题”按钮，您就会看到发生了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:14:08.963

这是你要找的吗？

[http://jsfiddle.net/hnbsV/3/](http://jsfiddle.net/hnbsV/3/)

# c# - WCF 数据服务不支持很多东西

> ID：10837652
> 
> 赞同：0
> 
> 时间：2012-05-31T16:33:48.987
> 
> 标签：c#, wcf, entity-framework-4, wcf-data-services, wcf-data-services-client

我正在使用 WCF 数据服务和实体框架 4 Code First 的 2011 年 3 月 CTP2，并且遇到了很多问题。我遇到的问题与不受支持的“内部查询”有关。

例如，在我的服务端，我有一个 Auction 对象，一个 Auction 对象可以附加 0 个或多个出价。现在，在我的客户端，我想执行这个查询来找到当前的最高出价（**a**是一个拍卖对象）。

```
a.Bids.OrderByDescending(b => b.Amount).First().Amount 
```

忽略如果没有投标，这将失败的事实。运行此查询时出现此错误

```
The expression [10007].Bids.OrderByDescending(b => b.Amount).First().Amount is not supported. 
```

所以我想我会把这个逻辑放在服务端。因此，我从客户端调用此方法（再次**是**拍卖）

```
a => _auctionContext.GetHighestBid(a.Id).First().Amount 
```

我再次收到错误

```
The expression value(UI.AuctionService.AuctionContext).GetHighestBid([10007].Id).First().Amount is not supported. 
```

我的问题是，为什么会这样？是因为我使用的 WCF 数据服务版本吗？这些问题在最新版本中得到解决了吗？

谢谢

萨钦

**编辑**

```
_auctionOrderings = new Dictionary<string, Func<IQueryable<Auction>, bool, IOrderedQueryable<Auction>>>
            {
                {"Ends", Utils.CreateOrderingFunc<Auction, DateTime?>(a => a.Ends)},
                {"CurrentPrice", Utils.CreateOrderingFunc<Auction, decimal>(a.Bids.OrderByDescending(b => b.Amount).First().Amount)},
                {"StartingPrice", Utils.CreateOrderingFunc<Auction, decimal>(a => a.StartingPrice)}
            };

public static Func<IQueryable<T>, bool, IOrderedQueryable<T>> CreateOrderingFunc<T, TKey>(Expression<Func<T, TKey>> keySelector)
        {
            return
                (source, ascending) =>
                ascending
                    ? source.OrderBy(keySelector)
                    : source.OrderByDescending(keySelector);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T15:32:10.170

不幸的是，由于协议的性质，不支持。这是你不能做的事情的清单。

[http://msdn.microsoft.com/en-us/library/ee622463.aspx](http://msdn.microsoft.com/en-us/library/ee622463.aspx)

我的建议是创建一个服务方法来做你想做的事。

# php - 在 PHP 中拆分 IDN URL

> ID：10837654
> 
> 赞同：2
> 
> 时间：2012-05-31T16:33:51.070
> 
> 标签：php, regex, idn

我正在尝试按照`http://exämple.se/path`或`https://äxämple.se/anotherpath?foo=bar&baf=bas`这样的方式获取 IDN URL，以便我得到它的组件，如下所示：

```
[0] http(s)://
[1] äxämple.se
[2] /anotherpath?foo=bar&baf=bas 
```

我的第一个想法是“我就用`parse_url`！”。好吧，除了它不做 IDN 域，所以没有运气。

接下来我尝试了一堆我自己的正则表达式技巧，但不知何故未能获得任何有用的输出（其中一些工作到一定程度，但仍然痛苦地缺乏。

最后，我尝试了各种其他人的正则表达式模式，但它们似乎都不适合我（正常工作 = 捕获任何有用的东西，一个捕获整个 url 作为它的“协议”部分，我遇到的大多数其他人都没有捕获任何内容或显然在功能上与我尝试过的相同）。

当然，我为什么要这样做？我想`idn_to_ascii`在将 URL 重新拼凑在一起并将其存储在数据库中之前在域名上运行。

那么，我在这里做错了什么？我的方法是完全错误的，还是有一些神奇的调用`preg_match`可以解决我的问题？

编辑：最好我想要一个不涉及下载其他人编写的代码块的解决方案（比如，一个名为`ParseIDNUrl`100kB 的自定义类）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T16:43:27.967

`parse_url`应该可以正常工作。使用 PHP 5.3.4 我已经能够只提取域部分：

```
print parse_url('http://äxämple.se/foobar', PHP_URL_HOST); 
```

也许您需要调整编码：

```
print utf8_decode(parse_url('http://äxämple.se/foobar', PHP_URL_HOST)); 
```

我得到的输出是：

```
äxämple.se 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T16:38:24.600

很抱歉我没有百分百阅读你的帖子。

这是我可以在这里找到的正则表达式：[正确匹配 IDN URL](https://stackoverflow.com/questions/1974941/properly-matching-a-idn-url)

```
\b(([\w-]+://?|www[.])[^\s()<>]+(?:\([\w\d]+\)|([^[:punct:]\s]|/))) 
```

# java - 在新意图中监视 AsyncTask 执行？

> ID：10837658
> 
> 赞同：0
> 
> 时间：2012-05-31T16:34:07.183
> 
> 标签：java, android, android-asynctask, android-activity

如何调用新意图的方法？我的目标是拥有一个启动 AsyncTask 的 Activity。从我的主要活动开始，我想以此作为一个意图，并

获取任务以检查它是否仍在运行（如果 foo() 再次执行）。

```
class MainActivity extends Activity () {
    foo() {
        Intent i = new Intent(this, MyTaskActivity.class);
        startActivity(i);

        //AsyncTask task = i.getTask(); ??
        //if (task.getStatus() ==...)
    }
}

class MyTaskActivity exteds Activity() {
    private AsyncTask task;

    public AsyncTask getTask() {
        return this.task;
    }

    @Override
    onCreate(..) {
        task = new MyTask().execute();
    }

    private class MyTask extends AsyncTask<..>() {

    }
} 
```

//解决方案：从主活动中调用它：

```
((MyTaskActivity) getAppContext()).getTask(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:39:33.007

您可以捕获任务的结束并发送主要活动捕获的广播或重新启动主要活动（如果它在清单中使用特定标志定义，则主要活动应显示在顶部）。

有一件事是肯定的：你无法控制孩子的活动。

# jquery - 淡出文章并同时删除表格？

> ID：10837662
> 
> 赞同：0
> 
> 时间：2012-05-31T16:34:20.217
> 
> 标签：jquery

我有一篇文章：

```
<article>
    Some paragraphs.
</article> 
```

下面我有我的`contact`：

```
<div id="contact">
    stuff, this form is 600 px tall
</div> 
```

`contact`设置为`display:none;`。

我使用 jQuery 来切换它。我要做的是修改此脚本`http://tutsplus.com/lesson/slides-and-structure/`，使其淡出文章文本，然后在联系表格中滑动。遇到一些麻烦。

代码：

```
<script>

(function() {

$('html').addClass('js');

var contactForm = {

    container: $('#contact'),
    article: $('article'),

    init: function() {
        $('<button></button>', {
            text: 'Contact Me'
        })
            .insertAfter('article:first')
            .on('click', function() {
                console.log(this);
                this.show();
                // contactForm.article.fadeToggle(300);
                // contactForm.container.show();
            })
    },

    show: function() {
        contactForm.close.call(contactForm.container);
        contactForm.container.slideToggle(300);
    },

    close: function() {
        console.log(this);
        $('<span class=close>X</span>')
            .prependTo(this)
            .on('click', function(){
                contactForm.article.fadeToggle(300);
                contactForm.container.slideToggle(300);
            })
    }
};

contactForm.init();

})();

</script> 
```

不工作的部分是：

```
.on('click', function() {
    console.log(this);
    this.show();
    // contactForm.article.fadeToggle(300);
    // contactForm.container.show();
}) 
```

当我这样做`.on('click', this.show);`时它工作正常，当我`this.show`输入一个函数时它不起作用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:36:38.233

`this.show()`在 范围内工作得很好`close()`，因为`this`在范围内`close()`，但在范围内不可用`.on('click') callback function`，所以你需要保留`this`下面的引用并重用它。

```
 close: function() {
        // keeping reference
        var reference = this;

        $('<span class=close>X</span>')
            .prependTo(this)
            .on('click', function(){
                //  using above reference here
                reference.article.fadeToggle(300);
                reference.container.slideToggle(300);
            })
    } 
```

# iphone - UITableViewCell 背景颜色

> ID：10837664
> 
> 赞同：4
> 
> 时间：2012-05-31T16:34:27.953
> 
> 标签：iphone, ios, uitableview

我有一个 UITableViewController 我正在尝试自定义样式。我已经完成了 95% 的工作，但是无法从单元格背景中移除奇怪的阴影。我在此屏幕截图中突出显示了我要删除的内容：

![普通视图](../Images/811511018b757635ba4f3f6c6261152d.png)

为了尝试解决这个问题，我已经转储了构成我的 UITableView 的所有视图，然后对它们进行着色以尝试找到我需要更改的视图：

![样式视图](../Images/8f1910c4010a074db8b90b437f6920a4.png)

如您所见，我无法为该特定位置着色。换句话说，我找不到与该地点相关的视图。

如何从我的单元格中移除阴影？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T17:41:56.600

表格视图正在重新启动每个部分后面的渐变，因为它只是采用您给它的颜色。

相反，使用`backgroundView`表格视图的属性 - 使用您的图像创建一个图像视图，并将其设置为背景视图，或者像上面那样创建一个具有背景颜色的 UIView。

您将需要删除您在其他地方设置背景颜色的任何代码，并确保您的部分标题视图具有清晰的背景或对比鲜明的背景。

作为一个简单的演示，我创建了一个分组表视图，其背景颜色设置为清除，`viewDidLoad`表视图控制器中的以下代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIView *backgroundView = [[UIView alloc] initWithFrame:self.tableView.bounds];
    CAGradientLayer *layer = [CAGradientLayer layer];
    layer.colors = [NSArray arrayWithObjects:(id)[UIColor redColor].CGColor,(id)[UIColor whiteColor].CGColor, nil];
    layer.frame = backgroundView.frame;
    [backgroundView.layer addSublayer:layer];
    self.tableView.backgroundView = backgroundView;
} 
```

这给出了以下内容（诚然，非常难看！）。细胞“漂浮”在此之上。

![在此处输入图像描述](../Images/7b1cf8c345456e014304c023623fde32.png)

# linux - 通过 /proc/mtrr 禁用缓存

> ID：10837665
> 
> 赞同：4
> 
> 时间：2012-05-31T16:34:28.653
> 
> 标签：linux, cpu-cache

当我发出这个命令时

```
sudo sh -c "echo \"base=0x110000 size=0xa000 type=uncachable\" >| /proc/mtrr" 
```

/proc/mtrr 没有改变，而我希望它添加一个新条目。

它适用于以下命令：

```
sudo sh -c "echo \"base=0x110000 size=0x10000 type=uncachable\" >| /proc/mtrr" 
```

它添加了这个条目：

```
reg05: base=0x000110000 (    1MB), size=   64KB, count=1: uncachable 
```

所以我假设 size 参数在某些方面受到限制。有这样的限制吗？是否可以将任意内存区域设置为“不可缓存”？

我的原始（启动后）/proc/mtrr 如下所示：

```
reg00: base=0x000000000 (    0MB), size= 1024MB, count=1: write-back
reg01: base=0x040000000 ( 1024MB), size=  512MB, count=1: write-back
reg02: base=0x05f700000 ( 1527MB), size=    1MB, count=1: uncachable
reg03: base=0x05f800000 ( 1528MB), size=    8MB, count=1: uncachable
reg04: base=0x0c0000000 ( 3072MB), size=  256MB, count=1: write-combining 
```

我在 Pentium M 上使用 Linux 2.6.32-41-generic #89-Ubuntu SMP。参考： [http ://www.mjmwired.net/kernel/Documentation/mtrr.txt](http://www.mjmwired.net/kernel/Documentation/mtrr.txt)

背景：对于计时实验，我想为某个进程的内存区域禁用 cpu 缓存。

# php - 从 Mysql 而不是 XML 获取数据？

> ID：10837666
> 
> 赞同：0
> 
> 时间：2012-05-31T16:34:28.900
> 
> 标签：php, javascript, mysql, xml

嘿，我有这个用于冒泡的 javascript... 这个脚本从 xml 文件中获取 InfoID 和 InfoData 标记...

```
<script type="text/javascript">
$(document).ready( function ( ) {
    // Get the XML data from your file
    $.get('scores.xml', function( data ) {

        // Because we've given jQuery the XML datatype, we can jump straight to finding the element.    
        $(data).find('Game').each( function ( ) {

            // The current object now holds a single "GAME" - find the elements we need
            var game_id = $(this).find('InfoID').text( );
            var game_info = $(this).find('InfoData').text( );

            // Create the popup.
            $('.'+game_id).CreateBubblePopup({
                    position : 'left', align : 'center',
                    innerHtml: game_info,
                    innerHtmlStyle: { color:'#FFFFFF', 'text align':'center' },
                    themeName: 'all-black',
                    themePath: 'images/jquerybubblepopup-themes'
            });
        }); // end of each
    }, 'xml'); // The 'xml' tells jQuery to expect XML back from the request
});
</script> 
```

我需要让这个脚本从数据库表而不是 xml 中获取数据。

我的数据库中的表中有相同的 InfoID 和 InfoData 行...

我使用这个 php 脚本从 db 获取数据：

```
<?php
    // Connect to database server
    mysql_connect("localhost", "root", "asnaeb") or die (mysql_error ());

    // Select database
    mysql_select_db("scores") or die(mysql_error());

    // SQL query
    $strSQL = "SELECT * FROM latest";

    // Execute the query (the recordset $rs contains the result)
    $rs = mysql_query($strSQL);

    // Loop the recordset $rs
    // Each row will be made into an array ($row) using mysql_fetch_array
    while($row = mysql_fetch_array($rs)) { 

       // Write the value of the column FirstName (which is now in the array $row)?>
      <?php echo $row['Header'].""; ?>
      <?php echo $row['Row'].""; ?>
      <?php echo $row['Date'].""; ?>
      <?php echo $row['Time'].""; ?>
      <?php echo $row['AwayTeam'].""; ?>
      <?php echo $row['Score'].""; ?>
      <?php echo $row['HomeTeam'].""; ?>
      <?php echo $row['Other'].""; ?>
      <?php echo $row['InfoID'].""; ?>
      <?php echo $row['InfoData'].""; ?>

<?php } mysql_close(); ?> 
```

知道我该怎么做吗？所以我可以删除我的 xml 文件并使用数据库:) 提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:48:52.317

您可以使用带有单独回调函数的 ajax 帖子并从您的 php 脚本返回 json 数据。

试一试：

```
// try this for your javascript
<script type="text/javascript">
$(document).ready( function ( ) {
    function getGameInfo() {
  $.post("path/to/phpScript.php", 
   // this is the success callback
   function (json) {
    // this calls the function with the returned data
    parseReturnedData(json);
  });
  return false;
};

// process json data to set your game_id and game_info vars
function parseReturnedData(data) {
  var obj = jQuery.parseJSON(data);
  var game_id = obj.InfoID;
  var game_info = obj.InfoData;
}

// Create the popup.
$('.'+game_id).CreateBubblePopup({
  position : 'left', align : 'center',
  innerHtml: game_info,
  innerHtmlStyle: { color:'#FFFFFF', 'text align':'center' },
  themeName: 'all-black',
  themePath: 'images/jquerybubblepopup-themes'
});
</script>

// try this for your php file
<?php

    // declare vars
    $response = array();

    // Connect to database server
    mysql_connect("localhost", "root", "asnaeb") or die (mysql_error ());

    // Select database
    mysql_select_db("scores") or die(mysql_error());

    // SQL query
    $strSQL = "SELECT * FROM latest";

    // Execute the query (the recordset $rs contains the result)
    $rs = mysql_query($strSQL);

    // Loop the recordset $rs
    // Each row will be made into an array ($row) using mysql_fetch_array
    while($row = mysql_fetch_array($rs)) { 

       // Write the value of the column FirstName (which is now in the array $row)?>
      $response['Header'] = $Header;
      $response['Row'] = $Row;
      $response['Date'] = $Date;
      $response['Time'] = $Time;
      $response['AwayTeam'] = $AwayTeam;
      $response['Score'] = $Score;
      $response['HomeTeam'] = $HomeTeam;
      $response['Other'] = $Other;
      $response['InfoID'] = $InfoID;
      $response['InfoData'] = $InfoData;

    } 

    echo json_encode($response);

    mysql_close(); 

?> 
```

# xcode4.2 - 在 Xcode 4.2 中，我如何使用 UITableView 数据来创建和更新电子表格模型视图？

> ID：10837668
> 
> 赞同：1
> 
> 时间：2012-05-31T16:34:33.473
> 
> 标签：xcode4.2, ipad, ipad-2

我有一个想法，我想在哪里使用表格视图输入数据，然后让它出现/更新在“电子表格外观”模型视图中。

在表格视图中添加单元格行会将单元格添加到生成的电子表格类型最终视图中。

我了解表格视图，但不确定如何获得我想要的结果。

我很想知道我是否可以以某种方式使用现有的 excel 文档并将单元格链接到 tableview 数据。

任何信息，将不胜感激。

谢谢

# .net - 如何为方法实现前置条件？

> ID：10837669
> 
> 赞同：3
> 
> 时间：2012-05-31T16:34:41.013
> 
> 标签：.net, c#-4.0, code-contracts

我有一堂课

```
public class MyService  
{  
   public IList<Exception> ExList {get; private set;}

   public bool HasErrors { get { return ExList.Count > 0; } }

   public MyMethod()
   {
       ExList.Clear();
       //- do some logic ---
   }

} 
```

我想调用 MyMethod() 并检查是否发生错误。像这样的东西

```
var service = new MyService();

service.MyMethod();

if(service.HasErrors)
{
    // - do some logic
}

service.MyMethod();

if(service.HasErrors)
{
    // - do some logic
} 
```

但我必须写“ExList.Clear();” 为 MyService 类中的每个方法手动行。问题是 - 有什么解决方案可以避免这种情况吗？

我需要类似的东西

```
public class MyService  
{  
   public IList<Exception> ExList {get; private set;}

   public bool HasErrors { get { return ExList.Count > 0; } }

   private void Precondition()
   {
       ExList.Clear();
   }

   public MyMethod()
   {           
       //- do some logic ---
   }

} 
```

每个方法的调用都会自动调用 Precondition()。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T10:28:09.377

您可以研究的另一个工具是 PostSharp。PostSharp 是一个 AOP 框架，允许您定义自定义方面（属性）。

您将对[OnMethodBoundaryAspect](http://doc.sharpcrafters.com/postsharp-2.1/Default.aspx##PostSharp-2.1.chm/html/T_PostSharp_Aspects_OnMethodBoundaryAspect.htm)感兴趣。像下面这样的东西应该可以解决问题。args.Instance 将是“正在执行该方法的实例”

```
public class ClearListPrecondition : OnMethodBoundaryAspect
{
    public override void OnEntry(MethodExecutionArgs args)
    {
        MyService service = args.Instance as MyService;
        if (service == null)
        {
            throw new InvalidOperationException(
              "This aspect can only execute on types of MyService");
        }

        service.ExList.Clear();
        base.OnEntry(args);
    }
} 
```

然后，您将使用以下方面装饰您的服务方法：

```
[ClearListPrecondition]
public void MyMethod()
{
} 
```

如果你选择走 AOP 的道路来完成这样一个微不足道的任务，我强烈建议你重新思考你的设计。

首先，应该首选抛出异常，但如果您坚持，您可以从您的方法返回结果。

例如

```
public MethodResult MyMethod()
{
    ....
     if(errorHasOccured)
     {
          return new MethodResult() {Exceptions = exception};
     }
    ....
     return new MethodResult() {ResultOfMethod = ...};
}

public class MethodResult
{
   public IList<Exception> Exceptions {get; set;}
   public bool HasErrors { get { return ExList.Count > 0; } } 
   public string ResultOfMethod {get;set;}

} 
```

您的消费者可以检查方法调用的结果：

```
var service = new MyService();

var result1 = service.MyMethod();

if(result1.HasErrors)
{
    // - do some logic
}

var result2 = service.MyMethod();

if(result2.HasErrors) 
{
    // - do some logic
} 
```

这消除了重置服务状态的需要，因为它变得无状态（因此是线程安全的）

# javascript - 添加到 Number.MAX_VALUE

> ID：10837670
> 
> 赞同：16
> 
> 时间：2012-05-31T16:34:46.350
> 
> 标签：javascript, math, floating-point, infinity

这个问题的答案可能很明显，但我无法在 Mozilla 文档中或通过粗略搜索在 Google 上找到它。

如果你有这样的代码

```
Number.MAX_VALUE + 1; // Infinity, right?
Number.MIN_VALUE - 1; // -Infinity, right? 
```

然后我希望向 Number.MAX_VALUE 添加*任何*内容会将其推到`Infinity`. 结果只是`Number.MAX_VALUE`向我吐口水。

然而，当在 Chrome JS 控制台中玩耍时，我注意到它实际上并没有变成`Infinity`直到我添加/减去足够多：

```
Number.MAX_VALUE + Math.pow(100,1000); // now we hit Infinity
Number.MIN_VALUE - Math.pow(100,1000); // -Infinity at last 
```

`Number.MAX_VALUE`和之间的这个“缓冲区”的解释是什么`Infinity`？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-31T17:05:32.203

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-31T16:52:17.797

如果您查看`Number.MAX_VALUE.toString(2)`，您会看到 的二进制表示`MAX_VALUE`是 53 个 1 后跟 971 个 0。这是因为 IEEE 754 浮点数是由*尾数*系数乘以 2 的幂（所以浮点数的另一半是*指数*）。使用`MAX_VALUE`时，尾数和指数都已达到最大值，因此您会看到一堆移位了很多位。

简而言之，您需要增加`MAX_VALUE`足以实际影响尾数的值，否则您的附加值会丢失并四舍五入。

`Math.pow(2, 969)`是不会倾斜的 2 的最低`MAX_VALUE`幂`Infinity`。

# php - 如何从模板中获取 wordpress 插件的 url？

> ID：10837673
> 
> 赞同：1
> 
> 时间：2012-05-31T16:34:59.327
> 
> 标签：php, wordpress

我现在正在为一个客户工作，他希望我为他们编写一个 wordpress 插件，最重要的是，他们希望我将它作为一项功能集成到他们的模板中。但是，由于插件位置的 url 可能会改变，我希望能够从模板中调用加载的插件，但是我没有找到任何好的方法。我已经阅读了[WordPress Codex](http://codex.wordpress.org/Determining_Plugin_and_Content_Directories)并没有找到适合我需要的功能，或者我根本不明白他们在做什么。我不熟悉 WordPress 如何加载和使用插件。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:39:40.687

这是[关于插件的 WP 概述](http://codex.wordpress.org/Writing_a_Plugin)。

简而言之，插件由 WP 安装管理，一旦激活就会在页面被调用时自动加载。插件文件存储在：wp-content/plugins/ 并存储在每个单独的 WP 安装中。只要您的客户端没有弄乱 wp-content 目录结构，如果在 WP 管理控制台中激活，您的插件应该加载（并且它可以正常工作/不会中断）。这是到目前为止通过 WP 运行插件的唯一方法（尽管我没有看到这种变化）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-31T16:42:47.873

Wordpress 有一个内置函数来查找插件的路径，类似于：

```
$pluginpath =  plugin_dir_url(your_plugin.php); 
```

我相信这就是你要问的，不是吗？还是您指的是从插件向模板发送功能？在这种情况下，您必须使用动作挂钩。这是参考：[链接](http://codex.wordpress.org/Function_Reference/add_action)

# tsql - 是否有可能在一个表中然后在另一个表中“不存在/不存在”？

> ID：10837678
> 
> 赞同：2
> 
> 时间：2012-05-31T16:35:12.277
> 
> 标签：tsql

我现在正在维护一个大型应用程序，其他人编写了从一些大型政府遗留系统中挖掘一些数据。基本上，我需要一个查询结果来填充一个网格视图，该网格视图从技术订单中获取每个部件号，并计算 Fedlog 表中匹配的部件号。如果没有找到，请查看“商业”表。现有查询目前仅在 Fedlog 表中查找，内容如下：

```
select p.*,
 (select case when count(*) > 0 then 'Y' else 'N' end as SL
  from tbl_fedlog where [Part Number] = p.[Part Number]) as SL
from tbl_pcms p 
where  p.[Tech Order] = '0B-E0C-9' order by p.Figure, p.[Index], p.Indenture 
```

当'N'时，我必须查看商业表。我可以就解决此问题的最佳方法提出一些建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:53:59.573

'N' 场景的结果应该是什么样的 - 只是另一个'Y'/'N' 答案？如果是这样，您应该能够简单地将“N”表达式替换为针对“商业”表的另一个标量查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T17:06:33.347

这是`UNION ALL`Fedlog 查询和商业查询之间的一个查询，用于检查每个查询是否存在：

```
SELECT p.*
, SL = 'Y'
, part_count = (SELECT COUNT(*) FROM tbl_fedlog WHERE [Part Number] = p.[Part Number])
from tbl_pcms p 
where  p.[Tech Order] = '0B-E0C-9'
AND EXISTS(SELECT 1 FROM tbl_fedlog WHERE [Part Number] = p.[Part Number])

UNION ALL

SELECT p.*
, SL = 'Y'
, part_count = (SELECT COUNT(*) FROM tbl_commercial WHERE [Part Number] = p.[Part Number])
from tbl_pcms p 
where  p.[Tech Order] = '0B-E0C-9'
AND EXISTS(SELECT 1 FROM tbl_commercial WHERE [Part Number] = p.[Part Number])
AND NOT EXISTS(SELECT 1 FROM tbl_fedlog WHERE [Part Number] = p.[Part Number]) 
```

不过，我需要更多信息来解决其他答案中提到的“N”场景。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T05:46:07.560

如果逻辑是`'Y'`在零件存在于`Fedlog`或`Commercial`表中时显示，`'N'`否则您可以尝试分别对这些表进行分组和聚合，并将聚合结果集（外部）连接到`tbl_pcms`，如下所示：

```
SELECT
  p.*,
  CASE WHEN COALESCE(f.PartCount, c.PartCount) IS NULL THEN 'N' ELSE 'Y' END AS SL
FROM tbl_pcms p

  LEFT JOIN (
    SELECT
      [Part Number],
      COUNT(*) AS PartCount
    FROM tbl_fedlog
    GROUP BY [Part Number]
  ) f ON p.[Part Number] = f.[Part Number]

  LEFT JOIN (
    SELECT
      [Part Number],
      COUNT(*) AS PartCount
    FROM tbl_commercial
    GROUP BY [Part Number]
  ) c ON p.[Part Number] = c.[Part Number]

WHERE p.[Tech Order] = '0B-E0C-9'
ORDER BY
  p.Figure,
  p.[Index],
  p.Indenture 
```

# .net - WPF - MVVM - 文本框与视图模型属性不同步

> ID：10837679
> 
> 赞同：10
> 
> 时间：2012-05-31T16:35:14.063
> 
> 标签：.net, wpf, data-binding, mvvm, viewmodel

我有一个带有 TextBox 的 WPF 视图，将 Text 字段绑定到 ViewModel，UpdateSourceTrigger 设置为 PropertyChanged。在 ViewModel 的属性设置器中，我有一个简单的检查来防止文本超过 10 个字符：

```
<TextBox Text="{Binding Name, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" />

public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        this.DataContext = new MainViewModel();
    }
}

public string Name
{
    get { return _Name; }
    set
    {
        if (_Name != value)
        {
            if (value.Length <= 10)
            {
                _Name = value;
            }
            RaisePropertyChanged("Name");
        }
    }
} 
```

如果未设置该值，我仍然是 RaisePropertyChanged（它只是触发 PropertyChanged）。

问题是当我在 UI 中输入第 11 个字符时，我没有更新 _Name。我触发了 PropertyChanged，我可以看到 get 访问器被调用，它返回的字符串只有 10 个字符。但是，我的 TextBox 并没有反映这一点；它仍然显示 11 个字符的字符串。

最重要的是，如果在第 11 个字符上我将设置器中的文本更改为“错误”，并且触发属性发生了更改，则 TextBox 会更新以显示更改后的文本。

那么为什么如果我将 setter 中的文本更改回之前的值，UI 不会反映这一点呢？

我知道有处理最大字符的替代方法，但为什么这不起作用？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-31T20:40:39.027

这不过是框架中的一个错误。中的`Text`属性`TextBox`确实获得了您的新值，但 GUI 现在与它自己的`TextProperty`. `ItemsControl`当您想从 ViewModel 取消更改时，也会发生这种情况`SelectedItem`，这真的很烦人。

但是，当您使用显式时，不会发生此错误，`Binding`因此可以将其用作解决方法。

*Xaml*

```
<TextBox Text="{Binding Path=MyName,
                        UpdateSourceTrigger=Explicit}"
         TextChanged="TextBox_TextChanged"/> 
```

*背后的代码*

```
private void TextBox_TextChanged(object sender, TextChangedEventArgs e)
{
    TextBox textBox = sender as TextBox;
    textBox.GetBindingExpression(TextBox.TextProperty).UpdateSource();
} 
```

要验证 TextBox GUI 确实不同步，只需观察`TextBox.Text`. 例如，`TextBox`会说“123456789___0”，而`TextBlock`说“123456789”。

```
<StackPanel>
    <TextBox Name="myTextBox"
             Text="{Binding Path=MyName,
                            UpdateSourceTrigger=PropertyChanged}"/>
    <TextBlock Text="{Binding ElementName=myTextBox, Path=Text}"/>
</StackPanel> 
```

# asp.net - 以编程方式生成重写的 URL？

> ID：10837682
> 
> 赞同：0
> 
> 时间：2012-05-31T16:35:34.173
> 
> 标签：asp.net, iis, url-rewriting

在 ASP.NET 4.0 应用程序上使用 IIS 重写。是否有一些我可以从 ASP.NET 中调用的函数将字符串 URL 转换为重写的 URL？我希望能够在代码隐藏中做到这一点。

像这样的东西：`string ProduceRewrittenUrl(string publicUrl)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:41:36.130

是的，这是`HttpContext.Current.RewritePath(string)`

参考：http: [//msdn.microsoft.com/en-us/library/system.web.httpcontext.rewritepath.aspx](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.rewritepath.aspx)

一个全球性的地方叫它是`protected void Application_BeginRequest(Object sender, EventArgs e)`on `global.asax`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T16:40:34.317

如果您想在代码中执行此操作，请查看使用*Global.asax*`Application_BeginRequest()`的事件。

# c# - CodeDOM 是我进行语法检查的唯一选择吗？

> ID：10837686
> 
> 赞同：0
> 
> 时间：2012-05-31T16:36:02.670
> 
> 标签：c#, syntax-error

我实际上不需要运行甚至编译 C# 源代码，这是使用 CodeDOM 完成的。我只想要一个简单的语法检查器，它给定一个 C# 源代码，能够说 Hey this ";" 这一行缺少“（”），等等……你有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:43:21.757

您可以使用[ANTLR](http://www.antlr.org/)对 c# 和任何其他语言进行语法检查。

# asp.net-mvc - 如何在 Asp.net MVC Web Api 控制器中访问应用程序对象

> ID：10837690
> 
> 赞同：10
> 
> 时间：2012-05-31T16:36:25.000
> 
> 标签：asp.net-mvc, asp.net-web-api

我知道在 Asp.net MVC 控制器中，我们可以像这样访问应用程序：

```
HttpContext.Application["AppVar"] 
```

但是在Web api 控制器中，没有HttpContext，那么如何访问应用程序对象呢？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-31T16:41:33.687

http 上下文仍然存在，它是 ASP.Net 的核心组件。您如何访问它是手头的问题。

```
HttpContext.Current.Application["AppVar"]. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-17T09:31:53.573

```
object context;
if (Request.Properties.TryGetValue("MS_HttpContext", out context))
{
    var application= ((HttpContextBase)context).Application; 
} 
```

您可以从 Request.Propertiies 获取 HttpContext 对象

# django - 来自模型的初始表单数据 - Django

> ID：10837691
> 
> 赞同：2
> 
> 时间：2012-05-31T16:36:27.343
> 
> 标签：django

我正在尝试为我的模型创建一个编辑表单。我没有使用模型表单，因为根据模型类型，用户可以使用不同的表单。（例如，其中一个表单有一个 Tinymce 小部件，而另一个没有。）

有没有办法使用模型设置表单（不是 a `ModelForm`）的初始数据？

我尝试了以下但收到错误：

```
b = get_object_or_404(Business, user=request.user)
form = f(initial = b) 
```

`f`的子类在哪里`forms.Form`

我得到的错误是`AttributeError: 'Business' object has no attribute 'get'`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T16:57:57.587

初始数据需要是一个`dict`（或至少有一个类似`dict`的接口，Django 模型没有）。

`dict`您可以使用以下方法从您的模型中构造一个[`django.forms.models.model_to_dict`](https://github.com/django/django/blob/master/django/forms/models.py#L97)：

```
from django.forms.models import model_to_dict
b_as_dict = model_to_dict(b) 
```

这与 Django 的内置`ModelForm`类用于设置其初始数据的函数相同，虽然您已指定不想使用 a `ModelForm`，但找到某种允许您这样做的代码结构方式可能会更方便.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-04-22T02:50:53.267

有一种比 dict 更直接的使用模型数据的方法。[请参阅文档](https://docs.djangoproject.com/en/1.9/topics/forms/modelforms/)中的示例。

```
b = get_object_or_404(Business, user=request.user)
form = f(instance = b) 
```

# java - Google 收藏中 BiMap 的精髓

> ID：10837699
> 
> 赞同：2
> 
> 时间：2012-05-31T16:36:56.770
> 
> 标签：java, data-structures, guava

我仍然对 Google collections/Guava 中的BiMap[感到](https://code.google.com/p/guava-libraries/)[困惑](https://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained#BiMap)。据称这**两个 bimap 由相同的数据支持；****对其中一个的任何更改都会出现在另一个中。**

 **我浏览了源代码，发现在`ForwardingMap`. 但是在任何实际的子类中`StandardBiMap`，我确实看到数据被放入正向和反向映射中。那么本质是什么，为什么它声称通过只保留一份数据副本来节省空间？只是实际的对象是一组，但仍然需要对这些对象的两组不同的引用，一组在正向映射中维护，另一组在反向映射中？这里 BiMap 的本质是什么，而不是客户端只维护过于独立的地图并相应地进行更新的替代方法？

```
 private V putInBothMaps(K key, V value, boolean force) {
    boolean containedKey = containsKey(key);
    if (containedKey && Objects.equal(value, get(key))) {
      return value;
    }
    if (force) {
      inverse().remove(value);
    } else if (containsValue(value)) {
      throw new IllegalArgumentException(
          "value already present: " + value);
    }
    V oldValue = super.put(key, value);
    updateInverseMap(key, containedKey, oldValue, value);
    return oldValue;
  } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T16:48:15.820

您在哪里看到`BiMap`通过仅保留一份数据副本来节省空间的声明？`BiMap`只是提供一组条目的正向和反向视图，这些条目在数据更改时都保持一致。节省的地方是不必手动管理两个映射并确保两者都在您自己的代码中更新（加上错误检查，以防止重复值被添加到其中一个映射，导致状态不一致）......只需使用`BiMap`让一切为你处理。

这不是为了节省空间，而是为了让你的代码保持简单、可读和正确。**

# c++ - 无法从派生指针访问公共基成员

> ID：10837701
> 
> 赞同：4
> 
> 时间：2012-05-31T16:37:22.027
> 
> 标签：c++, inheritance, polymorphism

为什么这段代码无法编译？(GCC 4.7.0)

```
// Class with a simple getter/setter pair.
class Base {
public:
    Base () : m_Value(0) {  }

    virtual ~Base () {  }

    // Getter
    virtual int value () { return m_Value; }

    // Setter
    virtual void value (int Val) { m_Value = Val; }

private:
    int m_Value;
};

// Derived class overrides the setter.
class Derived : public Base {
public:
    void value (int Val) {
            // do some stuff here...
    }
};

int main()
{
    Derived * instance = new Derived();
    int x = instance->value();  // ERROR
    return 0;
} 
```

构建日志：

```
test.cpp: In function 'int main()':
test.cpp:29:25: error: no matching function for call to 'Derived::value()'
test.cpp:29:25: note: candidate is:
test.cpp:21:7: note: virtual void Derived::value(int)
test.cpp:21:7: note:   candidate expects 1 argument, 0 provided 
```

为什么编译器在使用 Derived* 时无法从 Base 中看到“int value()”？

改变

```
Derived * instance = new Derived(); 
```

到

```
Base * instance = new Derived(); 
```

有效（但在我的情况下我需要派生指针）。

还将基本 getter/setter 函数重命名为 getValue() 和 setValue(int) 有效。我可以对我的代码使用各种解决方法，但我只是好奇为什么这段代码无法编译。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-31T16:40:46.313

这就是语言的工作原理：当子类覆盖名称的成员时，它会隐藏父类中所有未覆盖的名称。这是为了防止意外组合应作为集合覆盖的基方法和父方法。

您可以放入`using Base::value;`您的子类以引入父方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T16:41:02.203

`value`派生类中的函数*隐藏*了基类中的函数。

您需要将基类函数带入派生类的范围，如下所示：

```
class Derived : public Base {
public:

    using Base::value;   //<---- note this

    void value (int Val) {
            // do some stuff here...
    }
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-19T15:52:37.513

除了给出的其他答案之外，除了添加`using Base::value`子类之外，您还可以执行以下操作，

`int x = instance->Base::value();`

您在哪里特别告诉编译器使用`Base`'s value 函数。尽管从技术上讲这是可行的，但它会产生一些间接性，如果您发现自己经常这样做，您可能需要重新考虑如何构建代码。

# java - 解决使用 SAX 解析器解析 xml 的安全问题

> ID：10837706
> 
> 赞同：6
> 
> 时间：2012-05-31T16:37:37.127
> 
> 标签：java, android, xml, security, saxparser

我有一个 android 应用程序，用户可以在其中输入任何 xml 源 URL 进行解析。然后我的应用程序解析 xml（如果有效）并显示结果。

问题是，**如果用户输入不受信任的 xml 源 url**，则应用程序和/或设备可能会受到影响。

**识别风险和防止漏洞利用**的最佳方法是什么？

通过我的研究，我发现启用 FEATURE_SECURE_PROCESSING 和禁用扩展可能会有所帮助。但是谁能告诉我它是什么，以及我如何实现它。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T18:01:39.270

经过研究，我发现了这一点。我希望这能解决我的问题。

启用 FEATURE_SECURE_PROCESSING

```
SAXParserFactory spf = SAXParserFactory.newInstance();
spf.setFeature(XMLConstants.FEATURE_SECURE_PROCESSING, true); 
```

禁用 DTD

```
spf.setFeature("http://apache.org/xml/features/disallow-doctype-decl", true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T13:17:23.257

*   对于**SAX**和**DOM**解析器，如 dcanh121 所述，禁止 DTD 就足够了。

    factory.setFeature("http://apache.org/xml/features/disallow-doctype-decl", true);

*   对于**StAX**解析器：

    factory.setProperty(XMLInputFactory.IS_REPLACING_ENTITY_REFERENCES, false);

# php - drupal 7中链接模块或pagepeeker格式化程序问题的url截断

> ID：10837707
> 
> 赞同：3
> 
> 时间：2012-05-31T16:37:47.590
> 
> 标签：php, drupal, module

我有可能涉及一些 php 帮助的 drupal 7 问题。我从谷歌警报创建了一个 rss 提要，我将其映射到字段中。我已经成功映射到除了链接模块字段之外的所有字段，我在其中放置了一个字段格式化程序，该字段格式化程序通过将适当的 url 服务器查询附加到提要 url 来创建一个 pagepeeker 屏幕截图。Feeds 通过获取项目 URL（链接）并将其正确放入字段来完成其工作。我在使用 pagepeeker 或链接模块时遇到问题，因为以下情况一直在发生。

回顾一下

Google 警报提要 -> 链接模块字段 -> pagepeeker 屏幕截图格式化程序

这是错误

谷歌警报提供的网址是

[http://www.google.com/url?sa=X&q=http://www.beautyjunkiesunite.com/WP/2012/05/30/whats-new-anastasia-beverly-hills-lash-genius/&ct= ga&cad=CAcQARgAIAEoATAAOABA3t-Y_gRIAlgBYgVlbi1VUw&cd=F7w9TwL-6ao&usg=AFQjCNG2rbJCENvRR2_k6pL9RntjP66Rvg](http://www.google.com/url?sa=X&q=http://www.beautyjunkiesunite.com/WP/2012/05/30/whats-new-anastasia-beverly-hills-lash-genius/&ct=ga&cad=CAcQARgAIAEoATAAOABA3t-Y_gRIAlgBYgVlbi1VUw&cd=F7w9TwL-6ao&usg=AFQjCNG2rbJCENvRR2_k6pL9RntjP66Rvg)

当显示链接时，我得到：

[http://pagepeeker.com/thumbs.php?size=m&url=www.google.com/url](http://pagepeeker.com/thumbs.php?size=m&url=www.google.com/url)

它在 url 处切割 url 而没有得到其余的 url。

这是 pagepeeker 用来解析 url 的代码？

```
<?php

function _pagepeeker_format_url($url, $domain_only = FALSE) {
if (filter_var($url, FILTER_VALIDATE_URL) === FALSE) {
return FALSE;
}

// try to parse the url
$parsed_url = parse_url($url);
if (!empty($parsed_url)) {
  $host = (!empty($parsed_url['host'])) ? $parsed_url['host'] : '';
  $port = (!empty($parsed_url['port'])) ? ':' . $parsed_url['port'] : '';
  $path = (!empty($parsed_url['path'])) ? $parsed_url['path'] : '';
  $query = (!empty($parsed_url['query'])) ? '?' . $parsed_url['query'] : '';
  $fragment = (!empty($parsed_url['fragment'])) ? '#' . $parsed_url['fragment'] : '';

if ($domain_only) {
  return $host . $port;
}
else {
  return $host . $port . $path . $query . $fragment;
}
}

return FALSE;
} 
```

这可能是问题吗？

请让我知道我可以以任何方式澄清。

我需要的是处理整个网址，而不仅仅是截断的网址

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T22:24:49.380

我在 SO 或 drupal SO 页面上看到了一个非常相似的问题，但找不到它，所以我在这里再次写下“我的方式”答案。

```
<?php

function _pagepeeker_format_url($url, $domain_only = FALSE) {
if (filter_var($url, FILTER_VALIDATE_URL) === FALSE) {
return FALSE;
}

//$url = 'http://www.google.com/url?sa=X&q=http://www.beautyjunkiesunite.com/WP/2012/05/30/whats-new-anastasia-beverly-hills-lash-genius/&ct=ga&cad=CAcQARgAIAEoATAAOABA3t-Y_gRIAlgBYgVlbi1VUw&cd=F7w9TwL-6ao&usg=AFQjCNG2rbJCENvRR2_k6pL9RntjP66Rvg';
// Now we use parse_url to split the url to an array with url parts.
$parsed_url = parse_url($url);
// $parsed_url['query'] is 'sa=X&q=http://www.beautyjunkiesunite.com/WP/2012/05/30/whats-new-anastasia-beverly-hills-lash-genius/&ct=ga&cad=CAcQARgAIAEoATAAOABA3t-Y_gRIAlgBYgVlbi1VUw&cd=F7w9TwL-6ao&usg=AFQjCNG2rbJCENvRR2_k6pL9RntjP66Rvg'
// ";" can also be used to separate params. But & is the usual one so using it.
$queryParts = explode('&', $parsed_url['query']);

    $params = array();
    foreach ($queryParts as $param) {
        $item = explode('=', $param);
        // sa = X, etc.
        $params[$item[0]] = $item[1];
    }
//$params is now an array with query parts.
// $params['sa'] = 'X' , q = 'http://www.beautyjunkiesunite.com/WP/2012/05/30/whats-new-anastasia-beverly-hills-lash-genius', etc.

if ($domain_only){
$new_url_parsts = parse_url($params['q']);
return $new_url_parts['host'];
}
else{
return $params['q'];
} 
```

# php - 如何使用 PHP 和 fsockopen 检查 UDP 地址是否存在？

> ID：10837708
> 
> 赞同：1
> 
> 时间：2012-05-31T16:37:49.603
> 
> 标签：php, sockets

我正在使用`fsockopen`从 UDP 地址获取信息，唯一的问题是某些 UDP 地址可能仍未处于活动状态。

我通过创建套接字

```
$fp = fsockopen($tracker, $port, $errno, $errstr, 1); 
```

如果地址有效，一切正常，但如果地址无效，则会生成此错误

```
Warning: fsockopen(): php_network_getaddresses: getaddrinfo failed: Name or service not known in 
```

我试过这样做，但它仍然会产生错误，

```
if(!$fp = fsockopen($tracker, $port, $errno, $errstr, 1)) {
     // ERROR
} else {
     // CONTINUE
} 
```

我可以错误地抑制它，一切都很好，但我不喜欢在我的代码中抑制错误。

如何确保任何给定的 UDP 地址在 php 中仍然处于活动状态？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:59:32.833

`@`您可以实现自己的错误处理程序，而不是抑制您可以做的错误。[设置错误处理程序](http://php.net/manual/en/function.set-error-handler.php)

```
<?php
//Simple Blank error handler
set_error_handler('my_error_handler');
function my_error_handler($errno, $errstr, $errfile, $errline) {}

function checkUDP($host,$port=80){
    //look no suppression
    $fp = fsockopen("udp://".$host, $port, $errno, $errstr,1.0);
    if (!$fp) {
        return false;
    } else {
        fclose($fp);
        return true;
    }
}

$good = 'tracker.publicbt.com';
$bad = 'trjjacker.publicbt.com';

if(checkUDP($good)){
    echo $good.' Good';
}else{
    echo $good.' Bad';
}
echo '<br />';
if(checkUDP($bad)){
    echo $bad.' Good';
}else{
    echo $bad.' Bad';
}

//tracker.publicbt.com Good
//trjjacker.publicbt.com Bad
?> 
```

# java - Commons Pooling：如何实例化一个具体的池？

> ID：10837713
> 
> 赞同：1
> 
> 时间：2012-05-31T16:38:14.060
> 
> 标签：java, apache, pooling, apache-commons-pool

我已将 commons-pooling-1.6.jar 添加到我的类路径中，并尝试实例化 a`StackObjectPool`并且每次都失败：

```
// Deprecated.
ObjectPool<T> oPool = new StackObjectPool<T>();

// Error: Cannot instantiate the type BasePoolableObjectFactory<T>.
PoolableObjectFactory<T> oFact = new BasePoolableObjectFactory<T>();
ObjectPool<T> oPool = new StackObjectPool<T>(oFact); 
```

这是一个完全弃用的 API 吗？如果是这样，Commons Pooling 的一些开源替代方案是什么？否则，我如何实例化 a `StackObjectPool`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T17:43:33.117

您需要编写自己的工厂，可能会扩展 BasePoolableObjectFactory。有关更多信息，请参见此处：http: [//commons.apache.org/pool/examples.html](http://commons.apache.org/pool/examples.html)

下面是一个创建 StringBuffers 的 PoolableObjectFactory 实现：

```
import org.apache.commons.pool.BasePoolableObjectFactory; 

public class StringBufferFactory extends BasePoolableObjectFactory<StringBuffer> { 
    // for makeObject we'll simply return a new buffer 
    public StringBuffer makeObject() { 
        return new StringBuffer(); 
    } 

    // when an object is returned to the pool,  
    // we'll clear it out 
    public void passivateObject(StringBuffer buf) { 
        buf.setLength(0); 
    } 

    // for all other methods, the no-op  
    // implementation in BasePoolableObjectFactory 
    // will suffice 
} 
```

然后按如下方式使用它：

```
new StackObjectPool<StringBuffer>(new StringBufferFactory()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T18:02:34.683

大多数库的输入都集中在**对象工厂**上。这告诉池在需要时如何创建新对象。例如，对于一个连接池，所有这些都连接到具有*相同配置*的同一个数据库，例如*user*、*password*、*url*、*driver*。

需要创建一个具体的工厂扩展[`BasePoolableObjectFactory`](http://commons.apache.org/pool/api-1.6/org/apache/commons/pool/BasePoolableObjectFactory.html)类并编写方法[`makeObject`](http://commons.apache.org/pool/api-1.6/org/apache/commons/pool/PoolableObjectFactory.html#makeObject%28%29)，如下例所示。

```
static class MyObject {
    private String config;

    public MyObject(String config) {
        this.config = config;
    }
}

static class MyFactory extends BasePoolableObjectFactory<MyObject> {

    public String config;

    public MyFactory(String config) {
        this.config = config;
    }

    @Override
    public MyObject makeObject() throws Exception {
        return new MyObject(config);
    }
}

public static void main(String[] args) {
    MyFactory factory = new MyFactory("config parameters");
    StackObjectPool<MyObject> pool = new StackObjectPool<>(factory);
} 
```

Swaranga Sarma 编写了一个非常有趣的例子。[*在Java HotSpot：通用和并发对象池中*](http://javawithswaranga.blogspot.mx/2011/10/generic-and-concurrent-object-pool.html)查看它[](http://javawithswaranga.blogspot.mx/2011/10/generic-and-concurrent-object-pool.html)

# macos - 应用脚本 *.type

> ID：10837717
> 
> 赞同：0
> 
> 时间：2012-05-31T16:38:24.890
> 
> 标签：macos, applescript

我知道我在这里是个白痴……我哪里错了？使用 sudo rm -f 有必要吗？为什么 *.cr2 不起作用？

```
 tell application "System Events"
   try
    do shell script "rm /Users/splashretouch8/Pictures/SplashNW/Capture/*.cr2"
   end try
  end tell 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T17:21:34.273

这是另一种方法：

```
set theFolder to alias ("/Users/splashretouch8/Pictures/SplashNW/Capture/" as POSIX file)
tell application "Finder" to delete (every file of theFolder whose name contains ".cr2") 
```

或者

```
do shell script "cd '/Users/splashretouch8/Pictures/SplashNW/Capture/' ; rm *.cr2" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T16:49:36.737

`\`在星号前面放一个“ ”字符（例如“ `\*.cr2`”），看看它是否更适合您。

我自己，我认为在 Applescript 中使用“rm”是很危险的。将要删除的文件移动到废纸篓可能更聪明。

# php - CRUD Restler 从表单发布

> ID：10837719
> 
> 赞同：1
> 
> 时间：2012-05-31T16:38:33.527
> 
> 标签：php, html, forms, api, restler

*****已修复***** 原来我的浏览器被缓存了！它一直在工作。我对代码所做的唯一更新是在发布评论后更新结果，这样我就可以在 json 响应中取回信息。**

 **```
return $result->comment = array('video_id'=>"$video_id",'fb_id'=>"$fb_id",'comment'=>"$comment"); 
```

我无法将表单中的值发布到 restler。我不确定我做错了什么。

当我尝试发布我的表格时，我得到了回报：

```
    {
      “错误”： {
        “代码”：404，
        “未找到信息”
      }
    }

```

**这是我的表单代码（comment.html）：**

```
<form action="http://mysite.com/api/index.php/comment" method="post">
    <label>fb_id</label>
    <input type="text" name="fb_id">

    <label>video_id</label>
    <input type="text" name="video_id">

    <label>comment</label>
    <input type="text" name="comment">

    <input type="submit" value="Post" name="submit">
</form> 
```

**这是我的课程的代码（comment.php）：**

```
    类评论{
        静态 $FIELDS = array('video_id', 'fb_id','comment');
        公共 $restler;

        公共函数插入（$rec）{
            $video_id = mysql_escape_string($rec['video_id']);
            $fb_id= mysql_escape_string($rec['fb_id']);
            $comment = mysql_escape_string($rec['comment']);
            $sql = "插入评论(video_id,fb_id,comment) VALUES('$video_id','$fb_id','$comment')";
            mysql_query($sql);
            返回“插入记录”；
        }

        公共功能发布（$request_data=NULL）{
            返回 $this->insert($this->_validate($request_data));
        }

        私有函数 _validate($data){
              $comment=数组（）；
              foreach (注释::$FIELDS as $field) {
                  if(!isset($data[$field]))throw new RestException(417,"$field field missing");
                  $comment[$field]=$data[$field];
              }
              返回$评论；
          }

    }

```

如果有人可以帮忙，我所有的其他 API 调用都适用于 GET。这是我遇到问题的POST。**

# java - 尝试通过 HTTPS 将 POST` 发布到 .NET` 应用程序时出现问题

> ID：10837723
> 
> 赞同：0
> 
> 时间：2012-05-31T16:38:56.813
> 
> 标签：java, .net, web-services, post

我在尝试`POST`通过. 我从服务器得到以下响应。`.NET``HTTPS`

```
Error while dispatching hrxml [ Server was unable to process request. --> Procedure or function 'sp__LogMessage' expects parameter '@pi_ClientID', which was not supplied.   at System.Web.Services.Protocols.SoapHttpClientProtocol.ReadResponse(SoapClientMessage message, WebResponse response, Stream responseStream, Boolean asyncCall)
       at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters)
       at DispatchService.HRISMessageRouter.MessageRouter.Route(String HRXML)
       at DispatchService.DispatchMessage.Dispatch(String HRXML)] 
```

我的 Java 代码；

```
String requestURL = "https://test.com";
        Map<String, String> params = new HashMap<String, String>();
        requestURL = "https://test.com/example.asp";
        params.put("name", "xxx");
        params.put("age", "88");    
        InputStream  input = HTTPUtil.sendPostRequest(requestURL, params);
        String[] r = HTTPUtil.parseMultipleLinesRespone(input);
        for (String line : r) {
            System.out.println(line);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:44:06.743

服务器应用程序调用存储过程时出现问题。您知道服务器应用程序有效吗？它看起来不像您可以通过更改客户来解决的任何问题。

# jquery - 如何隐藏手风琴菜单中的标题链接上方？

> ID：10837727
> 
> 赞同：0
> 
> 时间：2012-05-31T16:39:18.000
> 
> 标签：jquery

我现在正在做一个手风琴，它工作正常，但是当我单击 Title2 或 Title1 时，如果我下一步单击 Title3，只想为此提供标题链接，所以没有任何子链接，这就是我想向上滑动上述标题的原因。

小提琴 [http://jsfiddle.net/cX68E/1/](http://jsfiddle.net/cX68E/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:47:18.090

```
$('#accordion> div').hide();
$('#accordion > h3').click(function() {
    if($(this).next('div').length) {
        $(this)
            .next('div')
            .slideToggle('fast')
            .siblings('div:visible')
            .slideUp('fast');
    } else {
         $(this)
            .siblings('div:visible')
            .slideUp('fast');
    }
}); 
```

**[演示](http://jsfiddle.net/thecodeparadox/cX68E/4/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T16:45:05.250

您的代码不起作用，因为`.next()`单击时返回空`title3`。所以让我们尝试做`slideUp`然后`end`然后`slideToggle`。见下文，

```
$('#accordion> h3').click(function() {
  $(this)      
      .siblings('div:visible')
      .slideUp('fast')
      .end()
      .next('div')
      .slideToggle('fast');
}); 
```

**演示：http:** [//jsfiddle.net/cX68E/3/](http://jsfiddle.net/cX68E/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T16:47:20.980

它没有找到下一个 div。由于那里没有元素，因此也没有兄弟姐妹。

所以没有什么可滑动的。

您可以在末尾添加一个 div 或先向上滑动。

```
<h3>Title 3</h3>
    <div></div> 
```

见这里：http: [//jsfiddle.net/a2qvU/](http://jsfiddle.net/a2qvU/)

# ravendb - 如何从 RavenDB 查询特定集合？

> ID：10837730
> 
> 赞同：1
> 
> 时间：2012-05-31T16:39:23.640
> 
> 标签：ravendb

在一个数据库中，我存储了两个单独的文档 - CumulativeSprintData 和 Features。我正在尝试从 javascript 查询。现在我只是使用默认值：

```
http://servername:8080/databases/sprintprogress/indexes/dynamic? 
```

问题是这个默认查询会提取两种类型的文档。如何指定要下拉的文档类型？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:32:53.237

您可以使用：

```
http://servername:8080/databases/sprintprogress/indexes/dynamic/Features

http://servername:8080/databases/sprintprogress/indexes/dynamic/CumulativeSprintDatas 
```

# php - Trouble Adding New Item to Array

> ID：10837731
> 
> 赞同：1
> 
> 时间：2012-05-31T16:39:31.187
> 
> 标签：php, modx

I have an array that I need to add some key/value pairs too but I'm having trouble with it. Here's an example of my array:

```
Array
(
    [0] => Array
        (
            [id] => 108
            [pagetitle] => Title
            [description] => 
            [parent] => 35
            [alias] => url-alias
            [menutitle] => 
        )
) 
```

I'm trying to insert a new key called "country" along with it's value but I can't figure out what I'm doing wrong.

```
 foreach($all_items as $item) {

    $country = $modx->getTemplateVarOutput(array("country"), $item['id'], $published=1);
    $item['country'] = $country['country'];
} 
```

I've verified that `$country['country']` does contain what I need it to...I just can't seem to add it to the array.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-31T16:44:05.633

You need to pass array element by reference if you want to modify it.

```
foreach($all_items as &$item) {
    ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T16:44:59.277

That is because the `$item` array is actually only a copy of the the element within `$all_items`.

To achieve what you want you could do it like this:

```
foreach($all_items as &$item) {
   $country = $modx->getTemplateVarOutput(array("country"), $item['id'], $published=1);
   $item['country'] = $country['country'];
} 
```

Also see docs for [foreach](http://de3.php.net/manual/en/control-structures.foreach.php) there you'll find exactly that.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T16:44:50.423

This should do what you are asking:

```
foreach($all_items as $k=>$v) {
    $country = $modx->getTemplateVarOutput(array("country"), $all_items[$k]['id'], $published=1);
    $all_items[$k]['country'] = $country['country'];
} 
```

# c# - 使用链接表时使用 LINQ 连接和分组多个表

> ID：10837733
> 
> 赞同：2
> 
> 时间：2012-05-31T16:39:34.637
> 
> 标签：c#, linq, linq-to-entities

我正在寻找一些关于如何在使用多个表的连接时最好地获取第一条记录的建议，如下所示。

我有三张桌子：

*   Leads < - 这在结果中应该是唯一的
*   LeadAddresses（连接表）
*   地址

通常我会像这样加入他们：

```
from t2
    in db.Leads
    .Where(o => t1.LeadId == o.Lead_ID)
from t4
    in db.LeadAddresses
    .Where(o => t2.Lead_ID == o.Lead_ID)
    .DefaultIfEmpty()
from t5
    in db.Addresses
    .Where(o => t4.Address_ID == o.Address_ID)
    .DefaultIfEmpty() 
```

（如果这是不好的做法，请告诉我；）

我希望从**Addresses表中获取每个****潜在**客户记录和项目到模型的属性（例如，具有最大 ID 的那个） ：

```
select new LeadGridModel
        {
            ...
        }); 
```

例子：

```
Lead Company | City    | ZIP
==============================
Company 1    | Boston  | 00000
Company 2    | Houston | 00001 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T16:51:56.777

```
from l in db.Leads
from a in l.LeadAddresses.Select(la => la.Address).OrderByDescending(a => a.ID).Take(1).DefaultIfEmpty()
select new { l, a } 
```

这可能看起来很棘手，但是您会逐步理解它：

1.  `OrderByDescending`结合使用我们`Take(1)`取最大ID的地址
2.  使用 DefaultIfEmpty 我们创建了一个左连接。

请注意，由于 SQL Server 的限制，此模式会强制执行循环连接。对于小的结果集，这通常不是问题。

# wpf - 将 TextBox 中的 ValidationRule 绑定到 StatusBarItem 并显示错误消息

> ID：10837734
> 
> 赞同：0
> 
> 时间：2012-05-31T16:39:35.447
> 
> 标签：wpf, validation, xaml, binding

我正在创建一个我想使用验证规则的应用程序，但是在某些屏幕上没有足够的空间来显示错误字段旁边的结果错误，所以我想把它放在底部的状态栏中场地。

这个示例来自我从网络上拼凑的几个位，它提供了一个使用不同规则进行验证并以不同方式显示错误的表单，但我看不到如何使用 XAML 将错误消息放入 StatusBarItem。我确信有一种简单的方法可以做到这一点。任何人都可以帮助我吗？

该示例是在 VS2010 中使用 Framework 4.0 编写的。

主窗口.xaml

```
<Window x:Class="SampleValidation.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:c="clr-namespace:SWL.Libraries.SysText"
        Title="Sample ValidationRule WPF" Height="350" Width="525"
        Loaded="Window_Loaded" WindowStartupLocation="CenterScreen">
  <Window.Resources>
    <ControlTemplate x:Key="validationTemplate">
      <!--
      <TextBlock Foreground="Red" FontSize="20">***</TextBlock>
      -->
      <DockPanel LastChildFill="True">
        <TextBlock DockPanel.Dock="Right" Foreground="Red" Margin="5" FontSize="8pt" Text="***" />
        <AdornedElementPlaceholder />
      </DockPanel>
    </ControlTemplate>
    <Style x:Key="textBoxInError1" TargetType="{x:Type TextBox}">
      <Style.Triggers>
        <Trigger Property="Validation.HasError" Value="true">
          <Setter Property="ToolTip"
                  Value="{Binding RelativeSource={x:Static RelativeSource.Self},
                  Path=(Validation.Errors)[0].ErrorContent}" />
        </Trigger>
      </Style.Triggers>
    </Style>
    <Style x:Key="textBoxInError2"  TargetType="{x:Type TextBox}">
      <Setter Property="Validation.ErrorTemplate">
        <Setter.Value>
          <ControlTemplate>
            <DockPanel LastChildFill="True">
              <TextBlock DockPanel.Dock="Right" Foreground="Red" Margin="5" FontSize="8pt"
                         Text="{Binding ElementName=MyAdorner, Path=AdornedElement.(Validation.Errors)[0].ErrorContent}" />
              <Border BorderBrush="Red" BorderThickness="2">
                <AdornedElementPlaceholder Name="MyAdorner" />
              </Border>
            </DockPanel>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
      <Style.Triggers>
        <Trigger Property="Validation.HasError" Value="true">
          <Setter Property="ToolTip"
                  Value="{Binding RelativeSource={RelativeSource Self},
                  Path=(Validation.Errors)[0].ErrorContent}" />
        </Trigger>
      </Style.Triggers>
    </Style>
  </Window.Resources>
  <Grid>
    <TextBlock Height="24" HorizontalAlignment="Left" Margin="36,73,0,0" Name="textBlock1"
               Text="Node Address:" VerticalAlignment="Top" Width="87" />
    <TextBlock Height="24" HorizontalAlignment="Left" Margin="36,112,0,0" Name="textBlock2"
               Text="Node Name:" VerticalAlignment="Top" Width="78" />
    <TextBox Height="24" HorizontalAlignment="Left" Margin="129,70,0,0" Name="textBox1"
             VerticalAlignment="Top" Width="119" TextChanged="textBox1_TextChanged"
             TabIndex="0" Style="{StaticResource textBoxInError2}"
             Validation.ErrorTemplate="{StaticResource validationTemplate}">
      <Binding Path="NodeAddress" UpdateSourceTrigger="PropertyChanged">
        <Binding.ValidationRules>
          <c:NumberRangeRule Min="1" Max="100" />
        </Binding.ValidationRules>
      </Binding>
    </TextBox>
    <TextBox Height="24" HorizontalAlignment="Left" Margin="129,109,0,0" Name="textBox2"
             VerticalAlignment="Top" Width="119" TextChanged="textBox2_TextChanged"
             TabIndex="1" Style="{StaticResource textBoxInError2}">
      <Binding Path="NodeName" UpdateSourceTrigger="PropertyChanged">
        <Binding.ValidationRules>
          <c:NameFormatRule MinLength="6" MaxLength="9" />
        </Binding.ValidationRules>
      </Binding>
    </TextBox>
    <StatusBar Height="23" HorizontalAlignment="Stretch" Margin="0,0,0,0"
               Name="myStatusBar" VerticalAlignment="Bottom">
      <StatusBarItem x:Name="errorStatusBarItem" Content="No errors" />
    </StatusBar>
    <Button Content="Close" Height="29" HorizontalAlignment="Left" Margin="108,227,0,0"
            Name="btnCLOSE" VerticalAlignment="Top" Width="85" Click="btnCLOSE_Click" TabIndex="3" />
    <Button Content="Apply" Height="29" HorizontalAlignment="Left" Margin="297,227,0,0"
            Name="btnAPPLY" VerticalAlignment="Top" Width="85" Click="btnAPPLY_Click" TabIndex="2" />
  </Grid>
</Window> 
```

主窗口.cs

```
using System;
using System.Collections.Generic;  
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace SampleValidation {
  /// <summary>
  /// Interaction logic for MainWindow.xaml
  /// </summary>
  public partial class MainWindow : Window {
    public int NodeAddress { get; set; }
    public string NodeName { get; set; }
    public bool IsAllLoaded { get; set; }

    public MainWindow() {
      NodeAddress = 1;
      NodeName = "freddy";
      IsAllLoaded = false;
      InitializeComponent();
      btnAPPLY.Visibility = System.Windows.Visibility.Hidden;
      DataContext = this;
    }

    private void btnAPPLY_Click(object sender, RoutedEventArgs e) {
      // if there are no format errors reported by the validation rules
      Validator.ErrorText = "";
      if (Validator.IsValid(this))
        // Save the data
        btnAPPLY.Visibility = System.Windows.Visibility.Hidden; // hide the button indicating nothing new to save
      else
        MessageBox.Show("Cant Save Changes - Error in form\r\n" + Validator.ErrorText, "Save not allowed", MessageBoxButton.OK, MessageBoxImage.Error);
    }

    private void btnCLOSE_Click(object sender, RoutedEventArgs e) {
      if (btnAPPLY.Visibility != System.Windows.Visibility.Hidden) {
        MessageBoxResult myAnswer = MessageBox.Show("Save Changes?", "Confirmation", MessageBoxButton.YesNoCancel);

        if (myAnswer == MessageBoxResult.Cancel)
          return;
        if (myAnswer == MessageBoxResult.Yes)
          btnAPPLY_Click(sender, e);
      }
      this.Close();
    }

    private void Window_Loaded(object sender, RoutedEventArgs e) {
      IsAllLoaded = true;
    }

    private void ShowModified() {
      if (IsAllLoaded)
          btnAPPLY.Visibility = System.Windows.Visibility.Visible;
    } // ShowModified

    private void textBox2_TextChanged(object sender, TextChangedEventArgs e) {
      ShowModified();
    }

    private void textBox1_TextChanged(object sender, TextChangedEventArgs e) {
      ShowModified();
    }
  } // class MainWindow

  public static class Validator {
    public static string ErrorText { get; set; }

    static Validator() {
      ErrorText = "";
    }

    public static bool IsValid(DependencyObject parent) {
      // Validate all the bindings on the parent
      bool valid = true;
      LocalValueEnumerator localValues = parent.GetLocalValueEnumerator();

      while (localValues.MoveNext()) {
        LocalValueEntry entry = localValues.Current;

        if (BindingOperations.IsDataBound(parent, entry.Property)) {
          Binding binding = BindingOperations.GetBinding(parent, entry.Property);

          if (binding.ValidationRules.Count > 0) {
            BindingExpression expression = BindingOperations.GetBindingExpression(parent, entry.Property);
            expression.UpdateSource();

            if (expression.HasError) {
              ErrorText = expression.ValidationError.ErrorContent.ToString();
              valid = false;
            }
          }
        }
      }

      // Validate all the bindings on the children
      System.Collections.IEnumerable children = LogicalTreeHelper.GetChildren(parent);

      foreach (object obj in children) {
        if (obj is DependencyObject) {
          DependencyObject child = (DependencyObject)obj;

          if (!IsValid(child)) {
            valid = false;
          }
        }
      }
      return valid;
    }
  } // class Validator 
```

验证规则.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Globalization;
using System.Windows.Controls;

namespace SWL.Libraries.SysText {
  public class NumberRangeRule : ValidationRule {
    private int _min;
    private int _max;

    public NumberRangeRule() { }

    public int Min {
      get { return _min; }
      set { _min = value; }
    }

    public int Max {
      get { return _max; }
      set { _max = value; }
    }

    public override ValidationResult Validate(object value, CultureInfo cultureInfo) {
      int val = 0;

      try {
        if (((string)value).Length > 0)
          val = Int32.Parse((String)value);
      } catch (Exception e) {
        return new ValidationResult(false, "Illegal Characters or " + e.Message);
      }

      if ((val < Min) || (val > Max)) {
        return new ValidationResult(false, "Please Enter Number in Range: " + Min + " - " + Max + ".");
      } else {
        return new ValidationResult(true, null);
      }
    }
  }

  public class NameFormatRule : ValidationRule {
    private int _minLength;
    private int _maxLength;

    public NameFormatRule() { }

    public int MinLength {
      get { return _minLength; }
      set { _minLength = value; }
    }

    public int MaxLength 
      get { return _maxLength; }
      set { _maxLength = value; }
    }

    public override ValidationResult Validate(object value, CultureInfo cultureInfo) {
      try {
        if (((string)value).Length > 0) {
          if (((string)value).Length < MinLength || ((string)value).Length > MaxLength)
            return new ValidationResult(false, String.Format ("Enter a string of {0} to {1} characters in length", MinLength, MaxLength));
          return new ValidationResult(true, null);
        }
        return new ValidationResult(true, null);
      } catch (Exception e) {
        return new ValidationResult(false, "Illegal Characters or " + e.Message);
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:57:28.083

**更新** 我最近不得不处理当鼠标悬停在错误图标上时显示的多个错误消息。我让我的视图模型实现了 IDataErrorInfo。然后我在我的视图模型中创建了一个类级别的字典，由每个控件的唯一标识符（我只是使用了一个枚举）作为键，以保存每个控件的一个错误。然后我创建了一个字符串类型的公共属性并将其命名为ErrorText。ErrorText 的 getter 迭代错误字典并将所有错误构建到一个字符串中。

这是一个例子，它可能需要调整。我知道这是非常简化的，但应该让你朝着一个方向前进。对于复杂的验证，您仍然可以使用您创建的 ValidationRule 对象进行验证，然后只需检查返回的 ValidationResult 对象的 IsValid 属性。

```
// NOTE:  The enum member name matches the name of the property bound to each textbox
public enum ControlIDs
{
    TextBox1Value = 0,
    TextBox2Value
}

public class MyViewModel : IDataErrorInfo
{
    private readonly Dictionary<ControlIDs, string> errors;

    public string ErrorText
    {
        get
        {
            if (errors.ContainsKey(ControlIDs.TextBox1) && errors.ContainsKey(ControlIDs.TextBox2))
            {
                return "Errors: " + errors[ControlsIDs.TextBox1] + ", " + errors[ControlsIDs.TextBox2];
            }

            if (errors.ContainsKey(ControlIDs.TextBox1))
            {
                return "Error: " + errors[ControlsIDs.TextBox1];
            }

            if (errors.ContainsKey(ControlIDs.TextBox2))
            {
                return "Error: " + errors[ControlsIDs.TextBox2];
            }
        }
    }

    public MyViewModel()
    {
        errors = new Dictionary<ControlIDs, string>();
    }

    private void UpdateErrorCollection(ControlIDs fieldKey, string error)
    {
        if (errors.ContainsKey(fieldKey))
        {
            errors[fieldKey] = error;
        }
        else
        {
            errors.Add(fieldKey, error);
        }

        OnPropertyChanged("ErrorText");
    }

    #region IDataErrorInfo

    public string Error
    {
        get { throw new NotImplementedException(); }
    }

    public string this[string columnName]
    {
        string error = string.Empty;
        if (columnName == ControlIDs.TextBox1Value.ToString())
        {
            if (string.IsNullOrWhiteSpace(TextBox1Value))
            {
                error = "TextBox1 must contain a value";
                UpdateErrorCollection(ControlIDs.TextBox1Value, error);
            }
            else
            {
                errors.Remove(ControlIDs.TextBox1Value);
            }
        }
        else if (columnName == ControlIDs.TextBox2Value))
        {
            if (string.IsNullOrWhiteSpace(TextBox2Value))
            {
                error = "TextBox2 must contain a value";
                UpdateErrorCollection(ControlIDs.TextBox2Value, error);
            }
            else
            {
                errors.Remove(ControlIDs.TextBox2Value);
            }
        }

        // returning null indicates success
        return !string.IsNullOrWhiteSpace(error) ? error : null;
    }

    #endregion
} 
```

现在只需将您的 StatusBarItem TextBlock 绑定到 ErrorText 属性。

# ruby-on-rails-3 - 使用 MS SQL 2012 运行的 Rails tinyTDS

> ID：10837736
> 
> 赞同：1
> 
> 时间：2012-05-31T16:39:44.837
> 
> 标签：ruby-on-rails-3, sql-server-2012, tiny-tds

我正在使用新的 MS SQL 2012 服务器测试 rails 应用程序。将其安装在新的 Win 2008 R2 测试系统上。安装了 Rails 3.1、Ruby 1.9.1 以及连接 MS SQL 服务器所需的所有东西。

当您配置与新 SQL 2012 的连接时，您无法连接，因为 tinyTDS 驱动程序返回不受支持的平台。

定义在这里：

```
.\ruby\lib\ruby\gems\1.9.1\gems\activerecord-sqlserver-adapter-3.0.16\lib\active_record\connection_adapters\sqlserver_adapter.rb:

Line 169:    SUPPORTED_VERSIONS          = [2005,2008,2010,2011].freeze 
```

所以首先我想知道为什么里面有2010年和2011年的记录。据我所知，这些sql版本不存在:)。

所以我将行更改为：

```
Line 169:    SUPPORTED_VERSIONS          = [2005,2008,2012].freeze 
```

然后我启动了一个 Rails 控制台，它起作用了。到目前为止，我运行了一些数据库迁移，一切看起来都很好。

**那么有人知道运行这个设置有什么问题吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:27:12.100

这已在最新版本的适配器中得到修复。

# iis - gzip压缩后如何检查脚本文件大小

> ID：10837742
> 
> 赞同：1
> 
> 时间：2012-05-31T16:40:29.347
> 
> 标签：iis, gzip

使用 iis，我们如何检查 gzip 压缩后的脚本文件（例如 jQuery 库）的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T17:13:11.327

OSX 或 Linux 命令行：

```
gzip app.js && du -h app.js.gz 
```

# c# - 实例化没有语言语法的新数组 []

> ID：10837744
> 
> 赞同：4
> 
> 时间：2012-05-31T16:40:32.467
> 
> 标签：c#, .net, arrays

在 C# 中，可以使用特殊的方括号语法实例化一个数组`new int[3]`。这与您通过调用构造函数实例化的其他类型不同`new List<int>()`。你能用普通的语法来创建一个数组吗？

我试过`new System.Array<int>(3)`但它爆炸了

> 非泛型类型“System.Array”不能与类型参数一起使用

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T16:45:07.560

`System.Array`本身是抽象的，因此您将无法使用其构造函数对其进行实例化。正如您的错误所证明的那样，它实际上也不是通用的；它只能通过[在运行时实现泛型集合接口](http://msdn.microsoft.com/en-us/library/system.array.aspx)来获取其类型（另请参见此[相关答案](https://stackoverflow.com/a/4482567/106224)）：

> ### 重要的
> 
> 在 .NET Framework 2.0 版中，Array 类实现`System.Collections.Generic.IList<T>`、`System.Collections.Generic.ICollection<T>`和`System.Collections.Generic.IEnumerable<T>`泛型接口。这些实现在运行时提供给数组，因此对文档构建工具不可见。

由于上述原因，`System.Array`该类提供了一个方便的方法[`CreateInstance()`](http://msdn.microsoft.com/en-us/library/zb3cfh7k.aspx)，您可以使用它来代替：

```
var array = Array.CreateInstance(typeof(int), 3); 
```

> ### 评论
> 
> 与大多数类不同，`Array`它提供了`CreateInstance`方法，而不是公共构造函数，以允许后期绑定访问。

但是，在使用此方法时要*非常*小心，因为结果*在编译时不会*`array`是强类型的！如果你希望它是强类型的，你*必须*在创建它之后强制转换它（不，仅仅声明是不够的）：**`int[] array`**

 **```
var array = (int[]) Array.CreateInstance(typeof(int), 3); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T17:07:42.543

没有创建数组的“普通”构造函数语法。您唯一的选择是数组构造函数语法`new type[length]`和类的各种静态`CreateInstance`方法`Array`。请注意，后者是使用返回类型定义的`Array`，需要先将其转换为实际的数组类型。

顺便说一句：`Array.CreateInstance`还允许您创建基于非零的数组，否则 C# 无法使用这些数组。但请记住，几乎没有人希望数组和其他 IList 实现具有除零以外的下限。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-10-08T21:01:16.257

如果要在实例化数组时分配值，也可以在 c# 中使用以下内容。

预定义的IntArrayVariable = new int[]{x,y,z};**

# android - 如何在android中制作可扩展的面板布局？

> ID：10837746
> 
> 赞同：10
> 
> 时间：2012-05-31T16:40:34.603
> 
> 标签：android, android-layout

我在 android 中有非常复杂的布局要做吗？

我需要两个面板，如果一个扩展另一个扩展，否则，我想做一个像滑动抽屉这样的行为，但因为我只能看到按钮，没有别的，我遇到了很大的麻烦。

![在此处输入图像描述](../Images/5fbde98329f5a97dba48266a83060bdc.png)

这是我需要的示例，请帮助，我已经花了 3 天时间，还没有找到答案。

这是我的代码`

```
 <RelativeLayout android:id="@+id/imagesContent" android:orientation="vertical" android:layout_alignBottom="@+id/lhsLogo"
                    android:layout_width="wrap_content" android:layout_height="wrap_content">
        <ImageView android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_marginLeft="3dp"
                   android:src="@drawable/orange_price_tag" android:layout_toLeftOf="@+id/lhsLogo" android:layout_alignBottom="@+id/lhsLogo" />
        <LinearLayout android:layout_centerHorizontal="true" android:orientation="vertical" android:layout_width="wrap_content"
                      android:layout_height="wrap_content">
            <TextView android:layout_width="fill_parent" android:layout_height="0dp" android:text="50%" android:singleLine="false"
                      android:textColor="#ffffff" android:textSize="17dp" android:id="@+id/discountTypeNumbers" android:layout_weight="1" />
            <TextView android:layout_width="fill_parent" android:layout_height="fill_parent" android:text="הנחה" android:singleLine="false"
                      android:textColor="#ffffff" android:textSize="14dp" android:id="@+id/discountTypeText" />
        </LinearLayout>
    </RelativeLayout>

    <TextView android:id="@+id/detailsTextContent"
              android:layout_below="@+id/imagesContent"
              android:layout_width="fill_parent"
              android:layout_height="200dp"
              android:textSize="11dp"
              android:layout_marginLeft="10dp"
              android:layout_marginRight="10dp"
              android:scrollbars = "vertical"
              android:layout_marginTop="10dp"
              android:text="some textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome textsome
                            textsome textsome textsome textsome textsome"
              android:singleLine="false" />

    <RelativeLayout android:id="@+id/frame"
                    android:background="#ffffff"
                 android:layout_width="fill_parent"
                 android:layout_height="wrap_content"
                 android:layout_alignParentBottom="true">
        <!--... stuff you want to cover at full-size ...-->
        <LinearLayout
                android:id="@+id/special_details_buttons"
                android:layout_marginTop="5dp"
                android:layout_marginLeft="5dp"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content">

            <ImageView android:id="@+id/specialTerms"
                       android:layout_width="wrap_content"
                       android:layout_height="fill_parent"
                       android:layout_marginLeft="2dp"
                       android:src="@drawable/special_terms"  />

            <ImageView android:layout_width="wrap_content"
                       android:layout_height="fill_parent"
                       android:layout_marginLeft="5dp"
                       android:src="@drawable/special_details" />

            <CheckBox android:id="@+id/setFavorite" style="@style/favorites_button" android:button="@drawable/favorites_button"/>

            <ImageView android:id="@+id/acceptTerms"
                       android:src="@drawable/accept_special"
                       android:layout_width="wrap_content"
                       android:layout_height="fill_parent"
                       android:layout_marginLeft="48dp"
                    />
        </LinearLayout>

        <RelativeLayout
                android:layout_below="@+id/special_details_buttons"
                android:layout_width="fill_parent"
                      android:layout_height="wrap_content"
                      android:layout_gravity="bottom"
                      android:orientation="vertical">

            <il.co.package.widgets.WrappingSlidingDrawer
                    android:id="@+id/drawer"
                    android:layout_width="fill_parent"
                    android:layout_height="200dp"
                    android:content="@+id/content"
                    android:handle="@+id/handle">

                <RelativeLayout
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:id="@+id/handle">

                    <ImageView android:id="@+id/slide_handle"
                               android:src="@drawable/expand_open"
                               android:layout_width="170dp"
                               android:layout_height="21dp"
                               android:layout_alignParentRight="true" />
                </RelativeLayout>

                <LinearLayout
                        android:gravity="center"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:background="#ffffff"
                        android:id="@+id/content">
                </LinearLayout>

            </il.co.package.widgets.WrappingSlidingDrawer>
        </RelativeLayout>
    </RelativeLayout>
</RelativeLayout> 
```

`

# objective-c - IOS celForRowAtIndexPath 循环逻辑？

> ID：10837749
> 
> 赞同：0
> 
> 时间：2012-05-31T16:40:49.973
> 
> 标签：objective-c, ios, if-statement, for-loop

我想我需要更好地了解这种方法的迭代如何以及何时起作用。下面的代码在我的 cellForRowAtIndexPath 方法中，它工作正常。它的目的是检查 inList （数组），如果它发现了什么索引值，则将 uiTableView 单元格的文本变灰；但是，当我从 tableView 编辑和删除一个单元格（位于两个 viewControllers 之外）时，即使索引整数不再在值数组中变灰，代码也不会从灰色更新为黑色.....不每次我加载此页面时都会调用此方法，或者我的循环逻辑是否存在缺陷？非常感谢。

```
if ([inList count] > 0) {

       if([[[inList objectAtIndex:0] objectForKey:@"myIndex"] count] > 0) {

           NSArray *myIndexList = [[inList objectAtIndex:0] objectForKey:@"myIndex"];
           NSLog( @"data from INDEX !!!!!!!! %@", myIndexList);

               for(int n=0; n<[myIndexList count]; n++)
               {
                   if(indexPath.row == [[myIndexList objectAtIndex:n] integerValue])
                   {
                       cell.textLabel.textColor = [UIColor lightGrayColor];
                   }

               }

         }

   }
   else{
       cell.textLabel.textColor = [UIColor blackColor];
   } 
```

# javascript - 在 HTML 表格中显示文件

> ID：10837753
> 
> 赞同：0
> 
> 时间：2012-05-31T16:41:02.367
> 
> 标签：javascript, jquery, netbeans, html-table

目前我正在使用 Netbeans 创建网页。下面列出了代码，按下按钮后，读取一个 csv 文件并将文本文件显示在表格的一行中。CSV 文件有 50 行数据，每行之间都有断点。

我想要做的是，而不是将整个文件内容放在一行中，因为文件的每一行都在自己的行中。

我对 Jquery/Javascript 完全陌生，真的不知道该怎么做，如果它甚至可能，或者我是否应该做一些完全不同的事情。

我不一定需要坚持下面的内容，但我坚持在 Javascript、HTML、jquery 或 json 中执行此操作，而这正是我迄今为止提出的有效方法。

```
 <!DOCTYPE html>
    <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script type="text/javascript" src="js/jquery-1.4.2.js"></script>
    <script type="text/javascript" src="js/jquery.ui.core.js"></script>
    <script type="text/javascript" src="js/jquery.ui.widget.js"></script>
    <script type="text/javascript" src="js/jquery.ui.accordion.js"></script>

    <script type="text/javascript"> 
    function contentDisp()
    {
    $.ajax({
    url : "file.csv", 
    success : function (data) {
    $("#contentArea").html(data);
    }
    });
    }
    </script> 

    </head>
    <body>
    <table width="100%" border=0>
    <tr>
    <td>&nbsp;</td>
    <td><input type="button" value="View File" onClick="contentDisp();"></td></tr>
    <tr>
    <td>&nbsp;</td><td>
    <textarea id="contentArea" rows="40" cols="60"></textarea></td></tr>
    </table>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:46:53.697

如果我理解正确，听起来你想要这个：

```
$("#contentArea").html(data.replace(/\n/g, '<br />')); 
```

这将用等效的 html 标记替换换行符。

# jquery-mobile - jQuery Mobile 破坏了我的网站

> ID：10837759
> 
> 赞同：8
> 
> 时间：2012-05-31T16:41:16.790
> 
> 标签：jquery-mobile

当我只在移动触摸屏设备上时，我会在我的网站上加载 jQuery Mobile。当我这样做的时候。它把一切都搞砸了。例如，选择菜单不能正常工作，页面底部也会出现“正在加载、正在加载、未定义”的字样。我知道我错过了一些东西，但不知道是什么。

关于我可能遗漏的任何想法？

谢谢

编辑：好的，所以我取出了我正在运行的所有脚本，除了 jQuery 和 jQuery Mobile。我首先调用 jQuery，然后调用 jQuery Mobile。它仍然破坏了网站的各个方面。

它打破了什么： - 我无法通过导航栏导航到任何其他页面，如果我单击导航项并查看 url，则会出现正确的 url（其中带有 #），例如：/#/about-us/然后，它只是重定向到主页，页面变白

*   选择菜单有奇怪的结果。它打印出它旁边的选择中的任何内容。如果您在 ipad 上处于横向模式并单击选择，它会将您发送到页面底部（奇怪）。

*   它在页面底部打印出两次“加载”和一次“未定义”

我所拥有的脚本只有 jQuery 和 jQuery Mobile。我还应该提到我正在使用 wordpress，因此它可能已将其他一些脚本排入队列（我已取消注册 Wordpress 的 jquery 版本并将我自己的脚本排入队列）

还有其他人遇到这些问题吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-31T19:55:23.757

`jQueryMobile`用一个替换您的正常链接`Ajax`，因此每个页面都可以由 ajax 加载，文档页面上的文本：

`(..) Ajax is used to load the contents of each page into the DOM as you navigate, and the DOM ready handler only executes for the first page. To execute code whenever a new page is loaded and created, you can bind to the pageinit event. This event is explained in detail at the bottom of this page.`

如果您想禁用 ajax 加载的单个链接，您应该编写如下内容：

```
<a href="/some_page" data-ajax="false" >link</a> 
```

或在全球范围内进行：

```
$(document).bind("mobileinit", function() {
  $.mobile.ajaxEnabled = false;
}); 
```

jm 还对其他元素进行替换，因此您应该尝试使用`data-role`属性，例如：

```
<select id="test" data-role="none"> 
```

禁用替换此元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-26T16:52:55.233

对于像我这样的人

```
$.mobile.ajaxEnabled = false; 
```

没有用，整个页面布局似乎仍然损坏：

对我来说，这个工作（ - 在加载 jquery 移动文件之前将其设置为内联）：

```
<script>
    // Preload configuration
    $( document ).on( "mobileinit", function() {
        $.mobile.autoInitializePage = false; // This one does the job
    });
</script> 
```

此外，如果您想通过 ajax 禁用 jQuery 移动自动链接和表单处理，请按照建议将（如 dvk3 所说）ajaxEnabled 设置为 false*并将*pushStateEnabled 设置为 false：

```
$.mobile.ajaxEnabled = false;
$.mobile.pushStateEnabled = false; // Recommended is false, when ajax is disabled 
```

有关详细信息，请参阅：[http ://api.jquerymobile.com/global-config/](http://api.jquerymobile.com/global-config/)

我正在使用 v1.4.5

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-14T18:58:51.503

通过将移动设备与其他框架混合，我也遇到了同样的情况。修复了问题，但获得了 jQuery.mobile 的自定义构建。我的情况是，我只需要滑动触摸设备，所以使用了自定义最小文件，之后没有任何问题。

这真的取决于您是需要 jQuery.mobile 还是只需要某个功能、小部件、事件？使用您可以自己构建的自定义版本。

你可以在这里制作和下载你的：http: [//jquerymobile.com/download-builder/](http://jquerymobile.com/download-builder/)

我希望它也对你们有用！

# xml - 需要从 xml 文件中删除大块文本，使用 perl find/replace 无处可去

> ID：10837763
> 
> 赞同：0
> 
> 时间：2012-05-31T16:41:24.620
> 
> 标签：xml, perl, cmd

我需要从大约 1.5k 个文件中删除或注释掉以下内容，并且在执行此操作时遇到了很多麻烦。我已经用 perl find/replace 尝试了所有我能想到的东西，但没有得到任何结果。任何有关方法的建议都会有所帮助。它上方和下方的选项卡包含针对每个 xml 分支更改的属性，因此我不能使用它们来查找/替换。我已经尝试了我能想到的每一种组合，但没有得到任何结果。当我尝试查找/替换`*`'s 的字符串时，我收到一个错误，指出参数列表太长。如果我尝试在空白行和 1 上查找/替换`*`，它也不会捡起它。几个例子：

```
perl -pi -e 's/\n\*/<!--/g' */*/*.log 
perl -pi -e 's/\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*/<!--/g' */*/*/log
perl -pi -e 's/>\n\*/><!--/'g */*/*.log (this one tries finding the end of the tag above it)

******************************************************

This system is for the use of authorized users only.
Individuals using this computer system without
authority, or in excess of their authority, are
subject to having all of their activities on this
system monitored and recorded by system personnel.

In the course of monitoring individuals improperly
using this system, or in the course of system
maintenance, the activities of authorized users may
also be monitored.

Anyone using this system expressly consents to such
monitoring and is advised that if such monitoring
reveals possible evidence of criminal activity, system
personnel may provide the evidence of such monitoring
to law enforcement officials.

****************************************************** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:58:27.763

那么触发器运算符呢？

```
perl -ne 'print unless /^\*+/ ... /^\*+/' 
```

请参阅[perlop中的](http://p3rl.org/perlop)[范围运算](http://p3rl.org/perlop#Range-Operators)符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T18:03:56.430

Slurps 整个文件，以便您可以匹配多行：

```
perl -i~ -0777pe's/^\*{54}\n.*?^\*{54}\n//m' file 
```

# iphone - 从我的应用程序中启动时，字符被邮件应用程序截断

> ID：10837766
> 
> 赞同：3
> 
> 时间：2012-05-31T16:41:31.877
> 
> 标签：iphone, ios, email, character-encoding, url-encoding

我正在尝试为用户设置一个预填充的电子邮件，以通过 iphone 本机邮件应用程序发送。电子邮件的正文包含用户想要共享的链接。

我的问题是邮件应用程序切断了链接，但是当我在我的应用程序中打印出字符串时，整个链接就在那里。

这是一个示例链接：

```
http://sample.com/Start.asp?tqnm=xe2nbek92057479&bt=xg&o=100925&c=RB&p=2W7TvRx1 
```

在邮件应用程序中，链接显示为：

```
http://sample.com/Start.asp?tqnm=xe2nbek92057479 
```

我正在使用标准代码来启动邮件应用程序：

```
NSString *mailString = [NSString stringWithFormat:@"mailto:?to=%@&subject=%@&body=%@",
                        [to stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding],
                        [subject stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding],
                        [body stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding]];
NSLog(@"Mail String: %@", mailString);
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:mailString]]; 
```

我也尝试过其他字符串编码，但要么得到相同的结果，要么根本不显示电子邮件的正文。

任何帮助将非常感激。我一直在寻找答案，但还没有找到任何可以指引我正确方向的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T20:02:25.710

我能够解决它，我找到了这个功能

```
NSString* encodeToPercentEscapeString(NSString *string) {
return (NSString *)
CFURLCreateStringByAddingPercentEscapes(NULL,
                                        (CFStringRef) string,
                                        NULL,
                                        (CFStringRef) @"!*'();:@&=+$,/?%#[]",
                                        kCFStringEncodingUTF8); 
```

然后我用它来对 body 进行编码，它负责处理 Matthias 所指的 & 符号。感谢 Matthias 为我指明了正确的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T19:29:03.903

这可能是一种解决方法而不是答案，但是......您可以考虑使用 MessageUI 框架直接从您的应用程序中发送邮件。您可以轻松设置邮件正文，而不会出现任何编码问题，并且对用户来说也更好一些（即不会从您的应用程序中切换）。

网上有很多关于如何做到这一点的教程/代码片段。（我前一阵子写了这篇[从你的应用程序发送邮件](http://iosdeveloperzone.com/2011/05/25/snippet-sending-mail-for-your-app-using-mfmailcomposeviewcontroller/)）。希望这可以帮助！

# grails - 如何将插件项目作为依赖项添加到我的主要项目中

> ID：10837771
> 
> 赞同：1
> 
> 时间：2012-05-31T16:41:50.830
> 
> 标签：grails, grails-plugin, grails-3.0, grails-2.5, grails-2.0.4

我的要求如下：

我将有三个项目。

1.  主要项目（Grails项目）
2.  主项目适配器（Grails 项目）
3.  域插件项目（Grails 项目）

域插件项目将包含所有域类及其测试用例。所以，我想在其他两个项目中使用这些域类。这里，我想先构建Domains插件项目，这个构建项目的输出应该是其他两个项目的依赖。我应该可以在 BuildConfig.groovy 中配置它。

目前，我已经通过以下方式完成：

使用 create-plugin 创建了一个插件项目，然后是 package plugin 命令。现在，我将该 ZIP 文件保存在我的 lib 文件夹中，并在 Build-config.groovy 中进行了配置。这按预期工作。但是，当我更改域类时，我需要做很多事情。就像将其应对到 lib。

有没有可能按照我解释的第一种方式做..!! 请帮我解决这个问题..!!

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:07:20.077

您可以使用内联插件 - 将所有三个项目放在同一级别（在同一目录中），然后将适配器和域插件配置为主项目中的内联插件。这样您就不必单独构建每个项目，您可以在域插件或适配器中进行更改，它们将自动在主项目中被选中。

在主项目的 BuildConfig.groovy 中

```
grails.plugin.location.'adapter' = "../path-to-adapter-plugin"
grails.plugin.location.'domain' = "../path-to-domain-plugin" 
```

注意 - 不需要将所有三个项目放在同一级别，但这样做可以让您使用相对路径 - 但如果您愿意，也可以使用绝对路径

# scroll - 根据上一页滚动不同的起始位置

> ID：10837772
> 
> 赞同：0
> 
> 时间：2012-05-31T16:41:56.773
> 
> 标签：scroll, position, iscroll4, iscroll

基本上我想做的是，我有一个 Iscroll，在一般项目页面中有 10-20 个图像，每个链接到该项目的详细页面。在项目页面中，它再次使用 Iscroll 来执行相同的操作，我可以按照与常规项目页面相同的顺序滚动项目的详细页面。有没有办法链接它们，所以取决于我在常规项目页面中单击的项目，让它进入相同的详细页面？

通用页面滚动条：a,b,c,d,e,f,g 详细页面滚动条：A,B,C,D,E,F,G

因此，当单击 d 时，它会将滚动条内的位置 D 带到我的位置

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T08:44:20.480

我不太确定您的确切意思，但您可以`d`通过使用`scroller.scrollTo(x,y,0)`或也使用来滚动到实际位置`scroller.scrollToElement('div:nth-child(D)', 100)`。检查[http://cubiq.org/iscroll-4中的](http://cubiq.org/iscroll-4)**Javascript 滚动**部分以供参考。希望这可以帮助

# windows - gtk_widget_queue_draw 在 Windows 7 下 GTK 中的内存泄漏

> ID：10837776
> 
> 赞同：2
> 
> 时间：2012-05-31T16:42:17.820
> 
> 标签：windows, gcc, memory-leaks, gtk, mingw

以下 GTK 程序：

```
#include <gtk/gtk.h>
GtkVBox *vbox;
GtkWindow *win;
gboolean Timer (gpointer user_data)
{
   gtk_widget_queue_draw (GTK_WIDGET (vbox));
   return 1;
}
int main(int argc, char **argv)
{
   gtk_init(&argc, &argv);
   win = (GtkWindow*)gtk_window_new(GTK_WINDOW_TOPLEVEL);
   vbox = (GtkVBox*)gtk_vbox_new(TRUE, 1);
   gtk_container_add(GTK_CONTAINER(win), GTK_WIDGET(vbox));
   g_timeout_add (200, Timer, 0);
   gtk_widget_show_all(GTK_WIDGET(win));
   gtk_main();
   return 0;
} 
```

如任务管理器所示，使用 gcc 4.5.2 编译时在 Windows 7 64 位下泄漏。在 Windows XP 32 位下编译时不会泄漏。该程序什么也不做。它创建一个窗口，放置一个框，然后每 200 毫秒从一个计时器调用 gtk_widget_queue_draw。

这是一个用于编译和链接测试的批处理文件。变量 GTK 设置为包含 GTK 二进制分发的目录。例如，在这种情况下为 2.24.10。

```
set GTK=c:/temp/GTK
gcc -c -mms-bitfields -I%gtk%/lib/gtk-2.0/include -I%gtk%/lib/gdk-2.0/include -I%gtk%/lib/glib-2.0/include -I%gtk%/include -I%gtk%/include/atk-1.0 -I%gtk%/include/gdk-pixbuf-2.0 -I%gtk%/include/cairo -I%gtk%/include/pango-1.0 -I%gtk%/include/gio-win32-2.0 -I%gtk%/include/glib-2.0 -I%gtk%/include/gtk-2.0 test.c
gcc test.o --mwindows -Wl,-luuid -L%gtk%/lib -lgtk-win32-2.0 -lgdk-win32-2.0 -lgobject-2.0 -lglib-2.0 -o test.exe 
```

有什么想法吗？GTK、gcc、MinGW 出了什么问题？错过了一些编译器/链接器选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:43:24.860

这是 GTK[错误 685959](http://bugzilla.gnome.org/show_bug.cgi?id=685959)。GTK 2.24.14 中修复了大部分泄漏。

[错误 707760](https://bugzilla.gnome.org/show_bug.cgi?id=707760)跟踪包（二进制文件、捆绑包）更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T21:42:33.970

`Windows 7 64-bit`, 使用`32-bit MinGW`和`GTK+`.

我有一个类似的情况，没有函数`gtk_widget_queue_draw (GTK_WIDGET (vbox));`中的调用`Timer`。

我的印象是，它是`g_timeout_add()`导致内存泄漏的原因（如 Windows 任务管理器中的进程选项卡上所报告的）PTL。

# dataset - 无法从“数据集”转换为“system.data.dataset”

> ID：10837783
> 
> 赞同：0
> 
> 时间：2012-05-31T16:42:38.990
> 
> 标签：dataset

我正在为看似无辜的代码块而苦苦挣扎。当我输入“FILL”时，智能识别该方法并向我提供 5 个重载的提示，其中一个（第 3 个）实际上说它接受数据集和字符串作为参数。这就是我要传递的内容，但编译器似乎被某些东西弄糊涂了，因为它将红色波浪线放在下面代码中最后一条语句的正下方（adapter.Fill（ds，“tbl”）；）。有时，我删除它并再次重新键入它，然后它说**“错误 1 ​​'System.Data.Common.DbDataAdapter.Fill(int, int, params System.Data.DataTable[])' 的最佳重载方法匹配有一些无效的参数......”**好像我试图使用哪个重载的 FILL 方法完全混淆了。

```
protected void ListBox1_SelectedIndexChanged(object sender, EventArgs e)
{

    string strSQL = "SELECT * from myTableName";        

    using (SqlConnection cn = new SqlConnection("MyConnectionStrng"))
    {

        using (SqlDataAdapter adapter = new SqlDataAdapter(strSQL, cn))
        {
            DataSet ds = new DataSet();
            adapter.Fill(ds, "tbl");

        }
    }

} 
```

任何人都知道如何解决这个问题？

TIA，-托尼。

# magento - Magento：CMS 上传图片静默失败

> ID：10837788
> 
> 赞同：10
> 
> 时间：2012-05-31T16:43:15.783
> 
> 标签：magento, file-upload, content-management-system, tinymce

我试图弄清楚为什么 Magento 的 CMS 模块中的 tinyMCE WYSIWYG 编辑器不会上传图像。我可以创建/删除文件夹，但任何文件都不会被上传，而且似乎没有关于为什么文件没有成功写入服务器的消息。

任何人都可能知道为什么？

### ** 更新 **

我正在使用 Magento 1.6.2。我试图找出问题所在，但控制器*似乎*永远不会被执行。我添加了一行来记录`uploadAction()`操作 (in `Mage_Adminhtml_Cms_Wysiwyg_ImagesController`) 中的参数，并且没有记录任何内容。

这是从其他人那里继承的项目，并进行了一定程度的修改，但似乎没有任何迹象表明 Magento 的这一部分无论如何都会被修改所触及。

### ** 编辑**

与此问题相关的项目已被删除，我无法再提供此问题的答案。如果有人可以确认一个有效的答案（因为这个问题在 Magento 中很常见），我很乐意将该答案标记为“已接受”。

否则，出于上述原因，我会将此问题标记为删除。

谢谢你。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-11-19T12:59:45.833

除了此处提供的解决方案之外，当您在管理面板中为您的 javascript 和媒体文件使用 CDN（*或不同的域）时，可能会发生这种情况。*如果您使用 CDN，请将其用于您的**网站范围**，并将您自己的域用于**默认范围**。它将使您的网站媒体和 javascript 文件从 CDN 加载，后端的媒体和 javascript 文件从您自己的域加载。这将解决您的问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-09T09:13:36.413

Magento 上的 Flash 图片上传器存在一些已知问题。不幸的是，当它落下时，它无声无息地落下。以下是 smth 可以破坏它的一些情况：

1.  如果您尝试使用开放式 ssl 证书将其与安全连接一起使用
2.  如果您在具有 apache 身份验证的服务器上使用它
3.  在一些带有原型 1.7 的 Magento 版本上

我认为后者是你最好的选择。也许你应该尝试从这里应用补丁：http: [//www.magentocommerce.com/boards/viewthread/4348/P45/#t327010](http://www.magentocommerce.com/boards/viewthread/4348/P45/#t327010)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-11T03:45:26.097

就我而言，这是一个跨域问题，如果你问我，很难找到......

让我感到困惑的是，产品图片的上传器就像一个魅力一样工作，但 CMS 部分的上传器却完全无声无息地失败了。我们从 Amazon S3 存储桶中提供皮肤文件夹，并且闪存上传器位于该文件夹下。

有趣的是，我们的 Magento (1.7.0.2) 版本使用两种不同的方法来计算 SWF 文件的路径，具体取决于您使用的是 CMS 还是产品更新。

CMS 文件 (app/design/adminhtml/default/default/template/cms/browser/content/uploader.phtml) 使用以下方法嵌入 Flash Uploader：

```
<?php echo $this->getSkinUrl('media/uploader.swf') ?> 
```

产品图片上传器正在使用：

```
<?php echo $this->getUploaderUrl('media/uploader.swf') ?> 
```

在我们的例子中，第一个解析为 AWS S3 url，显然在一个单独的域中，而第二个仍将引用本地域的 url。

所以，是的，快速而肮脏的解决方法是在 app/design/adminhtml/default/default/template/cms/browser/content/uploader.phtml 中将 getSkinUrl 替换为 getUploaderUrl。或者，您可以扩展核心以加载您将替换该方法的不同模板。

我希望这对某人有所帮助......我希望我在五天前第一次偶然发现这个问题时找到了这样的东西:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T16:18:21.097

您是否使用带有 https 的 Flash 上传器？如果是这样，您的安全地址是否在不同的域中（通常用于共享 ssl）？我遇到了一些麻烦。我通过安装 Flash 上传器禁用插件解决了问题。

您可以使用此下载器密钥下载插件：

> [http://connect20.magentocommerce.com/community/Dull_Uploader](http://connect20.magentocommerce.com/community/Dull_Uploader)

我希望它有所帮助。

# google-maps - 隐藏谷歌地图 v2 控件

> ID：10837790
> 
> 赞同：0
> 
> 时间：2012-05-31T16:43:17.523
> 
> 标签：google-maps, google-maps-api-2

我知道在 google map v3 中它已经在这里得到了回答： [Removing all controls from a google map](https://stackoverflow.com/questions/6302991/removing-all-controls-from-a-google-map)

我的问题是关于 V2。如何从谷歌地图 v2（地图、卫星、地形）中删除控件，例如只有地图将按照 setMapType 中的定义显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T22:42:51.253

只需确保未调用“setUIToDefault”方法即可。

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Google Maps JavaScript API Example: Simple Map</title>
    <script src="http://maps.google.com/maps?file=api&amp;v=2&amp;sensor=false&amp;key=AIzaSyD4iE2xVSpkLLOXoyqT-RuPwURN3ddScAI"
            type="text/javascript"></script>
    <script type="text/javascript">

    function initialize() {
      if (GBrowserIsCompatible()) {
        var map = new GMap2(document.getElementById("map_canvas"));
        map.setCenter(new GLatLng(37.4419, -122.1419), 13);
        //map.setUIToDefault();
      }
    }

    </script>
  </head>
  <body onload="initialize()" onunload="GUnload()">
    <div id="map_canvas" style="width: 500px; height: 300px"></div>
  </body>
</html> 
```

# regex - 将字符串存储在数组中

> ID：10837796
> 
> 赞同：1
> 
> 时间：2012-05-31T16:43:46.867
> 
> 标签：regex, perl

我目前将以下行存储在一个名为`google.txt`. 我想分隔这些行并将这些分隔的字符串存储在数组中。

喜欢第一行

```
@qf_file= q33AgCEv006441  
@date =    Tue Apr  3 16:12
@junk_message = User unknown
@rf_number = ngandotra@nkn.in

the line ends at the @rf_number at last emailadress 
```

```
 q33AgCEv006441     1038 Tue Apr  3 16:12 <test10-list-bounces@lsmgr.nic.in>
                     (User unknown)
                     <ngandotra@nkn.in>
    q33BDrP9007220    50153 Tue Apr  3 16:43 <karuvoolam-list-bounces@lsmgr.nic.in>
                     (Deferred: 451 4.2.1 mailbox temporarily disabled: paond.tndt)
                      <paond.tndta@nic.in>
    q33BDrPB007220    50153 Tue Apr  3 16:43 <karuvoolam-list-bounces@lsmgr.nic.in>
                     (User unknown)
                     paocorp.tndta@nic.in>
                                             <dtocbe@tn.nic.in>
                                             <dtodgl@nic.in>
    q33BDrPA007220    50153 Tue Apr  3 16:43 <karuvoolam-list-bounces@lsmgr.nic.in>
                     (User unknown)
                     <dtokar@nic.in>
                     <dtocbe@nic.in>
    q2VDWKkY010407  2221878 Sat Mar 31 19:37 <dhc-list-bounces@lsmgr.nic.in>
                     (host map: lookup (now-india.net.in): deferred)
                     <arjunpan@now-india.net.in>
    q2VDWKkR010407  2221878 Sat Mar 31 19:31 <dhc-list-bounces@lsmgr.nic.in>
                     (host map: lookup (aaplawoffices.in): deferred)
                      <amit.bhagat@aaplawoffices.in>
    q2U8qZM7026999   360205 Fri Mar 30 14:38 <dhc-list-bounces@lsmgr.nic.in>
                     (host map: lookup (now-india.net.in): deferred)
                      <arjunpan@now-india.net.in>
                       <amit.bhagat@aaplawoffices.in>
    q2TEWWE4013920  2175270 Thu Mar 29 20:30 <dhc-list-bounces@lsmgr.nic.in>
                     (host map: lookup (now-india.net.in): deferred)
                               <arjunpan@now-india.net.in>
                               <amit.bhagat@aaplawoffices.in> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:13:30.777

***未经测试的***Perl 脚本：

我们称这个脚本为`parser.pl`：

```
$file = shift;
open(IN, "<$file") or die "Cannot open file: $file for reading ($!)\n";
while(<IN>) {
    push(@qf_file, /^\w+/g); 
    push(@date, /(?:Sat|Sun|Mon|Tue|Wed|Thu|Fri)[\w\s:]+/g);
    push(@junk_message, /(?<=\().+(?=\)\s*<)/g);
    push(@rf_number, /(?<=<)[^>]+(?=>\s*$)/g);
}
close(IN); 
```

这假定该行的最后一封电子邮件应该是该行的“rf_number”。请注意，电子邮件可能很难打印，因为它们有一个`@`字符，而 perl 非常乐意为您打印一个不存在的列表:-)

要在命令行中调用它：

```
parser.pl google.txt 
```

**看到这个工作[在这里](http://codepad.org/KmFD6Cp1)。**

# extjs - ExtJs 树面板。如何滚动到节点

> ID：10837800
> 
> 赞同：0
> 
> 时间：2012-05-31T16:44:10.000
> 
> 标签：extjs, tree, scroll, extjs4.1

我有一个以编程方式扩展的树面板。

当我展开一个节点时，我想“跳转到”这个节点，我的意思是滚动到它。

如何将树面板滚动到特定节点？

**更新**：我使用**Ext 4.1**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T00:22:03.780

尝试使用`selectPath()` [http://docs.sencha.com/ext-js/4-0/#!/api/Ext.tree.Panel-method-selectPath](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.tree.Panel-method-selectPath)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T18:12:56.350

在 extjs 3.x 中，您可以尝试在 TreeNodeUI (myNode.ui.focus()) 上调用 focus()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T20:44:21.713

The tree is asynchronously loading every node, and you need to call to focus only after all the nodes have been loaded. What you are going to need to do is to set autoLoad to false on your root node, then later in the code manually load the root node for the first time using:

```
rootNode.expand(true, function(){
    myTreePanel.getView().focusRow(nodeyouwanttofocus);
}); 
```

doing it this way allows you to use the first parameter of the expand function that makes the expand fully recursive and also assures that the second parameter that is a function only executes after all the nodes are loaded, guarenteeing that the view is the correct height and that the node exists visually.

Another option that allows more flexability is to hook into the expand event:

```
var myTreeStore = Ext.create("Ext.data.TreeStore", {
    listeners: {
        expand: function(theParentNode){
            theParentNode.eachChild(function(node){
                if(nodeIWantSelected == node)
                     myTreePanel.getView().focusRow(node);
            }
        }
     }
}); 
```

and you can use the .select of the selection model to hook in to select the node (and I think it may focus the node too).

I haven't tried 'selectPath' as suggested by Sha before, which seems a lot easier to use, but you can hook in the focusRow function as the callback and I think that would work too.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-21T15:50:49.783

你可以使用[`tree.getView().focusRow()`](http://docs.sencha.com/extjs/4.2.1/#!/api/Ext.view.Table-method-focusRow)，喜欢它：

```
tree.expandPath(
    '/root/1/2/3',
    'id',
    '/',
    function() {
        tree.getView().focusRow(tree.getStore().getNodeById('3'));
    }
}); 
```

但是，如果您的树`animate: true`异步使用和加载每个节点并且路径中的任何节点尚未加载，则此方法不起作用（由于多个布局更新，树不会滚动到所选节点）。

作为解决方法，您可以：

1.  为树设置`animate: false`；
2.  添加“后布局”监听器，如下所示：

    ```
    tree.on('afterlayout', function() {
        tree.getView().focusRow(tree.getSelectionModel().getSelection()[0]);
    } 
    ```

    *我想您可以在需要时添加此处理程序，并在一切完成后将其删除。*

# xamarin.android - Monodroid cleartask 标志可用吗？

> ID：10837804
> 
> 赞同：0
> 
> 时间：2012-05-31T16:44:27.310
> 
> 标签：xamarin.android

我需要运行一个活动并删除我的应用程序的所有其他活动以节省内存。我在 sdk 中看到标志 FLAG_ACTIVITY_CLEAR_TASK 正是这样做的，但我在 monodroid 的 ActivityFlags 枚举中找不到它。

这可以用 monodroid 来完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:52:48.117

[ActivityFlags.ClearTask](http://docs.mono-android.net/?link=T:Android.Content.ActivityFlags)在 Mono for Android 中可用。但是，Android 直到 API 版本 11 才引入此标志，所以我猜您的目标是以前的版本。为了使用此标志，您需要将目标 Android 的最低版本更新为 3.1，该版本可在项目的属性页面中进行配置。

**编辑**：[这个问题](https://stackoverflow.com/questions/6427720/clearing-activity-stack)有一些其他方法可以在以前版本的 Android 上执行此操作。

# java - 使用 Ant 而不是 IDE 的 EasyMock PowerMock IllegalStateException

> ID：10837813
> 
> 赞同：0
> 
> 时间：2012-05-31T16:45:08.423
> 
> 标签：java, eclipse, ant, easymock, powermock

我正在使用带有 Easymock 扩展的 Powermock 1.4.9。

以下是我要测试的方法

```
Public class SomeClass {
    public String methodToTest(String id) throws Exception {
        try {
            ClassA ojbectA = MyFactory.staticMethod();
            String str = helperMethod(id);
            ojbectA.methodA(str);
            return objectA.methodB(str);
        }
        catch (Exception e) {
            throw e;
        }
    }
} 
```

以下是我为测试上述方法而编写的测试类和测试。我同时使用 PowerMock 和 EasyMock，因为我有静态和私有方法调用。

```
import org.easymock.EasyMock;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.powermock.api.easymock.PowerMock;
import org.powermock.core.classloader.annotations.PrepareForTest;
import org.powermock.modules.junit4.PowerMockRunner;

import static org.easymock.EasyMock.isA;
import static org.powermock.api.easymock.PowerMock.mockStatic;

@RunWith(PowerMockRunner.class)
@PrepareForTest{{SomeClass.class,MyFactory.class, ClassA.class}}
public class TestClass {
@Test
public void testMethod1() {
    try {
        ClassA mockA = PowerMock.createMock(ClassA.class);
        mockStatic(MyFactory.class);
        SomeClass someObj = PowerMock.createPartialMock(SomeClass.class,"helperMethod");

        String mockLog = "This is sample";
        String mockId = "mockId";
        String woMockId = "WO_mockId";

        //Mock all static methods
        EasyMock.expect(MyFactory.staticMethod()).andReturn(mockA);

        //Partial mocking
        PowerMock.expectPrivate(someObj,"helperMethod",mockId).andReturn(woMockId);

        //Mock methodA(String) method
        mockA.methodA(EasyMock.isA(String.class));
        PowerMock.expectLastCall().times(0, 1);

        //When methodB(String) is called, intercept it and return a standard value.
        EasyMock.expect(mockA.methodB(isA(String.class))).andReturn(mockLog);

        EasyMock.replay(mockA);
        EasyMock.replay(someObj);
        PowerMock.replay(MyFactory.class);

        String obtainedResult = someObj.getWorkorderLogByWoId(mockId);

        assertEquals(obtainedResult,mockLog);

        EasyMock.verify(mockA);
        EasyMock.verify(someObj);
        PowerMock.verify(MyFactory.class);
    }
    catch (Exception e) {
        e.printStackTrace();
    }
}
} 
```

这在 Intellij IDEA 和 Eclipse 上运行良好，没有任何异常。但是，当我使用 ANT 在命令行运行此测试时，我得到以下异常。

```
java.lang.IllegalStateException: no last call on a mock available
at org.easymock.EasyMock.getControlForLastCall(EasyMock.java:521)
at org.easymock.EasyMock.expect(EasyMock.java:499)
at com.xyz.ems.server.services.workorder.TestClass.testMethod1(TestClass.java:<some_line_number>)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at junit.framework.TestCase.runTest(TestCase.java:168)
at junit.framework.TestCase.runBare(TestCase.java:134)
at junit.framework.TestResult$1.protect(TestResult.java:110)
at junit.framework.TestResult.runProtected(TestResult.java:128)
at junit.framework.TestResult.run(TestResult.java:113)
at junit.framework.TestCase.run(TestCase.java:124)
at junit.framework.TestSuite.runTest(TestSuite.java:243)
at junit.framework.TestSuite.run(TestSuite.java:238)
at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:518)
at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1052)
at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:906) 
```

有一个不替换字符串的原始代码请求。所以下面是代码。

```
import com.xyz.ems.common.UnitTestCase;
import com.xyz.ems.server.services.logmessage.LogMessageManager;
import com.xyz.ems.server.services.workorder.database.WorkOrderManager;
import org.junit.After;
import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.powermock.core.classloader.annotations.PrepareForTest;
import org.powermock.modules.junit4.PowerMockRunner;

import static org.easymock.EasyMock.expect;
import static org.easymock.EasyMock.isA;
import static org.powermock.api.easymock.PowerMock.createMock;
import static org.powermock.api.easymock.PowerMock.createPartialMock;
import static org.powermock.api.easymock.PowerMock.expectLastCall;
import static org.powermock.api.easymock.PowerMock.expectPrivate;
import static org.powermock.api.easymock.PowerMock.mockStatic;
import static org.powermock.api.easymock.PowerMock.replay;
import static org.powermock.api.easymock.PowerMock.verify;

@RunWith(PowerMockRunner.class)
@PrepareForTest({WorkOrderManager.class,WorkOrderFactory.class,     LogMessageManager.class})
public class WorkOrderManagerPM_JTest extends UnitTestCase {

public WorkOrderManagerPM_JTest(String name) {
    super(name);
}

@Before
public void firstMethod() {
    assertTrue(true);
}

@After
public void lastMethod() {
    assertTrue(true);
}

@Test
public void testGetWoLogByObjectId() {
    try {
        LogMessageManager logMsgMgrMock = createMock(LogMessageManager.class);
        mockStatic(WorkOrderFactory.class);
        WorkOrderManager wMgr = createPartialMock(WorkOrderManager.class,"buildWorkOrderIdString");

        String mockLog = "This is sample";
        String mockId = "mockId";
        String woMockId = "WO_mockId";

        //Mock all static methods
        expect(WorkOrderFactory.getLogMessageManager()).andReturn(logMsgMgrMock);

        //Partial mocking
        expectPrivate(wMgr,"buildWorkOrderIdString",mockId).andReturn(woMockId);

        //Mock openLogMessageDoc() method
        logMsgMgrMock.openLogMessageDoc(isA(String.class));
        expectLastCall().times(0, 1);

        //When getAllLogMessageAsString() is called, intercept it and return a standard value.
        expect(logMsgMgrMock.getAllLogMessagesAsString(isA(String.class))).andReturn(mockLog);

        replay(logMsgMgrMock);
        replay(wMgr);
        replay(WorkOrderFactory.class);

        String obtainedResult = wMgr.getWorkorderLogByWoId(mockId);

        assertEquals("getWorkorderLogByWoId() general case passed",obtainedResult,mockLog);

        verify(logMsgMgrMock);
        verify(wMgr);
        verify(WorkOrderFactory.class);
    }
    catch (Exception e) {
        e.printStackTrace();
        fail("Failed to test getWorkorderLogById()");
    }
} 
```

以及正在测试的原始方法...

```
public class WorkOrderManager {
public String getWorkorderLogByWoId(String woId) throws WorkOrderServiceEMSException {
    try {
        LogMessageManager logMsgMgr = WorkOrderFactory.getLogMessageManager();
        String workOrderLogId = buildWorkOrderIdString(woId);
        logMsgMgr.openLogMessageDoc(workOrderLogId);
        return logMsgMgr.getAllLogMessagesAsString(workOrderLogId);
    }
    catch (Exception e) {
        String msg = "Failed to get Work Order Log for workorder Id : " + woId;
        throw new WorkOrderServiceEMSException(msg, WorkOrderServiceEMSError.WO_GET_WOLOG_BY_OBJECTID.newInstanceWithFormatArgs(woId), e);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T11:06:34.300

尝试这个....

```
package com.chumma.pdf.main;

import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.mockito.Mock;
import org.mockito.Mockito;
import org.powermock.api.mockito.PowerMockito;
import org.powermock.core.classloader.annotations.PrepareForTest;
import org.powermock.modules.junit4.PowerMockRunner;

@RunWith(PowerMockRunner.class)
@PrepareForTest( { SomeClass.class, MyFactory.class, ClassA.class })
public class SomeClassTest {
    SomeClass someClass;

    @Mock
    ClassA mockClassA;

    @Before
    public void inti() {
        someClass = PowerMockito.spy(new SomeClass());
    }

    @Test
    public void test() throws Exception {
        // To mock MyFactory.staticMethod();
        PowerMockito.mockStatic(MyFactory.class);
        Mockito.when(MyFactory.staticMethod()).thenReturn(mockClassA);
        // To mock helperMethod(id);
        PowerMockito.when(someClass, "helperMethod", Mockito.anyString())
                .thenReturn("retrunString");
        // To mock ojbectA.methodA(str);
        Mockito.when(mockClassA.methodA(Mockito.anyString())).thenReturn(
                "retStr1");
        // To mock ojbectA.methodB(str);
        Mockito.when(mockClassA.methodB(Mockito.anyString())).thenReturn(
                "retStr2");
    }
} 
```

# jquery - 为动态加载的内容加载 Jquery 工具提示

> ID：10837815
> 
> 赞同：0
> 
> 时间：2012-05-31T16:45:15.763
> 
> 标签：jquery

我希望在将鼠标悬停在动态加载的 id 的锚标记上时显示 Jquery 工具提示。

**使用 Jquery 提示**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T17:02:09.907

**尝试这样的事情**

```
$(document).ready(function(){
            loadtip();
        });

function loadtip() {
            $('a.tips').cluetip({
            showTitle: true ,
            arrows: true              
          });
        } 
```

**加载动态内容后再次调用此函数：**

```
$(document).ready(function(){
            loadtip();
        }); 
```

# tablesorter - jQuery live() 和 Tablesorter - 不适用于第一次点击

> ID：10837817
> 
> 赞同：1
> 
> 时间：2012-05-31T16:45:23.570
> 
> 标签：tablesorter, jquery

事情是这样的：文件`a.php`包含 jQuery Tablesorter 表。这是表格排序器代码：

```
 $("#feedsTable thead").live("click", function() {
       $("#feedsTable").tablesorter({
                widthFixed : true,
                dateFormat : "uk",
            }).tablesorterPager({
                container : $("#pager"),
                positionFixed : false
            });
        }); 
```

稍微剥离了表格 HTML 代码：

```
<div id="tablica">
    <article class="module width_full">
        <div id="pager">
            <form>
                [snip]tablesort pager stuff... 
            </form>
        </div>
        <table id="feedsTable" class="tablesorter" cellspacing="0">
            <thead>
                <tr>
                    [snip]table header row...
                </tr>
            </thead>
            <tbody> ... PHP printed table data 
```

此外，文件`a.php`包含`refresh`链接，单击该链接时，会调用`b.php`包含以下代码的文件：（`$("#tablica").load("a.php #tablica");`基本上，使用新元素打印表格，然后使用该函数`b.php`将旧表格替换为新表格）。`load`

当然，我必须使用 jQuery`live`或者`delegate`（这个有一些问题，只是不能让 Tablesorter 工作，所以我`live`改用）函数，而不是`(document).ready`因为一旦`load`执行代码，Tablesorter 将无法使用新的表数据。

但问题是当我使用jQuery`live()`函数时，我需要点击两次才能使用Tablesorter插件。就像第一次点击只“激活”插件，然后，当第二次点击表格标题时，表格被排序并且效果很好。

中`a.php`，我可以添加此代码

```
$(document).ready(function() {
    $("#feedsTable thead").click();
}); 
```

它将“激活”插件，第一个用户单击表头将对表进行排序。但是，如果我添加`$("#feedsTable thead").click();`到`b.php`文件并单击`refresh`链接，则此“hack”不起作用，并且需要再次单击两次才能在加载新数据的表后使用 Tablesorter 插件。

基本上，问题是：我希望 Tablesorter 在使用 jQuery 时在第一次单击时工作`live`，而不仅仅是在第二次单击时工作。如何解决？

任何帮助将非常感激！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:16:09.793

“当然，我必须使用 jQuery live 或委托”

[http://api.jquery.com/live/](http://api.jquery.com/live/)：从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。旧版本 jQuery 的用户应该使用 .delegate() 而不是 .live()。

试试 on() 看看它是否有很大的不同。如果没有，那么还有其他东西在起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T17:22:30.247

因此，`delegate`它将不起作用，因为它针对的是`#tablica`其中所有内容完全被`load`函数替换的表。`live`我认为，在使用文档时，委托需要一个“锚”元素来检测冒泡事件。因此，按照它的编写方式，当用户单击thead 中的任意位置时，tablesorter 将初始化。现在第二次单击实际上会对列进行排序，因为 tablesorter 处于活动状态。

无论如何，解决方案是在`load`回调函数中初始化 tablesorter。因此，完全删除 live 功能并尝试以下操作：

```
$("#tablica").load("a.php #tablica", function(){
    $("#feedsTable").tablesorter({
        widthFixed : true,
        dateFormat : "uk",
    }).tablesorterPager({
        container : $("#pager"),
        positionFixed : false
    });
}); 
```

现在，当用户单击表格标题时，它将排序，因为 tablesorter 在加载内容后立即初始化。

# c++ - 编译多个 C++ OpenGL

> ID：10837822
> 
> 赞同：0
> 
> 时间：2012-05-31T16:46:15.203
> 
> 标签：c++, opengl, compilation, header, g++

我正在编写一个简单的 C++、opengl 程序，但我很难从目标文件生成可执行文件。我可以使用以下方法创建每个 .cpp 的目标文件而不会出错：

```
g++ -c filename.cpp  ---->   filename.o 
```

每个 .cpp 创建一个对象，这使我假设它可以很好地找到 opengl 标头，但是当我尝试从对象创建可执行文件时，它会输出：

```
g++ -o OUTPUT Main.o Time.o Map.o Vehicle.o

Main.o: In function `init()':
Main.cpp:(.text+0x12a): undefined reference to `glEnable'
Main.cpp:(.text+0x134): undefined reference to `glShadeModel'
Main.cpp:(.text+0x14d): undefined reference to `glViewport'
Main.cpp:(.text+0x157): undefined reference to `glMatrixMode'
Main.cpp:(.text+0x15c): undefined reference to `glLoadIdentity' 
```

我意识到 g++ 告诉我它在任何地方都找不到 OpenGL 函数，这意味着它没有链接到 glu.h、gl.h 等。但是为什么创建对象文件时没有类似的错误，但我可以'不让我的可执行文件？目标文件不会遭受与 .exe 相同的链接错误吗？我试过-I和g++ -o RUN Time.o Main.o Map.o Vehicle.o -L/usr/include/GL/ -lGL -lGLU，也验证了OpenGL目录的路径。

每个文件的标题如下：

libgl.h：

```
#ifndef LIBGL_H
#define LIBGL_H

#include <GL/gl.h>
#include <GL/glu.h>
#include <GL/glut.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <math.h>
#include "Time.h"
#include "Link.h"

#endif 
```

时间.h：

```
#ifndef TIME_H
#define TIME_H

extern float GLOBAL_TIME;

#endif 
```

地图.h

```
#ifndef MAP_H
#define MAP_H
#include "libgl.h"
....
#endif 
```

车辆.h：

```
#ifndef VEHICLE_H
#define VEHICLE_H
#include "libgl.h"
...
#endif 
```

主要.cpp：

```
#include "libgl.h"
#include "Map.h"
#include "Vehicle.h"
 ... 
```

关于我的标题/链接和编译，我缺少一些东西，如果有人有任何建议，我将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T16:51:56.657

您需要与 OpenGL 库链接：可能传递`-lgl`到最后一次 g++ 调用。

如果你的系统有`pkg-config`你可以`pkg-config --cflags --libs gl`用来获取所有正确的标志。

为了将来的参考，“未定义的参考”是一个链接器错误，它总是意味着同样的事情：你错过了一个目标文件或一个库。它只在链接时出现，从不在简单编译时出现（即使用`-c`）

# javascript - 包含 Symfony 和 Twig javascripts 和样式的整个文件夹

> ID：10837823
> 
> 赞同：0
> 
> 时间：2012-05-31T16:46:22.750
> 
> 标签：javascript, symfony, twig

是否可以在 Symfony2 中包含 Twig 的整个文件夹？

基本上，我希望能够将我的 Javascript 对象分离到它们自己的文件夹中以提高可读性，然后能够将所有这些对象重新包含在一个文件中以呈现给客户。

有任何想法吗？

谢谢。

编辑：我在技术上是指使用 javascripts 和样式表标签的 Assetic。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:50:12.483

您的意思是将 {% stylesheets %} 和 {% javascripts %} 代码放在单独的树枝模板中吗？或者只是将 js/css 文件放在不同的目录中？

如果您指的是后者，那么这就是 Assetic 的标准用法。文档中的示例案例正是描述了这一点。

[http://symfony.com/doc/current/cookbook/assetic/asset_management.html](http://symfony.com/doc/current/cookbook/assetic/asset_management.html)

请注意，在开发环境中，它们仍然是分开的。在 prod 环境中，它们被组合在一起。（这可以在 app/config/config.yml 中配置）

如果您希望在单独的 twig 模板中包含 {% stylesheets %} 和 {% javascripts %} 标签，但要将它们编译为单个 JS/CSS 文件，目前这是不可能的。但我相信他们正在研究下一个主要版本的这种能力。

# iphone - 去除所有特殊字符（é、ü、ç 等）的 NSString

> ID：10837825
> 
> 赞同：3
> 
> 时间：2012-05-31T16:46:30.603
> 
> 标签：iphone, objective-c, ios, unicode

> **可能重复：**
> [NSString - Unicode 到 ASCII 等效](https://stackoverflow.com/questions/2591052/nsstring-unicode-to-ascii-equivalent)
> [从 Objective-c 中的 NSString 中删除非 ASCII 字符](https://stackoverflow.com/questions/6361586/remove-non-ascii-characters-from-nsstring-in-objective-c)

`NSString`为了去除所有特殊字符（é、ü、ç 等），我应该在我的代码中做什么？

有内置的方法吗？

# google-earth - 将 Google 地球视图集成/添加到我的地图

> ID：10837828
> 
> 赞同：0
> 
> 时间：2012-05-31T16:46:43.533
> 
> 标签：google-earth, google-earth-plugin

我正在为非营利组织“诺克斯山公园之友”创建交互式地图，但我在使用 Google 地球视图时遇到了问题。

我已经在网上搜索了数周，但我找到的解决方案都不适合我。有人可以看看代码，让我知道我应该怎么做才能在地图中包含 Google 地球视图吗？提前致谢。

在线项目： http: [//www.virtualbc.ca/knoxmountain/](http://www.virtualbc.ca/knoxmountain/)

这是包含谷歌地图代码的javascript文件（mapa2.js）：

```
google.load('earth', '1');
var map;
var googleEarth;

var gmarkers = [];

var iconShadow = new google.maps.MarkerImage('icons/shadow.png', 
new google.maps.Size(46, 42),
new google.maps.Point(0,0),
new google.maps.Point(13, 42));

var sites = [
['Apex Trail - Shelter',49.91174271, -119.48507050, 4, '<a href="vtours/apex_trail_shelter/index.html?iframe=true&width=88%&height=98%" rel="prettyPhoto"><img src="images/apex_point_high.jpg"></a>','magenta','14'],
['Apex Trail',49.91286999, -119.48413424, 3, '<a href="vtours/apex_trail_1/index.html?iframe=true&width=88%&height=98%" rel="prettyPhoto"><img src="images/apex_point_low.jpg"></a>','lemon','1'],
['Gordon Trail',49.91971281, -119.47954356, 2, '<a href="vtours/gordon_trail_1/index.html?iframe=true&width=88%&height=98%" rel="prettyPhoto"><img src="images/apex_point_low.jpg"></a>','lemon','1'],
['Paul Tomb Bay',49.92555541, -119.47710250, 1, '<a href="vtours/paul_tomb_bay_1/index.html?iframe=true&width=88%&height=98%" rel="prettyPhoto"><img src="images/tomb_bay.jpg"></a>','lemon','1']
];

var infowindow = null;

var overlay;

// Used to make Google Map quard coords to MapCruncher/BingMaps quard coords    
function TileToQuadKey ( x, y, zoom)
{
    var quad = "";
    for (var i = zoom; i > 0; i--)
    {
        var mask = 1 << (i - 1);
        var cell = 0;
        if ((x & mask) != 0)
            cell++;
        if ((y & mask) != 0)
            cell += 2;
        quad += cell;
    }
    return quad;
}

function init() {
    var centerMap = new google.maps.LatLng(49.909671, -119.482241);

    var myOptions = {
        zoom: 10,
        center: centerMap,
        mapTypeId: google.maps.MapTypeId.SATELLITE
    }

    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

        // Create the tile layers     

    // ASTER Tile Layer  
    myASTEROptions = {
     getTileUrl : function (a,b) { 
return  "http://www.virtualbc.ca/knoxmountain/map/" + TileToQuadKey(a.x,a.y,b) + ".png"; 
},
     isPng: true,
     opacity: 1.0,
     tileSize: new google.maps.Size(256,256),
     name: "ASTER",
     minZoom:13,
     maxZoom:20
     }

    ASTERMapType = new google.maps.ImageMapType( myASTEROptions );
    map.overlayMapTypes.insertAt(0, ASTERMapType);

     // Aerial Tile Layer  
    myAerialOptions = {
     getTileUrl : function (a,b) { 
return  "http://www.virtualbc.ca/knoxmountain/map/" + TileToQuadKey(a.x,a.y,b) + ".png"; 
},
     isPng: true,
     opacity: 1.0,
     tileSize: new google.maps.Size(256,256),
     name: "Aerial",
     minZoom:15,
     maxZoom:21
     }

    AerialMapType = new google.maps.ImageMapType( myAerialOptions );
    map.overlayMapTypes.insertAt(1, AerialMapType);

    var panorama = new google.maps.StreetViewPanorama(map.getDiv()); 
    panorama.setVisible(false); 
    panorama.set('enableCloseButton', true); 
    map.setStreetView(panorama); 
    panorama.setPosition(centerMap); 

    setMarkers(map, sites);     
    setZoom(map, sites);

    infowindow = new google.maps.InfoWindow({
        content: "Loading..."
    });

    googleEarth = new GoogleEarth(map);

    google.maps.event.addListenerOnce(map, 'tilesloaded', addOverlays);

} 

/*
This functions sets the markers (array)
*/
function setMarkers(map, markers) {
    for (var i = 0; i < markers.length; i++) {
        var site = markers[i];
        var siteLatLng = new google.maps.LatLng(site[1], site[2]);

        var marker = new google.maps.Marker({
            position: siteLatLng,
            map: map,
            title: site[0],
            zIndex: site[3],
            html: site[4],
            // Markers drop on the map
            animation: google.maps.Animation.DROP,
            icon: 'http://www.virtualbc.ca/knoxmountain/icons/icon.png',
            shadow: iconShadow
        });

        gmarkers.push(marker);

        google.maps.event.addListener(marker, "click", function () {
            infowindow.setContent(this.html);
            infowindow.open(map, this);
        });
    }
}

/*
Set the zoom to fit comfortably all the markers in the map
*/
function setZoom(map, markers) {
    var boundbox = new google.maps.LatLngBounds();
    for ( var i = 0; i < markers.length; i++ )
    {
      boundbox.extend(new google.maps.LatLng(markers[i][1], markers[i][2]));
    }
    map.setCenter(boundbox.getCenter());
    map.fitBounds(boundbox);
}

// This function picks up the click and opens the corresponding info window

function myclick(i) {
    google.maps.event.trigger(gmarkers[i-1], "click");
}

google.maps.event.addDomListener(window, 'load', init); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:27:53.107

我注意到您网站的第一个问题是您链接到不存在的[http://www.virtualbc.ca/src/googleearth-compiled.js 。](http://www.virtualbc.ca/src/googleearth-compiled.js)

# asp.net-mvc - 对象引用未设置为 DropDownListFor 上的对象实例

> ID：10837829
> 
> 赞同：0
> 
> 时间：2012-05-31T16:46:51.943
> 
> 标签：asp.net-mvc

这真让我抓狂！我正在尝试创建一个从数据库中获取其值的下拉列表。我是 MVC 的新手，所以它可能很简单，但我无法弄清楚。请帮忙！

查看型号：

```
public class LoadInputModel
{
    public GeoRegion GeoRegion { get; set; }
    public System.Guid Id { get; set; }
    public IEnumerable<GeoRegion> Description { get; set; } 
```

}

这是我的控制器：

```
[HttpPost]
    public ActionResult LoadShape(LoadInputModel LoadInputModel)
    {
        LoadInputModel.Description = db.GeoRegions.Select(a => a);

        return View(LoadInputModel);
} 
```

这是我的htmlhelper：

```
@Html.DropDownListFor(m => m.Description,Model.Description.Select(c => new SelectListItem { Text = c.Description, Value = c.Id.ToString() }), "-----Select Category----") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:50:24.903

我猜你的`Description` 属性值是`null`，所以你可能需要在为其分配一些值之前对其进行初始化

```
 if( LoadInputModel.Description==null)
 {
     LoadInputModel.Description=new List<GeoRegion>();
 }
 LoadInputModel.Description = db.GeoRegions.Select(a => a); 
```

或者你可以在课堂上做，所以你不需要在很多地方做

```
public class LoadInputModel
{
    public GeoRegion GeoRegion { get; set; }
    public System.Guid Id { get; set; }
    public IEnumerable<GeoRegion> Description { get; set; }

    public LoadInputModel()
    {
       if(Description==null)
        {
         Description=new List<GeoRegion>();
        }
    }
} 
```

# sharepoint - 如何在 sharepoint 2010 中创建“添加附件”列？

> ID：10837830
> 
> 赞同：0
> 
> 时间：2012-05-31T16:46:52.963
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-designer, attachment

谷歌搜索并在这里查看了一段时间，到目前为止没有找到答案。

我目前正在尝试使用类似于编辑按钮的列。使用编辑按钮单击图标，您将被重定向到编辑页面。我想要用户可以单击以直接进入添加附件部分的内容。它不需要是一个按钮，即使它看起来不错。我们也有设计师，所以这也是一个选择。

关于如何尝试使这项工作的任何建议或链接？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T11:50:53.773

你能不能像编辑按钮一样创建另一个欧洲央行项目，添加附件通过查询字符串传递项目的 ID。在 c# 中选择它并使用你的魔法添加附件？

这是创建 ECB 菜单项的方法

[http://www.learningsharepoint.com/2012/05/22/add-custom-editcontrolblock-ecb-menu-item-to-open-a-custom-page-in-sharepoint/](http://www.learningsharepoint.com/2012/05/22/add-custom-editcontrolblock-ecb-menu-item-to-open-a-custom-page-in-sharepoint/)

希望这可以帮助

干杯特鲁兹

# javascript - jquery 将此与额外值进行比较

> ID：10837835
> 
> 赞同：0
> 
> 时间：2012-05-31T16:47:11.693
> 
> 标签：javascript, jquery, find, compare

我如何与可能`$(this)`的值进行比较。`data-id``1-2rju-aodg`

我的意思是我需要指定`$(this)`有标签`data-id`并且我需要验证它是否等于`X`

```
$(this).data('id')/*==123123akfsna*/.siblings('p').html(no_featured_news).removeClass('existing').addClass('description'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:55:06.750

如果您不想使用`if`：

```
$(this).filter('[data-id="1-2rju-aodg"]').siblings('p')........ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T16:50:29.443

```
$(this + '[data-id=123123akfsna]')
      .siblings('p')
      .html(no_featured_news)
      .removeClass('existing')
      .addClass('description'); 
```

**[工作样本](http://jsfiddle.net/thecodeparadox/nxvuE/2/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T16:50:52.413

```
if ($(this).attr('data-id') == '1-2rju-aodg') {
   $(this).siblings('p')//...
} 
```

# java - 如何在单元测试中模拟/存根 Java 容器？

> ID：10837839
> 
> 赞同：1
> 
> 时间：2012-05-31T16:47:20.610
> 
> 标签：java, servlets, junit, glassfish, mocking

我有一个对象`ServletContextListener`，根据 Java EE servlet 规范，servlet 容器在部署/启动时通过其`contextInitialized(ServletContext)`方法调用该对象。

我正在尝试编写一个单元测试来模拟 servlet 容器的启动和部署`ServletContextListener`（以便我可以确定应用程序是否正确初始化）。

这可能吗？如果可以，怎么做？它是特定于容器的吗？如果是这样，我正在使用 OGS。寻找看起来*像*这样的代码：

```
@Test
public void shouldBootstrapAppAtDeployTime() {
    // Given
    GlassFishContainer container = new GlassFishContainer(); // ha!
    MyApp app = mock(MyApp.class); // MyApp implements ServletContextListener

    // When - deploy app to container
    // Causes app.contextInitialized(ServletContext) to be called
    container.deploy(app);

    // Then - verify the method was called with any ServletContext
    mock.verify(app.contextInitialized(Matchers.any());
} 
```

这是一个草率的伪代码，其中包含一些实现不佳的 Mockito 用于演示目的（只是为了表达我的意图）。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T16:53:45.990

也许你可以用 Arquillian 解决这个问题：http: [//arquillian.org/features/](http://arquillian.org/features/)

从网页：

> Arquillian 将您的测试带到运行时，让您可以访问容器资源、有意义的反馈以及对代码实际工作方式的洞察力。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T17:49:07.383

我认为你的方法有点错误。您的单元测试伪代码所做的是测试它正确调用您的 ServletContextListener 的容器逻辑 - 我相信容器可以正确执行此操作。

我要做的是直接测试您的侦听器类，实例化它，使用模拟 ServletContext 调用 contextInitialized() 方法（我看到您熟悉 Mockito，这是一个出色的工作工具！），如果您的 ServletContextListener按预期完成了工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T11:30:18.523

**不确定是否有这样的测试框架**。即使存在，也**不会在真实环境中进行测试**（可能与测试环境不同）。

编写这种测试用例的最佳方法是：

1.  使用 ANT 部署战争，您使用的服务器可能正在提供 MBean 或其他东西来部署应用程序
2.  当调用 contextInitialized() 方法时，您的侦听器可能正在执行某些功能。
3.  编写一个向服务器发出请求并检查步骤 2 是否成功的客户端。

# javascript - 咖啡脚本尝试在 IE8 中捕获失败

> ID：10837841
> 
> 赞同：0
> 
> 时间：2012-05-31T16:47:25.070
> 
> 标签：javascript, internet-explorer-8, coffeescript, try-catch

```
Radiant::loadCSS = (fn, scope) ->
  head = document.getElementsByTagName("head")[0]
  link = document.createElement("link")
  link.setAttribute "href", "/" + ri.context + "/css/" + @obj + ".css"
  link.setAttribute "rel", "stylesheet"
  link.setAttribute "type", "text/css"
  sheet = undefined
  cssRules = undefined
  if "sheet" of link
    sheet = "sheet"
    cssRules = "cssRules"
  else
    sheet = "styleSheet"
    cssRules = "rules"
  timeout_id = setInterval(->
    try
      if link[sheet] and link[sheet][cssRules].length
        clearInterval timeout_id
        clearTimeout timeout_id
        fn.call scope or window, true, link #LINE THAT ERRORS OUT!!!
    #finally
  , 10)
  timeout_id = setTimeout(->
    clearInterval timeout_id
    clearTimeout timeout_id
    head.removeChild link
    fn.call scope or window, false, link
  , 15000)
  head.appendChild link
  link 
```

所以上面是我从这里翻录的一个函数的翻译：[Dynamically loading css file using javascript with callback without jQuery](https://stackoverflow.com/questions/5537622/dynamically-loading-css-file-using-javascript-with-callback-without-jquery)

当我在直接的 javascript 中使用它时效果很好，但是咖啡版本在 ie8 中给我带来了问题`'fn' is null or not an object`

这是该部分的渲染 javascript：

```
timeout_id = setInterval(function() {
  try {
    if (link[sheet] && link[sheet][cssRules].length) {
      clearInterval(timeout_id);
      clearTimeout(timeout_id);
      return fn.call(scope || window, true, link); //ERROR LINE!!!
    }
  } catch (_error) {}
}, 10); 
```

无论如何，我是新手`try`，`catch`只是不明白这里出了什么问题。提前谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:25:55.317

我认为这与 try/catch 的关系不大，而与此有关，无论出于何种原因，`fn`在回调执行时都没有定义（如错误所示）。你确定在你得到错误的情况下`fn`被传入吗？`loadCSS`

# sql - 将数据库名称与表列表关联

> ID：10837847
> 
> 赞同：5
> 
> 时间：2012-05-31T16:48:09.180
> 
> 标签：sql, database, sql-server-2008

列出服务器上所有带有模式的表是没有问题的

```
SELECT SCHEMA_NAME(schema_id), name FROM sys.tables 
```

如何确定表驻留在哪个数据库中？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-31T16:53:29.350

sys.tables 存在于所有数据库中，所以我没有遵循您不知道您所在的数据库的事实。您可以运行 DB_NAME(DB_ID()) 来获取数据库名称

```
SELECT  DB_NAME(DB_ID()),SCHEMA_NAME(schema_id), name FROM sys.tables 
```

但在这种情况下 DB_NAME(DB_ID()) 将为每一行返回相同的值

为所有数据库执行此操作，您可以执行此操作

```
EXEC sp_msforeachdb 'use  [?] SELECT  ''?'',SCHEMA_NAME(schema_id), name 
                                  FROM sys.tables' 
```

您当然也可以将其转储到表格中

```
CREATE TABLE #output (DatabaseName VARCHAR(1000), 
                   SchemaName VARCHAR(1000), 
                  TableName VARCHAR(1000))

INSERT #output
EXEC sp_msforeachdb 'use  [?] SELECT  ''?'',SCHEMA_NAME(schema_id), name 
                                  FROM sys.tables'

SELECT * FROM #output 
```

仅供参考，sp_msforeachdb proc 没有记录，您不应该将它用于生产代码，快速找到一些东西是好的，生产代码滚动您自己的这个 proc 版本

另请参阅 Aaron Bertrand 的帖子：

*   [制作更可靠、更灵活的 sp_MSforeachdb](https://www.mssqltips.com/sqlservertip/2201/making-a-more-reliable-and-flexible-spmsforeachdb/)
*   [在 SQL Server 中的每个数据库的上下文中执行命令](https://www.mssqltips.com/sqlservertip/5694/execute-a-command-in-the-context-of-each-database-in-sql-server--part-2/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-22T19:59:02.870

我在创建查询时遇到了这个问题，我希望能够在我的服务器上对不同的数据库运行，并在不将其硬编码到查询中的情况下包含另一个数据库的名称。

查询基本上如下所示：

```
SELECT DB_NAME() db_name
     , SCHEMA_NAME(schema_id) schema_name
     , name table_name
  FROM OtherDB.sys.tables   --The OtherDB is to specify that I am running
                            --this for a different database than the one
                            --I'm logged in to for my current session. 
```

问题是，即使我`OtherDB.sys.tables`在 from 子句中指定，`DB_NAME()`总是返回我所在的当前数据库。是的，我可以`USE OtherDB`在开头放 a，但似乎应该有另一种方式。我浏览了我能找到的每一个 sys 视图，但找不到任何可以链接`sys.databases`和`sys.tables`.

我最终发现的是 SQL Server 的`INFORMATION_SCHEMA.TABLES`这个视图包括数据库名称作为第一列（称为`TABLE_CATAOLG`）。

```
SELECT TABLE_CATALOG
     , TABLE_SCHEMA
     , TABLE_NAME
     , TABLE_TYPE
  FROM INFORMATION_SCHEMA.TABLES 
```

使用这些视图，您可以轻松比较两个数据库中的表：

```
SELECT a.TABLE_CATALOG
     , a.TABLE_SCHEMA
     , a.TABLE_NAME
     , a.TABLE_TYPE
     , b.TABLE_CATALOG
     , b.TABLE_SCHEMA
     , b.TABLE_NAME
     , b.TABLE_TYPE
  FROM OneDatabase.INFORMATION_SCHEMA.TABLES a
  FULL OUTER JOIN TwoDatabase.INFORMATION_SCHEMA.TABLES b 
    ON a.TABLE_SCHEMA = b.TABLE_SCHEMA
   AND a.TABLE_NAME = b.TABLE_NAME 
```

如果数据库位于链接的单独服务器上，您应该能够通过使用[Full Qualified Table Name](http://technet.microsoft.com/en-us/library/ms190406)的所有四个部分来使用此查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T17:24:36.800

如果您的意图只是包含当前数据库名称，为什么不只是：

```
SELECT DB_NAME(), SCHEMA_NAME(schema_id), name FROM sys.tables; 
```

如果您的意图是从所有数据库中提取所有名称，我个人更喜欢这样的动态 SQL，而不是`sp_msforeachdb`：

```
DECLARE @sql NVARCHAR(MAX) = N'';

SELECT @sql += CHAR(13) + CHAR(10) + 'UNION ALL 
    SELECT ''' + name + ''', s.name, t.name
    FROM ' + QUOTENAME(name) + '.sys.tables AS t
    INNER JOIN ' + QUOTENAME(name) + '.sys.schemas AS s
    ON t.schema_id = s.schema_id'
    FROM sys.databases
    WHERE database_id > 4;

SET @sql = STUFF(@sql, 1, 13, '');

PRINT @sql;

-- EXEC sp_executesql @sql; 
```

# asp.net - 插入桥表实体框架

> ID：10837853
> 
> 赞同：1
> 
> 时间：2012-05-31T16:48:35.500
> 
> 标签：asp.net, visual-studio, entity-framework, entity-relationship, junction-table

**大家**好，
我正在学习使用 EF 进行攀爬，我对使用 EF 的 CRUD 有基本的了解，但是现在我有一个具有导航属性的表（我怀疑是桥表），所以我需要添加价值桥表，我想我可以用导航属性来做。

**问题解释：**
*原始部分数据库图* ![在此处输入图像描述](../Images/3b4f6cb97572a8fcca4ecb6fe4184fd4.png)

*部分 EF 模型图*
![在此处输入图像描述](../Images/3771d08f10560cfe10e4f62743240c7d.png)

**我写的代码：**

```
 protected void BtnAddUser_Click(object sender, EventArgs e)
    {
        DBEntities entities = new DBEntities();
        var usr = new User();
        //I thought I would add an Roles object into usr.UserRoles.Add(usrRoles);
        //but UserRoles have only two fields ,RoleTypeId and UserId 
        //var usrRoles = new Roles() 
        //{Id=0,RoleDescription="dfdfdf",RoleType="WebSite Admin"}; 

        usr.UserName = TxtbxUserName.Text;
        usr.Password = TxtBxPassword.Text;
        usr.Email = TxtbxEmail.Text;
        usr.CreateDate = DateTime.Now;
        usr.LastActivityDate = DateTime.Now;
        usr.IsEnabled = true;

        //What to Add in the .Add method
        usr.UserRoles.Add(

        entities.User.AddObject(usr);
        int result = entities.SaveChanges();
        LblMsg.Text = result == 1 ? "User created successfully." : "An error occured    ,please try later.";

        entities.Dispose();
    } 
```

**更新（到目前为止我已经尝试过）：**
我从角色表中获取“网站管理员”角色并将其放入`ObjectContext.UserRoles.Add(UserRoleWebsiteAdmin);` 所以我在代码中所做的，

```
 //Fetch WebsiteAdmin from Roles
        var userRole = from usrRole in entities.Roles
                       where usrRole.Id == 1
                       select usrRole;

        usr.UserName = TxtbxUserName.Text;
        //same old code of usr.Property = someTextBox
        //I have tried to type cast it LinqtoEntities result into Roles
        usr.UserRoles.Add((Roles)userRole); 
```

*产生异常*
![在此处输入图像描述](../Images/41cbf05c30147d0c9086f51455ea10a0.png)

**PS：**如果您需要更多说明，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T22:03:44.880

也许您可以使用`using` [http://msdn.microsoft.com/en-us/library/yh598w02.aspx](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)和对象初始化程序[http://msdn.microsoft.com/en-us/library/bb384062.aspx](http://msdn.microsoft.com/en-us/library/bb384062.aspx)以获得更好的可读性，所以：

```
using(DBEntities entities = new DBEntities())
{
       //Make user object
       var user = new User{
            UserName = TxtbxUserName.Text,
            Password = TxtBxPassword.Text,
            Email = TxtbxEmail.Text,
            CreateDate = DateTime.Now,
            LastActivityDate = DateTime.Now,
            IsEnabled = true
        };

       //Fetch type of Role from Roles table
       var userRole = entities.Roles.Where(x=>x.usrRole.Id ==1).Single();
       user.UserRoles.Add(userRole);

       entities.User.AddObject(user);
       int result = entities.SaveChanges();
       LblMsg.Text = result == 2 ? "User created succesfully." : "An error occured ,please try later.";
} 
```

问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T21:00:06.830

好吧，谢谢大家...这是我所做的并且有效，

```
 DBEntities entities = new DBEntities();
       //Make user object
       var usr = new User();
       //Fetch type of Role from Roles table
       var userRole = (from usrRole in entities.Roles
                       where usrRole.Id == 1
                       select usrRole).Single();
        //copy user related info from textboxes
        usr.UserName = TxtbxUserName.Text;
        usr.Password = TxtBxPassword.Text;
        usr.Email = TxtbxEmail.Text;
        usr.CreateDate = DateTime.Now;
        usr.LastActivityDate = DateTime.Now;
        usr.IsEnabled = true;

        usr.UserRoles.Add(userRole as Roles);

        entities.User.AddObject(usr);
        int result = entities.SaveChanges();
        LblMsg.Text = result == 2 ? "User created succesfully." : "An error occured ,please try later.";

        entities.Dispose(); 
```

# css - Wordpress 中的菜单样式

> ID：10837855
> 
> 赞同：0
> 
> 时间：2012-05-31T16:48:41.943
> 
> 标签：css, wordpress, menu, submenu

我在 wordpress.stackexchange.com 上发布了这个问题，但他们关闭了它并指出我在这里发帖。

我不确定这是否适合提出此类问题，但我在这里没有找到任何与 CSS 相关的部分。

请看下图。

![在此处输入图像描述](../Images/fdc79b30baf1873fab0b146c95cfce78.png)

目前我的菜单类似于 A，但我希望它像 B。我还想在子菜单中将分隔符的颜色从黑色更改为绿色。无论是否选择了子菜单页面，我都只希望在子菜单上产生这种效果。我怎样才能做到这一点？

这是从我的 style.css 中选择的代码：

```
.menu {
    font: normal 13px Arial, sans-serif;
    background: url() repeat-x 0 -80px;
    width: 100%;
    height: 35px;
    position: relative; /* Required for positioning of sub-menus */
}
.menu li ul {
    display: none;  /* Required to hide menu when inactive */
    position: absolute;  /* Position the menu below and to the far left */
    top: 50px;
    left: 0;
}
/* This is the rule that displays sub-menus when a parent link is clicked */
.menu li.current-menu-parent ul, .menu li.current-menu-item ul {
    display: block;
}
.menu li {
    float: left;
    margin: 0;
    padding: 0;
    font-weight: bold;
    border-right:#3c3c3c solid 1px; 
}
.menu li a {
    float: left;
    display: block;
    color: #fff;
    background: url() repeat-x 100% 0;
    padding: 12px 25px;
    text-decoration: none;
}
.menu li a:hover {
    background-position: 100% -160px;
    color: #fff;
}
/* Styling for current parent item */
.menu li.current-menu-item a, .menu li.current-menu-parent a{
    background: url() repeat-x scroll left bottom #83C839;
}
/* Styling for sub-menus */
.menu li ul {
    width: 805px;
    background: url() repeat-x 0 -120px;
    border: 1px solid #83C839;
    border-style: none none solid;
    border-width: 3px;
}
.menu li ul li {
    padding: 6px 0;
}
.menu li.current-menu-item ul li a, .menu li.current-menu-parent ul li a {
    background: url() repeat-y right center;
    color: #666666;
    padding: 12px 25px;
    margin: -6px 0;
}
    .menu li ul li a:hover {
    color: #000;
}
/* Styling for current page sub-menu links */
.menu li.current-menu-parent ul li.current-menu-item a, .menu li.current-menu-parent ul li.current-menu-item a:hover {
    background: url("") repeat-x scroll left bottom #83C839;
    color: #FFFFFF;
} 
```

我在 Wordpress 主题中使用此代码。我的代码基于[WordPress 教程 - 自定义菜单代码中的当前和父菜单项](http://www.designchemical.com/blog/index.php/wordpress-tips/wordpress-tutorial-current-parent-menu-items-in-custom-menus/)，我根据需要对其进行了修改。

# ruby-on-rails - Anemone 可以抓取本地存储在我的硬盘上的 html 文件吗？

> ID：10837856
> 
> 赞同：2
> 
> 时间：2012-05-31T16:48:44.517
> 
> 标签：ruby-on-rails, ruby, web-crawler, scrape, anemone

我希望将在线的几万页政府数据（在几千个文件夹中）收集在一起，并将它们全部放入一个文件中。为了加快这个过程，我想我会先把网站下载到我的硬盘上，然后再用 Anemone + Nokogiri 之类的东西来抓取它。当我使用政府网站的在线 URL 尝试示例代码时，一切正常，但是当我将 URL 更改为我的本地文件路径时，代码运行，但没有产生任何输出。这是代码：

```
url="file:///C:/2011/index.html"

Anemone.crawl(url) do |anemone|
  titles = []
  anemone.on_every_page { |page| titles.push page.doc.at

('title').inner_html rescue nil }
  anemone.after_crawl { puts titles.compact }
end 
```

因此，本地文件名不会输出任何内容，但如果我插入相应的在线 URL，它会成功运行。Anemone 是否以某种方式无法抓取本地目录结构？如果没有，是否有其他建议的方法来进行这种爬行/抓取，或者我应该在网站的在线版本上简单地运行 Anemone？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:44:52.860

这种方法有几个问题

1.  Anemone 期望一个网址发出 http 请求，而您正在向它传递一个文件。您可以改为使用 nokogiri 加载文件并通过它进行解析

2.  文件上的链接可能是完整的 url 而不是相对路径，在这种情况下，您仍然需要发出 http 请求

您可以做的是在本地下载文件，而不是使用 nokogiri 遍历它们并将链接转换为本地路径以供 Nokogiri 加载

# ruby-on-rails-3.2 - 使用 Rails 3.2 进行 rake 测试时，如何找出错误是什么？

> ID：10837857
> 
> 赞同：0
> 
> 时间：2012-05-31T16:48:51.327
> 
> 标签：ruby-on-rails-3.2

我开始认为它是我正在使用 ruby​​-1.9.3-p125 的 ruby​​ 版本，或者当你的新宝石很难分辨时。我正在根据《Agile Web Development with Rails 4th edition》一书构建一个购物车应用程序。如果有谁能提供帮助，我将不胜感激，谢谢

```
new-host:depot Tony$ rake test:units
/Users/Tony/work/depot/test/unit/product_test.rb:1:in `test': wrong number of arguments (1 for 2) (ArgumentError)
    from /Users/Tony/work/depot/test/unit/product_test.rb:1:in `<top (required)>'
    from /Users/Tony/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.2/lib/active_support/dependencies.rb:251:in `require'
    from /Users/Tony/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.2/lib/active_support/dependencies.rb:251:in `block in require'
    from /Users/Tony/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.2/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /Users/Tony/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.2/lib/active_support/dependencies.rb:251:in `require'
    from /Users/Tony/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:10:in `block (2 levels) in <main>'
    from /Users/Tony/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:9:in `each'
    from /Users/Tony/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:9:in `block in <main>'
    from /Users/Tony/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:4:in `select'
    from /Users/Tony/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:4:in `<main>'
rake aborted!
Command failed with status (1): [/Users/Tony/.rvm/rubies/ruby-1.9.3-p125...] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T19:38:11.120

我一直在处理同样的错误几个小时，希望这会有所帮助

你的 test/unit/product_test.rb 应该是这样的

```
class PostTest < ActiveSupport::TestCase
    test "product attributes must not be empty" do
      product = Product.new
      assert product.invalid?
      assert product.errors[:title].any?
      assert product.errors[:description].any?
      assert product.errors[:price].any?
      assert product.errors[:image_url].any?
    end
end 
```

# c# - 如何在查询 refs 时排除 stash？

> ID：10837862
> 
> 赞同：2
> 
> 时间：2012-05-31T16:49:08.800
> 
> 标签：c#, libgit2, libgit2sharp

我正在尝试查询提交：

```
repo.Commits.QueryBy(new LibGit2Sharp.Filter { Since = repo.Refs }).Take(100) 
```

否则没关系，但它也会返回 stash。我怎样才能排除藏匿处？我知道，当我遍历结果时，我猜我可以忽略它们，但是我不会像我想要的那样拥有 100 个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:59:37.950

类型的`Since`和`Until`属性`Filter`对于它们的价值是相当宽容的。

根据他们的文件

> 可以是包含要使用的 sha 或引用规范名称的**字符串、** **Branch**、**Reference**、**Commit**、**Tag**、**TagAnnotation**、**ObjectId**，甚至是上述所有内容的混合集合。

基本上，`Since = repo.Refs`意味着“*在枚举指向的提交时，**我想从存储库的**每个***引用中进行 revwalk” 。

与此类似，`git log --all`确实会考虑*分支*、*标签*、*存储*、*注释*……

如果您愿意缩小参考范围，则必须选择`Since`要重视的内容。

*   `Since = repo.Branches.Where(b => !b.IsRemote)`
*   `Since = new object[] { repo.Branches["br2"], "refs/heads/master", new ObjectId("e90810b") }`

例如，为了只考虑分支和标签，您可以使用

`Since = new object[]{ repo.Branches, repo.Tags }`

# python - 独立应用程序上的 Django ORM

> ID：10837863
> 
> 赞同：4
> 
> 时间：2012-05-31T16:49:13.377
> 
> 标签：python, django, orm

我按照这个[链接](https://stackoverflow.com/questions/937742/use-django-orm-as-standalone)在 python 中的独立应用程序上使用了 Django 的 ORM。manage.py sql 'application_name' 和 manage.py syncdb 运行良好，并且在我执行 syncdb 时创建了表。我遇到的问题是，当我运行将处理 DB 事务的实际脚本（在本例中为 dparser.py）时，我遇到了“TypeError：相对导入需要 'package' 参数”。下面是堆栈跟踪：

```
Traceback (most recent call last):
  File "dparser.py", line 23, in <module>
    from dmodel.models import *
  File "/home/<user>/d/dapp/dmodel/models.py", line 1, in <module>
    from django.db import models
  File "/usr/local/lib/python2.7/site-packages/django/db/__init__.py", line 11, in <module>
    if DEFAULT_DB_ALIAS not in settings.DATABASES:
  File "/usr/local/lib/python2.7/site-packages/django/utils/functional.py", line 184, in inner
    self._setup()
  File "/usr/local/lib/python2.7/site-packages/django/conf/__init__.py", line 42, in _setup
    self._wrapped = Settings(settings_module)
  File "/usr/local/lib/python2.7/site-packages/django/conf/__init__.py", line 93, in __init__
    mod = importlib.import_module(self.SETTINGS_MODULE)
  File "/usr/local/lib/python2.7/site-packages/django/utils/importlib.py", line 28, in import_module
    raise TypeError("relative imports require the 'package' argument")
TypeError: relative imports require the 'package' argument 
```

以下是我的 settings.py、models.py 和 dparser.py 的内容：

设置.py：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql',   
        'NAME': 'd',
        'USER': 'root',
        'PASSWORD': '<password>',
        'HOST': 'localhost',
        'PORT': '3306',
    }
}
INSTALLED_APPS = ("dapp.dmodel",) 
```

模型.py：

```
from django.db import models
from django.db.models import Max

class Topics(models.Model):
     topic_id = models.AutoField(primary_key=True)
     topic = models.CharField(max_length=1000)

class Links(models.Model):
     link_id = models.AutoField(primary_key=True)
     topic = models.ForeignKey(Topics)
     link = models.CharField(max_length=1000)

def getLastId(tag):
     ...
     return lastid 
```

dparser.py（部分）：

```
from django.conf import settings
os.environ['DJANGO_SETTINGS_MODULE'] = ".settings.py"
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql',   
        'NAME': 'd',
        'USER': 'root',
        'PASSWORD': '<password>',
        'HOST': 'localhost',
        'PORT': '3306',
    }
}
INSTALLED_APPS = ("dapp.dmodel",)

from dmodel.models import * # --> This is were the exception occurs 
```

希望有人可以在这里帮助我。提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-01T14:25:24.470

`django.utils.importlib.py`查看引发 execption的代码，您会发现您的设置文件名导致了问题：

```
if name.startswith('.'):
    if not package:
        raise TypeError("relative imports require the 'package' argument") 
```

不要`.settings.py`用作设置文件的名称，请使用不以“。”开头的名称。它将解决这个特定的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T19:33:13.593

我猜你需要做

```
from dapp.dmodel.models import * 
```

或设置`PYTHONPATH`or`sys.path`以包含 dapp 文件夹。

# dynamic - 菜单悬停效果

> ID：10837867
> 
> 赞同：1
> 
> 时间：2012-05-31T16:49:33.993
> 
> 标签：dynamic, menu, hover, effect

我想在此演示页面[http://themeforest.net/item/mazine-wordpress-theme-a-wp-ecommerce-theme/full_screen_preview/198602上创建类似于左侧类别菜单的悬停效果](http://themeforest.net/item/mazine-wordpress-theme-a-wp-ecommerce-theme/full_screen_preview/198602)

我尝试添加 padding-left:7px; 在 css 文件中，但这看起来不一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T16:56:50.553

不确定您到底在问什么，但如果它是关于当您将鼠标移到列表项上时如何滑动一点，请查看[此演示](http://jsfiddle.net/TGNr7/)。它使用 CSS3 过渡。

```
<ul id="menu">
    <li>Item 1</li>
    <li>Item 2</li>
    <li>Item 3</li>
</ul> 
```

​</p>

```
#menu li {
    -webkit-transition:all 0.2s ease-in-out;
    -moz-transition:all 0.2s ease-in-out;
    -o-transition:all 0.2s ease-in-out;
    -ms-transition:all 0.2s ease-in-out;    
    transition:all 0.2s ease-in-out;
}
#menu li:hover {
    padding-left:7px;
} 
```

​</p>

更多信息和演示：

*   [http://www.w3schools.com/css3/css3_transitions.asp](http://www.w3schools.com/css3/css3_transitions.asp)
*   [http://net.tutsplus.com/tutorials/html-css-techniques/css-fundametals-css-3-transitions/](http://net.tutsplus.com/tutorials/html-css-techniques/css-fundametals-css-3-transitions/)

# ruby-on-rails-3 - Rails 3、Uploadify 和 Carierwave

> ID：10837869
> 
> 赞同：1
> 
> 时间：2012-05-31T16:49:47.427
> 
> 标签：ruby-on-rails-3, uploadify, carrierwave

我正在尝试在服务器上使用 Carrierwave 并在客户端上使用 Uploadify 来实现上传器。从客户端来看，它似乎一切正常，在服务器上，记录保存在数据库中，但物理上传的文件永远不会保存到文件系统中。请记住，我是 Rails 的新手。

这是我的上传者：

```
class ShapefileUploader < CarrierWave::Uploader::Base

  storage :file

  # simple path for debugging
  def store_dir
    "uploads" 
  end

end 
```

我的模型：

```
class DataRecord < ActiveRecord::Base

  # not too sure if this belongs here at all, documentation is not too specific.
  require 'carrierwave/orm/activerecord'

  mount_uploader :shapefile, ShapefileUploader

end 
```

我从 Carrierwave 文档中没有完全理解的一件事是关于确保在加载 ORM 后加载 CarrierWave 的部分。我不完全明白它的意思。

我的控制器：

```
class DataRecordsController < ApplicationController
skip_before_filter :verify_authenticity_token, :only => [:update, :create]

  def index
   @folder = Folder.find(params[:folder_id])
   @data_types = DataType.all
  end 

  def create
    data_record = DataRecord.new({:shapefile => params[:Filedata], :folder_id =>    params[:folder_id], :user_file_name => params[:Filename], :data_type_id => 6})
    data_record.save!
  end

  def update

  end

end 
```

在创建操作中，除了实际文件上传我手动设置用于调试的其余数据。

这一切似乎都没有任何错误。

这是发布的数据：

```
Parameters: {"Filename"=>"id_rsa.pub", "Filedata"=>#<ActionDispatch::Http::UploadedFile:0x007fc67836eb88 @original_filename="id_rsa.pub",   @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"Filedata\"; filename=\"id_rsa.pub\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<File:/tmp/RackMultipart20120531-4919-147n4qu>>, "Upload"=>"Submit Query",  "folder_id"=>"74"} 
```

SQL插入：

```
INSERT INTO "data_records" ("data_type_id", "folder_id", "shapefile", "status", "uploaded_date_time", "user_file_name", "validated", "validation_results", "validation_to_send") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["data_type_id", 6], ["folder_id", 74], ["shapefile", "id_rsa.pub"], ["status", 0], ["uploaded_date_time", nil], ["user_file_name", "id_rsa.pub"], ["validated", 0], ["validation_results", nil], ["validation_to_send", nil]] 
```

我知道在 Flash 丢弃 cookie 方面存在一些问题，但我认为我已经通过在创建操作上跳过检查真实性令牌来解决此问题以进行调试。我已将上传文件夹的安全权限更改为世界读/写。我在 github [Carrierwave](https://github.com/jnicklas/carrierwave)文档中遇到的另一个困惑是以下代码：

```
u.avatar = File.open('somewhere') 
```

这是必需的吗？如果是这样，为什么以及它的作用是什么？

帮助将不胜感激。谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T03:06:36.413

弄清楚了！上传的文件将被放置到 /public/uploads。可能是一个新手错误，但如果在文档中更好地解释这一点会很好。

# php - 一次将 $_POST 发送到 2 个 php 文件

> ID：10837872
> 
> 赞同：0
> 
> 时间：2012-05-31T16:50:09.553
> 
> 标签：php, post

我不知道如何解决发送 $_POST 的问题。我想在 example.com 上填写表格

```
//at example.com
<form action="foo.php" method="post" >
<input name="bar1" type="text" />
<input name="bar2" type="text" />
<input name="bar3" type="text" />
<input value="Send" type="submit" />
</form> 
```

然后转到 foo.php ：

```
<?php //foo.php
echo 'added: <p>'.$_POST['bar1'].'<br />'.$_POST['bar2'].'<br />'.$_POST['bar3']; 
?> 
```

同时它也发送

```
$_POST['bar1'], $_POST['bar2'], $_POST['bar3'] 
```

到 exampledomain.com/foobar.php 可以将其保存到文件中 - 这不是问题。

我不知道如何同时向两个 php 脚本发送信息 - 一个是外部脚本。我想我必须以某种方式在 foo.php 中发送它

有一种解决方案 - 重定向到 foo.php 内的 exampledomain.com/foobar.php 但在我的情况下这是不可接受的 - 我想在不让用户退出 example.com 的情况下这样做

在此先感谢您，希望您能理解我的问题-如果不只是提出评论

编辑：基于 Pete Herbert Penito 的回答：

```
 <?php //inside foo.php
 $url = 'http://exampledomain.com/foobar.php';
 $fields_string='';
 foreach($_POST as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
 rtrim($fields_string,'&');

 //open connection
 $ch = curl_init();

 //set the url, number of POST vars, POST data
 curl_setopt($ch,CURLOPT_URL,$url);
 curl_setopt($ch,CURLOPT_POST,count($_POST));
 curl_setopt($ch,CURLOPT_POSTFIELDS,$fields_string);

 //execute post
 $result = curl_exec($ch);

 //close connection
 curl_close($ch);

  ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T16:54:19.583

我会使用 CURL 来构造一个发布请求：

```
<?php
 // these variables would need to be changed to be your variables 
 // alternatively you could send the entire post constructed using a foreach
 if(isset($_POST['Name']))     $Name   = $_POST['Name'];
 if(isset($_POST['Email']))   $Email   = $_POST['Email'];
 if(isset($_POST['Message']))   $Message= htmlentities($_POST['Message']);

 $Curl_Session = curl_init('http://www.site.com/cgi-bin/waiting.php');
 curl_setopt ($Curl_Session, CURLOPT_POST, 1);
 curl_setopt ($Curl_Session, CURLOPT_POSTFIELDS, "Name=$Name&Email=$Email&Message=$Message");
 curl_setopt ($Curl_Session, CURLOPT_FOLLOWLOCATION, 1);
 curl_exec ($Curl_Session);
 curl_close ($Curl_Session);
?> 
```

来自链接：

[http://www.askapache.com/php/sending-post-form-data-php-curl.html](http://www.askapache.com/php/sending-post-form-data-php-curl.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T16:51:44.280

在你的`foo.php`：

```
<?php
include 'http://exampledomain.com/foobar.php'; 
```

**注意：**您需要`allow_url_fopen`在`php.ini`文件中启用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T16:57:06.463

您将需要使用 javascript ajax 执行 POST 之一。

然后是真正的帖子，它将像往常一样重定向浏览器。

[http://www.w3schools.com/jquery/ajax_post.asp](http://www.w3schools.com/jquery/ajax_post.asp)

```
$(selector).post(url,data,success(response,status,xhr),dataType) 
```

# .net - 用于弹性搜索的可靠 .NET API

> ID：10837880
> 
> 赞同：0
> 
> 时间：2012-05-31T16:50:57.150
> 
> 标签：.net, api, elasticsearch

我将为我的基于 .NET 的网站实施 Elastic Search。我决定使用 Elastic Search 作为搜索解决方案。我正在寻找有关将数据提供给索引然后读取该数据的最佳方法的建议？数据读取和写入都是基于 JSON 的。

我看过一些开源客户端，但我不相信它们的可靠性。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T19:47:11.943

我最终为此编写了自己的小库。这些库仍然不可靠，并且正在进行中。

# php - 重定向在浏览器栏中给了我 2 个地址。所以我收到一个错误。想不通

> ID：10837884
> 
> 赞同：0
> 
> 时间：2012-05-31T16:51:16.487
> 
> 标签：php, forms, redirect

我在浏览器窗口中收到 2 个地址，所以我收到错误消息。这是在 GoDaddy 上。我在想也许 php 中的更改可能会解决它，因为它似乎正在提出重定向来自的域。

示例：my site.com - 在提交表单中的提交按钮后尝试重定向到外部站点。

它会将我重定向到： [http://www.mysite/](http://www.mysite/) http://external_site 而不仅仅是：external_site.com

任何帮助都会很棒，因为我对此完全迷失了……</p>

重定向位于表单的隐藏字段中。它使用的是 GoDaddy 的 php，如下所示：

```
<?php
$request_method = $_SERVER["REQUEST_METHOD"];
if($request_method == "GET"){
  $query_vars = $_GET;
} elseif ($request_method == "POST"){
  $query_vars = $_POST;
}
reset($query_vars);
$t = date("U");

$file = $_SERVER['DOCUMENT_ROOT'] . "/../data/gdform_" . $t;
$fp = fopen($file,"w");
while (list ($key, $val) = each ($query_vars)) {
 fputs($fp,"<GDFORM_VARIABLE NAME=$key START>\n");
 fputs($fp,"$val\n");
 fputs($fp,"<GDFORM_VARIABLE NAME=$key END>\n");
 if ($key == "redirect") { $landing_page = $val;}
}
fclose($fp);
if ($landing_page != ""){
header("Location: http://".$_SERVER["HTTP_HOST"]."/$landing_page");
} else {
header("Location: http://".$_SERVER["HTTP_HOST"]."/");
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:16:00.707

`$_SERVER["HTTP_HOST"]`在第一个标题中删除...

```
<?php
    /* above your code */ 
    if ($landing_page != ""){
      header("Location: $landing_page");  // If the http:// is missing don't forget to add it
    } else {
      header("Location: http://".$_SERVER["HTTP_HOST"]."/");
    }
?> 
```

# visual-studio-sdk - VS2010 自定义工具/插件可再发行许可证

> ID：10837894
> 
> 赞同：0
> 
> 时间：2012-05-31T16:52:04.270
> 
> 标签：visual-studio-sdk, redistributable, customtool

我已经构建了一个自定义工具，它源自 VS2010 SDK 中包含的一个程序集中定义的 BaseCodeGeneratorWithSite 类。有谁知道在不需要最终用户下载整个 SDK 的情况下重新分发它的正确程序是什么？

我可以在安装程序中包含所需的程序集，但我不确定 SDK 许可证是否允许这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T06:58:17.787

你可以编写自己的实现，就像[这里](http://www.koders.com/csharp/fidEBCB57E35AB2C454BEBADE7446F4BE99D19E843D.aspx?s=idef%3afile)的人为 PInvoke 工具所做的那样。

# machine-learning - 如何使用 SGD 进行时间序列分析

> ID：10837897
> 
> 赞同：4
> 
> 时间：2012-05-31T16:52:17.730
> 
> 标签：machine-learning, signal-processing, time-series, classification, regression

是否可以使用[随机梯度下降](http://en.wikipedia.org/wiki/Stochastic_gradient_descent)进行时间序列分析？

我最初的想法是，给定一系列 (t, v) 对，我希望 SGD 回归器预测与 t+1 关联的 v，将日期/时间转换为整数值，并在此列表上训练回归器使用铰链损失函数。这可行吗？

编辑：这是在 scikit-learn 中使用[SGD 实现的示例代码。](http://scikit-learn.org/dev/modules/generated/sklearn.linear_model.SGDRegressor.html)但是，它无法正确预测简单的线性时间序列模型。它似乎所做的只是计算训练 Y 值的平均值，并将其用作对测试 Y 值的预测。SGD 只是不适合时间序列分析，还是我的公式不正确？

```
from datetime import date
from sklearn.linear_model import SGDRegressor

# Build data.
s = date(2010,1,1)
i = 0
training = []
for _ in xrange(12):
    i += 1
    training.append([[date(2012,1,i).toordinal()], i])
testing = []
for _ in xrange(12):
    i += 1
    testing.append([[date(2012,1,i).toordinal()], i])

clf = SGDRegressor(loss='huber')

print 'Training...'
for _ in xrange(20):
    try:
        print _
        clf.partial_fit(X=[X for X,_ in training], y=[y for _,y in training])
    except ValueError:
        break

print 'Testing...'
for X,y in testing:
    p = clf.predict(X)
    print y,p,abs(p-y) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-03-23T08:54:29.013

对于未缩放的输入参数，sklearn 中的 SGDRegressor 在数值上不稳定。为了获得良好的结果，强烈建议您缩放输入变量。

```
from datetime import date
from sklearn.linear_model import SGDRegressor

# Build data.
s = date(2010,1,1).toordinal()
i = 0
training = []
for _ in range(1,13):
    i += 1
    training.append([[s+i], i])
testing = []
for _ in range(13,25):
    i += 1
    testing.append([[s+i], i])

from sklearn.preprocessing import StandardScaler
scaler = StandardScaler()
X_train = scaler.fit_transform([X for X,_ in training]) 
```

在训练 SGD 回归器之后，您必须相应地缩放测试输入变量。

```
clf = SGDRegressor()
clf.fit(X=X_train, y=[y for _,y in training])

print(clf.intercept_, clf.coef_)

print('Testing...')
for X,y in testing:
    p = clf.predict(scaler.transform([X]))
    print(X[0],y,p[0],abs(p[0]-y)) 
```

结果如下：

```
[6.31706122] [3.35332573]
Testing...
733786 13 12.631164799851827 0.3688352001481725
733787 14 13.602565350686039 0.39743464931396133
733788 15 14.573965901520248 0.42603409847975193
733789 16 15.545366452354457 0.45463354764554254
733790 17 16.51676700318867 0.48323299681133136
733791 18 17.488167554022876 0.5118324459771237
733792 19 18.459568104857084 0.5404318951429161
733793 20 19.430968655691295 0.569031344308705
733794 21 20.402369206525506 0.5976307934744938
733795 22 21.373769757359714 0.6262302426402861
733796 23 22.34517030819392 0.6548296918060785
733797 24 23.316570859028133 0.6834291409718674 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T08:10:42.383

时间序列预测的选择方法取决于您对时间序列的了解。如果您为您的任务选择特定的方法，您总是会对信号的性质和生成信号的系统类型做出隐含的假设。任何方法始终是系统的模型。您对信号和系统的先验了解越多，您就越能对其进行建模。

例如，如果您的信号具有随机性，通常 ARMA 过程或卡尔曼滤波器是一个不错的选择。如果这些都失败了，其他更具确定性的模型可能会有所帮助，因为你有一些关于你的系统的信息。

# ruby - 默认的 Ruby LOAD_PATH 是如何确定的？

> ID：10837900
> 
> 赞同：12
> 
> 时间：2012-05-31T16:52:24.763
> 
> 标签：ruby, require, load-path

假设我编译自己的新 Ruby（MRI 1.9.3），默认的 LOAD_PATH 是什么，它是如何计算的？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-31T21:55:02.310

在我的机器上，初始加载路径如下所示：

```
$ ruby -e 'puts $LOAD_PATH'
/Users/matt/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1
/Users/matt/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/x86_64-darwin10.8.0
/Users/matt/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby
/Users/matt/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/vendor_ruby/1.9.1
/Users/matt/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/vendor_ruby/1.9.1/x86_64-darwin10.8.0
/Users/matt/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/vendor_ruby
/Users/matt/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1
/Users/matt/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin10.8.0 
```

有了`grep`，对 Ruby 源代码的调查导致了[in的](https://github.com/ruby/ruby/blob/v1_9_3_194/version.c#L67-96)[定义`ruby_initial_load_paths[]``version.c`](https://github.com/ruby/ruby/blob/v1_9_3_194/version.c#L67-96)（这是在 Ruby 1.9.3 上）。其中第一个适用（既未设置`NO_INITIAL_LOAD_PATH`也`RUBY_SEARCH_PATH`未设置）是[`RUBY_SITE_LIB2`](https://github.com/ruby/ruby/blob/trunk/version.c#L74). 查看该定义上面的定义，[我们看到](https://github.com/ruby/ruby/blob/trunk/version.c#L43)：

```
#define RUBY_SITE_LIB2              RUBY_SITE_LIB    "/"RUBY_LIB_VERSION 
```

[反过来](https://github.com/ruby/ruby/blob/trunk/version.c#L36)：_

```
#define RUBY_SITE_LIB RUBY_LIB_PREFIX"/site_ruby" 
```

在这个定义链之后，很明显这对应于我上面加载路径中的第一个条目。类似地，进入此变量的其他常量对应于其他加载路径条目。

该`ruby_initial_load_paths[]`变量用于 in [`ruby_init_loadpath_safe()`，`ruby.c`](https://github.com/ruby/ruby/blob/v1_9_3_194/ruby.c#L339)其中为进程设置了实际的加载路径。

因此，您的问题的答案是`#define`，根据构建的配置方式，初始加载路径是在编译时使用一些 s 设置的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T16:56:27.280

您的编译在基于 *nix 的系统上创建一个 lib 目录，通常是

```
/usr/lib/ruby/X.Y.Z 
```

XYZ 代表您的 ruby​​ C api 版本的版本号。

# c# - 为什么接口不能指定静态方法？

> ID：10837906
> 
> 赞同：42
> 
> 时间：2012-05-31T16:52:50.920
> 
> 标签：c#, interface, static

我知道这个问题被问了一遍又一遍，但我似乎找不到足够好的答案。因此，为了弄清楚我想知道什么，我将把它分成两个问题：

1.  为什么接口不能有静态方法签名？我将尝试抢占非答案，询问为什么在世界上我想用以下方法做到这一点：我希望能够静态`GetDbConnectionType()`调用`SqliteCodeGenerator`and `MssqlCodeGenerator`：

    ```
    interface ICodeGenerator
    {
        // this is the method I would like to be static:
        string GetDbConnectionType();
    }

    abstract class CodeGeneratorBase : ICodeGenerator
    {
        public abstract string GetDbConnectionType();

        public void GenerateSomeCode(StringBuilder s)
        {
            s.AppendLine("var foo = new " + GetDbConnectionType() + "();");
        }
    }

    class SqliteCodeGenerator : CodeGeneratorBase
    {
        public override string GetDbConnectionType()
        {
            return "SQLiteConnection";
        }
    }

    class MssqlCodeGenerator : CodeGeneratorBase
    {
        public override string GetDbConnectionType()
        {
            return "SqlConnection";
        }
    } 
    ```

2.  另一方面，这是第二个问题的问题，如果您知道实现上述目标的好选择，那么无论如何......

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-05-31T16:59:18.913

假设你*可以*在一个接口中指定一个类型必须有一个特定的静态方法......你会怎么称呼它？多态性通过*实例*起作用——而静态成员明确地*不*使用实例。

现在，话虽如此，在*一种*情况下我可以看到静态接口成员工作：泛型类型。例如：

```
// This isn't valid code...
public void Foo<T>() where T : ICodeGenerator
{
    string type = T.GetDbConnectionType();
} 
```

这将调用*具体*类型上的静态成员`T`。

我已经[写了更多关于这个的博客](http://codeblog.jonskeet.uk/2008/08/29/lessons-learned-from-protocol-buffers-part-4-static-interfaces)，但我怀疑好处并不能证明复杂性是合理的。

就替代方案而言 - 通常你会有另一个接口，并且有不同的类型来实现该接口。这在某些情况下效果很好，但在其他情况下却不行。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-07-17T10:37:46.287

@JonSkeet：可以[在 CIL 中创建一个静态接口成员](http://blogs.msdn.com/b/mohamedg/archive/2010/02/07/how-to-create-interfaces-with-static-methods-via-il.aspx)，所以恐怕你的第一句话会产生误导。我认为微软团队在 C# 中省略了它作为设计选择，以鼓励正确使用接口。

获得此功能的最佳方法可能是使用[扩展方法](http://msdn.microsoft.com/en-gb/library/bb383977.aspx)，这些方法将允许您向接口的所有继承者或该接口的特定实现添加方法，但是您需要编写一个单独的类来保存扩展的实现（如果没有计划）很容易忘记的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T17:11:23.433

Jon 的回答几乎涵盖了所有内容，因此我的回答仅包括使用 .NET 配置 API 的可能解决方法。它需要一些语法开销，但它确实为您提供了对实例的静态访问。

```
interface IStorage
{
    void Store(string item);
}

static class Storage
{
    private static readonly IStorage _instance;

    static Storage()
    {
        var storageTypeString = ConfigurationManager.AppSettings["storageTypeString"];
        var storageType = Type.GetType(storageTypeString, true);
        _instance = (IStorage)Activator.CreateInstance(storageType);
    }

    public static void Store(string item)
    {
        _instance.Store(item);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T17:23:29.673

如果一个接口可以指定一个静态类，这可能会有所帮助，这样编译器就会将该类的成员视为该接口的静态成员。因此，不必使用静态类`Enumerable<T>`来获取`Enumerable<T>.Default`，而是可以在语法上指定`IEnumerable<T>.Default`.

如果一个接口可以指定一些这样的静态方法应该以类似于扩展方法的方式使用，但没有与之相关的奇怪的范围规则（因此接口可能看起来为一些成员函数，而不需要所有的实现来提供它们）。

如果结合这样的特性，接口方法可以声明为“可选的”，这将非常有帮助，这样当一个实现提供了一个方法时，它将被使用，而当它没有时，扩展式方法将被自动替换。但是，这可能需要更改 CLR。

在任何情况下，由于接口不包含静态类，最好的办法是提供接口用户会发现有用的静态类，即使编译器会将这些类和接口视为完全独立的实体。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-03T19:26:56.910

我知道这很旧，但实际上您可以使用在名称空间之外的静态类中声明的静态函数。

但他们的方式是你把它放在抽象类中，你只会使函数静态

要从界面执行此操作，请执行此操作

```
public static class Interfacefunction{
  public static string GetDbConnectionType(this ICodeGenerator me)
  {
      // this is the method I would like to be static:
      // you can even get access to me
      return "SQLiteConnection";
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-01T21:49:02.963

我决定使用的一种解决方法（尽管实际上这种方式可能更好）是使用静态实例而不是静态接口。

而不是：

```
// does not compile
ISomeInterface {
   static void DoSomething();
   static bool TestSomething(string pValue);
   // etc... 
}

static class SomeStaticClass : ISomeInterface {
   public static void DoSomething() {
   }

   public static bool TestSomething(string pValue) {
   }
} 
```

定义一个类（如果逻辑必须在与它一起使用的类之间有所不同，则使其具有通用性）：

```
sealed class SomeClass {
   public void DoSomething() {
      // reusable implementation
   }

   public bool TestSomething(string pValue) {
      // reusable implementation
   }
} 
```

并将该类的静态实例提供给您的静态类：

```
static class SomeStaticClass {
   static readonly SomeClass sSomeClass = new SomeClass();
} 
```

唯一的问题是您必须决定是否将属性公开给静态实例：

```
static class SomeStaticClass {
   static readonly SomeClass sSomeClass = new SomeClass();

   public static SomeClass SomeProperty { get { return sSomeClass; } }
}

...

SomeStaticClass.SomeProperty.DoSomething();
if (SomeStaticClass.SomeProperty.TestSomething(someValue))
   ... 
```

或包装其方法：

```
static class SomeStaticClass {
   static readonly SomeClass sSomeClass = new SomeClass();

   public static void DoSomething() {
      sSomeClass.DoSomething();
   }

   public static bool TestSomething(string pValue) {
      sSomeClass.TestSomething(pValue);
   }
}

...

SomeStaticClass.DoSomething();
if (SomeStaticClass.TestSomething(someValue))
   ... 
```

# c# - C# - 如何访问仅给定类类型的静态类变量？

> ID：10837907
> 
> 赞同：3
> 
> 时间：2012-05-31T16:52:54.583
> 
> 标签：c#, xna, reference-counting

这是我第一次在 Stack Overflow 上发帖，所以希望我做的一切都是正确的，你们可以帮忙。

我想知道在 C# 中是否有一种方法可以访问属于一个类的静态变量，当只给出类的类型时。例如：

```
public class Foo
{
    public static int bar = 0;
}

public class Main
{
    public void myFunc(Type givenType)
    {
        int tempInt = ??? // Get the value of the variable "bar" from "Foo"
        Debug.WriteLine("Bar is currently :" + tempInt);
    }
}

// I didn't run this code through a compiler, but its simple enough
// that hopefully you should get the idea... 
```

很难描述需要知道这一点的背景，但我正在 XNA 中制作游戏，并且我正在尝试使用引用计数来降低设计的复杂性。我在游戏中有物体和可以应用效果的道具（留在物体上）。能量提升可能会消失，但它们的影响仍然会留在对象上，我需要跟踪能量提升的任何影响是否仍然存在于对象上（因此，引用计数）。我计划用一个静态整数创建一个“PowerUpEffect”类（针对每种类型的上电），以保存仍然受它影响的对象的数量，但是游戏其余部分的设计不能很好地通过 PowerUpEffect一直到对象，以便它调用 PowerUpEffect 类的方法。

我希望只传递 PowerUpEffect 的类型（使用类似“typeOf()”之类的东西）并使用该类型来引用属于这些类型的静态变量，但我不知道该怎么做，或者它是否可能。

我什至很高兴找到不直接回答这个问题但以简单而优雅的设计解决问题的变通方法。=)

帮助！（谢谢！）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T16:58:26.423

如果你只有 Type 句柄，你可以这样做：

```
var prop = givenType.GetProperty("bar");
var value = prop.GetValue(null); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T05:48:29.287

我会使用 a`Dictionary`而不是，这可能是将一组值映射到另一组值的最简洁方式。如果您将`int`值与`Type`s 相关联，则执行以下操作：

```
public static readonly Dictionary<Type, int> sTypeValues =
   new Dictionary<Type, int>
{
   { typeof(Type1), 5 },
   { typeof(Type2), 10 },
   { typeof(Type3), 2 },
   { typeof(Type4), 3 },
   { typeof(Type5), -7 }
}; 
```

然后你的功能变成：

```
public void myFunc(Type givenType)
{
    int tempInt = sTypeValues[givenType];
    Debug.WriteLine("Bar is currently :" + tempInt);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T17:00:00.160

int tempInt = (int) givenType.GetField("bar").GetValue(null);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T16:55:58.647

如果我让你正确，这可能会给你一些想法：

使用系统；使用 System.Reflection；

```
public class RStatic
{
    private static int SomeNumber {get; set;}
    public static object SomeReference {get; set;}
    static RStatic()
    {
        SomeReference = new object();
        Console.WriteLine(SomeReference.GetHashCode());
    }
}

public class Program
{
    public static void Main()
    {
        var rs = new RStatic();
        var pi = rs.GetType().GetProperty("SomeReference",  BindingFlags.Static | BindingFlags.Public); // i have used GetProperty in my case

        Console.WriteLine(pi.GetValue(rs, null).GetHashCode());

    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T17:00:38.253

好的，所以你有一个 powerups 的集合，并且你希望有一个与这些 powerups 中的每一个相关联的整数。与其拥有很多类，每个类都有一个静态整数，不如拥有一个静态*集合*来保存所有的通电及其相关的整数值。

```
public static class MyPowerupInfo
{
  public static Dictionary<PowerUp, int> PowerUps {get; private set;}
  static MyPowerupInfo
  {
    PowerUps = new Dictionary<PowerUp, int>();
    PowerUps.Add(*some power up object goes here*, 0);
    //TODO add other power ups
  }
} 
```

然后要使用它，您可以执行以下操作：

```
int powerupCount = MyPowerupInfo.PowerUps[wickedAwesomePowerup]; 
```

或者：

```
public static void IncrementPowerup(Powerup powerup)
{
  MyPowerupInfo.PowerUps[powerup] = MyPowerupInfo.PowerUps[powerup]+1;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-31T17:11:52.717

您是否假设您尝试访问的字段的名称（例如，对于“foo”类，字段“bar”）是基于 Type 参数的不同字段？

如果字段的名称是基于有限数量的允许类型已知的，您应该能够使用 switch 语句来确定它。例如：

```
public class Foo
{
    public static int bar = 0;
}

public class Baz
{
    public static int bing = 0;
}

public class Main
{
    public void myFunc(Type givenType)
    {
        switch (givenType.ToString())
        {
            case "Foo":
                Debug.WriteLine("Bar is currently :" + Foo.bar);
                break;
            case "Baz":
                Debug.WriteLine("Bing is currently :" + Baz.bing);
                break;
        }
    }
} 
```

# visual-studio-2010 - 实验实例下不加载VS包

> ID：10837911
> 
> 赞同：0
> 
> 时间：2012-05-31T16:53:42.493
> 
> 标签：visual-studio-2010, vsix, vs-extensibility, vspackage

我已经使用 regpkg.exe 实用程序在 VS 2010 中安装了一个包。

当我使用开关 /rootsuffix Exp启动**Experimental 实例时，会加载包。**

我想仅为实验实例禁用包

即使我在再次启动实验实例时从注册表中删除包注册（10.0Exp 和 10.0Exp_Config），注册表项也会恢复并加载包。似乎实验实例中的注册表项是从主实例继承的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T06:45:00.213

以防万一 - 检查您的自定义包类属性 - 以确保它们是否使用与 Exp hive 相关的值。也许有一些属性错误地指向了主蜂巢。

# jquery - 是否可以编写只能由插件中创建的元素调用的 jquery 方法？

> ID：10837913
> 
> 赞同：0
> 
> 时间：2012-05-31T16:53:55.153
> 
> 标签：jquery, jquery-plugins

对不起，如果这个问题有点不清楚。让我试着解释一下。

我开始学习编写 jQuery 插件。我有一个私有的插件方法，调用方式如下：

```
var $curPgInf = getPgInf($('#content1_0')); 
```

我不知道它在性能方面是否更好，但对我来说似乎更干净（而且我很想知道它是否/如何完成）能够这样称呼它：

```
var $curPgInf = $('#content1_0').getPgInf(); 
```

我知道我可以使用：

```
$.fn.getPgInf = function(obj) {
    // return the page info...
} 
```

但这使功能公开...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:09:02.843

jQuery 插件扩展了 jQuery 对象，因此您添加的每个函数`$-jQuery`都是公共的。
（该`fn`属性是 jQuery 对象的原型。）

在简短的解释之后，答案是，**不**，您不能使用私有函数扩展 jQuery。

# php - 调用未定义函数 mssql_connect() linux 主机

> ID：10837914
> 
> 赞同：1
> 
> 时间：2012-05-31T16:53:57.337
> 
> 标签：php, sql-server, linux, web-hosting

我正在`Godaddy Deluxe Web Hosting`使用`Linux OS`. `PHP`版本是`5.3`.

我收到了这个错误：

```
 Fatal error: Call to undefined function mssql_connect() 
in ... index.php on line ... 
```

那我需要什么：

1.  我已经创建了`php5.ini`文件

2.  我添加了这些选项：

    extension_dir = ./

    扩展=php_mssql.dll

3.  我已经下载了 php_mssql.dll 文件并将其添加到根目录

4.  我已经重新加载了主机。

5.  我没有看到任何变化...

是否可以在 Linux 虚拟主机上使用带有 php5.3 的 mssql？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-07-01T02:01:35.540

在linux上安装

```
apt-get install php5-sybase 
```

检查服务开启

```
php -m | grep mssql 
```

你可以在服务上看到 mssql

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T16:59:49.757

零件

> 使用 Linux 操作系统

和

> 扩展=php_mssql.dll

咬对方恕我直言。在 linux 上，您加载 .so 文件而不是 .dll 文件。我建议改为与 GoDaddy 交谈。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T16:59:48.837

MS = Microsoft，所以默认情况下不在 Linux 上，并且可能很难在 Linux 上安装它并且可用（我自己从未尝试过）。如果您使用 GoDaddy 托管，他们应该拥有基本相同的 MySQL（数据库、表、列、行、SQL 等）。在 PHP Docs 站点上查看 MySQL：[MySQL Manual](http://php.net/manual/en/book.mysql.php)。您可能必须先登录到您的托管后端并手动添加数据库和用户，然后才能连接到它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T19:30:33.243

在使用 Go Daddy 托管的 Linux 上，您无法设置 MSSQL 数据库，这表明您要连接到第三方 MSSQL 数据库。Go Daddy 不允许您连接到第三方数据库。这是不可能的。

# python - 从拆分中提取最后两个字段

> ID：10837917
> 
> 赞同：16
> 
> 时间：2012-05-31T16:54:04.503
> 
> 标签：python

我想从不同长度的变量中提取最后两个字段值。例如，考虑以下三个值：

```
fe80::e590:1001:7d11:1c7e

ff02::1:ff1f:fb6

fe80::7cbe:e61:f5ab:e62 ff02::1:ff1f:fb6 
```

这三行是可变长度的。如果我用分隔符分割每一行，我只想提取最后两个字段值：

也就是说，从三行中，我想要：

```
7d11, 1c7e

ff1f, fb6

ff1f, fb6 
```

这可以使用`split()`吗？我没有任何想法。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-31T16:55:45.563

如果`s`是包含 IPv6 地址的字符串，请使用

```
s.split(":")[-2:] 
```

得到最后两个组件。该`split()`方法将返回所有组件的列表，并且`[-2:]`将对该列表进行切片以仅返回最后两个元素。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-31T17:06:28.147

您可以使用`str.rsplit()`从右侧拆分：

```
>>> ipaddress = 'fe80::e590:1001:7d11:1c7e'
>>> ipaddress.rsplit(':', 2) # splits at most 2 times from the right
['fe80::e590:1001', '7d11', '1c7e'] 
```

这避免了地址第一部分的不必要拆分。

# android - 数据存储的最佳方式

> ID：10837921
> 
> 赞同：0
> 
> 时间：2012-05-31T16:54:19.780
> 
> 标签：android

我有一个带有按钮、9 行和 5 列的表 -> 45 个按钮。每个按钮都具有以下属性：行、周、时间、日期、名称、描述、颜色、房间。存储的最佳方式是什么？我必须使用复杂的 SQLite，还是有更简单的解决方案？我是 Android 新手，因此 SQLite 对我来说并不容易。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:00:03.277

就我个人而言，我会花一些时间来实现 ContentProvider 并使用 SQLite 数据库......但是，您可以使用许多不同的方法，您可以将所有信息保存在私有文件中（因此您可以根据需要对其进行格式化）或使用 SharedPreferences 机制。

您应该在[这里查看](http://developer.android.com/guide/topics/data/data-storage.html)以了解不同的方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T17:08:50.917

假设它是 45 个按钮的静态集，并且不需要永久持久性。有两天可以解决

*   扩展 Button 类并定义您需要的属性
*   使用[setTag](http://developer.android.com/reference/android/view/View.html#setTag%28java.lang.Object%29)将进位内存数据对象与视图对象一起存储。因此，在您的情况下，为每个按钮创建一个[Bundle](http://developer.android.com/reference/android/os/Bundle.html)对象，并使用 setTag 将其存储在按钮视图中。

# iphone - 如何更新 UITableViewCell 绘图

> ID：10837923
> 
> 赞同：0
> 
> 时间：2012-05-31T16:54:28.423
> 
> 标签：iphone, ios, xcode, uitableview, cell

我的应用程序以`UITableView`. 对于每个新闻主题，背景颜色`UITableViewCell`是不同的（`UIView`在我的自定义单元格中添加了一个）。

到目前为止，它有效。但是，如果我按 a`UIBarButton`取消选择一个新闻类别，内容会发生变化，**但背景与以前相同**。

颜色不会改变，因为**单击按钮后单元格不会再次重新加载**。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:57:34.620

在您的`cellForRowAtIndexPath`方法中，请确保您正在设置`UITableViewCell`.

另外，使用`[tableView reloadData];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T18:11:00.153

您可以设置单元格的颜色（根据您的逻辑）：

`- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath`

这将确保每次显示单元格时设置颜色。

# objective-c - NSNumberFormatter 舍入到负零

> ID：10837926
> 
> 赞同：8
> 
> 时间：2012-05-31T16:54:41.900
> 
> 标签：objective-c, cocoa, nsnumberformatter

我`NSNumberFormatter`用来将浮点值格式化为整数字符串，即省略小数部分。我觉得很奇怪，范围`(-0.5, 0)` ^(*open 区间)中的数字最终为`-0`. 由于这个值将显示给用户，我认为负零是不合适的。我已经尝试过各种组合，`numberStyle`但都`roundingMode`没有成功。

有没有办法将`NSNumberFormatter`它们配置为输出`0`，或者我是否必须对该范围进行手动校正？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:25:32.823

我必须自己纠正这一点。我使用 NSNumberFormatter 来显示默认温度`numberStyle`——`NSNumberFormatterNoStyle`将数字四舍五入为整数，`roundingMode`设置为`NSNumberFormatterRoundHalfUp`. 最后，我确实截取了有问题范围内的值并自己四舍五入：

```
- (NSString *)temperature:(NSNumber *)temperature
{
    float f = [temperature floatValue];
    if (f < 0 && f > -0.5)
        temperature = [NSNumber numberWithLong:lround(f)];

    return [self.temperatureFormatter stringFromNumber:temperature];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T19:55:27.967

不，没有办法配置它来做到这一点。

在“10.4 模式”中，NSNumberFormatter 基本上只是包装 CFNumberFormatter（尽管它不是直接的免费桥接包装）。您可以查看 Number Formatter Property Keys 列表，很明显没有什么可以满足您的需求。（在“10.0”模式下可能是可能的；需要一些试验和错误才能找到。但我怀疑你想使用它。）

所以预舍入（正如 Justin Boo 所建议的）可能是你最好的选择。

当然，您可以改为后处理。您想要做什么可能取决于您是否还想将 -0.00 渲染为 0.00，您希望在不使用“-0”的本地化中发生什么，等等。最简单的情况就像这样简单：

```
@interface NSNumberFormatter (NegativeZero)
- (NSString *)stringFromNumberNoNegativeZero:(NSNumber *)number;
@end

@implementation NSNumberFormatter (NegativeZero)
- (NSString *)stringFromNumberNoNegativeZero:(NSNumber *)number {
  NSString *s = [self stringFromNumber:number];
  if ([s isEqualToString:@"-0"]) return @"0";
  return s;
}
@end 
```

但是如果你想要更复杂的东西，它会变得更复杂。

# c# - 正确使用 SqlMembershipProvider Profiles

> ID：10837928
> 
> 赞同：1
> 
> 时间：2012-05-31T16:54:47.453
> 
> 标签：c#, .net, asp.net-mvc-2, sqlmembershipprovider

我正在为我的用户成功读取和写入自定义配置文件数据。然而，由于此配置文件数据存储在数据库中的方式，很难使用这些配置文件值中的任何一个返回查询。

例如，我的个人资料值之一是“FullName”。所以我希望能够带回今天创建的对象列表，以及创建它们的用户的“全名”。在使用 SqlMembershipProvider 之前，我可以加入我的 User 表并带回 FullName 属性。相反，现在我将带回连接的 aspnet_Profile 并使用 PropertyNames 和 PropertyValuesString 属性执行一些字符串操作。

我正在尝试做的事情是正确的还是我以错误的方式解决了这个问题？我什至应该使用 SqlMembershipProvider 吗？

提前感谢您的帮助。

我正在使用 .NET 4 和 MVC 2。

# gnu-screen - screenrc - 从地狱闪烁 hardstatus

> ID：10837929
> 
> 赞同：1
> 
> 时间：2012-05-31T16:54:54.830
> 
> 标签：gnu-screen, screenrc

我从某处复制了几行到我的 .screenrc 中，以提供信息丰富的 hardstatus 行：

```
# An alternative hardstatus to display a bar at the bottom listing the
# windownames and highlighting the current windowname in blue. (This is only
# enabled if there is no hardstatus setting for your terminal)
hardstatus alwayslastline "%{.bW}%-w%{.rW}%n %t%{-}%+w %=%{..G} %H %{..Y} %m/%d %C%a " 
```

根据屏幕[文档](http://www.gnu.org/software/screen/manual/screen.html#String-Escapes)，“闪烁”颜色修饰符是 B。然而，hardstatus 行在任何地方都没有 B……而且它仍然在闪烁！它快把我逼疯了。我查看了其他screenrc，询问了同事，从该状态行左右删除了令牌，但没有什么能阻止它闪烁。

如何在*不*闪烁的情况下获得漂亮的红蓝状态线？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-08T04:31:38.643

我碰巧发现了这种现象。这是一个典型的复合显示问题。在我的环境中，我使用与您类似的 screen hardstatus 配置，并使用 Xshell 作为终端工具。我在Xshell中使用linux，出现这种现象。如果我更改为 xterm，它肯定会消失。因此，尝试更改您的 Xshell 配置。

# c - C端结构列表

> ID：10837932
> 
> 赞同：1
> 
> 时间：2012-05-31T16:55:01.443
> 
> 标签：c, arrays, pointers, struct, null

我想在 C 中制作一个结构列表。在我的程序中，我从文件中读取行并将信息存储在结构中（每行一个结构）。所以我的代码是这样的：

```
struct myStruct *myStructList;

// Here is the parsing thing 
```

而且，在解析结束时，我尝试这样做：

```
myStructList[i] = NULL; 
```

其中 i 是列表中的下一个空闲位置（已使用 realloc 保留）。

这是我得到的错误。

```
incompatible types when assigning to type ‘struct myStruct’ from type ‘void *’ 
```

看来我不能做 NULL 的事情。我的问题是：如果它不为 NULL，我能放什么？我怎么知道列表已经完成？我知道我可以用列表中的元素数量来保持计数器，但我想避免这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T16:57:36.170

在 C 中，与 java 不同 - 数组按值保存元素，而不是按引用保存。

因此，您尝试将指针（地址）分配给结构，并且此操作未定义-因此您收到此错误。

如果要将元素设置为`NULL`，则应将数组声明为`struct mySTruct*[]`，并分配指针而不是值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T17:26:28.373

`struct myStruct *myStructList;`定义一个指向一个或多个类型对象的指针`struct myStruct`。`NULL`是一个保证可以隐式转换为任何指针类型的常量。`struct myStruct`不是指针类型。

有两种常用的方法可以让您使用结束标记来发出阵列结束的信号。第一个是使用指向的指针数组`struct myStruct`。这样，可以将 NULL 指针用作结束标记。

另一个选项要求有一个明确的 NULL 值`struct myStruct`。因此，您可以像这样定义 NULL 初始化程序（需要 C99 或更高版本）：

```
#define MYSTRUCT_NULL ((struct myStruct){ /* NULL initializer */ })
struct myStruct *myStructList = /* ... */
myStructList[i] = MYSTRUCT_NULL; 
```

必须专门将数组的内容与 MYSTRUCT_NULL 进行比较以找出结束标记。

# c# - 将代码转换为 C#

> ID：10837935
> 
> 赞同：0
> 
> 时间：2012-05-31T16:55:14.470
> 
> 标签：c#

我正在研究随机数生成器，并找到了一个伪代码：

```
function Noise1(integer x)
    x = (x<<13) ^ x;
    return ( 1.0 - ( (x * (x * x * 15731 + 789221) + 1376312589) & 7fffffff) / 1073741824.0);    
end function 
```

我想把它转换成 C#，但是我得到了各种各样的错误，比如无效的表达式和预期的“）”。这是我到目前为止所拥有的，我该如何转换它？

```
double Noise(int x) {
    x = (x<<13) ^ x;
    return ( 1.0 - ((x * (x * x * 15731 + 789221) + 1376312589) & 7fffffff) / 1073741824.0);
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T17:01:22.857

我不知道您从什么语言开始，但在 C# 中，十六进制常量看起来应该有所不同：更改`7fffffff`为`0x7fffffff`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T17:03:41.053

您可以使用 .Net Framework 随机对象

```
Random rng = new Random();
return rng.Next(10) 
```

但我强烈建议您阅读 Jon Skeet 关于随机生成器的这篇文章

[http://cshapindepth.com/Articles/Chapter12/Random.aspx](http://csharpindepth.com/Articles/Chapter12/Random.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T17:03:49.743

编辑：测试并报告了一个非空序列

1.  将您的十六进制常量转换为使用“0x”前缀

2.  小心转换 int <-> double

3.  拆分表达式以使其更具可读性

这是代码和单元测试（虽然结果很奇怪）：

```
using System;

namespace Test
{
    public class Test
    {
        public static Int64 Noise(Int64 x) {
             Int64 y = (Int64) ( (x << 13) ^ x);

             Console.WriteLine(y.ToString());

             Int64 t = (y * (y * y * 15731 + 789221) + 1376312589);

             Console.WriteLine(t.ToString());

             Int64 c = t < 0 ? -t : t; //( ((Int32)t) & 0x7fffffff);

             Console.WriteLine("c = " + c.ToString());

             double b = ((double)c) / 1073741824.0;

             Console.WriteLine("b = " + b.ToString());

             double t2 = ( 1.0 - b);
             return (Int64)t2;
        }

        static void Main()
        {

           Int64 Seed = 1234;

           for(int i = 0 ; i < 3 ; i++)
           {
               Seed = Noise(Seed);
               Console.WriteLine(Seed.ToString());
           }
        }
    }
} 
```

# html - 如何更改 KML 文件中标记的样式？

> ID：10837937
> 
> 赞同：0
> 
> 时间：2012-05-31T16:55:20.143
> 
> 标签：html, google-maps-api-3, kml, google-earth

我正在尝试从 googlemaps 中的 KML 文件更改标记的样式。当我在 googleearth 中运行文件时，标记是不同的。当我在 googlemaps 中运行它时，它的外观与以前相同。为什么会这样？

这是 kml 文件的开头：

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.google.com/earth/kml/1">
<Document>

<Style id="bendigo">
<BalloonStyle>
    <text>$[description]</text>
</BalloonStyle>
<IconStyle>
    <Icon>
        <href>http://maps.google.com/mapfiles/kml/paddle/grn-blank.png</href>
    </Icon>
  </IconStyle>
</Style>

<name>kml_sample1.kml</name>
<Placemark>
 <name>Boat</name>
 <description><![CDATA[
  Boat<br />
  <p>Home page: <a href="google.com">google.com</a></p>
 ]]>
 </description>

 <styleUrl>#bendigo</styleUrl>

<Point>
<!--run a javascript to get data points-->
  <coordinates>7.666037,64.32565</coordinates>
</Point> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T05:10:25.323

上面的 KML 片段缺少 Placemark、Document 和 kml 的结束标记。

修复后，我可以将 KML 加载到谷歌地图中，​​它看起来很好（绿色标记）。

最近在 Google 地图中渲染了 KML 的更新，这可能暂时影响了这一点，但我无法确定，因为它现在对我来说很好用。如果您确认它现在看起来不错，那可能就是问题所在。

# build - 我如何使用 gradle 来构建我的项目，无论有没有我们的分析方面？

> ID：10837944
> 
> 赞同：0
> 
> 时间：2012-05-31T16:56:05.270
> 
> 标签：build, aspectj, gradle

我们已经开发了一些我们希望包含在测试版本中的分析方面，但不包含在我们的生产版本中。我正在寻找一种构建 build.gradle 文件和源目录的最佳实践方式。

我最初的想法是创建一个 compileJavaAJ 任务，以及一个依赖于 compileJavaAJ 的 jarAJ 任务。compileJavaAJ 看起来与 aspectJ 插件[http://github.com/breskeby/gradleplugins/raw/0.9-upgrade/aspectjPlugin/aspectJ.gradle](http://github.com/breskeby/gradleplugins/raw/0.9-upgrade/aspectjPlugin/aspectJ.gradle)中定义的 compileJava 非常相似。仅仅应用这个插件的问题是它完全取代了compileJava（即使用javac的那个）。我需要两个构建目标——一个使用 javac，另一个使用 ajc。如果有更好的方法，我欢迎提出建议。

接下来，我需要决定将 aspectJ 代码放在哪里。我不想把它放在 src/main/java 中，因为 java 编译器会阻塞它。所以，我正在考虑定义一个新的 SourceSet，src/main/aspectJ，它只有 compileJavaAJ 知道。SourceSet 应该对 java 代码进行建模，所以我不太确定这是否是正确的方法。

非常感谢任何输入。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T05:47:19.400

我会使用像“withAspectJ”这样的属性来区分编译有无你的方面。看看下面的代码片段：

```
if(project.hasProperty('withAspectj') && project.getProperty("withAspectj")){
    sourceSets {
        main {
            java {
                srcDir 'src/main/aspectj'
            }
        }
    }
} 
```

如果名为 withAspectj 的属性计算结果为 true，则此代码段会将目录 src/main/aspectj 添加到您的主源集。现在您可以将所有方面放入此特定目录。如果您不传递 withAspectj 属性，则替换的 compileJava 任务将编译您的代码，而不会将方面连接到其中。但是如果你从命令行运行你的构建： gradle build -PwithAspectj=true

位于 src/main/aspectj 中的所有方面都将连接到您的代码中。

希望有帮助，

问候，

勒内

# nunit - nUnit 中的 assert.GreaterOrEqual 和 Assert.IsTrue 有什么区别吗？

> ID：10837945
> 
> 赞同：2
> 
> 时间：2012-05-31T16:56:07.310
> 
> 标签：nunit, assert

我在一项测试中做出断言，我想测试发送的消息数量 >=1

我有两种等效的方法来做到这一点。

```
 1: Assert.IsTrue(messagesSent >= 1);
        2: Assert.GreaterOrEqual(messagesSent,1); 
```

**第一种和第二种断言方式有什么区别吗？**我想知道 nUnit 内部或输出错误或性能中的某些内容。或者唯一的原因是可读性？

如果没有区别，为什么要创建第二个？

**注意**：同样适用于类似的断言，如 Greater、Less、LessOrEqual...

**注意**：我可能会使用第二个，因为我猜如果它已经创建，那么它有一个很好的理由，但想知道为什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T16:59:11.410

失败的输出是不同的。对于 IsTrue，消息将类似于“预期为真，但为假”。对于 GreaterOrEqual，消息将类似于“预期为 1 或更大，但为 -15”。GreaterOrEqual 提供了更多信息，您将看到实际值，这在调试失败时更有用。

# github-pages - 如何在 github 上发布 .php 页面而不是 .html 来演示一些 php 内容？

> ID：10837946
> 
> 赞同：83
> 
> 时间：2012-05-31T16:56:11.027
> 
> 标签：github-pages

我正在看以下演示 - [http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

据我在演示中的理解，php 文件是从 github 提供的，这意味着 php 内容可以从 github 提供/运行。

我了解通过此链接从托管在 github 的代码发布 html 内容的过程 -
[http://help.github.com/pages/](http://help.github.com/pages/)

我只是想知道如何将 .php 页面显示为演示，类似于上面 blueimp 中所做的。

我在[http://synechron.github.com/index2.php](http://synechron.github.com/index2.php)
尝试了类似的事情，但不是在浏览器窗口中显示，而是在谷歌浏览器中下载页面并在 IE9 中显示 index.html。

提前致谢 ！！

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2012-05-31T16:59:01.493

Github Pages 不是一个全功能的网络主机。它不会执行 PHP 或任何其他任意代码。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-02-10T09:04:10.753

不，你不能。

Github Pages 让您无需拥有和维护 Web 服务器即可提供 Web 客户端内容（HTML、Javascript、CSS）。您可以制作子文件夹，将您的域映射到其中。使用 Jekyll 或 Hugo 等工具和一些基本的编程技能，您可以使您的网站像 CMS 一样工作。

但是，它不允许您使用任何后端技术来处理和操作数据/逻辑。

所以，PHP 是不可能的。

# asp.net-mvc - MVC 动态视图数据和动态视图

> ID：10837948
> 
> 赞同：3
> 
> 时间：2012-05-31T16:56:13.780
> 
> 标签：asp.net-mvc, asp.net-mvc-3, dynamic, views, viewmodel

传统上，我使用具有数据注释属性的视图模型构建 MVC 应用程序，并使用编辑器模板动态呈现视图。一切都很好，它确实减少了我构建新视图的时间。我的要求最近发生了变化。现在，我无法在设计时定义视图模型。将在视图上呈现的属性是在运行时根据业务规则决定的。此外，这些属性的验证规则也可以在运行时决定。（根据业务规则，我的域模型中不需要的字段可能在我看来是必需的）。此外，要渲染的属性集直到运行时才知道 - 用户 A 可以编辑模型中的 6 个属性，而用户 B 可以编辑 9 个属性。

我想知道是否可以创建一个模型元数据提供程序，该提供程序将从业务规则中为无类型视图模型（如属性名称和值的集合）提供我自己的元数据。有没有人解决过这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T18:16:59.467

我通过创建更复杂的模型解决了类似的问题，并使用自定义编辑器模板使模型呈现为看起来像典型的编辑器，但使用动态字段信息：

```
public class SingleRowFieldAnswerForm
{
    /// <summary>
    /// The fields answers to display.
    /// This is a collection because we ask the MVC to bind parameters to it,
    /// and it could cause issues if the underlying objects were being recreated
    /// each time it got iterated over.
    /// </summary>
    public ICollection<IFieldAnswerModel> FieldAnswers { get; set; } 
}

public interface IFieldAnswerModel
{
    int FieldId { get; set; }

    string FieldTitle { get; set; }

    bool DisplayAsInput { get; }

    bool IsRequired { get; }

    bool HideSurroundingHtml { get; }
}

// sample implementation of IFieldAnswerModel
public class TextAreaFieldAnswer : FieldAnswerModelBase<TextAreaDisplayerOptions>
{
    public string Answer { get; set; }
} 
```

EditorTemplates/SingleRowFieldAnswerForm.cshtml：

```
@helper DisplayerOrEditor(IFieldAnswerModel answer)
{
    var templateName = "FieldAnswers/" + answer.GetType().Name;
    var htmlFieldName = string.Format("Answers[{0}]", answer.FieldId);

    if (answer.DisplayAsInput)
    {
        @Html.EditorFor(m => answer, templateName, htmlFieldName)
        // This will display validation messages that apply to the entire answer. 
        // This typically means that the input got past client-side validation and
        // was caught on the server instead.
        // Each answer's view must also produce a validation message for
        // its individual properties if you want client-side validation to be
        // enabled.
        @Html.ValidationMessage(htmlFieldName)
    }
    else
    {
        @Html.DisplayFor(m => answer, templateName, htmlFieldName)
    }
}
<div class="form-section">
    <table class="form-table">
        <tbody>
            @{
                foreach (var answer in Model.FieldAnswers)
                {
                    if (answer.HideSurroundingHtml)
                    {
                        @DisplayerOrEditor(answer)
                    }
                    else
                    {
                        var labelClass = answer.IsRequired ? "form-label required" : "form-label";
                        <tr>
                            <td class="@labelClass">
                                @answer.FieldTitle:
                            </td>
                            <td class="form-field">
                                <div>
                                    @DisplayerOrEditor(answer)
                                </div>
                            </td>
                        </tr>
                    }
                }
            }
        </tbody>
    </table>
</div> 
```

所以我`SingleRowFieldAnswerForm`用一系列答案模型填充我的。每个答案模型类型都有自己的编辑器模板，允许我自定义不同类型的动态“属性”应如何显示。例如：

```
// EditorTemplates/FieldAnswers/TextAreaFieldAnswer.cshtml

@model TextAreaFieldAnswer

@{
    var htmlAttributes = Html.GetUnobtrusiveValidationAttributes("Answer", ViewData.ModelMetadata);
    // add custom classes that you want to apply to your inputs.
    htmlAttributes.Add("class", "multi-line input-field");
}
@Html.TextAreaFor(m => m.Answer, Model.Options.Rows, 0, htmlAttributes)
@Html.ValidationMessage("Answer") 
```

下一个棘手的部分是，当您将此信息发送到服务器时，它本身并不知道`IFieldAnswerModel`要构造哪种类型，因此您不能只`SingleRowAnswerForm`在参数列表中绑定 。相反，您必须执行以下操作：

```
public ActionResult SaveForm(int formId)
{
    SingleRowAnswerForm form = GetForm(formId);
    foreach (var fieldAnswerModel in form.FieldAnswers.Where(a => a.DisplayAsInput))
    {
        // Updating this as a dynamic makes sure all the properties are bound regardless
        // of the runtime type (since UpdateModel relies on the generic type normally).
        this.TryUpdateModel((dynamic) fieldAnswerModel, 
            string.Format("Answers[{1}]", fieldAnswerModel.FieldId));
        }
    ... 
```

由于您为 MVC 提供了要绑定的每个动态“属性”值，因此它可以毫无困难地绑定每个答案类型的每个属性。

显然我省略了很多细节，比如如何首先生成答案模型，但希望这能让你走上正确的轨道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T17:02:02.610

您可以在 ViewModel、View 和 Controller 中使用 ViewData 属性，它是动态的，因此可以在运行时解析。

# android - 如何将数据从 sqlite listview 传递到新意图？

> ID：10837950
> 
> 赞同：1
> 
> 时间：2012-05-31T16:56:18.870
> 
> 标签：android, database, listview, data-retrieval, sqlite

（这是我的lunch.class，它从数据库中填充列表视图。告诉我是否有任何错误。我对此仍然很陌生。）

```
 public class Lunch extends Activity implements OnItemClickListener {

DBOpener dbopener;

@Override
protected void onCreate(Bundle savedInstanceState) {

    //for fullscreen view
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);

    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.dinner);

    dbopener = new DBOpener(this);
}

// Open the DB, query all subject codes and refresh the listview
// when app resumes
@Override
protected void onResume() {
    super.onResume();

    // Configure the listview
    ArrayList<String> mealNames = new ArrayList<String>();
    ListView lstDine = (ListView)this.findViewById(R.id.dine);
    lstDine.setAdapter(new ArrayAdapter<String>(this, 
        android.R.layout.simple_list_item_1, mealNames));

    // Open/create the DB
    try {
        dbopener.createDatabase(); // Create DB if necessary
      dbopener.openDatabase(); // Open the DB

      Cursor dinners = dbopener.getLunchNames();
      while (dinners.moveToNext()) {
          mealNames.add(dinners.getString(0)); // Get the current subj
                                                  // code, add to list
      }
      dinners.close();

      // Update the listview
      ArrayAdapter<String> ad = (ArrayAdapter<String>)lstDine.getAdapter();
      ad.notifyDataSetChanged();

      lstDine.setOnItemClickListener(this);
    } catch (Exception e) {
        Toast.makeText(this, "Could not open DB", 
            Toast.LENGTH_LONG).show();
    }
}

// Close the DB when app pauses
@Override
protected void onPause() {
    super.onPause();

    dbopener.close();
}

// When user clicks on an item
public void onItemClick(AdapterView<?> parent, View v, int pos, long id) {
    // Use subject code from listview to retrieve other
      // details with the dbopener

    switch(pos)
    {
    case 0 :
    Intent newActivity = new Intent("com.edu.tp.iit.mns.Display");
    newActivity.putExtra("1", "2"); // this is where im unaware of the codes.how to pass the strings of value to the next page
    startActivity(newActivity);
    break;
    }
    switch(pos)
    {
    case 1 :
    Intent newActivity = new Intent("com.edu.tp.iit.mns.Display");
    startActivity(newActivity); 
    break;
    }
    switch(pos)
    {
    case 2 :
    Intent newActivity = new Intent("com.edu.tp.iit.mns.Display");
    startActivity(newActivity);
    break;
    }
    switch(pos)
    {
    case 3 :
    Intent newActivity = new Intent("com.edu.tp.iit.mns.Display");
    startActivity(newActivity);
    break;
    }
    switch(pos)
    {
    case 4 :
    Intent newActivity = new Intent("com.edu.tp.iit.mns.Display");
    startActivity(newActivity);
    break;
    }
    switch(pos)
    {
    case 5 :
    Intent newActivity = new Intent("com.edu.tp.iit.mns.Display");
    startActivity(newActivity);
    break;
    }
    switch(pos)
    {
    case 6 :
    Intent newActivity = new Intent("com.edu.tp.iit.mns.Display");
    startActivity(newActivity);
    break;
    }
    switch(pos)
    {
    case 7 :
    Intent newActivity = new Intent("com.edu.tp.iit.mns.Display");
    startActivity(newActivity);
    break;
    }

} 
```

（这是 display.class（图 2）像模板一样显示动态信息，如图像、食物名称、食物描述及其评级。

```
 public class Display extends Activity {

DBOpener dbopener;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.display);   

    dbopener = new DBOpener(this);      
}

@Override
protected void onResume() {
    super.onResume();

    // Configure the listview
  //        ArrayList<String> mealNames = new ArrayList<String>();
  //        ListView lstDine = (ListView)this.findViewById(R.id.dine);
  //        lstDine.setAdapter(new ArrayAdapter<String>(this, 
  //            android.R.layout.simple_list_item_1, mealNames));

    // Open/create the DB
    try {
  //            dbopener.createDatabase(); // Create DB if necessary
      dbopener.openDatabase(); // Open the DB
      Toast.makeText(this, " open DB", 
                Toast.LENGTH_LONG).show();
      Cursor dinners = dbopener.getLunchNames();
      while (dinners.moveToNext()) {
  //              mealNames.add(dinners.getString(0)); // Get the current subj
                                                  // code, add to list
      }
      dinners.close();

      // Update the listview
 //       ArrayAdapter<String> ad = (ArrayAdapter<String>)lstDine.getAdapter();
  //          ad.notifyDataSetChanged();
   //               
  //          lstDine.setOnItemClickListener(this);
    } catch (Exception e) {
        Toast.makeText(this, "Could not open DB", 
            Toast.LENGTH_LONG).show();
    }
}

// Close the DB when app pauses
    @Override
    protected void onPause() {
        super.onPause();

        dbopener.close();
    }

 } 
```

最后是我的 dpopener 文件：

```
 public class DBOpener extends SQLiteOpenHelper {

    private static String DB_PATH = 
   "/data/data/com.edu.tp.iit.mns/databases/"; //path of our database
    private static String DB_NAME ="finals"; // Database name
    private final Context myContext;
    private SQLiteDatabase db;

@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub

}

public DBOpener(Context context) {
    super(context, DB_NAME, null, 1);
    myContext = context;
}

public void createDatabase() throws IOException {
    boolean dbExists = checkDatabase();
    if (dbExists) {
        // Do nothing, DB already exists
        Log.d("DBOpener", "DB exists");
    } else {
        // By calling this method an empty database will be created
            // in the default system path of your application, which we
            // will overwrite with our own database.
        Log.d("DBOpener", "DB does not exit - copying from assets");
        this.getReadableDatabase();
        copyDatabase();
        }
}

private boolean checkDatabase() {
    SQLiteDatabase checkDB = null;
    try {
        // Try opening the database
        String path = DB_PATH + DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(path, null, 
            SQLiteDatabase.OPEN_READONLY);
    } catch (SQLiteException e) {
        // If it fails, DB does not exist
    }
    if (checkDB != null)
        checkDB.close(); // Close the DB; we don’t need it now
    return checkDB != null;
}

private void copyDatabase() throws IOException {
    InputStream istream = myContext.getAssets().open(DB_NAME);
    OutputStream ostream = new FileOutputStream(DB_PATH + DB_NAME);
    // Transfer bytes from istream to ostream
    byte[] buffer = new byte[1024];
    int length;
    while ((length = istream.read(buffer)) > 0) {
        ostream.write(buffer, 0, length);
    }
    // Close streams
    istream.close();
    ostream.flush();
    ostream.close();
}

public void openDatabase() throws SQLiteException {
    db = SQLiteDatabase.openDatabase(DB_PATH + DB_NAME, null, 
        SQLiteDatabase.OPEN_READWRITE);
}

@Override
public synchronized void close() {
    if (db != null)
        db.close();
    super.close();
}

// Retrieve all subject codes
public Cursor getDinnerNames() {
    if (db == null)
        return null;
    return db.query("dinner", new String[] {"name"},
        null, null, null, null, null);
}

// Get details of specific subject
public Cursor getDinnerDetails(String name) {
    if (db == null)
        return null;
    return db.query("dinner", new String[] {"name", "nutrition", "rating"},
        "name = ?", new String[] {name}, null, null, null);
}

// Retrieve all subject codes
public Cursor getLunchNames() {
    if (db == null)
        return null;
    return db.query("lunch", new String[] {"name"},
        null, null, null, null, null);
}

// Get details of specific subject
    public Cursor getLunchDetails(String name) {
        if (db == null)
            return null;
        return db.query("dinner", new String[] {"name", "nutrition", "rating"},
            "name = ?", new String[] {name}, null, null, null);
    }

    // Retrieve all subject codes
    public Cursor getBreakfastNames() {
        if (db == null)
            return null;
        return db.query("breakfast", new String[] {"name"},
            null, null, null, null, null);
    }

    // Get details of specific subject
    public Cursor getBreakfastDetails(String name) {
        if (db == null)
            return null;
        return db.query("breakfast", new String[] {"name", "nutrition", "rating"},
            "name = ?", new String[] {name}, null, null, null);
    }
   } 
```

你能帮我从案例 0 开始，这样我就可以完成代码。例如，用户点击烧烤鸡肉三明治。它将导航到 display.class 并从 db 中检索信息并显示图像评级和内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T17:41:57.627

要通过意图将参数传递给新活动，您可以使用 putExtra()，就像您在代码中放置的那样：newActivity.putExtra("1", "2");

第一个参数应该是一个字符串常量来标识你的参数，稍后你将使用这个字符串来获取值。第二个参数是值，android 有所有原语的方法。

在新活动中，您使用 getExtra("1", "2")，其中 1 是您之前使用的常量，2 是默认值，以防它找不到您使用的值或常量。

# c - 共享对象文件是否有最大大小？

> ID：10837970
> 
> 赞同：2
> 
> 时间：2012-05-31T16:57:36.383
> 
> 标签：c, linux

我正在构建一个具有巨大 .so 文件的应用程序 - 大小超过 2GB（已剥离）。共享对象文件的大小是否有限制？因为 strace 显示文件因为太大而被拒绝。

我的系统目前是 32 位系统，我也想知道当我为 64 位 Linux 系统构建时，这会发生多大的变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:04:22.720

这取决于您系统的内存 *.so 链接直接加载可执行文件或系统本身，如果您的内存不足或操作系统分配了大量内存，则无法加载，如果您为 64 位系统构建，它将扩展超过 2 gb在大小上，因为添加了一些 64 位标志和指令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T17:12:03.537

由于共享库完全加载到内存中，我强烈建议您将资源移到一些外部文件中。恕我直言，2GB 对于共享库来说是完全不可接受的，并且会在低内存系统上引起问题。

更新：

请忽略我关于将整个共享库加载到内存中的第一句话。正如 OP 评论的那样，共享库确实是 mmap 的，并且符号页面是按需加载的。

# c# - 用 C# 编写 Excel 2003

> ID：10837973
> 
> 赞同：1
> 
> 时间：2012-05-31T16:57:54.607
> 
> 标签：c#, xml, excel

我正在尝试编写一个 2003 XML Excel 文件，但也许我遗漏了一些重要的东西，或者......我根本不了解名称空间。

我需要这样写：

```
<?xml version="1.0" encoding="utf-8"?>
<Workbook
xmlns="urn:schemas-microsoft-com:office:spreadsheet"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:x="urn:schemas-microsoft-com:office:excel"
xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet"
xmlns:html="http://www.w3.org/TR/REC-html40">

<Worksheet Name="Questions">
<Table><Row><Cell><Data ss:Type="Number">1</Data></Cell></row></table>
</Worksheet> 
```

我正在使用这样的代码：

```
 var toret = new XmlDocument();

    // Add encoding declaration
    XmlDeclaration xmlDeclaration = toret.CreateXmlDeclaration( "1.0", "utf-8", null);
    toret.AppendChild( xmlDeclaration );

    // Add root label
    var root = toret.CreateElement( ExcelXmlLblWorkbook );
    toret.AppendChild( root );
//  root.SetAttribute( "xmlns", "urn:schemas-microsoft-com:office:spreadsheet" );
    root.SetAttribute( "xmlns:o", "urn:schemas-microsoft-com:office:office" );
    root.SetAttribute( "xmlns:x", "urn:schemas-microsoft-com:office:excel" );
    root.SetAttribute( "xmlns:ss", "urn:schemas-microsoft-com:office:spreadsheet" );
    root.SetAttribute( "xmlns:html", "http://www.w3.org/TR/REC-html40" );

    // ...
    var cellForQuestionNumber = wsQuestions.OwnerDocument.CreateElement( ExcelXmlLblCell );
    row.AppendChild( cellForQuestionNumber );

    var dataForQuestionNumber = wsQuestions.OwnerDocument.CreateElement( ExcelXmlLblData );
    dataForQuestionNumber.SetAttribute( "ss:Type", "Number" );
    dataForQuestionNumber.InnerText = "1";
    cellForQuestionNumber.AppendChild( dataForQuestionNumber ); 
```

1.  如果我尝试使用 xmlns="..." 的属性创建根节点，那么它在运行时会失败，说“命名空间名称无效”。

2.  在 Data 节点中`<Data ss:Type="Number">`，我得到的不是像 那样的节点，而是`<Data d6p1:ss="String" xmlns:d6p1="Type">`我不太了解的节点。我也尝试过：

    dataForQuestionNumber.SetAttribute("ss", "Type", "Number");

但这似乎不起作用。

# django - 如何检测和响应来自 django 项目的数据库更改（INSERT）？

> ID：10837978
> 
> 赞同：2
> 
> 时间：2012-05-31T16:58:23.060
> 
> 标签：django, postgresql

我正在设置我们的项目以与名为 Endicia 的运输平台集成，该平台能够在运输包裹时将新行插入我们的数据库。

当插入新行时，如何从 python 中检测到？

我现在的解决方案是每 30 秒左右查询一次数据库以获取新行...是否有另一种解决方案可以将信号从 postgres 发送到 python？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:23:47.200

您将设置一个由文件运行的[自定义命令。](https://docs.djangoproject.com/en/dev/howto/custom-management-commands/)`manage.py`

你把它放在“yourapp/management/commands/”文件夹中。确保将**init** .py 文件添加到 management 和 commands 文件夹，否则该命令将不起作用。然后为自定义命令创建代码。

然后，请参阅[有关在对 postgres 数据库进行更改时运行 shell 脚本的相关问题](https://stackoverflow.com/questions/7902348/run-a-shell-script-when-a-database-record-is-written-to-postgres)。答案是使用[PL/sh](https://github.com/petere/plsh)。你需要自己弄清楚那部分，但基本上不管你怎么做，最终结果是脚本应该调用类似的东西`/path/to/app/manage.py command_name`

# http - Post-Redirect-Get 后的后退按钮行为

> ID：10837981
> 
> 赞同：5
> 
> 时间：2012-05-31T16:58:30.200
> 
> 标签：http, jsf, post-redirect-get

我的应用程序通过响应标头禁用浏览器上的缓存，然后使用 Post-Redirect-Get 模式启用后退按钮以“重新获取”当前页面。
但是，现在使用 Firefox 12 和 IE 8 重新测试时，我没有看到我期望的结果（或者我之前在 IE 6 中看到的结果）。

选择后退按钮后，我可以看到浏览器正在尝试执行原始请求（Post），而不是重定向请求（Get）。当我查看 Firebug 的网络选项卡上的请求时，我看到以下内容：

![重定向后获取](../Images/d5f91dd589f29957f580596b23a3c5c1.png)

看起来浏览器将 Post 和 Get 视为相同的请求，因此选择后退按钮正在重新提交 Post：

![返回按钮的结果](../Images/4e8df538037c1ece411769e2773f05e3.png)

我正在使用 JSF，但我认为这是一个浏览器问题。有谁知道为什么浏览器不执行重定向页面的获取？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T19:05:52.143

它工作正常。后退按钮重新执行“POST accountDetails.xhtml”**之前**的请求，该请求未在您的第一个屏幕截图中列出，但根据第二个屏幕截图显然（并且在逻辑上）是“GET accountDetails.xhtml”。您显然在与该视图关联的 bean 中或在某些过滤器中进行一些检查并重定向到“registrationWelcome.xhtml”。第一个屏幕截图中的“POST accountDetails.xhtml”是**当前**请求，它已被重定向到“reviewInfo.xhtml”。

后退按钮不会重新执行重定向。这是您自己的代码。后退按钮也不会重新执行 POST 请求，这在第二个屏幕截图中得到了确认。

# django - Django 教程路径：Mac 联网计算机上的 TEMPLATE_PATH 目录

> ID：10837982
> 
> 赞同：1
> 
> 时间：2012-05-31T16:58:38.270
> 
> 标签：django, templates, filepath

我正在（慢慢地！）完成 Django 教程，并且我已经到了[第 2 部分](https://docs.djangoproject.com/en/1.4/intro/tutorial02/)中应该设置 template_dir 的地方。我在我的用户配置文件驻留在服务器上的 Mac（工作中）上，但我不知道如何设置路径。

教程文件位于名为“tutorialshell”的文件夹中，位于名为“Django”的文件夹中，这是我的用户文件夹“mattshepherd”中的一级文件。例如，当我启动终端时，该文件夹是本机文件夹：它总是在“mattshepherd”中启动我。

我试过了

```
"~/Django/tutorialshell/templates" 
```

和

```
"home/Django/tutorialshell/templates" 
```

到目前为止没有运气。我想这样做有一些技巧，因为我试图链接到的文件在我的用户文件夹中的网络驱动器上，而不是在我的本地硬盘驱动器上。建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T17:16:07.063

您想要绝对路径，而不是相对路径。如果您进入`~/Django/tutorialshell/templates`终端然后键入`pwd`，它将告诉您该文件夹的完整路径。这就是您应该为路径输入的值。

**另外**：我假设您实际上是在谈论`TEMPLATE_DIRS`？如果是这样，请记住它是一个路径*列表*，所以它应该如下所示：

```
TEMPLATE_DIRS = (
    "/path/to/Django/tutorialshell/templates", # don't forget that trailing comma!
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T17:16:49.737

`/Users/mattshepherd/Django/tutorialshell/templates`

请记住，Jordan 提到了一个模板目录列表。上述位置应该可以工作。在 mac 中，用户主目录位于`/Users/`+`yourusername`

如果 /Users/ 不起作用，它可能是 /home/。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T07:03:21.120

正如其他人所说，您需要绝对路径。但我真的建议你使用相对路径。它将使您的代码更加灵活。有很多方法可以做到这一点，这是我通常做的：

```
import os
ROOT = os.path.abspath(os.path.dirname(__file__)) 
```

然后对于模板只需执行以下操作：

```
os.path.join(ROOT, 'templates') 
```

您说您使用的是 Mac，但在使用 Windows 的情况下，您可以通过将“//”替换为“/”来使代码更加灵活。

# wordpress - Wordpress 中的类别标题显示问题

> ID：10837983
> 
> 赞同：0
> 
> 时间：2012-05-31T16:58:43.970
> 
> 标签：wordpress, wordpress-theming

我有以下 WordPress 类别的代码。当我希望它显示帖子的标题时，它会显示类别的名称。我如何让它正确显示帖子的标题。

```
<? query_posts('category_name=implants');
?>
<h3><?php single_cat_title(); ?></h3>
<?php if (have_posts()) : while (have_posts()) : 

the_post(); ?>
<?php the_content( __('Read the 

rest of this page »', 'template')); ?>
<?php endwhile; endif; ?></p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T18:23:32.397

1.  除非您打算修改默认的 Wordpress 循环，否则[不要使用 query_posts 。](https://wordpress.stackexchange.com/questions/1753/when-should-you-use-wp-query-vs-query-posts-vs-get-posts)使用[WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query)代替标准的 Wordpress 查询。
2.  看看你的代码。您正在调用 single_cat_title()。它的含义正是它的样子：您正在提取查询类别的标题。您想调用 the_title() 来获取帖子标题。
3.  没有上面那么重要，但是你的开始标签是 <? 而不是 <?php. 您应该养成指定服务器端语言的习惯，以避免未来可能出现的问题，即使它最初可能并不明显。

这是您修改后的循环的样子：

```
<?php
$query = new WP_Query('category_name=implants');
if($query->have_posts()) : while($query->have_posts()) : $query->the_post();
?>
<h3><?php the_title(); ?></h3>
<?php
the_content( __('Read the rest of this page »', 'template'));
endwhile; endif;
wp_reset_postdata();
?> 
```

# mysql - mysql查找匹配

> ID：10837985
> 
> 赞同：1
> 
> 时间：2012-05-31T16:58:47.110
> 
> 标签：mysql

我有一个这样的数据库列：

```
id
50
55
56
62
63
64
65
68
70
72
80

etc... 
```

我想使用以下公式遍历 id 列，以查找公式的结果是否是同一列中的 id 号。我想计算 id 列中基本上 3 条记录的所有可能组合。

第一个循环： ((second_id_number - first_id_number) * variable decimal) + second_id_number 是否等于 id 列中的数字？

根据公式，第一个循环是 (55-50)*2.00（作为变量小数的示例）+ 55 = 65。65 在列表中 => 65 被标记为等于它的 2 条记录

第二个循环： ((third_id_number - first_id_number) * variable decimal) + second_id_number 是否等于 id 列中的数字？(56-50)*2.00（作为变量小数的示例）+ 56 = 78。78 不在列表中 => 78 未标记

第三个循环： ((fourth_id_number - first_id_number) * variable decimal) + second_id_number 是否等于 id 列中的数字？

ETC...

我希望结果显示所有标记的记录。标记记录是 3 条记录的集合，其中第三条记录是公式的结果。

有人有什么想法吗？在mysql中可以吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T17:04:26.973

如果我正确理解您的要求，听起来您想在桌子上使用自联接，例如

```
SELECT ...
FROM yourtable AS parent
LEFT JOIN yourtable AS child ON
    FLOOR((parent.second_id_number - parent.first_id_number) * variable) + parent.second_id) = child.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T17:18:38.677

你可能会携带这样的东西，满足你的第一个“循环”

```
select a.id as first_id_number
    , b.id as second_id_number
    , ((b.id - a.id) * 2) + b.id as third_id_number
from my_table as a
    join my_table as b on a.id = (select max(id) from my_table where id < b.id)
where ((b.id - a.id) * 2) + b.id in (select id from my_table) 
```

根据您的描述和测试数据，这会将 65 显示为带有 first_id_number 50 和 62 的“标记”。

警告：使用我*认为*相当标准的语法在 SQL Server 上完成。如果有些人宁愿将其表述为与`select max...`where 子句中的位而不是连接谓词中的位的交叉连接，我会理解。

# php - 这是分页还是其他？

> ID：10837988
> 
> 赞同：-1
> 
> 时间：2012-05-31T16:58:52.680
> 
> 标签：php, pagination, mysqli

我仍在学习有关 PHP 的更多有趣细节。示例：从 MySQL 迁移到 MySQLi。我目前正在做的是尝试输入这样的内容：[http ://music.daum.net/artist/main?artist_id=2289](http://music.daum.net/artist/main?artist_id=2289)

从我通过切分网址从分页中学到的知识：

*   主要的？
*   艺术家 ID=
*   2289

我怎样才能制作这样的页面？我有 2 个部分可用，并会在弄清楚这一点时制作其他部分。

*   艺术家信息（可作为*testhub-artist.php 获得*）
*   专辑（可作为*testhub-artistalbum.php 获得*）
*   音乐视频
*   照片部分

我希望在制作页面时更容易，而不是为每个人制作单独的文件夹。

我的网址是：“../artist/detail?artist_id=#”

* * *

这是艺术家页面的顶部。

```
<?php
//Connect to ...
include "testhub-artist.php";
include "testhub-artistalbum.php";
?> 
```

testhub-artist.php

```
<?php
//Connect to database
include "mysqli_connect.php";

// Construct our join query
$sql = "SELECT * FROM individuals WHERE soloID = 1";

// Create results
$result = mysqli_query($link, $sql);

// Checking if query is successful
if($result){

// Print out the contents of each row into a table 
while($row = mysqli_fetch_array($result, MYSQLI_BOTH)){

// If else states on each variable
    if ($profilepic = $row['profilepic']){
        $profilepic = $row['profilepic'];
    }else{
        $profilepic = "DamjuNoImage";
    }
    if ($engname = $row['engname']){
        $engname = $row['engname'];
    }else{
        $engname = "Unknown";
    }
    if ($korname = $row['korname']){
        $korname = $row['korname'];
    }else{
        $korname = "Unknown";
    }
    if ($engbn = $row['engbn']){
        $engbn = $row['engbn'];
    }else{
        $engbn = "Unknown";
    }
    if ($korbn = $row['korbn']){
        $korbn = $row['korbn'];
    }else{
        $korbn = "Unknown";
    }
    if ($dateofbirth = $row['dateofbirth']){
        $dateofbirth = $row['dateofbirth'];
    }else{
        $dateofbirth = "Unknown";
    }
    if ($occupation = $row['occupation']){
        $occupation = $row['occupation'];
    }else{
        $occupation = "Unknown";
    }
    if ($debut = $row['debut']){
        $debut = $row['debut'];
    }else{
        $debut = "Unknown";
    }
    if ($recordlabel = $row['recordlabel']){
        $recordlabel = $row['recordlabel'];
    }else{
        $recordlabel = "Unknown";
    }
    if ($officialsite = $row['officialsite']){
        $officialsite = $row['officialsite'];
    }else{
        $officialsite = "#";
    }
    if ($sitename = $row['sitename']){
        $sitename = $row['sitename'];
    }else{
        $sitename = "Unknown";
    }
} // End of while statement
}else{
    $engname = "Unknown";
    $korname = "Unknown";
    $engbn = "Unknown";
    $korbn = "Unknown";
    $dateofbirth = "Unknown";
    $occupation = "Unknown";
    $debut = "Unknown";
    $recordlabel = "Unknown";
    $officialsite = "#";
    $sitename = "Unknown";
} // End of If statement

// Free result set
//mysqli_free_result($result);

?> 
```

testhub-artistalbum.php

```
<?php
//connect to db
include "mysqli_connect.php";

//check for a page number. If not, set it to page 1
if (!(isset($_GET['albumpage']))){
    $albumpage = 1;
}else{
    $albumpage = $_GET['albumpage'];
}

//query for record count to setup pagination
$sqli = "SELECT * FROM albums WHERE soloID = 3";
$album_data = mysqli_query($link, $sqli);
$album_rows = mysqli_num_rows($album_data); 

//number of photos per page
$album_pagerows = 4; 

//get the last page number
$last_album = ceil($album_rows/$album_pagerows); 

//make sure the page number isn't below one, or more than last page num
if ($albumpage < 1){
    $albumpage = 1;
}elseif ($albumpage > $last_album){
    $albumpage = $last_album;
}

//Set the range to display in query
$max_album = 'limit ' .($albumpage - 1) * $album_pagerows .',' .$album_pagerows;

//get all of the photos
$albumList = "";
$sqli2 = "SELECT * FROM albums WHERE soloID = 3 ORDER BY releasedate DESC $max_album";
$album_sql = mysqli_query($link, $sqli2);

//check for photos
$albumCount = mysqli_num_rows($album_sql);

if ($albumCount > 0){
    while($album_rows = mysqli_fetch_array($album_sql)){
    $albumID = $album_rows["albumID"];
    $albumpic = $album_rows["albumpic"];
    $title = $album_rows["albumTitle"];
    $releasedate = $album_rows["releasedate"];
    $page = $album_rows["page"];
    $albumList .= '
      <li class="albumthumb">
         <a href="' . $page . '" title="' . $title . '"><img class="profile" src="../albums/album_th/' . $albumpic . '.jpg" alt="' . $albumpic . '" width="120" height="120" border="0" /><p class="datatitle">' . $title . '</p></a><p class="data-releasedate">' . $releasedate . '</p>
       </li>
                  ';
    }
}else{
    $albumList = "There are no available albums at this time!";
}

//mysql_close();
?> 
```

抱歉没有解释清楚。我希望在制作像 url 这样的个人资料页面时能够使用分页。我想使用url中的数字来更改sql代码中的id（soloID）。

节省时间的好主意，对吧？MySQLi 每次我看到它都会变得更容易。

谢谢你。

* * *

已更改 2012 年 5 月 31 日下午 5:44 CT

```
$artist = $_GET['artist_id'] 
```

进入

```
 if(is_numeric($_GET['artist_id'])){
    $artist = $_GET['artist_id'];
}else{
    $artist = 1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:07:31.683

```
artist/detail?artist_id=# 
```

您将`detail`用作页面，（可能有一个带有索引的详细文件夹）并在详细页面上，在`$_GET[]`某处有一个变量来获取艺术家 ID。所以你的代码可能看起来像这样：

```
$artist = $_GET['artist_id']; // Filter this variable

$sql = "SELECT * FROM individuals WHERE soloID = '{$artist}'";

/**
 * Verify if the ID exists
 * Display query results, etc.
 */ 
```

因此，每次更改 URL 中的 artist_id 变量时，页面都应相应更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T18:07:00.133

欢迎使用我第二喜欢的语言！我爱php。有人已经回答了你的问题，但我有一些建议。

您拥有的代码并不容易受到攻击，因为用户提供的数据是通过数学传递的……但是内联变量是让自己容易受到[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击的好方法。查看[bind_param()](http://php.net/manual/en/mysqli-stmt.bind-param.php)和准备好的语句并养成使用它们的习惯。总是。好吧几乎总是..

不幸的是，SQL 不允许您绑定您使用的值之类的东西，`LIMIT,ORDER BY,GROUP BY`因此您必须自己处理这些内容。永远不要相信来自用户的任何东西，所以做这项工作并检查它。

排序列应始终是列名。检查它们。

```
if ( ! in_array($sort_column,array('column1','column2','column3') ) ) $sort_column = 'column1'; 
```

限制应始终为整数。像这样投射它们。

```
$safe_limit = (int) $user_limit; 
```

无需将数组值复制到另一个变量中。只需直接使用它们。

您需要将您的值转义到 html 中。查找[urlencode()](http://us.php.net/manual/en/function.urlencode.php)和[htmlentities()](http://us.php.net/manual/en/function.htmlentities.php)。

我的 IE 有足够的内存，所以我必须稍后再完成。

# size - OpenLayer OpenStreetMap 矢量大小与缩放无关

> ID：10837993
> 
> 赞同：3
> 
> 时间：2012-05-31T16:59:07.907
> 
> 标签：size, zooming, openlayers, polygon, openstreetmap

我在我的 OSM 上有一个 VectorLayer，并且我已经成功地在我的地图上绘制了一个多边形。但是正在发生的事情是，当我放大或缩小时，多边形变得太大了。有没有办法保持多边形的大小独立于缩放？这是我绘制圆圈的代码

```
map = new OpenLayers.Map("container");
var mapnik = new OpenLayers.Layer.OSM();
epsg4326 = new OpenLayers.Projection("EPSG:4326");
var zoom           = 6; 
map.addLayer(mapnik);
map.addControl(new OpenLayers.Control.DragPan());
projectTo = map.getProjectionObject();
var lonLat = new OpenLayers.LonLat(-82.56,43.67611).transform(epsg4326, projectTo);
    map.setCenter(lonLat, zoom);
var styleMap = new OpenLayers.StyleMap(OpenLayers.Util.applyDefaults(
    {fillColor: "black", fillOpacity: 0.5, strokeColor: "black"},
OpenLayers.Feature.Vector.style["default"]));
var vectorLayer = new OpenLayers.Layer.Vector("Overlay", {styleMap: styleMap});
var point = new OpenLayers.Geometry.Point(lonLat.lon, lonLat.lat);
var mycircle = OpenLayers.Geometry.Polygon.createRegularPolygon
(
point,
50000,
50,
0
);
var featurecircle = new OpenLayers.Feature.Vector(mycircle);
vectorLayer.addFeatures([featurecircle]);
map.addLayer(vectorLayer); 
```

# jquery - jqPlot：如何用几种不同的颜色为背景/网格的部分着色

> ID：10837997
> 
> 赞同：5
> 
> 时间：2012-05-31T16:59:25.093
> 
> 标签：jquery, jquery-plugins, graph, jqplot

我正在使用优秀的[jqPlot](http://www.jqplot.com/)插件，我在[文档](http://www.jqplot.com/docs/files/usage-txt.html)中没有找到的唯一功能是“如何用几种不同的颜色为背景/网格的部分着色”

我的图表的 x 轴单位是日期。如果可能，我想通过更改背景网格颜色来突出显示网格的周末部分（仅）。

或者有人会有其他想法吗？

谢谢

**编辑最终答案**

根据 Boro 的建议，我开发了一种更好的方法来突出显示背景的一部分，使用“line”选项而不是“verticalLine”选项。事实是，使用“verticalLine”，开发人员必须处理线宽。因此，很难获得所需的线宽，因为线的宽度是从线的中心而不是从边框开始扩展的。

[“线”选项](http://www.jqplot.com/docs/files/plugins/jqplot-canvasOverlay-js.html#Line)允许设置起点和终点以设置要突出显示的背景的确切部分。width 参数仍用于将行显示为列，但它是水平分布的，而不是垂直分布的。

关于“lineWidth”属性，该值以像素为单位定义。因此，您可以确定图形容器高度的值，并将“开始”和“结束”属性的“y”值设置为系列数据的平均值或 y 轴的近似中间范围。

[我在这里](http://jsfiddle.net/WdLnm/141/)更新了 Boro 的小提琴

```
 grid:                 
                {
                    drawGridLines: true,        // wether to draw lines across the grid or not.
                    gridLineColor: '#cccccc',   // Color of the grid lines.
                    backgroundColor: "#eee",
                    borderColor: '#999999',     // CSS color spec for border around grid.
                    borderWidth: 2.0,           // pixel width of border around grid.
                    shadow: true,               // draw a shadow for grid.
                    shadowAngle: 45,            // angle of the shadow.  Clockwise from x axis.
                    shadowOffset: 1.5,          // offset from the line of the shadow.
                    shadowWidth: 3,             // width of the stroke for the shadow.
                    shadowDepth: 3,             // Number of strokes to make when drawing shadow.
                                                // Each stroke offset by shadowOffset from the last.
                    shadowAlpha: 0.07,          // Opacity of the shadow
                },
                canvasOverlay: {
                    show: true,
                    objects:

                            [
                                {
                                    line:
                                    {
                                        start : [new Date('2012-01-12').getTime(),20],                                                
                                        stop : [new Date('2012-01-13').getTime(),20],                                                
                                        lineWidth: 1000,
                                        color: 'rgba(255, 0, 0,0.45)',
                                        shadow: false,
                                        lineCap : 'butt'
                                    }
                                },                                    
                                {
                                    line:
                                    {
                                        start : [new Date('2012-01-13').getTime(),20],                                                
                                        stop : [new Date('2012-01-14').getTime(),20],                                                
                                        lineWidth: 1000,
                                        color: 'rgba(255, 0, 0,0.45)',
                                        shadow: false,
                                        lineCap : 'butt'
                                    }
                                }
                            ]
                } 
```

![结果样本](../Images/ab003250bf688a2c7e5a396af56d8e5f.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T12:39:01.457

我认为@Katya 在[我对相关问题的回答](https://stackoverflow.com/a/10428034/613495)下的代码中显示的示例可能对您有所帮助。

[直接链接到示例。](http://jsfiddle.net/WdLnm/7/)

**编辑**

关于第二部分，您需要使用 a`verticalLine`并将其`x`值设置为毫秒，[如此处所示](http://jsfiddle.net/WdLnm/135/)。然后你需要担心选择合适`lineWidth`的 .