# StackOverflow 问答 12409000-12409999

# objective-c - NSDate 比较是假的？

> ID：12409003
> 
> 赞同：1
> 
> 时间：2012-09-13T14:49:35.607
> 
> 标签：objective-c

我比较了 2 个相同的 NSDates，我得到了错误的结果。我不能展示我是如何得到这个日期的，因为它太长了，但我可以展示我做了什么：

```
NSLog(@"this date is:%@ , and date we check to equality is:%@",thisDate,dateToFind);
if([thisDate isEqualToDate:dateToFind]  )
{
    NSLog(@"equal date!"); // not printed! 
} 
```

NSLog 给我看这个：

```
this date is:2012-09-13 14:23:54 +0000 , and date we check to equality is:2012-09-13 14:23:54 +0000 
```

他不打印 NSLog 。为什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:36:36.963

正如一些人所说，似乎是几分之一秒给你带来了麻烦。这样做的原因是 an`NSDate`只是一个围绕`NSTimeInterval`( `double`) 的对象包装器，其值自参考日期（格林威治标准时间 2001 年 1 月 1 日上午 12 点）以秒为单位。

有几种主要的方法可以解决这个问题。检查日期以查看它是否在给定范围内，或者（更可能基于您的问题）完全截断几分之一秒。

从 an 中截断秒`NSDate`是微不足道的代码。您可能希望在存储它们时截断所有存储的日期以进行快速比较。您可以像这样截断现有的`NSDate`：

```
NSDate *truncatedDate = [NSDate dateWithTimeIntervalSinceReferenceDate:((NSTimeInterval)lround(originalDateObject.timeIntervalSinceReferenceDate))]; 
```

这段代码很容易解释。它获取日期的支持时间间隔，将其四舍五入为整数，然后将其转换回时间间隔并创建一个新的截断日期。

对两个日期执行此操作后，您可以比较两个截断的日期，它们将按预期运行。

或者，如果您必须在不更改日期数据的情况下做某事，您可以简单地执行以下操作：

```
if (lround(thisDate.timeIntervalSinceReferenceDate) == lround(dateToFind.timeIntervalSinceReferenceDate)){
    // If whole seconds are equal, as shown in log, this will execute.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:57:58.310

```
NSLog(@"this date is:%@ , and date we check to equality is:%@",
      thisDate,dateToFind); 
```

尝试更改上述内容：

```
NSLog(@"this date is:%f , and date we check to equality is:%f",
      [thisDate timeIntervalSince1970],
      [dateToFind timeIntervalSince1970]); 
```

# jquery - 使用函数内的变量设置新变量

> ID：12409019
> 
> 赞同：1
> 
> 时间：2012-09-13T14:50:20.697
> 
> 标签：jquery, api, function, web-applications, geolocation

我正在使用地理定位创建一个网络应用程序。到目前为止，我已经设置并工作了，所以当用户访问时，他们会被提示允许位置服务，然后会显示一个警报（不是永久性的，仅用于测试目的。）

我正在使用这个：

```
navigator.geolocation.getCurrentPosition(foundLocation, noLocation, {enableHighAccuracy:true});

function foundLocation(position)
{
    var lat = position.coords.latitude;
    var long = position.coords.longitude;
    alert('We know you are here '+ lat +','+ long);
}
function noLocation()
{
    alert('Could not find location');
} 
```

然后我在此之外有一个名为“地址”的变量，它是 API 调用的 URL：

```
address = "http://api.wunderground.com/api/geolookup/hourly/conditions/astronomy/alerts/forecast/q/[LOCATION].json" 
```

我的问题是如何从函数中获取`lat`和`long`退出并将它们插入到 URL 中？我尝试了几种方法，但它们都返回“未定义”，所以我显然做错了。

任何帮助是极大的赞赏！

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:58:05.303

您必须了解 javascript 变量的范围，请阅读这篇文章：[JavaScript 中变量的范围是什么？](https://stackoverflow.com/questions/500431/javascript-variable-scope)

```
var address = '';

function setLocation(position)
{
    var lat = position.coords.latitude;
    var long = position.coords.longitude;
    address = "http://api.wunderground.com/api/geolookup/hourly/conditions/astronomy/alerts/forecast/q/" + lat + "," + long + ".json";
} 
```

此外，还有更好的方法来解决您的问题。最简单的方法是创建一个具有唯一名称的全局对象，将变量作为该对象的属性以及更改变量的方法，例如：

```
var geolocation = {};
geolocation.latitude = 0;
geolocation.longitude = 0;
geolocation.address = "";
geolocation.setLocation = function(position) {
    geolocation.latitude = position.coords.latitude;
    geolocation.longitude = position.coords.longitude;
    geolocation.address = "http://api.wunderground.com/api/geolookup/hourly/conditions/astronomy/alerts/forecast/q/" + geolocation.latitude + "," + geolocation.longitude + ".json";
};
geolocation.show = function() {
  alert(geolocation.latitude + " " geolocation.longitude + " " + geolocation.address);
}; 
```

等等。现在，如果您使用，文件中的任何地方：

```
geolocation.setLocation(position);
geolocation.show(); 
```

它将显示来自全局对象的新值。

**更新**

请记住，如果没有围绕它的包装器，javascript 中的变量或对象将是全局的，例如另一个函数或对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:56:19.100

你不能像这样直接从函数中更新地址吗？

```
navigator.geolocation.getCurrentPosition(foundLocation, noLocation, {enableHighAccuracy:true});
var address = "http://api.wunderground.com/api/geolookup/hourly/conditions/astronomy/alerts/forecast/q/[LOCATION].json"

function foundLocation(position)
{
    var lat = position.coords.latitude;
    var long = position.coords.longitude;
    alert('We know you are here '+ lat +','+ long);
    address = address.replace('[LOCATION]', lat + ',' + long);
} 
```

# asp.net - 如何在 EF DbContext 和 AspNet Membership 之间共享连接以避免事务升级到 DTC

> ID：12409020
> 
> 赞同：6
> 
> 时间：2012-09-13T14:50:27.437
> 
> 标签：asp.net, entity-framework, asp.net-membership, database-connection, msdtc

我有一个使用 EF 4.1 DbContext、数据库优先数据层的 ASP.NET MVC3 应用程序。EDMX 方法工作得很好，因为我倾向于在应用程序适应它们之前对我的数据模型进行更改。该应用程序可以与包含元数据引用的特殊 EF 连接字符串一起正常工作。

但是，美中不足的是一只苍蝇。该应用程序还使用需要标准连接字符串的 ASP.NET 成员资格和角色。我有几个涉及成员表和其他（EF 管理）表的用例。由于两者使用单独的连接字符串，因此涉及两者的事务都需要 DTS 来处理它们。如果我能提供帮助，我不想走那条路，我宁愿应用程序的所有部分都简单地使用相同的连接。

然而，让 EF 使用普通的连接字符串运行却让我望而却步。谁能告诉我它是怎么做的，好吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T21:22:13.420

您在这里有几个选择。（我知道这很长，但请尝试阅读全文）。如果您可以提供需要此类事务的实际场景，那将有所帮助。

首先，您的假设是错误的，即如果 EF 和 Membership 具有相同的连接字符串，它将使用公共连接。有时这可能是真的，但不能保证。连接池尝试对给定字符串使用相同的连接，但如果连接已在使用中，它将创建第二个连接（或重用池中已有的第二个连接）。因此，这种推理方式会在某些时候给您带来麻烦。

Membership 旨在解决的问题之一是拥有一个可插入的提供程序接口，因此您可以更换成员资格提供程序并移动到不同的提供程序（例如从 Sql 到 ActiveDirectory），而无需修改您的应用程序（或对其进行大量修改）。

更紧密地集成这些功能意味着放弃这些好处。也许这是可以接受的，但您应该意识到，沿着这些路径走本质上将您的数据模型与特定的 Membership 提供程序模式紧密耦合。几年前，这似乎不是问题，因为会员系统多年来没有改变……但最近，MS 和其他人一直在引入新的会员系统，例如具有不同模式的 SimpleMembership 和 Universal Providers .

那么，如果我们要删除 Membership 的主要功能之一，为什么还要继续使用它呢？好吧，会员资格仍然有一些好处。主要是它提供了一个开箱即用的用户管理库的完整实现，包括安全密码加密/散列和问答认证等功能。这不是什么可以打喷嚏的事情，因为从头开始构建一个安全、无错误的会员系统并非易事（尽管起初看起来如此）。

因此，一种选择是基于现有的 MembershipProvider 实现您自己的 MembershipProvider（如 SqlMembershipProvider。Microsoft 为这些提供了源代码）。然后，您可以简单地覆盖架构以匹配您想要的任何内容，但保留所有其他功能，例如密码加密等等。只需将它们放入您自己的架构中即可。这使它们更适合您的数据模型。

但是，即使您选择使用标准会员提供程序，您也可以做一些事情。

首先，您可以简单地将成员表映射到您的实体框架模型中。只需将它们拖放到您的设计器上，或在 Code First 中添加它们。但是，如果您这样做，您应该只将它们用作只读，并且您不应该在成员资格表和您的表之间创建外键关系。相反，只需在您的 EF 查询中进行手动连接（这样工作量更大，但更安全）并将它们视为独立表。

好的，那么作为查询的一部分，您需要从成员表中更新或删除数据的情况呢？坦率地说，如果您使用的是标准成员资格表，我认为几乎没有理由会发生这种情况。

Membership 表非常简单，其中几乎没有实际数据，您应该在应用程序中的任何语句中都需要这些数据。除非您使用的是个人资料提供程序，否则我从不这样做。如果您需要映射成员表，我建议您创建自己的数据表，而不是使用 ProfileProvider。

我看到您可能想要在哪里登记交易的唯一原因是在创建新用户时。不过，既然这是一次性事件，那么DT可能就不是那么可怕的事情了。但是，您可能并不总是有可用的 DTC ......所以在这些情况下，您能做的最好的事情就是使用 try-catch 块来处理异常。

另一种方法是完全抛弃 Membership 并创建您自己的 IPrincipal 和 IIdentity 实现并简单地编写您自己的用户管理（但是，我仍然会使用 SqlManagementProvider 源作为此基础，因为它是一个很好的实现）。

然后，由于用户管理不是单独子系统的一部分，您可以安全地使用它进行更新和删除，而不必担心其他子系统可能在做什么。

TL;博士

如果您不能接受 DT，那么要么更改您的工作流程，更改您的代码以使用 try-catch-finally 语句（尽管这不能保证在应用程序代码突然死亡的情况下回滚，例如断电），或使用自定义 IPrincipal 和 IIdentity 实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T12:08:27.103

我在这里找到了答案：[https](https://stackoverflow.com/a/3408209/1169670) ://stackoverflow.com/a/3408209/1169670 。将“Enlist=false”添加到 ASP.NET Membership 系统的连接字符串会停止升级到 DTC。

然而，这种方法只是阻止了会员系统加入交易。这足以满足我的要求，但可能并非在所有情况下都如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T20:43:07.567

您应该查看基于 EF Codefirst 的 asp.net 通用提供程序。成员模式公开为 POCO 类和 DBSet，因此您应该能够将 DBSet 包含到一个通用 DBContext 类中 [http://nuget.org/packages/Microsoft.AspNet.providers.core](http://nuget.org/packages/Microsoft.AspNet.providers.core)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T14:53:01.710

我认为您不能让 EF 使用“普通”连接字符串。

在一些应用程序中，我有相同的普通和 EF 连接字符串并排放置

# python - 解析数据块中的多个背靠背消息

> ID：12409023
> 
> 赞同：0
> 
> 时间：2012-09-13T14:50:29.260
> 
> 标签：python, regex, fix-protocol

我有一个数据块，它基本上由管道分隔的固定消息（背靠背）组成。

我正在使用python，我能想到的唯一方法是找到`8=FIX.4.2`标签的索引（表示消息的开头），回到上一条消息的结尾，然后以这种方式确定消息。

我想知道这是否可以通过任何其他方式实现（例如正则表达式）。我不确定如何在这里应用正则表达式中的分组构造。

作为我正在查看的数据的示例：

```
8=FIX.4.2|9=122|35=D|49=hello|56=def|34=2|52=19700116-14:18:06.790|11=000007|55=DUMMY|54=#|38=1000|40=1|44=77|60=19700116-14:18:06.790|59=0|10=148|8=FIX.4.2|9=122|35=D|49=hello|56=def|34=2|52=19700116-14:18:06.790|11=000007|55=DUMMY54=#|38=1000|40=1|44=77|60=19700116-14:18:06.790|59=0|10=148| 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:53:43.717

您可以将`8=FIX.4.2`其用作`split()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:55:24.633

```
messages = your_input.split('8=FIX.4.2|')
messages = [ m.split('|') for m in messages ] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T15:14:48.480

split 的问题是它从结果表达式中删除了分隔符。所以这是对我拥有的数据进行拆分的回报。

`['', '9=122|35=D|49=hello|56=def|34=2|52=19700116-14:18:06.790|11=000007|55=IYH|54=#|38=1000|40=1|44=77|60=19700116-14:18:06.790|59=0|10=148|', '9=155|35=D|49=hello|56=def|34=2|52=19700116-14:18:06.790|11=000007|55=IYH|54=#|38=1000|40=1|44=77|60=19700116-14:18:06.790|59=0|10=148|']`

我认为我正在寻找的方法将涉及使用分组以及 re.finditer。

完成后我会发布表达式（因为我以前从未使用过它）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T14:21:21.750

`expr = r'8=FIX\.4\.2.*?10=\d+\|' msglist = re.findall(expr,data)`

这似乎以我希望的方式工作。

# asp.net - 服务器端 SignalR 集线器 IConnected 和 IDisconnect 不起作用

> ID：12409034
> 
> 赞同：1
> 
> 时间：2012-09-13T14:50:49.667
> 
> 标签：asp.net, websocket, signalr, signalr-hub

我刚刚将[SignalR](https://github.com/SignalR/SignalR/wiki/Hubs)中的示例代码翻译为 VB.NET，如下所示。当`test`我从客户端调用它时，它会被正确调用，但服务器端`Connect`,`Disconnect`和`Reconnect`永远不会被调用。还有什么我应该做的吗？我已经用 IE10、Chrome 和 FF 进行了测试。

已编辑：`$.connection.hub.disconnected`并且`stateChanged`正在按我的预期工作。

```
 Public Class Status
    Inherits Hub
    Implements IDisconnect
    Implements IConnected

    Public Function Disconnect() As Threading.Tasks.Task Implements IDisconnect.Disconnect
        Return Clients.leave(Context.ConnectionId, DateTime.Now.ToString())
    End Function

    Public Function Connect() As Threading.Tasks.Task Implements IConnected.Connect
        Return Clients.joined(Context.ConnectionId, DateTime.Now.ToString())
    End Function

    Public Function Reconnect(groups As IEnumerable(Of String)) As Threading.Tasks.Task Implements IConnected.Reconnect
        Return Clients.rejoined(Context.ConnectionId, DateTime.Now.ToString())
    End Function

    Public Sub test()
        Stop
    End Sub

End Class 
```

# java - 将 Object 转换为 int 时出错

> ID：12409036
> 
> 赞同：0
> 
> 时间：2012-09-13T14:50:53.597
> 
> 标签：java, android, serialization, casting

我有一个 Java 服务器和一个 Android 客户端。服务器将文件的维度发送给客户端。客户端在.readObject() 中接收对象。

我需要将 in.readObject() 返回的对象转换为 int。如果我做

```
int filesize = (Integer) in.readObject() 
```

编译时没有问题，但 Android 客户端执行停止，没有错误或警告。如果我尝试记录收到的对象，它会显示正确发送的文件尺寸。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:53:04.427

您将从流中获取对象作为响应。首先，您需要转换为对象，然后键入您想要的类型。

```
Object tempObject =  (Object)in.readObject() ;

   int filesize = Integer.valueOf(tempObject.toString()); 
```

# jquery - iframe 跨域 onClick

> ID：12409038
> 
> 赞同：1
> 
> 时间：2012-09-13T14:51:01.273
> 
> 标签：jquery, youtube, onclick

我的网站中有一个嵌入 iframe 的 youtube 视频。我想知道我的网站对该视频的点击次数（不是总观看次数）。我找不到 iframe 的 onClick（或类似）事件，并且 jquery 绑定事件方法仅适用于同一域中的 iframe。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:52:50.213

不幸的是，这是不可能的。如果你想跟踪点击，我想你可以有某种带有播放按钮的缩略图，它记录点击，然后将 iFrame 加载到页面上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:53:02.657

您可以尝试在 javascript 文档中将您的文档域设置为 youtube.com：

```
document.domain = "youtube.com"; 
```

从未在外部站点上尝试过，但至少可以在不同的 Intranet 站点上使用。

# php - 排序数组值而不使用内置的 php，如 sort() 等

> ID：12409040
> 
> 赞同：3
> 
> 时间：2012-09-13T14:51:05.097
> 
> 标签：php

```
<?php
function sortArray() {
    $inputArray = array(8, 2, 7, 4, 5);
    $outArray = array();
    for($x=1; $x<=100; $x++) {
        if (in_array($x, $inputArray)) {
            array_push($outArray, $x);
        }
    }
    return $outArray;
}

$sortArray = sortArray();
foreach ($sortArray as $value) {
    echo $value . "<br />";
}
?> 
```

我有这段代码，但有两个问题

*   如果我的数组中的数字大于 100 怎么办？
*   另外，我希望看到不止一种排序方法

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-07T19:23:13.517

这是排序的方法。

```
<?php

$array=array('2','4','8','5','1','7','6','9','10','3');

echo "Unsorted array is: ";
echo "<br />";
print_r($array);

for($j = 0; $j < count($array); $j ++) {
    for($i = 0; $i < count($array)-1; $i ++){

        if($array[$i] > $array[$i+1]) {
            $temp = $array[$i+1];
            $array[$i+1]=$array[$i];
            $array[$i]=$temp;
        }       
    }
}

echo "Sorted Array is: ";
echo "<br />";
print_r($array);

?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-07-16T00:31:57.823

这里所有接受的答案都很好，其中大多数使用两个 for 循环对数组进行排序。起初，代码看起来相当直接，甚至我也这么认为。但后来我想进一步调查。这种方法效率如何？因此，为了保持一致性，我创建了一个包含 10,000 个“计数”或值的数组，并将其写入一个文件以供稍后包含，使用以下代码：

```
$str = "<?php \n \$array = array( \n";
for($x = 0; $x <= 10000; $x++){
    $str .= mt_rand(0,10000).",\n";
}
$str .= "); \n ?>";

$file = fopen('req_arr.php', 'w+');
echo fwrite($file,$str);
fclose($file);

include_once('req_arr.php');

$arr = $array; 
```

然后我使用了这里大多数人给出的两个 for 循环方法，并测量了所花费的时间：

```
 $start = microtime(1);
    $cnt = count($arr);
    for($i = 0; $i < $cnt; $i++ ){
        for($j = 0; $j < $cnt-1; $j++ ){
            $temp = '';
            if($arra[$j] > $arra[$j+1]){
                $temp = $arr[$j];
                $arr[$j] = $arr[$j+1];
                $arr[$j+1] = $temp;
            }
        }
    }
    $stop = microtime(1);
    echo $stop - $start;
    echo '<pre>'; print_r($arr); 
```

这使执行时间（以秒为单位）为**7.5408220291138**。

注意：此代码在 Windows10、64 位、i7 gen 4、8 GB RAM 和 Chrome 上的 XAMPP 中进行了测试。

这太过分了。我敢肯定PHP不能这么草率。所以接下来我使用以下代码测试了内置的 PHP rsort() 函数：

```
$start = microtime(1);
rsort($arr, SORT_NUMERIC);
$stop = microtime(1);
echo $stop - $start;
echo '<pre>'; print_r($arr); 
```

这一次，执行时间仅为**0.0033688545227051**秒。只需 0.0033688545227051 秒即可对 10,000 个值的数组进行排序。显然，这两个 for 循环方法对于 PHP 在其核心中使用的任何东西都是低效的。

对 Google/PHP.net 的快速研究给了我答案，即 PHP 使用快速排序算法对索引数组进行排序，并且它不使用两个 for 循环而是递归函数。我深入挖掘并找到了一些 C++、Java 等的快速搜索示例。因此，我在 PHP 中复制了它们，如下所示：

```
/*
    The main function that implements QuickSort
    arr --> Array to be sorted,
    low  --> Starting index,
    high  --> Ending index
*/
function quickSort(&$arr, $low, $high)
{
    if ($low < $high)
    {
        /* pi is partitioning index, arr[p] is now
           at right place */
        $pi = partition($arr, $low, $high);
        // Separately sort elements before
        // partition and after partition
        quickSort($arr, $low, $pi - 1);
        quickSort($arr, $pi + 1, $high);
    }

    return $arr;
}

function partition (&$arr, $low = 0, $high)
{
    $pivot = $arr[$high];  // pivot
    $i = ($low - 1);  // Index of smaller element

    for ($j = $low; $j <= $high-1; $j++)
    {
        // If current element is smaller than or
        // equal to pivot
        if ($arr[$j] <= $pivot)
        {
            $i++;    // increment index of smaller element
            swap($arr[$i], $arr[$j]);
        }
    }
    swap($arr[$i + 1], $arr[$high]);
    return ($i + 1);
}

function swap(&$a, &$b){
    $t = $a;
    $a = $b;
    $b = $t;
} 
```

显然，这可以进一步优化，但我只是想让一些东西运行并查看结果，这就足够了。那么，现在让我们看看结果：

```
$start = microtime(1);
$sarr = quickSort($array, 0, $cnt-1);
$stop = microtime(1);
echo $stop - $start;
echo '<pre>';print_r($sarr);
die(); 
```

该算法所花费的时间为：**0.022707939147949**

仍然，不如 rsort() 快但令人满意。我也用一百万个值数组尝试了同样的方法，但是两个 for 循环数组刚刚耗尽了内存，我决定即使是 10,000 个值数组也很好地证明了这个理论。

欢呼...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-13T13:09:23.903

```
 $arr= array(110,20,130,100,2);

    for($i=0; $i<count($arr)-1; $i++)
    {
        for($j=0; $j<count($arr)-1; $j++)
        {
            if($arr[$j]> $arr[$j+1]){
                $temp= $arr[$j+1];
                $arr[$j+1]= $arr[$j];
                $arr[$j]= $temp;
            }
        }

    }
    print_r($arr); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-15T15:00:39.153

```
//Here is the simplest way of sorting...
$list = array('5','15','7','12','39','1','5');
$a;
$b;
for($i=0;$i<count($list);$i++){ 
    for($j=0;$j<count($list);$j++){
        if($list[$i] < $list[$j]){
            $a = $list[$j]; 
            $b = $list[$i];     

            $list[$i] = $a;
            $list[$j] = $b;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-12-23T09:49:26.370

排序和数组不使用内置方法，但所有答案都使用预定义方法`count`。

我只是想折射它。请找到以下答案。

```
$array = [50,12, 30, 10, 9, 14];
$count = 0;
foreach($array as $elem){
    $count++;
}
for ($i = 0; $i < $count; $i++) {
    for ($j = 0; $j < $count - 1; $j++) {
        if ($array[$j] > $array[$j + 1]) { 
            $temp = $array[$j];
            $array[$j] = $array[$j + 1]; 
            $array[$j +1] = $temp; 
        }
    }
}
print_r($array); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-13T15:00:39.477

这是最简单的排序方法...

```
function sort($arr) {
  for ($i=0; $i<count($arr); $i++) {
    for ($j=0; $j<count($arr)-1-$i; $j++) {
        if ($arr[$j+1] < $arr[$j]) {
            swap($arr, $j, $j+1);
        }
     }
  }
  return $arr;
}

function swap(&$arr, $a, $b) {
   $tmp = $arr[$a];
   $arr[$a] = $arr[$b];
   $arr[$b] = $tmp;
}

//using sorting functions
$arr = array(1,13,2,9,5,7,0,3);

 echo("Before sorting");
 print_r($arr);

 sort($arr);

 echo("Sorted array");
 print_r($arr); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-13T03:40:30.630

看看这个，这个效率更高

```
$array=array('2','4','8','5','1','7','6','9','10','3');

for($i=1;$i< count($array);$i++)
{
   for($j=$i;$j>0;$j--)
   {    
       if($array[$j] < $array[$j-1])
       { 
           $tmp = $array[$j];
           $array[$j] = $array[$j-1];
           $array[$j-1] = $tmp ;
       }
   }
}

echo "<pre>";
print_r($array); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-08-28T16:01:29.373

这是php中的正确解决方案：

```
$array=array('2','4','8','5','1','7');

for($i=1;$i< count($array);$i++)
{
   for($j=$i;$j>0;$j--)
   {    
       if($array[$j] < $array[$j-1])
       { 
           $tmp = $array[$j];
           $array[$j] = $array[$j-1];
           $array[$j-1] = $tmp ;
       }
   }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-11-06T06:19:36.523

我们可以使用*冒泡排序*进行排序。

> **O(n) 的最佳情况下的性能。否则，最好情况 == 最坏情况 == 平均情况 == O(n^2)**

```
$Obj1 = array(20, 30, 10, 50, 40, 60, 100, 90, 80, 70);

 $temp;

print_r($Obj1);

for ($i = 0; $i < sizeof($Obj1) - 1; $i++) {

for ($j = sizeof($Obj1) - 1; $j > $i; $j--) {
    if ($Obj1[$j - 1] > $Obj1[$j]) {
        $temp = $Obj1[$j-1];
        $Obj1[$j-1] = $Obj1[$j];
        $Obj1[$j] = $temp;
        $temp = 0;
    }
}

}

print_r($Obj1); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-06-18T15:13:28.707

你可以参考这个程序。

```
<?php

//using sorting functions
$arr = array(1,13,2,9,5,7,0,3);

echo("Before sorting");
echo "<pre>";
print_r($arr);
echo "</pre>";

for ($i=0; $i < count($arr)-1; $i++) {
	sortarray($arr);
}

function sortarray(&$arr) {
    for ($i=0; $i < count($arr)-1; $i++) {
        if ($arr[$i+1] < $arr[$i]) {
            $tmp = $arr[$i+1];
            $arr[$i+1] = $arr[$i];
            $arr[$i] = $tmp;
        }
    }
}

echo("Sorted array");
echo "<pre>";
print_r($arr);
echo "</pre>";
?>
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-08-25T07:52:33.913

```
 **Using Bubbole Sort:**
<?php
        $arr =array(12,10,190,90,890);
        echo "Before Sorting Array";echo '</br>';
        print_r($arr);echo '</br>';
        echo 'After Sorting Arry:'.'</br>';
        for ($i = 0; $i < sizeof($arr); $i++) {
            for ($j = $i + 1; $j < sizeof($arr); $j++) {
                $tmp = 0;
                if ($arr[$i] > $arr[$j]) {
                    $tmp = $arr[$i];
                    $arr[$i] = $arr[$j];
                    $arr[$j] = $tmp;
                }
            }
            echo $arr[$i];echo '</br>';
        }
    ?> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-09-15T06:32:37.287

检查这个，初学者的基本逻辑`step by step`

```
<?php 

         $array = array('5','15','7','12','39','1','5');

         echo "Before Sort ";
         echo "<pre>";
         print_r($array);

         echo "<BR/>After Sort ";
         for($prnt_index=0; $prnt_index < count($array); $prnt_index++){

            // echo $array[$prnt_index].", ";

            for($child_index=0; $child_index < count($array)-1 ; $child_index++){

                if($array[$child_index] > $array[$child_index+1] ){     // 9, 7

                    //apply swapping concept
                    $temp_var= $array[$child_index+1];  //put 7 in some temp var 

                    //  swap current index with next index
                    $array[$child_index+1] =$array[$child_index];

                    // get temp data and put on current index 

                    $array[$child_index] =$temp_var; 
                }

            }   
         }

         print_r($array);
         echo "</pre>";

        ?> 
```

**输出** [![在此处输入图像描述](../Images/99813a6977ac6ead9af4eb4e954467af.png)](https://i.stack.imgur.com/dluUO.png)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-11-27T09:59:06.463

```
<?php
$array = array(5,3,1,6,7,4,8,2);
for($i=0; $i < count($array); $i++)
{
  for($j=0; $j < $i; $j++)
  {
    if($array[$i] < $array[$j])
    {
        $temp = $array[$i];
        $array[$i] = $array[$j];
        $array[$j] = $temp;
    }
  }
}
print_r($array);
?> 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-04-03T12:01:21.493

```
<?php
$array  = array(1,4,10,5,8,3,6,61,0);

for($x=0;$x<=count($array)-1;$x++){

    for($z=0;$z<=count($array)-1;$z++){

    if($array[$x]<$array[$z])
    {
        $temp = $array[$x];
        $array[$x] = $array[$z];
        $array[$z] = $temp;
    }

    }   
}

print_r($array); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-09-21T21:02:33.563

```
//Best solution for bubble sort
$a = [10,5,2,8,7];
$k = 0;//I used this variable because i want to show you how many times my for loop needs to iterate maximum.
for($i = 0;$i < count($a); $i++){
    for($j = 1; $j < count($a) - $i; $j++){
        if($a[$j -1 ] > $a[$j]){
            $temp = $a[$j];
            $a[$j] = $a[$j -1];
            $a[$j - 1] = $temp;
        }
        $k++;
    }

}
echo $k;
echo '<pre>';
print_r($a);
echo '</pre>'; 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-06-16T04:43:46.763

这是我在 PHP 中的[快速排序算法：](https://en.wikipedia.org/wiki/Quicksort)

```
<?php
$array = [1, 4, 3, 5, 9, 6, 1, 6, 4, 1, 1, 4, 5, 6, 6, 7, 2, 1, 4, 0];
$j = count($array);
$t = $j-1;
while($j>=0){
    for ($i=0; $i < $t; $i++) { 
        $aux = $array[$i]; 
        if($array[$i]>$array[$i+1]){
            $array[$i] = $array[$i+1];
            $array[$i+1] = $aux;
        }
    }
    $j--;
}
print_r($array); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-10-15T08:55:15.557

```
$q = [1,3,6,2,8,9,4];  //let's say any array

for($i = 0; $i<=count($q)-1;$i++){
  for($j =0; $j<count($q)-1;$j++){
     if($q[$j] < $q[$j+1]){         //for ASC or DESC just switch '>' or '<'
          $var = $q[$j+1];
          $q[$j+1] = $q[$j];
          $q[$j]=$var;              
     }
   }
}
print_r($q);  //This is sorted array' 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-04-07T07:03:29.680

```
$arr = array(8, 2, 7, 4, 5);

for($j=0; $j <= count($arr)-1; $j++){
  for($i=0; $i <= count($arr)-1; $i++){

      if( $arr[$i] < $arr[$j]){  //'<' or '>' operator for Asc, Dec.
         $temp = $arr[$i];
         $arr[$i] = $arr[$j];
         $arr[$j] = $temp;
      }
}
echo'<pre>';
print_r($arr); 
```

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2015-08-21T06:51:26.780

```
$array = array('1','2','4','3','8','7','10','11');

$c = count($array);
for($i=0;$i<$c;$i++)
{
    if($array[$i] > $array[$i+1]) {
            $temp = $array[$i+1];
            $array[$i+1]=$array[$i];
            $array[$i]=$temp;
        }  
}

echo "Sorted Array is: ";
echo "<br /><pre>";
print_r($array); 
```

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2019-12-22T08:49:09.897

这是最好的排序方式。还要检查响应时间。

```
 function findMaxVal($arr)
 {
  $maxNum = $arr[0];

  foreach($arr as $arval)
  {
   $maxNum = $maxNum < $arval ? $arval : $maxNum;
  }

  return $maxNum;
 }

 function sortArrFun($arr)
 {
  $maxVal = findMaxVal($arr);
  $countArr = array();

  for($i = 0; $i <= $maxVal; $i++)
  {
   $countArr[$i] = 0;
  } 

  for($i = 0; $i < count($arr); $i++)
  {
   $countArr[$arr[$i]]++;
  }

  $order = array();
  for($i = 0; $i < count($countArr); $i++)
  {
   for($j = 0; $j < $countArr[$i]; $j++)
   {
    $order[] = $i;
   }
  }

  return $order;
 }

 $arrr = [1,22,333,45,5,8888,9999,0,9,7,8]
 print_r(sortArrFun($arrr1)); 
```

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2020-04-07T19:00:23.123

排序数组值而不使用内置的 php，如 sort() 等 [显示演示](https://paiza.io/projects/e/lYYo7QKHX2tlVtSDuGZWtA?theme=twilight) 仅适用于 php7.2.0 - 7.4.4

```
<?php
$str = [54,23,2,56,7,2,300];
$count = count($str);
for ($j = 0; $j < $count; $j++) {
for ($i = $j + 1; $i < $count; $i++) {
    if ($str[$i] < $str[$j]) {
        list($str[$i], $str[$j]) = [$str[$j], $str[$i]];
    }
}
}
print_r($str);
?> 
```

# linux - 如何从 Linux 创建不存在的目录将文件发送到 Sharepoint

> ID：12409041
> 
> 赞同：3
> 
> 时间：2012-09-13T14:51:05.627
> 
> 标签：linux, sharepoint, curl

将文件从 linux 发送到 SharePoint 时出现问题。如果我要上传到现有目录，一切都很好，我使用这种方法：

```
curl --ntlm --user username:password --upload-file myfile.xls https://sharepointserver.com/sites/mysite/myfile.xls 
```

不幸的是，当我将目标指向不存在的目录时会出现问题，例如：

```
curl --ntlm --user username:password --upload-file myfile.xls https://sharepointserver.com/sites/mysite/nonexist/myfile.xls 
```

我希望它在路径上创建所有必要的目录。我尝试使用“--create-dirs”CURL 选项，但它不起作用。

任何想法如何实现目标？它实际上不必是 CURL，我可以使用 linux 上可用的不同方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T19:02:27.510

正如名称（CLIENT URL）所暗示的，在上传文件时，您将无法在涉及 http/https 的远程服务器上创建新目录。

对于涉及 http/https 服务器的下载，--create-dirs 选项仅适用于本地计算机以创建新目录（例如，当您将内容下载到本地 linux 计算机时）。

但是，在使用 ftp/sftp 连接到服务器时，您将能够在远程服务器上创建新目录。

# python - 如何将外部模块的日志消息打印到主要 Python 模块的终端窗口？

> ID：12409046
> 
> 赞同：1
> 
> 时间：2012-09-13T14:51:23.163
> 
> 标签：python, logging, terminal, python-2.7, external-process

我正在编写一个 Python 命令行程序。

有一个主要的 Python 脚本文件，作为入口点。当用户运行此脚本时，它将执行一些外部 Python 脚本文件。外部 Python 脚本文件也可以执行其他外部 Python 脚本文件。外部文件的数量是可变的。

Python 脚本将使用以下命令执行外部 Python 脚本：

```
p = subprocess.Popen(args)

or

p = subprocess.call(args) 
```

当我在终端窗口中运行主要的 Python 脚本时，它会在运行时在屏幕上打印实时日志消息。现在，我想从主 Python 脚本调用的所有外部 Python 脚本中获取所有日志消息，并将其打印到同一个终端窗口（我用来运行主脚本的终端窗口）。

例如，下面是脚本执行的顺序：

```
1.Main-script
    |
    2.Layer-1-script-1
        |
        3.Layer-2-script-1
        |
        4.Layer-2-script-2
        |
    5.Layer-1-script-2
    |
    6.Layer-1-script-3
    |
7.Main-script(continued) 
```

当我在终端窗口中运行主脚本时，是否可以在终端窗口上获得实时日志消息，如下所示？

```
[time-hh-mm-ss][log message from main script]Script is running..
[time-hh-mm-ss][log message from main script]Calling script layer-1-script-1..
[time-hh-mm-ss][log message from layer-1-script-1]Script is running..
[time-hh-mm-ss][log message from layer-1-script-1]Calling script layer-2-script-1..
[time-hh-mm-ss][log message from layer-2-script-1]Script is running..
[time-hh-mm-ss][log message from layer-2-script-1]Calling script layer-2-script-2..
[time-hh-mm-ss][log message from layer-2-script-2]Script is running..
[time-hh-mm-ss][log message from layer-2-script-2]Calling script layer-1-script-2..
[time-hh-mm-ss][log message from layer-1-script-2]Script is running..
[time-hh-mm-ss][log message from layer-1-script-2]Calling script layer-1-script-3..
[time-hh-mm-ss][log message from layer-2-script-3]Script is running..
[time-hh-mm-ss][log message from main script]Back to main script. Script is running.. 
```

是否有可能`real time log messages`在终端窗口中得到类似的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:05:48.980

如果你依赖`subprocess`模块，那么你只能通过`subprocess.PIPE`s 进行通信，以便从子进程中收集标准输出和标准错误。因此，让子进程将其日志输出写入 stdout/err 并通过管道将子进程连接到父进程。通过这样做，您基本上可以将子进程的标准输出打印到父进程的标准输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:07:09.797

如果您可以控制所有 Python 脚本，那么您可以使用`multiprocessing`而不是`subprocess`使用 which 您可以执行以下操作：

**测试.py**：

```
import logging
import test2
import multiprocessing as mp

logger = mp.get_logger()

def main():
    logger.info('Script is running')
    logger.info('Calling script test2')
    proc = mp.Process(target = test2.main)
    proc.start()
    proc.join()

if __name__ == '__main__':
    formatter = logging.Formatter('[%(asctime)s] [%(filename)s]: %(message)s',
                                  datefmt = '%H:%M:%S')
    handler = logging.StreamHandler()
    handler.setFormatter(formatter)
    logger.addHandler(handler)
    logger.setLevel(logging.INFO)    
    main() 
```

**测试2.py：**

```
import multiprocessing as mp

logger = mp.get_logger()

def main():
    logger.info('Script is running...') 
```

运行`test.py`产量

```
[11:36:50] [test.py]: Script is running
[11:36:50] [test.py]: Calling script test2
[11:36:50] [util.py]: child process calling self.run()
[11:36:50] [test2.py]: Script is running...
[11:36:50] [util.py]: process shutting down
[11:36:50] [util.py]: process exiting with exitcode 0
[11:36:50] [util.py]: process shutting down 
```

# php - 如果后端发送标头，Nginx 作为反向代理和缓存

> ID：12409049
> 
> 赞同：1
> 
> 时间：2012-09-13T14:51:25.923
> 
> 标签：php, caching, nginx, reverse-proxy

1.  如果后端发送标头，Nginx 可以缓存请求吗？也许包括TTL？
2.  可以使用请求使缓存无效吗？以饼干为例？

我想从应用程序的逻辑而不是从 nginx 配置文件控制缓存，并且不要让请求到达 apache/php。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T17:02:56.897

[http://wiki.nginx.org/HttpCoreModule#Variables](http://wiki.nginx.org/HttpCoreModule#Variables)提供以下内容：

```
$sent_http_HEADER

The value of the HTTP response header HEADER when converted to lowercase and
with 'dashes' converted to 'underscores', 
e.g. $sent_http_cache_control, $sent_http_content_type...; 

$cookie_COOKIE

The value of the cookie COOKIE; 
```

如果将它与 if 块结合使用，则可以执行以下操作：

```
if ($sent_http_your_added_header = "") { 
  proxy_cache your_cache_zone;
}

if ($cookie_BYPASS = "1") {
  proxy_bypass $cookie_BYPASS;
} 
```

注意：如果您的 BYPASS cookie 具有 1 或 0 值，您实际上可以忘记 if 并使用 $cookie_BYPASS，请参阅[http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_bypass](http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_bypass)

就缓存时间而言，正如[http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_valid](http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_valid)解释的那样，nginx 响应“X-Accel-Expires”、“Expires”和“Cache-Control”标头（除非你告诉它不要使用 proxy_ignore_headers 指令）

# ios - iOS 修改使用 IB 创建的 UIElements 的层

> ID：12409054
> 
> 赞同：0
> 
> 时间：2012-09-13T14:51:40.290
> 
> 标签：ios, uiview, uitextfield, uitextview, uielement

在我的应用程序中，我想创建一个 custom `UIElement`，在我的例子中是一个`UITextView`带有圆角和边框颜色的东西。`UITextView`但是，只有创建from 代码并将其添加到使用该`addSubView`方法的视图中，我才能做到这一点。

这不是太优雅，而且在单元测试期间它也会失败。

有没有办法我可以`UITextView`使用 Interface Bulder 创建我的并且仍然能够修改它的 layer 属性？

很感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:55:26.070

如果您`IBOutlet`通过 ctrl 从笔尖或情节提要拖动到 .h 文件来创建一个，您可以像往常一样使用 .h 文件访问您的图形元素`myTextView.layer.cornerRadius = 5.0;`。

# scripting - SSIS 生产包没有显示一些变化

> ID：12409055
> 
> 赞同：0
> 
> 时间：2012-09-13T14:51:42.627
> 
> 标签：scripting, ssis

我有一个 SSIS 包，可以从通过管道传递的数据集中检测测试域。我使用脚本组件发送电子邮件通知，其中列出了已标记为测试域的域。当我第一次发布带有通知的包时，它为每个域发送了一封单独的电子邮件，在收到许多电子邮件后，我将脚本更改为发送一封包含测试域列表的电子邮件。但是，每次我发布此更新时，它都会继续为每个测试域发送一个通知。

我调查过的事情：

*   第一封邮件和第二封邮件的内容不同。因此，我在 Notepad++ 中进行了“在文件中查找”搜索，以查看是否可以找到原始电子邮件内容的存储位置。没有找到包含原始内容的结果。
*   我已禁用发送通知并发布包的步骤。这将导致不发送通知电子邮件。但是，当我重新启用该步骤并发布时，为每个测试域发送一封电子邮件的原始通知会再次启动。
*   我已尝试删除执行此包的 SQL 作业并重新创建它，但仍然通过原始通知。

因此，即使在生产服务器上也找不到原始内容的痕迹，我不知道这是从哪里来的。我看不到任何关于内容可以在哪里缓存的信息，但即使它正在被缓存，当我禁用通知步骤时，它仍然会发送通知。

我担心如果这不能修复，那么这是否意味着还有其他软件包没有完全更新？

任何想法或帮助将不胜感激。

这几乎就是脚本组件的设置方式......

```
Public Class ScriptMain
    Inherits UserComponent

Private strDomains As String = String.Empty

Public Overrides Sub PreExecute()
    MyBase.PreExecute()
End Sub

Public Overrides Sub PostExecute()
    If strDomains.Length > 0 Then
        Dim myHtmlMessage As MailMessage
        Dim mySmtpClient As SmtpClient
        Dim strMessageBody As New StringBuilder

        strMessageBody.AppendLine("The listed domains have blah blah blah...")
        strMessageBody.Append(strDomains)
        strMessageBody.AppendLine(String.Empty)
        strMessageBody.AppendLine("Love and Kisses,")
        strMessageBody.AppendLine("Your Loving ETL Package")
        strMessageBody.AppendLine(Variables.PackageName)

        myHtmlMessage = New MailMessage("ETLNotices@company.com", "me@company.com", "Possible Test Domains", strMessageBody.ToString)

        mySmtpClient = New SmtpClient("smtp.company.com")
        mySmtpClient.Credentials = CredentialCache.DefaultNetworkCredentials
        mySmtpClient.Send(myHtmlMessage)
    End If

    MyBase.PostExecute()
End Sub

Public Overrides Sub Input0_ProcessInputRow(ByVal Row As Input0Buffer)
    Dim str As New StringBuilder
    str.AppendLine(strDomains)
    str.AppendFormat("{0}", Row.DomainName)

    strDomains = str.ToString
End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T04:29:53.380

克里斯，

我有一些问题：

我猜您在脚本任务中使用循环机制来遍历所有域；在其中找到测试对象；将它们附加到一个字符串，最后发送一封电子邮件。这个对吗？

您是在脚本中发送邮件还是创建了单独的发送邮件任务？

您的邮件正文是否来自配置文件中的某个变量？

# c++ - clang 或 gcc 是否利用引用限制进行别名分析

> ID：12409058
> 
> 赞同：1
> 
> 时间：2012-09-13T14:51:50.507
> 
> 标签：c++, gcc, clang, alias, compiler-optimization

我想知道别名分析是否在 clang 或 gcc 内部传递，将 C++ 成员引用变量与指针变量区别对待。如果编译器可以利用一些关于引用的更严格的规则，这将是一个基于性能的参数，用于首选引用而不是指针。

证明这一点的一种方法是在引用和指针之间更改更改程序集的位代码。

以下是可能产生差异的代码示例：

```
struct FooRef {
  FooRef(int &i) : i_(i) {}
  int &i_;
  int add(int a, int *messWithAliasAnalysis) { *messWithAliasAnalysis= 0; return i_ + a; }
};

struct FooPtr {
  FooPtr(int *i) : i_(i) {}
  int *i_;
  int add(int a, int *messWithAliasAnalysis) { *messWithAliasAnalysis= 0; return *i_ + a; }
};

// These functions are here to force the compiler to compile the add functions.
int foo(FooPtr &fooPtr, int *messWithAliasAnalysis) {
  return fooPtr.add(5, messWithAliasAnalysis);
}

int foo(FooRef &fooRef, int *messWithAliasAnalysis) {
  return fooRef.add(5, messWithAliasAnalysis);
} 
```

但是对于 gcc 4.6，它不会。两个 foo 函数都发出相同的程序集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:58:38.027

你的意思是什么“关于引用的限制性规则”？在您的示例中：

```
int x;
FooRef r(x);
foo(r, &x); 
```

...创建一个情况，其中`*messWithAliasAnalysis`和`i_`是相同的整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-24T19:45:21.830

C++ 没有对限制的标准支持，但许多编译器具有通常在 C++ 和 C 中都可以工作的等价物，例如 GNU 编译器集合**限制**和 Visual C++ __restrict 和 __declspec(restrict)。

[http://gcc.gnu.org/onlinedocs/gcc/Restricted-Pointers.html](http://gcc.gnu.org/onlinedocs/gcc/Restricted-Pointers.html)

[http://msdn.microsoft.com/en-us/library/5ft82fed.aspx](http://msdn.microsoft.com/en-us/library/5ft82fed.aspx)

gcc 和 VC++ 都支持 C++ 中的指针上的 __restrict，但只有 gcc 支持引用上的它 - 因为引用不能在没有未定义行为的情况下重新安装，所以编译器可以静态确定别名。

# java - 用于生成 vsd 或 vdx 文件的 Java API

> ID：12409059
> 
> 赞同：2
> 
> 时间：2012-09-13T14:51:53.673
> 
> 标签：java, export, visio

是否有任何库可以从 Java 生成 Visio 文件？

DatadiagramML 架构 (vdx) 在[http://www.microsoft.com/en-us/download/details.aspx?id=23976](http://www.microsoft.com/en-us/download/details.aspx?id=23976)上可用，但它看起来非常复杂，我希望有任何 API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T16:07:28.987

一些适合您的选择：

## VisioAutomation.VDX

我编写了一个名为“VisioAutomation.VDX”的库，它可能对您有所帮助。它是用 C# 编写的，但应该可以直接转换为 Java。

您可以在此处获取源代码：[https ://github.com/saveenr/VisioAutomation](https://github.com/saveenr/VisioAutomation)

## pkgVisio

[http://pkgvisio.codeplex.com/](http://pkgvisio.codeplex.com/)

对于 Visio 2013 XML 格式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T22:54:54.353

Visio 自己的 API 是一个 COM API，因此如果您的应用程序在 Windows 上，您可以使用 Java 到 COM 桥并使用 Visio 生成绘图。您可能必须为每台运行您的应用程序的 PC 购买 Visio 许可证，并且在服务器方案中使用此方法存在许可限制。

您可能要考虑的替代方法是使用生成 Visio 支持的非 Visio 文件格式（如 SVG）的库。

# c# - 使用ac#条件语句渲染html

> ID：12409064
> 
> 赞同：1
> 
> 时间：2012-09-13T14:52:06.687
> 
> 标签：c#, asp.net

有没有办法在 C# 中为我的 asp.net 页面执行条件语句？我希望它是，基本上：

```
if bool is true, add <a href> 
```

我有这个：

```
<asp:Label ID="BenLabel" CssClass='<%#((Entry)(Container.DataItem)).HasBenform ? "EnabledEntry" : "DisabledEntry"%>' Text="Benefits Form" runat="server" /> 
```

通过这种方式，它会根据 bool 值更改其 CSS 类。但是，我也可以添加链接吗？我将如何编码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T14:53:31.493

添加一个`HyperLink`然后`Visible`根据这个布尔条件渲染它。

```
<asp:HyperLink ID="BenLink" Visible='<%# ((Entry)(Container.DataItem)).HasBenform %>' ... runat="server" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:55:48.633

我喜欢在 page_init 或 Page_Load 后面的代码中处理这种逻辑。

像这样的东西

```
If (NeedToShowLink)
{
    Link.Visible = true;
}
else
{
    Link.Visible = false;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-13T15:23:42.373

为什么要将控件呈现到客户端并将css设置为隐藏。

您可以在 aspx 页面中执行以下操作或由 Andrew 建议。

<%if(condition)%> <a href="http://test.com">点我</a>

快乐编码！

# gnuplot - gnuplot中行旁边的标题

> ID：12409068
> 
> 赞同：1
> 
> 时间：2012-09-13T14:52:22.210
> 
> 标签：gnuplot

新版 gnuplot 的功能列表指出“可以将绘图标题放置在适当的图形中的绘图线旁边”。这是我希望能够自动完成的事情，但我在文档中找不到如何做到这一点的提及（可能是因为它还没有被编写）。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T18:40:01.193

我在命令行文档中找到了答案，我假设 pdf 尚未更新。正文如下：

```
If you want the title of a plotted line to be placed immediately before or
after that line in the graph itself, use `at {beginning|end}`.  This option
may be useful when plotting `with lines` but makes little sense for some
other plot styles. 
```

# asp.net-mvc - 将ajax帖子的返回数据转移到隐藏？ASP.NET MVC

> ID：12409069
> 
> 赞同：3
> 
> 时间：2012-09-13T14:52:25.347
> 
> 标签：asp.net-mvc, jquery, razor, http-post

我的页面上有四种不同的形式，每一种都是 ajax 形式。

我正在向 MVC 控制器发送带有 ajax 的第一个表单的发布请求，它基本上将 ViewData["TEST"] 返回给我。

我想在我的视图上使用 ViewData，我需要将其设置为隐藏字段以使用其他表单。

我如何在不使用正常提交的情况下达到它？

这是我的代码：

```
@using (Ajax.BeginForm("Index", new AjaxOptions{ HttpMethod = "POST" }))
{
    <script type="text/javascript"> alert('@(ViewData["TEST"])'); </script>
    <input type="text" name="name" />
    <input type="button" onclick="javacript:SubmitAjax();" />
}

<script type="text/javascript">
    function SubmitAjax() {
        $.ajax({
            type: 'POST',
            data: $("#form0").serialize(),
            url: "/Home/Index",
            timeout: 2000,
            async: false,
            success: function (data) {
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert(message_Error);
            }
        });
    } 
```

和控制器；

```
 [HttpPost]
    public ActionResult Index(string name)
    {
        ViewData["TEST"] = "TESTSTRING";
        return View();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T16:03:15.773

**没有视图数据！！！！**. 只需返回内容。

```
[HttpPost]
public ActionResult Index(string name)
{
   return Content("TESTSTRING");
} 
```

并将其设置在隐藏字段中，您可以`success`在 ajax 函数的事件中这样做

```
success: function (data) {
      $("#hiddenElementID").val(data);
}, 
```

也不要像那样对 Path to action 方法进行硬编码。始终使用 HTML 辅助方法。

代替

```
url: "/Home/Index" 
```

和

```
url: "@Url.Action("Index","Home")" 
```

我个人更喜欢避免这种`AjaxBeginForm`方法，并想编写一些**干净的手写**javascript 代码来处理这个问题。

```
@using(Html.Beginform())
{
  <input type="text" name="name" />
  <input type="submit" id="saveName" value="Save" />
} 

<script type="text/javascript">
 $(function(){
  $("#saveName").click(function(e){
     e.preventDefault();
      $.post("@Url.Action("Index","Home")", 
                        $(this).closest("form").serialize(),
                                                            function(data){
          $("#yourHiddenElementID").val(data);
      });     
  });    
 });    
</script> 
```

**编辑：**根据评论。

如果要返回多个项目，可以返回 JSON

***例 2：将匿名类型返回到 JSON***

```
[HttpPost]
public ActionResult Index(string name)
{
   return JSON(new { status : "true", ItemCount=35, UserName="Marc"} );
} 
```

***示例 1：将 ViewModel 返回到 JSON***

假设你有一个像

```
public class Result
{
  public string Status { set;get;}
  public int ItemCount { set;get;}
  public string UserName  { set;get;}
} 
```

现在您可以使用此类并将其返回为`JSON`

```
[HttpPost]
public ActionResult Index(string name)
{
   return JSON(new Result { Status : "true",
                            ItemCount=25, UserName="Scott"} );
} 
```

# c++ - 更改 Qt 中父 QWidget 悬停状态的样式

> ID：12409070
> 
> 赞同：3
> 
> 时间：2012-09-13T14:52:26.453
> 
> 标签：c++, qt, stylesheet, qtstylesheets

我在 Qt 中有一个复合控件，它是一个 QWidget，其 QHBoxLayout 包含 3 个子控件（QWidget > QHBoxLayout > 3 QLabels）。在其中一个控件上，它只是一个显示图标的 QLabel，我希望它在将鼠标悬停在整个控件上时更改它的图标。当实际将鼠标悬停在该图标上时，我可以让它工作

```
QLabel#stateIcon {
    image: url(:/icons/stateNormal);
}

QLabel#stateIcon:hover {
    image: url(:/icons/stateHover);
} 
```

但是，我希望它在鼠标位于整个控件上的*任何位置时显示悬停图标。*

我尝试了类似以下的方法：

```
QLabel#stateIcon::parent:hover {
    image: url(:/icons/stateHover);
} 
```

乃至

```
QLabel#stateIcon::parent::parent:hover {
    image: url(:/icons/stateHover);
} 
```

希望它会在父级的悬停状态下激活，但它什么也不做。

有没有办法纯粹在样式表中做到这一点？

如果没有，有没有办法在代码中将父悬停状态传播给它的子代？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T16:42:25.480

也许使用处理`QEvent::HoverMove`or的事件处理程序`QEvent::HoverEnter`，`QEvent::HoverLeave`您可以在其中将属性设置`Qt::WA_Hover`为标签。

我没有尝试过，但它应该可以工作，因为 HoverEnter 和 HoverLeave 会导致`update()`函数被调用。

# java - Jersey - 1.14 版中的代理身份验证

> ID：12409072
> 
> 赞同：0
> 
> 时间：2012-09-13T14:52:27.623
> 
> 标签：java, jersey, apache-httpclient-4.x

我正在尝试使用 Jersey Rest 客户端的身份验证配置代理设置。最初，我使用以下代码与不需要身份验证的代理一起正常工作

```
ClientConfig config = new DefaultClientConfig();
Client client = Client.create(config); 
```

但是，如果代理需要身份验证，则它不起作用。我尝试使用来自 HttpComponents 项目的 Jersey Apache http 客户端和 HttpClient 4.2.1 以及以下代码片段。

```
final ApacheHttpClientConfig config = new DefaultApacheHttpClientConfig();
Map<String, Object> configProp =  config.getProperties();
final String proxyHost = System.getProperty("http.proxyHost");
final String proxyPort = System.getProperty("http.proxyPort");

if(proxyHost != null && proxyPort != null){
        configProp.put(DefaultApacheHttpClientConfig.PROPERTY_PROXY_URI, "http://" + proxyHost + ":" + proxyPort);

        final String proxyUser = System.getProperty("http.proxyUser");
        final String proxyPassword = System.getProperty("http.proxyPassword");
        if(proxyUser != null && proxyPassword != null){
             ApacheHttpClientState state = config.getState();
             state.setProxyCredentials(AuthScope.ANY_REALM, proxyHost, Integer.parseInt(proxyPort), proxyUser, proxyPassword);

        }
} 
```

它在 config.getState() 处引发“ClassNotFoundException”错误。看起来 HttpClient 中 Credentials 类的路径已更改，并且泽西 Apache Http Client 找不到 Credentials 类。

所以，我的问题是“在最近版本的泽西岛或泽西岛一般有不同的处理代理身份验证的方法吗？我做错了吗？”

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T05:50:31.200

尝试将其作为`-D`jvm 参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T23:05:54.100

Ok There seems to be a dependency problem between Jersey Apache Client library and HttpComponents HttpClient library. I used Commons HttpClient library with Jersey Apache Client library and it worked perfectly fine.

# android - 单独的数字输入android

> ID：12409076
> 
> 赞同：0
> 
> 时间：2012-09-13T14:52:45.903
> 
> 标签：android

我需要在android上分离编辑文本的输入，输入格式为4589，所以我想将45发送到列表视图，将89发送到编辑文本，有人可以帮助我，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:01:50.693

问题不清楚。但是你可以尝试这样的事情

```
EditText et = (EditText) findViewById(R.id.editText);
String input = et.getText().toString();

String toEditText = input.substring(0,2); //45
String toListView = input.substring(2); //89 
```

现在你有了字符串，`setText()`用来打印

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:03:45.107

```
int a = Integer.parseInt(editText.getText());
int listNum = a / 100; //45
int editNum = a - listNum*100; //89 
```

这是使用整数除法的解决方案。

# android - 如何制作具有 YouTube 应用程序背景的 ActionBar

> ID：12409081
> 
> 赞同：0
> 
> 时间：2012-09-13T14:52:56.433
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在开发一个 Android 应用程序，我决定我真的很喜欢 YouTube 应用程序、Google I/O 2012 应用程序和 Play 商店的 ActionBar 风格。它有一个带有重复对角线的灰色背景。 [这是它的图片。](http://developer.android.com/design/media/action_bar_pattern_overview.png) 有谁知道如何做到这一点？我知道如何制作不同的颜色，但我不知道如何设计这样的样式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T15:03:29.400

将此模式设置为 ActionBar 的背景：

```
getActionBar().actionBar.setBackgroundDrawable(getResources().getDrawable(R.drawable.pattern_dark_xml)); 
```

你的 pattern_dark_xml：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <bitmap
         xmlns:android="http://schemas.android.com/apk/res/android"
         android:src="@drawable/pattern_dark"
         android:tileMode="repeat" />
</layer-list> 
```

这是一个模式的例子： ![深色图案](../Images/334d041ecea0d57cd59be64b3bb2b537.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T15:03:53.457

看看这个网站：[http ://actionbarsherlock.com/](http://actionbarsherlock.com/)

查看库内部，在演示中有一个选项卡（样式），可以完全按照您的意愿进行操作。

:D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T15:03:20.547

```
ActionBar actionBar = getActionBar();
actionBar.setBackgroundDrawable(R.drawable.action_bar_bg)); 
```

# c# - C++ 中的 XAML 桌面应用程序（Visual Studio Ultimate 2012 RC）

> ID：12409087
> 
> 赞同：0
> 
> 时间：2012-09-13T14:53:08.513
> 
> 标签：c#, c++, wpf, visual-c++, c++11

我知道我们可以在 Visual Studio Ultimate 2012 RC 中使用 C#、VB 开发 Windows 桌面 XAML (WPF) 应用程序 - 但为什么我们不能在 C++ 中做同样的事情？？？

我看到 C++ 有能力做 Win32 项目、MFC 和 METRO 应用程序，但为什么不能做普通的 WPF DESKTOP 应用程序？

我们如何在 C++ 中获得桌面的 WPF？

* * *

我尝试右键单击我的解决方案并将 XAML 文件添加到项目中 - 但没有可通过 C++ 应用程序的“添加文件”对话框添加的此类文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:59:12.617

RTM 和 Visual Studio 2010/2008 都不允许您在 C++ 中编写标准 WPF 应用程序（因此没有“在 C++ 中重新获取桌面的 WPF”，因为它从一开始就不存在。

至于为什么，只有微软能说。

我怀疑这与 WPF 对反射的依赖程度以及 C++ 所没有的 C# 的一些动态特性（以及 Metro 应用程序不依赖由于更受限制的框架）的严重程度有关 - 但这纯粹是猜测。

# cocoa - 核心数据 - 从模型中删除实体

> ID：12409088
> 
> 赞同：12
> 
> 时间：2012-09-13T14:53:07.880
> 
> 标签：cocoa, core-data, entity

我可能完全愚蠢，但我不知道如何删除我创建的实体。中只有添加实体和添加属性的选项`.xcdatamodel`。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-13T15:00:45.550

使用`Backspace`键删除实体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-02T10:36:25.557

只需单击该实体并按**删除**按钮：P

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-07T09:53:04.523

使用 Backspace 键删除实体。而不是关闭并重新打开 xcode...

但首先复制并保存项目。有时它会产生错误（50% 的时间）

# zend-framework - 使用 Zend_Session_Handler_DbTable 时的垃圾收集

> ID：12409089
> 
> 赞同：2
> 
> 时间：2012-09-13T14:53:10.807
> 
> 标签：zend-framework, zend-session

我正在尝试使用 Zend_Session_Handler_DbTable 将我的会话数据保存到数据库中，但据我所知，过期的会话永远不会从数据库中删除。

我可以看到一个 cron 作业正在运行（ubuntu），它删除了基于文件的会话，但我找不到 gc 如何处理保存在 db 中的会话。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T19:31:54.237

该类`Zend_Session_SaveHandler_DbTable`有一个名为的垃圾收集方法`gc`，[`session_set_save_handler`](http://php.net/manual/en/function.session-set-save-handler.php)当您调用`Zend_Session::setSaveHandler()`.

该`gc`函数应根据 php.ini 值[`session.gc_probability`](http://www.php.net/manual/en/session.configuration.php#ini.session.gc-probability)和`session.gc_divisor`. 确保将这些值设置为会导致垃圾收集在某些时候运行的值。

还要确保在创建 DbTable 保存处理程序时指定`modifiedColumn`和选项，因为默认函数使用这些列来确定会话表中的哪些行是旧的并且应该被删除。`lifetimeColumn``gc`

# javascript - 如何从资产 Javascript 中呈现部分内容

> ID：12409099
> 
> 赞同：0
> 
> 时间：2012-09-13T14:53:49.143
> 
> 标签：javascript, jquery, ruby-on-rails

我正在尝试从我的资产目录中的 javascript 呈现部分内容。我发现我无法在 assets 目录中调用 render 方法。但我也不能将我的 ajax 命令移出资产目录。所以我现在的问题是，如何将我的 ajax 结果传递到我认为的 action.js 文件中。

所以我在 onclick jQuery 事件上调用 ajax：

/app/javascript/mymodel.js.coffee

```
$(document).ready ->
---some actions ----
$('.myid').click ->
    ---some action---
    $.ajax 'mypath'
        dataType: 'json'
        success: (result)->
            ---render result in partial on myid-div--- 
```

那么我如何将我心爱的结果和 myid 传递给：

/app/views/mymodel/show.js.erb

```
$('.myid').html("<%= escape_javascript( render( :partial => 'myartial') ) %>"); 
```

渲染出来？

我在这个问题上纠结了很长时间，所以我真的很感激一些帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T16:39:09.620

```
$(document).ready ->
---some actions ----
$('.myid').click ->
    ---some action---
    $.ajax 'mypath'
        dataType: 'json'
        params: (pass in what you need, i don't know the exact syntax, just google it)
        success: (result)->
            ---render result in partial on myid-div---
controller

def show
  @result = params[:result]
end

view
show.js.erb
$('#some_id').html('<%= render("mypartial").html_safe %>'); 
```

@result 现在可以访问了

将您的结果作为参数从您的 AJAX 调用传递给您的控制器方法。然后实例化一个实例变量（例如来自参数的@result），这样您的视图就无法使用实例变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T18:08:25.963

您可以调用 mymodel 控制器的方法来渲染您的部分，但部分的文件名应该以下划线开头`_`

在您的示例中， `render :partial => 'show'`如果您将这些代码放入 mymodel 控制器并且您应该在 mymodel 的视图中重命名`show.js.erb`为`_show.js.erb`

乐观地说，您应该能够渲染并且您可以在终端`_show.js.erb`中看到类似成功的内容。`render _show.js.erb`

但这并不意味着 rails 将 js.erb 处理为 javascript，因为您的 js.erb 中有语法错误（我绝对确定！！）。所以你也可以改变

`$('.myid').html("<%= escape_javascript( render( :partial => 'myartial') ) %>");`

至

`$('.myid').html('<%= escape_javascript( render( :partial => 'myartial') ) %>');`

查看[我的问题](https://stackoverflow.com/questions/12220816/the-ajax-request-cannot-see-the-effect-without-refresh-the-browser-in-rails)以获取更多详细信息。我以前也遇到过类似的问题。它还将向您展示如何发送 ajax 调用和渲染 .js.erb 的示例。

`:remote => true`将发送一个 ajax 请求到`line_items_path`.

并且根据路由，会调用create方法，format.js会`create.js.erb`按照约定渲染。`format.js {render :partial=> "create"}`或者，如果`_create.js.erb`存在，我可以渲染 js.erb

# virtualenv - 虚拟环境下crontab上scrapy爬取

> ID：12409101
> 
> 赞同：3
> 
> 时间：2012-09-13T14:53:59.910
> 
> 标签：virtualenv, crontab, scrapy

尝试在虚拟环境下使用 crontab 运行 scrapy crawl 命令，并在从 cron 作业运行 scrapy 命令时出现以下错误 -

```
 UserWarning: Cannot import scrapy settings module myspider.settings warnings.warn("Cannot import scrapy settings module
 %s" % scrapy_module) 
     ..... 
     raise KeyError("Spider not found: %s" % spider_name) KeyError: 'Spider not found: myspider' 
```

有什么帮助或建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T18:47:05.933

在 crontab 下运行时缺少 PYTHONPATH。

我在以下 cron 作业之前添加了它：

> */40 * * * * source /home/water/.virtualenvs/water/bin/activate && cd $HOME/water2012/ && scrapy crawl water2012 >> $HOME/water2012/log/log_$(date +\%Y\ %m\%d).log 2>&1

# excel - 两个 Excel 问题 - 查找字符串值并保存 Excel 电子表格

> ID：12409102
> 
> 赞同：0
> 
> 时间：2012-09-13T14:54:05.047
> 
> 标签：excel, vbscript

我正在制作一个输出到 excel 电子表格的 vbscript。这将在不同的日子在多个系统上运行，所以我想将电子表格的名称命名为 *hostname&date* .xls

我怎么能保存它，我一直在谷歌搜索，但找不到它。

此外，我只有两列，但第二列中的一些文本将是“测试通过”或“测试失败”。大约有25行。我想让它在第二列中具有“测试通过”的行是绿色的，然后是红色的，反之亦然。

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:02:47.873

```
ActiveWorkbook.SaveAs *filename*

Cells(1, 1).Font.ColorIndex = 3 
Cells(1, 1).Font.Bold = TRUE
Cells(1, 1).Font.Size = 12 
```

等等

如果我记得正确的红色是 3，绿色是 4。此外，任何范围对象都应该用于更改样式属性，如字体。因此范围、选择等将起作用。

要获取新文件名，我将使用以下代码...

```
Set objSysInfo = CreateObject( "WinNTSystemInfo" )
filename = objSysInfo.ComputerName & "-" & Year(Now) & right("00" & Month(Now), 2) & ".xls"
WScript.Echo Replace(WScript.ScriptFullName, WScript.ScriptName, filename) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T15:50:19.703

我更喜欢条件格式：

```
 With Table1.Range("$A:$A,$B:$B").FormatConditions.Add( _
        Type:=xlExpression, _
        Formula1:="=AND($B1=""Y"")")

   .Interior.Color = RGB(255, 0, 0)
  End With

  With Table1.Range("$A:$A,$B:$B").FormatConditions.Add( _
        Type:=xlExpression, _
        Formula1:="=AND($B1=""X"")")

   .Interior.Color = RGB(0, 255, 0)
  End With 
```

随意将*Table1*替换为任何其他表对象。

这将在**每次**执行此代码时**添加**新的格式条件。

 **要创建您的文件名，您可以使用`Format(Now,"dd/mm/yyyy")`Omnikrys 的代码 - 或*FileDialog-Object*。

这里有一个完整的例子：

`ActiveWorkbook.SaveAs Environ$("computername") & "_" & Format(Now, "dd-mm-yyyy") & ".xlsx"`**

# c# - 正则表达式格式化嵌套的 BB [quote] 标签

> ID：12409106
> 
> 赞同：0
> 
> 时间：2012-09-13T14:54:25.593
> 
> 标签：c#, regex, replace

我想转：

```
[quote]Hello![/quote] 
```

进入：

```
<div class="quoted-text">Hello!</div> 
```

这段代码是我最接近工作的代码：

```
var r = new Regex(@"\[quote\]([^\]]+)\[\/quote\]", RegexOptions.Multiline | RegexOptions.IgnoreCase);
rawComment = r.Replace(rawComment, "<div class=\"quoted-text\">$1</div>"); 
```

但是，对于嵌套引号，它不会正确出现。它似乎只转换最里面的报价。一个测试用例是：

```
[quote]
    test
    [quote]
        nest
        [quote]
            nest
        [/quote]
    [/quote]
[/quote] 
```

结果如下：

```
[quote]
    test
    [quote]
        nest
        <div class="quoted-text">
            nest
        </div>
    [/quote]
[/quote] 
```

谁能告诉我如何按预期进行这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:07:33.120

我看不出您需要将引号解析为块的原因。因此，最简单的解决方案是将每个令牌替换为您想要的令牌。以下是 LinqPad 的示例：

```
void Main()
{

    var rawComment =
"[quote]\n" +
"   test\n" +
"   [quote]\n" +
"       nest\n" +
"       [quote]\n" +
"           nest\n" +
"       [/quote]\n" +
"   [/quote]\n" +
"[/quote]\n";

    var start = new Regex(@"\[quote\]", RegexOptions.IgnoreCase);
    var end = new Regex(@"\[\/quote\]", RegexOptions.IgnoreCase);
    rawComment = start.Replace(rawComment, "<div class=\"quoted-text\">");
    rawComment = end.Replace(rawComment, "</div>");

    rawComment.Dump();
} 
```

这会产生以下结果：

```
<div class="quoted-text">
  test
  <div class="quoted-text">
    nest
    <div class="quoted-text">
      nest
    </div>
  </div>
</div> 
```

# git - 如何忽略所有文件，但不忽略 Git 中的目录

> ID：12409107
> 
> 赞同：1
> 
> 时间：2012-09-13T14:54:28.637
> 
> 标签：git

我想忽略当前目录中存在的所有文件，但想跟踪所有目录和子目录。

我怎样才能做到这一点？

添加只是忽略所有内容`*`，`.gitignore`包括目录和子目录。如何只忽略文件，而不是目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:10:45.660

```
# Ignore everything in this directory
/*
# Except for directories
!/*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:59:40.433

您应该可以在下面添加一个排除部分`*/*`

# jquery-isotope - 同位素和无限滚动，手动触发

> ID：12409116
> 
> 赞同：6
> 
> 时间：2012-09-13T14:54:54.417
> 
> 标签：jquery-isotope, infinite-scroll

我正在使用带有 Infinite Scroll 插件的 Isotope 插件。使用默认设置无限滚动会自动触发加载新元素，这很好，但是，我宁愿有一个按钮“加载更多图像”。

我只缺少一小段代码，它将从无限滚动中获取新元素，我可以将其传递给同位素插入函数。请在下面的代码中查看我的评论：

```
// initialize infinite scroll
$container.infinitescroll({
    navSelector  : '#paging',    // selector for the paged navigation 
    nextSelector : '#paging a',  // selector for the NEXT link (to page 2)
    itemSelector : '.col',     // selector for all items you'll retrieve
    loading: {
        msgText: 'Loading...',
        finishedMsg: Loaded all!',
             }
    } // <-- NOTE that we do not use callback function here!
    );

$(window).unbind('.infscr'); 

$('#paging a').click(function(){

// NEED CODE HERE TO GET NEW ELEMENTS FROM INFINITE SCROLL AND PASS THOSE ELEMENTS TO $container.isotope('insert', $(newElements)); 

}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T00:22:45.743

无限滚动插件实际上提供了一种[“手动触发”行为](https://github.com/paulirish/infinite-scroll/blob/master/behaviors/manual-trigger.js)来做你所追求的。

包括`manual-trigger.js`after `jquery.infinitescroll.js`，在调用插件时通过传递来告诉无限滚动使用该行为`behavior: 'twitter'`，然后只需调用 Isotope 作为回调，如[Isotope 的 Infinite Scroll 演示中](http://isotope.metafizzy.co/demos/infinite-scroll.html)所示：

```
$container.infinitescroll({
  navSelector  : '#paging',
  nextSelector : '#paging a',
  itemSelector : '.col',
  behavior: 'twitter',
  loading: {
      msgText: 'Loading...',
      finishedMsg: 'Loaded all!'
    }
  },
  // call Isotope as a callback
  function( newElements ) {
    $container.isotope( 'appended', $( newElements ) ); 
  }
); 
```

# javascript - 在正则表达式匹配上调用函数

> ID：12409117
> 
> 赞同：1
> 
> 时间：2012-09-13T14:54:54.550
> 
> 标签：javascript, jquery

当 id 匹配正则表达式时，有没有办法调用函数？

我有一个应用程序，我有大约 20 个左右的 div 通过 onclick 调用相同的函数，我试图摆脱 onclicks 并通过 id 找到这些 div。div id 的开始方式相同，例如：sameId_xxx

这就是我的工作，但我想知道是否可以将条件放在函数调用中，这样就不会为页面上的每个 div 调用它。

```
$("div").click(function () {
    var id = this.id;
    if (id.match(/sameId_/)) {

    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T14:58:21.527

```
$('div[id^="sameId_"]').click(...) 
```

演示：http: [//jsfiddle.net/kpcxu/](http://jsfiddle.net/kpcxu/)

有关详细信息，请参阅[属性以选择器开头](http://api.jquery.com/attribute-starts-with-selector/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T14:58:22.963

试试 jQuery '属性包含选择器'：

```
$('div[id*="sameId_"]').click(function() {
// Do stuff
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T15:04:34.397

我认为使用必要条件和下一个添加处理程序更好地过滤所有 div。

例如：

```
$('div')
    .filter(function() { return $(this).attr('id') % 2 })
        .click(function(){alert($(this).attr('id'))});​ 
```

[JSFiddle](http://jsfiddle.net/As53c/)上的现场演示

或者你可以`var id = $(this).attr('id')`在你的代码中使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T15:07:50.823

我认为其他答案（在前面过滤 id ）更好，但对于后代，这就是你实际要求的：

```
$("div").click(function () {
    var id = this.id;
    if (id.match(/(sameId_)(.)+/)) {
        console.log("matched");
    }
}​);​ 
```

其中“sameId_”是您要匹配的内容的区分大小写表示。

# javascript - 悬停功能触发

> ID：12409120
> 
> 赞同：2
> 
> 时间：2012-09-13T14:55:02.830
> 
> 标签：javascript, jquery, css

我创建了这个[网站](http://www.shamuzzi.com)，当您将鼠标悬停在顶部导航栏或侧边栏上的收藏选项卡上时，底部内容会向下滑动，这正是我想要的。但是我的问题是，当我将鼠标悬停在外面时，它会弹出，这不是我想要的。虽然它不是我设置的切换功能，但它似乎像它一样工作。有人可以帮助我吗？

```
$('.down').hover(function() {
    $('.b2-a .has_scroll').stop().animate({
        height: "22px"
    }, 500);
    $('.b2-b .slide-div').stop().animate({
        height: "19px"
    }, 500);
    $("#slide-title h4").show();
    $(".slide-div").animate({
        marginTop: "-12px"
    });
    $('.b2 .tancar').animate({
        backgroundPosition: '28px 4px'
    })
}, function() {
    $('.b2-a .has_scroll').stop().animate({
        height: "120px"
    }, 500);
    $('.b2-b .slide-div').stop().animate({
        height: "438px"
    }, 500);
    $("#slide-title h4").hide();
    $(".slide-div").animate({
        marginTop: "-12px"
    });
    $('.b2 .tancar').animate({
        backgroundPosition: '28px -19px'
    })
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:08:08.070

我认为您需要重新考虑您的代码。看起来你已经让它在许多不同的事件中上升了。您是否希望它在单击按钮和悬停时向上滑动？如果是这样，请执行以下操作：

```
$('.b2').hover(function() {
  // do animation to show
));
$('#clic').click(function() {
  // do animation to show
));
$('.b2').mouseout(function() {
  // do animation to hide
)); 
```

# java - 如何避免线程中的超时异常？

> ID：12409124
> 
> 赞同：1
> 
> 时间：2012-09-13T14:55:21.040
> 
> 标签：java, multithreading, svn

当我在 main() 中执行[此代码](http://wiki.svnkit.com/Printing_Out_A_Subversion_Repository_Tree)（显然使用我的存储库、用户名和密码）时，一切都很好：

```
 ....
       String url = "http://svn.svnkit.com/repos/svnkit/trunk/doc";
      String name = "anonymous";
        String password = "anonymous";

        SVNRepository repository = null;
        try {
            repository = SVNRepositoryFactory.create( SVNURL.parseURIDecoded( url ) );
            ISVNAuthenticationManager authManager = SVNWCUtil.createDefaultAuthenticationManager( name , password );
           repository.setAuthenticationManager( authManager );
           SVNNodeKind nodeKind = repository.checkPath( "" ,  -1 );
          .... 
```

但是当我在 Thread 中执行此代码时，出现以下错误：

> svn: E175002: 等待服务器超时

我试图将我的线程设置为最大优先级，但这不起作用。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:00:55.380

发生超时不是因为线程，而是因为 SVN API 无法连接到您的服务器。确保调用此代码的机器有权访问您的存储库。

线程本身永远不会抛出超时异常。超时异常意味着网络 I/O 中存在某种问题，服务器无法访问。

# php - 升级 JSON 编码 php 5.2

> ID：12409129
> 
> 赞同：0
> 
> 时间：2012-09-13T14:55:39.470
> 
> 标签：php, json

php 5.2 的 JSON 编码似乎有问题。我需要一种在不更改我的 PHP 版本的情况下将其升级到 php 5.3+ 的方法，这可能吗？如果有怎么办？

谢谢

找到了问题 - 最后是我的字符串的编码问题。利用：

iconv('Windows-1252', 'UTF-8', $string);

如果您的字符串未正确编码，Jsonencode 将失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:03:09.740

我不知道你遇到了什么错误，但是 php.net 的某个人为 5.2 之前的版本编写了一个函数，也许这对你有用，只需给它一个新名称，如“myjson”

请参阅：[craigfrancis dot co dot uk](http://www.php.net/manual/en/function.json-encode.php#107968)列表中的 craig。

# c# - Convert.ToDouble(object) 中的小数精度是否取决于文化？

> ID：12409130
> 
> 赞同：1
> 
> 时间：2012-09-13T14:55:40.703
> 
> 标签：c#, precision, currentculture

可能这是一个非常基本的问题，但我真的很想知道到底发生了什么。

例如，如果我们在 c# 中执行以下操作：

```
object obj = "330.1500249000119";
var val = Convert.ToDouble(obj); 
```

val 变为：330.15002490001189

问题是为什么最后的 9 被 89 取代？我们能阻止它以这种方式发生吗？这种精确度是否取决于当前文化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T15:00:55.140

这与文化无关。有些数字不能用以 2 为底的数字精确表示，就像在以 10 为底的 1/3rd 不能用 .3333333 精确表示一样

请注意，在您的特定情况下，您输入的数字超出了数据类型允许的范围： Double 可用的有效数字为 15-16（取决于范围），您的数字超出了该数字。

在这种情况下`Double`，您可以使用 a而不是 a ：`Decimal`

```
object obj = "330.1500249000119";
var val = Convert.ToDecimal(obj); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T14:57:57.987

A`decimal`将保持精度。

```
object obj = "330.1500249000119";
var val = Convert.ToDecimal(obj); 
```

您遇到的“问题”是浮点表示。

[http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T14:57:58.590

不，你无法阻止它发生。您正在解析的值具有数据类型可以表示的更多位数。

精度不依赖于文化。A`double`始终具有相同的精度。

因此，如果您不希望它发生，那么就不要这样做。如果您不想要浮点数精度有限的影响，请不要使用浮点数。如果您改用定点数（十进制），它可以准确地表示该值。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-13T15:16:54.710

CPU 代表 8 个字节的双精度数。其中分为 1 个符号位，11 位用于指数（“范围”）和 52 位用于尾数（“精度”）。您的范围和精度有限。

中的 C 常量**DBL_DIG**`<float.h>`告诉您，这样的双精度数只能精确表示**15 位数字，不能更多。**但是这个数字完全取决于你的 c 库和 CPU。

330.1500249000119 包含 18 位数字，因此将四舍五入为 330.150024900012。330.15002490001189 只是一关，很好。通常你应该期望 1.189 对 1.2。

对于背后的确切数学，请尝试阅读 David Goldberg，“What Every Computer Scientist Should Know About Floating-point Arithmetic”，ACM Computing Surveys 23, 1 (1991-03), 5-48。如果您对细节感兴趣，这值得一读，但它确实需要计算机科学背景。 [http://www.validlab.com/goldberg/paper.pdf](http://www.validlab.com/goldberg/paper.pdf)

您可以通过使用更好的浮点类型（如 long double 或 __float128）或使用更好的 cpu（如 Sparc64 或 s390）来阻止这种情况的发生，它们在硬件中本机使用 41 位 (__float128) 作为 long double。

是的，使用 UltraSparc/Niagara 或 IBM S390 是一种文化。

通常的答案是：使用**long double**，伙计。这在 Intel 上为您提供了两个字节（18 位）和几个 powerpc（31 位），在 sparc64/s390 上为您提供了 41 个字节。

# asp.net - ASP.NET 定时器控制

> ID：12409131
> 
> 赞同：1
> 
> 时间：2012-09-13T14:55:43.300
> 
> 标签：asp.net, iis-7, timer, webforms, controls

我在我的在线考试项目中使用了 ASP Timer 控件并托管在 IIS 7 Sever 中。考试持续时间存储在数据库中，考试总持续时间为 1:30 小时。对于第一个注册并开始考试的用户来说，一切都完美无缺。问题从第二个和下一个用户开始。假设当时第一个用户考试时间剩余 1 小时，如果有任何第二个用户注册并开始测试，那么第一个用户计时器值与第二个用户一起重新启动，并且两个用户计时器值都以初始值开始意味着 1:30 小时。同样，如果第三个用户注册并开始测试，那么第一个和第二个用户时间将重置为第三个用户时间意味着初始值。

我已经使用更新面板使用触发器作为 asp 计时器，并且还在页面加载部分使用了 !ispostback。

任何人都可以帮助计时器控制中的问题是什么，或者是 IIS Server 7 的问题？

# mysql - SQL查询/慢

> ID：12409132
> 
> 赞同：0
> 
> 时间：2012-09-13T14:55:45.647
> 
> 标签：mysql, sql, query-optimization

我有以下 SQL 代码，这是来自 MySQL 数据库。现在它给了我期望的结果，但是查询很慢，我认为我应该在继续之前加快这个查询。

表 agentstatusinformation 有：

PKEY（主键）、userid（整数）、agentstate（整数）

表 axpuser 包含用户名：

PKEY (Primary Key) <-- 这是 userid, loginid (usersname) 的键

```
select distinct (select loginid from axpuser where axpuser.pkey = age.userid),
   case
        when agentstate = 1 then 'Ready'
        when agentstate = 3 then 'Pause'
   end as state
from   agentstatusinformation age
where  (userid, pkey) in 
 (select userid, max(pkey) from agentstatusinformation group by userid) 
```

我相信这可以改进，但我看不到树木的木材。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T15:08:29.017

不能完全确定这是你想要的，但我认为它很接近：

```
Select loginid, case when c.agentstate=1 Then 'Ready' 
                     when c.agentstate=3 then 'Pause' 
                end state
  from axpuser a
  join (select userid, max(pkey) pkey
          from agentstatusinformation 
          group by userid ) b 
     on a.userid=b.userid
   join agentstatusinformation c
    and b.pkey=c.pkey 
```

这消除了初始 SELECT 子句中的子选择，并连接到分组的统计信息表。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T15:46:23.010

您的查询的问题是您的嵌套选择。特别是 IN 子句中的子查询在 MySQL 中是有问题的。它被 where 子句过滤的每一行调用。

以下解决了这个问题：

```
select distinct (select loginid from axpuser where axpuser.pkey = age.userid),
   case
        when agentstate = 1 then 'Ready'
        when agentstate = 3 then 'Pause'
   end as state
from   agentstatusinformation age
where exists (select userid, max(pkey)
              from agentstatusinformation a2
              where a2.userid = age.userid
              group by userid
              having age.pkey = max(pkey)) 
```

您可以通过在 agenstatusinfromation(userid, pkey) 上创建索引来加快运行速度。

只要 axpuser.pkey 上有索引，嵌套选择就不会造成问题。但是，我认为将其作为连接放在 FROM 子句中是更好的形式：

```
select distinct axpuser.loginid,
   case
        when agentstate = 1 then 'Ready'
        when agentstate = 3 then 'Pause'
   end as state
from   agentstatusinformation age left outer join
       axpuser
       on axpuser.key = age.userid
where exists (select userid, max(pkey)
              from agentstatusinformation a2
              where a2.userid = age.userid
              group by userid
              having age.pkey = max(pkey)
             ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T15:05:08.580

```
 select ax.loginid,
        case
        when age.agentstate = 1 then 'Ready'
        when age.agentstate = 3 then 'Pause'
        end as state 
from 
 agentstatusinformation age
 join 
 axpuser ax
 on age.userid = ax.userid and age.pkey=(select max(pkey) from agentstatusinformation group by userid) 
```

# jsp - Servlet 不可用 http 404

> ID：12409136
> 
> 赞同：0
> 
> 时间：2012-09-13T14:56:04.900
> 
> 标签：jsp, servlets, jstl

我只是在尝试使用 jsp 并希望在表格中显示所有条目，

我的 servlet 是这个

```
 package UserPass;

        import data.UserPassDb;
        import java.io.IOException;
        import javax.servlet.RequestDispatcher;
        import javax.servlet.ServletException;
        import javax.servlet.http.HttpServlet;
        import javax.servlet.http.HttpServletRequest;
        import javax.servlet.http.HttpServletResponse;

        /**
        *
        * @author One
        */
        public class UserPassController extends HttpServlet {

            @Override
            protected void doGet(HttpServletRequest request, HttpServletResponse response)
                    throws ServletException, IOException {

                doPost(request,response);
            }

            @Override
            protected void doPost(HttpServletRequest request, HttpServletResponse response)
                    throws ServletException, IOException {

                request.setAttribute("users", UserPassDb.selectAllUser());

                String forward = "/me/testpage.jsp";
                RequestDispatcher view = request.getRequestDispatcher(forward);
                view.forward(request, response);

            }

        } 
```

和我的测试页

```
 <a href="<c:url value='/test/TestServlet'/>">
      refresh
      </a><br><br>

    <c:forEach var="user" items="${users}">

        <c:out value="${user.user_name}"/> 

    </c:forEach> 
```

谢谢大家..我正在做教程并试图自己解决那些初学者问题，但一再失败:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:03:41.793

在您的类中添加注释`@WebServlet("/TestServlet")`或将您的 servlet 添加到`web.xml`.

尝试从浏览器访问 servlet，并检查是否可以访问 servlet。（可能带有网址`http://localhost:8080/Test/TestServlet`：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T16:25:40.877

我不知道为什么到目前为止，但就是这样

```
 <a href="<c:url value='/TestServlet'/>" > 
```

# java - 带有 Maven 的 Spring 3.1 和 Hibernate 4.1

> ID：12409143
> 
> 赞同：0
> 
> 时间：2012-09-13T14:56:43.737
> 
> 标签：java, spring, hibernate, maven, spring-mvc

我正在尝试获得一个在使用 maven 之前在 Spring 3.1 和 Hibernate 4.1 中工作的项目。我们现在必须使用 maven，但我无法再构建项目了。

这是我的 pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>org.springsource.greenbeans.maven</groupId>
    <artifactId>MemberInquiry</artifactId>
    <packaging>war</packaging>
    <version>0.0.1-SNAPSHOT</version>
    <name>MemberInquiry</name>
    <url>http://maven.apache.org</url>
    <dependencies>

    <dependency>
    <groupId>javax.transaction</groupId>
    <artifactId>jta</artifactId>
    <version>1.1</version>
</dependency>

        <dependency>
            <groupId>javax.validation</groupId>
            <artifactId>validation-api</artifactId>
            <version>1.0.0.GA</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>3.1.1.RELEASE</version>
            <!-- will come with all needed Spring dependencies such as spring-core 
                and spring-beans -->
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>4.1.2.Final</version>
            <!-- will come with Hibernate core -->
        </dependency>

        <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-validator</artifactId>
        <version>4.0.2.GA</version>
      </dependency>

        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib</artifactId>
            <version>2.2.2</version>
        </dependency>

        <dependency>
            <groupId>javax.mail</groupId>
            <artifactId>mail</artifactId>
            <version>1.4.5</version>
        </dependency>

        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.21</version>
        </dependency>

        <dependency>
            <groupId>org.apache.httpcomponents</groupId>
            <artifactId>httpcore</artifactId>
            <version>4.2.1</version>
        </dependency>

        <dependency>
            <groupId>org.apache.httpcomponents</groupId>
            <artifactId>httpclient</artifactId>
            <version>4.2.1</version>
            <exclusions>
                <exclusion>
                    <artifactId>commons-logging</artifactId>
                    <groupId>commons-logging</groupId>
                </exclusion>
            </exclusions>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>jcl-over-slf4j</artifactId>
            <version>1.5.10</version>
        </dependency>
        <dependency>
            <groupId>jstl</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <!-- <dependency> <groupId>org.hibernate</groupId> <artifactId>hibernate-core</artifactId> 
            <version>3.5.6-Final</version> </dependency> <dependency> <groupId>org.hibernate</groupId> 
            <artifactId>hibernate-entitymanager</artifactId> <version>3.5.6-Final</version> 
            </dependency> <dependency> <groupId>org.hibernate</groupId> <artifactId>hibernate-annotations</artifactId> 
            <version>3.5.6-Final</version> </dependency> <dependency> <groupId>org.hibernate</groupId> 
            <artifactId>hibernate-validator</artifactId> <version>4.0.2.GA</version> 
            </dependency> <dependency> <groupId>joda-time</groupId> <artifactId>joda-time-hibernate</artifactId> 
            <version>1.2</version> <exclusions> <exclusion> <groupId>org.hibernate</groupId> 
            <artifactId>hibernate</artifactId> </exclusion> </exclusions> </dependency> -->

        <!-- <dependency> <groupId>org.hibernate</groupId> <artifactId>hibernate-core</artifactId> 
            <version>3.5.6-Final</version> </dependency> <dependency> <groupId>org.hibernate</groupId> 
            <artifactId>hibernate-annotations</artifactId> <version>3.5.6-Final</version> 
            </dependency> -->

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjtools</artifactId>
            <version>1.6.2</version>
        </dependency>

        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.17</version>
        </dependency>

        <dependency>
            <groupId>c3p0</groupId>
            <artifactId>c3p0</artifactId>
            <version>0.9.1.2</version>
        </dependency>

        <!-- SPRING -->

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aspects</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.webflow</groupId>
            <artifactId>spring-webflow</artifactId>
            <version>2.3.1.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-ldap</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-cas</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-cas-client</artifactId>
            <version>3.0.7.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aop</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-hibernate3</artifactId>
            <version>2.0.8</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.ldap</groupId>
            <artifactId>spring-ldap-core</artifactId>
            <version>1.3.0.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.ldap</groupId>
            <artifactId>spring-ldap-core-tiger</artifactId>
            <version>1.3.0.RELEASE</version>
        </dependency>

        <!-- CAS FILES -->

        <dependency>
            <groupId>org.jasig.cas</groupId>
            <artifactId>cas-server-core</artifactId>
            <version>3.5.0</version>
        </dependency>

        <dependency>
            <groupId>org.jasig.cas.client</groupId>
            <artifactId>cas-client-core</artifactId>
            <version>3.2.1</version>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>1.5.10</version>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-ext</artifactId>
            <version>1.5.10</version>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>1.5.10</version>
        </dependency>

        <!-- <dependency> <groupId>org.apache.directory.server</groupId> <artifactId>apacheds-core</artifactId> 
            <version>1.5.5</version> <scope>runtime</scope> </dependency> <dependency> 
            <groupId>org.apache.directory.server</groupId> <artifactId>apacheds-server-jndi</artifactId> 
            <version>1.5.5</version> <scope>runtime</scope> </dependency> -->
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-jsp</artifactId>
            <version>2.2.2</version>
            <exclusions>
                <exclusion>
                    <groupId>org.slf4j</groupId>
                    <artifactId>slf4j-nop</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.slf4j</groupId>
                    <artifactId>slf4j-api</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.slf4j</groupId>
                    <artifactId>jcl-over-slf4j</artifactId>
                </exclusion>
            </exclusions>
        </dependency>

    </dependencies>
    <build>
        <finalName>WebFlowTemplate</finalName>
    </build>
</project> 
```

以下是我遇到的错误..

```
ference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/spring/database-c3p0.xml]: Invocation of init method failed; nested exception is java.lang.ExceptionInInitializerError
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1360)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:270)
    ... 43 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'hibernateTransactionManager' defined in ServletContext resource [/WEB-INF/spring/database-c3p0.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/spring/database-c3p0.xml]: Invocation of init method failed; nested exception is java.lang.ExceptionInInitializerError
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1360)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
    ... 49 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/spring/database-c3p0.xml]: Invocation of init method failed; nested exception is java.lang.ExceptionInInitializerError
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
    ... 59 more
Caused by: java.lang.ExceptionInInitializerError
    at org.springframework.orm.hibernate4.LocalSessionFactoryBean.afterPropertiesSet(LocalSessionFactoryBean.java:259)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    ... 66 more
Caused by: java.lang.IllegalStateException: Expected method not found: java.lang.NoSuchMethodException: org.hibernate.cfg.Configuration.addAnnotatedClass(java.lang.Class)
    at org.springframework.util.ClassUtils.getMethod(ClassUtils.java:627)
    at org.springframework.orm.hibernate4.LocalSessionFactoryBuilder.<clinit>(LocalSessionFactoryBuilder.java:68)
    ... 69 more 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T15:54:18.223

问题是你包含了 spring-hibernate3，它引入了导致 NoSuchMethodException 的 Spring 2.0 依赖项。您要么需要排除 spring 2.0 依赖项，要么不使用 spring-hibernate3。您不需要 spring-hibernate3，使用 Hibernate 4 所需的一切都在 spring-orm 中。

为了将来参考，每当您收到 NoSuchMethodException，您应该使用 mvn:depence:tree 查看是否存在冲突的库版本。当代码调用丢失或更改的方法时会发生 NoSuchMethodException，这几乎总是由库版本冲突引起的。

# php - 全文Sql查询

> ID：12409145
> 
> 赞同：2
> 
> 时间：2012-09-13T14:56:48.127
> 
> 标签：php, mysql

我正在编写一个查询来使用全文搜索来搜索 mysql 表：

```
select title, 
  MATCH(title,sidebarTxt,introTxt,fullTxt) AGAINST ('MY KEYWORDS' IN NATURAL LANGUAGE MODE) AS score 
from tbl_news
where (status='published') 
order by score DESC 
```

上面的查询运行良好。但是，如果我尝试在 where 子句中使用 'score'，MySql 会抛出错误“#1054 - 'where 子句'中的未知列'score'。这是不工作的代码：

```
select title, 
  MATCH(title,sidebarTxt,introTxt,fullTxt) AGAINST ('MY KEYWORDS' IN NATURAL LANGUAGE MODE) AS score 
from tbl_news
where status='published' and score > 0 
order by score DESC 
```

如果您能帮助我理解它，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T15:09:44.403

如果是计算列，则不能`score`在`WHERE`子句中使用。`score`您必须在附加`HAVING`子句中设置它以在计算*后*应用条件：

```
SELECT title, 
  MATCH(title,sidebarTxt,introTxt,fullTxt)
      AGAINST ('MY KEYWORDS' IN NATURAL LANGUAGE MODE) AS score 
FROM tbl_news
WHERE status='published'
HAVING score > 0
ORDER BY score DESC; 
```

一个测试用例（使用不同的表）。这里`host`是一个列，`host2`是一个派生列。当然，列推导和选择是虚假的，没有什么意义：

```
mysql> use mysql;
Database changed
mysql> select host, UPPER(host) as host2 FROM user WHERE host = 'nottingham';
+------------+------------+
| host       | host2      |
+------------+------------+
| nottingham | NOTTINGHAM |
+------------+------------+
1 row in set (0.00 sec)

mysql> select host, UPPER(host) as host2 FROM user WHERE host = 'nottingham' AND host2 = 'NOTTINGHAM';
ERROR 1054 (42S22): Unknown column 'host2' in 'where clause'
mysql> select host, UPPER(host) as 'host2' FROM user WHERE host = 'nottingham' AND host2 = 'NOTTINGHAM';
ERROR 1054 (42S22): Unknown column 'host2' in 'where clause'
mysql> select host, UPPER(host) as `host2` FROM user WHERE host = 'nottingham' AND host2 = 'NOTTINGHAM';
ERROR 1054 (42S22): Unknown column 'host2' in 'where clause'

mysql> select host, UPPER(host) as host2 FROM user WHERE host = 'nottingham' HAVING host2 = 'NOTTINGHAM';
+------------+------------+
| host       | host2      |
+------------+------------+
| nottingham | NOTTINGHAM |
+------------+------------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T15:24:06.067

问题是`score`在查询完成运行之前，所有行的值都不知道。因此，这不可能在`score`使用该`WHERE`子句时应用条件。在`ORDER BY`计算完所有结果行之后执行，因此使用它没有问题。

尝试使用`HAVING`：

```
SELECT title, MATCH(title,sidebarTxt,introTxt,fullTxt) AGAINST ('MY KEYWORDS' IN NATURAL LANGUAGE MODE) AS score
FROM tbl_news
WHERE status='published'
HAVING score > 0
ORDER BY score DESC 
```

该`HAVING`子句的行为几乎类似于`WHERE`，不同之处是在计算结果行**之后执行。**此时，`score`每个结果行的值都是已知的，可以应用条件。

文档：
[全文搜索](http://dev.mysql.com/doc/refman/5.5/en/fulltext-search.html)：查看示例，它们使用`HAVING`
[SELECT 语法](http://dev.mysql.com/doc/refman/5.5/en/select.html)：查看有关`HAVING`用法的部分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T15:07:05.047

编辑：**错误**

尝试将单引号添加到：`as 'score'`...它似乎无法识别您指定该列的名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T15:07:40.367

这很可能是 50% 噪声的情况。当你有一个单词在 50% 或更多的行中时，mysql 认为它是一个*干扰*词，并且在评分时会忽略它（因此排名）。这仅适用于该`NATURAL LANGUAGE MODE`选项。

不要吹毛求疵，但它应该工作得很好，没有任何引号：

```
mysql> select * from table1;
+---------+------+------+-------------+
| autonum | ID   | name | metavalue   |
+---------+------+------+-------------+
|       1 |    1 | Rose | Drinker     |
|       2 |    1 | Rose | Nice Person |
|       3 |    1 | Rose | Runner      |
|       4 |    2 | Gary | Player      |
|       5 |    2 | Gary | Funny       |
|       6 |    2 | Gary | NULL        |
|       7 |    2 | Gary | Smelly      |
+---------+------+------+-------------+
7 rows in set (0.00 sec)

mysql> select ID, group_concat(coalesce(metavalue,'Empty')) as Test from table1 group by ID order by Test;
+------+----------------------------+
| ID   | Test                       |
+------+----------------------------+
|    1 | Drinker,Nice Person,Runner |
|    2 | Player,Funny,Empty,Smelly  |
+------+----------------------------+
2 rows in set (0.01 sec)

mysql> select ID, group_concat(coalesce(metavalue,'Empty')) as Test from table1 group by ID order by Test desc;
+------+----------------------------+
| ID   | Test                       |
+------+----------------------------+
|    2 | Player,Funny,Empty,Smelly  |
|    1 | Drinker,Nice Person,Runner |
+------+----------------------------+
2 rows in set (0.00 sec)

Server version: 5.5.24-0ubuntu0.12.04.1 (Ubuntu) 
```

（并且这种查询在我的 Windows 5.1.x 安装中也可以正常工作）

# c# - 将两个“列表”对象加入一种抽象数据类型

> ID：12409146
> 
> 赞同：2
> 
> 时间：2012-09-13T14:56:51.490
> 
> 标签：c#

假设有以下设置（假设数据的长度和一般情况相同）。

```
List<String> 
  a = GetStrings(0), 
  b = GetStrings(1);
for(int i = 0; i < a.Count; i++)
  yield return new SuperString{ A = a[i], B = b[i] }; 
```

我想知道这是否可以重构为一个`foreach`循环，如果它看起来很丑陋。我更喜欢以前使用它，`for`因为该操作将在**每个**元素对上执行。

编辑：

我可能一直缺乏细节。对于那个很抱歉。如果类型是任意的怎么办？即如下？

```
IEnumerable<Cool> a = GetCool();
IEnumerable<Lame> b = GetLame();

for(int i = 0; i < a.Count; i++)
  yield return new Opposites{ A = a[i], B = b[i] }; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-13T14:58:59.263

根本没有循环怎么样？

```
a.Zip(b, (aa, bb) => new SuperString{A = aa, B = bb}) 
```

该`Zip`方法的好处是，如果它们的长度不同，它将停在两个序列中较短的序列的末尾。

注意：如果您使用的是 .net < 4，则需要采用 @Cuong 的方法。

如果您的类型是任意的，则应该完全相同：

```
IEnumerable<Cool> a = GetCool();
IEnumerable<Lame> b = GetLame();
a.Zip(b, (aa, bb) => new Opposites{A = aa, B = bb}); 
```

需要注意的是，属性`A`必须`Opposites`是类型`Cool`和`B`类型`Lame`（或父类型）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-13T15:00:20.820

此外`Zip`，您可以使用`Enumerable.Range`：

```
Enumerable.Range(0, a.Count)
          .Select(i => new SuperString{ A = a[i], B = b[i] }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-13T14:59:37.230

使用[Zip 方法](http://msdn.microsoft.com/en-us/library/dd267698.aspx)：）

```
var result = Enumerable.Zip(
    GetStrings(0), 
    GetStrings(1), 
    (x,y) => new SuperString{ x,y}
); 
```

另外，不要错过文档的这一部分：

> 如果序列没有相同数量的元素，则该方法会合并序列，直到它到达其中一个的末尾。例如，如果一个序列有三个元素，而另一个序列有四个，则结果序列将只有三个元素。

# cordova - PhoneGap BlackBerry 应用程序 - SignatureTool.jar 冻结

> ID：12409148
> 
> 赞同：1
> 
> 时间：2012-09-13T14:56:56.997
> 
> 标签：cordova, blackberry-webworks

我正在使用 JDK 7.0、BlackBerry WebWorks SDK 2.3.1.5

当我尝试使用 ant blackberry load-device 在命令提示符下构建和部署 bb phonegap 应用程序时，它会进行一些编译并启动签名工具，但在启动后几秒钟内，签名工具停止响应。但它确实将所有签名请求发送到服务器，我从 RIM 收到一堆电子邮件，确认签名请求成功。该工具根本没有响应，我必须终止该进程。

有没有其他人遇到过相同/类似的问题？如果没有，任何人都可以给我一些指示来解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T01:26:10.913

我遇到了同样的问题，但我的发现告诉我这没有问题。发生的事情是您的 java 版本高于用于编译 signatureTool.jar 的版本。所以简单的解决方法是
1\. 升级等效的 webworks jdk 或
2\. 降级你的 java jdk 版本。
我讨厌降级，所以我会升级我的 webworks jdk。我不会从头开始下载，而是将 signatureTool.jar 替换为较新的。这是下载链接[signatureTool.jar](http://supportforums.blackberry.com/rim/attachments/rim/java_dev/192472/1/SignatureTool.zip "点击开始直接下载 *.zip 文件")。感谢[他](http://supportforums.blackberry.com/t5/Java-Development/Signature-Tool-freezes-during-signing/td-p/1315631 ":)")分享信息和下载链接，如果您愿意，感谢我为 stackoverflow*微笑*带来解决方案。它像巫术一样对我有用。

# c# - 错误 500 - Ajax 响应（没有关于客户端的详细信息，但适用于 localhost）

> ID：12409151
> 
> 赞同：0
> 
> 时间：2012-09-13T14:57:06.613
> 
> 标签：c#, ajax, response, internal-server-error

我目前正在更改服务器端的密码异常处理。因此，如果更改密码在服务器端引发异常（即新密码不满足安全要求），则会出现如下错误处理：

```
catch (Exception ex)
        {
            context.Response.Write(ex.Message);
            context.Response.StatusCode = 500;
            context.Response.End();
            HttpContext.Current.ApplicationInstance.CompleteRequest();
        } 
```

然后，在 javascript 中的 AJAX 处理程序中读取失败：

```
failure: function(response, options) {
    loadMask.hide();
    if (response.status != -1) {
        if (response.responseText.indexOf("title") == -1) {
           Ext.MessageBox.alert('Error', response.responseText);
        }
        else {
           var idx1 = response.responseText.indexOf("title") + 6;
           var idx2 = response.responseText.indexOf("/title") - 1; 
           if (idx1 > 0) {
               Ext.MessageBox.alert('Error', response.responseText.substring(idx1, idx2));
           }
           else {
                Ext.MessageBox.alert('Error', 'No change of password');
           }
         }
     } 
```

问题是：

*   在本地一切正常，详细的异常被正确写入并保存在响应中（因此，responseText 显示正确的 ex.Message）。
*   但是，在客户端计算机上导入应用程序时，总是出现“500 - 内部服务器错误”。

我几乎 99% 确定两个工作站上的 Web.config 文件是相同的。

问题可能出在 IIS 设置中吗？

最好的问候，loopdster

# java - 使用 powermock 测试构造函数

> ID：12409153
> 
> 赞同：1
> 
> 时间：2012-09-13T14:57:07.883
> 
> 标签：java, junit, powermock

有谁知道powermock中的一种方法，您可以对构造函数进行单元测试并模拟构造函数调用的方法。

即我有这样的课；

```
public class myClass {
    public myClass(){
        myMethod();
        // do other stuff
    }
    public void myMethod(){
        // do stuff
    }
} 
```

我想做的是为`myClass()`模拟的构造函数编写一个单元测试`myMethod()`。

`myMethod()`如果是静态的，这将很容易，因为我可以使用`mockStaticPartial()`然后调用构造函数。

仅仅创建 MyClass 的部分模拟也不会起作用，因为一旦我创建了我创建的模拟，此时调用构造函数只会创建一个新的 MyClass 实例而不会`myMethod()`被模拟。

任何人都知道任何方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T15:37:37.277

您不应该模拟正在测试的课程。如果构造函数调用一个方法，那么该方法的动作应该作为测试构造函数的一部分进行测试。如果该方法所做的事情超出了单元测试的范围，请模拟该方法用于执行“事情”的类。

如果你真的想用上面的方法来做，（我不推荐这样做）你可以创建一个覆盖该方法的被测类的子类。（这与上面 johncarl 的出色评论背道而驰）。

# c# - Visual Studio 如何加载库？

> ID：12409155
> 
> 赞同：3
> 
> 时间：2012-09-13T14:57:11.880
> 
> 标签：c#, c++, visual-studio-2008, c++-cli

我有 C#、C++ 和 C++/CLI 项目的解决方案。更具体地说：它是 C++ 核心（约 5 个非托管 dll）、C++/CLI 核心包装器和具有项目特定业务逻辑的 C# 程序集。

前段时间我发现 VS 2008 表单设计器 (WinForms) 有时无法加载核心包装程序集。在使用 VS 调试器和 Procmon 几个小时后，我发现 VS 无法加载程序集，因为它无法解析包装器所依赖的非托管库。VS 从 PATH 环境变量中搜索每个系统文件夹和文件夹，但不在包装程序集所在的文件夹中搜索。

此外，我在一个程序集中有 2 个表单，一个是从另一个继承的：VS 表单设计器可以很好地加载父表单，但无法加载继承的表单。

所以，这是我的问题：有人知道这种行为的原因吗？

PS我使用了解决方法：将带有项目二进制文件的文件夹添加到PATH变量，但我仍然想知道原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:06:53.910

您是否尝试将二进制文件放入可执行文件文件夹中？因为我确定.NET 只搜索已知路径（作为路径存储在**%PATH%**中）和可执行文件的本地文件夹。

我不知道确切的原因，但我认为这是因为 DLL 不知道从中加载它的路径（托管 DLL 的做法！），并且只查看当前目录和其他已知路径。

但是有一个解决方法，您可以为 Visual-Studio 创建一个启动可执行文件并执行以下操作之一：

*   [使用Environment.SetEnvironmentVariable](http://msdn.microsoft.com/en-us/library/96xafkes.aspx)修改**%PATH%**变量
*   使用**Kernel32.dll**方法`SetDllDirectory`

**SetDllDirectory-片段：**

```
[DllImport("kernel32.dll", SetLastError = true)]
public static extern Boolean SetDllDirectory(String pathName); 
```

# c# - 自定义 RichTextBox 事件句柄

> ID：12409156
> 
> 赞同：0
> 
> 时间：2012-09-13T14:57:13.737
> 
> 标签：c#, events, richtextbox

我是自定义控件的新手，我正在寻求帮助。

我想知道是否可以在我的自定义类中添加对诸如“Key_Press”之类的事件的验证，而不是通过我的表单代码中的事件。我的目标是阻止对控件使用 Return & Enter 键。

我创建了一个自定义 RichTextBox，代码如下：-

```
public class CustomRTB : RichTextBox
    {
        protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
        {

            if ((keyData == (Keys.Control | Keys.V)))
            {
                IDataObject iData = Clipboard.GetDataObject();

                if (iData.GetDataPresent(DataFormats.Text))
                {
                    string contents = Clipboard.GetText().Replace("\r\n", " "); 
                    Clipboard.SetData(DataFormats.Text, contents);
                    this.Paste();
                }

                return true;
            }
            else
            {
                return base.ProcessCmdKey(ref msg, keyData);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T17:55:54.400

通过简单地覆盖 OnKeyDown() 方法来阻止 Enter 键。适用于任何 RTB 的普通 KeyDown 事件示例：

```
 private void richTextBox1_KeyDown(object sender, KeyEventArgs e) {
        if (e.KeyData == Keys.Enter) e.Handled = e.SuppressKeyPress = true;
    } 
```

# java - Java垃圾收集到哈希表

> ID：12409160
> 
> 赞同：1
> 
> 时间：2012-09-13T14:57:46.660
> 
> 标签：java, object, garbage-collection

java是否将垃圾签名的东西收集为对象？

如果是，我可以告诉java以编程方式将它们定向到我的哈希表之一（接受对象吗？）？

我对这个功能很好奇。我知道 `System.gc()`是命令，但我怎样才能实现第一个问题？我可以吗？

```
 myTrashBin=System.gc().getObjectList(); //??? 
```

如果没有，可能有一种方法可以通过自定义类创建此功能。

最后一个问题：我们如何覆盖 System.gc() ？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T15:01:18.637

这不在你的控制之下。如果您的对象无法访问，则 GC 将收集这些对象。`System.gc()`无非是一个提示，不能依赖。

`finalize()`可能感兴趣，但请阅读[此问题](https://stackoverflow.com/questions/2506488/java-finalize-method-call)的答案以了解限制等[。PhantomReferences](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ref/PhantomReference.html)也可能感兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T15:02:42.053

我认为如果您实现该`Finalize`方法并在那里编写代码，您可以实现类似的目标：也许将对象添加到自定义列表

*当垃圾收集器确定不再有对该对象的引用时，由对象的垃圾收集器调用*

[http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#finalize%28%29](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#finalize%28%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T15:04:51.257

`System.gc()`发出对垃圾收集器的调用，但仅此而已。它**可能会**提高优先级，并且**可能会**更快地收集您的物品，但不能保证，正如文档所说：

> 调用 gc 方法表明 Java 虚拟机花费精力回收未使用的对象，以便使它们当前占用的内存可用于快速重用。当控制从方法调用返回时，Java 虚拟机已尽最大努力从所有丢弃的对象中回收空间。

您最好采用其他方法，例如`finalize()`方法或管理对象中的引用计数器，这样当它达到零时，您就知道它可以被收集。检查[此链接](http://www.velocityreviews.com/forums/t363649-how-do-i-get-a-reference-count-of-a-object-in-java.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T15:08:46.867

Java 使用托管内存。这意味着 JVM 管理它，因为您不想这样做；）

> 我可以告诉java以编程方式将它们定向到我的一个哈希表（接受对象吗？）？

如果通过 WeakReference 引用它们，您可以以编程方式获取所有将被清理的对象。

> 我们如何覆盖 System.gc() ？

你不能。事实上，它只是一个提示，因为它不能保证做任何事情。

# python - Wkhtmltopdf - 使用--header-html 命令时如何合并--header-spacing？

> ID：12409161
> 
> 赞同：0
> 
> 时间：2012-09-13T14:57:50.883
> 
> 标签：python, wkhtmltopdf

我有一个需要完成的项目，这涉及到一些 wkhtmltopdf 故障排除。到目前为止，我已经能够在创建我的 pdf 时使用“--header-html”和“--footer-html”命令动态添加页眉和页脚。我需要帮助解决的问题就像我的标题状态。我需要弄清楚在调用 --header-html 命令时如何调用 --header-spacing 。

截至目前，我已经尝试了以下命令：

```
wkhtmltopdf -O landscape -L 0mm -R 0mm --header-spacing 5mm <target-page-url> --header-html "<target-header-location>" --footer-html "<target-header-location>" sample.pdf

wkhtmltopdf -O landscape -L 0mm -R 0mm  <target-page-url> --header-html --header-spacing 5mm "<target-header-location>" --footer-html "<target-header-location>" sample.pdf 
```

这两个命令都会导致错误。

**错误：加载页面 http 失败：（有时它会使用 --load-error-handling ignore 忽略此错误）**

如果您知道如何完成此操作，请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:06:27.877

I can't duplicate your error message so I'm not sure about this, but I think I got it working. Try a command like

`wkhtmltopdf -O landscape -L 0 -R 0 --footer-html footer.html --header-html header.html --header-spacing 5 www.google.com samplex.pdf`

Does something like that work for you? wkhtmltopdf is very particular about the order of arguments and I think in this case it a bit confused. Try it with different values for header-spacing like 1, 5 and 10 to see the actual effect it has.

# java - Java中的多级（嵌套？）Jlist

> ID：12409164
> 
> 赞同：2
> 
> 时间：2012-09-13T14:57:52.563
> 
> 标签：java, swing, jlist, jtree, jtreetable

有没有办法创建一个具有多个（我的目标是三个）级别的 JList？

像这样的东西：

```
level 1 item
  level 2 item
  level 2 item
     level 3 item
level 1 item
level 1 item
  level 2 item
  level 2 item
     level 3 item
     level 3 item 
```

我的程序中有（最多）三级组件 GUI，我需要以某种方式使用户能够组织 GUI 的元素，将它们移动到彼此上方或下方。

可以用 JList 完成，还是有另一种处理此类事情的方法？也许一些图书馆？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T15:01:03.963

我认为你*可以*，是的，但那样你就会陷入一个受伤的世界。从概念的角度来看，JList 自然地表示一个列表，而不是树，这意味着大多数排序逻辑都必须由您完成。您可能感兴趣的是[JTree](http://docs.oracle.com/javase/1.5.0/docs/api/javax/swing/JTree.html)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-13T15:01:06.527

我认为你应该使用[`JTree`](http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html)它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T15:00:43.127

您可以实现自己的 ListCellRenderer 和自己的 ListModel。

[http://docs.oracle.com/javase/6/docs/api/javax/swing/JList.html](http://docs.oracle.com/javase/6/docs/api/javax/swing/JList.html)

# php - PHP：根据数据库中的n个项目生成n个页面

> ID：12409168
> 
> 赞同：0
> 
> 时间：2012-09-13T14:57:58.717
> 
> 标签：php, gallery, page-numbering

我正在构建一个网页，其中网页中列出的项目是动态的，（这些项目是从数据库中加载的。）假设我们在数据库中有 19 个项目。一个页面允许的最大项目数是 4。现在我还剩下 15 个项目。我需要另外 4 页中的其余项目。

```
Like this --> Pg1 -> 4 items displayed
              Pg2 -> 4 items displayed
              Pg3 -> 4 items displayed
              Pg4 -> 3 items displayed 
```

如上所示，我的 php 代码需要识别项目数和所需页数。你建议我这样做的最好方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T15:11:50.563

获取数据库中项目的计数。

```
select count(whatever_id) as numberofwhatevers from mytable; 
```

保存它（在变量或类中，或者你觉得舒服）

```
$recordcount = $results["numberofwhatevers"];
$recordsperpage = 4;
$numberofpages = ceil($recordcount / $recordsperpage); 
```

唯一复杂的一点是查询记录的子集以匹配您所在的任何页面……例如，如果您在第 3 页，则需要记录 9-12。

```
select * from mytable limit 9,4; 
```

# android - Mono for Android 应用程序错误处理

> ID：12409169
> 
> 赞同：0
> 
> 时间：2012-09-13T14:57:58.580
> 
> 标签：android, error-handling, xamarin.android

显然，使用代码，任何地方都可能发生错误。因此，如果没有到处都有 try/catch 块（据我所知，这是主要开销），我如何允许错误冒泡到应用程序级别，然后在那里处理它们？或者至少，以某种方式记录错误以进行故障排除？我找到了有关名为 ACRA 的产品的信息，但设置说明是针对 Eclipse 项目的。我在 Visual Studio 2010 中使用 Mono for Android。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T19:08:31.263

That's a bit of an "It depends" question.

The appropriate handling of an errors is going to depend on what the recovery strategy needs to be, how much information you want the user to see etc.

I wouldn't worry how many Try/Catch blocks you use - just use them wherever you need to handle an error that gets thrown - if they're everywhere, your strategy is probably wrong.

It terms of logging and later interrogation, you can log caught errors using the **Android.Util.Log** class.

These can be interrogated (provided you're debugging on your own device) using [Logcat](http://developer.android.com/tools/help/logcat.html).

There's some more info on logging and Logcat [here](http://docs.xamarin.com/android/advanced_topics/android_debug_log).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:49:36.523

找到了这个将崩溃信息写入谷歌文档的项目。 [安卓崩溃](https://github.com/soundnRg/Crasher/tree/)

# android - 应用内结算通知。怎么做？

> ID：12409180
> 
> 赞同：0
> 
> 时间：2012-09-13T14:58:42.093
> 
> 标签：android, in-app-purchase, push-notification, in-app-billing

我一直在寻找来自 Android Developers 的应用内结算的官方示例应用，但我不明白如何更改通知的标题。我的意思是，当购买被取消甚至成功时，我应该如何提醒用户？

我知道通知已发送到通知栏，但我真的不明白如何更改其标题、操作等。有人知道我在哪里可以做到吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T00:10:49.853

如果要显示自定义通知，则需要发送自己的通知。您无法修改 Google Play 显示的内容。

文档告诉您，作为最佳实践，您应该向用户显示一条通知（关于购买等），单击该通知将在您的应用中打开一个显示用户购买状态的活动。然后他们会抛出他们自己的通知，当点击进入您的主要活动并且没有办法抑制所述通知时，如果您使用自己的通知，用户会收到 2 条取消/退款通知。

所以你要么留下他们的通知（我不喜欢这个选项，因为他们的通知只显示退款/取消，而不是购买和错误活动的链接）或者你显示你自己的通知（以及 Google Play 通知出现）对于一切 - 更一致，更好看，您可以设置更合适的消息和标题，并且您可以将通知链接到应用程序中更合适的活动。

我认为第二种选择更好，但 Google Play 通知仍然困扰着我。

# asp.net-mvc-3 - 如何在MVC3中使用javascript向控制器方法发送参数？

> ID：12409183
> 
> 赞同：2
> 
> 时间：2012-09-13T14:58:49.997
> 
> 标签：asp.net-mvc-3

如何将参数从 javascript 发送到控制器方法？例如我正在尝试发送参数“2012”

这是我视图中的脚本：

```
$.ajax({
                        type: "get", url: "test", data: {}, // How can i fill this data like @item ?
                        success: function (data) {

                            alert(data);

                        } 
```

我的控制器方法：

```
public string test()
        {

            TestServices client = new TestServices();
            client.ClientCredentials.UserName.UserName = "service_test";
            client.ClientCredentials.UserName.Password = "..";
            client.ClientCredentials.ServiceCertificate.Authentication.CertificateValidationMode = System.ServiceModel.Security.X509CertificateValidationMode.None;

            decimal? x = client.GetTest(2012, 7, 1);

            return (""+x);

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T15:18:15.453

```
[HttpGet]    
public string test(string name, string age) 
```

还有阿贾克斯

```
$.ajax({
                    type: "get", url: "test", data: {name:"Messi",age:"36yo"}, // How can `i fill this data like @item ?`
                    success: function (data) {

                        alert(data);

                    } 
```

# xml - 使用 Powershell 将 XML 转为哈希表

> ID：12409185
> 
> 赞同：8
> 
> 时间：2012-09-13T14:58:56.750
> 
> 标签：xml, powershell, hashtable

**我想转换 XML：**

```
<TEST>
    <ipAddress value="10.2.1.90"/>
    <gitDir value="C:\git\project"/>
    <gitArchiveDir value="C:\git\archive"/>
    <apacheDocroot value="/var/www"/>
    <apacheUsername value="root"/>
</TEST> 
```

**进入哈希表：**

```
Name             Value

ipAddress        10.2.1.90
gitDir           C:\git\project
gitArchiveDir    C:\git\archive
apacheDocroot    /var/www
apacheUsername   root 
```

**目前使用这种读取方法：**

```
$invocation = (Get-Variable MyInvocation).Value
$directorypath = Split-Path $invocation.MyCommand.Path
$File = $directorypath + '\config.xml'
$CONFIG = "CONFIG"
$CFG = [xml] ( gc $File )

$CFG.test.ipAddress 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-13T15:08:38.023

这应该可以解决问题：

```
PS C:\> $CFG = [xml]@'
>> <TEST>
>>     <ipAddress value="10.2.1.90"/>
>>     <gitDir value="C:\git\project"/>
>>     <gitArchiveDir value="C:\git\archive"/>
>>     <apacheDocroot value="/var/www"/>
>>     <apacheUsername value="root"/>
>> </TEST>
>> '@
>>
PS C:\> $ht = @{}
PS C:\> $CFG.test.ChildNodes | Foreach {$ht[$_.Name] = $_.Value}
PS C:\> $ht

Name                           Value
----                           -----
apacheUsername                 root
gitArchiveDir                  C:\git\archive
ipAddress                      10.2.1.90
apacheDocroot                  /var/www
gitDir                         C:\git\project 
```

# oracle - 编译无效的 oracle 程序

> ID：12409189
> 
> 赞同：2
> 
> 时间：2012-09-13T14:59:06.670
> 
> 标签：oracle, plsql, oracle11g

我有一个包装程序（proc_main），它在其中调用一些程序。

```
create or replace Procedure proc_main
as
begin

proc_child1;

proc_child2;

proc_child3;

proc_compile_invalids; -- This invokes "alter procedure <procedure_name> compile" statement for all the invalids.

end;
/ 
```

proc_child 过程应用一些处理逻辑，其中涉及一些步骤来重命名其中的表。

这会使程序无效，这就是为什么我有 proc_compile_invalids 程序再次将它们设置为有效状态的原因。

我的问题是：当我执行 proc_main 过程时，它使主过程以及内部子过程无效。因此，当最后一步调用 proc_compile_invalids 时，它会挂起，因为它试图重新编译主调用过程。

显然，如果我删除最后一步并单独执行它，这不是问题。

我知道我可以通过评论编译过程并将其作为独立的执行将它们分离为 2 个不同的调用。而且我也知道这是一个装饰步骤，因为 oracle 会在下次执行之前尝试编译一个过程。所以，不管怎样，无效者变得有效。但是，当天执行结束时，他们都处于无效状态，我被当权者质疑是否可以避免！

所以，只是想知道我是否可以避免分离调用并仍然将其保留为主过程的最后一步。

任何想法/指针都非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T15:33:49.513

您可以使用[动态 SQL](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/executeimmediate_statement.htm#LNPLS01317)来打破依赖关系：

```
CREATE OR REPLACE PROCEDURE proc_main AS
BEGIN

   EXECUTE IMMEDIATE 'BEGIN proc_child1; END;';

   EXECUTE IMMEDIATE 'BEGIN proc_child2; END;';

   EXECUTE IMMEDIATE 'BEGIN proc_child3; END;';

   proc_compile_invalids;  -- This invokes 
                           -- "alter procedure <procedure_name> compile" 
                           -- statement for all the invalids.

END; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T15:59:28.790

甲骨文 11g 起

您可以使用[dbms_utility](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_util.htm)包的`compile_schema`过程而不是在主过程中重新编译指定模式中的所有无效过程、函数、包和触发器`proc_compile_ivalids`

```
create or replace Procedure proc_main
as
begin
  Proc_child1;
  proc_child2;
  proc_child3;
  dbms_utility.compile_schema(schema, false);
end; 
```

# nosql - 来自 Ektorp 的 CouchDB Map/Reduce 视图查询

> ID：12409193
> 
> 赞同：1
> 
> 时间：2012-09-13T14:59:12.780
> 
> 标签：nosql, mapreduce, couchdb

我正在尝试从 java 对我在 CouchDB 上创建的 Map/Reduce 视图执行查询。我的地图功能如下所示：

```
function(doc) {
  if(doc.type == 'SPECIFIC_DOC_TYPE_NAME' && doc.userID){
    for(var g in doc.groupList){
        emit([doc.userID,doc.groupList[g].name],1);
    }
  }
} 
```

和减少功能：

```
 function (key, values, rereduce) {
        return sum(values); 
} 
```

从 Futon 界面执行时，该视图似乎正在工作（尽管没有指定键）。我要做的是计算属于单个组的某些文档类型的数量。我想使用“userID”和组名作为键来查询该视图。

我正在使用 Ektorp 库来管理 CouchDB 数据，如果我在没有键的情况下执行此查询，它会返回标量值，否则它只会打印一个错误，说明必须指定 reduce 查询 group=true。

我尝试了以下方法：

```
ViewQuery query = createQuery("some_doc_name");
        List<String> keys = new ArrayList<String>();
        keys.add(grupaName);
        keys.add(uzytkownikID);
        query.group(true);
        query.groupLevel(2);
        query.dbPath(db.path());
        query.designDocId(stdDesignDocumentId);
        query.keys(keys);
        ViewResult r = db.queryView(query);
        return r.getRows().get(0).getValueAsInt(); 
```

上面的示例在没有指定“键”的情况下工作。我还有其他使用 ComplexKey 的查询，例如：

```
ComplexKey key = ComplexKey.of(userID);
return queryView("list_by_userID",key); 
```

但这仅返回 T 类型（列表）的列表 - 当然使用 CouchDbRepositorySupport - 并且不能与减少类型查询一起使用（据我所知）。

有没有什么方法可以使用 Ektorp 库在指定 reduce 函数和具有 2 个或更多值的复杂键的情况下执行查询？任何例子都受到高度赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T19:01:30.903

好的，我找到了使用试错法的解决方案：

```
public int getNumberOfDocsAssigned(String userID, String groupName) {
        ViewQuery query = createQuery("list_by_userID")
                .group(true)
                .dbPath(db.path())
                .designDocId(stdDesignDocumentId)
                .key(new String[]{userID,groupName});
        ViewResult r = db.queryView(query);
        return r.getRows().get(0).getValueAsInt();
    } 
```

因此，关键是将**复杂键**（*不是*键）实际上作为包含字符串数组的单个（但*复杂）键发送，*~~由于某种原因，方法 '.keys(...)' 对我不起作用（它需要一个 Collection 作为参数）~~. （有关差异的解释`.key()`，`.keys()`请参阅 Hendy 的回答）

此方法计算分配给特定用户（由“userID”指定）和特定组（由“groupName”指定）的所有文档。

希望能帮助任何执行 map/reduce 查询以使用 Ektorp 查询从 CouchDB 检索标量值的人。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-28T06:10:09.690

除了克里斯的回答：

请注意，`ViewQuery.keys()`当您要查询与**一组键**匹配的**文档**时使用它，*而不是*用于查找具有复杂键的文档。

 ***像克里斯的回答一样，以下示例将获得与指定**键**匹配的文档（**不是**“键”）

```
viewQuery.key("hello");                             // simple key
viewQuery.key(documentSlug);                        // simple key
viewQuery.key(new String[] { userID, groupName });  // complex key, using array
viewQuery.key(ComplexKey.of(userID, groupName));    // complex key, using ComplexKey 
```

另一方面，以下示例将获取与指定**键**匹配的文档，其中每个键可能是简单键或复杂键：

```
// simple key: in essence, same as using .key()
viewQuery.keys(ImmutableSet.of("hello"));
viewQuery.keys(ImmutableSet.of(documentSlug1));
// simple keys
viewQuery.keys(ImmutableSet.of("hello", "world"));
viewQuery.keys(ImmutableSet.of(documentSlug1, documentSlug2));
// complex key: in essence, same as using .key()
viewQuery.keys(ImmutableSet.of(
    new String[] { "hello", "world" } ));
viewQuery.keys(ImmutableSet.of(
    new String[] { userID1, groupName1 } ));
// complex keys
viewQuery.keys(ImmutableSet.of(
    new String[] { "hello", "world" },
    new String[] { "Mary", "Jane" } ));
viewQuery.keys(ImmutableSet.of(
    new String[] { userID1, groupName1 },
    new String[] { userID2, groupName2 } ));
// a simple key and a complex key. while technically possible,
// I don't think anybody actually does this
viewQuery.keys(ImmutableSet.of(
    "hello",
    new String[] { "Mary", "Jane" } )); 
```

注意：`ImmutableSet.of()`来自[番石榴库](https://code.google.com/p/guava-libraries/)。

`new Object[] { ... }`似乎有相同的行为`ComplexKey.of( ... )`

此外，还有`startKey()`和`endKey()`用于使用部分键进行查询。要发送一个空对象`{}`，请使用`ComplexKey.emptyObject()`. （仅对部分键查询有用）***

# matlab - Matlab将包含大量元素的图形保存为位图

> ID：12409195
> 
> 赞同：0
> 
> 时间：2012-09-13T14:59:20.420
> 
> 标签：matlab, matlab-figure

我正在尝试保存使用`scatter3`以下命令生成的 3D 图形：

```
set(gcf,'PaperPositionMode','auto')
print -zbuffer -dtiff -r300 figure_name.tif 
```

在 Mac 上运行的 Matlab 上。

执行命令后，CPU 负载增加，但没有任何反应。我已经等了大约24小时无济于事。我已经在一个非常规范的 Windows 工作站上尝试了同样的方法

```
print -opengl -dtiff -r300 figure_name.tif 
```

但这没有任何区别。

通常对于包含较少数据点的图形，此命令运行良好，并在几秒钟内产生不错的输出。

我可以将图形保存为`.fig`格式，但我真正需要的是一个像样的分辨率图像文件。该图包含大约 100 万个数据点，当我绘制它时，它会毫不延迟地显示在屏幕上。我尝试将数据点的数量减少到 200,000，但这也不起作用。对于少于 40,000 个数据点的绘图，无论我使用的是 Windows（64 位，48 GB RAM）还是 Mac（64 位，4 GB RAM）系统，它都可以工作。但是，我需要至少 100,000 个数据点来说明我想要展示的内容。

没有运气：

```
print(gcf,'-dpng','figure_name.png'); 
```

我也尝试了`Save As`图形 GUI 中的选项，但这也没有做得更好。

本质上，我必须终止 Matlab 任务才能停止此任务。`ctrl`+`c`没有帮助。

有谁知道如何获得我的高分辨率 .tif 文件（真的可以是任何位图格式）？

# php - 如何使用genemu表单捆绑symfony2自动完成删除元素

> ID：12409196
> 
> 赞同：1
> 
> 时间：2012-09-13T14:59:28.530
> 
> 标签：php, jquery, symfony

我在 Genemu 表单包中使用它

```
add('users', 'genemu_jqueryautocompleter_entity', array(
'route_name' => 'ajax_user',
'class' => Acme'\UserBundle\Entity\OldUser',
'multiple' => true,
'required' => false
)) 
```

[https://github.com/genemu/GenemuFormBundle/blob/master/Resources/doc/jquery/autocomplete/entity_ajax.md](https://github.com/genemu/GenemuFormBundle/blob/master/Resources/doc/jquery/autocomplete/entity_ajax.md)

我可以多选用途，并且数据可以在里面输入。但即使我删除了整个文本框，我的值仍然保留在数据库中。看起来我无法删除它。他们输入正常，但没有更新。

如果我使用没有自动完成的普通多选，那么一切都很好

编辑：

我的意思是，就像我们在 SO 中提出问题并在输入时选择标签一样。然后我们可以通过删除文本来删除标签。在我的情况下，我可以在输入时添加用户，但删除字符不会删除用户。在隐藏的领域，他们还在那里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:03:43.523

您是否尝试将 放在`orphanRemoval=true`您的实体属性（用户）上以便删除它们？

更多关于`orphalRemoval` [http://docs.doctrine-project.org/en/2.0.x/reference/working-with-associations.html#orphan-removal](http://docs.doctrine-project.org/en/2.0.x/reference/working-with-associations.html#orphan-removal)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-11T08:34:48.220

我相信这是genemuBundle的一个错误。我可以看到，如果您更改该值，该值将在实际输入中发生变化（来自 GEnemu Bundle 的 javascript 将其隐藏），但如果您删除输入中的值，则没有任何变化，因此旧值仍然存在.

当您提交表单时，旧值会被提交，因此您无法真正删除内容。

解决它的正确方法应该是改进 javascript，将真正隐藏输入的值设置为空白，genemuBundle 应该处理它，但是当我们等到它们纠正时，我们可以执行以下操作：

```
$("#autocompleter_name_input").change(function(){
    if($("#autocompleter_name_input").val()==""){
        $("#name_input").val("");
    }   
}); 
```

（虽然我没有尝试过，我正在做这个其他解决方法。这也是一个单一的，而不是你的情况，它是一个多选，因此使这有点复杂......）

作为一种解决方法，您可以在控制器中处理请求：

Genemu 还发送用户在输入中字面输入的内容。所以你应该在你的 $request->request->all() 中有类似的东西：

```
Array
(
   [your_entity_name] => Array
      ( all the fields, even with the old values)
   [autocompleter_your_entity_name] => Array
      ( what the user actually input)
) 
```

只需使用它来为表单添加更多验证，并在控制器中对您的实体做任何您想做的事情。

很抱歉没有让它成为一个完整的答案，只是给出解决方法......

# ruby-on-rails - Rails 3 + ActiveAdmin + CanCan：如果父模型有子模型，则防止破坏

> ID：12409202
> 
> 赞同：0
> 
> 时间：2012-09-13T14:59:52.030
> 
> 标签：ruby-on-rails, activeadmin, cancan

如果用户想要销毁父模型记录并且它有子模型，我希望能够显示自定义错误消息。

或者，如果记录没有子项，则可能隐藏销毁按钮。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:08:38.783

在你的模型中放置这样的东西

```
class Parent < ActiveRecord:Base
  has_many :children

  before_destroy :check_children!

private       # <--- Bottom of model

  def check_children!
    unless childrens.empty?
      self.errors.messages[:children_present] = "Can't destroy parent cause children present!"
      false
    end
  end
end 
```

# php - 除了 PHP 以外的所有选项都可以切换？

> ID：12409205
> 
> 赞同：0
> 
> 时间：2012-09-13T15:00:01.883
> 
> 标签：php

所以我正在编写一个调用 PHP 脚本的网页。该数组从 jQuery 中获取数据以供 php 处理。

现在我需要做的是运行所有这些的脚本，*除了*`$pageException`. 例如 if `$pageException`is `contact-us`，`contact-us.php`不应包含在内。

显然，我可以使用 switch 语句来实现这一点，并且在下面的示例中提供了三种不同的情况，但我觉得它们可能是一种更简单的方法。

我敢打赌我忘记了一些在这里公然明显的东西，但它只是没有浮现在脑海中......

```
$new_address = $_POST['address'];

function pageData($pageException) { 
    include("about-us.php");
    include("contact-us.php");
    include("who-we-are.php");
}

pageData ($new_address); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T15:02:38.187

数组呢？

```
$pages = array('about-us.php', 'contact-us.php', 'who-we-are.php');

foreach($pages as $page) {
    if($page !== $pageException) {
        require $page;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:05:39.530

将您的包含存储在一个数组中，并通过遍历该数组来执行包含，仅当页面不等于异常时才执行包含：

```
function pageData($pageException) { 
    $pages = array("about-us.php", "contact-us.php", "who-we-are.php");

    foreach($pages as $page){
        if($page !== $pageException){
            include($page);
        }
    }
} 
```

# jquery - 可以编写一个搜索框，在 div 中搜索特定标签，然后显示/隐藏其他标签？

> ID：12409206
> 
> 赞同：0
> 
> 时间：2012-09-13T15:00:08.130
> 
> 标签：jquery, html, css, search

如果不制作数据库后端，是否可以以某种方式在 html / css 页面上创建一个搜索框，可能所有内容都使用 jquery，也就是说我在页面上有四个 div 框，每个 div 框都包含某些风味文本或关键字. 是否可以制作一个搜索框，当搜索关键字时，它会隐藏不包含该关键字的其他 div 框，然后仅显示那些包含该关键字的 div 框。

我知道并知道 jquery 中的 .hide / .show /.toggle，但是如何开始编写一个简单的搜索框来执行这种功能呢？有人有任何想法或大致方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T15:19:47.507

```
$("#search").on("keyup", function() {
    var key = this.value;
    $(".tosearch").each(function() {
       var $this = $(this);
       $this.toggle($(this).text().indexOf(key) >= 0);
    });
}); 
```

演示：http: [//jsfiddle.net/upsgk/](http://jsfiddle.net/upsgk/)

请注意，这将执行区分大小写的搜索。要忽略大小写，您需要调用几次[toLowerCase()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/toLowerCase)。例如[http://jsfiddle.net/upsgk/1/](http://jsfiddle.net/upsgk/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T15:11:08.983

以下是您需要的关键组件的列表：

*   `inputtxt.value`(jQuery: `$("input").val()`): 返回文本中写入的值`input`。
*   `elm.innerHTML`(jQuery: `$("elm").html()`)：返回一个包含元素内容的字符串。
*   `str.indexOf(pattern)``pattern`: 返回in的第一次出现的索引`str`。如果`pattern`中不存在`str`，则`.indexOf()`返回 -1。

把它们放在一起，你会得到这样的东西：[little link](http://jsfiddle.net/glee/SXyUd/)。该代码非常不言自明，但这里是 JavaScript 部分的注释版本：

```
$("#search").on("keydown keyup keypress change", function() { //when the textbox is changed
    var query = $("#search").val(); //save its content
    $(".box").each(function() { //for each box
        var cur = $(this); //get the current box
        if(cur.html().indexOf(query) == -1) { //see if the current box contains the query
            cur.hide("fast"); //it doesn't; hide it
        }
        else {
            cur.show("fast"); //it does, show it
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T15:06:57.970

我不想为你做这个项目，但这是一个开始的想法

```
var query= $('#search').val();
var str = $('#div1').val();

if (str.indexOf(query) >= 0){
   // display box
}
else{
  // hide box
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T15:07:27.783

是的，有可能。

1.  先听搜索框防止默认使用

    $('input[type="submit"]').click(function(e){e.preventDefault();});

2.  编写代码以获取搜索框值。

3.  隐藏所有 div`$("div").css("display","none");`

4.  显示所有具有 id 的 div`$("#"+valueOfBox").css("display","true");`

# c# - 插入新行，而不是从文本框中获取文本

> ID：12409209
> 
> 赞同：0
> 
> 时间：2012-09-13T15:00:17.220
> 
> 标签：c#, asp.net, gridview

我在使用 Web 应用程序时遇到问题。我有一个与 SQL 数据表连接的 gridview，在页脚中我有文本框（或下拉列表）和一个“插入”按钮。当我单击按钮并想在我的 SQL 表中插入新行时，就会出现问题。它不会从文本框中读取文本（我们需要输入一些字符串）。当然插入不会发生，因为某些数据不能为空。我对编辑行有同样的问题。

这是我的代码：

网格视图：

```
<asp:GridView ID="gvUser" runat="server" AutoGenerateColumns="False" 
DataKeyNames="ID" OnRowDataBound="gvUser_RowDataBound"
OnRowCommand="gvUser_RowCommand" ShowFooter="True">
    <Columns>
        <asp:TemplateField HeaderText="ID">
            <ItemTemplate>
                <asp:Label ID="lblID" runat="server" Text='<%# Bind("ID") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Name">
            <ItemTemplate>
                <asp:Label ID="lblName" runat="server" Text='<%# Bind("name") %>'></asp:Label>
            </ItemTemplate>
            <EditItemTemplate>
                <asp:TextBox ID="txtName" runat="server" Text='<%# Bind("name") %>'></asp:TextBox>
            </EditItemTemplate>
            <FooterTemplate>
                <asp:TextBox ID="txtNewName" runat="server"></asp:TextBox>
            </FooterTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Last name">
            <ItemTemplate>
                <asp:Label ID="lblLname" runat="server" Text='<%# Bind("lname") %>'></asp:Label>
            </ItemTemplate>
            <EditItemTemplate>
                <asp:TextBox ID="txtLname" runat="server" Text='<%# Bind("lname") %>'></asp:TextBox>
            </EditItemTemplate>
            <FooterTemplate>
                <asp:TextBox ID="txtNewLname" runat="server"></asp:TextBox>
            </FooterTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Edit" ShowHeader="False">
            <FooterTemplate>
                <asp:LinkButton ID="lnkAdd" runat="server" CausesValidation="False" CommandName="Insert"
                    Text="Shrani"></asp:LinkButton>
            </FooterTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

后面的代码：

```
protected void BindGV()
{
    //bind the SQL table to the GridView (no problem here)
}

protected void gvUser_RowDataBound(object sender, GridViewRowEventArgs e)
{
    //here I bind the dropdownlist (did not include it in code snippet, 
    //since firstly I need to get text from textboxes
}

protected void gvUser_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName.Equals("Insert"))
    {
        TextBox txtNewName = (TextBox)gvUser.FooterRow.FindControl("txtNewName");
        TextBox txtNewLname = (TextBox)gvUser.FooterRow.FindControl("txtNewLname");

        string NewName = txtNewName.Text; //this strings come up empty (just "")
        string NewLname = txtNewLname.Text; //it should read from textboxes

        AddRow(NewName, NewLname);

        BindGV();
    }
}

private void AddRow(string name, string lname)
{
    //insert row into SQL datatable
} 
```

编辑：现在可以了。发现了一个类似的问题，作者说他能够通过将 EnableViewState="false" 添加到 Gridview 来解决它。

我试过了，它奏效了。:)

这里的任何人都能够回答为什么这会起作用？这将如何与其他 gv 功能对应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T19:51:32.883

尝试使用此代码 - 基于`e.Item.FindControl`

```
 if (e.CommandName.Equals("Insert"))
    {
        TextBox txtNewName = (TextBox)e.Item.FindControl("txtNewName");
        TextBox txtNewLame = (TextBox)e.Item.FindControl("txtNewLname");

....

    } 
```

# c# - 使用反斜杠和双引号转义问题

> ID：12409210
> 
> 赞同：0
> 
> 时间：2012-09-13T15:00:20.713
> 
> 标签：c#, sharepoint, escaping

在 sharepoint 中，为了翻译一个字段，我必须修改一个名为 schemaxml 的属性。

当我使用 c# 阅读它时，我得到的代码是这样的：

```
 string schemaXmlWithResourceTokens = recurrentField.SchemaXmlWithResourceTokens;
  int startIndex = schemaXmlWithResourceTokens.IndexOf("\"", schemaXmlWithResourceTokens.IndexOf("DisplayName=\"")) + 1;
  int endIndex = schemaXmlWithResourceTokens.IndexOf("\"", startIndex);
  int substringLength = endIndex - startIndex;
  string value = @"DisplayName=\" + schemaXmlWithResourceTokens.Substring(startIndex, substringLength);
  schemaXmlWithResourceTokens = schemaXmlWithResourceTokens.Replace(value, @"DisplayName=\$Resources:SPNLMeetings,Field_Recurrent_Name");
  recurrentField.SchemaXml = schemaXmlWithResourceTokens;
  recurrentField.Update(); 
```

值没有被改变。

![在此处输入图像描述](../Images/de9d8575d7c05325bf6097a7fb004f25.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:38:12.190

试试这个：

```
string value = "DisplayName=\"" + schemaXmlWithResourceTokens.Substring(startIndex, substringLength); 
```

不同的是，`"DisplayName=\""`而不是`@"DisplayName=\"`

# sql - 参与者和接收者之间的实体关系

> ID：12409213
> 
> 赞同：0
> 
> 时间：2012-09-13T15:00:27.487
> 
> 标签：sql, database-design, foreign-keys, relational-database, entity-relationship

所以我有一个SQL关系问题。假设我有一个数据库，我想在其中保存有关个人的信息记录。现在我已经设置了一个表格来获取这些信息。好的，到目前为止一切都很好。

通常可以在表中发现重复信息并将其删除。如果特定字段与另一行中的另一个字段具有相同的值，则记录被认为是重复的。示例：重复的电子邮件。

现在我想在数据库中创建另一个表来跟踪发现和删除的每个重复项。我的第一个想法是创建一个外键关系。所以我创建了一个表并将其连接`dupes`到我的`persons`表。该关系是具有删除约束的简单外键与主键关系。

现在虽然起初这可能有效，但问题出现了，该`dupes`表正在接收已删除的记录，即使它们没有被删除，因为它们是骗子。这是一个问题，因为即使我决定从`persons`表中删除一个人只是因为我不喜欢他们，他们还是会存储在`dupes`表中。

`disposition field`然后我想，为什么不在表中创建一个`persons`并将其作为唯一键或主键连接到我`dupes`表的索引外键。那么问题是一个唯一的键必须有一个唯一的值，所以多重处置`dupe`或`I don't like you`将不起作用。另一种选择是设置`disposition field`主键。但这也有同样的问题。

这个问题的正确关系是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:07:12.420

我可以想到这个实现：一个删除触发器，带有“删除前”检查。删除前检查将确认被删除的记录是否重复。但不确定所有 RDBMS 系统都支持这样的检查。

IMO，理论上的关系很复杂，因为即使删除了重复项，也应该保留记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T21:18:05.660

外键不会解决这个问题。我发现了触发器及其正是我所需要的。

# python - 为什么我的 Python 程序在 IntelliJ 中得到 UnicodeDecodeError 但从命令行可以正常？

> ID：12409224
> 
> 赞同：1
> 
> 时间：2012-09-13T15:01:00.310
> 
> 标签：python, json, encoding, intellij-idea

我有一个简单的程序，它加载一个包含有趣字符的 .json 文件。该程序（见下文）在终端中运行良好，但在 IntelliJ 中出现此错误：

> UnicodeDecodeError：“ascii”编解码器无法解码位置 2 中的字节 0xe2：序数不在范围内（128）

关键代码是：

```
with open(jsonFileName) as f:
    jsonData = json.load(f) 
```

如果我将 open 替换为：

```
with open(jsonFileName, encoding='utf-8') as f: 
```

然后它适用于 IntelliJ 和终端。我对 Python 和 IntelliJ 插件还是新手，我不明白它们为什么不同。我认为`sys.path`可能会有所不同，但输出让我认为这不是原因。有人可以解释一下吗？谢谢！

**版本：**

*   操作系统：Mac OS X 10.7.4（也在 10.6.8 上测试过）
*   Python 3.2.3（v3.2.3:3d0686d90f55，2012 年 4 月 10 日，11:25:50）/Library/Frameworks/Python.framework/Versions/3.2/bin/python3.2
*   IntelliJ：11.1.3 终极版

**文件 (2):**

**1\. unicode-error-demo.py**

```
#!/usr/bin/python

import json
from pprint import pprint as pp
import sys

def main():
    if len(sys.argv) is not 2:
        print(sys.argv[0], "takes one arg: a .json file")
        return

    jsonFileName = sys.argv[1]
    print("sys.path:")
    pp(sys.path)
    print("processing", jsonFileName)

#    with open(jsonFileName) as f:           # OK in Terminal, but BUG in IntelliJ: UnicodeDecodeError: 'ascii' codec can't decode byte 0xe2 in position 2: ordinal not in range(128)
    with open(jsonFileName, encoding='utf-8') as f:     # OK in both
        jsonData = json.load(f)
        pp(jsonData)

if __name__ == "__main__":
    main() 
```

**2\. 编码-temp.json**

```
["™"] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T15:03:54.087

JSON`.load()`函数需要 Unicode 数据，而不是原始字节。Python 自动尝试使用默认编解码器（在您的情况下为 ASCII）为您将字节字符串解码为 Unicode 字符串，但失败了。通过使用`UTF-8`编解码器打开文件，Python 会为您进行显式转换。请参阅[`open()`功能](http://docs.python.org/py3k/library/functions.html#open)，其中指出：

> 在文本模式下，如果未指定编码，则使用的编码取决于平台。

将使用的编码确定如下：

*   试试看[`os.device_encoding()`](http://docs.python.org/py3k/library/os.html#os.device_encoding)是否有终端编码。
*   使用[`locale.getpreferredencoding()`function](http://docs.python.org/py3k/library/locale.html#locale.getpreferredencoding)，这取决于您在其中运行代码的环境。该`do_setlocale`函数的 设置为`False`。
*   如果`'ASCII'`两种方法都返回，则用作默认值`None`。

这一切都是在 C 中完成的，但它的 python 等价物是：

```
if encoding is None:
    encoding = os.device_encoding()
if encoding is None:
    encoding = locale.getpreferredencoding(False)
if encoding is None:
    encoding = 'ASCII' 
```

因此，当您在终端中运行程序时，`os.deviceencoding()`返回`'UTF-8'`，但在 IntelliJ 下运行时没有终端，如果也没有设置语言环境，python 使用`'ASCII'`.

[Python Unicode HOWTO](http://docs.python.org/py3k/howto/unicode.html)告诉你所有关于 unicode 字符串和字节串的区别，以及编码。关于该主题的另一篇*重要*文章是 Joel Spolsky 的[Absolute Minimum Unicode 知识文章](http://www.joelonsoftware.com/articles/Unicode.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:18:24.507

Python 2.x 有字符串和 unicode 字符串。基本字符串用 ASCII 编码。ASCII 仅使用 7 位/字符，允许编码 128 个字符，而现代 UTF-8 最多使用 4 字节/字符。UTF-8 与 ASCII 兼容（因此任何 ASCII 编码的字符串都是有效的 UTF-8 字符串），但反之则不然。

显然，您的文件名包含非 ASCII 字符。默认情况下，python 希望将其读取为简单的 ASCII 编码字符串，发现一个非 ASCII 字符（它的第一位不是 0，因为它是 0xe2）并说，'ascii' 编解码器无法解码位置 2 中的字节 0xe2：序数不在范围内（128）。

与 python 无关，但仍然是我最喜欢的关于编码的教程：

[http://hektor.umcs.lublin.pl/~mikosmul/computing/articles/linux-unicode.html](http://hektor.umcs.lublin.pl/~mikosmul/computing/articles/linux-unicode.html)

# tridion - 如何在多个模板使用的 Tridion 组件模板中转义 ${}？

> ID：12409233
> 
> 赞同：8
> 
> 时间：2012-09-13T15:01:21.880
> 
> 标签：tridion, tridion-2011

我遇到了一种情况，我有一个值`${test}`，在我呈现这个值的组件模板中，当另一个模板调用这个组件和模板时，问题就出现了，此时使用`@@RenderComponentPresentation(Component.ID, MyFirstTemplate)@@`的`${test}`是被评估的，因为有在组件上或在它评估为无的包装中没有此类项目。

*   我有一个组件模板，它读取组件字段的值（其中包含`${test}`：）

    *   这个模板渲染得很好，我回来了“${test}”
*   现在我有调用的组件模板二`@@RenderComponentPresentation(Component.ID, ComponentTemplateOne.ID)@@`

    *   这是`${test}`now 被评估而不是保留的地方，因此它从“”变为`${test}`“”，因为它没有找到具有该名称的变量或组件字段名称。
*   组件模板二然后被组件模板三以相同的方式调用`@@RenderComponentPresentation(Component2.ID, ComponentTemplateTwo.ID)@@`

    *   由于`${test}`已经在组件模板二中评估并丢失了，因此我不再`${test}`以“”结束。

我努力了：

*   `@@RenderComponentField('myField', 0, False, False)@@`
*   `@@RenderComponentField('myField', 0, True, False)@@`
*   `@@RenderComponentField('myField', 0, False, True)@@`

没运气。

以下是我的工作，它似乎工作：

*   将“\”放在打开和关闭花括号的前面`$\{test\}`
*   我需要确保在最后一个模板（页面或组件）执行后删除“\”。
*   我现在有一个 C# TBB，它接受“${test}”并对其执行以下操作：
    *   将初始模板中的`${test}`to 转换`$\{test\}`为页面模板上的 C# TBB，然后将其返回为 的初始值`${test}`。

有没有办法防止这种情况发生或避免做我正在做的事情来完成这项工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T15:15:19.240

你试过这个[链接](http://feedreader.com/feed/Coded_Weapon/14508699)吗，你应该可以用这个链接

```
@@"$" + "{" + "test" + "}"@@ 
```

# objective-c - 如何忽略屏幕上多余的手指？

> ID：12409234
> 
> 赞同：2
> 
> 时间：2012-09-13T15:01:23.973
> 
> 标签：objective-c, ios, multi-touch

我正在为小孩子开发一个应用程序。该应用程序基本上是一个眼睛糖果游戏，孩子可以触摸屏幕并制作鲜花或气球。我正在使用 touchesBegan: 和 touchesend: 来确定孩子何时按下（开始动画）以及何时抬起手指（停止动画）。

我的问题是，我测试过的一些孩子用拇指放在屏幕上拿着 iPhone。这种额外的触摸与我控制动画位置的逻辑相混淆。我相信我可以用两种方法之一来解决这个问题

1.  设置独占触摸，以便一旦第一根手指向下，所有其他触摸都将被忽略，从而迫使孩子在想让游戏做任何事情时抬起拇指。

2.  通过捕获触摸开始的位置并确保在我的触摸结束逻辑中，我正在响应正确的手指。

我只是好奇是否有其他人遇到过这个问题，以及他们是否想出了更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:53:59.710

我选择了＃1“设置独家触摸，以便一旦第一根手指向下，所有其他触摸都将被忽略，从而迫使孩子在想让游戏做任何事情时抬起拇指。” 我和几个孩子一起测试了它，他们很快就弄清楚了“规则”是什么并进行了调整。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-13T15:22:03.853

什么年龄组？从使用触摸屏手机观察 1 岁、3 岁和 5 岁儿童的情况来看，在我看来，在可以信任孩子拿着手机而不丢手机的年龄（两岁晚期或三岁早期）他们可以学习如何将手机放在手掌上。需要抓握的人，在大多数情况下只展示一次后，就可以轻松地学会用拇指从没有屏幕的顶部和底部区域进行抓握。

我同意您的应用程序应该智能地处理错误输入，但不要首先忽略一般使用手机（拿着它）的最低限度指令。这不是“修复用户”的情况，而是用户（孩子）需要使用手机上的任何应用程序的技能。

# c# - 在某些情况下不会抛出 DuplicateKeyException

> ID：12409235
> 
> 赞同：2
> 
> 时间：2012-09-13T15:01:28.077
> 
> 标签：c#, asp.net, .net, linq, linq-to-sql

我有两个 SQL 表，每个表都有一个由三个不同整数字段组成的复合键。我添加了如下代码以向 Table1 添加一条记录。

```
try
{
    Table1 newRow = new Table1
    {
        DomainID = domainID,
        ConfigurationID = configID,
        ReasonID = reasonID
    };

    data.Table1.InsertOnSubmit(newRow);
    data.SubmitChanges();
}
catch(DuplicateKeyException)
{
    // Message to user about no duplicates allowed.
} 
```

如果用户尝试添加重复的行并且我可以向他们显示消息等，这完全按照我的计划工作并捕获异常。一切都很好。但是，我用于插入 Table2 的代码（几乎相同，在不同的页面上使用不同的 DataContext），

```
try
{
    Table2 newRow = new Table2
    {
        DomainID = domainID,
        ConfigurationID = configID,
        DirectionID = directionID
    };

    data.Table2.InsertOnSubmit(newRow);
    data.SubmitChanges();
}
catch(DuplicateKeyException)
{
    // Message to user about no duplicates allowed.
} 
```

不会抛出 DuplicateKeyException 而是抛出 SqlException。没什么大不了的，因为我仍然可以测试

```
e.Number = 2627 
```

在捕获的 SqlException 上，但我只是对为什么它的工作方式不同感到困惑！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:06:40.653

一定是你的表的定义有问题 2.具体用主键列就可以了。也许它有一个[唯一约束](http://msdn.microsoft.com/en-us/library/ms191166%28v=sql.105%29.aspx)，这就是它抛出异常的原因，但它肯定不是它的主键。

# java - flash websocket + 码头

> ID：12409236
> 
> 赞同：1
> 
> 时间：2012-09-13T15:01:40.543
> 
> 标签：java, flash, websocket, jetty

我使用码头，我使用 websocket。我尝试在 IE8 和 IE9 上使用 flash websocket，但我遇到了一些问题。我正在尝试获取闪存策略文件： `WebSocket.loadFlashPolicyFile("xmlsocket://127.0.0.1:9999/policy")` 但它不会对我的 servlet 进行任何调用：

```
public class PolicyServlet extends GenericServlet {
    @Override
    public void service(ServletRequest servletRequest, ServletResponse servletResponse) throws ServletException, IOException {
        System.out.println("SEVERE");
    }
} 
```

在 web.xml 中：

```
<servlet-mapping>
     <servlet-name>PolicyServlet</servlet-name>
     <url-pattern>/policy</url-pattern>
</servlet-mapping> 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T09:14:24.387

以下是如何使用 apache 模块来提供策略文件的示例。 [http://socketpolicyserver.com/](http://socketpolicyserver.com/)。也许您更容易使用 IE9 插件[http://html5labs.interoperabilitybridges.com](http://html5labs.interoperabilitybridges.com)和/或 jetty-websocket 作为您的 servlet 实现接口，因为您已经使用 jetty 作为您的 Web 服务器。

# java - hsqldb java的profiling示例程序

> ID：12409240
> 
> 赞同：0
> 
> 时间：2012-09-13T15:02:01.210
> 
> 标签：java, hsqldb, profiler

基本上，我正在尝试分析在 tomcat 上运行并使用 hsqldb（来自 OWASP 的不安全 Web 应用程序）的 Web 应用程序。我正在使用 java profiler（根本没有广泛使用的 jp2-2.1）来分析 tomcat 服务器。探查器分析方法调用的顺序，它们以 xml 格式执行。简而言之，它会生成程序/应用程序运行的调用上下文树。

我注意到，对于应用程序的两次相同运行，执行 hsqldb 方法的顺序不同。我希望是一样的。为了确认这一点，我尝试分析 hsqldb 的示例程序，并且分析器再次为同一程序生成不同的输出。

我从这里运行示例程序：(http://hsqldb.sourceforge.net/doc/guide/apb.html)

**所以现在我确信，执行 hsqldb 方法的顺序对于程序的完全相同的两次运行是不同的。**

**有人可以告诉我这背后的原因是什么吗？我很想知道这一点。**

我从来没有使用过 hsqldb，所以不知道它是如何工作的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T07:38:13.767

如果执行的 SQL 语句完全相同，并且每次运行都从一个空数据库开始，那么 HSQLDB 方法的执行顺序通常应该相同。

第一次运行和随后的运行之间会有细微的差别，因为一些静态数据是在第一次运行时初始化的。

# api - 动态配置文件 URL

> ID：12409246
> 
> 赞同：0
> 
> 时间：2012-09-13T15:02:19.803
> 
> 标签：api, stocktwits

API 能否提供检索用户最新头像的 URL。

现在，最初的 OAuth 调用为我们提供了当时头像的静态 URL。如果用户稍后更改他们的头像，API 不会提供此功能。

例如

`http://api.stocktwits.com/api/2/avatar?username=bgajdero`

会返回：

`http://static.stocktwits.com/avatars/ubu2gb3ug2i34.png`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T17:56:02.657

StockTwits 的开发人员在这里。目前最好的办法是使用用户流端点并从那里的用户对象更新头像（即[https://api.stocktwits.com/api/2/streams/user/bgajdero.json](https://api.stocktwits.com/api/2/streams/user/bgajdero.json)）。当您拉入流消息时，从每条消息中的用户对象更新化身的本地表示以保持更新也是一个好主意，因为这些通常是新鲜的。

我们将把它放在未来的审查中，看看是否有更好的选择，但现在这将是保持头像更新的最佳方式。

# javascript - 迷你弹出验证器（如 html 要求）

> ID：12409247
> 
> 赞同：0
> 
> 时间：2012-09-13T15:02:26.330
> 
> 标签：javascript, html, forms, validation

有谁知道在迷你弹出窗口中显示错误的验证器（如 html 要求，但有可能添加更强的条件）。

我搜索了大约 1/2 小时，只发现字段旁边/字段下/其他有错误。

注意：我正在为现有的解决方案工作，并不关心包含哪些验证规则，因为无论如何我都要自己编写。我唯一需要的是带有定制信息的可爱小泡泡。

# iphone - 使单元格 imageView 与动画一起飞入

> ID：12409257
> 
> 赞同：0
> 
> 时间：2012-09-13T15:02:48.673
> 
> 标签：iphone, ios, xcode, cocoa-touch

如何使我的单元格的 imageView 属性一个接一个地飞起来？

我现在可以让它们飞进来，但只能一次。

做这样的事情对性能有好处吗？

# 谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T15:09:21.653

使用`indexPath.row`计算延迟。

```
float animationDelay = 0.2f;
[UIView animateWithDuration:0.3f 
                      delay:animationDelay * indexPath.row 
                    options:0 
                 animations:^{
            cell.imageView.transform = CGAffineTransformMakeScale(1.0f, 1.0f);
        }  completion:^{}]; 
```

这将使每一行相对于其上方的行延迟 0.2 秒。当然，这仅在您最初加载表格时才有效，但我想这就是您要制作动画的内容？当您开始滚动并加载新单元格时，您可能应该将延迟设置为零。否则图像将需要一段时间才能显示出来。

为了实现这一点，我建议引入一个`BOOL`名为 ivar`loadingTheFirstTime`的初始设置`YES`（在`init`or`awakeFromNib`方法中）。然后您可以将其设置`NO`为第一次显示表格的时间。在创建单元格时，您应该首先检查此变量以查看是否必须添加延迟。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T15:10:09.613

我想你在这里`cellForRowAtIndexPath:`。改变你的动画：

```
[UIView animateWithDuration: 3.0 
                      delay: indexPath.row
                    options: UIViewAnimationCurveLinear 
                 animations: ^{
                     cell.imageView.transform = CGAffineTransformMakeScale(1.0f, 1.0f);
                 } 
                 completion:^(BOOL finished) {

                 }]; 
```

动画将以 1 秒的间隔加载。如果您不在此函数中，请在创建单元格时为其设置标签，并将该标签放入延迟中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T15:10:08.057

也许设置一个方法，其中有一个 for 循环贯穿每个单元格并在每次循环中运行动画？关于性能，我不知道。我不认为它对性能有好处，特别是如果有很多细胞，但你总是可以尝试并找出答案！:)

# iphone - 如何让应用程序在后台运行？

> ID：12409259
> 
> 赞同：0
> 
> 时间：2012-09-13T15:02:55.937
> 
> 标签：iphone, nsxmlparser

我正在开发一个应用程序，在其中我使用 NSXMLParser 从 XML 链接中获取一些照片，因此如果我单击 iPhone（设备）中的主页按钮并再次打开应用程序，则加载图像需要一些时间，应用程序崩溃。我不知道如何使我的应用程序也能够在后台状态下运行。我用谷歌搜索并发现“应用程序状态和多任务处理”，但我无法在我的应用程序中实现它。任何解决方案或链接将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T06:41:58.143

试试这个

```
UIBackgroundTaskIdentifier backgroundTask = 0;
 UIApplication  *application= [UIApplication sharedApplication];
backgroundTask = [application beginBackgroundTaskWithExpirationHandler:^{
    [application endBackgroundTask:backgroundTask];
}]; 
```

在初始方法中在您的应用程序中使用此代码

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
//call your upload method
} 
```

# jquery - 是否可以使用 jQuery 更改文件中的 json 值？

> ID：12409261
> 
> 赞同：2
> 
> 时间：2012-09-13T15:03:05.030
> 
> 标签：jquery, json

我想制作计数器，所有用户的值都相同。

我有 json 文件，其中包含数据：count = 0。

我想每秒运行一次函数，接下来将执行以下操作：

1.从json文件中获取值

2.更新计数器值

3.更改json文件中的值

4.转到1

这是我现在拥有的：

```
var counter = 0;
var myCounter = new flipCounter('counter', {value:counter});//initializing counter
 window.setInterval(function(){
$.getJSON('http://127.0.0.1:3000/counter.json', function(data) {1.taking the data from file
 myCounter.setValue(data.count);//2.Updating counter
 //3.here I need to change value from json file
})
}, 1000); 
```

**有人可以帮我解决第 3 点（如何从 jQuery 更改 json 值）吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T15:06:54.347

您需要一些服务器端脚本来为您修改 json 文件。您只需使用 ajax 调用来访问脚本，它就可以为您更新计数器（在文件或数据库中）。您不想在客户端设置“通用”计数器值。

您只需要客户端从服务器中提取更新的计数（服务器在收到您的请求时将该计数增加一）。如果您期望大量流量，您可能不希望该计数器在平面文件中，而是在数据库或内存缓存中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T15:06:17.020

需要在服务器上进行更改。如果您希望服务器的记录更新，服务器需要这样做（尽管使用`$.post`or `$.postJSON`），但您需要：

1.  为客户抓住价值
2.  客户端进行更新
3.  客户端将更改的值重新提交给服务器
4.  服务器更新值。

除非您在服务器上有逻辑（即`counter.json`不仅仅是一个带有数字的文件，而是有服务器端逻辑[如 ASP、PHP 等]），否则您不会走得太远。

为了消除往返，您可以让服务器在每次 ping 时更新计数。类似（在服务器上）：

1.  获取当前计数
2.  计数器加一
3.  重新保存新计数
4.  向客户端输出计数（JavaScript 现在具有该值）

# apache-flex - Adobe Flex .swf 缓存

> ID：12409264
> 
> 赞同：2
> 
> 时间：2012-09-13T15:03:14.283
> 
> 标签：apache-flex, caching, flex3, flash

我发现每次都重新加载 .swf 文件以便用户拥有最新版本，添加以下代码以消除浏览器的缓存：

```
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" /> 
```

有人有其他建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T15:22:27.393

元标记仅指示浏览器不缓存 html 页面，但不缓存其资产。为了避免缓存，不要像嵌入 SWF 文件，而是像这样`"foo.swf"`尝试`"foo.swf?c=" + new Date().getTime()`

相同的技巧适用于任何其他嵌入动态资产，包括视频、音频以及动态图像。

# algorithm - 找到正确答案的算法

> ID：12409265
> 
> 赞同：1
> 
> 时间：2012-09-13T15:03:16.310
> 
> 标签：algorithm

我正在为 iOS 创建一个数学应用程序，其中包含儿童的简单任务。

我的目标是：将用户答案与特定任务中定义的答案进行比较。

例如：用户必须回答问题，例如 10 + 6 = 16、20 - 2 = 18 等...

但我也有用户必须通过几个步骤解决的任务。

例如：本走了 5 英里。第二天，他走了10英里。为了回家，他需要步行 20 英里。问题是——他需要步行多少英里才能回家？

所以接下来的解决方案是：

1.  5 + 10 = 15
2.  20 - 15 = 5

答案：5英里

好吧，我已经以 JSON 格式创建了所有任务，现在我可以根据字符串比较用户答案和正确答案。但现在我有一点问题。例如，如果我比较完整的字符串，这意味着我不允许用户移动组件。例如，用户可以创建下一个解决方案：

1.  10 + 5 = 15 但他也可以创建另一个变体 5 + 10 = 15。
2.  20 - 15 = 5

所以，如果我保留所有答案就没有问题，因为我会分析所有字符串，它会很完美。但我认为这是将所有答案保存在 JSON 中的糟糕解决方案（我的意思是所有变体答案）

但是，也许这只是一种解决方案。你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:06:24.770

如果我们只是有数学问题，则可以即时验证答案。

使用 javascript 仔细检查用户输入是否与正确答案匹配

您可以使用它`eval()`来执行此操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:18:07.993

好的，所以您不想通过 JSON 格式传输太多数据。我建议使用方括号来确保操作顺序。评估答案以确保它是正确的。在服务器上，您可以运行一个脚本来删除数字并将它们放入某种数组列表中。然后检查正确答案中的所有数字是否都在用户提交的字符串中的数字中。如果你只做加法，那么你很好，但如果你引入新的操作，比如除法或模数，你需要使用括号通过扩展括号来评估每个操作。例如，你会得到像 10+(9+2) 这样的答案。首先评估 9+2 并确保括号中发生的所有操作都是正确的，然后评估该组括号中的答案以及外部的操作。大学教师' 不过，不要在手机上进行太多计算。祝你好运。

# path - OS X Mountain Lion：path_helper 是如何工作的？

> ID：12409270
> 
> 赞同：16
> 
> 时间：2012-09-13T15:03:28.500
> 
> 标签：path, osx-mountain-lion

我通过自制软件安装了rbenv，现在不知道为什么path_helper 把~/.rbenv/shims 放在了路径的末尾而不是开头。最重要的是，path_helper 是如何获得这些信息的？

根据 path_helper 的手册页，它从 /etc/paths 和 /etc/paths.d 中的文件读取条目。但我在那里找不到字符串“.rbenv/shims”。

```
~% cat /etc/paths 
/usr/bin
/bin
/usr/sbin
/sbin
/usr/local/bin
~% ls -la /etc/paths.d 
total 0
drwxr-xr-x    2 root  wheel    68 Jun 21 03:16 .
drwxr-xr-x  107 root  wheel  3638 Sep 10 09:59 ..
~% /usr/libexec/path_helper
PATH="/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/Users/gordon/.rbenv/shims"; export PATH; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-31T12:23:56.043

我怀疑您的`.bash_profile`or`.bashrc`正在添加 到您的 PATH 中，并且在 shell 启动期间调用`.rbenv/shims`之前的某个时间点正在运行 。`path_helper`

path_helper 的手册页打开：

```
 The path_helper utility reads the contents of the files in the directo-
 ries /etc/paths.d and /etc/manpaths.d and appends their contents to the
 PATH and MANPATH environment variables respectively. 
```

这里的关键点是 path_helper 实用程序旨在将内容添加到现有`PATH`设置，而不是替换它们。（实际上，它真正做的是*预先*添加内容，而不是附加它们，这对`PATH`变量很重要......）

因此，如果我从 my 上的条目开始`PATH`，由 path_helper 生成的设置将确保该条目在`PATH`它生成的位置上继续。

```
% echo $SHELL
/bin/bash
% uname
Darwin
% /usr/libexec/path_helper 
PATH="/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin"; export PATH;
% PATH="" /usr/libexec/path_helper 
PATH="/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin"; export PATH;
% PATH=foo /usr/libexec/path_helper 
PATH="/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:foo"; export PATH; 
```

请注意，`foo`我的 PATH 中的最后一行已经包含在内，尽管 和 的内容`/etc/paths`并`/etc/paths.d/*`没有改变。

同时，path_helper 实用程序似乎也小心不要产生具有重复条目的路径；它在连接`/etc/paths`and`/etc/paths.d/*`和当前 `PATH`.

后一个细节可能特别令人困惑，因为与原始`PATH`设置（！）相比，它可能导致条目重新排序。

以下是此行为的一些示例： 第一种情况显示重复`foo`被删除。第二种和第三种情况说明了条目重新排序：在两种情况下生成的 PATH 相同，但在第三种情况下，`/usr/bin`条目已从中间`foo`移动`bar`到`PATH`. （这种重复条目删除似乎仅基于条目对上的简单字符串匹配，如下面的第四种情况所示，字符串`/usr/bin/`保持在`foo/`和之间`bar`。）

```
% PATH=foo:foo /usr/libexec/path_helper 
PATH="/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:foo"; export PATH;
% PATH=foo:bar /usr/libexec/path_helper 
PATH="/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:foo:bar"; export PATH;
% PATH=foo:/usr/bin:bar /usr/libexec/path_helper 
PATH="/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:foo:bar"; export PATH;
% PATH=foo/:/usr/bin/:bar /usr/libexec/path_helper 
PATH="/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:foo/:/usr/bin/:bar"; export PATH; 
```

最后，在应得的地方给予赞扬：虽然上面的所有命令序列都是我自己调查的结果，但我最初是在阅读[此处](https://github.com/dotphiles/dotzsh#mac-os-x)`path_helper`的注释后受到启发来研究的行为，其中指出重用环境变量集由父进程。`path_helper``PATH`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-08-02T10:13:00.870

path_helper 手册页不正确。手册页说 path_helper 将 /etc/paths.d 附加到 PATH 上。但实际上，path_helper 是从 /etc/paths 将 /etc/paths.d 附加到列表中，然后有效地将结果预置到实际预先存在的 PATH 上（以及从该列表中清除覆盖重复项的 PATH ）。

确切地说，仅以 PATH 为例，它的作用是：

1.  读取文件 /etc/paths 中的路径列表
2.  将目录 /etc/paths.d 中文件的路径列表附加到它上面
3.  改变 PATH 变量以删除列表中的任何项目
4.  将变异的 PATH 变量的值追加到列表中
5.  将此列表保存为新的 PATH

用伪代码重新表述这一点，它正在做的是：

1.  NEWPATH = 读取（/etc/paths）
2.  NEWPATH = $NEWPATH +append+ 读取(/etc/paths.d/*)
3.  PATH = $PATH -minus- $NEWPATH
4.  NEWPATH = $NEWPATH +追加+ $PATH
5.  路径 = $NEWPATH

危险在于，如果您手动配置 PATH，可能是为了添加覆盖系统路径组件的组件。如果 path_helper 在您不期望的时候被调用，那么它将通过将系统范围的路径组件放在路径组件之前来撤消您的更改。

路径助手会如何被意外调用？例如，它由 /etc/zshenv 调用，每次启动 zsh shell 时都会调用它，无论它是子 shell，还是从另一个应用程序（如 emacs）调用的 zsh 实例，或其他什么。

我已经把它写成了[关于 path_helper 的 OpenRadar 错误报告](http://openradar.appspot.com/14630658)。

# java - 如何通过与休眠的多对多关系级联保存？

> ID：12409283
> 
> 赞同：3
> 
> 时间：2012-09-13T15:03:57.637
> 
> 标签：java, hibernate, postgresql, orm, many-to-many

我的数据库中有一个多对多（带有连接表）关系，我需要在休眠中建模。

我对数据库中的所有三个表都有 POJO 类，因为连接表包含的不仅仅是映射信息。

我的问题发生在 A 类的 save() 上，其中 A 类被告知要级联到 AB 类（连接表），AB 类被告知要级联到 B 类，但是当它到达将 AB 保存为外键引用的地步时到表 A 为空。

归根结底，我希望能够在 TableA 类的实例上调用 save() 并让它保存所有三个表。

[表格图](http://imgur.com/ZyvSG)

表 A 映射

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated Aug 27, 2012 2:16:37 PM by Hibernate Tools 3.4.0.CR1 -->
<hibernate-mapping>
    <class name="com.example.dbtables.TableA" table="Table A">
        <id name="id" type="int">
            <column name="id" />
            <generator class="sequence">
                <param name="sequence">table_a_seq</param>
            </generator>
        </id>
        <natural-id>
        <property name="data1" type="int">
            <column name="DATA1" not-null="true" />
        </property>
        <property name="data2" type="string">
            <column name="DATA2" length="16" not-null="true" />
        </property>
        </natural-id>
        <set name="tableAB" cascade="save-update" table="TableAB" inverse="true" lazy="true" fetch="select">
            <key>
                <column name="Table_AB_ID" not-null="true" />
            </key>
            <one-to-many class="com.example.dbtables.TableAB" />
        </set>
    </class>
</hibernate-mapping> 
```

表 AB 映射

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated Aug 27, 2012 2:16:37 PM by Hibernate Tools 3.4.0.CR1 -->
<hibernate-mapping>
    <class name="com.example.dbtables.TableAB" table="Table AB">
        <id name="id" type="int">
            <column name="id" />
            <generator class="sequence">
                <param name="sequence">table_ab_seq</param>
            </generator>
        </id>
        <natural-id>
        <many-to-one name="tableA" class="com.example.dbtables.TableA" fetch="select">
            <column name="Table_A_ID" not-null="true" />
        </many-to-one>
        <many-to-one name="tableB" cascade="save-update" class="com.example.dbtables.TableB" fetch="select">
            <column name="Table_B_ID" not-null="true" />
        </many-to-one>
        <property name="data1" type="int">
            <column name="DATA1" not-null="true" />
        </property>
            <property name="data2" type="int">
            <column name="DATA2" not-null="true" />
        </property>
        </natural-id>
    </class>
</hibernate-mapping> 
```

表 B 映射

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated Aug 27, 2012 2:16:37 PM by Hibernate Tools 3.4.0.CR1 -->
<hibernate-mapping>
    <class name="com.examples.dbtables.TableB" table="Table B">
        <id name="id" type="int">
            <column name="id" />
            <generator class="sequence">
                <param name="sequence">table_b_seq</param>
            </generator>
        </id>
        <natural-id>
        <property name="data1" type="string">
            <column name="DATA1" length="16" />
        </property>
        <property name="data2" type="java.lang.Integer">
            <column name="DATA2" />
        </property>
        </natural-id>
        <set name="TableAB" table="Table AB" inverse="true" lazy="true" fetch="select">
            <key>
                <column name="Table_AB_ID" not-null="true" />
            </key>
            <one-to-many class="com.example.dbtables.TableAB" />
        </set>
    </class>
</hibernate-mapping> 
```

谢谢你提供的所有帮助。如果您需要澄清或更多信息，请告诉我。

编辑：我的问题是从 AB -> 到 A 的引用没有正确填充。感谢所有提供帮助的人，此问题已得到解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:13:49.573

```
 A a = new A();
  B b = new B();
  AB ab = new AB();
  ab.setA(a);
  ab.setB(b);
  a.setAB(ab);
  b.setAB(ab);

  save(a); 
```

这个例子不起作用？你有什么例外吗？
**编辑**
查看此 Hibernate 文档 [第 5 章。基本 O/R 映射](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html)到第**5.1.4.1 章。生成器**
**PostgreSQL**不支持*身份*生成类型。
使用*序列*生成而不是*身份*，或其他东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:37:55.747

问题是 AB -> A 之间的反向引用没有正确填充到我的代码中。感谢伊利亚的帮助。

# android - 确定完成的活动结果outisde活动

> ID：12409285
> 
> 赞同：-1
> 
> 时间：2012-09-13T15:04:04.490
> 
> 标签：android, android-activity, android-context

我正在创建视图组件，它能够打开用户输入对话框。我可以`startActivityForResult`在 Activity 中使用，但由于某些原因，我无法在 Activity 类中直接制作组件。代码很简单：

```
Context context = getContext();
if (context instanceof Activity)
  ((Activity)context).startActivityForResult(...);
else 
  context.startActivity(..) //fallback 
```

我如何确定活动何时关闭并在可能的情况下捕获结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:11:43.610

使 onCreate 中的标志为假，并将他保存到单音或 SharedPreferences，并在 onDestroy 中将此标志设为真并保存他。对于从 onDestroy 发送结果的当前 Activity 中的捕获结果，请生成接收器。或者在 onDestroy 中完成工作，您可以将其保存到单音或 SharedPreference。到时候谢谢。

# jsf-2 - 已经在 HttpSession 中的 @SessionScoped @ManagedBean 会发生什么？

> ID：12409286
> 
> 赞同：0
> 
> 时间：2012-09-13T15:04:04.890
> 
> 标签：jsf-2, myfaces

旧代码在 ServletFilter 中的第一个请求处创建一个`@SessionScoped @ManagedBean`（即`UserSession`）并将其放入`HttpSession`（如果还没有的话）。

现在，当某个 EL 表达式第一次尝试访问该 ManagedBean 时会发生什么？我期待第二个实例`UserSession`（一个手动创建，一个来自 JSF）。所以我对构造函数进行了检测，`@PostConstruct`并`@PreDestroy`使用了一些日志语句。现在看来 JSF 从来没有创建`UserSession`- 只有构造函数被调用。

这可能吗？JSF 可以重用那个 bean`HttpSession`吗？`@SessionScoped`放豆子合法`HttpSession`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T15:30:19.133

你的观察是正确的。在 JSF 的保护下，JSF 本身也将会话范围的托管 bean 存储为`HttpSession`. 因此，如果它已经存在，它将被重复使用，无论它是如何结束的。

这是好是坏取决于具体的功能要求。鉴于您的惊讶，我猜这很糟糕，您需要修改方法或功能要求。也许您需要一个辅助（会话范围？）托管 bean，它通过`@ManagedProperty`.

# android - Android：如何检测禁用菜单项的点击？

> ID：12409288
> 
> 赞同：1
> 
> 时间：2012-09-13T15:04:15.470
> 
> 标签：android

我在 ActionBar 子菜单中有一些项目，我想有条件地禁用它们，因为它们不适用于某些上下文。我希望它们显示为禁用（灰色）以阻止用户点击它们；但是如果单击，我想显示一个 toast 通知用户为什么它被禁用（“不能做 A，因为没有 B”等）。但是，如果我调用 MenuItem.setEnabled(false)，似乎所有菜单项单击事件都不会发生。那么，如何检测对禁用菜单项的单击？

```
public class Temp extends Activity implements OnMenuItemClickListener
{
    boolean mConditional = true;

    protected void onCreate(Bundle state)
    {
        super.onCreate(state);
    }

    public boolean onMenuOpened(int featureId, Menu menu)
    {
        MenuItem item = (MenuItem) menu.findItem(R.id.item2);
        if(item != null && mConditional)
        {
            item.setEnabled(false);
            item.setOnMenuItemClickListener(this);
        }

        return super.onMenuOpened(featureId, menu);
    }

    @Override
    public boolean onMenuItemClick(MenuItem item) 
    {
        //does not fire if item is disabled
        Log.e("", item.getTitle().toString());
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item)
    {
        //does not fire if item is disabled
        Log.e("", item.getTitle().toString());
        return super.onOptionsItemSelected(item);
    }

    @Override
    public boolean onMenuItemSelected(int featureId, MenuItem item)
    {
        //does not fire if item is disabled
        Log.e("", item.getTitle().toString());
        return super.onMenuItemSelected(featureId, item);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu)
    {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.main, menu);
        return true;
    }
} 
```

![](../Images/b360d7c7aff7a6012988660c77e0133b.png)

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:id="@+id/menu"
        android:icon="@drawable/ic_launcher"
        android:showAsAction="always"
        android:title="menu">
        <menu>
            <item
                android:id="@+id/item1"
                android:showAsAction="always"
                android:title="item 1"/>
            <item
                android:id="@+id/item2"
                android:showAsAction="always"
                android:title="item 2"/>
            <item
                android:id="@+id/item3"
                android:showAsAction="always"
                android:title="item 3"/>
        </menu>
    </item>
</menu> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T15:18:03.013

你不能用`setEnabled`这个。您需要始终启用菜单项并通过更改可绘制对象来模拟“禁用”状态（或使用 porterduff 过滤器对其进行修改 - 看看[这个](https://stackoverflow.com/questions/9021450/android-button-with-image-dim-image-when-button-disabled)关于如何在 android 中使图像变暗的问题）。另外，您需要保留一个指示项目状态的标志 -`tag`菜单项是一个不错的选择。理想情况下，你会有这样的东西：

```
private void setMenuItemEnable(MenuItem item, boolean enabled) {
    int curstate = ((Integer)item.getTag()).intValue();

    if(curState == 1 && enabled || curstate == 0 && !enabled) {
        return;
    }

    if(enabled) {
        ... //update image to remove dimming
        item.setTag(1);
    }
    else {
        ... //update image by dimming it
        item.setTag(0);
    }
} 
```

最后，在您的`onOptionsItemSelected()`方法中，检查所选菜单项的标签，如果标签为 1，则执行操作，如果标签为 0，则显示 toast。从视觉上看，这正是您想要的，从功能上讲，它会做什么你在追求。

# php - 函数重新声明致命错误？

> ID：12409294
> 
> 赞同：0
> 
> 时间：2012-09-13T15:04:31.713
> 
> 标签：php, function

**我在文件function.php**中只声明了一次函数`log()`（根据我的说法），并且该文件使用. 那么为什么我会收到此错误？**`require_once`**

 *** * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T15:05:27.543

PHP 已经有一个内置[`log()`](http://php.net/manual/en/function.log.php)函数，用于查找数字的自然对数。

您不能定义与内置函数同名的新函数。你必须调用你的函数别的东西。**

# php - PDO - 尊重数组的 Foreach

> ID：12409295
> 
> 赞同：0
> 
> 时间：2012-09-13T15:04:32.473
> 
> 标签：php, mysql, arrays, foreach, pdo

使用 PDO，我收到 1+ 行并将它们变成这样的数组：

```
while($row = $car_sales->fetch(PDO::FETCH_ASSOC)){          
    $car_id_array[] = $row["car_id"];
    $car_type_array[] = $row["car_type"];
    $dealer_id_array[] = $row["dealer_id"];
    $buyer_id_array[] = $row["seller_id"];
} 
```

我试图简单地“混合”数组的每个级别作为一个单元并一起进入 foreach 循环，按顺序提交 $q 查询。换句话说，是这样的：

```
foreach($dealer_id_array as $dealer_id) {
    if ($car_type=='new') {
        if ($dealer_id==$buyer_id){
          $q = 'UPDATE car_sales SET new_cars=new_cars+1 WHERE dealer_id=:dealer_id';
        } else if ($dealer_id!=$buyer_id){
          $q = 'UPDATE car_sales SET new_cars=new_cars-1 WHERE dealer_id=:dealer_id';
    } else if ($car_type=='old') {
        if ($dealer_id==$buyer_id){
          $q = 'UPDATE car_sales SET old_cars=old_cars+1 WHERE dealer_id=:dealer_id';
        } else if ($dealer_id!=$buyer_id){
          $q = 'UPDATE car_sales SET old_cars=old_cars-1 WHERE dealer_id=:dealer_id';
    }
    $car_update = $dbhandle->prepare($q);
    $car_update->execute(array(':dealer_id' => $dealer_id));
} 
```

如果从 while 循环中仅检索到一个值，则该循环应使用第一个数组值运行。如果有更多，则 foreach 应该运行与 while 循环中的 Dealer_id 一样多的次数，同时尊重顺序。这个例子不起作用，但我正在寻找可能的解决方案来正确解决这个问题。您认为最有效的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T15:13:24.890

我可能会误解你，但我相信如果你只是用 for 循环替换你的 foreach 循环，并计算其中一个数组，你会解决你的问题：

```
 for($i = 0; $i < count($dealer_id_array); $i++) { 
```

然后只需使用 $i 访问数组中的正确项目：

```
$car_type_array[$i]; 
```

但是话虽如此，我并没有真正看到最初的四个数组的意义。你能不能一开始就直接在while循环内直接执行foreach循环内的代码？

已编辑：修复代码示例

# sharepoint - 小Q在sharepoint上搭建页面

> ID：12409297
> 
> 赞同：0
> 
> 时间：2012-09-13T15:04:34.490
> 
> 标签：sharepoint, powershell, sharepoint-2010, powershell-2.0

现在我正在创建一个页面，其中包含一个由服务器端的 powershell 更新的列表

我想显示上次运行 powershell 脚本的时间，我怎样才能得到它？

谁能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:57:53.450

在您的 powershell 操作中，您可以将上次操作的日期写入 SPWeb 属性包。在您的页面上，您只需要读取该值。

# javascript - 如何在 Javascript 中获取当前格式化日期 dd/mm/yyyy 并将其附加到输入

> ID：12409299
> 
> 赞同：379
> 
> 时间：2012-09-13T15:04:39.667
> 
> 标签：javascript, html, input, tags, hidden

我想将当前日期添加到隐藏的 HTML 标记中，以便将其发送到服务器：

```
<input type="hidden" id="DATE" name="DATE" value="WOULD_LIKE_TO_ADD_DATE_HERE"> 
```

如何将格式化日期添加到 VALUE 属性？

* * *

## 回答 #1

> 赞同：632
> 
> 时间：2012-09-13T15:06:59.773

我希望这是你想要的：

```
const today = new Date();
const yyyy = today.getFullYear();
let mm = today.getMonth() + 1; // Months start at 0!
let dd = today.getDate();

if (dd < 10) dd = '0' + dd;
if (mm < 10) mm = '0' + mm;

const today = dd + '/' + mm + '/' + yyyy;

document.getElementById('DATE').value = today; 
```

[如何在 JavaScript 中获取当前日期？](https://stackoverflow.com/questions/1531093/how-to-get-current-date-in-javascript)

* * *

## 回答 #2

> 赞同：232
> 
> 时间：2014-04-03T06:30:31.177

老实说，我建议您使用[moment.js](http://momentjs.com)。只需下载`moment.min.js`然后使用此代码段以您想要的任何格式获取您的日期：

```
<script>
$(document).ready(function() {

     // set an element
     $("#date").val( moment().format('MMM D, YYYY') );

     // set a variable
     var today = moment().format('D MMM, YYYY');

});
</script> 
```

使用以下图表作为日期格式：

![在此处输入图像描述](../Images/93f1f48b45977ff032ccc7967a5a9488.png)

* * *

## 回答 #3

> 赞同：142
> 
> 时间：2013-09-29T14:53:31.227

```
<input type="hidden" id="date"/>
<script>document.getElementById("date").value = new Date().toJSON().slice(0,10)</script> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-13T15:08:10.463

通过使用 value 属性：

```
var today = new Date();
document.getElementById('DATE').value += today; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-13T15:13:48.997

在 javascript 中获取当前日期/时间：

```
var date = new Date(); 
```

如果您需要毫秒来轻松进行服务器端解释使用

```
var value = date.getTime(); 
```

要将日期格式化为用户可读的字符串，请参阅[此](https://stackoverflow.com/questions/1056728/formatting-a-date-in-javascript)

然后只需写入隐藏字段：

```
document.getElementById("DATE").value = value; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-13T15:07:26.903

使用 DOM 的`getElementByid`方法：

`document.getElementById("DATE").value = "your date";`

可以与`Date`班级约会：

`d = new Date();`

（Protip：在 Chrome 或 Firefox 的 Firebug 扩展中安装一个 javascript 控制台。它使您可以使用 DOM 和 Javascript）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-13T15:06:52.170

`value`您可以通过编辑元素的`.value`属性来编辑元素。

```
document.getElementById('DATE').value = 'New Value'; 
```

# android - 按钮的单击事件未引发

> ID：12409306
> 
> 赞同：0
> 
> 时间：2012-09-13T15:05:01.850
> 
> 标签：android, button, onclick, horizontal-scrolling

我正在尝试制作带有一些按钮的自定义快速徽章之类的东西。我已经成功设计了它，但是当我点击这些按钮时它什么也没做。有人可以告诉我我哪里出错了。

**demo_layout.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<Button
    android:id="@+id/likemenu"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="30dp"
    android:text="Button" />

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1" >
</TextView>

<Button
    android:id="@+id/likequickaction"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:padding="30dp"
    android:text="Button" />

</LinearLayout> 
```

**popup_grid_layout.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content" >

<FrameLayout
    android:id="@+id/header2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="10.0dip"
    android:background="@drawable/quickaction_top_frame" />

<ImageView
    android:id="@+id/arrow_up"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:src="@drawable/quickaction_arrow_up" />

<HorizontalScrollView
    android:id="@+id/scroll"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/header2"
    android:background="@drawable/quickaction_slider_background"
    android:fadingEdgeLength="0.0dip"
    android:paddingLeft="1.0dip"
    android:scrollbars="none" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:background="@drawable/quickaction_slider_grip_left" />

        <include
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            layout="@layout/api_buttons" />

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:background="@drawable/quickaction_slider_grip_right" />
    </LinearLayout>
</HorizontalScrollView>

<FrameLayout
    android:id="@+id/footer"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/scroll"
    android:background="@drawable/quickaction_bottom_frame" />

</RelativeLayout> 
```

**api_buttons.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/horizontalScrollView1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:background="@drawable/quickaction_slider_background" >

<TableRow
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/one"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:minHeight="80dp"
        android:minWidth="80dp"
        android:text="One" />

    <Button
        android:id="@+id/two"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:minHeight="80dp"
        android:minWidth="80dp"
        android:text="Two" />

    <Button
        android:id="@+id/three"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:minHeight="80dp"
        android:minWidth="80dp"
        android:text="Three" />

    <Button
        android:id="@+id/four"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:minHeight="80dp"
        android:minWidth="80dp"
        android:text="Four" />

    <Button
        android:id="@+id/five"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:minHeight="80dp"
        android:minWidth="80dp"
        android:text="Five" />

    <Button
        android:id="@+id/six"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:minHeight="80dp"
        android:minWidth="80dp"
        android:text="Six" />
</TableRow>

</HorizontalScrollView> 
```

**BetterPopupWindow.java**

```
public class BetterPopupWindow {
protected final View anchor;
private final PopupWindow window;
private View root;
private Drawable background = null;
private final WindowManager windowManager;

public BetterPopupWindow(View anchor) {
    this.anchor = anchor;
    this.window = new PopupWindow(anchor.getContext());

    // when a touch even happens outside of the window
    // make the window go away
    this.window.setTouchInterceptor(new OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_OUTSIDE) {
                BetterPopupWindow.this.window.dismiss();
                return true;
            }
            return false;
        }
    });

    this.windowManager = (WindowManager) this.anchor.getContext()
            .getSystemService(Context.WINDOW_SERVICE);
    onCreate();
}

protected void onCreate() {
}

protected void onShow() {
}

private void preShow() {
    if (this.root == null) {
        throw new IllegalStateException(
                "setContentView was not called with a view to display.");
    }
    onShow();

    if (this.background == null) {
        this.window.setBackgroundDrawable(new BitmapDrawable());
    } else {
        this.window.setBackgroundDrawable(this.background);
    }

    this.window.setWidth(WindowManager.LayoutParams.WRAP_CONTENT);
    this.window.setHeight(WindowManager.LayoutParams.WRAP_CONTENT);
    this.window.setTouchable(true);
    this.window.setFocusable(true);
    this.window.setOutsideTouchable(true);

    this.window.setContentView(this.root);
}

public void setBackgroundDrawable(Drawable background) {
    this.background = background;
}

public void setContentView(View root) {
    this.root = root;
    this.window.setContentView(root);
}

public void setContentView(int layoutResID) {
    LayoutInflater inflator = (LayoutInflater) this.anchor.getContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    this.setContentView(inflator.inflate(layoutResID, null));
}

public void setOnDismissListener(PopupWindow.OnDismissListener listener) {
    this.window.setOnDismissListener(listener);
}

public void showLikePopDownMenu() {
    this.showLikePopDownMenu(0, 0);
}

public void showLikePopDownMenu(int xOffset, int yOffset) {
    this.preShow();

    this.window.setAnimationStyle(R.style.Animations_PopDownMenu);

    this.window.showAsDropDown(this.anchor, xOffset, yOffset);
}

public void showLikeQuickAction() {
    this.showLikeQuickAction(0, 0);
}

public void showLikeQuickAction(int xOffset, int yOffset) {
    this.preShow();

    this.window.setAnimationStyle(R.style.Animations_GrowFromBottom);

    int[] location = new int[2];
    this.anchor.getLocationOnScreen(location);

    Rect anchorRect = new Rect(location[0], location[1], location[0]
            + this.anchor.getWidth(), location[1] + this.anchor.getHeight());

    this.root.measure(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

    int rootWidth = this.root.getMeasuredWidth();
    int rootHeight = this.root.getMeasuredHeight();

    int screenWidth = this.windowManager.getDefaultDisplay().getWidth();
    int screenHeight = this.windowManager.getDefaultDisplay().getHeight();

    int xPos = ((screenWidth - rootWidth) / 2) + xOffset;
    int yPos = anchorRect.top - rootHeight + yOffset;

    // display on bottom
    if (rootHeight > anchorRect.top) {
        yPos = anchorRect.bottom + yOffset;
        this.window.setAnimationStyle(R.style.Animations_GrowFromTop);
    }

    this.window.showAtLocation(this.anchor, Gravity.NO_GRAVITY, xPos, yPos);
}

public void dismiss() {
    this.window.dismiss();
}
} 
```

**LikeQuickActionDemo.java**

```
public class LikeQuickActionsDemo extends Activity {
private Button likemenuButton;
private Button likequickactionButton;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.setContentView(R.layout.demo_layout);

    this.likemenuButton = (Button) this.findViewById(R.id.likemenu);
    this.likemenuButton.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            DemoPopupWindow dw = new DemoPopupWindow(v);
            dw.showLikePopDownMenu();
        }
    });

    this.likequickactionButton = (Button) this
            .findViewById(R.id.likequickaction);
    this.likequickactionButton.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            DemoPopupWindow dw = new DemoPopupWindow(v);
            dw.showLikePopDownMenu(0, 200);
        }
    });

}

private static class DemoPopupWindow extends BetterPopupWindow implements
        OnClickListener {
    public DemoPopupWindow(View anchor) {
        super(anchor);
    }

    protected void onCreate() {
        // inflate layout
        LayoutInflater inflater = (LayoutInflater) this.anchor.getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        ViewGroup root = (ViewGroup) inflater.inflate(
                R.layout.popup_grid_layout, null);

        // setup button events
        for (int i = 0, icount = root.getChildCount(); i < icount; i++) {
            View v = root.getChildAt(i);

            if (v instanceof TableRow) {
                TableRow row = (TableRow) v;

                for (int j = 0, jcount = row.getChildCount(); j < jcount; j++) {
                    View item = row.getChildAt(j);
                    if (item instanceof Button) {
                        Button b = (Button) item;
                        b.setOnClickListener(this);
                    }
                }
            }
        }

        // set the inflated view as what we want to display
        this.setContentView(root);
    }

    public void onClick(View v) {
        // we'll just display a simple toast on a button click
        Button b = (Button) v;
        Toast.makeText(this.anchor.getContext(), b.getText(),
                Toast.LENGTH_SHORT).show();
        this.dismiss();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T15:30:18.463

问题出在`DemoPopupWindow.onCreate`方法上：

```
 ViewGroup root = (ViewGroup) inflater.inflate(
            R.layout.popup_grid_layout, null);
    for (int i = 0, icount = root.getChildCount(); i < icount; i++) {
        View v = root.getChildAt(i);
        if (v instanceof TableRow) { 
```

`root`将`RelativeLayout`定义在`popup_grid_layout.xml`. 稍后，您遍历其所有子视图并仅在子视图为 时设置 onclick 侦听器`TableRow`，但情况并非如此。我猜你想要的是找到`horizontalScrollView1`视图并对它的孩子做同样的事情，比如：

```
View horizontalScrollView1 = findViewById(R.id.horizontalScrollView1);
for (int i = 0, icount = horizontalScrollView1.getChildCount(); i < icount; i++) {
        View v = horizontalScrollView1.getChildAt(i);
        if (v instanceof TableRow) {
... 
```

# spring - 成功登录后意外重定向到登录页面

> ID：12409308
> 
> 赞同：0
> 
> 时间：2012-09-13T15:05:11.580
> 
> 标签：spring, jsf, spring-security, prettyfaces

我正在使用 Spring 来处理我的 JSF 应用程序中的安全性。我有一个登录页面，`/login`我已经像这样配置了 Spring：

```
<http authentication-manager-ref="authenticationManager">
    <intercept-url pattern="/login" access="IS_AUTHENTICATED_ANONYMOUSLY" />
    <intercept-url pattern="/admin" access="ROLE_ADMIN" />
    <intercept-url pattern="/javax.faces.resource/**" access="IS_AUTHENTICATED_ANONYMOUSLY" />
    <intercept-url pattern="/**" access="ROLE_ADMIN,ROLE_USER" />
    <form-login login-page="/login" authentication-failure-url="/login" />
    <logout logout-url="/logout" />
</http> 
```

我希望管理员页面仅对具有该角色`/admin`的用户可用。`ROLE_ADMIN`拥有`ROLE_ADMIN`或`ROLE_USER`可能访问从应用程序根目录开始的页面的用户。

当我使用具有任一角色的用户登录时，我会看到登录后应该看到的页面。但是，无论我的下一个动作是什么，我都会被重定向到`/login`就像我没有登录一样。有人可以解释一下，因为我现在正试图让这个东西工作一天。我一直在阅读 Spring 3.1.x 文档，但它并没有给我关于如何解决问题的线索。顺便说一句，我正在运行 Spring 3.1.1.Release。

额外奖励信息：登录后您应该看到的页面有一个元素，只有在用户拥有`ROLE_ADIN`. 登录后我可以看到该元素。当我实现 PrettyFaces 时，问题就开始了。我在网上搜索了常见问题，只是想出了 PrettyFaces 过滤器应该出现在 Spring 安全过滤器之后。是这种情况，所以它应该可以正常工作吗？

**更新：**我已经更新了我的配置以使用表达式。然而问题依然存在。

```
<http authentication-manager-ref="authenticationManager" use-expressions="true">
    <intercept-url pattern="/login" access="permitAll" />
    <intercept-url pattern="/admin" access="hasRole('ROLE_ADMIN')" />
    <intercept-url pattern="/javax.faces.resource/**" access="permitAll" />
    <intercept-url pattern="/**" access="hasAnyRole('ROLE_ADMIN','ROLE_USER')" />
    <form-login login-page="/login" authentication-failure-url="/login" />
    <logout logout-url="/logout" />
</http> 
```

登录后在 Firebug 控制台中的输出（页面尝试 AJAX 调用）：

![Firebug 控制台日志](../Images/b4114a0ac8eb47664ff700ef4d08738a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T16:06:40.843

首先，在遇到问题时始终调试 Spring Security（添加`log4j.logger.org.springframework.security=DEBUG`）。

其次，我认为您想要[`hasAnyRole`](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/el-access.html)：

```
<intercept-url pattern="/**" access="hasAnyRole(ROLE_ADMIN,ROLE_USER)" /> 
```

加上添加`use-expressions="true"`到`http`：

```
<http authentication-manager-ref="authenticationManager" use-expressions="true"> 
```

允许`ROLE_ADMIN`异`ROLE_USER`或用户访问页面。在您当前的配置中，用户必须同时拥有两个角色才能访问`/**`。

# c# - 在asp.net中保留gridview排序

> ID：12409309
> 
> 赞同：-1
> 
> 时间：2012-09-13T15:05:15.107
> 
> 标签：c#, asp.net

我有一个gridview，我有5-6列，我已经在gridview上完成了排序，并且可以通过单击每列的标题对每一列进行排序。现在我想要的是，我想保留排序标准，当用户再次访问我的网站时，他会发现网格是按照他之前选择的列排序的。请帮助我使用 Cookie 来实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T15:14:48.230

基本上，您想要处理[Sorting](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.sorting)事件，当用户通过单击 gridview 列标题链接之一触发回发时，运行时会在服务器端引发该事件。您的处理程序将获得一个 GridViewSortEventArgs 对象，其中包含要排序的表达式和排序的方向。只需以某种可逆的方式将它们组合成一个字符串，然后将数据添加为您网站的 Cookie：

```
Response.Cookies["myPageCookie"]["SortCriteria"] = e.SortExpression + "|" + e.SortDirection; 
```

...在页面的加载处理程序中，如果加载不是回发（意味着它是“首次”加载），请尝试从 Request.Cookies 集合中获取页面排序标准的 cookie，并且如果存在，则在加载数据后，调用 GridView.Sort() 传入此数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T15:09:14.343

您需要将此标准存储在某些持久性媒体中，例如磁盘文件或数据库，具体取决于更适合您的情况。

# c++ - 通过C++获取外部运行程序的窗口句柄

> ID：12409311
> 
> 赞同：2
> 
> 时间：2012-09-13T15:05:22.160
> 
> 标签：c++, window-handles, findwindow

有一个外部运行的程序，我需要能够调整大小。对我来说，最重要的是标题的一部分是与该实例相关的版本和其他特定信息。我知道跨版本应该一致的子字符串。我尝试了 Findwindow() 函数，如果你有标题的确切措辞，它会很好用，但当你只有一部分时就不行。我也尝试过 EnumWindows，但我相信它有同样的限制（我没有太多运气）。我觉得我能做的最简单的事情（如果可能的话）就是从图像名称中获取窗口句柄，以便调整大小。想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T15:19:35.940

这是我刚刚在 MSVS 2010 上测试的一段工作代码，它运行良好：

```
#include <stdlib.h>
#include <string.h>
#include <tchar.h>
#include <windows.h>

BOOL CALLBACK FindWindowBySubstr(HWND hwnd, LPARAM substring)
{
    const DWORD TITLE_SIZE = 1024;
    TCHAR windowTitle[TITLE_SIZE];

    if (GetWindowText(hwnd, windowTitle, TITLE_SIZE))
    {
        //_tprintf(TEXT("%s\n"), windowTitle);
        // Uncomment to print all windows being enumerated
        if (_tcsstr(windowTitle, LPCTSTR(substring)) != NULL)
        {
            // We found the window! Stop enumerating.
            return false;
        }
    }
    return true; // Need to continue enumerating windows
}

int main() 
{
    const TCHAR substring[] = TEXT("Substring");
    EnumWindows(FindWindowBySubstr, (LPARAM)substring);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T15:09:56.867

EnumWindows 就是专门为此而设计的。您创建自己的回调函数以传递给 EnumWindows，它将为它枚举的每个窗口调用您的回调函数，并将窗口的 hwnd 传递给它。您可以在回调函数中调用 GetWindowText 来获取窗口标题并像搜索任何其他文本一样搜索该文本。你对那个代码有什么问题？你为什么不发布它？

# .htaccess - 使用 htaccess 缩短 URL

> ID：12409312
> 
> 赞同：1
> 
> 时间：2012-09-13T15:05:26.753
> 
> 标签：.htaccess, codeigniter

我正在为我的网站使用 CodeIgniter，我想缩短我的 URL 以使其看起来更好，但它似乎不起作用。我正在使用 htaccess 方法，这是我下面的代码。

```
<IfModule mod_rewrite.c>

RewriteCond $1 !^(index\.php|(.*)\.swf|user_guide|profiles|images|min|assets|robots\.txt)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L]

RewriteEngine On

RewriteBase /gicfamily/

RewriteRule ^([a-zA-Z0-9]+)$ gallery?var=$1 
```

我希望 URL`gicfamily.org/gallery?var=photos` 看起来像`gicfamily.org/gallery/photos`.

我的配置文件看起来像这样：

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

$config['base_url'] = '';

$config['index_page'] = '';

$config['uri_protocol'] = 'AUTO';

$config['url_suffix'] = '';

$config['language'] = 'english';

$config['charset'] = 'UTF-8';

$config['enable_hooks'] = FALSE;

$config['subclass_prefix'] = 'MY_';

$config['permitted_uri_chars'] = 'a-z 0-9~%.:_\-';

$config['allow_get_array']      = TRUE;
$config['enable_query_strings'] = FALSE;
$config['controller_trigger']   = 'c';
$config['function_trigger']     = 'm';
$config['directory_trigger']    = 'd'; // experimental not currently in use

$config['log_threshold'] = 0;

$config['log_path'] = '';

$config['log_date_format'] = 'Y-m-d H:i:s';

$config['cache_path'] = '';

$config['encryption_key'] = 'ksfkvjbskfbvskbvlbsbvsokbskdb';

$config['sess_cookie_name']     = 'gic_session';
$config['sess_expiration']      = 7200;
$config['sess_expire_on_close'] = TRUE;
$config['sess_encrypt_cookie']  = FALSE;
$config['sess_use_database']    = TRUE;
$config['sess_table_name']      = 'gic_sessions';
$config['sess_match_ip']        = FALSE;
$config['sess_match_useragent'] = TRUE;
$config['sess_time_to_update']  = 300;

$config['cookie_prefix']    = "";
$config['cookie_domain']    = "";
$config['cookie_path']      = "/";
$config['cookie_secure']    = FALSE;

$config['global_xss_filtering'] = FALSE;

$config['csrf_protection'] = FALSE;
$config['csrf_token_name'] = 'csrf_test_name';
$config['csrf_cookie_name'] = 'csrf_cookie_name';
$config['csrf_expire'] = 7200;

$config['compress_output'] = FALSE;

$config['time_reference'] = 'local';

$config['rewrite_short_tags'] = FALSE;

$config['proxy_ips'] = ''; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T01:00:06.653

我认为您可能误解了路由和 URL 在 CodeIgniter 中的工作方式。请参阅以下两页，了解如何使用路由功能：

[http://codeigniter.com/user_guide/general/urls.html](http://codeigniter.com/user_guide/general/urls.html) [http://codeigniter.com/user_guide/general/routing.html](http://codeigniter.com/user_guide/general/routing.html)

参数在 URL 结构中的位置暗示了“参数”的概念。例如：

> `/gallery?var=photos`

会成为

> `/gallery/photos`

In this example each of these is called "segments" of the URL. `gallery` is segment #1 and `photos` is segment #2\. The pattern always follows that segment #1 is the controller and segment #2 is the method. For your URL it would be: `gallery` is the controller, and `photos` is the method.

If you want to pass any parameters you would append them on as additional segments to the URL like so:

> `/gallery/photos/param1/param2`

This would accomplish the cleaner look you're trying to accomplish.

* * *

*Update* I didn't mention in the answer that this replaces the .htaccess rewrites you're trying to do. You'd keep these lines of the .htaccess:

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

# javascript - 如何使用 jQuery 从 textarea 中转义特殊字符？

> ID：12409314
> 
> 赞同：3
> 
> 时间：2012-09-13T15:05:26.587
> 
> 标签：javascript, jquery, html, jquery-plugins

我想知道是否有任何 jquery 组件可以自动处理特殊字符。这基本上意味着转换`&`为[此处](http://www.degraeve.com/reference/specialcharacters.php)`&amp`列出的所有内容，以便当我将数据发送到后端时，它以该格式存储。然后在检索时我们需要将它从转换回.`&amp``&`

我们将使用大量的数学符号，因此我们需要 JavaScript 中的功能来做到这一点。我也见过一个富文本编辑器，但我们不需要它的很多功能，如图像、段落等，尽管我们希望文本编辑器有一些图标或其他东西来插入数学符号和源​​代码。简而言之，我看起来像 Stackoverflow 编辑器，没有图像。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T15:14:23.877

您可以使用 jQuery 为您执行此操作：

```
function htmlEncode(value){
    if (value) {
        return jQuery('<div />').text(value).html();
    } else {
        return '';
    }
}

function htmlDecode(value) {
    if (value) {
        return $('<div />').html(value).text();
    } else {
        return '';
    }
}

$(document).ready(function() {
    alert( htmlEncode ("this is a & test") );
}); 
```

代码最初来自[http://www.naveen.com.au/javascript/jquery/encode-or-decode-html-entities-with-jquery/289](http://www.naveen.com.au/javascript/jquery/encode-or-decode-html-entities-with-jquery/289)。​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:14:27.927

你没有说你是如何提交东西的，但很可能`encodeURIComponent`会成为你的朋友。

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)

我发布时链接已关闭，但 Mozilla 应该很快就会启动并运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-19T15:16:24.603

该功能`encodeURIComponent($('#textarea').val())`将解决您的问题。

# regex - django - 如何访问 url 中的用户名

> ID：12409315
> 
> 赞同：-1
> 
> 时间：2012-09-13T15:05:29.460
> 
> 标签：regex, django, django-urls

我有博客系统，每个用户都有自己的主页；

127.0.0.1/用户名

每个用户的登录屏幕位于：**127.0.0.1/username/panel**

这里又是他们的管理面板：**127.0.0.1/username/admin**

在登录页面中；当我提交时；它必须将用户重定向到管理面板。

但我需要访问目前在 url 中的用户名。我想我应该使用正则表达式。但如何？我对正则表达式不好。

这是我的 urls.py：

```
urlpatterns = patterns('blog.views',
    url(r'^blog/(?P<username>[-\w]+)/$',view='index', name='index'),
    url(r'^blog/(?P<username>[-\w]+)/post/(?P<postslug>[-\w]+)',view='singlePost', name='view_blog_post'),
    url(r'^blog/(?P<username>[-\w]+)/panel/$', view='loguserin'),
    url(r'^blog/(?P<username>[-\w]+)/admin/$', view='adminView', name='admin'),
    url(r'^blog/(?P<username>[-\w]+)/admin/loggedout/$', view='logout', name='logout'),
    url(r'^blog/(?P<username>[-\w]+)/admin/addpost/$', view='addpost',name='addpost'),
    url(r'^blog/(?P<username>[-\w]+)/admin/editpost/(?P<post_id>\d+)', view='editPost', name='editpost'),
    url(r'^blog/(?P<username>[-\w]+)/admin/delete/(?P<post_id>\d+)', view='delete_post', name='deletePost'),

) 
```

这是我的views.py [登录部分]：

```
def loguserin(request,username):
    if request.method=='POST':
        uname = request.POST['username']
        password = request.POST['password']
        user = authenticate(username=uname, password=password)
        form = LoginForm(request.POST)
        if form.is_valid():
            if user is not None:
                request.session['loggedin']="djangoo"
                login(request, user)
                return HttpResponseRedirect('/admin/') #--> ????
    else:
        form = LoginForm()

    return render_to_response('login.html',{'form':form,},context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T15:12:56.803

实际上，您已经有了用户名：

```
from django.core.urlresolvers import reverse
return HttpResponseRedirect(reverse('admin', args=[uname])) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T15:16:16.573

你需要的是[反向](https://docs.djangoproject.com/en/dev/topics/http/urls/#reverse)参数：

```
from django.core.urlresolvers import reverse

def loguserin(request,username):
    if request.method=='POST':
        uname = request.POST['username']
        password = request.POST['password']
        user = authenticate(username=uname, password=password)
        form = LoginForm(request.POST)
        if form.is_valid():
            if user is not None:
                request.session['loggedin']="djangoo"
                login(request, user)
                return HttpResponseRedirect(reverse('admin', args=[uname])) #--> ????
    else:
        form = LoginForm()

    return render_to_response('login.html',{'form':form,},context_instance=RequestContext(request)) 
```

# google-apps-script - 有什么方法可以获取 Web 应用程序的当前用户列表？

> ID：12409322
> 
> 赞同：0
> 
> 时间：2012-09-13T15:06:02.417
> 
> 标签：google-apps-script

我已将脚本部署为 Web 应用程序（在域上），并且我希望获得当前正在使用该脚本的用户列表。我的脚本可能需要运行几天（使用触发器）。我想发布一个新版本并通知当前用户以便再次授权脚本。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T17:21:36.737

假设您已将应用程序部署为以登录用户身份运行，每次有人访问脚本时，您都可以首次获取用户的电子邮件地址并将其存储在电子表格中。您还可以存储用户电子邮件已被记录的标志，并在用户每次登录时检查该标志

```
var db = ScriptDb.getMyDb();
var res = db.query{'firstTime'};
if (!res.hasNext()) { 
   var email = Session.getActiveUser().getEmail(); 
   /*Write this email to your spreadsheet */ 
} 
```

# tomcat - 如何以调试模式启动 Tomcat 并打印到控制台？

> ID：12409324
> 
> 赞同：2
> 
> 时间：2012-09-13T15:06:07.930
> 
> 标签：tomcat

通常我只用这个命令启动tomcat：

```
./catalina.sh run 
```

如果我需要调试我使用的代码：

```
./catalina.sh jpda start 
```

到目前为止，这工作正常。但是，如果我使用第二个命令，则日志不会显示在控制台中。我想在调试模式下运行 tomcat 并在控制台中查看日志文件。目前，我总是需要在需要时在这两种模式之间进行切换。

这个问题似乎很简单，但我没有设法在 stackoverflow 或谷歌上找到合适的东西：-/

谢谢你的帮助！:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T15:14:05.390

您应该能够使用以下内容查看日志：

```
tail -f /var/log/tomcat6/catalina.out 
```

（您的系统路径可能会有所不同。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-03T08:26:54.170

> ./catalina jpda 运行

这也可能有效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-30T04:42:53.987

tomcat里面也有log目录。你可以使用tail它。

> 尾 -f /opt/apache-tomcat-7.0.47/logs/catalina.out

# javascript - 使用 jQuery 从动态添加的输入字段上传文件

> ID：12409325
> 
> 赞同：0
> 
> 时间：2012-09-13T15:06:08.537
> 
> 标签：javascript, jquery, jquery-plugins, file-upload

我正在使用[这个](https://github.com/blueimp/jQuery-File-Upload/wiki/Options)jQuery api 来处理带有状态栏的文件上传。我有以下（工作）代码：

```
$(".imageinput")
    .live("fileuploadadd", function(e, data) {
        data.dataType = "json";
    })
    .live("fileuploadsend", function(e, data) {
        data.dataType = "json";
        debugger;
        $(
            '<div id="paragraph"' + createNewParagraphID() + '" class="new paragraph image">' +
                '<div class="progressbar"></div>' +
            '</div>' +
            controlDiv + createNewParagraph()
        ).insertAfter($(this).parent());
    })
    .live("fileuploadprogressall", function(e, data) {
        data.dataType = "json";
        var bar = $(this).parent().next().children().css("width", parseInt(100 * data.loaded / data.total, 10) + "%");
    })
    .live("fileuploaddone", function(e, data) {
        data.dataType = "json";
        $.each(data.result, function(index, file) {
            console.log("done");
        });
    }); 
```

我需要使用下面的代码从服务器获取有关上传状态的响应。由于可以动态添加元素，因此我需要使用 live 方法。

```
$(".imageinput").fileupload({
    dataType: "json"
}); 
```

如何使用动态添加的元素在此 api 中设置数据类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:17:48.287

我自己找到了答案：

```
$(".imageinput").live("hover", function(e) {
    $(".imageinput").fileupload({
        dataType: "json",
        start: function(e) {
            $(
                '<div id="paragraph"' + createNewParagraphID() + '" class="new paragraph image">' +
                    '<div class="progressbar"></div>' +
                '</div>' +
                controlDiv + createNewParagraph()
            ).insertAfter($(this).parent());
        },
        progressall: function(e, data) {
            var bar = $(this).parent().next().children().css("width", parseInt(100 * data.loaded / data.total, 10) + "%");
        },
        done: function(e, data) {
            $.each(data.result, function(index, file) {
                console.log("done");
            })
        }
    })
}); 
```

# python - Python 类设计：属性

> ID：12409332
> 
> 赞同：1
> 
> 时间：2012-09-13T15:06:18.407
> 
> 标签：python, class

我构建了一个类：

```
class Foo (object):
      def __init__(self,List):
          self.List=List
      @property
      def numbers(self):
          L=[]
          for i in self.List:
              if i.isdigit():
                 L.append(i)
          return L
      @property
      def letters(self):
          L=[]
          for i in self.List:
              if i.isalpha():
                 L.append(i)
          return L

>>> inst=Foo(['12','ae','45','bb'])
>>> inst.letters
['ae', 'bb']
>>> inst.numbers
['12', '45'] 
```

我怎样才能添加属性，所以我可以这样做`inst.numbers.odd`会返回`['45']`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T15:12:27.287

您的`numbers`属性返回一个列表，因此 a`numbers.odd`不起作用。

但是，您可以遵循如下工作流程：

*   定义一个小类`Numbers`，它将定义两个属性`even`，`odd` 例如，`Numbers`可以将列表作为其参数`__init__`，该`even`属性将仅返回此列表的偶数`[i for i in List if int(i)%2 == 0]`（和`odd`奇数）...

*   `Numbers`在你的`Foo.numbers`属性中创建一个实例（使用你`Foo.List`来初始化它）并返回这个实例......

如建议的那样，您的`Numbers`类可以直接子类化内置类。`list`你也可以像这样定义它

```
class Numbers(object):
    def __init__(self,L):
        self.L = L
    @property
    def even(self):
        return [i for i in self.L if not int(i)%2]
    def __repr__(self):
        return repr(self.L) 
```

在这里，我们返回 的表示`Numbers`作为其`L`属性的表示（一个列表）。在您想将某些东西附加到`Numbers`实例之前，这很好，花花公子，例如：您必须定义一个`Numb.append`方法......坚持制作`Numbers`列表的子类可能更容易：

```
 class Numbers(list):
    @property
    def even(self):
        ... 
```

*`//`已编辑：通过 a更正了`%`，因为我走得太快而且不够小心*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T15:17:36.570

这是一个愚蠢的例子：

```
class mylst(list):
    @property
    def odd(self):
        return [ i for i in self if int(i)%2 == 1 ]

class Foo(object):
    def __init__(self,lst):
        self.lst = list(lst)

    @property
    def numbers(self):
        return mylst( i for i in self.lst if i.isdigit() )

a = Foo(["1","2","3","ab","cd"])
print(a.numbers)
print(a.numbers.odd) 
```

基本上，我们只是子类化`list`并添加一个`odd`返回另一个列表的属性。由于我们的结构是列表的子类，它与真实的东西几乎没有区别（万岁鸭打字！）。 如果您希望能够再次过滤它，`mylst.odd`甚至可以返回一个新实例（例如）`mylst``a.numbers.odd.in_fibinocci`

# r - R识别数据框列中的文本字符串

> ID：12409334
> 
> 赞同：9
> 
> 时间：2012-09-13T15:06:23.030
> 
> 标签：r

我的数据框的一列包含单词和短语。我正在尝试为此列中的那些字段创建一个虚拟变量，这些字段在其中的任何位置都有特定的文本字符串。

例如：

*   风筝
*   汽车
*   箱式风筝
*   模型车
*   我喜欢放飞的风筝
*   世界汽车

    ```
     myvector<-c("kite","cars","box kites","model cars","i like kites that fly",
     "cars of the world") 
    ```

我想用字符串“kite”识别所有字段

我已经尝试了一些东西，例如`any()`，但到目前为止没有任何效果。`which()``%in%`

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-13T15:11:10.877

您没有提供任何可重现的示例。但你的答案将是 grepl。

```
grepl("kite", df$words) 
```

如果单词在行中，它将返回一个逻辑向量。

如果要匹配多个单词，请使用逻辑或`|`字符串内部进行匹配

```
grepl("kite|cars|box kites", df$words) 
```

# android - AndroidPlot：如何在 AppWidget 中呈现图表？

> ID：12409346
> 
> 赞同：3
> 
> 时间：2012-09-13T15:07:00.777
> 
> 标签：android, charts, android-appwidget, androidplot

我正在尝试使用 AndroidPlot 在主屏幕小部件中绘制图表。我知道在普通应用程序中，它使用自定义视图，并且根据我所见（[Android：AppWidget with custom view not working](https://stackoverflow.com/questions/4062559/android-appwidget-with-custom-view-not-working)），解决方法是将其渲染为`imageView`.

现在我已经获取了 AndroidPlot 的快速入门代码并将其放入提供程序类中，但是当我将其放在主屏幕上时它似乎没有呈现任何内容。

此代码与原始快速入门代码的区别在于，在快速入门中，它利用了 ，`Activity.findViewById`但显然不能在此处使用。

任何人都可以在这里看到我做错了可能导致空渲染的事情吗？感谢您提供的任何帮助！

```
private Bitmap getChartImage(Context context)
{

    // initialize our XYPlot reference:
    mySimpleXYPlot = new XYPlot(context, "My Simple XYPlot");

    mySimpleXYPlot.setDrawingCacheEnabled(true);

    // add a new series
    mySimpleXYPlot.addSeries(new SimpleXYSeries(), LineAndPointRenderer.class, new LineAndPointFormatter(Color.rgb(0, 200, 0), Color.rgb(200, 0, 0)));

    // reduce the number of range labels
    mySimpleXYPlot.getGraphWidget().setRangeTicksPerLabel(4);

    // reposition the domain label to look a little cleaner:
    Widget domainLabelWidget = mySimpleXYPlot.getDomainLabelWidget();

    mySimpleXYPlot.position(domainLabelWidget,                     // the widget to position
                            45,                                    // x position value, in this case 45 pixels
                            XLayoutStyle.ABSOLUTE_FROM_LEFT,       // how the x position value is applied, in this case from the left
                            0,                                     // y position value
                            YLayoutStyle.ABSOLUTE_FROM_BOTTOM,     // how the y position is applied, in this case from the bottom
                            AnchorPosition.LEFT_BOTTOM);           // point to use as the origin of the widget being positioned

    // get rid of the visual aids for positioning:
    mySimpleXYPlot.disableAllMarkup();

    //mySimpleXYPlot.measure(150, 150);
    //mySimpleXYPlot.layout(0, 0, 150, 150);

    Bitmap bmp = mySimpleXYPlot.getDrawingCache();

    return bmp;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-16T16:33:58.367

你有没有通过查看位图是否真的是空的？我的猜测是位图很好，问题存在于这段代码之外。看一下这个[使用 AndroidPlot 的小部件的示例用法](https://bitbucket.org/androidplot/androidplot/src/14316d1bf3032ffaa0d00d299649cf911a31f499/Examples/DemoApp/src/com/androidplot/demos/widget/DemoAppWidgetProvider.java?at=master)- 它非常小而且绝对有效。希望那里有适合您的解决方案:)

缺口

# javascript - 从函数中获取变量

> ID：12409350
> 
> 赞同：0
> 
> 时间：2012-09-13T15:07:11.640
> 
> 标签：javascript

有没有办法让我在不更改 javascript 且不运行函数的情况下从此函数获取文件 url？

```
 jwplayer('jsCmgPlayer').setup({
    flashplayer: 'http://website.com/player.swf',
    file: 'http://website.com/0015980.mp3',
    autostart: true,
 'skin': 'http://www.website.com/skin.xml',
 'controlbar': 'bottom',
    height: 28,
    width: 620
  }); 
```

我想`http://website.com/0015980.mp3`作为一个单独的变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:15:43.893

这是不可能的。如果您不运行该函数，则无法通过插件 API 访问该属性，因为它从未设置过，也无法从 JavaScript 代码的外部范围访问它。参数散列在此函数之外不可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:13:49.503

不可以。如果该函数没有运行，则无法访问包含该 url 的对象。您只能尝试将函数的源代码作为字符串获取，然后在其中挖掘，例如使用正则表达式来匹配该对象文字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T15:22:13.773

您提供的 javascript 已经在运行该功能。由于*您*正在调用设置代码并提供参数，因此*您*可以这样做：

```
// create the arguments object
var setupArgs = {
    flashplayer: 'http://website.com/player.swf',
    file: 'http://website.com/0015980.mp3',
    autostart: true,
    'skin': 'http://www.website.com/skin.xml',
    'controlbar': 'bottom',
    height: 28,
    width: 620
}

// setup the plugin
jwplayer('jsCmgPlayer').setup(setupArgs); 
```

现在您可以随意使用参数来访问该 url：

```
// use the arguments object for other things
setupArgs.file; 
```

# jquery - 为元素设置浏览器 cookie

> ID：12409353
> 
> 赞同：0
> 
> 时间：2012-09-13T15:07:20.580
> 
> 标签：jquery, cookies, session-cookies, jquery-cookie

我将如何创建一个 cookie 来存储一个浏览器会话或一天的随机添加的 body 类。我的意图是随机给每个用户一个身体背景图像，然后存储该图像，这样它就不会改变每次页面重新加载或当他们转到第 2 页时。

我正在使用这个 jQuery 插件：[https ://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

我的 jQuery 代码：

```
var classes = ['body-bg1', '', 'body-bg2', 'body-bg3', 'body-bg4',];
 var randomnumber = Math.floor(Math.random()*classes.length);     
 $('body').addClass(classes[randomnumber]); 
```

编辑：

我使用的代码：

```
if($.cookie('userBackground') === null) {
    var classes = ['body-bg1','body-bg2', 'body-bg3', 'body-bg4'];
    var randomnumber = Math.floor(Math.random()*classes.length);
    var chosenClass = classes[randomnumber];
    $('body').addClass(chosenClass );
    $.cookie('userBackground', chosenClass, { expires: 7, path: '/' });
} else {
   //todo verify cookie value is valid
   $('body').addClass($.cookie('userBackground'));
} 
```

我得到的错误：

```
Uncaught ReferenceError: require is not defined
Uncaught TypeError: Object function (a,b){return new e.fn.init(a,b,h)} has no method 'cookie' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:09:56.977

```
if($.cookie('userBackground') === null) {
    var classes = ['body-bg1','body-bg2', 'body-bg3', 'body-bg4'];
    var randomnumber = Math.floor(Math.random()*classes.length);
    var chosenClass = classes[randomnumber];
    $('body').addClass(chosenClass );
    $.cookie('userBackground', chosenClass, { expires: 7, path: '/' });
} else {
   //todo verify cookie value is valid
   $('body').addClass($.cookie('userBackground'));
} 
```

# reporting-services - SSRS。根据行组值隐藏列

> ID：12409355
> 
> 赞同：3
> 
> 时间：2012-09-13T15:07:26.263
> 
> 标签：reporting-services, expression, visibility

我的应用程序使用 SSRS 为员工生成工资单。工资单报告由一个包含 5 列的 tablix 组成。在这 5 个中，有一列称为“**单位**”，另一列称为“**发票值**”。

该报告有几个 Row Grouping 级别，但对于这个问题唯一重要的是 Payslip Number Row Grouping "RG_SlipNum"。每个“RG_SlipNum”RowGroup 之后都有一个分页符。

当用户想要打印工资单时，他们可以选择提供多达 5 个参数来过滤要打印的结果集。

员工可以根据交付的单位数量 * 费率（基于单位）或交付的发票价值的百分比（基于发票）获得报酬（过于简单，但希望你明白我的意思）。

**如果员工是基于单位的，我希望显示单位列，并隐藏“发票价值”列。如果它们是基于发票的，我希望两列都显示。**

我的数据集有一个位字段，指示是否根据上述逻辑显示或隐藏列。对于当前 rowGroup 中的每个基础行，它将是 1 或 0。我尝试在“发票值”列的列可见性表达式中使用 First(,) 函数。但是，每当我尝试使用 RowGroup 名称将 First Function 的范围限制为当前 Payslip Rowgroup 时，都会出现以下错误。

*“tablix 'X' 的隐藏表达式具有对聚合函数无效的范围参数。范围参数必须设置为字符串常量，该常量等于包含组的名称、包含组的名称数据区域，或数据集的名称。"*

所以，我的问题

**您可以在 First() 函数中将 RowGroup 名称定义为 Scope 参数**吗？

如果不是，**那么在不完全重新工作我的数据集/RDL 来实现这一目标的情况下，实现这一目标的最佳方法是什么。**（使用 SSRS2008）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:26:54.797

为什么总是在发布论坛问题后，您才弄清楚（或一些解决方法）？

如果有人看到这个，我仍然想要一些（更好的）答案，但是我已经在 tablix 中设置了一个单元格来确定是否显示该列的位字段的值。然后我更改了列可见性表达式以检查单元格值（使用 ReportItems!textboxname.Value）并且它正在工作。当我滚动工资单时，列的可见性会相应变化。

# ruby-on-rails - 使用 MiniTest 提取领域对象

> ID：12409362
> 
> 赞同：0
> 
> 时间：2012-09-13T15:07:49.477
> 
> 标签：ruby-on-rails, rspec, testunit, minitest

我有两个问题。第一个是基本的。MiniTest 是 UnitTest 的直接替代品。所以如果你在 rails 中使用生成器，你会得到一堆 ActiveSupport::TestCase 类。如果您使用 minitest（没有 minitest-spec-rails），那么您可以这样做

```
1.must_equal 1
# instead of 
assert_equal 1, 1 
```

正确的？所以我很困惑为什么有一个 MiniTest::Unit::TestCase 类，如 railscast #327 （pro episode paywall sry）中所述。查看我实际使用的测试套件时会感到困惑。如果 minitest 是一个替代品，那么我正在使用 minitest 来执行 testunit 风格的 rails 测试。如果我把它拿出来，我正在使用 testunit 来运行 testunit 测试？

所以假设我正在使用 MiniTest 来运行 TestUnit 风格的测试。

```
require 'test_helper'
class FooTest < ActiveSupport::TestCase
end 
```

在观看了 destroyallsoftware 关于提取域对象的截屏视频后，我受到了启发。他提出了一些关于避免加载 test_helper.rb 以加速测试套件而不使用 spork 诡计​​的好点（这正是我所做的）。但是，当我从上面给我 ActiveSupport::TestCase 时，我怎样才能避免加载 test_helper.rb 呢？

你不能用 MiniTest 或 TestUnit 提取域对象并将它们放入 lib/ 或 extras/ 中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T16:49:49.773

您的第一个问题的答案是“不，不正确”。Minitest 不是 Test::Unit 的“替代品”。Minitest 为大多数 Test::Unit 提供了一个更简单的实现，但不是全部。在 Ruby 1.9 中，Test::Unit 库建立在 Minitest 的 TestCase 类之上，并填补了两个库之间的空白。

Minitest 提供了两种编写测试的模式：经典的 TestCase 方法和单独的 Spec DSL。与 Test::Unit 一样，Spec DSL 建立在 Minitest 的 TestCase 之上。因此，虽然 1.9 的 Test::Unit 和 Minitest 的 Spec DSL 都是基于 Minitest 的 TestCase 构建的，但您不能在 Test::Unit 中使用 Spec DSL，因为它不是其祖先的一部分。

第二个问题的答案是，如果你想使用 ActiveSupport::TestCase，你不能避免 test_helper.rb。您将需要 minitest/autorun 并让您的测试类继承自 MiniTest::Unit::TestCase。

# sql - SQL - 月平均值而不是日平均值

> ID：12409373
> 
> 赞同：6
> 
> 时间：2012-09-13T15:08:13.140
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个名为 values 的表，其中包含 3 列 - 位置、值、日期

我想算出每个月的平均值

到目前为止我有

```
SELECT Location, Avg(value), date  
FROM Value  
GROUP BY Location, date 
```

这将返回平均值，但每天输入一个值，所以我有一个每天而不是每月的平均值，我怎样才能达到每月平均值？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-13T15:10:12.397

试试这个：

```
SELECT    Location,
          Avg(value),
          month(date),
          year(date)
FROM      Value
GROUP BY  Location,
          month(date),
          year(date) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-13T15:10:11.083

如果您想要仅月份分组，您可以使用以下内容：

```
SELECT Location, Avg(value) AvgVal, Month(date) Mnth
FROM Value
GROUP BY Location, Month(date) 
```

您甚至可以使用`GROUPING SETS`，它将`GROUP BY`月份、年份、位置，然后为您提供所有总数：

```
SELECT Location, 
  Avg(value) AvgVal, 
  Month(dt) Mnth,
  Year(dt) Yr
FROM yourtable
GROUP BY 
  GROUPING SETS((Month(dt), Year(dt), Location), (Location)); 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/d75e8/10)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-13T15:10:08.303

```
SELECT
     Location,
     year(date),
     month(date),
     Avg(value)
FROM
     Value
GROUP BY
     Location,
     year(date),
     month(date) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-15T03:10:08.883

如果您想将日期合并到一个列中，并以当月的第一天为日期，也可以按以下方式进行操作。

```
SELECT    Location,
          Avg(value),
          DateFromParts(Year(date), Month(date) , 1) AS FirstOfMonthDate
FROM      Value
GROUP BY  Location,
          DateFromParts(Year(date), Month(date) , 1) 
```

# javascript - 使用来自本地主机的 javascript 的 html 刮板

> ID：12409376
> 
> 赞同：0
> 
> 时间：2012-09-13T15:08:21.630
> 
> 标签：javascript, html

我正在使用 html、css 和 js 在我的本地主机中开发一个移动应用程序。我想带以下页面的表 [http://www.sleague.com/competitions/s-league/table](http://www.sleague.com/competitions/s-league/table)

我想按原样带来该页面的表格（点表）。我使用了在 sof 中找到但没有 html 数据的代码。代码如下

```
function stripScripts(s) {
    var div = document.createElement('div');
    div.innerHTML = s;
    var scripts = div.getElementsByTagName('script');
    var i = scripts.length;
    while (i--) {
        scripts[i].parentNode.removeChild(scripts[i]);
    }
    return div.innerHTML;
}
function loadTest () {
    alert("Inserted");
    $.get('http://www.sleague.com/competitions/s-league/table', function (data) {
        alert(stripScripts(data));        
    });
    alert("Done");
} 
```

代码正在运行，但是当我在本地主机时，我需要从页面获取的 html 没有出现。该怎么办？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:12:18.317

您可以在 jQuery 中启用[全局 AJAX 错误处理程序以查看错误消息。](http://api.jquery.com/ajaxError/)

简而言之，您只能从同一个域（[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)）加载文档。

# facebook - FQL 搜索公开帖子

> ID：12409377
> 
> 赞同：1
> 
> 时间：2012-09-13T15:08:28.753
> 
> 标签：facebook, facebook-graph-api, search, facebook-fql

我正在尝试使用 FQL 进行搜索。使用 Graph API，它可以工作，但使用 FQL 有更多选项。使用类似的东西

```
https://graph.facebook.com/search?q=myquery&access_token=mytoken 
```

它工作正常。

我正在寻找 FQL 中的等价物。

我必须在这里写什么查询

```
https://api.facebook.com/method/fql.query?query=SELECT%20post_id%2C%20actor_id%2C%20target_id%2C%20message%20FROM%20stream&access_token=mytoken 
```

上面的查询给了我

```
Parser error: unexpected end of query 
```

我想在所有公开帖子中搜索。我一直在到处寻找，但没有找到任何解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T15:39:54.697

要在公共帖子中搜索字符串，您需要使用 Graph API，然后在脚本中过滤这些帖子。我认为在 FQL 中搜索所有公共帖子是不可能的。虽然 FQL 更强大，但也更受限制。

您收到错误是因为您的查询中没有“WHERE”子句。这在 FQL 中是必需的。

出现限制是因为您必须在 WHERE 查询中至少使用一个索引列。对于流表，您必须指定帖子 via `post_id`、用户 via`source_id`或`filter_key`或直播流 via `xid`。`*`索引字段在文档站点上用 a 标记。

例如，[此 FQL][1]

```
SELECT post_id,actor_id,target_id,message FROM stream WHERE filter_key = 'others' 
   AND strpos(message, 'the') >= 0 
```

将为您获取所有显示在您的访问令牌所有者墙上但所有者尚未发布的帖子，其中包含字符串“the”。这是你能得到的最好的。如果帖子在他们的墙上不可见，那么您将不会收到该帖子。

如果您尝试省略索引字段，FQL 将抛出“您的语句不可索引”错误。

[1]: SELECT post_id,actor_id,target_id,message FROM stream WHERE filter_key = 'others' and strpos(message,'the') >=0

# php - CakePhp2：如何在 foo:bar/foo2:bar2/... 之类的 url 中获取变量？

> ID：12409381
> 
> 赞同：-1
> 
> 时间：2012-09-13T15:08:34.817
> 
> 标签：php, cakephp, cakephp-2.0, urlvariables

我正在使用 CakePhp2 并尝试从 url 获取变量的值。

我的网址看起来像`controller/action/foo:bar/foo2:bar2/foo3:bar3`？

当我使用`$this->request['foo']`CakePhp 时说“*未定义的索引*”。

找到 foo、foo2 和 foo3 的值的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T15:12:21.890

检查命名参数的文档。它很可能在

```
$this->request->params['named'] 
```

甚至更容易/更清洁 2.x：

```
$this->request->named 
```

所以 debug($this->request->named) 了解详情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:21:44.027

尝试

```
$this->passedArgs
OR
$this->request->params['pass'] 
```

您想访问传递的参数。

# rss - iTunes Store RSS 应用程序提要并不总是返回请求的结果数

> ID：12409385
> 
> 赞同：0
> 
> 时间：2012-09-13T15:08:42.003
> 
> 标签：rss, itunes

我一直在使用 iTunes Store RSS 提要，我注意到在某些情况下，返回的应用程序数量与我请求的结果数量不匹配。例如，以下是新西兰排名前 300 名的免费天气 iPad 应用程序的提要：

[http://itunes.apple.com/nz/rss/topfreeipadapplications/limit=300/genre=6001/json](http://itunes.apple.com/nz/rss/topfreeipadapplications/limit=300/genre=6001/json)

我只看到这里返回了 251 个应用程序。我的预感是，提要只返回此列表中可在美国销售的应用程序，因为这是我所在的地方，但我还没有看到任何关于此的文档。有谁知道事实是否如此？

注意：我知道“新应用程序”、“新免费应用程序”和“新付费应用程序”的 RSS 提要完全忽略了限制参数的问题，但这种行为虽然令人失望，但至少记录在这里：[http://www.apple.com/itunes/affiliates/resources/blog/introduction---rss-feed-generator.html](http://www.apple.com/itunes/affiliates/resources/blog/introduction---rss-feed-generator.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T14:30:45.407

再次重新审视这个问题，我意识到我在之前的评论中在 user1347544 的答案下所写的内容是不正确的。我选择了免费天气 iPad 应用程序，而不是“顶级”免费天气 iPad 应用程序。所以这让我觉得'Top'的含义与我最初的想法不同。我在 iTunes App Store 中尝试了一个新的搜索：Top Paid iPad Catalog Apps，我的国家设置为 NZ。这次列表显示 43，与 RSS 提要显示的相同。但是，搜索在新西兰出售的付费 iPad 目录应用程序会返回 317 个结果。我一直在想，因为总共有 317 个结果，所以当我要求列出“前 300 名”时，我应该得到 300 个，因为该类别中至少有 300 个结果。但是，对于成为“热门”列表的一部分的应用来说，它必须满足下载次数的特定标准。当我第一次开始使用这些提要时，这对我来说并不明显，尽管在我写这个答案时，“顶级”列表以这种方式工作绝对是有道理的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-13T22:01:21.397

您要求的结果太多。请记住，您在这里要求的是一个非常具体的结果子集：
1\. 只有天气应用程序
2\. 新西兰可用的应用程序
3\. 免费的
应用程序 4\. 仅在 iPad 或通用上可用的应用程序

当您切换到一个不太具体的子集时，您将看到返回 300 个结果：

1.  新西兰顶级免费天气应用程序 [http://itunes.apple.com/nz/rss/topfreeapplications/limit=300/genre=6001/json](http://itunes.apple.com/nz/rss/topfreeapplications/limit=300/genre=6001/json)

2.  新西兰顶级免费娱乐 iPad 应用程序（娱乐是一种更流行的类型）：http: [//itunes.apple.com/nz/rss/topfreeipadapplications/limit=300/genre=6016/xml](http://itunes.apple.com/nz/rss/topfreeipadapplications/limit=300/genre=6016/xml)

3.  新西兰顶级免费 iPad 应用程序 [http://itunes.apple.com/nz/rss/topipadapplications/limit=300/genre=6001/json](http://itunes.apple.com/nz/rss/topipadapplications/limit=300/genre=6001/json)

# cognos - 为什么我们需要 Cognos promptmany 中的可选参数 queryItem

> ID：12409389
> 
> 赞同：2
> 
> 时间：2012-09-13T15:08:51.963
> 
> 标签：cognos

在此页面中：http: [//publib.boulder.ibm.com/infocenter/c8bi/v8r4m0/index.jsp](http://publib.boulder.ibm.com/infocenter/c8bi/v8r4m0/index.jsp?topic=/com.ibm.swg.im.cognos.ug_fm.8.4.0.doc/ug_fm_id9744using_macro.html) ?topic=/com.ibm.swg.im.cognos.ug_fm.8.4.0.doc/ug_fm_id9744using_macro.html 我们有：

```
QueryItem
This parameter is optional. The prompt engine can take advantage of the Prompt Info properties of the query item. Descriptive information can be shown, although the prompt value is a code. 
```

我无法理解这部分：

```
The prompt engine can take advantage of the Prompt Info properties of the query item. Descriptive information can be shown, although the prompt value is a code. 
```

promptmany 语法最终会生成一个 where 子句。那么它如何使用查询项的属性呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T02:31:02.940

前端的提示生成使用这个参数，而不是查询引擎。此参数与 where 子句没有区别。它基本上是提示引擎在尝试自动构建提示时告诉前端的提示。

我在使用提示宏时从不填写此参数。

# java - 用最少的迭代次数找到平均值

> ID：12409390
> 
> 赞同：2
> 
> 时间：2012-09-13T15:08:57.680
> 
> 标签：java, algorithm, math, statistics, performance

我有一个具有以下属性的测量列表：

1.  测量是昂贵的。更少的测量 -> 更好
2.  他们都是积极的。事实上，有一个正的下限，我无法得到任何低于该值的值。这个下限是我需要有信心知道的。
3.  它们将分布在一个或多个中值附近
4.  我知道当我发现一个离群值小于时，还有另一个“更好”的中位数，`median - 2*variance`因为“最佳”中位数和下限之间的距离总是小于正态分布宽度的两倍

目标：找到具有最少迭代次数的最佳中位数，置信度为 90%。

我更喜欢最小值，但最小的中位数就足够了。

我正在寻找的是一段代码，我在其中提供测量值，它告诉我中位数以及这个中位数是我寻找的那个的信心。

背景：我想计时Java方法。我可以运行几分钟的测试来平均异常值，但是在查看数据时，对于人类来说，很明显这些值会迅速累积在中值附近。

除非 JIT 启动并且中位数突然跳跃。最终，您将得到一条在最小中位数左侧非常陡峭的曲线（即，中位数左侧的方差很低）和右侧的长而柔和的斜坡，其中 pre-JIT 有一个凸起中位数是。

[样本测试数据 (13KB)](http://www.pdark.de/7ac2ce265a6a19ff53cb8591536ce8c2eae8ea74/performance.zip)

`testConnect-count.csv`是值的直方图，`testConnect-history.csv`是测量序列。目标是找到一种算法，该算法`115000`通过从`testConnect-history.csv`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T20:16:26.930

我相信实际的问题是：给我一个子程序在经过 JIT 优化后的平均执行情况。

该过程不是静止的。JIT 启动的时间取决于实际的虚拟机实现和被测程序。我相信您不会找到通用的魔术子弹方法。

你必须试验。我会尝试丢弃固定数量的测量值，进行固定数量的测量，丢弃异常值，取其余值的平均值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T15:53:22.820

我认为查看延迟百分位数的常见做法是，因为它们不遵循正态分布，而且延迟时间较长会伤害您。

在您的情况下，您可以使用第 50 个百分位和第 90 个百分位。

如果你有一个排序的集合，这些很容易计算

```
List<Long> times = ....
Collections.sort(times);
long median = times.get(times.size()/2);
long ninetyth = times.get(times.size()*9/10); 
```

我使用 trove，因为这对于时间敏感的测试更有效。它使用原始值而不是创建对象。

```
TLongArrayList times = 
times.sort();
long median = times.get(times.size()/2);
long ninetyth = times.get(times.size()*9/10);
long ninetynineth = times.get(times.size()*99/100); 
```

在您的情况下，中位数是 116000，90% 的平铺是 170000。99% 的平铺是 255000

# iphone - Libssh2，用 xcode 构建库

> ID：12409403
> 
> 赞同：2
> 
> 时间：2012-09-13T15:09:50.410
> 
> 标签：iphone, xcode, build, ssh, libssh2

我正在使用[这个](https://github.com/x2on/libssh2-for-iOS/blob/master/README.md)项目来尝试将 libssh2 库与 iOS 一起使用。然而，[自述文件](https://github.com/x2on/libssh2-for-iOS/blob/master/README.md)并没有解释太多，我可以使用一些帮助来构建库。

我在 xcode 中打开了示例项目，但我对自述文件的这一部分感到困惑

```
 You can build the libssh2 library with openssl or with libgcrypt! 
```

项目中有几个脚本，我需要在 xcode 中将它们作为构建阶段运行吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:53:34.210

您可以使用终端运行 ./build-all.sh

# ios - iOS应用程序创建电子邮件...有没有办法在已发送的文件夹中没有它的副本

> ID：12409406
> 
> 赞同：1
> 
> 时间：2012-09-13T15:09:53.963
> 
> 标签：ios, email

我的应用程序创建了一封电子邮件，其中可能包含敏感数据（取决于用户的观点）。iphone 的电子邮件客户端有没有办法不在“已发送”文件夹中保存副本。

同样，如果用户选择他们可以通过文本发送它......有没有办法让它不在消息流中。

我认为没有，但如果可能的话，我很想确认这一点。我一直在搜寻，但似乎无法确定是否可能。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:38:00.853

我将把它分成两部分：

1.  不在已发送文件夹中放置已发送邮件的副本：

由于您无权访问用户的邮件，因此没有简单的方法可以做到这一点。您可以让用户输入他们的电子邮件服务的 IMAP 详细信息并编写您自己的邮件发送实现，然后从服务器删除发送的消息，但邮件客户端可能会保留本地副本，无论服务器上发生什么，如果他们在删除之前抓住消息。无论如何，这是一个非常糟糕的用户体验（让用户输入 IMAP 详细信息，而不是使用内置的邮件编辑器）并且很难编写（并且您需要非常小心地从用户的邮箱中删除某些内容，你必须问他们是否可以这样做）。

1.  未在“信息”应用对话流中显示短信：

实际上有一种方法可以做到这一点。短信可以通过特殊格式的电子邮件地址发送给用户，每个手机服务提供商都不同。例如，要向 Verizon 订阅者发送文本，它会是 5551239876@vtext.com。要使此解决方案起作用，您需要使用某种自动生成的电子邮件地址发送邮件，该地址是您从您创建的邮件服务器中检索的，然后您需要在设备上实现自己的 SMTP 邮件程序。当然，用户总是可以从他们的手机服务提供商处请求短信转录（有些人可以轻松地在线访问），而且没有办法解决这个问题。

这些信息有多敏感？电子邮件和短信不是很安全的协议。您可能需要考虑提供加密和身份验证机制的替代方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:34:58.110

不，如果您在 iOS 中使用内置邮件程序，这是不可能的。如果您想解决这个问题，您可以做的事情是制作一个客户邮件，将信息发送到服务器并通过代码发送邮件，但这需要更多的工作。

# javascript - 如何监视异步加载的模块

> ID：12409418
> 
> 赞同：2
> 
> 时间：2012-09-13T15:10:09.223
> 
> 标签：javascript, asynchronous, requirejs, jasmine

我处于以下情况。
代码 (3) 与代码 (1) 一起使用，但不适用于代码 (2)。
恕我直言，原因是情况（2）中的后端控制器模块是在代码（3）之后异步加载的。
我应该如何修复代码 (3) 以使其与代码 (2) 一起使用？

PS：
使用代码（2）的原因是因为它使页面加载更快。

* * *

(1)

```
define([
 '../../utils/backendController'    
], function (backendController) {

    events: { 
        'submit form': 'submitForm'
    },

    submitForm: function (event) {
        event.preventDefault();

        // in this way I can spy backendController object
        this.doSubmitForm(backendController);

        // in this way I can not spy backendController object
        // require(['../../utils/backendController', this.doSubmitForm); 
        // see the code (2)

    }
}); 
```

* * *

(2)

```
define([], function () {

    events: { 
        'submit form': 'submitForm'
    },

    submitForm: function (event) {
        event.preventDefault();

        // in this way I can not spy backendController object
        require(['../../utils/backendController', this.doSubmitForm);

    }
}); 
```

* * *

(3)

```
(function () {
    define([
        'backendController'
    ], function () {
        describe('when submitting a form', function () {
            beforeEach(function () {
                var mySpy = spyOn(backendController, 'myCall').andCallThrough();
                this.view.$el.find('form').submit();
            })
            it('backendController.myCall should be called', function () {
                expect(backendController.myCall.toHaveBeenCalled());
            });
        });
    });
}()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T17:31:05.703

我想你已经知道为什么 (1, 3) 有效，无论如何它确实有效，因为`backendController`模块是在 (3) 中的代码执行之前加载和定义的。

在情况 (2) 中，`backendController`仅在提交表单时才需要这样做。所以到时候

```
var mySpy = spyOn(backendController, 'myCall').andCallThrough(); 
```

间谍已创建，`backendController`是`undefined`;)

现在您*可以*但不应该通过执行类似的操作来调整您的代码 (2)

1.  创建一个`submitForm`解析为`doSubmitForm`或的延迟
2.  保留 (2) 并调整您的测试以适应要求`backendController`

但这太过分了。您应该按照（1）中推荐的要求方式进行操作，它还有一些其他优点，例如您可以使用`r.js`优化器。

# mysql - Grails 删除孤儿多对多关系

> ID：12409423
> 
> 赞同：1
> 
> 时间：2012-09-13T15:10:14.150
> 
> 标签：mysql, database, grails, grails-orm, grails-domain-class

一个简单的博客应用程序，Grails 1.3.9 和 MySQL，两个域类之间的多对多关系，BlogPost 和 Tag

```
class BlogPost {

    String title
    String teaser
    String body
    Date updated
    Category category
    Integer priority

    static hasMany = [comments:Comment,tags:Tag]

    static belongsTo = [Category,Tag]

    static searchable = true

    String toString() {
        "$title"
    }

    static constraints = {
        title(nullable:false,blank:false,lenght:1..50)
        teaser(nullable:false,blank:false,lenght:1..100)
        body(nullable:false,blank:false,maxSize:5000)
        updated(nullable:false)
        category(nullable:false)
        priority(nullable:false)
    }
}

class Tag {

    String name
    String description

    static hasMany = [blogpost:BlogPost]

    static searchable = true

    String toString() {
        "$name"
    }

    static constraints = {
        name(nullable:false,blank:false)
        description(nullable:false,blank:false)
    }
} 
```

Hibernate 在 MySQL 中创建三个相关的表：blog_post、tag 和 tag_blogpost

现在，如果我创建与博客文章 Y 相关的标签 X，然后删除 Y，则在 tag_blogpost 表中保留一个孤立行，标签 X 的显示视图抛出异常“不存在具有给定标识符的行：[...] "

如何在 tag_blogpost 表中自动删除（级联）孤立行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T21:55:06.813

在您的模型中，BlogPost 和 Tag 之间有两种关系是否正确？要创建 BlogPost，您必须有一个标签，也可以是 n 个标签？

您创建的标签是作为标签属性还是在标签列表中关联到 BlogPost？

如果它在标签列表中，我认为 Grails 将您的模型视为多对多并根据[文档](http://grails.org/doc/2.1.0/ref/Domain%20Classes/belongsTo.html)：

> 多对多：只保存从“所有者”到“依赖”的级联，不删除。

在帖子标签模型中思考，我认为您的方法可能是多对多关系并手动处理标签的删除，删除之前的帖子。如果您确实需要在帖子中至少有一个标签，则在 BlogPost 视图中您可以强制用户选择一个标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:45:41.623

实际上这个修改后的模型对我有用

```
class BlogPost {
    String title
    String teaser
    String body
    Date updated
    Integer priority

    static hasMany = [blogPostTags:BlogPostTag]
    static belongsTo = [Category]

    String toString() {
        "$title"
    }

    static constraints = {
        title(nullable:false,blank:false,lenght:1..50)
        teaser(nullable:false,blank:false,lenght:1..100)
        body(nullable:false,blank:false,maxSize:5000)
        updated(nullable:false)
        priority(nullable:false)
    }
}

class Tag {

    String name
    String description

    static hasMany = [blogPostTags:BlogPostTag]

    String toString() {
        "$name"
    }

    static constraints = {
        name(nullable:false,blank:false)
        description(nullable:false,blank:false)
    }
}

class BlogPostTag {
    BlogPost blogPost
    Tag tag

    static belongsTo = [BlogPost,Tag]

    static constraints = {
        blogPost(nullable:false)
        tag(nullable:false)
    }
} 
```

# javascript - jQuery 文本突出显示 - 多个突出显示

> ID：12409424
> 
> 赞同：3
> 
> 时间：2012-09-13T15:10:19.027
> 
> 标签：javascript, jquery, find, highlight

使用 Johann Burkard 编写的插件来突出显示文本字符串：

[突出显示 jQuery 插件](http://johannburkard.de/blog/programming/javascript/highlight-javascript-text-higlighting-jquery-plugin.html)

我已经稍微修改了它以接受来自两个输入字段的值，这些值将在函数运行时突出显示，但是插件只允许使用一种颜色。有没有人知道是否有扩展或知道我可以进一步扩展它以接受不同的突出显示颜色的方法？

我的代码：

```
$(function() { 
if ( $("input#searchterm").val().length > 0 ) {
    var arrayOfKeyWords= $("input#searchterm").val().split(',');
    for (var i=0;i<arrayOfKeyWords.length;i++) {
        $('.message p.messagecontent').highlight(arrayOfKeyWords[i]);
    }
}   
if ( $("input#anysearchterm").val().length > 0 ) {
    var arrayOfKeyWords= $("input#anysearchterm").val().split(',');
    for (var i=0;i<arrayOfKeyWords.length;i++) {
        $('.message p.messagecontent').highlight(arrayOfKeyWords[i]);
    }
}       
}); 
```

这很好用，并在我想突出显示的字符串周围添加了一个 css 类，所以我的问题是可以指定将在我的各个函数中围绕文本包装的类名，以便我可以在 CSS 中设置颜色？

插件来源：

```
jQuery.fn.highlight=function(b){function a(e,j){var l=0;if(e.nodeType==3){var k=e.data.toUpperCase().indexOf(j);if(k>=0){var h=document.createElement("span");h.className="highlight";var f=e.splitText(k);var c=f.splitText(j.length);var d=f.cloneNode(true);h.appendChild(d);f.parentNode.replaceChild(h,f);l=1}}else{if(e.nodeType==1&&e.childNodes&&!/(script|style)/i.test(e.tagName)){for(var g=0;g<e.childNodes.length;++g){g+=a(e.childNodes[g],j)}}}return l}return this.each(function(){a(this,b.toUpperCase())})};jQuery.fn.removeHighlight=function(){return this.find("span.highlight").each(function(){this.parentNode.firstChild.nodeName;with(this.parentNode){replaceChild(this.firstChild,this);normalize()}}).end()}; 
```

提前致谢

# php - 在php中从mysql数据库中打印多个值

> ID：12409428
> 
> 赞同：0
> 
> 时间：2012-09-13T15:10:40.897
> 
> 标签：php, mysql

我正在尝试从数据库中选择注释（正文、名称和时间戳），然后将其打印在屏幕上。到目前为止我的代码：

```
$mycomment = db_query('SELECT comment,name,timestamp FROM comments WHERE nid = 246');

while($allcomments = db_result($mycomment)){

print($allcomments);
} 
```

我的代码只打印评论（一个值），我想打印类似“NAME 在 TIMESTAMP 上发布的评论”之类的东西。谁能帮我正确的语法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:14:06.857

从使用`vardump($allcomments)`而不是开始`print()`

这至少会向您显示数组、对象或返回的任何内容的内容`db_result`

比您只需要适当地访问该变量即可打印出您想要的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:20:34.533

$mycomment = mysql_query('SELECT comment,name,timestamp FROM comments WHERE nid = 246');

而($allcomments = mysql_fetch_array($mycomment, MYSQL_ASSOC)){

回声 $allcomments['comment'].' 由'发布。$allcomments['name']。' 在 '。date("g:ia F j, Y", strtotime($allcomments[ 'timestamp' ])) ;

}

试试这个......应该工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T15:23:15.327

根据 Drupal[文档](http://api.drupal.org/api/drupal/includes!database.mysql.inc/function/db_result/5)，您应该使用 db_fetch_array() 或 db_fetch_object() 而不是 db_result()。

```
$mycomment = db_query('SELECT comment,name,timestamp FROM comments WHERE nid = 246');

while($allcomments = db_fetch_array($mycomment)){
    print($allcomments['comment'] . ' posted by ' . $allcomments['name'] . ' on ' . $allcomments['timestamp']);
} 
```

# python - 如何在运行时添加 ManyToManyField？

> ID：12409429
> 
> 赞同：0
> 
> 时间：2012-09-13T15:10:41.193
> 
> 标签：python, django, django-orm

这就是我想要做的：

```
def test_basic_addition(self):
    # create field
    f = models.ManyToManyField(to=X, related_name='bar')
    f.contribute_to_class(Y, 'x')

    # create table
    field = Y._meta.get_field_by_name('x')[0]
    through = field.rel.through

    fields = tuple((field.name, field) for field in through._meta.fields)

    db.create_table(through._meta.db_table, fields)
    db.create_unique(through._meta.db_table,
        ['%s_id' % name for name, f in fields
            if isinstance(f, models.ForeignKey)])

    x = X(name='foo')
    x.save()
    y = Y()
    y.save()
    y.x.add(x)

    print y.x.all() 
```

抛出的异常是：

```
E
======================================================================
ERROR: test_basic_addition (test_app.tests.SimpleTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/jpic/test_project/test_app/tests.py", line 41, in test_basic_addition
    print y.x.all()
  File "/home/jpic/env/local/lib/python2.7/site-packages/django/db/models/manager.py", line 116, in all
    return self.get_query_set()
  File "/home/jpic/env/local/lib/python2.7/site-packages/django/db/models/fields/related.py", line 543, in get_query_set
    return super(ManyRelatedManager, self).get_query_set().using(db)._next_is_sticky().filter(**self.core_filters)
  File "/home/jpic/env/local/lib/python2.7/site-packages/django/db/models/query.py", line 621, in filter
    return self._filter_or_exclude(False, *args, **kwargs)
  File "/home/jpic/env/local/lib/python2.7/site-packages/django/db/models/query.py", line 639, in _filter_or_exclude
    clone.query.add_q(Q(*args, **kwargs))
  File "/home/jpic/env/local/lib/python2.7/site-packages/django/db/models/sql/query.py", line 1250, in add_q
    can_reuse=used_aliases, force_having=force_having)
  File "/home/jpic/env/local/lib/python2.7/site-packages/django/db/models/sql/query.py", line 1122, in add_filter
    process_extras=process_extras)
  File "/home/jpic/env/local/lib/python2.7/site-packages/django/db/models/sql/query.py", line 1316, in setup_joins
    "Choices are: %s" % (name, ", ".join(names)))
FieldError: Cannot resolve keyword 'bar' into field. Choices are: id, name, users

----------------------------------------------------------------------
Ran 1 test in 0.017s

FAILED (errors=1)
Destroying test database for alias 'default'... 
```

`del X._meta._name_map`没有成功，但我想这很正常，因为它是来自另一个模型 Y 的反向场。

无论如何，您可以签出我的[test_project](https://github.com/jpic/test_project/)以隔离我的问题，然后`./manage.py test test_app`在您的工作副本中运行以重现该问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:37:41.883

解决方案是对 Django 的 AppCache 实施疯狂的黑客攻击，这显然[很痛苦](https://github.com/charettes/django-mutant/)。

最干净的解决方案是使用 SQLAlchemy，这是一个可怕的概念证明，在重构和一些锁定功能之后将变成一个 python 包：

```
import unittest

import sqlalchemy as sa
from sqlalchemy import orm
from sqlalchemy.ext.declarative import declarative_base

from alembic.operations import Operations
from alembic.migration import MigrationContext

Base = declarative_base()
engine = sa.create_engine('mysql://root:root@localhost/jpic')
Session = orm.sessionmaker(bind=engine)
session = Session()

conn = engine.connect()
ctx = MigrationContext.configure(conn)
op = Operations(ctx)

for table in ('person_car', 'cars', 'houses', 'persons'):
    op.drop_table(table)

class PersonTest(unittest.TestCase):
    def test_000_create_table(self):

        self.__class__.Person = type('Person', (Base,), {'__tablename__': 'persons',
            'id': sa.Column(sa.Integer, primary_key=True)})

        self.__class__.Car = type('Car', (Base,), {'__tablename__': 'cars',
            'id': sa.Column(sa.Integer, primary_key=True)})

        self.__class__.House = type('House', (Base,), {'__tablename__': 'houses',
            'id': sa.Column(sa.Integer, primary_key=True)})

        Base.metadata.create_all(engine)

    def test_001_create_unicode_field(self):
        # create the column in the table - does not add it in the class
        field = sa.Column('unicode_field', sa.Unicode(50))
        op.add_column('persons', field)

        # create the column in the class - was not done above
        # a new instance to avoid conflicts
        field = sa.Column('unicode_field', sa.Unicode)
        self.__class__.Person.unicode_field = field

        subject = self.__class__.Person(unicode_field='hello unicode field')
        session.add(subject)

        subject = session.query(self.__class__.Person).first()
        self.assertEqual(subject.unicode_field, 'hello unicode field')

    def test_002_create_foreign_key(self):
        field = sa.Column('owner_id', sa.Integer, sa.ForeignKey('persons.id'))
        op.add_column('houses', field)

        # create fk
        op.create_foreign_key('fk_house_owner', 'houses', 'persons', ['owner_id'], ['id'])

        field = sa.Column('owner_id', sa.Integer, sa.ForeignKey('persons.id'))
        relation = orm.relationship('Person',
                backref=orm.backref('houses', lazy='dynamic'))
        self.__class__.House.owner_id = field
        self.__class__.House.owner = relation

        owner = session.query(self.__class__.Person).first()

        house = self.__class__.House()
        house.owner = owner
        session.add(house)

        house = session.query(self.__class__.House).first()

        self.assertEqual(house.owner, owner)
        # also test the reverse relation
        self.assertEqual(owner.houses.all(), [house])

    def test_003_create_many_to_many(self):
        association_table = sa.Table('person_car', Base.metadata,
            sa.Column('person_id', sa.Integer, sa.ForeignKey('persons.id')),
            sa.Column('car_id', sa.Integer, sa.ForeignKey('cars.id'))
        )

        Base.metadata.create_all(engine)

        self.__class__.Person.cars = orm.relationship('Car',
                secondary=association_table,
                backref=orm.backref('persons', lazy='dynamic'))

        user1 = session.query(self.__class__.Person).first()
        user2 = self.__class__.Person()
        session.add(user2)

        car1 = self.__class__.Car()
        session.add(car1)
        car2 = self.__class__.Car()
        session.add(car2)

        user1.cars.append(car1)
        car2.persons.append(user1)
        session.commit()

        fresh_user1 = session.query(self.__class__.Person).get(user1.id)
        self.assertEqual(len(fresh_user1.cars), 2)
        self.assertTrue(car1 in fresh_user1.cars)
        self.assertTrue(car2 in fresh_user1.cars)

        fresh_car1 = session.query(self.__class__.Car).get(car1.id)
        self.assertEqual(fresh_car1.persons.all(), [user1]) 
```

请注意，这适用于 mysql，但不适用于 sqlite 或 postgres。

你好烧瓶和 SQLAlchemy B)

# python - 使用 m2m_changed 信号

> ID：12409430
> 
> 赞同：0
> 
> 时间：2012-09-13T15:10:43.353
> 
> 标签：python, django, django-signals

首先是有关该应用程序的一些信息：我希望能够上传一个 pdf 文件，该 pdf 文件将被转换为图像（对于每个 pdf 页一个图像）。然后这些图像将显示在网站上，并且可以下载 pdf： 到目前为止，我有这个：

```
def upload_to(path):
    def upload_callback(instance, filename):
        return '%s' % os.path.join(settings.MEDIA_ROOT, path, str(instance), filename)
    return upload_callback

class Document(models.Model):
    name = models.TextField()
    pdf_file = models.FileField(upload_to=upload_to('pdfs'))
    images = models.ManyToManyField('Image', null=True, blank=True)

class Image(models.Model):
    image = models.ImageField(upload_to='pdfimages') 
```

现在要创建图像和图像对象，我重写了 Document 类的保存函数：我看起来像这样：

```
def save(self, *args, **kwargs):
    path = os.path.join(settings.MEDIA_ROOT, 'pdfs', self.name)
    imagepath = os.path.join(settings.MEDIA_ROOT, 'pdfimages')

    if os.path.exists(path):
        for file_ in os.listdir(path):
            if file_ == self.pdf_file.name:
                continue

    super(Document, self).save(*args, **kwargs)

    save_to = os.path.join(path, os.path.splitext(self.pdf_file.name)[0] +
                           '_page.png')
    pdffile = os.path.join(path, self.pdf_file.name)

    args = ['convert', '-density', '100', '-depth', 
            '8', '-quality', '85', pdffile, save_to ]

    subprocess.check_call(args, stdout=sys.stdout, stderr=sys.stderr)
    for file_ in os.listdir(path):
        if file_.endswith('png'):
            try:
                shutil.move((os.path.join(settings.MEDIA_ROOT,
                                          'pdfs', self.name, file_)),
                            imagepath)

            except Exception:
                pass

     for file_ in os.listdir(imagepath):
        i, created = Image.objects.get_or_create(image="pdfimages/%s" % file_) 
```

首先代码不是很好，其次最重要的操作仍然缺失。将图像添加到文档意味着更新 m2m 关系。现在我有两个问题：

1.  我可以把上面的代码写得更好吗？（主要是不喜欢

    > super(Document, self).save(*args, **kwargs) 在代码中间。

2.  对于 m2m 更新，我查看了 m2m_changed 信号，但老实说我不明白如何使用它。

任何帮助表示赞赏。

编辑：

一旦你了解了参数，这实际上很容易，谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-13T15:49:29.127

查看这篇关于 m2m 信号使用的[帖子](https://stackoverflow.com/questions/4744794/django-cannot-detect-changes-on-many-to-many-field-with-m2m-changed-signal-au)。

您可以将所有后期保存处理逻辑移动到信号

# qt - 启动应用程序旋转 90 度

> ID：12409434
> 
> 赞同：2
> 
> 时间：2012-09-13T15:11:02.167
> 
> 标签：qt, windows-ce

无论如何启动应用程序旋转 90 度？我阅读了有关 qt-gfx-transformed 的信息，但它似乎仅适用于 Qt 嵌入式 linux，而且我在 Windows ce 上。有什么建议吗？

谢谢

# javascript - Javascript Checkbox 函数：“缺少：属性 id 之后”

> ID：12409435
> 
> 赞同：1
> 
> 时间：2012-09-13T15:11:05.587
> 
> 标签：javascript, jquery, ajax

我是 javascript 的新手，我似乎无法弄清楚我错过了什么。我正在试验来自 jquery 的 ajax 函数。我被困在这段代码上。这个想法是，当一个复选框被选中时，它会执行一个 php 脚本并将该脚本的状态输出到“状态”div。

我花了最后一个小时查看我的代码，我看不出我错过了什么。当然，我的 javascript 技能很低，这可能无济于事。

```
function playback(){
  $.ajax({
    url:"ChangePlayback.php",
    type: "GET",
    if((document).getElementById('LoopPlayback').checked)
    {
      data: "playback=1",
    }
    else
    {
      data: "playback=0",
    }
    success:function(result){
      $("#Status").html(result);
    }
  });
} 
```

我收到以下萤火虫错误：

```
missing : after property id
[Break On This Error] if((document).getElementById('LoopPlayback').checked) 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T15:13:01.857

你需要重构一下；if 需要在赋值中，不像 SQL 中的 CASE 语句：

```
...
'data': 'playback=' + (document.getElementById('LoopPlayback').checked ? '1' : '0'),
... 
```

这是一个内联三元语句。或者，如果您想保留结构，您可以存储首选项然后`.extend()`它们：

```
var ajaxConfig = {
  'url': 'CHangePlayback.php',
  'type': 'GET',
  'data': 'playback=0',
  'success': function(result){
    $('#status').html(result);
  }
};
if (document.getElementById('LoopPlayback').checked){
  ajaxConfig = $.extend(ajaxConfig,{ 'data': 'playback=1' });
}

$.ajax(ajaxConfig); 
```

当然，更简单的方法是创建一个`data`变量并将其放在配置中：

```
var data = 'playback=0';
if (document.getElementById('LoopPlayback')){
  data = 'playback=1';
}

$.ajax({
  ...
  'data': data,
  ...
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T15:14:50.363

您可以将其更改为此，以便它执行“if”内联：

```
function playback(){
  $.ajax({
    url:"ChangePlayback.php",
    type: "GET",
    data: "playback=" + (document.getElementById('LoopPlayback').checked ? "1" : "0"),    
    success:function(result){
      $("#Status").html(result);
    }
  });
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T15:16:11.110

这应该有效：

```
function playback(){
  $.ajax({
    url:"ChangePlayback.php",
    type: "GET",
    data: $('LoopPlayback').val() ? "playback=1" : "playback=0",
    success:function(result){
      $("#Status").html(result);
    }
  });
} 
```

这是对象，您不能在字段之间编写代码：

```
{
    url:...,
    type:...,
    data:...,
    success:...
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T15:13:09.453

您不能将 if 语句放在对象文字的中间。将其移出 ajax 选项文字：

```
function playback(){
    var data;

    if(document.getElementById('LoopPlayback').checked) {
        data = "playback=1";
    } else {
        data = "playback=0";
    }

    $.ajax({
        url:"ChangePlayback.php",
        type: "GET",
        data: data,
        success:function(result){
            $("#Status").html(result);
        }
    });
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T15:15:50.580

或使用 jquery 来做到这一点

```
 if ($('#LoopPlayback').is(':checked'))
  //your stuff 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-13T15:16:16.183

使用更多 jQuery 的强大功能更简洁：

```
$.ajax({
    url:"ChangePlayback.php",
    type: "GET",
    data: "playback=" + ($("#LoopPlayback").is(":checked") ? "1" : "0"),
    success:function(result){
        $("#Status").html(result);
    }
}); 
```

# elasticsearch - 什么时候启动额外的 Elasticsearch 节点？

> ID：12409438
> 
> 赞同：35
> 
> 时间：2012-09-13T15:11:12.783
> 
> 标签：elasticsearch, sharding, bigdata

我正在尝试用 Elasticsearch 替换 Solr 设置。这是一个新的设置，还没有生产，所以我有很多空间来摆弄东西并让它们正常工作。

我有非常非常大量的数据。我正在索引一些实时数据并将其保存 7 天（通过使用 _ttl 字段）。我不在索引中存储任何数据（并禁用了 _source 字段）。我预计我的索引将稳定在**200 亿**行左右。我会将这些数据放入 2-3 个命名索引中。到目前为止，多达几十亿行的搜索性能是完全可以接受的，但索引性能是一个问题。

*我对 ES 如何在内部使用分片感​​到有些困惑。我创建了两个 ES 节点，每个节点都有一个单独的数据目录，每个都有 8 个索引和 1 个副本。当我查看集群状态时，我只看到每个节点的一个分片和一个副本。每个节点不是保持多个索引在内部运行吗？（检查磁盘存储位置表明肯定只有一个 Lucene 索引存在）。*-- 已解决，因为我的索引设置未从配置中正确获取。使用 API 创建索引并指定分片和副本的数量现在已经完全符合我的预期。

*此外，我尝试运行同一个 ES 节点的多个副本（来自相同的配置），它识别出已经有一个副本正在运行并创建自己的工作区。这些新的节点实例似乎也只有一个磁盘索引。*-- 现在每个节点实际上都在使用多个索引，具有多个索引的单个节点足以限制整个系统，所以这不是问题。

您何时启动额外的 Elasticsearch 节点，以获得最大的索引性能？我应该有很多节点，每个节点都运行 1 个索引 1 个副本，还是更少的节点运行大量索引？为了让单个节点做更多的工作，我的配置是否缺少一些东西？

另外：是否有任何指标可以知道仅 HTTP 节点何时过载？现在我只有一个节点专门用于 HTTP，但除了 CPU 使用率之外，我无法判断它是否正常。何时启动额外的 HTTP 节点并拆分索引软件以指向各个节点？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-09-13T20:16:31.603

让我们先澄清一下术语：

*   **Node**：一个正在运行的 Elasticsearch 实例（一个 java 进程）。通常每个节点都在自己的机器上运行。
*   **集群**：一个或多个具有相同集群名称的节点。
*   **索引**：或多或少像一个数据库。
*   **类型**：或多或少像一个数据库表。
*   **Shard**：实际上是一个 lucene 索引。每个索引都由一个或多个分片组成。分片可以是主分片（或简称分片）或**副本**。

创建索引时，您可以指定分片数和每个分片的副本数。默认值为 5 个主分片和每个分片 1 个副本。分片自动均匀分布在集群中。副本分片永远不会分配在相关主分片所在的同一台机器上。

您在集群状态中看到的内容很奇怪，我建议您使用[get settings API](https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-get-settings.html)检查您的索引设置。看起来您只配置了一个分片，但无论如何，如果您有多个索引，您应该会看到更多分片。如果您需要更多帮助，您可以发布从 elasticsearch 获得的输出。

您使用多少分片和副本实际上取决于您的数据、您访问它们的方式以及可用节点/服务器的数量。最好的做法是稍微过度分配分片，以便在您向集群中添加更多节点时重新分配它们，因为在创建索引后（目前）您无法更改分片的数量。否则，如果您愿意对数据进行完整的重新索引，则可以随时更改分片的数量。

每个额外的分片都会产生成本，因为每个分片实际上都是一个 Lucene 实例。每台机器可以拥有的最大分片数量实际上取决于可用的硬件和您的数据。很高兴知道每个分片有 100 个索引或一个索引有 100 个分片实际上是相同的，因为在这两种情况下您都会有 100 个 lucene 实例。

当然，在查询时，如果您想查询由 100 个分片组成的单个弹性搜索索引，elasticsearch 需要全部查询才能获得正确的结果（除非您为文档使用特定路由，然后只查询特定分片）。这将产生性能成本。

您可以使用[Cluster Nodes Info API](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-nodes-info.html)轻松检查集群和节点的状态，通过它您可以检查很多有用的信息，这些都是您了解节点是否运行顺畅所需的全部信息。更简单的是，有几个插件可以通过漂亮的用户界面（无论如何在内部使用 elasticsearch API）检查这些信息：[paramedic](https://github.com/karmi/elasticsearch-paramedic)和[bigdesk](https://github.com/lukas-vlcek/bigdesk)。

# java - Jelly Bean 中的 Phonegap/Cordova 应用程序中断 - Access-Control-Allow-Origin 和 setAllowUniversalAccessFromFileURLs

> ID：12409440
> 
> 赞同：4
> 
> 时间：2012-09-13T15:11:16.420
> 
> 标签：java, android, cordova, android-websettings

一年多来，我一直在使用 Cordova（又名 Phonegap）为 Android 开发*，并试图让我的应用程序可以在 Jelly Bean 中运行，但我收到以下错误：

```
XMLHttpRequest cannot load http://127.0.0.1:40582/[somerandomstring]. Origin null is not allowed by Access-Control-Allow-Origin. at null:1 
```

（以及任何后续 ajax 请求使用 localhost 或 file:// 的类似错误）只是为了测试，我授予对 Access-Control-Allow-Origin 部分中 config.xml 中所有内容的访问权限

```
<access origin="*"/>
<access origin="http://127.0.0.1*"/> 
```

在我的[研究](http://mail-archives.apache.org/mod_mbox/incubator-callback-dev/201207.mbox/%3C1268020324.77523.1342724256053.JavaMail.jiratomcat@issues-vm%3E)中，我发现该错误与 Google 对 Android Jelly Bean 所做的设置更改有关。这是我发现的：来自：[https ://git-wip-us.apache.org/repos/asf?p=incubator-cordova-android.git;a=commitdiff;h=07439ff9](https://git-wip-us.apache.org/repos/asf?p=incubator-cordova-android.git;a=commitdiff;h=07439ff9)

-- 这是来自 org.apache.cordova.CordovaWebView

```
// Jellybean rightfully tried to lock this down. Too bad they didn't give us a whitelist
// while we do this
if (android.os.Build.VERSION.SDK_INT > android.os.Build.VERSION_CODES.ICE_CREAM_SANDWICH_MR1)
    Level16Apis.enableUniversalAccess(settings); 
```

-- 这也是来自 org.apache.cordova.CordovaWebView

```
// Wrapping these functions in their own class prevents warnings in adb like:
// VFY: unable to resolve virtual method 285: Landroid/webkit/WebSettings;.setAllowUniversalAccessFromFileURLs
@TargetApi(16)
private static class Level16Apis {
    static void enableUniversalAccess(WebSettings settings) {
         settings.setAllowUniversalAccessFromFileURLs(true);
     }
} 
```

很高兴科尔多瓦试图解决这个变化，但不幸的是这不起作用......

[在此处](https://stackoverflow.com/a/11511062/1013526)和[此处](https://stackoverflow.com/a/12029490/1013526)的这些 SO 线程中，我找到了一个常见的解决方案，只需按如下方式更改设置：

```
if(android.os.Build.VERSION.SDK_INT > android.os.Build.VERSION_CODES.ICE_CREAM_SANDWICH_MR1) {
    super.appView.getSettings().setAllowUniversalAccessFromFileURLs(true);    
} 
```

现在我收到以下警告：

```
Call requires API level 16 (current min is 8) 
android.webkit.WebSettings#setAllowUniversalAccessFromFileURLs 
```

这是我的 AndroidManifest.xml 中的 api

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="16" /> 
```

为什么要求我将 minSdkVersion 更改为 16 而不是遵循我的 targetSdkVersion 16？

想法？

**注意**：我目前正在使用 Cordova 2.0、Eclipse Indigo SR2（所有更新当前）、Android SDK（所有更新当前）、Windows 7 Home（所有更新当前）、Java 7 Update 7。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-13T19:56:47.390

好的，经过大量的搜索、猜测和检查，我找到了一个可行的解决方案。

我必须为 setAllowUniversalAccessFromFileURLs 调用创建一个单独的函数......这解决了 TargetApi 问题，但随后在 JellyBean 上呈现了一个不同的函数，它无法连接到我在 loadURL 调用中拥有的文件，所以我不得不覆盖 onReceivedError 函数. 这是我的结果代码：

```
package com.MyUniqueDomain.MyUniquePackage;

import android.annotation.TargetApi;
import android.os.Bundle;
import org.apache.cordova.*;

public class MainActivity extends DroidGap {

    private int retryCount = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        super.setStringProperty("loadingDialog", "Please wait -- loading...");
        super.init();
        if(android.os.Build.VERSION.SDK_INT > android.os.Build.VERSION_CODES.ICE_CREAM_SANDWICH_MR1) {
            fixJellyBeanIssues();
        }
        super.loadUrl("file:///android_asset/www/index.html");
    }

    @TargetApi(16)
    protected void fixJellyBeanIssues() {
        System.out.println(super.appView.toString());
        try {
            super.appView.getSettings().setAllowUniversalAccessFromFileURLs(true);
        } catch(NullPointerException e) {
            System.out.println(e.toString());
        }
    }

    // catch an error and if try again 1x or quit
    @Override
    public void onReceivedError( int errorCode, String description, String failingUrl)
    {
        if(retryCount < 3) {
            retryCount++;
            System.out.println("Connection failed, trying again. Retry Count: "+retryCount);
            super.loadUrl("file:///android_asset/www/index.html");
        } else {
            System.out.println("Sorry, it failed three times so I give up.");
            super.loadUrl("file:///android_asset/www/fail.html");
        }
        return;
    }
} 
```

# asp.net-mvc - MVC EF：如果父类是抽象的，则鉴别器字段不会出现

> ID：12409445
> 
> 赞同：1
> 
> 时间：2012-09-13T15:12:06.977
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, migration, discriminator

我有一个名为**Product**的实体：

```
 public abstract class Product : Entity
  {
    public long ProductId { get; set; }
    public long Price { get; set; }
    public abstract string Name { get; }
  } 
```

我有一个叫**玩具的产品**

```
 class Toy : Product
  {
    public override string Name { get { return "Toy Product"; } }
    public string Colour { get; set; }
  } 
```

如此有效地，玩具就是产品。Product 有自己的属性，但它也有一个名为“ *Name* ”的抽象属性。孩子知道自己的名字，所以它会覆盖它。

这对我来说似乎很好，但是当我运行 Add-Migration 时（因为我使用的是 EF Code-First），*鉴别*器字段丢失了。如果删除抽象字段，并使类成为非抽象类，则出现鉴别器字段。

我可以使父类抽象吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T15:19:31.137

它删除了鉴别器，因为当您只有一个实体继承时不需要它，因为您无法实例化抽象类。

如果您添加另一个继承实体，例如 Bear：

```
public class Bear : Product
{
    public override string Name { get { return "Bear Product"; } }
    public string Fur { get; set; }
} 
```

你的鉴别器列会回来：

![在此处输入图像描述](../Images/a92181f884829262a2e0f8d878ffd6d4.png)

# c# - 如何获取 .ai 或 .eps 文件的属性？

> ID：12409452
> 
> 赞同：1
> 
> 时间：2012-09-13T15:12:26.890
> 
> 标签：c#, asp.net, eps

如何获取 ai (Adobe Illustrator) 或 eps 文件的属性，即 dpi 中的分辨率等。我需要在将文件上传到服务器时检查此属性。

还有任何 DLL 可以将 ai/eps 转换为标准图像格式（jpg、gif、png 等）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T08:18:39.093

```
use ImageMagickNET.dll through this you can convert the .ai or .eps files into .jpg format.. 
```

c#代码：

```
 public partial class Form1 : Form
    {

        Process ffmpeg;
        string video;
        string thumb;
        public Form1()
        {
            InitializeComponent();
        }
        private void button4_Click(object sender, EventArgs e)
        {
            ffmpeg = new Process();

            ffmpeg.StartInfo.Arguments = "convert \"" + .ai file path + "\" -background white -flatten -density 300 -colors 512 -antialias  -normalize -units PixelsPerInch -quality 100 -colorspace RGB -resize 3425x3425  \"D:\\GRAPHICS SEARCH ENGINE\\GRAPHICS IMAGES\\AI\\" convert.jpg\"";

            ffmpeg.StartInfo.FileName = ("C:\\Program Files (x86)\\ImageMagick-6.5.3-Q16\\convert.exe");
            ffmpeg.Start();

         }
    } 
```

要获取 ai 文件属性，如宽度、高度、页数和标题，请使用 itextsharp.dll

代码：

```
using System;
using System.Collections.Generic; 
using System.ComponentModel; 
using System.Data; 
using System.Linq; 
using System.Text;
using System.Windows.Forms;
using iTextSharp.text; 
using iTextSharp.text.pdf;

namespace pdfreared { public partial class Form1 : Form { public Form1() { InitializeComponent(); }

    private void button1_Click(object sender, EventArgs e)
    {
        PdfReader reader = new PdfReader(@"D:\Files Formats\Icon.ai");
        int n = reader.NumberOfPages;
        label4.Text = n.ToString();

        // size of the first page
        Rectangle psize = reader.GetPageSize(1);
        float width = psize.Width;
        label1.Text ="Width= " + Convert.ToString(width);
        float height = psize.Height;
        label2.Text = "Height = " + Convert.ToString(height);
      //  reader.Metadata.

        Console.WriteLine("Size of page 1 of {0} => {1} × {2}", n, width, height);
        // file properties
        Dictionary<string, string> infodict = reader.Info;
        foreach (KeyValuePair<string, string> kvp in infodict)
        {
            Console.WriteLine(kvp.Key + " => " + kvp.Value);
            label3.Text = kvp.Key + " => " + kvp.Value;

        }

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-06T04:47:06.187

使用“identify -verbose image.eps”给出EPS文件和AI文件的元数据信息。

# mysql - 在同一个查询中使用 Select & Insert

> ID：12409454
> 
> 赞同：-1
> 
> 时间：2012-09-13T15:12:28.743
> 
> 标签：mysql

我有三个表，我正在尝试从一个表中执行 SELECT 并在具有相同值的三列上使用 ON 插入另一个表。

这就是我尝试的...

```
INSERT INTO
CustomerDetails_TEST
(Region_ID)

SELECT
RegionStatesUS.Region_ID

LEFT JOIN Customers ON Customers.Customer_ID = CustomerDetails_TEST.Customer_ID
LEFT JOIN RegionStatesUS ON RegionStatesUS.RegionState = Customers.BillingStateOrProv

FROM Customers
WHERE Customers.Customer_ID = CustomerDetails_TEST.Customer_ID 
```

桌子是...

```
CustomerDetails_TEST
RegionStatesUS
Customers 
```

我正在尝试`INSERT`使用`RegionStatesUS.Region_ID`.`Customer_ID` `INTO` `CustomerDetails_TEST``Region_ID`

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:39:44.133

FROM 出现在 LEFT JOIN 之前。错误消息暗示了这一点。再试一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T15:43:28.013

你的 SQL 语法是错误的，我想你可能想要这个：

```
INSERT INTO CustomerDetails_TEST (Region_ID)
SELECT r.Region_ID
FROM Customers c1
LEFT JOIN CustomerDetails_TEST c2
    ON c1.Customer_ID = c2.Customer_ID
LEFT JOIN RegionStatesUS r
    ON c1.BillingStateOrProv = r.RegionState 
```

更新查询将类似于*未测试*：

```
UPDATE CustomerDetails_TEST c1
LEFT JOIN Customers c2
    ON c1.Customer_ID = c2.Customer_ID
LEFT JOIN RegionStatesUS r
    ON c2.BillingStateOrProv = r.RegionState 
SET c1.Region_ID = r.Region_ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T06:37:10.380

看不到在哪里评论只是关于如何更新的注释，或者

```
insert into mytable
select from sometable
on duplicate key update
id = sometable.id; 
```

# python - 在 Python if 语句中使用列表和元组

> ID：12409457
> 
> 赞同：5
> 
> 时间：2012-09-13T15:12:32.777
> 
> 标签：python, list, if-statement, tuples

`if`我想知道是否有充分的理由在 python语句中更喜欢列表而不是元组，反之亦然。因此，以下在功能上是等效的，但在性能和编码风格方面比另一个更可取，还是没关系？

```
if x in (1,2,3):
    foo()

if x in [1,2,3]:
    foo() 
```

如果有 2 或 3 个值和更长的列表，我似乎已经养成了使用元组的习惯，我认为因为根据我的经验，元组往往很短而列表很长，但这似乎有点武断，可能不必要地不一致。

我会对人们可以举出的任何例子感兴趣，其中一个比另一个更好。

干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T15:22:05.733

a 的初始化`tuple`（至少在 CPython 中）产生的字节码比 a 少`list`——但这真的没什么好担心的。我相信会员测试几乎是一样的（虽然没有测试过）。

对于纯粹的成员资格测试，查找语义是相同的。从 Python 2.7 开始，编写起来要好得多（并暗示它只是成员资格测试）：

```
if x in {1, 2, 3}:
    pass # do something 
```

在此之前：

```
if x in set([1,2,3]):
    pass # do something 
```

只是看起来有点笨拙……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:18:27.037

列表和元组的区别在于列表是可变的，而元组是不可变的。

人们倾向于将元组用于异构集合，类似于 C 中的结构，而列表用于同质集合，类似于 C 中的数组。

# objective-c - 检测何时在 OS X 上安装卷

> ID：12409458
> 
> 赞同：13
> 
> 时间：2012-09-13T15:12:35.920
> 
> 标签：objective-c, macos, cocoa, volumes

我有一个 OS X 应用程序需要响应正在安装或卸载的卷。

我已经通过定期检索卷列表并检查更改来解决这个问题，但我想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-13T15:36:30.577

注册到您收到的通知中心`[[NSWorkspace sharedWorkspace] notificationCenter]`，然后处理您感兴趣的通知。这些是与卷相关的：`NSWorkspaceDidRenameVolumeNotification`、`NSWorkspaceDidMountNotification`和。`NSWorkspaceWillUnmountNotification``NSWorkspaceDidUnmountNotification`

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-13T16:07:13.120

这种`NSWorkspace`方法正是我正在寻找的那种东西。几行代码之后，我有一个比使用计时器更好的解决方案。

```
-(void) monitorVolumes
{
    [[[NSWorkspace sharedWorkspace] notificationCenter] addObserver:self selector: @selector(volumesChanged:) name:NSWorkspaceDidMountNotification object: nil];
    [[[NSWorkspace sharedWorkspace] notificationCenter] addObserver:self selector: @selector(volumesChanged:) name:NSWorkspaceDidUnmountNotification object:nil];
}

-(void) volumesChanged: (NSNotification*) notification
{
    NSLog(@"dostuff");
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-10-11T10:04:34.840

斯威夫特 4 版本：

在 applicationDidFinishLaunching 中声明 NSWorkspace 并为 mount 和 unmount 事件添加观察者。

```
let workspace = NSWorkspace.shared

workspace.notificationCenter.addObserver(self, selector: #selector(didMount(_:)), name: NSWorkspace.didMountNotification, object: nil)
workspace.notificationCenter.addObserver(self, selector: #selector(didUnMount(_:)), name: NSWorkspace.didUnmountNotification, object: nil) 
```

在以下位置捕获安装和卸载事件：

```
@objc func didMount(_ notification: NSNotification)  {
    if let devicePath = notification.userInfo!["NSDevicePath"] as? String {
        print(devicePath)
    }
}
@objc func didUnMount(_ notification: NSNotification)  {
    if let devicePath = notification.userInfo!["NSDevicePath"] as? String {
        print(devicePath)
    }
} 
```

它将打印设备路径，例如 /Volumes/EOS_DIGITAL 以下是您可以从 userInfo 读取的常量。

```
NSDevicePath, 
NSWorkspaceVolumeLocalizedNameKey
NSWorkspaceVolumeURLKey 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-13T15:19:21.033

你知道[SCEvents](http://stuconnolly.com/blog/scevents-011/)吗？它允许您在观察到的文件夹的内容发生更改时收到通知 ( `/Volumes`)。这样您就不必使用计时器来定期检查内容。

# r - 匹配 ODFWeave 和 ggplot2 图像分辨率/大小

> ID：12409460
> 
> 赞同：2
> 
> 时间：2012-09-13T15:12:46.173
> 
> 标签：r, ggplot2, sweave, odfweave

我在 ODFWeave 代码块中使用 ggplot2 创建图表。我将 ODFWeave 尺寸设置为 5x5 英寸，但图形是在 480x480 像素处创建的，这看起来像是默认值。我怎样才能使这些更大并将它们与 ODF 尺寸相匹配以获得高质量的打印？

ODFWeave 选项：

```
imageDefs <- getImageDefs()
imageDefs$dispWidth <- 5
imageDefs$dispHeight<- 5
setImageDefs(imageDefs) 
```

weave 文档中的代码片段：

```
<<ClosureGraph, echo = FALSE, fig = TRUE>>= 
   #function returns a ggplot obj.
   p<-closuresbyperiod() 
   print(p)
@ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:59:25.057

感谢包管理器指出我们可以使用 plotWidth 和 Height 来做到这一点，例如：

```
imageDefs <- getImageDefs()
imageDefs$dispWidth <- 4
imageDefs$dispHeight<- 4
imageDefs$plotWidth <- 800
imageDefs$plotHeight<- 800
setImageDefs(imageDefs) 
```

这是在发出 odfWeave 命令之前完成的

# javascript - IE7 和 Javascript “发生错误”弹出窗口

> ID：12409463
> 
> 赞同：0
> 
> 时间：2012-09-13T15:12:54.193
> 
> 标签：javascript, ruby-on-rails-3, internet-explorer-7

我正在使用在 IE7 中最困难的 Rails 3.1 应用程序。每次单击输入字段时，我都会不断收到“此页面上的脚本发生错误”。我有 IE 调试栏，但在 Rails 中，资产被压缩，因此您无法真正调试手头的问题。

当其他人遇到这个问题时，如果是这样，你是如何解决的？

**编辑**

这是它在 IE7 中“失败”的地方（jquery.js 文件）

```
attr: function( elem, name, value, pass ) {
    var ret, hooks, notxml,
        nType = elem.nodeType;

    // don't get/set attributes on text, comment and attribute nodes
    if ( !elem || nType === 3 || nType === 8 || nType === 2 ) {
        return;
    }

    if ( pass && jQuery.isFunction( jQuery.fn[ name ] ) ) {
        return jQuery( elem )[ name ]( value );
    }

    // Fallback to prop when attributes are not supported
    if ( typeof elem.getAttribute === "undefined" ) {
        return jQuery.prop( elem, name, value );
    }

    notxml = nType !== 1 || !jQuery.isXMLDoc( elem );

    // All attributes are lowercase
    // Grab necessary hook if one is defined
    if ( notxml ) {
        name = name.toLowerCase();
        hooks = jQuery.attrHooks[ name ] || ( rboolean.test( name ) ? boolHook : nodeHook );
    }

    if ( value !== undefined ) {

        if ( value === null ) {
            jQuery.removeAttr( elem, name );
            return;

        } else if ( hooks && "set" in hooks && notxml && (ret = hooks.set( elem, value, name )) !== undefined ) {
            return ret;

        } else {
            elem.setAttribute( name, "" + value );
            return value;
        }

    } else if ( hooks && "get" in hooks && notxml && (ret = hooks.get( elem, name )) !== null ) {
        return ret;

    } else {
                    // FAILING HERE WITH THIS LINE
        ret = elem.getAttribute( name );

        // Non-existent attributes return null, we normalize to undefined
        return ret === null ?
            undefined :
            ret;
    }
}, 
```

我不确定为什么会失败，但确实如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:14:39.097

在开发模式下运行它，不要压缩 javascript 文件，这样你就可以实际调试它。

# java - 聊天服务器 - 客户端/服务器聊天 Java 作业

> ID：12409467
> 
> 赞同：1
> 
> 时间：2012-09-13T15:13:10.973
> 
> 标签：java

我的聊天室程序。我有 2 个包，1 个用于客户端，其他用于服务器。运行服务器程序，填写端口字段并单击按钮启动服务器，窗口程序卡住，我无法对其执行任何操作，但服务器仍然工作，客户端仍然连接和聊天。

```
private void btnOpenActionPerformed(java.awt.event.ActionEvent evt) {                                        

    int port = Integer.parseInt(txtPort.getText());
    go(port);
}                                       
private void go(int port){
    try {
        listUser = new Hashtable<String, ClientConnect>();
        server = new ServerSocket(port);
        txaStatus.append("Server is started\n");
        txaStatus.append("IP Server : "+InetAddress.getLocalHost().getHostAddress()+"\n");
        txaStatus.append("Port : " + port + "\n");
        while(true){
            client = server.accept();
            new ClientConnect(this,client);//class ClientConnect for DataOutPut & DataInput Client <=> Server
        }
    } catch (IOException e) {
        txaStatus.append("Server cannot start\n");
                    JOptionPane.showMessageDialog(this,"Port busy","warning",JOptionPane.WARNING_MESSAGE);
                    System.exit(0);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T15:17:18.267

您不能在 GUI 线程中运行您的服务器，这将阻止程序接受任何其他输入。您需要将该`go()`方法移动到单独的线程中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:18:14.603

我想说，鉴于此分配的性质，假设您已经了解了多线程是安全的。这听起来像是尝试其中一些的好时机。

# user-interface - 在 x86 (XP) 中编译的白色 UI 自动化不适用于 W7（64 位）

> ID：12409468
> 
> 赞同：0
> 
> 时间：2012-09-13T15:13:11.537
> 
> 标签：user-interface, automation, white-framework

我正在尝试通过 White 控制打开文件对话框。我在 XP (x86) 中开发测试应用程序，它工作正常。应用程序写入选定的文件名组合框并单击打开按钮。

我尝试在 Windows7 中使用相同的测试应用程序，似乎 White 无法写入组合框，也无法单击打开按钮。这个是正常的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:50:51.013

是的，当您尝试从 64 位测试应用程序访问 32 位测试应用程序时，这是正常的。

我使用 xUnit 并将测试打包到类库中。将“平台目标”强制为 x86 可以解决问题 - 所有 White 功能都有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T18:16:45.393

我发现在 x86 中编译的 White 在 Win7 中运行时不会输入击键或点击。但是，它会检测并设置焦点在选定的 UIitem 上。

我解决了在 c# 中模拟 Windows 击键的问题。希望它对某人有用。

# map - 拉斐尔地图坐标

> ID：12409470
> 
> 赞同：0
> 
> 时间：2012-09-13T15:13:15.503
> 
> 标签：map, raphael, coords

有人可以告诉我如何更改此脚本的坐标（我在 Dreamweaver 中使用它）：http: [//jsfiddle.net/EVFEC/](http://jsfiddle.net/EVFEC/)。我用 Adob​​e illustrator 制作了一个 SVG 地图，我试图在这个脚本中复制现在的坐标，但它不起作用......为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T07:50:11.140

InkScape 等独立矢量图形编辑器将翻转 Y 轴，因为它们的坐标系不同。

一个[错误](https://bugs.launchpad.net/inkscape/+bug/170049)已提交到启动板上的 InkScape 问题跟踪论坛（尽管是否应将其视为错误尚有争议），并且该[问题](http://inkscape.13.n6.nabble.com/coordinate-system-flip-for-0-45-td2802529.html)是[众所周知](http://www.inkscapeforum.com/viewtopic.php?f=16&t=12048)的。

可以使用几种方法来解决这个问题（都解决了 InkScape 的使用）：

*   [在](http://www.cocos2d-iphone.org/forum/topic/14364)导入 InkScape 之前明确指定 SVG 文档的宽度和高度，如此处所建议
*   将所有绝对坐标值重写为相对值，如此[处提供](https://stackoverflow.com/questions/2737394/inkscape-moveto-coords-way-off-in-raphael)
*   等待[功能请求](https://askubuntu.com/questions/105590/how-can-i-set-top-left-corner-to-have-0-0-coordinates-in-inkscape)得到满足。[AskUbuntu](https://askubuntu.com/questions/105590/how-can-i-set-top-left-corner-to-have-0-0-coordinates-in-inkscape)有人建议它的目标是 0.49 版，但[路线图](http://wiki.inkscape.org/wiki/index.php/Roadmap#Inkscape_0.49)目前没有显示支持该主张的真实证据。
*   通过从转换矩阵的 Y 轴值中减去 InkScape 文档高度来补偿不规则性。

# c# - 使用 javascript 的 Asp.net 内容占位符

> ID：12409473
> 
> 赞同：1
> 
> 时间：2012-09-13T15:13:17.200
> 
> 标签：c#, javascript, asp.net, contentplaceholder, bxslider

我有一个涉及 javascript/jquery 和 asp:ContentPlaceHolders 的烦人问题，我似乎无法解决，而且我整天都在尝试。

我有一个带有 C# 的 ASP.NET 网站。首页 - Default.aspx，有一个母版页 - MasterPage.master。我也有一个控件 - bslider.ascx

我正在尝试实现[http://bxslider.com/上显示的图像滑块](http://bxslider.com/)

我控件中的代码如下所示

```
<script src="../scripts/jquery.js" type="text/javascript"></script>
<script src="../js/jquery.bxSlider.min.js" type="text/javascript">
    $(document).ready(function () {
        $('#slider1').bxSlider();
    });    
</script>

<div id="slider1">
    <div>Slide one content</div>
    <div>Slide two content</div>
    <div>Slide three content</div>
    <div>And so on...</div>
</div> 
```

Default.aspx中的相关代码如下：

```
<asp:Content ID="Content4" ContentPlaceHolderID="ContentPlaceHolder2" Runat="Server">
    <div class="sliderContainer">
        <uc4:BSlider ID="slider1" runat="server" />  
    </div>
</asp:Content> 
```

MasterPage.master中的相关代码如下：

```
<body>
<form id="form1" runat="server">
    <div id="ContentContainer">
        <asp:contentplaceholder id="ContentPlaceHolder2" runat="server">
            <uc3:headerLeft ID="Header2" runat="server" /> 
        </asp:contentplaceholder>
    </div>
</form>
</body> 
```

但是这不起作用，它会一个接一个地显示内部 div 的内容。我已经在标准的 .html 网页中对此进行了测试，并且它可以正常工作，因此它必须与 ASP.NET 方面有关。

任何人都可以帮助解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T11:56:02.657

我已经解决了这个问题！这是 JQuery 库和 BxSlider 库之间的冲突。

它已使用以下代码修复：

```
<script src="../scripts/jquery.js" type="text/javascript"></script>
<script src="../js/jquery.bxSlider.min.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function () {
    jQuery.noConflict();
    $('#slider1').bxSlider();
});    
</script> 
```

踢自己没有意识到这是一个冲突问题。我希望这可以帮助其他陷入与我类似情况的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T16:27:15.180

我想

```
<script src="../scripts/jquery.js" type="text/javascript"></script>
<script src="../js/jquery.bxSlider.min.js" type="text/javascript">
    $(document).ready(function () {
        $('#slider1').bxSlider();
    });    
</script> 
```

实际上位于 中`<uc3:headerLeft ID="Header2" runat="server" />`，如果是这样，您只是没有在页面上打印任何脚本。

```
<body>
<form id="form1" runat="server">
    <div id="ContentContainer">
        <asp:contentplaceholder id="ContentPlaceHolder2" runat="server">
            <uc3:headerLeft ID="Header2" runat="server" /> 
        </asp:contentplaceholder>
    </div>
</form>
</body> 
```

在上面来自母版页的代码中，您定义了默认内容。仅当您在当前执行的页面中**没有** 时才会打印它。`<asp:Content ContentPlaceHolderID="ContentPlaceHolder2"`尝试简单地将 headerLeft 移到 contentplaceholder 之外：

```
<div id="ContentContainer">
    <uc3:headerLeft ID="Header2" runat="server" /> 
    <asp:contentplaceholder id="ContentPlaceHolder2" runat="server">

    </asp:contentplaceholder>
</div> 
```

# c++ - C++ 无法创建目标文件，因为需要资源

> ID：12409474
> 
> 赞同：0
> 
> 时间：2012-09-13T15:13:20.593
> 
> 标签：c++, winapi, resources

好的，所以我有一个应该有自定义图标的 C++ Win32 程序。我已经创建了一个 resource.h 文件和一个 resource.rc 文件（我已经将它们编译成一个 resource.o 文件）。现在我需要编译我的 .cpp 文件并将我的源对象文件和资源对象文件链接到最终的可执行文件中。但是我的 cpp 看不到资源文件中的资源。我的意思是在编译阶段（g++ -c mine.cpp）它不知道我的自定义图标是什么。

这是我的 resource.h 文件：

```
 #define IDR_MYMENU 101
    #define IDI_MYICON 201

    #define ID_FILE_EXIT 9001
    #define ID_STUFF_GO 9002 
```

这是我的 resource.rc 文件：

```
 #include "a.h"

    IDR_MYMENU MENU
    BEGIN
        POPUP "&File"
        BEGIN
            MENUITEM "E&xit", ID_FILE_EXIT
        END

        POPUP "&Stuff"
        BEGIN
            MENUITEM "&Go", ID_STUFF_GO
            MENUITEM "G&o somewhere else", 0, GRAYED
        END
    END

    IDI_STAR ICON "star.ico" 
```

最后是 .cpp 文件：

```
#include <windows.h>

const char g_szClassName[] = "myWindowClass";

LRESULT CALLBACK WndProc (HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam) {
    switch (msg) {
        case WM_LBUTTONDOWN:
            MessageBox(NULL, "You pressed the left mouse button! :O", "MousePress", MB_OK | MB_ICONINFORMATION);
            break;      
        case WM_RBUTTONDOWN:
            MessageBox(NULL, "You pressed the right mouse button! :O", "MousePress", MB_OK | MB_ICONINFORMATION);
            break;
        case WM_MBUTTONDOWN:
            {
                char fileName[MAX_PATH];
                HINSTANCE hInstance = GetModuleHandle(NULL);

                GetModuleFileName(hInstance, fileName, MAX_PATH);
                MessageBox(hwnd, fileName, "The name of the program is:", MB_OK | MB_ICONINFORMATION);
            }
            break;
        case WM_CLOSE:
            DestroyWindow(hwnd);
            break;
        case WM_DESTROY:
            PostQuitMessage(0);
            break;
        default:
            return DefWindowProc(hwnd, msg, wParam, lParam);
    }
    return 0;
}

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow) {
    WNDCLASSEX wc;
    HWND hwnd;
    MSG Msg;

    wc.cbSize           = sizeof(WNDCLASSEX);
    wc.style            = 0;
    wc.lpfnWndProc      = WndProc;
    wc.cbClsExtra       = 0;
    wc.cbWndExtra       = 0;
    wc.hInstance        = hInstance;
    wc.hIcon            = LoadIcon(GetModuleHandle(NULL), MAKEINTRESOURCE(IDI_STAR));
    wc.hCursor          = LoadCursor(NULL, IDC_CROSS);
    wc.hbrBackground    = (HBRUSH)(COLOR_WINDOW+1);
    wc.lpszMenuName     = MAKEINTRESOURCE(IDR_MYMENU);
    wc.lpszClassName    = g_szClassName;
    wc.hIconSm          = (HICON)LoadImage(GetModuleHandle(NULL), MAKEINTRESOURCE(IDI_STAR), IMAGE_ICON, 16, 16, 0);

    if (!RegisterClassEx(&wc)) {
        MessageBox(NULL, "Registration Failed!", NULL, MB_ICONEXCLAMATION | MB_OK);
        return 0;
    }

    hwnd = CreateWindowEx(
        WS_EX_DLGMODALFRAME,
        g_szClassName,
        "This is a window!",
        WS_OVERLAPPEDWINDOW,
        CW_USEDEFAULT, CW_USEDEFAULT, 800, 450,
        NULL, NULL, hInstance, NULL     
    );

    if (hwnd == NULL) {
        MessageBox(NULL, "HWND failed!", NULL, MB_ICONEXCLAMATION | MB_OK);
        return 0;
    }

    ShowWindow(hwnd, nCmdShow);
    UpdateWindow(hwnd);

    while (GetMessage(&Msg, NULL, 0, 0) > 0) {
        TranslateMessage(&Msg);
        DispatchMessage(&Msg);
    }
    return Msg.wParam;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:22:20.383

我认为您需要将您的文件包含`resource.h`在 .cpp 文件中，因为它定义了您的资源标识符。

# php - Mysql IN 子句仅检索 1 行

> ID：12409477
> 
> 赞同：2
> 
> 时间：2012-09-13T15:13:34.083
> 
> 标签：php, mysql

编辑：谢谢 Baylor Rae 和 JvBerg - 您的回答/评论有助于解决问题。我不得不删除引号 - 我没有意识到。谢谢大家的帮助。

* * *

我正在尝试`where ownerid='$friend_ids'`使用该`IN`子句从“警报”表中选择所有数据。我遇到的问题（尽管有很多谷歌搜索和代码更改）是它只检索一行。

```
$fid=$ClassUsers->Friendids($user_id);
echo $fid; 
```

返回（如预期）1,2,3。

但是在尝试时：

```
$sql="SELECT * FROM alerts WHERE ownerid IN('$fid')";
echo mysql_num_rows($db->query($sql)); 
```

仅返回“1”行。

我的警报表：

![警报表](../Images/82845a2f285ebeacc9d863336538decc.png)

有谁知道为什么？或者如何解决这个问题？我昨天、前一天和今天几个小时都在谷歌上搜索并尝试不同的方式来查询这个问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:27:40.790

如果`$fid`是一个数组，你需要做类似的事情

```
$fid_sql = implode(','. $fid);
$sql="SELECT * FROM alerts WHERE ownerid IN( $fid_sql )"; 
```

请注意，如果它们是数据库中的整数字段，则此处的每个值都不需要单引号。

如果`$fid`is a string = "1, 2, 3"，那么您需要做的就是去掉`$fid`查询中的单引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T15:16:21.270

这取决于 $fid 的值：

```
$fid = '1, 2, 3';
$sql="SELECT * FROM alerts WHERE ownerid IN( $fid )";
echo mysql_num_rows($db->query($sql)); 
```

将返回所有 3 行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T15:23:55.920

尝试引用你的价值观

```
IN ('1', '2', '3') 
```

否则，它会查找字面上为“1、2、3”而不是“1”或“2”或“3”的值。

# java - 从可能（或不在）类路径中的文件中获取 InputStream

> ID：12409478
> 
> 赞同：2
> 
> 时间：2012-09-13T15:13:41.110
> 
> 标签：java, file, io

只是想知道哪种方法是读取可能位于类路径中的文件的最佳方式。

我唯一拥有的是文件路径的属性。举个例子：

*   文件路径=类路径：com/mycompany/myfile.txt
*   文件路径=文件：/myfolder/myfile.txt

从该属性加载 InputStream 的最佳方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T15:17:57.080

您可以使用[URL](http://docs.oracle.com/javase/6/docs/api/java/net/URL.html)方法 openStream，它会返回一个 InputStream，您可以使用它来读取您的文件。该 URL 将适用于 JAR 内部和外部的文件。请注意使用有效的 URL。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-11-10T13:13:07.293

您必须手动检测它。完成此操作后，以输入流的形式从类路径获取资源：

```
class Example {
    void foo() {
        try (InputStream in = Example.class.getResourceAsStream("/config.cfg")) {
            // use here. It'll be null if not found.
        }
    }
} 
```

`Example.class`注意：没有前导斜杠，它相对于包含您的文件的同一目录（如果需要，在 jar 内） 。使用前导斜杠，它是相对于类路径的根目录（jar 的根目录、'bin' 目录的根目录等）。

自然，没有办法获得输出流；通常，类路径中的大多数条目都是不可写的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T15:16:46.180

好吧，我只需使用这些`String`方法`startsWith(String sequence)`并检查它是否以*类路径*或*文件路径*开头，然后从那里调用适当的方法来完成工作：

```
String str=//extracted property tag
if(str.startsWith("filepath")) {
 //simply intialize as URL and get inputstream from that
 URL url =new URL(str);
 URLConnection uc = url.openConnection(); 
 InputStream is=uc.getInputStream();
} else if(str.startsWith("classpath")) {
//strip the classpath  and then call method to extract from jar
} 
```

请参阅[此处](https://stackoverflow.com/questions/12391805/cant-load-a-bufferedimage/12392034#12392034)以从 jar 中提取资源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-10T14:53:10.740

当使用弹簧`org.springframework.core.io.DefaultResourceLoader`是一个解决方案：

```
@Resource DefaultResourceLoader defaultResourceLoader;
defaultResourceLoader.getResource(path).getInputStream() 
```

# excel - 根据标题行 Excel 复制列格式

> ID：12409480
> 
> 赞同：2
> 
> 时间：2012-09-13T15:13:43.697
> 
> 标签：excel, excel-formula, vba

我想将 excel 表顶行的格式复制到每个选定列的选定单元格。

*   我不能在目标单元格中​​使用条件格式或任何公式，因为它们已经包含数据和不同的条件格式公式。
*   整列被分组。随着时间的推移，我可能会更改分组级别并且不想重新格式化整个工作表......顶行背景颜色应用了条件格式......使用以下公式。

    ```
    Function OutlineLev(inp As Integer) As Integer
    OutlineLev = Columns(inp).OutlineLevel
    End Function 
    ```

因此在示例中，第 1 行组级别 1 上的单元格背景为橙色，级别 2 为蓝色，L3 为绿色。（条件格式规则 `=OutlineLev(CELL("col",D1))=3`）

*   您可以看到第 2 行（黄色单元格）没有内容。最初我以为我会在该单元格中有一个公式，将顶行的格式复制到每列中的其他行...

本质上。我正在寻找一个宏/函数/公式，它将以某种方式复制顶行的背景（例如示例中的单元格 D1）。向下到列的其余部分（范围（例如 D3:D9）。

![在此处输入图像描述](../Images/22089974756c5c40b6c7ad0735f6f0eb.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T15:26:49.353

为整列设置格式将导致文件大小更小。为整列设置格式，然后使用条件格式规则覆盖第 2 行的格式，这似乎是一种更好的方法。这样您就可以完全避免使用 VBA，并且您的格式规则适用于整个列或整个工作表，这是最佳的。

选择整个工作表并创建一个使用公式的条件格式规则`=row()=2`并将其设置`fill`为`black`.

然后，您可以选择一整列并应用您想要的*整列*的任何格式。最后应用条件公式，因此黑色行#2 保留。

如果您只想为整列设置背景，那么只需设置它，然后仅更改 #1 行上的单元格的字体颜色...

最后它的工作量是相同的，因为您必须设置单元格的格式并运行宏，或者设置列的设置并更改顶部单元格的字体颜色......

仅供参考 - 如果您只想使第 2 行上的黑条扩展所用列的宽度（而不是整个工作表的宽度），则在选择整个工作表之前选择单元格 A1 并使用`=and(row()=2,a$1<>"")`条件公式的公式.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T19:29:45.797

如果您添加此代码

```
Sub ApplyFormatting()
    CopyFormat Range("A3:A10"), Range("A1")
    CopyFormat Range("B3:B10"), Range("B1")
    CopyFormat Range("C3:C10"), Range("C1")
    CopyFormat Range("D3:D10"), Range("D1")
End Sub

Sub CopyFormat(dest As Range, copyfrom As Range)
    dest.Interior.Color = copyfrom.Interior.Color
End Sub 
```

在工作表的代码区域，您有一个简单的工具，几乎可以满足您的需求。唯一的事情是你必须在`ApplyFormatting`某处调用子程序。例如，如果第一行的颜色取决于**同一工作表**某处某些单元格的值，则可以使用该工作表的 Worksheet_Change 事件：

```
Private Sub Worksheet_Change(ByVal Target As Range)
    ApplyFormatting
End Sub 
```

请注意，此事件不会直接由某些单元格的背景颜色更改触发，仅当单元格**值**更改时才会触发。在您的情况下，这可能就足够了，但是由于您忘记告诉我们您的第一行是如何精确格式化的，我只能猜测。

编辑：对您的评论：无需对范围规范进行硬编码，以上只是演示如何复制格式的示例。

将其应用于整个工作表的解决方案将如下所示：

```
Sub ApplyFormatting()
    Dim maxRow As Long, maxCol As Long, col As Long
    maxRow = Cells.SpecialCells(xlCellTypeLastCell).Row
    maxCol = Cells.SpecialCells(xlCellTypeLastCell).Column
    For col = 1 To maxCol
        CopyFormat Range(Cells(3, col), Cells(maxRow, col)), Cells(1, col)
    Next
End Sub 
```

您可能必须将其限制/调整到实际工作表中的行/列，但我希望您能大致了解。

# javascript - 加载 PDF 时如何自动播放声音？

> ID：12409489
> 
> 赞同：1
> 
> 时间：2012-09-13T15:14:04.510
> 
> 标签：javascript, pdf, audio, acrobat

对于一个研究项目，我们需要在加载和显示 PDF 时自动播放声音。按照整个网络上的说明，我将 Acrobat 9 中 PDF 的 JavaScript 编辑为以下内容：

```
/-------------------------------------------------------------
//-----------------Do not edit the XML tags--------------------
//-------------------------------------------------------------

//<Document-Level>
//<ACRO_source>init</ACRO_source>
//<ACRO_script>
/*********** belongs to: Document-Level:init ***********/
var bOpened;

function init()
{

    if(bOpened == "true")
    {
        // document already been opened
    }
    else
    {
        bOpened = "true";
        rm = this.getAnnotsRichMedia(this.pageNum)[0];
        if (!rm.activated)
            rm.activated=true;

        //The following alert works fine for the embedded mp3 and shows "[object AnnotRichMedia]"
        //app.alert(rm);
        rm.callAS("multimedia_volume", 0.75);
        rm.callAS("multimedia_play");
   }
}

// call init
init();
//</ACRO_script>
//</Document-Level> 
```

我在 PDF 上拖了一个音频控件来完成这项工作。控件的属性设置为：

*   启用时间：打开包含内容的页面
*   在以下情况下禁用：包含内容的页面已关闭
*   播放方式：在页面上播放内容

上面的 app.alert 工作正常，并警告嵌入的 mp3 对象，表明它已嵌入正常。我也可以使用屏幕上的控件播放mp3文件，表明编解码器等没有问题。但是，当文件加载时我听不到声音。

我在这里错过了什么吗？

# c++ - C++ 尝试使用 #ifndef 和 #include 语句

> ID：12409493
> 
> 赞同：0
> 
> 时间：2012-09-13T15:14:14.773
> 
> 标签：c++, include, compiler-errors, g++, ifndef

好的，所以我是一名 HTML/Javascript/PHP 专业人士，但我正在尝试学习 C++。我还是个新手，我有一个 C++ 编程项目，但我有错误。

包含 int main() 的文件是“football.cpp”，我有三个必须使用的类的 .h 和 .cpp 文件：Game、Team 和 Date。每个 Team 实例都包含一个 Games 向量，每个 Game 包含一个 Date。Date 不包含任何其他类的实例。

我正在尝试找到一种在文件顶部使用 #include 和 #ifndef 语句的方法，以便在编译时不会出错，但我还没有找到有效的组合。我不确定是否还有其他错误。这是我当前的#include 部分，不包括其他库：

足球.cpp

```
#include "game.h"
#include "team.h"
#include "date.h" 
```

团队.h

```
#ifndef __game_h_
#define __game_h_
#endif 
```

团队.cpp

```
#include "team.h"
#ifndef __game_h_
#define __game_h_
#endif 
```

游戏.h

```
#ifndef __date_h_
#define __date_h_
#endif 
```

游戏.cpp

```
#include "game.h"
#ifndef __date_h_
#define __date_h_
#endif 
```

日期.cpp

```
#include "date.h" 
```

我使用 Cygwin g++ 编译器，我用来编译它的行是：

```
g++ football.cpp team.cpp game.cpp date.cpp -o football.exe 
```

这是我得到的所有错误：（警告，文字墙）

```
$ g++ football.cpp team.cpp game.cpp date.cpp -o football.exe

In file included from football.cpp:9:0:
game.h:15:96: error: ‘Date’ has not been declared
game.h:24:1: error: ‘Date’ does not name a type
game.h:37:1: error: ‘Date’ does not name a type
football.cpp: In function ‘int main(int, char*)’:
football.cpp:65:70: error: no matching function for call to ‘Game::Game(std::string&, std::string&, int [5], int [5], Date&)’
game.h:15:1: note: candidates are: Game::Game(std::string, std::string, const int, const int*, int)
game.h:14:1: note: Game::Game()
game.h:10:12: note: Game::Game(const Game&)
In file included from team.cpp:4:0:
team.h:24:8: error: ‘Game’ was not declared in this scope
team.h:24:12: error: template argument 1 is invalid
team.h:24:12: error: template argument 2 is invalid
team.cpp: In member function ‘float Team::getStat3()’:
team.cpp:36:26: error: request for member ‘size’ in ‘((Team*)this)->Team::games’, which is of non-class type ‘int’
team.cpp:37:21: error: invalid types ‘int[int]’ for array subscript
team.cpp:37:50: error: invalid types ‘int[int]’ for array subscript
team.cpp:38:21: error: invalid types ‘int[int]’ for array subscript
team.cpp:38:47: error: invalid types ‘int[int]’ for array subscript
team.cpp:38:76: error: invalid types ‘int[int]’ for array subscript
team.cpp:38:106: error: invalid types ‘int[int]’ for array subscript
team.cpp: In function ‘bool compare2(Team, Team)’:
team.cpp:45:39: error: request for member ‘size’ in ‘t1.Team::games’, which is of non-class type ‘const int’
team.cpp:46:39: error: request for member ‘size’ in ‘t2.Team::games’, which is of non-class type ‘const int’
team.cpp:50:17: error: request for member ‘size’ in ‘t1.Team::games’, which is of non-class type ‘const int’
team.cpp:50:35: error: request for member ‘size’ in ‘t2.Team::games’, which is of non-class type ‘const int’
team.cpp:52:24: error: request for member ‘size’ in ‘t1.Team::games’, which is of non-class type ‘const int’
team.cpp:52:43: error: request for member ‘size’ in ‘t2.Team::games’, which is of non-class type ‘const int’
team.cpp: In function ‘bool compare3(Team, Team)’:
team.cpp:62:29: error: passing ‘const Team’ as ‘this’ argument of ‘float Team::getStat3()’ discards qualifiers
team.cpp:63:29: error: passing ‘const Team’ as ‘this’ argument of ‘float Team::getStat3()’ discards qualifiers
In file included from game.cpp:5:0:
game.h:15:96: error: ‘Date’ has not been declared
game.h:24:1: error: ‘Date’ does not name a type
game.h:37:1: error: ‘Date’ does not name a type
game.cpp: In constructor ‘Game::Game()’:
game.cpp:26:3: error: ‘date’ was not declared in this scope
game.cpp:26:15: error: ‘Date’ was not declared in this scope
game.cpp: At global scope:
game.cpp:29:94: error: ‘Date’ has not been declared
game.cpp:29:1: error: prototype for ‘Game::Game(std::string, std::string, int*, int*, int)’ does not match any in class ‘Game’
game.h:10:12: error: candidates are: Game::Game(const Game&)
game.h:15:1: error: Game::Game(std::string, std::string, const int*, const int*, int)
game.cpp:13:1: error: Game::Game()
game.cpp: In member function ‘int Game::getVisitingScore(int) const’:
game.cpp:80:10: error: ‘visitingScores’ was not declared in this scope
game.cpp: At global scope:
game.cpp:94:1: error: ‘Date’ does not name a type 
```

如果需要进一步澄清，将进行编辑，尽管我认为不会。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T15:17:31.143

我认为您误解了*include guards*的使用。

```
#ifndef __game_h_
#define __game_h_
// ...
#endif 
```

上述语句集通常仅用于描述*游戏*界面的头文件中，以防止多次包含该头文件。

但是在您的代码中，您已在标头*和*实现中添加了包含保护，而且您似乎混淆了实体 - 除非我误解了您的文件内容 - 例如在*team.h*中，您似乎具有包含保护*游戏*。

我的猜测是，您对包含守卫的滥用实际上是在阻止定义某些类型。

正如其他人所提到的，不要使用以双下划线开头的名称。

例如，将包含保护添加到您的*团队*标题中以防止该文件被多次包含，并为包含保护指定一个反映他们正在保护的模块的名称：

```
// team.h
#ifndef TEAM_H
#define TEAM_H

// ... code for team.h in here

#endif    // TEAM_H 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T16:42:50.623

看起来您在这里有两个问题：第一个是您在源文件中使用了包含防护；第二个是您包含文件的顺序错误。

首先，包括警卫。其他人已经回答了这个问题，所以我会简短。包含保护仅在头文件中使用，以防止多次声明类/类型。例如，如果我有：

**“游戏.h”**：

```
class Game {}; 
```

**“游戏.cpp”**：

```
#include "game.h"
#include "game.h"  // ERROR:  class Game is declared twice. 
```

为了解决这个问题，我会在“game.h”中使用包含警卫：

```
#ifndef GAME_H_INCLUDED
#define GAME_H_INCLUDED

class Game {};

#endif 
```

第一次包含该文件时，未定义 GAME_H_INCLUDED，因此声明了 Game。第二次是include，定义了GAME_H_INCLUDED *，*所以跳过了声明。

您遇到的问题是源文件中的包含防护将导致跳过所有实现：

**损坏的“game.cpp”**：

```
#include "game.h"
#ifndef GAME_H_INCLUDED  //  This is defined in "game.h" so everything will be
                         //  skipped until #endif is encountered.
#define GAME_H_INCLUDED

//  Implementation of Game class

#endif 
```

其次，您包含标题的顺序不正确。我猜你有这样的事情：

**“游戏.h”**

```
#ifndef GAME
#define GAME

class Game
{
    Date mDate;  // Member of type Date, declared in "date.h"
};

#endif 
```

**“日期.h”**

```
#ifndef GAME
#define GAME

class Date
{
};

#endif 
```

**“游戏.cpp”**

```
#include "game.h"  // ERROR:  Game relies on the Date class,
                   //         which isn't included yet
#include "date.h" 
```

要解决此问题，请交换“game.cpp”中包含的顺序：

**“游戏.cpp”**

```
#include "date.h"
#include "game.h"  // Fine, we know what a Date is now. 
```

或者在“game.h”中包含“date.h”：

**“游戏.h”**

```
#include "date.h"
#ifndef GAME
#define GAME

class Game
{
    Date mDate;  // Member of type Date, declared in "date.h"
};

#endif 
```

**“游戏.cpp”**

```
#include "game.h"  // Still fine, "date.h" is included by "game.h" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T15:17:07.613

您不需要 c++ 文件中的守卫

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T15:21:48.287

错误是您应该仅在头文件中使用包含防护

如果你有一个

```
BaseClass.h
struct HumanEntity { } 
```

然后让不同的类使用该基类，如果没有包含保护，您可能会遇到问题。这就是为什么你放一个

```
#ifndef __MYGUARD
#define __MYGUARD

... // here is your header code

#endif 
```

# visual-studio-2012 - Visual Studio 2012 中是否有用于 Format Document (Ctrl-E, D) 的选项来防止不正确的 javascript 缩进

> ID：12409495
> 
> 赞同：2
> 
> 时间：2012-09-13T15:14:24.243
> 
> 标签：visual-studio-2012, code-formatting

我的 aspx 文件有以下代码：

```
<script type="text/javascript">

    var doClientSearch =
    {
        title: `Client Search`
    }

    $(document).ready(function ()
    {
        setup();
    });

</script> 
```

在 Visual Studio 20120 中，我使用自动格式生成：

```
<script type="text/javascript">

    var doClientSearch =
    {
        title: `Client Search`
    }

              $(document).ready(function ()
              {
                  setup();
              });

    ... 

</script> 
```

其余的脚本也缩进。错误缩进后的所有功能似乎都使用该错误缩进作为“左”装订线。我已经通过了所有格式选项，似乎无法找到解决此问题的方法。我们开发团队的许多成员没有正确缩进代码（有些人根本没有缩进！）而且这段代码非常难以阅读，并且在没有 VS Format Document 命令的情况下需要时间来正确格式化。

我也欢迎其他适当的代码格式化策略。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T05:22:17.460

var 语句应该用 ; 结束。

我怀疑如果您关闭 var 语句，缩进会正常工作。对于这个特定的用例，它仍然需要您的开发团队创建语义正确的 JavaScript 代码。也许更频繁地击败你的开发团队会成功。:)

# ember.js - 如何使用 Ember 使用车把命令行生成的模板？

> ID：12409504
> 
> 赞同：1
> 
> 时间：2012-09-13T15:14:47.817
> 
> 标签：ember.js

我使用预编译模板有几个原因：

1.  性能（运行时无需重新编译）
2.  代码分离（比`<script>`在 JS 中嵌入标签和硬编码更干净）
3.  内容安全策略（这是用于扩展）。

基本上，我是`templates.js`通过[车把命令行实用程序](http://handlebarsjs.com/precompilation.html)生成的，基于几个`template.handlebars`文件。接下来我尝试通过以下循环将这些模板引入 Ember：

```
for (var name in Handlebars.templates) {
  var template = Handlebars.templates[name];
  Ember.TEMPLATES[name] = template;
} 
```

结果很奇怪：文本似乎已加载，但许多模板功能（例如`{{outlet}}`）不起作用。我怀疑这是因为 Handlebars 和 Ember-Handlebars 不是一回事。

我想有两个选择（和问题）：

1.  预编译 Ember 友好模板（如何通过命令行执行此操作？）
2.  将 Handlebars 模板正确导入 Ember（如何？）

**更新**：根据答案，Ember.Handlebars 与 Handlebars 不同，因此预编译不同。为 Ember 编写了一个简单的预编译脚本：[https ://gist.github.com/3723927](https://gist.github.com/3723927)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T16:57:19.770

是的，普通的 Handlebars 编译器编译为与 Ember.Handlebars 不同的 JavaScript，因此您不能使用 Ember 使用它的输出。

我不知道通过命令行运行 Ember.Handlebars 的方法，尽管原则上应该可以编写一些东西。

要了解如何使用 Ember.Handlebars 进行预编译，请查看[ember-rails](https://github.com/emberjs/ember-rails)的源代码- 它支持预编译。

# ruby-on-rails - 奇怪的幽灵物体出现

> ID：12409505
> 
> 赞同：1
> 
> 时间：2012-09-13T15:14:48.690
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid3

我目前有 3 个模型，UserModel (Devise)，一个 ArticleModel 和一个 CommentModel。

我和mongoid一起工作。

```
class Comment
  include Mongoid::Document
  field :body, type: String
  field :created_at, type: Time, default: DateTime.now
  belongs_to :article
  belongs_to :user
end

class Article
  include Mongoid::Document
  field :title, type: String
  field :body, type: String
  field :created_at, type: DateTime, default: DateTime.now
  has_many :comments
  belongs_to :user
end

class User
  include Mongoid::Document
  has_many :articles
  has_many :comments
end 
```

我的文章/show.html.haml

```
.comments-form
        .row
    .span12
        = form_for([@article, @article.comments.build]) do |f|
            = f.text_area :body, :class => "span12", :rows => "3", :placeholder => "Your comment here..."
            = f.submit nil, :class => "btn"
.comments
    - @article.comments.each do |comment|
        .comment{:id => "#{comment.id}"}
            .row
                .span2
                    = image_tag("260x180.gif", :class => "thumbnail")
                .span10
                    = comment.body 
```

我的comments_controller

```
class CommentsController < ApplicationController
  def new
    @article = Article.find(params[:article_id])
    @comment = @article.comments.create(params[:comment])
    @comment.user = current_user
    @comment.save
    redirect_to article_path(@article, notice: "Comment posted.")
  end
end 
```

现在在我的文章/节目中出现了一个带有 id 但完全为空的评论，我只是无法弄清楚这个对象来自哪里......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:15:51.233

您的问题出在这一行：

```
= form_for([@article, @article.comments.build]) do |f| 
```

当您调用 时`@article.comments.build`，您正在构建一个新评论并将其添加到`@article.comments`. 当您迭代您的评论时，您会看到您刚刚创建的空评论。

而不是`[@article, @article.comments.build]`，使用`[@article, Comment.new]`.

# c - 将简单的卡片计数功能重构为多个功能？

> ID：12409506
> 
> 赞同：0
> 
> 时间：2012-09-13T15:14:49.720
> 
> 标签：c

我刚开始从 Head First C 学习 C，但我很难理解如何将我的代码重构为多个函数，更具体地说，我不知道如何让函数工作并且对如何接受用户输入感到困惑.

我如何将像下面这样的功能合并到主要功能中？我可以使用哪些其他函数示例来重构？非常感谢！

```
void get_card_name(char *prompt, char *card_name) 
```

主功能

```
int main()
{
char card_name[3];
int count = 0;
while ( card_name[0] != 'X' ) {
    puts("Enter the card_name: ");
    scanf("%2s", card_name);
    int val = 0;
    switch(card_name[0]) {
    case 'K':
    case 'Q':
    case 'J':
        val = 10;
        break;
    case 'A':
        val = 11;
        break;
    case 'X':
        continue;
    default:
        val = atoi(card_name);
        if ((val < 1) || (val > 10)) {
            puts("I dont understand that value!");
            continue;
        }
    }
    if ((val > 2) && (val < 7)) {
        count++;
    } else if (val == 10) {
        count--;
    }
    printf("Current count: %i\n", count);
}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:16:32.903

重构时的通用答案是“如果它看起来很复杂或难以阅读，请尝试将其分解成更易于阅读（和理解）的小块。”。

在你的情况下，你有这个：

```
int main() {
  /* Initial state needed later on */

  /* Do some complicated stuff */
} 
```

要重构这一点，您需要找出初始状态的哪些部分需要保持接近您将要移入其自身功能的任何部分。在您的示例中，`card_name`and`count`都在复杂位中使用，而在其他任何地方都没有。因此，您可以并且应该将那些关闭复杂的位：

```
void do_card_stuff() {
  char card_name[3];
  int count = 0;

  /* Do some complicated stuff */
}

int main() {
  do_card_stuff();
} 
```

而且，你瞧，你已经重构了你的代码。如果您仍然认为卡片内容看起来很复杂，请尝试将其分解为更多部分：

```
int get_card_value(char card) {
  /* Do some complicated stuff */

  return value;
}

int do_card_stuff() {
  char card_name[3];
  int count = 0;
  int value;

  /* Loop */
    /* Get card value from user */
    value = get_card_value(card_name[0]);

}

int main() {
  do_card_stuff();
} 
```

只要坚持下去，直到把它分成更小的部分只是愚蠢的，你就完成了。另外，请记住，您分解的代码应该尽可能通用，因为这将使您以后可以重用此代码（可能在其他项目中）。

# twitter-bootstrap - 使用带有 jquery 验证和淘汰赛的 bootstrap popover

> ID：12409508
> 
> 赞同：3
> 
> 时间：2012-09-13T15:14:50.770
> 
> 标签：twitter-bootstrap, knockout.js, jquery-validate

我正在使用 Twitter Bootstrap 弹出框在 Knockout 驱动的表单上显示来自 jQuery 的验证错误。我已经让它显示弹出框很好，但是如果我必须在弹出框打开时重新加载数据（例如在获取时），它会永远留在那里。

我创建了一个 jsFiddle 来演示。可以在[这里](http://jsfiddle.net/bmccord/cmUtX/)找到。

要显示问题，只需启动 Fiddle，单击“添加礼物”，然后单击“提交”（应该会弹出错误），然后单击“重新加载”......错误将保留。

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:35:18.400

仅在重新加载功能中隐藏弹出窗口会不会太简单？

```
self.reload = function() {
    $(".popover").hide();
    ......
} 
```

[http://jsfiddle.net/unklefolk/cmUtX/5/](http://jsfiddle.net/unklefolk/cmUtX/5/)

# php - 我可以在其他情况下而不是在 Bootstrap 中初始化 Smarty 吗？

> ID：12409509
> 
> 赞同：3
> 
> 时间：2012-09-13T15:14:53.503
> 
> 标签：php, zend-framework, smarty

我在 Zend Framework 项目中实现了 smarty。我按照本教程[*Smarty 3 extension for Zend Framework*](http://gediminasm.org/article/smarty-3-extension-for-zend-framework)做到了这一点。我的问题是不会为每个模块初始化 smarty，所​​以我需要在 Bootstrap 中初始化 Smarty 之前知道模块的名称。

以下调用不起作用，因为`getRequest()`当时不存在：

```
Zend_Controller_Front::getInstance()->getRequest()->getModuleName() 
```

我知道我可以从中获取模块名称`$_SERVER['REQUEST_URI']`，但我不喜欢这个解决方案。

是否有另一种获取模块名称的方法，或者我可以在其他地方而不是在其他地方初始化 Smarty `Bootstrap`？也许在`dispatchLoopStartup()`方法上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T16:01:52.060

您可以创建一个控制器插件并在`preDispatch`触发时初始化 Smarty：

```
class App_Controller_Plugin_Smarty extends Zend_Controller_Plugin_Abstract
{
    public function preDispatch(Zend_Controller_Request_Abstract $request)
    {
        if ('mymodule' === $request->getModuleName()) {
            // Initialize Smarty
            // ...
        }
    }
} 
```

# objective-c - Xcode 基于 Debug 而不是 Release

> ID：12409510
> 
> 赞同：4
> 
> 时间：2012-09-13T15:14:57.817
> 
> 标签：objective-c, ios, debugging, release, build-settings

所以，我在尝试构建我的项目时遇到了这个问题。

目前，如果我在调试模式下运行项目，它运行良好，应用程序在设备上启动，我可以测试东西。

然而奇怪的部分是当我切换到发布版本并尝试在设备上构建时。当我按下运行按钮时，Xcode 正常构建，甚至弹出构建成功通知，但随后我收到此错误代码。

让我们调用我的应用程序 xxx

### 无法启动“xxx.app”

没有这样的文件或目录：

```
/Users/*my Name*/Library/Developer/Xcode/DerivedData/*Bunch of xcode folders*/Products/Release-iphoneos/xxx.app/xxx 
```

我进入 finder 并搜索了 xxx.app 并找不到它。*此外，在 /Users/ my Name* /下甚至不存在 Library 文件夹。

那么 xcode 在这里试图做什么，我应该怎么做才能解决这个问题？

**编辑：**我也尝试过清理项目并再次构建，错误代码仍然出现。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T15:23:42.883

我总是得到这个废话。

我所做`clean the project`的`close it`是，，，，，，然后。`shut down Xcode``start up Xcode``open project``build and run`

如果仍然不起作用，则找到“DerivedData”文件夹`Organizer->Projects`并将其删除，然后再次执行上述操作并重试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T01:56:52.900

我尝试创建一个新方案并将其设置为发布模式。这对我有用。但是，关闭 xCode 后重新启动似乎也可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T15:31:03.643

> 我进入 finder 并搜索了 xxx.app 并找不到它。此外，/Users/my Name/ 下甚至不存在 Library 文件夹。

它确实存在，但它隐藏在 Finder 中（从 OSX Lion 开始）（因为标准用户——而不是开发人员——不应该弄乱它）。

一些实用程序（在一个简单的命令行上）可以使其再次可见，但最简单的方法是使用 Finder 的“Go”菜单并选择“Go to folder...”（Command-Shift-G）。然后复制/粘贴您想要去的路径并进行验证。

# .net - Mono for Android Project 不适用于面向 .NET 框架 4 的库

> ID：12409512
> 
> 赞同：6
> 
> 时间：2012-09-13T15:15:04.717
> 
> 标签：.net, xamarin.android

我正在使用 Mono for Android 创建一个使用大量已经开发的类库的 Android 应用程序。当我将项目添加为对 android 应用程序的引用时，我收到一条警告说明

> 警告 1 无法引用项目“ProjectName”。引用的项目针对不同的框架系列 (.NETFramework)

我的项目的目标是 .NET Framework 4。我的 android 应用程序指定了“Minimum Android to target = Android 4.0”。

这是一个警告，但是当我将 using 语句添加到 android 应用程序中的 Activity.cs 类时，我得到了几个出现在引用库中的错误。然后，如果我删除 using 语句并重建，错误就会消失。

我是否必须更改 Mono for Android 项目中的某些设置才能引用面向 .NET Framework 4.0 的库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T09:41:02.173

您不能引用以 .Net 框架为目标的库。

如果您想重用该代码，您必须做的是创建一个新的 Android 类库项目并将现有 .Net 库中的文件添加为“链接”文件。这是跨框架重用代码的方法。

例如，请查看 GitHub 上的[RestSharp](https://github.com/restsharp/RestSharp)项目。您可以看到 MonoDroid、MonoTouch 等项目没有文件，但链接到公共源。

希望在您的情况下，您现有库中的所有代码都与 MonoDroid 框架的配置文件兼容。否则，您必须包含预处理器指令 - 这也可以在 RestSharp 中看到。

# mysql - MySQL 表锁

> ID：12409515
> 
> 赞同：1
> 
> 时间：2012-09-13T15:15:12.433
> 
> 标签：mysql, relational-database, database-normalization, database-deadlocks

当我注意到他们有奇怪的设计时，我被要求在 MySQL DB 上做一些 PHP 脚本来显示一些数据。他们希望执行一项研究，该研究需要为每个用户收集多达 2000 条记录，并且他们会自动为每个注册的用户创建一个新表。这是现阶段的一项试点研究，因此他们有大约 30 个表格，但他们应该有 3000 个用户进行真正的研究。

我想建议将所有这些都收集在一个表中，但由于在研究期间该数据库每分钟可能有大约 1500 次 INSERT，所以我想先在这里问这个问题。这会导致 MySQL 中的表锁吗？那么，是一张每分钟插入 1500 条、最大大小为 6,000,000 条记录的表，还是每分钟 30 条插入、最大大小为 2000 条记录的 3000 张表。我想建议第一个选项，但我想确保它不会引起任何问题。我读到 InnoDB 有行级锁。那么，与一个表选项相结合会有更好的性能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:24:55.643

这是一个巨大的问题。根据我的经验，性能并不能仅通过表大小来准确衡量。它归结为设计。你有主键和索引吗？是否过度索引？话虽如此，我还发现几乎每次去 DB 一次都比几十次要快。单表（列）有多大？您要保存什么样的数据（大于 4000K？）。您可能需要创建一些原型来查看最适合您的。我最能推荐的是你仔细判断你正在收集的数据的大小并相应地分配，创建索引（但不要太多，不要过度索引），然后测试。

# linux - 用于重复 URL 请求的 Curl 命令

> ID：12409519
> 
> 赞同：90
> 
> 时间：2012-09-13T15:15:19.390
> 
> 标签：linux, url, curl

重复命中 URL x 次的 linux 命令的语法是什么。我不需要对数据做任何事情，我只需要在浏览器中复制点击刷新 20 次。

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2016-05-02T21:42:27.280

您可以使用带有虚拟查询字符串的 URL 序列替换（如果您想使用 CURL 并节省一些击键）：

```
curl http://www.myurl.com/?[1-20] 
```

如果您的 URL 中有其他查询字符串，请将序列分配给一次性变量：

```
curl http://www.myurl.com/?myVar=111&fakeVar=[1-20] 
```

查看手册页上的 URL 部分：[https ://curl.haxx.se/docs/manpage.html](https://curl.haxx.se/docs/manpage.html)

* * *

## 回答 #2

> 赞同：88
> 
> 时间：2012-09-13T15:18:02.400

```
for i in `seq 1 20`; do curl http://url; done 
```

或者，如果您想获取时间信息，请使用`ab`：

```
ab -n 20 http://url/ 
```

* * *

## 回答 #3

> 赞同：80
> 
> 时间：2012-09-13T15:23:01.667

您可能对[Apache Bench](http://www.petefreitag.com/item/689.cfm)工具感兴趣，该工具主要用于进行简单的负载测试。

例子 ：

```
ab -n 500 -c 20 http://www.example.com/ 
```

> n = 请求总数，c = 并发请求数

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-10-31T05:33:48.923

如果你想在下次执行 cron 之前添加一个间隔，你可以添加一个 sleep

> 我在`{1..100}`；做 echo $i && curl " [http://URL](http://URL) " >> /tmp/output.log && sleep 120; 完毕

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-04-17T03:26:13.923

`FOR`您可以使用与 Linux 和 Mac 兼容的任何 bash 循环结构，例如, with。

[https://tiswww.case.edu/php/chet/bash/bashref.html#Looping-Constructs](https://tiswww.case.edu/php/chet/bash/bashref.html#Looping-Constructs)

在您的特定情况下，您可以定义`N`迭代，其中是一个定义您想要执行`N`多少次的数字。`curl`

```
for n in {1..N}; do curl <arguments>; done 
```

前任：

```
for n in {1..20}; do curl -d @notification.json -H 'Content-Type: application/json' localhost:3000/dispatcher/notify; done 
```

# hyper-v - 将主机服务器添加到 SCVMM 服务器

> ID：12409524
> 
> 赞同：0
> 
> 时间：2012-09-13T15:15:43.790
> 
> 标签：hyper-v

当我尝试将主机服务器添加到 scvmm 服务器时，我收到了这条消息

联系服务器时访问被拒绝。

1.  验证指定的用户帐户是否对 具有管理权限。
2.  验证是否为管理员组启用了 DCOM 访问、启动和激活权限。使用 dcomcnfg.exe 修改权限，然后重试操作。

编号：406

用户帐户在两台服务器上都具有管理权限。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:05:57.293

它需要该主机/虚拟机所在域的组中的管理权限。请检查该用户在域上的权限。

# iphone - UINavigationBar 自定义标题视图

> ID：12409525
> 
> 赞同：0
> 
> 时间：2012-09-13T15:15:47.660
> 
> 标签：iphone, objective-c, uinavigationcontroller, uinavigationbar, uiappearance

我正在使用 iOS 5`UINavigationBar`的`UIAppearance`协议来自定义我的所有导航栏。

这是我的自定义功能：

```
- (void)customizeApperance
{
    [[UINavigationBar appearance] setTintColor:[UIColor clearColor]];
    [[UINavigationBar appearance] setAlpha:0.7];
    UIImageView *titleView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"title.png"]];
    [[UINavigationBar appearance] setTitleView:titleView];
} 
```

我有两个问题：

*   首先是颜色不是`clearColor`黑色而是黑色。有什么建议么？

*   标题视图根本没有出现。[Ray Wenderlich](http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5)`[[rootViewController navigationItem] setTitleView: [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"miniLogo.png"]]]`通过添加 a: in来展示如何做到这一点`applicationDidFinishLaunching`。但是这样做的问题是标题视图只会被添加到根视图控制器中。我正在使用 a`UINavigationController`并且当我厌倦了`rootViewController`用`navigationController`（AppDelegate 中我的导航控制器的名称）替换时，我根本看不到标题视图。我该如何解决？为什么它不起作用`customizeApperance()`？使用外观的全部意义不就是只创建一次标题视图（就像我在函数上方所做的那样）并在所有导航栏中使其全局化吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T17:20:04.820

`[UIColor clearColor]`是完全透明的颜色 (alpha = 0)。将其设置为浅色会使（黑色）背景发光。也许你想要`[UIColor whiteColor]`？

`titleView`是 的一个属性`UINavigationItem`，每个视图控制器都有自己的`navigationItem`. 因此，您不能全局设置标题视图。`UINavigationBar`但是您可以使用外观协议设置背景图像，这可能会有所帮助：

```
[[UINavigationBar appearance] setBackgroundImage:image forBarMetrics:UIBarMetricsDefault]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T16:45:24.020

你试过`titleView.opaque = NO;`吗？如果设置为`YES`（即默认情况下，因为您使用的是 initWithImage:)，绘图系统将假定您的视图填充了它的整个边界，并且不会费心绘制任何与它的框架重叠的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-22T13:30:48.123

setTitleView: 是 NavigationItem 上的一个方法。但是你在导航栏上调用它

# objective-c - 什么是 NSTaggedDate？

> ID：12409528
> 
> 赞同：7
> 
> 时间：2012-09-13T15:15:52.530
> 
> 标签：objective-c, cocoa, quartz-composer

我有一个我无法理解的错误，这是在我想释放 NSMutableDictionary 中的所有对象时发生的。

它发生在一个名为**body**的自定义对象上，输出为：

```
-[__NSTaggedDate body]: unrecognized selector sent to instance 0xffffffffffffffff 
```

我在互联网上发现了关于它的非常糟糕的信息。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-13T15:24:15.333

那是Apple的私人课程。当您弄乱内存管理时，通常会发生此类错误。

你为什么要释放字典中的所有对象？当您将对象添加到字典（或数组）时，字典将保留它（获取所有权）。当您从字典中删除对象时，它将被释放，您不必这样做。

您是否已经考虑使用[ARC](http://www.google.hu/url?sa=t&rct=j&q=arc%20apple&source=web&cd=2&cad=rja&ved=0CCQQFjAB&url=http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/_index.html&ei=efpRUMWkFebN4QT8hoAQ&usg=AFQjCNE17Vky3OsDv6jcESIVf1Hu6qB8aw)？它使内存管理变得更加容易。您不必再担心保留和释放对象。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-13T15:28:24.710

这是一个内部无证可可类。但是你并不关心它，因为它并不是真正发生的事情，它可能是出于复杂的解释和无关的原因而发生的红鲱鱼。

看报的地址：0xffffffffffffffff。这是一个没有意义的价值。如果不是因为那个红鲱鱼，你应该有一个分段错误。

您出于某种原因将消息发送`body`到无效指针（可能是某处的某些损坏的数据？）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-13T15:27:46.797

不知道这个类，但它可能是一个私有类（我敢打赌，它是使用“标记指针”技巧的 NSDate 对象的内部表示，但我只是猜测）。

无论如何，您的崩溃不是发生在调用的对象*上*`body`，而是在调用调用的方法**时**`body`发生。崩溃可能是由于代码中的内存管理不善导致内存损坏

*   您应该在调试中运行您的应用程序时激活 Zombies 以帮助您跟踪过度释放的对象
*   您通常不必保留和释放`NSDictionary`自己的对象，因为容器类喜欢`NSArray`并`NSDictionary`保留它们所持有的对象，并在从它们中删除对象时释放它们。所以我不明白为什么你*“想要释放 NSMutableDictionary 中的所有对象”*：你只需要调用它就完成`removeAllObjects`了`NSDictionary`，不需要自己调用`release`对象（你也不需要`retain`调用在字典中添加对象时）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-02-07T11:26:45.843

每当您尝试将一种数据类型设置为另一种数据类型时，例如“如果您直接将日期组件分配给 UIlabel 的文本”，在这种情况下，我就会发生

```
[toDateLabel setText:[tempArr lastObject]];                                   // Cause

[toDateLabel setText:[NSString stringWithFormat:@"%@",[tempArr lastObject]]]; // Solution 
```

# c# - 如何防止或阻止关闭 WinForms 窗口？

> ID：12409529
> 
> 赞同：68
> 
> 时间：2012-09-13T15:15:57.947
> 
> 标签：c#, winforms

如何通过显示来防止窗口关闭`MessageBox`？（技术：`WinForms`与`C#`）

当关闭事件发生时，我希望运行以下代码：

```
private void addFile_FormClosing( object sender, FormClosingEventArgs e ) {
    var closeMsg = MessageBox.Show( "Do you really want to close?", "Warning", MessageBoxButtons.YesNo, MessageBoxIcon.Question );

    if (closeMsg == DialogResult.Yes) {
        //close addFile form
    } else {
        //ignore closing event
    }
} 
```

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2012-10-13T13:49:02.367

```
private void Form1_FormClosing(object sender, FormClosingEventArgs e) {
    var window = MessageBox.Show(
        "Close the window?", 
        "Are you sure?", 
        MessageBoxButtons.YesNo);

    e.Cancel = (window == DialogResult.No);
} 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-09-13T15:18:15.247

捕获 FormClosing 事件并设置`e.Cancel = true`

```
private void AdminFrame_FormClosing(object sender, FormClosingEventArgs e)
{
    var res = MessageBox.Show(this, "You really want to quit?", "Exit",
            MessageBoxButtons.YesNo, MessageBoxIcon.Warning, MessageBoxDefaultButton.Button2);
    if (res != DialogResult.Yes)
    {
      e.Cancel = true;
      return;
    }
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-03-15T08:27:12.780

一个特殊的转折可能是始终阻止用户关闭表单：

```
private void Frm_FormClosing(object sender, FormClosingEventArgs e)
{
    e.Cancel = (e.CloseReason == CloseReason.UserClosing); 
    // disable user closing the form, but no one else
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-09-13T15:17:17.490

在您的`OnFormClosing`事件中，您可以显示对话框并且`if`答案为 false（不显示），然后将`Cancel`属性设置`EventArgs`为`true`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-12-01T10:35:33.847

为了防止或阻止在特定情况下关闭表单，您可以使用以下策略：

```
private void MyForm_FormClosing(object sender, FormClosingEventArgs e)
{

    if (FLAG_CONDITION == true)
    {
        MessageBox.Show("To exit save the change!!");
        e.Cancel = true;
    }

} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-13T15:20:07.100

直接来自[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.closing)：

```
private void Form1_Closing(object sender, System.ComponentModel.CancelEventArgs e)
{
   // Determine if text has changed in the textbox by comparing to original text. 
   if (textBox1.Text != strMyOriginalText)
   {
      // Display a MsgBox asking the user to save changes or abort. 
      if(MessageBox.Show("Do you want to save changes to your text?", "My Application",
         MessageBoxButtons.YesNo) ==  DialogResult.Yes)
      {
         // Cancel the Closing event from closing the form.
         e.Cancel = true;
         // Call method to save file...
      }
   }
} 
```

在您的情况下，您不需要做任何事情来明确关闭表单。除非您取消它，否则它将自动关闭，因此您的代码将是：

```
private void addFile_FormClosing( object sender, FormClosingEventArgs e ) {
    var closeMsg = MessageBox.Show( "Do you really want to close?", "Warning", MessageBoxButtons.YesNo, MessageBoxIcon.Question );

    if (closeMsg == DialogResult.Yes) {
        // do nothing
    } else {
        e.Cancel = true;
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-24T04:38:02.590

```
private void addFile_FormClosing( object sender, FormClosingEventArgs e ) {
var closeMsg = MessageBox.Show( "Do you really want to close?", "Warning", MessageBoxButtons.YesNo, MessageBoxIcon.Question );

if (closeMsg == DialogResult.Yes) {
    e.Cancel = false;
} else {
    e.Cancel = true;
} 
```

e.Cancel 是启用或禁用表单关闭事件。例如，`e.Cancel = true`将禁用您关闭。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-11-28T16:23:29.187

您可以在关闭表单时运行您想要的任何代码，然后隐藏表单而不是关闭它以防止它被释放

```
yourFormName.FormClosing += (s, e) =>
{
   // any code you want
   yourFormName.Hide(); // this hides the form
   e.Cancel = true;  // this cancels the close event, you can put any boolean exprission 
}; 
```

# android - achartengine：getZoomRate 总是返回 1.5？

> ID：12409531
> 
> 赞同：1
> 
> 时间：2012-09-13T15:16:04.977
> 
> 标签：android, charts, zooming, achartengine

我有一个 TimeChart，我试图在更改时保存缩放率。因此，我在图表中添加了 ZoomListener：

```
 public void showChart()
        {
            mChartView = ChartFactory.getTimeChartView(this.context, this.mDataset,
 this.mRenderer, TrackedValue.DATE_FORMAT_USER);

            this.layout.addView(mChartView);

            mChartView.setZoomRate(prefs.getChartZoomRate());
            Log.d("showChart", "Set: "+prefs.getChartZoomRate());

            mChartView.addZoomListener(new ZoomListener() {

                @Override
                public void zoomReset() {
                    // TODO Auto-generated method stub

                }

                @Override
                public void zoomApplied(ZoomEvent e) {              
                    prefs.setChartZoomRate(e.getZoomRate());
                    Log.d("zoomApplied", "Save: "+String.valueOf(e.getZoomRate()+", isZoomIn: "+e.isZoomIn()));
                }
            }, true, true);
        } 
```

当我看到图表并按下放大按钮时，我的日志输出是：

```
zoomApplied Save: 1.5, isZoomIn: true 
```

当我缩小（通过缩放按钮）时，日志输出为：

```
zoomApplied Save 1.5, isZoomIn: false 
```

无论我多久放大或缩小，我都不明白为什么 e.getZoomRate() 总是返回 1.5，不管实际的缩放率是多少……虽然 e.isZoomIn() 工作正常。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:44:27.510

我刚刚尝试了 AChartEngine 演示程序并调用了下面的行，它显示了正确的 1.2 值：

```
 mChartView.setZoomRate(1.2f); 
```

请确保您设置了正确的值。

# php - 有效地删除可能不包含特定单词的子字符串 -

> ID：12409537
> 
> 赞同：0
> 
> 时间：2012-09-13T15:16:22.033
> 
> 标签：php, regex, regex-negation, performance, regex-lookarounds

我尝试使用 php 将一些可怕的无效 html 代码映射到我以后需要的 xml 结构。这工作得很好，但总有一些我无法处理的部分。所以决定是，只删除该代码，以便 xml 保持有效。这就是它的样子。

```
<body>
    <item>abc</item>
    <item>def</item>
    unparsable rest
</body> 
```

所以目标是找到一个解决方案（可能是正则表达式，但我愿意接受任何解决方案）来删除“无法解析的其余部分”。

我尝试在这个正则表达式中使用 preg_replace

```
/<\/item>(((?!item).)*)\s*<\/body>/iU 
```

它工作得很好，完全匹配我想要在 $1 中拥有的部分，最后一个 和 之间的所有东西，但是由于 xmls 非常大，计算只是在几毫秒后崩溃。我知道正则表达式在做负前瞻方面不太好，但我不认为它那么糟糕。

所以需要一个更有效的解决方案。不幸的是，我不能使用 strrpos，因为在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-01-23T08:54:41.917

您的正则表达式模式中有一个经过[*调和的贪婪令牌*](https://stackoverflow.com/a/37343088/3832970)。它本质上很慢，请参阅我链接到的答案中的“性能问题”部分。

因此，您当前的正则表达式（我更喜欢在不带`U`和带`s`修饰符 as的情况下编写）在 231 steps`~</item>(((?!item).)*?)\s*?</body>~is`内[匹配您的输入字符串](https://regex101.com/r/aFMySX/1)。

`\s*`注意和这里没有太大的语义差异，`\s*?`因为之前没有其他量化模式`</body>`。`\s*`，贪婪模式，在这种情况下是首选。

让我们[展开](http://www.softec.lu/site/RegularExpressions/UnrollingTheLoop)模式并替换`((?!item).)*?`为`[^i]*(?:i(?!tem)[^i]*)*`. `~</item>([^i]*(?:i(?!tem)[^i]*)*)\s*</body>~is` [在 117 步内匹配您的](https://regex101.com/r/aFMySX/2)输入。

对于字符串来说，这仍然是相当多的。后面的空格`</item>`可以与*所有格*匹配，`\s*+`以减少对字符串该部分的回溯访问。显示`~</item>\s*+([^i]*(?:i(?!tem)[^i]*)*)\s*</body>~is`了改进，现在匹配字符串[需要 89 步](https://regex101.com/r/aFMySX/3)，并且仅`unparsable rest`落在第 1 组值中。

不幸的是，我们不能在这里玩太多回溯，因为您想从 Group 1 值中删除尾随空格。

如果您想匹配所有之间`</item>`且不`</body>`包含`<item>`内部的，则模式将如下所示`~</item>\s*+([^<]*(?:<(?!item>)[^<]*)*)\s*</body>~is`，请参阅[正则表达式演示](https://regex101.com/r/aFMySX/4)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-23T10:14:34.380

检查每一行以 '<' 开始并以 '>' 结束：

```
$t ='<body>
    <item>abc</item>
    <item>def</item>
    unparsable rest
</body>';

// break the string into lines
$filtered = array_filter(explode("\n", $t), function($line) {
    // each line
    $line = trim($line); //ignore white spaces
    return $line[0] == '<' && substr($line, -1) == '>';
});
// rebuild the string
$result = implode("\n", $filtered);
echo $result; 
```

演示：[https ://3v4l.org/Mt5eG](https://3v4l.org/Mt5eG)

# android - Android：如何获取按名称或按日期降序排列的目录列表？

> ID：12409539
> 
> 赞同：10
> 
> 时间：2012-09-13T15:16:33.407
> 
> 标签：android, file

我能够做到这一点：

```
 File images = new File(path);  
    File[] imageList = images.listFiles(new FilenameFilter(){  
        public boolean accept(File dir, String name)  
        {  
            return name.endsWith(".jpg");
        }  
    }); 
```

我从stackoverflow的答案中复制了！

有没有办法列出文件好的“目录”（文件夹）并按字母倒序列出？......并通过相反的日期？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-13T15:27:26.170

```
final File[] sortedFileName = images.listFiles()

if (sortedFileName != null && sortedFileName.length > 1) {
        Arrays.sort(sortedFileName, new Comparator<File>() {
             @Override
             public int compare(File object1, File object2) {
                return object1.getName().compareTo(object2.getName());
             }
    });
} 
```

用于`Array.sort()`比较文件的名称。

**编辑：** 使用此代码按日期排序

```
final File[] sortedByDate = folder.listFiles();

if (sortedByDate != null && sortedByDate.length > 1) {
        Arrays.sort(sortedByDate, new Comparator<File>() {
             @Override
             public int compare(File object1, File object2) {
                return (int) ((object1.lastModified() > object2.lastModified()) ? object1.lastModified(): object2.lastModified());
             }
    });
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-09-11T06:22:30.377

你可以使用下面的代码。为我工作。

```
final File[] files= file.listFiles();
if (files != null && files.length > 1) {
            Collections.sort(Arrays.asList(files), new Comparator<File>() {
                public int compare(File o1, File o2) {
                    long lastModifiedO1 = o1.lastModified();
                    long lastModifiedO2 = o2.lastModified();

                    return (lastModifiedO2 < lastModifiedO1) ? -1 : ((lastModifiedO1 > lastModifiedO2) ? 1 : 0);
                }
            });
        } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-01-26T20:16:30.793

我遇到了一个例外

IllegalArgumentException：比较方法违反了它的一般约定！

所以我用了这个，它工作正常：

```
Arrays.sort(filesList, new Comparator<File>() {
   @Override
   public int compare(File a, File b) {
      if(a.lastModified() < b.lastModified() )
         return 1;
      if(a.lastModified() > b.lastModified() )
         return -1;
      return 0;
}}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-13T15:22:41.287

指针：

```
File.isDirectory()

File.lastModified() 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-06T08:53:05.153

对于基于文件名的排序，添加

```
object1.getName().toLowerCase(Locale.getDefault()) 
```

代替

```
object1.getName() 
```

避免由区域设置更改和大写/小写文件名引起的排序问题

```
 final File[] sortedFileName = images.listFiles();

                if (sortedFileName != null && sortedFileName.length > 1) {
                    Arrays.sort(sortedFileName, new Comparator<File>() {
                        @Override
                        public int compare(File object1, File object2) {
                            return object1.getName().toLowerCase(Locale.getDefault()).compareTo(object2.getName().toLowerCase(Locale.getDefault()));
                        }
                    });
                } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-08-02T17:11:01.990

如果你喜欢简洁：

```
File[] files = folder.listFiles();
Arrays.sort(files, (a, b) -> Long.compare(b.lastModified(), a.lastModified())); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-18T13:22:09.680

如果您想明智地对日期进行排序，请选择下面的代码，如果您想要名称，那么上面已经有答案了:)

```
File f = new File("/home/myfiles");
File [] files = f.listFiles();
Arrays.sort( files, new Comparator(){
public int compare(Object o1, Object o2) {

    if (((File)o1).lastModified() > ((File)o2).lastModified()) {
        return -1;
    } else if (((File)o1).lastModified() < ((File)o2).lastModified()) {
        return +1;
    } else {
        return 0;
    }
}
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-04-04T11:36:04.363

在反向模式下按最后修改日期排序文件的正确方法是：

```
Arrays.sort(Files, LastModifiedFileComparator.LASTMODIFIED_REVERSE); 
```

对于此说明，您将需要来自 org.apache 的 commons.io 库，您可以从[此处下载](http://java2s.com/Code/Jar/c/Downloadcommonsio201jar.htm)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-12-02T04:59:06.687

我通过使用这个解决了这个问题

```
final File[] sortedByDate = folder.listFiles();

if (sortedByDate != null && sortedByDate.length > 1) {
        Arrays.sort(sortedByDate, new Comparator<File>() {
             @Override
             public int compare(File object1, File object2) {
                return (int) ((object1.lastModified() > object2.lastModified()) ? 0: 1);
             }
    });
} 
```

我返回 0 和 1 的`lastModified()`值来解决我的问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-05-08T11:29:45.877

**按更改日期**对文件数组进行排序的一种快速而优雅的方法是：

```
 Arrays.sort(fileList, new Comparator<File>() {
            @Override
            public int compare(File f1, File f2) {
                return Long.compare(f1.lastModified(), f2.lastModified());
                // For descending
                // return -Long.compare(f1.lastModified(), f2.lastModified());
            }
        }); 
```

要对文件数组进行排序，**按名称**是：

```
 Arrays.sort(fileList, new Comparator<File>() {
            @Override
            public int compare(File f1, File f2) {
                return f1.compareTo(f2);
                // For descending
                // return -f1.compareTo(f2);
            }
        }); 
```

# ruby-on-rails - 如何暂时禁用 Rack-Mini-Profiler？

> ID：12409544
> 
> 赞同：51
> 
> 时间：2012-09-13T15:16:49.550
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rack-mini-profiler

我在 Rails 中使用 rack mini profiler 很好，但是在一些编码会话期间，特别是在我处理许多不同的客户端代码时，它会妨碍我。（主要在我的客户端调试工具网络图等）

我正在尝试使用之前的过滤器将其关闭，这也用于查看用户是否有权查看个人资料，但“取消授权”似乎对我没有任何作用。这是我的代码，称为前置过滤器：

```
def miniprofiler  
 off = true
 if off || !current_user
  Rack::MiniProfiler.deauthorize_request
  return
 elsif current_user.role_symbols.include?(:view_page_profiles)    
  Rack::MiniProfiler.authorize_request
  return
 end
 Rack::MiniProfiler.deauthorize_request
end 
```

我也知道有一个设置“Rack::MiniProfiler.config.authorization_mode”，但我找不到有关可能设置的文档，也没有看到它在代码中使用？现在它告诉我：allow_all，但是：allow_none 也不做任何事情。

即使我可以在开发环境文件中临时设置一个值并重新启动服务器，这也符合我的目的。

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-09-20T06:20:29.087

获取最新信息并输入：

`http://mysite.com?pp=disable`

完成后输入

`http://mysite.com?pp=enable`

查看`?pp=help`所有选项：

```
将以下内容附加到您的查询字符串：

  pp=help : 显示这个屏幕
  pp=env : 显示机架环境
  pp=skip : 跳过此请求的迷你分析器
  pp=no-backtrace ：不收集所有执行的 SQL 的堆栈跟踪（粘性，使用 pp=normal-backtrace 启用）
  pp=normal-backtrace (*) : 从所有执行的 SQL 中收集堆栈跟踪并正常过滤
  pp=full-backtrace ：为执行的 SQL 启用完整的回溯（使用 pp=normal-backtrace 禁用）
  pp=sample : 示例堆栈跟踪并返回隔离大量使用的报告（实验最适合堆栈跟踪 gem）
  pp=disable ：禁用此会话的分析
  pp=enable ：启用此会话的分析（如果以前禁用）
  pp=profile-gc：对该请求执行 gc 分析，分析请求生成的 ObjectSpace（仅限 ruby​​ 1.9.3）
  pp=profile-gc-time：对此请求执行内置 gc 分析（仅限 ruby​​ 1.9.3）

```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-05-24T19:59:47.257

您也可以使用`Alt+p`来切换。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-03-12T19:00:02.997

如果您希望最初禁用探查器，然后按需激活...在初始化程序文件中添加预授权回调，例如：

```
Rack::MiniProfiler.config.pre_authorize_cb = lambda {|env| ENV['RACK_MINI_PROFILER'] == 'on'} 
```

然后在您的应用程序控制器中，添加一个查找 pp 参数的 before_filter

```
before_filter :activate_profiler
def activate_profiler
  ENV['RACK_MINI_PROFILER'] = 'on' if params['pp']
  ENV['RACK_MINI_PROFILER'] = 'off' if params['pp'] == 'disabled'
end 
```

您的环境最初不会设置 RACK_MINI_PROFILER，但如果您想打开它，您可以将 ?pp=enabled 附加到您的网址上。然后您可以稍后再次禁用（ pp=disabled 只会在当前会话中将其关闭，但将 ENV 变量设置为 off 将完全杀死它，直到您强制重新打开它）。

# codeigniter - 扩展 CI_Controller / 间接修改重载属性

> ID：12409546
> 
> 赞同：1
> 
> 时间：2012-09-13T15:16:59.013
> 
> 标签：codeigniter, continuous-integration, php

CI 社区似乎对此没有答案（或者可能很明显，它看起来像一个菜鸟问题？），所以我在这里问。

我已经看到这种错误很长时间了（错误消息如下），但是我一直使用[这种“肮脏”的解决方法](http://codeigniter.com/forums/viewthread/178540/#851803)。现在我不想再编辑核心 CI 代码了，我知道必须有一个优雅的解决方案。

这是设置。

在我的应用程序/配置/路由中，我有这个

```
$route['default_controller'] = "dispatcher"; 
```

application/controllers/ 中的 Dispatcher 类定义如下：

```
class Dispatcher extends MY_Controller {

 function __construct() {
  parent::__construct();
  $this->load->helper(array('form','https'));
 }

 function index() {

  # load models
  $this->load->model('site/map');
  $this->load->model('site/langs');
  $this->load->model('site/pages');
  if ( $mapped = $this->map->get_map() ){ // this is the line 21
   $this->langs->set_user_lang( $this->GLO['show_lang_in_url'], $this->GLO['show_lang_at_home'] );
   $red = base_url().$this->GLO['user_lang_label']."/".$mapped;
   redirect($red, "refresh");
   } 

  ... 
```

现在 MY_Controller 位于 application/core 中，定义如下：

```
class MY_Controller extends CI_Controller {

 public function __construct() {
        parent::__construct();
  $this->GLO = array();   

  #
  # set defaults:
  #
  $this->GLO['deb'] = '';
  $this->GLO['baseurl'] = base_url();
  ... (more GLO[key] = value ) 
}

 public function __set ($key, $value ) {
  $this->GLO[$key] = $value;
 } 
```

我使用的每个模型都是这样开始的（相应地命名）：

```
class Map extends CI_Model {

 function __construct(){
  parent::__construct(); 
 }

 function get_map(){
        .....
        return true;
        } 
```

现在在 Debian 上使用 CI 2.1.2、PHP 5.3.3、Apache 2 尝试加载页面时，我收到此错误：

> 遇到 PHP 错误 严重性：通知消息：间接修改重载属性 Langs::$GLO 无效文件名：site/langs.php 行号：82
> 
> 遇到 PHP 错误 严重性：通知消息：未定义属性：Dispatcher::$map 文件名：controllers/dispatcher.php 行号：21
> 
> 致命错误：在第 21 行的 /home/webdev/MC/_WWW/application/controllers/dispatcher.php 中的非对象上调用成员函数 get_map()

第 21 行是 Map 模型中上面标记的那一行

```
if ( $mapped = $this->map->get_map() ){ 
```

另一个模型中的第 82 行如下所示：

```
$this->GLO['langs'][] = $temp; 
```

在整个代码中，这个 GLO 数组被称为 $this-GLO[ *key* ]。它必须不时地阅读和写入。如果我删除 MY_Controller 中的 __set 函数，我会收到更多警告。

问题出在哪里？

提前非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:47:01.477

我不确定第一个错误 - 但是这两个：

> 遇到 PHP 错误 严重性：通知消息：未定义属性：Dispatcher::$map 文件名：controllers/dispatcher.php 行号：21
> 
> 致命错误：在第 21 行的 /home/webdev/MC/_WWW/application/controllers/dispatcher.php 中的非对象上调用成员函数 get_map()

...看起来你没有正确加载你的模型？

改变

```
if ( $mapped = $this->map->get_map() ){ 
```

至

```
$this->load->model('map');
if ( $mapped = $this->map->get_map() ){ 
```

# python - 如何加速已经缓存的 pip 安装？

> ID：12409551
> 
> 赞同：9
> 
> 时间：2012-09-13T15:17:20.863
> 
> 标签：python, virtualenv, pip

我经常需要从 a 重新创建虚拟环境，`requirements.txt`并且我已经在使用[`$PIP_DOWNLOAD_CACHE`](https://stackoverflow.com/a/4806458/343834). 这仍然需要很多时间，我注意到以下几点：

Pip 在以下两行之间花费了大量时间：

```
Downloading/unpacking SomePackage==1.4 (from -r requirements.txt (line 2))
  Using download cache from $HOME/.pip_download_cache/cached_package.tar.gz 
```

平均大约 20 秒来决定使用缓存的包，然后安装速度很快。很多时候你必须安装几十个包（实际上足以写这个问题）。

后台发生了什么？他们是对在线包裹进行某种完整性检查吗？

有没有办法加快这个速度？

**编辑：**看：

```
time pip install -v Django==1.4 
```

我得到：

```
real    1m16.120s
user    0m4.312s
sys     0m1.280s 
```

完整的输出在这里[http://pastebin.com/e4Q2B5BA](http://pastebin.com/e4Q2B5BA)。看起来 pip 正在花时间寻找有效的下载链接，而它已经拥有[http://pypi.python.org/packages/source/D/Django/Django-1.4.tar.gz](http://pypi.python.org/packages/source/D/Django/Django-1.4.tar.gz)的有效缓存。

有没有办法先查找缓存并在版本匹配时停在那里？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T19:39:24.897

在花了一些时间研究 pip 内部结构并分析了一些包安装后，我得出的结论是，即使有下载缓存，pip 也会为每个包执行以下操作：

*   转到主索引 url，通常是[http://pypi.python.org/simple//](http://pypi.python.org/simple/)（[示例](http://pypi.python.org/simple/Django/)）
*   跟随每个链接以获取其他网页
*   从所有这些页面中提取所有链接
*   根据包名称和版本要求检查所有链接的有效性
*   从有效链接中选择最新版本

现在 pip 有一个下载 url，如果配置了下载缓存文件夹，则检查下载缓存文件夹，如果存在以该 url 命名的本地文件，最终决定不使用该 url。

我的猜测是，我们可以通过预先检查缓存来节省大量时间，但我对所有 pip 代码库的理解不够好，无法开始进行所需的修改。当然，这仅适用于确切的版本号要求，`==`因为在其他约束条件下，例如`>=`or `>`，我们仍然希望爬网以查找最新版本。

尽管如此，我还是能够提出一个小的[拉取请求](https://github.com/pypa/pip/pull/677)，如果合并，这将为我们节省一些时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T10:36:17.413

一种替代方法可能是避免重建 virtualenv，而是获取主虚拟环境的副本，您可以根据需要对其进行更新和复制。

[virtualenvwrapper为使用](http://virtualenvwrapper.readthedocs.org/en/latest/index.html)[cpvirtualenv](http://virtualenvwrapper.readthedocs.org/en/latest/command_ref.html#cpvirtualenv)命令提供了一些支持

# python - Django if标签不评估相等性

> ID：12409555
> 
> 赞同：1
> 
> 时间：2012-09-13T15:17:39.677
> 
> 标签：python, django, django-templates, django-views

我有一个大的 JSON 对象（来自 Google Feed API）和一个来自上下文的 URL。当上下文中的 URL 与提要条目 URL 中的 URL 相同时，django 应该解析！

```
{for aEntry in feed.entries %}
{% if aEntry.link == {{my_URL}} %}

<p>URL FOUND in feed entry</p>
{% endif %}
{% endfor %} 
```

这不工作！

**编辑：**

```
feed: {
            "feedUrl": "http://.blogspot.in//feeds/posts/default",
            "title": "",
            "link": "http://.blogspot.com/",
            "author": "",
            "description": "",
            "type": "atom10",
            "entries": [{
                "title": "Shades",
                "link": "http://.blogspot.com/myurl.html",
                "author": "",
                "publishedDate": "Sun, 29 Jul 2012 04:07:00 -0700",
                "contentSnippet": "abstract art!",
                "content": " HTML CONTENT HERE",
                "categories": ["abstract"]
            }

context = { "feed" : feed, "my_url" : "http://.blogspot.com/myurl.html"} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T15:19:39.217

```
{% if "aEntry.link" == {{my_URL}} %} 
```

需要是

```
{% ifequal aEntry.link my_URL %} 
```

# java - 在 JAVA 中设置文档边距

> ID：12409557
> 
> 赞同：0
> 
> 时间：2012-09-13T15:17:43.977
> 
> 标签：java

我的 JAVA 程序的输出进入 FAX* *** *.doc，我使用 BufferedWriter 类一次将一行写入文件。当我在 word 中打开文件时，边距设置为 1"。像这样离开页面会对格式产生不良影响，但如果切换到 0.5"，它是完美的。

有没有办法可以用 JAVA 修改文档的边距？

我正在生成word文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T15:21:37.080

您应该尝试使用[Apache POI](http://poi.apache.org/)来处理 .doc 文件。

# url - .htaccess 重写到 nginx 配置

> ID：12409558
> 
> 赞同：0
> 
> 时间：2012-09-13T15:17:47.273
> 
> 标签：url, redirect, nginx, rewrite

在将 .htaccess 重写规则转换为 nginx 配置时需要帮助。规则来自metro shrink url shortner script。

```
RewriteEngine On 
#RewriteBase /

RewriteRule ^developer.html$            developer.php [QSA,L]
RewriteRule ^multishrink.html$          multishrink.php [QSA,L]
RewriteRule ^stats.html$                public-stats.php [QSA,L]
RewriteRule ^feed.rss                   feed.php [QSA,L]
RewriteRule ^([^/]+)\.qrcode$           qrcode.php?id=$1 [QSA,L]
RewriteRule ^api.php$                   API/simple.php [QSA,L]
RewriteRule ^API/write/(get|post)$      API/write.php?method=$1 [QSA,L]
RewriteRule ^API/read/(get|post)$       API/read.php?method=$1 [QSA,L]
RewriteRule ^([^/]+)/stats$             stats.php?id=$1 [QSA,L]
RewriteRule ^([^/]+)/unlock$            unlock.php?id=$1 [QSA,L]

# If path is not a directory or file then apply RewriteRule
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d        
RewriteRule ^([0-9a-zA-Z-]{1,60})$      go.php?id=$1 [QSA,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T17:12:28.257

尝试：

```
location = /developer.html { 
   rewrite ^(.*)$ /developer.php break; 
} 

location = /multishrink.html { 
   rewrite ^(.*)$ /multishrink.php break; 
} 

location = /stats.html { 
   rewrite ^(.*)$ /public-stats.php break; 
} 

location /feed { 
   rewrite ^/feed.rss /feed.php break; 
} 

location / { 
   rewrite ^/([^/]+)\.qrcode$ /qrcode.php?id=$1 break; 
   rewrite ^/([^/]+)/stats$ /stats.php?id=$1 break; 
   rewrite ^/([^/]+)/unlock$ /unlock.php?id=$1 break; 
   if (!-e $request_filename){ 
      rewrite "^/([0-9a-zA-Z-]{1,60})$" /go.php?id=$1 break; 
   } 
} 

location = /api.php { 
   rewrite ^(.*)$ /API/simple.php break; 
} 

location /API { 
   rewrite ^/API/write/(get|post)$ /API/write.php?method=$1 break; 
   rewrite ^/API/read/(get|post)$ /API/read.php?method=$1 break; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T17:40:19.170

以下应该可以解决问题：

```
location = /developer.html { rewrite ^ developer.php last; }
location = /multishrink.html { rewrite ^ multishrink.php last; }
location = /stats.html { rewrite ^ stats.php last; }

location ~ ^feed.rss { rewrite ^ feed.php last; }
location ~ ^([^/]+)\.qrcode$ { rewrite ^([^/]+)\.qrcode$ qrcode.php?id=$1 last; }

location = /api.php { rewrite ^ API/simple.php; }
location ~ ^API/(write|read)/(get|post)$ { 
  rewrite ^API/(write|read)/(get|post)$ API/$1.php?method=$2 last;     
} 

location ~ ^([^/]+)/stats$ { rewrite ^([^/]+)/stats$ stats.php?id=$id last;}

location ~ ^([^/]+)/unlock$ {
  set $id $1;
  rewrite ^ unlock.php?id=$id last;  
}

location ~ "^([0-9a-zA-Z-]{1,60})$" {
  try_files $uri $uri/ go.php?id=$1;
} 
```

注意：您可以通过首先保存它们（如在解锁位置）来重新使用位置正则表达式中的捕获，或者您可以重复正则表达式（需要保存来自重写指令重置捕获变量的事实）。使用您喜欢的任何风格。

注意：默认情况下，nginx 会附加查询参数，因此来自 apache 的 qsa 标志本质上是默认值，来自[http://nginx.org/en/docs/http/ngx_http_rewrite_module.html#rewrite](http://nginx.org/en/docs/http/ngx_http_rewrite_module.html#rewrite)：

```
 If a replacement string includes the new request arguments, the previous request 
 arguments are appended after them. If this is undesired, putting a question mark
 at the end of a replacement string avoids having them appended 
```

# qt - QSlider 做了不必要的步骤

> ID：12409559
> 
> 赞同：6
> 
> 时间：2012-09-13T15:17:51.843
> 
> 标签：qt, qslider

我正在尝试使用 QSlider，但是如果有人单击位置 X，他想将滑块放置到该位置，滑块总是首先将值设置为最大值或最小值，然后设置为值 X。所以没有必要介入。我怎样才能避免这一步？

我在 QTDesigner 的帮助下实现了滑块。其余设置的代码如下：

```
_ui->horizontalSlider->setRange(1, aMaximalValue);
_ui->horizontalSlider->setValue(theCurrentValue);
connect(_ui->horizontalSlider, SIGNAL(valueChanged(int)), this, SLOT(onValueOfSliderChanged(int))); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T05:58:59.843

使用 QSlider 时，我的经验表明，当您单击滑块中位于当前位置右侧的某个位置（考虑水平滑块）时，它将通过 pageStep 大小增加滑块值。同样，如果单击值在当前位置的左侧，它将按 pageStep 大小减小滑块值。只有当您将滑块拖动到该位置时，它才会将值设置为您想要的值，而不是单击。尝试设置 pageStep 大小以查看是否是问题所在。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-26T22:41:09.133

是的，就像 shubh 解释的那样，pagestep 可能太大了。QSlider 的一个常见问题是它们不会跳转到您单击的位置，而是朝那个方向移动一个页面步长。

这个问题已描述了[该问题的解决方案](https://stackoverflow.com/questions/11132597/qslider-mouse-direct-jump?rq=1)

# c# - 不等于两个通用列表

> ID：12409560
> 
> 赞同：-1
> 
> 时间：2012-09-13T15:17:52.217
> 
> 标签：c#, linq

我有两个通用列表。他们的领域大多不同，但有 4 个领域有共同点。我想使用这四个字段作为“平等”的定义来获取其中一个列表中的项目列表，而不是另一个列表中的项目列表。

这是我解决问题的尝试。

```
var unMatchedData = from liveLines in liveList
    join oldList in comapreSnapshotList
    on new {liveLines.ClientNo, liveLines.SequenceNo, liveLines.LineNo, liveLines.Text} equals
    new {oldList.ClientNo, oldList.SequenceNo, oldList.LineNo, oldList.Text}
    select new KNOWTXTS
    {
        ClientNo = liveLines.ClientNo,
        SequenceNo = liveLines.SequenceNo,
        LineNo = liveLines.LineNo,
        Text = liveLines.Text
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:36:20.093

您可以使用[`Except`](http://msdn.microsoft.com/en-us/library/bb300779.aspx)来查找设置的差异。

```
var newElements = liveList.Select(l => new {
                      l.ClientNo, l.SequenceNo, l.LineNo, l.Text
                  });
var oldElements = comapreSnapshotList.Select(l => new {
                      l.ClientNo, l.SequenceNo, l.LineNo, l.Text
                  });
var newElementsInNew = newElements.Except(oldElements);
var deletedFromNew   = oldElements.Except(newElements);

// if you need the original object in the list 
var newElements = from obj in liveList 
                  join newEle in newElementsInNew 
                  on new {obj.ClientNo, obj.SequenceNo, obj.LineNo, obj.Text} equals newEle
                  select obj;
var deletedElements = from obj in comapreSnapshotList
                  join deletedEle in deletedFromNew   
                  on new {obj.ClientNo, obj.SequenceNo, obj.LineNo, obj.Text} equals deletedEle
                  select obj; 
```

# r - 从R中的矩阵中删除索引

> ID：12409568
> 
> 赞同：1
> 
> 时间：2012-09-13T15:18:10.750
> 
> 标签：r

我正在尝试制作一个条形图，我需要矩阵中的数据。当我的矩阵看起来像这样时，我已经制作了一些非常好的图：

```
 0%   20%   40%   60%  80%
C2   0.22  0.94  1.66  2.38 3.10
CC  -1.38 -0.66  0.06  0.79 1.51
CCW -1.61 -0.87 -0.13  0.62 1.36
P   -1.13 -0.16  0.81  1.78 2.76
PF   0.03  0.72  1.42  2.11 2.80
S2  -2.34 -1.61 -0.88 -0.16 0.57 
```

对于我的其余数据，我必须将其从我使用 as.matrix(df) 的数据帧转换。这个矩阵看起来像这样：

```
 trt   2009     2010      2011     
[1,] "C2"  "9.0525" " 8.1400" " 8.1400"
[2,] "CC"  "5.4200" " 4.7975" " 4.7975"
[3,] "CCW" "4.9675" " 4.0400" " 4.0400"
[4,] "P"   "9.3150" "10.3500" "10.3500"
[5,] "PF"  "9.0950" " 3.3375" " 3.3375"
[6,] "S2"  "3.1725" " 3.1125" " 3.1125" 
```

它不适用于 barplot 函数。我想我需要删除索引列，但一直没能。引号是什么？我虽然矩阵是矩阵，所以我不确定这里发生了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T15:25:50.613

引号表示您`matrix`处于 mode `character`。这是因为`matrix`，与`data.frame`表面上相似的相反，只能容纳一种类型。因为字母数字字符无法转换为数字，所以您的矩阵处于 mode `character`。在将第一列转换为之前，我会更容易将其删除，`matrix`并省去将矩阵转换为`numeric`.

```
m <- as.matrix(df[, -1])

#To add the row.names.

row.names(m) <- df[, 1] 
```

# haskell - 具有多个变量的无点组合

> ID：12409572
> 
> 赞同：7
> 
> 时间：2012-09-13T15:18:20.590
> 
> 标签：haskell, function-composition, pointfree

我已经开始关注它，并且更喜欢将它用于简单的情况，在这些情况下，我基本上可以将值从一个输出传递到一个输入。我喜欢的无点构图的一个简单示例是：

```
let joinLines = foldr (++) "" . intersperse "\n" 
```

今天在玩 GHCI 时，我想看看我是否可以作曲`not`和`(==)`复制`(/=)`，但我真的无法推理出来。`(==)`取两个输入，`not`取一个。我认为这可能有效：

```
let ne = not . (==) 
```

假设单个`Bool`输出`(==)`将转到`not`，但它不会编译，引用以下错误：

```
<interactive>:1:16:
    Couldn't match expected type `Bool' with actual type `a0 -> Bool'
    Expected type: a0 -> Bool
      Actual type: a0 -> a0 -> Bool
    In the second argument of `(.)', namely `(==)'
    In the expression: not . (==) 
```

我希望我能说这对我来说意义重大，但我得到的只是传递给的第二个论点可能是为了`(==)`搞砸事情`not`？任何人都可以帮助我更好地理解这个组合背后的逻辑吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-13T15:22:04.923

如果你当时开始删除一个论点，你会得到

```
ne x y = not (x == y)
       = (not . (x ==)) y
ne x   = not . (x ==)
       = not . ((==) x)
       = ((not .) . (==)) x
ne     = (not .) . (==) 
```

基本上，对于每个参数，您都需要一个`(.)`，正确关联。

的类型`(==)`是`Eq a => a -> a -> Bool`。因此，如果您编写`whatever . (==)`，并向其传递一个值`x`，您将得到`whatever ((==) x)`, 但`(==) x`它是一个函数`a -> Bool`（其中`a`是 的类型`x`，以及 的实例`Eq`）。所以`whatever`必须接受函数类型的参数。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-13T19:45:32.713

另一个有用的运算符是 (.:)，它是带有两个参数的初始函数的组合子：

```
f . g  $ x
f .: g $ x y 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-06-04T17:52:43.810

显式使用`curry`and`uncurry`可以帮助在“多参数”和单参数函数之间切换。

```
ne = curry (not . uncurry (==)) 
```

`uncurry`“修复” `(==)`，以便它采用单个参数`(x,y)`而不是单独的`x`和`y`参数。然后可以`not`按预期组合生成的函数。然后可以重新组合函数以再次接受单独的参数。

# json - json和jquery移动

> ID：12409576
> 
> 赞同：0
> 
> 时间：2012-09-13T15:18:31.107
> 
> 标签：json, jquery-mobile

我正在尝试使用 jquery mobile 显示一些 json 数据

这个页面有什么问题？

[http://jsfiddle.net/MeUHy/](http://jsfiddle.net/MeUHy/)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T09:49:28.463

You had some mistakes in your code.

You should try the fllowing:

```
<!DOCTYPE html>  
<html>      
    <head>      
        <title>Sample Page</title>           
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.css" />    
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.min.js"></script>        
        <script type="text/javascript" src="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.js"></script>
        <script type="text/javascript">

        $(document).ready(function() {
            var jResult = [{"status":"ok",
                "count":6,
                "categories":[{
                    "id":19,
                    "slug":"abcd",
                    "title":"abcd",
                    "post_count":1
                },
                {
                    "id":6,
                    "slug":"conferences",
                    "title":"Conf\u00e9rences",
                    "post_count":33
                }] // <--- You had a missing ']'
            }];

            var buttonHtmlString = "", pageHtmlString = "";

            for (i = 0; i < 2; i++) {
                // 'jResult' is an array so you should have 'jResult[0].categories[i].title'
                //    instead of 'jResult.categories[i].title'
                buttonHtmlString += '<a href="#' + jResult[0].categories[i].title + '" data-role="button">' + jResult[0].categories[i].title + '</a>';
                pageHtmlString += '<div data-role="page" id="' + jResult[0].categories[i].title + '">';
                pageHtmlString += '<div data-role="header"><h1>' + jResult[0].categories[i].title + '</h1></div>';
                pageHtmlString += '<div data-role="content"><p>' + jResult[0].categories[i].post_count + '</p></div>';
                pageHtmlString += '</div>';
            }

            $("#buttonGroup").append(buttonHtmlString);
            $("#buttonGroup a").button();
            $("#buttonGroup").controlgroup();

            $("#main").after(pageHtmlString);

            //return false;
        });

        </script>
    </head>      
    <body>              
        <div data-role="page" id="main">      
            <div data-role="header">         
                <h1>
                    Page 1
                </h1>     
            </div><!-- /header -->      

            <div data-role="content">
                <p>I fake loaded content in the <i>$(document).ready()</i> event!</p>
                <div data-role="controlgroup" id="buttonGroup"></div>
            </div><!-- /content -->      

        <div data-role="footer">              
            </div>
        </div><!-- /page -->              

    </body>
</html> 
```

Hope this helps.

# php - xml解析xpath php

> ID：12409577
> 
> 赞同：0
> 
> 时间：2012-09-13T15:18:36.087
> 
> 标签：php, xml, xpath

我有一个这种形式的 xml 文档：

```
 <root>
    <item title="x">
     <children/>
    </item>
    <item title="y">
      <children>
      <item title="y1">
      <children/>
      </item>
      <item title="y1">
      <children>
      <item title="y1.1">
      <children/>
      </item>
      </children>
      </item>
      </children>
     </item>
    </root> 
```

等等。通常我会递归地解析每个节点的文件，看看该节点是否有孩子或不做一些额外的 html 格式。这种模式的问题在于，即使它是单个条目（例如单个章节的标题）或空的，孩子也会出现。

我正在使用 php 和 xpath，我怎么知道每个节点的 item/children/ 没有子节点，以便我应用特殊格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:26:05.543

> 我怎么知道每个节点的 item/children/ 没有子节点，以便我应用特殊格式？

**这个 XPath 表达式**：

```
//item/children[not(node())] 
```

选择`children`XML 文档中的任何元素，它是 an 的`item`子节点，并且本身没有子节点。

**要选择`//item/children`本身有子节点的元素，请使用**：

```
//item/children[node()] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:25:31.070

XPath 表达式`children[count(node())>0]`在给定的上下文中返回`children`不为空的元素。

要让那些是空的，请将 更改`>`为`=`。

# c# - 如何在运行时添加 ActiveX 控件

> ID：12409579
> 
> 赞同：4
> 
> 时间：2012-09-13T15:18:45.270
> 
> 标签：c#, .net, winforms, activex

我正在尝试在基于 C# windows 窗体的项目的用户控件中添加一个 activeX 控件。

现在，如果我从工具菜单中添加该 activeX 组件，那么只需使用拖放操作，我就可以使用 activeX 控件。
但是，当我尝试在运行时使用 C# 代码添加该代码时，它会引发以下异常：

> “引发了‘System.Windows.Forms.AxHost=InvalidActiveXStateException’类型的异常”。

使用 CreateControl() 我能够摆脱这个异常，但现在 activeX 控件没有出现在表单上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T15:41:02.037

**您何时**添加控件以及**将**其添加到表单的什么位置？

您通常会在组件初始化后在构造函数中加载控件：

```
 public FormRecalculation()
    {
        InitializeComponent();
        loadDataSelector();
    } 
```

如果有任何关联的许可证密钥，您需要设置它们并将它们添加到表单上的相应容器中：

```
 private void loadDataSelector()
    {
        //Initialize the DataSelector
        DataSelector = new AXQDataSelector(getClsidFromProgId("QDataSelLib.QDataSel"));
        if (DataSelector != null)
        {
            System.Reflection.FieldInfo f =
                typeof(AxHost).GetField("licenseKey",
                System.Reflection.BindingFlags.NonPublic |
                System.Reflection.BindingFlags.Instance);
            f.SetValue(DataSelector, "license-here");

            splitContainer1.Panel2.Controls.Add(DataSelector);

            ((System.ComponentModel.ISupportInitialize)(DataSelector)).BeginInit();

            this.DataSelector.Dock = System.Windows.Forms.DockStyle.Fill;
            this.DataSelector.Enabled = true;
            this.DataSelector.Location = new System.Drawing.Point(0, 0);
            this.DataSelector.Name = "DataSelector";
            this.DataSelector.Size = new System.Drawing.Size(324, 773);
            this.DataSelector.TabIndex = 0;

            splitContainer1.Panel2.ResumeLayout();
            ((System.ComponentModel.ISupportInitialize)(DataSelector)).EndInit();

            this.ResumeLayout(false);
            this.PerformLayout();
        }
        else
        {
            return;
        }

    } 
```

这实际上是用于包装的 OCX，但你明白了......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T03:12:59.377

好的，经过一些更改后，代码如下所示。这里在运行时创建了四个选项卡。最初，在第一个选项卡上显示控件。当用户单击其他选项卡页面时，这些页面上动态添加的 activex 控件。（此代码是为 .net 用户控件编写的。在运行时，此用户控件被添加到表单中）

```
 private void Populate()
    {
        int position;
        int i = 0;

        //here children in list of string type
        foreach (string child in children)
        {
            this.productLineTabs.TabPages.Add(child);
            AxSftTree treeadd = loadtree(this.productLineTabs.TabPages[i]);
            this.tree.Add(treeadd);

            this.tree[i].Columns = 2;
            this.tree[i].set_ColumnText(0, "Col1");
            this.tree[i].set_ColumnText(1, "Col2");

            position = this.tree[i].AddItem(child);
            i++;
        }

        form plv = new form();
        plv.Controls.Add(this);
        plv.Show();
    }

    private AxSftTree loadtree(TabPage tab)
    {
        AxSftTree treeobject = new AxSftTree();
        ((System.ComponentModel.ISupportInitialize)(treeobject)).BeginInit();
        SuspendLayout();
        tab.Controls.Add(treeobject);
        treeobject.Dock = DockStyle.Fill;
        ResumeLayout();
        ((System.ComponentModel.ISupportInitialize)(treeobject)).EndInit();

        return treeobject;
    } 
```

您可以在此页面上找到有关此实现的一些详细信息：http: [//newapputil.blogspot.in/2013/11/how-to-add-activex-control-at-run-time.html](http://newapputil.blogspot.in/2013/11/how-to-add-activex-control-at-run-time.html)

# cuda - CUDA 1D 纹理提取总是返回 0

> ID：12409581
> 
> 赞同：2
> 
> 时间：2012-09-13T15:19:00.283
> 
> 标签：cuda, textures

我正在尝试用一段简单的代码测试 CUDA 1D 纹理。这很简单：首先分配一个全局内存，然后将其绑定到纹理引用；通过 tex1D() 从内核中访问纹理；打印出纹理提取返回的值。

代码如下：

```
#include "cuda.h"
#include "cuda_runtime.h"
#include <iostream>
#include <vector>
#include <cstdio>

using namespace std;

texture<float, cudaTextureType1D, cudaReadModeElementType> texX;

__global__ void kernel(float *X)
{
    int i = threadIdx.x ;
    if ( i >= 128 ) return;
    printf("%.3f\t%.3f\n", tex1D( texX, i*1.0 ), X[i] );
}

int main()
{
    float *devX;
    vector<float> X(128, 3.1415926 );
    cudaMalloc( &devX, 128 * sizeof(float) );
    cudaMemcpy( devX, &X[0], 128*sizeof(float), cudaMemcpyDefault );
    cudaDeviceSynchronize();

    cudaBindTexture( (size_t)0, texX, devX, 128 * sizeof(float) );
    cudaDeviceSynchronize();

    kernel<<<1,128>>>( devX );
    cudaDeviceSynchronize();
    cout<<endl;
    cout<< cudaGetErrorString( cudaGetLastError() ) <<endl;
} 
```

但我得到的只是这样：

```
0.000    3.142
0.000    3.142
...
0.000    3.142

no error 
```

谁能解释为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T16:43:46.143

您需要使用`tex1Dfetch()`，因为您的纹理绑定到线性内存：

```
printf("%.3f\t%.3f\n", tex1Dfetch( texX, i ), X[i] ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-16T13:54:36.520

来自“ CUDA C 编程指南”

**tex1D**用于从一维纹理对象指定的**CUDA 数组中获取...**

**tex1Dfetch**用于从一维纹理指定**的线性内存区域中获取...**

所以，如果你使用 cudaMalloc 分配线性内存而不是 cuda 数组，你应该选择**tex1Dfetch**

# php - 使用 stream_get_meta_data 的 php isImage($url) 不适用于本地文件路径

> ID：12409582
> 
> 赞同：0
> 
> 时间：2012-09-13T15:19:05.400
> 
> 标签：php, image, stream

是否可以调整此功能，使其也适用于本地文件路径？

$meta 包含以下内容： Array ( [wrapper_type] => plainfile [stream_type] => STDIO [mode] => rb [unread_bytes] => 0 [seekable] => 1 [uri] => C:\imgs\232434\. jpg [timed_out] => [blocked] => 1 [eof] => )

$meta["wrapper_data"] 不存在。

```
function isImage($url)
  {
     $params = array('http' => array(
                  'method' => 'HEAD'
               ));
     $ctx = stream_context_create($params);
     $fp = @fopen($url, 'rb', false, $ctx);
     if (!$fp) 
        return false;  // Problem with url

    $meta = stream_get_meta_data($fp);
    if ($meta === false)
    {
        fclose($fp);
        return false;  // Problem reading data from url
    }

    $wrapper_data = $meta["wrapper_data"];
    if(is_array($wrapper_data)){
      foreach(array_keys($wrapper_data) as $hh){
          if (substr($wrapper_data[$hh], 0, 19) == "Content-Type: image") // strlen("Content-Type: image") == 19 
          {
            fclose($fp);
            return true;
          }
      }
    }

    fclose($fp);
    return false;
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T15:23:02.340

最好使用[getimagesize](http://il.php.net/getimagesize)来检测本地/URL 文件是否为图像。

失败时，返回 FALSE。这可能是您正在寻找的。

# php - 表单提交 在表单的开始文本前面添加一个

> ID：12409583
> 
> 赞同：0
> 
> 时间：2012-09-13T15:19:08.673
> 
> 标签：php, sql-server

好的，我正在使用 PHP 编辑表单（以前的人构建）将数据提交到 MSSQL 数据库，这工作正常但是当信息提交到数据库并稍后检索表单页面（用于编辑）`<br>`时，开头有一个的文本。如果字段以未插入的 a`<ul>`开头`<br>`。我一直在试图弄清楚如何阻止这种情况。我尝试过的一件事是删除`<br>`文本中的所有内容，这会使格式消失，我怎样才能让它不插入`<br>`顶部但保留`<br>`其他任何地方？这是我的代码：（我给你所有的东西，直到出现问题的第一个字段）

```
function fromhtml ($x) {
  $x = preg_replace("/<p>/i","\n\n",$x);
  //$x = preg_replace("/<br>/i","\n",$x);
  $x = preg_replace("/<li>/i","\n<li>",$x);

  return $x;
}

$PHP_SELF = $_SERVER['PHP_SELF'];

$course_id = @$_GET["course"];

if ($course_id == "") {

$sqlquery = "SELECT id, title, goals, outline, reference, deliverymode, updated2 = CONVERT(VARCHAR(19), updated, 120)
FROM courses WHERE division_id = '$division_id' ORDER by id";

$result = mssql_query($sqlquery);
$number = mssql_num_rows($result);

print "<table border=1 id=\"content_table\"><tr><th>ID</th><th>Title</th><th>Status</th><th>Last modified</th></tr>\n";

$i = 0;
while ($number > $i) {

        $course_id =  mssql_result($result,$i,"id");
    $reference = mssql_result($result,$i,"reference");
    $updated = mssql_result($result,$i,"updated2");

    print "<tr><td>";
    if ($reference == "") {
            print "<a href=$PHP_SELF?division=$division_id&course=$course_id>$course_id</a>";
    } else {
            print "$course_id";
    }
    print "</td><td>";
        print mssql_result($result,$i,"title");
    print "</td><td>";
    if ($reference == "") {
        if ( (mssql_result($result,$i,"goals")=="") and (mssql_result($result,$i,"outline")=="") ) {
            print "<b>No syllabus, or incomplete</b></td>";
        }
    } else {
        print "Based on $reference";
    }
    print "</td><td>$updated</td>\n";
        print "</tr>\n";  
        $i++;
}

print "</table>";

    exit;
}

$sqlquery = "SELECT * FROM courses WHERE id = '$course_id'";

$result = mssql_query($sqlquery);
$number = mssql_num_rows($result);

if ($number == 0) {
print "<html><body>";
print "No course with the ID \"$course_id\" exists in the course database.";
print "</body></html>";
exit;
}

$i = 0;

$description = fromhtml(mssql_result($result,$i,"description"));
print "<html><head><title>DACC Course Syllabus - $course_id</title>";

print "<script language=\"JavaScript\" type=\"text/javascript\" src=\"/rte/richtext2.js\"></script>";
?>

<script language="JavaScript" type="text/javascript">
<!--    
initRTE("/rte/images/", "/rte/", "");
//-->   

function submitForm() {
   updateRTEs();
   document.edit-course.submit();
   return false;
}
</script>
<?php   
print "</head><body>\n";

//Begin Form
print "<form name=\"edit-course\" id=\"edit-form\" method=\"post\" action=\"write.php?course=$course_id\" onSubmit=\"return submitForm()\">\n";

print "<fieldset>";
 print "<label for=\"description\">Course Description</label>";
$description=addslashes(preg_replace('`[\r\n]`','',$description));
  ?>
   <script language="JavaScript" type="text/javascript">
<!--
  writeRichText('description', '<?php print $description; ?>', 200, 300, true, false);
//-->
</script>
  <?php

   print "</fieldset>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:34:21.870

`preg_replace`有第四个参数，`$limit`。将此设置为 1 会将 preg_replace 限制为第一次出现。或者，您可以使用正则表达式`^<br>`。这只会`<br>`在它位于字符串的开头时替换。

编辑：对不起，我误解了你的问题。用于`$variable=preg_replace("/^<br>/i", "", $variable);`剥离第一个`<br>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:35:14.767

BR 位于字符串的最开头，然后使用它

```
$x = preg_replace("/^<br(\/|)>/i","\n",$x); 
```

而不是那个注释行

# c# - 如何使用 .net 插件项目将项目添加到 Powerpont 上下文菜单

> ID：12409587
> 
> 赞同：0
> 
> 时间：2012-09-13T15:19:20.737
> 
> 标签：c#, powerpoint, excel-addins, office-addins

我以前从未编写过办公插件，我想将我自己的功能添加到 Powerpoint。我想在用户选择幻灯片时弹出一个项目到上下文菜单，选择该项目时 - 我想启动.NET表单。我将不胜感激您可能拥有的任何参考资料或示例代码！谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T15:29:58.680

这是关于[在 Excel 中自定义上下文菜单的](http://msdn.microsoft.com/en-us/library/office/gg469862.aspx)文章，我认为它也适用于 PowerPoint。

另一个指南：[在 Office 2010 中自定义上下文菜单！](http://msdn.microsoft.com/en-us/library/office/ee691832.aspx)

![在此处输入图像描述](../Images/fba617e2aa8d93f8c9b5beff5306a48d.png)

玩得开心 ：）

# hudson - Hudson 在创建测试报告时出错

> ID：12409596
> 
> 赞同：1
> 
> 时间：2012-09-13T15:19:45.680
> 
> 标签：hudson, mxunit

我从哈德森那里得到了以下错误。谁能告诉我这里有什么问题。我的测试用例运行良好。

```
Total time: 0 seconds
Recording test results 
```

> 584) 在 hudson.model.Build$RunnerImpl.post2(Build.java:159) 在 hudson.model.AbstractBuild$AbstractRunner.post(AbstractBuild.java:553) 在 hudson.model.Run.run(Run.java:1390 ) at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46) at hudson.model.ResourceController.execute(ResourceController.java:88) at hudson.model.Executor.run(Executor.java:145) 原因：hudson .util.IOException2: Failed to read C:\Users\xxx\Downloads\hudson\workspace\xxx\xxx\testresults\testresults.properties 这真的是 JUnit 报告文件吗？您的配置必须在 hudson.tasks.junit.TestResult 的 hudson.tasks.junit.TestResult.parse(TestResult.java:155) 的 hudson.tasks.junit.TestResult.parse(TestResult.java:205) 匹配太多文件.(TestResult.java:118) 在 hudson.tasks.junit。运行（未知来源）原因：org.dom4j.DocumentException：文档文件的第 1 行出错：///C:/Users/xxx/Downloads/hudson/workspace/xxx/xxx/testresults/testresults.properties：内容是序言中不允许。嵌套异常：prolog 中不允许有内容。在 org.dom4j.io.SAXReader.read(SAXReader.java:482) 在 org.dom4j.io.SAXReader.read(SAXReader.java:264) 在 hudson.tasks.junit.SuiteResult.parse(SuiteResult.java:98 ) at hudson.tasks.junit.TestResult.parse(TestResult.java:199) ... 15 更多原因：org.xml.sax.SAXParseException; systemId：file:///C:/Users/xxx/Downloads/hudson/workspace/xxx/xxx/testresults/testresults.properties；行号：1；列号：1；序言中不能有内容。在 com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T10:51:31.207

这是因为 HUDSON 试图在文件 testresults.properties 中解析您的测试结果。因为 testresults.properties 不包含有效的 XML，所以它得到了 SAXParseException。这可能是因为您的项目中没有测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-02T11:24:46.910

或者因为您同时拥有 HTML 和 XML（就像我一样）。确保只包含 *.xml。

# mysql - 排名未正确确定

> ID：12409598
> 
> 赞同：5
> 
> 时间：2012-09-13T15:19:51.720
> 
> 标签：mysql, sql, join

我正在使用这个查询：

```
SELECT A.place_idx,A.place_id,B.TOTAL_CNT,(@r := @r + 1) AS rank FROM CUSTOM_LIST
AS A
INNER JOIN
(SELECT  @r := 0)
AS C
INNER JOIN
(SELECT place_id,COUNT(place_id) AS TOTAL_CNT from COUNT_TABLE GROUP BY place_id)
AS B ON B.place_id=A.place_id order by B.TOTAL_CNT desc; 
```

这给出了这个结果：

![1](../Images/c84d93b93019edcd223c000fb54e160b.png)

但我想要这个结果：

![2](../Images/b2bf4a518e66580c8cb00f5cb7800706.png)

我需要如何修改我的查询？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T15:23:51.263

```
SELECT *,(@r := @r + 1) AS rank FROM 
(
  SELECT A.place_idx,A.place_id,B.TOTAL_CNT FROM CUSTOM_LIST
  AS A
  INNER JOIN
  (SELECT place_id,COUNT(place_id) AS TOTAL_CNT from COUNT_TABLE GROUP BY place_id)
  AS B ON B.place_id=A.place_id order by B.TOTAL_CNT desc
) AS T, (SELECT  @r := 0) AS tt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:28:19.070

您的 C.rank 是在处理它们时计算的，而不是在它们排序之后计算的。无论如何，确实不需要这些数据。由于您是按指标对行进行排序，因此您知道第一行是第一行，等等。您可以在将其拉出后在编程方面进行处理。

或者，您可以将您拥有的内容放入内部选择中，然后进行排名。

# jquery - 错误：Access-Control-Allow-Headers 不允许请求标头字段 Content-Type

> ID：12409600
> 
> 赞同：110
> 
> 时间：2012-09-13T15:20:09.487
> 
> 标签：jquery, asp.net-mvc-4, asp.net-web-api, oauth-2.0, cors

我使用 vS2012 创建了一个 mvc4 web api 项目。我使用以下教程来解决跨域资源共享，“http://blogs.msdn.com/b/carlosfigueira/archive/2012/07/02/cors-support-in-asp-net-web-api- rc-version.aspx”。它工作成功，我成功地将数据从客户端发布到服务器。

在我的项目中实现授权之后，我使用以下教程来实现 OAuth2，“http://community.codesmithtools.com/CodeSmith_Community/b/tdupont/archive/2011/03/18/oauth-2-0-for -mvc-two-legged-implementation.aspx”。这有助于我在客户端获取 RequestToken。

但是当我从客户端发布数据时，我收到错误 **消息“XMLHttpRequest 无法加载 http://。Access-Control-Allow-Headers 不允许请求标头字段 Content-Type。”**

我的**客户端**代码看起来像，

```
 function PostLogin() {
    var Emp = {};            
    Emp.UserName = $("#txtUserName").val();             
    var pass = $("#txtPassword").val();
    var hash = $.sha1(RequestToken + pass);
            $('#txtPassword').val(hash);
    Emp.Password= hash;
    Emp.RequestToken=RequestToken;
    var createurl = "http://localhost:54/api/Login";
    $.ajax({
        type: "POST",
        url: createurl,
        contentType: "application/json; charset=utf-8",
        data: JSON.stringify(Emp),
        statusCode: {
                200: function () {
                $("#txtmsg").val("done");                       
                toastr.success('Success.', '');                         
                }
                },
        error:
            function (res) {                        
                toastr.error('Error.', 'sorry either your username of password was incorrect.');            
                }
        });
    }; 
```

我的**api 控制器**看起来像，

```
 [AllowAnonymous]
    [HttpPost]
    public LoginModelOAuth PostLogin([FromBody]LoginModelOAuth model)
    {
        var accessResponse = OAuthServiceBase.Instance.AccessToken(model.RequestToken, "User", model.Username, model.Password, model.RememberMe);

        if (!accessResponse.Success)
        {
            OAuthServiceBase.Instance.UnauthorizeToken(model.RequestToken);
            var requestResponse = OAuthServiceBase.Instance.RequestToken();

            model.ErrorMessage = "Invalid Credentials";

            return model;
        }
        else
        {
            // to do return accessResponse

            return model;
        }

    } 
```

我的**webconfig**文件看起来像，

```
 <configuration>
   <configSections>   
   <section name="entityFramework"    type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  <section name="oauth" type="MillionNodes.Configuration.OAuthSection, MillionNodes, Version=1.0.0.0, Culture=neutral"/>
  <sectionGroup name="dotNetOpenAuth" type="DotNetOpenAuth.Configuration.DotNetOpenAuthSection, DotNetOpenAuth.Core">
  <section name="messaging" type="DotNetOpenAuth.Configuration.MessagingElement, DotNetOpenAuth.Core" requirePermission="false" allowLocation="true" />
  <section name="reporting" type="DotNetOpenAuth.Configuration.ReportingElement, DotNetOpenAuth.Core" requirePermission="false" allowLocation="true" />
</sectionGroup>
</configSections>
<oauth defaultProvider="DemoProvider" defaultService="DemoService">
<providers>
  <add name="DemoProvider" type="MillionNodes.OAuth.DemoProvider, MillionNodes" />
</providers>
<services>
  <add name="DemoService" type="MillionNodes.OAuth.DemoService, MillionNodes" />
</services>
</oauth>
<system.web>
 <httpModules>
   <add name="OAuthAuthentication" type="MillionNodes.Module.OAuthAuthenticationModule, MillionNodes, Version=1.0.0.0, Culture=neutral"/>
  </httpModules>
 <compilation debug="true" targetFramework="4.0" />
<authentication mode="Forms">
  <forms loginUrl="~/Account/Login" timeout="2880" />
</authentication>
<pages>
  <namespaces>
    <add namespace="System.Web.Helpers" />
    <add namespace="System.Web.Mvc" />
    <add namespace="System.Web.Mvc.Ajax" />
    <add namespace="System.Web.Mvc.Html" />
    <add namespace="System.Web.Optimization" />
    <add namespace="System.Web.Routing" />
    <add namespace="System.Web.WebPages" />
  </namespaces>
</pages>
</system.web>
<system.webServer>
 <validation validateIntegratedModeConfiguration="false" />      
  <modules>
      <add name="OAuthAuthentication"     type="MillionNodes.Module.OAuthAuthenticationModule, MillionNodes, Version=1.0.0.0, Culture=neutral" preCondition="" />
 </modules>
 <httpProtocol>
  <customHeaders>
    <add name="Access-Control-Allow-Origin" value="*" />
    </customHeaders>
  </httpProtocol>
</system.webServer>
<dotNetOpenAuth>
<messaging>
  <untrustedWebRequest>
    <whitelistHosts>
      <!-- Uncomment to enable communication with localhost (should generally not activate in production!) -->
      <!--<add name="localhost" />-->
    </whitelistHosts>
  </untrustedWebRequest>
</messaging>
<!-- Allow DotNetOpenAuth to publish usage statistics to library authors to improve the library. -->
<reporting enabled="true" /> 
```

* * *

## 回答 #1

> 赞同：173
> 
> 时间：2012-09-13T19:58:36.243

正如这篇文章[chrome 中的错误所暗示的那样：Access-Control-Allow-Headers 不允许 Content-Type](https://stackoverflow.com/questions/5027705/error-in-chrome-content-type-is-not-allowed-by-access-control-allow-headers)只需将附加标头添加到您的 web.config 中，如下所示...

```
<httpProtocol>
  <customHeaders>
    <add name="Access-Control-Allow-Origin" value="*" />
    <add name="Access-Control-Allow-Headers" value="Origin, X-Requested-With, Content-Type, Accept" />
  </customHeaders>
</httpProtocol> 
```

* * *

## 回答 #2

> 赞同：119
> 
> 时间：2013-08-12T17:06:20.007

这很可能是由于**跨域请求**，但也可能不是。对我来说，我一直在调试 API 并将其设置`Access-Control-Allow-Origin`为`*`，但最近版本的 Chrome 似乎需要额外的标头。如果您使用的是 PHP，请尝试将以下内容添加到您的文件中：

```
header("Access-Control-Allow-Origin: *");
header("Access-Control-Allow-Headers: Origin, X-Requested-With, Content-Type, Accept"); 
```

确保你还没有`header`在另一个文件中使用过，否则你会得到一个讨厌的错误。有关更多信息，请参阅[文档](http://php.net/manual/en/function.header.php)。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-07-15T19:45:13.433

我知道这是我使用上述答案的旧线程，必须添加：

```
header('Access-Control-Allow-Methods: GET, POST, PUT'); 
```

所以我的标题看起来像：

```
header('Access-Control-Allow-Origin: *');
header("Access-Control-Allow-Headers: Origin, X-Requested-With, Content-Type, Accept");
header('Access-Control-Allow-Methods: GET, POST, PUT'); 
```

问题得到了解决。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2016-04-08T16:28:39.150

对于 Nginx，唯一对我有用的是添加此标头：

```
add_header 'Access-Control-Allow-Headers' 'Authorization,Content-Type,Accept,Origin,User-Agent,DNT,Cache-Control,X-Mx-ReqToken,Keep-Alive,X-Requested-With,If-Modified-Since'; 
```

连同 Access-Control-Allow-Origin 标头：

```
add_header 'Access-Control-Allow-Origin' '*'; 
```

然后重新加载了 nginx 配置，效果很好。信用[https://gist.github.com/algal/5480916](https://gist.github.com/algal/5480916)。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2021-01-02T14:55:02.357

有同样的问题，虽然在我的情况下与其他答案不同，我使用 ASP.NET 来开发 WebAPI 服务器。

我已经允许军团，它适用于 GET 请求。为了使 POST 请求正常工作，我需要将“AllowAnyHeader()”和“AllowAnyMethod()”选项添加到 Corp 选项列表中。

以下是 Start 类中相关函数的基本部分，如下所示：

**配置服务方法：**

```
 services.AddCors(options =>
    {
        options.AddPolicy(name: MyAllowSpecificOrigins,
                          builder =>
                          {
                              builder
                                  .WithOrigins("http://localhost:4200")
                                  .AllowAnyHeader()
                                  .AllowAnyMethod()
                                  //.AllowCredentials()
                                  ;
                          });
    }); 
```

**配置方法：**

```
 app.UseCors(MyAllowSpecificOrigins); 
```

发现这个：

*   [https://docs.microsoft.com/en-us/aspnet/core/security/cors?view=aspnetcore-3.1](https://docs.microsoft.com/en-us/aspnet/core/security/cors?view=aspnetcore-3.1)
*   [https://forums.asp.net/t/2168883.aspx?Request+header+field+content+type+is+not+allowed+by+Access+Control+Allow+Headers+in+preflight+response+](https://forums.asp.net/t/2168883.aspx?Request+header+field+content+type+is+not+allowed+by+Access+Control+Allow+Headers+in+preflight+response+)

# asp.net - ASP.NET 表单身份验证 - Membership.CreateUser 电子邮件地址验证问题

> ID：12409603
> 
> 赞同：2
> 
> 时间：2012-09-13T15:20:24.877
> 
> 标签：asp.net, validation, asp.net-membership

我目前在我们公司面向客户的网站上使用 ASP.NET 2.0 Forms Authentication。

当客户第一次通过网站激活他们的帐户时，他们的电子邮件连同他们的全名一起从数据库中填充。
在他们输入他们的`username`, `security question`, `security answer`, and之后`password`，所有这些参数都被传递到`Membership.CreateUser`.
对于拥有**单字母域电子邮件**（例如*kim@q.com*或*john@k.com*）的客户，`Membership.CreateUser` **电子邮件验证会返回无效的电子邮件地址，并且在用户输入有效的电子邮件地址之前不会创建用户成员资格**。

是否有针对任何人都知道的一封信电子邮件验证问题的解决方法？任何一点建议都会有所帮助。

# c# - 将 JSON 反序列化为 List<> 在 C# 中不起作用

> ID：12409604
> 
> 赞同：0
> 
> 时间：2012-09-13T15:20:29.653
> 
> 标签：c#, json, serialization

这是我从流中得到的 JSON，并转换为字符串。

```
"{\"data\":[{\"thread_id\":\"1111155552222\",\"recipients\":[123123,456456],\"message_count\":2100},{\"thread_id\":\"1111155553333\",\"recipients\":[123124,456457],\"message_count\":4851},{\"thread_id\":\"1111155554444\",\"recipients\":[123125,456458],\"message_count\":435}]}" 
```

* * *

```
public class DataContainer
{
    List<data> data { get; set; }
}

public class data
{
    public string thread_id { get; set; }
    public long[] recipients { get; set; }
    public int message_count { get; set; }
} 
```

* * *

```
JavaScriptSerializer ser = new JavaScriptSerializer();

DataContainer data = ser.Deserialize<DataContainer>(json); 
```

我的数据为空，它似乎没有反序列化。json的业余爱好者。已经为此头疼了。

谢谢！

* * *

获取 JSON 字符串

```
WebResponse response = request.GetResponse();
Stream stream = response.GetResponseStream();
Encoding encode = System.Text.Encoding.GetEncoding("utf-8");
StreamReader reader = new StreamReader(stream, encode);
string json = reader.ReadToEnd(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:42:50.117

看来您的“***您从流中获得并转换为字符串的 JSON*** ”已被序列化两次。

ASP.NET 自动 JSON 序列化您的服务方法的响应，即使它们的结果是一个对象或对象集合

您应该能够直接使用它而无需序列化/反序列化它。

就像是：

```
//Assuming GetJson() returns a JSON string, which you can use directly 
DataContainer data = GetJson(); 
```

检查这个：[http ://encosia.com/asp-net-web-services-mistake-manual-json-serialization/](http://encosia.com/asp-net-web-services-mistake-manual-json-serialization/)

还有这个：[从 JSON 读取，未显示数据](https://stackoverflow.com/questions/12362633/reading-from-json-data-not-displayed)

# wpf - 绑定到 XAML 中 WPF DataGridCell 内容的问题

> ID：12409606
> 
> 赞同：1
> 
> 时间：2012-09-13T15:20:39.020
> 
> 标签：wpf, xaml, datagrid, datagridcell

我使用以下帖子来实现绑定到动态对象列表的数据网格

[将 DynamicObject 绑定到具有自动列生成的 DataGrid？](https://stackoverflow.com/questions/2473739/binding-dynamicobject-to-a-datagrid-with-automatic-column-generation)

ITypedList 方法 GetItemProperties 工作正常，一个网格显示了我描述的所有列。

我使用自定义的 PropertyDescriptor 并覆盖上面帖子中描述的 GetValue 和 SetValue 方法，我还在动态对象中实现了 TryGetMember 和 TrySetMember 方法。

所以基本上我有一个 ComplexObject:DynamicCobject，其中包含一个字段 Dictionary 和一个实现 ITypedList 和 IList 的 ComplexObjectCollection。

这一切都很好，除了当我将 DataGrid 的 itemsSource 绑定到集合时，单元格将显示 SimpleObject 类型名称，我实际上想要实现一个模板来在文本块中显示 SimpleObject 的属性 Value。

我使用了各种方法来尝试获取底层的 SimpleObject，但没有任何效果，而且我总是得到该行的 ComplexObject。我正在使用自动生成的列，这似乎总是会产生一个文本列，这可能是问题所在，但为什么我仍然不能从单元格属性的某个地方获取底层的 SimpleObject？

下面将是我理想的解决方案，但这不起作用。

```
<Grid>
    <Grid.Resources>
        <DataTemplate x:Key="DefaultNodeTempate">
            <ContentControl Content="{Binding RelativeSource={RelativeSource TemplatedParent}, 
                              Path=Content}">
                <ContentControl.Resources>
                        <DataTemplate DataType="local:SimpleObjectType">
                            <TextBlock Text="{Binding Value}" />
                        </DataTemplate>
                </ContentControl.Resources>
            </ContentControl>
        </DataTemplate>
    </Grid.Resources>
    <DataGrid ItemsSource="{Binding ElementName=mainWin, Path=DynamicObjects}">
        <DataGrid.Resources>
            <Style TargetType="DataGridCell">
                <Setter Property="ContentTemplate" Value="{StaticResource DefaultNodeTempate}" />
            </Style>
        </DataGrid.Resources>
    </DataGrid>
</Grid> 
```

任何建议将不胜感激。

谢谢

基兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:46:35.127

所以我发现解决方案是在后面的代码中做一些工作。

在 AutoGeneratingColumn 事件中，创建一个带有内容控件和自定义模板选择器的 DataTemplate（我在 Xaml 中创建选择器并将其作为资源找到）。

使用 e.PropertyName 作为路径为 ContentControl 的 ContentProperty 创建绑定

创建一个新的 DataGridTemplateColumn 并将新列 CellTemplate 设置为您的新 DataTemplate

将 e.Column 替换为您的新列，然后将单元格 datacontext 与该列的动态属性绑定。

如果有人对此有任何改进，请随时分享您的想法。

谢谢

编辑：根据要求为我的解决方案提供一些示例代码

自定义模板选择器：

```
public class CustomDataTemplateSelector : DataTemplateSelector
{
    public List<DataTemplate> Templates { get; set; }

    public CustomDataTemplateSelector()
        : base()
    {
        this.Templates = new List<DataTemplate>();
    }

    public override DataTemplate SelectTemplate(object item, DependencyObject container)
    {
        DataTemplate template = null;
        if (item != null)
        {
            template = this.Templates.FirstOrDefault(t => t.DataType is Type ? (t.DataType as Type) == item.GetType() : t.DataType.ToString() == item.GetType().ToString());
        }

        if (template == null)
        {
            template = base.SelectTemplate(item, container);
        }

        return template;
    }
} 
```

XAML：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication1"
        Title="MainWindow" Height="350" Width="525">
    <Grid x:Name="ParentControl">
        <Grid.Resources>
            <local:CustomDataTemplateSelector x:Key="MyTemplateSelector" >
                <local:CustomDataTemplateSelector.Templates>
                    <DataTemplate DataType="{x:Type local:MyCellObject}" >
                        <TextBox Text="{Binding MyStringValue}" IsReadOnly="{Binding IsReadOnly}" />
                    </DataTemplate>
                </local:CustomDataTemplateSelector.Templates>
            </local:CustomDataTemplateSelector>
        </Grid.Resources>
        <DataGrid ItemsSource="{Binding Rows}" AutoGenerateColumns="True" AutoGeneratingColumn="DataGrid_AutoGeneratingColumn" >
        </DataGrid>
    </Grid>
</Window> 
```

后面的代码：

```
private void DataGrid_AutoGeneratingColumn(object sender, DataGridAutoGeneratingColumnEventArgs e)
{
    // Get template selector
    CustomDataTemplateSelector selector = ParentControl.FindResource("MyTemplateSelector") as CustomDataTemplateSelector;

    // Create wrapping content control
    FrameworkElementFactory view = new FrameworkElementFactory(typeof(ContentControl));

    // set template selector
    view.SetValue(ContentControl.ContentTemplateSelectorProperty, selector);

    // bind to the property name
    view.SetBinding(ContentControl.ContentProperty, new Binding(e.PropertyName));

    // create the datatemplate
    DataTemplate template = new DataTemplate { VisualTree = view };

    // create the new column
    DataGridTemplateColumn newColumn = new DataGridTemplateColumn { CellTemplate = template };

    // set the columns and hey presto we have bound data
    e.Column = newColumn;
} 
```

可能有更好的方法来创建数据模板，我最近读到微软建议使用 XamlReader，但这就是我当时的做法。另外我还没有在动态类上测试过这个，但我相信它应该可以工作。

# scope - 如何正确替换（ [Some Dimension].[All], [Some Measure] ）的值？（MDX，范围（））

> ID：12409612
> 
> 赞同：1
> 
> 时间：2012-09-13T15:20:54.953
> 
> 标签：scope, ssas, mdx, olap, ssas-2008

我正在使用 SQL Server 分析服务 2008 R2。

我需要¹来替换`[Some Dimension].[All]`计算时的值`[Some Measure]`。这是我尝试过的：

```
SCOPE( [Some Dimension].[All] );
  [Measures].[Some Measure] = 123; // for simplicity sake
END SCOPE; 
```

当我查询时，这按预期工作`[Some Dimension]`——`[All]`成员返回`123`，其他成员保持不变，显示实际的关联`[Some Measure]`值。

但是由于某种奇怪的原因，所有其他维度的所有成员现在都返回`123`了`[Some Measure]`。我真的迷路了。请告诉我如何解决这个问题，以及为什么会这样。

¹ [*对于好奇的人：*我想替换 的值的原因`[All]`是因为`[Some Dimension]`和`[Some Measure]`是多对多相关的。因此，元组`( [Some Dimension].[All], [Some Measure] )`总是返回多维数据集中的总数`[Some Measure]`。我*希望*它返回的`[Some Measure]`是实际上与至少一个成员相关联`[Some Dimension]`]的计数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T07:42:54.783

如果我理解正确，您只想覆盖`[Measures].[Some Measure]`何时`[Some Dimension].[All]`被选中，而且当`currentmember`您的多维数据集中的剩余维度是相应的“全部”成员时。就是这样，然后只需将您的范围分配更改为`SCOPE(Root())`就可以了。

# html - 在 chrome 上使用 html5 显示垂直视频

> ID：12409613
> 
> 赞同：4
> 
> 时间：2012-09-13T15:21:01.720
> 
> 标签：html, google-chrome, html5-video

我正在构建一个简单的[页面](http://jsfiddle.net/JVZGZ/)来显示使用 html5 视频标签从我的 iphone 上传的视频。

如果您正在使用 chrome 观看它，您可能会看到该视频是水平显示的，尽管它不是 - 尝试下载它或从 safari 观看它（没有尝试过其他浏览器）。

我没有在网上找到任何提到这个问题的东西，它是一个已知的 chrome 错误吗？此标记是否有任何我可以更改以正确显示的属性？

谢谢。

**编辑：** 看起来这也发生在 IE 中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T23:15:26.987

你可以使用 style="-webkit-transform: rotate(90deg);" 在视频标签上以及与 html5 兼容的视频播放器解决方案（否则您也会获得旋转控件）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T20:53:10.513

这是 iPhone 的编码问题。我下载了视频，它仍然使用 mplayer 水平显示。这里有更多信息：

[http://help.videojs.com/discussions/problems/1508-video-orientation-for-iphone-wrong](http://help.videojs.com/discussions/problems/1508-video-orientation-for-iphone-wrong)

并且按照建议，您需要使用使用更受支持的标准编码的库重新编码视频。（或者尝试在页面上转换视频，但这会很难看）

# ios - 尝试更新表格视图中的行数时出错

> ID：12409616
> 
> 赞同：3
> 
> 时间：2012-09-13T15:21:18.970
> 
> 标签：ios, uitableview

我对如何向表格视图添加行有点困惑。

我有一个数组，它会定期向其中添加值。每次使用这些代码行将新值添加到数组时，我都会尝试更新行数：

```
// listOfMembers if a 
[[self tableView] beginUpdates];     [tableView numberOfRowsInSection:[listOfMembers count]];
[[self tableView] endUpdates];

[[self tableView] beginUpdates];
[tableView reloadRowsAtIndexPaths:[tableView indexPathsForVisibleRows] withRowAnimation:UITableViewRowAnimationNone];
[[self tableView] endUpdates]; 
```

但是，这对更改行数不起作用..我可能误解了表的更新方式。我收到此错误：

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Invalid update: invalid number of rows in section 0\.  The number of rows contained in an existing section after the update (5) must be equal to the number of rows contained in that section before the update (4), plus or minus the number of rows inserted or deleted from that section (0 inserted, 0 deleted) and plus or minus the number of rows moved into or out of that section (0 moved in, 0 moved out).' 
```

崩溃在线：

```
[tableView reloadRowsAtIndexPaths:[tableView indexPathsForVisibleRows] withRowAnimation:UITableViewRowAnimationNone]; 
```

我应该如何清楚地更新我的表格视图我以错误的方式这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T19:47:03.863

好的，所以这个问题的答案是简单地调用函数reloadData。例如：

```
[tableViewOutlet reloadData]; 
```

# java - 如何让用户选择安卓应用的安装位置（SD卡或内部存储）

> ID：12409617
> 
> 赞同：3
> 
> 时间：2012-09-13T15:21:21.017
> 
> 标签：java, android

我需要允许用户选择是否应将应用程序安装到 SD 卡或内部存储器。[我在developer.android.com](http://developer.android.com/index.html)上找不到任何相关信息。

我唯一能做的就是指定`android:installLocation`为“internalOnly”、“auto”或“preferExternal”。但是，我想让用户在安装应用程序时选择它。

在安卓上可以做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T15:29:18.460

不幸**的是，不可能明确地让用户选择安装您的应用程序的位置**。

在安装之前，您的应用程序无法运行，因此您当时无法运行任何代码。

您提到的选项：“internalOnly”、“auto”和“preferExternal”只是选项。

根据个人经验，我建议您使用“auto”，除非您有一些限制迫使您使用“internalOnly”。

“preferExternal”可能会在一些旧设备上产生错误（“*无法打开 SD 卡*”或类似的东西，我不记得了）。

# bash - 如何让 awk 处理它解析的每个文件的 BEGIN 块？

> ID：12409619
> 
> 赞同：7
> 
> 时间：2012-09-13T15:21:20.593
> 
> 标签：bash, awk, cygwin

我有一个`awk`针对一对文件运行的脚本。我这样称呼它：

`awk -f script.awk file1 file2`

script.awk 看起来像这样：

```
BEGIN {FS=":"}
{ if( NR == 1 )
    { 
      var=$2
      FS=" "
    }
   else print var,"|",$0
} 
```

每个文件的第一行以冒号分隔。对于每一行，我希望它返回到默认的空白文件分隔符。

这适用于第一个文件，但失败，因为`FS`没有重置到`:`每个文件之后，因为 BEGIN 块只处理一次。

**tldr：有没有办法让 awk 为我传递的每个文件处理一次 BEGIN 块？**

我在 cygwin bash 上运行它，以防万一。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-13T15:41:22.100

如果您使用`gawk`的是版本 4 或更高版本，则会出现`BEGINFILE`问题。从手册：

> BEGINFILE 和 ENDFILE 是附加的特殊模式，它们的主体在读取每个命令行输入文件的第一条记录之前和读取每个文件的最后一条记录之后执行。在 BEGINFILE 规则中，如果文件可以成功打开，则 ERRNO 的值将是空字符串。否则，文件有问题，代码应该使用 nextfile 跳过它。如果不这样做，gawk 会为无法打开的文件产生通常的致命错误。

例如：

```
touch a b c
awk 'BEGINFILE { print "Processing: " FILENAME }' a b c 
```

输出：

```
Processing: a
Processing: b
Processing: c 
```

### 编辑 - 更便携的方式

正如*DennisWilliamson 所说*`FNR == 1`，您可以在脚本的开头实现类似的效果。除此之外，您可以`FS`直接从命令行进行更改，例如：

```
awk -f script.awk FS=':' file1 FS=' ' file2 
```

在这里，`FS`变量将保留它以前的任何值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-13T16:02:27.783

代替：

```
BEGIN {FS=":"} 
```

利用：

```
FNR == 1 {FS=":"} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-13T15:43:46.017

该`FNR`变量应该为您解决问题。`NR`它与文件中的范围 相同，因此对于每个输入文件它都重置为 1。

[http://unstableme.blogspot.ca/2009/01/difference-between-awk-nr-and-fnr.html](http://unstableme.blogspot.ca/2009/01/difference-between-awk-nr-and-fnr.html)
[http://www.unix.com/shell-programming-scripting/46931-awk-different-between -nr-fnr.html](http://www.unix.com/shell-programming-scripting/46931-awk-different-between-nr-fnr.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-08T15:09:41.030

当您想要一个 POSIX 兼容版本时，最好的做法是：

```
(FNR == 1) { FS=":"; $0=$0 } 
```

这表明，如果文件记录号 ( `FNR`) 等于 1，我们将重置字段分隔符`FS`。但是，您还需要重新解析`$0`和重置所有其他字段和`NF`内置变量的值。

`BEGINFILE`当且仅当记录分隔符 ( `RS`) 保持不变时，这等效于 GNU awk 4.x。

# haskell - 从 Get monad 读取位的 Monadic 方式

> ID：12409620
> 
> 赞同：2
> 
> 时间：2012-09-13T15:21:24.147
> 
> 标签：haskell, state-monad

我需要从 Get monad 中读取一些位。现在我的代码看起来像

```
readBits :: Int -> Int -> Get (Word32, Int)
readBits count state = ...

readValue :: Get (Word32, Word32)
readValue = do
   -- read fst bit count 
   (bits1, s0) <- readBits 5 0
   -- read bits1 bits as fst
   (fst, s1) <- readBits bits1 s0
   -- read snd bit count
   (bits2, s2) <- readBits 5 s1
   -- read bits2 bits as snd
   (snd, s3) <- readBits bits2 s2  
   -- flush incomplete byte
   when (s3 /= 0) $ skip 1
   return (fst, snd) 
```

我想把它包装成某种状态单子，有类似的代码

```
readBits :: Int -> BitReader Word32
readBits count = ...

runBitReader :: BitReader a -> Get a

readValue :: Get (Word32, Word32) 
readValue = runBitReader $ do
      bits1 <- readBits 5
      fst <- readBits bits1
      bits2 <- readBits 5
      snd <- readBits bits2
      return (fst, snd) 
```

我应该实现哪些功能？它们应该如何实施？

我查看了 Get 和 BitGet 源代码，但不完全理解发生了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T16:40:01.910

这是 Monad Transformers 最典型的用例。

您已经正确定义了大部分结构。回答您的问题

```
What functions should I implement? 
```

*   好吧，您首先需要将`Get`monad 包装到`StateT`Transformer 中以获取`BitReader`.
*   您需要实现正确的定义以`readBits`用于`get`获取当前状态并将`put`状态保存回来。
*   您需要运行包含的代码`BitReader`以获取`Get`Monad 中的输出。所以你需要定义`runBitReader`using `runStateT`。

回答你的下一个问题。

```
How should they be implemented? 
```

我已经给出了可能的实现。您仍然需要定义一些函数才能使其工作。

```
import Control.Monad.State 
import qualified Control.Monad.State as ST
import Data.Binary 

type BitReader = StateT Int Get

readBits' :: Int -> Int -> Get (Word32, Int)
readBits' = undefined   

readBits :: Int -> BitReader Word32
readBits n = do 
    s0 <- ST.get 
    (a,s1) <- lift $ readBits' n s0
    ST.put s1 
    return a

runBitReader :: BitReader a -> Get a
runBitReader w = do 
    (a,s) <- runStateT w 0
    return a

readValue = do
      fst <- readBits 5
      snd <- readBits 10
      return (fst, snd) 
```

我不知道查看代码对`Get`您有何帮助。你找错房子了。您需要阅读`State Monads`和`Monad Transformers`。

[您可以在此处](http://book.realworldhaskell.org/read/monad-transformers.html)阅读有关 monad 转换器的更多信息。

# javascript - 滚动时固定位置菜单直到它碰到相关容器的底部

> ID：12409621
> 
> 赞同：2
> 
> 时间：2012-09-13T15:21:31.897
> 
> 标签：javascript, jquery, css

我正在尝试模拟 Yelp 对他们的[Mo Map](http://www.yelp.com/search?find_desc=restaurants&find_loc=San%20Francisco,%20CA&ns=1)所做的事情。

我知道一旦元素到达某个屏幕滚动位置，如何将其翻转到固定位置，但是一旦它到达相对容器的底部，你如何关闭固定位置？

[css 粘性位置](http://updates.html5rocks.com/2012/08/Stick-your-landings-position-sticky-lands-in-WebKit)解决了这个问题，但由于它相当新，它没有很好的覆盖范围。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T15:54:01.057

您可以尝试执行以下操作：[little link](http://jsfiddle.net/glee/yLRVZ/)。

这是 JavaScript 的注释版本：（注意：这使用 jQuery，但不是必需的。如果您需要纯 JavaScript 版本，我很乐意提供一些提示）

```
var oritop = -100;
$(window).scroll(function() { //on scroll,
    var scrollt = window.scrollY; //get the amount of scrolling
    var elm = $(".box"); //get the box we want to make sticky
    if(oritop < 0) {
        oritop= elm.offset().top; //cache the original top offset
    }
    if(scrollt >= oritop) { //if you scrolled past it,
        elm.css({"position": "fixed", "top": 0, "left": 0}); //make it sticky
    }
    else { //otherwise
        elm.css("position", "static"); //reset it to default positioning
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-27T14:16:23.470

您可以通过标记所选项目来做到这一点。

滚动时以绝对位置放置菜单并标记所选项目的功能：

```
jQuery(window).scroll(function () {
    console.log(jQuery(window).scrollTop());
   // x = jQuery("html").scrollTop();  

    x = jQuery(window).scrollTop(); // corrigindo bug do chome

    /* Item marcado de acordo com a rolagem */
    switch (true) {
    case (x >= 600 && x < 2500): // ajuste aqui a area    
        jQuery('.coluna-222-right a').removeClass('ativo');
        jQuery('.coluna-222-right a.programacao').addClass('ativo');           
        break;
    case (x >= 2500 && x < 5000):
        jQuery('.coluna-222-right a').removeClass('ativo');  // ajuste aqui a area 
        jQuery('.coluna-222-right a.palestrantes').addClass('ativo');                  
        break;
    case (x >= 5000 && x < 5765):
        jQuery('.coluna-222-right a').removeClass('ativo');  // ajuste aqui a area 
        jQuery('.coluna-222-right a.local').addClass('ativo');
        break;
    } 

    if (x>40) {     
    jQuery(".coluna-222-right ul").css("position","absolute");
    jQuery(".coluna-222-right ul").css("top",x+20);   // ajuste aqui a posição do menu, pode usar - ao invés de +
    }

    else {          
    jQuery(".coluna-222-right ul").css("position","static");
    jQuery(".coluna-222-right ul").css("top","0");  
        }   

}); 
```

检查单击的项目：

```
jQuery("a").click(function () {
    jQuery("a").removeClass("ativo");
    jQuery(this).addClass("ativo");

}); 
```

[http://jsfiddle.net/67fwh/](http://jsfiddle.net/67fwh/)

# php - 收集观众 IP

> ID：12409623
> 
> 赞同：-1
> 
> 时间：2012-09-13T15:21:37.983
> 
> 标签：php, mysql, statistics, ip, visitor-statistic

我想知道如何获取我网站访问者的 IP 地址。然后，我会将其放入一个 SQL 表中，该表将计算他们访问的次数。我知道 PHP、JavaScript、HTML 和 MySQL，所以我只需要知道获取查看器 IP 的代码是什么，其余的我可以自己编写代码。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T15:24:13.013

您可以通过访问 $_SERVER 数组来获取用户的 IP 地址：

```
 echo $_SERVER['REMOTE_ADDR']; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T15:24:05.087

```
$_SERVER['REMOTE_ADDR']; 
```

[http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T15:22:35.580

只需查看`$_SERVER`变量。

那应该有你需要的所有信息。

# android - 安卓和sqlce

> ID：12409625
> 
> 赞同：2
> 
> 时间：2012-09-13T15:21:45.850
> 
> 标签：android, sql-server-ce

我想知道android是否可以使用sql compact edition。据我所知，它只支持 sqlite 数据库。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T19:50:57.917

不，这是不可能的，因为 SQL Compact 不支持 Android 平台。

# bash - 如何编写 bash 脚本以使用拆分和制表符在 Vim 中打开多个文件？

> ID：12409629
> 
> 赞同：4
> 
> 时间：2012-09-13T15:21:56.923
> 
> 标签：bash, vim

我正在尝试使用 bash 脚本自动化一些体力劳动。基本上，我使用多个拆分、vsplits 和选项卡在 1 个终端窗口（并且只有一个终端选项卡）中使用 Vim 打开多个文件。我现在将描述一个一般案例来解释我通常手动执行的操作。

我使用 3 个选项卡（从此处称为 A、B 和 C），并以 2x2 布局在每个选项卡中打开 4 个文件：

```
bash:~$ cd ~/Workspace/
bash:~/Workspace$ vim A11.m
:vsplit A12.m
:hsplit A22.m
"move cursor to A12.m"
:hsplit A21.m
:tabedit B11.m
:vsplit B12.m
:hsplit B22.m
"move cursor to B12.m"
:hsplit B21.m
:tabedit C11.m
:vsplit C12.m
:hsplit C22.m
"move cursor to C12.m"
:hsplit C21.m 
```

我想要创建的是一个 shell 脚本，其中文件名和位置是硬编码的，在执行时会执行上述所有操作。任何人都可以向我建议一种使这成为可能的方法（如果可能的话）？提前致谢！

ps：在我的 .vimrc 中，我添加了一些配置，例如 :split 在当前文件下方（而不是上方）打开新文件，并且 :vsplit 在右侧（而不是左侧）打开新文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T15:43:19.353

怎么样`:help mksession`？

1.  设置所有选项卡和窗口。

2.  将当前设置和布局保存`:mks /path/to/mysession.vim`到.`/path/to/mysession.vim`

3.  退出 Vim。

4.  打开 Vim`$ vim -S /path/to/mysession.vim`以恢复您的工作区。

* * *

你也可以使用`$ vim -c "so /path/to/mysession.vim"`或者，当 Vim 已经运行时，使用`:so /path/to/mysession.vim`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-13T15:55:16.613

至少有四种方法可以做到这一点：

1.  ```
    vim -s <(echo $':vsplit A12.m\n:hsplit A22.m\n…') 
    ```

2.  ```
    vim -S <(echo $'vsplit A12.m\nhsplit A22.m\n…') 
    ```

    它类似于@romainl，但是您自己创建脚本并且不使用除了 bash 脚本本身之外的任何文件（也可以只是别名或历史记录）。可以在 bash 中使用 HERE 字符串，它们更具可读性：

    ```
    vim -S <(cat <<<EOF
    vsplit A12.m
    hsplit A22.m
    …
    EOF
    ) 
    ```

3.  ```
    vim -c 'vsplit A12.m | hsplit A22.m | …' 
    ```

    您可以拥有多个`-c`按顺序运行的键，但不能超过十个，因此您必须将命令`-c`与 bar 连接在一起。

4.  而不是 bash 脚本使用 vim 之一：

    ```
    #!/usr/bin/vim -S
    vsplit A12.m
    hsplit A22.m
    … 
    ```

    . 然后你可以`chmod +x`像任何其他执行的文件一样运行它。`#!`正是出于这个原因，Vim 将其视为评论领导者。

# ruby-on-rails - 如何在 Rails 中翻译模型名称以获取语言环境 yml 文件中的错误消息？

> ID：12409635
> 
> 赞同：3
> 
> 时间：2012-09-13T15:22:09.103
> 
> 标签：ruby-on-rails, internationalization

我想在 rails 自动生成的错误消息中翻译模型的名称。

当我尝试为用户创建新帐户时，我的 rails 应用程序中出现以下视图错误。

```
AccountSmall is not valid 
```

这是正确的，因为应该存在新帐户的名称。

我现在如何`AccountSmall`通过我的 yml 语言环境翻译名称？

我试过这个没有运气：

```
de:
  # ...
  activerecord:
    models:
      AccountSmall: "Konto" 
```

提前谢谢了！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T16:24:28.260

而不是像这样在您的语言环境中用作键`AccountSmall`：`account_small`

```
de:
  activerecord:
    models:
      account_small: "Konto" 
```

# iphone - MKMapView：显示用户当前位置时引脚颜色变化

> ID：12409636
> 
> 赞同：0
> 
> 时间：2012-09-13T15:22:10.840
> 
> 标签：iphone, ios, ios5, mkmapview, mkannotation

我有不同位置的自定义图钉图像，我可以同时显示所有不同的图钉。但问题是，当我显示用户的当前位置时，所有引脚颜色都会改变。

这是代码：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation {

if ([annotation isKindOfClass:[MKUserLocation class]])
    return nil;

if ([annotation isKindOfClass:[MapAnnotation class]]) {

    MKAnnotationView *test=[[MKAnnotationView alloc] 
                            initWithAnnotation:annotation reuseIdentifier:@"AnnotationIdentifier"];

    test.canShowCallout = YES;
    //        test.animatesDrop = YES;

    UIButton *rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    test
    .rightCalloutAccessoryView = rightButton;

    switch (_pushpinTag) {
        case 5:
            test.image = [UIImage imageNamed:@"pushpin_green.png"];
            break;

        case 6:
            test.image = [UIImage imageNamed:@"pushpin_blue.png"];
            break;

        case 7:
            test.image = [UIImage imageNamed:@"pushpin_black.png"];
            break;

        case 8:
            test.image = [UIImage imageNamed:@"pushpin_yellow.png"];
            break;

        case 3:
            test.image = [UIImage imageNamed:@"pushpin_red.png"];
            break;

        default:
            break;
    }

    return test;
}
} 
```

现在在不同的按钮按下时，会显示不同的引脚（带有自定义图像）。假设我有绿色、蓝色、黑色和黄色的别针。我按下按钮显示绿色引脚，然后是蓝色，然后是黑色，所有引脚都显示在各自的图像中。但是当我按下按钮以显示用户当前位置时，所有 Pins 都变为最后一次按下的 Pin，即黑色。

这是显示用户当前位置的代码：

```
- (IBAction)currentLocationButton:(id)sender {

_mapView.showsUserLocation = YES;
[_mapView setUserTrackingMode:MKUserTrackingModeFollowWithHeading animated:YES];

} 
```

谁能指出我在做什么错？

谢谢大家 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T21:15:51.843

您的注释需要包含一些可用于在 viewForAnnotation 中设置其颜色的内容。MKAnnotation 协议将所有注释定义为具有标题、副标题和坐标。如果标题和副标题不足以确定您想要的 pin 的颜色，请编写您自己的类并添加一个名为 pinType 的属性。然后，当您根据用户按下的按钮创建注释集 pinType 时。当 viewForAnnotation 被调用时，您执行通常的 dequeueReusableAnnotationViewWithIdentifier/initWithAnnotation 以准备好视图，将提供的注释转换为您的类并使用其 pinType 设置图像。这是一些未经测试的代码，足以让您了解

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
{
    if ([annotation isKindOfClass:[MyAnnotation class]])
    {
        MyAnnotation* myAnno = (MyAnnotation)annotation;
        MKAnnotationView *test;

        test = (MKAnnotationView *)[_mapView dequeueReusableAnnotationViewWithIdentifier:@"AnnotationIdentifier"];
        if (view == nil)
        {
            test=[[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"AnnotationIdentifier"]; 
        } 
        switch(myAnno.pinType)
        {
            case kBLACK_TAG: test.image = [UIImage imageNamed:@"pushpin_black.png"]; 
                             break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T16:01:06.057

你没有使用可重用的视图

```
MKAnnotationView *test;

test = (MKAnnotationView *)[_mapView dequeueReusableAnnotationViewWithIdentifier:@"AnnotationIdentifier"];
if (view == nil)
{
 test=[[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"AnnotationIdentifier"]; 
 test.tag = _pushpinTag;    // set tag of new pins to _pushpinTag
} 
```

其次，您的一般错误是逻辑错误。每当 iOS 请求您的注释视图时，您都会根据 _pushpinTag 的值设置图像，这就是为什么您的所有引脚都重绘为最后选择的颜色的原因。如果你还在你的 pin 上设置了一个 TAG 值，如下所示：

```
static int kGREEN_TAG = 5;
static int kBLUE_TAG = 6;
static int kBLACK_TAG = 7;
static int kYELLOW_TAG = 8;

switch (test.tag)
{
 case kBLACK_TAG:
            test.image = [UIImage imageNamed:@"pushpin_black.png"]; 
            break; 
.
.
.
} 
```

# java - Java异常处理——捕捉超类异常

> ID：12409638
> 
> 赞同：3
> 
> 时间：2012-09-13T15:22:14.507
> 
> 标签：java, exception, exception-handling

我有一个关于在 Web 应用程序中处理异常的问题。我经常听说捕获超类 Exception 是个坏主意。

我经常编写代码来捕获 struts action / java servlet 类中的所有异常。

```
try {
     // call business facade
     // business facade calls DAO
     // any exception from DAO bubbles up 
} catch (Exception e) {
  log.error("error", e);
} 
```

如果我们没有捕获超类异常。我们如何处理任何意外的运行时错误并适当地记录它们

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T15:23:36.790

您可以为您的项目[设置一个`DefaultUncaughtExceptionHandler`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#setDefaultUncaughtExceptionHandler%28java.lang.Thread.UncaughtExceptionHandler%29)来处理未捕获的异常。例如，这是我在一个项目中的一段代码：

```
private static void setDefaultUncaughtExceptionHandler() {
    try {
        Thread.setDefaultUncaughtExceptionHandler(new Thread.UncaughtExceptionHandler() {

            @Override
            public void uncaughtException(Thread t, Throwable e) {
                logger.error("Uncaught Exception detected in thread {}", t, e);
            }
        });
    } catch (SecurityException e) {
        logger.error("Could not set the Default Uncaught Exception Handler", e);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T15:35:47.360

在 Web 应用程序和您发布的代码片段中，您如何处理 root `Exception`？看起来你抓住了它，记录了它，然后继续前进。

在 webapp 中 99% 的情况下，最好允许异常冒泡到`<error-page>`web.xml 中的配置。

在我看来，如果您在“调用业务外观”时遇到未知错误，那么最好让您的应用程序继续处理其余的逻辑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T15:23:21.307

添加多个 catch 块并将 Exception catch 保留为最后一个。

```
try {
     // call business facade
     // business facade calls DAO
     // any exception from DAO bubbles up 
} catch(SuperClassException se)
{
//Do what you want to do when this exception happens.
}catch (Exception e) {
  log.error("error", e);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-09T05:58:55.747

try 中的代码主要指定并标记您可以捕获的已检查异常。此外，查看 try 中的代码，您可以直观地了解失败案例的场景，因此可以添加未检查/运行时异常捕获块。

# python - 一个实验来更好地理解 HTTP 状态码的作用

> ID：12409642
> 
> 赞同：0
> 
> 时间：2012-09-13T15:22:17.957
> 
> 标签：python, http, browser, http-status-codes

## 服务器设置和浏览器检查

```
from BaseHTTPServer import HTTPServer, BaseHTTPRequestHandler

class customHTTPServer(BaseHTTPRequestHandler):
    def do_GET(self):
        self.send_response(200)
        self.send_header('Content-type', 'text/html')
        self.end_headers()
        self.wfile.write('<HTML><body>Get!</body></HTML>')
        return

server = HTTPServer(('',8080),customHTTPServer)
print 'server started at port 8080'
server.serve_forever() 
```

现在，当我`http://localhost:8080`使用浏览器访问时，我可以看到预期的`Get!`.

## 意外观察

**测试 1**：

现在我在我的服务器中使用不同的状态码进行了测试。我试过这些状态码：`301`, `302`, `400`, `402`, `403`, `404`, `405`, `406`, `407`, `408`, `418`, `500`, `501`, `502`, `504`,`505`和`511`.

**（Q1）奇怪的是，当使用不同的状态码（除了`407`）我得到与使用状态码相同的行为`200`。这是为什么？**

**测试 2**

其次，我替换`self.wfile.write('<HTML><body>Get!</body></HTML>')` 了`self.wfile.write('')`我在第一次测试中测试的所有不同状态代码。当我使用状态码`403`, `404`, `500`, `501`, `502`,`504`或者`505`我现在在浏览器上收到特定的浏览器消息 ( `403 Forbidden`, `404 not found`, ...)。

**(Q2) 为什么我只收到使用这些状态码的特定浏览器消息，而没有使用其他状态码？**

**概括**

我可以区分 3 种类型的行为：

*   使用状态码`301`, `302`, `400`, `402`, `405`, `406`,或与使用状态码没有区别，`408`无论我发送的是空字符串还是非空字符串。`418``511``200`
*   使用状态码`403`, `404`, `500`, `501`, `502`,`504`或`505`将在浏览器上创建特定的浏览器消息，但仅在发送空字符串时。
*   无论我发送的是空字符串还是非空字符串，使用状态码`407`都会返回特定的浏览器消息（显示错误）。`323`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T15:31:42.750

(A1) 当您发送错误代码但仍返回正文时，浏览器将假定它是您的网络服务器发送的自定义错误页面。这是例如 stackoverflow 为您提供未知文档请求的[自定义页面](https://stackoverflow.com/notfound)的方式，而不是 404 的默认浏览器页面。

(A2) 检查没有显示浏览器消息的状态码的含义，并问自己在返回它们时显示浏览器消息是否明智。此外，最有可能的是，在显示或不显示消息时，它会因浏览器而异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T15:39:03.447

以 404 Not Found 为例。站点通常会生成一个自定义 404 页面，其中包括一些站点导航方式。这比浏览器生成的错误消息更有帮助。因此，如果服务器返回 404 的内容，浏览器就会显示它。

它还允许有关特定错误的更多信息。例如，403 Forbidden 可能会提供有关限制访问资源的原因或如何申请访问权限的信息。

[如果您阅读规范](https://www.rfc-editor.org/rfc/rfc2616)，这并不奇怪；它定义了哪些状态代码可以包含正文，哪些不能（例如 204 No Content :)。

请注意，如果您使用不同的 UA，例如 wget，您可能会注意到它处理 404 响应的方式不同。

# pyqt - PyQt QSplitter：有没有办法将方向定义为垂直和水平？

> ID：12409647
> 
> 赞同：1
> 
> 时间：2012-09-13T15:22:34.410
> 
> 标签：pyqt, orientation, splitter, qsplitter

如果我希望能够在两个方向上更改拆分器内对象的尺寸。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T17:03:24.773

那么，这意味着你有 4 个小部件，是吗？无需自己进行子类化和处理，您将不得不使用 3 个拆分器，1 个垂直，2 个水平：

```
from PyQt4.QtCore import Qt
from PyQt4.QtGui import QWidget, QApplication, QSplitter, QLabel, QVBoxLayout

class MyWidget(QWidget):
    def __init__( self, parent = None ):
        super(MyWidget, self).__init__(parent)

        self.setMinimumWidth(400)
        self.setMinimumHeight(400)

        # create widgets
        a = QLabel('A' ,self)
        b = QLabel('B', self)
        c = QLabel('C', self)
        d = QLabel('D', self)

        for lbl in (a, b, c, d):
            lbl.setAlignment(Qt.AlignCenter)

        # create 2 horizontal splitters
        h_splitter1 = QSplitter(Qt.Horizontal, self)
        h_splitter1.addWidget(a)
        h_splitter1.addWidget(b)

        h_splitter2 = QSplitter(Qt.Horizontal, self)
        h_splitter2.addWidget(c)
        h_splitter2.addWidget(d)

        h_splitter1.splitterMoved.connect(self.moveSplitter)
        h_splitter2.splitterMoved.connect(self.moveSplitter)

        self._spltA = h_splitter1
        self._spltB = h_splitter2

        # create a vertical splitter
        v_splitter = QSplitter(Qt.Vertical, self)
        v_splitter.addWidget(h_splitter1)
        v_splitter.addWidget(h_splitter2)

        layout = QVBoxLayout()
        layout.addWidget(v_splitter)
        self.setLayout(layout)

    def moveSplitter( self, index, pos ):
        splt = self._spltA if self.sender() == self._spltB else self._spltB
        splt.blockSignals(True)
        splt.moveSplitter(index, pos)
        splt.blockSignals(False)

if ( __name__ == '__main__' ):
    app = QApplication([])
    widget = MyWidget()
    widget.show()
    app.exec_() 
```

您可以定义自己的 QSplitterHandle 类来控制拆分器句柄的外观，使其看起来也更像“四边形”。

# ubuntu - Powershell与Mac机器上的终端相同吗？

> ID：12409651
> 
> 赞同：0
> 
> 时间：2012-09-13T15:22:41.527
> 
> 标签：ubuntu, powershell, terminal

我在 ubuntu 操作系统上使用终端，现在我在 Windows 7 上看到了 powershell。在进入 powershell 之前，我想知道 powershell 是否与 ubuntu 和 mac 上的终端相同，还是我必须学习更多和新的语法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T15:40:32.030

这是一个非常相似的*概念*，但在语法、风格和工作流程方面它们是完全不同的环境。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T15:40:48.770

powershell 中有一些别名（例如 ls），可以让来自 *nix 背景的人更容易使用，但实际上您必须学习一套全新的语法和命令。

# objective-c - 如何捕捉 NSWorkspaceDidPerformFileOperationNotification？

> ID：12409661
> 
> 赞同：3
> 
> 时间：2012-09-13T15:23:02.323
> 
> 标签：objective-c, cocoa, notifications, nsworkspace

我试图在文件操作执行后获取回调，但我无法捕获 NSWorkspaceDidPerformFileOperationNotification 发布。

```
[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(finderDidFileOperation:) name:NSWorkspaceDidPerformFileOperationNotification object:[NSWorkspace sharedWorkspace]];
[[NSWorkspace sharedWorkspace] performFileOperation:fileOp source:source destination:item.fullPath files:objects tag:&tag]; 
```

> 对象：无

也没有工作和

```
[[NSWorkspace sharedWorkspace] addObserver:self forKeyPath:NSWorkspaceDidPerformFileOperationNotification options:NSKeyValueObservingOptionNew context:nil]; 
```

也。

我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T15:34:53.047

我认为这里的关键是`NSWorkspace`将通知发布到其通知中心，而不是全局默认的。从[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWorkspace_Class/Reference/Reference.html)：

> 在这个方法返回之前，它会发布一个 NSWorkspaceDidPerformFileOperationNotification 到 NSWorkspace 对象的通知中心。

尝试使用该通知中心注册通知，如下所示：

```
[[[NSWorkspace sharedWorkspace] notificationCenter] 
    addObserver:self 
    selector:@selector(finderDidFileOperation:) 
    name:NSWorkspaceDidPerformFileOperationNotification 
    object:[NSWorkspace sharedWorkspace]]; 
```

# django - 如何在 django 模板中动态设置块名称？

> ID：12409664
> 
> 赞同：1
> 
> 时间：2012-09-13T15:23:05.837
> 
> 标签：django, django-templates

为了更容易的模板继承，我想动态确定父母**{% block %}**名称的名称。

为此，我有两个父模板。主要是这样的

```
# main parent
...
{% block details %}{% endblock %}
... 
```

还有一个：

```
# other parent
...
{% block content %}{% endblock %}
... 
```

因为这个模板经常使用并且块命名的改变会导致很多工作，我尝试了一些带有布尔值的东西，`main_template`指示在子模板中使用哪个块名称：

```
# child template
...
{% block main_template|yesno:'details,content' %}
...
{% endblock %}
... 
```

这不起作用。有没有其他方法可以得到我描述的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:36:06.913

不，这行不通—— 的参数`{% block %}`是一个标签，而不是一个值，所以你不能在那里使用上下文变量。

可能有一些方法可以解决这个问题，但它们不会是可维护的。老实说，最好努力（这应该只是一个搜索和替换操作）来对齐不同基本模板之间的块名称。

Django 模板继承的工作方式，子模板*需要*了解其父模板的块结构。如果您有一个可以从多个不同父级继承的子模板，那么它们实际上都需要具有相同的结构。

# android - 使用 DDMS - 确定谁分配了内存

> ID：12409667
> 
> 赞同：2
> 
> 时间：2012-09-13T15:23:12.280
> 
> 标签：android

我看到我的应用程序正在分配 28 MB 的 1 字节数组。如何检查此内存分配的来源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T17:15:34.050

检查这个[博客](http://android-developers.blogspot.in/2011/03/memory-analysis-for-android.html)。

您需要转储 hprof 数据并签入[MAT](http://www.eclipse.org/mat/)

# java - 正则表达式获取 " 符号之间的文本

> ID：12409669
> 
> 赞同：0
> 
> 时间：2012-09-13T15:23:18.520
> 
> 标签：java, regex

我得到了这个字符串：

```
"streamUrl":"http://media.mysite.com/stream/WF9bRDueA0sm?stream_token=f2EmQ", 
```

好的，现在我在java中有一个函数

```
 Pattern p = Pattern.compile(
                        "<row><column>(.*)</column></row>",
                        Pattern.DOTALL
                    );

                Matcher matcher = p.matcher(code); //That is the code up, "streamUrl...

                if(matcher.matches()){
                        testo2.setText(matcher.group(1));

            } 
```

好的，现在我必须更改正则表达式模式才能在

```
"streamUrl":" 
```

和

```
", 
```

那是特殊的字符，我不知道如何将它添加到模式中，我试过了

```
Pattern.compile(
                    "Pattern.compile(
                    ""streamUrl":"(.*)",",
                    Pattern.DOTALL
                );(.*)</column></row>",
                    Pattern.DOTALL
                ); 
```

但它不起作用，有人可以帮助我吗？我需要得到这个：[http](http://media.mysite.com/stream/WF9bRDueA0sm?stream_token=f2EmQ) ://media.mysite.com/stream/WF9bRDueA0sm?stream_token= f2EmQ 谢谢你的建议，matteo :)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T15:29:44.450

您可以尝试使用 JSONTokener

```
try  {
    JSONTokener tokener = new JSONTokener(yourString);
    JSONObject jsonObj = (JSONObject) tokener.nextValue();
    String output = jsonObj.getString("streamUrl");
} catch (JSONException e) {
    Log.v("Logtag", "Problem in decoding json");
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T15:31:02.513

你匹配它的方式是：

```
String regex = "\"streamUrl\":\"(.*)\",";
Pattern p = Pattern.compile(regex); 
```

但正如评论中所述，使用 JSON 会更好。

# visual-studio-2010 - 比较两个对象的简单方法？

> ID：12409673
> 
> 赞同：1
> 
> 时间：2012-09-13T15:23:28.437
> 
> 标签：visual-studio-2010, linq, c#-4.0, lambda, compare

可以说我有以下课程

```
public class Test
{
    public int prop1 { get;set; }
    public string prop2 { get;set; }
    public Type prop3 { get;set; }
} 
```

如果我有这个类的两个实例，什么是比较对象的快速方法，但同时允许我检查一个属性是否是其他东西，假设它与其他对象属性不匹配。目前我只是在做大量的 if 语句，但这感觉像是一种糟糕的做事方式。

我想要的功能示例；如果第一个实例 prop1 与第二个实例的 prop1 不匹配，我仍然可以检查第一个实例的 prop1 是否为 10 或其他值。

是的，这个例子非常粗略，但实际代码非常庞大，所以我无法将其发布在这里。

谢谢

**编辑**

我应该注意，我不能编辑类测试，因为我不拥有它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T15:38:11.153

您可以构建自己的比较器（未经测试的代码）

```
public class TestComparer : IEqualityComparer<Test>
{
    public bool Equals( Test x, Test y )
    {
        if( ReferenceEquals( x, y ) )
            return true;

        if( ReferenceEquals( x, null ) || ReferenceEquals( y, null ) )
            return false;

        return x.prop1 == y.prop1 &&
               x.prop2 == y.prop2 &&
               x.prop3 == y.prop3;
    }

    public int GetHashCode( Test entry )
    {
        unchecked
        {
            int result = 37;

            result *= 397;
            result += entry.prop1.ToString( ).GetHashCode( );
            result *= 397;
            result += entry.prop2.GetHashCode( );
            result *= 397;
            result += entry.prop3.ToString( ).GetHashCode( );

            return result;
        }
    }
} 
```

然后简单地调用：

```
Test a = new Test( );
Test b = new Test( );

var equal = new TestComparer( ).Equals( a, b ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:38:01.727

在无法编辑课程本身的情况下，我会说您的选择相当有限。您总是可以在某处抽象出代码，然后创建一个比较函数，该函数接受 2 个对象并返回一个布尔值。

```
public static bool Compare(Test test1, Test test2)
{
     //May need to add some null checks
     return (test1.prop1 == test2.prop1) 
       && (test1.prop2 == test2.prop2); 
     //...etc
} 
```

除非您实际上确实具有***相同***的对象，而不仅仅是恰好具有所有相同属性值的 2 个对象，在这种情况下您可以简单地执行...

```
if (test1 == test2) 
```

但我从你的问题猜想情况并非如此。

# web - Web 堆栈 - 常见 Web 堆栈/环境的列表

> ID：12409677
> 
> 赞同：4
> 
> 时间：2012-09-13T15:23:38.683
> 
> 标签：web, development-environment

只是出于好奇——我知道有 LAMP——Linux、Apache、MySQL 和 PHP。但是还有哪些其他 Web 堆栈替代方案的缩写？像 LAMR - Linux、Apache、MySQL Ruby on Rails 之类的东西？

有人可以提供各种常见 Web 堆栈/环境的列表吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-04-26T13:19:38.150

我希望在这里找到一个概述，但可惜的是，我只是插入一个我最近遇到的首字母缩略词，因为它代表了我自己；WISA 堆栈：

*   视窗（操作系统）
*   IIS（应用程序服务器）
*   SQL Server（数据库）
*   ASP.NET（服务器端语言）

所以希望这让你有点希望:)。请注意这里缺少客户端。就我个人而言，我主要使用 AngularJS（使用 Bootstrap 布局）和 WEBAPI (2) 来处理 AJAX 调用。但它们并没有创建特别好的首字母缩略词。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T07:29:44.747

我认为新的术语 de-jour 是“Web-Stack”，因为您现在需要一个 LAMP 和几个 LED。

过去，LAMP 是一个首字母缩略词，它为开源社区的 Web 堆栈选项提供了一个漂亮的整洁的鞠躬。

即：灯：

*   Linux
*   阿帕奇
*   MySQL
*   蟒蛇 || Perl || php。

    *   python == mod_python 和 mod_wsgi... 它为您提供 django、turbogears、web2py 等。
    *   perl == mod_perl，它为您提供 Catalyst、Mason 等。
    *   PHP == Zend, Yii

这些被认为是“开源社区”堆栈，一个整洁的首字母缩写词 LAMP 很好地总结了它。现在我认为您必须为 dbms 插槽添加 2 个替代方案。SQLite && PostgreSQL，正如您所指出的，应用程序堆栈语言槽也明显缺失。Ruby-on-Rails。

最后我觉得有义务指出这个空间已经增长了很多： [http ://en.wikipedia.org/wiki/Comparison_of_web_application_frameworks](http://en.wikipedia.org/wiki/Comparison_of_web_application_frameworks)

随着 Web 2.0 的出现以及环境中的其他必需品，如 XMPP 或 AMQP。术语 LAMP 已被更通用的 Web-Stack 取代。

我强烈建议您在开始 Web 堆栈之旅之前调查用户社区的规模。还请记住，当 LAMP 一词被创造出来时，客户端技术的“爆炸式增长”并没有变得如此普遍。

[http://en.wikipedia.org/wiki/LAMP_(software_bundle](http://en.wikipedia.org/wiki/LAMP_(software_bundle) )

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-11T14:48:01.993

意思是

*   MongoDB
*   express.js
*   角.js
*   节点.js

这些技术的共同点是 javascript。使用 MEAN 堆栈的开发人员可以推断数据在不同技术中的存储、搜索和显示方式相同。

该堆栈通常在其前面还有一个 Nginx 服务器，用于安全和负载平衡。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-01T15:08:11.690

梅尔恩

*   MongoDB
*   Express.js
*   反应.js
*   节点.js

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-22T00:43:02.997

@bart 我一直听说你的“wisa”堆栈是 WINS：

*   **窗口**_
*   **我**是
*   . **网络**_
*   **sql **_****

 **您说这里缺少客户端，但事实并非如此。带有剃须刀和异步 js 的 .NET MVC 是 .NET 框架的固有部分，既是服务器端框架又是客户端框架......当然你可以在上面添加一个 js 框架，但这不是必需的。

**编辑：** 我刚刚发现 WINS 和 WISA 是不同的，[维基](https://en.wikipedia.org/wiki/Solution_stack)必须说：

*   **WISA**使用 A = [ASP.NET](https://en.wikipedia.org/wiki/ASP.NET)表示 .NET 框架中的 ASP（活动服务器页面），作为后端框架，允许使用任何 .NET 支持的语言（C#、VB）进行编码。
*   **WINS**使用 N = [.NET](https://en.wikipedia.org/wiki/.NET_Framework)代表整个 .NET 框架**

# c# - 在 VS 2010 调试器中使用 SqlConnection 执行查询：表达式或语句的评估超时

> ID：12409678
> 
> 赞同：0
> 
> 时间：2012-09-13T15:23:40.650
> 
> 标签：c#, sql-server, vb.net, visual-studio-2010, visual-studio

当我尝试在 VS 2010 调试器中执行一些 SQL 代码时，我收到以下错误消息：

**`Evaluation of expression or statement timed out`**

我正在使用 System.Data.SqlClient.SqlConnection 在 SQL Server 2008 R2 上执行我的查询。有没有办法告诉 Visual Studio 调试器等到我的查询返回，以便我可以在调试器中看到查询的结果？

# ios - 为 iPhone 5 屏幕和小屏幕设备设计

> ID：12409686
> 
> 赞同：2
> 
> 时间：2012-09-13T15:24:01.440
> 
> 标签：ios, iphone-5

> **可能重复：**
> [如何处理 iPhone 5 的屏幕尺寸？](https://stackoverflow.com/questions/12396545/how-to-deal-with-iphone-5-screen-size)

我们知道，不是为新屏幕设计的应用程序运行时会带有边框。但是为更大屏幕设计的应用程序呢？我们应该如何实现我们希望它们与新的更大屏幕和旧设备的屏幕一起使用的应用程序？为 iPhone 5 设计的应用程序如何处理较小的屏幕，或者更确切地说，程序员应该如何处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:54:50.607

开发人员将开始使用称为约束的新尺寸系统。这样，应用程序将适合小屏幕和大屏幕。

我希望这是您正在寻找的答案！

# php - 将朋友邀请指向页面选项卡应用程序？

> ID：12409688
> 
> 赞同：0
> 
> 时间：2012-09-13T15:24:02.890
> 
> 标签：php, facebook, notifications, request, friend

我制作了一个 facebook 应用程序并将其添加到粉丝页面。我还添加了一些代码来发送好友请求，并在对话后重定向良好。

但是，朋友收到的通知都指向这种类型的 URL：

[https://apps.facebook.com/APP_NAME/?fb_source=notification&ref=notif](https://apps.facebook.com/APP_NAME/?fb_source=notification&ref=notif)

而不是这种类型：

[https://www.facebook.com/PAGE_NAME/app_123456789](https://www.facebook.com/PAGE_NAME/app_123456789)

有没有办法设置通知，使它们指向第二个 URL？

我当前的应用程序设置如下：

**使用 Facebook 登录的网站**

*   网站网址：[https ://www.facebook.com/PAGE_NAME/app_123456789](https://www.facebook.com/PAGE_NAME/app_123456789)

**脸书上的应用**

*   画布网址：[http](http://ssl.mysite.net/) ://ssl.mysite.net/ ...
*   安全画布 URL：[https](https://ssl.mysite.net/) ://ssl.mysite.net/ ...

**页面选项卡**

*   页面标签 URL：[http](http://ssl.mysite.net/) ://ssl.mysite.net/ ...
*   安全页面标签 URL：[https](https://ssl.mysite.net/) ://ssl.mysite.net/ ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T15:29:34.807

> 但是，朋友收到的通知都指向这种类型的 URL：

当然可以——请求文档非常清楚地提到了这一点，接受请求将始终将用户带到应用程序的画布 URL。

> 有没有办法设置通知，使它们指向第二个 URL？

不可以。但是您可以在画布 URL 上使用 JavaScript 重定向到页面选项卡 URL。

如果您想在一般情况下执行此操作，或者仅在特定情况下执行此操作（完全是请求还是只是对画布页面的正常访问，请求是否在其数据参数中存储了特殊参数等） - 这取决于你。

# silverlight - 如何使用 MVVM 在 Silverlight 中获取选定的单元格值

> ID：12409689
> 
> 赞同：0
> 
> 时间：2012-09-13T15:24:03.257
> 
> 标签：silverlight, mvvm

我有一个有五列的数据网格。我希望用户选择单元格的值。我能够获得选定的行索引，但不能获得列索引。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T16:29:03.220

获取当前单元格的列索引的一种方法是继承 DataGrid 并添加一个额外的依赖属性：

```
public class ExtendedDataGrid : DataGrid
{
    public ExtendedDataGrid() :
        base()
    {
        CurrentCellChanged += ExtendedDataGrid_CurrentCellChanged;
    }

    public static readonly DependencyProperty SelectedColumnIndexProperty =
        DependencyProperty.Register("SelectedColumnIndex", typeof(int), typeof(ExtendedDataGrid), null);

    public int SelectedColumnIndex
    {
        get { return (int)GetValue(SelectedColumnIndexProperty); }
        set { SetValue(SelectedColumnIndexProperty, value); }
    }

    private void ExtendedDataGrid_CurrentCellChanged(object sender, EventArgs e)
    {
        SelectedColumnIndex = Columns.IndexOf(CurrentColumn);
    }
} 
```

此解决方案依赖于`CurrentCellChanged`事件来在当前单元格更改时更新所选列的索引。

无论列的任何重新排序如何，此解决方案都会为同一列返回相同的索引。换句话说，如果一列的索引为 2，而您将该列拖到网格中的其他位置，它的索引仍然为 2。

# asp.net-mvc - 排序列表 MVC 视图页面中的对象

> ID：12409692
> 
> 赞同：1
> 
> 时间：2012-09-13T15:24:08.787
> 
> 标签：asp.net-mvc, jquery, sorting

我有一个`ShoeItem`类，我在其中存储一些`Shoe`属性，例如`Model`, `Price`, `Color`..

在我的`Index`视图中`ShoeController`，我使用一些过滤器向用户展示了他/她请求的用户 a `List`，`shoes`这里没有问题..

该列表显示在默认的 MVC 3.0 列表视图中。我`@Model`的视图页面（“Index.cshtml”）是类型`List<ShoeItem>`

但是，我希望用户能够根据这些属性升序或降序对结果列表进行排序，但我不能......

我尝试通过在中发回as 参数来调用 a `PartialViewResult`，将其排序回那里并使用此排序列表显示 a ，但 List 参数作为 null 到达控制器。`ShoeController``List<ShoeItem>``Ajax.BeginForm``PartialView`

我还尝试使用 jQuery 进行客户端排序，但无法`List<ShoeItem>`从 jQuery 访问对象。如果您想查看，我可以发布代码，但这很简单。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T17:08:29.300

有2个选项

1.  向传递排序参数的服务器发出 AJAX 请求，例如`/shoes/?sort=model&dir=asc`。将这些参数带入控制器操作，检索项目，对它们进行排序并返回 JsonResult。通过 JavaScript 呈现新列表。
2.  使用排序参数向服务器发出 AJAX/整页请求。将这些参数带入控制器操作，检索项目并返回用于 AJAX 的 PartialView 和用于整页请求的 ViewResult。

第一种方法更难维护，因为您最终会从 2 个不同的地方进行渲染 - 服务器和客户端。尽管通过使用某种模板库（如 mustache）会更容易：[https](https://github.com/janl/mustache.js) ://github.com/janl/mustache.js 。

对于第二个选项，您的控制器将如下所示。我做了一些假设，它可能会被简化，但它会帮助你开始。如果您的鞋子存储在数据库中，请确保您在 IQueryable 上执行过滤和排序 - 这样数据库服务器将执行此操作，而不是将数据返回到 .NET，然后对其进行过滤。

```
public ViewResult Index(int? colour, string sort, string dir)
{
    IQueryable<Shoe> shoes = shoeService.GetAllShoes();

    // Filter by something
    if(colour.HasValue)
        shoes = shoes.Where(s => s.Colour = colour);

    // Order the items
    switch((sort ?? "").ToLower())
    {
        case "colour":
            if(dir == "desc")
                shoes = shoes.OrderByDescending(s => s.Colour.Name);
            else
                shoes = shoes.OrderBy(s => s.Colour.Name);
            break;
    }

    if(Request.IsAjaxRequest())
        return PartialView(shoes.ToList());
    return View(shoes.ToList());
} 
```

# objective-c - CCSprite Fadeout with children

> ID：12409697
> 
> 赞同：4
> 
> 时间：2012-09-13T15:24:21.853
> 
> 标签：objective-c, ccsprite

我正在使用 a`CCSprite`和其他一些`CCSprite`添加为子对象的对象，我正在使用的其他动画（缩放和旋转）效果很好，并且子对象也是动画的。但是当我使用时`CCFadeOut`，它只会淡化父级。

我读过淡出不适用于孩子。除了遍历每个孩子并在每个孩子上调用淡出之外，还有其他方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-05-19T12:13:35.190

从 Cocos2d 版本开始。2.1，CCNodeRGBA 有一个“CascadeOpacity”BOOL 属性。在父 CCSprite 上将其设置为 YES 以淡出子节点以及父节点。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-13T17:55:16.943

此答案已被[Gregory Johnson Answer废弃](https://stackoverflow.com/a/23737473/456434)

* * *

好吧，我猜你的选择是（从最简单到复杂排列）：

1）只需进入图书馆的`CCSprite`课程，然后破解它。`cocos2d`（<3 个开源）。（**不推荐**）。

```
-(void) setOpacity:(GLubyte) anOpacity
{
opacity_ = anOpacity;

// special opacity for premultiplied textures
if( opacityModifyRGB_ )
    [self setColor: colorUnmodified_];

    [self updateColor];

    for (id<CCRGBAProtocol> child in children ) {
        // You should check if child responds to selector or conforms to CCRGBAProtocol.
        [child setOpacity:opacity];
    }
} 
```

2）与上面的解决方案相同，除了子类`CCSprite`到`MyCCSprite`，并从它继承而不是`CCSprite`。最后，`setOpacity:`在新类中覆盖：

```
- (void) setOpacity:(GLubyte)opacity
{
    [super setOpacity:opacity];
    for(id<CCRGBAProtocol> child in children) {
        [child setOpacity:opacity];
    }
} 
```

3)通过迭代`CCFade`对父项**和子项运行操作。**（傻，如果你问我）。

**重要提示：**请，请，请记住，这`opacity`是`CCRGBAProtocol`. 不是所有`CCNode`的班级都有。所以，请务必记住这一点。

**参考：**

1.  [http://www.cocos2d-iphone.org/forum/topic/1252](http://www.cocos2d-iphone.org/forum/topic/1252)

# windows-phone - windows phone 页面加载速度

> ID：12409702
> 
> 赞同：0
> 
> 时间：2012-09-13T15:24:49.247
> 
> 标签：windows-phone

从一个Page到下一个Page，在UI中绑定了一个属性，这个属性需要浪费时间操作一次，所以页面很长时间不来了，有什么办法可以提高速度。

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e) {
    string value = string.Empty;
    IDictionary<string, string> queryString = this.NavigationContext.QueryString;
    if (queryString.ContainsKey("Type"))
    {
        this.Type = queryString["Type"];
        new Thread(() => {
            mtv.AddDistanceForList();
        }).Start();

    }
    else
    {
            GetMovieThreater();
    }
    base.OnNavigatedTo(e); }  

private void GetMovieThreater() {
    string movieId = PhoneApplicationService.Current.State["MovieId"] as string;

    mtv.SelectThreaterByMovie(movieId);
    mtv.AddDistanceForList();  } 
```

在这样的视图模型中：

```
private ObservableCollection<Threater> threaters; public ObservableCollection<Threater> Threaters {
    get { return threaters; }
    set
    {
        if (threaters != value)
        {
            threaters = value;
            NotifyPropertyChanged("Threaters");
        }
    } }

private CollectionViewSource filteredThreater; public CollectionViewSource FilteredThreater {
    get { return filteredThreater; }
    set
    {
        filteredThreater = value;
        NotifyPropertyChanged("FilteredThreater");
    } } This function wate time!!! public void SelectThreaterByMovie(string movieId) {
    Threaters.Clear();

    if(MovieDataAllMovies.Threaters!=null)
    {
      foreach(var i in MovieDataAllMovies.MoviePlans){
          if (i.MovieId == movieId)
          {
              MovieDataAllMovies.Threaters.ForEach((e) =>
              {
                  if (i.TheaterId == e.Tid.ToString())
                  {
                      Threaters.Add(e);
                  }
              });
          }
      }
      Deployment.Current.Dispatcher.BeginInvoke(() =>
      {
          this.FilteredThreater.Source = Threaters;
      });    } } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:18:15.310

有一篇非常好的文章，介绍了如何在与长时间运行的 Web 服务调用交互时使用性能进度条处理这种情况，[此处](http://dan.clarke.name/tag/performance-progress-bar/)提供了文章页面底部的示例代码。

引用 Dan Clarke 的话，“我非常喜欢在我的 Windows Phone 7 应用程序中拥有一个全局性能进度条，以便用户在我与 Web 服务交互时有一个一致的参考框架。要求很简单，出现一个进度条在所有页面上，没有任何特殊要求（即没有自定义控件、特殊代码片段等）。它应该在一个地方进行管理，并且易于扩展。幸运的是，Silverlight 提供的极大灵活性使这变得轻而易举：“[来源](http://dan.clarke.name/tag/performance-progress-bar/)

此选项至少会让您知道页面正在以最低限度加载。

# asp.net-web-api - 如何从动作匹配过程中取出路由参数？

> ID：12409703
> 
> 赞同：1
> 
> 时间：2012-09-13T15:24:48.833
> 
> 标签：asp.net-web-api

我正在构建一个 MVC 4.0 WEB API 应用程序，并希望使用以下路线：

`/api/{appId}/{controller}/{id1}/{action}/{id2}`

我想使用该`appId`参数并使用它在集合中设置一个值`HttpContext.Current.Items`，并希望它退出 Action 匹配过程。我当然不想为`appId`我的控制器中的每个操作方法添加参数。

有谁知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T22:38:56.740

1.  您不需要包含 appId 作为参数；Web API 将路由到与路由参数的最佳子集匹配的操作。因此，如果没有动作有 appId 参数，它只会匹配 id1、id2 和动作名称（来自 {action}）。

2.  如果要在控制器操作中获取 appId 的值，可以从 ControllerContext.RouteData.Values 字典中获取路由值。（不确定这是否是您的情况。您是否特别需要将其存储在 HttpContext.Current.Items 中？）

本文详细介绍了动作选择：[http ://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-and-action-selection](http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-and-action-selection)

# c# - WPF UI 动画库

> ID：12409706
> 
> 赞同：8
> 
> 时间：2012-09-13T15:25:05.023
> 
> 标签：c#, wpf

是否有可用于动画的 WPF 库？

它应该支持从一种 WPF 形式到另一种形式的动画转换（如翻转效果等），并且还能够为工具箱组件（如标签等）制作动画。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T21:41:24.267

Codeplex 上有一些效果和过渡库。

*   [http://wpffx.codeplex.com/](http://wpffx.codeplex.com/)

*   [http://transitionals.codeplex.com/](http://transitionals.codeplex.com/)

而这个可以让你在不同的用户控件之间进行转换。

*   [http://www.codeproject.com/Articles/197132/Simple-WPF-Page-Transitions](http://www.codeproject.com/Articles/197132/Simple-WPF-Page-Transitions)

事实上，仔细研究一下 Codeplex 和 CodeProject，您会发现其他几个可以帮助您的库。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-07-29T09:49:14.697

尝试查看[Transitionz ，它是由](https://www.scichart.com/transitionz-wpf-free-library-metro-style-animation-effects/)[SciChart](http://www.scichart.com)发布和使用的免费开源 WPF 动画库。

[![属性上的 WPF 动画位置和不透明度已更改](../Images/fbe7c32397295ad48d76657e3dd61dbe.png)](https://i.stack.imgur.com/AaTKt.gif)

它允许您在附加属性更改、加载时、可见性时为不透明度、平移变换或模糊设置动画。借助 MVVM 支持，允许从视图模型进行更改。

[![属性上的 WPF 动画模糊已更改](../Images/53f1eea068d996c8059c2cb5981a5df2.png)](https://i.stack.imgur.com/c8b9d.gif)

Github wiki 和源代码在这里：[https ://github.com/ABTSoftware/SciChart.Wpf.UI/wiki/Transitionz-Library](https://github.com/ABTSoftware/SciChart.Wpf.UI/wiki/Transitionz-Library)

NuGet 在这里： [https ://www.nuget.org/packages/SciChart.WPF.UI.Transitionz/](https://www.nuget.org/packages/SciChart.WPF.UI.Transitionz/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T15:28:02.147

[Telerik](http://www.telerik.com/)控件得到了你不想要的东西，但我建议你尝试一下原生的 WPF 动画，它并不难，而且开箱即用（免费）。[显然，使用Blend 之](http://www.microsoft.com/expression/products/Blend_Overview.aspx)类的东西会让你的工作更轻松。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-31T07:34:06.317

试试[XAMLFlair](https://github.com/XamlFlair/XamlFlair)，它支持 WPF 和 UWP。

或者[WPF Material Design](http://materialdesigninxaml.net/)，在材质控件之上，它确实带有一个动画库。

# uml - 创建UML图的困惑

> ID：12409707
> 
> 赞同：3
> 
> 时间：2012-09-13T15:25:07.330
> 
> 标签：uml

我正在创建一个 UML 图，我有点混淆在哪里使用`<<extend>>`，`<<use>>`以及`<<include>>`在我的用例图中使用的位置。

假设用户点击一个编辑链接来修改它的细节，那么在点击事件`<<use>>`或`<<extend>>`..

请帮我解决这个问题..还请告诉使用创建 UML 图的最佳工具。目前我正在使用亿图。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:31:23.893

如果一个用例没有另一个用例就无法完成，则必须使用 include。如果第二个用例是可选的并且基本用例可以单独存在，请使用扩展。

例如：

*   用例 A：开车去佛蒙特州
*   用例 B：洗车
*   用例 C：为您的汽车购买一些燃料

*   A 包括 C => 否则你不能开车

*   B 扩展 A => 你可以开车去佛蒙特州而不用洗车，但这会很好。

注意：包含的用例本身总是有意义的。

编辑：我经常使用的一个简单但有效的 uml 编辑器是[紫罗兰色](http://alexdp.free.fr/violetumleditor/page.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T15:48:53.637

在通过用例对业务流程进行建模时，首先，您需要通过需求工程流程[用于动态设计视图]。如果是用例图，您可以使用

`<<extends>>`为了概括，成功或失败的替代方案，例如`receive phone call`可以扩展`receive business phone call`

`<<uses>>`如果一个场景需要其他相关场景，例如。`reserve book`可以使用`check membership status`

为了进一步了解 UML 图，您可以阅读以下书籍：

```
1\. Applying UML & Patterns - Craig Larman

2\. UML distilled : Applying the standard object Modeling Language - Martin Fowler

3\. The Unified Modeling Language User Guide - Booch et. al 
```

对于 UML 图的绘制，您可以使用以下软件包：

```
1\. ArgoUML

2\. Rational Rose 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T07:12:06.097

也看看这个问题 - 它通过一个具体示例提出了完全相同的问题：[如何使用用例关系 - uml](https://stackoverflow.com/questions/12385233/how-to-use-use-case-relations-uml/12401268#12401268)

我很好的一般解释可以在[这里](http://etutorials.org/Programming/Learning+uml/Part+II+Structural+Modeling/Chapter+4.+Use-Case+Diagrams/4.4+Dependencies/)找到。

阅读此处的其他答案，我必须强调不应该混淆依赖的方向：`receive business phone call`并且`receive private phone call`会扩展`receive phone call`，因为第一个比后一个更特殊。演员可以通过“接听商务电话”来“接听电话”。

<> 依赖关系更容易理解。这里的另一个答案仍然不完全正确：`Drive with your car to vermont`不一定包括`Buy some fuel for your car`，因为汽车可能已经有足够的燃料。但`Buy some fuel for your car`会包括`Pay for fuel`- 否则你会偷走它;）

通常，您应该仅建模/绘制对理解用例系统有意义的依赖项。它不会帮助任何人（也许是老师）绘制用例之间所有可能的依赖关系。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T17:05:40.630

我希望你一切都好

include 是必需的，并且在 2 个或多个活动之间共享，而 extend 是可选的，不需要共享。看这些视频：

1#：[http](http://www.youtube.com/watch?v=OkC7HKtiZC0&feature=plcp) ://www.youtube.com/watch?v=OkC7HKtiZC0&feature=plcp 2#：[http ://www.youtube.com/playlist?list=PL1BDC709220824BE1&feature=plcp](http://www.youtube.com/playlist?list=PL1BDC709220824BE1&feature=plcp)

最好的工具是 Papyrus，因为它是开源的

# jquery - jQuery：悬停动画

> ID：12409710
> 
> 赞同：0
> 
> 时间：2012-09-13T15:25:30.417
> 
> 标签：jquery, jquery-animate

首先，我的 jQuery（或 Javascript 时期）不好。

当我使用 jQuery animate 函数将图像悬停在新图像上时，我正在尝试将图像翻转到新图像上。

这是我的工作（图像翻转到文本）：http: [//jsfiddle.net/Draven/NJCUn/5/](http://jsfiddle.net/Draven/NJCUn/5/)

这是我希望的工作（用图像替换文本）：http: [//jsfiddle.net/Draven/U7m25/4/](http://jsfiddle.net/Draven/U7m25/4/)

`img`我相信问题是因为脚本正在寻找`<li>`. 有没有办法让它选择第一个`img`标签？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T15:41:17.910

工作示例：

```
$('ul.hover_block li').hover(function() {
    $(this).find('img').eq(1).animate({
        top: '425px'
    }, {
        queue: false,
        duration: 500
    });
}, function() {
    $(this).find('img').eq(1).animate({
        top: '0px'
    }, {
        queue: false,
        duration: 500
    });
});​ 
```

[http://jsfiddle.net/yDtkZ/20/](http://jsfiddle.net/yDtkZ/20/)

# c# - Quartz.Net 2.0.1 触发器

> ID：12409711
> 
> 赞同：2
> 
> 时间：2012-09-13T15:25:38.623
> 
> 标签：c#, asp.net, web-services, quartz.net, quartz.net-2.0

我有一个 Web 应用程序，我正在尝试设置一个触发器以在应用程序启动时启动，然后每 5 分钟触发一次

一切都在 Global.asax 中 - 似乎是放置它的正确位置：

```
public class Global : HttpApplication
{
    public static StdSchedulerFactory SchedulerFactory;
    public static IScheduler Scheduler;
    public static ITrigger ImageTrigger;

    protected void Application_Start(object sender, EventArgs e)
    {
        SchedulerFactory = new StdSchedulerFactory();
        Scheduler = SchedulerFactory.GetScheduler();

        Scheduler.Start();

        ImageTrigger = TriggerBuilder.Create()
                                     .WithIdentity("ImageTrigger", "Group1")
                                     .StartNow()
                                     .WithSimpleSchedule(x => x.RepeatForever().WithIntervalInMinutes(5))
                                     .Build();

        var imageJob = JobBuilder.Create<DownloadImages>()
                                     .WithIdentity("DownloadImages" , "Group1")
                                     .Build();
        Scheduler.ScheduleJob(imageJob, ImageTrigger);
    }
...
} 
```

所以我假设有一个简单的日程安排使用 .WithIntervalInMiniutes() 导致作业被调用或者它有很大的错误？

PS我也试过：

```
 AlertTrigger = TriggerBuilder.Create()
                                     .WithIdentity("AlertTrigger", "Group1")
                                     .StartNow()
                                     .WithCronSchedule("0 0/1 * * * ?")
                                     .Build(); 
```

紧接着对着电脑尖叫！

在此先感谢您的帮助。

马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:05:10.213

我试过你的代码，它工作正常。
我不认为网络服务是运行预定作业的最佳选择，因为它的性质。

我建议您阅读[ASP.NET 应用程序生命周期](http://msdn.microsoft.com/en-us/library/ms178473.aspx)。

**应用程序_开始**

> 当请求 ASP.NET 应用程序中的第一个资源（例如页面）时调用。Application_Start 方法在应用程序的生命周期中仅调用一次。您可以使用此方法执行启动任务，例如将数据加载到缓存中和初始化静态值。您应该在应用程序启动期间仅设置静态数据。不要设置任何实例数据，因为它仅对创建的 HttpApplication 类的第一个实例可用。

在 IIS 中运行的 ASP.NET 工作进程会在一段时间不活动后[关闭并回收。](http://msdn.microsoft.com/en-us/library/ms525803.aspx)不过，您可以改变这种行为。

可以在[这里](http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx)阅读另一篇有趣的文章。

# forms - 无法从命令行发送带有“curl”的 POST 请求

> ID：12409713
> 
> 赞同：0
> 
> 时间：2012-09-13T15:25:39.727
> 
> 标签：forms, post, curl

我有一个`Jersey`带有处理表单提交方法的服务。

```
无效句柄（@FormParam（“名称”）字符串名称）{...}

```

当我在浏览器中提交表单（见下文）时，服务工作正常。

```
<form action="rest/myService" method="POST">
    <输入名称="名称"/>
</form>

```

现在我正在尝试从命令行发送表单提交`POST`请求（见下文），但服务中的“FormParameter”是我希望它设置为.`curl``name``null``myName`

```
curl -d "name=myName" http://localhost:8080/myApp/rest/myService
```

我猜`curl`命令行是错误的。这是对的吗？如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T20:22:06.830

不是专家，但尝试将 -d 替换为 -F

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-17T20:05:57.697

```
curl -X POST http://localhost:8080/myApp/rest/myService -d "name=myName" 
```

或者

```
curl -X POST http://localhost:8080/myApp/rest/myService --data-urlencode "name=myName" 
```

会产生一个 POST

# python - Python 类成员

> ID：12409714
> 
> 赞同：61
> 
> 时间：2012-09-13T15:25:41.220
> 
> 标签：python, class, member-variables

我刚刚学习 Python，我来自 C 背景，所以如果我在两者之间有任何混淆/混淆，请告诉我。

假设我有以下课程：

```
class Node(object):
    def __init__(self, element):
        self.element = element
        self.left = self.right = None

    @classmethod
    def tree(cls, element, left, right):
        node = cls(element)
        node.left = left
        node.right = right
        return node 
```

这是一个名为 的类`Node`，它重载了构造函数，以便在需要时能够处理不同的参数。

仅定义（如上所示）与执行以下操作有`self.element`什么区别：`__init__`

```
class Node(object):
    element, left, right = None
    def __init__(self, element):
        self.element = element
        self.left = self.right = None 
```

是不是`self.element`和定义`__init__`的类的`element`变量一样？那不会覆盖`element`from`None`到`element`传入的值`__init__`吗？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-09-13T15:39:02.040

一个是类属性，另一个是实例属性。它们是不同的，但它们彼此密切相关，使它们有时看起来相同。

它与python查找属性的方式有关。有等级制度。在简单的情况下，它可能如下所示：

```
instance -> Subclass -> Superclass -> object (built-in type) 
```

当你寻找`instance`这样的属性时......

```
`instance.val` 
```

...实际发生的是，*首先*，Python`val`在实例本身中查找。然后，如果它没有找到`val`，它会在它的类中查找`Subclass`。然后，如果它在那里找不到`val`，它会在 , 的父级中`Subclass`查找`Superclass`。这意味着当你这样做时......

```
>>> class Foo():
    foovar = 10  
    def __init__(self, val):
        self.selfvar = val 
```

`Foo` *... share* 的所有实例`foovar`，但有自己独特`selfvar`的 s。这是一个简单而具体的例子，说明它是如何工作的：

```
>>> f = Foo(5)
>>> f.foovar
10
>>> Foo.foovar
10 
```

如果我们不碰`foovar`， 和 都是一样`f`的`Foo`。但如果我们改变`f.foovar`...

```
>>> f.foovar = 5
>>> f.foovar
5
>>> Foo.foovar
10 
```

...我们添加了一个实例属性，该属性有效地掩盖了`Foo.foovar`. 现在，如果我们`Foo.foovar`直接更改，它不会影响我们的`foo`实例：

```
>>> Foo.foovar = 7
>>> f.foovar
5 
```

但它确实会影响一个新`foo`实例：

```
>>> Foo(5).foovar
7 
```

还要记住，可变对象添加了另一层间接性（正如 mgilson 提醒我的那样）。在这里，`f.foovar`指的是与 相同的对象`Foo.foovar`，因此当您更改对象时，更改会沿层次结构向上传播：

```
>>> Foo.foovar = [1]
>>> f = Foo(5)
>>> f.foovar[0] = 99
>>> Foo.foovar
[99] 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-09-13T15:42:46.000

在 python 中，可以有同名的类变量和实例变量。它们分别位于内存中，并且访问方式完全不同。

在您的代码中：

```
class Node(object):
    element, left, right = None
    def __init__(self, element):
        self.element = element
        self.left = self.right = None 
```

第一组变量（`__init__`函数外）称为类变量。随后可以使用`Node.element`等访问这些。这些等同于 C++ 中的静态成员变量，它们由类的所有实例共享。

第二组变量（在`__init__`函数内部）称为实例变量。这些是通过`self`对象访问的，例如`self.element`，或通过实例名称，例如`myNode.element`在类之外。

请务必注意，您必须使用`self.variable`or`Node.variable`表单从成员函数中访问其中任何一个。只是访问`variable`将尝试访问一个名为`variable`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T15:29:03.733

`self.element`在构造函数（即`__init__`方法）内部是一个**实例**变量（如果一个节点对象修改了它的值，它只会改变这个对象），其中第二个版本中的一个是一个类变量（所以如果一个节点对象修改了它的值，它就会改变对于所有节点对象）。

C++ 中的类比是类中的非静态成员变量与静态成员变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T15:34:15.623

重要的部分是 的`self`论点`__init__`。事实上，在*任何*实例方法中，这都是第一个参数。这是设计使然；在 Python 中，您真正可以访问实例的唯一时间是在方法调用期间，并且它与`self`参数一起显式显示。

当您在`class`定义中时，您还没有任何实例，因此您真正要修改的是类本身。因此，如果您在类级别定义属性，那么它们就真正成为类属性，而不是实例。

将其与 C++ 相比，您可能会说这些语言中的“类”基本上是它们所代表的对象的蓝图。“这些对象应具有`foo`和`bar`属性，此外，还应具有以下方法。” 然而，在 Python 中，类本身就是对象，它们的主要优势在于它们可以创建自身的副本（实例），这也恰好使用类的方法。因此，它更像是“它们应具有`foo`和`bar`作为类属性，此外，您还应使用以下方法来创建实例。”

因此，与其说是蓝图，不如说是一步一步的操作方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T15:35:25.973

`self.element`in`__init__`是一个**实例**变量，您可以通过键入在任何其他成员函数中获取/设置它`self.element`。`element`在类中声明的是类变量，您可以通过键入来获取/设置它`Node.element`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-28T07:47:20.377

我想添加一个具有不同“视角”的答案，上述答案均未提及（并不是说它们不好！！）-> 对象的“***大小***”。

**前言**：在 Python 中，无论好坏，都可以在 RUN TIME 中为特定对象实例“创建”（添加）“新”（附加）INSTANCE 类成员，这意味着，例如，如果特定类有两个实例成员，然后可以在创建对象实例之后添加第三个，并且它只会添加到类的这个特定实例（即 - 类的“蓝图”不会改变）。请参阅下面示例代码中的#1)。

现在，如果这个“新”实例成员的名称恰好与“全局”类成员的名称相同 --> 那么对于这个特定的对象实例，将添加一个额外的实例成员，其名称与已经拥有的类成员（并且它与该类的所有其他实例共享）。请参阅下面示例代码中的#2)。

--> 因此，当您出于“设置目的”访问“全局”（类）成员时，通过特定实例对象而不是通过类名，意思是：`my_class_obj2.class_data_member = some_value`而不是`MyClass.class_data_member`根据下面的示例代码，那么会发生什么这个特定的实例，一个额外的实例成员被创建 - 因此它的 SIZE 也被改变了（如果你运行示例代码，你会看到两个不同的实例有两种不同的大小。我对所有必须做的事情都不是很好使用 Python 的大小“分配”，所以我期待看到 的大小`my_class_obj2`大于`my_class_obj`--> 但事实并非如此，我想有关 Python 中对象大小的更多信息可以在[这个 Q&A](https://stackoverflow.com/questions/449560/how-do-i-determine-the-size-of-an-object-in-python)中看到，从中我取了package`asizeof`函数中的用法示例）。`pympler`

有关更完整的示例，请参见以下代码：

```
import sys
from pympler import asizeof

class MyClass:

    class_data_member = 15

    def __init__(self, num):
        self.num = num
        self.string = ""

    def define_some_class_member(self):
        pass

    def print_me(self):
        self.x = 17
        print("MyClass::print_me - num is:" + str(self.num) + ", string is:" + self.string)
        print("MyClass::print_me - self.x is:" + str(self.x))

    def foo(self):
        print("Hi there form " + __class__.__name__ + "::foo")

def classes_and_object_example():
    func_name = "classes_and_object_example - "
    print(func_name + "creating MyClass object")
    my_class_obj = MyClass(12)
    my_class_obj.print_me()

    print(func_name + "creating another MyClass object")
    my_class_obj2 = MyClass(17)
    my_class_obj2.print_me()

    # 1)
    my_class_obj.some_new_instance_member = 90
    print(func_name + "the new additional instance member is:" + str(my_class_obj.some_new_instance_member))
    # Pay attention that the "new instance member" was added to my_class_obj and NOT to my_class_obj2 so the below statement is illegal
    # print("the new additional instance member is:" + str(my_class_obj2.some_new_instance_member))

    print(func_name + "the \"global\" data member seen by my_class_obj.class_data_member"
      + " is:" + str(my_class_obj.class_data_member) + " and the \"global\" data member seen by my_class_obj2.class_data_member"
      + " is (also):" + str(my_class_obj2.class_data_member))

    # 2)
    my_class_obj2.class_data_member = 99
    print(func_name + "the \"global\" data member seen by my_class_obj2.class_data_member"
      + " after intentionally modifying it is:" + str(my_class_obj2.class_data_member) + ", while on the other hand it is STILL seen by my_class_obj.class_data_member"
      + " as:" + str(MyClass.class_data_member))

    MyClass.class_data_member = 67
    print(func_name + "after setting the \"global (static)\" data member that is shared among all MyClass instances"
      + " using the assignemt:MyClass.class_data_member = 67, its value is:" + str(MyClass.class_data_member) + ", while on the other hand my_class_obj2 STILL has its \"own\" INSTANCE member with the same name and value of:" 
      + str(my_class_obj2.class_data_member))

    size_of_my_class_orig_object = asizeof.asizeof(my_class_obj)
    print(func_name + "the size of a MyClass object instance is:" + str(size_of_my_class_orig_object))

    size_of_my_class_modified_object = asizeof.asizeof(my_class_obj2)
    print(func_name + "the size of a MyClass object instance after \"adding\" to it an additional instance member is:" + str(size_of_my_class_modified_object))

# run the sample code for illustration
classes_and_object_example() 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-30T07:36:54.597

当您尝试使用类“符号”访问变量时，它只会查看

```
cls.__dict__ 
```

但是当您尝试使用实例“表示法”访问变量时，它首先在

```
self.__dict__ 
```

如果它找到所需的成员然后它返回，或者如果它找不到那么它也查找

```
cls.__dict__ 
```

这里 cls 是类

```
class Test:
    temp_1=10
    temp_2=20

    def __init__(self):
        self.test_1=10
        self.test_2=20

    @classmethod
    def c_test(cls):
        pass

    def t_method(self):
        pass

print Test.__dict__
print Test().__dict__ 
```

**输出**：

```
{'c_test': <classmethod object at 0x7fede8f35a60>, '__module__': '__main__', 't_method': <function t_method at 0x7fede8f336e0>, 'temp_1': 10, '__doc__': None, '__init__': <function __init__ at 0x7fede8f335f0>, 'temp_2': 20}

{'test_2': 20, 'test_1': 10} 
```

对于细节[类特殊属性](https://docs.python.org/2/library/stdtypes.html#object.__dict__)

# android - 无法在 android sdk 中查看 SIM 联系人

> ID：12409718
> 
> 赞同：0
> 
> 时间：2012-09-13T15:25:59.917
> 
> 标签：android, android-sdk-2.3

我正在 ZTE 手机上测试我的应用程序。

这是我要运行的一段代码

```
Intent i=new Intent(Intent.ACTION_PICK);
i.setType(ContactsContract.Contacts.CONTENT_TYPE);
startActivityForResult(i, PICK_REQUEST); 
```

它只给我电话联系方式。我想要电话和 SIM 卡联系人。

我在华为手机上试过这个代码，效果很好，但在中兴手机上不行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:31:59.193

尝试这个

`Intent i = new Intent(Intent.ACTION_PICK, Contacts.CONTENT_URI); startActivityForResult(i, PICK_REQUEST);`

# jquery - jquery验证接受规则不起作用

> ID：12409719
> 
> 赞同：0
> 
> 时间：2012-09-13T15:26:02.343
> 
> 标签：jquery

我有一个简单的 jQuery 验证规则，它强制名字至少有 2 个字符长（错误行为）。我想允许名字是单个字符。

```
rules: {
firstname:{
required:true,
accept: "[a-zA-Z `'-]+"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T17:56:42.170

试试这个

```
rules: {
  firstname:{
  required:true,
  minlength: 0,
  accept: "[a-zA-Z `'-]+"
} 
```

将最小长度设置为 0。

# sqlalchemy - 使用 Flask-SQLAlchemy 在 Alembic 自动生成迁移中未检测到任何变化

> ID：12409724
> 
> 赞同：26
> 
> 时间：2012-09-13T15:26:08.810
> 
> 标签：sqlalchemy, flask, database-migration, flask-sqlalchemy, alembic

我无法让 Alembic 使用`db.Model`(Flask-SQLAlchemy) 而不是`Base`.

我已经修改`env.py`以创建我的 Flask 应用程序，导入所有相关模型，初始化数据库，然后运行迁移：

```
...
uri = 'mysql://user:password@host/dbname?charset=utf8'
app = Flask(__name__)
app.config['SQLALCHEMY_DATABASE_URI'] = uri
app.config['SQLALCHEMY_ECHO'] = True
db.init_app(app)
with app.test_request_context():
    target_metadata = db.Model.metadata
    config.set_main_option('sqlalchemy.url', uri)
    if context.is_offline_mode():
        run_migrations_offline()
    else:
        run_migrations_online()
... 
```

这种方法适用于`drop_all()`, `create_all()`（例如，在为单元测试重新创建测试数据库时），但在这种情况下它似乎失败了。自动生成的版本脚本总是有空的升级和降级方法，*例如*，

```
def upgrade():
    ### commands auto generated by Alembic - please adjust! ###
    pass
    ### end Alembic commands ###

def downgrade():
    ### commands auto generated by Alembic - please adjust! ###
    pass
    ### end Alembic commands ### 
```

我的更改包括重命名列、更改列定义*等*，而不仅仅是更改索引和外键。

有人在使用 Alembic 和 Flask-SQLAlchemy 吗？知道我哪里出错了吗？

非常感谢！

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-06-22T00:13:25.997

Alembic 无法自动检测表或列重命名。默认情况下，它也不会查找列类型更改，但`compare_type`可以为此启用该选项。

摘自 Alembic 文档：

默认情况下，自动生成将检测：

*   表添加，删除。
*   列添加，删除。
*   更改列上的可为空状态。

自动生成可以选择检测：

*   更改列类型。如果您设置`compare_type=True`为 on ，就会发生这种情况`EnvironmentContext.configure()`。该功能在大多数情况下运行良好，但默认情况下处于关闭状态，以便可以首先在目标架构上进行测试。也可以通过在此处传递可调用对象来自定义；有关详细信息，请参阅函数的文档。
*   更改服务器默认值。如果您设置`compare_server_default=True`为 on ，就会发生这种情况`EnvironmentContext.configure()`。此功能适用于简单的情况，但不能始终产生准确的结果。Postgresql 后端实际上会针对数据库调用“检测到的”和“元数据”值来确定等价性。该功能默认关闭，因此可以首先在目标架构上进行测试。和类型比较一样，也可以通过传递一个callable来自定义；有关详细信息，请参阅函数的文档。

自动生成无法检测到：

*   表名的变化。这些将作为两个不同表的添加/删除出现，并且应该手动编辑为名称更改。
*   列名的变化。与表名更改一样，这些被检测为列添加/删除对，这与名称更改完全不同。
*   特殊的 SQLAlchemy 类型，例如`Enum`在不`ENUM`直接支持的后端生成时 - 这是因为这种类型在不支持的数据库中的表示，即`CHAR+CHECK`约束，可以是任何类型的`CHAR+CHECK`. SQLAlchemy 确定这实际上`ENUM`是一个猜测，这通常是一个坏主意。要在此处实现您自己的“猜测”功能，请使用该`sqlalchemy.events.DDLEvents.column_reflect()`事件来更改为某些列传递的 SQLAlchemy 类型，并可能`sqlalchemy.events.DDLEvents.after_parent_attach()`拦截不需要的`CHECK`约束。

Autogenerate 目前不能，但最终会检测到：

*   独立的约束添加、删除，如`CHECK`, `UNIQUE`, `FOREIGN KEY`- 这些尚未实现。现在，您将获得新表中的约束、“降级”到先前存在的表的 PK 和 FK 约束，以及`CHECK`使用 SQLAlchemy“模式”类型生成`Boolean`的约束`Enum`。
*   索引添加、删除 - 尚未实施。
*   序列添加、删除 - 尚未实施。

更新：最后一个列表中的一些项目在 Alembic 0.7.x 版本中受支持。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-08-08T13:34:42.883

我的错误是尝试使用已经处于最终状态的数据库创建我的初始迁移，认为它会注意到它没有现有版本并将其基于模型。我得到了空版本，直到我删除了数据库中的所有表，然后它工作正常。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-08-06T14:20:55.670

我也遇到了这个问题并使用这种方式来解决这个问题：

打开`migrations/env.py`文件，在`def run_migrations_online()`功能上查看`context.configure`，`Alembic 1.0.8`它应该是这样的：

```
with connectable.connect() as connection:
    context.configure(
        connection=connection,
        target_metadata=target_metadata,
        process_revision_directives=process_revision_directives,
        **current_app.extensions['migrate'].configure_args,
    ) 
```

只需删除或评论`process_revision_directives=process_revision_directives`，然后添加`compare_type=True`。

像这样：

```
with connectable.connect() as connection:
    context.configure(
        connection=connection,
        target_metadata=target_metadata,
        # process_revision_directives=process_revision_directives,
        **current_app.extensions['migrate'].configure_args,
        compare_type=True
    ) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-09-29T02:40:44.617

这可能是一个愚蠢的建议，但我遇到了类似的问题。我所有的 env 文件都指向了正确的位置等，但我仍然无法生成这个新表。我正在使用命令序列“alembic revision -m 'comment'”，然后是“alembic upgrade head”，我得到了“空”修订文件。

最后，在删除所有迁移文件、销毁 docker 映像、恢复迁移文件、重新尝试上述 cli 命令序列以及手动手动编码迁移之前，我尝试了“alembic revision --autogenerate”，它找到并创建了表的迁移。

这可能是由于我之前采取的所有其他步骤。如果它不是很有帮助，我很抱歉。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-19T09:03:07.877

尝试烧瓶-alembic [https://github.com/tobiasandtobias/flask-alembic](https://github.com/tobiasandtobias/flask-alembic)

我昨天试过了。它对我来说很好，除了`drop`操作。它们不适用于 sqlite ( [https://bitbucket.org/zzzeek/alembic/issue/21/column-renames-not-supported-on-sqlite](https://bitbucket.org/zzzeek/alembic/issue/21/column-renames-not-supported-on-sqlite%29) )。

我使用它的方式。首先，我曾经`python manage.py migrate revision --autogenerate`在 sqlite db 中创建空表。它会产生这样的迁移

```
def upgrade():
    ### commands auto generated by Alembic - please adjust! ###
    op.create_table('users_user',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(length=50), nullable=True),
    sa.Column('email', sa.String(length=120), nullable=True),
    sa.Column('password', sa.String(length=20), nullable=True),
    sa.Column('role', sa.SmallInteger(), nullable=True),
    sa.Column('status', sa.SmallInteger(), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('email'),
    sa.UniqueConstraint('name')
)
### end Alembic commands ###

def downgrade():
    ### commands auto generated by Alembic - please adjust! ###
    op.drop_table('users_user')
    ### end Alembic commands ### 
```

然后 -`python manage.py migrate upgrade head`

然后我`test = db.Column(db.String(20))`向用户模型添加了一个新列并运行了这个命令`python manage.py migrate revision --autogenerate -m 'test field at users'`

这产生了这样的迁移：

```
def upgrade():
    ### commands auto generated by Alembic - please adjust! ###
    op.add_column('users_user', sa.Column('test', sa.String(length=20), nullable=True))
    ### end Alembic commands ###

def downgrade():
    ### commands auto generated by Alembic - please adjust! ###
    op.drop_column('users_user', 'test')
    ### end Alembic commands ### 
```

# javascript - 如何使用向下/向上箭头键在 DIV 中选择下一个/上一个锚标签？

> ID：12409725
> 
> 赞同：1
> 
> 时间：2012-09-13T15:26:09.823
> 
> 标签：javascript, jquery

我有一个`<input id="#locKeySearch">`和一个`<div id="#locDropDown">`。当我输入我的`input`字段时，我通过 AJAX 在`div`.

现在我想通过箭头键获得更多功能`↓</kbd>/`↑</kbd>. I want to select my `<a>` tags and when they are selected their backgrounds change and on pressing `Enter`, the browser navigates to the appropriate location.``

有人可以帮我吗？

CSS：

```
div {width:300px;}
a{display:block;}
a:hover{background:#ccc;} 
```

JavaScript：

```
$(document).ready(function() {
  $('#locKeySearch').keydown(function(e)
    {<br>
      var alinks = $('#locDropDown').find('a');
      if(alinks.length > 0)
      {
        alinks.each(function(){

          if (e.keyCode === 40)//Down Arrow
          {
              e.preventDefault();
              var current = alinks.index(),
              next = $(this).next();
              this.blur();
              setTimeout(function() { next.focus().select(); }, 50);
          }
        });
      }
    });
  }); 
```

HTML：

```
<form>
    <input type="text" name="locKeySearch" id="locKeySearch" value="" />
</form>
<div id="locDropDown">
    <a href="1">1</a>
    <a href="2">2</a>
    <a href="3">3</a>
    <a href="4">4</a>
    <a href="5">5</a>
    <a href="6">6</a>
    <a href="7">7</a>
    <a href="8">8</a>
    <a href="9">9</a>
    <a href="10">10</a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T16:03:49.730

我已经解决了上面的查询。下面是答案

```
function keyEvents()
{
    var keyindex,alinks;
    keyindex = -1;
    // Key Events
    $('#locKeySearch').keydown(function(e){
        alinks = $('#locDropDown').find('a');
        if(alinks.length == 0)
        {
            keyindex = -1;
        }
        if(e.keyCode == 40)
        {
            e.preventDefault();
            if(alinks.length > 0 && keyindex == -1)
            {
                keyindex = 0;
                $('#locDropDown').find('a')[keyindex++].focus();
            }
        }
    });

    $('#locDropDown').keydown(function(e)
    {
        alinks = $('#locDropDown').find('a');
        if(e.keyCode == 40)
        {
            e.preventDefault();     
            if(keyindex == -1)
            {
                keyindex = 1;
            }
            if(alinks.length > 0 && keyindex < alinks.length)
            {
                $('#locDropDown').find('a')[keyindex++].focus();
            }
        }
        if(e.keyCode == 38)
        {
            e.preventDefault();
            if(keyindex == alinks.length)
            {
                keyindex = keyindex-2;
            }

            if(alinks.length > 0 && keyindex < alinks.length && keyindex >=0)
            {
                $('#locDropDown').find('a')[keyindex--].focus();
            }
        }
    });

} 
```

# ajax - GWT 将中间结果从服务器异步返回到客户端

> ID：12409727
> 
> 赞同：1
> 
> 时间：2012-09-13T15:26:11.710
> 
> 标签：ajax, gwt, asynchronous

我正在使用 GWT。我的客户端从用户那里收集数据并将其发送到服务器以执行非常长度的计算。计算由不同的阶段组成。在每个阶段之后，我希望服务器将结果发送回客户端，以便用户可以看到一些进度，而服务器继续进行剩余部分的计算。

什么是一种优雅的方式来做到这一点（尽可能少的代码）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T17:59:31.860

Comet 非常适合聊天或其他实时应用程序，但最简单和最简单的方法是使用并行请求该工作。第一个请求会将数据 POST 到服务器进行处理。第二个请求将获取处理作业的状态。这将是异步技术

或者，您可以在服务器端增加进程，并让客户端在每个阶段向请求发布数据。这种方式是块技术；意味着第 1 步运行，并阻止第 2 步，直到第 1 步完成。这有点容易，但代码比较混乱，因为您需要将三个请求嵌套在彼此的回调中。

COMET 的主要限制是防火墙和端口的问题。这可能会变得很麻烦，而且它的 QoS 并不总是 100% 正确。有时请求不会按正确的顺序推送，或者有时您并不总是得到推送。因此，在您需要使用异步或阻塞方法来确定准确性的时候。

作为参考，大多数花哨的文件上传者都使用异步技术。

在服务器端，您需要放入一些存储在会话中的静态字段，其中包含要发送到客户端的更新数据。在客户端使用计时器来指定更新 UI 的轮询频率。

至于请求，使用标准的 RPC 请求，它基本上只接受一个 te servlet 的 url，然后是一个回调。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T15:36:00.357

你应该使用**彗星**。基本上，服务器会随时向视图发送通知。有很多 gwt 框架可以帮助您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T16:28:41.870

我在我的一个项目中使用了[Atmosphere](https://github.com/Atmosphere/atmosphere) Websocket/comet 框架。使用 GWT 很容易实现。

# c# - 来自 asp.net 3.5 Code-Behind 的警报框

> ID：12409730
> 
> 赞同：1
> 
> 时间：2012-09-13T15:26:22.830
> 
> 标签：c#, javascript, jquery, asp.net, alert

```
protected void ddlLanguage_SelectedIndexChanged(object sender, EventArgs e)
{           
    if (ddlLanguage.SelectedValue=="es-ES")
    {
        Page page = HttpContext.Current.CurrentHandler as Page;

        page.ClientScript.RegisterStartupScript(typeof(Page), "Script", "<script language='javascript'>alert('All content may not be in Spanish. Do you want to continue...');</script>");            
    }
} 
```

我想做的只是显示一个简单的警报框，但一切都是徒劳的……没有任何弹出窗口。需要一些阿育达。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T15:34:50.110

你也可以通过这种方式实现

```
protected void ddlLanguage_SelectedIndexChanged(object sender, EventArgs e)
{           
  if (ddlLanguage.SelectedValue=="es-ES")
   {         
      Response.Write("<script>alert('All content may not be in Spanish. Do you want to continue...');</script>");            
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T15:33:12.423

您需要验证启动脚本是否尚未注册。看看[这篇文章。](http://msdn.microsoft.com/en-us/library/asz8zsxy.aspx)

您还可以在 ASP.NET 中构建您的自定义 MessageBox。看看[这个](http://code.msdn.microsoft.com/CSASPNETMessageBox-3e8c6273)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T14:21:47.653

ScriptManager.RegisterStartupScript(this.Page, this.GetType(), "showalert","Alert Message", true);

这对我有用，没有回发试试这个

# bash - bash：无法正确输出 7 位长整数

> ID：12409734
> 
> 赞同：1
> 
> 时间：2012-09-13T15:26:40.493
> 
> 标签：bash, shell

如果我尝试打印长度为 6 位或更少位数的整数，则一切正常：

例子

```
for i in $(seq 123450 123451); do printf "%7.0f\n" $i; done 
```

> 123450
> 
> 123451

但是，当整数长度为 7 位或更多位时，数字的最后一位将输出为“0”：

例子

```
for i in $(seq 1234560 1234561); do printf "%7.0f\n" $i; done 
```

> 1234560
> 
> 1234560

问题：我遇到了什么问题，我应该怎么做才能使用“长”整数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T15:39:29.247

默认情况下，`seq`以 %g 格式打印其输出：

```
$ seq 1234560 1234561
1.23456e+06
1.23456e+06 
```

所以`seq -f "%7.0f"`改用：

```
$ seq -f "%7.0f" 1234560 1234561
1234560
1234561 
```

或者只是`seq -f "%.0f"`：

```
$ seq -f "%.0f" 1234560 1234561
1234560
1234561 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T15:36:05.983

对于 shell，一切都是字符串，最好避免浮点转换和计算，并留给`bc`(1)。这应该有效：

```
 for i in $(seq 123450 123451); do printf "%s\n" $i; done 
```

# paypal - Paypal预先批准的付款，不显示价格？

> ID：12409735
> 
> 赞同：1
> 
> 时间：2012-09-13T15:26:41.583
> 
> 标签：paypal, paypal-adaptive-payments

我正在使用 PHP 自适应支付库，尝试设置预先批准的支付。这适用于下订单的订购系统，并且在确认可以履行之前不收取款项。

我认为我的一切运作良好，但我只是注意到，当它转发你到贝宝实际支付时，它没有说你批准贝宝支付的实际金额。

肯定有一个金额被传递，就像发送和接收支付数据的各种脚本一样，它肯定会显示在调试输出中。对我来说，这似乎是系统中的一个巨大缺陷，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T15:32:52.913

哎呀，在文档中没有发现这个......

displayMaxTotalAmount

```
xs:boolean

(Optional) Whether to display the maximum total amount of this preapproval. It is one of the following values:

    TRUE – Display the amount

    FALSE – Do not display the amount (default) 
```

# php - if else 带有可选值

> ID：12409736
> 
> 赞同：0
> 
> 时间：2012-09-13T15:26:47.310
> 
> 标签：php

我想不通。我需要做，如果有的话。

如果 A 不为空，则它必须等于 B & C must = D & E must = F

我认为是 A & B 部分让我搞砸了。只有当 A 不为空时，我才能让它工作

```
 if( ( !empty($data[0]) && trim($data[0]) == $_POST['firstname'] ) || trim($data[1]) == $_POST['lastname'] && $_POST['password'] == $password) 
```

正是 A 是可选的，这让我很着迷。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:30:13.410

为什么要一口气完成？

```
If (A is not empty) then 
    if A == B && C == D && E == F then 
```

我认为结果如下：

```
if ( !empty($data[0]) {
   if ((trim($data[0]) == $_POST['firstname'] ) && trim($data[1]) == $_POST['lastname'] && $_POST['password'] == $password) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T15:29:31.097

它会是这样的：

```
if( !empty($a) && ($a==$b && $c == $d && e == $f)) {
 // Carry On
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T15:30:14.860

无需嵌套条件......

以下应该有效（前提是您真的是认真的）：

```
if( ( empty(data[0]) || (!empty($data[0]) && trim($data[0]) == $_POST['firstname'] )) && trim($data[1]) == $_POST['lastname'] && $_POST['password'] == $password ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T15:30:27.807

尝试这个：

```
if(
    (!empty($data[0]) && 
        (trim($data[0]) == $_POST['firstname']) &&
         trim($data[1]) == $_POST['lastname'] &&
         $_POST['password'] == $password)
    )
) 
```

# twitter-bootstrap - Twitter Bootstrap 按钮没有边框？

> ID：12409744
> 
> 赞同：0
> 
> 时间：2012-09-13T15:27:24.580
> 
> 标签：twitter-bootstrap

我在一个空的网站上测试 Bootstrap，但我有一个奇怪的问题。

我有一个网站文档，其中的代码`<a href="#" class="btn">Download</a>`应该是一个不错的渐变按钮，但对我来说，情况并非如此。

按钮是渐变灰色，但没有边框，底部和顶部的填充似乎是错误的。

![引导按钮错误](../Images/181894c1ee657a7af4199b6e206076b2.png)

**向左**- 我的按钮

**向右**- 它应该是什么样子

我正在使用`bootstrap.css`和`bootstrap-responsive.css`文件。

谁能告诉我为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-21T11:03:36.023

添加 btn-default 或任何其他 btn-styling css 类（[在此处输入链接描述](http://getbootstrap.com/css/#buttons)）：

```
<a href="#" class="btn btn-default">Download</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T14:41:29.670

如果您没有引用除 bootstrap 和 bootstrap-responsive 文件之外的其他 css 文件，那么您应该检查以确保您正确引用了 html 文档中的文件（检查 html 中的 Link 标签）。

我试图复制这个问题，但它对我来说很好。另外，请确保您下载了完整版的引导程序（请记住，您可以自定义引导程序）。

您可以使用 chrome 或 firefox 的“Inspect Element”功能或 IE 中的 F12 来调试网页，以查看所应用的 css 规则来自何时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T18:57:27.920

当我将样式表链接更改为“bootstrap.min.css”时，它开始看起来应该如此。:O

这可能是我拥有的样式表中的错误吗？认为我正在使用最新版本..

但无论如何，现在它应该像它一样工作。

我只需要说一些关于 Bootstrap 的事情。我真的很喜欢将 Bootstrap 用于 Bootstrap 添加的图形界面图标、按钮、样式和类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-22T16:32:51.187

检查您使用的 Bootstrap 版本。我刚刚从 2-something 升级到 Bootstrap-3-something，并且按钮看起来确实与我预期的不同 - 这似乎是他们决定的新风格！个人比较喜欢老款。。。

# f# - 带有连接 groupBy 和 sortBy 的 FSharp 查询中的 NotSupportedException

> ID：12409751
> 
> 赞同：2
> 
> 时间：2012-09-13T15:27:50.287
> 
> 标签：f#

我有这个查询（使用 Linq2Sql 类型提供程序）：

```
let q = query {
  for zj in db.ZAJEZD do
  join zr in db.ZARIZENI on (zj.ZARIZENI = zr.ZARIZENI1)
  where (zj.AKCE = ac)
  groupBy zj.ZARIZENI into gZj
  sortBy gZj.Key
  select gZj.Key
} 
```

在运行时我得到 NotSupportedException：

```
Additional information: The member 'System.Linq.IGrouping`2[System.String,System.Tuple`2[Web.DataLayer.Data+dbSchema+ServiceTypes+ZAJEZD,Web.DataLayer.Data+dbSchema+ServiceTypes+ZARIZENI]].Key' has no supported translation to SQL. 
```

当我删除 sortBy 子句时，它运行良好。密钥是字符串类型。那么将它翻译成sql可能会出现问题吗？

顺便问一下，如何用复合键编写连接？

谢谢

# php - PHP 与 SQL Server

> ID：12409754
> 
> 赞同：0
> 
> 时间：2012-09-13T15:28:00.020
> 
> 标签：php, sql-server, sql-server-2008

我正在寻找从 php 应用程序连接 SQL Server 数据库。

```
$con = mssql_connect('SERVER\SQLEXPRESS2008','','') or die('Could not connect to the server!'); 
```

但这给了我以下错误

```
Fatal error: Call to undefined function mssql_connect() 
```

我在 Windows 环境中使用**XAMPP并使用 localhost 进行测试。**

在我发现的许多示例中，它建议删除`php_mssql.dll`位于 php 文件夹下的 php.ini 文件中的语句前面的注释（;）。

[这](http://samsami2u.wordpress.com/2008/06/30/how-to-connect-mssql-with-php/)是我找到并阅读的教程之一。问题是当我在 php.ini 下搜索文本时，我找不到`php_mssql.dll`并且不知道为什么会这样。我是不是错过了什么。

非常感谢任何帮助我实现这一目标。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T15:32:26.647

微软已经发布[了他们自己的 PHP MSSQL 驱动程序](http://www.microsoft.com/en-us/download/details.aspx?id=20098)。您可能需要安装它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T15:30:14.403

要进行测试，请在您的代码中编写：

```
phpinfo();
die; 
```

然后，查看页面并查看是否加载了 mssql 扩展。如果没有，请编辑您的 php.ini 并取消注释加载 mssql 扩展的部分。刷新页面并查看它是否已加载。如果没有，回到ini，你显然做错了什么。

# jsf - 比较 JSF 页面中的 Java ArrayList

> ID：12409755
> 
> 赞同：0
> 
> 时间：2012-09-13T15:28:01.377
> 
> 标签：jsf, arraylist

我想检查 arrayList 是否包含 JSF 中的特定元素。

ArrayList 是包含几个值的 nonTradList。sProcessorView 是 Java 类的实例

JSF 页面如下所示 -

```
<h:commandButton id="p"
                 value="#{msgs['SP.Pend.Button.Label']}" 
                 type="button"
                 disabled="#{securityView.readOnlyUser or sPView.readOnly}">
    <rich:toolTip style="white-space:nowrap" value="Ctrl-Shft-P" />
    <a4j:support event="onclick"
                 oncomplete="if ((!#{sProcessorView.autoFetchNext}) &amp;&amp; 
                                   #{sProcessorView.nonTradList.contains('100')} &amp;&amp;
                                   #{spProcessorView.nonTradList.contains('111')} ) openSimplePop() ; 
                             else openModal();" />
</h:commandButton> 
```

是否已经有任何 EL 或者我必须编写一些自定义标签？

我们也可以从这个 JSF 中调用一个 Java 方法来获取结果吗？

任何帮助都非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T16:58:43.373

您可以在 ManagedBean 上创建一个返回布尔值的方法

```
public boolean containsValue() {
   //Check if the value is in the list...
} 
```

在您的页面上，您可以执行以下操作：

```
var showModal = #{bean.containsValue()};
if(showModal) {
   openModal();
} else openSimplePop(); 
```

这样做，您可以检查 ManagedBean 上的列表是否包含该值，如果是，则该方法将返回 true，该值将在 JS 变量上设置。

# jquery - 直播功能问题

> ID：12409763
> 
> 赞同：0
> 
> 时间：2012-09-13T15:28:27.217
> 
> 标签：jquery

我正在使用 .live 函数来触发函数 aaa()。无法触发该功能，因为代码未达到警报消息我的 html 的结构是

**HTML：**

```
<body id="plants">
  <form id= flower method="post">
    <div class= "rose">
      <div class= "red">
        <ul id = "colors">
          <li>
            <a></a>
          </li>
          <li>
            <a></a>
          </li>
          <li>
            <a></a>
          </li>
        </ul>
      </div>
    </div>
  </form>
</body> 
```

目前我正在使用

* *JS：**

```
$( 'body#plants form#flower div.rose div.red ul#colors li a' ).live('click', function(){
  alert('code reaches');
  aaa();
}); 
```

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T15:30:08.600

为什么不？

```
$('#colors li a').live('click', function(){
     alert('code reaches');
     aaa();
}); 
```

ID 是唯一的，您可以使用 ID 选择器。无需从 body 标签中开始选择元素，jQuery 选择器的工作方式类似于 CSS 选择器。也不`live`推荐使用方法，您可以改用`on`方法。

```
$(document).ready(function(){
    $(document).on('click', '#colors a', function(){
         alert('code reaches');
         aaa();
    });
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T15:32:39.603

尝试

```
$("#colors a").click(function() {...} 
```

另外，不要忘记 document.ready

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T15:30:45.930

我在您的 HTML 中没有看到 resultsContainer。也许这就是问题所在？

# visual-studio-2012 - VS 2012 和 VS 2012 RC

> ID：12409766
> 
> 赞同：0
> 
> 时间：2012-09-13T15:28:46.013
> 
> 标签：visual-studio-2012

我已经在windows 7上安装了VS 2012 RC。现在我要安装官方的VS 2012。现在我不确定是否需要先卸载RC？而且我不确定它是否会升级 RC 或并排安装？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:35:51.473

您应该先卸载 RC。

# android - 在 Android 应用程序中设置启动画面的最佳方式是什么？

> ID：12409767
> 
> 赞同：7
> 
> 时间：2012-09-13T15:28:55.930
> 
> 标签：android, screen, splash-screen

我的应用程序需要启动画面。尝试为我的启动画面创建一个具有图像的活动；并尝试使用 for 循环和 Timer 类来引入时间延迟。但它不是那样工作的。我做错了吗？如果是，正确的方法是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-13T15:50:26.213

上述解决方案很好，但是如果用户在启动延迟结束之前按下后退键（并关闭您的应用程序）怎么办。该应用程序可能仍会打开下一个活动，这不是真正的用户友好。

这就是我使用自定义处理程序并删除 onDestroy() 中的所有待处理消息的原因。

```
public class SplashActivity extends Activity
{
    private final static int MSG_CONTINUE = 1234;
    private final static long DELAY = 2000;

    @Override
    protected void onCreate(Bundle args)
    {
        super.onCreate(args);
        setContentView(R.layout.activity_splash);

        mHandler.sendEmptyMessageDelayed(MSG_CONTINUE, DELAY);
    }

    @Override
    protected void onDestroy()
    {
        mHandler.removeMessages( MSG_CONTINUE );    
        super.onDestroy();
    }

    private void _continue()
    {
        startActivity(new Intent(this, SomeOtherActivity.class));
        finish();
    }

    private final Handler mHandler = new Handler()
    {
        public void handleMessage(android.os.Message msg)
        {
            switch(msg.what){
                case MSG_CONTINUE:
                    _continue();
                    break;
            }
        }
    };
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T15:36:37.183

试试这个

```
public class SplashActivity extends Activity {
    Handler handler;
    private long timeDelay = 2000; //2 seconds
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.SplashLayout);
        final Intent i = new Intent(this, Landing.class);
        handler = new Handler(); 
        handler.postDelayed(new Runnable() { 
             public void run() { 
                 startActivity(i); 
                 finish();
             } 
        }, timeDelay); 
    }      
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T15:32:41.333

你可以拖延吗？

```
Thread delay = new Thread() {
    @Override
    public void run() {
        try {
            Thread.sleep(3000);
        } catch (InterruptedException e) {
        }

        runOnUiThread(new Runnable() {
            @Override
            public void run() {
                startNextActivity();
            }
        });
    }
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T15:37:04.640

试试这个，

```
protected int _splashTime = 15000; 

private Handler handler;
private Runnable runnable; 

private Context context;

@Override
public void onCreate(Bundle savedInstance)
{
    super.onCreate(savedInstance);
    setContentView(R.layout.splash);   

    final SplashScreen sPlashScreen = this; 

    handler = new Handler();

     runnable = new Runnable() {
         @Override
            public void run() { 
             try {
                handler.removeCallbacks(runnable);
                handler.postDelayed(runnable, _splashTime);
              }  
            finally {
                finish(); 
                //start a new activity

                //mtdCheckLicense();
                Intent main = new Intent();
                main.setClass(sPlashScreen, YourMainActivity.class);
                startActivity(main); 
                handler.removeCallbacks(runnable);

            }
        }
    }; 
    handler.postDelayed(runnable, 2000);
} 
```

它会飞溅一段时间并启动主要活动。在此代码中，初始屏幕等待 2 秒，然后启动主要活动。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T16:42:54.517

我为每个项目做的最简单的方法是这样的：

```
public class SplashActivity extends Activity {
    protected boolean active = true;
    protected int splashTime = 1000;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash_screen);
        Thread splashTread = new Thread() {
            @Override
            public void run() {
                try {
                    int waited = 0;
                    while(active && (waited < splashTime)) {
                        sleep(100);
                        if(active) {
                            waited += 100;
                        }
                    }
                } catch(InterruptedException e) {
                    // do nothing
                } finally {
                    finish();
                    // Start your Activity here
               }
           }
       };
       splashTread.start();    
   }
 //... 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-02T15:09:21.690

使用此处描述的解决方案，您会浪费时间，因为它们会在继续之前暂停初始化 2-3 秒。

我更喜欢`Splash Screen Layout`在我的`main_activity.xml`. 我通过扩展应用程序来检测应用程序的第一次启动。如果是第一次开始，我会在后台构建 UI 时显示我的 Splash-Screen ...（如果 ProgressBar 滞后，请使用后台线程！）

```
//Extend Application to save the value. You could also use getter/setter for this instead of Shared Preferences...
public class YourApplication extends Application {

    public static final String YOUR_APP_STARTUP = "APP_FIRST_START";

    @Override
    public void onCreate() {
        super.onCreate();

        //set SharedPreference value to true
        SharedPreferences mPreferences = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
        SharedPreferences.Editor editor = mPreferences.edit();
        editor.putBoolean(YOUR_APP_STARTUP, true);
        editor.apply();     
        ...    
     } 
```

检查你的第一次开始`MainActivity`

```
public class YourMainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //hide actionbar and other menu which could overlay the splash screen
    getActionBar().hide();

    setContentView(R.layout.activity_main);

    Boolean firstStart = PreferenceManager.getDefaultSharedPreferences(getApplicationContext()).getBoolean(TVApplication.YOUR_APP_STARTUP, true);

    if (firstStart) {
        //First app start, show splash screen an hide it after 5000ms
        final RelativeLayout mSplashScreen = (RelativeLayout) findViewById(R.id.splash_screen);
        mSplashScreen.setVisibility(View.VISIBLE);
        mSplashScreen.setAlpha(1.0f);
        final FrameLayout mFrame = (FrameLayout) findViewById(R.id.frame_container);
        mFrame.setAlpha(0.0f);

        Handler handler = new Handler();
        handler.postDelayed(new Runnable() {
            @Override
            public void run() {
                Animation fadeOutAnimation = AnimationUtils.loadAnimation(getApplicationContext(),
                        R.anim.fade_out_animation);
                fadeOutAnimation.setDuration(500);
                fadeOutAnimation.setAnimationListener(new Animation.AnimationListener() {

                    @Override
                    public void onAnimationStart(Animation animation) {
                        mFrame.setAlpha(1.0f);
                        getActionBar().show();
                    }

                    @Override
                    public void onAnimationEnd(Animation animation) {
                        mSplashScreen.setVisibility(View.GONE);
                    }

                    @Override
                    public void onAnimationRepeat(Animation animation) {

                    }
                });
                mSplashScreen.startAnimation(fadeOutAnimation);
            }
        }, 5000); //<-- time of Splash Screen shown

    } else {
        ((RelativeLayout) findViewById(R.id.splash_screen)).setVisibility(View.GONE);
        getActionBar().show();
    } 
```

在 main.xml 的顶部插入 SplashScreen。我更喜欢`RelativeLayout`那个。在示例中，SplashScreen 放置在带有 的布局中`Navitgation Drawer`，这是我们非常喜欢的，不是吗？

```
//main_activity.xml
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <android.support.v4.widget.DrawerLayout
        android:id="@+id/drawer_layout"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <!-- The main content view -->

        <FrameLayout
            android:id="@+id/frame_container"
            android:layout_width="match_parent"
            android:layout_height="match_parent" />

        <!-- The navigation drawer list -->

        <ListView
            android:id="@+id/slider_list"
            android:layout_width="240dp"
            android:layout_height="match_parent"
            android:layout_alignParentTop="true"
            android:layout_gravity="start"
            android:background="@color/tvtv_background"
            android:choiceMode="singleChoice"
            android:divider="@drawable/nav_bar_divider"
            android:dividerHeight="1dp"
            android:listSelector="@android:color/transparent" />
    </android.support.v4.widget.DrawerLayout>

    <RelativeLayout
        android:id="@+id/splash_screen"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentTop="true"
        android:background="@color/tvtv_white"
        android:visibility="visible" >

        <ImageView
            android:id="@+id/splash_screen_logo"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:paddingLeft="50dp"
            android:paddingRight="50dp"
            android:scaleType="fitCenter"
            android:src="@drawable/ic_launcher" />

        <TextView
            android:id="@+id/splash_screen_text"
            style="@style/TVTextBlueContent"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/splash_screen_logo"
            android:layout_centerHorizontal="true"
            android:padding="10dp"
            android:text="Awesome splash shiat" />

        <ProgressBar
            android:id="@+id/splash_screen_loader"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/splash_screen_text"
            android:layout_centerHorizontal="true"
            android:clickable="false"
            android:indeterminate="true" />
    </RelativeLayout>

</RelativeLayout> 
```

# java - 使用 Maven：获取 java.lang.ClassNotFoundException：org.springframework.web.bind.support.WebDataBinderFactory

> ID：12409769
> 
> 赞同：1
> 
> 时间：2012-09-13T15:28:59.550
> 
> 标签：java, spring, hibernate, maven, spring-webflow

我正在尝试使用 maven 构建我的 spring 3 项目，该项目在 maven 之前工作，但我收到此错误：

```
Sep 13, 2012 11:24:50 AM org.springframework.web.context.ContextLoader initWebApplicationContext
SEVERE: Context initialization failed
java.lang.NoClassDefFoundError: org/springframework/web/bind/support/WebDataBinderFactory
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2444)
    at java.lang.Class.getDeclaredMethods(Class.java:1808)
    at org.springframework.core.type.StandardAnnotationMetadata.hasAnnotatedMethods(StandardAnnotationMetadata.java:159)
    at org.springframework.context.annotation.ConfigurationClassUtils.isLiteConfigurationCandidate(ConfigurationClassUtils.java:106)
    at org.springframework.context.annotation.ConfigurationClassUtils.checkConfigurationClassCandidate(ConfigurationClassUtils.java:87)
    at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:233)
    at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:203)
    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:617)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:446)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:282)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:204)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: java.lang.ClassNotFoundException: org.springframework.web.bind.support.WebDataBinderFactory
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    ... 28 more
Sep 13, 2012 11:24:50 AM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
java.lang.NoClassDefFoundError: org/springframework/web/bind/support/WebDataBinderFactory
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2444)
    at java.lang.Class.getDeclaredMethods(Class.java:1808)
    at org.springframework.core.type.StandardAnnotationMetadata.hasAnnotatedMethods(StandardAnnotationMetadata.java:159)
    at org.springframework.context.annotation.ConfigurationClassUtils.isLiteConfigurationCandidate(ConfigurationClassUtils.java:106)
    at org.springframework.context.annotation.ConfigurationClassUtils.checkConfigurationClassCandidate(ConfigurationClassUtils.java:87)
    at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:233)
    at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:203)
    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:617)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:446)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:282)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:204)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: java.lang.ClassNotFoundException: org.springframework.web.bind.support.WebDataBinderFactory
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    ... 28 more
Sep 13, 2012 11:24:50 AM org.apache.catalina.core.StandardContext start 
```

下面是我的 pom.xml 我错过了什么：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <groupId>com.springsource.training.module</groupId>
    <artifactId>hibernate-jpa-config-samples</artifactId>
    <version>1.0.0-CI-SNAPSHOT</version>
    <packaging>jar</packaging>
    <name>hibernate-jpa-config-samples</name>

    <properties>
        <maven.test.failure.ignore>true</maven.test.failure.ignore>
        <spring.framework.version>3.1.1.RELEASE</spring.framework.version>
        <hibernate.version>4.1.1.Final</hibernate.version>
        <sl4j.version>1.5.10</sl4j.version>
    </properties>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-eclipse-plugin</artifactId>
                <version>2.8</version>
                <configuration>
                    <downloadSources>true</downloadSources>
                    <downloadJavadocs>true</downloadJavadocs>
                    <sourceIncludes>
                        <sourceInclude>**/*.*</sourceInclude>
                    </sourceIncludes>
                </configuration>
            </plugin>
            <!-- Configuration which allows JUnit tests to be placed in the same folder 
                as java files -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <configuration>
                    <testSourceDirectory>${basedir}/src/main/java/</testSourceDirectory>
                    <testClassesDirectory>${project.build.directory}/classes/</testClassesDirectory>
                </configuration>
            </plugin>
        </plugins>
        <!-- Configuration which allows configuration files (such as xml files) 
            to be placed in the same folder as java files -->
        <resources>
            <resource>
                <directory>${basedir}/src/main/java/</directory>
            </resource>
        </resources>
    </build>

    <dependencies>
        <!-- ********************************************************************** 
            ** SPRING DEPENDENCIES ** ********************************************************************** -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${spring.framework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>${spring.framework.version}</version>
        </dependency>

      <!-- spring security -->

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>${spring.framework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
            <version>${spring.framework.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>${spring.framework.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${spring.framework.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.webflow</groupId>
            <artifactId>spring-webflow</artifactId>
            <version>2.3.1.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.webflow</groupId>
            <artifactId>spring-faces</artifactId>
            <version>2.3.1.RELEASE</version>
        </dependency>
        <!-- ********************************************************************** 
            ** HIBERNATE DEPENDENCIES ** ********************************************************************** -->

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>${hibernate.version}</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-validator</artifactId>
            <version>4.0.2.GA</version>
        </dependency>

        <!-- ********************************************************************** 
            ** OTHER DEPENDENCIES ** ********************************************************************** -->
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-jcl</artifactId>
            <version>${sl4j.version}</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>${sl4j.version}</version>
        </dependency>

        <dependency>
            <groupId>javax.transaction</groupId>
            <artifactId>jta</artifactId>
            <version>1.1</version>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.14</version>
        </dependency>

        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib</artifactId>
            <version>2.2.2</version>
            <scope>runtime</scope>
        </dependency>

        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.21</version>
        </dependency>

        <dependency>
            <groupId>c3p0</groupId>
            <artifactId>c3p0</artifactId>
            <version>0.9.1.2</version>
        </dependency>

        <dependency>
            <groupId>org.apache.httpcomponents</groupId>
            <artifactId>httpcore</artifactId>
            <version>4.2.1</version>
        </dependency>

        <dependency>
            <groupId>org.apache.httpcomponents</groupId>
            <artifactId>httpclient</artifactId>
            <version>4.2.1</version>
            <exclusions>
                <exclusion>
                    <artifactId>commons-logging</artifactId>
                    <groupId>commons-logging</groupId>
                </exclusion>
            </exclusions>
        </dependency>

        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjtools</artifactId>
            <version>1.6.2</version>
        </dependency>

        <dependency>
            <groupId>jstl</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-jsp</artifactId>
            <version>2.2.2</version>
            <exclusions>
                <exclusion>
                    <groupId>org.slf4j</groupId>
                    <artifactId>slf4j-nop</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.slf4j</groupId>
                    <artifactId>slf4j-api</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.slf4j</groupId>
                    <artifactId>jcl-over-slf4j</artifactId>
                </exclusion>
            </exclusions>
        </dependency>

        <!-- ********************************************************************** 
            ** TEST DEPENDENCIES ** ********************************************************************** -->

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.10</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>${spring.framework.version}</version>
        </dependency>

    </dependencies>
</project> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T15:31:49.453

是的。添加对`org.springframework:spring-web`.

将来要再次解决此类问题，只需选择找不到的类并确定哪个工件提供它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T16:15:52.543

问题是您包含了 spring-security-web ，它具有 spring-web 3.0.7 依赖项。WebDataBinderFactory 仅在 Spring 3.1+ 中找到。要么显式声明 spring-web 依赖项（在 pom 中高于你声明 spring-security-web），要么排除 spring-web 对 spring-security-web 的传递依赖。我会明确声明 spring-web 依赖项。

# c - 重新分配失败时如何释放动态数组中的指针？

> ID：12409774
> 
> 赞同：0
> 
> 时间：2012-09-13T15:29:20.347
> 
> 标签：c, free, dynamic-memory-allocation, realloc

> **可能重复：**
> [由于内存导致重新分配失败时如何处理？](https://stackoverflow.com/questions/1986538/how-to-handle-realloc-when-it-fails-due-to-memory)

假设我有一个指针数组

```
char **pointers_to_pChar = 0;
pointers_to_pChar = (char **)malloc(sizeof(char *) * SIZE);
for (i = 0; i < SIZE; ++i)
{
    pointers_to_pChar[i] = malloc(sizeof(char) * 100));
}

//some stuff...
//time to realloc 
pointers_to_pChar = realloc(pointers_to_pChar, sizeof(char *) * pointer_count + 1);
if (pointers_to_pChar == NULL)
{
    //i have to free pointers in the array but i don't have access to array anymore...
} 
```

realloc 失败时应该如何处理？我需要访问数组中的每个指针并释放它们以避免可能的内存泄漏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:53:21.390

您应该首先重新分配到不同的指针，然后检查 NULL。
这样你仍然可以访问数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T15:56:51.577

man the realloc，你会看到

```
If realloc() fails the original block is left untouched; it is  not  freed
or moved. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T16:03:28.367

将结果写入临时指针；如果`realloc`失败，则原始内存块保持不变，但它返回 NULL，因此您最终会丢失指向它的指针：

```
char **tmp = realloc(pointers_to_pChar, ...);
if (!tmp)
{
  //realloc failed
}
else
{
  pointers_to_pChar = tmp;
} 
```

# sql - -0500 在这个日期代表什么？: 2012 年 6 月 15 日 23:02:10 -0500

> ID：12409775
> 
> 赞同：1
> 
> 时间：2012-09-13T15:29:23.423
> 
> 标签：sql, sql-server, sql-server-2008, datetime

我想知道如何格式化这样的日期：

```
15 Jun 2012 23:02:10 -0500 
```

代表什么`-0500`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T15:31:19.197

这是时区。这表示您距离格林威治标准时间 5 小时。格林威治标准时间-5。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T15:30:50.680

它表示与格林威治标准时间的小时偏移量。这是标准日期格式放置时区信息的区域。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T15:34:19.303

-0500 表示距离 UTC 的小时数。要了解有关 GMT 与 UTC 的更多信息，请参阅此处： http: [//geography.about.com/od/timeandtimezones/a/gmtutc.htm](http://geography.about.com/od/timeandtimezones/a/gmtutc.htm)

# sockets - python3.2 ICMP监听器抛出错误

> ID：12409776
> 
> 赞同：0
> 
> 时间：2012-09-13T15:29:24.417
> 
> 标签：sockets, udp, python-3.2

我正在收听来自 GPS 装置的帖子。在 Wireshark 中，我看到了来自我设备的帖子。但是在我的 python 代码中我没有捕捉到它们。这是我使用的代码。它几乎是[pydocs/sockets](http://docs.python.org/py3k/library/socket.html#example)的逐字记录。我从网络上的其他事物中收到许多回复，但我没有看到我的设备 ip。

```
#HOST = socket.gethostbyname(socket.gethostname())
HOST = ''
SENDER = '166.161.24.104'
PORT = 22335
BUFFSIZE = 1024
TIMEOUT = 60 # seconds

import socket

# the public network interface
HOST = socket.gethostbyname(socket.gethostname())

# create a raw socket and bind it to the public interface
s = socket.socket(socket.AF_INET, socket.SOCK_RAW, socket.IPPROTO_IP)
s.bind((HOST, 22335))

# Include IP headers
s.setsockopt(socket.IPPROTO_IP, socket.IP_HDRINCL, 1)

# receive all packages
s.ioctl(socket.SIO_RCVALL, socket.RCVALL_ON)

while True:
    # receive a package
    ans, addr = s.recvfrom(BUFFSIZE)
    print(addr[0])

# disabled promiscuous mode
s.ioctl(socket.SIO_RCVALL, socket.RCVALL_OFF) 
```

这发布了在我的网络上通话的所有 IP 地址的列表。

# git - Jenkins git克隆到工作区的子目录

> ID：12409777
> 
> 赞同：3
> 
> 时间：2012-09-13T15:29:28.277
> 
> 标签：git, continuous-integration, jenkins

我想尽可能地遵循[Jenkins PHP 模板](http://jenkins-php.org/)，但是在将它与 git 一起使用时遇到了问题。该模板希望将所有内容克隆到`src`主工作区目录的目录中，但似乎没有选项可以使用 jenkins 中的 git 插件执行此操作？

[这里](https://stackoverflow.com/questions/6026079/jenkins-build-outside-of-workspace/7091901#7091901)有这个问题，但我似乎没有在 git 高级选项下选择目录的选项。

选择SVN时，有一个清楚`Local module directory`的是我想要的，但Git插件不存在它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T16:07:26.013

在高级选项下有一个选项“repo 的本地子目录（可选）”，它应该完全符合您的要求。

# javascript - location.reload(true) 检查用户点击

> ID：12409779
> 
> 赞同：1
> 
> 时间：2012-09-13T15:29:33.170
> 
> 标签：javascript, jquery

我`location.reload(true)`从 javascript 调用按钮单击它显示警报消息，我想在用户单击按钮时隐藏页面。当页面刷新完成或用户选择取消时，该页面将再次出现。

如何检查用户点击取消/重新发送/继续？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:49:12.827

您是否试图让用户回答是/否问题？如果是这样，您需要使用 confirm() 而不是 alert() 并检查返回值。是/确定 = 真，否/取消 = 假。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:55:22.553

我认为最终您要问的是如何检查用户是否单击了您的取消按钮。

如果是这样，您一定是 jquery 的新手。
你会这样做：

```
 <script>
       $(window).load(function(){
          location.reload(true);
       });

       $(document).ready(function(){
         $("#cancelButtonID").click(function(){
            //this code executes when your cancel button is clicked
             location.reload(true);
         });
       });
     </script> 
```

# php - PHP 和表单验证

> ID：12409784
> 
> 赞同：0
> 
> 时间：2012-09-13T15:29:51.173
> 
> 标签：php, validation

我有一个通过 ajax 提交的表单，我想返回空字段列表的消息。

我已经完成了所有这些工作，但在 PHP 方面似乎真的很啰嗦。

如何以不那么复杂的方式执行以下操作？

```
<?php

if(empty($_POST["emailaddress"])){    
    $error = 'true';
    $validation_msg = 'Country missing.';
    if(empty($error_msg)){
        $error_msg .= $validation_msg;
    } else{
        $error_msg .= '\n' . $validation_msg;
    }    
}

if(empty($_POST["password"])){    
    $error = 'true';
    $validation_msg = 'Country missing.';
    if(empty($error_msg)){
        $error_msg .= $validation_msg;
    } else{
        $error_msg .= '\n' . $validation_msg;
    }    
}

if(empty($_POST["firstname"])){    
    $error = 'true';
    $validation_msg = 'First name missing.';
    if(empty($error_msg)){
        $error_msg .= $validation_msg;
    } else{
        $error_msg .= '\n' . $validation_msg;
    }    
}

if(empty($_POST["lastname"])){    
    $error = 'true';
    $validation_msg = 'Last name missing.';
    if(empty($error_msg)){
        $error_msg .= $validation_msg;
    } else{
        $error_msg .= '\n' . $validation_msg;
    }    
}

if($error){
    header('HTTP/1.1 500 Internal Server Error');
    header('Content-Type: application/json');
    die($error_msg);
}

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T15:37:04.097

遍历`$_POST`数组

```
$error_msg = '';
foreach($_POST as $key => $val){
    if(empty($val)){ 
        $error = 'true'; 
        $error_msg .= $key." missing.\n"; 
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T15:33:20.230

我建议使用 php Zebra Form 库。它允许您以面向对象的方式构建验证规则，并自动生成 javascript 来进行客户端验证。

[http://stefangabos.ro/php-libraries/zebra-form/](http://stefangabos.ro/php-libraries/zebra-form/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T15:33:32.890

尝试这样的事情：

```
$error_msg = array()

if(empty($_POST["lastname"])){    
    $error_msg[] = 'Last name missing.';
}

.... 

if($error_msg){
    header('HTTP/1.1 500 Internal Server Error');
    header('Content-Type: application/json');
    die(implode("\n", $error_msg);
} 
```

它生成一组错误消息。如果数组中有任何内容，请将其内爆成字符串并返回。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T15:33:38.617

一个很大的改进是我制作`$error_msg`一个数组，这将删除该`if (empty($error_msg)) {}`部分。

```
$error_msg = array(); 
```

然后使用以下命令添加错误消息：

```
$error_msg[] = $validation_msg; 
```

`$error = 'true'`然后您可以在每次发现错误时删除，最后验证`$error_msg`数组的内容：

```
if(count($error_msg) > 0){ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T15:36:46.823

怎么样

```
<?php
$array = new array{{"firstname","First Name"},{"lastname", "Last Name"}}; 
```

然后遍历数组

```
if(empty($_POST[$array[i][0])){               $error = 'true';           $validation_msg .= $array[i][1] ' missing.' . "\n"; 
```

我现在无法访问 PHP，所以没有经过测试，但这个想法会奏效。代码可能需要调整

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-13T15:38:04.413

由于您的代码非常重复，您应该考虑编写一个进行验证的函数：

```
$msgStack = array();

function validate($field, $msg, $msgStack) {
    if(empty($field)) {    
        $error = 'true';
        $msgStack[] = $msg;
    }
} 
```

并称它为

```
validate($_POST['firstname'], 'Firstname is empty', $msgStack); 
```

然后输出所有消息，如

```
echo implode(PHP_EOL, $msgStack); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-13T15:38:39.747

```
 if(empty($_POST["emailaddress"]) || empty($_POST["password"]) ||
   empty($_POST["firstname"]) || empty($_POST["lastname"]) ){    
    $error = TRUE;
    if ( empty($_POST["emailaddress"]) )
      $field = 'Email Address';
   else  if ( empty($_POST["password"]) )
      $field = 'Password';
   else  if ( empty($_POST["firstname"]) )
      $field = 'First Name';
   else 
      $field = 'Last Name';

    $validation_msg = $field . ' missing.';
    if(empty($error_msg)){
    $error_msg .= $validation_msg;
    } else{
    $error_msg .= '\n' . $validation_msg;
    }    
} 
```

# ajax - 如何在 AJAX 表单中的按钮上使用 JQuery Click 事件

> ID：12409786
> 
> 赞同：0
> 
> 时间：2012-09-13T15:29:57.040
> 
> 标签：ajax, events, jquery

诚然，我对 JQuery 了解不多，但我有一个 AJAX 表单，当有人单击提交按钮时，我需要在其中触发单击事件，但因为该按钮最初不存在，而是在同一表单的第三页上（URL不会改变），我在使用点击事件时遇到问题。

在我的代码中，我只想在单击按钮时运行一个函数。

```
<script type="text/javascript">
    //Run function when button is clicked

    $(document).ready(function () {
        $("#idOfButton").click(function () {
            doSomething();
        });
    });

    //The function I want ran when page visitor clicks button

    function doSomething() {
        //Do Something
    }
</script> 
```

显然这段代码不起作用，但是关于如何使用 .click 的任何建议？我只能通过标签管理系统插入 JS，所以我不能将任何内容硬编码到页面中。另外，JQuery 版本是 1.4，所以我不能使用 .on。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:36:34.043

您的代码需要使用**.on**以便在按钮可用时绑定事件。如果您没有可用的最新 jQuery 文件，则可以使用 .live 代替。您还说按钮不可用在pageload上可用..所以我创建了一个在选中复选框时创建按钮的小示例。.创建按钮后，我添加了事件处理程序。.CHEKC此

```
 <script type="text/javascript">

     <script type="text/javascript">
    //Run function when button is clicked

    $(document).ready(function () {
        $("#idOfButton").live('click', function () {
            doSomething();
        });
    });

    //The function I want ran when page visitor clicks button

    function doSomething() {
        //Do Something
    }
</script> 
```

在此处检查[FIDDLE](http://jsfiddle.net/sushanth009/Ug2V7/)此外，如果您没有最新副本，则可以使用由 google CDN 托管的文件。您只需将此文件包含在您的项目中即可。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script> 
```

这将确保您拥有最新的副本，并减少您网站的带宽..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:40:25.037

因此，我假设您的意思是该按钮位于您的初始页面加载中，并且您希望它影响 AJAX 页面上的某些内容。如果是这种情况，您的 jQuery 显然不能针对不存在的 HTML 元素。

相反，您需要向 AJAX 调用传递一些东西，例如 get 变量。如果您无法编辑有关您要访问的页面的任何内容，例如接受新的获取变量并更改逻辑，那么听起来这个问题在您的约束下无法解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T15:46:04.077

如果按钮在初始页面加载时不存在，您需要在创建按钮后立即分配回调。例如：

```
 var newButton = document.createElement('button');
    $(newButton).on('click',doSomething); 
```

# iphone - 将推送通知添加到现有应用程序 - 需要重新提交？

> ID：12409791
> 
> 赞同：0
> 
> 时间：2012-09-13T15:30:09.253
> 
> 标签：iphone, ios, app-store

我已经在应用商店有一个应用程序，其中包含处理推送通知的代码。但是，在我之前的提交过程中，它并没有在 Apple Development Portal 中配置。

现在已经启用了，我需要辞职并重新提交应用程序吗？尝试自己测试它，但它不起作用，我不确定这是否是我做错了。

任何帮助是极大的赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:36:26.033

是的，您需要使用带有适当权利的条款签署应用程序，然后重新提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:33:37.077

您还需要在代码中执行更多操作，例如处理用户成功注册推送通知时的处理，因此您需要重新提交。

# excel - 如果一个工作表的列值与 excel 2010 中的另一个工作表匹配，则复制新工作表中的值

> ID：12409800
> 
> 赞同：-1
> 
> 时间：2012-09-13T15:30:28.850
> 
> 标签：excel, excel-2010, vba

我是 VB 脚本的新手，所以我需要帮助来执行以下任务。我需要做三件事：

1.  将工作表 1 的 col A 的值逐行与工作表 2 的 col A 的任何行中的值匹配。
2.  如果匹配，则必须将该值复制到同一工作簿中新工作表的 col A 中。
3.  现在工作表 2 的剩余 col 即 col B 和更多将被附加并复制到我们之前复制匹配 col A 值的新工作表。

例如：
Sheet1 数据：

```
员工姓名 ID 部门
莫汉 1 IT
```

表 2 数据：

```
employeeName ID In time Out time
嘉安 2 下午 12:00:00 晚上 10:15:00
磨憨 1 上午 9:02:00 晚上 11:01:00
```

现在表 3 应该有：

```
employeeName ID Intime Out time
磨憨 1 上午 9:02:00 晚上 11:01:00
```

这都在同一个工作簿中，需要使用 VBA 完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T21:00:14.567

将此代码放在工作簿中的模块中并执行 run() 子程序。这假设您的工作表的代码名称是您所描述的 Sheet1、Sheet2 和 Sheet3。

```
Sub run()

    Dim row As Integer, sheet2Row As Integer
    row = 2

    With Sheet1
        Do While (.Cells(row, 1) <> "")
            sheet2Row = findInSheet2(.Cells(row, 1))
            If sheet2Row <> 0 Then copyRow (sheet2Row)
            row = row + 1
        Loop
    End With

End Sub

Function findInSheet2(text As String) As Integer

    Dim found As Range

    With Sheet2
        Set found = .Columns(1).Find(What:=text, MatchCase:=True)
        If Not found Is Nothing Then
            findInSheet2 = found.row
        Else
            findInSheet2 = 0
        End If
    End With

End Function

Sub copyRow(row As Integer)

    Sheet2.Rows(row).Copy
    Sheet3.Rows(getSheet3LastRow).PasteSpecial

End Sub

Function getSheet3LastRow()

    Dim found As Range

    Set found = Sheet3.Cells.Find("*", SearchOrder:=xlByRows, SearchDirection:=xlPrevious)
    If Not found Is Nothing Then
        getSheet3LastRow = found.row + 1
    Else
        getSheet3LastRow = 1
    End If

End Function 
```

# jquery - 我的第二个 svg 图像不会使用 Keith Woods JQuery svg 插件显示

> ID：12409801
> 
> 赞同：0
> 
> 时间：2012-09-13T15:30:32.380
> 
> 标签：jquery, jquery-svg

我无法使用 Keith Woods JQuery svg 插件在我的页面上加载两个**不同的svg 图像。**这可能吗？如何？

以下代码按原样打印出我的第一个 svg 图像，但第二个不可见，并且`<svg version="1.1" width="1647" height="760"/>`在 Firebug Lite 中显示为“”，没有内容。（甚至错误的尺寸）

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<script src="JQuery/jquery-1.7.2.min.js"></script>
<script src="js/jquery.svg.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    function onLoad(svg, error){
    }

    $(function(){
        $('#staticRegion').svg({});

        var svg = $('#staticRegion').svg('get');
        svg.load('svg/sverige.svg', {
            addTo: false,
            changeSize: false,
            onLoad: onLoad
        });
    });

    $(function(){
        $('#staticRegion2').svg({});

        var svg = $('#staticRegion2').svg('get');
        svg.load('svg/skane.svg', {
            addTo: false,
            changeSize: false,
            onLoad: onLoad
        });
    });
});
</script>

</head>

<body>
<div id="staticRegion"></div>
<div id="staticRegion2"></div>
</body>
</html> 
```

重新制作帖子，让它变得漂亮、舒适和干净。=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:20:10.590

现在可以开始工作了。除了 svg 文件中的一些几乎不明显的错误外，该代码是正确的。例如一个太多的'。

# linux - 有没有适合 linux 的 mib 浏览器？

> ID：12409803
> 
> 赞同：10
> 
> 时间：2012-09-13T15:30:38.293
> 
> 标签：linux, snmp

我正在为 linux 寻找一个好的开源 mib 浏览器。ireasoning 对它可以在免费版本中加载的 mib 文件的数量有限制。

我不需要它来执行 mib 查询我只需要查看 mib 树。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T15:56:12.373

试试[iReasoning](http://ireasoning.com/mibbrowser.shtml)。它非常好，并且具有不同的有用功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:27:21.450

#SNMP Suite 有一个基本的 MIB 浏览器可用（基本的，还不好），

[http://sharpsnmplib.codeplex.com](http://sharpsnmplib.codeplex.com)

你可以在 Mono/Linux 上使用它。

1.  安装单声道。
2.  下载二进制压缩包。
3.  解压内容。
4.  在终端执行`mono compiler.exe`以启动编译器。编译 MIB 文档。.module 文件保存到默认位置。
5.  在终端执行`mono browser.exe`以启动浏览器。浏览器从默认位置加载 MIB 文档。

请务必使用编译器将 MIB 文档编译为 .module 文件。浏览器只能理解 .module 文件。

# jquery - 应该链接但没有链接的 jQuery 轮播

> ID：12409804
> 
> 赞同：1
> 
> 时间：2012-09-13T15:30:39.290
> 
> 标签：jquery

[我在这个网站http://www.scrummagazine.com/](http://www.scrummagazine.com/)上设置了一个 jQuery 轮播，它包含很多徽标，每个徽标都应该链接到广告商网站，除非他们没有，鼠标进入悬停状态，当您单击其中一个徽标时没有任何反应？这个网站上发生了很多事情，也许有某种脚本冲突？这可能很简单，但这是漫长的一天，我现在很困惑。如果有人可以看一下，将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:49:31.903

谢谢蒂姆，但我发现在您的函数文件中包含以下内容会有所帮助

```
 $(function() {
                $('a[rel*=external]').click( function() {
                    window.open(this.href);
                    return false;
                });
            }); 
```

哦！

# asp.net-mvc-4 - 带有 MVC 4 的果园 CMS

> ID：12409805
> 
> 赞同：3
> 
> 时间：2012-09-13T15:30:40.190
> 
> 标签：asp.net-mvc-4, orchardcms

有谁知道我在哪里可以找到 MVC 4 何时可以使用 Orchard。

我注意到路线图将此列为“当前优先事项”，但是，v1.6 何时发布？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:30:35.700

1.6 应该会在大约一个月后发布。您还可以将 repo 克隆到最新的 1.x。

# iphone - 从维基百科解析 XML

> ID：12409809
> 
> 赞同：0
> 
> 时间：2012-09-13T15:30:50.617
> 
> 标签：iphone, nsxmlparser, nsmutablestring

我正在使用`NSXmlParser`并尝试解析这个 XML 文件：

```
<api>
<query>
<normalized>
<n from="new york" to="New york"/>
</normalized>
<redirects>
<r from="New york" to="New York"/>
</redirects>
<pages>
<page pageid="8210131" ns="0" title="New York">
<extract xml:space="preserve">&lt;p>&lt;b>New York&lt; ... 
```

基本上这个文件很长，但我试图只复制`<extract>`元素。

我`NSMutableString`用这段代码通过几种方式完成了它：

```
-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    CrrentString = (NSMutableString *) [string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
    [CrrentString appendString:string];
    NSLog(@"%@",CrrentString);
}

-(void)parser:(NSXMLParser *)parser
   didStartElement:(NSString *)elementName
   namespaceURI:(NSString *)namespaceURI
  qualifiedName:(NSString *)qName
     attributes:(NSDictionary *)attributeDict
{
    currentKey = nil;

    if ([elementName isEqualToString:@"extract"]) {
        CrrentString = [attributeDict objectForKey:@"extract"];
        return;
    }
} 
```

但最后，这只给了我（ ）`>`内部。`NSMutableString``CrrentString`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T17:14:00.463

这一行提出了问题：

```
CrrentString = (NSMutableString *) [string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]]; 
```

每次找到的字符方法起作用时，它都会覆盖以前的`CrrentString`. 这就是为什么你只得到最后一个找到的字符。

所以改变它：

```
-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    NSString *temp= (NSString *) [string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
    [CrrentString appendString:temp];
    NSLog(@"%@",CrrentString);
}

-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    CrrentString = nil;

    if ([elementName isEqualToString:@"extract"])
    {
        CrrentString = [[NSMutableString alloc] init];
    }
} 
```

希望它会有所帮助。

# javascript - 在javascript中将默认值设置为未定义的变量

> ID：12409813
> 
> 赞同：9
> 
> 时间：2012-09-13T15:31:11.600
> 
> 标签：javascript, undefined, default-value

理想情况下，我希望能够编写如下内容：

```
function a( b ) {
    b.defaultVal( 1 );
    return b;
} 
```

这样做的目的是，如果`b`是任何定义的值，`b`将保持为该值；但如果`b`未定义，`b`则将设置为 的参数中指定的值`defaultVal()`，在这种情况下为`1`。

这甚至可能吗？

我一直在玩弄这样的东西：

```
String.prototype.defaultVal=function(valOnUndefined){
    if(typeof this==='undefined'){
        return valOnUndefined;
    }else{
        return this;
    }
}; 
```

但是我没有成功地将这种逻辑应用于*任何*变量，特别是未定义的变量。

有人对此有任何想法吗？可以做到吗？还是我在叫错树？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-13T15:37:40.907

为什么不使用默认运算符：

```
function someF(b)
{
    b = b || 1;
    return b;
} 
```

任务完成！这是有关其工作原理的[更多信息。](http://javascript.crockford.com/style2.html)

顺便说一句：您的原型将不起作用，因为您正在扩充`String`原型，而如果您的变量未定义，则`String`原型并不完全适用。

绝对，超级骗子-确保您只是切换到默认值，当`b`真正未定义时，您可以这样做：

```
var someF = (function(undefined)//get the real undefined value
{
    return function(b)
    {
        b = b === undefined ? 1 : b;
        return b;
    }
})(); // by not passing any arguments 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-13T15:35:24.087

那么在这里要学习的最重要的事情是，如果一个变量是`undefined`你，默认情况下，它没有任何可用的方法。因此，您需要使用一种可以对变量进行操作但不是该变量的成员/方法*的*方法。

尝试类似：

```
function defaultValue(myVar, defaultVal){
    if(typeof myVar === "undefined") myVar = defaultVal;
    return myVar;
} 
```

你想要做的是相当于这个：

```
undefined.prototype.defaultValue = function(val) { } 
```

...由于显而易见的原因，这不起作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-05T13:36:27.163

虽然已经提供的两个答案都是正确的，但从那时起语言已经取得了进步。如果您的目标[浏览器支持](https://kangax.github.io/compat-table/es6/)它，您可以使用如下*默认函数参数*：

```
function greetMe(greeting = "Hello", name = "World") {
  console.log(greeting + ", " + name + "!");
}

greetMe(); // prints "Hello, World!"
greetMe("Howdy", "Tiger"); // prints "Howdy, Tiger!"
```

[这](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Default_parameters)是关于默认函数参数的 MDN 文档。

# python - Python网络驱动程序getText

> ID：12409814
> 
> 赞同：2
> 
> 时间：2012-09-13T15:31:13.013
> 
> 标签：python, xpath, webdriver

我通常将 webdriver 与 java 一起使用，但现在我需要使用 webriver 和 Python

花一整天，无法理解，如何阅读python中的文本

我需要通过 xpath 读取并断言名称

在 Java 中：

```
{driver.findElement(By.xpath("//*[@id='reportCriteria']/fieldset[1]/fieldset[1]/dl/dd/div/span/label")).getText());    
assertEquals(testedVenueName, driver.findElement(By.xpath("//*[@id='reportCriteria']/fieldset[1]/fieldset[1]/dl/dd/div/span/label")).getText());} 
```

在 Python 中：

```
{inputElement = self.driver.find_elements_by_xpath("//*[@id='pagemenu']/li/a")
self.assertEqual("Home", inputElement)} 
```

结果：“家”=！[]

尝试将“.text”放到第一行或“inputElement.text”后给出错误消息 AttributeError: 'list' object has no attribute 'text'

完整代码：

```
class Test(unittest.TestCase):
    def setUp(self):

        profile = webdriver.FirefoxProfile()
        profile.native_events_enabled = True
        self.driver = webdriver.Firefox(profile)

    def testWebtest_1(self):

        self.driver.get("http://www.psvitahub.com/")

        inputElement = self.driver.find_elements_by_xpath("//*[@id='pagemenu']/li/a")                                    

        self.assertEqual("Home", inputElement.text)

    def tearDown(self):
        self.driver.close()

if __name__ == "__main__":
    unittest.main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T15:40:07.210

1.  您正在使用`find_elements_by_xpath`, not `find_element_by_xpath`，因此您从页面中获取了与 xpath 匹配的所有元素的列表，而不是您期望的单个元素。

2.  您从通话中得到一个空列表，这让我认为您的 xpath 不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T16:14:36.713

尝试使用 css 选择器：

```
self.driver.find_element_by_css("ul#pagemenu li.current_page_item a") 
```

你在 firebug 中的 xpath 看起来像：“/html/body/div[2]/div/div/div/div/div/div/div/div/ul/li/a”

# c# - 过滤 SearchResultCollection 中的项目

> ID：12409815
> 
> 赞同：0
> 
> 时间：2012-09-13T15:31:15.683
> 
> 标签：c#, c#-4.0, search, sitecore, sitecore6

我构建了一个函数，我在其中传递了我想要搜索的国家字符串以及我想从搜索结果中获取的文章数量。

但是，当搜索从 Sitecore 内容项返回时，我不想在**标题**字段的开头显示有星号**(*)的项。**这是函数名称：

 **```
 protected IEnumerable<Item> ShowHomePageNews(int numOfArticles, string stringofCountries)
    {
        List<Item> items = new List<Item>();
        Sitecore.Search.Index indx = SearchManager.GetIndex("my_index_name");
        using (IndexSearchContext searchContext = indx.CreateSearchContext())
        {
            CombinedQuery query = new CombinedQuery();
            QueryBase catQuery = new FieldQuery("countries", stringofCountries); //FieldName, FieldValue.
            SearchHits results = searchContext.Search(catQuery); //Searching the content items by fields.
            SearchResultCollection result = results.FetchResults(0, numOfArticles);
            foreach (SearchResult i in result)
            {
                Lucene.Net.Documents.Field url = i.Document.GetField("_url");
                Sitecore.Data.ItemUri itemUri = new Sitecore.Data.ItemUri(url.StringValue());
                Sitecore.Data.Items.Item item = Sitecore.Context.Database.GetItem(itemUri.ToDataUri());
                items.Add(item);
            }
        }

        return items;
    } 
```

我在我的 PageLoad 上调用这个函数：

rptHomePageNews.DataSource = ShowHomePageNews(4, "USA");

这是我的标记：

```
<asp:Panel ID="HomePageNews" runat="server">
<asp:Repeater ID="rptHomePageNews" runat="server">
  <ItemTemplate>
    <li>
        <%--<sc:FieldRenderer ID="FieldRenderer1" FieldName="Date" runat="server" Item="<%# Container.DataItem as Sitecore.Data.Items.Item %>" />--%>
        <a href="<%# Sitecore.Links.LinkManager.GetItemUrl(Container.DataItem as Sitecore.Data.Items.Item) %>">
           <sc:FieldRenderer ID="FieldRenderer2" FieldName="Title" runat="server" Item="<%# Container.DataItem as Sitecore.Data.Items.Item %>" />
        </a>
    </li>
  </ItemTemplate>
</asp:Repeater> 
```

我应该在 ShowHomePageNews 函数中进行哪些更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T18:05:42.377

这里的一种方法是使用 LINQ 查询进行后过滤，如下所示：

```
string myTitleField = "My Title Field";
List<Item> results = items.Where(x => x.Fields[myTitleField].Value.Contains("*") == false).ToList(); 
```

这效率不高，因为您需要在开始过滤之前加载所有项目。如果效率不是问题，那么这至少提供了一种简单的过滤方式。

但是，我的建议是在索引中添加一个字段，并使用可以过滤的值（例如“TitleContainsAsterisk”）标记记录。然后，您可以更改查询以过滤掉该字段中具有“真”或“1”的结果。

**编辑**（用于高级数据库爬虫）添加动态字段的配置和代码示例。**注意**我还没有编译或运行它，我是对现有代码的伪编码：

```
<dynamicFields hint="raw:AddDynamicFields">
    <dynamicField type="MyNameSpace.TitleContainsAsterisk,MyBinary" 
        name="TitleContainsAsterisk" storageType="YES" indexType="TOKENIZED" vectorType="NO" boost="1f" />
</dynamicFields>

/// <summary>
/// Field Configuration (for the indexer) to index the if there is an asterisk in the title
/// </summary>
public class TitleContainsAsterisk: BaseDynamicField {
    public override string ResolveValue(Item item) {
        string myTitleField = "My Title Field";
        bool containsAsterisk = item.Fields[myTitleField].Value.Contains("*");
        return containsAsterisk ? "1" : "0";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T15:54:55.050

如果您乐于使用 Linq，可以将 foreach 循环替换为以下内容：

```
var db = Sitecore.Context.Database;

items = result
         .Where(r => !r.Title.StartsWith("*"))
         .Select(r => db.GetItem(new Sitecore.Data.ItemUri(r.Url).ToDataUri()))
         .ToList(); 
```**

# selenium - JBehave web：选择 Web Runner 还是 Selenium？

> ID：12409816
> 
> 赞同：1
> 
> 时间：2012-09-13T15:31:16.960
> 
> 标签：selenium, bdd, jbehave

我是 BDD 和 JBehave 的新手。我正在开发一个网络应用程序，我不确定是否选择：

*   **JBehave + Web Runner** *或*
*   **JBehave + Selenium**

它们是互补的还是我应该选择一个而不是另一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T09:51:53.837

我终于在邮件列表上得到了对我的问题的答复。我想我会在 SO 上分享它。就这个：

> WebRunner 是一个运行通用故事的网络前端，无论它们是否基于网络。它与 Selenium 无关。
> 
> 如果您正在开发 web 应用程序，请使用 Selenium，但选择 WebDriver API（又名 Selenium 2.x）。
> 
> 入门教程： [https ://github.com/jbehave/jbehave-tutorial/tree/master/etsy-selenium](https://github.com/jbehave/jbehave-tutorial/tree/master/etsy-selenium)

# r - 计算滚动窗口协方差矩阵

> ID：12409821
> 
> 赞同：3
> 
> 时间：2012-09-13T15:31:47.263
> 
> 标签：r, xts

我正在尝试计算多个资产的滚动窗口（移动 1 天）协方差矩阵。

说我的 df 看起来像这样：

```
df <- data.frame(x = c(1.5,2.3,4.7,3,8.4), y =c(5.3,2.4,8.4,1.3,2.5),z=c(2.5,1.3,6.5,4.3,2.8),u=c(1.1,2.5,4.3,2.5,6.3)) 
```

我希望输出如下所示：

```
cov(df[1:3,])  :

         x        y        z        u
x 2.773333 3.666667 4.053333 2.613333
y 3.666667 9.003333 7.846667 2.776667
z 4.053333 7.846667 7.413333 3.413333
u 2.613333 2.776667 3.413333 2.573333

cov(df[2:4,])  :

         x         y        z    u
x 1.523333  4.283333 3.053333 1.23
y 4.283333 14.603333 7.253333 3.93
z 3.053333  7.253333 6.813333 2.22
u 1.230000  3.930000 2.220000 1.08

cov(df[3:5,])  :

           x          y         z          u
x  7.6233333 -0.5466667 -3.008333  5.1633333
y -0.5466667 14.4433333  5.941667  0.9233333
z -3.0083333  5.9416667  3.463333 -1.5233333
u  5.1633333  0.9233333 -1.523333  3.6133333 
```

但是一切都是循环进行的，因为我在数据集中有很多行......

1.  `for`如果我想通过将滚动窗口移动 1 天来滚动计算协方差矩阵，可能的循环会是什么样子？还是我应该使用一些`apply`家庭功能？

2.  如果我想为上面的循环创建一个时间序列对象，最好使用哪个时间序列类？现在我`as.timeSeries`从`fPortfolio`包中使用。

我简直无法接受...

此致

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T16:42:45.863

要创建滚动窗口，您可以使用`embed`.

```
## your data.frame
df <- data.frame(x=c(1.5,2.3,4.7,3,8.4), y=c(5.3,2.4,8.4,1.3,2.5), z=c(2.5,1.3,6.5,4.3,2.8), u=c(1.1,2.5,4.3,2.5,6.3))

## define windows
windowSize <- 3
windows <- embed(1:nrow(df), windowSize)

lapplyApproach <- function(df, windows) {
    ## convert window matrix to a list
    windowsList <- split(t(windows), rep(1:nrow(windows), each=ncol(windows)))
    ## edit: customize names: "from:to"
    names(windowsList) <- unlist(lapply(windowsList, function(x)paste(range(x), sep="", collapse=":")))
    return(lapply(windowsList, function(x)cov(df[x, ])))
}

forApproach <- function(df, windows) {
    l <- vector(mode="list", length=nrow(windows))
    for (i in 1:nrow(windows)) {
        l[[i]] <- cov(df[windows[i, ], ])
    }
    return(l)
}

## check results
all.equal(forApproach(df, windows), unname(lapplyApproach(df, windows)))
# TRUE

## test running time
library("rbenchmark")

## small example
benchmark(lapplyApproach(df, windows), forApproach(df, windows), order="relative")
#                         test replications elapsed relative user.self sys.self user.child sys.child
#2    forApproach(df, windows)          100   0.075     1.00     0.072        0          0         0                                                                          
#1 lapplyApproach(df, windows)          100   0.087     1.16     0.084        0          0         0

## a larger one
n <- 1e3
df <- data.frame(x=rnorm(1:n), y=rnorm(1:n), z=rnorm(1:n), u=rnorm(1:n))
windows <- embed(1:nrow(df), windowSize)
benchmark(lapplyApproach(df, windows), forApproach(df, windows), order="relative")
#                         test replications elapsed relative user.self sys.self user.child sys.child
#1 lapplyApproach(df, windows)          100  26.386    1.000    26.301    0.004          0         0                                                                          
#2    forApproach(df, windows)          100  26.932    1.021    26.838    0.000          0         0 
```

编辑：对于时间序列，您可以使用包`xts`及其功能`endpoints`, `period.apply`, `apply.daily`, ...

# scala - 如何在 SBT 中使用 :replay 对新编译的类重播以前的命令？

> ID：12409825
> 
> 赞同：2
> 
> 时间：2012-09-13T15:31:55.937
> 
> 标签：scala, sbt

在 sbt 控制台中， :replay 重置执行并重播所有先前的命令。如果有更改，我会认为 sbt 会重新编译你的类，并针对你新编译的类重播以前的命令。但情况似乎并非如此。对于这种工作流程，我是否需要使用 JRebel？我的目标是能够在 REPL 中找到错误，修复错误，然后使用 :reply 之类的单个命令编译并重新运行所有先前的命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T21:52:25.133

`:replay`是 Scala REPL 的命令，而不是 SBT。

尝试`sbt console`在一个 shell 中使用 JRebel 运行，然后在第二个 shell 中运行`sbt ~compile`。

第一个将让您自动重新加载重新编译的类；第二个将自动重新编译编辑的类。

# wso2 - 本地主机上的 WSO2 ESB 服务器端点

> ID：12409826
> 
> 赞同：1
> 
> 时间：2012-09-13T15:31:58.680
> 
> 标签：wso2, wso2esb, axis2, esb, wso2carbon

您好我已经在服务器上上传了 wso2-esb 4.0.3，问题是对于我创建的每个代理服务，ESB 都会生成一个不正确的端点：

例如，对于 Echoproxy，它给了我一个端点`http://**localhost**:8280/services/echo while it should be http://192.168.....:8280/services/echo`

问题是什么？ESB的一些配置/请建议！！

**编辑**：我已经更改了文件中的`ServerURL`和，但仍然出现在 url 端点中的**localhost 。**我不知道我还应该改变什么..也改变`HostName``carbon.xml`

 **```
 <parameter name="bind-address" locked="false">192....</parameter> 
```

在axis2.xml中

还是不行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:23:06.670

Change

```
<parameter name="WSDLEPRPrefix" locked="false">https://myhost:8243</parameter--> 
```

and

```
<parameter name="WSDLEPRPrefix" locked="false">http://myhost:8280</parameter> 
```**

# c# - 位运算符与 .NET 抽象在 C# 中的位操作

> ID：12409830
> 
> 赞同：2
> 
> 时间：2012-09-13T15:32:20.273
> 
> 标签：c#, .net, bit-manipulation

我正在尝试获得使用 C#.NET 处理位的基本技能。我昨天发布了一个示例，其中包含一个需要位操作的简单问题，这使我发现有两种主要方法 - 使用`bitwise operators`或使用 .NET 抽象，例如`BitArray`（如果有更多内置工具可以使用，请告诉我.NET以外`BitArray`的其他位以及如何为他们找到更多信息（如果有的话？）。

我知道`bitwise operators`工作更快，但使用`BitArray`对我来说更容易，但我真正要避免的一件事是学习不良做法。尽管我个人偏好 .NET 抽象，但我想知道在实际程序中学习和使用哪个更好。考虑到它，我很想认为 .NET 抽象并没有那么差，毕竟必须有理由在那里，也许作为初学者学习抽象更自然，然后通过低级操作提高我的技能，但这只是随机的想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T15:43:21.187

这真的取决于你用它做什么。当速度更受关注时，我会说使用按位运算，因为它们的开销要少得多。否则，BitArray 应该没问题。相关的主要开销是函数调用和您可以做的“技巧”的一些限制。

例如，如果您想在位 0、3 或 4 中设置一个值时执行某项操作：

```
if((value & 0b11001)>0) //not sure this is valid syntax, but you get the idea
{
   //do stuff
} 
```

因为整数是原生 CLR 类型，所以几乎直接转换为 3 个原生操作码`mov`、、、`and`和`cmp`

至于BitArray，我看到的最有效的方法是：

```
if(value[0] || value[3] || value[4])
{
  //...
} 
```

其中（假设不是 JIT），这等于最多 3 个简单复杂的函数调用。从 BitArray 的支持整数（我假设）获取位值的最简单方法如下所示：

```
bool GetBit(int which)
{
  return value & (1 << which)>0;
} 
```

这基本上意味着它相当于慢了大约 2 倍*对于*这个超级简单的情况，这意味着慢了大约 6 倍，因为我们正在检查 3 位。

而且对于 BitArrays，副本可能更昂贵，因为它们不是本机 CLR 类型。我怀疑这种开销在很大程度上已经被 JIT 消除了，但仍然需要考虑，尤其是在针对紧凑框架的情况下。

基本上，仅当您不需要对它们进行复杂的按位运算时才使用 BitArrays。

注意：您也可以使用混合方法在整数和 BitArrays 之间进行转换，但这也会产生相当多的开销。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T15:42:38.503

> 我想知道在实际程序中我实际上更好地学习和使用哪个。

学习他们两个。它们并不难理解，您可以想象一个比另一个更好的场景。

虽然我同意上面的@Marc Gravell，但如果我有大量需要处理的位（并且速度不是太大问题），我只会考虑使用 BitArray，但如果你最终在这种情况下，你可能做错了什么。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-13T15:43:17.630

编程时始终牢记这一点：

> “没有什么问题是再增加一层间接解决不了的，*除了*间接层太多的问题”。——*大卫·惠勒（段落）*

通过使用 BitArray，您添加了一个间接层，该层抽象出如何管理位以及生成和操作每个位的值的细节。这通常是一件好事，值得鼓励；它创建更简洁、更优雅、更易于阅读的代码。

但是，当您需要做一些复杂的事情时会发生什么，而 BitArray 不允许您做（或很难做到）？那时，您的设计“过于抽象”；抽象级别阻止您做您想做的事情，因为它们“愚蠢”了太多。这是用更少的抽象进行重构的信号，在这种情况下，使用需要更多注意和理解的位运算符，但基本上会对一组位做任何可能的事情。

所以简而言之，使用 BitArray 来解决你的问题，直到使用 BitArray 成为它自己的问题。不要担心没有 BitArray 会做什么；这可能会担心*是否以及何时*需要这样做。只是不要忘记如何使用按位运算符，或者它们存在。

# c# - 实体框架代码优先——投影问题

> ID：12409833
> 
> 赞同：0
> 
> 时间：2012-09-13T15:32:31.583
> 
> 标签：c#, entity-framework, ef-code-first, projection

我有这样的事情：

```
var model = forumsDb.Categories
    .Select(c => new {c, c.Threads.Count})
    .ToList() 
```

我的 Category 对象如下所示（伪代码）：

```
public class Category 
{
     public int id {get;set;}
     public ICollection<Thread> Threads { get; set; }

     /***some properties***/
     [NotMapped]
     public int ThreadCount {get;set;}
} 
```

现在，在我的模型对象中，我有两个项目：`model.c`和`model.Count`. 我怎样才能映射`model.Count`到`model.c.ThreadCount`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:45:01.707

迭代并赋值。

```
foreach(var entry in model)
{
    entry.c.ThreadCount = entry.Count;
}

var categories = model.Select(m => m.c); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T16:00:13.980

定义一个强类型：

```
public class YourModel
{
    public YourModel(Category c, int count)
    {
        C = c;
        Count = count;
        c.Threads.Count = count;
    }

    public Category C { get; set; }
    public int Count { get; set; }
}

var model = forumsDb.Categories
    .Select(c => new YourModel(c, c.Threads.Count))
    .ToList() 
```

# javascript - 使用 jquery 重新加载 div，但不使用 .load

> ID：12409839
> 
> 赞同：0
> 
> 时间：2012-09-13T15:32:54.220
> 
> 标签：javascript, jquery, html

我需要在点击时重新加载页面上的 div。到目前为止，我有这个：

```
<div id="next"><a id="nextC" href="#">NEXT TESTIMONIAL</a></div><!-- END #next --> 
```

和 js

```
$('#nextC').click(function(){
    $('#atestimonial').load('/ #atestimonial');
    evt.preventDefault();
}); 
```

我正在使用 wordpress，并且我有一种将数据拉入 div 证明的排序方法。我需要做的就是在点击时刷新它，与加载页面无关。

这可以做到吗？我想做的就是刷新一个div，仅此而已。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:36:53.323

这可以重新加载#next：

```
$.ajax({
  url: 'yourpage.html',
  success: function(data)
  {
    var new_div = $("#next", $(data)).html();
    $('#next').html(new_div);
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:56:18.857

您当前设计的页面无法实现您的提议。为了仅重新加载页面的该部分，您需要将该 div 分解为一个新 URL，该 URL 仅返回您希望插入该部分的内容。

完成后，jQuery 可以只重新加载该部分。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-13T15:38:53.730

您需要初始化`evt`变量，并且您的 URL 中应该有空格。

```
$('#nextC').click(function(evt){
    $('#atestimonial').load('/#atestimonial');
    evt.preventDefault();
}); 
```

# objective-c - 使用 ARC 查找对象何时被垃圾收集

> ID：12409843
> 
> 赞同：1
> 
> 时间：2012-09-13T15:33:15.850
> 
> 标签：objective-c, asynchronous, memory-leaks, automatic-ref-counting

我目前在我的目标 c 程序中有很大的内存泄漏，我正在尝试找到它并修复它（显然！）我遇到的问题是我使用 ARC 创建了程序，所以我不能只是制作我自己的发布实现或类似的东西，以查看对象何时或是否被释放。

更糟糕的是，我不确定我是否完全理解分配工具。我发现太多的内存被分配，然后没有被我认为是在单独的线程中创建的可变字符串释放，但我不知道如何解决这个问题！我以为我已经销毁了对包含它的对象的所有引用，但显然不是？

找到泄漏的确切位置的最佳方法是什么？或者，如果有人有修复，修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:43:37.893

您可以观看名为“学习工具”的 WWDC 2012 会议（会议 409）。视频在[这里](https://developer.apple.com/videos/wwdc/2012/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:48:36.303

`dealloc`您可以通过在其实现中记录一条消息来查找对象何时消失。但是，如果它没有被解除分配，那么您一开始就不会到达那里。

你说`references to the object that contains it`和也`separate thread`。如果您使用块来编写在单独线程中执行的代码，请注意您可能通过`self`在块中引用而创建的保留圈。

编辑：

如果您不知道我在说什么，请查看[`self` 上的保留循环，其中包含块](https://stackoverflow.com/questions/4352561/retain-cycle-on-self-with-blocks)和[块、自我、保留循环](https://stackoverflow.com/questions/12361661/blocks-self-retain-cycles)

# qt - qml webview gmail.com，其他，未加载或不完整

> ID：12409846
> 
> 赞同：3
> 
> 时间：2012-09-13T15:33:24.313
> 
> 标签：qt, qml

我正在使用 QML Webview。它似乎适用于 intel.com、apple.com、cnn.com、foxnews.com 等网站，但是如果我尝试加载 gmail.com 或 hotmail.com，它似乎只加载以下 html：

```
<html><head></head><body></body></html>
==== load finished 
```

这被我在 onLoadFinished 事件中的调试消息转储。

这是我设置 Webview 的方法：

```
WebView {
    id: webView
    focus: true
    preferredWidth: webkit.width
    preferredHeight: webkit.height
    settings.autoLoadImages: true
    settings.javascriptEnabled: true
    settings.javascriptCanOpenWindows: true
    settings.minimumFontSize: 12
    settings.defaultFontSize: webkit.fontsize
    url: ""

onLoadFinished: {
        console.debug(webView.html);
        console.debug("==== load finished");
}
} 
```

（其他事件未显示）

任何人都知道我可能做错了什么？如果我错过了一个我不知道的设置，因为关于“设置”的文档很少（除非它很明显）。我们使用的是 4.7.1，但我确实尝试了 4.8.2，结果相同。

谢谢

[编辑] 一位同事建议这可能是用户代理问题。我看过很多关于修改 QWebView 的 C++ 版本的文章，但我看不出它是如何从 QML 方面做的，除非我直接破解 Qt 源代码。有人认为这可能是问题吗？我会怀疑它，因为 gmail.com 在我桌面上的其他网络浏览器中运行良好（ubuntu 11.10）

[编辑] 我在 Qt 4.7.1 中编译了“浏览器”示例，它在那里也不起作用。Qt 前几天发布了 4.8.3，当我在那里编译“浏览器”时，它（浏览器）工作了。我注意到 gmail.com 从 http: 更改为 https: 所以我想可能是因为我们使用 -no-openssl 编译 QT。我尝试使用 openssl 编译 4.7.1 和 4.8.3，但我的 QML 问题没有运气。

[半解决] 结果是它糟糕的 QT 文档（对于初学者）。QML Webview 没有在他们的文档中告诉您您需要安装自己的 NetworkAccessManagerFactory。DeclarativeView 有一个 engine()（至少在 4.7.1 中），您可以在其中使用自己的工厂调用 setNetworkAccessManagerFactory()。现在我这样做了，它可以在我的桌面上运行，但不能在我们的嵌入式 linux 设备上运行。虽然下载 gmail.com 并没有“锁定”10%，但它现在失败了。我还必须用 openssl 编译 Qt，但是它正在加载我的 openssl 库（ssl 和加密），但还不能在嵌入式设备上运行。很奇怪。

[已解决] 很奇怪，但似乎我没有实现 QNetworkAccessManager::sslErrors(QNetworkReply *, QList)) 信号。这对桌面没有影响，但是当我使用嵌入式设备时它不起作用，现在它起作用了。

# scala - 如何将 tools.jar 添加为 sbt 中的“动态依赖项”。是否可以？

> ID：12409847
> 
> 赞同：4
> 
> 时间：2012-09-13T15:33:24.960
> 
> 标签：scala, dependencies, sbt, tools.jar

我需要在我的项目中使用 tools.jar，但是将它打包到 jar 中没有多大意义，因为用户已经拥有它。那么，是否可以将其用作“动态依赖项”？意思是，我希望我的代码使用在 my 中找到的文件进行编译**，**但**我**不希望它与它一起打包。我可以确保将其添加到类路径中，并在运行时使用**用户的**双重激活来代替。例如：`tools.jar` **`JAVA_HOME` **`JAVA_HOME`****

 ****```
object Main1 extends App {
    val myjar = Main1.getClass.getProtectionDomain.getCodeSource.getLocation.getFile
    val tools = System.getProperty("java.home").dropRight(3)+"lib/tools.jar" // drop "jre"
    val arguments = Array("java", "-cp", myjar+":"+tools, "me.myapp.Main2") ++ args
    val p = Runtime.getRuntime.exec(arguments)
    p.getErrorStream.close
    p.getOutputStream.close
} 
```

仅供参考：我使用程序集插件将应用程序打包在一个独立的 jar 文件中。

**编辑：**

一个丑陋的解决方案是将`tools.jar`文件复制到我项目中的 lib 目录中，并添加：

```
excludedJars in assembly <<= (fullClasspath in assembly) map { cp => 
    cp filter {_.data.getName == "tools.jar"}
} 
```

在`build.sbt` 不复制jar文件的情况下可以做得更优雅吗？切换 JVM 并自动使用“正确”文件会更容易`tools.jar`......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T07:48:32.580

在仔细阅读了[SBT 文档](http://www.devdaily.com/downloads/scala/Scala-SBT-Documentation.pdf "sbt 文档")后，我发现了如何做到这一点：
在`build.sbt`我需要添加：

```
// adding the tools.jar to the unmanaged-jars seq
unmanagedJars in Compile ~= {uj => 
    Seq(Attributed.blank(file(System.getProperty("java.home").dropRight(3)+"lib/tools.jar"))) ++ uj
}

// exluding the tools.jar file from the build
excludedJars in assembly <<= (fullClasspath in assembly) map { cp => 
    cp filter {_.data.getName == "tools.jar"}
} 
```

就是这样......就这么简单:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-13T13:08:23.870

现在有一个 sbt 插件可以为您执行此操作：[https ://github.com/chipsenkbeil/sbt-jdi-tools](https://github.com/chipsenkbeil/sbt-jdi-tools)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-14T13:18:16.087

我还没有对此进行测试，但是您能否不使用 % 配置语法仅将依赖项映射到运行时或编译？无论如何，肯定应该自动包含 tools.jar 吗？

```
libraryDependencies += "com.sun" % "tools" % "1.6.0" % system 
```

我不确定“系统”配置，我知道这在 Maven 中有效，但您可以尝试使用“编译”来代替。****

# objective-c - 更新 ios App 以支持 iOS6 - MainWindow 边界

> ID：12409856
> 
> 赞同：0
> 
> 时间：2012-09-13T15:33:43.997
> 
> 标签：objective-c, xcode, uiwindow, ios6

我想更新一个 iOS（通用）应用程序以支持新的 iPhone 屏幕尺寸。所以我所做的是，找到我的 appDelegate 并在`didFinishLaunchingWithOptions:`其中确定正在运行的 iOS。所以如果是

```
 if (SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(@"6.0")){
    NSLog(@"is IOS 6.0");
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.
    self.window.backgroundColor = [UIColor blueColor];
    [self.window makeKeyAndVisible];
    return YES;
}
else{
    NSLog(@"is < IOS 6.0");
    // my old Code!! 
} 
```

所以，当我在 4"-iPhone 模拟器中运行这段代码时，屏幕上没有填满我的蓝色主窗口。这就像在一个盒子里运行 980x640 视图一样。但是为什么会发生这种情况？上面的代码正在工作，当我在 xcode 4.5GM 中生成了一个新项目，但是在更改旧项目/应用程序时它不起作用？

# android - AddProximityAlert 和设备唤醒 - Android

> ID：12409858
> 
> 赞同：0
> 
> 时间：2012-09-13T15:33:56.427
> 
> 标签：android

我有个问题。AddProximityAlert 不想唤醒我的设备。我没有任何接收方(在这种情况下我不能有，因为无法取消注册)。我只是以这种方式将意图推送到 addProximityIntent ：

```
Intent myIntent = new Intent(cxt, alarmView.class);
myIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

PendingIntent proximityIntent = PendingIntent.getActivity(cxt, records.get(pos).process,myIntent, 0);
locationManager.addProximityAlert(records.get(pos).x,
                            records.get(pos).y, records.get(pos).r, // metry
                            -1, proximityIntent); 
```

我尝试将 PowerManager.newWakeLock 插入 myIntent.onCreate，但它不起作用（我认为是因为在唤醒之前没有创建活动？）。

**是否可以为我的 Intent 提供任何参数以唤醒我的手机或以其他方式进行操作？**

（如果可能的话，我也想要解锁设备）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:59:55.537

您在活动中的 onCreate() 方法`alarmView`应如下所示：

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    /**** Turn the screen on and show your activity ****/
    android.view.Window window = getWindow();
    window.addFlags(android.view.WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON);
    window.addFlags(android.view.WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED);
    window.setContentView(R.layout.activity_alarm_view);
    /***************************************************/

    /**** Rest of your code as it is ****/

    /*  ---------------------------- ****/

    /************************************/
} 
```

这里我假设这个活动的布局文件的名称是`activity_alarm_view.xml`

# actionscript-3 - 将多个静态精灵添加到舞台时如何提高 swf 的性能？

> ID：12409860
> 
> 赞同：2
> 
> 时间：2012-09-13T15:34:01.633
> 
> 标签：actionscript-3, flash, air, flash-builder

我正在做一个应用程序，它将大量的精灵放在屏幕上随机位置，就像在桌子上扔纸牌一样，但过了一段时间它开始降低 fps，因为所有的精灵仍在消耗资源。我想做的是添加精灵，但就像一个图像，而不是重新绘制它们。有没有办法做到这一点？

代码如下所示：

```
var mySprite:MySprite = new MySprite();
mySprite.x = random;
mySprite.y = random;
mySprite.rotation = random;
addChild(mySprite); 
```

Ps：他们出现在屏幕上之后，我就不必再惹他们了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:39:01.013

我认为`cacheAsBitmap`您正在寻找的是：http: [//help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#cacheAsBitmap](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#cacheAsBitmap)

```
var mySprite:MySprite = new MySprite();
mySprite.x = random;
mySprite.y = random;
mySprite.rotation = random;
mySprite.cacheAsBitmap = true;
addChild(mySprite); 
```

值得仔细阅读文档，并用谷歌搜索一下：将 Sprite 缓存为位图并不一定在所有情况下都能提供更好的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T15:52:50.547

如果您不必弄乱，您可能会希望拥有一个 Bitmap 对象而不是许多 Sprite，而不是作为孩子添加，而是在该 Bitmap 的 bitmapData 上绘制（）它们，然后丢弃。一个例子：

```
var mySprite:Sprite=new MySprite();
var myMat:Matrix=new Matrix();
for (i=100;i;i--) {
    myMat.identity();
    myMat.rotate(myRandom());
    myMat.translate(myRandom(),myRandom()); // set correct randoms here
    myBitmap.bitmapData.draw(mySprite,myMat);
} 
```

有了这个，你会收到一个 Bitmap，上面有 100 个相同的 MySprite。`mySprite`如果您的 MySprite 类在其构造函数中具有随机性，您也可以每次都重新实例化变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T18:41:34.180

看看这篇很棒的[文章](http://esdot.ca/site/2011/fast-rendering-in-air-3-0-ios-android)。
我对其进行了一些更改，它返回一个精灵，而不是一个。

您可以在文章中阅读更多内容，但是这个类基本上是获取资产位图数据，并将其缓存到一个对象中。每当您需要该资产的其他实例时，您都会获得缓存的位图数据。使用此技术时，您可以提高很多，将[舞台质量设置为 low](http://esdot.ca/site/2012/using-stage-quality-low-to-boost-your-performance)。
这种技术比简单地使用 cacheAsBitmap 更好，因为您可以使用 Sprite 而不是平面位图，同时仍然具有缓存的位图数据。

```
 public class CachedSpriteFactory
    {
        //Declare a static data cache
        protected static var cachedData:Object = {};        
        public static var clip:Bitmap;

        public function cacheSprite(asset:Object, scale:int = 2):Sprite
        {
            //Check the cache to see if we've already cached this asset
            var data:BitmapData = cachedData[getQualifiedClassName(asset)];
            if (!data)
            {
                var instance:Sprite = new asset();
                var bounds:Rectangle = instance.getBounds(this);

                //Optionally, use a matrix to up-scale the vector asset, this way you can increase scale later and it still looks good.
                var m:Matrix = new Matrix();
                m.translate(-bounds.x, -bounds.y);
                m.scale(scale, scale);              
                data = new BitmapData(bounds.width * scale, bounds.height * scale, true, 0x0);              
                data.draw(instance, m, null, null, null, true);
                cachedData[getQualifiedClassName(asset)] = data;
            }

            clip = new Bitmap(data, "auto", true);
            //Use the bitmap class to inversely scale, so the asset still appear to be it's normal size
            clip.scaleX = clip.scaleY = 1/scale;
            var sprite:Sprite = new Sprite();
            sprite.addChild(clip);
            //Optimize mouse children
            sprite.mouseChildren = false;

            return sprite;
        }
    } 
```

* * *

用法：

```
stage.quality = StageQuality.HIGH
var cacheFactory:CachedSpriteFactory = new CachedSpriteFactory();
var coolSprite1:Sprite = cacheFactory.cacheSprite(SpriteLinkageNameInLibrary, 1);
var coolSprite2:Sprite = cacheFactory.cacheSprite(SpriteLinkageNameInLibrary, 1);
stage.quality = StageQuality.LOW 
```

# sql - 这个合并语句有什么问题？

> ID：12409861
> 
> 赞同：2
> 
> 时间：2012-09-13T15:34:02.813
> 
> 标签：sql, oracle, merge, oracle9i, ora-00904

我对 oracle 比较陌生，并且已经编写了下面的合并语句，当我运行它时会产生“ora-00904 错误 vwe_cpr_info.rin_per_id 无效标识符”消息。

我已经检查并且视图和列名称是正确的，我确实有权访问视图，并且我没有尝试更新连接中使用的字段。

我已经看了这么长时间了，我想我已经停止看到它了，任何建议都会受到欢迎。它位于 Oracle 9i 环境中。

```
MERGE INTO vws_art_alert 
USING (
   SELECT rin_date_unreg, rin_per_id
   FROM vwe_cpr_info
   WHERE rin_date_unreg >= '27-SEP-11'
   AND rin_date_unreg <= '13-JAN-12')
ON (vws_art_alert.art_per_id = vwe_cpr_info.rin_per_id
    AND art_alert = 'AL02' 
    AND art_inactive_on IS NULL)
WHEN MATCHED THEN  
UPDATE SET vws_art_alert.art_inactive_on = vwe_cpr_info.rin_date_unreg; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T15:37:43.670

您需要“使用”子句的别名。尝试这个：

```
MERGE INTO vws_art_alert 
USING (
   SELECT rin_date_unreg, rin_per_id
   FROM vwe_cpr_info
   WHERE rin_date_unreg >= '27-SEP-11'
   AND rin_date_unreg <= '13-JAN-12') t
ON (vws_art_alert.art_per_id = vwe_cpr_info.rin_per_id
    AND art_alert = 'AL02' 
    AND art_inactive_on IS NULL)
WHEN MATCHED THEN  
UPDATE SET vws_art_alert.art_inactive_on = t.rin_date_unreg; 
```

# python - Python IMAP - UID 的顺序

> ID：12409862
> 
> 赞同：0
> 
> 时间：2012-09-13T15:34:03.970
> 
> 标签：python, imap

我正在尝试编写一个简单的 IMAP 客户端，并且我想获取一条最新消息。UID 46345 的邮件是我收件箱中的最新邮件，旧邮件的 UID 为 46346。因此，我的代码无法按预期工作！为什么最新消息的 UID 不是最高的？我不应该依赖具有最新日期的最高 UID 吗？

```
_, data = imap.uid('search', None, "UNSEEN")    
latest_email_uid = data[0].split()[-1]
_, data = imap.uid('fetch', latest_email_uid, '(RFC822.HEADER)')
raw_email = data[0][1]
print raw_email 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T16:49:43.530

不保证按日期顺序排列。

假设您已将一封最旧的电子邮件从文件夹（邮箱）A 移动到 B，然后再次将其移回 A，那么它将被分配新的 uid 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:47:32.417

我不认为 IMAP 协议提供任何保证消息 UID 将按从最旧消息到最新消息的顺序分配。UID 甚至可以不时更改（通常如果 IMAP 服务器必须重新索引邮箱），只要 UIDVALIDITY 更改以通知客户端这一事实。您必须查看消息上的日期标题（或者如果您感兴趣的话，可能是 IMAP INTERNALDATE）并自己对它们进行排序。

# mysql - 将 rgb 值迁移到 MYSQL db 中的 HSL 和 hex

> ID：12409868
> 
> 赞同：1
> 
> 时间：2012-09-13T15:34:26.220
> 
> 标签：mysql, colors, rgb

我有一个看起来像这样的 mysql 数据库

```
target_color       
'rgb(200,200,200)'
'rgb(190,29,209)' 
```

我需要生成一个看起来像这样的数据库

```
target_hue   ~   target_saturation  ~ target_lightness   ~   hex_value
10          ~    40        ~         40           ~         a567ff 
```

我遇到的主要问题是解析`rgb(x,y,z)`以提取值。我认为正则表达式可以解决问题，但 mysql 不支持它们……也试过了`substrint()`，`substring_index()`但完全纠结了……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T16:20:28.747

您可以使用该`SUBSTRING_INDEX`函数提取逗号之间的各个整数值。

```
SET @rgb := 'rgb(190,29,209)' ;

SELECT @rgb
     , @rgbv := SUBSTRING_INDEX(SUBSTRING_INDEX(@rgb,'rgb(',-1),')',1) AS `@rgbv`
     , @v1 := SUBSTRING_INDEX(@rgbv,',',1)                             AS `@v1`
     , @v2 := SUBSTRING_INDEX(SUBSTRING_INDEX(@rgbv,',',2),',',-1)     AS `@v2`
     , @v3 := SUBSTRING_INDEX(SUBSTRING_INDEX(@rgbv,',',3),',',-1)     AS `@v3`
     , 0 + @v1  AS R
     , 0 + @v2  AS G
     , 0 + @v3  AS B 
```

SELECT 列表中的最后三列表明用户变量可以在其他（后续）表达式中使用，在这种情况下，将它们添加到整数值 0 以将它们作为整数返回。

不幸的是，MySQL 不提供`GREATEST`和`LEAST`功能。这些会很方便，因此您可以使用如下表达式获得 Hue 的值：

```
GREATEST(0+@v1,0+@v2,0+@v3) - LEAST(0+@v1,0+@v2,0+@v3) 
```

您可以为三个值“滚动自己的”最大和最小函数：

```
IF(0+@v1>0+@v2
  ,IF(0+@v1>0+@v3,0+@v1,IF(0+@v2>0+@v3,0+@v2,0+@v3))
  ,IF(0+@v2>0+@v3,0+@v2,0+@v3)
  ) AS `max(R,G,B)`

IF(0+@v1<0+@v2
  ,IF(0+@v1<0+@v3,0+@v1,IF(0+@v2<0+@v3,0+@v2,0+@v3))
  ,IF(0+@v2<0+@v3,0+@v2,0+@v3)
  ) AS `min(R,G,B)` 
```

* * *

从包含名为 rgb 的列的表中，查询可能如下所示：

```
SELECT s.R
     , s.G
     , s.B
     , IF(s.R>s.G,IF(s.R>s.B,s.R,s.B),IF(s.G>s.B,s.G,s.B)) AS `max(R,G,B)`
     , IF(s.R<s.G,IF(s.R<s.B,s.R,s.B),IF(s.G<s.B,s.G,s.B)) AS `min(R,G,B)`
  FROM (
         SELECT t.rgb
              , @rgbv := SUBSTRING_INDEX(SUBSTRING_INDEX(t.rgb,'rgb(',-1),')',1) AS `@rgbv`
              , @v1 := SUBSTRING_INDEX(@rgbv,',',1)                              AS `@v1`
              , @v2 := SUBSTRING_INDEX(SUBSTRING_INDEX(@rgbv,',',2),',',-1)      AS `@v2`
              , @v3 := SUBSTRING_INDEX(SUBSTRING_INDEX(@rgbv,',',3),',',-1)      AS `@v3`
              , 0 + @v1  AS v1
              , 0 + @v2  AS v2
              , 0 + @v3  AS v3
           FROM mytable t
       ) s 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T16:48:22.000

给定包含`'rgb(190,29,209)'`被调用的字段`rgb`，那么您可以使用此 sql 提取这三个值：

```
select 
   substring(rgb, locate('(',rgb)+1,locate(',',rgb) -1 - locate('(',rgb)) as red,
   substring(substring_index(rgb,',',2) , locate(',',rgb)+1) as green,
   substring(rgb, locate(',',rgb, locate(',',rgb)+1 )+1 , locate(')',rgb) 
                   -1 - locate(',',rgb, locate(',',rgb)+1 )) as blue 
```

这将输出这个结果集：

```
red  green  blue
190  29     209 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-24T13:54:15.123

我用它来将 csv rgb 值直接转换为十六进制。

```
UPDATE table1 ami
JOIN 
(
SELECT id, value 
, SUBSTRING(value, 1, LOCATE(',', value)-1) as R
, SUBSTRING(value, LOCATE(',', value)+1, LOCATE(',', value, LOCATE(',', value)+1) - LOCATE(',', value) - 1) G
, SUBSTRING(value, LOCATE(',', value, LOCATE(',', value)+1)+1) B
from table1 ai
where locate(',', value) > 0
) tbl ON ami.id = tbl.id
SET ami.value = CONCAT(
 LPAD(CONV(tbl.R, 10, 16),2,'0') 
, LPAD(CONV(tbl.G, 10, 16),2,'0')
, LPAD(CONV(tbl.B, 10, 16),2,'0')); 
```

显然更改表名:) 希望这对其他人有所帮助。

# solr - solr 到 gsa（谷歌搜索设备）

> ID：12409870
> 
> 赞同：1
> 
> 时间：2012-09-13T15:34:37.370
> 
> 标签：solr, lucene, google-search-appliance

我有 100 多个网站依赖于我想用 solr 替换的谷歌设备。我可以在 solr 上管理抓取、索引等，但我真的很想避免更改所有这些网站的代码。我想找到一个看起来像 gsa 的现有包装器，但在引擎盖下使用 solr。有什么建议么？

# ios - 在另一个 XCode 项目中导入 XCode 项目

> ID：12409881
> 
> 赞同：7
> 
> 时间：2012-09-13T15:35:10.007
> 
> 标签：ios, xcode, import, dependencies

我在另一个 XCode 项目中导入了一个 XCode 项目。我将项目 B 拖放到项目 A 中，就像[如何在另一个 Xcode 项目中调用 Xcode 项目......？](https://stackoverflow.com/questions/6874273/how-to-call-xcode-project-in-another-xcode-project)

接下来，我从项目 A 中的项目 B 导入了一个类，所以我可以使用一种方法，但我给了我一个错误“找不到 ClassTemp.h 文件”。

从我读过的内容来看，这应该有效。我是否必须进行某种配置才能使其工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T15:36:35.587

尝试将其他项目的位置添加到主项目的**Build Settings中的****Header Search Paths**中。

 *** * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-02T11:04:15.900

这对我有用，

在构建**设置**->**标题搜索路径**->添加以下条目

`$(SRCROOT) and mark it as recursive.`

如果以上方法不行你也可以试试下面的方法，

`<path-of-other-project> and mark it as recursive.`

希望对你有帮助！**（您可能需要清理或重新启动工作区）****

# websphere - 连接到 WebsphereMQ JMS 提供者

> ID：12409886
> 
> 赞同：2
> 
> 时间：2012-09-13T15:35:25.137
> 
> 标签：websphere, ibm-mq

我正在使用运行 Websphere 8.5 安装。我想使用 WebsphereMQ JMS Provider 部署 MDB。我可以从 Admin Web 控制台看到 Websphere MQ 被列为 JMS 提供者，但是当我尝试使用 WebsphereMQ 创建一个新的 JMS 连接工厂并使用“测试连接”时它失败了。
所以我只是想知道，WebsphereMQ 是否随应用服务器的 8.5 版一起提供开箱即用？还是我应该单独安装？非常感谢路易斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T16:12:06.153

当您在 WAS 管理控制台中创建连接工厂、队列和主题时，这会在 JNDI 存储库中生成受管对象，但不会在队列管理器中创建队列管理器或相应的对象。这些是使用 WebSphere MQ 的本地管理工具独立管理的。

*   如果您尚未在目标服务器上安装 WebSphere MQ，请执行此操作。要判断它是否已安装，请执行`dspmqver`命令或查看`/opt/mqm`Windows 等效项（通常为`C:\Program Files (x86)\IBM\WebSphere MQ`.
*   确保在 QMgr 上为应用服务器定义了 SVRCONN 通道。不要使用 SYSTEM.DEF.SVRCONN 或任何其他默认 SYSTEM.* 通道，尽管信息中心记录了这种做法。
*   确保 QMgr 已定义并运行了一个侦听器。注意它正在运行的端口。
*   确保设置了安全性以允许连接。如果您想消除测试 CF 的安全性，那么您可以**临时**更改通道`MCAUSER('mqm')`（或者在 Windows、iSeries 等上使用平台等效管理 ID）。
*   现在您可以定义 CF，注意使用前面步骤中定义的主机、通道和端口。

WebSphere MQ 不附带 WAS。WAS 信息中心在主题[安装 WebSphere MQ 以与 WebSphere Application Server 互操作](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r5/topic/com.ibm.websphere.base.doc/ae/tmj_instm.html)中讨论了这一点。请注意，在同一部分中，有几个关于管理 JMS 资源以与 MQ 对话的主题，它们区分了在 WAS 中管理受管对象与在队列管理器中管理实际对象。

# html - 用户可以编辑页面源代码、操作隐藏字段值，然后使用这些值发布表单吗？

> ID：12409887
> 
> 赞同：8
> 
> 时间：2012-09-13T15:35:24.117
> 
> 标签：html

在各种网站上，您经常在页面源中看到表单上的一些隐藏值（通常包含某种常量、键、ID 等）。就像是：

```
<input type="hidden" name="_submit_check" value="1"> 
```

我假设该网站通过检查 _submit_checks 值是否为 1 来仔细检查表单是否已发布。是否可以编辑源并将其更改为 0，然后发布数据，从而使表单无法发布服务器端？

这个例子对服务器来说不是很危险，因为它会简单地忽略请求，但是使用隐藏字段是否存在任何可能的安全风险（除了显而易见的：他们仍然可以读取源中的值，我更担心如果他们可以编辑它）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-13T15:38:52.437

是的，用户可以复制您的 html 表单，更改值，然后发布到您的服务器。这就是为什么始终验证和清理用户输入很重要的原因，包括服务器端的隐藏输入值，而不仅仅是客户端（即 javascript）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T15:39:04.447

是的，您可以对其进行编辑，如今，当 Chrome 和 Firefox 等浏览器集成了 Web 开发工具时，修改值更容易。这就是为什么**你不应该相信从 user 收到的数据**。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T15:39:49.797

是的你可以。如果您使用 Firebug/IE 开发者工具等，您可以编辑页面上的任何内容并使用该数据提交表单。您还可以运行任何 js 并以这种方式进行编辑。这是您真正需要在对服务器端进行任何操作之前验证所有输入的主要原因之一。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T15:41:38.940

是的，这是可能的。使用带有内置或作为扩展的开发人员/调试工具的现代浏览器，他们甚至不需要保存表单来编辑它。这就是为什么您永远不应将任何数据视为表单提交并始终对其进行验证和清理的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-18T12:21:57.450

是的，使用插件到浏览器的开发人员工具非常容易。此类工具用于欺骗人们并撒谎，即为狡猾的致富计划创建登录页面的人可能会编辑其 Paypal 帐户上的数字，然后截取屏幕截图。这是为了证明他们很富有。

我们中的一些人知道得更好。我们知道一切都需要在互联网世界中得到确认/验证，并且不接受任何表面价值。

我目前正在研究通过将有关表单的信息存储在数据库中来防止 Wordpress 中的表单黑客攻击并加快开发速度。这是即时完成的。所有表单都是使用许多功能构建的，我不编写 HTML 代码。每个可见对象都有一个存储在数据库中的验证方法。在处理期间，该方法被查询和应用。

简而言之，用户可以随心所欲地编辑隐藏的输入。数据库临时保存所有内容的副本，进程使用它。

# ruby-on-rails - Heroku 的 Facebook Canvas 应用教程：誓言错误

> ID：12409890
> 
> 赞同：2
> 
> 时间：2012-09-13T15:35:31.443
> 
> 标签：ruby-on-rails, ruby, sinatra, omniauth, facebook-canvas

我正在复制并粘贴 Heroku 教程中关于构建画布应用程序以在 Heroku 上托管的代码，请参见此处。 [https://devcenter.heroku.com/articles/facebook-ruby](https://devcenter.heroku.com/articles/facebook-ruby) 但是，我收到这个错误，回溯（见下文）说与omniauth有关。

谁能解释

```
NoMethodError at /
undefined method `include?' for nil:NilClass
file: builder.rb location: call line: 29 
```

这些是它使用的宝石

```
gem 'sinatra', '1.0'
gem 'oa-oauth', '0.1.6'

BACKTRACE
(condense)
JUMP TO: GET POST COOKIES ENV
/Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/oa-core-0.1.6/lib/omniauth/builder.rb in call
      @ins << @app unless @ins.include?(@app)
/Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/rack-protection-1.2.0/lib/rack/protection/xss_header.rb in call
        status, headers, body = @app.call(env)
/Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/rack-protection-1.2.0/lib/rack/protection/base.rb in call
        result or app.call(env)
/Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/rack-protection-1.2.0/lib/rack/protection/base.rb in call
        result or app.call(env)
/Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/rack-protection-1.2.0/lib/rack/protection/path_traversal.rb in call 
```

**主要代码**

索引.erb

```
<%=session['fb_error']%>

<% if session['fb_auth'] %>
  <a href='logout'><img src='images/fb_logout_button.png'></a>
<% else %>
  <a href='auth/facebook'><img src='images/fb_login_button.png'></a>
<% end %>

<h3><%= 'Hello, ' + session['fb_auth']['user_info']['first_name'] + ', ' if session['fb_token'] %>Welcome to my list of interesting articles.</h3>

<table>
  <% @articles.each do |article| %>
  <tr>
    <td class='article'>- <a href='<%=article[:url]%>' target='_blank'><%=article[:title]%></a></td>
    <td>
      <% if session['fb_auth'] %>
        <iframe src="http://www.facebook.com/plugins/like.php?href=<%=article[:url]%>&amp;layout=button_count&amp;show_faces=true&amp;width=450&amp;action=like&amp;colorscheme=light&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:21px;" allowTransparency="true"></iframe>
      <% end %>
    </td>
  </tr>
  <% end %>
</table>

<% if session['fb_auth'] %>
  <hr />
  <p><span class='like_site'>Do you like this site?</span></p>
  <p><iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Ffaceboku.heroku.com%2F&amp;layout=standard&amp;show_faces=true&amp;width=450&amp;action=like&amp;colorscheme=light&amp;height=80" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:80px;" allowTransparency="true"></iframe></p>
<% end %> 
```

脸书网

```
equire 'sinatra'
require 'omniauth/oauth'

enable :sessions

#Here you have to put your own Application ID and Secret
APP_ID = "495940167082961"
APP_SECRET = "686da25c0fdd04a6f61b287bb0d5c9aa"

use OmniAuth::Builder do
  provider :facebook, APP_ID, APP_SECRET, { :scope => 'email, status_update, publish_stream' }
end

get '/' do
    @articles = []
    @articles << {:title => 'Deploying Rack-based apps in Heroku', :url => 'http://docs.heroku.com/rack'}
    @articles << {:title => 'Learn Ruby in twenty minutes', :url => 'http://www.ruby-lang.org/en/documentation/quickstart/'}

    erb :index
end

get '/auth/facebook/callback' do
  session['fb_auth'] = request.env['omniauth.auth']
  session['fb_token'] = session['fb_auth']['credentials']['token']
  session['fb_error'] = nil
  redirect '/'
end

get '/auth/failure' do
  clear_session
  session['fb_error'] = 'In order to use this site you must allow us access to your Facebook data<br />'
  redirect '/'
end

get '/logout' do
  clear_session
  redirect '/'
end

def clear_session
  session['fb_auth'] = nil
  session['fb_token'] = nil
  session['fb_error'] = nil
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-09T06:08:10.597

复制评论中的答案，以便从“未回答”过滤器中删除此问题：

> 嘿，伙计们，我写了那个教程……我已经更新了教程和代码，现在一切似乎都在工作，请告诉我是否没有。它没有显示一些图像，因为我需要等待 Heroku 的批准，但它仍然有效：[https ://devcenter.heroku.com/articles/facebook-ruby](https://devcenter.heroku.com/articles/facebook-ruby)

~ 每个[raf的回答](https://stackoverflow.com/users/292113/raf)

# sql-server - 寻求有关将现有 asp.net/sql 服务器网站移动到 Azure VM 的建议

> ID：12409891
> 
> 赞同：2
> 
> 时间：2012-09-13T15:35:35.833
> 
> 标签：sql-server, azure, cloud, virtual-machine, sync

我正在研究将带有 sql server 后端的现有 asp.net 网站移动到 Azure VM。由于现有站点的性质，我们仅限于 VM，因此纯天蓝色是不可能的。我目前的想法是循环负载平衡配置中的一系列克隆网站虚拟机，每个虚拟机都指向一个 sql server 虚拟机。sql server vm 将作为容错配置的一部分进行克隆，并且两者将与 SQL Sync 保持同步。

我们还需要使网站 vms 和 sql server vms 与操作系统和软件补丁保持同步的能力，因此每个都将在它自己的更新和故障域中。

谁能确认这一切都是可行的，或者可能提出替代方法？

主要担忧是：

*   sql server 的单个实例必须可用于网站的每个实例。
*   sql server 将包含财务数据，因此必须既安全又尽可能经常备份。
*   我们希望选择最终扩展 sql 服务器的负载能力，可能通过服务器场
*   该网站需要考虑到未来几个月/几年内用户数量的预期快速增长
*   网站虚拟机需要允许以新闻文章、常见问题解答更改等形式进行每周更新，因此这些更改必须能够在所有虚拟机之间同步

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T20:05:22.120

一般来说，这看起来会起作用。这里有一些想法：

1.  两个带有 SQL 服务的 VM 可以通过 SQL Sync 同步到 SQL Azure，但我认为您可以拥有的最短同步周期是 5 分钟。确保您的 SLA 可以接受。
2.  查看 Azure 信任中心，回答有关安全和财务数据的问题。通常，您自己的公司必须自己做出决定。 [http://www.windowsazure.com/en-us/support/trust-center/](http://www.windowsazure.com/en-us/support/trust-center/)
3.  您可以通过向 VM 池中添加更多 SQL Server 或使运行 SQL VM 的服务器更大（最大为超大）来扩展 SQL 占用空间。SQL 通常更喜欢更少和更大的服务器，而不是许多更小的服务器。
4.  请记住，解决方案的不同部分可以使用 Azure 的不同部分。在这种情况下，您使用的是用于 SQL 的 VM（因为您的需求超出了我认为的 SQL Azure 所能提供的范围）。您说您的应用程序需要自定义虚拟机，因为它的架构。那也行。上传 Web 服务器模板，然后从中生成您的虚拟机。当您想扩大规模时，只需从该模板中生成一个新模板。
5.  走 IaaS/VM 路线将消除 Azure/云可以为您带来的许多好处，因此我会尽快开始重构该应用程序的各个部分，以便迁移到云服务甚至网站。
6.  要在 Web 服务器虚拟机之间同步每周的内容更改，我会这样做，但你今天正在这样做。有些人使用 robocopy 来做到这一点（或等效的）。您可以将该内容移动到每个服务器指向的共享 blob 容器或共享数据库。您在 Web 服务器上的实际内容越少，通常越好。我的意思是将静态资源移动到 blob 容器（用于共享、冗余和最终的 CDN 性能提升），并将动态数据移动到表/队列/数据库。

如果您想进行更深入的对话，请与我联系。布赖恩

# python - 在 python 字符串中拆分字母和数字字符的快速方法

> ID：12409894
> 
> 赞同：25
> 
> 时间：2012-09-13T15:35:42.843
> 
> 标签：python, regex

我正在尝试制定一个简单的函数来捕获拼写错误，例如：

```
"Westminister15"
"Westminister15London"
"23Westminister15London" 
```

固定后：

```
["Westminister", "15"]
["Westminister", "15", "London"]
["23", "Westminister", "15", "London"] 
```

第一次尝试：

```
 def fixate(query):
     digit_pattern = re.compile(r'\D')
     alpha_pattern = re.compile(r'\d')
     digits = filter(None, digit_pattern.split(query))
     alphas = filter(None, alpha_pattern.split(query))
     print digits
     print alphas 
```

结果：

```
 fixate("Westminister15London")

 > ['15']
 > ['Westminister', 'London'] 
```

但是，我认为这可以更有效地完成，当我尝试以下操作时仍然会得到不好的结果：

```
 fixate("Westminister15London England")

 > ['15']
 > ['Westminister', 'London England'] 
```

显然它应该单独登记`London`，`England`但我觉得我的功能会被过度修补，并且有一个更简单的方法

这个问题有点等价于[这个](https://stackoverflow.com/questions/11477357/php-best-way-to-split-string-into-alphabetic-and-numeric-components)php question

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-13T15:40:10.977

问题是 Python`re.split()`不会在零长度匹配上拆分。但是您可以通过以下方式获得所需的结果`re.findall()`：

```
>>> re.findall(r"[^\W\d_]+|\d+", "23Westminister15London")
['23', 'Westminister', '15', 'London']
>>> re.findall(r"[^\W\d_]+|\d+", "Westminister15London England")
['Westminister', '15', 'London', 'England'] 
```

`\d+`匹配任意位数，`[^\W\d_]+`匹配任意单词。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-13T16:56:12.020

这是另一种方法，以防您更喜欢远离正则表达式，如果一个人不够熟悉而无法自己制作/更改它，有时可能会很笨拙：

```
from itertools import groupby

def split_text(s):
    for k, g in groupby(s, str.isalpha):
        yield ''.join(g)

print(list(split_text("Westminister15")))
print(list(split_text("Westminister15London")))
print(list(split_text("23Westminister15London")))
print(list(split_text("Westminister15London England"))) 
```

返回：

```
['Westminister', '15']
['Westminister', '15', 'London']
['23', 'Westminister', '15', 'London']
['Westminister', '15', 'London', ' ', 'England'] 
```

生成器也可以很容易地修改，如果需要，永远不会产生空白字符串。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-13T15:40:57.283

您可以使用此正则表达式代替您的：

```
>>> import re
>>> regex = re.compile(r'(\d+|\s+)')
>>> regex.split('Westminister15')
['Westminister', '15', '']
>>> regex.split('Westminister15London England')
['Westminister', '15', 'London', ' ', 'England']
>>> 
```

然后，您必须过滤列表以删除空字符串/仅包含空格的字符串。

# django - Apache 2: TemplateSyntaxError: Caught ImportError while rendering: No module named about

> ID：12409898
> 
> 赞同：-1
> 
> 时间：2012-09-13T15:35:58.640
> 
> 标签：django, apache, mod-wsgi

这是我的 wsgi 文件的内容：

```
import os
import sys

# put virtual environment on sys.path
sys.path.append("/check/www/pyapps/lib/python2.7/site-packages")

# put the Django project on sys.path
#sys.path.insert(0, os.path.abspath(os.path.join(os.path.dirname(__file__), "../../")))
sys.path.append("/check/www/")
sys.path.append("/check/www/textpisodes")

os.environ['DJANGO_SETTINGS_MODULE'] = 'textpisodes.settings'

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

我创建了一个基本的 pinax 帐户项目，并试图使其与 apache 和 mod_wsgi 一起使用。但我得到的只是`TemplateSyntaxError: Caught ImportError while rendering: No module named about`。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T16:01:20.680

您可以使用我网站上的此代码。希望能帮到你！

```
#!/usr/bin/python
import os, site, sys

# add the virtual environment path
site.addsitedir('/home/admin/webapps/djangotest/env/lib/python2.7/site-packages') # if you are using virtualenv
site.addsitedir('/home/admin/webapps/djangotest/django_project')
site.addsitedir('/home/admin/webapps/djangotest')

# fix markdown.py (and potentially others) using stdout
sys.stdout = sys.stderr

#Calculate the path based on the location of the WSGI script.
project = os.path.dirname(__file__)
workspace = os.path.dirname(project)
sys.path.append(workspace)

os.environ['PYTHON_EGG_CACHE'] = '/tmp'
os.environ['DJANGO_SETTINGS_MODULE'] = 'django_project.settings'
from django.core.handlers.wsgi import WSGIHandler
application = WSGIHandler() 
```

# jquery - 我需要在我的桌子上应用淡入/淡出

> ID：12409903
> 
> 赞同：1
> 
> 时间：2012-09-13T15:36:09.460
> 
> 标签：jquery, fadein, fadeout

我的[桌子](http://jsfiddle.net/hAv7P/22/)上有点击开关。*当我点击fodos*或*sociedades*时，我需要应用淡入和淡出。现在不是那么顺利了。我怎样才能实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:38:05.817

您可以简单地将切换动画的时间添加为参数（一个数字，如`500`或`'slow'`和`'fast'`字符串。 `.toggle`默认情况下，动画时间为 0，如`.show`和`.hide`。

[http://jsfiddle.net/hAv7P/23/](http://jsfiddle.net/hAv7P/23/) - 更好吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T15:44:04.293

简单的。替换`.toggle()`为`.fadeToggle()`。

```
$(".fondos").on('click', function() {
    $("tbody .f").fadeToggle();
});

$(".sociedades").on('click', function() {
    $("tbody .s").fadeToggle();
}); 
```

**演示：http:** [//jsfiddle.net/iambriansreed/SPV63/1/](http://jsfiddle.net/iambriansreed/SPV63/1/)

# c++ - 在父类中包含子类的 typedef

> ID：12409905
> 
> 赞同：1
> 
> 时间：2012-09-13T15:36:16.853
> 
> 标签：c++

我有一个看起来像这样的课程。我希望在 Parent 类中有 ParentMember 的 typedef 并将其重命名为 Member。这怎么可能？我能看到的唯一方法是将 std::vector 作为公共成员而不是使用继承。

```
typedef std::pair<std::string, boost::any> ParentMember;
class Parent: public std::vector<ParentMember>
{
public:
    template <typename T>
    std::vector<T>& getMember(std::string& s)
    {
        MemberFinder finder(s);
        std::vector<ParentMember>::iterator member = std::find_if(begin(), end(), finder);
        boost::any& container = member->second;
        return boost::any_cast<std::vector<T>&>(container);
    }
private:
    class Finder
    {
      ...
    };
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T15:42:51.983

> 我能看到的唯一方法是将 std::vector 作为公共成员而不是使用继承。

是的...这是正确的方式™。

现在让我们假设所讨论的类*不是* `std::vector`其他东西，这将使这个问题成为一个合理的问题。

一种解决方案是对基类使用非版本，`typedef`然后`typedef`

```
class Parent
  : public std::vector<std::pair<std::string, boost::any>>
{
public:
  typedef std::pair<std::string, boost::any> Member;
  // ...
}; 
```

在`std::vector`作为基类的情况下，它甚至将类型公开为嵌套的`value_type`typedef，这将允许您确保两者永远不会不同：

```
typedef value_type Member; // value_type inherited from std::vector 
```

如果您的`Parent`课程本身就是一个模板，您将需要

```
typedef typename Parent::value_type Member; 
```

# c - 从 C 中的二进制文件调用函数 (main())

> ID：12409908
> 
> 赞同：4
> 
> 时间：2012-09-13T15:36:20.440
> 
> 标签：c, mmap, binary-data

我有简单的 c 程序，例如 my_bin.c：

```
#include <stdio.h>

int main()
{
    printf("Success!\n");
    return 0;
} 
```

我用 gcc 编译它并得到可执行文件：my_bin。

现在我想使用另一个 C 程序调用 main（或运行这个 my_bin）。我用 mmap 和函数指针做的事情是这样的：

```
#include <stdio.h>
#include <fcntl.h>
#include <sys/mman.h>
int main()
{
   void (*fun)();
   int fd;
   int *map;
   fd = open("./my_bin", O_RDONLY);
   map = mmap(0, 8378, PROT_READ, MAP_SHARED, fd, 0);
   fun = map;
   fun();
   return 0;
} 
```

编辑 1：添加了 PROT_EXEC 使响应更清楚......我想在第二个程序中调用一个外部二进制程序。

我不知道如何用 main（其他程序）的地址初始化函数指针。任何想法？

## 编辑2：

为什么 seg 错误，在谷歌搜索后发现，这是因为我的 mmap 的大小和偏移量参数。它应该是页面大小的倍数。[参考：在 C 中使用 mmap 读取二进制文件时出现段错误

现在代码看起来像：

```
#include <stdio.h>
#include <fcntl.h>
#include <sys/mman.h>
int main()
{
   void (*fun)();
   int fd;
   int *map;
   int offset = 8378;
   int pageoffset = offset % getpagesize();
   fd = open("./my_bin", O_RDONLY);
   if(fd == -1) {
        printf("Err opening file\n");
        return -1;
   }
   map = mmap(0, 8378 + pageoffset, PROT_READ|PROT_EXEC,
                        MAP_SHARED, fd, offset - pageoffset);
   perror("Err\n"); //This is printing err and Success!
   //fun = map; // If I uncomment this and 
   //fun();     // this line then, still it 
                // print err and Success! from perror
                // but later it says Illegal instruction. 
   return 0;
} 
```

仍然有 fun() 或没有它不打印......不知道如何给出 main() 地址。

## 编辑 2 [已解决]：

第一件事：我没有正确阅读定义，我已经给出了我应该从中读取二进制文件的地址。第二：mmap：size和offset应该是pagesize的倍数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T15:40:15.110

`main()`通常不是 C 程序中的第一个函数。链接器将在其前面放置一些设置/初始化代码，其中包括设置环境、获取命令行参数、将它们解析为字符串数组等。

当新`main()`函数开始设置内存分配例程时会出现问题 - 基本上，这将破坏主应用程序的所有重要数据结构。

如果你想执行一个函数（即没有），那么将你的 C 代码编译到一个共享库中，并使用或你的操作系统的等效程序`main()`加载它。`dlopen()`

如果您确实需要`main()`，请使用`fork()`and `exec()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T17:24:18.167

一般来说，编译链接生成的可执行文件并不是一个简单的二进制映像，可以加载到内存中执行。（有特定的计算平台目标。）通常，称为加载程序的特殊程序必须读取可执行文件，使用文件的内容和指令准备内存，并使用特殊的系统调用来启动程序的执行作为一个新的过程。

例如，可执行文件通常包含一些必须复制到内存然后标记为只读的数据，一些必须复制到内存然后标记为可读和可写的数据，以及一些数据（称为“文本”或程序指令）必须复制到内存并标记为可执行文件。可执行文件通常还包含一些有关准备内存的其他信息，例如留出一些最初清除的内存，留出一定数量的堆栈空间，从哪个地址开始执行（通常不是`main`）等等。

一个复杂的方面是可执行文件包含有关程序文本和数据的哪些部分必须根据使用的内存地址进行更改的信息。数据和文本存放在内存中的地址在编译时可能是未知的，因此编译器编写了一些原型代码，加载器在确定地址后必须调整代码。

另一个复杂因素是可执行文件可能包含对动态库中符号的引用。加载器必须检查这些引用并加载必要的动态库。

如您所见，加载不是一个简单的过程。你不能简单地对一个可执行文件进行内存映射并跳转到它，即使你能弄清楚它从哪里`main`开始。

一些系统为加载程序提供接口。这些通常与动态库一起使用。您将构建一个动态库，而不是构建一个独立的可执行程序。然后您可以使用对动态库接口的调用来加载库，找到其中的例程地址，然后调用这些例程。

通常，编程环境不提供加载可执行文件和调用其`main`例程的便捷方式。创建动态库而不是创建可执行文件然后加载动态库并在其中调用例程可能更容易。或者，有一些方法可以将可执行文件作为单独的进程调用，这样它基本上是单独运行的，就像在命令行中键入的命令一样，而不与调用进程共享内存。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-13T15:53:48.223

恕我直言，如果将功能链接到一个可执行文件中，“正确”的解决方案是不要从另一个函数调用 main() 。相反，创建一个函数来包装 main() 所做的事情并从两个 main() 中调用它。

```
int success()
{   
  printf("Success!\n");
  return 0;
}

int main()
{
  return success();
} 
```

要调用外部系统调用，请使用[system](http://www.cplusplus.com/reference/clibrary/cstdlib/system/)

# mongodb - MongoDB架构

> ID：12409909
> 
> 赞同：0
> 
> 时间：2012-09-13T15:36:23.447
> 
> 标签：mongodb

我了解 MongoDB 可以设置为非分片副本集或分片。Sharded 用于非常大的数据集的可扩展性。

问题是，我什么时候知道我应该使用 Sharded 与 3 个 mongodb 节点的基本副本集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:43:14.667

一如既往，这取决于。当您的数据库太大而无法在单台机器上完全保存在 RAM 中时，请考虑分片。与往常一样，确定的最佳方法是在您的特定情况/架构/使用模式中进行测试，并亲自查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T01:51:06.010

正如@gkamal 所提到的，当您的数据存储开始达到单个盒子大小的 60-70% 并且负载主要是写入繁重时，您需要考虑分片。

无阴影的 3 个副本集与副本集不会扩展写入负载的分片实例之间的主要区别。由于锁定开销，主服务器将成为写入主服务器的瓶颈。另一方面，如果分片正确完成，它将减轻写入/读取的负载，因为每个分片都拆分为多个孤立的实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T15:48:37.667

除了数据集大小之外，还可以考虑更多参数。

1.  写负载。副本集将允许读取扩展（1 个主 - 许多从属），但如果应用程序写入繁重，则分片是分配写入负载的一种方式。但是为了使数据在集群中分布的方式有效，应该与并发写入模式相匹配。
2.  多数据中心部署。如果应用程序需要地理分布标签感知分片（在 2.2 中引入）允许您保持

# php - PHP 邮件功能，一些客户端没有将我的邮件显示为 html？

> ID：12409910
> 
> 赞同：0
> 
> 时间：2012-09-13T15:36:23.963
> 
> 标签：php, email

我正在尝试使用 PHP 的 mail() 函数向我的网站成员发送电子邮件，

邮件是希伯来语的，我想发送一封 html 电子邮件，

我就是这样发送的

```
$mail_to = "Email@domain.com";
$message = "
<html>
some content here
</html>
";
$headers = "MIME-Version: 1.0" . "\r\n";
$headers .= "Content-type:text/html;charset=windows-1255" . "\r\n";
$headers .= 'From: "MyWebsiteName" <support@domain.com>' . "\r\n";

$mail = mail($mail_to, $subject, $message, $headers ); 
```

它与 Gmail 或 Thunderbird 用户等客户端完全兼容，但我在其他一些不太有名但在我的国家仍然广泛使用的客户端中查看了它，它只是向我展示了 html 源.. 我'还将补充说，我在那些运行良好的客户端中看到了其他邮件，因此它们支持 html 邮件。

我究竟做错了什么？

编辑：

我查看了标题，很奇怪，这些是它们的标题：

```
MIME-version: 1.0
X-Mailer: aspNetEmail ver 4.0.0.6
Content-type: text/html; charset=UTF-8

Content-transfer-encoding: quoted-printable
SLNG_REVERSE_PATH: mail@domain.co.il
DT: 2
DB: 1
QueueCmd: 1
List-Unsubscribe: <mailto: mail@domain.co.il>
Original-recipient: rfc822;myemail@domain.com 
```

这些是我的：

```
Message-id: <20120913143702.10413.qmail@www022.inter.co.il>
MIME-version: 1.0
Content-type: TEXT/PLAIN
Content-transfer-encoding: 8BIT
Original-recipient: rfc822;myemail@domain.com

Content-type:text/html;charset=windows-1255 
```

就像他们出于某种原因将 TEXT/PLAIN 添加到我的，怎么会？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T16:11:39.473

编辑后：

您在 Content-type 标题之前有太多换行符，这使其成为电子邮件正文的一部分。一些客户端会检测到这种错误格式或识别 HTML 内容。其他人会假设 text/plain 或邮件服务器会添加 text/plain 标头本身，因为它认为您没有指定任何标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T16:15:56.567

I would strongly suggest not using PHP's `mail()` function. It's not fit for purpose, unless you're doing really basic stuff like sending a simple text-only message to a single address.

For anything even slightly more complex, I suggest using the [phpMailer class](http://code.google.com/a/apache-extras.org/p/phpmailer/).

phpMailer makes it very easy to work with complex emails in PHP. It handles HTML messages, attachments, multiple recipients, and a bunch of other features, all in a very simple and easy to use API.

See also another answer I wrote previously for more details: [Send attachments with PHP Mail()?](https://stackoverflow.com/questions/12301358/send-attachments-with-php-mail/12302354#12302354)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T15:38:46.873

从我的 POV - 什么都没有。如果您阅读 HTML，那是因为客户端无法读取`text/html`. 我的解决方案？创建多部分电子邮件并同时包含`text/html`和`text/plain`。如果需要，请将您的电子邮件保存在网页中。当您发送 text/html 时，请照常发送。使用 text/plain，将链接发送到您存储电子邮件的网页。

另外，尝试添加这样的空间：

```
Content-type: text/html; charset=windows-1255 
```

不确定它会改变什么，但谁知道呢。顺便说一句，连接在这里没有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T18:36:08.937

因为是希伯来语，您可以尝试：

$headers .= "内容类型: text/html; charset=utf-8\r\n";

我在希腊邮件中使用它

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T15:49:34.417

尝试`Content-type: text/html; charset="iso-8859-8"`

# php - PHP将变量转换为foreach循环中的对象类型

> ID：12409915
> 
> 赞同：40
> 
> 时间：2012-09-13T15:36:33.760
> 
> 标签：php, casting, foreach

在以下代码中，`$quiz_object->personalities`包含一个对象数组`Personality`。

```
// Loop through each personality that exists for the quiz
foreach($quiz_object->personalities AS $existing_personality)
{

    // Show all of the existing personalities
    echo $existing_personality->GetQuizMakerPersonalityHTML();
} 
```

`$existing_personality`我如何将 foreach 循环中的变量“转换”（我认为这是正确的词）作为对象类型？

我希望这样做，以便当我输入 时`$existing_personality->`，我会得到该对象类型可用的公共函数列表。

**更新**

目前，Zend Studio 不知道我在循环中循环`Personality`对象数组，它只是认为它是一个标准变量。但是，它是一种类型，我的代码运行良好。我只想在 foreach 循环中对我的变量进行 IDE 提示。

为了清楚起见，如果我有，其他所有对象都会出现提示：

```
$personality_object = new Personality();

// I get the IDE hints here
echo $personality_object->MyFunction(); 
```

但是一旦我开始在 foreach 中循环，Zend 就无法知道我正在循环一个对象数组。

这就是我的`Personality`对象中最初定义个性数组的方式：

```
class Personality
{

    // Array of Personality objects
    public $personalities = array();

} 
```

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-09-13T16:10:18.190

这在很大程度上取决于您使用的 IDE。

在 Netbeans 和 IntelliJ 中，您可以`@var`在评论中使用：

```
/* @var $variable ClassName */
$variable-> 
```

IDE 现在将知道 $variable 属于 ClassName 类并在`->`.

您也可以在自己的 IDE 中试用。

您还可以在方法中创建`@return`注释，`getPersonalities()`说明返回将是 a `ClassName[]`，这意味着 ClassName 对象的数组：

```
/**
 * Returns a list of Personality objects
 * @return Personality[]
 */
function getPersonalities() {
    return $this->personalities;
} 
```

这也取决于您的 IDE 如何解释这种类型的提示。

要在 foreach 循环中使用它，您可以执行 1：

```
/* @var $existing_personality Personality */
foreach( $quiz_object->personalities as $existing_personality ){
} 
```

或 2：

```
foreach( $quiz_object->getPersonalities() as $existing_personality ){
} 
```

如果您的 IDE 足够好，两者都应该启用 IDE 提示。

作为一个额外的说明，如果你想在它自己的类中使用它，你可以在声明一个类变量时使用相同的签名：

```
class MyClass
{ 

    /** 
    * @var ClassName[] $variable List of ClassName objects. 
    */ 
    var $variable;

} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-02-05T01:21:30.507

只是想我会把它扔在那里给那些使用 phpStorm 的人。

我发现让 IDE 自动填充对象的方法的方法是预先包含快速 if 检查并检查对象是否存在以及 $var 是所述对象的实例。

例子：

```
 foreach ($objArray as $obj) {
            if (is_object($obj) && $obj instanceof DataObject) {

                $obj->thisMethodShouldBeAvailableInPHPStormNow();

            } 
```

在寻找更好的方法时发现了这个问题，但上述方法对我有用。

干杯!

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-05-13T07:56:16.977

我知道这篇文章很旧，但我认为这可能会对某人有所帮助：

在 PhpStorm 中以这种方式工作，也许在其他人中也是如此。

```
/**
 * @param ClassName[] $variables
 */
public function loopFunction($variables){
    foreach ($variables as $variable) {
        echo $variable->functionName();
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-10-16T22:55:16.500

您始终可以从 foreach 中调用一个单独的函数，并在函数声明中声明该类。这可能还具有让您在其他地方重用此代码的好处。例如在下面的函数`getPriceFromProduct`中，您会看到我如何将 $product 的类声明为 Product。

当然，我同意不必这样做会很好，但是嘿，它有效。

```
class ProductBundle {

  private $products; //buy this
  public function get_products() { return $this->products; }
  public function add_product($product) { $this->products[] = $product; }

  public function get_price() {
        $products = $this->get_products();
        $prices = array();
        foreach($products as $product) {
            $prices[] = $this->getPriceFromProduct($product);
        }
        return array_sum($prices);
    }

    private function getPriceFromProduct(Product $product) {
        $price = $product->get_price();
        return $price;
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-19T16:51:40.633

如果您想要代码中的实际类型声明，而不是可能根据 IDE 以不同方式获取的注释，您可以使用`array_*`函数，例如[`array_walk`](https://secure.php.net/manual/en/function.array-walk.php).

```
array_walk($quiz_object->personalities, function (Personality $p) {
    echo $existing_personality->GetQuizMakerPersonalityHTML();
}); 
```

# ruby - ruby 像四进制数系统一样构建哈希

> ID：12409919
> 
> 赞同：0
> 
> 时间：2012-09-13T15:36:40.660
> 
> 标签：ruby

如何在 ruby​​ 中构建这个序列？

```
{
"0" => "00000",
"1" => "00001",
"2" => "00002",
"3" => "00003",
"4" => "00010",
"5" => "00011",
"6" => "00012",
....
"1020" => "33330",
"1021" => "33331",
"1022" => "33332",
"1023" => "33333"
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T15:41:25.900

你可以做：

```
nums = Hash.new
0.upto(1023){ |x| nums[x] = x.to_s(4) }
puts nums 
```

基本上 Fixnum.to_s(4) 会将您的基数为 10 的数字转换为基数 4。

**更新 - 作为一个班轮**

如果你想要一个班轮，你可以这样做：

```
puts (0..1023).inject({}){ |hash, e| hash[e] = e.to_s(4); hash } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T15:58:43.337

```
nums = Hash.new { |h, k| "%05d" % Integer( k ).to_s( 4 ) rescue nil } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T23:00:53.477

```
Hash[1024.times.map {|n| [n.to_s, format('%05d', n.to_s(4))] }] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T01:02:14.627

鉴于总体规律性，我认为您不应该将其保留为哈希值。相反，您应该有一种方法来做到这一点。

```
class String
  def quaternary
    to_i.tap{|i| return unless 0 <= i and i <= 1023}.to_s(4).rjust(5, "0")
  end
end

"5".quarternary # = > "00011" 
```

# couchdb - Apache tomcat7 + couchdb 在同一主机

> ID：12409927
> 
> 赞同：1
> 
> 时间：2012-09-13T15:37:15.933
> 
> 标签：couchdb, tomcat7

我在互联网上找不到任何关于如何让它们一起工作的指南。我找到了一些 couchdb 教程，但它们大多将网页托管在 couchdb 自己的网络服务器中。

我的要求：

1.  使用 tomcat 7（或其他版本） - 我将使用 jsp 作为网站。它具有一些需要文件上传和文件处理、文件生成等功能，这将需要 java.lang. 它还有管理控制台，需要下一个项目，
2.  ExtJS（可能是 V4）- 我将需要在管理控制台页面中使用它来轻松访问 couchdb 和其他 ui 组件（抱歉，我目前不考虑 jquery，因为我已经熟悉 .
3.  Couchdb 因为客户端需要动态的数据结构。

现在我的问题是如何让 tomcat 和 couchdb 在同一主机（当然还有端口）上运行？我想尽可能避免让我的页面进行跨域 js 调用。

在最坏的情况下，我可能必须创建一个 servlet 来覆盖调用 couchdb 的 put|get|post|delete（通过使用驱动程序或 httpclient）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:45:23.193

是的，*当然*您可以将 CouchDB 和您的 Web 服务器放在一起。

强烈建议：

对服务器端的东西使用除 Javascript 之外的其他语言。PHP、Perl、Python、Java -*任何东西*。例如，在 Tomcat/Java .jsp 中使用[CouchDB HTTP API](http://wiki.apache.org/couchdb/HTTP_database_API)很简单。

恕我直言...

# ruby-on-rails-3 - 为什么升级到 Rails 3.2.8 后我的 activeadmin header_renderer.rb 中断

> ID：12409931
> 
> 赞同：0
> 
> 时间：2012-09-13T15:37:43.783
> 
> 标签：ruby-on-rails-3, activeadmin

我已经自定义了 activeadmin 以根据用户权限呈现主标题导航。我给 AdminUser 一个角色，如果角色是“超级”，则显示顶部导航。我最近升级到 ruby​​ 1.9.3 和 rails 3.2.8 并且在尝试转到任何活动的管理页面时出现以下错误。

```
NoMethodError in Admin/dashboard#index

Showing /Users/mwallace/.rvm/gems/ruby-1.9.3-p194/bundler/gems/active_admin-3d6976ccf8a4/app/views/active_admin/dashboard/index.html.arb where line #1 raised:

undefined method `<<' for nil:NilClass
Extracted source (around line #1):

1: insert_tag view_factory.dashboard_page
Rails.root: /Users/mwallace/Development/dev/driftlab/driftlab/driftstack

Application Trace | Framework Trace | Full Trace
app/admin/views/header_renderer.rb:13:in `add' 
```

这是我的 app/admin/views/header_renderer.rb 文件中的内容。注释掉删除和添加操作可修复错误，但如果我注释掉该代码，我的 to_html 操作逻辑将不再有效。

```
module ActiveAdmin    
class Menu 

        # def remove(name)
        #   item = self[name]
        #   return if item.nil?
        #   @items.delete(item)
        # end

        # def add(*args, &block)
        #   mitem = MenuItem.new(*args, &block)
        #   @items << mitem
        # end

      end

      module Views
        class HeaderRenderer
          def to_html
            title + global_nav? + utility_navigation
          end

          def global_nav?
            if current_admin_user.role == "super"
              puts "yep"
              global_navigation 
            else
              puts "nope"

            end
          end
        end

        class TabsRenderer
          def render_item(item)
            content_tag :li, :id => item.dom_id, :class => [("current" if current?(item)), ("has_nested" unless item.children.blank?)].compact.join(" ") do
              unless item.children.blank?
                link_to(item.name, item.url || "#") + render_nested_menu(item)
              else
                link_to item.name, item.url
              end
            end
          end
        end
      end
    end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T12:15:36.200

@items 没有初始化，所以它是 nil。你必须初始化它，例如

```
@items ||= [] 
```

# c# - 从 UserControls 更改标签的内容

> ID：12409932
> 
> 赞同：-2
> 
> 时间：2012-09-13T15:37:48.817
> 
> 标签：c#, wpf, data-binding, user-controls, window

我创建了一个名为 UserControl`UserControl1`并将其添加到我的**MainWindow**中。

我想要的是，当用户单击`add`UserControl 上的按钮时， **MainWindow**`data`中调用的标签的内容发生了变化。

 **```
<UserControl x:Class="WpfApplication6.UserControl1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <Grid>
        <Button Content="add" x:Name="add"/>
    </Grid>
</UserControl>

<Window x:Class="WpfApplication6.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
        xmlns:WpfApplication6="clr-namespace:WpfApplication6"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <StackPanel Orientation="Vertical">
            <Label Content="data" x:Name="data"/>
            <WpfApplication6:UserControl1 x:Name="myUC"/>
    </StackPanel>
    </Grid>
</Window> 
```

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:42:42.343

在 userControl 中定义一个属性说`NewData`，不要忘记实现`INotifyPropertyChanged`Iterface。

将标签内容绑定到 userControl.NewData 属性：

```
<Label Content="{Binding ElementName=myUC, Path=NewData" x:Name="data"/> 
```

当按下 userControl 的按钮时，将所需数据设置为 NewData 属性

[如何：实施属性更改通知](http://msdn.microsoft.com/en-us/library/ms743695.aspx)**

# javascript - 如何在非活动选项卡上捕获按键事件

> ID：12409940
> 
> 赞同：2
> 
> 时间：2012-09-13T15:38:04.500
> 
> 标签：javascript, jquery, web-applications

我正在开发一个网络应用程序。我想在用户在另一个选项卡上浏览时使用 javascript/jquery 捕获按键事件，即当我的 Web 应用程序运行的选项卡处于非活动状态时。

是否可以使用 javascript 或其他技术来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T15:44:27.187

对不起。简单的答案是**否定的**

您可以使用 javascript 的最远距离是检测窗口/选项卡是否/何时变为非活动状态。[在这里](https://stackoverflow.com/questions/1060008/is-there-a-way-to-detect-if-a-browser-window-is-not-currently-active)阅读。

* * *

但是，如果您编写自己的浏览器插件，您肯定可以做到。但话又说回来，我不寒而栗地想到这会让你走多远。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:43:43.713

我不相信你可以用 JavaScript 或 jQuery 达到那个水平。你需要一些可以达到更高水平的东西。

顺便说一下，您可能想研究一个 Java Applet。

# android - 为移动 Chrome 上的本地文件启用地理定位

> ID：12409943
> 
> 赞同：1
> 
> 时间：2012-09-13T15:38:10.597
> 
> 标签：android, google-chrome, mobile, geolocation

我的问题与[这个](https://stackoverflow.com/questions/5423938/html-5-geo-location-prompt-in-chrome)问题非常相似，但涉及到 Mobile Chrome 或我可以在 Android 上安装的任何其他浏览器。

我使用 HTML5 地理定位功能编写了一个简单的脚本，但它在 Mobile Chrome 和 Android 4.1 系统浏览器中都不起作用。在第一个中，我的脚本返回“用户被拒绝”错误代码，尽管我没有拒绝任何事情（尽管在 Chrome 设置中启用了地理定位）。在系统浏览器中，状态保持在“空闲”（启动值），这让我觉得这个糟糕的浏览器甚至不兼容 HTML5，也不支持 jQuery，我用过。

因为我想开发一个无连接脚本（仅基于设备 GPS 的位置），所以我需要能够在 Android 上运行并允许我使用本地存储文件中的地理位置（可通过`file:///`协议访问）的任何解决方案。有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T18:21:11.737

根据您链接到的错误，`file://`URL 的地理位置和许多其他功能被禁用（就像在 Chrome 桌面中一样）。在常规 Chrome 中，您可以使用一些有用的标志（如 ）启动浏览器`--allow-file-access-from-files`，但如果不运行本地 HTTPD，则无法启用地理定位。

对于移动版 Chrome，我们愿意接受有关新开发者功能的建议。请将此作为功能请求记录在[http://new.mcrbug.com](http://new.mcrbug.com)上。

# stored-procedures - 在函数调用中不断收到“无效参数”错误

> ID：12409948
> 
> 赞同：0
> 
> 时间：2012-09-13T15:38:22.090
> 
> 标签：stored-procedures, sqlanywhere

我是 SQL Anywhere 的新手。我正在将我们在 PostgreSQL 9.1 中开发的数据库移植到 SQL Anywhere 12.0.1。我有一个函数将模式的所有组合作为结果集返回。该模式是一系列字母和数字，组被方括号包围。例如，“A1[0O][0O][0OU]Z1”就是这样一种可能的模式。该函数应该做的是复制任何不在方括号中的字符，然后为方括号中所有字符的每个组合返回一个字符串。因此，示例函数返回的一个值应该是“A1000Z1”；另一个是“A1O00Z1”，依此类推。

每当我调用该函数时，我都会从 SQL Anywhere 收到以下消息：

```
Coult not execute statement.  Function 'AllCombinations' has invalid parameter 'Combination' ('OUT') 
```

这是函数的来源：

```
CREATE OR REPLACE PROCEDURE "AllCombinations" (
    IN Plate VARCHAR(50)
) RESULT ( Combination VARCHAR(50) )
BEGIN
    DECLARE @Combinations    VARCHAR(8000);
    DECLARE @Combination    VARCHAR(50);
    DECLARE i                INT        DEFAULT 1;

    -- Create the temporary table to hold all of the combinations
    CREATE TABLE #Combinations (
        Combination     VARCHAR(50) NOT NULL
    );

    -- Get all of the combinations AS a big string
    SET @Combinations = "NextDigit"( Plate, 1, '' );

    -- Begin a loop
    BuildCombinations:
    LOOP
        -- Find the i-th combination
        SELECT  row_value INTO @Combination
        FROM    sa_split_list( @Combinations, '|')
        WHERE   line_num = i;

        -- Do we have a string?
        IF @Combination <> '' THEN
            -- We do.  Add it to the Combinations table
            INSERT INTO #Combinations ( Combination ) VALUES ( @Combination );
        ELSE
            -- We do not.  Exit the loop
            LEAVE BuildCombinations;
        END IF;

        -- Move on to the next combination
        SET i = i + 1;
    END LOOP BuildCombinations;

    -- Return all of the combinations we built
    SELECT Combination FROM #Combinations;
END; 
```

我不相信问题出在 NextDigit 存储过程中。当我调用它时，我得到了一个正确的返回值。只是这个不会返回正确的值。

我的代码有什么问题？

托尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T16:42:16.483

我发现问题不在存储过程中，而是在调用存储过程的语句中。

调用是这样写的：

```
SELECT "AllCombinations"( 'A1[0O][0O][0OU]Z1' ); 
```

这产生了错误。另一方面，如果我这样写调用：

```
SELECT Combination FROM "AllCombinations"( 'A1[0O][0O][0OU]Z1' ); 
```

然后它工作。第一个语法是它在 PostgreSQL 中的调用方式；它还使用 PostgreSQL 的 RETURN NEXT 语句来返回值。不同的数据库，不同的语法。

# haproxy - HA Proxy Stick-table 和 tcp-connection 配置

> ID：12409952
> 
> 赞同：2
> 
> 时间：2012-09-13T15:38:35.813
> 
> 标签：haproxy

我正在使用 HA 代理 HA-Proxy 版本 1.4.18 2011/09/16 我正在尝试将以下内容插入 /etc/init.d/haproxy.cfg 文件

```
# Use General Purpose Couter (gpc) 0 in SC1 as a global abuse counter
# Monitors the number of request sent by an IP over a period of 10 seconds
stick-table type ip size 1m expire 10s store gpc0,http_req_rate(10s)
tcp-request connection track-sc1 src
tcp-request connection reject if { src_get_gpc0 gt 0 }

# Table definition  
stick-table type ip size 100k expire 30s store conn_cur(3s)
# Allow clean known IPs to bypass the filter
tcp-request connection accept if { src -f /etc/haproxy/whitelist.lst }
# Shut the new connection as long as the client has already 10 opened
tcp-request connection reject if { src_conn_cur ge 10 }
tcp-request connection track-sc1 src 
```

我收到以下错误：

```
[警报] 256/113143 (4627)：解析 [/etc/haproxy/haproxy.cfg:36]：stick-table：未知参数“存储”。
[警报] 256/113143 (4627)：解析 [/etc/haproxy/haproxy.cfg:37]：代理“http_proxy”中“tcp-request”之后的未知参数“连接”
[警报] 256/113143 (4627)：解析 [/etc/haproxy/haproxy.cfg:38]：代理“http_proxy”中“tcp-request”之后的未知参数“连接”
[警报] 256/113143 (4627)：解析 [/etc/haproxy/haproxy.cfg:41]：stick-table：未知参数“存储”。
[警报] 256/113143 (4627)：解析 [/etc/haproxy/haproxy.cfg:43]：代理“http_proxy”中“tcp-request”之后的未知参数“连接”
[警报] 256/113143 (4627)：解析 [/etc/haproxy/haproxy.cfg:45]：代理“http_proxy”中“tcp-request”之后的未知参数“连接”
[警报] 256/113143 (4627)：解析 [/etc/haproxy/haproxy.cfg:46]：代理“http_proxy”中“tcp-request”之后的未知参数“连接”
[警报] 256/113143 (4627)：在配置文件中发现错误：/etc/haproxy/haproxy.cfg
[警告] 256/113143 (4627)：代理“http_proxy”：在多进程模式下，统计信息将仅限于分配给当前请求的进程。
[警报] 256/113143 (4627)：在配置中发现致命错误。
[失败]

```

你能告诉我代码有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T23:15:47.137

Storing data in stick-tables only appeared in haproxy 1.5-dev, not 1.4\. You should try the latest 1.5-dev12\. BTW if you're on 1.4, you should upgrade to 1.4.22 which fixes a number of bugs since your one-year-old 1.4.18.

# c - Ruby C API - 如何删除类方法（特别是新的）？

> ID：12409954
> 
> 赞同：0
> 
> 时间：2012-09-13T15:38:42.747
> 
> 标签：c, ruby

我正在编写一个与 C 库的 Ruby 绑定。我想`new`从我的一些类中删除该方法-我正在使用其他类方法创建对象，例如`create`and`load`并且默认实现`new`只是给我留下了一个无效的指针（类的对象只是指向不透明结构的指针）。

我读过[这个](https://stackoverflow.com/questions/2079240/removing-undefining-a-class-method)但是

```
class Test
end

class <<Test
   remove_method :new
end 
```

刚给我

> > NameError：类中未定义方法“新”

无论如何，我想从 C 中做到这一点（并避免`rb_eval_string`）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T16:11:45.180

该`new`方法做了 3 件事：

*   它调用`allocate`
*   它调用`initialize`
*   它返回新对象（并忽略初始化的返回值）。

我认为您无法成功删除它。但是`new`私有化很好：

```
class X

  def initialize(a,b)
    @a=a
    @b=b
  end

  private_class_method :new

  def X.create(x,y)
    new(x,y)
  end

end 
```

# javascript - 使用 setInterval 设置 x.domain

> ID：12409955
> 
> 赞同：1
> 
> 时间：2012-09-13T15:38:44.003
> 
> 标签：javascript, svg, d3.js, data-visualization

再次修改这个问题，因为在新版本的库d3（3.0.3）中解决方法不起作用，所以再次来请教一下，不胜感激。

这是库 d3 (3.0.3) 的新代码：

[https://gist.github.com/4495104](https://gist.github.com/4495104) http://bl.ocks.org/4495104/e7a7589098140dff36df7ab2a824d71072bc3be4

根据我的工作，错误应该在“491”行。

```
// Reset the domain relative to the current zoom offsets.
    x.domain(x0.range().map(function(x) {
      return (x - translate[0]) / scale; 
    }).map(x0.invert)); 
```

我们用 改变`x.domain`每一秒`setInterval`，因为我们想要生成背景移动的外观，但是每次运行事件`d3.behavior.zoom()`（缩放或平移）时，都会`x.domain`自动切换到初始值​​。在下一个链接中，您可以查看问题。

[http://jsfiddle.net/cristian540/Uy6bW/11/](http://jsfiddle.net/cristian540/Uy6bW/11/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T22:44:29.220

如果以编程方式更改比例的域，则需要将比例重新分配给缩放行为。这是因为缩放行为在内部存储了比例的克隆，用于计算新域的新比例和平移偏移量。因此，如果您不重新分配比例，它会继续使用（旧）克隆比例。

我已经更新了[文档](https://github.com/mbostock/d3/wiki/Zoom-Behavior#wiki-x)以包含有关此的注释。

还有一个额外的复杂性，即缩放的 x 和 y 比例应该代表缩放比例 = 1 的域。因此，您实际上需要将当前比例的自己的克隆保持在缩放比例 = 1 并将偏移量应用于克隆和当前比例。

然后，您可能还需要反转当前的缩放平移和缩放，具体取决于您需要的确切行为。

所以它应该看起来像：

```
var x0 = d3.scale.linear().domain(…).range(…), // initial scale
    x = x0.copy(); // copy to use for axes and zoom behaviour

setInterval(function() {
  var translate = zoom.translate(),
      scale = zoom.scale(),
      xd = x0.domain(),
      dx = 1;

  // Set a new x-domain: offset by dx.
  x0.domain([xd[0] += dx, xd[1] += dx]);

  // Set the zoom x-domain (this resets the domain at zoom scale=1).
  zoom.x(x.domain(xd));

  // Reset the domain relative to the current zoom offsets.
  x.domain(x0.range().map(function(x) {
    return (x - translate[0]) / scale;
  }).map(x0.invert));
}, 1e3); 
```

[这个例子](http://bl.ocks.org/3743077)在行动。

# r - ggplot2 - 在情节之外进行注释

> ID：12409960
> 
> 赞同：80
> 
> 时间：2012-09-13T15:38:54.783
> 
> 标签：r, annotations, ggplot2

我想将样本大小值与绘图上的点相关联。我可以`geom_text`用来定位点附近的数字，但这很混乱。沿着情节的外边缘排列它们会更干净。

例如，我有：

```
df=data.frame(y=c("cat1","cat2","cat3"),x=c(12,10,14),n=c(5,15,20))

ggplot(df,aes(x=x,y=y,label=n))+geom_point()+geom_text(size=8,hjust=-0.5) 
```

这产生了这个情节： ![在此处输入图像描述](../Images/635bc678760d8b854a24205c7e1e6e58.png)

我更喜欢这样的东西： ![在此处输入图像描述](../Images/2516d33e01682c3e328f6147dbf8368a.png)

我知道我可以创建第二个绘图并使用`grid.arrange`（a la [this post](https://stackoverflow.com/questions/10525957/how-to-draw-lines-outside-of-plot-area-in-ggplot2)），但是确定 textGrobs 的间距以与 y 轴对齐会很乏味。有没有更简单的方法来做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2018-07-12T18:52:07.260

这现在在 ggplot2 3.0.0 中很简单，因为现在可以通过使用`clip = 'off'`坐标函数中的参数来禁用裁剪，例如`coord_cartesian(clip = 'off')`or `coord_fixed(clip = 'off')`。下面是一个例子。

```
 # Generate data
    df <- data.frame(y=c("cat1","cat2","cat3"),
                     x=c(12,10,14),
                     n=c(5,15,20))

    # Create the plot
    ggplot(df,aes(x=x,y=y,label=n)) +
      geom_point()+
      geom_text(x = 14.25, # Set the position of the text to always be at '14.25'
                hjust = 0,
                size = 8) +
      coord_cartesian(xlim = c(10, 14), # This focuses the x-axis on the range of interest
                      clip = 'off') +   # This keeps the labels from disappearing
      theme(plot.margin = unit(c(1,3,1,1), "lines")) # This widens the right margin 
```

[![在此处输入图像描述](../Images/b1b1cd60b91a6c1584bdc3aa4e8d1f74.png)](https://i.stack.imgur.com/V2jLi.png)

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2012-09-14T02:48:49.323

您不需要绘制第二个图。您可以使用`annotation_custom`在绘图区域内部或外部的任何位置定位 grobs。grobs 的定位是根据数据坐标进行的。假设“5”、“10”、“15”与“cat1”、“cat2”、“cat3”对齐，则需要注意 textGrobs 的垂直定位 - 您的三个 textGrob 的 y 坐标由三个数据点的 y 坐标。默认情况下，`ggplot2`剪辑会抓取到绘图区域，但可以覆盖剪辑。相关边际需要扩大，以便为 grob 腾出空间。以下（使用 ggplot2 0.9.2）给出了一个类似于你的第二个图的图：

```
library (ggplot2)
library(grid)

df=data.frame(y=c("cat1","cat2","cat3"),x=c(12,10,14),n=c(5,15,20))

p <- ggplot(df, aes(x,y)) + geom_point() +            # Base plot
     theme(plot.margin = unit(c(1,3,1,1), "lines"))   # Make room for the grob

for (i in 1:length(df$n))  {
p <- p + annotation_custom(
      grob = textGrob(label = df$n[i], hjust = 0, gp = gpar(cex = 1.5)),
      ymin = df$y[i],      # Vertical position of the textGrob
      ymax = df$y[i],
      xmin = 14.3,         # Note: The grobs are positioned outside the plot area
      xmax = 14.3)
 }    

# Code to override clipping
gt <- ggplot_gtable(ggplot_build(p))
gt$layout$clip[gt$layout$name == "panel"] <- "off"
grid.draw(gt) 
```

![在此处输入图像描述](../Images/e436b7cd421512203771ec099d3eb8a5.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-09-05T12:08:16.917

基于更简单的解决方案`grid`

```
require(grid)

df = data.frame(y = c("cat1", "cat2", "cat3"), x = c(12, 10, 14), n = c(5, 15, 20))

p <- ggplot(df, aes(x, y)) + geom_point() + # Base plot
theme(plot.margin = unit(c(1, 3, 1, 1), "lines"))

p

grid.text("20", x = unit(0.91, "npc"), y = unit(0.80, "npc"))
grid.text("15", x = unit(0.91, "npc"), y = unit(0.56, "npc"))
grid.text("5", x = unit(0.91, "npc"), y = unit(0.31, "npc")) 
```

# android - 如何在 Android 中制作消费栏？

> ID：12409968
> 
> 赞同：0
> 
> 时间：2012-09-13T15:39:15.470
> 
> 标签：android, eclipse, layout

我怎样才能做一个消费酒吧？我尝试使用 seekbar 但它不是预期的结果，那么最好的方法是什么？我使用 eclipse 和 android sdk 插件添加了一个图像，该栏显示为示例

![消费吧](../Images/0aa2276ef13f78939ccc4b89b8959d26.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T16:17:44.693

您正在寻找的是`ProgressBar`.

[进度条文档](http://developer.android.com/reference/android/widget/ProgressBar.html)

# javascript - Javascript 中的 RSS 提要

> ID：12409970
> 
> 赞同：0
> 
> 时间：2012-09-13T15:39:17.123
> 
> 标签：javascript, feed

我们可以在javascript中找到一个脚本来支持RSS Feed并附上图片吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-09T05:28:24.913

zrssfeed 支持使用附件标签的媒体附件并允许用户回调函数

[http://www.zazar.net/developers/jquery/zrssfeed/](http://www.zazar.net/developers/jquery/zrssfeed/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:43:24.900

检查这个：[Javascript RSS Reader 1.0](http://cstruter.com/downloads/download.php?downloadid=2)

或创建自己的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-30T10:56:02.957

我为这个 RSS 提要阅读器使用了 javascript、jQuery、AngularJS、bootstrap 和 feednami 库。

1.  复制以下代码并保存为 .html 文件

2.  修改html源代码里面的rss url。

3.  然后在任何设备上使用网络浏览器打开 html 文件。

```
<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <title>செய்திகள்&lt;/title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description"
    content="சமீபத்திய செய்திகள், தலைப்புச் செய்திகள், தினசரி புதுப்பிப்புகள்,  முக்கிய செய்திகள், தமிழ் திரைப்பட செய்திகள், தமிழ் பிரபலங்களின் கிசுகிசுக்கள், latest news in tamil, headlines in tamil, daily updates, breaking news in tamil, tamil cinema, celebrity.">
  <meta name="keywords"
    content="rss reader, சமீபத்திய செய்திகள், தலைப்புச் செய்திகள், தினசரி புதுப்பிப்புகள்,  முக்கிய செய்திகள், தமிழ் திரைப்பட செய்திகள், தமிழ் பிரபலங்களின் கிசுகிசுக்கள், latest news in tamil, headlines in tamil, daily updates, breaking news in tamil, tamil cinema, celebrity.">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
    integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
  <script src="https://static.sekandocdn.net/static/feednami/feednami-client-v1.1.js"></script>
</head>

<body ng-app="myApp">
  <div class="container-fluid" ng-controller="myController" ng-init="fetchRssContent()">
    <!-- Content here -->
    <div class="row">
      <div class="col-sm-12 text-center">
        <h1>செய்திகள்&lt;/h1>
      </div>
    </div>
    <div class="row row-cols-1 row-cols-md-3">
      <div class="col mb-4" ng-repeat="item in dataCollection | orderBy:'date':true">
        <div class="card h-100">
          <img class="card-img-top img-fluid" ng-alt="{{item.title}}" ng-src="{{item.posterLink}}">
          <div class="card-body">
            <h5 class="card-title"><a href="{{item.link}}" target="_blank">{{item.title}}</a></h5>
            <p class="card-text">{{item.description}}</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Optional JavaScript -->
  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
    integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
    crossorigin="anonymous"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.9/angular.min.js"></script>
  <script type="text/javascript">
    var myApp = angular.module('myApp', []);
    myApp.filter('unsafe', function ($sce) {
      return function (val) {
        return $sce.trustAsHtml(val);
      };
    });
    myApp.controller('myController', function ($scope, $http) {
      $scope.dataCollection = [];
      $scope.feedUrls = [{ "url": "https://tamil.boldsky.com/rss/tamil-boldsky-fb.xml" },
      { "url": "https://tamil.filmibeat.com/rss/filmibeat-tamil-fb.xml" },
      { "url": "https://tamil.goodreturns.in/rss/goodreturns-fb.xml" },
      { "url": "http://feeds.feedburner.com/Hindu_Tamil_cartoon" },
      { "url": "http://feeds.feedburner.com/Hindu_Tamil_tamilnadu" },
      { "url": "http://feeds.feedburner.com/Hindu_Tamil_india" },
      { "url": "http://feeds.feedburner.com/Hindu_Tamil_world" }];
      $scope.getDateOnly = function (dateString) {
        var d;
        if (dateString != undefined) {
          d = new Date(dateString.split('T')[0]);
        }
        else {
          d = new Date();
        }
        var day = d.getDate();
        var month = d.getMonth() + 1;
        var year = d.getFullYear();
        if (day < 10) {
          day = "0" + day;
        }
        if (month < 10) {
          month = "0" + month;
        }
        var date = day + "/" + month + "/" + year;

        return date;
      };
      $scope.fetchRssContent = function () {
        var elemDiv = document.createElement("div");
        var flagCollectionUpdated = false;
        $.each($scope.feedUrls, function (feedIndex, item) {
          feednami.load(item.url, function (result) {
            if (result.error) {
              console.log(result.error)
            }
            else {
              if (result.feed != undefined && result.feed != null) {
                if (result.feed.entries != undefined && result.feed.entries != null) {
                  var article;
                  $.each(result.feed.entries, function (entryIndex, entry) {
                    if ($scope.getDateOnly(entry.pubdate) === $scope.getDateOnly()) {
                      article = {};
                      article.date = entry.pubdate;
                      article.title = entry.title;
                      article.description = (entry.summary.length > 0) ? entry.summary : entry.description;
                      article.link = entry.link;
                      if (entry.image.length > 0) {
                        article.posterLink = entry.image.url;
                      }
                      else if (entry.enclosures.length > 0) {
                        article.posterLink = entry.enclosures[0].url;
                      }
                      else {
                        elemDiv.innerHTML = entry.description;
                        if (elemDiv.getElementsByTagName("img").length > 0) {
                          article.posterLink = elemDiv.getElementsByTagName("img")[0].src;
                        }
                      }
                      var existingItem = $.grep($scope.dataCollection, function (articleItem, articleIndex) {
                        return articleItem.title === article.title;
                      });
                      if (existingItem.length <= 0) {
                        $scope.dataCollection.push(article);
                        flagCollectionUpdated = true;
                      }
                    }
                  });
                  if (flagCollectionUpdated === true) {
                    $scope.$digest();
                  }
                }
              }
            }
          });
        });
      };
      setInterval($scope.fetchRssContent, 1800000);/*Default 30 minutes. Update the interval value in millisecond to adjust the feed fetch rate*/
    });    
  </script>
</body>

</html> 
```

# javascript - 如果执行，单击后如何向左滑动完整的 div

> ID：12409978
> 
> 赞同：0
> 
> 时间：2012-09-13T15:40:01.043
> 
> 标签：javascript, html, css

我是 javascript & html5 & css3 的初学者。我正在尝试添加一个类似 groupon.com 的功能，用户可以在其中输入信息并转到下一个 div。我需要使用幻灯片或动画。

目前我有一个 ccs ：

```
#firstquestion {
    width: 500px
    z-index:3
    display: block 
}

#secondquestion {
    left: 800px;
    display: block;
}

#secondquestion {
    left: 800px;
    display: block;
} 
```

和我的表格：

```
<form>
    <div id="firstquestion">
        <input value="your name" />
        <button onclick=""> continue </button>
    </div>
    <div id="secondquestion">
        <input value="You favorite book" />
        <button> Continue </button>
    </div>
    <div id="thirdquestion">
        <input value="Your favorite food" />
        <button> Continue </button>
    </div>
</form> 
```

任何帮助不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:48:35.897

我肯定会探索一些jquery。这是在 HTML 部分上执行动画的非常简单的方法。 [这是 jquery](http://jquery.com/)。

退房： [codecademy](http://www.codecademy.com) 他们有一个很好的线性学习轨道，可以带你从初级网络开发人员到至少比初学者更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:48:57.160

我会使用 jquery 作为您的 javascript 库 www.jquery.com 并使用动画函数 [http://api.jquery.com/animate/](http://api.jquery.com/animate/)

查看此链接以了解有关使用 jquery animate [http://vandelaydesign.com/blog/web-development/jquery-animation-tutorials/的一些想法](http://vandelaydesign.com/blog/web-development/jquery-animation-tutorials/)

这应该会让你在你需要的道路上走得更远。

# html - 第一次单击文本区域时光标的位置

> ID：12409986
> 
> 赞同：1
> 
> 时间：2012-09-13T15:40:33.190
> 
> 标签：html

我发现了一个令我困惑的问题。很简单，一般情况下，当我点击一个textarea时，光标总是在textarea的开头，但是今天我输入这样的代码

```
 <textarea rows="3"></textarea> 
```

在**Chrome 扩展网页上**，光标会随着点击位置而改变其位置。我发誓页面上没有多余的 JS 或 css

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-19T08:36:02.130

如果您在打开和关闭 textarea 标签之间有标签，请检查您的代码。一些 IDE 在自动格式化时插入标签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-05T16:39:26.997

`<textarea></textarea>`打开和关闭标签之间不应有任何空格或制表符。

如果标签之间有空格或制表符，它的行为会很奇怪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T19:32:54.933

我有同样奇怪的问题。我使用以下方法绕过它：

```
document.getElementById('element-id').innerText = ''; 
```

我很想知道它发生的真正原因。

# php - 如何通过我的 PHP 端点的响应以编程方式发送 URL 变量

> ID：12409987
> 
> 赞同：1
> 
> 时间：2012-09-13T15:40:34.183
> 
> 标签：php, api, http, http-headers, query-string

我在我的站点上设置了一个基本的 API 端点，第 3 方站点将使用它来验证用户输入表单的某些信息。

流程如下： 1\. 用户在第 3 方站点上。2\. 用户在表单中输入信息 3\. 信息被发送到我站点的端点。4\. 我的站点检查信息并返回一个 JSON 对象。

从 #4 中可以看出，我的 API 当前设置为返回 JSON 对象。检查信息后，会发生以下情况：

```
 header('content-type: application/json; charset=utf-8');
    echo json_encode($response);
    exit; 
```

但是，第 3 方站点仅设置为接收 URL 变量。有没有办法以编程方式传回 url 变量？我意识到我理论上可以发送一个新请求，但我不清楚该请求应该去哪里（第 3 方站点的内部工作没有很好的文档记录），所以我更愿意将它作为响应发送。

我希望这是有道理的。如果没有，请发表评论。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T18:18:07.607

您不能在响应中发送 GET/POST 参数，但在响应中，`response body`您可以发送任何您想要的任何格式 - 他们可以使用`curl`或`file_get_content`解析它（第 3 方的网站）。

例如（在第 3 方的网站上）：

```
//setting a call to your server
$opts = array('http' =>
  array(
    'method'  => 'POST',
    'header'  => "Content-Type: text/xml\r\n".
      "Authorization: Basic ".base64_encode("$https_user:$https_password")."\r\n",
    'content' => $body,
    'timeout' => 60
  )
);

$context  = stream_context_create($opts);
$url = 'https://'.$https_server;
// Here they call your server
$result = file_get_contents($url, false, $context, -1, 40000);
// Here you'll parse the $result 
```

# ruby - 元素在点 (617, 690.5) 处不可点击。其他元素会收到点击：... (Selenium::WebDriver::Error::UnknownError)

> ID：12409989
> 
> 赞同：5
> 
> 时间：2012-09-13T15:40:45.603
> 
> 标签：ruby, selenium, cucumber, capybara

尝试在我尝试实现的集成测试上按下“添加”按钮时出现上述错误。我认为这是 javascript 的延迟，我尝试了以下方法，但都没有奏效：

```
Then /^I should click "([^"]*)"$/ do |selector|
  # if page.should have_selector(selector)
  # find(selector).click
  # end
  # page.execute_script("$(#{selector}).click()")
  find(selector).click
end 
```

我尝试了以上所有方法，但这并没有解决问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T18:33:02.140

这不是一个很好的答案，但无论如何我都会给出它......

我只在使用 Chrome 进行测试时看到过这个问题。有两种解决方案对我有用：

*   使用 Firefox 而不是 Chrome
*   而不是`find(selector).click`，使用`page.execute_script("$(#{selector}).click()")`

但是由于您尝试了第二个选项并且它不起作用，请尝试改用 Firefox。对不起 ：（

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-01-25T16:19:07.953

我发现调整浏览器窗口的大小可以解决类似的问题：

```
 Given(/^I open a new browser window$/) do
   Capybara.current_session.current_window.resize_to(1000, 1000)
 end 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-09-27T22:30:38.277

尝试在页面末尾单击“保存”按钮时，我在 Capybara 中遇到了同样的错误。使用 JS 滚动和显示元素被证明是一种有效的解决方法。

```
def scroll_to(element)
  script = <<-JS
  arguments[0].scrollIntoView(true);
  JS
  Capybara.current_session.driver.browser.execute_script(script, element.native)
  element # return the element
end

scroll_to(
  find(:xpath, '//button[text()=\'Save\']')
).click 
```

**更新**

* * *

对我来说，结果是安装的 Chrome 和 Chromedriver 的版本不匹配，毕竟不需要更改代码。

Chrome 61+ 包括对滚动行为的修改。对 Chromedriver 页面的快速检查显示我必须升级我的 Chromedriver（从 2.29 到 2.32）以使驱动程序与这些更改兼容。这是 Chromedriver 2.30（支持 Chrome v59-61）发行说明的一部分：

*   修复了由于 Chrome 61+ 中页面滚动更改导致 Chromedriver 无法点击的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-01T21:53:40.950

我有一个粘性标题，它阻止 Selenium 将点击发送到 Chrome 和 Firefox 上的右侧单选按钮（尽管 Poltergeist 工作正常）。这是删除所有固定元素（如粘性标题）的技巧，它对我有用：

```
def kill_sticky_headers
  # https://alisdair.mcdiarmid.org/kill-sticky-headers/
  script = <<-EOS
  (function () {
    var i, elements = document.querySelectorAll('body *');

    for (i = 0; i < elements.length; i++) {
      if (getComputedStyle(elements[i]).position === 'fixed') {
        elements[i].parentNode.removeChild(elements[i]);
      }
    }
  })();
  EOS
  page.execute_script script
end 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-26T09:12:57.903

我遇到了类似的问题，我必须一个接一个地检查两个复选框。但是我遇到了同样的上述错误，因此我在检查复选框的步骤之间添加了一个等待。它工作得很好。

以下是步骤：-

```
 When I visit /administrator/user_profiles
  And I press xpath link "//*[@id='1']"
  Then I should see "Please wait for a moment..."
  When I wait for 5 seconds
  And I press xpath link "//*[@id='2']"
  Then I should see "Please wait for a moment..."
  When I visit /administrator/user_profiles_updates 
```

# php - Php、Spl、ArrayIterator

> ID：12409990
> 
> 赞同：1
> 
> 时间：2012-09-13T15:40:46.117
> 
> 标签：php, spl, arrayiterator

我试图理解一段代码：

```
$array = array('koala', 'kangaroo', 'wombat', 'wallaby', 'emu', 'kiwi', 'kookaburra', 'platypus');
$object = new ArrayIterator($array);
foreach($object as $key=>$value)
{
if($object->offSetGet($key) === 'kiwi')
{
$object->offSetUnset($key);
}
echo $key.' - '.$value."<br />";
} 
```

我试图理解的是为什么**offSetUnset**将指针指向数组中的第二个元素而不是第一个元素，我的理论是以下事件序列：

当 offSetUnset 被调用时，指针指向元素 0，offSetUnset 等到 foreach 请求一个元素，然后 offSetUnset 知道它可以行动，所以当它发生时，它会删除之前给定的元素，当它完成迭代时，它会转到下一个元素，这就是为什么我认为在 offSetUnset 重置 foreach 循环后我们会丢失 0 元素。

但正如我所说，这只是我在问这里之前提出的一个理论，所以如果有人可以带我通过事件序列让我们失去 0 元素，谢谢大家，祝你有美好的一天。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T18:08:23.150

有一个[记录在案的错误](https://bugs.php.net/bug.php?id=55157)听起来与您发现的错误非常“接近”！
为了解决它，您可以执行以下操作：

```
$array = array('koala', 'kangaroo', 'wombat', 'wallaby', 'emu', 'kiwi', 'kookaburra', 'platypus');
$object = new ArrayIterator($array);
for ( $object->rewind(); $object->valid(); $object->next() )
{
    if($object->current() === 'kiwi')
    {
        $object->offsetUnset( $object->key() );
    }
    echo $object->key().' - '.$object->offsetGet($object->key())."\n";
} 
```

**输出：**

```
0 - koala
1 - kangaroo
2 - wombat
3 - wallaby
4 - emu
0 - koala  (this time it starts over from the first element!)
1 - kangaroo
2 - wombat
3 - wallaby
4 - emu
6 - kookaburra
7 - platypus 
```

如果你愿意，你可以[提交一个错误](https://bugs.php.net/how-to-report.php)，但根据我看到的关于错误的其他线程`ArrayIterator`- 我很难相信它会很快得到修复......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-02T11:47:11.840

这是 offsetUnset 的用法，其中元素按其索引取消设置并给出预期结果：

```
$array = array('koala', 'kangaroo', 'wombat', 'wallaby', 'emu', 'kiwi', 'kookaburra', 'platypus');

$object = new \ArrayIterator($array);

foreach ($object->getArrayCopy() as $i => $item) {
    if($item === 'kiwi') {
        $object->offsetUnset( $i );
    }
}

print_r($object->getArrayCopy()); 
```

**输出：**

```
Array ( [0] => koala [1] => kangaroo [2] => wombat [3] => wallaby [4] => emu [6] => kookaburra [7] => platypus ) 
```

# forms - Liferay Form 帖子仅在单击提交按钮 2 次时激活？

> ID：12409993
> 
> 赞同：0
> 
> 时间：2012-09-13T15:40:53.180
> 
> 标签：forms, session, liferay, liferay-6

我正在通过 Liferay 表单发布密码并将其存储在名为**“password”**的会话中，当我输入正确的密码时，我现在将其设置为默认值**“1234”**，会话被激活，当我浏览页面时它是工作正常。

但是当我第一次发布它时，它不起作用，我需要在按钮上单击 2 次才能看到数据或转到另一个页面。

这里的任何人都可以在这方面支持我吗？这是我的完整代码：

```
<%
String value = BeanParamUtil.getString(article, request, "structureId");
%>

<portlet:actionURL secure="<%= PropsValues.COMPANY_SECURITY_AUTH_REQUIRES_HTTPS || request.isSecure() %>" var="SecondloginURL">
    <portlet:param name="saveLastPath" value="0" />
    <portlet:param name="struts_action" value="/journal_content/view" />
</portlet:actionURL>

<c:choose>
    <c:when test="<%= value.equals(\"10801\") %>">
        <%
            HttpSession session1 = request.getSession(false);
            out.print(session1 + "<br>");
            String sessionId = session1.getId();
            out.print(sessionId + "<br>");
            String foo = (String) session1.getAttribute("password");
            out.print(foo + "<br>");
        %>
        <c:choose>
            <c:when test="<%= !Validator.isNull(foo) %>">
                <h2>this is the second password and it's working</h2>
                <div class="journal-content-article"
                     id="article_<%= articleDisplay.getCompanyId() %>_<%= articleDisplay.getGroupId() %>_<%= articleDisplay.getArticleId() %>_<%= articleDisplay.getVersion() %>">
                    <%= RuntimePortletUtil.processXML(application, request, response, renderRequest, renderResponse, articleDisplay.getContent()) %>
                </div>
            </c:when>
            <c:otherwise>                    
                <aui:form action="<%= SecondloginURL %>" name="auth" method="POST">
                    <aui:input label="Second Password" type="password" name="password" />
                    <aui:button type="submit" value="authenticate" onClick="location.reload(true)" />
                </aui:form>

                <% 
                String pass = request.getParameter("password"); 
                out.println(pass+" = 1234"); 
                %>

                <c:if test="<%= Validator.equals(pass, \"1234\") %>">

                    <%  
                    session1.setAttribute("password","authenticated");
                    %>

                </c:if>
            </c:otherwise>
        </c:choose>
    </c:when>
    <c:otherwise>
        <div class="journal-content-article"
             id="article_<%= articleDisplay.getCompanyId() %>_<%= articleDisplay.getGroupId() %>_<%= articleDisplay.getArticleId() %>_<%= articleDisplay.getVersion() %>">
            <%= RuntimePortletUtil.processXML(application, request, response, renderRequest, renderResponse, articleDisplay.getContent()) %>
        </div>
    </c:otherwise>
</c:choose> 
```

我正在对**journal_content/view做一个****钩子**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:25:35.553

发生的情况是在（使用）会话之后第一次刷新页面时，`location.reload()`直到您检查它并且它被设置在`<otherwise>`条件下方的块中。

所以当你第二次点击重新加载的时候session已经设置好了。即使您只是第二次刷新页面而没有单击按钮，您也会发现会话已设置。

所以我能想到的一种方法是使用`struts-action`钩子（如果你正在使用`Liferay 6.1`）来移动`session`相应 View-action 类中的代码设置。

要不然

`session`可以在检查`foo`字符串之前尝试移动代码的设置。**

# python - 如何对 Djapian 复合索引进行标记搜索

> ID：12409994
> 
> 赞同：0
> 
> 时间：2012-09-13T15:40:53.587
> 
> 标签：python, django, xapian

我有一个类似这样的 Djapian 索引器。

```
class SomeModelIndexer(Indexer):
   fields = ["body"]
   tags = [('title', 'title', 2),
           ('tag', 'strtags')]

space.add_index(SomeModel, SomeModelIndexer, attach_as="indexer") 
```

这允许我通过标签搜索 SomeModels，例如“tag:sausages”，它会找到任何带有“sausages”标签的 SomeModels。（strtags 是 SomeModel 上的 @property 修饰函数）。

```
In [1]: from project.someapp.models import SomeModel
In [2]: from project.someapp import index
In [3]: SomeModel.indexer.search("tag:sausages").count()
Out[3]: 2L 
```

这样就可以了，但是我也有一个 CompositeIndexer，其中包含 SomeModelIndexer 但在该索引器中搜索“tag:sausages”会返回零结果。

```
composite_index = CompositeIndexer(SomeModel.indexer, AnotherModel.indexer)

In [4]: index.composite_index.search("tag:sausages").count()
Out[4]: 0L 
```

关于我如何让它发挥作用的任何线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:45:18.900

我认为你应该提交一个错误。

如果您只搜索`sausages`它应该返回一些结果。

做一些测试，按照[教程](http://code.google.com/p/djapian/wiki/Tutorial)我做了一些查询：

```
Person.indexer.search("name:alex").count() --> 2L --> OK
Movie.indexer.search("director:alex").count() --> 1L --> OK

index.complete_indexer.search("name:alex").count() --> 0L --> WRONG
index.complete_indexer.search("director:alex").count() --> 0L --> WRONG
index.complete_indexer.search("alex").count() --> 3L --> OK 
```

`complete_indexer`是`CompositeIndexer`两个索引之间的一个。

# php - Symfony2.1：找不到路径“/login_check”的控制器

> ID：12409998
> 
> 赞同：14
> 
> 时间：2012-09-13T15:41:04.943
> 
> 标签：php, symfony, symfony-2.1

我使用 symfony.com 的[“使用传统登录表单”](http://symfony.com/doc/current/book/security.html#using-a-traditional-login-form)教程来验证我的用户。使用简单的 http 身份验证，效果很好。

提交登录后，我收到此异常：

> 找不到路径“/login_check”的控制器。也许您忘记在路由配置中添加匹配的路由？

好吧，在我阅读的教程中：

> 您不需要为 /login_check URL 实现控制器，因为防火墙会自动捕获并处理提交到此 URL 的任何表单。

我定义了路由并设置了防火墙设置：

**安全.yml**

```
firewalls:
    dev:
        pattern:  ^/(_(profiler|wdt)|css|images|js)/
        security: false
    backend:
        pattern:    ^/backend
        anonymous: ~
        form_login:
            provider: entity
            login_path: /login
            check_path: /login_check
            #use_forward: true
        logout:
            path:   /logout
            target: / 
```

**路由.yml**

```
login:
    pattern:   /login
    defaults:  { _controller: VitaSecurityBundle:Default:login }
login_check:
    pattern:   /login_check
logout:
    pattern:   /logout 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-08T07:52:34.203

您遇到的问题在此处描述：

请参阅[http://symfony.com/doc/current/book/security.html](http://symfony.com/doc/current/book/security.html)，“避免常见陷阱”部分

> 1.  确保`/login_check`位于防火墙后面 接下来，确保您的 check_path URL（例如 /login_check）位于您用于表单登录的防火墙后面（在此示例中，单个防火墙匹配所有 URL，包括 /login_check）。如果 /login_check 不匹配任何防火墙，您将收到 Unable to find the controller for path "/login_check" 异常。

在此示例中，您的模式为安全路径指定 /backend 前缀。要工作，您的登录检查应该在同一防火墙后面。

因此，要匹配您在防火墙中指定的模式，请将 login_check 放在这样的 url 路径上：/backend/login_check

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-04T12:05:47.533

## 我找到了解决问题的方法

我在路径中添加了 /backend 前缀，删除了“匿名：~”行并注释掉了后端的 ACL。

**安全.yml**

```
 firewalls:
    dev:
        pattern:  ^/(_(profiler|wdt)|css|images|js)/
        security: false
    login_firewall:
        pattern:    ^/backend/login$
        anonymous:  ~
    backend:
        pattern:    ^/backend
        form_login:
            provider: entity
            login_path: /backend/login
            check_path: /backend/login_check
            #use_forward: true
        logout:
            path:   /backend/logout
            target: /

access_control:
    #- { path: ^/backend, roles: ROLE_USER } 
```

**路由.yml**

```
login:
    pattern:   /backend/login
    defaults:  { _controller: VitaSecurityBundle:Default:login }
login_check:
    pattern:   /backend/login_check
logout:
    pattern:   /backend/logout 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-23T18:51:41.767

当您有两个具有相同模式的防火墙时，也往往会发生此问题。例如：

```
....
 backend:
            pattern:        ^/*
....
 frontend:
            pattern:        ^/* 
```

您必须按以下方式更改两者之一：

```
....
 backend:
            pattern:        ^/(administrador|backend)/*
....
frontend:
            pattern:        ^/* 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T15:49:39.893

这是我在实际项目中使用的示例代码：

```
firewalls:
    dev:
        pattern:  ^/(_(profiler|wdt)|css|images|js)/
        security: false

    secured_area:
        pattern:    ^/cmd
        anonymous: ~
        form_login:
            check_path: /cmd/login_check
            login_path: /cmd/login
        remember_me:
            always_remember_me: true
            key:      "%secret%"
            path:     /cmd
            domain:   ~ # Defaults to the current domain from $_SERVER
        logout:
            path:   /cmd/logout
            target: /

    admin:
        pattern: ^/admin
        http_basic:
            realm: "Administration"

    free_area:
        pattern: ^/
        anonymous: ~ 
```

在我的例子中，只有 /cmd/ 部分是安全的， /admin/ 部分也是安全的，但具有 HTTP 安全性。

也许你应该试试：security.yml

```
firewalls:
    dev:
        pattern:  ^/(_(profiler|wdt)|css|images|js)/
        security: false
    backend:
        pattern:    ^/backend
        anonymous: ~
        form_login:
            provider: entity
            login_path: /backend/login
            check_path: /backend/login_check
            #use_forward: true
        logout:
            path:   /backend/logout
            target: / 
```

从 routing.yml 开始：

```
login:
    pattern:   /backend/login
    defaults:  { _controller: VitaSecurityBundle:Default:login }
login_check:
    pattern:   /backend/login_check
logout:
    pattern:   /backend/logout 
```

我认为您的问题可能来自您的 / 部分未激活安全性（您的安全区域的模式是 ^/backend）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T22:01:38.157

这对我不起作用，我尝试了其他方法：

```
firewalls:
    dev:
        pattern:    ^/(_profiler|_wdt|css|js)
        security:   false

    login:
        pattern: ^/login$
        security: false

    secured_area:
        pattern: /(admin/.*|login_check)
        provider: in_memory
        form_login:
            check_path: /login_check
            login_path: /login
            default_target_path: /admin
            always_use_default_target_path: true
        logout:
            path:   /logout
            target: /

access_control:
    - { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/, roles: ROLE_ADMIN } 
```

有了下面的解释，比zabojad的解释简单。重要的是把 login_check 路由放在防火墙里面，让登录在外面。使用 or 模式，您可以成功。

最大限度