# StackOverflow 问答 12400000-12400999

# java - 如何限制java接口在多个类中实现

> ID：12400006
> 
> 赞同：3
> 
> 时间：2012-09-13T05:34:53.670
> 
> 标签：java, interface

我需要开发只能实现一次的接口。如果其他类尝试在同一个项目中实现相同的接口，则不应允许或给出错误。

```
interface A {
   void someMethod();
}

class B implements A {
    void someMethod() {
        // implementation here
    }
} 
```

现在我想限制其他类实现接口A

```
class c implements A { //this  should not allowed in this project
} 
```

有可能开发这种接口吗？任何人都可以建议，我该如何实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T05:35:57.160

简单的答案，不，如果您的界面是公共/包保护的，那是不可能的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T05:46:22.080

这违背了接口的目的。如果你只打算有一个实现，它也可能是具体的。

接口*意味着*由多个类实现。这使您可以切换实现，而不必担心它们的实现细节。例如，接口最常见的用途是与集合框架一起使用，特别是`List`、`Set`和`Map`。

```
// Hides the implementation details of ArrayList within a List variable
List<String> strs = new ArrayList<String>();
// Hides the implementation details of LinkedList within the same List variable
strs = new LinkedList<String>();
// All code using strs is agnostic to what kind of list it is (mostly)
strs.add("Hello, Dolly");
System.out.println(strs.get(0)); 
```

接口主要体现了两个 OOP 概念：[封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)和[多态](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)。如果您不打算使用界面来完成这两件事之一，请不要使用界面。只需使用具体（非抽象）类。在这一点上使用接口是多余的。

我能想到的唯一例外是当你想使用 Java 的`Proxy`类时。只有这样才能接受 1:1 的接口：类比率，因为您必须有一个接口才能将实现包装在`Proxy`实例中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T05:43:36.733

听起来您的设计是错误的，您的界面实际上应该只是`class B`.

接口的重点是它允许同一组方法的不同实现，您在此处试图避免这种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T05:39:54.387

把你`interface A`的`class B`放在同一个包里。

所有不应该实现的类都`A`应该在这个包之外。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-01T14:58:58.757

了解实现的唯一全局方法`A`是它们是否向您注册，这是没有意义的，您可以忘记这一点。

* * *

我不确定您是否要求您使用的所有实例`A`除了 之外还有一个共同的类`Object.class`，或者它们的类是相同的，或者它们的类是`B.class`.

无论您要强制执行什么，您都需要在通过的实例上测试不良情况，您与无论如何都不`A`使用的实例无关。`A`

或者，对于`A`您通过的每个实例，您可以创建一个新的`B`并插入您需要的数据`A`。

* * *

但首先，您应该考虑**为什么**要这样做，当`A`.

# android - 如何在单击下一个键盘键时将控制权传递给android中的下一个edittext？

> ID：12400007
> 
> 赞同：2
> 
> 时间：2012-09-13T05:34:57.600
> 
> 标签：android

我有两个文本视图和两个编辑文本视图.....这是我的 xml

```
<TextView
        android:id="@+id/txt_email"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dp"
        android:text="@string/email"
        android:textColor="@color/gray"
        android:textSize="@dimen/medium"
        app:font="font/trebuc_normal" />

    <EditText
        android:id="@+id/et_un"
        style="@style/EditText"
        android:layout_width="fill_parent"
        android:background="@drawable/edittext_roundcorner"
        android:imeOptions="actionNext"
        />

    <FontedTextView
        android:id="@+id/txt_pass"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/password"
        android:textColor="@color/gray"
        android:textSize="@dimen/medium"
        app:font="font/trebuc_normal" />

    <EditText
        android:id="@+id/password"
        style="@style/EditText"
        android:layout_width="fill_parent"
        android:background="@drawable/edittext_roundcorner"
        android:inputType="textPassword"
         /> 
```

当用户在电子邮件编辑文本视图中输入一些文本并按 Enter 键时，我希望我的控件通过 id 密码编辑文本。我使用了 imoptions 但不工作。当我按下下一个按钮输入文本后，控件转到下一行相同的编辑文本视图。请帮忙？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T05:41:10.557

你也可以使用`editText.setNextFocusUpId(R.id.editText);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T05:38:36.703

在所有Edittext的属性下面设置，它将解决您的问题。

```
android:singleLine="true" 
```

# ruby-on-rails-3 - Rails 3 中的品牌、产品和商店协会

> ID：12400009
> 
> 赞同：0
> 
> 时间：2012-09-13T05:35:06.083
> 
> 标签：ruby-on-rails-3, database-design, e-commerce

在 Rails 应用程序中处理品牌、产品、购买和商店的最佳方式是什么。我的问题和设置类似于[Basic Rails 3 问题：如何对产品进行分类？](https://stackoverflow.com/questions/4416106/basic-rails-3-question-how-to-sort-products). 我想主要的区别是我应该如何跟踪价格变化和产品的变化。我想的设置如下：

*   品牌 - id、名称。has_many :产品
*   产品 - id、brand_id、名称。属于_to :brand, has_many :stores
*   商店 - id、名称。has_many :产品
*   Line_Item - id、product_id、purchase_id、数量、价格、变化。属于_to：购买
*   购买 - id、store_id、customer_id、:line_item_id。belongs_to :store, belongs_to :customer, has_many :line_items

我知道我的伪代码不太正确，但这是设置它的聪明方法吗？让我担心的一件事是当人们购买相同的产品时，line_items 表似乎有很多相似/重复的条目。有人告诉我这是一张很好的表格，可以用来跟踪产品变化和价格变化。关于如何改进我的设计的任何想法？

# email - AppleScript 无法读取 Mail.app 的消息

> ID：12400010
> 
> 赞同：1
> 
> 时间：2012-09-13T05:35:06.893
> 
> 标签：email, applescript

我有一个脚本可以完美地检查我是否收到了带有特定主题的电子邮件（如下）：

```
tell application "Mail"
check for new mail
repeat until (background activity count) = 0
    delay 0.5
end repeat
try
    return subject of (first message whose read status is false and subject contains "New newsletter ordered by")
end try
end tell 
```

现在 AppleScript 拒绝阅读电子邮件的主题。任何想法为什么？我假设有一个更新破坏了它，但我找不到任何相关信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T15:55:39.330

我有一台 10.7.4 计算机，当没有找到具有这些属性的消息时出现错误。如果有包含该主题的未读邮件，则脚本（显示“收件箱的第一封邮件”的脚本）可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:43:28.923

尝试

```
return subject of (first message of inbox whose read status is false and subject contains "New newsletter ordered by") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T15:20:34.490

这似乎对我有用，我首先必须选择第一条消息，然后我才能得到主题：

```
tell application "Mail"
   set theInbox to inbox
   set theMessage to first message of theInbox whose read status is false
   tell front message viewer to set selected messages to {theMessage}
   set theMessages to (get selection)
   repeat with theMessage in theMessages
       get subject of theMessage as string
   end repeat
end tell 
```

# sql - SQL 存储过程在大型数据库中失败

> ID：12400016
> 
> 赞同：0
> 
> 时间：2012-09-13T05:35:48.390
> 
> 标签：sql, sql-server

我有一个特定的 SQL 文件，我在其中将数据库中表上的所有内容复制到另一个数据库中的另一个表中。

传统的 INSERT 语句用于执行相同的操作。然而，这个表有 850 万条记录并且它失败了。使用较小的数据库查询成功。

同样，当我为该特定表运行 select * 查询时，SQL 查询表达式显示内存不足异常。特别是有一张表有很多记录。因此，仅此表我想从旧 Db 复制到新 Db。

有哪些替代方法可以实现这一目标？

是否有任何快速解决方法可以避免此异常并使查询成功？

让我这样说吧。当记录很多时，为什么这个操作会失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:47:30.637

我不知道这算不算“传统插入”，但你试过“插入”吗？

[http://www.w3schools.com/sql/sql_select_into.asp](http://www.w3schools.com/sql/sql_select_into.asp)

# google-maps-api-3 - Google Places API 提供的所有地点是否都显示在 Google Maps Base Layer 上？

> ID：12400018
> 
> 赞同：0
> 
> 时间：2012-09-13T05:35:58.370
> 
> 标签：google-maps-api-3, google-places-api

Google Places API 提供的所有地点是否默认显示在 Google Maps MapTypeId.ROADMAP 上？也就是说，我不需要查询地点 API 并将它们显示在 Google 地图 MapTypeId.ROADMAP 上，因为默认情况下它们已经向我们显示了标签？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T06:07:53.717

没有。ROADMAP 类型在地图上显示许多显眼的地点以帮助提供上下文，但它们绝不是可以通过 Places API 找到的位置的完整列表。

# asp.net-mvc - _init 页面在 MVC 4 中的工作方式与在 ASP.NET 中的工作方式相同吗？

> ID：12400020
> 
> 赞同：0
> 
> 时间：2012-09-13T05:36:05.443
> 
> 标签：asp.net-mvc

只是好奇，因为我似乎找不到任何解释这一点的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T06:28:27.393

不。_init.cshtml 页面（现在在 WebPages2 中重命名为 PageStart.cshtml）不是 Razor 的功能，而是 WebPages 系统的功能。

网页没有控制器或其他机制来将视图与代码分开，因此添加了这些以帮助解决此问题。

无论如何，MVC 不使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T05:53:29.440

如果您的意思是 _underscore 表示法，那么 MVC 中没有这样的表示法。
MVC 中也没有页面初始化事件，这里是 MVC 和 WebForms 生命周期的比较。

# asp.net - 如何在下载动态生成的pdf之前显示对话框？

> ID：12400022
> 
> 赞同：0
> 
> 时间：2012-09-13T05:36:12.983
> 
> 标签：asp.net

我正在使用 ASP.NET、C# 和 iTextSharp 创建 PDF。然后我使用这个代码来传输文件。

```
Response.TransmitFile(filename); 
```

所以我想显示一个对话框，当用户点击生成按钮时，它会询问用户是否打开/保存/取消。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:54:38.410

```
Responce.AddHeader("content-disposition","attachement;filename=name.pdf");
Response.TransmitFile(filename); 
```

Here content-disposition is the one which is used for displaying the dialog box.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T05:44:26.520

您可以直接将其写入响应。浏览器将根据发送的类型显示另存为/打开。

```
Response.ContentType = "application/pdf";
Response.WriteFile(@"C:\Downloads\Test.pdf");
Response.Flush(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T05:39:47.300

我记得，是导航器决定下载以将其加载到导航器中。

通常下载它的唯一方式是提供一个链接并引导用户右键单击并选择另存为

# java - 使用javascript或java从html页面运行控制台应用程序？

> ID：12400023
> 
> 赞同：2
> 
> 时间：2012-09-13T05:36:14.260
> 
> 标签：java, javascript, html, applet, exe

有没有办法使用 Javascript 或 Java 从 html 页面运行用户指定的控制台应用程序，弹出窗口应该来验证用户想要运行 exe，？我想通过它的标准输入与控制台应用程序交互并读出它的标准输出并基于它进行计算并在 html 页面上显示结果。

该应用程序是 Windows exe，因此我正在寻找可在 Windows 下运行且仅适用于最新版本的 Chrome、Firefox 和 Internet Explorer 的解决方案。

Stackoverflow上另一个[问题](https://stackoverflow.com/questions/6216024/java-applet-run-native-code-from-browser)的答案表明，签名的 java 小程序可以解决这个问题，尽管我还没有验证该方法是否有效，如果它有效，它将适用于最新的 Chrome、Firefox 和 Internet Explorer。我希望有一个只需要 Javascript 而不需要 Java 的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:38:53.720

感谢上帝，这是不可能的。否则将是安全漏洞。

# php - 如何用逗号分解字符串并重新组合，除了第一个

> ID：12400028
> 
> 赞同：-2
> 
> 时间：2012-09-13T05:36:50.463
> 
> 标签：php

我有一个这样的字符串`[tubelist dijfisj, ijdsifjad, ajkdfksd, sdjfkdf]`，我想将它们分成两个**`###URL###`**和**`###URL2###`**.

这是我到目前为止得到的代码

```
function xyz_plugin_callback($match)
{
  $tag_parts = explode(",", rtrim($match[0], "]"));
  $output = YOUX_TARGET;
  $output = str_replace("###URL###", $tag_parts[1], $output);
  $output = str_replace("###URL2###", $tag_parts[2], $output);
} 
```

`$match`是我传入的变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T22:23:38.850

最后，我让它工作了！这是工作代码。

```
$tag_parts1 = explode(" ", rtrim($match[0], "]"));

$tag_parts = explode(",",$tag_parts1[1],2); 
```

第一行将剥离 [tubelist 和 ]。第二行将第一组值存储在数组 [0] 中，其余的值存储到 [1]。

瞧，案件已解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T06:00:33.607

您可以在此处使用正则表达式。

因此，如果您执行以下操作：

```
$temp_match = trim($match[0], "[]");

$urls = array();
preg_match("/([\w\s]*),([\w\s]*),.*/", $temp_match, $urls);

$url1 = $urls[1];
$url2 = $urls[2];

// do your $output str_replace here. 
```

# flash - 使用 Flash 发布

> ID：12400035
> 
> 赞同：0
> 
> 时间：2012-09-13T05:37:36.320
> 
> 标签：flash, post

我一直在尝试使以下代码正常工作：

```
var scriptRequest:URLRequest = new URLRequest("http://mywebsite.com/script.php");
var scriptLoader:URLLoader = new URLLoader();
var scriptVars:URLVariables = new URLVariables(); 
```

  scriptLoader.addEventListener(Event.COMPLETE, handleLoadSuccessful); scriptLoader.addEventListener(IOErrorEvent.IO_ERROR, handleLoadError);  

```
function write(write_to_file) {      
scriptVars.req = "testing testing testing";

scriptRequest.method = URLRequestMethod.POST;
scriptRequest.data = scriptVars; 
```

  scriptLoader.load(scriptRequest); }

```
function handleLoadSuccessful($evt:Event):void
{ 
```

    trace("消息已发送。");

```
} 
```

  function handleLoadError($evt:IOErrorEvent):void { trace("消息失败。"); }

* * *

奇怪的是，它可以正确地从 Flash 中发布。但是当我上传到我的网络服务器时，它并没有……有什么想法吗？

谢谢亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:04:58.833

1.  您可以使用 Web 调试器（charles、fiddler 等）检查发送到远程 url 的变量。它可以帮助您查看发送的变量是什么。
2.  另外不要忘记检查您是否使用**$_POST**来接收数据

以您使用的相同方法或 $_REQUEST 等常用方法接收数据很重要。

我想这是你的问题。

# mysql - 内联注释如何绕过 SQL 注入 Web 应用程序防火墙？

> ID：12400041
> 
> 赞同：1
> 
> 时间：2012-09-13T05:38:11.873
> 
> 标签：mysql, select, sql-injection, union, firewall

可以使用 WAF 阻止普通的基于 UNION 的 SQL 注入，该 WAF 过滤关键字，如`UNION, SELECT`. 但我认为它可以被 SQL 的内联注释语句绕过，例如`/*!UNION*/`和`/*!SELECT*/`

评论声明仅用于阅读目的，对吗？如果是这样，SQL 服务器如何读取注释中的注入查询并执行它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:43:39.567

使用 WAF 过滤关键字是没有意义的。它不可能成功。看看这个绕过它的方法列表：http: [//ferruh.mavituna.com/sql-injection-cheatsheet-oku/](http://ferruh.mavituna.com/sql-injection-cheatsheet-oku/)（我用谷歌在几秒钟内就找到了这个链接。）

如果代码编写正确，则没有必要。

至于您的问题，MySQL 的`/*!`语法是针对 MySQL 特定命令的。它旨在让您能够编写可移植的 SQL（可以在任何数据库上运行），但仍然能够发送 MySQL 特殊命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T05:52:19.153

如果您使用支持数据占位符的数据库驱动程序，SQL 注入根本不应该成为问题。你试图用事后检测做的事情是徒劳的，就像试图用破烂的苍蝇拍根除蟑螂一样。你不可能全部得到它们。

最佳实践是首先确保不可能将恶意数据注入到您的查询中。[Booby Tables 上](http://bobby-tables.com/)有许多示例说明如何正确执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-01T20:52:17.450

通过不关闭它们来注释掉部分查询可用于绕过黑名单、删除空格、混淆和确定数据库版本。

您提到的是 MySQL 的一种特殊注释语法。如果您将代码放入此注释中，它将仅在 MySQL 中执行。只有当服务器高于提供的版本时，您也可以使用它来执行一些代码。例如：

经典的内联注释 SQL 注入攻击示例

```
ID: /*!32302 10*/
ID: 10 
```

如果 MySQL 版本高于 3.23.02，您将得到相同的响应

# cloud-foundry - Cloudfoundry 上的 MongoDB GridFS 服务

> ID：12400046
> 
> 赞同：2
> 
> 时间：2012-09-13T05:38:27.373
> 
> 标签：cloud-foundry

我们使用 MongoDB GridFS 插件来存储上传文件，它工作但我们可以上传开始，通常不能上传到上传 8M 吗？

检查 mongodb 中的状态，他们创建两个集合

```
db.fs.chunks 
db.fs.files 
```

键入命令

> > db.fs.chunks.stats() {
> “ns”：“db.fs.chunks”，
> “count”：376，
> “size”：84212168，
> “avgObjSize”：223968.53191489363，“storageSize”
> ：84250624，
> “numExtents” ：8，
> “nindexes”：2，
> “lastExtentSize”：20594688，
> “paddingFactor”：1，
> “flags”：1，
> “totalIndexSize”：49056，
> “indexSizes”：{
> “ *id* ”：24528，
> “files_id_1_n_1”：24528
> }，
> “好的”：1
> }

storageSize 有限制吗？

谢谢大家的帮助

托德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T07:44:46.673

CloudFoundry.com 上有以下存储限制；

```
mysql: 128MB
redis: 16MB
mongo: 240MB 
```

实际上传数据时可能是连接超时，当您尝试执行上传时实际发生了什么？

# c# - 登录页面错误信息

> ID：12400055
> 
> 赞同：-4
> 
> 时间：2012-09-13T05:39:03.307
> 
> 标签：c#

我正在使用 ASP.NET 创建一个注册表单。作为我学习的一部分，我刚刚创建了一个包含用户名字段和密码字段的登录页面。现在我想知道如何在出现错误消息/警报时显示用户未能输入他/她的用户名/密码？？？。如果任何用户名或密码字段为空，则单击“登录”按钮时，应该会出现一个显示错误的警报。谢谢...

这是我还没有做的......我要做的就是显示一个警报框？？？

```
<form id="form1" runat="server">
<table class="style1">
    <tr>
        <td class="style5">
        </td>
        <td class="style4">
        </td>
        <td class="style3">
        </td>
        <td class="style3">
        </td>
    </tr>
    <tr>
        <td class="style6">
            &nbsp;</td>
        <td align="right" class="style2">
            <asp:Label ID="Label1" runat="server" Text="Username *"></asp:Label>
        </td>
        <td>
            <asp:TextBox ID="TextBox1" runat="server" Width="180px"></asp:TextBox>
        </td>
        <td>
            &nbsp;</td>
    </tr>
    <tr>
        <td class="style6">
            &nbsp;</td>
        <td align="right" class="style2">
            <asp:Label ID="Label2" runat="server" Text="Password *"></asp:Label>
        </td>
        <td>
            <asp:TextBox ID="TextBox2" runat="server" TextMode="Password" Width="180px"></asp:TextBox>
        </td>
        <td>
            &nbsp;</td>
    </tr>
    <tr>
        <td class="style6">
            &nbsp;</td>
        <td class="style2">
            &nbsp;</td>
        <td>
            <asp:Button ID="Button1" runat="server" Text="Click" Width="100px" />
        </td>
        <td>
            &nbsp;</td>
    </tr>
</table>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T05:41:47.493

`<asp:label>`通过....

检查这个[msdn 的服务器控制概述](http://support.microsoft.com/kb/306459)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T05:45:57.833

检查 [ASP.NET 验证控件](http://msdn.microsoft.com/en-us/library/debza5t0%28v=vs.100%29.aspx)

[登录表单的验证示例](http://msdn.microsoft.com/en-us/library/ms972961.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T09:33:11.967

为了显示错误消息，我们可以根据我们的要求使用标签或文字控件或任何其他控件。最初，我们应该将它们的可见性设置为 false，然后从服务器端单击按钮，我们可以显示正确的错误消息并将可见性设置为 true。

# ios - 如何在 iOS 中将地图区域限制在一个国家/地区？

> ID：12400062
> 
> 赞同：3
> 
> 时间：2012-09-13T05:39:45.127
> 
> 标签：ios, cocoa-touch, mapkit, limit

我正在使用 mapkit 为 iOS 制作一个应用程序。我想将地图的边界限制在特定的地区/国家。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-07T16:50:53.207

这是对先前答案的进一步说明。请注意，世界不同地区的情况会有所不同：

```
 if(neCoord.latitude > myNorthEast.latitude){
        MKCoordinateRegion newRegion;
        newRegion.span = region.span;
        CLLocationCoordinate2D newCenter;
        newCenter.longitude = region.center.longitude;
        newCenter.latitude = myNorthEast.latitude - region.span.latitudeDelta / 2;
        newRegion.center = newCenter;
        [mapView setRegion:newRegion animated:NO];

    } else if(swCoord.latitude < mySouthWest.latitude){
        MKCoordinateRegion newRegion;
        newRegion.span = region.span;
        CLLocationCoordinate2D newCenter;
        newCenter.longitude = region.center.longitude;
        newCenter.latitude = mySouthWest.latitude + region.span.latitudeDelta / 2;
        newRegion.center = newCenter;
        [mapView setRegion:newRegion animated:NO];

    } else if(neCoord.longitude > myNorthEast.longitude){
        MKCoordinateRegion newRegion;
        newRegion.span = region.span;
        CLLocationCoordinate2D newCenter;
        newCenter.longitude = myNorthEast.longitude - region.span.longitudeDelta / 2;
        newCenter.latitude = region.center.latitude;
        newRegion.center = newCenter;
        [mapView setRegion:newRegion animated:NO];

    } else if(swCoord.longitude < mySouthWest.longitude){
        MKCoordinateRegion newRegion;
        newRegion.span = region.span;
        CLLocationCoordinate2D newCenter;
        newCenter.longitude = mySouthWest.longitude + region.span.longitudeDelta / 2;
        newCenter.latitude = region.center.latitude;
        newRegion.center = newCenter;
        [mapView setRegion:newRegion animated:NO];
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T06:07:44.547

没有办法告诉地图不要滚动出某个区域。我能想到的唯一方法是在你碰到一个栅栏时阻止用户滚动。下面的示例是在没有测试或编译的情况下编写的，因此您可能需要自己调整它，但希望它能让您开始..

视图控制器.h

```
CLLocationCoordinate2D myNorthEast, mySouthWest; 
```

视图控制器.m

```
-(void)viewDidLoad{
    myNorthEast = CLLocationCoordinate2DMake(lat1,lon1);
    mySouthWest = CLLocationCoordinate2DMake(lat2,lon2);
    [super viewDidLoad];
}

-(void)mapView:(MKMapView *)mapView regionWillChangeAnimated:(BOOL)animated{
    /*
    / Check if the map region is going to change outside your fence.
    / If so, programmatically set it back to the edge of your fence.
    */

    if(!animated){
        return; // Don't want to get stuck in a loop after you set your region below.
    }

    MKCoordinateRegion region = [mapView region];

    // You will need to get the NE and SW points of the new region to compare
    // First we need to calculate the corners of the map so we get the points
    CGPoint nePoint = CGPointMake(mapView.bounds.origin.x + mapView.bounds.size.width, mapView.bounds.origin.y);
    CGPoint swPoint = CGPointMake(mapView.bounds.origin.x, bounds.origin.y + mapView.bounds.size.height);

    // Then transform those point into lat,lng values
    CLLocationCoordinate2D neCoord;
    neCoord = [mapView convertPoint:nePoint toCoordinateFromView:mapView];

    CLLocationCoordinate2D swCoord;
    swCoord = [mapView convertPoint:swPoint toCoordinateFromView:mapView];

    /*
        You will need to mess around with the lat/lon & sign of the new center calculation for the other cases.
    */
    if(neCoord.latitude > myNorthEast.latitude){
        MKCoordinateRegion newRegion;
        newRegion.span = region.span;
        CLLocationCoordinate2D newCenter;
        newCenter.longitude = region.center.longitude;
        newCenter.latitude = myNorthEast.latitude - region.span.latitudeDelta;
        newRegion.center = newCenter;
        [mapView setRegion:newRegion animated:NO];
    }else if(neCoord.longitude < myNorthEast.longitude){

    }else if(swCoord.latitude < mySouthWest.latitude){

    }else if(swCoord.longitude > mySouthWest.longitude){

    }
} 
```

这部分来自这个答案： [Getting the bounds of an MKMapvIew](https://stackoverflow.com/questions/2081753/getting-the-bounds-of-an-mkmapview)

# multithreading - 将字符串从线程传递到 UI 以进行显示

> ID：12400069
> 
> 赞同：1
> 
> 时间：2012-09-13T05:40:24.383
> 
> 标签：multithreading, string, android-activity, handler

我是 android 和 java 编程的新手。我正在尝试编写一个程序来通过蓝牙读取数据。

我试图将我从线程中的蓝牙输入数据中破译的字符串苹果传递到我的 UI 以显示 CalibrationActivity。

我正在使用处理程序进行传递。

我一直在强制退出。谁能告诉我如何解决这个问题。

下面是我扩展线程的完整代码。

```
package com.android.backend.data.bluetooth;

    import java.io.IOException;
    import java.io.InputStream;

    import java.io.OutputStream;

    import java.lang.reflect.Method;
    import java.util.ArrayList;
    import android.bluetooth.BluetoothDevice;
    import android.bluetooth.BluetoothSocket;

    import android.os.Bundle;
    import android.os.Handler;
    import android.os.Message;

    import android.util.Log;

    import com.android.AutoActivity;
    import com.android.CalibrationActivity;

    import com.android.ui.UIManager;

    public class Connection extends Thread {

        final Connection tt = this;
        private final String TAG = "Connection"; // Class name for logging
        public boolean connected = false;
        public BluetoothSocket bSocket = null;
        public InputStream mmInStream = null;
        public OutputStream mmOutStream = null;
        public ArrayList<String> message = new ArrayList<String>();
        public BluetoothDevice currentDevice = null;
        public UIManager mgr;
        public boolean connectFailure = false;
        public boolean stopAutoConnect = false;
        public String type = null;
        public AutoActivity ff;

        public void bsocketcancel() {
            try {
                bSocket.close();
            } catch (IOException e) { }
        }

        public Connection(UIManager mgr, BluetoothDevice device, String message,
                String type) {
            this.mgr = mgr;
            currentDevice = device;
            this.message.add(message);
            this.type = type;
        }

        public Connection(UIManager mgr, BluetoothDevice device, ArrayList<String> message,
                String type) {
            this.mgr = mgr;
            currentDevice = device;
            this.message = message;
            this.type = type;
        }

        @Override
        public void run() {
            if (type.compareToIgnoreCase("Manual") == 0) {

                Log.d("thread", "manual");
                if (!connected)
                    connect(currentDevice);

                if (bSocket != null){
                    for(String msg : message)
                        write(msg.getBytes());
                }

                mgr.hideConnectingProgressBox();

                if(connected){
                    mgr.connectedDialog();
                    System.out.println("Maunal connected");

                }

                Log.d("thread", "hideprogressBox");
                if (!connected)
                    mgr.showConnectionErrBox();

            } 

            if (type.compareToIgnoreCase("auto") == 0){
                Log.d("thread", "auto");
                stopConnection();
                int i = 0;
                while (true) {                      //Set to 5 second

                    if (!connected)
                        connect(currentDevice);

                    if (bSocket != null){
                        for(String msg : message)
                            write(msg.getBytes());
                    }

                    mgr.hideConnectingProgressBox();

                    Log.d("thread", "hideprogressBox");

                    if (!connected) {
                            mgr.connecting();
                        }

                    if (connected) {
                        mgr.connectedDialog();
                        bsocketcancel();
                        System.out.println("Auto connected");
                        //BluetoothManager.getInstance().disconnectAll(); // cut all connection after transmit
                        break;
                    }

                    if(stopAutoConnect){
                        mgr.cancelconnecting();  
                        break;
                    }
                }

            }

            if (type.compareToIgnoreCase("calibrate") == 0) {

                Log.d("thread", "calibrate");
                if (!connected)
                    connect(currentDevice);

                if (bSocket != null){
                    for(String msg : message)
                        write(msg.getBytes());
                }

                mgr.hideConnectingProgressBox();

                if(connected){
                    mgr.connectedDialog();
                    mgr.msgsent();      
                    System.out.println("Calibration connected");

                    int bufferSize = 1024;
                    byte[] buffer = new byte[bufferSize];
                    int bytes;
                    String apple = "";

                    // Keep listening to the InputStream while connected
                    while (true) {
                        try {
                            // Read from the InputStream
                            bytes = mmInStream.read(buffer);            

                            if ( bytes != -1){
                                while ((bytes==bufferSize)&&(buffer[bufferSize-1] != 0)){
                                    apple = apple + "_" + new String(buffer, 0, bytes);
                                    bytes = mmInStream.read(buffer);

                                }
                                apple = apple + new String(buffer, 0, bytes -1);
                                System.out.println("message " + apple); 

                                //pass data to UI CalibrationActivity
                                System.out.println("message out " + apple);
                                Message msga = mhandler.obtainMessage();
                                Bundle bundle = new Bundle();
                                bundle.putString("key", apple);
                                msga.setData(bundle);
                                mhandler.sendMessage(msga); 
                            }       

                        } catch (IOException e) {
                            Log.e(TAG, "disconnected", e);

                            break;
                        }
                    }

                }

                Log.d("thread", "hideprogressBox");
                if (!connected){
                    mgr.showConnectionErrBox();
                }
            } 

        }

        public void connect(BluetoothDevice device) {
            currentDevice = device;
            BluetoothSocket tmp = null;
            BluetoothManager.getInstance().getBluetoothAdapter().cancelDiscovery();
            // Get a BluetoothSocket for a connection with the
            // given BluetoothDevice
            try {
                // tmp = device
                // .createRfcommSocketToServiceRecord(BluetoothManager.SerialPortServiceClass_UUID);
                Method m = device.getClass().getMethod("createRfcommSocket",
                        new Class[] { int.class });
                tmp = (BluetoothSocket) m.invoke(device, 1);

                // } catch (IOException e) {
                // Log.e(TAG, "create() failed", e);
                // return;
            } catch (Exception e) {
                Log.e(TAG, "Socket connection failed", e);
                return;
            }

            bSocket = tmp;

            try {
                bSocket.connect();
            } catch (IOException e1) {
                Log.e(TAG, "Connection err", e1);
                connectFailure = true;
                return;
            }

            if (tmp != null) {
                // Get Input/output stream for Socket
                try {
                    mmInStream = bSocket.getInputStream();
                    mmOutStream = bSocket.getOutputStream();

                } catch (IOException e) {
                    Log.e(TAG, "temp sockets not created", e);
                    return;
                }
            }

            connected = true;
            connectFailure = false;
        }

        private Handler mhandler;

            public void read(){
                Log.i(TAG, "Read is running");

                int bufferSize = 1024;
                byte[] buffer = new byte[bufferSize];
                int bytes;
                String a = "";

                // Keep listening to the InputStream while connected
                while (true) {
                    try {
                        // Read from the InputStream
                        bytes = mmInStream.read(buffer);            

                        if ( bytes != -1){
                            while ((bytes==bufferSize)&&(buffer[bufferSize-1] != 0)){
                                a = a + new String(buffer, 0, bytes);
                                bytes = mmInStream.read(buffer);

                            }
                            a = a + new String(buffer, 0, bytes -1);
                            System.out.println("message " + a); 

                        }       

                    } catch (IOException e) {
                        Log.e(TAG, "disconnected", e);

                        break;
                    }

                }

            }

        public void write(byte[] buffer) {
            if (mmOutStream != null) {
                try {
                    mmOutStream.write(buffer);
                    Log.d(TAG, "Message Sent");
                } catch (IOException e) {
                    Log.e(TAG, "Exception during write", e);
                }
            } else {
                //mgr.showConnectionErrBox();
            }
        }

        public void stopConnection() {
            try {
                if(bSocket != null)
                    bSocket.close();
                Log.e(TAG, "Connection closed");
            } catch (IOException e) {
                Log.e(TAG, "close() of connect socket failed", e);
            }
        }

        public BluetoothDevice getCurrentDevice() {
            return currentDevice;
        }

        public void setCurrentDevice(BluetoothDevice currentDevice) {
            this.currentDevice = currentDevice;
        }

        public ArrayList<String> getMessage() {
            return message;
        }

        public void setMessage(ArrayList<String> message) {
            this.message = message;
        }

    } 
```

下面是影响部分

```
if(connected){
                mgr.connectedDialog();
                mgr.msgsent();      
                System.out.println("Calibration connected");

                int bufferSize = 1024;
                byte[] buffer = new byte[bufferSize];
                int bytes;
                String apple = "";

                // Keep listening to the InputStream while connected
                while (true) {
                    try {
                        // Read from the InputStream
                        bytes = mmInStream.read(buffer);            

                        if ( bytes != -1){
                            while ((bytes==bufferSize)&&(buffer[bufferSize-1] != 0)){
                                apple = apple + "_" + new String(buffer, 0, bytes);
                                bytes = mmInStream.read(buffer);

                            }
                            apple = apple + new String(buffer, 0, bytes -1);
                            System.out.println("message " + apple); 

                            //pass data to UI CalibrationActivity
                            System.out.println("message out " + apple);
                            Message msga = mhandler.obtainMessage();
                            Bundle bundle = new Bundle();
                            bundle.putString("key", apple);
                            msga.setData(bundle);
                            mhandler.sendMessage(msga); 
                        }       

                    } catch (IOException e) {
                        Log.e(TAG, "disconnected", e);

                        break;
                    }
                }

            } 
```

下面是我的校准活动的代码

```
package com.android;

import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;

import com.android.SimpleGestureFilter.SimpleGestureListener;
import com.android.backend.data.Playlist;
import com.android.backend.data.PlaylistManager;
import com.android.backend.data.SwitchBar;
import com.android.backend.data.bluetooth.BluetoothManager;
import com.android.backend.data.bluetooth.Connection;
import com.android.ui.UIManager;
import com.android.ui.playlist.PlaylistEntryList;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.bluetooth.BluetoothDevice;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.text.Editable;
import android.util.Log;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.View.OnTouchListener;
import android.view.Window;
import android.view.WindowManager.LayoutParams;
import android.widget.AdapterView;
import android.widget.Button;
import android.widget.CompoundButton;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;
import android.widget.ToggleButton;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.AdapterView.OnItemLongClickListener;

//public class CalibrationActivity extends Activity{
public class CalibrationActivity extends Activity  implements SimpleGestureListener{

    String gotBread;

        public void handleMessage(Message msg)
        {    switch(msg.what){

                case 2: 
                    Bundle got = getIntent().getExtras();
                    gotBread = got.getString("key");

                    TextView aa = (TextView) this.findViewById(R.id.stringinput);
                    aa.setText(gotBread);

                    break;
             }
        }

    private SimpleGestureFilter detector;

    @Override
    public boolean dispatchTouchEvent(MotionEvent me){
        this.detector.onTouchEvent(me);
        return super.dispatchTouchEvent(me);
    }

    @Override
    public void onSwipe(int direction) {
        // TODO Auto-generated method stub
        //final MainActivity tt = this;

        String str = "";

        switch (direction) {

        //case SimpleGestureFilter.SWIPE_RIGHT : str = "Swipe Right";
        case SimpleGestureFilter.SWIPE_RIGHT : this.finish();
        break;

        case SimpleGestureFilter.SWIPE_LEFT :  str = "Swipe Left";
        break;

        case SimpleGestureFilter.SWIPE_DOWN :  str = "Swipe Down";
        break;

        case SimpleGestureFilter.SWIPE_UP :    str = "Swipe Up";
        break;

        }
        //Toast.makeText(this, str, Toast.LENGTH_SHORT).show();

    }

    @Override
    public void onDoubleTap() {
        // TODO Auto-generated method stub
        //Toast.makeText(this, "Double Tap", Toast.LENGTH_SHORT).show();
        //Do Nothing for now future development

    }

    private PlaylistManager playlistMgr;

    private PlaylistEntryList playlistView; // Data for listview, stores current
    // playlist in memory

    public String createdNameList; // Indicated the name of currently Name of
    // playlist that is being created

    public Dialog dialog_customizePL, dialog_createPL, dialog_customizePLms;    // Dialog boxes for
    // Playlist creation

    public UIManager uiMgr = new UIManager();

    public String CONNECTED_DEVICE_MAC;

    public String dialogboxtext;

    public Connection Conn;

    int i = 0;

    protected void onPause() {
        super.onPause();
        //BluetoothManager.getInstance().disconnectAll();
        unregisterReceiver(mRvcau);     //Sequence is important
        System.exit(0); // Kill off all thread to prevent connectiong lost popup
        // I use system because is a calibration so I want user not to leave the activity else cannot calibrate

    }

    protected void onResume() {  //restart bluetooth is accidently off it
        super.onResume();

        BluetoothManager.getInstance().init();
        BluetoothManager.getInstance().getBluetoothAdapter().enable();

        IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_ACL_CONNECTED); // IntentFilter class is important to declare for below filter
        registerReceiver(mRvcau,filter); // mRvcau is the location of logic, filter is message identify by android

        filter = new IntentFilter(BluetoothDevice.ACTION_ACL_DISCONNECTED); // Future deveploment
        registerReceiver(mRvcau,filter); 

        filter = new IntentFilter(BluetoothDevice.ACTION_ACL_DISCONNECT_REQUESTED); // Future deveploment
        registerReceiver(mRvcau,filter);

        filter = new IntentFilter(BluetoothDevice.ACTION_BOND_STATE_CHANGED); //    Future deveploment
        registerReceiver(mRvcau,filter);
    }

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.remotedevicecalibration);

        detector = new SimpleGestureFilter(this,this);      ////////////////// For Gesture 

        playlistMgr = PlaylistManager.getInstance();

        initUI();
        uiMgr.initPlayListUI(this);

    }

    int connect = 0; // Check connection
    int disconnect = 0; // Check disconnection
    int requestdisconnect = 0;
    int connectstatuschanges = 0;

    public BroadcastReceiver mRvcau = new BroadcastReceiver(){ // The new is instantiate the class **always read from the back
        // The line from the back is creating an instantiate of this class          
        @Override
        public void onReceive(Context context, Intent intent) {
            String action = intent.getAction();

            if (BluetoothDevice.ACTION_ACL_CONNECTED.equals(action)) {
                //AutoActivity.this.finish();
                connect = 1;    // prevent activity from exiting
                System.out.println("ACTION_ACL_CONNECTED " + connect);  

            }
            else
            {
                connect = 0;
                System.out.println("ACTION_ACL_CONNECTED " + connect);
            }

            if (BluetoothDevice.ACTION_ACL_DISCONNECTED.equals(action)) {   //future development
                disconnect = 1;
                System.out.println("ACTION_ACL_DISCONNECTED " + disconnect);
            }
            else
            {
                disconnect = 0;
                System.out.println("ACTION_ACL_DISCONNECTED " + disconnect);
            }

            if (BluetoothDevice.ACTION_ACL_DISCONNECT_REQUESTED.equals(action)) {   //future development
                requestdisconnect = 1;
                System.out.println("ACTION_ACL_DISCONNECT_REQUESTED " + requestdisconnect);
            }
            else
            {
                requestdisconnect = 0;
                System.out.println("ACTION_ACL_DISCONNECT_REQUESTED " + requestdisconnect);
            }

            if (BluetoothDevice.ACTION_BOND_STATE_CHANGED.equals(action)) { //future development
                connectstatuschanges = 1;
                System.out.println("ACTION_BOND_STATE_CHANGED " + connectstatuschanges);
            }
            else
            {
                connectstatuschanges = 0;
                System.out.println("ACTION_BOND_STATE_CHANGED " + connectstatuschanges);
            }

        }
    };

    /**
     * Init layout component. Define Listener for Buttons and Dataset for
     * ListViews
     */
    @SuppressLint("ParserError")
    public void initUI() {

        Button Orange = (Button) findViewById(R.id.CalibrationOrange);  // new method on test using image
        Orange.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v){
                // TODO Auto-generated method stub
                activiteSingleConnection(20);

            }
        });

        Button Blue = (Button) findViewById(R.id.CalibrationBlue);  // new method on test using image icon to on the switch
        Blue.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v){
                // TODO Auto-generated method stub
                activiteSingleConnection(21);

            }
        });

        Button Green = (Button) findViewById(R.id.CalibrationGreen);    // new method on test using image icon to on the switch
        Green.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v){
                // TODO Auto-generated method stub
                activiteSingleConnection(22);

            }
        });

        loadDataToMem();
    }

    public void activiteSingleConnection(int i) {

        BluetoothManager btMgr = BluetoothManager.getInstance();
        BluetoothDevice device = btMgr.getBluetoothAdapter().getRemoteDevice(
                CONNECTED_DEVICE_MAC);
        ArrayList<String> msg = new ArrayList<String>();
        if(i == 20){
            msg.add("N");
        }

        if(i == 21){
            msg.add("J");
        }

        if(i == 22){
            msg.add("I");
        }

        CharSequence fruit = null;
        TextView aa = (TextView) this.findViewById(R.id.stringinput);
        aa.setText(fruit);

        btMgr.calibratesentMessage(uiMgr, device, msg);
    }

    public void loadDataToMem() {
        try {
            String str = "";
            //StringBuffer buf = new StringBuffer();
            FileInputStream input = this.openFileInput("bone.txt");
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    input));
            if (input != null) {
                while ((str = reader.readLine()) != null) {
                    String[] buff = str.split(",");
                    TextView topView = (TextView) this
                            .findViewById(R.id.remotedevicecalibrationtextview1);
                    TextView bottomView = (TextView) this
                            .findViewById(R.id.remotedevicecalibrationtextView2);
                    topView.setText("Name : " + buff[0]);
                    bottomView.setText("Mac : " + buff[2]);
                    this.CONNECTED_DEVICE_MAC = buff[2];
                    Log.d("loadDataToMem", str);
                }
            }
            input.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

} 
```

以下是我的日志猫错误消息

```
09-13 10:50:33.640: W/dalvikvm(2086): threadid=9: thread exiting with uncaught exception (group=0x40015560)
09-13 10:50:33.667: E/AndroidRuntime(2086): FATAL EXCEPTION: Thread-10
09-13 10:50:33.667: E/AndroidRuntime(2086): java.lang.NullPointerException
09-13 10:50:33.667: E/AndroidRuntime(2086):     at com.android.backend.data.bluetooth.Connection.run(Connection.java:196) 
```

希望有人可以建议我如何解决。谢谢你。

# servicestack - ServiceStack：RESTful 资源版本控制

> ID：12400071
> 
> 赞同：38
> 
> 时间：2012-09-13T05:40:28.853
> 
> 标签：servicestack

我已经阅读了 [基于消息的 Web 服务的优势一文](https://github.com/ServiceStack/ServiceStack/wiki/Advantages-of-message-based-web-services)，想知道是否有推荐的风格/实践来对 ServiceStack 中的 Restful 资源进行版本控制？不同的版本可能会在请求 DTO 中呈现不同的响应或具有不同的输入参数。

我倾向于使用 URL 类型版本控制（即 /v1/movies/{Id}），但我看到了在 HTTP 标头中设置版本的其他做法（即 Content-Type: application/vnd.company.myapp-v2 ）。

我希望有一种适用于元数据页面的方法，但并不像我注意到的那样在渲染路由时只需使用文件夹结构/命名空间就可以正常工作。

例如（这不会在元数据页面中正确呈现，但如果您知道直接路由/url，则可以正常执行）

*   /v1/movies/{id}
*   /v1.1/movies/{id}

代码

```
namespace Samples.Movies.Operations.v1_1
{
    [Route("/v1.1/Movies", "GET")]
    public class Movies
    {
       ...
    } 
}
namespace Samples.Movies.Operations.v1
{
    [Route("/v1/Movies", "GET")]
    public class Movies
    {
       ...
    }   
} 
```

以及相应的服务...

```
public class MovieService: ServiceBase<Samples.Movies.Operations.v1.Movies>
{
    protected override object Run(Samples.Movies.Operations.v1.Movies request)
    {
    ...
    }
}

public class MovieService: ServiceBase<Samples.Movies.Operations.v1_1.Movies>
    {
        protected override object Run(Samples.Movies.Operations.v1_1.Movies request)
        {
        ...
        }
    } 
```

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-09-13T19:05:30.500

## 尝试发展（而不是重新实现）现有服务

对于版本控制，如果您尝试为不同的版本端点维护不同的静态类型，您将陷入困境。我们最初是沿着这条路线开始的，但是一旦您开始支持您的第一个版本，维护同一服务的多个版本的开发工作就会爆炸式增长，因为您将需要维护不同类型的手动映射，这很容易泄露到必须维护多个并行实现，每个都耦合到不同的版本类型 - 严重违反 DRY。这对于动态语言来说不是什么问题，因为相同的模型可以很容易地被不同的版本重用。

## 利用序列化程序中的内置版本控制

我的建议不是显式版本，而是利用序列化格式中的版本控制功能。

例如：您通常不需要担心 JSON 客户端的版本控制，因为[JSON 和 JSV 序列化器的版本控制功能更具弹性](https://github.com/ServiceStack/ServiceStack.Redis/wiki/MigrationsUsingSchemalessNoSql)。

### 防御性地增强您现有的服务

使用 XML 和 DataContract，您可以在不进行重大更改的情况下自由添加和删除字段。如果您将`IExtensibleDataObject`DTO 添加到您的响应中，您也有可能访问未在 DTO 上定义的数据。我的版本控制方法是防御性编程，因此不会引入重大更改，您可以验证使用旧 DTO 进行集成测试的情况。以下是我遵循的一些提示：

*   永远不要更改现有属性的类型 - 如果您需要它是不同的类型，请添加另一个属性并使用旧的/现有的属性来确定版本
*   程序防御性地意识到旧客户不存在哪些属性，因此不要强制它们。
*   保留一个全局命名空间（仅与 XML/SOAP 端点相关）

我通过使用您的每个 DTO 项目的**AssemblyInfo.cs中的 [assembly] 属性来做到这一点：**

```
[assembly: ContractNamespace("http://schemas.servicestack.net/types", 
    ClrNamespace = "MyServiceModel.DtoTypes")] 
```

程序集属性使您免于在每个 DTO 上手动指定显式命名空间，即：

```
namespace MyServiceModel.DtoTypes {
    [DataContract(Namespace="http://schemas.servicestack.net/types")]
    public class Foo { .. }
} 
```

如果您想使用不同于上述默认命名空间的 XML 命名空间，您需要将其注册到：

```
SetConfig(new EndpointHostConfig {
    WsdlServiceNamespace = "http://schemas.my.org/types"
}); 
```

## 在 DTO 中嵌入版本控制

大多数时候，如果您进行防御性编程并优雅地发展您的服务，您将不需要确切知道特定客户端正在使用哪个版本，因为您可以从填充的数据中推断出它。但在极少数情况下，您的服务需要根据客户端的特定版本调整行为，您可以在 DTO 中嵌入版本信息。

随着您发布的 DTO 的第一个版本，您可以愉快地创建它们而无需考虑版本控制。

```
class Foo {
  string Name;
} 
```

但可能由于某种原因，Form/UI 发生了更改，您不再希望客户端使用模棱两可的**Name**变量，并且您还想跟踪客户端使用的特定版本：

```
class Foo {
  Foo() {
     Version = 1;
  }
  int Version;
  string Name;
  string DisplayName;
  int Age;
} 
```

后来在团队会议上讨论过，DisplayName 不够好，您应该将它们分成不同的字段：

```
class Foo {
  Foo() {
     Version = 2;
  }
  int Version;
  string Name;
  string DisplayName;
  string FirstName;
  string LastName;  
  DateTime? DateOfBirth;
} 
```

因此，当前状态是您有 3 个不同的客户端版本，现有调用如下所示：

v1 版本：

```
client.Post(new Foo { Name = "Foo Bar" }); 
```

v2 版本：

```
client.Post(new Foo { Name="Bar", DisplayName="Foo Bar", Age=18 }); 
```

v3 版本：

```
client.Post(new Foo { FirstName = "Foo", LastName = "Bar", 
   DateOfBirth = new DateTime(1994, 01, 01) }); 
```

您可以继续在同一实现中处理这些不同的版本（将使用最新的 v3 版本的 DTO），例如：

```
class FooService : Service {

    public object Post(Foo request) {
        //v1: 
        request.Version == 0 
        request.Name == "Foo"
        request.DisplayName == null
        request.Age = 0
        request.DateOfBirth = null

        //v2:
        request.Version == 2
        request.Name == null
        request.DisplayName == "Foo Bar"
        request.Age = 18
        request.DateOfBirth = null

        //v3:
        request.Version == 3
        request.Name == null
        request.DisplayName == null
        request.FirstName == "Foo"
        request.LastName == "Bar"
        request.Age = 0
        request.DateOfBirth = new DateTime(1994, 01, 01)
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T22:43:57.777

# 构建问题

API 是系统中公开其表达式的部分。它定义了在您的域中进行通信的概念和语义。当您想改变可以表达的内容或表达方式时，问题就来了。

表达的方法和表达的内容都可能存在差异。第一个问题往往是令牌的差异（名字和姓氏而不是名字）。第二个问题是表达不同的东西（重命名自己的能力）。

一个长期的版本控制解决方案将需要解决这两个挑战。

# 发展 API

通过更改资源类型来发展服务是一种隐式版本控制。它使用对象的构造来确定行为。当表达方法（如名称）只有很小的变化时，它的效果最好。它不适用于更复杂的表达方式变化或表现力变化的变化。代码往往分散在各处。

# 特定版本控制

当更改变得更加复杂时，保持每个版本的逻辑分开是很重要的。即使在 mythz 示例中，他也为每个版本隔离了代码。但是，代码仍然以相同的方法混合在一起。不同版本的代码很容易开始相互折叠，并且很可能会散开。摆脱对以前版本的支持可能很困难。

此外，您需要使旧代码与其依赖项的任何更改保持同步。如果数据库发生更改，支持旧模型的代码也需要更改。

# 更好的方法

我发现最好的方法是直接解决表达问题。每次发布新版本的 API 时，都会在新层之上实现。这通常很容易，因为变化很小。

它确实在两个方面大放异彩：首先，处理映射的所有代码都在一个位置，因此以后很容易理解或删除；其次，随着新 API 的开发（俄罗斯娃娃模型），它不需要维护。

问题在于新 API 的表现力不如旧 API。无论保留旧版本的解决方案是什么，这都是一个需要解决的问题。很明显存在问题以及解决该问题的方法是什么。

这个风格的mythz示例中的示例是：

```
namespace APIv3 {
    class FooService : RestServiceBase<Foo> {
        public object OnPost(Foo request) {
            var data = repository.getData()
            request.FirstName == data.firstName
            request.LastName == data.lastName
            request.DateOfBirth = data.dateOfBirth
        }
    }
}
namespace APIv2 {
    class FooService : RestServiceBase<Foo> {
        public object OnPost(Foo request) {
            var v3Request = APIv3.FooService.OnPost(request)
            request.DisplayName == v3Request.FirstName + " " + v3Request.LastName
            request.Age = (new DateTime() - v3Request.DateOfBirth).years
        }
    }
}
namespace APIv1 {
    class FooService : RestServiceBase<Foo> {
        public object OnPost(Foo request) {
            var v2Request = APIv2.FooService.OnPost(request)
            request.Name == v2Request.DisplayName
        }
    }
} 
```

每个暴露的物体都是清晰的。相同的映射代码仍然需要以两种样式编写，但在分离样式中，只需要编写与类型相关的映射。无需显式映射不适用的代码（这只是另一个潜在的错误来源）。当您添加未来的 API 或更改 API 层的依赖关系时，以前的 API 的依赖关系是静态的。例如，如果数据源发生更改，那么只有最新的 API（版本 3）需要以这种方式更改。在组合样式中，您需要为支持的每个 API 编写更改代码。

评论中的一个问题是向代码库添加类型。这不是问题，因为这些类型是暴露在外部的。在代码库中显式提供类型使它们易于在测试中发现和隔离。明确的可维护性要好得多。另一个好处是这种方法不会产生额外的逻辑，而只会增加额外的类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T01:45:11.670

我也在尝试为此提供解决方案，并正在考虑执行以下操作。（基于大量谷歌搜索和 StackOverflow 查询，因此这是建立在许多其他人的肩膀上的。）

首先，我不想争论版本是否应该在 URI 或请求标头中。这两种方法各有利弊，所以我认为我们每个人都需要使用最符合我们要求的方法。

这是关于如何设计/架构 Java 消息对象和资源实现类。

所以让我们开始吧。

我将分两步解决这个问题。次要更改（例如 1.0 到 1.1）和主要更改（例如 1.1 到 2.0）

小改动的方法

因此，假设我们使用 @mythz 使用的相同示例类

最初我们有

```
class Foo {   string Name; } 
```

我们以 /V1.0/fooresource/{id} 的形式提供对该资源的访问

在我的用例中，我使用 JAX-RS，

```
@Path("/{versionid}/fooresource")
public class FooResource {

    @GET
    @Path( "/{id}" )
    public Foo getFoo (@PathParam("versionid") String versionid, (@PathParam("id") String fooId) 
    {
      Foo foo = new Foo();
     //setters, load data from persistence, handle business logic etc                   
     Return foo;
    }
} 
```

现在假设我们向 Foo 添加了 2 个附加属性。

```
class Foo { 
    string Name;   
    string DisplayName;   
    int Age; 
} 
```

我此时所做的是使用 @Version 注释来注释属性

```
class Foo { 
    @Version(“V1.0")string Name;   
    @Version(“V1.1")string DisplayName;   
    @Version(“V1.1")int Age; 
} 
```

然后我有一个响应过滤器，它将基于请求的版本，仅将与该版本匹配的属性返回给用户。请注意，为方便起见，如果所有版本都应返回属性，那么您只需不要对其进行注释，过滤器将返回它而与请求的版本无关

这有点像中介层。我所解释的是一个简单的版本，它可能会变得非常复杂，但希望你能明白。

主要版本的方法

现在，当从一个版本到另一个版本进行了大量更改时，这可能会变得相当复杂。那是我们需要转移到第二个选项的时候。

选项 2 本质上是分支代码库，然后在该代码库上进行更改，并将两个版本托管在不同的上下文中。在这一点上，我们可能需要稍微重构代码库以消除方法一中引入的版本中介复杂性（即使代码更干净）这可能主要在过滤器中。

请注意，这只是我想的，还没有实现它，想知道这是否是个好主意。

另外我想知道是否有好的中介引擎/ESB 可以在不必使用过滤器的情况下进行这种类型的转换，但还没有看到任何像使用过滤器一样简单的转换。可能我搜索的还不够。

有兴趣了解他人的想法以及此解决方案是否可以解决原始问题。

# jdbc - 通过 JDBC 将文件加载到 hive

> ID：12400074
> 
> 赞同：2
> 
> 时间：2012-09-13T05:40:59.987
> 
> 标签：jdbc, hive

尝试通过其 JDBC 驱动程序将文件加载到 Hive 时出现此错误。Hive 实例在 vm 上运行。当我通过 hive 命令行加载文件时，该文件加载得非常好。该文件与 Hive 位于同一实例上。我希望 jdbc 支持 load 命令。

java.sql.SQLException：查询返回非零代码：10，原因：失败：语义分析错误：第 1:23 行无效路径“/home/cloudera/Desktop/test.csv”：没有文件匹配路径文件:/home/cloudera/Desktop/test.csv 在 org.apache.hadoop.hive.jdbc.HiveStatement.executeQuery(HiveStatement.java:189) 在 Main.main(Main.java:55)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-13T07:18:22.953

由于 hive 依次在 map/reduce 环境中运行，因此用户在使用 hive jdbc 时需要为 csv 文件提供 hdfs 路径（不是本地路径）。在使用 hive cli 运行时，它采用本地路径，因为它负责将文件上传到 hdfs 以加载到表中。

# django - 如何将 Django 应用程序从 Git 导入项目

> ID：12400077
> 
> 赞同：5
> 
> 时间：2012-09-13T05:41:27.290
> 
> 标签：django, git

我想在我正在处理的项目中包含一个 Django 应用程序。该应用程序托管在 Github ( [https://github.com/lmorchard/django-badger](https://github.com/lmorchard/django-badger) ) 上。除了包含好东西的应用程序目录之外，根目录中还有一些文件 - README、LICENCE、TODO 和 setup.py。如果我将应用程序克隆到项目的根目录中，则应用程序文件夹将位于正确的位置，但这些根文件将位于我项目的根目录中。如何在 Github 中跟踪上游代码的同时添加应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T05:57:31.943

我有一个类似的问题，我正在处理两个独立的项目，两个项目都在一个仓库中，其中一个将另一个用作应用程序：

*   创建一个 virtualenv 并为两个项目安装所有依赖项。我通常喜欢为每个项目/存储库创建一个 virtualenv，但在这种情况下，您需要一个可以从两个存储库执行 Python 的 env。
*   将两个存储库克隆到独立位置。不要在其他项目中克隆依赖的应用程序。您的文件结构可能如下所示（假设 Django 1.3 项目布局）：

    ```
    project/
      manage.py
      project/
        __init__.py
        settings.py
        ...
      ...

    app/
      README
      ...
      app/
        __init__.py
        models.py
        ... 
    ```

*   `__init__.py`最后一步是从包含在其中的应用程序目录到项目路径的符号链接（或 Windows 上的快捷方式） 。

    ```
    $ ln -s /abs/path/to/app/app /abs/path/to/project/ 
    ```

*   现在您可以使用 virtualenv 来运行项目了！

最终结果是您有两个独立的存储库，但是其中一个项目正在使用另一个项目而无需直接复制代码，因此您可以维护两个存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T05:54:08.020

你可以通过运行安装它

```
python setup.py 
```

或通过点子

```
sudo pip install -e git+https://github.com/lmorchard/django-badger#egg=django-badger 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T05:55:25.493

使用 . 从 github 克隆存储库`git://github.com/lmorchard/django-badger.git`。然后在终端中打开克隆的文件夹。使用命令安装应用程序`sudo python setup.py install`。这会很好用。如果您想将应用程序包含在您的项目中，请创建一个名为**badger**的文件夹（或任何您想要的）并将已安装的应用程序从 dist-packages 复制到创建的文件夹。

# php - /** 致命错误：在第 82 行的 C:\wamp\www\app\code\local\Gclone\Deal\Model\Deal.php 中的非对象上调用成员函数 getSource()

> ID：12400078
> 
> 赞同：-5
> 
> 时间：2012-09-13T05:41:31.570
> 
> 标签：php, function, call, member

我是 php 新手，我已经下载了 Contus groupclone 无效代码。我连接到 mysql 数据库，但是当我想运行它时，我得到了这个错误。我的本地服务器是 wamp 2.2 并在 windows vista 上使用 apache 2.2.21 、 php 5.3.8 和 mysql 5.5.16 。如果有人可以帮助我，我将不胜感激。

```
 public function urlCollections()
  {
      if ($this->isLicense() === true) {
          $attribute = Mage::getmodel("eav/config")->getAttribute("catalog_product", "562");
          $cityValue = array();
        * foreach ($attribute->getSource()->getAllOptions(true, true) as $option) {*
              $cityValue[$option['label']] = $option['value'];
              $storeId                     = Mage::app()->getStore()->getStoreId();
              $city                        = $option['value'];

              if ($city != "") {
                  $cityName     = $option['label'];
                  $cityName     = ereg_replace("[^A-Za-z0-9^-]", "", $cityName);
                  $cityName     = str_replace(" ", "-", $cityName);
                  $cityName     = strtolower($cityName);
                  $requestPath  = "deal/" . $cityName . ".html";
                  $realPath     = "deal/index/index/city/" . $city;
                  $resource     = Mage::getsingleton("core/resource");
                  $read         = $resource->getConnection("read");
                  $tPrefix      = ( boolean ) Mage::getconfig()->getTablePrefix();
                  $rewriteTable = "magentocore_url_rewrite";
                  $idPath       = "deal/index/index/city/" . $city;
                  $urlRewrite   = $read->select()->from(array(
                      "ur" => $rewriteTable
                  ), array(
                      "ur.request_path"
                  ))->where("ur.id_path =? ", $idPath)->where("ur.store_id =? ", $storeId)->where("ur.is_system =?", 0);
                  $cityUrl      = $read->fetchRow($urlRewrite);
                  if (empty($cityUrl)) {
                      $urlCheck     = $read->select()->from(array(
                          "ur" => $rewriteTable
                      ), array(
                          "ur.request_path"
                      ))->where("ur.request_path =? ", $requestPath)->where("ur.store_id =? ", $storeId)->where("ur.is_system =?", 0);
                      $cityUrlCheck = $read->fetchRow($urlCheck);
                      if (!empty($cityUrlCheck)) {
                          $requestPath = "deal/" . $cityName . "-" . $city . ".html";
                      }
                      $executeQuery = $read->query("INSERT INTO {$rewriteTable} (`store_id`, `category_id`, `product_id`, `id_path`, `request_path`, `target_path`, `is_system`, `options`, `description`) VALUES ({$storeId}, NULL, NULL, '{$realPath}', '{$requestPath}', '{$realPath}', '0', '', NULL)");
                  }
              }
          }
          return $cityValue;
      }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:06:47.213

该错误意味着您`$attribute`通过调用运算符将​​变量视为对象`->`，但 PHP 并未将其识别为对象类型。

```
$attribute = Mage::getmodel("eav/config")->getAttribute("catalog_product", "562");
$cityValue = array();
* foreach ($attribute->getSource()->getAllOptions(true, true) as $option) {*
$cityValue[$option['label']] = $option['value'];' 
```

你有一个`*`之前和之后你的`foreach`，为什么？在分配后立即执行`var_dump()`or `print_r()`on 。`$attribute`你甚至可以`gettype()`打电话。

# android - 将 onCreate() 内容转移到应用程序类中

> ID：12400081
> 
> 赞同：0
> 
> 时间：2012-09-13T05:42:03.020
> 
> 标签：android, class, oncreate

我的应用程序包含 25 个编辑文本。`gridView.setAdapter(new TextAdapter(this));`我在适配器类的帮助下得到了这 25 个编辑文本，通过在活动类中给出 count=25 并在 gridView 中进行拟合。因此，编辑文本是动态生成的。但问题是我无法在编辑文本中设置初始值。这是因为 edittext 对象无法设置值。

假设我没有在编辑文本中设置任何初始值并继续我的应用程序。在更改方向后在以前的模式中输入的编辑文本中设置值时，同样的问题会重复。因为方向的改变创造了新的活动。即使我尝试过`android:configChanges="orientation|keyboardHidden"`，但在我将值设置回**`**onConfigurationChanged()**`**. 因为我正在设置**setContentView();** 在 onConfigurationChanged() 中，因为我需要相应的视图，但仍然无法使用 edittext 对象设置它们的值。

是否有任何解决方案来设置值？如果不是，我在想（可能是完全错误的方式，但作为新手请放轻松）将 onCreate() 方法内容移动到 Application 类。所以最初的部分是应用程序类，包括创建编辑文本。并在 onCreate() 方法中获取该 edittext 对象以设置值。可能吗？请建议。代码片段将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:16:32.270

您将需要修改 TextAdapter。将初始值存储在 String 数组中，String 数组元素的位置与 GridView 中 EditText 的位置对齐。

伪代码（未经测试）：

```
public class TextAdapter extends BaseAdapter {

String [] initial_value = {"Initial Value 1", "Initial Value 2", "Initial Value 3",  ..., };

    public View getView(int pos, View view, ViewGroup viewGroup) {

        if (view == null) {
            LayoutInflater inflater = (LayoutInflater)    this.context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            view = inflater.inflate(R.layout.edit_text_container, null);
        }

        (EditText) edtTemp = (EditText) view.findViewById(R.id.edit_text_id);
        edtTemp.setText(initial_value[pos]);
    }

} 
```

# wcf - 在本地开发机器上的 Windows Phone 7 设备上访问 Windows Azure WCF 服务

> ID：12400083
> 
> 赞同：0
> 
> 时间：2012-09-13T05:42:11.517
> 
> 标签：wcf, windows-phone-7, iis, azure

如何在本地开发机器上的 Windows Phone 7 设备上访问 Windows Azure WCF 服务。我已经尝试了我的本地 IP 并关闭了我的防火墙。没有什么帮助。我们有什么很酷的技巧吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:07:00.707

好的，所以您正尝试使用真正的 Windows Phone 设备访问您的开发机器上的模拟器？官方不支持这，因为模拟器只接受本地连接。但是您可以使用 Windows 中提供的端口转发功能来绕过此限制：

```
netsh interface portproxy add v4tov4 listenport=8081 connectport=81 connectaddress=127.0.0.1 
```

现在，您应该将设备配置为连接到**yourip:8081**，而不是让您的 WP7 连接到**yourip:81**。

# java - 在java中解析java字符串

> ID：12400085
> 
> 赞同：1
> 
> 时间：2012-09-13T05:42:42.287
> 
> 标签：java, parsing

我想用java解析java代码。

问题是，当我将java代码传递给解析方法时，它不会将它作为字符串。如何转义要解析的代码

```
public class JavaParser {

    private int noOfLines;

    public void parse(String javaCode){
        String[] lines = javaCode.split("[\r\n]+");
        for(String line : lines)
            System.out.println(line);
    }

     public static void main(){
            JavaParser a = new JavaParser();
            a.parse("java code;");
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T05:47:23.747

您需要将 java 代码文件作为文本文件逐行或全部读取一次，例如：

```
FileInputStream inputStream = new FileInputStream("foo.java");
try {
    String everything = IOUtils.toString(inputStream);
} finally {
    inputStream.close();
} 
```

然后你可以解析所有字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T05:50:21.560

也许你可以描述你想要达到的目标？

通常，它的 java 编译器（如 javac）用于解析 java 源文件。

快速谷歌搜索显示[这个项目](http://code.google.com/p/javaparser/)可以满足您的需求

从 java 6 开始，您可以调用编译器作为代码的一部分（java 公开了编译器 API）。如果您在阅读代码后尝试编译代码，这会很有帮助。一般来说，你可以阅读[这篇文章](http://today.java.net/pub/a/today/2008/04/10/source-code-analysis-using-java-6-compiler-apis.html)，也许你会发现它有帮助

希望这可以帮助

# c - 为什么从管道读取时 read() 不会返回零

> ID：12400091
> 
> 赞同：0
> 
> 时间：2012-09-13T05:42:59.613
> 
> 标签：c, fork, pipe

我的作业有问题，我要上课。我必须创建一个读/写程序，它将一个文本文件读入其中并将内容写入一个新的文本文件。问题是，我必须使用父/子进程和管道。我必须将内容与一个孩子一起传递到管道中，并使用另一个孩子从管道中读取数据并将其写入新文件。

我有三个文件`parent.c`：`read.c`和`write.c`. 该程序在大多数情况下运行良好！它甚至可以完美地将数据从一个文件传输到另一个文件。我遇到的问题是 write.c 过程永远不会完成。我认为这可能与从管道读取有关（不会返回 0 或 EOF）。这是我的源代码：

### 父.c

```
#include <unistd.h>
#include <string.h>
#include <sys/types.h>
#include <sys/wait.h>
#include <fcntl.h>
#include <stdio.h>
#include <stdlib.h>

#define BUFF_SIZE 255

int main(int ac, char* av[]) 
{   
    if(ac <3)
    {
        printf("Please enter all required arguments!\n");   
        exit(0);    
    }

    int pfd[2];
    int pipeCreated;

    char readFile[50];
    char writePipe[20];

    pid_t child_pid_read;
    pid_t child_pid_write;

    pipeCreated = pipe(pfd);

    if(pipeCreated == -1)
    {
        printf("An error occurred when trying to create a pipe\n");
        exit(0);
    }

    strcpy(readFile, av[1]);
    sprintf(writePipe,"%d", pfd[1]);

    child_pid_read = fork();

    char writeFile[50];
    char readPipe[20];

    //Handling the read()
    switch(child_pid_read) 
    {
        //Error in case forfk() failed
        case -1:
            perror("fork failed");
            return 1;

            //Handle child processes
        case 0:
             if(close(pfd[0]) == -1)
             {
                 printf("An error occurred while closing the pipe\n");
                 exit(0);
             }
             if(execle("./read.out", "./read.out", readFile, writePipe, (char*)0, NULL) == -1)
             {
                 printf("Child: Error creating read.\n");
                 exit(0);
             }

        default:
            wait(&child_pid_read);

            strcpy(writeFile, av[2]);
            sprintf(readPipe,"%d", pfd[0]);

            child_pid_write = fork();
            break;
    }

    //Handling the write
    switch(child_pid_write) 
    {
        //Error in case fork() failed
        case -1:
            perror("fork failed");
            return 1;

        //Handle child processes
        case 0:
            if(close(pfd[1]) == -1)
            {
                printf("An error occurred while closing the pipe\n");
                exit(0);
            }

            if(execle("./write.out", "./write.out", writeFile, readPipe, (char*)0, NULL) == -1)
            {
                printf("Child: Error creating read.\n");
                exit(-1);
            }
            break;

        default:
            wait(&child_pid_write);
            break;
    }
    printf("Write completed!");
    return 0;
} 
```

* * *

### 阅读.c：

```
#include <unistd.h>
#include <stdio.h>
#include <stdlib.h>
#include <fcntl.h>

#define BUFF_SIZE 16

int main(int ac, char* av[]) 
{   
    char buffer[BUFF_SIZE];
    int fd;
    int pid;

    if(ac > 1)
    {
        fd = open(av[1], O_RDONLY);
        if(fd == -1)
        {
            printf("error: Could Not Open File\n");
            exit(0);
        }

        pid = atoi(av[2]);

    }

    int num_read = 1;

    while(1)
    {
        num_read = read(fd, buffer, BUFF_SIZE);

        if(num_read == -1)
        {
            printf("Error reading file\n");
            exit(0);
        }

        if(num_read == 0)
        {
            break;
        }

        if(write(pid, buffer, num_read) != num_read)
        {
            printf("Error writing to pipe\n");
            break;
        }
    }
    close(fd);
    return 1;
} 
```

* * *

### 写.c

```
#include <unistd.h>
#include <stdio.h>
#include <stdlib.h>
#include <fcntl.h>

#define BUFF_SIZE 1

int main(int ac, char* av[]) 
{
    char buffer[BUFF_SIZE];

        int fd = open(av[1], O_WRONLY | O_CREAT | O_TRUNC, S_IRUSR | S_IWUSR);

        int pid = atoi(av[2]);

        int num_read = 1;

    while(1)
    {
            num_read = read(pid, buffer, BUFF_SIZE);

            printf("num_read: %d\n", num_read);

            if(num_read == -1)
            {
                printf("Error reading pipe\n");
                break;
            }

            if(write(fd, buffer, num_read) != num_read)
            {
                printf("Error writing to file\n");
                break;
            }

            if(num_read == EOF)
            {
                break;
            }
    }

        close(fd);
        return 1;
} 
```

* * *

请查看我的代码并提出更正建议。我正在通过终端 ( `./parent.out`, `oldFile.txt`, `newFile.txt`) 传递文本文件的名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:37:05.610

两个问题：

1.  在等待（）读取过程返回之前，您不会分叉写入过程。如果读取进程尝试写入的数据超出管道缓冲区的容量，它将阻塞并且永远不会退出。您需要允许两个进程同时运行以避免这种死锁。它适用于一个小文件，但如果文件大于 4KB，它将挂起。
2.  分叉写入进程后，父进程必须关闭`pfd[0]`。在所有打开写端的进程关闭它之前，管道的读取器不会得到 EOF。它应该是：

    ```
    default:
        if(close(pfd[0]) == -1)
         {
             printf("An error occurred while closing the pipe\n");
             exit(0);
         }
        wait(&child_pid_write);
        break; 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T05:51:31.323

您的孩子想要读取数据，为什么要关闭 fd[0]，从管道返回，表明 fd[0] 用于读取，fd[1] 用于写入。由于我无法添加评论，我必须发表评论这里....

# mercurial - 如何让 Mercurial 存储库在收到新的变更集时自动推送到另一个？

> ID：12400100
> 
> 赞同：0
> 
> 时间：2012-09-13T05:43:52.857
> 
> 标签：mercurial, automation, push, commit

我有三个 Mercurial 存储库`repo`，`repoA`并且`repoB`. 我希望发生以下情况

`repoA` 提交中的一些编辑`repoA` 手动推送`repo` `repo`更新并在收到提交后立即`repoB` **自动推送**`repoA`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T22:21:09.843

使用[Mercurial hooks](http://mercurial.selenic.com/wiki/Hook)怎么样？

例如：

```
[hooks]
changegroup = hg up; hg push repoB 
```

如果您使用的是 Windows，则挂钩命令行将改为`hg up & hg push repoB`.

（请注意，对于更复杂的东西，您可以只调用 Bash/Cmd 脚本而不是像这样的单行）

# android - travels(taxi cab) 的关键字是什么，可以从谷歌服务中获取结果。

> ID：12400101
> 
> 赞同：0
> 
> 时间：2012-09-13T05:44:10.750
> 
> 标签：android, google-maps

我正在使用以下网址从谷歌服务获取详细信息

[https://maps.googleapis.com/maps/api/place/search/json?&location=lattitude,longitude&radius=5000&types=hospital&sensor=false&key=yourapikey](https://maps.googleapis.com/maps/api/place/search/json?&location=lattitude,longitude&radius=5000&types=hospital&sensor=false&key=yourapikey)

我正在获得医院、atm、银行等的价值，但我无法获得出租车的价值，（旅行）谁能告诉我关键词是什么？

谢谢，拉杰什

# xpages - 不活动后未调用 inputText onchange 事件

> ID：12400102
> 
> 赞同：1
> 
> 时间：2012-09-13T05:44:19.060
> 
> 标签：xpages, xpages-ssjs

我在触发 onChange 事件的 inputText 字段上启用了预输入。除非页面有一段时间没有刷新（在测试中，它会在 1 小时后停止工作，但可能会更少），否则这工作正常。刷新页面完全解决了这个问题。

inputText 字段的代码如下；

```
<xp:inputText id="quickSelectEntry" style="width:170px;">
    <xp:this.dojoAttributes>
        <xp:dojoAttribute name="placeHolder" value="Enter name">
        </xp:dojoAttribute>
    </xp:this.dojoAttributes>
    <xp:typeAhead mode="none" minChars="2" ignoreCase="true"
        var="searchValue" valueMarkup="true">
        <xp:this.valueList><![CDATA[#{javascript:return         nameTypeAhead(searchValue)}]]></xp:this.valueList>
                </xp:typeAhead>

                <xp:eventHandler event="onchange" submit="true"
                    refreshMode="norefresh">
                    <xp:this.action>
                        <xp:actionGroup>
                            <xp:executeScript>
                                <xp:this.script><![CDATA[#{javascript:var searchVal:string = getComponent("quickSelectEntry").getValue();
if (searchVal.substr(0,1).equals("?")) {
    context.redirectToPage("xCheckSecurityGroup.xsp?group=" + searchVal.substr(1));
    return false;
} else {
    var doc:NotesDocument = quickLookupView.getDocumentByKey(searchVal, true);
    if (null != doc) {
        viewScope.lookupKey = doc.getUniversalID();
        viewScope.lookupForm = doc.getItemValueString("form");
        return true;
    } else {
        viewScope.lookupKey = ""
        viewScope.lookupForm = ""
        return false;
    }
}
]]></xp:this.script>
                            </xp:executeScript>
                            <xp:actionGroup>
                                <xp:this.condition><![CDATA[#{javascript:viewScope.lookupKey != ""}]]></xp:this.condition>

                                <xp:openPage target="openDocument"
                                    documentId="#{javascript:return viewScope.lookupKey}">
                                    <xp:this.name><![CDATA[#{javascript:return "x" + viewScope.lookupForm + ".xsp" }]]></xp:this.name>
                                </xp:openPage>
                            </xp:actionGroup>
        </xp:actionGroup>
    </xp:this.action>
</xp:eventHandler> 
```

到目前为止，我已经尝试对包含面板进行定时部分刷新，但没有任何乐趣，我已经将 typeahead 模式从 none 设置为 full。没有不同。

除了每 10 分钟刷新一次页面之外，还有什么其他原因导致了这个问题。仅供参考，实际的预输入始终如一地正常工作，它只是停止触发的 onchange 事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T20:14:47.140

似乎发生的情况是服务器 Web 会话完好无损，但 XPages 会话丢失了。

将以下内容添加到 XPage 的底部，它将根据您的设置（以毫秒为单位）定期刷新 DIV（300000 = 300 秒 = 5 分钟）——我成功测试的最长时间是 3.5 小时。

您需要设置一个至少比数据库应用程序属性中设置的会话超时长度短一分钟的值。

```
<xp:div id="keepSessionAlive"></xp:div>
<xp:scriptBlock id="scriptBlock1">
    <xp:this.value>
    <![CDATA[   
        XSP.addOnLoad(function(){
            setInterval(function(){
                XSP.partialRefreshPost("#{id:keepSessionAlive}", {});   
            }, 300000)
        })]]>
    </xp:this.value>
</xp:scriptBlock> 
```

不要设置较短的刷新时间，因为这会不必要地浪费带宽，还会使浏览器无法很好地管理的 IE 的 RAM 使用量膨胀。

同时了解这是一个安全问题 - 通过基本上保持空闲计算机的会话处于活动状态，您可以在用户不知情的情况下让它处于劫持状态 - 这是超时的一部分

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T06:40:05.667

问题是 XSP 会话超时（根据您的服务器设置）。有关保持会话活动的建议，请参阅此答案： [如何在部分刷新不起作用时自动刷新页面？](https://stackoverflow.com/questions/9557814/how-do-i-refresh-page-automatically-when-partial-refresh-doesnt-work)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T13:17:21.030

我也见过这个。我最终放置了一个元刷新标签，每 30 分钟重新加载一次页面。这是唯一似乎有效的方法。

霍华德

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T21:53:40.813

可能要检查应用程序属性（转到 Xpages 选项卡）。在那里您可以设置数据库的应用程序和会话超时。如果这些是空白的，我认为它们将默认为通常为 30 分钟的服务器。

视听/视听，

凯夫

# struts2 - 使用json插件时带参数的Struts2注释

> ID：12400104
> 
> 赞同：2
> 
> 时间：2012-09-13T05:44:28.970
> 
> 标签：struts2, annotations, struts2-json-plugin

只是我想评估我的操作的属性并在注释中使用它的值。以下正是我想要使用它的地方。

我想在运行时定义一个 excludeProperties 参数。

考虑以下当前适用于该操作的注释：

```
 @Result(name = "success", type = "json", params = {"root", "model", "excludeProperties", "myCollection"}) 
```

那里的动作模型有一个我不想序列化的 myCollection 集合。

但是我想创建一个排除字符串（现在可以使用一个字符串）。

如果我创建一个用于排除的 getter setter，我希望以下注释能够工作（它不起作用）：

```
@Result(name = "success", type = "json", params = {"root", "model", "excludeProperties", "${exclusion}"}) 
```

有任何想法吗？

我创建了类似于此[答案](https://stackoverflow.com/questions/6037820/is-it-possible-to-use-wildcard-method-invocation-in-struts2-with-conventions-plu)的操作，它显示了在注释中解析参数。我正在使用命名变量模式匹配器从命名空间中提取值......但无论我做什么，我似乎都无法设置这个参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T05:54:31.217

部分问题是我正在使用实体对象并且序列化集合是一​​个问题。使用您自己的自定义 JSON 结果类型，您可以做任何您想做的事情。自从为 jsonModel 创建了 getter setter 后，我就在那里构建了我需要的东西。我不需要担心延迟初始化错误，因为您需要使用 flexjson 显式包含集合，所以如果您只想要原语（我做过），那么 flexjson 是完美的。

这个使用 flexjson 的非常简单的结果类型可以满足我的需要：

```
import com.opensymphony.xwork2.ActionInvocation;
import com.opensymphony.xwork2.Result;
import com.opensymphony.xwork2.util.ValueStack;
import flexjson.JSONSerializer;
import java.io.PrintWriter;
import org.apache.struts2.ServletActionContext;

public class Kjson implements Result {

    @Override
    public void execute(ActionInvocation invocation) throws Exception {
        ServletActionContext.getResponse().setContentType("text/plain");
        PrintWriter responseStream = ServletActionContext.getResponse().getWriter();
        ValueStack valueStack = invocation.getStack();
        Object jsonModel = valueStack.findValue("jsonModel");
        //create json and put it into response stream
        responseStream.println(new JSONSerializer().exclude("class").serialize(jsonModel));
    }
} 
```

# c++ - 从 demangled 名称中获取 mangled 名称

> ID：12400105
> 
> 赞同：51
> 
> 时间：2012-09-13T05:44:28.957
> 
> 标签：c++, g++, name-mangling

有没有办法从 g++ 中的 demangled name 中取回 mangled name。

例如，我有损坏的`func(char*, int)`名称，我应该怎么做才能`_Z4funcPci`恢复损坏的名称？

我的问题是 g++ 特定的。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-13T12:48:42.470

您可以简单地使用 g++ 编译具有所需签名的空函数并从中提取名称。例如：

```
echo "int f1(char *, int) {} " | g++ -x c++ -S - -o- | grep "^_.*:$" | sed -e 's/:$//' 
```

给出输出

```
_Z2f1Pci 
```

这是我认为你需要的。确保包含任何相关的头文件，因为它们会影响符号被破坏的方式。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-06-09T08:02:33.237

基于 Bojan Nikolic 的方法，这里有一个更好的脚本：

*mangle.bash:*

```
IFS='::' read -a array <<< "$1"

indexes=("${!array[@]}")

prefix=""
middle=""
suffix=""
rettype=""
if [ -z "$2" ]; then
    rettype="void"
fi

for index in "${indexes[@]}"
do
    #echo "$index ${array[index]}"
    if [ $index == ${indexes[-1]} ]; then
    #echo "last"
    middle="$rettype ${array[index]};"
    elif [ -n "${array[index]}" ]; then
    #echo "not empty"
    prefix="${prefix}struct ${array[index]}{"
    suffix="${suffix}};"
    fi
done

#echo "$prefix$middle$suffix $rettype $1{}"
echo "$prefix$middle$suffix $rettype $1{}" | g++ -x c++ -S - -o- | grep "^_.*:$" | sed -e 's/:$//' 
```

利用：

```
$ ./mangle.bash "abc::def::ghi()"
_ZN3abc3def3ghiEv
$ ./mangle.bash "abc::def::ghi(int i, char c)"
_ZN3abc3def3ghiEic
$ ./mangle.bash "abc::def::def(int i, char c)" constr
_ZN3abc3defC2Eic
$ ./mangle.bash "abc::def::~def()" destr
_ZN3abc3defD2Ev 
```

但是关于构造函数和析构函数，记住有 C0 C1 C2 和 D0 D1 D2 。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-05-13T12:04:53.473

最糟糕的是，有时您***无法***修改名称，因为您必须获得多个结果。

参见[https://reverseengineering.stackexchange.com/q/4323/4398（VFT](https://reverseengineering.stackexchange.com/q/4323/4398)中有多个析构函数，所有析构函数都被解构为`ClassName::~ClassName()`）。（同样适用于构造函数，我见过 C0 和 C2 构造函数。）

另一方面，该答案引用了 Itanium ABI：[https](https://refspecs.linuxbase.org/cxxabi-1.75.html#mangling-type) ://refspecs.linuxbase.org/cxxabi-1.75.html#mangling-type其中指定了 mangling。

**itanium-abi Haskell 包：它对我不起作用（2014 年 5 月）**

有一个 Haskell 包 [http://hackage.haskell.org/package/itanium-abi](http://hackage.haskell.org/package/itanium-abi) 承诺去重和重整，但我只能运行去重：

在 Ubuntu Precise 上安装：

```
sudo aptitude install ghc
sudo aptitude install cabal-install
cabal update
cabal install itanium-abi 
```

然后你跑`ghci`，`import ABI.Itanium`然后`import Data.Either`你得到：

```
Prelude ABI.Itanium Data.Either> cxxNameToText $ head (rights [ demangleName "_ZTI13QSystemLocale" ])
"typeinfo for QSystemLocale" 
```

有`mangleName`，但它需要一个`DecodedName`数据结构而不是字符串，并且该数据结构仅由`demangleName`（除非我忽略了某些东西）产生。希望这会在未来的某个版本中变得更好。

**铿锵代码**

我没有尝试[clang 代码](http://clang.llvm.org/doxygen/ItaniumMangle_8cpp_source.html)。

# android - 我在果冻豆模拟器上的应用程序错误

> ID：12400106
> 
> 赞同：0
> 
> 时间：2012-09-13T05:44:33.357
> 
> 标签：android, string, text, int

很抱歉，如果有这样的问题，我只想知道，我正在尝试读取服务器上的文件 .txt，然后我转换为 int，当我尝试使用 froyo 模拟器时我成功了

这是我的代码

```
final Context context = this;
TextView textServer, textApp;
final String textSource = "http://xxx/dev/android/androidversi.txt"; 
```

.txt 文件位置声明

```
URL textUrl;
String StringBuffer;
String stringText = "";

try {
    textUrl = new URL(textSource);
    BufferedReader bufferReader = new BufferedReader(new InputStreamReader(textUrl.openStream()));

    while ((StringBuffer = bufferReader.readLine()) != null) 
    {
        stringText += StringBuffer;
    }
    bufferReader.close();
} catch (MalformedURLException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

上面的代码从服务器读取 .txt 文件，这个代码是果冻豆中的错误，因为我在 FROYO 上尝试过运行正常

```
PackageManager manager = getPackageManager();
PackageInfo info;
try {
    info = manager.getPackageInfo(getPackageName(), 0);
    int version = info.versionCode;

    if(Integer.parseInt(stringText)>version) // I'VE CONVERTED STRING FROM .txt TO INT SO THAT I CAN COMPARE IT WITH VERSION ON APP
    {
        // IF VERSION ON SERVER > VERSION APP THERE IS LINK TO DOWNLOAD HERE
    }
} catch (NameNotFoundException e){
    e.printStackTrace();
} 
```

比较版本

请帮我 ：'（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T05:52:14.277

它只不过是主线程上的网络异常；只包括

```
if (android.os.Build.VERSION.SDK_INT > 9) {
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy);
} 
```

到您的代码（在 onCreate() 方法中），您会没事的:)

# iphone - 在页面视图控制器中显示网页

> ID：12400109
> 
> 赞同：-1
> 
> 时间：2012-09-13T05:44:43.843
> 
> 标签：iphone, ios, cocoa-touch, uiviewcontroller, uipageviewcontroller

我有两个自己的博客，我正在尝试使用 PageViewController 创建一个应用程序。第一页和第二页应显示各自博客的位置。我对 ViewControllers 没问题，但是我不知道从哪里开始使用 Page View Controller，任何人都可以提供任何关于 Page View Controller 的教程或示例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T05:54:21.167

[http://www.ioslearner.com/implementing-uipageviewcontroller-programatically-without-storyboarding/](http://www.ioslearner.com/implementing-uipageviewcontroller-programatically-without-storyboarding/)

[http://www.techotopia.com/index.php/An_Example_iOS_5_iPhone_UIPageViewController_Application](http://www.techotopia.com/index.php/An_Example_iOS_5_iPhone_UIPageViewController_Application)

这可能会对您有所帮助。

# java - Java中的DFS和SMB（jcifs）问题

> ID：12400112
> 
> 赞同：1
> 
> 时间：2012-09-13T05:45:12.250
> 
> 标签：java, windows, smb, jcifs, microsoft-distributed-file-system

我们正在尝试使用 java 中的 jcifs 在 DFS 共享上创建目录。

**server1 上的 DFS** ：来自 server1 smb store 的 DOMAIN/
Root/path1 来自 server2 smb store 的
DOMAIN/Root/path2

在 Eclipse上从**调试**模式创建目录时.. 在 jcifs(Java) 中使用 SMBFile，在该 DFS 共享上**成功创建目录。**

但是相同的程序**尝试并作为 Windows 服务执行，它不工作会抛出异常作为“Smb Access Denied”异常**。

感谢提前...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T05:07:26.400

在您的课程路径中使用它。

-Djcifs.smb.client.dfs.disabled="false"。

它应该工作

# android - 调整 ImageView 的大小以适应纵横比

> ID：12400113
> 
> 赞同：13
> 
> 时间：2012-09-13T05:45:16.773
> 
> 标签：android, imageview

我需要调整 ImageView 的大小，使其适合屏幕，保持相同的纵横比。以下条件成立：

*   图像是固定宽度（屏幕宽度的大小）
*   图片是从网上下载的，即大小只能以后确定
*   每个图像的纵横比会有所不同；有的高，有的方，有的平
*   ImageView 的*高度*需要根据图像的纵横比改变，要么变大要么变小
*   多余的高度被裁剪，默认情况下不能有很多空白空间。

例如，在 400 像素宽的屏幕上显示 50x50 的微小图像会将图像缩放到 400x400 像素。一个 800x200 的图像将缩放到 400x100。

我查看了大多数其他线程，以及许多提出的解决方案，例如简单地更改`adjustViewBounds`并且`scaleType`只会缩小图像，而不是放大图像。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-12-06T15:09:41.930

我在这篇博文中的 Bob Lee 的回答的帮助下创建了它：[Android：如何在保持纵横比的同时将图像拉伸到屏幕宽度？](https://stackoverflow.com/questions/2991110/android-how-to-stretch-an-image-to-the-screen-width-while-maintaining-aspect-rat/2999707#2999707)

```
package com.yourpackage.widgets;

import android.content.Context;
import android.util.AttributeSet;
import android.widget.ImageView;

public class AspectRatioImageView extends ImageView {

    public AspectRatioImageView(Context context) {
        super(context);
    }

    public AspectRatioImageView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public AspectRatioImageView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        int width = MeasureSpec.getSize(widthMeasureSpec);
        int height = width * getDrawable().getIntrinsicHeight() / getDrawable().getIntrinsicWidth();
        setMeasuredDimension(width, height);
    }
} 
```

现在在 XML 中使用它：

```
<com.yourpackage.widgets.AspectRatioImageView android:layout_centerHorizontal="true"
    android:src="@drawable/yourdrawable" android:id="@+id/image"
    android:layout_alignParentTop="true" android:layout_height="wrap_content"
    android:layout_width="match_parent" android:adjustViewBounds="true" /> 
```

玩得开心！

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-08T05:53:25.800

```
ImageView mImageView; // This is the ImageView to change

// Use this in onWindowFocusChanged so that the ImageView is fully loaded, or the dimensions will end up 0.
public void onWindowFocusChanged(boolean hasFocus) 
{
    super.onWindowFocusChanged(hasFocus);

    // Abstracting out the process where you get the image from the internet
    Bitmap loadedImage = getImageFromInternet (url);

    // Gets the width you want it to be
    intendedWidth = mImageView.getWidth();

    // Gets the downloaded image dimensions
    int originalWidth = loadedImage.getWidth();
    int originalHeight = loadedImage.getHeight();

    // Calculates the new dimensions
    float scale = (float) intendedWidth / originalWidth;
    int newHeight = (int) Math.round(originalHeight * scale);

    // Resizes mImageView. Change "FrameLayout" to whatever layout mImageView is located in.
    mImageView.setLayoutParams(new FrameLayout.LayoutParams(
            FrameLayout.LayoutParams.WRAP_CONTENT,
            FrameLayout.LayoutParams.WRAP_CONTENT));
    mImageView.getLayoutParams().width = intendedWidth;
    mImageView.getLayoutParams().height = newHeight;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-26T09:36:19.193

我更喜欢 Agarwal 的回答并进行了一些修改，因为它是可重复的：

```
package com.yourpackage.widgets;

import android.content.Context;
import android.graphics.drawable.Drawable;
import android.support.v7.widget.AppCompatImageView;
import android.util.AttributeSet;
import android.view.ViewGroup;

public class AspectRatioImageView extends AppCompatImageView {

    public AspectRatioImageView(Context context) 
    {       
        super(context);
        this.setScaleType(ScaleType.FIT_XY);
    }

    public AspectRatioImageView(Context context, AttributeSet attrs) {
        super(context, attrs);
        this.setScaleType(ScaleType.FIT_XY);
    }

    public AspectRatioImageView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        this.setScaleType(ScaleType.FIT_XY);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) 
    {
        Drawable d = getDrawable();

        if (d != null && d.getIntrinsicHeight() > 0)
        {
            int width = getLayoutParams().width;
            int height = getLayoutParams().height;

            // تو این حالت مبنای محاسبات رو بر اساس طول در نظر می گیرم
            if (height == ViewGroup.LayoutParams.WRAP_CONTENT || (width > 0 &&  width < 10000))
            {
                if (width <= 0);
                width = MeasureSpec.getSize(widthMeasureSpec);

                if (width > 0)
                    height = width * d.getIntrinsicHeight() / d.getIntrinsicWidth();

                // ارتفاع نباید از بیشینه ارتفاع بیشتر باشه
                if (height > getMaxHeight()) {
                    height = getMaxHeight();
                    width = height * d.getIntrinsicWidth() / d.getIntrinsicHeight();
                }

            }
            else if (width == ViewGroup.LayoutParams.WRAP_CONTENT  || (height > 0 &&  height < 10000))
            {
                // اگر مقداری برای ارتفاع مشخص نشده بود ارتفاع پدر رو در نظر می گیریم
                if (height <= 0)
                    height = MeasureSpec.getSize(heightMeasureSpec);

                // اگه ارتفاع مشخص بود که می تونیم طول رو بر اساسش حساب کنیم
                if (height > 0)
                    width = height * d.getIntrinsicWidth() / d.getIntrinsicHeight();

                // طول نباید از بیشینه طول بیشتر باشه
                if (width > getMaxWidth()) {
                    width = getMaxWidth();
                    height = width * d.getIntrinsicHeight() / d.getIntrinsicWidth();
                }
            }

            // اگه محاسبات موفقیت آمیز بود
            if (width > 0 && height > 0)
                setMeasuredDimension(width, height);
                // در غیر اینصورت همه چی رو می سپریم به خود ایمیج ویو
            else
                super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        }
        else
            super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    }
} 
```

现在在 XML 中使用它：

```
<com.yourpackage.widgets.AspectRatioImageView 
android:src="@drawable/yourdrawable"
android:layout_height="wrap_content"
android:layout_width="match_parent"/> 
```

# abap - 在没有循环的情况下检查记录是否存在于 itab 中的方法？

> ID：12400115
> 
> 赞同：9
> 
> 时间：2012-09-13T05:45:25.100
> 
> 标签：abap

是否有捷径，或者我应该在桌子上循环并检查？

我的意思是我正在使用一个内部表，我想检查一个值是否包含在内部表的一个字段中，我不想循环表来查找该值。是否可以？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-13T07:33:59.823

要在不执行循环或将值传输到工作区的情况下检查特定值，可以使用`READ`带有添加的语句，`TRANSPORTING NO FIELDS`如下所示：

```
READ TABLE itab WITH KEY FIELD = 'X' TRANSPORTING NO FIELDS.
IF sy-subrc = 0.
  "Read was successful.
ENDIF. 
```

**更新**：从 740 版开始，ABAP 包含[此博客文章](https://blogs.sap.com/2013/06/22/abap-news-for-release-740-new-internal-table-functions/)`LINE_EXISTS`中描述的谓词函数。

它是一个内置函数，您可以将表表达式传递给它。使用上面的例子：

```
IF line_exists( itab[ field = 'X' ] ).
  "Do stuff
ENDIF. 
```

该谓词中表表达式的完整语法请参见此处：[https ://help.sap.com/doc/abapdocu_750_index_htm/7.50/en-US/abentable_expressions.htm](https://help.sap.com/doc/abapdocu_750_index_htm/7.50/en-US/abentable_expressions.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T06:55:36.127

塞拉姆，

如果你打算在你的算法中使用循环，那么你可以使用这样的东西：

```
LOOP ITAB WHERE FIELD = 'X'.

"code sample

ENDLOOP. 
```

如果您不打算在代码中使用循环，那么我认为没有特定的方法可以检查 itab 中的特定值。

希望它有帮助。

塔尔哈

# ruby-on-rails - Ruby on Rails 教程 - 5.26 - Sublime Text“无法保存”新文件“spec/support/utilities.rb”

> ID：12400117
> 
> 赞同：6
> 
> 时间：2012-09-13T05:45:27.983
> 
> 标签：ruby-on-rails, ruby

*在遵循 Michael Hartl 的Ruby on Rails 教程*时，我正在使用 Sublime Text 2 。

我所指的教程的具体部分可以在[http://ruby.railstutorial.org/book/ruby-on-rails-tutorial](http://ruby.railstutorial.org/book/ruby-on-rails-tutorial) (ctrl+F "Listing 5.26") 找到。

我能够创建规范/支持文件。但是，在尝试创建 spec/support/utilities.rb 文件时，我收到消息“无法保存 ~/rails_projects/sample_app/spec/support/utilities.rb”。

有谁知道这可能是为什么？

Sublime Text 论坛上的某个人似乎遇到了完全相同的问题：[http ://www.sublimetext.com/forum/viewtopic.php?f=3&t=8570&p=36922#p36922](http://www.sublimetext.com/forum/viewtopic.php?f=3&t=8570&p=36922#p36922)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-26T17:24:29.710

这个问题听起来像是文件夹权限或所有权不正确的结果。更改目录 ( `cd`)，使您位于创建 .rb 文件的文件夹之外，然后键入：

```
ls -l 
```

此终端命令列出附加到该目录中所有文件/文件夹的权限。如果“root”被列为文件夹所有者，请键入以下内容更改其所有者：

```
sudo chown YOUR_COMP_USER_NAME FOLDER_NAME/ 
```

您现在应该能够从该文件夹中保存文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T09:01:54.967

要诊断这个问题，首先要确定它是否是 Sublime 或您的文件系统中的问题：

*   该文件是否已经存在？尝试在您的文件系统上查找它（不使用 Sublime）。

*   验证您是否有权写入该文件。在命令行上使用“ls -la”来显示文件权限。

*   您是否能够使用任何不同的编辑器（例如 TextMate 或记事本）创建和/或保存该文件？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T08:42:03.633

以下 sublime 插件修复了`Unable to save...`错误 [https://gist.github.com/3779601](https://gist.github.com/3779601)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T19:31:19.537

文件夹 spec/support 不存在，并且 sublime 不会创建丢失的文件夹，因此会出错。

你只需要创建 spec/support 文件夹，然后 sublime 就会保存文件。

我还强烈建议安装 AdvancedNewFile 插件[（感谢 Jeffrey Way 和 NetTuts+ 的视频）](https://tutsplus.com/lesson/lightning-fast-folder-and-file-creation/)，您可以直接从 Package Control 中获取。如果需要，它会创建文件、父文件夹，如果您尝试创建一个已经存在的文件，它会打开它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-25T21:30:36.423

所以@knice 几乎得到了它，当我在小牛上开始我的第一个 Rails 项目时，我遇到了同样的问题。

如前所述，如果您运行 ls -l 您将看到列出的文件夹/文件及其权限

我通过从我的项目目录外部使用以下命令递归更改所有权解决了这个问题

```
sudo chown -Rv <your_username> <your_path_and_foldername> 
```

例如，如果你在终端的文件夹中，你应该`cd ..`然后

```
sudo chown -Rv username ruby_proj/ 
```

这`-R`是递归的意思，它将适用于您指定的文件夹中包含的所有文件和文件夹，并且 v 之后只会产生详细的输出，向您显示已更改的文件夹和文件权限。

希望对其他人有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-22T19:19:12.263

如果您尝试在当前不存在的目录中创建文件，则可能会发生这种情况。例如。我无法保存

~/rails_projects/sample_app/app/views/shared/_error_messages.html.erb

通过终端的“subl”命令，因为我缺少 /shared/ 文件夹。希望有帮助。

# ios - 从 UIViewController 修改并重绘另一个 UIView

> ID：12400119
> 
> 赞同：0
> 
> 时间：2012-09-13T05:45:34.573
> 
> 标签：ios

我的 iOS 应用程序中存在从子类 UIView 到其父 UIViewController 的流程问题。

基本上，我有一个叫做偏好的笔尖。它包含两个滑块、两个标签和另一个 UIView，它将显示由两个滚动条（Stroke 和 opacity）指定的形状。通过将 UIView 的自定义类设置为我们将调用 subView 的单独 UIView，我成功地将子类 ui 绘制到屏幕上。我有滚动条的设置器/获取器，它们打印出它们的值。我如何让 uiview 类（指向 ui nib 对象）更新和重绘，因为它没有在父首选项类中引用？我试过这样的语法：

[code] IBOutlet SubClassUIView *subclassUI [/code]

没有效果。似乎最好将自定义类指向 UIView。

任何建议和意见将不胜感激。

TL；DR 无法从“父”uiviewcontroller 修改子类 uiview

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:04:25.010

对不起各位，我想通了。

除了传入一个与 IBOutlet 共享相同类型的自定义类（如 UIView），

必须有一个链接将 .xib 中的每个对象引用到其父对象。在这种情况下，父 UIViewController 需要从自定义类 ui 到 IBOutlet UI 的引用。从那里，从通用和无聊的 UIView 到自定义类的独特方法的一些简单转换可以形成一个完整的流程。

# wcf - 无法通过 Safari 使用 Kerberos 约束委派通过 Web 应用程序访问后端 WCF 服务

> ID：12400127
> 
> 赞同：0
> 
> 时间：2012-09-13T05:46:37.997
> 
> 标签：wcf, safari, kerberos

我有一个场景，其中托管在 IIS 7/Windows 2008 中的 ASP.NET MVC 3 Web 应用程序正在从另一台服务器访问 WCF Web 服务，该服务器也托管在 IIS/Windows 2008 中。KCD 是在两台服务器之间设置的，我有必要的也设置了 SPN。

我已经确认这在 IE 中工作。使用 NetMon，我还确认 KCD 在后端工作。我的 Web 应用程序在机器帐户（网络服务）下运行，并且为此机器帐户相应地设置了 SPN。问题是当我在 Windows 和 Mac OS X (Lion) 机器上使用**Safari**时，我收到 401 Unauthorized 错误：

**HTTP 请求未经客户端身份验证方案“协商”的授权。从服务器收到的身份验证标头是“协商，NTLM”。**

查看 NetMon，它失败了，因为对 WCF Web 服务的请求正在回退到 NTLM。

请注意，Windows 和 Mac 机器都是我们域的一部分，并且我在两台机器上都使用相同的 Windows 凭据。

我知道 Safari 支持 Kerberos 身份验证，但是从我的 Web 应用程序委派到 WCF 服务时似乎存在问题。是 Safari 还是 WCF 的问题？

提前致谢！

# 更新：

在 Mac 上的 Safari 中，当我第一次访问 Web 应用程序时，我可以在 Wireshark 和 NetMon 中看到通过 HTTP 请求传递的有效 Kerberos 令牌（我没有收到 401 Unauthorized 错误）。但是当我的 Web 应用程序尝试访问后端 Web 服务时，我可以在那个特定的 HTTP 请求中看到正在传递的令牌现在是一个 NTLM 令牌。

我使用带有 TransportCredentialOnly 的 basicHttpBinding 作为安全模式——我还在 web.config 中指定了后端 Web 服务端点的 SPN 身份（后端 Web 服务服务器的 HTTP/FQDN）。Windows Auth 当然在两个 IIS 站点上启用，“使用内核模式”打开，并且在两个站点的 appHost.config 上将 useAppPoolCredentials 设置为 true。同样，这仅适用于 Mac 上的 Safari，Firefox 和 Chrome 都可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T03:02:26.520

查看 Wireshark 跟踪，似乎 Safari 正在请求不可转发的 Kerberos 票证。由于此标志，Kerberos 票证不会转发/委派到下一跃点，导致身份验证回退到 NTLM 并失败。

与 IE、Firefox 和 Chrome 请求的 TGS 请求相比，它们都设置了可转发标志。

我还尝试在 Mac OS X 中执行 klist -F 来检索可转发的票证，但 Safari 仍会请求不具有可转发标志的单独票证。

这让我得出结论，Mac 上的 Safari**不**支持委派。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T13:28:24.477

1.  在 Wireshark 中检查 Safari 是否发送可委托/可转发的票证。
2.  您可以直接访问后端服务吗？是否开启了凭证委托，我猜票是不可委托的？Safari 必须要求这样做。Firefox 和 IE 可以。传递的 NTLM 令牌是来自您的服务器的令牌。NTLM 中没有委派支持。目标主机有问题。

# java - cloudsearch API java上传

> ID：12400129
> 
> 赞同：0
> 
> 时间：2012-09-13T05:46:49.363
> 
> 标签：java, api, upload, amazon-web-services, amazon-cloudsearch

'你好 ！我想在已经创建的 cloudsearch 域上上传数据。我已经通过使用带有 hadoop 的 mapreduce 作业来处理数据，以创建 JSON 格式的字符串。

我找不到如何将字符串直接上传到 Amazon Cloud Search 以将数据导入搜索域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T19:43:58.823

您将文档发布到文档搜索端点。（可以在您的域的 AWS 控制台仪表板中找到搜索终端节点）。

您可以使用 Amazon 提供的命令行工具或使用他们的 java API、使用 curl 或仅使用您喜欢的语言编写代码来发布。还有 boto，它是一个用于 aws 的 python 库。

详细信息在这里[http://aws.amazon.com/cloudsearch/faqs/#How_do_I_upload_documents_to_my_search_domain](http://aws.amazon.com/cloudsearch/faqs/#How_do_I_upload_documents_to_my_search_domain)

# list - 在恒定时间内插入/删除双向链表 O(1)

> ID：12400131
> 
> 赞同：0
> 
> 时间：2012-09-13T05:47:12.980
> 
> 标签：list, constants

a）我在stackoverflow中看到了很多这个问题的例子，但我仍然无法理解它在调用insertAfter（Node n，Object o）等函数时如何知道它指的是哪个节点。如果我们说在节点 2 之后插入，linkedlist 怎么知道哪个节点是节点 2？

b）在stackoverflow的前几篇文章中，据说有一个指向要在之后或之前插入的节点的指针，这就是我们得到恒定时间操作的原因。这是否意味着，就像我们必须在链表中头尾一样，我们也有一个指向每个节点的指针？

非常感谢帮助理解这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:31:45.993

如果使用 key 完成删除，那么您的观点是有效的，因为我们不知道要删除的元素的位置，因此在列表中找到 key 使其时间与队列长度成线性关系。但是在写成恒定时间的地方是按地址删除。因此，人们可能总是移动到该地址并在恒定时间内删除该节点。

注意：这对于单链表是不可能的。

# ios - iphone 应用程序中的 Google 帐户自动登录

> ID：12400134
> 
> 赞同：0
> 
> 时间：2012-09-13T05:47:38.790
> 
> 标签：ios, account, autologin

我正在 iOS 上创建一个应用程序，该应用程序需要用户使用他们的 google 帐户登录，但它需要在以后记住用户而无需任何用户输入。例如，如果一个人退出并重新打开应用程序，它会记住他们的用户名和密码（或已经验证）并将用户直接发送到应用程序。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-04T22:27:56.677

```
[[GIDSignIn sharedInstance] signInSilently]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T02:14:42.683

Google 将 OAuth 用于此类功能。这是[他们](https://developers.google.com/accounts/docs/OAuth2InstalledApp)关于如何做到这一点的指南。

# sql - SQL 多部分标识符错误

> ID：12400138
> 
> 赞同：0
> 
> 时间：2012-09-13T05:47:53.113
> 
> 标签：sql, sql-server, sql-server-2008

这是我的简单 sql 代码。当执行它的抛出和错误时。

**无法绑定多部分标识符“product_hscodes.hscode”。**

```
select DISTINCT mi.*,csq.contract_code
  from master_items mi
  join contract_shipment_qty csq on csq.item_code = mi.code
  join contract c on c.code = csq.contract_code
  join master_item_products mp on mp.master_item = mi.id
  join hscode h on h.code = product_hscodes.hscode
 where csq.shipment_id = 6
   and csq.contract_code = '046V-12-A04-05'
   and mi.code = 'M165'
   and h.code = '12345' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:55:27.423

你还没有加入`product_hscodes`表。

```
from master_items mi
join contract_shipment_qty csq on csq.item_code = mi.code
join contract c on c.code = csq.contract_code
join master_item_products mp on mp.master_item = mi.id

join product_hscodes 
     on product_hscodes.fk = <primary table>.pk //<<Have you joined this table?

join hscode h on h.code = product_hscodes.hscode 
```

# java - 如何编写代码/工具 eclipse RCP 插件 GUI 测试

> ID：12400139
> 
> 赞同：0
> 
> 时间：2012-09-13T05:48:10.830
> 
> 标签：java, eclipse, testing, eclipse-rcp

我正在开发一个 Eclipse RCP 插件，我已经完成了代码和一些单元测试，现在我想提供 GUI 测试，你对我使用的开放工具/库有什么想法吗？是否有可能我可以将此插件安装到 Eclipse 并使用代码执行 GUI 测试以像最终用户一样进行模拟？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:47:55.343

SWTBot 有助于进行 GUI 测试。我们实际上在 SWTBot 之上构建了一个框架来编写 GUI 测试代码。您还可以查看 Eclipse TPTP 来记录 GUI 测试，但它有其局限性。

[http://www.eclipse.org/tptp/home/project_info/general/whatisTPTP.php](http://www.eclipse.org/tptp/home/project_info/general/whatisTPTP.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T12:03:09.753

我会使用[SWTBot](http://swtbot.com/)来完成这项任务。它将帮助您以简单的方式选择小部件。您可以在每个小部件上模拟用户交互。SWTBot 作为 Eclipse 插件提供。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T01:38:11.403

Windowtester 是来自谷歌的强大工具，它通过自动化 GUI 测试过程消除了手动创建测试用例来测试 GUI 的需要。生成的测试往往是 SWTBot 或类似于 SWTBot，并且易于编辑和自动化测试。[https://developers.google.com/java-dev-tools/wintester/html/](https://developers.google.com/java-dev-tools/wintester/html/)

# java - 无法从 ant 脚本调用 wsdl 代码生成器

> ID：12400149
> 
> 赞同：1
> 
> 时间：2012-09-13T05:48:56.337
> 
> 标签：java, ant, wsdl, axis2

我有这个 ant 脚本要运行：

```
 <?xml version="1.0" encoding="utf-8"?>
    <project name="WebserviceClient">
        <property file="myaxis.properties"/>
        <property name="build.dir" value="./src"/>
        <path id="axis2.classpath">
            <fileset dir="lib">
                <include name="*/.jar"/>
            </fileset>
        </path>

        <target name="GenerateGCWebServiceClient" >
            <java classname="org.apache.axis2.wsdl.WSDL2Java" fork="true"  dir="${build.dir}">
                <classpath refid="axis2.classpath"/>
                <sysproperty key="log4j.configuration" value="log4j.properties"/>
                <arg value="-uri"/>
                <arg value="http://192.168.0.251:9081/Services/MyWebService.svc?wsdl"/>
                <arg value="-d"/>
                <arg value="adb"/>
                <arg value="-ETransfer-Encoding"/>
                <arg value="false"/>
                <arg value="-S"/>
                <arg value="."/>
                <arg value="-u"/>
                <arg value="-wv"/>
                <arg value="1.1"/>
                <arg value="-p"/>
                <arg value="com.sands.service"/>
                <arg value="-ns2p"/>

            </java>
        </target>

    </project> 
```

但它找不到`org.apache.axis2.wsdl.WSDL2Java`。这是堆栈跟踪：

```
> build.xml
property
property
path
GenerateGCWebServiceClient
java
java.lang.NoClassDefFoundError: org/apache/axis2/wsdl/WSDL2Java
Caused by: java.lang.ClassNotFoundException: org.apache.axis2.wsdl.WSDL2Java
    at java.net.URLClassLoader$1.run(URLClassLoader.java:200) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:51:52.500

您的脚本找不到所需的库文件，确切地说，它是`axis2-codegen-x.y.z.jar`. 在您的 ant 脚本中，您犯了一个错误，因为它找不到 *.jar 文件：

改变这一行：

```
 <include name="*/.jar"/> 
```

至 ：

```
<include name="*/*.jar"/> 
```

那么它应该可以工作。

# ios - 从后台播放音频时出错。音频队列错误 12985

> ID：12400151
> 
> 赞同：-2
> 
> 时间：2012-09-13T05:49:22.367
> 
> 标签：ios, avaudioplayer

> **可能重复：**
> [AudioQueueStart 失败 -12985](https://stackoverflow.com/questions/4349173/audioqueuestart-fail-12985)

之前有人问[过](https://stackoverflow.com/questions/4349173/audioqueuestart-fail-12985)这个问题，但我尝试实施建议的答案之一（没有被接受）并且没有得到任何运气。

我应该提到我已经在 pList 中设置了正确的背景模式。

基本上，我正在尝试在 didEnterRegion 中播放声音。这是我的代码：

```
- (void)locationManager:(CLLocationManager *)manager didEnterRegion:(CLRegion *)region
{
    NSLog(@"MapViewController - didEnterRegion");
    NSLog(@"MVC - didEnterRegion - region.radius = %f", region.radius);

    // code to get the url (removed for simplicity)

    AVAudioSession *audioSession = [AVAudioSession sharedInstance];

    [audioSession setCategory:AVAudioSessionCategoryPlayback error:nil];
    [audioSession setActive: YES error: nil];
    [[UIApplication sharedApplication] beginReceivingRemoteControlEvents];

    self.regionPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
    NSLog(@"self.regionPlayer.url = %@",self.regionPlayer.url);
    [self.regionPlayer play];   
} 
```

网址没问题，因为它会在前台播放。在控制台日志中似乎也可以：

```
Sep 12 22:33:47 unknown MLTM[4995] <Warning>: MVC - didEnterRegion - region.radius = 250.000000
Sep 12 22:33:47 unknown MLTM[4995] <Warning>: url = file://localhost/var/mobile/Applications/EFD6A583-5685-4D7C-BF8E-C8CFEA9E0D03/MLTM.app/party%20mix%207.caf
Sep 12 22:33:47 unknown MLTM[4995] <Warning>: self.regionPlayer.url = file://localhost/var/mobile/Applications/EFD6A583-5685-4D7C-BF8E-C8CFEA9E0D03/MLTM.app/party%20mix%207.caf
Sep 12 22:33:48 unknown Console[4179] <Notice>: TestFlight: Team Token is recognized
Sep 12 22:33:48 unknown mediaserverd[44] <Error>: 22:33:48.087 <AudioQueueServer> AudioQueue: Error -12985 from AudioSessionSetClientPlayState(4995) 
```

我假设最后一行是尝试播放音频时给出的错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T05:58:29.767

添加这个：

```
 register **UIBackgroundModes** in info.plist for background playing
 [[AVAudioSession sharedInstance] setDelegate: self];
 [[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryAmbient error: nil]; 
```

参考[play-mp3-files-with-iphone-sdk](https://stackoverflow.com/questions/1973902/play-mp3-files-with-iphone-sdk)链接

# c# - 如何对自动生成的 ObjectContext 进行子类化

> ID：12400152
> 
> 赞同：1
> 
> 时间：2012-09-13T05:49:23.043
> 
> 标签：c#, .net, entity-framework-4

我在 VS 2010 中使用 EF 4.3 首先生成了一个数据库 ObjectContext。然后我在 Windows.Forms 应用程序中使用了这个类（和相关类）。

这次想要使用相同的应用程序，对某些表单和一个附加表（以及一个 FK）进行少量添加来创建一个新应用程序。由于我想同时管理这两个项目，我为第二个应用程序创建了一个新的解决方案，它对必要的表单和类进行了子类化。

但是我不知道如何将这种技术用于我之前生成的 ObjectContext。如果我使用自动生成的新 ObjectContext 这将是一个新类，因此每当我应用更改时我都必须重新编译所有两个解决方案（我什至没有提到必要的程序集引用更改）。

手动创建上述 ObjectContext 的子类是不可能的我猜如果我不手动执行 csdl/mdl/ssdl 技巧。

我想避免在我的代码和 ObjectContext 之间创建一个接口类，因为需要进行更改并且没有时间来实现。

有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:13:16.273

您似乎误解了软件开发过程中的一些概念。这个：

> 由于我想同时管理这两个项目，我为第二个应用程序创建了一个新的解决方案，它继承了必要的表单和类

是一个非常糟糕的主意。

事实上，新功能会将您带到软件的新*版本*。
不要继承任何东西。只需为您以前的项目版本创建一个开发分支（在源代码控制方面），并继续开发新版本，扩展功能。

这将允许您获得两个完全独立的软件版本，您将同时支持它们。

# elasticsearch - ElasticSearch 删除查询 - 使用术语和范围进行过滤

> ID：12400153
> 
> 赞同：7
> 
> 时间：2012-09-13T05:49:30.870
> 
> 标签：elasticsearch

我尝试使用以下查询从[ElasticSearch](http://www.elasticsearch.org/)索引中删除数据。

```
{
    "filter": {
        "and": [
            {
                "range": {
                    "Time": {
                        "from": "20120101T000000",
                        "to": "20120331T000000"
                    }
                }
            },
            {
                "term": {
                    "Source": 1
                }
            }
        ]
    }
} 
```

我已尝试根据此查询删除文档。当我针对索引运行此查询时，它返回的结果很好。但是当我尝试对索引运行删除命令时，什么也没有发生。

我不确定我是否构建了错误的查询或其他什么。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-13T07:47:29.500

您仅使用过滤器，而[按查询删除 API](http://www.elasticsearch.org/guide/reference/api/delete-by-query.html)可能需要查询。您可以使用如下[过滤查询](http://www.elasticsearch.org/guide/reference/query-dsl/filtered-query.html)将过滤器转换为查询：

```
{
    "filtered" : {
        "query" : {
            "match_all" : {}
        },
        "filter": {
            "and": [
                {
                    "range": {
                        "Time": {
                            "from": "20120101T000000",
                            "to": "20120331T000000"
                        }
                    }
                },
                {
                    "term": {
                        "Source": 1
                    }
                }
            ]
        }
    }
} 
```

否则，您可以使用带有两个必须子句的[布尔查询](http://www.elasticsearch.org/guide/reference/query-dsl/bool-query.html)将过滤器转换为查询，这样您就不再需要过滤查询了。无论如何，我想过滤器方法更好，因为过滤器更快。

# php - 比较日与日并在 PHP 中查找下一个日期

> ID：12400154
> 
> 赞同：1
> 
> 时间：2012-09-13T05:49:42.727
> 
> 标签：php, date, datetime, if-statement

我正在使用 php 中的日期，我有点难过

这是我的代码：

```
$day = 'Thursday';
$i = 0;
$o_date = new DateTime("2012-09-12 20:56:43 +18 hours");
$date = date_format($o_date, 'l');
$full = date_format($o_date, 'd-m-Y');
if($day!=$date) {
    $date = new DateTime($date . " +1 days");
    $i++;
}
$order_day = new DateTime($full . " +".$i." days");$order_day = date_format($order_day, 'D, d M');
return $order_day; 
```

这就是我想要它做的：

1）我有一个字符串格式的一天（例如星期四）

2）我有一个订单日期（例如`2012-09-12 20:56:43`）

我想得到那个日期并将这一天变成一个字符串（例如`date_format($o_date, 'l');`，这样它将返回`Wednesday`，然后我想计算订单日期之后的下一个星期四还有多少天，我已经为此构建了一个 if 循环。然后我想要获取原始日期并添加`$i`累积的天数，然后以日期格式返回日期（例如`Thursday, 13 September`，但由于某种原因我的代码无法正常工作。有人可以看到我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T06:09:12.887

而不是一个循环，你为什么不使用数字天并计算：

```
$day = 'Thursday';
$day_names = array('Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday');
$day_num = array_search($day, $day_names);
$o_date = new DateTime("2012-09-12 20:56:43 +18 hours");
$o_day_num = $o_date->format('w');
$day_diff = ($day_num - $o_day_num) % 7;
if ($day_diff == 0) { $day_diff = 7; }
$order_day = clone $o_date;
$order_day->add(new DateInterval("P".$day_diff."D")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T06:19:34.300

所以我实际上更喜欢@Barmar 的想法，但这就是我想出的......您的原始代码中存在许多问题，包括初始日期的格式，以及您每次都在创建一个新对象的事实而不是使用同一个。

如果您选择使用循环，我不确定您是否应该...试试这个：

```
<?php
$day = 'Thursday';
$i = 0;

// Order Date
$o_date = new DateTime("2012-09-12 20:56:43 +18");
$date = $o_date->format('l');

while($day!==$date) {
  $date = $o_date->add(new DateInterval('P1D'))->format('l');
  $i++;
}
$order_day = $o_date->format('D, d M'); 
```

# python - 扩展 Django Admin tabular.html 自定义复选框操作

> ID：12400155
> 
> 赞同：0
> 
> 时间：2012-09-13T05:49:44.177
> 
> 标签：python, django

我有两个表 Defendant 和 Defendant_Potential

```
class Defendant(models.Model):
    fullname         = models.CharField(max_length = 100, null = False,)
    fname            = models.CharField(max_length = 100, verbose_name = u'First Name', blank = True, null = True,)
    midname          = models.CharField(max_length = 100, verbose_name = u'Middle Name', blank = True, null = True,)
    lname            = models.CharField(max_length = 50, verbose_name = u'Last Name', null = True, blank = True,)
    marked           = models.CharField(max_length = 50, verbose_name = u'Check box mark', null = True, blank = True,)
class Defendant_Potential(models.Model):
    defendant    = models.ForeignKey('Defendant', related_name = "Defendant_defendantID",)
    midname      = models.CharField(max_length = 100, blank = True, null = True, default = None)
    address      = models.CharField(max_length = 100, null = False,)
    city         = models.CharField(max_length = 50, null = False,)
    state        = models.CharField(max_length = 5, null = False,)
    zip      = models.CharField(max_length = 50, null = False,) 
```

及其管理模型如：

```
class Defendant_Potential_Individual_Inline(admin.TabularInline):
    model = Defendant_Potential

    formset = NoDeleteAdminInlineFormSet
    readonly_fields = ('midname', 'address')
    extra = 0
    template = "admin/cdradmin/defendant/edit_inline/tabular.html"

class DefendantAdmin(admin.ModelAdmin):
    list_display = ('fullname', 'fname','midname','lname')

    inlines = [Defendant_Potential_Individual_Inline, ] 
```

在 tabular.html 我有一个自定义复选框

```
<td><input type="checkbox"  name="defendant_potential_checked" data-defendant_id="{{ inline_admin_form.original.defendant_id }}" value="{{ inline_admin_form.original.id }}"></input></td> 
```

我的Qustion是每当检查复选框时，“被告”表获得更新标记的字段（这应该发生OLNY，我们单击canse_from.html上的提交按钮。

我对 save_model、save_formset 等进行了一些研究但我没有得到任何人可以帮助我做到这一点的正确解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T07:09:27.633

假设您必须模型：

```
class Hive(models.Model):
    name = models.CharField(max_length=100)
    marker = models.BooleanField(default=False)

class Bee(models.Model):
    hive = models.ForeignKey(Hive)
    name = models.CharField(max_length=100) 
```

那么您的管理员可能如下所示：

```
class BeeForm(forms.ModelForm):
    check = forms.BooleanField(label="check", required=False)
    class Meta:
        model = Bee

class BeeInline(admin.TabularInline):
    form = BeeForm
    model = Bee

class HiveAdmin(admin.ModelAdmin):
    inlines = (BeeInline,)
    def save_formset(self, request, form, formset, change):
        for bee_form in formset:
            if bee_form.cleaned_data.get('check') == True:
                form.instance.marker = True
                form.instance.save()
        super(HiveAdmin, self).save_formset(request, form, formset, change)

admin.site.register(Hive, HiveAdmin) 
```

# java - cloudbees & ESAPI - 我如何指向 ESAPI 目录？

> ID：12400162
> 
> 赞同：0
> 
> 时间：2012-09-13T05:50:24.977
> 
> 标签：java, resources, directory, cloudbees, esapi

我正在为我的项目使用 ESAPI，并添加了 ESAPI 配置目录，`src/main/resources`以便将其复制到我的 WAR 文件中（我从 cloudbees 下载了 WAR，我可以看到它已放在`WEB-INF/classes/esapi/`目录中）

在本地，我只是指向目录所在的位置，一切正常，但在 cloudbees 上它对我不起作用。

为了访问它的属性，ESAPI 项目尝试了各种各样的东西，包括检查`org.owasp.esapi.resources`系统属性，所以我添加了以下代码`cloudbees-web.xml`：

```
<sysprop name="org.owasp.esapi.resources" value="WEB-INF/classes/esapi/" /> 
```

我可以看到由于日志中的以下错误而找到了系统属性**值：**

```
Not found in 'org.owasp.esapi.resources' directory or file not readable: /var/genapp/apps/akld3873/WEB-INF/classes/esapi/ESAPI.properties 
```

所以它会找到系统属性（因为路径就像我指定的那样），但是当它在其中查找实际目录和文件时，我猜该目录不存在或不可读。

我需要把它移到别的地方吗？也许在 WEB-INF 目录里面？设置不对吗？我读过其他人通过为这个目录构建一个 JAR 解决了类似的问题，但这似乎不是一个好的解决方案，必须有一个简单的设置适用于 cloudbees。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:07:46.957

为 ESAPI lib 设计需要对配置进行目录访问的设计不是很灵活。一个通用选项是使用[ServletContext.getRealPath](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getRealPath%28java.lang.String%29)来解析该目录的绝对文件系统路径并将其传递给 ESAPI。

另一种选择是让您有一些初始化代码来复制临时目录中的 WEB-INF/classes/esapi 内容（使用 java.io.temp 系统属性指向您的应用程序当前配置的临时目录）并将 ESAPI lib 指向这条路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T08:58:33.277

好的，经过搜索和测试，我终于弄明白了。Cloudbees 将您的 Web 应用程序部署到以下目录：

```
staxcat/install/webapp.war/ 
```

请注意，这是一个相对路径，附加了此路径的前缀，它看起来像这样：

```
/var/genapp/apps/xxxxxxxx/staxcat/install/webapp.war/WEB-INF/esapi/ESAPI.properties 
```

所以，为了让 ESAPI 工作，我必须在 cloudbees-web.xml 中设置以下内容：

```
<sysprop name="org.owasp.esapi.resources" value="staxcat/install/webapp.war/WEB-INF/esapi" /> 
```

如果在您的项目中它位于以下位置，这将使 ESAPI 能够找到该目录：

```
src/main/webapp/WEB-INF/esapi 
```

你应该得到以下日志行：

```
Found in 'org.owasp.esapi.resources' directory: /var/genapp/apps/xxxxxxxxx/staxcat/install/webapp.war/WEB-INF/esapi/ESAPI.properties 
```

# c++ - 如何在 windows 下的 firebreath 中加载库？

> ID：12400164
> 
> 赞同：2
> 
> 时间：2012-09-13T05:50:33.820
> 
> 标签：c++, winapi, firebreath

我正在尝试在 firebreath 插件中使用 user32.dll 中的一些函数，但我终生无法弄清楚如何将库链接到我的项目。我尝试添加 find_library(USER32_LIBRARY user32) 和一些变体，如 user32.dll user32.lib，添加到 system32 的路径等。它一直说 USER32_LIBRARY 已定义但设置为 NOT_FOUND。

我还没有找到任何关于如何从 system32 文件夹链接库的好例子，有人有例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T18:31:57.367

正如谢尔盖所​​说，默认情况下 user32.lib 将在那里。

如果您需要任何其他库，您可以使用 target_link_library 命令添加库，如 firebreath.org 上的[使用库](http://www.firebreath.org/display/documentation/Using+Libraries)页面中所述

```
target_link_libraries(${PROJECT_NAME} user32.lib) 
```

同样，这对于 user32.lib 不是必需的，但可能对于其他库是必需的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T06:31:16.447

事实上，如果您正确安装它，您的 Microsoft Visual Studio 应该默认链接 user32.lib。

与 cmake find_library() 无关。CMake 是跨平台的 makefile 生成器，而您的问题是特定于 Windows 的。

更好的开始方式是[MSDN 站点](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682589%28v=vs.85%29.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T07:02:11.793

您可以手动修改项目属性以添加库名称和头文件路径。我已经修改了我的项目以添加 portaudio（第三方工具）。

# c# - 在 C# 中处理现有的和打开的新表单

> ID：12400165
> 
> 赞同：-1
> 
> 时间：2012-09-13T05:50:34.817
> 
> 标签：c#

我的程序中有两种形式。第一个是登录表单，另一个是主页表单。当我单击登录表单上的“输入”按钮时，它应该关闭或处理登录表单，然后打开新的主表单。我无法做到这一点。请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T06:09:32.967

你不能。新表单的所有者是“登录表单”。一旦关闭，任何其他子窗体也将关闭。

我将首先创建您正在处理的表单，例如“主表单”，将其隐藏，然后使用“主表单”作为其父表单打开“登录表单”。

只需在“家庭表单”的构造函数中执行此操作即可。登录完成后，将其关闭并显示“主页表单”。

例如：

```
public HomeForm()
{
    InitializeComponent();
    this.hide();

    var login = new LoginForm();
    login.ShowDialog();

    this.Show();
} 
```

# directx - directx - 纹理渲染结果不正确

> ID：12400167
> 
> 赞同：1
> 
> 时间：2012-09-13T05:50:49.170
> 
> 标签：directx, directx-9

**案例1**：
我通过创建纹理

```
 D3DXCreateTexture(device, width, height, 0, D3DUSAGE_DYNAMIC, D3DFMT_A8R8G8B8, D3DPOOL_DEFAULT, &texture) 
```

并用白色更新纹理。

```
 D3DLOCKED_RECT lr;
    HRESULT hr = texture->LockRect(0, &lr, NULL, 0);
    ConvertRGB2RGBA(width, height, pixels, stride, (unsigned char*)(lr.pBits), lr.Pitch);
    texture->UnlockRect(0); 
```

渲染结果显示为：

![在此处输入图像描述](../Images/113a48054844efd78308f895f663dc83.png) 我想要的是表面上的纯白色。

*所有顶点的z值等于0.0f。*

**案例2**：
如果我创建纹理

```
 D3DXCreateTextureFromFile(device, "e:\\test.bmp",  &texture); 
```

并且不更新纹理，它显示绝对正确。

**case 3**：
如果我从文件创建纹理为**case 2**，并将纹理更新为**case 1**，结果不正确，test.bmp 内容略有保留。

**结论：**
更新纹理一定有问题。怎么了？？？

* * *

**解决了！！！**
将级别参数更改为1，然后它就可以工作了。

```
 D3DXCreateTexture(device, width, height, 1, D3DUSAGE_DYNAMIC, D3DFMT_A8R8G8B8, D3DPOOL_DEFAULT, &texture) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:03:23.540

恭喜。当 D3DXCreateTexture 的 mipmap 级别参数设置为 0 时，将创建完整的 mipmaped 纹理。如果你想使用 mipmap，你的函数 ConvertRGB2RGBA 不仅应该覆盖顶层纹理，还应该覆盖底层纹理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:13:36.227

将级别参数更改为1，然后它就可以工作了。

```
D3DXCreateTexture(device, width, height, 1, D3DUSAGE_DYNAMIC, D3DFMT_A8R8G8B8, D3DPOOL_DEFAULT, &texture) 
```

# jaxb - jaxb 解组日期

> ID：12400173
> 
> 赞同：5
> 
> 时间：2012-09-13T05:51:46.030
> 
> 标签：jaxb, jaxb2

有什么简单的方法可以将日期解组为 Java 日期。

例如，假设我们有以下 xml

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<msg>
<type>SCH</type>
<msgName>SCHEvent</msgName>
<eventName>BST001</eventName>
<startDatetime>2012-09-12 11:00:00</startDatetime>
<endDatetime>2012-09-12 11:30:00</endDatetime>

</hl7msg> 
```

我想将这个 xml 解组到以下 POJO

```
@XmlRootElement(name = "msg")
public class SCHEvent {

Date startDatetime;
Date endDatetime;
----
} 
```

我尝试了上面的解组，我发现除了日期之外，所有其他属性都分配给了这个 pojo。我认为我们可以使用 XmlAdapter 解决此问题，但这需要创建额外的类。是否有任何简单的方法可以将此 xml 文本日期转换为 Java 日期？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T08:25:05.877

[](http://jcp.org/en/jsr/detail?id=222)**只要值与 XML Schema dateTime 格式匹配（参见： [http ://blog.bdoughan.com/2011/01/jaxb-and-datetime-properties.html），](http://blog.bdoughan.com/2011/01/jaxb-and-datetime-properties.html) [**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现就可以不`java.util.Date`支持。示例与此格式不匹配，因此您需要使用.`XmlAdapter``XmlAdapter`**

 ****例子`XmlAdapter`**

有关外观的示例，`XmlAdapter`请参阅我对类似 Stack Overflow 问题的回答：

*   [jaxb 解组时间戳](https://stackoverflow.com/questions/2519432/jaxb-unmarshal-timestamp/3181966#3181966)

**将`XmlAdapter`应用于所有实例`java.util.Date`**

如果您`@XmlJavaTypeAdapter`在包级别使用注释，那么它将应用于该包中该类型的所有字段/属性。

*   [http://blog.bdoughan.com/2012/02/jaxb-and-package-level-xmladapters.html](http://blog.bdoughan.com/2012/02/jaxb-and-package-level-xmladapters.html)
*   [http://blog.bdoughan.com/2011/05/jaxb-and-joda-time-dates-and-times.html](http://blog.bdoughan.com/2011/05/jaxb-and-joda-time-dates-and-times.html)

* * *

**JAXB 和容错**

在 JAXB (JSR-222) 专家组中，有很大比例的文档与其对应的 XML 不匹配，因此我们默认每次遇到错误时都不会失败。您可以通过执行以下操作来指定 a 来访问错误`ValidationEventHandler`以`Unmarshaller`查看错误。

***演示***

```
package forum12400173;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(SCHEvent.class);

        File xml = new File("src/forum12400173/input.xml");
        Unmarshaller unmarshaller = jc.createUnmarshaller();
        unmarshaller.setEventHandler(new ValidationEventHandler() {

            @Override
            public boolean handleEvent(ValidationEvent event) {
                event.getLinkedException().printStackTrace();
                return true;
            }

        });
        SCHEvent event = (SCHEvent)  unmarshaller.unmarshal(xml);
    }

} 
```

***输出 (JAXB-RI)***

```
java.lang.IllegalArgumentException: 2012-09-12 11:00:00
    at com.sun.org.apache.xerces.internal.jaxp.datatype.XMLGregorianCalendarImpl$Parser.parse(XMLGregorianCalendarImpl.java:2823)
    at com.sun.org.apache.xerces.internal.jaxp.datatype.XMLGregorianCalendarImpl.<init>(XMLGregorianCalendarImpl.java:435)
    at com.sun.org.apache.xerces.internal.jaxp.datatype.DatatypeFactoryImpl.newXMLGregorianCalendar(DatatypeFactoryImpl.java:536)
    at com.sun.xml.internal.bind.DatatypeConverterImpl._parseDateTime(DatatypeConverterImpl.java:355)
    at com.sun.xml.internal.bind.v2.model.impl.RuntimeBuiltinLeafInfoImpl$4.parse(RuntimeBuiltinLeafInfoImpl.java:273)
    at com.sun.xml.internal.bind.v2.model.impl.RuntimeBuiltinLeafInfoImpl$4.parse(RuntimeBuiltinLeafInfoImpl.java:271)
    at com.sun.xml.internal.bind.v2.runtime.reflect.TransducedAccessor$CompositeTransducedAccessorImpl.parse(TransducedAccessor.java:232)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.LeafPropertyLoader.text(LeafPropertyLoader.java:50)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext.text(UnmarshallingContext.java:499)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.SAXConnector.processText(SAXConnector.java:166)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.SAXConnector.endElement(SAXConnector.java:139)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(AbstractSAXParser.java:606)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(XMLDocumentFragmentScannerImpl.java:1742)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2900)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:607)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:116)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:489)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:835)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1210)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:568)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:203)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:175)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:157)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:162)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:171)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:189)
    at forum12400173.Demo.main(Demo.java:22)
java.lang.IllegalArgumentException: 2012-09-12 11:30:00
    at com.sun.org.apache.xerces.internal.jaxp.datatype.XMLGregorianCalendarImpl$Parser.parse(XMLGregorianCalendarImpl.java:2823)
    at com.sun.org.apache.xerces.internal.jaxp.datatype.XMLGregorianCalendarImpl.<init>(XMLGregorianCalendarImpl.java:435)
    at com.sun.org.apache.xerces.internal.jaxp.datatype.DatatypeFactoryImpl.newXMLGregorianCalendar(DatatypeFactoryImpl.java:536)
    at com.sun.xml.internal.bind.DatatypeConverterImpl._parseDateTime(DatatypeConverterImpl.java:355)
    at com.sun.xml.internal.bind.v2.model.impl.RuntimeBuiltinLeafInfoImpl$4.parse(RuntimeBuiltinLeafInfoImpl.java:273)
    at com.sun.xml.internal.bind.v2.model.impl.RuntimeBuiltinLeafInfoImpl$4.parse(RuntimeBuiltinLeafInfoImpl.java:271)
    at com.sun.xml.internal.bind.v2.runtime.reflect.TransducedAccessor$CompositeTransducedAccessorImpl.parse(TransducedAccessor.java:232)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.LeafPropertyLoader.text(LeafPropertyLoader.java:50)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext.text(UnmarshallingContext.java:499)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.SAXConnector.processText(SAXConnector.java:166)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.SAXConnector.endElement(SAXConnector.java:139)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(AbstractSAXParser.java:606)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(XMLDocumentFragmentScannerImpl.java:1742)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2900)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:607)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:116)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:489)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:835)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1210)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:568)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:203)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:175)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:157)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:162)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:171)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:189)
    at forum12400173.Demo.main(Demo.java:22) 
```**

# celery - 收到类型的未注册任务

> ID：12400178
> 
> 赞同：5
> 
> 时间：2012-09-13T05:52:16.943
> 
> 标签：celery, celery-task

我正在尝试运行内存中的任务。在工人上注册的任务

```
[2012-09-13 11:10:18,928: WARNING/PoolWorker-1] [u'B.run', u'M1.run', u'M11.run', u'M22.run', u'M23.run', u'M24.run', u'M25.run', u'M26.run', u'M4.run', u'celery.backend_cleanup', u'celery.chain', u'celery.chord', u'celery.chord_unlock', u'celery.chunks', u'celery.group', u'celery.map', u'celery.starmap', u'impmod.run', u'initializerNew.run'] 
```

但它仍然给出错误：

```
[2012-09-13 11:19:59,848: ERROR/MainProcess] Received unregistered task of type 'M24.run'.
The message has been ignored and discarded.

Did you remember to import the module containing this task?
Or maybe you are using relative imports?
Please see http://bit.ly/gLye1c for more information.

The full contents of the message body was:
{'retries': 0, 'task': 'M24.run', 'eta': None, 'args': [{'cnt': '3', 'ids': '0001-0004,0002-0004', 'NagID': 2, 'wgt': '3', 'ModID': 'M24', 'ProfileModuleID': 64, 'mhs': '1'}, 0], 'expires': None, 'callbacks': None, 'errbacks': None, 'kwargs': {}, 'id': 'ddf5f520-803b-4dc9-ad3b-a931d90950a6', 'utc': True} (394b)

Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/celery-3.0.4-py2.7.egg/celery/worker/consumer.py", line 410, in on_task_received
    strategies[name](message, body, message.ack_log_error)
KeyError: 'M24.run' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T04:39:29.360

你能附上启动芹菜的命令吗？看起来这个应用程序有不同的 sys.path，这就是 celery 应用程序无法导入“M24.run”任务的原因。

您还应该记住，Celery 需要在您的任务所在的位置设置模块名称。

类似的东西

```
CELERY_INCLUDE = [
    'M24',
] 
```

# android - 将字符串转换为 json 对象

> ID：12400181
> 
> 赞同：1
> 
> 时间：2012-09-13T05:52:28.977
> 
> 标签：android, json, servlets

我想从作为服务器中 servlet 响应的字符串创建 json 对象。

```
public class JSONParser {

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

// constructor
public JSONParser() {

}

    public JSONObject getJSONFromUrl(String url,String a) {

        ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();
        postParameters.add(new BasicNameValuePair("branchname", a));

        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(url);
            httppost.setEntity(new UrlEncodedFormEntity(postParameters));

            HttpResponse httpResponse = httpClient.execute(httppost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();          

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        return jObj;            
}} 
```

这是我的小服务程序..

```
public class AvailabilityResponse extends HttpServlet {

@Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException {

    PrintWriter out=response.getWriter();

        String br_id;
        br_id=request.getParameter("branchname");

    try{
                Class.forName("com.mysql.jdbc.Driver").newInstance();
                Connection con=DriverManager.getConnection("jdbc:mysql://localhost:8888  /atmlivedetails","root","root");  
        Statement st=con.createStatement();
        ResultSet rs=st.executeQuery("select atmbrno, atmbrname  from location_stat where act_brname='"+br_id+"'");
        int i=0;
        JSONArray jArray = new JSONArray();
        while(rs.next()){

    String s = rs.getString("atmbrno");
    String t = rs.getString("atmbrname");

    JSONObject arrayObj = new JSONObject();

    arrayObj.put("atmbrno",s);
    arrayObj.put("atmbrname",t);

    jArray.add(i,arrayObj);
    i++;
    }
    rs.close ();
    st.close ();
    out.print(jArray);
}

    catch(Exception e){
            out.print(e);
    }

}} 
```

但是当我运行它时它说错误

```
"parsing data org.json.JSONException: Value [{"atmbrname":"ANURADAPURA
[ATM 2]","atmbrno":"ATM084"},{"atmbrname":"MANNAR BRANCH  
","atmbrno":"ATM344"}] of type org.json.JSONArray cannot be converted
to JSONObject" 
```

在这种情况下有什么问题？

这是我的呼叫课程

```
public class ListAtmActivity extends ListActivity{

private static String url ="http://10.0.2.2:8080/hello/AvailabilityResponse";

//TextView error;
//String brName;

//Bundle b = getIntent().getExtras();
//String brName = b.getString("key");

private static final String TAG_CONTACTS = "contacts";
private static final String TAG_ID = "id";
private static final String ATM_NO = "atmbrno";
private static final String ATM_PLACE = "atmbrname";

// contacts JSONArray
//JSONArray contacts = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.list_item);

    String brName=getIntent().getExtras().getString("key");

    /*Bundle b = getIntent().getExtras();
    brName = b.getString("key");
    */

    // Hashmap for ListView
    ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

    // Creating JSON Parser instance
    JSONParser jParser = new JSONParser();

    // getting JSON string from URL
    JSONObject json = jParser.getJSONFromUrl(url,brName);

    try{
        //String results;
        JSONArray contacts = json.getJSONArray(TAG_CONTACTS);

        for(int i = 0; i < contacts.length(); i++){
            JSONObject json_data = contacts.getJSONObject(i);

            // Storing each json item in variable
            String atm_id = json_data.getString(ATM_NO);
            String atm_name = json_data.getString(ATM_PLACE);

            HashMap<String, String> map = new HashMap<String, String>();

            map.put(ATM_NO, atm_id);
            map.put(ATM_PLACE, atm_name);

            contactList.add(map);                
        }                       
    }

    catch(JSONException e) {
        e.printStackTrace();

    }

    /**
     * Updating parsed JSON data into ListView
     * */
   ListAdapter adapter = new SimpleAdapter(this, contactList,
            R.layout.list_main,
            new String[] { ATM_NO, ATM_PLACE }, new int[] {
                    R.id.name , R.id.email });

    setListAdapter(adapter);

}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:01:56.573

您可以将 json 对象更改为 json 数组，

```
 public class JSONParser {

static InputStream is = null;
static JSONArray jObj = null;
static String json = "";

// constructor
public JSONParser() {

}

    public JSONArray getJSONFromUrl(String url,String a) {

        ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();
        postParameters.add(new BasicNameValuePair("branchname", a));

        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(url);
            httppost.setEntity(new UrlEncodedFormEntity(postParameters));

            HttpResponse httpResponse = httpClient.execute(httppost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();          

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON Array
        try {
            jObj = new JSONArray(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        return jObj;            
}} 
```

您的返回数据是 json 数组，但是您转换了 json 对象，这只是引发异常。

```
 static JSONArray jObj = null;

   // try parse the string to a JSON Array
    try {
        jObj = new JSONArray(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T06:50:28.173

根据您的要求发布

```
 public class JSONParser {

    static InputStream is = null;
     static JSONArray jObj = null;
    static String json = "";

     // constructor
    public JSONParser() {

  }

public JSONArray getJSONFromUrl(String url,String a) {

    ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();
    postParameters.add(new BasicNameValuePair("branchname", a));

    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(url);
        httppost.setEntity(new UrlEncodedFormEntity(postParameters));

        HttpResponse httpResponse = httpClient.execute(httppost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();          

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONArray(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    return jObj;            
   }} 
```

并在解析类

```
 public class ListAtmActivity extends ListActivity{

 private static String url ="http://10.0.2.2:8080/hello/AvailabilityResponse";

 //TextView error;
  //String brName;

   //Bundle b = getIntent().getExtras();
 //String brName = b.getString("key");

private static final String TAG_CONTACTS = "contacts";
private static final String TAG_ID = "id";
private static final String ATM_NO = "atmbrno";
 static final String ATM_PLACE = "atmbrname";

 // contacts JSONArray
  //JSONArray contacts = null;

    @Override
  public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.list_item);

String brName=getIntent().getExtras().getString("key");

/*Bundle b = getIntent().getExtras();
brName = b.getString("key");
*/

// Hashmap for ListView
ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

// Creating JSON Parser instance
JSONParser jParser = new JSONParser();

// getting JSON string from URL
 JSONArray contacts = jParser.getJSONFromUrl(url,brName);

try{
    //String results;

    for(int i = 0; i < contacts.length(); i++){
        JSONObject json_data = contacts.getJSONObject(i);

        // Storing each json item in variable
        String atm_id = json_data.getString(ATM_NO);
        String atm_name = json_data.getString(ATM_PLACE);

        HashMap<String, String> map = new HashMap<String, String>();

        map.put(ATM_NO, atm_id);
        map.put(ATM_PLACE, atm_name);

        contactList.add(map);                
    }                       
}

catch(JSONException e) {
    e.printStackTrace();

}

  /**
   * Updating parsed JSON data into ListView
   * */
  ListAdapter adapter = new SimpleAdapter(this, contactList,
        R.layout.list_main,
        new String[] { ATM_NO, ATM_PLACE }, new int[] {
                R.id.name , R.id.email });

   setListAdapter(adapter);

   }} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T06:13:39.267

你需要 JsonArray 来解析得到的 String ，基本上你在响应中得到 JsonArray 。

```
JSONArray jObj = null;

   // try parse the string to a JSON Array
    try {
        jObj = new JSONArray(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    } 
```

# javascript - JQuery 添加元素需要在我的 js 之前再次添加 jquery 脚本

> ID：12400183
> 
> 赞同：2
> 
> 时间：2012-09-13T05:52:30.740
> 
> 标签：javascript, jquery, joomla

我正在尝试以下一段 JQuery 代码来动态添加元素。

场景：a）如果我在其中包含以下脚本和 jquery.min.js 不起作用。b）如果我在 body 和 jquery.min.js 中添加以下脚本仍然不起作用。c）如果我在 body 和 jquery.min.js 中添加下面的脚本就在下面的**代码上方，那么它就可以工作。为什么会这样？**

此外，我还需要 jquery.min.js 以使 joomla 的其他功能正常工作。是否可以在头部和正文中添加 jquery.min.js。

我正在使用 jQuery v@1.8.1

请帮助我理解上述情况。

```
 <script type="text/javascript">
window.addEvent('domready', function() {
var count = 0;
$('p#add_field').click(function(){
count += 1;
$('#container').append(
'<strong>Link #' + count + '</strong><br />' + '<input id="field_' + count + '" name="fields[]' + '" type="text" /><br />' );
});
});
</script> 
```

下面是动态添加的代码。

```
<div id="container">
        <p id="add_field"><a href="#"><span>&raquo; Add your favourite links.....</span></a></p>
    </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T05:57:42.450

您是否从某个涉及 MooTools 的地方获得了该代码？

试着用这个包裹

```
jQuery(document).ready(function() {
  //do stuff
}) 
```

供您参考的链接 [http://davidwalsh.name/javascript-domready](http://davidwalsh.name/javascript-domready)

所以结果可能是：

```
<script type="text/javascript">
    $(function() {//shorthand way of doing document.ready
        var count = 0;
        $('p#add_field').click(function(){
            count += 1;
            $('#container').append(
                '<strong>Link #' + count + '</strong><br />' + '<input id="field_' + count + '" name="fields[]' + '" type="text" /><br />' );
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T06:00:39.020

在实际脚本之前为 jQuery添加包含`script`标签时它起作用的原因是因为脚本使用 jQuery 来执行它的工作。在 JavaScript 中，您可以按照加载顺序访问脚本的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T05:58:39.680

在您的文档中：

```
<head>
    <script type="text/javascript" src="jquery-1.7.2.min.js"></script>
    <script>
        var count = 0;
        $(document).ready(function() {
            $('p#add_field').click(function(){
                count += 1;
                $('#container').append('<strong>Link #' + count + '</strong><br />' + '<input id="field_' + count + '" name="fields[]' + '" type="text" /><br />' );
            });
        });
    </script>
</head> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T12:58:10.690

尝试以下操作：

```
$document =& JFactory::getDocument();
$document->addScript("jquery-1.8.1.min.js");
$js = " $(document).ready(function() {
    var count = 0;
    $('p#add_field').click(function(){
      count += 1;
      $('#container').append('<strong>Link #' + count + '</strong><br />' + '<input id="field_' + count + '" name="fields[]' + '" type="text" /><br />' );
    });
});";
$document->addScriptDeclaration($js); 
```

# dynamics-crm - 在创建实体时创建默认属性

> ID：12400184
> 
> 赞同：-1
> 
> 时间：2012-09-13T05:52:43.847
> 
> 标签：dynamics-crm, dynamics-crm-2011

有一个要求是在创建实体时创建一个默认属性，例如“测试”，就像我们在 CRM 2011 中的每个实体中都有共同的所有者字段一样。你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:39:51.830

~~最简单的无代码解决方案是在创建记录时启动工作流。该值不会立即出现，但始终会被设置。~~

没有支持的方式允许在实体上自动创建新的元数据属性，这是由实体本身的创建触发的（不可能针对实体的创建注册插件）。我的建议是，鉴于（肯定）很少发生实体创建，请记住自己添加自定义属性。与尝试破解自动解决方法相比，这无疑会花费您更少的时间。

* * *

编辑：我仍然坚持劝阻您以自动方式执行此操作，但是作为触发点，您可能会考虑利用`publish`or`publishall`消息作为触发自定义插件的一种方式（根据我下面的注释）。

# windows - Octopress 博客部署错误“rake 中止！没有这样的文件或目录 - git remote -v'

> ID：12400185
> 
> 赞同：2
> 
> 时间：2012-09-13T05:52:46.273
> 
> 标签：windows, git, github, github-pages, octopress

我在我的 windows(windows8 x64) 上成功安装了 octopress，然后我创建了一个名为**wenliangcan.github.com**的 repo ，并尝试在 github 上部署一个博客。

当我键入命令`rake setup_github_pages`并输入*存储库 url*时，它给了我一个错误：

```
rake aborted!
No such file or directory - git remote -v 
```

在输入*存储库 url*之前，它给了我一个这样的例子：

```
Enter the read/write url for your repository
(For example, 'git@github.com:your_username/your_username.github.com) 
```

虽然一些第三方教程的例子像这种形式：

```
git@github.com:your_username/your_username.github.com.git 
```

我都试过了，但它给了我同样的错误。

下面是 CMD 的截图：

![在此处输入图像描述](../Images/7ec79a82d20924708e2841bd90c0668c.png)

截图内容：

```
D:\Profiles\GitHub\Octopress>rake setup_github_pages
Enter the read/write url for your repository
(For example, 'git@github.com:your_username/your_username.github.com)
Repository url: git@github.com:wenLiangcan/wenliangcan.github.com.git
rake aborted!
No such file or directory - git remote -v

Tasks: TOP => setup_github_pages
(See full trace by running task with --trace)

D:\Profiles\GitHub\Octopress>rake setup_github_pages
Enter the read/write url for your repository
(For example, 'git@github.com:your_username/your_username.github.com)
Repository url: git@github.com:wenLiangcan/wenliangcan.github.com
rake aborted!
No such file or directory - git remote -v

Tasks: TOP => setup_github_pages
(See full trace by running task with --trace) 
```

我该如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T07:12:13.147

```
 No such file or directory - git remote -v 
```

这意味着您的 ruby​​ 脚本在当前执行中找不到 git `PATH`（有点像在[这个问题](https://github.com/carlhuda/bundler/issues/1838)中），或者 rake 脚本以某种方式强制设置自己的 PATH。
所以在启动 rake 命令时要确保 PATH 是正确的：具体请看“[没有这样的文件或目录`git ls-files`---WINDOWS](https://stackoverflow.com/questions/9793806/no-such-file-or-directory-git-ls-files-windows) ”。

另一个问题可能是 Window7 上的 ruby​​ 版本问题（1.9.2 工作，1.9.3 不工作）（请参阅“[在 Windows 7 上安装 - 运行“rake db:migrate”时出现分段错误](https://www.chiliproject.org/boards/1/topics/913)”）

# jquery-mobile - 如果 listitem 在 JQM+phonegap Android 的页脚后面，页脚按钮不会触发

> ID：12400188
> 
> 赞同：2
> 
> 时间：2012-09-13T05:53:04.200
> 
> 标签：jquery-mobile, click, footer

我用 4 个按钮固定了页脚。当任何列表项出现在此页脚下方（页脚后面）时，然后单击页脚按钮。

期望 - 必须触发页脚按钮单击事件。实际 - 页脚后面的 ListItem 正在触发。

**更新 -**

index.html 页面

```
<div data-role="header" data-position="fixed" data-theme="f">
    <a href='#'><img class="back"/></a>
    <div class="logo"><img class="logoimg"/></div>
    <a href='#' class="ui-btn-right"><img class="btn_toplogout"/></a>
</div><!-- /header -->

<div data-role="content">
    <div class="ui-caption"><span id="txt_airtime_topup"></span></div>
    <form name="topup" autocomplete="off">
    <h4><span id="txt_operator"></span>:</h4>
    <div class="ui-droplist" id="topup_operatordroplist">
        <select id="t_operator" name="t_operator" data-theme="drop" data-icon="circle_d">
        </select>
    </div>
    <h4><span id="txt_recptmsisdn"></span>:</h4>
    <div class="ui-droplist" id="topup_persondroplist">
        <select id="topup_person" name="topup_person" data-theme="drop" data-icon="circle_d" onChange="topup_update_contacts();">
        </select>
    </div>
    <div class="input-contain">
    <input type="tel" id="t_number" maxlength="14" name="t_number" placeholder="IDNO: (leave empty for yourself)" autocomplete="off"/>
    </div>
    <fieldset class="ui-grid-a">
    <div class="ui-block-a">
        <h4><span id="txt_amount2"></span>:</h4>
        <div class="input-contain amount-margin">
        <input type="number" id="ppamount" name="ppamount" maxlength="8" class="ui-amount" min="0" autocomplete="off"/>
    </div>
    </div>
    <div class="ui-block-b">
        <h4><span id="txt_currency"></span>:</h4>
        <div class="ui-droplist">
            <select id="p_currency" data-theme="drop" data-icon="circle_d">
            <option value="EUR">EUR</option>
            </select>
        </div>
    </div>
    </fieldset>
    </form>
    <a href="#" id="btn_topup" class="ui-button" data-role="button" data-theme="red"></a>
</div><!-- /content -->

<div data-role="footer" data-id="btmmenu" data-position="fixed" data-theme="f" class="postlogin">
    <div data-role="navbar"><ul>
    **<li><a href="#home">Home</a></li>          //this is footer
    <li><a href="#transfer">Send Money</a></li>
    <li><a href="#paybill">Pay Bills</a></li>
    <li><a href="#manage">Manage Accounts</a></li>** 
    </ul></div>
</div><!-- /footer --> 
```

**页脚下方的下拉列表 -**

```
<h4>Currency:</h4>
            <div class="ui-droplist">
                <select id="request_currency" data-theme="drop" data-icon="circle_d">
                    <option value="EUR">EUR</option>
                </select>
            </div> 
```

**CSS -**

```
.ui-droplist .ui-btn-active {
border: 1px solid       #808080;
background:             #fdfdfd;
font-weight: bold;
color:                  #111111;
text-shadow: 0 1px 1px #ffffff;
background-image: url(images/arrow_down.png),
-webkit-gradient(linear, left top, left bottom, from( #eee ), to( #fdfdfd )); /* Saf4+, Chrome */
background-image: url(../../exclusive/images/arrow_down.png),
-webkit-linear-gradient(#eee , #fdfdfd ); /* Chrome 10+, Saf5.1+ */
background-image: url(../../exclusive/images/arrow_down.png),
   -moz-linear-gradient(#eee , #fdfdfd ); /* FF3.6 */
background-image: url(../../exclusive/images/arrow_down.png),
    -ms-linear-gradient(#eee , #fdfdfd ); /* IE10 */
background-image: url(../../exclusive/images/arrow_down.png),
     -o-linear-gradient(#eee , #fdfdfd ); /* Opera 11.10+ */
background-image: url(../../exclusive/images/arrow_down.png),
        linear-gradient(#eee , #fdfdfd );
background-position: right center !important;
background-repeat: no-repeat !important;
} 
```

**页脚 CSS -**

```
.postlogin.ui-footer .ui-navbar li.ui-block-a a .ui-btn-inner {
background-image: url(images/icon-home.png);
background-repeat: no-repeat;
background-position: 50% 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T04:27:43.523

在执行以下操作时，我没有遇到您提到的问题：

示例`index.html`：

```
<html>
    <head>
        <meta name='viewport' content='minimum-scale=1.0, width=device-width, maximum-scale=1.0, user-scalable=no'/>

        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile.structure-1.1.1.min.css" />
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
        <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>

        <!-- THIS FILE CONTAINS THE CSS YOU POSTED -->
        <link rel="stylesheet" href="./css/test.css" />        
    </head>

    <body>

        <!-- THIS PAGE CONTAINS THE HTML CODE YOU POSTED + SEVERAL DROP DOWN LIST IN QUESTION -->
        <div data-role="page" id="mine">

            <div data-role="header" data-position="fixed" data-theme="f">
                <a href='#'><img class="back"/></a>
                <div class="logo"><img class="logoimg"/></div>
                <a href='#' class="ui-btn-right"><img class="btn_toplogout"/></a>
            </div><!-- /header -->

            <div data-role="content">
                <div class="ui-caption"><span id="txt_airtime_topup"></span></div>
                <form name="topup" autocomplete="off">
                <h4><span id="txt_operator"></span>:</h4>
                <div class="ui-droplist" id="topup_operatordroplist">
                    <select id="t_operator" name="t_operator" data-theme="drop" data-icon="circle_d"></select>
                </div>
                <h4><span id="txt_recptmsisdn"></span>:</h4>
                <div class="ui-droplist" id="topup_persondroplist">
                    <select id="topup_person" name="topup_person" data-theme="drop" data-icon="circle_d" onChange="topup_update_contacts();"></select>
                </div>
                <div class="input-contain">
                    <input type="tel" id="t_number" maxlength="14" name="t_number" placeholder="IDNO: (leave empty for yourself)" autocomplete="off"/>
                </div>
                <fieldset class="ui-grid-a">
                    <div class="ui-block-a">
                        <h4><span id="txt_amount2"></span>:</h4>
                        <div class="input-contain amount-margin">
                            <input type="number" id="ppamount" name="ppamount" maxlength="8" class="ui-amount" min="0" autocomplete="off"/>
                        </div>
                    </div>
                    <div class="ui-block-b">
                        <h4><span id="txt_currency"></span>:</h4>
                        <div class="ui-droplist">
                            <select id="p_currency" data-theme="drop" data-icon="circle_d">
                                <option value="EUR">EUR</option>
                            </select>
                        </div>
                    </div>
                </fieldset>
                </form>
                <a href="#" id="btn_topup" class="ui-button" data-role="button" data-theme="red"></a>

                <!-- DROP DOWN LISTS IN QUESTION -->    
                <h4>Currency:</h4>
                <div class="ui-droplist">
                    <select id="request_currency" data-theme="drop" data-icon="circle_d">
                        <option value="EUR">EUR</option>
                    </select>
                </div>

                <h4>Currency:</h4>
                <div class="ui-droplist">
                    <select id="request_currency" data-theme="drop" data-icon="circle_d">
                        <option value="EUR">EUR</option>
                    </select>
                </div>

                <h4>Currency:</h4>
                <div class="ui-droplist">
                    <select id="request_currency" data-theme="drop" data-icon="circle_d">
                        <option value="EUR">EUR</option>
                    </select>
                </div>

                <h4>Currency:</h4>
                <div class="ui-droplist">
                    <select id="request_currency" data-theme="drop" data-icon="circle_d">
                        <option value="EUR">EUR</option>
                    </select>
                </div>
                <!-- DROP DOWN LISTS IN QUESTION -- END -->

            </div><!-- /content -->

            <div data-role="footer" data-id="btmmenu" data-position="fixed" data-theme="f" class="postlogin">

                <!-- YOUR FOOTER'S BUTTONS -->
                <div data-role="navbar"><ul>
                    <li><a href="#home">Home</a></li> 
                    <li><a href="#transfer">Send Money</a></li>
                    <li><a href="#paybill">Pay Bills</a></li>
                    <li><a href="#manage">Manage Accounts</a></li>
                </ul></div>

            </div><!-- /footer -->

        </div>

        <!-- THE LINK REFERENCES OF YOUR FOOTER'S BUTTON -->
        <div data-role="page" id="home">
            <div data-role="content">
                1 - HOME
            </div>
        </div>

        <div data-role="page" id="transfer">
            <div data-role="content">
                2 - TRANSFER
            </div>
        </div>

        <div data-role="page" id="paybill">
            <div data-role="content">
                3 - PAYBILL
            </div>
        </div>

    <div data-role="page" id="manage">
            <div data-role="content">
        4 - MANAGE
            </div>
    </div>
        <!-- THE LINK REFERENCES OF YOUR FOOTER'S BUTTON -- END -->

    </body>
</html> 
```

您的 CSS，包含在`test.css`：

```
.ui-droplist .ui-btn-active {
border: 1px solid       #808080;
background:             #fdfdfd;
font-weight: bold;
color:                  #111111;
text-shadow: 0 1px 1px #ffffff;
background-image: url(images/arrow_down.png),
-webkit-gradient(linear, left top, left bottom, from( #eee ), to( #fdfdfd )); /* Saf4+, Chrome */
background-image: url(../../exclusive/images/arrow_down.png),
-webkit-linear-gradient(#eee , #fdfdfd ); /* Chrome 10+, Saf5.1+ */
background-image: url(../../exclusive/images/arrow_down.png),
   -moz-linear-gradient(#eee , #fdfdfd ); /* FF3.6 */
background-image: url(../../exclusive/images/arrow_down.png),
    -ms-linear-gradient(#eee , #fdfdfd ); /* IE10 */
background-image: url(../../exclusive/images/arrow_down.png),
     -o-linear-gradient(#eee , #fdfdfd ); /* Opera 11.10+ */
background-image: url(../../exclusive/images/arrow_down.png),
        linear-gradient(#eee , #fdfdfd );
background-position: right center !important;
background-repeat: no-repeat !important;
}

.postlogin.ui-footer .ui-navbar li.ui-block-a a .ui-btn-inner {
background-image: url(images/icon-home.png);
background-repeat: no-repeat;
background-position: 50% 0;
} 
```

单击页脚按钮时，当下拉列表位于页脚后面时，按钮/链接正常触发并重定向到关联页面。

例如，如果我单击页脚的按钮/链接，调用`Manage`如下所示：

![页脚后面的下拉列表](../Images/5b8ad1c4dca38de92cd03e7f0f3f0c14.png)

下拉列表未触发，我`Manage`按预期重定向到页面：

![按钮/链接成功](../Images/07d0c884b40545f12e26de975017b319.png)

我不知道您的问题是否与 jQuery Mobile 版本有关，或者您正在使用的设备（Android、iPhone、Blackberry 等？）...

**供您参考，我使用了 jQuery Mobile 版本 1.1.1，并在 iPhone 5 上测试了上面的示例。**

即使我使用 jQuery Mobile 版本 1.1.1 测试了您的代码，我建议您使用**最新版本**（目前为 1.2，请查看[http://jquerymobile.com/blog/2012/10/02/announcing-jquery-mobile -1-2-0-final/](http://jquerymobile.com/blog/2012/10/02/announcing-jquery-mobile-1-2-0-final/)），它纠正了旧版本中发现的许多错误。

希望这对你有用。

# javascript - _gaq.push 不能正常工作吗？

> ID：12400189
> 
> 赞同：2
> 
> 时间：2012-09-13T05:53:16.273
> 
> 标签：javascript, ajax, google-analytics

我正在尝试通过谷歌分析跟踪我的页面，这是我的代码

```
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'XXXXXXXXXX']);
_gaq.push(['_setDomainName', 'somesite.com']);
_gaq.push(['_trackPageview']);

(function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

(function ($) {     
    // Log all jQuery AJAX requests to Google Analytics
    $(document).bind('ajaxComplete', function(event, xhr, settings){ 
        console.log('ajax Request');
        console.log(settings.url);
        _gaq.push(['_trackPageview', settings.url]);
    });

})(jQuery); 
```

在每个 ajax 请求上，我都可以看到控制台有值

```
ajax Request
url of the page 
```

这意味着 _gap.push 正在工作（因为页面上没有 js 错误）。但是当我通过 Live HttpHeaders 检查我的 req/res 时，谷歌分析没有 req/res，如何跟踪它？

这是萤火虫中的屏幕截图 ![在此处输入图像描述](../Images/c488be77792a117625d74e1d1da39852.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T05:59:29.877

_gaq.push 中的要点是，在实际加载 Google Analytics 之前，“_gaq”只是一个普通数组。也就是说：确实可以预期没有错误，无论它是否在触发对 Google 的请求的意义上“工作”。

Google Analytics 的工作方式不是通过 ajax（或者至少，没有关于如何发送请求的具体实现细节）。通常使用的方法是使用包含在该图像 URL 的查询字符串中的跟踪数据创建一个 Image 元素。毕竟，页面并不关心谷歌分析有什么响应，它只是想发送它的数据然后走！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T05:58:29.390

我不会使用 LiveHttpHeaders，而是检查您的开发人员工具的“网络”面板——如果您有 Javascript 控制台，您可能也可以访问它。您应该能够在该面板上看到请求的所有详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-21T09:47:35.933

您还可以使用 ga.js 的调试版本来诊断错误。它将诸如“无效跟踪代码”之类的内容打印到 Javascript 控制台。

在此页面上搜索“使用 ga_debug.js 进行调试”：

[https://developers.google.com/analytics/resources/articles/gaTrackingTroubleshooting](https://developers.google.com/analytics/resources/articles/gaTrackingTroubleshooting)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T15:17:59.350

查看发送的 http 标头 - 我使用 HttpFox - 并过滤“utm”。查看查询字符串（httpfox 为您将其分解为表格），您可以看到命中的所有 utm 参数 - 帐号 (utmac)、页面 (utmp) 等。如果任何 utm 参数不熟悉，检查这个[参考](http://www.cheatography.com/jay-taylor/cheat-sheets/google-analytics-utm-parameters-v2/)。这种对发送到谷歌服务器的图像请求的模拟和分析对于调试谷歌分析问题非常有用。

# android - Android XML Parsing(XmlPullParser) - 无法从 XML 中检索文本

> ID：12400190
> 
> 赞同：0
> 
> 时间：2012-09-13T05:53:20.140
> 
> 标签：android, xml-parsing

问题：XML解析返回空指针异常，无法从xml中的程序标签中检索到文本。单步执行代码显示：（这是来自调试语句，如下面的代码所示）

```
err StartTag entry
err StartTag record
err Text 4 
```

调用 parser 的行（也是导致 nullpointer 的行，pail 是一个新创建的容器）：

```
pail = XmlParsee.parsee(getResources().openRawResource(R.raw.testprogramlist)); 
```

我的 XML 文件：

```
<entry>
    <record>
        <program>Program 1(English)</program>
    </record>
    <record>
        <program>Program 2(Mandarin)</program>
    </record>
</entry> 
```

我的解析器（我尝试了 getText() 和 nextText()，都返回相同的问题）：

```
public class XmlParsee {
// jealousy has invaded! Generic xml parser that returns a container
public static Container parsee(InputStream inputriver) {
    Container container = null;

    try {
        // get new parser object from factory
        XmlPullParser parsee = XmlPullParserFactory.newInstance().newPullParser();
        parsee.setInput(inputriver, null);

        int eventType = parsee.getEventType();
        // while xml still has more, we read.

        while (eventType != XmlPullParser.END_DOCUMENT) {
            switch (eventType) {
                case XmlPullParser.START_DOCUMENT: {
                    //these comments to be replaced with logging functions, if you desire
                    //wokay, we begin
                    container = new Container();
                    System.err.println("doc start");
                    break;
                }
                case XmlPullParser.END_DOCUMENT:{
                    //wokay, we end.
                    break;
                }
                case XmlPullParser.START_TAG:{
                    //new tag! first we get the tag's name
                    String tag = parsee.getName();
                    System.err.println("StartTag "+parsee.getName());
                    //then we check, individually, what the tag is to confirm content
                    //if <program>
                    if(tag.equalsIgnoreCase(Container.PROGRAM)){
                        System.err.println("Text "+parsee.TEXT);
                        //container.addProgramList(parsee.getText());
                    }
                    //if <>                     
                    break;
                }
            }
            //done with this line, next!
            eventType = parsee.next();
        }
    } catch (Exception e) {
        container = null;
    }

    return container;
} 
```

有任何想法吗？从早上开始我就一直在敲我的头=\

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:57:53.193

nextText() 对我有用；

```
 //System.err.println("Text "+parsee.TEXT);
    System.err.println("Text "+parsee.nextText()); 
```

输出：

```
...
09-13 14:51:22.035: W/System.err(12080): doc start
09-13 14:51:22.035: W/System.err(12080): StartTag entry
09-13 14:51:22.045: W/System.err(12080): StartTag record
09-13 14:51:22.065: W/System.err(12080): StartTag program
09-13 14:51:24.285: W/System.err(12080): Text Program 1(English)
09-13 14:56:57.505: W/System.err(12080): StartTag record
09-13 14:56:57.515: W/System.err(12080): StartTag program
09-13 14:56:58.075: W/System.err(12080): Text Program 2(Mandarin)
... 
```

问候

陈子腾

# css - 如何在 TinyMCE 中制作带有浮动按钮的流畅工具栏？

> ID：12400191
> 
> 赞同：5
> 
> 时间：2012-09-13T05:53:27.360
> 
> 标签：css, tinymce

我有一个基本的 TinyMCE 设置，我正在尝试创建一个“流动”工具栏，如果工具栏太小，按钮会下拉到下一行。我在一个表格行中有所有按钮：

```
tinyMCE.init({
    mode : "textareas",
    theme : "advanced",
    plugins : "autolink,lists,spellchecker,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,imagemanager,filemanager",
    theme_advanced_buttons1 : "bold,italic,justifyleft,justifycenter,justifyright,justifyfull,"
        +"styleselect,formatselect,fontselect,fontsizeselect,bullist,numlist,link,unlink,image,pdw_toggle,"
        +"pastetext,pasteword,search,replace,outdent,indent,blockquote,undo,redo,code,forecolor,backcolor,"
        +"tablecontrols,hr,removeformat,visualaid,sub,sup,charmap,emotions,media,advhr,print,ltr,rtl,fullscreen,"
        +"cite,abbr,acronym,del,ins,attribs,visualchars,nonbreaking,template,blockquote,insertfile,insertimage,underline,strikethrough",
    theme_advanced_buttons2 : "",
    theme_advanced_buttons3 : "",
    theme_advanced_buttons4 : "",
    theme_advanced_toolbar_location : "top",
    width: "100%",
    height: "400"
}); 
```

我已经尝试**了各种**CSS 来实现这一点，我不确定为什么这不起作用：

```
.mceToolbar tr {
    display:block !important;
    width:100% !important;
}
.mceToolbar td {
    clear:none !important;
    display:block !important;
    float:left !important;
} 
```

我正在寻找的是这样的（调整输出窗格的大小）：http: [//jsfiddle.net/vKTcq/](http://jsfiddle.net/vKTcq/)

你可以在这里试验我的 TinyMCE 演示：http: [//fiddle.tinymce.com/aecaab/1](http://fiddle.tinymce.com/aecaab/1)

我知道我以前只用 CSS 做过这个，所以我很确定这是可能的 - 我似乎无法弄清楚。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T06:39:31.493

啊哈，找到了，该`white-space`属性设置为`nowrap`工具栏中的所有内容，默认皮肤以及大多数其他皮肤。使用这个 CSS 覆盖它：

```
.mceToolbar * {
    white-space: normal !important;
}
.mceToolbar tr,
.mceToolbar td {
    float:left !important;
} 
```

我不确定哪些*特定*元素确实需要`white-space`修复，但这非常有效。

演示： http: [//fiddle.tinymce.com/becaab](http://fiddle.tinymce.com/becaab)

带有较小工具栏的示例输出（按钮现在将堆叠而不是离开屏幕）：

![在此处输入图像描述](../Images/aa31ae128db8d6de947b0b745b182b7d.png)

# pyqt - pyqt ：使用 QStyledItemDelegate 设置项目边界线

> ID：12400195
> 
> 赞同：0
> 
> 时间：2012-09-13T05:53:35.267
> 
> 标签：pyqt, qstyleditemdelegate

我尝试在 QListView 中设置项目边界线。
当鼠标悬停在项目上时，线条出现，当鼠标离开项目时，线条恢复正常。这就是我想要的。
所以，我使用 QStyledItemDelegate 似乎这样做，这是不正确的。

```
class PixmapItemDelegate(QtGui.QStyledItemDelegate):    
    def paint(self, painter, option, index):        
        painter.save()

        if (option.state & QtGui.QStyle.State_MouseOver):            
            pen = QtGui.QPen(QtCore.Qt.yellow)            
        else:
            pen = QtGui.QPen(QtCore.Qt.transparent)
        pen.setWidth(2)
        painter.setPen(pen)
        painter.setBrush(QtGui.QBrush(QtCore.Qt.transparent))
        painter.drawRect(option.rect)

        painter.restore()

        super(PixmapItemDelegate, self).paint(painter, option, index) 
```

代码在上面。
如果我选择该项目，它搞砸了。
所选项目有边界并且不会消失。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T17:09:07.547

尝试确保项目状态也没有选择：

```
if ( option.state & QtGui.QStyle.State_MouseOver and \
    not option.state & QtGui.QStyle.State_Selected ): 
```

# perl - 如何在 VXML 中保存或保存 DTMF 输入？任何设置测试 IVR (VXML) 服务的指南？

> ID：12400197
> 
> 赞同：1
> 
> 时间：2012-09-13T05:53:48.537
> 
> 标签：perl, voip, ivr, vxml, pabx

所以我目前有一个用一些狡猾的旧代码编写的 IVR，这些代码令人困惑，并且在某些事情上太过分了。

我想用 VXML 重写我的基本 IVR 之一。

所以一点点研究是我可以调用 perl 脚本，我可以用它来运行数据库中的数据，这部分并不坏。

我的问题是如何或使用什么语法来“保持”或保存菜单的 dtmf 输入，然后将其传递给 perl 脚本。

问题二。

托管 VXML IVR。是否有设置测试服务的指南？我有一个 PABX，还有一些我可以玩的服务器。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T13:14:17.983

要使用 VoiceXML，我会推荐 Voxeo 的出色平台 Prophecy。您可以免费获得两个可以在服务器甚至工作站/笔记本电脑上运行的端口。他们提供了一个 SIP 软电话来测试您的应用程序，因此它不需要任何复杂的设置；只需简单的安装，您就可以开始使用了。他们还拥有可以免费测试的托管环境。如果您将其投入生产，您只需为服务付费。这是一篇[描述如何在托管环境中设置和测试应用程序](http://kevin-junghans.blogspot.com/2011/12/testing-voicexml-apps-in-cloud.html)的帖子。[如果您在 PC 上安装 Prophecy，](http://kevin-junghans.blogspot.com/2011/11/testing-your-voicexml-app-with-voxeo.html)这里有一篇关于如何设置和测试应用程序的文章。Voxeo 的 CTO 是 VoiceXML 标准委员会的成员，因此他们的平台非常符合[标准](http://www.w3.org/TR/voicexml20/)。

[Voxeo 的开发人员站点](http://evolution.voxeo.com/)有[关于 VoiceXML 的优秀文档，](http://www.vxml.org/)其中充满了示例。关于如何获取 dtmf 输入的问题，您可以转到文档中左窗格的底部，然后单击元素“字段”。field 元素用于从调用者那里收集信息。要使用 DTMF 输入轻松完成此操作，您可以使用内置语法。有关内置语法的更多信息，请查看有关“字段”元素的“类型”属性的文档。一旦您从“字段”中获得“填充”事件，您就可以使用“提交”元素调用您的 Perl 脚本。Voxeo 的文档有一个链接到[这篇关于使用 Perl 创建 VoiceXML 应用程序的文章](http://www.xml.com/pub/a/2001/08/09/perlxml.html)。Voxeo[论坛](http://evolution.voxeo.com/forums/main.jsp)也是关于 VoiceXML 和 Prophecy 的极好信息来源。如果您在论坛中找不到问题的答案，请提出问题，他们知识渊博的支持人员会提供帮助。

如果您还熟悉 .NET 技术，那么有一个[名为 VoiceModel 的开源项目](http://voicemodel.codeplex.com/)，它使使用 ASP.NET 开发 VoiceXML 应用程序变得容易。该项目中有很多示例。

这些资源应该可以让您很快开始使用 VoiceXML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-23T11:12:24.843

要专门回答您的 DTMF 问题，只需使用属性（这只是您需要发送的变量列表）`<submit>`将 DTMF 输入发送到 perl 脚本。`namelist`

此外，来自[VXML 2.0 规范](https://www.w3.org/TR/voicexml20/#dml5.3.8)：

“该`<submit>`元素用于向源 Web 服务器提交信息，然后转换到响应中发回的文档。与 不同的`<goto>`是，它允许您通过 HTTP GET 或 POST 请求向文档服务器提交变量列表。例如，将一组表单项提交到您可能拥有的服务器：

```
<submit next="log_request" method="post"
 namelist="name rank serial_number" 
 fetchtimeout="100s" fetchaudio="audio/brahms2.wav"/> 
```

"

# ruby-on-rails - 生成rails内部类的类层次图

> ID：12400202
> 
> 赞同：2
> 
> 时间：2012-09-13T05:54:17.140
> 
> 标签：ruby-on-rails

我正在尝试学习 Rails 代码的内部结构，并认为如果我能获得有关 Rails 类如何组织的整体结构，那将非常有帮助。有谁知道是否有一个类层次图生成器rails internal classes？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-13T08:15:46.330

由于 rails 是一个开源项目 - 您可以在 github 上查看它的类和结构： [rails github](https://github.com/rails/rails)或使用 API 文档：[Rails api](http://api.rubyonrails.org/)

# java - 如何在抽象 Java 类中引用“this”？

> ID：12400204
> 
> 赞同：1
> 
> 时间：2012-09-13T05:54:26.637
> 
> 标签：java, this, abstract-class

在Java中是否可以在`this`抽象类的方法中使用，但作为手头子类的实例，而不仅仅是抽象类的实例？

```
abstract class MyAbstractClass <MyImplementingClass extends MyAbstractClass> {

    public abstract MyImplementingClass self();
} 
```

我在每个子类中覆盖它

```
class MyImplementingClass extends MyAbstractClass<MyImplementingClass> {

    @Override public MyImplementingClass self() {
        return this;
    }
} 
```

但我想知道是否有更优雅的方法可以做到这一点。特别是，它不需要每个子类都覆盖像`self()`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T06:21:17.633

The issue here I believe is that your `self()` method returns `MyImplementingClass` and not `MyAbstractClass`.

You should return a `MyAbstractClass`, the *dynamic type* of the returned object will be the relevant one.

I also do not follow why wouldn't you just use `this`? It returns the object itself, with the correct *dynamic type*, regardless of where it is called. You can cast it if you need to

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T06:01:29.697

在 Java 中重写方法时，您可以将返回类型重写为原始类型的子类。此代码完全有效：

```
abstract class MyAbstractClass {

    public MyAbstractClass self() {
        return this;
    }
} 
```

具体类：

```
class MyImplementingClass extends MyAbstractClass {

    @Override
    public MyImplementingClass self() {
        return this;
    }
} 
```

这也是为什么您可以覆盖`clone()`以返回确切类型而不仅仅是`Object`：

```
public class SomeCloneable implements Cloneable {

    @Override
    public SomeCloneable clone() {
        return new SomeCloneable();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T05:58:38.013

我相信，你可以返回`newInstance()`一个班级来表现得像那样

```
@Override public MyImplementingClass self() {
    return MyImplementingClass.newInstance();
} 
```

# android - 为什么 Sax Parser 找不到任何元素？

> ID：12400205
> 
> 赞同：0
> 
> 时间：2012-09-13T05:54:33.853
> 
> 标签：android, sax, saxparser

我正在调试 Android Sax 包装类。我的问题是2折。1.如何使用 Android Sax 包装类进行调试？2.我在这里做错了什么？

我有一个可以正常工作的基本 RSS 阅读器。我正在尝试创建一个 Atom 格式的阅读器。我有以下代码。

```
 private List<Message> parseAtom()
    {
        final Message currentMessage = new Message();
        final List<Message> messages = new ArrayList<Message>();

        RootElement root = new RootElement("http://www.w3.org/2005/Atom", ATOM);
        Element title = root.getChild(TITLE);
        Element item = root.getChild(ENTRY);

        title.setEndTextElementListener(new EndTextElementListener() {

            public void end(String body)
            {
                Log.d("title", body);
            }
        });

        item.setEndElementListener(new EndElementListener() {
            public void end()
            {
                if (currentMessage.getAttribution() == null || currentMessage.getAttribution().length() == 0) currentMessage.setAttribution(Attribution);

                messages.add(currentMessage.copy());
            }
        });
        item.getChild(TITLE).setEndTextElementListener(new EndTextElementListener() {
            public void end(String body)
            {
                currentMessage.setTitle(body);
            }
        });
        item.getChild(ID).setEndTextElementListener(new EndTextElementListener() {
            public void end(String body)
            {
                currentMessage.setLink(body);
            }
        });
        item.getChild(SUMMARY).setEndTextElementListener(new EndTextElementListener() {
            public void end(String body)
            {
                currentMessage.setDescription(body);
            }
        });
        item.getChild(UPDATED).setEndTextElementListener(new EndTextElementListener() {
            public void end(String body)
            {
                currentMessage.setDate(body);
            }
        });

        item.getChild(Author).getChild(NAME).setEndTextElementListener(new EndTextElementListener() {
            public void end(String body)
            {
                currentMessage.setAttribution(body);
            }
        });

        try
        {
            String content = this.getInput();
            Xml.parse(content, root.getContentHandler());

            //Xml.parse(this.getInputStream(), Xml.Encoding.UTF_8, root.getContentHandler());
        }
        catch (Exception e)
        {
            throw new RuntimeException(e);
        }
        return messages;

    } 
```

调用中的常量在`getChild()`基类中定义为：

```
static final String CHANNEL = "channel";
static final String PUB_DATE = "pubDate";
static final String DESCRIPTION = "description";
static final String LINK = "link";
static final String TITLE = "title";
static final String ITEM = "item";
static final String Author = "author";

static final String ENTRY = "entry";
static final String SUMMARY = "summary";
static final String ID = "id";
static final String UPDATED = "updated";
static final String NAME = "name"; 
```

我用作示例的提要如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <title>NFL.com</title>
  <link rel="alternate" href="http://www.nfl.com/rss/rsslanding" />
  <link rel="self" href="http://www.nfl.com/rss/rsslanding" />
  <subtitle>Latest news from NFL.com for Atlanta Falcons</subtitle>
  <id>http://www.nfl.com/rss/rsslanding</id>
  <rights>Â© 2012 NFL Enterprises LLC</rights>
  <updated>2012-09-13T03:01:04Z</updated>
  <dc:date>2012-09-13T03:01:04Z</dc:date>
  <dc:rights>Â© 2012 NFL Enterprises LLC</dc:rights>
  <entry>
    <title>Brent Grimes to injured reserve with Achilles injury</title>
    <link rel="alternate" href="http://www.nfl.com/goto?id=0ap1000000060448" />
    <author>
      <name>Hanzus, Dan</name>
    </author>
    <id>http://www.nfl.com/goto?id=0ap1000000060448</id>
    <updated>2012-09-11T00:38:35Z</updated>
    <published>2012-09-10T18:50:00Z</published>
    <summary type="text">The Atlanta Falcons suffered a potentially devastating blow Monday with the news that cornerback Brent Grimes has played his last game of 2012\. Who will step up in his absence?</summary>
    <dc:creator>Hanzus, Dan</dc:creator>
    <dc:date>2012-09-10T18:50:00Z</dc:date>
  </entry>
</feed> 
```

当它运行时，`Xml.parse(content, root.getContentHandler());`返回而不做任何事情。它不会**抛出**异常。但是没有一个`Listeners`被命中（通过断点验证）。解析器没有在 logcat 中抛出任何东西。

我`title`在根元素上添加了 以查看是否可以点击它，但不行。

由于名称空间不存在（与从 xml 文档`feed`中给出的匹配...导致错误），我最初遇到了解析器引发错误的问题。`http://www.w3.org/2005/Atom:feed`添加命名空间后，它不再抛出错误，但它似乎没有做任何事情。

这是我第一次尝试使用 SAX 包装器（或 sax）。我错过了一些简单的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T21:42:21.167

我最近在尝试使用此方法解析一些 XML 时遇到了同样的问题，我花了一段时间才弄清楚，但问题是我在子查找中遗漏了命名空间。所以在你的读者而不是

```
Element title = root.getChild(TITLE); 
```

采用

```
Element title = root.getChild(NAMESPACE, TITLE); 
```

每次`getChild()`在阅读器中使用时都必须这样做。

# actionscript-3 - 如何创建我们自己的可以使用 AS3 调整大小的组件？

> ID：12400206
> 
> 赞同：0
> 
> 时间：2012-09-13T05:54:38.660
> 
> 标签：actionscript-3

使用 Flash CS5 和 AS3，我开发了自己的自定义组件，它扩展了`UIComponent`. 我试过了`super.setSize(w,h)`，，，，。但无法弄清楚如何调整组件的大小。如果有人知道解决方案，请提供帮助。`draw()``scaleX``scaleY`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:52:29.530

组件的解决方法是

1.  当一个组件被实例化时，一个空的影片剪辑被添加到舞台上
2.  之后将所需的资产添加到该影片剪辑中
3.  与影片剪辑不同，组件不会完全缩放，只有边框资源/影片剪辑倾向于单独缩放
4.  如果您想像电影剪辑一样调整整个组件的大小，您可以单独调整所有子组件的大小（可能在 for 循环中）。下面的代码可以帮助你

    ```
     for(var i:int = 0; i < myComp.numChildren;i++){
        myComp.scaleX = 1.5;
     } 
    ```

# java - JPA 插入事务并发

> ID：12400207
> 
> 赞同：0
> 
> 时间：2012-09-13T05:54:42.743
> 
> 标签：java, jpa, concurrency, transactions

我有更多的理论问题：数据何时插入数据库？是在持久化之后还是在调用提交之后？因为我对唯一键（手动生成）有疑问 - 它们会重复。我认为这是由于多个用户同时将数据插入到同一个表中。

**更新 1：**

我在我的应用程序中生成密钥。键示例：'123456789123'、'123456789124'、'123456789125'...

键字段是 varchar 类型，因为有很多旧键（我无法删除或更改它们），例如 'VP123456'、'VP15S3456'。另一个问题是，在将它们插入一个数据库之后，这些键必须插入另一个数据库。而且我不知道什么是数据库序列和原子对象..

**更新 2：**

这些密钥用于财务文档而不是数据库密钥。所以它们必须是唯一的，但它们在编程的任何地方都不能用作对象键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:21:36.307

您如何生成这些密钥？您是否尝试过在数据库或原子对象中使用序列？

我问是因为同时填充数据库是正常的。

编辑1：

您可以编写一个基于原子计数器返回新密钥的方法，这样您就会知道，每当您请求新密钥时，您都会收到一个**唯一**密钥。这种策略可能并且将会导致一些键被丢弃，但这是一个很小的代价，除非它要求数据库中的键是连续的。

```
private AtomicLong counter; //initialized somewhere else.

public String getKey(){
  return "VP" + counter.incrementAndGet();
} 
```

这里有一些关于[Oracle](http://docs.oracle.com/cd/B13789_01/server.101/b10759/statements_6014.htm)、[MySql](http://www.tutorialspoint.com/mysql/mysql-using-sequences.htm)等数据库序列的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T07:55:33.533

我建议您创建一个负责生成密钥的单例。确保只有在单例使用数据库中的最新值初始化后才能获得新的 id。

为防止您不完整地插入两个数据库，我建议您尝试使用[XA 事务](https://www.google.se/search?q=xa+transaction)。这将允许您进行全有或全无的插入和更新。因此，如果任何数据库上的任何操作失败，所有内容都将回滚。当然 XA 交易也有缺点。它们非常慢，并且并非所有数据库和数据库驱动程序都支持它。

# shell - 用另一个文件中指定的值替换字段

> ID：12400217
> 
> 赞同：4
> 
> 时间：2012-09-13T05:56:12.710
> 
> 标签：shell, sed, awk

我有一个文件，其中包含单词之间的映射。我必须引用该文件并将这些单词替换为某些文件中的映射单词。例如，下面的文件具有映射的单词表

```
1.12.2.4               1
1.12.2.7               12
1.12.2.2               5
1.12.2.4               4
1.12.2.6               67
1.12.2.12              5 
```

我将有许多包含这些关键词的文件（1.12.2.*）。我想搜索这些关键词并将这些词替换为从此文件中获取的相应映射。如何在 shell 中执行此操作。假设一个文件包含以下几行说

```
The Id of the customer is 1.12.2.12\. He is from Grg. 
The Name of the machine is ASB
The id is 1.12.2.4\. He is from Psg. 
```

执行脚本后，数字“1.12.2.12”和“1.12.2.4”应替换为5和4（参考主文件）。谁能帮我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T07:17:25.843

一种使用方式`GNU awk`：

```
awk 'FNR==NR { array[$1]=$2; next } { for (i in array) gsub(i, array[i]) }1' master.txt file.txt 
```

结果：

```
The Id of the customer is 5\. He is from Grg.
The Name of the machine is ASB
The id is 4\. He is from Psg. 
```

**要将输出保存到文件：**

```
awk 'FNR==NR { array[$1]=$2; next } { for (i in array) gsub(i, array[i]) }1' master.txt file.txt > name_of_your_output_file.txt 
```

**解释：**

```
FNR==NR { ... }   # FNR is the current record number, NR is the record number
                  # so FNR==NR simply means: "while we process the first file listed
                  # in this case it's "master.txt"
array[$1]=$2      # add column 1 to an array with a value of column 2
next              # go onto the next record

{                 # this could be written as: FNR!=NR
                  # so this means "while we process the second file listed..."
for (i in array)  # means "for every element/key in the array..."
gsub(i, array[i]) # perform a global substitution on each line replacing the key
                  # with it's value if found
}1                # this is shorthand for 'print' 
```

**添加单词边界使匹配更加严格：**

```
awk 'FNR==NR { array[$1]=$2; next } { for (i in array) gsub("\\<"i"\\>", array[i]) }1' master.txt file.txt 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-13T09:24:46.940

你可以为你`sed`写一个`sed`脚本：

映射：

```
cat << EOF > mappings
1.12.2.4               1
1.12.2.7               12
1.12.2.2               5
1.12.2.4               4
1.12.2.6               67
1.12.2.12              5
EOF 
```

输入文件：

```
cat << EOF > infile
The Id of the customer is 1.12.2.12\. He is from Grg. 
The Name of the machine is ASB
The id is 1.12.2.4\. He is from Psg.
EOF 
```

根据映射生成脚本（GNU sed）：

```
sed -r -e 's:([^ ]*) +(.*):s/\\b\1\\b/\2/g:' mappings 
```

输出：

```
s/\b1.12.2.4\b/1/g
s/\b1.12.2.7\b/12/g
s/\b1.12.2.2\b/5/g
s/\b1.12.2.4\b/4/g
s/\b1.12.2.6\b/67/g
s/\b1.12.2.12\b/5/g 
```

`sed`与另一个（GNU sed）一起评估：

```
sed -r -e 's:([^ ]*) +(.*):s/\\b\1\\b/\2/g:' mappings | sed -f - infile 
```

输出：

```
The Id of the customer is 5\. He is from Grg. 
The Name of the machine is ASB
The id is 1\. He is from Psg. 
```

请注意，映射被视为正则表达式，例如点 ( `.`) 可以表示任何字符，并且可能需要在映射文件中或在生成`sed`脚本时进行转义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T07:15:03.707

由于您没有提供任何示例，我想这就是您想要的：

**输入文件**

```
> cat temp
1.12.2.4  1
1.12.2.7  12
1.12.2.2  5
1.12.2.4  4
1.12.2.6  67
1.12.2.12  5 
```

**要替换的文件**

```
> cat temp2
The Id of the customer is 1.12.2.12\. He is from Grg. 
The Name of the machine is ASB
The id is 1.12.2.4\. He is from Psg. 
```

**输出**

```
> temp.pl
The Id of the customer is 5\. He is from Grg. 
The Name of the machine is ASB
The id is 4\. He is from Psg

> 
```

下面是 perl 脚本。

```
#!/usr/bin/perl

use strict;
use warnings;

my %hsh=();

open (MYFILE, 'temp');
open (MYFILE2, 'temp2');

while (<MYFILE>) {
my@arr = split/\s+/;
$hsh{$arr[0]} = $arr[1];
}
my $flag;
while(<MYFILE2>)
{
$flag=0;
my $line=$_;
foreach my $key (keys %hsh)
{
   if($line=~/$key/)
   {
    $flag=1; 
    $line=~s/$key/$hsh{$key}/g;
    print $line;
   }
}
  if($flag!=1)
  {
  print $line;
  $flag=0;
  }
}
close(MYFILE);
close(MYFILE2); 
```

# ruby-on-rails - has_and_belongs_to_many 无法从关系的双方访问

> ID：12400220
> 
> 赞同：0
> 
> 时间：2012-09-13T05:56:27.180
> 
> 标签：ruby-on-rails, activerecord, rspec

我这里有两个模型，课程和学习单元，学习单元包含课程的内容。

这是两个模型：

```
class Studyunit < ActiveRecord::Base
  attr_accessible :name
  has_and_belongs_to_many :courses

class Course < ActiveRecord::Base
  attr_accessible :name
  has_and_belongs_to_many :studyunits 
```

问题是向课程添加学习单元似乎会更新课程。studyunits 属性，但不是 studyunit.courses。rspec 代码的摘录：

```
before(:each) do
  course.studyunits << studyunit
  Studyunit.connection.clear_query_cache
 end

it "should be associated with a course" do
  course.studyunits.first.should_not eql(nil)
  studyunit.courses.first.should_not eql(nil)
end 
```

第一个条件通过，第二个条件失败。如何解决这个问题？我需要在我的代码中访问双方。我尝试按照[这个线程](https://stackoverflow.com/questions/6197135/has-and-belongs-to-many-relationship-not-associating-both-ways)清除查询缓存，但它没有解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:06:19.720

您确定这不仅仅与缓存有关吗？我怀疑确实如此。试试这个代码：

```
it "should be associated with a course" do
  course.studyunits(true).first.should_not eql(nil)
  studyunit.courses(true).first.should_not eql(nil)
end 
```

# php - 为什么 PHP 3D 数组没有定义“z”？

> ID：12400223
> 
> 赞同：1
> 
> 时间：2012-09-13T05:56:45.483
> 
> 标签：php, arrays, multidimensional-array

下面提取的数据应返回：

*   x=1
*   y=1
*   z=1
*   值=3

但是最后一行`var_dump($result_value);`返回没有 z：

*   x=1
*   y=1
*   值=3

在 $result_value 中有“z”，我在这里错过了什么？

```
 $pullMapInfo = "SELECT x, y, z, value FROM mapinfo WHERE id='{$player_id}'";
    $pullMapInfo2 = mysql_query($pullMapInfo) or die($error[4]);

    //create an array with all x, y, z
    for ($y = 1; $y <= 16; $y++) $array_y[] = $y;
    for ($x = 1; $x <= 16; $x++) $array_x[] = $x;
    for ($z = 1; $z <= 3; $z++) $array_z[] = $z;

    //create an associative array x, y, z => value
    $result_value = array();
    while ( $pullMapInfo3 = mysql_fetch_assoc($pullMapInfo2) ) {
        $result_value[ $pullMapInfo3['x'] ][ $pullMapInfo3['y'] ][ $pullMapInfo3['z'] ] = $pullMapInfo3['value'];
    }

    //loop to display output
    foreach ($array_z as $z) {
        echo '<div class="container">';
    foreach ($array_y as $y) {
    foreach ($array_x as $x) {

        if (array_key_exists($x, $result_value) && array_key_exists($y, $result_value[$x] )) {
            echo '<div class="tileBox pos_',$result_value[$x][$y][$z] ,'" id="'.$x.','.$y.','.$z.'"></div>';
        } else {
            echo '<div class="tileBox pos_0" id="'.$x.','.$y.','.$z.'"></div>
    ';
        }
    }
    }
        echo '</div>';
    }

    var_dump($result_value);
    #outputs: array(1) { [1]=> array(1) { [1]=> array(1) { [1]=> string(1) "3" } } }
    #as it pulled data from database: x, y, value - it misses z! 
```

表结构：id INT(11)

x, y, z TINYINT(2)

值 VARCHAR(10)

`var_dump($pullMapInfo3)`对于@Fluffeh：

```
bool(false) bool(false) bool(false) bool(false) bool(false) bool(false) ... x768 (16x16x3) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T06:15:00.817

Z在那里。如果将输出拆分，则可以看到它具有三个维度，最后一个是 Z

```
array(
    [x=1] => array(
       [y=1] => array(
            [z=1] => "3"
                     )
                   ) 
```

所以 $result_value[$x][$y][$z] = 3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T06:13:31.540

用于在 php 中创建多维数组

```
$newarr[array_pop($arr)] = 0;
foreach (array_reverse($arr) as $i)
    $newarr[$i] = $newarr; 
```

检查this [SO post](https://stackoverflow.com/questions/1722632/php-create-3d-array-from-array-with-3-values)有更多关于它的解释。

# c# - 如何在C#中通过语音在多个文本框中输入不同的值

> ID：12400227
> 
> 赞同：2
> 
> 时间：2012-09-13T05:57:06.803
> 
> 标签：c#, voice-recognition, speech

我需要编写一个使用语音识别引擎的应用程序。

如何在 C# 中通过语音在多个文本框中输入不同的值？

我可以在单个文本框中输入值，但不能在第二个文本框中输入值。我有以下代码用于在单个文本框中输入值。

```
private SpeechRecognitionEngine rec;

private void voice()     
{
    rec = new SpeechRecognitionEngine();
    rec.SetInputToDefaultAudioDevice();
    Choices choice = new Choices("apple","Orange","Onion");
    GrammarBuilder gr = new GrammarBuilder(choice);
    Grammar grammar = new Grammar(gr);
    rec.LoadGrammar(grammar);
    rec.SpeechRecognized += 
        new EventHandler<SpeechRecognizedEventArgs>(rec_SpeechRecogonized);
    rec.RecognizeAsync(RecognizeMode.Multiple);
}

void rec_SpeechRecogonized(object sender, SpeechRecognizedEventArgs e)
{
    foreach (RecognizedWordUnit word in e.Result.Words)
    {
         textBox1.Text = word.Text;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:38:01.040

我会做这样的事情（非常简单的例子）：

```
private SpeechRecognitionEngine rec;

private void voice()     
{
    rec = new SpeechRecognitionEngine();
    rec.SetInputToDefaultAudioDevice();
    Choices choice = new Choices("apple","Orange","Onion", "next");
    GrammarBuilder gr = new GrammarBuilder(choice);
    Grammar grammar = new Grammar(gr);
    rec.LoadGrammar(grammar);
    rec.SpeechRecognized += 
        new EventHandler<SpeechRecognizedEventArgs>(rec_SpeechRecogonized);
    rec.RecognizeAsync(RecognizeMode.Multiple);
}

private TextBox currentInput;
void rec_SpeechRecogonized(object sender, SpeechRecognizedEventArgs e)
{
    if (currentInput == null) currentInput = textBox1;

    foreach (RecognizedWordUnit word in e.Result.Words)
    {
         if (word.Text = "next") { currentInput = textBox2; }
         else { currentInput.Text = word.Text; }
    }
} 
```

# ios - 带有自定义图像的 UISwitch

> ID：12400239
> 
> 赞同：5
> 
> 时间：2012-09-13T05:58:56.357
> 
> 标签：ios, uiswitch

我需要通过更改背景颜色以及旋钮（支架）图像来自定义 UISwitch，如下图所示。是否可以自定义 UISwitch 而不会拒绝应用程序。

![在此处输入图像描述](../Images/2c5baa7c215ba749c5ae43c338cb7ff2.png)

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T06:01:59.573

`onTintColor`您可以在 UISwitch 上设置一个属性。如果您还需要更改句柄图像，请查看[DCRoundSwitch](https://github.com/domesticcatsoftware/DCRoundSwitch)。

# java - 在使用 Maven 进行单元测试期间写入临时文件的正确方法是什么？

> ID：12400243
> 
> 赞同：76
> 
> 时间：2012-09-13T05:59:17.450
> 
> 标签：java, maven, junit4

我编写了一个单元测试，将文件写入文件系统，但没有写入工作目录的路径；因此，如果从项目目录执行，它将写入项目根目录，如果在项目父目录中执行，则写入父根目录。

那么写入目标目录的正确方法是什么？很可能是目标目录中的一个目录？

如果我很简单地`target/`用文件指定它将写入父项目目标而不是项目目标。

**更新**：我实际上想要测试完成后的文件。该文件用于需要发送给第三方的第三方提取格式。可以打开/关闭测试，以便我仅在文件格式更改以重新批准时运行。文件的去向不是什么大问题，但我想要一些容易找到的东西。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-09-13T06:28:31.067

您可以尝试使用[此处](http://garygregory.wordpress.com/2010/01/20/junit-tip-use-rules-to-manage-temporary-files-and-folders/)描述的[TemporaryFolder JUnit @Rule](http://junit.org/junit4/javadoc/latest/org/junit/rules/TemporaryFolder.html)

> [TemporaryFolder](http://junit.org/junit4/javadoc/latest/org/junit/rules/TemporaryFolder.html)在系统属性 java.io.tmpdir 指定的默认临时文件目录中创建一个文件夹。方法 newFile 在临时目录中创建一个新文件，newFolder 创建一个新文件夹。
> 
> 当测试方法完成时，JUnit 会自动删除 TemporaryFolder 中的所有文件和目录，包括 TemporaryFolder。JUnit 保证删除资源，无论测试通过还是失败。

* * *

**问题更新后**

您可以更改[`maven-surefire-plugin`](http://maven.apache.org/plugins/maven-surefire-plugin/test-mojo.html#workingDirectory).

```
<plugins>
    [...]
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-surefire-plugin</artifactId>
        <version>2.12.3</version>
        <configuration>
          <workingDirectory>${project.build.directory}</workingDirectory>
        </configuration>
      </plugin>
    [...]
</plugins> 
```

您可以将该工作目录更改为测试所需的任何内容，例如`${project.build.directory}/my_special_dir/`.

Surefire 插件中的工作目录仅影响正在运行的测试，并且仅适用于由 maven 进行的测试。如果您从 IDE 中运行测试，则工作目录将是其他目录。

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2012-09-13T06:28:16.187

无需重新发明轮子...

JDK 提供了一种创建临时文件的方法，以及一种在退出时自动删除它的方法：

```
File file = File.createTempFile( "some-prefix", "some-ext");
file.deleteOnExit(); 
```

使用该文件，它会在您的测试完成时自动删除。这里的所有都是它的。

要指定用于临时文件的目录，请使用重载方法：

```
File file = File.createTempFile( "prefix", "ext", new File("/some/dir/path")); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T06:06:22.140

我会编写一个例程来确定文件应该写入的位置，然后我会对其进行统一测试，通常我会尽量避免（尽可能）访问单元测试中的持久数据，例如文件 IO 或数据库访问，这也有性能原因和其他原因.

看看这个答案：[https ://stackoverflow.com/a/8032504/395659](https://stackoverflow.com/a/8032504/395659)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-13T06:28:36.997

您将希望能够从 IDE 和 Maven 运行您的测试，因此最佳实践是编写您的测试，这样它们就不会假定它们是在 Maven 中运行的。

处理临时文件的最佳方法之一是使用[junit 规则](http://garygregory.wordpress.com/2010/01/20/junit-tip-use-rules-to-manage-temporary-files-and-folders/)。这使您可以依靠规则为您清理。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-13T09:39:02.297

事先声明，我强烈反对在单元测试中做这样的事情。我还没有真正尝试过，但它应该可以工作：

假设您使用的是surefire插件，从它引用的文档中您可以访问被测项目的基本目录`System.getProperty("basedir")`。获取它并在 basedir/target 下创建文件。

一种更“合适”的方式（因为我们可能有机会将输出目录配置为其他内容，您可以将surefire插件配置更改为如下内容：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.6</version>
    <configuration>
        <systemPropertyVariables>
            <myOutDir>${project.build.outputDirectory}</myOutDir>
        </systemPropertyVariables>
    </configuration>
</plugin> 
```

`System.getProperty("myOutDir")`然后你可以在你的测试中得到实际的输出目录。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-13T06:20:31.520

临时文件应创建到临时目录中。使用调用检索它`System.getProperty("java.io.tmpdir")`

临时文件应该是临时的，即在不需要时应将其删除。为了实现这一点，不要忘记在`finally`块或测试后运行的代码中删除它，即：

```
File tmpFile = ...
try {
   // deal with tempFile
} finally {
    tempFile.delete();
} 
```

和/或

```
public class MyTestCase {
    private File tmpFile = null;

    @Before
    public void setUp() {
        tmpFile = ...;
    }

    @Test
    public void setUp() {
        // deal with tmpFile
    }

    @After
    public void setUp() {
        tmpFile.delete();
    }
} 
```

`File.createTempFile(String prefix, String suffix)`如果可能，请使用，即您可以使用由 . 生成的具有特殊名称的文件`createTempFile()`。

使用`file.deleteOnExit()`. 这会创建在 JVM 终止时自动删除文件的钩子。仅当 JVM 被杀死时，该文件才会保留`kill -9`，因此它没有机会运行关闭代码。

# c# - 在 C# 中使用 MSBuild

> ID：12400250
> 
> 赞同：1
> 
> 时间：2012-09-13T06:00:19.533
> 
> 标签：c#, build, msbuild

我有一些批处理代码：

```
Path=C:\Windows\Microsoft.NET\Framework64\v4.0.30319

ECHO Trying TFS build...

msbuild D:\WORK\project\project.sln /p:Config="Debug" /p:Platform="Any CPU" /flp1:logfile=BuildLogProject.txt 
```

那是正确的。我想在我的 C# 应用程序中使用 MSBuild。

我添加了 Microsoft.Build.Engine 参考，我正在使用 Engine 类。我写了一些代码。但它不起作用。

*当我使用 Visual Studio 或批处理程序构建项目时“构建成功”。当我使用我的程序构建项目时，它会发现项目中没有的错误和警告。*

```
 Engine engine = new Engine();
     engine.BinPath = @"C:\Windows\Microsoft.NET\Framework64\v4.0.30319";
     FileLogger logger = new FileLogger();
     logger.Parameters = @"logfile=D:\WORK\project\BuildLogProject.txt";

     engine.RegisterLogger(logger);
     string projectPath = @"D:\WORK\project\project.sln";

          try
          {
               bool success = engine.BuildProjectFile(projectPath);

          }

          catch (Exception ex)
          {
                System.Windows.Forms.MessageBox.Show(ex.Message);  
          }

          finally
          {
                engine.UnregisterAllLoggers();
                engine.UnloadAllProjects();
          } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T19:39:14.293

您的问题是您尝试构建 .SLN 文件。解决方案文件本身不是 msbuild 脚本。只有底层 .<XX>proj 文件使用 msbuild 格式。

实际上，当您运行**msbuild.exe someSLN.sln** - msbuild 会根据您的 sln 文件自动生成脚本，然后由引擎执行它。我不知道你如何自己生成它，但你可以通过使用特殊的环境变量来查看自动生成的文件（如果你试图通过命令行将它作为属性传递，则不起作用）。

执行`SET MSBuildEmitSolution = 1` 并执行**msbuild.exe someSLN.sln**后，您会在 .sln 之一附近找到**someSLN.sln.metaproj文件。**当您尝试通过命令行和 msbuild.exe 构建解决方案时，这正是构建引擎所提供的内容

# mongodb - MongoDB 10Gen 驱动程序空处理

> ID：12400251
> 
> 赞同：1
> 
> 时间：2012-09-13T06:00:21.180
> 
> 标签：mongodb, mongodb-.net-driver

我们有 DateTime 字段，我们正在从 MongoDB 集合中读取并反序列化到该类中。假设它在 DateTime DB 字段中是否有 null 并且 MongoDriver 正在尝试将 null 设置为不可为 null 类型的 datetime 字段。它抛出错误。

.FindAll().ToList() => 此处出错。

有什么帮助可以克服这个问题吗？

请注意：我们可以使用可为空的 Datetime (DateTime?) 。但我们只在域模型中需要不可为空的类型。所以我只想在序列化时使用不可为空的 DateTime

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T06:53:53.473

`null`在这种情况下有两种可能。您可以`null`在数据库中存储一个实际值：

```
{
    _id:ObjectId(),
    MyDateTime:null
} 
```

或者您根本不存储该字段：

```
{
    _id:ObjectId()
} 
```

* * *

在第一种情况下，您可以通过创建自己的序列化程序来处理这个问题：

```
public class DateTimeSerializer : BsonBaseSerializer
{
    public override object Deserialize(BsonReader bsonReader, Type nominalType, Type actualType, IBsonSerializationOptions options)
    {
        var bsonType = bsonReader.CurrentBsonType;
        switch (bsonType)
        {
        case BsonType.Null:
            bsonReader.ReadNull();
            return new DateTime();
        case BsonType.DateTime:
            return bsonReader.ReadDateTime();
        default:
            var message = string.Format("DateTimeSerializer needs a DateTime not {0}.", bsonType);
            throw new BsonSerializationException(message);
        }
    }

    public override void Serialize(BsonWriter bsonWriter, Type nominalType, object value, IBsonSerializationOptions options)
    {
        if (value == null)
        {
            TimeSpan nowMs = DateTime.Now-new DateTime(1970,1,1);
            bsonWriter.WriteDateTime((long)nowMs.TotalMilliseconds);
        }
        else
        {
            bsonWriter.WriteString((string)value);
        }
    }
} 
```

`null`（在这种情况下，只要 a被序列化或反序列化，就给出当前日期）

然后，您需要将其注册为 DateTime 类型的序列化程序：

```
BsonClassMap.RegisterClassMap<MyClass>(cm =>
{
    cm.AutoMap();
    cm.GetMemberMap(mc => mc.MyDateTime).SetSerializer(new DateTimeSerializer());
}); 
```

不得不说，在源头对数据进行清理会更容易，因此它一开始就没有`nulls`。

* * *

在第二种情况下，这已由 MongoDB 的 C# 驱动程序从[1.5](https://jira.mongodb.org/browse/CSHARP-467)开始处理，您使用的是哪个版本？您可以通过注册自己的类映射来设置默认值，如下所示，但如上所述，不再需要它。

```
BsonClassMap.RegisterClassMap<MyClass>(cm =>
{
   cm.AutoMap();
   cm.GetMemberMap(mc => mc.MyDateTime).SetDefaultValue(new DateTime());
}); 
```

# objective-c - 如何在ios中为Tableview创建动态TableCells

> ID：12400253
> 
> 赞同：0
> 
> 时间：2012-09-13T06:00:33.547
> 
> 标签：objective-c, ios, uitableview

我想要实现的是这样的。它是一种 Facebook 或 twitter 功能，其中您有一个表格视图，其中您有一个线程，并且线程包含不同数量的文章。每行的文章数量各不相同。所以基本上它就像我在 facebook 上发送一个帖子，人们回复那个帖子，这些帖子被添加到那个特定的线程下（我只是关心如何显示它，其他所有事情都得到了照顾）。这里是图片![在此处输入图像描述](../Images/80209be27606f411edda01a6ae9da9b3.png)

我知道如何创建单元格，但我不知道如何动态设置其大小。任何教程或任何建议来实现这一目标？

任何帮助表示赞赏..

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:09:41.343

您可以将其用于动态单元格高度

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath*)indexPath; 
```

您可以使用 switch 案例并检查**indexPath.row**和**indexPath.section**以返回所需的高度

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T07:27:04.057

在 .h 文件中获取自定义 UITableViewCell

```
 @interface PartnerCell : UITableViewCell {
        UILabel  *user_name,*lbldate,*lbldesc;
        LoadImage *img_trade;
        UIImageView *partnerimage;
    }
    @property (nonatomic, strong) UILabel *user_name,*lbldate,*lbldesc;
    @property (nonatomic, strong) LoadImage *img_trade;
    @property (nonatomic, strong) UIImageView *partnerimage;
    @end 
```

在 .m 文件中，

#import "PartnerCell.h"

```
@implementation PartnerCell
@synthesize user_name,lbldate,lbldesc;
@synthesize img_trade,partnerimage;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier {
    if (self = [super initWithStyle:style reuseIdentifier:reuseIdentifier]) {   

        [self setSelectionStyle:UITableViewCellSelectionStyleNone];

        user_name = [[UILabel alloc] initWithFrame:CGRectMake(75,8,200,15)];
        [user_name setBackgroundColor:[UIColor clearColor]];
        user_name.font = [UIFont fontWithName:@"Arial-BoldMT" size:15];
        [user_name setTextColor:[UIColor colorWithRed:70/255.00f green:70/255.00f blue:70/255.00f alpha:1.0]];
        [self addSubview:user_name];

        lbldate = [[UILabel alloc] initWithFrame:CGRectMake(75,28,200,15)];
        [lbldate setBackgroundColor:[UIColor clearColor]];
        lbldate.font = [UIFont fontWithName:@"Arial" size:14];
        [lbldate setTextColor:[UIColor darkGrayColor]];
        [self addSubview:lbldate];

        lbldesc = [[UILabel alloc] initWithFrame:CGRectMake(75,45,170,35)];
        [lbldesc setBackgroundColor:[UIColor clearColor]];
        lbldesc.font = [UIFont fontWithName:@"Arial" size:13];
        lbldesc.numberOfLines = 2;
        [lbldesc setTextColor:[UIColor darkGrayColor]];
        [self addSubview:lbldesc];

        img_trade = [[LoadImage alloc] initWithFrame:CGRectMake(3, 5, 54, 55)];
        img_trade.userInteractionEnabled = YES;
        [self addSubview:img_trade];

    }
    return self;
} 
```

在主表视图类中编写此代码，

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

NSString *CellIdentifier = [NSString stringWithFormat:@"%@",[[Partarray objectAtIndex:indexPath.row-1] valueForKey:@"part_id"]];
cell = (PartnerCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
cell=nil;
if (cell == nil)
{   
    cell = [[PartnerCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    //cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:[Partarray objectAtIndex:indexPath.row]] autorelease];
    cell.selectionStyle= UITableViewCellSelectionStyleGray;
    cell.backgroundColor = [UIColor clearColor];
    cell.user_name.frame=CGRectMake(75,8,340,15);
    cell.lbldate.frame=CGRectMake(75,28,340,15);
    cell.lbldesc.frame=CGRectMake(75,45,340,35);

    cell.user_name.text = @"user name";
    cell.lbldate.text = @"date";
    cell.lbldesc.text = @"description";

}
    return cell;
} 
```

获取条件并根据该条件添加对象数量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T07:36:35.480

也许这会对你有所帮助。我正在向您发送我的代码，我正在使用一个自定义单元格，它在第一个索引上有一个 Emial，在第二个索引上有一个 PhoneNumber，在第三个索引上有一个地址（在你的情况下是文章）。我正在动态更改 CellForRowAtIndexPath 中地址标签的高度，以及 heightForRowAtIndexPath 方法中的单元格高度。这是我的代码。

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSString *identifier = @"FeedCell";
    FeedDetailCell *cell = (FeedDetailCell*)[tableView dequeueReusableCellWithIdentifier:identifier];
    if (cell==nil) {
        cell = (FeedDetailCell*)[[[NSBundle mainBundle] loadNibNamed:@"FeedDetail" owner:nil options:nil] objectAtIndex:0];
    }
    [tableView setSeparatorColor:[UIColor grayColor]];
    switch (indexPath.section) {
        case 0:
            if (indexPath.row == 0) {
                cell.nameLabel.text = @"Telephone";
                [cell.detailLabel setText:[_feedDictionary valueForKey:@"mobile"]];
            }
            else {
                cell.nameLabel.text = @"Mobile";
                [cell.detailLabel setText:[_feedDictionary valueForKey:@"iPhone"]];
            }
            break;
        case 1:
            cell.nameLabel.text = @"E-mail";
            [cell.detailLabel setText:[_feedDictionary valueForKey:@"Email"]];
            break;
        case 2:
            cell.nameLabel.text = @"address";
            [cell.detailLabel setText:[_feedDictionary valueForKey:@"address"]];
            CGSize size = [[_feedDictionary valueForKey:@"address"] sizeWithFont:[UIFont systemFontOfSize:14.0]
                               constrainedToSize:CGSizeMake(200.0, 400.0) lineBreakMode:UILineBreakModeWordWrap];
            CGRect frm = cell.detailLabel.frame;
            frm.size.height = size.height;
            [cell.detailLabel setFrame:frm];
        default:
           break;
    }
    return cell;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    if (indexPath.section == 2) {
        NSString *address = [_feedDictionary valueForKey:@"address"];
        CGSize recommendedSize = [address sizeWithFont:[UIFont systemFontOfSize:14] constrainedToSize:CGSizeMake(320, INT_MAX)];
        return 44 + recommendedSize.height;
    }
    else {
        return 44;
    }
} 
```

# python - 将纪元时间转换为日期时间

> ID：12400256
> 
> 赞同：383
> 
> 时间：2012-09-13T06:00:51.780
> 
> 标签：python

我从其他人那里得到的回应是一个纪元时间格式，比如

```
start_time = 1234566
end_time = 1234578 
```

我想以 MySQL 格式时间转换那个纪元秒，以便我可以将差异存储在我的 MySQL 数据库中。

我试过：

```
>>> import time
>>> time.gmtime(123456)
time.struct_time(tm_year=1970, tm_mon=1, tm_mday=2, tm_hour=10, tm_min=17, tm_sec=36, tm_wday=4, tm_yday=2, tm_isdst=0) 
```

上面的结果不是我所期望的。我希望它像

```
2012-09-12 21:00:00 
```

请建议我怎样才能做到这一点？

另外，为什么我`TypeError: a float is required`要

```
>>> getbbb_class.end_time = 1347516459425
>>> mend = time.gmtime(getbbb_class.end_time).tm_hour
Traceback (most recent call last):
  ...
TypeError: a float is required 
```

* * *

## 回答 #1

> 赞同：444
> 
> 时间：2012-09-13T06:27:03.530

要将您的时间值（浮点数或整数）转换为格式化字符串，请使用：

```
import time

time.strftime('%Y-%m-%d %H:%M:%S', time.localtime(1347517370)) 
```

例如：

```
import time

my_time = time.strftime('%Y-%m-%d %H:%M:%S', time.localtime(1347517370))

print(my_time) 
```

* * *

## 回答 #2

> 赞同：274
> 
> 时间：2013-04-11T16:09:44.527

您还可以使用`datetime`：

```
>>> import datetime
>>> datetime.datetime.fromtimestamp(1347517370).strftime('%c')
  '2012-09-13 02:22:50' 
```

* * *

## 回答 #3

> 赞同：89
> 
> 时间：2017-10-24T15:19:25.420

```
>>> import datetime
>>> datetime.datetime.fromtimestamp(1347517370).strftime('%Y-%m-%d %H:%M:%S')
'2012-09-13 14:22:50' # Local time 
```

要获取 UTC：

```
>>> datetime.datetime.utcfromtimestamp(1347517370).strftime('%Y-%m-%d %H:%M:%S')
  '2012-09-13 06:22:50' 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2012-09-13T06:34:02.683

这就是你需要的

```
In [1]: time.time()
Out[1]: 1347517739.44904

In [2]: time.strftime("%Y-%m-%d %H:%M:%S", time.gmtime(time.time()))
Out[2]: '2012-09-13 06:31:43' 
```

请输入 a`float`而不是 an`int`并且其他`TypeError`应该消失。

```
mend = time.gmtime(float(getbbb_class.end_time)).tm_hour 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2012-09-13T06:22:01.597

试试这个：

```
>>> import time
>>> time.strftime("%Y-%m-%d %H:%M:%S", time.gmtime(1347517119))
'2012-09-12 23:18:39' 
```

同样在 MySQL 中，您可以[`FROM_UNIXTIME`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_from-unixtime)喜欢：

```
INSERT INTO tblname VALUES (FROM_UNIXTIME(1347517119)) 
```

对于您的第二个问题，可能是因为`getbbb_class.end_time`是一个字符串。您可以将其转换为数字，例如：`float(getbbb_class.end_time)`

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-10-20T04:02:14.740

```
#This adds 10 seconds from now.
from datetime import datetime
import commands

date_string_command="date +%s"
utc = commands.getoutput(date_string_command)
a_date=datetime.fromtimestamp(float(int(utc))).strftime('%Y-%m-%d %H:%M:%S')
print('a_date:'+a_date)
utc = int(utc)+10
b_date=datetime.fromtimestamp(float(utc)).strftime('%Y-%m-%d %H:%M:%S')
print('b_date:'+b_date) 
```

这有点罗嗦，但它来自 unix 中的 date 命令。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2020-09-03T16:38:54.773

如果您有以毫秒为单位的纪元，则可能的解决方案是将其转换为秒：

```
import time
time.ctime(milliseconds/1000) 
```

更多`time`功能：[https ://docs.python.org/3/library/time.html#functions](https://docs.python.org/3/library/time.html#functions)

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2012-09-13T06:25:32.743

首先是来自**man gmtime的时代信息**

```
The ctime(), gmtime() and localtime() functions all take an argument of data type time_t which represents calendar  time.   When  inter-
       preted  as  an absolute time value, it represents the number of seconds elapsed since 00:00:00 on January 1, 1970, Coordinated Universal
       Time (UTC). 
```

了解时代应该如何。

```
>>> time.time()
1347517171.6514659
>>> time.gmtime(time.time())
(2012, 9, 13, 6, 19, 34, 3, 257, 0) 
```

只需确保您传递给的参数`time.gmtime()`是整数。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-04T17:02:04.127

分享一个答案以清楚地区分 UTC 和本地时间转换。在使用`import datetime`以下方法之前在顶部使用。

**转换为本地机器时区的日期时间**

```
datetime.datetime.fromtimestamp(1347517370) 
```

**转换为 UTC 时区的日期时间**

```
datetime.datetime.utcfromtimestamp(1347517370) 
```

* * *

对于上述两种方法，如果您希望返回格式化的日期字符串，请使用以下代码块

```
datetime.datetime.fromtimestamp(1347517370).strftime('%Y-%m-%d %H:%M:%S')
datetime.datetime.utcfromtimestamp(1347517370).strftime('%Y-%m-%d %H:%M:%S') 
```

# iphone - 使用超过 1 个 UINavigationController 且仅使用一个 UITabBarController

> ID：12400258
> 
> 赞同：0
> 
> 时间：2012-09-13T06:01:27.647
> 
> 标签：iphone, ios, xcode, uinavigationcontroller, uitabbarcontroller

我在管理多个`UINavigationControlller`.

我有一个`UITabBar`并且在每个选项卡中我都有一个单独的`UINavigationController`. 所以如果我`UITabBar`通过

```
tabBar.selectedIndex = i; // where i is index of tabbar. 
```

当我回到上一个标签时

```
tabBar.selectedIndex = previousIndex; 
```

我转到 的根目录，而`UINavigationController`不是我之前离开的视图控制器。

我想转到视图控制器，从中跳转到另一个选项卡，而不调用`-viewDidLoad:`or `-viewWillAppear:`。

我需要一个方法来显示`UINavigationController`或者我的 viewController。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:55:52.310

每当您尝试切换选项卡时，将在您的 AppDelegate.m 文件中实现以下方法

```
- (BOOL)tabBarController:(UITabBarController *)tbc shouldSelectViewController:(UIViewController *)viewController {

} 
```

在你的 appDelegate 类中指定为你的 tabbarcontroller 的 delagate

即（TabBarController.delegate = self）在 appDidFinishLaunching 方法中

# c# - 如何修复此错误：“连接表达式错误。无法解析查询文本”

> ID：12400271
> 
> 赞同：1
> 
> 时间：2012-09-13T06:02:58.987
> 
> 标签：c#, mysql

我有一个复杂的 SQL 语句，当我加入这个“选择”语句时遇到错误。他们提示我这个错误： `Error in Join expression. Can't parse query text.`

我粘贴了这个我认为会导致此错误的 SQL 语句。谁能告诉我哪里出了问题？我从不在这里粘贴整个 SQL 语句，因为我认为你们看到会很乱，如果需要，请告诉我。有任何想法吗？？？

```
SELECT        AllocationDate, LocationName, StationName, Hour1, Hour2, Hour3, Hour4, Hour5, Hour6, Hour7, Hour8, Hour9, Hour10, Hour11, Hour12, EmpName, ShiftTime, 
                     BreakTime, SignIn, SignOut
FROM            (SELECT        z.AllocationDate, z.LocationName, z.StationName, a.Hour1, b.Hour2, c.Hour3, d .Hour4, e.Hour5, f.Hour6, g.Hour7, h.Hour8, i.Hour9, j.Hour10, k.Hour11, 
                                                l.Hour12, m.EmpName, m.ShiftTime, m.BreakTime, m.SignIn, m.SignOut
                      FROM            (SELECT DISTINCT AllocationDate, LocationName, StationName
                                                FROM            satsschema.viewmain
                                                WHERE        (StationName IS NOT NULL)) z LEFT OUTER JOIN
                                                    (SELECT DISTINCT AllocationDate, LocationName, StationName, Hour1
                                                      FROM            satsschema.view00000100) a ON z.LocationName = a.LocationName AND z.StationName = a.StationName AND 
                                                z.AllocationDate = a.AllocationDate LEFT OUTER JOIN
                                                    (SELECT DISTINCT AllocationDate, LocationName, StationName, Hour2
                                                      FROM            satsschema.view01000200) b ON z.LocationName = b.LocationName AND z.StationName = b.StationName AND 
                                                z.AllocationDate = b.AllocationDate LEFT OUTER JOIN
                                                    (SELECT DISTINCT AllocationDate, LocationName, StationName, Hour3
                                                      FROM            satsschema.view02000300) c ON z.LocationName = c.LocationName AND z.StationName = c.StationName AND 
                                                z.AllocationDate = c.AllocationDate LEFT OUTER JOIN
                                                    (SELECT DISTINCT AllocationDate, LocationName, StationName, Hour4
                                                      FROM            satsschema.view03000400) d ON z.LocationName = d .LocationName AND z.StationName = d .StationName AND 
                                                z.AllocationDate = d .AllocationDate LEFT OUTER JOIN
                                                    (SELECT DISTINCT AllocationDate, LocationName, StationName, Hour5
                                                      FROM            satsschema.view04000500) e ON z.LocationName = e.LocationName AND z.StationName = e.StationName AND 
                                                z.AllocationDate = e.AllocationDate LEFT OUTER JOIN
                                                    (SELECT DISTINCT AllocationDate, LocationName, StationName, Hour6
                                                      FROM            satsschema.view05000600) f ON z.LocationName = f.LocationName AND z.StationName = f.StationName AND 
                                                z.AllocationDate = f.AllocationDate LEFT OUTER JOIN
                                                    (SELECT DISTINCT AllocationDate, LocationName, StationName, Hour7
                                                      FROM            satsschema.view06000700) g ON z.LocationName = g.LocationName AND z.StationName = g.StationName AND 
                                                z.AllocationDate = g.AllocationDate LEFT OUTER JOIN
                                                    (SELECT DISTINCT AllocationDate, LocationName, StationName, Hour8
                                                      FROM            satsschema.view07000800) h ON z.LocationName = h.LocationName AND z.StationName = h.StationName AND 
                                                z.AllocationDate = h.AllocationDate LEFT OUTER JOIN
                                                    (SELECT DISTINCT AllocationDate, LocationName, StationName, Hour9
                                                      FROM            satsschema.view08000900) i ON z.LocationName = i.LocationName AND z.StationName = i.StationName AND 
                                                z.AllocationDate = i.AllocationDate LEFT OUTER JOIN
                                                    (SELECT DISTINCT AllocationDate, LocationName, StationName, Hour10
                                                      FROM            satsschema.view09001000) j ON z.LocationName = j.LocationName AND z.StationName = j.StationName AND 
                                                z.AllocationDate = j.AllocationDate LEFT OUTER JOIN
                                                    (SELECT DISTINCT AllocationDate, LocationName, StationName, Hour11
                                                      FROM            satsschema.view10001100) k ON z.LocationName = k.LocationName AND z.StationName = k.StationName AND 
                                                z.AllocationDate = k.AllocationDate LEFT OUTER JOIN
                                                    (SELECT DISTINCT AllocationDate, LocationName, StationName, Hour12
                                                      FROM            satsschema.view11001200) l ON z.LocationName = l.LocationName AND z.StationName = l.StationName AND 
                                                z.AllocationDate = l.AllocationDate LEFT OUTER JOIN
                                                    (SELECT        a.EmpName, CONCAT(b.StartTime, ' - ', b.EndTime) AS ShiftTime, CONCAT(a.EmpTime, ' - ', ADDTIME(a.EmpTime, '0 1:0:0.000000')) 
                                                                                AS BreakTime, a.Break, a.EmployeeOnBreak, '' AS SignIn, '' AS SignOut
                                                      FROM            satsschema.employeeslot a JOIN
                                                                                satsschema.ufis b m ON b.UFISID = a.UFISEmpGroup) Morning
                      WHERE        (AllocationDate = @AllocationDate) AND (LocationName = @LocationName) AND (StationName <> '') AND (Break = 1)
                      GROUP BY StationName, LocationName, AllocationDate 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T06:05:38.650

你的`ON`条款在括号之外`) m ON b.UFISID = a.UFISEmpGroup`，试试这个，

```
SELECT  a.EmpName, 
        CONCAT(b.StartTime, ' - ', b.EndTime) AS ShiftTime,
        CONCAT(a.EmpTime, ' - ', ADDTIME(a.EmpTime, '0 1:0:0.000000'))  AS BreakTime, 
        a.Break, 
        a.EmployeeOnBreak, 
        '' AS SignIn, 
        '' AS SignOut
FROM    satsschema.employeeslot a JOIN satsschema.ufis b m 
        ON b.UFISID = a.UFISEmpGroup 
```

# python - 你如何过滤一个字符串只包含字母？

> ID：12400272
> 
> 赞同：5
> 
> 时间：2012-09-13T06:03:00.507
> 
> 标签：python

如何创建一个函数，它将过滤掉字符串中的所有非字母？例如，`letters("jajk24me")`将返回`"jajkme"`。（它需要是一个 for 循环）并且`string.isalpha()`功能会帮助我吗？

我的尝试：

```
def letters(input):
    valids = []
    for character in input:
        if character in letters:
            valids.append( character)
    return (valids) 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-13T06:12:06.243

如果它需要在那个 for 循环中，而正则表达式不会这样做，那么对循环的这个小修改将起作用：

```
def letters(input):
    valids = []
    for character in input:
        if character.isalpha():
            valids.append(character)
    return ''.join(valids) 
```

（`''.join(valids)`最后的 获取您在列表中收集的所有字符，并将它们连接成一个字符串。您的原始函数改为返回该字符列表）

您还可以从字符串中过滤掉字符：

```
def letters(input):
    return ''.join(filter(str.isalpha, input)) 
```

或列表理解：

```
def letters(input):
    return ''.join([c for c in input if c.isalpha()]) 
```

或者您可以使用正则表达式，正如其他人所建议的那样。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-13T06:10:13.357

```
import re
valids = re.sub(r"[^A-Za-z]+", '', my_string) 
```

**编辑：**如果它需要是一个 for 循环，这样的事情应该可以工作：

```
output = ''
for character in input:
    if character.isalpha():
        output += character 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-13T06:07:37.567

请参阅[`re.sub`](http://docs.python.org/py3k/library/re.html?highlight=match#re.sub)，对于性能，请考虑一次`re.compile`优化模式。
下面是一个简短版本，它匹配所有不在 from `A`to范围内的字符，`Z`并将它们替换为空字符串。该`re.I`标志忽略大小写，因此小写 ( `a-z`) 字符也被替换。

```
import re

def charFilter(myString)
    return re.sub('[^A-Z]+', '', myString, 0, re.I) 
```

如果你真的需要那个循环，有很多 awnsers，具体解释一下。但是，您可能想说明需要循环的原因。

如果您想对数字序列进行操作，这就是循环的原因，请考虑将替换字符串参数替换为如下函数：

```
import re

def numberPrinter(matchString) {
     print(matchString)
     return ''
}

def charFilter(myString)
    return re.sub('[^A-Z]+', '', myString, 0, re.I) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T06:11:09.067

string.isalpha() 方法检查字符串是否仅由字母字符组成。您可以使用它来检查是否需要进行任何修改。至于问题的另一部分， pst 是正确的。您可以在 python 文档中阅读有关正则表达式的信息：http: [//docs.python.org/library/re.html](http://docs.python.org/library/re.html) 它们可能看起来令人生畏，但一旦您掌握了它们就会非常有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T06:16:28.480

当然你可以使用`isalpha`. 此外，`valids`可以是一个字符串。

干得好：

```
def letters(input):
    valids = ""
    for character in input:
        if character.isalpha():
            valids += character
    return valids 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-08T20:54:30.980

**不使用 for 循环。**但这已经被彻底覆盖了。

可能有点晚了，我不确定性能，但我只是想到了这个看起来很漂亮的解决方案：

```
set(x).intersection(y) 
```

你可以像这样使用它：

```
from string import ascii_letters

def letters(string):
    return ''.join(set(string).intersection(ascii_letters)) 
```

**注意：** 这不会保留线性顺序。在我的用例中这很好，但要**注意**。

# objective-c - 如何使 NSView 不裁剪其边界区域？

> ID：12400273
> 
> 赞同：9
> 
> 时间：2012-09-13T06:03:00.883
> 
> 标签：objective-c, macos, cocoa, nsview, appkit

我在 Xcode for OS X 上创建了一个空的 Cocoa 应用程序，并添加了：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
    self.view = [[NSView alloc] initWithFrame:NSMakeRect(100, 100, 200, 200)];
    self.view.wantsLayer = YES;
    self.view.layer = [CALayer layer];
    self.view.layer.backgroundColor = [[NSColor yellowColor] CGColor];
    self.view.layer.anchorPoint = CGPointMake(0.5, 0.5);
    self.view.layer.transform = CATransform3DMakeRotation(30 * M_PI / 180, 1, 1, 1);

    [self.window.contentView addSubview:self.view];
} 
```

但是旋转图层的背景被视图的边界区域裁剪：

![在此处输入图像描述](../Images/5614de920807af10b2717350cc6800e3.png)

我认为自从某些版本的 OS X 和 iOS 以来，视图不会剪切其子视图的内容，而是会显示内部和外部的所有内容？在 iOS 上，我确实看到了这种行为，但我想知道为什么它会这样显示以及如何让所有内容都显示出来？（我已经在 Mountain Lion 上使用最新的 Xcode 4.4.1）。

（注意：如果您尝试上面的代码，您将需要链接到 Quartz Core，并且可能会导入 Quartz Core 头文件，虽然我想知道为什么我没有导入头文件并且它仍然可以完美编译）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-15T05:17:00.320

事实证明，如果该行：

```
((NSView *)self.window.contentView).wantsLayer = YES; 
```

被添加到最开始，然后它按预期工作：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{  
    ((NSView *)self.window.contentView).wantsLayer = YES;

    self.view = [[NSView alloc] initWithFrame:NSMakeRect(200, 200, 200, 200)];

    self.view.wantsLayer = YES;

    self.view.layer.backgroundColor = [[NSColor yellowColor] CGColor];

    [self.window.contentView addSubview:self.view];
    self.view.layer.anchorPoint = CGPointMake(0.5, 0.5);

    self.view.layer.transform = CATransform3DMakeRotation(30 * M_PI / 180, 0, 0, 1);

} 
```

所以看起来如果所有视图都被层支持，那么它的工作方式与在 iOS 上的工作方式相同。（如果有一种快速的方法可以自动支持所有视图层，那就太好了）。

该`anchorPoint`行不能在行之前移动`addSubview`，否则它是不正确的，尽管我想知道为什么这会有所不同。

如果有层支持，`self.view.layer = [CALayer layer];`则可以删除该行。`window.contentView`contentView 和`self.view`layer 都不需要设置，我也想知道为什么。

`transform`线不能在线之前，`addSubview`否则它不会旋转，我也想知道为什么。

第三件事是，我想如果我去 Interface Builder 并将 contentView 设为`ContentView`（子类化`NSView`）的类，并在其`init`方法中执行 a `self.wantsLayer = YES;`，那么它也可以工作，但事实并非如此。

但无论如何，上面的代码是有效的，当我发现更多时，我会更新上面的原因。

![在此处输入图像描述](../Images/20abd2248e4c6120e6ed6fb175bef48a.png)

# database - 来自文本工具的实体关系图

> ID：12400278
> 
> 赞同：1
> 
> 时间：2012-09-13T06:03:47.587
> 
> 标签：database, data-modeling, entity-relationship, diagramming

是否有任何 ER 工具可以使用文本输入生成模型？我目前正在使用 dia，这是一个很棒的工具，但我正在寻找可以接受文本作为输入的东西。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T06:09:04.333

`<xml>`尽管 Visio 不支持 XML 数据源，但您可以通过直接获取输入来使用视觉，除非您有可以从`<XML>`文件中读取的 ODBC 驱动程序或 OLE DB 驱动程序。

然后您可以根据文本输入制作 ER 图。

希望这个对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-15T23:02:59.303

另一种选择是[erd](https://github.com/BurntSushi/erd)。从项目描述中，它：

> 将关系数据库模式的纯文本描述转换为图形实体关系图。

听起来像是OP正在寻找的那种东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-05T10:15:02.713

我知道这是一个老问题，但仍在寻找相同的问题。

实际上我发现了一个不错的工具，但不是开源的：[https ://dbdiagram.io](https://dbdiagram.io)

愿它有所帮助。

# migration - 迁移到 JBoss AS 7.1 的问题

> ID：12400280
> 
> 赞同：1
> 
> 时间：2012-09-13T06:03:56.507
> 
> 标签：migration, jboss7.x

我正在将应用程序从 JBoss AS 4.X 迁移到 JBoss AS 7.1。我面临以下问题

我有一个用户定义的 xml，它有一些与配置相关的东西，比如路径、初始加载设置等，我曾经放在`Application Server/bin`JBoss AS 4.X中。它工作正常。

现在我将相同的文件放入其中，`jboss-as-7.1.1.Final\bin`但它无法正常工作并在服务器启动时加载。

我需要在 7.1 Server 中将此类 XML 保存在哪里？我需要明确提及`jboss-deployment-structure.xml`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T19:10:32.557

您可以尝试编写自定义[模块](https://docs.jboss.org/author/display/MODULES/Home)并将 xml 文件放在那里。然后让你的应用依赖这个模块。

**编辑：**

以下 Wiki 页面很好地概述了[如何将外部文件放入类路径中](https://community.jboss.org/wiki/HowToPutAnExternalFileInTheClasspath)

# php - 如何在每个请求的根 URL 后添加一个单词？

> ID：12400283
> 
> 赞同：2
> 
> 时间：2012-09-13T06:04:12.287
> 
> 标签：php, .htaccess, url-rewriting, drupal-6

考虑

```
http://localhost/MyProject/ 
```

这是根网址

访问此内容时，我想将网址更改为

```
http://localhost/MyProject/Apps/ 
```

该 url 应如上所示，但应执行

```
http://localhost/MyProject/index.php 
```

那就是我只想在网址中添加“应用程序”一词。没有名为“应用程序”的文件夹...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T06:08:27.820

```
RewriteEngine On

RewriteCond %{HTTP_HOST} ^localhost/MyProject/index/$ [NC]
RewriteRule ^(.*)$ http:localhost/index.php [R=301,L] 
```

希望这会有所帮助......因为我没有在我的本地环境中尝试过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T06:06:49.893

您需要在文件中添加 Mod_Rewrite `.htaccess`（在您的`MyProject`文件夹中）：

```
<IfModule mod_rewrite.c>
  RewriteEngine on
  RewriteRule /? Apps/ [R=301,L] # Force people to the "Apps" folder 
  RewriteRule Apps/?$ index.php # Make "Apps" load the index
</IfModule> 
```

# ruby - 解析 2 个 CSV 文件并在第三个文件中打印公共值的最佳方式

> ID：12400287
> 
> 赞同：0
> 
> 时间：2012-09-13T06:04:48.177
> 
> 标签：ruby, refactoring

我是 Ruby 新手，我一直在努力解决一个我怀疑答案很简单的问题。我有两个 CSV 文件，一个有两列，一个有单列。单列是我的第一个文件的一列中存在的值的子集。例子：

文件 1.csv：

```
abc,123
def,456
ghi,789
jkl,012 
```

文件 2.csv：

```
def
jkl 
```

我需要做的就是在 file1 中为 file2 中的每个值查找第 2 列的值，并将结果输出到单独的文件中。所以在这种情况下，我的输出文件应该包括：

```
456
012 
```

我的工作方式是这样的：

```
pairs=IO.readlines("file1.csv").map { |columns| columns.split(',') }

f1 =[]
pairs.each do |x| f1.push(x[0]) end

f2 = IO.readlines("file2.csv").map(&:chomp)

collection={}
pairs.each do |x| collection[x[0]]=x[1] end

f=File.open("outputfile.txt","w")
  f2.each do |col1,col2| f.puts collection[col1] end
f.close 
```

...但必须有更好的方法。如果有人有更优雅的解决方案，我将不胜感激！（我还应该注意，我最终需要在数百万行的文件上运行它，所以速度将是一个问题。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:24:49.370

为了尽可能提高内存效率，我建议只将完整的 file2（我收集的将是两个输入文件中较小的一个）读取到内存中。我使用散列进行快速查找并存储结果值，因此当您阅读 file1 时，您只存储您需要的那些键的值。您可以更进一步，在读取 file2 的同时写入输出文件。

```
require 'CSV'

# Read file 2, the smaller file, and store keys in result Hash
result = {}
CSV.foreach("file2.csv") do |row|
  result[row[0]] = false
end

# Read file 1, the larger file, and look for keys in result Hash to set values
CSV.foreach("file1.csv") do |row|
  result[row[0]] = row[1] if result.key? row[0]
end

# Write the results
File.open("outputfile.txt", "w") do |f|
  result.each do |key, value|
    f.puts value if value
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T06:41:48.400

用 Ruby 1.9.3 测试

**解析文件 1**

```
data_csv_file1 = File.read("file1.csv")
data_csv1 = CSV.parse(data_csv_file1, :headers => true) 
```

**解析文件 2**

```
data_csv_file2 = File.read("file2.csv")
data_csv2 = CSV.parse(data_csv_file1, :headers => true) 
```

**名字的集合**

```
names_from_sheet1 = data_csv1.collect {|data| data[0]} #returns an array of names

names_from_sheet2 = data_csv2.collect {|data| data[0]} #returns an array of names

common_names = names_from_sheet1 & names_from_sheet2 #array with common names 
```

**收集要打印的结果**

```
 results = [] #this will store the values to be printed
 data_csv1.each {|data| results << data[1] if common_names.include?(data[0]) } 
```

**最终输出**

```
 f = File.open("outputfile.txt","w")
    results.each {|result| f.puts result }
    f.close 
```

# android - 将数据库复制到 sdcard .pl 时出现 PERMISSION DENIED 错误

> ID：12400289
> 
> 赞同：2
> 
> 时间：2012-09-13T06:04:52.973
> 
> 标签：android, permission-denied

我一整天都在尝试这个，但在我也给了 WRITE_EXTERNAL STORAGE PERMISSION 之后，我仍然得到这个 PERMISSION DENIED 错误。现在我在手机上尝试了这个程序。同样的许可错误出现在 logcat 上。我尝试了这个网站上提供的许多代码。它总是失败。用一些教程指导我将数据库复制到 sdcard

```
try {
    File sd = Environment.getExternalStorageDirectory();
    File data = Environment.getDataDirectory();

    if (sd.canWrite()) {
        String currentDBPath = "data/com.sri.tut/databases/image_storage.db";
        String backupDBPath = "image_storage.db";
        File currentDB = new File(data, currentDBPath);
        File backupDB = new File(sd, backupDBPath);

        if (currentDB.exists()) {
            FileChannel src = new FileInputStream(currentDB).getChannel();
            FileChannel dst = new FileOutputStream(backupDB).getChannel();
            dst.transferFrom(src, 0, src.size());
            src.close();
            dst.close();
        }
    }
} catch (Exception e) {
} 
```

这是我的 Logcat 输出。

```
 09-14 08:36:07.663: ERROR/Movedb(12336): Error in       Copyingjava.io.FileNotFoundException: /data/data/com.sri.assign/databases/AssignmentsDB      (Permission denied)
    09-14 08:36:09.413: ERROR/Movedb(12336): Error in Copyingjava.io.FileNotFoundException: /data/data/com.sri.assign/databases/AssignmentsDB (Permission denied)
    09-14 08:36:09.963: ERROR/Movedb(12336): Error in Copyingjava.io.FileNotFoundException: /data/data/com.sri.assign/databases/AssignmentsDB (Permission denied)
    09-14 08:36:10.203: ERROR/Movedb(12336): Error in Copyingjava.io.FileNotFoundException: /data/data/com.sri.assign/databases/AssignmentsDB (Permission denied)
    09-14 08:36:10.654: ERROR/Movedb(12336): Error in Copyingjava.io.FileNotFoundException: /data/data/com.sri.assign/databases/AssignmentsDB (Permission denied)
    09-14 08:36:10.854: ERROR/Movedb(12336): Error in Copyingjava.io.FileNotFoundException: /data/data/com.sri.assign/databases/AssignmentsDB (Permission denied)
    09-14 08:36:11.083: ERROR/Movedb(12336): Error in Copyingjava.io.FileNotFoundException: /data/data/com.sri.assign/databases/AssignmentsDB (Permission denied)
    09-14 08:36:11.283: ERROR/Movedb(12336): Error in Copyingjava.io.FileNotFoundException: /data/data/com.sri.assign/databases/AssignmentsDB (Permission denied)
    09-14 08:36:11.683: ERROR/Movedb(12336): Error in Copyingjava.io.FileNotFoundException: /data/data/com.sri.assign/databases/AssignmentsDB (Permission denied)
    09-14 08:36:11.934: ERROR/Movedb(12336): Error in Copyingjava.io.FileNotFoundException: /data/data/com.sri.assign/databases/AssignmentsDB (Permission denied)
    09-14 08:36:12.224: ERROR/Movedb(12336): Error in Copyingjava.io.FileNotFoundException: /data/data/com.sri.assign/databases/AssignmentsDB (Permission denied)
    09-14 08:36:12.463: ERROR/Movedb(12336): Error in Copyingjava.io.FileNotFoundException: /data/data/com.sri.assign/databases/AssignmentsDB (Permission denied)
    09-14 08:36:12.734: ERROR/Movedb(12336): Error in Copyingjava.io.FileNotFoundException: /data/data/com.sri.assign/databases/AssignmentsDB (Permission denied)
    09-14 08:36:13.053: ERROR/Movedb(12336): Error in Copyingjava.io.FileNotFoundException: /data/data/com.sri.assign/databases/AssignmentsDB (Permission denied)
    09-14 08:36:13.413: ERROR/Movedb(12336): Error in Copyingjava.io.FileNotFoundException: /data/data/com.sri.assign/databases/AssignmentsDB (Permission denied)
    09-14 08:36:13.694: ERROR/Movedb(12336): Error in Copyingjava.io.FileNotFoundException: /data/data/com.sri.assign/databases/AssignmentsDB (Permission denied)
    09-14 08:36:13.914: ERROR/Movedb(12336): Error in Copyingjava.io.FileNotFoundException: /data/data/com.sri.assign/databases/AssignmentsDB (Permission denied)
    09-14 08:36:14.303: ERROR/Movedb(12336): Error in Copyingjava.io.FileNotFoundException: /data/data/com.sri.assign/databases/AssignmentsDB (Permission denied)
    09-14 08:36:14.563: ERROR/Movedb(12336): Error in Copyingjava.io.FileNotFoundException: /data/data/com.sri.assign/databases/AssignmentsDB (Permission denied)
    09-14 08:36:14.804: ERROR/Movedb(12336): Error in Copyingjava.io.FileNotFoundException: /data/data/com.sri.assign/databases/AssignmentsDB (Permission denied)
    09-14 08:37:42.253: WARN/PackageManager(67): Mounting container com.sri.copydata-1
    09-14 08:37:45.634: WARN/InputManagerService(67): Got RemoteException sending setActive(false) notification to pid 12336 uid 10053

    09-14 08:37:52.463: WARN/PackageManager(67): Code path for pkg : com.sri.copydata changing from /mnt/asec/com.sri.copydata-2/pkg.apk to /mnt/asec/com.sri.copydata-1/pkg.apk
    09-14 08:37:52.463: WARN/PackageManager(67): Resource path for pkg : com.sri.copydata changing from /mnt/asec/com.sri.copydata-2/pkg.apk to /mnt/asec/com.sri.copydata-1/pkg.apk
    09-14 08:38:00.773: WARN/RecognitionManagerService(67): no available voice recognition services found
    09-14 08:42:05.613: WARN/PackageManager(67): Mounting container com.sri.copydata-2
    09-14 08:42:11.294: WARN/InputManagerService(67): Got RemoteException sending setActive(false) notification to pid 13273 uid 10053
    09-14 08:42:20.063: WARN/PackageManager(67): Code path for pkg : com.sri.copydata changing from /mnt/asec/com.sri.copydata-1/pkg.apk to /mnt/asec/com.sri.copydata-2/pkg.apk
    09-14 08:42:20.063: WARN/PackageManager(67): Resource path for pkg : com.sri.copydata changing from /mnt/asec/com.sri.copydata-1/pkg.apk to /mnt/asec/com.sri.copydata-2/pkg.ap
    09-14 08:42:29.033: WARN/RecognitionManagerService(67): no available voice recognition services found
    09-14 08:42:51.374: ERROR/Movedb(14575): Error in Copyingjava.io.FileNotFoundException: /data/data/com.sri.assign/databases/AssignmentsDB (Permission denied)
    09-14 08:43:14.043: ERROR/Movedb(14575): Error in Copyingjava.io.FileNotFoundException: /data/data/com.sri.assign/databases/AssignmentsDB (Permission denied) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T13:47:19.907

如果您将设备连接到您的电脑并启用

```
copy files to/from computer etc... 
```

您将无权在 SD 卡上写入。

断开它与电脑的连接，然后重试或禁用复制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:36:34.067

日志显示您无权从 /data/data/com.sri.tut/databases/image_storage.db 读取数据，默认情况下，此 /data 目录是 linux 系统目录，其用户和组所有者为 'system '，不是你的应用程序，所以你没有权限。

您可以在 adb shell 中查看详细信息，您将看到如下属性： `drwxrwx--x system system 2012-09-14 08:30 data`

# python - 红宝石中是否有PIL等价物？

> ID：12400291
> 
> 赞同：0
> 
> 时间：2012-09-13T06:04:56.730
> 
> 标签：python, ruby, python-imaging-library

[Python 图像库](http://www.pythonware.com/products/pil/)比我想在 Ruby 中使用它还要好。有没有冒号/端口/包装器/等价物？我知道`RMagick`，但它似乎很重，学习曲线很陡峭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:08:00.887

你可以试试[Ruby 的恶魔](http://banisterfiend.wordpress.com/2009/10/14/the-devil-image-library-for-ruby/)。它不是 PIL 端口/包装器，但似乎功能不错，快速且轻量级。它的学习曲线似乎不是很尖锐。不幸的是，文档不是很全面。

# python - Python如何在字符串中找到正确的结果

> ID：12400292
> 
> 赞同：2
> 
> 时间：2012-09-11T13:14:41.173
> 
> 标签：python, temperature

我正在使用 Occidentalis v0.2 并使用 python 脚本调用 modprobe 来读取 DS18B20 的温度！

我也是 python 新手，所以请耐心等待，这是我代码的一小部分：

```
with open(path, "r") as f:
  contentArray = []
  for line in f:
    contentArray.append (line)
f.close

s = contentArray[0]
if s.find('YES'):
  return contentArray[0]
else:
  return 88 
```

示例： contentArray[0] 可以给出如下结果：

```
68 01 4b 46 7f ff 0c 10 05 : crc=3e NO 
```

或者：

```
68 01 4b 46 7f ff 08 10 05 : crc=05 YES 
```

如果上面的代码是错误的，我该怎么做才能找到`YES`？因为这表明正确的 CRC。如果我有一个是，我实际上想返回`contentArray[1]`（其中包含正确的温度值）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:49:41.820

解决了，我必须在代码中进行此更改：

```
s = contentArray[0]
if s.find('YES') != -1:
  return contentArray[0]
else:
  return 88 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-05T16:15:26.800

谢谢，下次我会试试 .find 命令。我只是为 bash 编写了一个小单行脚本以保存温度读数。当然还有很大的改进空间。

```
while true; do echo -n "$(date '+%D %T'); " >> output.csv; cat /sys/devices/w1_bus_master1/*/w1_slave | grep -A 1 YES | grep -m 1 t= | cut -c30- >> output.csv; sleep 1; done 
```

如您所见，关键字“YES”和“t=”由 grep 命令找到。

# php - 日期函数显示 7-12-2012 而不是 07-12-2012 和 01-01-2012 作为 1-1-2012

> ID：12400294
> 
> 赞同：2
> 
> 时间：2012-09-13T06:05:22.497
> 
> 标签：php

日期函数显示 07-12-2012 而不是 7-12-2012

我正在使用这个`date("Y-m-d H:i:s")`

我想将 2012 年 12 月 7 日显示为 7-12-2012

将月份显示为 2012 年 1 月 1 日而不是 2012 年 1 月 1 日的 01-01-2012 怎么样

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T06:06:32.933

改用这个：

```
date("Y-m-j H:i:s") 
```

`d`用前导零显示天数，`j`只显示天数。

编辑：乍一看，您使用的字符串与您想要的输出完全不同：

```
date("j-m-Y"); 
```

应该得到你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T06:07:46.477

使用`j`而不是`d`.

```
echo date('j-m-Y'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T06:07:10.473

改成：

```
date("j-m-Y"); 
```

[在此处](http://php.net/manual/en/function.date.php)阅读有关变量的信息。

# jquery - zClip 在 Bootstrap 选项卡中无法使用 jQuery UI 对话框

> ID：12400295
> 
> 赞同：0
> 
> 时间：2012-09-13T06:05:26.120
> 
> 标签：jquery, jquery-ui, zclip

为什么在调用 .dialog() 后，zClip (1.1.1) 不能与 jQuery UI（至少 1.8.23 和 1.8.21）对话框一起使用？Copy to Clipboard 按钮位于 bootstrap`tab-pane`中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:05:26.120

我只花了两个小时试图弄清楚这一点，但找不到关于 SO 的等效问题。如果您尝试将 jQuery UI 与 zClip 一起使用，即使“复制到剪贴板”按钮不在对话框中，请注意：它不起作用。我已经尝试了所有关于 SO 的类似问题的答案（比如设置绝对位置、设置块内联、设置 zIndex 等......），但没有一个有效。我很确定这也与 ZeroClipboard 复制按钮位于 Bootstrap 中的事实有关`tab-pane`。

我希望他们尽快修复它，不管是谁的错。

更新：我切换到 Bootstrap 模式，当`tab-pane`包含 ZeroClipboard 复制按钮也是`active`. 如果不是`active`，则不起作用。我很确定我也尝试过使用 jQuery UI 对话框，但没有成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-29T00:38:34.063

它不适用于最新版本的 boostrap 模态。

# ios - 如何强制 UISearchDisplayController 更新

> ID：12400298
> 
> 赞同：1
> 
> 时间：2012-09-13T06:05:39.367
> 
> 标签：ios, objective-c, xcode, uisearchdisplaycontroller

我正在创建一个搜索控制器，我想做自动完成。

没关系。

但是我从几个来源获得了数据。首先，我从本地缓存中获取数据。然后我从网上加载数据。

因此，当我们完成数据下载后，我们想让 searchcontroller 重新加载它的表并包含新数据。

我们如何做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-18T11:06:42.447

您可以只调用`reloadData`搜索显示控制器的表格视图：

```
[self.searchDisplayController.searchResultsTableView reloadData]; 
```

# linux - 从文件中读取用户名和密码

> ID：12400299
> 
> 赞同：2
> 
> 时间：2012-09-13T06:05:49.240
> 
> 标签：linux, bash, scripting, fedora

我正在寻找读取文件的用户名和密码并输入这些以添加用户或删除用户的方法。

EG：我有一个名为“userlist”的文件，其内容如下：

```
user1 pass1
user2 pass2
user3 pass3 
```

我完全不明白的是如何使用 BASH 脚本添加这些帐户。

我到目前为止是这样的：

```
if [[ whoami -ne "root" ]]
then
exit
else
echo "wish to add or delete? a/d"
read uArg
echo "enter file name"
read uFile
if [ $uArg = "a" -o $uArg = "A" ]
then
    IDK WHAT TO DO HERE.
elif [ $uArg = "d" -o $uArg = "D" ]
then
   IDK WHAT TO DO HERE.
fi
fi 
```

好吧，我不明白的是如何逐行读取每个单词并输入用户名和密码以添加新用户或删除现有用户。

该程序用于读取整个文件并为每个用户添加相应的密码。如果选择删除，则它会删除文件中的每个用户。

我是 BASH 的新手，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T11:47:56.113

`awk`完美满足您的需求。

看这个例子：

```
$ awk '{print "Hi! my name is " $1 ", and my pass is " $2}' ./userpass.txt 
Hi! my name is user1, and my pass is pass1
Hi! my name is user2, and my pass is pass2
Hi! my name is user3, and my pass is pass3 
```

awk 将用户名存储在 $1 中，密码存储在 $2 中（第一列和第二列）。

您可以使用管道来执行从 awk 获得的字符串作为命令：

```
$ awk '{print "echo " $1}' ./userpass.txt | /bin/bash
user1
user2
user3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T06:37:55.747

类似于...的东西

```
if [[ whoami -ne "root" ]]
    then
    exit
else
    echo "wish to add or delete? a/d"
    read uArg
    echo "enter file name"
    read uFile
    if [ $uArg = "a" -o $uArg = "A" ]
    then
        while read user passwd rest
        do
            if [ ! -z $rest ]; then
                echo "Bad data"
            else
                useradd -m $user
                passwd $user <<EOP
$passwd
$passwd
EOP
            fi
        done < $uFile
    elif [ $uArg = "d" -o $uArg = "D" ]
    then
        while read user passwd rest
        do
            if [ ! -z $rest ]; then
                echo "Bad data"
            else
                userdel $user
            fi
        done < $uFile
    fi
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T06:38:16.463

第一条评论：

*   学习并习惯基本命令，如 grep、sed、echo，通常与文件操作有关，如果你想了解 bash 基础知识，awk 也是一个不错的选择，你会遇到很多关于文件操作的知识
*   代码可以使用更多的错误测试，它只是一个基本的骨架
*   小心字符串和变量，尽可能引用它们，字符串中的空格可能会造成很多坏事

可能是这样的：

```
echo "wish to add or delete? a/d"
read uArg
echo "enter username"
read uName
grep "^$uName " password-file
RET=$?

if [ "$uArg" == "a" -o "$uArg" == "A" ]
then
    [ $RET -eq 0 ] && echo "User is already in file"

    if [ $RET -ne 0 ]
    then
        echo "enter password"
        read uPass
        echo "$uName $uPass" >> password-file
    fi

elif [ "$uArg" == "d" -o "$uArg" == "D" ]
then
    [ $RET -ne 0 ] && echo "User is not file"

    if [ $RET -eq 0 ]
    then
        sed -i "/^$uName /d" password-file
        echo "User deleted"

    fi
fi 
```

# c# - asp.net mvc 生成数据下载文件

> ID：12400303
> 
> 赞同：2
> 
> 时间：2012-09-13T06:05:55.903
> 
> 标签：c#, asp.net-mvc, stream, download

```
public ActionResult GetFile(string dateStr, string serverName, string foodName)
{
        using (var memoStream = new MemoryStream(1024 * 5))
        {
            using (StreamWriter writer = new StreamWriter(memoStream))
            {
                var dataFilter = new CapacityDataFilter(dateStr, serverName, feedName);
                dataFilter.FilterDataByServerAndFeed();
                writer.WriteLine("Feed, StreamMin, TotalMsgNumber, TotalMsgSize, PeakRateMsgNumber, PeakRateMsgSize");

                foreach (var element in dataFilter.DataInTheDay)
                {
                    writer.WriteLine(string.Format("{0},{1},{2},{3},{4},{5}",
                            element.Feed, element.StreamMin,
                            element.TotalMsgNumber, element.TotalMsgSize,
                            element.PeakRateMsgNumber, element.PeakRateMsgSize));
                }

                return File(memoStream, "text/csv", fileName);
            }
        }
} 
```

`Exception Details: System.ObjectDisposedException: Cannot access a closed Stream.`

此动作不起作用，如何进行下载动作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T06:10:10.863

“这个动作不起作用”是解释问题的错误方式......

但是在这种情况下，您很幸运：您正试图在内存流中发送不完整的数据，该数据流被寻找到最后，并且第二个问题流将在 File 操作实际执行时被处理。

最好的解决方法是将代码移出内部`using`并在旧流的缓冲区上返回新的 MemoryStream：

```
using (var memoStream = new MemoryStream(1024 * 5)) 
{ 
   using (StreamWriter writer = new StreamWriter(memoStream)) 
   { 
...
   }
   return File(
      new MemoryStream(memoStream.GetBuffer(), memoStream.length),
      "text/csv", fileName); 
} 
```

当您立即使用流时，armen.shimoon 提出的 Flush + Seek 在其他情况下也可以工作：

```
writer.Flush();
memoStream.Flush();
memoStream.Position = 0;    
// do something with MemoryStream right here before either of `using`ends. 
```

# tm - wordcloud 包：获取“strwidth（...）中的错误：'cex' 值无效”

> ID：12400305
> 
> 赞同：5
> 
> 时间：2012-09-13T06:06:08.087
> 
> 标签：tm

我在 R 2.15.1 中使用 tm 和 wordcloud 包。我正在尝试从 DTM 制作文字云。这是代码：

```
library(wordcloud)
thedtmsparse = inspect(sparse)
trymatrix = t(thedtmsparse)
colnames(trymatrix) = c()
comparison.cloud(trymatrix, max.words=15, random.order=FALSE) 
```

我从最后一个命令中收到以下错误：

```
Error in strwidth(words[i], cex = size[i], ...) : invalid 'cex' value 
```

我在另一个 DTM 上使用了相同的代码，它运行良好，我得到了词云。有人可以告诉我解决该错误的方法吗？

拉维

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-24T17:39:24.457

您没有提供可重现的代码（可能是没有人回答您的问题的一个重要原因），所以我只能冒险猜测问题可能是什么。

我遇到了同样的错误，所以我将分享我的经验。问题是我的术语文档矩阵中有`NA`'s 而不是`0`'s。只需修复它即可解决该问题。

# c# - ASP.NET HeadLoginView 注销点击。也退出其他本地网站

> ID：12400306
> 
> 赞同：2
> 
> 时间：2012-09-13T06:06:10.643
> 
> 标签：c#, asp.net, .net, login

我有 2-3 个网络项目（初学者）。在所有网站中，我都有一个用户可以登录的登录控件。当用户使用正确的信息登录时，我设置

```
 protected void Login1_Authenticate(object sender, AuthenticateEventArgs e)
{

    if (CHUser.AunthencateLogin(Login1.UserName, Login1.Password))//Checks with database
        e.Authenticated = true;
    else
        e.Authenticated = false;
 } 
```

到这里为止很好，但是当我同时登录 2 个单独的网站（本地）并在其中任何一个上注销时，就会出现问题。当我在另一个网站上注销时（刷新时）。以下是我在注销时使用的代码。

```
protected void LoginStatus1_LoggingOut(object sender, LoginCancelEventArgs e)
    {
        Session.Clear(); //though logout works without this code. It is for other
 //sessions that are manually created by me
        } 
```

我看不出来是什么原因造成的。我也是网络开发的新手。

我还想知道这是否是登录用户的正确方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-07T20:06:07.277

（在问题编辑中回答。转换为社区 wiki 答案。请参阅[将问题的答案添加到问题本身时的适当操作是什么？](https://meta.stackoverflow.com/questions/267434/what-is-the-appropriate-action-when-the-answer-to-a-question-is-added-to-the-que)）

OP写道：

> 谢谢@Aristos。通过在 web.config 第一个项目上使用以下代码解决了该问题
> 
> ```
> <authentication mode="Forms">
>  <forms name=".Cookie1" ... />
> </authentication> 
> ```
> 
> 第二个项目
> 
> ```
> <authentication mode="Forms">
>      <forms name=".Cookie2" ... />
>     </authentication> 
> ```

# java - 如何使用swing创建像netbeans的状态栏一样的状态栏？

> ID：12400307
> 
> 赞同：-1
> 
> 时间：2012-09-13T06:06:13.597
> 
> 标签：java, swing, popup, toolbar

![在此处输入图像描述](../Images/e49f3f9b5c8f5cb471cb3c3e170e4bc8.png)

这是截图。以及如何使用摇摆来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T08:29:32.530

像这样的系统栏没有开箱即用的解决方案，但做这样的事情并不难。它只是一个带有标签（“Blazze (run)”）的面板（带有右对齐的 Flowlayout）、一个显示当前进度的 JProgressBar 和一个取消按钮。

将 BorderLayout 添加到您的主内容面板，并添加方向为 SOUTH 的系统栏。

如果您不了解 Swing 布局概念，请务必阅读[本文](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)。

如果您不了解进度条，请阅读[此](http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html)内容。

之后你所要做的就是控制文本和可见性等等。

* * *

编辑：

对于弹出窗口，我建议使用未装饰的 JDialog 或 JWindow，并使用 TimerTask 使其在给定时间后可见/消失。但这取决于您想要实现的目标。默认工具提示仅适用于文本（和简单的 HTML）。

# php - 导入通讯录联系人，存储在数组中并保存到数据库

> ID：12400308
> 
> 赞同：0
> 
> 时间：2012-09-13T06:06:18.380
> 
> 标签：php, jquery, database, arrays, contacts

我使用[Contact Grabber API](http://stescodes.com/contactgrabber_apidoc.aspx)来检索通讯录联系人。

我的意图是允许用户选择他们的联系人（通过复选框列表）并将这些值插入数据库。

列表的 HTML：

```
<input type="checkbox" name="user_email" value="{users_email}" /> 
```

JQUERY 将数据发布到 PHP 表单

```
 $("#divDone").click(function() {
        var data = { 'user_email' : []};
        $(":checked").each(function() {
          data['user_email'].push($(this).val());
        });
        $.post("ajax.php", data);
    }); 
```

ajax.php

```
var_export($_POST); 
```

ajax.php 文件回显以下示例（选择两个联系人）

```
array (
 'user_email' => 
  array (
    0 => 'gmail',
    1 => '{email1}',
    2 => '{email2}',
  ),
) 
```

如何提取电子邮件值并将它们存储到我的数据库中？这种方法正确吗？

谢谢大家

乔治

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:22:15.097

我希望您知道 MySQL 数据库是什么以及如何设置表，请参见下面的基本示例，您可以将所有电子邮件放入一个名为的表中，该表`Emails`只有一列`email`

```
//Did we get a post?
if(empty($_POST['user_email']) && is_array($_POST['user_email'])) {
  echo "No Email's received. Check the post.";
} else {
  $emails = $_POST['user_email'];

  $errors = "";

  //## Connect to MYSQL here ##//
  $con = null; //SEE ABOVE

  //For all the posted emails
  foreach($emails as $email) {
    //Trim and escape the input
    $email = mysqli_real_escape_string(trim($email));
    $sql = "INSERT INTO Emails (email) ";
    $sql += "VALUES ('$email')";

    //If an error occurred add it to the list
    if (!mysql_query($sql,$con)) $errors += mysql_error()."\n";
  } //for each

  //Any errors?
  if(!empty($errors)) echo $errors;
} 
```

# ios - phonegap2.0 支持的最新 xcode 版本是什么

> ID：12400314
> 
> 赞同：1
> 
> 时间：2012-09-13T06:06:34.950
> 
> 标签：ios, xcode, cordova

我正在使用 Mac OS X Snow Leopard 的 Xcode 4.2 版本中的 Phonegap 2.0 cordova 工作。现在我想切换到 Xcode 4.3 和 Mac OS Lion。我不知道 XCode 4.3 和 Mac OS Lion 是否支持 Phonegap 2.0。任何人都请帮助告诉 Mac OS 和 XCode 版本将支持 Phonegap 2.0 Cordova iOS 开发吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T06:47:11.377

Cordova 2.0 应该支持 Xcode 4.3，因为在 PhoneGap 官方网站上建议使用 iOS 的 Cordova 2.0 的基本要求是 Xcode 4.3+。

有关更多信息，您可以点击这些链接

[ios入门指南](http://docs.phonegap.com/en/2.0.0/guide_getting-started_ios_index.md.html)

[科尔多瓦的改进](http://shazronatadobe.wordpress.com/2012/07/20/improvements-in-cordova-2-0-0-for-ios/)

# iphone - 为 uitableviewcells 加载横向和纵向 xib 文件的最佳方法是什么？

> ID：12400317
> 
> 赞同：3
> 
> 时间：2012-09-13T06:06:53.843
> 
> 标签：iphone, objective-c, ios, uitableview

我的纵向 tableviewcell 在横向上不能很好地工作，即使使用自动调整大小的蒙版，所以我用一个新的 xib 文件重新排列了一些东西。

实施这一新格局的最佳方式是什么？我使用一堆 if 语句检查方向让它工作，但这似乎不太优雅。有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T06:43:22.303

为纵向和横向创建两个 UITableViewCell nib 文件。和一个自定义类（CustomCell.h 和 CustomCell.m），以 UITableViewCell 作为基类，这两个 NIB 将继承并使用您的自定义单元格实现以下内容。

```
-(void) willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {

 if ([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPad) {
            [[NSBundle mainBundle] loadNibNamed:@"customCell-Landscape" owner:self options:nil];

        }else
 {
            [[NSBundle mainBundle] loadNibNamed:@"customCell-Portrait" owner:self options:nil];

}

[tableView reloadData];

} 
```

然后在 tableview 数据源中

```
..

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @" identifier";
    CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (!cell) {
        if(UIInterfaceOrientationIsLandscape(self.interfaceOrientation)) {
            [[NSBundle mainBundle] loadNibNamed:@"customCell-Landscape" owner:self options:nil];
        }else {
            [[NSBundle mainBundle] loadNibNamed:@"customCell-Portrait" owner:self options:nil];
        }

    } 
```

# c - C 随机数生成器

> ID：12400320
> 
> 赞同：-2
> 
> 时间：2012-09-13T06:07:12.327
> 
> 标签：c

我编写了以下代码以在 C 中生成随机数。

```
int main (int argc, char *argv[])
{
    unsigned int iseed = (unsigned int)time(NULL);
    srand (iseed);

    /* Generate random number*/
    int i;
    for (i = 0; i < 1; i++)
    {
        printf ("Random[%d]= %u\n", i, rand ());
    }
    return 0;
} 
```

输出给了我一个 10 位的随机数，如何更改输出中打印的位数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T06:13:09.550

`rand()`给你一个介于 0 和 之间的数字`RAND_MAX`，这可能是一个很大的数字。

如果要在 range 中获得均匀的样本，则`[0, N)`需要将 range 划分为多个区域：

```
int my_max = (RAND_MAX / N) * N;

int result;

while ((result = rand()) >= my_max) { } // #1

return result % N; 
```

线上的条件`#1`应该很少满足，但我们需要在结果不在倍数范围内的情况下重新滚动，`N`以避免对高结果的偏见。

# php - 改进和功能化查询数组

> ID：12400332
> 
> 赞同：0
> 
> 时间：2012-09-13T06:07:55.307
> 
> 标签：php, sql

需要一点帮助、建议或链接到示例或有用的教程，以便我可以学习。因为我对编程很陌生。

我在名为“ore1”到“ore11”的表单中有 11 个选择框，它们将数据发送到 $_POST。这个小块将其转换为用于另一个函数的数组。

```
//function calculateValue($sellValue){  -- add when you figure it out
    if(isset($_POST['submit'])){
      $i = 11                           //total number of select boxes
      $pdquery = "SELECT * FROM ore
                  WHERE '".$_POST['ore1']."' 
                  LIKE id";
      $result = mysql_query($pdquery);
          $oredata1 = array();
             while ($row = mysql_fetch_row($result)) {
                  $oredata1 = $row; }
}
else {}
} 
```

我希望能够在所有 11 个选择框上使用这一位代码，而不必通过获取复制它 11 次

```
.$_POST['ore#'].   //5th line
$oredata# = $row;  //10th line 
```

根据所使用的选择框将 # 替换为适当的 #。

有小费吗？？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:12:39.903

在您的 HTML 中：

```
<select name="ore[]">
...
</select>
<select name="ore[]">
...
</select> 
```

在你的 PHP

```
if(isset($_POST['submit']) && isset($_POST['ore'])){
    foreach($_POST['ore'] as $ore){
        $ore = (int)$ore;
        $pdquery = "SELECT * FROM ore WHERE id = $ore";
        ...
    }
} 
```

也不要使用`mysql_*`函数，因为弃用过程已经开始

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T06:14:46.947

```
for ($i = 1; $i <= 11; $i++) {
  $ore = 'ore'.$i;
  $pdquery = "SELECT * FROM ore WHERE '".$_POST[$ore]."' like id";
  ... 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-13T06:12:15.553

在 for 循环中执行它 - 从 1 到 11。然后你可以使用变量 $i 来访问东西。

```
// I assume that there is some MySQLi object called $mysqli already present. You'll have to create it if it does not
if(isset($_POST['submit'])){
    $pdquery = 'SELECT * FROM ore WHERE id LIKE ?';
    $oredata = array();

    if($stmt = $mysqli->prepare($pdquery)) {
        for($i = 1; $i < 12; $i++) {
            $ore = 'ore' . $i;
            if(empty($_POST[$ore])) {
                 continue;
            }
            $oreValue = (int)$_POST[$ore];

            $stmt->bind_Param('i', $oreValue);
            $stmt->execute(); 

            $oredata[$i] = $stmt->get_result()->fetch_array(MYSQLI_ASSOC);
        }
    }
    $stmt->close();
} 
```

这没有考虑到可能不仅仅是这十一个输入的事实。在 HTML 端使用数组肯定会更干净（你只需要用 foreach-loop 替换 for-loop 并使用 key 而不是`$ore`）

# android - 如何在我的 Android 应用程序中连接 SQLite 数据库？

> ID：12400333
> 
> 赞同：-1
> 
> 时间：2012-09-13T06:07:58.923
> 
> 标签：android, sqlite

我无法将我的 android 应用程序与 SQLite 数据库连接。我尝试了很多方法，但我无法得到解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T06:16:32.860

这些是 Android 应用程序中 SQLite 数据库的参考...

[http://stdioe.blogspot.in/2012/03/how-to-connect-sqlite-database-in.html](http://stdioe.blogspot.in/2012/03/how-to-connect-sqlite-database-in.html)

[http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)

[http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

希望这可以帮助你...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T06:11:08.290

你可以试试这个[SqlLite 教程](http://www.hdelossantos.com/2010/01/07/using-a-sqlite-database-in-android/)，但是告诉我们更多。可能是您不想连接到内部 SQLLite（如简单的机器人工作），也许您想通过 ip-adress 连接到外部 SQLite 服务器或其他？

# c# - 动态填充的复选框会记住以前的选择

> ID：12400334
> 
> 赞同：0
> 
> 时间：2012-09-13T06:08:05.650
> 
> 标签：c#, sharepoint-2010, checkboxlist

我必须在 Sharepoint 站点的更新面板中动态填充一个复选框。问题是，即使我在单击按钮后清除了选择，复选框也会以某种方式记住以前的选择并显示 checkbox.items[i].selected 为 true，即使对于以前的选择，如果我删除更新面板，这个问题就解决了.但是我无法删除更新面板，因为每次进行选择时都会重新加载整个页面下面是我的代码

```
 <div align="left">
                <asp:UpdatePanel ID="UpdatePanel1" runat="server" ChildrenAsTriggers="True"  >
                <ContentTemplate> 
                <asp:CheckBoxList    BackColor="White"  AutoPostBack="true"   ID="cbHideTabs" 
                        runat="server"  isCheckable="true" ForeColor="#0072bc" Width="300px" >
                        </asp:CheckBoxList>

                    <input type ="button"    Visible ="true" ID="HideShowTabButton" value="HideShowTab" title="HideShowTab" runat="server"   style="background-color: #0072bc; color: #FFFFFF;" enableviewstate="False" />   

            </ContentTemplate>
                   </asp:UpdatePanel>
             </div>
     </asp:Panel>

        <br />

        <asp:PopupControlExtender ID="PopupControlExtender1" Enableviewstate="false" runat="server" CommitProperty="value"
           PopupControlID="Panel1" 
            Position="Bottom" TargetControlID="ShowHideLabel">
        </asp:PopupControlExtender> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:11:40.600

你能分享你用来清除选择的代码吗？

我修改了你的代码，它对我有用。

aspx 页面的代码

```
<%@ Page Title="Home Page" Language="vb" MasterPageFile="~/Site.Master" AutoEventWireup="false"
    CodeBehind="Default.aspx.vb" Inherits="UpdateCheckbox._Default" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
   <div>
    <asp:scriptmanager ID="Scriptmanager1" runat="server"></asp:scriptmanager>
    <asp:updatepanel ID="Updatepanel1" runat="server">
    <ContentTemplate> 
                <asp:CheckBoxList ID="chkAll"    BackColor="White"  AutoPostBack="true"   
                        runat="server"  isCheckable="true" ForeColor="#0072bc" Width="300px" >
                       <asp:ListItem Enabled="true" Text="1"></asp:ListItem>
                       <asp:ListItem Enabled="true" Text="1"></asp:ListItem>
                       <asp:ListItem Enabled="true" Text="1"></asp:ListItem>
<asp:ListItem Enabled="true" Text="1"></asp:ListItem>
<asp:ListItem Enabled="true" Text="1"></asp:ListItem>
<asp:ListItem Enabled="true" Text="1"></asp:ListItem>
<asp:ListItem Enabled="true" Text="1"></asp:ListItem>
                       <asp:ListItem Enabled="true" Text="1"></asp:ListItem>
                       </asp:CheckBoxList>
<asp:Button runat="server" Text="HideShowTab" runat="server" OnClick="Clear_Click"  style="background-color: #0072bc; color: #FFFFFF;" enableviewstate="False" />

            </ContentTemplate>

    </asp:updatepanel>
</div>
</asp:Content> 
```

vb.net 中的代码

```
Protected Sub Clear_Click(ByVal sender As Object, ByVal e As System.EventArgs)
        chkAll.ClearSelection()
    End Sub 
```

# java - ArrayAdapter 的 getView() 方法说明

> ID：12400338
> 
> 赞同：21
> 
> 时间：2012-09-13T06:08:40.893
> 
> 标签：java, android, android-listview, android-arrayadapter, android-adapter

你能解释一下的`getView()`方法`ArrayAdapter`。

我阅读了文档，它具有三个参数：

*   `position`：我们想要查看的项目的适配器数据集中项目的位置。
*   `convertView`：如果可能的话，要重用旧视图。注意：在使用之前，您应该检查此视图是否为非空且类型合适。如果无法将此视图转换为显示正确的数据，则此方法可以创建一个新视图。
    异构列表可以指定其视图类型的数量，以便此视图始终是正确的类型（参见 getViewTypeCount() 和 getItemViewType(int)）。
*   `parent`：此视图最终将附加到的父级

我理解了`position`参数。就像他们说的那样，它暗示了项目的位置，谁被请求查看。

究竟`convertView`从何而来。我见过很多例子，他们检查是否`convertView`为空。如果 is 为 null，它们会扩充行布局的新实例，填充并返回它。我想我也明白了这一点，但有一件事仍然让我感到困惑。`convertView`通过参数传入的布局是什么。如果[是初始化时传入](http://developer.android.com/reference/android/widget/ArrayAdapter.html#ArrayAdapter%28android.content.Context,%20int,%20int%29)[的`resource``ArrayAdapter`](http://developer.android.com/reference/android/widget/ArrayAdapter.html#ArrayAdapter%28android.content.Context,%20int,%20int%29)参数？是由返回的最后一个布局的缓存副本`getView()`吗？

最后。参数有什么作用`parent`。我还没有看到太多使用这个的例子。他们中的大多数只是简单地重用/膨胀行布局并返回它。

（我问是因为我的 . 中有一个点击动画`ListView`。特别[是这个旨在复制 Spotify 的下拉快速操作菜单](http://udinic.wordpress.com/2011/09/03/expanding-listview-items/)的动画。我的动画有点迟钝。在诊断了这个问题一段时间后，我意识到这是因为我的`getView()`方法需要一些时间来完成，因为我在每次迭代中都在膨胀一个新的行布局。有人建议在一段时间内缓存行布局，`ViewHolder`而其他示例指向重用`convertView`参数，即只膨胀一个如果`convertView`为空，则行布局。）

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-09-13T06:28:29.287

> 是 getView() 返回的最后一个布局的缓存副本吗？

这`convertView`是离开屏幕的行的视图（因此它不是该`getView`方法返回的最后一个视图）。例如，首先显示列表，在这种情况下`convertView`是`null`，之前没有构建任何行视图并离开屏幕。如果向下滚动，第 0 行将离开屏幕（不再可见），当发生这种情况时，`ListView`可能会选择将该视图保留在缓存中以供以后使用（这是有道理的，因为 a 的行`ListView`通常具有相同的只有数据不同的布局）。将一些视图保存在缓存中并稍后使用它们的原因是`getView`方法可以被调用很多次（每次用户向上/向下滚动并且屏幕上出现新行时）。如果每次都需要重新创建行视图，这将导致创建大量对象，这是需要避免的。在您的`getView`方法中，您将检查`convertView`它是否是`null`. 如果是，`null`那么您**必须**构建一个新的行视图并用数据填充它，如果不是`null`，则为`ListView`您提供了以前的视图。拥有这个先前的视图意味着您不需要构建新的行布局，而是**必须**使用正确的数据填充它，因为该缓存视图仍然附加旧数据（您会在 stackoverflow 上看到很多问题用户问为什么他们的行`ListView`向下滚动时正在复制）。

> 父参数有什么作用。我还没有看到太多使用这个的例子。他们中的大多数只是简单地重用/膨胀行布局并返回它。

它应该用于`LayoutParams`为新膨胀/构建的行获取正确的信息。例如，如果您对一个以 a`RelativeLayout`为根的布局进行膨胀，并且您不使用`parent`来获取`LayoutParams`该行布局，那么您可能会遇到一些问题。考虑到父母，您将使用：

```
convertView = getLayoutInflater().inflate(R.layout.row_layout, parent, false); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T06:28:40.253

我的理解`convertView`是，它本质上是被回收的视图，因为它们目前没有被使用——例如，你向下滚动列表，顶部的那些不在屏幕上，所以它们被传递到这个当您需要新视图时使用的参数（因此您不必创建一个全新的视图而让未使用的视图闲置）。iOS 有一个类似的方法叫做`dequeueReusableCellWithIdentifier`. 如果列表视图的每一行都具有相同的结构，则可以安全地将其转换为适当的类型并仅更新其中的信息 - 文本、图像等。它将是先前通过`getView()`调用相同列表返回的视图.

我最好的猜测（当然这是一个猜测）`parent`是这个适配器的列表是它的子视图。如果您需要上下文、访问资源系统、将信息传递到列表的父视图或从列表的父视图接收信息，它会为您提供返回渲染系统的路线。

# asp.net-mvc-3 - 使用标签在两行中显示不显眼的验证消息

> ID：12400341
> 
> 赞同：1
> 
> 时间：2012-09-13T06:08:52.293
> 
> 标签：asp.net-mvc-3, razor, unobtrusive-validation

我正在开发一个 asp.net MVC3 应用程序，我正在使用不显眼的验证。因为我有一条错误消息，我想在两行中显示，我将错误消息定义为：

```
[Required(ErrorMessage = "Your password must be at least 6 characters long. <br/> Please try again.")] 
```

我想在验证消息中编码中断标记，并希望在两行中显示消息。我尝试过以下事情：

1.)

```
@{
string s = Html.ValidationMessageFor(model => model.Password).ToString();
}
@Html.Raw(HttpUtility.HtmlDecode(s)) 
```

2.)

```
@Html.Raw(Server.HtmlDecode(Html.ValidationMessageFor(m => m.Password).ToString())) 
```

3.)

```
[Required(ErrorMessage = "Your password must be at least 6 characters long. //n Please try again.")] 
```

以上都不起作用。

有人可以帮忙吗？？

任何帮助，将不胜感激 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T05:37:07.680

将验证消息放在固定宽度的 div 中，消息文本应换行到下一行。

# ajax - Jquery 日历时间轴插件

> ID：12400343
> 
> 赞同：5
> 
> 时间：2012-09-13T06:08:59.830
> 
> 标签：ajax, jquery-ui, jquery, jquery-plugins

我正在搜索 jquery 日历时间线插件，但找不到它。

这是相同的屏幕。请帮我找出同样的问题。

![jquery 日历时间线插件](../Images/2c6b4b209eecfc963f06007368eda289.png)

# wcf - 如何测试 WCF 路由服务中的路由？

> ID：12400351
> 
> 赞同：0
> 
> 时间：2012-09-13T06:09:33.560
> 
> 标签：wcf, soap, wcf-routing

我们有一个 WCF 路由服务，它（显然）路由到多个 WCF 服务。我们使用 SOAP 消息传递，并且我们的 SOAP 标头包含一个值，供消费者系统设置它的标识符。

您如何测试/证明特定请求被路由到特定 WCF 服务？

场景是：路由器部署有特定的路由配置。然后更新路由器以包含更多服务的新路由，我们如何证明新请求被正确路由并且现有路由保持不变（即仍然正确路由）

我们想到的一种解决方案是让响应使用提供者服务的标识符填充 SOAP 标头，并基于消费者系统执行断言 + 请求应该与提供者系统匹配。

使用 SOAP 标头是最好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:29:30.207

您可以（临时）为路由服务启用[消息跟踪](http://msdn.microsoft.com/en-us/library/ms730064.aspx)。如果您记录了足够多的信息，您将能够使用[服务跟踪查看器](http://msdn.microsoft.com/en-us/library/ms732023.aspx)来检查消息，它应该会告诉您您想了解的有关消息的所有详细信息，包括每条消息的路由位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T00:08:14.353

我提出了一个有关如何以编程方式读取路由器配置的相关问题。

目前那里没有答案，但如果我们确实找到了答案，那么该答案将成为该问题答案的一部分。

[如何以编程方式读取 WCF 路由器上的当前筛选表](https://stackoverflow.com/questions/12736296/how-to-programmatically-read-the-current-filter-table-on-a-wcf-router)

* * *

我们采用了我在问题中提出的解决方案，因为我们认为这是最好的方法。

*   使用标识符填充对提供者服务调用的响应的 SOAP 标头。
*   向路由器发送请求并在您期望它去的地方执行断言
*   将预期结果与响应中的 soap 标头值上的标识符匹配

# java - 如何知道eclipse中使用的jar文件

> ID：12400352
> 
> 赞同：1
> 
> 时间：2012-09-13T06:09:36.333
> 
> 标签：java, eclipse, jar

我有一个使用 apache poi jar 的 java 项目。

在 Eclipse 引用的库中，有两个版本的 poi jar 可用。poi3.5 和 poi3.7。

在 java 代码中即时使用

```
 import org.apache.poi.hssf.usermodel.HSSFRow; 
```

在eclipse中如何知道它将引用哪个版本的jar文件。如果类路径中有两个版本的同一个 jar 文件，它会采用哪一个？

编辑：-

在 Eclipse 中，我看到有人在导入语句上使用键盘快捷键来显示正确的 jar。有谁知道那个快捷方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T09:34:29.870

我认为您正在寻找快捷方式**ctrl+shift+t** 选择导入语句并使用上述快捷方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T06:12:19.423

它需要您添加的第一个库来构建 pass。来自其他库的其他相同包将被忽略

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T16:16:14.037

jar 按照它们在类路径中出现的顺序进行检查。在 Eclipse 中，您有“Java Build Path”对话框，其中包含“Order and Export”选项卡：在那里您可以读取/修改库的顺序。

要直接访问右侧 Jar 中的类，只需按 CTRL 并单击类名。

当然，拥有同一个 Jar 的两个不同版本是一个配置错误：您应该删除其中一个。还要考虑您在 Eclipse 中的顺序可能与另一个执行环境（例如应用程序服务器）中的顺序不同。

# asp.net-mvc - 一个视图在另一个视图上的重叠

> ID：12400353
> 
> 赞同：0
> 
> 时间：2012-09-13T06:09:38.270
> 
> 标签：asp.net-mvc, visual-studio, dhtmlx

我正在使用 dhtmlx 框架。我想设计一个界面，例如，当我单击选项卡时，一个视图重叠在另一个视图上。就像在 Visual Studio 中，我们在垂直方向的最右侧有“sourceControl”和“TeamExplorer”。

当我单击在现有页面上展开并重叠的源控件时，我们可以滚动宽度。我使用了 dhtmlx 选项卡，我必须实现相同的操作。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:32:08.477

您描述的 Visual Studio UI 部分类似于[dhtmlxWindows](http://www.dhtmlx.com/docs/products/dhtmlxWindows/index.shtml)。您可以将 Tabbar 用于垂直选项卡，但您应该为其禁用内容区域：

```
tabbar.enableContentZone(false); 
```

# php - 如何检查用户是否登录facebook

> ID：12400356
> 
> 赞同：2
> 
> 时间：2012-09-13T06:09:44.870
> 
> 标签：php, javascript, facebook

我对 facebook api 完全陌生，我想问一下，知道一个人是否登录到 facebook 的最简单和最快的方法是什么。

我坚持的一种解决方案是发送一个 javascript 或 php 请求，看看我是否得到一些状态代码，告诉我这个人是否已登录（例如，如果它返回 404，那么这意味着他没有登录）。

更新：

我发现了这个简单的“hack”：

```
 function logged() {
    alert('logged');
}
function notlogged() {
    alert('not logged');
}
</script>

<script src="http://www.facebook.com/ajax/composer/attachment/question/question.php" onload="logged()" onerror="notlogged()"> 
```

但它不起作用......但是，这就是我正在寻找的代码类型......将发送请求的代码，如果失败，它将引发错误

```
**update** 
```

我不想让用户怀疑我正在检查他是否已登录。因此，如果使用了 app_id，那么我会认为我需要用户许可才能使用我的应用程序..这是一个负担我将不得不采取另一个身份验证步骤。

**我不能让用户知道他正在以任何方式对 Facebook 进行身份验证**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:12:21.267

如果我正确阅读了您的代码，那么只有在没有返回会话的情况下您才会进行重定向？根据 Facebook 示例中的评论：http: [//github.com/facebook/php-sdk/blob/master/examples/example.php](http://github.com/facebook/php-sdk/blob/master/examples/example.php)（这个信息的好地方啊？），即使你得到一个会话，你也可以不要假设它仍然有效。只有尝试需要登录用户的 API 调用才能确定。这是我见过的可靠确定登录/注销状态的最佳方法。

```
if ($session) {
  try {
    $me = $facebook->api('/me');
    if ($me) {
      //User is logged in
    }
  } catch (FacebookApiException $e) {
    //User is not logged in
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T06:15:37.110

试试这个，希望这会有所帮助

```
include 'facebook.php';
$facebook = new Facebook(array(
 'appId'  => $app_id, // your application id
 'secret' => $app_secret, // your application secret
'cookie' => false,
));

$user = $facebook->getUser();

$loginUrl   = $facebook->getLoginUrl(
        array(
            'scope' =>  '// put your permission'
        )
);

if ($user) {
try {
// Proceed knowing you have a logged in user who's authenticated.
$permissions = $facebook->api('/me/permissions');   
   } catch (FacebookApiException $e) {
    $user = null;
  }
 }  

 if (!$user) {
    echo "<script type='text/javascript'>top.location.href = '$loginUrl';</script>";
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T06:30:20.363

如果您有一个 facebook“标签”，那么有限的用户信息将作为 signed_request 的一部分提供给您。对于 facebook 标签，您需要创建一个应用程序。

否则，如果没有 App ID 并提醒用户你不能这样做。

过去有过黑客攻击，一些更聪明的方法是放置评论框并测量包含 DIV 的高度（如果登录，它们过去会更大）或包含 facebooks FBML 选项卡以显示登录按钮（登录更宽），但这些论文在被发现时都被删除了。您在问题中尝试的链接可能也是如此。

Facebook，尽管关于 rpivacy 的所有辩论，都不会故意泄露信息 - 直到你获得一个应用程序 ID，询问用户然后你几乎可以获得所有东西......

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-06-12T22:44:52.967

检查此主题：[https ://stackoverflow.com/a/10698594/1789650](https://stackoverflow.com/a/10698594/1789650)

这应该回答你的问题。您必须加载 javascript SDK 才能使其正常工作。

# mysql - 多字节符号无法在 rails3 中正确显示

> ID：12400358
> 
> 赞同：0
> 
> 时间：2012-09-13T06:09:50.040
> 
> 标签：mysql, ruby-on-rails-3, utf-8

我刚刚将一个应用程序从 rails 2.3.14 升级到 3.2.8 ruby​​ 一直保持在 1.8.7

在源自 Ms Word 并粘贴到 rails 应用程序中的 2.3.14 应用程序符号显示正常。在升级的应用程序中，他们没有。

例子：

在 Rails 3 中不会

在 Rails 2 中不会

请注意，在这两种情况下，应用程序都显示来自同一个 Mysql 数据库的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T02:17:50.567

我感受到了你的痛苦！我们刚刚经历了同样的问题。

@Fredrick Cheung 在上面是正确的。解决它的唯一方法是更新列格式而不转换数据。简单地更改 SQL 中的列格式将导致您的 utf 数据再次转换为 utf，这真的搞砸了！

我们想出的解决方案是将列格式更改为二进制或blob，然后再次更改为utf8。这可以防止第二次转换。对 VARCHAR 使用二进制，对 TEXT 使用 blob，一切都应该没问题。

祝你好运

# php - 在 wordpress 中创建一个注销页面

> ID：12400361
> 
> 赞同：1
> 
> 时间：2012-09-13T06:09:54.670
> 
> 标签：php, wordpress

我在注销页面上注销重定向用户时遇到问题。

我对模板页面进行了编码，`wp_safe_redirect(wp_logout_url())`但它只显示注销时出现错误。Wordpress 询问我是否确定要注销。

是否可以在 wordpress 上创建注销页面，当用户转到此页面时，它会自动注销用户。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T06:28:14.987

您可以`logout`直接调用：

```
wp_logout();
wp_redirect( wp_login_url() ); // then redirect him to login url 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-24T06:26:54.187

```
<a href="<?php echo wp_logout_url("URL OF login page"); ?>">Logout</a>
```

# facebook - Facebook 应用程序 - 发布照片

> ID：12400366
> 
> 赞同：-1
> 
> 时间：2012-09-13T06:10:29.393
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk, posting

在我的应用程序中，它将创建的照片发布到用户的“照片”。但是，无论何时用户使用应用程序，它都会创建照片并可以发布在相册中。

可以吗？或者我应该删除旧照片并作为新照片上传？或限制用户再次使用应用程序？还是我要遵循的其他任何事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T07:42:32.153

可以吗？**不**，我不喜欢这样做，您很快就会被标记为垃圾邮件。

您应该删除旧照片并作为新照片上传吗？**不**，这需要更多权限，并且还有其他选择。

您是否应该限制用户再次使用应用程序？**不。**

还有什么我应该遵循的吗？**是的。**

我以类似的方式设置了我的一个应用程序，但这就是我最终所做的......

我将每个用户存储在我的数据库表 'users' 中，其中一列用于 Facebook id ('fbid')，一列用于该用户上次发布的时间 ('lastpost')。在我的数据库中，“lastpost”的默认值为 0

**我在所有 Facebook 应用程序中使用这一部分来跟踪/插入新用户：**

```
$seeif = mysql_num_rows(mysql_query("SELECT id FROM users WHERE fbid='$user' LIMIT 1"));

if ( $seeif == "1" ) {
// already exists
} else {
// insert new user
mysql_query("INSERT INTO users (fbid) VALUES('$user' ) ") 
or die(mysql_error()); 
} 
```

**这部分将查询该表以查看他们的“lastpost”是什么时间（如果他们还没有发布，它将返回表默认值 0 ：**

```
$adesult = mysql_query("SELECT lastpost FROM users WHERE fbid='$user' LIMIT 1") 
or die(mysql_error());  
while($ardw = mysql_fetch_array( $adesult )) {
$alast = $ardw['lastpost']; 
```

**这是我决定是否要发布的地方，如果是，则使用当前用户的“lastpost”的新值更新数据库。**

注意：我目前将其设置为不超过每 5 分钟（300 秒）更改第一行以满足您的要求的频率。

```
$mathtime = time() - 300;

if ( $alast > $mathtime ) {
// do nothing, user has posted in the past 5min
} else {
// post
$dothepost=1;
$currenttime = time();
mysql_query("UPDATE users SET lastpost='$currenttime' WHERE fbid='$user' LIMIT 1") 
or die(mysql_error());
} 
```

**最后是图片帖子的代码：**

```
if ( $dothepost == "1" ) {

if ($user) {
      try {
$path_to_image = "/home/path/to/your/image/goes/here.jpg";
$args = array(
  'message' => 'Hello world!',
  'image'   => '@' . realpath($path_to_image),
);

$data = $facebook->api('/me/photos', 'post', $args);

      } catch (FacebookApiException $e) {
        error_log($e);
        $user = null;
      }
}

} else {
// noth
} 
```

从您的问题来看，您的页面是否每次都显示/发布相同的图像，或者它是否是动态的并显示/发布不同的图像，并不清楚。如果您每次都显示相同的图像：

**改变：**

```
if ( $dothepost == "1" ) { 
```

**到：**

```
if ( $alast == "0" ) { 
```

否则，每次访问该页面时，您最终都会得到一张包含相同图像的相册（只要每次访问相隔 5 分钟）

希望这可以帮助某人

# sdk - 在哪里可以找到与 Windows 32 兼容的 Java SDK 1.4.2？

> ID：12400367
> 
> 赞同：0
> 
> 时间：2012-09-13T06:10:36.807
> 
> 标签：sdk, java, jdk1.4

我的系统上需要 32 位兼容的 Java SDK 1.4.2。我找不到它。有人可以帮我吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T06:13:48.030

您需要转到以前的版本才能获得 1.4。这是[链接](http://www.oracle.com/technetwork/java/archive-139210.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:09:13.350

您需要在其他人提供的[Link to Java 1.4.2_18处循环查看 windows 版本。](http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-javase14-419411.html#j2sdk-1.4.2_18-oth-JPR)

我可以看到有一个 j2sdk-1_4_2_18-windows-i586-p.exe，这是您需要的 32 位版本。

# linux - “|”是什么意思 在终端命令行中是什么意思？

> ID：12400371
> 
> 赞同：32
> 
> 时间：2012-09-13T06:11:04.510
> 
> 标签：linux, bash, terminal

很抱歉在这里发布，但谷歌在搜索符号时做得很糟糕。

“|”是什么意思 意思是：

```
"some string" | someexecutable.py 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-13T06:12:27.037

它是管道符号。它在命令行上分隔两个程序（参见[`Pipelines`](http://www.gnu.org/software/bash/manual/bash.html#Pipelines)手册`bash`），第一个程序的标准输出（在管道的 LHS 上）连接到第二个程序的标准输入（在管道的 RHS 上）。

例如：

```
who | wc -l 
```

为您提供连接到计算机的人数或会话数（加上 1 的标题行`who`）。要折扣标题行：

```
who | sed 1d | wc -l 
```

to 的输入`sed`来自`who`， 的输出`sed`go to `wc`。

底层系统调用[`pipe(2)`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/pipe.html)与[`fork()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/fork.html),[`dup2()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/dup2.html)和[`exec*()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/execvp.html)系统调用一起使用。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-13T06:13:01.107

它被称为[`pipe`](https://en.wikipedia.org/wiki/Pipeline_(Unix))。它将第一个命令 ( ) 的标准输出`"some string"`作为第二个命令 ( `someexecutable.py`) 的标准输入。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-13T06:16:18.430

| 是一个管道。它将一个命令的输出作为下一个命令的输入发送。它在这里解释[http://www.ibm.com/developerworks/linux/library/l-lpic1-v3-103-4/#3-pipes](http://www.ibm.com/developerworks/linux/library/l-lpic1-v3-103-4/#3-pipes)

# windows-runtime - 使用单个故事板定位多个控件以更改快照视图状态的样式

> ID：12400373
> 
> 赞同：0
> 
> 时间：2012-09-13T06:11:07.863
> 
> 标签：windows-runtime, winrt-xaml

我有一个用于 Windows 应用商店应用程序的 XAML 页面，它在网格中有十几个按钮。它们都定义了相同的样式。例如

```
<Button Content="1"  Name="btn1" Grid.Row="1" Grid.Column="0" Style="{StaticResource PadButtonStyle}"/>
<Button Content="2"  Name="btn3" Grid.Row="2" Grid.Column="0" Style="{StaticResource PadButtonStyle}"/>
<Button Content="3"  Name="btn4" Grid.Row="3" Grid.Column="0" Style="{StaticResource PadButtonStyle}"/>
<!-- ... --> 
```

当页面从全屏横向视图状态切换到快照时，我想使用情节提要将所有这些按钮的样式从 PadButtonStyle 更改为 SnappedPadButtonStyle。

使用类似下面的东西我可以做到这一点，但我需要为每个按钮创建一个 ObjectAnimationUsingKeyFrames。

```
<VisualState x:Name="Snapped">
    <Storyboard>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="btn1" Storyboard.TargetProperty="Style">
                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SnappedPadButtonStyle}"/>
            </ObjectAnimationUsingKeyFrames>
    </Storyboard>
</VisualState> 
```

有没有办法在不单独引用每个按钮的情况下共同更改所有按钮的样式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:52:35.993

我仍在寻找一种将情节提要应用于控件集合的方法。

但是，我想到更好的解决方案是创建一个完全独立的 Grid 以仅包含捕捉视图所需的控件，然后直接在 XAML 中应用所需的样式。

然后我在 Snapped VisualState 中需要做的就是折叠一个 Grid 并使另一个可见。它需要 XAML 中的更多控件，但大大降低了情节提要要求。

# c# - 将 aspx 页面另存为 jpeg 并在 c# 中以电子邮件形式发送

> ID：12400375
> 
> 赞同：3
> 
> 时间：2012-09-13T06:11:10.690
> 
> 标签：c#, asp.net, email, jpeg

我的 aspx 页面有一个证书图像，我可以在其中输入名称主题和等级。我想将此 aspx 页面作为邮件正文以 jpeg 格式发送。因此，当邮件收件人收到邮件时，他应该能够查看证书并下载它。请帮忙。

这是我的 aspx 页面

```
<body id="bdy">
    <div style="background-image: url('http://localhost:5520/Images/certi3.jpg'); background-repeat: no-repeat; background-position: center center; background-color: #FFFFFF; border: medium solid #000000; z-index: 1; top: 64px; position: absolute; height: 474px; width: 674px; left: 177px">
        <form id="form1" runat="server">
        <asp:TextBox id="TextBox1" runat="server" forecolor="#99CCFF" text="Name" style="z-index: 1; left: 171px; top: 228px; position: absolute; width: 330px"></asp:TextBox>
        <asp:TextBox id="TextBox2" runat="server" text="Date" style="z-index: 1; top: 282px; position: absolute; width: 148px; left: 361px; height: 17px"></asp:TextBox>
        <asp:TextBox id="TextBox3" runat="server" style="z-index: 1; left: 130px; top: 372px; position: absolute; width: 420px"></asp:TextBox>
        <asp:TextBox id="TextBox4" runat="server" style="z-index: 1; left: 227px; top: 282px; position: absolute; width: 62px; height: 17px"></asp:TextBox>
        <asp:button id="Button1" runat="server" style="z-index: 1; left: 251px; top: 488px; position: absolute; height: 26px" text="Save and Send " onclick="Button1_Click" />
        <asp:table id="Table1" runat="server" style="z-index: 1; top: 2px; position: absolute; height: 474px; width: 674px; left: 1px">
    </asp:table>
        </form>
    </div>
</body> 
```

编辑1：获得aspx页面的html布局后，如何使用预先生成的html发送和发送电子邮件？
以下是我的代码：

```
protected void Button1_Click(object sender, System.EventArgs e) 
{ 
    WebClient myClient = new WebClient(); 
    string myPageHTML = null; 
    byte[] requestHTML; 
    string currentPageUrl = Request.Url.ToString(); 
    UTF8Encoding utf8 = new UTF8Encoding(); 
    requestHTML = myClient.DownloadData(type the url); 
    myPageHTML = utf8.GetString(requestHTML); 
    Response.Write(myPageHTML); 
    SendMail();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T18:05:23.267

有点不传统，但您可以使用字符串生成器，只需将您的 aspx 代码附加到字符串生成器，然后在发送 MailMessage 时只需添加字符串生成器变量作为邮件消息的正文

# jquery - 自动完成灰色文本

> ID：12400382
> 
> 赞同：2
> 
> 时间：2012-09-13T06:11:28.550
> 
> 标签：jquery, autocomplete

我正在我的网站上实现自动完成功能。但是，我不喜欢您必须“单击”建议才能将其放入表单字段中。

我希望显示灰色文本来暗示搜索词的其余部分，就像谷歌一样。如果用户点击选项卡，则显示该搜索词并且用户可以点击回车。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T07:30:12.093

这是我的解决方案。该代码编写得很快，应仅作为示例考虑。

**HTML：**

```
<div id="inp">
    <input type="text" id="search" value="" />
    <span id="ending" style="color: gray" ></span>
</div> 
```

**JS：**

```
$( "#search" ).autocomplete({
    source: availableTags,
    //catch open event
    open: function(event, ui) {
        //get first item in opened list
        var firstInList = $(".ui-autocomplete").children('li').children('a').html();
        //find the difference and assign to span
        $('#ending').html(firstInList.substring(this.value.length))
    }
});

$('#search').keypress(function(e){
    var keyCode = e.keyCode || e.which;
    //if Tab
    if (keyCode == 9) {
        e.preventDefault();
        //get first item in list and assign to input
        $(this).val($(".ui-autocomplete").children('li').children('a').html());
        $(".ui-autocomplete").hide();
        $('#ending').empty();
    }
    //input width
    this.style.width = ((this.value.length + 1) * 6) + 4 + 'px';
}); 
```

[**演示**](http://jsfiddle.net/fvUQa/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-26T18:49:37.637

通过使用 a`contenteditable` `div`而不是`input`，输入字段将立即调整大小，而不会出现由事件处理程序引起的延迟。然后只需将 a`span`放在 div 的末尾并带有建议的文本。

此外，与简单的实现相比，jQuery 的自动完成处理程序似乎相当慢。这给出了以下非常平滑的结果：

**[演示](https://jsfiddle.net/qusywvj3/1/)**

`input`不使用字段有一些明显的优点和缺点：

**优点**

*   自动完成文本的立即定位
*   单击灰色文本或其右侧，将您定向到输入字段

**缺点**

*   需要处理粘贴和拖动事件，因为您不希望 HTML 出现在表单字段中。（我在演示中没有这样做。）
*   与 contenteditable 字段有关的其他问题，例如[在 contenteditable div 外部单击仍然会关注它吗？](https://stackoverflow.com/questions/34354085)
*   在表单中使用时，不会提交来自 contenteditable 元素的内容，因此您需要注意这一点。

对我来说，零延迟胜过这些缺点。

* * *

应该注意，有很多事情我没有妥善处理：如果用户以某种方式设法将注意力集中在建议的文本内部或之后怎么办？（例如，通过在其下方轻轻单击。）如果用户从输入文本开始选择并以建议文本结束怎么办？它变得非常复杂。我认为这就是为什么很少看到这种自动完成灰色文本的原因。

# authentication - 在 etherpad lite 中应用身份验证

> ID：12400383
> 
> 赞同：6
> 
> 时间：2012-09-13T06:11:30.783
> 
> 标签：authentication, etherpad

我们如何防止 etherpad lite pad 被公众访问。有什么方法可以防止未经授权访问 etherpad。只有拥有用户名和密码的用户才能访问键盘。

我在 Windows 上使用 etherpad lite。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T09:18:47.887

您必须在 etherpad 的 settings.json 中进行配置。原始配置有据可查。

这是您应该注意的配置部分。

```
 /* Users must have a session to access pads. This effectively allows only group pads to be accessed. */
  "requireSession" : true,

  /* Users may edit pads but not create new ones. Pad creation is only via the API. This applies both to group pads and regular pads. */
  "editOnly" : false,

  /* How long may clients use served javascript code (in seconds)? Without versioning this
     may cause problems during deployment. Set to 0 to disable caching */
  "maxAge" : 21600, // 60 * 60 * 6 = 6 hours

  /* This is the path to the Abiword executable. Setting it to null, disables abiword.
     Abiword is needed to advanced import/export features of pads*/  
  "abiword" : null,

  /* This setting is used if you require authentication of all users.
     Note: /admin always requires authentication. */
  "requireAuthentication": true,

  /* Require authorization by a module, or a user with is_admin set, see below. */
  "requireAuthorization": true,

  /* Users for basic authentication. is_admin = true gives access to /admin.
     If you do not uncomment this, /admin will not be available! */
  /*
  "users": {
    "admin": {
      "password": "changeme1",
      "is_admin": true
    },
    "user": {
      "password": "changeme1",
      "is_admin": false
    }
  },
  */ 
```

# objective-c - 发布一个 url 我收到了无效的请求

> ID：12400385
> 
> 赞同：-1
> 
> 时间：2012-09-13T06:11:32.860
> 
> 标签：objective-c, ios, http-post, nsurlconnection, nsurlrequest

当我们在 iOS SDK 中将 URL 发布到服务器时，收到 Invalid Request 的原因是什么。我发送的 URL 是正确的，我发布的数据也是正确的。我也在 RestClient 中尝试过，即使我也收到同样的错误 Invalid Request 。任何人都可以帮助我这是什么原因。提前致谢。

```
- (NSURLConnection *) executeAsyncHttpPost :(NSString *) baseURL :(NSString *) method 
                                       :(id) jsonParams :(int)callerTag
{

   NSLog(@"jsonParams: %@", jsonParams);

   NSString *urlstr = [NSString stringWithFormat:@"%@", baseURL];
   urlstr = [urlstr stringByAppendingFormat:method];
   NSLog(@"urlstr: %@", urlstr);
   NSString *postLength = [NSString stringWithFormat:@"%d", [jsonParams length]];

   NSURL *pUrl = [NSURL URLWithString:urlstr];

   NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:pUrl];
   NSData *requestData = [[NSData alloc] initWithData:[jsonParams dataUsingEncoding:NSASCIIStringEncoding]];

   NSString* myString;
   myString = [[NSString alloc] initWithData:requestData encoding:NSASCIIStringEncoding];
   NSLog(@"myString: %@", myString);

   [request setHTTPMethod:@"POST"];
   [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
   [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
   [request setHTTPBody: requestData];

   self.tag = callerTag;

   return [super initWithRequest:request delegate:delegateResponder];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:23:08.103

您发布的 JSON 可能无效。请使用[this](http://jsonlint.com/)进行验证。**{ }**之外不应有任何字符。

只需发布以下字符串而不是当前的 JSON

**编辑：**

```
{"jsonRequest" :{"methodName":"CheckUserExist","username":"giriraj.vyas@dotsquares‌​.com","password":"233444"}} 
```

# symfony - Opensky Symfony2 集成

> ID：12400387
> 
> 赞同：1
> 
> 时间：2012-09-13T06:11:44.090
> 
> 标签：symfony, ldap

有没有在 Symfony2 中配置 ZF2 客户端的分步教程？

因为我想在我的情况下集成 Opensky LDAP 包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:59:19.330

你读过Github的[README 文件吗？](https://github.com/opensky/LdapBundle/blob/master/README.md)

> 如果您的 Symfony2 应用程序的供应商路径中还没有 ZF2 代码库，您可能有兴趣使用[git-subtree](https://github.com/apenwarr/git-subtree)自行拉入 LDAP 客户端。这个过程的说明记录在symfony-devs 邮件列表的[这个线程中。](https://groups.google.com/d/msg/symfony-devs/N-uIGhEWgs8/CrFmiLFYQbEJ)

# shell - PowerShell 的 chmod 函数

> ID：12400388
> 
> 赞同：11
> 
> 时间：2012-09-13T06:11:49.187
> 
> 标签：shell, powershell, windows-7, chmod

我环顾四周以了解如何在 Windows 7 Power Shell 上对文件进行 chmod（更改文件权限）。所以我发现了不同的（对我来说是有线的，因为我习惯了简单的 chmod 命令）代码片段，并且想知道将有线命令包装在 chmod 函数中并将其写入 Power Shell 的 $profile 文件中是否简单. 我想这是许多 ex-linux shell，但现在 power shell 用户想要更改文件的权限。

我是 Power Shell 的新手。请帮我写代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T05:04:44.490

这是使用 ACL 和 ACE 的原生方式的示例。您必须围绕它构建自己的功能。

```
# Get the Access Control List from the file
# Be careful $acl is more a security descriptor with more information than ACL
$acl = Get-Acl "c:\temp\test.txt"

# Show here how to refer to useful enumerate values (see MSDN)
$Right = [System.Security.AccessControl.FileSystemRights]::FullControl
$Control = [System.Security.AccessControl.AccessControlType]::Allow

# Build the Access Control Entry ACE 
# Be careful you need to replace "everybody" by the user or group you want to add rights to
$ace = New-Object System.Security.AccessControl.FileSystemAccessRule ("everybody", $Right, $Control)

# Add ACE to ACL
$acl.AddAccessRule($ace)

# Put ACL to the file
Set-Acl "c:\temp\test.txt" $acl
(Get-Acl "c:\temp\test.txt").access
Read-Host "--------- Test Here --------------"

# Remove ACE from ACL
$acl.RemoveAccessRule($ace)
Set-Acl "c:\temp\test.txt" $acl
(Get-Acl "c:\temp\test.txt").access 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T14:11:00.573

请看以下内容：

*   `Set-Acl`- 跑`Get-Help Set-Acl -Full`

*   `attrib.exe`- 用于设置文件属性的标准 Windows 工具。不是特定于 Powershell 的，但当然仍然适用于 Powershell。

*   `icacls.exe`- 用于设置 ACL 的标准 Windows 工具。不是特定于 Powershell 的，但当然仍然适用于 Powershell。

来源：[http](http://www.cs.wright.edu/~pmateti/Courses/233/Labs/Scripting/bashVsPowerShellTable.html) ://www.cs.wright.edu/~pmateti/Courses/233/Labs/Scripting/bashVsPowerShellTable.html 只需在网络上搜索`chmod powershell`.

# c++ - 指针传递，内存泄漏

> ID：12400389
> 
> 赞同：3
> 
> 时间：2012-09-13T06:11:55.353
> 
> 标签：c++, visual-studio-2010, pointers

*注意：最初我认为一段代码导致了泄漏，但事实证明这是不正确的。因此下面的评论。我已经更新了问题*

可能的解决方案：我设法解决了这个问题。我所做的是将所有初始化移动到函数的头部。当我遇到相应的删除代码时，将它们列在一张纸上并刮掉它们。这样 1\. 我没有遗漏任何删除 2\. 确保我没有在循环内初始化任何内容 管理以消除除了几个字节之外的所有泄漏。更新代码：[http](http://sharetext.org/gPJf) ://sharetext.org/gPJf 您可以在下面找到“之前”代码：

* * *

我面临错误的功能是这个： [http ://sharetext.org/3gq0](http://sharetext.org/3gq0)

从我收集的评论中，初始化和删除可能不正确。这是负责品尝的代码

```
float** CMemAlloc::init_2Dfloat(int rows,int cols)
{
    float **a;
    a=new float*[rows];
    for(int j=0;j<rows;j++)
        a[j]=new float[cols];

    for(int i=0;i<rows;i++)
        for(int j=0;j<cols;j++)
            a[i][j]=0.0;

    return a;

}

void CMemAlloc::del_float(float **a,int rows)
{
    if(a!=NULL)
    {
        for (int i = 0; i <rows; i++) {
            delete[] a[i];
            a[i] = NULL;

        }
        delete[] a;
        a=NULL;
    }
    else
    {
        return;
    }

} 
```

我怀疑这个功能对出现故障：

```
CCoarseFun::window** CCoarseFun::init_2Dwin(int rows,int cols)
{
    window** a;

    a=new window*[rows];
    for(int j=0;j<rows;j++)
        a[j]=new window[cols];

    for(int i=0;i<rows;i++)
    {
        for(int j=0;j<cols;j++)
        {
            a[i][j].line_high=0;
            a[i][j].line_low=0;
            a[i][j].pixel_high=0;
            a[i][j].pixel_low=0;
        }
    }
    return a;
}

void CCoarseFun::del_win(window ** a, int rows)
{
    for(int i=0;i<rows;i++)
    {
        delete [] a[i];
        a[i] = NULL;
    }
    delete[] a;
    a=NULL;
} 
```

这里会不会有错误？

注意：我已经在各个点放置了跟踪语句，并且正在打印“块”的地址。这是输出：[http ://sharetext.org/ODSv](http://sharetext.org/ODSv)

我目前正在尝试的是从内部循环中删除所有初始化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-16T08:06:40.647

我认为您的问题不在于指针，而在于引用，您正在使用双指针来分配二维数组，并且在您的代码中：

```
void CCoarseFun::del_win(window ** a, int rows) 
```

`window`不是指针传递的，是值传递的指针

要解决这个问题，你只需要通过引用传递它，

```
void CCoarseFun::del_win(window ** &a, int rows) 
```

这里也..

```
void CMemAlloc::del_float(float ** &a,int rows) 
```

在您的代码中一切正常，但是当您这样做时`CCoarseFun::del_win(a,rows);`，它将取消分配内存但 a 不会被取消，因为它作为副本在您的代码中传递

# iphone - iphone：在基于视图的应用程序中，我如何从第 4 个屏幕移动到第 1 个屏幕

> ID：12400393
> 
> 赞同：0
> 
> 时间：2012-09-13T06:12:07.240
> 
> 标签：iphone, objective-c, ios5

我正在创建基于视图的应用程序，在这个应用程序中我想直接从第 4 个屏幕切换到第一个屏幕，那么我该怎么做呢？

我转到下一个视图的代码如下：

```
NewProposalDetail *newDetail = [[NewProposalDetail alloc] initWithNibName:@"NewProposalDetail" bundle:nil];
    [self presentModalViewController:newDetail animated:YES];
    [newDetail release]; 
```

任何想法？如果是，那么分享它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:16:53.020

使用`pushViewControllers`和切换`popViewControllers`到任何其他屏幕的方式相同。利用

```
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

第一个视图是您看到的根视图，因此只需输入这一行，它将获取第一个视图。

# php - 写一个更好的 preg_replace

> ID：12400397
> 
> 赞同：0
> 
> 时间：2012-09-13T06:12:18.517
> 
> 标签：php, preg-replace, expression

我有这个 html 代码

```
<span><style>
.p9Wu{display:none}
.JOz4{display:inline}
.nitJ{display:none}
.pIj0{display:inline}
.AU2Q{display:none}
.vDdS{display:inline}
.THa1{display:none}
.mRy1{display:inline}
</style><span style="display: inline">69</span><span class="JOz4">.</span><span style="display:none">21</span><div style="display:none">21</div><span style="display: inline">65</span><span style="display:none">212</span><span class="AU2Q">212</span><span style="display: inline">.</span><span class="144">46</span><span style="display:none">69</span><span class="237">.</span><span style="display:none">11</span><span class="AU2Q">11</span><div style="display:none">11</div><div style="display:none">36</div><span style="display: inline">60</span><div style="display:none">152</div></span> 
```

在浏览器上查看时，它显示这个 69.65.46.60 我想使用 PHP 去除 html 并只留下文本 69.65.46.60

第一个问题是我不知道如何编写一个模式来获取显示类：none 第二个问题是我的 preg_replace 太长。有人可以帮我缩短它吗？谢谢

这是我的php代码

```
$html = preg_replace('~<div([^>]*)(class\\s*=\\s*["\']p9Wu["\'])([^>]*)>(.*?)</div>~i', '', $html);
$html = preg_replace('~<div([^>]*)(class\\s*=\\s*["\']nitJ["\'])([^>]*)>(.*?)</div>~i', '', $html);
$html = preg_replace('~<div([^>]*)(class\\s*=\\s*["\']AU2Q["\'])([^>]*)>(.*?)</div>~i', '', $html);
$html = preg_replace('~<div([^>]*)(class\\s*=\\s*["\']THa1["\'])([^>]*)>(.*?)</div>~i', '', $html);

$html = preg_replace('~<span([^>]*)(class\\s*=\\s*["\']p9Wu["\'])([^>]*)>(.*?)</span>~i', '', $html);
$html = preg_replace('~<span([^>]*)(class\\s*=\\s*["\']nitJ["\'])([^>]*)>(.*?)</span>~i', '', $html);
$html = preg_replace('~<span([^>]*)(class\\s*=\\s*["\']AU2Q["\'])([^>]*)>(.*?)</span>~i', '', $html);
$html = preg_replace('~<span([^>]*)(class\\s*=\\s*["\']THa1["\'])([^>]*)>(.*?)</span>~i', '', $html);

$html = preg_replace('~<div([^>]*)(style\\s*=\\s*["\']display:none["\'])([^>]*)>(.*?)</div>~i', '', $html);
$html = preg_replace('~<span([^>]*)(style\\s*=\\s*["\']display:none["\'])([^>]*)>(.*?)</span>~i', '', $html);

$html = preg_replace('@<style[^>]*?>.*?</style>@siu', '', $html);

$html = strip_tags($html); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:19:03.280

你可以像这样一起处理你的 div 和 span：

```
$html = preg_replace('~<(div|span)([^>]*)(class\\s*=\\s*["\'](p9Wu|nitJ|AU2Q|THa1)["\'])([^>]*)>(.*?)</\1>~i', '', $html);
$html = preg_replace('~<(div|span)([^>]*)(style\\s*=\\s*["\']display:none["\'])([^>]*)>(.*?)</\1>~i', '', $html);

$html = preg_replace('@<style[^>]*?>.*?</style>@siu', '', $html);

$html = strip_tags($html); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T06:25:33.810

你必须这样做

对于打开跨度标签，请使用此 preg

```
preg_replace('~\<span[^\>]*\>~is', '', $html); 
```

关闭跨度标签使用这个preg

```
preg_replace('~\<\/span\>~is', '', $html); 
```

打开 div 标签使用这个 preg

```
preg_replace('~\<div[^\>]*\>~is', '', $html); 
```

关闭 div 标签使用这个 preg

```
preg_replace('~\<\/div\>~is', '', $html); 
```

对于没有样式标签的使用这个

```
preg_replace('/<style\b[^>]*>(.*?)<\/style>/is', "", $html); 
```

希望这将有助于它去除所有标签，只保留文本......

# objective-c - 如何为子视图窗口设置方向

> ID：12400399
> 
> 赞同：0
> 
> 时间：2012-09-13T06:12:19.223
> 
> 标签：objective-c

![在此处输入图像描述](../Images/610cc935937c8548df8b136eee8751ab.png)

我创建了一个 UIView。我想将视图子视图到 appdelegate 窗口

```
 UIView *newView = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 1048, 748)];
  AppDelegate *appdelegate = [[UIApplication sharedApplication]delegate];
  [appdelegate.window addSubview:newView]; 
```

这有助于我查看窗口的视图。但是视图处于纵向模式。我需要视图处于横向模式。如何将视图设置为横向模式？我希望红色视图完全覆盖白色视图。我该怎么做？

RedColor 是 newView 白色是存在 viewController

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T06:48:52.060

如果我们向窗口添加任何对象，然后我们想改变方向，那么我们必须使用变换方法。

```
#define DegreesToRadians(degrees) (degrees *M_PI /180) 
```

添加上面的行

```
CGAffineTransform newTransform;
UIDeviceOrientation orientation = [UIDevice currentDevice].orientation;
switch (orientation)
{
    case UIInterfaceOrientationPortraitUpsideDown:
        newTransform = CGAffineTransformMakeRotation(-DegreesToRadians(180));
        txt.transform = newTransform;
        txt.frame = CGRectMake(0, 0, 320, 480);
                break;
    case UIInterfaceOrientationLandscapeLeft:
        newTransform = CGAffineTransformMakeRotation(DegreesToRadians(-90));
        txt.transform = newTransform;
        txt.frame = CGRectMake(0, 0, 320, 480);

        break;
    case UIInterfaceOrientationLandscapeRight:
        newTransform = CGAffineTransformMakeRotation(DegreesToRadians(90));
        txt.transform = newTransform;
        txt.frame = CGRectMake(0, 0, 320, 480);

        break;
    default: 
        newTransform = CGAffineTransformMakeRotation(-DegreesToRadians(0));
        txt.transform = newTransform;
        txt.frame = CGRectMake(0, 0, 320, 480);

        break;                             
} 
```

这里 txt 是对象名，这样试试。

# python - 返回 HttpResponse() 后在 Django 视图中调用函数

> ID：12400402
> 
> 赞同：2
> 
> 时间：2012-09-13T06:12:35.803
> 
> 标签：python, django

对于我已经问过的问题，这是一种不同的方法

[Django中的同时多任务处理](https://stackoverflow.com/questions/12369409/simultaneous-multitasking-in-django)

所以它会分享介绍。

* * *

我的网络项目中有一个耗时的功能。当函数进行计算时，应该呈现一个网页，通知用户一旦计算完成，结果将通过电子邮件发送。

```
views.py:

def web_function(request):
    ...
    return HttpResponse(results_will_be_sent_by_mail.html)
    time_consuming_function() 
```

由于必须渲染的页面非常简单，并且它不需要来自 time_sumption_function() 的返回信息，有没有办法跳过多任务处理，只是以某种方式首先渲染并显示页面，然后调用 time_sumption_function()？

* * *

可能的解决方案：

1.  在调用“web_function”之前的页面上按下输入按钮时，附加一些将呈现临时页面的javascript代码？

* * *

**更新**

最后用芹菜。尝试 Ajax 并没有成功。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T06:26:33.677

函数中的 return 语句表示该函数的结束。* 您的代码片段的 time_sumption 函数超出了函数的[范围](http://en.wikipedia.org/wiki/Scope_%28computer_science%29)，因此永远不会到达。

处理任务的解决方案可能是：非常适合将函数包装为异步任务的[celery 。](http://celeryproject.org/)如果您必须同步执行操作，为什么不为此使用 ajax，这样您至少可以向用户展示 BeforeSend 发生了什么？

*这适用于 Python 和大多数（如果不是全部）面向对象的编程语言

# android - 如何在android中将日期从12小时格式转换为24小时格式

> ID：12400403
> 
> 赞同：4
> 
> 时间：2012-09-13T06:12:35.957
> 
> 标签：android, android-date

你好，我有约会之类的..

```
String date="09:00 AM" 
```

但我需要**09:00:00**

所以我使用以下。

```
 String date="09:00 AM"  
 SimpleDateFormat f1 = new SimpleDateFormat("hh:mm:ss");
 Date d1= f1.parse(date); 
```

但它给了我解析异常。

请帮我找到这个。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T06:19:02.500

这不是*解析*该日期的正确格式，您需要以下内容：

```
"hh:mm a" 
```

一旦你有了一个日期对象，你就可以使用不同的格式来输出它。以下代码段显示了如何：

```
import java.text.SimpleDateFormat;
import java.util.Date;

String date = "09:27 PM";

SimpleDateFormat h_mm_a   = new SimpleDateFormat("h:mm a");
SimpleDateFormat hh_mm_ss = new SimpleDateFormat("HH:mm:ss");

try {
    Date d1 = h_mm_a.parse(date);
    System.out.println (hh_mm_ss.format(d1));
} catch (Exception e) {
    e.printStackTrace();
} 
```

这输出：

```
21:27:00 
```

如您所料。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-20T07:49:58.477

```
Date c = Calendar.getInstance().getTime();

//day of the month

//EEEE---full day name
//EEE- 3 chars of the day
SimpleDateFormat outFormat = new SimpleDateFormat("EEE");
String dayof_month = outFormat.format(c);

//date
//MMM--3 chars of month name
//MM--number of the month
SimpleDateFormat df = new SimpleDateFormat("dd-MMM-yyyy");
String formattedDate = df.format(c);

//time
//hh---12 hrs format
//HH---24 hrs format
// a stands for AM/PM
DateFormat date = new SimpleDateFormat("hh:mm:ss a");
String localTime = date.format(c);

login_date_text.setText(dayof_month +" , "+formattedDate);
login_time_text.setText(localTime);

Log.e("testing","date ==" +dayof_month +" , "+formattedDate);
Log.e("testing","time ==" +localTime); 
```

# jasper-reports - 如何访问子报表中的主报表字段

> ID：12400405
> 
> 赞同：0
> 
> 时间：2012-09-13T06:12:42.810
> 
> 标签：jasper-reports

我在主报告中有字段（*hasRole.toString()*）。我想在子报告中使用这个字段。

我如何在子报告中访问？

# c# - Windows XP 上的 Oracle 类型初始化程序异常

> ID：12400406
> 
> 赞同：0
> 
> 时间：2012-09-13T06:12:52.557
> 
> 标签：c#, .net, oracle

我编写了一个到 Oracle Express 版本 10 的 Oracle 数据库连接

它适用于我的开发 PC (Windows Vista)。

当我在 Windows XP PC 上运行这个程序时，Oracle DB 连接在连接到服务器时抛出异常

**“错误：'Oracle.DataAccess.Client.OracleConnection' 的类型初始化程序引发异常”**

连接代码如下：

```
try{ 
 string oradb = "Data Source="
               +"(DESCRIPTION ="
               +" (ADDRESS = (PROTOCOL = TCP)(HOST = " + IP + ")(PORT = 1521))"
               +" (CONNECT_DATA ="
               +" (SERVER = DEDICATED)"
               +" (SERVICE_NAME = XE)"
               +" )"
               + " );User id=XXXX;Password=XXXX;";

            OracleConnection conn = new OracleConnection(oradb);

             .....
             .....

}
catch (Exception ex)
{
        MessageBox.Show("Error:" + ex.Message);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:29:17.497

XP 盒子上的客户端软件是哪个版本？

检查我的计算机配置，我只在 Oracle 10g 安装上看到 ODP.Net 1.x（对我来说是 C:\oracle\product\10.2.0\db_home\ODP.NET\bin\1.x ），它是 . Net 1.0 安装不适用于 .net 2.0 - 4.0。这可能是你麻烦的根源。

Oracle 10.2 ODP.Net 驱动程序也非常不稳定（即使是 .Net 2.0 版本）。如果您使用的是 .Net 1.0 或 1.1，您可能需要使用 ODPReg.exe（同一目录）重新注册 Oracle.DataAccess.dll，如果您使用的是 2.0，您可能需要安装一个 .net 2.0（最高 3.5）Oracle客户端或 .Net 4.0（或 4.5）Oracle 客户端。

我建议您安装一个 11.2 客户端，并检查 Oracle.DataAccess.dll 是否已正确注册（有 2 个安装：一个用于 .Net 2.0-3.5，一个用于 .Net 4.0，在我的盒子 C:\oracle\product\ 11.2.0\client_ODTwithODAC112030\odp.net\bin\2.x 和 C:\oracle\product\11.2.0\client_ODTwithODAC112030\odp.net\bin\4 ）。您可能需要使用 OraProvCfg.exe 强制注册

您也可以尝试使用 Xcopy 驱动程序安装，如果您想将驱动程序与您的软件一起分发，请务必仔细阅读文档，它很奇怪且容易出错（例如 ODAC112030Xcopy_x64.zip）。

ODAC 在这里：[http](http://www.oracle.com/technetwork/developer-tools/visual-studio/downloads/index.html) ://www.oracle.com/technetwork/developer-tools/visual-studio/downloads/index.html 。

# django - 在 Django 中，如何在我自己的视图中显示管理消息？

> ID：12400407
> 
> 赞同：0
> 
> 时间：2012-09-13T06:12:51.947
> 
> 标签：django, django-templates, django-admin

在我的 Django 中，我正在为一些实用功能集成管理员，例如，直接链接到特定管理页面以编辑模型并覆盖 ModelAdmin`response_change`方法以在用户单击保存时重定向回我自己的视图。

这工作得很好——除了管理员的消息（例如“某个模型已保存”或其他什么）没有显示在`messages`模板上下文变量中，因为消息通常在您使用`message.success(...)`等时出现。

如何让管理员的消息像普通消息一样显示，或者如何在我自己的模板中访问这些消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:32:02.890

如果您想在管理员中显示自定义消息，请`response_change`使用

```
messages.info(request, 'Model was changed successfully.') 
```

如果您使用自己的视图，请使用以下代码。它对我有用。

```
messages.success(request, ("Model added successfully"), fail_silently=True) 
```

然后，如果您使用自定义模板，请在模板中使用以下内容。

```
{% if messages %}
    <div align='center'>
        <ul id="message" >
            {% for message in messages %}
                <ul{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{message}}</ul>
            {% endfor %}
        </ul>
    </div>
{% endif %} 
```

# iphone - 推送通知证书签名错误

> ID：12400417
> 
> 赞同：0
> 
> 时间：2012-09-13T06:13:31.480
> 
> 标签：iphone, objective-c, ios

我必须向我的应用程序添加推送通知，我使用本教程来实现它[http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)
和[http://lessons.runrev .com/m/4069/l/53405](http://lessons.runrev.com/m/4069/l/53405)

在我按照教程中提到的所有说明进行操作后，安装新的配置文件后，它会在配置文件旁边显示以下消息

**未找到有效的签名身份**

我确定我的钥匙串中的公钥和私钥是什么，这是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:20:10.760

--> 连接苹果开发者会员中心，然后连接iOS临时门户。

-->吊销我的证书。

--> 通过提供一对新的私钥和公钥来创建新证书。

-->删除所有以前的配置文件并创建新的。

--> 下载新的配置文件并将它们安装到 XCode 中，只需将它们拖到 Dock 中的 XCode 图标即可。

希望它会有所帮助。

您可以在以下这些网站上看到相同的内容

[xcode-4-valid-signing-identity-not-found](https://stackoverflow.com/questions/6769345/xcode-4-valid-signing-identity-not-found-error-on-provisioning-profiles-on-a)

[获取有效签名身份匹配此配置文件无法找到](https://stackoverflow.com/questions/2714517/getting-a-valid-signing-identity-matching-this-profile-could-not-be-found-in-yo)

[未找到有效签名身份](https://stackoverflow.com/questions/6037031/a-valid-signing-identity-not-be-found)

谢谢

# plsql - 我正在编写 PL/SQL 语句，编译时收到错误消息

> ID：12400423
> 
> 赞同：0
> 
> 时间：2012-09-13T06:13:51.250
> 
> 标签：plsql

```
CREATE OR REPLACE PROCEDURE calc_bonus()

IS

    var_bonus_rate FLOAT;
    var_emp_record emp%ROWTYPE;
    var_years_worked int;

    CURSOR cur_emp IS
    SELECT *
    FROM emp
    WHERE emp <> 'Pres';

BEGIN

OPEN emp_cur;
LOOP
    FETCH cur_emp INTO var_emp_record;
    EXIT WHEN cur_emp%NOTFOUND;
    var_bonus_rate := 0.1;

    IF (var_years_worked > 10) THEN
        var_bonus_rate := var_bonus_rate + 0.1;
    ELSIF (var_years_worked > 5) THEN
        var_bonus_rate := var_bonus_rate + 0.05;
    END IF;

    IF var_emp_record.job = 'Designer' THEN
        var_bonus_rate := var_bonus_rate + 0.15;
    ELSIF var_emp_record.job = 'Manager' THEN
        var_bonus_rate := var_bonus_rate + 0.1;
    END IF;

UPDATE emp e2
SET e2.bonus = e2.salary * var_bonus_rate;

END LOOP;

CLOSE emp_cur;

END;
/ 
```

我收到的错误

```
1/22     PLS-00103: Encountered the symbol ")" when expecting one of the
     following:
     <an identifier> <a double-quoted delimited-identifier>
     current delete exists prior 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:20:54.840

`CREATE OR REPLACE PROCEDURE calc_bonus()`- 这是错误的原因。删除括号或添加一些参数。你的选择是

```
 1\. CREATE OR REPLACE PROCEDURE calc_bonus is
 2\. CREATE OR REPLACE PROCEDURE calc_bonus(p_Param1 datatype, ... 
                                         , p_paramN datatype) is 
```

# c# - 自定义 ListPickerPage.xaml 不会在全模式弹出窗口中填充项目

> ID：12400424
> 
> 赞同：0
> 
> 时间：2012-09-13T06:14:02.043
> 
> 标签：c#, windows-phone-7, xaml

我有一个要求，我需要在 Windows phone 7 中设置控件`FullMode`弹出的背景。所以，我从 Silverlight 工具包中获取，并在我的项目中对其进行了自定义。现在，当我运行该项目时，会打开一个白色背景的页面，但其中没有任何项目。可能是什么问题？`ListPicker``ListPickerPage.xaml file``ListPicker``FullMode`

# sql-server - SQL 使用变量来改变列的长度

> ID：12400428
> 
> 赞同：2
> 
> 时间：2012-09-13T06:14:16.710
> 
> 标签：sql-server, tsql

我正在将我的数据从表 T 导出到 CSV 文件，T 有几个 varchar 列，在处理时，我不知道来自数据仓库的数据长度，所以我将长度设置为 500（假设），导出到 csv 文件后，我注意到它根据列的长度在数据后放置了额外的空格。

我想要做的是将列长度更改为最大数据。所以有两个问题。

1.  获取表中列内数据的最大长度。
2.  使用变量更改列，以下代码不起作用，说明“'@l' 附近的语法不正确”。

    ```
    DECLARE @l int
    SET @l = 12

    ALTER TABLE Temp
    ALTER COLUMN a VarChar(@l) 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T06:33:03.727

你不能，直接。

您*可以*执行一些动态 SQL：

```
create table Temp (a varchar(20) not null)

DECLARE @l int
SET @l = 12

declare @Sql nvarchar(max)
set @Sql = '
ALTER TABLE Temp
ALTER COLUMN a VarChar(' + CONVERT(varchar(10),@l) + ') not null'
exec sp_executesql @Sql 
```

但是，正如我在评论中指出的那样，我不建议这样做。我建议 a) 找出添加填充的位置，或 b)[`RTRIM`](http://msdn.microsoft.com/en-us/library/ms178660.aspx)在适当的位置使用 a 来删除填充。

我会单独留下列定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T06:33:17.957

试试这个

```
DECLARE @l int
SET @l = 12
DECLARE @strsql varchar(500)
SET @strsql='ALTER TABLE tbl4 ALTER COLUMN col1 VarChar('+cast(@l as varchar(5))+')'
exec(@strsql) 
```

# javascript - javascript：在使用文字对象时将属性名称指定为文本有什么好处或区别？

> ID：12400430
> 
> 赞同：1
> 
> 时间：2012-09-13T06:14:31.810
> 
> 标签：javascript, object-literal

好吧，显示一些代码要容易得多......

此 javascript 代码之间是否有任何性能或任何其他类型的差异

```
var obj = {
  'id':   0,
  'name': 'new obj'
}; 
```

和

```
var obj = {
  id:   0,
  name: 'new obj'
}; 
```

（看看 id 和 name 周围的单引号）

--

如果我没记错的话，在 php 中建议始终使用单引号，因为如果不是，解释器必须检查是否存在具有该名称的变量...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T06:23:30.660

如果您的对象的名称不是合法标识符（有空格或标点符号，以数字开头），或者是保留或关键字，或者与范围内的任何变量相同，则必须引用它们。否则没关系，javascript 使用你给它的名字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T06:19:07.057

我相信没有性能差异。

通常我们使用引号来使用 JavaScript 中的保留字，例如`class`，不允许用作对象键。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T06:25:45.097

正如 kennebec 指出的那样，未引用的键中不允许使用某些字符。

然而（在我看来）主要的一点是差异是如此之小，以至于对这类事情进行优化并不值得。找到其他瓶颈（最常见的循环和 AJAX 调用）并首先修复这些瓶颈，然后再进行微优化。

# iphone - 如何在不显示时间的情况下运行 iPhone 模拟器？

> ID：12400431
> 
> 赞同：0
> 
> 时间：2012-09-13T06:14:33.427
> 
> 标签：iphone, xcode, ios-simulator

最近我经常使用 iPhone 模拟器来截屏。

有时它会在顶部显示时间，有时则不显示。我总是在模拟器中启动应用程序，有时时间显示，有时时间不显示。我不知道为什么会这样。

到目前为止，我从来没有真正打扰过，但现在我需要一种方法来设置它，以便在顶部栏中显示“运营商”一词和电池图标时不显示时间。

**有没有办法明确控制这个？Esp在模拟器中运行应用程序而不显示时间？**

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:23:28.260

在您的 Info.plist 添加以下键

![信息列表](../Images/341a282a36613235bcfcebdba67d0571.png)

# sql - 如何按顺序显示上个月的总日期

> ID：12400435
> 
> 赞同：-2
> 
> 时间：2012-09-13T06:14:56.633
> 
> 标签：sql, sql-server, sql-server-2008

我想显示上个月的日期。我可以知道用于显示所有日期的查询吗

预期输出：

当前日期 = '2012-09-13'
我想将结果显示为

```
1
2
3
4
,
,
,
,
31 
```

这些日期应该从第 8 个月开始

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:26:02.190

试试这个：

```
SELECT NUMBER  
FROM   MASTER..SPT_VALUES 
WHERE  TYPE='P'
AND    NUMBER BETWEEN 
       DATEPART(DD,DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE())-1,0))
AND    DATEPART(DD,DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()),-1)) 
```

将 Getdate() 替换为您的日期

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T06:28:44.703

请试试：

```
;WITH DATES (date)
AS(
SELECT DATEADD(month, DATEDIFF(month, 0, dateadd(month,-1,getdate())), 0)
UNION ALL
SELECT DATEADD(DAY,1,date)
FROM DATES
WHERE DATEADD(DAY,1,date)<=DATEADD(month, DATEDIFF(month, 0, getdate()), 0)-1
)SELECT DAY(date) AS DAYS FROM DATES 
```

# actionscript-3 - as3需要flash播放器吗

> ID：12400442
> 
> 赞同：0
> 
> 时间：2012-09-13T06:15:21.670
> 
> 标签：actionscript-3, flash, video

我正在帮助建立一个基于视频的网站。我的客户希望网站可以在 ipad/iphone 上查看。所以，我绝对不能要求flash viewer。

我的一位开发人员想使用 AS3 在我们的播放器中编写特殊功能的脚本。如果使用 AS3 脚本，这是否意味着我的用户必须拥有 flash 插件？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:48:47.890

如果只是播放视频，那么基于 html5 的选项会很棒。但是，如果要求更复杂并且开发人员更熟悉 AS3，那么您可以将 AIR 应用程序重新打包为 iOS 应用程序（这是 Adob​​e 支持的工作流程）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T07:05:38.250

是的，用户必须安装 Flash Player 才能查看 AS3 Flash 文件 (.swf)。

但是您的开发人员可能会为不需要 Flash 的 iOS 视频播放器实现 html5 替代方案（可能会缺少一些特殊功能），因此该网站可能仍可在 iOS 设备上查看。

我的建议是简单地问他们它是否适用于 iPad 和 iPhone :-)

# php - php 和 javascript 通信：以相同的方法将 javascript 值传递给 php 值

> ID：12400449
> 
> 赞同：0
> 
> 时间：2012-09-13T06:16:04.480
> 
> 标签：php, javascript, jquery, html, ajax

我一直在寻找几个小时，我知道 javascript 是客户端，php 是服务器端，用于通信他们需要使用`POST`或其他。

我首先在 javascript 中制作了这段代码，以检索我想要的值并使用 jquery 将其发送到 php。

```
function getGroupName(test){

    var groupName = ($(test).parent().attr('id'));           

    $.post("setGroup.php",{ groupName:groupName } ,function(data) {

        if(data == 'yes'){          
            <?php   
                $testing = $_SESSION['currentGroup'];       
                $tsql2 = "select emailName,email from privacyEmails where tagID = '$tagid' and userEmail = '$testmail' and circleName = '$testing'";  

                $stmt2 = sqlsrv_query( $conn, $tsql2);  

                $order = 0;
                $emailNameT = "";
                $NameT = "";

                while( $row = sqlsrv_fetch_array( $stmt2,   SQLSRV_FETCH_NUMERIC))  
                {
                    $emailNameT = $row[0];
                    $NameT = $row[1];
            ?>
            makeEditPeople('<?php echo $NameT ?>','<?php echo $emailNameT ?>','<?php echo $order ?>');
            <?php
                $order = $order +1;
                }
            ?>
        }    
    });
} 
```

这是获取的 php 代码 ( `setGroup.php`) `$testing`：

```
<?php
    include "connectionString.php";

    session_start();

    $groupName = $_POST['groupName'];

    $_SESSION['currentGroup'] = $groupName;

    echo "yes";    
?> 
```

请注意， `makeEditPeople()`js 中的 是一种将参数中收到的用户附加到运行良好的表中的方法。

我的问题是：我想通过jquery将 javascript 值（ `groupName`）发送到php 中的值，然后同时，我想在不刷新页面的情况下检索它。那可能吗？`SESSION``$Post`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:23:53.507

您正在寻找的东西称为 AJAX，它是一种 JavaScript“功能”，允许您在不刷新浏览器的情况下向服务器发出请求。

由于您使用的是 jQuery，因此再简单不过了：

```
$.post (
  'http://example.com/your.php', // URL of your script
  {
    Param1: 'value',
    Param2: 123
  },
  function ( response ) {
    // request holds whatever the server returned
  }
); 
```

有关更多信息，请参见：http: [//api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T06:24:38.717

如果您在单击链接以激活和 AJAX 操作后刷新页面，则这意味着以下两种情况之一：

1.  您在 javascript 中有错误（因此链接最终被关注）
2.  您还没有告诉 javascript 不刷新页面。

您可能拥有“onclick”或（如果“正确”使用 jQuery），那么您拥有 $("#id").click(function(e) {}) 处理程序*。确保这些“返回 false;” 在最后

```
<a href="#" onclick="RunSomeFunction();">Click</a>

function RunSomeFunction() {
    // Do Stuff
    return false
} 
```

或者，使用 jQuery

```
<a href="#" id="RunMyFunction">Click</a>

$("#RunMyFunction").click( function(e) {
   e.preventDefault();
   // Do Stuff
   return false;
)} 
```

笔记：

1.  您还可以使用其他绑定函数，而不仅仅是 click()。但是点击更容易阅读
2.  e.preventDefault 就足够了，你不需要它并返回 false；只是给你两个选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T06:33:48.637

问题是您的“if (data == 'yes')”Javascript 命令无法控制是否执行内联 PHP；无论如何，那里的内容都会运行，因为它是另一种语言。

更好的解决方案是修改`setGroup.php`为不只返回“是”，而是设置并返回值：

```
<?php
include "connectionString.php";

session_start();

if (isset($_POST['groupName']))
  $_SESSION['currentGroup'] = $_POST['groupName'];

echo $_SESSION['currentGroup'];
?> 
```

现在，如果您 POST`setGroup.php`没有`groupName`设置，它不会更新会话，但会返回当前值（`data`在 javascript 函数中）。如果您确实设置了它，它会将新值返回给 Javascript。

# bash - How to replace .. from string in bash script?

> ID：12400456
> 
> 赞同：0
> 
> 时间：2012-09-13T06:16:33.650
> 
> 标签：bash

I have to remove `..` character from a file in Bash script. Example:

I have some string like:

```
some/../path/to/file
some/ab/path/to/file 
```

And after replace, it should look like

```
some/path/to/file
some/ab/path/to/file 
```

I have used below code

```
DUMMY_STRING=/../
TEMP_FILE=./temp.txt
sed s%${DUMMY_STRING}%/%g ${SRC_FILE} > ${TEMP_FILE}
cp ${TEMP_FILE} ${SRC_FILE} 
```

It is replacing the `/../` in line 1; but it is also removing the line `/ab/` from second line. This is not desired. I understand it is considering `/../` as some regex and `/ab/` matches this regex. But I want only those `/../` to be replaced.

Please provide some help.

Thanks,

NN

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T06:24:57.983

The `.` is a metacharacter in `sed` meaning 'any character'. To suppress its special meaning, escape it with a backslash:

```
sed -e 's%/\.\./%/%g' $src_file > $temp_file 
```

Note that you are referring to different files after you eliminate the `/../` like that. To refer to the same name as before (in the absence of symlinks, which complicate things), you would need to remove the directory component before the `/../`. Thus:

```
some/../path/to/file
path/to/file 
```

refer to the same file, assuming `some` is a directory and not a symlink somewhere else, but in general, `some/path/to/file` is a different file (though symlinks could be used to confound that assertion).

* * *

```
$ x="some/../path/to/file
> some/ab/path/to/file
> /some/path/../to/another/../file"
$ echo "$x"
some/../path/to/file
some/ab/path/to/file
/some/path/../to/another/../file
$ echo "$x" | sed -e 's%/\.\./%/%g'
some/path/to/file
some/ab/path/to/file
/some/path/to/another/file
$ echo "$x" | sed -e "s%/\.\./%/%g"
some/path/to/file
some/ab/path/to/file
/some/path/to/another/file
$ echo "$x" | sed -e s%/\.\./%/%g
some/path/file
some/path/file
/some/path/to/another/file
$ echo "$x" | sed -e s%/\\.\\./%/%g
some/path/to/file
some/ab/path/to/file
/some/path/to/another/file
$ 
```

Note the careful use of double quotes around the variable `"$x"` in the `echo` commands. I could have used either single or double quotes in the assignment and would have gotten the same result.

Test on Mac OS X 10.7.4 with the standard `sed` (and shell is `/bin/sh`, aka `bash` 3.2.x), but the results would be the same on any system.

# android - Android、iPhone、黑莓常用的加解密算法

> ID：12400457
> 
> 赞同：1
> 
> 时间：2012-09-13T06:16:34.813
> 
> 标签：android, ios, blackberry, encryption

我为 Android、BlackBerry 和 iPhone 制作了一个应用程序。该应用程序需要与我的基于 Java 的 Web 服务进行通信。当应用程序和网络服务通信时，数据应该被加密。

是否有任何通用算法可以用来加密和解密这三个平台中的数据？我在互联网上搜索过，但找不到可靠的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T06:30:21.113

最简单的方法是在 Web 服务器上使用 SSL。因此，与其加密数据，不如加密实际连接。您只需连接到“https://...”而不是“http://...”。这是每个平台都可以使用的非常标准的加密，您不必通过加密数据使客户端应用程序中的事情复杂化。

这当然假设您控制 Web 服务器，或者可以确保它启用了 SSL。

# java - 在片段内添加带有活动的选项卡主机

> ID：12400461
> 
> 赞同：0
> 
> 时间：2012-09-13T06:16:51.620
> 
> 标签：java, android, android-activity, android-fragments

再会。我有一些问题。我有左侧列表视图和右侧详细视图的应用程序。在右视图中，我有一个带有标签主机的片段。但我也想为所有标签添加活动。例如：我在左侧有客户列表。在右边我有标签：“客户评论”，“客户照片”，“客户信息” 在客户评论中，我需要在活动中为该客户提供评论，并有可能添加新评论。我已经制作了一个列表视图和详细信息，但是我在将选项卡主机集成到其中时遇到了问题。所以我有什么。这是我的详细代码片段

```
 public class ItemDetailFragment extends Fragment {

        public static final String ARG_ITEM_ID = "item_id";

        DummyContent.DummyItem mItem;
        private Activity lo_parentAct;

        public ItemDetailFragment() {
        }

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            if (getArguments().containsKey(ARG_ITEM_ID)) {
                mItem = DummyContent.ITEM_MAP.get(getArguments().getString(ARG_ITEM_ID));
            }
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            View rootView = inflater.inflate(R.layout.fragment_item_detail, container, false);
            if (mItem != null) {
                Intent lv_intent;
            //    ((TextView) rootView.findViewById(R.id.item_detail)).setText(mItem.content);
                TabHost tabHost=(TabHost)rootView.findViewById(R.id.tabHost);
                tabHost.setup();

                TabSpec spec1=tabHost.newTabSpec("Tab 1");
                spec1.setIndicator("Общая информация");
                lo_parentAct = this.getActivity();
                lv_intent = new Intent(lo_parentAct, ClientInfoActivity.class);

                TabSpec spec2=tabHost.newTabSpec("Tab 2");
                spec2.setIndicator("Заметки");
                lv_intent = new Intent(lo_parentAct, ClientCommentsActivity.class);

                TabSpec spec3=tabHost.newTabSpec("Tab 3");
                spec3.setIndicator("Фото");
                lv_intent = new Intent(lo_parentAct, ClientPhotosActivity.class);

                tabHost.addTab(spec1);
                tabHost.addTab(spec2);
                tabHost.addTab(spec3);

            }
            return rootView;
        }
    } 
```

一个布局

```
 <TabHost android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:id="@+id/tabHost"
            xmlns:android="http://schemas.android.com/apk/res/android"
            >
        <TabWidget
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:id="@android:id/tabs"
            />
             <FrameLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:id="@android:id/tabcontent"
             >
                 <LinearLayout
                     android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:id="@+id/tab1"
                    android:orientation="vertical"
                    android:paddingTop="60px"
                >
             <TextView  
            android:layout_width="fill_parent" 
            android:layout_height="100px" 
            android:text="This is tab1"
            android:id="@+id/txt1"
            />    

     </LinearLayout>

     <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:id="@+id/tab2"
            android:orientation="vertical"
            android:paddingTop="60px"
             >
         <TextView  
                android:layout_width="fill_parent" 
                android:layout_height="100px" 
                android:text="This is tab 2"
                android:id="@+id/txt2"
                />

     </LinearLayout>

      <LinearLayout
     android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/tab3"
    android:orientation="vertical"
    android:paddingTop="60px"
     >
             <TextView  
            android:layout_width="fill_parent" 
            android:layout_height="100px" 
            android:text="This is tab 3"
            android:id="@+id/txt3"
            />

     </LinearLayout>
     </FrameLayout>

    </TabHost> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:28:04.540

> 在片段内添加带有活动的选项卡主机

您不能将活动放入片段中！据我了解-您想将`TabActivity`不同的（不推荐使用）`activities`放入您的主要活动的根目录`Fragment`中-这种方式是绝对错误的。

实现您需要的一种方法是：

1.  创建一个`FragmentActivity`。
2.  将 TabWidget 放入`FragmentActivity`.
3.  然后将不同`Fragments`的选项放入 TabWidget 的选项卡中。

[您可以在另一个主题（链接）](https://stackoverflow.com/questions/12347886/replacement-of-tabactivity-with-fragmentactivity-and-fragments/12348482#12348482)中查看我与代码示例类似的答案。

# powershell - 在 PowerShell 中并行运行多个复制作业

> ID：12400463
> 
> 赞同：1
> 
> 时间：2012-09-13T06:16:54.597
> 
> 标签：powershell, start-job

我尝试使用 powershell 脚本加速我们的复制作业。

我遍历服务器列表并尝试为每个副本启动一个作业。

```
foreach ($i in $serverlist)
{   
    if (Test-Connection -ComputerName $i -Count 1 -Quiet) {
        Start-Job -ScriptBlock {
        robocopy c:\temp d:\temp /MIR /R:0
    } -name CopyJob_$i | Out-Null
    }
} 
```

该脚本运行良好，但它在复制时停止，直到它到达下一个服务器。我认为新作业将在后台运行，并且脚本会迭代到下一个服务器。

知道为什么循环会在 robocopy 过程中停止吗？

提前谢谢了

斯特凡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:22:53.040

它不应该阻塞副本本身的执行，它只会阻塞直到`Test-Connection`完成并开始作业。

现在，您的脚本每次都从本地计算机`C:\temp`或本地计算机上复制。`D:\temp`你可能想要这个：

```
$jobs = foreach ($serverName in $serverlist) {
    Write-Host "Starting copy job for $serverName"
    Start-Job -Name "Copyjob $serverName" -ArgumentList $serverName -ScriptBlock {
      param($serverName)

      if (Test-Connection -ComputerName $serverName -Count 1 -Quiet)
      {
        robocopy "\\$serverName\`$c\temp" "\\$serverName\`$d\temp" /MIR /R:0
      }
   }
}

$jobs | Wait-Job
$jobs | Receive-Job 
```

# java - 如果用户输入随机字母，如何更改给定字符串中的所有字母？

> ID：12400466
> 
> 赞同：-6
> 
> 时间：2012-09-13T06:17:10.263
> 
> 标签：java

我试图弄清楚如何使用字符换行来根据用户输入来改变字符串。如果字符串是“Bob 喜欢建造建筑物”并且用户输入“b”，我必须将输出更改为小写和大写字母 bs。

这是它必须添加的内容：

```
 System.out.print("\nWhat character would you like to replace?");
 String letter = input.nextLine();
 System.out.print("What character would you like to replace "+letter+" with?");
 String exchange = input.nextLine(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T06:22:25.653

怎么样：

```
myString = myString.replace(letter,exchange); 
```

编辑： myString 是您要替换其中的字母的字符串。

字母取自您的代码，它是要替换的字母。

exchange 也取自您的代码，它是要替换字母的字符串。

当然，对于大写字母和小写字母，您需要再次执行此操作，因此它将是：

```
myString = myString.replace(letter.toLowerCase(),exchange);
myString = myString.replace(letter.toUpperCase(),exchange); 
```

为了涵盖输入字母为小写或大写的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T06:24:19.107

一个简单的方法是：

```
String phrase = "I want to replace letters in this phase";
phrase = phrase.replace(letter.toLowerCase(), exchange);
phrase = phrase.replace(letter.toUpperCase(), exchange); 
```

编辑：根据以下建议添加 toLowerCase() 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T06:37:30.427

我不确定您对以前的回复有什么误解，但这会将它们与您的代码联系起来。

```
 String foo = "This is the string that will be changed"; 
 System.out.print("\nWhat character would you like to replace?"); 
 String letter = input.nextLine(); 
 System.out.print("What character would you like to replace "+letter+" with?"); 
 String exchange = input.nextLine();
 foo = foo.replace(letter.toLowerCase(), exchange); 
 foo = foo.replace(letter.toUpperCase(), exchange); 

 System.out.print("\n" + foo); // this will output the new string 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T06:24:33.290

检查`replace`方法：

```
public String replace(char oldChar, char newChar) 
```

> 返回一个新字符串，该字符串是用 newChar 替换此字符串中所有出现的 oldChar 所产生的。

有关详细信息，请参阅 [ `String#replace`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace(char, char))

编辑：

```
class ReplaceDemo
{
    public static void main(String[] args)
    {
        String inputString = "It is that, that's it.";
        Char replaceMe = 'i';
        Char replaceWith = 't';

        String newString = inputString.Replace(replaceMe.toUpperCase(), replaceWith);
        newString = newString.Replace(replaceMe.toLowerCase(), replaceWith);
    }
} 
```

这能解决你的问题吗？

# python-2.7 - 如何动态导入和重新导入包含可能随时更改的全局变量定义的文件

> ID：12400467
> 
> 赞同：2
> 
> 时间：2012-09-13T06:17:15.287
> 
> 标签：python-2.7, global-variables, reload, volatile, dynamic-import

我需要有我的列表的实际状态，它可能随时改变。

我的列表.py

```
list = {"key": "value"} 
```

第一次导入时，它的状态是实际的，但 mylist.py 中的列表可能会更改。每次调用函数时，我都需要重新导入它。

一些代码.py

```
def someFunc():
    from mylist import list
    print list 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T22:28:24.497

有一个函数叫`reload(module)`

```
import mylist 

def someFunc():
    mylist = reload(mylist) # this may raise syntaxerrors in wrong moments
    list = mylist.list
    print list 
```

对你起作用吗？

# biztalk - 更改资源时是否需要重新启动 biztalk 应用程序或仅主机实例？

> ID：12400469
> 
> 赞同：3
> 
> 时间：2012-09-13T06:17:21.070
> 
> 标签：biztalk, restart

我是biztalk的新手。

我有链接到 wcf 的数据服务访问 dll。

我刚刚添加了一个新列，所以我更新了我的 wcf。

所以接下来的事情就是更新 GAC 中已经存在的 dll。

只是想知道是否有任何关于此的 msdn 文档？

或者这里的最佳做法是什么？

当您重新启动主机实例与重新启动应用程序时究竟发生了什么？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T06:33:56.807

停止/启动 BizTalk 应用程序只是停止并重新启动关联的接收和发送端口，并防止业务流程对任何挂起的订阅项目进行操作。如果您更进一步并取消登记编排/发送端口，这将从 BizTalk 消息框数据库中删除相关订阅。

通过编译和部署 WCF 数据类型的新定义，您已经更改了 GAC 中的程序集（所有架构都在后台编译并表示为 .Net 数据类型）。要使此更改反映在正在运行的主机实例中，您实际上需要更改 .Net AppDomain 中的现有 DLL。.Net 运行时不支持从 AppDomain 中删除程序集类型，因此您需要停止并重新启动主机实例才能实现这一点。

简短的回答：重新启动您的主机实例以了解数据定义的任何更改。

# macos - 为什么 CATransform3DMakeRotation 不采用 (0,0,1) 作为绕 Z 轴旋转？

> ID：12400474
> 
> 赞同：1
> 
> 时间：2012-09-13T06:17:44.443
> 
> 标签：macos, cocoa, appkit, catransform3d

如果我`NSView`在 Cocoa 的应用程序中进行转换：

```
self.view.layer.transform = CATransform3DMakeRotation(30 * M_PI / 180, 0, 0, 1); 
```

我看到正方形没有绕 Z 轴旋转，而是像该矢量向下和向外一样旋转。我需要成功

```
self.view.layer.transform = CATransform3DMakeRotation(30 * M_PI / 180, 1, 1, 1); 
```

使其绕Z轴旋转，如[本题](https://stackoverflow.com/questions/12400273/how-to-make-nsview-not-clip-its-bounding-area)图片所示。

但是，如果我设置一个`NSTimer`然后更新方法`transform`中的`update`，然后使用

```
-(void) update:(id) info {
    self.view.layer.transform = 
                  CATransform3DMakeRotation(self.degree * M_PI / 180, 0, 0, 1);
    self.degree += 10;
} 
```

（这一次，使用`(0, 0, 1)`）将起作用：它围绕 Z 轴旋转。我想知道为什么`(1, 1, 1)`需要 inside `applicationDidFinishLaunching`，但`(0, 0, 1)`可以在`update`方法中使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T04:42:00.083

事实证明，需要首先添加视图`window.contentView`：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{    
    self.view = [[NSView alloc] initWithFrame:NSMakeRect(100, 100, 200, 200)];

    [self.window.contentView addSubview:self.view];

    self.view.wantsLayer = YES;
    self.view.layer = [CALayer layer];

    self.view.layer.backgroundColor = [[NSColor yellowColor] CGColor];
    self.view.layer.anchorPoint = CGPointMake(0.5, 0.5);
    self.view.layer.transform = CATransform3DMakeRotation(30 * M_PI / 180, 0, 0, 1); 
} 
```

另外，线`self.view.layer = [CALayer layer];`需要在线之后`self.view.wantsLayer = YES;`。为什么这些订单，我不确定，但它按预期工作。我找不到提到此订单要求的文档，但上面的代码有效。当我找到有关为什么需要订单的更多信息时，我会更新答案。

# mysql - SELECT IF 查询

> ID：12400475
> 
> 赞同：1
> 
> 时间：2012-09-13T06:17:50.393
> 
> 标签：mysql, sql

我有简单的查询：

```
SELECT max(`id`) as `name_id` , LEFT(`name`,LENGTH(`name`)-2) AS `name`, `status` 
 FROM `users`
WHERE `site` = 1
  AND `category` = 'some' 
```

我只需要选择那些，其中`supp`== YES

```
SELECT `model`.`supp`
  FROM `model`, `users`
 WHERE `users`.`name_id` = `name_id_from_the_first_query`
   AND `model`.`model_id` = `users`.`model_id`; 
```

因此，只有当第二个为当前 ID 返回 YES 时，我才需要第一个查询的返回值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:28:52.720

尝试，

```
SELECT  max(a.`id`) as `name_id` , 
        LEFT(`name`,LENGTH(a.`name`)-2) AS `name`, 
        a.`status`
FROM    `model` a 
        INNER JOIN `users` b
            ON a.`model_id` = b.`model_id`
WHERE    a.`site` = 1 AND
         a.`category` = 'some' AND
         b.`supp` = 'YES'
GROUP BY a.`name`, a.`status` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T06:22:49.333

试试这个查询：

```
SELECT max(`id`) as `name_id` , LEFT(`name`, LENGTH(`name`)-2) AS `name`
       , `status` 
 FROM `users` 
     JOIN `model` 
       ON `model`.`model_id` = `users`.`model_id`
    WHERE `site` = 1 AND `category` = 'some'
      AND `model`.`supp` = 'YES'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T06:32:27.887

在这里，您还有另一个选择：

```
SELECT max(`id`) as `name_id` , LEFT(`name`,LENGTH(`name`)-2) AS `name`, `status` 
 FROM `users`
WHERE `site` = 1
  AND `category` = 'some'
  AND id IN (SELECT `model_id`
               FROM `model`
              WHERE `supp` = 'YES'
             )
GROUP BY `name`, `status`; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T06:30:22.470

```
SELECT max(`id`) as `name_id` , LEFT(`name`, 
LENGTH(`name`)-2) AS `name`, `status` 
FROM `users` WHERE `site` = 1 AND `category` = 'some'
     and EXISTS
     ( 
       SELECT `model`.`supp` FROM `model` 
          WHERE `model`.`model_id` = `users`.`model_id`
                 and `model`.`supp`='Yes'
      ) 
```

# android - Android，是否可以在不使用回调的情况下将 Twitter 集成到 Android 应用程序中？

> ID：12400476
> 
> 赞同：0
> 
> 时间：2012-09-13T06:17:55.760
> 
> 标签：android, twitter, integration

在我的应用程序中，我需要将 twitter 集成到我的应用程序中。我尝试将它与回调 url 集成，一切都很好。我可以成功发送消息并在我的页面上看到该消息。

但是，将回调 url 添加到 twitter 给 iPhone 应用程序带来了问题。现在，我需要找到一种不使用回调 url 来发送消息的方法。

我搜索了互联网，不幸的是所有教程都是基于回调方法的。是否可以不使用回调方法发送消息？如果您知道任何文档，请与我分享。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:51:08.733

为避免导航 url，您可以使用 Htmlunit 并以编程方式授权您的表单。
这里与 dropbox 相同的问题：[http ://wastedcodetime.blogspot.com/?view=sidebar](http://wastedcodetime.blogspot.com/?view=sidebar)

# cuda - 使用 CUBLAS 例程在 GPGPU 上保留点积

> ID：12400477
> 
> 赞同：4
> 
> 时间：2012-09-13T06:18:15.567
> 
> 标签：cuda, gpgpu, cublas, dot-product

我正在编写代码来使用点积的 CUBLAS 例程计算两个向量的点积，但它返回主机内存中的值。我只想使用点积在 GPGPU 上进行进一步计算。如何使值仅驻留在 GPGPU 上并将其用于进一步计算，而无需从 CPU 到 GPGPU 的显式复制？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-13T07:57:32.467

只要您使用“V2”API，您就可以在 CUBLAS 中执行此操作。较新的 API 包含一个函数`cublasSetPointerMode`，您可以使用该函数将 API 设置为假定所有返回标量值的例程都将传递给设备指针而不是主机指针。这在最新的 CUBLAS 文档的第 2.4 节中进行了讨论。例如：

```
#include <cuda_runtime.h>
#include <cublas_v2.h>
#include <stdio.h>

int main(void)
{
    const int nvals = 10;
    const size_t sz = sizeof(double) * (size_t)nvals;
    double x[nvals], y[nvals];
    double *x_, *y_, *result_;
    double result=0., resulth=0.;

    for(int i=0; i<nvals; i++) {
        x[i] = y[i] = (double)(i)/(double)(nvals);
        resulth += x[i] * y[i];
    }

    cublasHandle_t h;
    cublasCreate(&h);
    cublasSetPointerMode(h, CUBLAS_POINTER_MODE_DEVICE);

    cudaMalloc( (void **)(&x_), sz);
    cudaMalloc( (void **)(&y_), sz);
    cudaMalloc( (void **)(&result_), sizeof(double) );

    cudaMemcpy(x_, x, sz, cudaMemcpyHostToDevice);
    cudaMemcpy(y_, y, sz, cudaMemcpyHostToDevice);

    cublasDdot(h, nvals, x_, 1, y_, 1, result_);

    cudaMemcpy(&result, result_, sizeof(double), cudaMemcpyDeviceToHost);

    printf("%f %f\n", resulth, result);

    cublasDestroy(h);
    return 0;
} 
```

使用`CUBLAS_POINTER_MODE_DEVICE`make`cublasDdot`假设它`result_`是一个设备指针，并且没有尝试将结果复制回主机。请注意，这会使例程像`dot`异步一样，因此您可能需要密切关注设备和主机之间的同步。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-13T06:28:46.727

~~确切地说，您不能使用 CUBLAS。~~根据 talonmies 的回答，从 CUBLAS V2 api (CUDA 4.0) 开始，返回值可以是设备指针。参考他的回答。但是如果你使用 V1 API，它是一个单一的值，所以将它作为参数传递给使用它的内核是非常简单的——你不需要显式的`cudaMemcpy`（但是为了返回主机值，有一个隐含的）。

从 Tesla K20 GPU 和 CUDA 5 开始，您将能够使用 CUDA Dynamic Parallelism 从设备内核调用 CUBLAS 例程。这意味着您将能够`cublasSdot`（例如）从`__global__`内核函数内部调用，因此您的结果将在 GPU 上返回。

# bash - 在 Makefile 中测试软件版本

> ID：12400479
> 
> 赞同：3
> 
> 时间：2012-09-13T06:18:18.277
> 
> 标签：bash, makefile, version

我试图告诉用户他使用的 virtualenv 版本是否不是最新的。

但它还没有工作。任何想法 ？

```
virtualenv:
    if [ ! -f $(PYTHON) ]; then \
        version=`$(VIRTUALENV) --version`;\
        check="1.8.2";\
        winner=`echo -e "$${version}\n$${check}" | sed '/^$$/d' | sort -nr | head -1`;\
        if [[ "$(winner)" = "$(version)" ]]; then \
            $(VIRTUALENV) $(ROOT_DIR)/lib/virtualenv; \
        else \
            echo "Please upgrade your virtualenv>=1.8.2";\
            exit 1;\
        fi \
    fi 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T06:20:37.993

好的，这是一个使用 $ 的 Makefile 小技巧

```
virtualenv:
    if [ ! -f $(PYTHON) ]; then \
        version=`$(VIRTUALENV) --version`;\
        check="1.8.2";\
        winner=`echo -e "$${version}\n$${check}" | sed '/^$$/d' | sort -nr | head -1`;\
        if [[ "$${winner}" = "$${version}" ]]; then \
            $(VIRTUALENV) $(ROOT_DIR)/lib/virtualenv; \
        else \
            echo "Please upgrade your $${version} version of virtualenv to >= 1.8.2";\
            echo "    $ sudo pip install -U distribute pip virtualenv";\
            exit 1;\
        fi \
    fi 
```

# jsp - 不通过 struts2.xml 直接访问 servlet？

> ID：12400484
> 
> 赞同：-1
> 
> 时间：2012-09-13T06:18:48.763
> 
> 标签：jsp, servlets, struts2

我在 struts2 MVC 中创建了一个项目。谁能告诉我如何在不直接通过 struts2.xml 的情况下访问 servlet？我知道我们可以通过动作调度程序通过 struts2.xml 访问，但我想知道是否有任何其他方法可以直接从 jsp 访问 servlet？

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <servlet>
        <servlet-name>MyServlet</servlet-name>
        <servlet-class>com.myservlet.MyServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>MyServlet</servlet-name>
        <url-pattern>/MyServlet</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

**struts.xml**

```
<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
    <!-- Configuration for the default package. -->
    <package name="default" extends="struts-default">

    </package>
</struts> 
```

**MyServlet.java**

```
package com.myservlet;

import java.io.IOException;
import java.io.PrintWriter;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.swing.JOptionPane;

public class MyServlet extends HttpServlet {
    protected void processRequest(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException {
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();
        try {
        } finally { 
            out.close();
        }
    } 
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException {
        processRequest(request, response);

    } 

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException {
        processRequest(request, response);
        PrintWriter out = response.getWriter();
        String name=request.getParameter("username");
        JOptionPane.showMessageDialog(null,"SEEE:"+name);
    }

    @Override
    public String getServletInfo() {
        return "Short description";
    }// </editor-fold>

} 
```

**索引.jsp**

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">

<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <form action="MyServlet" method="post">
            USERNAME:<input type="text" name="username"/><br>
            <input type="submit" value="SHOW"/>
        </form>
    </body>
</html> 
```

在上面的代码中，为什么我不能在 getPost() 方法中访问文本字段的值？提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:30:43.897

我相信您知道如何调用 servlet 以及如何配置它们，所以我不会详细说明。

您可以创建 servlet 并根据您的用例调用它们，您只需告诉 Struts2 过滤器您不希望 Struts2 处理某些特定的 URL

在您的`struts.xml`添加中：

```
<constant name="struts.action.excludePattern" value="/ServletToExcludeFromStruts*"/> 
```

更多详情请参考[webxml](http://struts.apache.org/2.3.4/docs/webxml.html)

# javascript - javascript中的排序功能

> ID：12400485
> 
> 赞同：0
> 
> 时间：2012-09-13T06:18:55.747
> 
> 标签：javascript, html

嗨，我有带表格的 html 结构。我想根据它们的值对 td 进行排序。我尝试了它，但找不到实现它的逻辑。我的功能是

```
<head>
<script type="text/javascript">
function sorting(){
    var sortvalue= document.getElementsByTagName('td');
    for(i=0; i<sortvalue.length;i++){
        var val= sortvalue[i].value
        }
    }

</script>

</head>

<body>

<table width="500" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td>5</td>
  </tr>
  <tr>
    <td>3</td>
  </tr>
  <tr>
    <td>2</td>
  </tr>
  <tr>
    <td>4</td>
  </tr>
    <tr>
    <td>1</td>
  </tr>

</table>

<a href="#" onclick="sorting()">click to sort</a>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:27:21.177

假设您将脚本放在链接下，或​​者将其添加到 domready：

```
function sorting(){

    var tbl = document.getElementsByTagName('table')[0];
    var store = [];
    for(var i=0, len=tbl.rows.length;i<len; i++){
        var row = tbl.rows[i];
        var sortnr = parseFloat(row.cells[0].textContent || row.cells[0].innerText);
        if(!isNaN(sortnr)) store.push([sortnr, row]);
    }
    store.sort(function(x,y){
        return x[0] - y[0];
    });
    for(var i=0, len=store.length; i<len; i++){
        tbl.appendChild(store[i][1]);
    }
    store = null;
} 
```

链接在这里：http: [//jsfiddle.net/UMjDb/](http://jsfiddle.net/UMjDb/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T06:28:41.590

如果您打算做的不仅仅是整理这些数字：那些说您应该使用插件的人是正确的。尝试制作自己的表格分类器需要付出更多的努力。

如果您只想对这些数字进行排序（从小到大）：

```
function sorting() {
    td = document.getElementsByTagName("td");
    sorted = [];
    for (x = 0; x < td.length; x++)
        sorted[x] = Number(td[x].innerHTML);
    sorted.sort();
    for (x = 0; x < sorted.length; x++) 
        td[x].innerHTML = sorted[x];
} 
```

从大到小：

```
function sorting() {
    td = document.getElementsByTagName("td");
    sorted = [];
    for (x = 0; x < td.length; x++)
        sorted[x] = Number(td[x].innerHTML);
    sorted.sort().reverse();
    for (x = 0; x < sorted.length; x++) 
        td[x].innerHTML = sorted[x];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T06:31:01.303

第 1 步：找到所有 td
第 2 步：获取它们的值
第 3 步：根据它们的值对它们进行排序
第 4 步：以正确的顺序将它们放回其父级。这可以简单地通过 $(parent).html("").append(sortedNodes) 来完成（如果你使用的是 jQuery）。

正如@FelixKling 在下面指出的那样，`.html("")`除了代码清晰之外，这并不是绝对必要的，因为“如果树中已经存在节点，则`.append`首先将它们从当前位置删除并将它们添加到新父级”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T06:38:14.207

对于您的示例，您可以从节点列表中创建一个单元格数据数组并对该数组进行排序，然后将单元格数据替换为排序后的数据。比移动元素更简单。

```
<head>
<script type= "text/javascript">
function sorting(){
    var T= [], tds= document.getElementsByTagName('td');
    for(var i= 0;i<tds.length;i++){
        T.push(tds[i].firstChild.data);
    }
    T.sort(function(a, b){
        return a-b
    });
    for(var i= 0;i<tds.length;i++){
        tds[i].replaceChild(document.createTextNode(T[i]), tds[i].firstChild);
    }
}
</script>
</head>
<body>
<table width= "500" border= "0" cellspacing= "0" cellpadding= "0">
<tr>
<td>5</td>
</tr>
<tr>
<td>3</td>
</tr>
<tr>
<td>2</td>
</tr>
<tr>
<td>4</td>
</tr>
<tr>
<td>1</td>
</tr>
</table>
<a href= "#" onclick= "sorting()">click to sort</a>
</body> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-13T07:07:42.733

我给出了一个 jquery 解决方案，希望这篇文章对你有所帮助。

```
var tdData = Array();
$(document).ready(function(){
    $('td').each(function(i){
   tdData [i] = $(this).text();
   });  
});

function sorting(){
   var sortedData = tdData.sort();
    $('td').each(function(i){
  $(this).text(sortedData[i]);
  } ); 
} 
```

[完整解决方案：链接](http://jsfiddle.net/rajnish/n2dZJ/1/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-13T06:21:49.487

您需要重新组织表格。最简单的方法是为[jQuery](http://api.jquery.com/)使用像[这样的插件](http://tablesorter.com/docs/)

您需要修改 DOM，它们将采用不同的方式来执行此操作，例如获取所有数据、删除所有行并以正确的顺序添加它们。[使用分离](http://api.jquery.com/detach/)和重新连接
可以更好地改进它。

# oracle - 从 JPA 为选择/插入/更新/删除自定义 JDBC 查询生成？

> ID：12400489
> 
> 赞同：0
> 
> 时间：2012-09-13T06:19:06.300
> 
> 标签：oracle, jpa

我想将所有 jpa 生成的 jdbc 请求路由到实际执行选择/插入/更新/删除查询的 Oracle 包。有没有办法做到这一点？

更新：为这种用法生成Oracle包没有问题，问题在于自定义生成的JDBC请求。

# cordova - 启动屏幕后显示黑屏 Android 2.2 及以上 Cordova 1.9

> ID：12400495
> 
> 赞同：3
> 
> 时间：2012-09-13T06:19:46.517
> 
> 标签：cordova, splash-screen

连我的问题都没有解决......

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
       //fix for Bug 3774
        super.setIntegerProperty("splashscreen", R.drawable.splash); // Display splash     screen for android
       this.setIntegerProperty("loadUrlTimeoutValue", 120000);
       super.loadUrl("file:///android_asset/www/index.html",1000);// 1000 is the time for splash screen display 

   } 
```

在这里，我希望启动屏幕将显示 1 秒（1000），然后必须显示索引页面，但在（启动和索引页面）之间，空白屏幕将显示 10-20 秒。

在我的apps.js中，我实现了-

```
document.addEventListener("deviceready", onDeviceReady, false);
function onDeviceReady() {
    cordova.exec(null, null, "SplashScreen", "hide", []);
 } 
```

但即使它不起作用。1.我不想显示超过1000的启动画面。任何解决方案....

**解决方案**

**我犯了愚蠢的错误。**

```
document.addEventListener("deviceready", onDeviceReady, false);
 function onDeviceReady() {
    cordova.exec(null, null, "SplashScreen", "hide", []);
 } 
```

此代码必须在 .js 文件中的 .Ready 方法中。

1.  Java 文件

    我犯了愚蠢的错误。

    document.addEventListener("deviceready", onDeviceReady, false); 函数 onDeviceReady() { cordova.exec(null, null, "SplashScreen", "hide", []); }

此代码必须在 .js 文件中的 .Ready 方法中。

1.  Java 文件

将时间增加到最大值，例如 10000 或 1200000

# javascript - 使用 javascript 和 json 从数据库中显示 html5 中的数据

> ID：12400498
> 
> 赞同：-1
> 
> 时间：2012-09-13T06:20:14.717
> 
> 标签：javascript, json, html

我正在尝试从 mysql 数据库中显示 html 列表。要从 mysql 获取数据，我正在使用 json 和 javascript。但它什么也没显示！

我的html页面是

```
<!DOCTYPE html>
<html class="ui-mobile-rendering">
<head>
<title></title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="css/jquery.mobile-1.0.1.min.css"/>
</head>
<body>
<div id="tenant" data-role="page">

    <div data-role="header">
        <a href="index.html" data-icon="back" class="back ui-btn-left">Back</a>
        <h1>My Lease</h1>
    </div>

    <div data-role="content">

        <ul id="actionList" data-role="listview"  data-inset="true">
        </ul>
    </div>  
    </div>
<script src="js/tenantlease.js"></script>
<script src="lib/jquery-1.7.1.min.js"></script>
<script src="js/jqm-config.js"></script>
<script src="lib/jquery.mobile-1.0.1.min.js"></script>
<script src="lib/underscore-min.js"></script>
<script src="lib/backbone-min.js"></script>
<script src="js/main.js"></script>
</body>
</html> 
```

我的 php 文件是。当我从带有 id 的浏览器调用时，它工作正常。

```
<?php
session_start();
include 'connection.php';
$email=$_SESSION["PM"];

$sql = "select * from phpap105_tenantinfo where TenantEmailAddress=:id";
try {
$dbh = new PDO("mysql:host=$dbhost;dbname=$dbname", $dbuser, $dbpass);  
$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$stmt = $dbh->prepare($sql);  
$stmt->bindParam("id", $_GET[id]);
$stmt->execute();
$employee = $stmt->fetchObject();  
$dbh = null;
echo '{"item":'. json_encode($employee) .'}'; 
} catch(PDOException $e) {
echo '{"error":{"text":'. $e->getMessage() .'}}'; 
}
?> 
```

我的 javascript 文件是

```
 $('#tenant').live('pageshow', function(event) {
//var id = getUrlVars()["id"];
var id = 'mukul_kuet@yahoo.com';
$.getJSON('tenantlease.php?id='+id, displayEmployee);
    });

   function displayEmployee(data) {
var employee = data.item;
//console.log(employee);

if (employee.TenantFirstName) {
    $('#actionList').append('<li><h3>First Name</h3>' +
            '<p>' + employee.TenantFirstName + '</p></a></li>');
}
if (employee.TenantLeaseSigned) {
    $('#actionList').append('<li><h3>Lease Sign</h3>' +
            '<p>' + employee.TenantLeaseSigned + '</p></a></li>');
}
    $('#actionList').listview('refresh');
   } 
```

请帮助我如何在 html 页面中获取数据。在此先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:33:20.430

好问题。您需要做的是 Step-Debug JavaScript，您将看到问题所在。

如果这是您部分熟悉或完全不熟悉的东西……我强烈推荐给您，它将打开一个发展力量的新世界。

例如...

> 1.  在 Chrome 中打开
> 2.  右键单击并选择 -> 检查元素。
> 3.  在脚本选项卡下，打开您的 JavaScript 文件。
> 4.  在左边距，您可以单击“条形”区域来设置断点，该断点将显示为一个圆点。
> 5.  在所有函数中设置断点...。
> 6.  点击刷新。JavaScript 的执行将在您的第一个有效断点处停止。
> 7.  此时，您可以检查变量以查看它们是否是您认为的值。

如果您没有看到断点，那是因为您的“pageshow”事件不工作。

[这是有关此的信息。](http://forum.jquery.com/topic/pageshow-event-not-working)

[这是另一个例子。](https://stackoverflow.com/questions/6363199/pageshow-event-in-javascript)

我的猜测是你会发现 1) 页面显示没有被调用，2) 对你的 php 的调用格式异常，或者你的回调没有被回调。

断点将可视化所有这些。

另外，检查您的回调函数，如果它缺少大括号（它在您的帖子中）并且失败，它可能为空。如果发生这种情况，Chrome 开发工具的控制台中会出现红色错误消息。

这是一个强大的工作流程。希望有帮助。

# php - 使用 PHP 代码将 PPT 转换为 HTML 并将 word doc 转换为 HTML

> ID：12400499
> 
> 赞同：0
> 
> 时间：2012-09-13T06:20:23.410
> 
> 标签：php, openoffice-writer

在我的新（PHP）项目中，我的要求是使用 php 将 ppt 和 doc 转换为 html。有人知道怎么做吗？

我搜索了很多论坛，发现我们可以通过调用OPENOFFICE软件从php代码中使用EXEC（）命令将ppt转换为html。

谁能告诉我openoffice将ppt转换为html的命令是什么。

任何人都可以帮助我如何在 Windows 和 linux 服务器上完成它。我的本地机器有 Windows，服务器在 linux 中。

另外，如果有人帮助将 doc 转换为 html？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:23:42.580

在 Windows 上不会有很多问题，但在 linux 上你会有些头疼要让它工作

使用类似的东西：

```
$sCmd = "$sLibreOfficeBin --headless --invisible --nologo --nofirststartwizard --convert-to html --outdir $sTmpFolder "old_file.ppt"; 
```

# java - 如何在java中编写一个简单的gridview？

> ID：12400502
> 
> 赞同：0
> 
> 时间：2012-09-13T06:20:37.247
> 
> 标签：java, sql, gridview

我写了sql，但是在jsp中执行它需要更多时间。我想让它更快。网格视图会让页面更快吗？我是Java初级。我在 google 中进行了研究，但没有找到关于 gridview 的明确示例。你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:39:31.163

我了解您有一个由数据库支持的基于 Web 的应用程序。

请注意，gridview 不是 Java 提供的，相反，您可以使用 Web 框架创建表格并在那里呈现数据。

你说，用 JSP 运行时，执行一条 SQL 需要很长时间。时间都去哪儿了？

运行 SQL 本身？也许创建一个 JSP 或以 Html 形式将其传输到客户端浏览器，或者甚至可能在浏览器中呈现您的表格？

您应该检测瓶颈以了解您要修复什么考虑使用分析器并查看（至少在服务器 vm 上）时间在哪里。我认为 JVisualVM 将在这里满足您的需求。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:36:17.917

我会使用以下步骤完成此任务

1.  创建一个 servlet。
2.  连接到数据库并获取我们必须显示的数据。
3.  创建一个列表并将数据保存在列表中。
4.  在请求中设置列表并将控件转发给 JSP。
5.  在 JSP 上，使用[DisplayTag](http://www.displaytag.org/1.2/)以网格形式显示数据。

希望这对您有所帮助。

# java - 高并发应用？

> ID：12400503
> 
> 赞同：0
> 
> 时间：2012-09-13T06:20:42.150
> 
> 标签：java

我在一次采访中被问到这个问题。

> 假设有一个高并发应用程序的需求，例如像 Gmail 这样的电子邮件应用程序，假设有 100K 用户同时访问该应用程序。
> 
> 您只能向客户提出 3 个问题，您会问哪 3 个问题？
> 
> 在这种情况下，客户是希望开发应用程序的公司。例如Google `[免责声明：名称只是为了给出想法。我知道你一定在想什么:)]`

 `我真的很困惑，从技术、硬件配置等开始可能会有很多问题。有人能告诉我在上述情况下哪些问题最适合。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T06:32:01.853

1.  SLA（预期正常运行时间、响应时间、使用模式等）

2.  可以在维护上花费多少（服务器/云，支持）

3.  预期增长

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T06:31:47.307

1.  预算？
2.  希望的交货日期？
3.  你有一支笔可以签名还是需要一支？`

# android - 从自动完成文本视图中选择联系人

> ID：12400504
> 
> 赞同：15
> 
> 时间：2012-09-13T06:20:45.137
> 
> 标签：android, autocomplete, contact

我想使用自动完成文本视图选择联系人以发送短信。我几乎已经实现了我想要的，但是你可以在图像中看到一分钟的问题。我该如何解决？

**activity_contact_with_auto.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<AutoCompleteTextView
    android:id="@+id/mmWhoNo"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:hint="To...." >
</AutoCompleteTextView>

</LinearLayout> 
```

**custcontview.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/ccontName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textColor="#A5000000" />

<TextView
    android:id="@+id/ccontNo"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@id/ccontName"
    android:text="Medium Text"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textColor="#A5000000" />

<TextView
    android:id="@+id/ccontType"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@id/ccontNo"
    android:layout_alignParentRight="true"
    android:layout_marginRight="14dp"
    android:text="Small Text"
    android:textAppearance="?android:attr/textAppearanceSmall"
    android:textColor="#A5000000" />
 </LinearLayout> 
```

**代码**

```
public class ContactWithAuto extends Activity {

private ArrayList<Map<String, String>> mPeopleList;
private SimpleAdapter mAdapter;
private AutoCompleteTextView mTxtPhoneNo;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_contact_with_auto);
    mPeopleList = new ArrayList<Map<String, String>>();
    PopulatePeopleList();
    mTxtPhoneNo = (AutoCompleteTextView) findViewById(R.id.mmWhoNo);
    mAdapter = new SimpleAdapter(this, mPeopleList, R.layout.custcontview,
            new String[] { "Name", "Phone", "Type" }, new int[] {
                    R.id.ccontName, R.id.ccontNo, R.id.ccontType });
    mTxtPhoneNo.setAdapter(mAdapter);

}

public void PopulatePeopleList() {
    mPeopleList.clear();
    Cursor people = getContentResolver().query(
            ContactsContract.Contacts.CONTENT_URI, null, null, null, null);
    while (people.moveToNext()) {
        String contactName = people.getString(people
                .getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
        String contactId = people.getString(people
                .getColumnIndex(ContactsContract.Contacts._ID));
        String hasPhone = people
                .getString(people
                        .getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER));

        if ((Integer.parseInt(hasPhone) > 0)){
            // You know have the number so now query it like this
            Cursor phones = getContentResolver().query(
            ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
            null,
            ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = "+ contactId,
            null, null);
            while (phones.moveToNext()){
                //store numbers and display a dialog letting the user select which.
                String phoneNumber = phones.getString(
                phones.getColumnIndex(
                ContactsContract.CommonDataKinds.Phone.NUMBER));
                String numberType = phones.getString(phones.getColumnIndex(
                ContactsContract.CommonDataKinds.Phone.TYPE));
                Map<String, String> NamePhoneType = new HashMap<String, String>();
                NamePhoneType.put("Name", contactName);
                NamePhoneType.put("Phone", phoneNumber);
                if(numberType.equals("0"))
                    NamePhoneType.put("Type", "Work");
                    else
                    if(numberType.equals("1"))
                    NamePhoneType.put("Type", "Home");
                    else if(numberType.equals("2"))
                    NamePhoneType.put("Type",  "Mobile");
                    else
                    NamePhoneType.put("Type", "Other");
                    //Then add this map to the list.
                    mPeopleList.add(NamePhoneType);
            }
            phones.close();
        }
    }
    people.close();
    startManagingCursor(people);
}

public void onItemClick(AdapterView<?> av, View v, int index, long arg){
    Map<String, String> map = (Map<String, String>) av.getItemAtPosition(index);
    Iterator<String> myVeryOwnIterator = map.keySet().iterator();
    while(myVeryOwnIterator.hasNext()) {
        String key=(String)myVeryOwnIterator.next();
        String value=(String)map.get(key);
        mTxtPhoneNo.setText(value);
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_contact_with_auto, menu);
    return true;
}
} 
```

**图片**

![截屏](../Images/f49a811da0e4470852cdfc88011f030f.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-13T06:58:33.983

为 AutoCompleteTextView 添加 onItemClickListener 而不是将其作为单独的函数。

```
 mTxtPhoneNo.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> av, View arg1, int index,
                long arg3) {
            Map<String, String> map = (Map<String, String>) av.getItemAtPosition(index);

            String name  = map.get("Name");
            String number = map.get("Phone");
            mTxtPhoneNo.setText(""+name+"<"+number+">");

        }

    }); 
```

或为您的活动实施 OnItemClickListener 并设置

```
mTxtPhoneNo.setOnItemClickListener(this); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T06:26:49.130

您当前的输出似乎是 HashMap.toString 方法的标准输出。因此，您应该自己实现 HashMap 并覆盖 toString 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-04T08:38:03.527

使用 AutoCompeleteTextView 就像@user936414 所说的那样，它可能很有用，但如果你有最大的应用程序，它可能会产生问题，甚至更多的是使用 multiAutoCompeleteTextView 所以建议通过创建一个“自定义”HashMap 来覆盖 toString 方法：

```
public class ContactMap extends HashMap<String, String> {

/*
 * (non-Javadoc)
 * 
 * @see java.util.AbstractMap#toString()
 */
@Override
public String toString() {
    if (isEmpty()) {
        return "{}";
    }

    StringBuilder buffer = new StringBuilder(size() * 28);
    Iterator<Map.Entry<String, String>> it = entrySet().iterator();
    while (it.hasNext()) {
        Map.Entry<String, String> entry = it.next();
        Object key = entry.getKey();

        if (key == "Name") {
            Object value = entry.getValue();
            buffer.append(value);
        } else {
            if (key == "Phone")
                buffer.append("<");
            Object value = entry.getValue();
            if (value != this) {
                buffer.append(value);
            } else {
                buffer.append("(this Map)");
            }
            if (key == "Phone")
                buffer.append(">");

        }
    }

    return buffer.toString();
}

} 
```

并像这样使用它

```
 // Using our custom HashMap
                    ContactMap NamePhoneType = new ContactMap(); 
```

# java - Spring数据CRUD方法

> ID：12400506
> 
> 赞同：3
> 
> 时间：2012-09-13T06:20:56.567
> 
> 标签：java, spring, spring-data

我们使用 spring 数据，其全部意义在于能够只使用提供的接口（例如 CrudRepository）而不必实际实现东西。

我们已经意识到我们需要采取措施确保我们的应用程序：

*   从输入中转义非法 HTML 字符，例如 & < > " '
*   具有防止 sql 注入的保护

对我来说，最合乎逻辑的地方似乎是我们所有 repos 共享的通用数据库方法中的某个高处。但是由于它们没有在我们的代码中的任何地方实现，我不知道这是否已经在 Spring Data 中实现。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-13T06:36:30.323

您似乎在这里混合了两个非常不同的问题，所以让我们分别讨论它们：

1.  针对 SQL 注入的保护可以在相应的 SQL-ish spring-data 实现中找到：JDBC 或 JPA；所以你不应该担心它。通用 API 不会公开与此相关的任何内容，因为它是通用的，例如，当您使用 HBase 时，“SQL 注入”听起来真的很奇怪。

2.  转义 HTML 内容是完全不同的事情，因为它是您的表示层的问题，而不是您的数据层。因此，当您想在 UI 中显示存储的数据时，您可以在验证时转义输入，然后将其发送到存储库，或者在之后清理输出。

请注意，HTML 只是您的数据可以交付的格式之一。如果您以后还需要生成 JSON 或 CSV，您最终将在数据库中混合不同格式的转义。这就是为什么转义不是 DAO 层的一部分以及为什么输出净化是安全的方式的一个明显原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-25T22:21:46.937

解决您对`escapes illegal HTML characters such as & < > " ' from input`

您应该考虑使用：

```
org.apache.commons.lang.StringEscapeUtils.escapeHtml(str) 
```

在您的服务层

有关此类的更多信息，请参阅[StringEscapeUtils JavaDocs](http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringEscapeUtils.html)

# c# - 从“安全”CLR 数据库触发器中连接到 SQL Server 实例中的另一个数据库

> ID：12400519
> 
> 赞同：1
> 
> 时间：2012-09-13T06:22:31.723
> 
> 标签：c#, sql-server, triggers, sql-server-2008-r2, sqlclr

我正在为 SQL Server 2008 R2 编写 CLR 更新触发器。触发器需要将更新的值写入托管在同一 SQL Server 实例中的另一个数据库中的表中。当我尝试从触发器中打开使用以下连接字符串创建的连接时，我收到“SecurityException”：

> ...new SqlConnection("Data Source=(local);Initial Catalog=[我的数据库];Integrated Security=True")

非常希望我将程序集的权限级别保留为`SAFE`. 我很确定我必须将程序集的权限级别设置`EXTERNAL_ACCESS`为连接到远程数据库，但是是否可以使用权限级别连接到同一 SQL Server 实例中的另一个数据库`SAFE`？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-25T17:27:06.643

是的，绝对可以在 SQLCLR 触发器中引用另一个数据库，该触发器位于标记为 的程序集内`SAFE`。问题中遇到的错误仅仅是由于使用了常规/外部连接字符串，这需要 a `PERMISSION_SET`of `EXTERNAL_ACCESS`. 但是使用进程内/内部连接字符串`"Context Connection = true;"`允许您运行任何您想要的查询，包括通过 3 部分对象名称引用另一个数据库的查询。

我能够使用以下代码做到这一点：

**主表（在 TestDB1 中）：**

```
CREATE TABLE dbo.Stuff
(
    [Id] INT IDENTITY(1, 1) NOT NULL PRIMARY KEY, 
    [Something] NVARCHAR(50) NOT NULL
); 
```

**审计表（在 TestDB2 中）：**

```
CREATE TABLE dbo.AuditLog
(
    AuditLogID INT IDENTITY(1, 1) NOT NULL PRIMARY KEY, 
    EventTime DATETIME NOT NULL DEFAULT (GETDATE()),
    BeforeValue NVARCHAR(50) NULL,
    AfterValue NVARCHAR(50) NULL
); 
```

**主表上的 SQLCLR 触发器（部分代码）：**

```
string _AuditSQL = @"
    INSERT INTO TestDB2.dbo.AuditLog (BeforeValue, AfterValue)
        SELECT del.Something, ins.Something
        FROM   INSERTED ins
        FULL OUTER JOIN DELETED del
                     ON del.Id = ins.Id;
";

SqlConnection _Connection = new SqlConnection("Context Connection = true");
SqlCommand _Command = _Connection.CreateCommand();
_Command.CommandText = _AuditSQL;

try
{
    _Connection.Open();
    _Command.ExecuteNonQuery();
}
finally
{
    _Command.Dispose();
    _Connection.Dispose();
} 
```

**测试查询：**

```
USE [TestDB1];
SELECT * FROM dbo.Stuff;
---
INSERT INTO dbo.Stuff (Something) VALUES ('qwerty');
INSERT INTO dbo.Stuff (Something) VALUES ('asdf');

SELECT * FROM dbo.Stuff;
SELECT * FROM TestDB2.dbo.AuditLog;
---
UPDATE  tab
SET     tab.Something = 'dfgdfgdfgdfgdfgdfgd'
FROM    dbo.Stuff tab
WHERE   tab.Id = 2;

SELECT * FROM dbo.Stuff;
SELECT * FROM TestDB2.dbo.AuditLog; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T05:40:11.387

看起来这是不可能的。但是，T-SQL 语句可以使用 [DatabaseName].[dbo].[TableName] 引用同一实例中的另一个数据库。我可以在我的 CLR 触发器中执行凌乱的逻辑，然后通过调用简单的 T-SQL 存储过程并传入参数来最终插入到第二个数据库中。

# lighttpd - lighttpd 负载测试和优化

> ID：12400520
> 
> 赞同：1
> 
> 时间：2012-09-13T06:22:33.393
> 
> 标签：lighttpd

我最近开始使用 lighttpd 而不是 apache，发现它更实用、更快速。

为了让您进一步了解我的配置和其他工具，以服务于我的网站在线目的，在这里。

1.  轻量级 1.4.31
2.  内存 - 2Gb

`max-procs = 2,` `PHP_FCGI_CHILDREN = 4,` `PHP_FCGI_MAX_REQUESTS = 10000`

`free ram -- 186 free and 652 cached`

问题 ：

根据观察，每当负载增加到 4.00 时，站点就会出现故障，我不知道为什么会这样。

当我有足够的内存来服务 lighttpd 时，我应该如何优化它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:27:37.277

这是我的 lighttpd 配置文件，带有 Typo3 + Fastcgi + Fam 和低内存和积极调整。在我得到我的网络服务器之前，我现在用 Lighttpd 而不是 Apache 吃掉了我所有的服务器内存（512M），并且进行了一些调整，我有 25M 的空闲内存，并且 Typo3 的运行速度快了很多。我希望它有帮助？

```
## 服务器将接受的最大并发连接数（server.max-fds 的 1/2）
server.max-connections = 1024
# 最大文件描述符数，默认 = 1024
server.max-fds = 2048
# 在服务器终止连接之前，保持活动会话中的最大请求数，默认 = 16
server.max-keep-alive-requests = 0
# 在空闲保持连接断开之前的最大秒数，默认值 = 5
server.max-keep-alive-idle = 1
# 在等待的非保持活动读取超时并关闭连接之前的最大秒数，默认值 = 60
server.max-read-idle = 15
# 在等待写入调用超时并关闭连接之前的最大秒数，默认 = 360
server.max-write-idle = 15
# 使用哪个事件处理程序，默认 = poll
server.event-handler = "linux-sysepoll"
# 如何处理网络写入，默认 = writev
server.network-backend = "linux-sendfile"
# 需要安装 FAM 或 Gamin，默认 = 简单
server.stat-cache-engine = "fam"
# 是否更新文件访问的atime设置，默认=禁用
server.use-noatime = "启用"
## 单客户端连接带宽限制（以千字节为单位）（0=无限制）
connection.kbytes-per-second = 0
## 以千字节为单位的全局服务器带宽限制（0=无限制）
server.kbytes-per-second = 0
#### 过期模块
expire.url = ("" => "访问加20天")

#### mod_evasive
evasive.max-conns-per-ip = 250

#### 限制请求方法“POST”的大小，以千字节 (KB) 为单位
server.max-request-size = 1024

#### 禁用多范围请求
server.range-requests = "禁用"

# 选择模块
server.modules = (
                                “mod_rewrite”，
# "mod_redirect",
# "mod_alias",
                                "mod_access",
# "mod_cml",
# "mod_trigger_b4_dl",
# "mod_auth",
# "mod_status",
                                “mod_setenv”，
                                “mod_fastcgi”，
# "mod_proxy",
# "mod_simple_vhost",
# "mod_evhost",
# "mod_userdir",
# "mod_cgi",
                                "mod_compress",
# "mod_ssi",
# "mod_usertrack",
                                "mod_expire",
# "mod_secdownload",
# "mod_rrdtool",
                                "mod_accesslog",
                “mod_evasive”               
 )

  fastcgi.server = (".php" =>
      (( "socket" => "/tmp/php-fastcgi.socket",
          "bin-path" => "/usr/bin/php-cgi",
          “最大过程” => 5，
      “空闲超时” => 20，
          “垃圾箱环境” => (
              "PHP_FCGI_CHILDREN" => "10",
              "PHP_FCGI_MAX_REQUESTS" => "5000"
          ),
          “损坏的脚本文件名”=>“启用”
      ))
  )

```

# facebook - 抓取 Facebook 生活事件

> ID：12400522
> 
> 赞同：1
> 
> 时间：2012-09-13T06:22:44.910
> 
> 标签：facebook, facebook-graph-api

我一直在寻找一种方法来从图形 API 中为朋友提取最近的生活事件，但我遇到了位置的阻止程序。

我知道您可以向朋友查询他们的位置。但是是否有可能找到以前的位置历史记录（或者只是一般的历史记录，如果有人在工作中得到晋升，所以他们改变了角色？）。

请原谅我从手机发帖时缺少代码。

我所拥有的位置是： ->api('/me/friends?fields=name,location);

这适用于当前位置。

任何提示都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T06:02:29.107

所以事实证明，最好的方法是对“流”表使用 FQL。从这里我们可以添加 WHERE 子句来完成我所追求的。最困难的部分是缺乏 Facebook 提供的特定领域的文档。“类型”。

[https://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/) https://developers.facebook.com/docs/reference/fql/stream/ 所需权限：“read_stream”

执行初始查询**“SELECT post_id, actor_id, target_id, message FROM stream WHERE filter_key in (SELECT filter_key FROM stream_filter WHERE uid=me() AND type='newsfeed') AND is_hidden = 0”**会为您提供一个广泛的更新列表新闻流。

因此，通过更改我的测试帐户上的一些内容，我能够找到与用户帐户上的活动更改相匹配的“类型”。

*   工作更新 - 305
*   教育更新 - 305

**工作和教育是分组的。**

*   关系状态 - 62
*   更改位置 - 282

所以说如果我们想要具体并寻找一个活动，我们可以将“类型”更改为等于上面提到的 id。

```
$query = "SELECT post_id, actor_id, target_id, message, created_time, description, description_tags, type, place FROM stream WHERE type = '62' filter_key in (SELECT filter_key FROM stream_filter WHERE uid=me())";
$response = $this->facebook->api('/fql?q=' . urlencode($query)); 
```

响应将如下所示：

```
'data' => array(
        (int) 0 => array(
            'post_id' => '100035395_38758242', //I've changed this post id to be random
            'actor_id' => (int) 4242, //I've changed this actor_id to be random
            'target_id' => null,
            'message' => '',
            'created_time' => (int) 1347601178,
            'description' => 'Joe Smith updated his work and education on his timeline.',
            'description_tags' => array(
                (int) 0 => array(
                    (int) 0 => array(
                        'id' => (int) 4242, //I've changed this id to be random
                        'name' => 'Joe Smith',
                        'offset' => (int) 0,
                        'length' => (int) 8,
                        'type' => 'user'
                    )
                )
            ),
            'type' => (int) 305, //<--- Note the type id
            'place' => null
        ),
); 
```

现在我们需要意识到教育和工作历史可以结合起来，其他类型也可以结合使用。我们可以从这里直接查询“post_id”以获取与其相关的更多信息。

```
$post = $this->facebook->api('/100035395_38758242'); 
```

对此的响应可能是这样的：

```
array(
    'id' => '100035395_38758242',
    'from' => array(
        'name' => 'Joe Smith',
        'id' => '4242'
    ),
    'story' => 'Joe Smith added Harvid University of America to his timeline.',
    'story_tags' => array(
        (int) 0 => array(
            (int) 0 => array(
                'id' => '4242',
                'name' => 'Joe Smith',
                'offset' => (int) 0,
                'length' => (int) 8,
                'type' => 'user'
            )
        )
    ),
    'actions' => array(
        (int) 0 => array(
            'name' => 'Comment',
            'link' => 'http://www.facebook.com/3535/posts/345345' //Changed
        ),
        (int) 1 => array(
            'name' => 'Like',
            'link' => 'http://www.facebook.com/345345/posts/34534' //Changed
        )
    ),
    'type' => 'link',
    'created_time' => '2012-09-14T05:39:38+0000',
    'updated_time' => '2012-09-14T05:39:38+0000',
    'comments' => array(
        'count' => (int) 0
    )
) 
```

另一种方法是直接查询用户 ID 并提取与“类型”相关的字段。即“工作”或“教育”。

```
$friend = $this->facebook->api('/242?fields=work,name,education,id'); 
```

注意：如果您需要 X 周或几个月前的数据，您应该在对 Facebook 的查询中使用“created_time”，否则您将被限制为：每次查询 30 天或 50 个帖子。

# c# - 在 EF 中，从 SavingChanges 事件调用 SaveChanges？

> ID：12400524
> 
> 赞同：0
> 
> 时间：2012-09-13T06:22:53.670
> 
> 标签：c#, entity-framework

我在 MVC 3 应用程序中使用 EF 4.1。

我的目标是将所有更改保存在另一个数据库中以用于记录目的。

我已经`SavingChanges`为`EntityContext`. 在那种情况下，我通过 提取更改`GetObjectStateEntries()`，效果很好。

然后，我有另一个`EntityContext`适用于不同模型和数据库的日志记录。我创建该上下文，创建日志记录实体，将它们添加到日志记录上下文。一切似乎都很好。然后，当我调用`SaveChanges()`日志记录上下文时，会发生异常，这表示我无法插入，因为 Id 为空（我确定它不是）。

有谁知道这是否不可能实现？我错过了一些重要的细节吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:44:51.883

情况是我在我的日志模型中使用了“模型优先”，而在所有其他模型中使用了“数据库优先”。这导致 EF 配置期望处理 Id (GUID) 本身的错误，但我试图自己提供一个。我从模型中删除了实体，而是从数据库中导入它们，这就解决了问题！

感谢@Eranga 让我朝着正确的方向前进。

# c# - 如何将必填字段验证器添加到选中的列表框？

> ID：12400525
> 
> 赞同：0
> 
> 时间：2012-09-13T06:23:03.660
> 
> 标签：c#, asp.net, .net

我在 div 标签内使用了一个选中的列表框，我想验证选中的列表框。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:29:27.233

您可以使用 javascript 来验证复选框列表。请找到以下代码以获得一个想法：

```
<script type = "text/javascript">
var minOccurance= 1
function Validate()
{
   var yourCheckboxList= document.getElementById("<%=CheckBoxList1.ClientID%>"); 
   var checkbox = yourCheckboxList.getElementsByTagName("input");
   var counter=0;
   for (var i=0;i<checkbox.length;i++)
   {
       if (checkbox[i].checked)
              counter++;
   }

   if(minOccurance>counter)
   {
       alert("Please select atleast " + minOccurance +  " item(s)");
       return false;
   }
   return true;
}
</script> 
```

希望这将您解决问题。

# animation - [three.js]blender 导出动画

> ID：12400527
> 
> 赞同：2
> 
> 时间：2012-09-13T06:23:06.573
> 
> 标签：animation, export, three.js, blender

# 我想做什么？

*   在搅拌机中创建带门的对象
*   为门创建动画“打开”和“关闭”（反转动画）
*   导出模型+动画
*   在three.js中加载模型+动画
*   只需使用他们的名字播放动画“打开”或“关闭”

# 我在哪里？

我创建了一个搅拌机项目，你可以在[这里找到](https://dl.dropbox.com/u/255893/testdoor.blend) 在该项目中，我设法创建了一个“打开”动作并通过 three.js 导出器导出它

# 我的问题是什么？

我试图创建第二个动作“关闭”，但我找不到导出两者的方法。

所以我的问题是，是否有可能将一个动作及其反向存储在 blender 和 exporter for three.js 中？我走错路了吗？有更好的解决方案吗？

[这](https://dl.dropbox.com/u/255893/testdoor.js)是导出的js文件。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T19:18:19.043

不幸的是，目前您似乎无法使用多个动画进行单个导出。请参阅[https://github.com/mrdoob/three.js/issues/2899](https://github.com/mrdoob/three.js/issues/2899)。

# java - 当日期时间存储为文本时，如何查找 sqlite db 的最后 / 7 / 30 天记录？

> ID：12400528
> 
> 赞同：0
> 
> 时间：2012-09-13T06:23:21.177
> 
> 标签：java, android, sqlite, datetime

我有一个活动，我将一些信息保存到我的数据库中。我有两个文本视图，一个用于日期（yyyy-MM-dd），一个用于时间（HH：mm）。如果我将日期时间保存为文本，我可以正确排序然后 desc，但是我可以通过 sqlite 查询找到最后/7/30 天的记录吗？此查询的示例何时是日期时间文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T06:30:08.613

首先，您应该计算要分析的日期范围，然后将其边界转换为文本格式（您可以使用一些日期格式实用程序）。然后，您应该使用转换后的日期作为参数查询 Db。

假设您想要最近 30 天的列表：

```
Calendar theEnd = Calendar.getInstance();
Calendar theStart = (Calendar) theEnd.clone();

theStart.add(Calendar.DAY_OF_MONTH, -30);

SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm");
String start = dateFormat.format(theStart.getTime());
String end = dateFormat.format(theEnd.getTime());

// Now you have date boundaries in TEXT format

Cursor cursor = db.rawQuery("SELECT * FROM table WHERE timestamp BETWEEN "+start+" AND "+end); 
```

# c# - AjaxControlToolkit 错误：AjaxControlToolkit 需要 ASP.NET Ajax 4.0 脚本。确保引用了正确版本的脚本

> ID：12400533
> 
> 赞同：1
> 
> 时间：2012-09-13T06:23:48.610
> 
> 标签：c#, asp.net-ajax, visual-studio-2012, asp.net-4.5

我正在使用 Visual Studio 2012 试用版。我创建了一个示例应用程序，并使用 NuGet 将 AjaxControlToolkit 引用添加到最新版本的工具包中。我已经在我的网页上的表单标签下使用 Toolscriptmanager。

平台详情：

*   .NET 框架 4.5
*   语言：c#
*   IIS 6.1
*   操作系统：Windows 7 64 位

下面是我的 aspx 页面的代码示例。

```
<form id="form1" runat="server">
    <ajaxToolkit:ToolkitScriptManager ID="sm" EnableCdn="true" runat="server"> </ajaxToolkit:ToolkitScriptManager>
    <asp:TextBox runat="server" ID="txtEmail" CssClass="stcInputText rounded-corners"></asp:TextBox>
    <ajaxToolkit:MaskedEditExtender TargetControlID="txtEmail" Mask="9,999,999.99" MessageValidatorTip="true" OnFocusCssClass="MaskedEditFocus" OnInvalidCssClass="MaskedEditError" MaskType="Number" InputDirection="RightToLeft" AcceptNegative="Left" DisplayMoney="Left" ErrorTooltipEnabled="True"/>
</form> 
```

网页配置配置

```
<system.web>
    <compilation debug="true" targetFramework="4.5" />
    <httpRuntime targetFramework="4.5" />
    <pages >
      <namespaces>
        <add namespace="System.Web.Optimization" />
      </namespaces>
      <controls >
        <add assembly="Microsoft.AspNet.Web.Optimization.WebForms" namespace="Microsoft.AspNet.Web.Optimization.WebForms" tagPrefix="webopt" />
        <add tagPrefix="ajaxToolkit" assembly="AjaxControlToolkit" namespace="AjaxControlToolkit" />
      </controls>
    </pages>
</system.web> 
```

我仍然得到：

> 错误：AjaxControlToolkit 需要 ASP.NET Ajax 4.0 脚本。确保引用了正确版本的脚本。如果您使用的是 ASP.NET ScriptManager，请切换到 AjaxControlToolkit.dll 中的 ToolkitScriptManager

请帮我解决这个问题。

根据建议，我已将 webconfig 和项目属性更改为 .NET 4.0。

我试图将所有项目更改为 4.0。它工作过一次，但现在我又遇到了同样的错误。现在网络配置看起来

```
 <compilation debug="true" targetFramework="4.0" >
     </compilation>
    <httpRuntime requestValidationMode="2.0" maxRequestLength="10000" />
    <pages controlRenderingCompatibilityVersion="4.0" clientIDMode="AutoID">
      <controls>
        <add tagPrefix="ajaxToolkit" assembly="AjaxControlToolkit" namespace="AjaxControlToolkit"/>
      </controls>
    </pages> 
```

项目属性目标`<TargetFrameworkVersion>v4.0</TargetFrameworkVersion>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:41:28.373

这是一个非常明显的错误，不是吗？AjaxControlToolkit 库仅适用于 .NET 4.0，不适用于 4.5（目前）。因此，您必须将项目中的目标框架更改为 4.0 而不是 4.5。那应该解决它。您可以在 Web.Config 或项目的属性中执行此操作（这是最安全的）。

当 AjaxControlToolkit 的 .NET 4.5 版本发布时，您可以下载并使用它，并将目标 Framework 更改回 4.5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T07:18:33.977

实际上，如果您将项目从 .net 4.5 转换为 4.0。它仍然引用了一些 4.5 的库。这就是为什么它不起作用。您需要在 4.0 框架中重新创建项目或删除现有库并从 4.0 框架中引用它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-27T23:59:02.090

如果您从 NUGET 添加 AJAX 并从此处添加 ajaxcontroltoolkit.dll，请删除下一行代码：http: [//ajaxcontroltoolkit.codeplex.com/releases/view/109918](http://ajaxcontroltoolkit.codeplex.com/releases/view/109918)

```
<add tagPrefix="ajaxToolkit" assembly="AjaxControlToolkit" namespace="AjaxControlToolkit"/> 
```

PD：AJAX 控制工具包 4.5 不适用于框架 4.5。并且来自 NUGET 的 AJAX 有问题

# asp.net - 在转发器中单击其他复选框后如何禁用第一个复选框

> ID：12400536
> 
> 赞同：0
> 
> 时间：2012-09-13T06:23:53.783
> 
> 标签：asp.net, checkbox, repeater

我有一个中继器，并且有一个复选框。当我单击checkedchanged 事件行中的第一个时，下面会出现信息。但是第一次点击后我遇到了麻烦。有时信息是相同的。因为 foreach 总是看到第一次点击。例如，我检查了第二个，我看到了信息。然后我再次单击第二个确定我看到了信息，但是这次我再次单击了第一个。Foreach 可以采用第一个复选框，最后一个复选框在回发之前仍然检查，它再次执行第二个操作。有没有什么办法解决这一问题？这是我的示例代码。

```
<asp:Repeater ID="rptInformations" runat="server">
     <ItemTemplate>
         <asp:CheckBox ID="ckChoose" runat="server" OnCheckedChanged="ckChoose_CheckedChanged" AutoPostBack="true" />
         <div id="foo" runat="server"> ... some basic titles ...</div>
     </ItemTemplate>
<asp:Repeater>
<div id="info" runat="server"> ... informations in here (textboxes, labels ..etc)</div>

CodeBehind:
foreach (RepeaterItem item in rptInformations.Items)
{
       //CheckBox ckChoose= (CheckBox)sender;
       CheckBox ckChoose= item.FindControl("ckChoose") as CheckBox;
       if (cBoxChoose.Checked)
       {
            ... database process ...
       }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:23:00.320

至于我的理解，您每次选中复选框时都试图触发一个事件，它将根据它所属的中继器的行显示某些信息，为此，我在名为 Repeater.aspx 的页面上制作了这个示例，使用一个只会为一个复选框而不是所有复选框触发的事件：

*中继器.aspx：*

```
<asp:Repeater runat="server" ID="repeater">
        <ItemTemplate>
         <asp:CheckBox ID="ckChoose" runat="server" AutoPostBack="true" OnCheckedChanged="ckChoose_CheckedChanged"/>
         <div id="foo" runat="server"> <%# Eval("Field2")%></div>
        </ItemTemplate>
        </asp:Repeater>
<div id="info" runat="server"> ... informations in here (textboxes, labels ..etc)</div> 
```

*Repeater.aspx.cs（代码隐藏）：*

```
partial class Repeater1 : System.Web.UI.Page
{

    private System.Collections.Generic.List<Item> Elements()
    {

        Generic.List<Item> itemList = new Generic.List<Item>();
        itemList.Add(new Item("1", "One"));
        itemList.Add(new Item("2", "Two"));

        return itemList;

    }

    protected void  Page_Load(object sender, System.EventArgs e)
    {

        if (!Page.IsPostBack) {
            this.repeater.DataSource = this.Elements();
            this.repeater.DataBind();

        }

    }

    protected void ckChoose_CheckedChanged(object sender, System.EventArgs e)
    {
        CheckBox chk = (CheckBox)sender;
        this.info.InnerHtml = "checkbox:" + chk.ID + " foo:" + ((HtmlGenericControl)chk.Parent.FindControl("foo")).InnerText;

    }

} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T12:52:13.777

我想我用命名容器修复它。它工作完美。

```
foreach (RepeaterItem item in Repeater1.Items)
        {
            CheckBox cBoxx = item.FindControl("ckChoose") as CheckBox;
            current_cbId = cBoxx.NamingContainer.UniqueID.ToString();

            if (cBoxx.Checked)
            {
                ... some operations ...

            }

            if (cBoxChoose.NamingContainer.UniqueID.ToString() != current_cbId)
                cBoxChoose.Checked = false;
        } 
```

# tidesdk - 如何从 TideSDK-1.2.1 包安装 TideSDK？

> ID：12400537
> 
> 赞同：2
> 
> 时间：2012-09-13T06:23:58.540
> 
> 标签：tidesdk

我已经从 titesdk.org 下载了包 TideSDK-1.2.1.RC1-0be9cd89-windows-7-x86-64.zip。安装程序在tidesdk\sdk\win32\1.2.0.RC4\installer 中找到。此安装程序不起作用：“安装失败。安装程序无法确定应用程序路径。”

它出什么问题了？它是安装 TideSDK 的唯一（正确）方法吗？在潮汐dk.org 上的资源和链接中没有找到有关主题的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:49:07.440

看起来您从开发的某个时间点从我们的持续集成系统中获得了一个人工制品。我们最终将公开一个 Nightly Build 站点以用于开发版本。也就是说，一旦 1.3.0 测试版准备就绪，我们就会这样做，这样我们就可以通过开发人工制品为您提供适当的支持。

在 TideSDK 1.3.0-beta 可用之前，请使用可以从潮汐dk.org 的首页下载的旧版 1.2.0.RC4（即将推出）。随着我们继续努力准备测试版，这将在短期内满足您的开发需求。

今天晚些时候将针对旧版 1.2.0.RC4 发布新的“入门指南”，因为有很多人要求提供此帮助。

我们感谢我们的项目得到了如此多的关注，并且作为一个团队一直在努力制作出色的文档。尽管如此，我们的工作一开始主要针对 API 文档。在获得新指南之前，我们的兴趣激增。对于遇到任何入门困难的新人，我们深表歉意。感谢您在我们填补这些空白时的耐心等待。

新文档是为 1.3.0 版本的发布而准备的，以便我们在时间到来时拥有出色的 API 文档、指南和示例应用程序。它的目标是 9 月底。我们希望届时也可以使用我们的 Tide Builder 应用程序，以提供一个很好的应用程序来帮助创建、运行和打包您的应用程序。还将有一个增强的潮汐构建器 CLI，因为带有 UI 的工具将是严格的选择。对于那些欣赏极简主义的人来说，这将让您只使用 SDK 和文本编辑器即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T14:53:26.513

您需要先下载[Titanium Studio](http://www.appcelerator.com/platform/titanium-sdk/)。

完成后，您可以安装软件包：Help menu > Install Sepcific Titanium SDK。

# jquery - 使用 jQuery 解析 json 文件

> ID：12400539
> 
> 赞同：0
> 
> 时间：2012-09-13T06:24:02.400
> 
> 标签：jquery, json

```
{

 "abc": [ 
        {

            "1":"a",
            "2":"b"

        } 
    ]

} 
```

我正在使用 jQuery 来解析和生成 HTML

```
$.getJSON('my.json', function(data) {
      var items = [];
      $.each(data.abc, function(key,val) {
        items.push('<li id="' + key + '">' + val + '</li>');
      });

      $('<ul/>', {
        'class': 'display',
        html: items.join('')
      }).appendTo('#abc');
    }); 
```

但它给了我不确定的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:36:24.600

您的解决方案非常简单，基本上删除方括号。

您正在尝试在哈希上运行 each，但您正在将该哈希包装在一个数组中。

在这里，查看我为测试它所做的[JS Fiddle并给你一个例子。](http://jsfiddle.net/prrgs/)

基本上你需要在你的 JSON 文件中有这个。

```
{
    "abc": {
        "1": "a",
        "2": "b"
    }
} 
```

# jquery - $.getScript 回调函数不起作用？

> ID：12400540
> 
> 赞同：0
> 
> 时间：2012-09-13T06:24:12.890
> 
> 标签：jquery

我试图实现[这个](http://911-need-code-help.blogspot.co.il/2010/01/retrieve-youtube-video-title.html)例子，但是使用 "$.getScript": 并且由于某种原因，它不会工作....

这是我的代码：

```
function youtubeFeedCallback(data) {
    var s = '';
    s += '<img src="' + data.entry.media$group.media$thumbnail[0].url + '" width="' + data.entry.media$group.media$thumbnail[0].width + '" height="' + data.entry.media$group.media$thumbnail[0].height + '" alt="' + data.entry.media$group.media$thumbnail[0].yt$name + '" align="right"/>';
    s += '<b>Title:</b> ' + data.entry.title.$t + '<br/>';
    s += '<b>Author:</b> ' + data.entry.author[0].name.$t + '<br/>';
    s += '<b>Published:</b> ' + new Date(data.entry.published.$t).toLocaleDateString() + '<br/>';
    s += '<b>Duration:</b> ' + Math.floor(data.entry.media$group.yt$duration.seconds / 60) + ':' + (data.entry.media$group.yt$duration.seconds % 60) + ' (' + data.entry.media$group.yt$duration.seconds + ' seconds)<br/>';
    if (data.entry.gd$rating) {
        s += '<b>Rating:</b> ' + data.entry.gd$rating.average.toFixed(1) + ' out of ' + data.entry.gd$rating.max + ' (' + data.entry.gd$rating.numRaters + ' ratings)<br/>';
    }
    s += '<b>Statistics:</b> ' + data.entry.yt$statistics.favoriteCount + ' favorite(s); ' + data.entry.yt$statistics.viewCount + ' view(s)<br/>';
    s += '<br/>' + data.entry.media$group.media$description.$t.replace(/\n/g, '<br/>') + '<br/>';
    s += '<br/><a href="' + data.entry.media$group.media$player.url + '" target="_blank">Watch on YouTube</a>';
    document.write(s);
}

$(document).ready(function () {
    $.getScript('http://gdata.youtube.com/feeds/api/videos/gzDS-Kfd5XQ?v=2&alt=json-in-script&callback=youtubeFeedCallback', function () {
        alert(1); //This function is placed in jsPlugin.js

    });

}); 
```

警报运行良好，我收到警报，在 FireBug 上我确实看到了 GET 方法，但它不会执行“回调”功能。我没有看到它粘贴在我的网站上...

任何想法为什么？！`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T06:29:06.060

这是jsonp。

尝试：

```
$.getJSON('http://gdata.youtube.com/feeds/api/videos/gzDS-Kfd5XQ?v=2&alt=json-in-script&callback=?', youtubeFeedCallback); 
```

***[工作演示。](http://jsfiddle.net/d48LC/)***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T06:27:14.720

使用`.getJSON()`. 有关更多信息，请参阅[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)并查找 JSONP。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-15T04:29:37.837

如果获取的 JavaScript 中有错误，它将无法正确回调。

注意在文档（[https://api.jquery.com/jQuery.getScript/](https://api.jquery.com/jQuery.getScript/)）中，第二个参数回调函数称为“成功”

> 从 jQuery 1.5 开始，您可以使用 .fail() 来解决错误：

```
$.getScript("path/to/script.js", function() {
    console.log("Script loaded and no errors");
}).fail(function( jqxhr, settings, exception ) {
    console.log("Script loaded but error occurred:");
    console.log(exception);
}); 
```

# java - 父展开时列出树中的子节点

> ID：12400541
> 
> 赞同：0
> 
> 时间：2012-09-13T06:24:13.427
> 
> 标签：java, mysql, tree, treeview

我在实现 OID 的树形结构时遇到了问题。当我单击父项时，我只需要显示子项详细信息，而不是子项的子项。即，我不需要显示包含“。”的 OID。（点）。

例如，如果我的 OID 结构是 private.MIB.sample.first private.MIB.sample.second 等等。

当我点击 MIB 时，它应该只显示“样本”而不是第一个和第二个。

第一个和第二个将在我单击示例时显示。我怎样才能在java中实现这个。我的数据库是 MySQL。我尝试过的代码如下

```
 FilteredRowSet rs = new FilteredRowSetImpl();

        // for Other Types Like OBJECT-TYPE, Object_IDENTIFIER
        rs = new FilteredRowSetImpl();
        rs.setCommand("Select * from MIBNODEDETAILS where " + "mn_OID like '" + OID
                + ".%' order by mn_NodeType, mn_OID");
        rs.setUrl(Constants.DB_CONNECTION_URL);
        rs.setFilter(new MibRowFilter(1, expString));
        rs.execute();

        rs.absolute(1);
        rs.beforeFirst(); 
```

我想更改是在 setCommand 参数中进行的。

我怎样才能做到这一点？

mobnodedetails 表的结构

```
+--------------------+-------------------+-------------+
| mn_OID             | mn_name           | mn_nodetype |
+--------------------+-------------------+-------------+
| 1                  | iso               |           0 |
| 1.3                | org               |           1 |
| 1.3.6              | dod               |           1 |
| 1.3.6.1            | internet          |           1 |
| 1.3.6.1.1          | directory         |           1 |
| 1.3.6.1.2          | mgmt              |           1 |
| 1.3.6.1.2.1        | mib-2             |           0 |
| 1.3.6.1.2.1.1      | system            |           1 |
| 1.3.6.1.2.1.10     | transmission      |           1 | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T04:26:58.140

下面给出的函数根据需要显示树。

```
public void populateMibValues()
{

    final DefaultTreeModel model = (DefaultTreeModel) this.m_mibTree.getModel();
    model.setRoot(null);

    this.rootNode.removeAllChildren();
    final String query_MibNodeDetailsSelect = "Select * from MIBNODEDETAILS where LENGTH(mn_oid)<=9 "
            + " and mn_OID<='1.3.6.1.4.1' order by mn_OID"; // only

    this.innerNodeNames.clear();
    this.innerNodes.clear();
    this.innerNodesOid = null;

    try {
        final ResultSet deviceRS = Application.getDBHandler().executeQuery(query_MibNodeDetailsSelect, null);// inner
        // nodes

        while (deviceRS.next()) {
            final mibNode mb = new mibNode(deviceRS.getString("mn_OID").toString(), deviceRS.getString("mn_name")
                    .toString());
            mb.m_Type = Integer.parseInt(deviceRS.getString("mn_nodetype").toString());
            createMibTree(mb);
        }
    }
    catch (final Exception e) {
        Application.showErrorInConsole(e);
        NmsLogger.writeErrorLog("ERROR creating MIB tree failed", e.toString());
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T05:00:19.097

你可以使用类似的东西

```
 SELECT *
    FROM mibnodedetails
   WHERE mn_oid LIKE "+mn_OID+"%
    AND LENGTH ("+mn_OID+") + 2 = LENGTH (mn_oid)
ORDER BY mn_nodetype, mn_oid 
```

因此，如果您将 mm_OID 传递为`1.3.6.1 (|1.3.6.1 |internet |1 |)`

您将得到以下结果：

```
| 1.3.6.1.1          | directory         |           1 |
| 1.3.6.1.2          | mgmt              |           1 | 
```

**[工作演示](http://www.sqlfiddle.com/#!2/8780d/2)**

**PS：**这不适用于 9 岁以上的孩子，因为我们使用的是 length + 2

# ios6 - 在 iOS 6 中手动更改方向

> ID：12400547
> 
> 赞同：0
> 
> 时间：2012-09-13T06:24:43.063
> 
> 标签：ios6

我在 iOS 5 中手动更改方向，一切正常。但在 iOS 6 中，键盘没有更改方向。UIApplication statusBarOrientation 不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T05:47:17.633

尝试这个：

```
- (UIInterfaceOrientationMask)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskLandscape;
} 
```

而不是这个：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return UIInterfaceOrientationIsLandscape(interfaceOrientation);
} 
```

**更新：**

在 iOS 7 SDK 和 Xcode 5 中：

```
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskLandscape;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:31:28.667

该方法`statusBarOrientation`仅在`supportedInterfaceOrientations`回调返回 0 时有效。为了使您之前的代码有效，您可以在调用`statusBarOrientation`方法之前将标志设置为 true。`statusBarOrientation`一旦被调用，这个标志就可以被重置。

`supportedInterfaceOrientations`当您发现此标志为真时，您可以返回 0 。

# php - 将表字段值回显到 PHP 中的下拉列表

> ID：12400549
> 
> 赞同：0
> 
> 时间：2012-09-13T06:24:49.873
> 
> 标签：php, database, drop-down-menu, echo, field

我已经咨询堆栈溢出很长一段时间了。我正在开发一个文章管理系统，但遇到了问题。

如何将字段值回显到`select`数据库表中的下拉列表？

我已经设法用这个来回应它：

```
$result = mysql_query("SELECT catName FROM tblCat");
while($row = mysql_fetch_array($result)){
    echo "$row['catName']";
    echo "`<br />`";
} 
```

但是当我将代码编辑为：

```
$result = mysql_query("SELECT catName FROM tblCat");
while($row = mysql_fetch_array($result)){
    echo "`<select>`";
    echo "`<option value='{$row['catName']}'>`";
    echo "`</select>`";
} 
```

我没有结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:26:41.707

```
echo "<select>";

$result = mysql_query("SELECT catName FROM tblCat");
while($row = mysql_fetch_array($result))
    echo "<option value='{$row['catName']}'>{$row['catName']}</option>";

echo "</select>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T06:27:19.977

你需要输出两次，你只是设置值，你也需要标签：

```
 echo "<option value='{$row['catName']}'>{$row['catName']}</option>"; 
```

# c - 参考 fgets 如何将 \0 合并到普通文本文件中

> ID：12400552
> 
> 赞同：1
> 
> 时间：2012-09-13T06:24:59.620
> 
> 标签：c, io, c99, fgets, c89

我只是想知道，当您仅使用诸如 textedit （在 OSX 上）之类的普通应用程序输入文本时，它是否仍会在每个字符串的末尾包含相同的 '\0' 字符，以便在通读时`fgets()`if 会选择所述字符并停止阅读？

因为我创建了一个普通的文本文件，但`fgets()`在指定长度的末尾继续停止，而不是在它找到该字符时停止，所以当我写入普通文本文件时，我怀疑它是否真的存在。

例如：

```
How Are You
There 
```

fgets(str, 15, 标准输入); 这最终会产生：TherAre You

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T06:28:25.273

不，通常，文本文件不包含`\0`字符。 `fgets`读取请求的字符数，或到行尾，以先到者为准。它`fgets`本身附加了`\0`. 从[手册页](http://linux.die.net/man/3/fgets)：

> **`fgets()`**从流中最多读取一个小于*size的字符并将它们存储到**s*指向的缓冲区中。`EOF`在一个或一个换行符之后停止阅读。如果读取了换行符，则将其存储到缓冲区中。终止的空字节 ( `'\0'`) 存储在缓冲区中的最后一个字符之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T06:29:07.167

不，文本文件通常不包含任何控制字符。终止符是 C 的“特性”，即 C 语言和环境如何处理字符串的属性。文本文件与 C 无关。终止由函数添加（到已读取数据的内存缓冲区）`fgets()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T06:38:20.503

如果您的输入文件确实包含一个空字节并且您正在使用`fgets()`或等效读取，那么您很难知道字符串中间的空值是否只是“文本”文件中的空值，或者表示文件的最后一行没有以换行符结尾，或者该行被截断。显然，如果您尝试再次读取并获取更多数据，这并不是一个过早的 EOF。如果紧接在空字节之前的字符是换行符，那么您可以假设空字节是由 . 添加的字符串标记的结尾`fgets()`。

因此，一般来说，如果文件包含空字节，则使用它`fgets()`来读取文件不是一个好主意。

# ruby-on-rails - Rspec should_receive 对不正常的实例

> ID：12400555
> 
> 赞同：1
> 
> 时间：2012-09-13T06:25:32.163
> 
> 标签：ruby-on-rails, ruby, testing, rspec

我有一个类方法，它只遍历一些记录并在每条记录上执行一个实例方法。我正在尝试为类方法编写一个简单的测试，以确保它将实例方法发送到每条记录。

```
it "fires any pending alarms" do
  pending       = create :alarm, :pending
  other_pending = create :alarm, :pending

  # sanity check
  Alarm.pending.sort.should eq [pending, other_pending].sort

  pending.should_receive(:fire)
  other_pending.should_receive(:fire)

  Alarm.fire_pending
end 
```

**警报.rb**

```
class Alarm < ActiveRecord::Base
  scope :pending, where(pending: true)

  def self.fire_pending
    self.pending.each do |alarm|
      alarm.fire
    end
  end
end 
```

但是我收到了两个`should_receive`期望的错误：

```
 Failure/Error: pending.should_receive(:fire)
   (#<Alarm:0x007fcc96334310>).fire(any args)
       expected: 1 time
       received: 0 times 
```

我之前成功地使用过这个期望。恐怕我遗漏了一些明显的东西。

**编辑**

我现在已经解决了这个问题：

```
it "fires any pending alarms" do
  pending       = create :alarm, :pending
  other_pending = create :alarm, :pending

  pending_alarms = Alarm.pending
  pending_alarms.sort.should eq [pending, other_pending].sort

  Alarm.stub(:pending) { pending_alarms }
  pending_alarms.first.should_receive(:fire)
  pending_alarms.last.should_receive(:fire)

  Alarm.fire_pending
end 
```

但我真的不喜欢那样，想知道为什么我的第一次尝试不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T11:22:14.367

返回的对象`Alarm.pending`与示例中创建的实例不同。您可以通过更改看到这一点：

```
pending_alarms.sort.should eq [pending, other_pending].sort 
```

到：

```
# the eq matcher uses == (object equivalence)
# the equal matcher uses equals? (object identity)
pending_alarms.sort.tap do |sorted|
  sorted[0].should eq pending       # passes
  sorted[1].should eq other_pending # passes
  sorted[0].should equal pending       # fails
  sorted[1].should equal other_pending # fails
end 
```

这是使用 (the evil) 的好例子`any_instance`：

```
it "fires any pending alarms" do
  pending = create :alarm, :pending
  Pending.any_instance.should_receive(:fire)
  Alarm.fire_pending
end 
```

# ios - 从 UITableViewController 创建时何时释放 UINavigationController？

> ID：12400558
> 
> 赞同：1
> 
> 时间：2012-09-13T06:25:33.563
> 
> 标签：ios

我有一个相当不寻常的情况，我不太了解内存管理。

我有一个 UITableViewController 用于显示消息，然后创建一个 UINavigationController 并将其视图添加为当前视图的子视图以显示它。我遇到的问题是 Xcode 报告我有潜在的内存泄漏（我同意），因为没有释放 UINavigationController，但是当我按照下面的代码释放它时，当我单击返回返回到表视图。

我在 UITableViewController 中使用了一个保留属性来跟踪当前的 UINavigationController 并管理保留计数，但显然我在这里遗漏了一些东西。

注意：当单击返回按钮并显示消息时发生崩溃 -[UILayoutContainerView removeFromSuperview:]: unrecognized selector sent to instance 0x5537db0

另请注意，如果我删除 [nc release] 代码行，它就可以正常工作。

这是我的代码：

```
@property(nonatomic, retain) UINavigationController *currentNavigationController;

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UINavigationController *nc = [[UINavigationController alloc] init];

    CGRect ncFrame = CGRectMake(0.0, 0.0, [[self view] frame].size.width, [[self view] frame].size.height);
    [[nc view] setFrame:ncFrame];

    // I created a CurrentNavigationController property to 
    // manage the retain counts for me
    [self setCurrentNavigationController:nc]; 

    [[self view] addSubview:[nc view]];
    [nc pushViewController:messageDetailViewController animated:YES];

    UIBarButtonItem *bbi = [[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonSystemItemRewind target:[nc view] action:@selector(removeFromSuperview:)];

    nc.navigationBar.topItem.leftBarButtonItem = bbi;
    [bbi release];

    [nc release];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:37:05.997

您创建的 UINavigationController "nc" 只能在此方法中使用。在此方法之后它不会存储在任何地方（因为您释放它）。因此，您将navigationController 的视图作为子视图添加到您的类视图中，然后删除navigationController。那是错误的。当视图和视图控制器尝试引用它们的导航控制器时（当它不存在时），您的应用程序将崩溃。

这是 didSelectRowForIndexPath 方法的代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{

    UINavigationController *nc = [[UINavigationController alloc] init];

    CGRect ncFrame = CGRectMake(0.0, 0.0, [[self view] frame].size.width, [[self view] frame].size.height);
    [[nc view] setFrame:ncFrame];

    [self setCurrentNavigationController:nc]; 
    [nc release];

    [[self view] addSubview:[self.currentNavigationController view]];

    UIViewController *viewCont = [[UIViewController alloc] init];
    [viewCont.view setBackgroundColor:[UIColor greenColor]];

    [nc pushViewController:viewCont animated:YES];

    NSLog(@"CLASS %@",[[self.currentNavigationController view]class]);

    UIBarButtonItem *bbi = [[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonSystemItemRewind target:[self.currentNavigationController view] action:@selector(removeFromSuperview)];

    self.currentNavigationController.navigationBar.topItem.leftBarButtonItem = bbi;
    [bbi release];
} 
```

removeFromSuperview 方法的选择器最后不应该有“：”。它没有参数:)

# java - XADES4J - 如何改变其他身份

> ID：12400560
> 
> 赞同：1
> 
> 时间：2012-09-13T06:25:44.717
> 
> 标签：java, xades4j

当我使用 Xades4J (Xades-BES) 签署 XML 文档时，我得到了包括我的 xml 在内的签名文档，例如：

`<ds:Object Encoding="UTF-8" Id="xmldsig-1ddcf1ab-7648-4039-b166-69e14da39982-object0" MimeType="text/xml"> .... </ds:Object>`

我必须`Id="xmldsig-1ddcf1ab-7648-4039-b166-69e14da39982-object0"`改为`Id="Dokument-0"`

我怎样才能做到这一点 ？

感谢您的所有回答，并为我糟糕的英语感到抱歉。达雷克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:04:35.477

目前无法更改签名数据对象 ID 的生成方式，主要是因为 lib 确保使用唯一 ID，即使文档包含多个签名也是如此。

# jquery - 兄弟悬停不透明度

> ID：12400561
> 
> 赞同：0
> 
> 时间：2012-09-13T06:25:50.013
> 
> 标签：jquery, jquery-selectors

根据[这里的这个问题](https://stackoverflow.com/questions/12306302/have-two-elements-appear-when-their-container-is-hovered-and-then-have-one-disa)，我试图让一组两个中的一个导航元素在另一个悬停时消失。因为一个必须在另一个之前，这显然是目前 CSS 不可能的，所以它需要用 jQuery 来完成。

我的页面顶部（在脚本元素内）有以下 jQuery 行，但它似乎不起作用：

```
$(document).ready(function(){
  $('.sb-bignav:hover').siblings().css({
    'opacity': '0',
    '-webkit-opacity': '0',
    '-moz-opacity': '0'
  });
}); 
```

我认为语法本身是正确的，所以我认为我只是没有做对......有人能指出什么问题吗？

谢谢！

编辑：根据要求，这是 HTML：

```
<div id="sb-body">
  <a id="sb-nav-previous" class="sb-bignav" title="Previous" onclick="Shadowbox.previous()"></a>
  <a id="sb-nav-next" class="sb-bignav" title="Next" onclick="Shadowbox.next()"></a>
  <div id="sb-body-inner">
    <img style="position: absolute;" src="Corrosion.jpg" id="sb-player" height="405" width="609">
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T06:43:04.640

您的脚本可以正常工作：

[jsFiddle1](http://jsfiddle.net/vm2ZP/2/)

但我认为您希望您的程序可以作为：

[jsFiddle2](http://jsfiddle.net/vm2ZP/3/)

还：

[.on() 文档](http://api.jquery.com/on/)

和

[.siblings() 文档](http://api.jquery.com/siblings/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T06:46:09.740

我不确定我们可以使用伪类：悬停作为选择器......但我想你需要这样的东西

```
 $('.sb-bignav').hover(function() {
        $(this).siblings().css({
            'opacity': '0',
            '-webkit-opacity': '0',
            '-moz-opacity': '0'
        });
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T06:49:18.313

据我了解您的问题，这是您可以对脚本执行的操作：

```
$(document).ready(function(){
    $('.sb-bignav').each(function(){
        $(this).hover(function(){
            $(this).siblings().css('color', 'red');
            $(this).css('color', 'black');
        });
    });
}); 
```

只需将颜色：红色更改为不透明度/不显示。color:black 用于悬停的元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T06:54:35.760

@NaOH，您的问题非常基本（没有双关语）。您可以使用[jQuery`.hover()`](http://api.jquery.com/hover/)方法来完成此操作。您可以为此替换任何 css 效果，但我认为这是您要达到的效果：

```
$(document).ready(function() {
    $('.sb-bignav').hover(function() {
        $(this).siblings('.sb-bignav').css('visibility','hidden');
    }, function() {
        $(this).siblings('.sb-bignav').css('visibility','visible');
    });
}); 
```

[**演示**](http://jsfiddle.net/mDxE8/)

# sql-server-2008 - Intellisense 不适用于 SSMS

> ID：12400562
> 
> 赞同：0
> 
> 时间：2012-09-13T06:25:51.093
> 
> 标签：sql-server-2008, sql-server-2008-r2

嗨，我正在使用 SQL SERVER 2008 R2 Management Studio，我的智能感知不工作，当我右键单击时启用它，但现在仍然无法使用任何人都可以了解发生的情况以及为什么我无法使用它。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:15:09.093

可能有一些缺少dll文件的问题。尝试更新您的 sql server 并重新启动您的机器。如果仍然存在这样的问题，则必须重新安装它。那将是最后的选择

# iphone - 如何从 iPhone 的 sqlite 数据库中加载选取器视图值

> ID：12400563
> 
> 赞同：1
> 
> 时间：2012-09-13T06:25:55.073
> 
> 标签：iphone, picker

我只是 iPhone 编程的初学者。

我在一个视图中添加了 3 个 uipickers。

1.  员工的第一拣货员。
2.  第二个选择器用于产品。
3.  客户的第三个拣货员。

我在 sqlite 中为上面创建了 3 个表。而且我必须将值加载到表中的选择器中。

我必须在 XiB 文件中保留 3 个选择器吗？

我希望在单击表格单元格时显示选择器。（我显然有一个表格视图......我将从选择器中选择所需的值）

暂时我已经静态添加了数组。但我想从 sqlite 数据库中加载它。

如何连接？

如何显示值？

我该怎么办？

你能帮我么。

我已经干预了4天了。有人可以帮忙吗....

卡西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:09:08.757

1.  数据库读取完成后使用代码创建 3 UiPickerView
2.  根据数据库设置值
3.  为每个 UIPicker 设置单独的标签 (1,2,3)。然后你可以在任何地方再次获得它。
4.  设置 UiPickerView 代表。

    使用**[yourPicker selectRow:10 inComponent:0 animated:YES];** 设置选择器选择的值

**添加 UIPicker 的示例代码**

```
-(void)displayPicker{   

    @try {

        UIToolbar *pickerToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 200, 44)];
        pickerToolbar.barStyle = UIBarStyleBlackOpaque;
        [pickerToolbar sizeToFit];

        NSMutableArray *barItems = [[NSMutableArray alloc] init];       

        UIBarButtonItem *cancelBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCancel target:self action:@selector(pickerCancel:)];
        cancelBtn.tag = 1;
        [barItems addObject:cancelBtn];
        [cancelBtn release];
        cancelBtn = nil;

        /*  Uncomment this line to add label to Timer/Counter. 

        NSString *popUpTitleText = [self getPopUpTitleText:@"My Text"];         
        UIBarButtonItem *titleBtn = [[UIBarButtonItem alloc] initWithTitle:popUpTitleText style:UIBarButtonItemStylePlain target:nil action:nil];
        [barItems addObject:titleBtn];
        [titleBtn release];
        titleBtn = nil;

         */

        UIBarButtonItem *flexItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFixedSpace  target:nil  action:nil];
        flexItem.width = 64;                                     
        [barItems addObject:flexItem];
        [flexItem release];
        flexItem = nil;

        UIBarButtonItem *doneBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(pickerDone:)];
        doneBtn.tag = 1;
        [barItems addObject:doneBtn];       
        [doneBtn release];
        doneBtn = nil;

        [pickerToolbar setItems:barItems animated:YES];     
        [barItems release];
        barItems = nil;

        CGRect pickerFrame = CGRectMake(0, 40, 0, 216);     
        UIPickerView *pickerView = [[UIPickerView alloc] initWithFrame:pickerFrame];
        pickerView.showsSelectionIndicator = YES;
        pickerView.tag = 1;
        pickerView.dataSource = self;
        pickerView.delegate = self;     
        CGRect pickerRect = pickerView.bounds;
        pickerView.bounds = pickerRect;

        UIViewController* popoverContent = [[UIViewController alloc] init];
        UIView* popoverView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 200, 344)];
        popoverView.backgroundColor = [UIColor whiteColor];     
        pickerView.frame = CGRectMake(0, 44, 200, 216);

        [pickerView selectRow:1 inComponent:0 animated:YES]; //set your selected (Database) value here.

        [popoverView addSubview:pickerToolbar];
        [popoverView addSubview:pickerView];
        popoverContent.view = popoverView;

        //resize the popover view shown
        //in the current view to the view's size
        popoverContent.contentSizeForViewInPopover = CGSizeMake(200, 244);

        //create a popover controller       
        popoverController.delegate = nil;   
        if (popoverController.popoverVisible == YES) {

            [popoverController dismissPopoverAnimated:YES];
        }
        [popoverController release];
        popoverController = nil;
        popoverController = [[UIPopoverController alloc] initWithContentViewController:popoverContent];
        CGRect popoverRect = [self.view convertRect:yourFrame(CGrect) 
                                           fromView:[yourView superview]];
        popoverRect.origin.y = popoverRect.origin.y + 15;
        popoverController.delegate = self;
        popoverRect.size.width = MIN(popoverRect.size.width, 100) ;     

        popoverRect.origin.x = float yourXvalue;    

        [popoverController  presentPopoverFromRect:popoverRect inView:self.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];

        //release the popover content
        [popoverView release];
        [popoverContent release];
        [pickerToolbar release];
        [pickerView release];

        popoverView = nil;
        popoverContent = nil;
        pickerToolbar = nil;
        pickerView = nil;   
    }
    @catch (NSException * ex) {

        NSLog(@"Exception in YourClass Method: displayPicker() Name:%@ Reason:%@",[ex name],[ex reason]);
    }
} 
```

# sql - SQL Left Join中“on .. and”和“on .. where”之间的区别？

> ID：12400567
> 
> 赞同：27
> 
> 时间：2012-09-13T06:26:14.070
> 
> 标签：sql, join, syntax, where

sql语句。

```
1.select a.* from A a left join B b on a.id =b.id and a.id=2;

2.select a.* from A a left join B b on a.id =b.id where a.id=2; 
```

这两条sql语句有什么区别？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-13T07:05:00.227

```
create table A(id int);
create table B(id int);

INSERT INTO A VALUES(1);
INSERT INTO A VALUES(2);
INSERT INTO A VALUES(3);

INSERT INTO B VALUES(1);
INSERT INTO B VALUES(2);
INSERT INTO B VALUES(3);

SELECT * FROM A;
SELECT * FROM B;

id
-----------
1
2
3

id
-----------
1
2
3 
```

过滤 JOIN 以防止在 JOIN 过程中添加行。

```
select a.*,b.*
from   A a left join B b 
on     a.id =b.id and a.id=2;

id          id
----------- -----------
1           NULL
2           2
3           NULL 
```

WHERE 将在 JOIN 发生后过滤。

```
select a.*,b.* 
from   A a left join B b 
on     a.id =b.id 
where  a.id=2;

id          id
----------- -----------
2           2 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-13T06:33:43.880

```
select a.* from A a left join B b on a.id =b.id and a.id=2; 
```

这仅`a.id`在连接条件中使用，因此`a.id <> 2`不会被过滤掉的记录。你可能会得到这样的结果：

```
+------+------+
| a.id | b.id |
+------+------+
| 1 | 空 |
| 2 | 2 |
| 3 | 空 |
+------+------+

```

您不选择任何`b`' 列，但如果您这样做，它会更容易理解。

```
select a.* from A a left join B b on a.id =b.id where a.id=2; 
```

现在记录`a.id <> 2`被过滤掉的地方。

```
+------+------+
| a.id | b.id |
+------+------+
| 2 | 2 |
+------+------+

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T07:12:55.450

正如[@hvd](https://stackoverflow.com/users/743382/hvd)所说，“where”子句过滤连接返回的行，因此“where”版本不会返回外部连接的行（具有 a.id = null）。

然而，还有另一个显着的区别：即使外部连接的行没有被过滤掉，将条件放入“on”子句也可以大大提高性能，因为结果集更早地变小了。

当一系列其他左联接表跟随具有“and”条件的表时，这一点尤其明显 - 您甚至可以防止联接发生在以下表中以获取不合适的行，并可能切断数百万行到达过滤器（“where “） 阶段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T01:14:28.270

我尝试了一段时间，我知道是什么原因，它只与优先级有关。

```
select * from A a left join B b on a.id=b.id and b.id=2 
```

这意味着 A 左连接（其中 b.id=2）这是条件过滤器 B 首先

```
Select *　from A a left join B b on a.id=b.id where a.id=2 
```

这意味着在加入 B 之后，然后按 a.id=2 过滤

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T01:27:19.270

如果您考虑 SQL 查询的语法，“AND”扩展了连接块（就像括号一样），其中“WHERE”定义了查询的 WHERE/过滤块的开始。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-11-26T05:07:17.243

正如@mr_eclair 明确解释的那样

在这两种情况下会发生什么。让我告诉你一个简单的方法来记住这一点。

```
select a.*,b.*
from   A a left join B b 
**on**     a.id =b.id ***and*** a.id=2; 
```

这里“AND”作用于“ON”，它为加入标准提供了条件。

```
select a.*,b.* 
from   A a left join B b 
on     a.id =b.id 
**where**  a.id=2; 
```

而这里的“WHERE”为所有结果提供了条件。

说得更清楚一点，“WHERE”是从“ **SELECT** ”语句中找到结果后过滤掉结果集。“AND”是连接两个表的条​​件。

# mysql - SQL WHERE 子句中的 CASE 语句

> ID：12400574
> 
> 赞同：5
> 
> 时间：2012-09-13T06:26:44.090
> 
> 标签：mysql, case

我正在尝试从`CASE`在子句中使用条件的表中获取数据`WHERE`，目前我正在使用以下查询：-

```
SELECT count(enq_id) AS total, sum(purchase_amount) AS purchase
FROM temp_stock
WHERE purchase_date <> '0000-00-00'
AND purchase_date < '2012-08-01'
AND (

STATUS = 'Sold'
OR STATUS = 'In Stock'
OR STATUS = 'Ref'
)
AND CASE WHEN (

STATUS = 'Sold'
)
THEN delivery_date >= '2012-08-01'
END 
```

但它返回`0`for`total`和`NULL`for `purchase`。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-13T07:09:38.013

从[你的评论](https://stackoverflow.com/questions/12400574/cae-statement-in-sql-where-clause#comment16663862_12400635)。

> 我想使用案例陈述，你能澄清一下 where 子句中的案例陈述吗

您可以像这样使用`CASE`语句`WHERE`：

```
SELECT count(enq_id) AS total, sum(purchase_amount) AS purchase
FROM temp_stock
WHERE purchase_date <> '0000-00-00'
AND purchase_date < '2012-08-01'
AND (    STATUS = 'Sold'
      OR STATUS = 'In Stock'
      OR STATUS = 'Ref')
AND CASE STATUS 
         WHEN 'Sold' 
         THEN delivery_date >= '2012-08-01'
         ELSE 1=1
    END 
```

在这里你需要使用`ELSE 1=1`. 否则你不会得到想要的结果。有关更多说明，请参阅[此 SQLFiddle](http://sqlfiddle.com/#!2/ff99b/36)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T06:30:04.433

我不认为 CASE 可以那样工作。你想要的是一个稍微复杂一点的表达式作为你的 WHERE 子句。大概是这样的：

```
SELECT count(enq_id) AS total, sum(purchase_amount) AS purchase
FROM temp_stock
WHERE purchase_date <> '0000-00-00'
  AND purchase_date < '2012-08-01'
  AND (
     (STATUS = 'Sold' AND delivery_date >= '2012-08-01')
   OR STATUS = 'In Stock'
   OR STATUS = 'Ref'
 ) 
```

# c# - 对 sqlserver ce 4 的实体框架事务范围支持

> ID：12400576
> 
> 赞同：0
> 
> 时间：2012-09-13T06:26:53.443
> 
> 标签：c#, entity-framework-4

SQLSERVER CE 4 是否支持事务范围？

在这个例子中，我使用的是`transactionscopeoption.suppress`，所以它不做交易。

`createm`并且`createb`是一个 CRUD 插入新记录。

下面是我的代码：

```
// save merchant account & bank information into database
using (var transaction = new transactionscope(transactionscopeoption.suppress))
{
    try
    {
        viewmodel.merchantdata.createm(m);
        viewmodel.bankdata.createb(b);
        transaction.complete();
    }
    catch (exception ex)
    {
        // fail to save into database
        transaction.dispose();
    }
} 
```

# ejb - 从 JBoss 4.X 迁移到 7.1 问题

> ID：12400577
> 
> 赞同：0
> 
> 时间：2012-09-13T06:26:54.323
> 
> 标签：ejb, jndi, jboss7.x

我正在将应用程序从 JBOSS 4.X 迁移到 JBoss 7.1。我正面临这里提到的一个问题

```
myApp.ear
     + ---- lib
     |       |------- common.jar
     |
    +----- META-INF
    |       +-- jboss-deployment-structure.xml and  other config files
    |       
    |
    | ---- xxxEJB.jar
    + ---- xxxWebApp.war

jboss-deployment-structure.xml in ear/meta-inf is as follows
<jboss-deployment-structure> 
<ear-subdeployments-isolated>false</ear-subdeployments-isolated>
<deployment>
    <dependencies>
        <module name="javaee.api" export="true"/>//module.xml
        <module name="sun.jdk" export="true"/>
        <module name="com.lib" export="true"/>
        <module name="deployment.myapp.ear.xxxejb.jar"/>
    </dependencies>
</deployment>   
<sub-deployment name="xxxwebapp.war">
    <resources>
         <resource-root path="common.jar" >
         </resource-root>
    </resources>
</sub-deployment>

</jboss-deployment-structure> 
```

尝试调用应用程序时出现以下异常

```
08:05:06,546 ERROR [stderr] (http--127.0.0.1-8080-1) javax.naming.NameNotFoundException: com.xxx.session.UserMgrHome -- service jboss.naming.context.java."com.xxx.session.UserMgrHome"

08:05:06,546 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.jboss.as.naming.ServiceBasedNamingStore.lookup(ServiceBasedNamingStore.java:97)

08:05:06,546 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.jboss.as.naming.NamingContext.lookup(NamingContext.java:178)

08:05:06,546 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.jboss.as.naming.InitialContext.lookup(InitialContext.java:113)

08:05:06,546 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.jboss.as.naming.NamingContext.lookup(NamingContext.java:214)

08:05:06,562 ERROR [stderr] (http--127.0.0.1-8080-1)    at javax.naming.InitialContext.lookup(InitialContext.java:392) 
```

任何指向这个请

感谢和问候斯里尼

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T14:53:25.217

我注意到这一点：

```
<module name="deployment.myapp.ear.xxxejb.jar"/> 
```

正确的无问题是：

```
<module name="deployment.myapp.ear.xxxEJB.jar"/> 
```

记住这个**区分大小写**！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T10:03:16.120

有了这么短的堆栈跟踪，很难说出问题所在。看起来好像您的 JNDI 查找失败了。查看 AS7 中的新[JNDI 名称空间名称](https://docs.jboss.org/author/display/AS7/How+do+I+migrate+my+application+from+AS5+or+AS6+to+AS7#HowdoImigratemyapplicationfromAS5orAS6toAS7-UpdateapplicationJNDInamespacenames)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T04:01:55.697

我使用了 java:global/earName/ejbjarName/ejbName!com.xxx.ejbNameSessionHome 并且工作正常

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-23T16:01:18.497

JBoss 每次都创建 JNDI 名称。

**例子：**

jndi-name="java:global/demo-ear/demo-ejb-0.0.1-SNAPSHOT/TestService!com.TestService"

并点击此链接

[JBoss 7.1 开发问题](https://stackoverflow.com/questions/20897339/jboss-7-1-development-issues/21107215#21107215)

# ios5 - 自定义 CALayer - 无效上下文 0x0

> ID：12400581
> 
> 赞同：4
> 
> 时间：2012-09-13T06:26:59.500
> 
> 标签：ios5, calayer, cgcontext, quartz-core

我正在尝试构建一个使用图层的应用程序，我的应用程序结构是

```
UIView --> UIScrollView --> UIView --> LayersView (Custom UIView)
                                   --> UIImageView 
```

我想向 LayersView 添加多个图层，因此我构建了一个`CALayer`用于`UIBezierPath`绘制一组点的自定义。

CALayerBezierPath.h

```
#import <QuartzCore/QuartzCore.h>

@interface CALayerBezierPath : CALayer {
    NSMutableArray *pointsArray;
}
@property (nonatomic, retain) NSMutableArray *pointsArray;

- (void) initVariables;
- (void) addNewPoints:(CGPoint)newPoint;
@end 
```

CALayerBezierPath.m

```
#import "CALayerBezierPath.h"

@implementation CALayerBezierPath

@dynamic pointsArray;

-(void)drawInContext:(CGContextRef)ctx {
    NSLog(@"CALayerBezierPath - drawInContext");
    if ([pointsArray count] > 0) {
        UIColor *color = [UIColor redColor];
        [color set];
        UIBezierPath *path = [UIBezierPath bezierPath];
        [path moveToPoint:[[pointsArray objectAtIndex:0] CGPointValue]];
        for (int x = 1; x < [pointsArray count]; x++) {
            [path addLineToPoint:[[pointsArray objectAtIndex:x] CGPointValue]];
        }
        [path closePath]; // Implicitly does a line between p4 and p1
        [path fill]; // If you want it filled, or...
        [path stroke]; // ...if you want to draw the outline.
    }
}

-(void)drawLayer:(CALayer *)layer inContext:(CGContextRef)ctx {
    NSLog(@"drawLayer");// It's never called, i don't know why
}

- (void) initVariables {
    pointsArray = [[NSMutableArray alloc] init];
}

- (void) addNewPoints:(CGPoint)newPoint {
    [pointsArray addObject:[NSValue valueWithCGPoint:newPoint]];
}

@end 
```

当我在我的 LayrsView 中启动一个新层时，我正在使用以下代码：

```
 self.layer.backgroundColor = [UIColor whiteColor].CGColor;
    self.layer.cornerRadius = 20.0;
    self.layer.frame = CGRectInset(self.layer.frame, 0, 0);

    for (PlansClass *pclass in layersContent) {
        CALayerBezierPath *sublayer = [CALayerBezierPath layer];
        [sublayer initVariables];

        NSDictionary* json = [pclass.listOfPoints objectFromJSONString];

        float largerX = 0; float largerY = 0;
        float smallerX = 10000; float smallerY = 10000;

        for (NSDictionary *dic in json) {

            [sublayer addNewPoints:CGPointMake([[[json objectForKey:dic] objectForKey:@"x"] floatValue], [[[json objectForKey:dic] objectForKey:@"y"] floatValue])];

            if (largerX < [[[json objectForKey:dic] objectForKey:@"x"] floatValue]) {
                largerX = [[[json objectForKey:dic] objectForKey:@"x"] floatValue];
            }

            if (smallerX > [[[json objectForKey:dic] objectForKey:@"x"] floatValue]) {
                smallerX = [[[json objectForKey:dic] objectForKey:@"x"] floatValue];
            }

            if (largerY < [[[json objectForKey:dic] objectForKey:@"y"] floatValue]) {
                largerY = [[[json objectForKey:dic] objectForKey:@"y"] floatValue];
            }

            if (smallerY > [[[json objectForKey:dic] objectForKey:@"y"] floatValue]) {
                smallerY = [[[json objectForKey:dic] objectForKey:@"y"] floatValue];
            }
        }
        sublayer.frame = CGRectMake(smallerX, smallerY, largerX - smallerX, largerY - smallerY);
        sublayer.backgroundColor = [UIColor redColor].CGColor;
        [self.layer addSublayer:sublayer];
        [sublayer setNeedsDisplay];
    } 
```

问题是每当应用程序午餐时，它都会给我这个错误：

```
2012-09-13 08:05:47.648 abcd[20744:707] CALayerBezierPath - drawInContext
Sep 13 08:05:47 ipad-5 abcd[20744] <Error>: CGContextSetFillColorWithColor: invalid context 0x0
Sep 13 08:05:47 ipad-5 abcd[20744] <Error>: CGContextSetStrokeColorWithColor: invalid context 0x0
Sep 13 08:05:47 ipad-5 abcd[20744] <Error>: CGContextSaveGState: invalid context 0x0
Sep 13 08:05:47 ipad-5 abcd[20744] <Error>: CGContextSetFlatness: invalid context 0x0
Sep 13 08:05:47 ipad-5 abcd[20744] <Error>: CGContextAddPath: invalid context 0x0
Sep 13 08:05:47 ipad-5 abcd[20744] <Error>: CGContextDrawPath: invalid context 0x0
Sep 13 08:05:47 ipad-5 abcd[20744] <Error>: CGContextRestoreGState: invalid context 0x0
Sep 13 08:05:47 ipad-5 abcd[20744] <Error>: CGContextSaveGState: invalid context 0x0
Sep 13 08:05:47 ipad-5 abcd[20744] <Error>: CGContextSetLineWidth: invalid context 0x0
Sep 13 08:05:47 ipad-5 abcd[20744] <Error>: CGContextSetLineJoin: invalid context 0x0
Sep 13 08:05:47 ipad-5 abcd[20744] <Error>: CGContextSetLineCap: invalid context 0x0
Sep 13 08:05:47 ipad-5 abcd[20744] <Error>: CGContextSetMiterLimit: invalid context 0x0
Sep 13 08:05:47 ipad-5 abcd[20744] <Error>: CGContextSetFlatness: invalid context 0x0
Sep 13 08:05:47 ipad-5 abcd[20744] <Error>: CGContextAddPath: invalid context 0x0
Sep 13 08:05:47 ipad-5 abcd[20744] <Error>: CGContextDrawPath: invalid context 0x0
Sep 13 08:05:47 ipad-5 abcd[20744] <Error>: CGContextRestoreGState: invalid context 0x0 
```

另外，我尝试`NSLog`了`ctx`in`drawInContext`方法，它给了我这个：

```
2012-09-13 08:05:47.650 abcd[20744:707] <CGContext 0x15d950> 
```

那么，问题出在哪里，为什么上下文无效，为什么我不能在我的自定义中绘制`CALayer`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-13T08:33:36.953

问题是我没有推送上下文`ctx`，我正在尝试推送和弹出。所以解决方案就像将这一行放在 if 语句中一样简单`drawInContext`

```
UIGraphicsPushContext(ctx); 
```

一切正常。

# c# - 在 C# 中运行一个外部程序和几个参数

> ID：12400585
> 
> 赞同：0
> 
> 时间：2012-09-13T06:27:09.867
> 
> 标签：c#, external

我使用以下命令应该创建一个单独的`EXE`文件（`Player.exe`作为解释器）。：

```
copy / b player.exe + game.zip game.ehe 
```

但是，该命令没有创建（即使获得了 bat 文件），并且启动了一个`player.exe`没有`game.zip`.

**我的以下代码不起作用：**

```
private void button2_Click(object sender, EventArgs e)
{
    saveDialog.Filter = "exe | *.exe";
    if (saveDialog.ShowDialog() == DialogResult.OK) ;
    {
        ProcessStartInfo info = new ProcessStartInfo();
        info.FileName = @"engine\windows\player.exe";
        info.Arguments = "/b copy " + labelPath + saveDialog.FileName;
        info.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
        using (Process process = Process.Start(info))
        {
            process.WaitForExit();
        }
    }
} 
```

有人能告诉我为什么我的代码没有按预期工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T06:29:16.937

您传递的文件路径中是否有空格？如果是这样，您可能需要引用该字符串：

```
info.Arguments = "/b copy \"" + labelPath + saveDialog.FileName + "\""; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T06:44:13.390

如果 labelPath 是 Label 类型，则另一个选项是 + 将调用`ToString`它，结果字符串将类似于“...Label...”。您可能需要类似的东西（如果路径有空格，可能需要结合 Fredrik Mörk 的答案）：

```
info.Arguments = "/b copy labelPath.Text + saveDialog.FileName; 
```

# javascript - 如何识别打开-保存-取消对话框

> ID：12400593
> 
> 赞同：0
> 
> 时间：2012-09-13T06:27:45.507
> 
> 标签：javascript, jquery, html, jquery-ui, jakarta-ee

在我的应用程序中，我有一个名为“导出为 PDF”的链接。单击该链接后，我将提交一个表单，并将 PDF 文件写入该响应对象，该对象将在浏览器中显示模态对话框（下面的示例图像）

![在此处输入图像描述](../Images/542c4363b9365ff55c0281a0d97afb3d.png)

**要求是使用 jQuery 显示进度条，一旦弹出此对话框，进度条就会停止。**请告诉如何识别这个和开始/停止动画。请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:31:54.530

我认为您无法从浏览器中获得这种事件。另一方面，您知道转换为 PDF 的时间对吗？

就我个人而言，我会使用 socket.io 来获得一个不错的进度条。
这是一个使用 socket.io 更新的进度条的[示例应用程序。](https://github.com/3on/socket.io-on-dotcloud)

但是，从美妙的 java 世界来看，您可能会更好地进行[长轮询](https://stackoverflow.com/questions/333664/simple-long-polling-example-code)。

# php - 不同位置的相同php变量

> ID：12400595
> 
> 赞同：-3
> 
> 时间：2012-09-13T06:27:58.573
> 
> 标签：php, html

只是想知道如果我将在 php 文件的某行中设置一个变量而不是尝试在不同的 php 脚本中但在相同的 html 代码中获取值会发生什么。是这个值还是我必须在同一个脚本中使用它。

可以说——

```
<html>
<head>
<?php 
     $a = "Hello";
?>

<\head>
<body>
<?
     echo $a;
?>
<\body>
<\html> 
```

会是——“你好”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:42:15.137

您说过“在不同的 PHP 脚本中”。

这不是 PHP 的工作方式—— php“脚本”是请求页面时执行的所有 php。

但回到你的问题，这样想：

```
<?php 
```

说“这是一些 php 代码”。

```
?> 
```

说“这**不是**php 代码”。

这就像一次和两个人交谈——当你转身面对他们时，对方仍然知道你在说什么。

我同意这些评论 - 这些事情很容易检查自己:)

# tomcat - Tomcat：重新加载上下文与重新启动单个应用程序

> ID：12400596
> 
> 赞同：3
> 
> 时间：2012-09-13T06:27:59.200
> 
> 标签：tomcat, restart

只是关于tomcat的一个简短问题：

我们正在使用 psi-probe 来部署、取消部署和重新启动应用程序。

我们刚刚讨论了如何正确重启应用程序。我的一位开发人员说，我们需要关闭单个应用程序并重新启动它，以使其干净。

我的意思是，那个 psi 探针有一个“重新加载上下文”按钮。这似乎完全正确。

但是我的开发人员说，仅重新加载上下文将保留在内存中的类，除非重新启动应用程序，否则这些类永远不会被释放。

那么谁是对的呢？实现这一目标的最佳方法是什么？

谢谢，

简

# java - 从 GZIPOutputStream 计算压缩文件大小

> ID：12400598
> 
> 赞同：0
> 
> 时间：2012-09-13T06:28:08.557
> 
> 标签：java, gzipoutputstream

我正在压缩文件并将其写入输出流，如何获取压缩文件大小以放入响应标头

```
 os = response.getOutputStream();
    gzos = new GZIPOutputStream(os);
    fin = new FileInputStream(file);
    in = new BufferedInputStream(fin);

    byte[] buffer = new byte[1024];
    int i;
    while ((i = in.read(buffer)) >= 0) {
           gzos.write(buffer, 0, i);
     }
    gzos.flush(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:34:39.647

你没有。原因：

一旦响应缓冲区已满，response 就会被提交，也就是说，如果你正在 gzip 一个 20MB 的大文件，那么在 gzip 完成之前头部已经发送到客户端，并且当 gzip 完成时你不能修改提交的头部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T06:30:02.790

你应该看看 fin.Position

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T06:36:54.083

你没有。理由：你不必。servlet 容器会为您处理它。

# ios - 如何为 iPhone 5 命名图形文件？

> ID：12400612
> 
> 赞同：11
> 
> 时间：2012-09-13T06:28:42.963
> 
> 标签：ios, graphics, iphone-5

iPhone 5 刚刚推出，所以我想知道是否有人知道如何为 iPhone 5 重命名图形文件？

iPhone 4S 和 iPhone 5 的分辨率不同，所以我认为 iPhone 5 显卡也会有新的命名策略？@3x 也许？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T10:47:56.037

`-568h@2x.png`该方案现在不适用于启动画面以外的图形，所以今天没有办法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-13T14:22:28.807

iPhone 5 仍然是 Retina 显示屏，每个点都有两个像素。这就是图形的@2x 后缀用来表示的意思，所以这里将使用相同的后缀。

正如其他人所建议的，在 Default-568h@2x.png 启动图像中有一个新的必需艺术品，如果没有它，您的应用程序将不会被识别为支持 iPhone 5 的显示。

除此之外，您需要为 iPhone 5 提供特殊图形的唯一原因是您是否在屏幕的整体尺寸上设置了一些东西。在这种情况下，您需要检测主屏幕的框架并在运行时使用您自己的命名约定替换适当的图形。

# android - Android：如果任务管理器杀死，则重新调用应用程序

> ID：12400619
> 
> 赞同：8
> 
> 时间：2012-09-13T06:29:01.840
> 
> 标签：android, taskmanager

如果应用程序线程被任务管理器杀死，它就会关闭。需要重新调用应用程序，就好像它被其他应用程序或任务管理器杀死一样。任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T16:59:06.097

您必须使用 START_STICKY 命令运行后台服务。只需像这样扩展 Service 并覆盖 onCommand ：

```
@Override
public int onStartCommand(Intent intent,int flags,int startId) {
    super.onStartCommand(intent, flags, startId);

    return START_STICKY;
} 
```

像这样，您的服务在关闭时重新启动（通过系统或其他任何方式）

如果应用程序正在运行，您现在只需检查您的服务（例如 onCreate），如果没有，则再次启动它。我想 PackageManager 可以让您检查这一点，或者简单地放置一个静态布尔 is_alive 来查看您的活动是否一直在运行。

问候吉姆

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T17:12:04.583

[带有 START_STICKY 的 Android 2.3 中的错误](https://stackoverflow.com/questions/6619143/start-sticky-foreground-android-service-goes-away-without-notice/6877980#6877980)

我需要用我所有的力量来维持一个服务。如果服务随时运行，您可以弹出 UI。

```
onDestroy() 
```

它将重新启动。

无法卸载该应用程序，因为它具有设备管理员。

这是一种家长控制，用户知道它就在那里。停止的唯一方法是删除设备管理员，然后将其卸载，但删除设备管理员会像卡巴斯基一样锁定手机。

有很多广播接收器，例如启动完成，用户呈现，屏幕开启，屏幕关闭......等等，所有启动服务，您也可以使用UI来完成。或者在服务中检查您的活动是否存在、可见，如果没有，则弹出它。

我希望您有充分的理由使用这些信息！

编辑：重新启动服务代码片段：

```
 // restart service:
    Context context = getApplicationContext();
    Intent myService = new Intent(context, MyService.class);
    context.startService(myService); 
```

Edit2：添加 spippet 以检查服务是否正在运行...大量广播

```
 public static  boolean isMyServiceRunning(Context context) {
        ActivityManager manager = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);
        for (RunningServiceInfo service : manager.getRunningServices(Integer.MAX_VALUE)) {
            if (MyService.class.getName().equals(service.service.getClassName())) {
                Log.d("myTag", "true");
                return true;
            }
        }
        Log.d("myTag", "false");
        return false;
    } 
```

Edit3 其他服务启动：

```
 public static void startTheService(Context context) {
         Intent myService = new Intent(context, MyService.class);
         context.startService(myService);
   } 
```

不要忘记 Android 2.3 的错误：做初始化的逻辑

```
@Override
public void onCreate() 
```

而不是：

```
 @Override
    public int onStartCommand(Intent intent, int flags, int startId) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T07:51:02.630

在查看 Google IO 官方产品源代码时，我发现了以下内容

```
((AlarmManager) context.getSystemService(ALARM_SERVICE))
            .set(
                    AlarmManager.RTC,
                    System.currentTimeMillis() + jitterMillis,
                    PendingIntent.getBroadcast(
                            context,
                            0,
                            new Intent(context, TriggerSyncReceiver.class),
                            PendingIntent.FLAG_CANCEL_CURRENT)); 
```

[代码网址](http://code.google.com/p/iosched/source/browse/android/src/com/google/android/apps/iosched/gcm/GCMIntentService.java)

您可以启动一个粘性服务并注册一个警报管理器，该管理器将一次又一次地检查您的应用程序是否处于活动状态，如果没有，它将运行它。

您还可以制作一个接收器并注册它，`<action android:name="android.intent.action.BOOT_COMPLETED" />`然后您可以从您的接收器启动您的服务。我认为当操作系统或杀死某些服务/应用程序时应该有一些广播消息。

只是为了给你一个粗略的想法，我已经完成了这个及其工作 1）注册接收器接收器代码：

@Override public void onReceive(Context context, Intent intent) {

```
 try {
        this.mContext = context;
        startService(intent.getAction());

        uploadOnWifiConnected(intent);

    } catch (Exception ex) {
        Logger.logException(ex);
        Console.showToastDelegate(mContext, R.string.msg_service_starup_failure, Toast.LENGTH_LONG);
    }
}

private void startService(final String action) {
    if (action.equalsIgnoreCase(ACTION_BOOT)) {

        Util.startServiceSpawnProcessSingelton(mContext, mConnection);

    } else if (action.equalsIgnoreCase(ACTION_SHUTDOWN)) {

    }
} 
```

服务代码：

```
@Override
public int onStartCommand(Intent intent, int flags, int startId) {

    Logger.logInfo("Service Started onStartCommand");
    return Service.START_STICKY;
} 
```

我更喜欢在 onStartCommand 中什么都不做，因为每次启动服务时都会调用它，但 onCreate 仅在第一次启动服务时被调用，所以我在 onCreate 中执行大部分代码，这样我就不再关心天气服务了跑步与否。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T21:37:18.770

根据来自 Google 的 @RetoMeyer 的说法，解决方案是让应用程序“粘性”。

为此，您必须在您的意图服务管理中建立 START_STICKY。

[从开发人员 android](http://developer.android.com/reference/android/app/Service.html)检查此参考

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T06:40:51.523

是的，一旦出现内存不足的问题，android os 就会开始杀死应用程序以补偿所需的内存。使用服务可以实现这一点，您的服务应该与您的应用程序并行运行，但是请注意，在某些情况下，甚至您的服务也会同时被终止。如果内存足够，则杀死后，android os 本身会尝试重新启动应用程序，但并非在所有情况下都如此。最后，在所有情况下，一旦被操作系统杀死，就没有硬性规定重新调用您的应用程序，这取决于操作系统和内部行为。

# android - 如何在正在运行的线程中显示警报对话框？

> ID：12400620
> 
> 赞同：8
> 
> 时间：2012-09-13T06:29:03.520
> 
> 标签：android, android-alertdialog, game-loop

我正在开发一个 Android 游戏。在这个游戏中，有火车运行的轨道。这是正在运行的线程。我想在两者之间发生碰撞时显示一个警报对话框。当我应用显示错误的警报对话框时，无法在未调用的线程内创建处理程序`looper.prepare()`。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-13T06:33:24.250

这将帮助您：

```
runOnUiThread(new Runnable() {
    @Override
    public void run() {
        // Your dialog code.
    }
}); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-13T06:32:47.433

您必须需要`AlertDialog`在 UI 线程内创建，否则它将永远无法工作。如果你在不同的线程中使用`MessageHandler`或者可以使用`runOnUiThread`（使用runnable）在里面创建你的对话框。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-13T06:36:53.220

您可以使用处理程序来完成这项工作。

```
Handler mHandler = new Handler(Looper.getMainLooper());
mHandler.post(new Runnable() {
    @Override
    public void run() {
        // Your UI updates here
    }
}); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-09-13T06:41:48.693

您可以在 Activity 类中创建一个处理程序，并可以调用 sendMessage 到该处理程序对象。编写代码在Handler的handleMessage方法中显示alert，例如：

活动课

```
Handler mHandler = new Handler()
{
    public void handleMessage(Message msg)
    {
       //Display Alert
    }
};

//Thread

Thread thread= new Thread()
{
    public void run()
    {
         //Logic
         MHandler.sendEmptyMessage(0);
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-13T06:31:49.590

您必须在 UI 线程上显示对话框，如下所示

```
runOnUiThread(new Runnable() {
                @Override
                public void run() {
                // Your dialog code.
                }
            }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-11-22T05:44:59.277

你可以试试这个，检查 App is visible

```
Activity currentActivity = MainClassApp.getCurrentActivity();
boolean isAppVisible = currentActivity != null;

if (isAppVisible) {
    currentActivity.runOnUiThread(() -> 
    // Your Dialog Code 
} 
```

# python - 如何在金字塔中映射具有相同路线的两个视图？

> ID：12400623
> 
> 赞同：0
> 
> 时间：2012-09-13T06:29:10.303
> 
> 标签：python, pyramid

我有两个视图，“订单列表”和“订单视图”。'orderlist' 将列出所有订单给用户，而'orderview' 将显示一个订单的详细信息。现在我想像这样组织 URL：

```
/order        map to orderlist and show all orders
/order/{id}   map to orderview and show detailed info of one order 
```

有没有办法实现这个？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T07:05:01.720

这只是基本的 URL 调度。

```
config.add_route('all_orders', '/order')
config.add_route('order_detail', '/order/{id}')

@view_config(route_name='all_orders', renderer='all_orders.mako')
def all_orders_view(request):
    all_orders = {} # query the DB?
    return {'orders': all_orders}

@view_config(route_name='order_detail', renderer='order_detail.mako')
def order_detail_view(request):
    order_id = request.matchdict['id']
    order = None # query the db for order
    if order is None:
        raise HTTPNotFound
    return {'order': order} 
```

# php - 基于用户级别的导航

> ID：12400624
> 
> 赞同：0
> 
> 时间：2012-09-13T06:29:13.387
> 
> 标签：php, oop, class, yii

我正在关注本教程：

[http://www.yiiframework.com/wiki/191/implementing-a-user-level-access-system/](http://www.yiiframework.com/wiki/191/implementing-a-user-level-access-system/)

但我不断收到错误：

include(User.php) [function.include]：打开流失败：没有这样的文件或目录

我不会发布整个堆栈跟踪，但是 YiiBase.php 在第 423 行有一个错误：

```
include($className.'.php'); 
```

谁能帮帮我吗？

* * *

但是该教程中没有提到创建一个名为 user 的类，只是 LevelLookUp，这就是我感到困惑的原因：/

* * *

我想我知道我哪里错了，我没有模型！

有人可以解释一下我需要做什么：

```
public function authenticate()
{
    $username = strtolower($this->username);
    // from database... change to suite your authentication criteria
    // -- Nope, I wont include mine --
    $user = User::model()->find('LOWER(username)=?', array($username)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:01:09.353

您首先必须创建一个用户表并生成该表的模型。您可以使用 Gii（Yii 代码生成器）轻松生成模型。根据您提到的教程，您将在用户表中添加名为“级别”的列/字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T07:02:43.463

您引用的教程假定您已经有一个“用户”表，并且可能已经为它生成了 PHP 模型代码。我建议你阅读[Yii 博客教程](http://www.yiiframework.com/doc/blog/)，因为它涵盖了一个共同的基础。

# sql-order-by - 无法在 HQL 的子查询中使用 order by

> ID：12400627
> 
> 赞同：0
> 
> 时间：2012-09-13T06:29:18.163
> 
> 标签：sql-order-by, subquery, hql

我有这个 HQL，我需要一个子查询。我知道按顺序创建子查询是不合法的，但我不知道该怎么做

```
SELECT OBJECT(l) FROM InboundNotification l 
 INNER JOIN l.item item 
 WHERE l.job = ? ORDER BY (SELECT SUM(itemInst.qty) 
 FROM ItemInst itemInst 
  WHERE itemInst.receivedFromNotification_id = l.id) DESC, item.localId DESC 
```

以上失败，因为我有子查询按顺序排列。我怎样才能重新配置它，这样它就可以工作了？

Java 代码中的排序在这里不是一个选项，即使它几乎同样有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T18:38:46.653

好的，我没有 hql 的概念，但我会假设它就像其他查询语言一样潜入这里，因为这个问题长期以来一直没有答案。

你能重写查询吗，它是这样的：

```
SELECT OBJECT(l), SUM(itemInst.qty) theSum
FROM InboundNotification l
INNER JOIN l.item item WHERE l.job = ?
INNER JOIN ItemInst on ItemInst.KEY = l.KEY
WHERE itemInst.receivedFromNotification_id = l.id)
GROUP BY OBJECT(l)
ORDER BY theSum 
```

where`ItemInst.KEY = l.KEY`显示适合您情况的关系（如果存在这种关系）

# javascript - 在鼠标悬停时更改图像以获取另一个 div 上的按钮

> ID：12400633
> 
> 赞同：2
> 
> 时间：2012-09-13T06:29:58.933
> 
> 标签：javascript, css

在“主页”页面上，我希望在 a `#banner div`（然后将在整个站点中都存在）上具有标识和菜单，并在 a`#content" div`上具有图像。所有这些`div`s 都在一个`#container" div`. 菜单有 3 个按钮。

我希望在`mouseover`事件中每个按钮显示相应`#content div`更改的图像。所以基本上，当 hover 时`button1`，图像`#content`会从`background.jpg`变为`background1.jpg`。`mouseover`on事件`button2`会将其更改为`background2.jpg`etc。当按钮未悬停时，图像应恢复为原始`background.jpg`.

HTML：

```
<!doctype html>
<html>
<head>
  <meta charset="UTF-8">
  <title>E.S.T.</title>
  <link href="_css/layout.css" rel="stylesheet" type="text/css">
  <link href="SpryAssets/SpryMenuBarHorizontal.css" 
        rel="stylesheet" 
        type="text/css">
  <script src="SpryAssets/SpryMenuBar.js" type="text/javascript"></script>
</head>

<body>
  <div id="container">
    <div id="banner">
      <div id="logo">E.S.T.</div>
       <div id="menu">
         <ul id="MenuBar1" class="MenuBarHorizontal">
           <li id="button1"><a href="bio.html">Biography</a></li>
           <li id="button2"><a href="#">Albums</a></li>
           <li id="button3"><a href="#">Links</a></li>       
         </ul>
       </div>
     </div>
   <div id="content">
     <img id="back0" src="_img/background.jpg">
     <img id="back1" src="_img/back_bio.jpg">
   </div>
 </div>

<script type="text/javascript">
  var MenuBar1 = new Spry.Widget.MenuBar("MenuBar1,
  {
    imgDown:"SpryAssets/SpryMenuBarDownHover.gif",
    imgRight:"SpryAssets/SpryMenuBarRightHover.gif"
  });
</script>
</body>
</html> 
```

CSS：

```
@charset "UTF-8";
@import url("../_fonts/Days/fontstylesheet.css");

body {
  background-color:#CCC;
  font-family:Days;
  font-size:100%;
}

#container {
  width:850px;
  max-height: 650px;
  margin: 0 auto;
  padding-left: 10px;
  padding-right: 10px;
  overflow: hidden;
  font-family: Days;
}

#logo {
  position:relative;
  font-size: 4em;
  color:white;
  float:left;
}

#menu {
  float:right;
  margin-top:40px;
} 
```

我尝试了几种不同的方法，但我只设法从按钮本身更改背景图像。通过在网上搜索，我认为这应该用 JS 来完成，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:44:17.193

这可以完全用 CSS 解决，但首先让我给你一个提示：将`background.jpg`和合并`background1.jpg`到一个图像中，而不是改变背景位置。这样，从用户将鼠标悬停在菜单元素上到显示图片时不会有任何延迟，并且您需要跟踪的文件更少。

假设我们让`#button1`高度为 100 像素。我们制作了一个 200px 高的图像，顶部包含正常状态图像，底部包含悬停图像。这称为[精灵](https://en.wikipedia.org/wiki/Sprite_%28computer_graphics%29)。

```
#button1 {
    height: 100px;
    background-image: url("background.jpg");
}

#button1:hover {
    background-position: 0 -100px;
} 
```

这会移动背景图像，显示悬停版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:44:50.187

为方便起见，我将使用[`jQuery`](http://jquery.com)javascript 库来回答这个问题。

如果我理解正确，您希望`#content`包含一个在您将鼠标悬停在菜单项上时会发生变化的图像，并且该图像应该反映当前悬停的项目。

`data`我将尝试使用属性的方法，而不是将每个图像都包含在正文中。

**HTML** ***相关部分***

```
<ul id="MenuBar1" class="MenuBarHorizontal">
    <li id="button1" data-img="background.jpg"><a href="bio.html">Biography</a></li>
    <li id="button2" data-img="back_album.jpg"><a href="#">Albums</a></li>
    <li id="button3"><a href="#">Links</a></li>       
</ul>

<div id="content">
    <img id="back"
         src="_img/background.jpg"
         data-original="_img/background.jpg" 
         alt="e.s.t" />
</div> 
```

**JavaScript**

```
$(document).ready(function() {
    $("#MenuBar1 li").mouseover(function() {
        $("#back").attr("src", $(this).data("img"));
    }).mouseout(function() {
        $("#back").attr("src", $("#back").data("original"));
    });
});​ 
```

`data-original`所以现在我们在其属性中存储带有image标签的原始图像路径，并且图像的路径`:hover`与菜单元素一起存储。

请参阅此[Fiddle](http://jsfiddle.net/LNrfL/)进行演示！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T06:36:51.330

在您的图像上提供一个 id，例如： id=idimage 您可以像这样使用 jQuery：

```
<script type="text/javascript">
$(document).ready(function(){
    $("#MenuBar1 li").mouseover(function(){
        var id=$(this).attr('id');
        var number = id[id.length-1];
        $("#id_image").attr("src","_img/background"+number+".jpg");
    });  
});  
</script> 
```

# iphone - 如何获取 TableViewCell 像 Phone.app-"Recents tab" 或 Mail.app-"mail list"

> ID：12400636
> 
> 赞同：0
> 
> 时间：2012-09-13T06:30:03.560
> 
> 标签：iphone, ios, uitableview

我需要一个这样的列表：

* * *

“我的头衔”。. . . . . . . . . . “10:20AM”
“创建者：meadlai”

“TitleString”。. . . . . . . . . . “09:33AM”
“创建者：meadlai”

“TextLabel”。. . . . . . . . . . “上午 11 点 59 分”
“详细文本标签”

* * *

共有三个字段：标题，创作者，时间。
它几乎就像**Phone.app** “Recents-Calls” 风格。
或**Mail.app**的邮件列表。我认为它不需要自定义 UITableViewCell。
我可以使用 System-UITableViewCell 创建一个类似的列表吗？
任何线索或代码？非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:33:48.320

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];

    }

    cell.textLabel.text = @"Some Name";
    cell.detailTextLabel.text = @"Some text underneath";

    return cell;
} 
```

具体来说，这行代码让你有一个 TableViewCell 像 phone.app

```
 cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];

   UITableViewCellStyleSubtitle 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T06:37:31.987

参考[UITableView](http://www.edumobile.org/iphone/iphone-programming-tutorials/how-to-add-uiimage-and-uilabel-in-the-uitableview/)

希望这将帮助您解决所有问题....

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T07:09:09.020

```
 cell.textLabel.text = @"Victoria";
        cell.detailTextLabel.text = @"created-by:mead";
        UILabel* time = [[UILabel alloc]initWithFrame:CGRectMake(5,5,80,20)];
        time.text = @"05:59 PM";
        cell.accessoryView = time; 
```

完毕。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T07:17:05.967

也许改变`accessoryView`单元格的，因为没有像你想要的那样的“风格”。尽管如此，自定义单元类可能会使事情变得更容易。

各种样式的单元格的枚举。

```
typedef enum {
   UITableViewCellStyleDefault,
   UITableViewCellStyleValue1,
   UITableViewCellStyleValue2,
   UITableViewCellStyleSubtitle
} UITableViewCellStyle; 
```

单元使用的标准附件控件的类型。

```
typedef enum {
   UITableViewCellAccessoryNone,
   UITableViewCellAccessoryDisclosureIndicator,
   UITableViewCellAccessoryDetailDisclosureButton,
   UITableViewCellAccessoryCheckmark
} UITableViewCellAccessoryType; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-27T15:15:32.110

对于寻找仍然允许使用的快速解决方案的其他人`DetailDisclosureButton`，您可以使用[TDBadgedCell 之](https://github.com/tmdvs/TDBadgedCell)类的库，它允许您将徽章放在单元格的左侧。如果您不想突出显示徽章，只需进行`badgeTextColor`相应设置即可`badgeColor`。

# python - urls.py 中的异常

> ID：12400638
> 
> 赞同：0
> 
> 时间：2012-09-13T06:30:13.697
> 
> 标签：python, regex, django, url

我花了很多时间来追踪我的错误，但我找不到任何人都可以找出错误在哪里吗？

```
Environment:

Request Method: GET

Request URL: [http://127.0.0.1:8000/blog/archives]

Django Version: 1.4.1

Python Version: 2.7.3

Installed Applications:

('django.contrib.auth',

 'django.contrib.contenttypes',

 'django.contrib.sessions',

 'django.contrib.sites',

 'django.contrib.messages',

 'django.contrib.staticfiles',

 'django.contrib.admin',

 'taggit',

 'blog')

Installed Middleware:

('django.middleware.common.CommonMiddleware',

 'django.contrib.sessions.middleware.SessionMiddleware',

 'django.middleware.csrf.CsrfViewMiddleware',

 'django.contrib.auth.middleware.AuthenticationMiddleware',

 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:

File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py" in get_response
  89\.                     response = middleware_method(request)

File "/usr/local/lib/python2.7/dist-packages/django/middleware/common.py" in process_request
  67\.             if (not urlresolvers.is_valid_path(request.path_info, urlconf) and

File "/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py" in is_valid_path
  531\.         resolve(path, urlconf)

File "/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py" in resolve
  420\.     return get_resolver(urlconf).resolve(path)

File "/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py" in resolve
  300\.                     sub_match = pattern.resolve(new_path)

File "/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py" in resolve
  300\.                     sub_match = pattern.resolve(new_path)

File "/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py" in resolve
  196\.         match = self.regex.search(path)

File "/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py" in regex
  162\.                 compiled_regex = re.compile(self._regex, re.UNICODE)

File "/usr/lib/python2.7/re.py" in compile
  190\.     return _compile(pattern, flags)

File "/usr/lib/python2.7/re.py" in _compile
  242\.         raise error, v # invalid expression

Exception Type: error at /blog/archives
Exception Value: unexpected end of pattern 
```

这是我的 URLS.PY

```
from django.conf.urls import patterns, include, url

from django.views.generic import ListView, DetailView

from blog.models import Post

urlpatterns = patterns('',

    url(r'^$', 
        ListView.as_view(
               queryset=Post.objects.order_by("-created")[:2],
               template_name="blog.html")),

      url(r'^(?p<pk>\d+)/$',
        DetailView.as_view(
                model=Post,
                template_name="post.html")), 
    url(r'^archives/$', 
        ListView.as_view(
                queryset=Post.objects.all().order_by("-created"),
                template_name="archives.html")), 
    url(r'^tags/(?p<tag?\w+)/$', 'tagpage'),                        

) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T06:40:21.753

```
$url(r'^tags/(?p<tag?\w+)/$', 'tagpage'), 
```

替换字符**？**与**>**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T06:39:51.050

也许有一个错误：`url(r'^tags/(?p<tag?\w+)/$', 'tagpage')`？我认为应该是：`url(r'^tags/(?p<tag>\w+)/$', 'tagpage')`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T08:23:55.857

以及`?`代替`>`，`p`需要大写。

```
r'^tags/(?P<tag>\w+)/$' 
```

# wcf - 如何在 WCF 和 Silverlight 中实现故障契约/异常处理？

> ID：12400642
> 
> 赞同：0
> 
> 时间：2012-09-13T06:30:23.710
> 
> 标签：wcf, silverlight-4.0

我已经开发了我的应用程序，它有 1000 多个功能。现在，我需要在 Silverlight 中实现故障契约或异常处理，而无需更改这些功能。

是否有任何通用方法可以在 WCF 服务层的一处和 Silverlight 应用程序的一处实现？

我想实现这一点，因为当 WCF 层发生任何异常时，它不会将真正的异常消息发送到 silverlight。

Silverlight 只收到这样的消息：

> “找不到远程服务器……”

真正的问题是我已经开发了系统，现在我需要在不改变太多或服务层中的每个功能的情况下实现错误合同。那么有什么方法可以创建错误合同包装器并将其放置在 WCF 服务层上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T20:21:16.017

对于您的情况，我并不是 100% 清楚，但我可以提一下：

*   如果您在 Silverlight 中收到“**未找到远程服务器...** ”的异常，那么无论您在服务中做什么，您都不会获得任何异常详细信息（如果 Silverlight 应用程序可以，服务如何响应这些详细信息找不到*服务*？）。
*   如果您想在应用程序中查看服务的异常详细信息以进行调试，可以通过ServiceBehavior 中的**[IncludeExceptionDetailInFaults属性将其应用于整个服务。](http://msdn.microsoft.com/en-us/library/system.servicemodel.description.servicedebugbehavior.includeexceptiondetailinfaults.aspx)**这被认为是一种安全风险（披露内部异常详细信息），因此不建议将其用于生产。
*   据我所知**，必须在操作本身上设置****[FaultContracts](http://msdn.microsoft.com/en-us/library/ms752208.aspx)**，并且在抛出它们时必须明确。

PS。您真正的问题可能是您的服务中有超过 1000 个功能，这看起来并不健康。另一方面，如果它们是生成的函数，结果可能是喜忧参半，因为您也可以生成一些故障代码？

# c# - 如何维护用户输入的 URL

> ID：12400643
> 
> 赞同：1
> 
> 时间：2012-09-13T06:30:31.387
> 
> 标签：c#, asp.net, iis-7.5

我的 iis 文件夹结构就像

```
Default Web Site---->online and Accessing with www.sitename.com/online

Default Web Site---->trade and Accessing with www.sitename.com/trade

Default Web Site---->private and Accessing with www.sitename.com/private 
```

这里的登录页面位于“默认网站---->trade/Login.aspx”内。当用户输入 www.sitename.com/online 或 www.sitename.com/private 或 www.sitename.com/trade 他/she 将重定向到网址 www.sitename.com/trade/Login.aspx。

所以我的需要是当用户输入“www.sitename.com/online”时，他/她应该保持与 www.sitename.com/online 相同的 URL 而不是“www.sitename.com/trade/Login.aspx”。所以我如何维护用户输入的 URL。

谢谢，乔比

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T06:33:16.950

最好的方法是在您的重定向到登录页面中传递一个带有原始 url 的参数，然后让登录将您重定向回该原始 url

```
Location: http://example.com/login?ref=http%3A%2F%2Fexample.com%2Ffoo 
```

然后登录后，您读取“ref”参数并执行位置重定向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T06:51:46.100

如果您使用的是内置会员提供程序，那么您可以使用`[Authorize]`属性，该属性具有将用户重定向到原始页面的功能，在用户获得身份验证后，系统将自动将用户重定向到请求的页面。

或者您可以尝试以下解决方案：

像这样的东西：

```
www.sitename.com/trade/Login.aspx?ReturnUrl=http%3A%2F%2Fsitemap.com%2Fonline 
```

用户通过身份验证后，您可以将用户重定向到请求的页面。

```
Response.Redirect(Request.QueryString["ReturnUrl"]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T06:39:43.970

考虑使用 MVC 或至少将它的一部分与 ASPX 页面一起使用来呈现视图。这样，您就可以拥有与物理文件名无关的任何 Url。

用户很少输入任何网址……而且我不确定是否有人关心，只要网址有意义（或完全废话）。所以我认为在 /login 之类的地方呈现登录页面而不是重定向回原始页面是完全可以的。如果登录从未离开您的网站，您可以将原始网址保存在查询字符串中（如@chovy 建议的那样）或页面上的隐藏元素。如果登录离开您的站点（即用于 OAuth 身份验证），则可能会放置会话状态或 cookie 来存储返回 URL。

# php - 使用 Ajax PHP 实时检查用户名

> ID：12400647
> 
> 赞同：0
> 
> 时间：2012-09-13T06:30:43.983
> 
> 标签：php, jquery

我有一个代码，其中有一个函数应该检查用户名是否可用。

我对这个功能的工作原理感到困惑。

**JS：**

```
jQuery(document).ready(function(){
    // binds form submission and fields to the validation engine
    jQuery("#register-form").validationEngine();
}); 
```

**HTML 输入：**

```
<form action="" id="register-form">
    <input value="" class="validate[required,custom[onlyLetterNumber],maxSize[20],ajax[ajaxNameCallPhp]]] input" type="text" name="username"/>
</form> 
```

**这是我的 JS 函数：**

```
(function($){
    $.fn.validationEngineLanguage = function(){};
    $.validationEngineLanguage = {
        newLang: function(){
            $.validationEngineLanguage.allRules = {

                "ajaxNameCallPhp": {
                    // remote json service location
                    "url": "ajaxNameCallPhp.php",
                    // error
                    "alertText": "* This name is already taken",
                    // speaks by itself
                    "alertTextLoad": "* Validating, please wait"
                }
            };
        }
    };

    $.validationEngineLanguage.newLang();
})(jQuery); 
```

**这是我的`ajaxNameCallPhp.php`功能：**

```
include ("config.php");
$username = trim(strtolower($_POST['username']));
$username = mysql_escape_string($username);

$query = "SELECT username FROM user WHERE username = '$username' LIMIT 1";
$result = mysql_query($query);
$num = mysql_num_rows($result);

echo $num;
mysql_close(); 
```

所以任何人都可以给我一个解决方案？

我感谢并感谢您的关注。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:40:01.720

尝试这个

```
function UserNameExist(){ 
    $("#msg").html( "* Validating, please wait" );
    $.ajax({
      url: "ajaxNameCallPhp.php",
      type: "POST",
      data: {username : $('#username').val()},
      dataType: "html"
    }).done(function(msg) {
      if(msg > 0){
        $("#msg").html( "* This name is available" );
      }else{
        $("#msg").html( "* This name is already taken" );
      }
    });
   } 
```

其中#msg 是显示按摩的 div 的 id

#userName 是文本框的 id

希望有所帮助。

# c# - 如何在不使用 ResourceDictionary Code-Behind 的情况下处理来自 ResourceDictionary 的事件？

> ID：12400650
> 
> 赞同：0
> 
> 时间：2012-09-13T06:31:16.623
> 
> 标签：c#, wpf, event-handling, resourcedictionary

我想要关于如何在不使用 ResourceDictionary Code-Behind（例如 Styles.xaml.cs）的情况下处理来自 ResourceDictionary（例如 Styles.xaml）中控件的事件的帮助，主要是因为我希望 Styles.xaml 只是用于样式设置。

我的场景是，我有一个自定义页面，它使用 ResourceDictionary 作为 DataTemplate 样式（我使用的是 TemplateSelector）。但是，我目前遇到的问题是处理事件。例如：

我的**Styles.xaml**中有这个：

```
.
.
<Button Click="Button_Click"/>
. 
```

我在**CustomPage.xaml.cs**中声明了这一点：

```
private void Button_Click(object sender, RoutedEventArgs e)
{
  // some code
} 
```

但是，它不起作用。有什么方法可以明确告诉我想为按钮的点击事件使用那个特定的事件处理程序？此外，是否可以为每个页面设置不同的处理程序，例如

**CustomPage2.xaml.cs：**

```
private void Button_Click(object sender, RoutedEventArgs e)
{
   // some different code from CustomPage.xaml.cs
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T06:36:24.107

答案很简单：不要以这种方式处理事件。请改用绑定（尤其是在您使用数据模板的情况下）。例如，对于`Button`：

```
<Button Command="{Binding MyCommand}"> 
```

where`MyCommand`是[`ICommand`](http://msdn.microsoft.com/en-us/library/system.windows.input.icommand.aspx)您的数据上下文中的 -implemented 实例。

如果您不熟悉 WPF 中的数据绑定，请从[此处](http://msdn.microsoft.com/en-us/library/ms750612.aspx)开始阅读。

# php - 为什么 PHP 函数“json_decode”返回一个对象？

> ID：12400651
> 
> 赞同：1
> 
> 时间：2012-09-13T06:31:26.363
> 
> 标签：php, arrays, object, json

PHP 函数 json_decode（默认）返​​回一个对象。切换第二个参数将返回一个数组。

也许我只是不了解对象，但我认为对象具有属性和方法（也许也有事件）。数组只有属性。

鉴于 json_decode 只会返回属性而不会返回方法，它不应该总是返回一个数组吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-13T06:55:19.103

它返回一个对象，因为 JSON 定义了一个对象结构。这就是“JS **O** N”中的“O”所代表的意思。

这就是语言之间的差异开始变得更加明显的地方。

Javascript 使用对象，而 PHP 可能使用带有命名键的数组。JS 不能在数组中有命名键，只能在对象中。其他语言对如何构造变量有其他限制。

使用对象意味着 PHP 与 JSON 的其他语言实现尽可能一致。由于 JSON 是为跨语言通信而设计的，因此保持一致很重要。

但是正如您所说，在 PHP 中使用数组有时更容易，所以这就是 PHP 提供将​​其直接转换为数组的选项的原因。

But be aware that PHP arrays are **not** the same as JSON arrays and objects. PHP allows you to mix named and numbered array keys. This does not map well to JSON, so if you're using PHP arrays to work with JSON you have to be careful of it. If you're using PHP objects for your JSON work, then you won't have this mismatch in functionality.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T06:45:34.793

好的，看来您已经知道了：

默认情况下，`json_decode`将返回一个 StdClass 对象。如果你想要一个数组，请使用：

`json_decode($jsondata, true);`

见： http: [//php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

所以，回答“为什么”：

JSON 是一种用于存储分层数据集的格式，类似于过去使用 XML 的方式。然而，因为 Javascript 针对访问对象属性进行了优化，所以不需要额外的库来处理 JSON 结构——它们是 Javascript 中的实际对象。

解析 JSON 比解析 XML 更容易，并且相对容易翻译成后端语言中的对象和/或数组。在 PHP 之外的许多语言中，有一种称为 Dictionary 或 Hashtable 的东西，它通常是具有键/值对的对象。

除了上下文之外，PHP 不会区分数组和“关联数组”，因此对于 PHP 开发人员来说，期望结果是关联数组是很自然的，并且该选项存在，但最有可能是为了灵活性（也许是因为它更自然地解码为对象）对象格式存在。

我希望这能解释。我还强烈建议您在此处进一步了解 JSON 是什么（不是什么）：http: [//json.org](http://json.org)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T06:48:05.287

`json_decode`默认情况下从`stdClass`类返回一个对象。这是对象的基本（顶级）泛型类。这个类首先没有方法也没有属性。

但随后您可以添加一些“即时”，即所谓的`Dynamic Properties`. 更多[在这里](http://krisjordan.com/dynamic-properties-in-php-with-stdclass)：

> 有时，只需要一个属性包即可将**键值对**放入其中。**一种方法是使用 array**，但这需要引用所有键。**另一种方法是在****StdClass**的实例上使用动态属性。

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T06:50:50.537

它返回 stdClass 的对象。如果将对象转换为对象，则不会对其进行修改。如果将任何其他类型的值转换为对象，则会创建 stdClass 内置类的新实例。如果值为 NULL，则新实例将为空。数组转换为具有由键命名的属性和相应值的对象。对于任何其他值，名为 scalar 的成员变量将包含该值。

# ruby-on-rails - Rails 3：设计压倒一切的 sign_up 控制器问题

> ID：12400654
> 
> 赞同：0
> 
> 时间：2012-09-13T06:31:35.090
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, routes

参考了设计的在线文档，但我的覆盖仍然无法正常工作。任何人有任何建议为什么不？它只是在登录后进入根目录。但注册工作。

**路线：**

```
 root :to => 'pages#index'
  get "pages/index"

  devise_for :users, :path => 'accounts', :controllers => { :registrations => "registrations" }

  match 'profile' => 'profiles#show', :as => 'current_profile'
  match 'profile/edit' => 'profiles#edit', :as => 'edit_current_profile'
  put 'profile' => 'profiles#update'

  resources :users do
    resources :profiles 
  end 
```

**注册控制器：**

```
class RegistrationsController < Devise::RegistrationsController

  protected

  def after_sign_up_path_for(resource)
     edit_current_profile_path
  end

  def after_sign_in_path_for(resource)
     current_profile_path
  end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:45:23.313

```
 def after_sign_in_path_for(resource)
     current_profile_path
  end 
```

这在 application_controller 中，而不是在覆盖类中。

# collections - 如何在 pl/sql 本地集合中搜索？

> ID：12400661
> 
> 赞同：0
> 
> 时间：2012-09-13T06:32:04.000
> 
> 标签：collections, plsql

如何查询 PL/SQL 本地集合，例如`TABLE OF`and `VARRAY`？
我搜索了网络，但我发现的都是迭代它们，例如。`FOR LOOP`！
有什么设施可以向他们查询吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:37:41.993

SQL 引擎可以进行查询，PL/SQL 引擎不能。因此，您需要将集合转换为 SQL 引擎已知的表类型。

SQL 不知道包中声明的类型，因此您必须在全局级别声明它们。

从您的评论来看，您似乎已经很清楚了。

# mysql - 比较同一张表上的时间并列出mysql中的不常见时间

> ID：12400662
> 
> 赞同：3
> 
> 时间：2012-09-13T06:32:05.500
> 
> 标签：mysql, sql

我被困在一个查询中，以比较同一张表上的不同时间并列出常见和所有不常见的时间之一。

```
 ID ID_STORE Opentime       Closetime
---------- -------- ---------- -------------------------------
         1        6 09:30:00       18:00:00
         2        6 09:30:00       18:00:00
         3        6 09:30:00       18:00:00
         4        6 09:30:00       18:00:00
         5        6 09:30:00       16:00:00
         6        6 10:30:00       15:00:00 
```

像在这张表中，输出应该像

```
 ID ID_STORE Opentime       Closetime
---------- -------- ---------- -------------------------------
         4        6 09:30:00       18:00:00
         5        6 09:30:00       16:00:00
         6        6 10:30:00       15:00:00 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T06:34:43.543

正如我所观察到的，您`ID`在每个独特的开放时间和关闭时间以及每家商店都获得了最新信息。

```
SELECT MAX(ID) as ID,
        ID_Store,
        OpenTime,
        CloseTime
FROM tableName
GROUP BY ID_Store,
        OpenTime,
        CloseTime 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T06:34:20.527

从您给出的示例中，在我看来，您只需要 a`GROUP BY`并决定您在`ID`.

我已经使用`MAX`它，因为它根据您的示例返回结果。

```
SELECT MAX(ID), OpenTime, CloseTime
FROM   YourTable
GROUP BY
       OpenTime, CloseTime 
```

你可以继续阅读

*   [聚合函数](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T06:34:46.670

您需要使用[`GROUP BY`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)子句。并且`ID`您可以使用聚合函数，如[`MAX()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_max)或[`MIN()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_min)根据您的要求。

```
SELECT MAX(ID) AS ID, ID_STORE, Opentime,  Closetime 
  FROM myTable 
  GROUP BY ID_STORE, Opentime, Closetime 
```

# linux - Berkeley DB：由于先前在 c api 调用期间异常退出而卡在 futex_wait

> ID：12400663
> 
> 赞同：2
> 
> 时间：2012-09-13T06:32:22.127
> 
> 标签：linux, berkeley-db, futex, c-api

我正在用 C 语言编程，在内核 2.6.18-238_xen_AMD64 的 RHEL5.6 上使用 berkeley db 4.3 (/usr/lib64/libdb-4.3.so)。

在我的测试中（写入 1,000,000 个键/值对），如果一个进程异常退出（ctrl + c、kill 或 assert 失败），而对 db 的操作正在进行中，则该 db 上的后续操作将在打开时被阻止。Strace 显示进程在打开 __db.00x(eg __db.001, __db.002, __db.003) 文件后停留在 futex(ptr_to_something, FUTEX_WAIT, 2, NULL) 调用。

我知道清除锁定的唯一方法是删除 __db.00x 文件，以下测试表明数据库没有损坏。它符合我的要求，但我只是想知道是否有更好（或更优雅）的方法来解决这个问题。

在这里，我列出了一些 strace stderr 和操作数据库的代码，这可能会有所帮助。

*一些 strace 标准错误*

```
...  
open("__db.001", O_RDWR)                = 3  
fcntl(3, F_SETFD, FD_CLOEXEC)           = 0  
fstat(3, {st_mode=S_IFREG|0640, st_size=24576, ...}) = 0  
close(3)                                = 0  
open("__db.001", O_RDWR)                = 3  
fcntl(3, F_SETFD, FD_CLOEXEC)           = 0  
mmap(NULL, 24576, PROT_READ|PROT_WRITE, MAP_SHARED, 3, 0) = 0x2afcc4149000  
close(3)                                = 0
futex(0x2afcc4149000, FUTEX_WAIT, 2, NULL **[[stuck here]]** 
```

*操作数据库的代码*

```
typedef DB* db_handle;
db_handle bdb_open(const char *filename, u_int32_t cache_size_mb)
{
    int ret;
    DB_ENV *env;
    db_handle dbp;
    u_int32_t flags = DB_CREATE | DB_THREAD | DB_INIT_LOCK | DB_INIT_MPOOL | DB_INIT_LOCK ;
    u_int32_t gb = cache_size_mb / 1024, mb = cache_size_mb % 1024;

    if (ret = db_env_create(&env, 0)) {
        fprintf(stderr, "db_env_create:%d, %s\n", ret, db_strerror(ret));
        exit(EXIT_FAILURE);
    }

    if (ret = env->set_timeout(env, 3 * 1000000, DB_SET_LOCK_TIMEOUT)) {
        fprintf(stderr, "env->set_timeout:%d, %s\n", ret, db_strerror(ret));
        exit(EXIT_FAILURE);
    }

    if (ret = env->set_lk_detect(env, DB_LOCK_DEFAULT)) { /* this seems to be of no use in my case */
        fprintf(stderr, "env->set_lk_detect:%d, %s\n", ret, db_strerror(ret));
        exit(EXIT_FAILURE);
    }

    if (ret = env->set_cachesize(env, gb, mb * 1024 * 1024, 0)) {
        fprintf(stderr, "env->set_cachesize:%d, %s\n", ret, db_strerror(ret));
        exit(EXIT_FAILURE);
    }

    if ((ret = env->open(env, NULL, flags, 0)) != 0) {
        fprintf(stderr, "db_env_open:%d, %s\n", ret, db_strerror(ret));
        exit(EXIT_FAILURE);
    }

    if (ret = db_create(&dbp, env, 0)) {
        fprintf(stderr, "db_create:%d, %s\n", ret, db_strerror(ret));
        exit(EXIT_FAILURE);
    }

    if (ret = dbp->open(dbp, NULL, filename, NULL, DB_BTREE, flags, 0664)) {
        fprintf(stderr, "dbp->open:%d, %s\n", ret, db_strerror(ret));
        exit(EXIT_FAILURE);
    }

    return dbp;
}

int bdb_put(db_handle db, void* key, u_int32_t keylen, void* val, u_int32_t vallen)
{
    DBT dkey, dval;
    bzero(&dkey, sizeof(dkey));
    bzero(&dval, sizeof(dval));
    dkey.data = key, dkey.size = keylen;
    dval.data = val, dval.size = vallen;
    return db->put(db, NULL, &dkey, &dval, 0);
}

int bdb_get(db_handle db, void* key, const u_int32_t keylen,
                          void* buf, u_int32_t buflen, u_int32_t* nwrite)
{
    DBT dkey, dval;
    bzero(&dkey, sizeof(dkey));
    bzero(&dval, sizeof(dval));
    dkey.data = key, dkey.size = keylen;
    dval.data = buf, dval.ulen = buflen, dval.flags = DB_DBT_USERMEM;
    int ret = db->get(db, NULL, &dkey, &dval, 0);
    if (ret == 0 && nwrite != NULL)
        *nwrite = dval.size;
    return ret;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-09T17:56:43.727

__db* 文件包含锁的名称，但不包含锁本身。

pthread 锁是在内核 futex 之上实现的。被杀死的进程在被杀死时可能有一个活动锁。

尝试运行“db_recover -h $DBHOME”来清除过时的锁。

还可以添加一个回调来自动执行“陈旧锁”移除程序。

（旁白）您的代码几乎肯定需要处理来自 env->open 的 DB_RUNRECOVERY 和 DB_VERSION_MISMATCH 错误代码，以实现健壮的实现。使用 DB_RECOVER 设置重新打开将处理。

在较旧的 linux 上，也有可能只有通过重新启动才能清除的“陈旧 futex”（即被死掉的进程锁定的 futex）（还有另一种方法，使用“robust mutex”，设置一个标志允许另一个进程解锁先前锁定的互斥锁，但这在 Berkeley DB 中没有实现）。

# ruby - 如何将我的语言添加到 github 标记库？

> ID：12400664
> 
> 赞同：0
> 
> 时间：2012-09-13T06:32:23.360
> 
> 标签：ruby, github, markup

根据 github/murkup 的 README，可以在 Github 上添加自定义标记语言。 [https://github.com/github/markup](https://github.com/github/markup)

对于简单的项目，Markdown 真的很笨拙。我只想要一种支持“粗体”、“内联代码”、“代码块”、“链接”的标记语言。换行不用加空格，像代码一样简单。我认为在大多数情况下已经足够了。所以这是我在 CoffeeScript 中的代码。 [https://gist.github.com/3712310](https://gist.github.com/3712310)

我还没学过Ruby。所以在我把它推送到 Github 之前我不知道如何调试我的语言，因为没有针对初学者的详细指南。有人可以帮我吗？

顺便问一下，Github 接受这样的语言吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:02:22.670

答案在[自述文件](https://github.com/github/markup#commands)中：

> 如果您的标记是 Ruby 以外的语言，请在 lib/github/commands 中放置一个翻译器脚本，该脚本接受 STDIN 上的输入并在 STDOUT 上返回 HTML。有关示例，请参见 rest2html。

我鼓励您再看看其他受支持的语言。仅仅因为您的文件在 Markdown 中并不意味着您必须使用所有功能。Textile 是一个不错的选择，但`markup`.

想想您的语言中的工具和编辑器支持，以及用户想要使用它的原因。它带来了什么？它解决了什么问题？它看起来与 Markdown 相同，只是减去了一些功能。您可能需要在拉取请求中向一位用户出售您的专业标记语言。

# java - 匹配jsoup中的标签

> ID：12400668
> 
> 赞同：0
> 
> 时间：2012-09-13T06:32:41.533
> 
> 标签：java, regex, string, jsoup

我想匹配标签层次结构中的标签

```
<table class='tabletext'>
    <tr align='center' style='background:#FFFFFF'>
        <td><span id='fd'><span>10</span></span></td>
        <td>10.00</td>
        <td>&pound;0.00</td>
        <td>&pound;280.00</td>
        <td>
            <ul>
                <li><a href=''>ok</a></li>+
            </ul>
            <a href='/cart.php?action=add&qty=10&id=2628' title='Click here to add this item to your cart'>
                <img alt='Click here to add this item to your cart' src='/images/addtocart.gif' border='0' />
            </a>
        </td>
    </tr>
    <tr><td><span>Hello2</span></td></tr>+
</table> 
```

这是我的代码

```
Document doc = Jsoup.parseBodyFragment(html);

        Elements element = doc.select(".tabletext > * > * > * > span");

        System.out.println(element.html()); 
```

输出是

```
<span>10<span>
hello2 
```

但我不知道 .tabletext 和 span 之间有多少标签，所以在这种情况下应该是什么

```
Elements element = doc.select(".tabletext > span"); 
```

用于获取上述输出的代码。如何为该输出安排 * > 感谢高级。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:28:26.703

我想告诉你，`Jsoup`在从 XML/HTML 文件中获取一些信息时，我曾经使用过并且遇到了很多麻烦，所以我决定使用`XPath`. 它更容易使用，你可以用它做很多东西。

我的建议是试一试：

[使用 XPath 解析 XML 文档](http://onjava.com/pub/a/onjava/2005/01/12/xpath.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T06:39:12.283

你是10后吗？

你有一个 id='fd' 的父跨度，所以这行得通吗？

`Elements element = doc.select("#fd > span");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T12:24:36.387

这是您的解决方案

```
Elements element = doc.select(".tabletext span"); 
```

att att 表示它们之间的多个标签和文本。

# java - 以编程方式创建插件 Eclipse 项目

> ID：12400669
> 
> 赞同：0
> 
> 时间：2012-09-13T06:32:43.970
> 
> 标签：java, eclipse, plugins

有没有办法以编程方式创建插件 Eclipse 项目？我尝试创建一个 java 项目，但它不包括 Manifest 文件和 build.properties 文件。我添加了 pluginnature 但它仍然无法创建这些文件。任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T03:09:35.183

我找到了这个网站。找到这个网站。[http://sodecon.blogspot.com.au/2009/09/create-elcpse-plug-in-project.html](http://sodecon.blogspot.com.au/2009/09/create-elicpse-plug-in-project.html)真的很有帮助！它解释了如何在 eclipse 插件项目中创建所有必要的文档。

# android - 无法按降序显示 sqlite 数据库的值

> ID：12400672
> 
> 赞同：0
> 
> 时间：2012-09-13T06:32:59.897
> 
> 标签：android, sqlite, android-listview

我正在尝试在列表视图中按降序显示我的测验应用程序的分数。出于某种原因，它不这样做。它显示分数，但不是按降序排列。这是我的 DBAdapter 片段，用于获取分数的所有信息：

```
public Cursor getAllInfoScores()
             {
                return db.query(DATABASE_TABLE_HIGHSCORES, new String[] {ROW_ID, KEY_NAME, KEY_SCORES, KEY_DIFFICULTY},null,null,null,null, "scores DESC");

             } 
```

我也试过这个：

```
 public Cursor getAllInfoScores()
             {
                return db.query(DATABASE_TABLE_HIGHSCORES, new String[] {"_id", "name", "scores", "difficulty"},null,null,null,null, "scores DESC");

             } 
```

这是我试图将其显示到列表中的活动：

```
public class HighScores extends ListActivity{

DBAdapter db = new DBAdapter(this);
private Cursor mCursor;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.highscores);

    db.open();
    fillData();

}

private void fillData() {
    mCursor = db.getAllInfoScores();
    String[] from = new String[]{DBAdapter.KEY_NAME, DBAdapter.KEY_SCORES, DBAdapter.KEY_DIFFICULTY}; 
    int[] to = new int[]{R.id.textViewnamehs, R.id.textViewscorehs, R.id.textViewdiff};
   SimpleCursorAdapter c = 
            new SimpleCursorAdapter(this, R.layout.highscoresrow, mCursor, from, to);
setListAdapter(c);

} 
```

错误：

```
09-13 15:19:04.533: E/AndroidRuntime(12792): FATAL EXCEPTION: main
09-13 15:19:04.533: E/AndroidRuntime(12792): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.dtan.mathwiz/com.dtan.mathwiz.HighScores}: android.database.sqlite.SQLiteException: near "scores": syntax error: , while compiling: select _id,name,scores,difficulty from highscores orderby scores desc
09-13 15:19:04.533: E/AndroidRuntime(12792):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
09-13 15:19:04.533: E/AndroidRuntime(12792):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
09-13 15:19:04.533: E/AndroidRuntime(12792):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
09-13 15:19:04.533: E/AndroidRuntime(12792):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
09-13 15:19:04.533: E/AndroidRuntime(12792):    at android.os.Handler.dispatchMessage(Handler.java:99)
09-13 15:19:04.533: E/AndroidRuntime(12792):    at android.os.Looper.loop(Looper.java:123)
09-13 15:19:04.533: E/AndroidRuntime(12792):    at android.app.ActivityThread.main(ActivityThread.java:3683)
09-13 15:19:04.533: E/AndroidRuntime(12792):    at java.lang.reflect.Method.invokeNative(Native Method)
 09-13 15:19:04.533: E/AndroidRuntime(12792):   at java.lang.reflect.Method.invoke(Method.java:507)
09-13 15:19:04.533: E/AndroidRuntime(12792):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
09-13 15:19:04.533: E/AndroidRuntime(12792):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
09-13 15:19:04.533: E/AndroidRuntime(12792):    at dalvik.system.NativeStart.main(Native Method)
09-13 15:19:04.533: E/AndroidRuntime(12792): Caused by: android.database.sqlite.SQLiteException: near "scores": syntax error: , while compiling: select _id,name,scores,difficulty from highscores orderby scores desc
09-13 15:19:04.533: E/AndroidRuntime(12792):    at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
09-13 15:19:04.533: E/AndroidRuntime(12792):    at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:92)
09-13 15:19:04.533: E/AndroidRuntime(12792):    at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:65)
09-13 15:19:04.533: E/AndroidRuntime(12792):    at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:83)
09-13 15:19:04.533: E/AndroidRuntime(12792):    at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:49)
0 9-13 15:19:04.533: E/AndroidRuntime(12792):   at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:42)
09-13 15:19:04.533: E/AndroidRuntime(12792):    at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1356)
09-13 15:19:04.533: E/AndroidRuntime(12792):    at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1324)
09-13 15:19:04.533: E/AndroidRuntime(12792):    at com.dtan.mathwiz.adapter.DBAdapter.getAllInfoScores(DBAdapter.java:138)
09-13 15:19:04.533: E/AndroidRuntime(12792):    at com.dtan.mathwiz.HighScores.fillData(HighScores.java:29)
09-13 15:19:04.533: E/AndroidRuntime(12792):    at com.dtan.mathwiz.HighScores.onCreate(HighScores.java:24)
09-13 15:19:04.533: E/AndroidRuntime(12792):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
09-13 15:19:04.533: E/AndroidRuntime(12792):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
09-13 15:19:04.533: E/AndroidRuntime(12792):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:36:33.607

在查看您的查询时，您似乎缺少编写`KEYWORD` `ORDER BY`,

它应该是

`ORDER BY`或者`order by`

并不是

```
orderby 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-13T07:04:10.643

您必须在`ORDER`此处包含您可以使用的简单原始查询 `db.rawQuery("SELECT _id,name,scores,difficulty from YourTableName order scores desc")`

# android - 当服务被android OS销毁时删除通知

> ID：12400681
> 
> 赞同：10
> 
> 时间：2012-09-13T06:33:24.800
> 
> 标签：android, service, android-ondestroy

我创建了一个应用程序，它在`Service.onStartCommand()`方法执行时显示通知并在`Service.onDestroy()`调用时隐藏通知。它适用于对 startService() 和 stopService() 的正常调用。

**服务代码：**

```
@Override
public IBinder onBind(Intent intent) 
{
    return null;
}
@Override
public void onCreate() 
{
    super.onCreate();
    nm = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);
}

@Override
public int onStartCommand(Intent intent, int flags, int startId)
{
    //Some  code here
    showNotification();
    return START_NOT_STICKY; 
}

@Override
public void onDestroy() 
{
    super.onDestroy();
    nm.cancel(R.string.service_started);
} 
```

**问题：**当我的服务被 android OS() 销毁时（如果`onDestroy()`没有被调用），那么通知不会被删除。那么当Service被android OS本身销毁时如何删除通知呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-02-07T12:39:43.230

始终在之前`super.onDestroy();`而不是之后调用您的代码

```
@Override
public void onDestroy() 
{
    nm.cancel(R.string.service_started);
    super.onDestroy();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-24T05:36:42.240

您应该在您想要停止服务的地方使用它，这将关闭您的通知并终止服务。

```
stopService(new Intent(MainActivity.this,MyService.class)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-03T10:00:14.860

你有没有尝试过`notificationManager.cancelAll()`

如果您的目标是 API 24+`stopForeground(Service.STOP_FOREGROUND_REMOVE)`或`stopForeground(true)`

此外，您可能应该查看[onTrimMemory()](https://developer.android.com/reference/android/app/Service.html#onTrimMemory(int))和[onLowMemory()](https://developer.android.com/reference/android/app/Service.html#onLowMemory())，它们是操作系统破坏您的服务时调用的函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-27T09:58:52.843

只需使用

```
stopForeground(true) 
```

当您的工作完成时。它将破坏前台通知。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-09-13T06:44:56.193

您很可能没有停止服务

# ruby - 如何解释 google api oauth 回调

> ID：12400688
> 
> 赞同：0
> 
> 时间：2012-09-13T06:33:49.820
> 
> 标签：ruby, oauth, sinatra, google-api

我正在尝试通过我正在构建的 sinatra 应用程序访问我自己的 gmail 帐户。我以以下形式向 google api 发送请求

`https://accounts.google.com/o/oauth2/auth?response_type=code&&scope=https://mail.google.com/+https://www.googleapis.com/auth/userinfo.email+https://www.googleapis.com/auth/userinfo.profile&client_id=XXXXXXXXXXXX.apps.googleusercontent.com&redirect_uri=http://localhost:9393/oauth2callback&access_type=online`

在我通过谷歌的网络界面授权应用程序之后，我得到了似乎是对我自己的 sinatra 应用程序的正确回调。我不清楚在这个过程中我接下来要做什么。我从谷歌身份验证系统得到的东西看起来像

`http://localhost:9393/oauth2callback?code=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX.YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY`

然后我尝试使用 xoauth gem 来查询谷歌以获取有关我的帐户的信息，即 [https://github.com/nfo/gmail_xoauth](https://github.com/nfo/gmail_xoauth) 我希望上面的 xxxxxx.yyyy 字符串以某种方式对应于值:token 写在 xoauth gem 文档中。当我运行本地脚本以检查事情是否正常时，我得到了`Invalid credentials (Failure) (Net::IMAP::NoResponseError)`

我用来理解 oauth 过程的文档是[https://developers.google.com/accounts/docs/OAuth2WebServer](https://developers.google.com/accounts/docs/OAuth2WebServer)

我认为我没有正确处理回调，或者我误解了它是什么。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:09:41.293

Google 最近才[为 GMail IMAP/SMTP 添加了对 OAuth 2 授权的](https://developers.google.com/google-apps/gmail/oauth_overview)支持。但是，您正在使用的库[尚不支持此](https://github.com/nfo/gmail_xoauth/issues/1)功能。

所以你的选择是：

*   自己改进图书馆（这是我的建议）
*   等待库更新
*   回退到已弃用的[OAuth 1](https://developers.google.com/accounts/docs/OAuth)

# android - 如何将具有多个文本视图的布局包装到图像

> ID：12400696
> 
> 赞同：0
> 
> 时间：2012-09-13T06:34:35.127
> 
> 标签：android

我正在制作一个应用程序，我想在其中制作一个证书。为此，我使用 textviews 制作了一个布局，我想将其转换为图像。如何制作具有多个文本视图的图像？

这是布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="500.0dp"
    android:orientation="vertical" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Certificate"
        android:layout_gravity="center"
        android:layout_marginTop="20.0dp"
        android:textStyle="bold"
        android:typeface="serif" 
        android:textSize="20.0dp"
        android:textColor="@color/dark_green"
        android:visibility="gone"
        />

    <TextView
        android:id="@+id/NameText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginTop="70.0dp"
         android:visibility="gone"
        android:text="" />

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="200.0dp" 
        android:visibility="gone"
        >

        <TextView
            android:id="@+id/Date"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:text="Date:" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:text="Place:" />
    </RelativeLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:38:35.077

看图，什么意思？您是否希望文本视图集充当单个可单击单元。如果是这样，您可以为线性布局编写一个点击监听器。

# android - 如何在单个视图中实现两个片段？

> ID：12400699
> 
> 赞同：3
> 
> 时间：2012-09-13T06:34:40.817
> 
> 标签：android, android-layout, android-fragments, android-viewpager, android-view

我有一个包含 3 个片段的应用程序。它工作正常的viewpager。

但我需要在 Android Play 商店中实现类似的视图。最初他们有“特色”标签。当您向左滑动时，我们可以看到“类别”选项卡。

但是屏幕的一半仍然充满了“精选”选项卡的内容。如何实现该视图？任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T18:45:10.153

这是实际的答案。隔了好久才发。

在您的适配器中添加此方法：

```
@Override
public float getPageWidth(int position) {
if (position == 0) {
    return(0.5f);
} else {
    return (1.0f);       
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T07:26:27.107

为了在一个视图中显示两个片段，您可以添加一个布局，其宽度和高度将在一个片段的布局中包装内容，然后在 onCreateView 上使用片段管理器添加另一个片段。代码将是这样的——

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="horizontal"
        >
        <LinearLayout 
             android:id="@+id/ll1"
             android:layout_width="wrap_content"
             android:layout_height="fill_parent"
             android:orientation="vertical"
             >

        </LinearLayout>
        <LinearLayout 
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    >
    <Button 
    android:id="@+id/tb"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="test"/>

</LinearLayout> 
```

而 onCreate 会像——

```
View view ;

boolean isVisible = false;

FragmentManager fm;
FragmentTransaction ft;
Fragment menuFragment;
LinearLayout llList;

@Override
public View onCreateView(LayoutInflater inflater,  ViewGroup container, Bundle savedInstanceState) {

    view = inflater.inflate(R.layout.main, container, false);
    llList = (LinearLayout) view.findViewById(R.id.ll1);
    menuFragment = new frg1();
    fm = getFragmentManager();

    Button tb = (Button) view.findViewById(R.id.tb);
    tb.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            if(!isVisible) {

                isVisible = true;
                showList();
            }
            else {

                isVisible = false;
                hideList();
            }

        }
    });

    return view;
}

private void changeDisplay() {

    Display display = getActivity().getWindowManager().getDefaultDisplay();
    int width = (int) (display.getWidth() * 0.8 );
    int height = (int) (display.getHeight() * 0.8);

    if(isVisible) 
    {
        llList.setLayoutParams(new LinearLayout.LayoutParams(width, LayoutParams.FILL_PARENT));
        //lllList.setLayoutParams(new LinearLayout.LayoutParams(p))
    }
    else {
        llList.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.FILL_PARENT));
        //llList.scrollTo(0, 0);
    }
}

private void showList() {

    changeDisplay();

    ft = fm.beginTransaction();
    ft.add(R.id.ll1, menuFragment);
    ft.commit();
}

private void hideList() {

    changeDisplay();

    ft = fm.beginTransaction();
    ft.remove(menuFragment);
    ft.commit();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T07:42:21.960

查看[ViewPagerIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator)。

如果您想查看它的外观，请先尝试该[示例。](https://play.google.com/store/apps/details?id=com.viewpagerindicator.sample&hl=en)

您想要的是“*标题*”部分。

# cakephp-2.0 - 使用额外条件扩展 cakephp auth 组件

> ID：12400701
> 
> 赞同：1
> 
> 时间：2012-09-13T06:34:46.393
> 
> 标签：cakephp-2.0

问题：我想根据登录时的用户状态（使用 ajax）向用户显示不同的错误消息。例如：如果用户状态为待处理，我想显示一条消息，或者如果用户状态被禁用，我想显示另一条消息。只有活动用户才能登录。

经过一番搜索发现我可以使用

1.  鉴别方法

    或者

2.  我应该`if ($this->Auth->login())`在我的登录方法中使用将我的条件写在“”条件中。

如果我在自定义组件中使用第一种方法（它将扩展身份验证），希望它只能返回 true 或 false，对吗？它可以设置错误消息并返回，以便我可以从我的控制器中获取它吗？

如果我在允许用户登录后使用第二种方法，我应该检查状态，如果它不活动，我应该从 Auth/Session 中删除登录凭据。我怎样才能做到这一点 ？这是一个好方法吗？

还有其他更好的解决方案吗？我正在使用 cakephp2.0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T14:54:44.403

我将为您的用户创建一个从 BaseAuthenticate 扩展的类，并在您的 AppController 中进行设置。

```
public $components = array(
    'Session',
    'Auth' => array(
        'loginRedirect' => ..... ,
        'logoutRedirect' => ..... ,
        'loginAction' => ..... ,
        'authenticate' => array('YourUsers'),
    )
); 
```

然后创建类

```
<?php
App::uses('BaseAuthenticate', 'Controller/Component/Auth');

class YourUsersAuthenticate extends BaseAuthenticate {

    public function authenticate(CakeRequest $request, CakeResponse $response) {
        // your code goes in here
    }
} 
```

您可以从身份验证中返回 false 以拒绝用户访问，或者可以在成功时返回一个对象，该对象将存储在 $this->Auth->user 中，您可以稍后对其进行询问。

如果您遇到困难，[CookBook](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html)有很多关于此的详细信息。

# .net - MonoTouch 是否支持 wcf nettcp 绑定？

> ID：12400703
> 
> 赞同：1
> 
> 时间：2012-09-13T06:34:51.410
> 
> 标签：.net, wcf, silverlight, xamarin.ios, nettcpbinding

在 Silverlight 中，它可以加载程序集 System.ServiceModel.Nettcp，但在 MonoTouch 中我找不到程序集。MonoTouch 是否支持 WCF nettcp 绑定？

```
BinaryMessageEncodingBindingElement messageEncoding = new BinaryMessageEncodingBindingElement();
System.ServiceModel.Channels.TcpTransportBindingElement tcpTransport = new TcpTransportBindingElement();
CustomBinding netTcpBinding = new CustomBinding(messageEncoding, tcpTransport); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:32:19.257

MonoTouch 不附带`System.ServiceModel.Nettcp.dll`组件。

这不是 Silverlight 2-4 的 Silverlight**核心**组件的一部分（即 Moonlight 实施和交付）。

注意：也许它是 Microsoft 允许开发人员重新分发的**额外**SDK 程序集之一（即，它不是与 Silverlight 本身一起安装的，而是与基于 SL 的应用程序 .xap 一起安装的）。在这种情况下，您可能想用 MonoTouch 尝试这个组件，看看它是否有效（因为这种情况通常适用于 Moonlight）。

# php - 无法在 PHP 中获取 CKeditor 的发布值

> ID：12400706
> 
> 赞同：0
> 
> 时间：2012-09-13T06:35:19.803
> 
> 标签：php, ckeditor

下面是我如何在 index.php 中创建 CKeditor（我将它与 CKfinder 一起使用）：

```
< textarea id="text" name="text" >

< /textarea >

       <?php
        include_once 'ckeditor/ckeditor.php';
        require_once 'ckfinder/ckfinder.php' ;
        $ckeditor = new CKEditor();
        $ckeditor->basePath  = 'ckeditor/' ;
        CKFinder::SetupCKEditor( $ckeditor, 'ckfinder/' ) ;
        $config['height'] = '300';
        $ckeditor->editor('text', $initialValue, $config);
        ?> 
```

并通过此按钮将编辑器的值提交给下面的 ajax 函数：

（ `< a onclick="submit();" > Send < /a > == >`这完美地调用了ajax函数）

```
 function submit()
    {
    var textbox= CKEDITOR.instances.text.getData();
    $.ajax({
            type: "POST",
            url: "index2.php",
            data: "textbox="+textbox,
            error: function(){

              alert('Error while loading');
          },
                success: function(data){
                $('#content').html(data);
      }
      });
} 
```

在 index2.php 我试图将值作为

```
 $textbox= $_POST['textbox']; 
```

它没有用。我也试图通过

```
 $textbox= stripslashes($_POST['textbox']) ;
   $textbox=mysql_real_escape_string($textbox); 
```

它也没有工作。我不知道如何处理这个问题。任何想法将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:12:55.683

我在使用 CKEditor 时遇到问题，并在这些值包含特殊字符时发布它的值。在我的情况下，它发生在 a`&nbsp;`在编辑器的内容中时。它“杀死”了 url，因为`?data=blabla&nbsp;`它是一个格式错误的 url。我使用 encodeURIComponent() 来确保不会发生这样的事情。

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)

不确定这是否正是您的问题（现在；），但您可能也想寻找这个。

# charts - 如何在 invientcharts 中隐藏 Y 轴值

> ID：12400714
> 
> 赞同：0
> 
> 时间：2012-09-13T06:36:34.280
> 
> 标签：charts, vaadin

有没有办法隐藏 InvientChart NumberYAxis？yaxis 在逻辑分析仪显示上没有意义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:59:21.357

不知道简单地用一种方法隐藏，但这应该可行。

```
InvientChartsConfig.YAxisDataLabel label = new InvientChartsConfig.YAxisDataLabel(true);
label.setFormatterJsFunc("function() { return ''; }");
yaxis.setLabel(label); 
```

它应该用空格替换数值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T09:05:22.023

@miq，抱歉回复晚了，我不知道这是否有效。但是经过认真的挣扎，我做到了..

```
YAxisDataLabel yLabel=new YAxisDataLabel();
yLabel.setEnabled(false);
yAxis.setLabel(yLabel); 
```

它的工作就像魅力......无论如何感谢您的回答。我会考虑这一点，并会在未来尝试..

# java - 如何将 Maven 项目导入 Eclipse 工作区？

> ID：12400715
> 
> 赞同：1
> 
> 时间：2012-09-13T06:36:39.943
> 
> 标签：java, eclipse

是否有任何 Maven 命令或 DOS 命令将 Maven 项目导入 Eclipse 工作区？

我们可以使用以下步骤在eclipse中手动完成

1.  在 Java 透视图中打开 Eclipse IDE
2.  在包资源管理器中 --> 右键单击​​--> `Import`--> `Existing maven projects`--> `Browse for project`--> `next`--> （如果有任何错误，请通过添加到 POM 来修复）--> `Finish`。

我们可以通过使用任何命令来实现上述目标吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T06:52:01.260

您可以执行：

```
mvn eclipse:eclipse 
```

这将生成所有 eclipse 配置文件。然后您可以在 IDE 中经典地导入项目。

但是如果不从 IDE 导入，就没有命令可以让 eclipse 知道您的项目。

# android - 如何从 Picasa 和 Flicker 获取用户照片？

> ID：12400722
> 
> 赞同：-2
> 
> 时间：2012-09-13T06:37:02.227
> 
> 标签：android, flickr, photos, picasa

我正在做一个项目，我需要将照片集成`picasa`到`Flicker`我的应用程序中。

`Picasa`

我搜索了一些链接[http://code.google.com/apis/picasaweb/overview.html](http://code.google.com/apis/picasaweb/overview.html)但它对我不起作用。该链接中没有android教程，请帮助我解决这个问题。如果有任何机构帮助我完成示例项目，那将不胜感激。

`flicker`

在此通过传递从 Flickr 网站创建的用户 ID，能够从特定帐户获取图像。但我不知道如何通过从我的应用程序传递用户名和密码来获取用户 ID。

**编辑：**我非常感谢任何工作示例，它告诉我如何从 Android 逐步连接到 Picasa。我浏览了互联网并下载了大量带有示例的 git 存储库三天，总是发现已弃用、不工作或不是 Android 示例，甚至是断开的链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T06:50:31.590

我以前使用`flickr on android`过并推荐使用`JSON api.` **用户照片集列表**

[http://api.flickr.com/services/rest/?method=flickr.photosets.getList&api_key=](http://api.flickr.com/services/rest/?method=flickr.photosets.getList&api_key=) **API KEY**8&user_id=**用户 ID** @N07&format=json&nojsoncallback=1

**用户照片集中的照片列表**

[http://api.flickr.com/services/rest/?method=flickr.photosets.getPhotos&api_key=](http://api.flickr.com/services/rest/?method=flickr.photosets.getPhotos&api_key=) **API KEY**8&photoset_id=**PHOTOSET ID** &format=json&nojsoncallback=1

**用户公开照片列表**

[http://api.flickr.com/services/rest/?method=flickr.people.getPublicPhotos&api_key=](http://api.flickr.com/services/rest/?method=flickr.people.getPublicPhotos&api_key=) **API KEY** &user_id=**用户 ID** @N07&format=json&nojsoncallback=1

RE`Picasa`我建议查看他们的 API Docs [Picasa Developers](https://developers.google.com/picasa-web/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T06:44:31.037

您想使用 Flickr/Picasa 的 API 来获取有关用户的某些详细信息。您必须向服务提供商注册并获取 API KEY 才能使用其服务。

**闪烁** [Flickr Android API](http://code.google.com/p/flickrj-android/)

**PicasaWeb** [Picasa 网络数据相册 API](https://developers.google.com/picasa-web/)

您应该阅读手册、代码示例并绕过一些开源项目，以很好地掌握 API 功能和机会。

# objective-c - 程序不记得值/不能返回值（XCode）

> ID：12400727
> 
> 赞同：1
> 
> 时间：2012-09-13T06:37:25.143
> 
> 标签：objective-c, xcode, random, return

嗨，我有一个小问题。我的程序不记得通过单击第一个按钮生成的随机值。但我想在另一个按钮中使用该值，这就是问题所在。如果我尝试返回那个值，程序会说这个方法不应该返回值。这是我的代码的样子：

```
int randomprocess;
- (IBAction)button:(id)sender {
randomprocess = rand() % 3;
// Do something    }
- (IBAction)b1:(id)sender {
if (randomprocess == 0) {
    // Do something
} else {
    // Do something else
} 
```

如果我不写第一行，第二个按钮将无法识别“randomprocess”。现在，当我声明它时，它仍然为零或我将其设置为相等的任何数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T06:58:25.230

可能，您已经声明了一个同名的 iVar / 属性，它涵盖了您的全局变量。仅使用全局变量**或**iVar。

方法或对象头之外的声明`int randomprocess;`使其成为“普通”全局 C 变量。

iVar 是与您的对象相关的**局部**变量。属性（通常）是具有某些访问器的 iVar。如果您同时声明了全局变量和局部变量（resp，iVar），则全局变量不可见，但被局部变量覆盖。

一般来说，使用全局变量是个坏主意。如果必须，请将其设为静态。更好的是使用 iVar。

**编辑** 要创建一个属性，您的标题应如下所示：

```
@interface myclass
@property (nonatomic,assign) int randomprocess;
// ...
@end 
```

对于实施：

```
@implementation myclass
@synthesize randomprocess; // only for XCode < 4.4 needed
// ...

- (IBAction)button:(id)sender {
   self.randomprocess = rand() % 3;
 // Do something    
 }
- (IBAction)b1:(id)sender {
   if (self.randomprocess == 0) {
    // Do something
   } else {
    // Do something else
   }
 //
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T20:53:10.080

或者你应该像这样声明你的变量

```
@interface myclass {
 int randomprocess;
} 
```

在 .h 文件中或：

```
@implementation myclass {
 int randomprocess;
} 
```

在 .m 文件中

这将声明没有属性的内部变量（iVar）

如果您将在 .m 文件（第二个示例）中执行此操作，则此变量将仅在当前文件中可用

If you will do this inside .h file (1st sample) this variable will be available for current .m and in subclasses as well

# windows-phone-7 - 剪切 MP3 文件并将其设置为铃声

> ID：12400730
> 
> 赞同：0
> 
> 时间：2012-09-13T06:37:33.893
> 
> 标签：windows-phone-7, mp3

我想开发一个 WP7 应用程序来从标记位置剪切/拆分 MP3 文件。我尝试寻找一些要拆分的 API，但没有运气。如果有人能在以下几点上指导我，我真的很感激。

1.  是否有任何控件可供 WP7 播放和标记 MP3 文件以进行拆分。
2.  是否有任何 API 可以剪切 MP3 文件中的选定部分。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:47:30.400

我现在知道 Windows Phone 库为此，但是......

也许您可以在服务器上执行此操作，因为有很棒的 MP3 C# 库可用

[Mp3Sharp](http://robburke.net/mle/mp3sharp/)

如果您可以从服务器获取/从服务器获取 mp3，那就太好了。要在设备上播放它，请使用[另一个 StackOverflow 问题](https://stackoverflow.com/questions/4021094/play-an-audio-file-in-windows-7-phone)的建议。启用选择歌曲的一部分，将信息发送到服务器，然后服务器将返回剪切的 mp3 文件。

对我来说听起来不错，至少在理论上。（您没有发布任何代码，所以我想我们只是在理论化；）

# wpf - 如何将项目文件夹添加到wix

> ID：12400731
> 
> 赞同：0
> 
> 时间：2012-09-13T06:37:47.137
> 
> 标签：wpf, wix, windows-installer, directory, wix3.6

如何将项目文件夹添加到 wix setup 以便在安装时所有引用都可用

我已经创建了一个 wix 安装项目，它工作正常我的问题是当我向项目添加新引用时的引用，它将如何在已安装的文件夹中可用，我可以使用添加它

但我的问题是关于添加包含所有引用的整个文件夹，这样我就不想一次又一次地添加它..提前谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T18:39:55.247

使用**[石蜡](http://www.wintellect.com/cs/blogs/jrobbins/archive/2007/10/21/wix-a-better-tallow-paraffin.aspx)**

您可以指定要包含在安装程序中的所有文件类型、文件夹等

# xml - 使用 XSLT 将标记值从一个 XML 复制到另一个

> ID：12400732
> 
> 赞同：0
> 
> 时间：2012-09-13T06:37:49.163
> 
> 标签：xml, xslt

我有两个 xml 文件，比如**file1.xml**，如下所示：

```
<?xml version="1.0"?>
<root >
    <text id='a'>This is to be replaced</text>
    <note>This should not be touched</note>
    <text id='b'>This is intact</text>
</root> 
```

**file2.xml**如下

```
<?xml version="1.0"?>
<root >
    <text id='a'>Replacement Text</text>
    <note>This is a personal note</note>
</root> 
```

我期望一个格式的输出 xml 文件：

**输出.xml**

```
<?xml version="1.0"?>
<root>
    <text id='a'>Replacement Text</text>
    <note>This should not be touched</note>
    <text id='b'>This is intact</text>
</root> 
```

请帮助我使用 xsl 以获得所需的输出。这不是家庭作业，我正在尝试理解 xslt。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:26:08.983

如果您不知道您的 XSLT 处理器版本，请运行此转换并报告结果...

```
<xsl:stylesheet version = "1.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:msxsl="urn:schemas-microsoft-com:xslt"> 
<xsl:output method = "text" /> 
<xsl:template match = "/" > 
 <xsl:text>Version :  </xsl:text><xsl:value-of select = "system-property('xsl:version')" /><xsl:text >&#x0A;</xsl:text> 
 <xsl:text>Vendor  :  </xsl:text><xsl:value-of select = "system-property('xsl:vendor')" /><xsl:text >&#x0A;</xsl:text> 
 <xsl:text>URL     :  </xsl:text><xsl:value-of select = "system-property('xsl:vendor-url')" /><xsl:text >&#x0A;</xsl:text> 
 <xsl:text>MS ver  :  </xsl:text><xsl:value-of select = "system-property('msxsl:version')" /><xsl:text >&#x0A;</xsl:text> 
 </xsl:template> 
</xsl:stylesheet> 
```

* * *

# XSLT 1.0 解决方案

这未经测试，但它应该工作......

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes" omit-xml-declaration="yes" />
<xsl:strip-space elements="*" />
<xsl:param name="url-of-file2" />
<xsl:variable name="file2" select="document($url-of-file2)" />  

<xsl:template match="@*|node()" name="ident">
 <xsl:copy>
  <xsl:apply-templates select="@*|node()"/>
 </xsl:copy>
</xsl:template>

<xsl:template match="*[@id]">
  <xsl:variable name="ele" select="name()" />
  <xsl:variable name="id" select="@id" />
  <xsl:variable name="replacement-node" select="($file2//*[name()=$ele][@id=$id])[1]" />
  <xsl:choose>
    <xsl:when test="$replacement-node">
     <xsl:copy>
      <xsl:apply-templates select="@*"/>
      <xsl:copy-of select="$replacement-node/text()"/>
      <xsl:apply-templates select="*|comment()|processing-instruction()"/>
     </xsl:copy>
    </xsl:when>
  <xsl:otherwise><xsl:call-template name="ident" /></xsl:otherwise>
  </xsl:choose>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T13:10:07.967

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:variable name="vReps" select="document('file:///c:/temp/delete/file2.xml')/*/*[1]"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="text[@id='a']/text()">
  <xsl:value-of select="$vReps"/>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于此 XML 文档**（提供的 file1.xml）时：

```
<root>
    <text id='a'>This is to be replaced</text>
    <note>This should not be touched</note>
    <text id='b'>This is intact</text>
</root> 
```

**并让提供的 file2.xml 位于`c:\temp\delete\file2.xml`：**

```
<root>
    <text id='a'>Replacement Text</text>
    <note>This is a personal note</note>
</root> 
```

**产生想要的正确结果：**

```
<root>
   <text id="a">Replacement Text</text>
   <note>This should not be touched</note>
   <text id="b">This is intact</text>
</root> 
```

**说明**：

1.  **[身份规则](http://dpawson.co.uk/xsl/sect2/identity.html)**的使用和覆盖。

2.  使用标准 XSLT 函数**[`document()`](http://www.w3.org/TR/1999/REC-xslt-19991116#function-document)**。

# mysql - 选择具有关键字名称的列

> ID：12400735
> 
> 赞同：10
> 
> 时间：2012-09-13T06:38:01.333
> 
> 标签：mysql

我有一个名为“测试”的表

它包含一个名为“AND”的列

为此，我使用以下查询

```
insert into test values ('a','abc');
insert into test values ('b','def'); 
```

现在我想从“测试”表中选择我的“与”列

查询将`select AND from test;`不起作用，因为 AND 是关键字

我试过了

```
select "AND" from test;
select 'AND' from test; 
```

两个查询都返回错误的结果，如下所示

![在此处输入图像描述](../Images/ea62ac2d09c45e8ee5a03bd30b98918a.png)

如何选择我的“AND”列？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-13T06:39:02.693

用于`backtick`转义关键字。就像您创建表格的方式一样。使用双引号或单引号会将其解析为`string`这就是您获得两条记录的原因`and`

```
select `AND` from test; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-13T06:45:19.597

1.  不要创建名称为关键字的列。

2.  如果您确实使用这样的名称创建列，请使用反引号（仅限 MySQL）或双引号（SQL 标准）将名称括起来。我不确定您是否需要打开某种机制才能在 MySQL 中使用双引号。这将创建一个“分隔标识符”。

    ```
    SELECT `AND` AS a, "AND" AS b
      FROM test; 
    ```

也可以看看：

*   [SQL 标准对反引号有什么看法](https://stackoverflow.com/questions/10573922/what-does-the-sql-standard-say-about-usage-of/10574031#10574031)
*   [用于转义列名的 SQL 标准](https://stackoverflow.com/questions/2901453/sql-standard-to-escape-column-names)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T07:07:03.387

这是一个很老的问题并解决了。[在这里阅读更多](https://stackoverflow.com/questions/285775/how-to-deal-with-sql-column-names-that-look-like-sql-keywords)。

但你仍然可以试试这个：

```
select your_tablename.column_name from table_name; 
```

你的代码： -

```
select test.AND from test; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T06:44:51.860

如果要使用保留字作为列，则必须在保留字列周围使用反引号......

在您的情况下，您必须这样做：

```
select `AND' from test; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T06:49:53.727

从你的问题：

```
CREATE TABLE `test` (
    `count` VARCHAR(50) NULL DEFAULT NULL,
    `AND` VARCHAR(50) NULL DEFAULT NULL
----^---^ Why do you use `backtick` (`) in CREATE TABLE statement?
) 
```

您需要`backtick`在`SELECT`语句中使用相同的方式。

```
SELECT `AND` FROM test;
-------^---^----------- 
```

请参阅[MySQL：保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-13T06:40:26.040

如果你使用 select setement using "" 它会选择一个给定的字符串，所以你必须像在 mssql 中一样给出一个列名，你必须使用

```
select [AND] from test; 
```

或在 mysql syntex 中`AND`从测试中选择；

# php - Facebook 应用好友的活动

> ID：12400736
> 
> 赞同：-1
> 
> 时间：2012-09-13T06:38:02.723
> 
> 标签：php, facebook, facebook-graph-api, facebook-opengraph

从登录用户的朋友或也安装了该应用程序的特定朋友那里检索特定应用程序的最近操作/对象列表的正确方法是什么？

类似于 Spotify 应用程序如何在右侧显示一个提要，其中包含所有登录用户的朋友的操作，例如“用户听了 Y 艺术家的 X 歌曲”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T18:14:14.897

如果您知道应用程序的命名空间和操作类型，则可以检索操作列表。如果它是您自己的应用程序，这应该很简单。如果是其他应用程序，您需要弄清楚他们使用的是什么。这里有类似的问题 -
[如何使用 Facebook Graph API 从我的应用中获取活动？](https://stackoverflow.com/questions/9814025/how-to-get-activity-from-my-app-with-facebook-graph-api)
[http://facebook.stackoverflow.com/questions/7553714/read-custom-action-from-the-open-graph-beta](http://facebook.stackoverflow.com/questions/7553714/read-custom-action-from-the-open-graph-beta)
这里有更多信息 - [https://developers.facebook.com/docs/opengraph/actions /#读](https://developers.facebook.com/docs/opengraph/actions/#read)。

# iis-7 - Windows 2003 到 Windows 2008 迁移网站

> ID：12400742
> 
> 赞同：0
> 
> 时间：2012-09-13T06:38:21.630
> 
> 标签：iis-7, asp-classic, windows-2003-webserver

请尝试给我一些关于将我的应用程序从 win 2003 迁移到 win 2008（32 位）的建议或解决方案。问题是我在启动标准应用程序时不断收到错误“ActiveX 无法创建对象”错误。我无法登录我的网站，可能是因为它无法创建 COM+ 应用程序。查看事件日志时，似乎有来自 DistributedCOM 的警告。

到目前为止，我在设置 win 2008 服务器时已经完成了以下操作。不知何故，我在 win 2003 中设置时也是这样做的，效果很好。

*   在 IIS 中配置的网站
*   在 COM+ 服务中安装 VB6 DLL 应用程序
*   选中 COM+ 服务中的“允许 IIS 固有属性”复选框

也许你遇到过这种情况，所以我会试试运气，希望我能得到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:32:10.777

您可能需要在 32 位模式下运行您的应用程序。

尝试这个：

IIS 管理器->

->

应用程序池->

->

高级设置）：

“启用 32 位应用程序”>> True

此外，如果有帮助，您可以尝试更多信息和事情：

[如何获得在 IIS 7.0 下运行的经典 asp 应用程序的指南](https://stackoverflow.com/questions/637326/how-to-guide-for-getting-a-classic-asp-application-working-under-iis-7-0)

# php - cURL 返回空白

> ID：12400747
> 
> 赞同：3
> 
> 时间：2012-09-13T06:38:45.030
> 
> 标签：php, curl, file-get-contents

我正在尝试以下代码，因为由于重定向而无法使用 php file_get_contents，但这没有返回任何内容：

```
function file_get_contents_curl($url) {
    $ch = curl_init();

    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)");
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);

    $data = curl_exec($ch);

    curl_close($ch);

    return $data;
}

$url = 'http://www1.macys.com/shop/product/michael-michael-kors-wallet-jet-set-monogram-ziparound-continental?ID=597522&CategoryID=26846&RVI=Splash_5';
$html = file_get_contents_curl($url);
echo "html is ".$html; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-13T06:49:54.537

快速查看以下输出：

`curl --max-redirs 3 -L -v $url`显示 302 重定向重定向到相同的 url .. 同时设置 cookie。

设置 cookie jar 似乎可以“修复”它：

`curl -c /tmp/cookie-jar.txt --max-redirs 3 -L -i $url`

所以..启用cookie（jar）

编辑：

您可以在现有代码中添加一行以使其工作：

```
curl_setopt($ch, CURLOPT_COOKIEJAR, dirname(__FILE__).DIRECTORY_SEPERATOR.'c00kie.txt'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T06:46:46.400

您可以使用[`CURLOPT_VERBOSE`](http://php.net/manual/en/function.curl-setopt.php)选项来调试您的请求。

> 将输出写入 STDERR，或使用 CURLOPT_STDERR 指定的文件。

```
$curl_debug_file = __DIR__.DIRECTORY_SEPARATOR.'curl.log';
$fh = fopen($curl_debug_file, "w+");
curl_setopt($handle, CURLOPT_STDERR, $fh);
curl_setopt($ch, CURLOPT_VERBOSE, true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T06:45:15.290

如果你跑

```
echo curl_error($ch); 
```

在 curl_exec 之后，你会看到：

> 最多 (20) 次重定向

找出重定向的原因和位置

# ios - 视图控制器中的透明矩形

> ID：12400756
> 
> 赞同：2
> 
> 时间：2012-09-13T06:39:36.657
> 
> 标签：ios, ipad, interface-builder, cgrect

我想实现类似于圆形 html 表单的效果，其透明背景类似于下图（不是鼠标悬停文本，只是背景中的矩形，并且具有不透明度）。

我不知道该怎么做，我玩弄过，`CGRect`但我什至无法让他们上来。我正在为 iPad 使用基于标签导航的模板。

您能否指出一些可以让我开始的资源`CGRect`？

![在此处输入图像描述](../Images/fc314586f084e10eb10c53e853c0709c.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T03:52:31.373

**请注意**，我将假设您在两个表单域后面的灰色背景矩形之后。不是电子邮件字段周围的蓝色边框。我假设您想要实现类似于此的目标：

![iPad截图](../Images/5caaa18b9c13fad8d5162b59ef5477cd.png)

您需要创建自定义 UIView 子类，该子类包含或直接位于表单字段和按钮后面。根据渐变和角半径的复杂性，您可以通过以下两种方式之一实现类似的效果。

### 1.使用CALayer的`cornerRadius`and`borderColor`和and`borderWidth`

此视图的简单实现可能是：

```
#import "RoundedView.h"
#import <QuartzCore/QuartzCore.h>

@implementation RoundedView

- (id)initWithFrame:(CGRect)frame
{
  if ((self = [super initWithFrame:frame])) {
    self.backgroundColor = [UIColor grayColor];
    self.layer.borderColor = [[UIColor lightGrayColor] CGColor];
    self.layer.cornerRadius = 10;
  }
  return self;
}

@end 
```

### 2.覆盖`drawRect:`画圆角

您将使用`UIBezierPath`圆角绘制矩形，填充并描边。

```
@implementation DrawnBackgroundView

- (id)initWithFrame:(CGRect)frame
{
  if ((self = [super initWithFrame:frame])) {
    self.backgroundColor = [UIColor clearColor];
  }
  return self;
}

- (void)drawRect:(CGRect)rect
{
  CGFloat lineWidth = 2;
  CGFloat selfWidth = self.bounds.size.width - (lineWidth * 2);
  CGFloat selfHeight = self.bounds.size.height - (lineWidth * 2);

  UIColor* lightGray = [UIColor colorWithRed: 0.84 green: 0.84 blue: 0.84 alpha: 1];

  UIBezierPath* roundedRectanglePath = [UIBezierPath bezierPathWithRoundedRect: CGRectMake(lineWidth, lineWidth, selfWidth, selfHeight) cornerRadius: 10];
  [lightGray setFill];
  [roundedRectanglePath fill];

  [lightGray setStroke];
  roundedRectanglePath.lineWidth = lineWidth;
  [roundedRectanglePath stroke];
}

@end 
```

上面的屏幕截图取自[GitHub 上](https://github.com/jessedc/RoundedBackgroundView)的一个快速演示项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T12:42:13.040

从基于视图的模板开始，创建一个名为 Drawer 的项目。将 UIView 类添加到您的项目中。将其命名为 SquareView（.h 和 .m）。

双击 DrawerViewController.xib 在 Interface Builder 中打开它。使用 Class 弹出菜单在 Identity Inspector (command-4) 中将通用视图更改为 SquareView。保存并返回 Xcode。

将此代码放在 SquareView.m 文件的 drawRect: 方法中，以绘制一个大的、弯曲的、空的黄色矩形和一个小的、绿色的、透明的正方形：

```
- (void)drawRect:(CGRect)rect;
{   
    CGContextRef context = UIGraphicsGetCurrentContext(); 
    CGContextSetRGBStrokeColor(context, 1.0, 1.0, 0.0, 1.0); // yellow line

    CGContextBeginPath(context);

    CGContextMoveToPoint(context, 50.0, 50.0); //start point
    CGContextAddLineToPoint(context, 250.0, 100.0);
    CGContextAddLineToPoint(context, 250.0, 350.0);
    CGContextAddLineToPoint(context, 50.0, 350.0); // end path

    CGContextClosePath(context); // close path

    CGContextSetLineWidth(context, 8.0); // this is set from now on until you explicitly change it

    CGContextStrokePath(context); // do actual stroking

CGContextSetRGBFillColor(context, 0.0, 1.0, 0.0, 0.5); // green color, half transparent
CGContextFillRect(context, CGRectMake(20.0, 250.0, 128.0, 128.0)); // a square at the bottom left-hand corner
} 
```

您不必调用此方法即可进行绘图。当程序启动并激活 NIB 文件时，您的视图控制器将告诉视图至少绘制一次自己。

# iphone - 重放核心动画动画？

> ID：12400757
> 
> 赞同：1
> 
> 时间：2012-09-13T06:39:40.540
> 
> 标签：iphone, objective-c, core-animation

我想知道，如果我想重播已经添加到图层中的动画怎么办？我是否需要在每次播放时都将动画添加到图层，或者有办法重播我已经添加的动画？

谢谢，抒情诗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:28:23.230

动画完成后，要重复动画，您必须像这样添加新动画：

```
[yourView.layer removeAllAnimations];
[yourView.layer addAnimation:yourAnimation forKey:@"Key here"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T07:03:40.403

您可以将动画配置为在完成使用该属性之前重复一定次数，`repeatCount`但是如果要重复已经完成的动画，则必须再次将其添加到图层中。

# python - 连续输出图片？

> ID：12400772
> 
> 赞同：1
> 
> 时间：2012-09-13T06:40:31.817
> 
> 标签：python, matplotlib

我有 Python 代码，它使用 pyplot 绘制一个图形，然后我关闭该图形并出现下一个图形，然后我关闭和下一个图形等。

在 Python 中是否可以像短动画一样让输出窗口一个接一个地出现？

# asp.net-mvc - 升级到 MVC 4.0 后 Microsoft.Web.Mvc 出现错误

> ID：12400780
> 
> 赞同：2
> 
> 时间：2012-09-13T06:41:34.970
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我已将 MVC 站点升级到 MVC 4.0 版、.NET Framewrok 4.5 版。这样做之后，我的视图中出现了运行时错误：

方法 Microsoft.Web.Mvc.LinkExtensions.ActionLink：类型参数“ContactCentre.Controllers.LogOnController”违反类型参数“TController”的约束。

以下是引发异常的代码：

```
Url.Action<LogOnController>(c => c.LogOff()) 
```

约束 TController 是检查类型是否为 Controller 类型。我的控制器 LogOnController 确实继承自 Controller，因此满足了该约束。

我认为问题出在我的 Microsoft.Web.Mvc 库版本上。这是运行时版本 v4.0.30319，版本 3.0.0.0。我认为这意味着它的目标是 MVC 版本 3。

是否有与 MVC 版本 4 兼容的 Microsoft.Web.Mvc 版本？还是我在叫错树？欢迎任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T12:41:51.387

Microsoft 发布的 Mvc4Futures NuGet 包自 2012 年 11 月 30 日起可用。它包含 Microsoft.Web.Mvc.dll 版本 4.0.0.0。

您可以按如下方式安装它：

*   打开包管理器控制台
*   从默认项目菜单中选择您的 Web 应用程序
*   运行以下命令：`install-package mvc4futures`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T09:32:30.520

我在我的配置文件中添加了一个 assemblyBinding 重定向，这解决了这个问题。

```
<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="3.0.0.0" newVersion="4.0.0.0"/>
    </dependentAssembly>
</assemblyBinding> 
```

# c# - 如何使用 OleDbConnection 将数据插入 excel

> ID：12400789
> 
> 赞同：2
> 
> 时间：2012-09-13T06:42:39.500
> 
> 标签：c#, excel

我有一个 excel 文件并在其中定义了两列 Date,Result。

我想用 c# 在其中插入数据。

我使用这段代码：

```
 string connectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + System.AppDomain.CurrentDomain.BaseDirectory + "\\Data\\sms log.xlsx;Extended Properties=Excel 12.0;";

            OleDbConnection myConnection = new OleDbConnection(connectionString);
          if(myConnection.State==System.Data.ConnectionState.Closed)  myConnection.Open();
            OleDbCommand myCommand = new System.Data.OleDb.OleDbCommand();
            myCommand.Connection = myConnection;
            myCommand.CommandText =string .Format( "Insert into TABLE  [Sheet1$](DateTime,Result)values('{0}','{1}')",DateTime.Now,false) ;
            myCommand.ExecuteNonQuery();
            myConnection.Close(); 
```

但我收到此错误：**INSERT INTO 语句中的语法错误。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:44:32.487

试试这个语法：

```
myCommand.CommandText = "Insert into [Sheet1$] (id,name) values('5','e')"; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-10-03T12:58:44.363

我希望你一切都好。您可以使用 EPPLus 框架。我粘贴了几个月前编写的示例代码。我这样，你不需要使用 Interop 或争吵拥有正确的 OLEDB 驱动程序。

```
 string fileNameOut = @"C:\ExcelFile.xlsx";

if (File.Exists(fileNameOut))
    File.Delete(fileNameOut);       // If the file exist, then detele the file

FileInfo newFile = new FileInfo(fileNameOut);

string startdateTmp  = startdate  + " 00:00:00.000";  // "2018-05-01 00:00:00.000"
string finishdateTmp = finishdate + " 23:59:59.999";  // "2018-05-31 23:59:59.999"

string querybody = "SELECT Convert(varchar(11), [ENROLLDATE], 103) AS [ENROLLDATE], [FIRSTNAME], [LASTNAME], [GENDER] FROM [dbo].[Demographics] WHERE [EnrollDate] >= '{0}' AND [EnrollDate] <= '{1}'";
string sqlquery = string.Format(querybody, startdateTmp, finishdateTmp);

SqlConnection sqlConnection = new SqlConnection(connectionString);
sqlConnection.Open();
SqlCommand command = new SqlCommand(sqlquery, sqlConnection);
command.CommandTimeout = 3600;  // Wait 3600=60 minutes

SqlDataReader reader = command.ExecuteReader();

ExcelPackage package = new ExcelPackage(newFile);
var wsDt = package.Workbook.Worksheets.Add(string.Format("All {0}:{1}", startdate, finishdate));
// Load the datatable and set the number formats...
wsDt.Cells["A1"].LoadFromDataReader(reader, true, "Demographics");

// close the reader.
reader.Close();
// close the connection with database.
sqlConnection.Close();

var headerCells = wsDt.Cells[1, 1, 1, wsDt.Tables[0].Columns.Count];
var headerFont = headerCells.Style.Font;
headerFont.Bold = true;  //headerFont.Italic = true;
//headerFont.SetFromFont(new Font("Calibri", 12, FontStyle.Bold));   //headerFont.Color.SetColor(Color.DarkBlue);

// Disable Autofilter
wsDt.Tables[0].ShowFilter = false;

// Formating numeric type or date column
wsDt.Column(1).Style.Numberformat.Format  = "dd/mm/yyyy";      // Columna: ENROLLDATE "yyyy-mm-dd" to "dd/mm/yyyy"
wsDt.Column(10).Style.Numberformat.Format = "dd/mm/yyyy";     // Columna: DOB "yyyy-mm-dd" to "dd/mm/yyyy"

// AutoFitColumns ALL columns
for (int i = 1; i <= wsDt.Tables[0].Columns.Count; i++)
    wsDt.Column(i).AutoFit();
/*
wsDt.Column(1).AutoFit();   // ENROLLDATE
wsDt.Column(2).AutoFit();   // FIRSTNAME
wsDt.Column(3).AutoFit();   // LASTNAME
wsDt.Column(4).AutoFit();   // AIRLINE
wsDt.Column(5).AutoFit();   // STATIONMODE
wsDt.Column(6).AutoFit();   // COUNTRYORIGIN
wsDt.Column(7).AutoFit();   // OBSERVATIONS
*/

// hide the gridlines of Worksheet
// wsDt.View.ShowGridLines = false; // true=show gridlines; false=hide gridlines.

// When Print the file, print letters and row numbers.
// wsDt.PrinterSettings.ShowHeaders = true;

// Print Title Row each pagebreak.
wsDt.PrinterSettings.RepeatRows = new ExcelAddress("1:1");

// set some document properties
package.Workbook.Properties.Title = "Enrollments Report";
package.Workbook.Properties.Author = "Kenny Mauricio";
package.Workbook.Properties.Comments = "Enrollments Report by Range";

// set some extended property values
package.Workbook.Properties.Company = "Kenny Mauricio";

// Set nee password over the file.
// package.Encryption.Algorithm = EncryptionAlgorithm.AES256;
// package.Encryption.Password = "Simple Pa$$word_1!!!";

// save the file.
package.Save(); 
```

# php - 从 https 切换到 http 时 RewriteRule 违反

> ID：12400792
> 
> 赞同：0
> 
> 时间：2012-09-13T06:42:49.693
> 
> 标签：php, apache, .htaccess, mod-rewrite, https

我在文件中写了很多**RewriteRule**`.htaccess`，但是当我从**https**切换到**http**页面时出现问题；它不遵循这些规则

**注意：**本地主机上一切正常，服务器上的问题<----**更新**

这是我的[网站](http://www.charityrummage.com)，目前所有链接都按照**RewriteRule*显示**

例如**关于我们**的页面链接显示为

```
http://www.mywebsite.com/about 
```

**但**

如果我在[`login page`](https://www.charityrummage.com/login)（打开`https`）并点击**关于我们**的页面，那么它会变成下面。

```
http://www.mywebsite.com/about?slug=about_us 
```

或者如果我点击左侧面板上的任何类别，那么它会出现

```
http://www.mywebsite.com/auction/category/1?cid=1 
```

**注意：** 即使鼠标悬停在页面上也会显示重写链接

以下是`.htaccess`包含所需信息的文件。

```
IndexIgnore *

RewriteEngine on
Options +FollowSymLinks 
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^auction/category/([0-9]+)/?$ bids.php?cid=$1 [NC]

RewriteRule ^login/?$ login.php [NC]
RewriteRule ^register/?$ register.php [NC]
RewriteRule ^logout/?$ logout.php [NC]

# static pages
RewriteRule ^about/?$ page.php?slug=about_us [NC]

# Rewrite to https
RewriteCond %{SERVER_PORT} !^443$ [OR]
RewriteCond %{HTTPS} off
RewriteCond %{REQUEST_URI} /login [OR]
RewriteCond %{REQUEST_URI} /do_login.php     
RewriteRule ^(.*) https://%{HTTP_HOST}%{REQUEST_URI} [R=301,NC,L,QSA]

# don't do anything for images/css/js (leave protocol as is)
RewriteRule \.(gif|jpe?g|png|ico|css|js)$ - [NC,L]

# traffic to http:// except some pages
RewriteCond %{SERVER_PORT} ^443$ [OR]
RewriteCond %{HTTPS} on
RewriteCond %{REQUEST_URI} !(/login|/do_login.php)
RewriteRule ^(.*) http://%{HTTP_HOST}%{REQUEST_URI} [R=301,NC,L,QSA] 
```

*注：* [`Here`](http://pastebin.com/YPiehZq1)是完整的`.htaccess`文件

请告诉我我哪里错了/失踪了？

我也有一些困惑

*   如果我更改重写 URL 的大小写（**登录或 lOgin 或 logiN**），那么它会给出错误吗？
*   用 all写**[NC,L]**是一种好习惯`RewriteRule`吗？
*   我应该在什么时候写 **[QSA]**？

* * *

# 更新

在所有答案的建议之后，**几乎`RewriteRule`解决了所有问题**，但现在有最后一个问题。

*   `/login`URL 总是变成`/login.php`.

下面是我更新的**.htaccess**

```
IndexIgnore *
Options -MultiViews
Options +FollowSymLinks

#mod_rewrite
RewriteEngine on
RewriteBase /

# Rewrite www to non www
RewriteCond %{HTTP_HOST} ^www.%{HTTP_HOST} [NC]
RewriteRule ^(.*)$ http://%{HTTP_HOST}/$1 [R=301,L]

# minimize the css on all http:// pages
<IfModule mod_rewrite.c>
    RewriteCond %{HTTPS} off
   RewriteRule ^(.*).css$ /csszip.php?file=$1.css [L]
</IfModule>

#switch over http to https

# Rewrite to https
RewriteCond %{SERVER_PORT} !^443$ [OR]
RewriteCond %{HTTPS} off

RewriteCond %{REQUEST_URI} (/login|/do_login)\.php [NC]
RewriteRule ^(.*) https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

# don't do anything for images/css/js (leave protocol as is)
RewriteRule \.(gif|jpe?g|png|ico|css|js)$ - [NC,L]

# traffic to http:// except some pages
RewriteCond %{SERVER_PORT} ^443$ [OR]
RewriteCond %{HTTPS} on

RewriteCond %{REQUEST_URI} !(/login|/do_login)\.php [NC]

RewriteRule ^(.*) http://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^login/?$ login.php [NC]
RewriteRule ^register/?$ register.php [NC]
# ...many other rules...with [NC] falg

RewriteRule ^auction/category/([^/.]+)/?$ bids.php?cid=$1 [NC]
RewriteRule ^about/?$ page.php?slug=about_us [NC]
# ...many more rules.... with [NC] flag 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T11:23:46.053

# HTTPS 建议

对于您的 HTTPS 问题，我将匹配端口或 HTTPS，因为存在与 HTTPS 标签相关的已知 apache 问题。

涵盖两者的匹配（如您编辑的答案所示）

```
RewriteCond %{SERVER_PORT} !^443$ [OR]
RewriteCond %{HTTPS} != on

##REWRITE RULE

RewriteCond %{SERVER_PORT} ^443$ [OR]
RewriteCond %{HTTPS} = on

##REWRITE RULE 
```

一个有效的点也是`%{REQUEST_URI}`不受任何替换的影响。

您目前使用它的方式，如果任何规则匹配，您会将它们发送到原始 url（在任何替换开始之前）。

如果您想在替换和匹配之后使用 url`$1`

* * *

回答您的**其他问题**：

# 如果我更改了重写 URL 的大小写，那么它会给出错误吗？

这是因为您`[NC]`不在 .htaccess 的 HTTPS 部分的重写条件下

你匹配`RewriteCond %{REQUEST_URI} /login [OR]`这只是寻找小写登录，如果你想接受大写登录追加NC。

* * *

# 用所有 RewriteRule 编写 [NC,L] 是一种好习惯吗？

不，这取决于您要做`[NC]`什么说不匹配此规则的大小写，如果您不想在该**规则**（或**条件**）上匹配大小写，则添加它。

不匹配大小写`[NC]`意味着 site.com/login.php = sYte.cOm/LoGin.PHP

`[L]`意味着如果这是真的，停止处理一切

* * *

# 我应该在什么时候写 [QSA] ？

QSA 适用于您有 ? 在您的替换中，您想将旧字符串附加到新 URL

考虑以下规则：

```
RewriteRule /pages/(.+) /page.php?page=$1 [QSA] 
```

使用该`[QSA]`标志，请求`/pages/123?one=two`将被映射到`/page.php?page=123&one=two`. 如果没有 [QSA] 标志，相同的请求将被映射到`/page.php?page=123`- 也就是说，现有的查询字符串将被**丢弃**。

如果您想**保留**任何额外的 get 参数，请使用 QSA。

* * *

另一个**问题**

# /login URL 总是变成 /login.php

发生这种情况的唯一方法是如果您`[R=301]`在代码中的某处有重定向，我唯一能看到的地方就是这一部分：

```
# Rewrite to https
RewriteCond %{SERVER_PORT} !^443$ [OR]
RewriteCond %{HTTPS} != on
RewriteCond %{REQUEST_URI} (/login|/do_login)\.php [NC]
RewriteRule ^(.*) https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L] 
```

这将**仅**与以下 URL 匹配

.php、/login.php、/do_login.php

我相信罪魁祸首正如我在第一个回应中概述的那样`%{REQUEST_URI}`

您的代码本质上是说，如果满足这些条件，请将它们发送到**https://theurltheywentto**，这不是您想要做的，您希望将它们发送到 /login。

您是否尝试过使用（如我的 https 部分所述）

```
RewriteRule ^(.*) https://%{HTTP_HOST}/login [R=301,L] 
```

或者也许（如果你有 /do_login）和其他选项

```
RewriteRule ^(.*).php https://%{HTTP_HOST}/$1 [R=301,L] 
```

其中 test.com/do_login.php 将变为[https://test.com/do_login](https://test.com/do_login)

你试试怎么样：

```
# Rewrite to https
RewriteCond %{REQUEST_URI} (/login|/do_login)\.php [NC]
RewriteCond %{HTTPS} != on
RewriteRule ^(.*)\.php https://%{HTTP_HOST}/$1 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T07:06:41.767

我想这可能对你有帮助

[.htaccess 将 https 重定向到 http 不起作用](https://stackoverflow.com/questions/2980324/htaccess-redirect-https-to-http-not-working)

对于最后一个问题，这可能对您有所帮助

[http://httpd.apache.org/docs/current/rewrite/flags.html](http://httpd.apache.org/docs/current/rewrite/flags.html)和

[http://www.addedbytes.com/download/mod_rewrite-cheat-sheet-v2/png/](http://www.addedbytes.com/download/mod_rewrite-cheat-sheet-v2/png/)

**编辑：** 您可以尝试使用

```
RewriteCond %{SERVER_PORT} ^443$
RewriteCond %{SERVER_PORT} !^443$ 
```

代替

```
RewriteCond %{HTTPS} on [NC]
RewriteCond %{HTTPS} off [NC] 
```

详情

请看这个链接，有人遇到过类似的问题。请看帖子的第二个回复

[http://www.webmasterworld.com/apache/3228459.htm](http://www.webmasterworld.com/apache/3228459.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T06:19:55.950

您可以通过创建域别名来解决此问题

您不能在 中执行此操作`.htaccess`，但在某个`http.conf` `<VirtualHost>`部分中您可以使用[`ServerName`](http://httpd.apache.org/docs/2.2/mod/core.html#serveralias)and[`ServerAlias`](http://httpd.apache.org/docs/2.2/mod/core.html#servername)指令来完成此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T13:03:34.703

您对 /about 的困惑是由于重定向到 %{REQUEST_URI}，在您进行替换时不会更改。捕获 URI 并使用 $1 如果您真的不想要该 URI，因为它在这一轮重写处理中开始。

# css - div 重叠页脚尽管 style="clear:both"？

> ID：12400794
> 
> 赞同：0
> 
> 时间：2012-09-13T06:43:03.720
> 
> 标签：css, templates, html, joomla

我正在为 joomla 2.5.6 编写自己的模板。我不确定这个问题是 Joomla 还是简单的 css 相关。

模板很简单，左边有一个侧边栏，右边有一个内容，还有一个页脚。现在当内容很短并且侧边栏上有几个模块时，模块会与页脚重叠。

它看起来像这样：

[http://imageshack.us/photo/my-images/269/screenshotmdph.jpg/](http://imageshack.us/photo/my-images/269/screenshotmdph.jpg/)

index.php 中的 html 如下所示：

```
<body>
<div class="container_6">
    <div class="grid_6 header">
        <a href="<?php echo $this->baseurl ?>" title=""><img src="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/assets/images/logo.png" alt="home" id="logo"/></a>
        <jdoc:include type="modules" name="menu" />
    </div>
</div>
<div class="container_6">
    <div class="grid_6 head_logo">
        <jdoc:include type="modules" name="header_logo" />
        <div class="left_menu">
            <div class="left_menu_content">
                <jdoc:include type="modules" name="left_menu" style="xhtml" />
            </div>
        </div>
        <div class="right_module">
            <jdoc:include type="modules" name="right" />
        </div>          
    </div>
</div>
<div class="container_6">
    <div class="grid_6">
        <div class="content">
            <div class="content_holder">
                <!-- beginn content -->
                <div class="container_6">
                    <div class="content_component">
                        <jdoc:include type="modules" name="breadcrumb" />
                        <jdoc:include type="component" />
                    </div>
                </div>
            </div>          
        </div>
    </div>
</div>
<div class="clear"></div>
<div class="container_6">
    <div class="grid_6">
        <div class="footer">
        </div>
    </div>
</div> 
```

我使用了 960-grid 系统，它上面有明确的类，但这里定义了其他类：

```
 .header {
 background: url('../images/top.png') no-repeat;
 height:93px;
 width:100%;
}

.head_logo {
    background: url('../images/shadow.png') repeat-y;
    padding-right:10px;
    padding-left:12px;
    z-index:1;
    position:absolute;
}
.left_menu {
    background: url('../images/menuBg.png') no-repeat;
    width:284px;
    min-height:611px;
    top:300px;
    z-index:2;
    position:absolute;
}
.right_module {
    width:180px;
    height:40px;
    padding:10px;
    background-color:#e9e9e9;
    top:300px;
    left:730px;
    z-index:3;
    position:absolute;
}

.content {
    background: url('../images/shadow.png') repeat-y;
    min-height:500px;

}
.content_holder {
    background-color:#e9e9e9;
    width:960px;
    margin-left: auto;
    margin-right: auto;
    min-height:500px;
}

.content_component {
    width:666px;
    padding:5px 5px 5px 284px;
    margin:0 5px;
}

#logo {
    margin:15px 0 0 25px;
    float:left;
}

.footer{
    background: url('../images/bottom.png') no-repeat;
    width:100%;
    height:92px;
} 
```

我对此感到迷茫，因为由于页脚上方的清除类它应该可以工作，但它没有..不幸的是我没有在线示例，它都是本地的

有人知道我怎么能找到错误吗？太感谢了

附加信息：

对不起，我忘记了，

```
<div class="clear"></div> 
```

在 grid.css 中定义，如下所示：

```
.clear {
  clear: both;
  display: block;
  overflow: hidden;
  visibility: hidden;
  width: 0;
  height: 0;
} 
```

我也编辑了问题标题，抱歉错了

**添加！！**

我想添加问题的屏幕截图。请看这里：

[http://www.bilder-hochladen.net/files/jegt-i-6f49-jpg.html](http://www.bilder-hochladen.net/files/jegt-i-6f49-jpg.html)

您会看到，.left-menu 以绝对位置定位并在 .head-logo 类内部开始。.left-menu 不应进入紫色页脚。

**如何告诉内容 div 与左侧菜单的高度相同？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:47:30.140

使用`Clear:both`代替`clear:all`which 不是 MHO 中的样式定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:10:06.237

从表面上看，您可能将“清晰”的 div 放置在错误的位置，但很难说，没有看到附加了所有 css 的实际页面，包括网格的。也许您可以实际生成页面，保存到本地磁盘并使其在线？

# reporting-services - 如何查看报告服务中的所有列

> ID：12400797
> 
> 赞同：0
> 
> 时间：2012-09-13T06:43:09.410
> 
> 标签：reporting-services, visual-studio-2005

我有一个包含很多列的报告服务文件。问题是我在布局视图中看不到所有这些，它们位于我可以滚动到的窗口部分之外。有没有人有关于如何编辑它们的提示？

我无法增加窗口的大小，我已经达到了 400 厘米的最大值。

我正在使用 Visual Studio 2005。

# java - WAS 7 的异常 java.util.zip.ZipFile.ensureOpenOrZipException

> ID：12400802
> 
> 赞同：0
> 
> 时间：2012-09-13T06:43:29.503
> 
> 标签：java, jsf, jakarta-ee, jax-ws, websphere-7

当我在 上部署应用程序时`WebSphere Application Server 7.0`，我遇到了异常并且需要花费太多时间来部署。经过几次部署后，服务器开始生成堆转储并耗尽内存。在我们的应用程序中，我们`JAX-WS`用于生成 Web 服务客户端。我们也`JSF 1.2`用于视图。任何建议表示赞赏。

```
000000ff annotations   E ClassScanner scanInputStream Exception occurred while scanning input stream:{0}
                                 java.util.zip.ZipException: ZipFile closed
    at java.util.zip.ZipFile.ensureOpenOrZipException(ZipFile.java:424)
    at java.util.zip.ZipFile.access$1100(ZipFile.java:40)
    at java.util.zip.ZipFile$ZipFileInputStream.read(ZipFile.java:456)
    at java.util.zip.ZipFile$1.fill(ZipFile.java:241)
    at java.util.zip.InflaterInputStream.read(InflaterInputStream.java:152)
    at java.io.BufferedInputStream.fill(BufferedInputStream.java:229)
    at java.io.BufferedInputStream.read1(BufferedInputStream.java:269)
    at java.io.BufferedInputStream.read(BufferedInputStream.java:328)
    at java.io.FilterInputStream.read(FilterInputStream.java:127)
    at java.io.PushbackInputStream.read(PushbackInputStream.java:180)
    at java.util.zip.InflaterInputStream.fill(InflaterInputStream.java:232)
    at java.util.zip.InflaterInputStream.read(InflaterInputStream.java:152)
    at java.util.zip.ZipInputStream.read(ZipInputStream.java:157)
    at java.io.FilterInputStream.read(FilterInputStream.java:127)
    at org.objectweb.asm.ClassReader.a(Unknown Source)
    at org.objectweb.asm.ClassReader.<init>(Unknown Source)
    at com.ibm.ws.amm.scan.util.ClassScanner.scanInputStream(ClassScanner.java:231)
    at com.ibm.ws.amm.AnnotativeMetadataManagerImpl$1.applyTo(AnnotativeMetadataManagerImpl.java:259)
    at com.ibm.wsspi.amm.scan.context.ArchiveInputStreamData.iterate(ArchiveInputStreamData.java:241)
    at com.ibm.ws.amm.AnnotativeMetadataManagerImpl.scan(AnnotativeMetadataManagerImpl.java:257)
    at com.ibm.ws.amm.AnnotativeMetadataManagerImpl.scan(AnnotativeMetadataManagerImpl.java:218)
    at com.ibm.ws.amm.commonarchive.AnnotationsProcessorImpl.merge(AnnotationsProcessorImpl.java:108)
    at org.eclipse.jst.j2ee.commonarchivecore.internal.impl.WARFileImpl.processAnnotations(WARFileImpl.java:297)
    at org.eclipse.jst.j2ee.commonarchivecore.internal.impl.WARFileImpl.getDeploymentDescriptor(WARFileImpl.java:243)
    at org.eclipse.jst.j2ee.commonarchivecore.internal.impl.WARFileImpl.getDeploymentDescriptor(WARFileImpl.java:173)
    at com.ibm.etools.commonarchive.impl.WARFileImpl.getExtensions(WARFileImpl.java:440)
    at com.ibm.etools.commonarchive.impl.WARFileImpl.getContextRoot(WARFileImpl.java:736)
    at org.eclipse.jst.j2ee.commonarchivecore.internal.strategy.Ear50NoDDImportStrategyImpl.loadDeploymentDescriptor(Ear50NoDDImportStrategyImpl.java:388)
    at org.eclipse.jst.j2ee.commonarchivecore.internal.strategy.Ear50NoDDImportStrategyImpl.importMetaData(Ear50NoDDImportStrategyImpl.java:253)
    at org.eclipse.jst.j2ee.commonarchivecore.internal.impl.EARFileImpl.getDeploymentDescriptor(EARFileImpl.java:377)
    at com.ibm.etools.commonarchive.impl.EARFileImpl.initializeModuleExtensions(EARFileImpl.java:641)
    at com.ibm.etools.commonarchive.impl.EARFileImpl.initializeAfterOpen(EARFileImpl.java:720)
    at org.eclipse.jst.j2ee.commonarchivecore.internal.impl.CommonarchiveFactoryImpl.openSpecificArchive(CommonarchiveFactoryImpl.java:1517)
    at org.eclipse.jst.j2ee.commonarchivecore.internal.impl.CommonarchiveFactoryImpl.openEARFile(CommonarchiveFactoryImpl.java:1205)
    at com.ibm.etools.commonarchive.impl.CommonarchiveFactoryImpl.openEARFile(CommonarchiveFactoryImpl.java:552)
    at com.ibm.ws.management.application.client.AppInstallHelper.getArchive(AppInstallHelper.java:271)
    at com.ibm.ws.management.application.client.AppInstallHelper.getEarFile(AppInstallHelper.java:157)
    at com.ibm.ws.webservices.admin.utils.CommonUtils.getMergeEar(CommonUtils.java:450)
    at com.ibm.ws.webservices.admin.deploy.ServiceIndexServerTask.performTask(ServiceIndexServerTask.java:126)
    at com.ibm.ws.management.application.SchedulerImpl.run(SchedulerImpl.java:284)
    at java.lang.Thread.run(Thread.java:735)

[9/13/12 12:00:44:138 IST] 000000ff annotations   E ArchiveInputStreamData iterate unable to open file iterator
                                 java.util.zip.ZipException: ZipFile closed
    at java.util.zip.ZipFile.ensureOpenOrZipException(ZipFile.java:424)
    at java.util.zip.ZipFile.access$1100(ZipFile.java:40)
    at java.util.zip.ZipFile$ZipFileInputStream.read(ZipFile.java:456)
    at java.util.zip.ZipFile$1.fill(ZipFile.java:241)
    at java.util.zip.InflaterInputStream.read(InflaterInputStream.java:152)
    at java.io.BufferedInputStream.fill(BufferedInputStream.java:229)
    at java.io.BufferedInputStream.read1(BufferedInputStream.java:269)
    at java.io.BufferedInputStream.read(BufferedInputStream.java:328)
    at java.io.FilterInputStream.read(FilterInputStream.java:127)
    at java.io.PushbackInputStream.read(PushbackInputStream.java:180)
    at java.util.zip.InflaterInputStream.fill(InflaterInputStream.java:232)
    at java.util.zip.InflaterInputStream.read(InflaterInputStream.java:152)
    at java.util.zip.ZipInputStream.read(ZipInputStream.java:157)
    at java.util.zip.ZipInputStream.closeEntry(ZipInputStream.java:103)
    at java.util.zip.ZipInputStream.getNextEntry(ZipInputStream.java:81)
    at org.eclipse.jst.j2ee.commonarchivecore.internal.helpers.NestedArchiveIteratorDirect.getInputStream(NestedArchiveIteratorDirect.java:117)
    at com.ibm.wsspi.amm.scan.context.ArchiveInputStreamData.iterate(ArchiveInputStreamData.java:238)
    at com.ibm.ws.amm.AnnotativeMetadataManagerImpl.scan(AnnotativeMetadataManagerImpl.java:257)
    at com.ibm.ws.amm.AnnotativeMetadataManagerImpl.scan(AnnotativeMetadataManagerImpl.java:218)
    at com.ibm.ws.amm.commonarchive.AnnotationsProcessorImpl.merge(AnnotationsProcessorImpl.java:108)
    at org.eclipse.jst.j2ee.commonarchivecore.internal.impl.WARFileImpl.processAnnotations(WARFileImpl.java:297)
    at org.eclipse.jst.j2ee.commonarchivecore.internal.impl.WARFileImpl.getDeploymentDescriptor(WARFileImpl.java:243)
    at org.eclipse.jst.j2ee.commonarchivecore.internal.impl.WARFileImpl.getDeploymentDescriptor(WARFileImpl.java:173)
    at com.ibm.etools.commonarchive.impl.WARFileImpl.getExtensions(WARFileImpl.java:440)
    at com.ibm.etools.commonarchive.impl.WARFileImpl.getContextRoot(WARFileImpl.java:736)
    at org.eclipse.jst.j2ee.commonarchivecore.internal.strategy.Ear50NoDDImportStrategyImpl.loadDeploymentDescriptor(Ear50NoDDImportStrategyImpl.java:388)
    at org.eclipse.jst.j2ee.commonarchivecore.internal.strategy.Ear50NoDDImportStrategyImpl.importMetaData(Ear50NoDDImportStrategyImpl.java:253)
    at org.eclipse.jst.j2ee.commonarchivecore.internal.impl.EARFileImpl.getDeploymentDescriptor(EARFileImpl.java:377)
    at com.ibm.etools.commonarchive.impl.EARFileImpl.initializeModuleExtensions(EARFileImpl.java:641)
    at com.ibm.etools.commonarchive.impl.EARFileImpl.initializeAfterOpen(EARFileImpl.java:720)
    at org.eclipse.jst.j2ee.commonarchivecore.internal.impl.CommonarchiveFactoryImpl.openSpecificArchive(CommonarchiveFactoryImpl.java:1517)
    at org.eclipse.jst.j2ee.commonarchivecore.internal.impl.CommonarchiveFactoryImpl.openEARFile(CommonarchiveFactoryImpl.java:1205)
    at com.ibm.etools.commonarchive.impl.CommonarchiveFactoryImpl.openEARFile(CommonarchiveFactoryImpl.java:552)
    at com.ibm.ws.management.application.client.AppInstallHelper.getArchive(AppInstallHelper.java:271)
    at com.ibm.ws.management.application.client.AppInstallHelper.getEarFile(AppInstallHelper.java:157)
    at com.ibm.ws.webservices.admin.utils.CommonUtils.getMergeEar(CommonUtils.java:450)
    at com.ibm.ws.webservices.admin.deploy.ServiceIndexServerTask.performTask(ServiceIndexServerTask.java:126)
    at com.ibm.ws.management.application.SchedulerImpl.run(SchedulerImpl.java:284)
    at java.lang.Thread.run(Thread.java:735) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T07:03:03.237

是啊，

经过长时间的研发终于得到了解决方案:)

下面的链接包含有用的信息。

[http://www-01.ibm.com/support/docview.wss?uid=swg1PK85322](http://www-01.ibm.com/support/docview.wss?uid=swg1PK85322)

我们所做的只是将应用程序的模块级别更改为 2.4 并将 wsdl 文件夹放在 WebContent 下。主要问题是由于部署时应用程序的注释处理。模块元数据的部署过程需要一个新步骤来扫描模块中打包的类中的 Java 注释数据。由于我们使用 JAX-WS 作为 WebServices 的客户端，它包括注释处理。JAX-WS 的注解处理需要读取 wsdl 文件来为每个部署生成更新客户端。在读取 wsdl 的过程中，它最初位于 WEB-INF 文件夹中，因此遇到了问题。我只是更改了 wsdl 的位置，现在它工作正常。

# css - CSS - Facebook 按钮在喜欢后下拉

> ID：12400806
> 
> 赞同：0
> 
> 时间：2012-09-13T06:43:44.250
> 
> 标签：css

我们有这个烦人的布局问题。请查看以下网址以查看它的实际效果：

[http://www.businesseventsydney.com.au/home-page-test.cfm](http://www.businesseventsydney.com.au/home-page-test.cfm)

类似 FB 的按钮整齐地位于顶部导航栏中。但是，一旦您单击“喜欢”并输入评论，按钮就会下拉到导航栏下方。如果刷新页面，按钮会再次正确显示。

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:50:40.713

简单修复：

```
.fb-like {width: 128px !important;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T06:52:02.907

嗨，现在将您的CSS**定义** 为这样`height``iframe`

```
.fb_iframe_widget iframe{
height:244px !important;
border-bottom:solid 1px #000;
}

!important must give to this 
```

结果是这个

![在此处输入图像描述](../Images/ad26ea882fe6e2a3769343d6e3bad2b1.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T06:50:11.390

元素从喜欢之前的宽度为 129 像素等变为喜欢后的宽度为 450 像素。

因此，您必须在允许最坏情况的位置（即 450 像素）使其适合您的设计。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T06:55:06.057

只需将您的`#top-nav-right`CSS 规则更改为：

```
#top-nav-right {
  float: right;
  overflow: hidden;
  padding: 4px 125px 0 0;
  width: 129px;
} 
```

# compiler-construction - ANTLR：如何在多个树语法之间保存树中的数据

> ID：12400807
> 
> 赞同：1
> 
> 时间：2012-09-13T06:43:49.950
> 
> 标签：compiler-construction, tree, antlr

我想创建一个非常简单的翻译器，将语言定义的一些源代码翻译成汇编。我已经创建了生成 AST 的词法分析器和解析器。我创建了一个树语法，它遍历树并使用动态范围跟踪诸如声明的变量之类的东西。

问题是我不能简单地使用一种树语法创建翻译器，因为我需要多次遍历树。第一遍是语义分析，第二遍是翻译成汇编。每遍都是不同的树语法。

我的问题是，如何从树中的语义分析传递中保留特定于节点的信息，以便我可以访问它以进行翻译传递？如何注释树？有没有办法可以将信息分配给树中的各个节点？我需要为此创建一个自定义树节点类吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T18:53:17.257

> 我需要为此创建一个自定义树节点类吗？

是的。

看：

*   [扩展 ANTLR3 AST](https://stackoverflow.com/questions/7635729/extend-antlr3-asts)
*   [http://www.antlr.org/wiki/display/ANTLR3/Tree+construction](http://www.antlr.org/wiki/display/ANTLR3/Tree+construction)

# mongodb - 如何解决错误：dbpath (/data/db/) 在 MongoDB 中不永久存在

> ID：12400808
> 
> 赞同：43
> 
> 时间：2012-09-13T06:44:08.000
> 
> 标签：mongodb, ubuntu

我已经在我的 Ubuntu 10.04 中安装了 mongodb。

我知道当使用命令“ **mongod** ”启动mongodb服务器时，它需要/data/db文件夹，可以通过创建“/data/db/”轻松解决。另一种方法是使用 mongod --dbpath "path" 提供您自己的路径，当我们打算为 db 提供我们自己的自定义路径时。

但是在浏览[http://docs.mongodb.org/manual/tutorial/install-mongodb-on-ubuntu/](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-ubuntu/)链接时，我发现有一个配置文件。

我对其进行了以下更改。

**# mongodb.conf**

```
dbpath=/EBS/Work/mongodb/data/db/

logpath=/EBS/Work/mongodb/mongodb.log

logappend=true 
```

但是，当我尝试使用**“mongod”**启动服务器时，它仍然会引发相同的错误，即**错误：dbpath (/data/db/) does not exist**。我想知道如何将我的 dbpath 永久重定向到我自己的自定义文件夹，因为每次您不想使用“mongod --dbpath path”键入路径。相反，我们希望对配置文件进行一些更改。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-09-13T07:14:02.463

假设您已按照说明安装[MongoDB 的打包版本](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-ubuntu/)，您应该开始和停止`mongod`使用`service`.

开始`mongod`：

```
 sudo service mongodb start 
```

停止`mongod`：

```
 sudo service mongodb stop 
```

如果使用service命令启动和停止，应该是使用配置文件：`/etc/mongodb.conf`.

### `mongod`从命令行开始

如果你`mongod`直接运行而不是使用服务定义，你还必须指定一个配置文件作为[命令行参数](http://www.mongodb.org/display/DOCS/Command+Line+Parameters)，如果你想使用一个：

```
mongod --config /etc/mongodb.conf 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-06-04T01:04:14.403

这就是我解决这个问题的方法，只需遵循他们的官方文档。[在这里](http://docs.mongodb.org/manual/tutorial/manage-mongodb-processes/)。

从终端一步一步（运行ubuntu）：

1.  cd 进入 /srv 文件夹 =>>`cd /srv/`
2.  制作目录=>>`mkdir -p mongodb`
3.  从 /srv/ 给新创建的 mongodb 文件夹正确的权限和组......
4.  最后，运行这个 =>`mongod --dbpath /srv/mongodb/`

“一步一步”复制终端......`:)`

```
 ~$ mongod 
    Tue Jun  3 20:27:39.564 [initandlisten] MongoDB starting : pid=5380 port=27017 dbpath=/srv/mongodb/ 64-bit host= -SVE1411EGXB
    Tue Jun  3 20:27:39.564 [initandlisten] db version v2.4.10
    Tue Jun  3 20:27:39.564 [initandlisten] git version: e3d78955d181e475345ebd60053a4738a4c5268a
    Tue Jun  3 20:27:39.564 [initandlisten] build info: Linux ip-10-2-29-40 2.6.21.7-2.ec2.v1.2.fc8xen #1 SMP Fri Nov 20 17:48:28 EST 2009 x86_64 BOOST_LIB_VERSION=1_49
    Tue Jun  3 20:27:39.564 [initandlisten] allocator: tcmalloc
    Tue Jun  3 20:27:39.564 [initandlisten] options: { dbpath: "/srv/mongodb/" }
    Tue Jun  3 20:27:39.565 [initandlisten] exception in initAndListen: 10296 
    *********************************************************************
     ERROR: dbpath (/srv/mongodb/) does not exist.
     Create this directory or give existing directory in --dbpath.
     See http://dochub.mongodb.org/core/startingandstoppingmongo
    *********************************************************************
    , terminating
    Tue Jun  3 20:27:39.565 dbexit: 
    Tue Jun  3 20:27:39.565 [initandlisten] shutdown: going to close listening sockets...
    Tue Jun  3 20:27:39.565 [initandlisten] shutdown: going to flush diaglog...
    Tue Jun  3 20:27:39.565 [initandlisten] shutdown: going to close sockets...
    Tue Jun  3 20:27:39.565 [initandlisten] shutdown: waiting for fs preallocator...
    Tue Jun  3 20:27:39.565 [initandlisten] shutdown: lock for final commit...
    Tue Jun  3 20:27:39.565 [initandlisten] shutdown: final commit...
    Tue Jun  3 20:27:39.565 [initandlisten] shutdown: closing all files...
    Tue Jun  3 20:27:39.565 [initandlisten] closeAllFiles() finished
    Tue Jun  3 20:27:39.565 dbexit: really exiting now
         ~$ mongod --dbpath /srv/mongodb/
    Tue Jun  3 20:27:55.616 [initandlisten] MongoDB starting : pid=5445 port=27017 dbpath=/srv/mongodb/ 64-bit host= -SVE1411EGXB
    Tue Jun  3 20:27:55.616 [initandlisten] db version v2.4.10
    Tue Jun  3 20:27:55.616 [initandlisten] git version: e3d78955d181e475345ebd60053a4738a4c5268a
    Tue Jun  3 20:27:55.616 [initandlisten] build info: Linux ip-10-2-29-40 2.6.21.7-2.ec2.v1.2.fc8xen #1 SMP Fri Nov 20 17:48:28 EST 2009 x86_64 BOOST_LIB_VERSION=1_49
    Tue Jun  3 20:27:55.616 [initandlisten] allocator: tcmalloc
    Tue Jun  3 20:27:55.616 [initandlisten] options: { dbpath: "/srv/mongodb/" }
    Tue Jun  3 20:27:55.617 [initandlisten] exception in initAndListen: 10296 

     ~$ sudo service mongodb start
start: Job is already running: mongodb
     ~$ sudo service mongodb stop
mongodb stop/waiting
     ~$ cd /srv/
     ~$~$/srv$ ls
     ~$ /srv$ mkdir mongodb
     ~$ sudo chgrp   /srv
     ~$ sudo chmod 775 /srv
     ~$ cd /srv/
     /srv$ ls
     /srv$ mkdir mongodb
     /srv$ ls mongodb
     /srv$ cd
     ~$ mongod --dbpath /srv/mongodb/
Tue Jun  3 20:40:57.457 [initandlisten] MongoDB starting : pid=6018 port=27017 dbpath=/srv/mongodb/ 64-bit host= -SVE1411EGXB
Tue Jun  3 20:40:57.457 [initandlisten] db version v2.4.10
Tue Jun  3 20:40:57.457 [initandlisten] git version: e3d78955d181e475345ebd60053a4738a4c5268a
Tue Jun  3 20:40:57.457 [initandlisten] build info: Linux ip-10-2-29-40 2.6.21.7-2.ec2.v1.2.fc8xen #1 SMP Fri Nov 20 17:48:28 EST 2009 x86_64 BOOST_LIB_VERSION=1_49
Tue Jun  3 20:40:57.457 [initandlisten] allocator: tcmalloc
Tue Jun  3 20:40:57.457 [initandlisten] options: { dbpath: "/srv/mongodb/" }
Tue Jun  3 20:40:57.520 [initandlisten] journal dir=/srv/mongodb/journal
Tue Jun  3 20:40:57.521 [initandlisten] recover : no journal files present, no recovery needed
Tue Jun  3 20:41:00.545 [initandlisten] preallocateIsFaster=true 36.86
Tue Jun  3 20:41:03.489 [initandlisten] preallocateIsFaster=true 35.06
Tue Jun  3 20:41:07.456 [initandlisten] preallocateIsFaster=true 34.44
Tue Jun  3 20:41:07.456 [initandlisten] preallocateIsFaster check took 9.935 secs
Tue Jun  3 20:41:07.456 [initandlisten] preallocating a journal file /srv/mongodb/journal/prealloc.0
Tue Jun  3 20:41:10.009 [initandlisten]         File Preallocator Progress: 985661440/1073741824    91%
Tue Jun  3 20:41:22.273 [initandlisten] preallocating a journal file /srv/mongodb/journal/prealloc.1
Tue Jun  3 20:41:25.009 [initandlisten]         File Preallocator Progress: 933232640/1073741824    86%
Tue Jun  3 20:41:37.119 [initandlisten] preallocating a journal file /srv/mongodb/journal/prealloc.2
Tue Jun  3 20:41:40.093 [initandlisten]         File Preallocator Progress: 1006632960/1073741824   93%
Tue Jun  3 20:41:52.450 [FileAllocator] allocating new datafile /srv/mongodb/local.ns, filling with zeroes...
Tue Jun  3 20:41:52.450 [FileAllocator] creating directory /srv/mongodb/_tmp
Tue Jun  3 20:41:52.503 [FileAllocator] done allocating datafile /srv/mongodb/local.ns, size: 16MB,  took 0.022 secs
Tue Jun  3 20:41:52.517 [FileAllocator] allocating new datafile /srv/mongodb/local.0, filling with zeroes...
Tue Jun  3 20:41:52.537 [FileAllocator] done allocating datafile /srv/mongodb/local.0, size: 64MB,  took 0.02 secs
Tue Jun  3 20:41:52.538 [websvr] admin web console waiting for connections on port 28017
Tue Jun  3 20:41:52.538 [initandlisten] waiting for connections on port 27017 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-25T08:34:34.240

更改新数据目录的用户：

> chown mongodb [rute_directory]

并尝试另一次启动 mongo 服务

> 服务 mongodb 启动

我用这个解决了同样的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-30T12:23:30.500

1.  从根系统文件夹中查找 mongo 日志文件

sudo find / -name "mongodb.log" -type f

结果：/var/log/mongodb/mongodb.log

2.  打开 /var/log/mongodb/mongodb.log

3.  搜索最后一个“例外”字

4.  尝试纠正异常

在我的情况下，异常是下一个：2015-07-30T15:09:15.806+0300 [initandlisten] initAndListen 中的异常：13597 不能在没有启用 --journal 的情况下启动，当日志/文件存在时，终止

我做了下一个：

1.  cd /var/lib/mongodb
2.  rm -r 日志/

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-22T18:47:42.147

如果您使用的是 mac catalina：

mongod --dbpath=/Users/user/data/db 离开这个窗口

然后您可以在另一个窗口中输入。

## 蒙哥

> 显示数据库

# android - 如何取消警报框中的振动？

> ID：12400816
> 
> 赞同：0
> 
> 时间：2012-09-13T06:44:34.110
> 
> 标签：android, popup, android-alertdialog, vibration

我正在创建一个应用程序，该应用程序会弹出一个警告框，该警告框必须振动，直到用户单击确定或取消
我的应用程序，当我打开警报框时振动良好，但当我单击确定或取消应用程序崩溃时

这是我用于创建带有振动的警报框的代码

```
Vibrator v;
button = (Button) findViewById(R.id.buttonAlert);

button.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            vibration();
            AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
                    context);
                alertDialogBuilder.setTitle("Your Title");
                alertDialogBuilder.setMessage("Click yes to exit!")
                    .setCancelable(false)
                    .setPositiveButton("Yes",new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,int id) {
                            MainActivity.this.finish();
                            v.cancel();

                        }
                      })
                    .setNegativeButton("No",new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,int id) {

                            dialog.cancel();
                            v.cancel();
                        }
                    });

                    AlertDialog alertDialog = alertDialogBuilder.create();

                    alertDialog.show();
                }

            }); 
```

这是一种振动方法

```
public  void vibration()
    {

        Vibrator v = (Vibrator) context.getSystemService(context.VIBRATOR_SERVICE);

        long[] pattern = { 0, 3000, 3000 };

        v.vibrate(pattern, 0);
//      v.vibrate(5000);

    } 
```

当我使用 Vibrator.cancel(); 时出现错误 或 v.cancel(); 谁能帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:48:31.993

尝试使用`vibrate(3000);`which 相当于让设备振动 3 秒，而不是尝试取消已启动的服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T06:49:10.373

将警报标志从默认设置为

```
notification.flags = Notification.DEFAULT_LIGHTS | Notification.FLAG_AUTO_CANCEL 
```

这样，通知不会引起振动。

如果你想让它也振动，你必须在清单文件中为其提供许可确保应用程序在清单中寻求振动许可。应用程序崩溃是由于您的应用程序没有振动手机的权限。

这是代码

```
<uses-permission android:name="android.permission.VIBRATE" /> 
```

编辑：

我认为你需要的是不同的东西。您需要一种在启动后停止振动的方法。

振动服务在不同的上下文中运行，因此您可能无法直接与其通信。有几种方法可以做到这一点，但我建议另一种简单的方法。

不要连续运行振动，而是尝试运行它一小段时间并在对话框中放置一个计时器，一段时间后会触发振动。

这样，您就不必停止振动。一旦对话框被关闭，计时器将停止触发并且振动将停止。您无需明确关闭振动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T06:49:20.690

在退出对话框之前尝试取消振动器。有关详细信息，请参阅[振动器类。](http://developer.android.com/reference/android/os/Vibrator.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-14T13:59:00.270

在您的代码中，`v.cancel();`但正如我所见，此变量未初始化，您在函数内使用另一个变量`vibration()`尝试取消 vibrate 的初始化变量。
使用这个功能

```
public Vibrator vibration() {

    Vibrator v = (Vibrator) getSystemService(VIBRATOR_SERVICE);

    long[] pattern = { 0, 3000, 3000 };

    v.vibrate(pattern, 0);
    // v.vibrate(5000);
    return v;

} 
```

然后像这样开始振动

```
final Vibrator v = vibration(); 
```

PS我知道这是一个老问题，但也许有人想要答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T07:00:26.147

尝试如下......

```
 Vibrator v = (Vibrator) context.getSystemService(context.VIBRATOR_SERVICE);

    long[] pattern = {0,1000,1000};

    v.vibrate(pattern, -1); 
```

# php - 将表中的所有信息列出到 html 表中

> ID：12400820
> 
> 赞同：0
> 
> 时间：2012-09-13T06:44:55.897
> 
> 标签：php, mysql, html-table

我不记得如何做到这一点。我正在尝试从数据库中的表中获取所有条目，并将其列表到 html 表中。我还试图将从表中提取的条目数限制在 10 到 20 之间。

```
//Connection Info
include('data.php');

//Query To Pull Data
$sql = mysql_query("select name, death, model, humanity, hkills, bkills, kills, hs, late, ldrank, stime, survival, lastupdate from $stats order by kills limit 10");

//Data Pulled To Be Displayed
while ($row = mysql_fetch_array($sql)) {
    //Username
    $name = $row['name'];
    //Deaths
    $death = $row['death'];
    //Amount of Humanity
    $humanity = $row['humanity'];
    //Player Type
    $model = $row['model'];
    //Murders
    $murder = $row['hkills'];
    //Bandit Kills
    $bandit = $row['bkills'];
    //Zombie Kills
    $zombie = $row['kills'];
    //Head Shots
    $head = $row['hs'];
    //Unknown
    $late = $row['late'];
    //Unknown
    $ldrank = $row['ldrank'];
    //Unknown
    $stime = $row['stime'];
    //Time Survived
    $survival = $row['survival'];
    //Last Time Player Was On
    $update = $row['lastupdate'];
}

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<table width="1000" border="1">
  <tr>
    <th scope="col">Username</th>
    <th scope="col">Type</th>
    <th scope="col">Friendliness</th>
    <th scope="col">Deaths</th>
    <th scope="col">Murders</th>
    <th scope="col">Bandit Kills</th>
    <th scope="col">Zombie Kills</th>
    <th scope="col">Head Shots</th>
    <th scope="col">Late</th>
    <th scope="col">STime</th>
    <th scope="col">Time Survived</th>
    <th scope="col">LDRank</th>
    <th scope="col">Last Played</th>
  </tr>
  <tr>
    <td><? echo "$name"; ?></td>
    <td><? echo "$model"; ?></td>
    <td><? echo "$humanity"; ?></td>
    <td><? echo "$death"; ?></td>
    <td><? echo "$murder"; ?></td>
    <td><? echo "$bandit"; ?></td>
    <td><? echo "$zombie"; ?></td>
    <td><? echo "$head"; ?></td>
    <td><? echo "$late"; ?></td>
    <td><? echo "$ldrank"; ?></td>
    <td><? echo "$stime"; ?></td>
    <td><? echo "$survival"; ?></td>
    <td><? echo "$update"; ?></td>
  </tr>
</table>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:53:30.480

```
//Connection Info
include('data.php');

//Query To Pull Data
$sql = mysql_query("select name, death, model, humanity, hkills, bkills, kills, hs, late, ldrank, stime, survival, lastupdate from $stats order by kills limit 10");

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<table width="1000" border="1">
  <tr>
    <th scope="col">Username</th>
    <th scope="col">Type</th>
    <th scope="col">Friendliness</th>
    <th scope="col">Deaths</th>
    <th scope="col">Murders</th>
    <th scope="col">Bandit Kills</th>
    <th scope="col">Zombie Kills</th>
    <th scope="col">Head Shots</th>
    <th scope="col">Late</th>
    <th scope="col">STime</th>
    <th scope="col">Time Survived</th>
    <th scope="col">LDRank</th>
    <th scope="col">Last Played</th>
  </tr>
<?php
while ($row = mysql_fetch_array($sql)) {
?>
  <tr>
    <td><? echo $row["$name"]; ?></td>
    <td><? echo $row["$model"]; ?></td>
    <td><? echo $row["$humanity"]; ?></td>
    <td><? echo $row["$death"]; ?></td>
    <td><? echo $row["$murder"]; ?></td>
    <td><? echo $row["$bandit"]; ?></td>
    <td><? echo $row["$zombie"]; ?></td>
    <td><? echo $row["$head"]; ?></td>
    <td><? echo $row["$late"]; ?></td>
    <td><? echo $row["$ldrank"]; ?></td>
    <td><? echo $row["$stime"]; ?></td>
    <td><? echo $row["$survival"]; ?></td>
    <td><? echo $row["$update"]; ?></td>
  </tr>
<?php } ?>
</table>

</body>
</html> 
```

试试这段代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T06:50:08.313

应该是这样的

```
 <table width="1000" border="1">
      <tr>
        <th scope="col">Username</th>
        <th scope="col">Type</th>
        <th scope="col">Friendliness</th>
        <th scope="col">Deaths</th>
        <th scope="col">Murders</th>
        <th scope="col">Bandit Kills</th>
        <th scope="col">Zombie Kills</th>
        <th scope="col">Head Shots</th>
        <th scope="col">Late</th>
        <th scope="col">STime</th>
        <th scope="col">Time Survived</th>
        <th scope="col">LDRank</th>
        <th scope="col">Last Played</th>
      </tr>

    <?php
    while ($row = mysql_fetch_array($sql)) { ?>
    <tr>
        <td><?php echo $row['name']; ?></td>
        // Rest of other values
    <tr>
   <?php } //End while?>
    </table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T06:51:10.497

```
//Connection Info
include('data.php');

$dataFromTable = '';
//Query To Pull Data
$sql = mysql_query("select name, death, model, humanity, hkills, bkills, kills, hs, late, ldrank, stime, survival, lastupdate from $stats order by kills limit 0,20");

//Data Pulled To Be Displayed
while ($row = mysql_fetch_array($sql)) {
    //Username
    $name = $row['name'];
    //Deaths
    $death = $row['death'];
    //Amount of Humanity
    $humanity = $row['humanity'];
    //Player Type
    $model = $row['model'];
    //Murders
    $murder = $row['hkills'];
    //Bandit Kills
    $bandit = $row['bkills'];
    //Zombie Kills
    $zombie = $row['kills'];
    //Head Shots
    $head = $row['hs'];
    //Unknown
    $late = $row['late'];
    //Unknown
    $ldrank = $row['ldrank'];
    //Unknown
    $stime = $row['stime'];
    //Time Survived
    $survival = $row['survival'];
    //Last Time Player Was On
    $update = $row['lastupdate'];

   $dataFromTable .= "<tr><td>$name</td>
    <td>$model</td>
    <td>$humanity</td>
    <td>$death</td>
    <td>$murder</td>
    <td>$bandit</td>
    <td>$zombie</td>
    <td>$head</td>
    <td>$late</td>
    <td>$ldrank</td>
    <td>$stime</td>
    <td>$survival</td>
    <td>$update</td></tr>"
}

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<table width="1000" border="1">
  <tr>
    <th scope="col">Username</th>
    <th scope="col">Type</th>
    <th scope="col">Friendliness</th>
    <th scope="col">Deaths</th>
    <th scope="col">Murders</th>
    <th scope="col">Bandit Kills</th>
    <th scope="col">Zombie Kills</th>
    <th scope="col">Head Shots</th>
    <th scope="col">Late</th>
    <th scope="col">STime</th>
    <th scope="col">Time Survived</th>
    <th scope="col">LDRank</th>
    <th scope="col">Last Played</th>
  </tr>
    <?php echo $dataFromTable;?>
</table>

</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T06:56:22.040

If you're trying to list all the entries, then you can just wrap the table rows for the data in the while loop. See the example below altered from your original one. Basically how this works is PHP will only process the `?>` after the start of the loop and the `<?php` at the end of the loop while the loop is still running, after which it will continue with normal execution. This way you can wrap the table row in the while look and because the table row is in the loop it will be printed out, with the variables, for each item in the loop, which should be 10 items as that's what you've defined the limit as. I hope I understood the question correctly and this helps :)

```
//Connection Info
include('data.php');

//Query To Pull Data
$sql = mysql_query("select name, death, model, humanity, hkills, bkills, kills, hs, late, ldrank, stime, survival, lastupdate from $stats order by kills limit 10");

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<table width="1000" border="1">
  <tr>
    <th scope="col">Username</th>
    <th scope="col">Type</th>
    <th scope="col">Friendliness</th>
    <th scope="col">Deaths</th>
    <th scope="col">Murders</th>
    <th scope="col">Bandit Kills</th>
    <th scope="col">Zombie Kills</th>
    <th scope="col">Head Shots</th>
    <th scope="col">Late</th>
    <th scope="col">STime</th>
    <th scope="col">Time Survived</th>
    <th scope="col">LDRank</th>
    <th scope="col">Last Played</th>
  </tr>
  <?php while ($row = mysql_fetch_array($sql)) { ?>
  <tr>
    <td><? echo $row['name']; ?></td>
    <td><? echo $row['model']; ?></td>
    <td><? echo $row['humanity']; ?></td>
    <td><? echo $row['death']; ?></td>
    <td><? echo $row['hkills']; ?></td>
    <td><? echo $row['bkills']; ?></td>
    <td><? echo $row['kills']; ?></td>
    <td><? echo $row['hs']; ?></td>
    <td><? echo $row['late']; ?></td>
    <td><? echo $row['ldrank']; ?></td>
    <td><? echo $row['stime']; ?></td>
    <td><? echo $row['survival']; ?></td>
    <td><? echo $row['lastupdate']; ?></td>
  </tr>
  <?php } ?>
</table>

</body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T06:56:42.350

It should be something like this:

```
<table width='80%' border=0>
    <tr bgcolor='#CCCCCC'>
        <th>Username</th>
        <th>Type</th>
        <th>Deaths</th>     
    </tr>
        <?php 
        while($row = mysql_fetch_array($sql)) {
        ?>
            <tr>
                <td><?php echo $row['name'] ?></td>
                <td><?php echo $row['model'] ?></td>
                <td><?php echo $row['death'] ?></td> 
            </tr>
        <?php 
        }
        ?>
</table> 
```

You said you need only 10 to 20 entries. Not clear though but if you want entries from 10th to 20th row only then you can use limit in the following way:

```
SELECT * FROM `your_table` LIMIT 10, 10 
```

This will return 10 records from 10th record, i.e. from 10th record to 20th record.

About SQL Limit: [http://php.about.com/od/mysqlcommands/g/Limit_sql.htm](http://php.about.com/od/mysqlcommands/g/Limit_sql.htm)

# hibernate - JPA：“列的数据太长”不会改变

> ID：12400825
> 
> 赞同：23
> 
> 时间：2012-09-13T06:45:20.593
> 
> 标签：hibernate, jpa, longtext

我的一个实体`Machinery`有一个`String`名为`notes`. JPA 2-Hibernate 为我生成模式，在我的情况下，RDBMS 是 MySQL。

`notes`被创建为`VARCHAR(255)`列，这是正确的。

用户开始创建记录并且一切正常，但随后一些用户得到了臭名昭著的`Data too long for column "notes"`错误。

该字段没有足够的空间用于用户的机械笔记！好的，没问题。让我们改变架构！

所以，我打开我的实体类并将我的属性更改为：

```
@Column(length=1000000)
@Lob
private String notes; 
```

顺便说一句，我的`persistence.xml`声明：

```
<property name="hibernate.hbm2ddl.auto" value="update" /> 
```

应用程序重新启动后，我很高兴 Hibernate 将我的`notes`列更改为 a `LONGTEXT`（这对我来说已经足够了）。

所以我首先尝试使用我的应用程序创建一个新的“长期记录”记录，但我仍然出现错误“数据太长”，尽管`LONGTEXT`现在是。

然后，我尝试`INSERT`从 MySQL 命令行执行原始操作，它可以工作！我可以在该字段中插入长注释！

最后，我`DROP`将我的本地/暂存数据库模式更改为`hibernate.hbm2ddl.auto`并且它可以工作。`persistence.xml``create`

JPA 是否仍然认为它是一个`VARCHAR`? 它是否有某种缓存或存储模式信息的某个地方？

显然，我不能放弃我的生产数据库。那么，我可以做些什么来重置或更改列类型？

我正在使用 JBossAS7 JPA 2-Hibernate。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-13T11:24:46.190

权威的Hibernate 书籍“Java persistence with Hibernate”提到了**hibernate.hbm2ddl.auto的****更新**值（粗体是我的）

 **> 此配置属性的附加选项 update 在开发过程中可能很有用：它启用了内置的 SchemaUpdate 工具，这可以使模式演变更容易。如果启用，Hibernate 会在启动时读取 JDBC 数据库元数据，并通过将旧模式与当前映射元数据进行比较来创建新表和约束。**请注意，此功能取决于 JDBC 驱动程序提供的元数据的质量，这是许多驱动程序所缺乏的领域**。因此，在实践中，此功能并没有听起来那么令人兴奋和有用。

Hibernate docs也在[这里提出相同的建议](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/toolsetguide.html)

> SchemaUpdate 工具将使用“增量”更改来更新现有模式。SchemaUpdate 依赖于 JDBC 元数据 API，因此不适用于所有 JDBC 驱动程序。

我试图复制您的用例，发现我也有这个问题令人惊讶。

我有一个像这样的用户实体

```
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.Lob;
import javax.persistence.NamedQuery;
import javax.persistence.Table;

@Entity
@Table( name = "usr" )

public class User {
  @Id
  @GeneratedValue
  private Long id;

  @Column( length = 40, unique = true )
  private String name;

  @Lob
  @Column( length = 100000 )
  private String text;

  public long getId() {
    return id;
  }

  public void setName( String name ) {
    this.name = name;
  }

  public String getName() {
    return name;
  }

  public String getText() {
    return text;
  }

  public void setText( String text ) {
    this.text = text;
  }

} 
```

我的持久化 xml 是这样的

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
             version="2.0">
   <persistence-unit name="jpatest" transaction-type="RESOURCE_LOCAL">
        <properties>
            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQL5InnoDBDialect"/>
            <property name="hibernate.hbm2ddl.auto" value="update"/>
            <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver"/>
            <property name="hibernate.connection.username" value="root"/>
            <property name="hibernate.connection.password" value="root"/>
            <property name="hibernate.connection.url" value="jdbc:mysql://localhost:3306/jpadatabase"/>
            <property name="hibernate.show-sql" value="true"/>
        </properties>
    </persistence-unit>
</persistence> 
```

如果我更改 hibernate.hbm2ddl.auto 的值来创建实体的文本属性并将其更改为此

```
.....

  @Column( length = 255 )
  private String text;
...... 
```

模式生成器在启动时生成以下 sql

```
DEBUG SchemaExport:415 - drop table if exists usr
DEBUG SchemaExport:415 - create table usr (id bigint not null auto_increment, name varchar(40) unique, text varchar(255), primary key (id)) ENGINE=InnoDB
INFO SchemaExport:281 - schema export complete 
```

现在再次更改实体中的属性

```
.....
@Lob
@Column( length = 100000 )
private String text;
....... 
```

现在生成以下正确的sql

```
DEBUG SchemaExport:415 - drop table if exists usr
DEBUG SchemaExport:415 - create table usr (id bigint not null auto_increment, name varchar(40) unique, text longtext, primary key (id)) ENGINE=InnoDB
INFO SchemaExport:281 - schema export complete 
```

到现在为止还挺好。

现在，如果我将值 hibernate.hbm2ddl.auto 更改为更新并以相同的顺序重复实体中的上述更改，尽管我已将文本列从 varchar(255) 更新为 LONGTEXT，但不会生成更新列 sql

```
 INFO TableMetadata:65 - table found: jpadatabase.usr
 INFO TableMetadata:66 - columns: [id, text, name]
 INFO TableMetadata:68 - foreign keys: []
 INFO TableMetadata:69 - indexes: [name, primary]
 DEBUG DefaultIdentifierGeneratorFactory:90 - Setting dialect  [org.hibernate.dialect.MySQL5InnoDBDialect]
 INFO SchemaUpdate:217 - schema update complete 
```

但是，如果我使用更新而**不是**修改属性，我添加另一个属性位置，然后再次生成正确的 sql

```
DEBUG SchemaUpdate:203 - alter table usr add column location varchar(255)
INFO SchemaUpdate:217 - schema update complete 
```

因此，本质上创建（首先删除表然后重新创建）可以正常工作，但是如果属性元数据有修改，则更新不会。

对我来说，增量更新的驱动程序支持问题似乎在这里发挥了作用。同样直观地如果我想到这一点，那么支持更新列的数据类型是没有意义的。如果修改后的列数据类型是早期数据类型的缩小版本，现有数据会发生什么情况。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-08-03T01:30:37.133

我刚遇到这个问题，看完这个我找到了答案，如果你想它是非常合乎逻辑的，与envers的审计表有关。

## 如何重现

*   您正在使用休眠环境
*   您在添加注释@Lob 的代码中更改列的类型。

## 原因

Hibernate 只更新原始表，而不是审核过的表，这是 hibernate 所做的：

```
ALTER TABLE piece_aud MODIFY notes LONGTEXT; 
```

## 症状

MysqlDataTruncation 异常引发了臭名昭著的“Data too long for column 'x'”。

## 解决方案

手动更新审计表的类型。例子：

```
ALTER TABLE piece_aud MODIFY notes LONGTEXT; 
```

或者，您也可以像这样更新列定义（如果您不介意删除重新创建架构）：

```
@Column(name="notes",columnDefinition="LONGTEXT")
private String notes; 
```

这是非常棘手的，因为异常只说列的名称而不是表的名称！！，这就是为什么删除和重新创建模式也有效，因为重新生成审计表。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-08-12T16:10:39.507

我也有同样的情况，下面一个对我来说工作顺利

```
@Column(name="your_column_name",columnDefinition="LONGTEXT")
private String notes; 
```

我知道很久以前就有人问过它，但它仍然可能对某人有帮助。:)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-11T09:46:01.447

我有同样的问题 INSTER 语句直接在数据库上完美地工作，但通过 Hibernate 没有工作并产生 Data truncation: Data too long for column。当 hbm2ddl 更改为 create-drop 时，一切正常。

但我真正的问题是由于我使用了使用 Hibernate 内置审计功能的审计表。主表已正确更新为增加的大小，但审计表未正确更新，因此写入审计表的所有更改都会导致此数据截断错误。只需手动将审核表中的列更新为正确的大小，一切正常。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-01-07T08:57:23.333

我认为这可以解决问题 `@Column(columnDefinition="LONGVARCHAR")`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-12T13:30:52.900

没有！我最终得到： - 数据库备份 - hbm2ddl => CREATE-DROP - hbm2ddl => 更新 - 数据库恢复

疯狂的！:(

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-07-05T20:08:06.190

```
@Column( length = 100000 )
private String text; 
```

这**有效**，但您必须**删除****表格**！因为在这种情况下休眠不会更新表。所以你必须强制休眠来**重新创建**表并且它可以工作！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-10-20T03:59:33.183

至于我，我排除了以下属性，问题就消失了

```
<property name="hibernate.ejb.naming_strategy" value="org.hibernate.cfg.ImprovedNamingStrategy"/> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-11-10T14:04:52.363

不过很烦人的问题。可以使用`hibernate.hbm2ddl.auto`面向方言的 SQL，而不是备份整个数据库并更改。`ALTER TABLE`例如; 对于 MySQL，只需更新列类型

```
alter table your_table modify column your_column text 
```

瞧！

PS：不要忘记更新审计表！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-07-30T13:53:02.860

在 Spring/JPA/Hibernate/Postgres 中，

```
@Type(type="org.hibernate.type.StringClobType")
String message; 
```

对我来说就像一个魅力！

> **重要说明**：数据库中的列类型不会为我自动更新，因此我需要允许 Hibernate 重新创建表，或者手动将类型从 更改`varchar(255)`为`text`，否则*似乎*什么也不会发生。**

# ios - 更改 ViewController 时将元素保留在 ViewController 中

> ID：12400831
> 
> 赞同：0
> 
> 时间：2012-09-13T06:45:51.560
> 
> 标签：ios, uiviewcontroller, storyboard

我正在制作一个简单的游戏，但我遇到了一个问题。我有一个 UIButton 可以停止游戏并将 GameViewController 更改为 secondViewController。我在 secondViewController 中有另一个 UIButton，当它被单击时，它会返回到 GameViewController。我已经通过我的故事板设置了这些按钮，所以没有编码。问题是当我从 secondViewController 回到 GameViewController 时，游戏设置/数据和其他任何东西都被设置回原来的样子。例如，我有 3 条生命，如果我失去了一条生命并单击 gameViewController 中的按钮并返回到 gameviewController，我将再次拥有 3 条生命。我该如何解决这个问题？谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:53:49.967

您需要在游戏消失时保存状态，并在再次加载视图时加载保存的状态。例如，您可以在`prepareForSegue:sender:`方法中保存您的状态，并在 -viewWillAppear: 中加载保存的状态。

# c# - 在类中轻松初始化字符串数组

> ID：12400833
> 
> 赞同：1
> 
> 时间：2012-09-13T06:45:59.080
> 
> 标签：c#, .net, string

如果一个类只包含字符串数组变量，有没有一种简单的方法来初始化它们而不必一遍又一遍地键入相同的代码？

例如，如果我有类似的东西

```
[Serializable]
public class ReadDiagnosticEntirePointValuesResponse
{
    public string[] pointidentifier;
    public string[] presentvalue;
    public string[] priorityarray;
    public string[] alarmstate;
    public string[] outofservice;
    public string[] correctvalue;
    public string[] affect;
    public string[] covenable;
    public string[] covincrement;
    public string[] covtarget;
    public string[] covlifetime;
    public string[] historyenable;
    public string[] historyincrement;
    public string[] elapsedactivetime;
    public string[] feedbackvalue;
    public string[] rawvalue;
    ...//A lot more 
} 
```

我想给他们赋值，我想避免这样做：

```
 ReadDiagnosticEntirePointValuesResponse response = new ReadDiagnosticEntirePointValuesResponse();

        response.affect = new string[count];
        response.alarmstate = new string[count];
        response.correctvalue = new string[count];
        response.covenable = new string[count];
        response.covincrement = new string[count];
        response.covlifetime = new string[count];
        response.covtarget = new string[count];
        response.elapsedactivetime = new string[count];
        response.feedbackvalue = new string[count];
        response.historyenable = new string[count];
        response.historyincrement = new string[count];
        response.outofservice = new string[count];
        response.pointidentifier = new string[count];
        response.presentvalue = new string[count];
        response.priorityarray = new string[count];
        response.rawvalue = new string[count];
        ... 
```

当然，我可以在构造函数中编写这些初始化，但这仍然不能让我不必手动初始化它们。

有什么好的方法可以避免这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T06:50:34.100

这是管理数据的一种非常糟糕的方式，但是，类似以下的方法会*起作用*....

```
foreach(var field in GetType().GetFields()) {
    if(!field.IsStatic) field.SetValue(this, new string[count]);
} 
```

然而！我强烈建议你重新考虑这个设计。更好的机制是：

```
class DiagnosticPoint // TODO: rename as appropriate
{  // TODO: check these all need to be strings
    public string Affect {get;set;}
    public string AlarmState {get;set;}
    ...
    public string RawValue {get;set;}
} 
```

并将其作为字段的数组：

```
public class ReadDiagnosticEntirePointValuesResponse
{
    DiagnosticPoint[] points;
    ... 
```

然后简单地初始化数组：

```
points = new DiagnosticPoint[count]; 
```

并初始化每个：

```
for(int i = 0 ; i < count ; i++) points[i] = new DiagnosticPoint(); 
```

并通过以下方式访问：

```
var alarm = points[index].AlarmState; 
```

（ETC）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T06:50:05.490

您可以使用它[`Reflection`](http://msdn.microsoft.com/en-us/library/ms173183%28v=vs.80%29.aspx)来执行此操作：

```
public ReadDiagnosticEntirePointValuesResponse()
{
    GetType().GetFields(BindingFlags.Instance | BindingFlags.Public)
             .ToList()
             .ForEach(field => field.SetValue(this, new string[count]));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T06:48:54.350

您可以使用数组列表来避免声明大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T06:49:34.123

至少有一次您必须手动初始化它们。如果 C'tor 不适合您，请使用新方法进行初始化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T06:49:34.757

你可能想看看反射......在循环中读取类的属性

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-13T07:09:40.283

这听起来像是一个糟糕的类定义。也许使用 an`enum`可能会更好。

如果你可以从这个开始：

```
public enum ReadDiagnostic
{
    pointidentifier,
    presentvalue,
    priorityarray,
    alarmstate,
    outofservice,
    correctvalue,
    affect,
    covenable,
    covincrement,
    covtarget,
    covlifetime,
    historyenable,
    historyincrement,
    elapsedactivetime,
    feedbackvalue,
    rawvalue,
} 
```

然后，您可以创建一个`Dictionary<ReadDiagnostic, string[]>`来保存您存储在类中的值。

您甚至可以使用 LINQ 在一行代码中创建字典：

```
var readDiagnosticEntirePointValues =
    typeof(ReadDiagnostic)
    .GetEnumValues()
    .Cast<ReadDiagnostic>()
    .ToDictionary(x => x, x => new string[count]); 
```

这种方法仍然是强类型的，但比您当前的方法更容易维护。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-13T07:14:05.073

您可以使用以下内容：

```
response.affect = response.alarmstate = response... = new string[count]; 
```

但是，使用它仍然会让您手动初始化它们。这只是一个捷径。

正如其他人可能已经建议的那样，使用[Collection Classes](http://msdn.microsoft.com/en-us/library/ybcx56wz%28v=vs.80%29.aspx)会更容易。我会推荐一本[字典](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)。以下是如何实现它：

```
enum Foo { Affect, AlarmState, CorrectValue, ... }

public void InitializeArrays(int count)
{
    Dictionary<Foo, string[]> response = new Dictionary<Foo, string[]>();

    // easy initialization of string arrays
    foreach (Foo foo in Enum.GetValues(typeof(Foo)))
    {
        response.Add(foo, new string[count]);
    }

    // use this to access the string arrays
    response[Foo.Affect][0] = "test";

    if (response[Foo.CorrectValue].Length > 0) { ... }
} 
```

或者，您也可以通过使用[多维数组](http://msdn.microsoft.com/en-us/library/2yd9wwz4%28v=vs.71%29.aspx)来实现相同的目的。

```
// initialize it like this
string[,] response = new string[Enum.GetValues(typeof(Foo)).Length, count];

// access it like this
response[(int)Foo.Affect, 0] = "test"; 
```

# ruby-on-rails - Rails - tinytds 崩溃红宝石

> ID：12400834
> 
> 赞同：0
> 
> 时间：2012-09-13T06:46:02.590
> 
> 标签：ruby-on-rails, ruby, crash, freetds

使用 freetds 和 tinytds gem 查询 MSSQL 2008 数据库时，语法如下：

```
db = TinyTds::Client.new(:username => ...)
select = db.execute("EXEC dbo.__stored_procedure__")
db.close 
```

然后这一行导致 ruby​​ 在 Windows 上崩溃：

```
select.each {|x| p x} 
```

奇怪的是，查询简单选择时：

```
select = db.execute("SELECT field FROM table") 
```

`select.each`不会崩溃 - 它也不会做任何循环

它也不会使 webrick 和 rails 控制台崩溃。

但是当我将代码更改为：

```
db = TinyTds::Client.new(:username => ...)
select = []
db.execute("EXEC dbo.__stored_procedure__").each { |x|
  select << x
}
db.close 
```

然后它就像一个魅力（即使是选择）。

不要它在操作系统上的工作方式比 Windows 更好......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T22:39:39.467

你的期望是不正确的。我建议你在这里阅读 TinyTDS 的用法。 [https://github.com/rails-sqlserver/tiny_tds#tinytdsclient-usage](https://github.com/rails-sqlserver/tiny_tds#tinytdsclient-usage)

# sharepoint - 如何在 Sharepoint 表单的查找字段中排除一行？

> ID：12400838
> 
> 赞同：0
> 
> 时间：2012-09-13T06:46:11.823
> 
> 标签：sharepoint, sharepoint-2010, infopath2010

假设我有 SP 列表 A 和 SP 列表 B。
在 SP 列表 B 中，我有一个使用 SP 列表 A 作为数据源的查找字段。
SP 列表 A 有两个字段（即字段 1：项目名称，字段 2：项目状态）

我需要在查找中排除项目状态为“已关闭”的条目。

有没有办法以信息路径形式或其他方式排除它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:50:04.577

我发现在 MS infopath 中我们可以过滤掉 Lookup 中的内容

**右键单击“数据**”选项卡中的“查找字段”字段属性，从“添加”按钮中选择数据源并在前面的向导中应用过滤器

# c# - 在 nopCommerce 2.30 中实现 Fileupload 控制

> ID：12400840
> 
> 赞同：0
> 
> 时间：2012-09-13T06:46:42.730
> 
> 标签：c#, nopcommerce

我是 nopCommerce 2.30 的初学者。没有 Fileupload Control 2.30 版。

我想在 nopCommerce 2.30 中使用 Fileupload Control。最后一天下载

nopCommerce 2.65。文件上传控制在 nopCommerce 2.65 中可用。我改变

用于实现 FileUpload 控件的源代码 2.30（参考 2.6）。

Fileupload 控件在浏览器中成功呈现。

![在此处输入图像描述](../Images/cf3c2fc9addcbca08f9d0ef15502adca.png)

但是当我上传文件时，它会显示一条错误消息，请参阅图片。

![在此处输入图像描述](../Images/0fb3f99040d8dd0abfb1645619443b45.png)

我并在 ShoppingCartController 中包含**UpdateFileProductAttribute**函数

nopCommerce 2.30 并调试整个代码。类目录设置在

**FileUploadMaximumSizeBytes**属性始终为 0。请看图片 ![在此处输入图像描述](../Images/5abc6c7475261bca9352641d5c4184a9.png)

我在 AddToCartProduct 函数中添加了案例 AttributeControlType.FileUpload:

在目录控制器中。但 this.Request.Files 为空。请看图片。 ![在此处输入图像描述](../Images/572f3f1f0f06108ffd57beaf66c4d709.png)

是否可以在 nopCommerce 2.30 中实现 Fileupload 控件？

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T12:56:04.620

为什么不去 nopCommerce 2.65？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T15:08:43.307

你快到了。转到管理区域 > 配置 > 所有设置。将 CatalogSettings.FileUploadMaximumSizeBytes 的值设置为 204800（最大文件大小，以字节为单位）。如果设置不存在，请创建它。

PS 不要忘记添加语言环境（例如 ShoppingCart.MaximumUploadedFileSize）

# c# - WebClient.DownloadFileAsync 方法：如何检索对象？

> ID：12400841
> 
> 赞同：4
> 
> 时间：2012-09-13T06:46:42.573
> 
> 标签：c#, multithreading, webclient

我正在尝试从服务器异步下载文件，为此我正在使用 weblcient。在以异步方式下载文件时，我在 DownloadFileAsync（Uri 地址，字符串文件名，对象）方法用户令牌中发送文件（类文件库的实例），但我无法从调用的方法中检索我在此发送的对象下载完成后。这是代码详细信息

> public void DownloadFileAsync( Uri 地址，字符串文件名，对象 userToken )

和 MSDN 说**> userToken**

类型：System.Object 一个用户定义的对象，它传递给异步操作完成时调用的方法。

实际上，我在调用中传递了文件名：

```
wc.DownloadFileAsync(uri, file.StorePath,file); 
```

我的下载完成方法是

```
void wc_DownloadFileCompleted(object sender, AsyncCompletedEventArgs e)
        {
            var file = (FileLibrary)sender;
            this.DownloadedFileName = file.FileId;

        } 
```

错误是： **无法将类型为“System.Net.WebClient”的对象转换为类型 FileLibrary。**

根据我对上述描述的理解，对象应该很容易被转换 **为**文件库，因为我在调用相同类型时发送的文件名。为什么我收到错误或者是否有任何其他方法可以检索发送的 Object:userToken

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T07:03:17.980

您发送的对象应该可以通过[e.UserState](http://msdn.microsoft.com/en-us/library/system.componentmodel.asynccompletedeventargs.userstate.aspx)属性访问

试试这个

`var file = (FileLibrary) e.UserState`

# javascript - 异步并行错误？

> ID：12400844
> 
> 赞同：0
> 
> 时间：2012-09-13T06:46:48.190
> 
> 标签：javascript, node.js, async.js, node-async

在这里，我试图创建一个带有 Async.js 参数的函数数组。

该数组由 RunRequest 的实例组成，这些实例应该设置在 MakeRequest 的循环内，就在我尝试将函数数组传递给 Async 之前。

因此，当我将 request[i] 中的请求传递给 RunRequest 时，它很好，但在 RunRequest 函数内部它是未定义的？

```
// Process Requests
function RunRequest(db, collection, request, requestHandler, callback) {
    console.log('this happening?')
    // Connect to the database
    db.open(function(err, db) {
        if(err) callback(err, null);
        // Connect to the collection
        db.collection(collection, function(err, collection) {
            if (err) callback(err, null);
            // Process the correct type of command
            requestHandler(db, collection, request, callback);  
        });
    });
}

function MakeRequest(request, requestHandler, collection, callback) {
    var data = [];
    var doneRequest = function(err, results) {
        console.log('done was called')
        if (err) callback(err, null);
        else if(results) data = data.concat(results);
    }
    // Make Request Array
    var requestArray = [];
    for(var i = 0; i < request.length; i++) {
        console.log('run request was called')
        var dbConnection = new Db('KidzpaceDB', new Server(Host, Port, {auto_reconnect: true}))
        requestArray.push(function() {RunRequest(dbConnection, collection, request[i], requestHandler, doneRequest)});
    }
    // Make all requests in Parallel then invoke callback
    Async.parallel(requestArray, function(err, results) {
        console.log('Step WORKS')
        if(data) {
            var uniqueResults = [];
            for(var i = 0; i < data.length; i++) {
                if( !uniqueResults[data[i]['_id']] ) {
                    uniqueResults[uniqueResults.length] = data[i];
                    uniqueResults[data[i]['_id']] = true;
                }
                callback (null, uniqueResults);
            }
        }
    });
}

// Request Handlers
var FindHandler = function(db, collection, request, callback) {
    console.log('FindHandler was called')
    console.log('Request Query' + request);
    collection.find(request.query, function(err, cursor) {
        if (err) callback(err, null);
        cursor.toArray(function(err, docs) {
            if (err) callback(err, null);
            if(docs.length <= 0) console.log("No documents match your query");
            var requestResults = [];
            for(var i=0; i<docs.length; i++) {
                requestResults[requestResults.length] = docs[i]; 
            }
            db.close();
            callback(null, requestResults);
        });
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:48:16.957

这只是在黑暗中拍摄：

我认为问题在于您如何调用`RunRequest`inside `MakeRequest`。在第一个 for 循环中，您正在迭代`request`并`request[i]`在匿名函数中使用，但`i`在下一次迭代中发生更改，并且当前范围在`RunRequest`实际执行时会丢失。

很难重现，但试试这个：

```
var requestArray = [];
for(var i = 0; i < request.length; i++) {
    console.log('run request was called')
    var dbConnection = new Db('KidzpaceDB', new Server(Host, Port, {auto_reconnect: true}))

    function wrap(dbConnection, collection, request, requestHandler, doneRequest) {
        return function() {
            RunRequest(dbConnection, collection, request, requestHandler, doneRequest);
        }
    }
    requestArray.push(wrap(dbConnection, collection, request[i], requestHandler, doneRequest));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T07:57:16.693

这是一个范围界定问题。当循环结束变量`i`设置为 时，也是`request.length`如此。`request[i]``undefined`

用这样的匿名函数包装你的代码：

```
var requestArray = [];
for(var i = 0; i < request.length; i++) {
    (function(i) {
        console.log('run request was called');
        var dbConnection = ...;
        requestArray.push( ... );
    })(i);
} 
```

甚至更好（在创建匿名函数时避免不必要的开销）：

```
var requestArray = [];
request.forEach( function( el ) {
    console.log('run request was called');
    // the other code goes here, use el instead of request[i]
}); 
```

**编辑**未调用回调，因为您没有正确定义数组中的函数。您将不得不稍微重构您的代码，所以让我向您展示它应该是怎样的：

```
requestArray.push(function(callback) { // <---- note the additional parameter here
    // do some stuff, for example call db
    db.open(function(err, db) {
        if (err) {
            callback( err );
        } else {
            callback( );
        }
    });
}); 
```

如果你想使用`RunRequest`，那么你需要`callback`作为附加参数传递给`RunRequest`（所以使用`callback`而不是`doneRequest`）。

# ffmpeg - 通过 ffmpeg 向视频添加动态定位的水印

> ID：12400845
> 
> 赞同：5
> 
> 时间：2012-09-13T06:47:00.300
> 
> 标签：ffmpeg, watermark, segments

我正在尝试使用 ffmpeg 为视频添加水印。

但是有一个要求让我很难理解如何制作它，我在网上搜索过。

所以，我需要水印每 20 秒随机改变 4 个角的位置。

我的想法是将视频拆分为一组文件，将水印随机应用于每个文件并将结果合并到一个输出文件中。但我认为这是不好的方式。

有人可以帮我吗？

谢谢，谢尔盖

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T22:19:36.247

我会创建一个 1 分钟的水印循环视频，水印每 20 秒移动一次，然后使用叠加过滤器将循环播放的视频叠加到原始视频上。

这是图像循环： http: [//ffmpeg.org/trac/ffmpeg/wiki/Create%20a%20video%20slideshow%20from%20images](http://ffmpeg.org/trac/ffmpeg/wiki/Create%20a%20video%20slideshow%20from%20images)

和水印： [http ://www.idude.net/index.php/how-to-watermark-a-video-using-ffmpeg/](http://www.idude.net/index.php/how-to-watermark-a-video-using-ffmpeg/)

您甚至可以对水印视频重复该过程，直到其长度与原始视频相同。我没有测试我的理论，但你可以让我们知道它是否有效。

编辑，我回家测试了我的理论，这是一个 Windows 批处理文件：

```
setlocal

rem create blank movie
rem I created 4 transparent PNG the same size as my final movie using FotografixPortable
rem after many failures with MSPaint... I should have known...

rem add water mark to blank movie (bottom right)
ffmpeg -loop 1 -i wm1.png -t 20 -vcodec png -pix_fmt rgba out-wm1.mov

rem add water mark to blank movie (top right)
ffmpeg -loop 1 -i wm2.png -t 20 -vcodec png -pix_fmt rgba out-wm2.mov

rem add water mark to blank movie (bottom left)
ffmpeg -loop 1 -i wm3.png -t 20 -vcodec png -pix_fmt rgba out-wm3.mov

rem add water mark to blank movie (top left)
ffmpeg -loop 1 -i wm4.png -t 20 -vcodec png -pix_fmt rgba out-wm4.mov

rem put (concat) them all together into one video
rem I use filter_complex because we need to maintain the transparency in the video
ffmpeg -i out-wm1.mov -i out-wm2.mov -i out-wm3.mov -i out-wm4.mov -filter_complex "[0:0] [1:0] [2:0] [3:0] concat=n=4:v=1:a=0 [v]" -map "[v]" -y -vcodec png -pix_fmt rgba -q 0 all-wm.mov

rem finally overlay the 1:20 watermark video onto the original movie
ffmpeg -i "Ted (2012) Unrated.mkv" -i all-wm.mov -filter_complex overlay -shortest -y -q 0 ted.avi 
```

当然，这不是“随机的”，但您可以使叠加电影具有任意长度的模式和单独的时间戳，使其在最终输出中显得随机。

# css - 在 :hover 上覆盖样式

> ID：12400847
> 
> 赞同：0
> 
> 时间：2012-09-13T06:47:22.197
> 
> 标签：css, hover

我正在创建一个收件箱，其中侧面有一个 asp 菜单，中间有一个收件箱。当我从数据库中看到新行时，我需要将字体颜色更改为红色并使其变为粗体。我`adding`在菜单项上使用过。

如果没有悬停，它看起来像这样。

![在数据库中找到新项目时](../Images/32ef8c5fca2bdd201d252746c9dcf74a.png)

如果悬停它必须看起来像这样。

![悬停的外观](../Images/41e3651b1311eb49ed81c0b9f01a0691.png)

但问题是，当我将鼠标悬停在文本上时，它看起来像上面显示的图像，但如果我将鼠标稍微悬停在 menuItem 的顶部或底部（在菜单项内部但不在文本上），则看起来像这样。

![刚刚悬停](../Images/6200e356615a8d783fe34e4d8135176e.png)

用于菜单项的 CSS。

```
.Menu ul li a {
color: black;
background: #E9E9E9;
display: block;
padding: 5px 0;
line-height: 17px;
padding-left: 8px; /*link text is indented 8px*/
text-decoration: none;}

.Menu ul li a:hover{
background-image: none;
color: white;
background: #424242;} 
```

这是我用来从服务器端更改颜色并将字体设置为粗体的代码。

```
Menu1.Items[0].Text = "<div class='inboxno' >" + "Inbox (" + (i + 1) + ")" + "</div>"; 
```

这是收件箱的 CSS 类。

```
.inboxno{
background-image: none;
color: Red;
font-weight:bold;}

.inboxno:hover{
background-image: none;
color: white;
background: #424242;
font-weight:bold;} 
```

我想我理解这个问题。它是`<DIV>`围绕菜单项内的收件箱文本创建的，并且它具有 Css inboxno。但是菜单项有填充，当我将鼠标放在填充区域上时，inboxno:hover 类没有应用于 Div。

我认为这个问题的解决方案之一是，如果我可以 `.Menu ul li a`从`.inboxno:hover`类中访问该类，我将删除 Padding 属性并在`.inboxno:hover`类中设置相同的填充属性。

但我不知道如何`.Menu ul li a`从班级访问`.inboxno:hover`班级。

你能帮助我吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:59:20.657

不确定您是否只是询问悬停但尝试做

```
.Menu ul li:hover a {
    background-image: none;
    color: white;
    background: #424242;
} 
```

# common-lisp - Common Lisp 中的未绑定变量

> ID：12400850
> 
> 赞同：2
> 
> 时间：2012-09-13T06:47:35.460
> 
> 标签：common-lisp

我是 Lisp 的新手，我正在阅读 ANSI Common Lisp 第 8 章中的一个文本生成器示例。我按照示例并在 LET 变量“prec”的范围内定义了一个函数“see”，

```
(let ((prec '|.|))
  (defun see (symb)
    (let ((pair (assoc symb (gethash prev *words*))))
      (if (null pair)
        (push (cons symb 1) (gethash prev *words*))
      (incf (cdr pair))))
    (setf prev symb))) 
```

并将其保存到一个lisp文件中。

然后当我返回 REPL 并在加载文件的编译版本后尝试调用 see 时，出现错误：

`The variable PREV is unbound. [Condition of type UNBOUND-VARIABLE]`

如何正确调用 see？什么是词法闭包？我都很困惑。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T10:56:28.710

看起来您是键入`prec`而不是`prev`在封闭的`let`表格中。

词法闭包是“关闭”部分词法环境的函数（因此得名）。lisp 中有很多关于闭包的好介绍，我不会在此重复，但本质上，`let`这是操作词法环境的最常用方法；在这种情况下，您要添加 的绑定`prev`，然后可以将其用于表单正文中的代码。您的函数`see`将“关闭”此绑定，因此每次调用`see`都可以访问它，即使当您进行这些调用时，您将不再处于`let`表单建立的词法环境中。从某种意义上说，您可以说函数定义与其绑定。

由于您似乎输入了错误的名称，因此`prev`您的函数试图引用在代码中当时尚未建立的绑定。

# c++ - 在 XP 上未找到序数 ComCtl32.dll C++

> ID：12400851
> 
> 赞同：1
> 
> 时间：2012-09-13T06:47:38.447
> 
> 标签：c++, windows-xp, ordinal

当在 win 7 上制作的 c++ 程序在 xp 上运行时出现此错误。这里的错误 [support.microsoft.com/kb/260283](http://support.microsoft.com/kb/260283)

我得到了`The ordinal 380 could not be located in the dynamic link library (COMCTL32.DLL)` 。如果没有 `Copy the Comctl32.dll File from Another Computer`. 如何在我的程序中直接添加该 dll。还是另一种方式？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T07:03:35.980

您不能将 comctl32.dll 直接添加到您的程序中。它是操作系统的一部分。每个版本的 Windows 都有自己的这个库版本。你问题的根源是你使用了一些 Windows XP 不支持的 WinAPI。

您可以使用 WINVER 和 _WIN32_WINNT 宏定义支持的最低 Windows 版本。完成此操作后，您将在编译时看到一些错误，这些错误会显示最低要求的 Windows 版本不支持哪些 api。

[您可以在此处](http://msdn.microsoft.com/ru-ru/library/aa383745%28v=vs.90%29.aspx)阅读有关最低版本要求的更多信息

# javascript - JavaScript 正则表达式文字与 RegExp 对象

> ID：12400854
> 
> 赞同：2
> 
> 时间：2012-09-13T06:47:57.677
> 
> 标签：javascript, regex

我很喜欢这个[SO](https://stackoverflow.com/questions/5454235/javascript-shorten-string-without-cutting-words)，想设置字符数。因此，我必须将表达式创建为 String 并使用`new RegExp()`. 所以我稍微改变了片段并使用了一个新`RegExp`对象

**原件**

```
var t = "this is a longish string of text";
t.replace(/^(.{11}[^\s]*).*/, "$1");

//result:
"this is a longish" 
```

**使用正则表达式**

```
var t = "this is a longish string of text";
var count = 11;
t.replace(new RegExp('^(.{' + count + '}[^\s]*).*'), "$1");

//result:
"this is a longi" 
```

如您所见，第二个结果不是预期的。任何提示在这里使用文字和使用 RegExp 对象有什么不同。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T06:50:04.630

在字符串中，您需要转义反斜杠：

```
new RegExp('^(.{' + count + '}[^\\s]*).*') 
```

（您可以使用`\S`代替`[^\s]`）：

```
new RegExp('^(.{' + count + '}\\S*).*') 
```

# html - 将样式应用于背景图像有技巧吗？

> ID：12400855
> 
> 赞同：0
> 
> 时间：2012-09-13T06:48:01.153
> 
> 标签：html, css

**CSS**

```
#lego{
    background: url(images/lego.png) no-repeat center bottom ;
} 
```

**HTML**

```
<div id="lego"></div> 
```

无需添加任何标签或 HTML。

没有Javascript。

乐高是 100% 宽的，而图像不是。

如何仅将`box-shadow`（或其他样式）应用到图像（而不是 100% 宽的乐高元素）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T06:50:56.690

不。为实际图像添加阴影。

编辑：CSS3 允许多个背景，所以也许你会变得棘手。

[http://www.css3.info/preview/multiple-backgrounds/](http://www.css3.info/preview/multiple-backgrounds/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T06:53:30.430

无法设置作为元素背景图像的图像的样式。背景图像是元素样式的一部分。

您可以使用`<img>`标签（使用位置和框阴影）来执行此操作，或者在 Photoshop 或其他图像编辑程序中为图像本身添加阴影。

这是无法做到的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T06:54:37.390

你不能。CSS 样式应用于 DOM 元素，背景图像不是 DOM 元素。你可以这样做：

CSS：

```
#lego .image {
    background: url(images/lego.png) no-repeat center bottom ;
    width: <image_width>;
    height: <image_height>;
    box-shadow: ...
    ...
} 
```

HTML：

```
<div id="lego">
    <div class="image"></div>
</div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T06:58:21.977

您可以使用 css[伪 :before 或 :after 元素](http://www.w3schools.com/css/css_pseudo_elements.asp)来包含您的图像，这样您就可以只给`:before`元素一个阴影而不是乐高 div。看看这个小提琴 - [http://jsfiddle.net/cNeWW/](http://jsfiddle.net/cNeWW/)

```
#lego{
    width: 100%;
    position: relative;
}

#lego:before{
    content: "";
    background: url(images/lego.png) no-repeat center bottom;
    position: absolute;
    width: <background width>;
    height: <background height>;
    display: block;
    box-shadow: 5px 5px 3px #000;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-13T06:59:12.733

我相信这是不可能的。CSS 只能为 HTML 元素设置样式，而背景图像不是元素。但是您可以为图像本身添加阴影（使用 Photoshop 或类似的东西），或者您可以尝试使用`#logo:after`和使用它，也许它可以达到您的预期。

# sencha-touch-2 - 如何在 Sench Touch 2 中动态设置字段集标题？

> ID：12400857
> 
> 赞同：0
> 
> 时间：2012-09-13T06:48:05.137
> 
> 标签：sencha-touch-2, fieldset

我想动态设置字段集标题。我有一个包含 1 个或多个字段集的表单。我希望字段集标题按 3 中的 1、3 中的 2 和 3 中的 3 顺序编号。例如，这是表单控制器中的一些代码：

```
var formView = this.getFormView(),
fieldsets = formView.down('fieldset');

for (var i = 0, len = fieldsets.length; i < len; i++) {
    fieldsets[i].setTitle((i + 1) + ' of ' + len)
} 
```

我正在考虑获取表单面板 formView.getItems() 的项目并以这种方式查找字段集，但我确信有一种更简单的方法来获取字段集，然后动态设置它们的标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T14:06:15.170

我已经解决了你的问题。由于您没有给出“View.js”的编码，所以我创建了自己的视图 - “demo.js”。

```
 Ext.define("Stackoverflow.view.Demo", {
 extend: "Ext.form.Panel",
 config: {
    scrollable: 'vertical',
    items: [
        {
            xtype: "toolbar",
            docked: "top",
            title: "Set Title Dynamically ",
            items: [
                {
                    xtype: "button",
                    ui: "action",
                    text: "Set Title",
                    itemId: "settitle"
                }
            ]
        },

        { xtype: "fieldset",
          id: 'field1',
          title: 'oldtitle',
            items: [
                {
                    xtype: 'textfield',
                    name: 'name',
                    label: 'Name'
                }

            ]
        }

    ],
    listeners: [
        {
            delegate: "#settitle",
            event: "tap",
            fn: "onSetTitle"
        },
    ]
},

onSetTitle: function () {
   console.log("title");
   var z=Ext.getCmp('field1');
   z.setTitle('newtitle');
}

}); 
```

可能这会对你有所帮助。
如有任何疑问，请随时询问。
再见。

# iphone - 如何从一个视图重定向到主视图控制器

> ID：12400858
> 
> 赞同：0
> 
> 时间：2012-09-13T06:48:07.057
> 
> 标签：iphone, ios, ios5

如何从一个视图重定向到主视图控制器。我目前在登录页面，现在我想加载 PhotoMasterViewController。谁能告诉我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:50:23.133

在您的 masterViewController 添加此代码并使用 pushViewController-

```
-(void)NextView:(id)sender
{
PhotoMasterViewController *Photo = [[PhotoMasterViewController alloc]initWithNibName:@"PhotoMasterViewController" bundle:nil];
[self.navigationController pushViewController:Photo animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:21:53.253

为什么不使用“ModalViewController”

它比navigationController好，你可以这样使用

```
-(void)NextView:(id)sender
{
PhotoMasterViewController *Photo = [[PhotoMasterViewController alloc]initWithNibName:@"PhotoMasterViewController" bundle:nil];
//enum, you can choose which style you like
Photo.modalPresentationStyle = UIModalTransitionStyleFlipHorizontal;
[self presentModalViewController:Photo animated:YES];
} 
```

# c# - 从输入流获取文件路径？

> ID：12400859
> 
> 赞同：0
> 
> 时间：2012-09-13T06:48:11.620
> 
> 标签：c#

我正在尝试从文件中获取最后修改日期，但需要它的路径吗？有人可以告诉我如何获取文件路径吗？

```
[HttpGet]
public string uploadfile(string token, string filenameP, DateTime modDate, HttpPostedFileBase file)
{
    MemoryStream target = new MemoryStream();   
    file.InputStream.CopyTo(target);    
    byte[] data = target.ToArray();

    //ModDate = File.GetLastWriteTimeUtc("Path");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T06:57:52.953

上传时，您正在服务器上创建一个新文件。最后修改日期将是“现在”（创建文件的时间）。无法窥探用户的机器以获取此信息（这不是文件本身的一部分）。无法通过 HTTP 表单上传来完成。

现在，某些文件类型可能在文件中包含**可能**具有相关信息的元数据。如果您知道文件类型并且它确实包含此类元数据，那么您可以打开文件并查看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T06:54:05.323

你只是不这样做。出于安全原因，大多数（如果不是全部）浏览器在 Internet 场景中不提供此信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T08:51:45.060

您可以通过 javascript (HTML5) 读取日期并将其作为隐藏的表单输入字段发送。就像是

```
<script>
  function handleFileSelect(evt) {
    var files = evt.target.files; // FileList object

    // files is a FileList of File objects. List some properties.
    var output = [];
    for (var i = 0, f; f = files[i]; i++) {
      output.push(f.lastModifiedDate ? f.lastModifiedDate.toLocaleDateString() );
    }
    document.getElementById('list').innerHTML = '<ul>' + output.join('') + '</ul>';
  }
  document.getElementById('files').addEventListener('change', handleFileSelect, false);
</script> 
```

[http://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

# ruby-on-rails - ActiveRecord 包括。指定包含的列

> ID：12400860
> 
> 赞同：36
> 
> 时间：2012-09-13T06:48:17.783
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-activerecord

我有模型资料。个人资料 has_one 用户。用户模型具有字段电子邮件。当我打电话

```
Profile.some_scope.includes(:user) 
```

它调用

```
SELECT users.* FROM users WHERE users.id IN (some ids) 
```

但是我的用户模型有很多我没有在渲染中使用的字段。是否可以仅加载来自用户的电子邮件？所以，SQL应该看起来像

```
SELECT users.email FROM users WHERE users.id IN (some ids) 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-09-13T15:23:26.143

Rails 没有传递**包含**查询选项的功能。**但是我们可以通过模型下的关联声明**来传递这些参数。

对于您的场景，您需要在配置文件模型下创建与用户模型的新关联，如下所示

```
belongs_to :user_only_fetch_email, :select => "users.id, users.email", :class_name => "User" 
```

我刚刚创建了一个关联，但它仅指向用户模型。所以你的查询将是，

```
Profile.includes(:user_only_fetch_email) 
```

或者

```
Profile.includes(:user_only_fetch_email).find(some_profile_ids) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-13T09:32:19.570

如果要选择特定属性，则应使用[`joins`](http://apidock.com/rails/v3.2.8/ActiveRecord/QueryMethods/joins)而不是`includes`.

从这个[asciiccast](http://railscasts.com/episodes/181-include-vs-joins?view=asciicast)：

> include 选项并不能真正与 select 选项一起使用，因为我们无法控制 SELECT 语句的第一部分是如何生成的。如果您需要控制 SELECT 中的字段，那么您应该使用连接而不是包含。

使用`joins`：

```
Profile.some_scope.joins(:users).select("users.email") 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-12-09T01:38:46.963

你需要额外的属于模型。

对于简单的关联：

```
belongs_to :user_restricted, -> { select(:id, :email) }, class_name: 'User' 
```

对于多态关联（例如，`:commentable`）：

```
belongs_to :commentable_restricted, -> { select(:id, :title) }, polymorphic: true, foreign_type: :commentable_type, foreign_key: :commentable_id 
```

你可以选择任何`belongs_to`你想要的名字。对于上面给出的示例，您可以像 等一样使用`Article.featured.includes(:user_restricted)`它们`Comment.recent.includes(:commentable_restricted)`。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-08-09T06:16:53.873

Rails 不支持在`includes`. 你知道，这只是`lazy load`。

它使用[ActiveRecord::Associations::Preloader](https://github.com/rails/rails/blob/v4.2.10/activerecord/lib/active_record/associations/preloader.rb#L92)模块在数据实际使用之前加载关联数据。通过[方法](https://github.com/rails/rails/blob/v4.2.10/activerecord/lib/active_record/associations/preloader.rb#L92)：

```
def preload(records, associations, preload_scope = nil)
    records = Array.wrap(records).compact

    if records.empty?
      []
    else
      records.uniq!
      Array.wrap(associations).flat_map { |association|
        preloaders_on association, records, preload_scope
      }
    end
 end 
```

`preload_scope`, 的第三个参数`preload`是一种选择指定列的方法。**但是不能再懒加载了**。

### 在 Rails 5.1.6

```
relation = Profile.where(id: [1,2,3])
user_columns = {:select=>[:updated_at, :id, :name]}
preloader = ActiveRecord::Associations::Preloader.new
preloader.preload(relation, :user, user_columns) 
```

它将选择您传入的指定列。但是，它仅用于单个关联。您需要创建一个补丁`ActiveRecord::Associations::Preloader`来支持一次加载多个复杂的关联。

[这是补丁的示例](https://github.com/EarlyZhao/selectable_column_sample/blob/master/config/initializers/preloader_patch.rb)

[使用方法，例子](https://github.com/EarlyZhao/selectable_column_sample/blob/master/app/services/selectable_column/test.rb)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-04-09T05:26:28.100

我自己想要那个功能，所以请使用它。将此方法包含在您的课程中

#ACCEPTS 参数以字符串格式“ASSOCIATION_NAME:COLUMN_NAME-COLUMN_NAME”

```
def self.includes_with_select(*m)
    association_arr = []
    m.each do |part|
      parts = part.split(':')
      association = parts[0].to_sym
      select_columns = parts[1].split('-')
      association_macro = (self.reflect_on_association(association).macro)
      association_arr << association.to_sym
      class_name = self.reflect_on_association(association).class_name 
      self.send(association_macro, association, -> {select *select_columns}, class_name: "#{class_name.to_sym}")
    end
    self.includes(*association_arr)
  end 
```

您将能够调用 like: `Contract.includes_with_select('user:id-name-status', 'confirmation:confirmed-id')`，它将选择那些指定的列。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-28T21:49:38.107

使用 Mohanaj 的示例，您可以这样做：

```
belongs_to :user_only_fetch_email, -> { select [:id, :email] }, :class_name => "User" 
```

# c# - 显示 Context MenuStrip 或按钮的 Context Menu 的复选框

> ID：12400861
> 
> 赞同：8
> 
> 时间：2012-09-13T06:48:18.627
> 
> 标签：c#, winforms, contextmenu, contextmenustrip

我正在设计一个日志记录功能，用户可以在其中选择他想要记录的事件。单击按钮时，我正在显示此类菜单： ![单击按钮上的上下文菜单](../Images/6a8cbd8cc7a8f90220438bd4b500ce73.png)

用户可以选择多个事件，因此当用户单击它时，我需要在所选选项的前面显示“复选标记”。

我找不到[此问题](https://stackoverflow.com/questions/1069687/c-sharp-add-checkbox-to-winforms-context-menu)中提到的任何选项，例如“Checked”或“CheckOnClick” 。

我尝试使用 ContextMenu 和 ContextMenuStrips 但无法实现复选框。有什么建议么？？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-19T14:42:28.010

看不到您的任何代码，所以我不知道您是如何创建此菜单的。但总的来说，这是您访问该`Checked`物业的方式。

```
((ToolStripMenuItem)contextMenuStrip.Items[0]).Checked = true; //false;
((ToolStripMenuItem)contextMenuStrip.Items[1]).Checked = true; //false;
((ToolStripMenuItem)contextMenuStrip.Items[2]).Checked = true; //false; 
```

您可以将它们指定为 true 或 false。如果您已命名您的`ToolStripItems`，那么您可以直接访问它们而不是去`Items`数组。

```
contextMenuStrip.event1.Checked = true; //false; 
```

如您所见，我使用的是`ContextMenuStrip`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-03-22T22:00:13.730

将属性**CheckOnClick**更改为**True**

[![在此处输入图像描述](../Images/9eeb2310f26ff812094944c54eefb4c0.png)](https://i.stack.imgur.com/UxGJK.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-06-03T16:28:22.170

为了使其可视化，您需要确保“ShowCheckMargin”属性为 ON。否则，“.Checked”属性将默默地什么都不做。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-12T03:16:02.907

虽然您可以使用：

```
((ToolStripMenuItem)contextMenuStrip.Items[0]).Checked = true; //false; 
```

这可能很危险，因为以后您可能会重新排序菜单项，然后代码将不匹配。

相反，在**设计**器中单击菜单，然后单击项目（如 Event1）以查看属性并将项目**修饰符**设置为**Public**或**Internal**。然后在您的代码中，您可以键入项目的名称并设置检查：

```
event1_ToolStripMenuItem.Checked = true; //false; 
```

注意：您不需要输入内容菜单条的名称。只是项目名称。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-05-11T11:07:28.597

如果您没有看到复选标记，但焦点矩形与 ToolStripMenuItem 文本部分重叠，则将 ImageScaling 设置为 None 可能会有所帮助（在我的情况下，似乎焦点矩形实际上是与文本重叠的非常宽的复选标记）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-04T14:41:05.550

您可能需要在 Opening 事件中设置 Checked 属性。

# java - 使用 groupProperty 和 count 组合 Hibernate 查询和子查询

> ID：12400872
> 
> 赞同：0
> 
> 时间：2012-09-13T06:49:02.963
> 
> 标签：java, mysql, hibernate

我被我的 Hibernate 查询困住并寻求帮助:) 在我的场景中，有一个带有服务器日志的表，其中记录了用户执行的不同操作。

```
CREATE TABLE log (
    id VARCHAR(12) NOT NULL ,
    type INT(2) NOT NULL ,
    userId VARCHAR(12) NULL ,
    articleId VARCHAR(12) NULL ,
    date DATETIME NOT NULL ,
    ip VARCHAR(40) NULL ,
    description VARCHAR(999) NULL ,
    PRIMARY KEY (id) )
DEFAULT CHARACTER SET = utf8 COLLATE = utf8_general_ci; 
```

当用户阅读某篇文章时，带有他的 ip 地址、他的 userId 和 articleId 的日志被写入数据库。我试图达到的目标是 get `Article`，这是某个用户打开次数最多的。

`UserId`并且`type`在查询处理时是已知的。我能够创建类似这样的代码，但我知道它不能工作。

```
DetachedCriteria subquery = DetachedCriteria.forClass(Log.class)
                .add(Restrictions.eq("userId", uId))
                .add(Restrictions.eq("type", type))
                .setProjection(Projections.projectionList()
                    .add(Projections.groupProperty("articleId")));
Article art = (Article) session.createCriteria(Article.class)
                .add(Subqueries.propertyIn("articleId", subquery))
                .uniqueResult(); 
```

我必须添加另一个投影以获取 log 表中出现次数最多的 articleId，但我不知道如何。有人可以给我一点提示吗？

非常感谢，Ondrej :)

**编辑：** 感谢我的朋友和这个线程[Hibernate Criteria Order By](https://stackoverflow.com/questions/5112560/hibernate-criteria-order-by)，我找到了解决方案。也许这不是最好和最干净的方式，如果你有更好的想法，请写在这里。但就目前而言，它是有效的解决方案:)

```
Object[] o = (Object[])session.createCriteria(Log.class)
                .add(Restrictions.eq("userId", uId))
                .add(Restrictions.eq("userId", Log.TYPE_ARTICLE_READ))
                .setProjection(Projections.projectionList()
                    .add(Projections.groupProperty("articleId"))
                    .add(Projections.count("LogId"), "count"))
                .addOrder(Order.desc("count"))
                .setMaxResults(1)
                .uniqueResult();
session.clear();
art = (Article) session.createCriteria(Article.class)
                .add(Restrictions.eq("articleId", o[0]))
                .uniqueResult(); 
```

在对象数组中，o[] 是索引 0 上的 articleId 和索引 1 上的出现次数。

翁德雷

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T06:28:22.180

这个想法是使用计数来订购它

```
DetachedCriteria subquery = DetachedCriteria.forClass(Log.class)
    .add(Restrictions.eq("userId", uId))
    .add(Restrictions.eq("type", type))
    .addOrder(Order.desc(Projections.rowCount()))
    .setProjection(Projections.groupProperty("articleId"))
    .setMaxResults(1);

Article art = (Article) session.createCriteria(Article.class)
    .add(Subqueries.propertyEq("articleId", subquery))
    .uniqueResult(); 
```

# entity-framework - 实体框架 asp.net MVC 外键

> ID：12400873
> 
> 赞同：3
> 
> 时间：2012-09-13T06:49:05.913
> 
> 标签：entity-framework, ef-code-first, cascade

我正在尝试首先在代码中编写以下代码......因为我刚刚开始我无法......请帮助..提前谢谢
1.学生：学生将拥有学生证，名字，姓氏
学生应该属于到一个班级和一节（基本上与每个实体一对一的关系）
2\. 班级：班级将有 ClassId，名称
班级应该有学生的集合和节的集合（基本上与每个实体的多对多关系）
3\. 节：部分将有SectionID，名称
部分应该属于一个班级并且应该有学生的集合（基本上与班级的一对一关系和与学生的一对多关系）
下面是相同的代码

学生.cs

```
public class Students  
{  
    public int StudentsId { get; set; }  
    public string FirstName { get; set; }  
    public string LastName { get; set; }  
    public string UserName { get; set; }  
    public decimal Grade { get; set; }  
    public int ClassesId { get; set; }  
    public Classes Classes { get; set; }  
    public int SectionsId { get; set; }  
    public Sections Sections { get; set; }  
} 
```

类.cs

```
public class Classes  
{  
    public int ClassesId { get; set; }  
    public string Name { get; set; }  

    public ICollection<Sections> Sections { get; set; }  
} 
```

Sections.cs

```
public class Sections
{
    public int SectionsId { get; set; }
    public string Name { get; set; }
    public int ClassesId { get; set; }

    public Classes Classes { get; set; }
    public ICollection<Students> Students { get; set; }
} 
```

如果我这样做，我会收到错误消息：

> 在表“Sections”上引入 FOREIGN KEY 约束“FK_dbo.Sections_dbo.Classes_ClassesId”可能会导致循环或多个级联路径。指定 ON DELETE NO ACTION 或 ON UPDATE NO ACTION，或修改其他 FOREIGN KEY 约束。

我知道我可以使用流畅的 API 并告诉不要在删除时级联来摆脱这个错误，但我不想这样做。有没有其他解决方案？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:16:35.630

对于您当前的模型，不，除了对某些关系禁用级联删除之外别无他法。

您的所有关系都是必需的，这意味着如果删除了一个班级，您将删除该班级的部分和学生（由于 中所需的导航属性，`Classes`没有公开的学生集合）。但是，如果这些部分被删除，那么该部分的学生也会被删除 - 这是.`Classes``Students``Students`

我不知道您的模型的确切含义，但对我来说，如果班级被删除，删除班级的所有学生听起来很奇怪。学生总是*必须*上课还是不能暂时没有课堂作业（以及部分作业）？也许学生有半年的假期学期，不参加任何课程？

在这种情况下，您可以将关系`Students`设为可选。只需将外键属性声明为可为空：

```
public class Students  
{
    //...
    public int? ClassesId { get; set; }  
    public Classes Classes { get; set; }  
    public int? SectionsId { get; set; }  
    public Sections Sections { get; set; }  
} 
```

这将解决您在`Students`类中的多个级联删除路径的问题，因为默认情况下可选关系没有启用级联删除。`Classes`和之间的关系`Sections`仍然是必需的，因此删除一个班级会同时删除属于该班级的所有部分，但不会再删除学生。

# java - 从jar动态加载类

> ID：12400874
> 
> 赞同：5
> 
> 时间：2012-09-13T06:49:07.993
> 
> 标签：java, classloader, apache-pig

我知道我们可以使用自定义类加载器动态加载类。但这里我的问题是我的班级本身取决于其他班级

我的任务是获取 PigServer 对象。所以我使用以下代码加载 PigServer 类

```
_pigServerClass = _classLoader.loadClass("org.apache.pig.PigServer"); 
```

但是这里 PigServer 类本身依赖于许多其他类。

所以当我试图获取 PigServer 类的实例时，它会显示以下错误

```
java.lang.ClassNotFoundException: org.apache.commons.logging.LogFactory
java.lang.ClassNotFoundException:org.apache.log4j.AppenderSkeleton
 etc.. 
```

**谁能告诉如何解决这个问题？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:05:43.747

好像有什么误会。如果你在一个文件夹中有所有需要的 jar，比如“lib”，你可以设置一个类加载器，如下所示：

```
 File libs = new File("lib");
    File[] jars = libs.listFiles(new FileFilter() {
        public boolean accept(File pathname) {
            return pathname.getName().toLowerCase().endsWith(".jar");
        }
    });

    URL[] urls = new URL[jars.length];
    for (int i=0; i<jars.length; i++) {
        urls[i] = jars[i].toURI().toURL();
    }
    ClassLoader uc = new URLClassLoader(urls,this.getClass().getClassLoader());

    Class<?> pigServerClz = Class.forName("org.apache.pig.PigServer", false, uc);
    Object pigServer = pigServerClz.newInstance();
    // etc... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T06:55:25.163

你是如何创建你的 ClassLoader 的？

您是否指定了另一个“父”类加载器，可以委派哪些类加载？

# ruby - 如何在 ruby 脚本中继承模块？

> ID：12400876
> 
> 赞同：-3
> 
> 时间：2012-09-13T06:49:12.237
> 
> 标签：ruby

我有一个像

ABC(文件夹) ----> abc.rb, def.rb

DEF(文件夹) ----> a1.rb, b1.rb

GHI(文件夹) ----> x1.rb, y1.rb

我想继承/包含 def.rb，这是 abc.rb 中的一个模块，然后 a1 应该继承 abc.rb 并且应该能够访问 def.rb 中定义的所有方法。

现在，我在每个脚本文件中都包含了 def.rb，但我不想这样做。我只想垂直继承。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T08:07:46.207

很难处理类似 ABC 的命名系统）

如果你想在每个类中包含 10 个模块，你可以这样做。假设您有模块`ModuleTest::Files`和`ModuleTest::Network`：

**在 module_test/network.rb**

```
module ModuleTest
    module Network
        def network
            puts 'hello from ModuleTest::Network#network'
        end
    end
end 
```

**在 module_test/files.rb**

```
module ModuleTest
    module Files
        def files
            puts 'hello from ModuleTest::Files#files'
        end
    end
end 
```

你可以像这样制作一些`ModuleTest::Base`课程：

```
require 'module_test/files'
require 'module_test/network'

module ModuleTest
    class Base
        include Files
        include Network
    end
end 
```

这个类包括你拥有的所有功能，所以从它继承你的类：

```
require 'module_test/base'

class Foo < ModuleTest::Base 
end

foo = Foo.new
foo.network
foo.files 
```

输出：

```
>ruby -I. foo.rb
hello from ModuleTest::Network#network
hello from ModuleTest::Files#files 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T07:55:28.490

首先要指出的是，我怀疑我误解了您的问题，因为我不明白您为什么要这样做。所以如果是这种情况，请指出，我会删除它。

您描述的过程有效（至少在 Ruby 1.9.3 中对我而言）。

```
module Def
  def method_from_def
    puts "Method from Def"
  end
end

class Abc
  include Abc
end

class X < Abc
end

X.new.method_from_def #=> "Method from Def" 
```

您可能需要在您的 require 语句中稍微具体一点，但是如果您已经能够“包含”该脚本，那么您已经把它记下来了。（除非“包含”是指将其复制并粘贴到源文件中。）

# c#-4.0 - 图片转换产生异常

> ID：12400879
> 
> 赞同：2
> 
> 时间：2012-09-13T06:49:18.517
> 
> 标签：c#-4.0, sql-server-2008-r2

我需要三个表的记录，我为此编写了 sql 查询。但是在前端，当我将值分配给文本框和图片框时，生成了 excption。

> 来源：System.Drawing 消息：参数无效。方法：System.Drawing.Image FromStream(System.IO.Stream, Boolean, Boolean) 堆栈跟踪：
> 
> 在 System.Drawing.Image.FromStream（流流，布尔 useEmbeddedColorManagement，布尔 validateImageData） 在 System.Drawing.Image.FromStream（流流）。

我的 sql 查询是

```
select s.Name,s.FatherName,CAST(s.Picture as varbinary)as picture,s.Description,SUM(l.Amount) as Loan,SUM(p.Amount) as Paid from Staff s 
left outer join Loan l on s.StaffID=l.StaffID left outer join Payment p on l.StaffID=p.StaffID where s.StaffID=17 group by s.Name,s.FatherName,Description,CAST(Picture as varbinary) 
```

# wcf - 双工联合绑定配置不起作用

> ID：12400881
> 
> 赞同：2
> 
> 时间：2012-09-13T06:49:20.753
> 
> 标签：wcf, wcf-data-services, wcf-binding, wcf-security, wcf-client

我正在开发一个双工联合 wcf 服务，我的联合方案工作正常，但是当我尝试使其双工时抛出异常“无法验证传入策略”

我认为它与我的配置有关，但仍然无法找出错误，

以下是我的配置：

1.  对于我的主要服务：

    ```
    <bindings>
        <customBinding>
            <binding name='MyServiceBinding'>
                <security authenticationMode='SecureConversation'>
                    <secureConversationBootstrap authenticationMode='IssuedTokenForCertificate'/>
                    <issuedTokenParameters>
                        <issuerMetadata address='http://localhost:62751/TokenIssuer.svc/mex'/>
                    </issuedTokenParameters>
                </security>
                <compositeDuplex/>
                <oneWay/>
                <httpTransport/>
            </binding>
        </customBinding>
    </bindings>

    <services>
        <service name="MyService.MyService"
                           behaviorConfiguration='MyServiceBehavior'>
            <endpoint address="Response"
                                  binding="customBinding"
                                  bindingConfiguration='MyServiceBinding'
                                  contract="MyService.IMyService" />
            <endpoint address="mex"
                      binding="mexHttpBinding"
                      contract="IMetadataExchange" />

        </service>
    </services>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" /> 
    ```

2.  STS 配置

和 3\. 客户端配置

```
<system.serviceModel>
    <bindings>
        <customBinding>
                <binding name='MyServiceBinding'>
                    <security authenticationMode='SecureConversation'>
                        <secureConversationBootstrap authenticationMode='IssuedTokenForCertificate'/>
                        <issuedTokenParameters>
                            <issuer address='http://localhost:62751/TokenIssuer.svc' binding='wsHttpBinding' bindingConfiguration='MyTokenIssuer'/>
                        </issuedTokenParameters>
                    </security>
                    <compositeDuplex/>
                    <oneWay/>
                    <httpTransport/>
                </binding>

        </customBinding>

        <wsHttpBinding>
            <binding name="MyTokenIssuer">
                <security mode="Message"/>
            </binding>
        </wsHttpBinding>

    </bindings>

    <behaviors>
        <endpointBehaviors>
            <behavior name="GetResponseClientBehavior">
                <clientCredentials>
                    <serviceCertificate>
                        <authentication certificateValidationMode="PeerOrChainTrust"/>
                    </serviceCertificate>
                </clientCredentials>
            </behavior>
        </endpointBehaviors>
    </behaviors>

    <client>
        <endpoint name="WSFederationHttpBinding_IMyService" address="http://localhost:53121/MyService.svc/Response" binding="customBinding" bindingConfiguration="MyServiceBinding" behaviorConfiguration="GetResponseClientBehavior" contract="IMyService">
            <identity>
                <certificateReference storeLocation="CurrentUser" storeName="TrustedPeople" x509FindType="FindBySubjectName" findValue="BookStoreService.com"/>
            </identity>
        </endpoint>
    </client>        
</system.serviceModel> 
```

# java - Java中的随机变量

> ID：12400883
> 
> 赞同：-3
> 
> 时间：2012-09-13T06:49:31.690
> 
> 标签：java, random

我的教授要求我们生成 0 到 0.5 之间的随机变量。我写了这段代码：

```
public class Random_Number_Generator {

  double randomGenerator()  {
    Random generator = new Random();
    double num = generator.nextDouble() * (0.5 - 0);   
    return num;
  }
} 
```

但我的教授说这段代码生成的是随机*数*而不是随机*变量*。这意味着什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T07:02:45.607

显然我看错了帖子；阅读以下内容时应牢记这一点。

* * *

在该代码中，`num`和`generators`是局部*变量*。一个随机*数*（一个*值*）被分配给使用由*变量*命名`num`的 Random*对象*调用的`generator` *变量*。最后，存储在*变量中的**值*从方法中返回。 *`num`*

 *在任何情况下，[`generator.nextDouble()`](http://docs.oracle.com/javase/7/docs/api/java/util/Random.html#nextDouble%28%29)返回一个介于 之间的值`[0,1)`以获得介于 之间的值`[0,0.5)`，只需将其缩放一半：将其除以 2，或者*将*其乘以一半。

上面的`- 0`代码很傻，但是“好的”，因为`(0.5 - 0) == 0.5`.

* * *

（此外，最好开始创建*一个*Random 实例并重新使用它。虽然这个问题在 .NET 中更为明显。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T08:58:08.670

现在，据我所知，实际*随机变量是一个将**值*映射到它们的*概率的**函数*。我不认为你应该返回一个函数，所以我已经抓住了这个：最接近我猜你应该做的事情：

 **```
import java.util.*;
import java.lang.*;

class RandomVar
{
    TreeMap<Double, Integer> variables;

    public RandomVar()
    {
        variables = new TreeMap<Double, Integer>();

        int count = Main.RandGen.nextInt(15);
        double probabilityLeft = 1.0;
        for (int i = 0 ; i < count - 1; i++)
        {
            int toPut = Main.RandGen.nextInt(100);
            while (variables.containsValue(toPut)) toPut = Main.RandGen.nextInt(100);
            double prob = probabilityLeft * Main.RandGen.nextDouble();
            variables.put(prob, toPut);
        }
        int toPut = Main.RandGen.nextInt(100);
        while (variables.containsValue(toPut)) toPut = Main.RandGen.nextInt(100);
        double prob = probabilityLeft;
        variables.put(prob, toPut);
    }

    public int getValue()
    {
        double rand = Main.RandGen.nextDouble();
        double sum = 0;
        for (double prob : variables.keySet()) //keySet() is sorted ascending
        {
            if (prob >= rand)
                return variables.get(prob);
        }
        return variables.get(variables.lastKey());
    }

    //Shows probabilities of values
    public void test()
    {
        for (double key : variables.keySet())
            System.out.println(key + " :: " + variables.get(key));
    }
}

class Main
{
    public static Random RandGen = new Random();    

    public static void main (String[] args)
    {
        RandomVar rv = new RandomVar();
        rv.test();
        System.out.println("------------------------------");
        for (int i = 0; i < 40 ; i++)
            System.out.print(rv.getValue() + ", ");
    }
} 
```

这是一个非常糟糕的解决方案，基本上是一个允许您以一组（随机）概率返回值的类。我仍然不知道这是否是您教授想要的...

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-13T07:32:53.190

试试这个代码：

```
public static void main(String[] arg) {
    System.out.print(Random());
}

public static double Random() {
    double START = 0;
    double END = 0.5;
    Random random = new Random();
    double token = RandomNumber(START, END, random);
    return token;
}

public static double RandomNumber(double aStart, double aEnd, Random aRandom) {
    if (aStart > aEnd) {
        throw new IllegalArgumentException("Start cannot exceed End.");
    }
    // get the range, casting to long to avoid overflow problems
    double range = aEnd - aStart;
    // compute a fraction of the range, 0 <= frac < range
    double fraction =  (range * aRandom.nextDouble());
    double randomNumber =  (fraction + aStart);
    return randomNumber;
} 
```***

# ios - 如何解决 2.2 iphone 应用拒绝出现错误的应用将被拒绝

> ID：12400887
> 
> 赞同：0
> 
> 时间：2012-09-13T06:49:39.327
> 
> 标签：ios, iphone, appstore-approval

我向应用商店提交了iphone应用程序，它被解决中心的点拒绝：

2.2 出现错误的应用程序将被拒绝

> 我们发现，在运行 iOS 5.1.1 的 iPhone 4 上审查时，您的应用在 Wi-Fi 和蜂窝网络上出现了一个或多个错误，这不符合 App Store 审查指南。

我没有使用任何与网络连接相关的代码。这个应用程序将简单地创建一个 PDF 并通过默认邮件编写器（MFMailComposerViewController）发送就是这样..

有没有可能解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:58:02.007

MFMailComposerViewController 是网络相关的代码。如果应用程序未连接到网络，您需要处理失败情况，因此无法发送电子邮件。我建议测试您的应用程序，看看它如何处理不在数据网络上的情况。

您可以处理在委托方法中未正确发送电子邮件时发生的情况。

```
- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error;
{
    if (result == MFMailComposeResultFailed) {
         //Add error handling here
    }
} 
```

# oracle - 在存储过程中添加日志以显示插入数据库的记录数

> ID：12400898
> 
> 赞同：1
> 
> 时间：2012-09-13T06:50:21.447
> 
> 标签：oracle, stored-procedures

我有一个 shell 脚本，它调用一个在 Oracle DB 中插入数据的存储过程。我需要 4-5 小时来运行该程序。我想在存储过程中添加一个日志，它会显示编号。在特定时间间隔（例如每 20 分钟）后插入数据库的记录数。有没有办法在存储过程中添加日志？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:55:45.877

这取决于你是怎么做的。如果你只是做一个直接的插入`insert into ... select ...`，那么没有，没有办法。但是，如果您在那里有某种循环，您可以使用该[`dbms_application_info`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_appinf.htm#ARPLS65225)包在 V$SESSION 视图中记录您的操作。

我通常会这样做：

```
dbms_application_info.set_module('Updating Blah','Total: ' || <index var>); 
```

第一个参数是`module_name`，可以在`module`列上查看，第二个参数是`action_name`，即`action`V$SESSION中的列。

或者，您始终可以插入或更新一个较小的表，该表跟踪您正在做的事情，因此可以通过异步查询。

# c++ - 如何将方程放入矩阵？

> ID：12400899
> 
> 赞同：0
> 
> 时间：2012-09-13T06:50:21.763
> 
> 标签：c++, io, c++11, tokenize

我正在开发一个解决多个方程的程序，但这不相关。我遇到的问题是解释方程式。

例如，我有一个名为的文件`data.txt`，其内容如下：

```
2x - 5y + 3z = 10
5x + y - 2z = 4 
```

我一直在尝试解释这一点，但没有成功，因为我认为 C++ 会有类似 str.split() 的东西。我想到的是一个包含这些内容的数组：

```
2 -5 3 10
5 1 -2 4 
```

请问我该怎么做？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-13T11:40:20.927

矢量 > 数据

逐行读取data.txt：字符串行

使用分隔符“\t+-=”分割线：向量标记

将标记转换为数字格式：向量 v

将 v 推送到数据：data.push_back(v)

更新：

```
vector<string> split(const string &s, const string &d)
{
    vector<string> t;
    string::size_type i = s.find_first_not_of(d);
    string::size_type j = s.find_first_of(d,i);
    while (string::npos != i || string::npos != j) {
        t.push_back(s.substr(i,j-i));
        i = s.find_first_not_of(d,j);
        j = s.find_first_of(d,i);
    }
    return t;
}

int main()
{
    vector<vector<double> > x;
    ifstream ifs("data.txt");
    string ls;
    while (getline(ifs,ls))
    {
        vector<string> ts = split(ls," \t+-=");
        vector<dobule> v;
        for (auto& s : ts)
            v.push_back( atof(s.c_str()) );
        x.push_back(v);
    }
    return 0;
} 
```

# android - 图像没有出现在 Jellybean 中，在所有其他版本中都可以正常工作

> ID：12400909
> 
> 赞同：0
> 
> 时间：2012-09-13T06:50:42.500
> 
> 标签：android, image, android-4.2-jelly-bean

我有一个游戏，它使用一些自定义按钮自动调整大小以适应屏幕水平。按钮中包含的图像在所有 android 版本（包括 4.0.3）中都能正常显示。然而突然在软糖上，他们停止了展示。按钮仍然有效，只是不显示图像。

```
 <LinearLayout
 android:orientation="horizontal"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:gravity="bottom"
 android:layout_weight="0.55"
 android:id="@+id/dicemenu">

 <com.surreall.yacht.SquareButton        
    android:layout_height="fill_parent"
    android:layout_width="0dip"          
    android:layout_weight="1"
>
    <ImageView
    android:id="@+id/die1"
    android:layout_gravity="center"
    android:adjustViewBounds="true"
    android:scaleType="centerInside"
    android:layout_height="wrap_content"
    android:layout_width="0dp"          
    android:layout_weight="1" 
    android:layout_margin="9dp" 
    />

  </com.surreall.yacht.SquareButton>

  <com.surreall.yacht.SquareButton        
    android:layout_height="fill_parent"
    android:layout_width="0dip"          
    android:layout_weight="1"
>
    <ImageView
    android:id="@+id/die2"
    android:layout_gravity="center"
    android:adjustViewBounds="true"
    android:scaleType="centerInside"
    android:layout_height="wrap_content"
    android:layout_width="0dp"          
    android:layout_weight="1" 
    android:layout_margin="9dp" 
    />

  </com.surreall.yacht.SquareButton>

   <com.surreall.yacht.SquareButton         
    android:layout_height="fill_parent"
    android:layout_width="0dip"          
    android:layout_weight="1"
    >
    <ImageView
    android:id="@+id/die3"
    android:layout_gravity="center"
    android:adjustViewBounds="true"
    android:scaleType="centerInside"
    android:layout_height="wrap_content"
    android:layout_width="0dp"          
    android:layout_weight="1" 
    android:layout_margin="9dp"
    />

  </com.surreall.yacht.SquareButton>
  <com.surreall.yacht.SquareButton         
    android:layout_height="fill_parent"
    android:layout_width="0dip"          
    android:layout_weight="1"
>
    <ImageView
    android:id="@+id/die4"
    android:layout_gravity="center"
    android:adjustViewBounds="true"
    android:scaleType="centerInside"
    android:layout_height="wrap_content"
    android:layout_width="0dp"          
    android:layout_weight="1" 
    android:layout_margin="9dp" 
    />

  </com.surreall.yacht.SquareButton>
  <com.surreall.yacht.SquareButton         
    android:layout_height="fill_parent"
    android:layout_width="0dip"          
    android:layout_weight="1"
>
    <ImageView
    android:id="@+id/die5"
    android:layout_gravity="center"
    android:adjustViewBounds="true"
    android:scaleType="centerInside"
    android:layout_height="wrap_content"
    android:layout_width="0dp"          
    android:layout_weight="1" 
    android:layout_margin="9dp" 
    />

  </com.surreall.yacht.SquareButton> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T09:14:39.720

在使用你的 ImageView 之前试试这个

```
 myImageView.setLayerType(View.LAYER_TYPE_SOFTWARE, null); 
```

希望这对您的问题有所帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:35:35.070

可能不是我正在寻找的“修复”，但我发现我正在使用 .gif 文件作为我的图像，我想这不推荐用于 android。建议改用.png，我切换了，现在图像显示正常...

# javascript - 从全屏退出不起作用？

> ID：12400912
> 
> 赞同：2
> 
> 时间：2012-09-13T06:50:53.523
> 
> 标签：javascript, jquery, firefox, fullscreen

我正在开发一个在全屏模式下工作的应用程序。我正在使用 iframe 转到全屏。问题是如何在按钮单击时关闭全屏？

我正在使用这段代码：

```
function exitfs(){
    if (document.cancelFullScreen) {
        document.cancelFullScreen();
    } else if (document.mozCancelFullScreen) {
        document.mozCancelFullScreen();
    } else if (document.webkitCancelFullScreen) {
        document.webkitCancelFullScreen();
    }
} 
```

如果我通过firebug控制台运行它可以正常工作，但在与click事件绑定时不起作用？

```
 function fullscreen(keys) {
    var f = e('newIfrane');
    if (keys) {
        if (f.mozRequestFullScreen) {
            f.mozRequestFullScreenWithKeys();
        } else if (f.webkitRequestFullScreen) {
            f.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);
        }
    } else {
        if (f.mozRequestFullScreen) {
            f.mozRequestFullScreen();
        } else if (f.webkitRequestFullScreen) {
            f.webkitRequestFullScreen();
        }
    }
} 
```

像这样调用这个函数`fullscreen(false);`

**注意：** iframe 以全屏模式加载同一页面。在 Page 中，单击该图像时会出现一个图像，我称之为 **exitfs()**。

我不明白是什么问题？谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T12:08:35.223

正如**路人**所建议的那样，我尝试了`parent.exitfs();`它，它对我有用。希望它会帮助某人...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-28T11:52:35.950

```
 class Clickfullpage implements ClickHandler
 {
  public void onClick(ClickEvent event)
  {
    hello1(counter);
  }
}

public static native void hello1(int counter)
/*-{
 var body=$doc.getElementsByTagName("body")[0];
 var id=$doc.getElementById("vp");
 cancelFullscreen();
 function cancelFullscreen() 
   { 
      if ($doc.mozcancelFullScreen) 
      {
         $doc.mozcancelFullScreen();
      } 
     else
     if ($doc.webkitcancelFullScreen) 
      {
        $doc.webkitcancelFullScreen();
      }
   }   
}-*/; 
```

# c# - 从数据库 C# 中删除选定的数据

> ID：12400919
> 
> 赞同：0
> 
> 时间：2012-09-13T06:51:34.320
> 
> 标签：c#, asp.net, gridview

我可以知道如何从`GridView`using a中删除行`LinkButton`吗？我在 google 中找到的代码正在使用 databound `GridView`。我根据使用`DropDownList`. 谢谢

```
protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
{
    string username;
    username = HttpContext.Current.User.Identity.Name;
    if (DropDownList1.SelectedValue.Equals("Expired"))
    {
        SqlConnection conn4 = new SqlConnection(My connection);
        SqlDataAdapter adapter;
        string mySQL2;
        mySQL2 = 
            "SELECT Title,MessageStatus From Table_Message WHERE Username ='" 
            + username 
            + "' AND MessageStatus = 'Expired' AND Method = 'Email'";
        adapter = new SqlDataAdapter(mySQL2, conn4);
        conn4.Open();

        DataSet ds3 = new DataSet();
        adapter.Fill(ds3);
        //Execute the sql command
        GridView1.DataSource = ds3;
        GridView1.DataBind();
        conn4.Close();

    }
    else if (DropDownList1.SelectedValue.Equals("Pending"))
    {
        SqlConnection conn3 = new SqlConnection(My connection);
        SqlDataAdapter adapter1;
        string mySQL;
        mySQL = 
            "SELECT Title,MessageStatus From Table_Message WHERE Username ='" 
            + username 
            + "' AND MessageStatus = 'Pending' AND Method = 'Email'";
        adapter1 = new SqlDataAdapter(mySQL, conn3);
        conn3.Open();

        DataSet ds2 = new DataSet();
        adapter1.Fill(ds2);
        //Execute the sql command
        GridView1.DataSource = ds2;
        GridView1.DataBind();
        conn3.Close();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:48:42.717

您可以采取以下步骤

1）将网格的DataKeyNames映射到表的主键

2）在LinkBut​​ton上有

```
<asp:TemplateField HeaderText="Action">
                        <ItemTemplate>
<asp:ImageButton ID="imgBtnDelete" runat="server" ImageUrl="/_layouts/images/DELETE.GIF"
                            AlternateText="Delete" CommandName="DeleteUser" CausesValidation="false" ToolTip="Delete"/>
                        </ItemTemplate> 
```

3）在rowdatabound事件中绑定命令参数

```
 protected void GvwUser_RowDataBound(object sender, GridViewRowEventArgs e)
    {

        ImageButton imgBtnDelete;

        if (e.Row.RowType == DataControlRowType.DataRow)
        {            
            imgBtnDelete = (ImageButton)e.Row.FindControl("imgBtnDelete");
            imgBtnDelete.CommandArgument = gvwUser.DataKeys[e.Row.RowIndex].Value.ToString();

        }
    } 
```

4）在后面的代码中编写实现为

```
protected void GvwUser_RowCommand(object sender, GridViewCommandEventArgs e)
    {
int userId = 0;
if (e.CommandName.Equals("DeleteUser"))
        {
            //get the user id
            userId = Convert.ToInt32(e.CommandArgument.ToString());

            //GetUser will delete the user
            if (DeleteUser(userId) > 0)
            {
             Page.ClientScript.RegisterStartupScript(this.GetType(), "Delete", "alert('User Deleted.');", true);
            }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T07:12:47.697

如果您允许匿名用户访问列表：

这可能是一个选择：

1.  创建一个删除.aspx
2.  在您的查询中获取主键列（例如：Id、UId...）
3.  在网格视图中使 DataKeyNames = "Id"
4.  在linkbutton的onclick事件中，将用户重定向到delete.aspx?Id='Your data id'
5.  delete.aspx 只能由授权用户访问。保存意外的数据丢失。
6.  在 delete.aspx 中放置一个删除按钮，它的 onclick 事件会删除具有该唯一 ID 的记录。
7.  这可能是一种安全地做事的方式。

如果您显示列表以仅授权用户，那么您可以使用 ajax 编写删除代码：

*   OnClientClick()：编写发送请求的javascript函数：`delete.aspx?Id='Id'`，删除那里的记录。

# android - 单击自定义列表视图项 Edittext 时打开自定义对话框

> ID：12400920
> 
> 赞同：1
> 
> 时间：2012-09-13T06:51:39.413
> 
> 标签：android

单击我的自定义列表视图项时，我想打开一个自定义对话框（）。

我试过了，但无法打开对话框。这是代码详细信息：

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);

    Dialog dialog = new Dialog(this);
    dialog.setContentView(R.layout.input_dialog);
    dialog.setTitle("What about Today!");

           **//initialize custom dialog items.**
    EditText mood = (EditText) dialog.findViewById(R.id.editTextyourMode);
    Button btnSaveButton = (Button) dialog
            .findViewById(R.id.btnSaveMyMoods);
    Button btnClear = (Button) dialog
            .findViewById(R.id.btnClear);
    dialog.show();

} 
```

这是自定义数组适配器 getView(...) 方法。

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {

LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

View rowView = inflater.inflate(R.layout.sell_info_list, parent, false);

TextView product_id = (TextView) rowView.findViewById(R.id.product_id);//
product_id.setText(products.get(position).getProduct_id());

EditText product_quantity = (EditText) rowView
            .findViewById(R.id.editTextQuantity);

return rowView;
} 
```

最后，我想在单击列表视图项编辑文本时打开此对话框。有人帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:57:54.347

抱歉，我没有看到您使用的是 CustomAdapter，请在适配器中执行此操作

```
rowView.setClickable(true);
    rowView.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View paramView)
                    {
                      //if you want you can use the "position" value to get the desired row items.
                    }
                    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T07:09:12.047

尝试：

```
// Click event for single list row
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
super.onListItemClick(l, v, position, id);
                EditText edit = (EditText) (findViewById(R.id.editText));
                if (edit != null) {
                    edit.setOnClickListener(new View.OnClickListener() {

                        @Override
                        public void onClick(View v) {
                            Toast.makeText(MainActivity.this, "CLICKED",
                                    Toast.LENGTH_LONG).show();
                        }
                    });
                } else {
                    Toast.makeText(MainActivity.this, "EditText not found",
                            Toast.LENGTH_LONG).show();
                }
            }
        }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T07:18:55.420

在您的编辑文本上设置一个 onclick 侦听器，如果它没有弹出任何对话框，请尝试设置您的 edittext android:focusable = "false" 的设置，也就是说，如果您已经在您的编辑文本上放置了一个侦听器，但仍然没有任何反应

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T08:50:46.467

我在适配器的 getView(...) 中打开从这些内部键入的对话框，并且还可以在选定的列表视图项 EditText 上显示。

```
 rowView.setClickable(true);
    rowView.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            dialog = new Dialog(context);
            dialog.setContentView(R.layout.input_dialog);
            dialog.setTitle("What about Today!");

            final EditText txtMode = (EditText) dialog
                    .findViewById(R.id.editTextyourMode);
            Button btnSave = (Button) dialog
                    .findViewById(R.id.btnSaveMyMoods);

            btnSave.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {

                    String data = txtMode.getText().toString();
                    product_quantity.setText(data);
                    dialog.dismiss();
                    Log.d("data", data);

                }
            });
            dialog.show();
        }
    }); 
```

然后屏幕看起来像这样。 ![在此处输入图像描述](../Images/b3a910a50f7f4ac1ec7ed53946a13141.png)

**现在面临一个问题。我的列表视图只有 10 个项目。当我滚动列表视图时，项目文本消失了，这是看不见的**

感谢大家分享知识。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-20T05:44:24.237

在适配器中编写此代码

```
EditText product_quantity = (EditText) convertView
                .findViewById(R.id.editTextQuantity);
        product_quantity.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Dialog dialog = new Dialog(context);
                dialog.setContentView(R.layout.input_dialog);
                dialog.setTitle("What about Today!");

                //initialize custom dialog items.**
                EditText mood = (EditText) dialog.findViewById(R.id.editTextyourMode);
                Button btnSaveButton = (Button) dialog
                        .findViewById(R.id.btnSaveMyMoods);
                Button btnClear = (Button) dialog
                        .findViewById(R.id.btnClear);
                dialog.show();

            }
        }); 
```

# java - CyclicBarrier vs CountDownLatch 用于同步

> ID：12400922
> 
> 赞同：2
> 
> 时间：2012-09-13T06:51:50.217
> 
> 标签：java, multithreading

我已经阅读了 Bloch 的 Item 69(Effective Java) 并且有一个用于定时执行的简单框架的示例，它使用 3 个`CountDownLatch`同步线程。Bloch 还说这个例子可以用 1 重写`CyclicBarrier`。我试图这样做并获得下一个代码：

```
 public static long time(ExecutorService exec, int count) throws InterruptedException, BrokenBarrierException {
            CyclicBarrier cyclicBarrier = new CyclicBarrier(count+1);
            for (int i = 0; i < count; i++) {
                exec.submit(new Worker(cyclicBarrier, i));
            }
            System.out.println("Start processing");
            cyclicBarrier.await();
            long time = System.nanoTime();
            cyclicBarrier.await();
            long elapsedTime = (System.nanoTime() - time)/1000;
            System.out.println("FIN. ");
            return elapsedTime;

        }
private static class Worker implements Runnable {

        final CyclicBarrier cyclicBarrier;
        int workerNumber;

        Worker(CyclicBarrier cyclicBarrier, int workerCount) {
            this.cyclicBarrier = cyclicBarrier;
            this.workerNumber = workerCount;
        }

        public void run() {
            try {
                cyclicBarrier.await();
                work();
                cyclicBarrier.await();
            } catch (InterruptedException e) {
                e.printStackTrace();
            } catch (BrokenBarrierException e) {
                e.printStackTrace();
            }
        }
        private void work() {
            System.out.println("Worker " + workerNumber + " starts his job");
            System.out.println("Worker " + workerNumber + " finishes his job");
        }

    } 
```

但我认为这里有一个问题（在`time`方法中）：首先`await`我尝试测量线程执行的开始时间，所以我想在所有其他线程开始之前测量这个时间。没有任何保证 this( `long time = System.nanoTime();`) 指令会在另一个线程启动之前执行。

如何使用 CyclicBarrier 实现这样的功能？有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T08:28:51.257

`CyclicBarrier`允许您定义要在所有线程到达屏障之后但在它们恢复执行之前执行的屏障操作。用来`CyclicBarrier(int, Runnable)`定义它。

显然，在您的情况下，您可以在工作之前和完成之后区分屏障动作的执行，如下所示：

```
class TimingAction implements Runnable {
    private boolean running;
    private long start;
    private long elapsed;

    public void run() {
        if (running) {
            elapsed = System.nanoTime() - start;
            running = false;
        } else {
            start = System.nanoTime();
            running = true;
        }
    }
    ...
}

TimingAction timer = new TimingAction();
CyclicBarrier cyclicBarrier = new CyclicBarrier(count + 1, timer);
...
long elapsed = timer.getElapsed(); 
```

# iphone - Finder 窗口中的 Mac OS Lion 无法看到 iPhone Simulator 文件夹

> ID：12400926
> 
> 赞同：0
> 
> 时间：2012-09-13T06:52:01.227
> 
> 标签：iphone, ios, xcode, macos, finder

嗨，在终端的我的 mac 机器上，我可以使用 iPhone 模拟器，并且可以通过以下方式访问我的应用程序文档目录 `cd Library/Application\ Support/iPhone\ Simulator/5.1/Applications/myAppsID/Documents`

但是如果我尝试在应用程序支持目录内的查找器窗口中打开相同的路径，则没有 iPhone 模拟器目录。

注意：我试过

```
$ cd ~
$ chflags nohidden Library 
```

但没有运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T07:01:02.093

或者，您可以从以下位置前往：

Finder -> (menu)Go -> Go to Folder，然后输入：

```
~/Library/Application Support/iPhone Simulator/5.1/Applications/myAppsID/Documents 
```

那里不需要反斜杠，因为它不是任何类型的终端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T07:05:10.400

在 Finder 中按`CMD-Shift-G`，然后在弹出窗口中输入您要前往的路径。

请记住排除反斜杠:)

所以它变成： `~/Library/Application Support/iPhone Simulator/`

当您在那里时，您可能希望将文件夹拖放到查找器窗口的“收藏夹”部分。选择`iPhone Simulator`文件夹而不是`5.1`文件夹，收藏夹将相应命名

# ruby-on-rails-3 - 常量的属性显示在本地 win 实例的视图中，放在 aws 上时无法正确显示/更新

> ID：12400929
> 
> 赞同：1
> 
> 时间：2012-09-13T06:52:24.427
> 
> 标签：ruby-on-rails-3, passenger

所以我创建了一个常量来引用我在初始化时执行的计划对象：

```
rule_engine = Ruleby::Core::Engine.new
Rails.logger.debug "#{Time.now.utc} - Created New Rules Engine"
RULES_ENG = RulesEngineCaller.new(rule_engine) 
```

它计划通过我的代码每 x 分钟运行一次，这会调用一个运行的规则引擎，我会跟踪它运行的频率，它的初始化如下：

```
require_relative 'rules_eng'
require_relative 'notification'

class RulesEngineCaller
  # To change this template use File | Settings | File Templates.
  attr_accessor :rule_engine, :last_processing_timestamp, :last_processing_duration,     :last_processing_duration_history

  def initialize(rule_engine)
    @last_processing_timestamp = Time.now.utc
    @last_processing_duration = 0
    @last_processing_duration_history = Array.new
  end 
```

当调用实际函数时会更新一些值：

```
@last_processing_duration = Time.now.utc - d 
```

然后应该使用以下命令将其显示为我的家庭“视图”的一部分：

```
<%= RULES_ENG.last_processing_duration.to_s %> 
```

这在我的本地副本上绝对完美，它位于 Windows 和 MySQL 等之下......但我把它放在我拥有的 AWS 实例上，并且这些值要么根本不显示，要么它们显示为它们本来应该存在的值过去，直到我刷新它并返回根本不显示它。

我能想到的唯一区别是：Redhat、Passenger 和 Apache 使其在我的本地副本只是本地的 AWS 上工作。并将其更改为 RULES::last_processing_duration 等似乎没有太大区别。

嗯，帮助这把我逼到了墙边，因为当我回到它大约 3 周时，我一直试图解决这个问题……Rails 并不是我有大量经验的东西。

# ubuntu - libc6-dbg安装错误

> ID：12400931
> 
> 赞同：0
> 
> 时间：2012-09-13T06:52:35.803
> 
> 标签：ubuntu

我正在尝试在 VMWare 上运行的 Ubuntu 上安装 vlagrind。Valgrind 安装停止，因为它需要 libc6-dbg。

当我尝试使用“sudo apt-get install libc6-dbg”安装 libc6-dbg 时，出现以下错误：

```
Some packages could not be installed. This may mean that you have
requested an impossible situation or if you are using the unstable
distribution that some required packages have not yet been created
or been moved out of Incoming.
The following information may help to resolve the situation:

The following packages have unmet dependencies:
 libc6-dbg : Depends: libc6 (= 2.11.3-3) but 2.13-35 is to be installed 
```

很明显，我需要将 libc6 从 2.11.3-3 升级到 2.13-35。我该怎么做？许多软件包依赖于 libc6。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T03:57:37.943

如果您正在运行 Ubuntu，我猜您的某些软件包已损坏。您应该尝试这些 shell 命令。

```
$ sudo su 
```

然后输入您的密码。

```
# apt-get clean
# apt-get autoclean
# apt-get update
# apt-get upgrade
# apt-get dist-upgrade
# reboot 
```

这对我有用。祝你好运。

# jquery - 如何防止在输入焦点上滚动容器？

> ID：12400933
> 
> 赞同：1
> 
> 时间：2012-09-13T06:53:06.500
> 
> 标签：jquery, html, scroll, position

我有一个没有垂直滚动条的包含 div 和一个部分可见的输入。当我关注这个输入时，包含的 div 向上移动，这使我的标题部分消失。

可以使用以下 jsfiddle 示例重现该场景。

[http://jsfiddle.net/3gqP9/6/](http://jsfiddle.net/3gqP9/6/)

有没有一种解决方案可以部分隐藏输入？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T06:57:21.663

当然。我不知道您为什么要专注于部分隐藏的字段，但仍然 - 从您的小提琴中添加代码：

```
$('#btn').on('click', function(){
   $('#inputField').focus();
   $("#scrollable").scrollTop(0);
}); 
```

演示：http: [//jsfiddle.net/3gqP9/8/](http://jsfiddle.net/3gqP9/8/)

或者您可以使用`.scrollTop()`（无参数）在设置焦点之前检索滚动位置，并在调用`.focus()`.

# c# - 填充数据网格 asp.net

> ID：12400942
> 
> 赞同：1
> 
> 时间：2012-09-13T06:54:00.980
> 
> 标签：c#, asp.net, data-binding

这是我的第一个`ASP.Net`项目。我习惯了`WPF`。我正在`Visual Studio 2010`使用该`C#`语言创建这个项目。
我找不到以下问题的答案。

我有一个`DataGrid`需要显示该部门的所有查询，该部门不在现场。因此，该部门需要该`.Net`应用程序来获取`SQL Server 2008 DB`. 这是我拥有的代码： PS：我习惯于将`SQL`语句加载到 a`DataTable`中，但似乎`.Net`没有。

所以我要问的是，我如何让这个方法显示到 中`DataGrid`，因为我不能使用这个`DataTable`类？

： 代码 ：

```
SqlCommand _nuecommand = new SqlCommand();
SqlDataAdapter _nuweadapter = new SqlDataAdapter();
SqlConnection conn = new SqlConnection();

try  

{
    if (conn.State == System.Data.ConnectionState.Closed || 
        conn.State == System.Data.ConnectionState.Broken)
        {
            conn.Open();
        }

        string _sql = "";
        _nuecommand.Connection = conn;
        _sql = 
            "SELECT [Field],[Field],Field,[Field],[VeField],FieldFROM [Table]" + 
                " WHERE [Field] = 'value' AND [Field] = 'Value' AND" + 
                " [Field] IS NULL ";
        _nuecommand.CommandText = _sql;
        _nuweadapter.SelectCommand = _nuecommand;
        _nuecommand.CommandTimeout = 6000;
        _nuweadapter.Fill(_dtnuwe);
        dgnavrae.DataSource = _dtnuwe.DefaultView;
        dgnavrae.databind();

}
catch (Exception ex)
{
    LogInInde.Pages.ErrorPage._error = ex.Message;
    throw ex;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:58:26.803

只需像这样将数据与网格视图绑定

```
dgnavrae.DataSource = _dtnuwe.DefaultView;
dgnavrae.DataBind(); 
```

您需要使用用户`DataBind`方法将视图数据与 gridview 绑定，这将为您工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T07:36:00.597

1.  使用 SQL Server 2008 的 .Net SQL 连接 我建议您创建一个自定义函数类，其中包含连接到数据库所需的所有代码并返回 DataTables。

2.  我同意@Pranay Rana，您必须使用该`DataBind()`功能将其`DataGrid`与您的`DataTable`.

3.  如果要自定义视图，可以使用 OnRowDataBound 事件：

    protected void yourDataGrid_RowDataBound(object sender, DataGridCommandEventArgs e) { if (e.Row.RowType == DataControlRowType.DataRow) { //你的代码... } }

PS：不确定“DataGridCommandEventArgs”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T07:55:58.503

`GridView`需要`AutoGenerateColumns`设置为`true`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T06:19:15.393

这对我来说很好！希望这对其他人以及对我有帮助:)和平！

```
SqlCommand _nuecommand = new SqlCommand(); 
SqlDataAdapter _nuweadapter = new SqlDataAdapter(); 
SqlConnection conn = new SqlConnection(); 

try   
{ 
    if (conn.State == System.Data.ConnectionState.Closed ||  
        conn.State == System.Data.ConnectionState.Broken) 
        { 
            conn.Open(); 
        } 

        string _sql = ""; 
        _nuecommand.Connection = conn; 
        _sql =  
            "SELECT [Field],[Field],Field,[Field],[VeField],FieldFROM [Table]" +  
                " WHERE [Field] = 'value' AND [Field] = 'Value' AND" +  
                " [Field] IS NULL "; 
        _nuecommand.CommandText = _sql; 
        _nuweadapter.SelectCommand = _nuecommand; 
        _nuecommand.CommandTimeout = 6000; 
        _nuweadapter.Fill(_dtnuwe); 
        dgnavrae.DataSource = _dtnuwe.DefaultView; 
        dgnavrae.databind(); 

} 
catch (Exception ex) 
{ 
    LogInInde.Pages.ErrorPage._error = ex.Message; 
    throw ex; 
} 
```

# php - 使用 PHP 的数学游戏

> ID：12400945
> 
> 赞同：2
> 
> 时间：2012-09-13T06:54:13.877
> 
> 标签：php, math, jquery, comet

我想开发生成随机简单数学方程的游戏。

*   容易 - `4+5`, `5-6`（使用的运算符是 +,-）
*   中 - `4*5`, `5/6`（使用的运算符是 +,-,*,/）
*   困难 - `4*5/7`, `5/6-5`（使用的运算符是 +,-,*,/）

现在我认为这可以通过简单地生成每个字符 randome 来完成，即生成两个随机数，然后生成一个随机运算符并将它们一起使用并保持条件以找到答案，该答案也将检查用户输入的答案。

但我猜这对编码来说太菜鸟了。我想知道这是否是正确的方法，或者我是否应该使用任何可用于 PHP 的预定义数学库。到目前为止，我只需要使用 4 个运算符，但将来我可能需要实现更复杂的方程。

另外，我必须实现多人模式，我正在考虑使用 Comet 以便用户可以同时一起玩。我应该使用 PHP 和 MySQL 来创建这个游戏，还是应该使用 AJAX/JQuery 创建这个游戏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T06:58:59.877

制作一个运算符数组，并随机生成操作数；

```
$operarors = array( '+', '-', '*' );
$operator = $operarors[rand(0,2)];
$leftop = rand(0,10);
$rightop = $rand(0,10);

echo "the math: $leftop $operator $rightop = ??"; 
```

# javascript - 获取从 Jquery 对话框中选择的数据到父页面

> ID：12400959
> 
> 赞同：0
> 
> 时间：2012-09-13T06:55:26.127
> 
> 标签：javascript, jquery

我已经使用 JQuery 对话框打开了一个包含图像的弹出窗口

```
<script type="text/javascript"> 
  jQuery(document).ready( function(){       
    jQuery("#btnAddWidget").click( showDialog );

      $myWindow = jQuery('#widgetDialog');

      $myWindow.dialog({ height: 350,
        width: 400,
        modal: true,
        position: 'center',
        autoOpen:false,
        title:'Add Widget',
        overlay: { opacity: 0.5, background: 'black'}
      });
    }
  );

  var showDialog = function() {
    $myWindow.show(); 
    $myWindow.dialog("open");
  }

  var closeDialog = function() {
    $myWindow.dialog("close");
  }
</script> 
```

在对话框中

```
<div class="headerlinks">
    <input id="btnAddWidget" name="addWidget" value="Add Widget" type="button" />
    <div id="widgetDialog" style="display:none">    
        <img border="0" id="imgRMS" src="sample.jpg" />
        <input id="btnAddToDashboard" name="addToDashboard" value="Add To Dashboard" type="button" />       
    </div>      
</div> 
```

在父页面中

```
<div id="dashboard" class="dashboard">
  <div id="w1" class="column"></div>    
</div> 
```

单击“添加到仪表板”时，我希望将图像放置在`w1`父页面的相应 div 中。任何人都可以对此提出一些建议..???

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:59:26.400

```
$("#btnAddToDashboard").click(function(e){
    $("#w1").append($("<img>").attr("src",$(this).prev().attr("src")));
}); 
```

**[小提琴](http://jsfiddle.net/sgr5W/)**

# php - 如何从此响应和其他数组键和值中获取序列化部分

> ID：12400960
> 
> 赞同：0
> 
> 时间：2012-09-13T06:55:30.090
> 
> 标签：php, arrays, string

我正在通过以下方式收到第三方服务的回复。

```
 Array
(
    [created_on] => 2012-09-13 01:47:05
    [recipe] => SAMSave
    [requesters_id] => 1
    [status] => New
    [args] => a:5:{s:4:"name";a:1:{i:0;a:4:{s:10:"first_name";s:5:"Frank";s:9:"last_name";s:7:"McCourt";s:11:"middle_name";s:4:"FAKE";s:5:"email";s:0:"";}}s:3:"dob";a:3:{s:5:"month";s:4:"1955";s:4:"year";s:2:"05";s:3:"day";s:2:"15";}s:3:"ssn";s:9:"411449097";s:7:"address";a:1:{i:0;a:4:{s:6:"street";s:23:"1243 PUBLIC WORKS DRIVE";s:4:"city";s:11:"Chattanooga";s:5:"state";s:2:"TN";s:3:"zip";s:5:"37403";}}s:5:"phone";a:1:{i:0;a:2:{s:6:"number";s:0:"";s:4:"type";s:1:"P";}}}
)
true{"status":"Success","message":"Request Added!","id":416} 
```

从 Array 开始到结束的整个过程都是字符串格式。我必须从这个字符串中取出数据，每次我想我都会用正则表达式的解决方案来取出数据。我希望我知道一个可以将其构造成具有相同键和值的 PHP 数组的函数。如果有人有比使用正则表达式更好的解决方案，请分享您的想法/意见。

我在这个字符串上使用了反序列化并得到错误：`Error at offset 0 of 654 bytes`

我收到的原始响应在一行中，上面的输出是我在打印后从浏览器中获取的`'<pre>'` 。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:57:50.650

如果它只是序列化的 php 数据，那么试试这个：

```
$data = unserialized($string_from_third_party); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T07:13:49.263

如果那是您收到的确切响应，那么看起来有人只是在打印他们的数据，甚至可能在最后还带有“真实”位的几次。

响应的样子是您已经发送了“args”中的数据，并且他们给您回复说它已成功存储。

有了这个作为我对这个答案的想法，我得出的结论是你已经在“args”中拥有数据，其余的并不是那么重要，所以，回到我说如果这是你得到的确切回应，然后只需抓住响应的最后一行，从开头去掉“true”，也可以从开头去掉“false”以保存不成功，然后使用该行剩下的字符串，你可以 json_decode 那你会得到你想要的。

举个例子：

```
// GIVEN: $string_from_server is set to the response
$string_from_server_split_into_lines = str_split($string_from_server, '\n');
$last_line_from_server = array_pop($string_from_server_split_into_lines);
$json_object = json_decode(str_replace('true', '', str_replace('false', '', $last_line_from_server)));
var_dump($json_object); 
```

我知道这很乱，但嘿，听起来你是最好的选择。:)

# asp.net - 水平对齐顶部的 asp.net 菜单

> ID：12400962
> 
> 赞同：-1
> 
> 时间：2012-09-13T06:55:44.657
> 
> 标签：asp.net, css, drop-down-menu, menu

```
 <asp:Menu ID="Menu1" runat="server" DynamicHorizontalOffset="2" ForeColor="Blue"
                    StaticSubMenuIndent="10px" Style="font-size: medium; margin-left: 25px; margin-top: 0px;
                    margin-bottom: 0px; color: #333333; text-align: left;" Width="180px" BorderStyle="None"
                    SkipLinkText="" Height="358px">
                    <StaticMenuStyle BorderStyle="None" />
                    <StaticSelectedStyle BackColor="#5D7B9D" />
                    <StaticMenuItemStyle HorizontalPadding="5px" VerticalPadding="2px" BorderStyle="Solid"
                        BorderColor="White" BorderWidth="1px" />
                    <DynamicHoverStyle BackColor="#5E2433" ForeColor="White" />
                    <DynamicMenuStyle BorderColor="#666666" Width="130px" BackColor="#EFEDED" />
                    <DynamicSelectedStyle BackColor="#5D7B9D" />
                    <DynamicMenuItemStyle Width="130px" BorderColor="White" BorderStyle="Solid" BorderWidth="1px"
                        HorizontalPadding="5px" VerticalPadding="2px" />
                    <StaticHoverStyle BackColor="#5E2433" ForeColor="White" />
                    <Items>
                        <asp:MenuItem Text="Register New Patient" Value="Register New Patient" NavigateUrl="DoctorNewRegisteration.aspx">
                        </asp:MenuItem>
                        <asp:MenuItem Text="Wait List" Value="Wait List" NavigateUrl="DoctorWaitList.aspx">
                        </asp:MenuItem>
                        <asp:MenuItem Text="Appointments" Value="Appointments" 
                            NavigateUrl="DoctorAppointments.aspx"></asp:MenuItem>
                        <asp:MenuItem NavigateUrl="DoctorCheckup.aspx" Text="Patient Visit" Value="Patient Visit">
                        </asp:MenuItem>
                        <asp:MenuItem Text="Add/Delete Vaccine" Value="Add/Delete Vaccine" NavigateUrl="DoctorNewVaccine.aspx">
                        </asp:MenuItem>
                        <asp:MenuItem Text="Vaccination Schedule" Value="Vaccination Schedule" NavigateUrl="DoctorVacSchedule.aspx">
                        </asp:MenuItem>
                        <asp:MenuItem Text="Vaccination Due List" Value="Vaccination Due List" NavigateUrl="DoctorVacDueList.aspx">
                        </asp:MenuItem>
                        <asp:MenuItem Text="My Profile" Value="My Profile" NavigateUrl="DoctorMyProfile.aspx">
                        </asp:MenuItem>
                        <asp:MenuItem Text="Announcements" Value="Announcements" NavigateUrl="DoctorAnnouncements.aspx">
                        </asp:MenuItem>
                        <asp:MenuItem Text="Reference Documents" Value="Reference Documents" NavigateUrl="DoctorUploadDoc.aspx">
                        </asp:MenuItem>
                        <asp:MenuItem Text="Message To Patients" Value="Message To Patients" NavigateUrl="DoctorMessage.aspx">
                        </asp:MenuItem>
                        <asp:MenuItem Text="Inactive List" Value="Inactive List" 
                            NavigateUrl="DoctorInactiveList.aspx">
                        </asp:MenuItem>
                        <asp:MenuItem NavigateUrl="DoctorBirthList.aspx" Text="Birthday List" 
                            Value="Birthday List"></asp:MenuItem>
                        <asp:MenuItem Text="Change Password" Value="Change Password" NavigateUrl="DoctorChangePassword.aspx">
                        </asp:MenuItem>
                        <asp:MenuItem NavigateUrl="DoctorMenuPage.aspx" Text="Home" Value="Home"></asp:MenuItem>
                        <asp:MenuItem Text="Logout" Value="Logout"></asp:MenuItem>
                    </Items>
                </asp:Menu> 
```

我如何在右上角水平对齐这个 asp.net 菜单，现在它在左侧垂直对齐。

如果我使用 css 或更改 Asp.net 菜单的某些属性，请帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T07:01:41.767

菜单控件有一个设置`orientation="Horizontal"`，或者您可以手动将其添加到属性中

--EDIT 当您将方向更改为水平时，您必须确保菜单适合该方向的给定宽度。您已将宽度设置为 180 像素，如果您删除菜单会自动水平定向

```
<asp:Menu ID="Menu1" runat="server" DynamicHorizontalOffset="2" ForeColor="Blue"
                    StaticSubMenuIndent="10px" Style="font-size: medium; margin-left: 25px; margin-top: 0px;
                    margin-bottom: 0px; color: #333333; text-align: left;"  BorderStyle="None"
                    SkipLinkText="" Height="358px" orientation="Horizontal"> 
```

# c# - 使用分页时如何将网格视图中的所有行数据插入数据库？

> ID：12400964
> 
> 赞同：0
> 
> 时间：2012-09-13T06:55:50.240
> 
> 标签：c#, asp.net, gridview, paging

我有一个从自身`GridView`添加**产品的方法。**`GridView`我正在使用标准`ASP.Net` `DataGrid`. 我的问题是，有没有办法在使用时将所有`DataRows`内容从`GridView`数据库插入`paging`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:40:25.090

是的，Coral 是正确的分页应该不会影响插入操作。

如果您遇到任何问题，您可以发布。

# ios - 如果您想支持 iPhone 5，那么带有 armv7 的 iOS 4.3 是最低的吗？

> ID：12400968
> 
> 赞同：7
> 
> 时间：2012-09-13T06:56:02.750
> 
> 标签：ios, iphone, iphone-5

我在互联网上读到，如果你想支持 iPhone 5，带有 armv7 的 iOS 4.3 是最低的。所以，如果我想让我的应用程序在 iPhone 5 上运行，那么我是否需要将部署目标设置为 iOS 4.3 和将架构设置为armv7？

我找不到这方面的官方文档。如果信息有误，您能否更正此信息？

**更新：**我在Apple的[Xcode 4.5 GM 种子发行说明文档中找到了答案：](http://adcdownload.apple.com//Developer_Tools/xcode_4.5_gm_seed/xcode_45_gm_seed_rn.pdf)

Xcode 4.5 的变化：

> **- 删除了对 armv6** Xcode 4.5 和更高版本的支持，不支持生成 armv6 二进制文件。
> 
> **- 支持** 的最低部署目标是 iOS 4.3 Xcode 4.5 或更高版本支持的最低部署目标是 iOS 4.3

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T07:47:01.767

似乎没有任何官方声明，但如果你看一下 Xcode 4.5，就会很清楚。这也是向前迈出的合乎逻辑的一步，因为最后一款 armv6 设备（iPhone 3G）已经停售两年多了，而且近两年也没有软件更新。

**注意：**截至发布此答案时，已在此处找到支持 armv6 和 armv7s 的非官方方式：[How to support armv6 and armv7s for release build in xcode 4.5](https://stackoverflow.com/q/12619124/877465)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T23:01:35.280

这只是事实的一半；另一半是您实际上可以将 iOS 4.0/armv6 构建合并到您的 iOS6/armv7(s) 构建中。

此处描述了此过程： [How to support armv6 and armv7s for release build in xcode 4.5](https://stackoverflow.com/questions/12619124/how-to-support-both-armv6-and-armv7s-for-release-build-in-xcode-4-5)

# iphone - 通话状态栏 HIG 指南问题

> ID：12400974
> 
> 赞同：0
> 
> 时间：2012-09-13T06:56:47.790
> 
> 标签：iphone, objective-c, ios, hig

我有一个底部有一个图像视图的视图，但是当我模拟一个呼叫时，它会部分隐藏它并位于屏幕下方。我不确定这一点，但根据 ios HIG 指南，我的应用程序应该相应地处理这个问题。看到这个。。

> 确保您的 UI 可以处理双高状态栏。在进行中的电话呼叫、录音和网络共享等事件期间，会出现双高状态栏。在未准备好的应用程序中，此栏的额外高度可能会导致布局问题。例如，UI 可能会被下推或覆盖。在多任务环境中，能够正确处理双高状态栏尤为重要，因为可能有更多的应用程序会导致它出现。您可以在测试期间触发双高状态栏，以帮助您找到并更正任何处理不好的视图。（要了解如何使用 iOS 模拟器执行此操作，请参阅 iOS 工具工作流程指南中的“操作硬件”。）

我的问题是我应该在这里做什么以及我应该如何处理这个..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:17:21.927

你应该听这两个 UIApplicationDelegate 的回调：

```
application:willChangeStatusBarFrame:

application:didChangeStatusBarFrame: 
```

并相应地调整主视图的大小。

# networking - 转发端口

> ID：12400975
> 
> 赞同：0
> 
> 时间：2012-09-13T06:56:52.043
> 
> 标签：networking, port

我有一个在我的计算机上托管网络服务器的简单要求。但不幸的是，我的雇主提供的互联网连接只打开了 21 和 80 端口。其余所有端口均已关闭。我尝试了端口 80 和 21 的端口转发，但它们已经被我的雇主自己使用了。那么，有没有其他方法可以在我的计算机上托管网络服务器？

PS：我在 linux 上使用 Apache。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:07:22.343

防火墙是否运行 HTTP 代理，还是只是一个简单的端口转发器？如果它是代理，它可能能够根据`Host:`标头转发到不同的内部 IP，类似于虚拟 Web 主机的操作方式。

否则，您将无法使用这些端口。一个 NAT 路由器只能将一个端口转发到一个 IP。如果托管网络服务器是一项工作要求，如您所说，您应该能够联系网络管理员并为其打开另一个端口。如果他们不按您的要求这样做，您的经理应该能够确认要求。

# r - 采购脚本不会将任何输出打印到控制台

> ID：12400976
> 
> 赞同：1
> 
> 时间：2012-09-13T06:56:57.177
> 
> 标签：r

我在使用 VirtualBox 的 Windows XP 中使用 Ubuntu，并且我正确安装了 R。我正在使用一个`psych`为此调用的库。以下是我的代码：

```
impact <- read.table("stats1.ex.02.txt", header=T)
class(impact)
describe(impact) 
```

我正在 coursera.org 上学习统计一门课程，教授提供了此`txt`文件以供使用。当我在 R 中运行它时，使用`source("test.R")`（`test.R`我给出的文件名在哪里），没有任何反应。这里可能有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T07:05:12.453

在采购脚本后，尝试使用`source("test.R", echo=TRUE)`或添加`print`到您想要打印的任何内容。因此，您的脚本可能是：

```
impact<- read.table("stats1.ex.02.txt",header=T)
print(class(impact))
print(describe(impact)) 
```

# jquery - 选择具有特定类名的 li

> ID：12400977
> 
> 赞同：-1
> 
> 时间：2012-09-13T06:57:01.080
> 
> 标签：jquery

```
<ul>
  <li>some data..</li>
  <li>some data..</li>
  <li class="xyz">some data..</li>
  <li class="xyz">some data..</li> 
</ul> 
```

我如何选择所有具有“xyz”类的li？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T06:59:03.063

您可以使用此选择器：

```
var $lis = $('li.xyz'); 
```

我建议你遵循一个基本的 jQuery 教程。这涵盖了您开始所需的几乎所有内容：http://docs.jquery.com/Tutorials: [Getting_Started_with_jQuery](http://docs.jquery.com/Tutorials:Getting_Started_with_jQuery)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T07:00:09.567

您可以使用一个类`$('ul li.xyz');`来选择所有`li`元素`xyz`。

**[演示](http://jsfiddle.net/vCXuK/)**

# ruby-on-rails - 如何在 Rails 应用程序方法中记录 ajax 请求失败？

> ID：12400982
> 
> 赞同：1
> 
> 时间：2012-09-13T06:57:20.397
> 
> 标签：ruby-on-rails, ajax, error-log

我有完整的 ajax 请求功能的 rails 2 应用程序。我想在日志文件中记录 ajax 请求失败，就像我们可以在 cron 方法中使用 begin rescue 块一样。有没有办法用方法名记录ajax失败请求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T07:01:01.687

对服务器的所有请求（包括 ajax 请求）都应记录在日志文件中。再次检查您的日志文件，它也应该包含 ajax 请求的条目。

# sql - MSSQL 全文搜索 - 仅搜索部分表行

> ID：12400983
> 
> 赞同：2
> 
> 时间：2012-09-13T06:57:23.023
> 
> 标签：sql, sql-server-2008, full-text-search

有没有办法将搜索限制在表中的特定行。

例如：

在一张大桌子上，我只想搜索具有特定公司 ID 的行：

```
select *
from Actions
where Company_ID=1253
and  CONTAINS(ItemDesc, 'ABC')

SELECT
    AC.*,    
    col1.RANK
FROM Actions AC
INNER JOIN CONTAINSTABLE(Actions, ItemDesc, 'ABC',50) as col1  
    on col1.[KEY] = AC.ActionId
where Company_ID=1253 
```

我尝试了这两个示例，我认为搜索首先在所有表行上运行，然后按 Company_ID 过滤

我正在寻找一种在搜索之前限制行号的方法

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:42:50.010

这样的事情如何表现？

```
SELECT *
FROM
(
    SELECT *
    FROM Actions
    WHERE Company_ID = 1253
) AS CompanyFilteredActions
WHERE CONTAINS(ItemDesc, 'ABC') 
```

您需要查看查询计划和性能，但我认为这至少可以满足您的要求。

# java - Statement.executeUpdate() 返回 -1 是什么意思？

> ID：12400985
> 
> 赞同：29
> 
> 时间：2012-09-13T06:57:35.933
> 
> 标签：java, sql, sql-server-2008, jdbc

一个在管理工作室中工作的查询和在`executeUpdate`相同的`executeUpdate`return中工作`-1`，这在我们能找到的任何文档中都是未定义的。它应该只返回 rowcount 或`0`. 这是什么意思？如果这很重要，驱动程序就是 JDBC-ODBC 桥。

例子：

```
String query = "IF NOT EXISTS (SELECT * FROM animals WHERE animal_name ='" + a +"') INSERT INTO " + table + " (animal_name, animal_desc, species_id) VALUES ('" + a + "', '" + b + "', " + c + ")";
int result = statement.executeUpdate(query);
System.out.println(result); 
```

该查询有效，因为该行被添加到数据库中，它返回 -1 只是奇怪的文档说它只会返回 0 或行数（正如我已经更正的那样）。

更新：

在 Management Studio 中运行此命令会导致“命令已成功完成”。

```
IF NOT EXISTS (SELECT * FROM animals WHERE animal_name = 'a') 
INSERT INTO animals(animal_name, animal_desc, species_id) VALUES ('a', 'a', 1) 
```

这应该意味着该方法应该返回 0 因为它不返回任何内容，对吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-13T17:57:32.183

由于执行的语句实际上不是 DML（例如`UPDATE`，`INSERT`或`EXECUTE`），而是一段*包含*DML 的 T-SQL，我怀疑它不被视为更新查询。

JDBC 4.1 规范的第 13.1.2.3 节说明了一些事情（顺便说一句很难解释）：

> 当该方法`execute`返回 true 时，`getResultSet`调用该方法以检索 ResultSet 对象。当`execute`返回 false 时，该方法 `getUpdateCount`返回一个 int。如果这个数字大于或等于零，则表示语句返回的更新计数。如果为-1，则表示没有更多结果。

鉴于此信息，我猜想在`executeUpdate()`内部执行一个`execute()`，然后 -`execute()`将返回`false`- 它将返回 的值`getUpdateCount()`，在这种情况下 - 根据 JDBC 规范 - 将返回`-1`。

事实 1) 进一步证实了这一点，Javadoc for[`Statement.executeUpdate()`](http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html#executeUpdate%28java.lang.String,%20int%29)说：

> 返回：(1) SQL 数据操作语言 (DML) 语句的行数或 (2) 0 用于不返回任何内容的 SQL 语句

并且 2) [Statement.getUpdateCount()](http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html#getUpdateCount%28%29)的 Javadoc指定：

> 当前结果作为更新计数；-1 如果当前结果是 ResultSet 对象或没有更多结果

只是为了澄清：鉴于`executeUpdate()`行为的 Javadoc 可能是错误的，但可以解释。

同样，正如我在其他地方评论的那样，-1 可能只是表示：也许有些东西发生了变化，但我们根本不知道，或者我们无法给出准确的变化数量（例如，因为在这个例子中它是一块 T-执行的 SQL）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-11-21T08:58:37.427

所以 4 年后，[微软在 Github 上开源了他们的 JDBC 驱动程序](https://github.com/Microsoft/mssql-jdbc)。今天收到了关于这个问题的通知，去看看，相信我在[这里](https://github.com/Microsoft/mssql-jdbc/blob/cfba660ac950a14da127cb9399430425473fb46f/src/main/java/com/microsoft/sqlserver/jdbc/SQLServerStatement.java#L1713)找到了罪魁祸首，`mssql-jdbc/src/main/java/com/microsoft/sqlserver/jdbc/SQLServerStatement.java:1713`。

基本上，驱动程序会尝试了解 SQL Server 发回的内容（如果不是明确的结果集）。根据评论，它是这样的：

> 1.  首先检查错误。（1669 年）
>     
>     
> 2.  不是错误。是结果集吗？（1680 年）
>     
>     
> 3.  不是错误或结果集。也许是 T-SQL 语句的结果？即，以下之一：
>     
>     
>     *   受影响的行数的正计数（来自 INSERT、UPDATE 或 DELETE），
>     *   零表示没有行受到影响，或者语句是 DDL，或者
>     *   **-1 表示语句成功，但没有可用的更新计数信息**（转换为批更新计数数组中的 Statement.SUCCESS_NO_INFO）。*（1706 年）*
> 4.  以上都不是。最后一次机会...进入上面的解析器，我们知道 moreResults 最初是正确的。如果我们的 moreResults 为 false，我们会点击一个 DONE 标记（DONE（FINAL）或 DONE（批处理中的 RPC）），表明批处理总体成功，但没有关于单个语句的更新计数的信息。这类似于上面的最后一种情况，只是没有更新计数。即：我们有一个成功的结果（返回 true），但我们没有关于它的其他信息（updateCount = -1）。*（1693 年）*
>     
>     
> 5.  到达这里的唯一方法（moreResults 仍然正确，但没有任何明显的结果）是如果 TDSParser 实际上没有解析 *任何东西*。也就是说，我们在响应中处于 EOF。在那种情况下，真的没有更多的结果。我们完成了。（1717 年）

（强调我的）

所以你们最后是对的。SQL 根本无法判断有多少行受到影响，默认为`-1`. :)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-13T07:15:06.230

我也没有在任何地方看到过这种情况，但我的直觉是这意味着`IF`阻止了整个语句的执行。

尝试使用通过的数据库运行该语句`IF`。

还要检查是否有任何可能改变结果的触发器。

**[编辑]**当[标准说](http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html#executeUpdate%28java.lang.String,%20int%29)这个函数永远不应该返回`-1`时，这并没有*强制执行*。Java 没有前置条件和后置条件。JDBC 驱动程序可以返回一个随机数，并且无法阻止它。

如果知道为什么会发生这种情况很重要，请针对不同的数据库运行该语句，直到您尝试了所有执行路径（即`IF`返回的路径`false`和返回的路径`true`）。

如果它不是那么重要，请将其标记为 Microsoft 工程师的“聪明把戏”，并记住当您下次想自己聪明时有多喜欢它。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-13T07:49:09.303

对于针对 DB2 for z/OS 服务器的 executeUpdate 语句，返回的值取决于正在执行的 SQL 语句的类型：

对于可以具有更新计数的 SQL 语句，例如 INSERT、UPDATE 或 DELETE 语句，返回值是受影响的行数。有可能：

一个正数，如果操作影响了正数的行，并且该操作不是对分段表空间的批量删除。

0，如果没有行受操作影响。

**-1，如果操作是对分段表空间的批量删除。**

对于 DB2 CALL 语句，*返回值 -1，因为 DB2 数据库服务器无法确定受影响的行数。对 CALL 语句的 getUpdateCount 或 getMoreResults 的调用也返回 -1。对于任何其他 SQL 语句，返回值 -1。*

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-13T07:47:54.943

这并不能解释为什么它应该是这样，但它解释了为什么它会发生。以下字节码设置`-1`为构造函数中的内部`updateCount`标志`SQLServerStatement`：

```
// Method descriptor #401 (Lcom/microsoft/sqlserver/jdbc/SQLServerConnection;II)V
// Stack: 5, Locals: 8
SQLServerStatement(
  com.microsoft.sqlserver.jdbc.SQLServerConnection arg0, int arg1, int arg2) 
throws com.microsoft.sqlserver.jdbc.SQLServerException;

// [...]

34 aload_0 [this]
35 iconst_m1
36 putfield com.microsoft.sqlserver.jdbc.SQLServerStatement.updateCount:int [27] 
```

现在，我不会分析所有可能的控制流，但我只想说这是内部默认初始化值，它以某种方式泄露给客户端代码。请注意，这也可以通过其他方法完成：

```
// Method descriptor #383 ()V
// Stack: 2, Locals: 1
final void resetForReexecute() 
throws com.microsoft.sqlserver.jdbc.SQLServerException;

// [...]

10 aload_0 [this]
11 iconst_m1
12 putfield com.microsoft.sqlserver.jdbc.SQLServerStatement.updateCount:int [27]

// Method descriptor #383 ()V
// Stack: 3, Locals: 3
final void clearLastResult();
0 aload_0 [this]
1 iconst_m1
2 putfield com.microsoft.sqlserver.jdbc.SQLServerStatement.updateCount:int [27] 
```

换句话说，您*可能可以*安全地解释`-1`为与`0`. 如果您依赖此结果值，请保持安全并按以下方式进行检查：

```
// No rows affected
if (stmt.executeUpdate() <= 0) {
}
// Rows affected
else {
} 
```

**更新**：在阅读[Mark Rotteveel 的答案](https://stackoverflow.com/a/12412073/521799)时，我倾向于同意他的观点，假设这`-1`是*“未知更新计数”*的 JDBC 兼容值。即使这没有记录在相关方法的 Javadoc 中，也记录在[JDBC 规范的第 13.1.2.3 章 Returning Unknown or Multiple Results](http://download.oracle.com/otn-pub/jcp/jdbc-4_1-mrel-spec/jdbc4.1-fr-spec.pdf)中。在这种情况下，可以说`IF .. INSERT ..`语句将具有*“未知更新计数”*，因为该语句无论如何都不符合 SQL 标准。

# excel - Excel 中按大纲级别（组）着色

> ID：12400991
> 
> 赞同：2
> 
> 时间：2012-09-13T06:57:58.877
> 
> 标签：excel, excel-formula, vba

我想根据excel中的大纲级别更改单元格的颜色，大纲级别是指列分组的级别。

我正在尝试使用 ActiveCell.OutlineLevel 属性在 ColorByValue 过滤器中使用。

这可能吗？或者，有没有办法通过 VBA 或函数来做到这一点？

![按值着色](../Images/fdd9f66e16d4afea7ce6845dd25c372f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T10:24:18.277

谢谢JMax，我根据您的建议得到了解决方案！...

1-将条件格式规则添加到需要格式的单元格中。

```
=OutlineLevel(CELL("col",CV1)) = 1 
```

![编辑格式规则](../Images/5a7941fabda292a56159ee0b32333747.png)

2- 该公式引用了一个输出行分组级别的小函数。

```
Function OutlineLev(inp As Integer) As Integer
OutlineLev = Columns(inp).OutlineLevel
End Function 
```

谁能找到更优雅的解决方案？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-20T05:57:29.037

我获取 ROWS 的 OutlineLevel 和有条件格式化的解决方案是......

1）在VBA模块中......

```
Function OutlineLevel(inp As Integer) As Integer
OutlineLevel = Rows(inp).OutlineLevel
End Function 
```

2）在条件格式规则中......

```
=OutlineLevel(CELL("row",CV1)) = 
```

对于不同的值，我制定了几个条件格式规则。

非常基于先前的答案，所以谢谢！请注意，较早的答案在 VBA 中使用了“OutlineLev”，在条件中使用了“OutlineLevel”，这对我不起作用。我也想按行而不是按列格式化。

# c# - 如何在 asp.net 中通过 ifram 传递参数？

> ID：12400994
> 
> 赞同：0
> 
> 时间：2012-09-13T06:58:04.060
> 
> 标签：c#, asp.net

我正在开发一个 Web 应用程序，`ASP.Net`并且正在实现一个`Network Graph Library`. `Network Graph`位于名为 的页面上`Test.aspx`。我正在`Test.aspx`打电话`iframe`：

```
 DetailsBody.Text = DetailsBody.Text + "<td><iframe scrolling=\"no\" 
 id=\"graphframe\" src=\"Test.aspx\" width=\"100%\" 
 height=\"275px\"></iframe></td>"; 
```

我需要将一个参数从它所在的页面传递`iframe`给该`Test.aspx`页面。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T07:17:44.533

你可以像这样传递参数。

```
<iframe src="Test.aspx?YourParam=<%=somevariable%>" scrolling=\"no\" width="100" height="275px" frameborder="0"></iframe> 
```

对于多参数：

```
<iframe src="Test.aspx?Param1=<%=somevariable%>&Param2=<%=vartwo%>&Param3=<%=varthree%>" scrolling=\"no\" width="100" height="275px" frameborder="0"></iframe> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T07:03:54.933

您可以使用以下任何一种方法：

1.  **会话**- 前提是页面位于单个 Web 应用程序上。
2.  **查询字符串- 在定义****iframe src**属性时动态附加查询字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T07:25:00.460

如果要通过后面的代码传递参数，

```
 HtmlControl frame1 = (HtmlControl)this.FindControl("I_Frame_Name");
        frame1.Attributes["src"] = "Test.aspx";
        frame1.Attributes["scrolling"] = "no";
        frame1.Attributes["id"] = "graphframe";
        frame1.Attributes["width"] = "100%";
        frame1.Attributes["height"] = "275px"; 
```

# python - 绘图中的拉伸部分

> ID：12400997
> 
> 赞同：0
> 
> 时间：2012-09-13T06:58:13.497
> 
> 标签：python, numpy, python-2.7

```
x = linspace(0,10,100) 
```

给我从 0 到 10 的 100 个相等的部分。我怎样才能得到一些拉伸的部分，例如，从 0 到 2 的 60 个部分和从 2 到 10 的 40 个部分？

谁能告诉我？我正在使用 python 2.7.2 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:47:36.607

```
np.concatenate([np.linspace(0, 2, 60), np.linspace(2, 10, 40)]) 
```

或避免重复 2 ：

```
np.concatenate([np.linspace(0, 2, 60), np.linspace(2, 10, 40)[1:]]) 
```