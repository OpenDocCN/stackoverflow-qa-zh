# StackOverflow 问答 12079000-12079999

# android - 获取android MediaPlayer对象的左右音量

> ID：12079000
> 
> 赞同：3
> 
> 时间：2012-08-22T18:12:47.877
> 
> 标签：android, get, volume

我正在处理一个似乎在网络上没有解决方案的问题。在 android 中，使用 myMediaPlayer.setVolume(leftVolume, rightVolume) 方法设置 MediaPlayer 对象的立体声音量非常简单，但似乎没有办法分别获取两个音量！有一种方法可以从 AudioManager 对象获取音量，但它只返回单声道音量，而不是立体声。那么，我怎样才能得到这两卷呢？希望你能帮我！先感谢您

# cygwin - CDT 无法正确找到 Cygwin gcc 包含文件，即使在声明包含路径之后也是如此

> ID：12079002
> 
> 赞同：4
> 
> 时间：2012-08-22T18:12:50.983
> 
> 标签：cygwin, eclipse-cdt

我有一个相当尴尬的问题，因为这个问题在 linux 机器和我的 Windows XP 机器上都没有问题。但是现在，在终于切换到 Windows 7 64 位之后，我遇到了让 Eclipse 找到我的 C++ 包含文件的基本问题......

**我的设置：**
我正在运行 Windows 7 64 位。我已将 cygwin 安装到“C:\Program Files\cygwin”，将 Eclipse Juno 64bit 安装到“C:\Program Files\eclipse”。

**我的问题：**
我使用 Cygwin 工具链创建了一个基本的“Hello World”C++ Makefile 项目。编译工作没有问题，但 Eclipse 仍然抱怨它找不到“iostream”的包含。

**我尝试了什么：**
在项目属性 -> C/C++ 常规 -> 路径和符号 -> 包含中，我将 GNU C 和 GNU C++ 的包含目录设置为

```
C:\Program Files\cygwin\lib\gcc\i686-pc-cygwin\4.5.3\include 
```

其中包含 iostream 包含在子目录中。**这没有用**

然后我尝试了确切的目录

```
C:\Program Files\cygwin\lib\gcc\i686-pc-cygwin\4.5.3\include\C++ 
```

包含 iostream。这次找到了include，但是即使重建了索引，Eclipse仍然无法解析std、cout和endl。然后我尝试了gcc 3.x版本的include目录

```
C:\Program Files\cygwin\lib\gcc\i686-pc-cygwin\3.4.4\include\C++ 
```

它奏效了。不幸的是，我需要 4.x 版本的 gcc，所以这对我来说不是永久的解决方案。

**我的问题：**
我怎样才能解决这个问题并让 Eclipse 找到 gcc 4.x 包含目录并正确使用它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-16T07:25:39.770

您必须让 Eclipse “忘记”并重新发现编译器的包含目录，而不是更改项目特定的更改。通过 **Windows |执行此操作 偏好 | C/C++ | 构建 | 设置**；您需要清除 gcc 的“发现”条目。

另见[这个问题](https://stackoverflow.com/q/16259616/1593077)。

# python - Offlineimap 错误：ImportError: cannot import name OfflineImap

> ID：12079004
> 
> 赞同：0
> 
> 时间：2012-08-22T18:12:53.867
> 
> 标签：python, imap

在尝试在 Linux 下使用 offlineimap 时，我现在收到以下错误：

```
Traceback (most recent call last):
  File "/usr/bin/offlineimap", line 20, in <module>
    from offlineimap import OfflineImap
ImportError: cannot import name OfflineImap 
```

不管我做什么。我最初并没有收到此错误，但我尝试清除并重新安装 offlineimap（并删除 .offlineimap），但似乎没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T18:18:42.370

好吧，首先要做的是：它可以在交互式 python 解释器中工作吗？你在使用虚拟环境吗？也许您在 virtualenv 中安装了 offlineimap 并试图在全局范围内调用它。

最后，我会检查 offlineimap.py 文件是否定义了 OfflineImap 类（或模块？）

# android - 如何将视图添加到 ViewGroup 中的新活动

> ID：12079008
> 
> 赞同：1
> 
> 时间：2012-08-22T18:13:04.483
> 
> 标签：android, button, view, android-activity, viewgroup

好的，所以我试图将一个按钮/视图添加到一个新的活动，而不是 Viewgroup 已经在其中的活动。这是我到目前为止的代码：

源：

```
public class Main extends Activity {
    Button btn, btn1;
    LayoutInflater linflater;
    LinearLayout l;
    static int pos = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button  ButtonBack = (Button) findViewById(R.id.dynamicoption);
        ButtonBack.setOnClickListener(new View.OnClickListener(){

              public void onClick(View v) {
                  // Perform action on click

                startActivity(new Intent("com.nour.ImamKhomeini.DYNAMICOPTION"));

              }

          });

        btn = (Button) findViewById(R.id.Button01);

        l = (LinearLayout) findViewById(R.id.LinearLayout01);
        linflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        btn.setOnClickListener(new OnClickListener() {
          @Override
          public void onClick(View v) {
              View myView = linflater.inflate(R.layout.dynamicoption, l, true);
              myView.setId(pos);
              pos++;
          }
        });

        btn = (Button) findViewById(R.id.Button01);
        btn1 = (Button) findViewById(R.id.Button02);
        l = (LinearLayout) findViewById(R.id.LinearLayout01);
        linflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        btn.setOnClickListener(new myListener());
        btn1.setOnClickListener(new myListener1());
    }

    class myListener implements View.OnClickListener {
        @Override
        public void onClick(View v) {
            View myView = linflater.inflate(R.layout.dynamicoption, null);
            myView.setId(pos);
            pos++;
            l.addView(myView);
        }
    }

    class myListener1 implements View.OnClickListener {
        @Override
        public void onClick(View v) {
            if (pos != 0) {
                pos--;
                View myView = l.findViewById(pos);
                l.removeView(myView);
            }
        }
    }
} 
```

这是我的xml：

主要的：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="fill_parent"
    android:orientation="horizontal">

    <Button android:id="@+id/Button01" android:background="@drawable/ic_launcher"
        android:layout_height="45dip" android:layout_width="45dip"></Button>

    <Button android:id="@+id/Button02" android:background="@drawable/ic_launcher"
        android:layout_height="45dip" android:layout_width="45dip"></Button>

    <LinearLayout android:id="@+id/LinearLayout01"
        android:layout_width="wrap_content" android:layout_height="wrap_content"
        android:orientation="vertical"></LinearLayout>
</LinearLayout> 
```

动态选项.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content" android:layout_height="wrap_content"
    android:orientation="horizontal">
    <EditText android:text="@+id/EditText01" android:id="@+id/EditText01"
        android:layout_width="wrap_content" android:layout_height="wrap_content"></EditText>
    <Button android:text="@+id/Button01" android:id="@+id/Button01"
        android:layout_width="wrap_content" android:layout_height="wrap_content"></Button>
</LinearLayout> 
```

任何帮助表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T18:22:34.770

我会做一些改变。看我如何创建 OnClickListener，你不需要创建新的子类。并注意我如何使用布局充气器：

```
btn.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        View myView = linflater.inflate(R.layout.dynamicoption, l, true);
        myView.setId(pos);
        pos++;
    }
}); 
```

* * *

此外，当 XML 开始和结束标签之间没有任何内容时：

```
<EditText 
    android:id="@+id/EditText01"
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"
    android:text="@+id/EditText01" ></EditText> 
```

您可以使用`/>`速记并节省一些打字时间

```
<EditText 
    android:id="@+id/EditText01"
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"
    android:text="@+id/EditText01" /> 
```

* * *

这是您的 onCreate() 方法的外观：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button ButtonBack = (Button) findViewById(R.id.dynamicoption);
    ButtonBack.setOnClickListener(new View.OnClickListener(){
        public void onClick(View v) {
            // Perform action on click
            startActivity(new Intent("com.nour.ImamKhomeini.DYNAMICOPTION"));
        }
    });

    l = (LinearLayout) findViewById(R.id.LinearLayout01);
    linflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    btn = (Button) findViewById(R.id.Button01);
    btn.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            View myView = linflater.inflate(R.layout.dynamicoption, l, true);
            myView.setId(pos);
            pos++;
        }
    });

    btn1 = (Button) findViewById(R.id.Button02);
    btn1.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            if (pos > 0) {
                pos--;
                l.removeView(l.findViewById(pos));
            }
        }
    });
} 
```

# android - PocketSphinx 中的部分结果

> ID：12079010
> 
> 赞同：3
> 
> 时间：2012-08-22T18:13:21.103
> 
> 标签：android, colors, speech-recognition

我有一个使用 pocketsphinx 运行的应用程序（附带的演示）。例如，我的应用程序需要能够在收到命令时更改颜色。sphinx4 上的“hello world”排序为“color black/blue”而不是“hello phillip”

为此，我稍微修改了 pocketsphinxandroiddemo。

当使用按钮识别时，我可以通过在 OnResult 的 run() 中使用它来实现操作：

```
 if(hyp.equals("COLOR BLACK")){

                bg.setImageResource(R.drawable.black);

                }
                if(hyp.equals("COLOR WHITE")){
                bg.setImageResource(R.drawable.white);

                } 
```

那里没有问题。

但我需要持续收听，所以我绕过了按钮，转而使用 OnPartial run()。那里 .equals("KEY WORD") 不起作用，所以我使用了 .contains("KEY WORD")。只要我改变我的 if 语句而不是改变它们，这就会起作用，因为我的 hyp 或其他东西仍然包含以前的单词，因此执行我的开关中的最后一个命令。

问题：执行良好的操作后如何清除炒作？

这是我的 OnPartial：

> 公共无效 onPartialResults(Bundle b) {

```
 final PocketSphinxAndroidDemo that = this;
    final String hyp = b.getString("hyp");

    that.edit_text.post(new Runnable() {
        public void run() {
            that.edit_text.setText(hyp);
                if(hyp.contains("COLOR BLACK")){

                bg.setImageResource(R.drawable.black);

                }
                if(hyp.contains("COLOR WHITE")){
                    bg.setImageResource(R.drawable.white);

                } 
```

我对此很陌生（几个月前才开始学习编程），所以我可能会遗漏一些明显的东西。如果你能看到我的错误，请解释一下。如果我在 OnPartial 中应该使用 .contains 以外的东西，那该怎么办？我试过 .equals("KEY WORD") 但这仅适用于 OnResult。

亲切的问候雅各布

伊迪丝：“一些错误和代码”

伊迪丝 2：“想出了上一个问题的一部分”

# c# - 动态创建的按钮不触发其点击事件

> ID：12079011
> 
> 赞同：1
> 
> 时间：2012-08-22T18:13:22.303
> 
> 标签：c#, asp.net, events, button

我有一个动态页面，其中包含一个包含内容的面板。我在单击按钮时添加了一个新面板。使用动态添加的面板中的按钮，单击事件不会触发。

这是表单的代码：

```
<form id="form1" runat="server">
<div>
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>

            <asp:Panel ID="MainPanel" runat="server">
            </asp:Panel>

</div>
</form> 
```

这是创建一些面板和子按钮 ( `step_button`) 的代码：

```
public partial class _Default : System.Web.UI.Page
{

    Button button = new Button() { Text="Add level1"};
    static int controls = 1;

    private List<ActionPanel> PanelsList
    {
        get
        {
            if (Session["DataActionsPanels"] == null)
                Session["DataActionsPanels"] = new List<ActionPanel>();
            return (List<ActionPanel>)Session["DataActionsPanels"];
        }
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        button.Click += new EventHandler(button_Click);
        button.Attributes.Add("style", "float:right;");
        button.ID = "button1";
        MainPanel.Controls.Add(button);

        if (IsPostBack)
        {
            RestorePanels();
            return;
        }
        AddActionPanel();

    }

    protected void RestorePanels()
    {
        foreach (ActionPanel panel in PanelsList)
            AddActionPanel(panel);
    }

    protected void button_Click(object sender, EventArgs e)
    {
        controls++;            
        AddActionPanel(); 
    }

    protected void AddActionPanel()
    {
        var panel = new ActionPanel(controls, ScriptManager1);
        PanelsList.Add(panel);
        var button_index = MainPanel.Controls.IndexOf(button);
        MainPanel.Controls.AddAt(button_index, panel.GetPanel());
    }

    protected void AddActionPanel(ActionPanel panel)
    {
        var button_index = MainPanel.Controls.IndexOf(button);
        MainPanel.Controls.AddAt(button_index, panel.GetPanel());
    }
}

public class ActionPanel
{

    private Panel main_panel = new Panel();
    private TextBox data_action_id_box = new TextBox();
    private TextBox data_action_name_box = new TextBox();
    private TextBox data_action_error_box = new TextBox() ;
    Button step_button = new Button() { Text = "Add level2"};
    private Panel steps_panel = new Panel();
    private List<StepPanel> steps_list = new List<StepPanel>();
    private int step_count = 1;
    private ScriptManager _manager;
    public ActionPanel(int i, ScriptManager manager)
    {

        _manager = manager;
        main_panel.Attributes.Add("style", "float:left; width:100%");
        main_panel.GroupingText = "TestLevel  " + i;
        main_panel.Controls.Add(new Label() { Text = "TestLevel1" });
        data_action_id_box.Attributes.Add("style", "margin-left:13px");
        main_panel.Controls.Add(data_action_id_box);
        main_panel.Controls.Add(new Literal() { Text = "<br></br>" });

        main_panel.Controls.Add(new Label() { Text = "TestLevel11" });
        data_action_name_box.Attributes.Add("style", "margin-left:10px");
        main_panel.Controls.Add(data_action_name_box);
        main_panel.Controls.Add(new Literal() { Text = "<br></br>" });

        main_panel.Controls.Add(new Label() { Text = "TestLevel11" });
        data_action_error_box.Attributes.Add("style", "margin-left:33px");
        main_panel.Controls.Add(data_action_error_box);
        main_panel.Controls.Add(new Literal() { Text = "<br></br>" });

        step_button.ID = "button2_"+i;
        step_button.Click += new EventHandler(AddStep_Click);
        step_button.Attributes.Add("style", "float:right;");
        steps_panel.Controls.Add(step_button);
        steps_panel.Load += new EventHandler(steps_panel_Load);
        main_panel.Controls.Add(steps_panel);

        main_panel.Load += new EventHandler(steps_panel_Load);

        steps_panel.Attributes.Add("style", "float:left; width:100%");
        AddStepPanel();

    }

    void steps_panel_Load(object sender, EventArgs e)
    {

    }

    public  void AddStep_Click(object sender, EventArgs e)
    {
        step_count++;
        AddStepPanel();
    }

    public Panel GetPanel()
    {

        return main_panel;
    }

    private void AddStepPanel()
    {
        var panel = new StepPanel(step_count);
        steps_list.Add(panel);
        var button_index = steps_panel.Controls.IndexOf(step_button);
        steps_panel.Controls.AddAt(button_index, panel.GetPanel());
    }

    private void AddStepPanel(StepPanel panel)
    {
        var button_index = steps_panel.Controls.IndexOf(step_button);
        steps_panel.Controls.AddAt(button_index, panel.GetPanel());
    }
}

public class StepPanel
{

    private Panel main_panel = new Panel();
    private DropDownList step_type_box = new DropDownList();
    private TextBox step_name_box = new TextBox();
    private TextBox step_error_box = new TextBox() ;
    private Panel step_panel = new Panel();

    public StepPanel(int i)
    {
        main_panel.Attributes.Add("style", "float:left; width:100%");
        main_panel.GroupingText = "TestLevel2 " + i;
        main_panel.Controls.Add(new Label() { Text = "TestLevel2" });

        step_type_box.Items.Add("TestLevel2");
        step_type_box.Items.Add("TestLevel22");
        step_type_box.Items.Add("TestLevel222");
        step_type_box.Items.Add("TestLevel2222");
        step_type_box.Attributes.Add("style", "margin-left:13px");

        main_panel.Controls.Add(step_type_box);

        var label1 = new Label() { Text = "TestLevel22" };
        label1.Attributes.Add("style","margin-left:20px;");
        main_panel.Controls.Add(label1);
        step_name_box.Attributes.Add("style", "margin-left:10px");
        main_panel.Controls.Add(step_name_box);

        var label2 = new Label() { Text = "TestLevel222" };
        label2.Attributes.Add("style", "margin-left:20px;");
        main_panel.Controls.Add(label2);
        step_error_box.Attributes.Add("style", "margin-left:33px");
        main_panel.Controls.Add(step_error_box);

    }

    public Panel GetPanel()
    {

        return main_panel;
    }

} 
```

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:45:46.900

我解决了我的问题。

我使用保存在 Session 中的面板是我的错误。所有动态控件都必须在 Postback 中重新创建。

所以我更新方法“AddActionPanel（ActionPanel 面板）”：

```
 protected void AddActionPanel(ActionPanel panel)
    {
        var count = PanelsList.IndexOf(panel);
        var panel1 = new ActionPanel(count, ScriptManager1);

        var button_index = DataActionsPanel.Controls.IndexOf(button);
        DataActionsPanel.Controls.AddAt(count, panel1.GetPanel());
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T18:25:51.553

您正在添加面板`onload`，请在`init`或上进行操作`preinit`。这是微软的建议。

# python - Heroku for Django 应用程序的条件 pip 安装要求

> ID：12079013
> 
> 赞同：6
> 
> 时间：2012-08-22T18:13:30.980
> 
> 标签：python, django, heroku, pip

首先让我说，我不认为有办法做到这一点......但是，那里有很多聪明的人，所以我想我会问！:)

我发现了 Randall Degges 的一篇关于[在 Heroku 上设置 Django 应用程序](http://www.deploydjango.com/django_project_structure/index.html)的好文章/帖子（[Internet 存档链接](https://web.archive.org/web/20140413201552/http://www.deploydjango.com/django_project_structure/index.html)）。我真的很喜欢他所说的将您的需求分解为不同的文件（common.txt、dev.txt、prod.txt 等）。

这在 Heroku 上非常适用于生产，但我还在 Heroku 上维护了一个 Dev/QA 站点，并且我有一些我确实不需要用于 Dev/QA 的产品包。最好的例子是 django-debug-toolbar。目前，我的生产 requirements.txt 中确实有这个，我通过查看 DEBUG 设置动态决定是否需要在运行时将它添加到我安装的应用程序等。

哪个工作正常......但是，如果我什至不用费心将它安装在产品中，那就太好了。我想我想要的是让 pip 能够获取一个允许条件包含的需求文件（为什么它不能只获取一个 python 文件？）或者让 Heroku 支持一个配置设置来告诉它哪个需求文件使用。有没有人找到实现这一目标的方法？还是只是一厢情愿？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T18:38:54.917

你调查过[这个](https://devcenter.heroku.com/articles/python-pip)吗？

*如果您的 Python 应用程序包含 setup.py 文件但不包括 requirements.txt 文件，则 python setup.py develop 将用于安装您的包并解决您的依赖项。这最适用于分发或设置工具。直接使用 distutils 的项目会被安装，但不会被链接。该模块不会得到更新，直到有版本碰撞。如果您已经有一个需求文件但想利用此功能，您可以将以下内容添加到您的需求文件中：*

```
-e . 
```

然后按照[有条件地在 python2.6 上安装 importlib 中的建议进行操作](https://stackoverflow.com/questions/9418064/conditionally-installing-importlib-on-python2-6)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-01T10:21:30.257

我在构建中有类似的需求并在那里实现了它。现在我正在从 buildout 迁移到 pip，我提出了这个脚本，以根据某些条件使用一些不同的需求文件，可以基于 os/arch 或一些环境变量或任何你喜欢的东西。粗鲁但对我有效。

见[https://gist.github.com/pombredanne/72130ee6f202e89c13bb](https://gist.github.com/pombredanne/72130ee6f202e89c13bb)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T18:36:26.960

是的，这是一厢情愿。pip 需求文件非常简单。从字面上看，所有 pip 所做的只是`pip install`添加到文件中的每一行，因此条件等是不可行的。为每个环境提供单独的需求文件是个好主意，但问题是为什么不为您的开发/质量保证站点也提供一个版本？

也就是说，无论如何，我认为这有点学术。简单地安装一个软件包并不会伤害任何东西。例如，即使在生产环境中安装了 django-debug-toolbar 包也没关系，您的生产实例实际上不会*使用*它，所以除了它占用的几千字节的驱动器空间之外，这不是问题.

就我个人而言，我总是只有一个需求文件，并且在其中我只放了*requirements*，即这些是网站字面上无法运行的包。诸如 django-debug-toolbar、ipython 等之类的东西。我只是在需要时手动安装。

# ruby-on-rails - ActionController::RoutingError: 没有路由匹配 {:period_registration=>{}, :controller=>"period_registrations", :action=>"save_period"}

> ID：12079027
> 
> 赞同：0
> 
> 时间：2012-08-22T18:14:19.887
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个嵌套路线：

```
resources :period_registrations do
  member do
    post :save_period
  end 
```

这指向我的控制器动作：

```
 def save_period
    @period_registration = PeriodRegistration.new(params[:registration])
    @period_registration.save
    redirect_to root_path
  end 
```

我有一个测试：

```
test "should get save_period" do
    sign_in(FactoryGirl.create(:user))
     assert_difference('Event.count') do
      post :save_period, period_registration: FactoryGirl.attributes_for(:period_registration)
    end
    assert_not_nil assigns(:period_registration)

    assert_response :success
  end 
```

运行时会产生以下错误：

```
 1) Error:
test_should_get_save_period(PeriodRegistrationsControllerTest):
ActionController::RoutingError: No route matches {:period_registration=>{}, :controller=>"period_registrations", :action=>"save_period"} 
```

我觉得奇怪的是 :period_registration 是空的。应该是吗？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T18:44:27.317

`post`应该为 定义`collection`，即你需要改变你的路由：

```
post :save_period, :on => :collection 
```

而不是`member`块。例如，rails 内置`create`（由 生成`resources`）方法也绑定到一个集合。

补充笔记：

1.  您的控制器中有错误：`PeriodRegistration.new(params[:registration])`，但应该是`PeriodRegistration.new(params[:period_registration])`。
2.  测试中有一个错字：`should get save_period`=>`should post save_period`

# c# - Windows 服务 Facebook C# SDK 架构

> ID：12079029
> 
> 赞同：2
> 
> 时间：2012-08-22T18:14:25.793
> 
> 标签：c#, .net, service, facebook-c#-sdk, facebook-oauth

我们有我们认为不应该出现的情况，但找不到任何指导。

我们有一个帐户，其中每个品牌都有多个页面。我们需要一个无人看管的 Windows 服务，以便在检查数据库中的预定帖子后定期向各个页面发布帖子。

我们看到的唯一问题是身份验证。尽管 Twitter API 也使用 oAuth，但我们能够从 Twitter 获取永不过期的访问代码，并使用它来进行我们所有的 API 调用。我需要的是 Facebook API 中的等价物。缺乏这一点，我需要一种方法来完成我上面描述的事情。

提前感谢你的帮助。

~ DCT

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T08:58:00.937

我刚刚从 Windows 服务中做了类似的事情来发布到我自己的提要。我使用了 facebook sdk（[http://csharpsdk.org/](http://csharpsdk.org/)）

正如您在问题中所建议的那样，问题主要与身份验证有关。最后我发现了这个：

[http://developers.facebook.com/docs/opengraph/using-app-tokens/](http://developers.facebook.com/docs/opengraph/using-app-tokens/)

一旦您在要发布到的帐户上获得了正确权限的应用设置，您只需使用浏览器即可获得一个不会过期的令牌（只需添加应用 ID 和应用密码）：

```
GET https://graph.facebook.com/oauth/access_token?
        client_id=YOUR_APP_ID
       &client_secret=YOUR_APP_SECRET
       &grant_type=client_credentials 
```

这将返回一个不会过期的访问令牌，我只是将它粘贴到我的 app.config 中......

另外：请注意，由于您没有使用用户访问令牌，所有代表用户发布信息的调用都应引用 /[USER FB ID] 而不是 /me。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T19:50:31.547

您应该能够通过[http://facebookpsmodule.codeplex.com](http://facebookpsmodule.codeplex.com)使用 Task Scheduler 和 PowerShell 来执行类似的操作（因此您不需要创建 Windows 服务）。预定脚本将使用 Read-FBConnection 读取每个页面的令牌，然后使用 New-FBPost 创建帖子。您首先使用 New-FBConnection -PageId 和 Write-FBConnection 设置令牌文件——它们会为您处理 OAuth gunk。

一些注意事项：

Facebook 离线访问移除 (http://developers.facebook.com/roadmap/offline-access-removal/) 即将到来，这将导致令牌最终超时。当前的令牌应该至少可以使用几个月，我很快就会有一个新版本的模块，它应该能够创建永不过期的页面令牌（不是用户令牌，只是页面令牌）。

Facebook Graph API 创建的帖子可能带有创建它们的“应用程序”标记。我将我的默认应用程序命名为“所有者”以使其不那么突兀。您可以使用我的应用程序或制作您自己的应用程序。

Facebook Graph API 支持创建帖子，但不支持这些帖子中的 @-links。

Facebook 可以并且确实改变了他们的 API 并打破了自动化系统的向后兼容性。离线访问删除只是其中的一个例子。您需要密切关注 Facebook 开发者博客。

# symfony - Symfony2：通过几个实体查找

> ID：12079034
> 
> 赞同：0
> 
> 时间：2012-08-22T18:14:56.427
> 
> 标签：symfony, doctrine-orm, entities

我在使用 Doctrine2 搜索多个实体时遇到问题。

我有一个实体 People 通过“OneToMany”关系加入另一个实体电子邮件：

```
<?php
class People
{
  // ...
  /**
   * @ORM\OneToMany(targetEntity="Email", mappedBy="people")
   */
  protected $emails;
  // ...
}

class Email
{
  // ...
  /**
   * @ORM\ManyToOne(targetEntity="People", inversedBy="emails")
   * @ORM\JoinColumn(name="id", referencedColumnName="id")
   */
  protected $people;
} 
```

在我的 PeopleRepository 中，我尝试做这样的事情：

```
$queryBuilder = $this->_em->createQueryBuilder()
                  ->select('p')
                  ->from('MyBundle:People', 'p')
                  ->leftJoin('p.emails', 'e')
                  ->where('p.name LIKE :name')
                  ->andWhere('p.firstName LIKE :firstName')
                  ->andWhere('e.email LIKE :email')
                  ->setParameter('name', '%'.$name.'%')
                  ->setParameter('firstName', '%'.$firstName.'%')
                  ->setParameter('email', '%'.$email.'%'); 
```

但是电子邮件条件似乎没有被解释。我想得到 People 实体的响应，对应于它链接到的电子邮件实体的电子邮件属性。

不知道我说的够不够清楚。

但如果有人理解我的问题，知道我该怎么做吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T19:44:58.917

根据我对您的代码的了解，您正在执行左连接

```
->from('MyBundle:People', 'p')
->leftJoin('p.emails', 'e') 
```

因此它将仅返回所有人员实体过滤

```
->where('p.name LIKE :name')
->andWhere('p.firstName LIKE :firstName') 
```

用 innerJoin 替换您的 leftJoin 应该可以解决您的问题。

最好的问候，克里斯托夫

# java - Java - 将变量插入数据发送到 MySql 数据库

> ID：12079040
> 
> 赞同：0
> 
> 时间：2012-08-22T18:15:07.237
> 
> 标签：java, mysql, insert

我有一个简单的程序，我想在其中获取用户提供的名字和姓氏，然后将它们输入到 MySql 数据库中。`first`调用它们和的两个变量`last`将是简单的命令行提示，因此首先是扫描仪，然后是扫描仪。然后取第一个和最后一个并将它们添加到我的 MySql 语句中。这是我拥有的代码，但由于某种原因，我无法获得正确的语法。在这个例子中，我使用的是语句，尽管我可以并且会使用准备好的语句。在现实世界中，我会使用准备好的语句，但即使是语句也适用于这个项目。

这是我的带有一条扫描线的代码。现在，代码确实适用于两个常量值 Cathy 和 Jones。我希望那些是变量。

```
class AddStudent 
{ 

    public static void main (String[] args) 
    { 
        try
        { 

            Connection conn = DriverManager.getConnection(url,user,pass); 
            Statement st = conn.createStatement(); 
            Scanner first = new Scanner(System.in);
            System.out.println(first.nextLine());

            String SQL = "INSERT INTO test VALUES ('Cathy', 'Jones')";
            st.executeUpdate(SQL);

              conn.close(); 

        } catch (Exception e) { 
            System.err.println("Got an exception! "); 
            System.err.println(e.getMessage()); 
        } 

    }

    private static String url = "jdbc:mysql://localhost:3306/registrar"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T18:23:29.127

给你，但不建议一起去`Statement`

```
Scanner first = new Scanner(System.in);
String f = first.nextLine();

Scanner last = new Scanner(System.in);
String l = last.nextLine();    

String SQL = "INSERT INTO test VALUES ('" + f + "','" + l + "')";
st.executeUpdate(SQL); 
```

它的推荐是这样的：

```
PreparedStatement ps = conn.prepareStatement("INSERT INTO test VALUES (?, ?)");
ps.setString(1, f);
ps.setString(2, l);
ps.executeUpdate(); 
```

[参考资料](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T18:17:54.200

这么多潜在的错误。

1.  错过了关闭`}`课程。
2.  你确定你的数据库正在运行吗？
3.  你创建表了`test`吗？

4\. 您的扫描仪异常。

```
 Scanner scanner = new Scanner(System.in);
 String first = scanner.nextLine();
 String last = scanner.nextLine(); 
```

5.

```
String SQL = "INSERT INTO test VALUES ('Cathy', 'Jones')";
st.executeUpdate(SQL); 
```

应该

```
String SQL = String.format("INSERT INTO test VALUES ('%s', '%s')", first, last);
st.executeUpdate(SQL); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T18:31:08.000

最好的方法是以下方法。下面的代码可以实现您想要的，并防止 SQL 注入和其他由用户恶意或意外输入引起的问题。

```
String firstName = "Cathy";
String lastName = "Jones";
String query= "INSERT INTO test VALUES (?,?)";
PreparedStatement stmt = mysqlConnection.prepareStatement(query);
stmt.setString(1,firstName);
stmt.setString(2,lastName);
stmt.executeUpdate(SQL); 
```

# java - 订购 jbehave 故事以按顺序运行

> ID：12079041
> 
> 赞同：1
> 
> 时间：2012-08-22T18:15:17.807
> 
> 标签：java, integration-testing, jbehave

我正在尝试按顺序运行 jbehave 故事。

我的集成测试包结构如下所示

```
src/it/some/package/name/packageA/a.story
src/it/some/package/name/packageB/b.story
src/it/some/package/name/c.story 
```

我希望故事按照 a.story、b.story、c.story 的顺序运行

我尝试在 jBehave 中使用[GivenStories](http://jbehave.org/reference/stable/given-stories.html)，但它们似乎不起作用（可能是我没有正确指定它们）。如果有人可以指出 GivenStories 文本的创建，并且还显示一些关于 jbehave 在运行集成测试时如何创建排序的见解，我将非常感激，因为我看到在我的机器和詹金斯上运行的故事似乎正在产生不同的执行顺序。

非常感谢您对此的任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T12:23:38.187

猜猜这个回复可能有点晚了，但无论如何。我们也在尝试 JB，似乎仍然存在很多关于使这项工作的问题，尤其是对于任何现实世界。

我们已经给出了在模块内工作的故事，但是如果您尝试跨模块调用（例如，您有一个依赖 jar，其中包含您想要调用的常见故事，那么这似乎根本不起作用）。

不过，在同一个模块中，请确保将 GS 条目放置在故事中的正确位置，如下所示：

```
Story: Running BBB

GivenStories: com/xxx/test/stories/test_aaa_user.story

Given a BBB string
When I set BBB to activate
Then the BBB string is set to activate 
```

这在 BBB 之前运行 AAA 故事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T14:29:36.893

我实际上想出了一个解决这个问题的方法，我认为这比 GivenStories 方便得多

首先我添加了一个像这样的maven surefire配置

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-surefire-plugin</artifactId>
  <version>${surefire.version}</version>
  <configuration>
    <includes>
       <include>**/*TesterSequence.java</include>
    </includes>
  </configuration>
</plugin> 
```

SampleTesterSequence 的结构如下所示

```
import org.junit.AfterClass;
import org.junit.BeforeClass;
import org.junit.runner.RunWith;
import org.junit.runners.Suite;

@RunWith(Suite.class)
@Suite.SuiteClasses({ A.class,B.class, 
        C.class })
public class SampleTesterSequence {
    @BeforeClass
    public static void beforeStories() throws Exception {
       //TODO Implement before story steps
    }

    @AfterClass
    public static void afterStories() throws Exception {
      //TODO Implement after story steps
    }
} 
```

如您所见，该套件将按照我在套件中提到的顺序运行故事 a、b、c，当 Surefire 运行测试时，它会查找以结尾的模式，`TesterSequence`并将首先运行该类，然后从该类执行我们希望按照指定的顺序运行的故事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-05T22:34:00.240

发生这种情况的原因是因为 JBehave 按照它在文件系统中找到它们的顺序运行测试。为避免这种情况，您可以扩展 JBehave 的 StoryFinder 类并覆盖 findClassNames() 以使用存储在某处的有序列表（属性文件、build.xml 等）：

```
@Override
public List<String> findClassNames(String searchIn, List<String> includes, List<String> excludes) {

    String[] orderedTestListArray = retrtieveTestNamesFromBuildXml();

    List<String> scannedTestList = scan(searchIn, includes, excludes);
    System.out.println("Scanned Test List: " + scannedTestList);

    List<String> finalTestList = new ArrayList<String>();
    for(String x: orderedTestListArray) {
        for(String y: scannedTestList) {
            if(y.contains(x))
                finalTestList.add(y);
        }
    }

    System.out.println("Final Ordered Test List: " + finalTestList);
    return classNames(normalise(finalTestList));
} 
```

在这种情况下，我通过解析我的 ant build.xml 文件来检索orderedTestListArray，该文件包含我想要运行的有序测试列表：

```
private String[] retrtieveTestNamesFromBuildXml() {
    String[] orderedTestListArray = null;
    InputStream iStream = null;
    try {
        File file = new File("build.xml");

        if(file.exists()) {
           iStream = new FileInputStream(file);
           DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
           DocumentBuilder docBuilder = docFactory.newDocumentBuilder();
           Document doc = docBuilder.parse(iStream);       
           NodeList propertyNodes = doc.getElementsByTagName("property");

           String orderedTestListString = null;

           for (int i = 0; i < propertyNodes.getLength(); i++) {
               Element elementNode = (Element) propertyNodes.item(i);
               if(elementNode.getAttribute("name").equals("xed.tests.to.run")) {
                   orderedTestListString = elementNode.getAttribute("value");
                   break;
               }      
           }

           orderedTestListArray = orderedTestListString.split(",");
           for(int i = 0; i <= orderedTestListArray.length-1; i++) {
               orderedTestListArray[i] = orderedTestListArray[i].trim();
               orderedTestListArray[i] = orderedTestListArray[i].substring(3, orderedTestListArray[i].length());
           }
        }  
     }
     catch (Exception e) {
         System.out.println("Error parsing XML info from build.xml");
         e.printStackTrace();
         System.exit(1);
     }
    finally {
        try
        {
            if(iStream != null)
                iStream.close();
        }
        catch (IOException e)
        { 
            System.out.println("Error closing InputStream for build.xml");
            e.printStackTrace();
        }
    }
    return orderedTestListArray;
} 
```

最后，确保在从 ant 或 maven 运行时指定这个新的 StoryFinder 类，如下所示：

```
storyFinderClass=fullyQualifiedNameOfNewStoryFinderClass 
```

# java - struts2在jsp中使用属性标签嵌套文本标签

> ID：12079046
> 
> 赞同：1
> 
> 时间：2012-08-22T18:15:52.820
> 
> 标签：java, jsp, jakarta-ee, struts2

我已经在网上研究了很长时间没有运气，所以我决定问一下。

在我的应用程序中，动作类生成一个值，我可以通过

```
s：财产
```

标签没有问题。但是，由于该字符串还必须翻译成其他语言，所以我想使用该属性值作为

```
s：文本
```

标签。

明显地，

```
<s:text name="<s:property value="variable"/>"/> 
```

不起作用。

如果不先在动作类中翻译它，我怎么能做到这一点？我可以在 java 操作类中执行此操作，但我希望在 jsp 中执行此操作，因为我想保留变量。它在其他一些javascript函数中有一些意义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T19:44:39.023

这很容易。如果您的操作类扩展`ActionSupport`了，您总是可以在您的 jsp 文件中执行此操作。

```
<s:property value="getText('your.key')"/> 
```

`your.key`应该保存在你的 struts2 language.properties 文件中

**编辑**

如果您使用的是动态字符串，则应替换`your.key`为操作属性。

```
<s:property value="getText(yourProperty)"/> 
```

# xml - 如何让 Google 抓取我的 Ajax 内容（外部 XML）？

> ID：12079047
> 
> 赞同：0
> 
> 时间：2012-08-22T18:15:55.503
> 
> 标签：xml, ajax, external, web-crawler

（首先，对不起我的英语，这不是我的第一语言）

我有一个单页网站，在那里我有一个展示我们作品的作品集。项目列表是在页面加载时使用 ajax 从外部 xml 文件加载的。当我点击一个项目时，会出现一个带有项目图像和描述的叠加层。再次单击带有 ajax 的项目时会加载该描述。问题是：我的项目描述不在我加载的页面上，所以谷歌看不到我的内容。这些描述在谷歌搜索结果中非常有用，可以帮助我获得更多视图......

我试图将指向我的 xml 文件的链接放在我的 sitemap.xml 中，但谷歌没有读取它。

我不能将所有内容直接包含在我的 html 页面中，因为如果目前没有 IT 员工，那么拥有一个外部 xml 文件确实更容易添加项目。

我对该主题进行了研究，但只得到了模糊的答案......我看到当你有一个 Flash 文件时，谷歌现在会读取用 ActionScript 加载的外部 xlm 内容，但它在 html 和 javascript 中做同样的事情吗？

非常感谢您的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T12:43:36.933

为了让谷歌索引您页面的各种 ajax 状态，您必须遵守他们的 Ajax Crawling Scheme ( [https://developers.google.com/webmasters/ajax-crawling/docs/getting-started](https://developers.google.com/webmasters/ajax-crawling/docs/getting-started) )...

基本上你需要确保页面的每个状态都可以通过 url 加载（不仅仅是点击按钮），即如果按钮 1 链接到关于我们的页面，那么你还必须确保关于我们的状态可以通过加载一个网址哈希`/#!about-us`....

下一步是拦截 web bot 发出的请求（在上面的链接中进行了说明），并使用无头浏览器（即 QT + capybara-webkit、HtmlUnit 等）在url，然后将生成的 dom 传递回请求的机器人。

如果你使用的是 ruby​​，那么在 ruby​​gems 有一个 gem 来处理这个页面的截取和 DOM 快照的渲染；`gem install google_ajax_crawler`，源代码在[https://github.com/benkitzelman/google-ajax-crawler](https://github.com/benkitzelman/google-ajax-crawler) .... 你必须先自己实现客户端路由.... 应该不会太难做 - 某处在页面js中做类似的事情

`if(document.location.hash == '#!about-us') { $('.about-btn').click(); }`

# zurb-foundation - zurb 基础中心在网格中的内容

> ID：12079049
> 
> 赞同：32
> 
> 时间：2012-08-22T18:16:06.807
> 
> 标签：zurb-foundation, centering

我正在尝试将图像水平居中到 zurb 列中，但这似乎是不可能的。我尝试了一切，到处搜索，但我无法让它工作。

这是我的代码：

```
<div class="row">
    <div class="twelve columns"><br />
        <img src="img_06.jpeg" alt="slide image">
    </div>
</div> 
```

目前横向图像在 12 列网格上还可以，但是当出现纵向图像时，它位于网格的左侧。如果我给它一个 25% 的填充它会到中心，但是我使用 php 从一个文件夹中提取所有图像并动态生成代码，所以我不能在所有图像上都有 25% 的填充（景观的缩小）。

谢谢

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-02-06T21:42:59.430

**2015 年11 月编辑：**在 Foundation 6 中查看[Typography Helpers](http://foundation.zurb.com/sites/docs/typography-helpers.html)

* * *

**2014 年4 月编辑：**在 Foundation 5 中查看[Utility classes](http://foundation.zurb.com/docs/utility-classes.html)。

* * *

**原答案：**

使用文本中心类。

```
<div class="row">
    <div class="twelve columns text-center"><br />
        <img src="img_06.jpeg" alt="slide image">
    </div>
</div> 
```

来源：[https ://github.com/zurb/foundation/pull/224](https://github.com/zurb/foundation/pull/224)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T22:51:24.117

尝试添加居中的类。

```
.five.columns.centered 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-29T20:57:01.703

只需添加类“文本中心”

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-07T14:00:11.597

使用基础4：

HTML：

```
<div class="row">
    <div id="wrap-img" class="large-12 columns"><br />
        <img src="img_06.jpeg" alt="slide image">
    </div>
</div> 
```

CSS：

```
#wrap-img img { margin: 0 auto; } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-05T20:51:26.117

我可以让图像以 Foundation 4 为中心的唯一方法是更改​​为 display:block; 对于 img 而不是 display:inline-block;

# android - Android 上的 IDTech Unimag 刷卡器

> ID：12079050
> 
> 赞同：11
> 
> 时间：2012-08-22T18:16:11.637
> 
> 标签：android, credit-card, android-2.3-gingerbread

我已经在**Android (v2.3)**上工作了几个星期，我偶然发现了 IDTECH 的**Unimag Card Swiper**的一些问题。

该单元带有一个稀缺的文档，来自 SDK 的演示应用程序实现了固件更新和一些用于对话框的类等，这确实混淆了如何实现基本功能（添加到代码中的少数且不太好的注释中）。

我已经在基本活动中实现了接口，并试图检测单元何时连接或断开，但似乎侦听器将两个事件（连接/断开）都捕获为“断开”，更不用说尝试读取卡了。

**有没有人在 Android 上使用过这个单元并有一些明确的例子？**

顺便说一下，这是我的课：

```
package com.card.swipe;

import java.io.File;
import java.io.FileOutputStream;
import java.io.InputStream;
import IDTech.MSR.uniMag.uniMagReader;
import IDTech.MSR.uniMag.uniMagReaderMsg;
import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.TextView;
import android.widget.Toast;

public class CardSwipeTestActivity extends Activity implements uniMagReaderMsg {

    private uniMagReader myUniMagReader = null;
    private TextView etCardData;
    private String _strMSRData = null;
    private byte[]_MSRData = null;
    private String _strStatus = null;
    private int _nGetChallengeResult = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
//      InitializeUI();
        InitializeReader();  
        String strManufacture = myUniMagReader.getInfoManufacture();
        String strModel = myUniMagReader.getInfoModel();
        String strSDKVerInfo = myUniMagReader.getSDKVersionInfo();
        String strOSVerInfo = android.os.Build.VERSION.RELEASE;
        etCardData = (TextView)findViewById(R.id.text_view);
        etCardData.setText("Phone: "+strManufacture+"\n"+"Model: "+strModel+"\n"+"SDK Ver: "+strSDKVerInfo+"\nOS Version: "+strOSVerInfo);      
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        if(myUniMagReader!=null)
        {
            //you should stop swipe card and unregister when the application go to background
            myUniMagReader.stopSwipeCard();         
//          myUniMagReader.unregisterListen();
//          myUniMagReader.release();
        }
        super.onPause();
    }
    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        // you should register to listen the headset event when the application resumed.
//      if(myUniMagReader!=null)
//      {
////            myUniMagReader.registerListen();
//          if(_bCheckedSaveLogItem==true)
//              myUniMagReader.setSaveLogEnable(true);
//          else
//              myUniMagReader.setSaveLogEnable(false);
//      }
//      if(itemStartSC!=null)
//          itemStartSC.setEnabled(true); 
//      waitingCommandResult=false;
        super.onResume();
    }
    @Override
    protected void onDestroy() {
        myUniMagReader.release();
        super.onDestroy();      
        android.os.Process.killProcess(android.os.Process.myPid());
    }    

    //********************************************************************************//    

    @Override
    public boolean getUserGrant(int arg0, String arg1) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public void onReceiveMsgAutoConfigProgress(int arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onReceiveMsgCardData(byte arg0, byte[] arg1) {
        // TODO Auto-generated method stub
        Log.d("SWIPE", "Card swiped!");
        Toast.makeText(getApplicationContext(), "Card swiped!", Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onReceiveMsgCommandResult(int arg0, byte[] arg1) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onReceiveMsgConnected() {
        Log.d("CONNECTION","Swiper Connected");
        Toast.makeText(getApplicationContext(), "Swiper Connected!", Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onReceiveMsgDisconnected() {
        Log.d("CONNECTION","Swiper Disconnected");
        Toast.makeText(getApplicationContext(), "Swiper Disconnected!", Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onReceiveMsgFailureInfo(int arg0, String arg1) {
        // TODO Auto-generated method stub
        Log.d("CONNECTION","Swiper Failure");
    }

    @Override
    public void onReceiveMsgSDCardDFailed(String arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onReceiveMsgTimeout(String arg0) {
        Log.d("TIMEOUT","Timed out!");  
        Toast.makeText(getApplicationContext(), "Timed out!", Toast.LENGTH_SHORT).show();   
    }

    @Override
    public void onReceiveMsgToConnect() {
        Log.d("CONNECTION","Swiper Powered Up");
        Toast.makeText(getApplicationContext(), "Swiper Powered Up", Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onReceiveMsgToSwipeCard() {
        Log.d("SWIPE","Ready to swipe!");
        Toast.makeText(getApplicationContext(), "Ready to swipe!", Toast.LENGTH_SHORT).show();      
    }

    //********************************************************************************//

    private void InitializeReader()
    {
        if(myUniMagReader==null)
            myUniMagReader =  new uniMagReader(this,this);

        myUniMagReader.setVerboseLoggingEnable(true);
        myUniMagReader.registerListen();
        //load the XML configuratin file
        String fileNameWithPath = getXMLFileFromRaw();
        if(!isFileExist(fileNameWithPath)) { fileNameWithPath = null; }        
        myUniMagReader.setXMLFileNameWithPath(fileNameWithPath);
        myUniMagReader.loadingConfigurationXMLFile(true);
        myUniMagReader.setTimeoutOfSwipeCard(5); 
    }

    private boolean isFileExist(String path) {
        if(path==null)
            return false;
        File file = new File(path);
        if (!file.exists()) {
          return false ;
        }
        return true;
    }   

    private String getXMLFileFromRaw( ){
        //the target filename in the application path
       String fileNameWithPath = null;
       fileNameWithPath = "idt_unimagcfg_default.xml";

       try{
           InputStream in = getResources().openRawResource(R.raw.idt_unimagcfg_default);
           int length = in.available();
           byte [] buffer = new byte[length];
           in.read(buffer);        
           in.close();

           deleteFile(fileNameWithPath);

           FileOutputStream fout = openFileOutput(fileNameWithPath, MODE_PRIVATE);
           fout.write(buffer);
           fout.close();

           // to refer to the application path
           File fileDir = this.getFilesDir();
           fileNameWithPath = fileDir.getParent() + java.io.File.separator + fileDir.getName();
           fileNameWithPath = fileNameWithPath+java.io.File.separator+"idt_unimagcfg_default.xml";

           }
           catch(Exception e){
           e.printStackTrace();
           fileNameWithPath = null;
           }

        return   fileNameWithPath;

        }   

    public void swipe(View v)
    {
        if(myUniMagReader!=null)
        {
            myUniMagReader.startSwipeCard();
        }
        if(myUniMagReader.isSwipeCardRunning()==true)
        {
            Log.d("SWIPE","Swipe Card Running!");
        }       
    }

    private String getHexStringFromBytes(byte []data)
    {
        if(data.length<=0) return null;
        StringBuffer hexString = new StringBuffer();
        String fix = null;
        for (int i = 0; i < data.length; i++) {
            fix = Integer.toHexString(0xFF & data[i]);
            if(fix.length()==1)
                fix = "0"+fix;
            hexString.append(fix);
       }
       fix = null;
       fix = hexString.toString();
       return fix;
    }

    public byte[] getBytesFromHexString(String strHexData)
    {
        if (1==strHexData.length()%2) {
            return null;
        }
        byte[] bytes = new byte[strHexData.length()/2];
        for (int i=0;i<strHexData.length()/2;i++) {
            bytes[i] = (byte) Integer.parseInt(strHexData.substring(i*2, (i+1)*2) , 16);
        }
        return bytes;
    }
} 
```

（那里也有一些未实现的方法）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T22:45:36.420

这是我在 UniMag 上使用的。使用处理程序输出刷过的数据，并使用“刷卡”按钮开始刷卡。为了改进，应该等到读卡器报告它已连接/准备刷卡，然后启用按钮，等待刷卡时禁用，并在收到数据后重新启用。

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

import IDTech.MSR.XMLManager.StructConfigParameters;
import IDTech.MSR.uniMag.uniMagReader;
import IDTech.MSR.uniMag.uniMagReaderMsg;
import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity implements uniMagReaderMsg {

    private uniMagReader myUniMagReader = null;
    private Button btnSwipe;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        if(myUniMagReader == null) {
            myUniMagReader = new uniMagReader(this,this);
            myUniMagReader.setSaveLogEnable(false);
            myUniMagReader.setXMLFileNameWithPath(null);
            myUniMagReader.loadingConfigurationXMLFile(true);

            //myUniMagReader.setVerboseLoggingEnable(true);
            myUniMagReader.registerListen();
        }

        btnSwipe = (Button) findViewById(R.id.button1);
        btnSwipe.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                myUniMagReader.startSwipeCard();
            }
        });
    }

    @Override
    public void onDestroy() {
    myUniMagReader.stopSwipeCard();
        myUniMagReader.unregisterListen();
        myUniMagReader.release();
        super.onDestroy();
    }

    @Override
    public boolean getUserGrant(int arg0, String arg1) {
        Log.d("UniMag", "getUserGrant -- " + arg1);
        return true;
    }

    @Override
    public void onReceiveMsgAutoConfigProgress(int arg0) {
        // TODO Auto-generated method stub
        Log.d("UniMag", "onReceiveMsgAutoConfigProgress");
    }

    @Override
    public void onReceiveMsgCardData(byte arg0, byte[] arg1) {
        Log.d("UniMag", "onReceiveMsgCardData");
        Log.d("UniMag", "Successful swipe!");

        String strData = new String(arg1);
        Log.d("UniMag", "SWIPE - " + strData);
        if(myUniMagReader.isSwipeCardRunning()) {
            myUniMagReader.stopSwipeCard();
        }

        // Match the data we want.
        String pattern = "%B(\\d+)\\^([^\\^]+)\\^(\\d{4})";
        Log.d("UniMag", pattern);
        Pattern r = Pattern.compile(pattern);
        Matcher m = r.matcher(strData);
        String card = "";
        String name = "";
        String exp = "";
        String data = "";
        if(m.find()) {
            for(int a = 0; a < m.groupCount(); ++a) {
                Log.d("UniMag", a + " - "+m.group(a));
            }
            card = m.group(1);
            name = m.group(2);
            exp = m.group(3);
            data = "Data: " + name + " -- " + card + " -- " + exp;
            Log.d("UniMag", data);

            Message msg = new Message();
            msg.obj = data;
            swipeHandler.sendMessage(msg);
        }

    }

    final Handler swipeHandler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            String text = (String)msg.obj;
            TextView dataView = (TextView) findViewById(R.id.text_view);
            dataView.setText(text);
        }
    };

    @Override
    public void onReceiveMsgCommandResult(int arg0, byte[] arg1) {
        Log.d("UniMag", "onReceiveMsgCommandResult");
    }

    @Override
    public void onReceiveMsgConnected() {
        Log.d("UniMag", "onReceiveMsgConnected");
        Log.d("UniMag", "Card reader is connected.");
    }

    @Override
    public void onReceiveMsgDisconnected() {
        Log.d("UniMag", "onReceiveMsgDisconnected");
        if(myUniMagReader.isSwipeCardRunning()) {
            myUniMagReader.stopSwipeCard();
        }
        myUniMagReader.release();

    }

    @Override
    public void onReceiveMsgFailureInfo(int arg0, String arg1) {
        Log.d("UniMag","onReceiveMsgFailureInfo -- " + arg1);
    }

    @Override
    public void onReceiveMsgSDCardDFailed(String arg0) {
        Log.d("UniMag", "onReceiveMsgSDCardDFailed -- " + arg0);
    }

    @Override
    public void onReceiveMsgTimeout(String arg0) {
        Log.d("UniMag", "onReceiveMsgTimeout -- " + arg0);
        Log.d("UniMag","Timed out!");
    }

    @Override
    public void onReceiveMsgToConnect() {
        Log.d("UniMag","Swiper Powered Up");
    }

    @Override
    public void onReceiveMsgToSwipeCard() {
        Log.d("UniMag","onReceiveMsgToSwipeCard");      
    }

    @Override
    public void onReceiveMsgAutoConfigCompleted(StructConfigParameters arg0) {
        Log.d("UniMag", "onReceiveMsgAutoConfigCompleted");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-11T19:24:53.720

我发现他们与 SDK 一起发布的 3.8 演示应用程序有一个错误，它无法连接到 Android gt-p3113 平板电脑，除非您进入手机应用程序的设置并关闭“连接命令”。

# java - javax.xml.bind.UnmarshalException：意外元素。我错过了什么？

> ID：12079052
> 
> 赞同：1
> 
> 时间：2012-08-22T18:16:24.347
> 
> 标签：java, jaxb, unmarshalling

我正在这样做，

```
JAXBContext jaxbContext = JAXBContext.newInstance(new Class[] { 
      mine.beans.ObjectFactory.class }); 
Unmarshaller unmarshaller = jaxbContext.createUnmarshaller();
orderhistory = (OrderHistory) unmarshaller.unmarshal(new StreamSource(
      new StringReader(responseXML)));` 
```

我得到了，`javax.xml.bind.UnmarshalException: Unexpected element "OrderHistory". Expected elements are "{_http://orderhistory.shc.com/common/domain}OrderHistory".`但我检查了我的 OrderHistory.java 我有

```
@XmlRootElement(name = "OrderHistory")
public class OrderHistory{ 
```

我错过了什么？？？

甚至 package-info.java 文件也存在

这是我的响应xml，
`<?xml version="1.0" encoding="UTF-8"?>`
`<OrderHistory>`
`<guid>5555</guid>`
`<syNumber xsi:nil="true"></syNumber>`
`<email xsi:nil="true"></email>`
`<totalPages>0</totalPages>`
`</OrderHistory>`

我仍然面临同样的问题？？？

我已经对我的 package-info.java 进行了更改，我已经删除了命名空间属性，但我仍然看到同样的问题，

`@javax.xml.bind.annotation.XmlSchema() package mine.beans;`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T18:24:51.480

看起来好像您的输入文档不是命名空间限定的。

你有：

```
<OrderHistory>...</OrderHistory> 
```

您的 JAXB (JSR-222) 实现期望：

```
<OrderHistory xmlns="_http://orderhistory.shc.com/common/domain">...</OrderHistory> 
```

**有关的**

如果您从 DOM 解组，请确保`setNamespaceAware(true)`调用`DocumentBuilderFactory`.

**了解更多信息**

*   [http://blog.bdoughan.com/2010/08/jaxb-namespaces.html](http://blog.bdoughan.com/2010/08/jaxb-namespaces.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T18:28:43.440

作为提示。尝试从您的对象编组文档，并查看标签是否按预期写入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T06:30:24.723

您是否尝试修改您的 XML？您的 UNmarshaller 期望 OrderHistory-Element 成为“http://orderhistory.shc.com/common/domain”命名空间的一部分，但它不是。你可以试试这个：

```
<?xml version="1.0" encoding="UTF-8"?>
<OrderHistory xmlns="_http://orderhistory.shc.com/common/domain">
<guid>5555</guid>
<syNumber xsi:nil="true"></syNumber>
<email xsi:nil="true"></email>
<totalPages>0</totalPages>
</OrderHistory> 
```

# javascript - 信任 Javascript 垃圾收集器

> ID：12079054
> 
> 赞同：2
> 
> 时间：2012-08-22T18:16:35.553
> 
> 标签：javascript, garbage-collection

我有几个实例，其中我的 Javascript 代码似乎正在泄漏内存，但我不确定垃圾收集器应该期待什么。

例如`var = new Object()`，在 Firefox 中运行的间隔计时器功能似乎会随着时间的推移而泄漏。有一些简单的解决方案，但我很好奇我是否应该期望垃圾收集器处理所有事情，或者我负责帮助垃圾收集器。

如果我需要帮助垃圾收集器，规则是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T19:27:28.203

不得不将此作为答案而不是对长度的评论：

好的——首先澄清一下术语：

如果它在计时器上运行，则它*不是*递归的。然而，这是一个常见的误解。

它是递归代码，一个函数调用自己——原始函数调用保留在堆栈上，直到整个事情最终展开并将一个值返回给原始调用者。使用超时时，函数的每次迭代都在单独的执行上下文中。

递归函数示例 function factorial(n) { if (n == 1) { return 1; } else { 返回 n * 阶乘（n-1）；} }

这是/非/递归的：function annoy() { window.setTimeout(annoy, 1000); window.alert("这会让每一秒都很烦人！"); }

'annoy' 的每次迭代都是完全独立且独立的。它只是为要调用的另一个实例设置计时器。堆栈上没有一堆“烦人”的函数，你不能向调用者返回任何东西。

其次：在我给你的例子中，变量`a`没有超出范围，但是引用的旧对象`a`没有活动引用，所以它们可以自由释放。变量指向的内容可能会有所不同。

```
var a, b;
a = {};
b = a;   // This object now has TWO references using it.

b = null;  // The object now has one reference
a = null;  // Object has no references and is free for release. 
```

在这一点上，我能做的最好的事情就是把你指向这里：

[http://www.ibm.com/developerworks/web/library/wa-sieve/](http://www.ibm.com/developerworks/web/library/wa-sieve/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T07:54:19.390

大多数（我相信所有）Javascript (ECMAScript) 引擎都通过一种称为“引用计数”的方法工作。我会让你去看看那个词。

简而言之，当没有任何东西指向它时，一个对象被释放以释放它……使用它。

有两件事可能会让您不了解正在使用多少内存。

1) ECMAScript 不会在系统处理完对象后立即释放它。垃圾收集“按需”运行。这可以有很大的不同。

2）闭包可以比你想象的更长时间地保持引用。意外关闭的时间可能比您预期的要长。

# c - 为什么要阻止文件作为控制终端打开（使用 O_NOCTTY）？

> ID：12079059
> 
> 赞同：18
> 
> 时间：2012-08-22T18:17:22.557
> 
> 标签：c, linux

O_NOCTTY 的目的记录为：

> O_NOCTTY - 防止操作系统在打开 TTY 设备文件时将打开的文件分配为进程的控制终端

有人可以解释阻止文件打开控制终端的意图吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-22T18:39:33.147

拥有一个控制 tty 意味着在某些情况下，特定的信号可能会发送到您的程序，以响应您的程序正在运行的 tty/窗口上发生的事情。如果该程序打算成为一个守护进程，那么确保您没有控制 tty 通常比尝试编写代码来处理您一开始并不真正关心的所有额外条件要干净。 ..

# sql-server-2008-r2 - 在 SQL Server Reporting Services 中将 GUID 转换为字符串

> ID：12079064
> 
> 赞同：7
> 
> 时间：2012-08-22T18:17:51.713
> 
> 标签：sql-server-2008-r2, ssrs-2008, reporting-services

尝试`GUID`在报告中显示列时..它显示为`#error`..

```
=CStr(Fields!number.Value).ToString 
```

我在列的属性中尝试了上面的代码..它不起作用..

请指教

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-22T18:28:21.437

```
=CType(Fields!number.Value, GUID).ToString 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-15T10:51:01.347

如果是 GUID，则直接显示，不做任何处理，与其他数据类型一样。
如果您想将其转换为其他用途，只需使用 ToString，例如：
=IIf(Fields!number.Value.ToString=Fields!ID.Value.ToString, "true", "false")

# entity-framework - 实体框架迁移 - 支持动态连接字符串

> ID：12079068
> 
> 赞同：9
> 
> 时间：2012-08-22T18:18:07.137
> 
> 标签：entity-framework, entity-framework-4.3, package-managers, entity-framework-migrations

我无法使迁移适用于特定场景。

我们的应用程序使用两种不同的模型。第一个是主数据库，在那里，迁移工作正常。第二种模型是针对我们的客户数据库的，它针对每个客户（当然……）但都共享相同的模型。

因此，在应用程序（ASP.Net MVC 3）中，我们使用路由识别客户，并且所有客户都托管在同一个应用程序中。因此，对于每个请求，我们将一个密钥传递给我们的客户模型 dbContext 构造函数，并使用该密钥通过一个简单的辅助方法恢复连接字符串。

该应用程序工作正常，但迁移却没有，因为我发现无法在包管理器控制台中传递密钥。

我试图创建自己的 IDbConnectionFactory 但没有考虑在内。

如果我尝试使用连接工厂的更新数据库命令，我会收到以下错误，这是正常的，因为没有传递任何密钥，但我可以看到我的连接工厂正在启动（EFCustomerModel.EFConnectionFactory）：

```
PM> update-database  -verbose
Using NuGet project 'EFCustomerModel'.
Using StartUp project 'PMEL.DatabaseSetup'.
System.ArgumentException: Format of the initialization string does not conform to specification starting at index 0.
   at System.Data.Common.DbConnectionOptions.GetKeyValuePair(String connectionString, Int32 currentPosition, StringBuilder buffer, Boolean useOdbcRules, String& keyname, String& keyvalue)
   at System.Data.Common.DbConnectionOptions.ParseInternal(Hashtable parsetable, String connectionString, Boolean buildChain, Hashtable synonyms, Boolean firstKey)
   at System.Data.Common.DbConnectionOptions..ctor(String connectionString, Hashtable synonyms, Boolean useOdbcRules)
   at System.Data.SqlClient.SqlConnectionString..ctor(String connectionString)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnectionOptions(String connectionString, DbConnectionOptions previous)
   at System.Data.ProviderBase.DbConnectionFactory.GetConnectionPoolGroup(String connectionString, DbConnectionPoolGroupOptions poolOptions, DbConnectionOptions& userConnectionOptions)
   at System.Data.SqlClient.SqlConnection.ConnectionString_Set(String value)
   at System.Data.SqlClient.SqlConnection.set_ConnectionString(String value)
   at System.Data.SqlClient.SqlConnection..ctor(String connectionString)
   **at EFCustomerModel.EFConnectionFactory.CreateConnection(String nameOrConnectionString) in C:\...\EFCustomerModel\EFConnectionFactory.vb:line 18**
   at System.Data.Entity.Internal.LazyInternalConnection.Initialize()
   at System.Data.Entity.Internal.LazyInternalConnection.get_Connection()
   at System.Data.Entity.Internal.LazyInternalContext.get_Connection()
   at System.Data.Entity.Infrastructure.DbContextInfo..ctor(Type contextType, DbProviderInfo modelProviderInfo, AppConfig config, DbConnectionInfo connectionInfo)
   at System.Data.Entity.Infrastructure.DbContextInfo..ctor(Type contextType)
   at System.Data.Entity.Migrations.DbMigrator..ctor(DbMigrationsConfiguration configuration, DbContext usersContext)
   at System.Data.Entity.Migrations.DbMigrator..ctor(DbMigrationsConfiguration configuration)
   at System.Data.Entity.Migrations.Design.ToolingFacade.BaseRunner.GetMigrator()
   at System.Data.Entity.Migrations.Design.ToolingFacade.UpdateRunner.RunCore()
   at System.Data.Entity.Migrations.Design.ToolingFacade.BaseRunner.Run()
Format of the initialization string does not conform to specification starting at index 0. 
```

但是当我尝试使用 -ConnectionString 参数传入我的密钥时，我的连接工厂被忽略了，我得到了同样的错误：

```
PM> update-database  -verbose -ConnectionString:CC99999 -ConnectionProviderName:System.Data.SqlClient
Using NuGet project 'EFCustomerModel'.
Using StartUp project 'PMEL.DatabaseSetup'.
System.ArgumentException: Format of the initialization string does not conform to specification starting at index 0.
   at System.Data.Common.DbConnectionOptions.GetKeyValuePair(String connectionString, Int32 currentPosition, StringBuilder buffer, Boolean useOdbcRules, String& keyname, String& keyvalue)
   at System.Data.Common.DbConnectionOptions.ParseInternal(Hashtable parsetable, String connectionString, Boolean buildChain, Hashtable synonyms, Boolean firstKey)
   at System.Data.Common.DbConnectionOptions..ctor(String connectionString, Hashtable synonyms, Boolean useOdbcRules)
   at System.Data.SqlClient.SqlConnectionString..ctor(String connectionString)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnectionOptions(String connectionString, DbConnectionOptions previous)
   at System.Data.ProviderBase.DbConnectionFactory.GetConnectionPoolGroup(String connectionString, DbConnectionPoolGroupOptions poolOptions, DbConnectionOptions& userConnectionOptions)
   at System.Data.SqlClient.SqlConnection.ConnectionString_Set(String value)
   at System.Data.SqlClient.SqlConnection.set_ConnectionString(String value)
   at System.Data.Entity.Internal.LazyInternalConnection.InitializeFromConnectionStringSetting(ConnectionStringSettings appConfigConnection)
   at System.Data.Entity.Internal.LazyInternalConnection.Initialize()
   at System.Data.Entity.Internal.LazyInternalConnection.get_Connection()
   at System.Data.Entity.Internal.LazyInternalContext.get_Connection()
   at System.Data.Entity.Infrastructure.DbContextInfo..ctor(Type contextType, DbProviderInfo modelProviderInfo, AppConfig config, DbConnectionInfo connectionInfo)
   at System.Data.Entity.Infrastructure.DbContextInfo..ctor(Type contextType, DbConnectionInfo connectionInfo)
   at System.Data.Entity.Migrations.DbMigrator..ctor(DbMigrationsConfiguration configuration, DbContext usersContext)
   at System.Data.Entity.Migrations.DbMigrator..ctor(DbMigrationsConfiguration configuration)
   at System.Data.Entity.Migrations.Design.ToolingFacade.BaseRunner.GetMigrator()
   at System.Data.Entity.Migrations.Design.ToolingFacade.UpdateRunner.RunCore()
   at System.Data.Entity.Migrations.Design.ToolingFacade.BaseRunner.Run()
Format of the initialization string does not conform to specification starting at index 0. 
```

那么，这是迁移中不受支持的情况，还是有另一种方法可以传入我的密钥，或者可能有另一种方法来生成我的连接字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T22:49:45.430

您应该能够使用`-ConnectionStringName`参数将密钥传递给您的自定义连接工厂。此参数将传递给`CreateConnection`方法。

另一种可能的解决方案是从您的代码中调用数据库迁移：

```
var configuration = new Configuration();
configuration.TargetDatabase = new DbConnectionInfo(
    "Server=MyServer;Database=MyDatabase;Trusted_Connection=True;", 
    "System.Data.SqlClient");

var migrator = new DbMigrator(configuration);
migrator.Update(); 
```

# less - LESS 中特定响应范围的便利功能

> ID：12079074
> 
> 赞同：1
> 
> 时间：2012-08-22T18:18:16.947
> 
> 标签：less, responsive-design

我真的很想退出打字：

```
@media (min-width: @min-tablet-width) and (max-width: @max-tablet-width) {
  // styles for tablets
} 
```

在我的LESS文件中。

据我所知，LESS 无法将其移至函数中，例如：

```
.tablet() {
  // styles for tablets
} 
```

还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-05T08:11:12.047

看看这个：[https](https://github.com/dalou/bootstrap3-less-mixins) ://github.com/dalo​​u/bootstrap3-less-mixins ex：

```
h2 {
    font-size: 20px;
    .phone-only({
         font-size: 14px;
    })
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T18:32:51.000

目前的答案是：**不**。

编辑：见上面Dalou的回答。

# jquery - 带有 Flickr Feed 的 ColorBox

> ID：12079084
> 
> 赞同：0
> 
> 时间：2012-08-22T18:19:01.620
> 
> 标签：jquery, colorbox, feed, flickr

我已经在我的网站上实现了以下[http://www.jacklmoore.com/notes/colorbox-with-json-or-flickr](http://www.jacklmoore.com/notes/colorbox-with-json-or-flickr)并且一切正常。我可以点击图片，然后将它们从 Flickr 中提取出来。除了我只能看到前 6 张图片之外，所有这些都完美无缺？？？

我尝试查看整个代码，但找不到为什么它只加载前 6 个图像？？？！！！我可以使用浏览器查看所有图像，但不能在我的网站上查看。

我认为这可能是兑现问题或其他问题，但后来我确实删除了其中一张图片，它立即向我显示了 5 张图片，其中 1 张说加载这张图片时出现问题。

有人可以帮我弄清楚吗？

```
 <script>

        var params = {
            id: 'Insert Your Flickr ID here', // my Flickr User ID
            format: 'json',
            jsoncallback: '?'
        },
        feedURL = 'http://api.flickr.com/services/feeds/photos_public.gne',
        feedQuery = decodeURIComponent($.param(params));

        function buildLinks(json) {
            var photo,
            $links = $(), 
            $thumb,
            $anchor;

            while ( photo = json.items.pop() ){
                $anchor = $('<a/>').attr({
                    // get the medium-large size photo
                    href: photo.media.m.replace('_m', '_z'),
                    title: photo.title
                });

                $thumb = $('<img/>').attr({
                    // get the small-square size thumbnail photo
                    src: photo.media.m.replace('_m', '_s'),
                    alt: photo.title
                }).appendTo($anchor);

                $links = $links.add($anchor);
            }

            $links.colorbox({rel:'flickr'});

            // Wait until the DOM has loaded before trying to append to the body
            $(document).ready(function () {
                $('#content').append($links);
            });
        }

        $.getJSON(feedURL + '?' + feedQuery, buildLinks);

    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T19:19:12.323

如果它只显示 6 张图片，那么可能这就是 Flickr Feed 返回的全部内容。你检查过饲料给你什么吗？

# xaml - 右键单击 GridView 项目显示 AppBar

> ID：12079086
> 
> 赞同：2
> 
> 时间：2012-08-22T18:19:06.333
> 
> 标签：xaml, windows-runtime, windows-store-apps, winrt-xaml, appbar

在 WinRT 应用程序中，当您右键单击 ListBoxItem 时，将显示 AppBar。但是，当您右键单击 GridViewItem 时，AppBar 不会出现。这个可以配置吗？

如果不是，最好使用 ListBox 而不是 GridView 并自定义模板。或者我应该使用 RightTapped 命令来实现它。（我使用 MVVM Light，因为 Caliburn.Micro 目前不工作）

RightTappedCommand 示例：

```
 public sealed class RightTapped
    {
        #region Properties

        #region Command

        /// 
        /// GetCommand
        /// 
        /// 
        /// 
        public static ICommand GetCommand(DependencyObject obj)
        {
            return (ICommand)obj.GetValue(CommandProperty);
        }

        /// 
        /// SetCommand
        /// 
        /// 
        /// 
        public static void SetCommand(DependencyObject obj, ICommand value)
        {
            obj.SetValue(CommandProperty, value);
        }

        /// 
        /// DependencyProperty CommandProperty
        /// 
        public static readonly DependencyProperty CommandProperty =
            DependencyProperty.RegisterAttached("Command", typeof(ICommand), typeof(RightTapped), new PropertyMetadata(null, OnCommandChanged));

        #endregion Command

        #region CommandParameter

        /// 
        /// GetCommandParameter
        /// 
        /// 
        /// 
        public static object GetCommandParameter(DependencyObject obj)
        {
            return (object)obj.GetValue(CommandParameterProperty);
        }

        /// 
        /// SetCommandParameter
        /// 
        /// 
        /// 
        public static void SetCommandParameter(DependencyObject obj, object value)
        {
            obj.SetValue(CommandParameterProperty, value);
        }

        /// 
        /// DependencyProperty CommandParameterProperty
        /// 
        public static readonly DependencyProperty CommandParameterProperty =
            DependencyProperty.RegisterAttached("CommandParameter", typeof(object), typeof(RightTapped), new PropertyMetadata(null, OnCommandParameterChanged));

        #endregion CommandParameter

        #region HasCommandParameter

        private static bool GetHasCommandParameter(DependencyObject obj)
        {
            return (bool)obj.GetValue(HasCommandParameterProperty);
        }

        private static void SetHasCommandParameter(DependencyObject obj, bool value)
        {
            obj.SetValue(HasCommandParameterProperty, value);
        }

        private static readonly DependencyProperty HasCommandParameterProperty =
            DependencyProperty.RegisterAttached("HasCommandParameter", typeof(bool), typeof(RightTapped), new PropertyMetadata(false));

        #endregion HasCommandParameter

        #endregion Propreties

        #region Event Handling

        private static void OnCommandParameterChanged(DependencyObject o, DependencyPropertyChangedEventArgs e)
        {
            SetHasCommandParameter(o, true);
        }

        private static void OnCommandChanged(DependencyObject o, DependencyPropertyChangedEventArgs e)
        {
            var element = o as FrameworkElement;
            if (element != null)
            {
                if (e.NewValue == null)
                {
                    element.RightTapped -= FrameworkElementKeyUp;
                }
                else if (e.OldValue == null)
                {
                    element.RightTapped += FrameworkElementKeyUp;
                }
            }
        }

        private static void FrameworkElementKeyUp(object sender, RightTappedRoutedEventArgs e)
        {
            var o = sender as DependencyObject;
            var command = GetCommand(sender as DependencyObject);

            var element = e.OriginalSource as FrameworkElement;
            if (element != null)
            {
                // If the command argument has been explicitly set (even to NULL) 
                if (GetHasCommandParameter(o))
                {
                    var commandParameter = GetCommandParameter(o);

                    // Execute the command 
                    if (command.CanExecute(commandParameter))
                    {
                        command.Execute(commandParameter);
                    }
                }
                else if (command.CanExecute(element.DataContext))
                {
                    command.Execute(element.DataContext);
                }
            }
        }

        #endregion
    }
```

在 Xaml 中，是这样的：

```
common:Tapped.Command="{Binding ShowAppBar}" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T20:39:38.083

你可以只做 myAppBar.IsOpen = true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-27T12:56:13.187

取决于gridview的选择方式，右键用于选择item。如果将 selectionmode 属性设置为 None，则应用栏将在右键单击时打开。

# linux - fork: retry: 资源暂时不可用

> ID：12079087
> 
> 赞同：80
> 
> 时间：2012-08-22T18:19:12.330
> 
> 标签：linux, fork, mpi, intel

我尝试在我的计算机上安装 Intel MPI Benchmark，但出现此错误：

```
fork: retry: Resource temporarily unavailable 
```

然后，当我运行`ls`和`top`命令时，我再次收到此错误。

是什么导致了这个错误？

我的机器配置：

```
Dell precision T7500
Scientific Linux release 6.2 (Carbon) 
```

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-08-22T18:59:29.760

这通常是由文件描述符用完引起的。

有系统总文件描述符限制，你从命令中得到什么：

```
sysctl fs.file-nr 
```

这将返回文件描述符的计数：

```
<in_use> <unused_but_allocated> <maximum> 
```

要找出用户文件描述符限制是什么，请运行以下命令：

```
sudo su - <username>
ulimit -Hn 
```

要了解用户正在使用多少文件描述符，请运行以下命令：

```
sudo lsof -u <username> 2>/dev/null | wc -l 
```

因此，现在如果您遇到系统文件描述符限制问题，您将需要编辑 /etc/sysctl.conf 文件并添加或修改它已经存在的 fs.file-max 行并将其设置为大值足以处理您需要的文件描述符数量并重新启动。

```
fs.file-max = 204708 
```

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2012-12-21T00:20:09.467

另一种可能性是线程太多。我们刚刚在针对使用线程池的应用程序运行测试工具时遇到了此错误消息。我们用了

```
watch -n 5 -d "ps -eL <java_pid> | wc -l" 
```

查看在给定 Java 进程 ID 中运行的 Linux 本机线程的持续计数。在达到大约 1,000（对我们而言——YMMV）之后，我们开始收到您提到的错误消息。

# ios - 使用 -fno-objc-arc 仍然会给我转换为 ARC 错误

> ID：12079088
> 
> 赞同：0
> 
> 时间：2012-08-22T18:19:11.970
> 
> 标签：ios, xcode, automatic-ref-counting

我正在尝试更新我的项目以使用 ARC 并且我使用 JSONKit，所以我进入了“编译源”下的“构建阶段”选项卡并添加了参数“-fno-objc-arc”，但我仍然到处都出现错误. 我以为这是为了防止这种情况发生？

我在这方面缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T18:25:31.527

这就是你实现它的正确方式。您在哪些文件中包含该标志。

我正在使用 AFNetworking，我必须在 AFNetworking 让我包含的每个文件上都加上该标志。

![-fno-objc-arc 的截图](../Images/25e7b5c6f5d624b5fd2661a6a37495b4.png)

添加到每个文件允许弧处理器忽略这些文件。

你确定它都是小写的并且在错误的地方没有空格吗？

# android - Android jar 和源代码不匹配？

> ID：12079091
> 
> 赞同：0
> 
> 时间：2012-08-22T18:19:22.667
> 
> 标签：android, jar

我一直在查看 ICS 和 JB（API15 和 API16）的 android 源代码，并且发现（对我而言）代码和 jar 文件之间的不匹配。更具体地说，在 SpeechRecognizer.java 中有一个对 Settings.Secure.VOICE_RECOGNITION_SERVICE 的引用，它在 android/provider/Settings.java 的 Secure 子类下定义为

```
public static final String VOICE_RECOGNITION_SERVICE = "voice_recognition_service"; 
```

但是当我尝试从我自己的代码中引用 VOICE_RECOGNITION_SERVICE 时，它无法解决。在 Eclipse 中，当我查看 jar 文件时，没有看到 VOICE_RECOGNITION_SERVICE 定义。事实上，很多在java源码中定义为public的Settings.Secure中的字段在jar文件中是找不到的。我想知道为什么如果 jar 文件是使用源文件创建的，我无法访问 VOICE_RECOGNITION_SERVICE。如果一个字段在源中被声明为公共的，那么它不应该可以从 .jar 文件中访问吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:29:56.410

我也注意到了。似乎通常，某些方法/字段对于特定于应用程序的代码是不可见的。但是，有时可以通过使用 Java 反射来调用这些方法/字段。

# php - MVC 方法，这仍然是正确的方式吗？

> ID：12079092
> 
> 赞同：0
> 
> 时间：2012-08-22T18:19:24.340
> 
> 标签：php, codeigniter

大约一周前，我开始尝试使用 CodeIngiter，因为我想学习 OOP。我以为我走在正确的轨道上，但现在我开始怀疑了。原因是，我有一个成员控制器，它正在变成一个很大的文件。这是因为我希望我的网址像成员/登录、成员/注册等。

这是我的控制器：

```
<?php
class Members extends CI_Controller
{
    public function __construct()
    {
        parent::__construct();
        $this->load->model('users');
    }
    public function index()
    {
    }
    public function register()
    {
        $this->load->helper(array(
            'form',
            'recaptcha'
        ));
        $this->load->library('form_validation');
        $data['title']       = "Register a free account - Become an Author";
        $data['titlesucces'] = "Thanks for registering";
        $this->form_validation->set_rules('fname', 'First name', 'required');
        $this->form_validation->set_rules('lname', 'Last name', 'required');
        $this->form_validation->set_rules('password', 'Password', 'required');
        $this->form_validation->set_rules('passwordconf', 'Password Confirmation', 'required');
        $this->form_validation->set_rules('email', 'Emailaddress', 'required|is_unique[users.email]|valid_email');
        $this->form_validation->set_rules('recaptcha_challenge_field', 'Captcha', 'required|recaptcha_matches');
        if (!$this->form_validation->run()) {
            $this->load->view('header', $data);
            $this->load->view('register', $data);
        } else {
            $this->users->register_new_member();
            $this->load->view('register_succes', $data);
        }
    }
    public function login()
    {
        $data['title'] = "Login";
        $data['fail']  = "";
        $this->load->helper('form');
        $this->load->library('form_validation');
        $this->form_validation->set_rules('email', 'Emailaddres', 'required');
        $this->form_validation->set_rules('password', 'Password', 'required');
        if (!$this->form_validation->run()) {
            $this->load->view('login', $data);
        } else {
            if ($this->users->do_login($this->input->post('email'), $this->input->post('password'))) {
                $this->load->view('login', $data);
            } else {
                $data['fail'] = "Emailaddress or password is incorrect";
                $this->load->view('login', $data);
            }
        }
    }
    public function logout()
    {
        $this->session->sess_destroy();
        redirect('/members/login/', 'refresh');
    }
    public function addarticle()
    {
        if ($this->users->logged_in()) {
            $this->load->helper('form');
            $this->load->library('form_validation');
            $this->form_validation->set_rules('title', 'Title', 'required|max_length[200]|min_length[10]');
            $this->form_validation->set_rules('intro', 'Intro', 'required|min_length[40]|max_length[50]');
            $this->form_validation->set_rules('cat', 'Category', 'required');
            $this->form_validation->set_rules('body', 'Article', 'required|min_length[3000]|link_check');

            $this->load->model('categories');
            $data['title'] = "Add a new article";
            $data['cats']  = $this->categories->get_all_categories();
            if (!$this->form_validation->run()) {
                $this->load->view('addarticle', $data);
            } else {
                $this->load->model('articles');
                $this->articles->add_new_article();
                $this->load->view('welcome');
            }
        } else {
            redirect('/members/login/', 'refresh');
        }
    }

}
?> 
```

正如您所看到的，它已经是一个相当大的文件，但它只会变得更大。现在我对你们的问题是：这仍然是正确的 MVC 方式还是我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T19:13:23.680

我在 CodeIgniter 中创建了一些关键的高可用性系统，并发现它对于我的特定项目非常强大且非常灵活。它没有 ZF 等其他“企业”框架所带来的大包袱（并不是说 ZF 没有自己的优势）。

就像 zeusakm 说的，你的控制器没有那么大。然而，这一切也取决于`fat controller-lean model/lean controller-fat model`你站在辩论的哪一边（以及其他无数的变体/风格）。就个人而言，我更喜欢让我的控制器尽可能精简。如果我觉得我的控制器做的事情太多，有时变得臃肿，我将其中一些功能移到帮助器（而不是模型）中，主要是因为我喜欢让我的模型反映业务对象。此外，当其中一些任务可以耦合在一起形成一个结构更完善的实体时，有时我会将它们合并到库中（我自己的或第三方的）

我想主要的想法是 MVC 没有`silver-bullet`正确的方法——对一个项目有效的方法对另一个项目可能不是一个好主意。有很多因素需要权衡。一天结束，如果你的代码是`easily maintainable`，如果一个人可以`read and understand`轻松地布置它，如果有`different roles/responsiblites`类似程序员/前端 HTML 设计师/后端数据库编码器的人都可以一起工作轻松使用该框架，而无需（太多）互相踩踏，那么是的，我会说您的 MVC 正在完成它的工作。

还要记住，URLS 如何映射到 MVC 只是系统的一个方面。这可以通过多种不同的方式来处理，从映射到详细模型的模拟控制器，htaccess 重写，有时甚至 MVC 路由器可以帮助您配置您希望 URL 解析的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T18:28:12.263

你正在做完全正确的事情，而且这个文件还不够大，我怀疑它会是。我已经在**CodeIgniter**上进行了编程——伟大而轻量级的固件，并且有一个很酷的 MVC 模型/模式解决方法。所以就继续吧。

当您的文件/控制器没有达到**1000-1500**行代码时，另一件事不要用这个问题打扰您自己。

MVC 实际上并不是你的控制器包含的东西，而不是一堆东西**模型**（数据库查询、Herlper 函数）、**视图**（模板/GUI）和**控制器**（逻辑）——记住这一点，此时不要担心任何事情.

# c# - 如何在列表框 c#/.net 中禁用单击

> ID：12079094
> 
> 赞同：1
> 
> 时间：2012-08-22T18:19:26.963
> 
> 标签：c#, click, listbox-control

我在列表框中添加了许多项目，并且正在使用以下代码使用列表框的选定项目：

```
 listBox1.SelectedIndex = listBox1.SelectedIndex + 1; 
```

我还想禁用单击列表框。请告诉我如何在程序运行时禁用单击列表框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T18:22:56.110

只需将该[`Enabled`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.enabled%28v=vs.100%29.aspx)属性设置为 false 即可禁用用户交互。

但是，这听起来好像您正在（ab）使用 GUI 来实现应用程序逻辑。您不应该使用 a`List<something>`来存储和遍历您的项目并从 List<> 更新您的 ListBox 而不是取决于屏幕上的内容吗？

# objective-c - 在开发过程中无法生成 MASReipt

> ID：12079095
> 
> 赞同：4
> 
> 时间：2012-08-22T18:19:31.237
> 
> 标签：objective-c, xcode, mac-app-store

我正在开发一个具有应用内购买功能的 Mac 应用程序。我以前在 iOS 上做过这个，但我无法让它与 Mac 应用程序一起工作。在做了一些研究之后，看起来我必须先从 Mac App Store 获取并验证收据，然后才能使用。

我相信我已按照正确的步骤执行此操作，

1.) 在 Xcode 中构建应用程序。2.) 通过 finder 启动应用程序 3.) 当提示使用在 iTunesConnect 中创建的 TestUser 帐户登录时 4.) 应用程序关闭并显示错误消息

```
“AppName” is damaged and can’t be opened. Delete “AppName” and download it again from the App Store. 
```

当我打开捆绑包时，虽然我没有看到 _MASReceipt/receipt 文件夹和文件 - 我仍然从 StoreKit 获得无效的产品标识符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-13T15:55:09.067

上次发生这种情况时，这些步骤似乎对我有用：

1.  从 Mac App Store 注销。
2.  强制退出`storeagent`和`softwareupdated`进程。
3.  尝试双击该应用程序以重新启动它。

# java - eclipse设置问题

> ID：12079098
> 
> 赞同：1
> 
> 时间：2012-08-22T18:19:49.127
> 
> 标签：java, eclipse, ide, settings

```
1\. Can we make eclipse automatically refresh its buffer? 
```

当我们在 eclipse 背后对项目文件进行更改时，eclipse 不会自动更新它的缓冲区。相反，我们必须手动单击`Refresh`。当我们忘记这样做时，我们可能正在运行旧代码。

```
2\. Can we make eclipse to eliminate automatically the
   leading whitespaces in source code files? 
```

eclipse 中的自动缩进是在源代码文件中插入空格。每次我们将一行留空时，都会留下前导空格。考虑以下代码：

```
1 public void f() {
2   // init
3   a = b;
4
5   // do it
6   for (...) { ... }
7 } 
```

输入第 3 行后，我们点击`ENTER`. 此时，我们意识到我们想要将代码的不同逻辑部分分开，所以我们`ENTER`再次点击。这样做显然是合理的，但不幸的是，第 4 行留下了一些前导空格。源代码控制工具（例如，`git`）对此并不满意。那么我们可以将它们从 Eclipse 中移除吗？

```
3\. Can we save preference settings across workspaces? 
```

每次创建新工作区时，我都需要更改首选项设置。例如，我通常会使字体更大。这有点多余。那么我可以重复使用现有设置吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T18:26:56.810

**3\. 我们可以跨工作区保存偏好设置吗？**

您可以[导出旧的工作区首选项并导入新的工作区](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.platform.doc.user/tasks/timpandexp.htm)。另一种读物：[创建新的 Eclipse 工作区 - 使用所有旧设置](http://eclipse.dzone.com/news/create-new-eclipse-workspace-w)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T18:39:19.423

要回答您的第一个和第二个问题：
1\. 您可以打开自动工作区刷新，它会每 2 秒左右调用一次刷新，我懒得找到它，所以这里是一个带有 prefs 选项卡截图的[链接](http://www.foosel.org/blog/2009/06/cool_eclipse_stuff_autorefresh)，您可以在其中设置它。

2.您可以在首选项中设置自己的代码格式模板。然后将格式添加到保存操作。你可以很容易地谷歌如何做到这些。

Pangea 已经很好地回答了第三个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T18:35:21.610

通过 Eclipse 首选项菜单（编辑器/外观），有一个复选框可以删除尾随空格。

如果您想对您的设置进行（野蛮人）备份，您可以压缩您的工作区（在此之前必须关闭 Eclipse）。

如果您只想保存设置，您可以只压缩工作区文件夹中的 eclipse 文件/文件夹，而忽略源代码。

我知道第二种方法，因为我每周都使用它。

# android - ActionBarSherlock 背景不会在 ICS 之前的版本上重复

> ID：12079099
> 
> 赞同：5
> 
> 时间：2012-08-22T18:19:53.013
> 
> 标签：android, actionbarsherlock, background-repeat

我正在将我的应用程序的 ActionBar 移动到 ActionBarSherlock 并且我正在尝试使用平铺背景自定义背景。我正在两台真实设备上测试我的代码，一台运行 Android 2.1，另一台运行 Android 4.0.4。

下面的代码适用于 ICS 设备（背景确实重复），但不适用于 Eclair 设备（背景被拉伸而不是重复）。我还在 Android 2.3 模拟器上对此进行了测试，并且背景也不会重复。似乎`tileMode="repeat"`只在 ICS 上工作。

**主题.xml：**

```
<style name="Theme.Opheodrys.Base" parent="Theme.Sherlock.Light">
    <item name="android:actionBarStyle">@style/Opheodrys.Widget.ActionBar</item>
    <item name="actionBarStyle">@style/Opheodrys.Widget.ActionBar</item>
</style>

<style name="Opheodrys.Widget.ActionBar" parent="Widget.Sherlock.Light.ActionBar">
    <item name="android:background">@drawable/ab_background_pattern</item>
    <item name="background">@drawable/ab_background_pattern</item>
</style> 
```

**ab_background_pattern.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
    android:src="@drawable/ab_background_tile"
    android:tileMode="repeat"
    tileMode="repeat" /> <!-- I've added this just in case, but it doesn't seem to be needed --> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-22T18:39:05.497

这是[Android 错误 #15340](http://b.android.com/15340)，而不是 ActionBarSherlock 错误。

您可以使用类似于以下内容的方法解决此问题：

```
BitmapDrawable bg = (BitmapDrawable)getResources().getDrawable(R.drawable.bg_striped);
bg.setTileModeXY(TileMode.REPEAT, TileMode.REPEAT);
getSupportActionBar().setBackgroundDrawable(bg); 
```

# html - 如何使用 CSS 将背景图像的大小重新调整为窗口的全宽

> ID：12079100
> 
> 赞同：1
> 
> 时间：2012-08-22T18:19:54.793
> 
> 标签：html, css

我正在处理一个网页，在其中我使用了一个背景图像，我想将它拉伸到窗口的整个宽度，因为我上面有文字，无论如何我都希望它处于固定位置屏幕分辨率是。我正在寻找一个 CSS 实现，但如果 Javascript 是我最好的选择，我会愿意使用它。

这是我的页面的样子：[http ://dl.dropbox.com/u/9134840/demo/windowsxp.html](http://dl.dropbox.com/u/9134840/demo/windowsxp.html)

除非您使用的是 1080p 显示器，否则背景图像不会完全从边缘延伸到边缘，并且会留下一点空白。任何帮助，将不胜感激。

```
html {
}

body {
}

#img {
    width: 100%;
    position: absolute;
    top: 0;
    left: 0;
}

.title {
    position:absolute;
    top:180px; 
    left:350px;
    width:700px; 
    color:Purple;
    font-style:oblique;
    font-family:cursive;  
    text-shadow: 1px 1px;
}

#pre {
    position:absolute;
    top:280px; /* in conjunction with left property, decides the text position */
    left:150px;
    width:700px;
    font-size:large;
    font-family:cursive;
}

#header {
    position:absolute;
    top:530px; 
    left:450px;
    width:700px;
    font-size:x-large;
    font-family:cursive;
}

#sub {
    position:absolute;
    top:580px; 
    left:160px;
    width:1090px;
    font-size:x-large;
    font-family:cursive;
} 
```

HTML

```
<div id="background">
<img src="back2.png" id="img" class="stretch" alt="" /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T18:20:51.853

使用`background-size`CSS 的属性

文档：[https ://developer.mozilla.org/en-US/docs/CSS/background-size](https://developer.mozilla.org/en-US/docs/CSS/background-size)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T18:23:15.037

您可以将宽度扩展到 100% 以上。尝试的一种选择。否则我同意 techfoobar，使用背景 css 属性，特别是背景大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T18:33:39.643

将图像及其容器的边距设置为 0，宽度设置为 100%。`<div>`不需要使用 a 。例如：

```
body
{
    top:0;
    left:0;
    right:0;
    width:100%;
}

#background
{
    top:0;
    left:0;
    right:0;
    width:100%;
}

#img
{
    top:0;
    left:0;
    right:0;
    width:100%;
    position: absolute;
} 
```

# asp.net - 迭代策略设计模式

> ID：12079104
> 
> 赞同：0
> 
> 时间：2012-08-22T18:20:19.893
> 
> 标签：asp.net, ruby, algorithm, design-patterns, strategy-pattern

我有一个要在数据集上运行的算法列表。例如，假设我的数据集是地址列表。我需要检查地址的有效性，但我有几种不同的验证算法。说我有`validation_one`和`validation_two`。但是将来我需要添加`validation_three`,`validation_four`等。我需要在地址列表上运行所有验证，即使是添加新的验证。

是否有适合此的设计模式？我知道策略是用于*选择* 算法，但我特别需要一种将所有算法应用于数据集的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T18:36:24.557

你没有说一种语言..但假设它有泛型。

给定一个`DataSet<T>`

还假设不需要交叉验证（即每个 T 都可以完全通过自己的数据进行验证）

使用单一方法声明验证策略。

```
IValidate<T>{bool validate(T item);} 
```

验证一，验证二…。将实施这一战略

有一个`List<IValidate<T>>`你可以添加和删除实现的地方。

数据集中的每个项目调用列表中的每个策略。

然后，您可以选择如何处理失败。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-23T07:33:59.670

[合成的。](http://en.wikipedia.org/wiki/Composite_pattern)

这基本上是其他两个答案所等同的。

第一个答案是复合的实现。第二个是使用责任链作为组合。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-22T18:37:32.267

这听起来像是责任链，链中的所有处理程序都接受请求并将其传递给下一个处理程序。

# c# - 在 IIS 中托管时合并 WCF 服务库配置文件

> ID：12079105
> 
> 赞同：0
> 
> 时间：2012-08-22T18:20:26.523
> 
> 标签：c#, asp.net, wcf, iis, .net-4.0

我有许多 WCF 服务库，每个都有自己的 App.config。我使用 serviceActivations / fileless 在 ASP.Net 项目中托管这些库。这个 ASP.Net 项目还有一个可部署的 web.config。

开发人员一直在更新 App.config 但未更新导致部署问题的 web.config。为了阻止这种情况发生，我想我会删除 App.Config 并将它们集中到一个文件中。如果我在 Windows 服务中托管服务，我可以将它们全部指向同一个 App.Config，但 asp.net 使用 Web.config。

有没有办法解决这个问题？如果我可以告诉服务库使用 web.config，那就太好了，但是如果 App.Config 文件不存在，一些向导（例如服务引用向导）将创建一个 App.Config 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T05:03:14.753

似乎您正在寻找一种技术解决方案（即某种方式来自动更新/使用 Web.Config 文件与 App.Config 文件），但我认为您可能会通过流程/培训获得更多的基础。

您提到开发人员正在更新 App.config 文件，而不是 Web.config - 如果是这种情况，他们如何对他们的更改进行单元测试？由于库（如果您正在谈论 DLL）将永远不会使用它们自己的 App.config（或任何配置文件，就此而言），开发人员必须更新使用应用程序的配置文件。

为什么不与开发人员坐下来制定一个流程（与他们一起工作而不是从上面传递一个流程会让您走得更远），其中包括更新 Web.config 作为他们单元测试的一部分？它应该是配置文件相关部分的相当直接的复制和粘贴。

很可能有一种技术方法可以做你想做的事情（如果我正确理解你的问题），但我确实认为一个过程而不是技术解决方案值得尝试。

# html - 让 HTML 识别 \n 和 \t

> ID：12079106
> 
> 赞同：2
> 
> 时间：2012-08-22T18:20:42.167
> 
> 标签：html, string, asp.net-mvc-3

我使用 ASP.NET MVC3 创建了一个 Web 应用程序，并希望在视图中显示一个字符串（我在构造函数中构造）。该字符串中有 \n 和 \t 字符，我希望该格式保留在视图中。

到目前为止，视图显示的字符串没有任何格式，就好像 \n 和 \t 字符从未出现过一样。我通过将字符串发送到 System.Diagnostics.Debug.Write 来检查我的字符串，并且在输出中，字符串按需要显示。

在视图中，我正在编写字符串

```
<p>@ViewBag.listItems</p> 
```

（其中 listItems 是提到的字符串）。那么，有谁知道如何强制视图以所需的格式显示字符串？字符串看起来像这样：

```
"Title 1 + \n\t + subtitle1 + \n\t + subtitle2 + \n\t + \n + Title2 + \n\t + subtitle1" 
```

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T18:23:38.083

尝试使用“pre”而不是“p”标签。此元素中的任何文本都将保留换行符等格式。

```
<pre>@ViewBag.listItems</pre> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T18:24:07.013

将东西放入预先格式化的块中很酷。

```
<pre>@ViewBag.listItems</pre> 
```

# c# - 如何在 Listbox 中实现 windows phone 7 自动完成框搜索

> ID：12079107
> 
> 赞同：1
> 
> 时间：2012-08-22T18:20:50.033
> 
> 标签：c#, windows-phone-7

如何在 Listbox 中实现 windows phone 7 自动完成框搜索。

我有绑定 mydata 的列表框，我必须使用自动完成框在列表框中搜索。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:47:26.167

你想要什么行为？

由于您使用的是 ListBox，您是希望过滤值，还是希望选择点移动以匹配您输入的任何内容？

[请注意，您是否从http://Silverlight.codeplex.com](http://Silverlight.codeplex.com)查看了 AutoComplete 控件？不是列表框实现，但它可能符合您的目的。

# python - Python 调试：步入内置函数和/或标准库类

> ID：12079109
> 
> 赞同：1
> 
> 时间：2012-08-22T18:20:58.267
> 
> 标签：python, list-comprehension, slice

我希望能够进入 Python 内置和/或标准库类，并通过所有路径跟踪我的代码的执行。

我认为 Python 可能是在幕后用 C（？）实现的，所以可能没有像 Java 那样做的事情，您可以在其中将源代码添加到 Eclipse 并确切地查看当您执行`Arrays.copyOf(...)`. 诚然，您也看不到`int[] a; a[0] = 42;`在 Java 中执行操作时会发生什么，没有可见的代码可以进入，因此边界也在那里设置。

我的想法是，出于教育目的，可能有一个“在 Python 中”（？）的 Python 实现，我可以使用它来查看 sorted() 和 .sort() 等函数的作用以及它们的工作方式。

请考虑一下，我是一个完全的初学者，我可能正在从 Java 或其他环境中“移植”概念，这些概念背后的理念不兼容。这只是因为“Python 的思维方式”对我来说很新颖。

我注意到我可以跟踪一些我`.py`在安装目录中找到源代码的包，这非常有帮助，但它只会持续到某个点。

注意：我意识到即使在 Java 中，当我遇到 JNI 调用时也会达到限制，例如，使超出该范围的任何内容完全不透明，在其他情况下也是如此。我没有考虑使用符号来检测 JVM 和/或将 GDB 实例附加到 Python“运行时”（有这样的事情吗？），但最好能深入了解该语言及其基类的内部工作原理。

抱歉，如果这篇文章比其他文章更罗嗦，我想我可能在我的初稿中根本没有很好地解释自己，所以我认为我会在“清晰”而不是空间方面犯错。感谢您的耐心和您的解释。

注意（2）：我没有使用 Python*分析*的经验，我什至不知道从哪里开始。

# jquery - 使用 Struts 1.3 上传多个文件

> ID：12079112
> 
> 赞同：1
> 
> 时间：2012-08-22T18:21:02.123
> 
> 标签：jquery, jquery-plugins, file-upload, struts, struts-1

我正在寻找使用插件上传多个文件的具体示例（通过使用 ctrl+click 在单个窗口中选择多个文件）。现在我将上传页面作为一个对话框并使用我正在使用的 form.ajaxsubmit ：

```
 $(document).ready(function() {
        $('#dialog').dialog({
          autoOpen: false,
          modal: true,
          draggable: false,
          resizable: false
        });
$('#upload-document-dialog').dialog({
      autoOpen: false,
      width: 600,
      modal: true,
      draggable: false,
      resizable: false,
      buttons: {
        "cancel": function() {
          $(this).dialog("close");
          $("#FileUploadDocumentForm")[0].reset();
          $('#UploadDocumentAlertTR').hide();
          $('#ajaxUploaderForDocument').hide();
        },
        "upload": function() {
          var fileName = $("#fileInput").val();
          if (fileName == null || $('#fileInput').val().length == 0) {
          $('#UploadDocumentAlertTD').text('Please specify a document to upload');                
            return false;
          }

          //setting some values here for the action class
          disableDialogButtons();
          $('#FileUploadDocumentForm').ajaxSubmit(FileUploadDocumentFormOptions);
          return false;
        }           
      }
    }).parent().find('.ui-dialog-titlebar-close').hide();
  });

</script>
<div id="upload-document-dialog" title="Upload Document">
<form id="FileUploadForm" name="FileUploadForm" method="post"  scope="request"
        action="<html:rewrite module='/common' action='/FileUpload'/>"
        enctype="multipart/form-data">
   <tr>
        <td colspan="2">
          Document:&nbsp;&nbsp;<input id="fileInput_1" type="file" name="file[]" size="60"
                                      title="Browse for a Document to Upload."/>
        </td>

    </tr>
 </form>
</div> 
```

如上所述，我使用 Ajax submit 提交表单，并在 action 类中使用 Form File 进行服务器端验证并返回结果。这对于单个文件上传工作正常。但是我如何让它适用于多个文件上传。我没有太多运气让这个东西适用于多次上传。请建议我如何做到这一点？

谢谢

# function - 不能将数组作为参数传递给 vbscript 中的子对象；错误消息 = “数据无效”

> ID：12079114
> 
> 赞同：0
> 
> 时间：2012-08-22T18:21:06.067
> 
> 标签：function, vbscript, argument-passing

在 vbscript 中，我正在尝试（到目前为止没有成功）将数组作为参数传递给子：

```
subUnPackAArray(arrLineFieldValues) 
```

我从 Vbscript 收到以下错误消息：

```
Error:  Type mismatch: 'subUnPackAArray'
Code:   800A000D
Source: Microsoft VBScript runtime error
System: The data is invalid. 
```

我将不胜感激有关在哪里寻找解决方案的任何解决方案或建议。我是 vbscript 爱好者，不是专业人士，所以请在批评时保持温和。

该数组包含以下文本：

```
Line  0
Line  1
Line  2
Line  3
Line  4
Line  5
Line  6
Line  7
Line  8
Line  9
Line  
Line  
Line  
.... etc.... 
```

从中获取文本的文件的名称是：

```
strFile2HarvestFromFullName = "C:\Apps\E_drive\Parameters for vbscript or python_script to harvest .txt" 
```

我想确认子“subUnPackAArray”中没有错误（我试图将“arrLineFieldValues”作为参数传递给它）。
因此，为了确认这一点，我在行上方插入了 -- subUnPackAArray(arrLineFieldValues)
...几乎所有代码都在子“subUnPackAArray”中。
代码执行得很好，只有当 vbscript 到达该行时我才会收到错误消息：

```
subUnPackAArray(arrLineFieldValues) 
```

我不知道出了什么问题。

这是我的 vbsript 程序的全部文本：' 从文本文件中读取参数

```
strFile2HarvestFromFullName = "C:\Apps\E_drive\Parameters for vbscript or python_script to harvest .txt"

fn_Read_text_file_lines_into_1_dimL_array(strFile2HarvestFromFullName)

'*'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
'* BEGIN_Function'*' BEGIN_Function '*' BEGIN_Function '*' BEGIN_Function '*' BEGIN_Function '*' BEGIN_Function '*' BEGIN_Function '*' BEGIN_Function 
'*'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''

Function fn_Read_text_file_lines_into_1_dimL_array(fname)

    Dim strFile2HarvestFromFullName
    Dim objFSO
    Dim objTextFile
    Dim arrLineFieldValues()
    Dim strText
    Dim subUnPackAArray

    strFile2HarvestFromFullName = fname

    Const ForReading = 1

    Set objFSO = CreateObject("Scripting.FileSystemObject")
    Set objTextFile = objFSO.OpenTextFile(strFile2HarvestFromFullName, ForReading)
    i = 0

    Do Until objTextFile.AtEndOfStream 

        ReDim Preserve arrLineFieldValues(i)
        strText = objTextFile.ReadLine
        'MsgBox strText
        arrLineFieldValues(i) = strText
        i = i + 1

    Loop

    intUbound = UBound(arrLineFieldValues)
    strMsgBoxMsg = ""   

    For i = 0 To intUbound

        strMsgBoxMsg = strMsgBoxMsg & _
            "arrLineFieldValues(" & i & ") = " & arrLineFieldValues(i) & vbCrLf 

    Next ' For i = 0 To intUbound

    MsgBox "Line 45:  " & vbCrLf & strMsgBoxMsg

    subUnPackAArray(arrLineFieldValues)

End Function ' fn_Read_text_file_lines_into_1_dimL_array(fname)

'*''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
'* END_Function '*'END_Function '*'END_Function '*'END_Function '*'END_Function '*'END_Function '*'END_Function '*'END_Function '*'END_Function '*'END_Function 
'*''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''

'*''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
'* BEGIN_Sub'*' BEGIN_Sub '*' BEGIN_Sub '*' BEGIN_Sub '*' BEGIN_Sub '*' BEGIN_Sub '*' BEGIN_Sub '*' BEGIN_Sub '*' BEGIN_Sub '*' BEGIN_Sub '*' 
'*''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''

sub subUnPackAArray(strArray_OneDimensionOnly)
    '
    Dim strArray

    'strArray = strArray_OneDimensionOnlye
    intUbound = UBound(strArray_OneDimensionOnly)
    strMsgBoxMsg = ""   

    For i = 0 To intUbound

        strMsgBoxMsg = strMsgBoxMsg & _
            "strArray(" & i & ") = " & strArray_OneDimensionOnly(i) & vbCrLf 

    Next ' For i = 0 To intUbound

    MsgBox "Line 25:  " & vbCrLf & strMsgBoxMsg

End Sub ' subUnPackAArray()

'*''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
'* END_Sub '*'END_Sub '*'END_Sub '*'END_Sub '*'END_Sub '*'END_Sub '*'END_Sub '*'END_Sub '*'END_Sub '*'END_Sub '*'END_Sub '*'END_Sub '*'END_Sub 
'*'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T19:47:52.033

Subs 不会被带括号调用。

改变这个：

```
MsgBox "Line 45:  " & vbCrLf & strMsgBoxMsg

subUnPackAArray(arrLineFieldValues) 
```

对此：

```
MsgBox "Line 45:  " & vbCrLf & strMsgBoxMsg

subUnPackAArray arrLineFieldValues 
```

该错误表明解析器期望遇到一个函数，而不是子例程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T19:55:58.070

`Dim subUnPackAArray`从中删除该行`fn_Read_text_file_lines_into_1_dimL_array`。局部变量覆盖全局变量。您正在尝试从本地范围调用全局对象，但您已经在本地定义了。它失败。

# python - 使用 pyes 的弹性搜索性能

> ID：12079117
> 
> 赞同：0
> 
> 时间：2012-08-22T18:21:19.880
> 
> 标签：python, elasticsearch, pyes

很抱歉交叉发布。以下问题也发布在 Elastic Search 的 google 组中。

简而言之，我试图找出为什么在对包含约 150 万条记录的 ES 索引进行搜索时无法获得最佳性能。

目前，我能够在 2 秒内获得大约 500-1000 次搜索。我认为这应该快几个数量级。目前我也没有使用节俭。

这是我检查性能的方式。

使用 0.19.1 版本的 pyes（从 gi​​thub 尝试了稳定版和开发版） 使用 0.13.8 版本的请求

```
conn = ES(['localhost:9201'],timeout=20,bulk_size=1000)
loop_start = time.clock()
q1 = TermQuery("tax_name","cellvibrio")
for x in xrange(1000000):
    if x % 1000 == 0 and x > 0:
        loop_check_point = time.clock()
        print 'took %s secs to search %d records' % (loop_check_point-loop_start,x)

    results = conn.search(query=q1)
    if results:
        for r in results:
            pass
#            print len(results)
    else:
        pass 
```

感谢您提供的任何帮助，以帮助我扩大搜索范围。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T16:27:43.950

不就是并发的问题吗？

您正在按顺序执行所有查询。所以一个查询必须在下一个可以进入之前完成。如果你有一个 1 毫秒的 RTT 到服务器，这将限制你每秒 1000 个请求。

尝试并行运行脚本的几个实例，看看你得到了什么样的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-04T23:41:16.037

使用 pyes 有很多方法可以改善这一点。

*   首先，尝试摆脱 DottedDict 类/对象，该类/对象用于为您获得的每个结果从每个 json/dict 生成一个对象。
*   其次将json编码器切换到ujson。

这两件事带来了很多性能。这样做的缺点是您必须使用访问字典的方式而不是点版本（“result.facets.attribute.term”而不是您必须使用类似“result.facets['attribute']['term'] " 或 "result.facets.get('attribute', {}).get('term', None)" )

我通过扩展 ES 类并替换“_send_request”函数来做到这一点。

# ruby-on-rails - Faye中如何实现业务逻辑？导轨

> ID：12079118
> 
> 赞同：0
> 
> 时间：2012-08-22T18:21:21.423
> 
> 标签：ruby-on-rails, ruby, rack, faye

我在瘦服务器上有机架 Faye 应用程序，我在每个 faye 客户端握手/订阅/断开连接上都有一些逻辑。

这个逻辑需要在数据库中存储数据，进行一些计算并将消息发布回一些通道。

应该在哪里以及如何实现这些东西以避免阻塞主 Faye 线程与扩展？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T23:51:15.577

Faye的作者在这里。取决于您正在与之交谈的数据库，但通常您应该使用非阻塞（即基于 EventMachine 的 TCP 堆栈）数据库客户端。这意味着扩展将快速返回（假设您没有等待 DB 调用的结果来影响传入/传出消息），因此 Faye 可以在 DB 调用正在进行时继续处理消息。

# cocos2d-iphone - Cocos2d facebook - 如何从 cocos2d 更新 Satus

> ID：12079119
> 
> 赞同：0
> 
> 时间：2012-08-22T18:21:22.670
> 
> 标签：cocos2d-iphone, facebook-ios-sdk

我正在尝试从我下载 sdk 的 cocos2d 代码更新状态，但我不知道从哪里开始？请让我知道如何从 cocos2d 更新状态以及我必须使用哪个库？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:40:32.697

[您可以从developer.facebook.com](https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/authenticate/)网站下载 Hackbook 演示，从简单的 Facebook 演示开始。而且你可以通过 Cocos2d 和 FaceBook 的集成来完成你需要的东西。

# java - 不同机器中的字符编码

> ID：12079121
> 
> 赞同：0
> 
> 时间：2012-08-22T18:21:39.230
> 
> 标签：java

如果两台不同的机器有不同的字符编码。如何从java程序中获取两台机器上的相同文件应该以相似的方式读取。是否可以使用java或者我们必须手动设置两台机器的编码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T18:28:01.657

听起来你只想使用类似的东西：

```
InputStream inputStream = new FileInputStream(...);
Reader reader = new InputStreamReader(reader, "UTF-8"); // Or whatever encoding 
```

基本上你不必使用平台默认编码，你几乎不应该这样做。`FileReader` *总是*使用平台默认编码很痛苦:(我更喜欢明确指定编码，即使我明确指定我想使用平台默认编码:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T18:30:07.603

您无需更改机器的设置。

您可以使用任何允许您设置字符编码的 java.io.Reader 子类。比如 InputStreamReader，像这样：

```
new InputStreamReader(new FileInputStream("file.txt"), "UTF8"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T18:33:13.203

**您可以控制在两个环境中读取/写入文件。**

[在 Java 中处理文本文件](http://www.javapractices.com/topic/TopicAction.do?Id=42)

**您只能在读取端进行控制。**

1.  *您知道用于写入文件的编码：*确定用于写入文件的编码并使用相同的编码来读取它。
2.  *您不知道用于写入文件*的编码：您能做的最好的就是猜测编码：[字符编码检测算法](https://stackoverflow.com/questions/774075/character-encoding-detection-algorithm?rq=1)

**更新**

如果您的问题是您没有在 Eclipse 控制台中正确看到输出，那么问题可能出在 Eclipse 本身的编码设置上。阅读[这篇](http://balusc.blogspot.com/2009/05/unicode-how-to-get-characters-right.html)关于如何修复 Eclipse 的文章。

# php - Doctrine - SQLSTATE [42S22]：未找到列：1054 未知列

> ID：12079122
> 
> 赞同：2
> 
> 时间：2012-08-22T18:21:46.520
> 
> 标签：php, mysql, doctrine-orm

我收到此错误：SQLSTATE[42S22]: Column not found: 1054 Unknown column 'a1_.brand_id' in 'field list'

调用此方法时出现此错误：

```
public function getBrandsWithArticles() {        

    $query = $this->_em->createQuery('SELECT b, a FROM Entities\Brand b JOIN b.articles a');

    return $query->getResult();

} 
```

这是我的文章实体：

```
<?php

namespace Entities;

use Doctrine\Common\Collections\ArrayCollection;

/**
 * @Entity (repositoryClass="Repositories\Article")
 * @Table(name="articles") 
 * @HasLifecycleCallbacks
 */
class Article {

    /**
     * @Id @Column(type="integer")
     * @GeneratedValue(strategy="AUTO")
     */
    private $id;

    /** @Column(type="string", length=255) */
    private $name;

    /** @Column(type="string", length=255) */
    private $thumb;

    /** @Column(type="string", length=255) */
    private $big;

    /** @Column(type="text",nullable=true) */
    private $description;

    /** @Column(type="datetime") */
    private $created;

    /** @Column(type="datetime") */
    private $updated;

    /**
     * @ManyToOne(targetEntity="Category", inversedBy="articles", cascade={"persist"})
     * @JoinColumn(name="category_id", referencedColumnName="id")
     */
    private $category;
    /**
     * @ManyToOne(targetEntity="Brand", inversedBy="articles", cascade={"persist"})
     * @JoinColumn(name="brand_id", referencedColumnName="id")
     */
    private $brand;

    /**     
     * @OneToMany(targetEntity="ArticlesQuoteItems", mappedBy="articles")
     */
    private $items;

    /** @Column(type="string", length=1) */
    private $status;

    /** @Column(type="text",nullable=true) */
    private $tips;

    /** @Column(type="text",nullable=true) */
    private $features;

    /** @Column(type="text",nullable=true) */
    private $media;

    public function __construct() {
        $this->created = $this->updated = new \DateTime("now");        
        $this->details = new ArrayCollection();
    }

    /**
     * @PreUpdate
     */
    public function updated()
    {
        $this->updated = new \DateTime("now");
    }

    public function created()
    {
      $this->created = new \DateTime("now");
    }  

    public function setUpdated()
    {
        $this->updated = new \DateTime("now");
    }    
    public function setCreated()
    {
        $this->created = new \DateTime("now");
    }
?> 
```

这是文章表的 MySQL 转储：

```
CREATE TABLE IF NOT EXISTS `articles` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`category_id` int(11) DEFAULT NULL,
`name` varchar(255) COLLATE utf8_spanish2_ci NOT NULL,
`description` longtext COLLATE utf8_spanish2_ci,
`features` longtext COLLATE utf8_spanish2_ci,
`big` varchar(255) COLLATE utf8_spanish2_ci NOT NULL,
`thumb` varchar(255) COLLATE utf8_spanish2_ci NOT NULL,
`tips` longtext COLLATE utf8_spanish2_ci,
`media` longtext COLLATE utf8_spanish2_ci,
`created` datetime NOT NULL,
`updated` datetime NOT NULL,
`status` varchar(1) COLLATE utf8_spanish2_ci NOT NULL,
`brand_id` int(11) DEFAULT NULL,
PRIMARY KEY (`id`),
KEY `IDX_BFDD316812469DE2` (`category_id`),
KEY `IDX_BFDD316844F5D008` (`brand_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_spanish2_ci AUTO_INCREMENT=24 ; 
```

我不知道怎么了。

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T21:14:14.667

我`Article`只是为了它在 symfony 环境中添加了你的类，提供以下最小`Brand`实现：

```
use Doctrine\ORM\Mapping as ORM;

class Brand {

    /**
     * @ORM\Id @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;    

    /**
     * @ORM\OneToMany(targetEntity="Article", mappedBy="brand")
     */
    private $articles;  

} 
```

然后我在数据库中添加了几个条目，并在 repo 方法中使用您的 DQL 查询获取它们：一切正常，所以请发布您的`Brand`代码以找出是否存在任何问题。

# magento - 父级::__construct(); 函数导致问题，因为 setData() 表示没有对象，对于一个简单的块

> ID：12079127
> 
> 赞同：6
> 
> 时间：2012-08-22T18:22:00.637
> 
> 标签：magento

这一切都来自`parent::__construct();`

> 致命错误：在第 129 行的 /home/desbest/public_html/clients/magentofull/app/code/core/Mage/Adminhtml/Block/Widget/Form/Container.php 中的非对象上调用成员函数 setData()

```
<?php 
class Desbest_Brands_Block_Adminhtml_Brand_Edit extends Mage_Adminhtml_Block_Widget_Form_Container
{
    public function __construct()
    {
        parent::__construct();

        $this->_objectId = 'id';
        $this->_blockGroup = 'brands';
        $this->_controller = 'adminhtml_example';
        $this->_mode = 'edit';

        $this->_addButton('save_and_continue', array(
                  'label' => Mage::helper('adminhtml')->__('Save And Continue Edit'),
                  'onclick' => 'saveAndContinueEdit()',
                  'class' => 'save',
        ), -100);
        $this->_updateButton('save', 'label', Mage::helper('brands')->__('Save Example'));

        $this->_formScripts[] = "
            function toggleEditor() {
                if (tinyMCE.getInstanceById('form_content') == null) {
                    tinyMCE.execCommand('mceAddControl', false, 'edit_form');
                } else {
                    tinyMCE.execCommand('mceRemoveControl', false, 'edit_form');
                }
            }

            function saveAndContinueEdit(){
                editForm.submit($('edit_form').action+'back/edit/');
            }
        ";
    }

    public function getHeaderText()
    {
        if (Mage::registry('example_data') && Mage::registry('example_data')->getId())
        {
            return Mage::helper('brands')->__('Edit Example "%s"', $this->htmlEscape(Mage::registry('example_data')->getName()));
        } else {
            return Mage::helper('brands')->__('New Example');
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-22T18:52:25.113

假设您正在处理一个纯粹的 Magento 版本，请查看第 129 行

```
127:    public function getFormHtml()
128:    {
129:        $this->getChild('form')->setData('action', $this->getSaveUrl());
130:        return $this->getChildHtml('form');
131:    } 
```

您可以看到尝试获取名为 form 的子块的尝试未能返回对象。很可能，这是因为在准备布局方法中，Magento 未能实例化表单

```
protected function _prepareLayout()
{
    if ($this->_blockGroup && $this->_controller && $this->_mode) {
        $this->setChild('form', $this->getLayout()->createBlock($this->_blockGroup . '/' . $this->_controller . '_' . $this->_mode . '_form'));
    }
    return parent::_prepareLayout();
} 
```

要么是因为您的班级没有设置以下变量之一

```
$this->_blockGroup
$this->_controller
$this->_mode 
```

或字符串生成的类别名

```
$this->_blockGroup . '/' . $this->_controller . '_' . $this->_mode . '_form' 
```

不是有效的块类。在不知道您要做什么的情况下，我建议

```
public function __construct()
{
    $this->_objectId = 'id';
    $this->_blockGroup = 'brands';
    $this->_controller = 'adminhtml_example';
    $this->_mode = 'edit';    
    parent::__construct(); 
```

并确保您有别名的块类

```
brands/adminhtml_example_edit_form
//from
//$this->_blockGroup . '/' . $this->_controller . '_' . $this->_mode . '_form' 
```

这很可能是一个名为

```
class Desbest_Brands_Block_Adminhtml_Example_Edit_Form extends Mage_Adminhtml_Block_Widget_Form
{
    //...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-27T10:08:06.680

您也有可能`Desbest_Brands_Block_Adminhtml_Brand_Edit.php`不在相应的文件夹`Desbest/Brands/Block/Adminhtml/Brand/Edit`中。

# android - 如何将 Air Native 扩展添加到 Stage

> ID：12079130
> 
> 赞同：0
> 
> 时间：2012-08-22T18:22:03.600
> 
> 标签：android, actionscript-3, apache-flex, air, air-native-extension

我需要在我的 Flex Mobile 应用程序中使用 Android SDK 显示一个用 Java 编写的活动。我已经看到它使用 Map ANE 完成，但找不到任何示例代码或任何类似的东西。我已经创建了我的 ANE 工作所需的 Java 和 ActionScript 代码（活动已创建，并且存在真正桥接 Java 和 AS3 所需的所有类、事件和方法），我只是不知道如何添加它到舞台上。我知道它不能添加到 DisplayList 中，我可以将它作为舞台对象。

如果它有帮助，我正在尝试使用 MediaPlayer 显示视频（由于使用 AS3/Flex 完成时的 MP4 流问题）。

**对于迈克尔（2012 年 8 月 27 日上午 9:44 MST）：**

```
08-27 09:27:07.836: I/CS VideoInit(2567): context is set
08-27 09:27:07.836: I/CS VideoInit(2567): intent is instantiated 
08-27 09:27:07.836: I/ActivityManager(349): START {cmp=air.AndroidANETesting2/xi.video.android.extension.VideoActivity u=0} from pid 2567 
```

我的活动的第一行是

```
Log.i("CS VideoActivity","Made it inside the activity somehow"); 
```

这是我的Java。这是初始化函数：

```
VideoInit.context = context;
Log.i("CS VideoInit","context is set");
Intent intent = new Intent( context.getActivity(), VideoActivity.class );
Log.i("CS VideoInit","intent is instantiated");
context.getActivity().startActivity( intent );
Log.i("CS VideoInit","Activity is started");
context.dispatchStatusEventAsync("PLAY", "PLAY"); 
```

这是我的 VideoActivity onCreate()：

```
super.onCreate(savedInstanceState);
Log.i("CS VideoActivity","Made it inside the activity somehow"); 
```

还有我的清单（只是应用程序部分）：

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".VideoActivity"
        android:label="@string/title_activity_video" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

**更新（2012 年 8 月 27 日 @ 上午 10:52 MST）** 经过进一步调查（或反复试验，无论你想怎么称呼它），我决定将 startActivity() 行放入 try{}catch(Throwable e) 以查看它抛出了什么错误（如果有的话）。有趣的是，它抛出了这个。

```
08-27 10:49:41.406: I/CS VideoInit(7786): Unable to find explicit activity class {air.AndroidANETesting2.debug/xi.video.android.extension.VideoActivity}; have you declared this activity in your AndroidManifest.xml? 
```

看来我需要重新检查我的 Android Manifest 文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T00:41:38.323

这实际上很容易。

您需要在实现 android.app.Activity 的 ANE 中创建一个类，然后从 FREFunction 中，只需使用来自 FREContext 的基本 Activity 实例的 startActivity 函数。

所以在一个函数中，让我们用一个 Intent 开始一个活动：

```
public class ExampleFunction implements FREFunction 
{
    @Override
    public FREObject call( FREContext context, FREObject[] passedArgs ) 
    {
        Intent intent = new Intent( context.getActivity(), ExampleActivity.class );
        context.getActivity().startActivity( intent );
    }
} 
```

然后在实际的Activity实现中：

```
public class ExampleActivity extends Activity 
{
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        // Do your stuff here, like create views, buttons etc
    }
} 
```

此活动将显示在您的应用程序之上。如果您愿意，可以使用对 FREContext 的静态引用将事件/数据传回您的应用程序。

您还需要在清单应用程序标记内的 -app.xml 中添加活动：

```
<application> <activity android:name="package.ExampleActivity"></activity></application> 
```

# javascript - 根据浏览器大小加载文件

> ID：12079135
> 
> 赞同：0
> 
> 时间：2012-08-22T18:22:41.437
> 
> 标签：javascript, jquery

只是一个关于正确语法的问题。只有当浏览器屏幕小于 1100 像素时，我才想加载 jquery 文件。

```
<script type="text/javascript">
$(document).ready(function() {
  if ($(window).width() < 1100) {

    //load file

     }
  });
</script> 
```

我想加载 src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js 但找不到语法。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T18:36:49.147

我假设您在尝试获取窗口宽度时没有 jQuery，所以像这样：

```
<script>
    var width = window.innerWidth || document.documentElement.clientWidth;
    if ( width < 1100 ) {
        var s = document.createElement('script'),
            p = document.getElementsByTagName('script')[0];
        s.async = true;
        s.src = 'http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js';
        p.parentNode.insertBefore(s, p);
    }
</script> 
```

如果你有 jQuery，它的语法会更简单一些：

```
<script>
if ( $(window).width() < 1100 ) {
    $('<scr'+'ipt>').attr({
        src: 'http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js',
        async: true
    }).insertBefore($('script:first'));
}
</script> 
```

我认为您不会通过加载另一个较低版本来“卸载”一个 jQuery 版本，但这是您的决定：)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T18:25:38.910

```
$(document).ready(function() {
    if ($(window).width() < 1100) {
       var newscript = document.createElement('script');
           newscript.type = 'text/javascript';
           newscript.async = true;
           newscript.src = 'http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js';
       (document.getElementsByTagName('head')[0]
        || document.getElementsByTagName('body')[0]).appendChild(newscript);
    }
}); 
```

# jquery - Jquery，向下滑动隐藏的div跳到顶部

> ID：12079140
> 
> 赞同：1
> 
> 时间：2012-08-22T18:23:01.743
> 
> 标签：jquery

我有一个链接，一旦我单击隐藏的 div 就会向下或向上滑动，但它总是跳到页面顶部，所以我必须一直向下...

我读到我必须存储一个高度，但我的内容是动态的，所以我不能这样做......

CSS

```
.resultado{

    text-align: left;
} 
```

div 本身

```
<div class="resultado">
<a class="mostrar" href="#">mostrar</a>
<div class="datos"><p>Hi</p></div>
</div> 
```

代码

```
<script type="text/javascript">
    $(document).ready(function(){

        $(".datos").hide();

        $('.resultado').delegate('.mostrar','click',function(event){

          $(this).parent().find(".datos").slideToggle();

        }); 
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T18:24:53.850

改变：

```
$('.resultado').delegate('.mostrar','click',function(event){
    $(this).parent().find(".datos").slideToggle();
}); 
```

至

```
$('.resultado').delegate('.mostrar','click',function(event){
    event.preventDefault();
    $(this).parent().find(".datos").slideToggle();
}); 
```

您的链接的默认行为是跟随命名的锚点，并使页面顶部成为焦点。通过使用[`event.preventDefault`](http://api.jquery.com/event.preventDefault/)你来抑制这种行为。

# objective-c - OSStatus NSOSStatusErrorDomain

> ID：12079144
> 
> 赞同：7
> 
> 时间：2012-08-22T18:23:15.210
> 
> 标签：objective-c, ios, core-audio, avaudiosession

当我使用获取属性时收到以下错误

```
AudioSessionGetProperty(kAudioSessionProperty_CurrentHardwareSampleRate,&size,
                                      &myAudioDescription.mSampleRate) 
```

上述语句产生的错误是

```
Error Domain=NSOSStatusErrorDomain Code=560557673 "The operation couldn’t be completed. (OSStatus error 560557673.)" 
```

现在，这里 560557673 是什么意思，我在哪里可以找到它的解释？

文档仅提供 NSOSStatusErrorDomain 作为错误之一。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-22T20:48:06.110

该代码意味着属性数据大小不正确。

`OSStatus`是 OS X 和 iOS 中常用的错误代码类型。如果代码量级小于 100 万，那么代码很可能在 CarbonCore 框架中的 MacErrors.h 中列出。否则，它可能是在与返回它的函数相同的标题中列出的四字符代码。您可以通过在 Xcode 中通过命令单击来找到函数的标题。这些代码很可能会列在顶部附近，并组合在一起。要将数字转换为代码，请使用开发人员视图中的计算器应用程序将其转换为十六进制并将每个字节转换为字符。

# python - 将 URL 编码为谷歌可读的格式

> ID：12079155
> 
> 赞同：1
> 
> 时间：2012-08-22T18:23:58.030
> 
> 标签：python, url, encoding, character-encoding

我想知道如何对 URL 进行编码，以便可以将其作为参数传递给谷歌地图？

[https://maps.google.com/maps?q=https:%2F%2Fdl.dropbox.com%2Fu%2F94943007%2Ffile.kml&hl=en&sll=32.824552,-117.108978&sspn=0.889745,1.575165&t=m&z=4](https://maps.google.com/maps?q=https:%2F%2Fdl.dropbox.com%2Fu%2F94943007%2Ffile.kml&hl=en&sll=32.824552,-117.108978&sspn=0.889745,1.575165&t=m&z=4)

如您所见，URL 正在作为参数传递到 maps.google.com/ url

问题是如果我从[http://www.microsoft.com/somemap.kml](http://www.microsoft.com/somemap.kml)之类的 url 开始，我如何编码这个 URL 以便我可以将它传递给它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T18:47:00.007

该过程称为[URL 编码](http://en.wikipedia.org/wiki/URL_encoding)：

```
>>> urllib.quote('https://dl.dropbox.com/u/94943007/file.kml', '')
'https%3A%2F%2Fdl.dropbox.com%2Fu%2F94943007%2Ffile.kml' 
```

# javascript - 文本区域换行jquery

> ID：12079160
> 
> 赞同：7
> 
> 时间：2012-08-22T18:24:28.033
> 
> 标签：javascript, jquery, jquery-ui

当我单击它时，我有一个“编辑描述”按钮文本消失并出现

```
 if (id == 'commedit') jQuery(this).html('<textarea>'+jQuery(this).text()+'</textarea>');
        else if (id == 'commsave') {
            jQuery(this).text(jQuery(this).find('textarea').val());
        } 
```

在MySql中我有这个文本 -`"tetee<br>afafaf<br>afafaf<br>afsafsasfasf"`鉴于它显示有换行符但是当我在文本区域中单击“编辑”时，Jquery文本出现没有线条，当我点击保存时，它也出现在我的描述字段中，在一个没有线条的长行中休息。所以我需要你的帮助

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-22T18:25:41.187

`<br>`是 html 中断。你想要`\n`一个文本区域。

```
jQuery(this).html().replace(/<br>/gi,"\n") 
```

保存时，您希望将其改回中断并使用 html() 而不是 text();

```
var elem = jQuery(this);
if (id === 'commedit') {
    var text = jQuery(this).html().replace(/<br>/gi,"\n");
    elem.html('<textarea>'+ text +'</textarea>');
} else if (id === 'commsave') {
    var html = elem.find('textarea').val().replace(/\n/g,"<br>");
    elem.html(html);
} 
```

[JSFiddle 示例](http://jsfiddle.net/QAkja/)

# linux - 从基于 WSGI 的 Web 应用程序在 Linux 上执行进程

> ID：12079164
> 
> 赞同：0
> 
> 时间：2012-08-22T18:24:41.730
> 
> 标签：linux, wsgi

我有一个仪表板，我希望在用户单击按钮时运行一个进程。该过程可能需要很长时间才能完成。

到目前为止我的选择：

1.  使用 popen 或类似的东西来执行这个过程
2.  有一个守护进程监视一个目录。当此目录更改（创建文件）时，守护程序将执行该工作，然后在再次空闲之前删除该文件。
3.  使用 cron，每 5 秒运行一次，还监视一些目录。

哪一个对 Linux 更友好？有没有我没有考虑过的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T20:59:41.210

另一种选择是拥有一个监听某个套接字的守护程序（如您的第二个选项）。然后，您的 WSGI 应用程序可以连接并发送命令。通过套接字进行通信的方式有很多种，选择正确的方式很大程度上取决于实际情况。

这样做的好处是，您最终可以让两个应用程序（WSGI 和守护程序）在某个时间点在不同的计算机或 VM 上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T01:16:28.823

这就是 Celery 和 Redis Queue 等任务队列系统的用途。

# ruby-on-rails - 在 Ruby on Rails 中收集字符串以形成单个数组

> ID：12079165
> 
> 赞同：0
> 
> 时间：2012-08-22T18:24:42.337
> 
> 标签：ruby-on-rails, ruby

继上周关于解码字符串的问题之后，我试图弄清楚如何解码字符串，然后与来自许多其他对象的字符串连接。

在控制台中，我让它工作正常 - 我只是无法让它在浏览器中工作..

我的位置有很多客户。每个客户端都有一个如下所示的 query_string：

```
 "00-24-D7-04-10-A8 192.168.4.132 pass 5035077a00000004 tbPUEVj 0/3600 29792537/0\nC8-60-00-16-63-67 192.168.4.129 dnat 503505fb00000009 - 0/0 0/0\n60-C5-47-96-31-FC 192.168.4.123 dnat 50350c3e00000001 tbgJ9aj 0/0 48020478/0\n" 
```

我可以对此进行解码，但我不知道如何合并其中的许多。

在控制台中，我试过这个：

```
 l.nas.map { |f| f.query_string }.each do |t|
   puts t
 end 
```

这给了我：

```
 8C-FA-BA-60-7D-95 192.168.6.161 pass 5034917000000001 xxx-1adae9 10/0 3408756/0
 28-37-37-21-4C-04 192.168.6.160 pass 50348a630000000b xxx-1adae9 1/0 30258694/0
 00-24-D7-04-10-A8 192.168.4.132 pass 5035077a00000004 tbPUEVj 0/3600 29792537/0
 C8-60-00-16-63-67 192.168.4.129 dnat 503505fb00000009 - 0/0 0/0
 60-C5-47-96-31-FC 192.168.4.123 dnat 50350c3e00000001 tbgJ9aj 0/0 48020478/0

 ["8C-FA-BA-60-7D-95 192.168.6.161 pass 5034917000000001 xxx-1adae9 10/0 3408756/0\n28-37-37-21-4C-04 192.168.6.160 pass 50348a630000000b xxx-1adae9 1/0 30258694/0\n", "00-24-D7-04-10-A8 192.168.4.132 pass 5035077a00000004 tbPUEVj 0/3600 29792537/0\nC8-60-00-16-63-67 192.168.4.129 dnat 503505fb00000009 - 0/0 0/0\n60-C5-47-96-31-FC 192.168.4.123 dnat 50350c3e00000001 tbgJ9aj 0/0 48020478/0\n"] 
```

我也试过：

```
 l.nas.map { |f| f.query_string.split('\n') }.each do |t|.... 
```

我怎样才能将这些字符串连接在一起，然后正确分解它们。还是将它们分开并结合在一起？

我以前的帖子：[从 Ruby 字符串中提取信息](https://stackoverflow.com/questions/11959047/extracting-information-from-a-ruby-string)

# android - ?android的意思

> ID：12079166
> 
> 赞同：0
> 
> 时间：2012-08-22T18:24:47.037
> 
> 标签：android

我已经看到它在各种 XML 文件中使用，但我找不到任何关于它的实际定义`?android:`。我假设它只是意味着如果属性存在于父主题中，则从父主题继承它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-10T10:10:48.610

它用于引用主题中的样式属性。请参阅[访问资源 - 引用样式属性](http://developer.android.com/guide/topics/resources/accessing-resources.html#ReferencesToThemeAttributes)

# c# - 在 HitTest 中使用列表

> ID：12079170
> 
> 赞同：0
> 
> 时间：2012-08-22T18:24:55.033
> 
> 标签：c#, wpf, xaml

[MSDN](http://msdn.microsoft.com/en-us/library/ms752097.aspx)上的这个页面代表了一个使用 HitTest 的示例，该示例在概念上很清楚......但我没有得到的一件事是列表 C# 代码指向作为 hitResultsList。我试图将其声明为 List 为：

```
List<myShapeClass> hitResultsList = new List<myShapeClass>(); 
```

但是，我收到类型转换错误。任何帮助将不胜感激。问题是我应该使用什么样的列表来进行 HitTesting？

代码在这里：

```
// Respond to the right mouse button down event by setting up a hit test results callback. 
private void OnMouseRightButtonDown(object sender, MouseButtonEventArgs e)
{
    // Retrieve the coordinate of the mouse position.
    Point pt = e.GetPosition((UIElement)sender);

    // Clear the contents of the list used for hit test results.
    hitResultsList.Clear();

    // Set up a callback to receive the hit test result enumeration.
    VisualTreeHelper.HitTest(myCanvas, null,
        new HitTestResultCallback(MyHitTestResult),
        new PointHitTestParameters(pt));

    // Perform actions on the hit test results list. 
    if (hitResultsList.Count > 0)
    {
        Console.WriteLine("Number of Visuals Hit: " + hitResultsList.Count);
    }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T18:30:10.670

关键在这里，在回调中：

```
// Return the result of the hit test to the callback. 
public HitTestResultBehavior MyHitTestResult(HitTestResult result)
{
    // Add the hit test result to the list that will be processed after the enumeration.
    hitResultsList.Add(result.VisualHit);

    // Set the behavior to return visuals at all z-order levels. 
    return HitTestResultBehavior.Continue;
} 
```

请注意，它正在添加`result.VisualHit`，并且`result`是`HitTestResult`. 因此，如果您查找该成员（[http://msdn.microsoft.com/en-us/library/system.windows.media.hittestresult.visualhit.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.hittestresult.visualhit.aspx)），您会发现它是一个`DependencyObject`.

所以你想要：`List<DependencyObject>`。

# jqgrid - 如何在jqgrid的同一列中显示多个值

> ID：12079172
> 
> 赞同：4
> 
> 时间：2012-08-22T18:25:03.010
> 
> 标签：jqgrid

我想知道如何在 jqGrid 的单列中显示多个值

这是我当前网格定义的示例。

```
$("#grid1").jqGrid({
url: 'Default.aspx/getGridData',
datatype: 'json',
...
colModel: [
...
//contains the input type ('select', etc.)
{ name: 'InputType', hidden:true }, 
...
//may contain a string of select options ('<option>Option1</option>'...)
{ 
  name: 'Input', 
  editable:true, 
  edittype:'custom', 
  editoptions:{
     custom_element: /* want cell value from InputType column here */ , 
     custom_value:   /* want cell value from Input column here */ 
  } 
 }, 
...
]
}); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-23T14:47:33.737

您可以通过在列模型上使用[自定义格式化程序轻松完成此操作。](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:custom_formatter)

自定义 Formatter 是一个带有以下参数的 javascript 函数：

> cellvalue - 要格式化的值
> 
> options - { rowId: rid, colModel: cm} where rowId - 是行的 id colModel 是从 jqGrid 的 colModel 数组中获取的该列的属性对象
> 
> rowObject - 是以数据类型选项确定的格式表示的行数据

所以一个函数可以这样声明：

```
function myformatter ( cellvalue, options, rowObject )
{
     // format the cellvalue to new format
     return new_formated_cellvalue;
} 
```

并在您的列上定义如下：

```
 {name:'price', index:'price', width:60, align:"center", editable: true, 
 formatter:myformatter }, 
```

因此，在您的情况下，您可以使用自定义格式化程序中的 rowObject 参数来填充您的附加值。例如。

**立柱模型**

```
 {name:'employee_id', index:'employee_id', width:60, align:"center", editable: true, 
formatter:myformatter, label:'Employee' } 
```

**格式化程序**

```
function myformatter ( cellvalue, options, rowObject )
{
     return cellvalue + ' ' + rowObject.email + ' ' + rowObject.user_name;
} 
```

如果这是在您的 employee_id 列上定义的，它将显示在单元格中：

```
employee_id email username 
```

这是一个显示它工作的[jsFiddle示例。](http://jsfiddle.net/fbfcn/5yqRn/13/)

# android - 当用户点击主页按钮时处理 AsyncTask

> ID：12079175
> 
> 赞同：1
> 
> 时间：2012-08-22T18:25:36.597
> 
> 标签：android, asynchronous

当用户点击应用程序的启动活动时，我有一个可能很长的下载/解压缩任务。它被封装在一个对象的方法`InitSync.getInitialData()`中，该方法设置并显示一个相应的progressDialog并管理任务的进度。

当用户点击主页按钮时，任务继续运行，但当他们返回应用程序时，`InitSync`会创建一个新对象，并在第一个运行时启动第二次下载。

如何获得对 InitSync 原始实例的引用，它允许我防止第二次`AsyncTask`触发？

# html - 出现在 div 下方而不是其中的内容

> ID：12079191
> 
> 赞同：3
> 
> 时间：2012-08-22T18:26:23.817
> 
> 标签：html

我是 html 的新手，我正在尝试将一些橙色文本放入带有橙色边框的白色框中。我有：

```
 <div
   style="
   top: 20px; 
   left: 110px; 
   position: absolute; 
   z-index: 3; 
   visibility: show;
    width: 45px;
   height: 15px;
   background:#FFFFFF;
   border-color: #E2943C;
    border-style: solid;
    border-top-width: 1px;
    border-bottom-width: 1px;
    border-left-width: 1px;
    border-right-width: 1px;">

  <p> 
    <font size="-1" color="#E2943C" face="Lucida Sans Unicode, Lucida Grande, sans-serif"> Beta </font> </p>  
</div> 
```

出于某种原因，文本显示在框下方而不是其中。我确定这是一些简单的愚蠢错误，但我似乎无法确定它 - 有人有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T18:31:28.613

只需应用`margin:0px`在`p`标签上，它应该可以工作您的 div 高度很小，这就是为什么文本由于默认边距而下降的原因`p`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T18:32:01.800

不是解决方案，只是清理意大利面。

首先，从标记中获取内联样式：

[http://jsfiddle.net/uA94u/](http://jsfiddle.net/uA94u/)

现在更容易阅读代码：

```
<div class="content">
  <p>Beta</p>  
</div>​

.content 
{ 
    top: 20px; 
    left: 110px; 
    position: absolute; 
    z-index: 3; 
    visibility: show;
    width: 45px;
    height: 15px;
    background:#FFFFFF;
    border:1px solid #E2943C;
}

p
{
    font-size:1em;
    color:#E2943C;
    font-face:Lucida Sans Unicode, Lucida Grande, sans-serif;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T18:34:18.353

使用**内联样式**是一种**过时**的元素样式方式。我认为一些教程应该可以帮助您朝着正确的方向前进。

样式元素的方法是将**CSS（层叠样式表）**文件链接到文档或使用标签**嵌入样式。**

这是一个更被接受的版本：

[http://jsfiddle.net/FvC9n/](http://jsfiddle.net/FvC9n/)

如果您想要一些教程，请询问，我可以向您展示一些链接。

一个很好的起点（如果你可以在没有视频的情况下应付的话）是[http://www.w3schools.com/css/css_howto.asp](http://www.w3schools.com/css/css_howto.asp)它是针对初学者的，当心，不要把它所说的当作法律。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T18:35:11.330

使您的字体`line-height`精确到分区的高度（15 px），它将位于垂直中心。加上添加`text-align:center;`将使其水平居中。

将这些 css 属性添加到您的段落 css。看看这个[**例子**](http://jsfiddle.net/tUarp/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T18:36:32.327

在 Chrome 中，文本出现在框外，而在 IE8 中，它看起来是正确的。应用以下内容：

```
<style>
    .divClass {
        top: 20px; 
        left: 110px; 
        z-index: 3; 
        width:50px;
        background:#FFFFFF;
        border-color: #E2943C;
        border-style: solid;
        border-top-width: 1px;
        border-bottom-width: 1px;
        border-left-width: 1px;
        border-right-width: 1px
    }
    </style> 

    <div
       class="divClass">

      <p> 
        <font size="-1" color="#E2943C" face="Lucida Sans Unicode, Lucida Grande, sans-serif"> Beta </font> </p>  
    </div> 
```

# arrays - 在 CoffeeScript 中获取数组的最后一个元素

> ID：12079192
> 
> 赞同：20
> 
> 时间：2012-08-22T18:26:30.773
> 
> 标签：arrays, coffeescript

是否有一种快速（简短，字符明智）的方法来获取数组的最后一个元素（假设数组非空）？

我通常这样做：

`last = array[array.length-1]`或者`last = array[-1..][0]`

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-22T18:55:22.437

**如果您使用的是现代版本的 CoffeeScript，请不要使用它。*改用dule*的答案。**

* * *

如果您不介意修改数组，

```
last = array.pop() 
```

如果您不想修改数组，

```
last = array[..].pop() 
```

编译为`last = array.slice(0).pop()`. 我认为对于已经接触过 CoffeeScript 或 Python 切片的人来说，它是非常易读的。但是，请记住，它会比`last = array[array.length-1]`大型阵列慢得多。

我不会推荐`last = array[-1..][0]`。它很短，但我认为它的含义不会立即显而易见。不过，这都是主观的。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-22T19:46:12.537

为此修改`Array`原型既简单又无害：

```
Array::last = -> @[@length - 1] 
```

如果你已经在使用优秀的[Underscore.js](http://underscorejs.org/)，你可以使用它的`_.last(arr)`.

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2015-05-14T18:41:15.010

另一种选择是使用咖啡的解构：

`[..., last] = array`

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-12-12T16:37:09.197

我喜欢dule的建议，原因如下：

我使用 'try coffeescript' 测试了这种解构方法，这是一个在线咖啡到 js 编译器，位于[http://coffeescript.org/](http://coffeescript.org/)。

鉴于以下咖啡脚本：

```
arr = [1,2,3,4,5]

[..., last] = arr 
```

它编译成：

```
var arr, last;

arr = [1, 2, 3, 4, 5];

last = arr[arr.length - 1]; 
```

这真的很理想。解构语法非常清晰简洁。编译后的 javascript 是高性能的。我认为没有理由不使用它。

（我没有足够的声誉将其作为评论发布在 dule 的答案下，因此即使它是评论，我也将其添加为答案。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-25T05:01:13.883

或者你可以这样做：

```
last = array[-1..][0] 
```

# php - 用于密码存储的 SHA1 散列有什么好的替代方案？

> ID：12079194
> 
> 赞同：1
> 
> 时间：2012-08-22T18:26:34.453
> 
> 标签：php, security, sha1

我有一个使用 SHA1 哈希作为密码的网站。我最近阅读了以下文章，该文章主张不要将 SHA1 用于密码，因为 SHA1 从未设计用于保护密码：[http ://arstechnica.com/security/2012/08/passwords-under-assault/4/](http://arstechnica.com/security/2012/08/passwords-under-assault/4/)

您能否推荐一个我可以实现而不是 SHA1 的好方法，并请提供一个教程链接，该教程逐步描述了如何使用 php 实现该加密方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T18:31:46.650

首先，SHA1 不是加密算法，它是一种散列算法。

对于密码哈希，我建议使用[PHPass](http://www.openwall.com/phpass/)。它基本上使用安装代码的系统上可用的最佳哈希算法。

> phpass 支持的首选（最安全）散列方法是 OpenBSD 风格的基于 Blowfish 的 bcrypt，也支持我们的公共域 crypt_blowfish 包（用于 C 应用程序），在 PHP 中称为 CRYPT_BLOWFISH，回退到 BSDI 风格的扩展基于 DES 的散列，在 PHP 中称为 CRYPT_EXT_DES，最后的手段是回退到在 phpass 本身中实现的基于 MD5 的加盐和可变迭代计数密码散列（也称为可移植散列）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T18:28:40.653

`bcrypt`或者`scrypt`，但是，没有真正的 scrypt for php 实现。这篇文章值得一读，应该为您提供所需的所有信息：[http ://www.zimuel.it/en/strong-cryptography-in-php/](http://www.zimuel.it/en/strong-cryptography-in-php/)

# python - 处理 HTML 以删除和关闭 Python 中的打开标签

> ID：12079195
> 
> 赞同：1
> 
> 时间：2012-08-22T18:26:35.257
> 
> 标签：python, html, html-parsing, jinja2

我正在尝试使用 HTMLParser 处理没有结束标签或在 Python 中使用无效结束标签的 HTML：

入口：

```
<div>
  <p>foo 
</div>
bar</span> 
```

输出：（关闭打开的标签并打开错误的关闭）

```
<div>
  <p>foo</p>
</div>
<span>bar</span> 
```

甚至：（删除关闭而不立即打开和关闭所有打开的标签）

```
<div>
  <p>foo bar</p>
</div> 
```

我的代码只关闭打开的标签，但不能在 HTMLParser 的循环中编辑 HTML。

```
from HTMLParser import HTMLParser

singleton_tags = [
  'area','base','br','col','command','embed','hr',
  'img', 'input','link','meta','param','source'
]

class HTMLParser_(HTMLParser):

    def __init__(self, *args, **kwargs):
        HTMLParser.__init__(self, *args, **kwargs)
        self.open_tags = []

    # Handle opening tag
    def handle_starttag(self, tag, attrs):
        if tag not in singleton_tags:
            self.open_tags.append(tag)

    # Handle closing tag
    def handle_endtag(self, tag):
        if tag not in singleton_tags:
            self.open_tags.pop()

def close_tags(text):
    parser = HTMLParser_()

    # Mounts stack of open tags
    parser.feed(text)

    # Closes open tags
    text += ''.join('</%s>'%tag for tag in parser.open_tags)

    return text 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T23:37:36.907

我建议调查[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)。它是我使用过的最好的 HTML 解析器（适用于任何语言），并且使在 Python 中使用 HTML 变得非常容易。

有一个`prettify`功能可能对您有用。查看标题为[打印文档](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html#Printing%20a%20Document)的部分。

# entity-framework - 级联删除EF代码优先

> ID：12079213
> 
> 赞同：0
> 
> 时间：2012-08-22T18:28:13.133
> 
> 标签：entity-framework, code-first

我是实体框架代码的新手，所以我想问以下问题：我有这个实体：

```
public class ConfigurationSetEntity
{
   public virtual List<IsapreEntity> Isapres { get; set; }
   [Key]
   [DatabaseGenerated(DatabaseGeneratedOption.None)]
   public virtual string Culture { get; set; }
} 
```

还有这个：

```
public class IsapreEntity
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.None)]
    [Required]
    public virtual string IsapreName { get; set; }

    [ForeignKey("IsapreOf")]
    [Required]
    public virtual string CultureId { get; set; }

    public virtual ConfigurationSetEntity IsapreOf { get; set; }
} 
```

当我使用 ConfigurationSetEntity.Isapres.Remove(entity) 时，我得到一个 DbEntityValidationException，这是删除的代码：

```
IsapreModel original = this.ChangeSet.GetOriginal(currentIsapre);
ConfigurationSetEntity defaultConfigSet = dbContext.ConfigurationSets.Find(Constants.DefaultConfigurationSetId);
IsapreEntity originalEntity =defaultConfigSet.Isapres.Find(e => e.IsapreName==original.Isapre);
defaultConfigSet.Isapres.Remove(originalEntity);

try
{
    dbContext.SaveChanges();
}
catch (Exception ex)
{
  //This is where I catch the exception
}
defaultConfigSet.Isapres.Add(new IsapreEntity { IsapreName = currentIsapre.Isapre });
try
{
    dbContext.SaveChanges();
}
catch (Exception ex)
{
} 
```

这是一个例外：

```
"The IsapreOf field is required." 
```

我想要做的是使用`ConfigurationSetEntity.Isapres.Remove(entity)`并从`IsapreEntities`表和列表中删除实体。有人可以解释为什么错误和/或如何实现我的预期目的吗？

# asp.net - 在 ASP.NET 中生成动态控件

> ID：12079222
> 
> 赞同：0
> 
> 时间：2012-08-22T18:28:49.883
> 
> 标签：asp.net

我想在我的 ASPX 页面中创建一个动态控件。该控件类似于文本框、按钮、标签、音频、视频等。还生成 HTML 页面，以便我可以拖放或绑定此控件。

那么怎么做呢？请给我一些建议或代码项目，以便我理解它。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T00:58:39.570

这是 CodeProject 上的一个示例，详细说明了如何在 ASP.NET 中创建动态控件并使用 PlaceHolder 将它们添加到页面中。

[http://www.codeproject.com/Articles/8114/Dynamically-Created-Controls-in-ASP-NET](http://www.codeproject.com/Articles/8114/Dynamically-Created-Controls-in-ASP-NET)

# python - 没有特定字符的压缩数据的ASCII表示

> ID：12079226
> 
> 赞同：0
> 
> 时间：2012-08-22T18:29:01.950
> 
> 标签：python, hadoop, hadoop-streaming

我想使用 Python 使用 Hadoop 处理大量腌制数据。我想要做的是将我的数据表示为某个键（文件 ID），并将压缩的泡菜表示为大文件中的值。

如果我只是尝试将二进制代码作为 ascii 放入我想用 hadoop 处理的文件中，我会得到很多 '\t' 和 '\n' 值，它们会干扰 hadoop 文件的（键、值）结构。

我的问题是：如何使用 python 压缩一些数据并将其表示为 ascii 文件中的字符串，避免使用某些字符（例如 '\t' 和 '\n'）？

或者也许我的方法本质上是无效的？

我真的很感激任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:46:26.013

对于压缩，您可以使用`zlib`or`bz2`模块。对于表示，您可以使用该`base64`模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T18:46:52.737

您可以将腌制对象转换为`base64`使用`base64`模块。

# javascript - 如何在客户端填写 PDF 字段（Javascript）

> ID：12079229
> 
> 赞同：2
> 
> 时间：2012-08-22T18:29:09.337
> 
> 标签：javascript, pdf, client-side, fill

我需要创建一个应用程序，该应用程序需要使用 HTML 文本字段从用户那里获取信息并将其填充到 PDF 字段中。可填写的 PDF 可从服务器获取。用户填写的数据无法提交到服务器（敏感信息/法律问题）。我需要一种 JavaScript 可以获取用户填写的信息并将其填充到 PDF 中，并使其可供用户打印/下载的方式。

（最初，我试图只使用 HTML+PRINTCSS 并避免使用 PDF，但后来我遇到了浏览器将标题添加到打印的 HTML 的问题。我不想让用户担心检查他的浏览器打印设置- 因为他们中的大多数是计算机文盲）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T18:36:54.467

我不认为这仅通过 JavaScript 是可行的。一些 PDF 阅读器确实支持 JS，但许多不支持或允许用户切换它，即使这样，PDF 也无法访问浏览器窗口中的变量。你最好预先填写服务器端的字段。特别是 PHP 具有开箱即用的强大[PDF 处理功能。](http://php.net/manual/en/book.pdf.php)

例如，您可以让用户在线填写表单——“打印”按钮可以使用 AJAX 将表单提交到服务器，并将窗口指向生成的 PDF 下载链接。您也可以简单地提交没有 JavaScript 的表单，并让服务器通过设置标头来处理重定向。

# java - jar 文件究竟包含什么？

> ID：12079230
> 
> 赞同：95
> 
> 时间：2012-08-22T18:29:09.953
> 
> 标签：java, jar

作为实习生，我在项目中使用公司代码，他们通常会向我发送一个`jar`文件供我使用。我将它添加到构建`path`中`Eclipse`，通常一切都很好。

但是，我很想知道每个类包含什么，当我尝试打开`jar`文件中的一个类时，它告诉我需要一个源文件。

这是什么意思？我来自*C/C++*背景，所以`jar`类似于已经编译的`.o`文件，我能看到的只是这些`.h`东西吗？或者我正在使用的文件中是否有实际代码被`jar`加密所以我无法读取它？

感谢所有的答案！

**编辑：**
谢谢，伙计们，我知道它有点像档案，但我很困惑为什么当我试图打开`.class`文件时，我得到了一堆随机字符。当我尝试`.o`在 C 中打开文件时，输出是相似的，所以我只是想确定一下。
谢谢！

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-08-22T18:31:14.283

JAR 文件实际上只是一个 ZIP 文件。它可以包含任何东西——通常它包含已编译的 Java 代码 (*.class)，但有时也包含 Java 源代码 (*.java)。

然而，Java 可以被反编译——如果开发人员混淆了他的代码，你将不会得到任何有用的类/函数/变量名称。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2012-08-22T18:31:33.077

> 但是，我很好奇每个类包含什么，当我尝试打开 jar 文件中的一个类时，它告诉我需要一个源文件。

jar 文件基本上是一个 zip 文件，其中包含 .class 文件和可能的其他资源（以及有关 jar 本身的元数据）。真的很难将 C 与 Java 进行比较，因为 Java 字节码比大多数二进制格式维护更多的元数据 - 但类文件*是*编译代码而不是源代码。

如果您使用 zip 实用程序打开 jar 文件或运行`jar xf foo.jar`，您可以从中提取文件并查看它们。请注意，您*不需要*jar 文件来运行 Java 代码 - 类加载器可以直接从文件系统或 URL 以及 jar 文件加载类数据。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-08-22T18:30:53.860

了解 jar 文件包含的内容的最佳方法是执行以下命令：

转到命令行并执行`jar tvf jarfilename.jar`

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-08-22T18:33:48.037

文件是一个`jar`zip 文件，其中包含一些包含元数据的附加文件。（尽管有 .jar 扩展名，但它是 zip 格式，任何处理 .zip 文件的实用程序也能够处理 .jar 文件。）

[http://docs.oracle.com/javase/8/docs/technotes/guides/jar/index.html](http://docs.oracle.com/javase/8/docs/technotes/guides/jar/index.html)

Jar 文件可以包含任何类型的文件，但它们通常包含类文件和支持配置文件（属性）、图形和应用程序所需的其他数据文件。

类文件包含已编译的 Java 代码，可由 Java 虚拟机执行。

[http://en.wikipedia.org/wiki/Java_class_file](http://en.wikipedia.org/wiki/Java_class_file)

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2014-07-11T06:05:51.163

JAR 代表 Java 归档。它是一种基于流行的 ZIP 文件格式的文件格式，用于将多个文件聚合为一个文件。尽管 JAR 可以用作通用归档工具，但其开发的主要动机是 Java 小程序及其必需组件（.class 文件、图像和声音）可以在单个 HTTP 事务中下载到浏览器，而不是打开每件作品都有一个新的连接。这极大地提高了小程序加载到网页上并开始运行的速度。JAR 格式还支持压缩，这可以减小文件的大小并进一步缩短下载时间。此外，JAR 文件中的各个条目可以由小程序作者进行数字签名以验证其来源。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-08-22T18:36:40.130

Jar 文件包含已编译的 Java 二进制类，`*.class`可以`.java`通过使用一些开源反编译器对其进行反编译，将其转换为可读类。jar 还有一个可选的`META-INF/MANIFEST.MF`，它告诉我们如何使用 jar 文件 - 指定其他 jar 文件以与 jar 一起加载。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-06-06T08:22:57.183

Jar(Java Archive) 包含一组 .class 文件。

1.创建Jar文件（Zip文件）

```
 if one .class (say, Demo.class) then use command jar -cvf NameOfJarFile.jar Demo.class (usually it’s not feasible for only one .class file)

 if more than one .class (say, Demo.class , DemoOne.class) then use command jar -cvf NameOfJarFile.jar Demo.class DemoOne.class

 if all .class is to be group (say, Demo.class , DemoOne.class etc) then use command jar -cvf NameOfJarFile.jar *.class 
```

2.提取Jar文件（解压缩文件）

```
 jar -xvf NameOfJarFile.jar 
```

3.显示目录

```
 jar -tvf NameOfJarFile.jar 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-08-22T18:32:23.090

.jar 文件类似于 .exe 文件。本质上，它们都是可执行的 zip 文件（不同的 zip 算法）。

在 jar 文件中，您将看到文件夹和类文件。每个类文件都类似于您的 .o 文件，并且是一个已编译的 java 存档。

如果您想查看 jar 文件中的代码，请下载 java 反编译器（位于此处： http://java.decompiler.free.fr/?q= [jdgui](http://java.decompiler.free.fr/?q=jdgui)）和 .jar 提取器（7zip 可以正常工作）。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-08-22T18:52:37.063

[JD-GUI](http://java.decompiler.free.fr/?q=jdgui)是一个非常方便的 JAR 浏览和反编译工具

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-07-19T05:05:11.410

.jar 文件包含已编译的代码（*.class 文件）和与该代码相关的其他数据/资源。它使您能够将多个文件捆绑到一个存档文件中。它还包含元数据。由于它是一个 zip 文件，它能够压缩您放入其中的数据。

我发现一些有用的东西。

[http://www.skylit.com/javamethods/faqs/createjar.html](http://www.skylit.com/javamethods/faqs/createjar.html)

[http://docs.oracle.com/javase/tutorial/deployment/jar/basicsindex.html](http://docs.oracle.com/javase/tutorial/deployment/jar/basicsindex.html)

OSGi 在实践中将 JAR 文件定义为：“JAR 是基于 ZIP 文件格式的存档文件，允许将许多文件聚合到一个文件中。通常，存档中包含的文件是已编译的 Java 类文件和资源的混合“

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-03-08T07:41:17.790

只需检查`aopalliance.jar`文件是否有`.java`文件而不是`.class`文件。如果是这样，只需提取 jar 文件，将其导入 eclipse 并通过 eclipse 创建一个 jar。它对我有用。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-11-23T09:45:14.753

**在学习 JAR 时，我遇到了这个线程，但无法为像我这样具有 .NET 背景的人获得足够的信息，所以我将添加一些可以帮助像我这样具有 .NET 背景的人的要点。**

首先，我们需要在 .NET 中定义与 JAR 类似的概念，即**汇编**和汇编与 Java JAR 文件有很多共同点。

因此，程序集是 .NET 环境中代码打包的基本单元。程序集是自包含的，通常包含来自编译类的中间代码、关于类的元数据以及打包代码执行其任务所需的任何其他文件。由于程序集是代码打包的基本单元，因此与类型交互相关的一些操作必须在程序集级别完成。**例如**，授予安全权限、代码部署和版本控制都是在程序集级别完成的。

**Java JAR**文件在 Java 中执行类似的任务，但最大的区别在于实现。程序集通常以**EXE 或 DLL**形式存储，而 JAR 文件以**ZIP**文件格式存储。

[信息来源 -> 5- 组件](http://www.25hoursaday.com/csharpvsjava.html)

# android - 下载 .apk 文件后打开 android 包安装程序

> ID：12079231
> 
> 赞同：3
> 
> 时间：2012-08-22T18:29:15.093
> 
> 标签：android, apk

有没有办法在下载 .apk 文件时向 Android OS 发出信号以打开包安装程序？

也许通过内容类型？或者可能是 APK 特定的 url 协议，比如`apk://apk.location`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T18:32:02.827

您是在自己的应用程序中自己进行下载，还是尝试在外部应用程序中创建一些行为？

我认为您无法在应用程序外部下载时触发​​行为（因为用户必须选择下载的文件才能打开它），但如果您自己处理下载，我认为您想要[这篇](https://stackoverflow.com/questions/4967669/android-install-apk-programmatically)关于如何以编程方式安装应用程序的帖子。

**编辑：** 解决您说您正在编写网站并希望能够强制 APK 由本机应用程序打开的评论：我可以想办法做类似的事情，但您必须处理在本机应用程序中下载，因为您不会让浏览器为您下载。

您需要注册您的本机应用程序以接收`ACTION_VIEW` `Intent`带有您选择的任何格式的 URI 的 s；我建议使用类似`yourappname://localhost/escaped_download_url_to.apk`. 在您`Activity`从 URI 中获取路径`Intent`并获取它的最后一部分（URI 处理分为几个组件：协议、主机和路径）。必要时取消转义，然后在应用程序中手动开始下载，完成后，您可以使用我提供的链接从应用程序放置的任何位置打开下载的 APK。

只要您确保您的移动网站提供`href`to `yourappname://localhost/escaped_download_url_to.apk`，您就可以触发此行为。当用户单击该链接时，它应该提供一个对话框来选择使用哪个应用程序来打开它（如果他们有多个应用程序能够这样做），当他们选择您的应用程序时，它将启动您在过滤器`Activity`中注册的应用程序。`Intent`

**编辑第二个：** 您可能不需要做任何转义的 URI；只要您的应用注册以使用该协议接收 Intent，只需按照您在自己的帖子中建议的那样使用虚构的 URI 协议即可。 `yourappname://yourserver.com/my/location.apk`将工作。真正重要的是能够从 URI 中提供给应用程序的数据中提取下载 URL。

# c++ - 我如何告诉编译器为每个编译的函数添加一个函数调用？

> ID：12079247
> 
> 赞同：3
> 
> 时间：2012-08-22T18:30:23.890
> 
> 标签：c++, visual-studio-2010, g++

我记得读过一种告诉 Visual Studio 在编译时向每个函数添加函数调用的方法。如果您想滚动自己的穷人的剖析器，这很方便。但我不记得该怎么做，也不记得它叫什么。我想用 g++ 做同样的事情。有谁知道如何做到这一点？

编辑：所以看起来 Visual Studio 等效项是用 /Gh 编译并为 _penter 和 _pexit 函数定义。对于 g++，您应该查找 -finstrument-functions 编译器选项。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T18:56:50.630

> “所以看起来 Visual Studio 等效项是使用 /Gh 编译并为 _penter 和 _pexit 函数定义。对于 g++，您应该查找 -finstrument-functions 编译器选项。”

# xcode - 如何纠正我的 .h 文件将其 IBOutlets 链接到另一个项目的 XIB 文件的事实？

> ID：12079249
> 
> 赞同：13
> 
> 时间：2012-08-22T18:30:29.303
> 
> 标签：xcode

这是一个真正的'WTF？我的时刻。

我从另一个项目中复制了一些类，包括复制和粘贴代码和一些 UIBulder 组件。没有被复制的是 XIB 文件（我从 XIB 转到情节提要）。

我的标签/滑动识别器没有激活，当我深入研究时，我发现唯一可以解释的是，不知何故，我正在连接 XIB 文件。（当我单击标题中 IBAction/IBOutlet 行旁边的小按钮时，它会显示故事板和 xib 文件都已连接）。

我没有在任何我能找到的地方引用该文件，它只是在 Xcode 中以某种方式神奇地识别出来。我不知道该怎么办，如何解决这个问题。

有人有想法么？

编辑：真正烦人的一点是，当我检查那里时，该文件似乎不在我的文件列表中，我不能这样删除引用。而且由于它引用了原始项目中的文件，我不能只删除它。（在任一项目中所做的任何更改都会导致两个项目中的更改；出于某种原因，它们都使用相同的 xib 文件）。我应该可以简单地删除对 xib 文件的引用，但我找不到该引用。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-05-19T13:39:48.843

如果您将视图控制器代码从一个项目复制到另一个项目中，您会注意到插座发生了一件奇怪的事情。它引用了第一个项目的视图，而您从未连接任何插座。

[![在此处输入图像描述](../Images/f6d12f95493c96b7f1266566119fe299.png)](https://i.stack.imgur.com/yUOfi.png)

如果您左键单击小圆圈并单击参考链接，您甚至会被带到另一个项目中的情节提要视图。试图弄清楚如何摆脱这个参考可能会让你发疯。

好吧，**好消息是你真的没有什么需要解决的。**您没有复制一些深入的、难以找到的参考链接。Xcode 只是感到困惑，因为两个项目中的 View Controller 和 outlet 名称相同。基本上只是忽略那个小圆圈所说的。您可以关闭第一个项目，Xcode 最终会解决问题。右键单击故事板中的视图以查看当前项目中真正存在的引用插座。（有关更多详细信息，请参阅[我的完整答案](https://stackoverflow.com/a/37324620/3681880)。）

无需删除派生数据。无论如何，这并不能解决问题。只需尝试再次同时打开两个项目，您将得到相同的奇怪行为。

我想出的方法是分别创建两个新项目，它们具有同名的视图控制器和同名的引用插座。我从来没有复制过任何东西，但 Xcode 显示一个正在引用另一个。就像我说的，忽略小圆圈。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-12-04T19:00:30.840

我只是有同样的问题。为我解决的问题是关闭两个项目，从两者中删除派生数据，然后重新打开目标项目。

我同意，这是一个疯狂的问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-25T14:12:54.000

我确信这个问题可能会发生，我修复它删除 XCode 的派生数据文件夹的内容。

我只想添加如何删除这些文件的步骤：

1.  不要删除 DerivedData 文件夹。
2.  转到首选项（命令，）>位置选项卡
3.  在派生数据上，您将看到路径，单击右指向箭头（将在 Finder 中打开该位置）
4.  关闭 XCode
5.  选择 DerivedData 文件夹中的所有文件（不要选择父文件夹）和（命令删除）或将它们移动到垃圾箱，然后清空垃圾箱
6.  打开项目，你就完成了

我希望它可以帮助某人

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T18:51:27.807

除非 xib 文件在项目中。它不应该有指向它的链接。

xib 文件连接到 .h 文件。不是相反。

您可能想要删除情节提要中的连接并重新连接它们。

还要确保故事板是正在启动的 UI，并且导航堆栈上的项目实际上是故事板页面。但是您应该能够同时将情节提要和 xib 文件连接到该类。您只是不能将一个 IBOutlet 连接到单个 ui 组件中的多个对象（例如，故事板上的两个按钮不能同时连接到`@property IBOutlet UIButton *myCurrentButton`您必须为每个连接有一个单独的 IBOutlet。另一方面，可以连接任意数量的操作到 IBAction。这就是为什么您要`(id) sender`执行每个操作的原因。

我不知道这是否正是您所遇到的，但我希望理解可以帮助您调试问题。

# objective-c - ASIHTTPRequest 块内存泄漏

> ID：12079251
> 
> 赞同：0
> 
> 时间：2012-08-22T18:30:38.830
> 
> 标签：objective-c, ios, cocoa-touch, asihttprequest, objective-c-blocks

我无法在此代码中找到错误：

```
-(void)downloadImageFromURL:(NSURL*)url withCompletionBlock:(RSSMessageImageDownloadCompletionBlock)completionBlock
{

    ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];

    __block RSSMessage *_self = self;
    request.completionBlock =
    ^{    
        __block NSData *responseData = request.responseData;

        dispatch_async( dispatch_get_main_queue(), ^{
            _self.image = responseData;            
            [[[UIApplication sharedApplication] delegate] saveContext];
            if(completionBlock != nil)
            {
                completionBlock();
            }

        });
    };

    [request startAsynchronous];
} 
```

在这种形式中，我从仪器中得到了内存泄漏。我假设这是因为我之前缺少 __block 关键字： ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];

但是当我将这个关键字添加到上面的行时，我得到了如下错误：

> *** -[NSConcreteMutableData isNSData__]：消息发送到已释放实例 0xdeab380

我不知道如何保留请求数据并且不泄漏内存。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T19:36:15.670

我对这个图书馆一无所知，所以在这方面你应该听从 viking 的建议。

但是，我可以帮助您解决泄漏问题，这是块和请求对象之间创建的保留周期的结果。具体来说，请注意您的`request`对象持有对代码块对象的强引用（通过`request.completionBlock`）。

反过来，您的代码块对象持有强引用，`request`因为它访问`request.responseData`. 此外，请注意您的代码看起来很可能是 ARC，但这并不能解释您的`_self`变量构造，它看起来像一个非 ARC 弱引用。非 ARC __block 没有保留对象。在 ARC 下， __block 确实会导致保留。

假设 ARC，我建议进行以下更改。

```
-(void)downloadImageFromURL:(NSURL*)url withCompletionBlock (RSSMessageImageDownloadCompletionBlock)completionBlock
{
    ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];

    __weak ASIHTTPRequest *weakRequest = request;
    __weak RSSMessage *weakSelf = self;

    request.completionBlock = ^{
        NSData *responseData = weakRequest.responseData;
        // Check for nil if not ok with nil data
        dispatch_async( dispatch_get_main_queue(), ^{
            weakSelf.image = responseData;            
            [[[UIApplication sharedApplication] delegate] saveContext];
            if(completionBlock != nil)
            {
                completionBlock();
            }
        });
    };
    [request startAsynchronous];
} 
```

现在，完成块持有对响应对象的弱引用，这打破了保留周期。请注意，通常，您应该为弱引用创建本地强引用，以确保对象停留足够长的时间来完成其工作。但是，在这种特定情况下，似乎没有必要。我认为拥有 nil 图像是可以的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T18:41:15.703

[来自文档](http://allseeing-i.com/ASIHTTPRequest/How-to-use#using_blocks)：

```
- (IBAction)grabURLInBackground:(id)sender
{
   NSURL *url = [NSURL URLWithString:@"http://allseeing-i.com"];
   __block ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
   [request setCompletionBlock:^{
      // Use when fetching text data
      NSString *responseString = [request responseString];

      // Use when fetching binary data
      NSData *responseData = [request responseData];
   }];
   [request setFailedBlock:^{
      NSError *error = [request error];
   }];
   [request startAsynchronous];
} 
```

似乎请求本身需要标记`__block`

* * *

请注意，[ASIHTTPRequest 的原作者不再支持它](http://allseeing-i.com/%5Brequest_release%5D;)。他很好地解释了他的理由，并为替代项目提供了链接和建议。我对[AFNetworking](https://github.com/AFNetworking/AFNetworking/)很满意，它有一个很棒的基于块的界面。

# extjs - 从商店过滤结果

> ID：12079264
> 
> 赞同：1
> 
> 时间：2012-08-22T18:31:33.657
> 
> 标签：extjs, extjs4.1

我正在从 Store 加载值，然后使用条件（例如 `name == Matt`）对其进行过滤。代码如下所示；

```
var store = Ext.getStore('mystore');
store.on('load', function() {
    store.filter({
        filterFn: function(rec) {
            return Ext.Array.indexOf(arr, rec.get('name')) > -1;
        }
    });
});
     store.load(); 
```

稍后，在另一个视图中，我需要使用过滤后的结果（如上所示）并将其过滤到另一个值数组。我怎样才能做到这一点;

我的方法是再次加载记录（再次粘贴上面的代码 - 但没有过滤器部分）。但这是不正确的。那么如何从先前过滤的结果数组中过滤结果呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T04:44:20.540

`filters`您可以在其属性中定义过滤器以在商店加载时运行并将属性设置`filterOnLoad`为`true`.

根据新的过滤条件过滤记录：

```
store.clearFilter(true); // Clears old filters
store.filter([
    {
         filterFn: function(rec) {
              return Ext.Array.indexOf(arr, rec.get('name')) > -1;
         }
    }
]); 
```

# solr - 加速 SOLR 搜索

> ID：12079269
> 
> 赞同：9
> 
> 时间：2012-08-22T18:31:49.650
> 
> 标签：solr

使用 SOLR Apache Lucene 3.6 时，SOLR 搜索响应非常慢。

我正在尝试的一些性能增强技术是

*   SOLR 分页

*   solrConfig.xml 中的 mergeFactor 当前设置为 10

*   SOLR 方面查询

*   solrconfig.xml 中的 filterCache 设置为大小 512 并使用 solr.FastLRUCache 和 autowarm = 0;

*   solfconfig.xml 中的 queryResultCache 设置为大小 512，autowarmCount=0

*   newSearcher、firstSearcher 和 useColdSearcher

*   100,000 个文档的单段索引

*   100,000 个文档的单机 SOLR 服务器

如何优化项目 1-7 以增加对术语/查询的 SOLR 搜索响应？是否有任何其他优化参数需要考虑以上未提及的？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-23T12:00:01.433

您还可以检查以下内容：-

1.  [Solr性能因素](http://wiki.apache.org/solr/SolrPerformanceFactors)
2.  [提高搜索速度](http://wiki.apache.org/lucene-java/ImproveSearchingSpeed)
3.  [提高索引速度](http://wiki.apache.org/lucene-java/ImproveIndexingSpeed)
4.  [Solr缓存](http://wiki.apache.org/solr/SolrCaching)
5.  [Solr 的七大罪](https://lucidworks.com/post/the-seven-deadly-sins-of-solr/)

# c# - 我怎样才能改变我的班级 使用 javascript

> ID：12079273
> 
> 赞同：-1
> 
> 时间：2012-08-22T18:31:54.853
> 
> 标签：c#, javascript

我的项目是一个 asp.net，它有一个包含列表的母版页

```
<ul id="navigation">
         <li id="li1" runat="server" class="selected"><a href="Events.aspx">Events</a></li>
         <li id="li2" runat="server"><a href="AddEvent.aspx">Add Event</a></li>
         <li id="li3" runat="server"><a href="MyProfile.aspx">Profile</a></li>
         <li id="li4" runat="server"><a href="Friends.aspx">Friends</a></li>
         <li id="li5" runat="server"><a href="FindFriends.aspx">Find Friends</a></li>
         <li id="li6" runat="server"><a href="Schedual.aspx">Schedual</a></li>
         <li>
             <asp:LinkButton ID="LogOutButton" runat="server" OnClick="LogOutButton_Click">Log Out</asp:LinkButton>
         </li>
</ul> 
```

选中的类（css类）有一张图片，这张图片告诉用户他在哪个页面。导航时如何使用 javascript 或 C# 更改此类？

我对javascript没有很好的经验

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T18:34:18.893

```
document.getElementById("li6").className = "whatever"; 
```

应该管用/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T18:43:10.897

```
$("#li1").addClass("selected"); 
```

将工作。

[**例子**](http://jsfiddle.net/T8Jzx/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T18:36:02.823

这在 JavaScript/jQuery 中非常简单。

但如果这是用于导航，这意味着当您显示新页面时需要更新它，我会在服务器的标记中执行此操作。

你没有说太多关于你是如何服务这个页面的。但是 ASP.NET WebForms 和 MVC 都允许您控制以多种不同方式提供的 HTML。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T18:37:58.773

您可以像这样设置所有 li 标签类，例如：

```
<li class="li">
 ... content of the tag
</li> 
```

并且在您的javascript中，您可以将“li”类添加到其他类的所有元素中：

```
$(".li").addClass("classYouWantToAdd"); 
```

在css文件中：

```
.li
{
  ... needed css for the class
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T18:41:32.270

这是另一篇文章，告诉您如何通过类名获取元素

[按类名选择 div](https://stackoverflow.com/questions/5149522/selecting-a-div-by-classname/5149557#5149557)

# android - Facebook 个人资料图片仅显示在模拟器中，而不显示在使用应用程序的设备中

> ID：12079277
> 
> 赞同：0
> 
> 时间：2012-08-22T18:32:10.333
> 
> 标签：android, facebook

我的应用程序使用 Facebook API 来获取朋友的个人资料图片只能在模拟器中运行，但是当我下载应用程序并在分离的设备上使用它时，无论我使用的是 WIFI、3G 还是 4G，个人资料图片都不会显示连接。这是我如何抓取要显示的图像。

```
 profilePic = "http://graph.facebook.com/" + friendId + "/picture?type=large";
 Drawable drawable = LoadImageFromWebOperations(profilePic);
 friendImageView.setImageDrawable(drawable); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T00:32:30.993

签署应用程序后，您需要在 Facebook 开发门户上更改密钥哈希。我不确定您是否删除了已签名或未签名的应用程序，但这可能是问题所在。

# ruby-on-rails - 如何在rails中使用类（css）选项创建自定义助手

> ID：12079282
> 
> 赞同：0
> 
> 时间：2012-08-22T18:32:20.600
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想创建返回链接到用户的头像的助手。

为此，我这样做：

```
<%= basic_avatar(user)%> 
```

和帮手：

```
def basic_avatar(user)
  link_to image_tag(user.avatar) ,'#', :title => user.name
end 
```

但是现在，我想添加一些选项，例如属性、类等。例如，我想这样做：

```
<%= basic_avatar(user, class: 'avatar')%> 
```

或者：

```
<%= basic_avatar(user, class: 'avatar', name: 'avatar')%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:36:56.073

只需在助手声明中添加一个选项哈希，并在制作图像标签时使用它。image_tag 调用中的最后一个参数是一个哈希，所以你基本上已经准备好了。

```
def basic_avatar(user, options={})
  link_to image_tag(user.avatar), "#", options.merge(:title => user.name)
end 
```

这使得选项是可选的，然后它们只是传递给`image_tag`，以及您想要的标题。

# java - 银河选项卡 7 加。两张SD卡。如何选择？

> ID：12079284
> 
> 赞同：1
> 
> 时间：2012-08-22T18:32:37.300
> 
> 标签：java, android, android-sdcard

我的应用程序在我的工作中用于进行销售。

这个应用程序可以远程更新自身（不使用 Google play）、更新其数据、发送信息等......

在某些时候，该应用程序会读取**大量图像**（数百 MB）。为避免下载此数据，每个设备中都包含一个包含**所有图像的微型 SD 卡。**

要读取 SD 卡中的图像，我使用“ **Environment.getExternalStorageDirectory()** ”。直到今天一切正常。

但是，新设备是**GalaxyTab 7 Plus**，它们是非常酷的机器，但是当我使用“ **Environment.getExternalStorageDirectory()** ”时，我得到了**内部 SD**路径。平板电脑识别出外部 SD 卡（如“ **extSdCard** ”），但我不知道如何访问它。

我尝试使用“ **vold.fstab** ”文件（按照这个问题的答案[如何在三星和所有其他设备上获得正确的外部存储？](https://stackoverflow.com/questions/5524105/how-could-i-get-the-correct-external-storage-on-samsung-and-all-other-devices)）但我不太信任......我的意思是......这东西有效吗？我检查了具有 android 3.0 的 GalaxyTab 10 和具有 android 4.0 的 GalaxyTab 7 Plus 的vold.fstab，它们完全不同......

所以，简而言之：我总是想要获取外部 SD 卡路径，如果不存在，则获取内部 SD 卡路径（如果存在）。我不能这样做，因为当我使用“Environment.getExternalStorageDirectory()”时，java 不允许我在两者之间进行选择

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T18:38:50.113

Android SDK，至少到 4.1，不支持多点外部存储的概念。因此，从目录的角度来看，没有记录和支持的方法可以让您访问此辅助卡。

该卡的内容可以`MediaStore`通过设备制造商添加的专有扩展由 索引。我尝试过的每台具有外部 SD 卡的设备似乎都可以做到这一点。因此，如果有一种方法可以让您以某种方式调整逻辑，而不用担心文件在哪里，而是通过 找到它们`MediaStore`，这应该可以跨设备工作。

除此之外，根据您链接到的问题的一些答案，您会陷入猜谜游戏。

# dependency-injection - 无法在 Websphere 8.5 中部署包含通过 aries 蓝图定义的骆驼路由的 osgi 包

> ID：12079286
> 
> 赞同：2
> 
> 时间：2012-08-22T18:32:52.040
> 
> 标签：dependency-injection, websphere, apache-camel, blueprint, aries

我创建了一个 .eba 文件（企业包存档），其中包含一个具有 apache 骆驼路由（Java DSL）的 osgi 包。骆驼上下文定义是通过一个蓝图 xml 文件完成的。当我尝试在 Websphere Application Server 8.5 中部署 .eba 文件时，出现以下异常：

org.apache.aries.application.modelling.ModellerException: CWSAL0126E: 建模捆绑包时发生异常 ib-base_0.0.1.SNAPSHOT: org.apache.aries.application.modelling.ModellerException: org.osgi.service.blueprint.container。 ComponentDefinitionException：不支持的节点命名空间：[http](http://camel.apache.org/schema/blueprint) ://camel.apache.org/schema/blueprint 。

我的蓝图xml文件如下：

```
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:camel="http://camel.apache.org/schema/blueprint"
xsi:schemaLocation="
http://www.osgi.org/xmlns/blueprint/v1.0.0      
http://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd
http://camel.apache.org/schema/blueprint http://camel.apache.org/schema/blueprint/camel- 
blueprint.xsd">

<camel:camelContext id="cbrContext" trace="false">
    <camel:packageScan>
        <camel:package>a.b.c.d</camel:package>
    </camel:packageScan>
</camel:camelContext>
</blueprint> 
```

我不太清楚为什么这在 Websphere 中失败了。在 Karaf 3.0.0-SNAPSHOT 中成功部署了相同的 .eba 文件。（此版本的 Karaf 使用 Aries Blueprint 版本 1.0.0）。

我猜在 Websphere 8.5 中使用了相同的版本或 Aries Blueprint 1.0.0 的分叉版本。

根据 OSGi 规范，自定义命名空间（如 camel:）的任何蓝图扩展处理程序都从 OSGi 服务注册表中的键 (osgi.service.blueprint.namespace) 中检索。value 元素告诉实际的命名空间 uri 。

例如：

```
<service interface="org.apache.aries.blueprint.NamespaceHandler">
    <service-properties>
        <entry key="osgi.service.blueprint.namespace" value="http://camel.apache.org/schema/blueprint"/>
    <entry key="osgi.service.blueprint.namespace" value="http://camel.apache.org/schema/blueprint/cxf"/>
    </service-properties>
    <bean class="org.apache.camel.blueprint.handler.CamelNamespaceHandler">
    </bean>
</service> 
```

我不太清楚为什么 IBM 不遵守这个规范。

另一个值得思考的有趣点是，当我尝试使用 Websphere Application Developer Tool 创建一个蓝图 .xml 文件时，它只显示了 4 个扩展，如下所示：

1.  IBM 蓝图扩展
2.  JPA 蓝图支持
3.  蓝图事务支持
4.  蓝图资源参考支持

我确保骆驼核心和骆驼蓝图包都部署在 websphere 的内部存储库中。

我尝试将 .eba 文件部署为资产。

不太确定，如果我错过了什么。如果有人能指出我正确的方向，我会很高兴。

此致，

斯里拉曼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T07:32:33.343

WebSphere 不支持自定义名称空间扩展（IBM 提供的除外）。主要原因是它在 Aries（蓝图容器）隔离运行时上运行。有两种选择

*   使用骆驼api代替蓝图标签
*   使用支持自定义命名空间扩展的其他容器（例如 Karaf）

卡拉夫是骆驼的友好容器。

# search - DNN 搜索：索引、索引内容和过滤器

> ID：12079287
> 
> 赞同：0
> 
> 时间：2012-08-22T18:32:53.213
> 
> 标签：search, dotnetnuke

我在弄清楚搜索功能如何为 DNN 工作时遇到了很多麻烦。首先，我只有网站的**管理员**凭据（我知道这已经限制了我可以使用搜索执行的操作）。

我将在网站上放置一个大型文档，并且我希望它能够使用允许过滤搜索的搜索功能进行索引。该文档将被放入常见问题模块并以树结构层次结构排列。关于索引特定模块如何工作以及如何让搜索功能与过滤器一起工作的任何想法？我下载了增强型搜索模块，但了解到这对使用过滤器进行搜索没有多大作用。

谢谢，任何线索将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T20:44:24.693

您正在寻找的东西是不可能与您注意到的元素组合的。（DNN + 常见问题模块）。

您可以使用一些选项来实现这一点，但它需要对整个安装进行更多控制。

1.  使用第三方模块，例如 Document Exchange，它允许您在文件中搜索/索引
2.  使用 DotNetNuke Professional Editions "Spider" 来爬取站点，而不是使用 CE 附带的常规索引过程。

# ruby-on-rails-3 - rails 3 - LoadError（无法加载此类文件 - zip/zip）

> ID：12079291
> 
> 赞同：15
> 
> 时间：2012-08-22T18:33:16.837
> 
> 标签：ruby-on-rails-3, rubygems, rubyzip

我正在使用 ruby​​zip 压缩 csv 文件，以便用户可以下载它。这在开发模式下完美运行。但是当我尝试在生产服务器（机架空间）上压缩文件时，我收到错误：LoadError（无法加载此类文件--zip/zip）。是路径问题吗？有人知道修复吗？

在我的代码中调用了此行的错误：需要'zip/zip'

我已经尝试过[这里](https://stackoverflow.com/questions/5997539/using-rubyzip-error-no-such-file-to-load-zip-zip)的解决方案，但没有帮助。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-09-05T07:26:42.587

我通过在 Gemfile 中指定 gem 版本 0.9.9 解决了这个问题：

```
gem 'rubyzip',  "~> 0.9.9" 
```

使用 ruby​​zip (1.0.0) 会导致错误。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-10-21T23:06:01.637

将 ruby​​zip 升级到 1.0.0 时，更改`require 'zip/zip'`为`require 'zip'`.

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-04-27T03:12:06.143

在将 roo 添加到 Rails 项目后，我遇到了这个问题。

Roo 需要新界面，其他东西（其他一些 gem）正在使用旧界面 - 所以这些答案中的大多数都不起作用（无法降低 ruby​​zip 的版本，不推荐使用 ruby​​zip2，不需要 zip/zip在我的项目中）。

对我有用的是 cassio-s-cabral 对[ruby​​zip github](https://github.com/rubyzip/rubyzip)页面的回答。

```
gem 'rubyzip', '>= 1.0.0' # 将加载新的 ruby​​zip 版本
gem 'zip-zip' # 将加载旧 ruby​​zip API 的兼容性。

```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-29T13:06:23.193

我遇到了同样的问题：在“需要'zip/zip'”代码上抛出错误，[这篇文章](https://stackoverflow.com/questions/5997539/using-rubyzip-error-no-such-file-to-load-zip-zip)的解决方案也没有帮助。

经过长时间的研究，我发现问题在于我的“require 'zip/zip'”语句是在单独的

```
lib/exporters/package_exporter.rb 
```

文件，并且由于某种原因，默认情况下，生产中的“lib”文件夹中不处理“require”语句。

当我将“需要'zip/zip'”移到我的开头时

```
app/controllers/packages_controller.rb 
```

问题解决了！

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-08-30T16:00:29.430

我在 active_support 上遇到了类似的问题，只是将“zip”gem 添加到我的 Gemfile 中，它运行良好

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-01-30T09:42:51.370

我正在使用**ruby​​zip2** gem 来解决这个问题

```
gem 'rubyzip2' 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-08-14T23:20:07.093

对我有用的是安装 2 个 gem：
`gem install rubyzip gem install zip` 并在脚本中放置
`require 'rubygems' require 'zip/zip'`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-12-12T14:13:56.737

在他们的[github 页面](https://github.com/rubyzip/rubyzip)中解释了要做什么。

Rubyzip 界面变了！！！无需删除类名中的“zip/zip”和 Zip 前缀。

如果您对任何需要旧版本 ruby​​zip 的第三方 gem 有疑问，您可以使用下一个解决方法：

```
gem 'rubyzip', '>= 1.0.0' # will load new rubyzip version
gem 'zip-zip' # will load compatibility for old rubyzip API. 
```

# javascript - Googlechrome 上的 JavaScript JSONP

> ID：12079293
> 
> 赞同：0
> 
> 时间：2012-08-22T18:33:23.180
> 
> 标签：javascript, api, google-chrome, jsonp

我有一个代码，来自这里：

[http://www.onlinesolutionsdevelopment.com/blog/web-development/javascript/jsonp-example/](http://www.onlinesolutionsdevelopment.com/blog/web-development/javascript/jsonp-example/)

我在 Firefox 上用两个域对其进行了测试，它运行良好。但是当我在谷歌浏览器上尝试它时，我收到了这个警告：

> 资源解释为脚本，但使用 MIME 类型 text/html 传输：

这个错误：

> 未捕获的语法错误：意外的令牌 <"

我还没有在IE上尝试过，但这没什么大不了的。我无法弄清楚似乎是什么问题，而且我对这种东西有点陌生。

注意：我不想使用 JQuery

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:30:43.367

在花了一些时间之后，我发现我的问题不在我的脚本上，而是在我的 freewebhosting 添加的脚本上，然后我尝试禁用他们的脚本，它工作正常，但无论如何谢谢你们。

# mysql - 升级到 Mountain Lion 后无法访问 MySQL 数据库（使用 MAMP）

> ID：12079298
> 
> 赞同：1
> 
> 时间：2012-08-22T18:33:39.630
> 
> 标签：mysql, macos, phpmyadmin, mamp

我最近从 Snow Leopard 升级到了 Mountain Lion，这样做让我的整个本地开发环境陷入混乱。我通过最终安装 MAMP Pro 解决了我的大部分问题（我之前使用的是 Apple 提供的“本机”方法）。我现在遇到的问题是我仍然无法访问我的旧 mysql 数据库。我可以通过 MAMP 中的 phpmyadmin 查看“新”数据库，但我有想要处理的旧项目。

我的旧数据库仍然存在`/usr/local/mysql/data`，但它们不会出现在 phpmyadmin 中，即使我通过终端查询（在登录到 mysql 并使用`show databases;`命令后）。我确信答案只涉及一些简单的命令，但我主要是前端人员，我一生都无法在互联网上找到解决方案。

谢谢。

### 更新：

仅供可能遇到此问题（或类似问题）的其他任何人参考。为了进行转储，我最终不得不关闭 MAMP 的 MySQL 实例，并启动旧版本（通过系统偏好设置）。否则我会收到 1049 错误（“未知数据库”），我想是因为它正在查看新数据库？真的不符合我的口味，如果你不能告诉...

无论哪种方式，现在看起来 MAMP 版本是否处于活动状态实际上并不重要。也许我只需要重新启动 MySQL 的所有实例？说真的，不知道，但现在一切都很好......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T18:49:17.207

在终端中尝试此操作以转储旧数据库（替换 [文本]）：

```
/usr/local/mysql/bin/mysqldump -u root -p[pass] [db] > [filename].sql 
```

获得 sql 文件后，您可以使用 MAMP 中的 PHPMyAdmin 将其重新导入。

# reporting-services - 将 SSAS 用作最终用户临时报告解决方案的担忧

> ID：12079304
> 
> 赞同：3
> 
> 时间：2012-08-22T18:33:51.750
> 
> 标签：reporting-services, ssas

我目前正在评估在我的组织内使用的报告解决方案，并且解决方案的要求之一必须是“临时报告”，并被定义为“给定现有报告，用户将被允许修改报告的数据点，并且，此外，保存报告以供以后查看'。

我使用 SSAS 和 SSRS 完成了一份基本报告；这确实有效，但我发现需要打开报表生成器，指定应该使用的多维数据集等等，更不用说报表生成器（SSRS2K5）非常简单。将查看这些报告的人当然不是技术人员，我担心这个过程将完全不堪重负。我确实找到[了这个组件](http://www.datadynamics.com/products/ActiveAnalysis/Overview.aspx)，而且它对用户更加友好，因为数据源可以在运行时动态设置，用户只需关注他们想要查看的数据。

除了使用 Report Builder 连接到多维数据集并从那里开始之外，SSAS/SSRS 是否提供任何其他方法用于临时报告？有谁知道或使用过他们可能推荐的任何类似于 Active Analysis 的产品？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T18:49:21.510

Excel 2007 和 2010 实际上具有连接能力，可以即席查询和分析来自 SSAS 多维数据集的数据。Excel 具有许多允许与多维数据集交互的功能，包括使用数据透视表和数据挖掘插件来分析数据。

这里的简单示例： [http ://www.mssqltips.com/sqlservertutorial/2016/using-excel-and-creating-a-pivot-table-report/](http://www.mssqltips.com/sqlservertutorial/2016/using-excel-and-creating-a-pivot-table-report/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T19:24:32.243

Sharepoint 模式下的 SSRS2012 Power View（很快在 Excel 中） - 概述在这里：[http ://social.technet.microsoft.com/wiki/contents/articles/3726.power-view-overview-en-us.aspx](http://social.technet.microsoft.com/wiki/contents/articles/3726.power-view-overview-en-us.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T00:58:29.027

不太清楚“用户可以修改报告的数据点”是什么意思，但使用 Excel 2007 / 2010，您可以使用假设分析功能来修改数据透视表中的数据。您还可以将其与 Analysis Services 写回功能结合使用，以启用一些非常酷的数据建模功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T02:41:03.573

如果您正在寻找我所说的“探索性分析”（即您不知道您在分析中要寻找什么），那么像我们的 ActiveAnalysis 组件、PowerPivot 或 Tableau 这样的产品都是很好的工具（请注意，主要区别在于我们的 ActiveAnalysis 是一个开发人员组件，您可以廉价地嵌入到应用程序中，而另外两个是严格的最终用户工具）。

但是，如果您的用户希望能够创建“运营报告”，或者他们可能希望自定义现有报告，那么这些可能不是理想的工具。我们实际上专门为这种类型的场景创建了[ActiveReports Server 。](http://www.activereportsserver.com/)它是一种拖放式业务用户友好的临时报告工具，听起来它可能更适合您正在处理的“非技术人员”。它不依赖于 SSAS，并且可以在 Web 浏览器中运行，因此无需部署。

```
Scott Willeke
Product Manager | ActiveReports Server
GrapeCity 
```

# dynamics-ax-2009 - 报告不会批量运行

> ID：12079307
> 
> 赞同：3
> 
> 时间：2012-08-22T18:34:13.857
> 
> 标签：dynamics-ax-2009, x++, axapta

我正在尝试使用 Microsoft Dynamics AX 2009 中的批处理运行未修改的报告。我已经设置了配置，并设置了 AOS 打印机来运行报告。当我向批处理队列发送报告时，它在开始执行时立即出错。

错误如下：

> 执行代码时出错：SysGlobalCache 对象未初始化。
> 
> (S)\Classes\SysGlobalCache\get (S)\Classes\ClassFactory\reportRunClass - 第 14 行 (S)\Classes\RunBaseReport\makeReportRun - 第 19 行 (S)\Classes\RunBaseReport\unpack - 第 31 行 (S)\Classes \RunbaseReportStd\unpack - 第 26 行 (S)\Classes\BatchRun\runJobStatic - 第 27 行

我尝试过运行三种不同的报告：客户、供应商和采购线。我每次都得到同样的错误。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T20:17:53.203

我们在工作中遇到了类似的问题，但不想依赖于必须设置之前建议的传统批处理方法。幸运的是，在我们的案例中，并不要求将报告实际打印成硬拷贝。因此，您可以将报告运行到文件（ASCII、PDF 等）中，而不是尝试将报告发送到打印机。

批处理服务器可以处理这些，但由于您需要指定保存文件的位置，因此请注意以下事项：

请务必使用您希望保存到的路径的 UNC 文件路径，否则您可能会收到以下错误：“目标文件必须为 UNC 格式。”

还要确保已应用必要的权限以允许写入该位置，否则您会收到错误消息，例如：“无法打开文件”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T19:32:28.383

我认为问题在于批次正在尝试处理服务器代码，并且报告旨在运行客户端。在此 URL 尝试解决方法：

[http://blogs.msdn.com/b/emeadaxsupport/archive/2009/06/16/how-to-run-client-batches-on-ax-2009.aspx](http://blogs.msdn.com/b/emeadaxsupport/archive/2009/06/16/how-to-run-client-batches-on-ax-2009.aspx)

要点是，您创建一个名为“客户端”或其他名称的批处理组，将其分配给批处理服务器，然后在该组上运行**旧**批处理。这可能对你有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T15:02:07.483

另一种选择是将报告更改为在服务器上运行。您需要检查菜单项并确保它已设置为在服务器上运行。它是菜单项上的一个属性。

当您向批次添加报告时，请查看批次查询屏幕。选择批处理作业 - 然后单击“任务”。如果任务显示 'Run Location' = client，它将不会在基于服务器的批处理框架中运行。

抢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T10:58:52.307

我遇到了类似的错误。我重新启动了 AOS 和 SQL 报告服务，一切正常。希望这可以帮助。

# svn - 来自一个 SVN 项目的 2 个产品 - 如何只为一种产品保留某些更改？

> ID：12079312
> 
> 赞同：3
> 
> 时间：2012-08-22T18:34:20.193
> 
> 标签：svn, configuration, merge, branch, project

所以我们有应用程序 Pluto 和应用程序 Goofy - 两者都使用相同的 SVN 项目。实际上只有一点配置差异。

现在我面临这个问题：来自 Pluto 的客户想要一些新的变化 - 详细地说，他想要为 Javascript 和我们在 JSF 环境中使用的一些 xhtml 标签添加功能。基本上，这是他要求的一种改进 javascript 的方法 - 旧功能必须仍然存在。但是：新功能可能会破坏 Goofy 的某些部分，因为 Goofy 是一个更大的应用程序并且难以测试。实际上，Goofy 是 Pluto 的超集——例如，Goofy 可以做 Pluto 所做的任何事情——但实际上它只是为了测试，最终的 Product 驻留在 Pluto 中。

需要更改的文件是相当静态的，我认为对其中一个文件的最后一次更改是半年多前。在过去的两年里，肯定不会超过几个变化。

我想到的是为 Pluto 创建一个分支，在其中实现对 javascript 和 xhtml 标签的所有更改。开发人员将在主干上开发，我将始终在部署之前合并来自分支的更改（这可能会自动完成）。但是：本地开发有一个问题——因为是trunk，新功能只在分支上，所以在本地为Pluto开发时，新功能将不可用。

另一种方法是使用例如如果 application==Goofy 加载 javascript Goofy，反之亦然。

或者最后 - 尝试和错误，例如合并所有更改并修复错误:-)

你们会如何决定这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T18:41:40.487

我会使用不同的分支并接受合并带来的不便，而不是像`if application==Goofy`一周中的任何一天那样使用特殊技巧。当您的程序的复杂性增加并且可能添加更多应用程序时，后一种实现肯定会咬住您。

另一种可能更适合您的方法是重构您的代码并将应用程序的核心部分分解为它自己的项目。然后让每个应用程序分别引用核心项目。例如，核心部分可能包含业务逻辑，而 Goofy/Pluto 处理 GUI 和/或某些核心部分的特殊实现。您的 SVN 树可能类似于：

```
trunk
  |--- Core stuff
  |--- Project Pluto
  |--- Project Goofy 
```

一种更复杂但非常灵活的方法是将核心内容移动到自己的存储库中。然后，您可以使用`svn:externals`将核心部分包含到您的项目中。这将使您能够将 Pluto 和 Goofy 锁定到 Core Stuff 的某些修订版中。因此，您可以更新核心内容以添加一个项目所需但对另一个项目有害或不受欢迎的更多功能。我已经在行动中看到了这一点，并且效果很好。我们有非常过时的遗留代码，但即使在遗留项目的开发停止后核心部分已经升级多年，但仍然可以编译和工作。

```
Core trunk
  |--- Core stuff (rev 123)

Application trunk
  |--- Project Pluto (Core rev 111)
  |--- Project Goofy (Core head) 
```

如果您想使用最后一个选项，博客文章[svn:externals应该会有所帮助。](http://mwop.net/blog/132-svnexternals.html)

# android - 调用 getApplicationContext() 时调用的代码在哪里？

> ID：12079313
> 
> 赞同：10
> 
> 时间：2012-08-22T18:34:31.373
> 
> 标签：android

我只是出于兴趣而研究了Android[资源。](http://android.googlesource.com)我发现这`Context`是一个带有抽象方法的抽象类：

```
public abstract Context getApplicationContext(); 
```

导致方法实现的`ContextWrapper.java`扩展：`Context.java``getApplicationContext()`

```
 @Override
    public Context getApplicationContext() {
        return mBase.getApplicationContext();
    } 
```

但是是对在 的构造函数中初始化`mBase`的类型的对象的引用：`Context``ContextWrapper`

```
public ContextWrapper(Context base) {
    mBase = base;
} 
```

所以这个`mBase`引用是指`abstract`类？好吧，我只是不明白当您`getApplicationContext()`从`Activity`.

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-22T18:46:59.847

这是一个有趣的多态性例子。

只要您的`base`extends `Context`，它就必须提供 的实现`getApplicationContext()`，在这种情况下，`ContextWrapper`就是您在此处提供的代码。有这个实现，[在`ContextImpl`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/app/ContextImpl.java#ContextImpl).

阅读您提供的代码时，请务必注意几件事： `ContextWrapper`它本身 extends `Context`，但它也需要 a`Context`作为输入（可以是 a `ContextWrapper`，或 a `Service`，或 an `Application`，或 an `Activity`）。 `ContextWrapper`不在乎是哪一种；它只知道他们有一个方法`getApplicationContext`，并且它想在被问到时调用该方法。（例如，它可以被传递 another `ContextWrapper`，但因为 said在其构造函数中`ContextWrapper`也需要 a `Context`，所以只会添加另一层嵌套。）

`Application extends ContextWrapper`类调用，这`super(null)`意味着如果以这种方式保留它`getApplicationContext()`会抛出 a ——但是，它也可以由设置，这就是它变得有趣的地方。`NullPointerException``ContextWrapper``attachBaseContext(Context)`

两者`Activity`都有`Application`方法`attach(Context [...other stuff])`。他们每个人都`attachBaseContext()`使用传入的`Context`.

*   在`Instrumentation`课程中，您会发现创建[`android.app.Instrumentation.newApplication()`](http://grepcode.com/search/usages?type=method&id=repository.grepcode.com%24java%24ext@com.google.android%24android@4.1.1_r1@android%24app@Instrumentation@newApplication%28java.lang.ClassLoader,java.lang.String,android.content.Context%29&k=u)a`ContextImpl`并将其传递给`Application`.
*   在`ActivityThread`课堂上，您会发现[`handleBindApplication`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/app/ActivityThread.java#2008)which 创建了作为其 root`ContextImpl`传递给的a 。`Activity``Context`
*   在`LoadedApk`课堂上，您会发现`makeApplication`which 创建了一个`ContextImpl`传递给一个`Application`. [这里](http://grepcode.com/search/usages?type=method&id=repository.grepcode.com%24java%24ext@com.google.android%24android@4.1.1_r1@android%24app@LoadedApk@makeApplication%28boolean,android.app.Instrumentation%29&k=u)是它被称为的地方。

因此，在一天`mBase`结束时，通常以`ContextImpl`.

我在发现所有这些时查看了潜在有用的链接：

*   [的用法`attach`](http://grepcode.com/search/usages?type=method&id=repository.grepcode.com%24java%24ext@com.google.android%24android@4.1.1_r1@android%24app@Activity@attach%28android.content.Context,android.app.ActivityThread,android.app.Instrumentation,android.os.IBinder,int,android.app.Application,android.content.Intent,android.content.pm.ActivityInfo,java.lang.CharSequence,android.app.Activity,java.lang.String,android.app.Activity.NonConfigurationInstances,android.content.res.Configuration%29&k=u)
*   [的用法`attachBaseContext`](http://grepcode.com/search/usages?type=method&id=repository.grepcode.com%24java%24ext@com.google.android%24android@4.1.1_r1@android%24content@ContextWrapper@attachBaseContext%28android.content.Context%29&k=u)

# tomcat - Tomcat 使用包含主机名的文件进行响应

> ID：12079315
> 
> 赞同：0
> 
> 时间：2012-08-22T18:34:40.210
> 
> 标签：tomcat

十多年后，我正在重温我的 tomcat。我下载并安装了 Tomcat 7，将其配置为在端口 9999 上运行。

从 Chrome 中，如果我点击该服务器上的 URL，Chrome 只会下载一个仅包含主机名的文件，而不是实际加载页面。

我错过了一些非常基本的东西。任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T23:42:55.140

这就是 Chrome 的行为。它根本与Tomcat无关。你可以停止 Tomcat，它仍然会发生。您可能需要指定 http://。有些浏览器会为您假定它，有些则不会。

# scala - 在 Play 中访问自定义 PartHandler 中的会话信息！框架 2.0

> ID：12079316
> 
> 赞同：0
> 
> 时间：2012-08-22T18:34:56.067
> 
> 标签：scala, playframework-2.0

为了实现流式上传，我编写了一个自定义 PartHandler（[此处为 Thread](https://stackoverflow.com/questions/12066993/uploading-file-as-stream-in-play-framework-2-0)）。

我现在需要访问存储在 play 中的值！PartHandler 中的会话。我怎样才能做到这一点 ？

代码示例：

```
 def uploadFile() = 

    Action( parse.multipartFormData(myPartHandler) ) 
      {  request => 
           request.session.get("myValue") // <-- Recovering value is fine here
           Ok("Done") }

    def myPartHandler: BodyParsers.parse.Multipart.PartHandler[MultipartFormData.FilePart[Result]] = {
      parse.Multipart.handleFilePart {

        case parse.Multipart.FileInfo(partName, filename, contentType) =>

         // ** Need to access a value in session here **
         //request.session.get("myValue")...

        // Handle part ... 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:11:51.343

[在其他玩家](https://groups.google.com/forum/#!starred/play-framework/vKGOgzb-FbE)的帮助下！[framework google group](https://groups.google.com/forum/#!starred/play-framework/vKGOgzb-FbE)，这里是如何访问自定义 partHandler 中的请求。

```
//Create a body parser
val myBodyParser = BodyParser { request => 
    parse.multipartFormData(myPartHandler(request)).apply(request)
}

 def uploadFile() = Action(myBodyParser) 
      {request =>Ok("Done")}

 def myPartHandler(request: RequestHeader) : BodyParsers.parse.Multipart.PartHandler[MultipartFormData.FilePart[Result]] = {
    parse.Multipart.handleFilePart {
      case parse.Multipart.FileInfo(partName, filename, contentType) =>         
        println(request.session.get("myValueKey")); 
```

# java - 传递对象引用，没有得到预期的结果。

> ID：12079318
> 
> 赞同：1
> 
> 时间：2012-08-22T18:35:05.553
> 
> 标签：java, object, static

关于将对象引用传递给静态方法 m1() 为什么它不会变为 null 以及为什么最后一条语句没有给出错误。输出是 X

```
 class I {
        private String name;
        public String name() {            
            return name;
        }
        public I (String s) {            
            name = s;            
        }
    }

    class J {
        public static void m1 (I i){
            i = null;
        }
        public static void main (String[] arg)
        {
            I i = new I("X");
            m1(i);
            System.out.print(i.name());
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T18:36:25.923

Java 是[按值传递的](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)（专门阅读链接中的第二个答案）

`I i`范围`i`仅限于方法`m1`。

在执行中，它看起来像：

```
`I i` in `m1()` points to `null` reference

I i method reference still points to `new I("X");` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T18:37:40.050

Java 是按值传递的，因此范围`i`仅限于 m1()

```
public static void m1 (I i){ // i is copied from i which is in main method but it is another variable whose scope lies within m1() only

    i = null;  // original i in main lies in main() method scope

} 
```

如果您`i`在方法 m1() 中更改名称，混淆会减少，例如：

```
public static void m1 (I iObj){ 
    iObj = null;  // i in main() method still points to Object

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T18:38:00.580

Java 仅使用*按值传递*。更改`i`within的值`m1` *只会*更改该参数的值。它对内的变量没有*任何*作用。`i``main`

可能会让你感到困惑的——它肯定会让很多其他人感到困惑——虽然参数是按值传递的，但如果参数的类型是一个类，那么那个值就是一个*引用*……实际上`i`变量的值是每个案例都是一个参考。该引用仍然按值传递 - 参数的值直接复制为参数的初始值。但是，如果不是更改参数本身，而是更改参数值*所指*的对象，那就是另一回事了：

```
void foo(StringBuilder builder) {
    builder.append("Hello");
}

void bar() {
    StringBuilder x = new StringBuilder();
    foo(x);
    System.out.println(x); // Prints Hello
} 
```

有关更多详细信息，请参阅[有关将信息传递给方法或构造函数的 Java 教程](http://docs.oracle.com/javase/tutorial/java/javaOO/arguments.html)。

# file - lupdate 不创建 .ts 翻译文件

> ID：12079327
> 
> 赞同：0
> 
> 时间：2012-08-22T18:35:46.743
> 
> 标签：file, qt, localization, translation, qt-creator

所以，我遇到了一个问题。当我在 Qt Creator（工具 -> 外部 -> 语言学家 -> 更新翻译（lupdate））上使用 lupdate 时，不会创建翻译文件。

我在 .pro 文件中添加了“TRANSLATIONS +=”

```
TRANSLATIONS    +=  localization/localization_es.ts 
```

但仍然没有创建翻译文件。项目文件夹中存在本地化/路径，但仍然没有创建任何文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:19:35.660

项目是 4.8.1，由于某种原因 lupdate 和 lrelease 不起作用。因此，我使用 cmd 使用 4.7.4 二进制文件制作了 .ts。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-28T10:24:11.637

要使其在 4.8.1 中工作，只需使用绝对路径运行 lupdate 和 lrelease。我已经从计算机上的绝对路径运行它 C:\QtSDK\Desktop\Qt\4.8.1\mingw\bin\lupdate myproject.pro 和 C:\QtSDK\Desktop\Qt\4.8.1\mingw\bin\lrelease翻译_js.ts。

它会第一次要求一些dll文件，只需将所需的文件放在同一路径或系统文件夹中。

您的 lupdate 和 lrelease 将从 Qt 创建者开始工作。

* * *

谢谢

# ruby-on-rails - 如何存储数学方程式/符号并在网络上显示它们？

> ID：12079328
> 
> 赞同：3
> 
> 时间：2012-08-22T18:35:50.630
> 
> 标签：ruby-on-rails, database, math, web

我想建立一个网站，人们可以在其中创建带有问题和答案的测试。我希望人们可以在文本框中输入数学方程式/符号和方程式或类似的东西，它们将存储在数据库中，它也像图像一样显示在网络上。

我的想法是我将以乳胶语法存储文本用户输入并存储它，然后使用 MathJax 显示它，我不知道它是否可能或会有更好的方法来做到这一点。

一个问题是用户输入将有带有“数学文本”（乳胶）的普通文本，那么我怎样才能将它们分开并只保存乳胶文本？请给我一些想法或建议解决它的方法，谢谢。

p/s：我正在用 ruby​​ on rails 构建这个网站，我找到了 gem mathjax-rails，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T18:41:41.053

考虑建立[Gollum](https://github.com/github/gollum)。它是 Github 使用的 wiki 系统的后端，并且与 LaTex 方程配合得相当好（目前它们是一个非常恼人的错误，小于/大于符号，但已记录在案并且可能会在下一个版本中修复）。今年夏天我开始使用它在数学课上做笔记，这里是一整页渲染的 LaTex 方程笔记的[示例](https://github.com/KurtRudolph/math461/wiki/lecture_03)。

**注意：**您必须登录到 Github 才能渲染方程式。

# php - 我会通过规范化此表来提高性能吗？

> ID：12079329
> 
> 赞同：1
> 
> 时间：2012-08-22T18:35:52.080
> 
> 标签：php, mysql, join, database-normalization

我正在我的服务器上运行一种论坛修改代码。在我的数据库中，我有一个名为 的**巨大**表`core`，它基本上包括所有管理员可编辑的设置，其中有很多。我的问题是，我应该标准化吗？

我创建了一个小提琴来向您展示这张表有多大：[http ://sqlfiddle.com/#!2/f4536/1](http://sqlfiddle.com/#!2/f4536/1)

您会看到一些名为`gear_notifications`、`gear_bank`等的列`gear_*`。这些表示某个系统是否已打开。例如，如果`gear_bank=1`，则银行系统已打开。目前，在`__construct`我的数据库文件中，我运行以下查询：

```
$settings = mysql_query("SELECT GROUP_CONCAT(d.domain) AS domains, GROUP_CONCAT(d.zb) AS zb_info, c.* FROM core c JOIN domains d ON d.cid = c.id WHERE c.id ='$cid' LIMIT 1"); 
```

忽略`JOIN`你可以马上看到这里的问题；查询返回`core`表中的每个字段，无论相应的系统是否打开。例如，如果`gear_bank=0`，查询仍将返回`bank_name`,`bank_history_perpage`等`bank_*`。虽然这不会对代码的运行方式造成任何物理问题（因为它可以忽略任何不需要的数据），但我更喜欢它没有不必加载该数据。

我会更好地创建一个名为的表`core`，其中包含所有`gear_*`值，然后为它们的相应值创建相应的表（`core_bank`等`core_*`）吗？

我一直在查询这个（糟糕的双关语，对不起！），我只是不知道这是否会为我的代码提供性能提升。请注意，上述查询将在每个页面上运行。

如果我要恢复到新系统，即多个表，我将如何获得我需要的所有信息？我不想运行一个查询来`core`确定打开了哪些系统，然后在所有相应的表上运行一个额外的查询。我更喜欢一个查询，它`JOIN`是基于`gear_*`in值的所有必要表`core`。那可能吗？

我还没有发布这个论坛修改，所以我可以在没有任何实际影响的情况下进行尽可能多的更改`:)`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T19:19:55.507

如果将核心拆分为多个表，则可以使用 NULL 来指示特定条目是否具有特定系统的信息。然后连接将按预期工作。

但是，您的表实际上并没有那么大，而且您是否会通过拆分它来真正注意到应用程序级别的任何速度改进是值得怀疑的。

如果您不需要查询单个列，那么只需使用一个 TEXT 列，将所有属性放入一个数组中，然后将该数组序列化到文本列中。

# c# - 在asp.net c#中创建简单的cookies

> ID：12079332
> 
> 赞同：8
> 
> 时间：2012-08-22T18:36:04.747
> 
> 标签：c#, asp.net

我的应用程序需要存储 cookie。当用户登录时，我想确保如果 cookie 不存在，则创建它并存储值，但如果它确实修改了它。

```
if(cookieExist)
 {
    cookiename = "value";
 }
else
 {
   create a new cookie 
   then store the value;
 } 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-22T18:41:36.203

您必须使用`Request.Cookies`来获取 cookie 值并`Response.Cookies`添加 cookie

```
 string cookievalue ;
 if ( Request.Cookies["cookie"] != null )
 {
    cookievalue = Request.Cookies["cookie"].ToString();
 }
 else
 {
    Response.Cookies["cookie"].Value = "cookie value";
     Response.Cookies["cookie"].Expires = DateTime.Now.AddMinutes(1); // add expiry time
 } 
```

# java - .jar 文件是否受读取/编辑保护？

> ID：12079344
> 
> 赞同：1
> 
> 时间：2012-08-22T18:36:43.233
> 
> 标签：java, security, file, jar

我目前正在用java创建一些小的框架应用程序。

当我们用 netbeans 清理构建的主项目时（因此创建了一个 jar 文件），它会创建一个安全的 jar 文件吗？

我的意思是我的包含一些带有键的表，我不希望未来的用户能够看到这些键日志。那么代码完全隐藏了吗？如果没有，请问我们如何“保护” jar 文件？

提前感谢您的帮助，如果我不够清楚，请告诉我。

编辑：我目前在 Windows 7 下

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T18:39:01.860

它根本没有受到保护。`.class`它只是-es 和其他资源、元数据等的存档（基于 ZIP） 。

[您可以尝试使用Proguard 之](http://proguard.sourceforge.net/)类的工具来混淆 java 字节码。这会给你一些保护，也就是说 - 它会使逆向工程变得更加困难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T18:51:20.153

我的建议是在 jar 之前对包含敏感信息的文件进行加密。让应用程序在需要使用数据时解密它们。使用看似随机的加密密钥，这样人们就不太可能通过列出类文件中的字符串来弄清楚它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T15:43:11.613

尽管这并不禁止某人查看 jar 文件的内容，但有一些机制可以提供篡改证据并禁止某人创建一个附加 jar 来将方法附加到您的包中。

这称为[签字](http://docs.oracle.com/javase/tutorial/deployment/jar/signing.html)和[盖章](http://docs.oracle.com/javase/tutorial/deployment/jar/sealman.html)。

# javascript - 哪个更贵？显示-隐藏 dom 节点或创建-删除 dom 节点

> ID：12079345
> 
> 赞同：3
> 
> 时间：2012-08-22T18:36:46.070
> 
> 标签：javascript, jquery, dom

哪一个更贵？

1.  显示隐藏dom节点或
2.  创建-删除dom节点

假设我们只需要操作 1 个 dom 或几个（少于 5 个）节点，并且应用程序在桌面上运行。

对于少数人来说，这甚至有关系吗？移动应用程序怎么样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T18:40:56.420

仅对于少数几个元素，两者之间的差异将非常小——绝对可以忽略不计。

话虽如此，**除非您使用 jQuery`.show()`和`.hide()`**. jQuery`.hide()`比任何其他隐藏元素的方法都要慢得多。如果您想知道原因，请阅读“为什么`.hide()`速度较慢？” 我的答案底部的部分。

无论如何，您应该根据最适合您需求的方法做出决定。如果您不再需要该元素，也可以将其删除。如果您只是暂时或在某些情况下不想隐藏它，请显示/隐藏它。

但是，如果您想自己测试一下，[那就去吧](http://jsperf.com/remove-vs-hide/10):)

* * *

## 为什么更`.hide()`慢？

jQuery`.hide()`与 using 基本相同，`.css('display','none')` **只是**它缓存了`display`样式的先前值，因此当您调用 时`.show()`，您的元素将正确还原为看起来与原来完全相同。如果它有`display:inline`，它会在重新显示时拥有它。如果它有`display:block`，它就会有`display:block`。这可能非常有用。

这是一个例子：

假设我们有一个 id="myDiv" 的 div，它在外部文件中的样式为`display:inline`. 我们想隐藏它。

通过这种`.css`方式，我们会这样做：

```
$('#myDiv').css('display','none'); 
```

然后稍后某个时候，您的一位开发人员想要在某些条件下再次展示它。他不知道该`display`属性应该是什么，因为 css 位于某个外部文件中。大多数开发人员默认使用`display:block`，如下所示：

```
$('#myDiv').css('display','block'); 
```

但是在这种情况下，我们会得到完全不同的风格，因为它最初是`inline`. 聪明的开发人员可以毫无问题地找出问题所在，但并非所有开发人员都很聪明:)

使用`.show()`and `.hide()`，这成为一个非问题。我们不在乎它*曾经*有什么风格。我们只是希望它回到原来的位置，而这正是它要做的。

# javascript - 视图和路由器的骨干关系

> ID：12079348
> 
> 赞同：1
> 
> 时间：2012-08-22T18:36:54.047
> 
> 标签：javascript, backbone.js

我认为在数据驱动的编程范式中，路由器和视图应该相互隔离，它们只能通过模型​​更改来相互通信，它们都订阅了模型更改。

但是，在线的各种教程都以不同的方式执行此操作。我已经看到在路由器的初始化方法中实例化视图的代码，从而为路由器提供了访问视图的方法。我还看到了将路由器传递给视图的代码，以便视图可以监听路由器路由事件的变化。

我不相信这两种方法都是正确的，因为它打破了关注点的分离。由于我是 Backbone 的新手，有经验丰富且知识渊博的人可以确认吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T22:33:25.087

我没有看到使用路由器实例化视图有任何问题，实际上是我使用的工作方式。路由器检测到一个新的 URL 并*分离*任何未使用的视图并*实例化*请求的视图。

将 Router 引用传递给 View 可能会更丑陋，更不用说为了保持引用在 View 和 SubView 之间传播而付出了太多努力。

但另一方面，视图必须能够向路由器发送信号以更改*导航*，因此我也采用简单的方法，使路由器对我的应用程序中的所有元素全局可见，我可以`App.router.navigate()`从任何视图调用而无需请记住明确传递引用。这个决定可以辩护，因为在任何 Backbone 应用程序中只允许一个路由器实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:41:22.757

在一些项目中，我使用了一个全局事件调度器，它将路由事件传递给视图。

```
window.Dispatcher = _.extend({}, Backbone.Events); 
```

在路由器中，您可以绑定到`'all'`捕获事件的`route:*`事件：

```
initialize: function() {
    this.bind('all', this.onRoute);
},
onRoute: function(route) {
      Dispatcher.trigger(route);
} 
```

在您的视图中，您可以绑定到 Dispatcher 事件并对路由更改做出反应：

```
initialize: function() {
    Dispatcher.on('route:index', this.onIndex, this)
} 
```

这类似于在路由更改时更改模型，但我觉得这更易于管理，并且不需要将路由器传递给视图。不确定这是否是正确的方法，但是 Backbone 再次使您能够以多种不同的方式做事。

# php - PHP 和 Jquery 集成

> ID：12079351
> 
> 赞同：0
> 
> 时间：2012-08-22T18:36:59.093
> 
> 标签：php, javascript, jquery

我正在尝试创建一个功能，当用户单击按钮（Jquery）时，它会在当前页面上打开一个功能（显示图像），即使用户单击超链接并打开另一个页面，我也希望该功能保持打开状态直到用户再次单击相同的按钮将其关闭。

按钮存在于每个页面中，可以打开和关闭该功能。我正在使用 Jquery 和 PHP。任何想法如何实现这一目标？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:41:02.717

您可以为此设置 cookie，cookie 在那里表现为全局变量，因此您可以检查 cookie 值是否为“on”，程序是否应显示图像，隐藏所有图像。

# windows - 工头检查简单的 node.js Procfile 中的“未定义进程”

> ID：12079356
> 
> 赞同：3
> 
> 时间：2012-08-22T18:37:14.823
> 
> 标签：windows, node.js, heroku, foreman

使用此示例 procfile：

```
web: node app.js 
```

运行命令时出现错误

```
foreman check 
```

我得到的错误是：

```
ERROR: no processes defined 
```

不确定这是否重要，但我在 Windows 8 上运行它。该应用程序在我的本地计算机上连续运行，仅运行：

```
node app.js 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T15:46:49.977

不幸的是，Foreman[不能在 Windows 上运行](https://github.com/ddollar/foreman/issues/41)。ddollar 启动了一个替代项目[foreman-windows](https://github.com/ddollar/foreman/issues/41)来尝试添加 Windows 支持，但我不知道它是否已经完全启动。

如果你想要一个帮助任务来在本地启动你的节点环境，编写你自己的[蛋糕](http://coffeescript.org/documentation/docs/cake.html)任务是很好的，尽管是手动的，替代：

```
{spawn, exec} = require 'child_process'

task 'start', 'Spin up dev environment', ->
  exec 'node app.js' 
```

然后你会在命令行中执行任务：

```
cake start 
```

这为您提供了为各种操作创建多个任务以及微调任务以满足项目需求的额外好处。

请注意，Windows 喜欢在某些命令方面进行切换。例如，在基于 *nix 的机器上，您可以在浏览器中打开您的站点：

```
exec "open http://localhost:3000/" 
```

但在 Windows 上，它是`start`：

```
exec "start http://localhost:3000/" 
```

另一个重要的区别是处理环境变量。在 *nix 上，您可以简单地将它们添加到您的命令中：

```
exec "NODE_ENV=staging node server.js" 
```

但是，如果您尝试`exec`在 Windows 上使用该格式，它将失败。相反，产生一个新的 bash：

```
terminal = spawn 'bash'
terminal.stdin.write "NODE_ENV=staging node server.js"
terminal.stdin.end() 
```

你也可以监听来自 bash 的事件：

```
terminal.stdout.on 'data', (data) ->
  console.log "#{data}"
terminal.stderr.on 'data', (data) ->
  console.log "#{data}" 
```

如果您正在编写必须支持多个平台的工具，您可以相对容易地进行操作系统平台检查以进行调整：

```
os = require 'os'

if os.platform() is 'win32'
  <do Windows stuff> 
```

# ios5 - 用于 iphone 的 rhomobile 构建失败，无法找到配置文件

> ID：12079361
> 
> 赞同：2
> 
> 时间：2012-08-22T18:37:54.527
> 
> 标签：ios5, osx-lion, rhomobile, provisioning-profile

我有一个简单的应用程序，我想在我的 iphone 上运行。但是，我收到一个恼人的错误，即找不到配置文件。它发生在我进入我的项目文件夹并运行之后： `sudo rake device:iphone:production`

```
=== BUILD NATIVE TARGET RhoLib OF PROJECT RhoLib WITH CONFIGURATION Release ===

Check dependencies

=== BUILD NATIVE TARGET rhoextlib OF PROJECT rhoextlib WITH CONFIGURATION Release ===
Check dependencies

=== BUILD NATIVE TARGET curl OF PROJECT curl WITH CONFIGURATION Release ===
Check dependencies

=== BUILD NATIVE TARGET rhorunner OF PROJECT rhorunner WITH CONFIGURATION Release ===
Check dependencies
Code Sign error: Provisioning profile '0558F1B2-FE5A-4236-B9EE-A200EFAD68E9' can't be found

cd ~/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/gems/1.9.1/gems/rhodes-3.3.3
set bundle identifier
set URL name
restore_default_images
rm -f platform/iphone/Default.png
rm -f platform/iphone/Default.png
cp platform/iphone/Default.bak platform/iphone/Default.png
rm -f platform/iphone/Default.bak
rm -f platform/iphone/Default@2x.png
rm -f platform/iphone/Default-Portrait.png
rm -f platform/iphone/Default-PortraitUpsideDown.png
rm -f platform/iphone/Default-Landscape.png
rm -f platform/iphone/Default-LadscapeLeft.png
rm -f platform/iphone/Default-LandscapeRight.png
restore icon
rm -f platform/iphone/icon.png
cp platform/iphone/icon.bak platform/iphone/icon.png
rm -f platform/iphone/icon.bak
rm -f platform/iphone/icon57.png
cp platform/iphone/icon57.bak platform/iphone/icon57.png
rm -f platform/iphone/icon57.bak
rm -f platform/iphone/icon72.png
cp platform/iphone/icon72.bak platform/iphone/icon72.png
rm -f platform/iphone/icon72.bak
rm -f platform/iphone/icon114.png
cp platform/iphone/icon114.bak platform/iphone/icon114.png
rm -f platform/iphone/icon114.bak
************************************
ERROR during building by XCode !
XCode return next error code = pid 9102 exit 65 
```

我检查了 xcode 管理器，配置文件在电话和图书馆上。我检查了 developer.apple.com，配置文件是所插入设备的 Distribution Ad Hoc。

我的 build.yml：

```
sdkversion: 3.3.2
name: My Application
version: 0.1
vendor: rhomobile
build: release
bbver: 4.6
applog: rholog.txt
iphone:
  provisionprofile: 0558F1B2-FE5A-4236-B9EE-A200EFAD68E9
  sdk: iphoneos5.1
  codesignidentity: "iPhone Distribution"
  entitlements: 
  configuration: Release
  emulator: 5.1
  emulatortarget: iphone
  BundleIdentifier: com.randomname.myapplication
  BundleURLScheme: myapplication
wp:
  productid: 
  uid: 3928127822
android:
  version: 2.1
extensions:
  - accelerometer 
```

有人知道我在这里错过了什么吗？已经尝试了几天没有结果:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:08:29.987

过了一会儿，我发现脚本会检查配置文件`/Library/MobileDevice/Provisioning Profiles`而不是`~/Library/MobileDevice/Provisioning Profiles`. 这是由使用 sudo 命令引起的，但是没有 sudo 我没有权限。解决方法是创建 /Library/MobileDevice/Provisioning Profiles 文件夹并将安装的配置文件复制到该位置。代码签名现在工作正常。

*编辑：*更好的解决方案是在没有 sudo 的情况下重新安装 rhodes gem。通过安装套件，我不得不 sudo 对其进行系统更改，但这使得编译也需要 sudo，因此在错误的位置寻找配置文件。

这成功了：

```
sudo gem uninstall rhodes
gem install rhodes 
```

# php - 根据 Amazon S3，PHP 和 CF 的 SHA1 错误

> ID：12079366
> 
> 赞同：1
> 
> 时间：2012-08-22T18:38:12.703
> 
> 标签：php, coldfusion, amazon-s3, hmacsha1

Amazon 始终生成与 PHP 或 CF 不同的哈希，这会导致持续的“SignatureDoesNotMatch”错误。

根据[文档](http://docs.amazonwebservices.com/AmazonS3/2006-03-01/dev/RESTAuthentication.html)，GET 请求 [没有 REST 标头] 的签名如下：

```
Signature = URL-Encode( Base64( HMAC-SHA1( SecretAccessKey, UTF-8-Encoding-Of( StringToSign ) ) ) );

StringToSign = HTTP-VERB + "\n" +
    Content-MD5 + "\n" +
    Content-Type + "\n" +
    Expires + "\n" +
    CanonicalizedAmzHeaders +
    CanonicalizedResource; 
```

示例数据：

*   秘密访问密钥：**wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY**
*   Content-MD5 和 Content-Type：（可选 - 跳过）
*   CanonicalizedAmzHeaders：（无标题 - 跳过）
*   资源：johnsmith.s3.amazonaws.com/photos/puppy.jpg
*   规范化资源：**/johnsmith/photos/puppy.jpg**

提供了两个示例：

1.  过期**1175139620** ; 签名：**rucSbH0yNEcP9oM2XNlouVI3BH4%3D**
2.  过期**1141889120** ; 签名：**vjbyPxybdZaNmGa%2ByT272YEAiv4%3D**

要重新创建这个（CFHMAC from [here](https://stackoverflow.com/a/12061270/87520)）：

```
// PHP
$expires = 1175139620;
$SecretAccessKey = "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY";
$StringToSign = "GET\n\n\n$expires\n/johnsmith/photos/puppy.jpg";
$signature = urlencode( base64_encode( hash_hmac('sha1',  utf8_encode($StringToSign), $SecretAccessKey, true)));

// ColdFusion
<cfset LF = chr(10)>
<cfset expires = 1141889120>
<cfset SecretAccessKey = "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY">
<cfset StringToSign = "GET#LF##LF##LF##expires##LF#/johnsmith/photos/puppy.jpg">
<cfset signature = URLEncodedFormat( CFHMAC(StringToSign, SecretAccessKey))> 
```

除了两种语言返回的 $signature 是：

1.  过期**1175139620** ; 签名：**NpgCjnDzrM%2BWFzoENXmpNDUsSn8%3D**
2.  过期**1141889120** ; 签名：**fScKGHCDI0NY5E7CYp9Vc8VKMbY%3D**

我们一直小心其他人提到的这些陷阱：

1.  hash_mac 有第三个参数 raw，它必须设置为 true。
2.  S3 伪代码中 stringToSign 和 key 的顺序应该颠倒。
3.  整个 stringToSign 必须在一行上（以免创建额外的换行符）。

编辑：根据 Leigh 的回答更新了 CF 代码中的换行符；现在 CF 匹配 PHP。

我显然做错了什么，但不知道是什么。
[我听说 Amazon S3 会被称为 CSS——“复杂的存储服务”，但这个名字已经被人使用了！]

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T20:47:39.850

这会有帮助吗？

```
<cffunction name="getRequestSignature" access="private" output="false" returntype="string">
    <cfargument name="verb" type="string" required="true" />
    <cfargument name="bucket" type="string" required="true" />
    <cfargument name="objectKey" type="string" required="true" />
    <cfargument name="dateOrExpiration" type="string" required="true" />
    <cfargument name="contentType" type="string" default="" />
    <cfargument name="contentMd5" type="string" default="" />
    <cfargument name="canonicalizedAmzHeaders" type="string" default=""
        hint="A newline-delimited list of headers, in lexographical order, duplicates collapsed, and no extraneous whitespace.  See Amazon's description of 'CanonicalizedAmzHeaders' for specifics." />
    <cfscript>
        var stringToSign = "";
        var algo = "HmacSHA1";
        var signingKey = "";
        var mac = "";
        var signature = "";

        stringToSign = uCase(verb) & chr(10)
            & contentMd5 & chr(10)
            & contentType & chr(10)
            & dateOrExpiration & chr(10)
            & iif(len(canonicalizedAmzHeaders) GT 0, de(canonicalizedAmzHeaders & chr(10)), de(''))
            & "/" & listAppend(bucket, objectKey, "/");
        signingKey = createObject("java", "javax.crypto.spec.SecretKeySpec").init(variables.awsSecret.getBytes(), algo);
        mac = createObject("java", "javax.crypto.Mac").getInstance(algo);
        mac.init(signingKey);
        signature = toBase64(mac.doFinal(stringToSign.getBytes()));

        return signature;
    </cfscript>
</cffunction> 
```

完全从这里偷了它： [http ://www.barneyb.com/barneyblog/projects/amazon-s3-cfc/](http://www.barneyb.com/barneyblog/projects/amazon-s3-cfc/)

:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T20:58:41.060

（也可以发布这个，因为我已经写好了.. :)

我可以看到两个问题

1.  日期需要以特定方式格式化
2.  您需要使用 a`LF`而不是文字 "\n"

下面的结果与[身份验证示例](http://docs.amazonwebservices.com/AmazonS3/2006-03-01/dev/RESTAuthentication.html#RESTAuthenticationExamples)中的结果相匹配，即 `bWq2s1WEIj+Ydj0vQ697zp+IXMU=`。注意：我[从这里使用了 hmacSHA1 函数](https://stackoverflow.com/a/2960258/104223)，但改用了`getBytes("UTF-8)`

**代码：**

```
 <cfset newLine = chr(10)>
    <cfset secretAccessKey = "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY">
    <cfset stringToSign = "GET#newLine##newLine##newLine#Tue, 27 Mar 2007 19:36:42 +0000#newLine#/johnsmith/photos/puppy.jpg">
    <cfset signature = hmacSHA1(secretAccessKey, stringToSign)>
    <cfset finalSignature = URLEncodedFormat(binaryEncode(signature, "base64"))>
    <cfoutput>finalSignature = #finalSignature#</cfoutput> 
```

****编辑1：**

有什么可疑的。该页面上的大多数示例都匹配。但是[REST Authentication Example 3: Query String Authentication Example 这里](http://s3.amazonaws.com/doc/s3-developer-guide/RESTAuthentication.html)显示了一个不同的密钥和字符串来产生签名`vjbyPxybdZaNmGa%2ByT272YEAiv4%3D`。如果你在 CF 中使用这些值，你*会*得到相同的签名。所以我想知道这是否可能只是一个文档错误？

```
 <cfset secretAccessKey = "OtxrzxIsfpFjA7SwPzILwy8Bw21TLhquhboDYROV">
     <cfset stringToSign = "GET#newLine##newLine##newLine#1141889120#newLine#/quotes/nelson"> 
```

****编辑 2：**

我很确定 REST 示例是错误的。搜索出现了包含另一个示例密钥的[此链接。](http://mashupguide.net/1.0/html/ch16s05.xhtml)如果您在 CF 代码中替换它，签名就是您所期望的：`rucSbH0yNEcP9oM2XNlouVI3BH4%3D`.

```
 <cfset secretAccessKey = "uV3F3YluFJax1cknvbcGwgjvx4QpvB+leU8dUj2o">
    <cfset stringToSign = "GET#newLine##newLine##newLine#1175139620#newLine#/johnsmith/photos/puppy.jpg"> 
```

# google-chrome - 设置 svg 渲染的质量

> ID：12079368
> 
> 赞同：2
> 
> 时间：2012-08-22T18:38:17.943
> 
> 标签：google-chrome, css, svg, render, scale

通常浏览器会正确呈现 svg 图像，但在 chrome 中，浏览器不会检测到 css3 比例并返回较差的图像。这一定是因为css scale是一项新技术……有没有办法选择渲染质量？

对不起我的英语，我正在学习它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T00:03:17.300

有一些解决方法可以解决这个问题，恐怕没有一个像设置渲染质量指令那么简单。最直接的解决方法是插入实际的 SVG，而不是在 img 标签中使用它。

您的 html 看起来像...

```
<svg>
  ...
</svg> 
```

你的CSS看起来像......

```
svg {
  -webkit-transform: scale(2);
} 
```

这是一个演示：http: [//jsfiddle.net/EgsGe/](http://jsfiddle.net/EgsGe/)

# css - CSS如何确定动画过渡的方式？

> ID：12079374
> 
> 赞同：1
> 
> 时间：2012-08-22T18:38:32.820
> 
> 标签：css, css-transitions, css-animations

我有一个横幅代码，当悬停在上面时会显示一个下拉部分：

下面的 HTML 代码：

```
<div id="top_wrapper" class="hori_wrapper wrapper">
    <div id="top" class="hori_banner banner"></div>
    <div id="top_reveal" class="hori_reveal reveal"></div>
</div> 
```

和CSS：

```
.wrapper {
border: dashed;
position: relative;
}

.banner {
background: blue;
position: relative;
}

.reveal {
background: red;
position: absolute;
z-index: 1;
}

.hori_wrapper {
width: 300px;
height: 50px;
clear: both;
}

.hori_banner {
width: 300px;
height: 50px;
}

.hori_reveal {
width: 300px;
height: 0px;
}

#top:hover + #top_reveal, #top_reveal:hover {
-webkit-transition: height 1s ease-in .5s;
-o-transition: height 1s ease-in .5s;
-moz-transition: height 1s ease-in .5s;
-transition: height 1s ease-in .5s;
height: 300px;
top: 50px;
} 
```

基本上，我想知道的是：CSS如何确定它应该向下动画而不是其他方向？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:40:31.503

所发生的只是它转换到如果属性被正常设置会发生的情况。

换句话说，如果高度是 300px，顶部是 50px，它会是什么样子？

没有什么比这更复杂的了，这就是为什么对于不支持过渡的浏览器来说仍然可以工作，只是没有动画。

# jquery - Jquery mouseleave/mouseout 和 z-index

> ID：12079375
> 
> 赞同：0
> 
> 时间：2012-08-22T18:38:33.810
> 
> 标签：jquery, z-index, mouseout, mouseleave

tt我有这样的导航：

```
<ul>
   <li><a href='#'>Menu title 1</a>
      <ul>
         <li><a href='#'>Submenu title 1</a></li>
         <li><a href='#'>Submenu title 2</a></li>
         <li><a href='#'>Submenu title 3</a></li>
      </ul>
   </li>
   <li><a href='#'>Menu title 2</a>
      <ul>
         <li><a href='#'>Submenu title 1</a></li>
         <li><a href='#'>Submenu title 2</a></li>
         <li><a href='#'>Submenu title 3</a></li>
      </ul>
   </li>
... 
```

然后使用 jquery 我将悬停的菜单项的 z-index 设置为更高的子菜单并淡入子菜单元素。因此，悬停的菜单项元素在子菜单上可见，所有其他菜单项都在子菜单下。

现在我需要为子菜单设置鼠标事件 - mouseleave => 隐藏子菜单。问题：由于菜单项现在位于子菜单上 - 如果鼠标停留在子菜单上但悬停在菜单项 1 上，jquery 将其理解为子菜单的 mouseleave

这对我来说是很常见的问题，我总是使用某种“秘籍”，但我认为必须有一个简单的解决方案。

我不提供完整的源代码，但我不要求你提供工作代码，我只需要一些想法。希望得到帮助，谢谢。

![在此处输入图像描述](../Images/a62e303ca924fb8838a3718e7826dcde.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:47:37.370

使用 pureCSS 菜单，更有效且无 JS。你可以使用这个编辑器在线生成你的 pureCSS 菜单。

[http://purecssmenu.com/](http://purecssmenu.com/)

这也是解释纯 CSS 菜单背后的基础知识的指南。

[http://meyerweb.com/eric/css/edge/menus/demo.html](http://meyerweb.com/eric/css/edge/menus/demo.html)

如果您需要带有效果的 JQuery 和 CSS 解决方案，本教程将为您提供帮助。

[http://www.instantshift.com/2010/07/16/create-simple-dropdown-menu-using-jquery/](http://www.instantshift.com/2010/07/16/create-simple-dropdown-menu-using-jquery/)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T18:53:22.023

这是使用纯 CSS 进行设置的一种方法：

[http://jsfiddle.net/mblase75/nr8xZ/](http://jsfiddle.net/mblase75/nr8xZ/)

诀窍是将`:hover`样式应用于仅在列表项悬停时显示它们的子菜单。由于子菜单也是父列表项的一部分，只要鼠标悬停在子菜单上，它就会一直显示。如果需要，您仍然可以向链接和/或列表项添加额外的 jQuery/JavaScript 交互性。

# android - Android 回合制多人纸牌游戏

> ID：12079382
> 
> 赞同：2
> 
> 时间：2012-08-22T18:39:12.360
> 
> 标签：android, multiplayer

我正在寻找为纸牌游戏（4 名玩家）开发多人游戏部分。我已经阅读了很多关于如何做到这一点的帖子，但很多帖子都可以追溯到 2010 年，所以我想知道是否有任何改变。首先，我想知道那里有可用的SDK吗？我听说过 Skiller sdk，但我需要另一种选择，因为他们的服务协议在付费应用方面很可怕。

如果不是，那么我想我的另一个选择是使用客户端 0server 架构进行开发。我相信服务器代码会有一个陡峭的学习曲线。他们的快速指南教程可以做到这一点吗？我还有其他选择吗？这是一款纸牌游戏，我预计目前不会有超过 5000 名用户使用它，随时可能有 100 多人在线非常感谢

# visual-studio - 未知选项 -RequireConsent

> ID：12079391
> 
> 赞同：8
> 
> 时间：2012-08-22T18:40:18.773
> 
> 标签：visual-studio, tfs, nuget

在我分支主干之前一切正常，现在这个错误列表显示在分支和主干中。谷歌搜索在 Nuget 博客中提出了一个可能的解决方案，它的错误消息与我的不同。

![在此处输入图像描述](../Images/4f70e1c05ef3a52c1f3ebd5683fb1e5a.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-27T10:03:04.403

通过 Twitter 询问 Jeff Handley，他回答“nuget.exe update -self”

作品！奇怪的是，它是 Windows 7 的完整更新安装，带有 VS2010 的新副本。不知何故，我有 Nuget 1.7。呃，好吧...

```
C:\Tfs\Products\Development\Project1\.nuget>nuget.exe update -self

Checking for updates from https://nuget.org/api/v2/.
Currently running NuGet.exe 1.7.30402.9028.
Updating NuGet.exe to 2.0.40000.
Update successful. 
```

# eclipse - 将 Java Web EE Netbeans 项目导入 Eclipse

> ID：12079395
> 
> 赞同：2
> 
> 时间：2012-08-22T18:40:49.883
> 
> 标签：eclipse, jakarta-ee, netbeans, intellij-idea

寻找一种将 NetBeans Java Web 项目 (Java EE) 导出到 Eclipse 的干净方法。

已经尝试导入war文件，但输出很多错误。我认为是因为 EJB 对象不包含在那里。

Netbeans 项目与 PostgreSQL 和 Glassfish 服务器有连接，所有东西都安装在我的 Windows PC 上。它使用 EJB 模块，并且具有 REST 实现和 JPA 持久性。

使用 Netbeans 7.2 和 Eclipse IDE 1.5（最新）

这是 Netbeans 项目的视图：

![网豆](../Images/79215ee804db4d3ac5904b7c3f8499ac.png)

下面是在 Eclipse 中导入 war 文件（由 Netbeans 生成）产生的项目。

![蚀](../Images/63b1e4a81b4b6b17f922af90c42e5700.png)

这将是一个干净的方式来做到这一点？

我还可以听到有关将其导入 IntelliJ Idea 的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:48:45.137

解决方案花了很长时间，但以下是基本步骤：

创建空 EAR 项目 在 Eclipse 中，添加 2 个模块，EJB 和 Web 模块。然后将 JPA 方面添加到 EJB 项目中。导入的 src 文件夹。然后将 EAR 项目导出到 JBoss（更改了 Glassfish，没有特别的原因）。

在这种情况下，Netbeans 中的 1 个项目基本上相当于 Eclipse 中的 3 个项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T09:42:30.767

准备弄脏你的手。

Netbeans 默认使用 Ant 构建脚本。这些脚本不能直接转换为与 Eclipse 一起使用。

我这样做的方式是在 Netbeans 中创建一个 Maven 项目，并将 Ant 项目中的所有源文件复制到 Maven 项目中。Eclipse 提供了一个 Maven 插件，使您能够使用 Maven 项目。Maven 项目（如果设置正确）倾向于独立于 IDE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T18:57:48.963

您可以尝试在 Eclipse 中创建新项目，然后选择“从现有源创建项目”。然后从 NetBeans 项目中指向 src 文件夹。您可能需要自己组织您的 REST 服务等，但我认为这就是方式。

# javascript - 避免在 Meteor 中对 Collection 的持久性

> ID：12079400
> 
> 赞同：0
> 
> 时间：2012-08-22T18:40:58.427
> 
> 标签：javascript, node.js, meteor

我刚刚开始考虑将 Meteor 用于即将进行的项目，并且对数据持久性有疑问。听起来您有两个选择：首先，您可以在实例化一个新集合时声明一个“名称”，这将创建一个数据库集合，该集合将在更改时保存。

```
Chatrooms = new Meteor.Collection("chatrooms"); 
```

另一种选择是创建一个不会保存的匿名集合。

```
Chatrooms = new Meteor.Collection(); 
```

但是，如果我想从数据库中填充集合，但在客户端更改时不保存它，我该怎么办？例如，我可能想要创建将在网格中显示的用户电影集合——每个电影都有自己的绝对定位，基于应用于集合的排序和过滤。对集合进行更改后，将重新渲染关联的视图（或模板）以反映这些更改。但我不一定希望将这些绝对位置存储在数据库中......

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T03:26:23.140

我不是很清楚你的问题。但也许，您可以将绝对位置绑定到集合数据中？它们只是普通的 javascript 对象。并且收集数据只会通过`insert/update/remove`函数调用来改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T04:57:22.393

我最终做了这样的事情：

```
movies: function() {
  var movies =  Movies.find().fetch();
  _.each(movies, function(movie, index){
    movie.left = index * 2;
    movie.top = index * 2; 
  });
  return movies; 
}, 
```

基本上，'fetch()' 允许我处理纯 JSON 对象，从而更容易遍历它们并更改它们，而无需执行 'update' 命令。

# ruby - 是否有命令行选项可以在特定模式下在 emacs 中打开文件？

> ID：12079404
> 
> 赞同：2
> 
> 时间：2012-08-22T18:41:15.963
> 
> 标签：ruby, unix, emacs

每次打开文件时，我都必须`M-x ruby-mode`让 emacs 进行我想要的语法突出显示。该文件是 .erb，因此它无法立即识别红宝石。

当我打开文件时，是否有 Unix 命令以 ruby​​ 模式启动 emacs？我知道 -f 选项，但是当我打开文件时它似乎不起作用。如果我键入`emacs -f ruby-mode myFile`它不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T18:53:23.943

您是否尝试过添加到您的点文件：

```
(add-to-list 'auto-mode-alist '("\\.erb\\'" . ruby-mode)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T18:53:24.737

最简单的解决方案是，如果您将 ruby​​ 注释放在[指定其模式](http://www.gnu.org/software/emacs/manual/html_node/emacs/Choosing-Modes.html)的文件的开头：

```
# -*- ruby -*- 
```

# magento - Magento 事件观察者范围

> ID：12079411
> 
> 赞同：2
> 
> 时间：2012-08-22T18:41:42.280
> 
> 标签：magento

我正在研究这个观察者，用于在页面加载时从 URL 中提取参数，并希望有人能帮助我弄清楚如何让它按照我想要的方式工作。我只希望这个观察者在前端页面加载而不是后端触发。如果我将范围设置为如下所示的前端，则它不起作用。如果我将其更改为全局，它会很好地触发。我该如何补救？

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
    <modules>
    <MyCompany_Mailchimp>
        <version>1.0.0</version>
    </MyCompany_Mailchimp>
</modules>
<frontend>
    <events>
        <controller_front_init_routers>
            <observers>
                <Mailchimp_observer>
                <type>singleton</type>
                <class>MyCompany_Mailchimp_Model_Observer</class>
                <method>catchMailchimpParams</method>
                </Mailchimp_observer>
            </observers>
        </controller_front_init_routers>    
    </events>
</frontend>
</config> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T19:49:05.397

我不是 100% 确定，但它看起来像事件 controller_front_init_routers 在前端范围初始化之前调度。因此，如果可能，您应该选择稍后触发的其他事件。我不太明白，你的任务是什么，但也许 event controller_action_predispatch 是可以接受的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T06:43:29.990

尝试监听 controller_action_layout_load_before 事件，而不是 controller_front_init_routers。此事件仅在前端触发。有关 Magento 事件列表的更多信息，请阅读[此处](http://www.magentocommerce.com/wiki/5_-_modules_and_development/reference/events)。

# ruby - 如何在 Sinatra 中使用带有静态文件的 erb 模板？

> ID：12079413
> 
> 赞同：0
> 
> 时间：2012-08-22T18:41:41.500
> 
> 标签：ruby, sinatra, erb

我将一个普通的 HTML/CSS/JS 站点移植到使用 Sinatra 作为其后端。我最感兴趣的是模板。现在，我有一个名为“index.html.erb”的 HTML 文件和一个名为“layout.html.erb”的布局的视图目录。虽然我想将 Sinatra 的模板与 erb 一起使用，但我正在处理的站点是静态的。换句话说，我的“index.html.erb”中没有任何特定于 erb 的代码。我现在只需要我的视图目录中的布局。

有没有办法可以将views/index.html.erb 移动到public/index.html 但仍将其包装在模板views/layout.html 中？

```
require 'rubygems'
require 'sinatra'

get '/index.html' do
    @page_title = 'Home'
    @page_id = 'index.html'
    erb :'index.html', { :layout => :'layout.html' }
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T19:03:48.853

通读[Sinatra 自述文件](http://www.sinatrarb.com/intro)后，您尝试做的事情有两个主要问题。首先，静态文件与模板文件：Sinatra 没有用于纯 HTML 的模板渲染器，因此您必须使用 ERB。由于 ERB 可以是纯 HTML，因此问题在于 Sinatra 只能使用特定的 ERB 文件扩展名列表（并且`.html`不是其中之一）。

第二个问题是，在您的示例代码中，您的布局文件夹必须与模板文件夹不同（Sinatra 认为这是相同的，`/views`默认情况下）。

考虑到这一点，您可以得到的最接近您所要求的内容如下：

```
require 'sinatra'

configure do
  set :views, root
end

get '/index.html'
  erb :'public/index.html', { :layout => :'views/layout.html' }
end 
```

然而，这也有一些问题。首先，如上所述，您必须使用`.html.erb`扩展名命名您的文件（或者，`.erb`如果您`.html`从上面的第 7 行中删除）。此外，任何人都可以访问`/index.html.erb`您服务器上的原始模板文件。因此，您在原始问题中显示的方法是在不提供纯 HTML 文件的情况下在 Sinatra 中尝试执行的最佳方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T00:16:22.743

我正在使用 jquery 来完成此操作：

```
get '/thtml/:path' do
  @path = params[:path]
  erb :thtml
end 
```

thtml.erb

```
<%= "<script>$('#main').load('/t-html/#{@path}')</script>" %> 
```

将 html 文件放在文件夹 /public/t-html 中。不要忘记在 layout.erb 中包含 jquery。

# petapoco - Petapoco：如何使用来自两个表的连接对 gridview 进行数据绑定？

> ID：12079416
> 
> 赞同：1
> 
> 时间：2012-08-22T18:41:53.360
> 
> 标签：petapoco

我不想使用自定义类。

```
var q = db.Query<dynamic>(query); //This does not work 
```

查询具有来自多个表的连接和自定义创建的列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T15:30:38.460

您可以检查 PetaPoco.cs 的“ExecuteReader”方法，看看它是否看起来像这样（参见下面的代码）：

我的文件在函数中没有任何代码，所以我在执行标量方法之后对其进行建模。这将返回一个可完美绑定到数据网格的通用 DataTable。但是请记住，要对数据进行任何更改，您需要实现自己的 CRUD 方法，因为生成的 DataTable 是只读的。

```
 //Execute Reader
        public DataTable ExecuteReader(string sql, params object[] args)
        {
            try
            {
                OpenSharedConnection();
                try
                {
                    using (var cmd = CreateCommand(_sharedConnection, sql, args))
                    {
                        var val = cmd.ExecuteReader();
                        OnExecutedCommand(cmd);
                        var dt = new DataTable();
                        dt.Load(val);
                        return dt; //(T)Convert.ChangeType(val, typeof(T));
                    }
                }
                finally
                {
                    CloseSharedConnection();
                }
            }
            catch (Exception x)
            {
                OnException(x);
                throw;
            }
        }

        public DataTable ExecuteReader(Sql sql)
        {
            return ExecuteReader(sql.SQL, sql.Arguments);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T21:03:51.060

创建一个包含要在网格中显示的两个表中的字段的类。使用连接表并返回所需列的 SQL 语句填充您的查询。然后

```
var q=db.Query<YourClassName>.Query(query) 
```

应该管用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T05:45:34.817

您可以创建一个数据库视图，然后 T4 模板会自动为此生成类。您需要添加

```
IncludeViews = true; 
```

到数据库.tt

# javascript - JavaScript 迭代器

> ID：12079417
> 
> 赞同：8
> 
> 时间：2012-08-22T18:42:05.650
> 
> 标签：javascript

我正在浏览 MDN（Mozilla 开发者网络）并遇到了[迭代器和生成器](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Iterators_and_Generators)

所以很自然地，我尝试了 Google Chrome v21 页面中给出的代码片段。具体来说，这段代码：

```
var it = Iterator(lang);
for (var pair in it)
  print(pair); // prints each [key, value] pair in turn 
```

但是，控制台返回此错误消息：

```
ReferenceError: Iterator is not defined 
```

为什么？Iterator 函数是否已弃用？我错过了一点吗？感谢您的帮助和时间:-)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T21:54:16.123

数组有一个内置的 map 函数，其作用类似于迭代器。

```
[1,2,3].map(function(input){console.log(input)}); 
```

标准输出：

```
1
2
3 
```

最坏的情况是你可以很容易地设计一个迭代器对象，但没有完全测试它，但如果有任何错误，你应该能够快速让它工作。

```
var Iterator = function(arr){ return {
    index : -1,
    hasNext : function(){ return this.index <= arr.length; },
    hasPrevious: function(){ return this.index > 0; },

    current: function(){ return arr[ this["index"] ]; },

    next : function(){
        if(this.hasNext()){
            this.index = this.index + 1;            
            return this.current();
        } 
        return false;
    },

    previous : function(){
        if(this.hasPrevious()){
            this.index = this.index - 1
            return this.current();
        }
        return false;
    }
}   
};

var iter = Iterator([1,2,3]);

while(iter.hasNext()){
    console.log(iter.next());
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T18:45:18.993

`window.Iterator`AFAIK 仅存在于 Firefox 中，而不存在于 WebKit 中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T18:46:56.540

从[这个线程](http://code.google.com/p/v8/issues/detail?id=890)：

> V8 是 ECMAScript 的实现，而不是 JavaScript。后者是 Mozilla 制作的 ECMAScript 的非标准化扩展。
> 
> V8 旨在与 JSC 插件兼容，JSC 是 WebKit/Safari 中的 ECMAScript 实现。因此，它实现了许多也在 JSC 中的 ECMAScript 的非标准扩展，其中大部分也是 Mozilla 的 JavaScript 语言。
> 
> 没有计划将 JSC 中没有的非标准特性添加到 V8。

注意：JSC 代表[JavaScript Core](http://trac.webkit.org/wiki/JavaScriptCore) - WebKit ECMAScript 实现。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-07T07:47:53.930

```
var makeIterator = function (collection, property) {
    var agg = (function (collection) {
    var index = 0;
    var length = collection.length;

    return {
      next: function () {
        var element;
          if (!this.hasNext()) {
            return null;
          }
          element = collection[index][property];
          index = index + 1;
          return element;
        },
      hasNext: function () {
        return index < length;
      },
      rewind: function () {
        index = 0;
      },
      current: function () {
        return collection[index];
      }
    };
 })(collection);

 return agg;
};

var iterator = makeIterator([5,8,4,2]);

console.log(iterator.current())//5
console.log(  iterator.next() )
console.log(iterator.current()) //8
console.log(iterator.rewind());
console.log(iterator.current()) //5 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-22T18:47:02.247

这意味着 Chrome v21 不支持 JavaScript 的该功能。它是 1.7 规范的一部分。[尝试这样做](http://bclary.com/2004/08/27/javascript-version-incompatibilities#specver)可能有助于在 Chrome 中明确指定 1.7 支持。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-21T08:50:00.040

对于铬，你可以使用这个

```
var someArray = [1, 5, 7];
var someArrayEntries = someArray.entries(); 
```

这是[链接](https://developer.mozilla.org/ru/docs/Web/JavaScript/Guide/The_Iterator_protocol)，您会发现它很有趣

# iphone - 如何在顶部 viewForHeaderInSection 上添加 UIButton

> ID：12079420
> 
> 赞同：0
> 
> 时间：2012-08-22T18:42:14.730
> 
> 标签：iphone, ios, uitableview

如何在 viewForHeaderInSection 顶部添加按钮。我喜欢在部分标题上方添加一个按钮，该按钮可以使用 tableview 滚动。知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T18:47:33.447

我在pull-to-refresh实现中看到的 - 相当老套的 - 解决方案是简单地将您的“额外”视图作为子视图添加到表视图中 - 只需确保使用负 y 偏移对其进行定位。该偏移量应该等于（好吧，而不是-1倍）您的视图高度。代码：

```
UIView *myViewAboveHeader = // however you create it
CGRect f = myViewAboveHeader.frame;
f.origin.y = -1 * f.size.height;
myViewAboveHeader.frame = f;
[tableView addSubview:myViewAboveHeader]; 
```

编辑：看来你不想要一个标题视图和它上面的视图。在这种情况下，只需在表视图委托方法中返回的视图顶部添加一个按钮：

```
- (UIView *)tableView:(UITableView *)tv viewForHeaderInSection:(NSInteger)s
{
    UIView *header = ...;
    UIButton *btn = // create a button somehow;
    [header addSubview:btn];
    return header;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T18:47:51.740

使用此代码，将其放置在`viewdidload`：

```
- (void)viewDidLoad {
    UIView *headerViews = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 90)];

    UIButton *managePrivacyButton = [UIButton buttonWithType:UIButtonTypeCustom];

    [managePrivacyButton setFrame:CGRectMake(0, 45, 320, 45)];
    managePrivacyButton.titleLabel.textAlignment = UITextAlignmentLeft;
    [managePrivacyButton.titleLabel setFont:[UIFont boldSystemFontOfSize:12]];
    [managePrivacyButton setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];

    [headerViews addSubview:managePrivacyButton];
    [self.tableView setTableHeaderView:headerViews];
    [super viewDidLoad];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T18:44:05.063

这个方法特别需要返回一个 UIView。UIButton 是 UIView 的子类。只需创建一个新的 UIButton 并返回它。

# html - Div 垂直对齐图像

> ID：12079421
> 
> 赞同：0
> 
> 时间：2012-08-22T18:42:28.590
> 
> 标签：html, css

我有一个带有图像“image.jpg”的 div。

通过使用`text-align=center`，图像水平居中。

但是它不是垂直对齐的。我将如何实现垂直对齐？

```
<div style="vertical-align: middle;text-align:center;">
    <img title="Title3" src="image.jpg" style="display: inline;" id="idImage">
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T18:49:04.740

使用[本文](http://phrogz.net/css/vertical-align/index.html)`vertical-align`中描述的属性。请注意，为了开始工作，您也需要这样做。`vertical-align``display: table-cell`

```
div.centered {
    display: table-cell;
    vertical-align: middle;
    text-align: center;
    /* other styling */
} 
```

我给你`<div>`的班级名称的地方`centered`。

此外，您不应该`text-align`用于居中，而是添加`margin: 0 auto;`到图像样式中。

**编辑**

HTML：

```
<div class="centered">
    <img src="..." class="centered-image" />
</div> 
```

CSS：

```
div.centered {
    display: table-cell;
    vertical-align: middle;
}

img.centered-image {
    margin: 0 auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T18:46:08.160

你必须知道尺寸才能工作（或者如果你有不同的尺寸，可以使用 javascript 来获取尺寸）。这也将使图像水平居中（所以你不需要你的`text-align=center`）

取自[css-tricks](http://css-tricks.com/snippets/css/exactly-center-an-imagediv-horizontally-and-vertically/)

```
.center {
   width: 300px;
   height: 300px;
   position: absolute;
   left: 50%;
   top: 50%; 
   margin-left: -150px;
   margin-top: -150px;
} 
```

高度和宽度是相关图像的高度和宽度，顶部和左侧边距设置为各自高度和宽度的一半。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T18:47:58.593

如果您设置父容器的高度并设置您的`margin-top: auto`，我认为它应该与中间对齐。这适用于水平对齐，但我没有尝试过垂直对齐。无论如何，它会避免绝对定位

如前所述，您还可以使用 javascript 查找高度，然后设置边距，如下所示：

```
var image = document.getElementById("myImage");
var imgHeight = image.style.height;
image.style.marginTop = -(imgHeight/2);
image.style.top = 50%; //you can probably just set this in css and omit this line 
```

你当然必须设置

```
#myImage{
  position: absolute;
} 
```

尽管

# ios - 我可以在 iOS 上的 OpenGL ES 2.0 的顶点位置向量中使用半浮点数吗？

> ID：12079424
> 
> 赞同：0
> 
> 时间：2012-08-22T18:43:01.003
> 
> 标签：ios, opengl-es, precision

我试图通过节省数据量来提高性能。我可以在 iOS 上的 OpenGL ES 2.0 中使用半浮动顶点位置吗？如果不支持，我有什么选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:10:55.567

是的，你可以，但要注意精度的损失。

*   'highp' 存储一个 IEEE 754 32 位值。

*   'mediump' 存储 [-65520, 65520] 范围内的数字。

*   和 'lowp' 在 [-2, 2) 范围内

    所以除了“highp”之外的任何东西都可能会导致失真。

# .htaccess - htaccess 重定向问题，不重定向

> ID：12079427
> 
> 赞同：1
> 
> 时间：2012-08-22T18:43:24.433
> 
> 标签：.htaccess

```
RewriteRule ^/commerce/ProductDetails.aspx\?mName=([0-9a-zA-Z]+)&source=List$ /$1 [R=301,L] 
```

这看起来应该很好用，但实际上并没有做任何重定向。

我也试过不逃避问号。

我将它与magento安装一起使用。Mod重写已安装并正在运行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T19:22:01.263

确保启用 .htaccess 并启用重写引擎，然后尝试以下操作：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{QUERY_STRING} ^mName=([^&]+)&source=List$ [NC]
RewriteRule ^commerce/ProductDetails\.aspx$ /%1? [R=301,L,NC] 
```

记住 RewriteRule 在第一个斜杠之后开始匹配`/`并且它不匹配查询字符串，您将需要 RewriteCont 来匹配查询字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T19:04:30.403

不知道你所说的“工作”是什么意思，但你忘了`RewriteEngine On`吗？

# ruby - 设计“current_user”在控制器中无法正常工作？

> ID：12079430
> 
> 赞同：0
> 
> 时间：2012-08-22T18:43:33.797
> 
> 标签：ruby, ruby-on-rails-3, devise

我可能遗漏了一些非常明显的东西，但我无法为我的一生弄清楚这...

我正在尝试对`before_filter`我`Orders_Controller`的`current_user.vendor_id == params[:vendor_id]`. 它每次都返回 false ，将我重定向到，因为我在我的...`root_path`中设置了它`orders_controller`

```
before_filter :check_vendor
.
.
.
private

def check_vendor
 unless current_user.vendor_id == params[:vendor_id]
  redirect_to root_path, :flash => { error: "Sorry, but you don't have sufficient privlidges to view that page" }
 end
end 
```

最奇怪的是当我使用用户登录并导航到

```
http://localhost:3000/vendors/3/orders/ 
```

并在我的索引中有这个代码：

```
<%= current_user.vendor_id %> <%= params[:vendor_id] %> 
```

它在`orders#index`视图中打印出来：

```
3 3 
```

这应该意味着当我在控制器中使用相同的逻辑时，它会看到两个值都是“3”（或任何`current_user.vendor_id`and `params[:vendor_id]`）

任何帮助将不胜感激:) 对不起，如果这是一个明显的答案，我在 Rails 还是很新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T18:50:02.540

您确定要在第一个请求中向控制器发送 de param[:vendor_id] 吗？

我会添加`gem 'debugger'`到我的 gemfile 中，运行`bundle install`，然后放在`debugger`before_filter 中的比较之上。

然后检查参数和当前用户值。

# r - 围绕直线生成点

> ID：12079434
> 
> 赞同：1
> 
> 时间：2012-08-22T18:43:47.427
> 
> 标签：r, cluster-analysis, data-generation

我正在做一些聚类研究，需要生成类似于以下示例的合成数据：

![数据集示例](../Images/b31b08098f5836756c36b44a3fb730ce.png)

我们有 2 个类别（红色和黑色）的 2d 图。我怎么能生成这样的二维数据？它有一个 V 结构，所以我正在考虑围绕直线生成点 - 有没有办法在**R**中做到这一点？我正在使用**R**，但对其他工具持开放态度（只是数据必须是可导出的）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T19:07:23.990

这是一个想法。

```
n <- c(200,200)                 # Number of points in each class
cls <- rep(1:2, n)              # Class memberships
i <- c(.2-.12*abs(rnorm(n[1])), # Noiseless x position
       -.2+.12*abs(rnorm(n[2])))
noise <- .04*(.2-abs(i))        # Noise level relative to `i`

# Final sample
x <- cbind(i, abs(.5*i)) + noise*matrix(rnorm(sum(n)*2), sum(n), 2)

plot(x[,1], x[,2], col=cls) 
```

![在此处输入图像描述](../Images/bf62a58d63e1cfee393dbcc07a94d8c3.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T19:25:17.657

是否有任何理由生成这种*非常特殊*类型的数据？由此得出的任何结果都可能不会推广到其他数据集。

无论如何，生成此类数据的明显方法是使用非线性投影，例如使用著名的“abs”函数（绝对值）。

即项目 x 到（在 python 语法中，我不喜欢 R）：`math.abs(x)`或者如果你想要一些额外的随机性：`math.abs(x + random.random(.1)) + random.random(.1)`

# java - 如何在编译前运行等效的 mvn install:install-file

> ID：12079435
> 
> 赞同：0
> 
> 时间：2012-08-22T18:43:53.703
> 
> 标签：java, maven

如何`mvn install:install-file`在编译阶段之前运行相当于。我们有`lib/foo-1.0.0.jar`一个 Maven 存储库中不存在的文件。因此，我们使用 mvn install:install-file 手动安装它，并在编译阶段将其作为依赖项。但是，如果该文件未安装在本地存储库中，则会失败并出现编译错误。我如何指示 maven 在编译之前自动安装它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T19:01:27.613

使用系统依赖范围

```
<dependency>
  <groupId>com.company.groupId</groupId>
  <artifactId>foo</artifactId>
  <version>1.0.0</version>
  <scope>system</scope>
  <systemPath>${basedir}/lib/foo-1.0.0.jar</systemPath>
</dependency> 
```

`${basedir}`- 是您`pom.xml`
**编辑**
的目录，您 也可以使用`build-helper-maven-plugin`

```
<plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>build-helper-maven-plugin</artifactId>
        <version>1.7</version>
        <executions>
          <execution>
            <id>attach-artifacts</id>
            <phase>package</phase>
            <goals>
              <goal>attach-artifact</goal>
            </goals>
            <configuration>
              <artifacts>
                <artifact>
                  <file>${basedir}/lib/foo-1.0.0.jar</file>
                  <type>jar</type>
                  <classifier>optional</classifier>
                </artifact>
              </artifacts>
            </configuration>
          </execution>
        </executions>
      </plugin> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:09:18.597

安装公司范围的 Maven 代理，例如 Nexus，并将工件放在那里。每个开发人员都需要更改他们`settings.xml`以指向该代理。将 jar 签入版本控制通常不是一个好主意，尤其是如果您想迁移到分布式 SCM。

# ruby-on-rails - 抑制 Rake 任务 db:schema:load 中的输出

> ID：12079436
> 
> 赞同：8
> 
> 时间：2012-08-22T18:44:03.823
> 
> 标签：ruby-on-rails, windows, ruby-on-rails-3, rake

如何抑制 db:load:schema 的输出？跑步

```
bundle exec rake db:schema:load 
```

使用`-s`, `-q`, 甚至`VERBOSE=false`选项对输出没有影响；出现了我不想看到的相同“create_table ... add_index ...”垃圾。我从自定义 Rake 任务中调用它，我不希望用户每次都看到所有这些。

**更新：**

我通过使用@Deefour 的一些指导解决了这个问题：

```
system "bundle exec rake db:schema:load -s RAILS_ENV=#{Rails.env} >NUL" 
```

*`>NUL`适用于 Windows 机器，基于 Unix 的可以使用`> /dev/null`.*

而不是

```
Rake::Task['db:schema:load'].invoke 
```

正如我在自定义任务中所做的那样。请注意，此解决方案特定于 Windows 机器。对于基于 Unix 的机器，我想您应该能够使用下面公认的解决方案。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-12-31T18:02:22.827

这是一个跨系统工作的更清洁的解决方案：

```
silence_stream(STDOUT) do
  # anything written to STDOUT here will be silenced
  Rake::Task["db:schema:load"].invoke
end 
```

还

```
quietly do
  # anything written to STDOUT or STDERR here will be silenced
  Rake::Task["db:schema:load"].invoke
end 
```

我更喜欢`silence_stream(STDOUT)`这样做，`quietly`因为它仍然允许显示写入的错误消息`STDERR`，这在 rake 命令开始起作用时会很有帮助。

参考：[silence_stream](http://apidock.com/rails/v3.2.13/Kernel/silence_stream)、[silence_warnings](http://apidock.com/rails/v3.2.13/Kernel/silence_warnings)和[静默](http://apidock.com/rails/v3.2.13/Kernel/quietly)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T19:43:31.567

`Rake::Task['...'].invoke`您可以在子 shell 中运行命令，而不是使用 调用任务，将输出重定向到`/dev/null`.

```
system "bundle exec rake db:schema:load > /dev/null 2>&1" 
```

# javascript - 无法使用 jquery 克隆没有文本的段落

> ID：12079441
> 
> 赞同：1
> 
> 时间：2012-08-22T18:44:31.017
> 
> 标签：javascript, jquery, html

这个例子来自一本书。它告诉我，如果我将 clone() 中的参数设置为 false，我可以克隆没有文本的段落。我查看了 jQuery 中的文档，并尝试了所有真假组合。结果证明我不能复制没有文字的段落。它只是jQuery中的一个错误吗？

```
<html>
    <head>
        <title>Copying element</title>
        <script src="../jquery-1.8.0.js" type="text/javascript"></script>
        <script type="text/javascript">
            $(document).ready(function(){
                //copy elment and insert
                $('div.chapter p:eq(0)').clone(false).insertBefore('div.chapter');

            });
        </script>
        <style type="text/css">
            span.footnote{
                font-style:italic;
                display:block;
            }
            .chapter span.footnote{
                display:inline;
            }
            .chapter p{
                width:50%;
            }
        </style>
    </head>
    <body>
        <h1 id="f-title">Flatland: A ROmance of Many Dimension</h1>
        <div id="f-author">by Edwin A. Abbott</div>
        <h2>Part 1, Section 3</h2>
        <h3 id="f-subtitle">Concerning the Inhabitants of Flatland</h3>
        <div id="excerpt">an excerpt</div>
        <div class="chapter">
            <p class="squre">Our professional Men and Gentlemen are Squares (to which class I myself belong) and FIve-Sided Figures
                or Pentagons.
            </p>
            <p class="mobility hexagon">Next above these come the Nobility of whoem there are serverl degress
                <a href="http://en.wikipedia.org/wiki/Hexagon">Hexagons</a>and from thence rising in the number of theirside till they received the honourable title of 
                <a href="http://en.wikipedia.org/wiki/Polygon">Polygonal</a>
            </p>
            <p><span class="pull-quote">It is a <span class="drop">Law of Nature</span>with us that a mable child shall have </span>    
            </p>
            <p>But this rule applies not always to the Tradesman</p>
            <p>Rarely -- in proportion to the vast numbers of Isosceles
            </p>
            <p>The birth of tha Ture Equlaterial Traignel from Isoscele parents is the subject of rejociing in the coutry for many furlongs.
            </p>
            <p>How admirable is the Law of Compensation!
            </p>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T18:54:27.653

重新阅读[克隆文档](http://api.jquery.com/clone/)。

它指定元素与它的内容一起被复制（深拷贝）。布尔参数仅处理事件处理程序和[jquery 数据](http://api.jquery.com/data/)，而不是嵌入元素。

所以这是正常的行为：div.chapter() 中的第一段`$('div.chapter p:eq(0)')`与其内容一起被复制。

如果你想要一个非深度克隆功能，你可以使用这个：

```
// clone an element with attributes, without the weight of calling clone and emptying it
// (call it on a non jquery element, using  [0] if necessary)
function nondeepclone(element) {
    var newelem = document.createElement(element.tagName);
    for (var i = 0; i < element.attributes.length; i++) {
        var attr = element.attributes[i];
        newelem.setAttribute(attr.name, attr.value);
    }
    return newelem;
} 
```

但我不确定这是否有真正的用途。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T18:55:50.973

我不认为你可以克隆没有文本的段落。但是您可以在克隆它后立即通过将其文本设置为空白来清除它。（或使用 .empty() 作为jackwanders的建议）

见：http: [//jsfiddle.net/sQF62/1/](http://jsfiddle.net/sQF62/1/)

请参阅：[没有内容的文本框的 Jquery 克隆](https://stackoverflow.com/questions/4366159/jquery-clone-of-a-textbox-without-the-content)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T19:00:45.553

我想你想要的是：

```
$('div.chapter p:eq(0)').clone(false).empty().insertBefore('div.chapter'); 
```

这将克隆段落，删除其子项，然后插入它。 `.clone(false)`only 意味着附加到原始元素的数据和事件不会被复制到克隆。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T17:05:58.620

我认为您正在寻找的是-

```
 $(document).ready(function(){
    //copy element and insert               
    var clone = $('div.chapter p:eq(0)').clone().empty();
    clone.insertBefore('div.chapter');

  }); 
```

clone() 之后的 empty() 方法删除所有子元素，即所选 HTML 元素的数据。

# javascript - jQuery / Javascript - 是否有可能获得链中的下一个调用

> ID：12079443
> 
> 赞同：0
> 
> 时间：2012-08-22T18:44:33.450
> 
> 标签：javascript, jquery

我已经看到链中的`.filter()`and`.end()`调用，这让我相信这是可能的。所以我制作了自己的函数，可以添加到链中`rawr()`

```
$('#object').fadeIn().rawr().delay(1000).fadeOut(); 
```

我希望 rawr() 看看接下来会发生什么，并根据它是什么，允许执行继续或结束链并移动到下一行代码。这是怎么做到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T19:04:46.363

如果不解析 JavaScript 源代码本身，就无法直接获取调用函数链中的下一个 jQuery 函数。

鉴于您的评论：

> 我在考虑不要只处理动画。

您将希望使用该[`queue`](http://api.jquery.com/queue)方法将函数存储在`fx`队列中。当自定义函数被执行时，`fx`队列会将 jQuery 链中的所有动画排入队列。

在您的自定义函数中，您将能够访问`fx`队列并检查排队的内容。在队列出队之前，您还可以调用[`clearQueue`](http://api.jquery.com/clearQueue)以删除任何排队的函数`fx`。

有必要将自定义排队函数出队，因为`fx`在当前执行的函数指示它已完成之前，队列不会继续为任何其他排队函数继续。

话虽如此，听起来你应该打破你的链条并有条件地执行方法，而不是尝试链接稍后简单清除的动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T18:56:20.427

有条件地结束一个链是可能的，看[这里](https://groups.google.com/forum/?fromgroups=#!topic/jquery-en/8NIIcn0qyxw)。

```
$.fn.if = function(flag) {
    return (flag) ? this.pushStack( this ) : this.pushStack( [] );
}; 
```

但是，无法提前查看链中的当前项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T18:56:44.010

这不是如何`.filter`工作`.end`的。就[在文档中](http://api.jquery.com/end/)：

> 当这种情况发生时，就好像新的元素集被推到了一个在对象内部维护的堆栈上。每个连续的过滤方法都会将一个新元素集推入堆栈。如果我们需要一个较旧的元素集，我们可以使用 end() 将集合从堆栈中弹出。

# vb.net - 无法弄清楚为什么我收到错误“对象引用未设置为对象的实例”

> ID：12079445
> 
> 赞同：1
> 
> 时间：2012-08-22T18:44:44.157
> 
> 标签：vb.net

我得到这个的代码块是，

```
 If userID > 0 Then
            Dim lq As New lqDFDataContext
            Dim var = lq.mobile_GetCustomChannels(userID).ToList()
            For Each c In var
                Dim channel As New SimpleChannel
                channel.channelID = c.channelID
                channel.userID = c.userID

                If c.matchTitle = True Then
                    channel.matchBy = "Title"
                End If

                If c.matchTitleAbstract = True Then
                    channel.matchBy = "Title and Abstract"
                End If

                If c.fromMyPage = True Then
                    channel.source = "My Page"
                Else
                    channel.source = "All Journals"
                End If

                   Dim tempKW() As String = c.keywords.Split(",")
                For Each kw As String In tempKW
                    channel.keywords.Add(kw)
                Next

                Dim imageKW As String = c.keywords.Substring(0, c.keywords.IndexOf(" "))
                channel.imageURL = SingleImageSearch(imageKW)

                result.Add(channel)
            Next
        End If 
```

“channel.keywords.Add(kw)”这一行是错误出现的地方。我已经使用这种技术数十次没有问题，这似乎与我使用它的所有其他时间相似，但我不断收到此异常。想不通为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T18:50:16.743

看起来您的`SimpleChannel`构造函数没有初始化`keywords`集合。确保构造函数实际上正在创建`keywords`（即：`keywords = new List(Of String)`或任何适当的）的实例。

# c# - 传递参数是否昂贵？

> ID：12079446
> 
> 赞同：0
> 
> 时间：2012-08-22T18:44:45.163
> 
> 标签：c#, performance, xna

我有一个在屏幕上绘制图块的方法，在这个方法中调用了同一个类中的一个名为 drawFloor 的方法，它可以绘制特定的图块。

在外部方法中，我在 drawFloor 调用的正上方启动了一个秒表，并在调用的正下方停止了它，我得到的时间是 2.4 毫秒。

然后我将秒表放入实际的drawFloor方法本身，使秒表体现了方法中的所有代码，我得到的时间是1.9毫秒。

我认为唯一可以及时做出这种改变的是参数的传递，我不明白为什么它这么贵。它只传递两个参数，一个传递给一个名为“camera”的自定义类，另一个传递给一个精灵批处理。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T18:47:21.083

不，它真的没那么贵。几乎可以肯定，这只是您的测量结果的差异。良好的微基准测试很难；完全有可能你做了一些改变事情的其他事情，或者你的机器可能只是不太忙于做其他事情。

方法调用和参数传递*并不*昂贵——当然不是半毫秒。

# php - 验证适合 csv 的数组

> ID：12079447
> 
> 赞同：0
> 
> 时间：2012-08-22T18:44:45.040
> 
> 标签：php, csv

是否可以在 php 中验证一个数组，以便尽早确定该结构是否适合导出为 csv 格式？

如果是，最好的方法是什么？

我想像数组这样的异常必须是数组数组（对于每一行），即：

```
array(
    array('row1-col1', 'row1-col2')
) 
```

还有第一个子数组不能是数组，即

```
array(
    array(array('this is not allowed'), 'row1-col2')
) 
```

并且必须有更多的格式例外才能成功导入。

我正在使用一个简单的循环和 fputcsv 导入

# c# - Error reading from Access DB in SSIS Script Task (C#)

> ID：12079452
> 
> 赞同：0
> 
> 时间：2012-08-22T18:45:09.910
> 
> 标签：c#, ms-access, ssis

> **Possible Duplicate:**
> [IErrorInfo.GetDescription failed with E_FAIL(0x80004005).System.Data while data adapter Fill()](https://stackoverflow.com/questions/6455909/ierrorinfo-getdescription-failed-with-e-fail0x80004005-system-data-while-data)

Below is the code I have to connect to an Access database in C#. The connection appears to open just fine (no exception is thrown by the conn.Open() command), however when it gets to the cmd.ExecuteReader() I get the following error message:

"IErrorInfo.GetDescription failed with E_Fail(0x80004005)."

I have checked and double checked to make sure the spelling is correct on the table I'm trying to pull from as well.

```
 System.Data.OleDb.OleDbConnection conn = new
        System.Data.OleDb.OleDbConnection();
        conn.ConnectionString = @"Provider=Microsoft Office 12.0 Access Database Engine OLE DB Provider;" +
                                @"Data source= C:\Users\nearod\Desktop\ImportDB.accdb";
        try
        {
            conn.Open();
            OleDbCommand cmd = new OleDbCommand("SELECT * FROM SQL ID Test Load", conn);

            OleDbDataReader reader = cmd.ExecuteReader();

            // Insert code to process data.
        }
        catch (Exception ex)
        {
            MessageBox.Show("Failed to connect to data source");
        }
        finally
        {
            conn.Close();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T18:56:18.160

Try changing

```
OleDbCommand cmd = new OleDbCommand("SELECT * FROM SQL ID Test Load", conn); 
```

To

```
OleDbCommand cmd = new OleDbCommand("SELECT * FROM [SQL ID Test Load]", conn); 
```

# actionscript-3 - AS3：旋转成向量

> ID：12079453
> 
> 赞同：3
> 
> 时间：2012-08-22T18:45:17.770
> 
> 标签：actionscript-3, vector, bitmap, rotation

嘿，我在 actionscript3 中旋转位图，完成旋转后，我想更新所面对的方向，所以我存储了位图旋转的度数，例如旋转 = 90°，现在我想将其转换为向量（x， y) 找出物体现在面对的方向

提前谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T19:49:49.330

你可以这样做，使用三角函数：

```
//convert degrees to rads
var rads:Number = bitmap.rotation / 180 * Math.PI;
//get the vector, I am using a point
var p:Point = new Point();
p.x = Math.cos(rads);
p.y = Math.sin(rads); 
```

现在，如果您想沿方向移动位图，只需执行以下操作：

```
bitmap.x += p.x * speed;
bitmap.y += p.y * speed; 
```

# java - 在 Drawable 数组之间创建动态交叉淡入淡出动画

> ID：12079456
> 
> 赞同：1
> 
> 时间：2012-08-22T18:45:22.130
> 
> 标签：java, android, user-interface, android-animation

我正在尝试创建一个类似幻灯片的界面，我可以在其中使用类似交叉淡入淡出的动画在两个相邻的幻灯片之间导航。例如，我希望有一种简单的方法可以在我想要的时候交叉淡入淡出到下一张图像。我一直在研究 Adnroid 的 TransitionDrawable，但它似乎不支持我寻求的导航，因为您只能启动整个动画而不是特定的幻灯片。另一方面，LayerDrawable 似乎支持我想要的导航但不支持动画。关于如何找到我想做的干净方法的任何想法？我已经使用单独的动画和侦听器实现了它，但它似乎不值得，因为可能未指定可绘制对象的数量。

# xslt-2.0 - xsl:apply-templates 带有元素内替换

> ID：12079457
> 
> 赞同：0
> 
> 时间：2012-08-22T18:45:28.897
> 
> 标签：xslt-2.0

非常感谢您提供的任何建议。我正在努力将 XML 文档的一部分转换为列表。我有大部分的转换工作；但是，我被一个`<emph>`子元素挂断了。我想用“（引号）替换它，但我无法制定替换策略。

干杯! XML:

```
<ead>
<archdesc>
    <dsc>
        <head>Container List</head>
        <c01 id="ref1251" level="file">
            <did>
                <unittitle>#464: Dutch. <emph render="doublequote">I know Mary [Frances <emph
                            render="doublequote">Dutchess</emph> (Watrous) Roth] packed it some
                        where!</emph>,</unittitle>
                <container id="cid4822615" type="Box" label="Mixed Materials">2</container>
                <container parent="cid4822615" type="Folder">110</container>
                <unitdate>undated</unitdate>
                <physdesc id="ref1252" label="General Physical Description note"
                    >(Negative)</physdesc>
            </did>
        </c01>
        <c01 id="ref1331" level="file">
            <did>
                <unittitle>#476: Mountain home near Cosby,</unittitle>
                <container id="cid4822586" type="Box" label="Mixed Materials">2</container>
                <container parent="cid4822586" type="Folder">139</container>
                <unitdate>undated</unitdate>
                <physdesc id="ref1332" label="General Physical Description note">(6 of
                    6)</physdesc>
                <physdesc id="ref1333" label="General Physical Description note"
                    >(Print)</physdesc>
            </did>
        </c01>
    </dsc>
</archdesc>
</ead> 
```

XSLT：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
version="2.0">

<xsl:output method="text"/>
<xsl:strip-space elements="*"/>

<xsl:template match="/">
    <xsl:apply-templates select="ead/archdesc/dsc"/>
</xsl:template>

<xsl:template match="dsc">
    <xsl:apply-templates select="c01/did"/>
</xsl:template>

<xsl:template match="did">
    <xsl:apply-templates select="unittitle"/>
    <xsl:text>&#09;</xsl:text>
    <xsl:text>Box: </xsl:text><xsl:apply-templates select="container[1]"/>
    <xsl:text>&#09;</xsl:text>
    <xsl:text>Folder: </xsl:text><xsl:apply-templates select="container[2]"/>
    <xsl:text>&#09;</xsl:text>
    <xsl:apply-templates select="unitdate"/>
    <xsl:text>&#09;</xsl:text>
    <xsl:apply-templates select="physdesc"/>
    <xsl:text>&#10;</xsl:text>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:11:01.670

**这是一个如何做到这一点的示例（在 XSLT 2.0 和 XSLT 1.0 中）：**

```
<xsl:stylesheet version="2.0"   xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="emph[@render eq 'doublequote']">
     <xsl:text>"</xsl:text>
     <xsl:apply-templates/>
     <xsl:text>"</xsl:text>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下简短 XML 文档时**（摘自提供的文档）：

```
<unittitle>#464: Dutch. 
    <emph render="doublequote">I know Mary [Frances 
        <emph render="doublequote">Dutchess</emph> (Watrous) Roth] packed it some
                        where!</emph>,
</unittitle> 
```

**产生了想要的正确结果**：

```
#464: Dutch. 
    "I know Mary [Frances 
        "Dutchess" (Watrous) Roth] packed it some
                        where!", 
```

# html - ITextSharp：更改表格单元格边框的颜色

> ID：12079458
> 
> 赞同：1
> 
> 时间：2012-08-22T18:45:33.143
> 
> 标签：html, css, itextsharp

我花了一段时间试图研究这个，但还没有想出一个方法来做到这一点。基本上，我正在使用 ITextSharp 将相当基本的动态 html 转换为 pdf。在 html 中，有一些表格可以很好地转换，但我找不到改变边框颜色的方法。它只是以纯黑色的形式出现。

```
 StyleSheet css = new StyleSheet();
    css.LoadTagStyle(HtmlTags.TD, HtmlTags.BORDER, "1"); 
```

那打开了边框，但是有没有办法将边框颜色从黑色更改为我想要的任何颜色？

# python - Python 2D 列表性能，没有 numpy

> ID：12079465
> 
> 赞同：3
> 
> 时间：2012-08-22T18:45:49.443
> 
> 标签：python, numpy

我正在尝试在 Python 中创建一个二维列表。我发现了两种可能。

```
def cArray(size):
    c = [[0\. for i in range(size)] for j in range(size)]
    return c

def npArray(size):
    np = numpy.zeros((size,size))
    return np 
```

现在这两个函数都给出了正确的答案。这里的问题在于性能。我使用 timeit 运行了这两个，这是我的结果：

```
list size is 5000
number of times run is 5

cArray average time: 3.73241295815
npArray average time: 0.210782241821 
```

所以很明显，我想避免第一个解决方案，特别是因为这将运行高达 100k 的大小。但是，我也不想使用太多的依赖项。我有没有办法在没有 numpy 的情况下有效地创建二维数组？它不需要完全跟上速度，只要不慢 17 倍即可。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T18:57:40.820

> 所以很明显，我想避免第一个解决方案，特别是因为这将运行高达 100k 的大小。但是，我也不想使用太多的依赖项。

您必须选择其中哪个对您更重要。Numpy 具有更好的性能正是因为它不使用内置的 Python 类型，而是使用自己的类型，这些类型针对数值工作进行了优化。如果您的数据将是数字数据并且您将拥有 100k 行/列，那么您将看到使用 numpy. 如果你想避免 numpy 依赖，你将不得不忍受性能下降。（显然，您总是可以编写自己的 Python 库或 C 扩展来针对您的特定用例进行优化，但是这些将像其他任何依赖项一样成为依赖项。）

我个人建议你只使用 numpy。它使用如此广泛，以至于任何正在考虑使用处理 100k 多维数组的库的人都可能已经安装了 numpy。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T18:49:03.533

我尝试了几种选择；

**编辑：**原来的 eArray 有问题，它创建了对同一个列表的引用......

**Edit2：**按照塞巴斯蒂安的建议添加`array.array`。

```
import time
import numpy as np
import array

t1 = 0

def starttimer():
    global t1
    t1 = time.clock()

def stoptimer(s):
    t2 = time.clock()
    print 'elapsed time for "{}": {:.3f} seconds'.format(s, t2-t1)

def cArray(size):
    c = [[0\. for i in range(size)] for j in range(size)]
    return c

def dArray(size):
    d = [[0\. for i in xrange(size)] for j in xrange(size)]
    return d

def eArray2(size):
    return [[0.]*size for j in xrange(size)]

def fArray(size):
    return np.zeros((size,size))

def gArray(size):
    return [array.array('d', [0])*size for j in xrange(size)]

sz = 5000

starttimer()
cArray(sz)
stoptimer('cArray')

starttimer()
dArray(sz)
stoptimer('dArray')

starttimer()
fArray(sz)
stoptimer('fArray')

starttimer()
gArray(sz)
stoptimer('gArray') 
```

结果（FreeBSD amd64 上的 cpython 2.7.3，如果有人关心的话）：

```
> python tmp/test.py
elapsed time for "cArray": 2.312 seconds
elapsed time for "dArray": 1.945 seconds
elapsed time for "eArray2": 0.680 seconds
elapsed time for "fArray": 0.180 seconds
elapsed time for "gArray": 0.695 seconds
> python tmp/test.py
elapsed time for "cArray": 2.312 seconds
elapsed time for "dArray": 1.914 seconds
elapsed time for "eArray2": 0.680 seconds
elapsed time for "fArray": 0.180 seconds
elapsed time for "gArray": 0.695 seconds
> python tmp/test.py
elapsed time for "cArray": 2.328 seconds
elapsed time for "dArray": 1.906 seconds
elapsed time for "eArray2": 0.680 seconds
elapsed time for "fArray": 0.180 seconds
elapsed time for "gArray": 0.703 seconds 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T18:51:19.833

如果你想达到非常低的水平，你可以使用`ctypes`：

```
a = (ctypes.c_int * 5000 * 5000)() 
```

但是 NumPy 在运行 Python 的大多数平台上都可用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-11T10:37:21.157

我的用例是在一些在线判断平台上，库依赖是有限的，但是在做动态规划时需要二维数组（也很难向量化）。我那里的python代码经常超过时间限制。

有几点要提醒：

1.  尽管 python list 是一个指针数组，但天真的对象非常快。

2.  在创建对象时使用像 numpy 这样的紧凑结构可能会很快，但访问元素会花费额外的开销，这与天真的 python 对象不同，

3.  除非使用像[Numba](http://numba.pydata.org/)这样的 JIT 东西。

使用玩具 DP 示例测试代码：

```
import timeit

size = 1000

range_init_0 = "size={}".format(size)
range_init_1 = "a = [[0 for i in range(size)] for j in range(size)]"

multi_init_0 = "size={}".format(size)
multi_init_1 = "a = [[0]*size for _ in range(size)]"

numpy_init_0 = "from numpy import zeros; size={}".format(size)
numpy_init_1 = "a = zeros((size, size), dtype=int)"

array_init_0 = "from array import array; size={}".format(size)
array_init_1 = "a = [array('d', [0])*size for j in range(size)]"

ctyps_init_0 = "from ctypes import c_int; size={}".format(size)
ctypes_init_1 = "a = (c_int * size * size)()"

dp = '''
MOD = int(1e9+7)
for i in range(size):
    a[i][0] = 1
for j in range(size):
    a[0][i] = 1
for i in range(1, size):
    for j in range(1, size):
        a[i][j] = (a[i][j] + a[i-1][j] + a[i][j-1]) % MOD
'''

def test(name, init_0, init_1, dp, n=10):
    t = timeit.timeit(init_1, setup=init_0, number=n)
    print("{} initial time:\t{:.8f}".format(name, t))
    t = timeit.timeit(dp, setup=init_0 + '\n' + init_1, number=n)
    print("{} calculate time:\t{:.8f}".format(name, t))

test("range", range_init_0, range_init_1, dp)
test("multi", multi_init_0, multi_init_1, dp)
test("numpy", numpy_init_0, numpy_init_1, dp)
test("array", array_init_0, array_init_1, dp)
test("ctypes", ctyps_init_0, ctypes_init_1, dp)

print('------')
numba_init_0 = '''
import numpy as np
size = {}
a = np.zeros((size, size), dtype=np.int32)
'''.format(size)
numba_init_1 = '''
import numba
def dp1(a):
    size = len(a)
    MOD = int(1e9+7)
    for i in range(size):
        a[i][0] = 1
    for j in range(size):
        a[0][i] = 1
    for i in range(1, size):
        for j in range(1, size):
            a[i][j] = (a[i][j] + a[i-1][j] + a[i][j-1]) % MOD
dp_jit = numba.jit('void(i4[:,:])')(dp1)
'''
dp = "dp_jit(a)"

test("numba", numba_init_0, numba_init_1, dp) 
```

结果：

```
range initial time:     0.56781153
range calculate time:   5.08359793
multi initial time:     0.03682878
multi calculate time:   5.14657282
numpy initial time:     0.00883761
numpy calculate time:   12.15619322
array initial time:     0.02656035
array calculate time:   5.27542352
ctypes initial time:    0.00523795
ctypes calculate time:  7.88469346
------
numba initial time:     2.98394509
numba calculate time:   0.05321887 
```

（这里的numba初始化时间不包括numpy初始化）

正如我们所见，numpy 和 ctypes 在计算时都比原生列表慢。

Numba JIT 需要一些时间，但计算时间明显更短。

（并且不要在在线判断平台上使用 Python 进行 2D 动态编程！）

# jquery - 三折在线宣传册作为网站，如何制作动画？

> ID：12079467
> 
> 赞同：2
> 
> 时间：2012-08-22T18:45:54.247
> 
> 标签：jquery, jquery-animate, flip, fold

我目前正在网上查看下一个问题的解决方案。我想为一家生产各种印刷品的公司创建一个在线电子手册。

小册子或文件夹，或任何你真正称呼它的东西，应该分成三部分。一个三折。

我希望它用我认为的 javascript 制作动画。我不是很喜欢闪光灯。

它应该看起来像这个例子：(http://flyingtinman.com/PV3D/cards/trifold.swf) 具有在两个水平方向上单击和打开/关闭不同侧的选项，以及将所有内容翻转到它的背面。

这应该可以使用 jQuery 或类似的东西来实现。最有效的方法是如果已经有一个库（我找不到）。

有人知道任何教程或类似的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T19:06:39.077

对于 JavaScript 中的页面翻转模拟，您需要在 Canvas 或 WebGL 中进行动画处理。教程。我所知道的或允许网格弯曲的 API 都没有。这东西还是有点新，flash 仍然会比画布动画更好，对所有浏览器都更流畅等等。WebGL 是 flash 的唯一竞争对手。但这应该是 IE 10。

# sql - 查询创建冗余条目

> ID：12079471
> 
> 赞同：0
> 
> 时间：2012-08-22T18:46:05.513
> 
> 标签：sql, ms-access, ms-access-2010

我已经使用 MS Access 2010 有一段时间了，但我遇到了很大的问题。我将[在此处](https://docs.google.com/open?id=0B38suP6Vp2TONmxhdm5oUGt4R28)附上一个虚拟数据库以供参考。很简单，三个表：2 个用于数据，1 个用作多对多关系的连接。我有一个查询，我希望能够输入值。假设我输入以下内容：

```
+-------------+-------------+
|    NameA    |    NameB    |
+-------------+-------------+
|    Frank    |    Bob      |    
|    Frank    |    Harry    |
|    Tom      |    Harry    |
+-------------+-------------+ 
```

2 个数据表将以**冗余条目**结束。就好像查询只是添加一个新条目，而不管表中已有什么。我该如何解决？

提前致谢。

更新：这里的每个请求是查询代码

```
SELECT Table1.NameA, Table2.NameB
FROM Table2 
INNER 
JOIN (Table1 INNER JOIN Table3 ON Table1.ID = Table3.IDA) 
ON Table2.ID = Table3.IDB; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:20:01.863

我在[这里](http://rogersaccessblog.blogspot.com/2010/07/how-do-i-add-value-to-combo-box-with.html)找到了答案。

要点如下：

1.  通过 DataSheet View 提供给查询的内置功能非常简单。它只添加新记录，而不考虑创建冗余条目。

2.  在查询/表级别上无法轻松实现所需的功能。因此，我在表单/报告级别实现了它。就个人而言，理论上我看不到在查询/表级别上实现它的方法，但我确信那里有 VBA 大师可以做任何事情。

3.  设计人员可以为多对多关系中的每个所需字段使用组合框。这保证没有多余的条目。然后要添加新条目，必须将 VBA 代码添加到组合框的“不在列表中”属性中。见上面的链接。

希望这对将来的某人有所帮助。我知道我很高兴。谢谢您的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T19:55:03.773

听起来像[w3schools.com](http://www.w3schools.com/sql/sql_join_inner.asp)的示例， 当您进行内部连接时，它会从任何列匹配的两个表中获取信息。我假设两个表中都有其他列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T19:56:13.680

通常，交叉引用表将连接 Table1 和 Table2，如下所示：

```
选择表 1.名称 1、表 2.名称 2
FROM ((Table1 INNER JOIN TableRef ON Table1.ID1 = TableRef.ID1) INNER JOIN Table2 ON Table2.ID2 = TableRef.ID2)

```

尝试：

```
选择 DISTINCTROW 表 1.名称 1、表 2.名称 2
FROM ((Table1 INNER JOIN TableRef ON Table1.ID1 = TableRef.ID1) INNER JOIN Table2 ON Table2.ID2 = TableRef.ID2)

```

# objective-c - 使用 Restkit 对象映射的同一对象的多个实例

> ID：12079475
> 
> 赞同：0
> 
> 时间：2012-08-22T18:46:18.907
> 
> 标签：objective-c, ios, restkit, object-object-mapping

我正在使用带有嵌套 json 数据的 Restkit 对象映射。它会很好用，每个歌曲对象都有一个相关的说唱歌手对象。除非您在下面看到，两首歌曲的 rapper 相同，但每个歌曲对象都有一个单独的 rapper 对象实例，因此在比较时它们不匹配。如果 Restkit 基于唯一 id 存在，有没有办法让它们使用相同的实例？

```
{
            "id": "1",
            "user_id": "200",
            "filename": "filename1.mp3",
            "mdate": "1250191261"
            "rapper": {
                "name": "Rap King",
                "id": "200"
            }
        },
        {
            "id": "2",
            "user_id": "200",
            "filename": "filename2.mp3",
            "mdate": "1345630910",
            "rapper": {
                "name": "Rap King",
                "id": "200"
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:50:17.463

如果您使用的是 Core Data 支持的映射，则需要`primaryKeyAttribute=@"id"`在`RKManagedObjectMapping`.

# regex - Django URL，使用 ? 在网址中

> ID：12079476
> 
> 赞同：7
> 
> 时间：2012-08-22T18:46:19.657
> 
> 标签：regex, django, urlconf

我正在尝试做一些 Django URL 匹配。

我想要一些我有[http://mysite.com/base?sort=type1/](http://mysite.com/base?sort=type1/)，[http://mysite.com/base?sort=type2/](http://mysite.com/base?sort=type2/)等的网址。

我不知道如何通过 URL 匹配这些表达式：我对 Django 很陌生，以前从未使用过 Reg Ex。

我的“基础”应用程序中的 urls.py 是：

```
url(r'^$','base.views.main, name='main'), 
```

我不知道该放什么来匹配我的网址和问号。

我正在尝试类似的东西

```
url(r'^?sort=popular/$', 'base.views.main_popular', name='main_popular'), 
```

感谢帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T18:50:04.840

您没有将这些与正则表达式匹配。后面的元素`?`不是 URL 的一部分，它们是查询参数，可以通过`request.GET`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-22T19:00:33.520

? 不会匹配“？” 在 url 中，它有自己的含义，您可以在此处查找：
[Python 正则表达式](http://docs.python.org/library/re.html) 如果您想匹配“？”的确切字符 在您的 url 中，您必须以某种方式对其进行转义（因为它在 RegExs 中具有含义），因此您可能想通过“\”（反斜杠）对其进行转义，因此您可以编写 \?sort ....

编辑：
好的，你在评论中所说的，似乎这是你的问题，`main?sort=popular`当你`/main/`使用`GET`方法字典参数渲染模板时，你的 url 模式上会发生`sort=popular`，只需编写一个区分`GET`和的函数`POST`，在`GET`部分中，喜欢某物`sort_by = request.GET.get('sort','')`，然后使用 sort_by 变量的值进行相应的排序，就像：

```
def main_handler(request):
     if request.method == "POST":
           whatever ... 
     if request.method == "GET" :
           sort_by = request.GET.get('sort','')
           if sort_by:
                 sort by what sort points to 
                 return "the sorted template"
     return render_to_response(the page and it's args) 
```

然后放手？在 url 模式中，当您请求带有 GET 参数的页面时添加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-22T17:06:38.713

你不需要这个。相反，您可以制作一个通用模板和视图。

```
#And this is the views.py
def main_handler(request):
    if request.method == "GET":
        sort_parameter = request.GET.get('sort')
        if sort_parameter:
             #the code to sort the database objects on basis of the sort parameter
             return render(The template and its kwargs)
        #your other code 
```

您的 urls 文件应如下所示：

```
urlpatterns = [
url(r'base/', 'base.views.thecommonview', name='main'),
] 
```

# java - 为 Google App Engine 优化应用架构和实现

> ID：12079477
> 
> 赞同：6
> 
> 时间：2012-08-22T18:46:21.450
> 
> 标签：java, google-app-engine, optimization, architecture

据我了解，GAE 的计费都归结为*实例小时数*（“IH”），或者在一段时间内运行了多少服务器实例。然而，这显然不是*那么*简单，因为除了 IH 之外，您还必须在一天中的整个过程中了解配额和资源限制（因为配额每 24 小时补充一次）。

我正在设计我的第一个 GWT/GAE 应用程序，并且遇到了许多文章（其中一些在下面引用），其中作者谈论了他们必须对其代码进行的主要重构 - 发布后 - 为了提供帮助与 Google 一起最大程度地降低计费和运营成本。

在一个例子中，开发人员对其 GAE 应用程序实施了一组优化，导致同一应用程序从每天 7 美元（约 220 美元/月）降至 0 美元，因为它最终低于资源的“免费”配额和计费阈值.

作为 GAE 的新手，我想知道是否有任何一组原则或实践可以预先融入我的应用程序的架构/设计中，一旦渗透到已实现的功能代码并部署到 GAE，将导致应用程序尽可能高效地运行（从金钱上讲）。

以下是我到目前为止所做的一些推论：

*   最大化缓存并最小化数据存储命中
*   尝试将尽可能多的异步请求处理推送到后端实例
*   启用并发 HTTP 请求处理，以便同一个实例可以同时处理多个请求

所以我的问题是：我所做的这些概括是否不正确，如果是，为什么（或者它们是有条件的，在某些情况下它们成立但在其他情况下不成立）？我在这里遗漏了什么重要的东西吗？例如，如何确定哪些代码属于后端实例（资源限制稍微宽松一点），使用哪种 GAE 特定的分析工具（AppStats、SpeedTracer 等）来查看瓶颈等。

此外，一些引用的文章：

*   [配置最大空闲和最小延迟](http://blog.bugsense.com/post/9672960550/optimizing-google-appengine-for-the-new-pricing-changes)
*   GAE 自己的[扩展最佳实践](https://developers.google.com/appengine/articles/scaling/overview)
*   [CPU优化](https://stackoverflow.com/questions/250209/how-can-i-optimize-this-google-app-engine-code)示例

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T06:22:39.740

根据经验，App Engine 优化策略有很多，其适用性取决于您的应用程序的性质。以下是我知道的更多提示：

*   对于提供大量相对静态内容的应用程序，[启用（尚未记录的）边缘缓存](http://code.google.com/p/googleappengine/issues/detail?id=2258#c14)可能是您每周账单的福音。

*   即使启用了[并发请求/线程安全](https://developers.google.com/appengine/docs/java/config/appconfig#Using_Concurrent_Requests)，在调度程序决定为您启动一个新实例之前，每个前端实例[也只能处理 8 个（对于 Python）到 10 个（Java、Go）同时传入的请求。](http://code.google.com/p/googleappengine/issues/detail?id=7927#c3)

*   为了解决上述限制，我认为有一个 Google I/O 视频建议您将发送到前端实例的任何面向用户的请求的响应时间减少到 ~100 毫秒。

*   根据上述策略，如果您有任何需要大量处理或数据存储 I/O 的任务，请将任务卸载到[推送任务队列](https://developers.google.com/appengine/docs/java/taskqueue/overview)，并立即响应请求。您可以指定[任务队列的目标](https://developers.google.com/appengine/docs/java/config/queue#target)，但为此它不需要是后端，前端实例足够好，并提供无限的可扩展性。

*   如果您使用上述策略但仍需要将处理或 I/O 的结果提供给用户，请使用[Channel API](https://developers.google.com/appengine/docs/java/channel/overview)或任何其他消息传递服务将结果异步发送回。

*   任务队列是分配应用程序工作负载的好东西。您可以[详细自定义其行为](https://developers.google.com/appengine/docs/java/config/queue#Queue_Definitions)，它们对于确保您的应用程序可以很好地扩展非常宝贵。您甚至可以使用推送队列和拉取队列在实例之间进行双向通信。

[稍后我会添加更多的点。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T15:38:10.853

大多数情况下，成本优化将特定于您的应用程序。由于您询问的是一般原则，它们主要适用于 CPU 和数据存储。

中央处理器：

注意为停滞的 CPU 付费。如果您的 CPU 因长时间操作（缓慢的数据存储请求或 URL 获取等）而停滞不前，App Engine 可能会启动另一个实例，从而增加您的成本。为此有许多策略 - 启用线程、任务队列。我怀疑当您谈到将异步请求放在后端时，也是为了解决这个问题。有多种方法可以处理这个问题。

数据存储：

1.  仔细控制你的索引。索引会大大增加您的成本。

2.  仔细设计您的 datstore，以尽量减少您需要的请求数量。

3.  非规范化。非规范化是 NoSQL 数据存储的标准过程。本质上，这意味着在必要时将重复数据存储在多个实体中。这在 App Engine 上节省了美元，因为您为每个请求付费，但您无需为返回的实体的大小付费。例如，如果您有销售小部件的商店，您可能希望将所有单个商店小部件的汇总版本存储在商店实体中（前提是它应该适合 1MB 实体限制）。这样，当您显示商店页面时，您只获取一个商店实体，而不是商店实体加上每个小部件实体。同样，如果您需要计算小部件的数量，最好在商店实体中包含该值，而不是发出查询来获取计数。

缓存：

缓存可以在 CPU 和数据存储方面为您节省资金。来自 Google IO 的一段非常棒的视频： [https ://developers.google.com/events/io/sessions/gooio2012/310/](https://developers.google.com/events/io/sessions/gooio2012/310/)

# r - R：每次在数据中出现 n 个唯一级别时对因子进行分组

> ID：12079478
> 
> 赞同：4
> 
> 时间：2012-08-22T18:46:22.457
> 
> 标签：r, unique, grouping, levels, factors

每次有 5 个独特的关卡时，我都想要一个新的分组

前任。varB 是期望的结果

```
structure(list(varA = structure(c(2L, 2L, 3L, 5L, 4L, 1L, 1L, 
2L, 3L, 5L, 4L, 4L, 1L), .Label = c("badger", "cat", "dog", "monkey", 
"turtle"), class = "factor"), varB = c(1L, 1L, 1L, 1L, 1L, 1L, 
1L, 2L, 2L, 2L, 2L, 2L, 2L)), .Names = c("varA", "varB"), class = "data.frame", row.names = c(NA, 
-13L)) 
```

*编辑*：关于数据的一些假设：

*   级别稍后在数据中重复
*   新的水平出现在数据的后面
*   数据中没有固定的顺序

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T20:41:18.087

对“新”值的累积和使用模除法：

```
dat$cu5 <- with(dat, 1+ cumsum( c(0, varA[-length(varA)] != varA[-1])) %/% 5) 
```

仅当您希望编号从 1 开始时才需要添加一个。如果您将其分解并添加标签，则不需要它。

# ffmpeg - 编译ffmpeg：如何强制它链接到特定的libx264？

> ID：12079480
> 
> 赞同：0
> 
> 时间：2012-08-22T18:46:25.723
> 
> 标签：ffmpeg, x264

我正在尝试编译最新版本的 ffmpeg（在 CentOS 5.3 中）。我首先下载了最新版本的 libx264，编译`--enable-static`并安装在`/usr/local/`. 但是，当我编译 ffmpeg 时，我收到以下错误消息：

```
libavcodec/libavcodec.a(libx264.o): In function `X264_init':
/usr/local/src/ffmpeg/libavcodec/libx264.c:494: undefined reference to `x264_encoder_open_125'
collect2: ld returned 1 exit status
make: *** [ffmpeg_g] Error 1 
```

在网上搜索，我发现如果 ffmpeg 正在选择旧版本的 libx264，我确实有（在 中`/usr/lib`）并且无法卸载，因为其他软件依赖它，所以会发生这种情况。那么问题是：如何强制 ffmpeg 链接到我想要的 libx264？上一次我必须这样做（诚然是一年前）我也有 2 个版本的 libx264，我不记得必须做任何特别的事情。有没有我忘记的配置开关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T18:44:38.423

使用和 android-ffmpeg git 项目作为静态 x264 库的[示例](https://github.com/halfninja/android-ffmpeg-x264/blob/master/Project/jni/configure_ffmpeg.sh)，就像'blahdblah' 已经说过的......我认为你只需要在 CC 和 LINK 阶段正确设置你的库路径。请注意链接底部的“cflags”和“ldflags”开关。

我并不是要通过介绍一个 android 示例来使事情复杂化，但是看看这个 'config_ffmpeg' 的实例可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T04:26:24.287

你只是想解码h264吗，我们有一个基于ffmpeg .8的框架，看起来比最新的稳定一点

www.github.com/mooncatventures-group

# javascript - 使用内部脚本的 SVG 单选按钮逻辑

> ID：12079482
> 
> 赞同：1
> 
> 时间：2012-08-22T18:46:41.310
> 
> 标签：javascript, dom, svg

我正在尝试使用 SVG 制作单选按钮控件。我希望一次只选择一个单选按钮。我通过将其`inner-circle`元素的大小设置为预定义的大小 ( `11`) 来“选择”一个单选按钮。下面是我认为应该能够做到的代码。我正在使用类来跟踪控件的状态。下面是一个示例 svg 文件。

```
<svg
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   version="1.1"
   width="300"
   height="400"
   id="radio">
    <script type="application/ecmascript"><![CDATA[
      var innerCircleExpandedSize = 11;
      function ResponseOptionClicked(evt) {
          console.log('Response option clicked');
          // Remove circle in enabled element
          var enabledElem = document.getElementsByClassName('enabled')[0];
          console.debug(enabledElem);
          if (enabledElem != undefined) {
              console.log('Removing a inner circle');
              enabledElem.getElementsByClassName('response-innercircle')[0].setAttribute('r', 0);
              enabledElem.className.baseVal = enabledElem.className.baseVal.replace('enabled', 'disabled');
              console.log('Removed the inner circle');
          }

          // Add circle in radio button
          console.log('Adding a inner circle');
          evt.currentTarget.getElementsByClassName('response-innercircle')[0].setAttribute('r', innerCircleExpandedSize);
          evt.currentTarget.className.baseVal = evt.currentTarget.className.baseVal.replace('disabled', 'enabled');
          console.log('Added the inner circle');
      }
  ]]></script>    
    <g id="base">
            <g class="response-option disabled" transform="translate(50,150)" onclick="ResponseOptionClicked(evt)" fill="#ffffff">
                <circle class="response-outercircle" r="18" stroke="#000000" stroke-width="3" stroke-miterlimit="4" stroke-opacity="1" stroke-dasharray="none" />
                <circle class="response-innercircle" r="0" fill="#000000" stroke="#000000" />
                <text x="40"  y="6.5" class="response-text" fill="blue" font-size="1.5em">Rarely</text>
            </g>
            <g class="response-option disabled" transform="translate(50,200)" onclick="ResponseOptionClicked(evt)" fill="#ffffff">
                <circle class="response-outercircle" r="18" stroke="#000000" stroke-width="3" stroke-miterlimit="4" stroke-opacity="1" stroke-dasharray="none" />
                <circle class="response-innercircle" r="0" fill="#000000" stroke="#000000" />
                <text x="40"  y="6.5" class="response-text" fill="blue" font-size="1.5em">Sometimes</text>
            </g>
            <g class="response-option disabled" transform="translate(50,250)" onclick="ResponseOptionClicked(evt)" fill="#ffffff">
                <circle class="response-outercircle" r="18" stroke="#000000" stroke-width="3" stroke-miterlimit="4" stroke-opacity="1" stroke-dasharray="none" />
                <circle class="response-innercircle" r="0" fill="#000000" stroke="#000000" />
                <text x="40"  y="6.5" class="response-text" fill="blue" font-size="1.5em">Often</text>
            </g>
            <g class="response-option disabled" transform="translate(50,300)" onclick="ResponseOptionClicked(evt)" fill="#ffffff">
                <circle class="response-outercircle" r="18" stroke="#000000" stroke-width="3" stroke-miterlimit="4" stroke-opacity="1" stroke-dasharray="none" />
                <circle class="response-innercircle" r="0" fill="#000000" stroke="#000000" />
                <text x="40"  y="6.5" class="response-text" fill="blue" font-size="1.5em">Always</text>
            </g>
    </g>
</svg> 
```

当按下第一个按钮时，代码按预期工作并且第一个按钮被关闭，但是在按下更多按钮后，它会继续尝试关闭原始按钮，从而导致其他按钮能够被启用。我猜我只是犯了一个简单的逻辑错误，但是我花了一段时间试图追踪它但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T19:28:58.230

你在firefox里试过吗？使用该浏览器似乎对我有用....

# java - 活动之间的Android数据检索

> ID：12079483
> 
> 赞同：1
> 
> 时间：2012-08-22T18:46:42.877
> 
> 标签：java, android, android-layout, android-intent, android-activity

我试图让我的 Android 项目通过编辑文本区域检索用户号码。这可能已经在我的代码中完全完成。我不知道如何在方程式中使用捕获的数据，并通过文本框在屏幕上的第二个活动中显示结果。解决方案可能比目前看起来更简单。如果您想要更多的细节和整体信息，请告诉我。

第一项活动：

```
 package com.klinetel.bac.calculator;

 import android.os.Bundle;
 import android.app.Activity;
 import android.app.AlertDialog;
 import android.view.View;
 import android.widget.*;
 import android.content.*;

 public class MainActivity extends Activity {

RadioGroup group1;
RadioButton maleRadio, femaleRadio;
 // Button button = (Button)findViewById(R.id.button1);

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    AlertDialog.Builder alert = new AlertDialog.Builder(this);
    alert.setTitle("The Result");
    alert.setMessage("Your Blood Alcohol Content Percentage is:");
    alert.setPositiveButton("OK", null);
    alert.create().show();

Button button = (Button)findViewById(R.id.button1);
button.setOnClickListener(new View.OnClickListener(){

    @Override
    public void onClick(View view)
    {
        Intent intent = new Intent(view.getContext(),ResultsActivity.class);
        startActivityForResult(intent,0);
        finish();

    }

});
}

//Input conversion-to-string-attributes
public void calcBAC(){

   //weight
   EditText editWeight = (EditText)findViewById(R.id.editText1);
   double weight = Double.parseDouble(editWeight.getText().toString());

   //hours
   EditText editHours = (EditText)findViewById(R.id.editText2);
   double hours = Double.parseDouble(editHours.getText().toString()); 

   //drinks
   EditText editDrinks = (EditText)findViewById(R.id.editText3);
   double drinks = Double.parseDouble(editDrinks.getText().toString());

   //radio buttons
   maleRadio=(RadioButton)findViewById(R.id.radio0);

   femaleRadio=(RadioButton)findViewById(R.id.radio1);

   //bac total
   double resultBAC=0;

   //male formula
   if(maleRadio.isChecked()){

       resultBAC=(((EQUATION HERE))/2;

   }
   //female formula
   else if(femaleRadio.isChecked()){

       resultBAC=(((EQUATION HERE))/2;
   }

}

} 
```

第二个活动：

```
package com.klinetel.bac.calculator;

import android.os.Bundle;
import android.app.Activity;
import android.view.*;
import android.widget.*;
import android.content.Intent;

public class ResultsActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_results);

TextView result;

Button button = (Button)findViewById(R.id.backButton);

button.setOnClickListener(new View.OnClickListener(){

    @Override
    public void onClick(View view)
    {
        Intent intent = new Intent(view.getContext(),MainActivity.class);
        startActivityForResult(intent,0);
        finish();

    }

});
result=(TextView)findViewById(R.id.textView1);
//result=resultBAC.getValue;
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T19:09:14.663

您可以使用 Extra 将数据传递给第二个活动。您可以将单个值传递给意图，或者如果您有一堆不同的数据值要在活动之间传递，则可以传递“捆绑”

在您的第一个活动中添加以下内容：

```
Intent intent = new Intent(view.getContext(),ResultsActivity.class);
intent.putExtra("extraname", "extravalue");
intent.putExtra("extraname2", 9.99);
startActivityForResult(intent,0);
finish(); 
```

然后在您的接收活动中

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_results);
String extra = getIntent().getStringExtra("extraname") //returns null if nothing
Double extra2 = getIntent().getDoubleExtra("extraname2") 
```

ETC

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T18:56:14.503

您可以使用“Bundle”类在活动之间共享数据。例如，您可以执行以下操作：

```
Bundle extras = getIntent().getExtras();
if (extras != null) 
{
    username = extras.getString("username");
    password = extras.getString("password");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T18:52:23.987

如果要向下一个Activity发送数据，可以使用[Intent.putExtra()和Intent.getExtra()](https://stackoverflow.com/a/2141166/824345)分别在Activity之间发送和检索数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T21:41:36.190

..或者您可以简单地使用静态方法实现一个实用程序类来存储您想要在活动之间传递的值。

# c# - Sitecore 从媒体库加载 XML 文件？

> ID：12079486
> 
> 赞同：5
> 
> 时间：2012-08-22T18:46:54.640
> 
> 标签：c#, xml, sitecore, sitecore6, xmldocument

我正在尝试从媒体库加载 xml 文件，但路径有问题。当 xml 文件位于实际服务器文件中时，或者当它位于另一个托管站点上时，我已经能够加载 xml，但当文件位于媒体库中时则不能。xml 文件是否必须是托管在某处的物理文件？

这是我检索媒体项目路径的代码：

```
Sitecore.Data.Database master = Sitecore.Configuration.Factory.GetDatabase("master");
Sitecore.Data.Items.Item sampleItem = master.GetItem("/sitecore/media library/Files/eBooks/testxml");
Sitecore.Data.Items.Item sampleMedia = new Sitecore.Data.Items.MediaItem(sampleItem);
string url = Sitecore.StringUtil.EnsurePrefix('/', Sitecore.Resources.Media.MediaManager.GetMediaUrl(sampleMedia)); 
```

然后，当我加载 xml 时，我正在执行以下操作：

```
XmlDocument xDoc = new XmlDocument();
xDoc.Load(Server.MapPath(url)); 
```

它返回的路径是正确的，因为我已经测试将它放在锚标记中以查看它是否会链接到 xml 文件，并且确实如此。我在这个站点上找到了类似的帖子，但似乎没有一个涉及 xml.Load 上下文中的媒体库项目。

任何有关这是否可能或我可以做些什么来使它工作的信息将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T19:16:28.267

`Server.MapPath`将尝试将相对或虚拟路径映射到服务器上的**物理**文件/文件夹。

尝试删除 MapPath，并为`xDoc.Load(url);`. 或者，您可以使用 WebClient 下载 XML 文档并将字符串传递给您的 XmlDocument：

```
using (var client = new WebClient())
{
    string strXml = client.DownloadString(new Uri(url));
    xmlDoc.LoadXml(strXml);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-22T20:16:08.393

使用媒体流而不是尝试传递路径或使用 WebClient：

```
Sitecore.Data.Database master = Sitecore.Configuration.Factory.GetDatabase("master");
Sitecore.Data.Items.Item sampleItem = master.GetItem("/sitecore/media library/Files/testxml");
Sitecore.Data.Items.Item sampleMedia = new Sitecore.Data.Items.MediaItem(sampleItem);

XmlDocument xmdDoc = new XmlDocument();
xmdDoc.Load(MediaManager.GetMedia(sampleMedia).GetStream().Stream); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-23T17:54:56.193

这是我用来从 Sitecore 媒体库读取 XML（或可能是 JSON）文件的示例代码。

```
 Sitecore.Data.Items.Item xmlMedia = new Sitecore.Data.Items.MediaItem(Sitecore.Context.Database.GetItem("/~/media/mySiteName/files/sampleXmlItem"));

    //OR

    Sitecore.Data.Items.Item xmlMedia = new Sitecore.Data.Items.MediaItem(Sitecore.Context.Database.GetItem(RenderingContext.Current.Rendering.DataSource));

    var fileType = xmlMedia.Fields["Extension"].Value;
    if (fileType == "xml" || fileType == "XML")
    {
      XmlDocument xmdDoc = new XmlDocument();
      xmdDoc.Load(Sitecore.Resources.Media.MediaManager.GetMedia(xmlMedia).GetStream().Stream);
      XmlDocument innerXmdDoc = new XmlDocument();
      innerXmdDoc.LoadXml(xmdDoc.LastChild.OuterXml);
      myData = JsonConvert.SerializeXmlNode(innerXmdDoc);
    } 
```

您可以使用 xml 文件作为数据源，并通过读取当前渲染项来读取 xml 文件，而不是使用硬编码的 item 路径。
您可以通过以下来源获得完整的实施。

**来源：** [从 Sitecore MVC 中的媒体库中读取 XML/JSON](http://www.logicalfeed.com/posts/1154/Reading-XML-JSON-from-Media-library-in-Sitecore-MVC)

# jquery - XMLHTTPRequest 大小限制

> ID：12079494
> 
> 赞同：0
> 
> 时间：2012-08-22T18:47:02.837
> 
> 标签：jquery, web-services, networking, web-applications

有谁知道可以通过网络传输的 XMLHTTPRequest 对象的大小是否有限制？我有一个问题，我正在使用 jquery 的 $.ajax 调用从服务器检索 JSON 对象的 GET 请求。问题是当对象大于几兆字节时，我得到了错误：

```
"NETWORK_ERR: XMLHttpRequest Exception 101"
"Error: A network error occurred in synchronous requests.
 at Object.jQuery.ajaxTransport.send (/js/jquery-1.7.2.js:8240:10)
 at Function.jQuery.extend.ajax (/js/jquery-1.7.2.js:7719:15)" 
```

在我的测试中，我能够取回的最大对象约为 3.88MB。我的服务器在带有 IIS 7.0 的 Windows Server 2008 上运行 PHP。是否可以在我的服务器上配置一些硬限制？或者这个问题与服务器配置无关？服务器上的 PHP 错误日志没有显示创建对象的任何问题，它被构造并返回给客户端。这在我的本地开发环境中是不可重现的，这让我相信在通过网络传输对象时一定有一些硬限制。任何见解都值得赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:54:12.257

JQuery 对您收到的 json 对象的大小没有任何限制。由于对象的大小或处理大量数据导致响应延迟，通常会从服务器端引起该问题。

请检查您的服务器的内存限制，执行时间限制以检查错误发生的位置。我已经使用 JQuery 处理 MB 的数据，并且遇到了服务器内存限制的问题，一旦我增加了脚本执行的服务器内存限制，它就可以正常工作。

希望这可以帮助。

# makefile - Lighttpd 引用错误的库位置

> ID：12079498
> 
> 赞同：1
> 
> 时间：2012-08-22T18:47:27.160
> 
> 标签：makefile, arm, cross-compiling, lighttpd, configure

我正在交叉编译 lighttpd 以在 arm 系统上使用。我设置了一个 NFS 系统，其根目录位于 /home/user/targetfs。我能够将服务器设置为运行良好。我遇到的问题是我的模块试图在不正确的目录中找到。

```
./configure --host=${TARGET_SYS} --disable-short-tags --without-mysql --without-pear --disable-all --disable-short-tags --without-pcre --without-zlib --without-bzip2 
```

我遇到的错误消息如下：

```
2012-04-29 23:14:07: (plugin.c.169) dlopen() failed for: /home/user/targetfs/lib/mod_indexfile.so /home/user/targetfs/lib/mod_indexfile.so: cannot open shared object file: No such file or directory                                           
2012-04-29 23:14:07: (server.c.676) loading plugins finally failed 
```

我知道便宜的解决方法是将mod文件复制到它说它正在寻找它们的地方。有没有一种方法可以更改配置选项，以便让 lighttpd 在 /lib 中查找 mods？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T18:59:22.257

我创建了一个临时解决方法，它只使用以下内容：

```
lighttpd -m /lib -f /var/www/lighttpd.conf 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-20T11:08:38.990

当您运行 configure 时，-prefix 和/或 --libdir 选项会将模块路径硬连接到您将要构建的二进制文件中。一个常见的错误是将这些设置为主机系统上的路径。相反，您应该将其设置为目标系统上的路径。在这种情况下，你想要 --libdir=/lib 然后，当你运行 make install 时（运行 make 之后），你可以给它一个“DESTDIR”选项：

```
make install DESTDIR=/home/user/targetfs 
```

结果是一切都在主机系统上的 /home/user/targetfs 下结束，但是二进制文件一旦部署到目标上，就会在 /lib 中查找模块

（我有同样的问题。搜索首先把我带到这里，然后到我找到这个解决方案[的 lighttpd 论坛。）](http://redmine.lighttpd.net/boards/2/topics/4402)

# sql - 计算来自多列的多个 LIKE 结果？

> ID：12079500
> 
> 赞同：0
> 
> 时间：2012-08-22T18:47:34.040
> 
> 标签：sql, sqlite, spiceworks

我正在尝试构建一个查询来查看我们的帮助台系统中的票证。我想在主题或描述字段中搜索一些关键字，即“电子邮件”，并返回每个关键字的计数。下面是一个示例表。还有一个类别行，但是维护得不好，所以大部分字段都是空的。

```
 ID |       Subject         | Description
-----+-------------------------------------
   1 | hellloooo             | can't send email
   2 | email down?           | can't get to intranet
   3 | Phone trouble         | can't check voicemail
   4 | Using my phone        | I don't know how
   5 | Need new mouse        | please replace
   6 | Mouse acting funny    | n/a
   7 | Intranet won't Load   | what's this plug do?
   8 | not getting voicemail | why not? 
```

我想返回类似的东西

```
Category   |   # of tickets
---------------------------
Email      |   3
Phone      |   2
Intranet   |   2 
```

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T19:01:24.000

您没有指定 RDBMS，但以下将在 SQL Server 中工作

```
;with cte as
(
  select 'Email' Category
  UNION ALL
  select 'Phone'
  UNION ALL
  select 'Intranet'
)
select category, count(*)
from cte c
inner join tickets t
  on t.subject like '%' + c.category + '%'
  or t.description like '%' + c.category + '%'
group by category 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/6c548/10)

如果您想要查询的类别列表较长，那么您可能需要考虑将其存储在单独的表中并加入该表。

为 Sqlite 编辑，没有 CTE，因此您可以按照以下方式执行我的示例（更新为使用正确的语法在 SQLite 中连接）：

```
select category, count(*)
from 
(
  select 'Email' Category
  UNION ALL
  select 'Phone'
  UNION ALL
  select 'Intranet'
) c
inner join tickets t
  on t.subject like '%' || c.category || '%'
  or t.description like '%' || c.category || '%'
group by category 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!7/fb8c6/19)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T18:57:24.760

使用 Microsoft SQL Server，我可能会执行以下操作：

```
DECLARE @CategoryList TABLE (Category VARCHAR(MAX))

INSERT INTO @CategoryList VALUES ('Email')
INSERT INTO @CategoryList VALUES ('Phone')
INSERT INTO @CategoryList VALUES ('Intranet')

SELECT Category, COUNT(*) AS NumberOfTickets
FROM Tickets
INNER JOIN @CategoryList CategoryList ON Tickets.Subject LIKE '%' + CategoryList.Category + '%' OR Tickets.Description LIKE '%' + CategoryList.Category + '%'
GROUP BY Category 
```

# jquery-mobile - jQuery 移动链接过渡到传单地图

> ID：12079509
> 
> 赞同：0
> 
> 时间：2012-08-22T18:47:53.790
> 
> 标签：jquery-mobile, leaflet

我有一个使用 jQuery Mobile 的网站，其中一个页面显示了一张使用 Cloudmade 的 Leaflet 的地图。

[此页面加载并显示带有标记的地图](http://placr.mobi/map?lat=51.45289&lon=-0.1003&zoom=16)，这一切都很好，但是......

[我有另一个页面，其中包含指向地图页面的链接](http://placr.mobi/maplinktest)，然后加载正常，除了它似乎试图从错误的位置获取标记图像文件。

**谁能告诉我更多关于该页面上出了什么问题？**

这是我所知道的。jQuery Mobile 会重写普通的 A HREF 链接来代替目标页面的 ajax 动态加载。这对我来说是神秘而深不可测的，但像我这样的开发人员大多不需要关心它，对吧？但是，在这种情况下，传单调用代码的某些内容无法在修改中幸存下来。

```
Failed to load resource: the server responded with a status of 404 (Not Found)
http://placr.mobi/dist/images/marker.png 
```

...是 safari 报告的错误。的确，这条路是不正确的。我设置了传单，将“dist”目录的内容放在一个名为“传单”的目录中。应该管用？事实上，它*确实*在 jQuery 修改之后起作用。

稍作调查，我发现传单源代码中没有提到“dist”（正如我所期望的那样。我应该可以肯定地调用该目录？）但是参考*确实*被编译成丑陋的javascript（' `return"../../dist/"`' )

也许有人有一个 jQuery Mobile 和传单一起工作的例子（理想情况下包括标记图像）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T23:52:08.780

问题是leaflet.js 根据html 中脚本标签的src 属性评估ROOT_URL。但是您的第一页中缺少脚本标记。

在您的第一页 (http://placr.mobi/maplinktest) 中放入上述行：

```
<script src="/leaflet/leaflet.js" type="text/javascript"></script> 
```

正好在：

```
<div data-role="content" > 
```

第二种替代解决方案是在第二页中添加以下内容：

```
L.Icon = L.Icon.extend({
    iconUrl: <markerUrl>,
    shadowUrl: <shadowUrl>
}); 
```

使用第二种方式，您可以显式设置图像 URL。

第三种解决方案是在第一页的锚点中添加 rel="external"：

```
<a href="/map?lat=51.45289&amp;lon=-0.1003&amp;zoom=16" rel="external" class="ui-link">Link to map page</a> 
```

# python - Python2/Pygobject/Gtk3/Glade3 检查TextView焦点

> ID：12079514
> 
> 赞同：0
> 
> 时间：2012-08-22T18:48:15.617
> 
> 标签：python, gtk, glade, gtk3, pygobject

我正在使用 Python2.7 和 Gtk3 设计一个文本编辑器式应用程序，我不太确定如何设置处理程序来检查主 TextView 当前是否处于焦点，所以我可以禁用菜单项（例如编辑 -> 复制等）相应地。

为了创建选项卡式文本编辑器，我使用 Gtk.Notebook 作为主体，每次激活 File -> New 时，我都会创建一个新的 ScrolledWindow 和 TextView 以在文本编辑器中创建一个新选项卡：

```
def on_imagemenuitemNew_activate(self, *args):
  editor = Gtk.ScrolledWindow()
  editor.add(Gtk.TextView())
  editor.set_shadow_type(Gtk.ShadowType.IN)
  editor.show_all()
  #The instance of Gtk.Notebook is passed to the handler as user data in args[0]
  args[0].append_page(editor, Gtk.Label('untitled')) 
```

这工作正常，但如果我尝试使用：

```
editor.connect('focus-in-event', self.on_editor_focus_in_event) 
```

在块内然后它永远不会被我的处理程序注册：

```
def on_editor_focus_in_event(self, *args):
  print 'Focused!' 
```

我怀疑这个问题可能是由于每个`editor`实例看起来都是相同的，但这真的让我很难过。原谅我写的草率，我昨天才开始学习 GTK，Pygobject/Gtk3 的文档也不是很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:12:03.260

我只能猜测，但文档说“要接收此信号，与小部件关联的 GdkWindow 需要启用`GDK_FOCUS_CHANGE_MASK`掩码”。

你确定你启用了吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T22:10:14.293

在您的代码中，`editor`是一个`Gtk.ScrolledWindow`. 我不认为`ScrolledWindow`s可以有焦点。尝试连接到你的焦点事件`TextView`，确保启用正确的掩码，正如@TinaBrooks 指出的那样。

# ruby-on-rails - Rails：将 root_url 映射到外部 url

> ID：12079516
> 
> 赞同：1
> 
> 时间：2012-08-22T18:48:25.863
> 
> 标签：ruby-on-rails, ruby, routing

我们正在使用外部 CMS 来管理我们的网站，我想确保在我们的 Rails 应用程序内部，root_url 指向该外部 url。我们有什么办法可以做到这一点？

就像是：

```
root :to => "http://wwww.example.com" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T18:55:51.277

您可以像这样匹配应用程序的根目录以重定向到外部 URL

```
#
# config/routes.rb
#

root :to => redirect("http://www.google.com/") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T19:24:45.443

正如@Digi_Cazter 正确回答的那样，您可以通过添加这个来做到这一点

```
root :to => redirect("http://www.google.com/") 
```

仅当我希望重定向特定的 url 时，我才想使用来自应用程序的此类重定向。

> 我建议您直接从您正在使用的网络服务器重定向请求，可能是 apache-httpd 或 nginx，或者您可能正在使用的任何一个，而不是将其传递给应用程序然后重定向它。

# .net - Ninject 的 InRequestScope 发生了什么

> ID：12079517
> 
> 赞同：3
> 
> 时间：2012-08-22T18:48:33.140
> 
> 标签：.net, asp.net-mvc-3, ninject, nuget, nuget-package

我今天开始了一个新项目，然后去 nuget 获取 ninject。

我下载了[Ninject MVC3](http://nuget.org/packages/Ninject.MVC3)插件，它应该可以下载我需要的所有东西。

然后我从另一个项目中获取了一些旧代码，并注意到 InRequestScope 似乎已经消失了。

是被拿出来还是我错过了什么？

**编辑**

我想我在“Ninject.Web.Common”下找到了它

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-22T19:36:51.013

此扩展方法在程序集内的[`RequestScopeExtensionMethod`](https://github.com/ninject/Ninject.Web.Common/blob/master/src/Ninject.Web.Common/RequestScopeExtensionMethod.cs)类中定义`Ninject.Web.Common`[在同名的 NuGet 包中]。`Ninject.NVC3`安装NuGet 包时会自动引用此程序集 (/package) 。为了使用它，您需要将`Ninject.Web.Common`命名空间纳入范围：

```
using Ninject.Web.Common; 
```

# c - C 中的 UTF-16 到 UTF-8

> ID：12079519
> 
> 赞同：1
> 
> 时间：2012-08-22T18:48:55.893
> 
> 标签：c, csv, utf-8, utf-16

在 CI 中，需要编写一个程序来解析以 UTF-16 编码的 CSV 文件，获取该信息对其进行处理，并使用该处理后的信息生成一个新的 UTF-16 csv 文件。

到目前为止，我的程序所做的只是将 CSV 文件（UTF-16）的内容加载到一块内存中，我现在需要以某种方式处理这个 UTF-16 内存块，我不确定我是如何'将继续这样做而不转换它，因为我什至不能使用`strlen`或类似它，因为`NULL`它有所有的 s。

如何将 UTF-16 转换为 UTF-8 然后再转换回 UTF-16 ？我假设我需要通过使用 fseek 来获取原始 CSV (UTF-16) 文件的总文件大小。但即使在那之后我该如何进行转换？

顺便说一句，我这样做的原因是因为我目前正在处理来自 WonderWare 的一些 CSV 格式 (UTF-16) 的“转储”文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T19:00:20.087

如果你在 *nix 系统上，你可以使用[iconv](http://linux.die.net/man/1/iconv)

例子：`iconv -f UTF16 -t UTF8 file.csv`

# image - 使用 cocos2d 缩放渲染图像会破坏图像质量

> ID：12079520
> 
> 赞同：1
> 
> 时间：2012-08-22T18:48:56.113
> 
> 标签：image, opengl-es, cocos2d-iphone, scaling

使用 Cocos2d (v 1.01)，如果我按原样显示精灵，我会得到很好的质量，但如果我使用 CCRenderTexture，图像质量很差。仅当我放大图像时才会发生这种情况。

见附件截图，原始图像在左边。![在此处输入图像描述](../Images/25787f3ef3207f2156e2ab2f8657b486.png) 这是我的代码：

```
CCScene* pScene = CCDirector::sharedDirector()->getRunningScene();

CCSprite* origSprite = CCSprite::spriteWithFile("jigsaw/11.png");
origSprite->setPosition(CCPoint(250,250));
origSprite->setScale(1.3);
pScene->addChild(origSprite, 500);

CCSprite* imageSprite = CCSprite::spriteWithFile("jigsaw/11.png");
CCSize imageSize = imageSprite->boundingBox().size;
CCRenderTexture *rt = CCRenderTexture::renderTextureWithWidthAndHeight(imageSize.width, imageSize.height);
imageSprite->setPosition(ccp(imageSize.width/2, imageSize.height/2));
rt->begin();
imageSprite->visit();
rt->end();
CCSprite *newSprite = CCSprite::spriteWithTexture(rt->getSprite()->getTexture());
delete rt;
newSprite->setFlipY(true);
newSprite->setPosition(CCPoint(750,750));
newSprite->setScale(1.3);
pScene->addChild(newSprite, 500); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T12:37:15.027

好的，我找到了答案。我需要补充：

```
newSprite->getTexture()->setAntiAliasTexParameters(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:38:10.650

我不确定，但请尝试一下，因为我也遇到过这个问题，并且我已经找到了解决我的问题的方法，希望这对您也有帮助。

只需设置 Render 纹理和 Sprite 的大小和位置

像这样 >

```
renderTexture = [CCRenderTexture renderTextureWithWidth:1024 height:768];
      [renderTexture clear:1.0f 
                         g:1.0f
                         b:1.0f
                         a:1.0f];
      renderTexture.position = CGPointMake(500,380);
      [self addChild:renderTexture z:0 tag:1];

 sprite.anchorPoint=ccp(1,1);
        sprite.position =CGPointMake(530, 380);
        [renderTexture addChild:sprite]; 
```

# c - xmlSecInit() 将断言失败打印到标准错误 (g_xslt_default_security_prefs == NULL)

> ID：12079526
> 
> 赞同：0
> 
> 时间：2012-08-22T18:49:19.157
> 
> 标签：c, xslt, libxml2, libxslt, xmlsec

[我有一些代码与http://www.aleksey.com/xmlsec/api/xmlsec-examples-sign-template-file.html](http://www.aleksey.com/xmlsec/api/xmlsec-examples-sign-template-file.html)上的示例非常相似：

```
#ifndef XMLSEC_NO_XSLT
    xsltSecurityPrefsPtr xsltSecPrefs = NULL;
#endif /* XMLSEC_NO_XSLT */

    /* Init libxml and libxslt libraries */
    xmlInitParser();
    LIBXML_TEST_VERSION
    xmlLoadExtDtdDefaultValue = XML_DETECT_IDS | XML_COMPLETE_ATTRS;
    xmlSubstituteEntitiesDefault(1);

    /* Init libxslt */
#ifndef XMLSEC_NO_XSLT
    /* disable everything */
    xsltSecPrefs = xsltNewSecurityPrefs(); 
    xsltSetSecurityPrefs(xsltSecPrefs,  XSLT_SECPREF_READ_FILE,        xsltSecurityForbid);
    xsltSetSecurityPrefs(xsltSecPrefs,  XSLT_SECPREF_WRITE_FILE,       xsltSecurityForbid);
    xsltSetSecurityPrefs(xsltSecPrefs,  XSLT_SECPREF_CREATE_DIRECTORY, xsltSecurityForbid);
    xsltSetSecurityPrefs(xsltSecPrefs,  XSLT_SECPREF_READ_NETWORK,     xsltSecurityForbid);
    xsltSetSecurityPrefs(xsltSecPrefs,  XSLT_SECPREF_WRITE_NETWORK,    xsltSecurityForbid);
    xsltSetDefaultSecurityPrefs(xsltSecPrefs); 
#endif /* XMLSEC_NO_XSLT */                

    /* Init xmlsec library */
    if(xmlSecInit() < 0) {
        fprintf(stderr, "Error: xmlsec initialization failed.\n");
        return(-1);
    } 
```

问题是，虽然`xmlSecInit`成功（返回 0），但它会将此断言失败记录到 stderr：

```
func=xmlSecTransformXsltInitialize:file=xslt.c:line=109:obj=unknown:subj=g_xslt_default_security_prefs == NULL:error=100:assertion: 
```

我怀疑它是无害的，但记录错误可能是有原因的。我想知道如何避免它。

我没有`XMLSEC_NO_XSLT`定义，所以`#ifdef`s 中的那些代码行会执行。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T20:05:48.840

我查看了 xmlsec 源代码，它看起来像`xmlSecInit`调用`xmlSecTransformIdsInit`，它调用`xmlSecTransformXsltInitialize`. 最后一个函数做的第一件事是检查`g_xslt_default_security_prefs`是`NULL`. 然后，它设置`g_xslt_default_security_prefs`.

长话短说，我`xmlSecInit()`不止一次打电话，不应该那样做。

# c# - 使用 C# 在 VS 2010 中进行 Android 开发

> ID：12079527
> 
> 赞同：1
> 
> 时间：2012-08-22T18:49:19.587
> 
> 标签：c#, android

我想使用 C# 为 Android 框架开发移动应用程序。我看过 MonoDroid，刚刚下载，还没有安装。我希望能够部署到设备而不仅仅是模拟器。我们是否还有其他选择，我们被 MonoDroid 和许可证附带的 399 美元困住了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T19:18:13.223

[游牧民族](http://vsnomad.com/)看起来很有趣。还没有尝试过，但它似乎构建了 HTML5 应用程序（而不是原生应用程序）？它可以为 Android 和 iOS 构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T20:55:43.007

取决于你想开发什么，如果这是一个你可能想要检查**Unity**的游戏，它是一个免费的游戏引擎。它们支持使用 C# 和 JavaScript 编写基于 .NET 的脚本。对于 Android 和 iOS，您应该购买附加组件，但他们之前提供了 30 天的试用期，最好自己检查一下。 [https://store.unity3d.com/products](https://store.unity3d.com/products)

# macos - 无法更改 NSTextField 的鼠标光标

> ID：12079531
> 
> 赞同：5
> 
> 时间：2012-08-22T18:49:33.657
> 
> 标签：macos, cocoa, nstextfield, nscursor, nstrackingarea

我正在尝试更改`NSTextField`从 NIB 加载的窗口工作表中的鼠标光标。

`NSTextField`根据文档，我对[`resetCursorRects`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/nsview_Class/Reference/NSView.html#//apple_ref/occ/instm/NSView/resetCursorRects).

```
- (void) resetCursorRects {
    [self addCursorRect:[self bounds] cursor:[NSCursor pointingHandCursor]];
} 
```

这永远不会被调用。即使在添加以下内容后也不行`NSWindowViewController`：

```
- (void) windowDidLoad {
    [self.window invalidateCursorRectsForView:self.linkTextField];
} 
```

我还尝试通过在子类中添加以下内容来使用跟踪区域`NSTextField`：

```
- (void) awakeFromNib {
    NSTrackingArea* trackingArea = [[NSTrackingArea alloc] initWithRect:self.bounds
                                                 options:(NSTrackingCursorUpdate | NSTrackingActiveAlways)
                                                   owner:self
                                                userInfo:nil];
    [self addTrackingArea:trackingArea];
}

- (void)cursorUpdate:(NSEvent *)theEvent {
    [[NSCursor pointingHandCursor] set];
} 
```

也没有用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-04T11:03:43.293

[带有 NSTextField 的可点击链接](http://forums.macrumors.com/showthread.php?t=677713)

`NSTextField`如前所述，我在子类化后得到了这个工作：

```
- (void)resetCursorRects {
    [self addCursorRect:[self bounds] cursor:[NSCursor pointingHandCursor]];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-06T16:03:55.377

NSTextView 似乎正在通过它的`-(void)mouseMoved:(NSEvent*)theEvent`方法处理光标。此外，当 NSTextView 成为第一响应者时，RunLoop 中的一些私有代码似乎将光标强制到 IBeamCursor 而不给我们选择。这是一个解决这些限制的子类：

```
@interface MyTextView : NSTextView {
    NSTrackingArea* area;
    BOOL mouseInside;
}

@property(nonatomic, retain) NSTrackingArea* area;

@end

@implementation MyTextView

@synthesize area;

- (void)setArea:(NSTrackingArea *)newArea
{
    [newArea retain];
    if (area) {
        [self removeTrackingArea:area];
        [area release];
    }
    if (newArea) {
        [self addTrackingArea:newArea];
    }
    area = newArea;
}

- (BOOL)becomeFirstResponder
{
    NSRect rect = <insert the tracking rect where you want to have a special cursor>;
    self.area = [[[NSTrackingArea alloc] initWithRect:rect options:NSTrackingMouseEnteredAndExited | NSTrackingActiveWhenFirstResponder owner:self userInfo:nil] autorelease];
    NSEvent* ev = [NSApp currentEvent];
    if (NSPointInRect([self convertPoint:ev.locationInWindow fromView:nil], self.bounds)) {
        mouseInside = YES;
        // This is a workaround for the private call that resets the IBeamCursor
        [[NSCursor arrowCursor] performSelector:@selector(set) withObject:nil afterDelay:0];
    }
}

- (void)mouseEntered:(NSEvent *)theEvent
{
    [super mouseEntered:theEvent];
    [[NSCursor arrowCursor] set];
    mouseInside = YES;
}

- (void)mouseExited:(NSEvent *)theEvent
{
    [super mouseExited:theEvent];
    mouseInside = NO;
}

- (void)mouseMoved:(NSEvent *)theEvent
{
    si (!mouseInside) {
        // We only forward the mouseMoved event when the mouse is outside the zone for which we control the cursor
        [super mouseMoved:theEvent];
    }
}

- (oneway void)dealloc
{
    [area release];
    [super dealloc];
}

@end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T16:50:06.687

我有同样的问题，每次光标进入跟踪区域时都会调用 cursorUpdate 方法，但是光标被设置回其他地方，可能是它的超级视图。

我设法通过覆盖 mouseMoved 方法来解决它。

```
// In the textfield subclass:
- (void)mouseEntered:(NSEvent *)theEvent {
    [super mouseEntered:theEvent];
    self.isMouseIn = YES;
}

- (void)mouseExited:(NSEvent *)theEvent {
    [super mouseExited:theEvent];
    self.isMouseIn = NO;
}

//In the superview of the textfield:
- (void)mouseMoved:(NSEvent *)theEvent {
    if (self.hoverButton.isMouseIn) {
        [[NSCursor pointingHandCursor] set];
    }
    [super mouseMoved:theEvent];
} 
```

我在 windowController 类中重写了 mouseMoved 方法，但是重写 superview 应该可以工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-04T11:34:30.883

我编写了上述答案的 Swift 2.0 版本，并将其作为[GitHub 示例项目在此处找到](https://github.com/dautermann/ChangeCursorColor)。

即使它是为 NSTextField 设置的，这些概念也应该适用于任何子类的来源`NSResponder`（这是从哪里来的） `mouseEntered`。`becomeFirstResponder`

这是我编写的代码的核心内容：

```
import Cocoa

class CCTextField: NSTextField {

    var myColorCursor : NSCursor?

    var mouseIn : Bool = false

    var trackingArea : NSTrackingArea?

    override func awakeFromNib()
    {
        myColorCursor = NSCursor.init(image: NSImage(named:"heart")!, hotSpot: NSMakePoint(0.0, 0.0))
    }

    override func resetCursorRects() {
        if let colorCursor = myColorCursor {
            self.addCursorRect(self.bounds, cursor: colorCursor)
        }
    }

    override func mouseEntered(theEvent: NSEvent) {
        super.mouseEntered(theEvent)
        self.mouseIn = true
    }

    override func mouseExited(theEvent: NSEvent) {
        super.mouseExited(theEvent)
        self.mouseIn = false
    }

    override func mouseMoved(theEvent: NSEvent) {
        if self.mouseIn {
            myColorCursor?.set()
        }
        super.mouseMoved(theEvent)
    }

    func setArea(areaToSet: NSTrackingArea?)
    {
        if let formerArea = trackingArea {
            self.removeTrackingArea(formerArea)
        }

        if let newArea = areaToSet {
            self.addTrackingArea(newArea)
        }
        trackingArea = areaToSet
    }

    override func becomeFirstResponder() -> Bool {
        let rect = self.bounds
        let trackingArea = NSTrackingArea.init(rect: rect, options: [NSTrackingAreaOptions.MouseEnteredAndExited, NSTrackingAreaOptions.ActiveAlways], owner: self, userInfo: nil)

        // keep track of where the mouse is within our text field
        self.setArea(trackingArea)

        if let ev = NSApp.currentEvent {
            if NSPointInRect(self.convertPoint(ev.locationInWindow, fromView: nil), self.bounds) {
                self.mouseIn = true
                myColorCursor?.set()
            }
        }
        return true
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-24T23:24:56.490

这对我有用：

```
class TextField: NSTextField {
    override func becomeFirstResponder() -> Bool {
        addTrackingAreaIfNeeded()
        return super.becomeFirstResponder()
    }
    override func mouseMoved(with event: NSEvent) {
        super.mouseMoved(with: event)
        NSCursor.pointingHand.set()
    }
    private func addTrackingAreaIfNeeded() {
        if trackingAreas.isEmpty {
            let area = NSTrackingArea(rect: bounds, options: [.mouseEnteredAndExited, .activeAlways], owner: self, userInfo: nil)
            addTrackingArea(area)
        }
    }
} 
```

# validation - 软件中的数据验证

> ID：12079533
> 
> 赞同：0
> 
> 时间：2012-08-22T18:49:34.983
> 
> 标签：validation, data-access-layer, business-logic-layer

数据验证应该在应用程序/业务层中，还是应该作为数据访问层的一部分——充当进入数据存储的网关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T18:59:21.663

这取决于：

*   始终验证和/或清理用户输入。
*   数据访问层中的验证有助于多个应用程序，而无需冗余验证代码。
*   在客户端/服务器通信中，客户端预验证可以节省一次往返（当数据无效时）。

# iphone - 如何在 UINavigationController 下修复 UITextView 的大小？

> ID：12079536
> 
> 赞同：0
> 
> 时间：2012-08-22T18:49:50.170
> 
> 标签：iphone, ios, storyboard, uitextview

UITextView 有一个非常奇怪的行为问题。

在 IB Storyboard 中，我删除了一个视图控制器。然后在顶部放了一个 UITextView 。然后调整 UITextView 的大小以适合，为它制作一个 IBOutlet 并保存。

我正在通过 segue 将 UIViewController 推到 UINavigationController 上。

问题是 UITextView 想要消耗整个屏幕，减去导航栏。在 IB 中，UITextView 应该是：x:20, y:83, w:280, h:164，而不是整个屏幕。

帮助？

更新：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    myTextView.frame = CGRectMake(20, 83, 280, 164); // does nothing...
} 
```

将 UITextView 放在 UIView 中没有任何变化。弹簧和支柱被移除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:57:11.613

将 UIView 过渡到空间中。而不是 UITextView。把 UITextView 放在 UIView 里面，它就会有它的常规空间。此外，所有“弹簧和支柱”也将在该视图中工作。

您可以考虑将 UITextView 放入 UIViewController （最终将在其中包含 UIView）

另一件事是：

确保您的 UITextView 未连接到控制器的 View 属性。并检查您设置框架的代码是否使用了 UITextView 的实例化版本。但是一个断点并检查 myTextView 的值。看看它是否为零。也许没有建立连接。也许它没有加载您的自定义类。或者它可能将自己连接到另一个插座，该插座会破坏它并将其他东西放在它的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T19:14:42.790

原来我的 UIViewController 是作为 Interface Builder 中 UITextView 的代表连接的。删除它使 UITextView 可调整大小。

# c++ - C++初始化静态常量结构变量

> ID：12079537
> 
> 赞同：10
> 
> 时间：2012-08-22T18:49:59.990
> 
> 标签：c++, static, struct, initialization, constants

我正在尝试向我的类添加一个静态常量变量，它是一个结构的实例。由于它是静态的，我**必须**在类声明中对其进行初始化。尝试此代码

```
class Game {
    public:
        static const struct timespec UPDATE_TIMEOUT = { 10 , 10 };

    ...
}; 
```

收到此错误：

> 错误：在“{”标记之前不允许使用大括号括起来的初始化程序
> 
> 错误：非整数类型“const timespec”的静态数据成员的类内初始化无效

我该如何初始化它？谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-22T18:51:34.383

在源文件内的类外部的单独定义中对其进行初始化：

```
// Header file
class Game {
    public:
        // Declaration:
        static const struct timespec UPDATE_TIMEOUT;
    ...
};

// Source file
const struct timespec Game::UPDATE_TIMEOUT = { 10 , 10 };  // Definition 
```

如果将定义包含在头文件中，如果该头包含在多个源文件中，您可能会收到有关多重定义符号的链接器错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-02T11:56:52.293

将变量声明为函数内的静态变量，并使该函数返回对变量的引用。

# xslt - XSL 返回 sharepoint 2010 列表 webpart 的 XML

> ID：12079540
> 
> 赞同：0
> 
> 时间：2012-08-22T18:50:03.580
> 
> 标签：xslt, sharepoint-2010

我有一个常规任务列表，我必须自定义显示它的方式 sharepoint 2010。

在我的主页中，我添加了一个列表 webpart，它返回了我的项目 ok... 我需要开发一个 xsl 来将该 xml 转换为我想要的 html，但我不知道什么 xml 正在发布...

我需要的是一个 XSL，它将使 webpart 绘制原始 XML。

谁能提供这个 XSL？我搜索了一堆网站，但它就是不工作！

EDIT1：我在这里“http://tomvangaever.be/blogv2/2011/07/custom-sharepoint-xsl-webpart/”检查了这个博客，但我得到的回报是这个错误：“无法显示这个Web部件。解决问题问题，请在与 Microsoft SharePoint Foundation 兼容的 HTML 编辑器（例如 Microsoft SharePoint Designer）中打开此网页。如果问题仍然存在，请联系您的 Web 服务器管理员。而Sharepoint设计师只说它错了......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T19:50:16.057

返回共享点列表的原始 xml 的 XSL 是：

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output version="1.0" indent="yes" encoding="UTF-8" method="xml" />  
  <xsl:template match="/">  
    <xmp>      
<xsl:copy-of select="*"/>  
    </xmp>  
  </xsl:template>  
</xsl:stylesheet> 
```

# informatica-powercenter - Informatica SET 映射变量

> ID：12079546
> 
> 赞同：3
> 
> 时间：2012-08-22T18:50:18.203
> 
> 标签：informatica-powercenter

我是 informatica 的新手。我在映射的“参数和变量”选项中定义了一个映射变量。

现在在一个表达式中，我需要根据记录的值更新映射变量的值，同时还要引用它的值。

基本上，为什么我不能在表达式中实时设置映射变量的值？当我使用 SETVARIABLE($$VAR,value) 时，该值仅在会话结束后才反映，而不是在会话期间反映。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T13:31:27.717

*如果您想要一个在行之间或**同一*行中的其他端口之间保存其值的变量，请在您的表达式转换中使用变量端口（勾选“V”列中的框以获取新端口）。映射参数/变量更适用于在运行时传入的更高级别的值，例如连接名称、条件等。

为集成服务处理的下一行“记住”每行设置的值，并为任何后续端口保留其值，即端口排序对于评估顺序很重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-10T06:54:01.713

您可以`setVariable()`用于 2 个目的：

1.  返回映射变量的当前值。
    **示例**-`setVariable($$Count,NULL) >>>>>`这将给出变量的当前值。

2.  将映射变量设置为特定值。
    **示例**-`setVariable($$Count,34) >>>>>`将值设置为 34。

# web-services - 连接到外部 API

> ID：12079550
> 
> 赞同：0
> 
> 时间：2012-08-22T18:50:38.990
> 
> 标签：web-services, api, static, proxy, ip

我正在通过他们的 API 建立与外部服务的连接。

问题是我对 API 的调用必须使用 IP。我不能使用命名域来执行此操作（这不在我的控制范围内）。我只能使用静态 IP 来执行此操作，而我的问题是该特定服务使用动态 IP。

我希望这种情况是有意义的。

我的问题是，这里是否有某种替代方法可以帮助我继续进行？是否有某种代理或可以帮助促进这一点的东西？本质上，为了让我的项目连接到这个 API，我需要将它的 IP 列入白名单，如果它不是静态 IP，我显然不能这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-10T13:18:44.160

这项服务显然不想要客户。

如果您手动学习地址，则必须手动更新您的设置。如果有获取地址的编程方式（除了典型的 DNS），那么您需要实现获取地址并更新您的设置的代码。

服务可以使用“[动态 DNS 服务](https://www.google.com/webhp#q=dynamic%20dns%20service)”来允许轻松访问，即使它们的 IP 地址不是静态的，但这可能是有问题的并且被认为是不专业的。

# c# - 是否可以在使用 SalesForce Soap API 插入之前向自定义对象添加附件？

> ID：12079551
> 
> 赞同：2
> 
> 时间：2012-08-22T18:50:49.240
> 
> 标签：c#, api, salesforce

我目前有一个自定义对象，我们称这个对象为 myObject。

该对象具有以下字段：

*   制作 - 文字(20)
*   模型 - 文本(20)
*   开始时间 - 日期/时间
*   结束时间 - 日期/时间
*   国家 - 文本(20)
*   objContact - 查找（联系人）*

*注意：触点是在插入触发器之前设置的。

要求是创建一个应用程序以允许用户创建多个 myObject 并为每个对象附加一个图像（最多 1MB）。

注意：我已经使用富文本区域字段将图像推送到 myObject，但这是限制为 32kb 的方法。

我正在使用带有以下代码的 Salesforce Soap API (C#)（为了清楚起见，使用内联方法）：

```
public void Create(List<Cars> myCars)
{
    SforceService sforceService = new SforceService() { Timeout = 60000 };
    LoginResult result = sforceService.login(USERNAME, PASSWORD);
    if (result.passwordExpired != true)
    {
        String authEndPoint = sforceService.Url;
        sforceService.Url = "result.serverUrl;
        sforceService.SessionHeaderValue = new SessionHeader();
        sforceService.SessionHeaderValue.sessionId = result.sessionId;

        sObject[] myObjectArr = new sObject[myObjects.Count * 2];
        for (int i = 0, carCount = myCars.Count; i < carCount; i++)
        {        
            myObject__c myObj = new myObject__c();
            myObj.Make__c = myCars[i].make;
            myObj.Model__c = myCars[i].model;
            myObj.StartTime__c = myCars[i].startTime;
            myObj.EndTime__c = myCars[i].endTime;
            myObj.Country__c = myCars[i].country;

            //Convert Image to Byte[]:
            byte[] imageBytes = new byte[];
            using (MemoryStream ms = new MemoryStream())
            {
                myCars[i].Image.Save(ms, ImageFormat.Jpeg);
                imageBytes = ms.ToArray();
            }

            Attachment myAttachment = new Attachment();
            myAttachment.Body = imageBytes;
            myAttachment.ContentType = "image/jpeg";
            myAttachment.Name = "FileName";
            myAttachment.ParentId = myObj.id;

            myObjectArr[i] = myObj;
            myObjectArr[i + myCars.Count] = myAttachment;
        }
        sforceService.create(myObjectArr);
    }
} 
```

代码正确执行，为传入函数的每个 Car 对象创建一个新的 myObject。但是，由于临时 myObj 尚未插入 SFDC，因此它没有 id。当分配 myAttachment.ParentId 时，myObj.id 为空。

该函数将使用 myCars 列表中的 1 - 2000 个对象调用，因此不接受非散装方法。

有没有办法在插入操作期间将附件的 ParentId 字段设置为 myObj SFID？

我能想到的唯一方法是在每个 MyObj 上创建一个临时 ID（日期时间 + GUID），并将 Attachment.Name 设置为该临时 ID（日期时间 + GUID），然后创建一个触发器以在插入后将两者关联起来。有没有更好的方法来解决这个问题？

提前致谢。

编辑：这是有效的：

```
public void Create(List<Cars> myCars)
{
    SforceService sforceService = new SforceService() { Timeout = 60000 };
    LoginResult result = sforceService.login(USERNAME, PASSWORD);
    if (result.passwordExpired != true)
    {
        String authEndPoint = sforceService.Url;
        sforceService.Url = "result.serverUrl;
        sforceService.SessionHeaderValue = new SessionHeader();
        sforceService.SessionHeaderValue.sessionId = result.sessionId;

        List<string> GUIDList = new List<string>();
        List<Attachment> AttachmentList = new List<Attachment>();

        sObject[] myObjectArr = new sObject[myObjects.Count];
        sObject[] myObjectArr_Attachments = new sObject[myObjects.Count];

        for (int i = 0, carCount = myCars.Count; i < carCount; i++)
        {   
            string tempGUID = Guid.NewGuid();
            GUIDList.add(tempGUID);

            myObject__c myObj = new myObject__c();
            myObj.Make__c = myCars[i].make;
            myObj.Model__c = myCars[i].model;
            myObj.StartTime__c = myCars[i].startTime;
            myObj.EndTime__c = myCars[i].endTime;
            myObj.Country__c = myCars[i].country;
            myObj.GUID__c = tempGUID;

            //Convert Image to Byte[]:
            byte[] imageBytes = new byte[];
            using (MemoryStream ms = new MemoryStream())
            {
                myCars[i].Image.Save(ms, ImageFormat.Jpeg);
                imageBytes = ms.ToArray();
            }

            Attachment myAttachment = new Attachment();
            myAttachment.Body = imageBytes;
            myAttachment.ContentType = "image/jpeg";
            myAttachment.Name = tempGUID;
            AttachmentList.add(myAttachment);

            myObjectArr[i] = myObj;
        }

        sforceService.create(myObjectArr);

        string GUIDListString = "( ";
        for ( int i = 0, listLen = GUIDList.Count; i < listLen; i++)
        {
            if (i < GUIDList.Count - 1)
            {
                 GUIDListString += string.Format("'{0}', ", GUIDList[i]);
            }
            else
            {
                 GUIDListString += string.Format("'{0}')", GUIDList[i]);
            }
        }

        string queryString = String.Format("SELECT id, GUID__c FROM myObj__c WHERE GUID__c IN {0}", GUIDListString);
        QueryResult myObjResult = sforceService.query(queryString);
        sObject[] sObjQuery = myObjResult.records;

        List<myObject__c> myObjs = new List<myObject__c>();

        foreach(sObject sObj in sObjQuery)
        {
             myObjs.Add((myObject__c)sObj);
        }

        for (int i = 0, attLen = AttachmentList.Count; i < attLen; i++)
        {
            foreach (myObject__c obj in myObjs)
            {
                if(AttachmentList[i].Name == obj.GUID__c)
                {
                    AttachmentList[i].ParentId = obj.Id;
                    sObjArr_Attachments[i] = AttachmentList[i];
                }
            }
        }
        SaveResult[] sr_att = sforceService.create(sObjArr_Attachments);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T20:28:25.523

您不能一次调用，但可以将其拆分为仅 2 个，一个插入 Cars 列表，一旦获得该结果，您就可以进行第二次调用以插入附件列表。

# java - Java 等效于 Objective C 方法范围的静态变量

> ID：12079552
> 
> 赞同：0
> 
> 时间：2012-08-22T18:51:07.243
> 
> 标签：java, objective-c

我正在将一些 Objective C 代码移植到 Java。其中一种 C 方法如下所示：

```
void method(){

static int variable;

...

} 
```

我对此的理解是，变量的生命周期等于包含编译单元的执行生命周期，但仅对方法可见。AFAIK，在 Java 中没有等价物，所以我正在考虑使用类级别的静态变量来完成这项工作。我理解扩大变量的可见性和由此导致的可维护性降低的风险，但是如果我仔细检查类的所有其他方法是否存在冲突，我可以通过明智的评论来处理它。

我错过了什么吗？我应该考虑其他任何风险吗？

感谢大家对 SO 的贡献。

干杯

西蒙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T18:55:39.807

> 我错过了什么吗？我应该考虑其他任何风险吗？

您应该真正考虑逻辑上属于哪个状态。它实际上是包含类的*实例状态的一部分吗？*如果是这样，请将其设为实例变量。它是类型本身的逻辑状态吗？如果是这样，静态变量是合理的——但静态变量通常是可测试性、线程等的敌人。

它实际上在逻辑上是*不同*类状态的一部分吗？可能是一个还不存在的新的？例如，您可能希望对该新类的实例具有静态最终引用。

基本上，让状态的自然位置告知变量的位置。

# android - Android 前置摄像头默认

> ID：12079555
> 
> 赞同：1
> 
> 时间：2012-08-22T18:51:14.423
> 
> 标签：android, cordova, camera

好吧，我有一个应用程序将在具有前置摄像头的特定 android 设备上运行。

我需要默认使用前置摄像头。我设置的最小 API 是 9。我试过到处寻找，因为我是 JAVA 的新手，所以我迷路了。

这是我的代码片段，如果您能详细说明代码的工作原理，我将不胜感激！

```
import android.app.Activity;
import android.hardware.Camera;
import android.os.Bundle;
import android.util.Log;
import android.view.Surface;

import org.apache.cordova.*;

public class MainActivity extends DroidGap {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/index.html");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T19:02:28.013

您需要添加相机权限

```
 <uses-permission android:name="android.permission.CAMERA" />
 <uses-feature android:name="android.hardware.camera" />
 <uses-feature android:name="android.hardware.camera.autofocus" /> 
```

和相机的`APIs >=9`，所以你没事。这是前置摄像头意图，在您的代码中使用它

```
int CAMERA_FACING_FRONT 
```

在这里阅读更多：http: [//developer.android.com/reference/android/hardware/Camera.html](http://developer.android.com/reference/android/hardware/Camera.html)

# jquery - HTML片段与xmlDOM片段的jQuery包装器？

> ID：12079556
> 
> 赞同：0
> 
> 时间：2012-08-22T18:51:15.050
> 
> 标签：jquery, xml, wrapper, xmldom

我不明白围绕 xmlDom 对象的 jQuery 包装器与普通的旧 html 标记之间的概念和功能差异。

我可以在两者上调用 jQuery 方法，但它们的行为不同，这让我有点吃惊。我想我认为我可以用 jQuery 包装任何 html/xml 标记，它的行为大致相同。

我正在使用 xmlDOM 插件来获取一个 jQuery 包装的 xmlDom 对象：

[http://outwestmedia.com/jquery-plugins/xmldom/](http://outwestmedia.com/jquery-plugins/xmldom/)

这是一个小提琴：

[http://jsfiddle.net/YL8bY/](http://jsfiddle.net/YL8bY/)

```
<body>

<b>xmlDOM Wrapper</b>  <br />

XML fragment:  <br />
<div id="xmldomdiv1"></div>

HTML fragment:  <br />
<div id="xmldomdiv2"></div>

<b>jQuery Wrapper </b>  <br />

XML fragment:  <br />
<div id="jqdiv1"></div>

HTML fragment:  <br />
<div id="jqdiv2"></div>

</body>

<script>

var xmlfragment = '<book><title>My Book Title</title><author>Joe Author</author></book>';
var htmlfragment = '<div><p>My Book Title</p><p>Joe Author</p></div>';

var $xmldomxml = $.xmlDOM( xmlfragment );
var $xmldomhtml = $.xmlDOM( htmlfragment );

var $jqxml = $( xmlfragment );
var $jqhtml = $( htmlfragment );

$('#xmldomdiv1').append( $xmldomxml.find('title, author'));
$('#xmldomdiv2').append( $xmldomhtml.find('p'));

$('#jqdiv1').append( $jqxml.find('title, author'));
$('#jqdiv2').append( $jqhtml.find('p'));

console.log("Here's fragment vars:  ");
console.log($xmldomxml);
console.log($xmldomhtml);
console.log($jqxml);
console.log($jqhtml);

</script> 
```

# javascript - 将自定义数据类型拖放到文本框中

> ID：12079557
> 
> 赞同：0
> 
> 时间：2012-08-22T18:51:15.543
> 
> 标签：javascript, html, drag-and-drop

我正在开发一项利用 HTML5 拖放功能的功能。这个功能只需要在 Firefox 中工作，所以我不担心跨浏览器的能力。这是我遇到的问题：我需要能够仅将我的数据拖到页面上的文本和密码字段中。如果我使用常规的 text/plain 数据类型，它可以正常工作，但它也允许将数据拖到搜索框中，这是不可接受的，因为我拖动的某些数据是敏感的（密码）。另一种方法是使用自定义数据类型，但是当我这样做时，我的文本和密码字段将停止接受丢弃。简而言之，我的代码现在看起来像这样：

```
document.getElementById('#init').addEventListener('dragstart', function(e){
    e.dataTransfer.setData('text/link-uri', 'www.test.com');
    e.dataTransfer.setData('text/sensitive', e.target.dataset.value);
    e.dataTransfer.effectAllowed = 'copy';
});  
window.addEventListener('dragenter', function(e){
    if (e.target.type !== 'text' || e.target.type !== 'password') {
       e.preventDefault();
    }
});
window.addEventListener('dragover', function(e){
    if (e.target.type !== 'text' || e.target.type !== 'password') {
       e.preventDefault();
    }
});
window.addEventListener('drop', function(e){
    var data = e.dataTarnsfer.getData('text/sensitive');
    e.target.value = data;
}); 
```

这里有解决方法吗？我不知何故需要禁止拖入搜索框的能力。因此，我需要从具有文本/纯文本数据类型的允许目标列表中排除搜索框，或者使文本/密码字段理解新的数据类型。任何指针将不胜感激。谢谢！卢卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T21:11:17.083

好的，经过一番摸索，我能够克服这个问题。对于任何感兴趣的人，我基本上将 text/plain 设置为一些虚假数据，并且只在 drop 处理程序中使用了我的自定义数据类型。这样，对于我的表单，它总是使用实际值，但是当我将值拖到搜索框时，它会拾取虚假数据。

# javascript - 通过 citymap 传递颜色

> ID：12079560
> 
> 赞同：0
> 
> 时间：2012-08-22T18:51:20.933
> 
> 标签：javascript, google-maps

我创建了一个 while 循环，它在 Google 地图上生成多个预定义的圆圈。每个圆圈都是基于其他预定义信息的不同圆圈。我的问题是，当我在 citymap 中创建一个键/值对时，当我创建实际的圆圈时它不会通过。谷歌调试器在`Uncaught SyntaxError: Unexpected token ILLEGAL`任何地方返回`colors`。这是代码。

这部分在一个while循环中。

```
 citymap["<?php echo ${'location_' . $e};?>"] = {
    center: new google.maps.LatLng(<?php echo ${'coordinates_' . $e};?>),
    population: <?php echo ${'radius_' . $e}; ?>,
    colors : <?php echo $color; ?>       
  }; 
```

这是构造圆圈的代码。

```
 for (var city in citymap) {
      // Construct the circle for each value in a location.
      var populationOptions = 
      {
        strokeColor: citymap[city].colors,
        strokeOpacity: 0.8,
        strokeWeight: 2,
        fillColor: citymap[city].colors,
        fillOpacity: 0.35,
        map: map,
        center: citymap[city].center,
        radius: citymap[city].population
      };
      cityCircle = new google.maps.Circle(populationOptions);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T19:09:45.887

该错误可能是由PHP部分引起的。查看页面源代码并查看 PHP 生成的 js 代码，并确保它是有效的 JS 数组并且没有任何语法错误等。

# c# - 通过 XPath 使用 HtmlAgilityPack 从 html 文档中获取文本

> ID：12079565
> 
> 赞同：4
> 
> 时间：2012-08-22T18:51:42.643
> 
> 标签：c#, xpath, html-agility-pack

我在一个文件中有以下 html，我正在将此文件加载到`HTMLDocument`using `HtmlAgilityPack`.

问题是我只想`Hello World!`使用`XPath`而不是内部文本。

我如何实现这一目标？

```
<ul>
    <li>
        Hello world!
        <ul>
            <li>
                Welcome to planet!
            </li>
        </ul>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T19:03:34.147

```
htmlDocument.DocumentNode.SelectNodes("//ul/li").First().FirstChild.InnerText; 
```

将返回 Hello world！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T19:04:19.340

XPath：

```
//ul/li[1]/text() 
```

应选择实际文本“Hello World！”

然后您可以选择该节点的值。

正在使用：

```
string text = doc.DocumentElement.SelectSingleNode("//ul/li[1]/text()").Value; 
```

本质上，这就是说导航到 ul 节点，选择第一个 li，然后选择 text() 节点。

# c++ - 如何将 lib 文件和头文件添加到 C++ 项目

> ID：12079569
> 
> 赞同：0
> 
> 时间：2012-08-22T18:52:19.110
> 
> 标签：c++, visual-c++

我一直在 C++ 项目中使用 libcurl。我已将 libcurl 包含和库目录添加到 VC++ 目录中，并将 .lib 文件添加到链接器输入附加依赖项中。

一切正常，但是当我签入我的代码（TFS）并且有人在另一台机器上获取它时，由于没有在他们的机器上安装 libcurl 或安装在不同的路径等，他们无法构建等。

如何将所有必要的文件添加到我的 C++ 解决方案中，以便从源代码管理中获取项目的任何人都可以毫无错误地构建和链接。

谢谢

我采用的解决方案是将库文件添加到我的解决方案中的文件夹中，然后添加

```
$(SolutionDir)libs\curllib.lib 
```

链接器->输入中的附加依赖项

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T18:55:02.177

您不能将库添加到解决方案中。您应该沿着源代码分发库。将它放在项目的子目录中，以便它与整个项目源一起使用。然后在 Additional Library Dependencies 中配置路径。这样，人们在从源代码构建时应该能够适当地链接。

# java - 如何在 OAuth 身份验证期间静态提供 Twitter PIN

> ID：12079570
> 
> 赞同：2
> 
> 时间：2012-08-22T18:52:19.773
> 
> 标签：java, twitter, twitter4j

[http://twitter4j.org/en/code-examples.html](http://twitter4j.org/en/code-examples.html) - 如何在 OAuth 身份验证期间静态提供 Twitter PIN，代码示例讨论了提供 PIN（如果它已经可用）。

我们的应用程序是一个独立的 Java 应用程序，并且更愿意通过属性文件传递凭据，而无需任何人工干预。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T01:07:25.833

Twitter 将为您提供 PIN 码。

在示例中，Twitter4J 假设有人将在 Web 浏览器中复制它提供的 URL（`requestToken.getAuthorizationURL()`在第 10 行），并通过浏览器授权应用程序。之后，用户应该在示例程序中编写在其浏览器中显示的 PIN 码。

在此示例中，您有两个很大的缺点：

*   人为干预
*   如果 Twitter 没有给你一个 PIN 码，你会给你的示例程序提供哪个代码（如果你的 Twitter 应用程序的回调 URL 不是“ `oob`”，就会发生这种情况）？

您必须模拟人为干预才能获取 PIN 码。不幸的是，Twitter4J 似乎没有获得执行此操作的方法（我在 Javadoc 中没有看到这种方法），因此您必须自己编写以下过程：

1.  在 中检索网页的 HTML 代码`requestToken.getAuthorizationURL()`。
2.  此 HTML 页面包含一个表单，其中的一些参数将与用户名（或电子邮件）和用户密码一起发布，以获取 PIN 码。这些参数称为“ `oauth_token`”（您已经拥有的临时 OAuth 令牌）、“ `deny`”（如果您不想授权应用程序时使用的标记）和“ `authenticity_token`”。它们都在`<input>`HTML 标签中。挑选它们。
3.  模拟表单的发布。为此，您将不得不使用`POST oauth/authorize`端点。网址是`https://api.twitter.com/oauth/authorize?oauth_token=<your OAuth Token>`。该请求必须按照[Twitter 的 Authenticating requests 流程进行身份验证](https://dev.twitter.com/docs/auth/authorizing-request)。这是您将发布的内容：“ `authenticity_token=<the form's "authenticity_token" parameter>&session[username_or_email]=<user's name or email>&session[password]=<the user's password in clear>`”。如果您不授权应用程序，请`&deny=<the form's "deny" parameter>`在正文消息中附加“”。对您来说不会有任何问题，因为您`session[xxx]`在属性文件中获得了凭据（参数），并且您在表单中选择了其他参数（参见 2.）。
4.  Twitter API 将返回一个网页。如果授权成功，PIN 码将在里面。但是，要小心。PIN 采用不同的名称，具体取决于回调 URL。如果回调 URL 为“ `oob`”，则 PIN 码称为*OAuth PIN*。它是`<div id="oauth_pin">`HTML 标记中某处的 4 位数字。否则，它被称为*OAuth Verifier*。它包含在位于`<div class="happy notice callback">`HTML 标记中的 URL 中。在此 URL 中，PIN 是`oauth_verifier`请求字符串的。它看起来像一个 OAuth 令牌。

不要犹豫，看看我的流程的第 2 步和第 4 步的网页的 HTML 代码。了解这个过程非常有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-30T06:48:31.597

我今天花了一些时间试图弄清楚如何使用 Twitter4j 库在没有用户干预的情况下进行身份验证。我想出了以下内容：

```
ConfigurationBuilder conf = new ConfigurationBuilder();
conf.setOAuthConsumerKey(CONSUMER_KEY);
conf.setOAuthConsumerSecret(CONSUMER_KEY_SECRET);
conf.setOAuthAccessToken(TOKEN);
conf.setOAuthAccessTokenSecret(TOKEN_SECRET);
Twitter twitter = new TwitterFactory(conf.build()).getInstance(); 
```

通过使用 ConfigurationBuilder，我现在能够自动进行身份验证。当然，您需要相应地设置 CONSUMER 和 TOKEN 键的值。这是我验证它的方法：

```
User user = twitter.verifyCredentials();
System.out.println("Successfully verified credentials of " + user.getScreenName()); 
```

希望这可以帮助！

# ipad - ipad中的jQuery Mobile Slider十进制输出问题

> ID：12079577
> 
> 赞同：0
> 
> 时间：2012-08-22T18:52:39.697
> 
> 标签：ipad, slider, decimal

这次我需要帮助。现在正在开发扑克客户端，一个问题让我很着迷。

只是无法让滑块气泡正确输出十进制数字。

滑块图片： http: [//norwaydict.com/slider.jpg](http://norwaydict.com/slider.jpg)

我正在使用 Jquery 移动滑块插件。桌面浏览器中的输出还可以，但 ipad 中的输出不一样：ipad 中的十进制数字输出正确，但当数字为 1 或 0.40 时，它应该输出 1.00 或 0.40 但输出 1 或 0.4，以某种方式将这些数字舍入。

有帮助的插件代码：

```
/*!
 * jQuery Mobile v1.0b2
 * http://jquerymobile.com
 * Copyright 2010, jQuery Project
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*/
/*!
* jQuery UI Widget @VERSION
*
* Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
* http://docs.jquery.com/UI/Widget
*/

/*
* jQuery Mobile Framework : "slider" plugin
* Copyright (c) jQuery Project
* Dual licensed under the MIT or GPL Version 2 licenses.
* Forked by Elmundio87 to add vertical orientation
* http://jquery.org/license
*/

( function( $, undefined ) {

$.widget( "mobile.slider", $.mobile.widget, {
options: {
    theme: null,
    trackTheme: null,
    disabled: false,
    initSelector: "input[type='range'], :jqmData(type='range'), :jqmData(role='slider')"
},

_create: function() {

    // TODO: Each of these should have comments explain what they're for
    var self = this,

        control = this.element,

        parentTheme = control.parents( "[class*='ui-bar-'],[class*='ui-body-']" ).eq( 0 ),

        parentTheme = parentTheme.length ? parentTheme.attr( "class" ).match( /ui-(bar|body)-([a-z])/ )[ 2 ] : "c",

        theme = this.options.theme ? this.options.theme : parentTheme,

        trackTheme = this.options.trackTheme ? this.options.trackTheme : parentTheme,

        cType = control[ 0 ].nodeName.toLowerCase(),

        selectClass = ( cType == "select" ) ? "ui-slider-switch" : "",

        controlID = control.attr( "id" ),

        labelID = controlID + "-label",

        label = $( "[for='"+ controlID +"']" ).attr( "id", labelID ),

        val = function() {
            //$('#pool_balance_cashier').html('Slider value3: ' + parseFloat( control.val() ).toFixed(1));

            return  cType == "input"  ? parseFloat( control.val() ).toFixed(2)  : control[0].selectedIndex;
        },

        min =  cType == "input" ? parseFloat( control.attr( "min" ) ) : 0,

        max =  cType == "input" ? parseFloat( control.attr( "max" ) ) : control.find( "option" ).length-1,

        sliderOrientation = control.attr( "sliderOrientation") || "horizontal",

        step = window.parseFloat( control.attr( "step" ) || 1 ),     
        //step = (cType === "input") ? parseFloat(control.attr("step")) : 0,

        slider = $( "<div class='ui-slider-" + sliderOrientation + " " + selectClass + " ui-btn-down-" + trackTheme +
                                " ui-btn-corner-all' role='application'></div>" ),

        handle = $( "<a href='#' class='ui-slider-handle-"+sliderOrientation +"'></a>" )
            .appendTo( slider )
            .buttonMarkup({ corners: true, theme: theme, shadow: true })
            .attr({
                "role": "slider",
                "aria-valuemin": min,
                "aria-valuemax": max,
                "aria-valuenow": val(),
                "aria-valuetext": val(),
                "title": val(),
                "aria-labelledby": labelID
            }),
        options;

    $.extend( this, {
        slider: slider,
        handle: handle,
        dragging: false,
        beforeStart: null
    });

    if ( cType == "select" ) {

        slider.wrapInner( "<div class='ui-slider-inneroffset'></div>" );

        options = control.find( "option" );

        control.find( "option" ).each(function( i ) {

            var side = !i ? "b":"a",
                corners = !i ? "right" :"left",
                theme = !i ? " ui-btn-down-" + trackTheme :" ui-btn-active";

            $( "<div class='ui-slider-labelbg ui-slider-labelbg-" + side + theme + " ui-btn-corner-" + corners + "'></div>" )
                .prependTo( slider );

            $( "<span class='ui-slider-label ui-slider-label-" + side + theme + " ui-btn-corner-" + corners + "' role='img'>" + $( this ).text() + "</span>" )
                .prependTo( handle );
        });

    }

    label.addClass( "ui-slider" );

    // monitor the input for updated values
    control.addClass( cType === "input" ? "ui-slider-input" : "ui-slider-switch" )
        .change( function() {
            self.refresh( val(), true );
        })
        .keyup( function() { // necessary?
            self.refresh( val(), true, true );
        })
        .blur( function() {
            self.refresh( val(), true );
        });

    // prevent screen drag when slider activated
    $( document ).bind( "vmousemove", function( event ) {
        if ( self.dragging ) {
            self.refresh( event );
            return false;
        }
    });

    slider.bind( "vmousedown", function( event ) {
        self.dragging = true;

        if ( cType === "select" ) {
            self.beforeStart = control[0].selectedIndex;
        }
        self.refresh( event );
        return false;
    });

    slider.add( document )
        .bind( "vmouseup", function() {
            if ( self.dragging ) {

                self.dragging = false;

                if ( cType === "select" ) {

                    if ( self.beforeStart === control[ 0 ].selectedIndex ) {
                        //tap occurred, but value didn't change. flip it!
                        self.refresh( !self.beforeStart ? 1 : 0 );
                    }
                    var curval = val();
                    var snapped = Math.round( curval / ( max - min ) * 100 );
                    handle
                        .addClass( "ui-slider-handle-snapping" )
                        .css( "left", snapped + "%" )
                        .animationComplete( function() {
                            handle.removeClass( "ui-slider-handle-snapping" );
                        });
                }
                return false;
            }
        });

    slider.insertAfter( control );

    // NOTE force focus on handle
    this.handle
        .bind( "vmousedown", function() {
            $( this ).focus();

               //check cashier slider checkboxes off
               $('#addchips_min').removeClass('pool_checkbox_checked').addClass('pool_checkbox');
               $('#addchips_max').removeClass('pool_checkbox_checked').addClass('pool_checkbox');   

               $('#addchipsLobby_min').removeClass('pool_checkbox_checked').addClass('pool_checkbox');
               $('#addchipsLobby_max').removeClass('pool_checkbox_checked').addClass('pool_checkbox');          

        })
        .bind( "vclick", false );

    this.handle
        .bind( "keydown", function( event ) {
            var index = val();      

            if ( self.options.disabled ) {
                return;
            }

            // In all cases prevent the default and mark the handle as active
            switch ( event.keyCode ) {
             case $.mobile.keyCode.HOME:
             case $.mobile.keyCode.END:
             case $.mobile.keyCode.PAGE_UP:
             case $.mobile.keyCode.PAGE_DOWN:
             case $.mobile.keyCode.UP:
             case $.mobile.keyCode.RIGHT:
             case $.mobile.keyCode.DOWN:
             case $.mobile.keyCode.LEFT:
                event.preventDefault();

                if ( !self._keySliding ) {
                    self._keySliding = true;
                    $( this ).addClass( "ui-state-active" );
                }
                break;
            }

            // move the slider according to the keypress
            switch ( event.keyCode ) {
             case $.mobile.keyCode.HOME:
                self.refresh( min );
                break;
             case $.mobile.keyCode.END:
                self.refresh( max );
                break;
             case $.mobile.keyCode.PAGE_UP:
             case $.mobile.keyCode.UP:
             case $.mobile.keyCode.RIGHT:
                self.refresh( index + step );
                break;
             case $.mobile.keyCode.PAGE_DOWN:
             case $.mobile.keyCode.DOWN:
             case $.mobile.keyCode.LEFT:
                self.refresh( index - step );
                break;
            }
        }) // remove active mark
        .keyup( function( event ) {
            if ( self._keySliding ) {
                self._keySliding = false;
                $( this ).removeClass( "ui-state-active" );
            }
        });

    this.refresh(undefined, undefined, true);
},

refresh: function( val, isfromControl, preventInputUpdate ) {

    if ( this.options.disabled ) { return; }

    var control = this.element, percent,
        cType = control[0].nodeName.toLowerCase(),
        min = cType === "input" ? parseFloat( control.attr( "min" ) ) : 0,
        max = cType === "input" ? parseFloat( control.attr( "max" ) ) : control.find( "option" ).length - 1;
        sliderOrientation = control.attr( "sliderOrientation") || "horizontal";

    if ( typeof val === "object" ) {
        var data = val,
            // a slight tolerance helped get to the ends of the slider
            tol = 8;

        if(sliderOrientation == "horizontal"){  
            if ( !this.dragging || data.pageX < this.slider.offset().left - tol || data.pageX > this.slider.offset().left + this.slider.width() + tol ) {return;}
        }
        else
        {
            if ( !this.dragging || data.pageY < this.slider.offset().top - tol || data.pageY > this.slider.offset().top + this.slider.height() + tol ) {return;}
        }

        if(sliderOrientation == "horizontal")
        {
          percent = Math.round( ( ( data.pageX - this.slider.offset().left ) / this.slider.width() ) * 100 );
        }
        else
        {
          percent = Math.round( ( ( data.pageY - this.slider.offset().top ) / this.slider.height() ) * 100 );
        }

    } else {
        if ( val == null ) {
            val = cType === "input" ? parseFloat( control.val() ) : control[0].selectedIndex;
        }
        percent = ( parseFloat( val ) - min ) / ( max - min ) * 100;
    }

    if ( isNaN( percent ) ) {
        return;
    }

    if ( percent < 0 ) {
        percent = 0;
    }

    if ( percent > 100 ) {
        percent = 100;
    }

    //var newval = Math.round( ( percent / 100 ) * ( max - min ) ) + min;

    // newval needs to support floating point min / max values, and must round to the step value
    var newval = (percent / 100) * (max - min) + min;
    newval -= (((newval - min) * 100) % (0.01 * 100)) / 100;
    //newval = Math.round(newval * 100 + 0.01) / 100;
    newval = Utils.formatFloatVal((newval * 100 + 0.01) / 100, false, true);
    //$('#pool_balance_cashier').html('Slider value: ' + newval);

    if(canvas != null){
        if(canvas.width < 560){ //only for iphone
          $('#iphone_amountIndicator').html('<br> ' + newval); 
          $('#slider-bet').hide();
          $('#slider-bet .ui-slider-handle').hide();
        }else{
          $('#iphone_amountIndicator').empty();
          $('#slider-bet').show();
        }
    }

    //set div that indicates how much we choose to bet with slider
    //$(".amountIndicator").width(percent * 280 / 100);
    if(control.attr('id') == 'slider-cashier'){
        $("#amountIndicator_settings").width(percent * 280 / 102);
    }
    else if(control.attr('id') == 'slider-lobby-cashier'){
        $("#amountIndicator_lobby").width(percent * 280 / 100);
    }
    else{
        $("#amountIndicator_pool").width(percent * 280 / 100);
    }

    //set label amount to bet/raise button
    //$('#prc_pool_notice').html(' <br><br> ----- Slider value: ' + newval + ' this.id: ' + control.attr( "id" ) + ' ----- <br>');
    if(buttons.btns != null){
        if(buttons.btns[3].active){
            buttons.btns[3].label_amount = GL_CURRENCY_SIGN+newval;   
        }
        else if(buttons.btns[4].active){
            buttons.btns[4].label_amount = '€'+newval;      
        }
    }

    if ( newval < min ) {
        newval = min;
    }

    if ( newval > max ) {
        newval = max;
    }

    // Flip the stack of the bg colors
    if ( percent > 60 && cType === "select" ) {
        // TODO: Dead path?
    }

    if(sliderOrientation == "horizontal")
    {
        //for slider cahsier -> not to very end of slide panel
        if(control.attr('id') != 'slider-bet'){
            this.handle.css( "left", percent / 1.3 + "%" ); 
            if(percent > 50){
                this.handle.css( "left", percent/1.17 + "%" ); 
            }       
        }else{
            this.handle.css( "left", percent + "%" ); 
        }
    }
    else
    {
        this.handle.css( "top", percent + "%" );
    }

    this.handle.attr( {
            "aria-valuenow": cType === "input" ? newval : control.find( "option" ).eq( newval ).attr( "value" ),
            "aria-valuetext": cType === "input" ? newval : control.find( "option" ).eq( newval ).text(),
            title: newval 
        });

    // add/remove classes for flip toggle switch
    if ( cType === "select" ) {
        if ( newval === 0 ) {
            this.slider.addClass( "ui-slider-switch-a" )
                .removeClass( "ui-slider-switch-b" );
        } else {
            this.slider.addClass( "ui-slider-switch-b" )
                .removeClass( "ui-slider-switch-a" );
        }
    }

    if ( !preventInputUpdate ) {
        // update control"s value
        if ( cType === "input" ) {
            control.val( newval );
        } else {
            control[ 0 ].selectedIndex = newval;
        }
        if ( !isfromControl ) {
            control.trigger( "change" );
        }
    }
},

enable: function() {
    this.element.attr( "disabled", false );
    this.slider.removeClass( "ui-disabled" ).attr( "aria-disabled", false );
    return this._setOption( "disabled", false );
},

disable: function() {
    this.element.attr( "disabled", true );
    this.slider.addClass( "ui-disabled" ).attr( "aria-disabled", true );
    return this._setOption( "disabled", true );
}

});

  //auto self-init widgets
 $( document ).bind( "pagecreate create", function( e ){

$( $.mobile.slider.prototype.options.initSelector, e.target )
    .not( ":jqmData(role='none'), :jqmData(role='nojs')" )
    .slider();

  });

})( jQuery ); 
```

有感觉

```
 val = function() {
          //$('#pool_balance_cashier').html('Slider value3: ' + parseFloat( control.val() ).toFixed(1));

          return  cType == "input"  ? parseFloat( control.val() ).toFixed(2)  :   control[0].selectedIndex;
    }, 
```

与输出有关。

如果你在这方面提供帮助，我会很高兴。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T19:13:59.150

HTML5 data type="number" 可能是罪魁祸首，如果这是该字段的呈现方式。在 iOS 上，它会删除尾随零。这很烦人。典型的解决方法是将其设置为 type="text" 字段。

# r - 我在做什么错（data.table，R）？

> ID：12079578
> 
> 赞同：2
> 
> 时间：2012-08-22T18:52:40.943
> 
> 标签：r, data.table

我目前正在使用包中的`set`函数进行一些测试，并具有以下代码：`data.table``R`

```
 dt= data.table(ans=rep(c(14,16),100))
  dt[,voy:=0.0]
  set(dt,which(dt[,ans]==14),"voy",log(dt[,ans]))
  dt 
```

请注意，我想计算`ans=14`使用该`set`函数的情况的对数，但我没有得到正确的结果。这是我得到的结果：

```
 ans      voy
  1:  14 2.639057
  2:  16 0.000000
  3:  14 2.772589
  4:  16 0.000000
  5:  14 2.639057
  ---             
  196:  16 0.000000
  197:  14 2.639057
  198:  16 0.000000
  199:  14 2.772589
  200:  16 0.000000 
```

您可能会注意到，对于某些行，变量的值`voy`是预期的`log(14)=2.639057`，但对于其他情况，变量的值`ans=14`是赋值的`2.772589=log(16)`。所以，我认为我在滥用该`set`功能。我该如何解决这个问题？我知道下一个代码可用于执行此操作：

```
dt[ans==14,voy:=log(ans)] 
```

但我想把它翻译成`set`函数语法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T19:57:26.993

您需要对 value 参数的数据进行子集化。在您的情况下，警告*Supplied 200 items to be assigned to 100 items of column 'voy' (100 used)*可能会给您一个想法。您正在逐一挑选 的前 100 个值`dt$ans`，它们确实是交替的 14 和 16 值。

这样它的工作原理：

```
set(dt,which(dt[,ans]==14),"voy",log(dt[ans==14,ans])) 
```

给予：

```
 ans      voy
  1:  14 2.639057
  2:  16 0.000000
  3:  14 2.639057
  4:  16 0.000000
  5:  14 2.639057
 ---             
196:  16 0.000000
197:  14 2.639057
198:  16 0.000000
199:  14 2.639057
200:  16 0.000000 
```

但正如@Andrie 已经指出的那样，这是丑陋的代码。

# android - 如何在线性布局中获得我的重量以正确对齐按钮？

> ID：12079580
> 
> 赞同：0
> 
> 时间：2012-08-22T18:52:57.047
> 
> 标签：android, button, imagebutton

我正在尝试配置我的按钮布局，但无法正确形成结构。当我在 VM 上运行代码时，它使 ImageButton 广告占据了屏幕的 50% 以上，尽管重量仅为 10%。每个图像按钮引用一个存储在 drawable-ldpi 中的图像，每个大小约为 1 KB，并且活动代码是基本的，没有添加，这目前是通过主 xml 的纯图形界面。

预期布局：

```
 _______________________
|        logo          |
|______________________|
|       search         |
|______________________|
|                      |
|     featured         |
|                      |
|______________________|
|    |     |     |     |
|    |     |     |     |
|    |     |     |     |
|    |     |     |     |
|    |     |     |     |
|    |     |     |     |
|    |     |     |     |
|____|_____|_____|_____|
|     advertisement    |
|______________________| 
```

ANDROID MAIN.XML 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mainlayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/toplayout"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_weight="45"
        android:gravity="top"
        android:orientation="vertical" >

        <ImageButton
            android:id="@+id/mytastelogo"
            android:layout_width="fill_parent"
            android:layout_height="match_parent"
            android:layout_weight="15"
            android:src="@drawable/mytastelogo_image" />

        <ImageButton
            android:id="@+id/search"
            android:layout_width="fill_parent"
            android:layout_height="match_parent"
            android:layout_weight="10" />

        <ImageButton
            android:id="@+id/featuredpanel"
            android:layout_width="fill_parent"
            android:layout_height="match_parent"
            android:layout_weight="20" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/bottomlayout"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_weight="45"
        android:gravity="bottom"
        android:orientation="horizontal" >

        <ImageButton
            android:id="@+id/mycollection"
            android:layout_width="match_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:src="@drawable/mycollection_image" />

        <ImageButton
            android:id="@+id/myrecommendations"
            android:layout_width="match_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:src="@drawable/myrecommendations_image" />

        <ImageButton
            android:id="@+id/topitems"
            android:layout_width="match_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:src="@drawable/topitems_image" />

        <ImageButton
            android:id="@+id/randomitem"
            android:layout_width="match_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:src="@drawable/randomitem_image" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/adlayout"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_weight="10"
        android:gravity="end" >

        <ImageButton
            android:id="@+id/advertisement"
            android:layout_width="match_parent"
            android:layout_height="match_parent" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T19:14:13.430

试试吧 :-)

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/mainlayout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<LinearLayout
    android:id="@+id/toplayout"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="45"
    android:gravity="top"
    android:orientation="vertical" >

    <ImageButton
        android:id="@+id/mytastelogo"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="15" />

    <ImageButton
        android:id="@+id/search"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="10" />

    <ImageButton
        android:id="@+id/featuredpanel"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="20" />
</LinearLayout>

<LinearLayout
    android:id="@+id/bottomlayout"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="45"
    android:gravity="bottom"
    android:orientation="horizontal" >

    <ImageButton
        android:id="@+id/mycollection"
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1" />

    <ImageButton
        android:id="@+id/myrecommendations"
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1" />

    <ImageButton
        android:id="@+id/topitems"
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1" />

    <ImageButton
        android:id="@+id/randomitem"
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1" />
</LinearLayout>

<LinearLayout
    android:id="@+id/adlayout"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="10" >

    <ImageButton
        android:id="@+id/advertisement"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T18:56:18.300

当您的方向为 时，您需要设置`layout_height`为。如果是，请将您的设置为.`0dp``vertical``horizontal``layout_width``0dp`

例如：

```
<LinearLayout
        android:id="@+id/toplayout"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="45"
        android:gravity="top"
        android:orientation="vertical" > 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-22T18:58:07.040

所有具有决定其高度的权重的项目都应将 android:layout_height 设置为 0dp。

```
android:layout_height="0dp" 
```

同样对于宽度由重量决定的物品，您必须设置

```
android:layout_width="0dp" 
```

# javascript - 加载 GIF 以匹配 DIV 的加载时间。jQuery

> ID：12079581
> 
> 赞同：0
> 
> 时间：2012-08-22T18:52:58.513
> 
> 标签：javascript, jquery, timer, loading

我有一个 javascript，它检索从一组复选框中选中的值并加载一个传递这些值的 DIV。

目前，我在加载 DIV 之前显示“加载”.gif。不过，时间是固定的。

我想设置这个 GIF 的时间，直到 DIV 完全加载其内容，所以用户知道数据正在加载，以防有时比其他人慢。

任何想法？

谢谢！

```
$(function() {
    $("input[type='checkbox']").on('change', function() {
        var colors = [];
        $("input[type='checkbox']:checked").each(function() {
            colors.push(this.value);
        });
        if (colors.length) {
            $(".loadingItems").fadeIn(300);
            $(".indexMain").load('indexMain.php?color=' + colors.join("+"), function() {
                $(".indexMain").fadeIn(slow);
            });
            $(".loadingItems").fadeOut(300);
        } else {
            $(".loadingItems").fadeIn(300);
            $(".indexMain").load('indexMain.php', function() {
                $(".loadingItems").fadeOut(300);
            });
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T19:17:26.033

正如@Fabricio Matte 所建议的那样，解决方案是将第一个 Fade Out 放在负载内的负载内，该函数与负载一起启动：

```
 $(".indexMain").load('indexMain.php?color=' + colors.join("+"), function() {
                $(".indexMain").fadeIn(slow);
$(".loadingItems").fadeOut(300);
            }); 
```

# python - 错误 R14（超出内存配额）在 New Relic 中不可见

> ID：12079582
> 
> 赞同：5
> 
> 时间：2012-08-22T18:52:59.770
> 
> 标签：python, django, heroku

在 Heroku 上不断收到错误 R14（超出内存配额）。

在本地分析 django 应用程序上的内存我没有看到任何问题。我们已经安装了 New Relic，那里的一切似乎都很好，除了一个奇怪的地方：

[http://screencast.com/t/Uv1W3bjd](http://screencast.com/t/Uv1W3bjd)

每个测功机的内存使用量在 15mb 左右徘徊，但由于某种原因，“测功机运行”的东西迅速扩展到 10+。不确定这有什么意义，因为我们目前只在 web dyno 上运行。

我们也在运行 celery，那里的情况看起来也很正常（大约 15mb）。虽然这是可疑的，因为我相信我们在启动时就开始出现错误。

我们的一些请求确实需要一段时间，因为它们会发出一个回显的肥皂请求，有时可能需要 6-10 秒才能响应。这是否以某种方式阻塞并导致新的测功机旋转？

这是我的proc文件：

```
web: python manage.py collectstatic --noinput; python manage.py compress; newrelic-admin run-program python manage.py run_gunicorn -b "0.0.0.0:$PORT" -w 9 -k gevent --max-requests 250
celeryd: newrelic-admin run-program python manage.py celeryd -E -B --loglevel=INFO 
```

主要问题是内存错误。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-23T05:53:09.477

我相信我可能已经找到了问题所在。

基于这样的帖子[，](http://v3.mike.tig.as/blog/2012/02/13/deploying-django-on-heroku/)[我](http://www.askthepony.com/blog/2011/07/getting-django-on-heroku-prancing-8-times-faster/)认为我应该有 9-10 名枪手工人。我认为这是不正确的（或者至少，它适用于我的应用程序正在做的工作）。

我一直在运行 9 个 gunicorn worker，最后意识到这是 heroku 和 local 之间唯一真正的区别（就配置而言）。

根据[gunicorn 设计文件](http://gunicorn.org/design.html)，对工人的建议是这样的：

> 不要将工作人员的数量扩展到您期望拥有的客户数量。Gunicorn 应该只需要 4-12 个工作进程来处理每秒数百或数千个请求。
> 
> Gunicorn 在处理请求时依靠操作系统来提供所有的负载平衡。通常我们推荐 (2 x $num_cores) + 1 作为开始的工人数量。虽然不是太科学，但该公式是基于这样的假设，即对于给定的核心，一个工作人员将在另一个工作人员处理请求时从套接字读取或写入。

虽然那里有关于 Heroku Dyno CPU 能力的信息，但我现在读到每个 dyno 都在大约 1/4 的核心上运行。不是超级强大，但我想足够强大。

**将我的员工调到 3**（根据他们的粗略公式，这个数字甚至更高）似乎已经停止了我的记忆问题，至少现在是这样。当我想到它时，我会得到的关于内存警告的有趣之处在于它永远不会上升。它达到了 103% 左右，然后就停留在那里，而如果它实际上是泄漏，它应该一直上升直到被关闭。所以我的理论是我的工人最终消耗了足够的内存来超过 512mb。

**HEROKU 应该在某处添加此信息！**至少我应该能够`top`进入我的跑步测功机看看发生了什么。本来可以节省我几个小时和几天的时间。

# xpages - xPages Eclipse菜单上的OpenNTF导入？

> ID：12079583
> 
> 赞同：1
> 
> 时间：2012-08-22T18:53:01.510
> 
> 标签：xpages

我参加了在匹兹堡举行的 MVLUG 会议。我看到的其中一件事是 Eclipse 菜单中的一个条目，可以让您从 OpenNTF 导入自定义控件。我怎样才能将它添加到我的菜单中，或者它是作为 Notes 更新的一部分出现的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T19:31:03.847

这是一个 OpenNTF 项目 - 从 Domino Designer 导入和导出[http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=Import%20and%20Export%20for%20Designer](http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=Import%20and%20Export%20for%20Designer)

它可用于打包数据库以导出到 OpenNTF。它不仅可以用于导入自定义控件，还可以用于导入任何设计元素。它基于项目中的 XML 文件。该文件定义了应该导入哪些设计元素（可能有用于测试的 XPage，例如使用该功能时不需要的测试）。

如果您将任何内容推送到 OpenNTF，请包含开发人员需要从您的 NSF 中提取哪些设计元素的 XML 文件，以使他们的应用程序能够完全运行。

如果你想看到它的实际效果，你应该可以用它来导入我放在 OpenNTF 上的 Mobile Value Picker 项目。您会看到它没有引入示例应用程序中可用的 XPage 来演示功能。[http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=Mobile%20Value%20Picker](http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=Mobile%20Value%20Picker)

# java - Java 读取具有特定模式的文件

> ID：12079589
> 
> 赞同：0
> 
> 时间：2012-08-22T18:53:24.003
> 
> 标签：java, unix, file-io, filenames

我正在尝试从 java 程序中具有模式格式的 unix 文件系统读取文件。

文件名模式是这样的：

```
"XYZ"+"abcd1234"+MMddyyyyHHmmss 
```

例如：XYZabc123403222012101329

“abcd1234”的中间模式不是固定的而是变化的，所以它将是字母数字和总字符长度为7。

如何读取具有这种模式的文件？该文件可以包含文本或序列化对象。

```
String path="/tmp/somedir";

final File folder = new File("/tmp/somedir");
List<String> fileNames = new ArrayList<String>();

    try {
        for (final File fileEntry : folder.listFiles()) {
            if (fileEntry.isDirectory()) {
                listFilesForFolder(fileEntry);
            } else {
                //System.out.println(fileEntry.getName());
                fileNames.add(fileEntry.getName());
            }
        }

        for(String str: fileNames) {
            FileInputStream fileIn = new FileInputStream(path+"/"+str);
        }

    } catch(FileNotFoundException e) {
        e.printStackTrace();
    } catch(Exception e1) {
        e1.printStackTrace();
    } 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T19:05:07.730

我认为您可以使用调节器表达式来过滤文件。这是 apache commons [http://commons.apache.org/io/api-release/org/apache/commons/io/filefilter/RegexFileFilter.html](http://commons.apache.org/io/api-release/org/apache/commons/io/filefilter/RegexFileFilter.html)的文档类， 这是一个关于它的老问题。 [用于文件过滤的 Java 正则表达式](https://stackoverflow.com/questions/367862/java-regexp-for-file-filtering)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T19:05:18.930

您也许可以使用正则表达式。我现在在 C# 中做同样的事情。我有来自客户端的文件，这些文件具有共同的前缀、中间的日期和共同的文件扩展名。

假设 abc1234 总是七个字符长，您可以使用以下正则表达式模式。

XYZ.{7}\d{14}

.{7} 表示任何字符最多可以出现七次。\d{14} 表示它最多可以计算 14 位数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T19:13:46.020

我推荐[这个站点](http://www.exampledepot.com/egs/java.io/GetFiles.html)，您将了解如何从您的目录中获取所有文件。

在此之后，在方法中：`accept`对其参数应用正则表达式：`name`。

对于正则表达式，请查看[此链接](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)。

# android - Android sendevent 真的很慢 - 如何加快速度？

> ID：12079591
> 
> 赞同：4
> 
> 时间：2012-08-22T18:53:30.540
> 
> 标签：android, user-interface, automation, adb

我正在做一些 ui 自动化，我可以使用 getevent 存储屏幕触摸，但是当我尝试使用 sendevent 发送它时，它需要很长时间，因此很难真正重播输入。

我已经尝试将脚本加载到设备上并在设备上本地运行脚本（带有一堆 sendevent 命令的脚本）。但这只是稍微改善了这一点。有没有其他方法可以更快地注入这些命令？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T18:29:10.740

触摸处理程序在不同设备上的实现方式不同。您应该`cat /proc/bus/input/devices`查看触摸处理程序的实现位置。

您还可以`adb shell getevent`与设备交互并查看接口名称的输出。

您的重播需要很长时间的原因是因为 sendevent 二进制文件会打开接口文件，向其中写入数据并在每次调用 sendevent 时将其关闭。所以理论上，如果你有一堆 sendevent 命令，二进制文件是打开接口文件，写入数据并为每个命令关闭它。

我解决此问题的方法是重写 /system/core/toolbox 下的 sendevent.c 文件，以便在重播期间仅打开一次文件，写入所有数据并在重播结束时将其关闭。它非常适合我！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-14T17:19:24.690

好的。您可以尝试从 adb shell 中的事件接口直接读取，而不是使用 getevent/sendevent 尝试：

> dd if=/dev/input/event6 of=record1 # 记录
> 
> dd if=./record1 of=/dev/input/event6 #播放

但是，这可能运行得太快了......

# c - 布尔抽象 C 程序

> ID：12079593
> 
> 赞同：0
> 
> 时间：2012-08-22T18:53:34.503
> 
> 标签：c, boolean, abstraction

我正在尝试使用谓词计算以下 C 代码片段的抽象：`b: { x >= 0 }`

```
1\. if( x > 5 )
2\.   x = x - 2;
3\. else
4\.   x = abs( x ) + 6;
5\. assert( x >= 0 ); 
```

到目前为止，我抽象了：

```
1\. if( * ) // not sure if I should put if( b ) here
2\.   assume( b ); b = true;
3\. else
4\.   assume( true ); // ? don't know how to abstract further
5\. assert( b ) 
```

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T19:43:39.633

我不知道我的理解是否正确，但对于输入谓词集`{x>=0}`或`b`（替代使用）。应该是：-

```
{x>=0}=unknown()   //unknown function is used to generate true or false non-deterministically

if(*)
{
 assume({x>=0});
 {x>=0}=true;
}
else
{
 assume(!{x>=0});
 {x>=0}=false;
} 
```

# ruby-on-rails - Rails - 迁移 - change_column_default

> ID：12079595
> 
> 赞同：6
> 
> 时间：2012-08-22T18:53:43.380
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我希望通过迁移更改数据库中整数的默认值

```
class ChangeColumnDefault < ActiveRecord::Migration
  def self.up
    change_column_default(:persons, :age, 0)
  end
end 
```

我也试过：

```
class ChangeColumnDefault < ActiveRecord::Migration
      def change
        change_column_default(:persons, :age, 0)
      end
    end 
```

我只是通过以下方式运行迁移：

```
rake db:migrate VERSION=20120822182554_change_column_default.rb 
```

终端中没有显示任何错误，并且我的 schema.rb 中没有任何变化

任何想法/提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:56:15.120

我刚试过这个，它奏效了。看起来你的桌子是：人而不是：人。对我来说，使用“def up”和“def down”也是最重要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T19:21:13.773

也许只使用`rake db:migrate VERSION=20120822182554`

表名在哪里？:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-20T23:28:33.090

因此，假设您要将默认值设置为 nil 并创建了以下文件`db/migrate/20200820171322_change_default_field_on_table.rb`

```
# frozen_string_literal: true

class ChangeDefaultFieldOnTable < ActiveRecord::Migration[5.1]

  def up
    change_column_default(:table, :column_name, nil)
  end

end 
```

如果它有帮助，那应该可以解决问题！

# php - PHP Uploader 不会重命名上传

> ID：12079596
> 
> 赞同：0
> 
> 时间：2012-08-22T18:54:00.087
> 
> 标签：php, apache

我的 Dedi 服务器上有一个 PHP 上传器，上传器可以正常工作，只有在上传文件后，它才不会从它们的临时名称重命名它们。

结果是这样的

```
2b4134a1f559b6da866c9febbc92d709.mp3 
```

上传文件.php

```
 <?php

class file {

    public $id;
    public $fileName;
    public $systemFilename;
    public $fileType;
    public $fileExtension;
    public $systemUrl;
    public $originalUrl;
    public $thumbPath;
    public $thumbUrl;
    public $canHaveThumb;
    public $ts;
    public $size;
    public $authorized;
    public $knownExtensions;
    public $mimeType;
    public $filePath;

    public function __construct() {
        $this->setKnownExtensions();
    }

    // Check and save a new file on the disk and the database
    public function uploadNewFile($files) {

        $result = array(); // The variable we will send back when we have finished to check and save the file
        $this->setFileName($files['Filedata']['name']);
        if ($this->authorized) {

            // Build the target path
            $siteUrl = F3::get('siteUrl'); // Set in config.php
            $uploadFolder = F3::get('uploadFolder'); // Set in config.php
            $uploadUrl = $_SERVER['DOCUMENT_ROOT'] . '/' . $uploadFolder . '/';

            // Get the temporary file
            $tempFile = $_FILES['Filedata']['tmp_name'];

            // Get a unique system name
            $rand = rand(1, 414342);
            $ts = time();
            $systemName = md5($rand . $ts);

            $this->systemFilename = $systemName . '.' . $this->fileExtension;
            $this->ts = $ts;

            // Clean the path
            $targetFile = str_replace('//', '/', $uploadUrl) . $this->systemFilename;
            // Save the file on the disk
            move_uploaded_file($tempFile, $targetFile);

            // Save the file in the database
            DB::sql('INSERT INTO hm_files (fileName, systemFilename, fileType, time) VALUES ("' . $this->fileName . '", "' . $this->systemFilename . '", "' . $this->fileType . '", ' . $this->ts . ')');
            $this->id = F3::get('DB->pdo')->lastInsertId();

            // Retrieve the template for the file list
            $result['tableRow'] = $this->getTableRow();

            // We create a thumbnail if it is a simple image
            $this->createThumb();
        }

        $result['file'] = $this;
        return $result;
    }

    public function canHaveThumb() {
        if ($this->fileType == 'image') {

            $this->canHaveThumb = true;
        } else {
            $this->canHaveThumb = false;
        }
        return $this->canHaveThumb;
    }

    public function createThumb() {
        if ($this->canHaveThumb()) {
            $filePath = $this->getFilePath();
            if (file_exists($filePath)) {
                $thumbPath = site::getThumbsPath();
                $thumb = new image($filePath);
                $thumb->dir($thumbPath);
                $thumb->width(250);
                $thumb->save();
            }
        }
    }

    public function getThumbPath() {
        $thumbFolderPath = site::getThumbsPath();
        $this->thumbPath = $thumbFolderPath . $this->systemFilename;

        if (!file_exists($this->thumbPath)) {
            $this->createThumb();
        }

        return $this->thumbPath;
    }

    public function getThumbUrl() {

        $base = F3::get('BASE');
        $thumbsFolder = F3::get('thumbsFolder');
        $this->thumbUrl = $base . '/' . $thumbsFolder . '/' . $this->systemFilename;

        return $this->thumbUrl;
    }

    // Delete a file
    public function delete() {
        $filePath = $this->getFilePath();
        if (file_exists($filePath)) {
            unlink($filePath); // Remove the file from the hard drive
        }
        if ($this->canHaveThumb()) {
            $thumbPath = $this->getThumbPath();
            if (file_exists($thumbPath)) {

                unlink($thumbPath); // Remove the thumb from the hard drive
            }
        }
        DB::sql('DELETE FROM hm_files WHERE id = ' . $this->id); // Remove from database
    }

    // Set the filename and the file extension
    public function setFileName($fileName) {
        $this->fileName = $fileName;
        $this->fileExtension = strtolower(substr(strrchr($this->fileName, '.'), 1));
        $this->checkExtension();
        $this->getFileType();
    }

    // Check if a file has an authorized extension
    public function checkExtension() {
        $okExtensions = F3::get('okExtensions'); // defined in config.php
        if (in_array($this->fileExtension, $okExtensions)) {
            $this->authorized = true;
        } else {
            $this->authorized = false;
        }
        return $this->authorized;
    }

    // Define the file type (eg: image, video, ...)
    // Not used in this version
    public function getFileType() {
        $ext = $this->fileExtension;
        if (isset($this->knownExtensions[$ext])) {
            $this->fileType = $this->knownExtensions[$ext];
        } else {
            $this->fileType = 'file';
        }
        return $this->fileType;
    }

    public function getFileSize() {
        $this->size = filesize($this->getFilePath());
        return $this->size;
    }

    // Transform the filesize in kilobytes, megabytes, ... and append the unit.
    public function getReadableSize() {
        $bytes = $this->getFileSize();
        $decimals = 2;
        $sz = 'BKMGTP';
        $factor = floor((strlen($bytes) - 1) / 3);
        return sprintf("%.{$decimals}f", $bytes / pow(1024, $factor)) . @$sz[$factor];
    }

    // Get the HTML for the file list
    public function getTableRow() {

        F3::set('file', $this);
        // We check if the file exist before displaying the table row
        if (file_exists($this->getFilePath())) {
            $tableRow = F3::render('views/table_row.php');
            return $tableRow;
        } else {
            return '';
        }
    }

    // Get a file path on the server harddrive
    public function getFilePath() {
        $path = F3::get('rootPath');
        $uploadsFolder = F3::get('uploadFolder');
        $this->filePath = $path . '/' . $uploadsFolder . '/' . $this->systemFilename;
        return $this->filePath;
    }

    public function getSystemUrl() {
        $base = F3::get('BASE');
        $this->systemUrl = $base . '/file/' . $this->systemFilename;
        return $this->systemUrl;
    }

    public function getOriginalUrl() {
        $siteUrl = F3::get('siteUrl');
        $uploadsFolder = F3::get('uploadFolder');

        $this->originalUrl = $siteUrl . '/' . $uploadsFolder . '/' . $this->systemFilename;
        return $this->originalUrl;
    }

    public function getMime() {
        $filePath = $this->getFilePath();
        $finfo = new finfo(FILEINFO_MIME);
        $info = $finfo->file($filePath);
        return $info;
    }

    public function gearUp($queryResult) {
        $this->id = $queryResult['id'];
        $this->fileName = $queryResult['fileName'];
        $this->systemFilename = $queryResult['systemFilename'];
        $this->fileType = $queryResult['fileType'];
        $this->ts = $queryResult['time'];
        $this->getSystemUrl();
        $this->getOriginalUrl();
        return $this;
    }

    // Display a single file
    public static function display($systemFilename) {
        $fileQuery = DB::sql('SELECT * FROM hm_files WHERE systemFilename LIKE "' . $systemFilename . '"');
        if (count($fileQuery) > 0) {
            $file = new file();
            $file->gearUp($fileQuery[0]);
            $mime = $file->getMime();
            header('Content-Disposition: inline; filename="' . $file->fileName . '"');
            header('Content-type: ' . $mime);
            readfile($file->getOriginalUrl());
        } else {
            return false;
        }
    }

    // Build a zip of files
    // You can create direct download by setting $directDownload on true.
    // Important : we don't use the classic ZipArchive class of PHP. When we zip large files it produces errors.
    // We use the pclzip class. Doc: http://www.phpconcept.net/pclzip/
    public static function serveZip($idsArray, $token, $directDownload = true) {
        if (count($idsArray) > 0) {
            $rootPath = F3::get('rootPath');
            $zipPath = $rootPath . '/zips/archive-' . $token . '.zip';
            $zipper = new pclzip($zipPath);

            foreach ($idsArray as $id) {
                $file = file::fetch($id);
                $filePath = $file->getFilePath();
                $filesArray = array(
                    array(PCLZIP_ATT_FILE_NAME => $filePath,
                        PCLZIP_ATT_FILE_NEW_FULL_NAME => $file->fileName)
                );
                $zipper->add($filesArray, PCLZIP_OPT_NO_COMPRESSION, PCLZIP_OPT_REMOVE_ALL_PATH);
            }

            // We set the cookie to track the end of zipping
            setcookie('multiUp', $token);

            // If this is a direct download we serve the zip in the browser and then destroy the zipfile on the server
            if ($directDownload) {
                $zipContent = file_get_contents($zipPath);
                header('Content-Disposition: attachment; filename="archive.zip"');
                header('Content-type: application/zip');
                echo $zipContent;
                unlink($zipPath);
            }
        }
    }

    // Get info for a single file
    public static function fetch($id) {
        $fileQuery = DB::sql('SELECT * FROM hm_files WHERE id = ' . $id);
        if (count($fileQuery) > 0) {
            $file = new file();
            $file->gearUp($fileQuery[0]);

            return $file;
        } else {
            return false;
        }
    }

    // Fetch all files in the database
    public static function fetchAll() {
        $files = array();
        $filesId = DB::sql('SELECT id FROM hm_files ORDER BY time DESC');
        foreach ($filesId as $fileId) {
            $file = file::fetch($fileId['id']);
            if ($file) {
                $files[] = $file;
            }
        }
        return $files;
    }

    // Creates families for file extensions
    // Not used in this version. Might be usefull to create icons
    private function setKnownExtensions() {
        $fileTypes = array();

        // DOCUMENTS
        $fileTypes['pdf'] = 'pdf';

        // PLAIN TEXT
        $fileTypes['txt'] = 'text';
        $fileTypes['rtf'] = 'text';
        $fileTypes['as'] = 'text';
        $fileTypes['xml'] = 'text';
        $fileTypes['html'] = 'text';
        $fileTypes['htm'] = 'text';
        $fileTypes['js'] = 'text';
        $fileTypes['php'] = 'text';
        $fileTypes['asp'] = 'text';
        $fileTypes['py'] = 'text';
        $fileTypes['sql'] = 'text';
        $fileTypes['css'] = 'text';

        // ARCHIVES
        $fileTypes['zip'] = 'archive';
        $fileTypes['rar'] = 'archive';
        $fileTypes['7zip'] = 'archive';
        $fileTypes['gzip'] = 'archive';
        $fileTypes['gz'] = 'archive';
        $fileTypes['tgz'] = 'archive';
        $fileTypes['ace'] = 'archive';
        $fileTypes['arc'] = 'archive';

        // EXCEL
        $fileTypes['xls'] = 'excel';
        $fileTypes['xlsx'] = 'excel';
        $fileTypes['xlsm'] = 'excel';
        $fileTypes['ods'] = 'excel';
        $fileTypes['ots'] = 'excel';
        $fileTypes['csv'] = 'excel';
        $fileTypes['numbers'] = 'excel';

        // WORD
        $fileTypes['doc'] = 'word';
        $fileTypes['docx'] = 'word';
        $fileTypes['odt'] = 'word';
        $fileTypes['ott'] = 'word';
        $fileTypes['pages'] = 'word';

        // POWERPOINT
        $fileTypes['ppt'] = 'powerpoint';
        $fileTypes['pptx'] = 'powerpoint';
        $fileTypes['odp'] = 'powerpoint';
        $fileTypes['otp'] = 'powerpoint';
        $fileTypes['key'] = 'powerpoint';

        // IMAGES
        $fileTypes['png'] = 'image';

        $fileTypes['gif'] = 'image';
        $fileTypes['jpg'] = 'image';
        $fileTypes['jpeg'] = 'image';

        // UNCOMMON IMAGEs
        $fileTypes['svg'] = 'rareimage';
        $fileTypes['svgz'] = 'rareimage';
        $fileTypes['jpf'] = 'rareimage';
        $fileTypes['bmp'] = 'rareimage';
        $fileTypes['eps'] = 'rareimage';
        $fileTypes['tif'] = 'rareimage';
        $fileTypes['tiff'] = 'rareimage';
        $fileTypes['raw'] = 'rareimage';
        $fileTypes['pbm'] = 'rareimage';
        $fileTypes['tga'] = 'rareimage';
        $fileTypes['cdr'] = 'rareimage';

        // "WORKING" IMAGES
        $fileTypes['psd'] = 'photoshop';
        $fileTypes['psb'] = 'photoshop';

        $fileTypes['ai'] = 'illustrator';
        $fileTypes['ait'] = 'illustrator';
        $fileTypes['fxg'] = 'illustrator';
        $fileTypes['cgm'] = 'illustrator';

        $fileTypes['indd'] = 'indesign';
        $fileTypes['idml'] = 'indesign';

        $fileTypes['fla'] = 'flash';
        $fileTypes['swf'] = 'flash';
        $fileTypes['xfl'] = 'flash';

        $fileTypes['prproj'] = 'premiere';

        $fileTypes['aep'] = 'aftereffect';

        // 3D
        $fileTypes['3ds'] = '3d';
        $fileTypes['dwg'] = '3d';
        $fileTypes['dxf'] = '3d';
        $fileTypes['max'] = '3d';

        // SOUND / MUSIC
        $fileTypes['mp3'] = 'music';
        $fileTypes['wav'] = 'music';
        $fileTypes['flac'] = 'music';
        $fileTypes['aac'] = 'music';
        $fileTypes['aiff'] = 'music';
        $fileTypes['aif'] = 'music';
        $fileTypes['aifc'] = 'music';
        $fileTypes['wma'] = 'music';
        $fileTypes['au'] = 'music';
        $fileTypes['snd'] = 'music';
        $fileTypes['aa3'] = 'music';
        $fileTypes['oma'] = 'music';
        $fileTypes['at3'] = 'music';
        $fileTypes['m3u'] = 'music';
        $fileTypes['amr'] = 'music';
        $fileTypes['cda'] = 'music';

        //VIDEO
        $fileTypes['avi'] = 'video';
        $fileTypes['flv'] = 'video';
        $fileTypes['m4v'] = 'video';
        $fileTypes['mkv'] = 'video';
        $fileTypes['mov'] = 'video';
        $fileTypes['mpeg'] = 'video';
        $fileTypes['mpg'] = 'video';
        $fileTypes['mpe'] = 'video';
        $fileTypes['mp4'] = 'video';
        $fileTypes['3gp'] = 'video';
        $fileTypes['aep'] = 'video';

        $this->knownExtensions = $fileTypes;
    }

}

?> 
```

它在具有 CPanel 的托管服务器上运行良好，这就是为什么我怀疑我的 PHP.ini 文件？（我自己安装了服务器）

如果是 .ini 文件，我应该寻找什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T20:37:34.113

该脚本会故意更改文件名，以确保它们始终是唯一的。如果有人上传具有相同文件名的文件，这可以防止文件被覆盖。如果你真的想保留原来的名字，你可以改变这一行：

```
 $targetFile = str_replace('//', '/', $uploadUrl) . $this->systemFilename; 
```

对此：

```
$targetFile = str_replace('//', '/', $uploadUrl) . $this->fileName; 
```

请注意，尽管脚本为每个上传的文件分配了唯一的名称，但它仍然在数据库表中保留原始名称，如下所示：

```
 DB::sql('INSERT INTO hm_files (fileName, systemFilename, fileType, time) VALUES ("' . $this->fileName . '", "' . $this->systemFilename . '", "' . $this->fileType . '", ' . $this->ts . ')'); 
```

# awk - 使用 awk 从文件中提取段

> ID：12079598
> 
> 赞同：2
> 
> 时间：2012-08-22T18:54:01.520
> 
> 标签：awk

我有一个文件，我需要根据另一个文件中给出的字符范围从中提取段。我想使用 awk 命令来完成。

文件一看起来像这样（单行）：

```
AATTGTGAAGGTAGATGGCTCGCTCCGCGGCGGGGCGCGCGCGCGCGCGCGGGCTCGCTATATAGAGATATATGCGCGCGGCGCGCGGCGCGCGCGGCGCGCGCGTATATATATAGGCGCGCGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGAAAAAAAAAAAAAAAAAAAAAAAAATTTTTTTTTTTTTTTTTTTTTTTTTTTTTTGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGCCCCCCCCCCCCCC 
```

第二个文件如下所示：

```
5 10
13 20
22 24 
```

输出将是：

```
GTGAAG
AGATGGCT
GCT 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T19:23:08.317

这个单线将解决您的问题：

`awk 'BEGIN{getline sequence < "first_file"} {print substr(sequence, $1, $2 - $1 + 1) }' second_file`

**说明：**`sequence`此脚本使用函数从名为的文件中读取字符串`first_file`（将其调整为实际文件名）`getline`。然后对于第二个文件的每一行（包含处理范围），它使用`substr`函数提取必要的子字符串。`substr`接受三个参数：string( `sequence`)、position( `$1`) 和 length( `$2 - $1 + 1`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T20:50:53.673

*Nya*为您提供了`awk`解决方案，这是基于`coreutils`.

**细绳**

```
AATTGTGAAGGTAGATGGCTCGCTCCGCGGCGGGGCGCGCGCGCGCGCGCGGGCTCGCTATATAGAGATATATGCGCGCGGCGCGCGGCGCGCGCGGCGCGCGCGTATATATATAGGCGCGCGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGAAAAAAAAAAAAAAAAAAAAAAAAATTTTTTTTTTTTTTTTTTTTTTTTTTTTTTGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGCCCCCCCCCCCCCC 
```

**关闭**

```
5 10
13 20
22 24 
```

你可以得到你想要的输出：

```
while read off len; do cut -c${off}-${len} string; done < offlen 
```

输出：

```
GTGAAG
AGATGGCT
GCT 
```

# php - preg_match 包括正斜杠

> ID：12079604
> 
> 赞同：3
> 
> 时间：2012-08-22T18:54:25.177
> 
> 标签：php, regex, preg-match

这是我检查输入的安全问题和/或答案是否包含恶意字符的功能：

```
function validate_input($field) {
    $ErrorMessage = ""; 
    $field = preg_replace("/[\s]+is/", '', $field);
    if(preg_match("/^[A-Za-z0-9'?!-\s]+$/", $field ) ===0) {
        $ErrorMessage .= "<div class='error_message'>Potentially malicious characters found in:<i> " . $field . ",</i> please enter only alphanumeric characters</div/><br/>";
    } return $ErrorMessage;
} 
```

当我输入诸如“怎么了？”之类的内容时 对于这个问题，它返回一个错误。当我在 ($field) 上执行 var_dump 时，它会返回“What\'s up?”。

那么如何将正斜杠作为可接受的字符包含在内？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T18:59:35.210

似乎您拥有 PHP 的“魔术报价”功能，这不应该是出于安全原因：用户插入数据的所有转义都应该由您自己的代码完成。

无论如何，如果您想保持现在的状态，请更换您的

```
preg_match("/^[A-Za-z0-9'?!-\s]+$/", $field) 
```

和

```
preg_match("/^[A-Za-z0-9'?!-\s\\\\]+$/", $field ) 
```

四重 \ 存在是因为您需要将其转义，因为您需要在用双引号分隔的字符串中以及在正则表达式中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T04:24:20.120

允许正斜杠和其他普通字符的示例。

```
 $string = "Jâ€™s Bikes/IHOP";  // bad user input 
    if (!preg_match("/^[A-Za-z0-9!@#$%&()*;:_.'\/\\\\ ]+$/", $string)) {
       echo "Invalid $string";          
       } 
```

# python - 让 virtualenv 从你的全局站点包中继承特定的包

> ID：12079607
> 
> 赞同：235
> 
> 时间：2012-08-22T18:54:52.133
> 
> 标签：python, virtualenv

我正在寻找一种制作 virtualenv 的方法，它只包含基本 python 安装的一些库（我选择了）。

更具体地说，我试图在创建 virtualenv 期间将我的 matplotlib 导入 virtualenv。它无法使用 pip 或 easy_install 有效安装，因为它缺少一些 fortran 编译器库。到目前为止，我这样做的方式是手动复制：

```
/usr/lib/python2.7/dist-packages/ to virtualenv_name/lib/python2.7/dist-packages/ 
```

但是，这会阻止 yolk 注册手动导入的链接（它会打印 virtualenv 中所有当前可用的库）。

那么，有没有办法对

```
virtualenv --system-site-packages 
```

* * *

## 回答 #1

> 赞同：261
> 
> 时间：2013-10-18T22:25:01.560

使用`virtualenv --system-site-packages`. 然后，激活 virtualenv，当你想在 virtualenv 而不是系统 python 中安装东西时，使用`pip install --ignore-installed`or `pip install -I`。这样，即使存在系统范围的版本，pip 也会在本地安装您请求的内容。您的 python 解释器将首先在 virtualenv 的包目录中查找，因此这些包应该覆盖全局包。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-08-22T19:11:40.730

您可以使用`--system-site-packages`然后为您的virtualenv“过度安装”特定的东西。这样，您安装到 virtualenv 中的所有内容都将从那里获取，否则将从您的系统中获取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-28T10:55:14.347

我在 Ubuntu 20.04 上使用 python.3.8 和 pip3 玩游戏迟到了。

摆脱烦人的 .local 安装的唯一方法是设置一个环境变量（bash）：

```
export PYTHONNOUSERSITE="true" 
```

这不需要是“真的”任何东西都会起作用。我不会选择 0。;-)

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2015-07-30T20:27:22.780

安装虚拟环境

```
virtualenv --system-site-packages 
```

并使用`pip install -U to install matplotlib`

# jquery - 如何将 s:url 链接到外部 URL？

> ID：12079608
> 
> 赞同：0
> 
> 时间：2012-08-22T18:54:53.427
> 
> 标签：jquery, ajax, struts2, href, struts2-jquery

我们正在尝试使用 Struts2-jQuery 和 Struts2 标签将 HREF 目标加载到 Div 标签。下面是代码。

只要 s:url 值是内部 URL，它就可以正常工作，但是如果我将其更改为外部 URL，例如 www.google.com，则单击链接时不会发生任何事情。

如果 URL 是外部 URL，我们需要做些什么不同的事情吗？即当前应用程序之外的 URL

```
<%@ taglib prefix="s" uri="/struts-tags"%>
<%@ taglib prefix="sj" uri="/struts-jquery-tags"%>
<html>
  <head>
    <sj:head/>
  </head>
  <body>
    <div id="div1">Div 1</div>
    <s:url var="ajaxTest" value="/AjaxTest.action"/>

    <sj:a id="link1" href="%{ajaxTest}" targets="div1">
      Internal Content
    </sj:a>

   <s:url var="ajaxXternal" value="www.google.com"/>

    <sj:a id="link2" href="%{ajaxXternal}" targets="div1">
      External Content
    </sj:a>

  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T19:36:59.583

使用 Ajax 调用外部站点将创建一个跨域 XHR 请求，这将不起作用。^*

如果您想从另一个域加载，它应该支持 JSONP，或者您可以从*您的*应用程序发出请求（S2 操作），该请求通过 HttpClient 之类的方式向站点发出*正常*请求（非 Ajax）。从您的操作流回该响应，插件将使用它加载 div。

^(* 显然，除非该网站`Access-Control-Allow-Origin`允许您访问。)

# ruby-on-rails - 更新了 Ruby，现在不能运行任何东西

> ID：12079611
> 
> 赞同：2
> 
> 时间：2012-08-22T18:55:05.403
> 
> 标签：ruby-on-rails, ruby, rvm, bundler

使用 RVM。从 ruby​​ 1.9.2-p290 更新到 1.9.3-p194。

`bundle install`工作正常。

当我尝试运行任何 rails 任务时，我收到一个错误：

```
Tylers-MacBook-Pro:csbb Tyler$ rails c --sandox
/Users/Tyler/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:77:in `rescue in rescue in block in require': undefined method `gsub' for nil:NilClass (NoMethodError)
    from /Users/Tyler/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:72:in `rescue in block in require'
    from /Users/Tyler/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:62:in `block in require'
    from /Users/Tyler/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:55:in `each'
    from /Users/Tyler/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:55:in `require'
    from /Users/Tyler/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler.rb:119:in `require'
    from /Users/Tyler/Development/Rails/csbb/config/application.rb:13:in `<top (required)>'
    from /Users/Tyler/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.1/lib/rails/commands.rb:39:in `require'
    from /Users/Tyler/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.1/lib/rails/commands.rb:39:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

宝石文件：

```
source 'http://rubygems.org'

gem 'rails', '3.2.1'
gem 'devise'
gem 'heroku'
gem 'typhoeus'
gem 'capistrano'
gem 'rvm-capistrano'
gem 'capistrano-ext'
gem 'launchy'
gem 'mysql2'
gem 'cancan'
gem 'database_cleaner'
gem 'stripe'
gem 'will_paginate', '~> 3.0'
gem 'turkee', :git => "https://github.com/workmaster2n/turkee.git", ref: '04da1de00ac02cff33341fa677ab2dd9212d4086'
gem 'yettings'
gem 'nokogiri'
gem 'htmlentities'
gem 'rest-client'

gem 'ruby-debug-base19x', '0.11.30.pre10'
gem 'ruby-debug-ide', '0.4.17.beta14'

group :development do

  gem 'rspec-rails'
  gem 'guard-rspec'

  gem 'annotate'
  gem 'thin'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails'
  gem 'coffee-rails'
  gem 'uglifier'
  gem 'twitter-bootstrap-rails'
end

gem 'jquery-rails'

group :test do
  gem 'rspec-rails'
  gem 'capybara'
  gem 'capybara-webkit'
  gem 'rb-fsevent', :require => false
  gem 'growl'
  gem 'guard-spork'
  gem 'spork', '~> 0.9.0.rc'
  gem 'factory_girl_rails'
  gem 'vcr'
  gem 'fakeweb'
end

group :production do

end 
```

application.rb（第 13 行是：）`Bundler.require(*Rails.groups(:assets => %w(development test))`：

```
require File.expand_path('../boot', __FILE__)

# Pick the frameworks you want:
require "active_record/railtie"
require "action_controller/railtie"
require "action_mailer/railtie"
require "active_resource/railtie"
require "sprockets/railtie"
# require "rails/test_unit/railtie"

if defined?(Bundler)
  # If you precompile assets before deploying to production, use this line
  Bundler.require(*Rails.groups(:assets => %w(development test)))
  # If you want your assets lazily compiled in production, use this line
  # Bundler.require(:default, :assets, Rails.env)
end

module WeaponXO
  class Application < Rails::Application
    config.csbb = ActiveSupport::OrderedOptions.new
    # Settings in config/environments/* take precedence over those specified here.
    # Application configuration should go into files in config/initializers
    # -- all .rb files in that directory are automatically loaded.

    # Custom directories with classes and modules you want to be autoloadable.
    config.autoload_paths += %W(#{config.root}/lib)

    # Only load the plugins named here, in the order given (default is alphabetical).
    # :all can be used as a placeholder for all plugins not explicitly named.
    # config.plugins = [ :exception_notification, :ssl_requirement, :all ]

    # Activate observers that should always be running.
    # config.active_record.observers = :cacher, :garbage_collector, :forum_observer

    # Set Time.zone default to the specified zone and make Active Record auto-convert to this zone.
    # Run "rake -D time" for a list of tasks for finding time zone names. Default is UTC.
    # config.time_zone = 'Central Time (US & Canada)'

    # The default locale is :en and all translations from config/locales/*.rb,yml are auto loaded.
    # config.i18n.load_path += Dir[Rails.root.join('my', 'locales', '*.{rb,yml}').to_s]
    # config.i18n.default_locale = :de

    # Configure the default encoding used in templates for Ruby 1.9.
    config.encoding = "utf-8"

    # Configure sensitive parameters which will be filtered from the log file.
    config.filter_parameters += [:password, :password_confirmation]

    # Use SQL instead of Active Record's schema dumper when creating the database.
    # This is necessary if your schema can't be completely dumped by the schema dumper,
    # like if you have constraints or database-specific column types
    # config.active_record.schema_format = :sql

    # Enforce whitelist mode for mass assignment.
    # This will create an empty whitelist of attributes available for mass-assignment for all models
    # in your app. As such, your models will need to explicitly whitelist or blacklist accessible
    # parameters by using an attr_accessible or attr_protected declaration.
    # config.active_record.whitelist_attributes = true

    # Enable the asset pipeline
    config.assets.enabled = true

    # Version of your assets, change this if you want to expire all your assets
    config.assets.version = '1.0'
  end
end 
```

**编辑**

如果我注释掉第 13 行`application.rb`，我会收到此错误（预期）：

```
/Users/Tyler/Development/Rails/csbb/config/initializers/devise.rb:3:in `<top (required)>': uninitialized constant Devise (NameError)
    from /Users/Tyler/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.1/lib/rails/engine.rb:588:in `block (2 levels) in <class:Engine>'
    from /Users/Tyler/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.1/lib/rails/engine.rb:587:in `each'
    from /Users/Tyler/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.1/lib/rails/engine.rb:587:in `block in <class:Engine>'
    from /Users/Tyler/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.1/lib/rails/initializable.rb:30:in `instance_exec'
    from /Users/Tyler/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.1/lib/rails/initializable.rb:30:in `run'
    from /Users/Tyler/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.1/lib/rails/initializable.rb:55:in `block in run_initializers'
    from /Users/Tyler/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.1/lib/rails/initializable.rb:54:in `each'
    from /Users/Tyler/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.1/lib/rails/initializable.rb:54:in `run_initializers'
    from /Users/Tyler/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.1/lib/rails/application.rb:136:in `initialize!'
    from /Users/Tyler/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.1/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /Users/Tyler/Development/Rails/csbb/config/environment.rb:5:in `<top (required)>'
    from /Users/Tyler/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.1/lib/rails/application.rb:103:in `require'
    from /Users/Tyler/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.1/lib/rails/application.rb:103:in `require_environment!'
    from /Users/Tyler/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.1/lib/rails/commands.rb:40:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

设计.rb

```
# Use this hook to configure devise mailer, warden hooks and so forth.
# Many of these configuration options can be set straight in your model.
Devise.setup do |config|
  # ==> Mailer Configuration
  # Configure the e-mail address which will be shown in Devise::Mailer,
  # note that it will be overwritten if you use your own mailer class with default "from" parameter.
  config.mailer_sender = "support@weaponxo.com"

  # Configure the class responsible to send e-mails.
  # config.mailer = "Devise::Mailer"

  # Automatically apply schema changes in tableless databases
  config.apply_schema = false

  # ==> ORM configuration
  # Load and configure the ORM. Supports :active_record (default) and
  # :mongoid (bson_ext recommended) by default. Other ORMs may be
  # available as additional gems.
  require 'devise/orm/active_record'

  # ==> Configuration for any authentication mechanism
  # Configure which keys are used when authenticating a user. The default is
  # just :email. You can configure it to use [:username, :subdomain], so for
  # authenticating a user, both parameters are required. Remember that those
  # parameters are used only when authenticating and not when retrieving from
  # session. If you need permissions, you should implement that in a before filter.
  # You can also supply a hash where the value is a boolean determining whether
  # or not authentication should be aborted when the value is not present.
  # config.authentication_keys = [ :email ]

  # Configure parameters from the request object used for authentication. Each entry
  # given should be a request method and it will automatically be passed to the
  # find_for_authentication method and considered in your model lookup. For instance,
  # if you set :request_keys to [:subdomain], :subdomain will be used on authentication.
  # The same considerations mentioned for authentication_keys also apply to request_keys.
  # config.request_keys = []

  # Configure which authentication keys should be case-insensitive.
  # These keys will be downcased upon creating or modifying a user and when used
  # to authenticate or find a user. Default is :email.
  config.case_insensitive_keys = [ :email ]

  # Configure which authentication keys should have whitespace stripped.
  # These keys will have whitespace before and after removed upon creating or
  # modifying a user and when used to authenticate or find a user. Default is :email.
  config.strip_whitespace_keys = [ :email ]

  # Tell if authentication through request.params is enabled. True by default.
  # It can be set to an array that will enable params authentication only for the
  # given strategies, for example, `config.params_authenticatable = [:database]` will
  # enable it only for database (email + password) authentication.
  # config.params_authenticatable = true

  # Tell if authentication through HTTP Basic Auth is enabled. False by default.
  # It can be set to an array that will enable http authentication only for the
  # given strategies, for example, `config.http_authenticatable = [:token]` will
  # enable it only for token authentication.
  # config.http_authenticatable = false

  # If http headers should be returned for AJAX requests. True by default.
  # config.http_authenticatable_on_xhr = true

  # The realm used in Http Basic Authentication. "Application" by default.
  # config.http_authentication_realm = "Application"

  # It will change confirmation, password recovery and other workflows
  # to behave the same regardless if the e-mail provided was right or wrong.
  # Does not affect registerable.
  # config.paranoid = true

  # By default Devise will store the user in session. You can skip storage for
  # :http_auth and :token_auth by adding those symbols to the array below.
  # Notice that if you are skipping storage for all authentication paths, you
  # may want to disable generating routes to Devise's sessions controller by
  # passing :skip => :sessions to `devise_for` in your config/routes.rb
  config.skip_session_storage = [:http_auth]

  # ==> Configuration for :database_authenticatable
  # For bcrypt, this is the cost for hashing the password and defaults to 10\. If
  # using other encryptors, it sets how many times you want the password re-encrypted.
  #
  # Limiting the stretches to just one in testing will increase the performance of
  # your test suite dramatically. However, it is STRONGLY RECOMMENDED to not use
  # a value less than 10 in other environments.
  config.stretches = Rails.env.test? ? 1 : 10

  # Setup a pepper to generate the encrypted password.
  # config.pepper = "414a4a386818bbd8897a8a083af56bd752a4e17d7daf490c598fae61d210ca5695d871fbbed21e9070b99804c7a52ff7c0227793cf925678ccf71d3112fd09d8"

  # ==> Configuration for :confirmable
  # A period that the user is allowed to access the website even without
  # confirming his account. For instance, if set to 2.days, the user will be
  # able to access the website for two days without confirming his account,
  # access will be blocked just in the third day. Default is 0.days, meaning
  # the user cannot access the website without confirming his account.
  # config.allow_unconfirmed_access_for = 2.days

  # If true, requires any email changes to be confirmed (exctly the same way as
  # initial account confirmation) to be applied. Requires additional unconfirmed_email
  # db field (see migrations). Until confirmed new email is stored in
  # unconfirmed email column, and copied to email column on successful confirmation.
  config.reconfirmable = true

  # Defines which key will be used when confirming an account
  # config.confirmation_keys = [ :email ]

  # ==> Configuration for :rememberable
  # The time the user will be remembered without asking for credentials again.
  # config.remember_for = 2.weeks

  # If true, extends the user's remember period when remembered via cookie.
  # config.extend_remember_period = false

  # If true, uses the password salt as remember token. This should be turned
  # to false if you are not using database authenticatable.
  config.use_salt_as_remember_token = true

  # Options to be passed to the created cookie. For instance, you can set
  # :secure => true in order to force SSL only cookies.
  # config.cookie_options = {}

  # ==> Configuration for :validatable
  # Range for password length. Default is 6..128.
  # config.password_length = 6..128

  # Email regex used to validate email formats. It simply asserts that
  # an one (and only one) @ exists in the given string. This is mainly
  # to give user feedback and not to assert the e-mail validity.
  # config.email_regexp = /\A[^@]+@[^@]+\z/

  # ==> Configuration for :timeoutable
  # The time you want to timeout the user session without activity. After this
  # time the user will be asked for credentials again. Default is 30 minutes.
  # config.timeout_in = 30.minutes

  # ==> Configuration for :lockable
  # Defines which strategy will be used to lock an account.
  # :failed_attempts = Locks an account after a number of failed attempts to sign in.
  # :none            = No lock strategy. You should handle locking by yourself.
  # config.lock_strategy = :failed_attempts

  # Defines which key will be used when locking and unlocking an account
  # config.unlock_keys = [ :email ]

  # Defines which strategy will be used to unlock an account.
  # :email = Sends an unlock link to the user email
  # :time  = Re-enables login after a certain amount of time (see :unlock_in below)
  # :both  = Enables both strategies
  # :none  = No unlock strategy. You should handle unlocking by yourself.
  # config.unlock_strategy = :both

  # Number of authentication tries before locking an account if lock_strategy
  # is failed attempts.
  # config.maximum_attempts = 20

  # Time interval to unlock the account if :time is enabled as unlock_strategy.
  # config.unlock_in = 1.hour

  # ==> Configuration for :recoverable
  #
  # Defines which key will be used when recovering the password for an account
  # config.reset_password_keys = [ :email ]

  # Time interval you can reset your password with a reset password key.
  # Don't put a too small interval or your users won't have the time to
  # change their passwords.
  config.reset_password_within = 6.hours

  # ==> Configuration for :encryptable
  # Allow you to use another encryption algorithm besides bcrypt (default). You can use
  # :sha1, :sha512 or encryptors from others authentication tools as :clearance_sha1,
  # :authlogic_sha512 (then you should set stretches above to 20 for default behavior)
  # and :restful_authentication_sha1 (then you should set stretches to 10, and copy
  # REST_AUTH_SITE_KEY to pepper)
  # config.encryptor = :sha512

  # ==> Configuration for :token_authenticatable
  # Defines name of the authentication token params key
  # config.token_authentication_key = :auth_token

  # ==> Scopes configuration
  # Turn scoped views on. Before rendering "sessions/new", it will first check for
  # "users/sessions/new". It's turned off by default because it's slower if you
  # are using only default views.
  # config.scoped_views = false

  # Configure the default scope given to Warden. By default it's the first
  # devise role declared in your routes (usually :user).
  # config.default_scope = :user

  # Configure sign_out behavior.
  # Sign_out action can be scoped (i.e. /users/sign_out affects only :user scope).
  # The default is true, which means any logout action will sign out all active scopes.
  # config.sign_out_all_scopes = true

  # ==> Navigation configuration
  # Lists the formats that should be treated as navigational. Formats like
  # :html, should redirect to the sign in page when the user does not have
  # access, but formats like :xml or :json, should return 401.
  #
  # If you have any extra navigational formats, like :iphone or :mobile, you
  # should add them to the navigational formats lists.
  #
  # The "*/*" below is required to match Internet Explorer requests.
  # config.navigational_formats = ["*/*", :html]

  # The default HTTP method used to sign out a resource. Default is :delete.
  config.sign_out_via = :delete

  # ==> OmniAuth
  # Add a new OmniAuth provider. Check the wiki for more information on setting
  # up on your models and hooks.
  # config.omniauth :github, 'APP_ID', 'APP_SECRET', :scope => 'user,public_repo'

  # ==> Warden configuration
  # If you want to use other strategies, that are not supported by Devise, or
  # change the failure app, you can configure them inside the config.warden block.
  #
  # config.warden do |manager|
  #   manager.intercept_401 = false
  #   manager.default_strategies(:scope => :user).unshift :some_external_strategy
  # end
end 
```

**固定的**

我安装 ruby​​ 1.9.3 时发生了一些事情。在安装新版本的 ruby​​ 之前阅读以更新 RVM（[http://www.fakingfantastic.com/2010/11/26/fixing-the-you-have-to-install-development-tools-first-error-with-nokogiri /](http://www.fakingfantastic.com/2010/11/26/fixing-the-you-have-to-install-development-tools-first-error-with-nokogiri/)）。从该页面：

```
rvm update head #I did rvm get stable
rvm --force install 1.9.3
gem install bundle 
```

我是不是忘记更新一些东西了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T17:20:16.177

我安装 ruby​​ 1.9.3 时发生了一些事情。在安装新版本的 ruby​​ 之前阅读以更新 RVM（[http://www.fakingfantastic.com/2010/11/26/fixing-the-you-have-to-install-development-tools-first-error-with-nokogiri /](http://www.fakingfantastic.com/2010/11/26/fixing-the-you-have-to-install-development-tools-first-error-with-nokogiri/)）。从该页面：

```
rvm update head #I did rvm get stable
rvm --force install 1.9.3
gem install bundle 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T19:51:36.500

Bundle.require 确保在您的应用程序运行时导入所有已安装的 gem。如果您将其注释掉，请添加`require "devise"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T20:19:17.663

跑

```
 gem update 
```

注释 config/development.rb 中的以下行

```
 config.action_view.debug_rjs = true 
```

并添加

```
 config.assets.compress = false
    config.assets.debug = true 
```

如果您确实想利用它是可选的，请查看资产管道。当我看到您的 gem 文件中存在与资产相关的 gem 时，因此建议对我进行一些更改。创建应用程序/资产和目录并从公共文件夹中移动 javascript、样式表、图像。

# jquery - 如何触发从 iframe 到其父元素的点击事件？

> ID：12079615
> 
> 赞同：10
> 
> 时间：2012-08-22T18:55:22.033
> 
> 标签：jquery

如何触发从 iframe 到其父元素的点击事件？

在打开 iframe 之前，我在父页面上尝试了以下代码。

```
jQuery('iframe').contents().bind('eventhandler', function() {               
                alert('event was fired');
        }); 
```

我也试过

```
jQuery(document).bind('eventhandler', function(e) {
alert('event was fired');
}); 
```

在 iframe 中，我将此代码嵌入到点击事件中

```
jQuery(document).trigger('eventhandler'); 
```

但它不起作用我在这里做错了吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-22T19:10:31.440

您需要从 iframe 中引用父文档。这应该做你需要的：

索引.html：

```
<iframe src="iframe.html"></iframe>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
$(function(){
    $(document).on('eventhandler', function() {               
        alert('event was fired');
    });
}); 
</script> 
```

iframe.html：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
$(function(){
    parent.$(parent.document).trigger('eventhandler');  
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T19:12:42.303

如果您可以控制两者的来源，则可以这样做

[iframe 和父站点之间如何通信？](https://stackoverflow.com/questions/9153445/how-to-communicate-between-iframe-and-the-parent-site)

# c# - ac# 应用程序是否有一种直接的方法来读取具有用户指定名称和位置的配置文件

> ID：12079616
> 
> 赞同：1
> 
> 时间：2012-08-22T18:55:24.083
> 
> 标签：c#, app-config, configuration-files

我们有一个应用程序套件，其中包含六个服务，这些服务处理静态文件夹层次结构中的数据。app.config 文件的当前规则使管理此环境成为一项艰巨的任务。

我已经关闭了 OpenExeConfiguration 并且无法通过类型初始化程序错误。

我已经创建了您自己的 AppDomain 路径，并且无法通过未标记为可序列化的程序集。

当前代码库包含一个使用 xsd --> xml 的自定义配置文件，创建一个自定义类，其中每个参数都是它自己的类，这是维护的噩梦。

所以，基本需要告诉 ConfigurationManager，在位置 xxx 你会找到一个名为 zzz.config 的文件。当我调用 ConfigurationManager.Appsettings["parametername"] 时，我希望您返回与 parametername 关联的文件中的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T19:37:40.140

你可以尝试这样的事情：

```
 ExeConfigurationFileMap m = new ExeConfigurationFileMap();
        m.ExeConfigFilename = "blah";
        ConfigurationManager.OpenMappedExeConfiguration(m, ConfigurationUserLevel.None); 
```

请注意，我没有对此进行测试，但它可能会让您走上正轨。

# css - 将按钮放在列表容器上方，右对齐

> ID：12079620
> 
> 赞同：0
> 
> 时间：2012-08-22T18:55:36.110
> 
> 标签：css

我试图让一个按钮出现在无序列表上方，我希望它是正确的。使用 CSS 样式“float:right”，它出现在右侧，但与列表重叠。如何让按钮出现在右侧而不重叠列表？

代码：

```
<style>
.mylist { list-style-type: none; width: 100%; }
.mylist li { margin: 2px; padding: 2px; border: 1px solid black;}
</style>

<button style="float:right; display:block;">Preview</button>
<UL class='mylist'>
    <LI>Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test</LI>
    <LI>Test</LI>       
</UL> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T19:01:26.200

将**clear:both**添加到**mylist**样式。演示：http: [//jsfiddle.net/JgeTm/](http://jsfiddle.net/JgeTm/)

**CSS**

```
.mylist{list-style-type:none;width:100%;clear:both} 
```

# bash - 管道尾输出到另一个脚本

> ID：12079626
> 
> 赞同：9
> 
> 时间：2012-08-22T18:56:02.067
> 
> 标签：bash, parameters, pipe, tail

我正在尝试将 tail 命令的输出通过管道传输到另一个 bash 脚本中以进行处理：

```
tail -n +1 -f your_log_file | myscript.sh 
```

但是，当我运行它时，$1 参数（在 myscript.sh 中）永远不会到达。我错过了什么？如何通过管道将输出作为脚本的输入参数？

PS - 我希望 tail 永远运行并继续将每一行传递到脚本中。

**编辑** 现在 myscripts.sh 的全部内容是：

```
echo $1; 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-22T19:15:53.180

通常，这是处理脚本标准输入的一种方法：

```
#!/bin/bash

while read line; do
    echo $line
done 
```

这是一个非常粗糙的 bash，相当于`cat`. 它确实证明了一个关键事实：脚本中的每个命令都从 shell 继承其标准输入，因此您实际上不需要做任何特殊的事情来访问传入的数据。`read`从 shell 获取输入，其中（在您的案例）正在从`tail`通过管道连接到它的进程中获取输入。

作为另一个例子，考虑这个脚本；我们将其称为“mygrep.sh”。

```
#!/bin/bash

grep "$1" 
```

现在管道

```
some-text-producing-command | ./mygrep.sh bob 
```

行为相同

```
some-text-producing-command | grep bob 
```

* * *

`$1`如果您像这样调用脚本，则会设置：

```
./myscript.sh foo 
```

然后`$1`具有值“foo”。

位置参数和标准输入是分开的；你可以这样做

```
tail -n +1 -f your_log_file | myscript.sh foo 
```

现在标准输入仍然来自`tail`进程，并且`$1`仍然设置为'foo'。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T21:46:58.067

也许您对此感到困惑`awk`？

```
tail -n +1 -f your_log_file | awk '{
    print $1
}' 
```

将从 tail 命令的输出中打印第一列。

在 shell 中，可以通过以下方式实现类似的效果：

```
tail -n +1 -f your_log_file | while read first junk; do
    echo "$first"
done 
```

或者，您可以将整个`while ... done`循环放在里面`myscript.sh`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-16T13:41:35.670

管道将一个进程的输出 ( `stdout`) 连接到另一个进程的输入 ( `stdin`)。`stdin`与启动时发送给进程的参数不同。

您要做的是将第一个进程的输出中的行转换为第二个进程的参数。这正是[xargs](https://en.wikipedia.org/wiki/Xargs)命令的用途。

**您需要做的就是`xargs`在初始命令之间插入一个管道，它将起作用**：

`tail -n +1 -f your_log_file | xargs | myscript.sh`

# android - 如何知道一个电话正在到达android中的语音邮件

> ID：12079627
> 
> 赞同：0
> 
> 时间：2012-08-22T18:56:03.320
> 
> 标签：android

如果我的电话到达其他语音信箱，我想启动其他一些应用程序。如何在android中检测到它？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T19:21:18.613

你可以收听 LISTEN_MESSAGE_WAITING_INDICATOR 的广播然后采取行动

[http://developer.android.com/reference/android/telephony/PhoneStateListener.html#LISTEN_MESSAGE_WAITING_INDICATOR](http://developer.android.com/reference/android/telephony/PhoneStateListener.html#LISTEN_MESSAGE_WAITING_INDICATOR)

您将扩展 PhoneStateListener，然后初始化该类

```
public class VoicemailListener extends PhoneStateListener {

  private final Context context;

  public VoicemailListener(Context context) {
    this.context = context;
  }

  @Override
  public void onMessageWaitingIndicatorChanged(boolean mwi) {
              //Message Recieved, do your work here
  }
} 
```

# android - android多语言方法 - 最佳实践

> ID：12079628
> 
> 赞同：0
> 
> 时间：2012-08-22T18:56:09.603
> 
> 标签：android, input, localization, keyboard

我正在尝试确定在 Android 上支持多种语言的最佳方法。我了解资源文件夹的工作方式，以及在活动加载和/或配置更改时如何选择它们。我还看到了一种创建新语言环境、将其指定为默认语言并广播配置更改的技术。这行得通。但是我从这个线程（https://groups.google.com/forum/?fromgroups=#!topic/android-developers/_ZGOTHwzl-w）和谷歌框架团队的答案中得到了印象，这种做事方式是不推荐/支持。所以我的问题是：

1.  在不将用户发送到操作系统菜单进行语言选择的情况下，推荐的即时支持多语言的方法是什么？

2.  键盘输入的同样问题。

3.  最后，当我向 Locale 类询问支持的语言时，我在 Motorola Xoom 上看到了一个令人印象深刻的列表。例如，我测试并看到的 ja-JP 允许我显示日文字符。但是，设备上没有这种语言的 SIP。在这些情况下，我可以将新键盘下载到我的平台吗？我觉得奇怪的是，该平台支持显示比它可以输入的更多的语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:53:20.153

让系统完成工作。在设置中选择了语言和键盘的用户只会期望您的应用程序具有相同的条件。

据我所知，没有比不同值文件夹中的 strings.xml 更好的方法了。

# codeigniter - Codeigniter/PHP 中的多个会话

> ID：12079630
> 
> 赞同：0
> 
> 时间：2012-08-22T18:56:11.457
> 
> 标签：codeigniter

我正在使用 codeigniter 开发一个电子商务网站，其中包含以下会话：

1.  管理员登录
2.  购物车
3.  用户登录

现在我无法弄清楚使用不同数据集管理这三个会话的机制。

我知道它可以通过核心 php 中的 session_name() 来实现。但是对于codeigniter，我有点困惑。谷歌搜索了很多，但找不到正确的答案。

我想清楚地了解 codeigniter 中的多个会话，以免将来造成任何混乱。任何指向教程的链接都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:41:32.133

```
$this->session->set_data('admin',$array_of_admin_data);
$this->session->set_data('user',$array_of_user_data);
$this->session->set_data('cart',$array_of_cart_data); 
```

然后检索每个seesion数据？使用

```
$this->session->userdata('admin'); 
```

为什么这行不通？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-25T07:14:19.377

我也在开发一个电子商务系统，也遇到了同样的问题。我不喜欢管理作为序列化数据存储在数据库中的所有数据，尤其是对于购物车/购物篮，因为它很难查询数据库，我只是觉得它有点乱。

我对 CI 和 stackoverflow 还很陌生，但我的想法是按照[文档](http://ellislab.com/codeigniter/user-guide/libraries/sessions.html)中的说明设置 ci_session 表，从而保持 CI 会话的一致性和安全性。然后，我只为要管理的每个会话数据向会话变量添加一个参考 ID。例如对于购物车：

```
$unique_cart_id = random_string('unique');
$this->session->set_userdata('cart_id', $unique_cart_id); 
```

现在我在一个单独的“篮子”表中引用了我的 cart_id，其中包含所有数据。例如：

```
CREATE TABLE basket (
  id int(11) NOT NULL auto_increment,
  cart_id varchar(32) default NULL,
  timestamp timestamp NULL default NULL,
  price float(10,2) default NULL,
  title varchar(100) default NULL,
  serialized_data text,
  product_id int(11) default NULL,
  PRIMARY KEY  (id)
) 
```

现在，每次有人想向购物篮中添加一些东西时，我都会从会话变量中获取 cart_id：

```
$cart_id = $this->session->userdata('cart_id'); 
```

并`$cart_id`通过编写一个小插入脚本将其与任何其他购物车数据一起存储在我的“篮子”表中。

```
$data = array(
   'cart_id' => $cart_id,
   'title' => $product_title,       
   'product_id' => $product_id,
   'price' => $price,
   'serialized_data' => serialize(array('what ever you need else'))
);

$this->db->insert('basket', $data); 
```

现在，如果有人想查看购物篮，我只需`$cart_id`再次从会话变量中检索 并查询与 cart_id 匹配的数据库。

```
$this->db->query("SELECT * FROM basket WHERE cart_id = ?", array($cart_id)); 
```

您对其他会话数据、管理员和用户登录使用相同的原则。因此，我只为每个用户保留一个会话 cookie，但我可以在数据库中分别管理每种类型的会话数据。

这只是这个想法的粗略分解。我希望它有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T11:49:53.687

Codeigniter 的 session 与 Native PHP Session 完全不同，它非常安全，尤其是在存储在数据库中时。您可以使用 codeigniter 的会话和 Native PHP Session，它们可以很好地协同工作，因为 PHP 会将它们视为不同的变量。如果要检查是否存在 codeigniter 会话值，请使用

```
if(isset($this->session->userdata['course_id']))
{
    $this->data['course_id'] = $this->session->userdata('course_id');
} 
```

虽然原生 PHP 看起来像

```
if(isset($_SESSION['course_id']))
{
    $this->data['course_id'] = $_SESSION['course_id'];
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-11-21T08:45:38.097

使用该`userdata()`方法，您可以检索在创建会话期间保存的字段。

例如，您传递`$array_of_admin_data array`，其中包含一些信息，例如`userType`. 如果你想检索这个值，你必须`userdata()`这样调用：

```
$this->session->userdata('userType'); 
```

希望，这会有所帮助。

# javascript - 动态重新加载本地 JavaScript 源/JSON 数据

> ID：12079631
> 
> 赞同：3
> 
> 时间：2012-08-22T18:56:12.243
> 
> 标签：javascript, html

有哪些可能的跨浏览器（至少是 Firefox 和 Chrome）方法来动态重新加载本地加载的 HTML 文件引用的本地 JavaScript 文件？

背景：

本地 HTML 页面用于呈现由两个引用的 JavaScript 文件格式化和显示的一些数据。一个文件包含 JavaScript 代码，另一个文件包含 JSON 数据。

此 JSON 数据由另一个程序在磁盘上更新，如果 UI 自动合并这些更新而无需手动重新加载页面（或打开新页面），那就太好了。

在 Firefox 中，我相信可以使用 AJAX 加载 HTML 来解决该问题，但在 Chrome 中，由于同源策略失败，这将无法正常工作（不幸的是`--disable-web-security`，由于必须关闭所有先前的 Chrome 实例，因此我不一定能依靠它来缓解这种情况让它工作）。

我看到的唯一解决方案是运行本地 Web 服务器，但我希望有一些更简单、侵入性更小的东西（也许在 iframe 中加载 JavaScript 并重新加载 iframe，尽管我认为浏览器安全会阻止这种情况）。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T19:19:28.243

如果您的应用启动 Chrome，那么您可以在启动命令中包含**--allow-file-access-from-files**标志。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-19T00:44:29.817

我使用以下代码重新加载 JavaScript 和 JSON 文件。

```
/* Load a JavaScript or JSON file to use its data */    
function loadJsFile(filename, dataIsLoaded){
    var fileref = document.createElement('script');
    fileref.setAttribute("type","text/javascript");
    fileref.setAttribute("src", filename);
    fileref.onload = dataIsLoaded;

    if (typeof fileref!="undefined"){
        document.getElementsByTagName("head")[0].appendChild(fileref);
    }  
}

/* The callback that is invoked when the file is loaded */
function dataIsLoaded(){
    console.log("Your data is ready to use");
} 
```

JSON文件与网站位于同一目录时的用法：

```
var jsonFile= "myData.json";
loadJsFile(jsonFile, dataIsLoaded); 
```

我在 IE10 和 Firefox 22 中测试成功；但它在 Chrome 中不起作用。

# c# - Visual Studio 2012 Web 部署无声无息地失败，有人有解决此问题的方法吗？

> ID：12079640
> 
> 赞同：0
> 
> 时间：2012-08-22T18:56:30.937
> 
> 标签：c#, asp.net, visual-studio, web-deployment

我正在使用 VS 2012 Ultimate，我使用文件系统进行了 Web 部署。它说发布成功。但是当我查看我部署的文件夹时，其中没有任何文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T15:50:12.377

您是否尝试转到发布对话框上的设置选项卡，然后将配置更改为：发布 - 任何 CPU。

我和你有同样的问题，改变这个解决了它。

# wpf - WPF 控件模板绑定到子控件

> ID：12079643
> 
> 赞同：1
> 
> 时间：2012-08-22T18:56:43.927
> 
> 标签：wpf, templates, binding, controls

在 TreeViewItem 控件模板中，我需要将视觉状态绑定到子控件，但我无法弄清楚绑定语法。

在 TreeView 的 HierarchicalDataTemplate 我有：

```
 <TreeView.ItemTemplate>
            <HierarchicalDataTemplate ItemsSource="{Binding Children}">
                <StackPanel>
                    <Image Name="imgPicture" Source=".."/>                      
                </StackPanel>
            </HierarchicalDataTemplate>
        </TreeView.ItemTemplate> 
```

我想将视觉状态动画绑定到控件模板中的 imgPicture。

在 TreeViewItem 的控件模板中，我有：

```
<VisualState Name="Selected">
     <Storyboard>
           <DoubleAnimation Storyboard.TargetName="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Header}" 
Storyboard.TargetProperty="MaxHeight"
To="100"
Duration="0"/>
     </Storyboard>
</VisualState> 
```

但是 Storyboard.TargetName 绑定到 StackPanel（因为那是 TreeViewItem 的标题），我需要它绑定到 StackPanel 内的控件（imgPicture），以便我可以更改控件的属性。有没有办法通过使用 xaml 绑定语法来做到这一点？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T19:55:33.883

您可以使用 ElementName 属性 (imgPicture) 创建绑定，或将 Storyboard.TargetName 设置为 imgPicture。

# linux - 以另一个用户身份运行 makefile 命令

> ID：12079644
> 
> 赞同：2
> 
> 时间：2012-08-22T18:56:49.463
> 
> 标签：linux, makefile

我有两个脚本，由 root 拥有。

```
#!/bin/sh
#script1.sh
echo "all: first" > my_makefile
echo >> my_makefile
echo "first: " >> my_makefile
echo "\ttouch file.txt" >> my_makefile

#!/bin/sh
#script2.sh
while true
do
 make -f my_makefile
 sleep 10
done 
```

script2.sh 被称为“sudo sh script.sh”并不断在 my_makefile 上运行 make。script1.sh 由个别用户调用以更改生成文件。

如何运行 makefile 命令以使 file.txt 归用户所有，而不是 root？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T19:12:22.110

```
#!/bin/sh
#script1.sh
...
echo "\tchown "`logname`" file.txt" >> my_makefile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T19:21:25.473

抱歉，我没有正确使用 sudo。我只需要将 script2.sh 的最后一行替换为：

```
echo "sudo su -m -l `whoami` -c \"touch file.txt\"" >> my_makefile 
```

# php - 使用 mysql_fetch_array 循环跳过第一行

> ID：12079648
> 
> 赞同：0
> 
> 时间：2012-08-22T18:57:13.683
> 
> 标签：php, mysql

我在遍历 MySQL 行时遇到问题。这是我当前的代码：

```
$query = "SELECT * FROM translations
          WHERE iddoc = '$id'
          AND submitted = 1;";
$result= mysqli_query($query);
$numrows = mysqli_num_rows($result);
$row2 = mysql_fetch_row($result);

if ($numrows > 0) {
    while($eachrow = mysqli_fetch_array($result, MYSQLI_NUM)) {
        echo $eachrow[0];
        echo ", ";
        echo $numrows;
   }
} 
```

结果是：

```
6, 2 
```

但是如果有 2 行，为什么 while 循环仅在 1 次迭代后结束？我理解错了什么？

**编辑：它似乎显示比正确的行数少一。即，while 循环的运行时间比它应该运行的时间少 1。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T19:37:08.017

发现问题。我正在获取第一行

```
$row2 = mysql_fetch_row($result); 
```

在 while 循环之外，从而导致它从第二行开始并跳过第一行。

# jquery - 动态创建标记 Jquery

> ID：12079660
> 
> 赞同：1
> 
> 时间：2012-08-22T18:58:12.933
> 
> 标签：jquery

我正在尝试动态创建一堆列表项，我正在寻找的结构是

```
 <li><a href="Pending.aspx">
   <img src="images/gf.png" alt="" class="ui-li-icon">My Stuff
   <span class="ui-li-count">4</span> 
   </a>
   </li> 
```

我正在尝试使用此代码创建此结构，但是当我向其中添加“img”部分时它似乎正在中断。如果我取出 img 部分，它至少可以工作，但不是我想要的。有想法该怎么解决这个吗？

```
 $('ul').append(
        $('<li>').append(
        $('<a>').attr('href', 'some link').attr('data-container', 'listview').append(
        //THIS BREAKS IT
        $('<img>').attr('src','some image').attr('alt','').append(
        $('<span>').attr('class', 'tab').append('1')
        )))); 
```

我正在尝试动态创建在此处找到的列表项：http: [//jquerymobile.com/demos/1.1.1/docs/lists/lists-icons.html](http://jquerymobile.com/demos/1.1.1/docs/lists/lists-icons.html)

请注意，它们具有未关闭的图像标签。我猜这就是添加跨度标签的有效方式。不知道如何完成不关闭 javascript 中的 img 标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T19:00:50.820

是的，它*应该*：an`img`是一个 void 元素，它*不能*有任何类型的子节点、子节点或后代。

为了实现您似乎想要的（通过阅读您的代码），我建议：

```
var list = $('<ul />').appendTo('body'),
    listElem = $('<li />').appendTo(list),
    link = $('<a />', {
        'href': 'pending.aspx',
        'class' : 'ui-li-icon'
    }).attr('data-container', 'listview').text('My Stuff').appendTo(listElem);
$('<img />', {
    'src': 'images/gf.png',
    'alt': 'alttext'
}).prependTo(link);
$('<span />', {
    'class': 'ui-li-count'
}).text('4').appendTo(link);​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/gBHQ3/1/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T19:02:39.173

试着让它更简单。

它可能对你更好:-)

```
$('ul').append(
   $('<li>', {
       html: $("<a>", {
           href: "some link", "data-container": "listview",
           html: $("<img>", {
               src: "some image", alt: "",
               html: $("<span>", {
                    class: "tab", html: "1"
               })
           })
       })
    })
); 
```

现在你明白有什么问题了吗？一个`img`不能有一个`span`作为HTML！它实际上不能有**任何子**节点！

所以你可以做的是在图像*之后*添加跨度：

```
$('ul').append(
   $('<li>', {
       html: $("<a>", {
           href: "some link", "data-container": "listview",
           html: $("<img>", {
               src: "some image", alt: ""
           }).after($("<span>", {
                    class: "tab", html: "1"
               }))
       })
    })
); 
```

演示：http: [//jsfiddle.net/maniator/X3XDF/](http://jsfiddle.net/maniator/X3XDF/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T19:29:36.027

```
//assume arrayOfImageUrls and that these URLs have been sanitized on the front end

var frontText = '<li><a href="Pending.aspx"><img src="',
backText = '" alt="" class="ui-li-icon">My Stuff<span class="ui-li-count"></span></a></li>',
joinText = backText + frontText,

$_ulList = $('ul').append(frontText + arrayOfImageUrls.join(joinText) + backText);

$_ulList.find('li > .ui-li-count').each( function(i){ $(this).text(i); } ); 
```

# objective-c - 在 API 请求期间创建的 NSDates 显示奇怪的结果

> ID：12079661
> 
> 赞同：0
> 
> 时间：2012-08-22T18:58:15.400
> 
> 标签：objective-c, ios, nsdate, nsdateformatter

我正在尝试使用 RestKit 将数据导入和映射到 CoreData。

这是来自 API 的数据。

```
active": false,
"date": "2012-09-09",
"desc": "",
"end": "18:30",
"location": "",
"simStatus": "Accepted",
"start": "17:00",
"title": "The title" 
```

当我尝试将这些映射到 Core Data 时，有时会更改日期。例如，上述存储在 Core Data 中的数据将以 start = 1970-1-1 23:00 和 end = 1970-1-1 00:30 结束？

*API 发送过来的时间是当地时间，API 知道应用程序的使用时间和地点。想想体育赛事，我们知道客场比赛的地点/时间。*

我需要将这些时间和日期存储在 Core Data 中，即 API 将它们交给它们的确切时间 hh:mm。不确定为什么 Core Data 或 Restkit 决定改变它们？我理解 1970 部分的开始和结束没有日期，但为什么要更改时间？

有谁知道解决方案？

下面是 RestKit 映射代码，我尝试过使用时区、无时区、本地时区、UTC 时区等...我也尝试过使用和不使用 en_US_POSIX。

```
NSDateFormatter* timeFormatter = [NSDateFormatter new];
[timeFormatter  setDateFormat:@"HH:mm"];
timeFormatter.timeZone = [NSTimeZone localTimeZone];
timeFormatter.locale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"];

NSDateFormatter* dateFormatter = [NSDateFormatter new];
[dateFormatter  setDateFormat:@"yyyy-MM-dd"];
dateFormatter.timeZone = [NSTimeZone localTimeZone];
dateFormatter.locale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"];
gameMapping.dateFormatters = [NSArray arrayWithObjects:dateFormatter, timeFormatter, nil ];

[gameMapping mapKeyPath:@"start"     toAttribute:@"start"];
[gameMapping mapKeyPath:@"end"       toAttribute:@"end"];
....... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:36:41.850

正如 Hot Licks 在他的评论中指出的那样，所有`NSDate`对象都是 UTC，所以这就是您在打印出来时所看到的。因为您正在明确解析设备时区中的值，所以当您查看生成的 UTC 值时会看到变化。

通常，我*强烈*建议将内容作为完整的日期和时间值发送，包括时区偏移量。（例如，`"2012-09-09T18:30:00-05:00"`。）涉及的变量太多，无法明确说明所有内容。或者至少将时区作为单独的（但仍然是明确的）值传递。

如果您对服务器端没有任何控制权（正如您所说的那样），那么您将值解析为 UTC 的解决方法*，*然后希望事情匹配 - 虽然风险和脆弱 -听起来这可能是您拥有的最佳选择。

# delphi - 如何将 vcl 样式挂钩应用于表单的特定组件？

> ID：12079665
> 
> 赞同：3
> 
> 时间：2012-08-22T18:58:37.677
> 
> 标签：delphi, delphi-xe2, vcl-styles

我正在使用这个问题的答案的 vcl 样式钩子[`close button of a tabsheet not supporting vcl styles`](https://stackoverflow.com/questions/10531153/close-button-of-a-tabsheet-not-supporting-vcl-styles)并且工作正常，但是关闭按钮被绘制在我的应用程序的所有 TPageControl 组件中。

![在此处输入图像描述](../Images/92fe05cd90a4de57cee80e3f25f60684.png)

我只想将此选项（绘制关闭按钮）添加到特定表单。问题是：如何将这个钩子或任何 vcl 样式的钩子应用到特定表单的 TPageControl？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T19:53:44.707

您可以为 TPageControl 组件使用插入器类

检查这个样本

```
type
  TPageControl = class(Vcl.ComCtrls.TPageControl);
  TForm1 = class(TForm)
    PageControl1: TPageControl;
    ...
    ... 
```

然后在interposer类所在的同一个单元中注册vcl style hook

```
 TStyleManager.Engine.RegisterStyleHook(TPageControl, TTabControlStyleHookBtnClose); 
```

或使用完全限定的类型名称

```
 TStyleManager.Engine.RegisterStyleHook(Unit1.TPageControl, TTabControlStyleHookBtnClose); 
```

# php - 如何从当前 PHP 网页下载数据

> ID：12079666
> 
> 赞同：0
> 
> 时间：2012-08-22T18:58:38.993
> 
> 标签：php, download

> **可能重复：**
> [如何使 PDF 文件可在 HTML 链接中下载？](https://stackoverflow.com/questions/364946/how-to-make-pdf-file-downloadable-in-html-link)
> [从网站 PHP 下载文件](https://stackoverflow.com/questions/2651747/download-file-from-site-php)

我有一个 PHP 网页，其中包含从数据库动态获取的相当大的数据表。部分工作规范指出页面上需要有下载链接。此下载链接会将表格数据保存到文件中，并向用户显示一个保存对话框，以便他可以命名文件。下载文件后，我希望页面仍然在浏览器窗口中可见。

我以前做过，但我不记得细节了。我正在考虑类似这个伪代码的东西，把它放在一个单独的文件中：

```
header('Content-disposition: attachment; filename=huge_document.pdf');
header('Content-type: application/pdf');
<while not finished>
display row of data
<end> 
```

然后像这样链接到它：

```
 href="downloadfile.php?page=mypage">download file</a> 
```

抱歉，如果这已经在网站上讨论过。我没有找到符合我要求的具体案例。

# android - android何时使用功能？

> ID：12079668
> 
> 赞同：1
> 
> 时间：2012-08-22T18:58:42.897
> 
> 标签：android, android-sensors

我在理解一件事上有问题。我知道在开发应用程序时不需要android中的uses-feature，但我想防止一些没有某种功能的用户下载我的应用程序并因为“它不起作用”而给差票。让我们举个例子：如果我想在我的传感器管理器中使用 TYPE_ORIENTATION，我知道它使用 x 和 y 轴的加速度计。但是在z轴上，如果我没记错的话，它将0度聚焦到磁北。所以它使用的是指南针硬件。

我的问题是：我必须在使用功能中插入 android.hardware.compass 吗？还是 android.hardware.accelerometer 就足够了？有没有办法理解我必须输入的用途功能（一般而言）？

谢谢你的帮助。

# jquery - 带有 jQ uery、jQuery ($) 和 jQuery 的 CoffeeScript

> ID：12079669
> 
> 赞同：2
> 
> 时间：2012-08-22T18:58:45.173
> 
> 标签：jquery, coffeescript

在带有 jQ​​uery 的 CoffeeScript 中，以下语句有什么不同吗？

```
jQuery ($) ->
jQuery ->
$ - > 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T19:03:48.213

第一个与其他两个不同，就像在纯 JavaScript 中一样。在那里，您使用全局名称“jQuery”为“DOM 就绪”事件注册事件处理程序，同时确保快捷方式`$`链接到 jQuery。其他两种样式不这样做 - 因此，在事件处理程序的本地范围内，`$`它将具有它外部的任何值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T19:33:46.917

重要的是要知道这`$(handler)`与`$(document).ready(handler)`您问题中的所有三个语句基本上都是为[`jQuery.ready`](http://api.jquery.com/ready/)函数设置处理程序相同。

这样一来，jQuery 会将一个变量传递给提供给`ready`函数的处理程序，该函数是 jQuery 对象。因此，在您的第一个示例中，您的处理程序只是利用这一点并（重新）设置`$`为与`jQuery`. 您的处理程序不需要接受 jQuery 传递的变量，这就是为什么您的其他两个处理程序不接受任何参数是可以的。

`$`通常只有在有另一个使用全局的库（例如 jQuery ）时才需要这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T20:16:32.630

默认情况下，jQuery 创建一个名为的全局对象`jQuery`和一个名为 的全局别名`$`。即，`window.$ = window.jQuery`。这就是为什么您可能会看到引用两者的不同文档的原因。某些其他图书馆也喜欢使用`$`它作为他们的名字。这就是 jQuery 提供[noConflict 模式](http://api.jquery.com/jQuery.noConflict/)的原因，它可以让你重置`$`为之前的值。

所以给你一个简短的回答：除非**你** `$ ->` **使用** `noConflict`.

这里，作为参考，是函数的官方文档，`jQuery`当它被赋予一个函数作为参数时： http: [//api.jquery.com/jQuery/#jQuery3](http://api.jquery.com/jQuery/#jQuery3)

# flash - Youtube 播放器鼠标悬停事件

> ID：12079672
> 
> 赞同：0
> 
> 时间：2012-08-22T18:59:02.133
> 
> 标签：flash, youtube, mouse, youtube-api, watermark

我的一个客户希望在他的 youtube 视频中使用这种效果。我搜索了很多，但我找不到任何东西......

有人知道这是以某种方式使用 youtube API 制作的，还是只是一个使用掩码在其中加载 youtube 播放器的 Flash 播放器？

参考：[http ://pensenovotv.com.br/descricao/o-povo-canta-o-jingle-de-haddad?source=destaquegrandesuperior](http://pensenovotv.com.br/descricao/o-povo-canta-o-jingle-de-haddad?source=destaquegrandesuperior)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:12:05.223

我会说他们正在加载视频，然后使用他们自己的闪存代码对其进行屏蔽和控制。将 youtube 加载到 Flash 中非常简单，请参见 f.ex。在这里：[http ://www.republicofcode.com/tutorials/flash/as3youtube/](http://www.republicofcode.com/tutorials/flash/as3youtube/)

此外，您可以通过 FlashVars 将视频链接传递给您的 swf。

# iphone - UIImageViewer 在方法完成之前不会更新其内容，而不是在执行命令时

> ID：12079673
> 
> 赞同：0
> 
> 时间：2012-08-22T18:59:11.723
> 
> 标签：iphone, objective-c, xcode, uiimageview

好的，我的代码有问题。我想使用 imageViewers 制作某种类似于游戏的网格，但是当更改 imageViewers 如何更改图片的方法时，它只会在完成执行后更新屏幕/imageviewers，而不是在实际执行它的行时更新。我有一个带有无限循环的方法，它会在您按下按钮时更改 imageViewers 的图片。按钮调用将布尔变量更改为真的方法，因此主游戏循环通过不断检查某些变量是否为真来知道按下了什么。但是因为游戏循环永远不会结束，所以屏幕永远不会更新。有没有办法在执行期间更新屏幕上的内容？

我正在使用此代码更改 imageViewers 内容：

```
 UIImage * white = [UIImage imageNamed: @"White.png"];
     UIImage * blue = [UIImage imageNamed: @"Blue.png"];
     int tagInt=1;
     for (int y = 0;y<10;y++){
         for (int x = 0;x<10;x++){
             UIImageView *imageView;
             imageView = [[UIImageView alloc] initWithImage:white];                 imageView.frame =CGRectMake(x*32,y*37,32,37);
             imageView.image = white;
             imageView.tag=tagInt;
             [self.view addSubview:imageView];
             tagInt++;
         }
     }
     for (int u = 1;u<20;u++){
         [NSThread sleepForTimeInterval:(1)];   
         UIImageView *g = (UIImageView*)[self.view viewWithTag:u];
         g.image =blue;
     } 
```

这是一个人为的例子，因为我的实际代码太长，但有同样的问题。它仅在最后一个 for 循环（此延迟/线程睡眠命令）完成后在屏幕上更新，而不是在代码行执行时更新。

编辑：如果您需要任何上下文，这是项目：[https ://www.dropbox.com/s/cvefllnhgj0tp6g/Stacker.zip](https://www.dropbox.com/s/cvefllnhgj0tp6g/Stacker.zip)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T19:07:42.057

在 iOS 中，所有与 UI 相关的东西都在主 (UI) 线程中完成。如果您有一个阻塞 ui 线程的操作 - 这意味着它会像您一样使线程保持忙碌 - 不会发生视图更新。所以你将不得不改变你的代码，你有一个“updateView”方法来改变图像视图的内容。必须定期调用此方法，例如使用 NSTimer 实例：[https ://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/nstimer_Class/Reference/NSTimer.html](https://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/nstimer_Class/Reference/NSTimer.html)

假设更新视图的代码名为“updateView”，您可以像这样定义一个计时器：

```
NSTimer *timer;
    timer = [NSTimer scheduledTimerWithTimeInterval: 1
                        target: self 
                        selector:@selector(updateView:) 
                        userInfo: nil 
                        repeats: YES]; 
```

因此，计时器每秒都会调用您的 updateView 方法，并且不会阻塞主线程，这将再次允许您对视图所做的更改变得可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T19:26:37.113

我认为 CA 动画将满足您的需求。尝试这样的事情：

```
#import <QuartzCore/QuartzCore.h>

- (void)imageView:(UIImageView *)imageView crossfadeTo:(UIImage *)image duration:(NSTimeInterval)duration {

    [imageView.layer removeAnimationForKey:@"animateContents"];

    CABasicAnimation *crossFade = [CABasicAnimation animationWithKeyPath:@"contents"];
    crossFade.duration = duration;
    crossFade.fromValue = (id)imageView.image.CGImage;
    crossFade.toValue = (id)image.CGImage;
    [imageView.layer addAnimation:crossFade forKey:@"animateContents"];

    imageView.image = image;
} 
```

这也可以做成 UIImageView 上的 category 方法。像这样称呼它：

```
UIImage *white = [UIImage imageNamed: @"White.png"];
UIImage *blue = [UIImage imageNamed: @"Blue.png"];

UIImageView *imageView = [[UIImageView alloc] initWithImage:white];
[self imageView:imageView crossfadeTo:blue duration:5.0]; 
```

或者，这可以通过块动画以相同的方式调用它来完成，如下所示：

```
- (void)imageView:(UIImageView *)imageView crossfadeTo:(UIImage *)image duration:(NSTimeInterval)duration {

    UIImageView *fadeToImageView = [[UIImageView alloc] initWithFrame:imageViewFrame];
    fadeToImageView.image = image;
    [imageView.superview insertSubview:fadeToImageView belowSubview:imageView];

    [UIView animateWithDuration:duration animations:^{
        imageView.alpha = 0.0;
    } completion:^(BOOL finished) {
        imageView.image = image;
        imageView.alpha = 1.0;
        [fadeToImageView removeFromSuperview];
    }];
} 
```

# c# - 使用 C# 使用 Microsoft.Build.Engine 构建和发布（ASP.NET Web 应用程序）

> ID：12079674
> 
> 赞同：2
> 
> 时间：2012-08-22T18:59:12.083
> 
> 标签：c#, asp.net, visual-studio-2008, msbuild, msbuild-buildengine

我想构建一个 VS2008 项目（ASP.NET Web 应用程序），然后使用 Microsoft.Build.Engine 发布。

到目前为止，我已经成功地构建了这个项目。

但我无法将其发布到指定目录。

我的构建方法是：

```
private void BuildProject()
{
            Engine engine = new Engine();
            FileLogger logger = new FileLogger();
            logger.Parameters = @"logfile=C:\temp\build.log";
            engine.RegisterLogger(logger);

            BuildPropertyGroup bpg = new BuildPropertyGroup();
            bpg.SetProperty("Configuration", "Debug");
            bpg.SetProperty("Platform", "AnyCPU");

            bool success = engine.BuildProjectFile(GetProjectFileName(), null, bpg);

            if (success)
                Console.WriteLine("Success!");
            else
                Console.WriteLine("Build failed - look at c:\temp\build.log for details");

            engine.UnloadAllProjects();
            engine.UnregisterAllLoggers();
} 
```

我的发布方法是：

```
private void PublishProject()
{

           //no idea what goes here ... please help !!!

} 
```

有任何想法吗 ？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T19:13:03.020

```
private void PublishProject()
{

Engine engine = new Engine();
            FileLogger logger = new FileLogger();
            logger.Parameters = @"logfile=C:\temp\publish.log";
            engine.RegisterLogger(logger);

            BuildPropertyGroup bpg = new BuildPropertyGroup();
            bpg.SetProperty("OutDir", @"C:\outdir\");
            bpg.SetProperty("Configuration", "Debug");
            bpg.SetProperty("Platform", "AnyCPU");
            bpg.SetProperty("DeployOnBuild", "true");
            bpg.SetProperty("DeployTarget", "Package");
            bpg.SetProperty("PackageLocation", @"$(OutDir)\MSDeploy\Package.zip");
            bpg.SetProperty("_PackageTempDir", @"C:\temp\");

            bool success = engine.BuildProjectFile(GetProjectFileName(), null, bpg);

            if (success)
                Console.WriteLine("Success!");
            else
                Console.WriteLine(@"Build failed - look at c:\temp\publish.log for details");

            engine.UnloadAllProjects();
            engine.UnregisterAllLoggers();

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T20:11:47.177

这些是我为发布我的项目而设置的属性。

```
 DeployOnBuild=true;
    DeployTarget=Package;
    _PackageTempDir=$(PackagePath) 
```

# java - 需要长 Java 位列表

> ID：12079675
> 
> 赞同：1
> 
> 时间：2012-08-22T18:59:12.910
> 
> 标签：java, arrays, boolean

在 Java 中，我有一个包含一百万个左右标志真/假的数组来存储。应该`BitSet`帮忙吗？尽管它实现了 a `Set`，但是否可以像数组一样快速地迭代它的元素`boolean[]`？

抱歉，如果问题已被问到。首先，我尝试将数组拆分为二进制表示的整数块，并`int[]`作为这些二进制文件的结果形成，因此我可以将大小减少 32，但这是相当低级的。

`BitSet`我发现了其他地方的一些批评者，它们`boolean[]`存储了大量额外的内存 => 对大型数组不利。

存储一百万个标志有更好的主意吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T19:05:56.560

> 我有一百万个左右标志真/假的数组要记住。BitSet 应该有帮助吗？

您可以在 BitSet 中拥有数十亿位。

> 虽然它实现了一个 Set，但是否可以像数组 boolean[] 一样快速地迭代它的元素？

boolean[] 每位使用一个字节（在大多数 JVM 上），而 BitSet 每位使用一位。对于小型数组，boolean[] 更快，但是当您测试 CPU 缓存的大小时，BitSet 可能更有效。

顺便说一句：对于小尺寸，使用 BitSet 会稍微慢一些，因为它需要从每个内存字中提取一点。A`byte[]`有同样的问题，所以如果你想自己设置位，我建议你使用`int[]`像 BitSet 一样的。

* * *

使用 BitSet 的示例

```
BitSet bitSet = new BitSet();
// set bit 100
bitSet.set(100);
// get bit 99
System.out.println("bit 99 is " + bitSet.get(99));
System.out.println("bit 100 is " + bitSet.get(100) + " after set");
bitSet.clear(100);
System.out.println("bit 100 is " + bitSet.get(100) + " after clear"); 
```

印刷

```
bit 99 is false
bit 100 is true after set
bit 100 is false after clear 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T19:05:21.177

我会使用一个简单的`boolean[]`. 另外，请注意`BitSet`不实现`Set`接口。

```
public class BitSet implements Cloneable, java.io.Serializable 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T19:09:38.683

只是一个想法，如何使用类似 a`HashSet`并添加“打开”标志的索引，当它们“关闭”时将其删除。

（如果您的大多数标志在任何给定时间都关闭，这将特别有效）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T19:02:06.160

来自[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)

*   boolean：布尔数据类型只有两个可能的值：true 和 false。将此数据类型用于跟踪真/假条件的简单标志。这种数据类型代表一点信息，但它的“大小”并不是精确定义的。

如果您担心大小和可预测性，那么我会考虑尝试将 8 位块表示为字节，然后存储在 byte[] 中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T19:14:40.203

`BitSet`操作非常有效，您可以自己检查[源](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/BitSet.java)。它没有实现`Set`，但您可以在一个简单的循环中有效地迭代各个位，例如：

```
int l = bitSet.length();
for(int i = 0; i < l; i++) {
    boolean bit = bitSet.get(i);
    // ...
} 
```

（您发现了对 `BitSet1 的哪些批评？请在您的问题中包含链接以供其他人查看。）

* * *

如果您需要管理一组特定的、固定的布尔标志，您可以将它们列在 an 中`enum`，然后使用[EnumSet](http://docs.oracle.com/javase/6/docs/api/java/util/EnumSet.html)表示标志设置。对它们的操作也非常有效地实施。引用文档：

> 这个类的空间和时间性能应该足够好，以允许它用作传统的基于 int 的“位标志”的高质量、类型安全的替代品。如果参数也是枚举集，即使批量操作（例如 containsAll 和 retainAll）也应该运行得非常快。

与`BitSet`s 相比，作为一个额外的好处，这种表示是[类型安全](http://en.wikipedia.org/wiki/Type_safety)的，可以为您省去很多麻烦。

# objective-c - iOS UIViews 的交替颜色（比如在 tablerow 中使用时）

> ID：12079679
> 
> 赞同：0
> 
> 时间：2012-08-22T18:59:22.207
> 
> 标签：objective-c, ios, uiview

这段代码不起作用，但我认为它非常接近。我一直无法得到我试图工作的许多排列。这甚至可能吗？

```
myView.backgroundColor = [UIColor (i % 2) == 0 ? cyanColor : whiteColor]; 
```

有没有人尝试过或知道如何更正此代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T19:10:02.433

那是行不通的。
你需要写

```
myView.backgroundColor =  (i % 2 == 0)? [UIColor cyanColor] : [UIColor whiteColor]; 
```

# php - Ubuntu 上的 PHP Ping

> ID：12079682
> 
> 赞同：1
> 
> 时间：2012-08-22T18:59:25.210
> 
> 标签：php, networking, ubuntu, ping

我无法让 PHP ping 本地计算机。我只是想能够检查计算机是否处于唤醒状态。

我已经看到了许多在搜索时 ping 的方法，但似乎没有一个对我有用。我相信这是因为在 Ubuntu 上，ping 需要 root 权限，而 PHP 没有。大多数示例使用某种形式的

```
exec("ping ".$ip); 
```

但任何方法对我来说都可以。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T20:10:20.747

在我的 Ubuntu 系统上，命令`ls -l /bin/ping`显示：

```
-rwsr-xr-x 1 root root 34716 2010-11-15 09:08 /bin/ping 
```

这意味着虽然“ping”归root所有，但所有用户都可以执行它。
您应该尝试使用以下 PHP 代码：

```
<html>
<body>
<pre>
<?php 
$result = exec("/bin/ping -c 1 -W 1 127.0.0.1"); 
echo "result=".$result."\n";
?>
</pre>
</body>
</html> 
```

显然，您应该将“127.0.0.1”替换为您网络的有效 IP 地址。
该`-c 1`选项在发送一个数据包后停止 ping，如[手册页](http://linux.die.net/man/8/ping)中所述：

> **-c** count
> 在发送 count ECHO_REQUEST 数据包后停止。
> 使用截止时间选项，ping 等待计数 ECHO_REPLY 数据包，直到超时到期。

`-W 1`如果在一秒钟后没有得到响应，该选项会强制 ping 停止：

> **-W** timeout
> 等待响应的时间，以秒为单位。
> 该选项仅在没有任何响应的情况下影响超时，否则 ping 会等待两个 RTT。

# c++ - 用于列标准化的 cuda 内核（分段缩减）

> ID：12079683
> 
> 赞同：1
> 
> 时间：2012-08-22T18:59:26.470
> 
> 标签：c++, cuda

我正在将一些代码移植到 GPU 上，并且主要实现了它，除了我的算法需要执行列规范化步骤（或者它应该，算法在没有它的情况下工作，但为了算法稳定性而进行规范化会更好）。

我正在尝试考虑实现这一点的最佳方法。我已经有一个可以减少的内核，所以我可以重用它来获得列总和。列的数量可以少到几十列，几千个元素，多到几千列，每列几千个元素。如果我在每一列上迭代地调用我的归约内核，我认为性能会很差，所以我试图想出更好的方法，并希望其他人已经以更优化的方式解决了这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T23:30:26.357

You may want to look into the open-source [CUDA Data-Parallel Primitives Library (CUDPP)](http://code.google.com/p/cudpp/) from the team at UC Davis/Nvidia. It includes a fast segmented scan as well as parallel reductions.

# mongodb - 如果需要对服务器上的分组数据进行排序怎么办？

> ID：12079687
> 
> 赞同：0
> 
> 时间：2012-08-22T18:59:35.983
> 
> 标签：mongodb

MongoDb 2.0，c# driver 1.6rc：有没有办法在服务器端对数据聚合（组或 map-reduce）的结果进行排序？可以说，作为分组的结果，我们有数千条记录，在服务器端排序会快得多。我在 MongoDb 官方网站上找到的只是这条评论：“*要对分组数据进行排序，只需在返回时在客户端对其进行排序。* ”（[聚合](http://www.mongodb.org/display/DOCS/Aggregation)）。这是否意味着这种情况不支持服务器排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T20:41:45.750

group() 的结果作为单个 BSON 对象返回，因此排序必须在客户端进行。另一方面，map reduce 的输出可以放入一个集合中，您可以随后在服务器端对其进行查询和排序。

MR 的输出选项： [http ://www.mongodb.org/display/DOCS/MapReduce#MapReduce-Outputoptions](http://www.mongodb.org/display/DOCS/MapReduce#MapReduce-Outputoptions)

# javascript - 将文本框的值发送到jquery函数

> ID：12079690
> 
> 赞同：0
> 
> 时间：2012-08-22T18:59:45.337
> 
> 标签：javascript, jquery

我有一个文本框，当您键入一些数字并选中单选按钮时，需要将文本框的值发送到 jquery 函数。我现在使用的代码是：

```
var radiobuttoncustom = 0;
if (document.getElementById('radiobuttoncustom').checked) {
    radiobuttoncustom = document.getElementsByName("some_number").value;
} 
```

然后，我将使用“radiobuttoncustom”显示结果，但是当显示结果时，它是 NaN 而不是数字。现在我正在使用文本框名称来获取值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T19:05:27.357

[`getElementsByName`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByName)返回一个[`HTMLCollection`](https://developer.mozilla.org/en-US/docs/DOM/HTMLCollection)，而不是一个没有`value`属性的元素。

你有没有尝试过：

```
radiobuttoncustom = document.getElementsByName("some_number")[0].value; 
```

编辑：如果你正在处理数字，你也应该这样解析它们：

```
radiobuttoncustom = parseInt(document.getElementsByName("some_number")[0].value, 10); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T19:14:02.697

既然您使用的是jquery，为什么不呢

```
$('input[name=some_number]').val(); 
```

和

```
if($('#radiobuttoncustom').prop("checked")) 
```

# xcode - UIView 的描述打印垃圾

> ID：12079691
> 
> 赞同：0
> 
> 时间：2012-08-22T18:59:57.300
> 
> 标签：xcode, uiview, lldb

当我对任何 UIView 执行 po 时，我得到以下信息。

```
(lldb) po [[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, 100)]
(id) $1 = 0x08731860 + ƒ„*∞Ì*Ä…3    HÜº retain:1 - tag:0 - bgcolor:(r:0 g:0 b:0 a:1.00)
   bounds: x:0 y:0 w:100 h:100 - frame: x:0 y:0 w:100 h:100 - center: x:50, y:50 
```

这只发生在我的一个项目中。关于什么会导致它的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:13:17.247

我了解到这个问题的原因在于 iOS 的 UserVoice 静态库。

# jquery - z-index 悬停在不工作上

> ID：12079692
> 
> 赞同：1
> 
> 时间：2012-08-22T19:00:03.100
> 
> 标签：jquery, css

我正在尝试创建一个不会影响其余布局的悬停事件。似乎 z-index 是这样做的方法，但我无法让它工作。我试图坚持使用 css，但 jQuery 是可行的。

完整的应用程序：http: [//jsfiddle.net/9cRdq/](http://jsfiddle.net/9cRdq/)

html

```
<div class="big-square" id="br">
    <div class="little-square" id="br-tl"></div>
    <div class="little-square" id="br-tr"></div>
    <div class="little-square" id="br-bl"></div>
    <div class="little-square" id="br-br"> </div>
</div> 
```

css

```
.big-square
{
    position: relative;
    z-index: 1;
    font-size: 2em;
    float: left;
    width: 30%; 
    min-width: 4em;
    min-height: 4em;
    margin: 0 2% 2% 0;
    background: #000;
}
.little-square
{
    position: relative;
    z-index: 1;
    cursor: pointer;
    float: left;
    width: 48%; 
    height: 48%;
    background: #cd2626;
}
.little-square:hover
{
    z-index: 1000;
} 
```

jQuery

```
$(document).ready(resizeBigSquare);
window.onresize = resizeBigSquare;
function resizeBigSquare() {
    $('.big-square').css(
        {
            'height': ($('.big-square').width() * .85) + 'px',
            'line-height': ($('.big-square').width() * .85) + 'px'
        });
    $('.little-square, .rectangle-top, .rectangle-bottom').css(
        {
            'line-height': $('.little-square').height()+ 'px'
        });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T19:39:35.240

您`z-index`对悬停的更改工作得很好。事实上，[这里有一个 fiddle](http://jsfiddle.net/9cRdq/2/)显示它通过使用`box-shadow`. 当您**将 div.little-square**悬停在它上面时，它实际上是在它的同行之上，否则`box-shadow`会夹在其他人的后面。

请注意，`z-index`仅影响 z 轴上的堆叠顺序，不影响其他（大小、颜色等）

如果您希望在悬停时更改**div.little-square**的大小（不破坏网格），请考虑在每个正方形内创建一个子元素。然后，应用`position:absolute`到新的子元素，将小方块的一些属性传递给它，并相应地设置它的悬停状态。[这个小提琴](http://jsfiddle.net/9cRdq/3/)有一个我正在谈论的例子。

# php - 显示有关数据库项目的更多信息

> ID：12079693
> 
> 赞同：0
> 
> 时间：2012-08-22T19:00:04.203
> 
> 标签：php, mysql, show, expand, collapse

我需要一个 php 页面的帮助，该页面显示来自 mysql 数据库的有关城镇广场周围建筑物的信息。我希望它设置为首先显示地址。然后，当有人点击某个地址时，它会向他们显示有关该特定建筑物的更多信息。

我是 PHP 新手。我知道有两种解决方案会起作用，但除非我必须这样做，否则我不想走那条路。

**这两个解决方案是**

1.  为每个建筑物创建一个页面，并将每个地址链接到特定页面，

2.  将每个数据库项插入页面（而不是使用 PHP 循环）和隐藏的 div，可以为每个地址切换。

* * *

我现在拥有的代码（并且有效）用于显示地址：

```
 echo "<p><a href="WhatDoIPut???"><h3>   " . stripslashes($rowBuildings[building_address]) . "</h3></a><br>\n"; 
```

但是，如果（且仅当）他们单击建筑物地址时，我如何显示其余的建筑物信息？对不起，如果这是一个广泛的话题。我已经阅读了几个论坛，但没有运气。我的问题是没有从数据库中获取信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:15:26.627

我找到了解决我的困境的方法。. .

我正在使用 Javascript 来切换 div（这很简单）。我的问题是切换每个单独的 div，因为它们是由 PHP 脚本添加的（根据数据库条目的数量）。我不知道如何为链接和 div 增加 div id 名称。例子：

```
 <!--This was the link to toggle the div --> 
 <a href="#" onclick="toggleMe('divid');"><h3>Address</h3></a>

 <!--This was the div to toggle --> 
 <div id="divid">Hello</div> 
```

我的 PHP 插入了多个 div 和链接，所以当你点击一个地址时，所有名为“divid”的 div 都会出现。为了解决这个问题，我向每个 div id 添加了一个 PHP 变量，例如：

```
$uniqueID = 0;
$PleaseWork = 0; 
```

然后我放在php代码的底部：

> $uniqueId++; $请工作++；

这使我可以将变量放在链接和 div id 中，这将一致地计算在一起。总的来说，这里是代码：

**Java 切换**

```
> <script type="text/javascript">
> 
>       function toggleMe(a){ var e=document.getElementById(a); if(!e)return
> true; if(e.style.display=="none"){ e.style.display="block" } else{
> e.style.display="none" } return true } </script> 
```

**PHP 代码 - 链接和可见项目**

```
<div class="building" align="left" style="margin-left:100px;">
    <? 
    {
 $uniqueID = 0;
 $PleaseWork = &$uniqueID;
 }
 $selectAddress ="SELECT * FROM `buildings` order by building_address";
 $resultAddress = mysql_query($selectAddress);
  while($rowBuildings = mysql_fetch_array($resultAddress)){;
echo "<p><a id=\"displayText\" href=\"#\" onclick=toggleMe(\"divn$PleaseWork\");><h3>   " . stripslashes($rowBuildings[building_address]) . "</a></h3><br>\n";
   echo "<b>For Sale or Rent:</b> " . $rowBuildings[building_saleorrent] . "";
    if(!empty($rowBuildings[building_permonth]))
      echo "<b>Rent Per Month: </b>" . $rowBuildings[building_permonth] . "";
      if(!empty($rowBuildings[building_saleprice]))
      echo "<b>Sale Price: </b>" . $rowBuildings[building_saleprice] . "";
   echo "<br>\n"; 
```

**PHP 代码 - 隐藏的 DIV**

```
 echo "<div id=\"divn$uniqueID\" style=\"display:none\"><b>Is the Property Listed with a Realtor? </b> " . $rowBuildings[building_realtor] . "<br>\n";
        if(!empty($rowBuildings[building_target]))
        echo "<b>Best Suited for Building: </b>" . $rowBuildings[building_target] . "<br>\n";
    echo "<b>Owner: </b>" . $rowBuildings[building_owner] . "";
    if(!empty($rowBuildings[building_ownphone]))
      echo "<b>  Phone: </b>" . formatPhone($rowBuildings[building_ownphone]) . "";
      if(!empty($rowBuildings[building_ownemail]))
      echo "<b>  Email: </b>" . $rowBuildings[building_ownemail] . "";
    echo "<br>\n";
     echo "<b> Is the building occupied? </b>" . $rowBuildings[building_isoccupant] . "<br>\n";
    if(!empty($rowBuildings[building_occupant]))
      echo "<b>Current Occupant:</b>" . $rowBuildings[building_occupant] . "<br>\n";
    if(!empty($rowBuildings[building_occupantphone]))
      echo "<b>Occupant Phone:</b>" . formatPhone($rowBuildings[building_occupantphone]) . "<br>\n";
        echo "<b>Utilities: </b>" . $rowBuildings[building_utilities] . "<br>\n";
        echo "<b>Stories: </b>" . $rowBuildings[building_stories] . "<br>\n";
        echo "<b>Total Sq. Footage: </b>" . $rowBuildings[building_square] . "<br>\n";
        echo "<b>Footage Breakdown:</b><br> ";
    if(!empty($rowBuildings[building_residential]))
      echo "<b>Residental: </b>" . $rowBuildings[building_residential] . " ";
      if(!empty($rowBuildings[building_lightindustry]))
      echo "<b>Light Industrial: </b>" . $rowBuildings[building_lightindustry] . " ";
      if(!empty($rowBuildings[building_commercial]))
      echo "<b>Residental: </b>" . $rowBuildings[building_commercial] . " ";
      echo "<br>\n";
        echo "<b>Storage: </b>" . $rowBuildings[building_storage] . "&nbsp; <b>Storage Sq. Footage:&nbsp; </b>" . $rowBuildings[building_storefoot] . "<br>\n";
        echo "<b>Inside of Building: </b>" . $rowBuildings[building_inside] . "<br>\n";
        echo "<b>Outside of Building: </b>" . $rowBuildings[building_outside] . "<br>\n";
        echo "<b>Parking: </b>" . $rowBuildings[building_parking] . "<br>\n";
         if(!empty($rowBuildings[building_issues]))
      echo "<b>Issues With the Building: </b>" . $rowBuildings[building_issues] . "<br>\n";
       if(!empty($rowBuildings[building_features]))
      echo "<b>Main Features of the Building: </b>" . $rowBuildings[building_features] . "<br>\n";
       if(!empty($rowBuildings[building_notes]))
      echo "<b>Notes on the Building: </b>" . $rowBuildings[building_notes] . "<br>\n";     
    echo "</div></p>";
$uniqueId++;
$PleaseWork++;
}

?> 
```

我使用各种网站来收集这些信息。这里有一些：

[http://www.dynamicdrive.com/forums/showthread.php?41829-Toggle-Div-in-PHP](http://www.dynamicdrive.com/forums/showthread.php?41829-Toggle-Div-in-PHP)

[http://php.net/manual/en/language.references.unset.php](http://php.net/manual/en/language.references.unset.php)

对不起，如果这令人困惑。感谢你的帮助！

# wpf - 基于绑定数据类型的WPF弹出选择模板

> ID：12079695
> 
> 赞同：3
> 
> 时间：2012-08-22T19:00:20.087
> 
> 标签：wpf, xaml, mvvm

得到一个内部有很多对象的视图，这些对象从 DataTemplate 声明中获取它们的视图：

```
<DataTemplate DataType="{x:Type vm:StatusAViewModel}" >
    <vw:StatusAView />
</DataTemplate>

<DataTemplate DataType="{x:Type vm:StatusBViewModel}" >
    <vw:StatusBView />
</DataTemplate> 
```

现在我想根据要包含的数据类型显示一个包含其内容的弹出窗口：

```
<Popup AllowsTransparency="True"
       IsOpen="{Binding IsPopupOpen,Mode=OneWay}" 
       PlacementTarget="{Binding PopupPlacementElement}" Placement="{Binding PopupPlacementMode}"
       HorizontalOffset="{Binding PopupHOffset}" VerticalOffset="{Binding PopupVOffset}">
    <ContentPresenter x:Name="StuckHere" Content="{Binding PopupData}" />
</Popup> 
```

StuckHere 上的 ContentTemplateSelector 不起作用，因为它只评估一次，并且当 PopupData 更改时，不会重新选择模板。

我能找到的所有示例都依赖于默认数据模板，我不能在我的情况下使用它，因为我已经为主视图设置了默认数据模板，我只希望这个不同的模板影响我的弹出窗口。

有什么线索吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T19:41:40.430

您可以应用一组不同的`DataTemplates`in ，这将覆盖在可视树中定义较高的那些并仅`<Popup.Resources>`应用于`Popup`

```
<Window.Resources>
    <DataTemplate DataType="{x:Type vm:StatusAViewModel}" >
        <vw:StatusAView />
    </DataTemplate>
    <DataTemplate DataType="{x:Type vm:StatusBViewModel}" >
        <vw:StatusBView />
    </DataTemplate>
</Window.Resources>

<Popup>
    <Popup.Resources>
        <DataTemplate DataType="{x:Type vm:StatusAViewModel}" >
            <vw:StatusAPopupView />
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:StatusBViewModel}" >
            <vw:StatusBPopupView />
        </DataTemplate>
    </Popup.Resources>

    <!-- The DataTeplate used here will be a PopupView, not the regular View -->
    <ContentPresenter Content="{Binding PopupData}" />
</Popup> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T19:53:28.143

您可以查看[http://msdn.microsoft.com/en-us/library/system.windows.controls.datatemplateselector.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.datatemplateselector.aspx)。实现从 DateTemplateSelector 派生的模板选择器并使用 ContentControl。将 Content 绑定到 DataObject 并将[ContentTemplateSelectorTemplate](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentcontrol.contenttemplateselector.aspx)绑定到 TemplateSelector。

# c# - DataTable 不接受 MySQL 表中的 DateTime 字段

> ID：12079700
> 
> 赞同：3
> 
> 时间：2012-08-22T19:00:36.030
> 
> 标签：c#, mysql, datetime

我有一个 DateTime 字段，默认为“null”，但是当我的数据表尝试读取该字段时，会发生这种情况

> Nãocommunicationsência entre o tipo de valor eo tipo de colunaNão foi possível guardar ><01/01/0001 00:00:00> na coluna dh_cadastro。请注意 MySqlDateTime。

值类型和列类型不匹配。无法保存 <01/01/0001 00:00:00> dh_cadastro 列。提供了预期的类型 MySqlDateTime。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T19:06:18.260

如果您使用 null 作为默认值，请使用可为空的 DateTime 对象 ( `DateTime?`)

常规 DateTime 不能为 null，因为它是值类型。

如果您从数据库中收到日期错误，请进行更新以确保没有`'0000-00-00'`日期。将这些更新为 0001-01-01 以与 .NET 保持一致`DateTime.MinValue`

另请参阅[SqlDateTime.MinValue ！= DateTime.MinValue，为什么？](https://stackoverflow.com/questions/805770/sqldatetime-minvalue-datetime-minvalue-why)查看 MySQL 和 .NET 之间的 DateTime.MinValue 问题

# android - Android AdapterView - 调用 view.layout() 后孩子没有得到适当的大小

> ID：12079701
> 
> 赞同：0
> 
> 时间：2012-08-22T19:00:36.717
> 
> 标签：android, android-layout, android-widget

我正在为我的应用程序构建自定义 AdapterView 布局。到目前为止，我能够根据我的规格定位所有项目。唯一的问题是所有的孩子仍然有 getMeasuredWith == 屏幕宽度。因此，在为每个孩子调用 layout() 方法并定义其新宽度之后，该视图中的所有孩子都保持与以前相同的大小。

我需要做什么才能从我的视图中获取所有子视图以保持每个子视图之间的界限。

谢谢蒂亚戈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T19:07:11.590

要可靠地获得视图所需的大小，您必须重写[onSizeChanged()](http://developer.android.com/reference/android/view/View.html#onSizeChanged%28int,%20int,%20int,%20int%29)方法。

# joomla - 如何将新文章直接插入 joomla 2.5 数据库？

> ID：12079706
> 
> 赞同：3
> 
> 时间：2012-08-22T19:00:52.787
> 
> 标签：joomla, joomla2.5

我正在使用 Joomla 2.5 并且想在不使用 Joomla 的文章管理器的情况下插入 100 篇文章。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T02:13:29.133

这是不完整的。您还需要将记录添加到 assets 表中，并确保它们正确键入 content 表并嵌套在 category 资产和 com_content 资产中。但是，您可以将所有文章放在未分类的类别中来处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T19:09:37.407

好吧，如果我想尽快添加 100 篇文章，我会备份`#__content`数据库中的表格，在 Notepad++ 中打开它，将我所有的文章添加进去，然后重新上传表格。

如果您这样做，请不要忘记为每篇文章分配不同的 ID。

# highcharts - HighCharts：如何在点击事件中确定图表当前在哪些数据分组中？

> ID：12079707
> 
> 赞同：2
> 
> 时间：2012-08-22T19:00:55.483
> 
> 标签：highcharts, highstock

我目前使用 HighCharts 按日、周和月分组数据。我还有一个与图表以及每个系列相关的点击事件。当有人点击时，我如何确定它当前使用的数据分组 - 日、周或月？

这是一个简化的示例：http: [//jsfiddle.net/V5hSd/4/](http://jsfiddle.net/V5hSd/4/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T19:27:00.870

```
//If in chart's click event handler
this.series[i].currentDataGrouping.unitName

//If in series's event handler
this.currentDataGrouping.unitName 
```

**如何用你的方式解决**
问题 Highchart 有一个很好的可读对象图，它可以告诉你大部分事情，而无需文档。我强烈推荐你使用的任何浏览器的 firebug 或开发者工具

所需要的只是在单击处理程序中设置一个断点，查看局部变量，看看什么对手头的问题有意义，然后就可以了。你有（来自系列的点击处理程序）`this.currentDataGrouping.unitName`。

现在是不是很直观？！ ![在此处输入图像描述](../Images/7b71291b24f42a174fe15b6443bf43a5.png)

如果我听起来很粗鲁，我深表歉意，但我相信赋予人们权力以帮助他们下次解决自己的问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T19:36:00.440

看看这是否有帮助：http: [//jsfiddle.net/WRsyG/](http://jsfiddle.net/WRsyG/)

# ios - 如何从应用内进程启动 iOS 推送通知

> ID：12079709
> 
> 赞同：0
> 
> 时间：2012-08-22T19:00:59.860
> 
> 标签：ios, objective-c, iphone, push-notification

我正在构建一个插入第三方服务的应用程序，该服务将向 iOS 设备发送消息。到目前为止，当委托方法被触发以表示已收到新消息时，我无法找到任何关于然后启动推送通知的文档。

到目前为止，我已经注册了应用程序以接收推送通知并触发了委托方法，我只是不确定如何将两者连接在一起？

如果有帮助，该应用程序将至少部署 iOS 5.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:01:14.157

我发现在这种情况下，我想要的不是推送通知，而是本地通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T23:50:06.993

这不是远程通知的工作方式。它们的主要目的是通知应用程序一些事件。所以应用程序只接收远程通知并注意发送它们。所以场景是：

应用程序通过

```
application:didReceiveRemoteNotification: //if running 
```

或者

```
application:didFinishLaunchingWithOptions: //if closed 
```

根据通知有效负载，您可以确定需要执行的确切操作。例如，通知表示向用户发送了一条新消息。然后您需要将您的自定义请求发送到您的服务器并获取该新消息。

# magento - Magento：类别锁定/警告或 T&C

> ID：12079710
> 
> 赞同：0
> 
> 时间：2012-08-22T19:01:02.427
> 
> 标签：magento

我想知道是否有办法将警告/建议或条款和条件（最好）添加到类别或登录页面，以警告用户有关成人内容。在我正在工作的商店中有一个“成人部分”类别，用于色情玩具、内衣、角色扮演等，我需要在用户访问该部分之前警告用户此类内容，以防他们小于 18 岁。

我在网上搜索过，只找到了我买不起的付费扩展。有谁知道如何做到这一点？

我正在使用 Magento CE 1.7。

谢谢，

编辑：

好的，所以我一直在试图弄清楚如何做到这一点，我只是认为最好的方法是创建一个类别登陆页面并添加一个用于 T&C 重定向的 java 脚本到我想要的页面.

这是我将用于具有空白内容的类别登录页面的代码。

```
<?php $_categories = $this->getCurrentChildCategories() ?>
<?php $_collectionSize = $_categories->count() ?>

<div>
<?php $i=0; foreach ($_categories as $_category): ?>
<?php
$layer = Mage::getSingleton(‘catalog/layer’);
$layer->setCurrentCategory(Mage::getModel(‘catalog/category’)->load($_category->getId()));
$helper = Mage::helper(‘catalog/category’);
?> 
```

然后我找到了一个代码片段，在单击接受后会将用户重定向到我喜欢的页面，但我不确定如何实现它和/或这是否是最佳选择。这是代码。

```
<form action="url-to-go-to" method="GET" onsubmit="return checkCheckBox(this)">
I accept: <input type="checkbox" value="0" name="agree">
<input type="submit" value="Continue">
<input type="button" value="Exit" onclick="document.location.href='BACKTOWHAT.html';">
</form>

<script type="text/javascript">
<!--
function checkCheckBox(f){
if (f.agree.checked == false )
{
alert("Please tick the box to continue");
return false;
} else
return true;
}
-->
</script> 
```

现在我认为最好只创建一个简单的 CMS 页面并将顶部菜单上的类别指向该页面，一旦他们同意并单击继续，他们可以通过简单地指向实际类别' onclick' 到实际类别的 URL。

不确定这是否是最好的方法，但这是我能想到的唯一方法。我想到的另一种方式是要求我在结帐时接受 magento 已经附带的“协议”并进行扩展，允许我将其放在任何页面上并从销售/条款中调用“协议 ID”和条件选项卡，但我不知道该怎么做，这只是一个想法。

如果有人有更好的解决方案，我很乐意听到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T22:56:01.043

我会添加某种 JavaScript，在整个页面的顶部显示一个 div，当您接受观看该类别时，它将创建一个会话 cookie。否则，在历史导航中创建一个 back()。这样你就不需要另一个页面，只需要 JS。

另一方面，您能否发布您发现的扩展程序？

# c++ - 检测（可能是抽象的）基类的受保护构造函数

> ID：12079711
> 
> 赞同：15
> 
> 时间：2012-08-22T19:01:03.723
> 
> 标签：c++, templates, c++11, template-meta-programming, perfect-forwarding

我正在试验 C++11 的新特性。在我的设置中，我真的很想使用继承构造函数，但不幸的是还没有编译器实现这些。因此，我试图模拟相同的行为。我可以这样写：

```
template <class T>
class Wrapper : public T {
    public:
    template <typename... As>
    Wrapper(As && ... as) : T { std::forward<As>(as)... } { }
    // ... nice additions to T ...
}; 
```

这工作......大部分时间。有时使用`Wrapper`类的代码必须使用 SFINAE 来检测如何`Wrapper<T>`构造这样的类。然而，存在以下问题：就重载决议而言，构造函数将接受任何参数——但如果无法使用这些参数构造类型`Wrapper<T>`，则编译将失败（ SFINAE*未*涵盖这一点） 。`T`

我试图使用有条件地启用构造函数模板的不同实例化`enable_if`

```
 template <typename... As, typename std::enable_if<std::is_constructible<T, As && ...>::value, int>::type = 0>
    Wrapper(As && ... as) // ... 
```

只要：

*   `T`is的适当构造函数`public`
*   `T`不是抽象的

我的问题是：如何摆脱上述两个约束？

我试图通过检查（使用 SFINAE 和`sizeof()`）来克服第一个表达式`new T(std::declval<As &&>()...)`是否**在** `Wrapper<T>`. 但这当然行不通，因为派生类可以使用其基类的受保护构造函数的唯一方法是在成员初始化列表中。

对于第二个，我完全不知道——它是我更需要的一个，因为有时它`Wrapper`实现了 的抽象函数`T`，使其成为一个完整的类型。

我想要一个解决方案：

*   根据标准是正确的
*   适用于任何 gcc-4.6.*、gcc-4.7.* 或 clang-3.*

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-22T19:36:53.620

这似乎在我当地的 GCC 上运行良好（4.7，由 rubenvb 提供）。不过，ideone 上的 GCC 会打印几个“已实现”的编译器内部错误。

我不得不`Experiment`公开该类的“实现细节”，因为出于某些原因（闻起来像一个错误），我的 GCC 版本抱怨它们是私有的，即使只有类本身使用它。

```
#include <utility>

template<typename T, typename Ignored>
struct Ignore { typedef T type; };

struct EatAll {
  template<typename ...T>
  EatAll(T&&...) {}
};

template<typename T>
struct Experiment : T {
public:
  typedef char yes[1];
  typedef char no[2];

  static void check1(T const&);
  static void check1(EatAll);

  // if this SFINAE fails, T accepts it
  template<typename ...U>
  static auto check(int, U&&...u)
    -> typename Ignore<no&, 
        decltype(Experiment::check1({std::forward<U>(u)...}))>::type;

  template<typename ...U>
  static yes &check(long, U&&...);

public:
  void f() {}
  template<typename ...U, 
           typename std::enable_if<
             std::is_same<decltype(Experiment::check(0, std::declval<U>()...)),
                          yes&>::value, int>::type = 0>
  Experiment(U &&...u):T{ std::forward<U>(u)... }
  {}
};

// TEST

struct AbstractBase {
  protected:
    AbstractBase(int, float);
    virtual void f() = 0;
};

struct Annoyer { Annoyer(int); };

void x(Experiment<AbstractBase>);
void x(Annoyer);

int main() {
  x({42});
  x({42, 43.f});
} 
```

* * *

*更新*：该代码也适用于 Clang。

# ember.js - 如何处理来自 Ember.js 控制器的路由器转换？

> ID：12079712
> 
> 赞同：2
> 
> 时间：2012-08-22T19:01:14.617
> 
> 标签：ember.js, ember-data

成功保存新的 Project 对象后，我应该如何处理转换到不同的视图？如果我的验证通过，我想提交 @transaction 并转换到 Projects 索引视图。

**控制器：**

```
DA.ProjectsController = Em.ArrayController.extend
  createProject: (project) ->
    @transaction = DA.store.transaction()
    p = @transaction.createRecord(DA.Project, project)
    validation_errors = p.validate()

    if validation_errors
      DA.displayError validation_errors
    else
      @transaction.commit()

      ### What should be here to transition the route/view? ###
      router.transitionTo('projects') # Like this?
      DA.get('router').send('projects') # This?
      ################################################### 
```

**路由器：**

```
DA.Router = Em.Router.create
  location: 'history'

  root: Em.Route.extend
    index: Em.Route.extend
      route: '/'
      redirectsTo: 'projects'

    projects: Em.Route.extend
      route: '/projects'
      index: Em.Route.extend
        router: '/'
      connectOutlets: (router) ->
        router.get('applicationController').connectOutlet('projects', DA.Project.find())
      showProject: Em.Route.transitionTo('project')

    project: Em.Route.extend
      route: '/projects/:project_id'
      connectOutlets: (router, project) ->
        router.get('applicationController').connectOutlet('project', project)

    newProject: Em.Route.extend
      route: '/projects/new'
      connectOutlets: (router) ->
        router.get('applicationController').connectOutlet('projectsNew')

    doProjects: (router) ->
      router.transitionTo('projects')
    doProjectsNew: (router) ->
      router.transitionTo('newProject') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T19:50:12.963

我想我可能已经解决了自己的问题，但如果有更合适的方法，我很想听听其他人的意见。这就是我最终的结果：

```
DA.ProjectsController = Em.ArrayController.extend    
  createProject: (project) ->
    @transaction = DA.store.transaction()
    p = @transaction.createRecord(DA.Project, project)
    validation_errors = p.validate()

    if validation_errors
      DA.displayError validation_errors
    else
      @transaction.commit()
      DA.get('router').transitionTo('projects') 
```

# php - Php !is_valid_type($image) 仅适用于数组的一个实例

> ID：12079714
> 
> 赞同：0
> 
> 时间：2012-08-22T19:01:20.920
> 
> 标签：php, sql, image, image-uploading, validating

嘿伙计们，我想做的是为不同游戏机上的各种游戏建立一个上传页面。我承认我是 php 新手，我只是想弄清楚。我通过上传图片遇到了一个奇怪的问题。我不明白为什么这会失败，因为数组中的一个属性工作得很好。它可以毫无问题地从表单上传结果。其他三个属性都失败了。使用完全相同的功能和方法。

```
//// this the form block for uploading ////

<form action="process.php" method="post" enctype="multipart/form-data">
    <!--xbox -->
                <div class="form">
                    <h3>Xbox 360</h3>

                    <!-- title of post/ game name -->
                    <p><label for="xboxtitle"> Title of Game </lable></p>
                    <input type="text" name="xboxtitle"  size=20 /><br />

                    <!-- image uploader -->
                    <p><label for="xbox-image">Game Image:</label><sup>*png, png, bmp, jpeg and jpg only!</sup></p>
                    <input type="file" name="xboximage" /><br />
                    <input type="hidden" name="MAX_FILE_SIZE" value="100000" />

                    <!-- large text box -->
                    <p><label for="xboxtext">Displayed text:</label><sup> * limit of 250 characters allowed.</sup></p>
                    <textarea cols=40 rows=10 name="xboxtext"></textarea>

                    <!-- price box -->
                        <p><label for="xboxprice">Price of item</label></p>
                        <input type="text" name="xboxprice" size=8 /><br />

                </div>                  

<!-- p3 -->
                <div class="form">

                    <h3>Playstation 3</h3>

                    <!-- title of post/ game name -->
                    <p><label for="ps3title"> Title of Game </lable></p>
                    <input type="text" name="ps3title" size=20 /><br />

                    <!-- image uploader -->
                    <p><label for="ps3image">Game Image:</label><sup>*png, png, bmp, jpeg and jpg only!</sup></p>
                    <input type="file" name="ps3image" /><br />
                    <input type="hidden" name="MAX_FILE_SIZE" value="100000" />

                    <!-- large text box -->
                    <p><label for="ps3text">Displayed text:</label><sup> * limit of 250 characters allowed.</sup></p>
                    <textarea cols=40 rows=10 name="ps3text"></textarea>

                    <!-- price box -->
                        <p><label for="ps3price">Price of item</label></p>
                        <input type="text" name="ps3price" size=8 /><br />

                </div>
<!-- wii -->
                <div class="form">
                    <h3>Wii</h3>

                    <!-- title of post/ game name -->
                    <p><label for="wiititle"> Title of Game </lable></p>
                    <input type="text" name="wiititle" size=20 /><br />

                    <!-- image uploader -->
                    <p><label for="wiiimage">Game Image:</label><sup>*png, png, bmp, jpeg and jpg only!</sup></p>
                    <input type="file" name="wiiimage" /><br />
                    <input type="hidden" name="MAX_FILE_SIZE" value="100000" />

                    <!-- large text box -->
                    <p><label for="wiitext">Displayed text:</label><sup> * limit of 250 characters allowed.</sup></p>
                    <textarea cols=40 rows=10 name="wiitext"></textarea>

                    <!-- price box -->
                        <p><label for="wiiprice">Price of item</label></p>
                        <input type="text" name="wiiprice" size=8 /><br />

                    </div>

<!-- PC -->
                <div class="form">
                    <h3>PC</h3>

                    <!-- title of post/ game name -->
                    <p><label for="pctitle"> Title of Game </lable></p>
                    <input type="text" name="pctitle" size=20 /><br />

                    <!-- image uploader -->
                    <p><label for="pcimage">Game Image:</label><sup>*png, png, bmp, jpeg and jpg only!</sup></p>
                    <input type="file" name="pcimage" /><br />
                    <input type="hidden" name="MAX_FILE_SIZE" value="100000" />

                    <!-- large text box -->
                    <p><label for="pctext">Displayed text:</label><sup> * limit of 250 characters allowed.</sup></p>
                    <textarea cols=40 rows=10 name="pctext"></textarea>

                    <!-- price box -->
                        <p><label for="pcprice">Price of item</label></p>
                        <input type="text" name="pcprice" size=8 /><br />

                </div>
        <p><input type="submit" id="submit" class="bigbutton" value="Upload" /></p>
</form>

///// this is the process.php page ///
<?php
include ("includes/logincheck.php");
?>

<?php

// Call our connection file
require("dbacess.php");

///////////////////////////////////////////////////////////////////////////////////////////////////

    // create validating image types function
function is_valid_type($file)
{
    // This is an array that holds all the valid image MIME types
    $valid_types = array("image/jpg", "image/jpeg", "image/bmp", "image/gif", "image/png");

    if (in_array($file['type'], $valid_types))
        return 1;
    return 0;
}

// declare possible forms in array.
$arr = array("xbox","ps3", "wii",  "pc");

// push the array through the following code
//while giving $value the proper form prefix
foreach ($arr as &$value) {

//$value Variables 
   $title = $_POST[$value . 'title'];
   $text = $_POST[$value . 'text'];
   $price = $_POST[$value . 'price'];
   $image = $_FILES[$value .'image'];

//validate info or redirect
if ($title && $text && $price && $image['name'] != "" ) 
    {

    // Sanitize our inputs
   $title = mysql_real_escape_string($title);
   $text = mysql_real_escape_string($text);
   $price = mysql_real_escape_string($price);
   $image['name'] = mysql_real_escape_string($image['name']);

    // Build our target path full string.  This is where the file will be moved to
   // Build Partial Target Path
    $TARGET_PATH = "../../images/newreleasesuploads/";
    $TARGET_PATH .= "$value/";

    //creates upload path
    $UPLOAD_PATH = $TARGET_PATH;
    $UPLOAD_PATH .= $image['name'];

    // Check to make sure that our file is actually an image
    // You check the file type instead of the extension because the extension can easily be faked
    if (!is_valid_type($image))
    {
        $_SESSION['error'] = "You must upload a jpeg, gif, png, or bmp in {$value} field. Please select a correct file type.";
        header("Location: welcome.php");
        exit;
    }

    // Here we check to see if a file with that name already exists
    // You could get past filename problems by appending a timestamp to the filename and then continuing
    if (file_exists($UPLOAD_PATH))
    {
        $_SESSION['error'] = "A file with that name already exists when trying to update $value page. Please rename file something different or remove the existing files";
        header("Location: welcome.php");
        exit;
    }

    //create current date variable
    $date = date("Y-m-d");
    $date .= date(" h:i:s");
    // count # of entries
    $entry = mysql_query("SELECT * FROM new{$value}");
    $NUMBER_OF_ROWS = mysql_num_rows($entry);

    // Count # of entries delete if index is 10 or more.
    if($NUMBER_OF_ROWS >=10){

        // find oldest entry by date
            $sqldate ="SELECT * FROM new{$value}
            WHERE date = (SELECT MIN(date) FROM new{$value})";
            $oldestdate = mysql_query($sqldate) or die ("could not access DB to find oldest entry" . mysql_error());

            //grabs data from that row
            $row = mysql_fetch_assoc($oldestdate);

            //adds filename to delete path
            $DELETE =$TARGET_PATH;
            $DELETE .=$row['filename'];

            // parse row date to variable
            $deletedate = $row['id'];

            //terminates entry
            $deletedate = "DELETE FROM new{$value}
            WHERE id = $deletedate";
            $deleteoldest = mysql_query($deletedate) or die ("could not delete oldest date entry" . mysql_error());

            //terminates file
            unlink($DELETE);

            $_SESSION['message'] .= "The oldest entry was deleted to make room for the new upload.";

        }

    // attempt to move the file from its temporary directory to its new home
    if (move_uploaded_file($image['tmp_name'], $UPLOAD_PATH))
    {   

        // Placing a reference of the images location into the database, *not* putting the image into the database.
        $sql = "insert into new{$value} (date, title, description, price, filename) values ('$date', '$title', '$text', '$price',  '" . $image['name'] . "' )";
        $result = mysql_query($sql) or die ("Could not insert data into DB: " . mysql_error());
        //message to let user know image was uploaded correctly
        $_SESSION['message'] .= "The {$value} entry was uploaded correctly";

    }

    else    {
        // A common cause of file moving failures is because of bad permissions on the directory attempting to be written to
        // Make sure you chmod the directory to be writable also make sure directory is not READ ONLY
        $_SESSION['error'] = "Could not upload file.  Check read/write permissions on the directory";
        header("Location: welcome.php");
        exit;

    }
}

// declare variable for error display
$i = 0;
// validate to make sure all are filled
if($title !=""){$i++;}
if($text !=""){$i++;}
if($price !=""){$i++;}
if($image['name'] !=""){$i++;}

elseif ($i!=0) {

    //validate that more then one but not all box
        $_SESSION['error'] = "Only $i of the fields for $value were filled. Please refill all fields or no fields for $value";
        header("Location: welcome.php");
        exit;

    }

}

// return to upload page
header("Location: welcome.php");
        exit;
?> 
```

发生的事情是数组中的 xbox 值通过，但是 ps3 wii 和 pc 都发回错误“您必须在 ps3 字段中上传 jpeg、gif、png 或 bmp。请选择正确的文件类型。” 如果图像是错误的文件类型，它应该这样做。但是，我可以同时或单独上传相同的图像，并且 xbox 每次都会通过，而其他的则会失败。谁能告诉我这是为什么？可能如何解决？

提前感谢您的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T20:03:56.007

在做了更多研究后解决了我自己的问题，我有两个选择。问题是我试图在没有 Apache 配置的情况下上传多个文件。选项1）像这样修改表单（一次只允许上传一个）

```
 <div class="form">
                <form action="newreleasesprocess.php" method="post" enctype="multipart/form-data">
                <h3>Playstation 3</h3>

                <!-- title of post/ game name -->
                <p><label for="ps3title"> Title of Game </lable></p>
                <input type="text" name="ps3title" size=20 /><br />

                <!-- image uploader -->
                <p><label for="ps3image">Game Image:</label><sup>*png, png, bmp, jpeg and jpg only!</sup></p>
                <input type="file" name="ps3image" /><br />
                <input type="hidden" name="MAX_FILE_SIZE" value="100000" />

                <!-- large text box -->
                <p><label for="ps3text">Displayed text:</label><sup> * limit of 250 characters allowed.</sup></p>
                <textarea cols=40 rows=10 name="ps3text"></textarea>

                <!-- price box -->
                    <p><label for="ps3price">Price of item</label></p>
                    <input type="text" name="ps3price" size=8 /><br />
                    <p><input type="submit" id="submit"  value="Upload" /></p>
    </form>

            </div> 
```

然而，这一次摆脱了多次上传，而我使用它的目的并不好。

选项2）将配置.ini中的max_file_uploads从1重新配置到4（或者你想要的）

* * *

我选择了选项 2。

希望此解决方案可以帮助遇到相同问题的其他人再次感谢任何研究我的问题的人

# java - PL/SQL 返回 CLOB 和 JDBC 性能

> ID：12079725
> 
> 赞同：2
> 
> 时间：2012-08-22T19:02:50.810
> 
> 标签：java, sql, oracle, jdbc, clob

我有一个 PL/SQL 函数可以从 MySQL 复制 GROUP_CONCAT()。该函数接受一个 CURSOR 并返回一个 VARCHAR2。但是，我的应用程序中有一些对象有足够的数据，连接字符串的大小大于 4000。由于我在 SELECT 语句（而不仅仅是 PL/SQL）中使用了这个函数，这让 Oracle 很生气并抛出了 ORA -06502。

因此，我更改了函数以返回 CLOB。这可以解决错误，但是当使用 JDBC 读取数据时，性能会受到很大影响。我正在读取大量数据并从 VARCHAR2 切换到 CLOB 导致执行时间减慢 10-20 倍。我一直在考虑以某种方式对此进行优化，但是由于 CLOB 是从函数返回的并且不在表中，所以我读过的大部分内容都不适用。

有什么办法可以改善这一点吗？我想强调的是，这与实际数据库的性能没有任何关系。连接最多 4000 个字符的值非常快，只有少数对象需要超过 4000 个字符，最大的值在 5000 个字符左右。LOB 通常针对大型原始数据进行优化，如果不是因为 Oracle 对 SELECT 语句中存在的列的大小限制，我不需要这样做。

**编辑**- 我想重申 CLOB 是在函数中*创建*的，它没有读取数据库中的任何 CLOB。它只是连接 VARCHAR2 并将结果作为 CLOB 返回。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-12T06:56:43.233

我不知道如何解决您的问题.. 但是最小化您的问题的一种方法是拥有 2 个版本的功能。1 返回 varchar2 和一个返回 clob

如果值长于 4000/32000 字符，您的 varchar2 版本可能会在内部使用 clob 版本并返回异常代码/引发错误

然后，您的 java 代码可以检测到这一点，并为少数需要它的情况直接重新调用 clob 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-12T08:26:45.357

您可以在返回之前将 CLOB 转换为 VARCHAR。PLSQL 中 VARCHAR 的最大大小为 32k。如果 32k 不够大，请将结果存储到临时表中并使用 JDBC 从中读取。这将比通过 CLOB 网络协议更快。

# javascript - 按钮处于活动状态，焦点在 Mac FireFox 上不起作用？

> ID：12079726
> 
> 赞同：2
> 
> 时间：2012-08-22T19:03:07.377
> 
> 标签：javascript, html, css

当我创建一个具有活动、悬停和焦点的按钮时，我遇到了 Mac Firefox/Chrome/Safari 和 Window/Chrome 的问题。悬停有效，但活动和焦点无效。它们三个都只能在 Window/Firefox 上完美运行。我用css来做。有什么建议吗？

这是我的CSS：

```
.navList button:hover,
.navList button:active,
.navList button:focus{ /* Changed */
border-color: black; 
border-style: solid;
background: rgb(73,155,234); /* Old browsers */
background: -moz-linear-gradient(top,  rgb(73,155,234) 0%, rgb(32,124,229) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgb(73,155,234)), color-       stop(100%,rgb(32,124,229))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  rgb(73,155,234) 0%,rgb(32,124,229) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  rgb(73,155,234) 0%,rgb(32,124,229) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  rgb(73,155,234) 0%,rgb(32,124,229) 100%); /* IE10+ */
background: linear-gradient(to bottom,  rgb(73,155,234) 0%,rgb(32,124,229) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#499bea', endColorstr='#207ce5',GradientType=0 ); /* IE6-9 */
} 
```

这是html：

```
<ul id="List" class="navList">
<button id="eButton" class="moduleButton">Employees</button>
<button id="iButton" class="moduleButton">Inventory</button>
</ul> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-28T09:13:43.980

您必须遵守伪类的特定时间顺序：

1.  `:link`
2.  `:visited`
3.  `:focus`
4.  `:hover`
5.  `:active`

有关更多详细信息，请参阅[http://www.w3.org/TR/CSS2/selector.html#dynamic-pseudo-classes](http://www.w3.org/TR/CSS2/selector.html#dynamic-pseudo-classes)。

# java - Java - 使用“<>”创建类时意味着什么？

> ID：12079728
> 
> 赞同：-1
> 
> 时间：2012-08-22T19:03:22.113
> 
> 标签：java, class

我刚刚创建了一个这样的类：`NameOfTheClass<Raeaeraear>`. 这是什么意思？为什么我可以放任何我想要的随机东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T19:17:29.080

那就是所谓的泛型。泛型用于“告诉”一个类的实例它将使用哪种类型，取 f.ex 一个 List

```
List<People> myPeopleList = new ArrayList<People>(); 
```

这里列表是参数化的。如果你看一下 List 接口源代码，它是这样声明的，这意味着接口 List 是通用的。

```
public interface List<E> extends Collection<E> {
... 
```

在您的情况下，类 NameOfTheClass 将像这样实现，注意：泛型可以应用于类或接口。

```
public class NameOfTheClass<E> {
....
public doSome(E e){
    doSomeGenericOperationWith(e);
} 
```

这个类可以这样使用：

```
NameOfTheClass<AType> instance = new NameOfTheClass<AType>();
Atype yourType = ...
doSome(yourType); 
```

注意：任何使用 doSome() 方法都需要 Atype 类型的参数，这将由 Java 编译器处理。因此，如果您尝试使用其他类型调用该方法，则会出现编译错误。

更多阅读：[http ://docs.oracle.com/javase/tutorial/java/generics/why.html](http://docs.oracle.com/javase/tutorial/java/generics/why.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T19:14:07.707

当您使用 a 时`<>`，编译器会关闭检查泛型类型。当编译器需要知道你不能使用的类型时`<>`

例如

```
// compiles ok because the compiler knows not to check the type.
List<Integer> ints = new ArrayList<>(); 

// compiler needs to know the type, so this doesn't compile.
List<Integer> ints = new ArrayList<>() {}; 
```

# php - php ajax 配额系统

> ID：12079730
> 
> 赞同：-2
> 
> 时间：2012-08-22T19:03:29.387
> 
> 标签：php, ajax

我正在尝试开发一种工具来向我的销售团队展示他们在一个月内的配额。我已经将他们的配额划分为工作日，但我希望能够向他们展示他们在销售命中时与他们的配额有多接近，因此他们进行了销售并自动更新图表。

我有这个工作作为一个快照没有，点击刷新并重新加载数据，但我计划将它流式传输到他们的销售室（所以点击刷新不是一个选项）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T19:15:37.597

我假设您需要一种机制来自动刷新数据。

在这种情况下，您可以使用元刷新或 javascript 刷新或 ajax。

元刷新可以如下完成。

```
<meta http-equiv="refresh" content="5" /> 
```

上面的代码将每 5 秒刷新一次页面。

```
setTimeout(function(){
   window.location.reload(1);
 }, 5000); 
```

这也将每 5 秒刷新一次页面。

或者使用 jQuery Ajax 将您的结果页面调用到另一个页面中。例如，如果您的结果页面名称是 tables.php，那么代码将如下所示。

```
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
 $(document).ready(function() {
     $("#responsecontainer").load("tables.php");
   var refreshId = setInterval(function() {
      $("#responsecontainer").load('tables.php?randval='+ Math.random());
   }, 5000);
   $.ajaxSetup({ cache: false });
});
</script>
</head>
<body>

<div id="responsecontainer">
</div>
</body>
</html> 
```

IE 修复需要 cache:false

谢谢。

# spring-security - 使用 spring-security-oauth2 的“访问被拒绝（用户不是匿名的）”

> ID：12079731
> 
> 赞同：2
> 
> 时间：2012-08-22T19:03:30.557
> 
> 标签：spring-security, oauth-2.0

我是 Spring Security 和 Oauth 的新手，我正在尝试建立一个简单的示例，使用 Oauth2 保护对路径“/api”中资源的访问。我正在使用 spring-security-oauth2-1.0.0.RC2。经过一段时间的配置处理，我能够获得令牌，但是当我尝试向“/api”资源发送请求时，我面临两个问题：

*   最初，我发送带有“OAuth2”前缀的授权标头，但 spring-security-oauth2 似乎需要令牌中带有“Bearer”前缀的标头才能找到它们。这些代币有什么区别？

*   在 Spring 验证了令牌之后，我收到了一个安全错误：“ExceptionTranslationFilter - 访问被拒绝（用户不是匿名的）”，我遇到了这个问题。由于我使用的是 InMemory 令牌存储，我每次都必须登录以授权客户端，然后我收到此错误。这是弹簧配置：

```
<http pattern="/api/**" create-session="never" entry-point-ref="oauthAuthenticationEntryPoint"
    access-decision-manager-ref="accessDecisionManager" xmlns="http://www.springframework.org/schema/security">
    <anonymous enabled="false" />
    <intercept-url pattern="/api/**" access="ROLE_CLIENT,SCOPE_READ" />
    <custom-filter ref="resourceServerFilter" before="PRE_AUTH_FILTER" />
    <access-denied-handler ref="oauthAccessDeniedHandler" />
</http>

<http disable-url-rewriting="true" xmlns="http://www.springframework.org/schema/security">
    <intercept-url pattern="/oauth/**" access="ROLE_USER" />
    <!--intercept-url pattern="/**" access="IS_AUTHENTICATED_ANONYMOUSLY" /-->
    <form-login/>
    <logout logout-success-url="/index.jsp" logout-url="/logout" />
</http>

<bean id="oauthAuthenticationEntryPoint" class="org.springframework.security.oauth2.provider.error.OAuth2AuthenticationEntryPoint">
    <property name="realmName" value="O2Server" />
</bean>

<bean id="oauthAccessDeniedHandler" class="org.springframework.security.oauth2.provider.error.OAuth2AccessDeniedHandler" />

<bean id="clientCredentialsTokenEndpointFilter" class="org.springframework.security.oauth2.provider.client.ClientCredentialsTokenEndpointFilter">
    <property name="authenticationManager" ref="clientAuthenticationManager" />
</bean>

<bean id="accessDecisionManager" class="org.springframework.security.access.vote.UnanimousBased" xmlns="http://www.springframework.org/schema/beans">
    <constructor-arg>
        <list>
            <bean class="org.springframework.security.oauth2.provider.vote.ScopeVoter" />
            <bean class="org.springframework.security.access.vote.RoleVoter" />
            <bean class="org.springframework.security.access.vote.AuthenticatedVoter" />
        </list>
    </constructor-arg>
</bean>

<authentication-manager id="clientAuthenticationManager" xmlns="http://www.springframework.org/schema/security">
    <authentication-provider user-service-ref="clientDetailsUserService" />
</authentication-manager>

<authentication-manager alias="authenticationManager" xmlns="http://www.springframework.org/schema/security">
    <authentication-provider>
        <user-service>
            <user name="test" password="test" authorities="ROLE_USER" />
        </user-service>
    </authentication-provider>
</authentication-manager>

<bean id="clientDetailsUserService" class="org.springframework.security.oauth2.provider.client.ClientDetailsUserDetailsService">
    <constructor-arg ref="clientDetails" />
</bean>

<bean id="tokenStore" class="org.springframework.security.oauth2.provider.token.InMemoryTokenStore" />

<bean id="tokenServices" class="org.springframework.security.oauth2.provider.token.DefaultTokenServices">
    <property name="tokenStore" ref="tokenStore" />
    <property name="supportRefreshToken" value="true" />
    <property name="clientDetailsService" ref="clientDetails"/>
</bean>

<bean id="userApprovalHandler" class="org.o2server.security.O2ServerUserApprovalHandler">
    <property name="tokenServices" ref="tokenServices" />
</bean>

<oauth:authorization-server client-details-service-ref="clientDetails" token-services-ref="tokenServices" user-approval-handler-ref="userApprovalHandler">
    <oauth:authorization-code />
    <oauth:implicit />
    <oauth:refresh-token />
    <oauth:client-credentials />
    <oauth:password />
</oauth:authorization-server>

<oauth:resource-server id="resourceServerFilter" resource-id="O2Server" token-services-ref="tokenServices" />

<oauth:client-details-service id="clientDetails">
    <oauth:client client-id="O2Client" resource-ids="O2Server" authorized-grant-types="authorization_code,refresh_token,implicit"
        authorities="ROLE_CLIENT" scope="read,write" secret="secret" />
</oauth:client-details-service>

<oauth:web-expression-handler id="oauthWebExpressionHandler" /> 
```

这是来自服务器的日志：

```
11:58:30.366 [DEBUG] FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /api/user/; Attributes: [ROLE_CLIENT, SCOPE_READ]
11:58:30.366 [DEBUG] FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@48a94464: Principal: org.springframework.security.core.userdetails.User@346448: Username: paul; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_USER; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationDetails@43794494; Granted Authorities: ROLE_USER
11:58:30.366 [DEBUG] UnanimousBased - Voter: org.springframework.security.oauth2.provider.vote.ScopeVoter@4e857327, returned: 0
11:58:30.366 [DEBUG] UnanimousBased - Voter: org.springframework.security.access.vote.RoleVoter@1b4b2db7, returned: -1
11:58:30.367 [DEBUG] ExceptionTranslationFilter - Access is denied (user is not anonymous); delegating to AccessDeniedHandler <org.springframework.security.access.AccessDeniedException: Access is denied>org.springframework.security.access.AccessDeniedException: Access is denied
    at org.springframework.security.access.vote.UnanimousBased.decide(UnanimousBased.java:90) 
```

拜托，你能给我一些建议吗？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T20:59:39.900

我从未使用过 oauth 插件，但从阅读调试输出我可以说`RoleVoter`返回 -1，这意味着访问被拒绝`DecisionVoter`。我看到您只授予`ROLE_USER`试图访问 url 的委托人`/api/user/`，这是受保护的，这`[ROLE_CLIENT, SCOPE_READ]`就是拒绝访问的原因。

将 ROLE_CLIENT 和 SCOPE_READ 授予 principal 或更改`<intercept-url pattern="/api/**" access="ROLE_CLIENT,SCOPE_READ" />`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T07:42:45.940

正如 Xaerxess 所说，您应该将拦截 URL 访问属性更改为 ROLE_USER。

```
<intercept-url pattern="/api/**" access="ROLE_CLIENT,SCOPE_READ" /> 
```

到

```
<intercept-url pattern="/api/**" access="ROLE_USER,SCOPE_READ" /> 
```

访问属性控制**用户的角色**（客户端代表用户）。

*标签的authority* (ROLE_CLIENT) 属性的文档`<oauth:client>`说明：

> 授予客户端的权限（逗号分隔）。与授予客户所代表的用户的权限不同。

此外，根据用户 Dave Syer 的说法：

> 如果您没有更改 Tonr，**则它不是作为客户端，而是代表用户**（没有所需的 ROLE_CLIENT），因此预计您会得到 403。如果您想关于来自 tonr 的请求来自具有特定角色的客户端（不更改应用程序）的断言，您可以使用表达式，例如“oauthClientHasRole('ROLE_CLIENT') 和 hasScope('trust')”。

来源： http: [//forum.springsource.org/showthread.php?125468-confusing-between-ROLE_USER-ROLE_CLIENT](http://forum.springsource.org/showthread.php?125468-confusing-between-ROLE_USER-ROLE_CLIENT)

# ruby-on-rails - 从 rails 应用程序切换 authlogic。发布请求中缺少会话

> ID：12079735
> 
> 赞同：0
> 
> 时间：2012-08-22T19:03:43.707
> 
> 标签：ruby-on-rails, ruby, session, authlogic

我在我的 Rails 应用程序上使用 authlogic 并决定将其删除，以支持使用 OAuth 实现 3rd 方身份验证。切换到这种方法给我留下了一个非常有趣的问题：

当我从应用程序发出发布请求时，rails 会话对象为空。'get' 请求总是填充会话而不是帖子。我可以验证它确实在这两种情况下都发布了会话 cookie，但不明白为什么会发生这种情况。

任何想法为什么会发生这种情况或调试提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T19:40:05.000

这是因为帖子缺少 csrf 令牌。出于某种原因，Authlogic 负责 AJAX 帖子的 CSRF 验证。

# haskell - 理解 Haskell 表达式求值

> ID：12079736
> 
> 赞同：1
> 
> 时间：2012-08-22T19:03:44.767
> 
> 标签：haskell, expression, evaluation

我需要帮助理解 Haskell 表达式评估。举个例子：

```
group . sort $ [1,2,3] 
```

这是我对如何评估表达式的想法，我完全错了吗？
1.. 首先被评估，这将创建函数 Ord a => [a] -> [[a]]
2\. $ 被评估，这将评估 $
3 的右侧。 $ 的右侧作为参数提供给函数在 $ 的左侧

空格（最高优先级？）如何与这一切联系起来？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T20:02:53.683

表达式树`($)`在顶部，with`(group . sort)`和`[1,2,3]`as children。我可以看到这一点，因为`(.)`它的优先级为 9，并且比`($)`优先级 0 绑定得更紧密：

```
Prelude> :i (.)
(.) :: (b -> c) -> (a -> b) -> a -> c   -- Defined in `GHC.Base'
infixr 9 .

Prelude> :i ($)
($) :: (a -> b) -> a -> b   -- Defined in `GHC.Base'
infixr 0 $ 
```

有`(group . sort)`作为`(.)`顶部`group`和`sort`作为参数。去`[1,2,3]`糖。`(1:(2:(3:([]))))`这是解析的表达式树。

通过强制`(group . sort)`, 获取一个函数，然后将未评估的值传递`[1,2,3]`给该函数来评估它。

`(group . sort)`是`\xs -> group (sort xs)`，所以这变成了`group (sort [1,2,3])`。 `group`查看最外层的构造函数，其中产生的`(sort [1,2,3])`力最终将被评估为。`(sort [1,2,3])``(1 : thunk)``thunk``[2,3]`

# jquery - 如何在 jquery 验证插件中添加自定义函数作为验证选项

> ID：12079739
> 
> 赞同：0
> 
> 时间：2012-08-22T19:03:51.727
> 
> 标签：jquery, jquery-plugins, jquery-validate

我正在使用 jquery 验证插件：[http](http://docs.jquery.com/Plugins/Validation/validate#options) ://docs.jquery.com/Plugins/Validation/validate#options 。

我想运行一个自定义函数，在验证后根据验证在每个字段中是成功还是失败，将 css 样式添加到已验证的字段中。我尝试过 highlight、unhighlight 和 showerrors，但无法让论文按我想要的方式工作。

我想添加一个自定义函数作为验证的选项，或者在每次触发后立即运行一个函数。

这是一个代码示例：

```
$("#registerHere").validate({
                rules:{
                ............... 
                },
                messages:{
                .................   
                },
            validClass: 'success',
            errorClass: "error",
            errorElement: "span",  

                               unhighlight: function(element, errorClass, validClass) {
                $(element).parents('.control-group').removeClass('error');
                    $(element).parents('.control-  group').addClass('success');  
                                    $(element).parents('.control-group').removeClass(errorClass).addClass(validClass); 

                },
                        highlight:function(element, errorClass, validClass) {
                        $(element).parents('.control-   group').addClass('error');
                         $(element).parents('.control-group').addClass(errorClass).removeClass(validClass); 
                    },
                                showErrors: function(errorMap, errorList) {

                                this.defaultShowErrors();
                                    $('.control-group').removeClass('error').addClass('success').

                            }

        });
    });
  </script> 
```

我想添加以下代码而不是 showerrors、highlight 或 unhighlight：

```
if ( $('div.control-group').find('span.error').length) {$(this).addClass('error').removeClass('success');} 
```

我将不胜感激任何建议，

谢谢，

账单

# ms-access - 当其他人在时访问报告不过滤

> ID：12079741
> 
> 赞同：2
> 
> 时间：2012-08-22T19:04:07.673
> 
> 标签：ms-access, filter, report

我有一个表单，它允许用户通过一些组合框编辑过滤器的属性，然后打开一个报告。报告以

```
DoCmd.OpenReport rptName, acViewReport, , whereClause, acWindowNormal
'whereClause = "Building = '005'" for instance 
```

一些报告可以正常打开，我的意思是它们填充了过滤后的信息。然而，其他人，即使它们基于相同的内部模板，也忽略过滤器并显示基于所有数据（而不是过滤数据）的报告。

为什么报告会忽略过滤器？当我在使用表单打开报告后以设计模式编辑报告时：

```
Working Report              |       Non Working Report
Filter: Building = '005'    |       Filter:  
Filter On Load: No          |      Filter On Load: No 
```

**什么可能导致非工作报告不注册过滤器参数？**这些报告中没有 On Load VBA，也没有任何 VBA（导出到 PDF 和每个报告的复制粘贴关闭按钮除外）。

**编辑** 之前应该检查过，无论驱动报告的查询是否为空，都会发生这种情况（即过滤器永远不会应用于某些报告，无论是否为空白）

不确定代码是否有帮助，但是：

```
Private Sub btnOpenSummary_Click()
  If IsNull(Me.cboSummary) Then
      MsgBox "Please select a building for the SUMMARY report."
      Exit Sub
  End If
  strCrit = "Building = '" & Me.cboSummary & "'"
  MsgBox strCrit
  survArray = getSurveyArray()
  For Each Survey In survArray
      DoCmd.OpenReport Survey, acViewReport, , strCrit, acWindowNormal
  Next Survey
  DoCmd.OpenReport "Total Summary", acViewReport, , , , Me.cboSummary
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T13:21:43.170

我的错..由于某种原因，代码页一直被换行并看不见。有一个使用控制源播放的 On Open。它最终变得无用（因为控制源只需要设置一次，而不是每次），但由于某种原因它禁用了过滤器。其他可能遇到此问题的人：

**确保控制源没有在您的 VBA 中为报告更改。**

感谢那些帮助过的人，对不起，我的信息是错误的。

我的 OnOpen 代码：

```
Private Sub Form_Open(Cancel as Integer)
   Me.RecordSource = Me.Name
End Sub 
```

它采用与查询名称相对应的报告名称，并将其作为记录源。（我以这种方式完成了大约 40 份报告，因此它依赖于名称来快速复制不同的项目）。

删除它使其使用 Access 2010 完美运行。不确定这是否是特定于我的设置的问题或什么，但是，此更改直接修复了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T13:34:17.117

这不是一个直接的解决方案，而是一个几乎可以肯定有效的解决方法。无需对报表应用过滤，而是通过将 where 子句作为参数传递来动态更改报表数据源。

要打开报告，请使用：

```
DoCmd.OpenReport rptName, acViewReport, , , acWindowNormal, whereClause 
```

请注意，`whereClause`字符串作为`OpenArgs`参数传递。

然后在报表VB中：

```
Private Sub Report_Open(Cancel As Integer)
On Error GoTo ReportOpenError

    If Not(IsNull(Me.OpenArgs)) Then
        Me.RecordSource = Replace(Me.RecordSource,";"," WHERE " & Me.OpenArgs & ";")
    End If

    Exit Sub

ReportOpenError:
    MsgBox "Unable to open the specified report"
    Cancel = 1
End Sub 
```

此解决方案假定报表`RecordSource`被定义为以分号结尾的 SQL 查询（不是查询名称）**，并且**记录源尚未包含任何`WHERE`,`GROUP BY`等子句。在这些情况下，从头开始重新定义查询可能更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-12T16:35:25.843

当报表被复制和重新使用时，也可能出现此问题。我有一份工作正常的报告，然后制作了一份副本，并且不再能够过滤它。

在某些情况下复制报告时，Access 中可能存在故障，导致它忽略过滤器。

解决方案：不要复制和重命名报表，而是尝试创建一个新报表，链接数据源，然后将字段复制回原位。如果您正在处理新报告，请尝试重新创建它。

# php - 如何在我的 cakephp 项目中使用二维码

> ID：12079742
> 
> 赞同：0
> 
> 时间：2012-08-22T19:04:07.563
> 
> 标签：php, cakephp, qr-code

我找到了有关如何使用 php [此处] [http://www.terragon.de/index.php?id=273](http://www.terragon.de/index.php?id=273)生成二维码的教程。我完成了教程，现在我想在我的 cakephp 项目中使用它，但我似乎无法让它工作。

我将名为 qr-code 的文件夹添加到 app/lib。在该文件夹中是另一个名为 php 的文件夹，其中包含 qr_img.php，其中包含基本的 php 代码。(app/Lib/qr-cpde/php/qr_img.php)

在本教程中，我创建了一个名为 index.php 的文件，其中包含以下代码：

```
<?php
    echo "<img src='qr_img.php?d=Cara-Drye' >";
?> 
```

在我的代码中，我将其替换为：

```
<?php
    echo "<img src='app/Lib/qr-code/php/qr_img.php?d=Cara-Drye' >";
?> 
```

但我只有那个小图像框，没有二维码。

这是我的控制器

```
<?php

App::import('Lib','qr-code.php.qr_img.php');

class QrCodesController extends AppController {
    //put your code here
    public $name = 'QrCodes';
    public function index(){

    }
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T02:33:23.947

如果你不介意使用谷歌，你可以使用 [https://github.com/dereuromark/cakephp-tools/blob/cake2/View/Helper/QrCodeHelper.php](https://github.com/dereuromark/cakephp-tools/blob/cake2/View/Helper/QrCodeHelper.php)

```
echo $this->QrCode->image($text); 
```

和其他像网址，短信，电话，...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T19:34:38.210

一旦我将源代码放入 webroot 中的 images 文件夹并将我的代码更改为：

```
<?php
    echo $this->Html->image('/img/qr-code/php/qr_img.php?d=Cara-Drye');
?> 
```

一切正常。cakephp 是内置架构，如果你想使用图像，它需要在图像文件夹中。

# javascript - 文本区域输入过滤器

> ID：12079746
> 
> 赞同：0
> 
> 时间：2012-08-22T19:04:19.540
> 
> 标签：javascript, jquery, html, filter

我有一个表格，我的客户可以在其中留下他们的反馈。提交表单后，我有一个查询，显示对我的网站的评论/评论。

有没有办法过滤掉诸如“cakjcnsakncaklcn”之类的胡言乱语并阻止它们在我的主站点上显示？

补充：另一个想法是不允许人们在拼写错误时提交他们的评论。是否有 js 验证或类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T19:16:08.113

这是否被提交到您可以控制的服务器？我不是 NLP 专家，我想有一种复杂的方法可以做到这一点，但我只会根据英语词典测试提交的每个单词，如果没有单词匹配则拒绝。

如果你不能在服务器上截取这个，你可以尝试使用[http://www.javascriptspellcheck.com/](http://www.javascriptspellcheck.com/)

# jquery - 如何用jquery压缩代码行？

> ID：12079753
> 
> 赞同：2
> 
> 时间：2012-08-22T19:04:56.403
> 
> 标签：jquery

我正在使用以下代码行。但这似乎是多余的，我很好奇是否有以下优化的替代方案......

```
if(mkey[65]){ //this is left! (a)
    var nextpos = $("#item").x()-player.speed;
    if(nextpos > 0){
        $("#item").x(nextpos);
    }
}
if(mkey[68]){ //this is right! (d)
    var nextpos = $("#item").x()+player.speed;
    if(nextpos < pg.width - 100){
        $("#item").x(nextpos);
    }
}
if(mkey[87]){ //this is up! (w)
    var nextpos = $("#item").y()-player.speed;
    if(nextpos > 0){
        $("#item").y(nextpos);
    }
}
if(mkey[83]){ //this is down! (s)
    var nextpos = $("#item").y()+player.speed;
    if(nextpos < pg.height - 30){
        $("#item").y(nextpos);
    }
} 
```

我考虑过使用jquery each 方法，但只花了我到目前为止，因为我不知道你是否可以将自定义JavaScript函数存储到数据对象中......

感谢您的任何建议！

**这是我尝试过的......（没有运气）**

```
$.each([
    {keypress: mkey[65], item:$("#item").x()-player.speed},
    {keypress: mkey[68], item:$("#item").x()+player.speed},
    {keypress: mkey[87], item:$("#item").y()-player.speed},
    {keypress: mkey[83], item:$("#item").y()+player.speed}
], function(i, obj) {

     if (obj.keypress) {
  if(obj.item > 0) { $("#item").x(obj.item);}
  }

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T19:30:05.330

在 JavaScript 中，函数是一个对象，所以这不是问题。问题是您是否会通过使用一行代码来保存任何代码行，即使您这样做了，它是否可维护。这是一个可能的解决方案：

```
$.each([
    { which: 65, fn: $('#item').x, plus: -player.speed, comparison: 'gt', what: 0 },
    { which: 68, fn: $('#item').x, plus: player.speed, comparison: 'lt', what: pg.width - 30),
    { which: 87, fn: $('#item').y, plus: -player.speed, comparison: 'gt', what: 0 },
    { which: 83, fn: $('#item').y, plus: player.speed, comparison: 'lt', what: pg.height - 30)
], function () {
    var o = this,
        w = mkey[o.which],
        nextpos = o.fn() + o.plus;
    if ((o.comparison === 'gt' && nextpos > o.what) || 
        (o.comparison === 'lt' && nextpos < o.what)) {
        o.fn(nextpos);
    }
}); 
```

我还没有测试过这个或任何东西（用你的代码提供一个[jsFiddle](http://jsfiddle.net)或[jsBin](http://jsbin.com/)，我可以），但希望你能看到我要去哪里。同样，不确定这是否真的有帮助，因为这段代码的可读性比原始代码要低得多。通过缩小，原始代码将比这段代码运行得更快。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T19:12:23.587

在键码上使用 switch 语句。

还有which，但我不喜欢它： [http ://api.jquery.com/event.which/](http://api.jquery.com/event.which/)

切换语句

```
switch($keycode){

case 43:
// Your code or function_name();
break;

case 99:
// Your code or function_name();
break;
} 
```

# android - 降低 sdk 版本是否有性能损失

> ID：12079755
> 
> 赞同：5
> 
> 时间：2012-08-22T19:05:00.270
> 
> 标签：android, sdk

我有一个已发布的 android 应用程序，其中 minSdk 版本设置为 8。从那时起，我意识到没有什么能阻止我将此要求降低到 3。

是否有性能影响或其他任何应该阻止我这样做的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T19:10:02.580

我不认为存在性能问题，降低最低版本仅意味着运行这些版本的设备将能够运行您的应用程序。

不过，我不会太担心将其从 8 减少到 3，因为 8 是 Android 2.2 及更高版本，截至今天已经覆盖了 95% 的市场。

您可以在此处查看正在使用的版本的细分：http: [//developer.android.com/about/dashboards/index.html](http://developer.android.com/about/dashboards/index.html)

# ipad - 嵌入的 HTML 5 视频存储在缓存中，但在 iPad 2 上不显示

> ID：12079756
> 
> 赞同：3
> 
> 时间：2012-08-22T19:05:00.603
> 
> 标签：ipad, html, caching, video, offline

我正在为 iPad 2 创建一个离线 webapp，其中包括视频内容。首次加载页面时，视频显示正常。但是当我重新加载页面时，视频的播放按钮坏了。

我已经进入设置 > Safari > 高级 > 网站数据，果然，视频在缓存中......所以问题似乎是它没有从缓存中检索。

我的 HTML 代码片段：

```
 <html manifest="cache.manifest">
    ...
        <video width="320" height="240" controls="controls">
            <source src="videos/movie.mp4" type="video/mp4" />
        </video> 
```

我的 cache.manifest 片段：

```
 CACHE MANIFEST
    # Updated 2012-08-22 19:49:00
    index.php
    ...
    videos/movie.mp4 
```

为了更好地衡量，我的 .htaccess 片段：

```
 AddType text/cache-manifest .manifest
    AddType video/mp4 .mp4 
```

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T20:13:28.000

不幸的是，这不是答案，但经过 20 小时的连续搜索和测试以解决完全相同的问题，我可以告诉你我现在在哪里。

这似乎是 ipad iOS 特有的问题，无论视频/声音文件的大小如何，它都不会在缓存的文件上绘制，尽管它们显然已被缓存并且在首次加载时它可以正常播放文件。

我尝试过制作最小的视频。我已经研究过在本机应用程序中进行包装，但出于交付原因，这不是一种选择。我尝试使用 javascript 在页面加载时强制重新加载视频 .src。我已经尝试了清单文件的所有可能变体。查看了我能忍受的所有 Apple 开发人员文档。

在阅读了数百篇从未真正完成的帖子之后，我认为除了让客户购买 Android 平板电脑之外，答案是使用本地数据库以二进制形式存储视频，以便在应用程序需要时进行检索。不幸的是，我仍在寻找这方面的例子，但还没有找到任何细节。文本/数字数据的本地保存不是问题。我只是不知道是否可以存储原始文件数据并将其检索到本地数据库中。

抱歉，这不是您所追求的，但希望它可以帮助您指出更少的方向。

更新，但进展不大。我决定使用 base64 编码的 mp4 并将文本粘贴到一个简单的 xml 文件中。我的应用程序将读取此 xml 视频数据并在视频标签 SRC 中使用。这大约是一个 4MB 的字符串。

```
SRC="data:video/mp4;base64,AAAAA /...../ AA" 
```

这在 Chrome 中运行良好。当我在 Ipad 上使用它时，优点是我没有将播放按钮划掉，它试图播放然后闪过一条消息，它无法完成此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T19:07:58.097

我在 iPad 上播放视频时遇到了一些相关的问题。这是在将驻留在 iBooks 文件中的 HTML 小部件中。我的问题是我无法让视频倒带，所以当你回到那个屏幕时，视频卡在最后（或者如果你返回得足够快，它仍然在播放。）

我想出的解决方法是加载不同的视频，然后重新加载我想播放的视频。这很丑陋，但它有效，它可能会为您的问题提供一种解决方法。

```
var sources = videoEl.getElementsByTagName('source');
sources[0].src = "assets/TeethMouth_Anim_Part3_03.mp4"; // Load some other video into the source, in my case, a video that I'm playing later in the presentation.
videoEl.load();
sources[0].src = "assets/TeethMouth_Anim_Part1_03.mp4"; // Then reload the video I want to play.
videoEl.load(); 
```

虽然现在我看到这个线程已经有一年了，所以它可能不再是问题了。不过，我想我会发布它。

# magento - Magento：为什么没有安装资源脚本？

> ID：12079764
> 
> 赞同：2
> 
> 时间：2012-08-22T19:05:35.420
> 
> 标签：magento, resources, attributes

我从[这里](http://inchoo.net/ecommerce/magento/how-to-add-new-custom-category-attribute-in-magento/)举了一个例子。

我的文件夹结构是：

```
- Avq
-  -  Import
-  -    -    ...
-  -    -    etc
-  -    -     -  config.xml
-  -    -    sql
-  -    -     -  avq_import_setup
-  -    -     -       -            mysql4-install-0.1.0.php 
```

我的 config.xml 是：

```
 <?xml version="1.0"?>
    <config>
        <modules>
            <Avq_Import>
                <version>1.0.0.1</version>
            </Avq_Import>
        </modules>

        <global>
            <resources>
                <avq_import_setup>
                    <setup>
                        <module>Avq_Import</module>
                        <class>Mage_Catalog_Model_Resource_Eav_Mysql4_Setup</class>
                    </setup>
                    <connection>
                        <use>core_setup</use>
                    </connection>
                </avq_import_setup>
                <avq_import_write>
                    <connection>
                        <use>core_write</use>
                    </connection>
                </avq_import_write>
                <avq_import_read>
                    <connection>
                        <use>core_read</use>
                    </connection>
                </avq_import_read>
            </resources>
        </global>
    </config> 
```

和里面的mysql4-install-0.1.0.php代码：

```
<?php
die("!");
$installer = $this;
//.... 
```

我什至不能得到“！”。错误可能在哪里？有什么方法可以调试 xml 配置？

PS：我关闭了缓存，打开了我的模块，并且**core_resource**表中没有 avq_import_setup。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T19:34:01.157

你需要两件事来执行你的设置，首先在一个与你的情况下节点名称相同的文件夹中是avq_import_setup，所以它是avq_import_setup/mysql4-install-xxxphp，看我把xxx放在文件名上，你必须改变它由您的模块版本决定，在您的情况下是 1.0.0.1，而您的文件是 0.1.0，这是第二件事。

最后，这仅执行 1 次，当 magento 在数据库中记录您的模块信息时，它的完成时间不超过 1 次。

所以，如果你尝试安装你的模块并且不运行设置文件，magento 可能已经在数据库上注册了你的模块，并且不再运行你的设置。在这种情况下，您必须转到“core_resource”表，找到您的模块并将其删除。现在您可以再次尝试安装。

# ios - 将应用内集成到 iOS 应用程序中的问题

> ID：12079766
> 
> 赞同：2
> 
> 时间：2012-08-22T19:05:40.723
> 
> 标签：ios, in-app-purchase, app-store-connect

是否需要提交应用才能实现应用内购买..

我们还没有将应用程序提交到应用程序商店。我们已经在我们的应用程序中添加了 In-App 的代码，我们实际上通过 Storekit 框架获取在 Itunes connect 中创建的产品，但是当我们运行应用程序时，我们收到消息为“无效产品标识符”...

当我们在 Google 上浏览问题并知道我们需要将应用程序提交到商店然后在应用程序内工作......这是真的吗？

请帮助我们..

期待第一时间的回复。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T19:24:23.200

不，您无需提交即可进行测试（您的应用很可能无法进入商店）。

如果您最近将产品添加到 iTunes Connect，然后立即开始测试，则可能无法正常工作，因为产品需要一些时间才能进入商店。给它 24-48 小时，然后再试一次，看看它是否能正确提取您的产品。

如果这仍然没有发生，您可能在获取产品的代码中有错误。

# css - 在 CSS 中为特定用例在网站上创建可用的自定义字体系列

> ID：12079767
> 
> 赞同：0
> 
> 时间：2012-08-22T19:05:42.303
> 
> 标签：css, formatting, html

如何创建可以在 <span></span> 标签内使用的自定义字体系列，并且只能在这些标签内使用，而不是在站点范围内使用？

我的最终目标是能够在站点的特定区域内使用它，而不是在其他任何地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T19:21:58.117

给 span 一个类并为其分配 font-family css 属性，即：

```
<span class="specialFont">Hello</span> 
```

然后在你的CSS中：

```
.specialFont {
    font-family: verdana;
 } 
```

根据您的评论，要使用自定义字体，您可以使用它，但请记住，并非所有浏览器都支持：

```
@font-face {
   font-family: CustomFont;
   src: URL('/fonts/myfont.otf'); 
}

.specialFont { 
     font-family: CustomFont;
} 
```

# ms-access - Microsoft Access 文件大小

> ID：12079769
> 
> 赞同：1
> 
> 时间：2012-08-22T19:05:49.977
> 
> 标签：ms-access, ms-access-2007, ms-access-2003

在处理不同的 Access 版本（2002、2003 和 2007）时，我注意到带有 filename.accdb 的给定 access 文件的文件大小远大于带有 *.mdb 文件类型的相同文件大小。

我通过另存为 Access 2000-2003 数据库的方式将文件从 2007 年（*.acccdb）转换为 2003 年（* .mdb）。

有人会解释为什么吗？

另一个问题，什么是首选选项 *.mdb 或 *.accdb 文件类型，以实现强大的数据库和安全的存储数据，因为知道由于每天都有数据存储，这两种文件类型的大小日复一日地变大.

提前致谢

关注

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T19:58:58.700

实际上，您是否尝试过将该应用程序从 mdb 转换为 accDB 格式？文件的大小不应以有意义的方式改变。（所以，请尝试这样的转换）。

事实上，据我所知，存储大小并没有什么不同。实际上，转换实际上与紧凑型 + 修复非常相似。由于未编译代码，整体生成的文件可能会小一些。（在此过程中将删除已编译的代码二进制部分）。

因此，作为一般规则，当使用 mdb 文件或 accDB 文件时，从 Access 2000 开始的文件大小不应在大小上有所不同。

当然，从 access 97 文件转换是另一回事。2000 年前的格式不支持国际字符集。并且 2000 年之前没有将文本数据存储为 uni-code（但使用 ASCII）。

因此，理论上从较旧的 97 格式升级到 2000 及更高版本实际上可以将您的存储需求增加两倍。这意味着保存在数据库中的每个文本字符都需要两个字符（这就是 uni-code 的工作方式）。

为了弥补这种相当大的数据存储需求增长，并且没有相应增加 2 gig 文件，然后在 Access 2000 及更高版本中引入了数据压缩技术。请勿将此压缩与紧凑 + 修复相混淆。

您可以逐列启用/禁用压缩。例如这里：

![在此处输入图像描述](../Images/3737b15141c7628204eea5147defbe6a.png)

因此，不管这个问题如何，与 accDB 文件大小格式相比，您不应该看到 2003 格式文件的文件大小有任何差异。存储要求是相同的，您看到差异的唯一原因是压缩 + 修复和删除了转换期间发生的额外“垃圾”。（实际上，您可以通过执行 C+R 以及反编译然后再执行另一个 C+R 来获得相同的文件大小而无需转换）。

因此，例如，尝试将缩减大小的 mdb 转换为 accDB——您会注意到文件没有增加——事实上，如前所述，在从该 mdb 转换为 accDB 的过程中，您经常会看到大小减小。因此，这又是由于此处转换过程中的垃圾删除所致——而不是您使用 mdb 文件而不是 accDB 文件，因此不是因为使用 mdb 与 accDB。

如前所述，上述规则的唯一例外是 2000 年前格式的 mdb。它们没有 uni-code，因此文本数据理论上应该使用新格式的双倍存储。然而，随着对这些文本列的压缩技术的引入，实际上您的商店需求并没有增加——事实上，在某些情况下，与没有压缩列的 2000 年之前相比，您的商店需求可能会有所减少。这样做的原因是文本数据确实倾向于很好地压缩（压缩）。

至于使用什么文件格式？我会使用给定版本的默认文件格式。所以，在你的情况下，我建议最好使用 accDB。

Albert D. Kalalal（访问 MVP）

加拿大艾伯塔省埃德蒙顿

# objective-c - UISwitch 有时不发送 UIControlEvents

> ID：12079770
> 
> 赞同：1
> 
> 时间：2012-08-22T19:05:52.460
> 
> 标签：objective-c, ios, ios5

我有一个模型对象，其中包含一个布尔标志。我想使用 UISwitch 显示标志的值。该值可以通过两种方式更改：

1.  首先由用户通过切换开关。我为此注册了 UIControlEventTouchUpInside。我还尝试了 UIControlEventValueChanged - 它具有完全相同的效果。
2.  其次是一些外部状态的变化。我使用计时器来检查该状态更改并相应地设置开关的 on 属性。

但是，在 timer 方法中设置开关的值会导致即使用户触摸了开关，有时也不会触发 touchUpInside 动作。

所以我面临以下问题：如果我在状态外部更改时在计时器中设置开关状态，我会丢失用户的一些状态更改。如果我不使用计时器，我会从用户那里获得所有状态更改。但是，我错过了所有外部状态更改。

现在我已经没有想法了。我怎样才能实现我想要的，在模型中获取两种类型的状态更改并在切换视图中正确反映它们？

这是一个显示问题的最小示例。我已经用一个简单的布尔标志替换了模型对象，并且在计时器中我根本不更改标志，我只是调用 setOn:animated:。我计算了操作方法的调用。像这样我可以很容易地找出错过了多少次触摸：

```
#import "BPAppDelegate.h"
#import "BPViewController.h"

@implementation BPAppDelegate {
    NSTimer *repeatingTimer;
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions: (NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    BPViewController *viewController = [[BPViewController alloc] init];
    self.window.rootViewController = viewController;
    [self.window makeKeyAndVisible];
    [self startTimer];
    return YES;
}

- (void) startTimer {
    repeatingTimer = [NSTimer scheduledTimerWithTimeInterval: 0.2
                                                      target: self.window.rootViewController
                                                    selector: @selector(timerFired:)
                                                    userInfo: nil
                                                     repeats: YES];
}

@end

#import "BPViewController.h"

@implementation BPViewController {
    UISwitch *uiSwitch;
    BOOL value;
    int count;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    value = true;
    uiSwitch = [[UISwitch alloc] init];
    uiSwitch.on = value;
    [uiSwitch addTarget:self action:@selector(touchUpInside:) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:uiSwitch];
}

- (void)touchUpInside: (UISwitch *)sender {
    count++;
    value = !value;
    NSLog(@"touchUpInside: value: %d, switch: %d, count: %d", value, sender.isOn, count);
}

- (void) timerFired: (NSTimer*) theTimer {
    NSLog(@"timerFired: value: %d, switch: %d, count: %d", value, uiSwitch.isOn, count);
    // set the value according to some external state. For the example just leave it.
    [uiSwitch setOn:value animated:false];
}

@end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T19:11:45.260

用于`UIControlEventValueChanged`确定何时切换开关（以编程方式或由用户）。不要使用`touchUpInside`. *当用户拖动*UISwitch时也`touchUpInside`不能很好地工作。

 *另外，不要复制已经由 UISwitch 维护的属性（例如你的 value 属性）（即“on”属性）......它是多余的，只会给你带来麻烦

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T19:11:08.280

编辑：以下代码完全符合您的要求，如果不完全符合您的要求。如果确保计时器更改和控件的触摸更改都接收到一个动作方法。该方法每次更改只会发送一次，希望这是您想要的。

注意切换到 UIControlEventValueChanged。

```
[sw addTarget:self action:@selector(touched:) forControlEvents:UIControlEventValueChanged];

- (void) timerFired: (NSTimer*) theTimer
{
    // set the value according to some external state. For the example just leave it.
    BOOL oldOn = sw.on;
    BOOL newOn = YES;

    [sw setOn:newOn];

    if(newOn != oldOn) {
        for(id target in [sw allTargets]) {
            for(NSString *action in [sw actionsForTarget:target forControlEvent:UIControlEventValueChanged]) {
                [target performSelector:NSSelectorFromString(action) withObject:self];
            }
        }
    }
} 
```

EDIT2：我[原始海报]刚刚在您的答案中看到了新代码并进行了尝试。我不确定它是否完全符合我的要求。但是，我不确定我是否理解正确。我不想在这两种情况下都做同样的事情。

1.  问：当用户触摸开关时，我想切换模型中的布尔值。我不一定需要以编程方式更改开关，因为无论如何它都是通过触摸它自动完成的。我想计算触摸以确保没有丢失。

A：嗯，那是不可能的。但是，您当然可以在操作方法中添加一个计数器，并查看您所做的点击是否等于该计数器。当用户点击开关时，“sender == theSwitch”。如果您以其他方式发送操作方法，则可以使用不同的发送者（以区分它们）。

1.  如果我在我的最小示例中获得计时器事件，我只想保留当前的布尔值。但是，我需要以编程方式设置开关状态，以便视图反映正确的模型状态。– Bernhard Pieber 3 分钟前

很好 - 但你一直说你想要调用 action 方法。这段代码就是这样做的。如果你说错了，并且你不想调用 action 方法，那么删除“if”块。

```
- (void)insureValueIs:(BOOL)val
{
    BOOL oldVal = sw.on;
    if(val != oldVal) {
        for(id target in [sw allTargets]) {
            for(NSString *action in [sw actionsForTarget:target forControlEvent:UIControlEventValueChanged]) {
                [target performSelector:NSSelectorFromString(action) withObject:self];
            }
        }
    }
} 
```

当然，我确实想实现同样的目标：模型状态正确反映在视图中。那有意义吗？

坦率地说，你没有很好地描述你想要什么，我一直在回复你的评论，但直到现在我仍然不完全清楚。我相信您在这里拥有所需的所有信息，可以做任何您想做的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T19:55:14.893

您的计时器如此频繁地触发它可能会阻止开关完成到替代值的动画转换，因此它永远不会发送 valueChanged 事件消息。您将值设置为 YES 每 0.2 秒，我认为这比用户点击开关时发生的动画持续时间要快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-28T15:11:53.583

我的原始代码在 iOS 7 中按预期工作。所以它似乎是 iOS 6 中的一个错误。*

# php - 如何正确使用变量范围，所以我不必使用“$_GET”

> ID：12079772
> 
> 赞同：0
> 
> 时间：2012-08-22T19:05:56.503
> 
> 标签：php, variables, scope

我什至不确定“可变范围”是否是正确的术语。我基本上提交了一个设置变量的表单。然后我根据其中一些有条件地重定向，然后我需要再次检索其中一些。目前，如果我将它们作为查询字符串传递并通过`$_GET`. 我会使用`$_POST`，但它不是下一页。

我有一个表单页面，重新加载的表单页面转发到登录页面。在着陆页上，它的`www.domain.com/landingpage?foo=bar`. 我想要一个更好的方法。

在表格上，我有

```
if(isset($_POST['foo'])){ $foo = $_POST['foo']; } else { $foo = ''; } 
```

因为我需要始终设置变量，即使有错误/空白字段。

然后我重定向到

```
http://www.domain.com/landing?foo=bar 
```

并检索`$_GET['foo']`.

在表单页面上，如何设置变量以供后面的 PHP 页面使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T19:36:35.887

您可能想要使用 PHP 会话 [顺便说一下，变量范围不是正确的词]。在每个文件的顶部调用`session_start()`，然后您可以在`$_SESSION`超全局中设置变量，这些变量将跨页面持续存在。

# c# - 在 Windows Phone 中存储和读取时间戳的好方法

> ID：12079773
> 
> 赞同：0
> 
> 时间：2012-08-22T19:06:04.520
> 
> 标签：c#, silverlight, windows-phone-7, timestamp, windows-phone

我正在开发一个 Windows Phone 应用程序。

只是想请教一些建议。这就是问题所在：
我想在某个地方存储一个时间并使用该时间来检查我是否需要内部文件更新。（如果我的文件在 60 天内没有更新，请更新它。像这样）

我不确定我是否可以直接在应用程序中访问注册表。解决问题的另一种可能方法是将时间戳保存到隔离存储中的文件中。但是我对如何以易于使用的格式保存它以及如何再次阅读它并没有太多的想法。

关于保存时间戳的任何建议？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T19:42:44.857

要保存，只需在将日期写入隔离存储时使用 .ToString() 即可。要将其恢复为日期，请将其作为字符串读出，然后使用 DateTime 类对其进行解析。

```
string inbounddate = OurHelperMethodReadStringFromIsolatedStorage();
DateTime newdate = DateTime.Parse( inbounddate ); 
```

下面是一个例子。m_Helper 是我拥有的一个实用程序类，用于将字符串读取和写入隔离存储。

```
 private void Button_GetTimeNow_Click(object sender, RoutedEventArgs e)
    {
        TextBlock_Now.Text = DateTime.Now.ToString();
    }

    private void Button_SaveTimeToISO_Click(object sender, RoutedEventArgs e)
    {
        m_Helper.WriteFile(TextBlock_Now.Text);
    }

    private void Button_GetTimeFromISO_Click(object sender, RoutedEventArgs e)
    {
        TextBlock_FromISO.Text = m_Helper.ReadFile();
        DateTime _loaded = DateTime.Parse(  TextBlock_FromISO.Text );
        TextBlock_Output.Text = _loaded.ToLongDateString();
    } 
```

# c# - WPF 改变方向 DoubleAnimation

> ID：12079777
> 
> 赞同：-2
> 
> 时间：2012-08-22T19:06:12.830
> 
> 标签：c#, .net, wpf

我在画布内有如下图像：

```
<Canvas x:Name="cnvMain"  ClipToBounds="True" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"  SnapsToDevicePixels="True">
    <Image x:Name="Image1"   Stretch="None" Canvas.Bottom="0"  Source="ImageGallery/Desert.jpg" ></Image>
</Canvas> 
```

对于上下移动图像，我使用了 DoubleAnimation，如下所示：

```
 DoubleAnimation _Animation;
    private Storyboard _StoryBoard;

    private void UserControl_Loaded(object sender, RoutedEventArgs e)
    {
        Canvas.SetZIndex(Image1, 1);

        _Animation = new DoubleAnimation();
        _Animation.From = -Image1.ActualHeight;
        _Animation.To = cnvMain.ActualHeight;
        _Animation.RepeatBehavior = RepeatBehavior.Forever;
        _Animation.Duration = new Duration(TimeSpan.Parse("0:0:10"));
        _Animation.FillBehavior = FillBehavior.Stop;
        Storyboard.SetTarget(_Animation, Image1);
        Storyboard.SetTargetProperty(_Animation, new PropertyPath(Canvas.BottomProperty));
        _StoryBoard = new Storyboard();
        _StoryBoard.Children.Add(_Animation);
        _StoryBoard.Begin();
        _StoryBoard.Pause();
    }
    public void Pause()
    {
        _StoryBoard.Pause();
    }
    public void Up()
    {
        _Animation.From = cnvMain.ActualHeight;
        _Animation.To = -Image1.ActualHeight;
        _StoryBoard.Resume();

    }
    public void Down()
    {
        _Animation.From = Image1.ActualHeight;
        _Animation.To = -cnvMain.ActualHeight;
        _StoryBoard.Resume();

    } 
```

使用 From 和 To 在 UserControl_Loaded 中初始化动画。我的问题是这个属性在 Down 和 Top 方法调用中没有改变（方法有效，但图像向上移动）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T17:00:59.637

我将其更改为喜欢以下，并且有效。

```
DoubleAnimation _Animation;
    private Storyboard _StoryBoard;

    private void UserControl_Loaded(object sender, RoutedEventArgs e)
    {
        LoadAnimaiton(false);
        _StoryBoard.Pause();
    }

    private void LoadAnimaiton(bool up)
    {
        _StoryBoard = new Storyboard();
        _Animation = new DoubleAnimation(100.0, new Duration(TimeSpan.Parse("0:0:10")));
        _Animation.From = cnvMain.ActualHeight;
        _Animation.To = -Image1.ActualHeight;
        _Animation.RepeatBehavior = RepeatBehavior.Forever;
        _Animation.FillBehavior = FillBehavior.Stop;
        Storyboard.SetTarget(_Animation, Image1);
        Storyboard.SetTargetProperty(_Animation, new PropertyPath(Canvas.BottomProperty));

        if (up)
        {
            _Animation.From = cnvMain.ActualHeight;
            _Animation.To = -cnvMain.ActualHeight;
        }
        else
        {
            _Animation.From = -cnvMain.ActualHeight;
            _Animation.To = cnvMain.ActualHeight;
        }

        _StoryBoard.Children.Add(_Animation);

        _StoryBoard.Begin();
    }
    public void Pause()
    {
        _StoryBoard.Pause();
    }
    public void Down()
    {
        LoadAnimaiton(true);
    }

    public void Up()
    {
        LoadAnimaiton(false);
    } 
```

# javascript - 如何在 jQuery 中创建 1 对 1 滑动轮播

> ID：12079778
> 
> 赞同：0
> 
> 时间：2012-08-22T19:06:15.760
> 
> 标签：javascript, jquery, mobile-website

我正在尝试自定义构建一个 1 对 1 运动的 jQuery 轮播。我希望它像[SwipeJS](http://swipejs.com) 一样工作，当您滑动手指时，轮播会移动。

不幸的是，我不能使用出色的 SwipeJS，因为这个项目需要对 SwipeJS 不允许的轮播进行深度定制。

我只是想知道是否有人可以指出我如何开始使用随着手指在屏幕上移动而移动的 iOS 轮播（在 jQuery 中）的正确方向。

更新：这是我的尝试[http://jsfiddle.net/atlchris/cTt6c/](http://jsfiddle.net/atlchris/cTt6c/)但它没有像我希望的那样工作。

更新2：我想我越来越近了：http: [//jsfiddle.net/atlchris/cTt6c/1/](http://jsfiddle.net/atlchris/cTt6c/1/)这效果更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T19:17:33.527

我想我已经弄清楚了：http: [//jsfiddle.net/atlchris/cTt6c/2/](http://jsfiddle.net/atlchris/cTt6c/2/)

通过 jQuery 进行 1 对 1 运动！

# ssh - 通过慢速连接通过 SFTP 上传到临时位置，然后移动到真实位置

> ID：12079781
> 
> 赞同：1
> 
> 时间：2012-08-22T19:06:52.037
> 
> 标签：ssh, ftp, sftp, winscp

我有一个问题，有时我需要在星巴克工作。

当我上传 PHP 文件时，连接速度很慢，所以如果用户在我上传文件时尝试访问 PHP 文件，他们当然会出现致命错误。

这对我繁忙的网站来说非常不方便。有没有一种方法可以在上传文件时将其上传到临时位置，然后服务器在完成后将其移动到真实位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:08:22.370

您可以让 WinSCP 将文件上传到临时文件，并在传输完成后自动重命名。

在首选项中，转到*传输 > 耐久性*选项卡，然后在*启用...传输到临时文件名*框中选择*所有文件。*

 *详情参考：
[https ://winscp.net/eng/docs/ui_pref_resume](https://winscp.net/eng/docs/ui_pref_resume)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T19:19:49.477

为什么不直接将文件上传到服务器上的临时文件夹并在服务器上执行命令以删除旧文件并移动新文件？它应该在服务器上以足够快的速度移动文件，以消除用户看到的任何打嗝，除非他们的时间恰到好处。*

# android - 在安卓应用中使用谷歌翻译库？

> ID：12079782
> 
> 赞同：2
> 
> 时间：2012-08-22T19:06:51.757
> 
> 标签：android, translate

我想制作一个安卓翻译应用程序我可以使用这个库“google.api.translate”吗？我读到谷歌翻译 api 已被弃用

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T21:11:15.460

它是一个网络服务，而不是一个图书馆。以前是免费的，现在是收费的。可能，您听说的是免费服务已被取消。您可能要考虑使用必应翻译 API，它是免费的。

# php - WordPress 循环（我认为），我需要第 5 个来做一些不同的事情

> ID：12079788
> 
> 赞同：0
> 
> 时间：2012-08-22T19:07:25.003
> 
> 标签：php, wordpress, loops

我不太了解 PHP，所以我希望当我问这个问题时我会展示足够的代码。我的主页有一部分将显示最新的 5 篇博客文章，因此我将其设置为：

```
<?php
function get_latest_post_html() {
    $content = "";
    query_posts('showposts=5');
    while (have_posts()){
        the_post();
        $content .= "<p class='title'><a href='" . get_permalink() . "'>" . get_the_title() . "</a></p>\n" .
                "<p class='excerpt'><a href='" . get_permalink() . "'><img src='" . wp_get_attachment_url( get_post_thumbnail_id($post->ID) ) . "' class='rt-image img-left wp-post-image' style='max-width:175px;'/></a>" . get_the_excerpt() . "</p><br/><hr/>";
    }
    wp_reset_query();

    return "<div class='latest-post'>\n$content\n</div>";
}

add_shortcode('get_latest_post', 'get_latest_post_html');
?> 
```

它可以很好地调用最后 5 个帖子，但我不想让它显示在`<hr/>`第 5 个帖子的底部。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T19:09:41.120

`while`在循环中设置一些逻辑以有条件地显示`<hr >`.

例如：

```
$i = 0;
while (have_posts()) {
  ++$i;
  the_post();

  // ...

  if ($i < 5) {
    $content .= '<hr />';
  }
} 
```

**注意：** WordPress 可能不会返回 5 个帖子，因此您应该考虑该路径。我也反对紧密循环中的字符串连接。重构您的代码并使用`echo`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T19:12:01.620

既然你只需要摆脱最后一个`<hr/>`.

尝试使用[substr()](http://php.net/manual/en/function.substr.php) 所以在你的情况下，在 while 循环结束后添加这个

`$content = substr($content, 0, -5)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T19:12:28.240

```
<?php

function get_latest_post_html() {
    $content = "";
    query_posts('showposts=5');
    $i = 0;
    while (have_posts()){
    i++;
        if(i < 5){
        the_post();
            $content .= "<p class='title'><a href='" . get_permalink() . "'>" . get_the_title() . "</a></p>\n" .
                    "<p class='excerpt'><a href='" . get_permalink() . "'><img src='" . wp_get_attachment_url( get_post_thumbnail_id($post->ID) ) . "' class='rt-image img-left wp-post-image' style='max-width:175px;'/></a>" . get_the_excerpt() . "</p><br/><hr/>";
        }
        else{
        $i = 0;
        //do something
        }
    }
    wp_reset_query();

    return "<div class='latest-post'>\n$content\n</div>";
}

add_shortcode('get_latest_post', 'get_latest_post_html');
?> 
```

# objective-c - 目标C：从数据库读取数据时断言失败

> ID：12079791
> 
> 赞同：0
> 
> 时间：2012-08-22T19:07:42.097
> 
> 标签：objective-c, database, sqlite, nsstring, assertion

我正在使用[这里](https://github.com/anthonyly/SQLiteManager)描述的函数来访问 sqlite 数据库。我有这个功能的问题：

> -(NSArray *)find:(NSString *)field from:(NSString *)table where:(NSString *)condition。

该函数适用于条件为 nil 且条件为没有任何格式或方法的字符串时；即当它是以下任何一种时效果很好

> NSArray *result = [[SQLiteManager singleton] find:@"field1,field2" from:@"tableName" where:nil];
> 
> NSArray *result = [[SQLiteManager singleton] find:@"field1,field2" from:@"tableName" where:@"field2=value"];

但是，我有一个应该从 UITextField 读取的条件。例如

> NSArray *result = [[SQLiteManager singleton] find:@"field1,field2" from:@"tableName" where:[NSString stringWithFormat:@"field3=%@",[textFieldName text]]];

不幸的是，当我尝试这个给我一个*断言失败*错误时，代码会中断。有什么理由吗？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T19:10:27.063

至少你可能想在你的`%@`. 像这样：

```
NSArray *result = [[SQLiteManager singleton] find:@"field1,field2"
 from:@"tableName" where:[NSString stringWithFormat:@"field3='%@'",
 [textFieldName text]]]; 
```

但除此之外，您可能还想转义字符串。

# c# - 从网络下载之前获取图像文件的大小

> ID：12079794
> 
> 赞同：15
> 
> 时间：2012-08-22T19:07:54.780
> 
> 标签：c#, .net

我正在使用控制台应用程序中的以下代码从 Web 下载图像文件。

```
WebClient client = new WebClient();
client.DownloadFile(string address_of_image_file,string filename); 
```

代码运行得非常好。

**我想知道是否有办法在下载之前获取此图像文件的大小。**

PS-实际上我已经编写了代码来制作一个在网站上移动下载图像文件的爬虫。所以我事先并不知道它的大小。我所拥有的只是从网页源中提取的文件的完整路径。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-22T19:11:54.353

这是一个简单的示例，如果您有不同扩展名（如 .GIF、.JPG 等）的文件，您可以尝试创建变量或将代码包装在 Switch Case 语句中

```
System.Net.WebClient client = new System.Net.WebClient();
client.OpenRead("http://someURL.com/Images/MyImage.jpg");
Int64 bytes_total= Convert.ToInt64(client.ResponseHeaders["Content-Length"])
MessageBox.Show(bytes_total.ToString() + " Bytes"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-22T19:11:43.603

如果 Web 服务为您提供[Content-Length](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.13) HTTP 标头，那么它将是图像文件的大小。但是，如果 Web 服务想要将数据“流式传输”给您（使用块编码），那么在整个文件下载之前您不会知道。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T19:12:30.067

您可以使用 HttpWebRequest 查询文件的 HEAD 方法并检查响应中的 Content-Length

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-06-02T19:49:06.767

您可以使用以下代码：

```
using System.Net;

public long GetFileSize(string url)
{
    long result = 0;

    WebRequest req = WebRequest.Create(url);
    req.Method = "HEAD";
    using (WebResponse resp = req.GetResponse())
    {
        if (long.TryParse(resp.Headers.Get("Content-Length"), out long contentLength))
        {
            result = contentLength;
        }
    }

    return result;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T19:11:58.630

你应该看看这个答案：[C# Get http:/…/File Size](https://stackoverflow.com/a/122984/1617130)在这里你的问题得到了充分的解释。它使用 HEAD HTTP 请求来检索文件大小，但您也可以在读取响应流之前在 GET 请求期间读取“Content-Length”标头。

# knockout.js - Chrome/Firefox/Safari 与 Internet Explorer 之间 Knockout.js 绑定的差异

> ID：12079796
> 
> 赞同：1
> 
> 时间：2012-08-22T19:08:04.060
> 
> 标签：knockout.js

我注意到 Knockout.js 可观察绑定在 Chrome/Firefox/Safari 与 Internet Explorer 9 中的工作方式之间存在差异。

我已经在 jsfiddle [http://jsfiddle.net/rniemeyer/LkqTU/](http://jsfiddle.net/rniemeyer/LkqTU/)和[http://knockoutjs.com/examples/helloWorld.html](http://knockoutjs.com/examples/helloWorld.html)的 Knockout.js 网站上尝试过这个。

在 Internet Explorer 9 中，我必须离开字段才能看到更改，但在 Chrome/Firefox/Safari 中，我只需按 Enter 即可查看更改。

这是它假设的方式还是某处存在错误？我希望它就像在 Chrome/Firefox/Safari 中一样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T19:15:50.563

对于在 IE 中键入时显示的计算值，就像在 Chrome / Safari / FF 中一样，您需要将 data-bind 的 valueUpdate 属性绑定到 afterkeydown，如下所示：

```
<div class='liveExample'>   
  <p>First name: <input data-bind="value: firstName, valueUpdate: 'afterkeydown'" /></p> 
  <p>Last name: <input data-bind="value: lastName, valueUpdate: 'afterkeydown'" /></p> 
  <h2>Hello, <span data-bind='text: fullName'> </span>!</h2>  
</div> 
```

# r - 控制在 r 中的 igraph 中的网络图中哪些边是可见的

> ID：12079798
> 
> 赞同：5
> 
> 时间：2012-08-22T19:08:26.550
> 
> 标签：r, colors, igraph, vertices, edges

我创建了以下图表`igraph`

```
set.seed(1410)
df<-data.frame(
"site.x"=c(rep("a",4),rep("b",4),rep("c",4),rep("d",4)),
"site.y"=c(rep(c("e","f","g","h"),4)),
"bond.strength"=sample(1:100,16, replace=TRUE))

library(igraph)
df<-graph.data.frame(df)
V(df)$names <- c("a","b","c","d","e","f","g","h")
layOUT<-data.frame(x=c(rep(1,4),rep(2,4)),y=c(4:1,4:1))
E(df)[ bond.strength < 101 ]$color <- "red"
E(df)[ bond.strength < 67 ]$color <- "yellow"
E(df)[ bond.strength < 34 ]$color <- "green"
V(df)$color <- "white"
l<-as.matrix(layOUT)
plot(df,layout=l,vertex.size=10,vertex.label=V(df)$names,
edge.arrow.size=0.01,vertex.label.color = "black") 
```

![在此处输入图像描述](../Images/f69454b4aa0d3b372f565780cadba4ba.png)

我想显示所有顶点/节点，但只显示bond.strength > 34 的边（即只有红色和黄色边）。我可以通过将 bond.strength < 34 设置为白色来控制它，但是在我的实际数据集上完成时它并不漂亮，因为白色边缘“切穿”了其他边缘，即

![在此处输入图像描述](../Images/f48f647a02d421ee1183870e1d810932.png)

是否有其他方法可以在显示所有顶点的同时简单地控制哪些边可见？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T19:34:33.483

我想知道如果您将线条的颜色设置为透明会发生什么，例如：

```
E(df)[ bond.strength < 34 ]$color <- "#FF000000" 
```

我用以下方法制作了那个颜色编号：

```
 hsv(1,1,1,alpha=0) 
```

或者，您可以进入并从边缘列表中省略它们。

# html - 不可拆卸的大底垫

> ID：12079800
> 
> 赞同：0
> 
> 时间：2012-08-22T19:08:36.263
> 
> 标签：html, css

文本在底部有一个很大的空间：http: [//jsfiddle.net/qHaFR/](http://jsfiddle.net/qHaFR/)

而且我无法删除它。

你能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T19:29:26.437

这是因为`line-height`实际上是那么大，以便每个字符都可以在那里显示。在某些语言中，空间已被充分利用。例如，如果您输入`&Aacute;&#260;`，则需要整个 260 像素。如果您对无法显示这些字符感到满意，则需要进行`line-height`相应更改并将其显示为一个块：

```
#foo
{
    background-color: yellow;
    font-size: 260px;
    border: 1px solid black;
    line-height: 200px;
    display: block; /* or inline-block */  
}​ 
```

如果您不同意将其视为一个块（然后它会获得 100% 的宽度，或者您需要自己设置它），请使用`display: inline-block;`. 此外，键入`&Aacute;&#260;`而不是`A`查看字母的顶部和底部切割。在这里，请参阅：http: [//jsfiddle.net/vmVcr/](http://jsfiddle.net/vmVcr/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T19:14:39.723

在这种情况下，包装器`<span>`需要是一个定义了宽度和高度的块元素。您还需要更改 line-height 以匹配容器的高度。

所以你的风格看起来像：

```
#foo {
   background-color:yellow;
   font-size:260px;
   border:1px solid black;
   width: 190px; /* if display: block; */
   line-height: 200px;
   display: block; /* or inline-block */
} 
```

只是为了澄清一下，您是否试图包装`A`一个元素，`<div>`或者`<h1>`您不需要声明它，`display: block`因为`div`and`h1`已经是阻塞的。

# jaxb - JAXB 解组没有注释的自定义实体

> ID：12079801
> 
> 赞同：4
> 
> 时间：2012-08-22T19:08:37.890
> 
> 标签：jaxb, jaxb2, jaxb2-basics

我们有一个需要解组的 xml 文件（转换为 Java 对象）。现在 Java 对象是第三方的，我无法对其进行注释以进行解组。关于如何在没有注释的情况下解组的任何想法。请在下面找到我的代码片段

```
JAXBContext context;
        try {
            context = JAXBContext.newInstance(Abc.class);
            Unmarshaller unMarshaller = context.createUnmarshaller();
            Abc abc= (Abc) unMarshaller.unmarshal(new FileInputStream("C:\\Documents and Settings\\sandeep.nair\\Desktop\\abc.xml"));
        } catch (JAXBException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }catch (Exception e){

        } 
```

我收到以下异常。一个无参数构造函数（我知道我可以通过为适配器添加注释来解决这个问题，但我想知道或查看一个示例片段以在没有注释的情况下处理它）

同样，我收到另一条关于接口无法由 JAXB 处理的消息。

com.sun.xml.bind.v2.runtime.IllegalAnnotationsException：5 个 IllegalAnnotationExceptions java.sql.Timestamp 没有无参数默认构造函数。此问题与以下位置有关：在 java.sql.Timestamp at public java.sql.Timestamp com.test.Abc.getSomeTimestamp() at com.riteaid.entities.customer.Customer com.test.Def 没有无参数默认构造函数。此问题与以下位置有关：在 com.test.Def...

java.sql.Date 没有无参数默认构造函数。此问题与以下位置有关：at java.sql.Date ... com.test.Ghi 是一个接口，而 JAXB 无法处理接口。此问题与以下位置有关： ... com.test.Ghi 没有无参数默认构造函数。此问题与以下位置有关：..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T19:39:13.743

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

JAXB 是按异常配置的，因此您只需在要覆盖默认映射行为的地方添加注释：

*   [http://blog.bdoughan.com/2012/07/jaxb-no-annotations-required.html](http://blog.bdoughan.com/2012/07/jaxb-no-annotations-required.html)

提供元数据的标准方式是通过注释。在无法注释的情况下，例如 3rd 方类，那么您可能会对 MOXy 的外部映射文档扩展感兴趣。

*   [http://blog.bdoughan.com/2010/12/extending-jaxb-representing-annotations.html](http://blog.bdoughan.com/2010/12/extending-jaxb-representing-annotations.html)
*   [http://blog.bdoughan.com/2012/04/extending-jaxb-representing-metadata-as.html](http://blog.bdoughan.com/2012/04/extending-jaxb-representing-metadata-as.html)

您可以使用 an`XmlAdapter`来处理`javax.sql.Date`和`javax.sql.Timestamp`类型：

*   [jaxb 解组时间戳](https://stackoverflow.com/questions/2519432/jaxb-unmarshal-timestamp/3181966#3181966)

# delphi - ParentBackground 如何在 IDE 生成的表单上工作？

> ID：12079805
> 
> 赞同：4
> 
> 时间：2012-08-22T19:08:38.943
> 
> 标签：delphi, tform

此代码适用于 VCL 表单应用程序中的 IDE 生成表单：

```
Self.ParentBackground := True; 
```

但为什么？`TForm`上级（ , `TCustomForm`, ）均未`TScrollingWinControl`公布受保护`ParentBackground`的`TWinControl`. 单元顶部的表单（fi 'TForm1'）的类型声明也没有。事实上，正如预期的那样，这

```
TForm(Self).ParentBackground := True; 
```

不编译（*“无法访问受保护的符号 TWinControl.ParentBackground”*）。与在运行时创建的任何表单相同。

**注意**：问题**不**在于如何设置属性（顺便说一句，还有其他属性，例如“Bevel [xxx]”），我想知道它是如何工作的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T19:23:11.183

```
Self.ParentBackground := True; 
```

编译是因为一个类可以访问它自己的受保护成员。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T19:22:44.117

但`TForm1(Self).ParentBackground`有效。不同的是类`TForm1`（`Self`所属的）是在同一个单元中声明的；那么您确实可以访问受保护的成员。

# cocos2d-iphone - CCPanZoomController + 可触摸/可点击精灵

> ID：12079807
> 
> 赞同：1
> 
> 时间：2012-08-22T19:08:49.340
> 
> 标签：cocos2d-iphone

我正在使用[CCPanZoomController](https://github.com/robertblackwood/CCPanZoomController)使我的“地图”（一个图像）可缩放和平移。在这张地图上，我希望有可点击/可触摸的精灵，当点击它时会改变精灵中的图像。

问题是当用户捏住屏幕（缩小/缩小）时，他们可能会触摸精灵，这会改变精灵的图像，这是我不想要的。

我有一个想法来解决这个问题，但由于我是 Cocos2d 的新手，所以我不知道如何实现它：我认为我可以检测到用户何时触摸屏幕/精灵，并且不移动他们的触摸（就像捏或平移一样）通过检测用户第一次触摸屏幕的时间（将初始触摸转换为坐标），然后当用户停止触摸屏幕（将其转换为坐标），并比较两者，以及如果它们没有变化（或变化很小），那么改变精灵的图像？

我该怎么做呢？非常感谢任何可以提供帮助的人！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T20:02:02.950

所以我自己在我的游戏中一直在使用 CCPanZoomController 并且遇到了和你类似的问题，但是有很多不同的方面，比如当他们触摸一个精灵时，我不想让背景随之移动，或者我想要当背景缩放时，精灵不会移动。所以我所做的是为我不想做出反应的层创建方法来“关闭”触摸，并在另一层中的操作完成后重新启用它们。

我在每一层中创建了以下方法来禁用它或启用它以用于我从不同的触摸事件调用的触摸。

```
// Public Method: Allows for disabling touch for this layer and re-enabling it
-(void)enableTouches:(BOOL)enable
{
    // Check if the bool value is to enable or disable touches
    if (enable) {
        // Call for the removal of all touch locations in array in the CCLayerPanZoom instance
        [_panZoomLayer removeTouchesFromArray];

        // Call the touch dispatcher and add the CCLayerPanZoom back as a delegate for touches
        [[CCTouchDispatcher sharedDispatcher] addStandardDelegate:_panZoomLayer priority:0];

        CCLOG(@"PanZoomWrapperLayer:enableTouches - LayerPanZoom touches enabled");

    } else {

        // Call the touch dispatcher to remove the CCLayerPanZoom as a delegate to disable touches
      [[CCTouchDispatcher sharedDispatcher] removeDelegate:_panZoomLayer];

      CCLOG(@"PanZoomWrapperLayer:enableTouches - LayerPanZoom touches disabled");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T13:29:49.213

我找到了解决这个问题的简单方法。但是它可能不适合您的需求！

1.  我将 CCMenu 类子类化并覆盖`-(void)ccTouchMoved:(UITouch *)touch withEvent:(UIEvent *)event`如下：

    > -(void) ccTouchMoved:(UITouch *)touch withEvent:(UIEvent *)event { [_selectedItem unselected]; _selectedItem = 无；}

2.  我已`touchSwallow`将该新菜单实例的属性设置为`NO`.

# c++ - 变量改变它的值

> ID：12079808
> 
> 赞同：0
> 
> 时间：2012-08-22T19:09:04.087
> 
> 标签：c++, class, opengl

我对变量有一个非常奇怪的问题。在 OPENGL 渲染循环中进行几次调用后，一个变量会`verticesSize`无任何原因地更改其值 ()，而第二个变量 (verticesSize2) 不会... . 我如何命名第一个变量并不重要，它总是改变它的值，所以它一定是内存问题，但我不知道是什么导致它。有任何想法吗？

cpp。文件

```
void CosmicBody::InitShape(unsigned int uiStacks, unsigned int uiSlices, float    fA,       float fB, float fC)
{
float tStep = (Pi) / (float)uiSlices;
float sStep = (Pi) / (float)uiStacks;

float SlicesCount=(Pi+0.0001)/tStep;
float StackCount=(2*Pi+0.0001)/sStep;
this->verticesSize=((int) (SlicesCount+1) * (int) (StackCount+1))*2;
    this->verticesSize2=((int) (SlicesCount+1) * (int) (StackCount+1))*2;
} 
```

**主文件**

```
#include ....
CosmicBody one;

void renderScene(void)
{

std::cout<<one.verticesSize<<endl;
std::cout<<one.verticesSize2<<endl;

fps.calculateFPS(clock.elapsedTime);

glutSwapBuffers();
} 
```

**EDIT** OK 我发现是哪一行导致这个函数函数的问题导致`sprintf`程序运行不正确。为什么另一个类的函数会导致这个？无效 FpsCalc::calculateFPS(unsigned int currentTime) {

```
frameCount++;
int timeInterval = currentTime - previousTime;

if(timeInterval > 1000)
{
    float fps = frameCount / (timeInterval / 1000.0f);
    previousTime = currentTime;
    frameCount = 0;
    sprintf(this->fps,"%f",fps); //this line makes mess 
} 
```

}

```
#ifndef FPSCALC_H
#define FPSCALC_H
class FpsCalc
{
private:
int frameCount;
float previousTime;

public:
FpsCalc();
void calculateFPS(unsigned int currentTime);
char fps[5];

~FpsCalc(){};
};
#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T19:59:27.967

`fps`缓冲区不够大，无法容纳结果输出，导致未定义的行为：

```
sprintf(this->fps,"%f",fps); 
```

我不确定默认精度，但在我的机器上：

```
float f = 1.1f; 
```

产生：

```
1.100000 
```

这是 9 个字符（7 个数字、句点和空终止符）。

您需要指定精度：

```
sprintf(this->fps, "%.2f", fps); 
```

或者因为这是 C++，所以使用`std::ostringstream`and`std::string`代替。

```
std::string fps;

...

float fps = frameCount / (timeInterval / 1000.0f);
std::ostringstream s;
s << fps;
this->fps = s.str(); 
```

# entity-framework - EF Code First - 它如何知道要更新哪些对象？

> ID：12079810
> 
> 赞同：1
> 
> 时间：2012-08-22T19:09:11.633
> 
> 标签：entity-framework

如标题所示，我有一个方法：

```
void method(MyDb db, Thread thread, Post post)
{
  thread.Title = "changed";
  db.SaveChanges();
} 
```

（当然线程项目在 MyDb 对象中）

它如何识别需要更新的项目？我没有指定任何类似`db.Update(thread)`或类似的东西，它知道在没有我帮助的情况下要更新什么。它下有哪些机制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T20:02:13.323

当您`Thread`从数据库加载实体时，它默认变为“附加”。这意味着 EF 在内部保留对您的实体的引用，并且当您从数据库加载实体时，它还会保留实体的原始值。

当您更新标题时，可能有两种情况：

*   您正在使用更改跟踪代理，并且 EF 已收到有关更改的通知，因此它现在知道您的实例已被修改，并在您调用时将这些更改应用于数据库`SaveChanges`
*   您没有使用更改跟踪代理，当您调用 SaveChanges 时，EF 会检查其内部维护的实体引用列表，并检查是否有任何实体具有与原始值不同的任何属性 - 所有此类实体及其修改后的属性在期间更新到数据库`SaveChanges`

[您可以在此处](http://blogs.msdn.com/b/adonet/archive/2009/06/10/poco-in-the-entity-framework-part-3-change-tracking-with-poco.aspx)阅读有关该过程的更多信息。

# postgresql - PostgreSQL：创建大量视图

> ID：12079813
> 
> 赞同：1
> 
> 时间：2012-08-22T19:09:15.917
> 
> 标签：postgresql, transactions, views

我正在目睹 Postgres 的一种奇怪行为。这就是我正在做的事情：

我尝试如下创建 10,000 个**临时视图**

```
psqlStatement.executeUpdate("CREATE OR REPLACE TEMP VIEW " + symbols.get(i) + " AS SELECT * from persons;"); 
```

创建大约 9000 个视图后，我开始收到错误“共享内存不足。提示：您可能需要增加 max_locks_per_transaction”

我接受了提示并将`postgresql.conf`文件中的值从 64（这是默认值）更改为 100。更改此值后，我无法启动 Postgres 服务器。如果我将值改回 64 或 65，服务器就会启动。

为了进一步调查这个问题，我没有创建 10,000 个视图，而是创建了 8,000 个视图，这很成功。我启动 Postgres 控制台并编写查询以显示所有视图，但我再次遇到相同的错误（共享内存不足。提示：您可能... **）**。

总而言之，我看到了 3 件奇怪的事情：

1）即使我制作了临时视图并且我的主要方法（我从中创建视图）优雅地退出，为什么视图仍然存在于数据库中？我做了

```
SELECT count(*) from pg_views
WHERE schemaname NOT IN('information_schema', 'pg_catalog'); 
```

它返回了 8,000。

`max_locks_per_transaction`2) 如果值高于 64，为什么 Postgres 服务器不启动（根据提示）？

3) 如何在不遇到“共享内存不足”错误的情况下制作大量视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T19:53:42.800

> 1）即使我制作了临时视图并且我的主要方法（我从中创建视图）优雅地退出，为什么视图仍然存在于数据库中？

*临时对象在会话*期间持续存在（不仅仅是事务）。您必须关闭会话或删除对象才能从系统目录中删除它们 - 从逻辑上讲。从物理上讲，一个死元组会留在后面，直到`VACUUM FULL`或重用......）。

甚至临时对象在（非临时）系统目录中也有条目。（这就是创建临时表/视图会触发磁盘写入的原因。）因此，只要拥有会话没有终止，查询就会从*任何*`SELECT count(*) from pg_views`会话中产生相同的数字。

# algorithm - 将二维数组映射到一维数组时的数组大小

> ID：12079814
> 
> 赞同：0
> 
> 时间：2012-08-22T19:09:16.253
> 
> 标签：algorithm

如果我有一个二维数组，则表示一维中每个元素的方法是`row_num * row_width + column`如果我想要 row_num 列的元素。但是我正在努力解决的是，如果我有一个 3x3 二维数组（仅作为示例），一维数组应该有多大。对于一维数组，3^3 = 9 不应该足够吗？但是对于元素 3,2，索引将是 3 * 3 + 2 = 11。或者大小应该是我想要处理的最大索引的大小 - 例如，如果我想处理来自的所有元素，则为 3 * 3 + 3 = 12一个 3x3 二维数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T19:12:29.113

您需要从零开始计数（零索引），其中行和列是 0、1、2。

那么元素“(3,2)”真的是“(2, 1)”，或者说2*3+1=7，最后的元素“(3,3)”真的是“(2,2)”，即是 2*3+2=8。这是一维数组中的最后一个元素，因为它们也是从 0 开始计数的，所以这 9 个元素是 0,1,2,3,4,5,6,7,8。

例如：

```
>>> for r in 0,1,2:
...     for c in 0,1,2:
...         print r, c, r*3+c
... 
0 0 0
0 1 1
0 2 2
1 0 3
1 1 4
1 2 5
2 0 6
2 1 7
2 2 8 
```

# iphone - “应用程序没有有效的签名”Xcode 4.3

> ID：12079817
> 
> 赞同：10
> 
> 时间：2012-08-22T19:09:28.263
> 
> 标签：iphone, objective-c, ios, xcode, xcode4.3

我今天遇到了最奇怪的错误。

> “应用程序没有有效的签名”

当我尝试在我的设备上从 Xcode 4.3 运行应用程序时出现此错误。此外，当我存档时，它会将其显示为通用存档而不是真正的应用程序。

当然，我删除了所有无效的配置文件，清理了我的派生数据，清理了我的目标，然后重新启动。没运气。

**编辑：**原来我的应用程序中有一个文件夹引用。我删除了对文件夹的所有引用并将它们分组，它起作用了！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-16T15:22:26.737

只是把它扔在那里，可能会在未来帮助某人（也对我未来的参考有好处）。

我有一个更大的项目，其中包含 2 个项目（一个 API 和在设备本身上运行并使用 API 的主项目）。

我通过清理两个项目然后重建它们解决了这个问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-25T07:53:04.423

哦……清理项目解决了我的问题……干杯:)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-07-17T23:13:51.503

这救了我： http: [//www.two-tails.com/2010/01/12/the-application-does-not-have-a-valid-signature/](http://www.two-tails.com/2010/01/12/the-application-does-not-have-a-valid-signature/)

基本上你不能有一个名为“资源”的文件夹引用！我改为“rsrc”和魔术。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-04-14T08:42:32.903

您可以在设备日志中获得更详细的错误消息，这对于调试此问题非常有价值。

在**XCode 7.3 中**：**窗口 -> 设备 -> 选择您的设备 -> 在底部**有一个包含详细信息的错误日志。

例如，在我的情况下，它输出如下内容：

```
Failed to install application at file:///var/mobile/Media/PublicStaging ... : Error Domain=LaunchServicesError Code=0 "(null)" UserInfo={Error=ApplicationVerificationFailed, ErrorDetail=-402620391,
ErrorDescription=Failed to verify code signature of
/private/var/mobile/Library/Caches/com.apple.mobile.installd.staging/temp.iKT2NH/extracted/XYZ.app
/Frameworks/Raygun4iOS.framework : 0xe8008019 (The application does not have a valid signature.)} 
```

所以在我的情况下，它是由我安装的 Raygun 框架引起的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-26T20:00:01.863

此外，请确保当您转到 Product > Scheme > Edit Scheme 时，Build Configuration 设置为 Running。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-15T17:53:41.540

原来我的应用程序中有一个文件夹引用。我删除了对文件夹的所有引用并将它们分组，它起作用了！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-26T05:51:10.403

我为此苦苦挣扎了几个小时，但似乎如果您在“嵌入式​​二进制文件”下列出了一个框架，并且通过快速桥接头导入了该框架，则会出现此错误。我正在使用 iOS 10 运行 XCode 8。我会尝试从 XCode 项目的常规设置下的嵌入式二进制选项卡中删除您的框架。希望这对将来的某些人有所帮助！

# c - 为什么套接字描述符得到-1？

> ID：12079822
> 
> 赞同：-1
> 
> 时间：2012-08-22T19:09:43.873
> 
> 标签：c, sockets, unix

我在将用户名和密码从客户端传递到服务器进行身份验证时遇到问题；

**服务器端功能**

```
 void Start_Server()
        {
                struct sockaddr_in serv;
                struct sockaddr_in cli;
                socklen_t client_len;
                //char username[10];
                char bufer[30]={0};
                char *buf="Connection Successful";
                char cPassword[20];

                pthread_t threadID;
                int nListenDesc;                                        // server socket descriptor
                int nConnectionDesc=-1;                                 // client socket descriptor
                int nRetvalue;                                          //storing return value of authentication        

                nListenDesc=socket(AF_INET,SOCK_STREAM,0);
                serv.sin_family=AF_INET;
                serv.sin_addr.s_addr=inet_addr(IP);                     // assigning ip address 
                serv.sin_port=htons(PORT);                              //assigning port address        
                if(nListenDesc==-1)
                        perror("socket descriptor not created");
                bind(nListenDesc,(struct sockaddr*)&serv,sizeof(serv)); //assigning address to socket
                if((system("mkdir /tmp/monitor/"))==-1)                 // creating directory
                        puts("directory not created");
                listen(nListenDesc,5);
                while(1)
                {   if((nConnectionDesc = accept(nListenDesc,(struct sockaddr*)&cli,&client_len))==-1)
                                perror("error in nConnectionDesc");
                        recv(nConnectionDesc,bufer,strlen(bufer),0);
                        puts(bufer);
                        sscanf(bufer,"%s %s",cUsername,cPassword);
                        printf("%s %s",cUsername,cPassword);
                        if((nRetvalue=authenticate(cUsername,cPassword,nConnectionDesc))==1)    // passing username and password for 
                        {                                                       // authentication
                                puts("user not authenticated ");
                                exit(0);
                        }

                        send(nConnectionDesc,buf,strlen(buf),0);
                        if (pthread_create(&threadID, NULL, &serverThread,(void *) nConnectionDesc) != 0) //creating thread
                        {
                                perror("Thread create error");
                                close(nConnectionDesc);
                                close(nListenDesc);
                                exit(1);
                        }
                        //pthread_detach(pthread_self());
                        printf("Parent ready for another connection\n");

                }

int authenticate(char cUser[20],char cPass[20],int nAsock)
{
        struct loginStruct sAuthent[10];        //creating object of loginStruct
        int nIndex=0;
        int nFiledesc;                          //file descriptor 

        strcpy(sAuthent[0].cUname,"aviral");    // passing value to     
        strcpy(sAuthent[0].cPaswd,"aviral");    // structure variables
        strcpy(sAuthent[1].cUname,"avinash");
        strcpy(sAuthent[1].cPaswd,"avinash");
        for(; nIndex<3;nIndex++)
        {
                if(strcmp(cUser,sAuthent[nIndex].cUname) ==0)   // authenticate username
                {
                        if(strcmp(cPass,sAuthent[nIndex].cPaswd)==0) //authenticate password
                        {
                                puts("cUser good");
                                char cPath[20]="/tmp/monitor/";
                                strcat(cPath,cUser);
                                puts(cPath);
                                nFiledesc=creat(cPath,S_IRWXU);         //creating user file  
                                close(nFiledesc);
                                return 0;
                        }

                }
                else
         {
                //      puts("User not Authenticates");

                }

        }       return 1;

} 
```

**客户端**

```
 void Start_Client()
    {
            struct sockaddr_in serv;
            int sock=-1;
            sock=socket(AF_INET,SOCK_STREAM,0);
            memset(&serv,0,sizeof(struct sockaddr_in));
            serv.sin_family=AF_INET;
            serv.sin_addr.s_addr=inet_addr(IP);
            serv.sin_port=htons(PORT);
            if(sock==-1)
                    perror("Socket not created");
            if((connect(sock, (struct sockaddr*)&serv,sizeof(serv)))!=0)

                    perror("connection not established");
            login(sock);
            transact_with_serv(sock);
    }
    int login()
    {
                    char carUser[20];
                    char carPass[20];
                    int sockfd,n;
                    char buff[20];
                    printf("Enter username:");
                    scanf("%s",carUser);
                    printf("Enter Password:");
                    scanf("%s",carPass);
                    sprintf(buff,"%s %s",carUser,carPass);
                    send(sockfd,buff,strlen(buff),0);
                    n=recv(sockfd,buff,sizeof(buff),0);
                    puts(buff);
                    return sockfd;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T19:37:09.907

我只是添加到 cnicutar 并尝试回复您的评论：

```
char bufer[30]={0};
....
recv(nConnectionDesc,bufer,strlen(bufer),0); 
```

第三个参数必须是缓冲区的大小，而不是内容的长度（受`'\0'`您设置的第一个参数的限制）。由于您对`bufer`,的初始化`strlen(bufer)`将返回 0，因此您将永远不会阅读任何内容。你应该通过`30`而不是`strlen(bufer)`. 甚至更好：`29`，因为您可能希望将最后一个字符设置为`'\0'`. 我建议你在这里使用一个常数值。

还有其他行具有相同/相似的错误。请注意，`sizeof(buff)`with`char buff[20]`将返回指针的大小。

**编辑：**

看来我有点幼稚了……还有很多错误要指出……让我再看一遍……

```
int sockfd,n;
...
send(sockfd,buff,strlen(buff),0); 
```

你是如何初始化你的`sockfd`？我不认为你可以用这个做任何事情......适当地初始化它！可能还有比这更多的错误..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T19:15:10.127

> ```
> nConnectionDesc = accept(nListenDesc,(struct sockaddr*)&cli,&client_len) 
> ```

您正在使用`client_len`而不初始化它。在调用之前`accept`，请尝试：

```
client_len = sizeof(cli); 
```

# macos - 运行此代码后 Mac 无法启动

> ID：12079824
> 
> 赞同：1
> 
> 时间：2012-08-22T19:09:56.930
> 
> 标签：macos, shell, terminal

我知道这有点离题，但是由于我找到了我在这里谈论的代码，所以我希望有人可以帮助我。

我正在处理 POSTGRES 错误并在此处阅读：[无法连接到本地 PostgreSQL](https://stackoverflow.com/questions/8465508/can-not-connect-to-local-postgresql)答案，来自 vvdpzz 的答案导致我在终端中运行该代码。在那之后，我的mac停止工作，从那以后它没有重新启动，直到苹果标志不断闪烁并切换到带有问号的文件夹。

我检查了 curl 执行的代码，如下所示：

```
 #!/bin/sh

BREW_POSTGRES_DIR=`brew info postgres | awk '{print $1"/bin"}' | grep "/postgresql/"`
LION_POSTGRES_DIR=`which postgres | xargs dirname`
LION_PSQL_DIR=`which psql | xargs dirname`

sudo mkdir -p $LION_POSTGRES_DIR/archive
sudo mkdir -p $LION_PSQL_DIR/archive

for i in `ls $BREW_POSTGRES_DIR`
do
    if [ -f $LION_POSTGRES_DIR/$i ] 
    then
        sudo mv $LION_POSTGRES_DIR/$i $LION_POSTGRES_DIR/archive/$i
        sudo ln -s $BREW_POSTGRES_DIR/$i $LION_POSTGRES_DIR/$i
    fi

    if [ -f $LION_PSQL_DIR/$i ] 
    then
        sudo mv $LION_PSQL_DIR/$i $LION_PSQL_DIR/archive/$i
        sudo ln -s $BREW_POSTGRES_DIR/$i $LION_PSQL_DIR/$i
    fi  
done 
```

发生了什么？我不是专家。我该如何解决这个问题。我尝试在启动时按 shift 键以安全模式启动，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T19:46:09.883

这是一个很好的例子，说明了为什么您不应该在不了解它们的作用的情况下运行脚本。我的猜测是其中一个或两个都是空的`LION_PSQL_DIR`，`LION_POSTGRES_DIR`脚本最终在你的根目录中移动了东西。您应该能够按照以下步骤恢复系统：

1.  通过将 OS X 安装光盘放入驱动器并在启动时按住`C`密钥来启动您的 OS X 安装光盘。
2.  从实用程序菜单中，选择终端
3.  运行命令`cd /Volumes`
4.  运行命令，该命令`ls`应显示与您的 Mac 硬盘驱动器名称相对应的条目
5.  运行命令`cd "<name of your hard drive>"`
6.  运行命令`ls`。如果问题是东西从驱动器的根目录移动，将会有一个`archive`条目，如果没有则停止，因为这不会解决您的问题。
7.  运行命令`cd archive`进入归档目录
8.  运行命令`mv * ..`将存档目录中的所有内容移回硬盘驱动器的根目录
9.  关闭终端
10.  从实用程序菜单运行磁盘实用程序并使用驱动器上的修复权限。
11.  重新启动您的计算机，希望它现在可以工作
12.  永远不要再运行这样的随机脚本。

第 10 步可能不是绝对必要的。我没有尝试自己执行这些步骤，但它们应该非常接近正确。如果您在此过程中遇到任何错误，请停止并发表评论，我将尝试找出如何继续。

# types - Coq 中是否有 (->) 的显式类型构造函数？

> ID：12079827
> 
> 赞同：1
> 
> 时间：2012-08-22T19:10:02.337
> 
> 标签：types, coq, partial-application

我正在尝试定义一个提供身份和组合的类。除了其他有用的实例（带有 nil 和连接的列表；与身份和组合的关系 ;-) ），我想要一个函数实例。

给定

```
Class Cat (C0 : Type) (C1 : C0 -> C0 -> Type) :=
  {   identity : forall a, C1 a a
  ;   compose : forall {a b c : C0}, C1 b c -> C1 a b -> C1 a c
  (*  snip: some laws  *)
  }. 
```

我希望能够定义类似的东西

```
Instance Cat (->) := { ... }. 
```

但是 Coq 中的操作符不是这样工作的。首先我假设`->`是一个符号，但`Locate "_ -> _".`声称这是一个`Unknown notation`. 使用`fun a b => a -> b`有点工作，但之后的类型看起来很有趣。

```
> Check (identity nat).
identity nat
     : (fun a b : Type => a -> b) nat nat 
```

（同样适用`Eval compute in`，似乎它并没有简化类型。）我更喜欢更具可读性的`identity nat : nat -> nat`. （目前，对于我正在做的事情，这些类型变得不可读。）

有没有办法得到“原始”`->`或至少说服 Coq 给我更好的类型？

* * *

旁注：我正在构建很多`Inductive`表示评估语义的 s，我的目标是将“普通”编程语言的子集映射到 Coq 上并返回，转移安全约束并发挥作用。我被迫用不同的构造函数一遍又一遍地证明同样的事情，并希望这能让我一次又一次地证明东西。我相信类别是抽象这一点的正确方法。如果我错了，我会在此处包含此注释，也许有更好的方法可以回避整个`->`问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T15:10:24.957

我只能回答部分问题。`->`不是 and 之类的符号`+`，`exists`它`{ ... | ... }`内置在解析器中，例如`forall`. 语法`a -> b`等价于`forall x:a, b`when `x`is not free in `b`（我不知道它是否在所有情况下都等价，可能有 where`x`不能出现的用法`b`，你必须使用`->`）。

原因是函数抽象和应用，以及执行它们的类型，是 Coq 的基础，它们不是从更原始的概念派生的。您不能直接使用`fun`、 应用程序`->`或`forall`，因为它们不是一流的对象。

话虽如此，类型类是一种专门处理应用程序的方法。我对它们不熟悉，所以我不知道是否有办法做你想做的事情。

# php - 从 php 页面获取信息到 div

> ID：12079832
> 
> 赞同：0
> 
> 时间：2012-08-22T19:10:17.750
> 
> 标签：php, javascript, jquery, ajax, load

我想使用 ajax 从 php 页面中检索信息，该页面将更新选择下拉菜单的“onchange”。( `<select>`)。我用jquery检查它是否改变了

```
$('#names').change(function() {
   //code to get the info into the div comes here
}) 
```

所有 id 喜欢做的就是处理页面`"check.php"`并将`"?v=valueOfNamesGoesHere"` 信息返回到`"output"`
我尝试过的 div 名称中

```
$('#names').change(function() {
$('#output').load('check.php?v=' + $('#names').val());
}); 
```

没有成功。我已经`"check.php"`用应该传递给它的信息检查了它本身。例如`"check.php?v=john"`，我得到了页面本身所需的信息。（当我直接访问 mysite.com/check.php?v=john 时）。

我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T19:14:59.380

采用

```
$('#names').find(":selected").text() 
```

而不是`$('#names').val()`因为它是一个下拉菜单..

# oracle - 带有空格的重复行：

> ID：12079839
> 
> 赞同：0
> 
> 时间：2012-08-22T19:10:37.610
> 
> 标签：oracle

我有一个数据集如下：

```
SELECT '  1234 ' ID,NULL TAG,' AB' CODE FROM DUAL
UNION ALL 
SELECT '453' ID,'GEN' TAG,'AB' CODE FROM DUAL
UNION ALL
SELECT '1234' ID,NULL TAG,' AB' CODE FROM DUAL) 
```

我正在尝试使用以下查询获取重复项。输出应该是第 1 行和第 3 行，但我只得到一行作为 1 或 3 的修剪输出。

```
SELECT TRIM(ID),TRIM(TAG),TRIM(CODE) FROM 
(SELECT '  1234 ' ID,NULL TAG,' AB' CODE FROM DUAL
UNION ALL 
SELECT '453' ID,'GEN' TAG,'AB' CODE FROM DUAL
UNION ALL
SELECT '1234' ID,NULL TAG,' AB' CODE FROM DUAL)
WHERE (TRIM(ID),TRIM(TAG),TRIM(CODE)) IN 
(
SELECT TRIM(ID),TRIM(TAG),TRIM(CODE) FROM
(SELECT '  1234 ' ID,NULL TAG,' AB' CODE FROM DUAL
UNION ALL 
SELECT '453' ID,'GEN' TAG,'AB' CODE FROM DUAL
UNION ALL
SELECT '1234' ID,NULL TAG,' AB' CODE FROM DUAL)
GROUP BY TRIM(ID),TRIM(TAG),TRIM(CODE)
HAVING COUNT(*) >1
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T19:16:05.053

我刚刚运行了它，它返回了第 1 行和第 3 行：

```
SELECT TRIM(ID),TRIM(TAG),TRIM(CODE) 
FROM 
(
    SELECT '  1234 ' ID,NULL TAG,' AB' CODE FROM DUAL
    UNION ALL 
    SELECT '453' ID,'GEN' TAG,'AB' CODE FROM DUAL
    UNION ALL
    SELECT '1234' ID,NULL TAG,' AB' CODE FROM DUAL
)
WHERE TRIM(ID) IN 
(
    SELECT TRIM(ID)
    FROM
    (
        SELECT '  1234 ' ID,NULL TAG,' AB' CODE FROM DUAL
        UNION ALL 
        SELECT '453' ID,'GEN' TAG,'AB' CODE FROM DUAL
        UNION ALL
        SELECT '1234' ID,NULL TAG,' AB' CODE FROM DUAL
    )
   GROUP BY TRIM(ID),TRIM(TAG),TRIM(CODE)
   HAVING COUNT(*) >1
) 
```

我将您更改`WHERE`为仅引用`TRIM(ID)`而不是所有 3 个值。

**编辑 #1**，部分问题是你正在比较`null`你`null`不能做的事情。因此，您可以`null`检查列，如果是`null`则替换它。我用它包装了`null`列，`nvl(null, 'na')`然后它有一个值可以比较：

```
SELECT TRIM(ID) id,TRIM(TAG) tag,TRIM(CODE) code 
FROM 
(
    SELECT '  1234 ' ID, nvl(null, 'na') TAG,' AB' CODE FROM DUAL
    UNION ALL 
    SELECT '453' ID,'GEN' TAG,'AB' CODE FROM DUAL
    UNION ALL
    SELECT '  1234 ' ID,nvl(null, 'na') TAG,' AB' CODE FROM DUAL
    UNION ALL 
    SELECT '  1234 ' ID,nvl(null, 'na') TAG,' AC' CODE FROM DUAL
)
WHERE (TRIM(ID),TRIM(TAG),TRIM(CODE)) IN 
(
    SELECT TRIM(ID),TRIM(TAG),TRIM(CODE) 
    FROM
    (
        SELECT '  1234 ' ID,nvl(null, 'na') TAG,' AB' CODE FROM DUAL
        UNION ALL 
        SELECT '453' ID,'GEN' TAG,'AB' CODE FROM DUAL
        UNION ALL
        SELECT '  1234 ' ID,nvl(null, 'na') TAG,' AB' CODE FROM DUAL
        UNION ALL 
        SELECT '  1234 ' ID,nvl(null, 'na') TAG,' AC' CODE FROM DUAL
    )
   GROUP BY TRIM(ID), TRIM(CODE), TRIM(TAG)
   HAVING COUNT(*) >1
) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/c7b0d/7)

# python - 箭袋图箭头纵横比

> ID：12079842
> 
> 赞同：11
> 
> 时间：2012-08-22T19:10:54.670
> 
> 标签：python, velocity, matplotlib

我对 Matplotlib 的 quiver plot 有一些问题。给定一个速度矢量场，我想在流线顶部绘制速度矢量。向量与预期的流函数不相切。

为了计算流函数，我使用了 Pankratov 博士的 Matlab 代码的 Python 翻译版本，该代码位于[http://www-pord.ucsd.edu/~matlab/stream.htm](http://www-pord.ucsd.edu/~matlab/stream.htm)（我的将很快在 GitHub 上可用）。

使用它的结果，我使用以下代码：

```
import numpy
import pylab

# Regular grid coordineates, velocity field and stream function
x, y = numpy.meshgrid(numpy.arange(0, 21), numpy.arange(0, 11))
u = numpy.array([[10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26,
        27, 28, 29, 30],
       [ 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25,
        26, 27, 28, 29],
       [ 8,  9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24,
        25, 26, 27, 28],
       [ 7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23,
        24, 25, 26, 27],
       [ 6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22,
        23, 24, 25, 26],
       [ 5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21,
        22, 23, 24, 25],
       [ 4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20,
        21, 22, 23, 24],
       [ 3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19,
        20, 21, 22, 23],
       [ 2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17, 18,
        19, 20, 21, 22],
       [ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,
        18, 19, 20, 21],
       [ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16,
        17, 18, 19, 20]])
v = numpy.array([[  0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,
         13,  14,  15,  16,  17,  18,  19,  20],
       [ -1,   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,
         12,  13,  14,  15,  16,  17,  18,  19],
       [ -2,  -1,   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,
         11,  12,  13,  14,  15,  16,  17,  18],
       [ -3,  -2,  -1,   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,
         10,  11,  12,  13,  14,  15,  16,  17],
       [ -4,  -3,  -2,  -1,   0,   1,   2,   3,   4,   5,   6,   7,   8,
          9,  10,  11,  12,  13,  14,  15,  16],
       [ -5,  -4,  -3,  -2,  -1,   0,   1,   2,   3,   4,   5,   6,   7,
          8,   9,  10,  11,  12,  13,  14,  15],
       [ -6,  -5,  -4,  -3,  -2,  -1,   0,   1,   2,   3,   4,   5,   6,
          7,   8,   9,  10,  11,  12,  13,  14],
       [ -7,  -6,  -5,  -4,  -3,  -2,  -1,   0,   1,   2,   3,   4,   5,
          6,   7,   8,   9,  10,  11,  12,  13],
       [ -8,  -7,  -6,  -5,  -4,  -3,  -2,  -1,   0,   1,   2,   3,   4,
          5,   6,   7,   8,   9,  10,  11,  12],
       [ -9,  -8,  -7,  -6,  -5,  -4,  -3,  -2,  -1,   0,   1,   2,   3,
          4,   5,   6,   7,   8,   9,  10,  11],
       [-10,  -9,  -8,  -7,  -6,  -5,  -4,  -3,  -2,  -1,   0,   1,   2,
          3,   4,   5,   6,   7,   8,   9,  10]])
psi = numpy.array([[   0\. ,    0.5,    2\. ,    4.5,    8\. ,   12.5,   18\. ,   24.5,
          32\. ,   40.5,   50\. ,   60.5,   72\. ,   84.5,   98\. ,  112.5,
         128\. ,  144.5,  162\. ,  180.5,  200\. ],
       [  -9.5,  -10\. ,   -9.5,   -8\. ,   -5.5,   -2\. ,    2.5,    8\. ,
          14.5,   22\. ,   30.5,   40\. ,   50.5,   62\. ,   74.5,   88\. ,
         102.5,  118\. ,  134.5,  152\. ,  170.5],
       [ -18\. ,  -19.5,  -20\. ,  -19.5,  -18\. ,  -15.5,  -12\. ,   -7.5,
          -2\. ,    4.5,   12\. ,   20.5,   30\. ,   40.5,   52\. ,   64.5,
          78\. ,   92.5,  108\. ,  124.5,  142\. ],
       [ -25.5,  -28\. ,  -29.5,  -30\. ,  -29.5,  -28\. ,  -25.5,  -22\. ,
         -17.5,  -12\. ,   -5.5,    2\. ,   10.5,   20\. ,   30.5,   42\. ,
          54.5,   68\. ,   82.5,   98\. ,  114.5],
       [ -32\. ,  -35.5,  -38\. ,  -39.5,  -40\. ,  -39.5,  -38\. ,  -35.5,
         -32\. ,  -27.5,  -22\. ,  -15.5,   -8\. ,    0.5,   10\. ,   20.5,
          32\. ,   44.5,   58\. ,   72.5,   88\. ],
       [ -37.5,  -42\. ,  -45.5,  -48\. ,  -49.5,  -50\. ,  -49.5,  -48\. ,
         -45.5,  -42\. ,  -37.5,  -32\. ,  -25.5,  -18\. ,   -9.5,    0\. ,
          10.5,   22\. ,   34.5,   48\. ,   62.5],
       [ -42\. ,  -47.5,  -52\. ,  -55.5,  -58\. ,  -59.5,  -60\. ,  -59.5,
         -58\. ,  -55.5,  -52\. ,  -47.5,  -42\. ,  -35.5,  -28\. ,  -19.5,
         -10\. ,    0.5,   12\. ,   24.5,   38\. ],
       [ -45.5,  -52\. ,  -57.5,  -62\. ,  -65.5,  -68\. ,  -69.5,  -70\. ,
         -69.5,  -68\. ,  -65.5,  -62\. ,  -57.5,  -52\. ,  -45.5,  -38\. ,
         -29.5,  -20\. ,   -9.5,    2\. ,   14.5],
       [ -48\. ,  -55.5,  -62\. ,  -67.5,  -72\. ,  -75.5,  -78\. ,  -79.5,
         -80\. ,  -79.5,  -78\. ,  -75.5,  -72\. ,  -67.5,  -62\. ,  -55.5,
         -48\. ,  -39.5,  -30\. ,  -19.5,   -8\. ],
       [ -49.5,  -58\. ,  -65.5,  -72\. ,  -77.5,  -82\. ,  -85.5,  -88\. ,
         -89.5,  -90\. ,  -89.5,  -88\. ,  -85.5,  -82\. ,  -77.5,  -72\. ,
         -65.5,  -58\. ,  -49.5,  -40\. ,  -29.5],
       [ -50\. ,  -59.5,  -68\. ,  -75.5,  -82\. ,  -87.5,  -92\. ,  -95.5,
         -98\. ,  -99.5, -100\. ,  -99.5,  -98\. ,  -95.5,  -92\. ,  -87.5,
         -82\. ,  -75.5,  -68\. ,  -59.5,  -50\. ]])

# The plots!
pylab.close('all')
pylab.ion()
pylab.figure(figsize=[8, 8])
pylab.contour(x, y, psi, 20, colors='k', linestyles='-', linewidth=1.0)
pylab.quiver(x, y, u, v, angles='uv', scale_units='xy', scale=10)

ax = pylab.axes()
ax.set_aspect(1.) 
```

产生以下结果来说明我的问题。

![任何速度场及其流函数 \Psi，具有意外纵横比的向量](../Images/9c6817a4bdb5039b7f1dcbdaa99f0786.png)

显然计算很好，但速度矢量并不像预期的那样与流函数相切。使用准确的保存值，Matlab 会生成一个箭袋图，它准确地显示了我想要的内容。在我的情况下，将纵横比设置为 1 会给我想要的结果，但会强制轴矩形具有特定的纵横比。

```
ax = pylab.axes()
ax.set_aspect(1.) 
```

我已经尝试过不同的参数，如“单位”、“角度”或“比例”，但均未成功。

有谁知道如何制作适合画布纵横比并且仍然与我的轮廓线相切的颤抖图，正如预期的那样？

我希望得到与此类似的结果（注意向量如何与流线相切）： ![使用 Matlab 的任何速度场及其流函数 \Psi，具有预期纵横比的向量](../Images/f6b8d4b540b4ef5f53e3dadb22fcbee4.png)

非常感谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-25T21:10:08.360

使用[_](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.quiver) _

```
pylab.quiver(x, y, u, v, angles='xy', scale_units='xy', scale=10) 
```

`angles='uv'` 通过 设置向量的角度，`atan2(u,v)`从到`angles='xy'`绘制向量`(x,y)``(x+u, y+v)`

# codeigniter - 如何在 codeigniter 中使用这个简单的 acl 库

> ID：12079843
> 
> 赞同：0
> 
> 时间：2012-08-22T19:10:55.837
> 
> 标签：codeigniter, authentication, authorization, codeigniter-2

我以前使用 cakephp，现在使用 codeigniter，但不幸的是没有任何身份验证或 ACL 内置库..经过更多搜索，我找到了一个很好的库，但我不知道如何使用它..它不是使用示例它..任何人都创建了控制器和模型作为示例...感谢您的帮助

```
<?php

(defined('BASEPATH')) OR exit('No direct script access allowed');

class acl {
    /* Actions::::
     * Create 1
     * Read 2
     * Update 4
     * Delete 8
     * The allowance is made by a sum of the actions allowed.
     * Ex.: user can read and update (2+4)=6 … so ill put 6 instead of 1 or 0.
     *
     * if(!$this->acl->hasPermission(‘entries_complete_access')) {
      echo “No no”;
      } else
     * echo “yeah”;
      }
     *
     *
     */

    var $perms = array(); //Array : Stores the permissions for the user
    var $userID; //Integer : Stores the ID of the current user
    var $userRoles = array(); //Array : Stores the roles of the current user
    var $ci;

    function __construct($config = array()) {
        $this->ci = &get_instance();
        $this->userID = floatval($this->ci->session->userdata('account_id'));
        $this->userRoles = $this->getUserRoles();
        $this->buildACL();
    }

    function buildACL() {
//first, get the rules for the user's role
        if (count($this->userRoles) > 0) {
            $this->perms = array_merge($this->perms, $this->getRolePerms($this->userRoles));
        }
//then, get the individual user permissions
        $this->perms = array_merge($this->perms, $this->getUserPerms($this->userID));
    }

    function getPermKeyFromID($permID) {
//$strSQL = “SELECT `permKey` FROM `”.DB_PREFIX.”permissions` WHERE `ID` = ” . floatval($permID) . ” LIMIT 1″;
        $this->ci->db->select('permKey');
        $this->ci->db->where('id', floatval($permID));
        $sql = $this->ci->db->get('perm_data', 1);
        $data = $sql->result();
        return $data[0]->permKey;
    }

    function getPermNameFromID($permID) {
//$strSQL = “SELECT `permName` FROM `”.DB_PREFIX.”permissions` WHERE `ID` = ” . floatval($permID) . ” LIMIT 1″;
        $this->ci->db->select('permName');
        $this->ci->db->where('id', floatval($permID));
        $sql = $this->ci->db->get('perm_data', 1);
        $data = $sql->result();
        return $data[0]->permName;
    }

    function getRoleNameFromID($roleID) {
//$strSQL = “SELECT `roleName` FROM `”.DB_PREFIX.”roles` WHERE `ID` = ” . floatval($roleID) . ” LIMIT 1″;
        $this->ci->db->select('roleName');
        $this->ci->db->where('id', floatval($roleID), 1);
        $sql = $this->ci->db->get('role_data');
        $data = $sql->result();
        return $data[0]->roleName;
    }

    function getUserRoles() {
//$strSQL = “SELECT * FROM `”.DB_PREFIX.”user_roles` WHERE `userID` = ” . floatval($this->userID) . ” ORDER BY `addDate` ASC”;

        $this->ci->db->where(array('userID' => floatval($this->userID)));
        $this->ci->db->order_by('addDate', 'asc');
        $sql = $this->ci->db->get('user_roles');
        $data = $sql->result();

        $resp = array();
        foreach ($data as $row) {

            $resp[] = $row->roleID;
        }
        return $resp;
    }

    function getAllRoles($format = 'ids') {
        $format = strtolower($format);
//$strSQL = “SELECT * FROM `”.DB_PREFIX.”roles` ORDER BY `roleName` ASC”;
        $this->ci->db->order_by('roleName', 'asc');
        $sql = $this->ci->db->get('role_data');
        $data = $sql->result();

        $resp = array();
        foreach ($data as $row) {
            if ($format == 'full') {
                $resp[] = array('id' => $row->ID, 'name' => $row->roleName);
            } else {
                $resp[] = $row->ID;
            }
        }
        return $resp;
    }

    function getAllPerms($format = 'ids') {
        $format = strtolower($format);
//$strSQL = “SELECT * FROM `”.DB_PREFIX.”permissions` ORDER BY `permKey` ASC”;

        $this->ci->db->order_by('permKey', 'asc');
        $sql = $this->ci->db->get('perm_data');
        $data = $sql->result();

        $resp = array();
        foreach ($data as $row) {
            if ($format == 'full') {
                $resp[$row->permKey] = array('id' => $row->ID, 'name' => $row->permName, 'key' => $row->permKey);
            } else {
                $resp[] = $row->ID;
            }
        }
        return $resp;
    }

    function getRolePerms($role) {
        if (is_array($role)) {
//$roleSQL = “SELECT * FROM `”.DB_PREFIX.”role_perms` WHERE `roleID` IN (” . implode(“,”,$role) . “) ORDER BY `ID` ASC”;
            $this->ci->db->where_in('roleID', $role);
        } else {
//$roleSQL = “SELECT * FROM `”.DB_PREFIX.”role_perms` WHERE `roleID` = ” . floatval($role) . ” ORDER BY `ID` ASC”;
            $this->ci->db->where(array('roleID' => floatval($role)));
        }
        $this->ci->db->order_by('id', 'asc');
        $sql = $this->ci->db->get('role_perms'); //$this->db->select($roleSQL);
        $data = $sql->result();
        $perms = array();
        foreach ($data as $row) {
            $pK = strtolower($this->getPermKeyFromID($row->permID));

            if ($pK == '') {
                continue;
            }
            /* if ($row->value == '1′) {
              $hP = true;
              } else {
              $hP = false;
              } */
            if ($row->value == '0') {
                $hP = false;
            } else {
                $hP = $row->value;
            }

            $perms[$pK] = array('perm' => $pK, '1inheritted' => true, 'value' => $hP, 'name' => $this->getPermNameFromID($row->permID), 'id' => $row->permID);
        }
        return $perms;
    }

    function getUserPerms($userID) {
//$strSQL = “SELECT * FROM `”.DB_PREFIX.”user_perms` WHERE `userID` = ” . floatval($userID) . ” ORDER BY `addDate` ASC”;

        $this->ci->db->where('userID', floatval($userID));
        $this->ci->db->order_by('addDate', 'asc');
        $sql = $this->ci->db->get('user_perms');
        $data = $sql->result();

        $perms = array();
        foreach ($data as $row) {
            $pK = strtolower($this->getPermKeyFromID($row->permID));
            if ($pK == '') {
                continue;
            }
            /* if ($row->value == '1′) {
              $hP = true;
              } else {
              $hP = false;
              } */
            if ($row->value == '0') {
                $hP = false;
            } else {
                $hP = $row->value;
            }

            $perms[$pK] = array('perm' => $pK, '2inheritted' => false, 'value' => $hP, 'name' => $this->getPermNameFromID($row->permID), 'id' => $row->permID);
        }
        return $perms;
    }

    function hasRole($roleID) {
        foreach ($this->userRoles as $k => $v) {
            if (floatval($v) === floatval($roleID)) {
                return true;
            }
        }
        return false;
    }

    function actionPerm($value, $wanted) {
        /* Actions::::
         * Create 1
         * Read, 2
         * Update, 4
         * Delete 8
         */
        $action['create'] = array('1', '3', '5', '9', '11', '13', '15'); //1
        $action['read'] = array('2', '3', '6', '10', '14', '15'); //2
        $action['update'] = array('4', '5', '6', '7', '12', '13', '14', '15'); //4
        $action['delete'] = array('8', '9', '10', '11', '12', '13', '14', '15'); //8
        $action['all'] = array('15');

        if (in_array($value, $action[$wanted], true)) {
            return true;
        } else {
            return false;
        }
    }

    function hasPermission($permKey, $action = 'all') {

        $permKey = strtolower($permKey);

        if (array_key_exists($permKey, $this->perms)) {
            if ($this->actionPerm($this->perms[$permKey]['value'], $action)) {

                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
        /* OLD METHOD
          if ($this->perms[$permKey]['value'] === '1′ || $this->perms[$permKey]['value'] === true)
          {
          return true;
          } else {
          return false;
          }
          } else {
          return false;
          }
         */
    }

} 
```

这是 codeigniter 的 url [示例 ACL 类](http://www.tastybytes.net/blog/simple-acl-class-for-codeigniter)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T20:17:10.793

我是来自 Tastybytes 的布赖恩。我最好的解决方案是逐步完成代码点火器 ACL 库所基于的教程。它是从基本 php 文件到 CI 库的 100% 直接端口。

[http://net.tutsplus.com/tutorials/php/a-better-login-system/](http://net.tutsplus.com/tutorials/php/a-better-login-system/)

并且可能查看我通过“安装”的页面的最底部以及其他内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T06:27:02.023

这很简单

首先将其加载到您的控制器中

```
$this->load->library('acl'); 
```

现在调用它的方法

```
$this->acl->buildACL(); 
```

编辑将这些用于菜单分配

```
$this->acl->perms = array('your values');
$this->acl->userID= 'user id';
$this->acl->userRoles = array('your values'); 
```

请注意，您应该有 db 表 userRoles 将在库初始化时调用 getUserRoles 方法，并且 $userRoles 参数将具有值。

# iphone - 对于在过去一个月内制作应用程序的任何人，多长时间

> ID：12079844
> 
> 赞同：-3
> 
> 时间：2012-08-22T19:10:59.270
> 
> 标签：iphone

您等了多长时间才能获得应用程序审核并在应用程序商店上架。我已经等了大约 11 天了，我还在等待审查。所以真的需要这么长时间吗。我在这里有点沮丧。无论如何，您最近需要多长时间才能获得应用程序的审核？另外，如果您的支持网站是 twitter 或 Facebook 帐户，可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T19:12:57.780

平均在 3 到 14 天之间。有些发布需要长达 20 天的时间，而且在极少数情况下，我听说应用程序需要几个月的时间才能发布。但好久没听说了。

我通常会经历一个星期或一个半星期。

# android - EXTRA_AVAILABLE_VOICES 始终只返回 eng-GBR。为什么？

> ID：12079850
> 
> 赞同：2
> 
> 时间：2012-08-22T19:11:12.310
> 
> 标签：android, text-to-speech

我正在使用以下代码段记录当前电话上所有可用（和不可用）的声音：

```
ArrayList<String> availableVoices = intent.getStringArrayListExtra(TextToSpeech.Engine.EXTRA_AVAILABLE_VOICES);
String availStr = "";
for (String lang : availableVoices)
    availStr += (lang + ", ");
Log.i(String.valueOf(availableVoices.size()) + " available langs: ", availStr);

ArrayList<String> unavailableVoices = intent.getStringArrayListExtra(TextToSpeech.Engine.EXTRA_UNAVAILABLE_VOICES);
String unavailStr = "";
for (String lang : unavailableVoices)
    unavailStr += (lang + ", ");            
Log.w(String.valueOf(unavailableVoices.size()) + " unavailable langs: ", unavailStr); 
```

记录的结果有些令人困惑，因为我非常确定我安装了多种语言，我什至可以***听到***TTS 在说话`eng-USA`，但日志显示：

> 1 个可用语言：**eng-GBR**，
> 
> 30 种不可用的语言：ara-XXX、ces-CZE、dan-DNK、deu-DEU、ell-GRC、eng-AUS、**eng-GBR**、eng-USA、spa-ESP、spa-MEX、fin-FIN、fra- CAN, fra-FRA, hun-HUN, ita-ITA, jpn-JPN, kor-KOR, nld-NLD, nor-NOR, pol-POL, por-BRA, por-PRT, rus-RUS, slk-SVK, swe-SWE, tur-TUR, zho-HKG, zho-CHN, zho-TWN, tha-THA,

为什么这种不一致的行为？（请注意，eng-GBR 出现在可用和不可用列表中......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T19:38:12.870

事实证明，就 Android 2.x 中的文本到语音转换而言，这是狂野的西部：每个安装的第 3 方 TTS 引擎都可以根据需要修改此`EXTRA_AVAILABLE_VOICES`函数的输出，**无论**是否选中/默认未选中或选中/未选中。

我刚刚尝试从手机中卸载所有 TTS 引擎，只留下硬编码的*Pico*，结果完全符合我的预期：

> 6 种可用声音：deu-DEU、eng-GBR、eng-USA、spa-ESP、fra-FRA、ita-ITA、
> 
> 0 个不可用的声音：

我不介意这个函数的输出动态引用当前选择的（即默认）TTS引擎，但事实是一旦安装了第3方TTS引擎，这个函数的输出没有[任何意义](https://groups.google.com/forum/?fromgroups=#!topic/android-platform/3Rjd8Gen4gk)，因为它忽略了任何设置。

另请注意，名称具有误导性：它是可用的**语言**，而不是声音！

我发布这个答案是希望它能帮助[某人](https://stackoverflow.com/q/10524980/636571)节省时间和痛苦地发现这个问题。

# perl - 使用 undef 条目引用 word 函数

> ID：12079855
> 
> 赞同：2
> 
> 时间：2012-08-22T19:11:21.553
> 
> 标签：perl

在 perl 中使用引号单词时，列表中是否可以有 undef 值？

```
my @ number_array = qw( 1 2 3 4 5 6 7 8 9 10 ) 
```

我想知道是否可以在该列表中添加一个 undef 值，以便它包含 11 个值而不是 10 个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T19:15:23.870

perl 中没有`null`，但您可以使用`undef`. 由于`qw`仅使用空格分隔的字符串显式操作，因此您必须在 之外指定它`qw`，但您可以轻松地在括号内编写几个列表：

```
my @number_array = (undef, qw( 1 2 3 4 5 6 7 8 9 10 ));
print scalar @number_array;

>11 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-22T19:28:28.077

```
qw(...) 
```

相当于

```
(split(' ', q(...), 0)) 
```

至于您的问题的答案，这取决于您所说的“空”是什么意思。

*   未定义？号`split`返回字符串。
*   空字符串？不`split`，不能返回带有这些操作数的那些。
*   零？是的。
*   U+0000？是的。

您将不得不通过另一种方式构建您的列表。例如，

```
my @array = (qw( 1 2 3 4 5 6 7 8 9 10 ), undef); 
```

甚至类似的

```
my @array = (1..10, undef); 
```

# android - 安卓 - SQLite

> ID：12079856
> 
> 赞同：0
> 
> 时间：2012-08-22T19:11:30.063
> 
> 标签：android, sqlite

我正在尝试构建一个将使用 SQLite 数据库的应用程序。我的问题是一旦创建了数据库，关闭应用程序后所有数据是否仍然存在，即：重新启动应用程序时数据库不会被覆盖？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:55:54.367

作为开发人员，您是唯一有权访问此数据库的人，因此只有您的代码才能更改此数据库的状态或内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T19:12:57.937

是的，数据将保留在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-28T07:08:27.733

是的，当您关闭应用程序时，数据将保留在您的应用程序中。当您运行应用程序时，数据库会在应用程序中创建。

但是，是的，如果用户卸载应用程序，那么用户将丢失应用程序。另一方面，如果您想在卸载应用程序时保存数据，那么最好在 SDCard 中创建数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-14T04:14:33.097

由于您的默认创建方法，数据将保留在那里。有状态码。您可以使用 SQLScout [http://www.idescout.com/](http://www.idescout.com/)来可视化表格并逐步观察其变化。

# javascript - JavaScript 正则表达式与精确字符串不匹配

> ID：12079859
> 
> 赞同：7
> 
> 时间：2012-08-22T19:11:41.690
> 
> 标签：javascript, regex, match, exact-match

在下面的示例中，输出为真。它`cookie`和它也匹配`cookie14214`我猜这是因为 cookie 在字符串中`cookie14214`。我如何在这场比赛中磨练才能获得`cookie`？

```
var patt1=new RegExp(/(biscuit|cookie)/i);
document.write(patt1.test("cookie14214")); 
```

这是最好的解决方案吗？

```
var patt1=new RegExp(/(^biscuit$|^cookie$)/i); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T19:15:58.950

答案取决于您对单词周围字符的允许程度`cookie`。如果单词要严格地单独出现在一行上，那么：

```
var patt1=new RegExp(/^(biscuit|cookie)$/i); 
```

如果您想允许符号（空格、`.`、`,`等），但不允许使用字母数字值，请尝试以下操作：

```
var patt1=new RegExp(/(?:^|[^\w])(biscuit|cookie)(?:[^\w]|$)/i); 
```

第二个正则表达式，解释：

```
(?:                 # non-matching group
    ^               # beginning-of-string
    | [^\w]         # OR, non-alphanumeric characters
)

(biscuit|cookie)    # match desired text/words

(?:                 # non-matching group
    [^\w]           # non-alphanumeric characters
    | $              # OR, end-of-string
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T19:14:38.800

是的，或者使用单词边界。请注意，这将匹配`great cookies`但不匹配`greatcookies`。

```
var patt1=new RegExp(/(\bbiscuit\b|\bcookie\b)/i); 
```

如果你想匹配确切的字符串`cookie`，那么你甚至不需要正则表达式，只需使用`==`, 因为`/^cookie$/i.test(s)`与`s.toLowerCase() == "cookie"`.

# android - Android 选项列表或自定义文本

> ID：12079860
> 
> 赞同：0
> 
> 时间：2012-08-22T19:11:42.413
> 
> 标签：android, listview, widget

我正在寻找一个提供以下功能的 Android 小部件：我想从用户那里获取文本，用户可以从选项列表中选择或输入他们自己的文本。

我很难为谷歌找到正确的关键字。自定义列表视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T19:15:41.623

如果您正在寻找从文本输入区域向下折叠的“选择列表”，那么`AutoCompleteTextView`就是您想要的小部件。

这是一个演示其使用[的示例项目。](https://github.com/commonsguy/cw-omnibus/tree/master/Selection/AutoComplete)您基本上可以通过`Adapter`将其放入列表中`setAdapter()`，并使用该`android:completionThreshold`属性指示用户必须输入多少个字符，然后 Android 才会尝试查找匹配项并显示它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T19:18:41.647

您寻找 AutoCompleteTextView：http: [//developer.android.com/reference/android/widget/AutoCompleteTextView.html](http://developer.android.com/reference/android/widget/AutoCompleteTextView.html)

# sql - AS ____不在“联合选择语句”中工作

> ID：12079864
> 
> 赞同：0
> 
> 时间：2012-08-22T19:11:51.923
> 
> 标签：sql, union

我有这个：

```
SELECT
COUNT(resurs_id) AS 'antalLikes'
FROM kopplaResursLikesUsers
WHERE resurs_id = 19
UNION
SELECT user_id AS 'gillarJagEller'
FROM kopplaResursLikesUsers
WHERE user_id = 5 
```

我认为输出将是：

```
antalLikes = 2
gillarJagEller = 5 
```

但我得到的结果是：

```
antalLikes[0] = 2
antalLikes[1] = 5 
```

任何想法为什么它完全忽略我的第二个“AS”声明？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T19:30:04.717

a 中的列名和列数据类型`UNION`由. 随后的 `select 语句中的任何列名都将被忽略。`select``UNION`

中的后续`select`语句必须具有与第一个语句`UNION`相同的列数。`select`此外，每个后续`select`语句中的每一列都必须具有与第一个语句中具有相同序号的列相同的数据类型，`select`或者可以隐式转换为该数据类型。

WRT to nullity，我相信通过检查每个组件语句`UNION`中同一列的无效性来设置最终结果集中每一列的无效性。`select`只有当该列在每个组件`select`语句中不可为空时，最终结果集中的列才不可为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T19:14:25.780

`UNION`确实是`UNION`for `COLUMS`，而不是 for`rows` 所以，它采用第一个选择，获取`column 'antalLikes'` 然后`union`按序数顺序进行。所以，它把你的价值观放在`'gillarJagEller' column`第一个

为了得到你想要的结果，我建议这样做：

```
select
(
SELECT
COUNT(resurs_id) 
FROM kopplaResursLikesUsers
WHERE resurs_id = 19) AS 'antalLikes',
(
 SELECT user_id 
 FROM kopplaResursLikesUsers
 WHERE user_id = 5) AS 'gillarJagEller' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T19:23:11.340

UNION 仅将第一个 select 语句中指定的名称作为列名，在本例中为“antalLikes”。

要得到这个：

antalLikes = 2 gillarJagEller = 5

你需要这样的东西：

```
SELECT
COUNT(resurs_id) AS 'antalLikes', 
(SELECT top 1 user_id
FROM kopplaResursLikesUsers
WHERE user_id = 5) AS 'gillarJagEller'
FROM kopplaResursLikesUsers
WHERE resurs_id = 19 
```

# objective-c - 设计数据加载和对象创建的正确方法

> ID：12079870
> 
> 赞同：0
> 
> 时间：2012-08-22T19:12:18.410
> 
> 标签：objective-c, ios, design-patterns

我正在开发一个适用于 iphone 的应用程序，我从 php 服务器加载 JSON，用库解析它并用这些数据创建一个对象。我的代码工作正常，但我这样做的方式对我来说似乎是错误的：

viewController 向用户显示加载视图。同时 ViewController 发出 get 请求并接收数据。VC 解析响应并获取字典 字典被发送到“创建者类”，该创建者类返回从字典创建的对象

我做了两次这个操作，但我认为这是一个糟糕的设计：

视图控制器应该执行 http 请求吗？不应该是“objectLoader”吗？创建类的主要方法做了一大堆 if/else 意大利面条，比如：

```
for(NSString key in dictionary){
    if(key isEqualToString "a key"){
         perform action
    }
    else if(key isEqualToString "an other key"){
         perform action
    }
    ....
} 
```

有什么办法解决这个问题吗？我正在考虑制作一个键/选择器字典来解决它并执行以下操作：

```
 for(NSString key in dictionary){
    [self performSelector:[selectors getObjectForKey:key]]
} 
```

但我不知道我是否可以在字典中引用选择器......

最后，我想到的另一个选择是使用类方法将解析后的字典发送到对象：`[ClassName createObjectWithDictionary:parsedDictionary]`. 这是一个好方法吗？

我知道这个问题有点模棱两可，但我对应该应用哪些设计模式以及谁负责这个故事中的内容有点迷茫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T19:25:06.007

最好的方法是使用 MVC 模式并让模型具有数据，该模型具有在其中推送和删除一些数据的方法以及在模型数据更改时通知的委托列表（派生自 UIViewController）。控制器（不是 UIViewController）是启动从服务器获取数据并处理结果的东西。所有的 UIViewController 都处理数据更改和用户交互。现在，编写一些处理请求例程并存储所有必要数据以在控制器中触发事件的 RequestController（是否单调，无关紧要）。您可以使用块或 NSNotificationCenter 来处理请求的完成。通过 RequestController 从请求中获取必要的数据后，您的 Controller 可以创建必要的解析器并将解析后的数据推送到模型中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T19:21:49.830

就个人而言，我不会让 ViewController 执行 HTTP 请求。我总是在我的应用程序中编写服务类，这些服务类执行低级别的工作并通过委托通知调用者（例如视图控制器）任何收到的结果。

所以这种情况下的控制流程是： -> ViewController 锁定屏幕并加载消息 -> 以自己作为委托调用服务 - 服务完成工作并接收答案 -> 处理答案并将结果传递给委托 -> ViewController 接受响应，删除加载消息并对响应执行任何必要的操作。

关于你的第二个问题：是的，可以从字典中动态选择一个选择器 - 例如通过将选择器的名称存储在字典中然后使用

```
SEL selector = selectorFromString(@"doWork"); 
```

创建正确的选择器来调用。

# c# - C#：Array.CreateInstance：无法将 [*] 类型的对象转换为 [] 类型

> ID：12079884
> 
> 赞同：12
> 
> 时间：2012-08-22T19:12:49.377
> 
> 标签：c#

我想通过调用在 c# 中创建一个非零下界一维数组

```
Array.CreateInstance(typeof(int), new int[] { length }, new int[] { lower }); 
```

返回数组的类型不是int[]，而是int[*]。谁能详细说明这是什么意思？我希望能够将此数组返回给调用者，例如，

```
int[] GetArray() { ... } 
```

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-22T19:27:03.383

是的，这是一个陷阱！

*向量*和一维数组之间存在差异。An`int[]`是一个**向量**。向量（如`int[]`）***必须***从 0 开始。否则，您必须调用它`Array`。例如：

```
// and yes, this is doing it the hard way, to show a point...
int[] arr1 = (int[]) Array.CreateInstance(typeof(int), length); 
```

或（注意这仍然是从零开始的）：

```
int[] arr2 = (int[]) Array.CreateInstance(typeof (int),
      new int[] {length}, new int[] {0}); 
```

如果您的数组不能基于 0，那么抱歉：您必须使用`Array`，而不是`int[]`：

```
Array arr3 = Array.CreateInstance(typeof(int),
      new int[] { length }, new int[] { lower }); 
```

更令人困惑的是，两者之间存在差异：

```
typeof(int).MakeArrayType() // a vector, aka int[]
typeof(int).MakeArrayType(1) // a 1-d array, **not** a vector, aka int[*] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T19:26:21.590

我找不到要验证的实际代码，但试验该语法似乎表明一个具有非零基数的一维数组。

这是我的结果：

```
0-Based 1-D Array :        "System.Int32[]"
Non-0-based 1-D Array:     "System.Int32[*]"
0-based 2-D Array :        "System.Int32[,]"
Non-0-based 2-D Array :    "System.Int32[,]" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T19:27:35.650

如果您只需要一维数组，那么这应该可以解决问题

```
Array.CreateInstance(typeof(int), length) 
```

当您指定 lowerBound 时，如果完全不同则返回类型

```
var simpleArrayType = typeof(int[]);

var arrayType = Array.CreateInstance(typeof(int), 10).GetType();
var arrayWithLowerSpecifiedType = Array.CreateInstance(typeof(int), 10, 5).GetType();

Console.WriteLine ( arrayType == simpleArrayType ); //True
Console.WriteLine ( arrayWithLowerSpecifiedType == simpleArrayType ); //False 
```

# jsf - WebSphere Application server 7.x 中的类加载器问题

> ID：12079885
> 
> 赞同：3
> 
> 时间：2012-08-22T19:12:55.760
> 
> 标签：jsf, jsf-2, websphere, xstream, websphere-7

> com.ibm.xml.xlxp2.api.stax.XMLOutputFactoryImpl 与 javax.xml.stream.XMLOutputFactory 不兼容
> 
> com.ibm.xml.xlxp2.api.stax.XMLOutputFactoryImpl 与 javax.xml.stream.XMLInputFactory 不兼容

从 APP(Web-inf/lib) 中删除了具有“XMLOutputFactory”和“XMLInputFactory”类的“jsr173_1.0_api.jar”、“stax-api-1.0-2.jar”以避免与服务器版本发生任何冲突。

还在 WebSphere 管理控制台中将 war 类加载器顺序更改为“最后一个父级”，并将策略更改为“应用程序的单个类加载器”。已进行此更改以优先考虑应用程序 jar`WebInf/lib`而非服务器 jar。

下面是堆栈跟踪。

```
java.lang.ClassCastException: com.ibm.xml.xlxp2.api.stax.XMLOutputFactoryImpl incompatible with javax.xml.stream.XMLOutputFactory
                                 javax.faces.FacesException: #{tBean.persist}: java.lang.ClassCastException: com.ibm.xml.xlxp2.api.stax.XMLOutputFactoryImpl incompatible with javax.xml.stream.XMLOutputFactory
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:118)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1655)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1595)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:131)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
    at com.testtech.myapp.admin.authentication.UrlAuthorization.doFilter(Unknown Source)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
    at com.testtech.myapp.admin.authentication.UrlAuthentication.doFilter(Unknown Source)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
    at com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:114)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:77)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:895)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:932)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:500)
    at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:178)
    at com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRequest(CacheServletWrapper.java:91)
    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:864)
    at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1583)
    at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:183)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:455)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewInformation(HttpInboundLink.java:384)
    at com.ibm.ws.http.channel.inbound.impl.HttpICLReadCallback.complete(HttpICLReadCallback.java:83)
    at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
    at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
    at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
    at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
    at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
    at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)
    at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1550)
Caused by: javax.faces.el.EvaluationException: java.lang.ClassCastException: com.ibm.xml.xlxp2.api.stax.XMLOutputFactoryImpl incompatible with javax.xml.stream.XMLOutputFactory
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:102)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    ... 42 more
Caused by: java.lang.ClassCastException: com.ibm.xml.xlxp2.api.stax.XMLOutputFactoryImpl incompatible with javax.xml.stream.XMLOutputFactory
    at javax.xml.stream.XMLOutputFactory.newInstance(XMLOutputFactory.java:98)
    at com.thoughtworks.xstream.io.xml.StaxDriver.getOutputFactory(StaxDriver.java:157)
    at com.thoughtworks.xstream.io.xml.StaxDriver.createWriter(StaxDriver.java:109)
    at com.thoughtworks.xstream.XStream.toXML(XStream.java:802)
    at com.thoughtworks.xstream.XStream.toXML(XStream.java:792)
    at com.testtech.UI.z.service.zService.createz(Unknown Source)
    at com.testtech.UI.z.web.zBean.persist(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
    at java.lang.reflect.Method.invoke(Method.java:600)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:234)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:297)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    ... 43 more 
```

JSF2.1.2
Spring 3.1.0
Prettyfaces-jsf2-3.3.2
Primefaces 3.2
WebSphere Application Server 7.0.0.9

> [ibm 页面](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r0/index.jsp?topic=%2Fcom.ibm.websphere.express.doc%2Finfo%2Fexp%2Fae%2Fttrb_classload_viewer.html)
> 在对类加载问题进行故障排除时，您可能需要覆盖对父类加载器可见的类。要使用特定于应用程序的类来覆盖此类类，请将类加载器模式设置为 Parent last 在包含其类路径中的应用程序类的类加载器上。应用程序可以覆盖对父类加载器可见的类，但如果混合使用覆盖类和非覆盖类，这样做可能会导致 ClassCastException 或 UnsatisfiedLinkError。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T20:58:21.547

您正在使用第三方 JSF 实现。作为第一步，我建议您检查您是否配置正确。这是[配置 JavaServer Faces 实现](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.nd.multiplatform.doc/info/ae/ae/tweb_jsf.html)的信息中心链接。

基本上你必须

*   创建一个独立的共享库
*   将您的 JSF 库及其依赖项放入其中
*   将共享库与您的模块相关联
*   将应用程序类加载器策略设置为 PARENTLAST

# iphone - Push Pop Press 风格 滚动

> ID：12079888
> 
> 赞同：1
> 
> 时间：2012-08-22T19:13:05.273
> 
> 标签：iphone, objective-c, ipad, uiscrollview, scroll

我正在开发一个需要在 Push Pop Press 的 Our Choice iPad 应用程序中实现滚动的应用程序。有没有人实现过这样的嵌套滚动？

更新：

有两个滚动视图，一个在顶部带有分页，另一个在底部。顶部指定章节，底部对应章节中的页面。

因此，当您滑动到顶部滚动条的下一页时，底部滚动条会相应地移动以显示页面。您可以滚动底部滚动视图以查看其上的页面。此外，当您位于底部滚动视图的最后几页并尝试滚动时，它会更改顶部滚动视图的页面并更新底部滚动视图。

这是该应用程序的演示视频

[http://vimeo.com/22872218](http://vimeo.com/22872218)

# java - 编程和实现自定义拨号器 UI

> ID：12079890
> 
> 赞同：2
> 
> 时间：2012-08-22T19:13:19.293
> 
> 标签：java, android, android-layout, android-intent, android-widget

这里的所有其他问题都是关于 ACTION_CALL 或 ACTION_DIAL 或这些主题的。我明白了。我需要一个意图。但是你如何实现你的自定义拨号器呢？我已经搜索和搜索，但找不到有关此主题的任何内容。我已经设计好了一切，准备好了，但没有关于如何将它们组合在一起。

我认为这就像向 layout/activity_main.java 添加一些元素和样式一样简单，但事实并非如此。到目前为止，简单的测试刚刚使应用程序在加载时崩溃。喜欢：

```
<TextView
    android:id="@+id/textView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:text="@string/title_two"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<EditText
    android:id="@+id/editText1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:inputType="phone"
    android:maxLength="11" >
    <requestFocus />
</EditText>

<Button
    android:id="@+id/one"
    android:text="1" />
<Button
    android:id="@+id/two"
    android:text="2" />
<Button
    android:id="@+id/three"
    android:text="3" />
<Button
    android:id="@+id/four"
    android:text="4" />
<Button
    android:id="@+id/five"
    android:text="5" />
<Button
    android:id="@+id/six"
    android:text="6" />
<Button
    android:id="@+id/seven"
    android:text="7" />
<Button
    android:id="@+id/eight"
    android:text="8" />
<Button
    android:id="@+id/nine"
    android:text="9" />
<Button
    android:id="@+id/star"
    android:text="*" />
<Button
    android:id="@+id/zero"
    android:text="0" />
<Button
    android:id="@+id/pound"
    android:text="#" />
<Button
    android:id="@+id/callButton"
    android:text="Call" />
<Button
    android:id="@+id/contacts"
    android:text="Con" />
<Button
    android:id="@+id/del"
    android:text="Del" /> 
```

我确信这只是我遇到的一些简单的问题，但我什至无法添加任何按钮而不会使所有内容崩溃。然后在 src/MainActivity.java 中：

```
public class MainActivity extends Activity {
    Button dialBtn;
    EditText numTxt;

@Override
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        dialBtn = (Button) findViewById(R.id.button1);
        numTxt = (EditText) findViewById(R.id.editText1);
        dialBtn.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                try {
                    if (numTxt != null && (numTxt.getText().length()==10 ||numTxt.getText().length()==11)) {
                        startActivity(new Intent(Intent.ACTION_CALL, Uri.parse("tel: 8880000000" + numTxt.getText())));
                    }else if(numTxt != null && numTxt.getText().length()==0){
                        Toast.makeText(getApplicationContext(), "You must enter a number to call", Toast.LENGTH_SHORT).show();
                    }else if(numTxt != null && numTxt.getText().length()<10){
                        Toast.makeText(getApplicationContext(), "Please check your number and try again", Toast.LENGTH_SHORT).show();
                    }
                } catch (Exception e) {
                    Log.e("DialerActivity", "error: " + e.getMessage(), e);
                }
            }
        });
    }
} 
```

这里唯一的目标是向用户展示一个拨号器。他们输入他们的号码，他们可以像普通拨号器一样在屏幕上看到它，然后它为服务调用硬编码的访问号码，然后在 eventListener 变为应答时传递他们拨打的号码。

我承认我是新手，所以有几个明显的错误，我知道，我太新了，看不到它们。我认为这将是你可以用 Android 做的最简单的事情之一，因为那里有一百万个客户拨号器。我并不想做任何花哨的事情，您必须使用应用程序才能使用该服务，即它不会在后台徘徊，广播接收器试图拦截您的拨出电话并查看您是否要使用该服务。只是一个简单的拨号器应用程序。我哪里错了？其中一些代码是直接从书籍、在线教程中复制的，只是试图让它工作，但直接复制和粘贴我无法工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T19:30:32.187

如果这是您的布局的实际内容，那么有几个问题。

1.  必须是 .xml 文件。
2.  必须有根元素（即，您必须以特定类型的布局布局您的按钮 - 线性、相对等）这是开始的地方：http: [//developer.android.com/guide/topics/ui/declaring-布局.html](http://developer.android.com/guide/topics/ui/declaring-layout.html)
3.  布局 xml 中的每个元素都必须有两个属性：android:layout_width 和 android:layout_height
4.  您必须将 View.OnClickListener 附加到每个按钮。
5.  您将不得不以特定方式布置按钮。例如，使用 3 线性布局来承载 3 行数字按钮，包含在您的主布局中。

看起来您才刚刚开始，所以我建议您在线查看一些基本示例，以构建一个简单的 android 应用程序。

# jquery - jQuery 元标记

> ID：12079891
> 
> 赞同：0
> 
> 时间：2012-08-22T19:13:20.377
> 
> 标签：jquery, meta-tags

Jquery 中有没有办法读取元标记过期和重定向。因此，如果页面已过期而不是将其重定向到其他 url，否则将在同一页面中。谢谢

# protocol-buffers - Windows C++ .Net 下的协议缓冲区

> ID：12079894
> 
> 赞同：2
> 
> 时间：2012-08-22T19:13:22.910
> 
> 标签：protocol-buffers, protobuf-net

我已经让谷歌协议缓冲区与 Linux 作为服务器一起使用，而 Windows 下的 C#.Net 作为客户端。但是，我看不到生成 C++.net 的方法。有人可以指出我该怎么做吗？

谢谢。

伊万

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T19:22:13.950

我不知道完整的 C++ .NET 实现，也没有在[3rd party add-ons](http://code.google.com/p/protobuf/wiki/ThirdPartyAddOns)中列出，所以我认为您有几个选择：

*   使用**非托管**C++ 实现（可能是 google 版本），并手动映射非托管和托管类型
*   使用其中一种 C# 实现（protobuf-net 或 protobuf-csharp-port 将是我的偏好，具体取决于您是否想要惯用的 .NET 与惯用的 protobuf），并将其编译为 C# 库，然后简单地从您那里引用 C# 库C++ .NET 项目
*   为您选择的实现编写（并且最好是贡献）一个 C++ .NET 转换器（因为您已经标记了 protobuf-net，我将观察到这意味着为 protobuf-net 编写一个 xslt 文件）

如果您想要最实用的 C++ 选项，我会选择第一个。如果您想要最实用的 .NET 选项，我会选择第二个。如果您*需要*一个可以包含在现有项目中的适当 C++ .NET 文件，我会选择第三个。

# ios - 将未完成的 iOS 应用程序提交到 Apple Store 以从 Apple 获得一些初步反馈是否有意义？

> ID：12079895
> 
> 赞同：4
> 
> 时间：2012-08-22T19:13:37.783
> 
> 标签：ios, app-store, appstore-approval

我正在开发一个 iOS 应用程序，我不确定我所做的一些事情是否会得到 Apple 的批准。有时拒绝的原因很难预测，我想早点知道是否有问题。

将一个未完成的应用程序提交到 Apple Store 并在未来几个月发布日期只是为了从 Apple 那里获得一些有价值的反馈是否有意义？我很确定他们会拒绝这样的应用程序，因为他们不允许将 beta 版本提交到 Apple Store。但是，他们是否会向我提供一些有价值的反馈，即应用程序或实施的某些部分需要更改才能在应用程序完成后获得批准？或者，他们会因为它还没有完成而拒绝它并且不会提供关于已经实现的部分的任何反馈吗？

谢谢， 迈克尔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T19:18:04.937

棘手。根据我的经验，如果他们拒绝它，他们会因为他们发现的第一个问题而拒绝它。他们不会给你一个理由清单。一旦他们看到拒绝的理由，他们就不会彻底审查它。

所以，虽然我看不出这样做有什么害处，但不能保证你会以一种提供有用反馈的方式被拒绝。他们更有可能在一个简单的问题上接你，而你也不会更聪明。

*更新*

另外，请记住，审查系统并不完全一致。我的应用程序被一位审稿人接受，但下次被拒绝，因为后来的审稿人更彻底。您可以让您的 alpha 应用程序被接受，但经过数月的工作后，您却看到完善的版本被拒绝。

更好的方法可能是在 Apple Dev Forum 上讨论您*可能*违反的特定规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T21:09:10.197

应用程序或应用程序类型的事先批准不会为未来的应用程序批准创造先例。开发人员已提交错误修复更新，但该应用更新因违反某些与更改完全无关的应用商店规则或指南而被拒绝。

但是，应用拒绝会给您提供宝贵的反馈。因此，如果您认为您的应用程序处于可接受的边缘，拒绝可能会提供有关继续开发风险的有用信息。

对于任何提交，您需要确保应用程序不会因为错误或崩溃或其他与您寻求的反馈无关的原因而被彻底拒绝。

如果您是知名的知名开发者或著名开发者，Apple 可能会就您正在开发的应用程序的反馈与您联系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T19:16:30.043

它几乎从不检查严重错误，检查使用私有 API、违反许可协议等。

# jquery - node.js：jsdom 的问题 - jQuery 对象返回未定义

> ID：12079897
> 
> 赞同：1
> 
> 时间：2012-08-22T19:13:45.157
> 
> 标签：jquery, node.js, jsdom, cloud9-ide, contextify

我有兴趣为其中一个项目进行一些服务器端 DOM 操作，因此我决定看一下[node.js](http://nodejs.org/)，尤其是[jsdom](https://npmjs.org/package/jsdom)。我对node.js完全陌生，所以我的错误可能很明显，但无论如何我都无法在任何地方找到我的问题的解决方案......

首先，我在本地运行 Windows 上的节点，并且还使用在线 IDE [cloud9](https://c9.io/)

值得一提的是，我在为 node 安装最新的 jsdom 包（即 0.2.15）时遇到了麻烦，因为所需的依赖[contextify](https://npmjs.org/package/contextify)无法在 Windows 下编译（需要 C++ 和 Python，而且我发现 npm 不支持构建 C++ 包） . 所以我采取了两种替代方法：

1.  我安装了一个不依赖于 contextify 的旧版本，即*jsdom@0.2.1*。这是我目前拥有的 npm 列表

    ```
    └─┬ jsdom@0.2.1
      ├── cssom@0.2.5
      ├── htmlparser@1.7.6
      └── request@2.10.0 
    ```

    当我尝试运行从[jsdom github repo](https://github.com/tmpvar/jsdom) cloud9 获取的简单测试脚本时，返回了这个警告

    ```
    The "sys" module is now called "util". It should have a similar 
    ```

    我试图解决这个问题，将所有提到的 sys 替换为 util，错误消失了......（仍然不太确定这是正确的做法......）。所以，最后当我尝试运行这个片段时

    ```
    var jsdom = require("jsdom");

    jsdom.env("http://nodejs.org/dist/", [
      'http://code.jquery.com/jquery-1.5.min.js'
    ],
    function(errors, window) {
      console.log("there have been", window.$("a").length, "nodejs releases!");
    }); 
    ```

    我发现了`window.$ === undefined`。尝试在 cloud9 上使用节点 v0.6.x 和节点 v0.4.x 以及在本地使用节点 v0.8.7 运行。

2.  我尝试做的另一件事是安装最新的 jsdom@0.2.15，从[这里](https://github.com/Benvie/contextify)获取已编译的 contextify ，安装[绑定](https://npmjs.org/package/bindings)并将其添加到 contextify/node_modules，因为 contextify 依赖于它。我根本无法使它工作=（没有浪费太多时间，因为这似乎是一种错误的方法，并且 contextify 不是最新的。

    这是 npm 列表

    ```
    └─┬ jsdom@0.2.15
      ├─┬ contextify@0.1.2
      │ └── bindings@1.0.0
      ├── cssom@0.2.5
      ├── htmlparser@1.7.6
      └── request@2.10.0 
    ```

另外，这是我的[cloud9 工作区](https://c9.io/dr3w/sandbox)，不要害羞。

任何帮助表示赞赏。也许还有其他更好的方法来完成我想要的。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T19:35:44.637

[Cheerio](https://github.com/MatthewMueller/cheerio)是不久前推出的一个新模块，它比 jsdom 更易于使用，并且可以访问许多可以使用 jsdom 运行的问题。

jsdom 很棒，但是如果你需要解析无效的 HTML，它可能真的很难使用，你必须使用[html5](https://github.com/aredridel/html5)解析器模块，它非常慢，而且所有东西都不是开发人员友好的。

还有 PhantomJS 需要考虑：
[http :](http://phantomjs.org) [//phantomjs.org](https://gist.github.com/3112441)我的 jQuery 入门指南。
[https://github.com/sgentle/phantomjs-node](https://github.com/sgentle/phantomjs-node)（这真是个[hack](https://github.com/sgentle/phantomjs-node#no-really-how-does-it-work)，我无语了）

# c# - 如何使用正则表达式仅在逗号而不是尖括号中拆分？

> ID：12079899
> 
> 赞同：0
> 
> 时间：2012-08-22T19:13:47.293
> 
> 标签：c#, regex

我有字符串 `DobuleGeneric<DoubleGeneric<int,string>,string>`

我正在尝试获取 2 类型参数： `DoubleGeneric<int,string>`和`string`

最初我在“，”上使用拆分。这有效，但前提是通用参数本身不是通用的。

**我的代码：**

```
string fullName = "DobuleGeneric<DoubleGeneric<int,string>,string>";
Regex regex = new Regex( @"([a-zA-Z\._]+)\<(.+)\>$" );
Match m = regex.Match( fullName );
string frontName = m.Groups[1].Value;
string[] innerTypes = m.Groups[2].Value.Split( ',' );

foreach( string strInnerType in innerTypes ) {
        Console.WriteLine( strInnerType );
} 
```

**问题：** 如何对未封装在尖括号中的逗号进行正则表达式拆分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T05:12:47.777

这是我将使用的正则表达式：

```
\<(([\w\.]+)(\<.+\>)?)\,(([\w\.]+)(\<.+\>)?)$ 
```

`([\w\.]+)`匹配“DoubleGeneric”。 `(\<.+\>)?`匹配可能的通用参数，如 DoubleGeneric`<OtherGeneric<int, ...>>`

关键是无论你有多少嵌套的通用参数，整个表达式中都只有一个“>”。

您可以使用 m.Gruops[1] 和 m.Groups[4] 来获取第一个和第二个类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T19:38:15.223

两个逗号都在尖括号之间！解析复杂的嵌套语法时，正则表达式做得不好。问题应该是，如何找到一个逗号，它在尖括号之间，而尖括号本身不在尖括号之间。我不认为这可以用正则表达式来完成。

如果可能，请尝试使用反射。您还可以使用[CS-Script](http://www.csscript.net/)来编译您的代码片段，然后使用反射来检索您需要的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T19:46:19.590

要拆分您给出的示例，您可以使用以下内容。但是，这不是通用的；它可以根据您期望的其他字符串进行通用化。根据您拥有的字符串的变化，此方法可能会变得复杂；但我建议在这里使用罗斯林是矫枉过正......

```
string fullName = "DobuleGeneric<DoubleGeneric<int,string>,string>"; 
Regex Reg = 
    new Regex(@"(?i)<\s*\p{L}+\s*<\s*\p{L}+\s*,\s*\p{L}+\s*>\s*,\s*\p{L}+\s*>");
Match m = Reg.Match(fullName);
string str = m.ToString().Trim(new char[] { '<', '>' });
Regex rr = new Regex(@"(?i),(?!.*>\s*)");
string[] strArr = rr.Split(str); 
```

我希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T20:15:13.553

答案是正确的，使用正则表达式是错误的方法。

我最终做了一个线性传递，用`~`s 替换封装在括号中的项目，然后进行拆分。

```
static void Main( string[] args ) {

    string fullName = "Outer<blah<int,string>,int,blah<int,int>>";          

    Regex regex = new Regex( @"([a-zA-Z\._]+)\<(.+)\>$" );
    Match m = regex.Match( fullName );
    string frontName = m.Groups[1].Value;
    string inner = m.Groups[2].Value;

    var genArgs = ParseInnerGenericArgs( inner );

    foreach( string s in genArgs ) {
        Console.WriteLine(s);
    }
    Console.ReadKey();
}

private static IEnumerable<string> ParseInnerGenericArgs( string inner ) {
    List<string> pieces = new List<string>();
    int angleCount = 0;
    StringBuilder sb = new StringBuilder();
    for( int i = 0; i < inner.Length; i++ ) {
        string currChar = inner[i].ToString();
        if( currChar == ">" ) {
            angleCount--;
        }
        if( currChar == "<" ) {
            angleCount++;
        }
        if( currChar == ","  &&  angleCount > 0 ) {

            sb.Append( "~" );

        } else {
            sb.Append( currChar );
        }

    }
    foreach( string item in sb.ToString().Split( ',' ) ) {
        pieces.Add(item.Replace('~',','));
    }
    return pieces;
} 
```

# php - 显示文本后 foreach 循环停止

> ID：12079904
> 
> 赞同：0
> 
> 时间：2012-08-22T19:14:05.243
> 
> 标签：php, arrays, loops, directory, limit

我正在生成并在一天的脚本图片中显示图片。我有一个当天图片的画廊页面（从目录中提取）。所以我想从目录中提取所有文件以及它何时到达当前日期（这也与文件名 IE 相同。20120822.jpg 是今天显示的内容，20120823.jpg 是明天显示的内容）。我让它循环所有目录图像并将它们显示在画廊中，但我希望循环在当前日期之后停止，这样我们就不会显示或加载未来的图像。这是我的代码..我确定我只是在做一些愚蠢的事情..

```
 <?PHP
   // filetypes to display
        $imagetypes = array("image/jpeg", "image/gif");
 ?>
 <?PHP

   function getImages($dir)
   {
     global $imagetypes;

    // array to hold return value
     $retval = array();

     // add trailing slash if missing
     if(substr($dir, -1) != "/") $dir .= "/";

     // full server path to directory
     $fulldir = "{$_SERVER['DOCUMENT_ROOT']}/$dir";

     $d = @dir($fulldir) or die("getImages: Failed opening directory $dir for reading");
     while(false !== ($entry = $d->read())) {
       // skip hidden files
       if($entry[0] == ".") continue;

       // check for image files
       $f = escapeshellarg("$fulldir$entry");
       $mimetype = trim(`file -bi $f`);
       foreach($imagetypes as $valid_type) {
         if(preg_match("@^{$valid_type}@", $mimetype)) {
           $retval[] = array(
            'file' => "/$dir$entry",
            'size' => getimagesize("$fulldir$entry")
           );
           break;
         }
       }
     }
     $d->close();

     return $retval;
   }
 ?>

 <?PHP
   // fetch image details
   $images = getImages("galleries/photo-of-the-day/images");
 $today = date("Ymd") . ".jpg";

   // display on page
   sort($images, SORT_REGULAR);
   foreach($images as $img ) {
 if ($img == "20120822.jpg" ) {
  break;
  } else { 
 ?>

 <div style="margin-right: 10px; float: left; margin-bottom: 10px; padding-bottom: 10px; border: 1px #CCCCCC solid;">

 <a href="<? echo $img['file']; ?>" rel="prettyPhoto" title="">

 <img class="image-gals" src="<? echo $img['file']; ?>" style="width: 260px; margin-bottom: 0px;padding: 10px; " /></a>

 <a href="<? echo $img['file']; ?>" style="font-size: 10px; padding: 3px 10px 10px 10px;">Download</a>

 </div>
 <? 
 }
 }
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T19:25:29.373

这是您填充`$images`数组的地方：

```
$retval[] = array(
    'file' => "/$dir$entry",
    'size' => getimagesize("$fulldir$entry")
); 
```

但是当你比较它们时，你正在这样做：

```
foreach($images as $img ) {
    if ($img == "20120822.jpg" ) { 
```

`$img`将包含一个数组。您需要检查`$img['file']`，并且其中还包含目录名称，因此它不会仅与图像名称匹配。

# oracle - PL/SQL 迭代所有模式并在所有模式上运行相同的查询

> ID：12079907
> 
> 赞同：0
> 
> 时间：2012-08-22T19:14:20.730
> 
> 标签：oracle, function, plsql

我有各种 Oracle 数据库，例如 ONE.db TWO.db THIRD.db 等，我想运行一个在 ONE.db 上成功运行的 SELECT`SELECT * FROM CUSTOMERS`等，然后获取每个数据库的结果。如何使用 PL/SQL 做到这一点？（没有数据库链接或工具等）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T03:28:47.560

假设您谈论的是模式，而不是单独的数据库实例，并且假设所有 CUSTOMERS 表的结构完全相同（包括列顺序），您可以以对所有表具有 SELECT 访问权限的用户身份登录，然后：

```
SELECT 'ONE' owner, c.* FROM one.customers c
UNION ALL
SELECT 'TWO' owner, c.* FROM two.customers c
UNION ALL
SELECT 'THIRD' owner, c.* FROM third.customers c
; 
```

您是否需要第一列“所有者”取决于您。

如果您想在运行时使用 PL/SQL 生成上述语句，您可以执行以下操作：

```
DECLARE
  qry VARCHAR2(32767);
  rc sys_refcursor;
BEGIN
  FOR r IN (SELECT owner, table_name
            FROM all_tables
            WHERE table_name = 'CUSTOMERS') LOOP
    IF qry IS NOT NULL THEN
      qry := qry || ' UNION ALL ';
    END IF;
    qry := qry || 'SELECT '''
               || r.owner
               || ''' owner, c.* FROM '
               || r.owner
               || '.customers c';
  END LOOP;
  OPEN rc FOR qry;
  -- fetch from the ref cursor and do whatever you want with the records
END; 
```

# sql - 带有 mod 函数的 Oracle rownum 行为

> ID：12079909
> 
> 赞同：1
> 
> 时间：2012-08-22T19:14:21.920
> 
> 标签：sql, oracle

给定

```
CREATE TABLE Foo(v1 integer, v2 integer);

INSERT INTO Foo VALUES (1,2);
INSERT INTO Foo VALUES (3,4);
INSERT INTO Foo VALUES (5,6); 
```

和

```
SELECT COUNT(*) FROM Foo WHERE mod(rownum,2) = 0; 
```

返回 0 行，它应该返回 1

```
SELECT COUNT(*) FROM (SELECT mod(rownum,2) z FROM Foo) tt WHERE z=0; 
```

返回 1 行

我在这里想念什么？[我在ROWNUM](http://docs.oracle.com/cd/B19306_01/server.102/b14200/pseudocolumns009.htm)或 MOD 文档中没有看到任何建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-22T19:24:30.697

[`ROWNUM`](http://docs.oracle.com/cd/B19306_01/server.102/b14200/pseudocolumns009.htm)在您查询之前不会分配，因此您将无法在这样的`WHERE`子句中使用它。

您可以执行以下操作：

```
SELECT COUNT(*) 
FROM
(
  select v1, v2, rownum rn
  from Foo 
) f
WHERE mod(rn,2) = 0; 
```

是该`ROWNUM`行在结果集中的位置，在选择记录后对其进行评估。

这些类型的查询永远不会起作用：

```
WHERE ROWNUM > x
WHERE ROWNUM BETWEEN x AND y 
```

但这会起作用

```
WHERE ROWNUM < x 
```

由于您想`rownum`使用该功能评估该`mod`功能，因此它将无法工作，因为此时该`rownum`功能不可用。这就是为什么您必须将其放在子查询中才能使用该`mod`功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T19:24:32.110

ROWNUM 返回实际查询的行号，而不是查询所基于的表的行号。因此`SELECT COUNT(*) ...`返回行号为 1 的一行，`mod(rownum,2) != 0`然后被 WHERE 原因丢弃，实际上根本不返回任何行。

将行号作为列返回的（未过滤的）子选择会有所帮助。然后将 WHERE 子句应用于外部选择。

# ms-word - 将数据从 Access 数据库导入 Word

> ID：12079911
> 
> 赞同：1
> 
> 时间：2012-08-22T19:14:27.677
> 
> 标签：ms-word, ms-access-2007

我创建了一个在公司服务器上运行 Access 数据库的程序。该程序运行良好，我即将将其发布到办公室。在我这样做之前，我想写一个帮助文件以防用户遇到问题。但是，我在这里遇到了问题。在程序中，每个用户都有一个从数据库中检索的安全级别，允许他们访问程序中的不同功能。我希望只有某些用户知道某些功能。在为所有功能编写帮助文件时，我想让 Microsoft Word 从数据库中读取安全级别，并仅显示与用户有权访问的功能相对应的帮助文件部分。我尝试在 Document_Open 事件中使用以下 VBA 代码：

```
 Set db = OpenDatabase(databasePath, False, False, databasePassword) 
```

但我得到一个无效的密码错误（数据库受密码保护）。我现在已经多次验证了正确的密码，但仍然没有运气。有谁知道我做错了什么？是否有其他方法可以使用 Word 连接到 Access 数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T19:17:27.130

为什么不在带有富文本备忘录的表格中包含帮助？每个部分可以包含在不同的记录中。

创建这样的表时，我通常有一个帮助按钮，可以打开相关部分和一个额外的字段以允许注释。

# nodes - 属于同一记录节点的端口之间的 Graphviz 边缘看起来很糟糕

> ID：12079921
> 
> 赞同：2
> 
> 时间：2012-08-22T19:15:01.623
> 
> 标签：nodes, graph-theory, record, graphviz, edges

我正在尝试为 Linux 中的特定代码执行路径创建函数调用图。我有以下有向图，它使用记录字段（它们已被弃用，我知道，我刚开始使用 graphviz，最近才看到）：

```
digraph {
  node[fontsize=9,shape=Mrecord,style=filled,fillcolor=white];

  subgraph cluster_0 {
    style=filled; fillcolor=lightgrey;
    open[label="open.c|{<f0>do_sys_open()}"];
    namei[label="namei.c|{<f0>do_filp_open()\l|\
                          <f1>path_lookup_open()\l|\
                          <f2>do_path_lookup()\l}"];
    file_table[label="file_table.c|{<f0>get_empty_filp()}"];
    open:f0->namei:f0;
    namei:f0:e->namei:f1:e;
    namei:f1:e->namei:f2:e;
    namei:f1:e->file_table:f0;
  }
} 
```

生成的图像：

![在此处输入图像描述](../Images/2a9a5283471d6c0192d6b19eff5d5a7a.png)

如图所示，指向同一记录节点的端口之间的箭头始终呈一定角度。有什么办法可以“简化”它们，使它们直接出来，或者以其他方式使它们看起来更整洁？

# apache-flex - 折叠 Flex 面板的一部分

> ID：12079923
> 
> 赞同：0
> 
> 时间：2012-08-22T19:15:02.917
> 
> 标签：apache-flex, collapse

我试图弄清楚如何折叠一个不可见的选项卡导航器，以便用户看不到空白。我知道如何在 WPF 中执行此操作，但不知道在 Flex 中。我曾尝试研究它，但并没有真正找到任何有用的东西。

![可见的](../Images/c91efae6584946db989d0afcdae09df9.png) ![无形的](../Images/77e88a6eb6f66120aba1a3e86058b3bb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T20:00:02.447

利用[visible](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/UIComponent.html#visible)和[includeInLayout](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/UIComponent.html#includeInLayout)属性。您拥有 TabNavigator 的容器必须遵守 includeInLayout，并且大多数都这样做 [除非您自己编写任何自定义布局代码]

# c++ - c++ 逻辑替代运算符

> ID：12079928
> 
> 赞同：3
> 
> 时间：2012-08-22T19:15:25.833
> 
> 标签：c++, logical-operators, operator-precedence

在一个简单项目的工作中，我发现了我不完全理解的情况。考虑以下代码：

```
#include <iostream>

using namespace std;

bool test(int k)
{
    cout << "start " << k << endl;

    bool result; // it is important that result's value is opposite to initial value of recheck in main()
    result = false;

    return result;
}

int main()
{
    bool recheck;
    recheck = true;
    for (int i = 2; i > -1; i--)
    {
      recheck = (recheck || test(i));   // (1)
      cout << i << " ???" <<endl;
    }
    cout << "----------------------------" << endl;
    cout << endl;

    recheck = true;
    for (int i = 2; i > -1; i--)
    {
        recheck = (test(i) || recheck);  //different order that in (1)
        cout << i << "???" <<endl;
    }

    return 0;
} 
```

`for`它从循环返回完全不同的结果：

```
2 ???
1 ???
0 ???
----------------------------

start 2
2???
start 1
1???
start 0
0??? 
```

似乎第一个`test(int k)`甚至没有被调用。我怀疑这与`||`运营商有关。有人可以解释这种行为吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-22T19:17:27.143

内置`||`短路：如果左操作数是`true`，则不计算右操作数（右操作数的值是什么无关紧要，因为在这种情况下`||`保证表达式的值`true`）。

^(为了完整性，但与问题并不特别相关：在 c++ 中，`||`运算符是可重载的，就像许多其他运算符一样。如果使用过载，则不会发生短路。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T19:18:10.373

当操作数之一（从左到右计算）可以确定表达式的结果时，布尔运算符`||`和`&&`将*短路，而无需参考其余操作数。*

在 的情况下`||`，这意味着如果第一个操作数是`true`，则不会计算剩余的操作数，因为整个表达式的结果将始终是`true`。

在第一个循环中，`recheck`本地变量`main`始终为`true`，因此`test`永远不需要评估函数调用：它被跳过，并且您看不到任何输出。

在第二个循环中，`test`函数调用首先被评估，它的结果只有在调用函数后才能确定，所以每次迭代都会调用函数，你会看到输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T20:02:21.807

其他人已经解决了您提出的具体问题。只是要注意不要连续使用多个问号。三字母序列以两个“??”开头 字符和两个问号后的第三个字符的解释不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T19:22:37.350

你的评论说：

> 重要的是结果的值与 main() 中重新检查的初始值相反

您的`test()`函数当前看不到 的值`recheck`，它是本地的`main()`。

假设您的评论反映了您的意图，您需要将`recheck`其作为参数传递给`test()`; 然后您可以使用一元运算`!`符，例如：

```
result = ! recheck; 
```

当然，您需要修复其中的逻辑，`main()`以便`test()`在需要时调用它。

您的要求不够明确，我无法进一步评论。

# installation - PostgreSQL 首次安装并尝试连接

> ID：12079932
> 
> 赞同：1
> 
> 时间：2012-08-22T19:15:46.050
> 
> 标签：installation, postgresql-9.1

我刚刚在 Windows 7 64 位机器上安装了 postgresql-9.1.4-1-windows-x64。我无法启动服务并连接到数据库。成功安装后，我根据类似的帖子尝试了以下操作。

1）在“开始”>“所有程序”>“PostreSQL 9.1”下查找“启动服务器”，但找不到。

2）尝试从命令行启动服务器

```
pg_ctl.exe -D "C:\Program Files\PostgreSQL\9.1\bin\data"

```

这给了我错误：

```
无法创建锁定文件“postmaster.pid”：权限被拒绝

```

我有管理权限，在 bin 或 data 目录中都没有 postmaster.pid 文件。

3）接下来，我尝试通过右键单击 postgresql-9.1.4-1-windows-x64 服务并选择“开始”来从管理工具启动服务。我收到消息：

> 本地计算机上的 postgresql-9.1.4-1-windows-x64 服务启动和停止。如果某些服务没有被其他服务或程序使用，它们会自动停止。

事件查看器将错误显示为`Timed out waiting for server startup`

4）我认为数据目录中的数据可能是初始数据库，但以防万一我运行“initdb”并得到：

> 如果要创建新的数据库系统，请删除或清空目录 c:\program files\postgreSql/9.1/data 或使用 c:\program files\postgreSql/9.1/data 以外的参数运行 initdb

4）为了好玩，我启动了pgAdminIII，右键单击“PostreSQL 9.1（localhost:5432）”，选择连接，输入密码，然后得到：

> 无法连接到服务器：连接被拒绝 (0x0000274D/10061) 服务器是否在主机“localhost”(::1) 上运行并接受端口 5432 上的 TCP/IP 连接？

有人有建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:59:20.073

> «“无法创建锁定文件'postmaster.pid'：权限被拒绝”»

不要再看了，如果 Postgres 不能创建这个临时文件，它就不能启动。如果它没有被创建，你在磁盘上寻找它显然是找不到它的。您的 DATA 目录已创建，因此无需再次重新运行`initdb`，如果您尝试使用 pgadmin，它会抱怨它无法连接到 Pg——它没有运行。

我对 windows 不熟悉，但知道了在哪里`postmaster.pid`创建，你可能会发现 Postgres 不能创建这个文件的原因。

希望能帮助到你。

# macros - 在包含宏/定义文档时禁用 Doxygen 预处理

> ID：12079940
> 
> 赞同：3
> 
> 时间：2012-08-22T19:16:21.280
> 
> 标签：macros, doxygen

有没有办法`ENABLE_PREPROCESSING = NO`在确保仍然包含宏文档的同时进行设置？

例如，它很容易设置`PREDEFINED = __cplusplus`，但我宁愿不必为`#define`Doxygen 可能未预定义的每一个（即`__GNUC__`等）都这样做。

# shared-libraries - 如何将 libFLAC 交叉编译为共享库？

> ID：12079941
> 
> 赞同：0
> 
> 时间：2012-08-22T19:16:24.237
> 
> 标签：shared-libraries, cross-compiling, autotools, flac

我正在尝试从 Linux 交叉编译适用于 Windows 的[libFLAC](http://flac.sourceforge.net/)。以下是我执行的步骤：

1.  我下载了最新版本（1.2.1）并解压了压缩包。

2.  我应用[了一个小补丁](http://paste.ubuntu.com/1161417/)：

    ```
    patch -p0 < my_patch.diff 
    ```

3.  我在提取的目录中运行了以下命令：

    ```
    ./configure --host=i686-w64-mingw32
                --prefix=/usr/i686-w64-mingw32
                --enable-shared 
    ```

4.  然后我跑了`make`，等待图书馆建立。

5.  尽管在构建过程中没有错误，但没有构建共享库——我最终得到的只是一个静态库（尽管在`./configure`上面的步骤中明确请求了一个）。如果我运行`make install`，我最终会得到以下文件/目录：

    ![在此处输入图像描述](../Images/ba66cd3db3554101a994ba8dc6628d32.png)

这两个命令的输出可在此处获得：

*   `configure`： http: [//paste.ubuntu.com/1161368/](http://paste.ubuntu.com/1161368/)
*   `make`： http: [//paste.ubuntu.com/1161427/](http://paste.ubuntu.com/1161427/)

* * *

**编辑：**如果我使用选项`--disable-static`，我会得到这个输出： http: [//paste.ubuntu.com/1161441/](http://paste.ubuntu.com/1161441/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T21:20:58.953

我最终决定从 1.2.1 版本切换到[git://git.xiph.org/flac.git](http://git.xiph.org/flac.git/)的结帐。

...并且我很高兴地报告该库现在可以毫无问题地编译，并且我最终得到了一个`libFLAC-8.dll`文件。

# javascript - 在 jQuery ajax 请求中包含 # 时 URL 中断

> ID：12079945
> 
> 赞同：1
> 
> 时间：2012-08-22T19:16:41.983
> 
> 标签：javascript, jquery

当我使用包含# 符号的jquery Ajax 请求一个url 时，# 之后的url 字符串被截断。例如：

```
http://somesitem.com/?name=Some#thing 
```

当我观察到在 firebug 中请求此 url 时，我看到提交的所有内容是：

```
http://somesitem.com/?name=Some 
```

我尝试使用 encodeURI 函数但没有成功。

有关如何提交包含 # 的整个字符串的任何提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T19:26:12.980

encodeURI 不会删除“#”。您需要使用 encodeURIComponent

```
encodeURIComponent('Some#thing') 
```

这应该会产生这样的结果：

```
Some%23thing 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T19:27:01.297

尝试将 '#' 替换为 '%23'。.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T19:27:06.283

片段标识符永远不会传递给服务器。如果要将其发送到服务器，则需要首先将现有片段转换为标准 url 参数。

```
var url = window.location;
//url = http://somesitem.com/?name=Some
url += '&hash='+window.location.hash;
//url = http://somesitem.com/?name=Some&hash=thing
$.get(url); 
```

> 片段标识符的功能与 URI 的其余部分不同：即，**它的处理完全是客户端，没有服务器**的参与——当然，服务器通常有助于确定 MIME 类型，而 MIME 类型决定了片段的处理。**当代理（例如 Web 浏览器）向 Web 服务器请求资源时，代理将 URI 发送到服务器，但不发送片段**。而是代理等待服务器发送资源，然后代理根据文档类型和分片值处理资源

[http://en.wikipedia.org/wiki/Fragment_identifier](http://en.wikipedia.org/wiki/Fragment_identifier)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T19:28:58.753

[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

JQuery 文档中的特殊字符包括 #

它说使用两个 \ 在 JQuery 中转义（我相信只在 javascript 中一次）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T19:25:10.160

这可能是因为这个`#`角色有特殊的含义。它基本上是一个保留字符。我可能只是建议您使用不同的字符来使用它。

# javascript - 拍摄和显示图像

> ID：12079946
> 
> 赞同：2
> 
> 时间：2012-08-22T19:16:42.463
> 
> 标签：javascript, jquery, flash, gallery, ebay-design-templates

我想知道我怎样才能做到这一点。

我需要从外部链接站点获取所有图像并将它们显示在其他站点中。没有jQuery可以做吗？用一个简单的javascript或flash？

任何人都可以建议某种教程之类的吗？

如果是 javascript，那么它必须是非常简单的代码，因为我想让它在 eBay 列表中工作。

示例：在列表中将出售 XXX 手机的支架，我想在底部放一张幻灯片或类似的东西，用于完全相同的物品（来自同一类别）。我想给它一个功能，所以我只需要更改类别的链接，图片就会自动更改。可能吗？

谢谢，

请如果我没有说清楚，请询问，我会更详细地解释。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T19:27:41.337

**注意：**提问者表示此答案在 Ebay 列表中不起作用。
*除此之外，它工作得很好，它会激怒一些“网络开发者”（LOL）。*我暂时把它留在这里。

我有一个偷偷摸摸的怀疑你没有拥有/控制外部链接站点，因此“从外部链接站点获取所有图像并在其他站点中显示它们”（如要求的那样），将受到跨域安全限制。

因此，为了重新获得“用户的权力”，只需使用[http://query.yahooapis.com/](http://query.yahooapis.com/)。
jQuery 不是严格需要的。

**示例 1：**
使用类似 SQL 的命令：

```
select * from html 
where url="http://stackoverflow.com" 
and xpath='//div/h3/a' 
```

以下链接将抓取 SO 以获取最新问题（绕过跨域安全公牛$#!7）： http://query.yahooapis.com/v1/public/yql?q=select%20%2a%20from%
[20html %20%0Awhere%20url%3D%22http%3A%2F%2Fstackoverflow.com%22%20%0Aand%20xpath%3D%27%2F%2Fdiv%2Fh3%2Fa%27%3B&format=json&callback=cbfunc](http://query.yahooapis.com/v1/public/yql?q=select%20%2a%20from%20html%20%0Awhere%20url%3D%22http%3A%2F%2Fstackoverflow.com%22%20%0Aand%20xpath%3D%27%2F%2Fdiv%2Fh3%2Fa%27%3B&format=json&callback=cbfunc)

如您所见，这将返回一个 JSON 数组（也可以选择 xml）并调用回调函数：`cbfunc`。

在您的情况下，您会寻找图像链接并将它们包含在您的页面中。

**示例 2：**
正如下面评论中所问的，这个纯 JavaScript*示例*不仅从 Ebay 商店获取*图像 URL*，它还获取*产品标题*和*产品 URL*（将它们显示为超链接图像，产品标题作为图片的标题）。因此，它还展示了如何动态构建 yql 字符串以及如何处理返回的数据。

```
function cbfunc(json){
   if(json.query.count){
      var data=json.query.results.div;
      var i=0, l=data.length, htm='';
      for(;i<l;i++){
         htm+='<a href="'+data[i].a.href+'">' +
                 '<img title="'+data[i].a.img.title+'"' +
                       ' src="'+data[i].a.img.src+'">' +
              '</a>\n';
      }
      document.getElementById('output').innerHTML=htm;
   } else {
      alert('Error: nothing found'); return false;
   }
}

function fetchEbayStore(url){
   var yql="select a.href, a.img.src, a.img.title" +
           " from html" +
           " where url='" + url + "'" +
           " and xpath='//td/div[@class=\"image\"]'";
   yql="http://query.yahooapis.com/v1/public/yql?q=" +
       encodeURIComponent(yql) +
       "&format=json" +
       "&callback=cbfunc";
   getJSON(yql); //you need to provide getJSON or use a library
} 
```

请参阅[此 'quick 'n dirty' jsfiddle](http://jsfiddle.net/7tC3L/2/)以查看上面的示例。请记住，这只是为了解释，而不是生产！

更多信息：阅读 yahoo 的[yql文档，查看](http://developer.yahoo.com/yql/)[构造函数](http://developer.yahoo.com/yql/console/)右侧的实时示例。

# php - 保护联系表单脚本

> ID：12079947
> 
> 赞同：0
> 
> 时间：2012-08-22T19:16:53.307
> 
> 标签：php, email, contact-form, secure-coding

**你好！**我只是想知道我刚刚制作的这个联系人表单脚本有多安全？很久以前，当我制作联系表时，我的老师一直在唠叨我。

```
if($_SERVER['REQUEST_METHOD'] === 'POST'){

    $myemail  =    "email@adress.com";
    $name      =    $_POST['name'];
    $email    =    $_POST['email'];
    $phone    =    $_POST['phone'];
    $subject  =    $_POST['subject'];
    $comments =    $_POST['comments'];

   if($name == 0 || !preg_match("/([\w\-]+\@[\w\-]+\.[\w\-]+)/", $email) || !preg_match("/^\d{2}(-\d{3}){2}(\d{2})?$/", $phone) || $subject == 0 || $comments == 0){

       $error_message = 'Something was written wrong..';

   } else {

       $message = "Hello!
       Your contact form has been submitted by:
       Name: $name
       E-mail: $email
       Phone: $phone
       Comments: $comments
       End of message";
       mail($myemail, $subject, $message);
       $error_message = 'Your message was sent!';

    }
} 
```

有关如何使其安全的任何建议？

PS[保护联系表](https://stackoverflow.com/questions/6685761/securing-a-contact-form)和[保护 php 联系表](https://stackoverflow.com/questions/10050718/securing-a-php-contact-form)都适用于 WordPress，这不是我想要的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T20:41:25.827

您可以使用函数来验证条目，例如：

```
function check_input($data)
 {
    $data = trim($data);
    $data = stripslashes($data);
    $data = htmlspecialchars($data);
    return $data;
 } 
```

和

```
 $name      =    check_input($_POST['name']);
        $email    =    check_input($_POST['email']);
        $phone    =    check_input($_POST['phone']);
        $subject  =    check_input($_POST['subject']);
        $comments =    check_input($_POST['comments']); 
```

和

```
 if ($name && $email && $phone && $subject && $comments) {
         Send contact form...

} 
```

当然，您可以添加验证码以使其更安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T19:23:33.310

除了缺乏数据验证之外，您的代码中没有什么不安全的地方。您只需收集表单数据并将其发送出去。所以唯一的“不安全感”是除非使用任何类型的验证码，否则您很容易通过该表单发送垃圾邮件。我目前不确定，但可能会欺骗 mail() 以添加更多带有精心制作的 $subject 的收件人，因此可以保存以确保它是 oneliner 并剥离任何 CRLF

# spring - 使用springsource springmvc读取xml文件

> ID：12079949
> 
> 赞同：0
> 
> 时间：2012-08-22T19:16:56.160
> 
> 标签：spring, spring-mvc, xml-parsing, xmlreader, sts-springsourcetoolsuite

我正在尝试读取一个 xml 文件并使用 Spring MVC 对其进行解析，但由于某种原因它没有找到文件路径。我尝试了不同的文件夹，甚至是根目录，但仍然无法在我的项目中读取或找到该文件。我也在使用一个bean，它不工作。

```
<bean class="com.fdm.routePlanner.data.LineDataReader">
    <property name="file">
    <value>/resources/CompleteTube.xml</value>
    </property>
</bean> 
```

和

```
SAXBuilder saxbuilder = new SAXBuilder();
 try {
    return generateNetwork( saxbuilder.build(new File(file)) );
  } catch (JDOMException e) { 
```

当我尝试使用它解析文件时，`SAXBuilder`它会给我一个 NullPointerException。

# php - 如何在 PHP5 中使用 XSLT 函数？

> ID：12079950
> 
> 赞同：1
> 
> 时间：2012-08-22T19:17:00.097
> 
> 标签：php, xml, xslt

最近，我一直在帮助某人将站点从远程网络服务器转移到本地网络服务器。但是，我继承的代码包含如下代码：

```
$xsltproc = xslt_create();
$html = xslt_process($xsltproc, $path, 'xsl/Stylesheet2.xsl'); 
```

但是，PHP5 不喜欢这样的代码，而且根据我的阅读，PHP5 中不允许使用上述 XSLT 函数。显然，这段代码一定是用 PHP4 编写的，并且在运行 PHP4 的服务器上使用过。我的问题是，我怎样才能让这段代码在我的 PHP5 服务器上工作（还有更多代码使用“XSLT”，上面只是一个片段）？重写所有代码是使其工作的唯一方法吗？如果可能的话，我宁愿避免这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:53:36.037

我希望它能解决你的问题

```
function transform($xmlvalue, $xsl,$paraArray=array(),$IsFileXML=FALSE)
        {
            $XML = new DOMDocument();
            if ($IsFileXML)
                $XML->load( $xmlvalue);
            else
                $XML->loadXML( $xmlvalue );
            $xslt = new XSLTProcessor();
            $XSL = new DOMDocument();
            $XSL->load( $xsl, LIBXML_NOCDATA);
            $xslt->importStylesheet( $XSL );
            foreach ($paraArray as $key => $value) {
                $xslt->setParameter('', $key,$value);
            }
            $xslt->registerPHPFunctions();
            return $xslt->transformToXML( $XML );
        } 
```

你必须像这样在 xslt 中调用 php 函数

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:php="http://php.net/xsl"  exclude-result-prefixes="php" version="1.0">
  <xsl:output method="html" version="1.0" encoding="utf-8" indent="yes"  omit-xml-declaration="no"/>
.....
.....
....

<tr>
              <td valign="top" class="found_on">
                Added : <strong>
                  <xsl:value-of select ="php:function('ClsXSLTFunction::getPublishDate',$publishdate)"/>
                </strong> by <strong>
                  <xsl:value-of select="user"/>
                </strong>
              </td>
            </tr>
....
....
</xsl:stylesheet> 
```

你也可以在 xslt 中调用你自己的函数，但是你必须创建一个像这样的静态函数的类

```
class ClsXSLTFunction
{
    public static function getPublishDuration($publishdate)
    {
        $epoch_1 = strtotime($publishdate);
        $epoch_2 = strtotime(date('y-m-d H:m:s'));
        $diff_seconds  = $epoch_1 - $epoch_2;
        $diff_weeks    = floor($diff_seconds/604800);
        $diff_seconds -= $diff_weeks   * 604800;
        $diff_days     = floor($diff_seconds/86400);
        $diff_seconds -= $diff_days    * 86400;
        $diff_hours    = floor($diff_seconds/3600);
        $diff_seconds -= $diff_hours   * 3600;
        $diff_minutes  = floor($diff_seconds/60);
        $diff_seconds -= $diff_minutes * 60;

        return $diff_days."d".$diff_hours."h".$diff_minutes."m";
    }

    public static function getPublishDate($publishdate)
    {
        return date("m/d/Y",strtotime($publishdate));
    }
} 
```

# jquery - .removeData 不删除数据 id

> ID：12079960
> 
> 赞同：0
> 
> 时间：2012-08-22T19:17:32.997
> 
> 标签：jquery

我有以下代码显示一个对话框以确认是否应删除项目。问题是，每次我单击删除按钮时，项目的 id 每次都会添加到#dialog 数据中。

所以我第一次删除时，它会像我期望的那样提醒 id。如果我单击另一个要删除的项目，它也会显示以前的 id。如何正确清除附加到对话框的数据？

```
// Delete confirmation modals
$('#dialog').on('show', function() {

    var $this = $(this);
    var id = $this.data('id');

    $('#delete-confirm').click(function(e) {
      e.preventDefault();

        $this.removeData('id', id);

        alert(id);

    });
});

$('.delete').click(function(e) {
  e.preventDefault();
  $('#dialog').data('id', $(this).data('id'));
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T19:21:45.107

您永远不会将`id`变量更新为`.data('id')`

```
// Delete confirmation modals
$('#delete-confirm').click(function(e) {
    e.preventDefault();    
    $("#dialog").removeData('id');    
    alert($("#dialog").data('id'));    
});

$('.delete').click(function(e) {
  e.preventDefault();
  $('#dialog').data('id', $(this).data('id'));
}); 
```

此外，请确保您没有将多个事件绑定到同一个元素，这可能会发生在`delete-confirm`元素上。通过使对话框出现多次并多次确认删除来确认。如果警报开始发生的次数越来越多，那么您正在重新绑定该事件。

# c - 为什么我很难让 C 中的 execvp 工作？

> ID：12079962
> 
> 赞同：1
> 
> 时间：2012-08-22T19:17:35.860
> 
> 标签：c

我需要在 C 中实现一个基本的 shell。我需要的一件事是实现一个具有命令的函数并执行它。我的代码：

```
 pID=fork();

    if (pID == 0)
       execvp(tmp[0], tmp);
    else if (pID > 0)
    {
       printf("%d", pID);
       wait(NULL);
    }
    else
      printf("Failed to create proccess \n"); 
```

问题是，无论我在 tmp 中输入什么命令，程序都会再次向我显示提示，除此之外什么也不做。例如，如果我写`gedit`（为了打开`gedit`Ubuntu 的 ntpad），它不会打开它，或者如果写`ls -a`它不会像 Ubuntu 的终端那样向我显示任何输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T22:21:42.117

execvp 应该可以工作。正如其他人提到的，您确实需要展示如何填充 tmp。也就是说，我猜这就是错误所在。tmp 需要是一个空终止的数组。

```
#include <stdio.h>
main( int argc, char * argv[] )
{
int    pid = fork;
char * tmp[2];
  memset( tmp, 0, sizeof(tmp) );
  tmp[0] = argv[0];
  if( 0 == pid )
  {
    if( -1 == execvp( tmp[0], tmp ) )
    {
      char errmsg[64];
      snprintf( errmsg, sizeof(errmsg), "exec '%s' failed", tmp[0] );
      perror( errmsg );
    }
  else if( 0 < pid )
  {
    printf("[%d] %s\n", pid, tmp[0]);
    wait(NULL);
  }
  else
  {
    perror("fork failed");
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T22:35:39.207

虽然你没有告诉我们你通过`tmp`变量传递了什么 to `execvp`，但我的精神感觉告诉我你忘记了以空终止你的参数列表。NULL 参数告诉`execvp`最后一个参数在哪里，如果你没有输入 NULL，它将开始从堆栈中读取随机垃圾。

如果该随机垃圾指向大量非零数据，它将用完空间来存储新进程的假定参数，这通常是几百 KB（请参阅[此页面](http://www.in-ulm.de/~mascheck/various/argmax/)以获取一些系统特定的数字，以及作为获取系统最大参数大小的各种方法）。

当参数数据过多时，系统调用[`execve(2)`](http://linux.die.net/man/2/execve)（由 内部调用`execvp`）失败并返回错误`E2BIG`。

因此，要查看这是否发生在您身上，请检查`execvp`. 如果它甚至完全返回，它就失败了（如果它成功了，它就不会返回，因为一个新进程正在执行！），所以检查全局值`errno`以了解它失败的原因：

```
if (pID == 0)
{
    execvp(tmp[0], tmp);
    printf("exec failed: %s\n", strerror(errno));
    exit(1);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-22T08:27:03.283

execvp() 需要完整路径。如果在 tmp[0] 中不是可执行文件的完整路径，请使用 execv()

```
execv(tmp[0], tmp); 
```

# java - 从项目目录而不是原始目录应用的相对文件路径

> ID：12079963
> 
> 赞同：4
> 
> 时间：2012-08-22T19:17:38.737
> 
> 标签：java, xslt, path, relative-path, saxon

我的程序从不是项目根目录的位置读取文档。该文档包含一个相对路径。当程序应用该路径时，它确实从项目的根目录开始。如何使其应用文档原始位置的路径？

这是详细信息。有点长，但很简单。

我在 Eclipse 中有一个 Java 项目，位于

```
C:\one\two\three\four\five 
```

该程序运行一个 XSL 转换，它将 Schematron 模式作为输入，并生成一个新的 XSLT 样式表作为输出。架构位于

```
C:\one\two\three\four\five\six\S\P\schema.sch 
```

它包含这一行，还有几个类似的：

```
<sch:let name="foo" select="document('../../C/P/bar.xml')"/> 
```

如果您从架构的位置开始并应用该相对路径，您最终会得到

```
C:\one\two\three\four\five\six\C\P\bar.xml 
```

这是 的正确位置`bar.xml`。然而，当我运行我的程序时，我得到了一些错误，这些错误似乎都与这个相似或相关：

```
Recoverable error on line 1262
  FODC0002: I/O error reported by XML parser processing
  file:/C:/one/two/three/C/P/bar.xml:
  C:\one\two\three\C\P\bar.xml (The system cannot find the path specified) 
```

`FODC0002`是“检索资源时出错”的错误代码。这是有道理的，因为这不是`bar.xml`. 似乎相对路径正在应用于项目的根目录。这是相关代码：

```
void compileToXslt(byte[] schema) throws Exception {
    XsltCompiler comp = Runtime.getSaxonProcessor().newXsltCompiler();
    comp.setURIResolver(resolver);
    Source source = resolver.resolve("iso_svrl_for_xslt2.xsl", null);
    XsltExecutable executable = comp.compile(source);

    XsltTransformer transformer = executable.load();
    transformer.setSource(new StreamSource(new ByteArrayInputStream(schema)));
    Serializer serializer = new Serializer();
    serializer.setOutputStream(new ByteArrayOutputStream());
    transformer.setDestination(serializer);
    transformer.transform(); // Errors appear in logs during this line

    // ... 
```

`Source`是`javax.xml.transform.Source`。XSL 相关的类都来自 SAXON ( [Javadoc](http://www.saxonica.com/documentation/javadoc/index.html?overview-summary.html) )。

我能做些什么来解决这个问题？移动`bar.xml`到程序正在查找它的位置并进行编辑`style.xsl`对我来说不是选项，因为这两个文件都属于第三方库。

**更新：**
进一步的研究使我相信我需要[设置`StreamSource`](https://stackoverflow.com/a/3700296/122607). 我尝试用`transformer.setSource(...`这个替换该行：

```
StreamSource strSrc = new StreamSource(new ByteArrayInputStream(schema));
strSrc.setSystemId(new
  File("C:\\one\\two\\three\\four\\five\\six\\S\\P\\schema.sch").toURI()
  .toURL().toExternalForm());
transformer.setSource(strSrc); 
```

但我得到了相同的结果。我使用`setSystemId()`不正确吗？我是否完全走错了路？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T19:57:42.297

我没有安装 java，但我假设您需要更改解析器，以找到您正在寻找的路径。

你没有展示你是如何得到它的。当然，您可以做的又快又脏，只需在参数选项卡下的调试配置中更改工作目录。但我假设你不想那样做

# python - 通过包含标记传递上下文变量

> ID：12079964
> 
> 赞同：0
> 
> 时间：2012-08-22T19:17:43.893
> 
> 标签：python, django, django-custom-tags

执行检查以查看用户是否参加。如何在`is_attending`不出现语法错误的情况下将上下文变量传递给模板`'is_attending': context['is_attending']`？检查基本上是用于样式 div 和诸如此类的东西。我究竟做错了什么？

**模板：**

```
{% for event in upcoming %}
    {% registration %}

    {% if is_attending %}
         Registered!
    {% else %}
          Register button
    {% endif %}

    yadda yadda divs...
{% endfor %} 
```

**过滤器.py**

```
@register.inclusion_tag('events/list.html', takes_context=True)
def registration(context, event):
    request = context['request']
    profile = Profile.objects.get(user=request.user)
    attendees = [a.profile for a in Attendee.objects.filter(event=event)]
    if profile in attendees:
        'is_attending': context['is_attending']
        return is_attending
    else:
        return '' 
```

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T19:20:35.817

`'is_attending': context['is_attending']`不是有效的蟒蛇。相反，它看起来像一个部分字典。由于`.inclusion_tag()`代码应该返回一个字典，也许你的意思是：

```
if profile in attendees:
    return {'is_attending': context['is_attending']}
else:
    return {'is_attending': ''} 
```

另请注意，这`takes_context`意味着您*只会*将上下文作为参数。从[自定义标签上的howto](https://docs.djangoproject.com/en/stable/howto/custom-template-tags/#howto-custom-template-tags-inclusion-tags)：

> 如果您在创建模板标签时指定了takes_context，则标签将没有必需的参数，而底层Python 函数将有一个参数——调用标签时的模板上下文。

因此，您的标签应该是：

```
 {% registration %} 
```

并且您的完整方法可以`event`直接从上下文中获取参数：

```
@register.inclusion_tag('events/list.html', takes_context=True)
def registration(context):
    request = context['request']
    event = context['event']
    profile = Profile.objects.get(user=request.user)
    attendees = [a.profile for a in Attendee.objects.filter(event=event)]
    if profile in attendees:
        return {'is_attending': context['is_attending']}
    else:
        return {'is_attending': ''} 
```

# c# - .Net 更新 Session 对象的副作用

> ID：12079965
> 
> 赞同：0
> 
> 时间：2012-08-22T19:18:01.013
> 
> 标签：c#, session, webforms

`Session`我的 .Net Webforms 项目中的对象有一些奇怪的（至少对我而言）功能。我正在传递对象`Sessions`并且我没有使用任何`global`变量。我有如下描述的方法：

```
 private int Foo()
 {
     RmRule ruleInEdit = (RmRule)Session["ruleInEdit"];
     //here ruleInEdit.subjectAreaID=0
     bool isValid = Validate();
     if (isValid)
     {
        //do some stuff
        //here ruleInEdit.subjectAreaID is 10 instead of 0
        //the Validate function modified the ruleInEdit object 
      }

    //other code
  }

   private bool Validate()
   {
       bool isValid;
       //check some stuff
       RmRule rule = (RmRule)Session["ruleInEdit"];
       rule.subjectAreaID = 10;
       Session["ruleInEdit"] = rule;
       return isValid;
    } 
```

我认为 subjectAreaID 的值应该仍然是 0 但显然我误解了一些东西。`ruleInEdit`当我将对象写回.Net 时，.Net 如何（或为什么）自动更新对象`Session`。

*   在原始方法`Foo`中，我是否应该强制 ruleInEdit 再次读取会话以获取更新的对象和属性？
*   由于我初始化它的方式，这个对象是否与会话范围相关联？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T19:22:09.720

您不必将对象写回会话集合，它永远不会离开。

该对象只有一个实例，当您从会话集合中读取它时，它不会被复制。您对对象所做的任何更改都会立即对查看同一实例（即同一会话）的所有代码可见。

会话集合中存储的只是对对象的引用。对象本身存储在堆上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T19:28:29.950

当您使用 InProc（默认情况下）会话存储时，不会发生序列化。您由您的自定义类操作，这是引用类型。因此，当您的方法 Validate 从会话中检索对象时，实际上它只是一个您正在更改原始对象的指针。换句话说，RmRule 类型的对象在 Foo 和 Validate 方法中是相同的。

例如，您所期望的行为将是在将应用程序设置切换为在 SQL 服务器中存储会话之后。

# api - Pinterest 板列表

> ID：12079973
> 
> 赞同：5
> 
> 时间：2012-08-22T19:18:29.643
> 
> 标签：api, rss, pinterest

我正在寻找一种从给定用户名中获取董事会名称列表的方法。我知道 pinterest 已经为给定用户的所有 pin 和给定 pinboard 的所有 pin 提供了 rss。

来自给定用户的所有 Pin 图：pinterest.com/[user]/feed.rss

来自给定用户和董事会的所有引脚：pinterest.com/[user]/[board-name]/rss

现在我需要一种方法来获取给定用户的板列表，而不是引脚。我知道有办法做到这一点，因为 -> pinreach.com 做到了。

先感谢您 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T07:47:00.467

这是另一个带有 Pintrest 文档的非官方 API [http://pinterestapi.co.uk/](http://pinterestapi.co.uk/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T07:55:24.673

RSS 提要只有 25 个针脚。要获得板或所有图钉，您必须爬网该站点。没有其他办法了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T21:34:54.740

嘿，您可以查看这个非官方的 Pinterest API，您可以通过用户名搜索板 - [https://www.mashape.com/ismaelc/pinterest-1#endpoint-Show-User-Boards](https://www.mashape.com/ismaelc/pinterest-1#endpoint-Show-User-Boards)

示例结果如下：

```
 {
  "body": [
    {
      "name": "Books Worth Reading",
      "href": "http://pinterest.com/ismael/books-worth-reading/",
      "num_of_pins": 6,
      "cover_src": "http://media-cache-ec7.pinterest.com/222x/0c/31/22/0c3122735319edbf9b8aae28c9b22f86.jpg",
      "thumbs_src": [
        "http://media-cache-ec6.pinterest.com/75x75/2a/2d/7b/2a2d7b6f20f7518269b310b25d876810.jpg",
        "http://media-cache-ec4.pinterest.com/75x75/e6/05/05/e6050519c5686ae27ad649500965f39c.jpg",
        "http://media-cache-ec5.pinterest.com/75x75/07/64/c3/0764c392bae2b073c4c862a6503f09d6.jpg",
        "http://media-cache-ec4.pinterest.com/75x75/61/35/0a/61350ab6eb4bb0b0d09f7c191bf30d55.jpg"
      ]
    },
    {
      "name": "My Style",
      "href": "http://pinterest.com/ismael/my-style/",
      "num_of_pins": 0,
      "cover_src": false,
      "thumbs_src": false
    },
    {
      "name": "For the Home",
      "href": "http://pinterest.com/ismael/for-the-home/",
      "num_of_pins": 0,
      "cover_src": false,
      "thumbs_src": false
    },
    {
      "name": "Favorite Places & Spaces",
      "href": "http://pinterest.com/ismael/favorite-places-spaces/",
      "num_of_pins": 0,
      "cover_src": false,
      "thumbs_src": false
    }
  ],
  "meta": {
    "count": 4
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-28T18:05:26.033

您现在可以使用官方 Pinterest API 使用钩子来执行此操作： `https://api.pinterest.com/v1/me/boards/?access_token=********&fields=id%2Cname%2Curl`

首先，您需要进行身份验证并获得一个 access3ss 令牌。入门文档很好地解释了如何。[https://developers.pinterest.com/docs/api/overview/](https://developers.pinterest.com/docs/api/overview/)

# mysql - mysql：主键的重复条目

> ID：12079974
> 
> 赞同：1
> 
> 时间：2012-08-22T19:18:35.353
> 
> 标签：mysql, ruby

我正在运行我的 ruby​​ 脚本以加载到 mysql。它有一个错误：

> Mysql::Error: 键 'PRIMARY' 的重复条目 '4444281482'

我的主键是自动增量 ID (Big-INT)。我正在使用屏幕在具有不同数据的多个终端中运行脚本，以加载到同一个表中。这个问题以前从来没有发生过，但是当它发生时，不同终端中的所有脚本都可能会遇到这个问题。数据集不同。这似乎是随机发生的。可能是什么原因？为什么在自动增量字段中会有重复项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T19:38:01.870

您提到您正在使用不同的数据从不同的终端运行脚本。根据[MySQL 手册](http://dev.mysql.com/doc/refman/5.1/en/innodb-auto-increment-handling.html)，假设您的引擎是 InnoDB，由于每个事务针对一`AUTO_INCREMENT`列插入不同数量的行，引擎可能不知道将提前检索多少行。这可能解释了为什么您会收到重复的密钥错误。使用保持到语句末尾的表级锁，一次`INSERT`只能执行一条语句，并且自动递增数字的生成不会交错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T19:33:00.370

我很确定我遇到了这个问题 - 它与客户端无关（我的意思是它在我的应用程序、查询浏览器、cli 客户端等中都可以重现）。

如果您不介意 id 编号中的空白，您可以尝试

```
ALTER TABLE `tableName` AUTO_INCREMENT = 4444281492; 
```

（当然，您可以尝试添加 10 个以上的索引，例如 100000 以确保；）您始终可以使用相同的查询将计数器恢复为旧值）

这会将您的自动增量计数器更改为更大的数字并可能跳过无效索引 - 尽管我不知道这个问题的原因是什么（在我的情况下，它在 mysqld 重新启动或整个机器重新启动期间持续存在）

哦，我应该补充一下 - 我是在开发服务器上做的，如果这是生产，我会建议进一步调查。