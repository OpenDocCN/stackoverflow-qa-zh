# StackOverflow 问答 10351000-10351999

# javascript - javascript url未定义重定向

> ID：10351000
> 
> 赞同：0
> 
> 时间：2012-04-27T12:55:21.610
> 
> 标签：javascript, html

我有一些 javascript 将页面定向到新的 url，但我被定向到 www.myurl.com/undefined。

这就是我所拥有的，不知道是什么问题。我也试过 window.location

```
if (r == true) {
    window.location.href = ('http://www.myurl.com/pubs_delete.php?=id'.a_href)
}; 
```

感谢您的任何指点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T12:56:33.957

```
if (r == true) {
    window.location.href = 'http://www.myurl.com/pubs_delete.php?id=' + a_href
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T12:57:15.427

假设`a_href`是一个已定义的变量

```
...delete.php?id=' + a_href 
```

javascript 中的字符串连接 is `+`, not`.`并且等号放错了位置

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T13:00:36.810

结合两个答案：

```
if (r) {   // r == true is quite redundat
    window.location.href = "http://www.myurl.com/pubs_delete.php?id=" + a_href;
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T13:02:04.457

尝试这样的事情

```
 var a_href;
        if (r == true) {
            window.location.href = ('http://www.myurl.com/pubs_delete.php?=id'+a_href)
        }; 
```

使用+（**加**）符号的javascript连接，你正在使用.（**点**）符号，这对你来说是个问题

# jquery - 如何在 Jquery Mobile 和 Coldfusion8 的每个页面上使用登录表单设置登录？

> ID：10351002
> 
> 赞同：1
> 
> 时间：2012-04-27T12:55:34.843
> 
> 标签：jquery, jquery-mobile, login, coldfusion, coldfusion-8

我正在尝试在 Jquery Mobile/Coldfusion8 中设置用户身份验证。我只使用了一个星期的 Coldfusion，所以我仍然处于不稳定的状态。

假设我有以下 Jquery Mobile 页面：

```
// "outside"
index.cfm
content.cfm
content2.cfm
content3.cfm
// "inside" 
secure.cfm 
```

用户应该能够使用登录表单从所有外部页面登录。

我正在尝试考虑使用多个内容页面处理此问题的最佳方法，并且每个页面都有自己的登录名（无法更改）。问题是，当更改页面时，我在 DOM 中总是至少有两个页面，所以会有两个名为“LoginForm”的登录表单。

尽管如此，我还是尝试了，并收到此错误：

```
Variable THISFORM is undefined 
```

不知道为什么？可能是因为 index.cfm 页面上已经有一个“loginForm”。

**我的问题：**
关于我的错误的任何线索？

设置这样的东西的最佳方法是什么？我认为整个登录例程应该进入 index.cfm，因为这将是始终保留在 DOM 中的锚页面。我还将登录表单放在模板中并将其拉入每个页面，这也感觉不错。

但是应该如何处理我的登录表单的多个实例呢？

感谢帮助

**编辑：** 一些代码：

```
<!-- TEMPLATE -->
<CFFORM ACTION = "#ThisForm#" NAME = "LoginForm" > 
    <input name = "Username2" id="Username2" type="text" /> 
    <input name = "Password2" id= "Password2" type="password" /> 
    <input type = "submit" id="CheckLogin" name="CheckLogin" value="<cfoutput>#tx_login#</cfoutput>" /> 
</CFFORM>

<!-- INDEX PAGE and content pages all look like this -->
<cfoutput>    
    <div data-role="page" id="starter">
        <div data-role="header" data-position="fixed" data-theme="a">
            <h1><cfoutput>#tx_willkommen#</cfoutput > </h1>    
            <!-- this calls the template -->
            <CFINCLUDE TEMPLATE="../templates/tmp_pop.cfm">
        </div>
        <div data-role="content "...
</cfoutput>

<!-- inside application.cfm -->
<cfif Session.ative EQ "No ">
    <CF_index datasource="mydatabase "
        ...>

<!-- inside index.cfm -->
<cfif Session.ative EQ "No ">
    <CFPARAM NAME="Attributes.Datasource ">
    <CFPARAMs more params...
</cfif> 
```

不确定这是否有用，但您应该从中获得基本结构。可能是问题所在，如果没有会话处于活动状态，我只在 index.cfm 上设置参数。如果用户访问 index.cfm，设置了参数，则创建了一个会话。我想当我将下一页拉入 DOM 时，这些参数仍然有效，不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:39:45.507

我从来没有做过任何移动开发，但我们所做的只是设置一个 cookie，有一个过期时间，并在每次用户尝试访问页面时检查那个 cookie，并且只包含那个 cookie 检查文件

```
<cfinclude template="cookie_check.cfm"> 
```

cookie_check.cfm：

```
<CFIF IsDefined("cookie.User_Id") is False OR isDefined("cookie.password") is False
    <title>Login Error</title>
    <h3>You must login . Click here to <a href="index.cfm">login</a>.</h3>
    <CFABORT>
</CFIF> 
```

我假设您可以在您的页面上执行类似的操作。只需包含一个小的检查文件，如果它已过期，请显示登录页面。

# javascript - 如何使用jquery格式化数字

> ID：10351003
> 
> 赞同：2
> 
> 时间：2012-04-27T12:55:42.390
> 
> 标签：javascript, jquery

我正在尝试删除“。”之后的数字。然后我想将数字**(16810900.211233)**格式化为这样**(16,810,900)** 但我不知道该怎么做这是我的 html 是这样的：

```
<link rel="stylesheet" type="text/css" href="http://cdn.webrupee.com/font" />
<div class="main">
<p class="active">10200.00</p>
<p class="in_active">16810900.211233</p>
<p class="active">0</p>
<p class="in_active">-</p>
<p class="active">1278200.543554</p>
<p class="in_active">-</p>
<p class="active">-</p>
<p class="in_active">9,890.656</p>
<p class="active">10,200</p>
<p class="in_active">16810900</p>
<p class="active">0</p>
<p class="in_active">-</p>
<p class="active">1278200.09</p>
<p class="in_active">-</p>
<p class="active">-</p>
<p class="in_active">9890.00</p>
</div>​ 
```

我在这里试过[jsfiddle](http://jsfiddle.net/sureshpattu/Hrac3/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:02:01.933

摘自[http://ntt.cc/2008/04/25/6-very-basic-but-very-useful-javascript-number-format-functions-for-web-developers.html](http://ntt.cc/2008/04/25/6-very-basic-but-very-useful-javascript-number-format-functions-for-web-developers.html)

重新发明轮子没有意义.. :)

```
/**
* Formats the number according to the ‘format’ string;
* adherses to the american number standard where a comma
* is inserted after every 3 digits.
*  note: there should be only 1 contiguous number in the format,
* where a number consists of digits, period, and commas
*        any other characters can be wrapped around this number, including ‘$’, ‘%’, or text
*        examples (123456.789):
*          ‘0′ - (123456) show only digits, no precision
*          ‘0.00′ - (123456.78) show only digits, 2 precision
*          ‘0.0000′ - (123456.7890) show only digits, 4 precision
*          ‘0,000′ - (123,456) show comma and digits, no precision
*          ‘0,000.00′ - (123,456.78) show comma and digits, 2 precision
*          ‘0,0.00′ - (123,456.78) shortcut method, show comma and digits, 2 precision
*
* @method format
* @param format {string} the way you would like to format this text
* @return {string} the formatted number
* @public
*/ 

Number.prototype.format = function(format) {
  if (! isType(format, ’string’)) {return ”;} // sanity check 

  var hasComma = -1 < format.indexOf(’,'),
    psplit = format.stripNonNumeric().split(’.'),
    that = this; 

  // compute precision
  if (1 < psplit.length) {
    // fix number precision
    that = that.toFixed(psplit[1].length);
  }
  // error: too many periods
  else if (2 < psplit.length) {
    throw(’NumberFormatException: invalid format, formats should have no more than 1 period: ‘ + format);
  }
  // remove precision
  else {
    that = that.toFixed(0);
  } 

  // get the string now that precision is correct
  var fnum = that.toString(); 

  // format has comma, then compute commas
  if (hasComma) {
    // remove precision for computation
    psplit = fnum.split(’.'); 

    var cnum = psplit[0],
      parr = [],
      j = cnum.length,
      m = Math.floor(j / 3),
      n = cnum.length % 3 || 3; // n cannot be ZERO or causes infinite loop 

    // break the number into chunks of 3 digits; first chunk may be less than 3
    for (var i = 0; i < j; i += n) {
      if (i != 0) {n = 3;}
      parr[parr.length] = cnum.substr(i, n);
      m -= 1;
    } 

    // put chunks back together, separated by comma
    fnum = parr.join(’,'); 

    // add the precision back in
    if (psplit[1]) {fnum += ‘.’ + psplit[1];}
  } 

  // replace the number portion of the format with fnum
  return format.replace(/[\d,?\.?]+/, fnum);
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T13:15:50.987

```
$("p").text(function(i, v) {
    if (v == "-")
        return v; // or whatever you want to to with these
    v = v.split(".")[0]; // remove anything after the first "."
    v = v.replace(/[^\d]/g, ""); // remove non-numeric characters
    var group = 3;
    var min = v.length > 4 ? group : 4; // format thousands without separator
    for (var res=[], i=v.length; i>min; i-=group)
        res.push(v.substr(i-group, group));
    res.push(v.substr(0,i));
    return res.reverse().join(".");
}); 
```

即使没有为 4 字符数字设​​置千位分隔符，这也会格式化数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T13:09:51.940

[Globalize](https://github.com/jquery/globalize#numbers)库是实现目标的最简单方法。这允许您指定格式并说明不同文化处理数字分组的方式。例如：

```
Globalize.format(Math.round(16810900.211233)) 
```

结果是`16,810,900`

# jquery - 获取父级的索引，从另一个 div 中选择相同的索引

> ID：10351015
> 
> 赞同：0
> 
> 时间：2012-04-27T12:56:22.303
> 
> 标签：jquery, indexing

单击时，我试图获取所单击项目的父项的索引。然后，我想从另一个 div 中选择相同的索引。

我可以看到这是如何工作的：

```
var myIndex = $(this).parent().index(); 
```

但我有点困惑，然后使用该索引值/位置说“好的，现在在这个容器中查看这里并选择一个具有相同索引值的 div”，因为这不起作用：

```
$('#allFishAnswers:eq(myIndex)')... 
```

我设置了一个可笑的 HTML，它将显示两列。问题与解答。每个的源顺序很重要，因为这是将问题 1 归为答案 1 背后的基本逻辑。但是，通过使用每个的索引，它可以是动态的。只是简单的骨骼，希望能更好地可视化：

[http://jsfiddle.net/thumbslinger/KbL68/8/](http://jsfiddle.net/thumbslinger/KbL68/8/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:02:19.017

试试这个：

```
var myIndex = $(this).parent().index();
$('#allFishAnswers div').eq(myIndex).show(); // <-- whatever 
```

# asp.net-mvc-3 - jquery datepicker不工作，日期框不出现？

> ID：10351017
> 
> 赞同：0
> 
> 时间：2012-04-27T12:56:30.217
> 
> 标签：asp.net-mvc-3, jquery-ui, asp.net-mvc-3-areas

我尝试使用 jQueryUIHelpers.Mvc3，但是当我单击该框时，日期框选择器不会出现。我像这里一样安装了 jqueryUIHelpers.Mvc 3 包[http://jqueryuihelpers.apphb.com/Docmo/Overview/GettingStarted](http://jqueryuihelpers.apphb.com/Docmo/Overview/GettingStarted) 但是当我运行页面并单击日期框时，什么也没有出现。这是我的看法：

```
 @model MvcApplication4.Models.Reservation
          @using JQueryUIHelpers
          @{
         ViewBag.Title = "Create";
                }
        <head>
       <h2>Create</h2>
           <title>jQuery UI Helpers - @ViewBag.Title</title>

                 <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
             <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

          <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
       <link href="@Url.Content("~/Content/themes/base/jquery.ui.all.css")" rel="stylesheet" type="text/css" />       
      <script src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")" type="text/javascript"></script>
      <script src="@Url.Content("~/Scripts/jquery-ui-1.8.18.min.js")" type="text/javascript"></script>
     <script src="@Url.Content("~/Scripts/jquery-ui.unobtrusive.min.js")" type="text/javascript"></script>   
         </head>

       @using (Html.BeginForm()) {
     @Html.ValidationSummary(true)
<fieldset>
    <legend>Reservation</legend>

    <div>
                            <label for="anotherDate">Select another date: </label>
                                                                                                   @(Html.JQueryUI().Datepicker("anotherDate").MinDate(DateTime.Today).ShowButtonPanel(true)
      .ChangeYear(true).ChangeMonth(true).NumberOfMonths(2))
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:06:54.543

可能是因为您在验证 js 之后调用了 jquery 并且发生错误并且脚本停止运行。检查您的错误控制台并`jquery-1.7.1.min.js`在所有其他 jquery 插件 js 之前包含并重试。我在 datepicker 初始化函数中没有发现任何错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T13:14:22.237

我相信这是因为当您运行`Install-Package jQueryUIHelpers.Mvc3`当前版本时，安装`~/Scripts/jquery-ui-1.8.19.min.js`和`~/Scripts/jquery-1.7.2.min.js`. 但是，演示代码引用版本`~/Scripts/jquery-ui-1.8.18.min.js`以及`~/Scripts/jquery-1.7.1.min.js`您使用的版本。除非您手动安装了此文件，否则您将不会引用正确的版本。

# php - 计算两条平行线的重叠

> ID：10351020
> 
> 赞同：2
> 
> 时间：2012-04-27T12:56:42.587
> 
> 标签：php

我在 2D 空间中有 2 条平行线。这些行由 $min1、$max1、$min2、$max2 定义

我已经想出了如何检查它们是否重叠：

```
function overlap($min1,$max1,$min2,$max2){
  if(($min1<$min2 && $max1>$min2) 
    || ($min1<$max2 && $max1>$max2) 
    || ($min1==$min2 && $max1==$max2) 
    || ($min2>=$min1 && $max2<=$max1)
    || ($min1>=$min2 && $max1<=$max2)){
    return true;
}
return false;
} 
```

现在我必须检查重叠长度，但我不知道如何实现这一点。

我需要这个来获得分离轴定理实现中的最小平移向量

任何提示都会很棒。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-27T13:03:06.853

只是一个快速的想法，但我认为它有效。

将行中的最高起始值作为 将行中`start'`
的最低结束值作为`end'`

如果`start' < end'`您有 ( `end' - start'`)的重叠

# asp.net - 为什么“文件不存在”。Application_Error 中的异常无权访问会话数据？

> ID：10351021
> 
> 赞同：1
> 
> 时间：2012-04-27T12:56:51.113
> 
> 标签：asp.net, session, exception, exception-handling, application-error

当应用程序抛出“文件不存在”时，HttpContext.Current.Session 对象为空。Application_Error 事件中的异常。

```
protected void Application_Error(object sender, EventArgs e)
{
    Exception ex = HttpContext.Current.Server.GetLastError();
    if (ex.Message == "File does not exist." && HttpContext.Current.Session == null)
    {
        if (((System.Web.HttpException)(ex)).GetHttpCode() == 404)
        {
            LogtheException(Session["uname"].ToString());// Throwing the Exception Here
        }
    }
    else
    {
        LogtheException(Session["uname"].ToString());
        Server.Transfer(UrlMaker.ToError(ex.Message.ToString()));
    }
} 
```

抛出异常

```
Session state is not available in this context. 
```

如果任何 css/图像文件路径不正确，为什么 HttpContext.Current.Session 对象为空。相反，它应该抛出 FileNotFoundException 并且还可以访问会话数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:04:47.133

[此处](https://stackoverflow.com/questions/5977787/httpcontext-current-session-is-null-requesting-images-why)提出了一个类似的问题
Css 和图像请求通常不需要访问会话，因此 asp 不会将会话加载到内存中，并且您在错误时无权访问它。

# android - 如何在 Android 中同步 AsyncTask doInBackground() 方法中的语句

> ID：10351024
> 
> 赞同：1
> 
> 时间：2012-04-27T12:56:56.343
> 
> 标签：android, android-asynctask

我写了如下代码

公共类 SplashScreen 扩展 BaseActivity{

```
public void onCreate(Bundle savedInstanceState){        
  super.onCreate(savedInstanceState);
  new DownloadPlistTask().execute("background","Progress","yes");
}
private class DownloadPlistTask extends AsyncTask<String,String,String>{

 protected String doInBackground(String... dummy){
     return compareLocRemPlist();
 }
    protected void onProgressUpdate(String... progress){
      //some code here.
    }

  protected void onPostExecute(String result){
   //handle return type from doInBackground.
  }

 public String compareData(){
     final Timer timer = new Timer();
     timer.schedule( new TimerTask(){
       public void run(){
        //code regarding webservices.
        if(boolValue){
         //if the boolValue from the webservice is true,cancel the timer.
          timer.cancel();
          }
     },5*60*1000,5*60*1000);
     return "finish";
  }
 }  
} 
```

在上面来自 onCreate() 的代码中，我在 doInBackground 中调用了 AsyncTask doInBackground，在 doInBackground 中，我调用了一个名为 compareData() 的方法。在 compareData() 方法中，我使用了一个计时器。计时器发送了对 web 服务的请求，在 web 服务中，我得到了一个布尔值，如果为真，我需要返回完成。如果为假，我不想返回完成，我应该留在 compareData() 方法中，每五分钟它应该发送请求，直到我得到真。但是当计时器等待五分钟时，在此期间，计时器后的语句正在执行并且返回值完成返回到 doInBackground 并且控件将转到 onPostExecute() 但在后台计时器正在运行。当我取消计时器时如何返回完成

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:21:51.280

由于您正在运行它`doInBackground`，因此您可以同步执行检查。因此，您可以使用该`Thread.sleep`方法来代替计时器。

```
static final long RETRY_DURATION = 5*60*1000;
public String compareData(){
    boolean boolValue = false;
    do{
        //code regarding webservices.
        if(!boolValue){
            try{
                Thread.sleep(RETRY_DURATION);
            }catch(InterruptedException ex){
                ex.printStackTrace();
            }
        }
    }while(!boolValue);
    return "finish";
} 
```

# android - 设备媒体按钮的接收器不是“媒体按钮”

> ID：10351026
> 
> 赞同：0
> 
> 时间：2012-04-27T12:57:09.707
> 
> 标签：android, media-player, broadcastreceiver

我的目标是使用从另一个应用程序接收到的媒体按钮事件启动服务（即，用户何时在给定的媒体应用程序中选择播放/暂停）。问题是，我需要针对他们设备上的媒体按钮，而**不是他们的耳机。**

**为了澄清**，我知道 ACTION_MEDIA_BUTTON 并且几乎可以肯定它对我的目的没有任何价值。不过我可能是错的。但我很确定。

**我需要**一种针对设备本身的媒体按钮的方法。

我完全迷路了，睡眠不足。任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T13:53:05.620

> 问题是，我需要针对他们设备上的媒体按钮，而不是他们的耳机。

对于数以亿计的设备，他们的设备上没有硬件媒体按钮，也许除了音量按钮。如果您正在处理具有其他硬件媒体按钮的特定设备，则需要联系设备制造商了解详细信息。

如果通过“媒体按钮”和“用户何时在给定的媒体应用程序中选择播放/暂停”，您正试图监视其他应用程序，出于明显的隐私原因，这是不可能的。一些媒体播放器有一个用于宣布曲目更改等的 API，您可能可以使用它，但我不知道没有标准 API，AOSP 音乐应用程序和谷歌专有的 Play 音乐应用程序都没有任何此类记录和支持的 API。

# jsf - p:selectonemenu 不工作 (JSF)

> ID：10351029
> 
> 赞同：-1
> 
> 时间：2012-04-27T12:57:22.547
> 
> 标签：jsf, primefaces, selectonemenu

我有这个问题。我想为自定义选择一些数据创建 selectOneMenu。但它不起作用，我真的不知道为什么。我花了 cca 5 个小时来解决这个问题。我好绝望。所以我的一些代码：

但是当我从 selectonemenu 中选择一些项目时，selected_id 仍然是 0。仍然，仍然。我试图做几乎所有事情，但没有结果。

我试过这个：

```
 <p:selectOneMenu value="#{medicinesBean.selectedBranch}" required="true" effect="fade" id="listComboBox">
                <f:selectItems value="#{medicinesBean.branchesForComboBox}" var="itm" itemLabel="#{itm.name}" itemValue="#{itm.id}" />
            </p:selectOneMenu>

    Backing Bean class:

     /* private members */
        private ArrayList<BranchDTO> branchesForComboBox = new ArrayList<BranchDTO>();
        private BranchDTO selectedBranch;

    /* getter and setters ... */ 
```

我也用 SelectItem[] 模型试过这个，但结果是一样的。不行。

然后我试了一下：

```
<p:selectOneMenu value="#{medicinesBean.selected_id}" required="true" effect="fade" id="listComboBox">
                <f:selectItem itemLabel="First" itemValue="1"/>
                <f:selectItem itemLabel="Second" itemValue="2"/>
                <f:selectItem itemLabel="Third" itemValue="3"/>
                <f:selectItem itemLabel="Fouth" itemValue="4"/>
</p:selectOneMenu>

/* private members */
private int selected_id; 
```

但仍然为 0。当我为 selectonemenu 使用类似值的对象时，总是返回空异常。所以我很乐意为此提供任何建议。谢谢

brw。支持 bean 是 ViewScoped 并且来自 DAO 的数据被正确返回，因此组件 selectonemenu 中会出现一些错误。

* * *

谢谢BalusC，所以这是我的实现

支持豆

```
/**
 * @author Sajmon
 */

package OraclBeans;

import DTOs.PobockaDTO;
import DTOs.ZoznamLiekovDTO;
import EJBs.ZoznamLiekovEJB;
import java.io.Serializable;
import java.util.ArrayList;
import javax.annotation.PostConstruct;
import javax.ejb.EJB;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;

@ManagedBean(name="zoznamLiekovBean")
@ViewScoped
public class ZoznamLiekovBean implements Serializable {

    @EJB
    private ZoznamLiekovEJB listOfMedicineEJB;

    /* private members */
    private ArrayList<ZoznamLiekovDTO> listOfMedicines;
    private ArrayList<PobockaDTO> branchesForCombobox = new ArrayList<PobockaDTO>();
    private ZoznamLiekovDTO selectedItem;
    private PobockaDTO selectedBranch;
    //private SelectItem[] branchesOptions;
    //private SelectItem selectedOption;
    private int selected_id;

    public ZoznamLiekovBean() {
    }

    @PostConstruct
    private void init() {
        branchesForCombobox = listOfMedicineEJB.getBranches();
        listOfMedicines = listOfMedicineEJB.getLists();
    }

    public void test() {
       System.out.println("ID: " + selected_id);
    }

    /*
    private SelectItem[] addItemsToOptions() {
        SelectItem[] data = new SelectItem[branchesForCombobox.size()];
        for (int i = 0; i < branchesForCombobox.size(); i++) {
            data[i] = new SelectItem(branchesForCombobox.get(i).getId(), branchesForCombobox.get(i).getNazov());
        }
        return data;
    }
    */

    /* getters and setters */

    /*
    public SelectItem[] getBranchesOptions() {
        return branchesOptions;
    }

    public void setBranchesOptions(SelectItem[] branchesOptions) {
        this.branchesOptions = branchesOptions;
    }

    public void setSelectedOption(SelectItem selectedOption) {
        this.selectedOption = selectedOption;
    }

    public SelectItem getSelectedOption() {
        return selectedOption;
    }
    */

    public ArrayList<PobockaDTO> getBranchesForCombobox() {
        return branchesForCombobox;
    }

    public void setBranchesForCombobox(ArrayList<PobockaDTO> branchesForCombobox) {
        this.branchesForCombobox = branchesForCombobox;
    }

    public ArrayList<ZoznamLiekovDTO> getListOfMedicines() {
        return listOfMedicines;
    }

    public void setListOfMedicines(ArrayList<ZoznamLiekovDTO> listOfMedicines) {
        this.listOfMedicines = listOfMedicines;
    }

    public PobockaDTO getSelectedBranch() {
        return selectedBranch;
    }

    public void setSelectedBranch(PobockaDTO selectedBranch) {
        this.selectedBranch = selectedBranch;
    }

    public ZoznamLiekovDTO getSelectedItem() {
        return selectedItem;
    }

    public void setSelectedItem(ZoznamLiekovDTO selectedItem) {
        this.selectedItem = selectedItem;
    }

    public int getSelected_id() {
        return selected_id;
    }

    public void setSelected_id(int selected_id) {
        this.selected_id = selected_id;
    }
} 
```

EJB：

```
/**
 * @author Sajmon
 */

package EJBs;

import DTOs.PobockaDTO;
import DTOs.ZoznamLiekovDTO;
import OraclDAO.OracleZoznamLiekovDAO;
import java.io.Serializable;
import java.util.ArrayList;
import javax.ejb.Stateless;

@Stateless
public class ZoznamLiekovEJB implements Serializable {

    private OracleZoznamLiekovDAO dao = new OracleZoznamLiekovDAO();

    public ArrayList<ZoznamLiekovDTO> getLists() {
        return dao.getListOfMedicines();
    }

    public ArrayList<PobockaDTO> getBranches() {
        return dao.getBranchesForCombobox();
    }
} 
```

道：

```
/**
 * @author Sajmon
 */

package OraclDAO;

import DTOs.PobockaDTO;
import DTOs.ZoznamLiekovDTO;
import OraclDAOFactory.OracleDAOFactory;
import java.io.Serializable;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.logging.Level;
import java.util.logging.Logger;

public class OracleZoznamLiekovDAO implements Serializable {

    private String SELECT_ALL = "SELECT Z.id_zoznamu, P.nazov_pobocky, L.nazov_lieku FROM Zoznam_liekov Z "
            + "JOIN Pobocka P ON (Z.id_pobocky = P.id_pobocky)"
            + "JOIN Liek L ON (Z.id_lieku = L.id_lieku)";
    private String SELECT_BRANCHES = "SELECT DISTINCT P.id_pobocky, P.nazov_pobocky FROM Zoznam_liekov Z JOIN Pobocka P ON (Z.id_pobocky = P.id_pobocky)";

    public OracleZoznamLiekovDAO() {

    }

    public ArrayList<PobockaDTO> getBranchesForCombobox() {

        ArrayList<PobockaDTO> data = new ArrayList<PobockaDTO>();
        PobockaDTO item;
        Connection con = null;
        PreparedStatement ps = null;
        ResultSet rs = null;

        try {
            con = OracleDAOFactory.getOracleDatabaseConnection();
            ps = con.prepareStatement(SELECT_BRANCHES);
            rs = ps.executeQuery();
            while (rs.next()) {
                item = new PobockaDTO();
                item.setId(rs.getInt(1));
                item.setNazov(rs.getString(2));
                data.add(item);
            }
            System.out.println("Data imported to list successfully.");
        }
        catch (SQLException ex) {
            Logger.getLogger(OracleZoznamLiekovDAO.class.getName()).log(Level.SEVERE, null, ex);
        }
        finally {
            if (con != null) {
                try {
                    con.close();
                }
                catch (SQLException ex) {
                    Logger.getLogger(OracleZoznamLiekovDAO.class.getName()).log(Level.SEVERE, null, ex);
                }
            }
        }
        return data;
    }

    public ArrayList<ZoznamLiekovDTO> getListOfMedicines() {

        ArrayList<ZoznamLiekovDTO> data = new ArrayList<ZoznamLiekovDTO>();
        ZoznamLiekovDTO item;

        Connection con = null;
        PreparedStatement ps = null;
        ResultSet rs = null;

        try {
            con = OracleDAOFactory.getOracleDatabaseConnection();
            ps = con.prepareStatement(SELECT_ALL);
            rs = ps.executeQuery();
            while (rs.next()) {
                item = new ZoznamLiekovDTO();
                item.setId(rs.getInt(1));
                item.getPobocka().setNazov(rs.getString(2));
                item.getLiek().setNazov(rs.getString(3));
                data.add(item);
            }
            System.out.println("List of Medicines imported successfully.");

        } 
        catch (SQLException ex) {
            Logger.getLogger(OracleZoznamLiekovDAO.class.getName()).log(Level.SEVERE, null, ex);
        }
        finally {
            if (con != null) {
                try {
                    con.close();
                } 
                catch (SQLException ex) {
                    Logger.getLogger(OracleZoznamLiekovDAO.class.getName()).log(Level.SEVERE, null, ex);
                }
            }
        }
        return data;
    }
} 
```

和 XHTML：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui" 
      xmlns:f="http://java.sun.com/jsf/core">
    <h:head>
        <title>Zoznam liekov - prehľad</title>
        <link rel="stylesheet" type="text/css" href="../style.css" />
    </h:head>
    <h:body>
        <div id="out">
        <h:form id="mainForm">
            <p:selectOneMenu value="#{zoznamLiekovBean.selected_id}" required="true" effect="fade" id="zoznamComboBox">
                <f:selectItems value="#{zoznamLiekovBean.branchesForCombobox}" var="itm" itemLabel="#{itm.nazov}" itemValue="#{itm.id}"/>
            </p:selectOneMenu>
            <p:commandButton immediate="true" styleClass="submitClass" value="Generuj zoznam" update="dialogText" actionListener="#{zoznamLiekovBean.test()}"/>
            <p:dataTable style="width: 1100px" widgetVar="zoznamLiekovTable" selection="#{zoznamLiekovBean.selectedItem}" selectionMode="single" rowKey="#{item.id}" var="item" value="#{zoznamLiekovBean.listOfMedicines}" rows="5" rowsPerPageTemplate="5,10,15,20"
                         paginator="true" paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink}">
                <p:column>
                    <f:facet name="header">ID:</f:facet>
                    <h:outputText value="#{item.id}"/>
                </p:column>

                <p:column>
                    <f:facet name="header">Pobočka:</f:facet>
                    <h:outputText value="#{item.pobocka.nazov}"/>
                </p:column>

                <p:column>
                    <f:facet name="header">Liek:</f:facet>
                    <h:outputText value="#{item.liek.nazov}"/>
                </p:column>
            </p:dataTable>

            <p:dialog widgetVar="test" showEffect="explode" hideEffect="explode">
                <h:outputText id="dialogText" value="#{zoznamLiekovBean.selected_id}"/>
            </p:dialog>
        </h:form>
        </div>
    </h:body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T10:46:49.520

从. `immediate="true"`_ `commandButton`您正在跳过整个**应用请求值阶段 -**使用它更新模型值阶段。这就是为什么您的值始终为`null`0 的原因。

[看一下这个](https://stackoverflow.com/questions/4731740/doubt-on-immediate-attribute-for-command-button)

# java - Java EE 在 Hudson / Jenkins 中提供了依赖项

> ID：10351038
> 
> 赞同：0
> 
> 时间：2012-04-27T12:58:08.770
> 
> 标签：java, jakarta-ee, maven-2, hudson, jenkins

我正在尝试在 Jenkins 上构建基于 Maven 的 Java EE 项目，但出现编译错误。原因似乎是在构建项目时没有下载在 POM 中足够逻辑地标记为提供的 Java EE 依赖项。

如何设置 POM 以便构建在 Jenkins 中工作，但 EE 依赖项不包含在 WAR 文件中？

我提前感谢您提供的任何意见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T13:03:11.813

这很奇怪，AFAIK 具有“提供”范围的依赖项根本没有放在构建文件中，但是应该下载它们。您确定您的 Maven 已正确配置为下载依赖项 - 可能存在未配置的代理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T13:11:29.403

不确定它是否是最佳解决方案，但您可以添加范围为“已提供”的 EE 依赖项，如示例：

```
 <dependency>
        <groupId>org.apache.tomcat</groupId>
        <artifactId>tomcat-servlet-api</artifactId>
        <version>7.0.27</version>
        <type>jar</type>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.el</groupId>
        <artifactId>javax.el-api</artifactId>
        <version>2.2.4</version>
        <type>jar</type>
        <scope>provided</scope>
    </dependency> 
```

也许有一个插件可以为您提供所有这些，但我不确定。

希望有帮助

# php - 在 wordpress 中的主页模板中加载不同的 div

> ID：10351039
> 
> 赞同：1
> 
> 时间：2012-04-27T12:58:09.393
> 
> 标签：php, wordpress, html

我正在开发一个自定义的 wordpress 主页。我希望它在标题中加载到不同的 div 中。

标题现在为每个页面加载#content div。但是如果主页加载，我想让它加载#contenthome div。

我正在使用这个 php 代码：

```
<?php if (is_page_template('template-home.php'))  { ?>
<div id="contenthome">
<?php } else { ?>
<div id="content">
<? } ?> 
```

我对php相当陌生。所以我希望你们能帮助我:)

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:41:10.990

或这个：

```
if(is_home())
{
    <div id="contenthome">
<?php } else { ?>
    <div id="content">
<? } ?> 
```

就个人而言，当涉及到这样的情况时，我更喜欢用速记方式写东西。还可以考虑使用它来缩短您的代码：

```
<div id="<?php echo is_home() ? 'contenthome' : 'content'; ?>"> 
```

**附加说明：**如果您的 <body> 标签添加了 Wordpress body_class()，您几乎可以使用 CSS 定位单个页面，即使它们使用相同的模板。与任何其他页面一样，主页将应用一个独特的正文类，然后您可以定位该特定页面。

因此，如果您的问题只是能够针对任何给定页面而不考虑使用 CSS 的模板，那么您不一定需要将任何唯一的 div 应用于您的页面。例如：

```
<style type="text/css">
#content{display:block;}
.home #content{display:none;}
</style> 
```

这将仅在主页上隐藏内容 div。这可能不是您想要的，但您可以看到页面本身是如何被定位为覆盖默认行为的。

**更新：**根据您的最新问题，如果您需要另一个特定页面来使用该条件，请使用 is_page() ，如下所示：

长代码：

```
if(is_home() || is_page('posts_page_title'))
{
    <div id="contenthome">
<?php } else { ?>
    <div id="content">
<? } ?> 
```

速记：

```
<div id="<?php echo is_home() || is_page('posts_page_title') ? 'contenthome' : 'content'; ?>"> 
```

如果您愿意，也可以使用 is_page('posts_page_ID') 或 is_page('posts_page_slug')。玩弄它，看看什么最适合你。更多信息在这里：[http ://codex.wordpress.org/Function_Reference/is_page](http://codex.wordpress.org/Function_Reference/is_page)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T13:15:17.543

参考这篇[文章](https://stackoverflow.com/questions/4837006/how-to-get-the-current-page-name-in-wordpress)试试这个....

```
$pagename = get_query_var('pagename');
if ($pagename = 'template-home.php') {

<div id="contenthome">

<?php } else { ?>

<div id="content">

<? } ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T13:16:58.320

似乎您已经在主题中为主页创建了一个文件，并将其命名为**template-home.php**

从这一点开始，您有两个选择：

1）您可以只定义一个常量（或变量）并决定仅在定义时使用哪个div；如果您将使用变量，请记住在 header.php 中您实际上是在一个函数 (get_header) 中，您需要使用 global 来访问它

2）如果您预见到主页和 wordpress 其余部分之间的标题结构之间存在任何其他差异，您可以使用另一个文件作为标题。为此，请在您的 template-home.php 文件中为 get_header 函数提供一个参数，例如 get_header('home')

如果你这样做 header-home.php 将被加载而不是 header.php

# file - 拥有数百万用户的全球方是如何做到如此之快的？

> ID：10351040
> 
> 赞同：0
> 
> 时间：2012-04-27T12:58:10.310
> 
> 标签：file, query-optimization, database-connection

您能否帮助我提供一些参考/文献/来源/网络，我可以在其中找到有关优化包含大量数据的网站的方法的更多信息。目标是创建一个站点，每个人都可以访问数据/文件，并且不需要使用即 MS 终端或 vmware 查看器从我们其他位置访问数据。我应该投资内部服务器还是寻找云？我想知道从哪里开始。这是来自dummy的问题，但感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T13:07:37.983

使 facebook、google 等网站如此快速的一个方面是它们在世界不同的地方复制他们的服务器，这样用户就不会遇到当你尝试联系另一端的网站时发生的延迟世界。

使用的服务器也非常高端，因此它们能够一次处理大量同时请求。

最后，可能最重要的方面之一是数据库模式、代码和架构不断改进以尽可能快地工作。

# facebook - 测试用户页面 - 我们可以通过 API 创建它们吗？

> ID：10351041
> 
> 赞同：1
> 
> 时间：2012-04-27T12:58:11.750
> 
> 标签：facebook, api, testing

我们开发了一个 FB 应用程序，可以从用户页面读取/分析 Insights 数据。对于管理大量页面（> 25）的用户，我们遇到了 OAuth 问题。

我们正在寻找一种方法来自动创建具有大量页面的测试用户，但您似乎无法使用 API 创建页面： [在此讨论中提到](http://facebook.stackoverflow.com/questions/4574579/create-a-new-facebook-page-via-the-fb-api)

有什么方法可以自动为 TEST USERS 创建页面？这对设置测试环境有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T13:37:53.713

不幸的是，根本没有办法创建页面。

所以**不**，你不能

# php - 提交表单并在 AJAX 和 PHP 的另一个选项卡中显示文本框值

> ID：10351046
> 
> 赞同：2
> 
> 时间：2012-04-27T12:58:26.633
> 
> 标签：php, javascript, jquery, ajax

我有一个带有 a`textarea`和 a的表格`button`。要`textarea`在按钮单击的同一窗口的另一个选项卡中显示值，我使用了这个：

```
<input type="button" name="preview" id="inline_submit_a" value="PREVIEW" />
<script>
    $('#inline_submit_a').click(function(evt) {
        var msg = document.getElementById('message').value;
        var myLineBreak = msg.replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g, '<br />');

        jQuery.ajax({
            type: 'POST',
            url: '/someajax.php',
            data: "msg="+myLineBreak,
            success: function(data) {
                window.open("<?=SITEURL?>includes/templates/preview/template1/postoffer_preview.php?offer="+data,'_blank');
                return false;
            }
        });
    });
</script> 
```

我通过查询字符串发送，

1.  如何通过 POST 而不是查询字符串 (GET) 将值发送到另一个页面，因为它最多只需要有限的字符。

2.  另外，如何获取 html 内容（带中断），我使用了这个：`var myLineBreak = msg.replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g, '<br />');` 但是中断了一些文本。

3.  此外，`window.open("<?=SITEURL?>test.php?msg="+data,'_blank');`这在 Firefox 中效果很好，但在 Chrome 中，它会打开一个新窗口，

有人可以帮我解决这个问题..我是否朝着正确的方向前进？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:52:23.063

像这样，使用 form.target 和空 window.open （代码未测试）：

```
<form name="myform" action="postoffer_preview.php" target="myNewWin" method=post"> 
   <input type="button" name="preview" id="inline_submit_a" value="PREVIEW" />
</form> 

<script>
    var open_post_window = function () 
    { 
        window.open("","myNewWin","width=500,height=300,toolbar=0"); 
        document.myform.submit(); 
    } 

    $('#inline_submit_a').click(function(evt) {
        var msg = document.getElementById('message').value;
        var myLineBreak = msg.replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g, '<br />');

        jQuery.ajax({
            type: 'POST',
            url: '/someajax.php',
            data: "msg="+myLineBreak,
            success: function(data) {
                open_post_window();
                return false;
            }
        });
    });
</script> 
```

可能需要在 document.myform.submit() 上添加一点 setTimeout。

# vb6 - 如何使用 vb6 编码在 Visual Basic 6 中添加 dll 引用？

> ID：10351047
> 
> 赞同：0
> 
> 时间：2012-04-27T12:58:27.167
> 
> 标签：vb6, activex

我在 vb6 中制作了一个 exe 文件，它使用了一个 dll 文件的引用。当我在其他系统中尝试该 exe 时，出现以下错误：

> 错误 429，Activex 组件无法创建对象

请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:04:26.697

您需要在目标机器中安装引用的 DLL 并按照作者的说明进行注册。

如果您告诉我们它是什么组件/DLL/库，您可能会得到更具体的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:12:07.007

```
copy your dll in %winsys%\system32\
registers -i mydll.dll

%winsys% = c:\windows
%winsys% = c:\winnt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-04T17:31:36.557

你需要做的是这个。

1）注册您制作的DLL。使用-regsvr32

2) 在注册表中找出您的 dll 项目名称的 ProgID (cmd =regedit) - [https://msdn.microsoft.com/en-us/library/dd542719(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/dd542719(v=vs.85).aspx)

3) 调用 CreateObject 函数 - [https://msdn.microsoft.com/en-us/library/7t9k08y5(v=vs.90).aspx](https://msdn.microsoft.com/en-us/library/7t9k08y5(v=vs.90).aspx)

现在是编程:)

# logging - SharePoint 2010 项目级别审核

> ID：10351054
> 
> 赞同：1
> 
> 时间：2012-04-27T12:58:40.390
> 
> 标签：logging, sharepoint-2010

我们正在尝试在 SharePoint 中进行项目级别审核，以显示查看了哪些项目（例如项目的 ID）。现在我们只得到关于视图的 aspx 的信息，而不是查看的项目。有没有办法将此添加到审核日志中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:47:42.150

查找网站集级别设置 - 查看/编辑.... 然而，有时完整的 SharePoint 审核可能无法捕获详细信息，或者会在不明显的事件下捕获它。查看内容数据库中的 AuditData 表以综合审核日志的来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-06T10:32:14.257

您需要按照以下给定步骤设置项目级别审核：

1.  转到网站集中顶级网站的“网站设置”页面
2.  在“网站设置”页面的“网站集管理”部分中，单击“网站集审核设置”链接
3.  配置审核设置页面，识别任何审核日志修剪设置，并选择要审核的项目  

从这里获得更多帮助：http: [//sharepointthomas.blogspot.in/2011/07/how-to-enable-audit-functionality-in.html](http://sharepointthomas.blogspot.in/2011/07/how-to-enable-audit-functionality-in.html)  ）

如果你想在代码中检索审计数据，你可以使用 SPAudit.GetEntries - [https://msdn.microsoft.com/en-us/library/ms457256(v=office.14).aspx](https://msdn.microsoft.com/en-us/library/ms457256(v=office.14).aspx)   )。

# lisp - 如何在 Lisp 格式函数中打印空白字符？

> ID：10351055
> 
> 赞同：3
> 
> 时间：2012-04-27T12:58:41.063
> 
> 标签：lisp, whitespace

我希望有人能帮我解决这个问题，因为我找不到任何有用的答案，而且我是 Lisp 的新手。

我要做的是测试一个元素的值，如果它是 1 则打印一些东西，否则打印空白字符。这在所有列表参数的值都为 1 时有效：

```
(defun print-lst (list)
  (format t "~%~a ~a ~a~%"
          (if (= (nth 0 list) '1)
              '¦)
          (if (= (nth 1 list) '1)
              'P)
          (if (= (nth 2 list) '1)
              '¦))) 
```

所以输出是`¦ P ¦`。但是，如果列表中的第二个元素是 0，它会在那个位置打印 NIL，`¦ NIL ¦`我希望它打印一个空格`¦ ¦`（不仅仅是跳过那个字符`¦¦`，如果输出行的那个位置有一个空白字符很重要测试值不是 1)。

`(if (= (nth 1 list) '1) 'P)`如果条件不满足，是否有任何方法可以返回空白字符，或者是否有其他方法可以执行此操作？我希望我解释得很好。谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T16:23:27.780

如果你想充分利用 的力量`format`，你可以使用格式条件和格式 GOTO 的组合。

像这样：

```
[1]> (format nil "~@{~:[<nothing>~;~:*~A~]~^ ~}" 1 2 nil 4 nil 6)
"1 2 <nothing> 4 <nothing> 6" 
```

在您的情况下，这应该有效：

```
(format t "~&~@{~:[ ~;~:*~A~]~^ ~}"
        ...) 
```

这通过执行以下操作来工作：

1.  `~&`插入换行符，除非我们已经在行首。
2.  `~@{...~}`迭代地处理参数。
3.  `~:[...~;...~]``nil`在 case和 non- case之间进行选择`nil`。
4.  `~:*`取消使用 . 使用的参数`~:[...~]`。
5.  `~A`输出正在处理的项目。
6.  `~^`在最后一次迭代时从循环中逃脱（以免在最后一项之后输出过多的空间）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T13:32:25.050

`If`接受三个参数：condition、then-form、else-form；else-form 是可选的。此外，我会对文字字符使用文字字符语法。

```
(if (= (nth 0 list) 1)
    #\P
    #\Space) 
```

文档：

*   [特殊形式`if`](http://www.ai.mit.edu/projects/iiip/doc/CommonLISP/HyperSpec/Body/speope_if.html#if)

*   [字符语法](http://www.lispworks.com/documentation/HyperSpec/Body/02_dha.htm)

*   [角色名称](http://www.lispworks.com/documentation/HyperSpec/Body/13_ag.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T13:49:04.007

反问：
您真的需要作为标识符的输出值（“某物”）还是字符串文字也可以工作（“某物”）？

如果第一个是真的：我想不可能使用空格作为标识符。
如果第二个为真：使用“|”、“P”和“”作为输出值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T14:41:59.143

[格式是等待吞噬粗心的野兽](http://marcoil.org/archive/170)。

也就是说，看起来您可能想在这里使用它的一些更高级别的指令。查看 Lisp Hyperspec 的[格式化输出](http://www.lispworks.com/documentation/HyperSpec/Body/22_c.htm)部分和[PCL 的格式章节](http://www.gigamonkeys.com/book/a-few-format-recipes.html)（具体来说，查看处理条件格式的部分）。

# javascript - 如何限制每个自定义时间的 AJAX 请求

> ID：10351057
> 
> 赞同：1
> 
> 时间：2012-04-27T12:58:43.210
> 
> 标签：javascript, ajax, jsp, request, limit

如果我有一个搜索框，它会为每个 keyup 事件加载建议。我认为对于我的服务器来说，响应每个 keyup 事件的每个请求会变得最糟糕，这可能在一秒钟或更长时间内大约 10 次。我的意思是应该有一些 AJAX 请求限制功能来限制每秒或任何特定时间的请求。您能通过编码示例告诉我如何限制 ajax 请求吗？

第二件事，如果我们使用 JSP 来限制 AJAX 请求，我想分享一下。将 JSP 用作客户端语言是否是一个好主意，并且恶意用户可以轻松删除那些 ajax-request-limiting 功能并破坏服务器。

或者 ！有什么补救措施吗？

谢谢阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:22:33.647

你可以自己写一个去抖方法：

```
var timer = null;
searchInput.addEventListener('keyup', function (evt) {
    clearTimeout(timer);
    timer = setTimeout(function () {
        // this event listener will postpone its execution until after 1 second have elapsed since the last time it was invoked
        // send your ajax request here
    }, 1000);
}, false); 
```

或者您可以使用[下划线](http://documentcloud.github.com/underscore/#debounce)来限制 keyup 事件：

```
searchInput.addEventListener('keyup', _.debounce(function (evt) {
    // this event listener will postpone its execution until after 1 second have elapsed since the last time it was invoked
}, 1000), false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T13:45:34.767

您需要设置一个计时器，该计时器将在每次发生关键事件时重置。如果在计时器结束之前没有按下任何键，则发送您的 ajax 请求。

# php - PHP 'is_dir' 与 'urldecode' 组合为假，与字符串值相同为真？

> ID：10351059
> 
> 赞同：0
> 
> 时间：2012-04-27T12:58:57.763
> 
> 标签：php, character-encoding, filesystems

我有一个奇怪的问题。在我的开发服务器上，所有东西都可以工作，但在实时服务器上却不行。我有一个文件夹，里面有一个像“ö”这样的特殊字符。在开发服务器上，我这样做是为了检查文件名是否为目录（$dir =“coördinatie”）：

```
 if (is_dir(urldecode($dir)))
  echo "true";
 else {
  echo "false";
 } 
```

结果是真的。在实时服务器上，结果是错误的。奇怪的是......硬编码的字符串工作正常，结果是真的。像这样：

```
 if (is_dir("coördinatie"))
  echo "true";
 else {
  echo "false";
 } 
```

我尝试将类型转换为字符串等，但我无法弄清楚。希望有人有线索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:03:27.047

我的猜测是：

`urldecode`通常解码为 UTF-8。
您的硬编码字符串可能是 Latin-1，因为源代码是这样保存的。
本地机器上的文件系统（函数）如 Unicode，生产中的文件系统（函数）如 Latin-1。

您可能必须将字符串转换为文件系统所需的编码。
您可以通过比较`bin2hex`两个字符串的值来证实我的怀疑。

# google-plus - Google+ 分享插件 - 我无法在我的 +1 更新中显示所需的图像

> ID：10351060
> 
> 赞同：1
> 
> 时间：2012-04-27T12:59:01.213
> 
> 标签：google-plus

我正在使用同时进行 +1 和分享的 Google+ 分享插件。

不幸的是，我无法获得我指定出现的图像。

我使用的是符合尺寸要求的 200 像素 x 200 像素的图像。我可以获得名称和描述以按指定显示。

以下是我正在使用的代码：

```
<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/Vacancy">
<head>

<meta itemprop="name" content="Vacancy">
<meta itemprop="description" content="A new job vacancy etc">
<meta itemprop="image" content="https://encrypted-tbn3.google.com/images?q=tbn:ANd9GcQBafMb42NGLi-C-NEmdC-RQDJ5t8PRahD4uTdpOuSAnD5_gMU1_g">

</head>

<body> 

<!-- Place this tag where you want the +1 button to render -->
<g:plusone annotation="inline"></g:plusone>

<!-- Place this render call where appropriate -->
<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>

</body>

</html> 
```

除了 +1 共享上未显示正确的图像外，一切正常。

非常感谢这方面的任何帮助。

非常感谢，

玛丽

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:53:14.060

您提供的代码对我有用。您的代码段中显示了一张 160 像素正方形的猫的图像。

![片段的屏幕截图](../Images/778778e8913812663c4fda06591c6daa.png)

# javascript - Button Click 如何触发 httphandler Asp.net

> ID：10351061
> 
> 赞同：1
> 
> 时间：2012-04-27T12:59:01.963
> 
> 标签：javascript, asp.net, ajax, vb.net, httphandler

我有一个网络表单应用程序。

该页面有一个 from 其中包含一组文本框和一个**ASP:FileUploader**。

一个名为**“上传”**的按钮将上传文件与保存整个表单分开。

我设置了一个 httpHandler 来分块上传文件，它应该在用户单击“上传”后触发。

我制定的唯一方法是`PostBackURL`在“上传”按钮中设置属性。例如

> PostBackURL = ".upload"

它映射到 httpHandler 的路径。

但我的问题是“PostBackURL”是一个重定向，它确实会触发 httpHandler，但它会指向“.upload”页面（其内容为空），并且用户在其他文本框中丢失了信息。

那么触发 httpHandler 并让浏览器停留在当前页面的最佳方法是什么？iframe 是唯一的选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:23:30.647

要发布到隐藏`<iframe>`元素，我一直遵循的一般模式是：

1.  将表单的目标设置为指向`<iframe>`元素的名称。（通常，`<iframe>`出于旧习惯，我会给出相同的“name”和“id”值；可能没有必要。）

2.  张贴表格。这将启动 HTTP 事务，但不会吹走表单所在的页面。

3.  对 POST的*响应*应该是一个除了一些 JavaScript 之外什么都没有（或几乎什么都没有）的页面。该代码可以与父页面对话，告诉它文件上传存在问题（例如，您想要一个图像文件，并且发布的文件是文本）或上传成功。在任何一种情况下，父页面都可以使用错误消息或某些成功消息进行自我更新。

4.  此时，可以清除表单“目标”属性。

当`<form>`要“正常”发布时，您可能希望禁用该文件`<input>`。（取决于你的情况。

# facebook - 发布到 facebook 墙上时忽略 Wordpress 缩略图和元数据

> ID：10351063
> 
> 赞同：1
> 
> 时间：2012-04-27T12:59:02.700
> 
> 标签：facebook, facebook-opengraph

我遇到了一个我似乎无法弄清楚的问题，但我不确定我是否走在正确的轨道上。有人可以请教吗？

我刚刚创建了一个 wordpress 网站，该帖子将在 facebook 上共享。

我正在使用特色图片，我希望使用我的特色图片 Facebook 缩略图。

似乎当我发布到 facebook 的链接时，facebook 只是在页面上拾取图像，您可以选择缩略图。

我不太愿意这样做，因为图像是横向的，看起来不太好。因此，我开始使用 open graph 属性查看元标记，看看是否可以动态填充 facebook 在将链接发布到墙上时捕获的内容。

这是我试过的...

```
<meta name="description" content="" />
<meta name="author" content="" />
<meta charset="utf-8" /> 
<meta property="fb:app_id" content="0000000000000000" />

<?php if ( is_single() || is_page() ) { ?>

<meta property="og:title" content="<?php echo get_the_title(); ?>" />
<meta property="og:type" content="article" />
<meta property="og:url" content="<?php echo get_permalink(); ?>" />
<meta property="og:image" content="<?php $fbthumb = wp_get_attachment_image_src( get_post_thumbnail_id( $post->ID ), 'facebook-thumb' ); echo $fbthumb[0]; ?>" />
<meta property="og:site_name" content="myblog.co.uk"/>
<meta property="og:description" content="<?php echo get_the_excerpt(); ?>" />

<?php } ?>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
```

但是这一切都被忽略了！！！

任何人都可以帮助我了解如何通过发布到墙上的链接来控制 facebook 绘制的内容。非常感谢您的帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:21:47.563

前几天我遇到了这个问题。Facebook 希望 og:images 在两个方向上都大于 200 像素，否则它将忽略它们。我发现当我使用时我得到了最好的结果`wp_get_attachment_image_src($img.ID, 'large')`

您是否尝试过使用 Facebook 调试器查看您的网站，看看它对您的网站有什么看法？[https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

# java - 递归方法没有输出

> ID：10351064
> 
> 赞同：0
> 
> 时间：2012-04-27T12:59:11.087
> 
> 标签：java, recursion, bufferedreader

我有以下方法来读取文件并以相反的顺序输出其行：

```
public void Reverse(BufferedReader br, PrintWriter pw)
{
  try
  {
    String headLine = br.readLine();

    if (headLine != null)
    {
      Reverse(br, pw);
      pw.println(br.readLine());

    }//if
    pw.println(headLine);      
  }//try
}//Reverse 
```

出于某种原因，运行代码时我在输出文件中看不到任何内容，但它正在正确编译。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T13:02:24.907

首先，您的代码甚至无法编译——您有一个没有 catch 或 finally 块的 try 块。当我们看不到您的真实代码时，要确定发生了什么比正常情况更难。

其次，您`readLine()`无缘无故地调用了两次，然后`headLine`即使它为空也写出来。您的代码不应该是：

```
if (headLine != null)
{
  Reverse(br, pw);
  pw.println(headLine);
} 
```

之后没有额外的`println`？

我的猜测是您从不刷新或关闭`PrintWriter`，并且您已经关闭了自动刷新。不要那样做。或者也许某处有一个例外，它`PrintWriter`不会报告，因为它吞噬了它们。就我个人而言，我建议只使用 a `Writer`or`BufferedWriter`而不是 a `PrintWriter`，并声明它`Reverse`可以抛出`IOException`. 然后确保调用代码在 finally 块中关闭编写器。

我还建议*不要*为此使用递归，除非您*只是*将其用作调查递归的一种方式。将整个文件读入字符串列表，将其反转，然后将其全部写出来，会更加明智。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T13:13:35.380

试试这个代码：

```
public void Reverse(String headLine, BufferedReader br, PrintWriter pw) throws IOException
{
    try
    {
        headLine = br.readLine();

        if (headLine != null)
        {
            Reverse(headLine, br, pw);
            pw.println(headLine);

        }//if
        //pw.println(headLine);
    }finally {
    }
} 
```

在这里，最初将标题发送为“”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T13:23:07.957

在所有行都已被读取后，您的原始代码尝试编写新读取的行。

您需要的是在再次`headline`调用后写入值`Reverse`，如下所示：

```
public void Reverse(BufferedReader br, PrintWriter pw) throws IOException
{
        String headLine = br.readLine();

        if (headLine != null)
        {
            Reverse(br, pw);
            pw.println(headLine);

        }
} 
```

# mysql - 如何获得 mysql 存储过程递归的深度？

> ID：10351065
> 
> 赞同：3
> 
> 时间：2012-04-27T12:59:13.000
> 
> 标签：mysql, stored-procedures, recursion

我有一个递归**mysql 存储过程**，我已经为其设置了**`max_sp_recursion_depth=10.`**

现在，*在不设置局部变量的情况下*，我想知道单次执行期间递归的级别是多少。

我认为肯定有一个会话变量存储深度（当你达到最大水平时你怎么知道）但我找不到它。我会避免使用变量来逐步执行此操作。我怎么知道这个（如果有的话）系统变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-02-06T16:18:52.137

我知道您特别问过如何在*没有*用户创建变量的情况下执行此操作 - 但对于其他遇到此想法的人来说，值得发布如何*使用*一个变量来执行此操作，因为它相当简单：

```
CREATE PROCEDURE sp_recursive
BEGIN
  // ... DECLAREs here

  -- Set maximum recursion depth (max is 255)
  SET @@SESSION.max_sp_recursion_depth = 10;

  -- Increment current recursion depth
  SET @recursion_depth = IFNULL(@recursion_depth + 1, 1);

  -- ... More stored procedure code

  -- Decrement current recursion depth. Note: Care must be taken to ensure this line
  -- is *always* executed at the end of the stored procedure.
  SET @recursion_depth = @recursion_depth - 1;
END 
```

**解释**

每次进入存储过程时，上述语句都会增加`@recursion_depth`会话范围的变量。`SET`第一次输入时，变量未初始化，因此值为`NULL`- 由 进行检查，`IFNULL()`在这种情况下将其重新分配给一个。在即将退出之前的存储过程结束时，需要减少深度。

**进一步说明**

值得注意的是，SQL Server*确实*为执行上述操作提供了一个内置`@@NESTLEVEL`变量——但不幸的是，MySQL 似乎没有等效的变量。

# xcode - 文件和文件夹路径以及组名对 Xcode 有影响吗？

> ID：10351067
> 
> 赞同：3
> 
> 时间：2012-04-27T12:59:26.647
> 
> 标签：xcode

有些帖子听起来像是 Xcode 项目中的某个文件必须位于磁盘上的某个文件夹中，并且某些文件和文件夹必须具有某些名称，并且在 Xcode 项目导航器中，某些组必须或不得具有某些名称.

我知道有一些规则来管理应用程序图标文件的命名。还存在哪些其他规则？命名或路径规则的完整列表是什么？

# c++ - 请帮助我将这个结构数组编组到 C++

> ID：10351068
> 
> 赞同：2
> 
> 时间：2012-04-27T12:59:34.853
> 
> 标签：c++, marshalling, com-interop

C++ 代码：

```
 typedef struct {
    int bd_number;                      // number of boardset
    int bd_copies;                      // how many copies
    int bd_reserve;                     // only allocate if needed
} bd_t,*bd_p;

typedef struct boardset_info {
    int     bs_copies;          
    int     bs_demand;          
    int     bs_allocated;       
    int     bs_ontable_avail;       
    int     bs_ontable_needed;      
    pstatus bs_status;              
    int     bs_played_sofar;        
} bsi_t, *bsi_p;

FC_ERRORCODE dropin_boards(bd_p boards) {
    int bs;

    bs_info = (bsi_p) calloc(total_boardsets+1, sizeof(bsi_t));//total_boardsets=8
    for (bs = 1; bs <= total_boardsets; bs++)
        bs_info[bs].bs_status = PS_OUTPLAY;

    while (boards->bd_number) { //boards-<bd_number is betweeen 1 and 8
        if (boards->bd_number < 0 || boards->bd_number > total_boardsets)
        {
            debprint("***Error dropin_boards***\n");
            debprint("boardsetnumber=%d\n",boards->bd_number);
            return FC_ERR_PARAM;
        }
        //code does not reach this point
    } 
```

调用代码：

```
<StructLayout(LayoutKind.Sequential)>
Public Structure Flex_BoardSetInfo
    Public SetNumber As Integer
    Public Copies As Integer
    Public IsReserve As Integer
End Structure

<DllImport("FlexCalc2.dll", CallingConvention:=CallingConvention.StdCall)>
    Public Shared Function FlexCalcBoards(ByRef boards() As Flex_BoardSetInfo) As Flex_ErrorCode
    End Function

Dim boardsets() = GetBoardSetInfo() // creates an arry of 8 BoardsetInfo Elements

_result = FlexCalcWrapper.FlexCalcBoards(boardsets) 
```

在调试文件的最后一行记录了 bd_p->board_number=517237496! boardnumbers 初始化为 1 到 8，我可以在代码传递给 C++ dll 之前检查是否已正确完成。我该如何解决这个问题？

编辑：从 VB6 开始，我们使用 hack 来让这个 C++ 方法工作：

```
Declare Function FlexCalcBoards Lib "FlexCalc2.dll" (firstBoard As BoardsetInfo)
ret=FlexCalcBoards(Boards(0)) 
```

所以，我们传递了数组的第一个元素而不是数组本身！（不？）幸运的是，Net 并没有中招……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:36:13.167

将 ByRef 替换为 ByVal。数组已经被编组为指针。

使用 ByRef 只会匹配`bd_t**`C 端的 a 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T19:01:41.877

好吧，答案和评论似乎表明应该没有错，所以....
我发现了三件事：

1\. 即使在重建整个解决方案并将新的 FlexCalc2.dll 复制并粘贴到 testproject 之后，旧的副本驻留在 Bin 文件夹中的 dll 未被替换。

2\. 我是 C++ 的新手，但是当方法只接收到指向它的指针时，似乎无法使用 LBound 到 UBound 遍历数组。显示的方法使用一种漂亮的方式来实现一种`for each`，但在这里它不起作用，因为`bd_p->boardnumber`返回一个非常高的数字（内存地址？），但是`bd_p[index].boardnumber`返回 1-8 范围内的正确数字。我只是将数组的长度作为一个额外的参数发送给函数，然后我就准备好了。（尽管我在乎，称它为穷人的选择；-)）

3\. Hans Passant 说得对，当 C++ 中的方法签名是`theReturnValue theMethod(theStruct * theArray)`来自 Net 的方法签名时，您必须传递数组`ByVal`（在 VB6 中，这会产生语法错误，而不是可能的）。传递了指向数组的指针这一事实并不立即显而易见，因为`*`已经在`typedef`结构的 中声明了。

# javascript - JavaScript 表单 onkeyup 验证错误

> ID：10351069
> 
> 赞同：1
> 
> 时间：2012-04-27T12:59:39.130
> 
> 标签：javascript, html

在 Aptana 中没有出现任何错误，所以我正在做的事情可能没有意义。基本上，我从表单中获取值并根据正则表达式对其进行检查。如果新检查的变量不为空，那么我输出到另一个 div 它是有效的，如果变量为空则它是无效的。

```
 <script type="text/javascript">
        var age_regex=/(1[8-9]|2[0-9]|3[0-5])/;
        var error_box= document.getElementById('error_box');
            function checkAge(x){
                var age = document.getElementById(x).value;
                var checked_age = test.age_regex(age);
                if (checked_age.value != "")
                error_box.innerHTML = "Correct!";
                else {
                error_box.innerHTML = "Incorrect!";
                }
                }
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T13:50:01.400

为什么年龄正则表达式？这个怎么样 ：

```
function checkAge(str) {
    if(parseInt(str, 10) != str) {
        return false;
    }
    if(parseInt(str, 10) < 18 || parseInt(str, 10) > 35)
    {
        return false;
    }
} 
```

# asp.net - 允许对 web.config 中的单个文件夹进行匿名身份验证？

> ID：10351075
> 
> 赞同：52
> 
> 时间：2012-04-27T13:00:03.327
> 
> 标签：asp.net, authentication, web-config

所以这是场景，我有一个使用自定义身份验证和成员资格提供程序的 Asp.Net 应用程序，但我们需要允许完全匿名访问（即）应用程序中的特定文件夹。

在 IIS 管理器中，您可以设置文件夹的身份验证模式，但设置保存在`C:\Windows\System32\inetsrv\config\applicationHost.config`文件[中，如此处所述](https://stackoverflow.com/questions/1645562/using-anonymous-and-basic-authentication-in-the-same-folder-under-iis7 "如本问题所述")

为了使安装更容易，如果我可以在我的 web.config 中设置它会很棒，但经过几次尝试我认为这可能是不可能的。

还有人知道吗？

非常感谢

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-07-11T14:20:47.240

第一种方法是使用`<location>`配置标签修改您的 web.config，并`<allow users="?"/>`允许匿名或`<allow users="*"/>`全部：

```
<configuration>
   <location path="Path/To/Public/Folder">
      <system.web>
         <authorization>
            <allow users="?"/>
         </authorization>
      </system.web>
   </location>
</configuration> 
```

如果该方法不起作用，那么您可以采用以下方法，该方法需要对 IIS applicationHost.config 进行少量修改。

首先，在 C:\Windows\System32\inetsrv\config\applicationHost.config 中将 anonymousAuthentication 部分的 overrideModeDefault 从“拒绝”更改为“允许”：

```
<section name="anonymousAuthentication" overrideModeDefault="Allow" /> 
```

`overrideMode`是 IIS 的一项安全功能。如果在 applicationHost.config 中的系统级别不允许覆盖，则您无法在 web.config 中执行任何操作来启用它。如果您在目标系统上没有此级别的访问权限，则必须与您的托管服务提供商或系统管理员进行讨论。

其次，设置`overrideModeDefault="Allow"`之后，您可以将以下内容放入您的 web.config：

```
<location path="Path/To/Public/Folder">
  <system.webServer>
    <security>
      <authentication>
        <anonymousAuthentication enabled="true" />
      </authentication>
    </security>
  </system.webServer>
</location> 
```

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2012-04-27T13:05:29.457

使用`<location>`配置标签，并`<allow users="?"/>`允许匿名或`<allow users="*"/>`全部：

```
<configuration>
   <location path="Path/To/Public/Folder">
      <system.web>
         <authorization>
            <allow users="?"/>
         </authorization>
      </system.web>
   </location>
</configuration> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-27T13:17:10.430

```
<location path="ForAll/Demo.aspx">
 <system.web>
  <authorization>
    <allow users="*" />
  </authorization>
 </system.web>
</location> 
```

另外：如果您想通过网站在该文件夹上写一些东西，您必须授予 IIS_User 对该文件夹的权限

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-24T20:20:58.347

为了使它工作，我像这样构建我的目录：

项目公共限制

所以我为我的公共文件夹编辑了我的 webconfig：

```
<location path="Project/Public">
    <system.web>
      <authorization>
        <allow users="?"/>
      </authorization>
    </system.web>
  </location> 
```

对于我的受限文件夹：

```
 <location path="Project/Restricted">
    <system.web>
      <authorization>
        <allow users="*"/>
      </authorizatio>
    </system.web>
  </location> 
```

有关 * 和 ? 的规范，请参见此处：

[https://docs.microsoft.com/en-us/iis/configuration/system.webserver/security/authorization/add](https://docs.microsoft.com/en-us/iis/configuration/system.webserver/security/authorization/add)

我希望我有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-19T16:46:28.810

我将 web.config 添加到特定文件夹中，例如“Users”（VS 2015，C#）并添加以下代码

```
<?xml version="1.0"?>
 <configuration>
  <system.web>
    <authorization>     
    <deny users="?"/>
  </authorization>
</system.web>
</configuration> 
```

最初我使用位置标签，但没有奏效。

# vba - 根据其他单元格/行输入更改特定单元格中的值

> ID：10351077
> 
> 赞同：0
> 
> 时间：2012-04-27T13:00:05.453
> 
> 标签：vba, excel

嗨，我对公式和 excel 还很陌生，但这是我遇到的问题之一。

我一直在使用 2 个条件格式公式，如下所示

1.  `=INDIRECT("I"&ROW())="Del"`

2.  `=INDIRECT("I"&ROW())="Sum"`

如果 del 在该行的 I 列中，第一个公式只是突出显示行灰色，如果该行中的 H 列为 0，是否还有一种方法可以将 K 列更改为 0？

对于第二个公式，它也根据该行的给定列中的总和输入突出显示该行的另一种颜色，是否也可以更改该行的 K 列以匹配给定行的 H 列的值。

我知道它们会相似，但我需要这样做，所以如果我的列有“del”并且行的 H 列为零，那么公式一只会将给定行中的 K 列归零。

对于第二个公式，如果“sum”在 I 列中，则值只会在给定行的 k 列中发生变化。除非实施这些更改，否则任何其他内容都需要保持未格式化。

我无法为有问题的单元格添加公式，因为这些单元格被按钮单击事件覆盖，该事件将数据输入到该字段中。

任何信息表示赞赏，公式或 VBA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:14:43.900

a) 使用`=$I2="Del"`而不是 INDIRECT （`2`条件格式适用的范围的第一行在哪里，例如*=$A$2:$Z$9999*或插入条件格式时范围的第一个选定单元格的行）

b）如果您可以使用不会被覆盖的新列，则此新列中的公式可以是：

```
=if(and(I2="Del";H2=0);0;if(I2="Sum";H2;K2)) 
```

PS：如果您的 Windows > 控制面板 > 区域和语言 > 其他设置... > 列表分隔符设置为逗号，请使用`,`而不是`;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T20:27:11.260

只需相应地调整偏移量以更改您想要的列。

```
Dim firstCell As Range
Dim FoundCell As Range
Dim lastrow As Long

With ActiveSheet

    lastrow = .Cells(.Rows.Count, "H").End(xlUp).Row
    With Range("H2:H" & lastrow)

        Set FoundCell = .Find(What:="3")
        Set firstCell = FoundCell
        Do Until FoundCell Is Nothing
            '.offset(0,-1) would be the same row in Column "G"
            FoundCell.Offset(0, -1).Value = 0
            'if you wanted to assign the same value then do this:
            '  FoundCell.Offset(0, -1).Value = FoundCell.Value
            Set FoundCell = .FindNext(FoundCell)
            If FoundCell.Address = firstCell.Address Then
              Exit Do
            End If
        Loop
    End With
End With 
```

# mysql - hibernate + mysql + 在文件中加载数据

> ID：10351078
> 
> 赞同：0
> 
> 时间：2012-04-27T13:00:14.277
> 
> 标签：mysql, hibernate, load-data-infile

您好我正在尝试使用休眠将文件中的数据加载到 Mysql DB。

这是查询，

```
session.createSQLQuery("LOAD DATA INFILE E:/uploaded/NumSerie/NS/NumSerie.txt INTO TABLE prod CHARACTER SET latin1 FIELDS TERMINATED BY ';' LINES TERMINATED BY '\n' IGNORE 1 LINES;").executeUpdate(); 
```

但我收到以下错误，

```
org.hibernate.QueryException: Space is not allowed after parameter prefix ':' [LOAD DATA INFILE E:/uploaded/NumSerie/NS/NumSerie.txt INTO TABLE prod CHARACTER SET latin1 FIELDS TERMINATED BY ';' LINES TERMINATED BY '
' IGNORE 1 LINES;]
at org.hibernate.engine.query.ParameterParser.parse(ParameterParser.java:92)
at org.hibernate.engine.query.ParamLocationRecognizer.parseLocations(ParamLocationRecognizer.java:75) 
```

如何重写此查询以便正确执行？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T13:24:57.357

尝试创建[参数化查询](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querysql.html#d0e13930)

我不是 Hibernate 大师，但这可以工作：

```
session.createSQLQuery("LOAD DATA INFILE :file INTO TABLE prod CHARACTER SET latin1 FIELDS TERMINATED BY ';' LINES TERMINATED BY '\n' IGNORE 1 LINES;")
    .setString("file", "E:/uploaded/NumSerie/NS/NumSerie.txt")
    .executeUpdate(); 
```

# objective-c - 在类之间传递数据不起作用

> ID：10351079
> 
> 赞同：0
> 
> 时间：2012-04-27T13:00:19.103
> 
> 标签：objective-c, ios, delegates

我正在尝试在类之间传递 NSDictionary。在我的 AppDelegate 中有实例 NSDictionary。

```
@interface AppDelegate : UIResponder <UIApplicationDelegate, FBSessionDelegate, FBRequestDelegate> 
{
NSDictionary *contactsFromFacebook;
}
@property (strong, nonatomic) NSDictionary *contactsFromFacebook; 
```

在我的 AppDelegate.m 文件中，我将其合成为`@synthesize contactsFromFacebook = _contactsFromFacebook;`. 接下来我的步骤（填写字典）：

```
-(void)request:(FBRequest *)request didLoad:(id)result {
    _contactsFromFacebook = [[NSDictionary alloc]initWithDictionary:result];
} 
```

在我的 someClass.m 文件中，我想使用`contactsFromFacebook`字典中的数据。

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
NSDictionary *someNewDictionary = [[NSDictionary alloc] initWithDictionary:appDelegate.contactsFromFacebook]; 
```

但我`someNewDictionary`的很空旷。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:17:22.640

在 appDelegate 中写一个方法：

```
-(NSDictionary*)getSomething { return self.contactsFromFacebook; } 
```

然后在其他班级：

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
NSDictionary *someNewDictionary = [[NSDictionary alloc] initWithDictionary:[appDelegate getSomething]]; 
```

这对我来说很好。

编辑：@Abizern 评论我认为可以解决您的问题。他是对的。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-27T13:13:01.150

“@synthesize contactsFromFacebook = _contactsFromFacebook;”

_contactsFromFacebook 在哪里？

我所看到的只是以下声明：-

NSDictionary *contactsFromFacebook;

和

@property（强，非原子）NSDictionary *contactsFromFacebook;

我看不到强属性contactsFromFacebook 和变量_contactsFromFacebook 之间没有链接，你分配给你实例化的NSDictionary

# ajax - JqueryUi - 选项卡/Ajax 内容/jqueryui.com/demos

> ID：10351081
> 
> 赞同：1
> 
> 时间：2012-04-27T13:00:34.933
> 
> 标签：ajax, jquery-ui, tabs

我无法弄清楚以下 ajax 是如何工作的，（来自[http://jqueryui.com/demos/tabs/ajax.html](http://jqueryui.com/demos/tabs/ajax.html)）

```
<li class="ui-state-default ui-corner-top"><a
href="http://jqueryui.com/demos/tabs/ajax.html#ui-tabs-1">Tab 1</a>
</li>
<li class="ui-state-default ui-corner-top"><a
href="http://jqueryui.com/demos/tabs/ajax.html#ui-tabs-2">Tab 2</a>
</li>
<li class="ui-state-default ui-corner-top"><a
href="http://jqueryui.com/demos/tabs/ajax.html#ui-tabs-3">Tab 3(slow)</a>
</li>
<li class="ui-state-default ui-corner-top"><a
href="http://jqueryui.com/demos/tabs/ajax.html#ui-tabs-4">Tab 4(broken)</a>
</li>

.....

<div id="ui-tabs-1"
class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
<div id="ui-tabs-2"
class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div> 
```

当单击例如 Tab 2 时，转到“http://jqueryui.com/demos/tabs/ajax.html#ui-tabs-2”，这是一个空的 div，那么背景代码（例如 PHP）是怎么做的确实得到了#ui-tabs-2 并返回[http://jqueryui.com/demos/tabs/ajax/content2.html](http://jqueryui.com/demos/tabs/ajax/content2.html) 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T13:17:32.630

您添加的代码片段不符合[http://jqueryui.com/demos/tabs/ajax.html上的示例页面](http://jqueryui.com/demos/tabs/ajax.html)

它应该看起来像：

```
<div id="tabs">
<ul>
    <li><a href="#tabs-1">Preloaded</a></li>
    <li><a href="ajax/content1.html">Tab 1</a></li>
    <li><a href="ajax/content2.html">Tab 2</a></li>
    <li><a href="ajax/content3-slow.php">Tab 3 (slow)</a></li>
    <li><a href="ajax/content4-broken.php">Tab 4 (broken)</a></li>
</ul>
<div id="tabs-1">
    <p>Proin elit arcu, rutrum commodo...</p>
</div>
</div> 
```

第一个选项卡不是 ajax 选项卡。其他选项卡通过 ajax 动态加载。`href`确定 ajax 提取的目标内容。

# c# - 连接自托管信号服务器和客户端的最简单示例？

> ID：10351083
> 
> 赞同：1
> 
> 时间：2012-04-27T13:00:37.377
> 
> 标签：c#, signalr

我正在尝试将客户端连接到自托管 SignalR 服务器。

我的服务器如下所示：

```
 static void Main(string[] args)
    {
        string url = "http://localhost:8081/";
        var server = new Server(url);

        server.MapConnection<MyConnection>("/echo");

        server.Start();

        Console.WriteLine("Server running on {0}", url);

        Console.ReadKey();
    }

    public class MyConnection : PersistentConnection
    {
    } 
```

这是我能想到的最简单的。客户端看起来像这样：

```
 static void Main(string[] args)
    {
        SignalR.Client.Connection conn = new SignalR.Client.Connection("http://localhost:8081/echo");
        Task start = conn.Start();
        start.Wait();

        if (start.Status == TaskStatus.RanToCompletion)
        {
            Console.WriteLine("Connected");
        }

        Console.ReadKey();
    } 
```

我无法让上面的代码工作。服务器启动，但是当我运行客户端代码进行连接时出现错误：

远程服务器返回错误：(500) 内部服务器错误。

服务器也给了我一个错误：无法访问已处置的对象。

我忘记了什么吗？我究竟做错了什么？

**编辑：** 我在服务器上遇到的错误如下......

SignalRtest.vshost.exe 错误：0：在 mscorlib.dll 中发生“System.AggregateException”类型的第一次机会异常 Task 引发的 SignalR 异常：System.AggregateException：发生一个或多个错误。---> System.ObjectDisposedException：无法访问已处置的对象。对象名称：“System.Net.HttpListenerResponse”。在 System.Net.HttpListenerResponse.CheckDisposed() 在 System.Net.HttpListenerResponse.get_OutputStream() 在 SignalR.Hosting.Self.Infrastructure.ResponseExtensions.<>c_ *DisplayClass4.b* _1(IAsyncResult ar) 在 System.Threading.Tasks.TaskFactory .FromAsyncCoreLogic（IAsyncResult iar，动作`1 endMethod, TaskCompletionSource`1 tcs) --- 内部异常堆栈跟踪结束 --- ---> (Inner Exception #0) System.ObjectDisposedException: 无法访问已处置的对象。对象名称：“System.Net.HttpListenerResponse”。在 System.Net.HttpListenerResponse.CheckDisposed() 在 System.Net.HttpListenerResponse.get_OutputStream() 在 SignalR.Hosting.Self.Infrastructure.ResponseExtensions.<>c_ *DisplayClass4.b* _1(IAsyncResult ar) 在 System.Threading.Tasks.TaskFactory .FromAsyncCoreLogic(IAsyncResult iar, Action `1 endMethod, TaskCompletionSource`1 tcs)<---

'client.vshost.exe'（托管 (v4.0.30319)）：已加载 'C:\Windows\assembly\GAC_MSIL\Microsoft.VisualStudio.DebuggerVisualizers\10.0.0.0__b03f5f7f11d50a3a\Microsoft.VisualStudio.DebuggerVisualizers.dll'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T13:12:29.420

看起来它正在处理服务器变量，因为它没有看到它稍后在函数中使用。将 GC.KeepAlive( server ) 添加到 Main 函数的末尾，以确保它不会被提前处理掉。或者更好，但它在 using 语句中。

# apache - 为每个用户创建父网站的子网站（子域或子文件夹）

> ID：10351085
> 
> 赞同：2
> 
> 时间：2012-04-27T13:01:01.300
> 
> 标签：apache, jsp, tomcat, subdomain

我的客户要求我为每个用户创建一个新的子文件夹或子目录。我的主要 URL 是这样`www.mysite.com`的，在创建用户后，用户应该能够以`www.mysite.com/userName`或访问它`www.userName.mysite.com`。是否可以通过 JSP 来完成，我不知道应该使用哪些关键词在 google 中搜索这个问题。我使用 JSP、Apache tomcat 5.5、mysql 5.0 进行开发。我必须将所有内容复制到子文件夹吗？如果是这样，我可以在哪里获得一些帮助或教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:05:26.727

这可以在 httpd.conf 中完成，例如

```
ServerName www.userName.mysite.com
RewriteCond %{HTTP_HOST} ^www\.userName\.mysite\.com$ [NC] 
```

# javascript - 关闭一个小盒子弹出

> ID：10351088
> 
> 赞同：2
> 
> 时间：2012-04-27T13:01:18.627
> 
> 标签：javascript, asp.net-mvc

如何在javascript中关闭一个弹出的小框并刷新父级。我正在使用以下脚本但无法正常工作。

```
var parentWindow = window;
$('#submit-deed-button').click(function() {
    TINY.box.show({iframe:'submit_deed.html', closejs:function(){parentWindow.location.reload()}, post:'id=16',width:500,height:300,opacity:20,topsplit:3, boxid:'tinybox_container'})
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T19:09:32.150

我能够使用以下方法关闭 TinyBox：

```
window.parent.TINY.box.hide(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T09:41:59.473

利用：

```
<a href="#" onclick="TINY.box.show({iframe:'photos.php?id=<?php echo $result_set['id'];?>',boxid:'frameless',width:900,height:450,fixed:false,maskid:'bluemask',maskopacity:40,closejs:function(){closeJS()}})" 
```

# php - 如何使用 Windows 任务计划程序运行 PHP 脚本

> ID：10351091
> 
> 赞同：2
> 
> 时间：2012-04-27T13:01:27.197
> 
> 标签：php, windows, codeigniter, cron, crontab

我正在使用 codeigniter 创建一些 cronjobs 我使用 Windows 7 中的 Task schedular 安排它。它每分钟运行一次，但我看到的是它只是在编辑器中弹出我的代码，并没有在我的数据库中插入我在索引中提到的任何数据功能。

```
<?php
class Hello extends CI_Controller {
 public function __construct() {
    parent::__construct();
    $this->load->database();
}

public function index() {
     $this->db->query("INSERT INTO test_cron VALUES(null, 'username')");
}
}
?> 
```

我怎样才能真正执行它以便它在我的数据库中插入数据

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:08:08.243

**如果您使用 *.NIX**：

*nix 命令：

`crontab -e -u USERNAME`

如果你想用 nano 编辑：

`env EDITOR=nano crontab -e -u USERNAME`其中 username 是将启动脚本的用户。

如果你想每小时运行一次：

`01 * * * * ...`

**对于 Windows 7，如您所问**： `Start => Accessories => System Tools => Task Scheduler`

*   创建任务
*   行动
*   新的
*   选择脚本的路径，不要忘记**`php`**在脚本之前添加，以便执行，而不仅仅是打开。

要运行具有指定时间段或日期的脚本，请使用`Triggers`选项卡。

并在那里配置任务以运行您的 PHP 脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T13:07:54.160

crontab 是一个 linux 程序，你说你使用的是 windows 7；在 Windows 中，您将不得不尝试与计划任务类似的事情

（该语法仅适用于 unix）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T13:09:36.787

在您的服务器上，您使用 command `crontab -e`，它将为您打开一个编辑器，您可以在其中将代码添加到您的 crontab。要让它每小时运行一次，请将行更改为：

```
00 * * * * /usr/local/bin/php5 $HOME/system/scripts/clean_cache.php 
```

[有关crontab 格式](http://unixhelp.ed.ac.uk/CGI/man-cgi?crontab+5)的更多详细信息。

# c# - 与外部系统连接 | 如何设计系统

> ID：10351093
> 
> 赞同：2
> 
> 时间：2012-04-27T13:01:29.380
> 
> 标签：c#, wcf, architecture

我有一个关于如何配置与外部系统接口的系统的问题。

以下是我想把它们放在一起的各个部分：

**选项1**

*   我有 3 个外部服务，它们为系统带来 3 种不同类型的消息。
*   我有一个 WCF 服务，它监听所有这些外部服务，它将消息转换为通用格式。
*   我有一个 WPF UI，它使用双工 tcp 绑定与 WCF 服务连接，并且消息在 UI 上得到更新。
*   UI 还将任何传出消息发送到服务，该服务又将其发送到外部服务。

我的问题是，您认为这是一种可扩展、可维护、经济高效的解决方案架构方式吗？如果我在 Intranet 场景中部署它，您是否看到任何可能出现的特定问题？

我给出的另一个考虑如下：

**选项 2**

*   有 3 个连接到外部服务的 Windows 服务。
*   每个服务都将消息生成规范格式，并将其放在特定主题的消息总线上。
*   有一个 WCF 服务，它在消息总线上侦听新消息的主题。
*   使用双工绑定以使用任何传入消息更新客户端。
*   客户端将传出消息发送到 WCF 服务，WCF 服务又将其放到由 Windows 服务侦听的特定主题，后者将它们发送到外部系统。

我在这里有点困惑，请您帮我找出哪种方法更好，如果可以的话，请指出任何讨论这些场景的链接？

数据交换量为每 5 分钟 400 条消息，分布在外部系统中。

我相信你们中的很多人可能都遇到过这种情况，所以如果你有更好的方法来解决这个问题，请告诉我。

谢谢，-迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:25:41.573

在处理 3 种相似但不同的消息格式时，我当然认为您的选项 2 是正确的。这实现了两种集成模式，[适配器](http://www.eaipatterns.com/ChannelAdapter.html)和[规范消息](http://www.eaipatterns.com/CanonicalDataModel.html)。

但是，我认为使用相同的“适配器”服务作为反向传播消息的管道是错误的。最好将响应通道从请求处理管道中抽象出来。

您可以实现分发器（或[路由器](http://www.eaipatterns.com/MessageRouter.html)）模式来处理将响应消息路由回请求源。

# ajax - STRUTS2 和 AJAX - 选择国家，填充州

> ID：10351103
> 
> 赞同：2
> 
> 时间：2012-04-27T13:02:03.700
> 
> 标签：ajax, struts2

我想在选择国家后显示州。

JSP

```
 <s:select label="COUNTRY" name="summaryData.addressCountry" id="addForm_countryCode" 
                                      list="loyaltyCountryMap" tabindex="" headerKey="US" headerValue="United States"
                                      listKey="key" listValue="value.countryName" 
                                      onchange="getStateList('#addForm_countryCode')">

       </s:select> 

<s:select label="STATE" name="summaryData.addressCityCode" headerValue="-Select-" headerKey="-Select-" list="stateList" required="true" cssClass="storedPaymentInput_size1 required" id="stateList"/> 
```

JAVASCRIPT：

```
 function getStateList() {
        var countryCode = $('#addForm_countryCode").val(); 
        $.ajax({
            url: 'ajaxStateList',
            dataType: 'html',
            data: { countryCode : countryCode},
            success: function(data) {
                $('#stateList').html( data );
            }
        });
    } 
```

STRUTS.XML

```
 <action name="ajaxStateList" class="actions.AjaxStateList">
       <result name="success"/>
 </action> 
```

动作类

```
 private List<String> stateList;

    private String countryCode;

    public String getCountryCode() {
        return countryCode;
    }

    public void setCountryCode(String countryCode) {
        this.countryCode = countryCode;
    }

    public List<String> getStateList() {
        return stateList;
    }

    public void setStateList(List<String> stateList) {
        this.stateList = stateList;
    }

    public String execute() {

        LoyaltyStateProvinces.getInstance();

        stateList = StateProvinces.getAllStateProvinceByCountryCode(countryCode);

        for(StateProvince state: states){
            stateList.add(state.getStateProvinceCode());
        }

        return SUCCESS;
    } 
```

如何使用 AJAX+Struts2 使其工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T08:33:54.067

请参阅[struts2-json-plugin](https://cwiki.apache.org/confluence/display/WW/JSON%20Plugin)。让您的操作返回 json 结果类型（通过此插件）。你的动作类可以在很大程度上保持不变。

创建并测试您的操作返回 JSON 后（只需在浏览器中输入 url）。然后你需要一些javaScript。我看到您正在使用 jQuerys $.ajax 方法...我更喜欢[$.getJSON](http://api.jquery.com/jQuery.getJSON/)，它的作用相同，但假定数据为 json 格式。

这是我自己的代码中的一些js：

```
 function punch(){
                $.getJSON("<s:url namespace="/timeclock/json" action="punch"/>",
                {
                    badge: $("#input_badge").val()
                },
                function(data) {
                    $("#input_badge").val("");
                    $("#emp_name").text(data.name);
                    $("#emp_time").text(data.punch);
                    $("#notification").fadeIn("slow", hide);
                });
                return false;
            } 
```

你会注意到三个参数： Fist 是调用的 url，它总是最好用 sturts2 url 标签构造。其次是发送到动作的参数，在这种情况下，“badge”被设置为文本字段中的内容，ID 为“input_badge”，然后发送到服务器。最后是回调成功时调用的函数，可以看到返回了“name”、“punch”等参数。

# sql - 如何在不创建 BCP 文件的情况下创建 SQL 合并发布

> ID：10351106
> 
> 赞同：1
> 
> 时间：2012-04-27T13:02:07.993
> 
> 标签：sql, merge, replication, bcp

我有一个大型数据库（250GB）。我们将数据库复制到新位置（基本上将其从客户站点移动到数据中心，通过 VPN 链接），使其成为发布者，原始数据库将成为订阅者。

我们有一个相同的 2GB 数据库，我们正在使用它来测试复制。我正在经历的过程是

1）在原始位置备份数据库 2）在新位置恢复数据库 3）在新位置创建发布 4）在旧位置创建订阅，指向新发布者，nosync（因为我已经有了数据，并且我不想再次初始化订阅者）

这一切都很好，并且复制得很好。我的问题是 BCP 文件。对于 2GB 的数据库，它已经创建了 2GB 的快照（主要是 BCP）文件。在我的新位置，磁盘存储是 SAN，而且非常昂贵。我不想购买额外的 250GB 空间来容纳我永远不会使用的 250GB BCP 文件。

有没有办法在没有 BCP 文件的情况下进行发布？或者这是我无法摆脱的复制的基本部分？

在此先感谢您的帮助。-缺口

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:17:30.657

不幸的是，即使在没有快照的情况下初始化合并订阅时，仍然必须生成快照。虽然不会使用架构和数据 bcp 文件，但需要快照，因为它包含复制所需的系统对象和元数据。

# android - Android 小部件弹出窗口

> ID：10351115
> 
> 赞同：1
> 
> 时间：2012-04-27T13:02:57.467
> 
> 标签：android, android-widget, popupwindow, android-alertdialog

我想从我的小部件（AppWidgetProvider）制作一个带有文本视图的弹出窗口，我想要底部的“更新”和“关闭”中的 2 个按钮。我尝试使用 AlertDialog 但它使小部件崩溃。

```
AlertDialog.Builder builder = new AlertDialog.Builder(context);
            builder.setMessage("Sample text")
                   .setCancelable(false)
                   .setPositiveButton("Update", new DialogInterface.OnClickListener() {
                       public void onClick(DialogInterface dialog, int id) {
                           CallUpdate(context);
                       }
                   })
                   .setNegativeButton("Close", new DialogInterface.OnClickListener() {
                       public void onClick(DialogInterface dialog, int id) {
                            dialog.cancel();
                       }
                   });
            builder.show(); 
```

我希望能够使用跨区文本。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:14:23.610

您不能显示`AlertDialog`来自`AppWidgetProvider`. 您将需要创建一个`Activity`并使用它，通过`startActivity()`. 如果您愿意，您可以[将活动主题化为看起来像一个对话框](https://stackoverflow.com/a/1979631/115145)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T13:29:44.570

App Widget 可以支持以下布局类：

```
FrameLayout
LinearLayout
RelativeLayout 
```

以及以下小部件类：

```
AnalogClock
Button
Chronometer
ImageButton
ImageView
ProgressBar
TextView
ViewFlipper
ListView
GridView
StackView
AdapterViewFlipper 
```

所以你不能显示`AlertDialog`从`AppWidgetProvider`。您可以在按钮单击时启动一个活动，它看起来像一个警报对话框。

要在主屏幕小部件上启动活动，请单击您可以看到以下帖子：

[从小部件启动活动](https://stackoverflow.com/questions/1937236/launching-activity-from-widget)

[如何从 android 主屏幕小部件启动活动](https://stackoverflow.com/questions/2706464/how-to-launch-activity-from-android-home-screen-widget)

# filter - 商业媒体基础过滤器

> ID：10351122
> 
> 赞同：2
> 
> 时间：2012-04-27T13:03:20.663
> 
> 标签：filter, h.264, codec, aac, ms-media-foundation

我想知道是否有人知道一家生产商业媒体基金会 MFT、接收器和源的公司？现在我正在与 DirectShow 合作，但我想转到 Media Foundation。我对 AAC 和 H.264 解码器和编码器以及 RTMP 接收器特别感兴趣。

谢谢，大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-01-25T01:35:57.293

除了系统提供的软件AAC，和H.264解码器。显卡供应商还提供 H.264 甚至 H.265 的硬件，例如 Intel、AMD 和 Nvidia。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-19T20:57:16.250

该公司生产媒体基金会编解码器和解/复用器。这是他们的 H264 编解码器的链接：[https ://www.leadtools.com/sdk/multimedia/h264](https://www.leadtools.com/sdk/multimedia/h264)

# javascript - 查找与特定父元素相关的元素的索引

> ID：10351124
> 
> 赞同：0
> 
> 时间：2012-04-27T13:03:26.473
> 
> 标签：javascript, jquery

看这里的例子 - [http://jsfiddle.net/uqYeQ/3/](http://jsfiddle.net/uqYeQ/3/)

第一行的行为符合预期，返回其父级中 div 的索引。

我希望第二行的行为方式相同，我希望它返回 0 到 4 之间，具体取决于单击了哪个 div。我想知道已单击的 div 与其父列表项相关的索引。

我根本无法更改 html。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T13:38:57.777

试一试（[小提琴](http://jsfiddle.net/uqYeQ/6/)）

```
$("li > .myclass, li > .container").click(function(e){
    $("#result").html($(this).index());            
}); 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T14:46:13.907

这对我有用（[小提琴](http://jsfiddle.net/uqYeQ/7/)）

```
$('.myclass').click(function(){
   var theIndex = $(this).index();
   $('#result').html(theIndex);
})

$('.container').click(function(){
    var theIndex = $(this).index();
    $('#result').html(theIndex);
}) 
```

但反理智更性感。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T14:30:29.893

以下是一种方法

```
$('.myclass').click(function() {
    var liElem = $(this).parents('li')[0]; // get li element who is a parent of the clicked element
    var elems = $(this).parents();
    elems.push($(this)); //array contains all parents of the clicked element and the clicked element
    $(elems).each(function(key, elem) {
        if ($(elem).parent()[0] == $(liElem)[0]) {
            $('#result').html($(elem).index());
        }
    });
}) 
```

[jsFiddle](http://jsfiddle.net/R5MkJ/3/)

# css - 组合框 Telerik - 更改颜色

> ID：10351127
> 
> 赞同：2
> 
> 时间：2012-04-27T13:03:28.513
> 
> 标签：css, asp.net-mvc, telerik

我正在使用组合框控件：

[http://demos.telerik.com/aspnet-mvc/razor/ComboBox?theme=vista](http://demos.telerik.com/aspnet-mvc/razor/ComboBox?theme=vista)

我希望它不是白色的，就像现在一样。哪个css属性可以做到这一点？是否可以？

我希望它看起来像这样：

![组合框](../Images/49e648205bd945bee1d3aafeed26642b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T13:50:42.443

您应该能够通过选择元素上的自定义背景颜色和其容器上的一些圆角来实现这一点。尝试将组合框放在包含 DIV 中并为其提供以下 CSS 样式：

```
.rounded {
    border-radius: 10px; 
    -moz-border-radius: 10px; 
    -webkit-border-radius: 10px; 
    padding: 5px;
    background: #333;
}

.rounded select {
    width: 100%;
    background: #333;
    color: #fff; 
    border: 0;
    outline: 0;   
} 
```

[http://jsfiddle.net/mpHgR/1/](http://jsfiddle.net/mpHgR/1/)

它可能有点偏离，但它接近你想要的。

# flash - 重新启动 Flash 应用程序，但并不总是有效

> ID：10351130
> 
> 赞同：1
> 
> 时间：2012-04-27T13:03:52.053
> 
> 标签：flash, flash-builder

我有一个 Main.mxml 有这个：

```
 <components:ScreenSaver id="ScreenSaver" /> 
```

这个组件是另一个 .mxml

基本上，当这个屏幕保护程序对象可见并播放视频时，我想允许它一段时间，然后，我希望整个应用程序下降并重新启动。所以，我在 Main.mxml 中放置了一个事件监听器：

```
addEventListener(AppConstants.REBOOT, p_Reboot); 
```

p_Reboot 是：

```
 public function p_Reboot( e:Event = null):void
    {                                       
             var mgr:ProductManager = new ProductManager("airappinstaller");                mgr.launch("-launch "+ topApplication.nativeApplication.applicationID + " " + topApplication.nativeApplication.publisherID);
             topApplication.nativeApplication.exit();
    }   

Then, in ScreenSaver at the critical moment, I do this:
    dispatchEvent(new Event(AppConstants.REBOOT, true)); 
```

一切似乎都运行良好，监听器正常工作，它到达`p_Reboot`函数，应用程序退出，但它永远不会重新启动。

但是，如果我`p_Reboot`从 main.mxml 中的按钮单击调用，它可以工作。我的调度事件是在 ScreenSaver.mxml 中完成的问题吗，它位于不同的应用程序域中？所以它找不到要重新启动的应用程序？

任何帮助将不胜感激。

# windows-mobile - 当用户在控件外部点击时如何隐藏控件

> ID：10351137
> 
> 赞同：1
> 
> 时间：2012-04-27T13:04:12.687
> 
> 标签：windows-mobile

在我们的 Windows 移动应用程序中，我们使用 UserControl 作为屏幕菜单。通过单击用于打开菜单的相同按钮来关闭它。作为一项改进，我们希望在用户在控件外部单击时关闭菜单。

目前我们已经尝试通过触发“lostFocus”事件并在每次显示菜单时使用 menu.Focus()。问题是当 menu.Focus() 被调用时 lostFocus-event 被立即触发。

有没有什么办法可以阻止焦点直接丢失？或者有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T01:20:57.880

只是一个想法：添加 2 个`Boolean`值：

```
bool userControlFocused;
bool menuFocused; 
```

当您的`LostFocus`事件触发时：

```
private void UserControl1_LoseFocus(object sender, EventArgs e) {
  userControlFocused = UserControl1.Focused;
  if (!userControlFocused && !menuFocused) {
    Close();
  }
}

private void Menu_LostFocus(object sender, EventArgs e) {
  menuFocused = Menu1.Focused;
  if (!userControlFocused && !menuFocused) {
    Close();
  }
} 
```

只是在这里抛出一些想法。

# android - part.isMimeType == "Multipart/*" 是不是有附件的意思？

> ID：10351140
> 
> 赞同：0
> 
> 时间：2012-04-27T13:04:24.480
> 
> 标签：android, attachment, mime, multipart

我在 Android 中有一个电子邮件项目，我可以接收和下载我的邮件及其附件，但现在我想了解邮件是否有附件，以及它有多少附件。

我的意思是我只需要做一个 if 子句，比如：

```
if(messages[i].hasAttachment)
{
   int numberOfAttachments = messages[i].attachmentNumber;
  // do smthng
}
else
{
  // do smthng
} 
```

也许它有帮助：我收到了这个代码示例的身体部分。同时，根据我的主题，如果 isMimeType = "Multipart/alternative" 或 "Multipart/*" ，是否意味着它有附件？

```
public String getText(Part p) throws MessagingException, IOException {

        if (p.isMimeType("text/*")) {
            boolean textIsHtml = false;
            String s = (String) p.getContent();
            textIsHtml = p.isMimeType("text/html");
            return String.valueOf(s);
        }

        if (p.isMimeType("multipart/alternative")) {
            // prefer html text over plain text
            Multipart mp = (Multipart) p.getContent();
            String text = null;
            for (int i = 0; i < mp.getCount(); i++) {
                Part bp = mp.getBodyPart(i);
                if (bp.isMimeType("text/plain")) {
                    if (text == null)
                        text = getText(bp);
                    continue;
                } else if (bp.isMimeType("text/html")) {
                    String s = getText(bp);
                    if (s != null)
                        return String.valueOf(s);
                } else {
                    return getText(bp);
                }
            }
            return text;
        } else if (p.isMimeType("multipart/*")) {
            Multipart mp = (Multipart) p.getContent();
            for (int i = 0; i < mp.getCount(); i++) {
                String s = getText(mp.getBodyPart(i));
                // fileName = bp.getFileName();
                if (s != null)
                    return String.valueOf(s);
            }
        }

        return null;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:16:15.223

这是我用来解析附件的代码。我以前用 multipart/attachment 或 multipart/* 解析，改成这样：

```
 if( mimeMessage.getContent() instanceof Multipart) {
            Multipart multipartContent = (Multipart) mimeMessage.getContent();
            List<BodyPart> deleteThese = new ArrayList<BodyPart>();
            for( int i = 0; i < multipartContent.getCount(); i++ ) {
                MimeBodyPart part = (MimeBodyPart) multipartContent.getBodyPart(i);
                String disposition = part.getDisposition();
                if( disposition != null
                        && ( disposition.equalsIgnoreCase( Part.ATTACHMENT )
                        || ( disposition.equalsIgnoreCase( Part.INLINE )
                             && !part.isMimeType( PLAIN_TEXT_MIME_TYPE )
                             && !part.isMimeType( HTML_MIME_TYPE ) )
                ) ) {
                    // do something with part
                }
            } 
```

本质上，如果电子邮件具有多部分，则可能存在附件，但您必须查看内容配置才能真正了解。Part.ATTACHMENT 将是您感兴趣的内容，并且您可以选择忽略或解析 Part.INLINE。

# php - 使用 MySQLi 的连接显示错误

> ID：10351141
> 
> 赞同：1
> 
> 时间：2012-04-27T13:04:25.047
> 
> 标签：php, mysqli

我有一个脚本，它应该从数据库中读取并返回一个数组，另一个函数使用该数组来显示一个表。但是该函数正在引发错误。

```
Fatal error: Call to a member function fetch_array() on a non-object in C:\xampp\htdocs\nu\userClass.php on line 205 
```

我不知道可能是什么错误，因为我已经为 MySQLi 类创建了一个对象。这是我的代码

```
function getUser($user_id)
        {
            require("config.php");
            //TODO Clean variables
            $dbc = new mysqli(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);
            /* check connection */
            if (mysqli_connect_errno()) 
            {
            printf("Connect failed: %s\n", mysqli_connect_error());
            exit();
            }
            $query2 = "SELECT family.Position, food.Meal "."FROM family, food "."WHERE family.Position = food.Position";    
            $result = $dbc->query($query2);
            $row = $result->fetch_array();
            /* close connection */
            $dbc->close();
            return $row;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:15:33.087

此错误消息似乎表明您的 SQL 查询中有错误。

尝试通过以下行替换对 $dbc->query() 的调用：

```
$result = $dbc->query($query2);
if ($result === false) {
    echo 'MySQL error: ' . $dbc->error;
} 
```

这将向您显示更详细的错误消息。

# php - 检查数组是否存在？

> ID：10351143
> 
> 赞同：1
> 
> 时间：2012-04-27T13:04:42.790
> 
> 标签：php, arrays, post

有选择形式的帖子，如：

```
<select name="option[color][0]">
<select name="option[color][1]">
// option[color][2] isnt posted 
```

有些产品没有该选择，然后当我尝试从帖子中获取它们时，每次如果未发布选择，我都会收到如下错误：

> 未定义的偏移量：2

如何检查是否发布了某些内容？试过：

```
$ids       = $_POST['id'];
$option = $_POST['option'];

foreach ($ids as $key => $id)
{
   //Undefined offset: 2
   if( $option['color'][$key] )
   {
      $_SESSION[$key]['option']['color'] = $option['color'][$key];
   }

   //Undefined offset: 2
   if( !empty($option['color'][$key]) )
   {
      $_SESSION[$key]['option']['color'] = $option['color'][$key];
   }

   //Undefined offset: 2
   if( isset($option['color'][$key]) )
   {
      $_SESSION[$key]['option']['color'] = $option['color'][$key];
   }

   //... etc
} 
```

等等....无论我尝试什么，都有错误:(请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:06:33.077

试试[array_key_exists](http://php.net/array_key_exists)看看它是否存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T13:09:38.087

如果它总是 0,1,2 或任何连续整数行，你可以做`if(count($option['color']) > $key ){}`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T13:16:25.890

`isset($option['color'][$key])`是要走的路。

当您仍然使用`isset()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T13:09:19.697

```
if( isset($option['color'][$key]) )
{
  $_SESSION[$key]['option']['color'] = $option['color'][$key];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T13:11:19.217

使用`isset`或`empty`。

*   [http://php.net/manual/en/function.isset.php](http://php.net/manual/en/function.isset.php)
*   [http://us2.php.net/manual/en/function.empty.php](http://us2.php.net/manual/en/function.empty.php)

例如：

```
if (isset($array['idx'])){ ... }
if (!empty($array['idx'])){ ... } 
```

# c# - 更改 Devexpress 导出行值

> ID：10351147
> 
> 赞同：1
> 
> 时间：2012-04-27T13:04:57.733
> 
> 标签：c#, asp.net-mvc-3, devexpress

我的控制器：

```
 public ActionResult ExportTo(ExportFormat exportFormat = ExportFormat.Xlsx)
    {
        ExportType exportType = GridViewHelper.ExportTypes.SingleOrDefault(x => x.Format == exportFormat);

        if (exportType != null)
        {
            var modelList= modelRepository.GetAll();

            var gridviewSettings = CreateExportGridViewSettings();
            if(gridviewSettings != null)
                return exportType.Method(gridviewSettings, modelList);
        }

        return RedirectToAction("Index");
    }

    ...

    private GridViewSettings CreateExportGridViewSettings()
    {
        var settings = new GridViewSettings
                           {
                               Name = "Export",
                               CallbackRouteValues = new {Controller = "MyController", Action = "List"},
                               Width = Unit.Percentage(100)
                           };

        settings.Columns.Add("Id", Resources.Id);

        !!! ---- !!!

        ...
     } 
```

！！！---- !!! <- 在这里我想添加列。如果值为 True，则此列中的行输出必须为 YES，如果值为 False，则必须为 NO

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:20:33.167

```
settings.Columns.Add(set =>
                    {
                        set.FieldName = "IsSomething";
                        set.Caption = "Is Something";
                        set.UnboundType = DevExpress.Data.UnboundColumnType.String;
                        set.UnboundExpression = "Iif([IsSomething]==True, 'Yes', 'No')";
                    }); 
```

# c++ - 如何将 std::bitset<64> 转换为双精度？

> ID：10351150
> 
> 赞同：2
> 
> 时间：2012-04-27T13:05:06.783
> 
> 标签：c++, genetic-algorithm

有没有办法在不使用任何外部库（Boost 等）的情况下将 std::bitset<64> 转换为双精度？我正在使用一个位集来表示遗传算法中的基因组，我需要一种将一组位转换为双精度的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T13:35:51.703

C++11之路：

```
union Converter { uint64_t i; double d; };

double convert(std::bitset<64> const& bs) {
    Converter c;
    c.i = bs.to_ullong();
    return c.d;
} 
```

编辑：如评论中所述，我们可以使用`char*`别名，因为它未指定而不是未定义。

```
double convert(std::bitset<64> const& bs) {
    static_assert(sizeof(uint64_t) == sizeof(double), "Cannot use this!");

    uint64_t const u = bs.to_ullong();
    double d;

    // Aliases to `char*` are explicitly allowed in the Standard (and only them)
    char const* cu = reinterpret_cast<char const*>(&u);
    char* cd = reinterpret_cast<char*>(&d);

    // Copy the bitwise representation from u to d
    memcpy(cd, cu, sizeof(u));

    return d;
} 
```

仍然需要 C++11 `to_ullong`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T14:44:25.273

大多数人都试图提供让您将位向量视为直接包含编码的 int 或 double 的答案。

我建议你完全避免这种方法。虽然它对于工作的某些定义确实“有效”，但它在整个地方引入了汉明悬崖。您通常希望您的编码安排事情，以便如果两个解码值彼此接近，那么它们的编码值也彼此接近。它还强制您使用 64 位精度。

我会手动管理转换。假设您要编码三个变量：x、y 和 z。例如，您的领域专业知识可以用来说明 -5 <= x < 5、0 <= y < 100 和 0 <= z < 1，其中 x 需要 8 位精度，y 需要 12 位, z 为 10 位。这为您提供了只有 30 位的总搜索空间。你可以有一个 30 位的字符串，将前 8 个作为编码 x，接下来的 12 个作为 y，最后 10 个作为 z。您还可以自由地对每一个进行灰码以移除汉明悬崖。

我个人过去做过以下事情：

```
inline void binary_encoding::encode(const vector<double>& params)
{
    unsigned int start=0;

    for(unsigned int param=0; param<params.size(); ++param) {
        // m_bpp[i] = number of bits in encoding of parameter i
        unsigned int num_bits = m_bpp[param];

        // map the double onto the appropriate integer range
        // m_range[i] is a pair of (min, max) values for ith parameter
        pair<double,double> prange=m_range[param];
        double range=prange.second-prange.first;
        double max_bit_val=pow(2.0,static_cast<double>(num_bits))-1;
        int int_val=static_cast<int>((params[param]-prange.first)*max_bit_val/range+0.5);

        // convert the integer to binary
        vector<int> result(m_bpp[param]);
        for(unsigned int b=0; b<num_bits; ++b) {
            result[b]=int_val%2;
            int_val/=2;
        }

        if(m_gray) {
            for(unsigned int b=0; b<num_bits-1; ++b) {
                result[b]=!(result[b]==result[b+1]);
            }
        }

        // insert the bits into the correct spot in the encoding
        copy(result.begin(),result.end(),m_genotype.begin()+start);
        start+=num_bits;
    }
}

inline void binary_encoding::decode()
{
    unsigned int start = 0;

    // for each parameter
    for(unsigned int param=0; param<m_bpp.size(); param++) {
        unsigned int num_bits = m_bpp[param];
        unsigned int intval = 0;
        if(m_gray) {
            // convert from gray to binary
            vector<int> binary(num_bits);
            binary[num_bits-1] = m_genotype[start+num_bits-1];
            intval = binary[num_bits-1];
            for(int i=num_bits-2; i>=0; i--) {
                binary[i] = !(binary[i+1] == m_genotype[start+i]);
                intval += intval + binary[i];
            }
        }
        else {
            // convert from binary encoding to integer
            for(int i=num_bits-1; i>=0; i--) {
                intval += intval + m_genotype[start+i];
            }
        }

        // convert from integer to double in the appropriate range
        pair<double,double> prange = m_range[param];
        double range = prange.second - prange.first;
        double m = range / (pow(2.0,double(num_bits)) - 1.0);

        // m_phenotype is a vector<double> containing all the decoded parameters
        m_phenotype[param] = m * double(intval) + prange.first;

        start += num_bits;
    }
} 
```

请注意，出于对您来说可能无关紧要的原因，我没有使用位向量——只是普通`vector<int>`的编码。当然，这里没有显示与此代码相关的大量内容，但您可能可以了解基本概念。

另一个注意事项，如果您正在执行 GPU 计算，或者如果您有一个特殊的问题，例如 64 位是合适的大小，那么将所有内容都塞进原生单词中可能是值得的。否则，我猜您添加到搜索过程中的开销可能会压倒您通过更快的编码和解码获得的任何好处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T13:10:51.630

**编辑::**我已经决定我对此有点傻。虽然你最终得到一个双精度，但它假设位集包含一个整数......这是一个很大的假设。您最终会得到每个位集的可预测和可重复的值，但我仍然认为这不是作者的意图。

好吧，如果您遍历位值并执行

```
output_double += pow( 2, 64-(bit_position+1) ) * bit_value; 
```

那会奏效。只要是大端

# jquery - jQuery / CSS - 目标 li a 而不是 li？

> ID：10351151
> 
> 赞同：0
> 
> 时间：2012-04-27T13:05:09.840
> 
> 标签：jquery, css, html-lists

我目前正在我的网站上集成 bootstraps scrollspy - 我也在使用这样的菜单：http: [//development.tobypitman.com/css/menu.html](http://development.tobypitman.com/css/menu.html)

现在 - 我可以在导航中定位我的 li - 但我想要的是定位 li a。

```
 selector = this.selector
      + '[data-target="' + target + '"],'
      + this.selector + '[href="' + target + '"]'

    active = $(selector)
      .parent('li')
      .addClass('active') 
```

任何人 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T13:07:55.407

也许这样的事情会奏效？

```
active = $(selector)
      .parent('li')
      .find('a')
      .addClass('active') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T13:48:28.097

您也可以使用：

```
active = $(selector)
    .parent('li')
    .children('a')
    .addClass('active'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T06:43:59.083

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="../../Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('.MenuLList').find('a.Testing').hover(function () { $(this).addClass('Active'); }, function () { $(this).removeClass('Active'); });
        });
    </script>
    <style type="text/css">
        .MenuLList
        {
            list-style: none;
        }

        .MenuLList li
        {
            margin: 5px 0px;
        }

        .MenuLList li a
        {
            text-decoration: none;
        }

        .Inactive
        {
            color: Red;
            width: 100px;
            background-color: Yellow;
        }

        .Active
        {
            font-weight: bolder;
            color: Green;
            width: 300px;
            background-color: Lime;
            padding-left: 30px;
        }
    </style>
</head>
<body>
    <ul class="MenuLList">
        <li><a class="Inactive" href="#">Test 1</a></li>
        <li><a class="Testing Inactive" href="#">Test 2</a> </li>
        <li><a class="Testing Inactive" href="#">Test 3</a> </li>
        <li><a class="Testing Inactive" href="#">Test 4</a> </li>
    </ul>
</body>
</html> 
```

# ruby-on-rails - Ruby on Rails - n:m 多对多关系

> ID：10351158
> 
> 赞同：6
> 
> 时间：2012-04-27T13:05:34.357
> 
> 标签：ruby-on-rails, ruby

我有两个对象，即配方和成分。
我使用创建它们

```
rails generate scaffold ingredient id:integer name:string
rails generate scaffold recipe id:integer name:string 
```

我也想用：m 关系（多对多）创建它们。
我该怎么做？我应该创建一个不同的脚手架吗？谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-27T13:11:15.490

不，您需要通过生成迁移来创建连接表。

```
rails g migration ingredients_recipes ingredient_id:integer recipient_id:integer 
```

然后，您可以添加到模型中：

成分.rb

```
has_and_belongs_to_many :recipe 
```

食谱.rb

```
has_and_belongs_to_many :ingredients 
```

或者，如果您想为连接添加其他属性（例如 Quantity），则可以为其生成模型。

```
rails g model ingredients_recipes ingredient_id:integer recipient_id:integer 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T13:11:44.670

这是一个很棒的教程，它展示了使用 many_to_many 关系的两种方法：[http ://railscasts.com/episodes/47-two-many-to-many](http://railscasts.com/episodes/47-two-many-to-many)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-12-11T12:56:05.773

您可以执行`rails generate migration create_join_table_ingredient_recipe ingredient recipe`它将生成一个迁移文件，您可以对其进行修改以包含索引和外键，例如：

```
class CreateJoinTableIngredientRecipe < ActiveRecord::Migration
  def change
    create_join_table :ingredients, :recipes do |t|
      t.index [:ingredient_id, :recipe_id]
      t.index [:recipe_id, :ingredient_id]
    end
    add_foreign_key :ingredients_recipes, :ingredients
    add_foreign_key :ingredients_recipes, :recipes
  end
end 
```

然后你可以添加`models/ingredient.rb`：

```
has_and_belongs_to_many :recipe 
```

反之，在`models/recipe.rb`：

```
has_and_belongs_to_many :ingredients 
```

# java - 弹簧注入不适用于构造函数-arg

> ID：10351159
> 
> 赞同：4
> 
> 时间：2012-04-27T13:05:36.587
> 
> 标签：java, spring

我有以下java类：

```
package configuration;
import common.config.ConfigurationService;

public class AppConfig {

    private ConfigurationService configurationService;  

    public AppConfig(ConfigurationService configurationService){
        this.configurationService = configurationService;
    } 
```

还

```
public class ConfigurationServiceImpl
  implements ConfigurationService, Runnable
{... 
```

应用上下文文件如下：

```
<bean id="appConfig" class="configuration.AppConfig" scope="prototype">
        <constructor-arg ref="configurationService"></constructor-arg>
    </bean>

    <bean id="configurationService"  class="common.config.ConfigurationServiceImpl" scope="singleton" />
    <bean id="propertyPlaceholderConfigurer"    class="common.config.PropertyPlaceholderConfigurer">
        <constructor-arg ref="configurationService" />
        <constructor-arg ref="serviceName" />
    </bean>

     <bean id="serviceName" class="java.lang.String"><constructor-arg value="filter"/></bean> 
```

在初始化期间，我收到以下错误并且我的 bean 未初始化：

> 原因：org.springframework.beans.factory.BeanCreationException：创建在类路径资源 [conf/applicationContext.xml] 中定义的名称为“appConfig”的 bean 时出错：指定了 1 个构造函数参数，但在 bean 'appConfig' 中找不到匹配的构造函数（提示：为简单参数指定索引和/或类型参数以避免类型歧义）

如果我将java类代码修改如下，则Spring注入可以工作：

```
package configuration;
import common.config.ConfigurationServiceImpl;

    public class AppConfig {

        private ConfigurationServiceImpl configurationService;  

        public AppConfig(ConfigurationServiceImpl configurationService){
            this.configurationService = configurationService;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:29:04.050

首先，您必须知道[Spring 不支持接口注入，](http://www.devshed.com/c/a/Java/The-Spring-Framework-Understanding-IoC/)这就是为什么您的第一种情况下的代码不起作用的原因，因为您将 ConfigurationService 作为构造函数参数传递给接口。

在第二种情况下，您通过传递 ConfigurationService 的实现类并将其作为构造函数参数来做正确的事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T12:33:54.513

单看Spring配置中AppConfig的包名与Java源码中声明的包名不符。您有“common.config”与“配置”。可能是错误文本具有误导性，找不到构造函数的原因是找不到类本身。

# c# - 为 SharePoint 中的 SPList 添加 JavaScript 到 NewForm

> ID：10351162
> 
> 赞同：1
> 
> 时间：2012-04-27T13:05:44.390
> 
> 标签：c#, javascript, sharepoint

我在 SharePoint 中有一个 SPList，我想为其编辑 NewForm.aspx。我想以编程方式将一些 JavaScript 作为 WebPart 添加到表单中。

我怎么做？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T09:45:23.757

如果您不想（或不能）使用 SharePoint Designer，您可以将

?ToolpaneView=2

在 URL 的末尾以在浏览器中以设计模式打开查看/编辑/新建表单。

[http://blog.pentalogic.net/2010/07/how-to-edit-list-forms-sharepoint-2010/](http://blog.pentalogic.net/2010/07/how-to-edit-list-forms-sharepoint-2010/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T13:13:33.437

在“列表和库”部分的 SharePoint 设计器中打开列表。在列表设计器视图中，您将看到与列表关联的表单列表，通常会列出一个“NewForm.aspx”表单。右键单击它，然后选择“以高级模式编辑文件”以显示用于表单的 ASP .Net / HTML 标记。

现在，在页面标记中添加您的自定义块。我通常建议您找到 ID 为“PlaceHolderMain”的 asp:content 元素。在内容占位符元素打开后立即将您的脚本添加为第一个元素，如下所示：

```
<asp:Content ContentPlaceHolderId="PlaceHolderMain" runat="server">
<script type='text/javascript' language='javascript'>
$(document).ready(function(e) { alert('my custom script has loaded'); });
</script>
..
.. Existing markup
..
</asp:Content> 
```

我上面的示例假设您的母版页中存在 jQuery，以便在表单完全加载后显示消息。

# python - 是否可以构造一个从集合中返回唯一值的生成器？

> ID：10351163
> 
> 赞同：1
> 
> 时间：2012-04-27T13:06:02.987
> 
> 标签：python, generator, python-2.7

目前我正在这样做：

```
# duplicates is a list
uniques = list(set(duplicates)) 
```

但是，唯一性通常是暂时的。为唯一性构建一个生成器会更好吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T13:11:15.847

如果您不需要列表，请`set(duplicates)`改用。这大约将您的内存使用量减半。集合是可迭代的。

或者，您可以定义一个生成器：

```
def uniques(it):
    seen = set()
    for x in it:
        if x not in seen:
            yield x
            seen.add(x) 
```

但我的预感是，这将比一次性构建一套要慢得多。无论如何，内存消耗大致相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T13:09:36.753

我并不完全清楚您希望通过使用生成器来实现什么。

有一点很清楚：它不会降低内存需求，因为为了确定当前元素是否唯一，生成器需要知道所有先前看到的唯一元素。

此外，构建列表的目的`list(set(...))`并不完全清楚。为什么不坚持使用您已经在构建的系列？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T13:12:36.893

使用生成器而不是静态集合有两个可能的好处，其中只有一个（可能）适用于这里：

*   内存使用情况。不适用于此处，因为要以这种方式或其他方式生成唯一性，您需要 O(n) 内存

*   时间 - 如果您希望只消耗生成的输出的一部分，那么您可以通过懒惰地生成它来节省时间。因此，如果这是您的情况，那么使用生成器可能会为您节省一些处理能力。当然，要懒惰地生成唯一值，您需要记住已经生成的一组值（见上文）并随时过滤掉它们。

# apache - Apache：客户端被服务器配置拒绝

> ID：10351167
> 
> 赞同：152
> 
> 时间：2012-04-27T13:06:23.677
> 
> 标签：apache, .htaccess

我正进入（状态

> [2012 年 4 月 24 日星期二 12:12:55] [错误] [客户端 127.0.0.1] 客户端被服务器配置拒绝：/labs/Projects/Nebula/bin/

我的目录结构看起来像（我使用的是 Symfony 2，应该是其他 Web 框架的类似结构）

![在此处输入图像描述](../Images/f6dd3743f7935ffa104676bf0defb847.png)

我的虚拟主机设置如下：

```
<VirtualHost nebula:80>
    DocumentRoot "/labs/Projects/Nebula/web/"
    ServerName nebula
    ErrorLog "/var/log/httpd/nebula-errors.log"
</VirtualHost>

<Directory "/labs/Projects/Nebula/">
    Options All
    AllowOverride All
    Order allow,deny
    Allow from 127.0.0 192.168.1 ::1 localhost
</Directory> 
```

我想知道是什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：400
> 
> 时间：2012-12-17T22:46:57.067

Apache 2.4.3 (or maybe slightly earlier) added a new security feature that often results in this error. You would also see a log message of the form "client denied by server configuration". The feature is requiring an authorized user identity to access a directory. It is turned on by DEFAULT in the httpd.conf that ships with Apache. You can see the enabling of the feature with the directive

```
Require all denied 
```

This basically says to deny access to all users. To fix this problem, either remove the denied directive (or much better) add the following directive to the directories you want to grant access to:

```
Require all granted 
```

as in

```
<Directory "your directory here">
   Order allow,deny
   Allow from all
   # New directive needed in Apache 2.4.3: 
   Require all granted
</Directory> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-04T03:18:08.420

好的，我使用了错误的语法，我应该使用

```
Allow from 127.0.0.1
Allow from ::1
... 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-05-20T08:36:50.117

In Apache 2.4 the old access authorisation syntax has been deprecated and replaced by a new system using **Require**.

What you want then is something like the following:

```
<Directory "/labs/Projects/Nebula/">
  Options All
  AllowOverride All
  <RequireAny>
    Require local
    Require ip 192.168.1
  </RequireAny>
</Directory> 
```

This will allow connections that originate *either* from the local host *or* from ip addresses that start with "192.168.1".

如果您不想立即更新配置，还有一个新模块可以让 Apache 2.4 识别旧语法：

```
sudo a2enmod access_compat 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-21T13:06:59.193

我在使用 Vesta CP 时遇到了这个问题，对我来说，诀窍是删除 .htaccess 并尝试再次访问任何文件。

这导致 .htaccess 文件的重新生成，然后我能够访问我的文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-02T05:32:31.783

您可以尝试将“Allow from 127.0.0 192.168.1 ::1 localhost”更改为“Allow from all”。如果这样可以解决您的问题，您需要减少对可以从何处请求内容的限制

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-06T13:05:17.647

这是我在 debian 上的 symfony 1.4 虚拟主机文件，它运行良好。

```
 <Directory /var/www/sf_project/web/>
    Options All Indexes FollowSymLinks    
    AllowOverride All
    Order allow,deny
    Allow from all
  </Directory> 
```

如果您不想限制对特定 IP 范围的访问，例如 localhost，请使用以下命令：

```
Allow from 127.0.0.0/8 
```

The [mod_authz_host](http://httpd.apache.org/docs/2.2/en/mod/mod_authz_host.html) is responsible for filtering ip ranges. You can look up detailed things in there.

But maybe the problem could be related to some kind of misconfiguration in your "apache2.conf".

On what OS is the apache running?

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-09-20T05:29:12.720

if you are having the

```
Allow from All 
```

in httpd.conf then make sure us have

> index.php

like in the below line in httpd.conf

```
DirectoryIndex index.html index.php 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-04-27T22:52:33.160

In my case the key was:

```
AllowOverride All 
```

in vhost definition. I hope it helps someone.

* * *

## 回答 #9

> 赞同：-4
> 
> 时间：2015-07-27T12:21:23.107

这段代码对我有用..

```
 <Location />
Allow from all
Order Deny,Allow
</Location> 
```

希望这对其他人有帮助

# maven-3 - 如何将重命名的 Tycho 产品安装到 Maven 存储库中

> ID：10351177
> 
> 赞同：0
> 
> 时间：2012-04-27T13:07:21.140
> 
> 标签：maven-3, tycho

我尝试使用新的 Tycho 功能来重命名生成的工件。zip 文件在 target/products 目录下正确重命名，但是当 Maven 将它们安装到 C:\.m2 时，它们将具有原始名称。

```
<configuration>
    <products>
        <product>
            <id>my.product.id</id>
            <archiveFileName>xyz</archiveFileName>
        </product>
    </products> 
</configuration> 
```

结果在目标/产品目录中：`xyz-win32.win32.x86.zip`

结果为 C:\.m2...\:`my.product.id-win32.win32.x86.zip`

还有其他地方可以配置吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T09:52:49.940

After several days of thinking, I have the solution, that there is no solution. It's not possible to rename the artifact in the maven repository. How would maven find the artifact in case of a renamed zip file.

The only place to rename the zip file is in the target directory and work on from this place.

# c# - 从外部程序集加载 Unity 配置

> ID：10351178
> 
> 赞同：0
> 
> 时间：2012-04-27T13:07:21.443
> 
> 标签：c#, configuration, unity-container

我正在尝试从另一个名为“Config”的程序集中加载 Unity 的配置设置，但是我运气不佳。

```
var fileMap = new ConfigurationFileMap("assembly://Config/Config/Unity.config"); 
System.Configuration.Configuration configuration = onfigurationManager.OpenMappedExeConfiguration(fileMap as ExeConfigurationFileMap, ConfigurationUserLevel.None);
var unitySection = (UnityConfigurationSection)configuration.GetSection("unity"); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:08:24.337

试试这个作为一种解决方法。

在您的代码中：

```
 var container = new UnityContainer();
            var path = ConfigurationManager.AppSettings["UnityPath"].ToString();
            var map = new ExeConfigurationFileMap();
            map.ExeConfigFilename = path; 
            var config = ConfigurationManager.OpenMappedExeConfiguration(map, ConfigurationUserLevel.None);
            UnityConfigurationSection section = (UnityConfigurationSection)config.GetSection("unity"); 
```

在您的配置文件中：

```
<appSettings>
    <add key ="UnityPath" value="C:\PathToYourConfigFile\Unity.Config"/>
  </appSettings> 
```

# flex4 - 带有 PHP 和 BulkLoader 的 Flex 4 - 资产被删除

> ID：10351179
> 
> 赞同：0
> 
> 时间：2012-04-27T13:07:30.417
> 
> 标签：flex4, loader, wampserver, bulkloader

有没有人遇到过您的资产（图像 png 文件）从您的网络路径中删除的情况？

让我更清楚地解释一下。

我正在使用加载器和[BulkLoader从我的 flex4 应用程序加载位于我的本地主机（而不是 flex4 应用程序路径）中的一些图像](http://code.google.com/p/bulk-loader/)

这是第二次发生某些图像从 localhost 中的路径中删除的情况。

我不确定是什么原因造成的？那是装载机吗？或bulkloader或网络服务器？（WAMP）或任何病毒？

它在过去 7 天内发生了第二次。我很幸运，我在远程主机中有一个副本，所以我很容易把它们拿回来。但它是什么以及为什么它被删除是一个错误。

有什么想法可能导致这种情况吗？或者任何人都知道 Loader 或 BulkLoader 中的任何错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T12:19:26.280

好吧，我找到了答案。**罪魁祸首**是 Flash Builder 。

我很确定许多 Flash 开发人员都面临调试器启动问题，即 Flash 构建器从不启动应用程序，因为它可能在某些地方发生了故障，并且在大约 50-60% 的进度处停止了启动过程。它也发生在我身上，并且在一天之内发生了足够多的次数。

我刚刚发现这与我提出的问题有关。

每次编译应用程序时，FB 都会清理调试/输出文件夹。如果它只清理项目文件，我不会介意。但是，它只是删除文件夹中的所有内容并将它们添加回来。每次我更改代码并保存并运行或“清理”项目以构建新副本时，都会在后台发生这种情况。

在此过程中（删除和添加文件），如果 FB 启动并且我强制终止该过程（有时必须这样做）；我的文件不见了。

**flash 输出文件夹**是我的**web 根目录**，我将在其中拥有我的所有 php、资产和所有服务器端的东西。

我将打开一个主题来讨论如何避免它，我也有问题。

# mysql - 如何编写这个 mysql where 子句？

> ID：10351187
> 
> 赞同：1
> 
> 时间：2012-04-27T13:08:06.777
> 
> 标签：mysql

我有一个字段`date_purchased`，`date_ordered`哪些是日期时间字段。现在我需要获取该产品是在下单后购买的记录，如果购买是在下单前 2 天或下单后 7 天：

```
if(date_purchased>date_ordered)
{
    if(date_purchased>(today-2) or date_puchased<(date_ordered+7))
} 
```

基本上，我如何将上面的代码翻译成 mysql where 条件（嵌套和/或）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T13:10:09.553

使用[`DATE_SUB()`和`DATE_ADD()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-add)将天数添加到日期时间字段。两个日期比较`()`作为单个组件包含在`AND`.

```
WHERE
  date_purchased > date_ordered
  AND (
    date_purchased > DATE_SUB(NOW(), INTERVAL 2 DAY) 
    OR date_purchased  < DATE_ADD(date_ordered, INTERVAL 7 DAY)
  ) 
```

**注意**如果这些是`DATETIME`字段而不是`DATE`字段，您可能希望去掉时间部分，`DATE()`以便日期比较从一天的开始开始，而不是从当前时间开始的某个 24 小时间隔。这也意味着使用`CURDATE()`而不是`NOW()`获取今天的日期而不是时间戳。

```
WHERE
  date_purchased > date_ordered
  AND (
    DATE(date_purchased) > DATE_SUB(CURDATE(), INTERVAL 2 DAY) 
    OR DATE(date_purchased)  < DATE_ADD(DATE(date_ordered), INTERVAL 7 DAY)
  ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T13:09:57.493

使用 BETWEEN 运算符选择间隔。

WHERE d BETWEEN *date-2 和 *date+7

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T13:11:12.313

```
SELECT * FROM your_table
WHERE date_purchased > date_ordered
    AND (DATE_DIFF(date_purchased, date_ordered) > 2
    OR DATE_DIFF(date_purchased, date_ordered) < -7) 
```

# java - 编译时的通用类 型检查

> ID：10351190
> 
> 赞同：0
> 
> 时间：2012-04-27T13:08:14.680
> 
> 标签：java, generics

让我们看看一些`Set<E>`方法声明。

```
public boolean add(E e);
public E get(int index); 
```

让我们尝试使用它。

```
List<Boolean> list = new ArrayList<Boolean>();
Integer i = list.get(0);              //Predictably, here we get a compile error.
list.contains(new Integer(3));        //But this line is allowed. Why? 
```

即使在此代码的非通用等效项中（据我所知，它会简单地转换为它），我们在两行中都会遇到编译错误。

```
List s = new ArrayList();
s.contains((Boolean)(new Integer(3)));
Integer i = (Boolean)s.get(3); 
```

那么为什么我在一般情况下没有得到错误呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T13:14:15.453

`contains`不是泛型的。它的签名仍然是：

```
boolean contains(Object o) 
```

[http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html#contains(java.lang.Object)](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html#contains(java.lang.Object))

这里还有更多： [http ://smallwig.blogspot.com/2007/12/why-does-setcontains-take-object-not-e.html](http://smallwig.blogspot.com/2007/12/why-does-setcontains-take-object-not-e.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T13:14:08.960

[请参阅此问题](https://stackoverflow.com/questions/857420/what-are-the-reasons-why-map-getobject-key-is-not-fully-generic)的答案。

基本上`contains()`, `remove()`, etc 方法只关心被比较和删除的对象是否*相等*，而不是它们具有相同的类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T13:16:00.887

好吧，这一行：

```
s.contains((Boolean)(new Integer(3))); 
```

有编译时错误仅仅是因为您不能将明显是 Integer 实例的内容转换为布尔值。它与 List 的泛型无关。

然后，`contains(Object o)`不是一般类型的（在 java.util.Collection 中），这就是为什么您没有收到编译时警告的原因。这与协方差和逆变有关。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T13:22:10.727

来自 List 接口 API：

```
E get(int index) 
```

所以它返回泛型类型的对象。虽然作为参数`contains`获取：`Object`

```
boolean contains(Object o) 
```

所以这都是关于方法签名的。[在列表](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)中查看更多信息

# c# - 将多个 app.config 移动到更全球化的地方

> ID：10351193
> 
> 赞同：2
> 
> 时间：2012-04-27T13:08:24.423
> 
> 标签：c#, configuration, selenium, app-config

我们有几个 c# selenium 测试套件，由多个测试人员在多个服务器上运行。

如果可能的话，我想简化设置。目前我们有多个 c# selenium 项目，每个项目都有自己的 app.config。当我想更改服务器时，我需要更改每个 app.config。我的 app.config 目前看起来像这样：

```
<connectionStrings>
    <add name="Company"
         connectionString="Data Source=func3_db1;Initial Catalog=CompanyProduction;Integrated Security=SSPI;"/>
    <add name="CompanyProductionEntities"
         connectionString="metadata=res://*/DataAccess.CompanyEntities.csdl|res://*/DataAccess.CompanyEntities.ssdl|res://*/DataAccess.CompanyEntities.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=func3_db1;initial catalog=CompanyProduction;integrated security=True;multipleactiveresultsets=True;App=EntityFramework&quot;"
         providerName="System.Data.EntityClient" />
</connectionStrings> 
```

我们在 Windows 环境变量中也有一些设置。这是一种晦涩难懂的方法，但效果很好。要访问这些设置，我们只需执行以下操作：

```
var value = Environment.GetEnvironmentVariable(varName, EnvironmentVariableTarget.User); 
```

因此，我们有一个名为“ **CompanyTestBrowser** ”的变量，可以设置为“ *Firefox* ”或“ *Chrome* ”或“ *IE* ”。

我喜欢环境变量，因为运行我们所有 selenium 测试的 powershell 脚本可以在需要时轻松更改变量。

但是，我似乎无法从这个 app.config 中提取那些 DB 字符串。我怎样才能将它们转移到更具全球性和动态性的东西中。理想情况下，我只需要在 1 个地方设置？理想情况下，我可以将它们移动到其他环境变量或位于 c# 项目之外的配置文件中。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:18:47.607

我的建议是，将连接字符串保存在网络位置 ex 的 xml 文件中。\machine-name\DBConnectionString.config 如下格式

```
<connectionStrings>
    <add name="Company"
         connectionString="Data Source=func3_db1;Initial Catalog=CompanyProduction;Integrated Security=SSPI;"/>
    <add name="CompanyProductionEntities"
         connectionString="metadata=res://*/DataAccess.CompanyEntities.csdl|res://*/DataAccess.CompanyEntities.ssdl|res://*/DataAccess.CompanyEntities.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=func3_db1;initial catalog=CompanyProduction;integrated security=True;multipleactiveresultsets=True;App=EntityFramework&quot;"
         providerName="System.Data.EntityClient" />
</connectionStrings> 
```

在您的应用程序启动例程中，读取 \machine-name\DBConnectionString.config 文件并使用以下代码片段更新应用程序配置文件，

```
// Get the application configuration file.
System.Configuration.Configuration config =
        ConfigurationManager.OpenExeConfiguration(
        ConfigurationUserLevel.None);

// Create a connection string element and
// save it to the configuration file.

//Read the \\machine-name\DBConnectionString.config file

// Create a connection string element.
ConnectionStringSettings csSettings =
        new ConnectionStringSettings("My Connection",
        "LocalSqlServer: data source=127.0.0.1;Integrated Security=SSPI;" +
        "Initial Catalog=aspnetdb", "System.Data.SqlClient");

// Get the connection strings section.
ConnectionStringsSection csSection =
    config.ConnectionStrings;

// Add the new element.
csSection.ConnectionStrings.Add(csSettings);

// Save the configuration file.
config.Save(ConfigurationSaveMode.Modified); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T13:32:22.537

您可以向 app.config 添加一个键，该键具有指向其中包含所有常见设置的 XML 文件的路径，然后编写一个新的 ConfigurationManager 类以首先尝试从 app.config 中提取一个值，如果找不到，则打开XML 文件并在其中查找

像这样的东西：

```
 <appSettings>
    <add key="ConfigFileSettings" value="\\MyServer\CommonSetting\settings.xml"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T12:31:08.080

我使用了上面公认的解决方案。这是我的确切代码（仅与上面略有不同）。

该解决方案有效地保留了我当前的 app.config 文件。该 app.config 文件中的所有其他设置都被保留，除了我用我的自定义设置“覆盖”“connectionString”部分。

```
 Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
    System.Console.WriteLine("Starting to write app.config stuff");

    //Change the Admin's app.config where name=companyProductionEntities
    config.ConnectionStrings.ConnectionStrings["companyProductionEntities"].ConnectionString =
        string.Format(@"metadata=res://*/DataAccess.companyEntities.csdl|res://*/DataAccess.companyEntities.ssdl|res://*/DataAccess.companyEntities.msl;provider=System.Data.SqlClient;provider connection string=';data source={0};initial catalog=companyProduction;integrated security=True;multipleactiveresultsets=True;App=EntityFramework';", SeleniumConfiguration.SimpleDatabaseConnectionString);
    config.Save(ConfigurationSaveMode.Modified, true);
    ConfigurationManager.RefreshSection("connectionStrings"); 
```

# ruby-on-rails - ruby on rails - 从另一个脚手架创建和填充组合框/下拉列表

> ID：10351195
> 
> 赞同：0
> 
> 时间：2012-04-27T13:08:27.113
> 
> 标签：ruby-on-rails, ruby

我想在我的网页中显示一个组合框。
我有两个对象：
即
rails 生成脚手架人员 id:integer name:string
rails 生成脚手架状态 id:integer name:string

我希望在人上可以选择状态。
最佳做法是什么？
我应该运行不同的脚手架吗？
（一个会在数据库中为我创建一个外键和另一个代码？）
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T00:47:25.513

如果 a在任何时候`Person`都只能链接到单个，请在 中添加一个字段。例如，如果 a可以有很多链接到它，您应该为它创建一个包含 the和 的对象。`State``state_id``Person``Person``States``Residences``state_id``person_id`

更多关于关系和链接模型的信息可以在[Rails 指南中找到](http://guides.rubyonrails.org/association_basics.html)

要呈现状态下拉列表，您可以使用[select 辅助方法](http://guides.rubyonrails.org/form_helpers.html#the-select-and-option-tags)。确保为选择输入字段（state_id）使用正确的字段名称，而不是关联的名称。（状态）

# java - 将 JPanel 添加到 JPanel 数组

> ID：10351196
> 
> 赞同：1
> 
> 时间：2012-04-27T13:08:27.997
> 
> 标签：java, arrays, swing, jpanel

我已经声明了一个数组：

```
private javax.swing.JPanel[] panelArray = new javax.swing.JPanel[3]; 
```

我也有 3 个面板：panel0、panel1 和 panel2。我可以将这些面板添加到阵列中吗？IE

```
panelArray[0] = panel0;
panelArray[1] = panel1;
panelArray[2] = panel2; 
```

然后像这样操作数组？

```
boolean[] myBools; .... then set them as true/false
for(int i=0; i<3; i++)
{
    if(myBools[i])
        panelArray[i].setVisible(true)
} 
```

因为那对我不起作用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T13:49:47.617

在我这边它工作正常，在这个程序中：

```
import java.awt.*;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import javax.swing.*;

public class MyPanel
{   
    private JPanel[] panelArray = new JPanel[3];
    private boolean[] myBools = new boolean[]{false, false, false};
    private int counter = 0; 
    private int prvPanelCounter = 0;
    private Timer timer;
    private ActionListener timerAction = new ActionListener()
    {
        public void actionPerformed(ActionEvent ae)
        {
            counter++;
            if (counter > 2)
                counter = 0;
            myBools[counter] = true;
            for (int i = 0; i < 3; i++) 
            {
                if (myBools[i])
                {
                    panelArray[i].setVisible(myBools[i]);                   
                    panelArray[prvPanelCounter].setVisible(myBools[prvPanelCounter]);
                    myBools[i] = false; 
                    prvPanelCounter = i;
                    break;
                }
            }
        }
    };

    private void createAndDisplayGUI()
    {
        JFrame frame = new JFrame("Locate Mouse Position");
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        JPanel panel0 = new JPanel();
        panel0.setOpaque(true);
        panel0.setBackground(Color.BLUE);       
        JPanel panel1 = new JPanel();
        panel1.setOpaque(true);
        panel1.setBackground(Color.RED);
        JPanel panel2 = new JPanel();
        panel2.setOpaque(true);
        panel2.setBackground(Color.DARK_GRAY);

        panelArray[0] = panel0;
        panelArray[1] = panel1;
        panelArray[2] = panel2;

        JComponent contentPane = (JComponent) frame.getContentPane();
        contentPane.setLayout(new GridLayout(0, 1));
        frame.add(panel0);  
        frame.add(panel1);  
        frame.add(panel2);  
        panel0.setVisible(myBools[counter]);
        panel1.setVisible(myBools[counter]);
        panel2.setVisible(myBools[counter]);
        frame.setSize(300, 300);
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
        timer = new Timer(1000, timerAction);
        timer.start();
    }

    public static void main(String\u005B\u005D args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new MyPanel().createAndDisplayGUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T13:17:26.640

想做的事都可以做，但要记住以下几点：

1.  确保在引用 JPanel 之前对其进行初始化。
2.  语句“panelArray[i].setVisible(true)”后面需要一个分号。
3.  除非您将它们添加到另一个组件（例如 JFrame），否则这些面板中的任何一个都将不可见。
4.  而不是声明 javax.swing.JPanel，您可以只在页面顶部导入 JPanel 并将其简称为 JPanel。
5.  您的“if”语句是不必要的。只需执行 .setVisible(myBools[i]);

希望这些对你有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T13:10:31.693

是的你可以。你真的没有用 初始化`myBools`数组`new`吗？

# objective-c - 声音仅适用于设备，但不适用于模拟器

> ID：10351199
> 
> 赞同：2
> 
> 时间：2012-04-27T13:08:43.847
> 
> 标签：objective-c, ios, ipad, audio, audiotoolbox

我在我的 iPad 上播放一些短声音，如下所示：[在 iOS 中播放短声音](https://stackoverflow.com/questions/10329291/play-a-short-sound-in-ios/10336977#10336977)

我正在使用一个`caf`可以从 Finder 成功播放的文件。现在我经历了相当多的麻烦，试图实现声音的播放，我很好奇我似乎不明白的问题可能是什么：

*   选项 1：当我创建 SystemSoundID 然后立即播放时，我在设备和模拟器上听不到任何声音。

*   选项 2：当我为 SystemSoundID 创建一个实例变量并在其中初始化它时，`viewDidLoad`我设法播放声音，但只能在 iPad 上播放，而不是在模拟器上播放。

*   选项 3：除了使用，`SystemSoundID`我还可以使用 AVAudioPlayer 播放一个`.wav`文件，该文件可以在 iPad 和模拟器上运行，但在这里我需要创建 AVAudioPlayer，`viewDidLoad`否则如果我一次性完成所有操作，我将不会听到任何声音。

目前最好的选择似乎是`Option 3`因为它适用于模拟器和 iPad，但是因为我需要预先初始化播放器，所以我需要一个`AVAudioPlayer`实例来处理我想要播放的每种不同的声音，这似乎不是很记忆力...

是否有我遗漏的东西，是否可以使用`AudioToolbox`框架在两个平台上播放声音（选项 1 和选项 2）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T16:18:44.050

我写了一个库来简化这一切。它包装了 AVAudioPlayer，在设备和模拟器上都可以正常工作。

[https://github.com/nicklockwood/SoundManager](https://github.com/nicklockwood/SoundManager)

代码相当简单，虽然我做了一些半聪明的事情来初始化音频播放器。如果您不想使用该库，则只需复制代码即可。

不过有一点警告 - 每当您使用 AVAudioPlayer 时，模拟器都会在内部引发一些奇怪的异常。它们根本不会影响应用程序，但是如果您在 Xcode 中启用了异常中断，那么应用程序将在启动期间进入调试器几次，您必须手动恢复，如果你没想到。

# java - GlassFish 区域设置 - JPQL 查询 ORDER BY

> ID：10351204
> 
> 赞同：1
> 
> 时间：2012-04-27T13:08:54.437
> 
> 标签：java, jakarta-ee, jpa, glassfish

我的 JPQL 查询在包含国家字符（波兰语）的列上包含 ORDER BY。在测试机器上订购是可以的，但是当我部署到生产时，带有波兰语字符的名称在列表的末尾。

两台机器使用相同的 Glassfish 版本并连接到相同的远程数据库（oracle 11）。不同的是测试机有Windows XP Polish，JDK 7u3 32bit，生产有Windows 2008 Server English，JDK 7u3 64bit。

我想Java使用来自操作系统的语言，这会影响数据库连接。如何更改 Glassfish 使用的区域设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T10:12:22.133

尝试在启动文件中设置 jvm 参数，如下所示：

`java -Duser.language=pl -Duser.region=PL .....`

# castle-windsor - 使用 Windsor 3.0+ xml 配置，如何为服务注册多种类型？

> ID：10351206
> 
> 赞同：0
> 
> 时间：2012-04-27T13:08:54.923
> 
> 标签：castle-windsor, windsor-3.0

我知道我可以为一个组件注册一个类型，如下所示：

```
<component 
    id="myservice"
    service="MyServices.IService"
    type="MyServices.Impl.Service1" /> 
```

想象一个场景，我有一个类，它需要一个 IService 数组，如下所示：

```
public class MyClass
{
    public MyClass(IService[] services) { ... }
} 
```

例如，如何使用 XML 配置为 IService 组件注册 Service1、Service2 和 Service3？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T04:23:10.540

```
<component 
    id="myservice1"
    service="MyServices.IService"
    type="MyServices.Impl.Service1" />
<component 
    id="myservice2"
    service="MyServices.IService"
    type="MyServices.Impl.Service2" />
<component 
    id="myservice3"
    service="MyServices.IService"
    type="MyServices.Impl.Service3" /> 
```

或者，如果您想更紧凑：

```
<component service="IService" type="Service1" />
<component service="IService" type="Service2" />
<component service="IService" type="Service3" /> 
```

# javascript - 使用 jQuery 选择类

> ID：10351208
> 
> 赞同：1
> 
> 时间：2012-04-27T13:09:04.877
> 
> 标签：javascript, jquery, html

```
<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
<p class="myChild">one</p>
<p class="myChild">two</p>
<p class="myChild">three</p>

<script>
$(document).ready(function(){
//code that selects the second and the third myChild class name

});
</script>
</body>
</html> 
```

在这里，我有 3 个带有 myChild 类的 p 标签，我想使用 jQuery 选择第二个和最后一个标签来执行此操作，并且知道如何使用它进行操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:11:13.003

用于`slice()`选择结果子集：

```
$(".myChild").slice(1); 
```

这将删除第一个`myChild`元素并返回其余元素。

[**示例小提琴**](http://jsfiddle.net/gnzn3/)

* * *

如果要指定切片的起点和终点，则提供两个参数：

```
$(".myChild").slice(1,3); 
```

[**另一个小提琴**](http://jsfiddle.net/gnzn3/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T13:11:41.740

只需使用 not 过滤器并将其传递给 eq(0) ，这基本上会去除第一个结果

```
$('.myChild').not(':eq(0)'); 
```

或以最短的方式并仅使用选择器引擎

```
$('.myChild:not(:eq(0))') 
```

在这里[摆弄 http://jsfiddle.net/D5Ngh/](http://jsfiddle.net/D5Ngh/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T21:17:40.290

`$(".myChild")`将返回一个`HTMLCollection`（有点像一个数组）对象 - 您可以遍历 this 或直接引用该集合中的位置。例如`$(".myChild").eq(1)`第 2 项和`$(".myChild").eq(2)`第 3 项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T13:17:45.030

如果要检查除第一个以外的其余部分，则可以使用`:not(0)`

[演示](http://jsfiddle.net/ranganadh/gg4Qa/1/)

# c++ - C++ 两个库依赖于相同的库但不同的版本？

> ID：10351215
> 
> 赞同：26
> 
> 时间：2012-04-27T13:09:24.157
> 
> 标签：c++, gcc, dependencies

如果我使用 GCC 编译器在 C++ 中有库 A、B 和 C。Lib A 和 B 都依赖于 C，但依赖于它的不同版本。然后我可以在另一个程序中同时使用 A 和 B 吗？或者 A 和 B 要求的 C 的不同版本会冲突吗？我该如何解决这个问题，我可以吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T13:26:34.603

我假设您正在动态链接。如果 A 和 B 都完全封装了它们各自版本的 C，那么就有可能做到这一点。您可能必须确保不同版本的 C 命名不同（即 libMyC.1.so 和 libMyC.2.so）以避免在运行时加载它们时产生混淆。

您还可以调查静态构建 A 和 B 以避免运行时负载混淆的可能性。

找出答案的最简单方法就是尝试一下。确定它是否会起作用应该不会花很长时间。

最后，当然，到目前为止，最简单的解决方案，从维护的角度来看也是最好的，是将 A 或 B 提升到另一个的级别，以便它们都使用相同版本的 C。这在很多方面都更好我**强烈敦促**你这样做，而不是尝试解决一个真正的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T13:26:07.487

动态库不做强大的版本检查，这意味着如果 A 在 C 中使用的入口点没有改变，那么它仍然可以使用更高版本的 C。话虽如此，Linux 发行版通常使用符号链接提供版本支持的文件系统方法。这意味着如果一个可执行文件被设计为仅与 1.2.2 一起使用，那么它可以专门链接到 find `/usr/lib/mylib-1.2.2`。

大多数程序都链接到查找一般情况，例如。`/usr/lib/mylib`这将象征性地链接到机器上的版本。例如`/usr/lib/mylib -> /usr/lib/mylib-1.2.2`。如果您不链接到特定版本并且实际接口不更改，则向前兼容性应该不是问题。

如果要检查库 A 和 B 是否绑定到特定命名的 C 版本，可以使用`ldd`它们上的命令检查 dll 搜索路径。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-21T21:45:13.347

我在寻找答案时发现了这个问题，正如@Component-10 所建议的那样，我创建了一组最小的文件来调查这种行为并使用 MacOS + CLANG 进行了测试。

*   如果将 A 和 B 构建为共享库，您可以获得对依赖库 C 的正确解析，C 是 A 和 B 的依赖项，但版本不同。
*   如果将 A 和 B 构建为静态，则会失败。

**编辑**

**正如评论中所指出的，共享库方法不是跨平台的，在 Linux 中不起作用。**

@SergA 使用动态加载库 (dl) API ( [https://www.dwheeler.com/program-library/Program-Library-HOWTO/x172.html](https://www.dwheeler.com/program-library/Program-Library-HOWTO/x172.html) ) 创建了一个解决方案。

## @SergA 使用 dlopen 的解决方案

```
#include <stdio.h>
#include <stdlib.h>
#include <dlfcn.h>

// #define DLOPEN_FLAGS RTLD_LAZY | RTLD_LOCAL
#define DLOPEN_FLAGS RTLD_LAZY

#if defined(_WIN32) || defined(__CYGWIN__)
    // Windows (x86 or x64)
    const char* libA = "libA.shared.dll";
    const char* libB = "libB.shared.dll";
#elif defined(__linux__)
    // Linux
    const char* libA = "libA.shared.so";
    const char* libB = "libB.shared.so";
#elif defined(__APPLE__) && defined(__MACH__)
    // Mac OS
    const char* libA = "libA.shared.dylib";
    const char* libB = "libB.shared.dylib";
#elif defined(unix) || defined(__unix__) || defined(__unix)
    // Unix like OS
    const char* libA = "libA.shared.so";
    const char* libB = "libB.shared.so";
#else
    #error Unknown environment!
#endif

int main(int argc, char **argv)
{
  (void)argc;
  (void)argv;

  void *handle_A;
  void *handle_B;
  int (*call_A)(void);
  int (*call_B)(void);
  char *error;

  handle_B = dlopen(libB, DLOPEN_FLAGS);
  if(handle_B == NULL) {
    fprintf(stderr, "%s\n", dlerror());
    exit(EXIT_FAILURE);
  }

  handle_A = dlopen(libA, DLOPEN_FLAGS);
  if(handle_A == NULL) {
    fprintf(stderr, "%s\n", dlerror());
    exit(EXIT_FAILURE);
  }

  call_A = dlsym(handle_A, "call_A");
  error = dlerror();
  if(error != NULL) {
    fprintf(stderr, "%s\n", error);
    exit(EXIT_FAILURE);
  }
  call_B = dlsym(handle_B, "call_B");
  error = dlerror();
  if(error != NULL) {
    fprintf(stderr, "%s\n", error);
    exit(EXIT_FAILURE);
  }

  printf(" main_AB->");
  call_A();
  printf(" main_AB->");
  call_B();

  dlclose(handle_B);
  dlclose(handle_A);

  return 0;
} 
```

## 以前的解决方案显示静态与共享

这是我的一组文件。为简洁起见，我不会在这里全部展示它们。

```
$ tree .
.
├── A
│   ├── A.cc
│   └── A.hh
├── B
│   ├── B.cc
│   └── B.hh
├── C
│   ├── v1
│   │   ├── C.cc
│   │   └── C.hh
│   └── v2
│       ├── C.cc
│       └── C.hh
├── compile_shared_works.sh
├── compile_static_fails.sh
├── main_A.cc
├── main_AB.cc
└── main_B.cc 
```

A 依赖于 C 版本 1，B 依赖于 C 版本 2。每个库都包含一个函数，例如`libA`包含`call_A`哪些调用`libC`v1's`call_C`和`libB`包含`call_B`哪些调用`libC`v1's `call_C`。

然后`main_A`链接到 only `libA`、`main_B`to only`lib_B`和`main_AB`both 。

### compile_static_fails.sh

以下命令集以`libA`静态`libB`方式构建。

```
#clean slate
rm -f *.o *.so *.a *.exe

#generate static libA
g++ -I . -c C/v1/C.cc A/A.cc
ar rvs libA.a *.o
rm -f *.o

#generate static libB
g++ -I . -c C/v2/C.cc B/B.cc
ar rvs libB.a *.o
rm -f *.o

#generate 3 versions of exe
g++ -L . -lA main_A.cc -o main_A.exe
g++ -L . -lB main_B.cc -o main_B.exe
g++ -L . -lA -lB main_AB.cc -o main_AB.exe
./main_A.exe
./main_B.exe
./main_AB.exe 
```

输出是

```
main_A->call_A->call_C [v1]
main_B->call_B->call_C [v2]
main_AB->call_A->call_C [v1]
main_AB->call_B->call_C [v1] 
```

当`main_AB`执行`call_B`它去错误的地方！

### compile_shared_works.sh

```
#clean slate
rm -f *.o *.so *.a *.exe

#generate shared libA
g++ -I . -c -fPIC C/v1/C.cc A/A.cc
g++ -shared *.o -o libA.so
rm *.o

#generate shared libB
g++ -I . -c -fPIC C/v2/C.cc B/B.cc
g++ -shared *.o -o libB.so
rm *.o

#generate 3 versions of exe
g++ -L . -lA main_A.cc -o main_A.exe
g++ -L . -lB main_B.cc -o main_B.exe
g++ -L . -lA -lB main_AB.cc -o main_AB.exe
./main_A.exe
./main_B.exe
./main_AB.exe 
```

输出是

```
main_A->call_A->call_C [v1]
main_B->call_B->call_C [v2]
main_AB->call_A->call_C [v1]
main_AB->call_B->call_C [v2] 
```

它可以工作（在 MacOS 上）！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-06-15T06:56:59.997

**如果我们打开带有标志RTLD_LAZY |**的共享库，@SergA 的解决方案也适用于 Linux 。**RTLD_LOCAL**
输出为：
1\. **Main_AB_dlopen -> CallA -> callC(v1)**
2\. **Main_AB_dlopen -> callB -> callC(v2)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-06T10:50:05.827

我有一个解决方案`dlopen(RTLD_LOCAL | RTLD_DEEPBIND)` or `dlmopen(LM_ID_NEWLM, "filename.so", ...)` （熟悉上述其他答案）

首先我们应该阅读这篇文章以了解**.dynsym**是 linux ELF 中的“导出符号表”： [https ://blogs.oracle.com/solaris/post/inside-elf-symbol-tables](https://blogs.oracle.com/solaris/post/inside-elf-symbol-tables)

每个 elf 文件都包含可执行文件和动态库，头文件中都有**.dynsym**。用声明的函数`__attribute__((visibility("default")))`将记录在这个标题区域中。
但是如果`-fvisibility=hidden`没有分配给编译器（gcc），所有函数都会`__attribute__((visibility("default")))`由编译器自动声明。（所有功能标记为导出）

### .so 加载情况如何？

所有 .so 都会在程序启动之前加载到内存中`int main()`，所有文件在 ELF 头中一一标记为 DT_NEEDED。
当前程序在系统中有一个**全局符号表**，所有的.so文件都加载并填写其在该表中持有的函数名的地址，如果两个.so文件具有相同的函数名，则只接受第一个。

**dlopen()** 加载的程序`dlopen()`与通过 ELF 头加载没有区别，**全局符号表**也是由`dlopen()`.

例如

```
// main.cpp
__attribute__((visibility("default"))) int fn() { return 10; }
void print();
int main() { print(); return 0; }

// libfn.cpp => libfn.so
__attribute__((visibility("default"))) int fn() { return 999; }
__attribute__((visibility("default"))) void print() { cout<<fn(); } 
```

将打印**10**，因为`fn()`in main.cpp 将在 libfn.so 之前加载。

如果`dlopen(libfn.so, RTLD_LOCAL)`不使用 ，仍然会打印`RTLD_DEEPBIND`数字**10 。**

如果在编译阶段使用普通链接，即使使用 lib_try_in_middle.so 之类的东西来分隔ELF-header 中的**.dynsym ，****任何**标记为的文件中的函数`__attribute__((visibility("default")))`总是出现在**全局符号表中**。

### 已知问题

address sanitizer 无法`RTLD_DEEPBIND`与`dlmopen()`.

参考：[https ://man7.org/linux/man-pages/man3/dlopen.3.html](https://man7.org/linux/man-pages/man3/dlopen.3.html)

# objective-c - 使用无符号字符。如何在不使用循环的情况下替换元素？

> ID：10351218
> 
> 赞同：0
> 
> 时间：2012-04-27T13:09:37.107
> 
> 标签：objective-c, memory, memory-management, unsigned-char

我正在开发一个应该使用很少资源并且速度非常快的应用程序。在我的应用程序中，我使用了一个`unsigned char* rawData`包含从图像中获取的字节。所以在这个`rawData`数组中我必须保持一些字节和其他设置为零。但是我不允许使用任何循环（否则我可以遍历每个字节并将它们设置为零）。

所以这里有问题。

Q1）Objective C中有没有像C中一样`ZeroMemory`的方法

Q2）是否有任何其他方法可以在不使用任何循环的情况下将必要字节设置为零。

提前致谢...

PS 如果需要可以提供一些代码...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:44:17.940

如果您不知道缓冲区的大小，那么没有循环就无法做到。即使您自己不编写循环，调用类似 strlen 的东西也会导致循环。我在这里也将递归视为一个循环。

您如何知道要保留哪些字节以及将哪些设置为零？如果这些字节位于已知位置，则可以使用向量操作将一些字节清零，而不是其他字节。以下示例仅将 的前 64 个字节中的偶数字节清零`rawData`：

```
__m128i zeros = _mm_setzero_si128();
uint8_t mask[] = {8, 0, 8, 0, 8, 0, 8, 0, 8, 0, 8, 0, 8, 0, 8, 0};
__m128i sse_mask = _mm_load_si128(mask);
_mm_maskmoveu_si128(zeros, sse_mask, &rawData[0]);
_mm_maskmoveu_si128(zeros, sse_mask, &rawData[16]);
_mm_maskmoveu_si128(zeros, sse_mask, &rawData[32]);
_mm_maskmoveu_si128(zeros, sse_mask, &rawData[48]); 
```

如果 in 每个字节的高位`mask`为 1，则 in 对应的值`zeros`将被复制到`rawData`. 您可以使用这些掩码副本的序列来快速替换某些字节而不是其他字节。生成的机器代码使用 SSE 操作，因此这实际上非常快。`rawData`这不是必需的，但如果是 16 字节对齐，SSE 操作将运行得更快。

对不起，如果你的目标是 ARM。我相信 NEON 内在函数是相似的，但并不完全相同。

# php - Flash Builder 4.6/Flex 字符串反序列化

> ID：10351224
> 
> 赞同：0
> 
> 时间：2012-04-27T13:09:52.520
> 
> 标签：php, actionscript-3, flash, serialization, builder

我有一个字符串

```
a:1:{i:0;a:2:{s:4:"name";s:19:"http://www.test.com";s:5:"value";d:2.20;}} 
```

我需要使用 AS3 或 Flash Builder 4.6/Flex 将其反序列化为数组

我怎么能做这份工作？

我无法使用 PHP 反序列化并转换为 XML。

简而言之，我需要使用 Flash Builder执行与[PHP反序列化相同的操作。](http://php.net/manual/en/function.unserialize.php)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:26:39.773

这个[SerializerClass有一个 OpenSource](http://sourceforge.net/projects/serializerclass/files/serializerclass%20ActionScript%203/)

```
var string = 'a:1:{i:0;a:2:{s:4:"name";s:19:"http://www.test.com";s:5:"value";d:2.20;}}';
import org.sepy.io.Serializer;
var myData = Serializer.unserialize( string ); 
trace(myData[0]['name']); 
```

# facebook - 在 Facebook 应用程序中与 Facebook 广告提供商集成

> ID：10351228
> 
> 赞同：2
> 
> 时间：2012-04-27T13:10:04.617
> 
> 标签：facebook

我正在开发一个 Facebook 应用程序。在该应用程序中，我想与广告提供商提供的广告集成。此处列出了接受的广告提供商：http://developers.facebook.com/adproviders/

我的问题是如何与广告提供商提供的广告集成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:15:30.157

您必须单独与您希望使用的广告提供商建立关系。每个广告提供商都有自己在 Facebook 上展示广告的条款，以及自己的集成说明。

Open X 可能是一个不错的开始。他们没有任何交通要求。

# html - 如果我省略表单和输入 ID，是否可以在 DOM 中多次使用相同的表单？

> ID：10351231
> 
> 赞同：0
> 
> 时间：2012-04-27T13:10:13.197
> 
> 标签：html, forms

我正在使用 Jquery Mobile 并且在每个页面上都有相同的表单。当 Jquery Mobile 将页面拉入 DOM 时，大部分时间我最终会在 DOM 中至少有 2 个页面。

每个页面都有这样的表格：

```
<form name="login" class="logForm">
   <input type="text" name="user" value="" />
   <input type="password" name="password" value="" />
</form> 
```

我想知道，是否可以省略表单及其所有元素上的**ID**，以避免在 DOM 中出现重复的 ID。

**问题**
这是否可能，或者我是否需要识别每个元素以及表单本身？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T13:12:20.340

没有必要`id`在表单元素上有 s，所以是的。

疯了。

# ruby-on-rails - 无法运行新应用程序

> ID：10351233
> 
> 赞同：3
> 
> 时间：2012-04-27T13:10:20.693
> 
> 标签：ruby-on-rails, ruby, gemfile

我已经使用本指南在我的 MacOS X 中安装了 RoR [http://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/](http://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/)

这是我的版本：

```
$ ruby --version
ruby 1.8.7 (2010-01-10 patchlevel 249) [universal-darwin11.0]
$ rails --version
Rails 3.2.3
$ gem --version
1.8.23 
```

我无法运行我的应用程序，因此我使用本教程搜索并修改了 Gemfile：[http ://ruby.railstutorial.org/ruby-on-rails-tutorial-book](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)

现在这是我的 Gemfile：

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

group :development do
  gem 'sqlite3', '1.3.5'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '3.2.4'
  gem 'coffee-rails', '3.2.2'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platform => :ruby

  gem 'uglifier', '1.2.3'
end

gem 'jquery-rails', '2.0.0'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'ruby-debug19', :require => 'ruby-debug' 
```

当我使用运行应用程序时

```
rails server 
```

我懂了：

```
=> Booting WEBrick
=> Rails 3.2.3 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
Exiting
/Library/Ruby/Gems/1.8/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:245:in `load': /Users/giacomo/websrc/rubyrails-app/config/initializers/session_store.rb:3: syntax error, unexpected ':', expecting $end (SyntaxError)
...sion_store :cookie_store, key: '_rubyrails-app_session'
                              ^
    from /Library/Ruby/Gems/1.8/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:245:in `load'
    from /Library/Ruby/Gems/1.8/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /Library/Ruby/Gems/1.8/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:245:in `load'
    from /Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/engine.rb:588
    from /Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/engine.rb:587:in `each'
    from /Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/engine.rb:587
    from /Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/initializable.rb:30:in `instance_exec'
    from /Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/initializable.rb:30:in `run'
    from /Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/initializable.rb:55:in `run_initializers'
    from /Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/initializable.rb:54:in `each'
    from /Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/initializable.rb:54:in `run_initializers'
    from /Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/application.rb:136:in `initialize!'
    from /Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/railtie/configurable.rb:30:in `send'
    from /Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /Users/giacomo/websrc/rubyrails-app/config/environment.rb:5
    from /Users/giacomo/websrc/rubyrails-app/config.ru:4:in `require'
    from /Users/giacomo/websrc/rubyrails-app/config.ru:4
    from /Library/Ruby/Gems/1.8/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
    from /Library/Ruby/Gems/1.8/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
    from /Users/giacomo/websrc/rubyrails-app/config.ru:1:in `new'
    from /Users/giacomo/websrc/rubyrails-app/config.ru:1 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T13:29:09.033

通过使用 Ruby 1.9.x 而不是 1.8.7。

或者通过打开`/Users/giacomo/websrc/rubyrails-app/config/initializers/session_store.rb`和替换：

```
key: '_rubyrails-app_session' 
```

和：

```
:key => '_rubyrails-app_session' 
```

并打开`/Users/giacomo/websrc/rubyrails-app/config/initializers/wrap_parameters.rb`和更换：

```
wrap_parameters format: [:json] 
```

和：

```
wrap_parameters :format => [:json] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T13:41:12.870

发生错误是因为新的 ruby​​ 具有另一种哈希语法。您使用的教程已过时，我建议您尝试一下：[http](http://railsapps.github.com/installing-rails.html) ://railsapps.github.com/installing-rails.html 这是我能找到的最好的。而且它还在不断更新。

在您的情况下，您只需要安装新版本的 ruby​​，然后重新安装 rails。

# asp.net - 使用 wordpress 作为外部内容管理系统

> ID：10351234
> 
> 赞同：0
> 
> 时间：2012-04-27T13:10:23.810
> 
> 标签：asp.net, wordpress, api, content-management-system

我们计划创建一个 asp.net 网站（可能是 mvc），它需要一个用于新闻项目的 cms。

我们的内容经理和其他需要发布新闻的人询问他们是否可以使用 wordpress 进行内容管理。

我们的用户有不同的角色，新闻项目应该对某些角色可见，如果可能的话，甚至是特定用户。

他们想要 wordpress 的原因是经理的用户友好性，所以如果有其他具有相同用户体验的替代方案就可以了。

谁能指出我的方向？

**注意：我现在还在做研究，所以我现在没有什么能阻止我了。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T19:13:26.987

已经开发了一个 API 插件来吐出 JSON 中的信息，但我实际上并没有用它实现一个站点：

[http://wordpress.org/extend/plugins/json-api/](http://wordpress.org/extend/plugins/json-api/)

也许您可以让作者安装 wordpress 并创建您的应用程序以通过该插件绘制内容？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T05:56:29.890

我也面临同样的问题，差别不大。我们希望将 WP 用作 CMS，以便我们的网站可以利用 WP 非常容易的 SEO。因此，我们将 WP 安装在基于 ASP.net 的主网站的文件夹下。最初有问题，我无法运行它。终于设法运行它。解决方案发布在这里 - [http://www.wwwlabz.com/how-to-run-a-php-based-website-from-a-subfolder-in-asp-net-website](http://www.wwwlabz.com/how-to-run-a-php-based-website-from-a-subfolder-in-asp-net-website)。希望它会帮助某人。我们实现它的实际站点是[http://www.periproperties.com/content/](http://www.periproperties.com/content/)。

现在我想在我的网站上访问 WP 的特定部分。所以我正在探索不同的选择，如果发现了什么，我会发布

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T13:15:06.407

[DotNetNuke](http://www.dotnetnuke.com/)是最流行的基于 ASP.NET 的 CMS（[来源](http://w3techs.com/technologies/overview/content_management/all)）。我正在其中实施我的第一个项目，到目前为止我对它非常满意。

请注意，免费版不适合您，因为您需要可自定义的安全角色，而免费版具有有限的一组预定角色。你需要专业版。

我不知道它与 WordPress 有多相似。总体而言，WordPress 更受欢迎，但 WordPress 当然存在平台问题，因为它是基于 Apache 的，并且您想创建一个 ASP.NET 网站。

# c# - 显示默认表单

> ID：10351240
> 
> 赞同：-1
> 
> 时间：2012-04-27T13:10:47.290
> 
> 标签：c#, winforms, master

在我使用 MDI 并且它运行良好之前，我可以在 MainForm 中显示我的 ListForm。现在我不想使用 MDI，它没有用。

之前，使用 Mdi：

```
public partial class Le_MainForm : DevExpress.XtraEditors.XtraForm
    {
        public Le_MainForm()
        { 
            InitializeComponent();
            this.IsMdiContainer = true;
            this.Name = "MainUSER";

            if (Program.IsFA) barButtonItem_OrdList.Visibility = DevExpress.XtraBars.BarItemVisibility.Never;

            Liste_Ordres f_Liste = new Liste_Ordres();
            f_Liste.MdiParent = this;
            f_Liste.Show();
        }

        private void barButtonItem_ListeOrdres_ItemClick(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            Close_AllForm();
            Liste_Ordres f_Liste = new Liste_Ordres();
            f_Liste.MdiParent = this;
            f_Liste.Show();
        }

        private void barButtonItem_CreatOrdreAller_ItemClick(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            Close_AllForm();
            Program.AllerRetour = "Ordre Aller";
            Fiche_Ordre f_Fiche = new Fiche_Ordre();
            f_Fiche.MdiParent = this;
            f_Fiche.Show();
        } 
```

现在，在我消除了 Mdi 之后 `//this.IsMdiContainer = true;`

以及从 MainForm 继承的所有表单：

```
public partial class Liste_Ordres : Le_MainForm
    {
    ..... 
```

我无法在 MainFrom 中显示我的 ListeForm

```
public partial class Le_MainForm : DevExpress.XtraEditors.XtraForm
    {
        public Le_MainForm()
        { 
            InitializeComponent();
            //this.IsMdiContainer = true;
            this.Name = "MainUSER";

            if (Program.IsFA) barButtonItem_OrdList.Visibility = DevExpress.XtraBars.BarItemVisibility.Never;

            Liste_Ordres f_Liste = new Liste_Ordres();
            // f_Liste.MdiParent = this;
            f_Liste.Show();
        } 
```

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:47:18.410

如果您希望 MainForm 类似于母版页，则可以仅使用 MainForm 并将所有其他掩码设计为不作为 Forms 而是作为放置在该 MainForm 上的控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T16:32:55.967

好的，我想我想出了一种在初始化时打开继承表单的方法。首先，在我的 MainForm 中，我在任何函数之外创建了一个整数：

```
private int a = 1; 
```

然后对于我的主窗体，我创建了一个受保护的虚拟 on_Load 事件：

```
protected virtual void Le_MainForm_Load(object sender, EventArgs e)
{
    if (a == 1)
    {
        Liste_Ordres frm = new Liste_Ordres();
        frm.Show();
        a = 0;
    }
} 
```

接下来在我的继承表单中，我覆盖了 on_Load 事件：

```
protected override void Form1_Load(object sender, EventArgs e)
{

} 
```

至少在不使用 Mdi 的情况下打开了两个表单（尽管是以一种相当迂回的方式），但现在另一个问题仍然存在：当两个表单都打开时，MainForm 在继承之前打开（无论您是否尝试使用函数 BringToFront() 和 SendToBack ())。

也许当我解决这个问题时（如果我这样做了），那么我会编辑这个答案，但现在这就是结束了。希望这有效！

# c++ - 有关使用 C++\XAML for Metro 进行 Windows 8 编程的资源和信息

> ID：10351243
> 
> 赞同：0
> 
> 时间：2012-04-27T13:10:53.707
> 
> 标签：c++, windows-8, windows-runtime, winrt-xaml

是否有关于使用 C++\XAML 进行 Metro 风格的 Windows 8 编程的优质资源？我对一些好的教程或文章感兴趣。

我已经搜索过网络，但除了 MSDN 之外，我找不到任何好的资源。有一些关于 WinRT 和 Metro 下的 JavaScript 开发的文章，但是对于 C++ 开发人员来说似乎还没有这样的东西。只是几个非常简单的教程。

你知道任何有用的链接或资源可以学习吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T21:58:39.837

您应该观看构建视频、阅读博客并在 Twitter 上找到谈论 winrt 的人。您可以查看[winrtppl.com](http://winrtppl.com)、[winrtdaily.com](http://winrtdaily.com)、[silverlightshow.net](http://silverlightshow.net)、[timheuer.com](http://timheuer.com)、[windowsdevnews.com](http://windowsdevnews.com) ，但还有更多。

# iphone - 如何在 iphone 中增加 UITabBarItem 的大小？

> ID：10351246
> 
> 赞同：0
> 
> 时间：2012-04-27T13:10:56.630
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uitabbaritem

我想在我的应用程序中增加 UITabBarItem 的文本大小。它的默认颜色和大小不清晰可见。

我尝试了这段代码，但给了我错误——>***即时消息的 UITabBar 没有使用选择器“setTitleTextAttributes”声明方法。***

有谁知道该怎么做？

```
[yourTabBarItem setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:
    [UIColor whiteColor], UITextAttributeTextColor, 
    [NSValue valueWithUIOffset:UIOffsetMake(0,0)], UITextAttributeTextShadowOffset, 
    [UIFont fontWithName:@"Helvetica" size:18.0], UITextAttributeFont, nil]
    forState:UIControlStateNormal]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:14:41.027

我认为默认大小对用户来说是完全方便的。`<Tabbar>`不管你想要什么，也许你应该用`UIView`,`UIButtons`和`UITabbar`- 风格的图像制作你自己的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T04:56:47.457

`setTitleTextAttributes:forState:` is only available in iOS 5.0 or later. Please refer to [UIBarItem Class Reference](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIBarItem_Class/Reference/Reference.html#//apple_ref/occ/instm/UIBarItem/setTitleTextAttributes:forState:) (`UITabBarItem` is subclass of `UIBarItem`). For prior versions of iOS, I think you'd better create your own customized tab bar.

And you may also want to try other methods from the answers in [Changing font size of tabbaritem](https://stackoverflow.com/questions/2576592/changing-font-size-of-tabbaritem).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T08:37:26.357

为此，您应该使用 UITabbar 类创建动态标签栏。

.使用这个您可以允许自己大小的文本、图像、颜色。

# javascript - 在滚动窗口中垂直居中

> ID：10351249
> 
> 赞同：2
> 
> 时间：2012-04-27T13:11:08.480
> 
> 标签：javascript, css, centering

我正在尝试将已滚动到底部的窗口中的图像垂直居中（或放置在任意垂直位置）。

例如，用户在一个页面上阅读、点击等，现在，在多屏内容之后，位于页面底部，即将点击最后一个按钮。我希望在窗口居中弹出一个图像。

当我尝试时： [http ://www.w3.org/Style/Examples/007/center-example](http://www.w3.org/Style/Examples/007/center-example)

或： [http ://www.jakpsatweb.cz/css/css-vertical-center-solution.html](http://www.jakpsatweb.cz/css/css-vertical-center-solution.html)

图像在内容的第一个屏幕上居中，即您必须一直向上滚动页面才能看到它在窗口中居中。我希望图像以他们当前的滚动点为中心。这旨在成为 Javascript 函数的一部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T13:21:50.427

一个`fixed`职位会做到这一点（`position:fixed`在css中）。[这是一个 jsfiddle](http://jsfiddle.net/KooiInc/X5DuY/)，其中模式弹出窗口以这种方式在屏幕上居中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T13:19:42.030

使用`position:fixed;`，内容将相对于窗口居中。

# vb.net - 使用 VB.NET 分割大文件

> ID：10351250
> 
> 赞同：0
> 
> 时间：2012-04-27T13:11:10.573
> 
> 标签：vb.net, vb.net-2010

有谁知道在 VB.NET 中拆分大文件的最佳方法是什么？这些文件可能超过 10GB。我已经通过谷歌搜索找到了方法！我发现的大多数解决方案几乎都有效。但我真正想知道的是最有效的方法是什么？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T13:15:35.670

我不知道您是否偶然发现了以下主题。如果是这样，他们没有满足您的愿望还是您想要其他选择？

[如何使用 VB.NET 2003 将大文件拆分为较小的文件？](https://stackoverflow.com/questions/7696124/how-to-split-a-large-file-into-smaller-files-using-vb-net-2003)

[在 C# 中按行数将大文件拆分为较小的文件？](https://stackoverflow.com/questions/3374040/split-large-file-into-smaller-files-by-number-of-lines-in-c)

# jquery - 使用 jQuery 如何在单击缩略图时在目标 div 中打开更大的图片？

> ID：10351261
> 
> 赞同：3
> 
> 时间：2012-04-27T13:11:44.890
> 
> 标签：jquery, image, html, thumbnails

我有一个作为目标的 div：

```
<div id="rightbox"></div> 
```

我有按组组织的缩略图：

```
<img src="group1/thumb/01.png" width="160" height="97" class="imgtopleft" />
<img src="group1/thumb/02.png" width="160" height="97" class="imgtopright" />
<img src="group2/thumb/01.png" width="160" height="97" class="imgbottomleft" />
<img src="group2/thumb/02.png" width="160" height="97" class="imgbottomright" /> 
```

我有对应于每个拇指的较大图像：

```
<img src="group1/large/01.png" width="560" height="297" class="largeimage" />
<img src="group1/large/02.png" width="560" height="297" class="largeimage" />
<img src="group2/large/01.png" width="560" height="297" class="largeimage" />
<img src="group2/large/02.png" width="560" height="297" class="largeimage" /> 
```

**我想知道是否可以通过使用函数在目标 div（带有 id="rightbox"）中单击相应的缩略图时显示每个较大的图像？**

注意：我有大约 10 组带有相应较大图像的缩略图，每组都在一个特定的文件夹中。我可以将所有图像放在同一个目录中并使用不同的命名约定，例如 image01_thumb.jpg 和 image01_large.jpg，但底线是我希望能够打开目标 div 中的每个拇指。

我已经到处寻找这个问题，但还没有找到这个确切的问题的答案。

非常感谢所有建议和帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T13:15:51.380

假设元素中已经存在大图像`#rightbox`，我建议：

```
$('img').click(
    function(){
        var that = $(this);
        if (that.attr('src').indexOf('thumb')>-1){
            $('#rightbox img').hide();
            $('#rightbox img').eq(that.index()).show();
            /* or:
            var newSrc = that.attr('src').replace('thumb','large');
            $('img[src="' + newSrc + '"]').show();
            */
        }
    }); 
```

但是，如果它们存在于 DOM 中，但不存在于`#rightbox`：

```
$('img').click(
    function(){
        var that = $(this);
        if (that.attr('src').indexOf('thumb')>-1){
            $('#rightbox img').empty();
            var newSrc = that.attr('src').replace('thumb','large');
            $('img[src="' + newSrc + '"]').clone().appendTo('#rightbox');
        }
    }); 
```

如果它们不存在于 DOM 中但必须创建：

```
$('img').click(
    function(){
        var that = $(this);
        if (that.attr('src').indexOf('thumb')>-1){
            $('#rightbox img').empty();
            var newSrc = that.attr('src').replace('thumb','large'),
                newImg = $('<img />',{src : newSrc}).appendTo('#rightbox');
        }
    }); 
```

参考：

1.  jQuery：
    *   [`appendTo()`](http://api.jquery.com/appendTo/).
    *   [`attr()`](http://api.jquery.com/attr/).
    *   [`clone()`](http://api.jquery.com/clone/).
    *   [`empty()`](http://api.jquery.com/empty/).
    *   [`eq()`](http://api.jquery.com/eq/).
    *   [`index()`](http://api.jquery.com/index/).
    *   [`show()`](http://api.jquery.com/show/).
2.  '普通' JavaScript
    *   [`indexOf()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/indexOf).
    *   [`replace()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T13:21:45.313

尝试这个：

```
$("img").click(function(){
    var largesrc = $(this).attr("src").replace("thumb","large");
    $("#rightbox").html('<img src="'+largesrc+'" width="560" height="297" class="largeimage" />');
}); 
```

当一个img被点击时，这个函数将获取图片src，将文件夹thumb替换为large，然后将它作为一个带有该src的图片放在rightbox div中。这将对您页面上的所有图像执行此操作，因此您可能希望为较小的图片提供“smallimage”类或类似的类，然后将第一行更改为`$(".smallimage").click(function(){`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T13:15:01.963

这会有帮助吗？只需更改给定的宽度，它将自动更改高度。

```
$(document).ready(function() {
        $(".imgtopleft").click(function() {
            $(".imgtopleftlargerimage").css("width","1000");
        });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T13:25:38.997

我会将此作为源代码，然后劫持链接上的点击事件。

```
<a href="group1/large/01.png" class="viewLargeImage">
   <img src="group1/thumb/01.png" width="160" height="97" class="imgtopleft" />
</a> 
```

使用此 JavaScript：

```
$('.viewLargeImage').click( function(event){
    event.preventDefault();
    var bigPath = $(this).attr('href');
    $(this).replaceWith( "<img src=" + bigPath + " />" );
}); 
```

如果需要出现在右框中：

```
$('.viewLargeImage').click( function(event){
    event.preventDefault();
    var bigPath = $(this).attr('href');
    $('#rightbox').html( "<img src=" + bigPath + " />" );
}); 
```

然后google可以索引大图片，没有javascript的人可以找到它们。

# python - 哪些是连接不同类型数据的python最佳实践？

> ID：10351265
> 
> 赞同：1
> 
> 时间：2012-04-27T13:12:08.840
> 
> 标签：python, concatenation

我想生成包含字符串长度和字符串内容的字节序列。
例如，对于`'hello'`我想要获取的字符串，`b'\x05hello'`
在阅读了一些文档之后，我编写了一个函数：

```
def LenAndStrBytes(strdata):
  return bytearray([len(strdata)&0xFF])+strdata if strdata!=[] else 0 
```

**问题：**
我是 python 编程的新手，我想知道，哪些是连接不同类型数据的最佳 python 实践，`int`比如`bytearray`
我是否以最佳方式编写了我的函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:28:17.797

好吧，只是 larsmans 指出，这取决于您的使用情况。如果您可以获得带有清晰代码并满足上下文限制的结果，那么这是一个很好的做法。

不需要`&0xFF`, bytearray 检查以确保值在 0 到 255 之间。

```
>>> strdata = 'hello'
>>> bytearray([len(strdata)]) + strdata if strdata else bytearray()
bytearray(b'\x05hello') 
```

你也可以

```
import struct
bytearray(struct.pack('B%ds' % len(strdata), len(strdata), strdata)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:34:49.380

您是否尝试在将二进制数据写入文件（或通过网络发送）之前对其进行序列化？

您是否可能打算使用该[`pickle`模块](http://docs.python.org/library/pickle.html)进行数据序列化？

# android - 动画到用户位置 (Android)

> ID：10351270
> 
> 赞同：1
> 
> 时间：2012-04-27T13:12:29.657
> 
> 标签：android, maps

我正在开发一个项目，该项目具有一个功能来显示（动画到）当前用户位置和一个硬编码位置（给定纬度和经度）。到目前为止，我的硬编码位置正常工作，但我不知道如何获取用户位置。我已经尝试了位置侦听器，但我的应用程序在运行后不断崩溃。有人对此有什么建议吗？非常感激。这是代码：

```
 public class LocationsActivity extends MapActivity implements LocationListener {

MapView mapView;
MapController mc;
GeoPoint p;
LocationListener locListener;

public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.location);

    mapView = (MapView)findViewById(R.id.mapView);
    mapView.setBuiltInZoomControls(true);

    mc = mapView.getController();
    String coordinates[] = {"52.67596","-8.64910"};
    double lat = Double.parseDouble(coordinates[0]);
    double lng = Double.parseDouble(coordinates[1]);

    p = new GeoPoint((int)(lat*1E6),(int)(lng*1E6));
    OverlayItem overlayitem = new OverlayItem(p, "Limerick Institute of 
        Technology", "Moylish");

    mc.animateTo(p);
    mc.setZoom(17);

    List<Overlay> mapOverlays = mapView.getOverlays();
    Drawable drawable = this.getResources().getDrawable(R.drawable.pushpin);
    HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable, 
        this);
    itemizedoverlay.addOverlay(overlayitem);
    mapOverlays.add(itemizedoverlay);
    mapView.invalidate();
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

public void onLocationChanged(Location arg0) {
    // TODO Auto-generated method stub

}

public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub

}

public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub

}

public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub

}

 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T12:32:48.077

如果您使用的是 MapActivity，那么您可以使用以下代码：

```
/**
 * Set current location using MyLocationOverlay
 */
public void setCurrentLocation() {

    myLocationOverlay.runOnFirstFix(new Runnable() {
        @Override
        public void run() {

            if (null != myLocationOverlay.getMyLocation()) {

                /**
                 * Put extra sleep to avoid concurrentModicationException
                 */
                try {
                    Thread.sleep(1000);

                } catch (Exception e) {
                    // TODO: handle exception
                }
                map.getController().animateTo(
                        myLocationOverlay.getMyLocation());

                map.getOverlays().add(myLocationOverlay);

            }

        }
    });

} 
```

如果您使用的是 MapFragment，那么在活动中：

```
1\. mapFragment.getMap().setMyLocationEnabled(true); 
```

然后打电话

```
 private void moveMapToMyLocation() {

    LocationManager locMan = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

    Criteria crit = new Criteria();

    Location loc = locMan.getLastKnownLocation(locMan.getBestProvider(crit,
            false));

    CameraPosition camPos = new CameraPosition.Builder()

    .target(new LatLng(loc.getLatitude(), loc.getLongitude()))

    .zoom(12.8f)

    .build();

    CameraUpdate camUpdate = CameraUpdateFactory.newCameraPosition(camPos);

    mapFragment.getMap().moveCamera(camUpdate);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T18:31:52.647

我正在 ICS 中使用 Fragment 中的地图视图构建应用程序。在活动类中初始化 mapView 后，我将其传递给 mapFragment，这是用于显示地图的片段。

这是我的活动类中的一些代码：

```
mapView = new MapView(this, getString(R.string.mapsAPI));

myLocationOverlay = new MyLocationOverlay(this, mapView);
mapView.getOverlays().add(this.myLocationOverlay);
mapView.postInvalidate();

public void calculateLocation() {
setLocationManager();
setLocation();
setGeoPoint(location);
}

public void setGeoPoint(Location location) {
  double latitude = location.getLatitude();
  double longitude = location.getLongitude();
  geoPoint = new GeoPoint((int)( latitude * 1E6), (int)( longitude * 1E6 ));
}

public void setLocation() {
location = locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
}

public void setLocationManager() {
locationManager = ((LocationManager)getSystemService(Context.LOCATION_SERVICE));
} 
```

这是我的 mapFragment 类中的代码：

```
public class MapFragment extends Fragment
{
  MapView gMap = null;
  GeoPoint gPoint = null;
  Location location = null;

  public View onCreateView(LayoutInflater paramLayoutInflater, ViewGroup paramViewGroup, Bundle paramBundle) {
    gMap = ((NFCDemoActivity)getActivity()).getMapView();
    return this.gMap;
  }

  public void onActivityCreated(Bundle paramBundle) {
    super.onActivityCreated(paramBundle);
    ((NFCDemoActivity)getActivity()).calculateLocation();
    gPoint = ((NFCDemoActivity)getActivity()).getGeoPoint();
    gMap.setClickable(true);
    gMap.setBuiltInZoomControls(true);
    gMap.getController().setZoom(18);
    gMap.getController().setCenter(gPoint);
  }

  public void onDestroy() {
    super.onDestroy();
  }
} 
```

这将为您提供用户的当前位置。

# iphone - iphone：如何从 json 请求中获取地址？

> ID：10351272
> 
> 赞同：1
> 
> 时间：2012-04-27T13:12:30.873
> 
> 标签：iphone, objective-c, ios, json, ipad

我正在尝试获取此地址 =“8198 Snuffer School Rd, Gaithersburg, MD 20879, USA”

来自这个 json 请求，但无法成功。

```
{
  "name": "39.165110,-77.168550",
  "Status": {
    "code": 200,
    "request": "geocode"
  },
  "Placemark": [ {
    "id": "p1",
    "address": "8198 Snouffer School Rd, Gaithersburg, MD 20879, USA",
    "AddressDetails": {
   "Accuracy" : 8,
   "Country" : {
      "AdministrativeArea" : {
         "AdministrativeAreaName" : "MD",
         "Locality" : {
            "LocalityName" : "Gaithersburg",
            "PostalCode" : {
               "PostalCodeNumber" : "20879"
            },
            "Thoroughfare" : {
               "ThoroughfareName" : "Snouffer School Rd"
            }
         }
      },
      "CountryName" : "USA",
      "CountryNameCode" : "US"
   }
},
    "ExtendedData": {
      "LatLonBox": {
        "north": 39.1661825,
        "south": 39.1634846,
        "east": -77.1666884,
        "west": -77.1693864
      }
    },
    "Point": {
      "coordinates": [ -77.1685611, 39.1650977, 0 ]
    }
  } ]
} 
```

我已经从状态中提取了代码，但不明白如何提取地址。

```
NSArray* Status = [(NSDictionary*)[responseString JSONValue] objectForKey:@"Status"];

NSString *code = [Status objectForKey:@"code"];            
NSArray* Placemark  = [(NSDictionary*)[responseString JSONValue] objectForKey:@"Placemark"];    
NSString *address = [Placemark objectForKey:@"address"]; // got error at this line. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T13:17:51.397

它是一个数组而不是 JSON 对象。尝试

```
NSString *address = [[Placemark objectAtIndex:0] objectForKey:@"address"]]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T13:18:58.900

看起来地标条目返回一个数组，而不是字典（见方括号？）。

PS：请为您的变量使用小写字母 - 否则它们看起来像类:-)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T13:27:18.820

@Azhar :- 试试这个 -- id

IE

id 状态 = [(NSDictionary*)[responseString JSONValue] objectForKey:@"Status"];

id 代码 = [状态 objectForKey:@"code"];
id Placemark = [(NSDictionary*)[responseString JSONValue] objectForKey:@"Placemark"];
id address = [Placemark objectForKey:@"address"];

并找到所需的密钥。

# swt - SWT 列表单元格渲染器

> ID：10351280
> 
> 赞同：0
> 
> 时间：2012-04-27T13:13:06.300
> 
> 标签：swt

如何为 SWT 列表设置单元格渲染器？我想要一个带有文本的列表，并且每一行都必须有不同的前景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T08:52:46.690

抱歉，这不能用于列表，只能用于表。请参阅[表格示例片段：为 TableItem 中的文本绘制不同的前景色](http://git.eclipse.org/c/platform/eclipse.platform.swt.git/tree/examples/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet236.java)。

# php - php - 正则表达式获取 DIV 标签中的内容

> ID：10351281
> 
> 赞同：3
> 
> 时间：2012-04-27T13:13:09.180
> 
> 标签：php, html

您好，感谢您查看我的问题。我需要从 HTML 片段中获取一些数据。这个来源是一个受信任/结构化的来源，所以我认为在这个 HTML 中使用正则表达式是可以的。我想 php 中的 Dom 和其他高级功能是一种矫枉过正。

这是 HTML 片段的格式。

```
<div id="d-container">
  <div id="row-custom_1">
     <div class="label">Type</div>
     <div class="content">John Smith</div>
     <div class="clear"></div>
  </div>
</div> 
```

在上面，请注意前 2 个 DIV 标签设置了 ID。可能有几个 row-custom_1 之类的 div 标签，所以我需要转义它们。

我实际上在正则表达式方面很差，所以我期待你的帮助，从上面的 html 片段中获取 John Smith。

可能是这样的

```
<div * id="row-custom_1" * > * <div * class="content" * >GRAB THIS </div> 
```

但我不知道如何在正则表达式中做到这一点。John Smith 部分肯定不会包含任何 html。它来自一个受信任的来源，它剥离了所有 html 并以上述格式提供数据。

我可以理解，无论如何，正则表达式都不是处理 HTML 的好主意。非常感谢您提供的任何帮助。

30 分钟后编辑：许多很棒的人建议使用 HTML 解析器，所以我这样做了；像魅力一样工作。因此，如果有人带着类似的问题来到这里，作为愚蠢的问题作者，我建议使用 DOM 来完成这项工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T13:50:45.120

这是一个简单的基于 DOM 的代码，用于从给定的 HTML 中获取您的值：

```
$html = <<< EOF
<div id="d-container">
  <div id="row-custom_1">
     <div class="label">Type</div>
     <div class="content">John Smith</div>
     <div class="clear"></div>
  </div>
</div>
EOF;
$doc = new DOMDocument();
libxml_use_internal_errors(true);
$doc->loadHTML($html); // loads your html
$xpath = new DOMXPath($doc);
$value = $xpath->evaluate("string(//div[@id='d-container']
         /div[@id='row-custom_1']/div[@class='content']/text())"); 
echo "User Name: [$value]\n"; // prints your user name 
```

**输出：**

```
User Name: [John Smith] 
```

# clojure - Clojure：过滤器如何与逻辑交互？

> ID：10351284
> 
> 赞同：1
> 
> 时间：2012-04-27T13:13:31.820
> 
> 标签：clojure

我正在尝试学习 Clojure，所以我想一个好的开始方法是使用它完成 Euler 项目的挑战，第一个挑战是将所有低于 1000 且可被 3 或 5 整除的数字相加。

我的原始代码是：

```
(defn div3 [input-no] (zero? (mod input-no 3)))
(defn div5 [input-no] (zero? (mod input-no 5)))
(reduce + (filter (or div3 div5) (range 1 1000))) 
```

但这不起作用，结果过滤器只会返回可被 3 整除的数字列表，而不是可被 5 整除的数字列表。

我将代码更改为：

```
(defn div3or5 [input-no] (or (div3 input-no) (div5 input-no)))
(reduce + (filter div3or5 (range 1 1000))) 
```

哪个得到了正确的结果，但我不知道为什么我的原始代码不起作用。

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T13:16:26.853

您遇到的问题是`filter`需要一个谓词（一个接受输入并返回真或假的函数）作为其第一个参数。但是 while`div3`和`div5`是函数，您不能简单地将它们与`or`. 您需要构建一个新函数，该函数接受一个参数并将其提供给`div3`and`div5`和调用`or`以及两者的结果。

幸运的是，这在 Clojure 中很容易做到，试试

```
(filter #(or (div3 %) (div5 %)) (range1 1000)) 
```

`#()`是定义内联函数（也称为*lambda*）的简写，您可以使用第一个参数`%1`到第二个参数`%2`，依此类推。如果只有一个论点，那么您可以使用`%`for`%1` [查看这个问题](https://stackoverflow.com/q/7841643/346587)。

您可能还想了解这`#()`只是如下`fn`形式的语法糖：`(fn [arg1 arg2 ... & restArgs] (forms))`. `#()`有一些限制（例如它不能嵌套）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T13:21:37.077

如果您只是`(or div3 div5)`在 REPL 中进行评估，您可以看到正在发生的事情：

```
=> (or div3 div5)
#<user$div3 user$div3@73305c> 
```

也就是说，`or`正在评估函数`div3`（`filter`然后使用，给出你描述的行为）。

这样做的原因是`or`将返回它的第一个非虚假参数（即第一个不是`nil`or的参数`false`）；在这种情况下，参数是两个函数对象，一个函数对象不是`nil`or `false`。

换句话说，`or`发生在函数本身上，而不是函数的结果。正如保罗所说，您可以使用匿名函数对`or`结果而不是函数本身进行操作。

# javascript - 无法通过 JavaScript 设置 div.style.left 和 div.style.top css 属性

> ID：10351291
> 
> 赞同：10
> 
> 时间：2012-04-27T13:13:45.660
> 
> 标签：javascript, css, html, css-position

我今天遇到了一个非常混乱的问题

我有一个画布和一个 div，像这样

```
<canvas id="canvas" width="800" height="400"></canvas>
<div id="xy"></div> 
```

然后我通过css文件设置div的属性，例如position:absolute和display:none 然后，我通过JS在div中写入X/Y位置并尝试设置div的属性，以便div遵循鼠标四处走动，像这样

```
var div = document.getElementById("xy");
var x = e.pageX - this.offsetLeft - 1;
var y = e.pageY - this.offsetTop - y0 - 0.5;
div.style.display = "block";
div.style.left = e.pageX + 25;
div.style.top = e.pageY -10;
div.style.backgroundColor = "#f00"; 
```

现在有趣的是：我可以毫无问题地设置 display 和 backgroundColor，但是 left 和 top 属性不起作用。如果我在我的 HTML 文件中删除我的 DOCTYPE 声明，我可以毫无问题地修改 left 和 top 属性。没有 doctype 的工作当然是不可能的。我是在做不应该做的事情，还是遗漏了一些完全明显的事情？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-27T13:15:37.833

你忘记了“px”：

```
div.style.left = (e.pageX + 25) + 'px';
div.style.top = (e.pageY -10) + 'px'; 
```

您可能还想添加`div.style.position = "absolute";`

如果您认为有可能`e.pageX`是`e.pageY`字符串而不是数字，请`parseInt`输入：

```
div.style.left = (parseInt(e.pageX, 10) + 25) + 'px';
div.style.top = (parseInt(e.pageY, 10) - 10) + 'px'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-08T05:55:07.507

我也遇到了同样的问题，但是当我在空 div 中添加一个空格时，它开始正确定位。IE

```
div.innerHTML = &nbsp;&nbsp; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-24T16:22:33.337

另一种设置样式属性（如 DIV 对象）的方法是使用 setProperty 方法

您可以查看下面的 Javascript 代码示例

```
document.getElementById('div').style.setProperty("top","100px"); 
```

# ios - ios中的Mod运算符

> ID：10351293
> 
> 赞同：18
> 
> 时间：2012-04-27T13:14:12.587
> 
> 标签：ios, iphone, objective-c, c, modulo

一直在 ios 中寻找 mod 运算符，就像`%`在 c 中一样，但没有找到它。尝试了此[链接](https://stackoverflow.com/questions/3731167/using-mod-operator-in-ios-app)中的答案，但它给出了相同的错误。我有一个浮点变量“rotationAngle”，其角度根据用户手指的移动不断增加或减少。像这样的一些事情：

```
if (startPoint.x < pt.x) {
    if (pt.y<936/2) 
        rotationAngle += pt.x - startPoint.x;
    else
        rotationAngle += startPoint.x - pt.x;   
    }
    rotationAngle = (rotationAngle % 360);
} 
```

我只需要确保rotationAngle 不超过+/- 360 的限制。任何帮助任何身体。谢谢

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-04-27T13:19:58.133

您可以使用math.h 的`fmod`(for `double`) 和`fmodf`(for )：`float`

```
#import <math.h>

rotationAngle = fmodf(rotationAngle, 360.0f); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-27T13:20:44.310

使用该`fmod`函数进行浮点模运算，定义见此处：[http](http://www.cplusplus.com/reference/clibrary/cmath/fmod/) ://www.cplusplus.com/reference/clibrary/cmath/fmod/ 。它如何工作的示例（使用返回值）：

```
fmodf(100, 360); // 100
fmodf(300, 360); // 300
fmodf(500, 360); // 140
fmodf(1600, 360); // 160
fmodf(-100, 360); // -100
fmodf(-300, 360); // -300
fmodf(-500, 360); // -140 
```

`fmodf`将“float”作为参数，`fmod`采用“double”并`fmodl`采用“double long”，但它们都做同样的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T13:16:27.193

我先将其转换为 int

```
rotationAngle = (((int)rotationAngle) % 360); 
```

如果你想要更准确的使用

```
float t = rotationAngle-((int)rotationAngle);
rotationAngle = (((int)rotationAngle) % 360);
rotationAngle+=t; 
```

# prolog - Prolog对List中的所有对做谓词？

> ID：10351302
> 
> 赞同：1
> 
> 时间：2012-04-27T13:14:37.277
> 
> 标签：prolog

我在 Prolog 脚本中有一组可能性，并希望找到最大的集合，其中应用于所有列表对的特定谓词评估为真。

一个简化的例子是一组人，你想找到最大的一组，其中所有人都是共同的朋友。所以，给定：

```
% Four-way friend CIRCLE
link(tom, bill).
link(bill, dick).
link(dick, joe).
link(joe, tom).

% Four-way friend WEB
link(jill, sally).
link(sally, beth).
link(beth, sue).
link(sue, jill).
link(jill, beth).
link(sally, sue).

% For this example, all friendships are mutual
friend(P1, P2) :- link(P1, P2); link(P2, P1). 
```

可能的匹配应该是（为了清楚起见，按字母顺序显示每一对）：

```
% the two-person parts of both sets :
[bill, tom], [bill, dick], [dick, joe], [joe, tom],
[jill, sally], [beth, sally], [beth, sue], [jill, sue],
  [beth, jill], [sally, sue]

% any three of the web :
[beth, jill, sally], [beth, sally, sue], [beth, jill, sue]

% and the four-person web :
[beth, jill, sally, sue] 
```

我可以找到所有两人匹配：

```
% Mutual friends?
friendCircle([Person1, Person2]) :-
    friend(Person1, Person2),
    % Only keep the alphabetical-order set:
    sort([Person1, Person2], [Person1, Person2]). 
```

但后来我在试图找到更大的集合时遇到了困难：

```
friendCircle([Person1|Tail]) :-
    friendWithList(Person1, Tail),
    Tail = [Person2|Tail2],
    % Only keep if in alphabetical order:
    sort([Person1, Person2], [Person1, Person2]),
    friendWithList(Person2, Tail2).

% Check all members of the list for mutual friendship with Person:
friendWithList(Person, [Head|Tail]) :-
    friend(Person, Head), % Check first person in list
    friendWithList(Person, Tail). % Check rest of list 
```

但是当我运行它时，在枚举了两人列表之后，Prolog 只是挂起并最终耗尽了堆栈空间。我究竟做错了什么？

我正在尝试做的是浏览网络，对于一个有五个朋友的网络，它会检查这些对中的每一对的朋友状态：

```
(1,2) (1,3), (1,4), (1,5) % Compare element 1 with the rest of the list
      (2,3), (2,4), (2,5) % Remove element 1 and repeat
             (3,4), (3,5)
                    (4,5) 
```

这就是我认为我在规则中的两个`friendsWithList/2`电话正在做的事情。`friendCircle/1`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:25:56.063

我相信你正在进入一个循环。在建立朋友圈时，您应该检查您是否已经“访问”过朋友。

我对此的看法：

```
friendCircle(Friends):-
  findall(SFriendCircle,
    (
      friend(Person1, Person2),
      friendCircle([Person1, Person2], FriendCircle),
      sort(FriendCircle, SFriendCircle)
     ),
    LFriends),
  sort(LFriends, SFriends),
  member(Friends, SFriends).

friendCircle([From|Tail], Friends):-
  friend(From, To),
  \+ member(To, Tail),
  forall(member(Friend, Tail), friend(To, Friend)),
  friendCircle([To,From|Tail], Friends).
friendCircle(Friends, Friends). 
```

测试：

```
?- friendCircle(Friends).
Friends = [ben, tom] ;
Friends = [dick, joe] ;
Friends = [dick, joe, tom] ;
Friends = [dick, tom] ;
Friends = [joe, tom]. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T18:55:41.160

这是我最终使用的清理版本（带有注释以增加清晰度），它消除了`bagof`,`sort`和`findall`调用（并且`forall`，如果您的序言没有）：

```
% Four-way friend CIRCLE
link(tom, bill).
link(bill, dick).
link(dick, joe).
link(joe, tom).

% Four-way friend WEB
link(jill, sally).
link(sally, beth).
link(beth, sue).
link(sue, jill).
link(jill, beth).
link(sally, sue).

% Assume if one is friends with the other, it's reflexive
friend(Person1, Person2) :- (link(Person1, Person2); link(Person2, Person1)).

% Replace a forall/2 call
friendWithList(_, []).
friendWithList(Person, [Friend|Tail]) :-
    friend(Person, Friend),
    friendWithList(Person, Tail).

% Build a friend web
friendCircle(Friends):-
    friend(Person1, Person2), % Start with two random friends...
    Person1 @=< Person2, % ...who are in alphabetical order.
    validCircle([Person1, Person2], Friends). % Build a web with them.

% Given a valid web in the first parameter,
% find a valid web and put it in the second parameter.

% Because the input is a valid web, the simplest output is itself:
validCircle(Friends, Friends).

% The other option is to try and grow the web:
validCircle([Person|Tail], Output):-
    friend(Person, NewGuy), % Grab a friend of the first person in the list... 
    NewGuy @=< Person, % ...who alphabetically comes before that person...
    \+ member(NewGuy, Tail), % ...and we don't have in the list already.

    % Check that the new guy is friends with everyone already on the list
    % If you have the forall/2 predicate,
    % you can swap the comment on the next two lines
    friendWithList(NewGuy, Tail), 
    %forall(member(ExistingFriend, Tail), friend(NewGuy, ExistingFriend)),

    % Build a valid circle with the new inputs,
    % and put that in the output slot.
    validCircle([NewGuy,Person|Tail], Output). 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T20:09:36.233

这个观察

```
?- setof(Friend, friend(Person, Friend), Friends).
Person = beth,
Friends = [jill, sally, sue] ;
Person = bill,
Friends = [dick, tom] ;
.... 
```

引导我写：

```
pair(P1, A, B) :-
    append(_, [A|As], P1),
    append(_, [B|_], As).

circles(Cs) :-
    setof(C, X^P^A^B^(setof(Person, friend(Person, X), P),
              forall(pair(P, A, B), friend(A, B)),
              sort([X|P], C)
             ), Cs). 
```

有了这个结果

```
?- circles(L).
L = [[beth, jill, sally, sue]]. 
```

# iphone - UIPinchGestureRecognizer 在 xcode 4.3.2 中不起作用

> ID：10351304
> 
> 赞同：0
> 
> 时间：2012-04-27T13:14:42.673
> 
> 标签：iphone, xcode, ios-simulator, uipinchgesturerecognizer

使用 xCode 4.3.2，我在 view.m 的 initWithFrame 中有以下代码：

```
 UIPinchGestureRecognizer *recognizer = [[UIPinchGestureRecognizer alloc]
            initWithTarget: self action: @selector(pinch:)
 ];

 oldScale = recognizer.scale;
 [self pinch: recognizer];
 [self addGestureRecognizer: recognizer];

 // code to create label is also in here, works.  label displays no problem

 [self addSubview: label]; 
```

我的捏法如下：

```
- (void) pinch: (UIPinchGestureRecognizer *) recognizer
{
    NSLog(@"pinch:");
    label.bounds = CGRectMake(
    (self.bounds.size.width - width * recognizer.scale) / 2,
    (self.bounds.size.height - height * recognizer.scale) / 2,
    width * recognizer.scale,
    height * recognizer.scale
    );

    label.font = [UIFont systemFontOfSize: 20 * recognizer.scale];
    NSString *verdict;

    if (recognizer.scale > oldScale) {
        verdict = @"spread";
    } else if (recognizer.scale < oldScale) {
        verdict = @"pinch";
    } else {
        verdict = @"neither";
    }
    oldScale = recognizer.scale;

    label.text = [NSString stringWithFormat: @"%@ %g",
                 verdict, recognizer.scale
    ];
} 
```

因为我实际上在我的 initWithFrame 方法中调用了 pinch，它运行一次，但是当我在 iphone 模拟器中执行 pinch 时，它根本没有注册。xcode 4.3.2 中有一些我不知道的设置吗？这段代码在我尝试运行它的其他任何地方都有效——但这些版本的 xcode 都是 4.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:20:10.697

添加`UIGestureRecognizerDelegate`.h文件

在 .m 文件中使用以下代码查看确实加载...

```
// Gesture Reconizer Delegate Methods
-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch {
return YES;
 }

-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer {
  return  YES;
 }

 -(BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer {
   return  YES;
 }

UIPinchGestureRecognizer *pinch = [[UIPinchGestureRecognizer alloc]initWithTarget:self action:@selector(checkpinch)];
[pinch setDelegate:self];
[pinch setDelaysTouchesBegan:YES];
[self.ScrollView addGestureRecognizer:pinch];
[pinch release]; 
```

**// 手势识别器方法**

```
-(void)checkpinch {    

 NSLog(@"YES");
} 
```

**>>看这个编辑..**

如果您想在视图上检测而不是查看以下参考，则捏可以在滚动视图上检测...

[检测 UIView 上的捏合](http://www.edumobile.org/iphone/iphone-programming-tutorials/how-to-detect-pinch-in-iphone/)

希望对你有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:16:06.670

也许我过于简化了这一点，但不会更容易：1）在您的VC中，创建一个IBoutlet属性到您的视图实例2）将该IBOutlet连接到您的视图3）通过覆盖视图在VC中设置您的UIPinchGetsureRecognizer setter 方法并将目标更改为视图并将 pinch 方法保留在视图中。这样，每次加载视图时 UIPinchGetsureRecognizer 都会加载并准备好进行捏合。然后你就不需要调用 pinch 方法（这违背了目的）。知识库

# uitabbarcontroller - 旋转更多部分下的选项卡时未调用方向委托方法

> ID：10351306
> 
> 赞同：1
> 
> 时间：2012-04-27T13:14:52.923
> 
> 标签：uitabbarcontroller, orientation

在我的项目中，不在更多部分下的选项卡正确响应方向，但更多部分下的选项卡没有响应。例如，如果我在更多部分下有两个选项卡名称 tab1 和 tab2，并且如果我在每个选项卡的“shouldAutorotateToInterfaceOrientation”方法处放置断点。之后，如果我从更多部分中选择 tab1 并尝试旋转它但tab2 的“shouldAutorotateToInterfaceOrientation”被调用。我选择的选项卡的 delagate 方法没有被调用。我正在使用 XCode Ver 4.3.2。有人可以帮我解决这个问题吗..

在此先感谢 Prajnaranjan Das

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:02:57.213

请编写标签栏控制器的所有根视图控制器的以下代码。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:  (UIInterfaceOrientation)interfaceOrientation
{

 return yes;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T07:14:57.310

我面临着和你现在面临的一样的prblm......

我向 tababarcontroller 中的所有视图控制器类返回 YES（shouldAutorotateToInterfaceOrientation 函数），我的问题解决了。

尝试这样做......也许你也会成功

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T10:50:42.630

我使用这种方法进行定位。它工作正常。

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration{
} 
```

还有其他几种方法可以帮助您确定方向，例如：

• willRotateToInterfaceOrientation

• didRotateFromInterfaceOrientation

• willAnimateFirstHalfOfRotationToInterfaceOrientation

• willAnimateSecondHalfOfRotationFromInterfaceOrientation

# c# - 最佳方法建议：基于 C# 的 Windows 服务实现

> ID：10351307
> 
> 赞同：1
> 
> 时间：2012-04-27T13:14:55.527
> 
> 标签：c#, .net, msmq

我要求提供实施建议

操作系统：Windows server 2008 平台：ASP.NET，C# DB：MS SQL 2005

场景是：

1.  我们必须实现一个监控守护进程，它将以频繁的时间间隔（比如 10 秒）监控 MS SQL 中的一组数据库表并识别所有关键条目。

2.  分析后的条目将根据其重要性或类别与一些操作相关联。所以假设一个关键条目将被表示为`ACCT_USR_LIMIT_EXECEED : SomeName`。

3.So`ACCT_USR_LIMIT_EXECEED : SomeName`应与一个动作相关联，该动作应是电子邮件发送或数据库表更新查询执行或文件夹大小测量或删除文件夹或清理本地硬盘中的某些文件等。

到目前为止，要分析的关键条目的数量应该是适中的，但它也有增加的空间。

我们如何处理这个问题，我看到了可能性，

1.  我们是否应该编写一个 Windows 服务来监视和调度操作，或者，
2.  编写两个不同的服务，一个监视并将其分析分派给 MSMQ，另一个服务分派读取推送的同一 MSMQ 条目的操作。

拥有一个单一的 Windows 服务会对我们有帮助吗？或者什么是最好的方法。

请建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:37:37.677

我认为这完全取决于预期的发货量。如果您要每秒进行 2000 次调度，那么我认为分离是一个好主意，因此一个服务不会影响另一个服务，您可能为每个服务拥有一个单独的环境（服务器）。如果预期数量是每分钟 10 次，那么我不明白为什么要让它变得复杂，一些线程和适当的业务层就可以了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T13:56:07.523

对此没有直接的答案，因为它取决于很多参数。我同意“Hyp”所说的。正如你所说，**一些 C# 解决方案将有很大帮助**- 所以，从技术上讲，如果你想实现这个 Windows 服务/MSMQ 的东西，那么你可以看看这里 -

```
http://stackoverflow.com/questions/1521841/receiving-msmq-messages-with-windows-service
http://stackoverflow.com/questions/3956467/how-to-create-a-c-sharp-listener-service-for-msmq-as-a-windows-service 
```

希望这可以帮助。

# python - 无法理解这个 python 代码

> ID：10351312
> 
> 赞同：3
> 
> 时间：2012-04-27T13:15:00.890
> 
> 标签：python

我正在阅读有关 python 函数的信息并看到了这段代码：

```
def happyBirthday(person):
    print("Happy Birthday to you!")
    print("Happy Birthday to you!")
    print("Happy Birthday, dear " + person + ".")
    print("Happy Birthday to you!")

happyBirthday('Emily')
happyBirthday('Andre') 
```

我不明白为什么这些括号被用于打印命令，所以我删除了它们。

```
def happyBirthday(person):
    print "Happy Birthday to you!"
    print "Happy Birthday to you!"
    print "Happy Birthday, dear " + person + "."
    print "Happy Birthday to you!")

happyBirthday('Emily')
happyBirthday('Andre') 
```

即使删除了这些括号，我也得到了完全相同的结果，所以我不确定哪一个是正确的，或者我是否应该使用这些括号。真的有必要使用这些括号吗？

还有一件事。当我使用括号时`+person+`，结果是生日快乐，亲爱的安德烈。但是当我使用 `,person,`then 它给出的结果为 <'Happy Birthday,dear',' 'Andre','.'>

我无法理解结果中的这些差异。你能对此有所了解吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-27T13:16:15.270

> 真的有必要使用这些括号吗？

在 Python 2.x 中，`print`是一个语句，括号是可选的。

在 Python 3.x 中，`print()`是一个函数，括号是强制性的。

即使在 Python 2.x 中也使用方括号被认为是一种很好的做法，以便最终过渡到 Python 3.x。

> 我无法理解结果中的这些差异。你能对此有所了解吗？

当您在 Python 2.x 中打印多个逗号分隔的内容时，会发生以下情况：

```
In [1]: print(1,2,3)
(1, 2, 3) 
```

以上被解释为`print`语句后跟一个参数，它是一个元组。元组用括号和逗号呈现。

```
In [2]: print 1,2,3
1 2 3 
```

以上被解释为`print`后跟三个参数的语句。每个参数都单独打印出来，它们之间有空格。

就与 Python 3 的兼容性而言，这两个版本都不是很好：第一个版本的呈现方式不同，而第二个版本根本不是有效的 Python 3 代码。

考虑到这一点，我建议您坚持：

```
print("Happy Birthday, dear " + person + ".") 
```

这在 Python 2.x 和 Python 3.x 中产生完全相同的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T13:16:53.117

在 Python2 中，print 是一个语句。在 Python3 中它是一个函数

对于一些简单的情况，它与括号的工作方式相同，但一般来说，它并不像在 print 语句周围加上括号来将其移植到 Python3 那样简单

例如。

```
Python 2.7.2+ (default, Oct  4 2011, 20:06:09) 
[GCC 4.6.1] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> print "hi",
hi
>>> print("hi",)
('hi',) 
```

对比

```
Python 3.2.2 (default, Sep  5 2011, 21:17:14) 
[GCC 4.6.1] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> print "hi",
  File "<stdin>", line 1
    print "hi",
             ^
SyntaxError: invalid syntax
>>> print("hi",)
hi 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T13:20:40.010

如前所述，print 是 Python 2 中的一个语句，然后，当你执行 print('xxx') 时，整个

```
('xxx') 
```

首先被解释。单个括号被忽略，所以这只是一个打印的字符串。

当您执行 'string' + name + 'string' 时，首先将字符串连接（添加），从而生成一个字符串。然后在括号中对其进行评估，返回自身，然后打印。

相反，当您执行 print('x', 'y', 'z') 时，整个

```
('x', 'y', 'z') 
```

是一个*元组*，打印为 <'Happy Birthday,dear',' 'Andre','.'>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T15:54:32.300

尝试`str(person)`打印状态

# php - imagejpeg 损坏的输出

> ID：10351315
> 
> 赞同：2
> 
> 时间：2012-04-27T13:15:01.843
> 
> 标签：php, png, jpeg, gif

我遇到了一个关于 imagepng() 和类似问题的奇怪问题。

无论我做什么，我的浏览器（和我的桌面程序）都不喜欢输出，并且图像被认为已损坏。

到目前为止我已经尝试过

```
header('Content-Type: image/png');
imagepng(imagecreatefrompng($str_file_path));
exit; 
```

和

```
header('Content-Type: image/png');
echo file_get_contents($str_file_path, TRUE);exit; 
```

两者都提供看起来像实际图像数据的数据。两者都不应该有任何空格，因为 header() 没有抱怨并且我退出了；之后的脚本。

也没有给出会破坏输出的错误。
显然，功能在那里。那么问题似乎是什么？

我也找不到任何问题来回答这个问题。

我得到的输出：

```
�PNG

IHDR�������,����PA����tEXtSoftware�Adobe ImageReadyq�e<
[IDATx��\Mn�Vo?
�Z�L/�پYD>A�'����~�����fo�  �&gt;Aԋ^�Y�*�Z}��|�|�!��$=IZ�$Y,?��\__]�����"������>4?֦��͠��O�H����ze������ǅ�æ�:`uEJ��vj�����sSli��v�4��WF�f��������a��g
��)�@��3j�%kЦ�Օ?
ۇ
�saL��~lmujj��Q(&���#�;�6u%7u�MOt�zu��Z������b�8q9�)|}e����c����g:�ӭ��*4TGFs�,y�^`P��=@�+�m���M���z�K�X����Ӥ���D9�ySPu��uq�'��LM�3���
�8?������k�/�����I4�/5�0U�V42��?YPI´4�m�L����gEK2VkM����J�
ͼ3�]i��5�Q�US�~r�e�}�`�P�[0V�/�}�+�8����1�}�V}�1����%
+h�4���U�����ʗ?������m�J+�Ȁlf����"�.pY?�e9��L7�������cA�I��>CG�|�f��Z?�n�':'�;�]��.��;I��$r2χ��.���Ҙy�mA'W�ZT�Iѧ���ӱ]���Y~��?���za�e��A�X�p�ZXA�C0�w�
�ϑ��Յ�(w� ���&gt;�,1���
��9#0�{�AU*:}�I��sG.I���Co�^@�M=�F��ʚ@�S2�j�_c-,����V   ���z��;������9@�    9�BVJ�p���9-�@'��*����Ԛ8��|�g;�C�oX�w8�����͔���{4�*9d�ƙ�L���������a���9�����,�]��3��#W���V;�ML  GFSG~&�k���S�t�?W<���&lt;��i-��5�d:R|�x^P��Tm����M%�/������택w�Oa͎���=jk�}��i{�/;1��Z���/�G�M0d
H��@������V����n-yV��G��P6o��T�Ƿ&amp;��M��m�[9O�f+)E�;�6K|�*s;B�'�c��7I�ՕH�5��� ����]8��V�@���G�3�s�p�Tufl�19�Ԁ+��֭�SKb65MڱÛV��*�(@��ɚ$U��}В7������FW@�lʵ������F~��Z��=`�mv�� ����'�Tj�ME�f�@P�&lt;�&gt;��K<�������1�m�ƕ�AQPRT�o�4��l��0���)�+g�
��[���`�R���)��"eD��b��g��WN-`��i{U�D|(�dhS�0&8K��S���E����Q�x�Ǫ!�K��ܑ�d�O%@c͠d,�,p�(
3t�8T�����:ذ�qߵ�&amp;�y��Ҽ��2�vJ� ���{;>5�J��2`�9��"hC>�%>\�Զ�(fZ�C�]9�ܼaR3w�a"M'�)'�w���p����) ��O^
3�v�/
�VM� _��Q/u�k�э�춏�UGz�/�&gt;IV9�
    �}�@�T�%��{ƚCV�Ǒ��VZ��A�#b�t~��O�@����
�(�8.�|0�
o�C�Ĵ�y�w�xϧr�W��@���O�8+��s��#%�J@V��)V��g�XM�~����G^O]���u~�bA�+�J��y-
�^���k3]y��ok_�[�?Txv��G��ʛx�;���&gt;���1���]8he���z\  ��ď �u��#5�3�g��w~�%$�Z>2����g�Ι�����c�6r�R�\�r%��w���%a)��G@?C�Q@�Ǚ&gt;'��KH��y?�֊V����_��7�����f��Dlv����Kn�D�an�B��ȼ,�ğR��P�,�jC��[�\9��m/��Wȹ����XߣD�J�*�ӧM��~6:��",ҭ@��   ���WL������ވ�P�3,�����i���v37�s��-|,I.)���y_@�K��*��},k�枰v���o�}��w�r�b��R_����L�
��C��I��kP�-�$��?�uZ��r�3�)��lߧ�{�xv~��Ic}�y�Ax׿ᑅZC�U����>�aJ����qc$
���w����e���/���O���ǫ�c�4�\�aB?��҇��9'�X�Tf��K�{MڨG�_I���Hm������s  A��/>?Ś5��B8�Y��a�AO�\��c�Ѿ�՞�O���rܝ�Ur��g���ǚ�T4LZ4�Ga)�5u},����,_�D.���$j��L,�;i=Vm#b����<�ϥ�B���G4��Q���]cY����~�����$�#�ةVH)��7��O[cq�L��Qpwn7/    �|�)-l��hė
D6������Kpw�Gn���Q�:�s�Jwy�%��K�%HJ�KN�Rު��FqB+q${��ZPm������
@;��*>�u�˹
��<���y�G�H]�s-���%Hc%�F�N����/�|�+/���J��t�~�[���/�`��X����IEND�B`� 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:39:35.290

所有感谢@Frits[的评论](https://stackoverflow.com/questions/10351315/imagejpeg-corrupted-output#comment13335556_10351315)

基本上，我将文件保存为 UTF-8，而我应该将其保存为 UTF-8 而没有 BOM。改变它完美地解决了这个问题。

# mysql - Mysql查询优化和排序

> ID：10351318
> 
> 赞同：0
> 
> 时间：2012-04-27T13:15:14.287
> 
> 标签：mysql

我很困惑地问这个问题。如果有任何疑问，请告诉我。我不知道怎么问。

我在 MYSQL 数据库中有超过 90000 个酒店列表。如果我通常搜索特定城市的酒店，它会从 90000 个结果中得到列表。我想根据特定城市对酒店进行分类。出于这个原因，我通常使用过滤查询，但现在我注意到从 90000 列表中提取结果需要很长时间。我认为如果我搜索纽约市内的酒店会更好，它将从 90000 个列表中返回 56 家酒店，然后过滤价格、评级等将仅从 56 个列表中搜索。MYSQL有什么办法可以拉出酒店。它可能被称为我不知道的虚拟表或视图。请帮我解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:18:11.223

您可以很好地在一个查询中完成所有过滤和排序，但您需要将索引添加到您的基础。

[http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html)

90 000 行：那是一张小桌子。通常处理十倍以上并在 10 毫秒内得到结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T13:22:29.100

好吧，您可能总是使用这样的视图：

```
CREATE VIEW ny_hotels AS
SELECT price, range, etc FROM hotels WHERE city = 'NY' 
```

...然后像普通表一样查询此视图：

```
SELECT price, rating FROM ny_hotels WHERE hotel_id = @some_hotel_id 
```

`city`但是我可以建议在主表中索引列吗？

# php - PHP 重置变量

> ID：10351321
> 
> 赞同：0
> 
> 时间：2012-04-27T13:15:25.250
> 
> 标签：php

我正在尝试创建一个脚本来创建唯一代码并将它们写入文本文件。我已经设法生成代码，并将它们写入文件。

现在我的问题是我的循环一直在运行，导致在服务器超时之前将超过 92 000 个代码写入文件。

我做了一些日志记录，似乎一切正常，只是在几秒钟后，我的所有变量都被重置，一切都从头开始。发生这种情况的时间间隔不时变化。

我已经`ini_set('memory_limit', '200M'); ini_set('max_execution_time',0);`在我的脚本顶部设置了。也许我缺少一个 php 超时设置？

该脚本是控制器中的一个函数。我在这个函数的开头设置了 ini_set。这是我正在经历的循环：

```
public function generateAction() { 
    ini_set('memory_limit', '200M');
    ini_set('max_execution_time',0);

    $codeArray = array();
    $numberOfCodes = 78000;
    $codeLength = 8;

    $totaalAantal = 0;

    $file = fopen("codes.txt","a+");

    while(count($codeArray)<$numberOfCodes){
        $code = self::newCode($codeLength);
        if(!in_array($code,$codeArray))
        {
            $totaalAantal++;
            $codeArray[] = $code;
            fwrite($file,'total: '.$totaalAantal."\r\n");
        }
    }
    fclose($file);
} 
```

在文件中，这将给出如下内容：

```
total: 1
total: 2
total: ...
total: 41999
total: 42000
total: 1
total: 2
total: ...
total: 41999
total: 42000 
```

谢谢。

编辑：到目前为止，我们已经确定 generateAction() 被调用 2 或 3 次，在脚本结束之前，它应该只被调用一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:54:59.087

我已经找到了解决这个问题的方法。主机的脚本限制设置为 90 秒，因为这个脚本必须运行更长时间，我不得不通过命令行运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:39:11.000

考虑到 uniqid() 的测试，我们可以说变量没有被重置，但是方法 generateAction() 被调用了几次。

由于您的代码可能是同步的，我们可以说 generateAction() 被多次调用，因为主脚本被多次调用。

详细会发生什么？

由于您的算法的性质，循环中的每一次通过都比前一次慢。所以执行 generateAction() 的时间可能会很长。

您可能不会等待结束，而是停止该过程，甚至从新页面开始该过程。尽管如此，该过程并没有真正停止这么快，而是继续在后端运行。我在本地 WAMP/LAMP 安装中观察到了这样的行为：即使我停止页面、关闭页面、关闭导航器或重新启动 Apache，脚本实际上也没有停止。

所以你碰巧有几个脚本进程同时在`codes.txt`文件中写入。

为了避免这种情况，您可以例如在循环期间使用函数[flock()](http://www.php.net/manual/en/function.flock.php)锁定文件。

# user-interface - 如何将 XACML 应用于表示层访问控制

> ID：10351325
> 
> 赞同：1
> 
> 时间：2012-04-27T13:15:37.777
> 
> 标签：user-interface, xacml3

我想知道您是否可以向我指出有关 XACML 如何应用于前端（演示）授权的 URL 和文档。换句话说，决定启用什么、屏蔽什么、使什么可见。当涉及到演示小部件时问这个问题：按钮、菜单、网格列、网格行、文本框、标签等。从我一直在阅读的内容来看，XACML 非常适用于要授权或未授权的服务请求，并且某些义务需要先于和/或后继。我非常感谢有关 XCAML 和表示层访问控制的回应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T22:08:45.607

您还可以将 XACML 应用于表示层。它变得特定于您使用的任何层。例如，在 C# 中，您可以调用 PDP 以确定是否应启用组件，例如：

```
log.Debug("Checking with the PDP to see whether button should be enabled");
bool pdpDecision = PDPUtil.authorized(User.Identity.Name, po.Identifier, "approve");
log.Debug("The PDP said: " + pdpDecision);
log.Debug("The PO currently is approved: " + po.Approved);
approvePOBUtton.Enabled = !po.Approved && pdpDecision; 
```

我有更多的 JSP / JSF 示例。

考虑在将它们发送到 PDP 之前使用多决策配置文件来收集一系列授权请求。还可以考虑反转授权过程。与其询问典型的 XACML 是/否问题，不如询问项目列表。您可以使用 The [Axiomatics Reverse Query](http://www.axiomatics.com/axiomatics-reverse-query.html)来做到这一点）（免责声明 - 我确实为 Axiomatics 工作）

# ipad - iPad 应用程序的最小占位符字体大小

> ID：10351335
> 
> 赞同：1
> 
> 时间：2012-04-27T13:16:24.197
> 
> 标签：ipad, uitextfield, placeholder

我正在制作一个 iPad 应用程序，其中有带有占位符的文本字段。

有很多文本字段，所以我不知道用户是否能够看到占位符。

有谁知道占位符的最小字体大小是多少？我不希望用户继续缩放以查看占位符所说的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:31:34.250

占位符的默认大小本身应该没问题。至于修改大小 - 它是一个字符串，因此您不能修改 textsize 属性。

# javascript - 屏幕截图 ala Draw Something

> ID：10351341
> 
> 赞同：1
> 
> 时间：2012-04-27T13:16:53.073
> 
> 标签：javascript, python, html, video, screen-capture

我最近花了一些时间玩一个名为 Draw Something ( [Android](https://play.google.com/store/apps/details?id=com.omgpop.dstfree) , [iOS](http://itunes.apple.com/us/app/draw-something-free/id488628250?mt=8) ) 的游戏。我喜欢一个玩家可以在屏幕上绘制的方式，并且将为第二个玩家重新创建绘图。我想在我的网站上使用类似的东西，但我不确定如何。

我正在处理的项目将使用一对多连接，而不是 Draw Something 的一对一连接。本质上，用户将制作一幅画，并且应该为任何查看它的人重新创建它。

是否可以使用 HTML5、JS 和 Python 的某种组合在 Web 上执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:20:03.800

`ontouchstart`使用和`ontouchmove`轻松完成`ontouchend`。示例： http: [//ontouchstart.github.com/](http://ontouchstart.github.com/)

只需跟踪触摸事件（或鼠标，但使用`onmousedown`,`onmousemove`和`onmouseup`）的坐标并将其发送到服务器。然后服务器将数据发送到其他客户端，这些客户端根据事件的坐标绘制所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T13:26:41.490

这是一个使用 Raphaeljs [http://ianli.com/sketchpad/](http://ianli.com/sketchpad/)的库。它以 JSON 格式存储绘图，您可以在任何需要的地方重新绘制。我不确定它是否适合您想做的事情，但它可能会起作用。

# php - 为什么我不需要使用 htmlEntities？

> ID：10351343
> 
> 赞同：0
> 
> 时间：2012-04-27T13:16:55.983
> 
> 标签：php, mysql, html, zend-framework, utf-8

我正在从我的数据库中提取数据（原始）：

```
long's streetWe’d " tree < < ! cool & <body> 
```

据我了解，为了将其输出到 html 页面，我需要将其包装在 htmlEntities 中。

但是当我包装它时，它什么也没输出。var_dump 显示：

```
long's streetWe&acirc;��d &quot; tree &lt; &lt; ! cool &amp; &lt;body&gt; 
```

包装在 htmlspecialchars 输出中：

```
long's streetWe’d &quot; tree &lt; &lt; ! cool &amp; &lt;body&gt; 
```

var_dump 输出与此相同。

**但是**在不使用包装函数的情况下输出它完全按照我希望它出现的方式输出，因为它存储在数据库中。

当我输出它时，它通过表单填充方法显示（这个值在更大的数据数组中）

我不知道它为什么这样做。有谁有想法吗？

这都是在 php 中使用 zend 和 mysql db 构建的。

亲切的问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:23:54.043

大概 forms populate 方法希望您给它文本而不是 HTML，因此它在输出数据之前转换为 HTML。

这是解决问题的标准且明智的方法。数据应在最后一刻进行转义（以避免不恰当地转义）。

# c# - 在没有安全问题的情况下捕获网站缩略图

> ID：10351345
> 
> 赞同：3
> 
> 时间：2012-04-27T13:16:58.557
> 
> 标签：c#, asp.net, image-processing

我一直在寻找一种方法来导航到网站 URL 并捕获主页外观的缩略图。我找到了一个使用 Web 浏览器控件的代码项目解决方案，但人们说它不适用于生产并且存在安全风险（网页上的恶意内容等）

有没有任何“安全”的方法可以做到这一点而不必担心下载病毒等？将页面按原样捕获会很好，但也许唯一的方法是禁用 javascript 等等？我正在使用 asp.net c#。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:51:14.800

您可以在您的应用程序中使用免费的在线服务：[20 多个免费在线网站缩略图生成器](http://www.scriptplazza.com/20-free-online-website-thumbnails-generators/)

在例如*w3snapshot.com*上注册免费帐户后，您将能够请求缩略图：

```
http://images.w3snapshot.com/?url=http://www.google.com&size=L&key=1234567890&format=jpg&quality=80 
```

我认为，您可以选择一个满足您每月/每日请求限制的选项。

# ruby-on-rails - 如何处理“日期时间”值，以便将其从“2012-04-27 00:00:00”更改为“2012 年 4 月 27 日”？

> ID：10351356
> 
> 赞同：2
> 
> 时间：2012-04-27T13:17:51.257
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, datetime, date

我正在使用 Ruby on Rails v3.2.2，我想将数据显示为`<day_number> <month_name> <year_number>`. 也就是说，我有一个`datetime`数据库表列，我想更改其包含的值，例如，从`2012-04-27 00:00:00`到`27 april 2012`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T13:19:10.220

标准方法是使用 rails 本地化。

模型

```
I18n.l(datetime, :format => :short) 
```

控制器

```
I18n.l(datetime, :format => :long) 
```

看法

```
<%= l(datetime), :format => :custom %> 
```

配置/语言环境/en.yml

```
en:
  time:
    formats:
      long: "%A %B %d %Y | %I:%M %p GMT"
      short: "%d %B %Y, %H:%M GMT"
      custom: "your custom format"
  date:
    formats:
      short: "%d %B %Y"
      long: "%A %B %d %Y"
      custom: "your custom format" 
```

在您的情况下，格式应为“%d %A %Y”。

好处是，如果您想更改格式，您可以在一个地方为您正在使用的所有日期时间执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T13:24:01.407

您可以使用该方法

```
str_name.strftime("%d %A %Y") 
```

# c++ - 如果未安装驱动程序，EnumDisplayDevices 可以检测到设备吗？

> ID：10351358
> 
> 赞同：3
> 
> 时间：2012-04-27T13:17:55.200
> 
> 标签：c++, .net, windows

我需要为客户部署一个硬盘映像，该映像在第一次启动时检测到显卡类型并安装适当的驱动程序。所以这在代码方面意味着我需要在 C++ 中检测显卡的设备 ID，而不使用 GPU 特定的库，如 NvAPI 或 AMD SDK。

我知道 EnumDisplayDevices 可以检索 deviceid，所以我只需要知道 EnumDisplayDevices 是否可以这样做，或者是否必须在 EnumDisplayDevices 检测到它之前安装 GPU 驱动程序。[MSDN](http://msdn.microsoft.com/en-us/library/dd162609%28v=vs.85%29.aspx)文章中没有提到该函数实际上是如何获取此信息的。

谢谢，

账单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:15:37.227

出于我的目的，我需要知道显卡的名称和型号，事实证明 EnumDisplayDevices 在安装驱动程序之前无法检索此信息。

# c# - 当我尝试通过 assembly.CreateInstance 方法创建类型的实例时发生异常

> ID：10351359
> 
> 赞同：1
> 
> 时间：2012-04-27T13:17:57.777
> 
> 标签：c#, sharepoint, exception, reflection

当我尝试通过 assembly.CreateInstance 方法创建类型的实例时发生异常。这是我发生异常的代码

```
Assembly assembly = Assembly.LoadFrom(@"C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\14\ISAPI\Microsoft.Office.Server.UserProfiles.dll");
Type type = assembly.GetType("Microsoft.Office.Server.UserProfiles.UserProfileManager");
object ins = assembly.CreateInstance(type.FullName);

System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. --->     System.ArgumentNullException: Value cannot be null.
Parameter name: serviceContext
   at Microsoft.Office.Server.UserProfiles.ProfileManagerBase..ctor(SPServiceContext serviceContext)
   at Microsoft.Office.Server.UserProfiles.ProfileManagerBase..ctor(SPServiceContext serviceContext, Boolean ignorePrivacy)
   at Microsoft.Office.Server.UserProfiles.UserProfileManager..ctor(SPServiceContext serviceContext, Boolean IgnoreUserPrivacy, Boolean backwardCompatible)
   at Microsoft.Office.Server.UserProfiles.UserProfileManager..ctor()
   --- End of inner exception stack trace ---
   at System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck)
   at System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache)
   at System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipVisibilityChecks, Boolean skipCheckThis, Boolean fillCache)
   at System.Activator.CreateInstance(Type type, Boolean nonPublic)
   at System.RuntimeType.CreateInstanceImpl(BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture, Object[] activationAttributes)
   at System.Activator.CreateInstance(Type type, BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture, Object[] activationAttributes)
   at System.Reflection.Assembly.CreateInstance(String typeName, Boolean ignoreCase, BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture, Object[] activationAttributes)
   at System.Reflection.Assembly.CreateInstance(String typeName)
   at HomeWork.Program.Main(String[] args) in c:\users\amasud\documents\visual studio 2010\Projects\HomeWork\HomeWork\Program.cs:line 23 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:48:30.560

我不知道您为什么要以反射方式创建 Microsoft.Office.Server.UserProfiles.UserProfileManager 对象。在您的情况下，您必须将 SPServerContext 传递给构造函数。这是你如何做到的。

```
Assembly assembly = Assembly.LoadFrom(@"C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\14\ISAPI\Microsoft.Office.Server.UserProfiles.dll");
SPServiceContext serviceContext = SPServiceContext.Current;
Type type = assembly.GetType("Microsoft.Office.Server.UserProfiles.UserProfileManager");
object ins = Activator.CreateInstance(type, serviceContext); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T13:27:46.533

从外观上看，您创建的任何类型都需要构造函数中的 serviceContext 参数。你没有设置它，所以它崩溃了。

# html-parsing - 使用 htmlcleaner 解析 html

> ID：10351364
> 
> 赞同：0
> 
> 时间：2012-04-27T13:18:08.307
> 
> 标签：html-parsing, htmlcleaner

我想使用 html 清洁器解析这种类型的 html。

```
<div class="result-item yt-uix-tile yt-tile-default *sr">
    <div class="thumb-container">
      <a href="/watch?v=NZiEqhrIL_k" class="ux-thumb-wrap contains-addto result-item-thumb">
        <span class="video-thumb ux-thumb yt-thumb-default-138 ">
            <span class="yt-thumb-clip">
                <span class="yt-thumb-clip-inner">
                  <img onload="tn_load(2)" alt="Thumbnail" src="//i3.ytimg.com/vi/NZiEqhrIL_k/default.jpg" width="138" >
                  <span class="vertical-align"></span>
                </span>
            </span>
        </span>
  <span class="video-time">2:40</span> 
```

在其中我只想获得 href （ href="/watch?v=NZiEqhrIL_k" ）值。我怎样才能实现它。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T00:47:56.717

快速而肮脏，在 javascript 中，

因此，对于您返回的每一行，设置 thisLine：

```
var thisLine = "<a href=\"/watch?v=NZiEqhrIL_k\" class=\"ux-thumb-wrap contains-addto result-item-thumb\">"; 
```

然后找到你想要的位的开始和结束：

```
var startPos = thisLine.indexOf("<a href=\"/watch?");  
    thisLine = thisLine.substring(startPos+2);
var endPos = thisLine.indexOf("class=");
    thisLine = thisLine.substring(0,endPos-1); 
```

可能有 1000 种方法可以做到这一点...查看右侧的**相关**`parse html response`问题，或搜索.

# facebook - 在 Windows Phone 7 中使用 Facebook 签到功能

> ID：10351367
> 
> 赞同：0
> 
> 时间：2012-04-27T13:18:17.123
> 
> 标签：facebook, windows-phone-7, facebook-c#-sdk, checkin

任何人都可以提供任何示例以在我的 WP7 应用程序中使用 Facebook Checkin 功能。同样在使用 Facebook sdk v6.0.1 时，没有 Get() 方法，我只能看到 Getasync() .. 任何人都可以对此提出建议。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:27:58.097

Facebook C# SDK 的 WP7 版本没有同步方法。您将需要使用**XAsync**方法（如`GetAsync`、`PostAsync`或`DeleteAsync`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T11:28:52.650

使用带有 Graph API 的搜索选项，我们可以获得最近的 Facebook 签到地点

例如： [https ://graph.facebook.com/search?type=place¢er=13.08784,80.27847&distance=50000&access_token=DeviceToken](https://graph.facebook.com/search?type=place&center=13.08784,80.27847&distance=50000&access_token=DeviceToken)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T15:18:38.907

Getasync() 只是 Get() 的基于任务的版本。您应该能够使用它向平台发出 get 请求，就像使用 Get 一样。例子：

```
GetAsync("https://graph.facebook.com/me/checkins?method=post&place=110506962309835&coordinates={'latitude':'37.4163458217','longitude':'-122.15198690595'}&access_token=YOURACCESSTOKEN") 
```

您可以通过 Search API 搜索附近的 Places。请参阅此处了解文档 developers.facebook.com/docs/reference/api/#searching。例子：

```
https://graph.facebook.com/search?q=coffee&type=place&center=37.76%2C-122.427&distance=1000&access_token=AAAAAAITEghMBAO1EYjStduqRsXrouwvoXm0ZBsj9LuD4miJiguLIgE5v7fwXSK8empPcUlacI6Gf34I5a9VTjLHyCb0eYOJODvsnMQQZDZD 
```

# c# - 双向绑定组合框到枚举

> ID：10351368
> 
> 赞同：3
> 
> 时间：2012-04-27T13:18:17.160
> 
> 标签：c#, wpf, combobox, enumeration

我有一个使用 DataTemplate 链接到我的 ViewModel 的视图，如下所示

```
<DataTemplate DataType="{x:Type ViewModels:ViewModel}">
    <Views:View />
</DataTemplate> 
```

ViewModel 拥有一个`ProcessOption`类型为的属性`MyEnum?`，其中`MyEnum`是一个自定义枚举，假设有 3 个值`Single`：`Multiple`和`All`。我正在尝试将组合框绑定到此属性，因此我遵循的方法是：

ViewModel 有一个属性`List<string>`是

```
public List<string> Options
    {
        get 
        {
            return Enum.GetNames(typeof(MyEnum)).ToList();
        }
    } 
```

我`ItemsSource`将`Combobox`. 然后，除了`ProcessOption`属性之外，ViewModel 还有一个`OptionName`属性 (of `string`)，用于保存所选选项的名称。ViewModel 实现`INotifyPropertyChanged`并且两个属性在其设置器中引发`PropertyChanged`事件。我当时使用的绑定是：

```
<ComboBox ItemsSource="{Binding Options}"
    SelectedItem="{Binding OptionName}"
    SelectedValue="{Binding ProcessOption}"/> 
```

到目前为止，这工作正常。最初，组合框是空的，两个属性都是`null`，当用户选择一个选项时，它会按应有的方式传播到 ViewModel。

当我从数据库加载数据时出现问题，我想加载具有初始值的控件。在这种情况下，在 ViewModel 的构造函数中我有这个：

```
this.ProcessOption = objectFromDB.ProcessOption // this is the value restored from DB,        let's say it is MyEnum.Multiple
this.OptionName = Options.First(x => x.Equals(Enum.GetName(typeof(MyEnum), objectFromDB.ProcessOption))); 
```

问题是，虽然上面将这两个属性设置为正确的值，但它们后来从`Combobox`绑定中设置为 null，因此不保留初始值。我还尝试`if (value == null) { return; }`在属性的设置器中执行类似操作，在这种情况下，它们在视图加载后具有正确的值，但是`Combobox`仍然没有显示正确的选项，它是空的。

我还应该注意，我也尝试过设置`IsSynchronisedWithCurrentItem`，除了显示第一个元素而不是组合框为空之外，它没有任何区别。

任何人都可以帮助这个绑定吗？任何帮助将不胜感激，这让我发疯！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T13:27:31.807

```
<ComboBox ItemsSource="{Binding Options}"
    SelectedItem="{Binding OptionName}"
    SelectedValue="{Binding ProcessOption}"/> 
```

您的绑定看起来根本不应该工作-您没有设置双向绑定，我认为`SelectedItem`and`SelectedValue`是一个非此即彼的提议。

我建议您摆脱`OptionName`并绑定`SelectedItem`到`ProcessOption`(TwoWay) 并使用`IValueConverter`将转换为/从`string`.

# javascript - Ruby On Rails 3.1 中的尾随日志文件

> ID：10351370
> 
> 赞同：0
> 
> 时间：2012-04-27T13:18:24.903
> 
> 标签：javascript, jquery, ruby-on-rails, html, ruby-on-rails-3.1

我有一些脚本必须从我的 ruby​​ on rails 应用程序中执行。为确保脚本执行应有的操作，我的应用程序*必须*显示/跟踪从脚本生成的日志文件的内容。

更详细地说：我期望通过串行连接配置一些黑盒设备的脚本（某种推出机制）。所以我必须观看，例如，更新过程或连接设备的重启（以验证一切正常）。这就是我写到我的日志文件的内容。

因此我需要：

1.  执行一个进程并处理退出代码
2.  tail a/一些日志文件（可能是 Javascript 或 html5？）

我怎么能这样做？例子将非常感激！

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T17:59:24.847

＃1的答案很简单，系统调用，即

```
ret = system('ls','-l') 
```

如果命令的退出状态为零，则 ret 将为真。美元？将包含一个 Process::Status 对象，您可以从中获取退出状态

```
unless system('ls','-l','/a_bogus_dir')
  logger.debug("ls failed with #{$?.exitstatus}")
end 
```

＃2的答案可以通过多种方式完成。您可以创建一个控制器操作，该操作只需抓取文件系统中特定文件的内容，然后返回内容。

```
def get_file_contents
  File.open(params[:file_to_read],"r") { |f| @contents = f.read }
  respond_to |format|
    format.js
  end
end 
```

然后创建文件 get_file_contents.js.erb：

```
$('#display_div').html('<%= escape_javascript(@contents) %>'); 
```

然后，您必须在页面上创建某种计时器来重复调用该控制器操作，我使用 jquery.timers。在计时器循环中，您会调用

```
$.get('/get_file_contents?file_to_read=public/logfile'); 
```

这将点击控制器，获取文件内容，并执行 get_file_contents.js.erb，这将使用文件的当前内容更新 div。

您必须将路由 /get_file_contents 添加到 routes.rb。

# cakephp-2.0 - cakephp离线任务

> ID：10351376
> 
> 赞同：0
> 
> 时间：2012-04-27T13:19:03.987
> 
> 标签：cakephp-2.0

我有一个从管理面板运行非常密集的工作的站点。我想以某种方式运行它而不干扰它产生的输出。

为了更清楚。在提交表单时，我必须解压缩一个大的 zip 文件，并且对于我找到的每张图片，我都必须将其插入到我的数据库中。此过程需要 3-4 分钟以上。所以我想让作业运行并输出正在处理的作业。我不知道我是否可以通知用户（可能通过 ajax 调用），但我不介意。

可能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:41:57.073

这取决于您在处理数据时希望用户做什么。

你想让他等吗？然后使用 AJAX 调用并显示进度条（或任何您喜欢的），直到任务完成。任务完成后，通知用户（再次通过 ajax）并继续使用您存储的（任何）功能。

如果您希望在用户执行其他操作时处理文件，您可以在后台调用 (CakePHP) [ShellTask](http://book.cakephp.org/2.0/en/console-and-shells.html#shell-tasks)​​ 并让它发挥作用。如果您希望用户能够查看导入的状态，您可以创建一个导入表，该表存储有关所有导入的信息。通过使用“状态”字段，用户可以知道，例如任务仍在运行。当 shell 任务完成时，您可以更改导入的“状态”并执行任何操作。这需要在任务本身中完成，但这不是问题，因为您可以在 Shell Tasks 中使用模型 - 与[在 Shells](http://book.cakephp.org/2.0/en/console-and-shells.html#using-models-in-your-shells)中使用模型的方式相同。

希望这会有所帮助，如果您需要任何进一步的说明，请发表评论。

# ios - IOS：UIImage 发送到解除分配的实例

> ID：10351382
> 
> 赞同：1
> 
> 时间：2012-04-27T13:19:21.677
> 
> 标签：ios, xcode, crash-reports

我有这个代码：

```
imageNumber++;
UIImage *image = [[UIImage alloc]init];
            image = [UIImage imageNamed:[NSString stringWithFormat:@"l%d_s%d.png", currentSet, imageNumber]];
            [imageToColor setImage:image]; //<-- here it crash 
            [image release]; 
```

所以，几分钟后我的应用程序因这条消息而崩溃

```
[UIImage isKindOfClass:]: message sent to deallocated instance 
```

为什么？？你能帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T13:22:57.790

```
imageNumber++;
UIImage *image = [UIImage imageNamed:[NSString stringWithFormat:@"l%d_s%d.png", currentSet, imageNumber]];
[imageToColor setImage:image]; 
```

您的代码的问题是您`UIImage`在图像变量上分配了一个对象，然后在不释放它的情况下将其设置为另一个自动释放的对象。`[UIImage imageNamed:]`返回一个自动释放的`UIImage`对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T13:23:12.920

您正在分配一个新图像，然后将该指针分配给由 返回的自动释放 UIImage `UIImage imageNamed:`，导致内存泄漏，然后您尝试释放一个自动释放对象，该对象再次被释放，导致错误。

```
imageNumber++;
image = [UIImage imageNamed:[NSString stringWithFormat:@"l%d_s%d.png", currentSet, imageNumber]];
[imageToColor setImage:image]; //<-- here it crash 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T13:23:38.643

好像你都搞错了。首先你 alloc-init 对象，然后将 autorelased 对象分配给指针，使第一个对象泄漏。这是正确的代码：

```
imageNumber++;
UIImage *image [UIImage imageNamed:[NSString stringWithFormat:@"l%d_s%d.png", currentSet, imageNumber]];
[imageToColor setImage:image]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T13:25:28.507

1) 在从文件加载图像之前，您不需要分配空图像。

2）您确定字符串 [NSString stringWithFormat:@"l%d_s%d.png", currentSet, imageNumber] 指定的图像确实存在并且可用于应用程序吗？

如果找不到该图像，则 imageNamed 调用将返回 null。在调试器中单步执行并查看图像是否实际加载。

# groovy - 从 Groovy 1.7.2 升级到 1.8.x

> ID：10351383
> 
> 赞同：1
> 
> 时间：2012-04-27T13:19:28.223
> 
> 标签：groovy

我的项目需要从 groovy 1.7.2 升级到 1.8.x 稳定版本，有几个 jar 是使用 groovy 1.7.2 版本创建的，让我知道这些 jar 是否也与 1.8.x 兼容，或者我需要完全重建它，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T13:26:47.360

[正如它在此邮件列表条目中](http://groovy.329449.n5.nabble.com/Jar-compatibility-between-1-7-and-1-8-td4476000.html)所说：

> 使用 1.7 构建的 jar 将无法使用 1.8 运行时运行，因为移动了两个文件，删除了一个文件。

# c# - 创建类型的默认实例

> ID：10351385
> 
> 赞同：9
> 
> 时间：2012-04-27T13:19:33.623
> 
> 标签：c#, .net, reflection

什么是反射等价物：

```
default(object);  //null 
```

当我在运行时之前没有类型时，例如

```
public void Method(Type type)
{
   var instance = type.CreateDefault(); //no such method exists, but I expect there is a way of doing this?
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-27T13:20:13.993

对于任何引用类型，默认值为空实例。对于任何值类型，都可以通过 获取默认值`Activator.CreateInstance`。但是当你有一个名为的变量`instance`表明你想要一个*实际的实例*而不是空引用时......所以虽然你*可以*这样做：

```
public object GetDefaultValue(Type type)
{
    return type.IsValueType ? Activator.CreateInstance(type) : null;
} 
```

...目前还不清楚这有多大用处。是该类型的默认*值*，与该类型的默认*实例*不同。

# ruby-on-rails - Rails / Doorkeeper：无法验证 CSRF 令牌的真实性

> ID：10351386
> 
> 赞同：3
> 
> 时间：2012-04-27T13:19:39.793
> 
> 标签：ruby-on-rails, oauth-2.0, csrf

我正在使用带有 Doorkeeper gem 的 Rails 3.2 为第 3 方提供 OAuth 2 API。从应用程序外部使用我的 REST API 时，我不断收到此警告：

警告：无法验证 CSRF 令牌的真实性

客户端应用程序通过 OAuth2 成功验证。为什么我会收到此警告，以及如何为外部 API 正确实施此 csrf？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T13:24:20.290

从`protect_from_forgery`您的 ApplicationController 中删除（或将其删除以调用 API）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-21T08:21:41.537

仅为要打开的控制器关闭 CSRF 保护...这比`protect_from_forgery`从`ApplicationController`. 在这种情况下，我以创建操作为例……尽管您可以根据需要进行修改。

```
class MessagesController < ApplicationController
  protect_from_forgery with: :null_session, only: [:create]
  # doorkeeper_for :create
end 
```

如果您通过门卫进行身份验证，请取消注释门卫行。

关键是只开放需要开放的东西......

# javascript - JavaScript if 语句中 var 的解释

> ID：10351388
> 
> 赞同：2
> 
> 时间：2012-04-27T13:19:44.743
> 
> 标签：javascript

我被教导在顶部定义变量，无论它们在代码中的位置如何，因为这就是 JavaScript 解释事物的方式。所以，我的理解是：

```
var foo = "Bob";

if (2 + 2 === 4) {
    var car = "Blah";
} 
```

将被解释为：

```
var foo = "Bob",
    car;

if (2 + 2 === 4) {
    car = "Blah";
} 
```

我的理解正确吗？我一直试图将我的变量定义放在当前范围的顶部，但有时这些变量只需要在`if`语句内部，所以在外部定义它们似乎有点奇怪——这仍然是最佳实践吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T13:21:45.337

是的。`var`语句被提升（这就是为什么最佳实践是在函数顶部使用它们的原因——它避免了人们假设块范围而不是函数范围的混淆）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T13:21:56.807

是的。变量和函数声明被[提升](http://www.jamesallardice.com/2011/11/21/explaining-function-and-variable-hoisting-in-javascript/)到定义它们的范围的顶部。由于 JavaScript 仅具有函数范围（而不是块范围），因此示例中范围的顶部位于`if`语句之外。

请注意，由于函数表达式实际上只是变量声明，因此函数本身不会被提升（因为赋值发生在您想要的地方）。这意味着它仅在分配后可用...

```
sayHello(); //Uh-oh... TypeError, undefined is not a function!
var sayHello = function() {
    console.log("Hi!");
}; 
```

...与函数声明相反，它可以在源代码中定义之前使用：

```
sayHello(); //"Hi!"
function sayHello() {
    console.log("Hi!");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T13:22:56.483

是的，在作用域之上定义它们总是好的（并且 javascript 是函数作用域的），您可以[在此处阅读有关此的更多信息。](https://developer.mozilla.org/en/JavaScript/Reference/Scope_Cheatsheet)

# batch-file - 批处理循环，也许我错过了一些东西

> ID：10351391
> 
> 赞同：0
> 
> 时间：2012-04-27T13:19:59.457
> 
> 标签：batch-file, for-loop, cmd, psexec

我知道我可以用 Powershell 做到这一点，但是，作为一个练习我的命令提示符脚本技能的项目，我想用一个批处理文件来做到这一点。我有一个带有 ComputerNames 的 txt 文件，我希望我的循环回显名称，然后运行 ​​SystemInfo 并从结果中获取特定行。

Computers.txt 如下所示：

```
 XPCOMPUTER1
 XPCOMPUTER2
 W7COMPUTER1
 W7COMPUTER2 
```

我的批处理文件如下所示：

```
For /F %%w IN (computer.txt) Do (echo %%w & psexec \\%%w cmd.exe & 
systeminfo | Find "Total Physical Memory:") 
```

哪个，应该列出主机名，然后 PSexec 进入它并运行 SystemInfo 并获取总物理内存，对吗？我是这么想的！但我明白了

```
%%W was unexpected at this time. 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:21:49.707

我认为您需要将`systeminfo`其作为参数传递给`cmd`您从中启动的参数`psexec`：

```
For /F %%w IN (computer.txt) Do (echo %%w & psexec \\%%w cmd.exe /c systeminfo | Find "Total Physical Memory:") 
```

否则，您刚刚执行`cmd`then `systeminfo`，`systeminfo`不会从`cmd`.

另外，除非是拼写错误，否则您`computer.txt`在脚本中写道并说它被称为`computers.txt`.

我不确定这是否能解决问题，但值得一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-04T19:17:50.757

所以事实证明，我解决这个问题的最佳方法是直接使用 psexec 调用 systeminfo。

```
For /F %%w IN (computer.txt) Do (echo %%w & psexec \\%%w systeminfo | Find "Total Physical Memory:") 
```

这让我回来了：

```
Total Physical Memory:     8,126 MB 
```

由于我现在已经学习了 PowerShell，但我会以完全不同的方式解决这个问题。

```
ForEach ($computer in (Get-Content Computer.txt) { 
  Get-CIMInstance -ComputerName $Computer -Class Win32_ComputerSystem | `    
Select Name,@{N='RAM(MB)';E={[int]($_.TotalPhysicalMemory /1mb)}} 
```

结果是：

```
Name       RAM(MB)
----       -------
AL-1NG43Q1    8126
LOCALHOST     8126
127.0.0.1     8126 
```

# sql - 组合 SQL Server 查询

> ID：10351398
> 
> 赞同：1
> 
> 时间：2012-04-27T13:20:18.177
> 
> 标签：sql, sql-server

我正在使用 SQL Server，我有两个表，我想组合成一个查询，我可以用它来填充网格视图。

**Table1 dbo.Work**
UID (PK, int)
Tech_Ticket (int)
RMA_Ticket (int)
Region (nchar10)
Completed (nchar10)
FA (nchar10)
Agent (nvarchar50)
Tracking (nvarchar50)
Date_Added (date)
Date_Updated (date)

**Table2 dbo.Orders**
UID(PK, int)
Order (int)
Agent (nvarchar50)
Ticket (int)
Notes (nvarchar50)

现在我将它们设置为两个单独的查询和两个单独的表。

**查询1：**

```
SELECT [Agent], 
  SUM(CASE WHEN [Date_Added] BETWEEN @startDate AND @endDate THEN 1 ELSE 0 END) AS 'New ', 
  SUM(CASE WHEN [Date_Updated] BETWEEN @startDate AND @endDate THEN 1 ELSE 0 END) AS 'Worked', 
  SUM(CASE WHEN [Completed] = 'yes' AND [Date_Updated] BETWEEN @startDate AND @endDate THEN 1 ELSE 0 END) AS 'Completed', 
  SUM(CASE WHEN [Failure_Analysis] = 'yes' AND [Date_Updated] BETWEEN @startDate AND @endDate THEN 1 ELSE 0 END) AS 'FA' 
  FROM Work 
  GROUP BY [Agent] 
```

**查询2：**

```
SELECT [Agent] 
  SUM(CASE WHEN [Date] BETWEEN @startDate AND @endDate THEN 1 ELSE 0 END) AS 'Orders'
  FROM Orders 
  GROUP BY [Agent] 
```

有没有办法将这两个查询合并为一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:28:36.533

你可以`JOIN`。假设`Work`是主表，应该是这样的：

```
SELECT A.*, B.Orders
FROM (  SELECT  [Agent],
                SUM(CASE WHEN [Date_Added] BETWEEN @startDate AND @endDate THEN 1 ELSE 0 END) AS 'New',
                SUM(CASE WHEN [Date_Updated] BETWEEN @startDate AND @endDate THEN 1 ELSE 0 END) AS 'Worked',
                SUM(CASE WHEN [Completed] = 'yes' AND [Date_Updated] BETWEEN @startDate AND @endDate THEN 1 ELSE 0 END) AS 'Completed',
                SUM(CASE WHEN [Failure_Analysis] = 'yes' AND [Date_Updated] BETWEEN @startDate AND @endDate THEN 1 ELSE 0 END) AS 'FA'
        FROM Work 
        GROUP BY [Agent]) A
LEFT JOIN (SELECT   [Agent]
                    SUM(CASE WHEN [Date] BETWEEN @startDate AND @endDate THEN 1 ELSE 0 END) AS 'Orders' 
            FROM Orders 
            GROUP BY [Agent]) B
ON A.[Agent] = B.[Agent] 
```

# eclipse - 在支持 maven 和 spring 3+ 的 Eclipse/STS 中创建 Web 项目的最佳实践

> ID：10351405
> 
> 赞同：1
> 
> 时间：2012-04-27T13:20:42.110
> 
> 标签：eclipse, spring-mvc, maven-3

我最近完成了 SpringCore 培训，但从未得到这个答案。我想知道在支持 Maven 和 Spring 3+ 的 STS/Eclipse 中创建动态 Web 项目的最佳方法

是使用向导并创建一个动态 Web 项目然后添加 Maven 支持和 Spring Behavior 吗？是使用向导并创建一个 Maven 项目并使用原型 webapp 然后添加 Spring 支持吗？是使用向导并创建一个 Spring 项目添加 Java EE 项目方面和 Maven 支持吗？这是完全不同的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T07:12:48.717

我选择创建第一个动态 web 项目，然后添加 spring 行为，最后构建我正在使用的项目 maven .. 这确实是一个强大的工具。

# search - 用 FTP 修复/替换 DNN 搜索引擎

> ID：10351408
> 
> 赞同：0
> 
> 时间：2012-04-27T13:20:50.697
> 
> 标签：search, content-management-system, dotnetnuke, google-custom-search

我在 DNN 网站上工作，我有一个具有管理员权限的用户帐户，但无权访问主机帐户。我确实有 FTP 访问权限，并且一直在浏览文件结构，并且看到了一些涉及搜索的文件。

搜索在网站上不起作用，所以我希望我可以通过 FTP 替换运行搜索的后端代码。

需要替换哪些文件以确保它们没有损坏/错误。

我意识到这样做可能无法解决问题，因此对于故障排除或可能的解决方案的任何其他建议表示赞赏。

*编辑（对于那些询问如何以何种方式搜索不起作用的人）：*

*这是我搜索“绵羊”时发生的情况的图像（该网站都是关于绵羊的）。公司告诉原始网站，搜索在我们的“关键字”页面上运行。我已经确保页面包含关键字，但它们仍然没有出现在搜索中。*

![在此处输入图像描述](../Images/943075c8cb676392fdfd28b7d8eff2b0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T16:01:02.423

我最终用于解决此问题的解决方案是因为如果没有超级用户帐户访问权限，我找不到其他解决方案。是使用多页选项来实现 Google 的自定义搜索引擎。

[http://www.google.com/cse/](http://www.google.com/cse/)

在我的情况下，原始搜索引擎通过值为 q 的 GET 命令工作。这与 Google 的 CSE 多页选项相同。因此，我能够简单地从模块中删除旧的搜索结果 html，并将其替换为 Google 提供的 html 片段。

# visual-studio-2010 - Visual Studio Express 是否比 Visual Studio Pro 占用更少的资源？

> ID：10351413
> 
> 赞同：-1
> 
> 时间：2012-04-27T13:21:15.407
> 
> 标签：visual-studio-2010, visual-studio-express

我在工作中有 VS 2010，但在家里我想只安装 express 版本，因为它可能不那么占用资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:24:22.683

是的，它占用的资源要少*得多。*

它还具有许多更少的功能。

我建议阅读[Visual Studio 2008 速成版中“缺少”什么？](https://stackoverflow.com/a/86614/1583)在做出决定之前。

# json - 使用带有 JSON 的计算列

> ID：10351416
> 
> 赞同：-1
> 
> 时间：2012-04-27T13:21:29.120
> 
> 标签：json, model-view-controller, knockout.js

我正在尝试对通过 JSON 返回的数据创建一个计算列。我无法让它工作。我要么得到一个`NAN`值，要么它说该列不存在。

javascript:

```
function commissionsViewModel() {
    var self = this;

    self.commissions = ko.observableArray();
    ko.applyBindings(self, $("#commissions").get(0));

    function LoadcommissionsFromServer() {
        $.post(
            '/commissions/data',
            function (data) {
                var results = ko.observableArray();
                ko.mapping.fromJS(data, {}, results);
                for (var i = 0; i < results().length; i++) {
                    self.commissions.push(results()[i]);
                };
            },
            'json'
        )
    }

    LoadcommissionsFromServer();

    self.ComissionAmount = ko.computed(
        function () {
            return this.CommissionableAmount * this.Rate * this.Modifier;
        });
    return self;
}

var viewModel = commissionsViewModel(); 
```

我想要完成的是在我更改修改器或费率后重新计算 CommissionAmount。

**编辑**

如果我手动映射我得到的字段`NaN`

```
function Commission(data) {
    this.Status = ko.observable(data.Status);
    this.OriginalCommissionCode = ko.observable(data.OriginalCommissionCode);
    this.NewCommissionCode = ko.observable(data.NewCommissionCode);
    this.InvoiceNumber = ko.observable(data.InvoiceNumber);
    this.CustomerID = ko.observable(data.CustomerID);
    this.CommissionableAmount = ko.observable(data.CommissionableAmount);
    this.Modifier = ko.observable(data.Modifier);
    this.Rate = ko.observable(data.Rate);
    this.SalesAmount = ko.observable(data.SalesAmount);
    this.NonSalesAmount = ko.observable(data.NonSalesAmount);
    this.CommissionAmount = ko.computed(function () {
        return this.CommissionableAmount * this.Rate * this.Modifier;
    });
}
function commissionsViewModel() {
    var self = this;

    self.commissions = ko.observableArray();
    $.post(
        '/commissions/data',
        function (allData) {
            var mappedTasks = $.map(allData, function (item) { return new Commission(item) });
            self.commissions(mappedTasks);
        },
        'json'
    );
}
ko.applyBindings(new commissionsViewModel()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:11:42.833

我假设 Rate 和 Modifier 是可观察的（你没有提供他们的声明）所以你需要使用 this.Rate() 和 this.Modififer() 符号。它们是函数，而不是属性。

# java - 无法定义 OpenCms 版本

> ID：10351419
> 
> 赞同：0
> 
> 时间：2012-04-27T13:21:37.123
> 
> 标签：java, content-management-system, web, opencms

如何查看使用的 OpenCms 版本？我只能访问网站源文件。我无法访问 Web 服务器和数据库。谢谢：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T18:40:55.660

在网站源文件中，如果您正在谈论扩展的战争文件，则有一个名为“setup”的文件夹，其下有一个名为“versions.txt”的文件。在那里，您会看到 OpenCms 版本号。

# php - Symfony 2 - 表单实体类型：如何格式化生成的下拉列表？

> ID：10351423
> 
> 赞同：1
> 
> 时间：2012-04-27T13:21:45.250
> 
> 标签：php, symfony

我有一个表格，显示了一个可供选择的类别的下拉菜单。

这些类别是使用 Gedmo 树扩展设置的，因此一个类别可以有子类别。

我在表单构建器中有一个自定义查询，它只选择属于特定组的类别。但是，我需要能够在下拉列表中显示哪些类别是父母，哪些是孩子，例如

```
Parent Category 1
  -- Child Category A
  -- Child Category B
Parent Category2
  -- Child Category C 
```

知道如何实现这一目标吗？

另外，如何从调用表单类型的控制器将变量传递给我的 query_builder？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:36:44.563

几天前，我正在寻找完成完全相同的事情！我在这里使用了 Neurofr 解决方案： [Symfony2,Doctrine Extensions Tree : Generate a "tree"-like dropdown Select list](https://stackoverflow.com/questions/9309959/symfony2-doctrine-extensions-tree-generating-a-tree-like-dropdown-select-lis)

这是工作。现在我将尝试停用所有从树中获得最后一个孩子的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T22:01:50.750

如果您不需要选择父级，则可以使用 optgroup 标签

```
<select>
    <optgroup label="Category 1">
        <option>Option 1...</option>
        <option>Option 2...</option>
        <option>Option 3...</option>
    </optgroup>
    <optgroup label="Category 2">
        <option>Option 1...</option>
        <option>Option 2...</option>
        <option>Option 3...</option>
    </optgroup>
</select> 
```

编辑：

Symfony 2 支持带有数组的 optgroup 标签*（未经测试，可能包含错误）*：

```
public function buildForm(FormBuilder $builder, array $options)
{
    $category_choices = array(
        array('Category 1' => array(
            '1' => 'Option 1...',
            '2' => 'Option 2...',
            '3' => 'Option 3...'
        )),
        array('Category 2' => array(
            '4' => 'Option 4...',
            '5' => 'Option 5...'
        ))
    );

    $builder->add('category_list', 'choice', array(
        'label' => 'Category',
        'choices' => $category_choices
    ));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T11:13:21.643

扩展 Symfony\Bridge\Doctrine\Form\ChoiceList\EntityChoiceList 并在 formBuilder 中使用它，例如：

```
$formBuilder
      ->add('parent', 'entity',
            array(
              'label' => 'Parent',
              'em' => $em,
              'class' => 'w3des\\Bundle\\SiteBundle\\Entity\\Menu',
              'choice_list' => new MenuChoiceList($em, $group, $cfg['tree']),
              'required' => false,
              'empty_value' => '----'
            )); 
```

您必须覆盖：getEntity()、getEntities()、getIdentifierValues() 以及可能的构造函数

# jquery - 使用 JQuery 从中心动画增长

> ID：10351431
> 
> 赞同：9
> 
> 时间：2012-04-27T13:22:02.923
> 
> 标签：jquery, animation

我正在寻找一个按钮的弹出 div。单击按钮时，我希望弹出窗口从按钮中心向外增长，同时滑动到屏幕中心。我认为这应该不会太难，但我在任何地方都找不到任何片段。任何帮助将不胜感激。

感谢 Jamie Dixon 的帮助，我得到了这段代码。

```
$('#grower').css({
    backgroundColor: '#FFFFFF',
    border: '10px solid #999',
    height: '0px',
    width: '0px',
    color: '#111111',
    fontWeight: 'bold',
    padding: '10px',
    display: 'none',
    position: 'absolute',
    left: $(this).position().left,
    top: $(this).position().top
}).appendTo('#overlay').fadeIn(0).animate({
    position: 'absolute',
    height: '200px',
    width: '600px',
    marginTop: '-120px',
    marginLeft: '-320px',
    display: "",
    top: ((($(parent).height() - $(this).outerHeight()) / 2) + $(parent).scrollTop() + "px"),
    left: ((($(parent).width() - $(this).outerWidth()) / 2) + $(parent).scrollLeft() + "px")
}, 1000); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-27T13:25:14.967

您可以使用带有“scale”作为参数的 show 方法的 jQuery UI。

```
 $('#growwer').show("scale",{}, 1000); 
```

[工作示例](http://jsfiddle.net/wNXLY/)

要将元素滑动到页面中心，我创建了 Tony L 的 jQuery 函数的修改版本，可在此处找到：[Using jQuery to center a DIV on the screen](https://stackoverflow.com/questions/210717/using-jquery-to-center-a-div-on-the-screen)。

[工作示例](http://jsfiddle.net/GbDw9/622/)

**更新**

这是两个动画同时运行的工作示例：

[http://jsfiddle.net/wNXLY/1/](http://jsfiddle.net/wNXLY/1/)

为了让它工作，我在`animate`传入的函数中包含了一个额外的参数：`{duration: durationLength, queue: false}`

# c# - 当我打开不支持包含回调的网页时，我该如何解决？

> ID：10351438
> 
> 赞同：0
> 
> 时间：2012-04-27T13:22:33.340
> 
> 标签：c#, gridview

当我进入页面时，我可以毫无问题地获取所有数据我的 sql 工作正常但是当我进入页面时它给出了错误（第一个下拉列表值 0）：

> “TemplateField 不支持回调，因为某些控件无法在回调中正确更新。关闭 'GridView1' 上的回调。”

```
Page Load c#3:   

if (!IsPostBack)
{
    DBConnection db=new DBConnection();
    ArrayList listdrp = new ArrayList();
    ArrayList listurl = new ArrayList();
    listdrp.Insert(0, "SharedItems");

    listdrp.Insert(1, "SyndicationItems");
    listdrp.Insert(2, "All Items");

    DropDownList1.DataSource = listdrp;

    DropDownList1.DataBind();

    GridView1.DataSource = db.getGroupRSS( groupName, DropDownList1.SelectedIndex);
    GridView1.DataBind();

}

//sql side
public DataSet getGroupRSS( string name, int drpIndex)
{
    string sql="";

    if (drpIndex == 0)
    {
        //SQL string to count the amount of rows within the OSDE_Users table
        sql = "SELECT [RSS_Title], [RSS_ID], R.Syndication, R.Category FROM RSS AS R INNER JOIN Group_URL AS F ON F.URL= R.URL Where F.Group_Name='"+name+"' ORDER BY RSS_Date desc";
        // string sql = "SELECT [RSS_Title], [RSS_ID], R.Syndication, R.Category FROM RSS AS R INNER JOIN CombinedFeeds AS C ON  C.URL = R.URL  WHERE C.Name='" + name + " ' ORDER BY RSS_Date desc";
    }
    else if (drpIndex == 1)
    {
        sql = "SELECT [RSS_Title], R.RSS_ID, R.Syndication, R.Category FROM RSS AS R INNER JOIN Group_Shared_Items AS F ON F.RSS_ID= R.RSS_ID Where F.Group_Name='" + name + "' ORDER BY RSS_Date desc";
    }
        SqlDataAdapter adapt = new SqlDataAdapter(sql, Connect());
        DataSet ds = new DataSet();
        adapt.Fill(ds);

    // result of query filled into datasource
    adapt.Dispose();

    closeConnection();

    return ds;
} 
```

客户端

}

```
 <li>  <asp:LinkButton ID="LinkButton1" runat="server" onclick="LinkButton1_Click">Logout</asp:LinkButton>  </li>
        </ul>
        <table>

        <tr>

        <td>
            <asp:DropDownList ID="DropDownList1" runat="server" 
                onselectedindexchanged="DropDownList1_SelectedIndexChanged" 
                AutoPostBack="True" Height="16px" Width="88px">
            </asp:DropDownList>

        </td>
         </tr>
        </table>

    </div>
    <div id="center-column">
        <div class="top-bar">
            <h1 align="center">My Groups&#39; Items</h1>

            </div><br />
            <br />
<div>

    <br />
    <br />
    <table width="100%">
    <tr>
    <td align='center'>

     <asp:GridView ID="GridView1" runat="server" AllowPaging="True" AllowSorting="True" 
            onselectedindexchanged="GridView1_SelectedIndexChanged" PageSize="8" 
            AutoGenerateColumns="False" onrowcommand="GridView1_RowCommand" 
            onrowcreated="GridView1_RowCreated" EnableSortingAndPagingCallbacks="True" 
            CellPadding="4" ForeColor="#333333" GridLines="None" 
            onpageindexchanging="GridView1_PageIndexChanging">

            <AlternatingRowStyle BackColor="White" />

            <Columns>
            <asp:ButtonField CommandName="AddComment" ButtonType="Image" HeaderText="Comment" 
                        ImageUrl="~/images/commentt.png" Text="Comment"  
                        ItemStyle-HorizontalAlign="Center" > 
```

```
 <asp:ButtonField CommandName="Share"  ButtonType="Image" HeaderText="Share with Friends"  
                        ImageUrl="~/images/openshare.png" ItemStyle-HorizontalAlign="Center" 
                        Text="Share" >
                    <ItemStyle HorizontalAlign="Center"></ItemStyle>
                    </asp:ButtonField>

                     <asp:ButtonField  CommandName="ShareGroups"  ButtonType="Image" HeaderText="Share with Groups"  
                        ImageUrl="~/images/Group.png" ItemStyle-HorizontalAlign="Center" 
                        Text="Share" > 
                    <ItemStyle HorizontalAlign="Center"></ItemStyle>
                    </asp:ButtonField>

                     <asp:ButtonField ButtonType="Image" HeaderText="Favorites" 
                    ImageUrl="~/images/StarEmpty.png" CommandName="Favorite" 
                    Text="Add to Favorites" ItemStyle-HorizontalAlign="Center">
                <FooterStyle Height="20px" />
                <HeaderStyle Width="3px" />
                <ItemStyle HorizontalAlign="Center"></ItemStyle>
                </asp:ButtonField>

                  <asp:ButtonField  ButtonType="Image"  CommandName="Mail" HeaderText="Send Mail" 
                        ImageUrl="~/images/email-icon.png.jpg" Text="Send Mail" 
                        ItemStyle-HorizontalAlign="Center" InsertVisible="False" >

                            <ItemStyle HorizontalAlign="Center"></ItemStyle>

                    </asp:ButtonField>

                      <asp:TemplateField HeaderText="RSS Title">
           <ItemTemplate>
               <asp:LinkButton ID="LinkButton2" runat="server" CommandName="View" Font-Size="Small" Font-Underline="False"><%#Eval("RSS_Title") %></asp:LinkButton>
           </ItemTemplate>
                            <ItemStyle HorizontalAlign="Center" />
           </asp:TemplateField>

                <asp:BoundField DataField="Syndication" HeaderText="Syndication" 
               SortExpression="Syndication" />

                <asp:BoundField DataField="Category" HeaderText="Category" 
               SortExpression="Category" />

            </Columns>

            <FooterStyle BackColor="#990000" Font-Bold="True" ForeColor="White" />
            <HeaderStyle BackColor="#990000" Font-Bold="True" ForeColor="White" />
            <PagerStyle BackColor="#FFCC66" ForeColor="#333333" HorizontalAlign="Center" />
            <RowStyle BackColor="#FFFBD6" ForeColor="#333333" />
            <SelectedRowStyle BackColor="#FFCC66" Font-Bold="True" ForeColor="Navy" />
            <SortedAscendingCellStyle BackColor="#FDF5AC" />
            <SortedAscendingHeaderStyle BackColor="#4D0000" />
            <SortedDescendingCellStyle BackColor="#FCF6C0" />
            <SortedDescendingHeaderStyle BackColor="#820000" />

    </asp:GridView>

    </td>
    </tr>
    </table>

    <br /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T13:29:39.710

你需要分页吗？如果没有设置`EnableSortingAndPagingCallbacks = false`。如果这没有帮助，您可能还需要发布您的 html 标记。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T13:33:51.993

请看这个网址 -->

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.enablesortingandpagingcallbacks(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.enablesortingandpagingcallbacks(v=vs.80).aspx)

```
All columns in the Columns collection must support callbacks for this feature to work. If the Columns collection contains a column that does not support callbacks, such as TemplateField, a NotSupportedException exception is raised. 
```

# perl - 相对绝对路径 perl

> ID：10351440
> 
> 赞同：8
> 
> 时间：2012-04-27T13:22:55.973
> 
> 标签：perl

以下目录设置：

```
/dira/dirb
/dira/dirb/myprog.pl 
```

`/dira/dirb/testa/myfilesdir`包含以下文件

```
/dira/dirb/testa/myfilesdir/file1.txt
/dira/dirb/testa/myfilesdir/file2.txt 
```

当前目录：

```
/dir/dirb

./myprog.pl  -p testa/myfilesdir 
```

循环浏览文件

```
while (my $file_to_proc = readdir(DIR)) {
...

$file_to_proc = file1.txt
$file_to_proc = file2.txt 
```

我想要的是

```
$myfile = /dira/dirb/testa/myfilesdir/file1.txt
$myfile = /dira/dirb/testa/myfilesdir/file2.txt 
```

尝试了一些不同的 perl 模块（CWD rel2abs），但它使用的是当前目录。我不能使用当前目录，因为输入可能是相对或绝对路径。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T13:30:59.167

使用模块`File::Spec`。这里有一个例子：

```
use warnings;
use strict;
use File::Spec;

for ( @ARGV ) { 
    chomp;
    if ( -f $_ ) { 
        printf qq[%s\n], File::Spec->rel2abs( $_ );
    }   
} 
```

像这样运行它：

```
perl script.pl mydir/* 
```

它将打印文件的绝对路径。

* * *

**更新**了更有效的程序。感谢**TLP**的建议。

```
use warnings;
use strict;
use File::Spec;

for ( @ARGV ) { 
    if ( -f ) {
        print File::Spec->rel2abs( $_ ), "\n";
    }   
} 
```

# android - 访问视频中的帧

> ID：10351445
> 
> 赞同：0
> 
> 时间：2012-04-27T13:23:11.613
> 
> 标签：android, video

我正在使用类`getFrameAtTime()`方法`MediaMetadataRetriever`来获取位于视频（mp4）中特定时间的帧。当视频是低分辨率（例如 480 x 270）时，这可以正常工作。但是如果我使用同一视频的高清版本（1280 x 720），那么它会强制关闭。有什么出路吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T23:48:22.493

代码没有错。我正在使用从 youtube 下载的视频。如果视频是使用 android 拍摄的，它会工作。

# python - 扩展 python / numpy 性能的最佳方法

> ID：10351450
> 
> 赞同：0
> 
> 时间：2012-04-27T13:23:42.420
> 
> 标签：python, c, numpy

由于有多种方法可以为 python 编写二进制模块，如果我希望尽可能提高某些代码段的性能，我希望那些有经验的人可以就最佳方法提出建议。

据我了解，可以使用 python/numpy C-api 编写扩展，或者包装一些已经编写好的纯 C/C++/Fortran 函数，以便从 python 代码中调用。

当然，像 Cython 这样的工具是最简单的方法，但我认为手动编写代码可以提供更好的控制并提供更好的性能。

问题，可能是一般性的，是使用哪种方法。编写 C 或 C++ 扩展？包装外部 C/C++ 函数或对 python 函数使用回调？

我在阅读了 Langtangen 的“用于计算科学的 Python 脚本”的第 10 章后写了这个问题，其中比较了 python 和 C 之间的几种接口方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T14:17:00.397

我想说这取决于你的技能/经验和你的项目。如果这是非常恰当的并且您精通 C/C++ 并且您已经编写了 python 包装器，那么请编写您自己的扩展并对其进行接口。

如果您打算在其他项目上使用 Numpy，那么请使用 Numpy C-API，它内容广泛且文档齐全，但也需要处理大量文档。至少我在处理它时遇到了很多困难，但我又一次在 C 上很烂。

如果您不确定使用 Cython，则耗时少得多，并且在大多数情况下性能非常好。（我的选择）从我的角度来看，你需要成为一个优秀的 C 编码器才能在之前的 2 个实现中比 Cython 做得更好，这将更加复杂和耗时。那么你是一个出色的 C 编码器吗？

此外，如果您正在寻找性能，可能值得您花时间研究 pycuda 或其他一些 GPGPU 的东西，当然这取决于您的硬件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T08:01:21.730

可以在[这里](http://technicaldiscovery.blogspot.com.au/2011/06/speeding-up-python-numpy-cython-and.html)找到几种不同方法的良好比较。我已经尝试了 cython，并使用 f2py 包装了我自己的 fortran 代码。我发现 f2py 对于我的目的来说是更好的方法。这部分是受我理解 fortran 的事实影响，但老实说，像 fortran 90 这样的现代方言看起来与使用 numpy 的 python 代码相当相似，并且不应该那么难学。

使用 cython，你从缓慢的纯 python 代码开始，然后你必须经历一个繁琐的过程来检测你的代码，找出所有对 python API 的调用在哪里，并在正确的位置输入相关的 cython 关键字。将其转换为更快的 C 代码。使用 fortran，您只需编写普通代码，就已经获得了完整的编译速度，而无需进行混乱的迭代过程。

此外，cython 中的某些数组操作仍然会导致对 Python API 的调用缓慢，尤其是那些涉及切片操作的操作。相反，fortran 中的数组是编译器可以理解和优化的原生类型。话虽如此，cython 的发展速度非常快，因此未来可能会发生变化。

我发现 f2py 的最大缺点是它不支持派生类型的数组（类似于 numpy 的 recarray）。有人希望[fwrap](https://github.com/kwmsmith/fwrap)可以替代 f2py 来解决这个问题，但目前它似乎处于次要地位。顺便说一句，它是基于 cython 的。

# wcf - 无法序列化 WCF Web 服务的嵌套 nHibernate 实体

> ID：10351451
> 
> 赞同：1
> 
> 时间：2012-04-27T13:23:42.970
> 
> 标签：wcf, nhibernate, spring.net

我正在尝试一起使用 nHibernate、Spring 和 WCF。我有一个`Order`对象，其中包含一个`Customer`对象。

我可以在我的服务上调用 WCF 方法`findOrder`，并且提供`Order`'`Customer`字段没有`DataMember`注释，Web 服务返回`Order`我想要的。`Customer`正如预期的那样，它不包含详细信息。

但是当我尝试包含时`Customer`，WebService 失败，并查看 WCF 跟踪日志，我可以看到这个错误：

> System.Runtime.Serialization.SerializationException：类型 'DecoratorAopProxy_95d4cb390f7a48b28eb6d7404306a23d' 与数据合同名称 'DecoratorAopProxy_95d4cb390f7a48b28eb6d7404306a23d:http://schemas.datacontract.org/2004/07/' 不是预期的。考虑使用 DataContractResolver 或将任何静态未知的类型添加到已知类型列表中 - 例如，通过使用 KnownTypeAttribute 属性或将它们添加到传递给 DataContractSerializer 的已知类型列表中

`Order`很确定这是因为客户包含额外的 nHibernate 详细信息，但我不明白为什么 WCF 很乐意发送`Customer`.

谁能帮我理解？

**订单对象**

```
[DataContract]
[KnownType(typeof(Customer))]

public class Order
{
  // Standard properties
  [DataMember]
  public virtual int Id { get; set; }

  public virtual Enums.OrderStatus Status { get; set; }        

  [DataMember]
  [StringLength(20, ErrorMessage = "Order name must not be more than 20 characters long")]
  public virtual string Name { get; set; }

  [DataMember]
  public virtual Customer Customer { get; set; }

  [DataContract]
  ...
} 
```

**客户对象**

```
public class Customer
{
    public virtual int CustomerId { get; set; }

    [DataMember]
    private string name = "";
    ...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T13:35:46.367

您应该使用数据传输对象 (DTO) 通过网络获取数据。无论如何，这是一种很好的做法，因为您不想让您的域模型泄漏到（和流出）应用程序的边界。

想想像你的领域模型的每一次变化都会导致你的数据契约发生变化，从而产生一个新的`wsdl`，从而导致客户端发生变化。此外，您告诉服务的消费者对您的应用程序的太多见解。

尽管所有这些建筑bla bla。NHibernate 使用代理来启用延迟加载，这些代理是序列化程序所期望的另一种类型。您可以为您的域禁用延迟加载以使应用程序正常工作。这是一个坏主意。

```
<class name="Customer" table="tzCustomer" lazy="false" > 
```

# c# - Protobuf-net v2 模型中的泛型

> ID：10351455
> 
> 赞同：1
> 
> 时间：2012-04-27T13:23:57.607
> 
> 标签：c#, generics, protocol-buffers, protobuf-net

这似乎有效：

```
Model.Add(typeof(ScsMessage), true).AddSubType(20, typeof(Request));
Model.Add(typeof(ScsMessage), true).AddSubType(200, typeof(Event));

Model.Add(typeof(Request), true).AddSubType(102, typeof(Message));
Model.Add(typeof(Request), true).AddSubType(103, typeof(Like));
Model.Add(typeof(Request), true).AddSubType(104, typeof(Tag));

Model.Add(typeof(Event), true).AddSubType(202, typeof(UserEvent<Message>));
Model.Add(typeof(Event), true).AddSubType(203, typeof(UserEvent<Like>));
Model.Add(typeof(Event), true).AddSubType(204, typeof(UserEvent<Tag>)); 
```

其中 UserEvent 定义为：

```
public class UserEvent<T> :Event where T:Request 
```

以下（尝试替换上面的第三段代码）似乎不起作用。它不会产生任何编译或运行时错误，但 UserEvent 的反序列化会产生奇怪的结果。

```
Model.Add(typeof(Event), true).AddSubType(201, typeof(UserEvent<Request>)); 
```

有没有办法做到这一点？每次我定义一个新类时，它都会节省样板代码。

谢谢

编辑：使用以下反射来设置。放在这里以防有人发现它有用。

```
 foreach (Type type in FindAllDerivedTypes<ScsMessage>
                      (Assembly.GetAssembly(typeof(Request))))
        {
            Model.Add(typeof(ScsMessage), true).AddSubType(counter++, type);
        }

        foreach (Type type in FindAllDerivedTypes<Request>
                       (Assembly.GetAssembly(typeof(Request))))
        {
            Model.Add(typeof(Request), true).AddSubType(counter++, type);
            Type constructed = typeof(UserEvent<>).MakeGenericType(type);
            Model.Add(typeof(Event), true).AddSubType(counter++, constructed);
        } 
```

.

```
 public static List<Type> FindAllDerivedTypes<T>(Assembly assembly)
       {
        var derivedType = typeof(T);
        return assembly
            .GetTypes()
            .Where(t =>
                t != derivedType && t.BaseType == derivedType  &&
                derivedType.IsAssignableFrom(t)
                ).ToList();

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T20:17:31.750

首先，关于您的反射示例，请**注意**- 密钥（数字）非常重要，您必须能够在将来可靠地重现此数字。我不希望您添加新的子类型并发现所有数据都失败，因为偏移量减少了一个。

无法重现问题；以下工作正常 - 请让我知道我缺少什么：

```
using ProtoBuf.Meta;
using System;
class UserEvent<T> :Event where T:Request
{
    public override string ToString()
    { // to show what we are working with
        return "UserEvent-of-" + typeof (T).Name;
    }
}

// infer the : Request here from the ^^^^
class Message : Request{}
class Like : Request { }
class Tag : Request { }

class ScsMessage {}
// infer : ScsMessage here from the 2 AddSubType
class Request : ScsMessage {}
class Event : ScsMessage { }

class Program
{

    static void Main()
    {
        var Model = TypeModel.Create();
        Model.Add(typeof(ScsMessage), true).AddSubType(20, typeof(Request));
        Model.Add(typeof(ScsMessage), true).AddSubType(200, typeof(Event));

        Model.Add(typeof(Request), true).AddSubType(102, typeof(Message));
        Model.Add(typeof(Request), true).AddSubType(103, typeof(Like));
        Model.Add(typeof(Request), true).AddSubType(104, typeof(Tag));

        Model.Add(typeof(Event), true).AddSubType(202, typeof(UserEvent<Message>));
        Model.Add(typeof(Event), true).AddSubType(203, typeof(UserEvent<Like>));
        Model.Add(typeof(Event), true).AddSubType(204, typeof(UserEvent<Tag>));

        var obj = new UserEvent<Like>();

        var clone = Model.DeepClone(obj);
        Console.WriteLine(obj);
        Console.WriteLine(clone);
    }
} 
```

# xml - 从经典asp中的soap响应中获取唯一的字符串

> ID：10351460
> 
> 赞同：1
> 
> 时间：2012-04-27T13:24:19.063
> 
> 标签：xml, web-services, asp-classic

我已经编写了用于请求 Web 服务的 xml 代码，我得到了正确的响应，例如：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <getOrderFileResponse xmlns="http://www.edocbuilder.com/">
      <getOrderFileResult>**string**</getOrderFileResult>
    </getOrderFileResponse>
  </soap:Body>
</soap:Envelope> 
```

我只想要这个响应中的字符串

你能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:17:10.130

我可以提供这个函数来轻松提取经典 ASP 中的值：

```
function findStringBetween(s_string, s_pre, s_post, n_options)
  ' n_options:
  '  1: IGNORE case in the search
  dim a, b
  ' init
  findStringBetween = ""
  ' find pre-word
  a = instr(1, s_string, s_pre, n_options)
  if a>0 then
    a = a + len(s_pre)
    b = instr(a, s_string, s_post, n_options)
    if b>0 and not (s_post = "") then
      findStringBetween = mid(s_string, a, b-a)
    else
      findStringBetween = mid(s_string, a)
    end if
  end if
end function 
```

将其包含在您的代码中，然后您可以像这样使用它：

```
dim my_value
my_value = findStringBetween(s_soap_response, "<getOrderFileResult>", "</getOrderFileResult>", 0) 
```

# gcc - 如何从 GCC 源代码构建本机编译器？

> ID：10351462
> 
> 赞同：2
> 
> 时间：2012-04-27T13:24:21.963
> 
> 标签：gcc, cross-compiling

我在便携式 ARM 设备上有一个嵌入式系统，它运行定制的 Linux。如何为该 Linux 发行版构建本机编译器？

例如，我现在使用机器 A，而在 A 上，我既有本机编译器，又有机器 B 的交叉编译器。如何构建可以直接在 B 上运行的编译器？

我搜索了一下，但只是找到了一些关于如何为B构建交叉编译器的教程，但没有找到如何通过交叉编译器构建原生编译器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-20T20:32:55.960

我不确定标记的答案是否正确。我正在研究一个项目，该项目反映了原始问题中的项目，根据 nm 发布的链接，最初的提问者正在尝试被称为以下三件事之一：*host-x-host、crossed native*或*cross-built本地人*...不是加拿大人。

不幸的是，似乎没有关于这个主题的任何教程......至少我找不到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T02:37:58.053

据我了解您的问题，您有快速的非 ARM 主机和慢速的 ARM。你想在你的快速主机上构建一个编译器；编译器将在 ARM 系统上用于将代码编译到 ARM 机器上。

这个设置几乎是经典的[加拿大十字](http://en.wikipedia.org/wiki/Cross_compiler#Canadian_Cross)：

> 给定三台机器 A、B 和 C，其中一台使用机器 A（例如在 IA-32 处理器上运行 Windows XP）构建一个在机器 B 上运行的交叉编译器（例如在 x86-64 处理器上运行 Mac OS X）以为机器 C 创建可执行文件（例如在 ARM 处理器上运行 Android）。

您拥有 B=C 并且可以使用 Canadian Cross 构建系统。

不幸的是，这种类型的交叉编译器是最难的。有一些手册可以构建这样的 Cross：[http](http://airs.com/ian/configure/configure_6.html) ://airs.com/ian/configure/configure_6.html ...或尝试谷歌“canadian cross gcc”。

还有一些脚本可以构建基于 Linux 的嵌入式系统。将尝试搜索一些并在此处添加它们：

*   [http://crosstool-ng.org/](http://crosstool-ng.org/)（工具链建设与[一些加拿大支持](http://crosstool-ng.org/#canadian_build)）

# extjs4 - 如何在不将其添加到商店的情况下为组合框下拉列表添加一些价值？

> ID：10351463
> 
> 赞同：0
> 
> 时间：2012-04-27T13:24:22.387
> 
> 标签：extjs4

我的 bbox 配置：

```
{
  xtype: 'combobox', 
  editable: false, 
  store: 'my.store', 
  displayField: 'name', 
  valueField: 'id', 
  name: 'rule', 
  fieldLabel: 'Rule', 
  allowBlank: true
} 
```

我的模型：

```
Ext.define('rule', {
  extend: 'Ext.data.Model',
  idProperty: 'id',
  fields: [
    {name: 'id', type: 'int'},
    name,
    {name: 'json', type: 'string'},
    {name: 'json2', type: 'string'}
  ]
}); 
```

我的商店：

```
Ext.define('Et.store.odinkod.Rules', {
extend: 'Ext.data.Store',
pageSize: 50,

proxy: {
    headers: {'hash': 'hashnumber1'},
    type: 'rest',
    url: 'api/rule',
    reader: {type: 'json', root: 'data'},
    writer: {type: 'json', root: 'data'}
},
/*
listeners: {
    load: function() {

        if(count == 0){

           count++;
              var instance = Ext.create('Et.model.rule', {
              id: '',
              accountHash: '',
              name: 'Always',
              json: '',
              uiJson: '',
              comment: ''
          });   
        this.add(instance);
    }

    }
    },
*/
autoLoad: true,
autoSync: true,
model: 'rule'
}); 
```

所以我想在 dpopbox 中查看额外的“名称”字段而不创建新记录

如果我在商店执行“添加”方法，我可以解决我的问题。但这对我来说很糟糕

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T05:06:21.600

您不能使用正常方式将新商品添加到商店。`sync`由于您`autoLoad: true, autoSync: true`对商店的配置，它将与数据库一起使用。

您仍然可以通过直接处理保管箱的元素来实现您的目标，即使使用保管箱的 DOM（尝试 Component.getEl().dom）。但是，这只是一种解决方法，不推荐使用，因为存储可能会在加载/同步时触发错误，并且/或者在任何操作导致存储加载后，当 Dropbox 重新呈现自身时，您将获得重复的数据。

# extjs - extjs 存储失败

> ID：10351465
> 
> 赞同：3
> 
> 时间：2012-04-27T13:24:30.173
> 
> 标签：extjs, extjs4, store, extjs4.1

ExtJS 模型字段具有映射选项。

```
fields: [
        {name: 'brandId', mapping:'brand.id',   type: 'int'},
        {name: 'brandName', mapping:'brand.name', type: 'string'}, 
```

问题是：如果来自服务器的响应不包含某些字段（在我的示例中为品牌字段）并且定义了来自内部字段的映射，则 Ext Store 会默默地加载任何记录。

有人对此有问题吗？这是某种错误吗？

**更新** 说清楚：假设我的模型中有十个字段。来自服务器的响应有九个字段，缺少一个。如果该字段没有嵌套映射（映射：'xyz'），一切正常 - 存储加载记录，该字段为空。但是，如果该字段必须从某个嵌套字段加载并且具有映射选项 - 存储无法加载任何内容。

**更新 2** 我找到了导致问题的代码。事实是：当 Ext 尝试从 Json 加载一些字段时，它会执行这样的检查

```
(source["id"] === undefined) ? __field0.defaultValue : source["id"] 
```

但是当字段有映射选项（映射'brand.id'）时，阅读器会这样做

```
(source.brand.id === undefined) ? __field20.defaultValue : source.brand.id 
```

如果源没有品牌字段，则会导致错误。

如果您遇到与我相同的问题：您可以通过重载*Ext.data.reader.Json*的方法 *createFieldAccessExpression来修复它*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T03:29:28.283

我同意 Ext 应该只无法加载该字段，而不是整个记录。一个不是很好但应该有效的选项是使用一个`mapping`函数：

```
{
    name: 'brandId',
    mapping: function(data, record) {
        return data.brand && data.brand.id;
    }
} 
```

我可能有错误的论点（我通过查看源代码发现这个功能存在），所以可能会在那里放置一个断点，看看如果它不能像这样工作有什么可用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T08:34:43.023

我认为您是误解`mapping`和`nesting`范式：这些是不可互换的。如果您在数据中定义嵌套，则结果必须具有相应的字段。

# c# - 将类属性映射到其他（相同属性）类

> ID：10351469
> 
> 赞同：1
> 
> 时间：2012-04-27T13:24:54.510
> 
> 标签：c#

我有 2 个具有完全相同命名属性的类（1 个业务类和 1 个数据类）。

此刻，我编写了一个“转换”方法，将所有属性 van 1 类映射到另一个类：

```
private class BusinessLogic convert(Datalogic dataclass)
{
    Businesslogic businessclass = new BusinessLogic();
    businessclass.ID = dataclass.ID;
    businessclass.name = dataclass.name;
    .....
    return businessclass;
} 
```

似乎必须有一个更简单的方法。我只是不知道如何搜索它。有人可以让我走上正轨。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T13:29:33.617

这是映射工具的任务，例如[AutoMapper](https://github.com/AutoMapper/AutoMapper) - 如果所有属性都命名相同，这几乎是一行，因为按照惯例，它们将映射到目标类中的相应属性。

对于您的特定示例，可能是：

```
Mapper.CreateMap<Datalogic, BusinessLogic>();
BusinessLogic businessclass = Mapper.Map<Datalogic, BusinessLogic>(dataclass); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T13:30:35.637

**AutoMapper**是一个可用的库，可以为您执行此`Object to Object`映射。

使用 AutoMapper，您的代码可以简化为类似

```
Mapper.CreateMap<Datalogic , Businesslogic >();
Product product= GetProductFromDB(2);
Businesslogic productViewItem = Mapper.Map<Datalogic , Businesslogic >(product); 
```

主页：[http ://automapper.org/](http://automapper.org/)

来源：[https ://github.com/AutoMapper/AutoMapper](https://github.com/AutoMapper/AutoMapper)

教程链接[http://www.codeproject.com/Articles/61629/AutoMapper](http://www.codeproject.com/Articles/61629/AutoMapper)

# c# - 结构编组，编组 ansi 和 unicode

> ID：10351471
> 
> 赞同：2
> 
> 时间：2012-04-27T13:24:58.547
> 
> 标签：c#, .net, string, character-encoding, marshalling

我正在尝试从 Windows HIVE 文件中读取基本块。文件的前 4 个字节包含“regf”幻数。这个字符串是 ANSI，但也有 unicode 字符串。如果我指定 MarshalAs 属性并将类型设置为 ByValTStr 它工作正常，但它不会读取 unicode 字符串。MSDN 说如果你使用 ByValTStr，那么数组的类型由包含结构的字符集决定。问题是如果我将整个结构的字符集设置为 unicode，那么我将无法读取幻数（前 4 个字节）。

```
[MarshalAs(UnmanagedType.ByValTStr, SizeConst = 5)]
public string MagicNumber; 
```

如何更改特定字符串的字符集，而不是整个结构？

我也在尝试使用 LPStr 类型，但它根本不起作用。

```
[MarshalAs(UnmanagedType.LPStr, SizeConst = 5)]
public String MagicNumber; 
```

使用这种类型的编组而不是“regf”幻数，我会得到不可读的字符。

如何解决？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:59:41.857

将其编组为`ByValArray`：

```
[MarshalAs(UnmanagedType.ByValTStr, SizeConst = 4)]
public byte[] MagicNumber; 
```

您不需要将其作为字符串，如果将其设置为字符串，Marshaller 可能会失败。在您的定义中，您将其定义为 5 个字符串（4 个字符加上一个空终止符） - 但 HIVE 文件在幻数之后不会有空终止符，文件的第 5 个字节是另一个字段。

尝试直接将文件映射到 a`struct`可能无论如何都行不通。A`struct`定义了内存中的布局（具有适当的填充和假设，如以空字符结尾的字符串），并且磁盘格式通常不会直接映射到布局良好的结构。`byte[]`将文件读入缓冲区并手动解析它可能会更好。

# java - Java REGEX XML 解析/削减，同时保持结构 HowTo

> ID：10351473
> 
> 赞同：0
> 
> 时间：2012-04-27T13:25:06.943
> 
> 标签：java, xml, regex

我正在用 Java 编写一个 RESTful Web 服务。这个想法是“削减”一个 XML 文档，去掉所有不需要的内容（~98%），只留下我们感兴趣的标签，同时保持文档的结构，如下所示（我无法提供实际的出于保密原因的 XML 内容）：

```
<sear:SEGMENTS xmlns="http://www.exlibrisgroup.com/xsd/primo/primo_nm_bib" xmlns:sear="http://www.exlibrisgroup.com/xsd/jaguar/search">
   <sear:JAGROOT>
      <sear:RESULT>
         <sear:DOCSET IS_LOCAL="true" TOTAL_TIME="176" LASTHIT="9" FIRSTHIT="0" TOTALHITS="262" HIT_TIME="11">
            <sear:DOC SEARCH_ENGINE_TYPE="Local Search Engine" SEARCH_ENGINE="Local Search Engine" NO="1" RANK="0.086826384" ID="2347460">
               [
               <PrimoNMBib>
                  <record>
                     <display>
                        <title></title>
                     </display>
                     <sort>
                        <author></author>
                     </sort>
                  </record>
               </PrimoNMBib>
               ]
            </sear:DOC>
         </sear:DOCSET>
      </sear:RESULT>
   </sear:JAGROOT>
</sear:SEGMENTS> 
```

当然，这只是我们感兴趣的标签的结构——还有数百个标签，但它们无关紧要。

方括号 ( `[]`) 不是 XML 的一部分，它表示该元素`<PrimoNMBib></PrimoNMBib>`是子列表的元素并且出现多次 - 每次匹配来自 RESTFUL 服务的搜索。

我一直在尝试用正则表达式解析文档，只留下上面显示的结构段以及 的值，`<title>`同时`<author>`删除标签之间的所有其他内容，包括其他标签，但是我无法得到它为我的生活工作......

以前我使用 XSLT 尝试过，但是由于未解决的原因也不起作用......我已经问过一个关于 XSLT 实现的问题......

无论如何，我非常感谢提示/提示/解决方案如何使用正则表达式和 Java 解决这个问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:53:37.830

我不建议使用正则表达式来操作 XML。

**替代方法**

您可以使用 StAX 解析器，它利用 a`StreamFilter`来减少文档并仍然保持有效的结构。

**如何`StreamFilter`工作**

A`StreamFilter`从 接收事件事件`XMLStreamReader`，如果要报告事件，则返回 true，否则返回 false。在下面的示例中，`StreamFilter`将拒绝`"http://www.exlibrisgroup.com/xsd/jaguar/search"`命名空间中的任何内容。您将需要调整逻辑以使其符合用例的要求。

*   [http://docs.oracle.com/javase/6/docs/api/javax/xml/stream/StreamFilter.html](http://docs.oracle.com/javase/6/docs/api/javax/xml/stream/StreamFilter.html)

***演示***

```
package forum10351473;

import java.io.FileReader;
import javax.xml.stream.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        XMLInputFactory xif = XMLInputFactory.newFactory();
        XMLStreamReader xsr = xif.createXMLStreamReader(new FileReader("src/forum10351473/input.xml"));
        xsr = xif.createFilteredReader(xsr, new StreamFilter() {

            private boolean reportContent = false;

            @Override
            public boolean accept(XMLStreamReader reader) {
                if(reader.isStartElement() || reader.isEndElement()) {
                    reportContent = !"http://www.exlibrisgroup.com/xsd/jaguar/search".equals(reader.getNamespaceURI());
                }
                return reportContent;
            }

        });

        // The XMLStreamReader (xsr) will now only report the events you care about.
        // You can process the XMLStreamReader yourself or pass as input to something
        // like JAXB.
        while(xsr.hasNext()) {
            if(xsr.isStartElement()) {
                System.out.println(xsr.getLocalName());
            }
            xsr.next();
        }
    }

} 
```

***输出***

```
PrimoNMBib
record
display
title
sort
author 
```

# android - Android MP3文件过滤表单sdcard

> ID：10351482
> 
> 赞同：3
> 
> 时间：2012-04-27T13:25:24.283
> 
> 标签：android, audio-player, android-music-player

我正在开发从 sd 卡获取数据的应用程序。

我使用此选项进行过滤，但是当我使用 logcat 时，我发现我只能获取文件的数据`sdcard/some_dir`

但是我有声音文件到不同的文件夹，所以如果可能的话，给我**通用代码**来从 sdcard 中获取所有 mp3 文件。

```
class FileExtensionFilter implements FilenameFilter {
        public boolean accept(File dir, String name) {
            return (name.endsWith(".mp3") || name.endsWith(".MP3"));
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T09:15:07.550

这是我的 AudioFilter :) 希望它会帮助你

```
package com.designfuture.music.util;

import java.io.File;
import java.io.FileFilter;
import java.io.FilenameFilter;

import com.designfuture.framework.util.LogHelper;

public class AudioFileFilter implements FileFilter {

    protected static final String TAG = "AudioFileFilter";
    /**
     * allows Directories
     */
    private final boolean allowDirectories;

    public AudioFileFilter( boolean allowDirectories) {
        this.allowDirectories = allowDirectories;
    }

    public AudioFileFilter() {
        this(true);
    }

    @Override
    public boolean accept(File f) {
        if ( f.isHidden() || !f.canRead() ) {
            return false;
        }

        if ( f.isDirectory() ) {            
            return allowDirectories;
        }
        String ext = getFileExtension(f);
        if ( ext == null) return false;
        try {
            if ( SupportedFileFormat.valueOf(ext.toUpperCase()) != null ) {
                return true;
            }
        } catch(IllegalArgumentException e) {
            //Not known enum value
            return false;    
        }
        return false;
    }

    public String getFileExtension( File f ) {
        int i = f.getName().lastIndexOf('.');
        if (i > 0) {
            return f.getName().substring(i+1);
        } else 
            return null;
    }

    /**
     * Files formats currently supported by Library
     */
    public enum SupportedFileFormat
    {
        _3GP("3gp"),
        MP4("mp4"),
        M4A("m4a"),
        AAC("aac"),
        TS("ts"),
        FLAC("flac"),
        MP3("mp3"),
        MID("mid"),
        XMF("xmf"),
        MXMF("mxmf"),
        RTTTL("rtttl"),
        RTX("rtx"),
        OTA("ota"),
        IMY("imy"),
        OGG("ogg"),
        MKV("mkv"),
        WAV("wav");

        private String filesuffix;

        SupportedFileFormat( String filesuffix ) {
            this.filesuffix = filesuffix;
        }

        public String getFilesuffix() {
            return filesuffix;
        }
    }

} 
```

# java - 如何使用 SSHJ 保持 SSH 连接处于活动状态？

> ID：10351484
> 
> 赞同：5
> 
> 时间：2012-04-27T13:25:34.703
> 
> 标签：java, ssh, timeout, sshj

我正在开发一个使用 SSHJ 进行 SFTP 传输的库。由于请求很频繁，我想知道是否可以保持连接打开。

显然，如果服务器经常超时连接，这将一事无成。由于我无法控制服务器，因此我必须保持连接处于活动状态：使用常规 SSH 客户端，我可以指定 a`ServerAliveInterval`并让客户端为我执行此操作。

我想对 SSHJ 做同样的事情，但我不知道要发送什么消息。

SSH[手册](http://www.openbsd.org/cgi-bin/man.cgi?query=ssh_config&sektion=5)只是指出`ServerAliveInterval`

> 以秒为单位设置超时间隔，如果在此之后没有从服务器接收到数据，ssh(1) 将通过加密通道发送消息以请求服务器响应。

所以我想知道：发送了什么消息？如何通过 SSHJ 重现此消息？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T14:13:43.137

抱歉，这没有记录，但您可以设置心跳：

[https://github.com/hierynomus/sshj/blob/master/examples/src/main/java/net/schmizz/sshj/examples/RemotePF.java#L51](https://github.com/hierynomus/sshj/blob/master/examples/src/main/java/net/schmizz/sshj/examples/RemotePF.java#L51)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-20T11:36:49.550

从 0.11.0 版本开始，您可以[使用内置的 KeepAliveProvider](https://github.com/hierynomus/sshj/blob/master/examples/src/main/java/net/schmizz/sshj/examples/KeepAlive.java)：

```
public class KeepAlive {

    public static void main(String... args)
            throws IOException, InterruptedException {
        DefaultConfig defaultConfig = new DefaultConfig();
        defaultConfig.setKeepAliveProvider(KeepAliveProvider.KEEP_ALIVE);
        final SSHClient ssh = new SSHClient(defaultConfig);
        try {
            ssh.addHostKeyVerifier(new PromiscuousVerifier());
            ssh.connect(args[0]);
            ssh.getConnection().getKeepAlive().setKeepAliveInterval(5); //every 60sec
            ssh.authPassword(args[1], args[2]);
            Session session = ssh.startSession();
            session.allocateDefaultPTY();
            new CountDownLatch(1).await();
            try {
                session.allocateDefaultPTY();
            } finally {
                session.close();
            }
        } finally {
            ssh.disconnect();
        }
    }
} 
```

要发送心跳，您可以使用`KeepAliveProvider.HEARTBEAT`.

# java - 设计队列的线程消费者的性能问题

> ID：10351486
> 
> 赞同：2
> 
> 时间：2012-04-27T13:25:39.863
> 
> 标签：java, connection, queue, rabbitmq

我对编程非常陌生，并且我的软件存在性能问题。基本上我得到一些数据并在其上运行一个 100 循环（`i=0;i<100;i++`），在该循环期间，我的程序做出 3 个决策中的 1 个，保持数据工作，丢弃它，或者将它的一个版本发送回队列进行处理。每个线程所做的单独工作非常小，但数量很多（这就是我使用队列服务器进行水平扩展的原因）。

我的问题是它永远不会接近我的整个 CPU，我的程序以每个核心大约 40% 的速度运行。分析后，似乎大部分时间都花在从队列发送/接收数据上（大约 64% 在被调用的部分中`com.rabbitmq.client.impl.Frame.readFrom(DataInputStream)`，`com.rabbitmq.client.impl.SocketFrameHandler.readFrame()`大约 17% 正在以队列的格式获取它（我从 40% 降低之前），其余的都花在我的程序逻辑上）。显然，我希望我的工作能够更快地完成，并且不想让它在队列中花费太多时间，我想知道是否有更好的设计可以使用。

我的代码实际上相当大，但这里是它的功能概述：

1.  我创建到队列服务器的连接（rabbitmq 和 java）
2.  我分叉尽可能多的线程，因为我有 cpu 核心（使用相同的连接）
3.  来自线程的数据是
4.  每个线程使用共享连接创建自己的到队列服务器的通道。
5.  有一个 while 循环池化服务器并在没有确认的情况下获取 X 条消息
6.  收到消息后，我使用线程执行器在我的作业运行时发送确认
7.  我解析消息并运行我的循环
8.  如果数据被发送回队列，我将它发送给一个线程执行器，该线程执行器将它发送回来，这样我的程序就可以继续处理下一个数据集。

我做了一件*奇怪*的事情，虽然我使用线程执行器来确认并发送到队列，但我的主工作线程只是一个分叉线程（使用`public void run()`），因为我的程序专用于这个单一进程，我这样做是为了确保总是有X 准备工作的线程数（并且没有关闭/重生它们）。其余的在线程中，因为我认为其余的可以在我的主程序运行时等待/排队。

我不确定如何更好地设计它，以减少收集/发送数据的时间。有什么设计、rabbitmq、Java 可以用来帮助的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:21:43.810

如果不是 IO 等待，那么我怀疑这是由于这些方法内部发生了一些锁定。

在我看来，您的线程正在花费大量时间等待它们返回。有点违反直觉，您很可能可以通过减少线程数量来提高性能，因为它们将花费更少的时间相互绊倒，而有更多的时间积极地做某事。

试一试，看看它对个人资料有什么影响。

# jquery - 如何使 jQuery 对话框弹出特定次数？

> ID：10351489
> 
> 赞同：1
> 
> 时间：2012-04-27T13:25:50.307
> 
> 标签：jquery, jquery-ui

我将如何确定对话框应在 jQuery 中显示的次数。我有一个模态弹出对话框，我想要当用户点击某些东西时，对话框显示 2 次，而第三次点击则没有。

```
$(document).ready(function(){

    $('#something_to_clicked').click(function(){

          $('#dialog_content').dialog({modal: true});
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T13:27:45.410

```
$(document).ready(function(){

    var timesShown = 0;
    $('#something_to_clicked').click(function(){
          if (timesShown == 2) return;
          $('#dialog_content').dialog({modal: true});
          timesShown++
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T13:49:56.157

我会这样附加到对话框本身`.data()`：

```
$('#dialog_content').dialog({
    modal: true,
    autoOpen: false
}).data('timesShown', 0);

$('#something_to_clicked').click(function() {
    var myt = $('#dialog_content');
    if (myt.data('timesShown') < 2) {
        $('#dialog_content').data('timesShown', (1 + myt.data('timesShown')));
        myt.text(myt.text() + myt.data('timesShown')); //just to show
        myt.dialog("open");
    };
}); 
```

在此处查看实际操作：http: [//jsfiddle.net/ZY795/](http://jsfiddle.net/ZY795/)

# asp.net - 将控件投射到另一个页面

> ID：10351490
> 
> 赞同：0
> 
> 时间：2012-04-27T13:26:00.410
> 
> 标签：asp.net, vb.net

我已经尝试了一切都无济于事。我需要将用户选择的下拉列表中的值转换为另一个页面上的另一个下拉列表。文本框中的数据是一系列数字。

还有一种方法可以显示第二个下拉列表中的值以及其他值吗？例如，我的下拉列表有值 1-6，用户选择 4，它首先显示在第 2 页的下拉列表中，但如果他们想更改选择，其他值也会显示？

```
If Not Page.PreviousPage Is Nothing Then
  Dim table As Control = PreviousPage.Controls(0).FindControl("table1")
  Dim ddl As DropDownList = CType(table.FindControl("ddlB_Codes"),c DropDownList)
If Not ddl Is Nothing Then
  ddl_OC.DataSource = ddl.SelectedValue.Substring(0, 6)
End If
End If 
```

快速更新我终于让我的演员通过一个会话工作，只是现在我需要知道如何显示会话值和我的下拉框的其他附加值，以防用户想要更改某些内容？谢谢您的帮助

```
ddl_OC.DataSource = CType(Session.Item("valCodes"), String)
ddl_OC.DataBind()
ddl_SO.DataSource = CType(Session.Item("valAccts"), String)
ddl_SO.DataBind() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T13:29:05.100

当第一个更改时，使用事件 selectedvaluechanged 为另一个 DropDownList 设置数据源。不要忘记在 DataBind 函数使用情况下填充它。

# php - php，ajax错误报告不起作用

> ID：10351494
> 
> 赞同：0
> 
> 时间：2012-04-27T13:26:07.130
> 
> 标签：php, ajax, error-reporting

`$.post{}` 我有这个文件，并且在单击事件时，它通过我习惯于`alert(data)`识别错误来调用 php 函数。但不幸的是，它没有发出任何警告，只是它在带有相关 url 的 firebug 控制台上显示错误`"Internal server error 500"`，然后我尝试通过浏览器粘贴完整的 url 来访问代码，我放`error_reporting(E_ALL); ini_set("display_errors", 1);`了，但显示了一个空白页面。我在这里迷路了，不知道如何在不显示任何错误的情况下解决此问题。非常感谢您的帮助。

php info 错误报告中的 ps 已关闭。我在我的子文件夹上尝试了 htaccess 也没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T13:37:10.817

确保以下几点：

*   `error_reporting(E_ALL)`就在`<?php`标签之后
*   确实有一个 PHP 错误 - 尝试故意制造一个。也许错误在别处，不是你的 PHP，而是 .htaccess 文件（因为你得到 500），或者它可能是一个逻辑错误。

# java - ANDROID：如何确保用户在编辑文本中输入特定的字符串？

> ID：10351498
> 
> 赞同：-3
> 
> 时间：2012-04-27T13:26:20.217
> 
> 标签：java, android, android-emulator

我正在制作一个基于问题和答案的应用程序，并且答案由用户输入并且必须准确。如何设置编辑文本以显示用户提供的答案有效，如果有效，我希望出现一个对话框，其中包含继续并重试按钮！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:30:02.947

最好的办法是使用正则表达式模式，并确保文本框中的文本与模式匹配。[这是我曾经这样做的一个很好的文档。](http://developer.android.com/reference/java/util/regex/Pattern.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T13:41:34.143

您`TextWatcher`用于检查用户输入的答案是否有效。as

```
mEditText = (EditText)findViewById(R.id.ET);
mEditText.addTextChangedListener(mTextWatcher);
TextWatcher mTextWatcher = new TextWatcher() {
        private CharSequence temp;
        @Override
        public void beforeTextChanged(CharSequence s, int arg1, int arg2,
                int arg3) {
            temp = s;
        }
        @Override
        public void onTextChanged(CharSequence s, int arg1, int arg2,
                int arg3) {
        }
        @Override
        public void afterTextChanged(Editable s) {
         //CHECK HERE if answer is valid or not
        }
    }; 
```

# .net - 如何从使用 .NET 在 win32 下创建的二进制文件中读取 n 个字符？

> ID：10351499
> 
> 赞同：0
> 
> 时间：2012-04-27T13:26:26.630
> 
> 标签：.net, string, winapi, binaryfiles, delphi-prism

我的 win32 程序创建了一个二进制文件，其后只有一个字符串 [32] 和一个整数。然后，我编写了一个 .NET 程序来读取同一个文件。

这是我的 .NET 代码：

```
method ReadUnitFile;
var
  FHeader:TFileHeader;
  Biread:BinaryReader;
  FUnitLoc:String;
begin
  FUnitLoc := baseDir+'\system\Units.dat';
  if Environment.OSVersion.Platform = System.PlatformID.Unix then
    FUnitLoc := baseDir+'/system/Units.dat';

  if File.Exists(FUnitLoc) then
  begin
    Biread:= new BinaryReader(File.OpenRead(FUnitLoc));

    FHeader.id:=Biread.ReadString;
    FHeader.version:=Biread.ReadInt32;
    Biread.Close;
  end;
end; 
```

它可能无法读取文件。实际上，它引发了“读取超出文件末尾”异常。原因是字符串长度正好是 32 个字符。我相信 BinaryReader 没有这些信息。因此，它读取的字符串超过 32 个字符。因此，它无法正确读取二进制文件。

那么，在这种情况下，如何读取 .NET 框架下的二进制 win32 文件呢？

**更新**

这是我的 .NET 更新代码：

```
method ReadUnitFile;
var
  FHeader:TFileHeader;
  Biread:BinaryReader;
  FUnitLoc:String;
  tmparray:array[0..32] of char;
begin
  FUnitLoc := baseDir+'\system\Units.dat';
  if Environment.OSVersion.Platform = System.PlatformID.Unix then
    FUnitLoc := baseDir+'/system/Units.dat';

  if File.Exists(FUnitLoc) then
  begin
    Biread:= new BinaryReader(File.OpenRead(FUnitLoc));

    Biread.Read(tmparray,0,32);
    FHeader.id := tmparray.ToString;
    FHeader.version:=Biread.ReadInt32;
    Biread.Close;
  end;
end; 
```

虽然这可行，但我似乎无法从 tmparray 中检索字符串。FHeader.id 是字符串类型。ToString 似乎无法正常工作。在这行代码之后，FHeader.id 等于“System.Char[]”。它实际上并不包含字符串本身。

任何的想法？

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:31:31.977

正如[ReadString 的文档中](http://msdn.microsoft.com/en-us/library/system.io.binaryreader.readstring.aspx)所解释的，它期望字符串“以长度为前缀，一次编码为一个整数七位”。（这有点不清楚，但我猜大多数人会阅读他们使用 编写的字符串`BinaryWriter.Write(String)`）。

如果您有一个已知长度的字符串（例如在这种情况下为 32）或想要读取整个文件，您可能应该使用其中一个[`BinaryReader.Read`](http://msdn.microsoft.com/en-us/library/zb8d7a9a.aspx)重载

**更新问题的答案**：

`char[].ToString()`不会将字符连接成字符串。相反，它将给出一个字符数组 ( `"System.Char[]"`) 的描述性表示。

您可以做的是使用`string`构造函数将 转换`char[]`为等效字符串。看到[这个答案](https://stackoverflow.com/a/1324013/562906)。

**更新**：正如另一个答案和评论所提到的，您应该在将 转换为 时注意正确的`char[]`编码`string`。构造`String(Char[])`函数[假定 unicode characters](http://msdn.microsoft.com/en-us/library/ttyxaek9.aspx)，这可能是也可能不是您需要的（尽管它适用于纯 ASCII）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T14:19:06.777

BinaryReader.ReadString() 只能读取由 BinaryReader.WriteString() 写入的字符串。文件中的字符串数据以一个可变长度字段为前缀，该字段存储字符串长度。

解决方法很简单，您只需调用 ReadBytes(32) 即可。然后使用 Encoding.GetString() 将字节转换为字符串。

不那么简单的是选择正确的 Encoding 类。它需要与编写文件的程序中使用的编码相匹配。这是一个丑陋的实现细节，可能会让您在处理在世界其他地方编写的文件时遇到麻烦。Encoding.Default 将在文件没有传播很远时起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T20:17:10.620

您将 Delphi 存储`ShortString`到文件中。A开头`ShortString`包含 a以指定. 在您的 .NET 代码中，您需要读取 a ，然后读取指定数量的 8 位字符，然后读取 4 字节整数，例如：`Byte``AnsiChar``ShortString``Byte`

```
method ReadUnitFile;
var
  FHeader: TFileHeader;
  Biread: BinaryReader;
  FUnitLoc: String;
begin
  FUnitLoc := baseDir+'\system\Units.dat';
  if Environment.OSVersion.Platform = System.PlatformID.Unix then
    FUnitLoc := baseDir+'/system/Units.dat';
  if File.Exists(FUnitLoc) then
  begin
    Biread := new BinaryReader(File.OpenRead(FUnitLoc));
    FHeader.id := System.Encoding.Default.GetString(Biread.ReadBytes(Biread.ReadByte));
    FHeader.version := Biread.ReadInt32;
    Biread.Close;
  end;
end; 
```

# couchdb - 在 couchdb 中搜索所需数据

> ID：10351501
> 
> 赞同：1
> 
> 时间：2012-04-27T13:26:39.143
> 
> 标签：couchdb

我有类似的文件，

```
{_id:1,
name:"john"
}
{_id:2,
name:"john boss"
}
{_id:3,
name:"jim"
} 
```

我必须搜索 john 存储在文档中的数据。假设，如果我搜索“john”，文档应该得到 _id:1 & _id:2 相关数据。请指导我得到结果。

如果有人提供解决方案，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T04:06:07.693

我建议使用[CouchDB 视图](http://wiki.apache.org/couchdb/Introduction_to_CouchDB_views)向您显示`"name`“字段”中的所有“单词”。

```
function(doc) {
    // map function: _design/example/_view/names

    if(!doc.name) // Optionally do more testing for doc type, etc. here.
        return

    // Emit one row per word in the name field (first name, last name, etc.).
    var words = doc.name.split(/\s+/)
    for(var i = 0; i < words.length; i++)
        emit(words[i].toLowerCase(), doc._id)
} 
```

现在，如果您查询`/db/_design/example/_view/names?key="john"`，您将得到两行：一个用于 doc id 1，另一行用于 id 2。我还添加了小写转换，因此搜索“john”将匹配名为“John”的人。

重复是可能的：多次列出相同的文档 ID，例如 for `{"name":"John John"}`; 但是，您可以保证所有重复的行都是相邻的。

您还可以添加`?include_docs=true`到您的请求中以获取每一行的完整文档。

# nunit - Microsoft.Moles.NUnit.dll 与 nunit 2.6

> ID：10351505
> 
> 赞同：1
> 
> 时间：2012-04-27T13:26:47.393
> 
> 标签：nunit, pex-and-moles

如何使 Microsoft.Moles.NUnit.dll 与 nunit 2.6 一起使用。[文档](http://research.microsoft.com/en-us/projects/pex/molesmanual.docx)说：

> **集会**
> 
> Microsoft.Moles.NUnit.dll 您必须通过在 NUnit bin/addins 文件夹中复制 Microsoft.Moles.NUnit.dll 程序集来向 NUnit 注册该加载项。
> 
> **NUnit 版本**
> 
> 2.5.2.9222（对于其他 NUnit 版本，从源重新编译属性）

但是我从哪里得到痣的来源？如果我没有摩尔源，我肯定无法重新编译任何东西，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T07:55:41.733

源文件位于 Documentation 文件夹内的**moles.samples.zip**
中， 即默认安装的“C:\Program Files\Microsoft Moles\Documentation”。

它在 NUnit 部分上方的[文档中提到。](http://research.microsoft.com/en-us/projects/pex/molesmanual.docx)

> **其他单元测试框架**
> 
> 可以将 Moles 与任何支持托管命令行运行器的单元测试框架一起使用。为了在检测的进程中执行摩尔类型，您必须通过 moles.runner.exe 命令行工具启动单元测试运行器。
> 
> ...
> 
> 以下扩展将鼹鼠类型上下文的创建包装为一个属性。这使得鼹鼠类型更容易与那些单元测试框架一起使用。**Pex 或 Moles 安装程序中提供的示例中提供了每个属性的完整来源**。这允许针对您正在使用的测试框架的版本重新编译它们。

# android - Android将小部件的SharedPreferences加载到Preference Activity中

> ID：10351506
> 
> 赞同：0
> 
> 时间：2012-04-27T13:26:47.833
> 
> 标签：android, sharedpreferences

我可以通过这种方式将共享偏好与活动联系起来：

```
 Intent intent = getIntent();
 Bundle extras = intent.getExtras();
 if (extras != null) appWidgetId = extras.getInt(AppWidgetManager.EXTRA_APPWIDGET_ID,
                                                 AppWidgetManager.INVALID_APPWIDGET_ID);

 if (appWidgetId == AppWidgetManager.INVALID_APPWIDGET_ID) finish();

 SharedPreferences pref = getSharedPreferences("Widget"+appWidgetId, 0); 
```

在我的首选项应用程序的配置对话框中，我可以通过以下方式访问显示的首选项：

```
 getPreferenceScreen().getSharedPreferences(); 
```

这些首选项未链接到小部件，而是全局链接。如何将偏好活动中显示的偏好更改为小部件对齐偏好？

我尝试手动设置共享首选项文件：

```
 PreferenceManager localPrefs = getPreferenceManager();
  localPrefs.setSharedPreferencesName("GITC_Prefs"); 
```

当我尝试通过以下方式访问共享首选项时，这会导致空指针异常

```
 PreferenceActivity.getPreferenceScreen(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T14:41:45.793

要在两个活动中访问相同`SharedPreferences`的内容，您需要为`PreferencesActivity.getPreferenceManager().setSharedPreferencesName(name)`和指定相同的名称`Activity.getSharedPreferences(name, 0)`。您当前在第一种情况下指定**“Widget”+ appWidgetId ，在第二种情况下指定****“GITC_Prefs”**。

# ios - 我应该使用什么数据类型在 Core Data 中存储 GUID？

> ID：10351508
> 
> 赞同：6
> 
> 时间：2012-04-27T13:26:54.430
> 
> 标签：ios, core-data, ios5

我将生成需要使用 Core Data 持久化的 CFUUID 对象（如果有更好的方法在 iOS 上创建 GUID，请告诉我）。Core Data 中没有 GUID 数据类型。首选的类型是什么？看起来 CFUUID 对象很容易与字符串相互转换，所以我在想。另一种选择可能是二进制数据。

另一个考虑因素是这些 GUID 将进出 JSON 对象（通过 NSJSONSerialization 使用内置的 iOS5 JSON 序列化）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T13:30:26.740

如果我这样做，我会将其存储为字符串。

您可以将其存储为二进制数据，但由于它会进出字符串（这是 JSON 所表示的），因此将其存储为字符串可能更容易，而不必担心来回转换它。

# c# - 通过 Activator.CreateInstance 检查对象是否为接口

> ID：10351515
> 
> 赞同：1
> 
> 时间：2012-04-27T13:27:34.043
> 
> 标签：c#, types, interface, casting, activator

我正在使用 Activator.CreateInstance 在运行时从 Dll 创建一个对象，

如果对象是一个接口，我会收到一个错误，并且我不想创建该接口的对象。

所以我的问题是有什么选项可以检查一个对象是否是接口而不是类？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T13:47:04.100

由于我不想分别回复每个答案，因此您应该使用 type.IsAbstract 而不是 type.IsInterface，因为您也不想在抽象类上触发激活器（并且 .IsAbstract 也涵盖接口）。您可能还没有遇到这个问题，但这肯定是一个潜在的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T13:30:18.433

你的意思是你想检查一个*类型*是否是接口类型？如果是这样，这很容易：

```
if (type.IsInterface) 
```

如果你的意思是“这个对象是实现任何接口的类型”，它仍然是可行的，但更难并且可能不太有用......

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-27T13:30:38.700

你可以这样做：

```
Type t = obj.GetType();
t.IsInterface() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T13:31:06.177

这会有帮助吗？

```
Type t = typeof(T);
if (t.IsInterface) {
} else {
} 
```

* * *

顺便说一句，您声明您不想创建作为接口的对象。这是**不可能**的，因为它是有原因的；但是，您可以实例化类并定义**实现**接口的结构。

```
var obj = new MyClass();  // OK
var s = new MyStruct();  // OK
var i = new IMyInterface(); // NOT POSSIBLE! 
```

接口没有实现。它们是类和结构在假装实现接口时必须履行的契约。

# c++ - 模板代码不能用 GCC 编译

> ID：10351518
> 
> 赞同：0
> 
> 时间：2012-04-27T13:27:39.923
> 
> 标签：c++, templates, map

相关代码：

```
Line 476: 
typedef KeyWrapper < Key, gist_traits, KeyAllocator, key_policy > KeyWrapper;

Line 304: 
template<class Key, class GIST_TRAITS, class Allocator, class key_policy >
    struct KeyWrapper : public KeyWrapperImpl<Key, GIST_TRAITS, Allocator, typename         key_policy::type >
    {
        typedef KeyWrapperImpl<Key, GIST_TRAITS, Allocator, typename key_policy::type > base;
        typedef KeyWrapper<Key, GIST_TRAITS, Allocator, key_policy> this_type;
        KeyWrapper() {}
        ~KeyWrapper() {}
        explicit KeyWrapper(const Key& k): base(k) {}
        this_type& operator=(const KeyWithGist<Key, GIST_TRAITS, key_policy>& k)
        {
            base::operator=(k);
            return *this;
        }

    };
Line 477:
typedef KeyWithGist < Key, gist_traits, key_policy > KeyWithGist;

Line 194:
template<class Key, class GIST_TRAITS, class key_policy>
    struct KeyWithGist : public KeyWithGistImpl<Key, GIST_TRAITS, typename key_policy::type>
    {
        typedef KeyWithGistImpl<Key, GIST_TRAITS, typename key_policy::type> base;
        KeyWithGist(const Key& k) : base(k) {}
    };

Line 1307:
typedef iter<value_type> iterator;

Line 731:
typedef iter<value_type> iterator;

Line 1308:
typedef iter<const value_type> const_iterator;

Line 732:
typedef iter<const value_type> const_iterator;

Line 1309:
typedef typename boost::reverse_iterator<iterator> reverse_iterator;

Line 733:
typedef typename boost::reverse_iterator<iterator> reverse_iterator;

Line 1310:
typedef typename boost::reverse_iterator<const_iterator> const_reverse_iterator;

Line 734:
typedef typename boost::reverse_iterator<const_iterator> const_reverse_iterator; 
```

错误：

```
stree.h|476|error: declaration of ‘typedef struct sti::implementation::KeyWrapper<Key, gist_traits, typename Allocator::rebind<Key>::other, key_policy> sti::implementation::stree<Key, ValueType, Allocator, comparator, key_extractor, BN, key_policy, value_policy, gist_traits>::KeyWrapper’ [-fpermissive]|

stree.h|304|error: changes meaning of ‘KeyWrapper’ from ‘struct sti::implementation::KeyWrapper<Key, gist_traits, typename Allocator::rebind<Key>::other, key_policy>’ [-fpermissive]|

stree.h|477|error: declaration of ‘typedef struct sti::implementation::KeyWithGist<Key, gist_traits, key_policy> sti::implementation::stree<Key, ValueType, Allocator, comparator, key_extractor, BN, key_policy, value_policy, gist_traits>::KeyWithGist’ [-fpermissive]|

stree.h|194|error: changes meaning of ‘KeyWithGist’ from ‘struct sti::implementation::KeyWithGist<Key, gist_traits, key_policy>’ [-fpermissive]|

stree.h|1307|error: declaration of ‘typedef class sti::implementation::stree<Key, ValueType, Allocator, comparator, key_extractor, BN, key_policy, value_policy, gist_traits>::iter<ValueType> sti::implementation::stree<Key, ValueType, Allocator, comparator, key_extractor, BN, key_policy, value_policy, gist_traits>::iterator’|

stree.h|731|error: conflicts with previous declaration ‘typedef class sti::implementation::stree<Key, ValueType, Allocator, comparator, key_extractor, BN, key_policy, value_policy, gist_traits>::iter<ValueType> sti::implementation::stree<Key, ValueType, Allocator, comparator, key_extractor, BN, key_policy, value_policy, gist_traits>::iterator’|

stree.h|1308|error: declaration of ‘typedef class sti::implementation::stree<Key, ValueType, Allocator, comparator, key_extractor, BN, key_policy, value_policy, gist_traits>::iter<const ValueType> sti::implementation::stree<Key, ValueType, Allocator, comparator, key_extractor, BN, key_policy, value_policy, gist_traits>::const_iterator’|

stree.h|732|error: conflicts with previous declaration ‘typedef class sti::implementation::stree<Key, ValueType, Allocator, comparator, key_extractor, BN, key_policy, value_policy, gist_traits>::iter<const ValueType> sti::implementation::stree<Key, ValueType, Allocator, comparator, key_extractor, BN, key_policy, value_policy, gist_traits>::const_iterator’|

stree.h|1309|error: declaration of ‘typedef class boost::reverse_iterator<sti::implementation::stree<Key, ValueType, Allocator, comparator, key_extractor, BN, key_policy, value_policy, gist_traits>::iter<ValueType> > sti::implementation::stree<Key, ValueType, Allocator, comparator, key_extractor, BN, key_policy, value_policy, gist_traits>::reverse_iterator’|

stree.h|733|error: conflicts with previous declaration ‘typedef class boost::reverse_iterator<sti::implementation::stree<Key, ValueType, Allocator, comparator, key_extractor, BN, key_policy, value_policy, gist_traits>::iter<ValueType> > sti::implementation::stree<Key, ValueType, Allocator, comparator, key_extractor, BN, key_policy, value_policy, gist_traits>::reverse_iterator’|

stree.h|1310|error: declaration of ‘typedef class boost::reverse_iterator<sti::implementation::stree<Key, ValueType, Allocator, comparator, key_extractor, BN, key_policy, value_policy, gist_traits>::iter<const ValueType> > sti::implementation::stree<Key, ValueType, Allocator, comparator, key_extractor, BN, key_policy, value_policy, gist_traits>::const_reverse_iterator’|

stree.h|734|error: conflicts with previous declaration ‘typedef class boost::reverse_iterator<sti::implementation::stree<Key, ValueType, Allocator, comparator, key_extractor, BN, key_policy, value_policy, gist_traits>::iter<const ValueType> > sti::implementation::stree<Key, ValueType, Allocator, comparator, key_extractor, BN, key_policy, value_policy, gist_traits>::const_reverse_iterator’|

||=== Build finished: 12 errors, 0 warnings ===| 
```

注意：我正在尝试构建发布在 codeproject 上的地图版本，但它似乎无法使用 GCC 编译。谁能解释一下为什么以下代码不能在 GCC 上编译？

[http://www.codeproject.com/Articles/27799/Stree-A-fast-std-map-and-std-set-replacement](http://www.codeproject.com/Articles/27799/Stree-A-fast-std-map-and-std-set-replacement)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:28:12.783

您不能使用`typedef`重新定义已定义的类型名。它实际上与模板没有任何关系。下面的代码有同样的问题：

```
typedef float MyType;
typedef int MyType;

typeToy.cpp:4:13: error: conflicting declaration ‘typedef int MyType’
typeToy.cpp:3:15: error: ‘MyType’ has a previous declaration as ‘typedef float MyType’ 
```

为您的目标选择一个不同于`typedef`现有名称的名称。

# jquery - JQuery - 获取更高级别项目的属性

> ID：10351521
> 
> 赞同：1
> 
> 时间：2012-04-27T13:27:48.720
> 
> 标签：jquery

我正在尝试获取的 ID，`item1`但它没有在下面的代码中返回 ID。有没有办法获取更高级别函数的 ID？

我假设代码正在尝试获取的 ID，`popup`但这既不需要也不存在。我可以获取更高级别函数的 ID，还是可以将其作为参数传递给较低级别​​的函数？

```
$(".item1").live ("click" ,function(){
    $('.popup_pre_loading').css('display','none');
        $('.popup').fadeIn( 800, function(){
        alert((this).attr('id'));//need this for URL param
      });
      return false;
}); 
```

请注意，当警报框直接位于`item`' 函数中时，此代码有效。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T13:30:02.600

只需`this`在外部函数中存储一个引用，并在内部函数中引用它。

```
$(".item1").live ("click" ,function() {
    var self = this;
    $('.popup_pre_loading').css('display','none');
    $('.popup').fadeIn( 800, function(){
        alert(self.id);
    });
    return false;
}); 
```

请注意，您不需要`$(self).attr('id')`- 只是`self.id`会做！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T13:30:11.260

根据您的理解，当它直接在`item`'s 函数中时它可以工作，我猜您在`fadeIn`函数中需要它。最简单的方法是将其分配给函数中的变量，并在`click`函数中使用该变量`fadeIn`。

```
$(".item1").live ("click" ,function(){
    var item1id = $(this).attr('id');
    $('.popup_pre_loading').css('display','none');
        $('.popup').fadeIn( 800, function(){
        alert(item1id); //need this for URL param
      });
      return false;
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T13:30:07.610

```
$(".item1").live ("click" ,function(){
    var $item1 = $(this);
    $('.popup_pre_loading').css('display','none');
    $('.popup').fadeIn( 800, function(){
        alert((this).attr('id'));//need this for URL param
        alert($item1.attr('id'));
      });
      return false;
}); 
```

# python - 如何在 Django 中使用特定的 python API？

> ID：10351524
> 
> 赞同：0
> 
> 时间：2012-04-27T13:28:13.647
> 
> 标签：python, django

谁能告诉我如何在 django 中使用[Pybel](http://openbabel.org/pybel.html)来创建基于 Web 的应用程序。Pybel 是一个 python 模块，可帮助使用 Open Babel 一种用于化学化合物转换的软件。

我想创建一个可以使用[Pybel](http://openbabel.org/docs/2.3.1/UseTheLibrary/Python_PybelAPI.html)不同功能的网络应用程序。因为 Django 是基于 python 的，所以我认为这可以工作。由于我是 django 的新手，因此如果有人可以指点我教程或可以帮助我做的事情也将非常有帮助。

等待您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:37:13.397

您只需导入模块并使用它。Django 是 python，所以你也可以在非基于 web 的 python 应用程序中做任何事情。

# php - 插入/更新查询

> ID：10351525
> 
> 赞同：1
> 
> 时间：2012-04-27T13:28:14.333
> 
> 标签：php, mysql

尝试插入或更新时，没有任何内容进入数据库。这是表格布局

```
(
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) NOT NULL,
 `thesis_Name` varchar(200) NOT NULL,
 `abstract` varchar(200) NOT NULL,
 `complete` int(2) NOT NULL DEFAULT '1',
 PRIMARY KEY (`id`),
 KEY `user_id` (`user_id`)
) 
```

如您所见，id 是唯一键。user_id 是会话查看的内容。我希望 user_id 有可能有两行，因此只有 id 应该是唯一的，因此这应该是在插入还是更新时要查找的键。这是我一直在使用的：

```
 if (empty($err)) {
        $id= mysql_real_escape_string($_POST['id']);
        $thesis_Name = mysql_real_escape_string($_POST['thesis_Name']);
        $abstract = mysql_real_escape_string($_POST['abstract']);

$user_id = intval($_SESSION['user_id']);
$query = sprintf("
  INSERT INTO
    `thesis`(`id`,`user_id`, `thesis_Name`, `abstract`)
  VALUES
    ('%s','%s', '%s', '%s')
  ON DUPLICATE KEY UPDATE
   `thesis_Name` = VALUES(`thesis_Name`),
   `abstract` = VALUES(`abstract`)
      ", $id, $user_id, $thesis_Name, $abstract); 
```

如果没有办法，那么 user_id 也可以是唯一的，每个用户只有 1 行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:47:39.827

你能告诉我们最终的查询吗？之后有这样的事情`$query = sprintf(...)`：

```
echo $query 
```

也许你的一个简单的报价`$abstract`？您可以使用`mysql_real_escape_string()`它来避免它：

```
$thesis_Name = mysql_real_escape_string($thesis_Name);
$abstract = mysql_real_escape_string($abstract); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T13:52:33.193

1.  要从 mysql 获取错误，您必须使用`mysql_error()`函数。
2.  您必须转义您在查询中放置的字符串。
3.  这里的 sprintf() 没有用。

.

```
$user_id     = intval($_SESSION['user_id']);    
$id          = mysql_real_escape_string($_POST['id']);
$thesis_Name = mysql_real_escape_string($_POST['thesis_Name']);
$abstract    = mysql_real_escape_string($_POST['abstract']);

$query       = "INSERT INTO thesis (id, user_id, thesis_Name, abstract)
                VALUES ('$id','$user_id', '$thesis_Name', '$abstract')
                ON DUPLICATE KEY UPDATE
                    `thesis_Name` = VALUES(`thesis_Name`),
                    `abstract` = VALUES(`abstract`)";

mysql_query($query) or trigger_error(mysql_error()." ".$query); 
```

如果您使用的是 mysql* 函数。

然而，这是一种非常不寻常的方法，
通常我们根据 PHP 逻辑决定使用哪个查询，像这样

```
if ($_POST['id']) {
    $query = "INSERT..."
} else {
    $query = "UPDATE..."
} 
```

# java - 在Java中将double转换为String时的奇怪行为

> ID：10351529
> 
> 赞同：0
> 
> 时间：2012-04-27T13:28:34.463
> 
> 标签：java, android

我的 Android 应用程序因 SQL 查询字符串构造中的奇怪行为而崩溃。这是错误：

```
Caused by: android.database.sqlite.SQLiteException: near ")": syntax error: , while
compiling: SELECT [...], (0.6773931613745379*coslat*(coslng*0.9999276712889913
+sinlng*0.012027143*)+0.7356211694364222*sinlat) [...] 
```

错误正是来自这里： `sinlng*0.012027143*)`<== *) 最后

该字符串由以下函数构建：

```
public static String buildDistanceQuery(double latitude, double longitude) {
    final double coslat = Math.cos(MathUtils.deg2rad(latitude));
    final double sinlat = Math.sin(MathUtils.deg2rad(latitude));
    final double coslng = Math.cos(MathUtils.deg2rad(longitude));
    final double sinlng = Math.sin(MathUtils.deg2rad(longitude));
    return "(" + coslat + "*" + LocationColumns.COSLAT
            + "*(" + LocationColumns.COSLNG + "*" + coslng
            + "+" + LocationColumns.SINLNG + "*" + sinlng
            + ")+" + sinlat + "*" + LocationColumns.SINLAT 
            + ")";
} 
```

正如你所看到的，`LocationColumns.SINLNG + "*" + sinlng + ")"`成为`sinlng*0.012027143*)`，我真的不明白这怎么可能，因为 sinlng 是双重的......

我无法重现该问题，崩溃来自 Android Market 控制台，我没有所有上下文。这不是一个独特的崩溃，我有多次发生。

我可以尝试使用 StringBuilder() 但我不确定它是否能解决问题。

有人知道双精度如何在转换为字符串时生成“*”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:33:05.350

我不知道为什么，但是在 之前缺少一个“（” `coslng`，你能检查一下吗？

**编辑：**感谢您修复它，有一种方法可以打印或检查制作的字符串，检查 * 是否已经出现在那里，或者在构建查询之后？`sinlng`如果它与 0.012027143 匹配，可能会检查双精度。

不知道这会有什么帮助，但它是一个开始:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T16:30:01.957

在我的 APK 中植入了一些报告后，我找到了问题的根源。

在 ZTE StarAddict 上，结果如下：

```
final double sinlat = Math.sin(MathUtils.deg2rad(47.3572329)); 
```

是

```
0.0121* 
```

我知道这没有意义，但事实就是这样。我猜这个设备确实有缺陷，因为正在“翻译”其他字符串：

```
final static String QUERY = "distance > ?"; 
```

变成

```
"distance &gt; ?" 
```

当用于数据提供者时。

我在谷歌上做了一些研究，但找不到任何具体的东西。

有关信息，我的应用程序在 100K+ 设备上处于活动状态，只有 ZTE StarAddict 的行为如此。因此，我们可以排除我的代码中的错误。

如果有人和我有同样的问题，我很乐意听到一些线索。

# c# - 确定一个类是否实现了一个非常具体的接口

> ID：10351535
> 
> 赞同：11
> 
> 时间：2012-04-27T13:29:14.757
> 
> 标签：c#, inheritance, reflection, interface

关于这个话题有很多问题，但我有一个稍微改动过的版本。

我们有以下代码：

```
interface IFoo { }
interface IBar : IFoo { }
class Foo : IFoo { }
class Bar : IBar { }

bool Implements_IFoo(Type type) { /* ??? */ } 
```

现在，故事的转折点是：`Implements_IFoo`只有当 Type 只实现 IFoo 而不是从 IFoo 派生的任何接口时，该方法才应该返回 true。为了说明这里是这个方法的一些例子：

```
Implements_IFoo(typeof(Foo)); // Should return true

Implements_IFoo(typeof(Bar)); // Should return false as Bar type 
                              // implements an interface derived from IFoo 
```

请注意，可以有许多从 IFoo 派生的接口，您不一定知道它们的存在。

显而易见的方法是通过反射找到从 IFoo 派生的所有接口，然后检查 typeof(Bar).GetInterfaces() 是否存在其中的任何一个。但我想知道是否有人可以提出更优雅的解决方案。

PS 这个问题源于我发现的一些代码，它对类（`if(obj.GetType() == typeof(BaseClass)) { ... }`）使用了这个检查。现在，我们正在用特定代码替换类与接口。另外，以防万一 - 我将此检查作为布尔标志实现，所以这个问题纯粹是假设性的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T13:47:39.673

我试了一下，因为它听起来很有趣，这适用于您的示例：

```
bool ImplementsIFooDirectly(Type t) {
    if (t.BaseType != null && ImplementsIFooDirectly(t.BaseType)) { 
        return false; 
    }
    foreach (var intf in t.GetInterfaces()) {
        if (ImplementsIFooDirectly(intf)) { 
            return false;
        }
    }
    return t.GetInterfaces().Any(i => i == typeof(IFoo));
} 
```

结果：

```
ImplementsIFooDirectly(typeof(IFoo)); // false
ImplementsIFooDirectly(typeof(Bar)); // false
ImplementsIFooDirectly(typeof(Foo)); // true
ImplementsIFooDirectly(typeof(IBar)); // true 
```

它不会查找从 派生的所有接口`IFoo`，它只是沿着继承/接口实现链向上移动，看看是否`IFoo`存在于类型的确切级别之外的任何级别。

它还检测接口是否通过基类型继承。不确定这是否是您想要的。

尽管如此，正如其他人已经说过的那样，如果这确实是您的要求，那么您的设计可能有问题。（编辑：刚刚注意到您的问题纯粹是假设性的。那当然没关系:)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T13:40:28.060

有关如何实施的示例，请参见以下站点；

[C#是关键字用法](http://www.blackwasp.co.uk/CSharpIs.aspx)

本质上，您可以使用“is”关键字来确定对象是否属于类类型，作为其类继承堆栈的一部分。

```
class Director  : Owner { }
class Developer : Employee { }
..
var dave = new Developer();
var steve = new Director();
var isEmployee = dave is Employee; // true
var isAlsoEmploye = steve is Employee; // false 
```

根据您的示例功能：

```
bool Implements_Type(object instance, Type type) { 
return instance is type;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T13:48:25.860

```
static bool Implements_IFoo(Type type)
{
  if (typeof(IFoo).IsAssignableFrom(type.BaseType))
    return false;

  var barInterfaces = type.GetInterfaces()
    .Where(iface => typeof(IFoo).IsAssignableFrom(iface))
    .ToArray();

  return barInterfaces.Length > 0 
     && barInterfaces.Length == barInterfaces.Count(iface => iface == typeof(IFoo));
}
static bool Implements_IFoo_Optimized(Type type)
{
  if (typeof(IFoo).IsAssignableFrom(type.BaseType))
    return false;

  return type.GetInterfaces()
    .Where(iface => typeof(IFoo).IsAssignableFrom(iface))
    .Count() == 1;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T13:58:29.083

这应该可以解决问题：

```
 public bool ImplementsIFooOnly(Type type)
 {
     return !type.GetInterfaces().Any(t => 
              { 
                   return t is IFoo && !t.Equals(typeof(IFoo)); 
              });
 } 
```

可能有更有效的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T13:35:10.117

您是否尝试使用关键字[`is`](http://msdn.microsoft.com/en-us/library/scekt9xw%28v=vs.100%29.aspx)？

顺便说一句，一般来说，如果您有一个逻辑案例，即某个类需要属于某个基类但不是继承者之一，那么这可能是错误的 OO 设计，可能违反了[Liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-27T13:47:16.913

Type 类有一个可以使用的名为 GetInterface 的方法。

```
 bool Implements_IFoo(Type t)
    {
        return t.GetInterface(typeof(IFoo).Name) != null;
    } 
```

# iphone - 即使我导航到另一个视图控制器，如何使用 ASIHTTPRequest 保持下载进度

> ID：10351543
> 
> 赞同：0
> 
> 时间：2012-04-27T13:29:42.687
> 
> 标签：iphone, multithreading, download, asihttprequest, background-process

我想使用执行多个下载过程，`ASIHTTPRequest`并且我已经使用代码实现了

**编辑：**

```
- (void)download{
    UIImageView *image = (UIImageView *)[mainView viewWithTag:selectedTag];

    for (UIProgressView *currentProgress in [image subviews]) {
        if ([currentProgress isKindOfClass:[UIProgressView class]]) {
            if(currentProgress)
            {
                currentProgress.progress = 0.0;
                ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:[urlArray objectAtIndex:selectedTag]]];
                request.delegate = self;
                [request setDownloadProgressDelegate:currentProgress];
                [request setShowAccurateProgress:YES];
                [request shouldContinueWhenAppEntersBackground];
                [request allowResumeForFileDownloads];
                [request startAsynchronous];                    
            }
        }
    }
}

- (void)request:(ASIHTTPRequest *)request didReceiveData:(NSData *)data{
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(progressUpdate:) 
                                                 name:@"ProgressNotification"
                                               object:nil];
} 
```

这工作正常，现在我想继续这个过程，即使我导航到另一个`viewcontroller`，而不用暂停或取消当前下载的`UIProgressView`进度。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:36:24.040

只要您在 UIViewController 中保存对 ASIHTTPRequest 的引用，它就会起作用。

其次，你必须确保你的整个 UIViewController 没有被释放，例如从 UINavigationControllers 弹出非根视图控制器。

此外，在相关说明中，请[在](http://allseeing-i.com/ASIHTTPRequest/)页面顶部查看 ASIHTTPRequest 不再积极开发。

**编辑：**

我已经用一个带有两个选项卡的简单应用程序对此进行了测试，第一个 UIViewController 在加载时立即开始下载。由于 ASIHTTPRequest 在自己的线程中异步运行，因此它会不断更新进度条，无论它是否在视图中。当我切换到第二个选项卡并在几秒钟后返回时，进度条已经前进。

```
// FirstViewController.h
#import <UIKit/UIKit.h>
#import "ASIHTTPRequest.h"

@interface FirstViewController : UIViewController {
   IBOutlet UIProgressView *progressView;
   ASIHTTPRequest *request;
}

@property (nonatomic,retain) ASIHTTPRequest *request;

@end

// FirstViewController.m
#import "FirstViewController.h"

@interface FirstViewController ()

@end

@implementation FirstViewController
@synthesize request;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.title = NSLocalizedString(@"First", @"First");
        self.tabBarItem.image = [UIImage imageNamed:@"first"];
        self.request = nil;
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    if (request==nil) {
        request=[[ASIHTTPRequest alloc] initWithURL:[NSURL URLWithString:@"http://largefile.zip"]];
        [request setDownloadProgressDelegate:progressView];
        [request setShowAccurateProgress:YES];
        [request shouldContinueWhenAppEntersBackground];
        [request allowResumeForFileDownloads];
        [request startAsynchronous];
    }

}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
    } else {
        return YES;
    }
}

- (void) dealloc {
    if (request!=nil) {
        [request clearDelegatesAndCancel];
        [request release];
    }
}

@end 
```

如上所述，另一种方法是将下载数据的功能放入单例中。单例，作为 ASIHTTPRequest 的代表，然后例如通过实现通过自定义通知通知您的 UIViewController 下载进度

```
- (void)request:(ASIHTTPRequest *)request didReceiveData:(NSData *)data; 
```

并打电话

```
 [[NSNotificationCenter defaultCenter] postNotificationName:@"MyCustomNotification" object:self]; 
```

同样，由于下载在它自己的线程中运行，即使它不在视图中，您的 UIViewController 也会收到通知。你的 UIViewController 必须让 NSNotificationCenter 知道它想通过调用来接收通知

```
 [[NSNotificationCenter defaultCenter] addObserver:self
                                                selector:@selector(progressUpdate:) 
                                                 name:@"MyCustomNotification"
                                               object:nil]; 
```

最后一点，别忘了打电话

```
[[NSNotificationCenter defaultCenter] removeObserver:self]; 
```

当你释放你的 UIViewController 时。

# javascript - 获取当前背景图片的 URL 并移交给

> ID：10351544
> 
> 赞同：0
> 
> 时间：2012-04-27T13:29:43.197
> 
> 标签：javascript, jquery

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T13:39:41.297

$('body').css('背景图片')

这将使用 jquery 获取您的背景图像值（如果您想要的话），那么您必须在链接中设置您的 href（看起来您正在这样做）。

按照您的操作直接使用 javascript，获取背景图像将是：

var image = document.getElementsByTagName("body")[0]

var bg = image.style.backgroundImage;

这也将获得您在链接中设置的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T13:41:26.310

您可能忘记在准备好的 DOM 上执行您的函数（不能确定为简化代码），但通常这应该可以正常工作。

```
$(function() {
    $('#link').attr('href', $('body.custom-background').css('background-image').replace(/^url\((.*?)\)$/, '$1'));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T13:42:17.103

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T13:43:04.133

这是一个非 jQuery 方法：

```
function bgLink(elem, from) {
    if (!elem || !from) {
        return false;
    }
    else {
        var bgLink = window.getComputedStyle(from, null).backgroundImage,
            url = bgLink.substring(bgLink.indexOf('http:')).replace(')', '');
        elem.href = url;
        elem.innerHTML = url;
    }
}

bgLink(document.getElementById('downloadBG'), document.getElementById('bgElem'));​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/ARtEp/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T13:47:10.767

```
<head>
    <style type="text/css">
        body.custom-background { background-image: url('http://localhost:8888/wp-content/uploads/2012/04/bg2.jpg'); background-repeat: no-repeat; background-position: top center; background-attachment: scroll; }
    </style>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script type="text/javascript">
    $(document).ready(function() {
        var image = $(".custom-background").css('background-image').replace(/^url\((.*?)\)$/,     '$1');
        $('#link').attr("href", image);

    });
    </script>
</head>
<body class="custom-background">
    <div id="hide">
        <a id="hidepage">hide page</a>
        <a id="showpage" style="display:none;">show page</a>
    </div>
    <div id="downloadbg">
        <a id="link"><br>Download Background</a>
    </div>
</body>
​ 
```

[小提琴](http://jsfiddle.net/adeneo/kSCdw/)

要将链接变为下载，而不仅仅是显示图像，您必须执行一些服务器端脚本，将标题设置`Content-Disposition`为`attachment`！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-27T13:55:08.593

在加载整个 dom 之前，您不能引用 body。所以你应该将你的 javascript 包装在一个 jQuery 函数中： $(function(){ code here!;}); 这与收听 jQuery.ready 事件的结果相同。或者，您可以将 javascript 代码移动到页面底部。

像这样的东西应该可以完成这项工作：

```
<head>
  <title></title>
    <style type="text/css">
        body{ background: url(@{'http://localhost:8888/wp-content/uploads/2012/04/bg2.jpg'}); }
    </style>

    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>

    <script type="text/javascript">

        $(function(){
            var image = $('body').css('background-image').replace(/^url\((.*?)\)$/,     '$1');;
            $('#link').attr('href', image);
        });

    </script>

</head>
<body>
    <div id="hide">
        <a id="hidepage">hide page</a>
        <a id="showpage" style="display:none;">show page</a>
    </div>

    <div id="downloadbg">
        <a id="link"><br>Download Background</a>
    </div>

</body> 
```

# c# - Windows 窗体文本框错误？

> ID：10351548
> 
> 赞同：4
> 
> 时间：2012-04-27T13:29:57.147
> 
> 标签：c#, winforms, textbox

我有 Windows 窗体项目。表单上有一个文本框，名为 txt。任务是在文本框中写入用户的字符串，分两列解析文本。每列必须左对齐。这是示例：

```
--------------------------
Parameters          Values

height              36
width               72
length of trousers  32
-------------------------- 
```

每个值都必须在另一个之下。显然，我们需要一种方法，在每个参数后输入必要数量的空格。我开发了这种方法：

```
private string AddSpaces(string str)
{
    const int MAX_WIDTH = 50;
    // We've got a 50 symbols field to fill it with current parameter
    // name and add necessary number of spaces.

    StringBuilder strWithSpaces = new StringBuilder();
    int numOfSpaces = MAX_WIDTH - str.Length;
        for (int i = 0; i < numOfSpaces; i++)
        {
            strWithSpaces.Append(" ");
        }
        return strWithSpaces.ToString();
} 
```

我已经使用以下字符串测试了此方法：

```
string report = Environment.NewLine + "-------------" + DateTime.Now +
                "-------------" + Environment.NewLine +
                "Вихідні дані:" + Environment.NewLine +
                "a:" + 
                    AddSpaces("a:") +
                    "1" +
                    Environment.NewLine +
                "ab:" +
                    AddSpaces("ab:") +
                    "1" +
                    Environment.NewLine +
                "abcdefg:"+
                    AddSpaces("abcdefg:") +
                    "1" +
                    Environment.NewLine; 
```

并且制作完成后

```
txt.Text += report; 
```

我有一张意想不到的照片：

[文本框输出](http://floomby.ru/content/NXuTa1yH2U)

之后，我尝试将测试字符串写入文件。结果如下：

[文件输出](http://floomby.ru/content/0m31SsANOE)

文件中的输出是正确的。文本框中的输出是错误的。文本框有问题。如何解决这个问题？这是我的测试项目的代码：

```
/*
 Correct output looks like this:

a:          1
ab:         1
abcdefg:    1 
 */

using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;
namespace spaces
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            string report = Environment.NewLine + "-------------" + DateTime.Now +
                "-------------" + Environment.NewLine +
                "Вихідні дані:" + Environment.NewLine +
                "a:" +
                    AddSpaces("a:") +
                    "1" +
                    Environment.NewLine +
                "ab:" +
                    AddSpaces("ab:") +
                    "1" +
                    Environment.NewLine +
                "abcdefg:" +
                    AddSpaces("abcdefg:") +
                    "1" +
                    Environment.NewLine;

            txt.Text += report;
            using (StreamWriter outfile =
                new StreamWriter(@"D:\test.txt"))
            {
                outfile.Write(report);
            }
        }
        private string AddSpaces(string str)
        {
            const int MAX_WIDTH = 50;

            StringBuilder strWithSpaces = new StringBuilder();
            int numOfSpaces = MAX_WIDTH - str.Length;
            for (int i = 0; i < numOfSpaces; i++)
            {
                strWithSpaces.Append(" ");
            }
            return strWithSpaces.ToString();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T13:35:37.647

尝试将 TextBox 控件的字体更改为 Mono-Spaced 字体，例如`Courier New`.

看起来您的 TextBox 仍在使用默认字体`Microsoft Sans Serif`，每个字母的宽度都不同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T13:36:10.580

由于您没有使用等宽字体，因此空格和字符具有不同的宽度。比例字体中的空格通常很窄，因此如果您有更多空格，则该行看起来会比具有较少空格的主行更短。换成等宽字体（如 Courier 或 Consolas），看起来会更好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-27T13:37:17.373

您需要将 TextBox 的字体设置为[Monospaced font](http://en.wikipedia.org/wiki/Monospaced_font)，然后它将看起来像您想要的那样。

# c# - 不在与 linq to sql 之间

> ID：10351549
> 
> 赞同：2
> 
> 时间：2012-04-27T13:30:00.627
> 
> 标签：c#, sql, sql-server, linq-to-sql

这是我的查询：

```
var model = (from p in entity.vehicule
             join y in entity.indisponible on p.Matv equals y.idv
             where p.agence.idgov == idv && (!(dd1 >= y.Dd && dd1 <= y.Df) || !(df1 >= y.Dd && df1 <= y.Df))
             select p).ToList(); 
```

我尝试了很多方法来编写这部分：

```
(!(dd1 >= y.Dd && dd1 <= y.Df) || !(df1 >= y.Dd && df1 <= y.Df)) 
```

以这种方式（这就是它在 sql 中的外观）：

```
(dd1 Not Between Date(y.dd) And Date(y.dF)) OR (df1 Not Between Date(y.dd) And Date(y.df)) 
```

> dd1 是日期（从），Df1 是日期（到）。

我想我在这里遗漏了一些东西:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T13:51:17.733

**编辑2：*经过多次评论，希望这是您所追求的结果***

```
public IList<Car> GetCarsAvailable(DateTime fromDate, DateTime toDate)
{
    var result = from c in dataContext.Cars
                 where !c.Bookings.Any(b => (fromDate >= b.From && fromDate <= b.To) || (toDate >= b.From && toDate <= b.To))
                 select c;

    return result.ToList();
} 
```

**编辑 1**

如果我们稍微改变它，而不是检查生日，我们将检查`favourite days`. 不要让我们假设一个人可以有多个最喜欢的日子，并且我们要选择没有最喜欢的日子的每个人，即 2 天内。让我们进一步写出我们的假设：

*   `Richard`最喜欢的日子是，`5 May 2012`和`10 September 2012`
*   `Amy`最喜欢的日子是，`8 August 2012`和`12 December 2012`
*   `Matthews`' 最喜欢的日子是，`30 October 2012`

`1 May 2012`假设我们想找到在和之间没有最喜欢的一天的每个人`1 September 2012`；我们的结果输出应该只有`Matthew`，我们可以写：

```
public IList<Person> GetPeopleWhoDontHaveAnyFavouriteDate(DateTime fromDate, DateTime toDate)
{
    var result = from p in dataContext.People
                 where !p.FavouriteDates.Any(f => f.Date >= fromDate && f.Date <= toDate)
                 select p;

    return result.ToList();
} 
```

上述声明的意思是，我们要选择所有人，但前提`none`是他们最喜欢的日期在两个日期之间。

或者我们可以说，让我们选择一个人，如果他们确实有一个范围之外的日期。所以假设我们想要检查 from`1 May 2012`到`1 November 2012`，所以我们的结果集是 now`Richard`和`Amy`，可以这样实现：

```
public IList<Person> GetPeopleWhoDontHaveFavouriteDate(DateTime fromDate, DateTime toDate)
{
    var result = from p in dataContext.People
                 where p.FavouriteDates.Any(f => f.Date < fromDate || f.Date > toDate)
                 select p;

    return result.ToList();
} 
```

**原来的**

*我发现阅读你的缩写变量很棘手，所以我希望你不介意，但我想我会写一个快速演示如何做一个“不在”两个日期之间*。

我认为你在事情上是正确的。您可以通过以下几种方法来解决它。以下方法做同样的事情，但检查逆向。

```
public IList<Person> GetPeopleNotBornFromTo(DateTime fromDate, DateTime toDate)
{
    var result = from p in dataContext.People
                 where p.DateOfBirth < fromDate || p.DateOfBirth > toDate
                 select p;

    return result.ToList();
}

public IList<Person> GetPeopleNotBornFromTo2(DateTime fromDate, DateTime toDate)
{
    var result = from p in dataContext.People
                 where !(p.DateOfBirth >= fromDate && p.DateOfBirth <= toDate)
                 select p;

    return result.ToList();
} 
```

# full-text-search - 搜索文档的逻辑

> ID：10351550
> 
> 赞同：0
> 
> 时间：2012-04-27T13:30:02.160
> 
> 标签：full-text-search, logic

在当今时代，我们对所有事物都有大量信息。有时，信息量很大，而且没有数字化。您将开发什么样的逻辑格式来从许多类似的手册中找到特定的信息，以便为用户实时提供要点信息。用户无需通读所有文档。您是否首先将文档转换为类似的结构？有什么建议么？
**编辑：**
*我知道这是某种文本搜索问题。* 让我举一个例子，这样问题就变得有点集中了：
**MANUAL1: (for California)**

```
Table of content 
...

Precautions:
1.) The operator must use synthetic gloves to handle chemicals
... 
```

**MANUAL2：（对于明尼苏达）**

```
Table of content
...
Precautions:
1.) Use polymer gloves while being in any contact with hazardous chemicals
... 
```

现在该程序的用户只需对“处理有害化学品”进行查询，程序应该为他提供上述两个选项

1.  CA) 操作员必须使用合成手套处理化学品
2.  MN) 在接触危险化学品时使用聚合物手套

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:47:38.260

隐含地，您至少要应对五个级别的“重组”。

1.  如何整理来自加利福尼亚的手册集？（文件的语料库）
2.  如何从纯文本文件中提取文本？HTML？一个PDF？一个Word文档？（文档物理格式）
3.  如何识别章节、章节、标题、副标题、标题、表格？（文档级别的语义）
4.  如何解析纯文本以提取含义？（句子级别的语义）
5.  如何处理同义词和整体关系？（本体）

当您认识到“与任何接触”与“处理”有关时，您的问题暗示了某种句子级别的语义和本体分析。

您可以查看[IBM 的 Watson 项目](http://www-03.ibm.com/innovation/us/watson/what-is-watson/science-behind-an-answer.html)，了解有关如何从大量数据中提取意义以及一些新颖的本体方法的一些想法。

对于这些问题，你的方法应该有多具体或通用？这部分取决于语料库的边界。您是在处理 Google 搜索“化学品”中出现的任何文件，还是只处理加利福尼亚州环保署的公开文件？

# node.js - 如果 mongodb 没有运行，我该如何处理 mongoskin 抛出的异常？

> ID：10351553
> 
> 赞同：0
> 
> 时间：2012-04-27T13:30:04.223
> 
> 标签：node.js, mongodb

我正在使用 mongoskin 从节点连接到 mongodb，但是如果 mongodb 不可用，连接时会引发异常，并且我似乎找不到处理此问题的方法。

我的连接和查询代码如下所示...

```
var mongo = require('mongoskin');
var conn = 'localhost:27017/dbname'; 

mongo.db(conn).collection('collection').find({ date: { $gte: now } }, { sort: [['date', 1]]}).toArray(function(err, result) {
                if (err) throw err;
                callback(null, result)
            }); 
```

我应该如何处理？

谢谢，西蒙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:14:45.103

`throw err;`在这里没用 - 没有外部范围来捕获错误，因为它被事件循环作为异步函数调用。node.js 中的约定是触发回调，其中第一个 arg 包含错误（或 null，如果没有），第二个 arg 包含命令结果。

所以你可能只想：

```
callback(err, result) 
```

甚至直接传递回调。在回调的代码中，检查 err 是否为空，然后在那里处理条件。

# data-structures - 具有持久数据结构的 Javascript 函数库

> ID：10351557
> 
> 赞同：9
> 
> 时间：2012-04-27T13:30:12.010
> 
> 标签：data-structures, functional-programming, javascript, persistent-data

我正在寻找具有持久数据结构的功能库。我只需要嵌套数组和字典。有一些[功能性的 javascript 库](https://stackoverflow.com/questions/3690411/which-javascript-functional-library-underscore-or-wu-js-or-functional-or)，但它们不适合不变性。我希望能够写作

```
var dict = makeDictionary({
  'foo': 1;
  'bar': {
     'ely': 2;
  }
});
var newDict = dict.assoc('foo', 42).assoc('bar', 'tender', 30).dissoc('bar', 'ely');
assert.eq dict.bar.ely, 2; // unchanged
assert.eq newDict.bar.tender, 30; // added
assert.eq newDict.bar.ely, undefined; // removed 
```

虽然[下划线](http://documentcloud.github.com/underscore/)在某些情况下很接近，特别是对于数组，但它会修改字典参数。我也可以使用[clojurescript](https://github.com/clojure/clojurescript)，但我更喜欢更轻量级的方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-10T23:28:07.037

我想看看森。它打包了 ClojureScript 的函数式数据结构，以便从普通的旧 Javascript 中使用。由于数据结构来自 ClojureScript，我希望它们比其他库得到更好的测试、更完整和更高的性能。

[https://github.com/swannodette/mori](https://github.com/swannodette/mori)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T13:36:16.637

我完成了 JavaScript 的 Persistent Map 的实现（并将很快完成 Persistent Vector），因为似乎有越来越多的需求。

与 Java 相比，有几个细节（缺少 equals、hashCode 依赖），因此实现使用排序平衡二叉树（平衡实际上是通过不变性简化和加速的）和 === 用于相等和 < 或自定义函数低于。

Feat.js 的代码（项目代码名称）可在github.com 上的[feat-sorted-map.js 获得](https://github.com/josef-jelinek/cofy/blob/master/lang/feat-sorted-map.js)

[您可以在cofylang.org 上的 feat.js 上](http://cofylang.org/tests/test-feat.html)在线查看包含工作测试的页面

目前，除了源代码和测试之外没有任何文档，但我也在努力完成它。

**更新：**那里也有一个持久向量的实现，并且速度已经提高了几个数量级。（它也被清理了）[github.com 上的 feat-vector.js](https://github.com/josef-jelinek/cofy/blob/master/lang/feat-vector.js)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-21T21:36:17.377

还有：

[https://github.com/hughfdjackson/immutable](https://github.com/hughfdjackson/immutable)

它基于这里的持久哈希树算法：

[https://github.com/hughfdjackson/persistent-hash-trie](https://github.com/hughfdjackson/persistent-hash-trie)

可能值得研究。

恕我直言，此代码更好，但我的基准测试表明它的运行速度比上面列出的慢了近一个数量级。

# jquery - jQuery - 如何将 HTML 列表（ul，ol）发布到另一个页面，就好像它是一个表单一样？

> ID：10351558
> 
> 赞同：0
> 
> 时间：2012-04-27T13:30:18.630
> 
> 标签：jquery, html

我制作了一个可编辑列表，其中包含可以使用 jQuery ui 和 jeditable 拖动的元素。现在我想“发布”列表的内容并保存它。如何“序列化”列表的内容？

例如，如果我有清单：

```
<ol id="topics">
    <li><span class="editable">random topic</span></li>
    <li><span class="editable">another topic</span></li>
    <li><span class="editable">third topic</span></li>
</ol> 
```

如何将其转换为字符串：

```
?topics1=random topic&topic2=... 
```

我希望这是有道理的。我的目标是使用 post 保存列表顺序和内容。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:32:00.277

```
var data = $('#topics .editable').map(function() {
    return $(this).text();
}).get(); 
```

然后只需在 AJAX 调用中使用此数组或将其序列化为 JSON 并将其存储在表单字段中。

由于您需要查询字符串，请查看由`$.param({topics: data})`. 它将产生一个包含数组的 php 样式的查询字符串：`topics[]=abc&topics[]=def`

既然你提到你将使用`$.post`：

```
$.post('url', { topics: data }, function() { /* ... */ }); 
```

然后，假设您在服务器端使用 PHP，您有一个数组`$_POST['topics']`

* * *

如果你真的想要`topic1`，等等，使用这个：

```
var data = {};
$('#topics .editable').each(function(i) {
    data['topic' + (i + 1)] = $(this).text();
});

$.post('url', data); 
```

# jquery - jquery smooth-div 滚动不起作用

> ID：10351561
> 
> 赞同：0
> 
> 时间：2012-04-27T13:30:24.350
> 
> 标签：jquery, scroll, smooth

由于某种原因，autoScollingMode 在我的网站上不起作用：http: [//tinyurl.com/6ux32fe](http://tinyurl.com/6ux32fe)

那是我的代码：

```
<script type="text/javascript">
$(document).ready(function () {
// Initialize the scroller
$("#makeMeScrollable").smoothDivScroll({ 
       mousewheelScrolling: true,
       manualContinuousScrolling: true,
       visibleHotSpotBackgrounds: "false",
       autoScrollingMode: "always"
   });
}); // End query document ready 
```

我找不到错误...谢谢任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:53:53.917

当我现在检查您的网站时，它运行良好，所以我猜您自己解决了问题？

如果你愿意，你也可以升级到 Smooth Div Scroll 1.3 版。您可能需要更改一些选项才能使升级正常工作，但这取决于您使用的功能。

说到功能[——Smooth Div Scroll 1.3](http://www.smoothdivscroll.com)支持触控，这很好，因为很多人使用 iPhone、iPad 等。

# matplotlib - 我如何适合长标题？

> ID：10351565
> 
> 赞同：31
> 
> 时间：2012-04-27T13:30:31.947
> 
> 标签：matplotlib

有一个[类似的问题](https://stackoverflow.com/questions/8802918/my-matplotlib-title-gets-cropped)- 但我无法使那里提出的解决方案起作用。

这是一个带有长标题的示例图：

```
#!/usr/bin/env python

import matplotlib
import matplotlib.pyplot
import textwrap

x = [1,2,3]
y = [4,5,6]

# initialization:
fig = matplotlib.pyplot.figure(figsize=(8.0, 5.0)) 

# lines:
fig.add_subplot(111).plot(x, y)

# title:
myTitle = "Some really really long long long title I really really need - and just can't - just can't - make it any - simply any - shorter - at all."

fig.add_subplot(111).set_title("\n".join(textwrap.wrap(myTitle, 80)))

# tight:
(matplotlib.pyplot).tight_layout()

# saving:
fig.savefig("fig.png") 
```

它给出了一个

```
 AttributeError: 'module' object has no attribute 'tight_layout' 
```

如果我用它替换`(matplotlib.pyplot).tight_layout()`它`fig.tight_layout()`会给出：

```
 AttributeError: 'Figure' object has no attribute 'tight_layout' 
```

所以我的问题是 - 我如何使标题适合情节？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-05-17T11:30:37.783

这是我最终使用的：

```
#!/usr/bin/env python3

import matplotlib
from matplotlib import pyplot as plt
from textwrap import wrap

data = range(5)

fig = plt.figure()
ax = fig.add_subplot(111)

ax.plot(data, data)

title = ax.set_title("\n".join(wrap("Some really really long long long title I really really need - and just can't - just can't - make it any - simply any - shorter - at all.", 60)))

fig.tight_layout()
title.set_y(1.05)
fig.subplots_adjust(top=0.8)

fig.savefig("1.png") 
```

![在此处输入图像描述](../Images/56dbe5b5f5b07817514679baecaa28c0.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-27T13:38:57.917

一种方法是简单地更改标题的字体大小：

```
import pylab as plt

plt.rcParams["axes.titlesize"] = 8

myTitle = "Some really really long long long title I really really need - and just can't - just can't - make it any - simply any - shorter - at all."
plt.title(myTitle)
plt.show() 
```

![在此处输入图像描述](../Images/a39bdafe8f3e931530529b962ac0d76f.png)

在您链接的答案中，还有其他几个涉及添加换行符的好解决方案。甚至还有一个[自动解决方案](https://stackoverflow.com/a/8813131/249341)可以根据图形调整大小！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-04-23T18:42:31.383

*   [matplotlib：自动换行文本](https://matplotlib.org/3.1.1/gallery/text_labels_and_annotations/autowrap.html)是`matplotlib`3.1.2 版文档的官方答案
*   [matplotlib：文本属性和布局](https://matplotlib.org/3.2.1/tutorials/text/text_props.html)也很有用
*   由于[GitHub，在 Jupyter 中显示内联图不起作用： Text wrapping doesn't seem to work in jupyter notebook #10869](https://github.com/matplotlib/matplotlib/issues/10869) unless you do this answer [Matplotlib and Ipython-notebook: Displaying exactly the figure that will be saved](https://stackoverflow.com/questions/37864735/matplotlib-and-ipython-notebook-displaying-exactly-the-figure-that-will-be-save/37879281#37879281)
    *   `plt.savefig(...)`似乎可以正常工作`wrap`

```
import matplotlib.pyplot as plt

x = [1,2,3]
y = [4,5,6]

# initialization:
fig, axes = plt.subplots(figsize=(8.0, 5.0))

# title:
myTitle = "Some really really long long long title I really really need - and just can't - just can't - make it any - simply any - shorter - at all."

# lines:
axes.plot(x, y)

# set title
axes.set_title(myTitle, loc='center', wrap=True)

plt.show() 
```

[![在此处输入图像描述](../Images/168a4a78bc1701bc77b16e5d1a19be48.png)](https://i.stack.imgur.com/f3fJh.png)

*   以下也有效

```
plt.figure(figsize=(8, 5))

# title:
myTitle = "Some really really long long long title I really really need - and just can't - just can't - make it any - simply any - shorter - at all."

# lines:
plt.plot(x, y)

# set title
plt.title(myTitle, loc='center', wrap=True)

plt.show() 
```

## 笔记

*   不推荐使用以下添加轴的方式

```
# lines:
fig.add_subplot(111).plot(x, y)

# title:
myTitle = "Some really really long long long title I really really need - and just can't - just can't - make it any - simply any - shorter - at all."

fig.add_subplot(111).set_title(myTitle, loc='center', wrap=True) 
```

`MatplotlibDeprecationWarning: Adding an axes using the same arguments as a previous axes currently reuses the earlier instance. In a future version, a new instance will always be created and returned. Meanwhile, this warning can be suppressed, and the future behavior ensured, by passing a unique label to each axes instance.`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-09-29T15:03:34.880

我更喜欢以这种方式调整@Adobe的解决方案：

```
plt.title("First Title\n%s" % "\n".join(wrap("Second Title", width=60))) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-07T11:37:40.203

## 添加`\n`你的文本标题

## 前

```
axs[0, 0].set_title('pure imshow of 2D-array (RGB)')
axs[0, 1].set_title('Mean filter')                                     # imshow by default applies a standard colormap,  viridis cmap, which is greenish. 
axs[0, 2].set_title('pure imshow of 2D-array (R-channel)')             # 
axs[1, 0].set_title('imshow of 2D-array with R values cmap="Grey_r"')
axs[1, 1].set_title('imshow of 2D-array with R values cmap="Reds_r"')
axs[1, 2].set_title('imshow of 3D-array with coordinates 1 and 2 \n(i.e.: channels G and B) set to 0') 
```

## 后

```
axs[1, 0].set_title('imshow of 2D-array \n with R values cmap="Grey_r"')
axs[1, 1].set_title('imshow of 2D-array \n with R values cmap="Reds_r"')
axs[1, 2].set_title('imshow of 3D-array with coordinates 1 and 2 \n channels G and B) set to 0') 
```

# excel - Excel - 在另一个 VLOOKUP 中使用 VLOOKUP 的结果

> ID：10351569
> 
> 赞同：0
> 
> 时间：2012-04-27T13:30:49.457
> 
> 标签：excel, excel-formula, vlookup

所以，我基本上有这个公式：

```
=VLOOKUP(A2;Imena!$A$1:$C$208;2;)&" "&VLOOKUP(A2;Imena!$A$1:$C$208;3;) 
```

它根据 A2 值结合了工作表“Imena”中用户的名字和姓氏

现在，我想做一个像这样的 Vlookup：

```
=VLOOKUP(__result of first vlookup__;Sheet2!$N$2:$O$940;1;FALSE) 
```

根据第一次查找的结果，再做一次……怎么做？我尝试格式化单元格，什么都没有......在 VLOOKUP 前面添加 - （在线阅读），没有帮助......

也许你们当中有人知道答案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-04-01T19:52:24.097

虽然它并没有真正回答 OPs 的问题，但我在寻找类似的答案时遇到了这个线程。我有一个返回数字的公式，然后我对该数字进行 vLookup，预计它不起作用。我发现你需要将 value() 放在你的 lookup_value 周围，如下所示：

```
=VLOOKUP(VALUE(J9),Sheet7!$A$1:$C$563,3,FALSE) 
```

问题是 J9 中的值是文本，而不是数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T20:40:56.810

如果例如单元格`A1`包含您的第一个公式，则只需`A1`在您的第二个公式中插入对的引用。
或者，只需在第二个公式中插入完整的第一个公式（等号除外）。

请注意，在您的第二个公式中，您的*range_lookup*是`FALSE`，因此您的*table_array* `Sheet2!$N$2:$O$940`不需要排序。
在这里使用`FALSE`也意味着`VLOOKUP`会找到一个*完全匹配*的。如果没有找到，则返回*错误值* `#N/A`。
—> 因此，请注意您的查找值与查找数组中的值之间的任何空白差异（尾随空格）......</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T14:51:22.960

尝试这个：

```
=VLOOKUP((VLOOKUP(A2,'Imena'!$A$1:$C$208,2,FALSE)&" "&VLOOKUP(A2,'Imena'!$A$1:$C$208,3,FALSE)),'Sheet2'!$N$2:$O$940,1,FALSE) 
```

# c++ - 多态继承不覆盖基类方法

> ID：10351570
> 
> 赞同：1
> 
> 时间：2012-04-27T13:30:57.677
> 
> 标签：c++, inheritance, vector, polymorphism

我的基类：

```
class Item
{
protected:  
    int count;
    string model_name;
    int item_number;

public:
    Item();
    void input();
} 
```

我的派生类：

```
class Bed : public Item
{
private:
    string frame;
    string frameColour;
    string mattress;

public:
    Bed();
    void input();
} 
```

现在我所有的输入函数都试图做的是输出正在使用的方法：

```
void Item::input()
{ 
    cout<<"Item input"<<endl;
}

void Bed::input()
{
    cout<<" Bed Input"<<endl;
} 
```

当我在 main 中调用该函数时，我希望使用派生类输入，但目前项目输入是。

主要的：

```
vector<Item> v;
Item* item;
item= new Bed;
v.push_back(*item);
v[count].input();
count++; 
```

我遵循了我拥有的书中列出的方法，但我想我可能对如何创建存储在向量中的新对象感到困惑。

任何帮助都会很棒，谢谢Hx

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T13:31:30.947

您尚未将方法标记为`virtual`.

另外，因为你有一个`vector`对象，而不是指针，你会遇到**对象切片**。虽然它会编译，但它是不正确的。

正确的方法是使用指针向量或智能指针。

```
class Item
{
   //....
   virtual void input(); //mark method virtual in base class
};

class Bed : public Item
{
   //....
   virtual void input();
};

vector<Item*> v;
Item* item = new Bed;
v.push_back(item);
//...
//remember to free the memory
for ( int i = 0 ; i < v.size() ; i++ ) 
    delete v[i]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T13:33:56.837

在基类中：

```
virtual void input(); 
```

在派生类中

```
virtual void input() override; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T13:43:51.687

为避免对象切片，您可以使用指针或引用。对于您正在寻找的行为，您必须将函数声明为`virtual`在基类中。

有时人们更喜欢将 virtual 关键字也放在派生类中，以记住用户该函数是虚拟的，但这不是强制性的。

您还应该记住，使用虚函数是有代价的，在实际使用它之前应该考虑一下。

# internet-explorer-8 - 页面在 IE 8 中显示不一样

> ID：10351576
> 
> 赞同：-1
> 
> 时间：2012-04-27T13:31:17.510
> 
> 标签：internet-explorer-8, font-face

谁能向我解释为什么这里[http://www.urlgone.com/f9d64e/](http://www.urlgone.com/f9d64e/)菜单中的字体（即配件、儿童、男士、女士）在 IE8 中没有正确显示。在 IE8 中，它使用 Arial，但在所有其他浏览器中，我使用预期的 @font-face 字体检查了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:34:36.790

是的。`@font-face`不同浏览器的支持略有不同。特别是，IE 仅支持嵌入的开放式字体 (EOT)，因此如果您要在 IE 中看到正确呈现的字体，则需要包含此[字体参考。](http://www.w3.org/TR/css3-fonts/#src-desc)[这里](http://www.fontspring.com/blog/the-new-bulletproof-font-face-syntax)有一个很好的通用`@font-face`规则语法。

# sharepoint - SharePoint 2010 还原-SPSite 问题

> ID：10351582
> 
> 赞同：1
> 
> 时间：2012-04-27T13:31:33.507
> 
> 标签：sharepoint, sharepoint-2010, backup, restore

我已经使用命令通过 Power shell 创建了 SharePoint 2010 网站集备份

**备份-SPSite "http://sitename:85" -path "C:\backup.bak" -Force**

我正在使用命令在不同端口上的同一 SharePoint 2010 服务器/同一台机器上恢复此备份

**恢复--SPSite "http://sitename:81" -path "C:\backup.bak" -Force**

它通过这个错误

Restore-SPSite ：您的备份来自不同版本的 Microsoft SharePoint t Foundation，无法恢复到运行当前版本的服务器。备份文件应恢复到版本为“4.0.145.0”或更高版本的服务器。在 line:1 char:15 + Restore-SPSite <<<< "http://sitename:81" -path "C:\backup.bak" -Force + CategoryInfo : InvalidData: (Microsoft.Share...dletRestoreSite: SPCmdletRestoreSite) [Restore-SPSite], SPException + FullyQualifiedErrorId : Microsoft.SharePoint.PowerShell.SPCmdletRestoreSite

***我很惊讶。我在同一 SharePoint 服务器上创建备份和还原，那么为什么它要求不同版本的 Microsoft SharePoint Foundation。***

任何形式的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T18:32:07.117

我在将 SPF2010 迁移到不同的服务器时遇到了类似的问题。

解决方案：在源服务器上升级数据库。

方法：打开 Sharepoint PowerShell，然后键入**Upgrade-SPContentDatabase**命令，在提示时按 R（可能是 Y）。

干杯

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-28T10:28:43.577

您似乎已将 SP1 应用于您的 SharePoint 服务器。*Service Pack 和社区更新 (CU) 可能会更改数据库方案，并且在应用此类更新之前所做的备份可能无法使用。*[微软在Restore-SPSite](http://technet.microsoft.com/en-us/library/ff607788.aspx)的描述中提到了这一点。请参阅[将 SP1 之前的备份还原到 SP1 场 (SharePoint Foundation 2010)](http://technet.microsoft.com/en-us/library/hh344827.aspx)和/或[将 SP1 之前的备份还原到 SP1 场 (SharePoint Server 2010)](http://technet.microsoft.com/en-us/library/hh344831.aspx)。您的备份范围是网站集，这意味着您必须安装 SP1 之前的 SP 服务器才能在那里执行还原。然后，您将升级机器并备份升级后的网站集。此备份可在您当前的服务器/场上恢复。好痛啊

**SharePoint 备份应在相同版本的 SharePoint 服务器/场上恢复，包括重要更新。**Microsoft 建议在应用 SP1 后执行完整的场备份。我会确保在每个 SP 或 CU 之后刷新备份。

您不应将备份视为长期解决方案。如您所见，它不仅不是跨版本存档，而且即使是同一版本的服务包，它也可能无法生存。SP Backup 与您的 UPS 一样是短期安全；其他软件供应商提供长期存档以保留将来可访问的 SP 数据。

[在应用 CU 12/2011 并通过Import-SPWeb](http://technet.microsoft.com/en-us/library/ff607613.aspx)导入站点后，我遇到了类似的问题。内容部署 API 对 SP 版本变化也很敏感；它旨在将内容从登台复制到生产环境；不存档/恢复内容。

--- 费尔达

# c# - SSMA AccesToSQLAzure - C# 访问应用程序中的异常

> ID：10351583
> 
> 赞同：0
> 
> 时间：2012-04-27T13:31:34.723
> 
> 标签：c#, winforms, ms-access, azure-sql-database, sql-server-migration-assi

我使用 SQL Server 迁移助手将我的 Access2007 (.accdb) 迁移到了 SQL Azure 数据库，它可以很好地解决一些问题，但现在不是重点。

前段时间，我编写了一个 C# Winforms 应用程序，它连接到我的 Access 数据库并执行一些操作，例如更新和删除数据行。

所以我刚刚将我的 Access 数据库迁移到 SQL Azure 并选中了链接表的复选框，在描述中我的应用程序可以毫无问题地使用 Access 数据库，但是表物理存储在 SQL Azure 数据库中，好的我想。

但是现在我在测试我的 C# 应用程序时遇到了一个异常，这里是：

与“SQL Server Native Client 10.0”Databasename“.database.windows.net”的 ODBC 连接失败。

我在互联网上找不到有关此异常的信息...我希望有人可以帮助我解决此问题，我对此感到非常绝望...

感谢并问候亚历山大

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T05:09:48.617

由于您可以在迁移助手中使用 SQL Azure，我想您可能已经配置了 SQL Azure 防火墙规则。不过，请再次检查以确保它能够从您的本地计算机连接到 SQL Azure。还请检查连接字符串是否正确。此外，我建议您参考一篇可能有帮助的文章：http: [//msdn.microsoft.com/en-us/library/windowsazure/ee336243.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee336243.aspx)。

此致，

明旭。

# silverlight-5.0 - 清除silverlight中的文本框值

> ID：10351584
> 
> 赞同：0
> 
> 时间：2012-04-27T13:31:36.407
> 
> 标签：silverlight-5.0

在silverlight 5.0 中单击文本框值时，我需要清除它。

请帮我解决这个问题。

```
 <TextBox Height="34" HorizontalAlignment="Left" Margin="88,53,0,0" Name="textBox1" Text="Sample" VerticalAlignment="Top" Width="166" MouseLeftButtonDown="textBox1_MouseLeftButtonDown" /> 
```

私人无效 textBox1_MouseLeftButtonDown（对象发送者，MouseButtonEventArgs e）{ this.textBox1.Text = string.Empty; }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:36:40.707

（对不起，我的英语不好）

添加到您的代码中（例如，在构造函数或 UserControl 加载事件上）：

```
textBox1.AddHandler(TextBox.MouseLeftButtonDownEvent, new MouseButtonEventHandler(textBox1_MouseLeftButtonDown), true); 
```

# c++ - 如何获取 std::set 的第一个元素

> ID：10351591
> 
> 赞同：16
> 
> 时间：2012-04-27T13:32:34.300
> 
> 标签：c++, stl, iterator, set

我你们大家

我在我的软件中发现了一个奇怪的错误。

在我从 std::set 中删除元素的 while 循环中，我希望始终获取第一个元素，直到容器为空：

```
std::set< int*> nodes;
// Fill nodes 
for (int i=0; i<10;i++)
   nodes.insert(new int);
//
while (!nodes.empty())
{
int* pivot  = (*nodes.begin());
// do some operation with pivot erasing some elements from nodes
} 
```

我发现以这种方式实现第一个元素适用于 gcc 但不适用于 MSVC，它在我尝试取消引用`(*nodes.begin())`迭代器时崩溃。

std::set 的两个实现是否表现不同？

我想要一个没有实现差异的数据结构，这可能吗？

可能我必须为这种操作更改数据结构

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:45:01.870

您的代码在 VS2010 中运行良好，您应该更新您的 vcc。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-06-02T13:48:33.897

您不能在这样的集合上使用迭代器，因为从集合中删除元素会使迭代器无效。当集合的大小低于某个阈值（基于设置迭代器时的初始大小）时，它将修改堆上数据的底层存储，这将使作为迭代器的指针指向废话。

请参阅迭代器有效性： [http ://www.cplusplus.com/reference/set/set/erase/](http://www.cplusplus.com/reference/set/set/erase/)

(*nodes.begin()) 做你想做的事，你只是不能从你迭代的集合中删除

# php - 有什么方法可以用 URL 字符串中的数据自动填充 HTML 表单文本框？

> ID：10351594
> 
> 赞同：1
> 
> 时间：2012-04-27T13:32:50.540
> 
> 标签：php, javascript, jquery, html, url

是否可以根据随 URL 传入的字符串自动填充页面上的文本框。例如：

假设我们有以下形式：

```
<form name="form_reservation" id="form-reservation">
                    <div style="padding:10px 20px 10px 10px;">
                    <label for="reservation-id">Reservation ID</label>
                        <input name="reservation_id" id="reservation-id" class="reservationid" style="width:120px !important"/>
                        <div style="padding:5px 20px 0px 10px;" class="res_message" id="res-message">&nbsp;</div>
                        <input type="submit" class="button" value="Search Reservation" name="search_button" style="width:150px !important; margin:10px 0px 0px 5px;"/>
                        <input type="button" class="button" value="Clear" style="width:150px !important; margin:10px 0px 0px 5px;" onclick="resetForms('reservation')" />
                    </div>
                </form> 
```

用户收到一封包含链接的电子邮件：www.website.com/formpage.html######

其中###### 是我想在表单的reservation-id 字段中填充的ID。有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:36:35.437

假设用户单击的 URL 看起来像`www.website.com/formpage.html?id=12345`，您可以使用 GET 将其吐出到输入“值”字段中，例如：

```
<input value="<?php echo htmlspecialchars($_GET["id"]); ?>" name="reservation_id" id="reservation-id" class="reservationid" style="width:120px !important" /> 
```

这是使用 php 的方法。

编辑：

根据@Esailija 的评论，我将它包装在 htmlspecialchars 函数中，据我所知，这将有助于防止 XSS 攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T13:39:24.620

Javascript：

```
<script>
    var hash = window.location.hash.replace('#', ''); // get hash and replace the '#' (hash) tag
    document.getElementById('reservation-id').value = hash; // add value to input
</script> 
```

我假设您在谈论 hash location `url.html#1111`，这只能在 JavaScript 中完成。

# c# - MVC 3 Web 网格图像

> ID：10351599
> 
> 赞同：0
> 
> 时间：2012-04-27T13:33:22.583
> 
> 标签：c#, asp.net-mvc

我有一个网络网格，我想显示一个图像而不是“删除”这个词

而不是这个 "Html.ActionLink("Delete"," 我想放一张图片

我该怎么做？

这是我的代码：

```
enter code here

               @{ var grid = new WebGrid(source: Model.PartImageSearchResult, rowsPerPage: 2, canPage: true, defaultSort:
                       "PartImageSearchResult.PartImageName", canSort: true, ajaxUpdateContainerId: "ImagesListGrid");}

                    @grid.GetHtml(
                    mode: WebGridPagerModes.All,
                    numericLinksCount: 5,
                    firstText: "First",
                    lastText: "Last",
                    previousText: "Previous",
                    nextText: "Next",
                    tableStyle: "webgrid",
                    headerStyle: "webgrid-header",
                    rowStyle: "webgrid-row-style",
                    footerStyle: "webgrid-footer",
                    alternatingRowStyle: "webgrid-selected-row",
                     htmlAttributes: new { id = "PartFilesUploadID" },
                    columns: grid.Columns(

                    //grid.Column(style: "PartImagesDelete", format: (item) => Html.ImageLink("~/Content/images/btn_delete_sm.png", "DeletePartImages", new { id = item.PartFilesUploadID }, new { onclick = "return confirm('Are you sure you wish to delete this article?');" })),

                    grid.Column(style: "PartImagesDelete", format: (item) => Html.ActionLink("Delete", "DeletePartImages", new { id = item.PartFilesUploadID }, new { onclick = "return confirm('Are you sure you wish to delete this article?');" })),
                    grid.Column(header: "Images", style: "PartImages", format: @<text><img src="@Url.Content("~/Uploads/Parts/" + item.PartImageName)" alt="" style="width:100px;height:50px;" /></text>),
                    grid.Column(header: "Files Name", format: @<text>@((item.PartImageName as String))</text>))) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:56:24.880

我会看这里[Action Image MVC3 Razor](https://stackoverflow.com/questions/4896439/action-image-mvc3-razor)

您的操作是否在网格中无关紧要。如有必要，您可以在采用您的特定模型的自定义操作链接周围包裹一个部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-05T03:45:54.340

```
grid.Column("", header: "Acciones", style:"width: 5%", 
                                    format: @<text>
                                                <div class="btn-group">
                                                    <a class="btn btn-small" href='@Url.Action("Editar", "Ruta", new { id = item.RutaID })'><i class="icon-pencil"></i></a>
                                                    <a class="btn btn-small" href='@Url.Action("Detalle", "Ruta", new { id = item.RutaID })'><i class="icon-eye-open"></i></a>
                                                    <a class="btn btn-small" href='@Url.Action("Borrar", "Ruta", new { id = item.RutaID })'><i class="icon-trash"></i></a>                                                                            
                                                </div>
                                            </text>) 
```

# wpf - 样式化用户控件

> ID：10351603
> 
> 赞同：0
> 
> 时间：2012-04-27T13:33:32.080
> 
> 标签：wpf, user-controls, styles, custom-controls

下面的 UserControl 效果很好，但我想让更改样式更容易。

我尝试过的一件事是将样式移动到 ResourceDictionary 中的通用按钮样式中，但这会出现错误，如下所示。

我尝试的另一件事是将其转换为自定义控件，但这是[这个问题的主题](https://stackoverflow.com/questions/10351682/converting-a-usercontrol-to-a-custome-control)

目前有几个类似的按钮被定义为 UserControls。有没有推荐的方法来改变他们所有人的风格？

干杯

# 尝试使用其他样式应用样式失败

```
<Style TargetType="{x:Type Button}">
    <Setter Property="Style" Value="{StaticResource blueButtonStyle}"/>
</Style>

Error: Style object is not allowed to affect the style property of the object to which it applies 
```

# 用户控件 XAML

```
<UserControl.Resources>
    <ResourceDictionary Source="pack://application:,,,/Smack.Core.Presentation.Wpf;component/Themes/generic.xaml" />
</UserControl.Resources>

<Button x:Name="_button" Style="{StaticResource blueButtonStyle}" Command="{Binding AddNewItemCommand}"  >
    <StackPanel Orientation="Horizontal" >
        <Image Source="{resx:Resx ResxName=Smack.Core.Presentation.Resources.MasterDetail, Key=bullet_add}" Stretch="Uniform" VerticalAlignment="Center" />
        <AccessText x:Name="_accesText" VerticalAlignment="Center">_Add New Subject</AccessText>
        <ContentPresenter/>
    </StackPanel>
</Button> 
```

# 用户控制代码背后

```
public partial class AddNewItemButton : UserControl
{
    public AddNewItemButton() { InitializeComponent(); }

    public static readonly DependencyProperty SubjectProperty = DependencyProperty.Register(
        "Subject", typeof (string), typeof (AddNewItemButton),
        new FrameworkPropertyMetadata(OnSubjectChanged));

    public string Subject { get { return (string) GetValue(SubjectProperty); } set { SetValue(SubjectProperty, value); } }

    private static void OnSubjectChanged(DependencyObject obj, DependencyPropertyChangedEventArgs args) {
        var control = obj as AddNewItemButton;
        if (control == null) return;

        control._accesText.Text = "_" + string.Format(MasterDetail.Subject_AddNew_Label, control.Subject.Capitalize());

        control._button.ToolTip = string.Format(MasterDetail.Subject_AddNew_ToolTip, control.Subject.ToLower());
    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T13:38:07.270

使用第一种方法可能会有更好的运气：

```
<Style TargetType="{x:Type Button}">
    <Setter Property="Style" Value="{StaticResource blueButtonStyle}"/>
</Style> 
```

从样式中设置样式会出错，这是可以理解的。相反，您可以使用“BasedOn”属性强制您的“默认”样式从您想要的样式继承；

```
<Style TargetType="{x:Type Button}" BasedOn="{StaticResource blueButtonStyle}">
    <!-- Nothing Here --> 
</Style> 
```

那应该做你想做的；也就是说，如果我正确理解了您的问题（老实说，这似乎有点不清楚）。

附带说明一下，没有任何理由为此按钮使用自定义用户控件。这一切都可以通过常规按钮完成，使用 WPF 的核心工具（如 Bindings 和 Converters）在按钮内容和工具提示中显示动态变化的文本。

# sql - 在sql中只获取字母数字行？

> ID：10351605
> 
> 赞同：2
> 
> 时间：2012-04-27T13:33:40.463
> 
> 标签：sql, sql-server, sql-server-2008

我有数据列

```
CLARK
KING
MILLER
SMITH, $800 .00
JONES, $2975.00
SCOTT, $3000.00
ADAMS, $1100.00
FORD, $3000.00
ALLEN30  
WARD30  
MARTIN30  
BLAKE30  
TURNER30  
JAMES30 
```

我只想要字母数字行意味着

```
SMITH, $800 .00
JONES, $2975.00
SCOTT, $3000.00
ADAMS, $1100.00
FORD, $3000.00 
```

除了这一行，所有行都应该包括在内？

我怎样才能得到这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T13:41:30.110

你可以使用[`PATINDEX`](http://msdn.microsoft.com/en-us/library/ms188395.aspx)：

```
DECLARE @test table(col varchar(30));
INSERT INTO @test
   SELECT * FROM (SELECT 'CLARK' UNION ALL SELECT 'KING' UNION ALL SELECT 'MILLER' UNION ALL SELECT 'SMITH, $800 .00' UNION ALL SELECT 'JONES, $2975.00' UNION ALL SELECT 'SCOTT, $3000.00' UNION ALL SELECT 'ADAMS, $1100.00' UNION ALL SELECT 'FORD, $3000.00' UNION ALL SELECT 'ALLEN30' UNION ALL SELECT 'WARD30' UNION ALL SELECT 'MARTIN30' UNION ALL SELECT 'BLAKE30' UNION ALL SELECT 'TURNER30' UNION ALL SELECT 'JAMES30')AS T(Spalte) 
```

`Patindex`返回指定表达式中模式第一次出现的起始位置。由于我使用了匹配任何非字母数字（[^ 通配符 - 字符](http://msdn.microsoft.com/en-us/library/ms188342.aspx)）的模式，因此仅返回仅包含字母数字字符（+空格）的记录：

```
SELECT col 
FROM   @test
WHERE  PATINDEX('%[^a-zA-Z0-9 ]%',col) = 0 
```

结果：

```
CLARK
KING
MILLER
ALLEN30
WARD30
MARTIN30
BLAKE30
TURNER30
JAMES30 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T13:38:15.803

```
select * from your_table
where len((replace(your_col, '$', '')) != len(your_col) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T13:40:20.810

好吧，您的部分问题是表设计很差 - 列应该是原子的并且只包含一种类型的项目。如果数字在单独的列中（正确的设计），您可以使用多种技术来返回填充了数字的行（例如，WHERE NOT NULL，作为一个简单的示例）。

在您的情况下，假设您不想更改表设计，您可以使用 LIKE 子句查找列包含“$”的行。虽然这是非常低效的，我建议它而不认可它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T13:43:21.723

您可以使用类似于以下的 case 语句：

```
SELECT colname = CASE CaseName
    WHEN '%$%' THEN colname
    END
FROM tablename 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T13:44:37.570

我认为表结构可以提高速度，但鉴于我们所拥有的......

```
Select * from [table]
where [column] like '%$%' 
```

还是你想要没有'$'的行？

```
Select * from [table]
where [column] not like '%$%' 
```

这当然是假设您只想要带有美元符号的行。

如果你有这样的东西：

```
[Name] [Dollars]
SMITH   800.00 
```

然后你可以这样查询：

```
Select [Name], [Dollars]
From [table]
Where [Dollars] is not null 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-27T13:45:44.633

```
select col
from tab
where PATINDEX('%[^a-z0-9]%',col)=0 
```

# intellij-idea - PhpStorm 中的自动换行

> ID：10351608
> 
> 赞同：221
> 
> 时间：2012-04-27T13:33:53.853
> 
> 标签：intellij-idea, pycharm, phpstorm, webstorm, jetbrains-ide

如何在 PhpStorm 中启用*自动*换行？

我只需要为我的一些文件（扩展名为 .txt）启用它。是否可以？

* * *

## 回答 #1

> 赞同：439
> 
> 时间：2012-04-27T14:05:47.190

**对于所有文件**（打开文件的默认设置）：*Settings/Preferences* → *Editor* → *General* → *Use soft wraps in editor*。您现在可以指定默认启用此选项的文件名/扩展名：

[![在此处输入图像描述](../Images/f2f1aab1457e6650101e80ba293781c4.png)](https://i.stack.imgur.com/kk723.png)

* * *

**对于编辑器中当前打开的文件**：菜单→*查看*→*活动编辑器*→*使用软包装* *（注意：我为此分配了自定义`Ctrl`++快捷方式`Alt`）`R`*

[![在此处输入图像描述](../Images/4005ef551d0d28b7358bee4f64c2fa6a.png)](https://i.stack.imgur.com/OfbHP.png)

很长一段时间（自 v2016 左右以来），您还可以通过编辑器装订线区域（编辑器左侧带有行号的区域）的上下文菜单访问此选项：

[![在此处输入图像描述](../Images/6fe71bfa3b70d1d3c4a0790b86e5066e.png)](https://i.stack.imgur.com/UViKn.png)

*（注意：我已经对这个菜单进行了相当多的自定义；默认情况下，这里的项目要少得多）*

* * *

*Search*`Shift 2x times` Everywhere （*_* _ *_* _ `Ctrl`_ `Shift`_ `A`_ *_* _

[![在此处输入图像描述](../Images/298251362e300cf4d3f0194584721adc.png)](https://i.stack.imgur.com/oDkSW.png)

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2015-10-05T19:45:49.730

您必须启用软包装。通过此路径找到该选项。

菜单*视图*→*活动编辑器*→*使用软包装*

[![在 PhpStorm 中换行](../Images/06e07d10093a200d3d79d5eb4ea3847d.png)](https://i.stack.imgur.com/waEox.jpg)

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2017-05-01T18:41:50.587

*右键单击*行号区域并选择：

*Soft-Wrap All Files*或*Soft-Wrap Current File*，即：

[![在此处输入图像描述](../Images/ed653cdf22c51e45e65fd23802660873.png)](https://i.stack.imgur.com/4sITy.jpg)

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-10-25T15:01:50.987

*   菜单*文件*→*设置*→*编辑器*→*在编辑器中使用软包装*：默认情况下为所有文件打开它们。

*   菜单*文件*→*设置*→*代码样式*→*常规*→*输入到右边距时换行*

    ..但那是不同的（它会换行）。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2013-08-22T14:30:09.857

除了**Settings** -> **Editor** -> **Use soft wraps in editor**我推荐**Use soft wraps in console**和**Use custom soft wraps indent**设置为**4**以使换行缩进以匹配它们开始的行。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2019-07-16T12:30:06.180

在 PhpStorm 2019.1.3 中，只能为某些文件类型启用软包装。

[![在此处输入图像描述](../Images/5b61a1513e5d55fd4b291887dedf63d6.png)](https://i.stack.imgur.com/pk3sd.jpg)

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2019-08-28T09:47:35.950

在 PhpStorm 2019.1.3 中，您应该添加要进行软包装的文件类型。

转到*Settings* → *Editor* → *General* → *Soft-wrap files*，然后添加您想要的任何类型：

[![在此处输入图像描述](../Images/0adfa8b430ce9e79b08916925e141042.png)](https://i.stack.imgur.com/P3a8C.png)

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2015-01-06T20:02:31.803

您可能还想考虑[Wrap to Column](https://github.com/abrookins/WrapToColumn)插件，它在 Emacs 和Vim中实现了`Alt`+的等效功能。这可能比编辑器包裹的很长的行更可取。`Q``gq`

可以通过搜索*Wrap to Column从任何基于*[IntelliJ IDEA](https://en.wikipedia.org/wiki/IntelliJ_IDEA)的 IDE安装此插件。

 *它还有一个额外的好处，您可以选择仅包装您想要的文本部分:-)

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2019-10-08T11:57:13.533

如果使用 PhpStorm 2019 及更高版本

[![PhpStorm 自动换行设置截图](../Images/f47a3dbeec1438280bc351557c15ec80.png)](https://imgyukle.com/i/screenshot-1.ECpKnj)

菜单*文件*→*设置*→*编辑器*→*常规*。

“软包装”标题下有“软包装文件”输入。

> *.md; *。文本文件; *.rst; *.adoc;*

将文件类型添加到您希望在其中使用它们的文件的此字段中。

> *.md; *。文本文件; *.rs; *.adoc;* .php;* .js

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-08-10T03:19:29.890

网络风暴 10.0.4

默认情况下包装文本/代码行，但适用于所有类型的文件：菜单*文件*→*设置*→*编辑器*→*常规*→部分*“软包装”* →复选框*“在编辑器中使用软包装”*。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-08-19T17:05:16.770

对于PhpStorm *2019.1.3*中的自动换行，只需按照以下步骤操作：

从顶部导航菜单：

*查看*→*活动编辑器*→*软包装*

就是这么简单。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-03-08T15:53:09.203

我想软包装 .php 文件。把它放在允许的列表中仍然不起作用。（有关屏幕截图，请参阅*[Mohammed Zayan 的回答](https://stackoverflow.com/questions/10351608/word-wrapping-in-phpstorm/57689518#57689518)*。）

我进入`*.*`那里，允许所有文件（我很好）并且软包装工作正常。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2018-03-10T05:50:46.837

对于PhpStorm中的自动*换行：*

1.  从菜单中选择*文件*
2.  从文件中选择*设置*
3.  从设置中，选择*编辑器*
4.  从*编辑器*中选择*常规*
**   通常，选中软包装*部分的**在编辑器中使用*软包装**

# iphone - 通过应用程序加载器上传应用程序时出错

> ID：10351612
> 
> 赞同：1
> 
> 时间：2012-04-27T13:34:08.157
> 
> 标签：iphone, ios

当我们尝试将 (APP.zip) 中的最新应用程序上传到应用程序加载器中时，我们收到以下错误。

```
Apple's web service operation was not succeccful
Unable to authenticate the package: AppId.itmsp
ERROR ITMS-7002: "Caught exception validating "MZItmspRootPackage.validateLanguageCodeExists"" at (MZItmspRootPackage) 
```

我们创建了一个启用了推送通知的分发证书。这可能会导致该错误，我们进行了很多搜索，但没有找到解决此问题的正确方法。我们可能会导致这个错误，我们如何避免它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:36:45.967

你应该直接从 xcode 做，离开应用程序加载器 - 它不如 xcode

这里是如何做到这一点：http: [//developer.apple.com/library/mac/#documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/DistApps/DistApps.html](http://developer.apple.com/library/mac/#documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/DistApps/DistApps.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T20:36:59.970

升级你的操作系统，升级你的 Xcode。在低于最新版本的 Mac OS 上为 iPhone 开发几乎是不可能的。

# ios - 无法使用 'symbolicatecrash' 命令符号化崩溃日志，但是 atos 可以工作

> ID：10351618
> 
> 赞同：1
> 
> 时间：2012-04-27T13:34:44.847
> 
> 标签：ios, macos, crash, symbolicatecrash

我想在 mac 上符号化崩溃日志，但 symbolicatecrash 每次都向我显示相同的崩溃日志。我试过以下的东西

1) 确保 .app、.dSym 和崩溃日志都位于同一个文件夹中。

2) 还确保使用此命令 mdfind 'com_apple_xcode_dsym_uuids = *

3) 确保符号文件的 uuid 和崩溃日志匹配。

当我运行 atos 命令时，我能够获取符号信息，但仍然 symbolicacatecrsh 无法对其进行符号化

```
atos -arch i386 -o test 0x00002ddb
test crashHit:] (in test) (testViewController.m:43)

symbolicatecrash -A -v test.crash test 
```

此崩溃日志是由在模拟器而非设备上运行的应用程序生成的。它可以产生任何差异吗？

输出： - otool 路径是 'xcrun -sdk iphoneos otool' atos 路径是 'xcrun -sdk iphoneos atos' 符号化...读取了 27445 个字符。在 /usr/bin/symbolicatecrash 第 500 行的正则表达式编译中使用未初始化的值 $pat。在 /usr/bin/symbolicatecrash 第 509 行的 lc 中使用未初始化的值 $image{"uuid"}。在哈希中使用未初始化的值 $bundlename /usr/bin/symbolicatecrash 第 517 行的元素。在 /usr/bin/symbolicatecrash 第 535 行的哈希元素中使用未初始化的值 $bundlename。…… ……

在 /usr/bin/symbolicatecrash 第 887 行的哈希元素中使用未初始化的值 $first_bundle。在 /usr/bin/symbolicatecrash 第 887 行的匿名哈希 ({}) 中使用未初始化的值 $first_bundle。引用了 1 个二进制图像：（使用/usr/bin/symbolicatecrash 第 894 行的打印中未初始化的值。）

操作系统版本 10.7.3 Build 11D50b 修剪后保留 0 个二进制图像：

符号目录路径：
符号目录路径：/Developer/Platforms/iPhoneOS.platform/DeviceSupport/3.0.1/Symbols /Developer/Platforms/iPhoneOS.platform/DeviceSupport/3.0/Symbols /Developer/Platforms/iPhoneOS.platform/DeviceSupport/3.1.1/Symbols /Developer/Platforms/iPhoneOS.platform/DeviceSupport/3.1.2/Symbols /Developer/Platforms/iPhoneOS.platform/DeviceSupport/3.1.3/Symbols /Developer/Platforms/iPhoneOS.platform/DeviceSupport/3.1/Symbols /Developer/Platforms /iPhoneOS.platform/DeviceSupport/3.2.1/Symbols /Developer/Platforms/iPhoneOS.platform/DeviceSupport/3.2.2/Symbols /Developer/Platforms/iPhoneOS.platform/DeviceSupport/3.2/Symbols /Developer/Platforms/iPhoneOS.platform /DeviceSupport/4.0.1/Symbols /Developer/Platforms/iPhoneOS.platform/DeviceSupport/4.0.2/Symbols /Developer/Platforms/iPhoneOS.platform/DeviceSupport/4.0/Symbols /Developer/Platforms/iPhoneOS。platform/DeviceSupport/4.1/Symbols/Developer/Platforms/iPhoneOS.platform/DeviceSupport/4.2/Symbols/Developer/Platforms/iPhoneOS.platform/DeviceSupport/4.3/Symbols/Developer/Platforms/iPhoneOS.platform/DeviceSupport/5.0.1（ 9A405)/Symbols /Developer/Platforms/iPhoneOS.platform/DeviceSupport/5.1 (9B176)/Symbols /Developer/Platforms/iPhoneOS.platform/DeviceSupport/Latest/Symbols 未找到 10.7.3 (11D50b) 的符号目录路径：3（11D50b）：3（11D50b）：
寻找符号：完成。找到 0 个二进制图像。进程：CrittercismExample [2250] 路径：/Users/USER/Library/Application Support/iPhone Simulator/*/CrittercismExample.app/CrittercismExample 标识符：CrittercismExample 版本：??? (???) 代码类型：X86 (Native) 父进程：launchd [118]

日期/时间：2012-04-27 02:27:47.003 -0700 操作系统版本：Mac OS X 10.7.3 (11D50b) 报告版本：9

崩溃的线程：0 调度队列：com.apple.main-thread

异常类型：EXC_CRASH (SIGABRT) 异常代码：0x0000000000000000, 0x0000000000000000

应用程序特定信息：iPhone Simulator 238.2、iPhone OS 4.3.2 (iPhone/8H7) iPhone Simulator 238.2、iPhone OS 4.3.2 (iPhone/8H7)

中止（）调用

# eclipse - 在 Eclipse 中，如何将 Control-N 绑定到“向下”，如箭头键、任何窗口？

> ID：10351619
> 
> 赞同：0
> 
> 时间：2012-04-27T13:34:46.633
> 
> 标签：eclipse, keyboard-shortcuts

我将 Control-N 和 Control-P 绑定到“Line Down”和“Line Up”命令，所以当我编辑文本时，我可以上下移动而无需将手从打字位置移开。但令我烦恼的是，许多其他对话框或小弹出窗口都需要我使用鼠标或箭头键。例如，当我运行“快速切换编辑器”（Command-E）或“打开资源”（Command-Shift-R）时，我会在弹出窗口中获得文件列表。是否有绑定命令或其他方式来使用 Control-N、Control-P 在这些列表中上下移动所选项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T22:10:39.803

听起来您想要做的超出了标准的 Eclipse 开箱即用功能。让食物链更上一层楼，让操作系统为你做键映射怎么样？

假设您正在运行窗口，请尝试使用**[SharpKeys](http://www.randyrants.com/sharpkeys/)**

这是一个简短 **[的关键键如何在如何极客](http://www.howtogeek.com/howto/windows-vista/map-any-key-to-any-key-on-windows-xp-vista/)**

# openal - 我如何使用 AvCaptureSession 和 OpenAL 或其他服务来播放声音

> ID：10351621
> 
> 赞同：1
> 
> 时间：2012-04-27T13:34:58.887
> 
> 标签：openal, iso, avcapturesession, audioqueueservices

我喜欢实现语音聊天，我首先使用 CaptureSession 捕获音频，当我尝试播放音频时，我遇到了一些问题。

使用 OpenAL，我无法获得声音，数据已附加到缓冲区中但没有声音输出，但 captureSession 没有运行，OpenAL 与文件一起工作很有趣。

使用音频队列服务和 AUGraph，声音可以输出，但它会停止 captureSession 播放一个声音。

所以，我认为使用 captureSession 和 OpenAL 进出音频设备是一个问题......

有人知道我如何与 AVCaptureSession 和 OpenAL 一起使用或其他服务在 AVCaptureSession 运行时播放声音数据？？？？

# c# - Metro 应用程序 - 顶部栏菜单

> ID：10351625
> 
> 赞同：0
> 
> 时间：2012-04-27T13:35:13.243
> 
> 标签：c#, windows-runtime, winrt-xaml, appbar

我正在 Windows 8 上用 C# 开发 Metro 应用程序。我添加了一个顶栏，我想在用户单击其上的按钮时显示一个菜单。

例如，当您单击 Internet Explorer 应用程序中的工具按钮时，会显示一个菜单。怎么做 ？使用哪个控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T14:16:23.640

您可以使用弹出窗口。您可以查看 Silverlight Toolkit for ContextMenu 示例。

# iphone - 返回从 Safari 保存到主屏幕的 webapp

> ID：10351627
> 
> 赞同：0
> 
> 时间：2012-04-27T13:35:14.183
> 
> 标签：iphone, ios, sencha-touch, sencha-touch-2, iphone-standalone-web-app

我正在使用 sencha touch 2 构建应用程序。基本上，当您单击链接时，它会打开 Safari 并加载 URL。从那个页面，我想知道如何返回我保存在主屏幕上的 web 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:32:10.353

您可以做到这一点的唯一方法是控制在 safari 中显示的网页，因为您必须在网页上有一个链接，其中包含您的应用程序的 url。如果您可以控制将在 Safari 中打开的网页，那么这是一项简单的任务。只需为您的应用设置一个 URL 架构，然后在网页上放置一个链接，其中包含打开您的应用的 url。有很多为您的应用创建 URL 架构的示例，只有 google 用于 iOS 的 URL 架构。

就像在 Xcode 中进行一些设置一样简单，然后在网页上添加一个链接以打开应用程序之类的`myApp://optional/paths?queryStrings=arePossibleToo&youShould=checkItOut`

希望有帮助...

编辑：

Sencha Touch 提供了一个名为“Native Packaging”的功能，它将您的 HTML5 应用程序“包装”到原生 iOS 包装器中。您必须使用此功能来利用 URL 架构支持。Android 也有类似的功能，但除了这两个之外，您可能无法在操作系统上实现您想要的功能（因为 Sencha Touch 仅提供 iOS 和 android 的原生包装器......）

# javascript - 两个单独表格上的 Td 高度

> ID：10351628
> 
> 赞同：7
> 
> 时间：2012-04-27T13:35:24.997
> 
> 标签：javascript, jquery, html, css

我有两个单独的表，我在每个 tr 上使用 focus+hover 函数同时在两个表上都很好用，我的问题是 td 高度，因为如果第一个表中的 td 描述更大，将显示在两行相同的 td 和 td 的高度将被修改，但仅限于第一个表 td。如何记住第一个表中 td 的高度并将其添加到第二个表中的 td 以使两个 td 大小相同。在我的示例中，由于第一个表 td 的描述，仅前两个 tr 显示正常，其他两个显示不正常。

小提琴示例：http: [//jsfiddle.net/Ksb2W/45/](http://jsfiddle.net/Ksb2W/45/)

```
 for bounty  please check this example to see the difference on chrome and ie8: 
```

[http://mainpage.ueuo.com/](http://mainpage.ueuo.com/)

谢谢你。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-27T13:42:01.333

如果我对您的理解正确，您希望两个表的每一行中的高度相同吗？

如果是这样，这应该工作：

```
$("table:first tr").each(function(i) {
    $("table:last tr").eq(i).height($(this).height());
}); 
```

显然`:first`and`:last`选择器的使用并不理想，你应该将那些修改为`id`选择器。

[**示例小提琴**](http://jsfiddle.net/Ksb2W/49/)

* * *

**更新**

您在赏金中提到的问题的解决方案是因为`td`没有考虑元素的边界。

检查当前行时替换`height()`为，它应该可以正常工作：`outerHeight()`

```
$("table:first tr").each(function(i) {
    $("table:last tr").eq(i).height($(this).outerHeight());
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T13:40:23.580

获取所有元素的最大高度，`tr`然后将所有`tr`s 的高度设置为这个高度：

```
// get all heights
var heights = rows.map(function () {
    return $(this).height();
}).get();

// use max to get the max !
var maxHeight = Math.max.apply(null, heights);

// set the height
rows.height(maxHeight); 
```

[工作示例](http://jsfiddle.net/Ksb2W/48/)

（我想我可能误解了你的问题......这会将所有`tr`s 的高度设置为相同的高度）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-27T13:45:10.253

在表格上添加一些 id 并添加这段代码：

```
var rows1 = $("#first tr");
var rows2 = $("#second tr");

rows1.each(function() {
    $(rows2[$(this).index()]).height($(this).height());        
}) 
```

这是工作的jsFiddle：http: [//jsfiddle.net/Ksb2W/51/](http://jsfiddle.net/Ksb2W/51/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-27T13:43:02.243

为了做你想做的事，你可以只有一个表，其中有一个空列，两部分之间没有边框。这样，单元格高度仍将根据内容动态变化，但也会从表格两侧展开行中的所有单元格。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-27T13:46:59.443

这将即时调整行高

```
$(function(){
    var rows = $('.interactive tr');

    rows.click(function () {
        var i = $(this).GetIndex() + 1; // nth-child is 1-based

        rows.removeClass('selectedRow');
        rows.filter(':nth-child(' + i + ')').addClass('selectedRow').height($(this).children('td')[0].offsetHeight);
    });

    rows.hover(function(){
        var i = $(this).GetIndex() + 1;
        rows.filter(':nth-child(' + i + ')').addClass('hoverx').height($(this).children('td')[0].offsetHeight);;
    },function(){         
        rows.removeClass('hoverx');
    });
});

jQuery.fn.GetIndex = function(){
    return $(this).parent().children().index($(this));
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-27T13:57:30.670

好吧，我想我来晚了，您可以在这里看到固定第二张桌子高度的按钮：

[http://jsfiddle.net/Ksb2W/54/](http://jsfiddle.net/Ksb2W/54/)

您可以将该行代码放在您的 document.ready 函数中，它应该可以解决问题：

```
$(function(){
    $('#c').attr('height', $('#b').css('height'));
}); 
```

`<td>`使用此属性修改元素的 CSS 也很重要：

```
box-sizing:        border-box; 
```

这是一个强大的解决方案，它将匹配 table 指定的 2 个表的所有行高`id`。document.ready 函数中的 4 行，无需直接更改 css：

```
$('td').css('box-sizing','border-box');
$('#t2').children().children().each(function(i, value) {
    $(this, ':nth-child(1)').attr('height', $('#t1').children().children(':nth-child(' + parseInt(i + 1) + ')').css('height'));
}); 
```

在这里查看小提琴：http: [//jsfiddle.net/Ksb2W/55/](http://jsfiddle.net/Ksb2W/55/)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-05-08T12:13:43.437

```
 $('#t1 tr').each(function(i) {
    if ($(this).height() > $('#t2 tr:nth-child(' + (i + 1) + ')').height()) 
        $('#t2 tr:nth-child(' + (i + 1) + ')').height($(this).height());
    else if ($(this).height() < $('#t2 tr:nth-child(' + (i + 1) + ')').height()) 
        $(this).height($('#t2 tr:nth-child(' + (i + 1) + ')').height());
}); 
```

将此添加到您的小提琴中，如果其对应值更大，则会调整每一行的大小。在这种情况下，尽管您必须提供表格 ID。就像在这个小提琴中：http: [//jsfiddle.net/Ksb2W/88/](http://jsfiddle.net/Ksb2W/88/)

# tomcat - 在 Tomcat 中运行的 JRuby Rails3 应用程序会话超时

> ID：10351629
> 
> 赞同：0
> 
> 时间：2012-04-27T13:35:28.247
> 
> 标签：tomcat, jruby, jrubyonrails

如果您使用 session_store.rb 中的 :expire_after 在 Rails 中有会话超时

```
AppRails3::Application.config.session_store :cookie_store, 
   key: '_App_Rails3_session', 
   :expire_after => 20.minutes 
```

在 Tomcat 中，您在 web.xml 中设置会话超时。

将使用哪一个？两个都？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T17:21:25.730

第一部分将使 cookie 会话存储过期。

tomcat 将负责 java servlet 会话存储。

所以，答案是两者兼而有之。

# r - 如何从具有原始值的 R data.frame 列绘制分类直方图

> ID：10351630
> 
> 赞同：0
> 
> 时间：2012-04-27T13:35:28.690
> 
> 标签：r, ggplot2

我有一个 data.frame，其中有一列的值范围从 0 到 50.000。我想为此数据创建 5 个类别，以便将其绘制在分类直方图中。

我想要做的是创建一个列，告诉我这个值属于哪个类别以便绘制它。例如，我决定创建以下类别： [1,3] (3,6] (6,12] (12,30] (30,50000]

这可能吗？有更简单的方法吗？我通常使用 ggplot2 库进行绘图。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:44:01.810

见`?cut`。这是一个例子：

```
set.seed(42)
dat <- data.frame(Values = sample.int(50000, size = 100))
## create factor indicating which categoriesy data are in    
grps <- with(dat, cut(Values, breaks = c(1,3,6,12,30,50000))) 
```

这给出了：

```
> head(grps)
[1] (30,5e+04] (30,5e+04] (30,5e+04] (30,5e+04] (30,5e+04] (30,5e+04]
Levels: (1,3] (3,6] (6,12] (12,30] (30,5e+04]
> table(grps)
grps
     (1,3]      (3,6]     (6,12]    (12,30] (30,5e+04] 
         0          0          1          0         99 
```

如果您希望在数据框中使用它，请尝试以下操作：

```
dat2 <- within(dat, Groups <- cut(Values, breaks = c(1,3,6,12,30,50000))) 
```

这导致

```
> head(dat2)
  Values     Groups
1  45741 (30,5e+04]
2  46853 (30,5e+04]
3  14307 (30,5e+04]
4  41520 (30,5e+04]
5  32085 (30,5e+04]
6  25953 (30,5e+04] 
```

如果要为结果因子赋予不同的标签，可以更改结果因子的水平。

# firefox-addon - 在没有 Python 的情况下使用 Firefox 附加组件构建器

> ID：10351637
> 
> 赞同：0
> 
> 时间：2012-04-27T13:35:56.040
> 
> 标签：firefox-addon, firefox-addon-sdk

FF 附加 SDK 安装先决条件之一是具有 Python 路径（2.5 或 2.6 版本）。我不打算使用 Python 来开发附加组件，但我更感兴趣的是使用 JS、Ajax、JQ、PHP 和 SQL（在服务器端）、HTML 和 CSS。我不想使用 Pyhon 代码。是否可以使用 Firefox 插件构建器并在不使用 Python 的情况下创建工具栏？我还需要在我的计算机上安装 Python 吗？一些清理事情的帮助将不胜感激 - 不要犹豫，进入细节。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T21:13:04.527

您需要首先决定：您要使用 Add-on SDK 还是 Add-on Builder？

1.  Add-on SDK 是一个扩展构建框架。您不使用 Python 来编写扩展，但需要 Python 来运行将打包您的扩展的脚本。因此，如果您想直接使用 Add-on SDK，则必须安装 Python。
2.  Add-on Builder 是一个 Web 应用程序，允许您通过 Web 界面创建基于 SDK 的扩展。您不需要 Python 来使用 Add-on Builder，因为在这种情况下，扩展包是在 builder.addons.mozilla.org 服务器上创建的，并且它已经安装了 Python。

我希望这能解决你的困惑......

# java - 在 new 关键字之后省略泛型参数

> ID：10351640
> 
> 赞同：1
> 
> 时间：2012-04-27T13:36:17.583
> 
> 标签：java, generics

两条线有什么区别吗？

```
SomeClassOrInterface<Type1> name = new SomeClass<Type1>();
SomeClassOrInterface<Type1> name = new SomeClass<>(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T13:38:13.143

第二种语法仅在 Java 7 上有效，而前者在 Java 5+ 上有效

# python - 正则表达式检查字符串开头和结尾的空格

> ID：10351644
> 
> 赞同：1
> 
> 时间：2012-04-27T13:36:42.253
> 
> 标签：python, regex

这段代码不应该让字符串的开头和结尾有空格。出于某种原因，我对这段代码有负面结果

```
import re
def is_match(pattern, string):
    return True if len(re.compile(pattern).findall(string)) == 1 else False
print(is_match("[^\s]+[a-zA-Z0-9]+[^\s]+", '1')) 
```

但是，其他字符串工作正常。谁能解释为什么结果为负，甚至提供更好的功能（python 中的新手）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T14:52:17.137

在字符串的开头或结尾检查空格的最简单方法不涉及正则表达式。

```
if test_string != test_string.strip(): 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T15:40:01.950

您正在寻找的正则表达式是`^\s|\s$`：

```
xs = ["no spaces", "  starts", "ends  ", "\t\tboth\n\n", "okay"]

import re
print [x for x in xs if re.search(r'^\s|\s$', x)]

## ['  starts', 'ends  ', '\t\tboth\n\n'] 
```

`^\s.*?\s$`只匹配两端的空格：

```
print [x for x in xs if re.search(r'^\s.*?\s$', x, re.S)]

## ['\t\tboth\n\n'] 
```

一个逆表达式（没有开始结束的空格）是`^\S.*?\S$`：

```
print [x for x in xs if re.search(r'^\S.*?\S$', x, re.S)]

## ['no spaces', 'okay'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T13:53:26.370

```
def is_whiteSpace(string):
    t=' ','\t','\n','\r'
    return string.startswith(t) or string.endswith(t)

print is_whiteSpace(" GO") -> True
print is_whiteSpace("GO") -> False
print is_whiteSpace("GO ") -> True
print is_whiteSpace(" GO ") -> True 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T14:49:36.247

不需要花哨的正则表达式，只需使用更具可读性的方式：

```
>>> def is_whitespace(s):
    from string import whitespace
    return any((s[0] in whitespace, s[-1] in whitespace))

>>> map(is_whitespace, ("foo", "bar ", " baz", "\tspam\n"))
[False, True, True, True] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T13:47:38.330

与其尝试构造一个检测*没有*空格的字符串的正则表达式，不如检查确实有空格的字符串，然后反转代码中的逻辑。

请记住，如果*没有*找到匹配项，则`re.match()`返回`None`（逻辑假值），如果找到匹配项，则返回对象（逻辑真值）。用它来写这样的东西：*`SRE_Match`*

 *```
In [24]: spaces_pattern = re.compile ( r"^(\s.+|.+\s)$" )

In [27]: for s in ["Alpha", " Bravo", "Charlie ", " Delta "]:
   ....:     if spaces_pattern.match(s):
   ....:         print ( "%s had whitespace." % s )
   ....:     else:
   ....:         print ( "%s did not have whitespace." % s )
   ....: 
Alpha did not have whitespace.
 Bravo had whitespace.
Charlie  had whitespace.
 Delta  had whitespace. 
```

请注意使用`^$`锚点来强制匹配整个输入字符串。

* * *

编辑：

这甚至根本不需要正则表达式 - 您只需要检查第一个和最后一个字符：

```
test_strings = ['a', ' b', 'c ', ' d ', 'e f', ' g h', ' i j', ' k l ']
for s in test_strings:
    if s[0] in " \n\r\t":
        print("'%s' started with whitespace." % s)
    elif s[-1] in " \n\r\t":
        print("'%s' ended with whitespace." % s)
    else:
        print("'%s' was whitespace-free." % s) 
```

* * *

编辑2：

应该在任何地方都可以使用的正则表达式：`^\S(.*\S)?`. `\S`如果您的正则表达式方言不包含它，您可能需要提供与 ("anything but whitespace") 的本地等价物。

```
test_strings = ['a', ' b', 'c ', ' d ', 'e f', ' g h', ' i j', ' k l ']
import re

pat = re.compile("^\S(.*\S)?$")

for s in test_strings:
    if pat.match(s):
        print("'%s' had no whitespace." % s)
    else:
        print("'%s' had whitespace." % s) 
```

请注意，这`\S`是 的否定形式`\s`，即`\S`表示“除*空格之外*的任何内容”。

另请注意，长度为 1 的字符串是通过将部分匹配设为可选来计算的。（您可能会考虑使用`\S.*\S`，但这会强制匹配长度至少为 2。）

```
'a' had no whitespace.
' b' had whitespace.
'c ' had whitespace.
' d ' had whitespace.
'e f' had no whitespace.
' g h' had whitespace.
' i j' had whitespace.
' k l ' had whitespace. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-20T06:42:51.127

ch3ka 建议的变体：

```
import string
whitespace = tuple(string.whitespace)

'a '.endswith(whitespace)
## True

'a '.startswith(whitespace)
## False

'a\n'.endswith(whitespace)
## True

'a\t'.endswith(whitespace)
## True 
```

我发现它比正则表达式更容易记住（除了可能转换`whitespace`为元组的位）。*

# python - HttpResponseRedirect 在方法中不起作用

> ID：10351645
> 
> 赞同：0
> 
> 时间：2012-04-27T13:36:44.843
> 
> 标签：python, django

原始代码看起来像这样，它可以工作。

```
def my_index(request):
    global account
    if request.session.get('account',False):
        account=request.session['account']
    else:
        return HttpResponseRedirect("http://login.passport.com/");
    print "login check pass"
    ... 
```

当我尝试将检查线放入方法中时，它出错了。

终端打印 Pos:A 和 Pos:B，但页面没有重定向到 login.passport.com

它继续打印“登录检查通过”

我试过 pdb.set_trace()，它通过 HttpResponseRedirect，但我仍然找不到任何错误。

有人给我一个线索吗？

```
def login_check(request):
    global account
    if request.session.get('account',False):
        account=request.session['account']
    else:
        print "Pos:A"
        return HttpResponseRedirect("http://login.passport.com/");
        print "Pos:B"

def my_index(request):
    global account
    login_check(request)
    print "login check pass"
    ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:54:53.220

您不会对`login_check`within的结果做任何事情`my_index`。你也需要从那里归还它。

另外两点：`print Pos:B`永远达不到；更严重的是，你*永远不*应该使用全局变量在 Django 中存储每个请求的状态。一个过程可能会持续许多请求，因此将仅与单个请求中的信息相关的变量保留是危险的。

# django - 简单的 django：这段代码有什么问题？

> ID：10351651
> 
> 赞同：0
> 
> 时间：2012-04-27T13:37:03.050
> 
> 标签：django

我有这个代码：

```
<li><a href="{% url 'django.contrib.auth.views.logout' %}">Logout</a></li>
<li><a href="{% url 'django.contrib.auth.views.account' %}">Account</a></li> 
```

当我运行它时，我得到一个关于它是如何乱码的错误。错误并没有说，当然，它说：

> 渲染时捕获 NoReverseMatch：“django.contrib.auth.views.account”的反向参数“（）”和关键字参数“{}”未找到。

这仅适用于“帐户”选项，“注销”选项本身可以正常工作。自然地，我搜索了错误，这是关于“帐户”在任何地方都不存在的问题 - 但我对 django 非常陌生，不知道如何修复！

所以，假设我想让上面的那一行工作——工作是指作为某个页面的链接出现（当然，这并不重要，但它会显示用户的详细信息~用户名，更改选项密码等）我需要做什么？

我的 urls.py 中需要一些东西吗？我的表格中有什么东西？

更新好的，所以鉴于 {% url 'django.contrib.auth.views.XYZ' %} 指向名为 XYZ 的视图​​类的成员，如果我想添加一个“帐户”页面，我会子类化吗视图类并在其中添加功能？还是我只是添加一个新视图（'/accounts/'）并以这种方式添加视图内容？

干杯！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:49:22.590

该函数/视图 ( `account`) 不存在。看一下代码：

[https://github.com/django/django/blob/master/django/contrib/auth/views.py](https://github.com/django/django/blob/master/django/contrib/auth/views.py)

当然，不存在的观点是无法逆转的。你想做什么？

**回答您在评论中提出的问题（顺便说一句，这是另一个问题）**

您应该创建自己的视图。Django 中的视图是函数，所以你不能“子类化”它们。你可以重复使用和组合。

我将向您展示如何操作，但最好将您指向正确的位置。从 django 教程开始：

[https://docs.djangoproject.com/en/1.4/intro/tutorial01/](https://docs.djangoproject.com/en/1.4/intro/tutorial01/)

一个小时后，您将了解整个过程。

As a final note, you can find third party applications that handle user accounts data, you could take a look at [Pinax](http://pinaxproject.com), but I recommend you to do it by yourself. You'll learn a lot in the process.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T13:43:58.500

您需要阅读有关 URL 如何在 Django 中工作的文档：[https ://docs.djangoproject.com/en/1.4/topics/http/urls/](https://docs.djangoproject.com/en/1.4/topics/http/urls/)

# xcode - XCode 'Clean' 实际上是做什么的？

> ID：10351655
> 
> 赞同：36
> 
> 时间：2012-04-27T13:37:15.593
> 
> 标签：xcode

我总是选择在将项目归档到我的 XCode 项目之前“清理”我的项目，但我实际上并不知道它的作用。

我搜索了互联网，也找不到答案。

如果有人知道你可以在这里发布吗？

谢谢大家

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-27T13:48:30.010

来自[Xcode 词汇表](https://developer.apple.com/library/archive/referencelibrary/GettingStarted/DevelopiOSAppsSwift/GlossaryDefinitions.html)：

“ **clean**：删除所有产品文件，以及在构建过程中创建的任何目标文件（.o 文件）或其他中间文件。”

# javascript - JavaScript：获取自定义按钮的文本值

> ID：10351658
> 
> 赞同：27
> 
> 时间：2012-04-27T13:37:23.893
> 
> 标签：javascript, html

我有一个定义如下的按钮：

```
<button type="button" id="ext-gen26" class=" x-btn-text">button text here</button> 
```

我正在尝试根据文本值来获取它。然而，它的所有属性都不包含文本值。从外观上看，它是以一种非常自定义的方式生成的。

除了浏览 HTML 文本之外，有谁知道以编程方式找到这个值的方法？除了属性？

忘了另一件事，此按钮的 id 会定期更改，并且使用 jQuery 抓取它会导致由于某种原因导致页面中断。如果你需要任何关于我为什么需要这个的背景，请告诉我。

这是我试图抓住它的JavaScript：

```
var all = document.getElementsByTagName('*'); 
for (var i=0, max=all.length; i < max; i++) 
{
var elem = all[i];
if(elem.getAttribute("id") == 'ext-gen26'){
    if(elem.attributes != null){
        for (var x = 0; x < elem.attributes.length; x++) {
            var attrib = elem.attributes[x];
            alert(attrib.name + " = " + attrib.value);  
        }
    }
}
}; 
```

它只返回代码中定义的三个属性。

`innerHTML`, `text`, 和`textContent`- 都返回为`null`.

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-27T13:39:18.450

您可以通过`textContent`/`innerText`属性（取决于浏览器）来做到这一点。这是一个无论浏览器使用哪个属性都可以工作的示例：

```
var elem = document.getElementById('ext-gen26');
var txt = elem.textContent || elem.innerText;
alert(txt); 
```

[http://jsfiddle.net/ThiefMaster/EcMRT/](http://jsfiddle.net/ThiefMaster/EcMRT/)

你也可以使用 jQuery 来做到这一点：

```
alert($('#ext-gen26').text()); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-27T15:42:48.000

如果您试图完全通过其文本内容来定位按钮，我会获取所有按钮的列表并遍历它们以找到这个：

```
function findButtonbyTextContent(text) {
  var buttons = document.querySelectorAll('button');
  for (var i=0, l=buttons.length; i<l; i++) {
    if (buttons[i].firstChild.nodeValue == text)
      return buttons[i];
  }  
} 
```

当然，如果这个按钮的内容有一点改变，你的代码也需要更新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-29T11:17:31.513

一个用于根据其文本查找按钮的衬垫。

```
const findButtonByText = text => 
  [...document.querySelectorAll('button')]
    .find(btn => btn.textContent.includes(text)) 
```

# android - Linux Eclipse Android 项目中缺少 R.java

> ID：10351659
> 
> 赞同：0
> 
> 时间：2012-04-27T13:37:30.730
> 
> 标签：android, linux, eclipse

我在 Linux 11.10 中使用 Android SDK 4.0.3 和 Google API 运行 Eclipse Indigo。但是，当我启动一个新的 Android 项目时，找不到我的 R.java，因此导致以下问题：

```
package com.lol.asdf;

import android.app.Activity;
import android.os.Bundle;

public class AsdfActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

[我已经尝试了此页面](https://stackoverflow.com/questions/885009/r-cannot-be-resolved-android-error)上的所有建议，但这并不好。

有人有想法么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T13:38:48.477

您的 R.java 是 res/ 文件夹中自动生成的类。检查里面是否有错误。尝试清理并重建您的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T13:44:03.883

R.java 将自动生成...首先解决您将创建的项目的**所有其他错误...**

# php - 使用 mssql_connect 连接到另一台服务器中的数据库

> ID：10351661
> 
> 赞同：0
> 
> 时间：2012-04-27T13:37:44.330
> 
> 标签：php, sql-server-2008

我们正在使用以下脚本。

实际上我们的数据库在一个服务器中（比如 www.server1.com）和 PHP 文件

包含以下连接字符串在另一台服务器中（比如

www.server2.com)

如果我们将包含以下脚本的 PHP 文件放在同一台服务器中

数据库存在的地方是 www.server1.com/dbconnection.php 它正在工作

美好的。

但是如果我们将包含以下脚本的 PHP 文件放在另一台服务器上

www.server2.com/dbconnection.php 它不工作。这显示

错误“连接到 MSSQL 时出现问题”请告知。

如果我们使用 'die('MSSQL error: ' 也可以处理错误。

mssql_get_last_message());' nothing 只显示一个空页面。

请告知如何处理错误。

## 脚本 (dbconnection.php)

```
$server = 'xxx.xxx.xxx.x,xxxx'; //IP, Port

// Connect to MSSQL
$link = mssql_connect($server, 'username', 'password');

if (!$link) {
die('Something went wrong while connecting to MSSQL');
}

// Connect to DB
$db=mssql_select_db("databasename",$link) or die("Unable to select 

database "); 
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T17:35:43.737

如何获取错误消息，我不知道，但如果您将 PHP 应用程序从 windows 服务器迁移到 linux（FTP 服务器在 linux 上更常见），您可以尝试更改：

```
$server = 'xxx.xxx.xxx.x,xxxx'; //IP, Port 
```

至

```
$server = 'xxx.xxx.xxx.x:xxxx'; //IP: Port 
```

如手册第一个参数所述：[http ://www.php.net/manual/en/function.mssql-connect.php](http://www.php.net/manual/en/function.mssql-connect.php)

# iphone - iphone上图片的路径

> ID：10351669
> 
> 赞同：0
> 
> 时间：2012-04-27T13:38:21.450
> 
> 标签：iphone, ios

我不是很新，但仍有一些菜鸟问题，这是其中之一。

我需要一条通往我的测试 iPhone 上的相机胶卷中准备好的一张照片的路径。我如何获取/找到这个，而不是以编程方式。我想对其进行硬编码以测试文件上传，以便解决问题。

所以

```
filePath:@"/private/var/mobile/Applications/14C39895-E73B-400F-8158-F1F5047A826C/tmp/upload.jpg" 
```

应该是什么：

```
filePath:@"fill in this spot" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:22:25.313

您不能直接访问照片（除非您的应用程序将它们写入 docs 文件夹开始 - 在这种情况下您会知道路径）。您需要实现 UIImagePicker 以从相册中选择照片。然后 UIImagePicker 代表将有权访问照片，您可以在其中做任何您想做的事情（包括将其副本写入文档）。在照片被选中一次并写入文档后，您可以在以后执行应用程序的文档中访问它。

UIImagePicker 委托应实现：

```
-(void) imagePickerController:(UIImagePickerController *) picker didFinishPickingMediaWithInfo:(NSDictionary *) info {
    UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];
} 
```

然后您可以在该委托方法中将图像写入您的应用程序文档文件夹，如下所示：

[http://blog.objectgraph.com/index.php/2010/04/05/download-an-image-and-save-it-as-png-or-jpeg-in-iphone-sdk/](http://blog.objectgraph.com/index.php/2010/04/05/download-an-image-and-save-it-as-png-or-jpeg-in-iphone-sdk/)

那时，您始终可以访问您的应用程序文档文件夹中的照片以进行上传测试...无论如何，您可能都需要为您的应用程序实现 UIImagePicker，因此与其寻找测试照片，不如从照片中选择可能更容易专辑使用 UIImagePicker 并直接上传（从 docs 文件夹中删除整个写入/读取）。

希望有帮助！

# google-app-engine - appengine 是否有指向最新部署的应用程序的指针

> ID：10351676
> 
> 赞同：0
> 
> 时间：2012-04-27T13:39:00.530
> 
> 标签：google-app-engine

我想针对我的 RESTful appengine 应用程序测试我的胖客户端。我会定期增加 appengine 的版本号，所以我需要不断更新我的测试配置。有没有相当于`http://latest.application.appspot.com`我也可以指出我的配置的东西？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T14:32:22.493

绕过你的问题，但在我的脑海中，我已经不再考虑典型软件发布版本中的“版本”（就像你一样，我开始思考），而是“使用相同数据存储的不同应用程序” .

我发现软件发布版本（1.0、1.1、1.2 等）没有多大意义，因为 1）我不倾向于使用旧版本 2）我的主要用途是回归测试，但这不起作用好吧，因为在 v1.1 中更改模型很可能会破坏 v1.0 中的代码。

版本功能具有不同的功能版本。例如，可能默认的 application.appspot.com 运行生产级代码，但 debug.application.appspot.com 启用了更多日志记录。也许第三个版本启用了管理员功能等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T14:31:17.677

您可能正在寻找的是`CURRENT_VERSION_ID`环境变量。它将部署修订存储为点分隔的字符串：`version_name.deployment_revision`，例如`staging.12345678910111213141516`。您可以直接在配置中使用它：

```
import os
API_VERSION = os.environ['CURRENT_VERSION_ID'].split('.')[1] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T04:16:07.987

不，没有办法做到这一点。版本没有顺序 - 它们都是完全不同的部署，只有其中一个被设置为默认值。

# proxy - 是否使用代理为我们在美国的用户获得最快的速度

> ID：10351677
> 
> 赞同：0
> 
> 时间：2012-04-27T13:39:06.420
> 
> 标签：proxy

我们在英国托管了应用程序，在美国也有很多用户。我们无法将我们的服务器复制到美国（具有硬复制的大型数据库），但我想知道您对此解决方案的看法：来自美国的用户访问我们在美国托管的代理服务器，而他在后台将与我们在英国的服务器交谈。

我会从这个动作中获得高速还是我只会对用户执行另一个动作？如果我不会从这一举动中获得较慢的速度，我认为美国用户会看到美国 IP 地址会很棒，您对此有何看法？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:42:57.583

如果美国代理充当反向代理（缓存一些信息），您的用户肯定会从中受益。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T13:42:03.503

如果该代理可以大量使用缓存（即不需要海外网络访问），那么代理确实会缩短加载时间。

# c# - 将用户控件转换为自定义控件

> ID：10351682
> 
> 赞同：3
> 
> 时间：2012-04-27T13:39:28.737
> 
> 标签：c#, .net, wpf, user-controls, custom-controls

下面的 UserControl 效果很好，但我想让更改样式更容易。

我尝试过的一件事是将其转换为自定义控件，但我被困在基础知识上，例如如何在处理属性更改的静态方法中设置 ToolTip（见下文）

我试图将样式移动到 ResourceDictionary 中的通用按钮样式的另一件事，但这是这个问题的主题

如何在我的子类按钮中设置工具提示？

干杯

用户控件 XAML：

```
<UserControl.Resources>
    <ResourceDictionary Source="pack://application:,,,/Smack.Core.Presentation.Wpf;component/Themes/generic.xaml" />
</UserControl.Resources>

<Button x:Name="_button" Style="{StaticResource blueButtonStyle}" Command="{Binding AddNewItemCommand}"  >
    <StackPanel Orientation="Horizontal" >
        <Image Source="{resx:Resx ResxName=Smack.Core.Presentation.Resources.MasterDetail, Key=bullet_add}" Stretch="Uniform" VerticalAlignment="Center" />
        <AccessText x:Name="_accesText" VerticalAlignment="Center">_Add New Subject</AccessText>
        <ContentPresenter/>
    </StackPanel>
</Button> 
```

用户控制代码背后：

```
public partial class AddNewItemButton : UserControl
{
    public AddNewItemButton() { InitializeComponent(); }

    public static readonly DependencyProperty SubjectProperty = DependencyProperty.Register(
        "Subject", typeof (string), typeof (AddNewItemButton),
        new FrameworkPropertyMetadata(OnSubjectChanged));

    public string Subject { get { return (string) GetValue(SubjectProperty); } set { SetValue(SubjectProperty, value); } }

    private static void OnSubjectChanged(DependencyObject obj, DependencyPropertyChangedEventArgs args) {
        var control = obj as AddNewItemButton;
        if (control == null) return;

        control._accesText.Text = "_" + string.Format(MasterDetail.Subject_AddNew_Label, control.Subject.Capitalize());

        control._button.ToolTip = string.Format(MasterDetail.Subject_AddNew_ToolTip, control.Subject.ToLower());
    }

} 
```

尝试创建自定义控件失败：

```
public class MyButton : Button
{
    public static readonly DependencyProperty SubjectProperty = DependencyProperty.Register(
        "ItemName", typeof(string), typeof(MyButton),
        new FrameworkPropertyMetadata(OnSubjectChanged));

    public string Subject
    {
        get { return (string)GetValue(SubjectProperty); }
        set { SetValue(SubjectProperty, value); }
    }

    private static void OnSubjectChanged(DependencyObject obj, DependencyPropertyChangedEventArgs args)
    {
        var control = obj as MyButton;
        if (control == null) return;

        ToolTip = ??;
    }
} 
```

# 更新

根据菲尔的回答，控件（底部的）比我想要的更“不美观”:--)

结果

代码

```
 public class AddNewItemButton : Button
{
    static AddNewItemButton() {
        var type = typeof (AddNewItemButton);
        DefaultStyleKeyProperty.OverrideMetadata(type, new FrameworkPropertyMetadata(type));
    }

    #region Subject

    public static readonly DependencyProperty SubjectProperty = DependencyProperty.Register(
        "Subject", typeof(string), typeof(AddNewItemButton),
        new PropertyMetadata(default(string)));

    public string Subject
    {
        get { return (string)GetValue(SubjectProperty); }
        set { SetValue(SubjectProperty, value); }
    }

    #endregion

} 
```

通用的.xaml

```
<Style TargetType="{x:Type local:AddNewItemButton}">

    <Setter Property="ToolTip" Value="{Binding RelativeSource={RelativeSource Self}, Path=Subject, Converter={StaticResource AddNewItemForToolTip}}"/>

    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:AddNewItemButton}">
                <Border Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition/>
                        </Grid.ColumnDefinitions>

                        <Image Stretch="Uniform" VerticalAlignment="Center"
                            Source="{resx:Resx ResxName=Smack.Core.Presentation.Resources.MasterDetail, Key=bullet_add}" />

                        <AccessText 
                            Text="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Path=Subject, Converter={StaticResource AddNewItemForLabel}}" />

                    </Grid>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

![在此处输入图像描述](../Images/1798f931825dcd29c3714bc576f7cc0e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T13:43:39.553

这是一个带有工具提示的自定义按钮的示例（基于您最近提出的问题）：

这是代码

```
public class CustomButton : Button
{
    static CustomButton()
    {
        DefaultStyleKeyProperty.OverrideMetadata(typeof(CustomButton), 
           new FrameworkPropertyMetadata(typeof(CustomButton)));
    }

    public static readonly DependencyProperty SubjectProperty =
        DependencyProperty.Register("Subject", typeof (string),
        typeof (CustomButton), new PropertyMetadata(default(string)));

    public string Subject
    {
        get { return (string) GetValue(SubjectProperty); }
        set { SetValue(SubjectProperty, value); }
    }
} 
```

这在 Themes/generic.xaml

```
<System:String x:Key="Test">Add new: </System:String>

<Style TargetType="{x:Type local:CustomButton}">
    <Setter Property="ToolTip" 
            Value="{Binding RelativeSource={RelativeSource Self}, Path=Subject}"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:CustomButton}">
                <Border Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition/>
                        </Grid.ColumnDefinitions>

                        <Label Grid.Column="0" Content="Image here" 
                               VerticalAlignment="Center" Padding="0,0,5,0"/>

                        <AccessText Grid.Column="1" VerticalAlignment="Center">
                            <AccessText.Text>
                                <MultiBinding StringFormat="{}_{0} {1}">
                                    <Binding Source="{StaticResource Test}"/>
                                    <Binding RelativeSource=
                                        "{RelativeSource TemplatedParent}" 
                                        Path="Subject"/>
                                </MultiBinding>
                            </AccessText.Text>
                        </AccessText>
                    </Grid>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

# java - 未经检查的不安全操作

> ID：10351686
> 
> 赞同：-1
> 
> 时间：2012-04-27T13:39:43.800
> 
> 标签：java

我收到有关未经检查的不安全操作的警告。我不太确定为什么会收到此警告，但有谁知道我应该尝试捕获什么异常以及在哪里捕获？我假设我收到此警告是因为我没有检查可能的异常。

```
import java.awt.*;
import java.util.*;
import java.awt.event.*;
import javax.swing.*;

public class Tokenizer{

public static String split( String string )
{
    TreeSet tree = new TreeSet();
    StringTokenizer tokenizer =
    new StringTokenizer( string );

    while ( tokenizer.hasMoreTokens() )
    tree.add( tokenizer.nextToken() );

    String result = tree.toString();

    return result;
}//end of split

public static void main( String args[] )
{
    String str;
    Scanner input = new Scanner(System.in);
    System.out.println("Please input a string:");
    str = input.nextLine();
    split(str);

}//end of main
}//end of tokenizer 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:53:40.737

您的问题是您没有使用泛型。

你应该有类似的东西：

```
Set<String> tree = new TreeSet<String> (); 
```

或`@SuppressWarnings("unchecked")`在您的方法上方添加（不推荐）

编辑：您可以到此处获取有关使用泛型的更多信息： [https ://en.wikipedia.org/wiki/Generics_in_Java](https://en.wikipedia.org/wiki/Generics_in_Java)

# android - Android：以编程方式访问 Activity 堆栈

> ID：10351688
> 
> 赞同：5
> 
> 时间：2012-04-27T13:39:47.920
> 
> 标签：android, android-activity, back-stack

是否可以从代码中获取当前的 Activity 堆栈？

这是我的用例：

*   用户从一个活动导航到另一个活动

A -> B -> c -> D -> ...

*   一些活动将在将用户发送到新屏幕后完成，而另一些则不会

*   我需要检查按下 BACK 按钮是否会将用户带到 Activity A 或任何其他，因为在当前显示的 Activity 中，我有一个完成 Activity 的按钮，并且按钮的图标是不同的天气，您将被带到那里活动 A 或其他活动。

提前致谢，

再见，毛里齐奥

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T15:36:53.017

我的印象是，字面问题的答案是“不”——你无法访问它。但是可能还有另一种方法可以完成您的需要。

如果这些都是你的活动，为什么不在 Intent 中添加一个额外的内容（当向前方向时），它说明它来自哪个活动。

然后，您可以根据检查该额外内容来决定要显示哪个后退按钮图像，这应该告诉您之前的活动是什么（如果它是您的活动之一 - 如果它是空的，您必须假设它来自系统中的其他地方）

# c# - 支持 Bonjour(Zeroconf) 的 Windows Embedded HTTP Server

> ID：10351689
> 
> 赞同：1
> 
> 时间：2012-04-27T13:39:59.720
> 
> 标签：c#, .net, windows, bonjour, httpserver

我需要找到或创建一个将在 Windows 机器上运行的 HTTP 服务器，并通过 Bonjour(Zeroconf) 宣布它的存在。我在整个网络上进行了搜索，似乎找不到任何符合要求的内容，甚至找不到任何关于如何将 Bonjour 功能添加到我创建的服务器的信息。

我发现apache有mod_zeroconf，但它只在Linux下运行，发现Apple提供了Windows的Bonjour安装程序，但似乎没有添加announce功能。我觉得我可能在错误的地方搜索。

对于我当前的项目，我可以使用现成的东西，使用 C#/.Net 构建，甚至滚动基于 rails/rack 的服务器并将公告设置为单独的过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:28:58.927

我怀疑您需要集成[Mono.Zeroconf](http://www.mono-project.com/Mono.Zeroconf)。

# mysql - mysql中的两列主键返回错误和一般有趣

> ID：10351691
> 
> 赞同：2
> 
> 时间：2012-04-27T13:40:05.403
> 
> 标签：mysql, sql

我在 mysql db (app_id, dated) 中创建了一个两列键，当我运行以下查询时出现问题

```
INSERT INTO `facebook_application_shares` (`user_id`, `app_id`, `dated`, `stats`) VALUES ('80', '269456199802533', '2012-04-24', '0') 
```

我收到以下错误 - 即使 app_id 是 269456199802533 而不是 2147483647

```
Duplicate entry '2147483647-2012-04-24' for key 1 
```

然后当我检查实际的数据库表时，值实际上是“2147483647”

我对此感到非常困惑

![在此处输入图像描述](../Images/4f603a7947a8db768520eff32a0291b6.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T13:53:24.757

`2147483647`, 或, 是能够存储在列`0x7FFFFFFF`中的最大数字（您似乎是）。更大的值只会被截断。`MySQL``INT SIGNED``app_id`

做你`app_id`的`BIGINT UNSIGNED`.

请注意，`INT(100)`它仍然是一个`4-bit`整数，并带有[**一个可选提示，提示应用程序**](http://dev.mysql.com/doc/refman/5.5/en/numeric-type-attributes.html)不要显示多个`100`数字：

> 应用程序可以使用此可选显示宽度来显示宽度小于为列指定的宽度的整数值，方法是用空格向左填充它们。（也就是说，这个宽度存在于与结果集一起返回的元数据中。是否使用它取决于应用程序。）

并不是说它真的能够存储一个`googol - 1`.

# objective-c - Vimeo 视频无法在 iPad UIWebView 上播放

> ID：10351698
> 
> 赞同：9
> 
> 时间：2012-04-27T13:40:31.650
> 
> 标签：objective-c, ios, ipad, uiwebview, vimeo

好的，所以我环顾了人们使用 vimeo 遇到的大多数其他问题，我认为他们没有遇到我遇到的同样问题。

当我在 iPhone 和 iPad 上的 Safari 应用程序上打开 vimeo 视频时，它们都可以正常工作，没有问题。

现在我创建了一个 iPhone 应用程序，它有一个 UIWebView 并加载了一个 vimeo 播放器视频，它也可以正常工作。

问题是如果我现在在我的 iPad 上安装相同的应用程序，vimeo 播放器拒绝加载视频，它只是挂起并且微调器继续旋转但视频不会加载。

但是，现在我在那之后所做的是创建一个基本应用程序，它将 UIWebView 中的 vimeo 播放器 URL 作为原生 iPad 应用程序加载，而不是调整大小或“2x”以适应 iPad 的 iPhone 应用程序。令人惊讶的是，这工作得很好。

所以现在我很困惑......如果iPad没有运行为iPad设计的应用程序，为什么它不会播放vimeo视频？幕后是否有一些特殊的魔法可能会打破这一点？

我在这里不知所措，任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T17:29:26.107

实现委托方法：**shouldStartLoadWithRequest**然后在该方法中检测请求的 URL 是否为**VIDEO**类型，如果是，请按照以下链接中给出的代码对我有用：

[在 Iphone 应用程序中从服务器播放视频文件](https://stackoverflow.com/questions/5015165/playing-a-video-file-from-server-in-an-iphone-app)

这在播放任何视频时都会很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-19T18:56:00.543

问题可能出在与 Apple 设备上的 Safari 不同的用户代理上：UIWebView 发送了一些无效字符串，导致 Vimeo（有时是 YouTube）中断。

幸运的是，您可以使用以下代码覆盖应用程序的用户代理（C#，如果不够干净，请告诉我）：

```
NSDictionary dictionary = NSDictionary.FromObjectAndKey(new NSString("Mozilla/5.0 (" + (UIDevice.CurrentDevice.Model.Contains("iPad") ? "iPad" : "iPhone" ) +  "; CPU OS 6_0 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/6.0 Mobile/10A403 Safari/8536.25"), new NSString("UserAgent"));
NSUserDefaults.StandardUserDefaults.RegisterDefaults(dictionary); 
```

这使得视频播放得很好。

# c# - 为什么 Protobuf-net typemodel 不序列化私有只读成员？

> ID：10351699
> 
> 赞同：1
> 
> 时间：2012-04-27T13:40:33.673
> 
> 标签：c#, protobuf-net

我有以下类，我想为它构建一个 protobuf-net 类型模型：

```
 [DataContract]
      public class Currency
      {
          [DataMember(Order = 0)]
          private readonly string code;

          public Currency(string code)
          {
              // Initialize members
              this.code = code;
          }

          public string Code
          {
              get { return this.code; }
          }
      } 
```

我设置类型模型如下：

```
 var model = TypeModel.Create();
  var typeInModel = model.Add(typeof(Currency), true);
  typeInModel.UseConstructor = false; 
```

添加此类型后，当我查看类型模型中的“字段”成员时，我看不到代码成员的任何内容。我在这里想念什么？

更新：现在可以创建类型模型，但序列化仍然不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:06:19.553

我的同事发现，如果您将 DataMember 订单从以下位置更改：

```
 [DataMember(Order = 0)] 
```

至：

```
 [DataMember(Order = 1)] 
```

尽管序列化仍然无法正常工作，但对于构​​建类型模型而言，一切突然都可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T20:08:56.870

您编写的代码（使用`[DataMember(Order=1)]`您的答案中的修复）工作正常。以下：

```
var obj = new Currency("abc");
var clone = (Currency) model.DeepClone(obj);

Console.WriteLine(ReferenceEquals(obj, clone));
Console.WriteLine(clone.Code); 
```

输出

```
False
abc 
```

完全符合我的预期 - 含义：不同的对象实例，但使用正确的值成功创建。

如果您正在做不同的事情，请告诉我。另请注意，根据评论，在某些平台上对私人成员的反射是有限的——最值得注意的是 Silverlight 和 Phone 7。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T15:13:21.157

序列化过程中的某些内容会跳过没有设置器的属性。

这似乎有点像黑客，但我通常这样做：

```
[DataMember]
public string Code {
    get { return this.code; }
    set { }
} 
```

一旦集合在那里，即使它什么都不做，它也会在序列化过程中被拾取。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T13:46:57.920

在部分信任模式下运行 WCF 代码时，不支持只读字段（公共和私有）的序列化和反序列化。这是因为生成的 IL 无法验证，因此需要提升权限。

看看[文档](http://msdn.microsoft.com/en-us/library/ms731923.aspx)。

# django - Google App Engine 上的 Django FileField、ImageField

> ID：10351701
> 
> 赞同：0
> 
> 时间：2012-04-27T13:40:38.513
> 
> 标签：django, google-app-engine, blobstore

我正在为 Google App Engine 和 Google Cloud SQL 开发一个 Django 应用程序。但是，我想将我的 FileFields 存储在 BlobStore 中。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T00:54:58.563

请使用 Python2.7 运行时和 Files API。

Django 的 ImageField 依赖于 PIL 进行验证，因此您将受益于使用提供内置 PIL 支持的 Python2.7 运行时。现在 App Engine 有一个实验文件 api 可以直接将数据写入[blobstore](https://developers.google.com/appengine/docs/python/blobstore/overview#Writing_Files_to_the_Blobstore) / [Cloud Storage](https://developers.google.com/appengine/docs/python/googlestorage)，因此您可以将此 api 用于您的目的。

您需要在 app.yaml 的库部分中添加以下项目：

```
libraries:
- name: PIL
  version: latest 
```

如果您想坚持使用特定版本，请使用“1.1.7”而不是最新版本。

# silverlight-4.0 - WPF 到 Silverlight 的转换

> ID：10351710
> 
> 赞同：2
> 
> 时间：2012-04-27T13:41:18.983
> 
> 标签：silverlight-4.0

有什么方法可以像 WPF 一样支持`{x:Type}`和`{x:Static}`使用 silverlight 吗？

```
<Style TargetType="{x:Type TextBox}"> 
            <Style.Triggers> 
                <DataTrigger Binding="{Binding MyTextProperty}" Value="{x:Null}"> 
                    <Setter Property="Text" Value="test!" /> 
                    <Setter Property="Foreground" Value="Red" /> 
                </DataTrigger> 
            </Style.Triggers> 
        </Style> 
```

# java - 在 MySQL 集群上使用 JPA/Hibernate 进行外键约束检查

> ID：10351711
> 
> 赞同：4
> 
> 时间：2012-04-27T13:41:21.143
> 
> 标签：java, mysql, spring, hibernate, jpa

我刚刚被告知`MySQL`集群（使用 NDB 引擎）不支持跨集群的外键约束。

使用`JPA`/ `Hibernate`，如果数据库不强制执行引用完整性，您将如何强制执行它？

一种选择是调用数据库以验证数据，然后如果有效则执行`insert/update/delete`操作。我有点不愿意采用这种方法，因为它会对性能产生影响。

问题：

*   如果在数据库中不支持外键检查，那么在使用带有/的`MySQL`集群时，您通常如何强制执行参照完整性检查。`JPA``Hibernate`

*   如果手动检查是唯一的选择，有什么方法可以通过一次访问数据库来完成手动检查事务？（可能作为`CRUD`操作的一部分）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T14:23:46.660

我认为您无法使用任何 Hibernate/JPA 功能来强制执行参照完整性。正如 eggyal 所提到的，您需要使用触发器在 MySQL 本身中创建“程序化”外键。

MySQL网站上有一篇关于如何做到这一点的文章：http: [//dev.mysql.com/tech-resources/articles/mysql-enforcing-foreign-keys.html](http://dev.mysql.com/tech-resources/articles/mysql-enforcing-foreign-keys.html)

# php - PHP - 简单 XML - 嵌套层次结构

> ID：10351713
> 
> 赞同：0
> 
> 时间：2012-04-27T13:41:26.740
> 
> 标签：php, xml, simplexml

我一直在使用 PHP 的简单 XML 函数来处理 XML 文件。

以下代码适用于简单的 XML 层次结构：

```
$xml = simplexml_load_file("test.xml");

echo $xml->getName() . "<br />";

foreach($xml->children() as $child)
{
    echo $child->getName() . ": " . $child . "<br />";
} 
```

这假设 XML 文档的结构如下：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<note>
    <to>Tove</to>
    <from>Jani</from>
    <heading>Reminder</heading>
    <body>Don't forget me this weekend!</body>
</note> 
```

但是，如果我的 XML 文档中有更复杂的结构 - 内容根本不会输出。一个更复杂的 XML 示例如下所示：

```
<note>
    <noteproperties>
        <notetype>
            TEST
        </notetype>
    </noteproperties>
    <to>Tove</to>
    <from>Jani</from>
    <heading>Reminder</heading>
    <body>Don't forget me this weekend!</body>
</note> 
```

我需要处理深度不确定的 XML 文件 - 任何人都可以建议一种方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:47:17.300

那是因为你需要再往下走`<noteproperties>`

看看这个，来自[SimpleXMLElement::children](http://www.php.net/manual/en/simplexmlelement.children.php)的例子：

```
$xml = new SimpleXMLElement(
'<person>
     <child role="son">
         <child role="daughter"/>
     </child>
     <child role="daughter">
         <child role="son">
             <child role="son"/>
         </child>
     </child>
 </person>');

foreach ($xml->children() as $second_gen) {
    echo ' The person begot a ' . $second_gen['role'];

    foreach ($second_gen->children() as $third_gen) {
        echo ' who begot a ' . $third_gen['role'] . ';';

        foreach ($third_gen->children() as $fourth_gen) {
            echo ' and that ' . $third_gen['role'] .
                ' begot a ' . $fourth_gen['role'];
        }
    }
} 
```

# wcf - 部署后 WCF Web 服务不工作

> ID：10351714
> 
> 赞同：2
> 
> 时间：2012-04-27T13:41:29.270
> 
> 标签：wcf, visual-studio-2010, web-services

我正在尝试创建一个 WCF Web 服务，该服务将允许其他应用程序通过向该服务 url 发出 http 请求来检索字符串。我尝试在 IIS 中发布服务，并在尝试使用 url 浏览到它时，它说

```
' The resource cannot be found' 
```

当我检查我使用 url 的文件夹的路径时，我得到了错误

```
'No protocol binding matches the given address 
'http://localhost:xxxx/WcfSampleLibrary/Service1/mex.' 
 Protocol bindings are configured at the Site level in IIS or WAS configuration' 
```

这是已发布文件夹的目录路径：

```
C:\inetpub\wwwroot\WcfServices\WcfSampleLibrary\WcfSampleLibrary.Service1
C:\inetpub\wwwroot\WcfServices\WcfSampleLibrary\Web.config
C:\inetpub\wwwroot\WcfServices\WcfSampleLibrary\bin\WcfSampleLibrary.dll 
```

网络配置文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>

<system.web>
    <compilation debug="true" />
</system.web>
<system.serviceModel>
<services>
  <service name="WcfSampleLibrary.Service1" behaviorConfiguration ="mex">
    <host>
      <baseAddresses>
        <add baseAddress = "http://192.xxx.x.xxx/WcfSampleLibrary/Service1/" />
      </baseAddresses>
    </host>
    <!-- Service Endpoints -->
    <endpoint address ="" 
      binding="wsHttpBinding"  contract="WcfSampleLibrary.IService1">
     <identity>
        <dns value="localhost"/>
      </identity>
    </endpoint>
    <!-- Metadata Endpoints -->
   <endpoint address="http://localhost:xxxx/WcfSampleLibrary/Service1/mex" name="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="mex">
     <serviceMetadata httpGetEnabled="false"/>
      <!-- To receive exception details in faults for debugging purposes, 
      set the value below to true.  Set to false before deployment 
      to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T13:53:12.347

在 IIS 托管的 WCF 服务中，您没有在地址中指定完整的 URI。IIS 决定地址。在 IIS 中托管时，该`baseAddresses`元素也会被完全忽略（因此请从您的 Web.config 中删除它）。服务的基地址由放置 wcf 服务的网站和虚拟目录确定。执行以下操作：

```
 <endpoint
    address="mex"
    binding="mexHttpBinding"
    contract="IMetadataExchange"
  /> 
```

那么您的地址将是[http://IIS.SERVER/SiteName/Folder/WcfSampleLibrary.Service1.svc](http://IIS.SERVER/SiteName/Folder/WcfSampleLibrary.Service1.svc)。如果您不确定地址是什么，请使用您的 IIS 管理工具，选择包含该服务的站点，右键单击并选择高级 -> 浏览站点。

`mex`另外，如果您想发布您的 WSDL ，我会在您的行为上打开 httpGetEnabled 。这使您在开发服务时更容易使用您的服务：

```
<behaviors>
  <serviceBehaviors>
    <behavior name="mex" >
      <serviceMetadata httpGetEnabled="true" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

启用后，浏览到`httpGetEnabled`您的服务 URI 将为您提供查看 WSDL 的选项。

# geolocation - ns2 中的 RSSI 计算

> ID：10351722
> 
> 赞同：1
> 
> 时间：2012-04-27T13:42:01.620
> 
> 标签：geolocation, ns2, rssi

当使用双射线地面模型运行模拟时，当锚节点传输信号时，我需要知道非锚节点的 RSSI 值。我需要使用这些值来估计非锚节点位置。

我是 NS2 初学者。一些详细的步骤会对我有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:05:58.807

可以得到Pr的值，可以在包对象中找到

```
p->txinfo_.getTxPr(); 
```

和

```
p->txinfo_.RxPr 
```

其中 p 是接收到的数据包 TxPr 是传输数据包的功率 RxPr 是接收数据包的功率

# python - 获取容器python中所有项目的属性

> ID：10351726
> 
> 赞同：1
> 
> 时间：2012-04-27T13:42:21.987
> 
> 标签：python

我有以下（显然是简化的）类

```
class A(object)
    def __init__(self, a):
        self.a = a
        self.b = 'b'
        # Other class attributes are added

class B(list):
    """
    Some customization of this class...
    """
    pass

BB = B([A(i) for i in range(10)]) 
```

我想要做

```
B.a 
```

并`a`从`B`. 我知道为了做到这一点，我需要覆盖`__getattr__`，但我不确定实现这一点的最佳方式。这需要是通用的，因为`B`不知道`A`可能需要访问的任何属性。

有人可以就这个想法的实施提供一些建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T13:45:33.733

# 一般解决方案：

如果您希望它全面工作，那么您可以`__getattr__()`按照您的想法覆盖：

```
class A(object):
    def __init__(self, a):
        self.a = a
        self.b = a-1

class B(list):
    """
    Some customization of this class...
    """
    def __getattr__(self, name):
        return (getattr(item, name) for item in self)

bb = B([A(i) for i in range(10)])
print(list(bb.a))
print(list(bb.b)) 
```

给我们：

```
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
[-1, 0, 1, 2, 3, 4, 5, 6, 7, 8] 
```

请注意，`__getattr__()`只有在属性不存在时才会调用。所以，如果你设置`bb.b`为另一个值，你会得到它：

```
bb = B([A(i) for i in range(10)])
bb.b = 5
print(list(bb.a))
print(bb.b) 
```

给我们：

```
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
5 
```

显示不需要`B`了解其内容的示例：

```
>>> import datetime
>>> b = B([datetime.date(2012, 1, 1), datetime.date(2012, 2, 2), datetime.date(2012, 3, 3)])
>>> list(b.month)
[1, 2, 3] 
```

# 原答案：

最简单的方法是使用[生成器表达式](https://www.youtube.com/watch?v=t85uBptTDYY)。

```
class B(list):
    """
    Some customization of this class...
    """
@property
def a(self):
    return (item.a for item in self) 
```

这个生成器表达式等价于：

```
@property
def a(self):
    for item in self:
        yield item.a 
```

我还使用[内置`property()`函数](http://docs.python.org/library/functions.html#property)作为装饰器，使其`B.a`充当属性而不是函数。

然后我们可以这样做：

```
bb = B([A(i) for i in range(10)])
print(list(bb.a)) 
```

并得到：

```
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

如果您确实想要一个列表而不是迭代器，则可以使用列表推导（[item.a for item in self]），但通常迭代器更有用，并且可以轻松制成列表（如上所示）。

请注意，您还可以通过分配生成器表达式来更简单地执行此操作：

```
class B(list):
        """
        Some customization of this class...
        """
    def __init__(self, *args):
        super(B, self).__init__(*args)
        self.a = (item.a for item in self) 
```

但是，这意味着发电机在第一次使用后就会耗尽，所以我建议不要这样做。

# ruby-on-rails - 将 Youtube 视频嵌入 Rails 应用程序

> ID：10351730
> 
> 赞同：1
> 
> 时间：2012-04-27T13:42:40.903
> 
> 标签：ruby-on-rails, youtube

当我把

```
<iframe width="560" height="349" src="<%= @video.link %>"></iframe> 
```

一切正常。但实际的视频不会播放..我做错了什么？

```
<iframe width="560" height="349" src="http://youtu.be/PF9-lstnLvo">
  <html lang="en" dir="ltr">
 </iframe> 
```

帮助！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T14:08:16.220

iframe 的 src 错误，应该是这样的：

`http://www.youtube.com/embed/PF9-lstnLvo`

您需要将 code:string 添加到您的 Video 模型。

或方法代码，它会从@video.link 返回此代码，如下所示：

```
def code
  self.link.split('/').last if self.link
end 
```

并替换erb：

`<iframe width="560" height="349" src="<%= "http://www.youtube.com/embed/"+@video.code %>"></iframe>`

# sql-server - SQL Server BI：单个多维数据集，多个事实表

> ID：10351736
> 
> 赞同：0
> 
> 时间：2012-04-27T13:43:01.220
> 
> 标签：sql-server, olap, business-intelligence, cubes

我是创建立方体的新手，所以请耐心等待。

这是我的数据示例，我有多家公司，每家公司都有多家商店。每个销售都与特定公司相关联，在特定日期与特定商店相关联。例如：2011 年 5 月 19 日，A 公司，商店 1 发生了 5 次销售退货与特定日期的特定公司相关联。例如：公司 A 于 2012 年 3 月 11 日发生了 3 次退货 有时我的用户想要查看商店列表、日期、退货次数以及销售额。有时他们想查看公司列表、特定商店和销售数量。

我有一个存储 COMPANY - DATE - STORE- SALES - RETURNS 的表，我最终在特定的 COMPANY - DATE 对下为每个商店重复返回的值。因此，如果我正在编写查询，并且我想找出退货，我只需选择不同的公司，日期，从 mytable 退货

但我不知道如何把它变成一个多维数据集（使用 SS BI 和 Visual Studio）。（到目前为止我只做了几个立方体）

谢谢！（另外，请随时向我指出适当的参考资料）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:12:27.787

听起来 Company 是 Store 的一个属性，应该在 Store 维度而不是事实表中。可能必须对退货进行转换才能将公司转变为商店。

我错过了什么吗？

# sql-server-2008 - 实体框架 4.1 代码优先、LINQ、正弦和余弦

> ID：10351739
> 
> 赞同：0
> 
> 时间：2012-04-27T13:43:04.613
> 
> 标签：sql-server-2008, entity-framework-4, linq-to-entities

我希望你能指出我正确的方向。我正在研究使用 EF4.1 CF 方法的解决方案。我们还使用存储库模式。SQL Server 是 R2。

我的任务是开发一个用户控件，当用户输入他们的邮政编码并提交它时，从他们输入的邮政编码返回 N 英里半径内的事件列表。

在数据库中，我们存储了所有事件的纬度和经度。我们还确定用户输入的邮政编码的纬度和经度。

显然，如果列表的过滤可以在数据库服务器上而不是在代码中进行，那么对性能会更有好处。

我在 C# 中有一个方法来处理所有的计算。我在 SQL 中也有等价物（如果我要编写 UDF）。

不过，我的问题是，如何编写一个 LINQ 表达式，该表达式将映射到带有 Math.Sin、Math.Cos 之类的 SQL？

一个（非常）简单的代码示例是：

返回 p => p.Latitude == Math.Sin(0.90678234688337252436989061980805); <<< 显然在生产代码中，会有变量，这个表达式会比这个例子更重要。

执行此代码块时，我在运行时得到的只是以下异常：

“LINQ to Entities 无法识别方法 'Double Sin(Double)' 方法，并且此方法无法转换为存储表达式。”

感谢您的帮助和建议。

JC

# javascript - Backbone fetch 是添加新的行来查看而不是更新现有的

> ID：10351748
> 
> 赞同：1
> 
> 时间：2012-04-27T13:43:30.343
> 
> 标签：javascript, backbone.js, coffeescript

我仍在学习 Backbone，但我的理解是它应该在这种情况下自动处理更新视图。我的主索引视图是一个表，其中每一行都是单个模型的视图。

索引视图：

```
Tracker.Views.Friends ||= {}

class Tracker.Views.Friends.IndexView extends Backbone.View
  template: JST["backbone/templates/friends/index"]

  initialize: () ->
    _.bindAll(this, 'addOne', 'addAll', 'render');

    @options.friends.bind('reset', this.addAll);

  addAll: () ->
    @options.friends.each(this.addOne)

  addOne: (chaser) ->
    view = new Tracker.Views.Friends.FriendView({model : friend})
    this.$("tbody").append(view.render().el)

  render: ->
    $(this.el).html(this.template(friends: this.options.friends.toJSON() ))
    @addAll()

    return this 
```

型号和收藏：

```
class Tracker.Models.Friend extends Backbone.Model
  paramRoot: 'friend'

  defaults:
    name: null
    status: null

class Tracker.Collections.FriendsCollection extends Backbone.Collection
  model: Tracker.Models.Friend
  url: '/friends.json' 
```

网友观点：

```
Tracker.Views.Friends ||= {}

class Tracker.Views.Friends.FriendView extends Backbone.View
  template: JST["backbone/templates/friends/friend"]

  events:
    "click .destroy" : "destroy"

  tagName: "tr"

  destroy: () ->
    @options.model.destroy()
    this.remove()

    return false

  render: ->
    $(this.el).html(this.template(this.options.model.toJSON() ))    
    return this 
```

朋友.jst.ejs：

```
<td><a href="javascript:void(0);" data-friendid="<%= id %>" class="friend-link"><%= name %></a></td>
<td><span class="label"><%= status %></span></td> 
```

index.jst.ejs：

```
<table id="friends_table" class="table table-striped table-bordered">
    <tr>
      <td>Name</td>
      <td>Status</td>
    </tr>
</table> 
```

我最初使用重置实例化并填充集合，如下所示：

```
friends = new Tracker.Collections.FriendsCollection()
friends.reset data 
```

然后我实例化我的索引视图并将它传递给我的集合：

```
view = new Tracker.Views.Friends.IndexView(friends: friends) 
```

这一切都很好，并显示了一个表格，其中包含来自 Web 服务器的行。但是，我想定期更新好友列表以及服务器上发生的更改，因此我使用 collection.fetch 方法如下（其中 updateStatus 与到目前为止描述的代码完全无关）：

```
window.setInterval (->
  friends.fetch success: updateStatus
), 10000 
```

数据从 fetch 返回并正确解析，但是它将行附加到我的表中，而不是更新现有行。我怎样才能按照我的意图进行这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:16:47.210

当它被重置时，你永远不会真正清理桌子。

更新您的`addAll`函数以清除表格。像这样的东西：

```
class Tracker.Views.Friends.IndexView extends Backbone.View
  template: JST["backbone/templates/friends/index"]

  # ...

  addAll: () ->
    @$("tbody").empty()
    @options.friends.each(this.addOne)

  # ... 
```

请注意，根据您的代码/交互的复杂程度，清除这种方式可能会有点泄漏。您可能需要在添加每个子视图时保存对它们的引用，然后在清除每个子视图时循环并调用您的自定义删除代码（如果有的话）。

您可能还需要将表头包装在 index.jst.ejs 文件中，这样它就不会被表体的其余部分清除：

```
<table id="friends_table" class="table table-striped table-bordered">
    <thead>
        <tr>
          <td>Name</td>
          <td>Status</td>
        </tr>
    </thead>
</table> 
```

# java - File.list() 为目录返回 null

> ID：10351749
> 
> 赞同：5
> 
> 时间：2012-04-27T13:43:34.727
> 
> 标签：java, android, file-io

执行代码时

```
File path = new File("/data");
boolean isDir = path.isDirectory();
//isDir is true
String[] fList = path.list();
//fList == null! 
```

在 Android 2.3 模拟器上，文件列表为空。这似乎与文档[http://developer.android.com/reference/java/io/File.html#list](http://developer.android.com/reference/java/io/File.html#list) () 中的声明相矛盾：

```
Returns null if this file is not a directory. 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T13:58:56.757

您无法访问`/data`dir，因为您没有 root 访问权限。如果没有 root 权限，您只能访问外部存储和内部存储中的应用程序目录。看看这个答案：[https ://stackoverflow.com/a/1043722/1037294](https://stackoverflow.com/a/1043722/1037294)

# java - Java 不写入控制台

> ID：10351753
> 
> 赞同：1
> 
> 时间：2012-04-27T13:43:42.533
> 
> 标签：java, eclipse, tomcat, logging

我正在开发一个不会向控制台输出任何内容的 Java EE Web 应用程序。它使用 log4j，将 log4j.properties 文件设置为输出到 stdout。但是，它不起作用，控制台中没有出现日志记录。事实证明，即使 System.out 也没有出现在控制台中。什么可能导致这种情况？

我正在运行 MyEclipse 10.1、log4j-1.2.11、tomcat 5.5.35、java 1.6.0_31。

根据请求，这是我的 .properties 文件：

```
### direct log messages to stdout ###
# Configure Root Logger
log4j.rootLogger = DEBUG, stdout
log4j.logger.org.hibernate = DEBUG, stdout
#log4j.logger.org.springframework = ERROR, stdout

# Configure stdout Appender 
log4j.appender.stdout = org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout = org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern =%d [%t] %-5p %c - %m%n 
```

和日志处理程序：

```
public class LogHandler {
private static Logger sLog = Logger.getLogger(LogHandler.class);
public LogHandler(){

}
public void info_toLOG(String msg00) {
    sLog.info("\n" + msg00 + "\n");
}

public void error_toLOG(Exception e) {
    sLog.error("\n" + e.getClass() + "\n"
            + e.getCause() + "\n"
            + e.getMessage() + "\n"
            + e.getLocalizedMessage() + "\n"
            + e.getStackTrace().toString() + "\n");
}

public void warning_toLOG(String msg00) {
    sLog.warn("\n" + msg00 + "\n");
} 
```

}

我使用 MyEclipse 来启动和停止。只需指向我的tomcat安装目录。MyEclipse 添加了以下 VM 参数：

```
-Dcatalina.home="<tomcat dir>" 
-Dcatalina.base="<tomcat dir> " 
-Djava.endorsed.dirs="<tomcat dir>/common/endorsed" 
-Djava.io.tmpdir="<tomcat dir>/temp" 
-Djava.library.path=/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin:"<tomcat dir>/bin" 
-Dsun.io.useCanonCaches=false 
-Xmx1024M 
```

编辑：感谢那些试图提供帮助的人。我应该在原始问题中说明我正在运行 Mac OS X 10.7.3。Utilities -> Java Preferences -> Advanced -> Java Console 下有一个设置，一旦设置为 Show Console 就更正了该问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T13:50:25.680

在 Tomcat 中，您的 System.out 和 System.err 将转到 catalina.out 日志文件。请在那里检查您的输出。

**更新**刚刚测试了您的确切 log4j 配置，我可以确认输出已发送到`tomcat7-stdout.<date>.log`Tomcat 7 Windows。

```
2012-04-27 15:59:47 Commons Daemon procrun stdout initialized
2012-04-27 15:59:51,955 [http-apr-8080-exec-3] INFO  org.apache.log4j.Logger - hey log
blah 
```

对于 Tomcat 5.5，这个日志文件名会有所不同，它应该`catalina.out`在 Linux 中，并且在 Windows 中会有不同的名称（所以文档说，我不知道）。

这是代码：

```
Logger l = Logger.getLogger(Logger.class);
l.info("hey log");
System.out.println("blah"); 
```

**UPDATE2**在 Eclipse 下，这种类型的输出应该转到 Eclipse 控制台，尝试构建您的 WAR 文件并将其部署到独立的 Tomcat 中以验证上述内容。

# c# - WCF ConcurrencyMode.Multiple

> ID：10351755
> 
> 赞同：0
> 
> 时间：2012-04-27T13:43:52.583
> 
> 标签：c#, wcf

我不知道如何检查我是对还是错，所以你的帮助会很大。

**A.**据我了解，IsOneWay=true = 客户端不想等待方法结束。所以服务会在他想要的时候执行这个方法。但是，在某些情况下，服务是否会使用多线程来执行该方法？

**B.**当我使用 ConcurrencyMode.Multiple 时，使用 IsOneWay=true 和 IsOneWay=false 有什么区别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T13:50:13.163

ConcurrencyMode 和 Messaging Pattern 并没有那么直接相关。

**IsOneWay**影响客户端和服务器的交互方式。

**ConcurrencyMode**是服务器端问题，客户端不知道此设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T15:31:42.880

来自：http: [//msdn.microsoft.com/en-us/library/ms751496.aspx](http://msdn.microsoft.com/en-us/library/ms751496.aspx)

> 根据定义，HTTP 是一种请求/响应协议；发出请求时，会返回响应。即使对于通过 HTTP 公开的单向服务操作也是如此。调用该操作时，服务会在服务操作执行之前返回 HTTP 状态代码 202。此状态码表示请求已被接受处理，但处理尚未完成。调用该操作的客户端会阻塞，直到它收到来自服务的 202 响应。当使用配置为使用会话的绑定发送多个单向消息时，这可能会导致一些意外行为。此示例中使用的 wsHttpBinding 绑定默认配置为使用会话来建立安全上下文。默认情况下，会话中的消息保证按照它们发送的顺序到达。因此，当发送会话中的第二条消息时，直到处理完第一条消息后才对其进行处理。这样做的结果是，在前一条消息的处理完成之前，客户端不会收到消息的 202 响应。因此，客户端似乎会阻止每个后续操作调用。为避免此行为，此示例将运行时配置为同时将消息分派到不同的实例进行处理。该示例将 InstanceContextMode 设置为 PerCall，以便每个消息都可以由不同的实例处理。ConcurrencyMode 设置为 Multiple 以允许多个线程一次分派消息。当发送会话中的第二条消息时，在处理完第一条消息之前不会对其进行处理。这样做的结果是，在前一条消息的处理完成之前，客户端不会收到消息的 202 响应。因此，客户端似乎会阻止每个后续操作调用。为避免此行为，此示例将运行时配置为同时将消息分派到不同的实例进行处理。该示例将 InstanceContextMode 设置为 PerCall，以便每个消息都可以由不同的实例处理。ConcurrencyMode 设置为 Multiple 以允许多个线程一次分派消息。当发送会话中的第二条消息时，在处理完第一条消息之前不会对其进行处理。这样做的结果是，在前一条消息的处理完成之前，客户端不会收到消息的 202 响应。因此，客户端似乎会阻止每个后续操作调用。为避免此行为，此示例将运行时配置为同时将消息分派到不同的实例进行处理。该示例将 InstanceContextMode 设置为 PerCall，以便每个消息都可以由不同的实例处理。ConcurrencyMode 设置为 Multiple 以允许多个线程一次分派消息。这样做的结果是，在前一条消息的处理完成之前，客户端不会收到消息的 202 响应。因此，客户端似乎会阻止每个后续操作调用。为避免此行为，此示例将运行时配置为同时将消息分派到不同的实例进行处理。该示例将 InstanceContextMode 设置为 PerCall，以便每个消息都可以由不同的实例处理。ConcurrencyMode 设置为 Multiple 以允许多个线程一次分派消息。这样做的结果是，在前一条消息的处理完成之前，客户端不会收到消息的 202 响应。因此，客户端似乎会阻止每个后续操作调用。为避免此行为，此示例将运行时配置为同时将消息分派到不同的实例进行处理。该示例将 InstanceContextMode 设置为 PerCall，以便每个消息都可以由不同的实例处理。ConcurrencyMode 设置为 Multiple 以允许多个线程一次分派消息。此示例将运行时配置为同时将消息分派到不同的实例进行处理。该示例将 InstanceContextMode 设置为 PerCall，以便每个消息都可以由不同的实例处理。ConcurrencyMode 设置为 Multiple 以允许多个线程一次分派消息。此示例将运行时配置为同时将消息分派到不同的实例进行处理。该示例将 InstanceContextMode 设置为 PerCall，以便每个消息都可以由不同的实例处理。ConcurrencyMode 设置为 Multiple 以允许多个线程一次分派消息。

# extjs - 如何删除 Extjs4 拖放代理？

> ID：10351758
> 
> 赞同：0
> 
> 时间：2012-04-27T13:43:59.887
> 
> 标签：extjs, extjs4

如何隐藏 D&D 代理？（代理？影子？）

我使用了 .hideproxy() 但是，不是..

请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T19:10:01.497

如果您指的是幽灵（移动/拖动对象时出现的阴影），您可以像这样使用 CSS 隐藏它们：（简单方法）

```
.x-dd-drag-ghost,
.x-panel-ghost,
.x-window-ghost {
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)"; /* IE 8 */
    filter: alpha(opacity=0); /* IE 5-7 */
    -moz-opacity: 0; /* Netscape */
    -khtml-opacity: 0; /* Safari 1.x */
    opacity: 0; /* Good browsers */
} 
```

# python - Matplotlib Pyplot 条形图中的浮动条

> ID：10351763
> 
> 赞同：1
> 
> 时间：2012-04-27T13:44:13.150
> 
> 标签：python, matplotlib

我正在处理一个范围非常大的图表，我发现条形图偏离了轴。我怎样才能阻止这个？这是我在教程中编写的一个示例，因为我的数据是从大量文件中读取的。这说明了我遇到的问题。我给出了标准，意味着像我的数据一样的大范围。

```
import numpy as np
import matplotlib.pyplot as plt

N = 5
menMeans = (20, 35, 30, 35, 27,43,444,44)
menStd =   (2, 3, 4, 1, 2,43,4,33)

ind = np.arange(8)  # the x locations for the groups
width = 0.35       # the width of the bars

fig = plt.figure()
ax = fig.add_subplot(111)
rects1 = ax.bar(ind, menMeans, width, color='r', yerr=menStd)

womenMeans = (25, 32, 34, 25,322,3,443,3)
womenStd =   (3, 5, 2, 3, 3,32,33,322)
rects2 = ax.bar(ind+width, womenMeans, width, color='y', yerr=womenStd)

# add some
ax.set_ylabel('Scores')
ax.set_title('Scores by group and gender')
ax.set_xticks(ind+width)
ax.set_xticklabels( ('G1', 'G2', 'G3', 'G4', 'G5','K','K','Z') )

ax.legend( (rects1[0], rects2[0]), ('Men', 'Women') )

def autolabel(rects):
    # attach some text labels
    for rect in rects:
        height = rect.get_height()
        ax.text(rect.get_x()+rect.get_width()/2., 1.05*height, '%d'%int(height),
                ha='center', va='bottom')

autolabel(rects1)
autolabel(rects2)

plt.show() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:14:16.237

只需在 y 轴上添加限制：

```
import numpy as np
import matplotlib.pyplot as plt

N = 5
menMeans = (20, 35, 30, 35, 27,43,444,44)
menStd =   (2, 3, 4, 1, 2,43,4,33)

ind = np.arange(8)  # the x locations for the groups
width = 0.35       # the width of the bars

fig = plt.figure()
ax = fig.add_subplot(111)
rects1 = ax.bar(ind, menMeans, width, color='r', yerr=menStd)

womenMeans = (25, 32, 34, 25,322,3,443,3)
womenStd =   (3, 5, 2, 3, 3,32,33,322)
rects2 = ax.bar(ind+width, womenMeans, width, color='y', yerr=womenStd)

# add some
ax.set_ylabel('Scores')
ax.set_title('Scores by group and gender')
ax.set_xticks(ind+width)
ax.set_xticklabels( ('G1', 'G2', 'G3', 'G4', 'G5','K','K','Z') )

ax.legend( (rects1[0], rects2[0]), ('Men', 'Women') )
ax.set_ylim(0)

def autolabel(rects):
    # attach some text labels
    for rect in rects:
        height = rect.get_height()
        ax.text(rect.get_x()+rect.get_width()/2., 1.05*height, '%d'%int(height),
                ha='center', va='bottom')

autolabel(rects1)
autolabel(rects2)

plt.show() 
```

这条线`ax.set_ylim(0)`可以解决问题。

# c++ - 标准容器的模板类型定义（没有专门化）？

> ID：10351767
> 
> 赞同：7
> 
> 时间：2012-04-27T13:44:25.647
> 
> 标签：c++, templates, typedef, template-specialization, specialization

是否可以在不专门化的情况下在 std 容器上使用 typedef？

像这样的代码有效：

```
typedef std::vector<int> intVector; 
```

但是对于这段代码：

```
template <typename T>
typedef std::vector<T> DynamicArray<T>; 
```

我收到一个错误：

> 'typedef' 的模板声明

在 C++ 中可以做到这一点？？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-27T13:48:24.870

是的，在 C++11 中。

```
template <typename T>
using DynamicArray = std::vector<T>; 
```

（并不是说您应该使用这个确切的别名。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-27T13:48:28.037

如果您的编译器支持 c++11：

```
template <typename T>
using DynamicArray = std::vector<T>; 
```

否则（c++98 或更早版本）您可以使用如下帮助结构

```
template<typename T>
struct DynamicArray
{
  typedef std::vector<T> type;
}; 
```

然后将其用作

```
DynamicArray<int>::type my_array; 
```

从 std::vector 继承是一种可能的解决方案，但请注意 STL 容器没有虚拟析构函数。IE：

```
template <typename T>
struct DynamicArray: vector<T> { ... };

int main() {
  vector<int>* p = new DynamicArray<int>();
  delete p; // this is Undefined Behavior
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-27T13:50:57.483

此语法在 C++ 中无效，没有像“模板 typedef”这样的功能。

```
template <typename T>
typedef std::vector<T> DynamicArray<T>; 
```

但是，C++11 引入了一个模板别名语法，几乎是这样的：

```
template <typename T>
using DynamicArray =  std::vector<T>; 
```

在 C++03 中，您可以使用模板元函数，例如：

```
template<class T>
struct DynamicArray
{
    typedef std::vector<T> type;
}; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-27T13:48:18.390

常见的解决方案（如果您不使用 C++ 11）是这样做的：

```
template<class T>
struct DynamicArray
{
    typedef std::vector<T> Type;
}; 
```

并将其用作`DynamicArray<Something>::Type`.

# c# - 每个方法调用的设置回调使用最小起订量

> ID：10351768
> 
> 赞同：2
> 
> 时间：2012-04-27T13:44:30.553
> 
> 标签：c#, .net, moq

有没有办法在不设置每个方法的情况下将回调附加到模拟的每个方法？例如

```
var serviceMock = new Mock<IService>();    
var count = 0;

//method does not exist, but you get the picture
serviceMock.CallbackAllMethods( () => { count++; throw new WebException()}; ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:45:41.150

[AutoFixture](http://autofixture.codeplex.com/)与 Moq 有很好的集成，并且会自动设置这样的方法。

[Mark Seemann 的博客上](http://blog.ploeh.dk/2010/08/19/AutoFixtureAsAnAutomockingContainer.aspx)有一个很好的介绍。

# jquery - $ 文档准备好在 ie8 中不起作用

> ID：10351770
> 
> 赞同：0
> 
> 时间：2012-04-27T13:44:44.563
> 
> 标签：jquery, internet-explorer-8

我的 javascript 无法在 IE8 中运行有一点问题。在 Firefox、ie9 和 chrome 中运行良好，但在 ie8 中运行良好。我知道这与准备在 ie8 中以不同方式工作的文档有关，但我找不到答案。请参阅下面的代码。

```
// JavaScript Document
/* Set Opacity to 0 for all list items that do not have class show
This prevents the gallery animation from jumping around unexpectedly.
*/
function clearShowClass() {
    setTimeout(timedInterval, 1000);
};

function timedInterval() {
    $('ul.slideshow li').not('.show').css("opacity", 0);
    clearShowClass();
};

function slideShow(speed) {

    //Call the gallery function to run the slideshow
    var timer = setInterval('gallery()', speed);

    //Pause the slideshow on mouse over content
    $('#footer, ul.slideshow').hover(

    function () {
            clearInterval(timer);
    },

    function () {
            timer = setInterval('gallery()', speed);
    });
} // End of slideshow
/* Slideshow gallery main images */

function gallery() {
    //if no IMGs have the show class, grab the first image
    var current = ($('ul.slideshow li.show') ? $('ul.slideshow li.show') : $('#ul.slideshow li.first'));

    //Get next image, if it reached the end of the slideshow, rotate it back to the first image
    var next = ((current.next().length) ? ((current.next().attr('id') == 'slideshow-caption') ? $('ul.slideshow li:first') : current.next()) : $('ul.slideshow li:first'));

    //Set the fade in effect for the next image, show class has higher z-index
    next.css({
            opacity: 4.0
    }).addClass('show').animate({
            opacity: 4.0
    }, 1000);

    // Hide the current image
    current.animate({
            opacity: 0.0
    }, 1000).removeClass('show');

    //if no thumbnails have the highlight class, grab the first thumbnail
    var currentThumb = ($('#footer li.highlight') ? $('#footer li.highlight') : $('#footer li:first'));

    var nextThumb = ($('#footer li:last').hasClass('highlight')) ? $('#footer li:nth-child(1)') : $('#footer li.highlight').next($('#footer li'));

    nextThumb.addClass('highlight');
    currentThumb.removeClass('highlight');
}; // End of Gallery
function thumbInt() {
    for (i = 1; i <= $('ul.slideshow li').length; i++) {
            $('#footer .thumbnail' + i).bind('click', {
                    iteration: i
            }, function (event) {
                    $('ul.slideshow li').removeClass('show').css("opacity", 0).add($('ul.slideshow li:nth-child(' + event.data.iteration + ')').addClass('show').css("opacity", 0.0).animate({
                            opacity: 1.0
                    }, 1000));

                    $('#footer li').removeClass('highlight').add($('#footer li:nth-child(' + event.data.iteration + ')').addClass('highlight').add($('#footer li:nth-child(' + event.data.iteration + ') img')));
            });
    };
};

var prmEnd = Sys.WebForms.PageRequestManager.getInstance();
prmEnd.add_endRequest(function () {

    thumbInt(); // Assign int to thumbnail list items
    clearShowClass(); // Prevents multiple li having .show
    $('#footer img').mouseover(

    function () {
            $(this).animate({
                    opacity: 3.7
            })
    });

    $('#footer img').mouseout(

    function () {

            $(this).animate({
                    opacity: 0.7
            })
    });

    //Set the opacity of all images to 0
    $('ul.slideshow li').css({
            opacity: 0.0
    });

    //Get the first image and display it (set it to full opacity)
    $('ul.slideshow li:first').css({
            opacity: 1.0
    }).addClass('show');

    //Get the first thumbnail and change css
    $('#footer li:first').css({
            opacity: 1.0
    }).addClass('highlight');

});

$(document).ready(function () {

    slideShow(6000);

    thumbInt(); // Assign int to thumbnail list items
    clearShowClass(); // Prevents multiple li having .show
    $('#footer img').mouseover(

    function () {

            $(this).animate({

                    opacity: 3.7

            })

    });

    $('#footer img').mouseout(

    function () {

            $(this).animate({
                    opacity: 0.7
            })
    });

}); 
```

此页面的工作方式是用户单击单选按钮以触发 _dopostback 并显示图像库。问题是当我执行 _dopostback 时，文档就绪代码不再起作用，但这仅发生在 ie8 中。我正在使用 Sys.WebForms.PageRequestManager.getInstance(); 在我的更新面板中更新后运行的代码。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T13:21:06.570

有同样的问题。IE8 document.ready 函数甚至没有发出警报。我通过将 jquery 版本从 1.10.1 更新到 1.10.2 并且还包括推荐的 migrate js 解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T18:09:48.647

我有同样的问题。通过将 script type="application/javascript" 更改为 type="text/javascript" 解决了我的问题

# python - 将字符串列表转换为整数列表

> ID：10351772
> 
> 赞同：15
> 
> 时间：2012-04-27T13:44:46.600
> 
> 标签：python, list, input, integer

如何将空格分隔的整数输入转换为整数列表？

示例输入：

```
list1 = list(input("Enter the unfriendly numbers: ")) 
```

转换示例：

```
['1', '2', '3', '4', '5']  to  [1, 2, 3, 4, 5] 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-27T13:47:27.477

`map()`是你的朋友，它将作为第一个参数给出的函数应用于列表中的所有项目。

```
map(int, yourlist) 
```

因为它映射了每个可迭代对象，您甚至可以执行以下操作：

```
map(int, input("Enter the unfriendly numbers: ")) 
```

其中（在 python3.x 中）返回一个地图对象，可以将其转换为列表。我假设您使用的是 python3，因为您使用的是`input`，而不是`raw_input`.

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-27T13:48:12.437

一种方法是使用列表推导：

```
intlist = [int(x) for x in stringlist] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-27T14:46:10.860

这有效：

```
nums = [int(x) for x in intstringlist] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T13:48:05.790

你可以试试：

```
x = [int(n) for n in x] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-22T05:40:36.050

Say there is a list of strings named *list_of_strings* and output is list of integers named *list_of_int*. *map* function is a builtin python function which can be used for this operation.

```
'''Python 2.7'''
list_of_strings = ['11','12','13']
list_of_int = map(int,list_of_strings)
print list_of_int 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-27T15:46:10.480

```
 l=['1','2','3','4','5']

for i in range(0,len(l)):
    l[i]=int(l[i]) 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-04-27T13:51:30.420

只是好奇你得到'1'，'2'，'3'，'4'而不是1、2、3、4的方式。无论如何。

```
>>> list1 = list(input("Enter the unfriendly numbers: "))
Enter the unfriendly numbers: 1, 2, 3, 4
>>> list1 = list(input("Enter the unfriendly numbers: "))
Enter the unfriendly numbers: [1, 2, 3, 4]
>>> list1
[1, 2, 3, 4]
>>> list1 = list(input("Enter the unfriendly numbers: "))
Enter the unfriendly numbers: '1234'
>>> list1 = list(input("Enter the unfriendly numbers: ")) 
Enter the unfriendly numbers: '1', '2', '3', '4'
>>> list1
['1', '2', '3', '4'] 
```

好的，一些代码

```
>>> list1 = input("Enter the unfriendly numbers: ")
Enter the unfriendly numbers: map(int, ['1', '2', '3', '4'])
>>> list1
[1, 2, 3, 4] 
```

# java - 什么是 jar 文件 - “org.jvnet.jax_ws_commons.dime.binding.DimeBindingID”

> ID：10351773
> 
> 赞同：0
> 
> 时间：2012-04-27T13:44:48.453
> 
> 标签：java, soap, jax-ws, attachment

我正在尝试使用[JAX-WS DIME 编码器](http://jax-ws-commons.java.net/dime/)来发送和接收 DIME 附件以及 SOAP 消息。

但是，我无法搜索 .jar 文件所需的 jar 文件`org.jvnet.jax_ws_commons.dime.binding.DimeBindingID`。

有人可以告诉我应该在 CLASSPATH 中包含哪个 jar 文件来编译 java 代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:57:06.837

看起来它来自[JAX-WS commons](http://java.net/projects/jax-ws-commons)。您正在寻找的包和类在[他们的 SVN repo](http://java.net/projects/jax-ws-commons/sources/svn/show/trunk/dime/src/main/java/org/jvnet/jax_ws_commons/dime/binding?rev=987)中。由于它是一个 java.net 项目，因此您可以在[java.net maven repo](http://download.java.net/maven/2/org/jvnet/jax-ws-commons/dime/)中找到该 jar 。

# ruby-on-rails - button_to 不工作

> ID：10351775
> 
> 赞同：1
> 
> 时间：2012-04-27T13:44:49.750
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在视图表中有一个 button_to 辅助方法，我无法按照我需要的方式工作。我正在使用它来删除与构建表不同的模型中的记录，并且我没有 :id for 但我确实有其他参数可以找到正确的记录。基于此处的其他问题，我认为以下语法应该是正确的；

`<%= button_to 'Remove',mailing_list_edit_path(:arg1 => "value1", :arg2 => "value2"),:method => :delete,:confirm => "are you sure?" %>`

但是当我单击按钮时出现此错误；

```
Routing Error
No route matches [DELETE] "/assets"
Try running rake routes for more information on available routes. 
```

这是我的 routes.rb 中的条目

```
resources :mailing_list_edits, only: [:create, :destroy] 
```

我的控制器中的动作

```
def destroy
MailingListEdit.where(:att1 => params[:arg1], :att2 => params[:arg2]).delete_all
respond_to do |format|
format.html { redirect_to controller1_index_path(session[:remember_token]) }
end
end 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T14:06:39.733

我认为您不会将要销毁的对象提供给您的链接。实际上 ressources 构建的 destroy 方法是一个成员路由：它需要对象来销毁。

举个例子： `<%= button_to 'Remove',mailing_list_edit_path(@object_to_destroy, :arg1 => "value1", :arg2 => "value2"),:method => :delete,:confirm => "are you sure?" %>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T17:57:48.450

我找到了一种解决方法，以防它对其他人有所帮助，就在这里。

如果没有 :id，路径助手将无法工作，因此我包含了一个虚拟 :id，现在我能够传递我需要查找和销毁的两个属性。所以我的 button_to 现在看起来像这样；

`<%= button_to 'Remove',mailing_list_edit_path(:id => "foobar", :arg1 => "value1", :arg2 => "value2"),:method => :delete,:confirm => "are you sure?" %>`

有点黑客，但它的工作原理！

# iphone - 在 iOS 中管理数千个注释

> ID：10351780
> 
> 赞同：0
> 
> 时间：2012-04-27T13:45:11.163
> 
> 标签：iphone, annotations, mapkit

所以我制作了一个 iOS 应用程序，其中我有一个包含数千个注释的地图。我的问题如下：注释是从站点数据库加载的，每当移动地图时我都会查询新的注释，但这会导致多次查询相同的注释，有人知道不这样做的好算法吗？

还有一个后续问题：我只想在某个缩放级别显示注释（我已经在我的地图中实现了缩放级别，就像在 googleMaps API 中一样）。我可以以某种方式使某些注释在某个缩放级别不可见吗？在那种情况下，我该怎么做？

编辑：感谢 Sanjay Chaudhry 的提示。尽管我采用了与视频中建议的方式略有不同的注释分组方法。虽然我仍然不知道如何有效地查询服务器以获取注释，而不会泛滥和查询已经收到的注释。

EDIT2：我仍然没有找到关于如何从网站查询新注释而不查询已经获取的注释的好方法。有谁知道一些将国家划分为 MapRects 的智能算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:04:47.920

如果您是注册开发人员，请观看 WWDC 2011 的以下视频。它有一个演示，正是这样做的：

[https://developer.apple.com/videos/wwdc/2011/includes/visualizing-information-geographically-with-mapkit.html#visualizing-information-geographically-with-mapkit](https://developer.apple.com/videos/wwdc/2011/includes/visualizing-information-geographically-with-mapkit.html#visualizing-information-geographically-with-mapkit)

本质上，如果在一个小的地理区域中有许多注解，它们会在地图缩小时被单个注解替换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T15:42:24.327

MapKit 在管理注释方面做得很好——通常一次添加尽可能多的东西比在地图移动时不断添加和删除它们要好。注释可以是非常小的对象——你只需要足够的信息来在需要时找到相关数据——因此你可以一次添加数千个而不用太担心使用太多内存。

# android - 在 TableLayout 中添加行时出现 NullPointerException

> ID：10351783
> 
> 赞同：0
> 
> 时间：2012-04-27T13:45:21.700
> 
> 标签：android, android-tablelayout, tablelayout

```
 TableLayout table = (TableLayout) findViewById(R.id.TableLayout1);
  TableRow row = new TableRow(this);
  TextView t = new TextView(this);
  t.setText(String.valueOf(day[i]));
  row.addView(t);
  table.addView(row,new TableLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT)); 
```

最后一条指令是给我`"Unable to start activity component info: java.lang.NullPointerException"`. 但是，具有相同指令的干净项​​目中的相同代码不是......

是`table.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

<TableLayout android:id="@+id/TableLayout1" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"  
    android:stretchColumns="0">
</TableLayout>
</LinearLayout> 
```

日志：

```
04-27 14:19:27.267: E/AndroidRuntime(2503): FATAL EXCEPTION: main
04-27 14:19:27.267: E/AndroidRuntime(2503): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.seapredictions/com.seapredictions.ShowData}: java.lang.NullPointerException
04-27 14:19:27.267: E/AndroidRuntime(2503):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
04-27 14:19:27.267: E/AndroidRuntime(2503):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
04-27 14:19:27.267: E/AndroidRuntime(2503):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
04-27 14:19:27.267: E/AndroidRuntime(2503):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
04-27 14:19:27.267: E/AndroidRuntime(2503):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-27 14:19:27.267: E/AndroidRuntime(2503):     at android.os.Looper.loop(Looper.java:137)
04-27 14:19:27.267: E/AndroidRuntime(2503):     at android.app.ActivityThread.main(ActivityThread.java:4424)
04-27 14:19:27.267: E/AndroidRuntime(2503):     at java.lang.reflect.Method.invokeNative(Native Method)
04-27 14:19:27.267: E/AndroidRuntime(2503):     at java.lang.reflect.Method.invoke(Method.java:511)
04-27 14:19:27.267: E/AndroidRuntime(2503):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-27 14:19:27.267: E/AndroidRuntime(2503):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-27 14:19:27.267: E/AndroidRuntime(2503):     at dalvik.system.NativeStart.main(Native Method)
04-27 14:19:27.267: E/AndroidRuntime(2503): Caused by: java.lang.NullPointerException
04-27 14:19:27.267: E/AndroidRuntime(2503):     at com.seapredictions.ShowData.onCreate(ShowData.java:33)
04-27 14:19:27.267: E/AndroidRuntime(2503):     at android.app.Activity.performCreate(Activity.java:4465)
04-27 14:19:27.267: E/AndroidRuntime(2503):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-27 14:19:27.267: E/AndroidRuntime(2503):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
04-27 14:19:27.267: E/AndroidRuntime(2503):     ... 11 more
04-27 14:19:27.636: I/dalvikvm(2503): threadid=3: reacting to signal 3
04-27 14:19:27.676: I/dalvikvm(2503): Wrote stack traces to '/data/anr/traces.txt'
04-27 14:19:27.807: I/dalvikvm(2503): threadid=3: reacting to signal 3
04-27 14:19:27.827: I/dalvikvm(2503): Wrote stack traces to '/data/anr/traces.txt'
04-27 14:19:27.887: D/dalvikvm(2503): GC_CONCURRENT freed 230K, 4% free 9243K/9543K, paused 3ms+3ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:48:29.117

试试这个：

```
 TableLayout table = (TableLayout) findViewById(R.id.TableLayout1);
 TableRow tr1 = new TableRow(this);
      tr1.setLayoutParams(new LayoutParams( LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
      TextView textview = new TextView(this);
      textview.setText("Hello world");   //or whatever you want

      tr1.addView(textview);
      table.addView(tr1, new TableLayout.LayoutParams(
              LayoutParams.WRAP_CONTENT,
             LayoutParams.WRAP_CONTENT)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T13:54:30.627

尝试这个：

```
TableLayout table = (TableLayout) findViewById(R.id.TableLayout1);
TableRow row = new TableRow(this);
TextView t = new TextView(this);
t.setText(String.valueOf(day[i]));
row.addView(t);
table.addView(row,new TableLayout.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT)); 
```

或者你可以使用这种方式：

```
TableLayout table = (TableLayout) findViewById(R.id.TableLayout1);
TableRow row = new TableRow(this);

LinearLayout outerLayout = new LinearLayout(this);

LinearLayout.LayoutParams textLayoutParams = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT);

textLayoutParams.setMargins(100, 0, 0, 0);

TextView t = new TextView(this);

t.setText(String.valueOf(day[i]));

outerLayout.addView(t, textLayoutParams);

row.addView(outerLayout);

table.addView(row); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T23:07:18.503

也许您在不同的 XML 中有重复的元素，称为 TableLayout1？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-18T23:58:10.927

好吧，我用了，下一个，删除XML文件的Tablelayout，在同一个位置新建一个，用另一个id，例如：android:id="@+id/tableMenu"，你的文件java就是下一个：

TableLayout myTable = (TableLayout) findViewById(R.id.tableMenu);

是我的解决方案，你可以试试

# cakephp - CakePHP hasAndBelongsToMany vs hasMany through

> ID：10351784
> 
> 赞同：1
> 
> 时间：2012-04-27T13:45:29.547
> 
> 标签：cakephp, has-and-belongs-to-many, has-many-through

这只是我的第三个 CakePHP 应用程序，也是第一个需要 HABTM 类型关联的应用程序。我正在使用 Cake 2.1，其中对 HABTM 参数进行了更改，允许通过将“唯一”键设置为“keepExisting”来保存额外信息。在正常的 HABTM 关联中，您有一个包含 2 个字段的表，每个字段都是外键。我想我需要一个有 3 个外键的。是否可以通过使用“唯一”键，或者我应该通过关联使用 hasMany？

这是我的架构：

```
/* repair_orders */
CREATE TABLE repair_orders (
    id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    number VARCHAR(16),  //Auto-generated repair order number 
    created DATETIME DEFAULT NULL,
    modified DATETIME DEFAULT NULL
);

/* Employees */
CREATE TABLE employees (
    id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(16), 
    created DATETIME DEFAULT NULL,
    modified DATETIME DEFAULT NULL
);

/* op_codes */
CREATE TABLE op_codes (
    id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(16),
    sale_material DECIMAL(10,2),
    cost_material DECIMAL(10,2), 
    created DATETIME DEFAULT NULL,
    modified DATETIME DEFAULT NULL
); 
```

操作码本质上是一个项目列表及其成本。

维修订单可以有多个操作码。我还需要跟踪每个维修订单上分配给特定操作代码的员工。所以我认为这需要另一个表，例如：

```
/* repair_order_assignments */
CREATE TABLE repair_order_assignments (
    repair_order_id INT(16),
    op_code_id INT(16),
    employee_id INT(16)
); 
```

所以我的联想是：

```
Repair_Order_Assignment hasMany Employee, Op_Code
Employee belongsTo Repair_Order_Assignment
Op_Code belongsTo Repair_Order_Assignment

Repair_Order_Assignment hasAndBelongsToMany Repair_Order
Repair_Order hasAndBelongsToMany Repair_Order_Assignment 
```

根据手册，当hasAndBelongsToMany关联被保存时，关联先被删除。您会丢失列中的额外数据，因为它不会在新插入中被替换。然而，它继续注意到在 2.1 中有一个可以设置的唯一变量来保存额外的数据。此设置将与唯一键一起使用还是我应该使用 hasMany through 方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T15:41:27.440

我发现 HABTM 关系的唯一对象是标签和多个类别。

我使用的任何类型的会员、友谊或追随关系都有很多通过，因为有时将额外的数据附加到关系中会很好，即使它只是创建/修改的。让我对 HABTM 感到失望的另一件事是更新时替换所有内容的逻辑。导致很多麻烦保存模型的不同部分。

# ruby - Ruby：包含动态模块名称

> ID：10351787
> 
> 赞同：9
> 
> 时间：2012-04-27T13:45:35.427
> 
> 标签：ruby, ruby-on-rails-3, dynamic

我的 Rails 应用程序中有一种情况，我需要根据当前运行时状态包含任意模块。该模块提供了仅在某些条件为真时才需要的自定义应用程序代码。基本上，我从当前上下文中提取公司名称并将其用作模块及其定义的文件名：

```
p =  self.user.company.subdomain + ".rb"
if File.exists?(Rails.root + "lib/" + p)
include self.class.const_get(self.user.company.subdomain.capitalize.to_sym)
    self.custom_add_url
end 
```

我的测试模块如下所示：

```
module Companyx
    def custom_add_url
    puts "Calling custom_add_url"   
end 
end 
```

现在在控制台中，这实际上工作正常。我可以拉一个用户并像这样包含模块：

```
[1] pry(main)> c = Card.find_by_personal_url("username")
[2] pry(main)> include c.class.const_get(c.user.company.subdomain.capitalize)=> Object
[3] pry(main)> c.custom_add_url 
```

调用 custom_add_url

如果我尝试从我的模型中运行包含行，我会得到

```
NoMethodError: undefined method `include' for #<Card:0x007f91f9094fb0> 
```

谁能建议为什么 include 语句可以在控制台上工作，但不能在我的模型代码中工作？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-26T16:18:46.700

我正在做类似的事情。我发现这个答案很有用： [如何在 Ruby 中将字符串转换为常量？](https://stackoverflow.com/questions/2361347/how-to-convert-a-string-to-a-constant-in-ruby)

原来我正在寻找常量化方法。这是我在代码中使用的行：

```
include "ModuleName::#{var.attr}".constantize 
```

**编辑：**

所以 ack，我自己在实际使用那条线时遇到了各种问题。部分原因是我试图在类的方法中调用它。但是由于我只在类中调用一个方法（调用/运行其他所有方法），所以我现在拥有的最终工作版本是

```
"ModuleName::#{var.attr}".constantize.new.methodname 
```

显然 methodname 是一个实例方法，所以如果你的方法是类方法，你可以摆脱 new 。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T13:49:18.100

Include 是一个类的方法。

如果要在模型中调用它，则需要在其单例类的上下文中执行代码。

```
p =  self.user.company.subdomain + ".rb"
if File.exists?(Rails.root + "lib/" + p)
myself = self
class_eval do
  include self.const_get(myself.user.company.subdomain.capitalize.to_sym)
end
self.custom_add_url 
```

编辑：

`class << self`不接受块；`class_eval`确实如此，因此它保留了局部变量的状态。我已经修改了我的解决方案以使用它。

# javascript - ScrollPane 发出“AJAX 错误”警报

> ID：10351788
> 
> 赞同：0
> 
> 时间：2012-04-27T13:45:36.550
> 
> 标签：javascript, jscrollpane

我在这里遇到问题：http: [//thehitz.com.br/loja.php](http://thehitz.com.br/loja.php)

页面加载时，出现 AJAX 错误警报，但脚本有效。该警报仅在我将 javascript 代码放入 html 时出现。我已经查看了代码并试图将导致这件烦人的事情发生但没有运气的因素本地化。请帮帮我。

```
 <script type="text/javascript">
        $(function() {

            // the element we want to apply the jScrollPane
            var $el                 = $('#conteudo-container').jScrollPane({
                verticalGutter  : -16
            }),

            // the extension functions and options  
                extensionPlugin     = {

                    extPluginOpts   : {
                        // speed for the fadeOut animation
                        mouseLeaveFadeSpeed : 500,
                        // scrollbar fades out after hovertimeout_t milliseconds
                        hovertimeout_t      : 1000,
                        // if set to false, the scrollbar will be shown on mouseenter and hidden on mouseleave
                        // if set to true, the same will happen, but the scrollbar will be also hidden on mouseenter after "hovertimeout_t" ms
                        // also, it will be shown when we start to scroll and hidden when stopping
                        useTimeout          : false,
                        // the extension only applies for devices with width > deviceWidth
                        deviceWidth         : 980
                    },
                    hovertimeout    : null, // timeout to hide the scrollbar
                    isScrollbarHover: false,// true if the mouse is over the scrollbar
                    elementtimeout  : null, // avoids showing the scrollbar when moving from inside the element to outside, passing over the scrollbar
                    isScrolling     : false,// true if scrolling
                    addHoverFunc    : function() {

                        // run only if the window has a width bigger than deviceWidth
                        if( $(window).width() <= this.extPluginOpts.deviceWidth ) return false;

                        var instance        = this;

                        // functions to show / hide the scrollbar
                        $.fn.jspmouseenter  = $.fn.show;
                        $.fn.jspmouseleave  = $.fn.fadeOut;

                        // hide the jScrollPane vertical bar
                        var $vBar           = this.getContentPane().siblings('.jspVerticalBar').hide();

                        /*
                         * mouseenter / mouseleave events on the main element
                         * also scrollstart / scrollstop - @James Padolsey : http://james.padolsey.com/javascript/special-scroll-events-for-jquery/
                         */
                        $el.bind('mouseenter.jsp',function() {

                            // show the scrollbar
                            $vBar.stop( true, true ).jspmouseenter();

                            if( !instance.extPluginOpts.useTimeout ) return false;

                            // hide the scrollbar after hovertimeout_t ms
                            clearTimeout( instance.hovertimeout );
                            instance.hovertimeout   = setTimeout(function() {
                                // if scrolling at the moment don't hide it
                                if( !instance.isScrolling )
                                    $vBar.stop( true, true ).jspmouseleave( instance.extPluginOpts.mouseLeaveFadeSpeed || 0 );
                            }, instance.extPluginOpts.hovertimeout_t );

                        }).bind('mouseleave.jsp',function() {

                            // hide the scrollbar
                            if( !instance.extPluginOpts.useTimeout )
                                $vBar.stop( true, true ).jspmouseleave( instance.extPluginOpts.mouseLeaveFadeSpeed || 0 );
                            else {
                            clearTimeout( instance.elementtimeout );
                            if( !instance.isScrolling )
                                    $vBar.stop( true, true ).jspmouseleave( instance.extPluginOpts.mouseLeaveFadeSpeed || 0 );
                            }

                        });

                        if( this.extPluginOpts.useTimeout ) {

                            $el.bind('scrollstart.jsp', function() {

                                // when scrolling show the scrollbar
                                clearTimeout( instance.hovertimeout );
                                instance.isScrolling    = true;
                                $vBar.stop( true, true ).jspmouseenter();

                            }).bind('scrollstop.jsp', function() {

                                // when stop scrolling hide the scrollbar (if not hovering it at the moment)
                                clearTimeout( instance.hovertimeout );
                                instance.isScrolling    = false;
                                instance.hovertimeout   = setTimeout(function() {
                                    if( !instance.isScrollbarHover )
                                        $vBar.stop( true, true ).jspmouseleave( instance.extPluginOpts.mouseLeaveFadeSpeed || 0 );
                                }, instance.extPluginOpts.hovertimeout_t );

                            });

                            // wrap the scrollbar
                            // we need this to be able to add the mouseenter / mouseleave events to the scrollbar
                            var $vBarWrapper    = $('<div/>').css({
                                position    : 'absolute',
                                left        : $vBar.css('left'),
                                top         : $vBar.css('top'),
                                right       : $vBar.css('right'),
                                bottom      : $vBar.css('bottom'),
                                width       : $vBar.width(),
                                height      : $vBar.height()
                            }).bind('mouseenter.jsp',function() {

                                clearTimeout( instance.hovertimeout );
                                clearTimeout( instance.elementtimeout );

                                instance.isScrollbarHover   = true;

                                // show the scrollbar after 100 ms.
                                // avoids showing the scrollbar when moving from inside the element to outside, passing over the scrollbar                              
                                instance.elementtimeout = setTimeout(function() {
                                    $vBar.stop( true, true ).jspmouseenter();
                                }, 100 );   

                            }).bind('mouseleave.jsp',function() {

                                // hide the scrollbar after hovertimeout_t
                                clearTimeout( instance.hovertimeout );
                                instance.isScrollbarHover   = false;
                                instance.hovertimeout = setTimeout(function() {
                                    // if scrolling at the moment don't hide it
                                    if( !instance.isScrolling )
                                        $vBar.stop( true, true ).jspmouseleave( instance.extPluginOpts.mouseLeaveFadeSpeed || 0 );
                                }, instance.extPluginOpts.hovertimeout_t );

                            });

                            $vBar.wrap( $vBarWrapper );

                        }

                    }

                },

                // the jScrollPane instance
                jspapi          = $el.data('jsp');

            // extend the jScollPane by merging 
            $.extend( true, jspapi, extensionPlugin );
            jspapi.addHoverFunc();

        });
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:34:43.123

好吧，如果您查看控制台，您会看到有一个 Ajax 发布请求失败：

```
"NetworkError: 405 Method Not Allowed - http://thehitz.com.br/jcart/js/jcart.min.js" 
```

# iphone - UIsplitview 不响应旋转

> ID：10351789
> 
> 赞同：0
> 
> 时间：2012-04-27T13:45:38.983
> 
> 标签：iphone, uisplitviewcontroller, uiinterfaceorientation, ipad

我正在使用 UISplitview 开发应用程序。

当我将设备从 Landscap 旋转到 Portrait 时，我设置了框架但未设置。在纵向模式下，只有详细视图。风景模式主视图和详细视图在那里。

那么我如何识别纵向模式下的旋转？

有什么方法吗？（比如在视图控制器中有 willAnimationRotationtoInterfaceorientation）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T01:20:53.237

据我了解，您希望能够在纵向视图中看到大师。

UISplitViewController 的设计专门隐藏了纵向模式的主视图。

有两种方法可以解决这里的情况。首先，您将 ViewController 控制器声明为 UISplitViewControllerDelegate。（哪个视图控制器作为委托？留在堆栈中的那个 - 让您确定它是主控还是细节）。

然后，您可以查看一些委托方法。

如果你想直接在下面的委托方法中以纵向模式显示主人：

```
- (BOOL)splitViewController:(UISplitViewController *)svc shouldHideViewController:(UIViewController *)vc inOrientation:(UIInterfaceOrientation)orientation 
```

你返回 NO（也就是你不希望它隐藏视图控制器）

默认情况下，横向是 no，这就是您看到两个视图的原因，而纵向是 yes，这就是您看不到主视图的原因。

话虽如此，更优雅的解决方案可能是隐藏主视图，然后在导航栏顶部放置一个按钮，单击该按钮后，您将看到主视图以纵向模式显示。在主视图之外单击时，主视图将被隐藏。

为此，您不要使用上面的 BOOL 方法，而是实现另外两个委托方法：

```
– splitViewController:willHideViewController:withBarButtonItem:forPopoverController:
– splitViewController:willShowViewController:invalidatingBarButtonItem: 
```

搜索 UISplitViewControllerDelegate 的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T00:16:28.073

使用 iPad 的 Master-Detail Application Template 在 Xcode 中创建一个新项目。这个项目模板创建了一个响应界面方向的 UISplitViewController。因此，它完整而准确地向您展示了如何做您要求做的事情。

# php - 保留gif动画

> ID：10351795
> 
> 赞同：2
> 
> 时间：2012-04-27T13:46:08.420
> 
> 标签：php, gif

我正在使用以下脚本生成动画 GIF： http: [//www.jeroenvanwissen.nl/weblog/php/howto-generate-animated-gif-with-php](http://www.jeroenvanwissen.nl/weblog/php/howto-generate-animated-gif-with-php)

```
if (!getimagesize($_FILES['myfile']['tmp_name']))
{
    array_push($errors, 'Invalid image file');
}
else
{
    $uploaded_type = exif_imagetype($_FILES["myfile"]["tmp_name"]); 

    switch($uploaded_type) 
    {
        case '1':
            $uploaded_type = 'gif';

            if(is_ani($_FILES['myfile']['tmp_name']))
                $is_animated = true;

            $image = imagecreatefromgif($_FILES['myfile']['tmp_name']);

        break;
        case '2':
            $uploaded_type = 'jpg';
            $image = imagecreatefromjpeg($_FILES['myfile']['tmp_name']);
        break;
        case '3':
            $uploaded_type = 'png';
            $image = imagecreatefrompng($_FILES['myfile']['tmp_name']);
        break;
    }

    list($width, $height, $type, $attr) = getimagesize($_FILES['myfile']['tmp_name']);
    $originalWidth = $width;
    $originalHeight = $height;
}

$new_image = imagecreatetruecolor($newWidth, $newHeight);

imagecopyresampled($new_image, $image, 0, 0, 0, 0, $newWidth, $newHeight, $originalWidth, $originalHeight); 

ob_start();
imagegif($new_image);
$frames[]=ob_get_contents();
$framed[]=40; 
ob_end_clean();

ob_start();
imagegif($new_image);
$frames[]=ob_get_contents();
$framed[]=40; 
ob_end_clean();

$gif = new GIFEncoder($frames,$framed,0,2,0,0,0,'bin');

$fp = fopen($baseUrl . $filename, 'w');
fwrite($fp, $gif->GetAnimation());
fclose($fp); 
```

如果已经存在，有什么方法可以保留 gif 动画？我对动画 gif 的检查似乎有效，但我无法维护它。任何帮助深表感谢。

# sql-server - 需要不区分大小写的排序规则，其中 ss != ß

> ID：10351796
> 
> 赞同：5
> 
> 时间：2012-04-27T13:46:09.080
> 
> 标签：sql-server, collation

对于在 SQL Server Express 2012 上运行的数据库中的特定列，我需要一个排序规则，其中在比较字符串时 ss 和 ß 不被视为相同。ä 和 ae、ö 和 oe 以及 ü 和 ue 也应分别视为不同。Latin1_General_CI_AS 提供后者，但不区分 ss 和 ß。也就是说，`WHERE ThatColumn = 'Fass'`将同时产生`Fass`和`Faß`。

我会坚持使用 BIN/BIN2，但我需要不区分大小写。如果没有其他方法，我将不得不使用 Latin1_General_BIN/Latin1_General_BIN2 并确保自己的所有内容都是大写或小写。这将意味着更多的工作，因为我还需要能够检索具有适当大小写的版本。

但是，如果有一个排序规则可以满足我的需要，请告诉我。提前致谢！

更新：有关要求的更多信息：数据库包含来自仅支持 ASCII 字符的遗留系统的个人姓名。也就是说，像 Müller 和 Faß 这样的名称存储为 Mueller 和 Fass。在新系统中，用户将具有重命名这些人的功能，例如将“Mueller”重命名为“Müller”。要查找需要重命名的实体，我需要搜索包含例如“Fass”的行。但现在查询也返回“Faß”，这不是我想要的。我仍然需要/想要不区分大小写，因为用户应该能够搜索“fass”并仍然获得“Fass”。

系统还有更多内容，但我可以肯定地说，我需要区分 ss 和 ß、ä 和 ae 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T17:24:55.987

排序规则 SQL_Latin1_General_CP1_CI_AS 认为 'ss' 与 'ß' 不同，因此它可能对您有用。这是一个遗留排序规则，因此它可能与操作系统和应用程序平台不兼容。它可能还有其他我不知道的怪癖。

几年前，我针对类似问题草拟了一个笨拙的解决方法，您可以在[这里查看](http://connect.microsoft.com/SQLServer/feedback/details/341130/-and-ss-are-not-equal)。（单击“解决方法 (1)”选项卡。）这种情况下的问题是关于键列的唯一性，而不是字符串比较结果，因此将其应用于您的情况（并比较两列以进行单个字符串比较）可能是不可行的。

# c# - 单选框可点击图像

> ID：10351797
> 
> 赞同：0
> 
> 时间：2012-04-27T13:46:09.707
> 
> 标签：c#, jquery, asp.net, html, css

我试图弄清楚如何设置一组图像以像单选按钮一样工作。基本上，当用户单击图像时，它会在下面显示一个复选标记，表示它已被选中。我可以通过 onclick 事件和一些 css 完成显示我相信的复选标记。但是使用 ASP.net 执行此操作的最佳方法是什么，我还需要通过表单将数据传输到服务器。![在此处输入图像描述](../Images/118a31bc098e66c9a87a58833f194301.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:49:16.350

我将通过客户端代码用选择的结果值填充一个隐藏字段。然后，您只需在提交时在您的代码中读取该值。

# facebook-graph-api - 对 api 的依赖批处理请求中未引用字符串 ID。解决方法？

> ID：10351801
> 
> 赞同：0
> 
> 时间：2012-04-27T13:46:32.610
> 
> 标签：facebook-graph-api, facebook-fql, jsonpath

我目前正在尝试查询 facebook api 以通过带有两个 fql 查询的批处理请求来检索一些数据。

其中一个查询以下列形式获取一组专辑 ID：

```
Select aid FROM album WHERE ... 
```

当另一个尝试检索找到的相册的照片时：

```
SELECT ... FROM photo WHERE aid IN ({result=album_ids:$.*.aid}) 
```

其中“album_ids”是第一个查询的名称。

大多数情况下，这可以完美运行，但有时专辑会附带包含“_”的辅助工具——这很好，因为文档将辅助工具指定为字符串。但是，第二个查询中的 jsonpath 没有根据 facebook api 引用 id：

```
 Parser error: unexpected '_xxxxx' at position xx
 ...
 SELECT ... FROM photo WHERE aid IN (10000xxxxxxxxxx_xxxxx) 
```

第一个查询的 json 结果清楚地引用了它们：

```
 [{\"aid\":\"xxxxxxxxxxxxxxxxxxx\"},{\"aid\":\"10000xxxxxxxxxx_xxxxx\"},...] 
```

我是否在这里遗漏了什么，或者 facebook 是否错误地跳过在第二个查询中引用 id，即使它们显然是字符串。据我在 facebook-api 和 jsonpath 规范中看到的，这应该可以工作。

还是有一种解决方法可以使其按预期运行？（除了引用客户端和两个单独的请求）。

现在我正在尝试按照此处的建议更改我的查询：[引用/转义 jsonpath 元素以用于依赖 fql 查询的 in 子句](http://facebook.stackoverflow.com/questions/8171319/quoting-escaping-jsonpath-elements-for-in-clause-of-dependent-fql-queries) 但也许有一种方法无需完全重新构建查询本身。

# c# - 在 Visual Studio 项目中使用文本文件

> ID：10351802
> 
> 赞同：0
> 
> 时间：2012-04-27T13:46:32.887
> 
> 标签：c#, visual-studio-2010, project-management

我正在 VS2010 中制作控制台程序。解决方案资源管理器中列出的结构是项目文件、属性文件夹、参考和 Program.cs。

我想使用文本文件进行读/写。将此文件添加到项目中的正确方法是什么？如果我只是这样做`StreamWriter sw = new StreamWriter("maze.txt")`，它将在输出文件夹（bin/debug 或 bin/release）中创建文件。但它不会出现在解决方案资源管理器中。

现在，如果我右键单击解决方案资源管理器并添加新项目，我可以在根项目文件夹（与 Program.cs 相同级别）中创建一个文本文件。这将显示在解决方案资源管理器中。

有没有办法让我访问这个新创建的文件？`StreamWriter sw = new StreamWriter("../../maze.txt")`除了通过指定成为两个父母的路径之外做一些事情吗？

我应该如何在 Visual Studio 控制台应用程序中管理外部文件？在 WinForms 应用程序中，有一个资源文件夹，我可以在其中添加这些东西和一个`Resources.resx`文件来管理它。我可以使用`Properties.Resources.someres`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T13:50:57.640

如果您想在设计时创建一个文件并将其包含在您的 bin 文件夹中，则添加文本文件，转到属性，然后为复制属性选择“始终复制”或“如果较新则复制”。

请注意，这会将文件从项目复制到 bin 文件夹，但调试时 bin 文件夹中的更改不会复制到项目本身。我怀疑您是否希望程序与项目本身中的文件版本进行交互。如果您这样做，那么任何时候您在 VS 之外运行程序（即，当您将其复制到实际用户的机器时）它都不会工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T13:57:59.910

**至于您的资源问题**，您仍然可以使用资源。只需右键单击并“添加”->“新建项目”（也称为键盘快捷键 Ctrl+Shift+A），然后选择“资源文件”。您还可以[将文本文件设置为 Embedded Resource](http://msdn.microsoft.com/en-us/library/e2c9s1d7%28v=vs.80%29.aspx)。[MSDN 在他们的管理应用程序资源页面](http://msdn.microsoft.com/en-us/library/9za7fxc7%28v=vs.80%29.aspx)上有很多关于使用资源的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T13:58:11.803

**您仍然可以将资源嵌入控制台应用程序。**我已经在快速应用程序中使用了这种技术，因此我们不需要安装程序或部署诸如此类文件之类的依赖项。这个[问题](https://stackoverflow.com/questions/7758766/how-to-get-a-stream-object-from-a-resource-file-console-app-windows-service-pro)讨论了一个类似的话题。

# java - Jtable 上的 Ctrl-V

> ID：10351803
> 
> 赞同：2
> 
> 时间：2012-04-27T13:46:32.547
> 
> 标签：java, swing, jtable, spreadsheet, copy-paste

为什么如果我将 jTable 设置为 SINGLE_INTERVAL_SELECTION，并且我在一列中复制 5 个单元格，我无法将这 5 个单元格粘贴到不同的列（但我可以将它们粘贴到 excel 中）？

任何有关如何启用此功能的有用提示也将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T14:35:54.687

*   你看过拖放

*   您可以从保存在系统剪贴板中的 JTextComponents 复制和粘贴字符串值

*   JTable 只能占用整行

*   您可以将值粘贴到处于编辑模式的单个 JTable 单元格

# c - malloc() 时的 C 结构指针 Seg.fault

> ID：10351804
> 
> 赞同：0
> 
> 时间：2012-04-27T13:46:33.027
> 
> 标签：c, pointers, struct, malloc

我正在尝试从这篇文章[https://stackoverflow.com/a/827749](https://stackoverflow.com/a/827749)实现环形缓冲区，我添加的唯一代码是一个看起来像这样的 main 。

```
int main(int argc, char** argv) {
    circular_buffer *my_buff;
    cb_init(my_buff, 16, sizeof(char));

    return (EXIT_SUCCESS);
} 
```

但是，一旦我尝试运行此代码，就会收到 SIGSEV（分段错误）错误。从外观上看，它发生在调用 malloc() 的 cb_init() 的第一行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T13:49:35.957

您需要为`my_buff`

目前，您正在传递一个未初始化的指针`cb_init`，然后将其取消引用。

但我相信你一定已经意识到这一点，因为我相信你会尝试在调试器中运行代码......

# ruby-on-rails - 链接到页面 - Ruby on Rails

> ID：10351819
> 
> 赞同：1
> 
> 时间：2012-04-27T13:47:09.083
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有以下代码：

```
<% slika = Refinery::Page.find('sladoledi') %>
<%= link_to (image_tag slika.key_image.url, slika) %> 
```

问题是它没有链接到`slika`. 有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T13:58:54.473

试试这个格式

```
 <%= link_to(slika) do %>
   <%= image_tag(slika.key_image.url)%>
 <% end %> 
```

也看看文档有很好的例子如何使用 link_to() 帮助器

[http://apidock.com/rails/ActionView/Helpers/UrlHelper/link_to](http://apidock.com/rails/ActionView/Helpers/UrlHelper/link_to)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T13:56:03.297

首先开始嵌套您在此处编写的代码。人们在阅读这样的代码时遇到问题:(

如果要添加代码，请单击编辑器上的代码按钮。

我想问题是你没有结束 image_tag。

正确的形式是：

```
link_to(image_tag(slika.key_image.url),slika) 
```

# mysql - 1305 - 程序 db.delete_catelog_item 不存在

> ID：10351825
> 
> 赞同：3
> 
> 时间：2012-04-27T13:47:21.967
> 
> 标签：mysql, sql, stored-procedures

我刚刚`(name : 'delete_catelog_item does')`在数据库中创建了一个过程`(name : db)`并尝试运行该过程。然后我收到这样的错误`#1305 - PROCEDURE db.procedurename does not exist`。

我的查询

```
DELIMITER //
CREATE DEFINER=`root`@`localhost` PROCEDURE `delete_catelog_item`(IN itemtocatid INT(11),IN shopinid INT(11),OUT out_put BOOL)
BEGIN
     DECLARE cont INT(11);
     DECLARE itemid INT(11) DEFAULT 0;
     SELECT a.ItmId INTO itemid FROM mas_shop_item_to_category as a INNER JOIN mas_shop_item as b ON (a.ItmID=b.ItmID AND b.IsDelete!=1 AND b.ShopID IN (SELECT ShopID FROM mas_shop WHERE ShopID=shopinid OR ParentID=shopinid)) WHERE a.ItmToCatID=itemtocatid AND a.IsDelete!=1;
     IF itemid!=0 THEN
             UPDATE  mas_shop_item_to_category SET `IsDelete` = '1' WHERE ItmToCatID=itemtocatid;
             SELECT count(ItmToCatID) INTO cont  FROM mas_shop_item_to_category WHERE ItmId=itemid AND IsDelete!=1;
             IF cont=0 THEN
                UPDATE mas_shop_item SET `IsDelete` = '1' WHERE ItmID=itemid;
             END IF;
             SET out_put=TRUE;
     ELSE
             SET out_put=FALSE;
     END IF;
END //
DELIMITER ;

Apache/2.2.14 (Ubuntu)
MySQL client version: 5.1.41
PHP extension: mysql 
```

我无法弄清楚实际原因，但是当我检查数据库中的程序时，它就在那里。请帮助查找问题。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T13:53:30.070

从您提供的错误消息来看，您似乎已经尝试`CALL`通过 name 来处理您的过程`procedurename`，而您的`CREATE PROCEDURE`声明给它的 name `delete_catelog_item`。您需要`CALL`使用定义它的名称！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T06:52:49.973

我可以找出解决方案，问题出在数据库名称上。`"."`在我更改该名称后，它被命名为`"first.second"`问题不存在。谢谢你帮助我。

# css - css3 线性渐变颜色停止在 webkit 上的工作方式不同

> ID：10351836
> 
> 赞同：2
> 
> 时间：2012-04-27T13:47:55.080
> 
> 标签：css, webkit, cross-browser

参考：[www.get-offit.com](http://get-offit.com)

转到书籍封面几乎结束并且背景颜色发生变化的位置：

我们有：

```
html {
background: -moz-linear-gradient(top, #FFFFFF 500px, #EEEEEE 0px);
background: -ms-linear-gradient(top, #FFFFFF 500px, #EEEEEE 0px);
background: -o-linear-gradient(top, #FFFFFF 500px, #EEEEEE 0px);
background: -webkit-gradient(linear, 0 0, 0 100%, color-stop(5, #FFFFFF), to(#EEEEEE));
background: -webkit-linear-gradient(top, #FFFFFF 500px, #EEEEEE 0px);
background: linear-gradient(top, #FFFFFF 500px, #EEEEEE 0px); 
```

}

如果您使用 Firefox 打开该站点，您会在白色和灰色之间看到一条清晰的线，而不会出现任何渐变：

![火狐截图](../Images/76afa9a15659360687572aef5c43f662.png)

如果你用 chrome 打开网站，你会得到一个 5px 的灰色渐变，白色结束，灰色开始：

![铬截图](../Images/75ef5a6cd2adbd94a6230f338a985620.png)

如何使颜色突然停止而不像当前在 Firefox 上那样在 webkit 浏览器上显示实际渐变？

干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T06:10:08.770

尝试在 Microsoft 的网站（是的，Microsoft）上使用这个 css 工具：

[http://ie.microsoft.com/testdrive/graphics/cssgradientbackgroundmaker/default.html](http://ie.microsoft.com/testdrive/graphics/cssgradientbackgroundmaker/default.html)

它将有助于生成跨浏览器的 css 代码（不仅仅是 IE），并且还可以在稍微改变渐变效果时派上用场。您可以添加更多渐变点，甚至尝试不同的颜色。

这是来自在线工具的代码示例：

```
/* IE10 */ 
background-image: -ms-linear-gradient(top, #FFFFFF 0%, #EEEEEE 100%);

/* Mozilla Firefox */ 
background-image: -moz-linear-gradient(top, #FFFFFF 0%, #EEEEEE 100%);

/* Opera */ 
background-image: -o-linear-gradient(top, #FFFFFF 0%, #EEEEEE 100%);

/* Webkit (Safari/Chrome 10) */ 
background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #FFFFFF), color-stop(1, #EEEEEE));

/* Webkit (Chrome 11+) */ 
background-image: -webkit-linear-gradient(top, #FFFFFF 0%, #EEEEEE 100%);

/* Proposed W3C Markup */ 
background-image: linear-gradient(top, #FFFFFF 0%, #EEEEEE 100%); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T14:05:59.587

从在测试用例中重现这一点的一些尝试来看，问题可能是 Webkit 的实现在计算`html`没有直接指定高度时的确切高度时遇到了麻烦。将 a 设置`height`为 100% 或固定像素高度似乎可以清除它。但是我怀疑这是一个实用的解决方案。在我自己的使用中，我没有注意到这是其他元素的问题，所以也许它对在`html`.

如果这是 Webkit 的错误，那么您最好的解决方案可能是重新设计您的 css，以便可以将灰色背景应用于元素。显然这是适应 Webkit 的一个很大的改变，但它也会使背景与旧版本的 IE 兼容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T20:20:36.523

这只是 webkit 和壁虎之间的区别。不幸的是，在如此大的渐变尺寸上，看起来 webkit 采用了“快速”的方式来渲染巨大的渐变（不要忘记渐变是**浏览器生成的图像**）​​并且给它带来了一些模糊性。

尝试使用`background-position-y: 500px;`强制渐变从 webkit 顶部 500px 开始。

见小提琴：http: [//jsfiddle.net/3ampp/](http://jsfiddle.net/3ampp/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T15:05:39.947

你试过这个吗？

```
background: -moz-linear-gradient( top, #FFFFFF 500px, #EEEEEE 520px ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-06T13:15:36.103

如果你想在 webkit 中实现从 #fff 到 #eee 的稳固过渡，我认为你必须将渐变放在一边。如果你像这样设置你的CSS

```
html {
   background: #eee; 
   }

   body {
      background: #fff;
      height: 500px;
      } 
```

它将复制您尝试使用渐变实现的目标。（见屏幕截图）它也将是跨浏览器兼容的。我希望这有帮助。

![在此处输入图像描述](../Images/9cb066cbcf28dc344a592b58a34f922b.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-11T06:20:32.407

这适用于所有浏览器：

```
html {
background: -moz-linear-gradient(top, #FFFFFF 500px, #EEEEEE 0px);
background: -ms-linear-gradient(top, #FFFFFF 500px, #EEEEEE 0px);
background: -o-linear-gradient(top, #FFFFFF 500px, #EEEEEE 0px);
background: -webkit-linear-gradient(#FFFFFF 500px, #EEEEEE 0px);
background: linear-gradient(top, #FFFFFF 500px, #EEEEEE 0px);
} 
```

尽管您想要达到的效果不需要渐变。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-09T10:46:02.540

正如 egid 所说，chrome 确实采用了渲染渐变的快速路线。看到[这个 SO question](https://stackoverflow.com/questions/23627292/)和[this pen](http://codepen.io/elliz/pen/fCsay)进行很酷的动画演示。

# c# - Wp7：等待用户交互

> ID：10351848
> 
> 赞同：0
> 
> 时间：2012-04-27T13:48:26.683
> 
> 标签：c#, windows, windows-phone-7, input

我正在为 Windows Phone 开发一个简单的游戏。这是我的问题：

我必须对用户设置的变量进行“轮询”，但是当我使用时：while(var == null); 用户无法再与手机交互。我曾尝试使用 Thread.Sleep 但似乎该程序在进入时停止拦截用户事件。

我能做些什么来修复它？

谢谢

编辑：我只需要停止我的程序，直到用户更新该变量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:39:35.783

你想要什么样的功能？您想要用户可以按下的按钮之类的东西吗？然后使用事件。[这](http://create.msdn.com/en-US/education/catalog/sample/game_state_management)是一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:47:10.400

不要投票。向包含该属性的类添加一个事件，该事件将在属性更改时引发。

```
class Car
{
    private int _fuel;
    public int Fuel
    {
        get { return _fuel;}
        set
        {
            if(_fuel != value)
            {
                _fuel = value;
                var t = TankEmpty;
                if(t != null)
                {
                    t(this, EventArgs.Empty);
                }
            }
        }
     }

     public event EventHandler TankEmpty; 
}

class Driver
{
    private Car _car;

    Driver(Car car)
    {
        _car = car;
        _car.TankEmpty += Car_TankEmpty;
    }

    private void CarTank_Empty(object sender, EventArgs e)
    {
        //Push Car
    }
} 
```

# jquery - LI 中 IMG 的绝对位置

> ID：10351853
> 
> 赞同：0
> 
> 时间：2012-04-27T13:48:34.057
> 
> 标签：jquery, css, browser

我正在使用 jQuery 在导航的活动列表元素中添加图像（ul li.active）。工作正常。

出于设计目的，我想绝对定位这个 img 并添加一个`left: 50%;`使其居中。在除 OS X 上的 Firefox（最新）和 Windows XP 上的 Safari 之外的所有浏览器中都能正常工作。这些适用于`left: 50%;`相对于 UL 而不是 LI`position: relative;`

在它工作的地方，图像显示在我的 LI 内容下方的中心。

网址：[http](http://aerokure.steveforest.com/produits/insecticides-pour-le-jardin.html) ://aerokure.steveforest.com/produits/insecticides-pour-le-jardin.html 这是标志下方的黑色菜单。

正如一些人建议的那样，试图`display: block;`在 img 上放一个：什么都没有。

任何事物？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:00:14.687

我发现了问题

移除高度 = ul 元素

添加 float:left = li 元素

边距：0；= li 元素

它会正常工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:17:32.743

我认为您需要将列表项的显示从“table-cell”更改为：

```
display: inline-block; 
```

然后删除：

```
margin-bottom: 8px; 
```

造型。这似乎对我有用（OSX 上的 Firefox）。

如果您放置一个负边距，即图像宽度的一半，您实际上可以使其居中：

```
margin-left: -10px; 
```

# javascript - 检查是否进行了无线电选择

> ID：10351854
> 
> 赞同：0
> 
> 时间：2012-04-27T13:48:40.540
> 
> 标签：javascript, jquery

我无法检查我的表单中是否有单选选项。在我的表格中，我有 5 个项目，每个项目都有 2 个选项（单选按钮）。像这样的东西：

```
item 1    opt1   opt2   (name attribute is "1")
item 2    opt1   opt2   (name attribute is "2")
item 3    opt1   opt2
item 4    opt1   opt2
item 5    opt1   opt2 
```

我已经为所有输入单选按钮指定了与动态生成的项目相同的类名，输入的名称属性也是如此。这是我检查每个项目的代码：

```
$(document).ready(
    function(){
        $('#submit').click(function(){
                var buttons = document.getElementsByClassName('radio_class');
                var radio_num = buttons.length; //which returns 10 in this case
                var error = "";
                for (var i=0; i<radio_num; i=i+2){
                    var radio_name = buttons[i].getAttribute("name");
                    if (!$("input[@name=radio_name]:checked").val()) {
                        error += radio_name + " ";
                    }
                }
                if (error !== "") {
                    alert (error+"not checked!");
                    return false;
                }
                else {
                    alert ("All the items have been checked.")
                }
            }
        );
    }
); 
```

如果五个项目都没有检查，它会提示正确的消息“1 2 3 4 5 没有检查”，但是，如果我只检查一个项目，则消息“所有项目都已检查”。将收到警报。谁能帮我这个？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:52:01.033

你写的地方

```
if (!$("input[@name=radio_name]:checked").val()) {
    error += radio_name + " ";
} 
```

试试吧

```
if (!$("input[name='"+radio_name+"']:checked").val()) {
    error += radio_name + " ";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T13:54:28.850

我认为这可能会解决您的问题：

```
$(document).ready(function(){
    $('#submit').click(function(){
            var buttons = $('.radio_class');
            var radio_num = buttons.length;
            var error = "";
            $.each(buttons, function(index, val){
                var radio_name = $(this).attr("name");
                if( !$('[name="'+radio_name+'"]:checked').val() )
                    error += radio_name + " ";
            });

            if (error !== "")
            {
                alert (error+"not checked!");
                return false;
            }
            else {
                alert ("All the items have been checked.")
            }
        });
}); 
```

;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T14:03:07.300

```
$(document).ready(function(){
    $('#submit').click(function(){
        var error = "";
        $('.radio_class').each(function() {
            if (!$(this).is(':checked')) {
                error += $(this).attr('name') + " ";
            }
        });
        if (error != "") {
            alert (error+"not checked!");
            return false;
        }else {
            alert ("All the items have been checked.")
        }
   });
});​ 
```

[小提琴](http://jsfiddle.net/adeneo/PzDNx/1/)

# php - phpBB3 如何在论坛外获取会员姓名和头像图片

> ID：10351856
> 
> 赞同：0
> 
> 时间：2012-04-27T13:48:50.473
> 
> 标签：php, phpbb, phpbb3

我希望能够在我的网站上向我的论坛成员展示他们的图片和用户名（或只是他们的用户名）。我怎样才能得到这些信息？也许是 JSON？是否有可以做到这一点的插件，或者我需要直接对 phpBB 数据库进行自定义 MYSQL 查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:00:35.353

我会创建一个自定义的 mysql 查询。这样就灵活多了。[这](http://wiki.phpbb.com/Table.phpbb_users)是`Table.phpbb_users`. 您可能需要`username`or`username_clean`和`user_avatar`。

# asp.net-mvc-3 - 将 Telerik ComboBox 插入 Telerik ASP.Net MVC3 网格

> ID：10351857
> 
> 赞同：0
> 
> 时间：2012-04-27T13:48:54.840
> 
> 标签：asp.net-mvc-3, telerik, controls, viewmodel

我有一个 ASP.NET MVC3 视图，它有一个 Telerik Grid，它使用 viewmodel 的数据。

要求之一是我们需要在从查找表中获取数据的网格列之一中的下拉控件。

对于 MVC3 来说相对较新，我认为由于 Razor 视图只能使用一个模型指令 IE：

```
@model IEnumerable<MarketingWebsiteTools.Models.EditableItemInfo> 
```

下拉查找值需要与网格数据一起映射回 ViewModel。

在这一点上，提到我在 ClientTemplate 中使用 Html.Telerik().ComboBox() 可能是相关的，如下所示：

```
 .Columns(columns =>
    {
    columns.Bound(o => o.ItemNmbr).Width(65);//.ClientTemplate("<label  name='ProductIdentifier' />");
    columns.Bound(o => o.Description).Width(65)
                .ClientTemplate(Html.Telerik().ComboBox()
                .Name("Special")
                **.BindTo(new SelectList())**
                .ToHtmlString());
    columns.Bound(o => o.Start_Date).Width(75).Format("{0:d}");
    columns.Bound(o => o.End_Date).Width(75).Format("{0:d}");
    columns.Bound(o => o.PromotionText).Width(75);
    columns.Command(commands => commands.Delete()).Width(125).Title("Delete");
    }) 
```

我的问题是：关于 BindTo(new SelectList())，我需要提供 System.Collections.Generic.IEnumerable 类型的参数，但是我不确定如何从我的视图模型中获取它，或者我应该以另一种方式获取查找数据...

我看了这个例子： [http ://www.telerik.com/community/forums/aspnet-mvc/combobox/bindto.aspx](http://www.telerik.com/community/forums/aspnet-mvc/combobox/bindto.aspx)

但是，我的代码或智能感知似乎无法识别任何模型 IE： .BindTo(new SelectList(Model.))

我还看了这个例子： [如何在 Telerik 网格中插入下拉列表框](https://stackoverflow.com/questions/3752182/how-to-insert-dropdown-list-box-in-telerik-grid)

看起来在控制器中有对方法的调用，但同样，无法访问该控制器..

提前感谢您的帮助。

道格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T05:24:05.090

您可以使用***Template***轻松完成。从 Controller 仅使用***TempData***或***ViewBag***将数据传递给***View***。

```
@{
    List<AdjustmentReasonCodes> salesAuditReasons = new List<AdjustmentReasonCodes>();
    salesAuditReasons = (List<AdjustmentReasonCodes>)TempData["SalesAuditReason"];
}

column.Template(@<select id="@("ddlSalesAuditReason" + @item.CustCode.Replace(" ", "").Replace("-", "").Trim())" class="DropDown">
                    <option value="0">--Select--</option>
                    @foreach (AdjustmentReasonCodes adrc in salesAuditReasons)
                    {
                        if (item.RefReasonForAuditAdjustment == adrc.ReasonCode)
                        { 
                        <option value="@(adrc.ReasonCode)" selected="selected">@adrc.ReasonDescription</option> 
                        }
                        else
                        {                        
                        <option value="@(adrc.ReasonCode)">@adrc.ReasonDescription</option>
                        }
                    }
                </select>).Title("Audit Reason").Width(135); 
```

# java - 在 Java 中保留环境变量

> ID：10351858
> 
> 赞同：2
> 
> 时间：2012-04-27T13:48:59.057
> 
> 标签：java, environment-variables

我解决了在 stackoverflow 上发布的以前的问题。因此，我的 Java 应用程序修改了 System 环境，例如：

```
Map<String, String> env = System.getenv();
...
...
map.put("SOME_VAR_ENV", "SOME_KEY_VAR");* 
```

这似乎很好用，因为后面有几句话：

```
System.out.println(System.getenv("SOME_VAR_ENV"));* 
```

打印`SOME_KEY_VAR`。

而且，这是我的问题。在下一句中，我的 Java 应用程序将控制权交给了其他 Java 应用程序。我的 Java 应用程序。调用一个外部 Java 类，据我所知，它必须创建一个新的子进程才能运行。但是，它的新进程没有保留新的环境变量（SOME_VAR_ENV）。

我不知道发生了什么。为什么第二个应用程序没有保存环境？欢迎任何想法或帮助:)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:53:47.023

使用[`ProcessBuilder`](http://docs.oracle.com/javase/6/docs/api/java/lang/ProcessBuilder.html)API 启动子进程，它允许您设置环境变量：

```
 ProcessBuilder pb = new ProcessBuilder("myCommand", "myArg1", "myArg2");
 Map<String, String> env = pb.environment();
 env.put("VAR1", "myValue");
 env.remove("OTHERVAR");
 env.put("VAR2", env.get("VAR1") + "suffix");
 pb.directory(new File("myDir"));
 Process p = pb.start(); 
```

Java 中没有跨平台的方式来设置调用上下文的环境变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:37:50.980

查看写入，然后读取 Java[属性](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html)文件，

# android - 在android manageapplication中禁用卸载按钮

> ID：10351860
> 
> 赞同：-3
> 
> 时间：2012-04-27T13:49:00.097
> 
> 标签：android

如何禁用 android 管理应用程序中的卸载按钮？

如果我曾经在移动设备中安装了该应用程序，如果任何最终用户想要卸载该应用程序，那么他将无法卸载它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:11:41.247

使您的应用程序可卸载的唯一方法（好吧......如果用户使用的是有根手机，您真的不能）将它直接安装在 Android 包中，通过 ADB（在根时）将其推送到

> /系统/应用

目录...

然后，无论如何，对于具有标准访问用户电话的开发人员来说都是可能的。

# php - 错误的 if 语句

> ID：10351862
> 
> 赞同：-1
> 
> 时间：2012-04-27T13:49:05.817
> 
> 标签：php

我正在寻找一个很好的解释，说明使用以下哪一项的区别/优势是什么：

`if (!$whatever)`或者`if ($whatever == FALSE)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T13:51:15.767

它是相同的，但是大多数程序员更喜欢写 !$value，因为它更简洁。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T14:00:34.400

由于 PHP 的类型杂耍，这些是相同的。

注意：对于“falsey”值，这两个都将返回 true。如：

*   `0`
*   `null`
*   `array() // empty array`
*   `'' // blank string`
*   `FALSE`

这些都转换为 boolean `FALSE`， which `== FALSE`（和`!FALSE`is `TRUE`）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-27T14:07:17.337

尽管问题的答案似乎很明显，但也许它可能是一个好主意：

if (boolean expression) 构造检查表达式是否等于真。

```
$whatever = false;

!$whatever evaluates to:    
!($whatever) = true;

$whatever == false evaluates to:    
($whatever == false) = true;

if(true == true); 
```

主要区别在于！(not operator) 反转布尔值 (false -> true) 并且 if 构造检查此反转是否等于 true。

相等运算符评估 $whatever 是否等于该值（不一定是布尔值）， if 构造检查相等表达式是否为真。

TJHeuvel 是正确的，在这种情况下首选使用 not 运算符，因为它更简洁。考虑在不那么琐碎的事情上使用 not 运算符，例如：

```
if((ProgramState == ProgramState.Ready) == false) vs    
if (!(ProgramState == ProgramState.Ready)) vs    
if (ProgramState != ProgramState.Ready) 
```

后者更简洁（因此不等于运算符）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T15:03:41.723

```
if (!$whatever) 
```

只需获取 $whatever 的值并将其反转。

```
if ($whatever == FALSE) 
```

评估 $whatever 是否等于 FALSE

大多数人会说`if ($whatever == FALSE)`这是错误的，因为如果您考虑另一种情况 `if ($whatever == TRUE)`，您会发现它很愚蠢；你可以只使用`if($whatever)`. 当你这样做`if ($whatever == FALSE)`时，感觉他们是评估比较的额外不必要的步骤，即使我们不需要这样做。

他们的方式确实没有优势或劣势，因为它们具有相同的效果，但是您认为您写的其他人很愚蠢`if ($whatever == FALSE)`。 `($whatever == FALSE`感觉不必要的复杂和[鲁布戈德堡](http://en.wikipedia.org/wiki/Rube_Goldberg_machine)。执行起来也`if ($whatever == FALSE)` 可能较慢，但可以忽略不计。

# actionscript-3 - AS3 调整位图对象的大小以适合影片剪辑

> ID：10351873
> 
> 赞同：0
> 
> 时间：2012-04-27T13:49:44.637
> 
> 标签：actionscript-3, flash

我正在使用以下代码从网络摄像头获取图像。我面临的问题是我需要将“位图”适合 mcVideo。我不能只做 mcVideo.addChild(bitmap)，因为位图比 mcVideo 大。如何将位图放入 mcVideo 以进行预览？

谢谢！

```
var bandwidth:int = 0;
var quality:int = 100;

var cam:Camera;
var video:Video;
var captureVideo:Video;
var bitmapData:BitmapData;
var bitmap:Bitmap;    

public function Main() {

    mcCapture.addEventListener(MouseEvent.CLICK, mcCapture_Click);

    cam = Camera.getCamera();
    cam.setQuality(bandwidth, quality);
    cam.setMode(640,480,30,false);

    // The display object:
    video = new Video();
    video.attachCamera(cam);
    video.width = mcVideo.width;
    video.height = mcVideo.height;

    mcVideo.addChild(video);

    // Bitmap to capture full 640x480
    bitmapData = new BitmapData(cam.width, cam.height);
    bitmap = new Bitmap(bitmapData);
    bitmap.width = cam.width;
    bitmap.height = cam.height;

    trace("Set bitmap width: " + bitmap.width + " Height: " + bitmap.height);

}

public function mcCapture_Click(e:Event):void {

    bitmapData.draw(video);

            // Code to display preview

    trace("done");

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T08:32:50.730

您可以使用`addChild()`然后将 MC 的`scaleX`和`scaleY`属性设置为大约 0.5 或 0.2 来缩放位图以适应屏幕。

或者您可以使用自定义函数仅绘制位图的一部分，并对其进行裁剪。

```
var g:Graphics = MC.graphics;
g.beginBitmapFill(...)
g.drawRect(...)
g.endFill() 
```

# java - Java 应用程序设计建议：存储图像

> ID：10351880
> 
> 赞同：0
> 
> 时间：2012-04-27T13:50:05.340
> 
> 标签：java, jakarta-ee

我正在启动一个个人项目（Java Web 应用程序），以将我刚刚学到的一些技术付诸实践。我目前处于分析/设计阶段，我关心的一个问题是定义如何/在哪里存储图像。

假设我想以与商业项目相同的方式设计和实现我的 Web 应用程序，你会存储图像吗：

*   作为 BLOB 进入数据库（我相信从不推荐此选项）
*   只有 DB 中的文件名 + 将物理文件放在服务器上的某个位置
*   使用内容存储库工具，例如 JackRabbit

当然，欢迎任何其他建议和意见。

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:21:19.180

通常最好将文件存储在文件系统中。您可能会使用托管，这不会让您访问文件系统，那么您需要使用数据库。

请注意，您不需要使用 SQL 数据库，NoSql 数据存储有很多选项，可以[更好地](http://blog.mongodb.org/post/183689081/storing-large-objects-and-files-in-mongodb)处理存储文件。

如果是 Content Repository（如 Jackrabbit），您还需要选择实体店。您可以使用基于文件系统的存储或基于数据库的存储。请参阅[文档](http://wiki.apache.org/jackrabbit/DataStore)。

# ruby-on-rails - Ember-data、hasMany关系、加载子集合、嵌套路由

> ID：10351882
> 
> 赞同：3
> 
> 时间：2012-04-27T13:50:10.487
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ember.js, ember-data

我需要从带有 ember-data 及其默认 REST 适配器的 rails 后端加载模型。我有一个模型与另一个模型有很多关系：

```
App.Post = DS.Model.extend({
    title: DS.attr("String");
    comments: DS.hasMany('App.Comment', {keys: 'post_ids', embbeded: true});
})

App.Post = DS.Model.extend({
    body: DS.attr("String");
    post: DS.belongsTo('App.Post');
}) 
```

服务器返回的 JSON 模型看起来像

```
{
  title: "a title",
  comment_ids: [1,2,3,4]
} 
```

出于效率原因，我首先需要加载所有帖子而无需加载相关评论。我这样做

```
App.store.findAll('App.Post'); 
```

而且，当我选择特定帖子时，我需要加载所有评论。在 ember-data 文档中，据说我只需要调用

```
a_specific_post.get('comments') 
```

当我这样做时，我会得到一个很长的 url，其中包含所有评论 id：

```
GET : /comments?ids%all_ids_appended_here 
```

当然它不起作用，如果我有一千条评论，那么 url 会非常长。

是否可以获得与 rails 的嵌套路由模型匹配的请求？：

```
 GET /posts/post_id/comments 
```

插件 route-manager [https://github.com/ghempton/ember-routemanager](https://github.com/ghempton/ember-routemanager)似乎就是这种路由。我可以将它与 ember-data 一起使用吗？如何使用？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T21:12:40.357

如果您只指定评论 ID，我不确定嵌入式是否是您想要的。它期望完整的评论对象以 post 模型的 JSON 表示形式传递。

# entity-framework-4 - 实体框架：ChildCollection 项目移除

> ID：10351883
> 
> 赞同：0
> 
> 时间：2012-04-27T13:50:10.433
> 
> 标签：entity-framework-4

鉴于关系：

> 第 1 个人 -- * 电话号码
> 
> （一个人有 0、1 个或多个 TelephoneNumber 实体）

还有我的集成测试：

```
 [TestMethod()]
    public void DeleteTelephoneNumberAndSavePersonTest()
    {
        Person person;
        using (SopEntities sopEntities = EntitiesFactory.Create(Properties.Resources.ConnectionString))
        {
            PeopleRepository target = new PeopleRepository(sopEntities);
            person = target.GetPerson(7);
            Assert.IsTrue(person.TelephoneNumbers.Any());
            Assert.AreEqual("DeleteTelephoneNumberAndSavePersonTest", person.TelephoneNumbers.Single().Number);
            person.TelephoneNumbers.Remove(person.TelephoneNumbers.Single());
            target.SavePerson(person);

            Person savedPerson = target.GetPerson(7);
            Assert.IsFalse(savedPerson.TelephoneNumbers.Any());
        }
    } 
```

它获得了一个已经创建的（我知道这是真的）Person (ID=7)，它的 TelephoneNumbers 集合中有一个 TelephoneNumber。这工作正常。

然后我删除 TelephoneNumber 作为我测试的一部分。

并保存它，它使用以下代码：

```
 public Person SavePerson(Person person)
        {
            if (person == null)
                throw new ArgumentNullException("person");

            Person existingPerson= SopEntities.People.Include("EmailAddresses").Include("TelephoneNumbers").Include("WebResources").SingleOrDefault(q => q.ID==person.ID);
// NOTE: The existingPerson ALREADY has the TelephoneNumber removed, even though retrieved from the DB again. WHY IS THIS?

// snip: collection reconciliation code

            SopEntities.SaveChanges();
            return existingPerson;
        } 
```

在这一点上，我不想用内存与持久集合的协调来分散这篇文章的注意力，但想提请您注意现有人员的试用。当我通过此调试时，此人已经从其 TelephoneNumbers 集合中删除了 TelephoneNumber。

原因是它在 TestMethod 中的相同实体上下文中。如果我在加载 TelephoneNumber 和删除项目之间创建一个新上下文，则检索到的 Person 确实在 TelephoneNumbers 集合中具有预期的 TelephoneNumber，以便在适当的时候删除。

EntityFramework 显然正在缓存更改并将更改“投影”（为了更好的词）到内部上下文中。我不希望这种情况发生。

我怎样才能防止这种行为？IE。当我询问数据库内容时，我想要数据库内容而不是 EF 对数据库内容的印象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T17:00:03.790

您可以尝试加载此行中的人员...

```
Person existingPerson= SopEntities.People....
    .SingleOrDefault(q => q.ID==person.ID); 
```

...禁用更改跟踪（使用`AsNoTracking()`for`DbContext`和`MergeOption.NoTracking`for `ObjectContext`）以避免 EF 尝试将实体附加到您已经修改它的上下文。

`SavePerson`如果您想使用从返回的对象进行更改跟踪并希望将其附加到上下文，这可能没有用。EF 不允许有两个具有相同键的附加对象，它将返回已附加的对象，包括您已应用于实体的所有修改。

我不知道你想达到什么目的。它看起来有点像您的`SavePerson`方法应该返回“以前的”人（修改之前的状态的人）。如果是这样，另一种方法是在开始修改对象之前（深度）克隆对象并返回克隆。

# php - WordPress + Facebook 评论添加（需要 php 知识）

> ID：10351885
> 
> 赞同：0
> 
> 时间：2012-04-27T13:50:15.057
> 
> 标签：php, html, facebook, wordpress

我成功通过此函数获取 Facebook 评论编号：

```
<?php 
function fb_comment_count() { 
global $post; 
$url = get_permalink($post->ID); 

$filecontent = file_get_contents('https://graph.facebook.com/?ids=' . $url); 
$json = json_decode($filecontent); 
$count = $json->$url->comments; 
if ($count == 0 || !isset($count)) { 
    $count = 0; 
} 
echo $count; 
} 
;?> 
```

我称之为：

```
<?php fb_comment_count();?> 
```

现在如何将其添加到此代码中：

```
<?php comments_number(__('No Comments'), __('1 Comment'), __('% Comments'), '', __('Comments Closed') ); ?> 
```

以便 WordPress 在一个数字中同时显示 WP 和 FB 评论的数量。

非常感谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:32:46.540

将 fb_comment_count 函数的最后一行更改为`return $count;`. 这样你就可以处理一个数字。

现在在循环内，添加：

```
<?php 
$fb_comments = fb_comment_count();
$wp_comments = get_comments_number();
$total_comments = $fb_comments + $wp_comments;
printf ("<p>There are %d Total Comments: %d Wordpress Comments + %d Facebook Comments</p>\n",
        $total_comments, $wp_comments, $fb_comments );
 ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:36:32.313

您还可以使用此代码段在您的帖子/页面上获得评论

```
<fb:comments-count href="<?php the_permalink(); ?>"></fb:comments-count></div> 
```

# c# - 编译时检查一个值来实现几个接口

> ID：10351886
> 
> 赞同：4
> 
> 时间：2012-04-27T13:50:17.363
> 
> 标签：c#, types, interface

假设我想表达“**一种期望实现接口 IFoo 和 IBar 的对象的方法**”。就像是：

```
void Method(IFoo+IBar param); 
```

**我怎么能用 C# 说这个？**

*（有语法结构吗？或者是一个好的习语？）*

* * *

## 一次尝试

介绍一个接口：

```
interface IFooBar : IFoo, IBar {}

void Method(IFooBar param); 
```

**这很糟糕**，我什至后悔想到它:-) 乍一看还不错，但可悲的是，它默默地引入了一个不应该存在的依赖项。

存在的唯一原因`IFooBar`是成为`Method`'s 接口的一部分。因此，任何要用作`Method`' 参数的对象类都必须知道该方法（和该接口）存在 - 否则不会出现这种情况。所有实现 IFoo 和 IBar 的类都需要修改为也实现 IFooBar （可能要了解一个新的程序集）——如果我们不能修改它们，这是非常不切实际的，甚至是不可能的。

不必要的依赖 = 不行。

## 一种解决方法

放弃静态类型：

```
void Method(object param)
{
    if (!param is IFoo)
        throw new ArgumentException("IFoo not supported", "param");
    if (!param is IBar)
        throw new ArgumentException("IBar not supported", "param");

    // ...
} 
```

*（或者：在签名中定义一种类型并动态检查其他类型 - 如果一种是最重要的，但更令人困惑）*

工作正常，但在运行时（无编译时检查）。迫切需要一个文档（每个人都可以阅读它）。

也只在函数参数中实用。如果我尝试在现场使用它，代码会因演员阵容而变得臃肿不堪。

* * *

这种情况的真实案例？例如`IList<Foo>`+ `INotifyCollectionChanged`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T13:54:30.180

```
public void someMethod<T>(T param) where T : IFoo, IBar
{...} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T13:55:17.683

我的一个朋友曾经问 Eric Lippert 一个非常相似的问题，他的回答是这样的：

> 问：C# 不允许通过多个接口声明变量是否有原因？
> 
> A：假设我们将其注释为{IFoo, IBar}。
> 
> 问题比声明变量更大。本质上，您是说要将变量的约束从“变量必须是给定类型”更改为“变量必须是多个给定类型”。但为什么要停留在变量上呢？如果那是变量的类型约束，那么它应该是一个类型，句号。你应该可以说：
> 
> ```
> List< { IFoo, IBar } > myList; Or 
> ```

```
 public static { IFoo, IBar } MyMethod( { IFoo, IBar }[ ] foobars  )
 {  return foobars[0];  } 
```

> 等等。半途而废是没有意义的。
> 
> 这将是类型系统的主要扩展。我们希望在*每种*托管语言中都支持它，而不仅仅是 C# 和 VB。这是您希望在版本一中加入框架的那种功能；当你有四个版本并且有数十亿行必须继续工作的客户代码时，做出如此重大的改变是非常昂贵和困难的。
> 
> 我自己也经常想要这个功能。我同意这是一个不错的功能，但我认为现在添加它太昂贵了。下次您设计新类型系统时，请从头开始包含该功能！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T13:57:13.610

您可以通过如下定义您的方法来实现它

```
void Method<T>(T param) 
    where T: IFoo, IBar
{
} 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T15:39:01.347

可以将受约束的泛型参数用于在方法返回后不会保留的事物。不幸的是，它们有一个很大的限制。一个方法如：

```
void foo(T param) 其中 T:IFoo,IBar {...}

```

如果在编译时知道这`T`是*某种特定类型*，它实现了`IFoo`和，则很容易调用`IBar`。不幸的是，如果它们不共享一个实现两个接口的公共基类型，就很难构造一个可以传递给上述例程的对象集合。如果一个人想尝试保存一组“实现`IFoo`和的东西`IBar`，并且可以传递给期望相同的例程”，有很多方法可以做到，但它们并不容易。

如果可以预先识别出可能想要传递给定对象的所有例程，那么可以让集合在给定对象时为每个给定对象创建封闭的通用委托。在可行的情况下，这将起作用，并且可能相当有效。然而，它确实在集合类和集合中对象的使用之间引入了非常强的依赖关系。

一种更通用的方法是让集合保存包装对象，这些对象支持一种方法来对其内部对象执行任意受限开放通用操作。不幸的是，委托不能很好地解决这个问题，因为 .net 没有提供任何机制来调用开放的通用委托，而无需首先使用反射将它们转换为封闭形式。相反，必须定义如下接口：

```
接口 IActUpon<T,U> {
  void DoSomething<MT>(ref MT it) where MT:T,U;
}
接口 IActUpon<T,U,PT1> {
  void DoSomething<MT>(ref MT it, ref PT1 p1) where MT:T,U;
}
接口 IActUpon<T,U,PT1,PT2> {
  void DoSomething<MT>(ref MT it, ref PT1 p1, ref PT2 p2) where MT:T,U;
}

```

如果一个对象支持一个方法族的方法：

```
void DoSomethingWithMe(IActUpon<T,U> proc);
void DoSomethingWithMe(IActUpon<T,U,PT1> proc, ref PT1 p1);
void DoSomethingWithMe(IActUpon<T,U,PT1,PT2> proc, ref PT1 p1, ref PT2 p2);

```

通过创建一个简单的类来实现`IActUpon<T,U,...>`.

不幸的是，虽然这种方法几乎是通用的（最大的限制是必须为任何特定数量的通用参数显式编码），但它充其量是尴尬的。有了一些编译器支持，它可能不会太糟糕，但否则它对于一般用途来说可能太恶心了。

# java - 如何处理相互交互的多个活动？

> ID：10351887
> 
> 赞同：3
> 
> 时间：2012-04-27T13:50:21.937
> 
> 标签：java, android, android-activity

我有一个包含 4 或 5 个活动的应用程序！假设 A、B、C、D 和 E。

从每个活动跳到每个其他活动或多或少都是可能的！

假设一个用户去 A -> B -> E -> D。

现在他想（再次）打开 B。我现在希望我的应用程序能够识别活动堆栈中某处已经存在一个活动 B 并重新激活它（或至少完成旧 B 并创建一个新 B）。

我不想在创建新活动时完成所有活动，因为用户很可能经常使用后退按钮。

可能的解决方案是：自己创建一个活动堆栈并以包的形式处理它或使用一些静态结构。

但是必须有一个更简单/更好的方法，是吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T14:07:25.943

您可以在清单中的启动模式标签中使用`singleInstance`value 或`singleTask`value。

`android:launchMode=["multiple" | "singleTop" |"singleTask" | "singleInstance"]`

[根据android开发者基础](http://developer.android.com/guide/topics/manifest/activity-element)

和模式`singleTask`也`singleInstance`仅在一个方面彼此不同：

`singleTask`活动允许其他活动成为其任务的一部分。它始终位于其任务的根部，但其他活动（必要`standard`和`singleTop`活动）可以启动到该任务中。

`singleInstance`另一方面，活动不允许其他活动成为其任务的一部分。这是任务中的唯一活动。如果它启动另一个活动，则该活动被分配给不同的任务——就好像`FLAG_ACTIVITY_NEW_TASK`在意图中一样。

# iphone - UIScrollView 每次访问视图都会改变滚动位置

> ID：10351889
> 
> 赞同：1
> 
> 时间：2012-04-27T13:50:27.327
> 
> 标签：iphone, ios, uiviewcontroller, uiscrollview

我有一个带有 UIView 的 UIViewController，在视图中我有一个 UIScrollView，我以这种方式初始化了 UIViewController：

```
if (!self.detailViewController) {
    self.detailViewController = [[[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil] autorelease];
} 
```

当我进入视图时，UIScrollView 在顶部滚动，如果我返回 MasterView，然后我再次进入 DetailView，视图将滚动到某个位置，如果我返回，然后我返回再次查看，视图在底部的另一个位置滚动，再次再次滚动，每次我进入时，UIScrollView 每次都会在底部滚动一点，所以我的问题是为什么？...我如何设置为顶部每次我进入视图？

我试过这个：

```
[self.myScrollView scrollRectToVisible:CGRectMake(0, 0, self.myScrollView.frame.size.width, self.myScrollView.frame.size.height) animated:NO]; 
```

在 viewWillAppear 方法中但不改变任何东西，所以我把它放在 viewDidAppear 方法中，当我进入时我看到它返回到顶部，所以我的问题是如何将 uiscrollview 设置为始终显示在顶部?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T13:56:25.510

尝试`[self.myScrollView scrollRectToVisible:CGRectMake(0, 0, 10, 10) animated:NO];`

# php - PHP preg_replace 使用与蛮力方法

> ID：10351890
> 
> 赞同：1
> 
> 时间：2012-04-27T13:50:27.453
> 
> 标签：php, preg-replace

我正在尝试确定是否可以使用 preg_replace 执行以下操作，如果可以，您可以向我展示一个带有注释的示例，以便我从中学习。

我有一些看起来像这样的 html 代码：

```
<ul class="sub-menu">
<li id="menu-item-99" class="menu-item"><a href="/clients-login-english/">Login**</a></li>
<li id="menu-item-100" class="menu-item"><a href="/clients-create-account-english/">Create Account%%</a></li>
</ul> 
```

我想要做的是找到“代码”的位置，在这种情况下是“* *”或“%%”，并删除从前面的 < li 开始并以下一个 < /li > 结束的文本。因此，如果我对此使用 preg_replace 并正在寻找“**”，它最终会看起来像：

```
<ul class="sub-menu">

<li id="menu-item-100" class="menu-item"><a href="/clients-create-account-english/">Create Account%%</a></li>
</ul> 
```

我最初的想法是使用蛮力方法并使用stripos找到“**”，然后从那里向后循环找到<li，然后在它之后寻找</li>并重建字符串减去这部分但是似乎必须有一个更简单的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:11:45.017

请理解，使用正则表达式解析 HTML 很容易出错。请避免使用它，除非您非常确定要获得的 HTML 文本。

话虽如此，这是一个基于正则表达式的代码来做你想做的事：

```
$html = <<< EOF
<ul class="sub-menu">
<li id="menu-item-99" class="menu-item"><a href="/clients-login-english/">Login**</a></li>
<li id="menu-item-100" class="menu-item"><a href="/clients-create-account-english/">Create Account%%</a></li>
</ul>
EOF;
echo preg_replace('#<li\s.*?<a[^\*]+\*\*</a></li>#s', '', $html). "\n"; 
```

### 编辑：这是实现上述目标的基于 DOM 的（和推荐的）方法：

```
$doc = new DOMDocument();
libxml_use_internal_errors(true);
$doc->loadHTML($html); // loads your html
$xpath = new DOMXPath($doc);
$nlist = $xpath->query("//ul[@class='sub-menu']/li");

$nodesToDelete = array();
$numnodes = $nlist->length;
for($i=0; $i < $numnodes; $i++) {
   $node = $nlist->item($i);
   $val = $node->nodeValue;
   if (strstr($val, '**'))
      $nodesToDelete[] = $node;
}

foreach($nodesToDelete as $node)
   $node->parentNode->removeChild($node);

$newHTML =  $doc->saveHTML();
echo $newHTML; 
```

# jquery - jquery移动按钮文本自动换行符

> ID：10351891
> 
> 赞同：1
> 
> 时间：2012-04-27T13:50:27.950
> 
> 标签：jquery, css, jquery-mobile

我希望按钮中的文本在到达按钮末尾时自动换行。当我使用普通的 jquery 移动样式时，它会截断我的文本并像这里一样放置三个点： [这里](http://jsfiddle.net/t6Qpe/1/)

我发现了一个小问题，这些点不会像这里那样出现（空白：正常对我不起作用） [在这里](http://jsfiddle.net/t6Qpe/2/)

有人知道如何让它自动换行吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T14:13:42.550

您不能在 < CSS3 中对单个单词进行换行，但 CSS3 中有一个名为 word-break 的新 css 关键字允许您这样做。这显然只适用于 CSS3 浏览器。

给你的按钮一个 css 类，如果你希望它只应用于单个按钮，例如：

```
<a data-role="button" class='myButton'>aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</a> 
```

然后创建一个像这样的css样式：

```
.myButton
{
   word-wrap: break-word !important;
   white-space: normal !important;
} 
```

然后，这会将单词环绕到按钮的指定宽度中。

这是一个更新的[jsFiddle 示例](http://jsfiddle.net/t6Qpe/21/)来演示。

# java - GWT 日期等价于 java.util.Calendar

> ID：10351893
> 
> 赞同：6
> 
> 时间：2012-04-27T13:50:34.283
> 
> 标签：java, gwt, calendar

我想获取一周中特定日期的日期，例如星期三。即如果今天的日期是 27th Friday, Wednessday 实际上就是 25th 。

我可以通过

```
Calendar calendar = Calendar.getInstance();
calendar.set(Calendar.DAY_OF_WEEK, Calendar.WEDNESDAY);
String thisWed = String.format("%tF%n", calendar) 
```

这里的挑战是`java.util.Calendar`GWT 客户端不支持，是否有可能的解决方案而无需将此代码移动到服务器端？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-27T14:33:58.783

[`com.google.gwt.user.datepicker.client.CalendarUtil`](http://www.gwtproject.org/javadoc/latest/com/google/gwt/user/datepicker/client/CalendarUtil.html)我猜是你要找的东西；

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T14:40:32.670

最简单的可能是使用 Joda-time 或类似的，但 JodaTime 的所有 GWT 端口已被放弃：GWT 的[日期时间库](https://stackoverflow.com/questions/10311754/date-time-library-for-gwt)

最好的（没有第三方依赖）是自己进行计算：

```
Date d = new Date();
int dow = d.getDay();
int wed_delta = 3 - dow;
wed = new Date(d.getTime() + (86400 * wed_delta)); 
```

（最后一行可以替换为，就地`CalendarUtil.addDaysToDate(d, wed_delta)`修改）`d`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T14:11:23.247

使用`DateTimeFormat`，它允许将 java.util.Date 格式化为字符串或将字符串格式化为 Date。

```
Date date = new Date();
DateTimeFormat format = DateTimeFormat.getFormat("EEEE");
String day = format.parse(date); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-23T13:53:27.483

[您可以使用来自 bitbucket ( https://bitbucket.org/JRS/open-gwt](https://bitbucket.org/JRS/open-gwt) )上 open/gwt 项目的日历模拟和 org.jresearch.commons.gwt.shared.tools.Dates 实用程序类

基于 ftr-gwt-library 项目的仿真和实用类（[https://code.google.com/p/ftr-gwt-library/](https://code.google.com/p/ftr-gwt-library/)）

# objective-c - 在 iOS 上与 sqlite3_bind_ 一起使用时 SQLite IN 运算符不起作用

> ID：10351894
> 
> 赞同：0
> 
> 时间：2012-04-27T13:50:37.187
> 
> 标签：objective-c, sqlite

我有以下 SQL 语句：

```
const char* sqlStatement = "SELECT ((? - deal.latitude) * (? - deal.latitude) + (? - deal.longitude) * (? - deal.longitude)) AS distance, id, title, shop, latitude, longitude FROM deal WHERE (type = ?) AND category IN (?) AND tribe IN (?) ORDER BY distance LIMIT 20;";

// ...

sqlite3_bind_double(preparedStatement, 1, location.latitude);
sqlite3_bind_double(preparedStatement, 2, location.latitude);
sqlite3_bind_double(preparedStatement, 3, location.longitude);
sqlite3_bind_double(preparedStatement, 4, location.longitude);
sqlite3_bind_int(preparedStatement, 5, type);
sqlite3_bind_text(preparedStatement, 6, [categories UTF8String], -1, SQLITE_TRANSIENT);
sqlite3_bind_text(preparedStatement, 7, [tribes UTF8String], -1, SQLITE_TRANSIENT); 
```

在这里，第六个和第七个参数导致查询失败，我的意思是我里面的块

```
while (sqlite3_step(preparedStatement) == SQLITE_ROW) { 
```

不被执行。类别和部落的构建如下：

```
NSArray* userCategories = [CategoryDataController getUserCategories];
NSMutableString* categories = [[NSMutableString alloc] init];

for (NSNumber *category in userCategories) {
    [categories appendString:[[NSString alloc] initWithFormat:@"%@, ", category]];
}
if ([categories length] > 0) {
    categories = (NSMutableString *)[categories substringToIndex:[categories length] - 2];
}

NSArray* userTribes = [TribeDataController getUserTribes];
NSMutableString* tribes = [[NSMutableString alloc] init];

for (NSNumber* tribe in userTribes) {
    [tribes appendString:[[NSString alloc] initWithFormat:@"%@, ", tribe]];
}
if ([tribes length] > 0)
    tribes = (NSMutableString *)[tribes substringToIndex:[tribes length] - 2]; 
```

userCategories 和 userTribes 是 NSNumber 的数组，如果我记录部落和类别，我会得到格式良好的字符串，类似于：

```
1, 2, 3, 4, 5 
```

奇怪的是，我使用 sqlite3_bind_ 函数来构建查询，如下所示：

```
NSString *sqlStatementNSString = [[NSString alloc] initWithFormat:@"SELECT ((%f - deal.latitude) * (%f - deal.latitude) + (%f - deal.longitude) * (%f - deal.longitude)) AS distance, id, title, shop, latitude, longitude FROM deal WHERE type = %d AND category IN (%@) AND tribe IN (%@) ORDER BY distance LIMIT 20;", location.latitude, location.latitude, location.longitude, location.longitude, type, categories, tribes];
const char *sqlStatement = [sqlStatementNSString UTF8String]; 
```

有用！我做错了什么？事先谢谢（请原谅我的英语）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T18:40:47.263

我也已经搜索过这个问题的答案，而且似乎准备好的语句通常不支持 IN 运算符。您可以在此站点上找到各种解决方案。我的首选解决方案（从其中一个答案中获得）是在 IN 运算符列表中准备一个具有固定数量槽的语句：

```
SELECT * FROM db WHERE id IN (?, ?, ?, ?, ?, ?) 
```

然后执行查询 ((n + 5) / 6) 次（在本例中）并合并所有答案。如果您的槽数少于槽数，则用 NULL 填充其余部分，或复制最后一个条目。希望优化器应该避免重复比较。

重用准备好的语句可能比构建和运行自定义查询字符串更快（但可以肯定的是配置文件！）

# jquery - 外部框架上的jquery

> ID：10351895
> 
> 赞同：0
> 
> 时间：2012-04-27T13:50:40.167
> 
> 标签：jquery, lightbox, external

我想我曾经为此使用 live() ，但我有一个可以打开外部 html 页面的灯箱。我想在这个页面上做一些 jquery，有没有办法使用父页面中的脚本来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T13:52:10.300

最好的方法是，如果您在外部页面中添加 jquery 代码，

否则，您可以尝试：

```
$('iframe').contents().find('#elemen').live(); 
```

但它必须是同一个域

# java - Java if 语句未完成

> ID：10351898
> 
> 赞同：1
> 
> 时间：2012-04-27T13:50:43.480
> 
> 标签：java, if-statement

我对我的 Java 有点生疏了。我有一个包含多个值的数组，其中一个在`if`语句中使用。

这是我正在检查的单个字符，它不起作用的事实让我相信这可能是一个空格问题。数据来自 mysql 数据库，我已经尝试`trim()`在查询中使用以消除任何空格，但没有运气。

这是代码：

```
 Payoff payoff=new PlainVanillaPayoff(Option.Type.Put,Strike);
  if(inputData[8] == "C"){
      System.out.println("TypeCall"); // Check to see whether if stmt is ever true.
      payoff=new PlainVanillaPayoff(Option.Type.Call,Strike);
  } else{} 
```

在语句内部调用的 print`if`语句从不打印。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T13:51:54.377

这是因为您正在`String`使用 s 比较 s `==`。你应该`equals`改用。

```
if(inputData[8].equals("C")) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T13:52:54.993

假设代码编译，问题是你正在比较字符串`==`; 你应该使用[`equals`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#equals%28java.lang.Object%29)（或者有时你想要[`equalsIgnoreCase`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#equalsIgnoreCase%28java.lang.String%29)）：

```
if(inputData[8].equals("C")){ 
```

Java中的字符串是*对象*，`==`运算符比较对象身份（两个变量是否包含相同的对象引用），而不是对象的内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T13:53:09.970

if`inputData[8]`是一个字符串，您应该使用该`equals`方法而不是`==`：

```
if("C".equals(inputData[8])) 
```

此外，`"C"`如果 `inputData[8]1 为空，则首先确保不会出现空指针异常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T13:54:25.730

如果 inputData 是 a `String[]`，则应`inputdata[8].equals("C")`改为使用。如果它不是 a `String[]`，这将永远不会满，因为它们是不同的类型 :)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-27T13:55:11.770

如果 inputData 的类型是`String[]`那么我猜你的问题是你正在比较*引用*而不是使用`.equals()`-function。

正确的：

```
if(inputData[8].equals("C")) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-27T13:56:04.243

数组是字符串数组还是字符数组？

在 if 子句中，您需要在与字符串比较时使用 " 或在与 char 比较时使用 '。

如果它是一个字符串，在你的 if 子句中尝试这样的事情

```
stringname.charAt(x) == 'C' 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-04-27T13:56:23.713

如果 inputData 是一个字符数组？

```
if(inputData[8] == 'C') should solve it. 
```

否则，您可以尝试查看它是否确实包含“c”

```
Payoff payoff=new PlainVanillaPayoff(Option.Type.Put,Strike);
  if(inputData[8] == "C"){
      System.out.println("TypeCall"); // Check to see whether if stmt is ever true.
      payoff=new PlainVanillaPayoff(Option.Type.Call,Strike);
  } else{ System.out.println("inputData[8] contains: ->" + inputData[8] + "<-");} 
```

# python-3.x - 在字符串中查找并插入文本

> ID：10351904
> 
> 赞同：1
> 
> 时间：2012-04-27T13:51:04.863
> 
> 标签：python-3.x

我在列表中有职位。这些告诉在字符串中插入内容的位置。字符串例如：

```
s = "Hello World and foo bar" 
```

职位列表：

```
list = ['0', '5', '23']
pos = list[0], etc. 
```

我将插入这些：

```
ins_list = ['BIG', 'BAD', 'WOLF'] 
```

结果：

```
result = BIGHelloBAD World and foo barWOLF 
```

当我使用文件时，我只是 file.seek(pos)，但是当我想用字符串写它时，我不能使用 seek。有等效的方法吗？

谢谢，（也许我算错了位置，但这不是问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T11:52:24.170

感谢 randcoder，切片就像一个魅力：

```
...loop:

part1 = s[:pos]
part2 = s[pos:]
s = part1 + ins_list[n] + part2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T20:39:20.807

如果位置不是整数（如您的情况），则必须将它们转换为整数。我在 pos_list 中使用了整数：

```
s = "Hello World and foo bar"
pos_list = [0, 5, 23]
ins_list = ['BIG', 'BAD', 'WOLF']

p1 = 0
lst = []
for p2, text in zip(pos_list, ins_list):
    lst.append(s[p1:p2])
    lst.append(text)
    p1 = p2
lst.append(s[p1:])
result = ''.join(lst)

print(result) 
```

zip() 接受两个或更多序列并返回具有相应元素的对（元组）。正如 randcoder 提到的那样，字符串是不可变的。当您修改一个字符串时，您实际上创建了一个新的、已修改的字符串。因此，通常的做法是将字符串片段收集在一个列表中。最后，列表连接到结果字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T14:23:35.053

Python 字符串是不可变的，因此使用 seek/write 的方法将不起作用。使用切片。

# php - Facebook 像墙贴系统

> ID：10351905
> 
> 赞同：0
> 
> 时间：2012-04-27T13:51:05.313
> 
> 标签：php, jquery, codeigniter

我计划在我的网站上建立一个类似 facebook 的墙贴系统。我正在研究 codeigniter mysql 和 jQuery。

现在这是我的问题：一旦用户来到主页，我就会加载所有帖子。我创建了另外 2 个表格，分别是评论和点赞，用于帖子的点赞和评论。

如果我使用 jQuery 和 json 加载所有帖子，我将如何加载该特定帖子的所有喜欢和评论？

这是我的代码：

模型

```
function load_all_activities()
    {
    $this->db->select('*')->from('activity_board');
    $this->db->order_by("created_time", "desc");
    $this->db->limit(20);
    $this->db->join('profile', 'profile.user_id = activity_board.user_id');
    $query = $this->db->get();

    $data=array();
     foreach ($query->result() as $row){     
     $row->createdtime=$this->timeago($row->created_time);
    // $row->age=$this->birthday($row->birthday);
     $data[]=$row;
     }

    return $data;
    //return $query->result(); 
    } 
```

控制器：

```
function load_activities(){

    $data=$this->users->load_all_activities();

    echo json_encode($data);

    } 
```

看法：

```
//Jquery load activities posts
function load_activities(){

$.post("<?=base_url()?>home/load_activities", function(data){   

$(data).each(function(index, item) {
    $(item).each(function(index, value) {    
    $("#wallposts").append('<div id="postContainer"> <div id="postPic"><a href=""><img src="'+value.picture_thumb+'"/></a></div> <div id="postMsg"><a href="#"><b>'+value.first_name +'</b></a>&nbsp;' +  value.message+'<br/><br/><a href="#">Like</a> &middot; <a href="#">Comment</a> &middot; '+value.createdtime+'<div id="deleteMsg">X</div> </div></div>');
    });
 });

},"json");  

} 
```

这是我的mysql表

```
CREATE TABLE `activity_board` (
 `activity_id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
 `message` text NOT NULL,
 `created_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
 PRIMARY KEY (`activity_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=6 ;

CREATE TABLE `activity_comments` (
`comment_id` int(11) NOT NULL AUTO_INCREMENT,
 `comment` text NOT NULL,
 `avtivity_id` int(11) NOT NULL,
 `user_id` int(11) NOT NULL,
 `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
 PRIMARY KEY (`comment_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=2 ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:00:38.737

您是否考虑过使用第三方组件，例如[DisQus](http://disqus.com/)，它可以在您的网页上提供评论/活动，而无需实现更多的自定义 HTML 元素和包含 javascript 链接？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:00:45.053

如果您打算使用 js 构建 html，您应该考虑使用类似`backbone.js`or的东西`batman.js`，这些将允许您构建模板并以更可控的方式工作。它们是客户端 MVC js 框架，将提供强大的功能..

我的两分钱.. 否则，我会在所有 id 前面加上 post id

例如。

post_id:20

```
<div class="postContainer" id="20">
  <table class="message" id="message_20></table>
  <table class="likes" id="likes_20></table>
  <table class="comments" id="comments_20></table>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T14:10:38.307

你需要做几件事：

*   使用基于 activity_id 从表中选择行的方法为表创建模型
*   创建一个 PHP 脚本，该脚本以某种方式调用，例如`viewdetails.php?activity_id=<some id>`返回特定活动 ID 的评论和点赞
*   您的帖子容器 div 需要有某种方式来识别帖子 ID。我通常通过使 div 的 id 类似于`<div id="post_<post id>">`样式并使用类进行样式来做到这一点（id 应该是唯一的，类在元素之间共享）。
*   您需要在 div 中创建一个类似于以下内容的链接：`<div id="<post id>_post"> ... other stuff ... <a href="#" class="viewCommentLikeButton">View Likes and Comments</a>`
*   你需要把你的`$(document).ready()`功能`$(".viewCommentLikeButton").click( function () { $.post('viewdetails.php?activity_id=' + $(this).parent().attr('id').substr(5), { }, someSuccessHandlerFunction ); });`
*   您的成功处理程序函数应该解析您的 json 并将其放置在某个 div 中，其 id 与原始 activity_id 相关联（例如`$("#" + response.activity_id + "_comments").html(response.comments)`，如果您的 json 被放入 response 并且 response.activity_id 中有活动 id 并且 response.comments 有 html对于其中的评论）

我不知道将 html 放入 json 是否是最佳做法，因此您也可以让您的 php 脚本只返回有关评论的信息，并使您的 javascript 将其解析为可读的内容。

# java - 如何使用拆分短信的输出

> ID：10351910
> 
> 赞同：0
> 
> 时间：2012-04-27T13:51:20.643
> 
> 标签：java, netbeans, sms, sms-gateway

我如何从拆分中捕获输出并将其用作例如操作或与数据库中的数据进行比较

```
String myString =  (msg.getText());

String[] a = myString.split("\\*");

for (String b : a)
    System.out.println(b); 
```

输出是：

```
pay 
merchant
amount 
```

想用pay作为action和amount来增加数据库中商户的金额

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:59:19.807

您将需要定义如何将输入转换为数据库操作的规则。为了让您开始，您可以`if`为每个规则编写如下语句：

```
if (a.length == 3 && a[0] == "pay" && a[1] == "merchant")
{
    double amount = Double.parseDouble(a[2]);
    // connect to database and add amount to the merchant
    // UPDATE [AmountTable] SET [Amount] = [Amount] + ?
    // WHERE [Type] = 'Merchant' (or whatever the logic is)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T01:47:33.880

```
String [] message_parts = message.split("#");
// check format
String pay = message_parts[0];
String merchant = message_parts[1];
String amount_string = message_parts[2]; 
```

# sql-server - 适用于 Visual Studio 的 SQL Server 2012 数据层应用程序模板？

> ID：10351915
> 
> 赞同：1
> 
> 时间：2012-04-27T13:51:33.137
> 
> 标签：sql-server, visual-studio-2010, sql-server-2012, data-tier-applications

是否有适用于 VS 2010 的 SQL Server 2012 数据层应用程序模板？我使用的模板版本只允许 SQL Server 2008R2。

如果我在 SQL Server 2012 中打开管理控制台并提取一个 DAC 包，则可以正常工作并创建包。但是，VS 不允许我导入包，它给出以下错误：“您指定的文件不是有效的数据层应用程序文件。请指定一个有效的文件。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T20:08:37.857

数据层应用程序框架是[Microsoft SQL Server 2012 Feature Pack](http://www.microsoft.com/en-us/download/details.aspx?id=29065)的一部分。

它也可以从该页面独立下载。向下滚动到*Microsoft® SQL Server® 2012 数据层应用程序框架*。

# popup - WatiN - 从弹出菜单中选择下拉菜单

> ID：10351917
> 
> 赞同：0
> 
> 时间：2012-04-27T13:51:33.857
> 
> 标签：popup, watin, automated-tests

我目前正在尝试设置 WatiN 来对新的 CRM 解决方案进行一些自动化测试。我们有一个名为 Advanced Find 的屏幕按钮。
单击此按钮时，将打开一个新的弹出窗口。这个弹出窗口有一个下拉菜单，我想单击它并从中选择一个选项。

弹出窗口的代码是：

```
td class="ms-crm-AdvFind-Label"><br>
td class="ms-crm-AdvFind-EntityList"> <br>
select name="slctPrimaryEntity" class="ms-crm-SelectBox " id="slctPrimaryEntity"     Sort="ascending" defaultSelected="activitypointer"><br>
option title="Organisations" value="account"> 
```

我拥有的WatiN代码如下：

```
ie.Image(Find.ByClass("ms-crm-ImageStrip-advancedfind32")).Click();
IE poppedUpBrowser = IE.AttachTo<IE>(Find.ByTitle("Advanced Find - Microsoft Dynamics CRM"));
SelectList ddl = poppedUpBrowser.SelectList(Find.ByClass("ms-crm-AdvFind-Label")&(Find.ById("slctPrimaryEntity")));<br>
ddl.Option("Organisations").Select();<br>
Assert.That(ddl.SelectedItem.Equals("Organisations"));<br> 
```

有人可以指出我哪里出错了。

谢谢。

编辑：

我目前在运行测试时收到此错误消息：

```
Failure: WatiN.Core.Exceptions.ElementNotFoundException : Could not find OPTION element tag matching criteria: Attribute 'innertext' equals 'Organisations' ignoring case at http://website

Stack Trace:
at WatiN.Core.Element.get_NativeElement()
at WatiN.Core.Element.GetAttributeValueImpl(String attributeName)
at WatiN.Core.Component.GetAttributeValue(String attributeName)
at WatiN.Core.Option.setSelected(Boolean value, Boolean WaitForComplete)
at WatiN.Core.Option.Select() 
```

编辑：更多 HTML 代码：

```
<tbody>
<tr height="100%">
<td class="AdvFind_td_FindBody">
<span id="advancedFind">
<table class="ms-crm-AdvFindControl" id="advFind" cellSpacing="0" cellPadding="0" EntityName="activitypointer" UIProvider="" DataProvider="" EntityTypeCode="4200" DisableValueControlInSimpleMode="0" DistinctFetch="1" SaveChangesAlert="1" IncludeUserQuery="1" IncludeSystemQuery="1" ValidQueryType="0" FilterControlVisible="1" TitleVisible="0" EntityListVisible="1" RelatedEntitiesVisible="1" QueryListVisible="1" CanCreateUserQuery="1" CanWriteUserQuery="1" IncludeAPIQuery="0" FetchMode="2" Buttons="1023" Modes="3" Mode="1" aliasesInInitialFetch="">
<tbody>
<tr class="ms-crm-AdvFind-TitleArea">
<td>
<table class="ms-crm-AdvFind-Title-table" style="table-layout: fixed;">
<tbody>
<tr>
<td>
<table>
<tbody>
<tr>
<td class="ms-crm-AdvFind-EntityList">
<select name="slctPrimaryEntity" class="ms-crm-SelectBox " id="slctPrimaryEntity" Sort="ascending" defaultSelected="activitypointer">
<option title="Activities" value="activitypointer">
<option title="Addresses" value="customeraddress"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:22:43.150

将断言更改为

```
Assert.That(ddl.SelectedItem.Text.Equals("Organisations")); 
```

SelectedItem 属于 Option 类型，其中“Organisations”属于 String 类型，因此您无法比较这两个值。通过使用 Text 属性，您将获得所需的结果。

**编辑：**就您的编辑而言-是的，您没有带有**文本**“组织”的元素。您必须使用现有的属性（标题或值）来查找要选择的内容。所以错误的解决方法是使用 Find 类：

```
ddl.Option(Find.ByTitle("Organisations")).Select(); 
```

或者

```
ddl.Option(Find.ByValue("account")).Select(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:17:55.030

是框架内的弹出窗口。如果是这样，您将需要从 Frame 中遍历。让我知道事情的后续。

# java - ReentrantLock 如何同步？

> ID：10351918
> 
> 赞同：0
> 
> 时间：2012-04-27T13:51:33.927
> 
> 标签：java, multithreading, synchronization, reentrantlock

我查看了 ReentrantLock 的 Java API，我可以看到`synchronized`关键字没有使用同步。是否在 AbstractQueuedSynchronizer 中的以下方法中（ReentrantLock 在尝试获取锁时引用）同步对象？由于`compareAndSwapInt`是本机方法，是否在本机级别/代码进行同步？

```
protected final boolean compareAndSetState(int expect, int update) {
    // See below for intrinsics setup to support this
    return unsafe.compareAndSwapInt(this, stateOffset, expect, update);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T13:57:01.550

每个 JDK 的实现可能会有所不同。例如，Sun（现在的 Oracle）实现是通过`sun.misc.Unsafe`( [http://www.docjar.com/docs/api/sun/misc/Unsafe.html](http://www.docjar.com/docs/api/sun/misc/Unsafe.html) )

我曾经写过关于[不安全的 Java 并发性的](http://pveller.blogspot.com/2010/08/java-concurrency-is-unsafe.html)博客:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T13:56:53.393

您是对的：在 Oracle 的 JDK 中，`ReentrantLock`是根据本机[比较和交换](http://en.wikipedia.org/wiki/Compare-and-swap)原语（加上相当数量的 Java 代码）实现的，而不是根据`synchronized`关键字实现的。

# c# - OpenSubKey 在 C++ 中的行为与在 C# 中的行为不同

> ID：10351920
> 
> 赞同：2
> 
> 时间：2012-04-27T13:51:46.447
> 
> 标签：c#, c++-cli

下面的**C++/CLI**代码将 nullptr 返回给 pKey。

```
RegistryKey^ pKey = Microsoft::Win32::Registry::LocalMachine->OpenSubKey("SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Installer\\Folders"); 
```

下面的**C#**代码返回一个指向 pKey 的有效指针。

```
RegistryKey pKey = Microsoft.Win32.Registry.LocalMachine.OpenSubKey("SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Installer\\Folders"); 
```

除了语言差异之外，这两个代码片段在我看来完全相同。

我刚刚发现在 x64 中构建 C++ 代码可以让它找到密钥。所以我现在的问题是如何在 32 位构建中找到密钥？我需要在两个版本中找到它。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T14:00:31.513

这无疑是平台目标的副作用。在 64 位操作系统上，32 位进程的 HKLM/Software 密钥被重定向到 HKLM/Software/Wow6432Node。您正在寻找的特定密钥不存在的地方。

C# 代码工作的可能性很大，因为它以 AnyCPU 为目标，因此在 64 位模式下运行。并且 C++/CLI 代码不起作用，因为它以 Win32 为目标。C++/CLI 没有 AnyCPU 模式，您必须明确地在 x64 和 Win32 之间进行选择。包含本机代码的 C++/CLI 程序集的副作用。

在 .NET 4 中，RegistryKey 类有一个额外的 OpenBaseKey() 方法，允许指定注册表视图。早期版本没有简单的解决方法。考虑在您的 C++/CLI 项目中添加 x64 平台。或者使用本机 winapi 函数代替，C++/CLI 的优势。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T14:01:13.637

尝试使用标准变体在 C++ 中打开

```
LONG lRes = RegOpenKeyExW(HKEY_LOCAL_MACHINE, L"SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Installer\\Folders", 0, KEY_READ, &hKey); 
```

# java - 如何捕获Java中另一个线程抛出的异常？

> ID：10351926
> 
> 赞同：7
> 
> 时间：2012-04-27T13:51:56.087
> 
> 标签：java, multithreading, exception-handling

我正在使用一个创建自己的线程并引发异常的库。我怎样才能捕捉到那个异常？在下面标记的行上引发异常：

```
ResourceDescriptor rd = new ResourceDescriptor();
        rd.setWsType(ResourceDescriptor.TYPE_FOLDER);
        fullUri += "/" + token;
        System.out.println(fullUri);
        // >>> EXCEPTION THROWN ON THE FOLLOWING LINE <<<
        rd.setUriString(fullUri.replaceAll("_", ""));
        try{
            rd = server.getWSClient().get(rd, null);
        }catch(Exception e){
            if(e.getMessage().contains("resource was not found")){
                this.addFolder(fullUri, label, false);
                System.out.println("Folder does not exist, will be added now.");
            }else{
                System.out.println("Error Messages: " + e.getMessage());
            }
        } 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-27T14:19:12.003

如果你不能抓住它，也许这对你有帮助：

如果你有这个`Thread`对象，你可以尝试设置一个[UncaughtExceptionHandler](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.UncaughtExceptionHandler.html)。看看[Thread.setUncaughtExceptionHandler(...)](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#setUncaughtExceptionHandler%28java.lang.Thread.UncaughtExceptionHandler%29)。

向我们提供有关您使用的库以及如何使用它的更多详细信息。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-27T13:54:58.310

如果你只有一个`Thread`对象，那么就没有办法捕捉任何异常（我假设是`RuntimeException`）。执行此操作的正确方法是使用 the 使用的`Future<?>`类，`ExecutorService`但您无法控制开始`Thread`我假设的代码。

如果您正在提供`Runnable`或者如果您正在将任何代码注入到库中，那么您可以将它包装在一个`Exception`为您捕获并保存的类中，但前提是异常在您的代码中或从代码中抛出你在打电话。类似于以下内容：

```
final AtomicReference<Exception> exception = new AtomicReference<Exception>();
Thread thread = library.someMethod(new Runnable() {
   public void run() {
      try {
         // call a bunch of code that might throw
      } catch (Exception e) {
         // store our exception thrown by the inner thread
         exception.set(e);
      }
   }
});
// we assume the library starts the thread
// wait for the thread to finish somehow, maybe call library.join()
thread.join();
if (exception.get() != null) {
   throw exception.get();
} 
```

此外，如果您要分叉自己的线程，您还可以设置未捕获的异常处理程序：

```
thread.setUncaughtExceptionHandler(new UncaughtExceptionHandler() {
   public void uncaughtException(Thread t, Throwable e) {
      // log it, dump it to the console, or ...
   }
}); 
```

但是，如果库中的线程代码不能被您包装，那么这将不起作用。如果您编辑问题并显示一些代码并提供更多详细信息，我可以编辑我的问题以提供更好的帮助。

# facebook - facebook 连接到 http 站点上的 http 和 https

> ID：10351932
> 
> 赞同：0
> 
> 时间：2012-04-27T13:52:07.263
> 
> 标签：facebook

有谁知道为什么 facebook 连接到 https 和 http。
网址是：
[https://s-static.ak.facebook.com/connect/xd_arbiter.php](https://s-static.ak.facebook.com/connect/xd_arbiter.php)
[http://static.ak.facebook.com/connect/xd_arbiter.php](http://static.ak.facebook.com/connect/xd_arbiter.php)
他们有相同的内容，所以我不明白为什么它应该让他们两个都得到吗？谷歌页面速度惩罚我两次加载相同的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T13:54:26.433

这样任何使用该服务的人都可以从 SSL/nonSSL 加载数据，因为 SSL 内容不应该引用非 SSL 内容。

# python - 即使输入错误，elif 语句也始终执行

> ID：10351935
> 
> 赞同：0
> 
> 时间：2012-04-27T13:52:23.940
> 
> 标签：python, if-statement

我对 elif 语句中的 Y 和 N 选择有疑问。如果我输入 n 它正确输出 n 的 elif 选择，但如果我输入 y 它仍然输出 n 选择而不是 elif 选择 y。我不知道它为什么这样做。对代码感到抱歉，如果错误很清楚，我是 python 新手。
我已经检查了选择，它确实保留了 n 或 y 的选择，但即使输入了 y 也只会执行 n。

```
if os.path.exists('ExifOutput.txt'): 
                    print "The file appears to already exist, would you like to overwrite it?" 
                    Choice = raw_input("Y/N : ") 
                    if not re.match("^[Y,y,N,n]*$", Choice): 
                        print "Error! Only Choice Y or N allowed!" 
                    elif len(Choice) > 1: 
                        print "Error! Only 1 character allowed!" 
                    elif not Choice:
                        print "No choice made" 
                    elif Choice == 'N' or 'n': 
                        print "Save the old file to a different directory and try again"
                        ExifTags()
                    elif Choice == 'Y' or 'y':
                        print "The file will be overwritten by a new one"
                        ExifRetrieval(listing, FileLocation)
                        print "Completed" + "\n"
                else:
                    ExifRetrieval(listing, FileLocation)
                    print "Completed" + "\n" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T13:55:38.143

`Choice == 'N' or 'n'`始终为真（与 相同`(Choice == 'N') or 'n'`）。你想要`Choice in ('N', 'n')`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T13:56:36.350

```
elif Choice == 'N' or Choice == 'n': 
```

或者

```
elif Choice in ("N","n"): 
```

# php - 如何减小 PDF 文件大小

> ID：10351944
> 
> 赞同：5
> 
> 时间：2012-04-27T13:53:04.830
> 
> 标签：php, linux, pdf, debian

我有很多 PDF 文件，其中一些很大..

我有两个选择

1.  删除图像并删除嵌入的字体
2.  压缩图像

是否可以删除 PDF（PHP 库或命令行工具）中的所有对象，如图像/字体？

或者，如果我想压缩 PDF 中的图像，您推荐哪个 PHP 库（或命令行工具）？

Debian/PHP

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:04:16.460

[pdftk](http://www.pdflabs.com/tools/pdftk-the-pdf-toolkit/)是去 IMO 的方式。

它可以解压缩和压缩 PDF 的文本部分。此外，您可以在脚本中使用它来提取所有图像，使用其他工具对其进行压缩，然后将它们放回原始文档中。

我不确定它是否可以删除嵌入的字体。

高温高压

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-27T16:31:59.630

包括 Acrobat 在内的许多工具都可以通过寻找优化来提高文件大小，例如

*   死物
*   不必要的分辨率的原始图像数据。

你看过这些工具吗？

# javascript - 有没有办法测量页面中 Javascript 的权重？

> ID：10351945
> 
> 赞同：0
> 
> 时间：2012-04-27T13:53:05.290
> 
> 标签：javascript, performance, testing

我的意思是，一种关于浏览器使用 javascript 或任何类型的测试、处理程序的反应等所占用的内存的统计信息。

只是想知道如果我在旧计算机上测试该页面会如何。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:56:10.160

WebKit 有一个内置的分析器，当你在 Windows 上时按 F12，你会看到它。

![在此处输入图像描述](../Images/405dc1f1109a02b7ac38c2aa0937f78e.png)

Firefox 的 FireBug 插件可以做同样的事情，但效果不是很好，但这里是：

![在此处输入图像描述](../Images/60f9659e8242c9afdb9e02bc2273ed1c.png)

这是你想要的？

# rabbitmq - 使用 Spring 与 RabbitMQ 集成

> ID：10351948
> 
> 赞同：4
> 
> 时间：2012-04-27T13:53:11.483
> 
> 标签：rabbitmq, amqp, spring-integration

我正在为我们的一个应用程序开发消息接口。该应用程序是一种服务，旨在接受“作业”，进行一些处理并返回结果（实际上以文件的形式）。

这个想法是使用 RabbitMQ 作为消息传递基础设施和 Spring AMQP 来处理协议特定的细节。

我不想将我的代码与 Spring AMQP 紧密耦合，所以我想使用 Spring Integration 来隐藏消息传递 API。所以基本上我想要这个：

消息发送到 RabbitMQ ====> Spring AMQP ====> Spring Integration ====> MyService ====> 一路回复 RabbitMQ

我正在尝试制定将其连接在一起所需的 XML 配置，但我遇到了多层次抽象和不同术语的问题。事实证明，在 Spring AMQP/RabbitMQ 之上找到一个演示 Spring Integration 的工作示例非常困难，尽管这种设置对我来说感觉非常“最佳实践”。

1）所以..那里有一些聪明的灵魂可以快速看看这个，也许会把我推向正确的方向？我需要什么，不需要什么？:-)

2) 理想情况下，队列应该是多线程的，这意味着 taskExecutor 应该将多条消息传递给我的 jobService 以进行并行处理。需要什么配置？

```
 <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:util="http://www.springframework.org/schema/util"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:rabbit="http://www.springframework.org/schema/rabbit"
    xmlns:int="http://www.springframework.org/schema/integration"
    xmlns:int-amqp="http://www.springframework.org/schema/integration/amqp"
    xmlns:int-stream="http://www.springframework.org/schema/integration/stream"
    xsi:schemaLocation="
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd
    http://www.springframework.org/schema/rabbit http://www.springframework.org/schema/rabbit/spring-rabbit.xsd
    http://www.springframework.org/schema/integration http://www.springframework.org/schema/integration/spring-integration.xsd
    http://www.springframework.org/schema/integration/amqp http://www.springframework.org/schema/integration/amqp/spring-integration-amqp.xsd
    http://www.springframework.org/schema/integration/stream http://www.springframework.org/schema/integration/stream/spring-integration-stream.xsd
    ">

    <context:component-scan base-package="com.myprogram.etc" />

    <!-- Messaging infrastructure: RabbitMQ -->

    <bean id="connectionFactory" class="org.springframework.amqp.rabbit.connection.CachingConnectionFactory">
        <constructor-arg value="${ei.messaging.amqp.servername}" />
        <property name="username" value="${ei.messaging.amqp.username}" />
        <property name="password" value="${ei.messaging.amqp.password}" />
    </bean>

    <rabbit:connection-factory id="connectionFactory" />

    <rabbit:admin connection-factory="connectionFactory"/>

    <!-- From RabbitMQ -->

    <int-amqp:inbound-gateway request-channel="fromAMQP" reply-channel="toAMQP" queue-names="our-product-name-queue" connection-factory="connectionFactory"/>

    <!-- Spring Integration configuration -->

    <int:channel id="fromAMQP">
        <!-- Is this necessary?? -->
        <int:queue/>
    </int:channel>

    <!-- JobService is a @Service with a @ServiceActivator annotation -->
    <int:service-activator input-channel="fromAMQP" ref="jobService"/>
</beans> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T21:09:22.810

我怀疑我和你一样对 spring-integration 和 spring-integration-amqp 很陌生，但我确实得到了部分基于一个示例项目的工作。

对于 rabbitmq 基础设施，我有以下内容：

```
<rabbit:connection-factory id="rabbitConnectionFactory"/>

<rabbit:template id="amqpTemplate" connection-factory="rabbitConnectionFactory"/>

<rabbit:admin connection-factory="rabbitConnectionFactory"/>

<!-- some attributes seemed to be ok with queue name, others required id
  -- so I used both with the same value -->
<rabbit:queue id='test.queue' name='test.queue'/>

<rabbit:direct-exchange name:"my.exchange">
    <rabbit:bindings>
        <rabbit:binding queue="test.queue" key="test.binding"/>
    </rabbit:bindings>
</rabbit:direct-exchange> 
```

要向 rabbitmq 发送消息，我有以下内容：

```
<!-- This is just an interface definition, no implementation required
  -- spring will generate an implementation which puts a message on the channel -->
<int:gateway id="backgroundService", 
         service-interface="com.company.BackgroundService"
             default-request-channel="toRabbit"

<int:channel id:"toRabbit"/>

<!-- used amqpTemplate to send messages on toRabbit channel to rabbitmq -->
<int-amqp:outbound-channel-adapter channel:"toRabbit" 
                               amqp-template="amqpTemplate" 
                   exchange-name="my.exchange" 
                   routing-key="test.binding"/> 
```

要接收消息，我有以下内容：

```
<int:service-activator input-channel="fromRabbit" 
                       ref="testService" 
                       method="serviceMethod"/>

// from rabbitmq to local channel
<int-amqp:inbound-channel-adapter channel="fromRabbit" 
                                  queue-names="test.queue" 
                                  connection-factory="rabbitConnectionFactory"/>

<int:channel id="fromRabbit"/> 
```

一些警告 - spring-integration 中 amqp 集成的文档说可以同步发送和接收返回值，但我还没有弄清楚。当我的服务激活器方法返回一个值时，它会引发异常，将消息放回rabbitmq（并生成一个无限循环，因为它会再次接收消息并再次引发异常）。

我的 BackgroundService 界面如下所示：

```
package com.company

import org.springframework.integration.annotation.Gateway

public interface BackgroundService {

    //@Gateway(requestChannel="someOtherMessageChannel")
    public String sayHello(String toWho)

} 
```

如果您不想使用 spring bean 中配置的默认通道，则可以通过注释在每个方法上指定一个通道。

附加到服务激活器的服务如下所示：

```
package com.company;

class TestService {

    public void serviceMethod(String param) {
    log.info("serviceMethod received: " + param");
    //return "hello, " + param;
    }
} 
```

当我在不涉及rabbitmq的情况下在本地连接所有东西时，调用者正确接收了返回值。当我去rabbitmq频道时，当返回一个值后抛出异常时，我得到了前面提到的无限循环。这肯定是可能的，否则如果不修改代码就不可能在不同的通道中连接，但我不确定诀窍是什么。如果您弄清楚了，请回复解决方案。显然，您可以根据需要在端点之间放置您喜欢的任何路由、转换和过滤。

如果我上面的 XML 摘录中有错别字，请不要感到惊讶。我必须从 groovy DSL 转换回 xml，所以我可能会犯错误。但是意图应该足够清楚。

# c# - 需要帮助使用 html 正文实现 DKIM 签名

> ID：10351950
> 
> 赞同：2
> 
> 时间：2012-04-27T13:53:23.267
> 
> 标签：c#, email, bouncycastle, domainkeys

我正在使用此代码签署（**DKIM-Signature**）我的电子邮件，它非常适合纯文本，但我无法发送 html 正文电子邮件。

```
 string smtp = "mail.***";
            string from = "***";
            string subject = "***";

            string to = "check-auth@verifier.port25.com";

            string body = "i am body of email<b>Bold text</b>";
            string base64privatekey = @"-----BEGIN RSA PRIVATE KEY-----***-----END RSA PRIVATE KEY-----";

            HashAlgorithm hash = new SHA256Managed();

            string hashBody = body.Replace(Environment.NewLine, "=0D=0A") + Environment.NewLine;
            byte[] bodyBytes = Encoding.ASCII.GetBytes(hashBody);
            string hashout = Convert.ToBase64String(hash.ComputeHash(bodyBytes));

            TimeSpan t = DateTime.Now.ToUniversalTime() - DateTime.SpecifyKind(DateTime.Parse("00:00:00 January 1, 1970"), DateTimeKind.Utc);

            string signatureHeader = "v=1; " +
             "a=rsa-sha256; " +
             "c=relaxed/relaxed; " +
             "d=***; " +
             "s=p; " +
             "t=" + Convert.ToInt64(t.TotalSeconds) + "; " +
             "bh=" + hashout + "; " +
             "h=From:To:Subject:Content-Type:Content-Transfer-Encoding; " +
             "b=";

            string canonicalizedHeaders =
            "from:" + from + Environment.NewLine +
            "to:" + to + Environment.NewLine +
            "subject:" + subject + Environment.NewLine +
            @"content-type:text/plain; charset=us-ascii
content-transfer-encoding:quoted-printable
dkim-signature:" + signatureHeader;

            TextReader reader = new StringReader(base64privatekey);
            Org.BouncyCastle.OpenSsl.PemReader r = new Org.BouncyCastle.OpenSsl.PemReader(reader);
            AsymmetricCipherKeyPair o = r.ReadObject() as AsymmetricCipherKeyPair;
            byte[] plaintext = Encoding.ASCII.GetBytes(canonicalizedHeaders);
            ISigner sig = SignerUtilities.GetSigner("SHA256WithRSAEncryption");
            sig.Init(true, o.Private);
            sig.BlockUpdate(plaintext, 0, plaintext.Length);
            byte[] signature = sig.GenerateSignature();
            signatureHeader += Convert.ToBase64String(signature);

            MailMessage message = new MailMessage();
            message.From = new MailAddress(from);
            message.To.Add(new MailAddress(to));

            message.Subject = subject;
            message.Body = body;

            message.Headers.Add("DKIM-Signature", signatureHeader);
            System.Net.NetworkCredential _Credential = new System.Net.NetworkCredential("***", "***");
            SmtpClient client = new SmtpClient(smtp);
            client.Port = 26;
            client.Credentials = _Credential;
            client.Send(message);
            Console.Write("sent to: " + to); 
```

# pdf - PDF 打印日期

> ID：10351952
> 
> 赞同：1
> 
> 时间：2012-04-27T13:53:25.443
> 
> 标签：pdf, adobe-javascript

是否可以显示查看/打印 PDF 文档的日期/时间？

我想它必须涉及 Adob​​e Java Script，但我不完全确定这是否可能。

我确实有 Acrobat X Pro，我可以确定 PDF 将使用 Acrobat Reader 9 或 Acrobat reader X 打开。

嵌入一​​些其他信息绝对是一个加分项（例如文档的路径或存储在 PDF 属性中的作者姓名）。

有人已经做过类似的事情了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T14:14:46.287

是的，可以使用 Acrobat JavaScript。您在页面上希望日期/时间出现的位置创建一个文本字段，并将其可见性设置为 HiddenButPrintable。然后添加 DocumentBeforePrint 操作并编写将字段值设置为当前日期/时间的 javascript 代码。该操作将在文档打印之前执行。这适用于 Adob​​e Reader 和 Acrobat，但如果您使用某些不支持 JavaScript 的工具打印文档，日期/时间将不会出现。
打印前操作的代码如下所示：

```
getField("yourfield").value = util.printd("yyyy/mm/dd",new Date()); 
```

# php - 特定顺序的 URL 旋转器

> ID：10351958
> 
> 赞同：2
> 
> 时间：2012-04-27T13:53:45.640
> 
> 标签：php, url, rotator

我想创建一个 URL rotator 脚本，它将按特定顺序而不是随机旋转我的 URL。

假设我有 100 个要旋转的 URL，我将它们排序，旋转器将从第一个到最后一个显示它们，然后返回到第一个 URL，依此类推。

如果可能的话，它可以是一个没有数据库的简单 php 脚本吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T13:56:37.087

它可以在没有数据库的情况下完成，是的。您可以创建一个简单的脚本，其中包含任意 URL 数组和一个包含数字的文本文件。该数字跟踪要显示的 URL 的数组索引。加载脚本后，读取文件，获取编号并显示关联的 URL。然后增加数字并将其写回文件，除非数字现在超过数组的大小 - 然后将零写回文件。

要使用文件中的 URL（并且没有计数器）来完成此操作，请将所有 URL 放在一行文本中。`|`用竖线字符分隔它们。在下一行，输入一个零。读取第一行并在管道字符上展开以创建一个数组。从数组中获取第一个元素，使用该 URL，并将第一个数组元素移动到数组的末尾。将带有管道字符的数组内爆回字符串，并将文件内容覆盖到文本文件中。

根据您的计划，这将或不会与 cookie 一起使用。由于 cookie 存储在客户端浏览器中，因此您只能跟踪单个访问者所看到的内容。如果需要考虑整个受众，这将无济于事，因为您需要一个组数组索引来跟踪，而不是单个的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T14:13:45.117

```
<?php
define('FILEDB', 'count.db');
define('URLDB', 'url.db');

function readURLS()
{
  $fp = fopen(URLDB, 'r');

  if( null == $fp )
    return false;

  $retval = array();
  while (($line = fgets($fp)) !== false)
  {
    $retval[] = $line;
  }

  return $retval;
}

$list = readURLS();

if( false === $list )
{
  echo "No URLs available";
}
else
{
  $fp = fopen(FILEDB, 'a+');

  $count = (fread($fp, filesize(FILEDB)) + 1) % count($list);

  ftruncate($fp, 0);
  fwrite($fp, "{$count}");
  fclose($fp);

  echo $list[$count];
} 
```

这行得通。

* * *

更新了新的要求。
您将需要一个名为 url.db 的文件（或在`define('URLDB', 'xxx')` 每一行之后填写的任何内容都是一个 URL 条目。

count.db 可以存在，但不需要。最好创建一个简单`0`的。

它将`url.db`在每个“请求”上轮换文件中的所有 URL 条目。

然而，这不是并发安全的。`count.db`如果 A 请求该页面，而 B 也请求该页面，那么如果 B在 A 将新内容写入之前读取，则 A 和 B 可能会看到相同的 URL`count.db`

# python - 如何在 Python 中注入 URL 查询字符串参数？

> ID：10351959
> 
> 赞同：1
> 
> 时间：2012-04-27T13:53:46.497
> 
> 标签：python, query-string

我想为我组织网站的任何 URL 编写一个等效的调试 URL。我有 Python 函数来做到这一点：

```
import urlparse
import urllib

def compose_debug_url(input_url):
    input_url_parts = urlparse.urlsplit(input_url)
    input_query = input_url_parts.query
    input_query_dict = urlparse.parse_qs(input_query)

    modified_query_dict = dict(input_query_dict.items() + [('debug', 'sp')])
    modified_query = urllib.urlencode(modified_query_dict)
    modified_url_parts = (
      input_url_parts.scheme,
      input_url_parts.netloc,
      input_url_parts.path,
      modified_query,
      input_url_parts.fragment
    )

    modified_url = urlparse.urlunsplit(modified_url_parts)

    return modified_url

print compose_debug_url('http://www.example.com/content/page?name=john&age=35')
print compose_debug_url('http://www.example.com/') 
```

如果你运行上面的代码，你应该会看到输出：

```
http://www.example.com/content/page?debug=sp&age=%5B%2735%27%5D&name=%5B%27john%27%5D
http://www.example.com/?debug=sp 
```

相反，我期望：

```
http://www.example.com/content/page?debug=sp&age=35&name=john
http://www.example.com/?debug=sp 
```

这是因为`urlparse.parse_qs`将字符串字典返回到列表，而不是字符串字典返回到字符串。

有没有另一种方法可以更简单地在 Python 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:05:42.060

`urlparse.parse_qs`返回每个键的值**列表。**在您的示例中，它是 `{'age': ['35'], 'name': ['john']}`，而您想要的是`{'age': '35', 'name': 'john'}`。

由于您使用 key, value pars 作为列表，请使用[`urlparse.parse_qsl`](http://docs.python.org/library/urlparse.html#urlparse.parse_qsl)

```
modified_query_dict = dict(urlparse.parse_qsl(input_query) + [('debug', 'sp')]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-04T14:05:41.280

迟到的答案，但[`urlencode`](http://docs.python.org/2/library/urllib.html#urllib.urlencode)需要一个`doseq`可用于展平列表的参数。

# excel - 从多个excel中获取数据到主Excel

> ID：10351961
> 
> 赞同：1
> 
> 时间：2012-04-27T13:53:48.137
> 
> 标签：excel, vba

我在同一个文件夹中有 5 个名为 Report1、Report2、Report3、Report4、Report5 的 Excel 工作表，我想创建主 ExcelSheet“MainReport”

在五个 excel 工作表（Report1 到 5）的每一个中都有一个名为 MainSheet 的工作表我想从每个 excel 的 MainSheet 获取数据到 MainExcel，即

*   从 Report1 到 Main Excel 中的 Sheet1 的 MainSheet
*   从 Report2 到 Main Excel 中的 Sheet2 的 MainSheet
*   .
*   .
*   从 Report5 到 Main Excel 中的 Sheet5 的 MainSheet

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T14:50:32.503

a) 它们被称为 Excel 文件或工作簿 - 表格是底部的选项卡...

b) 如果您有 2007+，请转到数据 > 从其他来源 > 从 Microsoft Query > Excel 文件* > 选择 1 个文件 > 选项 > 确保选中系统表选项 => 现在您可以选择工作表、列、过滤器和排序您需要的订单:))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T05:51:01.997

从我的文章[将一个或多个工作簿中的工作表整理到](http://www.experts-exchange.com/Software/Office_Productivity/Office_Suites/MS_Office/Excel/A_2804-Code-to-compile-all-worksheets-from-either-a-all-Excel-workbooks-in-a-folder-or-b-a-specific-Excel-workbook.html)EE 托管的摘要文件中

此代码提供了三个选项来组合位于文件夹中的 Excel 文件：

1.  将单个文件夹中所有 Excel 工作簿中的所有工作表整理到单个摘要工作表中
2.  将单个文件夹中所有 Excel 工作簿中的所有工作表整理到单个摘要工作簿中
3.  将单个 Excel 工作簿中的所有工作表整理到单个摘要工作表中

选项（2）听起来是你想要的

```
Public Sub ConsolidateSheets()
    Dim Wb1 As Workbook
    Dim Wb2 As Workbook
    Dim ws1 As Worksheet
    Dim ws2 As Worksheet
    Dim ws3 As Worksheet
    Dim rng1 As Range
    Dim rng2 As Range
    Dim rng3 As Range
    Dim rngArea As Range
    Dim lrowSpace As Long
    Dim lSht As Long
    Dim lngCalc As Long
    Dim lngRow As Long
    Dim lngCol As Long
    Dim X()
    Dim bProcessFolder As Boolean
    Dim bNewSheet As Boolean

    Dim StrPrefix
    Dim strFileName As String
    Dim strFolderName As String

    'variant declaration needed for the Shell object to use a default directory
    Dim strDefaultFolder As Variant

 bProcessFolder = (MsgBox("Process a single folder (Yes)," & vbNewLine & "or single file (No)", vbYesNo, "Application Scope: Folder or single File") = vbYes)
    bNewSheet = (MsgBox("Extract all data to a single sheet (Yes)," & vbNewLine & "or a target file sheet for each source sheet (No)", vbYesNo, "Output Format: Single sheet or sheet by sheet collection") = vbYes)
    If Not bProcessFolder Then
        If Not bNewSheet Then
            MsgBox "There isn't much point creating a exact replica of your source file :)"
            Exit Sub
        End If
    End If

    'set default directory here if needed
    strDefaultFolder = "C:\temp"

    'If the user is collating all the sheets to a single target sheet then the row spacing
    'to distinguish between different sheets can be set here
    lrowSpace = 1

    If bProcessFolder Then
        strFolderName = BrowseForFolder(strDefaultFolder)
        'Look for xls, xlsx, xlsm files
        strFileName = Dir(strFolderName & "\*.xls*")
    Else
        strFileName = Application _
                      .GetOpenFilename("Select file to process (*.xls*), *.xls*")
    End If

    Set Wb1 = Workbooks.Add(1)
    Set ws1 = Wb1.Sheets(1)
    If Not bNewSheet Then ws1.Range("A1:B1") = Array("workbook name", "worksheet count")

    'Turn off screenupdating, events, alerts and set calculation to manual
    With Application
        .DisplayAlerts = False
        .EnableEvents = False
        .ScreenUpdating = False
        lngCalc = .Calculation
        .Calculation = xlCalculationManual
    End With

    'set path outside the loop
    StrPrefix = strFolderName & IIf(bProcessFolder, "\", vbNullString)

    Do While Len(strFileName) > 0
        'Provide progress status to user
        Application.StatusBar = Left("Processing " & strFolderName & "\" & strFileName, 255)
        'Open each workbook in the folder of interest
        Set Wb2 = Workbooks.Open(StrPrefix & strFileName)
        If Not bNewSheet Then
            'add summary details to first sheet
            ws1.Cells(Rows.Count, "A").End(xlUp).Offset(1, 0) = Wb2.Name
            ws1.Cells(Rows.Count, "A").End(xlUp).Offset(0, 1) = Wb2.Sheets.Count
        End If
        For Each ws2 In Wb2.Sheets
            If bNewSheet Then
                'All data to a single sheet
                'Skip importing target sheet data if the source sheet is blank
                Set rng2 = ws2.Cells.Find("*", ws2.[a1], xlValues, , xlByRows, xlPrevious)

                If Not rng2 Is Nothing Then
                    Set rng1 = ws1.Cells.Find("*", ws1.[a1], xlValues, , xlByRows, xlPrevious)
                    'Find the first blank row on the target sheet
                    If Not rng1 Is Nothing Then
                        Set rng3 = ws2.Range(ws2.UsedRange.Cells(1), ws2.Cells(rng2.Row, "A"))
                        'Ensure that the row area in the target sheet won't be exceeded
                        If rng3.Rows.Count + rng1.Row < Rows.Count Then
                            'Copy the data from the used range of each source sheet to the first blank row
                            'of the target sheet, using the starting column address from the source sheet being copied
                            ws2.UsedRange.Copy ws1.Cells(rng1.Row + 1 + lrowSpace, ws2.UsedRange.Cells(1).Column)
                        Else
                            MsgBox "Summary sheet size exceeded. Process stopped on " & vbNewLine & _
                                   "sheet: " & ws2.Name & vbNewLine & "of" & vbNewLine & "workbook: " & Wb2.Name
                            Wb2.Close False
                            Exit Do
                        End If
                        'colour the first of any spacer rows
                        If lrowSpace <> 0 Then ws1.Rows(rng1.Row + 1).Interior.Color = vbGreen
                    Else
                        'target sheet is empty so copy to first row
                        ws2.UsedRange.Copy ws1.Cells(1, ws2.UsedRange.Cells(1).Column)
                    End If
                End If
            Else
                'new target sheet for each source sheet
                ws2.Copy after:=Wb1.Sheets(Wb1.Sheets.Count)
                'Remove any links in our target sheet
                With Wb1.Sheets(Wb1.Sheets.Count).Cells
                    .Copy
                    .PasteSpecial xlPasteValues
                End With
                On Error Resume Next
                Wb1.Sheets(Wb1.Sheets.Count).Name = ws2.Name
                'sheet name already exists in target workbook
                If Err.Number <> 0 Then
                    'Add a number to the sheet name till a unique name is derived
                    Do
                        lSht = lSht + 1
                        Set ws3 = Wb1.Sheets(ws2.Name & " " & lSht)
                    Loop While Not ws3 Is Nothing
                    lSht = 0
                End If
                On Error GoTo 0
            End If
        Next ws2
        'Close the opened workbook
        Wb2.Close False
        'Check whether to force a DO loop exit if processing a single file
        If bProcessFolder = False Then Exit Do
        strFileName = Dir
    Loop

    'Remove any links if the user has used a target sheet
    If bNewSheet Then
        With ws1.UsedRange
            .Copy
            .Cells(1).PasteSpecial xlPasteValues
            .Cells(1).Activate
        End With
    Else
        'Format the summary sheet if the user has created separate target sheets
        ws1.Activate
        ws1.Range("A1:B1").Font.Bold = True
        ws1.Columns.AutoFit
    End If

    With Application
        .CutCopyMode = False
        .DisplayAlerts = True
        .EnableEvents = True
        .ScreenUpdating = True
        .Calculation = lngCalc
        .StatusBar = vbNullString
    End With
End Sub

Function BrowseForFolder(Optional OpenAt As Variant) As Variant
'From Ken Puls as used in his vbaexpress.com article
'http://www.vbaexpress.com/kb/getarticle.php?kb_id=284

    Dim ShellApp As Object
    'Create a file browser window at the default folder
    Set ShellApp = CreateObject("Shell.Application"). _
                   BrowseForFolder(0, "Please choose a folder", 0, OpenAt)

    'Set the folder to that selected.  (On error in case cancelled)
    On Error Resume Next
    BrowseForFolder = ShellApp.self.Path
    On Error GoTo 0

    'Destroy the Shell Application
    Set ShellApp = Nothing

    'Check for invalid or non-entries and send to the Invalid error
    'handler if found
    'Valid selections can begin L: (where L is a letter) or
    '\\ (as in \\servername\sharename.  All others are invalid
    Select Case Mid(BrowseForFolder, 2, 1)
    Case Is = ":"
        If Left(BrowseForFolder, 1) = ":" Then GoTo Invalid
    Case Is = "\"
        If Not Left(BrowseForFolder, 1) = "\" Then GoTo Invalid
    Case Else
        GoTo Invalid
    End Select

    Exit Function

Invalid:
    'If it was determined that the selection was invalid, set to False
    BrowseForFolder = False
End Function 
```

# xcode - 当第 3 方忘记删除调试符号时 XCode 警告

> ID：10351962
> 
> 赞同：0
> 
> 时间：2012-04-27T13:53:49.097
> 
> 标签：xcode, debugging

通常在使用 XCode3.2 进行调试时，会出现很多关于在我不想调试的第 3 方中丢失目标文件的警告。例如

警告：找不到目标文件 blah/blah/... - 没有可用于 blah/blah/... 的调试信息

有没有办法可以禁用这些错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:07:51.753

如此[SO post](https://stackoverflow.com/questions/6921884/xcode-4-how-to-suppress-all-warning-in-specific-source-file)中所述，前往您的构建阶段并将以下内容添加到特定文件的“编译器标志”部分，具体取决于您使用的编译器：

*   使用 LLVM GCC 编译器添加`-w`
*   使用普通 GCC，您必须`-Wno-name-of-warning`为要忽略的每个警告添加（警告*名称*被构建设置的快速帮助视图中给出的警告描述替换）

# netbeans-7 - 在 NetBeans 的主从模板中更改 WHERE 子句

> ID：10351964
> 
> 赞同：1
> 
> 时间：2012-04-27T13:54:07.807
> 
> 标签：netbeans-7, master-detail

我正在创建一个用于研究项目的小程序。我在 NetBeans 中使用 Master Detail 模板，它工作正常，直到我需要将 WHERE 添加到 Master 检索到的行中。Model 类中有一系列 Java @ 注释，其中包含针对结果集中所有列的带有 WHERE 子句的查询。例如

@NamedQueries({ @NamedQuery(name = "Topic.findByTopicId", query = "SELECT t FROM Topic t WHERE t.topicIc = :topicId"),

有一整套这些。这就是我想要使用的，但我找不到如何设置查询。查询设置在我无法更改的代码中，因为 NetBeans 创建并冻结了它。

查询 = java.beans.Beans.isDesignTime() ？null : entityManager.createQuery("SELECT t FROM Topic t");

NetBeans 创建的还有一个 persistence.xml 文件，其中包含 JDBC 连接信息和 Model 类的名称。

我有近 15 年的使用 Java 的经验，但总是作为命令行或后端，但从不作为 GUI。这似乎是让我的项目进行的一种快速方法，但如果我不能改变它，我需要找到不同的解决方案。谁能解释如何更改 EntityManager 使用的查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:53:12.010

您可以在 Netbeans 7.2 中以这种方式访问​​它：单击“设计”，然后单击您的设计元素之一（不管是哪一个），然后单击鼠标右键。在弹出菜单中，选择“自定义代码...”。将出现一个名为“代码定制器”的对话框。在左上角，选择“查询”。下面，选择“自定义创建”，而不是“默认代码”。在那里您将能够编辑您的初始化代码。

# c# - 如何实现递归回调模式？

> ID：10351965
> 
> 赞同：2
> 
> 时间：2012-04-27T13:54:14.430
> 
> 标签：c#, callback, iteration

所以我有一个带有回调的异步 Web 请求方法：

```
private void DoWebRequest(string url, string titleToCheckFor, 
                          Action<MyRequestState> callback)
{
  MyRequestState result = new MyRequestState();
  // ...
  // a lot of logic and stuff, and eventually return either:
  result.DoRedirect = false;
  // or:
  result.DoRedirect = true;
  callback(result);
} 
```

（只是提前指出，我的 WebRequest.AllowAutoRedirect 出于多种原因设置为 false）

我事先不知道我可以期待多少重定向，所以我开始：

```
private void MyWrapperCall(string url, string expectedTitle, 
                          Action<MyRequestState> callback)
{
    DoWebRequest(url, expectedTitle, new Action<MyRequestState>((a) =>
    {
      if (a.DoRedirect)
      {
        DoWebRequest(a.Redirect, expectedTitle, new Action<MyRequestState>((b) =>
        {
          if (b.DoRedirect)
          {
            DoWebRequest(b.Redirect, expectedTitle, callback);
          }
        }));
      }
    }));
} 
```

现在我的大脑崩溃了，我怎么能把它放在一个迭代循环中，所以如果不再需要重定向，它会最后一次回调给原始调用者？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T14:04:22.690

存储对递归方法的引用，以便它可以调用自身：

```
private void MyWrapperCall(string url, string expectedTitle, Action<MyRequestState> callback)
{
    Action<MyRequestState> redirectCallback = null;
    redirectCallback = new Action<MyRequestState>((state) =>
    {
        if(state.DoRedirect)
        {
            DoWebRequest(state.Redirect, expectedTitle, redirectCallback);
        }
        else
        {
            callback(state);
        }
    });

    DoWebRequest(url, expectedTitle, redirectCallback);
} 
```

# ssis - 如何根据任务状态改变控制任务流程？

> ID：10351975
> 
> 赞同：3
> 
> 时间：2012-04-27T13:54:37.130
> 
> 标签：ssis

我有一个 SSIS 包。我为任务的不同行为设置了几个处理程序。我的问题是：特别是一项任务，如果它失败了，我希望它跳过其他一些任务并继续前进。因此，我想为该特定任务设置 OnError 以便它跳转到其他任务。我怎么能说处理程序内部的 SSIS 继续执行特定任务？

我想跳到控制流中的另一个任务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:15:41.513

你不能对 SSIS 这么说，你必须用优先约束来实现它。示例：假设您有任务 A -> B -> C -> D 并且如果 B 失败，您不希望 C 执行，您可以这样做：

请注意虚线，您需要将优先级设置为 OR 否则 D 只有在 B 成功和失败时才会执行，这是不可能的

![在此处输入图像描述](../Images/4dd4f3ba186851bac1f602b883d2f93b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T14:16:47.960

SSIS 包上的控制流任务根据包中描述的流程执行。假设您有两个任务， a`Script Task`和 a `Data flow task`。这里的两个任务是相互关联的。脚本任务被故意编码为失败。当它这样做时，包将在该点停止执行，因为它的结构是仅在脚本任务成功执行时才执行数据流任务。

![失败](../Images/624b268a168677eb9703e4eccf5a1622.png)

您可以右键单击脚本任务和数据流任务之间的连接器/优先级约束并将其从 更改`Success`为`Completion`。这意味着它指示包在`Data Flow Task`脚本任务完成时执行，无论它是失败还是成功。

![右键单击约束](../Images/240b04211301f1b8a254b5d68deb0afe.png)

现在，如果您运行包，即使脚本任务失败，它也会执行数据流任务。

![完成](../Images/27586f875ad35a9cff3d05cdd40139e9.png)

您也可以有多个这样的流程。您所要做的就是右键单击任务之间的连接器/优先级约束，然后选择正确的状态来决定包应该执行的路径。

![多流](../Images/795333ac7cfb237297e1c426e2c4b7e2.png)

希望有帮助。

# javascript - OnClick事件调用一个js函数和一个回调函数

> ID：10351977
> 
> 赞同：0
> 
> 时间：2012-04-27T13:54:40.997
> 
> 标签：javascript, asp.net

我有一个我们在代码中使用的外部编译项目（asp.net）。我无法访问背后的代码，只有 .aspx 页面。

我想做的一件事是从页面中的按钮调用两个函数。

```
<cc1:ImageButton ID="btnYes" runat="server" OnClick="btnYes_Click" Text="Yes"
                        Width="40px" SkinID="DefaultButton" /> 
```

有没有办法可以添加一个 JS 函数并让 OnClick 事件同时调用 btnYes_Click 和我的 JS 函数？像这样的东西？`OnClick="btnYes_Click ; myfunction();"`

我无权访问页面背后的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:57:40.420

是的，有一个名为**OnClientClick="JSFunction"**的事件将其添加到您的控件中。如果没有，则从代码隐藏中添加它，例如**MyControl.Attributes["onclick"] = "JSFunction";**

# javascript - 颜色框（jQuery）resize（）在IE9中不起作用

> ID：10351978
> 
> 赞同：1
> 
> 时间：2012-04-27T13:54:41.373
> 
> 标签：javascript, jquery, internet-explorer-9, colorbox

我在 IE9 上使用带有 jQ​​uery 1.7.2 的 Colorbox 版本 1.3.19。我有以下代码来设置我的 Colorbox：

JS：

```
var colorbox_defaults =
{
    iframe           : true,
    title            : false,
    innerWidth       : 500,
    innerHeight      : 325,
    slideshow        : false,
    slideshowStart   : "",
    slideshowStop    : "",
    current          : "",
    previous         : "",
    next             : "",
    close            : ""
};

$( "#my_link" ).colorbox( colorbox_defaults ); 
```

HTML：

```
<a id="my_link" href="some_page.php">Click Here</a> 
```

在页面上加载所有内容之后，我有这段代码可以根据页面内容的高度调整颜色框的大小（通过 AJAX 请求填充数据，因此页面的长度是可变的），如下所示：

```
var options = { innerHeight : $( 'html' ).height() };
parent.$.fn.colorbox.resize( options ); 
```

此代码在 FF 12 和 Chrome 18 中都能完美运行，但无法在 IE9 中调整大小。任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T16:01:20.157

这是我必须做的来解决这个问题。显然 IE9 不会像 FF 和 Chrome 等其他浏览器那样报告 html 标签的高度。我必须选择身体标签，它报告了正确的高度。

我的代码更改为以下内容：

```
var options = { innerHeight : $( 'body' ).outerHeight( true ) };
parent.$.fn.colorbox.resize( options ); 
```

# redirect - IIS7 301 URL 重写给出 200 状态而不是 301 状态

> ID：10351979
> 
> 赞同：2
> 
> 时间：2012-04-27T13:54:41.693
> 
> 标签：redirect, iis-7, http-status-code-301

我正在为一个新的客户端站点测试一些 URL 重定向。旧站点是静态 HTML 站点，新站点是 ASP.NET 站点。我需要将新站点上不再存在的一些旧的“.htm”URL 重定向到等效的新 .aspx 页面。

我在 web.config 文件中添加了一些规则，如下所示：

```
 <rewrite>
      <rules>
          <rule name="Rule 1">
              <match url="index.htm" />
              <action type="Rewrite" url="/" redirectType="Permanent" />
          </rule>
          <rule name="Rule 2">
              <match url="whatwedo.htm" />
              <action type="Rewrite" url="/about-us.aspx" redirectType="Permanent" />
          </rule>
      </rules>
  </rewrite> 
```

这似乎有效，因为当我在浏览器中加载 URL 时：[http](http://www.myclientsite.com/whatwedo.htm) : //www.myclientsite.com/whatwedo.htm 它确实显示 /about-us.aspx 页面。但是，地址栏 (http://www.myclientsite.com/whatwedo.htm) 中的地址保持不变，这是我没想到的。这让我很好奇，所以我使用了一堆在线“301 重定向检查器”服务以及 Firebug 和 Chrome 开发工具来检查发生了什么，他们似乎都只是说没有发生重定向——他们只是给出 200 状态.htm 页面上的消息。

我很想做到这一点，因为如果出现问题，会有一些重要的 SEO 影响，所以我想知道是否有人可以确认这是正确的行为，或者它是否以某种方式错误并且没有进行正确的 301 重定向？如果错误，我该如何纠正它以执行真正的 301 重定向？

感谢大家的指点！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T15:41:59.037

您可以使用`<action type="Redirect" url="..." redirectType="Permanent" />`重定向请求而不是重写。

# php - PHP - 小时差（HH:MM 格式）

> ID：10351981
> 
> 赞同：4
> 
> 时间：2012-04-27T13:54:47.393
> 
> 标签：php, time

我正在尝试计算在这里工作的人的轮班模式，从结束时间中减去开始时间在大多数情况下都有效，但如果他们通宵工作则不行。例如，某人的工作`10pm to 6am`将显示为：

```
22:00 - 06:00 
```

我希望它返回`8 hours`，但我就是想不出最好的方法。

烦人的是，我将不得不在 Javascript 中做同样的事情，所以我希望我能理解这个逻辑。在这种情况下，从另一个日期中删除一个日期是行不通的......

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T14:00:31.470

```
function timeDiff($firstTime,$lastTime) {
    $firstTime=strtotime($firstTime);
    $lastTime=strtotime($lastTime);
    $timeDiff=$lastTime-$firstTime;
    return $timeDiff;
}

echo (timeDiff("10:00","12:00")/60)/60; 
```

最初写在这里：[https ://ao.ms/how-to-get-the-hours-difference-in-hhmm-format-in-php/](https://ao.ms/how-to-get-the-hours-difference-in-hhmm-format-in-php/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T14:07:15.527

老派，带有字符串操作和数学：

```
$input = '22:00 - 06:00';
preg_match('/(\d+):(\d+)\D*(\d+):(\d+)/', $input, $matches);
list(, $startHour, $startMin, $endHour, $endMin) = $matches;
$totalMinutes = ($endHour * 60 + $endMin - $startHour * 60 + $startMin + 1440) % 1440;
$hours = floor($totalMinutes / 60);
$mins = $totalMinutes % 60;

echo "works for $hours hours, $mins minutes"; 
```

具有日期/时间功能：

```
$input = '22:00 - 06:00';
list($start, $end) = array_map('trim', explode('-', $input));
$start = new DateTime($start.'+00:00');
$end = new DateTime($end.'+00:00');
if ($start > $end) $start->sub(new DateInterval('P1D'));
$interval = $end->diff($start);
echo "works for ".$interval->h." hours, ".$interval->m." minutes"; 
```

**使用日期/时间函数的任何解决方案的恶魔陷阱：**

如果您没有明确指定 and 的偏移量`$start`，`$end`并且我们正在谈论夜班，并且代码在夏令时开始或结束的那一天运行，那么无论 DST 偏移量是多少，结果都会关闭。

对于使用 , 等的任何解决方案都是`DateTime`如此`strtotime`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-27T13:59:29.633

没有一些日期功能：

```
$start = '22:00';
$end = '06:00';

$getnum = function($value) {
    $pieces = explode(':', $value);
    if(count($pieces) > 0) {
        return (intval($pieces[0])*60)+intval($pieces[1]);
    }

    return 0;
};

$start_num = $getnum->__invoke($start);
$end_num = $getnum->__invoke($end);

$diff = max($start_num, $end_num) - min($end_num, $start_num);

echo intval($diff / 60).'.'.($diff % 60).' hours'; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-27T14:08:11.317

您可以使用函数 mktime (http://php.net/manual/en/function.mktime.php) 返回秒数并以整数格式减去两个日期。

```
<?php
   $date1=mktime(1, 2, 3, 4, 5, 2006);
   $date2=mktime(1, 2, 3, 4, 5, 2008);
   $diference=$date2-$date1;

   echo $diference

   ?> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-27T14:01:00.553

工作和最简单的样本：

```
$start = 22;
$end = 6;

if ($start > $end) {
    $end += 24;
}

$duration = $end - $start;

echo 'Duration: ' . $duration . 'hours.'; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-27T13:57:07.910

您可以查看`date_diff`，这是此函数的别名：

[http://www.php.net/manual/en/datetime.diff.php](http://www.php.net/manual/en/datetime.diff.php)

MySQL 也有一个`DATEDIFF()`函数，所以如果你从数据库中获取它们，你可以直接从 SQL 中进行（我知道你没有指定，但我只是想提一下）。

# android - Android上的Scala（从多个自定义对话框中检索数据）

> ID：10351988
> 
> 赞同：0
> 
> 时间：2012-04-27T13:55:21.280
> 
> 标签：android, scala, sbt-android-plugin

我遇到的问题是从我的选项菜单对话框中捕获数据。下面的示例有一个带有四个对话框布局的选项菜单，该对话框捕获了我需要返回给主机活动的字符串。有人可以解释为什么下面的代码不起作用。这是我的代码示例：

```
class ClientConfigActivity extends Activity with TypedActivity {

// Called when the activity is first created                        
override def onCreate(savedInstanceState: Bundle) {                 
  super.onCreate(savedInstanceState)                                
  setContentView(R.layout.clientconfig)                             

  // Dialog Test                                                    
  Log.d("Option", getIntent.getExtras.get("localIP").toString)      
  Log.d("Option", getIntent.getExtras.get("remoteIP").toString)     
}                                                                   

// Relieves results from clientConfig option menu                                     
override def onActivityResult(requestCode: Int, resultCode: Int, data: Intent) {      
  super.onActivityResult(requestCode, resultCode, data)                             

  requestCode match {                                                                 
    case 0 => Log.d("Option", "Option 1 got here")                                    

      //local_IPAddress.setText("hello")                                              

    case 1 => Log.d("Option", "Option 2 got here")                                    
  }                                                                                   
}         

// Called when an options menu is created.               
override def onCreateOptionsMenu(menu: Menu) = {         
  // Inflates XML file into something that can be used.  
  val inflater = getMenuInflater                         
  inflater.inflate(R.menu.clientconfigmenu, menu)        

  super.onCreateOptionsMenu(menu)                        
}      

// Test to see which option was clicked.                                                                                           
override def onOptionsItemSelected(item: MenuItem) = {                                                                             
  // Check for clientLocation_option                                                                                               
  item.getItemId match {                                                                                                           

    case R.id.option_LocalConfig => {                                                                                              
      // Set reference to dialog_localconfig_layout.xml                                                                            
      val dialog = new Dialog(this)                                                                                                
      dialog.requestWindowFeature(Window.FEATURE_LEFT_ICON)                                                                        
      dialog.setContentView(R.layout.dialog_localconfig_layout)                                                                    
      dialog.setTitle("Local Configuration")                                                                                       

      // dialog_remoteconfig_layout.xml References                                                                                 
      val local_IP = dialog.findViewById(R.id.setLocalIPaddress).asInstanceOf[EditText]                                            
      val local_PortNumber = dialog.findViewById(R.id.setLocalPortNum).asInstanceOf[EditText]                                      
      val local_Done_Button = dialog.findViewById(R.id.local_DoneButton).asInstanceOf[Button]                                      

      // RemoteConfig Done Button Listener                                                                                         
      dialog.show()                                                                                                                
      dialog.setFeatureDrawableResource(Window.FEATURE_LEFT_ICON, android.R.drawable.ic_menu_myplaces)                             

      // LocalConfig Done Button Listener                                                                                          
      local_Done_Button.setOnClickListener(new OnClickListener {                                                                   
        override def onClick(view: View) {                                                                                         
          // Start the ClientConfig Activity w/explicit intent                                                                     
          val intent = new Intent(dialog.getContext, classOf[ClientConfigActivity])                                                
          intent.putExtra("localIP", local_IP.getText.toString)                                                                    
          intent.putExtra("localPort", local_PortNumber.getText.toString)                                                          
          startActivityForResult(intent, 0)                                                                                        
        }                                                                                                                          
      })                                                                                                                           
    }                                                                                                                              

    case R.id.option_RemoteConfig => {                                                                                             
      // Set reference to dialog_remoteconfig_layout.xml                                                                           
      val dialog = new Dialog(this)                                                                                                
      dialog.requestWindowFeature(Window.FEATURE_LEFT_ICON)                                                                        
      dialog.setContentView(R.layout.dialog_remoteconfig_layout)                                                                   
      dialog.setTitle("Remote Configuration")                                                                                      

      // dialog_remoteconfig_layout.xml References                                                                                 
      val remote_IP = dialog.findViewById(R.id.setRemoteIP).asInstanceOf[EditText]                                                 
      val remote_PortNumber = dialog.findViewById(R.id.setRemotePortNum).asInstanceOf[EditText]                                    
      val remote_Done_Button = dialog.findViewById(R.id.remote_DoneButton).asInstanceOf[Button]                                    

      //Show dialog_remoteconfig_layout Custom Layout                                                                              
      dialog.show()                                                                                                                
      dialog.setFeatureDrawableResource(Window.FEATURE_LEFT_ICON, android.R.drawable.ic_menu_call)                                 

      // RemoteConfig Done Button Listener                                                                                         
      remote_Done_Button.setOnClickListener(new OnClickListener {                                                                  
        override def onClick(view: View) {                                                                                         
          // Start the ClientConfig Activity w/explicit intent                                                                     
          val intent = new Intent(dialog.getContext, classOf[ClientConfigActivity])                                                
          intent.putExtra("remoteIP", remote_IP.getText.toString)                                                                  
          intent.putExtra("remotePortNum", remote_PortNumber.getText.toString)                                                     
          startActivityForResult(intent, 1)                                                                                        
        }                                                                                                                          
      })                                                                                                                           
    }                                                                                                                              

  }                                                                                                                                

  super.onOptionsItemSelected(item)                                                                                                
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:01:14.103

当您尝试显示对话框时会发生什么？

对话框的生命周期可能看起来有点奇怪。有关详细信息，请参阅[http://developer.android.com/guide/topics/ui/dialogs.html](http://developer.android.com/guide/topics/ui/dialogs.html)。

您应该调用 showDialog(yourDialogId) 来打开对话框。对话框创建在 onCreateDialog(id) 中完成。在这里，您将 id 与 yourDialogId 匹配并创建并返回对话框。

# mysql - MySQL：使用 TIME 数据类型的操作

> ID：10351991
> 
> 赞同：1
> 
> 时间：2012-04-27T13:55:46.853
> 
> 标签：mysql, time

假设我有一张这样的桌子：

```
create table reserved (
    id int(4) primary key,
    name varchar(30),
    quantity int(4),
    price int(8),
    info varchar(50),
    expiration_time time,
    contract_id varchar(50)
); 
```

我在其中插入了几行，对 expire_time 字段使用格式“HH:MM:SS”。现在我想通过添加 50 秒来更新这个字段：

```
update reserved set expiration_date=expiration_date+50 where id=1 
```

当我有 HH:MM 并且 SS 不到 10 秒时，一切正常。但是对于像：01:10:40 这样的时间，添加 50 秒将导致 01:11:00 。我能做些什么来解决这种行为？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:57:22.627

[`ADDTIME()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_addtime)与 一起使用[`MAKETIME()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_maketime)：

```
UPDATE reserved
SET expiration_date=ADDTIME(expiration_date,MAKETIME(0,0,50))
WHERE id=1; 
```

# xcode - 打开 xcode 不断添加旧证书

> ID：10351993
> 
> 赞同：4
> 
> 时间：2012-04-27T13:56:01.987
> 
> 标签：xcode

我遇到了证书问题，所以我删除了我的证书，在苹果开发者门户网站上使它们失效，然后重新开始使用新证书。问题是，每次我打开 xcode 时，它​​都会将旧的重新添加到钥匙串中，然后给我“在钥匙串中出现多次”的错误。有人知道如何阻止这种情况发生吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T14:21:28.043

您还必须删除配置文件。

您可以在**Organizer**中执行此操作。在顶部选择**设备。**在左侧窗格中，您有**Library**部分，并且在那里您有**Provisioning profiles**。删除所有不需要的并重新启动 XCode（可能不需要重新启动，但我们都知道 XCode 是如何工作的 :)）。比安装新的配置文件和证书。

# sql - PostgreSQL 如何在表之间复制数据

> ID：10351998
> 
> 赞同：6
> 
> 时间：2012-04-27T13:56:08.443
> 
> 标签：sql, postgresql, set, sql-update

我有两个表：account_company 和 document_invoice。表 account_company 有 2 列：company_id 和 company_name。表 document_invoice 具有相同的列：company_id 和 company_name。发生了一些事情并从 document_invoice 中删除列公司名称中的所有数据。

如何编写 SQL 查询将数据从客户公司表复制到 document_invoice？我一直在使用 UPDATE 和 SET 但我不知道具体如何。

```
UPDATE document_invoice
   SET company_name = (SELECT company_name FROM account_company)
 WHERE document_id.company_name=document_id.account 
```

![在此处输入图像描述](../Images/c69f6107eb92eaf3420d883346bec26d.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T14:02:18.990

这应该有效：

```
UPDATE document_invoice t1 
SET company_name = t2.company_name
FROM account_company t2 
WHERE t1.company_id = t2.company_id 
```