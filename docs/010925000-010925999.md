# StackOverflow 问答 10925000-10925999

# charts - 关于 jqPlot 缩放

> ID：10925002
> 
> 赞同：1
> 
> 时间：2012-06-07T02:46:35.597
> 
> 标签：charts, zooming, jqplot

我正在尝试使用 jqPlot 在我的项目中创建图表。我遇到的问题是当我放大到某个区域时，x 轴标签显示如下“6 月 1 日、6 月 1 日、6 月 1 日、6 月 2 日、6 月 2 日、6 月 2 日、6 月 3 日”等。我想要的是“6 月 1 日，6 月 2 日，6 月 3 日”。我怎样才能做到这一点？对不起英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T21:06:57.110

您可以提供这样的刻度间隔值：

```
var plot = $.jqplot('graph', [dataSet], {
    // ...
    axes: {
        xaxis: {
            min: 'X', // E.g. '2012-06-01'
            max: 'X',
            tickInterval: '1 day' // Yes, it understands this.
            // ...
        }
    },
    // ...
}); 
```

但请记住这一点：为了使 tickInterval 起作用，您必须提供至少一个最小值或最大值。

# php - 在大多数现代浏览器中显示进度条的简单方法有哪些？

> ID：10925003
> 
> 赞同：0
> 
> 时间：2012-06-07T02:46:47.727
> 
> 标签：php, html, progress-bar

所以我有这个：

```
<progress max="100" value="50">   <strong>Progress: 50 of 100 done.</strong>         
</progress> 
```

在运行良好的 Opera 中，在 IE 中它只显示“进度：50 of 100 done”而没有栏。

在大多数现代浏览器中显示进度条的简单方法有哪些？它仅在页面加载后才更新，因此不需要 ajax 等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T02:54:15.017

我确定有很多 javascript 解决方案。试试 jQuery UI 进度条，它在劣质浏览器中应该比 HTML5 标签更可靠。

[http://docs.jquery.com/UI/Progressbar](http://docs.jquery.com/UI/Progressbar)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T02:54:35.613

不使用`<progress>`标签显示进度条的最简单方法是：

```
<div style="position: relative;">
    <div style="position: relative; z-index: 2; text-align: center;">Progress: 50/100</div>
    <div style="position: absolute; left: 0px; top: 0px; bottom: 0px; width: 50%; background-color: blue;"></div>
</div> 
```

`width`如果您愿意，只需更改文本和样式即可制作动画也很容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T02:55:29.363

如果您不想为此使用 jQuery 并且仍然使其与旧浏览器兼容，[请查看此博客文章](http://www.useragentman.com/blog/2012/01/03/cross-browser-html5-progress-bars-in-depth/)。

# android - 如何将本地 javadoc 文件夹附加到没有绝对路径的项目

> ID：10925004
> 
> 赞同：5
> 
> 时间：2012-06-07T02:46:48.997
> 
> 标签：android, javadoc

我正在尝试附加 android-support-v4 的源代码，并已按照此问题的说明进行操作：

[如何为 Android 兼容包安装 javadoc？](https://stackoverflow.com/questions/8577190/how-to-install-javadoc-for-android-compatibility-package)

这个项目在 git repo 上共享，所以我不想签入`.classpath`指向本地文件夹的内容。

在共享项目中指向这个 javadoc 的最佳方式是什么？我愿意让其他人生成 javadoc，但我需要一种方法来指向每个人的 Android SDK 目录。不过，可以签入存储库的解决方案会更好。

我可以在指向 javadoc 文件夹的文件路径中使用变量吗？我希望这样的事情：`file:/$ANDROID_SDK_DIR$/extras/android/compatibility/v4/docs/`

**编辑：** 我发现了与 javadocs 和 android 库问题有关的错误的[评论。](http://code.google.com/p/android/issues/detail?id=27490#c21)我创建了属性文件，现在可以在 Eclipse 中看到 javadocs，但我仍然遇到同样的问题。该文件包含我自己的 Android SDK 目录的绝对路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T18:21:13.680

我发现在新版本的 ADT 中，您必须在`libs`文件夹中包含一个 .properties 文件以及您的 jar。将 .classpath 更改为指向 docs/sources 的常规方法在带有 ADT 的 Eclipse 中不起作用，但这会起作用。

如果文件中有 GSON，请在同一文件夹中`gson-2.2.2.jar`创建`gson-2.2.2.jar.properties`

***gson-2.2.2.jar.properties：***

```
src=docs\\gson-2.2.2-sources.jar
doc=docs\\gson-2.2.2-javadoc.jar 
```

然后在其中创建一个`docs`文件夹`libs`并将您的源代码和 javadoc jar 移动到其中。

这解决了将任何`/libs`内容编译到您的项目中的问题。仅包含根目录中的文件，因此为您的文档 ( `/libs/docs`) 创建一个文件夹是处理此问题的好方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-20T20:32:37.150

从这个解决方案中可以看出，他在 SVN 存储库中有一个第三方库，他希望在 Eclipse 中将 source/javadoc 与它本地关联。

我认为没有令人满意的解决方案，但您可以尝试。

检查此[解决方案](https://stackoverflow.com/questions/300328/eclipse-attach-source-javadoc-to-a-library-via-a-local-property)，

希望它可以帮助你。

# zend-framework - 引导资源未在单元测试中加载

> ID：10925006
> 
> 赞同：0
> 
> 时间：2012-06-07T02:46:54.893
> 
> 标签：zend-framework

我想做的是在单元测试中获取 Doctrine EM 的实例（使用 Bisna 库来加载它）。当它在“正常”（不是单元测试）模式下运行时，我可以在控制器/模型中获取实例。而且我会发疯地将逐行代码与其工作的项目进行比较:(

单元测试：

```
<?php
class Application_Models_UserTest extends PHPUNit_Framework_TestCase
{
    protected $_em;
    protected $_model;

    public function setUp()
    {
        $this->bootstrap = new Zend_Application(APPLICATION_ENV, APPLICATION_PATH . '/configs/application.ini');
        $this->_em = Zend_Registry::get('doctrine')->getEntityManager();
        $this->_model = new Application_Model_User();
        parent::setUp();
        //$this->_em = Zend_Registry::get('doctrine')->getEntityManager();
        //$this->_model = new Application_Model_User();
    } 
```

我得到：

```
1) Application_Models_UserTest::testGetByEmailExists
Zend_Exception: No entry is registered for key 'doctrine'

/var/www/html/social_test/library/vendor/Zend/Registry.php:147
/var/www/html/social_test/tests/application/models/UserTest.php:10 
```

正如您从注释行中看到的那样，我尝试（绝望地）在 parent::setUp() 调用后获取教义 EM 实例，但未成功。认为 parent::setUp() 完成初始化应用程序，它可能会有所帮助。

我正在运行它`phpunit -c phpunit.xml`。phpunit.xml：

```
<phpunit bootstrap="./bootstrap.php">
    <testsuite name="Application Test Suite">
        <directory>./application</directory>
    </testsuite>
    <testsuite name="Library Test Suite">
        <directory>./library</directory>
    </testsuite>

    <filter>
        <whitelist>
            <directory suffix=".php">../../library</directory>
        </whitelist>
    </filter>
    <logging>
        <log type="coverage-html" target="./public/report" charset="UTF-8"
             yui="true" highlight = "true" lowUpperBound="50" highLowerBound="80" />
    </logging>
</phpunit> 
```

单元测试 bootstrap.php 也是标准的且未受影响。插件路径在 application.ini 中指定，它在生产部分（所以它在测试部分继承）。ZF 版本 1.11.11。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:52:29.280

这对我有用（取自 ZendCast [Many-to-Many with Doctrine 2](http://code.google.com/p/zendcasts/source/browse/trunk/zc70-many-to-many-with-doctrine-2?spec=svn61&r=61)）

```
 class ModelTestCase
        extends PHPUnit_Framework_TestCase
    {
        /**
         *
         * @var \Bisna\Application\Container\DoctrineContainer
         */
        protected $doctrineContainer;

      public function setUp()
    {
        global $application;
        $application->bootstrap();
        $this->doctrineContainer = Zend_Registry::get('doctrine');

        $em = $this->doctrineContainer->getEntityManager();
        $tool = new \Doctrine\ORM\Tools\SchemaTool($em);
        $tool->dropDatabase();
        $tool->createSchema($em->getMetadataFactory()->getAllMetadata());

        parent::setUp();
    } 
```

单元测试的 Bootstrap.php 如下所示：

```
<?php
    // Define path to application directory
    defined('APPLICATION_PATH')
       || define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/../../application'));

    // Define application environment
    define('APPLICATION_ENV', 'testing');

    // Ensure library/ is on include_path
    set_include_path(implode(PATH_SEPARATOR, array(
       realpath(APPLICATION_PATH . '/../library'),
       get_include_path()
    )));

    /** Zend_Application */
    require_once 'Zend/Application.php';
    require_once 'ModelTestCase.php';
    require_once 'ControllerTestCase.php';
    // Create application, bootstrap, and run
    $application = new Zend_Application(
       APPLICATION_ENV,
       APPLICATION_PATH . '/configs/application.ini'
    );
    //$application->bootstrap();
    clearstatcache(); 
```

# php - 授予用户对特定 mySQL 表的权限是良好的安全实践吗？

> ID：10925008
> 
> 赞同：1
> 
> 时间：2012-06-07T02:47:06.610
> 
> 标签：php, mysql, security

我一直在为朋友的 Joomla 网站开发自定义应用程序。它不是一个组件，它是一个独立的 PHP / mySQL 应用程序，它通过 PHP 包含被拉入特定的文章。

但是，该应用程序的数据确实驻留在网站其余部分使用的同一数据库中。但是，它位于数据库中自己的表中。

你们中的许多人在指出我的代码中的安全漏洞方面非常有帮助，因为我发现我不能使用单独的数据库，从安全的角度来看，创建一个新用户并分配它是一个好主意吗？仅访问此应用程序使用的表？

我已经知道*该怎么*做，只是想决定我*是否应该*这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T02:50:45.670

当然，如果您的用户只能访问某些表，或者只能做某些事情，您必须缩小可能的安全风险。

仅授予所需的权限，仅此而已。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T02:51:16.170

绝对是个好主意。

它的技术名称是*纵深防御*，只要不是太难，绝对没有理由不这样做。

# html - 如何在 div 中的表格中添加水平滚动条？

> ID：10925019
> 
> 赞同：6
> 
> 时间：2012-06-07T02:48:44.470
> 
> 标签：html, css, html-table, scrollbar

如何将水平滚动条添加到 div 内的表格中？有没有 CSS 解决方案？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-07T02:54:51.887

您将无法将滚动条添加到表格，但您可以将其添加到包含您的表格的 DIV。

例如：

```
<div style="width: 400px; height: 200px; overflow: scroll;">
   <table>...</table>
</div> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-07T03:11:02.983

如果您只想要一个水平滚动条，请使用 overflow-x:auto; 然后设置宽度。

```
div
{
width: 300px;
overflow-x:auto;
overflow-y:hidden;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-07T02:59:17.967

添加滚动条使用溢出：

```
div {
    width: 100px;
    overflow: auto;
} 
```

您还必须向表格添加宽度：

```
table {
    width: 300px;
} 
```

[http://jsfiddle.net/tpDGE/](http://jsfiddle.net/tpDGE/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-07T02:55:02.563

尝试一下：

```
div {
    display: block;
    height: 200px;
    overflow: scroll;
} 
```

# jquery - 如果条件在jquery？

> ID：10925022
> 
> 赞同：1
> 
> 时间：2012-06-07T02:48:59.400
> 
> 标签：jquery, html

我想在“a”标签中的点击功能上添加一个类，如果我最接近标签的 div 有类“jitender”，那么 wana 警报。

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Untitled Document</title>
    <script type="text/javascript" src="jquery-1.7.2.js"></script>
    <script type="text/javascript">
        $(function () {
            $(".Cmnew").find("a").click(function () {
                $(this).addClass("jitender");
                if($(".Cmnew").closest("a").className() == "jitender") {
                    alert("helllo")
                }
            })
        })
    </script>
</head>
<body>
    <div class="Cmnew">
        <a href="#">first</a>
        <a href="#">second</a>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T02:50:48.407

尝试：

```
if($(".Cmnew").closest("a").hasClass("jitender")){
...alert 
```

或者

```
if($(".Cmnew").children("a").hasClass("jitender")){
 ... alert 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T05:37:25.427

```
$(function() {
    $(".Cmnew").find("a").click(function() {
        $(this).addClass("jitender");
        if ($(this).siblings("a:first").hasClass("jitender")) {
            alert("helllo")
        }
    });
})​;​ 
```

**[演示 1](http://jsfiddle.net/A3gsF/5/)**

另一种解决方案

```
$(function() {
    $(".Cmnew").find("a").click(function() {
        $(this).addClass("jitender");
        if ($(this).siblings("a.jitender:first").length) {
            alert("helllo")
        }
    });
});​ 
```

**[演示 2](http://jsfiddle.net/A3gsF/6/)**

### 你什么时候收到警报

*   首先单击任何链接，这会将类添加到单击的链接
*   然后单击另一个链接，您将收到警报，因为它的邻居有您搜索过的课程

# google-chrome - 谷歌浏览器中未触发后台页面功能：

> ID：10925025
> 
> 赞同：0
> 
> 时间：2012-06-07T02:49:16.390
> 
> 标签：google-chrome, google-chrome-extension

我正在使用以下代码访问谷歌浏览器中的后台页面功能

**popup.html**

```
function sendRequest(ea,eb)
{
console.log("Inside");
chrome.extension.sendRequest({ea:ea,eb:eb},
        function(response)
        {
            alert(response.farewell);

        });    
} 
```

**背景.html**

```
<html>
<body>
<script>
chrome.extension.onRequest.addListener(
  function(request, sender, sendResponse) {
sendResponse({farewell: "goodbye"});
  })
</html>
</body>
</script> 
```

**清单.json**

```
{
  "name": "My First Extension",
  "version": "1.0",
  "manifest_version": 2,
  "background": {
    "page": "background.html"
  },
"content_scripts": [
    {
      "matches": ["http://*/"],

      "js": ["popup.js"]
    }
  ],

  "description": "The first extension that I made.",
  "browser_action": {
    "default_icon": "icon.png",
    "default_popup": "mine.html"
  },
  "permissions": [
    "tabs","http://*/","background"

  ],
   "web_accessible_resources": ["loading.html","bu.png"] 

 } 
```

但是它不会打印警报。谁能告诉我我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T07:31:16.940

您的 background.html 的 HTML 格式非常错误，应该修复；

```
<html>
<body>
<script>
  chrome.extension.onRequest.addListener(
    function(request, sender, sendResponse) {
  sendResponse({farewell: "goodbye"});
    })
</script>
</body>
</html> 
```

标签应该按照打开的相反顺序关闭，以保持正确的层次结构。由于您没有这样做，因此该`<script>`元素格式错误并且包含无效语法`</html></body>`，因此无法正确执行。

由于您使用的是清单的[第 2 版](http://code.google.com/chrome/extensions/manifestVersion.html)，您可能需要考虑将此脚本元素的内容（忽略所有 HTML）抽象到其自己的文件（例如 background.js）中，并将清单更改为以下内容；

```
{
  "name": "My First Extension",
  "version": "1.0",
  "manifest_version": 2,
  "minimum_chrome_version": "18",
  "background": {
    "scripts": ["background.js"]
  },
"content_scripts": [
    {
      "matches": ["http://*/"],

      "js": ["popup.js"]
    }
  ],

  "description": "The first extension that I made.",
  "browser_action": {
    "default_icon": "icon.png",
    "default_popup": "mine.html"
  },
  "permissions": [
    "tabs","http://*/","background"

  ],
   "web_accessible_resources": ["loading.html","bu.png"] 

 } 
```

请注意，[背景属性](http://code.google.com/chrome/extensions/background_pages.html)现在包含一个字符串数组，这些字符串表示要（按指定顺序）加载到动态生成的背景页面中的 JavaScript 文件。

我还将该`minimum_chrome_version`属性设置为 18，因为清单版本 2 仅应在针对此版本的 Chrome 及更高版本时使用。

开发人员现在应该只在需要支持旧版 Chrome 时才真正需要使用后台页面而不是脚本。

# 编辑

它只是单击了您正在尝试在后台页面中执行嵌入的 JavaScript。Manifest 版本 2 引入了禁止执行内联（例如和）和嵌入式 JavaScript的[内容安全策略。](http://code.google.com/chrome/extensions/contentSecurityPolicy.html)这就是为什么你的 background.html 不起作用以及为什么 background.js 会起作用。您还需要确保您的 popup.html 不包含任何嵌入式 JavaScript。最好的解决方法（通常也是最佳实践）是将所有 JavaScript 抽象到它自己的文件（例如 popup.js）中，该文件由 HTML 文件引用。例如;`onclick="showDialog();"``href="javascript:void(0);"`

```
<script src="/popup.js"></script> 
```

# php - 多文件输入图片上传IE 8

> ID：10925026
> 
> 赞同：0
> 
> 时间：2012-06-07T02:49:18.790
> 
> 标签：php, html, internet-explorer-8, image-upload

美好的一天，我有一个包含多个文件输入字段的表单。我有一个脚本可以在更改时自动添加另一个文件输入字段。这是用于图像上传功能（以便用户可以一次上传多个图像）。在 Firefox 中，它工作正常，但在 ie8 上失败。

这是选择许多图像时表单的样子

表单.html

```
<form class="ysForm" action="uploadImage.php" encType="multipart/form-data" method="post">
<input name="ys-file_0" class="ysFile" type="file" multi_selector="[object Object]"/>
<input name="ys-file_1" class="ysFile" type="file" multi_selector="[object Object]"/>
<input name="ys-file_2" class="ysFile" type="file" multi_selector="[object Object]"/>
</form> 
```

上传图片.php

```
foreach( $_FILES as $theFile ) {
   //do image resize and save to a directory code
} 
```

但是 uploadImage 似乎没有获取图像文件。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:06:02.693

根据其他答案，例如[此处](https://stackoverflow.com/questions/6207388/is-it-possible-to-select-and-upload-multiple-files-at-one-time-in-internet-explo)的答案， IE8 不支持文件输入的多个选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-06T14:22:20.790

IE8 不支持多文件上传

你可以看到这个信息：

[IE8 - 输入 (type="file") 获取文件](https://stackoverflow.com/questions/12830058/ie8-input-type-file-get-files)

[http://social.msdn.microsoft.com/Forums/en-US/f0e72657-962f-4254-b95c-c47482401899/multiple-file-uploading-in-ie9-and-older-versions?forum=ieextensiondevelopment](http://social.msdn.microsoft.com/Forums/en-US/f0e72657-962f-4254-b95c-c47482401899/multiple-file-uploading-in-ie9-and-older-versions?forum=ieextensiondevelopment)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-07T02:54:44.210

大多数现代浏览器（包括 IE8）支持通过单个对话框上传多个文件。语法是 `<input type="file" multiple="true" name="upload" />`

您的表单将多次调用您的 php 脚本，每个图像一次。

话虽如此，我建议使用 Uploadify，[http:](http://www.uploadify.com/) //www.uploadify.com/ ，因为它更容易。还有一些花哨的基于 JQuery 的解决方案。

# vim - Vim(script)L 文件浏览器/超链接

> ID：10925030
> 
> 赞同：1
> 
> 时间：2012-06-07T02:50:36.263
> 
> 标签：vim

在命令行中，如果你输入 "vim some_directory/"，vim 会打开一个文件浏览器，你可以通过使用 "j" 和 "k" 向上或向下移动来浏览你的目录结构，然后使用 "enter" 选择" 直到你找到并打开一个文件。

我想在 VimL 中为 vim 编写一个函数，它会在您的子目录中生成一个（目前）任意文件名列表，并以上述文件浏览器的形式列出它们，您可以在其中导航到一个文件通过按“j”或“k”并通过按“enter”选择它（打开它，进行编辑）来选择列表。

VimL 有可能吗？如果是这样，怎么做？请记住，我对实现文件浏览器功能感兴趣，我已经想出获取文件名列表。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:20:27.167

在 Vim 中，这是通过*暂存缓冲区*实现的；即你打开一个新的缓冲区`:new`，用 Vimscript（`:normal i...`或`:call setline(1, "foo")`）填充它，然后`:setlocal nomodifiable`。

通常，还会应用以下设置：

```
:setlocal buftype=nofile bufhidden=wipe nobuflisted noswapfile 
```

要实现操作，请使用`:map <buffer>`仅为该暂存缓冲区定义特殊映射，例如

```
:nnoremap <buffer> <CR> :echo "you selected: " getline('.') 
```

瞧！

# python - 从字典创建元组列表？

> ID：10925035
> 
> 赞同：0
> 
> 时间：2012-06-07T02:50:51.310
> 
> 标签：python, dictionary, casting, nested, tuples

我有一个简单的字典：

```
{"keyy":{"key": "value", "cey": "value"}, "kaye":{"key": "value"}} 
```

我想编码为“上下文感知”元组：

```
[("keyy","key","value"), ("keyy","cey","value"), ("kaye","key","value")] 
```

我对*ValueError: too many values to unpack*的尝试：

```
if __name__=='__main__':
    mydict={"keyy":{"key": "value", "cey": "value"}, "kaye":{"key", "value"}}
    mytuplelist=[tuple(k,v,val) for (k,v) in [(key,val) for (key,val) in mydict]]
    print mytuplelist 
```

**我将如何创建这个元组列表？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T03:03:45.243

**使用列表理解：**

```
mydict={"keyy":{"key": "value", "cey": "value"}, "kaye":{"key": "value"}}

mytuplelist=[(key,y,mydict[key][y]) for key in mydict for y in mydict[key]]

print (mytuplelist) 
```

**输出：**

```
[('keyy', 'cey', 'value'), ('keyy', 'key', 'value'), ('kaye', 'key', 'value')] 
```

**使用简单的 For-In 循环：**

```
dic={"keyy":{"key": "value", "cey": "value"}, "kaye":{"key": "value"}}
lis=[]
for x in dic:
  for y in dic[x]:
      lis.append((x,y,dic[x][y]))
print(lis) 
```

**输出：**

```
[('keyy', 'cey', 'value'), ('keyy', 'key', 'value'), ('kaye', 'key', 'value')] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T03:01:59.870

我喜欢这个生成器：

```
mydict = {"keyy":{"key": "value", "cey": "value"}, "kaye":{"key": "value"}}

def unnest(d):
   for outerkey in d.iterkeys():
       for innerkey, value in d[outerkey].iteritems():
           yield outerkey, innerkey, value

mytuplelist = list(unnest(mydict)) 
```

或者，您当然可以将其放入列表理解中：

```
mytuplelist = [(outerkey, innerkey, value) for outerkey in mydict.iterkeys() 
               for (innerkey, value) in mydict[outerkey].iteritems()] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T03:05:28.987

以下示例将按照您的指示创建元组列表：

```
mydict = {"keyy":{"key": "value", "cey": "value"}, "kaye":{"key": "value"}}
tuplelist = []
for outer, dct in mydict.iteritems():
    tuplelist.extend((outer, key, val) for key, val in dct.iteritems()) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T03:04:12.520

要修复您的代码：

```
mydict={"keyy":{"key": "value", "cey": "value"}, "kaye":{"key" : "value"}}
mytuplelist = [(outer, inner, val) for outer, d in mydict.iteritems() 
          for inner, val in d.iteritems()]
print mytuplelist 
```

请参阅kindall关于如何以简单方式执行此操作的答案:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T03:11:31.080

通过更正您的拼写错误（`:`在最后一个嵌套字典中缺失，这是“要解包的项目太多”的可能原因之一），您可以恢复您的列表理解：

```
dict1 = {"keyy":{"key": "value", "cey": "value"}, "kaye":{"key": "value"}}

print [(key1, key2, dict1[key1][key2]) for key1 in dict1 for key2 in dict1[key1]] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-07T03:11:36.013

使用列表推导

```
>>> D={"keyy":{"key": "value", "cey": "value"}, "kaye":{"key": "value"}}
>>> [(i,)+j for i in D for j in D[i].iteritems()]
[('keyy', 'cey', 'value'), ('keyy', 'key', 'value'), ('kaye', 'key', 'value')] 
```

# iphone - Cocoa XML-RPC 框架 XMLRPCConnection 方法

> ID：10925037
> 
> 赞同：0
> 
> 时间：2012-06-07T02:51:10.240
> 
> 标签：iphone, cocoa, xml-rpc

如果有人对这个框架有任何经验：[https://github.com/eczarny/xmlrpc/](https://github.com/eczarny/xmlrpc/)，那将是最好的，但我会尽力填写。

有一个连接管理器类，它将每个连接存储在使用 UUID 作为键的哈希表中。管理器有一个方法，您可以使用请求对象生成新连接。这是问题所在：

我可以获取连接对象，但我找不到通过同一连接发送另一个方法请求的方法。我唯一看到的是一个公开的类方法，否则我无法弄清楚如何通过同一连接发送另一个请求。我是否需要不断建立新的联系才能做到这一点？

这是连接类：[https ://github.com/eczarny/xmlrpc/blob/master/XMLRPCConnection.h](https://github.com/eczarny/xmlrpc/blob/master/XMLRPCConnection.h)

这是管理器类：[https ://github.com/eczarny/xmlrpc/blob/master/XMLRPCConnectionManager.h](https://github.com/eczarny/xmlrpc/blob/master/XMLRPCConnectionManager.h)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:47:20.390

事实证明，没有办法再次获得这种联系。这只是一次性连接。我请作者确认。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T02:57:23.643

我从来没有使用过这个框架，但是在简单地查看它之后，我想出了这个。有个方法，

```
- (XMLRPCConnection *)connectionForIdentifier: (NSString *)identifier; 
```

如果您可以存储对第一次请求的标识符的引用，那么您可以使用提供的标识符检索相同的连接，而不是创建新的连接。

# arrays - 从数组中丢失某些值

> ID：10925042
> 
> 赞同：0
> 
> 时间：2012-06-07T02:52:00.867
> 
> 标签：arrays, asp-classic

我有动态输入值的代码，当我第一次使用它添加值时，很好，但是当我想编辑它时，旧值没有插入到 sql 查询中，而是插入了新值

这是示例： ![在此处输入图像描述](../Images/6cc792d253881db239976fb30319375a.png)

这是代码：

============函数==================

```
sub ShowItemfgEdit(query,selItemName,defValue,num,cdisable)
        response.write "<select " & cdisable & " num=""" & num & """ id=""itemCombo"" name=""" & selItemName & """ class=""label"" onchange=""varUsage.ChangeSatuanDt(this)"">"
        if NOT query.BOF then
            query.moveFirst
            WHILE NOT query.EOF
                tulis = ""
                if trim(defValue) = trim(query("ckdbarang")) then
                    tulis = "selected"
                end if
                response.write "<option value=""" & trim(query("ckdbarang")) & """" & tulis & ">" & trim(query("ckdbarang")) & " - " & trim(query("vnamabarang"))
                query.moveNext
            WEND
        end if
        response.write "</select>"
    end sub 
```

============调用函数================

```
<td class="rb" align="left"><% call ShowItemfgEdit(qGetItemfgGrp,"fitem",qGetUsageDt("ckdfg"),countLine,readonlyfg) %></td> 
```

==============发布值======================

```
<input type="hidden" name="fitem" value=""> 
```

================获取值===================

```
for i = 1 to request.form("hdnOrderNum")
        if request.form("selOrdItem_" & i) <> "" then

            'bla...blaa...blaa...

            ckdfg = trim(request.form("fitem_" & i)) '<==here is the problem

            objCommand.commandText = "INSERT INTO IcTrPakaiDt " &_
                                        "(id, id_h, ckdunitkey, cnopakai, dtglpakai, ckdbarang, ckdgudang, nqty1, nqty2, csatuan1, csatuan2, nqtypakai, csatuanpakai, vketerangan, cJnsPakai, ckdprodkey, ckdfg, ncountstart, ncountstop, ncounttotal) " &_
                                        " VALUES " &_
                                        " (" & idDt & ",'" & idHd & "','" & selLoc & "','" & nopakai & "','" & cDate(request.form("hdnUsageDate")) & "','" & trim(ckdbarang) & "','" & trim(ckdgudang) & "'," & nqty1 & "," & nqty2 & ",'" & trim(csatuan1) & "','" & trim(csatuan2) & "'," & nqtypakai & ",'" & csatuanpakai & "','" & trim(keteranganItem) & "','" & trim(cjnspakai) & "','" & ckdprodkey & "','" &ckdfg& "'," & cnt1 & "," & cnt2 & "," & totalcnt & ")"
            set qInsertPakaiDt = objCommand.Execute

        end if
    next 
```

`ckdfg`问题：没有插入旧值进行查询，而是插入了新值。如何修复这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T06:20:19.857

您尝试使用名称`fitem`而不是`fitem_x`.

*注意：*除了您的错误之外，您的代码还有几个错误，包括与安全相关的错误。您不会清理输入，例如，用于 SQL 注入攻击。

# javascript - 鼠标单击时文本输入更改类

> ID：10925044
> 
> 赞同：0
> 
> 时间：2012-06-07T02:52:15.670
> 
> 标签：javascript, jquery, html, css

```
<input type="text" onkeypress="return buyukHarf(event);" class="green" name="f1"/> 
```

`green`单击该区域时是否可以将类更改为其他内容？或者任何其他方式来改变点击时的边框颜色？提前致谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T02:54:29.400

```
$("input").click(function(){
    $(this).removeClass("green").addClass("yellow");    
}); 
```

在表单元素的情况下，我会使用`focus()`和处理`blur()`一个`click()`处理程序。

此外，请尽量避免使用您在示例中所做的内联 javascript。

焦点/模糊示例：

```
$("input").focus(function(){
    $(this).removeClass("green").addClass("yellow");
}).blur(function(){
    $(this).removeClass("yellow").addClass("green");
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T02:57:09.070

试试这个：

```
$( "input" ).click( function() {
    $( this ).attr( { 'class' : 'anotherClass' } );
} ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T02:56:04.447

尝试：

```
$("input[name='f1']").click(function(){
    $(this).removeClass("green").addClass("red");    
}); 
```

或 // 用于边框

```
$("input[name='f1']").click(function(){
    $(this).removeClass("green").css("border", "1px solid red");    
}); 
```

# mysql - 通过一个查询从多个服务器中提取信息

> ID：10925045
> 
> 赞同：-1
> 
> 时间：2012-06-07T02:52:24.617
> 
> 标签：mysql, sql, sql-server

我正在尝试运行一个查询，该查询将从多个服务器中提取信息。让我稍微解释一下。制造某种产品的机器将该信息存储在服务器上。所以当我们做报告时，我们必须在会计端运行查询，然后在第一台服务器上运行查询。我只是想知道是否有人可以指出我正确的方向，或者帮助我构建这个查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T03:01:19.130

由于您没有在技术上指定，我假设您在 MS SQL Server 中运行查询，而其他数据库是 MSSQL 或 MySQL，根据您的标签进行猜测。

如果是这种情况，您有几个选择。如果您要经常运行这些查询，您可以使用[链接服务器](http://msdn.microsoft.com/en-us/library/ff772782.aspx "链接服务器")，或者如果您只想谨慎执行这些查询，您可以使用[OPENROWSET](http://msdn.microsoft.com/en-us/library/ms190312.aspx "开放集")。

其他选项是创建 SQL Server Integration Services (SSIS) 包以从各种来源提取数据并将其编译为单个报告或 SQL Server Reporting Services (SSRS)。

# mobile - 用canvas代替img有好处吗？

> ID：10925047
> 
> 赞同：0
> 
> 时间：2012-06-07T02:52:52.720
> 
> 标签：mobile, canvas, image

我目前正在构建一个移动应用程序，我只是想知道使用 canvas 或 img 标签是否更好（性能方面）。我将在我的网站上查询实际图像。只是想知道一个比另一个有好处。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-08T02:27:48.213

主要好处是避免不必要的浏览器解码。

为了让浏览器[在 screen 上绘制图像](http://aerotwist.com/blog/one-weird-trick/)，他们需要：

1.  检索图像文件的编码内容
2.  将图像从其原始 JPEG、GIF、PNG 或 WebP 格式解码为内存中的位图
3.  将其绘制到屏幕上

用户滚动和调整大小时会出现性能问题。解码特别昂贵。然而，当我们上下滚动页面时，浏览器会尝试检索先前被[屏幕外图像](https://developers.google.com/speed/articles/browser-paint-events)占用的内存（即当前滚动区域之外的内容）。这意味着每当图像从屏幕边缘重新出现时，浏览器都必须重新经历同样昂贵的解码过程。当我们在长页面上有大量图像时，浏览器可能会在滚动时结结巴巴。

**画布有什么不同：浏览器不会回收画布内部的解码信息。**所以通过使用画布来渲染图像，我们避免了不必要的解码。

但当然，如果我的目标是移动设备，我会切换回图像标签并让浏览器完成它们的工作，因为内存是稀缺的。

我认为这是一种特定于浏览器的策略来处理解码图像和有限内存之间的冲突。我更具体地说是在谈论 Chrome，因为该过程在 Timeline 开发工具中可见。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T02:55:54.890

不！如果您正在显示静态内容，`<canvas>`则速度较慢且更加迟钝。`<canvas>`并`<img>`做完全不同的事情，前者用于使用 JavaScript 的动态图形，后者用于从 URI 检索的静态图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T09:51:57.937

浏览器倾向于在 HTML 流式传输时加载 IMG 源进行优化：因此您将在页面完全加载之前看到图像。另一方面，Canvas 将依赖于正在加载的 DOM，因此（通常）在 DOMContentLoaded 事件触发之前不会加载。再加上创建 Canvas 上下文的延迟和内存要求，如果图像是真正静态的，它几乎肯定不是您想要的。

如果您想对图像做一些花哨的事情，为什么不将图像加载到 IMG 标记中，然后在加载后将其转换为画布以进行转换？

# c++ - C++ 程序崩溃终端——我该如何调试？

> ID：10925048
> 
> 赞同：3
> 
> 时间：2012-06-07T02:53:12.230
> 
> 标签：c++, terminal, serial-port, arduino

不要问我怎么做的——我一点也没有。

以下代码使我的终端和我使用的任何运行时分析工具崩溃，但不会引发任何静态检查工具警告。Valgrind、cppcheck 和 gdb 对我没什么好处。g++ -Wall 没有给我任何有用的东西。

代码的目标是通过 USB 串行连接将字符写入 audrino。audrino 地址作为第一个参数传递。传递一个 unsigned int 并将其强制转换为一个 unsigned char。

```
#include <string.h>
#include <stdlib.h>
#include <stdio.h>
#include <unistd.h>
#include <fcntl.h>
#include <termios.h>
#include <iostream>

using namespace std;

int main(int argc,char** argv){

  struct termios stdio;
  int tty_fd;

  unsigned char ctrlChar;
  unsigned int ctrlInt;

  tty_fd=open(argv[1], O_RDWR | O_NONBLOCK);
  tcgetattr(tty_fd, &stdio);
  cfmakeraw(&stdio);
  stdio.c_cc[VMIN]  = 1;
  stdio.c_cc[VTIME] = 0;
  tcsetattr(tty_fd,TCSANOW, &stdio);
  tcsetattr(tty_fd,TCSAFLUSH, &stdio);
  fcntl(tty_fd, F_SETFL, fcntl(STDIN_FILENO, F_GETFL, 0) | O_NONBLOCK);

  cfsetospeed(&stdio,B9600);            // 9600 baud
  cfsetispeed(&stdio,B9600);            // 9600 baud

  cout << "ready on " << argv[1] << endl;

  scanf("%u", ctrlInt);
  cout <<"recieved initial read.\n";
  while (ctrlInt < 256){
    ctrlChar = ((char) ctrlInt);
    cout << ctrlInt << ctrlChar << endl;
    write(tty_fd,&ctrlChar,1);
    cout << "sent to audrino.\n";
    scanf("%u", ctrlInt);
  }

  cout << "done!" << endl;

  close(tty_fd);
  return 0;
} 
```

现在，如果这看起来很正常，我将提交一份错误报告。

系统规格：最新的 Arch linux 64 位，使用“g++ -g -Wall code.c”编译

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T03:17:40.240

如果“我的终端崩溃”是指终端停止工作，那么原因很可能是您在标准输出（也就是您的终端）上将各种标志设置为零。您正在调用`tcsetattr()`并将基本上所有终端控制标志清零。

您应该使用 获取当前终端标志`tcgetattr()`，修改您要修改的那些，然后使用该结构来调用`tcsetattr()`. 不这样做甚至是[未定义的行为](http://pubs.opengroup.org/onlinepubs/7908799/xsh/tcsetattr.html)：

> 如果指向的结构的值不是从调用on的结果派生的，则的效果`tcsetattr()`是不确定的；应用程序应该只修改在调用和之间由本规范定义的字段和标志，而不修改所有其他字段和标志。`termios``termios_p``tcgetattr()``fildes``tcgetattr()``tcsetattr()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T03:12:19.833

如果你使用linux，你可以使用`strace`

```
strace ./yourProgram 
```

您还可以调试 coredump 文件，

```
ulimit -c unlimited
g++ -g ... 
```

当程序崩溃时，将创建 coredump 文件。

```
gdb ./yourProgram coredump 
```

使用`bt`命令查看崩溃信息。

# c# - 选择 SqlCommand

> ID：10925050
> 
> 赞同：0
> 
> 时间：2012-06-07T02:53:38.323
> 
> 标签：c#, sql-server, sqlcommand, selectcommand

我知道这是一个简单的问题，但我无法让它发挥作用。

这是我在我的查询`SqlCommand`：

```
SELECT * FROM zipcode  WHERE city LIKE @prefixtext + '%' ; 
```

我只想要 10 个结果，其他所有答案都表明

```
SELECT TOP 10 * FROM zipcode  WHERE city LIKE @prefixtext + '%' ;
SELECT * FROM zipcode  WHERE city LIKE @prefixtext + '%'  LIMIT 10 ; 
```

两者都不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T04:49:31.877

我相信这些都是正确的。

甲骨文：

```
select * from zipcode where city like @prefixtext + '%' and rownum <=10 
```

SQL Server/Sybase：

```
select top 10 * from zipcode where city like @prefixtext + '%' 
```

DB2/PostgreSQL：

```
select * from zipcode where city like @prefixtext || '%' fetch first 10 rows only 
```

MySQL：

```
select * from zipcode where city like @prefixtext + '%' limit 10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T04:41:13.903

```
declare @like varchar(50)

set @like = @prefixtext + '%';

SELECT TOP 10 * FROM zipcode  WHERE city LIKE @like 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-11T09:57:21.093

```
Select * from zipcode where city like @prefixtext + '%' 
```

# x86 - SSE 说明：查找高于阈值的元素

> ID：10925051
> 
> 赞同：0
> 
> 时间：2012-06-07T02:53:38.360
> 
> 标签：x86, max, sse, simd

是否有 SSE 指令可以替换下面编写的部分或全部算法。

有很长的短值数组（字节或长值是可以接受的）。必须找到大于某个阈值的值。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T05:39:04.170

是的，您可以执行以下操作（伪代码）：

```
Init threshold vector
Found = FALSE
For each vector of N elements
    Load vector (_mm_load_si128)
    Compare greater than threshold (_mm_cmpgt_XXX)
    Move comparison vector to mask (_mm_movemask_epi8)
    If mask != 0
        Found = TRUE
        Break
    End
End 
```

# facebook - 离线上传照片到 Facebook

> ID：10925052
> 
> 赞同：0
> 
> 时间：2012-06-07T02:53:58.593
> 
> 标签：facebook, facebook-graph-api

包含 facebook api 文件并设置 appId 和 appSecret

```
$facebook->setFileUploadSupport(true); 
$args = array('message' => 'Photo Uploaded'); 
$args['access_token'] = 'access token'; 
$filename = 'image.jpg' $args['image'] = '@' . realpath($filename); 
$result = $facebook->api('/' . $fuid . '/photos', 'post', $args); 
```

我当前的应用程序允许用户授权离线更新，我存储了 access_token，fuid。当他们离线时我可以成功地发布到用户墙上。但是当我将照片上传到服务器时它不起作用。任何机构都可以告诉我解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:49:27.897

照片上传与墙帖不同。它们是两种不同的权限。

这是您的解决方法。墙贴可以包含一个网站页面的 URL，该页面上带有正确指定的正确 og 元标记的照片。快乐编码！

# directx - DirectX 11 - 第二个 GPU 更慢？

> ID：10925053
> 
> 赞同：2
> 
> 时间：2012-06-07T02:54:09.010
> 
> 标签：directx, adapter, gpu

我有两个相同的 GPU（nvidia 680s），但禁用了 SLI。如果我使用枚举 0 适配器 (GPU) 创建设备和设备上下文，我的简单清晰表面程序以 0.05 毫秒/帧的速度运行。但是，如果我使用 enum 1 适配器（其他 GPU）运行它，它的运行速度超过 1 毫秒/帧。

为什么我的一个 GPU 可以比另一个慢这么多？根据主板，它们都安装在正确的 PCI 3.0 16x 插槽中。

我错过了什么吗？我查看了代码 1000x 并几乎排除了编码错误 - 我只是在用于创建设备的适配器和交换链之间进行了交换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T03:55:58.780

您没有提供足够的信息来说明代码的作用，特别是在显示方面。

但我的猜测是，一个 GPU 控制您用于输出的显示器，而另一个则没有。因此，在第一个 GPU 上显示您的渲染是立即的，但在另一个情况下需要在 2 个 GPU 之间进行完整的帧缓冲区副本。

这将不得不通过 PCIe。16x PCIe 3 仍然是 15.6GB/s，所以这意味着大约 10MB 的传输，这大约是 1920x1200 显示器。

您能否提供有关您的分辨率和显示效果的更多详细信息？这是全屏的吗？

# perl - 使用 Net::LDAP 使用 LDAP 验证用户的凭据

> ID：10925064
> 
> 赞同：1
> 
> 时间：2012-06-07T02:55:03.243
> 
> 标签：perl, ldap

我有一个用户名和密码，在让用户进入我的系统之前，我需要验证是否在 LDAP 中找到了用户名和密码。我是 LDAP 的新手，对某些术语感到很困惑。我知道我需要绑定管理员用户并执行搜索以检查是否可以在 LDAP 中找到用户名和密码。然后我应该用用户名和密码绑定用户。

首先，我不太明白为什么我需要在最后一步绑定用户名和密码。

其次，如何绑定管理员用户？我知道它应该是这种格式

```
bind("DN, OU and stuff",password=>$password) 
```

我`$password`应该通过什么？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T02:58:41.913

以管理员身份绑定可让您访问搜索用户。以用户身份绑定可确保密码正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:13:14.213

LDAP 协议基于请求-响应框架，但`unsolicited notification`. LDAP 客户端向 LDAP 服务器发送格式正确的请求，然后读取响应。

当 LDAP 客户端连接到服务器时，连接未经过身份验证。为了改变连接的认证状态，LDAP 客户端向服务器发送一个“BIND”请求。“BIND”请求是：

*   一个简单的 BIND（专有名称和凭据（密码））
*   一个 SASL BIND（与其他信息一起传输的专有名称或用户名，取决于 SASL 机制

服务器然后确定凭据是否正确，如果正确，则服务器将连接的身份验证状态更改为用户名或专有名称的身份，并将 BIND 响应传输到 LDAP 客户端。如果 BIND 响应中的结果代码是，`0` *则 LDAP 客户端知道用户或专有名称存在并且凭证是正确的 - 如果基础对象已知，则无需搜索用户*。

如果连接已经存在（例如，如果使用了连接池），则客户端可以使用扩展请求`authorization identity request control`或`who am i?`扩展请求请求有关连接的身份验证状态的信息。一些目录服务器也支持`account usable request control`（在任何标准文档中都没有指定，但由 Sun Microsystems 发明）。

是搜索“开始”的`base DN`可分辨名称，也就是说，如果搜索范围是，则搜索响应将包括基本 DN 和低于基本 DN 一级的条目，如果搜索范围是，则搜索响应将包括基本 DN 之下的`one`所有条目`sub`或`whole subtree`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T03:06:25.943

1/ 尽可能进行匿名搜索以查找 dn 2/ 进行绑定测试以验证密码

只是给你一些想法，你需要修复下面的一些代码以匹配你的情况。

```
#!/usr/bin/perl
use Net::LDAP;

my $ldap = Net::LDAP->new($hostname, version => 2);
$mesg = $ldap->search(
    base => $baseDN,
    filter => "uid=$username",
    attrs => ['dn']
);

$result = (1==0);
if ($mesg->code) {
    foreach $entry ($mesg->entries) {
        $dn = $entry->dn;
        $bmesg = $ldap->bind($dn, $password);
        $result = $bmesg->code
    }
}

if ($result) {
    print "Authenticated";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-20T21:35:06.220

虽然 Ken 提供的 Perl 示例可以工作，但它在技术上不是正确的方法。搜索与简单的凭证验证完全不同。虽然我不会在此评论中讨论“为什么”，但请了解搜索可能会以一种误导的方式表现，具体取决于服务器的配置方式。

正如 Terry 提到的，一种方法是 WhoAmI 操作。这是关于该主题的 CPAN 页面：

[http://search.cpan.org/~marschap/perl-ldap-0.56/lib/Net/LDAP/Extension/WhoAmI.pm](http://search.cpan.org/~marschap/perl-ldap-0.56/lib/Net/LDAP/Extension/WhoAmI.pm)

如您所见，与搜索相比，WhoAmI 操作非常简单。只需要用户名和密码（某种）。不需要过滤器或搜索属性（也不接受）。

基本上，用外行的话来说，WhoAmI 操作会像这样（对话）工作：

客户：“我的名字是 [[insert DN here]]，我的密码是 [[insert password here]]。我有效吗？”

服务器：[[在此处插入“是”或“否”答案]]

我希望这有帮助...

最大限度

# android - Android中的笔画宽度单位是什么

> ID：10925068
> 
> 赞同：3
> 
> 时间：2012-06-07T02:55:16.883
> 
> 标签：android

我使用paint setStrokeWidth方法，并设置值。然后将它用于位图的不同宽度和高度。它的笔触宽度看起来不一样。

# javascript - 使用 jQuery.data 从 dom 元素中获取布尔值？

> ID：10925073
> 
> 赞同：2
> 
> 时间：2012-06-07T02:55:59.287
> 
> 标签：javascript, jquery

根据[jQuery 的 .data() 文档](http://api.jquery.com/data/#data2)，您可以使用 .data() 方法为`data`dom 元素的属性添加前缀。例如：

```
{# Include jquery.... #}
<div id='mydiv' data-foo='bar'></div>
<script>
    var foo = $('#mydiv');
    foo.data('foo');   // == 'bar'
</script> 
```

也就是说，我很好奇您如何在这些 dom 对象中设置和传递布尔值。据我所知，这**不起作用**：

**引发 javascript 错误：**

```
{# Include jquery.... #}
<div id='mydiv' data-foo=false></div> 
```

**设置字符串而不是布尔值：**

```
{# Include jquery.... #}
<div id='mydiv' data-foo='false'></div>
<script>
    var foo = $('#mydiv');
    foo.data('foo');   // == 'false'
</script> 
```

那么，如何在 dom 中设置布尔值呢？*或者*，我是否必须在我的 javascript 中将这些字符串值转换为布尔值（这看起来很蹩脚）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T02:58:17.670

你的例子很有效:-)

[http://jsfiddle.net/zerkms/pnsfL/](http://jsfiddle.net/zerkms/pnsfL/)

[https://github.com/jquery/jquery/blob/master/src/data.js#L335](https://github.com/jquery/jquery/blob/master/src/data.js#L335)

```
data = data === "true" ? true :
data === "false" ? false :
data === "null" ? null :
jQuery.isNumeric( data ) ? parseFloat( data ) :
    rbrace.test( data ) ? jQuery.parseJSON( data ) :
    data; 
```

所以 jquery 猜测 boolean、null、numeric 类型和 JSON（！！！这对我来说是新的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T03:00:34.527

您可以简单地使用类型转换。`data-foo`可以设置为`1 = true`或`0 = false`使用此示例：http: [//jsfiddle.net/QAkQW/](http://jsfiddle.net/QAkQW/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T03:01:00.120

每次尝试都将字符串转换为 JavaScript 值（这包括**布尔值**、数字、对象、数组和 null），否则将保留为字符串。

你应该能够简单地做这样的事情：（这就是你正在做的事情）

```
<div data-role="page" data-last-value="43" data-hidden="true" data-options='{"name":"John"}'></div>

$("div").data("hidden") === true; 
```

查看示例代码`[**.data()**](http://api.jquery.com/data/#data-html5)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T03:01:20.477

如果您想要布尔值，您可以通过**设置或不设置此属性来完成。**

但似乎 jQuery.data 已经为您获得了布尔值。

# c# - C# 正确的程序结构

> ID：10925082
> 
> 赞同：2
> 
> 时间：2012-06-07T02:57:21.787
> 
> 标签：c#, winforms, class

所以我有一个简单的程序，粗略地点击一个按钮并执行一个任务，没什么花哨的，非常简单。现在，我为它添加了更多功能任务。它执行大约 5 种不同的主要更复杂的任务。该任务几乎没有输入，例如处理插入名称、地址、电话号码等的常见类/命名空间示例。该任务更像是设置您希望如何执行的设置（选中/取消选中复选框）任务，然后单击按钮来执行它。代码已经失控。所以我现在正在努力组织它。我是自学成才的，所以我遇到了一些麻烦，但这是我迄今为止对组织的想法。任何有关组织此活动的正确方法的评论将不胜感激。

*   命名空间命名空间名称
    *   类 task1Name
        *   任务1的方法
    *   类 task1Name
        *   任务2的方法
    *   类 task2Name
        *   任务3的方法
    *   类 task3Name
        *   任务4的方法
    *   类 task5Name
        *   任务5的方法

现在我还有一个用于程序的窗体和另一个用于弹出设置窗口的窗体。最大的问题是这些到底适合哪里？公共部分类类名：形式？此设置是否允许不同任务类中的方法仍与表单 webbrowser 控件交互？该表单有几个 webbrowser 控件，任务在 webbrowser 控件中执行。

我想总的来说，我只是想找到管理代码和正确设置/构造代码的最佳方法。通过阅读这篇[如何在 C# 中使用单独的 .cs 文件？](https://stackoverflow.com/questions/572314/how-to-use-separate-cs-files-in-c)也许我只是坚持使用一个类/文件，因为该任务涉及 Windows 形式的网络浏览器。

我一直在查看[http://msdn.microsoft.com/en-us/library/w2a9a9s3%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/w2a9a9s3%28v=vs.100%29.aspx)以及代码示例下方列出的相关部分

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T05:30:18.237

将你的程序分解成更易于维护的块——*重构*的艺术——可能是一个非常具有挑战性但也是非常有益的编程部分。就像@Keith 说的，你会边做边学。

最重要的建议是以**小的、独立的步骤进行重构。**

您可以通过多种方式开始此操作。如果您需要详细的建议，了解某些代码的外观会有所帮助。例如，什么是“任务”方法的签名（它们的名称、参数和返回类型）以及它们如何与“设置”交互。

这是我要提出的一个建议。单一*职责原则*建议单独的任务应该在单独的类中（通常，这意味着它们应该在单独的文件中 - 但这对编译器根本不重要，它只是为了可读性）。如果任务在不同的类中，他们将需要一种方法来了解表单上的设置是什么。但是这些任务并不关心设置在表单上的事实——它们只需要设置的值。因此，创建一个包含表单中所有设置的数据结构。然后，在表单类中编写一个方法，从控件中读取所有设置，这样您就可以将所有设置放在一个地方。然后，在每个任务按钮的按钮单击处理程序中，只需调用该方法来获取设置，并将设置传递给您尝试运行的特定任务。快！

然后您的代码将如下所示：***编辑：我忘记了需要将 WebBrowser 控件传递给任务。固定的。***

```
// Note: All classes and structs go in the same namespace, but each goes in its own .cs file.

// Use a struct, rather than a class, when you just need a small set of values to pass around
struct MySettings
{
    public int NumberOfWidgets { get; set; }
    public string GadgetFilename { get; set; }
    public bool LaunchRocket { get; set; }
}

partial class MyForm
{
    // ...constructor, etc.

    private void ButtonForTask1_Clicked(object sender, EventArgs e)
    {
        var settings = ReadSettingsFromControls();
        var task1 = new Task1(settings);
        task1.DoTheTask(ref this.WebBrowserControl1);
    }

    private void ButtonForTask2_Clicked(object sender, EventArgs e)
    {
        var settings = ReadSettingsFromControls();
        var task2 = new Task2(settings);
        task2.DoTheTask(ref this.WebBrowserControl1);
    }

    // ... and so on for the other tasks

    private MySettings ReadSettingsFromControls()
    {
        return new MySettings
        {
            NumberOfWidgets = int.Parse(this.txt_NumWidgetsTextBox.Text),
            GadgetFilename = this.txt_GadgetFilenameTextBox.Text,
            LaunchRocket = this.chk_LaunchPermission.Checked
        };
    }
}

class Task1
{
    // Readonly so it can only be set in the constructor.
    // (You generally don't want settings changing while you're running. :))
    private readonly MySettings _settings;

    public Task1(MySettings settings)
    {
        _settings = settings;
    }

    public void DoTheTask(ref WebBrowser browserControl)
    {
        // TODO: Do something with _settings.NumberOfWidgets and browserControl
        // You can use private helper methods in this class to break out the work better
    }
}

class Task2 { /* Like Task1... */ } 
```

希望有帮助！同样，如果您发布一些示例代码，您可能会在如何重构它方面获得更好的建议。

# html - 表格行的 IE 间距问题

> ID：10925085
> 
> 赞同：0
> 
> 时间：2012-06-07T02:57:48.647
> 
> 标签：html, css, internet-explorer

我正在尝试在表格中的行底部添加间距，它适用于 Chrome。但是 IE 8.0 中没有显示间距

所用方法的任何替代方法？

CSS

```
tr.spaceUnder > td
{
padding-bottom: 7px;
} 
```

HTML

```
 <table width="105%">

            <tr class="spaceUnder">
                         <td><p>Friday, June 8th<br>
                <a href="https://www.facebook.com/events/357722824277712/" target="_blank" onMouseOver="MM_swapImage('band','','images/awatson.jpg',1)" onMouseOut="MM_swapImgRestore()">Aaron Watson</a></p>
             </td>
             <td valign="bottom"><a href="http://www.ticketfly.com/event/122695/"><img src="http://www.bigtexassaloon.com/images/tix.png" border="0"></a>
                         </td>
                        </tr>

            <tr class="spaceUnder">
              <td>
                <p>Thursday,  June 14th<br>
                            <a href="https://www.facebook.com/events/180258595433140/" target="_blank" onMouseOver="MM_swapImage('band','','images/acoustic.jpg',1)" onMouseOut="MM_swapImgRestore()">Five Man Jam</a><br />
                                &nbsp;&nbsp;Joe Blake<br />&nbsp;&nbsp;Neil Austin Imber<br />&nbsp;&nbsp;Eric Middleton<br />&nbsp;&nbsp;Stephen Chadwick<br />&nbsp;&nbsp;Ryan Lee Evans</p>
                           </td>
            </tr>   
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T03:22:40.803

您是否在 html 中声明了 doctype？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T04:34:08.190

从声明中删除`>`字符`tr.spaceUnder > td`。仅当单元格内有内部表格时才需要它（即使那样，最好以其他方式限制效果）。

在[Quirks Mode](http://www.cs.tut.fi/~jkorpela/quirks-mode.html)中，IE 无法识别此类使用`>`操作符的 CSS3 选择器。一些旧浏览器在任何模式下都无法识别它们。当存在简单的替代方案时，避免使用它们。

您的页面可能缺少 doctype 声明或有将 IE 置于 Quirks 模式的声明（例如，没有 URL 的 HTML 4.01 过渡 doctype）。

该页面也有不同的浏览器兼容性问题，尽管您可能已经处理了问题中未公开的 CSS 代码。当您将`p`元素作为元素的唯一内容时`td`，某些浏览器会抑制该元素的正常默认顶部和底部边距`p`，至少在 Quirks 模式下是这样。“标准模式”下的现代浏览器通常不这样做，这意味着段落上方和下方有相当大的垂直间距。

这可以通过`p`在 CSS 中显式设置边距来处理。但是类似`<td><p>...</p></td>`的标记通常没有用处，`p`最好省略标记，避免这个问题。

# javascript - 没有 JavaScript 的 HTML 表单

> ID：10925090
> 
> 赞同：0
> 
> 时间：2012-06-07T02:58:06.883
> 
> 标签：javascript, html

我的任务是只用 HTML 制作网页。我正处于要创建表单的地步。但是，我不确定这些表单提交是否可以仅使用 HTML 保存。

我将以下代码（从 WC3 Schools 获得）应用到我的网页：

```
<form name="input" action="html_form_action.asp" method="get">
Username: <input type="text" name="user" />
<input type="submit" value="Submit" />
</form> 
```

我创建了一个名为“html_form_action.asp”的文件。但是，当我双击我的 .html 文件以启动我的页面并单击提交（提交表单）时，我收到一个错误“无法加载页面”并且没有任何内容写入我的 html_form_action.asp 文件。还有其他我应该设置的方法吗？

感谢您的任何帮助！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T03:01:38.043

好吧，你不能双击你的 html 文件，因为它会作为本地文件加载到浏览器中。这些`asp`文件需要托管在 Web 服务器（例如 IIS）中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T03:02:55.860

您需要设置一个 Web 服务器来在后端处理您的请求！正如你所说，需要有javascript！因为您似乎在使用 ASP，所以在您的计算机上设置 Microsoft IIS 将是一个不错的选择。

双击 HTML 文件将无济于事。然后，您需要通过设置的服务器运行它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T03:05:57.887

听起来您正试图从文件系统访问您的 .asp 文件，但为了让任何事情发生，该文件需要位于 Web 服务器之后。

不确定您是否设置了一个，但这是您获得对发布请求的响应的唯一方式。（即当你点击提交时）

另外：请确保您的 .asp 文件的相对路径指向正确的位置（或者您的 html 文件位于正确的目录中 - 对于您的代码片段，这意味着相同的目录）

# c#-4.0 - 在 c# 中选择具有特定文件名的文件

> ID：10925094
> 
> 赞同：0
> 
> 时间：2012-06-07T02:58:53.707
> 
> 标签：c#-4.0

我有一个包含大约 200,000 张 jpeg 图像的文件夹。以下是我可以找到的文件名格式

1.  BATCHID_GROUPID 例如：501234_20123.jpg
2.  BATCHID_GROUPID 例如。501235_20124_1.jpg、501235_20124_2.jpg、501235_20124_3.jpg。每个此类图像最多有 10 个 BATCHID_GROUPID 图像。我的意思是这个集合的最大值是 501235_20124_10.jpg

我需要获取所有不以 _x 或 _xx 结尾的图像，即 _1.jpg 或 _2.jpg 或 _10.jpg 并选择 BATCHID 并将其复制并将其通过 FTP 传输到其他位置

对于以 _x 或 _xx 结尾的文件，我需要选择 BATCHID 并创建一个名称为 batchID 的文件夹，并将所有以 _X 到 _xx 结尾的文件移动到该文件夹​​中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T03:13:05.333

尝试在您的文件名上使用[String.Split](http://msdn.microsoft.com/en-us/library/system.string.split%28v=vs.100%29.aspx)，检查长度以确定您要复制它的位置并将第一个索引作为您的 BATCHID：

像这样的东西：

```
DirectoryInfo di = new DirectoryInfo("SourcePath");
IEnumerable<FileInfo> fileinfo = di.EnumerateFiles();
foreach(FileInfo fi in fileinfo)
{
    string[] tmp = fi.Name.Split('_');
    if (tmp.Length == 3)
    {
        if (!Directory.Exists("YourPath"))
        {
            Directory.CreateDirectory("YourPath" + tmp[0].ToString());
            fi.MoveTo("YourPath" + tmp[0].ToString() + @"\" + fi.Name);

        }
        else
            fi.MoveTo("YourPath" + + tmp[0].ToString() + @"\" + fi.Name);

    }
    else if (tmp.Length == 2)
    {
        //Copy Batch Id and Ftp logic
    }
} 
```

# php - 如何使用 DOM HTML 获取价值

> ID：10925095
> 
> 赞同：3
> 
> 时间：2012-06-07T02:58:58.007
> 
> 标签：php

我有一个html：

```
$content = "
<tr>
   <td class="ttl"><a href="#">Colors</a></td>
   <td class="nfo">Dark Grey, Rose Red, Blue, Brown, Sand White</td>
</tr>"; 
```

和代码php：

```
$dom = new DOMDocument();
@$dom->loadHTML($content);      
$xpath = new DOMXPath($dom);

$attbs = $xpath->query("//td[@class='ttl']");
foreach($attbs as $a) { 
    print $a->nodeValue;
}

$values = $xpath->query("//td[@class='nfo']");
foreach($values as $v) { 
    print $v->nodeValue;
} 
```

如何获得 2 td 的值但仅使用 1 foreach

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T03:24:20.417

使用运算符将​​两个类放入逻辑 OR 表达式中`|`：

```
$attbs = $xpath->query("//td[@class='ttl'] | //td[@class='nfo']");
foreach($attbs as $a) { 
    print $a->nodeValue;
} 
```

这打印：

```
ColorsDark Grey, Rose Red, Blue, Brown, Sand White 
```

[演示](http://codepad.viper-7.com/QRlKc1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T03:25:18.790

尝试

```
$trs = $xpath->query("//tr");
foreach ($trs as $tr) {
    $attbs = $xpath->query("//td[@class='ttl']", $tr);
    $values = $xpath->query("//td[@class='nfo']", $tr);
    echo $attbs->item(0)->nodeValue . '-' .  $values->item(0)->nodeValue . '<br />';
} 
```

# actionscript-3 - 根据角度/弧度绘制一侧倾斜的矩形

> ID：10925097
> 
> 赞同：1
> 
> 时间：2012-06-07T02:59:14.400
> 
> 标签：actionscript-3, flash, math, actionscript, geometry

我试图取矩形的一侧并根据度数/角度倾斜一侧。

![在此处输入图像描述](../Images/d95d3bb0127abf92f1ec0daa84eaf527.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T04:54:16.053

我为你准备了一些代码
任何问题都可以问。

```
import flash.geom.Matrix;

var temp_matrix = new Matrix();

var square:Sprite = new Sprite();
addChild(square);
square.graphics.lineStyle(3,0x000000);
square.graphics.drawRect(0,0,200,100);
square.graphics.endFill();

var angle:Number = -10; // the angle of degrees
temp_matrix.b = Math.PI * 2 * angle / 360;// y skew
//temp_matrix.c = Math.PI * 2 * angle / 360;// x skew

var sourceMatrix:Matrix = square.transform.matrix;// get existing matrix
sourceMatrix.concat(temp_matrix); // apply skew to existing matrix
square.transform.matrix = temp_matrix;// assign the new skew

square.x = 100
square.y = 100 
```

[第二轮]

```
var trapezium:Sprite = new Sprite();
addChild(trapezium);
trapezium.x = 100;
trapezium.y = 100;

var dir:Boolean = true;
var side:Boolean = true;
var angle:Number = 0; // the angle of degrees
var w:Number = 300;
var h:Number = 80;

var timer:Timer = new Timer(16);
timer.addEventListener( TimerEvent.TIMER, tick );
timer.start();

function tick(e:TimerEvent):void{
    var radians:Number = Math.PI/180*angle;
    trapezium.graphics.clear();
    trapezium.graphics.beginFill(0x000000)
    if( side){
        // long side is right side
        trapezium.graphics.lineTo(w,0);
        trapezium.graphics.lineTo(w,radians*w+h);
        trapezium.graphics.lineTo(0,h);
        trapezium.graphics.lineTo(0,0);
    }else{
        trapezium.graphics.lineTo(w,0);
        trapezium.graphics.lineTo(w,h);
        trapezium.graphics.lineTo(0,radians*w+h);
        trapezium.graphics.lineTo(0,0);
    }
    trapezium.graphics.endFill();
    if(angle>=10){
        dir = false;
    }
    if(angle<=0){
        dir = true;
    }
    if(dir){
        angle = angle+.2;
    }else{
        angle = angle-.2;
    }
    if( Math.floor(angle*10) <= 0 ){
        side = !side;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T03:24:30.570

取角的正切并乘以矩形的宽度，得到底轴的增量 y，这样你就有了

[x1,y1] 作为矩形的原点（永远不会改变）

[x1+length, y1+deltaY] 作为右下角

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T06:19:35.157

不知道 AS，但在编辑后看起来像带有顶点的填充多边形：

```
P0 =(X0, Y0)
P1 = (X1, Y0)
if Angle >= 0 then
  P2 = (X1, Y1)
  P3 = (X0, Y1 + (X1-X0) * Tan(Angle))
else
  P2 = (X1, Y1 - (X1-X0) * Tan(Angle))
  P3 = (X0, Y1) 
```

# mercurial - 从 Mercurial prechangegroup 钩子中读取命令行参数

> ID：10925099
> 
> 赞同：4
> 
> 时间：2012-06-07T02:59:18.590
> 
> 标签：mercurial, mercurial-hook

如果某个条件成立，我试图禁止推送到 Mercurial 存储库。但是，**重要**的是，如果用户使用`push --force`，则推送无论如何都会通过。

我知道在进行推送的机器上使用`pre-push`钩子很容易做到这一点，钩子将命令行参数传递给钩子。然而，由于钩子没有被传播，我不得不以某种方式将钩子分发给存储库的每个用户，并依赖他们不会弄乱它。

因此，我认为要走的路是`prechangegroup`在存储库服务器上有一个钩子，它检查条件并在必要时中止推送，但我无法找到一种方法来获取用户在推送时使用的命令行参数这个钩子。有没有办法仅通过在存储库服务器上使用挂钩来完成此操作？

我知道`pretxnchangegroup`如果最新变更集的提交消息遵循某种模式，则可能的解决方法是使用钩子并允许推送。但是，`--force`从存储库用户的角度来看，该选项似乎要容易得多，因为它不会强迫他们潜在地进行虚拟提交以获取正确的消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T14:12:13.697

抱歉，`--force`命令行选项永远不会在线发送，因此它在服务器端根本不可用。你需要想出一些方法来表示“我是认真的！” 带外，可能是特殊的用户名、特殊的提交消息等。

考虑只拥有一个没有禁止钩子的第二个服务器端存储库，并且只有在他们真正想要的时候才让推送者使用它。就像是：

```
hg push http://your-server/repo
.. rejected due to hook failure
hg push http://your-server/repo-and-I-really-mean-it 
```

在服务器端，repo-and-I-really-mean-it repo 没有钩子并自动推送到普通 repo。

# session - 去会话变量？

> ID：10925103
> 
> 赞同：21
> 
> 时间：2012-06-07T02:59:42.520
> 
> 标签：session, go, session-variables

我是 Go 语言 (Golang) 的新手，我正在编写一个基于 Web 的应用程序。我想使用会话变量，例如 PHP 中的那种（从一页到下一页可用的变量，并且对于用户会话是唯一的）。Go中有类似的东西吗？如果没有，我将如何自己实施它们？或者有什么替代方法？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-07T03:41:16.910

你可能想看看[大猩猩](http://github.com/gorilla/)。它具有[此处](http://godoc.org/github.com/gorilla/sessions)记录的会话支持。

除此之外，或者可能是其他 Web 工具包之一，您将不得不自己动手。

可能的解决方案可能是：

*   每个用户会话的 goroutine 将会话变量存储在内存中。
*   将变量存储在会话 cookie 中。
*   使用数据库存储用户会话数据。

我将把每一个的实现细节留给读者。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-27T02:37:06.283

如果您只需要没有完整的 Web 工具包的会话支持，这是一个替代方案。

[https://github.com/bpowers/seshcookie](https://github.com/bpowers/seshcookie)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-02-09T12:28:51.997

这是另一种选择（*披露：我是作者*）：

**[https://github.com/icza/session](https://github.com/icza/session)**

引用其文档：

* * *

该软件包提供了易于使用、可扩展且安全的会话实施和管理。可以在 godoc.org 中找到包文档：

[https://godoc.org/github.com/icza/session](https://godoc.org/github.com/icza/session)

这“只是”一个 HTTP 会话实现和管理，您可以按原样使用它，也可以与任何现有的 Go web 工具包和框架一起使用。

## 概述

包中有 3 个主要*参与者*：

*   **`Session`**是（HTTP）会话接口。我们可以使用它来存储和从中检索常量和变量属性。
*   **`Store`**是一个会话存储接口，负责存储会话并使它们可以在服务器端通过它们的 ID 进行检索。
*   **`Manager`**是一个会话管理器接口，负责`Session`从（传入的）HTTP 请求中获取 a，并将 a 添加`Session`到 HTTP 响应以让客户端知道会话。A`Manager`有一个支持`Store`，负责管理`Session`服务器端的值。

*这个包的播放器*由接口表示，并为所有这些播放器提供了各种实现。您不受所提供的实现的约束，请随时为任何玩家提供您自己的实现。

## 用法

用法再简单不过了。[要获取与http.Request](https://golang.org/pkg/net/http/#Request)关联的当前会话：

```
sess := session.Get(r)
if sess == nil {
    // No session (yet)
} else {
    // We have a session, use it
} 
```

要创建一个新会话（例如成功登录）并将其添加到[http.ResponseWriter](https://golang.org/pkg/net/http/#ResponseWriter)（让客户端知道该会话）：

```
sess := session.NewSession()
session.Add(sess, w) 
```

让我们看看更高级的会话创建：让我们提供一个常量属性（会话的生命周期）和一个初始的可变属性：

```
sess := session.NewSessionOptions(&session.SessOptions{
    CAttrs: map[string]interface{}{"UserName": userName},
    Attrs:  map[string]interface{}{"Count": 1},
}) 
```

并访问这些属性并更改 的值`"Count"`：

```
userName := sess.CAttr("UserName")
count := sess.Attr("Count").(int) // Type assertion, you might wanna check if it succeeds
sess.SetAttr("Count", count+1)    // Increment count 
```

（当然，变量属性也可以在以后添加`Session.SetAttr()`，而不仅仅是在会话创建时。）

要删除会话（例如注销时）：

```
session.Remove(sess, w) 
```

查看[会话演示应用程序](https://github.com/icza/session/blob/master/session_demo/session_demo.go)，它显示了所有这些操作。

## 谷歌应用引擎支持

该软件包提供对 Google App Engine (GAE) 平台的支持。

文档不包括它（由于`+build appengine`构建约束），但它是：[gae_memcache_store.go](https://github.com/icza/session/blob/master/gae_memcache_store.go)

该实现将会话存储在 Memcache 中，并将会话保存到 Datastore 作为备份，以防数据从 Memcache 中删除。此行为是可选的，可以完全禁用 Datastore。您还可以选择是同步（在同一个 goroutine 中）还是异步（在另一个 goroutine 中）保存到 Datastore，从而缩短响应时间。

我们可以使用`NewMemcacheStore()`和`NewMemcacheStoreOptions()`函数来创建一个会话存储实现，它将会话存储在 GAE 的 Memcache 中。需要注意的是，由于访问 Memcache 依赖于绑定到 的 Appengine Context `http.Request`，因此返回的 Store 只能用于请求的生命周期！请注意，当 Store 关闭时，Store 会自动“刷新”从中访问的会话，因此在请求结束时关闭 Store 非常重要；这通常通过关闭您将存储传递到的会话管理器来完成（最好使用 defer 语句）。

所以在每个请求处理中，我们必须使用新的 Store 创建一个新的会话管理器，我们可以使用会话管理器来执行与会话相关的任务，如下所示：

```
ctx := appengine.NewContext(r)
sessmgr := session.NewCookieManager(session.NewMemcacheStore(ctx))
defer sessmgr.Close() // This will ensure changes made to the session are auto-saved
                      // in Memcache (and optionally in the Datastore).

sess := sessmgr.Get(r) // Get current session
if sess != nil {
    // Session exists, do something with it.
    ctx.Infof("Count: %v", sess.Attr("Count"))
} else {
    // No session yet, let's create one and add it:
    sess = session.NewSession()
    sess.SetAttr("Count", 1)
    sessmgr.Add(sess, w)
} 
```

过期的会话不会自动从数据存储中删除。为了删除过期的会话，包提供了一个`PurgeExpiredSessFromDSFunc()`返回[`http.HandlerFunc`](https://golang.org/pkg/net/http/#HandlerFunc). 建议将返回的处理函数注册到一个路径，然后可以将其定义为定期调用的 cron 作业，例如每 30 分钟左右（您的选择）。由于 cron 处理程序可能运行长达 10 分钟，因此返回的处理程序将在 8 分钟处停止以安全完成，即使有更多过期、未删除的会话也是如此。可以这样注册：

```
http.HandleFunc("/demo/purge", session.PurgeExpiredSessFromDSFunc("")) 
```

查看显示如何使用它的 GAE 会话演示应用程序。 [演示的cron.yaml](https://github.com/icza/session/blob/master/gae_session_demo/cron.yaml)文件显示了如何定义 cron 作业以清除过期会话。

查看[GAE 会话演示应用程序](https://github.com/icza/session/blob/master/gae_session_demo/gae_session_demo.go)，它展示了如何在实际中使用它。

# c++ - 当节点有两个孩子时，C ++从树中删除节点

> ID：10925113
> 
> 赞同：0
> 
> 时间：2012-06-07T03:02:13.680
> 
> 标签：c++, tree

假设我有一棵树，如下所示：

```
 8
     3         12
  4     5    6   15
1  2 
```

如果我想删除 3，请将其替换为左下角的节点（在本例中为 1）。然后，在该图中，2 将附加到 4。

我将如何编码？

我知道您必须通过某种循环一直遍历左侧，然后适当地重置每个指针。此外，您必须考虑最后一个左节点可能有右孩子的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T23:52:22.360

在我们解决“如何”之前，有两件事：

(1) - 这是次要的。*这个问题仅在二叉搜索*树（BST）的上下文中才有意义，而不仅仅是二叉树。而且这棵树不是 BST，因为 3 和 4 交换了。

(2) - 任何时候您对 BST 执行删除操作，并且想要“修复”树以使生成的树也是 BST，您有两个选择：(a) 您可以选择要删除的节点的左子树，或者（b）您可以选择要删除的节点的右子树中的最小值，并将其与要删除的节点交换。（您应该说服自己为什么这些选项都会给您留下 BST）。在您的示例中（正确放置 3 和 4），这意味着将 4 与 3 或 5 交换。

现在是“如何”做到这一点。假设我们从上面选择了选项 (a)。你需要做的是编写一个函数，从 4 开始，向左走一步，然后尽可能地向右移动（你还应该说服自己为什么这是正确的）。一旦你不能再向右遍历，你就知道你在左子树中找到了最大值。然后，将这个值替换为要删除的节点，然后删除刚刚取值的节点。

如果您已经知道如何对您在此处展示的树进行编码，那么这实际上是非常简单的编码。如果您有特定于代码的问题，请提供更多详细信息

# c++ - 虚函数表指针在对象中的位置

> ID：10925115
> 
> 赞同：5
> 
> 时间：2012-06-07T03:02:31.407
> 
> 标签：c++, oop, virtual-functions, vptr

据我了解，`virtual`对象中函数指针表的位置取决于编译器。
将此指针放在对象的开头与结尾是否有任何优点/缺点，反之亦然？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T03:52:14.957

虚函数表的存在取决于编译器（但所有编译器都这样做），并且位置也不是强制性的......在我知道详细信息的所有编译器中，vptr 存储在对象的开头。原因是它提供了一个统一的位置。考虑一个类层次结构：

```
struct base {
   T data;
   virtual void f();
};
struct derived : base {
   T1 data;
   virtual void g();
}; 
```

如果 vptr 存储在对象的末尾，那么它将在`sizeof(T)`完整类型对象的字节之后`base`。现在，当您有一个完整类型的对象时`derived`，`base`子对象的布局必须与完整`base`对象的布局兼容，因此`vptr`仍然必须是`sizeof(T)`对象内部的字节，这将位于`derived`对象中间的某个位置（`sizeof(T)`从头到尾`sizeof(T1)`）。所以它将不再位于对象的*末尾*。

此外，给定一个`this`指针，虚拟调用需要通过 vtable 进行间接调用，这基本上是取消引用`vptr`，添加偏移量并跳转到存储在那里的内存位置。如果`vptr`存储在对象的末尾，对于每个虚拟调用，`this`在取消引用`vptr`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T03:05:46.663

是的，它完全依赖于实现。
对于简单的继承层次结构，它位于对象的开头，但对于复杂的层次结构，它不会。
无论如何，您编写的任何源代码都不应该依赖于它所在的位置，实际上您编写的任何代码都不应该依赖于虚拟表或虚拟表指针的存在。
C++ 标准并没有强制要求通过虚拟表和指针来实现虚拟调度，一个实现可以自由地使用其他实现方法来实现，但是所有主流编译器都通过表指针机制来实现这一点，需要注意的重要一点是它们可能会有所不同在指针所在位置的精确实现等。

# ruby-on-rails-3 - 出现错误：不能为空，Rails 测试

> ID：10925116
> 
> 赞同：3
> 
> 时间：2012-06-07T03:02:45.993
> 
> 标签：ruby-on-rails-3, factory-bot, functional-testing

我想测试我的 Rails 应用程序，尤其是在控制器上，这里是代码

customer_controller_test.rb

```
 require 'test_helper'

class CustomersControllerTest < ActionController::TestCase
  include Devise::TestHelpers

  setup do
    @user = FactoryGirl.create(:user)    
    @role = FactoryGirl.create(:role)
    #puts @role.name
    @permission = FactoryGirl.create(:permission)
    #puts @permission.name
    @role_permission = FactoryGirl.create(:role_permission)
    #puts @role_permission.role_id
    #puts @role_permission.permission_id
    sign_in @user
    @customer = FactoryGirl.create(:customer)
  end

  test "should get index" do
    get :index
    assert_response :success
    assert_template 'index'
    assert_not_nil assigns(:customers)
  end

  test "should show article" do
    get :show, :id => @customer.to_param

    assert_response :success
    assert_template 'show'

    assert_not_nil assigns(:customer)
    assert assigns(:customer).valid?
  end

  test "should get new" do
    #login_as(@user)
    get :new
    assert_response :success
  end
end 
```

factory.rb <-- 用 factorygirl 设置 tha 固定装置

```
FactoryGirl.define do

  sequence :email do |n| "admin@admin.admin#{n}" end
  sequence :role_name do |n| n end
  sequence :role_id do |n| n end
  sequence :permission_id do |n| n end

factory :user do |u|
    u.name           "Admin"
    u.role_id        {1}
    u.email          do FactoryGirl.generate(:email) end
    u.password       "123456"
    u.after(:create) do |user|
        user.creator_id  {1} 
        user.save
    end
  end

factory :customer do
    name    "Test customer-name"
    code    "Test customer-code"
    address "Test customer-address"
    phone   "Test customer phone"
  end

factory :permission do
    name "Customer"
  end

  factory :role do
    name do FactoryGirl.generate(:role_name) end
  end
end 
```

我得到了错误

![错误](../Images/8ad9f06242154f1c2b5fb017f9319846.png)

任何想法？谢谢之前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:29:21.157

在将角色分配给用户之前，尝试在 FactoryGirl 中创建角色。保存用户记录时，您似乎遇到了验证错误，因为它正在尝试验证您是否分配了实际角色。你没有，因为你试图在你的用户之后创建你的角色。

只需尝试在您的 FactoryGirl“设置”中切换两行，如下所示：

```
@role = FactoryGirl.create(:role)
@user = FactoryGirl.create(:user) 
```

或者，查看此链接以更全面地了解如何使用 FactoryGirl 测试关联：

[http://blog.joshsoftware.com/2011/05/13/testing-associations-with-factory-girl/](http://blog.joshsoftware.com/2011/05/13/testing-associations-with-factory-girl/)

# c# - 循环 div 内的循环按钮

> ID：10925117
> 
> 赞同：0
> 
> 时间：2012-06-07T03:02:49.893
> 
> 标签：c#, javascript, jquery, asp.net

我是新来的，我遇到了一个问题，我必须循环我的按钮，这样我才能把它放在我的循环 div 上。我将如何做到这一点？这是我到目前为止得到的：//我的循环

```
for (i = 0; i < MPreply.recommendation.Length; i++) {
   html += "<div class='rec'> ";
   html += "</br> <div id = 'from1' value =  > Depart From:" + " ";
   html += emz + " " + "(" + + ")" + "</div>";
   html += "<div id = 'date1' > Schedule:" + " " + flytDate;
   html += " , " + convertedString;
   html += "</div>" + "<div id = 'to1' >To:" + " " + emz2 + " " + "(" + "" + ")";
   html += "</div> </br> </br> </br> ";
   html += "<div id = 'RecNo'>" + " " + (i + 1) + " )" + " </br> </br> </div> ";
   html += "<div id = 'fare1'> $" + em + "  </div> ";
   html += " </div>  <br/> <br/>";
   div_rec.InnerHtml = html;
} 
```

html:

```
<div id = 'modal' runat="server" >
        <div id="dialog" runat="server">

        </div>
        <input id="_menuitem" type="button" value="Click" runat="server" />
    </div> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T03:05:28.893

你至少有几个问题：

```
"<div id = 'fare1'> 
```

和类似的部分将生成具有相同 id 的多个元素。

```
div_rec.InnerHtml = html; 
```

应该移到你的循环之外，以便 div_rec 只更新**一次**，当一切都完成时。

```
emz + " " + "(" + + ")" + "</div>"; 
```

应该（可能）改为

```
emz + " " + "(" + your_variable_here + ")" + "</div>"; 
```

* * *

为了（我认为）在循环中添加按钮的创建，您必须像其他元素一样将其拼凑成一个字符串。要连接函数处理程序，您必须：

a) 将 dom level-0 处理程序构建为字符串，或

b) 等到您的 html 更新，然后查询新添加的按钮并在代码中添加事件处理程序（使用 btn.onclick = function(... 或 dom level-2 处理程序（addEventListener 或 attachEvent）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T21:14:19.733

我在这里看到的问题是 ID 字段。

您为正在生成的所有 Div 提到了相同的 ID 名称。

喜欢，

```
<div id = 'from1'>
<div id = 'to1'> 
```

ID 是元素的唯一标识符。它必须始终是唯一的。

您可以改为使用类。

喜欢，

```
<div class = 'from1'>
<div class = 'to1'> 
```

# jquery - 多个选择器无法正常工作

> ID：10925123
> 
> 赞同：1
> 
> 时间：2012-06-07T03:03:17.060
> 
> 标签：jquery

我有一些 html 表作为

```
<div>
    <table id="tbl1" class="tblcls">
    <tr><td>
    </table>

    <table id="x">
    <tr><td>
    </table>

    <table id="tbl3">
    <tr><td>
    </table>
</div> 
```

我正在应用下面的多选器来设置那些 id 以“tbl”开头并具有类“tblcls”的表的背景颜色

```
 $(document).ready(function () 
{           
            var $table = $("table.tblcls,[id^=tbl]");            
            $table.css("background-color", "yellow");
}); 
```

但它选择了 id 为 tbl1,tbl3 的两个表，其中预期的输出将只是第一个表 (id=tbl1)。

我在做什么错误以及如何解决？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T03:05:45.273

类和属性都应该在桌子上：

```
$("table[id^='tbl'].tblcls"); 
```

小提琴：http: [//jsfiddle.net/jonathansampson/sf2zP/](http://jsfiddle.net/jonathansampson/sf2zP/)

# django - Django Guardian - 如何在基于类的视图中使用 permission_required 装饰器？

> ID：10925127
> 
> 赞同：6
> 
> 时间：2012-06-07T03:04:08.940
> 
> 标签：django

我有一个 CB DeleteView，我正在尝试使用 Guardian 的 permission_required 进行装饰。权限应该是登录用户和 DeleteView 的对象。卫报文档对此并不太清楚，所以我想知道是否有人可以澄清。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T16:36:11.757

我遇到了几乎相同的问题，这是我的解决方案（适用于您的情况）：

# 视图.py

```
class MyModelDeleteView(DeleteView):
    model=MyModel

    @method_decorator(permission_required_or_403('myapp.delete_mymodel',
        (MyModel, 'slug', 'slug'), accept_global_perms=True))
    def dispatch(self, *args, **kwargs):
        return super(MyModelDeleteView, self).dispatch(*args, **kwargs) 
```

请注意，您可以传递**accept_global_perms**参数，默认为**False**。它允许具有**“myapp.delete_mymodel”**权限的用户删除**MyModel**类的任何对象。例如，这对版主很有用。

[Guardian 装饰器文档](https://django-guardian.readthedocs.io/en/stable/api/guardian.decorators.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T04:00:16.970

要装饰基于类的视图的每个实例，您需要装饰类定义本身。为此，您将装饰器应用于类的 dispatch() 方法。例如，

```
class ExampleView(TemplateView):
    template_name = 'Example.html'

    @method_decorator(login_required)
    def dispatch(self, *args, **kwargs):
        return super(ExampleView, self).dispatch(*args, **kwargs) 
```

# java - JAX-RS/Jersey 中可变参数数组的路径段序列？

> ID：10925135
> 
> 赞同：4
> 
> 时间：2012-06-07T03:05:02.607
> 
> 标签：java, rest, jakarta-ee, jersey, jax-rs

`@PathParam`JAX-RS/Jersey 允许使用注释将 URL 路径元素转换为 Java 方法参数。

**有没有办法将未知数量的路径元素转换为可变参数 Java 方法的参数？** IE。`/foo/bar/x/y/z`应该去方法：`foo(@PathParam(...) String [] params) { ... }`where `params[0]`is `x`, `params[1]`is`y`和`params[2]`is`z`

**我可以用 Jersey/JAX-RS 或一些方便的方式做到这一点吗？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T06:47:18.507

不确定这是否正是您想要的，但您可以做这样的事情。

```
@Path("/foo/bar/{other: .*}
public Response foo(@PathParam("other") VariableStrings vstrings) {
   String[] splitPath = vstrings.getSplitPath();
   ...
} 
```

其中 VariableStrings 是您定义的类。

```
public class VariableStrings {

   private String[] splitPath;

   public VariableStrings(String unparsedPath) {
     splitPath = unparsedPath.split("/");
   }
} 
```

请注意，我没有检查此代码，因为它只是为了给您一个想法。这是可行的，因为变量字符串可以被注入，因为它们的构造函数只接受一个字符串。

查看[文档](http://jsr311.java.net/nonav/releases/1.0/javax/ws/rs/PathParam.html)。

最后，作为使用 @PathParam 注释注入 VariableString 的替代方法，您可以将此逻辑包装到您自己的自定义 Jersey Provider 中。该提供程序将注入一个“VariableStrings”或多或少与上面相同的方式，但它可能看起来更干净一些。不需要 PathParam 注释。

Coda Hale 给出了一个很好的[概述](http://codahale.com/what-makes-jersey-interesting-injection-providers)。

# python - 在 jython 中合并两个列表

> ID：10925136
> 
> 赞同：1
> 
> 时间：2012-06-07T03:05:05.510
> 
> 标签：python, list, jython

我正在尝试在 jython 中编写一个函数，它将组合来自两个不同列表的元素以创建一个单词。

例如：

该函数需要两个名称为 a 和 b 的列表

如果 a 是`["eat", "pray", "love"]` 并且 b 是`["er", "ing", "d"]` 并且您输入了 makeWord(a,b) 它将返回：

```
["eater", "praying", "loved"] 
```

到目前为止，我有：

```
def makeWords(a,b):
     a = []
    list1 = a
    b = []
    list2 = b
    new_list = []
    for word in list1:
        new_list.append((list1[i] + list2[i]))
    return new_list 
```

但我知道我显然做错了至少几件事。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T03:07:09.337

怎么样：

```
map(lambda x: ''.join(x), zip(list1, list2)) 
```

或者可以说更具可读性：

```
map(''.join, zip(list1, list2)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T03:11:40.050

这也应该有效：

```
>>> a = ["eat", "pray", "love"]
>>> b = ["er", "ing", "d"]
>>> [start + end for start, end in zip(a, b)]
['eater', 'praying', 'loved'] 
```

对于 Joel Cornett，`timeit`代码：

```
import timeit

a = '''
a = ["eat", "pray", "love"]
b = ["er", "ing", "d"]
[start + end for start, end in zip(a, b)]
'''

b = '''
a = ["eat", "pray", "love"]
b = ["er", "ing", "d"]
map(lambda x: ''.join(x), zip(a, b))
'''

c = '''
a = ["eat", "pray", "love"]
b = ["er", "ing", "d"]
map(''.join, zip(a, b))
'''

timeit.Timer(a).timeit(number=1000000)
timeit.Timer(b).timeit(number=1000000)
timeit.Timer(c).timeit(number=1000000) 
```

# parameters - 有没有办法动态地重新排序 Crystal Reports XI 中的参数列表？

> ID：10925146
> 
> 赞同：0
> 
> 时间：2012-06-07T03:06:07.363
> 
> 标签：parameters, crystal-reports

我使用的企业软件（Dynamics GP with Forms Printer）要求水晶报表参数按特定顺序排列。实时文档具有一组参数，而历史文档具有另一组完全不同的参数。我不想编写和维护两个单独的报告，而是创建一个包含所有参数的水晶报告。不幸的是，由于参数顺序的限制，我没有取得任何成功。任何帮助将不胜感激。

非常感谢您的宝贵时间。

乔恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:34:59.060

可以通过 ReportDocument.DataDefinition 访问报告的参数。[参数字段定义类](http://msdn.microsoft.com/en-us/library/aa691378%28v=vs.71%29)。它派生自抽象的[SCRCollection 类](http://msdn.microsoft.com/en-us/library/ms226094%28v=vs.80%29.aspx)。SCRCollection 类实现了[ICollection 接口](http://msdn.microsoft.com/en-us/library/system.collections.icollection.aspx)。

也许您可以将各个 ParameterFieldDefinitions 复制到临时集合或 ArrayList，根据需要对它们进行排序，清除 ParameterFieldDefinitions，然后从临时集合中恢复项目。

# java - App Engine 通道 API 连接和断开连接

> ID：10925147
> 
> 赞同：0
> 
> 时间：2012-06-07T03:06:09.027
> 
> 标签：java, google-app-engine, channel-api

我已阅读[Channel API for Java](https://developers.google.com/appengine/docs/java/channel/overview#Tracking_Client_Connections_and_Disconnections)文档中的*跟踪客户端连接和断开连接部分。*

它有以下代码：

```
// In the handler for _ah/channel/connected/
ChannelService channelService = ChannelServiceFactory.getChannelService();
ChannelPresence presence = channelService.parsePresence(req); 
```

`_ah/channel/connected/`我将如何为or创建一个处理程序`_ah/channel/disconnected`？我想在用户断开连接时通知或提醒连接的用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T04:08:04.823

您只需像任何其他处理程序一样创建这些处理程序。

在 app.yaml 中放入如下内容：

```
- url: /_ah/channel/connected/
  servlet: com.[MY_APP].server.channel.ChannelConnected
  name: ChannelConnected
- url: /_ah/channel/disconnected/
  servlet: com.[MY_APP].server.channel.ChannelDisconnected
  name: ChannelDisconnected 
```

# fiddler - Fiddler 可以轻松解码响应 - 如何使其自动化？

> ID：10925150
> 
> 赞同：36
> 
> 时间：2012-06-07T03:06:59.370
> 
> 标签：fiddler

在 Fiddler 中，我有很多我喜欢查看原始回复的回复。对于每一个 Fiddler 都说“响应已编码，可能需要在检查前解码。单击此处进行转换。”

我不仅希望当前的响应，而且所有响应始终被转换。有人知道如何设置吗？规则-> 删除所有编码并不能解决问题。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-06-17T14:44:50.510

*如果目标是在会话处理期间*消除压缩：

1.  这就是工具栏上的“解码”按钮的作用。
2.  这也是规则菜单>“删除所有编码”所做的。

[![自动解码](../Images/90457880804063f152f27dd81f88fff3.png)](https://i.stack.imgur.com/vJn80.png)

*如果目标是在会话处理完成后*删除编码，请选择所有会话 (CTRL+A) 并使用 Web 会话列表上下文菜单中的“解码选定会话”。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-07-07T07:05:39.830

这很简单，您只需单击 Fiddler 工具栏中的“解码”按钮

# c - 在此代码中替换 malloc / free

> ID：10925151
> 
> 赞同：0
> 
> 时间：2012-06-07T03:07:02.283
> 
> 标签：c

下面的代码是存储一个指针`tmpbuffer`。我将如何将`tmpbuffer`自身而不是指针存储在数组中`fwBuffer`而不是使用`malloc`/ `free`？

```
short int *fwBuffer[1000000];

size =  sizeof(short int)*length*inchannels;
short int *tmpbuffer = (short int*)malloc(size);

int count = 0;
for (count = 0; count < length*inchannels; count++)
{
    tmpbuffer[count] = (short int) (inbuffer[count]);
}

fwBuffer[saveBufferCount] = tmpbuffer; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T03:14:16.207

```
short int *fwBuffer[1000000]; 
```

`1000000`是一个类型的指针数组`short int`。
一个指针本身是没有用的，除非它指向一些有效的内存，它属于一个有效的对象，在这种情况下是一个类型的对象`short int`。

代码为 a 分配了足够的内存`short int`，然后将该指针放入数组中，从而使数组变得有用。这是执行此操作的正确方法，因为您需要`1000000`项目，如果您在堆栈上分配它们，您可能会用完堆栈空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T03:45:16.357

你想做这样的事情吗？这会将所有存储的缓冲区聚合到一个缓冲区中。请注意，我确实有一个单独的缓冲区来存储索引；要么你可能不需要这个，要么理论上你可以将它打包到 fwBuffer 数组中的一个位置。

```
// Max number of data chunks
const unsigned maxBuffers = 1024;
// All the data stored here.
short int fwBuffer[1000000];
// how many data chunks we have
unsigned saveBufferCount = 0;
// Index to find each data chunk
// bufferIndex[saveBufferCount] points to where the next buffer will be placed (i.e. _after_ all the stored data).
short int* bufferIndex[maxBuffers] = {fwBuffer};

void storeBuffer(unsigned length, unsigned inchannels, short int* inbuffer)
{    
        short int *bufferIterator = bufferIndex[saveBufferCount];
        // Could do a memcpy here.
        int count = 0;
        for (count = 0; count < length*inchannels; count++)
        {
            *bufferIterator++ = inbuffer[count];
        }       
        ++saveBufferCount;
        bufferIndex[saveBufferCount] = bufferIterator;
} 
```

# visual-studio - 在 Visual Studio 编辑器扩展中查询语言服务以获取程序集、类和方法信息

> ID：10925158
> 
> 赞同：0
> 
> 时间：2012-06-07T03:08:44.543
> 
> 标签：visual-studio, editor, visual-studio-extensions

我想为 Visual Studio 2010 编写一个编辑器扩展。在我的扩展中，我想获取有关类的信息，方法是在当前插入符号位置。

例如，如果我在一个事件处理程序中，并且我有一些代码使用 MessageBox.show(...) 显示一个 MessageBox，并且插入符号位于 .Show，我想查询 VS Services 以获得一个响应，告诉我我插入符号位于 System.Windows.Froms.dll 版本 4.0.40319 等中的 MessageBox 类的 Show 方法中。

是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T16:47:11.700

使用 Visual Studio 2010 中的当前 API 无法做到这一点。这就是我们构建[Roslyn](http://msdn.microsoft.com/en-US/roslyn) API 的原因，以便您可以做到。当您安装 CTP 时，我们会设置一个 Roslyn 实例，将标准语言服务替换为 Roslyn 服务，您可以直接向它提问。

如果您*不想*依赖于在 Roslyn 实例中运行（我假设是这种情况），那么它会变得有点棘手。您可以调用解析器来了解您正在进行名为 MessageBox.Show 的调用，但要获得语义，您需要构建一个 Compilation，确保您正确获取所有项目引用和源文件。这是一个更棘手的命题，因此根据您的情况，您可能希望尽可能地“作弊”。

披露：我在 Roslyn 团队。

# java - 在java中使用多线程时性能降低

> ID：10925161
> 
> 赞同：0
> 
> 时间：2012-06-07T03:09:10.343
> 
> 标签：java, multithreading, concurrency

我是多线程的新手，我必须使用多线程编写程序来提高效率。在我第一次尝试时，我所写的结果正好相反。这是我写的：

```
class ThreadImpl implements Callable<ArrayList<Integer>> { 
    //Bloom filter instance for one of the table
    BloomFilter<Integer> bloomFilterInstance = null;
    // Data member for complete data access.
    ArrayList< ArrayList<UserBean> > data = null;
    // Store the result of the testing 
    ArrayList<Integer> result = null;
    int tableNo;

    public ThreadImpl(BloomFilter<Integer> bloomFilterInstance, 
                        ArrayList< ArrayList<UserBean> > data, int tableNo) {
        this.bloomFilterInstance = bloomFilterInstance;
        this.data = data;
        result  = new ArrayList<Integer>(this.data.size());
        this.tableNo = tableNo;
    }

    public ArrayList<Integer> call() {
        int[] tempResult = new int[this.data.size()];
        for(int i=0; i<data.size() ;++i) {
            tempResult[i] = 0;
        }
        ArrayList<UserBean> chkDataSet = null;
        for(int i=0; i<this.data.size(); ++i) {
            if(i==tableNo) {
                //do nothing;
            } else {
                chkDataSet = new ArrayList<UserBean> (data.get(i));
                for(UserBean toChk: chkDataSet) {
                    if(bloomFilterInstance.contains(toChk.getUserId())) {
                        ++tempResult[i];
                    }
                }
            }
            this.result.add(new Integer(tempResult[i]));
        }
        return result;
    }
} 
```

在上面的类中有两个数据成员`data`，`bloomFilterInstance`它们（引用）是从主程序传递的。所以实际上只有一个数据实例和bloomFilterInstance，并且所有线程都在同时访问它。

启动线程的类是（省略了一些不相关的细节，所以所有变量等你可以假设它们被声明）：

```
class MultithreadedVrsion {
    public static void main(String[] args) {
        if(args.length > 1) {
            ExecutorService es = Executors.newFixedThreadPool(noOfTables);
            List<Callable<ArrayList<Integer>>> threadedBloom = new ArrayList<Callable<ArrayList<Integer>>>(noOfTables);
            for (int i=0; i<noOfTables; ++i) {
                threadedBloom.add(new ThreadImpl(eval.bloomFilter.get(i), 
                                                eval.data, i)); 
            }
            try {
                List<Future<ArrayList<Integer>>> answers = es.invokeAll(threadedBloom);
                long endTime = System.currentTimeMillis();
                System.out.println("using more than one thread for bloom filters: " + (endTime - startTime) + " milliseconds");
                System.out.println("**Printing the results**");
                for(Future<ArrayList<Integer>> element: answers) {
                    ArrayList<Integer> arrInt = element.get();
                    for(Integer i: arrInt) {
                        System.out.print(i.intValue());
                        System.out.print("\t");
                    }
                    System.out.println("");
                }
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }
} 
```

我使用 jprofiler 进行了分析，然后

![这里]:(http://tinypic.com/r/wh1v8p/6)

是 CPU 线程的快照，其中红色表示阻塞，绿色表示可运行，黄色表示正在等待。我的问题是线程一次运行一个我不知道为什么？

注意：我知道这不是线程安全的，但我知道我现在只会进行读取操作，并且只想分析可以实现的原始性能增益，稍后我将实现更好的版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T03:20:12.330

> 谁能告诉我错过了哪里

一种可能性是创建线程的成本超过了并行计算带来的任何可能的性能提升。我们无法确定这是否真的有可能，因为您没有在问题中包含相关代码。

另一种可能性是您只有一个处理器/内核可用。线程仅在有处理器运行时才会运行。因此，您对线程数的线性速度的期望只有在每个线程都有一个空闲处理器时才*可能（理论上）实现。*

最后，由于所有线程都试图访问共享数组，可能会出现内存争用。如果您有适当的同步，那可能会增加进一步的争用。（注意：我没有尝试理解算法来确定您的示例中是否可能存在争用。）

* * *

我最初的建议是分析你的代码，看看是否能提供任何见解。

并查看您测量性能的方式，以确保您不只是看到一些基准测试产品；例如 JVM 预热效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T03:18:50.053

该进程看起来受 CPU 限制。（没有 I/O、数据库调用、网络调用等）我能想到两种解释：

1.  你的机器有多少个 CPU？Java允许使用多少个？- 如果线程正在竞争相同的 CPU，则您增加了协调工作并对相同资源提出了更多需求。
2.  整个方法运行需要多长时间？在很短的时间内，上下文切换线程中的额外工作可能会压倒实际工作。解决这个问题的方法是做一个更长的工作。此外，在不计算前几次迭代的循环中运行很多次（就像热身一样，它们不具有代表性。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T03:21:00.883

想到了几种可能性：

*   的实现内部正在进行一些同步`bloomFilterInstance`（未给出）。
*   有很多内存分配正在进行，例如，什么似乎是创建`ArrayList`时的不必要副本`chkDataSet`，使用 of`new Integer`代替`Integer.valueOf`. 您可能会遇到内存分配的间接成本。
*   您可能受 CPU 限制（如果`bloomFilterInstance#contains`很昂贵），并且线程只是阻塞 CPU 而不是执行。

分析器可能有助于揭示实际问题。

# windows - 如何在打印机上画一条看起来比像素还细的线？

> ID：10925162
> 
> 赞同：0
> 
> 时间：2012-06-07T03:09:24.540
> 
> 标签：windows, printing, gdi

我知道 GDI 的限制。GDI 只能绘制宽度至少为 1 像素的线。但我仍然想在打印机中画一条看起来比 1 像素细的线。

你的意思是我可以这样做：

```
with cLogBrush do
begin
    lbStyle := BS_Solid;
    lbColor := ACanvas.Pen.Color;
    lbHatch := 0;
end;  
dwStyle := PS_COSMETIC or PS_ALTERNATE;
ACanvas.Pen.Handle := ExtCreatePen(dwStyle, 1, cLogBrush, 0, nil);
ACanvas.MoveTo(X1, Y1);
ACanvas.LineTo(X2, Y2); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T03:32:01.087

您可以（例如）绘制一条交替的黑白像素线。至少对于 600 到 1200 DPI 的典型激光打印机来说，这通常会很好地融合成一条看起来不那么暗的线条。然而，我应该补充一点，一台好的激光打印机只有一个像素宽的线条真的很细。

这里的很多东西确实取决于打印机。例如，对于大多数喷墨打印机，您可以绘制的最细线更粗，即使/如果它们引用相同（甚至更高）的分辨率。线条通常也不是很干净——在这两种情况下，它们在中心最暗，并且褪色到纸张颜色，但是使用“褪色”的喷墨通常要慢一些，所以边缘线路不是很干净。

# scrapy - 关于scrapy的并发模型

> ID：10925166
> 
> 赞同：5
> 
> 时间：2012-06-07T03:09:58.673
> 
> 标签：scrapy

现在我计划以更分散的方式使用scrapy，我不确定蜘蛛/管道/下载器/调度器和引擎是否都托管在单独的进程或线程中，有人可以分享一些关于这个的信息吗？我们可以更改每个组件的进程/线程数吗？我知道现在有两个设置“CONCURRENT_REQUESTS”和“CONCURRENT_ITEMS”，它们将决定下载器和管道的并发线程，对吧？如果我想在不同的机器上部署蜘蛛/管道/下载器，我需要序列化项目/请求/响应，对吗？非常感谢您的帮助！！

谢谢，爱德华。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T14:27:22.000

Scrapy 是单线程的。它使用[Reactor 模式](http://en.wikipedia.org/wiki/Reactor_pattern "维基百科上的“反应器模式”")来实现并发网络请求。这是使用[Twisted](http://twistedmatrix.com/trac/ "扭曲的网站")框架完成的。

想要分发 Scrapy 的人通常会尝试实现一些消息传递框架。有些人[使用 Redis](https://github.com/darkrho/scrapy-redis "GitHub上的scrapy-redis")，有些人[尝试 RabbitMQ](https://groups.google.com/forum/?fromgroups=#!topic/scrapy-users/-AwGaWBuwyI "基于 RabbitMQ 的分布式 Scrapy 架构对话")

也看看[Scrapyd](http://doc.scrapy.org/en/latest/topics/scrapyd.html "Scrapy 文档中的 Scrapyd 章节")

# java - 为数据密集型应用程序的 JVM 适当调整堆和旧代的大小

> ID：10925169
> 
> 赞同：6
> 
> 时间：2012-06-07T03:10:43.623
> 
> 标签：java, garbage-collection, jvm, jvm-hotspot

*   我正在使用 JVM 运行服务器应用程序`sunjava-1.6.0_21`。
*   我的应用程序数据量大，充当缓存服务器。因此它存储了很多我们不希望在整个应用程序运行期间获得 GC 的长期生存数据。
*   我正在设置以下 JVM 参数`-Xmx16384M`和`-Xms16384M`.
*   加载所需数据后，以下是应用程序的内存使用情况
*   总堆空间为：`13969522688`
*   最大堆空间为：`15271002112`
*   可用堆空间为：`3031718040`
*   长期（老一代）堆存储： `Used=10426MB Max=10922MB Used/Max=95%`

老一代的使用 - 我已经确认这是由于实际数据，预计不会免费。我的问题是，默认情况下 JVM 大小的堆空间（它分配 10922MB 旧代），这在旧代部分留下了非常少的可用空间。

*   老一代的可用空间减少会影响应用程序吗？
*   如果是，我应该如何处理？我是否应该尝试 JVM 调整参数`newratio`，例如尝试增加老一代的可用空间，或者我应该调整应用程序的任何其他方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T08:42:05.580

> 老一代的可用空间减少会影响应用程序吗？

如果您的 Tenured Gen 已满，则会发生重大收集，而这种类型的收集成本很高。您可以使用选项 :`-verbose:gc`并`-XX:+PrintGCDetails`了解 Full GC 是否发生得太频繁。如果是这种情况，那么是的，它会影响您的应用程序的性能。

> 如果是，我应该如何处理？我是否应该尝试使用诸如 newratio 之类的 JVM 调整参数并尝试增加可用于老一代的空间，或者我应该调整应用程序的任何其他方式。

您可以尝试一下 NewRatio，但请记住，如果您的伊甸园太短，您的终身一代可能会更快地被填满。

To conclude, you should use a monitoring tool to have a better idea of the VM options you have to use. It will show you easily how your generations are filled during the app execution, it's easier to read and understand than gc logs ;)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T07:44:20.800

如果您知道对象的寿命很长，那么请使用设置区域彼此相关大小的参数。

`young generation`您可以在和`old generation`（伊甸园和三元空间）以及幸存者中设置比率。

目标是通过允许次要垃圾收集释放所有内存来最小化完整垃圾收集。

您可以通过在应用程序中保持对象可访问来防止垃圾收集释放对象。我的意思是你应该只关心那些被次要垃圾收集删除的对象。

启用参数

```
-verbose:gc -Xloggc:/opt/tomcat/logs/gc.out -XX:+PrintGCDetails -XX:+PrintGCTimeStamps 
```

然后使用工具[GCViewer](https://github.com/chewiebug/GCViewer)，您可以查看花费的时间`gc`和删除的对象的数量（大小）。在一些有用的指标中。

# java - Oracle 日期文字 [DD-MON-RR HH.MI.SSXFF AM]

> ID：10925178
> 
> 赞同：0
> 
> 时间：2012-06-07T03:11:44.243
> 
> 标签：java, oracle, date, timestamp, nls

我正在尝试使用时间戳格式 [DD-MON-RR HH.MI.SSXFF AM] 插入我的日期。

我无论如何都无法修改数据库设置，我必须通过 JAVA 的字符串格式插入日期（我也无法修改定义它的类）。

话虽如此，我需要逐个字符串地重建格式字符串，而不需要调整其他类/数据库。

日期的 nls 设置为 DD-MON-RR。12-JUN-2012 和 12/JUN/2012 工作得非常好。

但我发现很难重新创建日期的时间戳部分。

下面列出了我尝试过的几种格式。

```
'12-JAN-12' < success
'12/JAN/2012' < success
'12/JAN/2012 10.30.25.000 AM < failed
'12/JAN/2012 10:30:25.000 AM < failed 
```

搞砸了：还是.？还是零对于毫秒来说还不够？几个小时以来一直在这个麻烦中。

提前致谢。

```
EDIT 
```

经过几次推理后，学长们同意改变模型类。现在一切都很好。感谢您的帮助和建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:50:33.737

由于您必须向数据库发送字符串，因此您必须依赖 oracle DB 到 DATE 类型的隐式转换。
由于您无法更改数据库设置，我唯一可以建议的是更改会话设置。
因此，如果您可以对数据库运行命令，请尝试：

```
Statement st = conn.createStatement();
st.execute("alter session set NLS_DATE_FORMAT='dd/mm/yyyy hh24:mi:ss'"); 
```

（或其他格式（不建议`mon`在您的格式中使用，因为它也可能涉及`NLS_TERRITORY`））

# c++ - 如何通过引用传递？

> ID：10925187
> 
> 赞同：-1
> 
> 时间：2012-06-07T03:13:08.470
> 
> 标签：c++, std

我在形式的头文件 Class2.hpp 中有一个函数：

```
class Class2{
void Test::func(std:: string & text, Class1::enum_var var1, unsigned var2, unsigned     &var3);}; 
```

我有以下形式的 Class1：

```
 class Class1{
  public:
 /// Different literal types
  enum enum_var {
  enum_var1, enum_var2, enum_var3
 }; }; 
```

我在 Class2.cpp 中将上述函数定义为

```
 void Test::func(std:: string & text, Class1::enum_var var1, unsigned var2, unsigned     &var3){
 cout<<"inside the function";
 } 
```

现在我将上述函数称为：

```
Class2 clsObj;
std::string text="abc";
int var3=0;
clsObj.func( text, Class1::enum_var1, 0, &var3); 
```

但是，当我运行程序时，它给了我以下错误：

```
 error: no matching function for call to ‘Class2::func(std::string*,   Class1::enum_var1,  int, int*)’
 note: candidate is:
 void Class2::func(std::string&, Type::ID, unsigned int, unsigned int&)
 note:  no known conversion for argument 4 from ‘unsigned int*’ to ‘unsigned int&’ 
```

我不知道如何摆脱错误..有人可以帮忙吗？

另外，我希望 var3 中的更改被反映回来......因此，除了返回或通过引用传递之外，我别无选择..当我通过引用传递 var3 时，它给了我错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T03:15:38.743

通过引用传递在调用方没有特殊语法，只有签名/定义具有特殊的`&`. 采用：

```
clsObj.func(text, Class1::enum_var1, 0, var3); 
```

`&text`获取`text`变量的地址（类型为`std::string*`）。当您尝试将其传递给函数时，它不需要指针，而这正是错误消息试图表达的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T03:15:41.663

```
clsObj.func(& text, Class1::enum_var1, 0 &var3); 
```

应该：

```
clsObj.func(text, Class1::enum_var1, 0, var3); 
```

引用是被引用对象的*别名*，引用对象只能通过引用名称访问。

# asp.net - 我可以在 AppHarbor 中创建虚拟目录吗？

> ID：10925188
> 
> 赞同：1
> 
> 时间：2012-06-07T03:13:12.270
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, iis, appharbor

我目前在我的本地 IIS 上有一个网站（一个单独的网站，如“默认网站”）。我在其中添加了一个文件夹并右键单击并执行了“转换为应用程序”。这意味着现在它是完全独立的应用程序，拥有自己的 web.config 并且不会干扰主 web.config。

我可以在[AppHarbor](https://appharbor.com/)中达到同样的效果吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T04:16:46.030

您可能应该在 AppHarbor 上将其作为单独的应用程序运行。如果这对您来说不是一个好的解决方案，请提供有关您的用例的更多详细信息。

# ios - 在 iPad 上模态显示 ModalViewController

> ID：10925190
> 
> 赞同：0
> 
> 时间：2012-06-07T03:13:42.737
> 
> 标签：ios, ipad, modal-dialog, viewcontroller

我从 iPad 应用程序的 UISplitVC 中的 MasterViewController 调用此代码：

```
-(void)viewWillAppear:(BOOL)animated{
//PRESENT MODALVC
ModalViewController *modalVC = [[ModalViewController alloc] initWithNibName:@"ModalViewController" bundle:nil];
[self setModalPresentationStyle:UIModalPresentationFullScreen];
[self presentModalViewController:modalVC animated:YES]; 
```

}

但它不起作用。没有出现 ModalVC。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T03:26:20.150

试试这个代码：

```
ModalViewController *modalVC = [[ModalViewController alloc] initWithNibName:@"ModalViewController" bundle:nil];
[modalVC setModalPresentationStyle:UIModalPresentationFullScreen]; //You set the presentation style of the controller that would be presented, not the presenting controller
//This check is needed, because presentModalViewController:animated is depreciated in iOS5.0 and presentViewController:animated:completion must be used instead. The same is valid for dismissModalViewControllerAnimated and dismissViewControllerAnimated:completion
if([self respondsToSelector:@selector(presentViewController:animated:completion:)])
    [self presentViewController:modalVC animated:YES completion:nil];
else
    [self presentModalViewController:modalVC animated:YES]; 
```

如果您的目标是 iOS5.0+，则不需要此检查，您应该只使用`presentViewController:animated:completion`和`dismissViewControllerAnimated:completion`

# android - bundle.putByteArray 是复制整个缓冲区还是在 Android 中传递指针？

> ID：10925192
> 
> 赞同：1
> 
> 时间：2012-06-07T03:13:56.840
> 
> 标签：android, bundle, message

我必须将缓冲区从一个线程传递到另一个线程，并且我正在使用 bundle.putByteArray (String key, byte[] value) 方法来做到这一点。我的问题是将整个缓冲区复制到另一个缓冲区并传递它还是只是将指针发送到数组？

如果它正在复制整个缓冲区，我需要避免这个函数调用，因为它会很昂贵。请澄清我的疑问。

谢谢， 沙米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T03:26:11.553

请参阅[Bundle.java](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/os/Bundle.java)，它所做的只是将您的键值对插入标准 HashMap 中。所以不，它不是在复制。

# windows-7 - Windows 7 拒绝通过批处理文件访问删除文件

> ID：10925193
> 
> 赞同：1
> 
> 时间：2012-06-07T03:14:02.440
> 
> 标签：windows-7, batch-file, cmd

我正在编写一个批处理文件来清理我的个人计算机的一些垃圾文件。我还检查了属性中的安全选项，批处理文件具有完全权限。

```
@echo off
echo running......
del /f /s /q %systemdrive%\*.tmp
del /f /s /q %systemdrive%\*._mp
del /f /s /q %systemdrive%\*.log
del /f /s /q %systemdrive%\*.gid
del /f /s /q %systemdrive%\*.chk
del /f /s /q %systemdrive%\*.old
del /f /s /q %systemdrive%\recycled\*.*
del /f /s /q %windir%\*.bak
del /f /s /q %windir%\prefetch\*.*
rd /s /q %windir%\temp & md %windir%\temp
del /f /q %userprofile%\cookies\*.*
del /f /q %userprofile%\recent\*.*
del /f /s /q "%userprofile%\Local Settings\Temporary Internet Files\*.*"
del /f /s /q "%userprofile%\Local Settings\Temp\*.*"
del /f /s /q "%userprofile%\recent\*.*"
echo done!
echo. & pause 
```

我不断收到拒绝访问的消息。那是因为批处理文件没有以系统管理员身份启动吗？无论如何要解决问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T14:19:22.360

我认为这是基于许可的。尝试以管理员身份运行批处理文件。

如果这不起作用，您可能必须重新分配文件的权限，因为有些文件可能位于受保护的文件夹中。

`cacls`要重新分配权限，请查看`icacls`和`takeown`。

# java - 通过“ContentResolver”删除文件，而不是通过“file.delete()”删除文件

> ID：10925196
> 
> 赞同：14
> 
> 时间：2012-06-07T03:14:29.253
> 
> 标签：java, android

我刚刚在一个 android 应用程序中编写了一个函数，它使用 Java 中的标准“文件”类删除一个文件。IE：

```
String fileName= "/mnt/Gallery/Img001.jpg";
File file = new File(fileName);
file.delete(); 
```

虽然上述过程很简单，但我一直想知道通过“ContentResolver”做同样的事情是否有什么好处。任何意见，将不胜感激。

- - - - - - - - - - - - - - - - - - - - - 编辑 - - - - ---------------------------------

这是通过内容解析器删除文件的示例。这个例子假设被删除的文件是一个图像并且它的'id'是已知的。

```
long mediaId = 155; // NOTE: You would normally obtain this from the content provider!
Uri contentUri = MediaStore.Images.Media.EXTERNAL_CONTENT_URI;
Uri itemUri = ContentUris.withAppendedId(contentUri, mediaId);

int rows = getContentResolver().delete(itemUri, null, null);

String path = itemUri.getEncodedPath();
if(rows == 0)
{
    Log.e("Example Code:","Could not delete "+path+" :(");
}
else
{
    Log.d("Example Code:","Deleted "+path+ " ^_^");
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-10-14T11:47:34.137

与直接操作数据相比，Android 的内容提供程序框架具有某些额外的优势。

您可以考虑“文件在哪里以及谁可能正在删除它”。

## 方案 1

文件位于 SD 卡（您的应用程序可访问的路径）上，您的应用程序正在删除它。

**解决方案：**由于您可以访问路径，因此 java 方法将使用文件 Uri，例如：

> 文件：//mnt/sdcard/downloads/image.jpeg

## **方案 2**

文件位于另一个应用程序（例如保管箱）中，您的应用程序需要删除该文件。

**解决方案**：这意味着该文件实际上驻留在另一个应用程序的私有存储中。一个文件：Uri 会用上面的方法给你拒绝访问。因此，您的应用将需要从包含该文件的应用中获取内容 Uri，并调用其内容提供程序进行删除。

> fileUri = Uri.parse ("content : // " + packageContainingTheFile " + fileId); // 将其替换为从应用程序获取的 Uri。getContext().getContentResolver().delete (fileUri, null, null);

## 方案 3

文件位于应用程序的包目录中，即 data/data/com.yourpackage/yourfolder/yourfile.xxx 下，您的应用程序是唯一删除它的应用程序。

**解决方案：**在这里，上述任何一种方法都可以使用，因为您有权删除文件。Uri 看起来像：

> file://data/data/yourpackage/folder/file.ext

在这里使用内容提供者的主要优点是您可以自动获得观察者模型。内容提供者回调是一个定义明确的入口点，从中可以修改数据。因此，它是使用以下方式通知他人更改的理想场所：

> getContext().getContentResolver().notify(uri, null)

假设您有显示此类文件项列表的视图。删除完成后，您会收到通知。

## 方案 4

文件位于您应用程序的包目录中，即 data/data/com.yourpackage/yourfolder/yourfile.xxx 下，您希望将删除功能公开给其他应用程序。

**解决方案**：这与场景 1 类似，只是反过来。其他应用程序无法删除您私人存储中带有 Uri 之类的文件

> file://data/data/yourpackage/folder/file.ext // 仅适用于您的应用程序

他们将需要调用您的内容提供商来使用类似 Uri 的方式执行此操作。

> content://providerAuthority/delete/id 您的内容提供者需要将其映射到 file.ext 绝对路径。

## 概括

总而言之，在某些情况下使用内容提供程序是必要的，而在其他情况下是可选的。这在很大程度上取决于您的应用程序要求。如果您有视图、CursorLoaders 并希望了解更新或希望将您的应用程序数据的删除暴露给其他应用程序，那么内容提供程序是最干净的方法。

# php - PHP 撤消按钮

> ID：10925197
> 
> 赞同：0
> 
> 时间：2012-06-07T03:14:55.790
> 
> 标签：php, mysql, undo

我只是尝试使用 PHP 和 MySQL 实现一个撤消按钮，例如，如果用户删除了一篇文章或任何一般项目，那么将有一个选项来撤消该 MySQL 查询并保持该文章原样。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T03:17:57.317

你需要一个标志列来做事。例如`del_flag`，如果用户删除一条记录，则将此标志设置为`1`，撤消时，将其设置为`0`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T03:40:21.970

为了澄清起见，一旦从 MySQL 数据库中删除了一行，就不能“撤消”。一旦项目被删除，就没有回头路了。

因此，要模仿这种“撤消”功能，您需要（如另一个答案中已经建议的那样）在数据库表中创建一个新字段，以跟踪帖子是否已被删除。让我们称这个新字段`Deleted`并说它只能有两个值—— `yes`（意味着它已被删除）和`no`（意味着它尚未被删除）。

删除帖子后，您可以将该`Deleted`字段标记为`yes`并“隐藏”该帖子，使其看起来已被删除（即使它实际上仍存在于数据库中）。

同样，当用户单击“撤消”按钮时，会将`Deleted`字段切换回`no`.

在您的 PHP 代码中，您需要检查`Deleted`每个帖子的字段值，然后相应地隐藏或显示帖子。

与任何此类挑战一样，有多种解决方案。如果上述方法不是您想要的，并且您**真的**想从数据库中实际删除帖子，那么您可以先将删除的帖子保存在另一个数据库表中（当然，保留对它的引用，以便在使用“撤消”按钮时可以恢复它），然后从“主”数据库中删除该帖子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T03:18:05.860

当您删除帖子时，只需将其标记为“未发布”即可。然后要撤消，只需再次将其标记为“活动”。

然后在您的查询中，只需根据结果是否“实时”过滤结果。

# facebook - 不活动后的 Facebook API OAuthException

> ID：10925198
> 
> 赞同：0
> 
> 时间：2012-06-07T03:15:03.187
> 
> 标签：facebook, facebook-graph-api

我的 Facebook 应用程序最初运行良好。但是经过一定程度的不活动后，我开始收到以下错误：

```
Fatal error: Uncaught OAuthException: An active access token must be used to query information about the current user. thrown in /home/streetof/public_html/wp-content/mu-plugins/facebook-php-sdk/src/base_facebook.php on line 1106 
```

我很困惑，因为用户仍然登录到 Facebook，以及我的 Wordpress 网站（集成了 FB 登录）。

我可以通过清除浏览器的 cookie 并登录/退出当前 Facebook 帐户来解决它。

我已经隔离了引发错误的位置。我正在使用 PHP Facebook SDK。触发错误的代码行如下所示：

```
$friends = $facebook->api('/me/friends?fields=name,first_name,last_name,id,work,education'); 
```

关于为什么会发生这种情况的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T06:10:20.833

看起来您的访问令牌已过期 - 默认情况下，短期访问令牌的有效期约为一到两个小时。

你可以得到一个长期存在的——https: [//developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)描述如何做到这一点——或者如果用户仍在与你的页面进行交互，你可以调用 FB。 getLoginStatus 客户端，这也将刷新令牌。

# iphone - SBJson 解析帮助 iphone

> ID：10925200
> 
> 赞同：0
> 
> 时间：2012-06-07T03:15:12.343
> 
> 标签：iphone, sbjson

我目前正在尝试解析 iphone 上的一些 json 数据。

我一直在网上搜索示例，但似乎没有一个适合我的目的，我正在使用 SBJson。

我想要的是能够获得标题、Artisits、状态等的 NSArray，以便我可以在表格视图中显示它们。任何帮助都会很棒，到目前为止，我得到的只是一组“值”。

```
 JSON = {"values":
    [
      {"Status":"N", "Filename":"RD207T04", "Title":"Simple Man (Explicit)", "Artist":"DIAFRIX F/DANIEL MERRIWE", "Release":"May11"}, 

      {"Status":"N", "Filename":"CR221T27", "Title":"Midnight City", "Artist":"M83", "Release":"Dec11"}, 

      {"Status":"N", "Filename":"ED211T03", "Title":"I\"ll Be Your Man", "Artist":"JAMES BLUNT", "Release":"Jul11"}

    ]} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T03:24:28.433

您不想要标题、艺术家等的数组。您想要由键`NSDictionary`表示的 s数组。`values`然后你可以这样做：

```
cell.textLabel.text = [[valuesArray objectAtIndex:indexPath.row]valueForKey:@"Title"]]; 
```

在您的`cellForRowAtIndexPath:`委托方法中。如果您还没有这个，这是获取该数组的方法：

```
NSArray *valuesArray = [[myJsonString JSONValue]objectForKey:@"values"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T03:34:40.180

谢谢伙计，我肯定把事情复杂化了：

最终代码是这样的：

```
NSArray *valuesArray = [[playlist JSONValue] objectForKey:@"values"];
NSString *test = [[valuesArray objectAtIndex:0]valueForKey:@"Title"];    
NSLog(@"test = %@", test); 
```

现在我所要做的就是遍历集合:)

# jquery - jQuery选择器，获取没有类类型A且没有祖先有类类型A的元素

> ID：10925209
> 
> 赞同：1
> 
> 时间：2012-06-07T03:16:37.407
> 
> 标签：jquery

我需要一个自定义选择器来获取所有没有类 hiddenField 并且没有类 hiddenField 的祖先的 LI

例如

```
var lis= $f.find('li:not(.hiddenField)').filter('andAncestorsHaveNoClassHiddenField) 
```

对我来说有点紧张:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T03:20:44.657

```
$f.find("li:not('.hiddenField')").filter(function(){
    return !$(this).parents().hasClass(".hiddenField"); 
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T03:20:05.420

```
$f.find('li:not(.hiddenField) :not(.hiddenField)').parent() 
```

# javascript - 如何有条件地禁止登录 Express（或 Connect）？

> ID：10925210
> 
> 赞同：1
> 
> 时间：2012-06-07T03:16:37.620
> 
> 标签：javascript, node.js, express

当使用作为 Connect（以及 Express）一部分的记录器中间件时，我希望能够禁用某些请求的日志记录，例如通过在响应上设置标志或其他方式。

我设法做到了：

```
res.doNotLog = true; 
```

然后，深入 logger.js（连接模块的一部分），我把

```
if(res.doNotLog) return; 
```

在正确的地方。但我当然不想修改模块本身的代码。有什么方法可以让我在不必破解模块的情况下发生同样的事情？

**编辑：**

这有效：

```
var app = _express.createServer();

// set 'hello' routing...note that this is before middleware 
// so it won't be logged
app.get('/sayhello', function(req, res) {res.send("hey");});

// configure middleware: logging, static file serving
app.configure(function() {
    app.use(_express.logger());
    app.use(_express.static(__dirname + '/www'));
  });

// set 'goodbye' routing...note that this is after middleware 
// so it will be logged
app.get('/saygoodbye', function(req, res) {res.send("later...");}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T03:29:30.150

最明显的事情是将这些请求的处理程序放在记录器之前。这在纯 Connect 中很容易，但不确定如何在 Express 中执行，因为很多路由代码在路由之间共享。如果只有几个这样的请求，您可以在堆栈中以 Connect 方式处理它们，而不是`app.router`.

# vim - Vim 替换为 '/' 和数字

> ID：10925211
> 
> 赞同：0
> 
> 时间：2012-06-07T03:16:39.700
> 
> 标签：vim

当我没有遇到这样的问题时，Vim replace 很难使用：

1）用其他文本替换数字

2）替换文本`/static/`喜欢`www.website.com/`

我认为我需要使用一些正则表达式来解决第一个问题，并使用一些方法来解决`/`第二个问题。

任何快速的解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T03:24:06.283

1.  `:%s/\d\+/sometext/g`
2.  `:%s/\/static\//www.website.com\//g`

# javascript - 使用javascript替换动态字符串值

> ID：10925212
> 
> 赞同：2
> 
> 时间：2012-06-07T03:16:41.740
> 
> 标签：javascript, string, dynamic, replace

问题是：如何替换字符串中可以变化的值？我猜你需要使用正则表达式..

这是我正在尝试做的事情：

```
 var height = 500;

  var urlstr = "...?height=300&width=200";

  var newurl = urlstr.replace("height=%&","height="+height+"&");

  alert(newurl); 
```

请注意，我目前正在尝试使用“％”符号来解释动态值，但这不起作用..我不擅长使用正则表达式，如果你们中的任何人能给我一个提示，我将不胜感激，或者告诉我我是否错误地接近这个;）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T03:23:04.843

是的，你需要正则表达式。幸运的是它不是很复杂：

```
var height = 500;
var urlstr = "...?height=300&width=200";
var newurl = urlstr.replace(/(height=)([0-9]+)/, '$1' + height);

alert(newurl); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T03:26:41.473

“%”将被编码为“%25”。
对于您的参考，
javascript encodeURIComponent

# c# - String.Equals 和运算符之间的无休止的调用循环 ==

> ID：10925217
> 
> 赞同：4
> 
> 时间：2012-06-07T03:17:09.360
> 
> 标签：c#, .net, string

我的一个朋友在 String.cs 中偶然发现了这两个方法的有趣源代码：

```
[TargetedPatchingOptOut("Performance critical to inline across NGen image boundaries")]
public static bool operator ==(string a, string b)
{
    return Equals(a, b); 
}

[TargetedPatchingOptOut("Performance critical to inline across NGen image boundaries")]
public static bool Equals(string a, string b)
{
    return ((a == b) || (((a != null) && (b != null)) && EqualsHelper(a, b)));
} 
```

为什么它不会导致无限循环？（我们所有的程序都将被 StackOverflowException 终止！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T03:39:06.277

显然是这样，至少根据接受的答案。

（在我有一定数量的代表之前，我不能发表评论。万岁。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T03:44:32.277

你打败了我Shoaib。当您发布您的答案时，我也试图加入我的第一个回答问题。:)

听起来缺少的是对“对象”的强制转换，这将强制编译器使用 Object 的 Equals 方法，并防止无限循环。

# azure - Windows Azure 辅助角色实例是一个完整的虚拟机吗？

> ID：10925218
> 
> 赞同：8
> 
> 时间：2012-06-07T03:17:20.640
> 
> 标签：azure, azure-configuration

当我在 Azure 上运行辅助角色实例时，它是否是在共享主机（如 EC2）中运行的完整 VM？还是在共享系统（如 Heroku）中运行？

例如，如果我的应用程序开始请求 100 GB 内存会发生什么？它会因为违反限制而自动终止（例如 Google App Engine），还是只会耗尽 VM，以便 Azure 结构重新启动它？

两个角色是否曾经在同一个系统中运行？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-07T03:31:10.520

它是一个完整的 VM，分配的资源直接基于您选择的 VM 大小，从 1.75GB（小型）到 14GB（XL），具有 1-8 个内核。还有一个具有 768MB RAM 和共享内核的 Extra Small 实例。完整的 VM 大小详细信息在[这里](http://msdn.microsoft.com/en-us/library/windowsazure/ee814754.aspx)。

在 Windows Azure 中，您的 VM 被分配在物理服务器上，并且结构有责任找到此类服务器以正确分配您的所有 Web 或工作角色实例。如果您有多个实例，这意味着跨*故障域*分配这些虚拟机。

使用您的虚拟机，如果您尝试在资源部门分配过多，您不必担心会被杀死：这就像拥有一台机器，您无法超越那里的内容。

至于在同一系统上运行的两个角色：每个角色都有实例，并且有多个实例，正如我上面提到的，您的实例被划分为容错域。例如，如果您有 4 个实例和 2 个容错域，那么您可能在同一个机架（或者可能是同一台服务器）上有两个实例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T10:16:40.023

I ran a quick test to check this. I'm using a "small" instance that has something like 1,75 gigabytes of memory. My code uses an `ArrayList` to store references to large arrays so that those arrays are not garbage collected. Each array is one billion `byte`s and once it is allocated I run a loop that sets each element to zero and then another loop to check that each element is zero to ensure that memory is indeed allocated from the operating system (not sure if it matters in C#, but it indeed mattered in C++). Once the array is created, written to and read from, it is added to the `ArrayList`.

So my code successfully allocated five such arrays and the attempt to allocate the sixth one resulted in `System.OutOfMemoryException`. Since 5 billion bytes plus overhead is definitely more that 1,75 gigabytes of physical memory allocated to the machine I believe this proves that page file is enabled on the VM and the behavior is the same as on usual Windows Server 2008 with the limitations induced by the machine where it is running.

# python - Python TLS 握手 XMPP

> ID：10925220
> 
> 赞同：1
> 
> 时间：2012-06-07T03:17:23.587
> 
> 标签：python, xml, xmpp, ssl

我正在尝试使用 python 连接到 XMPP 服务器。我有要连接的 XML，我只是不确定如何进行连接的 TLS 部分？我可以找到很多 HTTPS TLS 的示例和 XMPP 的示例，只是不知道如何将两者结合在一起。

有没有人在 python 中使用 TLS 获得 XMPP 连接的示例？如果有帮助，我正在尝试连接到 talk.google.com。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T07:45:16.077

首先，请使用其他人现有的 XMPP[库](http://xmpp.org/xmpp-software/libraries/)，而不是自己编写。已经有很多了。[从SleekXMPP](https://github.com/fritzy/SleekXMPP)开始。

要回答您的问题，请在您想要执行 Start-TLS 时调用[ssl.wrap_socket 。](http://docs.python.org/library/ssl.html#ssl.wrap_socket)例如：

```
import socket
import ssl

sock = socket.create_connection(("example.com", 5222))
sock.write("""<stream:stream
                 to='example.com'
                 version='1.0'
                 xml:lang='en'
                 xmlns='jabber:client'
                 xmlns:stream='http://etherx.jabber.org/streams'>""")
sock.recv(1000) # reads the stream:stream and stream:features.  Obviously bad code, to get the point accross
sock.write("<starttls xmlns='urn:ietf:params:xml:ns:xmpp-tls'/>")
sock.recv(1000) # read the proceed
ssl_sock = ssl.wrap_socket(sock)
ssl_sock.write("""<stream:stream
                 to='example.com'
                 version='1.0'
                 xml:lang='en'
                 xmlns='jabber:client'
                 xmlns:stream='http://etherx.jabber.org/streams'>""") 
```

等等。

# c#-4.0 - 当前上下文中不存在“字符串”

> ID：10925221
> 
> 赞同：1
> 
> 时间：2012-06-07T03:17:29.443
> 
> 标签：c#-4.0

我将以下函数从 vb.net 转换为 c#，但我无法弄清楚。

错误 4 当前上下文中不存在名称“字符串”

```
public string GetBetween(string StringText)
    {
        string functionReturnValue = null;

        string TMP = null;
        string FromS = null;
        string ToS = null;
        FromS = "<Modulus>";
        ToS = "</Modulus>";

        TMP = Strings.Mid(StringText, Strings.InStr(StringText, FromS) + Strings.Len(FromS), Strings.Len(StringText));
        TMP = Strings.Left(TMP, Strings.InStr(TMP, ToS) - 1);

        functionReturnValue = TMP;

        return functionReturnValue;

    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T03:27:21.147

[`Strings`](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.strings.aspx)是一个 VB.net 类。如果您希望能够使用它，则必须引用`Microsoft.VisualBasic.dll`程序集并使用命名空间。`Microsoft.VisualBasic`

如果您尽可能避免使用 VB.net 方法，那就更好了。

```
public string GetBetween(string str, string start = "<Modulus>", string end = "</Modulus>")
{
    var startIndex = str.IndexOf(start);
    var endIndex = str.LastIndexOf(end);
    if (startIndex == -1 || endIndex == -1 || startIndex > endIndex)
        return str;
    return str.Substring(startIndex + start.Length,
                         str.Length - start.Length - end.Length);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-02-26T10:09:45.590

`using Microsoft.VisualBasic;`在标题中添加

# python - 仅解析唯一行的 fifo 输出

> ID：10925233
> 
> 赞同：-2
> 
> 时间：2012-06-07T03:18:31.043
> 
> 标签：python, fifo

蟒蛇新手。

我正在尝试解析一个奇怪的 fifo 的输出并且无法弄清楚它。基本上我有：

```
fifoopen = open("./foo/fifoA")
while True:
    line = fifoopen.readline()
print line 
```

它工作正常并打印fifo的输出，因为它由另一端的应用程序输入。但是，该应用程序会随机向 fifo 发送重复或三次行。因此，我正在寻找有关如何解析 fifo 的输出以仅打印新的唯一行的建议。

感谢您提供的任何帮助，

-大学教师

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T03:39:37.027

[itertools 文档](http://docs.python.org/library/itertools.html#recipes)为此提供了一个秘诀：

```
def unique_justseen(iterable, key=None):
    "List unique elements, preserving order. Remember only the element just seen."
    # unique_justseen('AAAABBBCCDAABBB') --> A B C D A B
    # unique_justseen('ABBCcAD', str.lower) --> A B C A D
    return imap(next, imap(itemgetter(1), groupby(iterable, key))) 
```

尽管它作为生成器表达式可能更具可读性：

```
def unique_justseen(iterable, key=None):
    return (next(i[0]) for i in groupby(iterable, key)) 
```

您可以像这样使用它：

```
for line in unique_justseen(fifoopen):
   print line 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T03:33:40.253

您是否只对消除*连续*重复感兴趣？还是*有*重复的？如果有任何重复，我建议保留一组以前见过的行；否则，保留看到的最后一行的副本就足够了。在任何一种情况下，如果 (new line) == (old line(s))，请跳过它。

# c# - 我什么时候使用索引器，以及如何知道如何编写它们

> ID：10925234
> 
> 赞同：0
> 
> 时间：2012-06-07T03:18:34.203
> 
> 标签：c#

```
// Indexer for the _accountList
public Account this[int index]
{
    get
    {
        if (index >= 0 && index < _accountList.Length)
            return _accountList[index];
        else
            throw new IndexOutOfRangeException("index is out of range");
    }
} 
```

这些是我做的一些笔记，也是我们正在讨论的内容，但经过研究，我仍然对何时以及如何使用索引器的理论感到模糊。

我的问题只是如何以及何时知道使用索引器？它的唯一目的是检查一个陈述是否正确？在哪里可以为初学者更深入地阅读索引器？最后一行的异常是什么意思？

```
throw new IndexOutOfRangeException("index is out of range"); 
```

是什么`throw`意思？我猜它是在说明如果它不在范围内，那么将新实例抛出范围之外。看起来很枯燥，但我什么时候知道什么时候使用这个例外？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T03:27:28.913

> 我的问题只是如何以及何时知道使用索引器？

在方便并且在访问对象方面有意义时使用索引器。例如，如果您正在实现自定义列表类型，您可能会提供一个索引器以方便、干净、类似列表的访问。如果您正在实现一个表示进程的类，您可能不会实现索引器，因为进程显然不是项目的集合。

> 它的唯一目的是检查一个陈述是否正确？

不，甚至没有接近。关键是获取和/或设置集合中由索引指定的项目。

> 是什么`throw`意思？我猜它是在说明如果它不在范围内，那么将新实例抛出范围之外。看起来很枯燥，但我什么时候知道什么时候使用这个例外？

这与索引器关系不大，而与异常有关。如果您还没有了解异常，请在了解时解决这个问题。但这只是一个边界检查，并不是唯一使用异常的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T03:22:10.180

索引器用作通常通过索引或键访问集合中元素的简写方式。

在您的示例中，索引器允许您`Account`在指定的`index`. 逻辑检查以确保 的值`index`在集合中的项目范围内。

因此，例如，如果`Account`集合中只有 2 个，并且您要求`Account`at 索引 3，则您要求的是一个不存在的项目。因此`IndexOutOfRangeException`.

# php - 任何人都可以推荐一些伟大的任务/项目来推进 MySQL + PHP 知识吗？

> ID：10925237
> 
> 赞同：0
> 
> 时间：2012-06-07T03:19:03.097
> 
> 标签：php, mysql, project

我对两者都很满意，并且我已经使用了自制的身份验证脚本，但我很好奇你们是否可以推荐一个项目或事业或排序来帮助我更好地学习这一点。

我最近得到了一份要求 MySQL 知识的工作，并且我将使用他们的数据库。我对 MySQL 很满意，但我想确保我很舒服，可以难以置信地取悦他们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T03:23:16.953

只需选择您想做的事情并尽力而为。练习是最好的学习方式，你必须处理书本上找不到的东西。

当我开始使用 php 时，我想为一个 java 游戏网站制作一个面板，学习了一点（从未完成过），然后变成了一个雄心勃勃的项目。尝试不同的东西，身份验证，可能是购物车、博客等。类似的东西往往涉及您将来可能需要的大部分东西。

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T03:25:56.670

最有效的方法是在开始之前编写一些你并不完全有信心的东西。尝试在每个项目中学习新的东西——不要以同样的方式做所有的事情。要编码什么？任你想象。只是不要忘记在接受工作时要负责任:)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T03:32:31.750

尝试编写一些简单的东西，例如图书馆图书借阅系统，该系统有多个用户，许多不同作者和年份的书籍位于不同的书架或楼层。让想象力自由驰骋 ：）

# sql-server-2008 - 为 SSAS 多维数据集角色中的成员资格添加维度数据

> ID：10925238
> 
> 赞同：0
> 
> 时间：2012-06-07T03:19:17.887
> 
> 标签：sql-server-2008

我创建了一个具有 5 个维度的多维数据集。在其中一个维度中，属性包含用户 ID。我还创建了一个完全控制的角色，传统上我们在角色的成员选项卡中添加用户 ID 或用户组。但是我想将维度中的属性之一添加为成员资格中的用户 ID。角色应该从该维度属性中获取数据并将该数据用作角色成员身份中的用户 ID 是否可以实现相同的功能？如果是这样，请为我提供解决方案...

提前致谢...............

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:10:03.810

角色定义向导中的成员资格选项卡仅接受域用户 ID/组，因此您不能在此选项卡中使用维度属性/成员。

# c# - 为什么我的所有 XML 都被转义了？

> ID：10925239
> 
> 赞同：0
> 
> 时间：2012-06-07T03:19:30.070
> 
> 标签：c#, php, xml, web-services, nusoap

长期聆听者，第一次来电者。

这就是我正在做的事情......

创建了一个 PHP 网络服务，发送简单的数据类型（如字符串、整数）没问题……返回字符串或整数没有问题。

现在我想以 XML 格式返回数据。

所以我创建了一个 DomDocument 并填写了所有数据......

然后我将它从服务中退回。

在我的客户端，当我将对象加载为 XML 文档时，我收到关于我的根目录格式不正确的错误。

我查看了我的调试，所有“特殊”字符都被转义了。

我做了一个 hack 并将“<”替换为 > 等等。

然后我可以加载结果。

这似乎不对，我应该能够以正确格式返回 XML。

所以我猜这是我定义xml对象的方式？？？

有人可以发布一个定义 xml 对象返回的 PHP 示例吗？

我已经找了好几天了，我找不到从 MySql 中选择数据并将其转换为 XML 然后将 XML 返回给客户端的简单示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T04:29:32.227

```
I did a hack and replaced "<" with > and so on. 
```

**替换 .XML 有害字符**没有任何技巧，这是规则。[在此处](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references)阅读有关此类字符的信息。相反，您可以使用以下代码：

```
function replace_characters_for_xml(&$str)
{
   $str = str_replace("&","&amp;",$str);
   $str = str_replace(">","&gt;",$str);
   $str = str_replace("<","&lt;",$str);
   $str = str_replace("'","&apos;",$str);
   $str = str_replace('"',"&quot;",$str);
}
...
replace_characters_for_xml($string); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T00:18:02.307

我找到了一个不同的代码示例，用于将 MySql 数据存储到 XML 中。结果，这对我正在寻找的东西起到了作用。

[使用 PHP DOM 从 MySQL 数据创建 XML 文件](https://stackoverflow.com/questions/10009029/using-php-dom-to-create-xml-files-from-mysql-data)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T08:03:37.097

> 所以我创建了一个 DomDocument 并填写了所有数据......

我怀疑你在这里所做的一切都是错误的。

# excel - 从多个工作表中检索多行

> ID：10925243
> 
> 赞同：0
> 
> 时间：2012-06-07T03:19:48.480
> 
> 标签：excel, pivot-table, vlookup

我想知道解决这个问题的最佳方法。我想根据 customerid 搜索多张数据，并从每张表中检索数据，例如客户地址、客户订单、客户个人信息等。

我头顶的选项是...

1.  按客户过滤数据透视表，但我会自动为所有工作表执行此操作吗？
2.  根据客户搜索词将数据查找到一张表中
3.  有没有办法使用 SQL 类型的命令从工作表中查询数据并显示？

我想检索类似于 SQL 查询但不使用宏。我看不到以自动方式从这些不同表中检索数据的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T05:15:27.810

当您为同一个键设置多个数据集时（例如，10 个订单行对应 1 个 cust_id），Vlookup 基本上会崩溃，除非您制定某种复杂的公式来获取所有项目并预测您需要多少。

对于此类问题，我使用了 2 种解决方案：

1：同一工作表上的多个数据透视表，每个都链接到各自的表。不幸的是，用户必须根据需要为每个过滤器选择相同的过滤器。这仍然是最干净的解决方案，我推荐它。

2：制作一个将所有其他表粘合在一起的翻译表（表）。每个单元格只指向另一张纸。转动这个

例如，如果您将表 1 作为 ID、NAME、ADDRESS 并将表 2 作为 ID、ORDER，您最终可能会得到一张巨大的公式表：

A1 as =Names!A1 A2 as = Names!A2

B1 as =Vlookup(Orders!A1...)

根据需要填写。使用此表上的公式根据需要链接数据。您基本上是在模拟 SQL 表连接，是的，这很痛苦，但可以做到！=) 如果这对您的数据集有效，理论上您可以制作 1 个大型数据透视表。

# asp.net-mvc-3 - 根据所选控制器放置 CSS 类

> ID：10925244
> 
> 赞同：2
> 
> 时间：2012-06-07T03:19:49.447
> 
> 标签：asp.net-mvc-3

如何根据所选控制器将*class="active"*放入其中？`<li>`

```
<li  ><a href="@Url.Action("index", "Home")">Home</a></li>
<li  ><a href="@Url.Action("index", "Car")">Cars</a></li> 
```

祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T03:57:36.497

我通常会创建一个操作链接 html 帮助程序来完成此任务。请注意，我将链接本身标记为“已选择”而不是列表项。

```
public static class ActionLinkHelpers
{
    public static MvcHtmlString SelectedActionLink(this HtmlHelper helper, string linkText, string actionName, string controllerName)
    {
        var controller = (string) helper.ViewContext.RouteData.Values["controller"];
        if (string.Compare(controller, controllerName, StringComparison.InvariantCultureIgnoreCase) == 0)
        {
            return helper.ActionLink(linkText, actionName, controllerName, null, new { Class = "selected" }); 
        }

        return helper.ActionLink(linkText, actionName, controllerName);
    }
} 
```

在项目中设置操作链接帮助程序后，您的列表将如下所示：

```
<li>@Html.SelectedActionLink("Home", "index", "Home")</li>
<li>@Html.SelectedActionLink("Cars", "index", "Car")</li> 
```

编辑：

为了使用自定义助手，MVC 必须了解它。例如，将一个新文件夹添加到您的项目“HtmlHelpers”并将此类放在其中。从那里你需要添加一行到`/Views/Web.config`：

```
<pages pageBaseType="System.Web.Mvc.WebViewPage">
  <namespaces>
    <add namespace="YourNameSpace.HtmlHelpers"/>
  </namespaces>
</pages> 
```

# python - 需要 MAMP 才能使用（旧版本的）Python

> ID：10925245
> 
> 赞同：0
> 
> 时间：2012-06-07T03:20:01.067
> 
> 标签：python, macos, mamp

我的一个网站需要 python 和cherrypy。在本地，我需要使用 MAMP 运行所有这些。除了依赖 Python 的功能外，我的网站在 MAMP 中运行。我需要运行 python 2.5。我的操作系统版本是 2.7。

我该如何设置？除了 2.7 和 2.6 之外，我似乎还安装了 2.5

```
which python
/usr/bin/python

which python2.5
/usr/bin/python2.5 
```

但 usr/bin/python2.5 是别名：System/Library/Frameworks/Python.framework/Versions/2.5/bin/python2.5

如何在不破坏 vers OSX 需求的情况下使 python2.5 可用于 MAMP？

这是一个 drupal 站点，MAMP 正在处理与 php 相关的所有内容，也许我错误地认为它需要与站点的 python 脚本有任何关系。当我阅读更多关于cherrypy的信息时，似乎cherrypy服务于python脚本，并且我确实运行了cherrypy（localhost：8080测试仍然有效），所以也许我需要做的就是确保使用python2.5而不是默认值? (2.7)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T16:12:36.027

你有正确的想法。你肯定想单独留下 OS python 版本。或者您可能会破坏多个依赖项。我们在启动时在 rc.local 脚本中启动我们的cherrypy 实例。您可以在此处指定执行cherrypy 应用程序时要使用的python 版本。

我们的 rc.local 脚本如下所示：

```
/opt/Python-3.2/python /var/www/html/appname/webapp.py > stdout.log & 
```

# c# - ASP.NET MVC 的最佳存储库模式

> ID：10925257
> 
> 赞同：64
> 
> 时间：2012-06-07T03:21:12.550
> 
> 标签：c#, asp.net-mvc, repository, repository-pattern

我最近学习了 ASP.NET MVC（我喜欢它）。我正在与一家使用依赖注入在每个请求中加载存储库实例的公司合作，并且我熟悉使用该存储库。

但现在我正在编写自己的几个 MVC 应用程序。我不完全了解我的公司使用存储库的方式和原因，我正在尝试确定实现数据访问的最佳方法。

我正在使用 C# 和实体框架（所有最新版本）。

我看到了处理数据访问的三种通用方法。

1.  每次访问数据时，使用语句中的常规数据库上下文。这很简单，而且工作正常。但是，如果两个位置需要在一个请求中读取相同的数据，则必须读取两次数据。（每个请求只有一个存储库，两个地方都将使用相同的实例，我知道第二次读取只会返回第一次读取的数据。）

2.  典型的[存储库模式](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)。由于我不明白的原因，这种典型的模式涉及为数据库中使用的每个表创建一个包装类。这对我来说似乎是错误的。事实上，由于它们也是作为接口实现的，所以从技术上讲，我会为每个表创建两个包装类。EF 为我创建表格。我不相信这种方法有意义。

3.  还有一个[通用存储库模式](http://www.tugberkugurlu.com/archive/generic-repository-pattern-entity-framework-asp-net-mvc-and-unit-testing-triangle)，其中创建了一个存储库类来服务所有实体对象。这对我来说更有意义。但这对其他人有意义吗？上面的链接是最好的方法吗？

我很想从其他人那里得到一些关于这个话题的意见。您是在编写自己的存储库，使用上述其中之一，还是在做一些完全不同的事情。请分享。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-07T04:04:15.027

我使用了#2 和#3 的混合，但如果可能的话，我更喜欢严格的通用存储库（甚至比#3 链接中建议的更严格）。#1 不好，因为它在单元测试中表现不佳。

如果您有一个较小的域或需要限制您的域允许查询的实体，我认为定义实体特定存储库接口的 #2- 或 #3 本身实现通用存储库 - 是有意义的。但是，我发现为我要查询的每个实体编写接口和具体实现既累人又没有必要。有什么好处`public interface IFooRepository : IRepository<Foo>`（同样，除非我需要将开发人员限制在一组允许的聚合根上）？

我只是定义了我的通用存储库接口，使用`Add`, `Remove`, `Get`, `GetDeferred`,`Count`和`Find`方法（Find 返回一个`IQueryable`允许 LINQ 的接口），创建一个具体的通用实现，并称之为一天。我严重依赖`Find`LINQ。如果我需要多次使用特定查询，我会使用扩展方法并使用 LINQ 编写查询。

这涵盖了我 95% 的持久性需求。如果我需要执行一些一般情况下无法完成的持久性操作，我会使用自制的`ICommand`API。例如，假设我正在使用 NHibernate，并且我需要在我的域中执行一个复杂的查询，或者我可能需要执行一个批量命令。API 大致如下所示：

```
// marker interface, mainly used as a generic constraint
public interface ICommand
{
}

// commands that return no result, or a non-query
public interface ICommandNoResult : ICommand
{
   void Execute();
}

// commands that return a result, either a scalar value or record set
public interface ICommandWithResult<TResult> : ICommand
{
   TResult Execute();
}

// a query command that executes a record set and returns the resulting entities as an enumeration.
public interface IQuery<TEntity> : ICommandWithResult<IEnumerable<TEntity>>
{
    int Count();
}

// used to create commands at runtime, looking up registered commands in an IoC container or service locator
public interface ICommandFactory
{
   TCommand Create<TCommand>() where TCommand : ICommand;
} 
```

现在我可以创建一个接口来表示一个特定的命令。

```
public interface IAccountsWithBalanceQuery : IQuery<AccountWithBalance>
{
    Decimal MinimumBalance { get; set; }
} 
```

我可以创建一个具体的实现并使用原始 SQL、NHibernate HQL 等等，并将其注册到我的服务定位器中。

现在在我的业务逻辑中，我可以执行以下操作：

```
var query = factory.Create<IAccountsWithBalanceQuery>();
query.MinimumBalance = 100.0;

var overdueAccounts = query.Execute(); 
```

您还可以使用规范模式`IQuery`来构建有意义的、用户输入驱动的查询，而不是拥有一个具有数百万令人困惑的属性的界面，但这假设您不会发现规范模式本身就令人困惑;)。

最后一个难题是您的存储库何时需要执行特定的存储库前后操作。现在，您可以非常轻松地为特定实体创建通用存储库的实现，然后覆盖相关方法并执行您需要做的事情，并更新您的 IoC 或服务定位器注册并完成它。

但是，有时这种逻辑是跨领域的，并且难以通过覆盖存储库方法来实现。所以我创建了`IRepositoryBehavior`，它基本上是一个事件接收器。（以下只是我脑海中的粗略定义）

```
public interface IRepositoryBehavior
{
    void OnAdding(CancellableBehaviorContext context);
    void OnAdd(BehaviorContext context);

    void OnGetting(CancellableBehaviorContext context);
    void OnGet(BehaviorContext context);

    void OnRemoving(CancellableBehaviorContext context);
    void OnRemove(BehaviorContext context);

    void OnFinding(CancellableBehaviorContext context);
    void OnFind(BehaviorContext context);

    bool AppliesToEntityType(Type entityType);
} 
```

现在，这些行为可以是任何东西。审计、安全检查、软删除、强制域约束、验证等。我创建一个行为，将其注册到 IoC 或服务定位器，并修改我的通用存储库以接收已注册`IRepositoryBehavior`的集合，并检查每个行为当前存储库类型并将操作包装在每个适用行为的前/后处理程序中。

这是一个示例软删除行为（软删除意味着当有人要求删除一个实体时，我们只是将其标记为已删除，因此它不能再次返回，但实际上永远不会被物理删除）。

```
public SoftDeleteBehavior : IRepositoryBehavior
{
   // omitted

   public bool AppliesToEntityType(Type entityType)
   {
       // check to see if type supports soft deleting
       return true;
   }

   public void OnRemoving(CancellableBehaviorContext context)
   {
        var entity = context.Entity as ISoftDeletable;
        entity.Deleted = true; // when the NHibernate session is flushed, the Deleted column will be updated

        context.Cancel = true; // set this to true to make sure the repository doesn't physically delete the entity.
   }
} 
```

是的，这基本上是 NHibernate 事件侦听器的简化和抽象实现，但这就是我喜欢它的原因。A）我可以在不将 NHibernate 带入图片的情况下对行为进行单元测试 B）我可以在 NHibernate 之外使用这些行为（比如存储库是包装 REST 服务调用的客户端实现） C）NH 的事件侦听器可能是一个真正的麻烦;)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-07T03:37:30.650

我会推荐 1 号，但有一些注意事项。2 号似乎是最常见的，但根据我的经验，存储库最终只是一个用于查询的杂乱垃圾场。如果您使用通用存储库 (2)，它只是 DBContext 的一个薄包装器，除非您打算更改 ORM（坏主意），否则真的有点毫无意义。

但是当我直接访问 DBContext 时，我更喜欢使用管道和过滤器模式，这样你就可以重用通用逻辑，比如

```
items = DBContext.Clients
    .ByPhoneNumber('1234%')
    .ByOrganisation(134); 
```

ByPhoneNumber 和 By Organization 只是扩展方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-13T06:15:54.963

**在这里，我们选择 Asp.Net MVC 中的最佳存储库模式：**

*存储库模式在应用程序的数据层和域层之间添加了一个分离层。它还使应用程序的数据访问部分具有更好的可测试性。*

**数据库工厂（IDatabaseFactory.cs）：**

```
public interface IDatabaseFactory : IDisposable
{
    Database_DBEntities Get();
} 
```

**数据库工厂实现（DatabaseFactory.cs）：**

```
public class DatabaseFactory : Disposable, IDatabaseFactory
{
    private Database_DBEntities dataContext;
    public Database_DBEntities Get()
    {
        return dataContext ?? (dataContext = new Database_DBEntities());
    }

    protected override void DisposeCore()
    {
        if (dataContext != null)
            dataContext.Dispose();
    }
} 
```

**基本接口（IRepository.cs）：**

```
public interface IRepository<T> where T : class
{
    void Add(T entity);
    void Update(T entity);
    void Detach(T entity);
    void Delete(T entity);
    T GetById(long Id);
    T GetById(string Id);
    T Get(Expression<Func<T, bool>> where);
    IEnumerable<T> GetAll();
    IEnumerable<T> GetMany(Expression<Func<T, bool>> where);
    void Commit();
} 
```

**抽象类（Repository.cs）：**

```
public abstract class Repository<T> : IRepository<T> where T : class
{
    private Database_DBEntities dataContext;
    private readonly IDbSet<T> dbset;
    protected Repository(IDatabaseFactory databaseFactory)
    {
        DatabaseFactory = databaseFactory;
        dbset = DataContext.Set<T>();
    }

    /// <summary>
    /// Property for the databasefactory instance
    /// </summary>
    protected IDatabaseFactory DatabaseFactory
    {
        get;
        private set;
    }

    /// <summary>
    /// Property for the datacontext instance
    /// </summary>
    protected Database_DBEntities DataContext
    {
        get { return dataContext ?? (dataContext = DatabaseFactory.Get()); }
    }

    /// <summary>
    /// For adding entity
    /// </summary>
    /// <param name="entity"></param>
    public virtual void Add(T entity)
    {
        try
        {
            dbset.Add(entity);
            //  dbset.Attach(entity);
            dataContext.Entry(entity).State = EntityState.Added;
            int iresult = dataContext.SaveChanges();
        }
        catch (UpdateException ex)
        {
        }
        catch (DbUpdateException ex) //DbContext
        {
        }
        catch (Exception ex)
        {
            throw ex;
        }
    }

    /// <summary>
    /// For updating entity
    /// </summary>
    /// <param name="entity"></param>
    public virtual void Update(T entity)
    {
        try
        {
            // dbset.Attach(entity);
            dbset.Add(entity);
            dataContext.Entry(entity).State = EntityState.Modified;
            int iresult = dataContext.SaveChanges();
        }
        catch (UpdateException ex)
        {
            throw new ApplicationException(Database_ResourceFile.DuplicateMessage, ex);
        }
        catch (DbUpdateException ex) //DbContext
        {
            throw new ApplicationException(Database_ResourceFile.DuplicateMessage, ex);
        }
        catch (Exception ex) {
            throw ex;
        }
    }

    /// <summary>
    /// for deleting entity with class 
    /// </summary>
    /// <param name="entity"></param>
    public virtual void Delete(T entity)
    {
        dbset.Remove(entity);
        int iresult = dataContext.SaveChanges();
    }

    //To commit save changes
    public void Commit()
    {
        //still needs modification accordingly
        DataContext.SaveChanges();
    }

    /// <summary>
    /// Fetches values as per the int64 id value
    /// </summary>
    /// <param name="id"></param>
    /// <returns></returns>
    public virtual T GetById(long id)
    {
        return dbset.Find(id);
    }

    /// <summary>
    /// Fetches values as per the string id input
    /// </summary>
    /// <param name="id"></param>
    /// <returns></returns>
    public virtual T GetById(string id)
    {
        return dbset.Find(id);
    }

    /// <summary>
    /// fetches all the records 
    /// </summary>
    /// <returns></returns>
    public virtual IEnumerable<T> GetAll()
    {
        return dbset.AsNoTracking().ToList();
    }

    /// <summary>
    /// Fetches records as per the predicate condition
    /// </summary>
    /// <param name="where"></param>
    /// <returns></returns>
    public virtual IEnumerable<T> GetMany(Expression<Func<T, bool>> where)
    {
        return dbset.Where(where).ToList();
    }

    /// <summary>
    /// 
    /// </summary>
    /// <param name="entity"></param>
    public void Detach(T entity)
    {
        dataContext.Entry(entity).State = EntityState.Detached;
    }

    /// <summary>
    /// fetches single records as per the predicate condition
    /// </summary>
    /// <param name="where"></param>
    /// <returns></returns>
    public T Get(Expression<Func<T, bool>> where)
    {
        return dbset.Where(where).FirstOrDefault<T>();
    }
} 
```

**如何在控制器中访问此存储库模式：**

**1.您有用户模型：**

```
public partial class User
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

**2\. 现在你必须创建你的 UserModel 的 Repository 类**

```
public class UserRepository : Repository<User>, IUserRepository
{
    private Database_DBEntities dataContext;

    protected IDatabaseFactory DatabaseFactory
    {
        get;
        private set;
    }

    public UserRepository(IDatabaseFactory databaseFactory)
        : base(databaseFactory)
    {
        DatabaseFactory = databaseFactory;
    }

    protected Database_DBEntities DataContext
    {
        get { return dataContext ?? (dataContext = DatabaseFactory.Get()); }
    }

    public interface IUserRepository : IRepository<User>
    { 
    }
} 
```

**3\. 现在您必须使用所有 CRUD 方法创建用户服务接口 (IUserService.cs)：**

```
public interface IUserService
{
    #region User Details 
    List<User> GetAllUsers();
    int SaveUserDetails(User Usermodel);
    int UpdateUserDetails(User Usermodel);
    int DeleteUserDetails(int Id);
    #endregion
} 
```

**4\. 现在您必须使用所有 CRUD 方法创建用户服务接口 (UserService.cs)：**

```
public class UserService : IUserService
{
    IUserRepository _userRepository;
    public UserService() { }
    public UserService(IUserRepository userRepository)
    {
        this._userRepository = userRepository;
    }

    public List<User> GetAllUsers()
    {
        try
        {
            IEnumerable<User> liUser = _userRepository.GetAll();
            return liUser.ToList();
        }
        catch (Exception ex)
        {
            throw ex;
        }
    }

    /// <summary>
    /// Saves the User details.
    /// </summary>
    /// <param name="User">The deptmodel.</param>
    /// <returns></returns>
    public int SaveUserDetails(User Usermodel)
    {
        try
        {
            if (Usermodel != null)
            {
                _userRepository.Add(Usermodel);
                return 1;
            }
            else
                return 0;
        }
        catch
        {
            throw;
        }
   }

   /// <summary>
   /// Updates the User details.
   /// </summary>
   /// <param name="User">The deptmodel.</param>
   /// <returns></returns>
   public int UpdateUserDetails(User Usermodel)
   {
       try
       {
           if (Usermodel != null)
           {
               _userRepository.Update(Usermodel);
               return 1;
           }
           else
               return 0;
       }
       catch
       {
           throw;
       }
   }

   /// <summary>
   /// Deletes the User details.
   /// </summary>
   /// <param name="Id">The code identifier.</param>
   /// <returns></returns>
   public int DeleteUserDetails(int Id)
   {
       try
       {
           User Usermodel = _userRepository.GetById(Id);
           if (Usermodel != null)
           {
               _userRepository.Delete(Usermodel);
               return 1;
           }
           else
               return 0;
       }
       catch
       {
           throw;
       }
   }
} 
```

**5\. 现在您已为您的存储库模式设置了所有内容，您可以访问用户控制器中的所有数据：**

```
//Here is the User Controller 
public class UserProfileController : Controller
{
    IUserService _userservice;
    public CustomerProfileController(IUserService userservice)
    {
        this._userservice = userservice;
    }

    [HttpPost]
    public ActionResult GetAllUsers(int id)
    {
        User objUser=new User();

        objUser = _userservice.GetAllUsers().Where(x => x.Id == id).FirstOrDefault();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-16T11:00:10.417

[URF - Unit of Work & (extensible/generic) Repositories Framework](https://genericunitofworkandrepositories.codeplex.com/)有一个现成的解决方案。它将为您节省大量时间。他们实现了一个通用存储库（也有一个异步存储库）。为了扩展任何存储库，他们使用了这样的扩展：

```
 public static decimal GetCustomerOrderTotalByYear(this IRepository<Customer> repository, string customerId, int year)
    {
        return repository
            .Queryable()
            .Where(c => c.CustomerID == customerId)
            .SelectMany(c => c.Orders.Where(o => o.OrderDate != null && o.OrderDate.Value.Year == year))
            .SelectMany(c => c.OrderDetails)
            .Select(c => c.Quantity*c.UnitPrice)
            .Sum();
    } 
```

根据您的项目，像 QueryObject 这样的类可能会过度工作，但总的来说，它是帮助您启动和运行的好解决方案。

# jquery - jquery 在没有 http:// 的情况下强制 http://

> ID：10925259
> 
> 赞同：0
> 
> 时间：2012-06-07T03:21:32.010
> 
> 标签：jquery

所以我试图强制输入到搜索框中的 url 将“http://”强加给它们，因为没有它 url 就无法工作。

```
var mySite = $('.search').val();

if (mySite -="http://"){
   alert('http://').append(mySite);
}; 
```

抱歉，如果这段代码非常错误，我只是想在这里讨论一下这个想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T03:24:15.763

首先获取代表搜索框的 jQuery 对象。然后检查它的值是否以`http://`. 如果不是，则更改该值以使其生效。

```
var search = $('.search');

if(search.val().indexOf('http://') != 0) {
    search.val('http://'+search.val());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T03:24:02.300

如果你想要不区分大小写

```
$('.search').val(function(_,oldValue){
  return /^http:/i.test(oldValue) ? oldValue : ('http://'+oldValue);
}); 
```

…或者你可以

```
$('.search').val(function(_,oldValue){
  return oldValue.indexOf('http:') ? ('http://'+oldValue) : oldValue;
}); 
```

# c# - 添加许多列表

> ID：10925261
> 
> 赞同：0
> 
> 时间：2012-06-07T03:21:58.890
> 
> 标签：c#

如果我有 100 个列表（例如 x1 到 x100），是否有更好的方法来表达最后一行代码？

```
 var x1 = new List<int>() { 75 };
        var x2 = new List<int>() { 95, 64 };
        var x3 = new List<int>() { 17, 47, 82 };
        var x4 = new List<int>() { 18, 35, 87, 10 };
        var x5 = new List<int>() { 20, 04, 82, 47, 65 };
        var x6 = new List<int>() { 19, 01, 23, 75, 03, 34 };
        var x7 = new List<int>() { 88, 02, 77, 73, 07, 63, 67 };
        //etc..
        var listOfListOfInts = new List<List<int>>() { x1, x2, x3, x4, x5, x6, x7, x8, x9, x10, x11, x12, x13, x14, x15 }; 
```

可能是一个字典和一个 for 循环来引用所有 x1..100。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T03:28:37.183

只要`x1`其他地方没有引用 etc.，然后写：

```
var listOfListOfInts = new List<List<int>>()
{
    new List<int>() { 75 },
    new List<int>() { 95, 64 },
    //etc.
}; 
```

实际上，您*不需要*在其他地方引用单个变量，因为它与例如`listOfListOfInts[0]`一样好。`x1`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T03:30:38.523

你真的需要这些类型`List<T>`吗？看起来您正在设置预初始化数据。如果你永远不会改变这些“列表”的长度，你可以使用数组来代替；语法更紧凑：

```
var listOfListOfInts = new[] {
    new[] { 75 },
    new[] { 95, 64 },
    new[] { 17, 47, 82 },
    new[] { 18, 35, 87, 10 },
    new[] { 20, 04, 82, 47, 65 },
    new[] { 19, 01, 23, 75, 03, 34 },
    new[] { 88, 02, 77, 73, 07, 63, 67 },
    // ...
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T04:20:04.413

也许我把事情复杂化了，但你可以做类似的事情

```
public interface IClass1
{
    IList<IList<int>> ListList { get; set; }
    void AddList(List<int> nList);
}

public class Class1 : IClass1
{
    public IList<IList<int>> ListList { get; set; }

    public void AddList(List<int> nList)
    {
        ListList.Add(nList);
    }
} 
```

然后像这样使用它：

```
public class Create1
{
    public Create1()
    {
        IClass1 iClass1 = new Class1();
        iClass1.AddList(new List<int>() { 75 });
    }
} 
```

# jquery-mobile - jQuery 移动 div 不更新

> ID：10925262
> 
> 赞同：0
> 
> 时间：2012-06-07T03:21:59.570
> 
> 标签：jquery-mobile

我正在使用 jQuery 1.6.4 和 jQuery Mobile 1.1.0。

做的时候：

```
$('#mydiv').html(myobjectcontaininghtml); 
```

只有大约 5% 的时间 div 实际更新以显示新的 html。有谁知道为什么会发生这种情况？100% 的时间使用电脑工作。在手机上大部分时间 div 内容不会改变。

例如，我点击一个链接，该链接使用上面的代码调用一个函数，并且 div 的内容保持不变。我不断点击链接，最终它确实改变了。

注意：我看到其他帖子说要添加 .page() 或 .trigger('create')。两者都没有帮助。

# php - 安全地实施“可配置”连接系统

> ID：10925263
> 
> 赞同：5
> 
> 时间：2012-06-07T03:22:02.067
> 
> 标签：php, mysql, join, pdo

**背景**

你好，我正在用 PHP 和 MySQL 开发一个实验/教育工具。我是 SQL 新手，但我想从一开始就以正确的方式做事。我对所有变量替换使用 PDO 准备好的语句，并尽可能地反引号（因此，据我了解，它不能移植到非 MySQL 数据库）。关于我的问题，我有一个关于如何进行的想法，但是我需要几个小时来实现（我什至对 SQL 的语法都是新手），所以同时我想我会先创建一个问题以防有人大喊：“这不是办法！” 并节省我数小时的精力。

**问题**

我想创建一个用户可以从下拉菜单中选择的界面：

1.  一张桌子`A`，
2.  该表上的一个或多个字段，例如`A.x`and `A.y`,
3.  一张桌子`B`，
4.  该表上的一个或多个字段，例如`B.z`and `B.y`,

并且在提交后，代码将执行内部连接，分别匹配每个字段，例如`A.x = B.z`、`A.y = B.y`等，并返回所有匹配的行。

我的计划是简单地生成一条`INNER JOIN`SQL 语句，遍历字段并插入占位符 ( `?`)，绑定各自的参数，最后执行语句。

有没有更简单的方法来做到这一点？有没有更好的方法来做到这一点？这会以某种方式被利用吗？

非常感谢，提前。如果在我完成时没有人回应（怀疑），我将发布我的解决方案。

**杂项。**

假设我将验证

1.  用户在 和 之间选择相等数量的`A`字段`B`，
2.  字段和表存在，
3.  等等

并且字段名称不必相同：它们将按顺序匹配。（请指出我可能不知道的任何其他细节！）

最终，目标是将这些选择保存在“设置”表中。实际上，用户创建了他们希望每次返回时看到的“视图”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T06:09:11.520

你做的非常正确，以至于我真的感到内疚，指出你做错了什么！:)

您只能使用准备好的语句来参数化字段值，而不是 SQL 标识符，例如列名或表名。因此，您将无法通过准备好的语句参数将等传递到您的条件中：您`A.x`必须`B.z`做*一些*感觉非常错误的事情，并将它们直接连接到您的 SQL 字符串中。`JOIN`

 *然而，一切都没有丢失。在一些模糊的偏好顺序中，您可以：

1.  向用户提供一个选项列表，您随后可以从中重新组装 SQL：

    ```
    <select name="join_a">
      <option value="1">x</option>
      <option value="2">y</option>
    </select>
    <select name="join_b">
      <option value="1">z</option>
      <option value="2">y</option>
    </select> 
    ```

    然后你的表单处理程序：

    ```
    switch ($_POST['join_a']) {
      case 1:  $acol = 'x'; break;
      case 2:  $acol = 'y'; break;
      default: die('Invalid input');
    }
    switch ($_POST['join_b']) {
      case 1:  $bcol = 'z'; break;
      case 2:  $bcol = 'y'; break;
      default: die('Invalid input');
    }

    $sql .= "FROM A JOIN B ON A.$acol = B.$bcol"; 
    ```

    这种方法的优点是，在不损害 PHP（在这种情况下，您将比 SQL 注入更担心）的情况下，任意 SQL 绝对*无法*进入您的 RDBMS。

2.  确保用户输入与预期值之一匹配：

    ```
    <select name="join_a">
      <option>x</option>
      <option>y</option>
    </select>
    <select name="join_b">
      <option>z</option>
      <option>y</option>
    </select> 
    ```

    然后你的表单处理程序：

    ```
    if (!in_array($_POST['join_a'], ['x', 'y'])
     or !in_array($_POST['join_b'], ['z', 'y']))
       die('Invalid input');

    $sql .= "FROM A JOIN B ON A.$_POST[join_a] = B.$_POST[join_b]"; 
    ```

    这种方法依赖于 PHP 的`in_array`安全功能（并且还向用户公开了您的基础列名，但考虑到您的应用程序，我怀疑这是一个问题）。

3.  执行一些输入清理，例如：

    ```
    mb_regex_encoding($charset); // charset of database connection
    $sql .= 'FROM A JOIN B ON A.`' . mb_ereg_replace('`', '``', $_POST['join_a']) . '`'
                        . ' = B.`' . mb_ereg_replace('`', '``', $_POST['join_b']) . '`' 
    ```

    虽然我们在这里引用用户输入并替换用户试图逃避该引用的任何尝试，但这种方法可能充满各种缺陷和漏洞（在 PHP 的`mb_ereg_replace`函数或 MySQL 对引用标识符中特制字符串的处理中）。

    如果完全可以使用上述方法之一来避免将用户定义的字符串完全插入到一个人的 SQL 中，那会*好得多。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T06:06:48.760

假设用户输入仅限于选择表格和字段（即没有附加条件），您应该可以使用您的方法；听起来不错 ：）

我想补充的一件事是某些连接比其他连接更好。例如，使用它们的主键（或其他索引）连接两个表将比需要全表扫描的两个不相关的列执行得更好。

这一切首先取决于桌子有多大。对于少于几千条记录，您应该没问题；任何超出认真考虑的事情都已到位:)*

# scala - 在 scala 中使用重载的构造函数定义自己的异常

> ID：10925268
> 
> 赞同：37
> 
> 时间：2012-06-07T03:23:14.360
> 
> 标签：scala, exception

在 java 中的异常至少有这四个构造函数：

```
Exception() 
Exception(String message) 
Exception(String message, Throwable cause) 
Exception(Throwable cause) 
```

如果你想定义你自己的扩展，你只需要声明一个后代异常并实现每个所需的构造函数调用对应的超级构造函数

你怎么能在scala中实现同样的目标？

到目前为止，我看到了[这篇文章](https://lizdouglass.wordpress.com/2010/12/15/scala-multiple-constructors/)和这个[SO 答案](https://stackoverflow.com/a/3300046/47633)，但我怀疑必须有一种更简单的方法来实现这样一个常见的事情

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-06-07T03:46:07.367

的默认值为`cause`空。因为`message`它要么是要么为`cause.toString()`空：

```
val e1 = new RuntimeException()

e.getCause
// res1: java.lang.Throwable = null

e.getMessage
//res2: java.lang.String = null

val cause = new RuntimeException("cause msg")
val e2 = new RuntimeException(cause)

e.getMessage()
//res3: String = java.lang.RuntimeException: cause msg 
```

所以你可以只使用默认值：

```
class MyException(message: String = null, cause: Throwable = null) extends
  RuntimeException(MyException.defaultMessage(message, cause), cause)

object MyException {
  def defaultMessage(message: String, cause: Throwable) =
    if (message != null) message
    else if (cause != null) cause.toString()
    else null
}

// usage:
new MyException(cause = myCause)
// res0: MyException = MyException: java.lang.RuntimeException: myCause msg 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-07T03:46:02.523

嗯，这是迄今为止我发现的最好的

```
class MissingConfigurationException private(ex: RuntimeException) extends RuntimeException(ex) {
  def this(message:String) = this(new RuntimeException(message))
  def this(message:String, throwable: Throwable) = this(new RuntimeException(message, throwable))
}

object MissingConfigurationException {
  def apply(message:String) = new MissingConfigurationException(message)
  def apply(message:String, throwable: Throwable) = new MissingConfigurationException(message, throwable)
} 
```

这样您就可以使用“new MissingConfigurationException”或伴随对象中的应用方法

无论如何，我仍然很惊讶没有更简单的方法来实现它

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-02T13:32:49.243

您可以使用`Throwable.initCause`.

```
class MyException (message: String, cause: Throwable) 
  extends RuntimeException(message) {
    if (cause != null)
      initCause(cause)

    def this(message: String) = this(message, null)  
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-10-23T22:25:28.077

对我来说，似乎存在三种不同的需求，它们之间存在动态的张力：

1.  扩展器的便利性`RuntimeException`；即为创建一个后代而编写的最少代码`RuntimeException`
2.  客户感知的易用性；即在呼叫站点编写的最少代码
3.  客户希望避免将可怕的 Java 泄漏`null`到他们的代码中

如果一个人不关心数字 3，那么[这个答案](https://stackoverflow.com/a/10925402/501113)（与这个答案相似）似乎非常简洁。

但是，如果在尝试尽可能接近数字 1 和 2 的同时将数字 3 赋值，则下面的解决方案有效地将 Java`null`泄漏封装到您的 Scala API 中。

```
class MyRuntimeException (
  val optionMessage: Option[String],
  val optionCause: Option[Throwable],
  val isEnableSuppression: Boolean,
  val isWritableStackTrace: Boolean
) extends RuntimeException(
  optionMessage match {
    case Some(string) => string
    case None => null
  },
  optionCause match {
    case Some(throwable) => throwable
    case None => null
  },
  isEnableSuppression,
  isWritableStackTrace
) {
  def this() =
    this(None, None, false, false)
  def this(message: String) =
    this(Some(message), None, false, false)
  def this(cause: Throwable) =
    this(None, Some(cause), false, false)
  def this(message: String, cause: Throwable) =
    this(Some(message), Some(cause), false, false)
} 
```

如果您想消除必须使用实际使用的`new`位置`MyRuntimeException`，请添加此伴随对象（它只是将所有应用调用转发到现有的“主”类构造函数）：

```
object MyRuntimeException {
  def apply: MyRuntimeException =
    MyRuntimeException()
  def apply(message: String): MyRuntimeException =
    MyRuntimeException(optionMessage = Some(message))
  def apply(cause: Throwable): MyRuntimeException =
    MyRuntimeException(optionCause = Some(cause))
  def apply(message: String, cause: Throwable): MyRuntimeException =
    MyRuntimeException(optionMessage = Some(message), optionCause = Some(cause))
  def apply(
    optionMessage: Option[String] = None,
    optionCause: Option[Throwable] = None,
    isEnableSuppression: Boolean = false,
    isWritableStackTrace: Boolean = false
  ): MyRuntimeException =
    new MyRuntimeException(
      optionMessage,
      optionCause,
      isEnableSuppression,
      isWritableStackTrace
    )
} 
```

`new`就个人而言，我更喜欢在尽可能多的代码中实际抑制运算符的使用，以简化未来可能的重构。如果所说的重构对工厂模式有很强的影响，这将特别有用。我的最终结果虽然更冗长，但对于客户使用来说应该非常好。

```
object MyRuntimeException {
  def apply: MyRuntimeException =
    MyRuntimeException()
  def apply(message: String): MyRuntimeException =
    MyRuntimeException(optionMessage = Some(message))
  def apply(cause: Throwable): MyRuntimeException =
    MyRuntimeException(optionCause = Some(cause))
  def apply(message: String, cause: Throwable): MyRuntimeException =
    MyRuntimeException(optionMessage = Some(message), optionCause = Some(cause))
  def apply(
    optionMessage: Option[String] = None,
    optionCause: Option[Throwable] = None,
    isEnableSuppression: Boolean = false,
    isWritableStackTrace: Boolean = false
  ): MyRuntimeException =
    new MyRuntimeException(
      optionMessage,
      optionCause,
      isEnableSuppression,
      isWritableStackTrace
    )
}

class MyRuntimeException private[MyRuntimeException] (
  val optionMessage: Option[String],
  val optionCause: Option[Throwable],
  val isEnableSuppression: Boolean,
  val isWritableStackTrace: Boolean
) extends RuntimeException(
  optionMessage match {
    case Some(string) => string
    case None => null
  },
  optionCause match {
    case Some(throwable) => throwable
    case None => null
  },
  isEnableSuppression,
  isWritableStackTrace
) 
```

* * *

* * *

**探索更复杂的 RuntimeException 模式：**

从最初的问题到希望`RuntimeException`为包或 API 创建一个专门的生态系统只是一个小小的飞跃。这个想法是定义一个“根” `RuntimeException`，可以从中创建特定后代异常的新生态系统。对我来说，重要的是要使用特定类型的错误`catch`并且`match`更容易利用它。

例如，我`validate`定义了一个方法，该方法在允许创建案例类之前验证一组条件。每个失败的条件都会生成一个`RuntimeException`实例。然后该`RuntimeInstance`方法返回 s 的列表。这使客户能够决定他们希望如何处理响应；`throw`包含异常的列表，扫描列表以查找特定的`throw`内容，或者只是将整个内容推到调用链上，而无需使用非常昂贵的 JVM`throw`命令。

这个特定的问题空间有三个不同的后代`RuntimeException`，一个抽象的 ( `FailedPrecondition`) 和两个具体的 (`FailedPreconditionMustBeNonEmptyList`和`FailedPreconditionsException`)。

第一个，`FailedPrecondition`，是 的直接后代`RuntimeException`，与 非常相似`MyRuntimeException`，并且是抽象的（以防止直接实例化）。`FailedPrecondition`有一个“伴随对象特征”，`FailedPreconditionObject`它充当实例化工厂（抑制`new`操作符）。

```
trait FailedPreconditionObject[F <: FailedPrecondition] {
  def apply: F =
    apply()

  def apply(message: String): F =
    apply(optionMessage = Some(message))

  def apply(cause: Throwable): F =
    apply(optionCause = Some(cause))

  def apply(message: String, cause: Throwable): F =
    apply(optionMessage = Some(message), optionCause = Some(cause))

  def apply(
      optionMessage: Option[String] = None
    , optionCause: Option[Throwable] = None
    , isEnableSuppression: Boolean = false
    , isWritableStackTrace: Boolean = false
  ): F
}
abstract class FailedPrecondition (
  val optionMessage: Option[String],
  val optionCause: Option[Throwable],
  val isEnableSuppression: Boolean,
  val isWritableStackTrace: Boolean
) extends RuntimeException(
  optionMessage match {
    case Some(string) => string
    case None => null
  },
  optionCause match {
    case Some(throwable) => throwable
    case None => null
  },
  isEnableSuppression,
  isWritableStackTrace
) 
```

第二个，`FailedPreconditionMustBeNonEmptyList`，是 的间接`RuntimeException`后代和直接具体实现`FailedPrecondition`。它定义了一个伴生对象和一个类。伴随对象扩展了 trait `FailedPreconditionObject`。并且该类只是扩展抽象类`FailedPrecondition`并标记它`final`以防止任何进一步的扩展。

```
object FailedPreconditionMustBeNonEmptyList extends FailedPreconditionObject[FailedPreconditionMustBeNonEmptyList] {
  def apply(
      optionMessage: Option[String] = None
    , optionCause: Option[Throwable] = None
    , isEnableSuppression: Boolean = false
    , isWritableStackTrace: Boolean = false
  ): FailedPreconditionMustBeNonEmptyList =
    new FailedPreconditionMustBeNonEmptyList(
        optionMessage
      , optionCause
      , isEnableSuppression
      , isWritableStackTrace
    )
}
final class FailedPreconditionMustBeNonEmptyList private[FailedPreconditionMustBeNonEmptyList] (
    optionMessage: Option[String]
  , optionCause: Option[Throwable]
  , isEnableSuppression: Boolean
  , isWritableStackTrace: Boolean
) extends
  FailedPrecondition(
      optionMessage
    , optionCause
    , isEnableSuppression
    , isWritableStackTrace
  ) 
```

第三个`FailedPreconditionsException`是 s 的直接后代，`RuntimeException`它包装 a `List`of `FailedPrecondition`s 然后动态管理异常消息的发出。

```
object FailedPreconditionsException {
  def apply(failedPrecondition: FailedPrecondition): FailedPreconditionsException =
    FailedPreconditionsException(List(failedPrecondition))
  def apply(failedPreconditions: List[FailedPrecondition]): FailedPreconditionsException =
    tryApply(failedPreconditions).get
  def tryApply(failedPrecondition: FailedPrecondition): Try[FailedPreconditionsException] =
    tryApply(List(failedPrecondition))
  def tryApply(failedPreconditions: List[FailedPrecondition]): Try[FailedPreconditionsException] =
    if (failedPreconditions.nonEmpty)
      Success(new FailedPreconditionsException(failedPreconditions))
    else
      Failure(FailedPreconditionMustBeNonEmptyList())
  private def composeMessage(failedPreconditions: List[FailedPrecondition]): String =
    if (failedPreconditions.size > 1)
      s"failed preconditions [${failedPreconditions.size}] have occurred - ${failedPreconditions.map(_.optionMessage.getOrElse("")).mkString("|")}"
    else
      s"failed precondition has occurred - ${failedPreconditions.head.optionMessage.getOrElse("")}"
}
final class FailedPreconditionsException private[FailedPreconditionsException] (
  val failedPreconditions: List[FailedPrecondition]
) extends RuntimeException(FailedPreconditionsException.composeMessage(failedPreconditions)) 
```

然后将所有这些作为一个整体并整理起来，我将两者都`FailedPrecondition`放在`FailedPreconditionMustBeNonEmptyList`object`FailedPreconditionsException`中。这就是最终结果的样子：

```
object FailedPreconditionsException {
  trait FailedPreconditionObject[F <: FailedPrecondition] {
    def apply: F =
      apply()

    def apply(message: String): F =
      apply(optionMessage = Some(message))

    def apply(cause: Throwable): F =
      apply(optionCause = Some(cause))

    def apply(message: String, cause: Throwable): F =
      apply(optionMessage = Some(message), optionCause = Some(cause))

    def apply(
        optionMessage: Option[String] = None
      , optionCause: Option[Throwable] = None
      , isEnableSuppression: Boolean = false
      , isWritableStackTrace: Boolean = false
    ): F
  }
  abstract class FailedPrecondition (
      val optionMessage: Option[String]
    , val optionCause: Option[Throwable]
    , val isEnableSuppression: Boolean
    , val isWritableStackTrace: Boolean
  ) extends RuntimeException(
    optionMessage match {
      case Some(string) => string
      case None => null
    },
    optionCause match {
      case Some(throwable) => throwable
      case None => null
    },
    isEnableSuppression,
    isWritableStackTrace
  )

  object FailedPreconditionMustBeNonEmptyList extends FailedPreconditionObject[FailedPreconditionMustBeNonEmptyList] {
    def apply(
        optionMessage: Option[String] = None
      , optionCause: Option[Throwable] = None
      , isEnableSuppression: Boolean = false
      , isWritableStackTrace: Boolean = false
    ): FailedPreconditionMustBeNonEmptyList =
      new FailedPreconditionMustBeNonEmptyList(
          optionMessage
        , optionCause
        , isEnableSuppression
        , isWritableStackTrace
      )
  }
  final class FailedPreconditionMustBeNonEmptyList private[FailedPreconditionMustBeNonEmptyList] (
      optionMessage: Option[String]
    , optionCause: Option[Throwable]
    , isEnableSuppression: Boolean
    , isWritableStackTrace: Boolean
  ) extends
    FailedPrecondition(
        optionMessage
      , optionCause
      , isEnableSuppression
      , isWritableStackTrace
    )

  def apply(failedPrecondition: FailedPrecondition): FailedPreconditionsException =
    FailedPreconditionsException(List(failedPrecondition))

  def apply(failedPreconditions: List[FailedPrecondition]): FailedPreconditionsException =
    tryApply(failedPreconditions).get

  def tryApply(failedPrecondition: FailedPrecondition): Try[FailedPreconditionsException] =
    tryApply(List(failedPrecondition))

  def tryApply(failedPreconditions: List[FailedPrecondition]): Try[FailedPreconditionsException] =
    if (failedPreconditions.nonEmpty)
      Success(new FailedPreconditionsException(failedPreconditions))
    else
      Failure(FailedPreconditionMustBeNonEmptyList())
  private def composeMessage(failedPreconditions: List[FailedPrecondition]): String =
    if (failedPreconditions.size > 1)
      s"failed preconditions [${failedPreconditions.size}] have occurred - ${failedPreconditions.map(_.optionMessage.getOrElse("")).mkString("|")}"
    else
      s"failed precondition has occurred - ${failedPreconditions.head.optionMessage.getOrElse("")}"
}
final class FailedPreconditionsException private[FailedPreconditionsException] (
  val failedPreconditions: List[FailedPreconditionsException.FailedPrecondition]
) extends RuntimeException(FailedPreconditionsException.composeMessage(failedPreconditions)) 
```

这就是客户端使用上述代码创建自己的异常派生的样子`FailedPreconditionMustBeNonEmptyString`：

```
object FailedPreconditionMustBeNonEmptyString extends FailedPreconditionObject[FailedPreconditionMustBeNonEmptyString] {
  def apply(
      optionMessage: Option[String] = None
    , optionCause: Option[Throwable] = None
    , isEnableSuppression: Boolean = false
    , isWritableStackTrace: Boolean = false
  ): FailedPreconditionMustBeNonEmptyString =
    new FailedPreconditionMustBeNonEmptyString(
        optionMessage
      , optionCause
      , isEnableSuppression
      , isWritableStackTrace
    )
}
final class FailedPreconditionMustBeNonEmptyString private[FailedPreconditionMustBeNonEmptyString] (
    optionMessage: Option[String]
  , optionCause: Option[Throwable]
  , isEnableSuppression: Boolean
  , isWritableStackTrace: Boolean
) extends
  FailedPrecondition(
      optionMessage
    , optionCause
    , isEnableSuppression
    , isWritableStackTrace
  ) 
```

然后这个异常的使用看起来像这样：

```
throw FailedPreconditionMustBeNonEmptyString() 
```

我远远超出了回答最初的问题的范围，因为我发现很难找到任何在 Scala 中既具体又全面的东西，具体来说，`RuntimeException`或者扩展到更一般的“异常生态系统”，我在 Java 中变得如此熟悉。

我很想听到关于我的解决方案集的反馈（除了“哇！这对我来说太冗长了。”的变体除外）。我会喜欢任何额外的优化或方法来减少冗长，而不会失去我为这种模式的客户产生的任何价值或简洁性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-18T15:36:36.370

这是与@roman-borisov 类似但类型安全的方法。

```
case class ShortException(message: String = "", cause: Option[Throwable] = None)
    extends Exception(message) {
  cause.foreach(initCause)
} 
```

然后，您可以以 Java 方式创建异常：

```
throw ShortException() 
throw ShortException(message) 
throw ShortException(message, Some(cause)) 
throw ShortException(cause = Some(cause)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-12T06:37:09.247

Scala pattern matching in try/catch blocks works on interfaces. My solution is to use an interface for the exception name then use separate class instances.

```
trait MyException extends RuntimeException

class MyExceptionEmpty() extends RuntimeException with MyException

class MyExceptionStr(msg: String) extends RuntimeException(msg) with MyException

class MyExceptionEx(t: Throwable) extends RuntimeException(t) with MyException

object MyException {
  def apply(): MyException = new MyExceptionEmpty()
  def apply(msg: String): MyException = new MyExceptionStr(msg)
  def apply(t: Throwable): MyException = new MyExceptionEx(t)
}

class MyClass {
  try {
    throw MyException("oops")
  } catch {
    case e: MyException => println(e.getMessage)
    case _: Throwable => println("nope")
  }
} 
```

Instantiating MyClass will output "oops".

# javascript - jquery函数访问本地javascript变量

> ID：10925271
> 
> 赞同：2
> 
> 时间：2012-06-07T03:23:25.880
> 
> 标签：javascript, jquery, local-variables

jQuery 新手，遇到简单但令人困惑的问题。哈2。

我正在使用读取 xml 文件的 jQuery 函数编写这个普通的 javascript 函数。如何为顶部声明的 prodPrice 变量赋值？脚本不断返回 0 值，但如果我在 jQuery 函数中提醒该值，我设法获得了我想要的值。

感谢你们。

```
function getPrice(valprodID)
{
    var prodPrice=0;

    jQuery.ajax({
        type: "GET",
        url: "products.xml",
        dataType : "xml",
        success : function(xml)
        {
            jQuery(xml).find('prod').each(function(){
                var prodID = jQuery(this).find('prodID').text();
                if(prodID == valprodID)
                {
                    prodPrice = jQuery(this).find('prodPrice').text(); 
                    return false;
                }
            });                
        }
    })

    return prodPrice;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T03:28:04.063

那是因为`$.ajax`是异步执行的。

这是一个很好的机会让你学习如何使用`$.Deferred`

```
function getPrice(valprodID)
{
    var prodPrice=0;

    return jQuery.ajax({
        type: "GET",
        url: "products.xml",
        dataType : "xml"
    }).pipe(function(xml)
        {
            jQuery(xml).find('prod').each(function(){
                var prodID = jQuery(this).find('prodID').text();
                if(prodID == valprodID)
                {
                    return jQuery(this).find('prodPrice').text(); 
                }
            });                
        });
} 
```

现在你`getPrice()`以这种方式调用你的函数：

```
getPrice(someid).done(function(prodPrice) {
    // do what you need with prodPrice 
}); 
```

这是关于 jsfiddle 的示例：http: [//jsfiddle.net/zerkms/9MgsX/1/](http://jsfiddle.net/zerkms/9MgsX/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T03:48:23.703

您可以按照@xdazz 的报告进行异步操作，正如@zerkms 用延迟或匿名函数指示的那样：

```
function getPrice(valprodID, fn)
{
    var prodPrice=0;
    jQuery.ajax({
        type: "GET",
        url: "products.xml",
        dataType : "xml",
        success : function(xml)
        {
            jQuery(xml).find('prod').each(function(){
                var prodID = jQuery(this).find('prodID').text();
                if(prodID == valprodID)
                {
                    prodPrice = jQuery(this).find('prodPrice').text(); 
                    fn(prodPrice);
                }
            });                
        }
    })

}

getPrice(1, function(prodPrice) {

   /* your code */

}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T03:27:42.740

您需要将`async`选项设置为`false`，或者您应该在回调函数中完成您的工作。

# ruby-on-rails - 如何TDD删除设计中的用户

> ID：10925273
> 
> 赞同：1
> 
> 时间：2012-06-07T03:23:47.887
> 
> 标签：ruby-on-rails, ruby, rspec, devise

我设置了 Devise，所以我可以[用这个](https://github.com/plataformatec/devise/wiki/How-To%3a-Controllers-and-Views-tests-with-Rails-3-%28and-rspec%29)编写控制器规格。然后我设置了 Devise，这样用户就不能[删除他们的帐户](https://github.com/plataformatec/devise/wiki/How-To%3a-Disable-user-from-destroying-his-account)。

现在我想编写一个规范以确保控制器无法对 Devise 用户调用销毁操作。我怎么写这个？

在我的控制器中，设计部分看起来像这样

```
devise_for :users, skip: :registrations do
  resource :registration,
    only: [:new, :create, :edit, :update],
    path: 'users',
    path_names: { new: 'sign_up' },
    controller: 'devise/registrations',
    as: :user_registration do
    get :cancel
  end
end 
```

在我的规范中，我正在尝试执行以下操作，但它不起作用。我什至不确定我是否写对了。我认为我试图访问的页面是错误的。

```
describe UsersController do
  login_user # from devise controller helper

  it "does not allow deleting of user" do
    get :users, :method => :delete

    # assert here user was not deleted
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:59:27.210

在测试这种东西时，我会在我的控制器规范中添加以下内容（尽管我会使用 FactoryGirl 来创建我的测试用户）：

```
it "does not allow deletion of a user" do
  user = User.create!([insert valid args here])
  expect {
    delete :destroy, id: user
  }.not_to change(User, :count)
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T03:46:56.447

我认为您真正想要测试的是registrations#destroy 操作的路线是否存在。如果没有路由，则不会调用该操作，因为它无法路由到控制器。

对于销毁操作，我们需要尝试将 DELETE 操作路由到用户路径。所以，这样的事情可能会奏效：

```
{ :delete=> "/users" }.should_not be_routable 
```

从此处的类似答案中提取的测试语法： [Rails RSpec Routing: Testing actions in :except do NOT route](https://stackoverflow.com/questions/7219176/rails-rspec-routing-testing-actions-in-except-do-not-route)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T03:48:13.263

你为了一件事混合你的http动词。你应该做

```
delete :destroy, id: @user 
```

您将不得不从某个地方获取@user，我由控制器宏亲自设置它。

然后你可以检查响应头是否不成功，或者更容易

```
@user.should exist 
```

# java - String[] url 不会正确更新

> ID：10925275
> 
> 赞同：0
> 
> 时间：2012-06-07T03:24:04.017
> 
> 标签：java, android, string

对于我的课程，我们必须创建一个应用程序，在该应用程序中，我们在广播接收器中捕获 SMS 消息，获取字符串（假定为 URL），将其动态添加到显示在片段列表中的字符串数组中。单击列表项时，我们必须将其加载到片段中的 web 视图中。

一切正常，直到这里。

问题是当我尝试将 url_act 字符串添加到列表时，列表没有更新。

这是我的代码：

```
public class UpdateString extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    String url_act = "";
    Bundle b = getIntent().getExtras();
    url_act = b.getString("url");

    UrlListFragment uf = (UrlListFragment) getFragmentManager()
            .findFragmentById(R.id.listFragment);

    String[] urls = getResources().getStringArray(R.array.urls_array);
    List<String> list = new ArrayList<String>();
    list = Arrays.asList(urls);
    ArrayList<String> arrayList = new ArrayList<String>(list);
    arrayList.add(url_act);
    urls = arrayList.toArray(new String[list.size()]);

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(UpdateString.this,
            android.R.layout.simple_list_item_1, urls);
    uf.setListAdapter(adapter);

} 
```

如果您需要更多上下文代码，请告诉我。*更新*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T03:28:07.540

你真的应该发布你的 logcat 输出来确定，否则我们不知道抛出了什么样的异常。

话虽如此，我敢打赌这是一个`NullPointerException`; `findFragmentById()`很有可能回归`null`。这可能是因为您从一开始就没有扩充您的 XML 资源。

# r - 构建 R 包：“主题”没有可见的全局函数定义

> ID：10925278
> 
> 赞同：7
> 
> 时间：2012-06-07T03:24:20.333
> 
> 标签：r, package

我第一次构建一个 R 包并且遇到了一些麻烦。我正在执行 R CMD 检查并收到以下错误：

```
get.AlignedPositions: no visible global function definition for 'subject' 
```

我不确定是什么原因造成的。我的代码中什至没有“主题”变量。代码相当长，所以除非有人在评论中询问，否则我宁愿不粘贴所有代码。我应该寻找一些具体的东西吗？我唯一能想到的是我有这样一行：

```
alignment <-pairwiseAlignment(pattern = canonical.protein, subject=protein.extracted, patternQuality=patternQuality,
                            subjectQuality=subjectQuality,type = type, substitutionMatrix= substitutionMatrix,
                            fuzzyMatrix=fuzzyMatrix,gapOpening=gapOpening,gapExtension=gapExtension,
                            scoreOnly=scoreOnly) 
```

但主题是由`pairwiseAlignment`Biostrings 包中的函数定义的。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T09:10:47.387

R 发现了一个函数`subject`, 正在使用而没有一个称为`subject`可用的函数。[这个关于 R-devel](https://stat.ethz.ch/pipermail/r-devel/2007-June/046043.html)的讨论解释了一个可能的原因。在这种情况下，有条件地使用代码，例如，如果安装了某个包，我们将使用它的功能。在未安装此软件包的系统上检查该软件包时，我们会遇到此类警告。所以请检查是否可能是这种情况。或者，您可能在不存在函数的情况下调用主题而犯了一个错误，例如`subject`，它不是函数而只是一个对象。

# performance - 在 Prolog 中更快地实现口头算术

> ID：10925285
> 
> 赞同：7
> 
> 时间：2012-06-07T03:24:38.870
> 
> 标签：performance, prolog, logic, clpfd, cryptarithmetic-puzzle

我已经在 Prolog 中制作了一个有效的广义[口头算术](http://en.wikipedia.org/wiki/Verbal_arithmetic)求解器，但它太慢了。运行简单的表达式 SEND + MORE = MONE Y 需要 8 分钟。有人可以帮我让它运行得更快吗？

```
/* verbalArithmetic(List,Word1,Word2,Word3) where List is the list of all 
   possible letters in the words. The SEND+MORE = MONEY expression would then
   be represented as
    verbalArithmetic([S,E,N,D,M,O,R,Y],[S,E,N,D],[M,O,R,E],[M,O,N,E,Y]). */

validDigit(X) :- member(X,[0,1,2,3,4,5,6,7,8,9]).
validStart(X) :- member(X,[1,2,3,4,5,6,7,8,9]).
assign([H|[]]) :- validDigit(H).         
assign([H|Tail]) :- validDigit(H), assign(Tail), fd_all_different([H|Tail]).

findTail(List,H,T) :- append(H,[T],List).

convert([T],T) :- validDigit(T).
convert(List,Num) :- findTail(List,H,T), convert(H,HDigit), Num is (HDigit*10+T).

verbalArithmetic(WordList,[H1|Tail1],[H2|Tail2],Word3) :- 
    validStart(H1), validStart(H2), assign(WordList), 
    convert([H1|Tail1],Num1),convert([H2|Tail2],Num2), convert(Word3,Num3), 
    Sum is Num1+Num2, Num3 = Sum. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T09:52:22.203

考虑使用[有限域约束](http://www.swi-prolog.org/man/clpfd.html)，例如，在 SWI-Prolog 中：

```
:- use_module(library(clpfd)).

puzzle([S,E,N,D] + [M,O,R,E] = [M,O,N,E,Y]) :-
        Vars = [S,E,N,D,M,O,R,Y],
        Vars ins 0..9,
        all_different(Vars),
                  S*1000 + E*100 + N*10 + D +
                  M*1000 + O*100 + R*10 + E #=
        M*10000 + O*1000 + N*100 + E*10 + Y,
        M #\= 0, S #\= 0. 
```

示例查询：

```
?- time((puzzle(As+Bs=Cs), label(As))).
% 5,803 inferences, 0.002 CPU in 0.002 seconds (98% CPU, 3553582 Lips)
As = [9, 5, 6, 7],
Bs = [1, 0, 8, 5],
Cs = [1, 0, 6, 5, 2] ;
% 1,411 inferences, 0.001 CPU in 0.001 seconds (97% CPU, 2093472 Lips)
false. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-13T00:09:58.167

这里表现不佳是由于在检查是否可行之前形成所有可能的字母分配。

我的建议是“尽早失败，经常失败”。也就是说，尽早将尽可能多的失败检查推送到分配步骤中，从而修剪搜索树。

Klas Lindbäck 提出了一些很好的建议。作为概括，当添加两个数字时，每个位置最多有一个进位。因此，可以检查从左到右对字母的不同数字的分配，并考虑在最右边的位置可能存在尚未确定的进位。（当然在最后的“单位”处，没有进位。）

有很多事情要考虑，这就是为什么约束逻辑，正如 mat 所建议的（并且您已经使用**fd_all_diff/1**提出了）如此方便。

* * *

**补充：** 这是一个没有约束逻辑的 Prolog 解决方案，只使用一个辅助谓词**omit/3**：

```
omit(H,[H|T],T).
omit(X,[H|T],[H|Y]) :- omit(X,T,Y). 
```

它既从列表中选择一个项目，又生成没有该项目的缩短列表。

下面是**sendMoreMoney/3**的代码，它通过从左到右求和来进行搜索：

```
sendMoreMoney([S,E,N,D],[M,O,R,E],[M,O,N,E,Y]) :-
    M = 1,
    omit(S,[2,3,4,5,6,7,8,9],PoolO),
    (CarryS = 0 ; CarryS = 1),
    %% CarryS + S + M =      M*10 + O
    O is (CarryS + S + M) - (M*10), 
    omit(O,[0|PoolO],PoolE),
    omit(E,PoolE,PoolN),
    (CarryE = 0 ; CarryE = 1),
    %% CarryE + E + O = CarryS*10 + N
    N is (CarryE + E + O) - (CarryS*10),
    omit(N,PoolN,PoolR),
    (CarryN = 0 ; CarryN = 1),
    %% CarryN + N + R = CarryE*10 + E
    R is (CarryE*10 + E) - (CarryN + N),
    omit(R,PoolR,PoolD),
    omit(D,PoolD,PoolY),
    %%          D + E = CarryN*10 + Y
    Y is (D + E) - (CarryN*10),
    omit(Y,PoolY,_). 
```

我们通过观察 M 必须是最左边数字和的非零进位来快速开始，因此是 1，并且 S 必须是其他一些非零数字。注释显示了可以根据已经做出的选择确定性地为附加字母分配值的步骤。

* * *

**补充（2）：**这是两个加法的“通用”密码求解器，它们不需要具有相同的长度/“位置”数。作为一个相当常见的内置谓词，省略了**length/2**的代码，并且采纳了 Will Ness 的建议，为了方便 SWI-Prolog 用户，对**omit/3**的调用被替换为**select/3 。**

我已经用 Amzi 测试过了！和 SWI-Prolog 使用[来自 Cryptarithms.com](http://www.cryptarithms.com/)的那些字母表示例，其中涉及两个加法，每个加法都有一个独特的解决方案。我还用十几个解决方案创建了一个示例，I + AM = BEN，以测试正确的回溯。

```
solveCryptarithm([H1|T1],[H2|T2],Sum) :-
    operandAlign([H1|T1],[H2|T2],Sum,AddTop,AddPad,Carry,TSum,Pool),
    solveCryptarithmAux(H1,H2,AddTop,AddPad,Carry,TSum,Pool).

operandAlign(Add1,Add2,Sum,AddTop,AddPad,Carry,TSum,Pool) :-
    operandSwapPad(Add1,Add2,Length,AddTop,AddPad),
    length(Sum,Size),
    (   Size = Length
     -> ( Carry = 0, Sum = TSum , Pool = [1|Peel] )
     ;  ( Size is Length+1, Carry = 1, Sum = [Carry|TSum], Pool = Peel )
    ),
    Peel = [2,3,4,5,6,7,8,9,0].

operandSwapPad(List1,List2,Length,Longer,Padded) :-
    length(List1,Length1),
    length(List2,Length2),
    (   Length1 >= Length2
     -> ( Length = Length1, Longer = List1, Shorter = List2, Pad is Length1 - Length2 )
     ;  ( Length = Length2, Longer = List2, Shorter = List1, Pad is Length2 - Length1 )
    ),
    zeroPad(Shorter,Pad,Padded).

zeroPad(L,0,L).
zeroPad(L,K,P) :-
    K > 0,
    M is K-1,
    zeroPad([0|L],M,P).

solveCryptarithmAux(_,_,[],[],0,[],_).
solveCryptarithmAux(NZ1,NZ2,[H1|T1],[H2|T2],CarryOut,[H3|T3],Pool) :-
    ( CarryIn = 0 ; CarryIn = 1 ),   /* anticipatory carry */
    (   var(H1)
     -> select(H1,Pool,P_ol)
     ;  Pool = P_ol
    ),
    (   var(H2)
     -> select(H2,P_ol,P__l)
     ;  P_ol = P__l
    ),
    (   var(H3)
     -> ( H3 is H1 + H2 + CarryIn - 10*CarryOut, select(H3,P__l,P___) )
     ;  ( H3 is H1 + H2 + CarryIn - 10*CarryOut, P__l = P___ )
    ),
    NZ1 \== 0,
    NZ2 \== 0,
    solveCryptarithmAux(NZ1,NZ2,T1,T2,CarryIn,T3,P___). 
```

我认为这说明了从左到右搜索/评估的优势可以在“通用”求解器中获得，与早期的“定制”代码相比，推理的数量大约增加了两倍。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-07T07:24:43.483

注意：此答案讨论了一种用于减少需要尝试的组合数量的算法。我不知道 Prolog，所以我不能提供任何代码片段。

加速蛮力解决方案的诀窍是捷径。如果您可以识别出无效的组合范围，则可以大大减少组合​​的数量。

举个例子。当一个人解决它时，她立即注意到 MONEY 有 5 个数字，而 SEND 和 MORE 只有 4 个，所以 MONEY 中的 M 必须是数字 1。90% 的组合消失了！

在为计算机构建算法时，我们首先尝试使用适用于所有可能输入的快捷方式。如果它们未能提供所需的性能，我们将开始查看仅适用于特定输入组合的快捷方式。所以我们暂时离开 M=1 快捷方式。

相反，我会专注于最后一位数字。我们知道 (D+E) mod 10 = Y。这是我们尝试的组合数量减少了 90%。

这一步应该使执行时间不到一分钟。

如果这还不够，我们还能做什么？下一步：查看倒数第二个数字！我们知道 (N+R+carry from D+E) mod 10 = E。

由于我们正在测试最后一位数字的所有有效组合，因此对于每个测试，我们将知道进位是 0 还是 1。进一步减少要测试的组合数量的复杂情况（对于代码）是我们会遇到重复（一个字母被映射到一个已经分配给另一个字母的数字）。当我们遇到重复时，我们可以前进到下一个组合，而无需再往下走。

祝你的任务好运！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-13T09:13:25.823

你有

```
convert([A,B,C,D]) => convert([A,B,C])*10 + D 
 => (convert([A,B])*10+C)*10+D => ... 
 => ((A*10+B)*10+C)*10+D 
```

因此，您可以用简单的线性递归来表达这一点。

更重要的是，当您从域中选择一个可能的数字时`0..9`，您不应该再使用该数字进行后续选择：

```
selectM([A|As],S,Z):- select(A,S,S1),selectM(As,S1,Z).
selectM([],Z,Z). 
```

[`select/3`](http://www.swi-prolog.org/pldoc/doc_for?object=select/3)在 SWI Prolog 中可用。有了这个工具，您可以从缩小的*域中*逐渐选择您的数字：

```
money_puzzle( [[S,E,N,D],[M,O,R,E],[M,O,N,E,Y]]):-
  Dom = [0,1,2,3,4,5,6,7,8,9],
  selectM([D,E],  Dom,Dom1),   add(D,E,0, Y,C1),   % D+E=Y
  selectM([Y,N,R],Dom1,Dom2),  add(N,R,C1,E,C2),   % N+R=E
  select(  O,     Dom2,Dom3),  add(E,O,C2,N,C3),   % E+O=N
  selectM([S,M],  Dom3,_),     add(S,M,C3,O,M),    % S+M=MO
  S \== 0, M \== 0. 
```

我们可以添加两个带有进位的数字，添加产生带有新进位的结果数字（例如，`4+8 (0) = 2 (1)`即 12）：

```
add(A,B,C1,D,C2):- N is A+B+C1, D is N mod 10, C2 is N // 10 . 
```

如此实现，`money_puzzle/1`立即运行，这要归功于立即挑选和测试数字的渐进*性*：

```
?- time( money_puzzle(X) ).
% 27,653 inferences, 0.02 CPU in 0.02 seconds (100% CPU, 1380662 Lips)
X = [[9, 5, 6, 7], [1, 0, 8, 5], [1, 0, 6, 5, 2]] ;
No
?- time( (money_puzzle(X),fail) ).
% 38,601 inferences, 0.02 CPU in 0.02 seconds (100% CPU, 1927275 Lips) 
```

现在的挑战变成了使其通用化。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-05-20T10:14:04.797

这是我的看法。我使用[clpfd](/questions/tagged/clpfd "显示标记为“clpfd”的问题")、[dcg](/questions/tagged/dcg "显示标记为“dcg”的问题")和[meta-predicate](/questions/tagged/meta-predicate "显示标记为“元谓词”的问题") `mapfoldl/5`：

```
:- meta_predicate mapfoldl(4,?,?,?,?).
mapfoldl(P_4,Xs,Zs, S0,S) :-
   list_mapfoldl_(Xs,Zs, S0,S, P_4).

:- meta_predicate list_mapfoldl_(?,?,?,?,4).
list_mapfoldl_([],[], S,S, _).
list_mapfoldl_([X|Xs],[Y|Ys], S0,S, P_4) :-
   call(P_4,X,Y,S0,S1),
   list_mapfoldl_(Xs,Ys, S1,S, P_4). 
```

让我们`mapfoldl/5`好好利用并做一些口头算术吧！

```
:- use_module(library(clpfd)).
:- use_module(library(lambda)).

digits_number(Ds,Z) :-
   Ds = [D0|_],
   Ds ins 0..9,
   D0 #\= 0,           % most-significant digit must not equal 0
   reverse(Ds,Rs),
   length(Ds,N),
   numlist(1,N,Es),    % exponents (+1)
   maplist(\E1^V^(V is 10**(E1-1)),Es,Ps),
   scalar_product(Ps,Rs,#=,Z).

list([]) --> [].
list([E|Es]) --> [E], list(Es).

cryptarithexpr_value([V|Vs],X) -->
   { digits_number([V|Vs],X) },
   list([V|Vs]).
cryptarithexpr_value(T0,T) -->
   { functor(T0,F,A)  },
   { dif(F-A,'.'-2)   },
   { T0 =.. [F|Args0] },
   mapfoldl(cryptarithexpr_value,Args0,Args),
   { T  =.. [F|Args] }.

crypt_arith_(Expr,Zs) :-
   phrase(cryptarithexpr_value(Expr,Goal),Zs0),
   (  member(Z,Zs0), \+var(Z)
   -> throw(error(uninstantiation_error(Expr),crypt_arith_/2)) 
   ;  true 
   ),
   sort(Zs0,Zs),
   all_different(Zs),
   call(Goal). 
```

快速而肮脏的黑客转储找到的*所有解决方案*：

```
solve_n_dump(Opts,Eq) :-
   (  crypt_arith_(Eq,Zs),
      labeling(Opts,Zs),
      format('Eq = (~q), Zs = ~q.~n',[Eq,Zs]),
      false
   ;  true
   ).

solve_n_dump(Eq) :- solve_n_dump([],Eq). 
```

让我们试试吧！

```
?-solve_n_dump([S,E,N,D]+[M,O,R,E] #= [M,O,N,E,Y])。
Eq = ([9,5,6,7]+[1,0,8,5]#=[1,0,6,5,2]), Zs = [9,5,6,7,1, 0,8,2]。
真的。

?-solve_n_dump([C,R,O,S,S]+[R,O,A,D,S] #= [D,A,N,G,E,R])。
Eq = ([9,6,2,3,3]+[6,2,5,1,3]#=[1,5,8,7,4,6​​]), Zs = [9,6, 2,3,5,1,8,7,4]。
真的。

?-solve_n_dump([F,O,R,T,Y]+[T,E,N]+[T,E,N] #= [S,I,X,T,Y])。
Eq = ([2,9,7,8,6]+[8,5,0]+[8,5,0]#=[3,1,4,8,6]), Zs = [2, 9,7,8,6,5,0,3,1,4]。
真的。

?-solve_n_dump([E,A,U]*[E,A,U] #= [O,C,E,A,N])。
方程 = ([2,0,3]*[2,0,3]#=[4,1,2,0,9])，Zs = [2,0,3,4,1,9]。
真的。

?-solve_n_dump([N,U,M,B,E,R] #= 3*[P,R,I,M,E])。
% 等同于：[N,U,M,B,E,R] #= [P,R,I,M,E]+[P,R,I,M,E]+[P,R,I,我]
Eq = (3*[5,4,3,2,8]#=[1,6,2,9,8,4]), Zs = [5,4,3,2,8,1,6, 9]。
真的。

?-solve_n_dump(3*[C,O,F,F,E,E] #= [T,H,E,O,R,E,M])。
Eq = (3*[8,3,1,1,9,9]#=[2,4,9,3,5,9,7]), Zs = [8,3,1,9,2, 4,5,7]。
真的。

```

让我们做更多，尝试一些不同的[标签选项](http://www.swi-prolog.org/man/clpfd.html)：

```
?- time(solve_n_dump( [] ,[D,O,N,A,L,D]+[G,E,R,A,L,D] #= [R,O,B,E,R,T ]))。
Eq = ([5,2,6,4,8,5]+[1,9,7,4,8,5]#=[7,2,3,9,7,0]), Zs = [ 5,2,6,4,8,1,9,7,3,0]。
% 35,696,801 推理，3.929 CPU 在3.928 秒内（100% CPU，9085480 唇）
真的。

?- time(solve_n_dump( [ff] ,[D,O,N,A,L,D]+[G,E,R,A,L,D] #= [R,O,B,E,R, T]))。
Eq = ([5,2,6,4,8,5]+[1,9,7,4,8,5]#=[7,2,3,9,7,0]), Zs = [ 5,2,6,4,8,1,9,7,3,0]。
% 2,902,871 推理，0.340 CPU 在0.340 秒内（100% CPU，8533271 唇）
真的。

```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-09-16T18:57:15.943

Will Ness 风格，广义（但假设`length(A) <= length(B)`）求解器：

```
money_puzzle(A, B, C) :-
    maplist(reverse, [A,B,C], [X,Y,Z]),
    numlist(0, 9, Dom),
    swc(0, Dom, X,Y,Z),
    A \= [0|_], B \= [0|_].

swc(C, D0, [X|Xs], [Y|Ys], [Z|Zs]) :-
    peek(D0, X, D1),
    peek(D1, Y, D2),
    peek(D2, Z, D3),
    S is X+Y+C,
    ( S > 9 -> Z is S - 10, C1 = 1 ; Z = S, C1 = 0 ),
    swc(C1, D3, Xs, Ys, Zs).
swc(C, D0, [], [Y|Ys], [Z|Zs]) :-
    peek(D0, Y, D1),
    peek(D1, Z, D2),
    S is Y+C,
    ( S > 9 -> Z is S - 10, C1 = 1 ; Z = S, C1 = 0 ),
    swc(C1, D2, [], Ys, Zs).
swc(0, _, [], [], []).
swc(1, _, [], [], [1]).

peek(D, V, R) :- var(V) -> select(V, D, R) ; R = D. 
```

表现：

```
?- time(money_puzzle([S,E,N,D],[M,O,R,E],[M,O,N,E,Y])).
% 38,710 inferences, 0.016 CPU in 0.016 seconds (100% CPU, 2356481 Lips)
S = 9,
E = 5,
N = 6,
D = 7,
M = 1,
O = 0,
R = 8,
Y = 2 ;
% 15,287 inferences, 0.009 CPU in 0.009 seconds (99% CPU, 1685686 Lips)
false.

?-  time(money_puzzle([D,O,N,A,L,D],[G,E,R,A,L,D],[R,O,B,E,R,T])).
% 14,526 inferences, 0.008 CPU in 0.008 seconds (99% CPU, 1870213 Lips)
D = 5,
O = 2,
N = 6,
A = 4,
L = 8,
G = 1,
E = 9,
R = 7,
B = 3,
T = 0 ;
% 13,788 inferences, 0.009 CPU in 0.009 seconds (99% CPU, 1486159 Lips)
false. 
```

# gwt - 使用 AsyncDataProvider 进行列排序 - 如何找出用户想要排序的列？

> ID：10925288
> 
> 赞同：2
> 
> 时间：2012-06-07T03:25:28.790
> 
> 标签：gwt, celltable

我正在实现一个 GWT CellTable，它具有动态分页和多列排序的功能。可以在[CellTable Developer's Guide](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCellTable)中找到基础知识。

但是，动态示例并没有说明如何找出用户想要排序的列（它只是按“名称”列排序）。就我而言，这还不够，因为我希望允许用户按不同的列进行排序。

我能想到的唯一不是很优雅的解决方案是跟踪哪一列是否按升序排序（使用`table.getColumnSortList(indexOfColumn).isAscending()`），然后通过比较每一列的值（更改的可能是用户单击的内容）。

这涉及将信息保存在我的课程中，这些信息应该在 CellTable 的某个地方可用！但是我找不到那个信息！

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T05:01:37.623

我找到了答案。正如javadocs中解释的那样`com.google.gwt.user.cellview.client.ColumnSortList`：

> 包含表中列的排序历史的有序列表。第 0 项是最近排序的列的 ColumnSortInfo。

因此，要知道最后按哪一列排序，您只需执行以下操作：

```
ColumnSortInfo info = table.getColumnSortList().get(0);
Column<Type> sortByColumn = info.getColumn(); 
```

# java - 将 Javamail 文件夹备份到本地磁盘

> ID：10925294
> 
> 赞同：1
> 
> 时间：2012-06-07T03:27:05.780
> 
> 标签：java, email, jakarta-mail

我正在尝试使用 JavaMail API 将整个邮箱保存到磁盘上（本质上，执行完整备份_。我可以成功地将所有相关文件夹读入内存，然后切断与我的邮件服务器的连接。我想不通如果需要，如何在我的磁盘上实际存储文件夹和/或单个消息。

我尝试四处搜索并找到了一个有趣的链接（如下），但无法弄清楚。有人对从哪里开始有任何建议吗？我很感激，谢谢

[http://www.oracle.com/technetwork/java/javamail/faq/index.html#serialize](http://www.oracle.com/technetwork/java/javamail/faq/index.html#serialize)

快速说明：我尝试使用包含 Folder 类型的 ArrayList 的类（JavaMail 类）并使其可序列化，但是当我尝试写入磁盘时仍然抛出异常。我已经解决这个问题大约两天了，我可以使用一些指针。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T06:14:37.213

您找到了常见问题解答，但您错过了此条目：

*   [如何将邮件消息存储在本地磁盘上？](http://www.oracle.com/technetwork/java/javamail/faq/index.html#localprovs)

而且，正如您找到的常见问题解答条目所说，您不能只序列化 Message 对象，更不用说 Folder 对象了。

如果这一切对您来说太复杂了，最简单的方法可能是获取您在本地计算机上运行的 IMAP 服务器，然后将邮件从远程 IMAP 服务器复制到本地 IMAP 服务器。JavaMail 常见问题解答有[指向您可以在本地安装的 IMAP 服务器](http://www.oracle.com/technetwork/java/javamail/faq/index.html#servers)的指针，并且会出现更多的网络搜索。JavaMail 还附带一个用于复制文件夹的演示程序 (populate.java)。

# c++ - 通用回调

> ID：10925304
> 
> 赞同：1
> 
> 时间：2012-06-07T03:28:07.337
> 
> 标签：c++, templates, generics, callback, c++11

我正在尝试将回调存储在一个类中。目前，我做这样的事情：

```
struct Callback {
    Callback (std::function<void ()> func) : func_ (func){}
    void call() const { func(); }

private:
    std::function<void ()> func_;
}; 
```

如您所见，只能使用特定类型的函数（目前没有返回和没有参数）。

有什么办法可以使用这样的类，我可以通过它来调用它吗？

```
void increment (int &n) {
    ++n;
}

int main() {
    int someNum = 5;
    Callback callback (increment, someNum); //will call `increment (someNum);`
} 
```

我正在考虑使用参数包来存储参数，并使用 a`typename`来存储返回类型，然后做`std::function<ReturnType (Args)> callback_`一些事情，并用类似`callback_ (givenArgs...);`. 但是，我对模板的了解还不够，甚至无法确定是否可行。

我会从中得到的真正用途（至少现在是这样）是用于计时器，但也许制作一个`generic_function<>`包装 an 的小类`std::function<>`会更有帮助。但是，对于此示例，每 2 秒暂停和取消暂停的计时器：

```
void togglePause (Countdown &c) {
    c.togglePause();
}

int main() {
    Countdown main (10000); //create countdown of 10s
    Countdown delay (2000, togglePause, main); //this one calls func when expired

    for (; !main.expired();) { //go while unpaused time < 10s
        delay.wait().reset(); //wait 2s, call callback, reset back to 2s
    }
} 
```

当然，这也可以应用于其他概念，但我不确定如何首先获得这种语法。我可以构建两种不同的形式，以防返回类型`void`与先前无关的问题无关，但是存储具有任意数量和类型的参数的函数会让我感到困惑。如果可能的话，我该如何使用这样的语法？如果不是，语法有多接近？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T03:46:47.817

我认为您只想使用 std::bind 将带参数的函数转换为不带参数的函数：

```
int main() {
    int someNum = 5;
    std::function<void (void)> boundFunc = std::bind(increment, std::ref(someNum));
    Callback callback (boundFunc); //will call `increment (someNum);`
} 
```

Note that you need the std::ref to ensure that someNum is passed by reference and that you need to make sure that someNum stays in scope longer than the callback.

# qt - 在 Qt 中实现的 OpenGL 中级教程

> ID：10925305
> 
> 赞同：1
> 
> 时间：2012-06-07T03:28:14.563
> 
> 标签：qt, opengl, graphics, 3d

我正在为我正在处理的一个免费和开放的项目制作一个界面。我知道最终我需要它来处理 3D 图形的繁重工作，所以我需要访问 GPU。我偶然发现了 Qt 框架及其对 OpenGL 的使用。它们的跨平台特性对我非常有吸引力，我学到了很多关于在 Qt 上构建磨坊/管道的东西，但是使用 OpenGL 比我希望的更具挑战性。

我已经在几本书和谷歌上找到了很好的教程，但是当我尝试实现它们时，它们跳来跳去，或者似乎不太有效。IDE 中提供的示例有很多花里胡哨，几乎没有任何解释。当我尝试实现“使用 Qt 4 进行 C++ GUI 编程”中的示例时，它没有正确编译。OpenGL上有一套比较有名的“NeHe”教程，但它们不是用Qt实现的，“The Independent Qt Tutorial”制作的配套系列非常简短。

我将非常感谢一个进展非常缓慢并将 Qt 和 OpenGL 一起介绍的示例。当我从一个名叫 Daniel Eder 的人那里读到它时，有[一个博客条目让事情变得更加清晰。](http://www.deder.at/wordpress/?p=132)但他实际上并没有在讨论的那部分编写代码。

具体来说，如果我能在 Qt 中得到一些非常简单的东西，比如可以旋转的立方体，或者更复杂的东西，比如球体，我就有足够的牵引力来理解其他教程。我当然想自己编写代码，但我什至无法到达可以鬼混的地方，哈哈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T13:27:53.023

以下是一些有**教程和示例**的地方：

*   Qt Dev 网络中还有一个[Wiki ，您可能会发现它很有用。](http://qt-project.org/wiki/NeHe_in_Qt)我特别推荐[Wesley Stessens 的](http://wesley.vidiqatch.org/)博客，它对我个人有很大帮助。

*   [Nehe](http://nehe.gamedev.net/tutorial/your_first_polygon/13002/)网站提供了一个很好的教程，您可以在其中找到一些移植到 Qt 的示例。

*   [在Qt Creator/SDK](http://qt.nokia.com/downloads)中也有很多 QtOpenGL 的例子可以很方便。我强烈建议您看一下它们，因为它们非常易于理解和使用。

有了这个，我的下一步就是阅读这两**本书**：

*   使用 Qt 4 进行 C++ GUI 编程，第 3 版

*   OpenGL 编程指南：学习 OpenGL 的官方指南，第 7 版

**在相关文档/参考手册等**中寻求帮助时，我也很高兴：

*   [Qt 文档](http://qt-project.org/doc/)

*   [QtOpenGL 模块](http://qt-project.org/doc/qt-4.8/qtopengl.html)

*   [OpenGL 文档](http://www.opengl.org/documentation/)

在这个级别，您可以立即解决您的实施问题:)

祝你好运。

# android - 初学者使用 eclips 学习 Unity 3d

> ID：10925306
> 
> 赞同：1
> 
> 时间：2012-06-07T03:28:23.443
> 
> 标签：android, unity3d

我是unity 3d的新手。我对它有一点了解。听说unity 3d是用来制作游戏的。它也可以用来制作android游戏。所以我需要从头开始学习它。你有什么好的链接、文档、视频可以用 android 学习吗？拜托....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T12:39:56.553

我想你可以去[http://www.unity3dstudent.com/](http://www.unity3dstudent.com/)学习基础知识。

而要做Andoid的东西，你应该检查你使用的功能是否在 [http://unity3d.com/support/documentation/Components/index.html](http://unity3d.com/support/documentation/Components/index.html) 取消选中所有平台exept Android。

# sql - 这组语句如何使用 F5？

> ID：10925308
> 
> 赞同：0
> 
> 时间：2012-06-07T03:28:41.767
> 
> 标签：sql, oracle, toad

这是我的陈述

* * *

```
SELECT BATCH_MANAGE.BATCH_SEQ_NUM.NEXTVAL
FROM QUEUE;

INSERT INTO batch_manage.wrk_user
(batch_sequence_number, source_number, status, locale_sid_key, timezone_sid_key, email_encoding_key, language_locale_key)

VALUES (:batch_id, :badge, :status, :location, :timezone, :email_encoding, :language);

SELECT *
FROM batch_manage.wrk_user; 
```

* * *

基本上，如果我使用 F9，我可以单独运行这些，但我想修改它，以便按下 F5，它将运行所有这些并最终在最后一次选择时产生答案

所有的 INSERT（除了 batch_id），用户必须在开头输入。我尝试声明一个变量，但它不会将其存储`BATCH_MANAGE.BATCH_SEQ_NUM.NEXTVAL`到其中。

这是我第一次使用 TOAD 甚至 SQL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T03:37:46.980

也许选择整个脚本会起作用：`CTRL`+ `A`then`F5`

当然，除非关闭自动提交。

# java - Inputstream 中的 Java readObject 占用 50% 的 CPU

> ID：10925310
> 
> 赞同：1
> 
> 时间：2012-06-07T03:28:58.760
> 
> 标签：java, multithreading

我遇到了一个奇怪的问题，这个线程从输入流中读取，特别是 readObject。线程正在阻塞调用，就像假设的那样，因为我尝试放置日志调试语句并且它显示了它的阻塞。问题是这个线程仍然被标记为在分析器中运行，它占用了我 50% 的 cpu 使用率。我有一个与此类似的线程，它可以正确阻塞，阻塞时占用 0% cpu。我对这里可能出现的问题感到困惑。

由于我是新用户，我无法发布图片，请参阅。图中绿色表示运行，黄色表示阻塞或等待。

![http://i.imgur.com/5FPyZ.png](../Images/219cb7ee9847a298477bf43916eb9703.png)[此处](https://i.imgur.com/5FPyZ.png) 还提供未缩放的图像：

主要的

```
 {
    SocketFactory factory = SocketFactory.getDefault();
    Socket tcpSocket = factory.createSocket("localhost", 5011);
    IoTcpReadRunnable ioTcpReadRunnable = new IoTcpReadRunnable(new MessageProcessor()
    {
        @Override
        public void enqueueReceivedMessage(Object message)
        {
            System.out.println("MessageReceived Enqueued.");
        }

        @Override
        public void enqueueMessageToWrite(Envelope message)
        {
            System.out.println("Message Enqueued to Write.");
        }
    }, tcpSocket);

    new Thread(ioTcpReadRunnable, "ClientExample IoTcpRead").start(); 
```

}

TcpRead 可运行

```
public final class IoTcpReadRunnable implements Runnable {
public static final Logger logger = LoggerFactory.getLogger(IoTcpReadRunnable.class);
protected MessageProcessor<MessageType> messageProcessor = null;
protected Socket tcpSocket = null;
protected ObjectOutputStream outputStream = null;
protected ObjectInputStream inputStream = null;
protected boolean connected = false;

public IoTcpReadRunnable(MessageProcessor<MessageType> messageProcessor, Socket tcpSocket)
{
    this.messageProcessor = messageProcessor;
    this.tcpSocket = tcpSocket;
    this.init();
}

protected void init()
{
    try
    {
        this.outputStream = new ObjectOutputStream(tcpSocket.getOutputStream());
        this.outputStream.flush();

        this.inputStream = new ObjectInputStream(tcpSocket.getInputStream());
    }
    catch (IOException ex)
    {
        logger.error("Tcp Socket Init Error Error ", ex);
    }

}

public boolean isConnected()
{
    return connected;
}

protected synchronized Object readObject() throws IOException, ClassNotFoundException
{
    Object readObject = null;
    //blocks here
    logger.trace("{} About to block for read Object");

    readObject = this.inputStream.readObject();
    logger.trace("{} Read Object from Stream: {} ", "", readObject);

    return readObject;
}

public void close()
{
    try
    {
        //todo
        this.connected = false;
        this.outputStream.flush();
        this.outputStream.close();
        this.inputStream.close();
        synchronized (tcpSocket)
        {
            this.tcpSocket.close();
        }
    }
    catch (IOException ex)
    {
        logger.error("Error closing Socket");
    }
}

@Override
public void run()
{

    this.connected = true;

    while (this.connected)
    {
        try
        {
            Object readObject = readObject();

            if (readObject != null)
            {
                this.messageProcessor.enqueueReceivedMessage((MessageType) readObject);
            }
            else
            {
                logger.error("Read Object is null");
            }
        }
        catch (IOException ex)
        {
            logger.error("TcpRecieveThread IOException", ex);
        }
        catch (ClassNotFoundException ex)
        {
            logger.error("TcpRecieveThread ClassnotFound", ex);
        }
    }
    this.close();

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T03:36:12.180

1.  剖析它。这可能会告诉你很多。

2.  是的 - 使用 Java ObjectIOStreams 序列化和反序列化对象*是*相对 CPU 密集型的。

3.  您似乎没有在 IO 管道中使用 BufferedInputStream / BufferedOutputStream ，因此很有可能一次读取和写入一个字节的数据。这可能会显着增加您的 CPU 使用率。

* * *

> 我是说这个线程应该被阻塞并在调用 ReadObject 时占用 0% 的 cpu。

我认为您从根本上误解了 I/O 的一般`readObject`工作方式，特别是工作方式。当您调用该方法时，它会进行一次（或可能多次）系统调用以从套接字中获取字节。然后，它解码这些字节以确定需要创建哪些对象，然后创建并初始化它们。所有这些工作都占用了被视为“用户时间”或“系统时间”处理的 CPU 时间。CPU 不计入进程的唯一时间是/如果`read`系统调用必须等待网络数据包到达。

我也不相信那些“分析”结果。首先，直接阅读您的代码表明该`main`方法创建了一个新线程，启动它，然后立即返回。然而，这些结果似乎表明“主”线程正在连续运行。那是荒谬的......并且让人怀疑您用来进行分析的方法和/或您向我们解释它们的方式。

* * *

还有一件事要检查。你看过日志文件吗？日志记录是否正确配置？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T04:25:59.027

也许你可以看看这种方式来改进它。

1.  尝试使用自定义 writeObject 和 readObject()

2.  试用 Google 协议缓冲区

3.  压缩流

4.  当你序列化一个对象时，只为需要的属性提供序列化。不要序列化整个对象。所以使用瞬态。

值得一看的讨论： [Java 对象序列化性能提示](https://stackoverflow.com/questions/602079/java-object-serialization-performance-tips)

# c# - Azure Compute Emulator 中的内部端口冲突

> ID：10925311
> 
> 赞同：1
> 
> 时间：2012-06-07T03:29:00.803
> 
> 标签：c#, azure, port, azure-compute-emulator

我有一个内部端点设置如下：

```
<InternalEndpoint name="TcpSvcEndpoint" protocol="tcp" port="20000" /> 
```

端点将由 NetTcp WCF 服务使用。如果我在计算模拟器中运行 1 个实例，则配置工作正常。但是在计算模拟器中有 2 个或更多实例（Visual Studio 调试 Azure 项目），相同的端口被分配给所有实例。这当然会使所有服务（第一个实例除外）的 WCF NetTcp 初始化失败，并出现预期异常“ *IP端点上已经有一个侦听器。确保..... SocketException：每个套接字只有一次使用...... .* ".

我的理解是模拟器会为每个实例增加端口。如果不是这样，在 Visual Studio 中调试时如何在计算模拟器上测试多个实例？

我不想使用带有“*”的动态端口设置。

为了澄清起见，我正在访问 RoleEnvironment 以获取分配的端口。

```
RoleEnvironment.CurrentRoleInstance.InstanceEndpoints["TcpSvcEndpoint"].IPEndpoint.Port; 
```

我正在使用 Azure SDK 1.6。（2011 年 11 月版）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T05:29:24.677

使用 Windows Azure SDK 1.5 及更高版本，多个实例具有不同的 IP 地址，但与 EndPoint 设置中定义的端口相同，如我的[这篇博客](http://blogs.msdn.com/b/avkashchauhan/archive/2011/09/16/whats-new-in-windows-azure-sdk-1-5-each-instance-in-any-role-gets-its-own-ip-address-to-match-compute-emulator-close-the-cloud-environment.aspx)所述。

他们的工作方式是，如果您定义了一个带有 2 个实例的端口 10000 的 TCP 端点，那么您将获得如下实例 IP 地址：

*   实例 #1 - 127.255.0.1:10000
*   实例 #2 - 127.255.0.2:10000

因此，如果您必须在计算模拟器中测试服务的所有实例。您需要将 IPAddress 和 Port 组合起来以测试应用程序。

# algorithm - 弗洛伊德算法解释

> ID：10925313
> 
> 赞同：0
> 
> 时间：2012-06-07T03:29:18.577
> 
> 标签：algorithm, floyd-warshall

关于

```
floyds(int a[][100],int n). 
```

'a' 和代表什么以及 a 的两个维度中的每一个代表什么？

“n”代表什么？

我有一个位置列表，其中包含这些位置之间的连接列表，并计算了这些连接之间相互连接的距离。现在我需要找到任何给定两个位置（floyd's）之间的最短路径——但需要了解如何应用`floyds(int a[][100],int n)`到我的位置数组、城市词典和连接数组。

仅供参考 - 使用目标 C - iOS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T05:22:41.750

`n`是图中的节点数。

`a`是图的[距离矩阵](http://en.wikipedia.org/wiki/Distance_matrix)。`a[i][j]`是从节点 i 到节点 j 的边的成本（或距离）。

（如果您需要更多有关该概念的帮助，请阅读[邻接矩阵的定义。）](http://en.wikipedia.org/wiki/Adjacency_matrix)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T03:34:55.603

```
/* Assume a function edgeCost(i,j) which returns the cost of the edge from i to j

2    (infinity if there is none).

3    Also assume that n is the number of vertices and edgeCost(i,i) = 0

4 */

5

6     int path[][];

7     /* A 2-dimensional matrix. At each step in the algorithm, path[i][j] is the shortest path

8        from i to j using intermediate vertices (1..k−1).  Each path[i][j] is initialized to

9        edgeCost(i,j).

10     */

12     procedure FloydWarshall ()

13        for k := 1 to n

14           for i := 1 to n

15              for j := 1 to n

16                 path[i][j] = min ( path[i][j], path[i][k]+path[k][j] ); 
```

[http://en.wikipedia.org/wiki/Floyd-Warshall](http://en.wikipedia.org/wiki/Floyd-Warshall)

维基很好~~~

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T07:15:44.083

```
floyd-warshall(W) // W is the adjacent matrix representation of graph..
 n=W.rows;
 for k=1 to n
    for i=1 to n
       for j=1 to n
            w[i][j]=min(W[i][j],W[i][k]+W[k][j]);
 return W; 
```

这是一个 dp 算法。在第 k 次迭代中，W[i][j] 是 i 和 j 之间的最短路径，最短路径的顶点（不包括 i 和 j）来自集合 {1,2, 3...,k-1,k}.In min(W[i][j],W[i][k]+W[k][j]), W[i][j] 是计算的在第 k-1 次迭代时 i 和 j 之间的最短路径，因为中间顶点来自集合 {1,2...k-1}，所以这条路径不包括顶点 k。在 W[i][k]+W[k][j] 中，我们在路径中包含顶点 k。两者之间的最小值是第 k 次迭代的最短路径。基本上我们检查是否应该在路径中包含顶点 k。

# unix - AIX 中的 rc.boot 脚本文件在哪里？我可以在运行环境下访问和修改它吗？

> ID：10925314
> 
> 赞同：0
> 
> 时间：2012-06-07T03:29:25.390
> 
> 标签：unix, aix, boot

我想获取 rc.boot 脚本文件并修改 AIX 系统中的某些内容。如何找出来？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T02:03:36.640

我建议**不要**修改 AIX 上的 rc.boot 脚本。

1.  在引导过程的那个时刻启动的服务并不多——很容易引入一些可能导致系统无法完全引导的东西。
2.  可能会在没有警告的情况下被 IBM 的更新取代 - 从而消除您的更改。

遵循[comp.unix.aix](http://www.faqs.org/faqs/aix-faq/part1/section-59.html#b)中的方法。在过去的 20 年里，我工作过的所有 AIX 商店都使用了这种设置或类似的设置。我目前在 50 多台服务器上使用它（除了它被称为`rc.server`而不是`rc.local`）。将其放置在`/etc/inittab`如图所示（在 之后`rc.nfs`）中可确保 NFS 服务在您的脚本运行时启动并运行。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T03:33:23.007

我用 Google 搜索`rc.boot`，第*一个*结果是[来自 IBM 的文档](http://pic.dhe.ibm.com/infocenter/aix/v6r1/topic/com.ibm.aix.files/doc/aixfiles/rc.boot.htm)。

它位于`/sbin/rc.boot`。

# php - 防止文本区域在转到另一个页面并返回后重置

> ID：10925317
> 
> 赞同：1
> 
> 时间：2012-06-07T03:29:40.130
> 
> 标签：php, html, textarea

当用户单击页面内的链接然后单击“返回”按钮时，页面中文本区域的默认行为是重置其内容。我怎样才能防止这种情况？

现在我有一个带有文本区域的 PHP 页面。PHP 脚本会生成一个小内容并放入 textarea，但如果用户单击链接然后单击后退按钮，则文本不会再出现在 textarea 中。

ps.：请不要使用会话。

我实际上在做什么：

页面.php

```
<textarea readonly="readonly"><?php echo $somevarhere ?></textarea>
<a href="nicelink.php">Hey</a> 
```

因此，当我打开 page.php 并单击“嘿”时，我会转到 nicelink.php。但是，如果我按下后退按钮，textarea 的内容就消失了。我必须按 F5 才能让 PHP 再次生成页面，从而生成 textarea 内容。如何防止textarea被重置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T03:49:59.377

From what I understand, you don't want the visitor to change the TextArea. Maybe try setting it to read only?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T06:20:50.810

您可以将 $somevarhere 的内容放入 javascript 变量中，并在 $somevarhere 为空时通过 ajax 加载它，在加载页面或通过事件处理程序时通过 json 等传输它。

那很复杂，但没有应该工作的会话......

# hibernate - HQL 查询或获取平均数的标准。执行的交易

> ID：10925323
> 
> 赞同：0
> 
> 时间：2012-06-07T03:31:32.530
> 
> 标签：hibernate, aggregate-functions

我正在尝试获取 HQL 查询或标准以获取平均编号。在给定日期范围和资源的情况下，在特定日期执行的交易。

表 user_transactions 具有以下字段（和相应的域类 UserTransaction）transaction_id、user_id、resource、transdate。

现在我正在做：

```
UserTransaction.createCriteria().list {   
                between('transdate', fromDate, toDate)
                projections {  
                  avg('transaction_id')  
                  groupProperty('graresource')
                  groupProperty('transdate')
                 }
               } 
```

上述方法对吗？如果不是，应该如何查询，以便我获得所有用户在某个日期对资源执行的平均事务数？

提前致谢

# html - CSS：img 的行内块对齐

> ID：10925325
> 
> 赞同：0
> 
> 时间：2012-06-07T03:31:38.633
> 
> 标签：html, css

无论出于何种原因，此图像使标记的其余部分无法在其容器内对齐，尽管它被设置为显示内联块：

[http://jsfiddle.net/ncQXD/](http://jsfiddle.net/ncQXD/)

对你们来说，应该是一些简单的事情。对我来说，我已经花了几天时间试图解决这个问题。

顺便说一句，我不想​​使用浮动。我不完全知道如何控制他们的怪癖，也没有时间去学习它。如果您能不使用它们，我将不胜感激。但是，如果你带我去一个涵盖他们所有不幸等的课程，我可以参加关于花车的速成课程。

现在，我需要坚持使用非浮动 CSS。

PS。边框仅用于“调试”，实际上没有必要

**HTML：**

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
    <link rel="stylesheet" type="text/css" href="css_test2.css" />
</head>
<body>
<div id="header">
    <img src="http://img710.imageshack.us/img710/938/imgbz.png" id="logo">
    <a href="#" id="logo_txt">Title goes here</a>
    <span id="social_media">Social media links</span>
</div>
</body>
</html> 
```

**CSS：**

```
#header {
    border: 1px solid red;

    width: 800px;
    height: 123px;
    margin: 0px auto;
    padding: 0px;

    background-color: rgb(181, 230, 29);
    }

#logo {
    border: 1px solid red;
    display: inline-block;

    width: 172px;
    height: 123px;
    }

#logo_txt {
    border: 1px solid black;
    display: inline-block;

    width: 100px;
    height: 123px;
    }
#social_media {
    border: 1px solid black;
    display: inline-block;

    width: 300px;
    height: 123px;
    text-align: right;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T03:37:47.590

解决此问题的最快方法是添加`vertical-align: top`样式`#logo`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T03:41:52.837

添加

```
vertical-align:text-top; 
```

根据您的图像样式，`vertical-align:top;`也可以，但是我使用了文本顶部，因为它与文本对齐

默认的垂直对齐方式是基线，它将图像的底部与其他 div 中的文本对齐。

[小提琴](http://jsfiddle.net/mowglisanu/ncQXD/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T06:15:26.367

嗨，如果您`display inline-block`以任何方式使用而不是定义一个属性

```
vertical-align:top; 
```

因为默认情况下属性`vertical-align:middle;`比定义`verticle-align`属性要好。

现在 sam think in `img` **tag在您的****css**中 定义您的**img 标签**属性 。 **`verticel-align:top`**

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T03:35:35.470

`float`左边的元素，一切正常：http: [//jsfiddle.net/ncQXD/1/](http://jsfiddle.net/ncQXD/1/)

我添加了这个 CSS：

```
#header > * {
    float: left;
}

#header {
    overflow: auto;
}​ 
```**

# asp.net - 发布时 HTML5 输入类型无法正确呈现

> ID：10925331
> 
> 赞同：1
> 
> 时间：2012-06-07T03:32:48.513
> 
> 标签：asp.net, visual-studio-2010, html

我已经下载并安装了这个包来支持 HTML5 输入类型

[http://support.microsoft.com/kb/2468871](http://support.microsoft.com/kb/2468871)

以下是我页面中的代码

```
<!DOCTYPE HTML>

<html>
<head runat="server">

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
        <div>
            <input id="testEmail" type="email" />
        </div>
        <div>

        </div>
        <asp:TextBox ID="testEmailAsp" runat="server" type="email"></asp:TextBox>
        <asp:TextBox ID="testUrlAsp" runat="server" type="url"></asp:TextBox>
        <asp:TextBox ID="textBoxTest" runat="server"></asp:TextBox>
        <asp:Button ID="Button1" runat="server" Text="Button" />
    </form>
</body>
</html> 
```

此代码是在 Visual Studion 2010 中运行时生成的

```
<input name="testEmailAsp" type="text" id="testEmailAsp" type="email" />
<input name="testUrlAsp" type="text" id="testUrlAsp" type="url" />
<input name="textBoxTest" type="text" id="textBoxTest" />
<input type="submit" name="Button1" value="Button" id="Button1" /> 
```

发布到服务器时。它呈现这样。

```
<input name="testEmailAsp" type="text" id="testEmailAsp" type="email" />
<input name="testUrlAsp" type="text" id="testUrlAsp" type="url" />
<input name="textBoxTest" type="text" id="textBoxTest" />
<input type="submit" name="Button1" value="Button" id="Button1" /> 
```

如你看到的。它呈现类型 2 时间，因此标记不正确，这使得移动设备上的[输入类型键盘](http://www.petefreitag.com/item/768.cfm)不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T04:26:43.543

我也必须在服务器上安装它，我不知道

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:08:33.157

这可能听起来很傻，但 IE9 是否支持 HTML5 输入 type="email", url

[http://html5test.com/](http://html5test.com/)

# c - 二维数组中间的内存地址越界？

> ID：10925333
> 
> 赞同：0
> 
> 时间：2012-06-07T03:32:51.770
> 
> 标签：c, memory, malloc

首先，对不起标题。我真的不太确定如何表达它。

在 C 中，我有一个 2D 字符串数组，声明和分配如下：

```
char ** args = malloc(50*(num_args+1));
for (int i = 0; i < num_args+1; i++){
    args[i] = malloc(50); 
```

我在一种“基本的 shell”类型程序中使用它，模仿 bash 的一些特性，因此是 num_args 变量。

在多台机器上编译运行，args[4]处的地址总是越界。这是相关的 gdb 输出：

```
(gdb) print args[0]
$2 = 0x609140 "gcc"
(gdb) print args[1]
$3 = 0x609180 ""
(gdb) print args[2]
$4 = 0x6091c0 ""
(gdb) print args[3]
$5 = 0x609200 ""
(gdb) print args[4]
$6 = 0x636367 <Address 0x636367 out of bounds>
(gdb) print args[5]
$7 = 0x609280 "" 
```

如您所见，args[4] 之前和之后的地址都是有效的。这个地址怎么会越界？

使用此代码的整个函数在[这里](http://pastebin.com/iRh3N3x3)和下面：

```
void parse(const char * command){
    // first parse built-ins (ie, not a call to the OS)
    if (strcmp(command, "history") == 0){
        show_history();
        return;
    }
    if (strcmp(command, "exit") == 0){
        exit(0);
    }

    hist_add(command);

    // copy 'command' into arg_string, while ignoring any possible comments
    char * arg_str;
    int num_args = 1;
    arg_str = malloc(strlen(command));
    for (int i = 0; i < strlen(command); i++){
        if (command[i] == '#' || command[i] == '\n') break;
        if (command[i] == ' ') num_args++;
        arg_str[i] = command[i];
    }

    // split arg_str into a string array where each string is an argument
    // to the command
    char ** args = malloc(num_args+1);
    for (int i = 0; i < num_args+1; i++){
        args[i] = malloc(50);
    }
    int tokens = 0;
    const char token = ' ';
    char * next = strtok(arg_str, &token);
    while (next != NULL){
        strcpy(args[tokens++], next);
        next = strtok(NULL, &token);
        if (next == NULL)
            args[tokens] = (char *)NULL;
    }

    exec_command(args);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T03:49:48.427

您的问题的答案在于它*不是*二维数组。相反，`args`包含指向一维指针数组的第一个元素的指针，并且每个元素本身都可以指向一维数组的元素`char`（这通常称为“不规则数组”，因为这些一维数组可以是不同的长度）。

因此，一个地址`args[4]`可能越界的原因是三个指针,`args[3]`和是完全独立的值。`args[5]``args[3]``args[4]``args[5]`

它很可能`args[4]`被不正确的值覆盖，因为它实际上位于您分配的区域之外 - 您没有为 . 指向的数组分配足够的空间`args`。您的`malloc()`调用请求`num_args + 1` *bytes*，但您希望有足够的空间用于`num_args + 1` *指针*，每个指针占用一个以上字节。我建议将您的`malloc()`电话更改为：

```
char ** args = calloc(num_args + 1, sizeof args[0]); 
```

（而不是使用`calloc()`你当然可以自己乘法`num_args + 1`并`sizeof args[0]`调用`malloc()`，但如果你这样做，那么你需要检查以确保乘法不会溢出`SIZE_MAX`. `calloc()`应该为你处理）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T03:35:13.333

to 的参数`malloc()`是要分配的字节数。我猜想保存所有类型的`num_args`指针是不够的，而且考虑到你的字符串长度也不够。我没有详细查看您的完整代码，但您可能需要分配所有指向参数字符串的指针。然后循环并为每个字符串（如果它们被复制）分配足够的空间，其中是您需要存储的字符串的最大长度。`char *``50``malloc(sizeof(char *) * num_args)``malloc(sizeof(char) * len)``len`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T04:41:02.440

您在以下几行中可能存在内存分配错误和性能错误：

```
arg_str = malloc(strlen(command));
for (int i = 0; i < strlen(command); i++){ 
```

通常有一个函数`strdup()`可用于复制字符串。当它不可用时，您使用：

```
char *arg_str = malloc(strlen(command) + 1); 
```

也为终端空值留出足够的空间`'\0'`。

`strlen()`性能错误是，如果字符串很长，则对循环的每次迭代进行评估都是昂贵的。计算一次长度并重用它——除非字符串的长度在每次迭代中都不同。

你不是 null 终止你的字符串；这样做至关重要。

```
int len = strlen(command);
int i;  // Must be in scope after the loop ends
for (i = 0; i < len; i++){
    if (command[i] == '#' || command[i] == '\n') break;
    if (command[i] == ' ') num_args++;
    arg_str[i] = command[i];
}

// i is out of scope if you use for (int i = 0;...
arg_str[i] = '\0'; 
```

缺少空终止可能是您的其他问题的原因。如有疑问，请随时打印内容，但要小心，不要让字符串为 null 终止。

# email - 有助于减少退回邮件的推荐电子邮件标题和内容

> ID：10925336
> 
> 赞同：0
> 
> 时间：2012-06-07T03:33:20.657
> 
> 标签：email, spam-prevention, email-spam, php

现在看来，主要服务提供商比以往任何时候都更严厉地打击垃圾邮件并真正专注于过滤。

这对于需要电子邮件验证的网站来说是一个巨大的问题，因为没有收到即时电子邮件的用户通常会一起推迟服务。

所以，我的问题是；

***电子邮件中最重要的关键字和标题是什么，以确保交付给主要的电子邮件服务提供商。***

还有任何其他技术；允许您提交服务器 IP..etc 的白名单表单的链接将是一个奖励。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T03:41:03.447

1）不要使用假地址，那是垃圾邮件的味道

2)为您的域设置[DomainKeys](http://en.wikipedia.org/wiki/DKIM)

3)为您的域设置[SPF](http://en.wikipedia.org/wiki/Sender_Policy_Framework)

# java - jboss 没有建立休眠/JNDI 连接

> ID：10925340
> 
> 赞同：0
> 
> 时间：2012-06-07T03:33:35.843
> 
> 标签：java, eclipse, hibernate, jboss, struts2

我正在使用 JBoss 4.2 GA 并使用 JNDI 命名为我的数据源部署我的应用程序。

我在本地服务器上对其进行了测试，它工作正常，但是当我将它放在远程服务器上时，它无法建立数据库连接，而且 JBoss 中也没有日志。

我正在使用 oracle 数据库。

在远程服务器上，“abc-ds.xml”具有适当的连接详细信息。

请帮我把它准备到晚上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T03:48:11.947

确保远程服务器可以看到数据库服务器。有时您必须使用数据库主机的完全限定名称。可能在 xml 文件中尝试使用 db IP 地址。查看是否可以从 jboss 机器 ping 数据库服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T04:46:24.773

可能是您无法在远程服务器中创建数据源。

# multithreading - openmp创建随机数量的线程

> ID：10925341
> 
> 赞同：0
> 
> 时间：2012-06-07T03:33:39.927
> 
> 标签：multithreading, gcc, openmp

第一篇文章！

主要编辑..

我有这个程序用于计算点积，使用 gcc 和 -fopenmp 编译。问题是，它没有创建我告诉它创建的线程数。在一台计算机上，它将不断产生 2 个线程，在另一个 4 上。这些数字都不是给它们的数字。我正在使用（静态，块大小）调度，这是一种间接方式，可以通过更改块大小来选择要创建的线程数。我觉得运行时中有一些东西覆盖了我的指令，因为所有计算机都使用相同的可执行文件。我还注意到，如果我给程序一个等于总负载的块大小，它将使用一个线程，但仍会产生与以前相同数量的线程。我究竟做错了什么？

```
 #pragma omp parallel shared(vector1, vector2, loadsize, vectorsize, final_sum) private(i, threadsum, threadid)
    {
    threadsum = 0;
    threadid = omp_get_thread_num();

    #pragma omp for schedule(static, loadsize)
        for (i = 0; i < vectorsize; i++){
            threadsum += vector1[i] * vector2[i];}
     printf("thread %d reached up to index %d with a sum of %d\n", threadid, (i-1), threadsum); 
    #pragma omp critical
        final_sum += threadsum;
}
printf("final sum: %d", final_sum); 
```

谢谢，

扎克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T04:44:21.763

据我所知，块大小代表线程要执行的工作量。它从不控制线程的产生。正如您从代码中看到的那样，线程是在您调用时产生的

```
#pragma omp parallel 
```

不是当你调用

```
#pragma omp for schedule(static, loadsize) 
```

静态和动态调度用于确定分配给线程的工作量，无论是在编译时还是运行时。因此，不要将调度与线程数混淆。

如果需要控制线程数，请使用

```
omp_set_num_threads() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T09:11:53.710

OpenMP 有一个称为动态线程数的功能。运行时可以自由决定并行块是否可以使用比指定的更少的线程执行`OMP_NUM_THREADS`。一些运行时默认启用它，如果是这样，可以通过以下方式之一禁用它：

*   将`OMP_DYNAMIC`环境变量的值设置为`FALSE`；
*   打电话`omp_set_dynamic(0)`；
*   `num_treads(#threads)`使用该子句显式指定给定并行区域中的线程数。

`omp_set_num_threads()`以及环境变量的值`OMP_NUM_THREADS`设置将使用的线程数的上限，但实际数量仍可能小于启用动态线程的数量。的默认值`OMP_NUM_THREADS`取决于实现：它等于 GCC 和 Intel 编译器的逻辑 CPU 数量，并且等于`2`最新的 Oracle Studio 编译器。

# android - 为什么我的布局会导致我的应用崩溃？

> ID：10925345
> 
> 赞同：0
> 
> 时间：2012-06-07T03:34:35.483
> 
> 标签：android, android-layout

为了避免布局崩溃，我需要遵守哪些规则？

例如，我有这个布局，只有 4 个按钮和 4 个 TextView。我真的不知道为什么它会在某些设备上导致崩溃，而在其他设备上它可以正常工作。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/ConnectButton"
        android:layout_width="300dp"
        android:layout_height="70dp"
        android:layout_gravity="center"
        android:gravity="center"
        android:text="@string/Connect" >
    </Button>

    <Button
        android:id="@+id/DisconnectButton"
        android:layout_width="300dp"
        android:layout_height="70dp"
        android:layout_gravity="center"
        android:gravity="center"
        android:text="@string/Disconnect" >
    </Button>

    <Button
        android:id="@+id/NoAlertButton"
        android:layout_width="120dp"
        android:layout_height="50dp"
        android:layout_gravity="center"
        android:gravity="center"
        android:text="@string/NoAlert" >
    </Button>

    <Button
        android:id="@+id/MildAlertButton"
        android:layout_width="120dp"
        android:layout_height="50dp"
        android:layout_gravity="center"
        android:gravity="center"
        android:text="@string/MildAlert" >
    </Button>

    <Button
        android:id="@+id/HighAlertButton"
        android:layout_width="120dp"
        android:layout_height="50dp"
        android:layout_gravity="center"
        android:gravity="center"
        android:text="@string/HighAlert" >
    </Button>

    <TextView
        android:id="@+id/AlertLevelSelectionLabel"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/SelectAlertLevel" >
    </TextView>

    <TextView
        android:id="@+id/CurrentRSSILevelLabel"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/CurrentRSSILevel" >
    </TextView>

    <TextView
        android:id="@+id/ConnectedToLabel"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/ConnectToLabel" >
    </TextView>

    <TextView
        android:id="@+id/ImmediateAlert"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#ffff3333"
        android:text="@string/ImmediateAlert"
        android:textSize="42sp"
        android:textStyle="bold" >
    </TextView>

</LinearLayout> 
```

崩溃只有在点击按钮后才会出现，所以它可能与它们之后出现的TextViews有关，但我不知道为什么TextViews会导致布局崩溃。我认为这是一个布局问题，因为同一应用程序的水平布局工作正常。

# sql - 识别“转换失败错误”的来源

> ID：10925348
> 
> 赞同：-1
> 
> 时间：2012-06-07T03:34:43.293
> 
> 标签：sql, sql-server, sql-server-2008

我正在尝试执行查询：

```
select 
distinct
billed.accn_id,
payors.PAYOR_PRIORITY,
payors.PAYOR_NAME,
payors.PAYOR_ID,
payorconfig.PAYOR_GROUP,
payorconfig.CONTACT1_ADDR1,
payorconfig.CONTACT1_ADDR2,
payorconfig.CONTACT1_CITY,
payorconfig.CONTACT1_STATE,
payorconfig.CONTACT1_ZIPCODE,
payorconfig.CONTACT1_PHONE,
payorconfig.CONTACT1_FAX,
payorconfig.CONTACT1_EMAIL,
patient.PT_ID,
patient.PT_ADDR1,
patient.PT_ADDR2,
patient.PT_CITY,
patient.PT_ST_ID,
patient.PT_ZIPCODE,
patient.PT_HOME_PHM

from accn_billed_procedures billed
left outer join accn_payors payors
on payors.accn_id=billed.accn_id

left outer join payor_config payorconfig
on payorconfig.payor_id=payors.x_payor_id

left outer join accn_demographics demos
on billed.accn_id = demos.accn_id

left outer join patient_demographics patient
on demos.pt_id=patient.pt_id 
```

并收到此错误：

> 消息 245，级别 16，状态 1，行 1 将 varchar 值“121CLAIMS”转换为数据类型 int 时转换失败。

我应该怎么知道究竟是什么原因造成的？

是否有可能在连接列的数据类型不匹配的连接上出现此错误？

非常感谢您的指导和帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T04:50:34.667

只是尝试一下，但是因为您的查询在 select 语句中没有什么复杂的 - 尝试转换的唯一合乎逻辑的地方将在您的一个连接限定符内：“on payors.accn_id=billed.accn_id”等.

我怀疑您的一个表实际上是存储字段： accn_id 或 pt_id 等作为 VARCHAR （或者可能是 VARCHAR 值意外存储在该列中）

无论如何，数据似乎是可疑的..一方面你有一个 int，另一个是字符串。最好的办法是使所有 ID 字段都为 VARCHAR 类型，因为在查询期间尝试将它们转换为性能可能会破坏性

希望有帮助！

# python - Python 2.7 是否在 Mac OS X 上实现 PEP 370？

> ID：10925351
> 
> 赞同：3
> 
> 时间：2012-06-07T03:35:08.230
> 
> 标签：python, macos

根据[PEP 370](http://www.python.org/dev/peps/pep-0370/)，Mac OS X 上的 Python 将寻找`~/.local/lib/python2.7/site-packages/`

不幸的是，我的 Python（从 python.org 安装）只查看`~/Library/...`Python 怎么了？PEP 是否已过时，或者在其他目录中是否存在适用于 OS X 的不同 Python 版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T05:04:16.840

当前，对于 Python 2.7 和 3.2 的 Python OS X 框架构建，用户 site-packages 目录在`~/Library/Python`而不是`~/.local`. Python 核心开发人员对 PEP 370 的这种差异存在分歧。有关此尚未解决的问题的一些讨论，请参见[http://bugs.python.org/issue8084](http://bugs.python.org/issue8084)。

# jsp - 使用 REFRESH 防止多次发布

> ID：10925359
> 
> 赞同：1
> 
> 时间：2012-06-07T03:36:22.730
> 
> 标签：jsp, servlets

这是我的表单将数据发布到 servlet 的场景，servlet 作为回报对 db 进行更改并将对象附加到请求属性并转发到 JSP 页面。

现在的问题是，如果单击 JSP 上的刷新按钮，则流程会循环返回，并且由于它是转发，因此 servlet 重新输入数据。我实际上可以通过重定向而不是从 servlet 转发到 jsp 页面并将对象作为属性附加到会话而不是请求来解决这个问题。

但我想知道是否有更好的方法来做到这一点？

我不想存储我在会话中遇到的所有内容，有没有办法知道这是否是一个刷新事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:10:25.693

可以使用 发布数据`GET or POST`。如果`GET`方法被刷新，`which is idempotent`，`browser automatically makes request to the server`。

但是，如果方法是`POST`, `which is non-idempotent`, `the browser will raise a popup asking the user to really post the data and this may repeat the operation again`.

如果您使用的是 GET，那么我建议将其更改为 POST。

**但最好的解决方案是 POST + REDIRECT + GET。**

# javascript - iframe 的动态大小和定位

> ID：10925361
> 
> 赞同：0
> 
> 时间：2012-06-07T03:36:32.770
> 
> 标签：javascript, iframe, positioning, resize

我对网页设计和脚本很陌生。我正在尝试构建一个顶部有横幅框架、左侧菜单和右下角大部分的主要内容的站点。我希望横幅随浏览器大小动态调整大小。我在 IE8 上完成了此操作，但在 IE9 上无法正确查看，另外我想要一个跨越框架边界的背景图像我目前正在尝试 iframe，但不能让它们填充浏览器窗口。有时，我可以使 iframe 动态更改大小和/或位置，但它不可靠。我尝试了各种位置类型以及将 iframe 包装在其中并尝试调整它们的大小和位置。这是我拥有的最成功的代码，请原谅任何多余的、未引用的和注释的代码，因为它是失败尝试的剩余部分。

```
<html>
<head>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<title>Mountain Girl Gallery</title>
<style media="screen" type="text/css">
<!--
#layer1 { position: absolute; top: 0px; left: 0px; width: 1000px; height: 95px; visibility: visible}
--!>
<!--
#layer2 { position: absolute; top: 95px; left: 500px; width: 100px; height: 505px; visibility: visible}
--!>
<!--
#layer3 { position: absolute; top: 95px; left: 100px; width: 900px; height: 505px; visibility: visible}
--!>
</style>
<script type="text/javascript">
function frameResize(){
var winW;
var winH;
if (document.body && document.body.offsetWidth) {
winW = document.body.offsetWidth;
winH = document.body.offsetHeight;
}
if (document.compatMode=='CSS1Compat' &&
document.documentElement &&
document.documentElement.offsetWidth ) {
winW = document.documentElement.offsetWidth;
winH = document.documentElement.offsetHeight;
}
if (window.innerWidth && window.innerHeight) {
winW = window.innerWidth;
winH = window.innerHeight;
}

var bframe=document.getElementById('bannerframe');
//var menuframe=document.getElementById('menu');
var mframe=document.getElementById('main');

//var f1=document.getElementById('bannerframe');
//var f2=document.getElementById('menu');
//var f3=document.getElementById('main');

bframe.style.width=winW;
bframe.style.height=winH*.2;
//menuframe.style.width=winW*.15;
//menuframe.style.height=winH*.8;
//menuframe.style.top=(winH*.2)+"px";
mframe.style.width=winW*.85;
mframe.style.height=winH*.8;
mframe.style.top=(winH*.2)+"px";
mframe.style.left=(winW*.15)+"px";

//f1.style.width=bframe.style.width;
//f1.style.height=bframe.style.height;
//menuframe.style.width=winW*.15;
//menuframe.style.height=winH*.8;
//f2.style.top=menuframe.style.top;
//f3.style.width=mframe.style.width;
//f3.style.height=mframe.style.height;
//f3.style.top=mframe.style.top;
//f3.style.left=mframe.style.left;
}
</script>
<script type="text/javascript">
function setSize(){
frameResize();
if(window.attachEvent)
window.attachEvent("onresize",frameResize);
else if(window.addEventListener)
window.addEventListener("resize",frameResize,false);
}
</script>
</head>
<body
style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); background-image: url(mountain%20girl%20background.JPG); background-attachment: fixed; background-position: 50%; height: 657px;"
onresize="frameResize()">
<div align="center">
<iframe style="position: absolute; top: 0px; left: 0px; width: 1000px; height: 200px;"
src="banner.html" name="bannerframe" id="bannerframe" allowtransparency="true" frameborder="0"></iframe></div>

<iframe style="position: relative; top: 200px; left: 0px;"
src="menu.html" name="menu" id="menu" allowtransparency="true"
frameborder="0"></iframe>
<iframe style="position: relative; top: 200px; left: 150px; width: 850px; height: 505px;"
src="home.html" name="main" id="main" allowtransparency="true" onload="setSize()" frameborder="0"></iframe>
</body>
</html> 
```

我愿意接受任何其他建议，但我不想使用服务器端脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T04:00:29.363

现在不建议使用 iframe（框架：不行！）所以几年前我做[了一个示例](http://www.cereal.cl/sandbox/Load-content-w-ajax/)，说明如何在不使用 ajax 刷新的情况下加载内容。这样您就可以更好地控制您的 CSS，然后将其与其他代码混合使用。

干杯。

PS：如果你能设置一个链接来检查你的工作，我会很棒的！

# python - python中的Simperium登录无法进行身份验证

> ID：10925365
> 
> 赞同：0
> 
> 时间：2012-06-07T03:37:37.503
> 
> 标签：python, authentication, simperium

我正在使用最后一个 python api 测试 simperium：

从 simperium.core 导入验证

```
# Global CONST
SIMPERIUM_APP_ID = "..."
SIMPERIUM_API_KEY = "..."
USER_NAME = 'test@test.com'
USER_PWD = 'test'

def newUser(user, pwd):
    auth = Auth(SIMPERIUM_APP_ID, SIMPERIUM_API_KEY)
    print user, pwd
    return auth.create(user, pwd)

def login(user, pwd):
    auth = Auth(SIMPERIUM_APP_ID, SIMPERIUM_API_KEY)
    print user, pwd
    return auth.authorize(user, pwd)

def getApi(auth_token):
    return Api(SIMPERIUM_APP_ID, auth_token)
print newUser(USER_NAME, USER_PWD):
token = login(USER_NAME, USER_PWD)
print token
print getApi(token) 
```

用户是使用有效令牌创建的，但登录失败，请进入`auth.authorize`：

```
Traceback (most recent call last):   File "/Users/**/Proyectos/**/testdata.py", line 22, in <module>
    token = login(USER_NAME, USER_PWD)   File "/Users/**/Proyectos/***/testdata.py", line 17, in login
    return auth.authorize(user, pwd)   File "/Library/Python/2.7/site-packages/simperium/core.py", line 59, in authorize
    response = self._request(self.appname+'/authorize/', data)   File "/Library/Python/2.7/site-packages/simperium/core.py", line 40, in
_request
    response = urllib2.urlopen(request)   File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)   File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 400, in open
    response = meth(req, response)   File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 513, in http_response
    'http', request, response, code, msg, hdrs)   File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 438, in error
    return self._call_chain(*args)   File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 372, in _call_chain
    result = func(*args)   File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 521, in http_error_default
    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp) urllib2.HTTPError: HTTP Error 401: UNAUTHORIZED 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T06:24:11.283

在你的 newUser 函数中，

```
return auth.create('email@address.com', 'password') 
```

应该：

```
return auth.create(user, pwd) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:14:54.557

看起来我缩小了问题的范围。

如果我使用输入的相同电子邮件作为应用程序的用户订阅 simperium，它会拒绝登录，但如果将其更改为其他任何内容，它就可以工作（这是我为发布示例代码而更改的内容。）

所以，我订阅了“sample@sample.com”，它让创建用户（不返回，但在数据浏览中可见）但验证失败。但是，将其更改为“sample@sample.net”可以正常工作。

# c++ - 如何用派生基类替换基类

> ID：10925367
> 
> 赞同：0
> 
> 时间：2012-06-07T03:37:45.467
> 
> 标签：c++, inheritance, virtual

我正在开发一个 API，其中 A 类派生为 B 类。

如果 API 用户想在应用程序级别扩展 A 类和 B 类的功能，那么就会出现问题。

假设应用程序用户提出 AX 类扩展 A 类，BX 类扩展 B 类。在这种情况下，用户没有得到 BX 类的预期行为，因为 B 类的基类是 A 类而不是 AX 类。

想法：应用程序用户可以使用 B 类和 AX 类扩展 BX 类，但在这种情况下，我认为会有已知的菱形行为。

我想知道解决此问题的任何标准方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T03:48:03.617

你的问题有点含糊。无论如何，我建议您特别阅读[C++ FAQ 25](http://www.parashift.com/c++-faq-lite/multiple-inheritance.html)和[问题 25.5](http://www.parashift.com/c++-faq-lite/multiple-inheritance.html#faq-25.5)。问题 25.5 和 25.6 讨论了一些备选方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T03:51:29.933

从模板参数继承的类也是一种选择。伪代码：

```
class A;

template<typename WhichA>
class B : public WhichA;

class AX : public A;

class BX : public B<AX>; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T03:49:14.633

> ...但在这种情况下，我认为会有已知的钻石行为

所以有什么问题 ？`virtual`继承是为了解决这种菱形图案。
如果 的孩子`A`实际上是继承的，那么我认为没有任何问题，除非更改设计。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T04:51:28.937

```
class InterfaceA;

class InterfaceB;

class A : public InterfaceA;

template<class AType>
class B_Template : public InterfaceB, public AType;

// Below is same as class B in example
// Users can use B as if it was class B
typedef B_Template<A> B;   

// User can extend A
class AX : A;

// User can extend B any way they want (you can't police this)
// but the way you wanted in the question was:
class BX : B_Template<AX>;   // Inherits of the extended AX 
```

这解决了您的问题，但正如评论中指出的那样，您应该考虑依赖注入而不是继承。

此外，实际上并不需要 Interface 类，但它可以清楚地说明基类的契约是什么——即*模板参数 AType 必须满足 InterfaceA*。

# bi-publisher - BI Publisher 11g 的调试日志

> ID：10925370
> 
> 赞同：2
> 
> 时间：2012-06-07T03:38:16.050
> 
> 标签：bi-publisher

我在 Weblogic 上运行 BI Publisher。我遇到了问题，可能与为生成报告而发出的 SQL 查询有关。有谁知道如何打开调试以便我可以看到系统正在尝试执行的 SQL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T21:00:06.370

这是如何做到的。通过打开命令提示符并键入以下内容来查找 JAVA_HOME 的位置：

```
>set JAVA 
```

您应该看到如下内容：

```
set ORACLE_HOME=C:\OracleBI\oc4j_bi
set JAVA_HOME=C:\Program Files\Java\jdk1.5.0_16
set J2EE_HOME=%ORACLE_HOME%\j2ee\home 
```

找到 JDK 主位置后，转到该文件夹​​：

```
<JDK_Home>\jre\lib 
```

创建一个名为：xdodebug.cfg 的文本文件，将以下 2 行添加到文件中：

```
LogLevel=STATEMENT
LogDir=<BI_Debug_Log_Directory> 
```

例如：

```
LogLevel=STATEMENT
LogDir=D:\apps\BI_Debug 
```

保存文件并重新启动 WebLogic。

现在应该有许多文件在您运行 BI Publisher 时创建，例如 xdo.log，它将向您展示到底 BIP 在幕后所做的事情。

# python - wxpython定时器不工作

> ID：10925372
> 
> 赞同：1
> 
> 时间：2012-06-07T03:38:54.743
> 
> 标签：python, user-interface, timer, wxpython

在阅读“wxPython in Action”时，我尝试了书中的代码，一个简化的部分，如下：

```
import wx 
import time

class Frame(wx.Frame):  
    def __init__(self, *args, **kwargs):  
        wx.Frame.__init__(self, *args, **kwargs)  
        timer = wx.Timer(self,-1)  
        self.Bind(wx.EVT_TIMER, self.OnTimer,timer)   
        timer.Start(1000, True)  
        self.Show()  
    def OnTimer(self, evt):  
        print time.time(), evt   

app = wx.App(False) 
frm = Frame(None, -1)  
app.MainLoop() 
```

当我运行它时，python 没有给出任何错误，但它也没有打印任何东西。
奇怪，有人知道为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T13:25:12.290

不起作用的原因是因为计时器在 init 方法结束时超出范围并且没有真正运行的机会。正如 GP89 ​​已经指出的那样，您只需将其更改为“self.timer”就可以了。我也有[教程](http://www.blog.pythonlibrary.org/2009/08/25/wxpython-using-wx-timers/)，你可以看看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T09:13:25.280

Change `timer` to `self.timer` and it will work.

I'd be interested to know the reason why it doesn't work as a local variable

I'd guess at something to do with garbage collection though

# iphone - 使用编辑按钮更改分段控件的标题？

> ID：10925376
> 
> 赞同：2
> 
> 时间：2012-06-07T03:39:21.213
> 
> 标签：iphone, xcode, edit, uisegmentedcontrol

我想要一个 Edit barButtonItem，按下时我希望能够选择一个分段控件并编辑我选择的分段标题并保存它。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T03:08:57.473

我花了一些时间来想出这个例子，但就是这样！！！

这是我的 UIViewController 头文件中的内容：

```
@interface optionsViewController : UIViewController <UIPopoverControllerDelegate, UITextFieldDelegate> {
    IBOutlet UISegmentedControl *       centerAreaSizeSelector;

    // Added to support this example
    UISegmentedControl * controlBeingEdited;
    unsigned int segmentBeingEdited;
}

-(IBAction)centerAreaSizeSelector:(id)sender;
@end 
```

显然，我的 UISegmented 控件及其操作项在 Interface Builder 中连接。

您必须为您的分段控件实施操作项，这是我的

```
-(IBAction)centerAreaSizeSelector:(id)sender{
    // These are zero Based Reads from the selectors
    unsigned char centerAreaSizeSelection = centerAreaSizeSelector.selectedSegmentIndex;

    // Here we instantiate a NEW invisible UITextField to bring up the keyboard.
    UITextField * textField = [[UITextField alloc] init];
    [self.view addSubview:textField];
    textField.hidden = YES;
    textField.keyboardType = UIKeyboardTypeDefault;
    textField.returnKeyType = UIReturnKeyDone;
    textField.text = [centerAreaSizeSelector titleForSegmentAtIndex:centerAreaSizeSelection];
    textField.delegate = self;
    [textField becomeFirstResponder];

    // The below variable are defined globally to allow the keyboard delegate routines
    // to know which segmented control and which item within the control to edit
    // My design has multiple UISegmentedControls so this is needed for separation
    controlBeingEdited = centerAreaSizeSelector;  // of type UISegmentedControl
    segmentBeingEdited = centerAreaSizeSelection; // of type unsigned int
} 
```

实现如下 3 个 UITextFieldDelegate 方法如下

```
// Implement the keyboard delegate routines
-(BOOL)textFieldShouldReturn:(UITextField *)textField{
    [textField resignFirstResponder];
    [textField release];
    controlBeingEdited = nil;
    segmentBeingEdited = 0;
    return YES;
}

-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{
    NSString * theString = [textField.text stringByReplacingCharactersInRange:range withString:string];

    [controlBeingEdited setTitle:theString forSegmentAtIndex:segmentBeingEdited];

    return YES;
}

-(void)textFieldDidEndEditing:(UITextField *)textField{
    [controlBeingEdited setTitle:textField.text forSegmentAtIndex:segmentBeingEdited];
} 
```

这实现了 UISegmentedControl 元素的逐键可见编辑。

注意：如果文本大于控件提供的空间，这绝不会实现可能需要的自动调整大小。

这也没有实现任何形式的可见光标或可见选择代码。

这将在字符串中的最后一个字符之后留下文本字段插入符号的位置。它会在编辑之前将当前 UISegmentedControl 的文本复制到不可见的文本字段中，这样您就不会丢失副本，尽管可以很容易地对其进行编辑以在编辑之前清除两者。

# iphone - 从 uitabbaritem 图像中删除蓝色轮廓

> ID：10925377
> 
> 赞同：4
> 
> 时间：2012-06-07T03:39:21.660
> 
> 标签：iphone, ios, uitabbar, uitabbaritem

I have changed the tabBar.selectedImageTintColor to my own purlple color however when the tabbar item is selected there is a bright blue line that surrounds the outside of the image which is now purple..

这看起来相当糟糕，所以现在我正在尝试找到一种方法来删除它或将其更改为更好的匹配颜色。

但是我不知道该怎么做，希望有人能告诉我。

这是我正在谈论的蓝线

![在此处输入图像描述](../Images/ff2961abe765471fd40e5d306cf52743.png)

这就是我将图像选择颜色更改为紫色的方式...

```
 myTabBar.selectedImageTintColor = [UIColor colorWithRed:49.0/255.0 green:0.0/255.0 blue:98.0/255.0 alpha:0.95]; 
```

另一个蓝色轮廓的例子，其中 tabbaricon 放大了

![在此处输入图像描述](../Images/c0ecbc7f3bbc506637c4b51877769805.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T20:34:07.297

在 iOS 5 中，您可以设置外观方法。

完全按照您希望它们出现的方式创建未选择和选择的图像，然后`setFinishedSelectedImage:` `withFinishedUnselectedImage:`iOS 不会对您通过此方法提供的图像应用任何格式。

```
UIImage *selectedImage = [UIImage imageWithName:@"my_finished_selected_image"];
UIImage *unselectedImage = [UIImage imageWithName:@"my_finished_unselected_image"];
[tabBarItem setFinishedSelectedImage:selectedImage withFinishedUnselectedImage:unselectedImage]; 
```

# javascript - 解析字符串日期

> ID：10925392
> 
> 赞同：1
> 
> 时间：2012-06-07T03:43:18.180
> 
> 标签：javascript

我有一个`span`包含日、月和缩写的。日期：

```
<span>8.06 (Fr) </span> 
```

我想解析它并以下列格式获取该日期的字符串表示：2012 年 6 月 8 日。没有年份，只需插入当前年份。

我怎样才能做到这一点？

这是我的代码：

```
date = $(this).closest("li").find("span").text();
var d = new Date();
date = date + '.' + d.getFullYear(); 
```

它打印以下内容： `8.06 (Fr) .2012`
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T03:58:50.053

```
​$(".date").text(function(i,v){
    var m = v.match(/(\d+)\.(\d+)/);
    if ( m ) {
        var date = new Date( (new Date()).getFullYear(), --m[2], m[1]);
        return date.toDateString();
    }
});​​ 
```

小提琴：http: [//jsfiddle.net/jonathansampson/CuDdD/](http://jsfiddle.net/jonathansampson/CuDdD/)

如果您想要完整的月份名称，则需要提供自己的月份数组：

```
var m, mo = ['January','February','March',    'April',  'May',     'June',
             'July',   'August',  'September','October','November','December'];

$(".date").text(function(i,v){
    if ( m = v.match(/(\d+)\.(\d+)/) ) {
        return m[1] + " " + mo[ --m[2] ] + " " + (new Date()).getFullYear();
    }
});​ 
```

小提琴：http: [//jsfiddle.net/jonathansampson/CuDdD/2/](http://jsfiddle.net/jonathansampson/CuDdD/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T03:49:41.980

这应该足以让您入门。

```
var date = '8.06 (Fr) ';
var date_components = date.replace(/\s*\(.*?\)\s*/, '').split('.');

for (var i in date_components) {
  date_components[i] = parseInt(date_components[i], 10);
}

date_components.push((new Date()).getFullYear());

console.log(date_components); // Prints [8, 6, 2012] 
```

# google-app-engine - GWT - GXT - GAE。以 PDF 格式报告

> ID：10925395
> 
> 赞同：1
> 
> 时间：2012-06-07T03:43:22.120
> 
> 标签：google-app-engine, gwt, pdf, gxt

我正在使用 GWT 和 GXT 在 Google app Engine 中开发一个应用程序，所以我不知道如何创建 PDF 报告。我是 GAE 的新手，我知道 JasperReports、BIRT、iText 等不在 GAE 中运行白名单。我可以使用什么框架或库？我正在使用 RPC 服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T06:02:37.983

您可以尝试[转换 API](https://developers.google.com/appengine/docs/java/conversion/)。它不是一个完整的报告引擎，但如果您可以在一些模板引擎的帮助下创建 html（[Mustache](https://github.com/spullara/mustache.java)经过测试可以在 GAE 上工作），那么 Conversion API 可以将其转换为 PDF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T07:57:54.330

iText 的 Bruno Lowagie 最近提到了 iText 的 GAE 兼容端口：http: [//www.parleys.com/#id=3147&st=5](http://www.parleys.com/#id=3147&st=5)

我还没有调查过，但也许这对你来说可能很有趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T02:06:00.153

有一个名为[Docmosis](http://www.docmosis.com)的在线服务，您可以从 GAE 调用它来根据您单独上传的模板生成文档。好处是获得体面文档的微不足道的编码工作，并且有 Java 示例。缺点是它不是免费的。

# php - Yii 框架，由于 sql 表中的海量数据，减少页面加载时间

> ID：10925404
> 
> 赞同：1
> 
> 时间：2012-06-07T03:46:22.277
> 
> 标签：php, sql, yii

我有一个包含超过 15k 行记录的表。

我正在提取数据并将其显示在 jquery 数据表插件中，但显示需要几分钟。任何建议如何减少页面加载时间？

这就是我在控制器中提取数据的方式。

```
$model = Property::model->with('estates','types','tenures','rooms','districts')->findAll();
$this->render('index', compact('models','pages')); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T06:34:21.150

使用分页并省略“with”，这样记录将被急切加载，因此只有那些需要显示的才会真正在缓存中。试一试，你会看到立竿见影的不同。

# clojure - Clojure：有没有办法将 leiningen 插件加载为库？

> ID：10925405
> 
> 赞同：2
> 
> 时间：2012-06-07T03:46:33.633
> 
> 标签：clojure, leiningen

## 问题：

有没有办法将 lein 插件（例如 codex 或 lein-beanstalk）加载为 clojure*库*？

## 语境：

我正在编写一些工具来管理我的 lein 项目，并且我一直发现自己希望将 lein 插件的功能作为我的代码中的库 - 但我看不到从 clojure 用户访问 lein-pluins 命名空间的方法土地。

## 编辑：

特别是，我想使用：[https ://github.com/weavejester/codox](https://github.com/weavejester/codox)

我希望能够从“lein repl”内部进行“lein doc”的等效操作。

问题是我无法加载 codox.codox.core 命名空间。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T08:27:32.033

当然你可以做到。Leiningen 插件是普通的 Maven 工件。您需要做的就是在 in`:dependencies`子句中指定您的插件`project.clj`，如下所示：

```
 :dependencies [[org.clojure/clojure "1.3.0"]
                  [lein-beanstalk "0.2.2"]] 
```

然后运行`lein deps`，Leiningen 会将所需的插件下载到您的 lib 目录中。

# ildasm - ILDASM 树视图中的字段顺序是否正确或 MetaInfo 中的顺序是否正确？

> ID：10925406
> 
> 赞同：0
> 
> 时间：2012-06-07T03:46:34.000
> 
> 标签：ildasm

在尝试确定 .NET 值类型中字段的精确顺序时，我查看了 ILDASM 树视图和 ILDASM“MetaInfo”（即实际的 IL）。数据的两个视图中的字段顺序是相反的。

例如，System.Runtime.InteropServices.FILETIME 的树视图在 dwLowDateTime 之前列出了 dwHighDateTime。（我会发布一张图片，但这里没有足够的声誉点来这样做）。

另一方面，这里是对应的IL，使用View>>MetaInfo>>Show！在 ILDASM 中：

## 类型定义 #1655 (02000678)

```
TypDefName: System.Runtime.InteropServices.FILETIME  (02000678)
Flags     : [Public] [SequentialLayout] [Class] [Sealed] [AnsiClass] [BeforeFieldInit]  (00100109)
Extends   : 02000009 [TypeDef] System.ValueType
Field #1 (04001e2e)
-------------------------------------------------------
    Field Name: dwLowDateTime (04001E2E)
    Flags     : [Public]  (00000006)
    CallCnvntn: [FIELD]
    Field type:  I4

Field #2 (04001e2f)
-------------------------------------------------------
    Field Name: dwHighDateTime (04001E2F)
    Flags     : [Public]  (00000006)
    CallCnvntn: [FIELD]
    Field type:  I4

... 
```

哪个是正确的顺序？我认为 IL 是正确的，但需要确认。有谁知道这种差异的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T03:57:03.797

看起来 Win32 [FILETIME 结构](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724284%28v=vs.85%29.aspx)是 little-endian（低位优先）。.net 版本是一个互操作结构，因此用于与本机代码交互，它几乎必须与本机代码兼容。

至于“差异”背后的原因，请注意“dwHighDateTime”按字母顺序排在“dwLowDateTime”之前。

# hash - 动态调整数据结构

> ID：10925407
> 
> 赞同：1
> 
> 时间：2012-06-07T03:46:39.613
> 
> 标签：hash

为什么我们只根据负载因子动态调整哈希表大小？如果我们选择在均匀分布散列策略中检测到冲突时以几何方式增加表大小，我们可能会产生任何影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T04:44:50.220

负载因子大致是假设散列函数好的碰撞概率，所以这两个想法相差不远。

使用负载因子是因为它易于计算，并且在统计上没有噪声，而实际碰撞是。

另一个原因是遍历表中所有元素的成本。仍然必须检查空桶，因此负载因子的括号也是枚举所有存储元素的最差性能的括号。

当使用它们来调整表格大小时，碰撞模式中的自然噪声是一个问题。我们永远不想完全遵循您提出的政策。即使负载因子为 25%，我们也会以 1/4 的概率在每次插入时以几何方式增长（比如通过因子 G>1）表，然后以 1/(4G) 的概率再次增长，等等。我们将如何决定什么时候缩表？肯定不是每次都没有碰撞！

所以事实上，我们必须在“窗口”中计算碰撞与插入，并在比率超过高阈值和低阈值时进行调整。窗口必须相当大才能以良好的概率滤除噪声。它需要存储和计算开销来维护。这可能不值得，至少对于大部分时间使用的小表来说。

尽管如此，在像数据库这样的表很大并且有很多操作的环境中，实际的统计数据被用来优化性能。我不确定哈希表大小是否包含在实际软件中的这种优化中，但这是可能的。我能想象的最可能的原因是不愿意接受散列函数失败的微小风险。

# python - 当我们尝试获取无效范围时，为什么子字符串选择会静默失败？

> ID：10925410
> 
> 赞同：2
> 
> 时间：2012-06-07T03:47:20.450
> 
> 标签：python

在单个字符串中，当我尝试获取第二个字符时，python 非常冗长地失败，这是正确且预期的行为。

```
print 'a'[1] 
```

但是，当我尝试获取无效的子序列范围时，它会默默地失败。

```
print 'a'[1:] 
```

行为差异的原因是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T03:54:37.583

实际上永远不会在and的情况下`slicing`生成任何：`error``strings``lists`

**例如。**

```
>>> s='abc'
>>> s[-1000:1000]
'abc' 
```

工作正常。

另一方面，虽然`Indexes`未定义的访问将始终`IndexError`在两者中引发一个`strings`和`lists`：

```
>>> s[4]
Traceback (most recent call last):
  File "<pyshell#6>", line 1, in <module>
    s[4]
IndexError: string index out of range 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T04:24:06.957

当您查看列表上的可变切片的行为时，这更有意义：

```
>>> a = list(range(10))
>>> a
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> a[10] = 2
Traceback (most recent call last):
  File "<pyshell#16>", line 1, in <module>
    a[10] = 2
IndexError: list assignment index out of range
>>> a[10:] = [1, 2, 3]
>>> a
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 1, 2, 3] 
```

修改结束后的切片会将新值附加到末尾，相当于做`a.extend([1, 2, 3])`（尽管如果您的起点存在，则略有不同）。一旦您了解情况，这并不奇怪：

```
>>> a = list(range(10))
>>> a[2:4] = range(10)
>>> a
[0, 1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 4, 5, 6, 7, 8, 9] 
```

但是，由于您可以修改此切片，因此尝试将其访问为`IndexError`- 语言中没有其他任何地方可以使用除 a 之外的任何内容来设置失败，这会有点令人惊讶`NameError`。但是，`NameError`在这里没有意义 - Python找到了一个*具有*正确名称的对象，并在其上调用了一个方法。

因此，Python 不会将过去的切片视为列表错误。考虑到这一点，为什么访问切片在内置序列之间的行为会有所不同？字符串（和元组）是不可变的，所以切片分配总是会失败——但是看看有什么值是没有突变的。

所以，真的，最终的原因是 - 这是因为开发人员认为这种行为没有其他可能的行为那么令人惊讶。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T03:49:44.347

语义不同：

```
 print 'a'[1] 
```

试图索引到一个不存在（即无效）的索引/位置，这*是*一个错误。

```
 print 'a'[1:] 
```

根据指定的范围简单地返回一个空字符串 ( `''`)，这*不是*错误。

IE，

```
In [175]: 'a'[1]
---------------------------------------------------------------------------
----> 1 'a'[1]
IndexError: string index out of range

In [176]: 'a'[1:]
Out[176]: '' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T03:55:15.117

切片操作不同于索引操作。索引返回一个元素，切片返回一个范围，甚至是空范围或空字符串。

具有单个元素的数组有两个“边界”，其中索引指针可以是：0 和 1。您可以切片，您将`'a'[0:1]`获得位于这些位置之间的字符串（或列表或数组中的范围）。

如果你从最左边的边界切到最后，读数会走到最后，它已经在哪里，你会得到空字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T04:38:17.300

可以这样想：

当您使用`a[1]`时，假定您确切知道要访问的内容（在这种情况下 - 字符串中的第二个元素）。由于`a[1]`不存在 python 引发异常。

但是，范围运算符`a[1:]`是用可能不知道数据的确切范围的语义实现的，因此即使您指定的索引非常大（随机猜测），您仍然会得到字符串（或序列）的有效部分。在这种情况下你得到一个空字符串的原因是这个范围内的字符串中没有元素`a[1:]`。

希望这可以帮助。

# javascript - Webkit 转换事件

> ID：10925415
> 
> 赞同：2
> 
> 时间：2012-06-07T03:48:20.877
> 
> 标签：javascript, events, webkit, css-transitions

只是想大声说出来。在 css3 转换期间是否触发了任何事件。我知道有 webkitTransitionEnd，但是有没有 webkitTransitionStart 或者更好的（这是我现在真正需要的）webkitTransitionDuring（或类似的东西）。我需要根据我使用转换移动的 div 的位置来设置一些功能。多谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T04:00:29.770

是的，有`webkitAnimationStart`。（足够相似）

请参阅[Safari 开发人员库 - WebKitAnimationEvent 类参考](http://developer.apple.com/library/safari/#documentation/AudioVideo/Reference/WebKitAnimationEventClassReference/WebKitAnimationEvent/WebKitAnimationEvent.html#//apple_ref/doc/uid/TP40009360)

但是，没有这样的东西`webkitTransitionStart`。

请参阅[Safari 开发人员库 - WebKitTransitionEvent 类参考](http://developer.apple.com/library/safari/#documentation/AudioVideo/Reference/WebKitTransitionEventClassReference/WebKitTransitionEvent/WebKitTransitionEvent.html)

# iphone - 单击行后如何更改uilabel的值

> ID：10925417
> 
> 赞同：2
> 
> 时间：2012-06-07T03:48:58.243
> 
> 标签：iphone, uitableview

我所拥有的是

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    cell = (CustomCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        [[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:self options:nil];
        cell = customCell;
        self.customCell = nil;
    }

    // Configure the cell.
    switch (indexPath.row) {
        case 0:
            cell.title.text = @"iPhone!";
            cell.date.text = @"December 25, 2009";
            cell.imageView.image = [UIImage imageNamed:@"iphone.png"];
            break;
        case 1:
            cell.title.text = @"Second Cell";
            cell.date.text = @"December 26, 2009";
            //Put in your own image. Make sure it is 120 by 100
            cell.imageView.image = [UIImage imageNamed:@""];
            break;
        default:
            break;
    }
    return cell;
}

// Override to support row selection in the table view.
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    NSLog(@"index %d",indexPath.row);
    NSIndexPath *index = [NSIndexPath indexPathForRow:indexPath.row inSection: 0];
    NSArray *array = [NSArray arrayWithObject: index];
    cell.title.text = @"tetete";
    [self.myTable reloadRowsAtIndexPaths: array withRowAnimation: UITableViewRowAnimationFade];
} 
```

我的目的是如果您单击一行，您将更改该行标签的文本。

但是， reloadRowsAtIndexPath 将调用 cellForRowAtIndex ，这一次它将旧文本分配给 uilabel

我的问题：我应该如何更改，以便在单击该行后更改 uilabel 的值

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T03:52:28.933

You can set value to the label in the method

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

And can access the cell by the line,

```
NSIndexPath * path = [NSIndexPath indexPathForRow:0 inSection:1];
        UITableViewCell * cell = [tableView cellForRowAtIndexPath:path]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T04:04:37.197

No matter what you do with the label in didSelectRow it will always change when you scroll because cellForRow will be called and the labels will be replaced with what you hard-coded

Why don't you put the text and date label strings in an array of dictionaries? for instance

```
NSMutableArray *array = [[NSMutableArray alloc] init];
NSMutableDictionary *dict = [[NSMutableDictionary alloc] init];
[dict setValue:@"iPhone!" forKey:@"title"];
[dict setValue:@"December 25th, 2009" forKey:@"date"];
[array addObject:dict];
[dict release];
dict = [[NSMutableDictionary alloc] init];
[dict setValue:@"Second Cell!" forKey:@"title"];
[dict setValue:@"December 26th, 2009" forKey:@"date"];
[array addObject:dict];
[dict release]; 
```

Then in your `-cellForRow` replace

```
cell.title.text = @"iPhone!"; 
```

with

```
cell.title.text = [[array objectAtIndex:indexPath.row] objectForKey:@"title"]; 
```

and the same for date

and in `-didSelectRow`

```
NSMutableDictionary *dict = [[NSMutableDictionary alloc] init];
[dict setValue:@"test!" forKey:@"title"];
[dict setValue:@"December 27th, 2009" forKey:@"date"];
[array replaceObjectAtIndex:indexPath.row withObject:dict];
[dict release]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T04:05:11.143

我的印象是您的 Cell 是 a 的子类`UITableViewCell`。话虽如此，请尝试以下代码...在此示例中，替换`YourCustomCell`为您的 subclassed 的名称`UITableViewCell`。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
NSLog(@"index %d",indexPath.row);
NSIndexPath *index = [NSIndexPath indexPathForRow:indexPath.row inSection: 0];
NSArray *array = [NSArray arrayWithObject: index];

// This is where you make the pointer to your cell.
YourCustomCell *cell = (YourCustomCell*)[tableView cellForRowAtIndexPath:index];

cell.title.text = @"tetete";
[self.myTable reloadRowsAtIndexPaths: array withRowAnimation: UITableViewRowAnimationFade];
} 
```

# box-api - access_token 会过期多久？还是有一个refresh_token？

> ID：10925419
> 
> 赞同：1
> 
> 时间：2012-06-07T03:49:35.183
> 
> 标签：box-api

我想开发一个应用程序来存储我的内容，但我不希望用户每次都获得身份验证？我只是想知道 access_token 将过期多长时间或是否有任何 refresh_token？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T18:10:13.480

为了这个问题的未来读者，如果您使用 OAuth2 在 Box V2 API 上进行身份验证，您将有权访问刷新令牌。

来自[https://developer.box.com/docs/faqs#section-how-do-i-automate-the-generation-of-oauth-tokens-or-run-a-server-side-solution-](https://developer.box.com/docs/faqs#section-how-do-i-automate-the-generation-of-oauth-tokens-or-run-a-server-side-solution-)：

> **如何自动生成 OAuth 令牌或运行服务器端解决方案？**
> 
> 访问令牌的有效期约为一小时。刷新令牌对 60 天内的单次刷新有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T19:43:03.500

我们当前系统中的 auth_tokens 不会过期。

（请注意，如果我们切换到标准 OAuth，这显然会改变）

# php - 在方法之后调用构造函数

> ID：10925426
> 
> 赞同：-1
> 
> 时间：2012-06-07T03:50:59.267
> 
> 标签：php

调用后`tryTest()`，输出为

> 测试这个乔

为什么先打印“测试这个”，然后再打印 Jo. 看起来在调用方法之后正在调用构造函数。此外，文本应该打印 Mary，因为我在构造函数中分配了值。但它与乔相呼应。

```
<?php
class cityme {
    public $nm = "Jo";
    public $state = null;
    public $country = null;

    function _construct($name, $state, $country) {
        // set the name
        $this->nm = $name;
        echo $this->nm; // this echoes after the printout function is called.. and the value is Jo... 
        // set the state
        $this->state = $state;
        // set the country
        $this->country = $country;
    }

    /**
     * Print the info
     */
    public function printout()  {

        if($this->nm == null)  {
            echo "it worked";//does not echo
        }
        echo "Test this";//echoes first... 
        echo $this->nm;
        echo $this->state;
        echo $this->country;
    }
}

function tryTest() {
    $myCity = new cityme("Mary", "Charlotte", "US");
    $myCity->printout();
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T03:56:59.587

您的构造函数缺少下划线。它应该是：

```
function __construct($name, $state, $country) { 
```

# linux - 查找哪个程序运行另一个

> ID：10925429
> 
> 赞同：2
> 
> 时间：2012-06-07T03:51:20.373
> 
> 标签：linux, bash, shutdown

我有一个 NAS 运行在似乎是 Redhat Linux 的有限版本上。我按照指示破解了它，这样我就可以访问 shell，这对我很有帮助。我还做了一些修改，其他人已经做过的修改，除了一个问题，它们似乎都运行良好。

不知何故，每 22 天，系统就会关闭一次。我用一个脚本运行ps发现其实是调用了shutdown，但是不知道是什么程序调用了shutdown。

如果我重命名 /sbin/shutdown，那么我可以编写一个脚本来替换它。但我想要的最重要的信息是什么程序正在调用关机。

如果一个程序运行我的脚本（假的 /sbin/shutdown），我如何找出调用我的脚本的程序？我希望能够从脚本中首先确定调用脚本的程序。如果它更容易，我总是可以使用 Perl 脚本而不是 bash 脚本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T03:59:23.670

在 Bash 中，`ps -p $$ -o ppid=`. 输出是父进程（调用进程）的 pid。`/proc/<pid>/cmdline`拥有父 pid，您可以从（[有关 procfs](http://en.wikipedia.org/wiki/Procfs#Linux)的更多信息）读取其命令行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T04:31:23.440

最简单的可能只是转储`ps afx`调用脚本时的完整输出。这将以树形格式显示所有进程（包括您的脚本）的列表，不仅显示调用脚本的内容，还显示调用*that*的内容以及正在运行的其他内容。

# .net - How to use IPython and pyreadline in IronPython?

> ID：10925431
> 
> 赞同：0
> 
> 时间：2012-06-07T03:51:44.910
> 
> 标签：.net, python, ironpython, ipython

IPython is a very useful Python Shell, I want to use it in IronPython. Is it possible?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T05:18:48.950

[IPython FAQ](http://ipython.org/faq.html#can-ipython-run-under-ironpython-pypy-jython-other-python-interpreters)的直接回答：

> 基于终端的 shell 应该在任何符合 Python 必要版本的解释器上运行。IPython 0.11 需要 Python 2.6 或更高版本，截至 2011 年 6 月，IronPython 和 PyPy 都支持这一点。
> 
> 最可能的问题来自 Readline 和使用未记录的 sys._getframe() 函数。在 Windows 上，我们发布了我们自己的 [pyreadline](http://ipython.org/pyreadline.html)，它也可以在 IronPython 下工作。PyPy 提供了自己的 readline 模块，IPython 0.11 不能正确使用它；这是固定在后备箱中的。
> 
> 如果 IPython 在受支持的解释器下无法运行，请提交错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-23T18:57:29.173

[我按照 IPython 的 wiki 页面https://github.com/ipython/ipython/wiki/Frequently-asked-questions#id9](https://github.com/ipython/ipython/wiki/Frequently-asked-questions#id9)中的说明成功地使 IPython 1.2 与 IronPython 2.7.4 一起工作

# php - 我可以按多列的总和对 mySQL 数据库记录进行排序而不显示总和本身吗？

> ID：10925437
> 
> 赞同：0
> 
> 时间：2012-06-07T03:52:42.723
> 
> 标签：php, mysql, sql-order-by, sum

我有一个足球运动员及其统计数据的数据库，其中前三个字段是 VARCHAR，其余字段是 INT。我想根据统计数据的总和以 DESC 顺序显示记录，但我不想显示总和。

以下是输入数据库的一些示例数据：

```
Tim Tebow          NYJ         QB          315             2             62             1
Tom Brady          NE          QB          344             3             13             0
Tony Romo          DAL         QB          337             4             25             0 
```

以及我希望它如何显示（按 PASS_YDS + PASS_TDS + RUSH_YDS + RUSH_TDS 之和的顺序）：

```
Player        |   Team    |   Pos   |   PASS_YDS   |   PASS_TDS   |   RUSH_YDS   |   RUSH_TDS
-------------------------------------------------------------------------------------------------
Tim Tebow          NYJ         QB          315             2             62             1
Tony Romo          DAL         QB          337             4             25             0
Tom Brady          NE          QB          344             3             13             0 
```

这是我用来从我的数据库中获取数据并将其显示在页面上的表中的查询，按 PASS_YDS 降序排序（是的，我知道 mysql_ 已弃用 - 我将很快改造应用程序，但只需要首先让它以这种方式正常工作）：

```
$result = mysql_query("SELECT Player, Team, Pass_Yds, Pass_TDs, Int_Thrown, Rush_Yds, Rush_TDs, Total_Fantasy_Pts FROM ff_projections WHERE Position = 'QB' ORDER BY Pass_Yds DESC;"); 
```

我需要做什么才能按我想要的方式对其进行排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T03:55:12.813

正如人们想象的那样：

```
SELECT   Player, Team, Pass_Yds, Pass_TDs, Int_Thrown, Rush_Yds, Rush_TDs
FROM     ff_projections
WHERE    Position = 'QB'
ORDER BY Pass_Yds + Pass_TDs + Rush_Yds + Rush_TDs DESC 
```

但是，仅仅因为在选择列表中包含一列并不意味着您的应用程序必须使用该列...

# internet-explorer - extjs中如何知道窗口是最大化还是最小化？

> ID：10925439
> 
> 赞同：0
> 
> 时间：2012-06-07T03:53:04.087
> 
> 标签：internet-explorer, browser, extjs, extjs3

有谁知道如何在 IE8 中检查表单是最大化还是最小化。

拉吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T04:51:39.110

在此处浏览他们的文档：http: [//docs.sencha.com/ext-js/3-4/# !/api](http://docs.sencha.com/ext-js/3-4/#!/api)

您可以使用 window.screen.width 和 window.screen.height 来获取正在使用的屏幕的尺寸。

然后您可以使用 getPosition() 并确保它位于 0,0 并使用 getHeight() 和 getWidth() 并确保它们与屏幕尺寸匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:45:31.717

它通过使用以下代码解决：

```
var S = this.tabpanelFormation.getPosition();
    if (Ext.isIE8 && S[0] == 751) {
            this.tabpanelFormation.setPagePosition(749,370,true);
            this.tabpanelFormation.setHeight(230);
            this.tabpanelFormation.setWidth(350);
    } 
```

如果它最大化，那么 S[0] = 751。通过这个我们可以找到 whet

# chess - Minimax search：如何打印从选择的下一步移动到叶子的路径

> ID：10925443
> 
> 赞同：1
> 
> 时间：2012-06-07T03:53:52.693
> 
> 标签：chess, minimax

令人困惑的标题。我将尝试详细说明：我有一个 AI 国际象棋游戏，它使用极小极大搜索来生成计算机的下一步行动。在将极小极大树下到选定的深度（比如 5）之后，它最终会找到下一个最佳移动。出于我自己的测试目的，我希望能够打印出下一个最佳动作（表示为棋盘配置），以及用于确定下一步动作得分的以下 4 个动作。也就是说，在极小极大树中每个较低级别的最佳选择路径，从​​最终被选为最佳下一步的顶部节点开始。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T21:57:15.010

您想要确定[Principal Variation](http://chessprogramming.wikispaces.com/Principal+Variation)。

> 主要变体 (PV) 是程序认为最好并因此期望播放的一系列动作。
> 
> -- 国际象棋编程维基

我的游戏引擎实现使用转置表来确定 PV。要打印 PV，程序执行以下步骤：

1.  *move* = 最后一次搜索确定的最佳移动
2.  打印*移动*
3.  动*起来*
4.  获取新板的转置表项
5.  转置表条目是否准确？
    *   是：*move* = move 存储在转置表条目中。转到第 2 步。
    *   否：撤消移动。转到第 6 步。
6.  结尾

# mysql - mysql select dynamic row values as column names, another column as value

> ID：10925445
> 
> 赞同：27
> 
> 时间：2012-06-07T03:54:10.203
> 
> 标签：mysql, sql, pivot-table

I have a legacy table of user information (that is still in active use) and I cannot change the structure of -

```
id    name       value
------------------------------
0     timezone   Europe/London
0     language   en
0     country    45
0     something  x
1     timezone   Europe/Paris
1     language   fr
1     country    46 
```

timezone/language/country etc are only examples of names, they can be variable/there is no finite list other than unique on rows of that column

I need a MySQL compatible SQL query that would return -

```
id    timezone       language    country  something
---------------------------------------------------
0     Europe/London  en          45       x
1     Europe/Paris   fr          46 
```

I've looked through various answers on stackoverflow around hacking Pivot table functionality in to MySQL, and similar but none of them seem to match this case of using variable column name alias from unique row values from a column of the same table. Although I have had little sleep so they're all starting to become a bit of a blur, apologies in advance.

Closest I could find would be to use prepared statements [https://stackoverflow.com/a/986088/830171](https://stackoverflow.com/a/986088/830171) which would first get all possible/unique values from name column and build a query that uses `CASE WHEN`, and/or multiple sub-`SELECT` or `JOIN` on same table queries.

The alternatives I can think of would be to get all rows for that user id and process them in the application itself in a for-loop, or attempt to limit the names to a finite amount and use sub-`SELECT`s/`JOIN`s. However that second option is not ideal if a new name is added I'd have to revisit this query.

Please tell me I've missed something obvious

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-06-07T05:23:28.560

与其他一些 RDBMS 不同，MySQL 在设计上不支持这种类型*的*旋转操作（开发人员认为它更适合应用程序的表示层，而不是数据库层）。

如果您绝对必须在 MySQL 中执行此类操作，那么构建一个准备好的语句是可行的方法——尽管我不会乱用`CASE`，我可能只使用 MySQL 的[`GROUP_CONCAT()`](http://dev.mysql.com/doc/en/group-by-functions.html#function_group-concat)函数：

```
SELECT CONCAT(
  'SELECT `table`.id', GROUP_CONCAT('
     ,    `t_', REPLACE(name, '`', '``'), '`.value
         AS `', REPLACE(name, '`', '``'), '`'
     SEPARATOR ''),
 ' FROM `table` ', GROUP_CONCAT('
     LEFT JOIN `table`   AS `t_', REPLACE(name, '`', '``'), '`
            ON `table`.id = `t_', REPLACE(name, '`', '``'), '`.id
           AND `t_', REPLACE(name, '`', '``'), '`.name = ', QUOTE(name)
     SEPARATOR ''),
 ' GROUP BY `table`.id'
) INTO @qry FROM (SELECT DISTINCT name FROM `table`) t;

PREPARE stmt FROM @qry;
EXECUTE stmt; 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/6e689/417/2)上查看。

请注意，结果[`GROUP_CONCAT()`](http://dev.mysql.com/doc/en/group-by-functions.html#function_group-concat)受变量限制（默认为 1024 字节：除非您有一些非常长的值[`group_concat_max_len`](http://dev.mysql.com/doc/en/server-system-variables.html#sysvar_group_concat_max_len)，否则在此处不太可能相关）。`name`

# facebook-like - Change text near facebook like button

> ID：10925455
> 
> 赞同：0
> 
> 时间：2012-06-07T03:56:03.590
> 
> 标签：facebook-like

Is it possible to change the text near the facebook like button;

![enter image description here](../Images/badffc270b20ba81205bb37530d388b4.png)

e.g. Is it possible to change the text to "Be the first of your friends to like this **item**"

The text is in a span with class connect_widget_not_connected_text, I'm trying this

```
$(".connect_widget_not_connected_text").html 
```

its not working!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T04:50:16.957

这不起作用的原因是 Like Button 的工作方式，呈现在您的页面中的`iframe`元素内，不能像那样访问并且也是跨域策略的主题。

虽然可以通过简单的 CSS 技术实现您想要的，但它（可能？）违反了平台策略。

**更新：**
考虑到您看到的措辞取决于喜欢特定 URL 的用户/朋友的数量，并且可能会发生变化，因此在 Facebook 为我们提供指定将使用的文本的方法之前（这不太可能发生！）没有可靠的方法来做你想做的事。

# android - how to create special layout folder for galaxy note only?

> ID：10925458
> 
> 赞同：3
> 
> 时间：2012-06-07T03:56:14.403
> 
> 标签：android, android-layout, naming-conventions

Currently, i had 6 set of layouts folder which were small, normal, large, xlarge, sw600dp and default. I had 5 sets of drawable which were default, ldpi, mdpi, hdpi and xhdpi.

The galaxy note 4.0.3 run the large with hdpi. However the screen resolution for galaxy note is the largest among all the large screen category. The output is difference with those S2, S3 and so on.

How to naming the folder for specific only galaxy note such as sw600dp for tab only?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-15T22:30:07.227

查看指定文件夹名称的注释（`layout-large-port-xhdpi-1280x800`） [单击此处](https://stackoverflow.com/questions/9826803/android-large-layout-affects-galaxy-note)

# c++ - 用浮点字面量初始化 const int

> ID：10925459
> 
> 赞同：8
> 
> 时间：2012-06-07T03:56:27.330
> 
> 标签：c++, c++11, constants

**例子**

```
int main()
{
    const int i = 1.0; // Notice I am assigning a double to an int here
    char a[i];
} 
```

**问题**

编译上面的代码`g++ -O0 -Wall -pedantic -ansi -std=c++11`没有错误（除了一个未使用的变量）。但是，如果我删除`-std=c++11`，我会收到以下警告：

> 警告：ISO C++ 禁止变长数组

根据[这个 SO question](https://stackoverflow.com/questions/4518787/typo-at-msdn-page-c-constant-expressions)，我相信在 C++03 中，代码是无效的。但是，有人能解释一下 C++11 中的规则是如何变化的吗？

（这个问题是我[之前](https://stackoverflow.com/questions/10923615/compiler-bug-g-allows-variable-size-static-arrays-unless-function-is-templat/10924195#10924195)回答的问题的结果。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T13:41:03.003

数组绑定必须是整数常量表达式，请参阅 8.3.4 [dcl.array]/1（C++03 和 C++11 中的措辞相同）：

> 如果常量表达式 (5.19) 存在，它应该是一个整数常量表达式并且它的值应该大于零。

在 C++03 中，整数常量表达式不能由浮点文字初始化，除非强制转换为整数类型，参见 5.19 [expr.const]/1 的最后一句话：

> 一个*整数常量表达式*只能包含字面量 (2.13)、枚举数、`const`变量或整数或枚举类型的静态数据成员，这些成员使用常量表达式 (8.5)、整数或枚举类型的非类型模板参数和`sizeof`表达式进行初始化。浮动文字 (2.13.3) 只有在转换为整数或枚举类型时才能出现。

这意味着在 C++03`i`中不是整数常量表达式，因此不能用作数组绑定。

GCC 和 Clang 允许可变长度数组作为 C++03 的扩展，因此它使用非常量边界进行编译，但您会收到带有`-pedantic`. 更改常量的初始值设定项以将其强制转换为整数类型会`i`生成一个有效的整数常量表达式：

```
const int i = (int) 1.0; 
```

随着这种变化，数组不再是可变长度，即使使用`-pedantic`.

在 C++11 5.19 [expr.const]/3 中说：

> *文字常量表达式*是文字类型的纯右值核心常量表达式，但不是指针类型。*整型常量表达式*是整型或无范围枚举类型的字面常量表达式。

前面的（相当长的）段落描述了核心常量表达式的规则，但基本上在 C++11 中，双初始值设定项不会阻止`i`成为核心常量表达式，即使没有强制转换，所以它是一个整数常量表达式，因此是有效的数组绑定，所以没有警告。

# android - AsyncTask.get() 在使用 startActivity() 移动到新类后不等待

> ID：10925461
> 
> 赞同：0
> 
> 时间：2012-06-07T03:56:51.450
> 
> 标签：android, android-asynctask

我有一个名为 trailsActivity 的类，它扩展了 Activity。我创建了一个名为 mapPreLoad 的 AsyncTask 的新实例，并在 trailsActivity 中执行它。

然后我`startActivity()`用来移动到我的新类 trailInformation，它也扩展了 Activity。从 trailInformation 中按下一个按钮以移动到扩展 MapActivity 的新类 mapPopup。在 mapPopup 中，我通过调用“ `trailsActivity.mapPreLoad.get();`”结束 onCreate，但`.get()`调用不会等待任务完成，因此我收到错误。

有什么方法可以让我完成这项工作，还是我应该考虑完全重新设计我的流程？如果您需要更多详细信息，请询问。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T04:55:56.397

**TrailsActivity.java**

从 AsyncTask 开始。

关于 Asyntask 的 onPostExecute 方法

```
Intent intent=new Intent(this,TrailInformation.java);
intent.putExtra("result","Whatever result you got");
startActivity(intent); 
```

**TrailInformation.java**

onButton 单击执行以下操作。

```
 Intent intent=new Intent(TrailInformation.this,mapPopup.class);
    intent.putStringExtra("result",getIntent().getStringExtra("result"));
    startActivity(intent); 
```

# ruby - Ruby-无法将带有 nil 的间歇性错误强制转换为 Fixnum (TypeError)

> ID：10925462
> 
> 赞同：1
> 
> 时间：2012-06-07T03:56:59.113
> 
> 标签：ruby

有人可以帮我弄清楚为什么我会收到以下错误：78- $player_total = $player_cards.inject(:+)

我也得到了它：15 slice!-但这似乎已经停止了？

错误怎么可能是间歇性的？

不相关的问题：如何在 stackoverflow 的帖子中添加行号？

bjtrial.rb:78:in `+': nil can't be coerced into Fixnum (TypeError) from bjtrial.rb:78:in`each' from bjtrial.rb:78:in `inject' from bjtrial.rb:78:in`block in start_trial' from bjtrial.rb:76:in `each' from bjtrial.rb:76:in`start_trial' from bjtrial.rb:90:in `'

@天堂：ruby -v ruby​​ 1.9.3p194（2012-04-20 修订版 35410）[x86_64-darwin11.3.0]

```
#blackjack trial player hits 10-7 once vs. 11, 2
$deck = (((2..11).to_a+[10]*3)*4)
$rand= rand($deck.length)
$dealer_win = 0
$player_win = 0
$tie = 0

$p1 = 10 #players cards
$p2 = 7  

$d1 = 11 #dealers cards
$d2 = 2 

#deal & remove dealt cards deck
$dealer_cards = Array([$deck.slice!($deck.index($d1)),$deck.slice!($deck.index($d2))])
$player_cards = Array([$deck.slice!($deck.index($p1)),$deck.slice!($deck.index($p2))])

$trials = 2
$dealer_win = 0
$playerWin = 0

def hit_card
    #remove hit card from the deck
    $hit_card = $deck.slice!($rand)
    $hit_card
end

def show_dealer_cards
    total = $dealer_cards.inject(:+)
    puts
    puts "Dealer's cards are: #{$dealer_cards.inspect}"
    puts "Dealer's total is: #{$dealer_cards.inject(:+)}"
    sleep 1
    def check_dealer_total
        total = $dealer_cards.inject(:+)

        if total > 21 && $dealer_cards.count(11) < 1
            puts "Dealer Busted- Player wins!"
            $player_win += 1
        elsif total > 21 && $dealer_cards.count(11) >= 1
            puts "Over 21- with an ace to factor:"
            $dealer_cards[$dealer_cards.index(11)] -= 10
            puts "Now the dealer has:"
            show_dealer_cards
        elsif total <= 16 || total == 17 && $dealer_cards.count(11) == 1
            hit_card
            puts "Dealer draws a:#{$hit_card}"
            $dealer_cards.push($hit_card)
            show_dealer_cards
        else
            player_total = $player_cards.inject(:+)
            dealer_total = $dealer_cards.inject(:+)

            puts "Results:"
            puts "Player has #{player_total}"
            puts "Dealer has #{dealer_total}"

            if player_total < dealer_total
                puts "Dealer Wins!"
                $dealer_win += 1
            elsif player_total == dealer_total
                puts "It's a tie! Nobody Wins"
                $tie += 1
            else
                puts "Player Wins!"
                $player_win += 1
            end

        end
    end
    check_dealer_total
end

def start_trial

    for i in (1..$trials).to_a
        $player_cards.push(hit_card) #player hits once and stays or busts
        $player_total = $player_cards.inject(:+) #this is line 78

        if $player_total > 21
            puts "Player Busted"
            $dealer_win += 1
        else
        show_dealer_cards
        end

    end
end

start_trial

puts 
puts "Player Cards: #{$p1}, #{$p2} (alwalys hits once)"
puts "Dealers Cards: #{$d1}, #{$d2} (plays normally)"
puts "Number of trials: #{$trials}"
puts "Ties: #{$tie}"
puts "Player Wins: #{$player_win}"
puts "Dealer Wins: #{$dealer_win}" 
```

我不得不将 $rand 移动到 hit_card 函数中，因为它会间歇性地指向数组中的 nil 值。

它运行-我认为它是准确的.. 不要把你在维加斯的房子押在它上面。哈哈

并感谢其他提示：全局变量。我还没到那一步，但...

```
#blackjack trial player hits 10-7 once vs. 11, x
$dealer_win = 0.0
$player_win = 0.0
$tie = 0.0

$trials = 500000
#Hit Once to hit...
$strategy = "Hit Once"

def hit_card
    $rand= rand($deck.length)
    #remove hit card from the deck
    $hit_card = $deck.slice!($rand)
    $hit_card
end

def show_dealer_cards
    total = $dealer_cards.inject(:+)
    #puts
    #puts "Dealer's cards are: #{$dealer_cards.inspect}"
    #puts "Dealer's total is: #{$dealer_cards.inject(:+)}"
    #sleep 1
    def check_dealer_total
        total = $dealer_cards.inject(:+)

        if total > 21 && $dealer_cards.count(11) < 1
            #puts "Dealer Busted- Player wins!"
            $player_win += 1.0
        elsif total > 21 && $dealer_cards.count(11) >= 1
            #puts "Over 21- with an ace to factor:"
            $dealer_cards[$dealer_cards.index(11)] -= 10
            #puts "Now the dealer has:"
            show_dealer_cards
        elsif total <= 16 || total == 17 && $dealer_cards.count(11) == 1
            hit_card
            #puts "Dealer draws a:#{$hit_card}"
            $dealer_cards.push($hit_card)
            show_dealer_cards
        else
            player_total = $player_cards.inject(:+)
            dealer_total = $dealer_cards.inject(:+)

            #puts "Results:"
            #puts "Player has #{player_total}"
            #puts "Dealer has #{dealer_total}"

            if player_total < dealer_total
                #puts "Dealer Wins!"
                $dealer_win += 1.0
            elsif player_total == dealer_total
                #puts "It's a tie! Nobody Wins"
                $tie += 1.0
            else
                #puts "Player Wins!"
                $player_win += 1.0
            end

        end
    end
    check_dealer_total
end

def start_trial

    for i in (1..$trials).to_a

        $deck = (((2..11).to_a+[10]*3)*4).shuffle

        $p1 = 10 #players cards
        $p2 = 7  

        $d1 = 11 #dealers cards
        $d2 = hit_card #just a random card

        #deal & remove dealt cards deck
        $dealer_cards = Array([$deck.slice!($deck.index($d1)),$deck.slice!($deck.index($d2))])
        $player_cards = Array([$deck.slice!($deck.index($p1)),$deck.slice!($deck.index($p2))])

        if $strategy == "Hit Once"
            $player_cards.push(hit_card) #player hits once and stays or busts
        else
            $strategy = "Stand"
        end

        $player_total = $player_cards.inject(:+) #this is line 78

        if $player_total > 21
            #puts "Player Busted"
            $dealer_win += 1.0
        else
        show_dealer_cards
        end

    end
end

start_trial

puts 
puts '*' * 80
puts "Player Cards: #{$p1}, #{$p2}"
puts "Strategy: #{$strategy}"
puts "Dealers Cards: #{$d1}, x"
puts "Number of trials: #{$trials}"
puts "Ties: #{$tie}"
puts "Player Wins: #{$player_win}"
puts "Dealer Wins: #{$dealer_win}"
puts "Win Percentage: %.2f" % (($player_win / $trials) * 100)
puts "Loss Percentage: %.2f" % (($dealer_win / $trials) * 100)
puts "Tie Percentage: %.2f" % (($tie / $trials) * 100)
puts '*' * 80 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T04:20:24.343

我在您的程序中发现了一个完全不同的问题：

```
def start_trial

    for i in (1..$trials).to_a
        $player_cards.push(hit_card) #player hits once and stays or busts
        $player_total = $player_cards.inject(:+) #this is line 78

        if $player_total > 21
            puts "Player Busted"
            $dealer_win += 1
        else
        show_dealer_cards
        end

    end
end 
```

你正在运行两次试验，没有重新初始化玩家牌组。所以玩家的手就变成了`[10, 7, 8, 9]`。如果您进行 50 次试验，您将用完卡。

您是否只运行了两次 start_trial 并收到错误消息？

这是我实际运行代码的结果：

```
load './bj.rb'
Player Busted
Player Busted

Player Cards: 10, 7 (alwalys hits once)
Dealers Cards: 11, 2 (plays normally)
Number of trials: 2
Ties: 0
Player Wins: 0
Dealer Wins: 2
 => true 
```

但是，如果我更改`$trials = 100`，那么我会遇到同样的失败：

```
 load './bj.rb'
Player Busted
TypeError: nil can't be coerced into Fixnum
    from /rails/Stack/bj.rb:78:in `+' 
```

我希望这有帮助。

祝你好运！

# php - 相同的盐或不同的盐

> ID：10925465
> 
> 赞同：2
> 
> 时间：2012-06-07T03:57:07.693
> 
> 标签：php, mysql, hash, salt

这是我的问题：根据您的经验，对存储在 PHP 文件中的每个哈希值进行哈希处理是否更安全，或者对每个哈希对象使用不同的盐值并将其与该对象一起存储在数据库中是否更好?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T03:58:10.533

盐只有在每个散列字符串都不同时才有意义。

所以，是的，创建额外的列并在那里放**随机**盐

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T03:58:25.223

每个哈希使用不同的盐；否则散列对象容易受到暴力攻击。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T04:42:08.580

如果您将密码存储在数据库中，则需要在每个条目中混合一些不同的内容，这样您就无法在数据库中轻松找到匹配的密码。您可以使用随机盐，或者您可以只包含用户名（如果它是不可变的）或其他一些不可变的唯一字段。

如果您使用用户名之类的东西，那么您还应该做一些对您的实施来说是独一无二的事情，因为可能有其他网站使用相同的算法，因此有机会发现匹配项。严格来说，它不一定是你在哈希中包含的盐，它可能只是你的算法工作方式的不同，但通常最简单的是添加一个全局盐。如果您使用的是每个条目的盐，则无需添加另一个全局盐。

对于这些类型的问题，通常最容易想到黑客可能使用的攻击类型。请记住，您实际上并不是在尝试保护您的数据（因为您的数据库已被入侵），您实际上是在尝试阻止黑客获取您网站上使用的凭据并在其他网站上使用它们。

# java - 我可以在没有明确用户批准的情况下获得 Linkedin oauth 访问令牌吗？

> ID：10925473
> 
> 赞同：0
> 
> 时间：2012-06-07T03:58:17.730
> 
> 标签：java, oauth, token, linkedin

我正在使用 Java 开发一个 Web 应用程序，该应用程序想要读取该应用程序的用户的 Linkedin 个人资料。Linkedin API 使用 oAuth 并且需要通过请求 URL 获取验证码的过程，还带有一个弹出窗口来确认用户的批准。

但是，我的webapp是要在受限环境（ARM cpu + Linux）下浏览，所以我想在后台做这些验证的东西，即提前存储用户的Linkedin账号和passwd，并通过程序获取访问令牌，不是由用户手动完成的。oauth 是否支持这样的功能？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T04:25:08.950

[LinkedIn API](https://developer.linkedin.com/apis) [服务条款](https://developer.linkedin.com/documents/linkedin-apis-terms-use)严格禁止以这种方式使用 API，特别是 1.5(i) 和 1.5(f)。

简而言之，必须向用户显示 API 登录屏幕，正如您提到的，该屏幕托管在 LinkedIn.com 上，并允许他们指定批准的生命周期。

# css - css div 和 span 在浏览器中的显示方式不同。如何统一？

> ID：10925475
> 
> 赞同：1
> 
> 时间：2012-06-07T03:58:31.003
> 
> 标签：css, google-chrome, browser, divider

我有一个在 FF12 中正确显示的 CSS 文件，但在 Safari 和 Chrome 中是不同的。

[如果图像未加载，请在http://beattrack.net/test.php](http://beattrack.net/test.php)查看现场演示

这是它在 FF 中应该和看起来的样子：

![FF正确的css](../Images/113e82e879d22b4ac3c67e6104706b98.png)

以下是 Safari 和 Chrome 中发生的情况：

![Safari 和 Chrome 的区别](../Images/c15630aa4a95270fed3304929f77363b.png)

这是相关的CSS和HTML：

```
<style type="text/css">
    #topbar p.infotext {
        float: left;
        padding-left: 20px;
        padding-right: 20px;
        margin-left: 15px;
        color: #D8DFEA;
    }
    #topbar a.name, #topbar a.home {
        font-weight: bold;
        margin-top: 4px;
        line-height: 32px;
        font-size: 13px;
        text-align: right;
        color: #D8DFEA;
        padding-left: 12px;
        float: right;
        text-decoration: none;
        padding-right: 0px;
    }
    .divider {
        margin-top: 7px;
        line-height: 19px;
        border-right: 1px solid #5CCD3E;        
        float: right;
    }
</style>

<html>
  <div id="topbar">
    <a class="home" href="#">Home &nbsp; <span class="divider">&nbsp;</span></a>
    <a class="name" href="#"><?php echo $first_name . " " . $last_name . " &nbsp; ";?>
    <span class="divider">&nbsp;</span>
    </a>
  </div>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T23:10:29.173

虽然我建议使用图像而不是添加额外的`.divider`类，但我将如何修改您的标记：http: [//jsfiddle.net/Wexcode/z9Esg/](http://jsfiddle.net/Wexcode/z9Esg/)

HTML：

```
<div id="topbar">
    <a href="#">
        <strong>Home</strong><span></span>
    </a><a href="#">
        <strong>Adam Wexler</strong><span></span>
    </a>
</div>​ 
```

CSS：

```
#topbar { text-align: right; }
#topbar a { 
    padding: 0 0 0 12px;
    vertical-align: middle;
    display: inline-block;​ }
#topbar strong, #topbar span { 
    vertical-align: middle;
    display: inline-block; }
#topbar strong { font-weight: normal; }
#topbar a:hover strong { text-decoration: underline; }
#topbar span { 
    background-color: #5CCD3E;
    height: 19px;
    width: 1px;
    margin: 0 0 0 12px; }​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T04:32:30.583

添加宽度应该让它工作。

```
#topbar a.home, #topbar a.name {width : 70px;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T06:23:35.823

试试这个：

```
.divider {
    position:relative;
    top: 7px;
    line-height: 19px;
    border-right: 1px solid #5CCD3E;        
    float: right;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T23:06:49.817

原来这是HTML的问题。

当我从文本后面删除“ ”时，它对我很有用。

```
 <div id="topbar">
    <a class="home" href="#">Home
    <span class="divider">&nbsp;</span></a>
    <a class="name" href="#">
    <?php
    echo $full_name." ".$tel;
    ?>
    <span class="divider">&nbsp;</span>
    </a>
  </div> 
```

我很想得到任何关于为什么有效的反馈......

# documentation - 如何解读 API 文档功能参数？

> ID：10925478
> 
> 赞同：111
> 
> 时间：2012-06-07T03:59:17.137
> 
> 标签：documentation

是否有标准来解释 API 文档中函数接口的语法，如果有，它是如何定义的？

下面是一个关于如何更改项目颜色的示例 Photoshop JavaScript 脚本指南中的“fillColor”函数：

```
fillPath
([fillColor]
[, mode]
[, opacity]
[, preserveTransparency] [, feather]
[, wholePath] [, antiAlias]) 
```

括号是什么意思，为什么括号里有逗号？这与以下示例调用有何关系？

```
myPath.fillPath(myNewColor)

myPath.fillPath(mynewColor, {
    mode: RGB,
    opacity: .5
}) 
```

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2013-01-16T15:39:44.480

**那么，为什么 API 文档的编写方式会混淆像我这样的常年新手/黑客/DIYer？**

它真的不应该这样写。我同意 API 文档似乎没有易用性。`man`但是，从旧式语法约定到现代 API/命名空间约定有很多交叉。

通常，使用 API 的人员类型将具有一些开发背景或至少是“高级用户”。这些类型的用户习惯于这样的语法约定，遵循 API 文档比尝试创建新的文档更有意义。

**是否有一些神秘的文档告诉人们如何阅读 API 文档？**

确实没有标准或 RFC，supersekretsyntaxdoc 存在于任何地方，但是有一个大约 30 年历史的 UNIX[手册页概要格式](http://cm.bell-labs.com/cm/cs/who/dmr/manintro.html)文件，它被广泛使用。

这方面的一些例子（并回答你的问题）是：

> 带下划线的单词被认为是文字，并且按照它们出现的方式输入。
> 
> 参数周围的方括号 ( [] ) 表示该参数是可选的。
> 
> 省略号 ... 用于表明前面的参数原型可以重复。
> 
> 以减号开头的参数 - 通常被认为是某种标志参数，即使它出现在文件名可能出现的位置。

几乎所有与编程相关的文档都使用这种类型的语法约定，来自[Python](http://docs.python.org/3.3/library/functions.html)、[man pages](http://linux.die.net/man/1/ls)、 javascript libs ( [Highcharts](http://api.highcharts.com/highcharts#Chart) ) 等。

* * *

从 Adob​​e API 分解您的示例

```
fillPath
([fillColor]
[, mode]
[, opacity]
[, preserveTransparency] [, feather]
[, wholePath] [, antiAlias]) 
```

我们看到`fillPath()`(a function) 接受可选参数`fillColor, mode, opacity, preserveTransparency, feathe, wholePath`或`antiAlias`. 调用`fillPath()`，您可以将所有这些参数传递给它。可选中的逗号`[]`表示如果该参数与其他参数一起使用，则需要逗号分隔。（当然，有时常识，但有时像 VB 之类的某些语言明确需要这些逗号来正确描述缺少哪个参数！）。[由于您没有链接到文档（而且我在Adob​​e 的脚本页面](http://www.adobe.com/devnet/photoshop/scripting.html)上找不到它），因此确实没有办法知道 Adob​​e API 所期望的格式。*但是，大多数*文档的顶部应该有一个解释，解释其中使用的约定。

因此，此功能可能有多种使用方式：

```
fillPath() //Nothing passed
fillPath(#000000,RGB) // Black, in RGB mode
fillPath(#000000,RGB,50) // Black, in RGB mode, half opacity

//Now it gets tricky, this might ALSO be acceptable:
fillPath(#000000,50) // Black, no mode, half opacity

//OR
fillPath(#000000,,50) // Black, no mode, half opacity 
```

同样，所有与 API/编程相关的文档中通常都有一些标准。但是，在每个文档中，可能存在细微差别。作为高级用户或开发人员，您应该能够阅读和理解您尝试使用的文档/框架/库。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-16T15:08:44.933

如果不仔细编写动态类型语言的 API 文档可能不是很有意义，所以不要为此感到难过，即使是最有经验的开发人员也很难理解它们。

关于括号等，通常有一个代码约定部分应该解释文字示例之外的确切用法；虽然[EBNF](http://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_Form)、正则[表达式](http://en.wikipedia.org/wiki/Regular_expression)和[铁路图](http://en.wikipedia.org/wiki/Syntax_diagram)几乎无处不在，但您应该熟悉它们才能理解大多数符号。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-08T13:44:00.660

括号表示该属性是可选的。请注意，如果您想在 nTh 等级设置一些属性，您必须为领先的属性声明属性或将它们声明为 undefined ：

```
fillPath() //good
fillPath ( someFillColor ) //good
fillPath ( someFillColor, mode ) //good
fillPath ( undefined, mode ) //good
fillPath ( mode ) //bad
fillPath ( undefined ) //really bad 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-04T18:38:31.743

不久前我也有同样的问题，有人向我指出了[Extended Backus-Naur Form](http://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_Form)。

这是有道理的，因为编程可以用来创造潜在的无限结果。该文档无法为每种可能的情况显示示例。一个很好的常用示例，我很有帮助，但是一旦您可以阅读底层语法，您就可以创建自己的代码。

# erlang - /usr/local/lib/erlang/lib/os_mon-2.2.8/priv/bin/memsup：Erlang 已关闭。

> ID：10925482
> 
> 赞同：2
> 
> 时间：2012-06-07T04:00:10.470
> 
> 标签：erlang

这是我的 MakeFile

```
run:    
    ERL_LIBS=apps:deps 
    erl +K true +A 2 +a 16 +e 10 +d -name my_server@127.0.0.1 -pa ebin -pa apps/*/ebin -pa deps/*/ebin -boot start_sasl -s my_server -sasl errlog_type error 
```

运行时的错误`make run`

```
ERL_LIBS=apps:deps 
erl +K true +A 2 +a 16 +e 10 +d -name my_server@127.0.0.1 -pa ebin -pa apps/*/ebin -pa deps/*/ebin -boot start_sasl -s my_server -sasl errlog_type error
Erlang R15B (erts-5.9) [source] [smp:4:4] [async-threads:2] [hipe] [kernel-poll:true]

Eshell V5.9  (abort with ^G)
(my_server@127.0.0.1)1> Erlang has closed
/usr/local/lib/erlang/lib/os_mon-2.2.8/priv/bin/memsup: Erlang has closed. 
make: *** [run] Error 1 
```

如何获取应用程序无法启动的原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T18:21:37.240

mem_sup 关闭时显示“Erlang 已关闭”错误，这是系统停止时的完全正常行为。

my_server 很可能有问题。

# css - IE8 - 背景没有正确显示背景位置和浮动属性

> ID：10925486
> 
> 赞同：0
> 
> 时间：2012-06-07T04:00:29.350
> 
> 标签：css

可能是我做错了一些基本错误，但 Chrome/FF 似乎没问题，但 IE8 中断（我没有尝试过其他版本）。

我为 body 标签设置了背景，并定义了背景位置。这就是 html 的外观。

```
<!DOCTYPE HTML>
<html>
<head>
<title>Test</title>
<style>
body {
    background:#fff url(skyhouse.jpg);
    background-position: bottom left;
    background-repeat: repeat-x;
}
</style>
</head>
<body>
<div style="width: 100%;float: left;">
    <div style="background-color: yellow;height: 400px;width: 400px;">
    </div>
</div>
</body>
</html> 
```

当我有一个紧跟在 body 标记之后的 div 标记和一个浮动（向左或向右）的标记时，我看到背景没有正确呈现。

[Div 向左浮动，宽度 100%](http://masterdb.in/test/t1.html)

[Div 向左浮动，宽度 80%](http://masterdb.in/test/t0.html)

当我删除浮动或将边距设置为自动时，背景渲染正常

[浮动已移除](http://masterdb.in/test/t2.html)

如果我删除背景定位，无论浮动如何，背景都会呈现良好

[背景位置已移除](http://masterdb.in/test/t3.html)

不确定似乎是什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T04:09:13.093

演示：http: [//jsfiddle.net/aHkJ5/1/](http://jsfiddle.net/aHkJ5/1/)

它适用于这个 -

```
html, body{
    height: 100%;
    width: 100%;
}
body {
    background:#fff url(http://www.makems.com/graphic/rainbow-abstract.jpg);
    background-position: left bottom;
    background-repeat: repeat-x;
}​ 
```

# symfony - 通过 Symfony2/Doctrine 中的相关实体访问存储库

> ID：10925488
> 
> 赞同：2
> 
> 时间：2012-06-07T04:00:55.690
> 
> 标签：symfony, doctrine

这类似于之前发布的这个问题： [在 Symfony2 中，我应该使用实体还是自定义存储库](https://stackoverflow.com/questions/7374339/in-symfony2-should-i-use-an-entity-or-a-custom-repository)

假设我有一个汽车实体和一个车轮实体。一辆车有很多轮子，但一个轮子只有一辆车。

在我的控制器中，我已经可以访问汽车了。我正在使用关系来获取属于汽车的车轮。

```
$car = $this->getCar();
$wheels= $car->getWheels(); 
```

以上工作，让我可以访问属于当前汽车的车轮。但是我不需要所有轮子，我只需要 flat = 0 的轮子。

有没有比存储库更好的方法来获取属于 flat = 0 的汽车实体的车轮？

我正在考虑在汽车实体（getNonFlatWheels）中创建一个吸气剂，然后过滤车轮，以便只返回非扁平车轮。

似乎会有一个更标准的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T08:02:44.493

Simone 的回答应该这样做，但同样，这取决于您的实体结构以及您想对 $wheels 对象做什么。

例如，假设您安装了最新版本的 Twig，您可以遍历 $wheels 仅保留 flat = 0 的那些：

```
{% for wheel in wheels if wheel.flat == 0 %}
    //do whatever
{% endfor %} 
```

希望它可以有用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T05:36:56.217

我不知道您的实体结构，但在类似的情况下，我使用了这段代码。您可以尝试将其放在 CarRepository 类中。

```
/**
 * Get all non flat wheels
 *
 * @return Result
 */
public function getNonFlatWheels()
{
    $em = $this->getEntityManager();

    $query = $em
            ->createQuery("
                SELECT g
                FROM Acme\DemoBundle\Entity\Car c
                JOIN c.wheels w
                WHERE w.flat = :flat
            ")
            ->setParameter('flat', 0);

    return $query->getResult();
} 
```

我希望它会帮助你。

# php - php 只使用时间

> ID：10925489
> 
> 赞同：2
> 
> 时间：2012-06-07T04:01:02.220
> 
> 标签：php, date, time

我在我的 php 脚本中使用时间戳来处理以小时、分钟和秒为单位的时间。时间戳也记录日期，但我只使用 time `00:00:00`。

例如，我正在计算时间差

```
$start = strtotime("12:00:00");
$end = strtotime("20:00:00");

$difference = $end - $start; 
```

或划分时间

`$divide = $difference/3;`

我应该继续为这些操作使用时间戳还是 php 中有特定时间的函数？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-07T04:17:54.627

如何做到这一点的一个例子`DateTime`：

```
$d1 = new DateTime('11:00:00');
$d2 = new DateTime('04:00:00');

$diff = $d1->diff($d2);

echo $diff->h, " hours ", $diff->i, " minutes\n"; 
```

输出：

```
7 hours 0 minutes 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T04:12:17.240

There is no time specific standard function in php as far as I know, what you are doing is fine. However, it is fairly easy to do the calculation on your own.

```
$newHour = $hour1-$hour2;
$newMinute = $minute1 - $minute2;
if($newMinute < 0 ){
    $newMinute +=60;
    $newHour--;
}
$newSecond = $second1 - $second2;
if($newSecond < 0){
    $newMinute --;
    $newSecond +=60;

} 
```

Assuming the first date is later than the second this should work just fine

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T04:13:58.087

You could use [mktime](http://php.net/manual/en/function.mktime.php). You can call it that way:

```
$time1 = mktime(12,24,60);   // hour,minute,second
$time2 = mktime(16,24,60);
echo ($time2 - $time1); 
```

the results are seconds, like **time()** and **strtotime()**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T04:14:41.637

If timestamps suit you, then continue using them. There really isn't anything wrong with them (except the unix version of Y2K in 2038 when the timestamp will no longer fit in a 32bit int). PHP alternatively gives you another way to do time calculations with the [DateTime](http://php.net/manual/en/class.datetime.php) class

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-07T09:15:55.270

您应该使用[`DateTime`](https://www.php.net/manual/en/class.datetime.php)可以计算两个时间点之间差异的类。

```
$d1 = new DateTime('11:00:00');
$d2 = new DateTime('04:00:00');

$diff = $d1->diff($d2);

echo $diff->h, " hours ", $diff->i, " minutes\n"; 
```

# php - 由于 mod_rewrite 导致重复的搜索结果

> ID：10925490
> 
> 赞同：0
> 
> 时间：2012-06-07T04:01:26.733
> 
> 标签：php, .htaccess, mod-rewrite, seo

我有典型的 mod_rewrite 规则来使 url 更漂亮

```
RewriteRule ^most-viewed$ index.php?time=1
RewriteRule ^most-viewed-week$ index.php?time=2 
```

但不知何故，谷歌也设法获得了 index.php?time= 版本，所以现在，在谷歌搜索结果中，两个结果都显示，一个带有 mod_rewrite url，一个是“常规”。

恐怕这对 seo 不利，因为这可能被视为“重复内容”。

我怎样才能避免“常规”被索引，甚至更好，以使其对每个人都无法访问。

如果有帮助，我会使用 PHP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T04:10:31.753

You can return a Forbidden or Gone response for anyone directly accessing that.

```
RewriteRule ^index.php\?time=(1|2)$ [F,L] 
```

.. tells it to return a '403 Forbidden' and end.

You should also include as standard a canonical meta tag:

```
<link rel="canonical" href="http://yourdomain.com/most-viewed" /> 
```

Also check out:

[http://googlewebmastercentral.blogspot.com.au/2009/02/specify-your-canonical.html](http://googlewebmastercentral.blogspot.com.au/2009/02/specify-your-canonical.html)

**EDITED** Escaped the ?time= part..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T18:12:24.620

尝试使用 Google 网站管理员工具绕过 URL 重写问题，并使用“URL 参数”忽略它。您可以在仪表板> 配置下找到它

# java - 可以即时更改 Log4j 的配置吗？

> ID：10925491
> 
> 赞同：0
> 
> 时间：2012-06-07T04:01:39.133
> 
> 标签：java, log4j

我需要知道 log4j 上的配置是否更改，例如将日志记录级别从 INFO 更改为 DEBUG 等...可以/确实影响应用程序吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T06:12:56.953

可能，请参阅[http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PropertyConfigurator.html#configureAndWatch%28java.lang.String,%20long%29](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PropertyConfigurator.html#configureAndWatch%28java.lang.String,%20long%29)。这需要更改您的 log4j 初始化代码，因为默认初始化不会监视更改（遵循[http://grepcode.com/file/repo1.maven.org/maven2/log4j/log4j/1.2.16/org中第 127 行中的代码/apache/log4j/LogManager.java](http://grepcode.com/file/repo1.maven.org/maven2/log4j/log4j/1.2.16/org/apache/log4j/LogManager.java)来查看）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T04:10:02.987

是的。您可以通过编程方式添加/删除附加程序、更改日志记录级别等。是的，它们会即时生效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T07:35:48.890

默认情况下它不支持此行为，但似乎可以使用 api 进行配置。另一个解决方案可能是 Logback。它是 Log4j 的继承者，并且支持自动重新加载开箱即用的配置文件。请参阅[http://logback.qos.ch/reasonsToSwitch.html](http://logback.qos.ch/reasonsToSwitch.html)了解更多信息以及其他更喜欢 logback 而不是 log4j 的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-10T17:48:44.357

[Log4j 版本 2](http://logging.apache.org/log4j/2.x/manual/configuration.html)具有用于 log4j.properties 文件的 monitorInterval arg 选项。

# php - PHP在服务器中获取网站根绝对URL？

> ID：10925493
> 
> 赞同：11
> 
> 时间：2012-06-07T04:01:52.533
> 
> 标签：php

我非常依赖`$_SERVER["DOCUMENT_ROOT"]`获得绝对路径。但是，这不适用于 URL 不指向根的站点。

我将网站存储在以下文件夹中：

*   站点1
*   站点2

都直接在根内。有没有办法获取当前站点根目录所在的服务器中的路径？

它应该返回：

```
 /var/chroot/home/content/02/6945202/html/site1 // If the site is stored in folder 'site1'
   /var/chroot/home/content/02/6945202/html // If the site is stored in the root 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-07T04:08:29.740

您可以简单地附加`dirname($_SERVER['SCRIPT_NAME'])`到`$_SERVER['DOCUMENT_ROOT']`.

**更新**

该网站似乎是该文件夹上“挂载”的目录，因此`SCRIPT_NAME`显然是`/`.

因此，要完成这项工作，您必须使用`__DIR__`或`dirname(__FILE__)`找出脚本在文件系统中的位置。

**更新 2**

整个站点没有单个`index.php`控制器，因此也不起作用。

以下表达式执行字符串“减法”以找到公共路径。您有一个已知的前缀（文档根目录）、一个未知的（根文件夹）和一个已知的后缀（脚本路径），因此要找到前两个，您需要使用完整的绝对路径 ( `__FILE__`) 并减去已知的后缀：

```
substr(__FILE__, 0, -strlen($_SERVER['SCRIPT_NAME'])); 
```

如果包含的文件需要此值，则必须先将其存储在常量中，然后再包含相关脚本。.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-28T10:25:47.187

对于未来的谷歌员工，这也适用于我

```
substr(substr(__FILE__, strlen(realpath($_SERVER['DOCUMENT_ROOT']))), 0, - strlen(basename(__FILE__))); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-10T14:52:53.593

仅`getcwd()`用于当前脚本所在文件夹的当前绝对服务器路径。

您可以在网站顶部定义一个常量，以便网站的其余部分可以依赖该路径。

```
define('MY_SERVER_PATH', getcwd()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-20T06:31:59.767

使用以下方法从您的服务器设置中获取绝对根 url

```
 str_replace($_SERVER['DOCUMENT_ROOT']."/",$_SERVER['PHPRC'],$_SERVER['REAL_DOCUMENT_ROOT']) 
```

或使用[getcwd()](http://php.net/manual/en/function.getcwd.php)。它获取应用程序的当前工作目录

# javascript - 将 \n 从 javascript 传递给 python

> ID：10925494
> 
> 赞同：0
> 
> 时间：2012-06-07T04:02:10.463
> 
> 标签：javascript, python

我终于克服了将完整字符串从 javascript 传递到 python 的问题，但是现在在 python 中接收字符串时缺少 Javascript 端存在`utf-8`的回车。`"\n"`我应该做些什么来实现这一目标吗？

```
function saveMeetingComments(){
    var komments = $('#cmt_t').val()
    var d = new Date();
    var commentsText  = $('#cmt_t').val()
    var abc = ''
    var request = par_makeHttpObject();
    commentsText = stringTranslate(commentsText,"'",'`');
    request.open("POST", "saveMeetingNote?clientID="+clid_+
             "&co_ID="+coid_+
             "&msgDate="+dateFormat(d, "dddd, mmmm dS, yyyy, h:MM TT")+
             "&MeetType="+AGM_+
             "&MeetDate="+meetdate+"-"+
             "&Comments="+commentsText , false);
    request.send();
    $('#cmt_t').val('');
    parkAll();
} 
```

注释是唯一可能有回车的变量。在 Python 端，代码如下：

```
def saveMeetingNote(self, **kwargs):
    clientID         = kwargs['clientID']
    co_ID            = kwargs['co_ID']
    MessageDate      = kwargs['msgDate']
    MeetingType      = kwargs['MeetType']
    MeetingDate      = kwargs['MeetDate']
    Comments_        = kwargs['Comments']
    coName = dennislib.CompanyCoID2NAME(co_ID)[0]['FName']
    ret = dennislib.saveMeetingNotes(clientID,co_ID,MessageDate,MeetingType,MeetingDate,Comments_,coName)
    return 
saveMeetingNote.exposed = True 
```

检查 Comments_ 表明所有的`\n`都消失了......

TIA

丹尼斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T04:05:33.000

看起来您在将数据粘贴到 POST 请求 URL 之前没有对数据进行 URL 编码。换行不是唯一可能丢失的东西。当有人`&`在评论字段中输入 an 时会发生什么？

用于[`encodeURIComponent`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/encodeURIComponent)解决此问题：

```
// ...
"&Comments=" + encodeURIComponent(commentsText)    // ... 
```

在服务器端，解码这个使用：

```
import urllib
# ...
Comments_ = urllib.unquote(kwargs['Comments']).decode('utf-8')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T04:05:21.703

`encodeURIComponent()`在将它们连接到 POST 请求中之前，请在所有变量上使用。

# java - 使用 SWT 在 UI 中显示文件内容

> ID：10925496
> 
> 赞同：0
> 
> 时间：2012-06-07T04:02:20.007
> 
> 标签：java, user-interface, swt, widget

我已经使用 SWT 创建了一个客户端应用程序。目前我面临这个问题，我想使用 SWT 显示日志文件的内容，比如 Eclipse 中的控制台或 Linux 终端中的 tail，它会不断更新。这可能吗？如果是，我应该看什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T20:21:38.090

看看它正在做你描述的[LogViewer插件](http://code.google.com/a/eclipselabs.org/p/logviewer/)

# xml - SQL Server 2008 Querying Soap XML

> ID：10925499
> 
> 赞同：2
> 
> 时间：2012-06-07T04:02:47.977
> 
> 标签：xml, sql-server-2008, tsql, soap

I have been trying to process this SOAP XML return using T-SQL but all I get is NULL or nothing at all. I have tried different ways and pasted them all below.

```
Declare @xmlMsg xml;

Set @xmlMsg = 
'<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <soap:Body>
    <SendWarrantyEmailResponse xmlns="http://Web.Services.Warranty/">
      <SendWarrantyEmailResult xmlns="http://Web.Services.SendWarrantyResult">
        <WarrantyNumber>120405000000015</WarrantyNumber>
        <Result>Cannot Send Email to anonymous account!</Result>
        <HasError>true</HasError>
        <MsgUtcTime>2012-06-07T01:11:36.8665126Z</MsgUtcTime>
      </SendWarrantyEmailResult>
    </SendWarrantyEmailResponse>
  </soap:Body>
</soap:Envelope>';

declare @table table (data xml);
insert into @table values (@xmlMsg);

select data from @table;

WITH xmlnamespaces ('http://schemas.xmlsoap.org/soap/envelope/' as [soap], 'http://Web.Services.Warranty' as SendWarrantyEmailResponse, 'http://Web.Services.SendWarrantyResult' as SendWarrantyEmailResult)
SELECT Data.value('(/soap:Envelope[1]/soap:Body[1]/SendWarrantyEmailResponse[1]/SendWarrantyEmailResult[1]/WarrantyNumber[1])[1]','VARCHAR(500)') AS WarrantyNumber
FROM @Table ;

;with xmlnamespaces('http://schemas.xmlsoap.org/soap/envelope/' as [soap],'http://Web.Services.Warranty' as SendWarrantyEmailResponse,'http://Web.Services.SendWarrantyResult' as SendWarrantyEmailResult)
--select @xmlMsg.value('(/soap:Envelope/soap:Body/SendWarrantyEmailResponse/SendWarrantyEmailResult/WarrantyNumber)[0]', 'nvarchar(max)')
--select T.N.value('.', 'nvarchar(max)') from @xmlMsg.nodes('/soap:Envelope/soap:Body/SendWarrantyEmailResponse/SendWarrantyEmailResult') as T(N)
select @xmlMsg.value('(/soap:Envelope/soap:Body/SendWarrantyEmailResponse/SendWarrantyEmailResult/HasError)[1]','bit') as test

;with xmlnamespaces('http://schemas.xmlsoap.org/soap/envelope/' as [soap],'http://Web.Services.Warranty' as [SendWarrantyEmailResponse],'http://Web.Services.SendWarrantyResult' as [SendWarrantyEmailResult])
SELECT
 SendWarrantyEmailResult.value('WarrantyNumber[1]','varchar(max)') AS WarrantyNumber,
 SendWarrantyEmailResult.value('Result[1]','varchar(max)') AS Result,
 SendWarrantyEmailResult.value('HasError[1]','bit') AS HasError,
 SendWarrantyEmailResult.value('MsgUtcTime[1]','datetime') AS MsgUtcTime
FROM @xmlMsg.nodes('/soap:Envelope/soap:Body/SendWarrantyEmailResponse/SendWarrantyEmailResult') SendWarrantyEmailResults(SendWarrantyEmailResult) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T04:36:37.470

好吧，我有时间重新思考，我想出了答案，所以我敢肯定有人会在找这个。

仔细看看命名空间的缩写，它是使一切正常工作的魔力。希望这可以帮助那里的人

```
Declare @xmlMsg xml;

Set @xmlMsg = 
'<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <soap:Body>
    <SendWarrantyEmailResponse xmlns="http://Web.Services.Warranty/">
      <SendWarrantyEmailResult xmlns="http://Web.Services.SendWarrantyResult">
        <WarrantyNumber>120405000000015</WarrantyNumber>
        <Result>Cannot Send Email to anonymous account!</Result>
        <HasError>true</HasError>
        <MsgUtcTime>2012-06-07T01:11:36.8665126Z</MsgUtcTime>
      </SendWarrantyEmailResult>
    </SendWarrantyEmailResponse>
  </soap:Body>
</soap:Envelope>';

declare @table table (data xml);
insert into @table values (@xmlMsg);

select data from @table;

WITH xmlnamespaces (
'http://schemas.xmlsoap.org/soap/envelope/' as [soap], 
'http://Web.Services.Warranty/' as Resp, 
'http://Web.Services.SendWarrantyResult' as Res)
SELECT Data.value('(/soap:Envelope/soap:Body/Resp:SendWarrantyEmailResponse/Res:SendWarrantyEmailResult/Res:WarrantyNumber)[1]','VARCHAR(500)') AS WarrantyNumber
FROM @Table ;

;with xmlnamespaces(
'http://schemas.xmlsoap.org/soap/envelope/' as [soap],
'http://Web.Services.Warranty/' as Resp,
'http://Web.Services.SendWarrantyResult' as Res)
select @xmlMsg.value('(/soap:Envelope/soap:Body/Resp:SendWarrantyEmailResponse/Res:SendWarrantyEmailResult/Res:WarrantyNumber)[1]', 'nvarchar(max)')
--select T.N.value('.', 'nvarchar(max)') from @xmlMsg.nodes('/soap:Envelope/soap:Body/SendWarrantyEmailResponse/SendWarrantyEmailResult:SendWarrantyEmailResult') as T(N)
--select @xmlMsg.value('(/soap:Envelope/soap:Body/SendWarrantyEmailResponse/SendWarrantyEmailResult/SendWarrantyEmailResult:HasError)[1]','bit') as test

;with xmlnamespaces(
'http://schemas.xmlsoap.org/soap/envelope/' as [soap],
'http://Web.Services.Warranty/' as Resp,
'http://Web.Services.SendWarrantyResult' as Res)
SELECT
 SendWarrantyEmailResult.value('Res:WarrantyNumber[1]','varchar(max)') AS WarrantyNumber,
 SendWarrantyEmailResult.value('Res:Result[1]','varchar(max)') AS Result,
 SendWarrantyEmailResult.value('Res:HasError[1]','bit') AS HasError,
 SendWarrantyEmailResult.value('Res:MsgUtcTime[1]','datetime') AS MsgUtcTime
FROM @xmlMsg.nodes('/soap:Envelope/soap:Body/Resp:SendWarrantyEmailResponse/Res:SendWarrantyEmailResult') SendWarrantyEmailResults(SendWarrantyEmailResult) 
```

# cakephp - In CakePHP, why is my debug function NOT displaying the object like var_dump?

> ID：10925501
> 
> 赞同：0
> 
> 时间：2012-06-07T04:03:00.970
> 
> 标签：cakephp

For some reason, when I `var_dump` it shows the objects data in the variable, but it just shows nothing when I use CakePHP's `debug`. Why is that?

Using debug I only get this much, but there is a LOT of stuff in the object when I use var_dump:

Current setting for debug:

```
Configure::write('debug', 2); 
```

Doesn't work:

```
debug($account); 
```

Output:

```
object(Recurly_Account) {

} 
```

Works:

```
echo "<pre>";
var_dump($account);
echo "</pre>"; 
```

Output:

```
object(Recurly_Account)#31 (6) {
  ["_values":protected]=>
  array(12) {
    ["adjustments"]=>
    object(Recurly_Stub)#34 (4) {
      ["objectType"]=>
      string(11) "adjustments"
      ["_href":protected]=>
      string(49) "https://api.recurly.com/v2/accounts/1/adjustments"
      ["_client":protected]=>
      NULL
      ["_links":protected]=>
      array(0) {
      }
    }
    ["billing_info"]=>
    object(Recurly_Stub)#35 (4) {
      ["objectType"]=>
      string(12) "billing_info"
      ["_href":protected]=>
      string(50) "https://api.recurly.com/v2/accounts/1/billing_info"
      ["_client":protected]=>
      NULL
      ["_links":protected]=>
      array(0) {
      }
    }
    ["invoices"]=>
    object(Recurly_Stub)#36 (4) {
      ["objectType"]=>
      string(8) "invoices"
      ["_href":protected]=>
      string(46) "https://api.recurly.com/v2/accounts/1/invoices"
      ["_client":protected]=>
      NULL
      ["_links":protected]=>
      array(0) {
      }
    }
    ["subscriptions"]=>
    object(Recurly_Stub)#37 (4) {
      ["objectType"]=>
      string(13) "subscriptions"
      ["_href":protected]=>
      string(51) "https://api.recurly.com/v2/accounts/1/subscriptions"
      ["_client":protected]=>
      NULL
      ["_links":protected]=>
      array(0) {
      }
    }
    ["transactions"]=>
    object(Recurly_Stub)#38 (4) {
      ["objectType"]=>
      string(12) "transactions"
      ["_href":protected]=>
      string(50) "https://api.recurly.com/v2/accounts/1/transactions"
      ["_client":protected]=>
      NULL
      ["_links":protected]=>
      array(0) {
      }
    }
    ["account_code"]=>
    string(1) "1"
    ["state"]=>
    string(6) "active"
    ["email"]=>
    string(20) "test1@test.com"
    ["first_name"]=>
    string(7) "test"
    ["last_name"]=>
    string(3) "test"
    ["hosted_login_token"]=>
    string(32) "19415f3937cd6079c96e5141fe99bc49"
    ["created_at"]=>
    object(DateTime)#39 (3) {
      ["date"]=>
      string(19) "2012-06-09 18:49:02"
      ["timezone_type"]=>
      int(2)
      ["timezone"]=>
      string(1) "Z"
    }
  }
  ["_unsavedKeys":protected]=>
  array(0) {
  }
  ["_errors":protected]=>
  NULL
  ["_href":protected]=>
  string(37) "https://api.recurly.com/v2/accounts/1"
  ["_client":protected]=>
  object(Recurly_Client)#27 (2) {
    ["_apiKey":"Recurly_Client":private]=>
    NULL
    ["_acceptLanguage":"Recurly_Client":private]=>
    string(5) "en-US"
  }
  ["_links":protected]=>
  NULL
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T00:57:57.953

请仔细检查打印`print_r`的*非标准*编码字符的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T01:09:41.040

这是我最近为 CakePHP 2.3 修复的（需要 PHP 5.3+）。

以前，您只会看到对象的公共属性。使用当前的 2.3 头和我的增强功能，您还将看到所有受保护的和私有的属性（使用反射——顺便说一下，print_r 可以本机提供）。

你可以在这里看到票：http: [//cakephp.lighthouseapp.com/projects/42648-cakephp/tickets/3095-enable-debuggerexportvar-to-display-protected-and-private-class-properties#ticket-3095-3](http://cakephp.lighthouseapp.com/projects/42648-cakephp/tickets/3095-enable-debuggerexportvar-to-display-protected-and-private-class-properties#ticket-3095-3)

# php - SQL order by content of IN statement

> ID：10925504
> 
> 赞同：0
> 
> 时间：2012-06-07T04:03:17.477
> 
> 标签：php, sql

> **Possible Duplicate:**
> [Ordering by the order of values in a SQL IN() clause](https://stackoverflow.com/questions/396748/ordering-by-the-order-of-values-in-a-sql-in-clause)

I have a simple query statement that pulls properties in a database by zip codes. I use an IN() statement to pass in multiple zip codes. If those zip codes are in order (increasingly further from a target zip code) is it possible to order the results by the order the zip codes are passed into the IN() statement?

For example say i have the zip codes: 77808, 77805, 77806, 77807\. I pass them into my query like so

```
$query = "SELECT * FROM Properties WHERE zip_code IN('77808', '77805', '77806', '77807',)"; 
```

Could i order the results by properties that have the zip code of 77808 first, then 77805, then 77806, etc.? or would i need to order it after i pulled it out of the database with PHP(in this case)?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T04:09:21.223

如果你使用 Mysql，那么你可以使用[FIELD](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_field)函数。

```
SELECT * FROM Properties 
WHERE zip_code IN('77808', '77805', '77806', '77807')
ORDER BY FIELD(zip_code, '77808', '77805', '77806', '77807') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T04:10:23.933

```
SELECT * FROM (
   SELECT 1 as my_order, p.* FROM Properties p WHERE zip_code = '77808'
   UNION ALL
   SELECT 2 as my_order, p.* FROM Properties p WHERE zip_code = '77805'
   UNION ALL 
   SELECT 3 as my_order, p.* FROM Properties p WHERE zip_code = '77806'
   UNION ALL
   SELECT 4 as my_order, p.* FROM Properties p WHERE zip_code = '77807'
) temp_table
ORDER BY my_order ASC 
```

# c++ - InternetCrackUrl not returning lpszHostName properly

> ID：10925505
> 
> 赞同：2
> 
> 时间：2012-06-07T04:03:17.560
> 
> 标签：c++, winapi, url, dll, nsis

I am developing a plugin for NSIS (Unicode) and I am trying to use InternetCrackUrl() to get the hostname of a URL (ie: [http://www.google.com/test.html](http://www.google.com/test.html) -> www.google.com) but instead of lpszHostName just returning "www.google.com", it returns "www.google.com/test.html".

Here is my code:

```
void __declspec(dllexport) Example(HWND hwndParent, int string_size, TCHAR *variables, stack_t **stacktop, extra_parameters *extra) {
    g_hwndParent=hwndParent;

    EXDLL_INIT();

    LPWSTR szURI = new WCHAR[string_size];
    URL_COMPONENTS urlComp;

    // Sets szURI to "http://www.xyz.com/test.html"
    popstring(szURI);

    wstring strUri = szURI;

    ZeroMemory(&urlComp, sizeof(urlComp));
    urlComp.dwStructSize = sizeof(urlComp);

    // Set required component lengths to non-zero so that they are cracked.
    urlComp.dwHostNameLength = static_cast<DWORD>(-1);
    urlComp.dwSchemeLength = static_cast<DWORD>(-1);
    urlComp.dwUrlPathLength = static_cast<DWORD>(-1);
    urlComp.dwExtraInfoLength = static_cast<DWORD>(-1);

    if (!InternetCrackUrlW(strUri.c_str(), strUri.length(), 0, &urlComp)) {
        return _T("InternetCrackUrl failed");
    }

    // urlComp.lpszHostName = www.xyz.com/test.html
} 
```

Any ideas?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T23:27:10.163

如果您不提供自己的缓冲区，InternetCrackUrl 将返回指向您作为输入传递的原始字符串中的字符的指针。它不会复制字符串。

因此，lpszHostName 将指向第一个字符，而 dwHostNameLength 将为您提供构成主机名的字符数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T04:25:41.717

这是预期的行为。因为当您说 www.google.com 时，它会转换为[http://www.google.com/test.html](http://www.google.com/test.html)。该 URL 实际上是 www.google.com/test.html ，这是返回的内容。为了得到你需要的东西，你需要做一些字符串操作。

您可以使用 std::string 类的 strrchr 函数或 find_first_of 方法。

# python - Cannot easy_install readline for Python 2.7.3 on Mac Os Lion

> ID：10925507
> 
> 赞同：6
> 
> 时间：2012-06-07T04:04:04.080
> 
> 标签：python, osx-lion, readline, easy-install

I am trying to install the python readline module. I have already installed readline via homebrew. If I type

```
easy_install readline 
```

I get

```
Downloading http://pypi.python.org/packages/source/r/readline/readline-6.2.2.tar.gz#md5=ad9d4a5a3af37d31daf36ea917b08c77
Processing readline-6.2.2.tar.gz
Writing /var/folders/44/dhrdb5sx53s243j4w03063vh0000gn/T/easy_install-64FbG8/readline-6.2.2/setup.cfg
Running readline-6.2.2/setup.py -q bdist_egg --dist-dir /var/folders/44/dhrdb5sx53s243j4w03063vh0000gn/T/easy_install-64FbG8/readline-6.2.2/egg-dist-tmp-NOmStB
clang: error: no such file or directory: 'readline/libreadline.a'
clang: error: no such file or directory: 'readline/libhistory.a'
error: Setup script exited with error: command '/usr/bin/clang' failed with exit status 1 
```

Any ideas about how I could fix this ?

Thanks

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-04-09T16:07:12.850

Pypi 中有一个新的解决方案来解决这个问题，`pip install gnureadline`.

[https://pypi.python.org/pypi/gnureadline](https://pypi.python.org/pypi/gnureadline)

根本问题是 libedit (BSD-licensed) vs. Gnu Readline (GPL-licensed) 。Apple 宁愿提供不兼容的 BSD 代码，也不愿提供有 GPL 限制的兼容代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T10:09:46.997

这个错误应该在上周发布的 readline 版本 6.2.4 中得到修复。

另请注意，您不需要通过自制软件安装 readline 库本身。它已经包含在 python readline 模块中。

[欢迎任何对 python-readline 模块有问题的人在模块的 GitHub 页面](https://github.com/ludwigschwardt/python-readline)上打开一个问题。这将确保为每个人永久解决问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T21:25:20.670

我在 OS X Lion 10.8 中遇到了同样的问题，并通过将我的 /Developer 重命名为 /Developer-old 来修复它。看到[这个问题](https://github.com/ludwigschwardt/python-gnureadline/pull/19)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-26T09:44:56.277

以上都不是我的工作。卸载 ipython 和 readline 后，我运行了以下最终工作

```
easy_install http://pypi.python.org/packages/source/r/readline/readline-6.1.0.tar.gz
pip install ipython 
```

是的，readline 6.1.0 是旧版本，但 6.2.x 或其他版本不起作用（2013 年 9 月）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T04:35:59.317

尝试直接安装二进制 egg：

```
$ easy_install http://pypi.python.org/packages/2.7/r/readline/readline-6.2.2-py2.7-macosx-10.7-intel.egg#md5=25383d860632d4a1521961ba68a52fe2 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-07T03:11:35.423

确保您已安装 gcc。

```
which gcc 
```

应该返回

```
/usr/bin/gcc 
```

我在尝试easy_install readline 时遇到了同样的错误。直到我下载了 tar 并尝试手动构建它，我才注意到它说

```
checking whether make sets $(MAKE)... no
checking for gcc... no
checking for cc... no
checking for cl.exe... no
configure: error: in `/Users/roneill/readline-6.2.4.1/rl/readline-lib':
configure: error: no acceptable C compiler found in $PATH
See `config.log' for more details. 
```

我意识到真正的问题是什么。我有一段时间没有使用过这台笔记本电脑，也没有使用 Xcode 安装命令行工具。一旦我这样做了，事情就会正常工作。

# .net - 什么是实体框架中的对象图

> ID：10925518
> 
> 赞同：6
> 
> 时间：2012-06-07T04:05:27.307
> 
> 标签：.net, entity-framework, c#-4.0

我目前正在研究实体框架，特别是自跟踪实体生成器和 POCO 实体。我在阅读中多次遇到“对象图”一词，但没有定义/解释。什么是实体框架上下文中的“对象图”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T04:13:31.940

我认为您的根本问题与 EF 本身无关。“对象图”是驻留在类实例内存中的数据结构。例如，如果您有：

```
public class Person
{
   public string Name { get; set; }
   public Person Manager { get; set; }
} 
```

因此，记忆中的一堆东西：

```
Person monkey = new Person()
                    {
                      Name = "Me",
                      Manager = new Person()
                                    {
                                      Name = "CTO",
                                      Manager = new Person()
                                                    {
                                                      Name = "Chairman",
                                                    }
                                    }
                    }; 
```

你会有一个有向[图](http://en.wikipedia.org/wiki/Directed_graph)，它包含我、我的老板和他的老板。基本上，我们谈论的是[数据结构 101](http://docs.realsoftware.com/index.php/Data_Structures_101)。

# windows - waveOutGetPosition 总是返回零

> ID：10925520
> 
> 赞同：0
> 
> 时间：2012-06-07T04:05:43.857
> 
> 标签：windows, audio, wave

我`waveOutWrite`用来写几个小缓冲区（每个 80 毫秒）。当他们正在播放时，我正在调用这个函数来获取播放位置：

```
 uint GetWaveOutPosInMS()
    {
        WinMM.MMTIME mmtime = new WinMM.MMTIME();
        mmtime.wType = 1;
        WinMM.MMRESULT ret = WinMM.waveOutGetPosition(WaveOut, ref mmtime, (uint)Marshal.SizeOf(typeof(WinMM.MMTIME)));
        return (mmtime.val);
    } 
```

以下是相关的附加内容：

```
 [DllImport("winmm.dll")]
    public static extern MMRESULT waveOutGetPosition(IntPtr hwo, ref MMTIME info, uint cbi);

    [StructLayout(LayoutKind.Sequential, Pack = 1)]
    public struct MMTIME
    {
        public uint wType;
        public uint val;
    } 
```

waveOutGetPosition 返回 0（无错误），但 mmtime.val 始终为零。MSDN 并不清楚“播放位置”相对于什么，只是它在 waveOutOpen 和 waveOutReset 上被重置。但它是否总是在多个 waveOutWrite() 调用中继续增加？关于为什么它总是为我返回零的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T16:01:57.893

我错误地声明了 MMTIME 结构。奇怪的是该函数没有报告错误，但根据我读过的其他内容，这个函数依赖于 OEM，因此可以看到各种奇怪的结果。似乎要求 MS 的测试不如要求 SAMPLES 好，所以我只要求样品，然后自己计算 MS。

```
 [StructLayout(LayoutKind.Sequential, Pack = 1)]
    public struct MMTIME
    {
        public uint wType;
        public uint val;

        // Padding because val is actually a union
        public uint pad;
    } 
```

# c++ - 将二维数组（指针）分配给对象中的变量以便在 C++ 中访问？

> ID：10925521
> 
> 赞同：3
> 
> 时间：2012-06-07T04:06:07.497
> 
> 标签：c++, variable-assignment, multidimensional-array

如果我没有选择描述性或简洁的名称，我很抱歉。很多问题听起来很相似，但我一直找不到我要找的东西。我想要做的是在某处存储一个二维指针数组，并将某个对象中的一个变量分配给该数组以便能够访问它。

这是一些示例代码，它们与我在一个更大的项目中遇到的编译错误相同。

```
#include <iostream>
using namespace std;
struct X{
    float n, * b[8][8];
    X(){
        n = 1;
        b[1][5] = &n;
        cout << *(b[1][5]) << endl;
    }
    void Set(float * c[8][8]){
        b = c;
        cout << *(b[1][5]) << endl;
    }
};
main(){
    float m, * a[8][8];
    m = 2;
    a[1][5] = &m;
    X obj;
    obj.Set(a);
} 
```

我希望在这段代码中发生的是一个 X 对象从它自己的二维数组开始，b[1][5] 指向的值应该打印为“1”。然后将 main 方法的二维数组 a 传递给对象的 Set() 方法并分配给它的数组变量。然后 b[1][5] 指向的值应打印为“2”。

但是，我不知道 Set() 参数 c 应该是什么类型。我明白了

```
error: incompatible types in assignment of ‘float* (*)[8]’ to ‘float* [8][8]’ 
```

当我尝试编译时。至于我为什么要这样做，我正在尝试使用指向对象的指针数组，而不是浮点数，但这是同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T05:48:37.793

试试这个：

```
#include <iostream>
using namespace std;
struct X{
    float n;
    float* (*b)[8];
    X(){
        n = 1;
        b = new float*[8][8];
        b[1][5] = &n;
        cout << *(b[1][5]) << endl;
    }
    void Set(float * c[8][8]){
        delete[] b;
        b = c;
        cout << *(b[1][5]) << endl;
    }
};
main(){
    float m, * a[8][8];
    m = 2;
    a[1][5] = &m;
    X obj;
    obj.Set(a);
} 
```

在这里，`X`存储一个指向一维数组的指针，我们将其视为指向二维数组第一个元素的指针 - 即只是一个二维数组。

在`X`的构造函数中，`X`分配它自己的数组`new`并设置它的指针指向它。调用时`Set()`，`X`删除自己的数组，并将其指针设置为指向调用者提供的数组。

唯一需要注意的是，如果您`Set()`再次调用，*该*数组将依次被删除（如果该数组是堆栈数组，则会爆炸，就像在这种情况下一样）。因此，最好将 do 的行分离`delete[] b`到它自己的成员函数中，并仅在必要时调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T04:36:35.930

您对 set 的问题是您需要复制数组内容 - 只是做`b=c`不能做您想做的事。

```
void Set(float * c[8][8]){
    for(unsigned int i=0; i<8; ++i) {
      for(unsigned int j=0; j<8; ++j) {
        b[i][j] = c[i][j];
      }
    }
    cout << *(b[1][5]) << endl;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T05:50:25.080

我认为有几个错误。首先，在 Set() 函数中，您分配了一个数组名称。但是数组名不应该用作变量。您可以通过将指针 b 的 2D 数组作为指向 1D 指针数组的指针来解决这个问题，例如 float * (*b)[8]...

其次，当您将 2D 指针数组作为 Set() 函数的参数发送时，它会衰减为指向 1D 指针数组的指针，即类似于 float *(*a)[8] 的指针。所以你必须使 Set() 函数的形式参数成为指向一维指针数组的指针，如 void Set(float * (*c)[8])...

最后有一个东西你在 main 中的浮点变量 m 是 main 的局部变量，所以当控制传递给 Set() 函数时，我认为编译器在 m 中找不到值（可能被释放）......所以它输出 undefined或给出运行时错误..您可以通过制作 ma 静态版本来解决这个问题。即通过声明静态浮动m ...

总共使您的代码如下所示：

```
#include <iostream>
using namespace std;
struct X{
    float n, *(*b)[8];
    X(){
        n = 1;
        b[1][5] = &n;
        cout << *(b[1][5]) << endl;
    }
    void Set(float * (*c)[8]){
        b = c;
        cout << *(b[1][5]) << endl;
    }
};
main(){
    float * a[8][8];
    static float m;
    m = 2;
    a[1][5] = &m;
    X obj;
    obj.Set(a);
} 
```

这将正确输出:)

# c# - 如何清理 C# Task API 上的挂起任务？

> ID：10925526
> 
> 赞同：1
> 
> 时间：2012-06-07T04:06:43.700
> 
> 标签：c#, task

我有一个简单的功能如下：

```
 static Task<A> Peirce<A, B>(Func<Func<A, Task<B>>, Task<A>> a)
    {
        var aa = new TaskCompletionSource<A>();
        var tt = new Task<A>(() => 
            a(b =>
            {
                aa.SetResult(b);
                return new TaskCompletionSource<B>().Task;
            }).Result
        );
        tt.Start();
        return Task.WhenAny(aa.Task, tt).Result;
    } 
```

这个想法很简单：对于 的任何实现`a`，它必须返回一个`Task<A>`给我。为此，它可能使用也可能不使用参数（类型`Func<A, Task<B>`）。如果是这样，我们的回调将被调用并设置结果`aa`，然后`aa.Task`将完成。否则，结果`a`将不依赖于它的参数，所以我们简单地返回它的值。在任何情况下，要么`aa.Task`或结果`a`将完成，因此它永远不应该阻塞，除非 a 不使用它的参数和块，或者`a`块返回的任务。

上面的代码工作，例如

```
 static void Main(string[] args)
    {
        Func<Func<int, Task<int>>, Task<int>> t = a =>
        {
            return Task.FromResult(a(20).Result + 10);
        };
        Console.WriteLine(Peirce(t).Result); // output 20
        t = a => Task.FromResult(10);
        Console.WriteLine(Peirce(t).Result); // output 10
    } 
```

这里的问题是，这两个任务一旦确定结果`aa.Task`就`tt`必须清理掉`WhenAny`，否则恐怕会出现挂任务泄漏。我不知道该怎么做，有人可以提出一些建议吗？或者这实际上不是问题，C# 会为我做这件事？

PS 这个名字`Peirce`来源于`((A->B)->A)->A`命题逻辑中著名的“皮尔士定律”（ ）。

更新：重点不是“处理”任务，而是阻止它们运行。我已经测试过，当我将“主”逻辑放在 1000 个循环中时，它运行缓慢（大约 1 个循环/秒），并创建了很多线程，所以这是一个需要解决的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T04:55:44.253

A`Task`是一个托管对象。除非您引入非托管资源，否则您不应该担心`Task`资源泄漏。让 GC 清理它并让终结器处理`WaitHandle`.

**编辑：**

如果要取消任务，请考虑以`CancellationTokenSource`. 您可以通过重载将此令牌传递给任何任务，并且在每个任务内部，您可能有一些代码如下：

```
while (someCondition)
{
    if (cancelToken.IsCancellationRequested)
        break;
} 
```

这样，您的任务就可以优雅地清理而不会引发异常。但是，`OperationCancelledException`如果您调用`cancelToken.ThrowIfCancellationRequested()`. 因此，您的想法是，无论先完成什么，都可以取消其他任务，这样他们就不会挂断工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T03:33:13.930

感谢@Bryan Crosby 的回答，我现在可以实现如下功能：

```
 private class CanceledTaskCache<A>
    {
        public static Task<A> Instance;
    }

    private static Task<A> GetCanceledTask<A>()
    {
        if (CanceledTaskCache<A>.Instance == null)
        {
            var aa = new TaskCompletionSource<A>();
            aa.SetCanceled();
            CanceledTaskCache<A>.Instance = aa.Task;
        }
        return CanceledTaskCache<A>.Instance;
    }

    static Task<A> Peirce<A, B>(Func<Func<A, Task<B>>, Task<A>> a)
    {
        var aa = new TaskCompletionSource<A>();
        Func<A, Task<B>> cb = b =>
        {
            aa.SetResult(b);
            return GetCanceledTask<B>();
        };
        return Task.WhenAny(aa.Task, a(cb)).Unwrap();
    } 
```

它工作得很好：

```
 static void Main(string[] args)
    {
        for (int i = 0; i < 1000; ++i)
        {
            Func<Func<int, Task<String>>, Task<int>> t = 
                async a => (await a(20)).Length + 10;
            Console.WriteLine(Peirce(t).Result); // output 20
            t = async a => 10;
            Console.WriteLine(Peirce(t).Result); // output 10
        }
    } 
```

现在它很快并且不消耗太多资源。如果不使用 async/await 关键字，它可以更快（在我的机器上大约 70 倍）：

```
 static void Main(string[] args)
    {
        for (int i = 0; i < 10000; ++i)
        {
            Func<Func<int, Task<String>>, Task<int>> t =
                a => a(20).ContinueWith(ta => 
                    ta.IsCanceled ? GetCanceledTask<int>() : 
                    Task.FromResult(ta.Result.Length + 10)).Unwrap();
            Console.WriteLine(Peirce(t).Result); // output 20
            t = a => Task.FromResult(10);
            Console.WriteLine(Peirce(t).Result); // output 10
        }
    } 
```

这里的问题是，即使你可以检测到 的返回值`a(20)`，也没有办法取消`async`块而不是抛出一个`OperationCanceledException`，它会阻止`WhenAny`优化。

更新：优化代码并比较 async/await 和本机 Task API。

更新：如果我可以编写以下代码，那将是理想的：

```
static Task<A> Peirce<A, B>(Func<Func<A, Task<B>>, Task<A>> a)
{
    var aa = new TaskCompletionSource<A>();
    return await? a(async b => {
        aa.SetResult(b);
        await break;
    }) : await aa.Task;
} 
```

在这里，如果 a 成功，则有`await? a : b`value`a`的结果，如果 a 被取消，则有 value b（如`a ? b : c`，`a`结果的值应该与 b 的类型相同）。 `await break`将取消当前的异步块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T04:50:06.557

正如 MS 并行编程团队的 Stephen Toub 所说： [“不。不要费心处理你的任务。”](http://blogs.msdn.com/b/pfxteam/archive/2012/03/25/10287435.aspx)

tldr：在大多数情况下，释放任务什么都不做，当任务实际分配了非托管资源时，它的终结器将在收集任务对象时释放它们。

# linux - 无效的命令“订单”，可能拼写错误或由未包含在服务器配置中的模块定义失败

> ID：10925528
> 
> 赞同：45
> 
> 时间：2012-06-07T04:07:19.770
> 
> 标签：linux, apache

当我尝试启动或重新启动我的 apache 服务器时，我收到以下消息：

> /etc/apache2/apache2.conf 第 162 行的语法错误：无效的命令“Order”，可能拼写错误或由未包含在服务器配置操作“configtest”中的模块定义失败。Apache 错误日志可能包含更多信息。失败的！

我试着在谷歌上找到这个错误并修复它：

> http://linuxindetails.wordpress.com/2009/12/02/invalid-command-order-perhaps-misspelled-or-defined-by-a-module-not-included-in-the-server-configuration-failed/

我得到错误：

> 模块 authz_host 不存在！

那么，有人帮我修复它吗？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2016-02-08T08:09:35.913

我刚刚从 openSUSE 13.2 升级到 openSUSE Leap 42.1 时遇到了同样的问题。

问题不是 apache2 配置中缺少模块。

问题是从 apache 2.2 升级到 apache 2.4。“Order”和“Allow”必须改写如下（示例）：

在 2.2 中：

```
Order allow,deny
Allow from all 
```

在 2.4 中：

```
Require all granted 
```

您可以在此处找到更多选项示例： [升级 apache2](https://httpd.apache.org/docs/2.4/upgrading.html)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-01-15T04:56:06.863

在 SUSE 12 上，authz_host 已经启用，所以我需要遵循**willoller**的评论并启用 mod_access_compat：

```
a2enmod mod_access_compat
service apache2 restart 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2015-08-05T09:52:16.160

对于 Apache 2.4，请取消注释/添加以下模块：

```
LoadModule access_compat_module modules/mod_access_compat.so
LoadModule authz_host_module modules/mod_authz_host.so 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2013-10-01T20:41:29.797

您需要启用该`authz_host`模块。[这是关于该模块的 Apache 文档。](http://httpd.apache.org/docs/2.2/mod/mod_authz_host.html)

我不确定您使用的是什么 Linux 发行版，但这里有一些示例。

**Ubuntu：**

```
sudo a2enmod authz_host
sudo service apache2 restart 
```

**RHEL：**

```
vi /etc/httpd/conf/httpd.conf

# Make sure this line is not commented:
...
LoadModule authz_host_module modules/mod_authz_host.so
... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-20T12:45:56.193

如果您在**Gentoo**上运行 Apache2.4，请确保启用以下`USE`将构建`mod_authz_host`二进制`apache`文件的标志：

*   `apache2_modules_authz_host`：基于主机（名称或IP地址）的组授权
*   `apache2_modules_access_compat`：基于主机（名称或 IP 地址）的组授权。作为**与以前版本的兼容模块提供**。

如果您从源代码编译 Apache2.4，那么您可以通过使用构建时配置选项（[完整列表在这里](http://howtolamp.com/lamp/httpd/2.4/installing/httpd-configure-options/)）遵循相同的指导。

# .net - dotnet resources dll，替换一个字符串（丢失源代码）

> ID：10925529
> 
> 赞同：0
> 
> 时间：2012-06-07T04:07:31.250
> 
> 标签：.net, dll

我丢失了 dotnet 3.5 dll 的源代码，该 dll 包含我所有的字符串（html 文档）和图像。我现在需要更新其中一个文档和一些图像。对我来说更新文件中字符串的最佳方法是什么（它们的长度会不同，这有关系吗？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-16T07:52:43.827

# 步骤#1：拆卸组件。

使用以下命令来反汇编您的 .net exe 或 dll：

```
ildasm /out=assembly_name.il assembly_name.dll 
```

（将 assembly_name.dll 替换为您的 dll 或 exe 名称）。

这将输出大量数据文件。我们对这些感兴趣：

*   *.resources - 二进制资源文件。
*   assembly_name.res - 资源清单。
*   assembly_name.il - 实际的 MSIL 代码。

# 步骤#2：编辑资源文件。

准备修改的/新的资源，不管它的名字是什么，但格式应该与最初包含在程序集中的格式相同（例如，将位图替换为位图，将图标替换为图标）。

使用资源编辑器编辑资源文件。我使用Lutz Roeder 的Resourcer for DotNet ( [http://www.aisto.com/roeder/dotnet/ )，它是免费软件。](http://www.aisto.com/roeder/dotnet/)顺便说一句，同一位作者还编写了 Reflector.NET，这是一个非常适合 .NET 开发人员的工具。

如果您使用的是 Resourcer，则需要执行以下步骤：

*   打开要更改的 .resources 文件并重命名原始资源项。
*   按 Ctrl-F 插入文件并从文件系统中选择修改后的版本。
*   将新项目重命名为与前一个项目具有相同的原始名称（您不能为此复制/粘贴，由于某种原因，它只会复制整个项目而不仅仅是文本）。

# 步骤#3：重新组装组件。

使用以下命令来反汇编您的 .net exe 或 dll：

重要提示：这将覆盖原来的 dll/exe ！

```
ilasm /resource=assembly_name.res /dll /output=assembly_name.dll /key=signing_key.snk assembly_name.il 
```

（将 assembly_name.dll 替换为您的 dll 或 exe 名称，当然如果需要，将 /dll 更改为 /exe）。

签名密钥参数是可选的，仅当原始程序集已签名时才需要。

当然，如果它是由其他人签名以防止回火，除非您提供原始签名密钥，否则您将无法使用修改后的程序集，我假设您不会拥有。但这就是 .NET 的工作方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T04:17:24.870

直接编辑已编译的程序集是粗略的。我会用反编译器将它[反编译](http://www.jetbrains.com/decompiler/)回源代码并正确修复它。也将其放回源代码控制中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T06:38:55.497

So it turns out that it's easier to

EDIT THE DLL WITH A HEX EDITOR

than it is to START OVER which is the usual advice.

# c++ - cout 和 printf 中的意外输出

> ID：10925530
> 
> 赞同：0
> 
> 时间：2012-06-07T04:07:45.510
> 
> 标签：c++, c, increment, cout

> **可能重复：**
> [谁能解释这些未定义的行为（i = i++ + ++i，i = i++ 等……）](https://stackoverflow.com/questions/949433/could-anyone-explain-these-undefined-behaviors-i-i-i-i-i-etc)

对于下面的代码：

```
main() {

int i = 1 ;

cout << i << ++i << i++ ;

} 
```

为什么我得到的输出是 331 而不是预期的 122 ？

（即使我使用`printf`而不是 cout 也是如此？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T04:36:50.223

`<<`是一个函数，类似于`ostream& operator<<(ostream& lhs, RhsType rhs)`.

```
cout << a; 
```

相当于

```
operator<<(cout, a); 
```

该函数返回lhs，即`return lhs`-，所以在上面的例子`cout`中是返回的。

所以你的例子

```
cout << i << ++i << i++ ; 
```

相当于

```
operator<<(operator<<(operator<<(cout, i), ++i), i++); 
```

*更正*C++ 没有指定执行递增操作的顺序。对你和我来说，最嵌套的优先级似乎是合乎逻辑的，但就编译器而言，它可以随时自由地执行增量。它与函数的行为相同，例如`myFunc(cout, i++, ++i, i)`计算增量的顺序未定义。唯一可以保证的是功能是从内到外评估的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T04:15:02.923

编译器可以自由更改评估顺序。您在同一个状态上多次更改 i ，这会导致未定义的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T04:14:43.547

这就是为什么你不应该编写这样的代码的原因。我相信这会给你不同的编译器不同的结果。使用 Visual C++，当在 Debug 和 Release 版本中运行时，这会为您提供不同的输出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T04:15:11.853

*您观察到*的输出可以用这种方式解释：表达式在传递到或用于输出之前*从右到左进行评估。*`cout``printf`

> 起始值为 1
> 
> i++ 是后增量，即它会打印值 (1) 然后递增到 2：输出 1
> 
> ++i 是预先递增的，所以在打印之前 2 变成了 3：输出 3
> 
> 最后，打印 i (3) 的当前值：输出 3

这些各自的值被传递给输出例程。

为了澄清，我的回答只是试图解释观察到的行为，而不是为编译器或输出例程如何排序它们的评估/操作制定硬性规则。

话虽如此，这种类型的代码***不是***好的做法，很可能会导致各种可以避免的问题。

# android - 如何验证加密手机的密码？

> ID：10925531
> 
> 赞同：0
> 
> 时间：2012-06-07T04:07:53.527
> 
> 标签：android

我可以使用下面的代码`getEncryptionState`来确定手机是否已加密。要继续，我需要验证用户输入的密码是否正确。所以我尝试了`verifyEncryptionPassword()`，但效果不佳：每次调用此方法时，总是得到相同的返回值：`0`。这意味着它将任何字符串作为正确的加密密码，这显然是错误的。

```
 IMountService mountService = IMountService.Stub.asInterface(ServiceManager.getService("mount"));
    boolean isEncrypted;
    try {
        isEncrypted = (mountService.getEncryptionState() != MountService.ENCRYPTION_STATE_NONE);
        if (isEncrypted) {
            int result = mountService.verifyEncryptionPassword(candidatePw);
            if (result == 0) {
                Log.d(TAG, "Pw verifies");                    
            } else if (result != -2) {
                Log.d(TAG, "Pw mismatch");
            } else {
                Log.e(TAG, "verified failed");
            }
        }
    } catch (Exception e) {
    } 
```

如何验证加密密码？

# macos - Xcode SDL 在启动时崩溃

> ID：10925533
> 
> 赞同：0
> 
> 时间：2012-06-07T04:08:04.233
> 
> 标签：macos, xcode4, osx-lion, sdl

这是我第一次尝试在 Xcode4 上使用 SDL，但马上就出现了问题。该项目将编译，但当我尝试运行它时，它立即崩溃。我收到此错误消息：

```
Library not loaded: @rpath/SDL.framework/Versions/A/SDL
  Referenced from: /Users/USER/Desktop/*/test.app/Contents/MacOS/test
  Reason: image not found 
```

使用代码：

```
#include <SDL/SDL.h>

int main(int argc,char** argv) 
{
    SDL_Init(SDL_INIT_EVERYTHING);
    SDL_Quit();
    return 0;
}; 
```

我按照此页面[http://meandmark.com/blog/2012/01/using-sdl-with-xcode-4/](http://meandmark.com/blog/2012/01/using-sdl-with-xcode-4/)上的教程进行操作。我真的很想开始为 MacOSX 开发应用程序。我正在使用狮子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T18:13:57.527

我发现您的代码有问题，您要求包含 SDL.h。代码应如下所示：

```
#include "SDL.h" 
```

作为您链接到的教程的作者，我可以告诉您，我的网站上有一篇介绍 SDL 和 OpenGL 的文章。本文包含一个 Xcode 4 项目，可帮助您在 Mac OS X 上开始使用 SDL。

[SDL 和 OpenGL](http://www.meandmark.com/sdlopenglpart1.html)

# android - 如何在android的另一个活动中获取一个活动的更新？

> ID：10925536
> 
> 赞同：0
> 
> 时间：2012-06-07T04:08:05.577
> 
> 标签：android, progress-bar, android-activity

我有 3 项活动**A、B 和**C。在活动**A 中，我开始下载一个文件**，从那里我转到活动 B，然后从那里 C。现在我想要显示我在**活动 B 和 C**中的活动 A 中开始的文件下载的进度条。

我怎样才能在android中实现这一点。如果有人有任何想法，请帮助我。欢迎所有建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T04:14:08.727

I would suggest doing the download in a Service, not in a thread tied to an Activity. The service can broadcast progress updates and each activity register to receive them. Or each Activity can bind to the Service and ask for updates. There's a nice tutorial [here](http://www.vogella.com/articles/AndroidServices/article.html) about downloading a file with a Service.

A further advantage of this is that the download won't be orphaned if the activity is destroyed and restarted (when, for example, the user rotates the device).

# iphone - lexical or preprocessor issue file not found occurs while archiving?

> ID：10925539
> 
> 赞同：46
> 
> 时间：2012-06-07T04:08:31.613
> 
> 标签：iphone, xcode4.3

![this is the screen shot foe the error](../Images/36e65a35b5a0fa12873c86e126857a9a.png)

I am new to this iPhone development and i have almost completed my first application but when i try for creating an archive it gives an error lexical or preprocessed issue file not found But it runs fine in simulator and also has also tested on device. I have included SDwebimage architecture for lazy loading of image in table view.Can any tell me what is the issue?

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-06-07T04:20:05.383

Few things to try, Ensure the Framework and all it's headers are imported into your project properly.

Also in your `Build Settings` set `YES` to `Always search user paths`, and make sure your `User header paths` are pointing to the Framework.

Finally, Build->Clean and Restart Xcode.

Hope this helps !

**UPDATE**: According to SDWebImage's installation, it's required you make a modification to `Header Search Path` and not `User header paths`, As seen below.

![enter image description here](../Images/617b5a5b138ec19424a68e9f81407228.png)

Have you done this as well? I suggest slowly, re-doing all the installation steps from the beginning.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-06-10T15:21:15.257

Spaces in a folder name in your header search path can cause this problem. Make sure the folders in your project do not have spaces in their names.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-11-15T11:31:09.267

My project was building fine until I updated to Xcode 10.1\. After the Xcode update, started getting `Lexical or preprocessor Issue` errors on build. Some XCDataModel header files could not be found.

This fixed the issue.

Go to Build Settings, Header Search Paths Change the appropriate value from $(SRCROOT) `non-recursive` to `recursive`.

This ensures that subfolders are also searched for headers during build.

[![enter image description here](../Images/4fd78e415c2d7db4c02a308d30b28260.png)](https://i.stack.imgur.com/nXO4g.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-10-25T09:50:49.727

I had this same issue now and found that my sub-projects 'Public Header Folder Path' was set to an incorrect path (when compared with what my main project was using as its 'Header Search Path' and 'User Header Search Path').

e.g.

My main project had the following:

*   Header Search Paths
    *   Debug "build/Debug-iphoneos/../../Headers"
    *   Release "build/Debug-iphoneos/../../Headers"

* * *

And the same for the User Header Search Paths

* * *

Whereas my sub-project (dependency) had the following:

*   Public Header Folder Path
    *   Debug "include/BoxSDK"
    *   Release "include/BoxSDK"

Changing the 'Public Header Folder Path' to "../../Headers/BoxSDK" fixed the problem since the main project was already searching that folder ('../../Headers').

PS: I took some good screenshots, but I am not allowed to post an answer with images until I hit reputation 10 :(

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-11-29T00:31:28.850

I had this problem after changed project name. I used all the methods mentioned on the internet but still doesn't work. Then I realized that all the header files not found was from cocoapods, so I re-installed the cocoapods using `pod install`, and thus solved the problem.

Hope this could help.

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-09-03T11:26:30.757

In my case I was developing a framework and had a test application inside it, what was missing is inside the test application *target* -> *build settings* -> *Framework Search Paths*:

*   The value needed to be the framework path (the build output - .framework) which is in my case: **"../FrameworkNameFolder/"** - the 2 points indicates to go one folder up.

* * *

Also, inside the test application target -> Build Phases -> Link Binary With Libraries:

*   I had to remove the framework file, clean the project, add the framework file again, compile and this also solved the issue.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-03T13:20:34.450

The new version contain fix for this, feel free to update. Or you can just replace

```
#include "iPhone_View.h" 
```

with

```
#if UNITY_VERSION < 450

#include "iPhone_View.h"

#endif 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-18T18:21:07.553

Delete the unit testing from your project follow the below steps this will solve the issue.

select your project from the project navigator to open the project editor. From the target delete the test from the left side of the project editor and press the Delete key.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-03-02T17:02:17.740

I know this is old, but I'm gonna chime in anyway because it may be useful to someone. If you can still see the file in Finder, then click on the file in your project and delete it, selecting "remove references" and not "move to trash".

Once the reference is removed, drag and drop the file from finder into your project again and it should sort itself out.

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-03-16T09:29:05.533

Just adding another thing that worked for me :

```
react-native link 
```

Evidently my ReactNative files were no longer there. I could figure that out by clicking on

> Build Phases -> Link Binary with Libraries ->

Then right clicking a file I knew was responsible for React, and clicking `Show In Finder` .

But nothing opened. So assuming the library went missing, I just ran the above command which relinked everything again.

Also if you havn't, try :

```
rm -rf node_modules/ && npm install 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-04-21T11:21:26.617

This happened to me after I renamed a file. For some reason it was still looking for the file with the old name. What I did was create the file that it was complaining about and added to the project. Then I did a Project->clean, then Project->Build and verified the error was gone. Then I selected the newly added files and deleted them. This removed all references and I no longer see the error.

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-07-12T11:42:26.540

I fixed mine. The fb sdk downloaded (from my browser) as 'FacebookSDKs-iOS-4.22.0' -- I just had to rename the folder to FacebookSDK. So now in Build

> Settings --> Framework Search Paths

the path looks something like **/Users/.../Documents/FacebookSDK** (where as before it was */Users/.../Documents/FacebookSDKs-iOS-4.22.0)* Hope this helps!﻿</p>

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-07-24T15:17:38.730

For what it's worth, my problem was completely unrelated to the error Xcode was giving. I stumbled onto a solution by deleting the .h reference, compiling, adding the reference back and compiling again. The actual error then became evident.

# php - 多封电子邮件发送到一个地址，而应该只发送一封。AWS SES

> ID：10925540
> 
> 赞同：1
> 
> 时间：2012-06-07T04:08:59.083
> 
> 标签：php, amazon-web-services

我使用 Amazon SES Mailer（链接：[https](https://github.com/geoloqi/Amazon-SES-Mailer-PHP) ://github.com/geoloqi/Amazon-SES-Mailer-PHP ）和 PHP 中的一个简单循环向列表中的每个电子邮件地址发送一封电子邮件。

为了确保电子邮件能够发送出去，我将我自己的电子邮件地址附加到每个列表中。（多个列表不会一次全部发送）

每个列表都有一个唯一的电子邮件。

每隔一段时间，每隔几个列表（其中没有重复的电子邮件地址），我就会收到多达 4 份相同的电子邮件。我只能假设我的客户也收到了这些重复的电子邮件。

我一次又一次地检查了我的代码，我看不到每个地址多次发出请求的任何方式。

我第一次注意到这一点时，我向大约 200 个地址的列表发送了一封电子邮件，根据亚马逊 SES 管理控制台，它发送了超过 3000 封电子邮件。

为什么！？

我在 AWS SES 论坛上看到过有关此问题的其他帖子，但都没有回复。所以我想我会在这里尝试。

这是我的剧本的内容。

[http://pastebin.com/TUk7bci8](http://pastebin.com/TUk7bci8)

编辑：我检查了电子邮件的标题，每封电子邮件都有不同的 ID，我听说这意味着我的代码以某种方式发送了重复，但我不知道如何发送。

帮助？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T04:13:27.563

Probably you're building the emails in a loop, but forgetting to clear the `To:` addresses on each loop, so each loop sends to everyone you've already sent to, plus whatever 'new' person you've fetched on the current iteration, so:

```
while($row = fetch_row_from_db()) {
   $to .= $row['email'];  <---concatenating, not resetting.
   send_email($to, $message);
} 
```

so for the first result you fetch, $to is `a@b.c`. On the next iteration, it's `a@b.c d@e.f`, then `a@b.c d@e.f g@h.i` and so on...

Of course, this is just a guess. You've provided no code at all, so for all I know the problem is really because your server is frustrated from not getting to see the Venus/Sun transit due to clouds and is making your life miserable because of it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T04:49:14.803

我仍然不知道它为什么要发送多封电子邮件，但我用 JavaScript 重建了我的代码，对 PHP 进行了 axjax 调用，现在它工作正常。:) 没有更多的重复耶！xD

# android - 如何在android中以编程方式获取gmail邮件

> ID：10925542
> 
> 赞同：11
> 
> 时间：2012-06-07T04:09:02.050
> 
> 标签：android

我想将 gmail、hotmail、rediffmail 等不同邮件服务的所有收件箱邮件放入我的应用程序中。最初我尝试使用 Imap 获取 gmail 邮件。但我得到一个套接字异常。这是我尝试过的代码。请帮我。

```
public void getMails(View V){
Properties props = System.getProperties();
props.setProperty("mail.store.protocol", "imaps");
props.setProperty("mail.imap.port", "993");

props.setProperty("mail.imap.socketFactory.class", .ssl.SSLSocketFactory");
props.setProperty("mail.imap.socketFactory.fallback", "false");
    try {
      Session session = Session.getDefaultInstance(props, null);
      Store store = session.getStore("imaps");
      store.connect("imap.gmail.com", "aravelliramesh35@gmail.com", "pswd");
    }
  //}catch (NoSuchProviderException e) {
  //   e.printStackTrace();
  //   System.exit(1);
  //} 
    catch (MessagingException e) {
        e.printStackTrace();
        System.exit(2);
    }
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-07T04:15:16.520

Try this...

```
 Properties props = new Properties();
    //IMAPS protocol
    props.setProperty(“mail.store.protocol”, “imaps”);
    //Set host address
    props.setProperty(“mail.imaps.host”, imaps.gmail.com);
    //Set specified port
    props.setProperty(“mail.imaps.port”, “993″);
    //Using SSL
    props.setProperty(“mail.imaps.socketFactory.class”, “javax.net.ssl.SSLSocketFactory”);
    props.setProperty(“mail.imaps.socketFactory.fallback”, “false”);
    //Setting IMAP session
    Session imapSession = Session.getInstance(props);

Store store = imapSession.getStore(“imaps”);
//Connect to server by sending username and password.
//Example mailServer = imap.gmail.com, username = abc, password = abc
store.connect(mailServer, account.username, account.password);
//Get all mails in Inbox Forlder
inbox = store.getFolder(“Inbox”);
inbox.open(Folder.READ_ONLY);
//Return result to array of message
Message[] result = inbox.getMessages(); 
```

# java - 当 Hibernate 失去连接时显示消息

> ID：10925543
> 
> 赞同：1
> 
> 时间：2012-06-07T04:09:02.767
> 
> 标签：java, hibernate, swing

我有一个 Hibernate J2SE Swing 应用程序，我想向用户显示一个 MessageBox，说明当 Internet 连接或网络出现问题时无法建立连接。我知道需要捕获的异常 -

```
java.sql.SQLRecoverableException: IO Error: The Network Adapter could not establish the connection 
```

但是 Hibernate 已经在内部处理了这个异常。那么各位有什么建议呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T07:14:44.190

您可以实现自己的[ConnectionProvider](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/connection/ConnectionProvider.html)。基本上，每当 Hibernate 需要数据库连接时，它都会在其配置的 ConnectionProvider 上调用*getConnection() 。*

您可以创建当前正在使用的 ConnectionProvider 的子类并执行以下操作：

```
public class MyConnectionProvider extends WhateverConnectionProviderYouAreUsing
  {
      public Connection getConnection()
      {
           try
           {
               return super.getConnection();
           } 
           catch (Exception e)
           {
               // Show message about connection error
           }
       } 
```

在 SessionFactory 配置中，您必须配置自定义 ConnectionProvider ，例如

```
hibernate.connection.provider_class=your.packagename.MyConnectionProvider 
```

# ant - Sublime Text 2 Ant Build Target: [错误2] 系统找不到指定的文件

> ID：10925547
> 
> 赞同：0
> 
> 时间：2012-06-07T04:10:05.263
> 
> 标签：ant, sublimetext2

当我从 Sublime Text 2 (Ctrl+B) 运行基本的 Ant Build 时，它可以工作，但它会运行所有目标。我想指定/覆盖默认构建目标。我添加了一个新的构建系统，例如：

```
{
    "cmd": ["ant", "my_target"]
} 
```

但它失败了：

```
[Error 2] The system cannot find the file specified
[Finished] 
```

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:08:50.980

sublimetext [buildsystems 文档页面](http://docs.sublimetext.info/en/latest/reference/build_systems.html)显示了如何在 Windows 上创建一个特殊情况来执行“ant.bat”而不是“ant”。请参阅“特定于平台的选项”部分：

> windows、osx 和 linux 元素允许您在构建系统中提供特定于平台的数据。这是一个例子：
> 
> ```
> {
>     "cmd": ["ant"],
>     "file_regex": "^ *\\[javac\\] (.+):([0-9]+):() (.*)$",
>     "working_dir": "${project_path:${folder}}",
>     "selector": "source.java",
> 
>     "windows":
>     {
>         "cmd": ["ant.bat"]
>     } 
> } 
> ```
> 
> 在这种情况下，将在除 Windows 之外的所有平台上执行 ant，而在 Windows 中将使用 ant.bat。

这有帮助吗？

# php - 制作基于 php 的 url 重写器？

> ID：10925549
> 
> 赞同：0
> 
> 时间：2012-06-07T04:10:14.120
> 
> 标签：php, html

有没有办法制作`php`基于 - 的 URL 重写器？我想为我公司的 CMS 制作一个 URL 重写模块。

例如：

```
http://www.seacen.org/v2/content.php?id=32&lang=1.htm 
```

至

```
http://www.seacen.org/v2/content/32/1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T04:26:55.630

创建一个`.htaccess`文件并在其中粘贴以下内容

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule content/(.*)/(.*)/ content.php?id=$1&lang=$2.html 
```

您的 mod_rewrite 可能已经启用，但如果没有：

*   如果您在共享主机上，请让您的主机支持人员为您启用它。
*   如果您在 VPS 上或在本地运行测试服务器，请取消注释 httpd.conf 中的以下行`LoadModule rewrite_module modules/mod_rewrite.s`

# mysql - MySQL 将多张表中的数据合并到一张表中

> ID：10925550
> 
> 赞同：0
> 
> 时间：2012-06-07T04:10:20.190
> 
> 标签：mysql

我有 27 个每月网络分析表，格式如下：

```
+---------------+-------+
| url           | views |
+---------------+-------+
| /foo/bar.php  | 200   |
| /bar/foo.html | 500   |
+---------------+-------+ 
```

我需要将它们组合成一个具有唯一“url”字段的表，例如：

```
+---------------+---------------+---------------+
| url           | views_2009_01 | views_2009_02 |
+---------------+---------------+---------------+
| /foo/bar.php  | 200           | 700           |
| /bar/foo.html | 500           |               |
| /snafu.html   |               | 500           |
+---------------+---------------+---------------+ 
```

为此，我创建了一个临时表：

```
+---------------+-------+------------+
| url           | views | date       |
+---------------+-------+------------+
| /foo/bar.php  | 200   | 2009-01-01 |
| /bar/foo.html | 500   | 2009-01-01 |
| /foo/bar.php  | 700   | 2009-02-01 |
| /snafu.html   | 500   | 2009-02-01 |
+---------------+-------+------------+ 
```

其中“url”字段不是唯一的并添加了一个日期字段。

我导入了每个分析表，并为每条记录附加了一个日期。

然后我只将网址导入到我的决赛桌中，如下所示：

```
INSERT IGNORE INTO target (url)
SELECT S.url
FROM temp S; 
```

然后，我对每个原始月度表进行了更新，如下所示：

```
UPDATE temp S, target T
SET T.views_200910 = S.views
WHERE S.url = T.url && S.date = '2009-10-01'; 
```

我的问题是，是否有更优雅的方式来实现相同的结果？

提前致谢。

# jquery - 在多个条件语句上在 jQuery 中添加淡入淡出

> ID：10925553
> 
> 赞同：0
> 
> 时间：2012-06-07T04:10:38.473
> 
> 标签：jquery, html

**任务：**单击`li`导航过滤器显示和隐藏带有过渡淡入淡出的内容。

**问题** 我只是在猜测并检查在哪里放置这个淡入//淡出过渡。此外，我觉得我的代码效率太低，因为我使用了 4 个条件语句。堆栈会引导我创建一个解决方案来改进这个脚本的整体逻辑，这样我就可以做出一个漂亮的过渡：c？

**[实时代码](http://designobvio.us/ie/)**

**jQuery 脚本**

```
$(document).ready(function () {

//attach a single click listener on li elements
$('li.navCenter').on('click', function () {

    // get the id of the clicked li
    var id = $(this).attr('id');

    // match current id with string check then apply filter
    if (id == 'printInteract') {
        //reset all the boxes for muliple clicks 
        $(".box").find('.video, .print, .web').closest('.box').show();

        $(".box").find('.web, .video').closest('.box').hide();

        $(".box").find('.print').show();
    }

    if (id == 'webInteract') {
        $(".box").find('.video, .print, .web').closest('.box').show();
        $(".box").find('.print, .video').closest('.box').hide();
        $(".box").find('.web').show();
    }
    if (id == 'videoInteract') {
        $(".box").find('.video, .print, .web').closest('.box').show();
        $(".box").find('.print, .web').closest('.box').hide()
        $(".box").find('.video').show();
    }
    if (id == 'allInteract') {
        $(".box").find('.video, .print, .web').closest('.box').show();
    }

}); 
```

**选定的 HTML**

```
<nav>
<ul class="navSpaces">
    <li id="allInteract" class="navCenter">
        <a id="activeAll" class="navBg" href="#"><div class="relativeCenter"><img src="asset/img/logo30px.png" /><h3>all</h3></div></a>
    </li>
    <li id="printInteract" class="navCenter">
        <a id="activePrint" class="navBg" href="#"><div class="relativeCenter"><img src="asset/img/print.gif" /><h3>print</h3></div></a>
    </li>
    <li id="videoInteract" class="navCenter">
        <a id="activeVideo" class="navBg" href="#"><div class="relativeCenter"><img src="asset/img/video.gif" /><h3>video</h3></div></a>
    </li>
    <li id="webInteract" class="navCenter">
        <a id="activeWeb" class="navBg" href="#"><div class="relativeCenter"><img src="asset/img/web.gif" /><h3>web</h3></div></a>
    </li>
</ul> 
```

**框 HTML**

```
<div class="box">
<h1 title="Light me up"></h1>
<div class="innerbox">
    <figure>
        <img src="" />
    </figure>
    <ul class="categorySelect">
        <li class="print"></li>
        <li class="video"></li>
        <li class="web"></li>
    </ul>
</div> 
```

附言。抱歉新手问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T04:24:03.323

您可以简化代码并添加如下转换：

```
$(document).ready(function () {
    //attach a single click listener on li elements
    $('li.navCenter').on('click', function () {
        var all = $(".box").find('.video, .print, .web');
        var activeCls = "." + this.id.replace("Interact", "");
        if (activeCls == ".all") {
            all.closest('.box').show();
        } else {
            var active = $(".box").find(activeCls);
            active.closest('.box').show();
            all.not(active).closest('.box').hide();
        }
    });
}); 
```

当你有这个工作时，你可以用你选择的 jQuery 转换来代替`.show()`and`.hide()`调用。

我假设您想要隐藏/显示`.box`每个项目的容器，但是没有看到您隐藏和显示的内容的真实页面 HTML，我无法确定这是您想要做的。`hide()`无论您隐藏/显示什么，您都希望在`show()`原始代码中保持一致。

在选择要使用的过渡时，您需要使用在删除/添加多个项目时效果很好的东西。fadeIn() 和 fadeOut() 这样可能不会很好地工作，因为当项目最终淡出时，剩余的项目会跳来跳去。我不确定什么会最有效。也许将宽度设置为零。

# android - 在 alertDialog 中使用微调器时出现空指针异常

> ID：10925561
> 
> 赞同：1
> 
> 时间：2012-06-07T04:12:21.940
> 
> 标签：android, nullpointerexception, spinner, android-alertdialog

这是我写的代码：

```
// create a view in dialog box
final View fileView = getLayoutInflater().inflate(R.layout.filename, null);
String[] array_spinner = new String[5];
array_spinner[0]="1";
array_spinner[1]="2";
array_spinner[2]="3";
array_spinner[3]="4";
array_spinner[4]="5";

Spinner s = (Spinner) findViewById(R.id.sp_CAT);
ArrayAdapter adapter = new ArrayAdapter(this,
android.R.layout.simple_spinner_item, array_spinner);
s.setAdapter(adapter);
s.setSelection(2);

//Spinner mCAT = (Spinner) findViewById(R.id.sp_CAT);
//ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
//fileView.getContext(), R.array.a_CAT, android.R.layout.simple_spinner_item);
//adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
//mCAT.setAdapter(adapter);

EditText mSID = (EditText) fileView.findViewById(R.id.et_SID);
EditText mSCD = (EditText) fileView.findViewById(R.id.et_SCD);
EditText mNUM = (EditText) fileView.findViewById(R.id.et_NUM);
final String tSID=mSID.getText().toString();
final String tSCD=mSCD.getText().toString();
final String tNUM=mNUM.getText().toString();

// show dialog box
new AlertDialog.Builder(CameraActivity3.this).setTitle("Set FileName")
  .setView(fileView)
  .setPositiveButton("OK", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int whichButton) {

      Toast.makeText(CameraActivity3.this, tSID+tSCD+tNUM, Toast.LENGTH_SHORT).show();

    }// public void onClick
  }) // setPositiveButton
  .setNegativeButton("Cancel", null).show(); 
```

但是，我收到一个**空指针异常**。经过一些测试（注释掉一些行），它似乎与微调器适配器有关。我是不是搞错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T04:14:43.470

用这个：

```
Spinner s = (Spinner) fileView.findViewById(R.id.sp_CAT); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T05:45:23.137

写在下面的代码行

```
Spinner s = (Spinner) fileView.findViewById(R.id.sp_CAT); 
```

代替

```
Spinner s = (Spinner) findViewById(R.id.sp_CAT); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T15:31:16.653

对于将来使用`DialogFragment`构建的任何人来说`AlertDialog`，你不能只`this`在`ArrayAdapter`. 我的解决方案如下：

```
AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    LayoutInflater inflater = getActivity().getLayoutInflater();
    View myView = inflater.inflate(R.layout.program_num_spinner_popup, null);

    builder.setView(myView);

    programNumbers = (Spinner) myView.findViewById(R.id.prog_num_spinner_list);
    ArrayAdapter<CharSequence> numbersAdapter = ArrayAdapter.createFromResource(this.getActivity(), R.array.program_numbers, android.R.layout.simple_spinner_item);
    numbersAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    programNumbers.setAdapter(numbersAdapter); 
```

我替换`this`为`this.getActivity()`结合 Zaz Gmy 的答案和 Dipak Keshariya 的答案（它们是相同的）。

# php - BACK 按钮的问题

> ID：10925569
> 
> 赞同：2
> 
> 时间：2012-06-07T04:13:36.073
> 
> 标签：php

我对 PHP 编程很陌生，事实上我刚开始 3 天，所以我需要你的帮助。我正在创建一个包含 4 页的表单。当用户点击后退按钮时，例如从第 2 页到第 1 页，他之前在第 1 页上选择的所有数据都应该出现在那里，这样他就不需要再次填写了。您能否通过发布代码来帮助我。

这是示例代码

page1.php

```
<?php
session_start();
$session=session_id();
$_SESSION['session']=$session;

    ?>
    <html>
    <body>
    <form action="oopssurvey.php" method="post">
    Where do you work?<br/>
    <Input type ="radio" name="location" value="USA" <?php if($_SESSION['location']    == 'USA') echo "checked='checked'" ?>/>In the United states<br/>
    <Input type ="radio" name="location" value="India" <?php if($_SESSION['location'] == 'India') echo "checked='checked'" ?>/>Outside of the United states<br/>

    <input name="Operation1" type="submit" value="saveandresume" />
    <input name="Operation2" type="submit" value="next" />

    </form>
    </body>
    </html> 
```

page2.php

```
<?php
session_start();

if($_SESSION['session']==$session)
{
$location=$_SESSION['location'];
}
else
{
$_SESSION['location'] = $_POST['location'];
}
?>

<html>

<body>

<form action="oopssurvey.php" method="post">

In my work group, we are actively involved in making our work processes more effective and efficient (simpler, faster, etc.) using ACE.<br/>
<Input type ="radio" name="effective" value="Agree"/>Agree<br/>
<Input type ="radio" name="effective" value="Agreenordisagree"/>Neither Agree nor Disagree<br/>
<Input type ="radio" name="effective" value="disagree"/>Disagree<br/>

I have received the training I need to understand and implement ACE in my work group.<br/>
<Input type ="radio" name="training" value="Agree"/>Agree<br/>
<Input type ="radio" name="training" value="Agreenordisagree"/>Neither Agree nor Disagree<br/>
<Input type ="radio" name="training" value="disagree"/>Disagree<br/>

All employees at the company are treated fairly regardless of differences.<br/>
<Input type ="radio" name="treated" value="Agree"/>Agree<br/>
<Input type ="radio" name="treated" value="Agreenordisagree"/>Neither Agree nor Disagree<br/>
<Input type ="radio" name="treated" value="disagree"/>Disagree<br/>

Sufficient effort is made to get the opinions and thoughts of the people who work here.<br/>
<Input type ="radio" name="effort" value="Agree"/>Agree<br/>
<Input type ="radio" name="effort" value="Agreenordisagree"/>Neither Agree nor Disagree<br/>
<Input type ="radio" name="effort" value="disagree"/>Disagree<br/>

<input name="Operation3" type="submit" value="saveandresume" />
<input name="Operation4" type="submit" value="next" />
<input name="Operation5" type="submit" value="back" />

</form>

</body>

</html> 
```

page3.php

//一些代码//

调查.php

```
<?php
session_start();
include 'classperson.php';

if($_POST['Operation1'])
{
$_SESSION['location'] = $location;
$_SESSION['location'] = $_POST['location'];
echo "Please save the link inorder to continue your survey http://bonnie/~jnagesh/SampleSurvey/OOPS/oopspage2.php";
}

else if($_POST['Operation2'])
{
$_SESSION['location'] = $location;
$_SESSION['location'] = $_POST['location'];
include "oopspage2.php";
}

elseif($_POST['Operation3'])

{
$_SESSION['effective'] = $effective;
$_SESSION['effective'] = $_POST['effective'];
$_SESSION['training'] = $training;
$_SESSION['training'] = $_POST['training'];
$_SESSION['treated'] = $treated;
$_SESSION['treated'] = $_POST['treated'];
$_SESSION['effort'] = $effort;
$_SESSION['effort'] = $_POST['effort'];
echo "Please save the link inorder to continue your survey later http://bonnie/~jnagesh/SampleSurvey/NextandBackButtons/page3.php";

}

elseif($_POST['Operation4'])
{
$_SESSION['effective'] = $effective;
$_SESSION['effective'] = $_POST['effective'];
$_SESSION['training'] = $training;
$_SESSION['training'] = $_POST['training'];
$_SESSION['treated'] = $treated;
$_SESSION['treated'] = $_POST['treated'];
$_SESSION['effort'] = $effort;
$_SESSION['effort'] = $_POST['effort'];
include "oopspage3.php";
}

elseif($_POST['Operation5'])     /* THE PROBLEM LIES IN THIS CODE FOR BACK BUTTON*/
{
$location = $_POST['location'];
$_SESSION['location'] = $location;
<html> 
<body> 
<form action="1.php" method="post"> /*oBVIOUSLY i WONT BE ALLOWED TO DECLARE <HTML> INSIDE PHP*/
<input type="submit" value="back"/>
</form> 
</body> 
} 
```

. . . . . . . . ?>

你能帮我如何实现后退按钮吗？提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T05:14:05.630

试试这个，我希望它对你有用

第1页.php

```
<?php
@session_start();
//$session=session_id();
//$_SESSION['session']=$session;
//print_r($_SESSION);
?>
<html>
<body>
<form action="oopssurvey.php" method="post">
  Where do you work?<br/>
  <Input type ="radio" name="location" value="USA" <?php if(isset($_SESSION['location'])    == 'USA') echo "checked='checked'" ?>/>
  In the United states<br/>
  <Input type ="radio" name="location" value="India" <?php if(isset($_SESSION['location']) == 'India') echo "checked='checked'" ?>/>
  Outside of the United states<br/>
  <input name="Operation1" type="submit" value="saveandresume" />
  <input name="Operation2" type="submit" value="next" />
</form>
</body>
</html> 
```

Page2.php

```
<html>

<body>
<form action="oopssurvey.php" method="post">
  In my work group, we are actively involved in making our work processes more effective and efficient (simpler, faster, etc.) using ACE.<br/>
  <Input type ="radio" name="effective" value="Agree" <?php if(isset($_SESSION['effective'])    == 'Agree') echo "checked='checked'" ?>/>
  Agree<br/>
  <Input type ="radio" name="effective" value="Agreenordisagree" <?php if(isset($_SESSION['effective'])    == 'Agreenordisagree') echo "checked='checked'" ?>/>
  Neither Agree nor Disagree<br/>
  <Input type ="radio" name="effective" value="disagree" <?php if(isset($_SESSION['effective'])    == 'disagree') echo "checked='checked'" ?>/>
  Disagree<br/>
  I have received the training I need to understand and implement ACE in my work group.<br/>
  <Input type ="radio" name="training" value="Agree" <?php if(isset($_SESSION['training'])    == 'Agree') echo "checked='checked'" ?>/>
  Agree<br/>
  <Input type ="radio" name="training" value="Agreenordisagree" <?php if(isset($_SESSION['training'])    == 'Agreenordisagree') echo "checked='checked'" ?>/>
  Neither Agree nor Disagree<br/>
  <Input type ="radio" name="training" value="disagree" <?php if(isset($_SESSION['training'])    == 'disagree') echo "checked='checked'" ?>/>
  Disagree<br/>
  All employees at the company are treated fairly regardless of differences.<br/>
  <Input type ="radio" name="treated" value="Agree" <?php if(isset($_SESSION['treated'])    == 'Agree') echo "checked='checked'" ?>/>
  Agree<br/>
  <Input type ="radio" name="treated" value="Agreenordisagree" <?php if(isset($_SESSION['treated'])    == 'Agreenordisagree') echo "checked='checked'" ?>/>
  Neither Agree nor Disagree<br/>
  <Input type ="radio" name="treated" value="disagree" <?php if(isset($_SESSION['treated'])    == 'disagree') echo "checked='checked'" ?>/>
  Disagree<br/>
  Sufficient effort is made to get the opinions and thoughts of the people who work here.<br/>
  <Input type ="radio" name="effort" value="Agree" <?php if(isset($_SESSION['effort'])    == 'Agree') echo "checked='checked'" ?>/>
  Agree<br/>
  <Input type ="radio" name="effort" value="Agreenordisagree" <?php if(isset($_SESSION['effort'])    == 'Agreenordisagree') echo "checked='checked'" ?>/>
  Neither Agree nor Disagree<br/>
  <Input type ="radio" name="effort" value="disagree" <?php if(isset($_SESSION['effort'])    == 'disagree') echo "checked='checked'" ?>/>
  Disagree<br/>
  <input name="Operation3" type="submit" value="saveandresume" />
  <input name="Operation4" type="submit" value="next" />
  <input name="Operation1" type="submit" value="back" />
</form>
</body>
</html> 
```

Page3.php 或 oopssurvey.php

```
<?php
@session_start();
//include 'classperson.php';

if(isset($_POST['Operation1']))
{
    if($_POST['Operation1'] == 'saveandresume'){
        $_SESSION['location'] = $_POST['location'];
        echo "Please save the link inorder to continue your survey http://bonnie/~jnagesh/SampleSurvey/OOPS/oopspage2.php";
    }else if($_POST['Operation1'] == 'back') {
        include "page1.php";            
    }
}

else if(isset($_POST['Operation2'])){
    include "page2.php";
}

elseif(isset($_POST['Operation3'])){

$_SESSION['effective'] = $_POST['effective'];
$_SESSION['training'] = $_POST['training'];
$_SESSION['treated'] = $_POST['treated'];
$_SESSION['effort'] = $_POST['effort'];
echo "Please save the link inorder to continue your survey later http://bonnie/~jnagesh/SampleSurvey/NextandBackButtons/page3.php";
}

elseif(isset($_POST['Operation4']))
{
    if($_POST['Operation4'] == 'next'){
        echo "welcome to form3";    
        //include "oopspage3.php";
    }else{
    /*$_SESSION['effective'] = $effective;
    $_SESSION['effective'] = $_POST['effective'];
    $_SESSION['training'] = $training;
    $_SESSION['training'] = $_POST['training'];
    $_SESSION['treated'] = $treated;
    $_SESSION['treated'] = $_POST['treated'];
    $_SESSION['effort'] = $effort;
    $_SESSION['effort'] = $_POST['effort'];*/   

    }

}
?> 
```

# android - How to stop the gallery last item at right margin?

> ID：10925575
> 
> 赞同：0
> 
> 时间：2012-06-07T04:14:43.527
> 
> 标签：android, android-gallery

While scrolling the gallery last item is scrolled and stops at left margin. I want to stop the last item at right margin of the screen. i am showing 3 items at a time on screen thanks for any suggestions.

```
 public View getView(int position, View convertView, ViewGroup parent) { 
  Gallery newArticleRow;
  LinearLayout layout = (LinearLayout) convertView;
  if (layout == null) {
    Log.d("in home", "HomeActivityListViewAdapter--- new getView:" + position);

    // Inflate the news article row
    LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    convertView = inflater.inflate(R.layout.news_articles_row, null);

    newArticleRow = (Gallery) convertView
        .findViewById(R.id.news_articles_gallery);

    DisplayMetrics metrics = new DisplayMetrics();

    FishwrapHomeActivity.this.getWindowManager().getDefaultDisplay()
        .getMetrics(metrics);
    MarginLayoutParams mlp = (MarginLayoutParams) newArticleRow
        .getLayoutParams();
    mlp.setMargins(-(metrics.widthPixels - (int) TypedValue.applyDimension(
        TypedValue.COMPLEX_UNIT_DIP, 90, FishwrapHomeActivity.this
            .getResources().getDisplayMetrics())), mlp.topMargin,
        mlp.rightMargin, mlp.bottomMargin);
    newArticleRow.setId(position);
    newArticleRow.setLayoutParams(mlp);
    convertView.setTag(newArticleRow);
    convertView.setBackgroundColor(Color.WHITE);
    convertView.setFocusableInTouchMode(false);
  } else {
    Log.d("in home", "HomeActivityListViewAdapter--- old getView:" + position);
    // Get the newArticleRow HorizontialListView
    newArticleRow = (Gallery) convertView.getTag();
  }

  // Set the adapter only if the ArticleRow
  if (newArticleRow.getAdapter() == null || newArticleRow.getAdapter() != rowAdapters.get(position)) {
    newArticleRow.setAdapter(rowAdapters.get(position));
    newArticleRow.setOnItemClickListener(itemListener);
  }

 // Debug.stopMethodTracing();

  return convertView;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T08:25:00.630

@Rekha 我认为当 position = lastitem - 1 元素时，您应该停止在该方向上进一步滚动功能。您可能希望通过您的 Gallery 实例 ( gallery.getSelectedItemPosition() ) 和 onscrolllistener 来执行此操作。

顺便问一下，这是否解决了您之前的“位置重新启动列表视图中的画廊”问题？当使用画廊持有人时，我有一个类似的问题，在我的列表中重复我的画廊。

# firefox - Difference b/w web content cache and application cache

> ID：10925578
> 
> 赞同：0
> 
> 时间：2012-06-07T04:15:00.317
> 
> 标签：firefox, caching, browser-cache

What's the difference b/w web content cache and application cache. On my system Firefox is using a space of 400MB for web content cache.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T21:37:39.157

应用程序缓存是指 Web 应用程序可以在服务器端存储数据的机制。实际存储会有所不同，它可以是数据库、内存等。这通常是出于性能原因。例如，从数据库中获取数据的调用可能需要相当长的时间，并且可能不会经常更改。最初获取数据后，开发人员可能会选择将其放入 App Cache 以便下次从内存中快速获取数据，而不是再次调用 DB。

浏览器缓存是指存储在用户计算机（客户端）上的数据。例如，浏览器可能会缓存图像、样式表等。这取决于服务器如何响应浏览器请求。例如，服务器可能会在响应中发送某些标头，指示应缓存 javascript 文件直到在服务器上更改等。这样，浏览器通过无需多次重新下载数据来改善用户体验。

# mysql - 使用 MySQL 数据作为 Google Maps Demographics 的数据源

> ID：10925580
> 
> 赞同：0
> 
> 时间：2012-06-07T04:15:07.627
> 
> 标签：mysql, google-maps

有关如何开始使用带有 mysql 数据的 Google 地图人口统计图层的任何资源？我目前正在浏览此页面：[https ://developers.google.com/maps/documentation/business/demographics](https://developers.google.com/maps/documentation/business/demographics)

数据似乎来自尼尔森。如何将来自 mysql 数据库的数据用于人口统计层？

例如我有这个数据：

```
var demo_data = [['forest', 'ABC Forest', lat , lng], 
                 ['mountain', 'Mt. Everest', lat, lng], 
                 ['forest', 'DEF Forest', lat, lng]]; 
```

然后也许我会遍历它以确定哪个是森林，哪个是山，然后应用人口统计中使用的样式将所有具有森林/山脉的区域视为一个单元。

任何可以为我提供有关如何执行此操作的线索的链接肯定会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T04:41:41.863

人口统计图层显示为渲染图块（能够获取点击事件的特定属性）。

您能否更清楚“来自mysql数据库的数据”是什么意思？您是否建议您拥有自己的人口统计数据，您想将其呈现为图块，或者您有不同的数据想要覆盖在 Google Maps API 提供的人口统计图层之上，或者其他什么？

# mysql - mysql根据值将一列分成多列

> ID：10925585
> 
> 赞同：0
> 
> 时间：2012-06-07T04:15:30.707
> 
> 标签：mysql, sql

```
mysql> select description from devices where id=172;
+--------------------------------------------------------------------------------+
| description                                                                    |
+--------------------------------------------------------------------------------+
| Fault: 'HYD OIL TEMP HIGH' from 'Controller' of type 'SYSTEM' with code '1003' |
+--------------------------------------------------------------------------------+
1 row in set (0.01 sec) 
```

以上是我在数据库中有记录的模式。我试图将它们分成多个列，就像这样只是为了运行报告。

```
+---------+------------------------+--------------+---------+---------+
| status  |  description           | device       | system  |   code  |
+---------+------------------------+--------------+---------+---------+
| Fault   | HYD HYD OIL TEMP HIGH  | controller   | SYSTEM  | 1003    |
+---------+------------------------+--------------+---------+---------+ 
```

我知道我正在做的上述事情更糟。我不想更改 ETL 以运行一次性报告。这是我尝试过的。

```
mysql> select substr(description, 1, locate(":", description)-1) as status from devices where id=172;
+--------+
| status |
+--------+
| Fault  |
+--------+
1 row in set (0.00 sec) 
```

该数据库位于亚马逊 RDS 之上。所以我不能使用[lib_mysqludf_preg](http://www.mysqludf.org/lib_mysqludf_preg/)。我只能做普通的SQL。帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T06:23:59.757

试试这个——

```
SELECT
  SUBSTRING_INDEX(description, ':', 1) status,
  SUBSTRING_INDEX(SUBSTRING_INDEX(description, '''', 2), '''', -1) description,
  SUBSTRING_INDEX(SUBSTRING_INDEX(description, '''', 4), '''', -1) device,
  SUBSTRING_INDEX(SUBSTRING_INDEX(description, '''', 6), '''', -1) system,
  SUBSTRING_INDEX(SUBSTRING_INDEX(description, '''', 8), '''', -1) code
FROM
  devices
WHERE
  id = 172; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T05:36:30.773

这并不容易，很可能在应用程序端做这件事是最好的。但是，如果您需要使用原生 SQL 来执行此操作，您可能应该尝试使用 和 的`MID`组合`LOCATE`。这些将为您提供字符串的子字符串和位置，因此它会假设字符串的格式将是一致的。

你已经`status`完成了这个领域，在这里我会给你`description`，`device`你应该知道如何完成它（`st`是描述字符串）

```
SELECT 
    MID(st, LOCATE(': ',st) + 3, LOCATE(' from ',st) - LOCATE(': ',st) - 4) AS description,
    MID(st, LOCATE(' from ',st) + 7, LOCATE(' of type ',st) - LOCATE(' from ',st) - 8) AS device
FROM yourtable 
```

# android - 如何在 Android 上创建状态检查 Activity？

> ID：10925586
> 
> 赞同：-3
> 
> 时间：2012-06-07T04:15:33.573
> 
> 标签：android, android-layout, android-activity

我想在`Android 2.3`应用程序启动时创建一个 Activity，它检查应用程序需要的一些东西，然后放置一个检查符号，然后放置被检查事物的文本。

例如：

> 1.  显示“GPS Provider enabled”文本，如果已启用，则左侧会出现一个复选标志（如果不是停止标志）
> 2.  在第一个下方，显示“网络提供商已启用”文本，如果已启用，则左侧会出现一个复选标志（如果不是停止标志）

等等。

如果可能的话，我想把它做成动画。有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T06:04:04.173

在您的活动中`onResume()`编写以下代码以检查是否`GPS/Network Provider`启用，并根据该代码编写您的其他代码。

```
 final LocationManager manager = (LocationManager) getSystemService(LOCATION_SERVICE);

    if (!manager.isProviderEnabled(LocationManager.GPS_PROVIDER)) {
        // available
    }
    else
    {
        //not available
    }

    if (!manager.isProviderEnabled(LocationManager.NETWORK_PROVIDER)) {
        // available
    }
    else
    {
        //not available
    } 
```

* * *

使用 ToggelButtons 指示它们是否可用。

# cuda - 支持 CUDA 的设备

> ID：10925587
> 
> 赞同：5
> 
> 时间：2012-06-07T04:15:42.237
> 
> 标签：cuda

我对 CUDA 编程非常陌生。我正在浏览 SDK 附带的示例。我能够编译代码，但是当我运行它时，出现以下错误：

`"clock.cu(177) : CUDA Runtime API error 38: no CUDA-capable device is detected"`.

我的机器上有 GeForce 8400M GS，根据这个列表，它是一个支持 CUDA 的 GPU：http: [//developer.nvidia.com/cuda-gpus](http://developer.nvidia.com/cuda-gpus)。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-07T05:13:20.103

您可以检查几件事来修复该错误：

1.  确保您`/dev/nvidia*`的权限是 666 ( `crw-rw-rw-`) 和所有者 root:root

2.  如果您使用 安装 SDK `sudo`，那么您可能需要先更改为 root 才能执行代码

3.  确保您已在[CUDA 区域](http://developer.nvidia.com/cuda-downloads)中为您的 CUDA 工具包安装了兼容的 NVIDIA 驱动程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:18:34.980

> 如果您确定 cuda 驱动程序并已全部安装，请尝试

```
$ sudo nvidia-xconfig --enable-all-gpus 
```

现在试试你的 cuda 样本，

# ruby - `open_http': 403 Forbidden (OpenURI::HTTPError) for the string "Steve_Jobs" 但不适用于任何其他字符串

> ID：10925591
> 
> 赞同：9
> 
> 时间：2012-06-07T04:16:06.573
> 
> 标签：ruby, open-uri, http-error

我正在浏览[http://ruby.bastardsbook.com/](http://ruby.bastardsbook.com/)提供的 Ruby 教程，我遇到了以下代码：

```
require "open-uri"

remote_base_url = "http://en.wikipedia.org/wiki"
r1 = "Steve_Wozniak"
r2 = "Steve_Jobs"
f1 = "my_copy_of-" + r1 + ".html"
f2 = "my_copy_of-" + r2 + ".html"

# read the first url
remote_full_url = remote_base_url + "/" + r1
rpage = open(remote_full_url).read

# write the first file to disk
file = open(f1, "w")
file.write(rpage)
file.close

# read the first url
remote_full_url = remote_base_url + "/" + r2
rpage = open(remote_full_url).read

# write the second file to disk
file = open(f2, "w")
file.write(rpage)
file.close

# open a new file:
compiled_file = open("apple-guys.html", "w")

# reopen the first and second files again
k1 = open(f1, "r")
k2 = open(f2, "r")

compiled_file.write(k1.read)
compiled_file.write(k2.read)

k1.close
k2.close
compiled_file.close 
```

代码失败并出现以下跟踪：

```
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/open-uri.rb:277:in `open_http': 403 Forbidden (OpenURI::HTTPError)
    from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/open-uri.rb:616:in `buffer_open'
    from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/open-uri.rb:164:in `open_loop'
    from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/open-uri.rb:162:in `catch'
    from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/open-uri.rb:162:in `open_loop'
    from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/open-uri.rb:132:in `open_uri'
    from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/open-uri.rb:518:in `open'
    from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/open-uri.rb:30:in `open'
    from /Users/arkidmitra/tweetfetch/samecode.rb:11 
```

我的问题不是代码失败，而是每当我将 r2 更改为 Steve_Jobs 以外的任何内容时，它都可以工作。这里发生了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-10T00:56:03.630

当我请求一个存在的 wiki 页面时，您的代码对我来说运行良好（Ruby MRI 1.9.3）。

当我请求一个不存在的 wiki 页面时，我得到一个 mediawiki 404 错误代码。

*   Steve_Jobs => 成功
*   Steve_Austin => 成功
*   Steve_Rogers => 成功
*   Steve_Foo => 错误

维基百科*做了大量*的缓存，所以如果你看到对“史蒂夫乔布斯”的回应与其他确实存在的人不同，那么最好的猜测是因为维基百科正在缓存史蒂夫乔布斯的文章，因为他很有名，并可能添加额外的检查/验证以保护物品免受快速变化、损坏等。

适合您的解决方案：始终使用用户代理字符串打开 url。

```
rpage = open(remote_full_url, "User-Agent" => "Whatever you want here").read 
```

Mediawiki 文档中的详细信息：“当您向 MediaWiki Web 服务 API 发出 HTTP 请求时，请务必指定一个正确标识您的客户端的 User-Agent 标头。不要使用您的客户端库提供的默认 User-Agent，但是组成一个包含客户端名称和版本号的自定义标头：类似于“MyCuteBot/0.1”。

在 Wikimedia wiki 上，如果您不提供 User-Agent 标头，或者您提供空的或通用的标头，您的请求将失败并出现 HTTP 403 错误。请参阅我们的用户代理政策。”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T17:49:31.397

我认为这发生在像“史蒂夫乔布斯”、“阿尔戈尔”等被锁定的条目上。这在你所指的同一本书中有所规定：

> 对于某些页面——例如 Al Gore 的锁定条目——如果未指定 User-Agent，维基百科将不会响应 Web 请求。“用户代理”通常是指您的浏览器，您可以通过检查您为浏览器中的任何页面请求发送的标头来查看这一点。通过提供“User-Agent”键值对（我基本上使用“Ruby”，它似乎可以工作），我们可以将它作为散列传递（我在示例中使用常量 HEADERS_HASH）作为第二个参数方法调用。

稍后在[http://ruby.bastardsbook.com/chapters/web-crawling/中指定](http://ruby.bastardsbook.com/chapters/web-crawling/)

# postgresql - 从 PostgreSQL 中的 TRIGGER 返回错误消息

> ID：10925608
> 
> 赞同：3
> 
> 时间：2012-06-07T04:19:12.093
> 
> 标签：postgresql, exception-handling, triggers, postgresql-8.4

我想对插入表中的数据执行一些业务验证，这样做时我需要检查另一个表中的数据。实现这一点的方法似乎是`BEFORE INSERT FOR EACH ROW TRIGGER`在 PostgreSQL 中使用 a ，如果新数据验证失败以防止它被插入，我可以从它调用的函数返回 NULL 。

有什么方法可以返回描述验证错误的错误消息吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T04:30:28.237

用于[`raise`](http://www.postgresql.org/docs/current/static/plpgsql-errors-and-messages.html)例外：

> **39.8。错误和消息**
> 
> 使用该`RAISE`语句报告消息并引发错误。
> [...]
> `EXCEPTION`引发错误（通常会中止当前事务）；

所以你可以在你的触发器中这样说：

```
raise exception 'Say something useful about %', some_variable; 
```

这将中止触发器和（通常）当前事务。您提出的消息应该返回到客户端应用程序。

# ios - iOS - 使用 URL 方案打开某些视图控制器

> ID：10925612
> 
> 赞同：4
> 
> 时间：2012-06-07T04:19:33.330
> 
> 标签：ios, url, uiviewcontroller, url-scheme

我在我的应用程序中使用 URL 方案。我轻松地制作了一个来打开我的应用程序，只需将必要的项目添加到 info.plist。当前 URL“myappname://”将用户带到初始视图控制器 FirstTableViewController，但我想知道是否可以修改该 URL 方案，以便我可以拥有一个将用户带到某个视图控制器的方案，比如 ThirdTableViewController。我会将此作为启动中心之类的便捷功能使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T04:35:48.490

试试看这个：[自定义网址方案](http://www.idev101.com/code/Objective-C/custom_url_schemes.html)

希望这将是一个有用的

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-10T03:31:18.503

这篇文章有点旧，但可能对 iOS 5 + 有用，因为检查的答案不正确。

AppDelegate 没有任何 navigationController 属性。

相反，您可以在 AppDelegate.m 中执行以下操作：

```
enter code here

- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
    MyViewController *controller = [[MyViewController alloc] initWithNibName:@"MyViewController" bundle:[NSBundle mainBundle]];
    UINavigationController *navController = (UINavigationController *)self.window.rootViewController;
    [navController presentModalViewController:controller animated:YES];

    return YES;        
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T04:54:56.143

在 ...AppDelegate.m

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
MyViewController *controller = [[MyViewController alloc] initWithNibName:@"MyViewController" bundle:[NSBundle mainBundle]];
[self.viewController presentModalViewController:controller animated:YES];
[controller release];

return YES;        
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-06T12:00:22.753

嗨，这是我的解决方案。

如果您可以调用在 "application(_ app: UIApplication, open url: URL, options: [UIApplicationOpenURLOptionsKey : Any] = [:]) -> Bool" 事件中调用的导航功能（有延迟），您可以导航特定应用程序中的页面在调用之前甚至没有运行。

```
func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -> Bool {
        // Actived keyboard avoider
        changeAppereance()
        delay(1) {
            deeplink = Deeplink()
            self.manageNavigation(launchOptions: launchOptions)
            self.navigate()
        }

        return true

    }

    private func manageNavigation(launchOptions: [UIApplicationLaunchOptionsKey: Any]?) {
        if let url = launchOptions?[UIApplicationLaunchOptionsKey.url] as? URL { //Deeplink
            print(url.absoluteString)
            deeplink = Deeplink()
            deeplink?.url = url
        }
        else if let activityDictionary = launchOptions?[UIApplicationLaunchOptionsKey.userActivityDictionary] as? [AnyHashable: Any] { //Universal link
            for key in activityDictionary.keys {
                if let userActivity = activityDictionary[key] as? NSUserActivity {
                    if let url = userActivity.webpageURL {
                        deeplink = Deeplink()
                        deeplink?.url = url
                    }
                }
            }
        }

    }

open func application(_ app: UIApplication, open url: URL, options: [UIApplicationOpenURLOptionsKey : Any] = [:]) -> Bool {
        print(url.absoluteString)
        deeplink = Deeplink()
        deeplink?.url = url
        navigate()
        return true
    } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-04-18T10:55:32.410

是的，可以修改 URL 方案，以便您可以将用户跳转到任何视图控制器。我使用并实现了普通链接和 `https://hokolinks.com/`深层链接。通过 hoko 链接深层链接，您可以修改您的 URL 方案，也可以使用该 URL 发送数据。

使用 Hoko Link 集成 iOS SDK - 将 URL 方案添加到您的应用程序 - SDK 设置 要将 HOKO 开源 SDK 集成到您的应用程序（仅限 iOS 5 及更高版本）中，您只需遵循 3 个简单步骤（使用 cocoapods 或手动执行） .

使用 CocoaPods

1- 在您的系统中安装 CocoaPods

2- 打开您的 Xcode 项目文件夹并创建一个名为 Podfile 的文件，其内容如下：

pod 'Hoko', '~> 2.3.0' 3- 运行 pod install 并等待 CocoaPods 安装 HOKO SDK。从现在开始，您应该开始使用 .xcworkspace，而不是使用 .xcodeproj 文件。

手动集成

1- 下载 Hoko SDK。

2- 将 Hoko 文件夹拖到您的项目中。

3- 确保还添加 SystemConfiguration.framework 和 zlib.dylib，以防您的项目尚未包含它。

将 SDK 与您的 Swift 项目集成

因为 HOKO SDK 是用 Objective-C 编写的，所以您必须手动将 Bridging Header 文件添加到您的项目中，以便在您的 Swift 代码中使用它：

1-文件>新建>文件...> iOS>源>头文件

2-将该头文件命名为 YourAppName-Bridging-Header.h

3-在该头文件中，导入#import

4-转到您的项目>构建设置>搜索Objective-C桥接头>从根文件夹（例如MyApp / MyApp-Bridging-Header.h）添加桥接头文件的路径

将 URL Scheme 添加到您的应用程序

接下来，我们需要定义您的应用的自定义 URL 类型（如果您还没有的话）。打开您的 Xcode 项目设置并在“信息”选项卡下展开“URL 类型”部分。如果您已经配置了 URL 类型，则可以跳过此步骤。

如果此部分为空，请单击“+”图标以添加新的 URL 类型。假设我们想通过“hoko://”打开应用程序。因此我们需要在 URL Schemes 中输入“hoko”。

我们还应该为这个 URL 类型分配一个唯一的标识符。Apple 建议您使用反向 DNS 表示法来确保类型之间没有名称冲突。在这个例子中，我们将使用“com.hoko.app”。

记下您的 URL 方案，因为当您通过仪表板创建应用程序时，我们会要求您提供它，例如“hoko”。

网址方案

设置关联域（通用链接） - iOS 9.0+

为了让您的应用程序完全支持 Apple 新推出的通用链接，您必须在应用程序目标的 Capabilities 选项卡内的 Associated Domains 部分中启用并添加一个新条目。单击“+”按钮并添加具有以下值的新条目：applinks:myapp.hoko.link，myapp 是您为应用程序的 Hoko 链接选择的 Hoko 子域。您还可以拥有自己的链接域（在子域部分了解更多信息）。

网址方案

SDK 设置

将以下行添加到 AppDelegate 类中的 applicationDidFinishLaunching 方法中（如果您使用的是 Objective-C，请不要忘记使用 #import 导入 HOKO 类）。

Objective-C Swift #import

```
- (BOOL)application:(UIApplication *)application
  didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
  [Hoko setupWithToken:@"YOUR-APP-TOKEN"];
 // The rest of your code goes here...

  return YES;
} 
```

如果您在智能链接中使用自定义域，则必须使用 setupWithToken:customDomain: 设置 iOS SDK，如下所示：

Objective-C Swift #import

```
- (BOOL)application:(UIApplication *)application
  didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
  [Hoko setupWithToken:@"YOUR-APP-TOKEN"
     customDomain:@"your.custom.domain.com"];
  // The rest of your code goes here...

 return YES; 
```

注意：确保在 application:didFinishLaunchingWithOptions: 委托方法中返回 YES，以允许处理打开您的应用程序的传入深层链接。返回 NO 将阻止请求。

使用 Hoko Link SDK 设置您的移动深度链接

# ios5.1 - 如何为 ios 5.1 交叉编译 zthread

> ID：10925615
> 
> 赞同：0
> 
> 时间：2012-06-07T04:19:48.090
> 
> 标签：ios5.1, cross-compiling

如何交叉编译 ios 5.1 的 zthread，任何人都可以帮助我吗？

[http://www.cnblogs.com/maadiah/archive/2012/04/06/2434591.html](http://www.cnblogs.com/maadiah/archive/2012/04/06/2434591.html) 和 [http://www.haogongju.net/art/1382733](http://www.haogongju.net/art/1382733)

我尝试链接方式，但因此错误而失败。

./configure --prefix=/usr/local/iphone --build=arm-apple-darwin10 --enable-static=yes --enable-shared=no CC=/Applications/Xcode.app/Contents/Developer/Platforms /iPhoneOS.platform/Developer/usr/bin/gcc CFLAGS="-arch armv7 -pipe -mdynamic-no-pic -std=c99 -Wno-trigraphs -fpascal-strings -O2 -Wreturn-type -Wunused-variable -fmessage -length=0 -fvisibility=hidden -miphoneos-version-min=3.2 -I/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/usr/include -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk" CPP=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/ bin/arm-apple-darwin10-llvm-g++-4.2 AR=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS。platform/Developer/usr/bin/ar LDFLAGS="-arch armv7 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk -miphoneos-version-min= 3.2"

得到错误日志：配置为：/private/var/tmp/llvmgcc42/llvmgcc42-2336.9~22/src/configure --disable-checking --enable-werror --prefix=/Applications/Xcode.app/Contents/Developer/ usr/llvm-gcc-4.2 --mandir=/share/man --enable-languages=c,objc,c++,obj-c++ --program-prefix=llvm- --program-transform-name=/^[cg ][^.-]*$/s/$/-4.2/ --with-slibdir=/usr/lib --build=i686-apple-darwin11 --enable-llvm=/private/var/tmp/llvmgcc42/ llvmgcc42-2336.9~22/dst-llvmCore/Developer/usr/local --program-prefix=i686-apple-darwin11- --host=x86_64-apple-darwin11 --target=i686-apple-darwin11 --with-gxx -include-dir=/usr/include/c++/4.2.1 llvm-g++-4.2: 错误尝试执行'/usr/bin/../llvm-gcc-4.2/bin/arm-apple-darwin11-llvm- g++-4.2'：execvp：没有这样的文件或目录配置：2222：错误：C++ 编译器无法创建可执行文件

所有日志是：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T20:04:06.773

我在另一个项目中也遇到了这个错误。这是因为现在 Xcode 4.3 成为安装在 /Applications 文件夹中的应用程序（不再在 /Developer 下）并且所有路径都更改了。第一：您是否安装了 Xcode 命令行工具？您可以打开菜单“XCode-->Preferences-->Downloads”来验证它。安装它们后，您应该在以下位置找到所有编译器命令：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/llvm-gcc-4.2/bin/

# java - 为什么用 C++ 编写的 BRMS 不如 Java 中的 BRMS 有用？

> ID：10925618
> 
> 赞同：0
> 
> 时间：2012-06-07T04:20:16.937
> 
> 标签：java, c++, rule-engine

研究了一周的规则引擎，这个问题困扰了我很久。该视图将被确认如下：

> 1.  大多数规则引擎都是用 Java 编写的，而不是 C 或 C++
> 2.  大多数公司更喜欢选择用 Java 编写的规则引擎，而不是 C 或 C++
> 3.  规范。据我所知，JSR-94 是针对 Java 规则引擎 API 的 Java 规范请求，并且没有关于 C++ 的规范。
> 4.  社区活动。大多数人对用Java编写的产品感兴趣，例如ILog Jrules，Drools。

真诚地希望你的答复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T04:51:13.633

并不是说它“没那么有用”；只是您发现的唯一规范是 JSR - 它是 Java 标准请求。在这一点之后发生的几乎所有事情都是我个人经验的猜测和证实。

从根本上说，业务规则系统需要随着时间的推移而适应。制定规范的原因是允许您在运行时使用一个规则系统代替另一个规则系统，而无需重新编译应用程序。Java 在这方面有着悠久的历史 - 替换/实现代码是设计的一部分。C++ 代码不会让人们认为它可以这样使用——他们倾向于将 C++ 应用程序视为“单个 blob”，因此它不适合添加额外的类来处理业务规则。

大约 15 年前，我亲自用 Delphi (Object Pascal) 编写了一个 POS 应用程序。当我开始实施可定制的业务规则时，我使用了 PascalScript，它允许在运行时进行定制。我从没想过系统的用户会使用编译器来构建他们的规则集，所以我使用了一种脚本语言，它允许在运行时对应用程序进行重大的动态更改。

回答你的观点：

1.  由于所使用的环境，规则引擎倾向于用 java 而非 c++ 编写。如果您找到一家仅使用 C++ 的公司，我相信他们的规则引擎将使用 C++
2.  这是一个环保的选择。如果您使用的是 java，那么规则引擎将使用 java，如果您使用的是 C++，那么规则引擎将使用 C++
3.  是的，这是*一个*规范。Java 喜欢它们的规范。
4.  活动 - 这是一个“政治”观点 - 这与偏好无关，而与部署有关。

# java - 在 SpringSecurity 中忽略用户名的大小写

> ID：10925626
> 
> 赞同：7
> 
> 时间：2012-06-07T04:21:16.787
> 
> 标签：java, spring-mvc, spring-security

SpringSecurity 是否有一些内置功能可以忽略用户名的字母大小写？例如，如果用户名是“student001”，那么它将接受“Student001”以及“stUdent001”。

我需要这个的原因是我们的系统使用电子邮件作为用户名。当然我可以通过扩展 DAOAuthenticationProvider 类来做到这一点，但我只是想知道这个问题是否存在任何内置选项？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T04:42:20.407

如果您使用的是，`DaoAuthenticationProvider`那么我认为您正在使用`JdbcDaoImpl`它，它从 JDBC 数据库加载用户。

如果是这样，您可以通过自己手动创建 bean 来覆盖`JdbcDaoImpl`用于查找用户的 SQL 查询。Spring Security 使用的默认查询是：

```
select username,password,enabled from users where username = ? 
```

您可以使用 SQL lower 函数忽略大小写：

```
select username,password,enabled from users where lower(username) = lower(?) 
```

适当的 Spring Security XML 配置是：

```
<bean id="org.springframework.security.authenticationManager" class="org.springframework.security.authentication.ProviderManager">
    <property name="providers">
        <list>
            <ref bean="daoAuthenticationProvider"/>
        </list>
    </property>
</bean>

<bean id="daoAuthenticationProvider" class="org.springframework.security.authentication.dao.DaoAuthenticationProvider">
    <property name="userDetailsService" ref="caseInsensitiveUserDetailsService"/>
</bean>

<bean id="caseInsensitiveUserDetailsService" class="org.springframework.security.core.userdetails.jdbc.JdbcDaoImpl">
    <property name="usersByUsernameQuery" value="select username, password, enabled from users where lower(username) = lower(?)" />
</bean> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T04:33:20.023

我相信任何身份验证提供程序都会利用 UserDetails 和 UserDetailsS​​ervice 接口。

当一个实施

`UserDetails loadUserByUsername(String username) throws UsernameNotFoundException;`

是为自定义应用程序特定 `UserDetailsService`的，我们可以忽略的情况`username`并提供`UserDetails`给 spring-security 以继续进行进一步的身份验证/授权。

但是，如果`org.springframework.security.core.userdetails.jdbc.JdbcDaoImpl`使用提供的弹簧，因为 `UserDetailsService`它将`user`使用条件从表中加载用户详细信息`"where username=?"`。所以它是区分大小写的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-27T00:13:10.647

[古奇](https://stackoverflow.com/users/402033)部分正确。它允许使用 JdbcDaoImpl 的用户对用户表进行不区分大小写的检查。但是您将要求 Authorities 表查询也需要更改。

```
<bean id="caseInsensitiveUserDetailsService" class="org.springframework.security.core.userdetails.jdbc.JdbcDaoImpl">
    <property name="usersByUsernameQuery" value="select username, password, enabled from users where lower(username) = lower(?)" />
    <property name="authoritiesByUsernameQuery" value="select username,authority " +
        "from authorities where lower(username) = lower(?)" />
</bean> 
```

# java - 较低版本的应用程序未在 android 的较高版本中运行

> ID：10925628
> 
> 赞同：-1
> 
> 时间：2012-06-07T04:22:01.583
> 
> 标签：java, android, debugging, android-2.2-froyo

我已经使用 android SDK 2.2 版本制作了我的应用程序，现在当我在 android SDK 4.0.3 上运行我的应用程序时，它没有运行。

我在清单文件中给出了 min 和 max sdk。

我是 android 新手，想为较低版本和较高版本运行我的应用程序。谁能告诉我我该怎么做。任何帮助表示赞赏。

**启动类代码**

```
package com.Cricket_trivia.in;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.MotionEvent;

public class SplashScreen extends Activity {

    protected int _splashTime = 5000; 

    private Thread splashTread;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash);

        final SplashScreen sPlashScreen = this; 

        // thread for displaying the SplashScreen
        splashTread = new Thread() {
            @Override
            public void run() {
                try {                   
                    synchronized(this){
                        wait(_splashTime);
                    }

                } catch(InterruptedException e) {} 
                finally {
                    finish();

                    Intent i = new Intent();
                    i.setClass(sPlashScreen, K_trivia_cricketActivity.class);
                    startActivity(i);

                    stop();
                }
            }
        };

        splashTread.start();
    }
    @Override
    public boolean onTouchEvent(MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_DOWN) {
            synchronized(splashTread){
                splashTread.notifyAll();
            }
        }
        return true;
    }

} 
```

**编辑：**我的日志猫

```
 06-07 10:24:18.710: I/dalvikvm(1461): threadid=3: reacting to signal 3
    06-07 10:24:18.760: I/dalvikvm(1461): Wrote stack traces to '/data/anr/traces.txt'
    06-07 10:24:18.890: D/dalvikvm(1461): GC_FOR_ALLOC freed 45K, 4% free 6541K/6787K, paused 74ms
    06-07 10:24:18.900: I/dalvikvm-heap(1461): Grow heap (frag case) to 7.333MB for 921616-byte allocation
    06-07 10:24:19.010: I/dalvikvm(1461): threadid=3: reacting to signal 3
    06-07 10:24:19.100: I/dalvikvm(1461): Wrote stack traces to '/data/anr/traces.txt'
    06-07 10:24:19.140: D/dalvikvm(1461): GC_CONCURRENT freed <1K, 5% free 7440K/7751K, paused 5ms+5ms
    06-07 10:24:19.240: D/dalvikvm(1461): GC_FOR_ALLOC freed 0K, 5% free 7440K/7751K, paused 97ms
    06-07 10:24:19.240: I/dalvikvm-heap(1461): Grow heap (frag case) to 7.723MB for 409936-byte allocation
    06-07 10:24:19.320: D/dalvikvm(1461): GC_FOR_ALLOC freed 0K, 5% free 7841K/8199K, paused 61ms
    06-07 10:24:19.589: D/gralloc_goldfish(1461): Emulator without GPU emulation detected.
    06-07 10:24:19.669: I/dalvikvm(1461): threadid=3: reacting to signal 3
    06-07 10:24:19.779: I/dalvikvm(1461): Wrote stack traces to '/data/anr/traces.txt'
    06-07 10:24:24.600: W/dalvikvm(1461): threadid=11: thread exiting with uncaught exception (group=0x409c01f8)
    06-07 10:24:24.600: E/AndroidRuntime(1461): FATAL EXCEPTION: Thread-78
    06-07 10:24:24.600: E/AndroidRuntime(1461): java.lang.UnsupportedOperationException
    06-07 10:24:24.600: E/AndroidRuntime(1461):     at java.lang.Thread.stop(Thread.java:1076)
    06-07 10:24:24.600: E/AndroidRuntime(1461):     at java.lang.Thread.stop(Thread.java:1063)
    06-07 10:24:24.600: E/AndroidRuntime(1461):     at com.Cricket_trivia.in.SplashScreen$1.run(SplashScreen.java:40)
    06-07 10:24:26.209: D/dalvikvm(1461): GC_FOR_ALLOC freed 1037K, 15% free 7022K/8199K, paused 62ms
    06-07 10:24:26.209: I/dalvikvm-heap(1461): Grow heap (frag case) to 7.509MB for 614416-byte allocation
    06-07 10:24:26.440: D/dalvikvm(1461): GC_CONCURRENT freed <1K, 8% free 7621K/8199K, paused 4ms+5ms
    06-07 10:24:26.610: I/dalvikvm(1461): threadid=3: reacting to signal 3
    06-07 10:24:26.640: I/dalvikvm(1461): Wrote stack traces to '/data/anr/traces.txt' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T04:42:15.637

您的应用在 4.0.3 而不是 2.2 上崩溃的原因很可能是因为您在 UI 线程上执行了昂贵的操作。[**阻塞 UI 线程是非常糟糕的做法......不要这样做！**](http://developer.android.com/resources/articles/painless-threading.html)以前的 Android 版本（即 ICS 之前的版本）并不关心您何时执行此操作并让您的应用程序按原样运行。但是，在 4.0 及更高版本中，如果您在 UI 线程（例如网络连接等）上执行了可能代价高昂的操作，操作系统会对此进行检查并导致您的应用程序崩溃。

你基本上**没有**提供关于你的问题是什么问题的信息，所以我能做的就是帮助你。

* * *

## 编辑：

这样的事情有用吗？

```
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        Intent i = new Intent();
        i.setClass(sPlashScreen, K_trivia_cricketActivity.class);
        startActivity(i);
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T06:27:56.530

不要线程因为它在更高版本中产生问题。使用下面的代码显示启动画面。

```
 package com.Cricket_trivia.in;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.os.CountDownTimer;
import android.view.MotionEvent;

public class SplashScreen extends Activity {

    protected int _splashTime = 5000; 

    private Thread splashTread;
    MyCount counter = new MyCount(4000, 4000);
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash);

        counter.start();
    }
     public class MyCount extends CountDownTimer
     {
         public MyCount(long csecond, long countDownInterval) 
         {
              super(csecond, countDownInterval);
         }

        @Override
        public void onFinish() {
            finish();
            Intent intent = new Intent();
            intent.setClass(SplashScreen.this, K_trivia_cricketActivity.class);
            startActivity(intent);

        }

        @Override
        public void onTick(long arg0) {
            // TODO Auto-generated method stub

        }
}
}

 I think it will work for you 
```

# jquery - 将（推送？）字符串数据放入数组（或对象） - jQuery

> ID：10925629
> 
> 赞同：1
> 
> 时间：2012-06-07T04:22:26.210
> 
> 标签：jquery

我的代码需要一些帮助（显然）。到目前为止，我能够获得我想要的 json 数据，但我似乎无法将它存储在全局数组中。我的目标是在这样的数组中获取 data.count 和 data.url：

```
var myHelpfulVariable = [
    // e.g. [data.count, '{label:' + data.url + '}']
    [3856, {label:'http://www.google.com/'}],
    [1897, {label:'http://www.yahoo.com/'}],
    [3870, {label:'http://www.microsoft.com/'}]
] 
```

我已经尝试了几种使用推送功能的不同方法，但均无济于事。下面是获取数据但不尝试将其放入数组的代码。

有人可以帮忙吗？解释它为什么起作用也会有所帮助。提前致谢！

```
<script src="jquery.min.js"></script>
<script>
$(document).ready(function(){

    var getData = [
        'http://urls.api.twitter.com/1/urls/count.json?url=http://www.google.com&callback=?',
        'http://urls.api.twitter.com/1/urls/count.json?url=http://www.yahoo.com/&callback=?',
        'http://urls.api.twitter.com/1/urls/count.json?url=http://www.microsoft.com&callback=?'
    ];

    $.each(getData, function(i,getValue) {

        var urlForGetJSONfunction = "'" + getValue + "'"    

        $.getJSON(getValue,  function(data) {
            $('<div></div>').append('<strong>' + data.count + '</strong>' + ' retweets for: ' + '<a href="' + data.url + '">' + data.url + '</a>').appendTo('body')

            })//ends getJSON

    })//ends each loop
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T04:38:14.903

`array.push( obj )`完全符合您的预期，将对象添加到数组的末尾。JS 中的数组元素不必是相同的类型，因此您可以在获取数据时简单地推送数据，如下所示：

```
var myHelpfulVariable=[];

$.each(getData, function(i,getValue) {

    var urlForGetJSONfunction = "'" + getValue + "'";  

    $.getJSON(getValue,  function(data) {
        $('<div></div>').append('<strong>' + data.count + '</strong>' + ' retweets for: ' + '<a href="' + data.url + '">' + data.url + '</a>').appendTo('body');

        var pair = [];
        pair.push(data.count);
        pair.push({'label':data.url});

        myHelpfulVariable.push(pair);

    });//ends getJSON

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T04:39:47.680

在您的问题的开头，您`myHelpfulVariable`被定义为一个数组数组，其中内部数组包含一个数值和一个对象。如果那是你真正想要的，那么这里是：

```
<script src="jquery.min.js"></script>
<script>
$(document).ready(function(){

    var myHelpfulVariable = [];

    var getData = [
        'http://urls.api.twitter.com/1/urls/count.json?url=http://www.google.com&callback=?',
        'http://urls.api.twitter.com/1/urls/count.json?url=http://www.yahoo.com/&callback=?',
        'http://urls.api.twitter.com/1/urls/count.json?url=http://www.microsoft.com&callback=?'
    ];

    $.each(getData, function(i,getValue) {

        var urlForGetJSONfunction = "'" + getValue + "'"    

        $.getJSON(getValue,  function(data) {

            myHelpfulVariable.push( [data.count, { label: data.url } ] );

            }); //ends getJSON

    }); //ends each loop
});
</script> 
```

# mysql - 获取为 ON DUPLICATE KEY UPDATE 多次插入插入的行数？

> ID：10925632
> 
> 赞同：9
> 
> 时间：2012-06-07T04:22:57.197
> 
> 标签：mysql

我有一个非常大的表，主键为`BINARY(20)`.

该表有大约 1700 万行。`ON_DUPLICATE_KEY_UPDATE`每小时一个 cron 作业尝试使用语法向该表中插入多达 50,000 个新条目。

cronjob 中的每个插入都有 1,000 个值（多个插入）。如何从此查询中获取插入表中的行数？由于大约有 1700 万行并且查询过于昂贵，因此我无法在前后进行行计数。

在手册中，mysql说对于插入的行，受影响的行数是`1`，对于更新的字段`2`，这意味着在我的 1000 INSERT ON DUPLICATE KEY UPDATE 查询中，我可能会影响 1000 到 2000 的行，但我没有办法告诉从这个数字插入了多少条记录？

我该如何克服呢？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-07T04:28:48.817

插入的数量将是 2000 减去受影响的行数。更普遍：

```
(numberOfValuesInInsert * 2) - mysql_affected_rows() 
```

**编辑：**

正如[tomas 指出的那样](https://stackoverflow.com/questions/10925632/getting-number-of-rows-inserted-for-on-duplicate-key-update-multiple-insert/10925666?noredirect=1#comment82031928_10925666)，[MySQL 文档](https://dev.mysql.com/doc/refman/5.7/en/insert-on-duplicate.html)实际上说：

> 使用 ON DUPLICATE KEY UPDATE，如果将行作为新行插入，则每行的受影响行值为 1，如果更新现有行，则为 2，**如果将现有行设置为其当前值，则为 0**。

[强调我的]

因此，如果将现有行设置为相同的值是可能的，则无法判断更新了多少行与插入了多少行，因为两个插入与一个具有不同值的更新 + 一个具有相同值的更新无法区分。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-07T06:01:14.930

当您的工作执行 1000 的插入时，有些是纯插入，有些是更新，因为您有 ON_DUPLICATE_KEY_UPDATE 。因此你得到第一个方程

(1) 插入 + 更新 = 插入的行数（在本例中为 1000）

我举一个简单的例子，你得到 1350 的 my_sql_affected_rows 值。因为对于插入值 1 和更新值 2 聚合到 my_sql_affected_rows 。我得到以下等式。

(2) 插入 + 2 * 更新 = my_sql_affected_rows（在本例中为 1350）。

减去 (2) - (1) 。你得到

(3) 更新 = my_sql_affected_rows - 插入的行数

更新 = 1350 - 1000（在本例中）。

更新 = 350。

代入等式 (1) 中的 Updates 值，得到

插入 = 650

因此，要获得更新次数，您只需要直接使用等式（3）即可。

# javascript - 在 XPages 中测试用户/系统 DSN 的存在

> ID：10925635
> 
> 赞同：0
> 
> 时间：2012-06-07T04:23:04.400
> 
> 标签：javascript, odbc, xpages, lotus-domino

在我的 xpage 中，我有一个编辑框供用户输入 ODBC 数据源的名称。然后 onBlur 我想测试用户输入的值是否有效/存在于 ODBC 列表中。如果有错误/异常，我希望将错误显示在 xpage 中的“显示错误”控件中。我不知道从哪里开始。以前从未做过这样的事情（即使在 LotusScript 中）。有人请赐教吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T05:28:14.417

我不会在 onBlur 事件中这样做。您的用户可能想要更改其他内容，而您的操作很慢。你应该做什么：

*   有一个测试按钮
*   将“保存”按钮变灰，直到测试成功

无论如何：看看扩展库。它内置了 RDBMS 连接（使用它，不要重新发明轮子）。从那里复制代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T02:55:43.400

Ok, apparently this is what I need. Maybe I should polish my question asking skill. Thanks to those who help though.

Referring to [here](http://kramkumarmca.blogspot.com/2012/01/odbc-in-xpages-javascript.html), I create 3 field/editbox: 'ODBC/DSN Name', 'username', 'password'. For 'ODBC/DSN Name', I put an xp:validateExpression and put the following code for the expression part:

```
var odbc:string=getComponent("inputText1").getValueAsString();
var url:string="jdbc:odbc:"+odbc;
var usr:string=getComponent("inputText2").getValueAsString();
var pwd:string=getComponent("inputText3").getValueAsString();
try {
    java.lang.Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
    var con:java.sql.Connection=java.sql.DriverManager.getConnection(url,usr,pwd);
    return true;
} catch (e) {
    return false;
} 
```

Not sure whether I utilized the xp:validateExpression or xpages itself the right way but that's what customer request and seems to be working now.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-08T04:19:37.087

最好在您需要验证的项目的 onchange 事件中写入。因为我们通常会对该事件进行部分刷新，对吗？所以它会阻止项目输入值。

只需尝试在 onchange 事件中编写它。但我的观点是，我曾经在 Jquery 中为非安全项目编写验证。因为这很容易，而且前景很好。

# java - Akka：在 Scala 中使用非默认构造函数定义一个actor并从 Java 代码创建它

> ID：10925640
> 
> 赞同：2
> 
> 时间：2012-06-07T04:24:10.133
> 
> 标签：java, scala, actor, akka

Akka Scala 演员必须扩展 akka.actor.Actor

Akka Java Actor 必须扩展 akka.actor.UntypedActor

因此，在使用非默认构造函数定义 Scala Actor 并从 Java 代码创建它时，我遇到了这个问题：

```
ActorRef myActor = system.actorOf(new Props(new UntypedActorFactory() {
  public UntypedActor create() {
    return new MyActor("...");
  }
}), "myactor"); 
```

当然，UntypedActorFactory 期望创建一个 UntypedActor 类型的对象，但我的 Actor 是 Actor 类型。

有什么解决方法？

**编辑：**

按照 Viktor 使用 akka.japi.Creator 的说明，此方法有效：

```
Props props1 = new Props();
Props props2 = props1.withCreator(new akka.japi.Creator() {
        public Actor create() {
            return new MyActor("...");
        }
    });
ActorRef actorRef = Main.appClient().actorOf(props2, "myactor"); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T09:00:50.017

Pass in an akka.japi.Creator instead of the UntypedActorFactory in this case.

Also, at least in 2.0.1 and forward it doesn't require an UntypedActor:

```
trait UntypedActorFactory extends Creator[Actor] with Serializable 
```

[https://github.com/akka/akka/blob/v2.0.1/akka-actor/src/main/scala/akka/actor/UntypedActor.scala#L161](https://github.com/akka/akka/blob/v2.0.1/akka-actor/src/main/scala/akka/actor/UntypedActor.scala#L161)

# iphone - AVURLAsset - loadValuesAsynchronouslyForKeys:requestedKeys

> ID：10925641
> 
> 赞同：0
> 
> 时间：2012-06-07T04:24:56.797
> 
> 标签：iphone, ios, ipad, avurlasset

我正在使用此代码来加载键的值并播放电影 url。

```
[asset loadValuesAsynchronouslyForKeys:requestedKeys completionHandler:
     ^{                  
         dispatch_async( dispatch_get_main_queue(), 
                        ^{                                                          
                            [self prepareToPlayAsset:asset withKeys:requestedKeys];
                        });
     }]; 
```

但有时无法运行 prepareToPlayAsset 方法，我不知道为什么。有人知道原因吗？

# php - 初学者 PHP 指南

> ID：10925652
> 
> 赞同：0
> 
> 时间：2012-06-07T04:26:45.273
> 
> 标签：php

我刚刚开始学习PHP。我发现 $_POST 变量不起作用，并在下面的链接中发布了相同的内容

[$_POST[] 在 php 中不起作用](https://stackoverflow.com/questions/10909334/post-not-working-in-php)

并按照我安装的 XAMPP 的建议。但是 $_POST 变量的问题仍然没有解决。

现在我怀疑是否需要配置任何全局变量才能使 $_POST 工作。我完全迷失了这一点，不知道如何进行。

非常感谢您对此的任何帮助。

下面是html代码——report.html

```
<html>
<title></title
<head></head>
<body>
        <form action="report.php" method="POST" >
<label for="firstname">First name:</label>
<input type="text" id="firstname" name="firstname" value="TestOnly" /><br />
</form>
</body>
</html> 
```

下面是php代码-report.php

```
<html>
<head>

</head>
<body>

<?php
     print( $_POST['firstname']); 

?>
</body>
</html> 
```

下面是我从 chrome 网络数据中得到的视图

![在此处输入图像描述](../Images/9bcd1dbc678dbd07066c4b7585ae1d05.png) 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T04:35:18.617

看看，试试这个。

**文件来源`index.htm`：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>POST</title>
    </head>

    <body>
        <form method="post" action="post.php">
            <input type="text" name="name" />
            <input type="submit" name="submit" value="submit">
        </form>
    </body>
</html> 
```

**来源`post.php`**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <title>Output</title>
</head>
<body>
    <?php
        if(isset($_POST["name"]))
            echo "You have posted " . $_POST["name"];
        else
            echo "Nothing has been set!";
    ?>
</body>
</html> 
```

现在尝试将这两个文件保存在同一目录下。在文本框中输入一些内容，然后单击提交。让我们知道你有什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T04:41:41.257

你的代码是什么？默认 $_POST 设置在每个服务器中都处于活动状态，除非在服务器中出于安全原因忽略发布的数据。我认为你的错误在于你的代码，***不要更改 XAMP 设置***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T04:33:34.530

你有没有试过如果你的 php 是正确的？

```
<?php
    phpinfo();
?> 
```

或者

```
<?php
    print_r($_POST);
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T04:33:45.423

需要检查的几件事：

*   除非已将表单提交（发布）到该脚本，否则您的脚本将在 POST 数组中没有数据。
*   如果您有一个脚本并且它正在正确提交，请确保表单的开始标记中有 method="Post"。如果您的表单提交并且在结果脚本中您会在地址栏中看到一堆变量，这些变量用与号 (&) 分隔，那么它使用的是 GET 而不是 POST。确保您在表单标签中有上述声明method="Post"。
*   如果您提交了脚本，但仍然看不到任何内容，请尝试将 print_r($_POST) 或 var_dump($_POST) 放在目标脚本的顶部以查看 $_POST 数组的转储。如果这没有给您任何帮助，请尝试 var_dump($_REQUEST) 并查看您的表单数据是否显示在那里。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T04:48:37.627

1.  不改变php的设置
2.  要么你在 html 文件中使用 get 方法，要么在动作文件中使用 post，你都应该使用 post。

# spree - 大礼包启动服务器

> ID：10925654
> 
> 赞同：0
> 
> 时间：2012-06-07T04:26:55.877
> 
> 标签：spree

我将 git 存储库克隆到本地机器和 Amazon Web Services 上。

我试过使用`script/server`和`rails s`

使用 git://github.com/spree/spree.git 克隆代码

你如何启动服务器？

我宁愿使用完整的 git，这样我最终可以更改模板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:12:16.830

查看 github 页面上“使用边缘源”下的部分 [https://github.com/spree/spree](https://github.com/spree/spree)

克隆 Git 存储库

```
git clone git://github.com/spree/spree.git
cd spree 
```

安装 gem 依赖项

```
bundle install 
```

为测试目的创建一个沙盒 Rails 应用程序（并自动执行所有必要的数据库设置）

```
bundle exec rake sandbox 
```

启动服务器

```
cd sandbox
rails server 
```

我刚刚检查了它并且它可以工作，但边缘目前无法正常工作。您可能只想分叉它并使用您自己的叉子作为标准狂欢商店设置的宝石。

# asp.net - 在 prod 中使用 ASP.Net 成员资格的会话超时，而不是在开发环境中

> ID：10925655
> 
> 赞同：1
> 
> 时间：2012-06-07T04:26:57.013
> 
> 标签：asp.net, session, timeout, asp.net-membership, membership-provider

当我在生产环境（IIS 7.5 + SQL Server 2008）中登录我的网络表单时，我的会话在几秒钟后（不到 1 分钟）就过期了。但是当我在我的开发环境（ASP.Net Development Server + SQL Server 2008）中做同样的事情时，会话会持续足够长的时间......（几分钟）。我将 ASP.Net 会员技术与 Forms 身份验证模式一起使用，并尝试使用 Cookies。看起来服务器上的某些东西覆盖了我的参数，但我无权访问生产 IIS 配置（我订阅了共享主机）

这是我的 web.config 参数：

```
 <system.web>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      </assemblies>
    </compilation>
    <authentication mode="Forms">
      <forms loginUrl="~/Pages/Front/Login.aspx"
             protection="All"
             timeout="900"
             path="/"
             requireSSL="false"
             slidingExpiration="true"
             defaultUrl="~/Pages/Front"
             cookieless="UseCookies"
             name="MySite" />
    </authentication>
    <membership defaultProvider="AspNetSqlMembershipProvider">
      <providers>
        <clear />
        <add name="AspNetSqlMembershipProvider"
             type="System.Web.Security.SqlMembershipProvider, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
             connectionStringName="XXX"
             enablePasswordRetrieval="false"
             enablePasswordReset="true"
             requiresQuestionAndAnswer="true"
             applicationName="/"
             requiresUniqueEmail="false"
             passwordFormat="Hashed"
             maxInvalidPasswordAttempts="5"
             minRequiredPasswordLength="5"
             minRequiredNonalphanumericCharacters="0"
             passwordAttemptWindow="10"
             passwordStrengthRegularExpression=""/>
      </providers>
    </membership>
    <roleManager enabled="true"
                 cookieName="booble.com"
                 cookieProtection="All"
                 cookieSlidingExpiration="true"
                 cookieTimeout="90"
                 createPersistentCookie="true"
                 cookieRequireSSL="false">
      <providers>
        <clear />
        <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="XXX" applicationName="/" />
        <!--<add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/" />-->
      </providers>
    </roleManager>
    <sessionState timeout="90" />
    <customErrors defaultRedirect="Error.aspx" mode="On" redirectMode="ResponseRewrite" >
      <error statusCode="404" redirect="Error404.aspx"/>
    </customErrors>
    <!-- needed because of my Provider-->
    <pages enableViewStateMac="false" />
    <siteMap enabled="true" defaultProvider="AspNetXmlSiteMapProvider">
      <providers>
        <clear />
        <add siteMapFile="Web.sitemap" name="AspNetXmlSiteMapProvider"
            type="System.Web.XmlSiteMapProvider, System.Web,  Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
                securityTrimmingEnabled="true" />
      </providers>
    </siteMap>

  </system.web> 
```

非常感谢您的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T01:27:13.857

**问题来自我的共享主机提供商**，我在他们的帮助论坛中联系了他们，他们的管理员在服务器端“更改”了一些东西，现在它可以工作了......他们不想告诉我他们修改了什么.

仅供参考，我的共享托管服务提供商名为 OVH.com，因此，如果您遇到会话超时问题（每 30 秒到 1 分钟到期），即使您已正确配置了 web.config（可以肯定的是，我什至将 sessionState 模式设置为="SQLServer") ，只需联系他们，他们会做必要的事情。

如果我得到解释，我会在这里发布，感谢您的阅读

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T06:48:31.143

检查您的会话超时是否也通过代码设置。

```
<sessionState timeout="90" /> 
```

和

```
cookieTimeout="90" 
```

应该工作得很好。开发服务器对会话超时非常宽容。

开发服务器不代表正确的 IIS 7 环境

> 这提供了一种在没有 IIS 7 的情况下测试 ASP.NET 应用程序的便捷方法 - 但是，我们建议您将 Visual Studio 配置为使用 IIS 7 环境测试您的应用程序。原因如下： ASP.NET 开发服务器不支持以集成模式托管 ASP.NET 应用程序，这是 IIS 7 使用的默认操作模式。这可能会导致应用程序行为的差异。

[参考这里](http://learn.iis.net/page.aspx/387/using-visual-studio-2008-with-iis/)

# javascript - 如何将密钥与固定数字进行比较

> ID：10925656
> 
> 赞同：-2
> 
> 时间：2012-06-07T04:27:17.207
> 
> 标签：javascript

我有一个 JavaScript 对象，如下所示

```
 var items =
    {
        "k1": "value1",
        "k2": "value2",
        "k3": "value3"
    }; 
```

如何将键与固定数字进行比较以获得 ("k2", value2) 的键和值？示例：k1 = 9，k2 = 15，k3 = 23；固定数字（固定=12）

我将遍历所有项目以仅获取我的键和值：

```
function(fix) {
  for(var key in items) {
     if (fix > k1 || fix <= k2) {
        document.write( key + " : " + items[key] + "<br />");
     }
  }
} 
```

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T05:50:32.517

使用此代码，希望对您有所帮助。我只是编辑您的代码并获得价值

```
<script type="text/javascript" language="javascript">

    var items =
{
    "k1": 1,
    "k2": 2,
    "k3": 3,
    "k4": 4
};
    function testnew(fix) {

        for (var key in items) {
             if (parseInt(fix) >= parseInt(items[key]) && parseInt(fix) <= parseInt(items[key])) 
             {

                 alert(items[key]);
             }
         }
    }
</script>
 </head>
 <body>
   <div id="divtest" onclick="testnew(3);">test</div>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T05:08:05.723

试试你尝试做这样的事情吗？

```
var items =
    {
        "k1": "value1",
        "k2": "value2",
        "k3": "value3"
    };
function fix(value) {
return (items[value]) || "Not Found";
}

fix("k2"); // will return value2 
```

# python - Python中一长串Try-Except语句的简洁替换？

> ID：10925658
> 
> 赞同：1
> 
> 时间：2012-06-07T04:27:47.050
> 
> 标签：python

我有这么长的 try except 声明列表：

```
 try:
       uri = entry_obj['media$group']['media$content'][0]['url']
    except (KeyError, IndexError):
       uri = None
    try:
       position = entry_obj['yt$position']['$t']
    except KeyError:
       position = None
    try:
       description = entry_obj['content']['$t']
    except KeyError:
       description = None
    try:
       seconds = entry_obj['media$group']['yt$duration']['seconds']
    except KeyError:
       seconds = None
    try:
       thumbnails = entry_obj['media$group']['media$thumbnail']
    except KeyError:
       thumbnails = None 
```

有没有更简洁的方法来写这个？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T04:42:27.817

如果您厌倦了弄清楚在`get()`调用中使用什么作为默认值，只需编写一个辅助函数：

```
def resolve(root, *keys):
   for key in keys:
       try:
           root = root[key]
       except (KeyError, IndexError):
           return None
   return root 
```

然后你就写，例如：

```
uri = resolve(entry_obj, 'media$group', 'media$content', 0, 'url') 
```

为了稍微简化调用，您可能会增强辅助函数以将单个字符串作为键并在空格上拆分；这样你就不必输入那么多引号，我们还可以添加一个默认值参数：

```
def resolve(root, keys, default=None):
    for key in keys.split():
        try:
            root = root[key]
        except (TypeError, KeyError):
            try:
                root = root[int(key)]
            except (IndexError, ValueError, KeyError):
                return default

uri = resolve(entry_obj, 'media$group media$content 0 url', '') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T02:09:58.543

我想到了另一种好方法来做到这一点，不知道它与 kindall 的方法相比如何。我们首先定义一个方法属性：

```
def res(self, property):
    try:
        return property()
    except (KeyError, IndexError):
        return None 
```

然后将 try-except 语句替换为：

```
 url = res(lambda: entry_obj['media$group']['media$content'][0]['url'])
    position = res(lambda: entry_obj['yt$position']['$t'])
    description = res(lambda: entry_obj['content']['$t'])
    duration = res(lambda: entry_obj['media$group']['yt$duration']['seconds'])
    thumbnails = res(lambda: entry_obj['media$group']['media$thumbnail']) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T04:31:36.300

改用[`get`](http://docs.python.org/library/stdtypes.html#dict.get)字典的方法：

```
position = entry_object.get('yt$position').get('$t') 
```

`get`将处理您不存在的键的情况，并在这种情况下为您提供（可更改的）后备值。您仍然需要`IndexError`手动处理第一个，但所有这些`except KeyError:`都会消失。

# windows-phone-7 - 控制键盘内容移位行为

> ID：10925659
> 
> 赞同：0
> 
> 时间：2012-06-07T04:27:56.613
> 
> 标签：windows-phone-7, keyboard

我在页面上有以下内容布局：

![界面布局](../Images/838467281adfea90eaefc192700e841c.png)

然后在输入框中输入文本，出现键盘和*1\. Fixed header* is shit up：

![界面布局2](../Images/ba3068d6a8e10e9284fd15480aaf0e73.png)

我怎样才能使区域*1\. Fixed header*真正固定，所以它不会被键盘移动？

**更新 1**：[解决方案 #1](http://sorokoletov.com/2011/08/windows-phone-70-handling-text-entry-screens/)，但是我发现实施起来相当麻烦和复杂。如果有任何其他方式，我会很高兴见到他们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T05:21:40.603

请通过这个例子，我们必须做一些手动工作，因为这个问题是因为 wp7 中键盘的默认属性

[http://sorokoletov.com/2011/08/windows-phone-70-handling-text-entry-screens/](http://sorokoletov.com/2011/08/windows-phone-70-handling-text-entry-screens/)

# java - Eclipse IDE 崩溃，因为 Windows 上的 bash.exe 和 which.exe

> ID：10925667
> 
> 赞同：3
> 
> 时间：2012-06-07T04:28:49.950
> 
> 标签：java, windows, eclipse

我是一名Java程序员。

我在 Windows 7 上做过熟悉的 Eclipse IDE。

它非常好，但最近当我打开 Eclipse 时它运行了一会儿然后崩溃（没有响应）。

我正在使用 JavaEE Developer Eclipse Helios(3.6) 和一些插件（颠覆性、egit、findbug、...）

我试图解决这个问题。

我使用 Process Explorer 工具在 Windows 中显示进程树，并看到 Eclipse 进程有一个子进程是`bash.exe`，`bash.exe`有一个子进程`which.exe`。

这是我从 Process Explorer 屏幕捕获的图片。

![在此处输入图像描述](../Images/ee20bcabb32f9c8cea55cd96bc736ba5.png)

我搜索“`bash.exe`和`which.exe`在 Eclipse 中”但什么都没有。

我试过 kill`which.exe`然后`bash.exe`Eclipse 运行良好。

请告诉我有关Eclipse IDE 和其中的信息以及它们崩溃的原因`bash.exe`。`which.exe`

非常感谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T05:00:14.857

阅读有关. [_](http://www.file.net/process/bash.exe.html)`bash.exe`

有关这些文件的更多信息，请阅读[此处](https://bugs.eclipse.org/bugs/show_bug.cgi?id=342281)关于 Eclipse 中的错误的链接。

# javascript - Backbone.js - 从 url 获取 JSON

> ID：10925670
> 
> 赞同：2
> 
> 时间：2012-06-07T04:29:16.987
> 
> 标签：javascript, json, backbone.js

在尝试学习 Backbone.js 时，我一直在尝试使用以下代码获取 JSON 文件的内容：

```
(function($){
    var MyModel = Backbone.Model.extend();
    var MyCollection = Backbone.Collection.extend({
        model : MyModel,
        url: '/backbone/data.json',
        parse: function(response) {
          console.log(response);
          return response;
        }
    });

    var stuff = new MyCollection;
    console.log(stuff.fetch());
    console.log(stuff.toJSON());
})(jQuery) 
```

'stuff.fetch()' 返回整个对象（以及我在 responseText 中的数据），'stuff.toJSON' 不返回任何内容（[]），但是 parse 方法中的控制台返回的正是我想要的（我的数据的 json 对象）。

我觉得我在这里遗漏了一些明显的东西，但我似乎无法弄清楚为什么我无法获得正确的数据。有人可以指出我正确的方向或告诉我我在这里做错了什么吗？我使用模型做错事了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T04:37:07.190

`fetch`是一个异步调用，所以如果你想得到响应，请将`success`回调传递给参数。

```
stuff.fetch({
  success: function (collection, response) {
    console.log(response);
  }
}) 
```

更多关于[Backbone.js 主页](http://backbonejs.org/#Collection-fetch)

# python - NumPy 第 k 个对角线索引

> ID：10925671
> 
> 赞同：19
> 
> 时间：2012-06-07T04:29:18.120
> 
> 标签：python, numpy, indices, diagonal

我想用 numpy.array 的第 k 个对角线进行算术运算。我需要那些指数。例如，类似：

```
>>> a = numpy.eye(2)
>>> a[numpy.diag_indices(a, k=-1)] = 5
>>> a
array([[ 1.,  0.],
       [ 5.,  1.]]) 
```

不幸的是， diag_indices 只返回包含主对角线的索引，所以目前我正在做：

```
a += numpy.diag([5], -1) 
```

但这似乎并不好或健壮。:-)

有没有办法在 numpy 中获取除主对角线以外的索引？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-08-06T13:29:21.613

有点晚了，但这个版本也适用`k = 0`（并且不会改变数组，所以不需要复制）。

```
def kth_diag_indices(a, k):
    rows, cols = np.diag_indices_from(a)
    if k < 0:
        return rows[-k:], cols[:k]
    elif k > 0:
        return rows[:-k], cols[k:]
    else:
        return rows, cols 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-07T08:05:36.550

这里有一个方法：

1.  创建索引值数组。
2.  获取您想要的对角线索引值。
3.  而已！:)

像这样：

```
>>> import numpy as np
>>> rows, cols = np.indices((3,3))
>>> row_vals = np.diag(rows, k=-1)
>>> col_vals = np.diag(cols, k=-1)
>>> z = np.zeros((3,3))
>>> z[row_vals, col_vals]=1
>>> z
array([[ 0.,  0.,  0.],
       [ 1.,  0.,  0.],
       [ 0.,  1.,  0.]]) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-07T12:00:15.147

*的第k*个对角线的索引`a`可以用计算

```
def kth_diag_indices(a, k):
    rowidx, colidx = np.diag_indices_from(a)
    colidx = colidx.copy()  # rowidx and colidx share the same buffer

    if k > 0:
        colidx += k
    else:
        rowidx -= k
    k = np.abs(k)

    return rowidx[:-k], colidx[:-k] 
```

演示：

```
>>> a
array([[ 0,  1,  2,  3,  4],
       [ 5,  6,  7,  8,  9],
       [10, 11, 12, 13, 14],
       [15, 16, 17, 18, 19],
       [20, 21, 22, 23, 24]])
>>> a[kth_diag_indices(a, 1)]
array([ 1,  7, 13, 19])
>>> a[kth_diag_indices(a, 2)]
array([ 2,  8, 14])
>>> a[kth_diag_indices(a, -1)]
array([ 5, 11, 17, 23]) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-01-03T17:28:51.373

因此，由于 np.diag_indices() 没有与 np.triu_indices() 相同的功能来获取第 k 个对角线/三角形，另一种方法是仅使用 np.eye(n,k) 构造一个带有 1 的 nxn 矩阵在第 k 个对角线上，然后使用 np.where 提取 1 所在位置的索引元组。

所以我们可以这样做：

```
T = np.where(np.eye(5,k=-1) == 1) 
```

这是眼睛矩阵的额外分配，在某些情况下可能过多，但它是一种简单的单线。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-05-11T14:11:21.810

还有另一种解决方案。使用 np.eye 创建一个矩阵 E。您可以像下面这样更改主对角线。然后，用 eye 中的 k 参数再创建两个矩阵。最后，只需将所有矩阵加在一起。

```
E = np.eye(5)
E = E*2
F = -1*np.eye(len(E),k=1)
G = -1*np.eye(len(E),k=-1)

E = E+F+G
print(E) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-08-06T13:55:48.033

### 利用`numpy.diag(v, k=0)`

其中**k**设置从中心的对角线位置。

IE。{ `k=0`: "默认中心", `k=(-1)`: "中心左侧 1 行", `k=1`: "中心右侧 1 行}

然后按照您通常的预期执行算术。

在此处查看文档：[np.diag()](http://docs.scipy.org/doc/numpy/reference/generated/numpy.diag.html)。

### 例子：

```
In [3]: np.diag(np.arange(6), k=0)
Out[3]: 
array([[0, 0, 0, 0, 0, 0],
       [0, 1, 0, 0, 0, 0],
       [0, 0, 2, 0, 0, 0],
       [0, 0, 0, 3, 0, 0],
       [0, 0, 0, 0, 4, 0],
       [0, 0, 0, 0, 0, 5]])

In [4]: np.diag(np.arange(6), k=1)
Out[4]: 
array([[0, 0, 0, 0, 0, 0, 0],
       [0, 0, 1, 0, 0, 0, 0],
       [0, 0, 0, 2, 0, 0, 0],
       [0, 0, 0, 0, 3, 0, 0],
       [0, 0, 0, 0, 0, 4, 0],
       [0, 0, 0, 0, 0, 0, 5],
       [0, 0, 0, 0, 0, 0, 0]])

In [5]: np.diag(np.arange(6), k=-1)
Out[5]: 
array([[0, 0, 0, 0, 0, 0, 0],
       [0, 0, 0, 0, 0, 0, 0],
       [0, 1, 0, 0, 0, 0, 0],
       [0, 0, 2, 0, 0, 0, 0],
       [0, 0, 0, 3, 0, 0, 0],
       [0, 0, 0, 0, 4, 0, 0],
       [0, 0, 0, 0, 0, 5, 0]]) 
```

# c++ - C++ 异常处理

> ID：10925675
> 
> 赞同：6
> 
> 时间：2012-06-07T04:29:35.070
> 
> 标签：c++, exception, exception-handling, error-handling, runtime-error

所以我正在编写一些代码，我注意到除了语法、类型和其他编译时错误之外，C++ 不会抛出任何其他异常。所以我决定用一个非常简单的程序来测试一下：

```
#include<iostream>

int main() {
    std::count<<5/0<<std::endl;
return 1
} 
```

当我使用 g++ 编译它时，g++ 给了我一个警告，说我正在除以 0。但它仍然编译了代码。然后当我运行它时，它打印了一些非常大的任意数字。当我想知道的是，C++ 如何处理异常？整数除以 0 应该是一个非常简单的例子，说明何时应该抛出异常并且程序应该终止。

我是否必须将整个程序封装在一个巨大的 try 块中，然后捕获某些异常？我知道在 Python 中，当抛出异常时，程序将立即终止并打印出错误。C++ 做什么？甚至是否存在停止执行并终止程序的运行时异常？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-07T04:35:44.323

存在运行时异常，但并非所有“错误”都会导致引发运行时异常。例如，越界访问数组或取消引用空指针只是“未定义的行为”——这意味着任何事情都可能发生。除以零也属于“未定义”类别。

导致“未定义行为”而不是异常的某些操作的基本原理是效率。假设越界数组访问需要抛出异常。然后编译器必须为每个数组访问生成代码，以检查它是否超出范围，如果是，则抛出异常。这是很多检查，其中大部分是不必要的。相反，编译器所做的只是为元素访问生成指令，假设它在界限内。如果它恰好超出范围，那么无论发生什么（例如分段错误）都会发生。如果您**想要**执行检查，您总是可以显式地对其进行编码。

这使得 C++ 比总是进行检查的语言（例如 Java 或 python）更强大，因为您可以选择何时需要检查，何时不需要。（另一方面，它使 C++ 的安全性低于 Java 或 python。这是一种权衡）。

* * *

至于抛出异常但没有在任何地方捕获时会发生什么，通常编译器实现会打印一条包含异常的错误消息`what()`。在您的示例中，这不适用，因为没有引发运行时异常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T04:33:13.593

是的，存在运行时异常。一个例子是[`out_of_range`](http://www.cplusplus.com/reference/std/stdexcept/out_of_range/)，它由[`vector::at`](http://www.cplusplus.com/reference/stl/vector/at/).

但是，除以零是未定义的（C++0x §5.6/4）：

> 如果 / 或 % 的第二个操作数为零，则行为未定义。

所以它可能无法编译、抛出一个虚构的异常、打印“一些非常大的任意数字”或段错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T04:36:32.377

C++ 只抛出在 C++ 标准中明确定义的标准异常。（*是的，它包括一些运行时异常*）

整数除以零不是标准的 C++ 异常（*从技术上讲，它是**未定义的行为***）。所以不会抛出隐式异常。特定的编译器可能会将运行时错误映射到某种异常（您需要为此检查编译器文档，一些编译器将除以零映射到某个异常），如果是这样，您可以捕获该特定异常。但是，请注意，这不是可移植行为，并且不适用于所有编译器。

您可以做的最好的事情是自己检查错误条件（除数等于零）并在这种情况下显式抛出异常。

**编辑：**回答评论

```
class A
{
    public:
         void f()
         {
             int x;
             //For illustration only
             int a = 0;
             if(a == 0)
                  throw std::runtime_error( "Divide by zero Exception"); 
             x=1/a;
         }

         A()
         {
              try
              {
                   f();
              }
              catch(const std::runtime_error& e)
              {
                   cout << "Exception caught\n";
                   cout << e.what(); 
              }
         }
 }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T04:31:31.340

Visual C++ 正确地将此标记为除以零错误。因此，如果它不编译，那么就没有运行它的问题。

# xml - XSLT Xpath 通配符

> ID：10925677
> 
> 赞同：1
> 
> 时间：2012-06-07T04:30:07.237
> 
> 标签：xml, xslt, select, xpath, wildcard

我刚刚开始学习 XML 和 XSLT，并且有一个关于 Xpath 的快速问题。

**这是 XML 代码：**

```
<root>

<shop>
    <person> 
        <employee> 
            <name> Alexis </name> 
            <role> Manager </role> 
            <task> Sales </task> 
        </employee> 
    </person>
</shop>

<person> 
    <employee> 
        <role> Supervisor </role> 
        <name> Blake </name> 
        <task> Control </task> 
    </employee> 
</person>

</root> 
```

**这是 XSLT 代码：**

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="root"> 
<html><head></head> 
<body><xsl:apply-templates/> 
</body> 
</html> 
</xsl:template> 

<xsl:template match="shop"> 
<xsl:apply-templates select="/root/*/*"/> 
</xsl:template> 

<xsl:template match="employee"> 
<u> <xsl:apply-templates select="name"/> </u> 
(Task: <xsl:apply-templates select="task"/>) 
<br></br> 
</xsl:template> 

<xsl:template match="person2"> 
<xsl:apply-templates /> 
</xsl:template> 

</xsl:stylesheet> 
```

**输出是：**

```
Alexis (Task: Sales )
Blake (Task: Control )
Blake (Task: Control ) 
```

我不明白为什么最后一部分是重复的？我知道这是由于 XSLT 代码的这一部分：

```
<xsl:apply-templates select="/root/*/*"/> 
```

但这只是因为我在摆弄代码并在 Firefox 中显示它。我不明白为什么。

据我了解，它正在选择“root”的所有孙元素，如下所示：

根/商店/人

但为什么亚历克西斯没有重复呢？只有布莱克重复了……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T06:30:38.570

在您的**根**匹配模板中，您`<xsl:apply-templates/>`将选择第一个**shop**和**person**元素。关于**person**元素，没有特定的模板，因此 XSLT 将继续匹配其子元素并为“Blake”挑选**员工**

但是，**商店**有一个匹配的模板，问题确实在于您在匹配它的模板中所做的事情。

```
<xsl:apply-templates select="/root/*/*"/> 
```

因为您已经启动了 xpath 表达式，`/root`所以它将相对于文档的根元素开始计算，而不是您当前定位的**shop元素。**这意味着它将选择元素**/root/shop/person**和**/root/person/employee**导致您的重复“Blake”。但是，由于您没有在其他地方匹配 'Alexis' 的员工元素，因此仅输出一次。

您可能只需要这样做，以匹配**员工**元素

```
<xsl:apply-templates select="*/*"/> 
```

这将匹配当前元素的所有孙子元素。`*`将匹配子元素，因此`*/*`将匹配子元素的子元素。

但是，如果意图仅输出**员工**元素，则可以利用元素的默认模板匹配行为是处理其子元素这一事实来简化 XSLT。试试这个 XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="html" indent="yes" />

   <xsl:template match="root">
      <html>
         <head/>
         <body>
            <xsl:apply-templates/>
         </body>
      </html>
   </xsl:template>

   <xsl:template match="employee">
      <u>
         <xsl:value-of select="name"/>
      </u>
      <xsl:value-of select="concat(' (Task:', task, ')')"/>
      <br/>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的 XML 时，将输出以下内容

```
<html>
   <head>
   </head>
   <body>
      <u> Alexis </u> (Task: Sales )<br>
      <u> Blake </u> (Task: Control )<br>
   </body>
</html> 
```

# objective-c - 在 ObjectiveC 中发送/转发变量参数

> ID：10925678
> 
> 赞同：1
> 
> 时间：2012-06-07T04:30:17.417
> 
> 标签：objective-c, variables, ios5, variable-assignment

我知道这在其他编程语言中是可能的。假设我们有以下安排：

```
- (void) myMethod:(NSString*)variables, ... {
    // Handle business here.
}

- (void) anotherMethod:(NSString*)variables, ... {
    // We want to pass these variable arguments for handling
    [self myMethod:variables, ...]; // Do not pass GO
}

// Start the party:
[self anotherMethod:@"arg1", @"arg2", @"arg3", @"arg4", nil]; 
```

让这个在 ObjC 中工作的诀窍是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T04:59:08.630

是的。在 objective-c 中是可能的。[你可以在这里](http://cocoawithlove.com/2009/05/variable-argument-lists-in-cocoa.html)找到很好的文章。

# c - 从二进制文件中删除信息

> ID：10925688
> 
> 赞同：0
> 
> 时间：2012-06-07T04:32:12.867
> 
> 标签：c, file, binary, editing

您好，我的问题如下；

我有这个结构

```
struct item{
    char id[5];
    int ing[10];
    float qtd[10];
}; 
```

我有一个包含信息的二进制文件，我想删除一个选定的 id，我试过了

```
int remove(){   
    FILE *origem;
    FILE *copia;
    char menu[10];
    struct item aux;
    origem=fopen("menu.bin","rb");
    copia=fopen("temp.bin","wb");
    if(origem==NULL || copia==NULL)
        return;

    do{

        printf("name to delete");
        scanf("%s",&menu);

        if(stricmp(menu,aux.id)!=0)
            fwrite(&aux,sizeof(aux),1,copia);

    }while(fread(&aux,sizeof(aux),1,origem)==1);

    fclose(origem);
    fclose(copia);
    remove("menu.bin");
    rename("temp.bin","menu.bin");

} 
```

你能帮助我吗？我想复制除我选择的 ID 之外的其他内容。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T05:27:48.857

尝试实施以下内容，至少看看会发生什么。在这种情况下，您的程序将只接受 1 个 ID 来尝试从二进制文件中删除，而不是获取一个新 ID 来比较从二进制文件中读取的每个结构。

```
int remove(){   
    FILE *origem;
    FILE *copia;
    char menu[10];
    struct item aux;
    origem=fopen("menu.bin","rb");
    copia=fopen("temp.bin","wb");
    if(origem==NULL || copia==NULL)
        return;

    printf("name to delete");
    scanf("%s",&menu);

    // to read first record into struct aux
    fread(&aux,sizeof(aux),1,origem);

    do{

        if(stricmp(menu,aux.id)!=0)
            fwrite(&aux,sizeof(aux),1,copia);

    }while(fread(&aux,sizeof(aux),1,origem)==1);

    fclose(origem);
    fclose(copia);
    remove("menu.bin");
    rename("temp.bin","menu.bin");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:21:57.953

将`printf`/的`scanf`东西移到循环之外，使用`while(fread(...)) { ... }`而不是`do { ... } while(fread(...))`（在从文件中读取内容之前检查 id 并可能写入是毫无意义的）。

# functional-programming - 函数式编程与声明式编程与命令式编程

> ID：10925689
> 
> 赞同：54
> 
> 时间：2012-06-07T04:32:28.587
> 
> 标签：functional-programming, terminology, imperative-programming, declarative-programming

我已经习惯了命令式编程，这是告诉计算机逐步执行程序以获得最终结果的常用方法。另一方面，声明式编程只是传递输入并期望输出，而不说明它是如何完成的过程。我感到困惑的是函数式编程。我知道函数式编程是一种编程范式，它将计算视为对数学函数的评估，并避免状态和可变数据，并且不是一种声明性语言。但是，我仍然无法理解它是如何工作的。

让我们举一个执行斐波那契数列的例子。

命令式编程：

```
#include<stdio.h> 
#include<conio.h> 
main() 
{ 
  int n,i,c,a=0,b=1; 
  printf("Enter Fibonacci series of nth term : "); 
  scanf("%d",&n); 
  printf("%d %d ",a,b); 
  for(i=0;i<=(n-3);i++) 
  { 
    c=a+b; 
    a=b; 
    b=c;    
  } 
  printf("%d ",c);
  getch(); 
} 
```

声明式编程：

```
Give the nth number and it will return the value of the nth number 
```

功能程序如何工作？

另外，如果我的定义错误，请纠正我。请随意发表评论..

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2013-03-12T10:41:22.707

您上面的声明式编程示例不是一个实际的程序，所以它不是一个很好的例子。

主要区别在于命令式和声明式之间。函数式是一种特殊的声明式。

C、C++、Java、Javascript、BASIC、Python、Ruby 和大多数其他编程语言都是**命令式**的。通常，如果它有*显式循环*（for、while、repeat）在每个循环中通过显式赋值操作来*更改变量*，那么它是必要的。

**SQL 和 XSLT 是声明**式编程的两个著名示例。HTML 和 CSS 等标记语言也是声明性的，尽管它们通常不足以描述任意算法。

这是一个示例计算（从合适的数据源按性别对收入求和），首先用命令式语言（Javascript）编写，然后用声明性语言（SQL）编写。

## 命令式编程

```
var income_m = 0, income_f = 0;
for (var i = 0; i < income_list.length; i++) {
    if (income_list[i].gender == 'M')
        income_m += income_list[i].income;
    else
        income_f += income_list[i].income;
} 
```

注意：

*   *显式*初始化将包含运行总计的变量；
*   *显式*循环数据，在每次迭代中**修改**控制变量 ( ) 和运行总计；`i`
*   条件 ( `if`s) 仅用于在每次迭代时**选择代码路径。**

## 声明式编程

```
select gender, sum(income)
from income_list
group by gender; 
```

注意：

*   您声明所需的输出*暗示*了包含运行总数的内存单元；
*   CPU 需要执行的任何循环（例如，在income_list 表上）都*隐含*在您声明所需的输出和源数据的结构中；
*   条件（例如`case`在 SQL 中）以**功能**方式用于根据输入值**指定**您想要的输出值，而不是选择代码路径。

## 函数式编程

正如我上面提到的，SQL是**函数**`case`式编程方式的一个很好的例子，它是声明式编程的一个受限子集，其中所需的计算是通过**组合函数**来指定的。

 ****函数是接受输入并返回输出的*东西*`case`（例如，`sum()`...）

组合意味着通过指定如何将一个的输出作为下一个的输入（通常通过将一个写入另一个内部）将两个或多个**链接**在一起。最后，整个组合，它本身仍然是一个大函数，应用于可用的输入以获得所需的输出。

在这个片段中，我通过*组合**函数* `sum()`和`case`. 这称为函数式编程：

```
select 
    sum(case when some_flag = 'X' then some_column
        else some_other_column end)
from
    ... 
```

如果两个或多个函数的组合及其对输入数据的应用是给定语言中唯一可用的构造，则称该语言是**纯函数**式的。在这些语言中，您会注意到完全没有循环、变量赋值和其他典型的命令式语句。

* * *

编辑：我建议观看一些**Anjana Vakil**关于 Javascript 函数式编程的演讲，以便更好地了解它的内容。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-12T09:20:39.977

[声称](https://stackoverflow.com/questions/602444/what-is-functional-declarative-and-imperative-programming/15382180#15382180)命令式编程与声明式编程的区别在于错误地假设后者缺乏排序，这是一种错误的过度简化。

纯函数式编程并没有阻止表达顺序和实现，而是在操作语义级别上表达随机意外顺序的能力较差。它还具有“不要重复自己”（DRY）的优点，这是一种声明式风格（见下文）。

然而，纯函数式编程并不能保证声明性的高级语义。为此，您需要应用[声明式与命令式的正确定义](https://stackoverflow.com/questions/602444/what-is-functional-declarative-and-imperative-programming/15382180#15382180)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-06-06T11:58:02.167

我在[Pro XAML with C#](https://books.google.de/books/about/Pro_XAML_with_C.html?id=3zYwCgAAQBAJ&printsec=frontcover&source=kp_read_button&redir_esc=y#v=onepage&q&f=false)中找到的另一个有用的解释：

## 声明式

> 在声明式编程中，源代码的编写方式表达了代码的期望结果，很少或根本不强调实际实现。

## 势在必行

> 命令式编程与声明式编程相反。如果声明式编程可以被认为是声明期望的结果是什么，那么命令式编程可以被视为编写代码行来表示如何实现期望结果的指令。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-03-23T16:44:19.377

在函数式编程中，我们使用纯函数构建不可变程序。这就是纯函数：（我提到纯函数是因为函数式编程基于纯函数）

*   它仅取决于提供的输入，而不取决于在评估期间或调用之间可能发生变化的任何隐藏或外部状态。
*   它不会造成超出其​​范围的更改，例如修改全局对象或通过引用传递的参数。

简而言之，函数式编程是指对纯函数的声明式评估，以通过避免外部可观察到的副作用来创建不可变的程序。

简单地说，函数式编程是声明式编程范式，它是一种表达一组操作的范式，而不揭示它们是如何实现的或数据如何流经它们的。命令式编程将计算机程序仅视为一系列自上而下的语句，这些语句更改系统状态以计算结果。

下面是一个命令式编程的例子：我们遍历一个数组，计算每个元素的平方，并将新值存储在同一个数组中。我们正在改变数组。此外，此循环不可重用，对于每个不同的数组，我们将定义一个新的 for 循环。

```
var array= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

 for(let i= 0; i < array.length; i++) {
     array[i]=Math.pow(array[i], 2);
  }
array; //-> [0, 1, 4, 9, 16, 25, 36, 49, 64, 81] 
```

在javascript中我会使用 Array.map()

```
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9].map((i)=>i*i) 
```

在这个方法中，我们不知道 Array.map() 是如何实现的。程序的定义与评估是分开的。更重要的是，这段代码不会改变原始数组，它会创建一个新数组

声明式编程的另一个很好的例子是编写 SQL 查询。我们只是编写了一个简单的 SQL 语句来从数据库中提取数据，但我们不知道幕后发生了什么，所有的魔法都被抽象出来了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-07T15:09:13.417

想想 c 过滤器。您从标准输入读取并写入标准输出的位置。代码可能是命令式的，但程序就像函数一样使用。假设您有一个程序的*功能*，然后通过管道传递给它：

```
cat foo |功能 |tee bar
```

将通过函数过滤 foo 的内容，然后通过过滤器*tee*写入 stdout 并创建*bar*。想想*grep*和*awk*两者中的迭代器都是隐含的，它们像函数一样使用。****

# ios - 为什么 nil nib 名称不起作用？

> ID：10925691
> 
> 赞同：0
> 
> 时间：2012-06-07T04:32:37.080
> 
> 标签：ios, nib

`nil`通常当我作为它的第一个参数传入时，`initWithNibName:bundle:`它会自动找到名称，但有时它不会，它只是显示一个黑屏。在什么情况下会发生这种情况？`nil`控制台窗口中没有错误，除非我将 nib 更改为 nib 名称的字符串文字，否则应用程序会愉快地以黑屏方式运行。我在哪里可以检查以解决此问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T04:39:53.807

你很可能有一个viewcontroller到nib名字不一致加载nib的作用如下

如果您将 nil 传递给 nib 名称，sdk 将执行以下操作

> 1.  如果视图控制器类名以单词“Controller”结尾，如在 MyViewController 中，它会查找名称与类名匹配但不包含单词“Controller”的 nib 文件，如在 MyView.nib 中。
> 2.  它查找名称与视图控制器类的名称匹配的 nib 文件。例如，如果类名为 MyViewController，它会查找 MyViewController.nib 文件。

[苹果文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instp/UIViewController/nibName)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T04:39:08.183

我从来没有`nil`在之前的第一个参数中传递过“” [`[UIViewController initWithNibName: bundle:]`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/initWithNibName%3abundle%3a)，但是苹果的文档说：

> 如果为 nibName 参数指定 nil 并且不覆盖 loadView 方法，则视图控制器会使用其他方式搜索 nib 文件。请参阅笔尖名称。

所以大概你正在你的 loadView 方法中做一些事情。

在实例化视图控制器时，可能只指定显式的 .xib 名称可能是最安全的（也是最佳实践）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T04:42:56.833

您总是可以只使用 init 并覆盖 viewDidLoad。

# android - 动态壁纸 onTouchEvent() 淡入淡出动画/过渡？

> ID：10925694
> 
> 赞同：1
> 
> 时间：2012-06-07T04:32:53.230
> 
> 标签：android, live-wallpaper, touch-event, transitiondrawable

我创建了一个动态壁纸。我希望 onTouchEvent() 在触摸事件位置绘制动画或从一个 PNG 文件过渡到另一个 PNG 文件。到目前为止，我能够在该位置绘制一个 PNG 文件，但我无法让过渡工作。

这是我目前用来尝试从一个图像到另一个图像的淡入淡出动画的代码：

```
void drawTouchPoint(Canvas c) {
        if (mTouchX >=0 && mTouchY >= 0) {
            TransitionDrawable td = new TransitionDrawable(new Drawable[] {getResources().getDrawable(R.drawable.pipe_logo), getResources().getDrawable(R.drawable.pipe_logo_blank)});
            td.setBounds(mTouchX, mTouchY, mTouchX + 100, mTouchY + 100);
            td.setCrossFadeEnabled(true);
            td.startTransition(3000);
            td.draw(c);
        }
    } 
```

上面的代码只绘制了 pipe_logo 图像。我试过颠倒顺序，然后只绘制 pipe_logo_blank 图像。我觉得我已经接近了这一点，只是错过了一些简单的东西。任何帮助将不胜感激。

注意：我发现了许多使用动画的示例，但它们都需要一个视图，例如 ImageView。在这种情况下，因为我使用的是动态壁纸，所以我没有可用的视图。

# java - Android 2.3.4 上的应用程序未安装错误

> ID：10925696
> 
> 赞同：4
> 
> 时间：2012-06-07T04:33:06.860
> 
> 标签：java, android, debugging, apk

我有一个在 Android 模拟器中运行的程序。我不时地创建一个`.apk`并将其导出到我的*SonyEricsson Xperia* active 进行测试。我遇到了错误**Applicton not install。**

我已尝试重新启动手机并删除现有的`.apk,`不能修复故障

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.note"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />
    <supports-screens
    android:largeScreens="true"
    android:normalScreens="true"
    android:smallScreens="true"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".NoteActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".NoteActivity"></activity>
        <activity android:name=".NoteActivity1"></activity>
         <activity android:name=".NoteActivity2"></activity>
    </application>

</manifest> 
```

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T05:02:31.470

1.  删除此代码：

    ```
    <supports-screens
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="true"/> 
    ```

    无论如何，所有这些属性都是`true`默认的。

2.  另外，取出这段代码：

    ```
    <activity android:name=".NoteActivity"></activity> 
    ```

    您已经`Activity`在清单中声明了具有完全相同名称的 an。我相信这个重复的标签是你的应用程序崩溃的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T05:45:27.510

> 删除这个

```
<supports-screens
    android:largeScreens="true"
    android:normalScreens="true"
    android:smallScreens="true"/> 
```

> 并删除它

```
 <activity android:name=".NoteActivity"></activity>
        <activity android:name=".NoteActivity1"></activity>
         <activity android:name=".NoteActivity2"></activity> 
```

# wcf - 在 IIS 托管的 WCF 服务中调试 EF4 SaveChanges

> ID：10925697
> 
> 赞同：0
> 
> 时间：2012-06-07T04:33:11.660
> 
> 标签：wcf, iis-7, entity-framework-4

在现有代码中，transactionEntities 的大小正在增长，并且在我们得到的几乎最后的语句中

*transactionEntities.SaveChanges(System.Data.Objects.SaveOptions.AcceptAllChangesAfterSave);*

目前日志中没有异常，但显然出了点问题，因为没有记录最终消息（“Finished ....”）。实际上这里有2个问题

1.  有没有办法了解正在发生的事情
2.  是否有可能以某种方式模拟单个语句的批量保存，因为 transactionEntities 无论如何都在不断增长。

将服务代码提取到控制台应用程序中可能暂时解决问题（作为内部服务的一种方式触发，因此不需要此类服务），但不能解决现有服务的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T06:16:20.737

对于问题 #1 - 您可以打开 WCF 服务的诊断

在您的网络（或应用程序）配置中：

1) 在配置元素下的任意位置添加 System.Diagnostics 部分。您可以将路径替换为您希望存储文件的路径。

```
<system.diagnostics>
    <sources>
      <source name="System.ServiceModel.MessageLogging" switchValue="Warning, ActivityTracing">
        <listeners>
          <add type="System.Diagnostics.DefaultTraceListener" name="Default">
            <filter type="" />
          </add>
          <add name="ServiceModelMessageLoggingListener">
            <filter type="" />
          </add>
        </listeners>
      </source>
      <source name="System.ServiceModel" switchValue="Warning, ActivityTracing" propagateActivity="true">
        <listeners>
          <add type="System.Diagnostics.DefaultTraceListener" name="Default">
            <filter type="" />
          </add>
          <add name="ServiceModelTraceListener">
            <filter type="" />
          </add>
        </listeners>
      </source>
    </sources>
    <sharedListeners>
      <add initializeData="C:\temp\services_messages.svclog" type="System.Diagnostics.XmlWriterTraceListener, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" name="ServiceModelMessageLoggingListener" traceOutputOptions="LogicalOperationStack, DateTime, Timestamp, ProcessId, ThreadId, Callstack">
        <filter type="" />
      </add>
      <add initializeData="C:\temp\services_tracelog.svclog" type="System.Diagnostics.XmlWriterTraceListener, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" name="ServiceModelTraceListener" traceOutputOptions="LogicalOperationStack, DateTime, Timestamp, ProcessId, ThreadId, Callstack">
        <filter type="" />
      </add>
    </sharedListeners>
  </system.diagnostics> 
```

2) 在 system.ServiceModel 下添加以下内容：

```
<diagnostics wmiProviderEnabled="false">
      <messageLogging logEntireMessage="true" logMalformedMessages="true" logMessagesAtServiceLevel="true" logMessagesAtTransportLevel="true" />
</diagnostics> 
```

3) 在 C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin\ 下启动 SvcTraceViewer.exe。加载消息跟踪 (services_messages.svclog) 和服务跟踪日志 (services_tracelog.svclog)。您可以在工具中拖放文件或打开一个然后添加另一个

4) 寻找问题的红色粗体字母。

如果您想让编辑 WCF 配置的体验更令人满意，您可以使用与 SvcTraceViewer.exe (#3) 位于同一文件夹下的 SvcConfigEditor.exe。只需打开配置文件，您应该会看到 Diagnostics 文件夹，它允许您启动/停止和配置诊断。

# android - Admob新手，不工作

> ID：10925701
> 
> 赞同：0
> 
> 时间：2012-06-07T04:33:28.460
> 
> 标签：android, admob

我是 admob 的新手，我有一些错误，我很困惑....有人可以帮忙吗？每次我启动应用程序时，它都会强制退出。我知道该应用程序本身可以工作，因为我之前在没有 admob 的情况下尝试过它......这是我的主要课程：package com.firecow.markcheck;

```
 package com.firecow.markcheck;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.text.Editable;
import android.view.View;
import android.view.Window;
import android.widget.Button;
import android.widget.EditText;
import android.widget.LinearLayout;
import android.widget.Toast;
import com.google.ads.*;

public class MarkCheck extends Activity {
    /** Called when the activity is first created. */

    Button sub, share;
    EditText per;
    Context context;
    CharSequence text;
    String heightString;
    double num;
    Toast toast;
    MediaPlayer player;
    private AdView adView;
    AdRequest adRequest = new AdRequest();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.main);
        sub = (Button) findViewById(R.id.bSubmit);
        share = (Button) findViewById(R.id.bShare);
        per = (EditText) findViewById(R.id.tePercent);
        context = getApplicationContext();
        final int duration = Toast.LENGTH_SHORT;
        adRequest.addTestDevice(AdRequest.TEST_EMULATOR);               // Emulator
        adRequest.addTestDevice("EMJY-KBBS-VL7P-2");                      // Test Android Device

        //Create the adView
        adView = new AdView(this, AdSize.BANNER, "a14fd022edb48e8");

        // Lookup your LinearLayout assuming it’s been given
        // the attribute android:id="@+id/mainLayout"
        LinearLayout layout = (LinearLayout) findViewById(R.id.mainLayout);

        // Add the adView to it
        layout.addView(adView);

        // Initiate a generic request to load it with an ad
        adView.loadAd(adRequest);

        text = "Made by Firecow, Voice of William Wang";
        toast = Toast.makeText(context, text, duration);
        toast.show();

        sub.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                heightString = per.getText().toString();
                if (heightString != null) {
                    num = Double.parseDouble(heightString);

                    if (num >= 151) {
                        text = "I didn't know you could score that high...";
                        toast = Toast.makeText(context, text, duration);
                        toast.show();
                    } else if (num >= 101) {
                        text = "You get a A+";
                        toast = Toast.makeText(context, text, duration);
                        player = MediaPlayer.create(getApplicationContext(),
                                R.raw.perfect);
                        player.start();
                        toast.show();
                    } else if (num >= 86) {
                        text = "You get a A";
                        toast = Toast.makeText(context, text, duration);
                        player = MediaPlayer.create(getApplicationContext(),
                                R.raw.harvard);
                        player.start();
                        toast.show();
                    } else if (num >= 73) {
                        text = "You get a B";
                        toast = Toast.makeText(context, text, duration);
                        player = MediaPlayer.create(getApplicationContext(),
                                R.raw.ucla);
                        player.start();
                        toast.show();
                    } else if (num >= 68) {
                        text = "You get a C+";
                        toast = Toast.makeText(context, text, duration);
                        player = MediaPlayer.create(getApplicationContext(),
                                R.raw.kwantlan);
                        player.start();
                        toast.show();
                    } else if (num >= 60) {
                        text = "You get a C";
                        toast = Toast.makeText(context, text, duration);
                        player = MediaPlayer.create(getApplicationContext(),
                                R.raw.wendys);
                        player.start();
                        toast.show();
                    } else if (num >= 50) {
                        text = "You get a C-";
                        toast = Toast.makeText(context, text, duration);
                        player = MediaPlayer.create(getApplicationContext(),
                                R.raw.drop_out);
                        player.start();
                        toast.show();
                    } else if (num <= 49) {
                        text = "You get a F";
                        toast = Toast.makeText(context, text, duration);
                        player = MediaPlayer.create(getApplicationContext(),
                                R.raw.failure);
                        player.start();
                        toast.show();
                    } else {
                        text = "Please type a proper percent";
                        toast = Toast.makeText(context, text, duration);
                        toast.show();
                    }
                } else {
                    text = "Please enter a proper percent";
                    toast = Toast.makeText(context, text, duration);
                    toast.show();
                }

            }
        });

        share.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent bacon = new Intent("com.firecow.markcheck.SHARE");
                startActivity(bacon);

            }
        });
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        try {
            if (adView != null) {
                adView.destroy();
            }
            player.release();

            finish();
        } catch (Exception E) {

        }
    }
} 
```

和我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.firecow.markcheck"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".MarkCheck"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Share"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.firecow.markcheck.SHARE" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.google.ads.AdActivity"
            />
    </application>

    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.INTERNET" />

</manifest> 
```

我很困惑......请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T16:55:17.193

首先，根据[文档](https://developers.google.com/mobile-ads-sdk/docs/android/fundamentals#adactivity)，您需要在清单中使用它的 configChanges 指定 AdActivity：

```
<activity android:name="com.google.ads.AdActivity"
          android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/> 
```

此外，您的 main.xml 需要有一个`LinearLayout`id 元素`mainLayout`。否则程序在你调用时崩溃`layout.addView(adView);`

最后，仅供参考，以下方法不起作用：

```
adRequest.addTestDevice("EMJY-KBBS-VL7P-2"); 
```

设备 ID 将是一个 32 位十六进制散列字符串。您需要查看 logcat 以获取日志记录语句：

```
To get test ads on this device, call adRequest.addTestDevice("some_32_hex_string") 
```

请输入该字符串。

# javascript - Raphael 路径中的自定义属性

> ID：10925707
> 
> 赞同：0
> 
> 时间：2012-06-07T04:34:22.587
> 
> 标签：javascript, svg, raphael

我有以下代码：

```
var rsr = Raphael('rsr2', '660', '400');
var Layer_x0020_1 = rsr.set();
var path_a = rsr.path(" M154 263l9 41 -1 5c-17,-4 -38,-11 -56,-20l18 -37c10,4 19,8 30,11z");
path_a.attr({
    class: 'fil0',
    filter: 'url(#Filter)',
    "level":"5",
    parent: 'Layer_x0020_1',
    'stroke-width': '0',
    'stroke-opacity': '1'
}).data('id', 'path_a');
Layer_x0020_1.attr({
    'id': 'Layer_x0020_1',
    'filter': 'url(#Filter)',
    'name': 'Layer_x0020_1'
});
$('path').attr({'fill':'#b4b3b0'});
var rsrGroups = [Layer_x0020_1]; 
```

有`level`属性。但是，`Raphael`无视它。这是生成的标记`Raphael`：

```
<div id="rsr2">
  <svg height="400" version="1.1" width="660" xmlns="http://www.w3.org/2000/svg" style="overflow:hidden;position:relative">
    <desc>Created with Raphaël 2.1.0</desc>
    <defs></defs>
    <path style="stroke-opacity: 1" fill="#b4b3b0" stroke="#000000" d="M154,263L163,304L162,309C145,305,124,298,106,289L124,252C134,256,143,260,154,263Z" stroke-width="0" stroke-opacity="1"></path>
  </svg>
</div> 
```

怎么说`Raphael`添加`level`属性到路径？
谢谢。

[jsFiddle](http://jsfiddle.net/NFAAL/4/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T05:02:50.530

您需要使用这里提到的 customAttributes 函数[http://raphaeljs.com/reference.html#Paper.customAttributes](http://raphaeljs.com/reference.html#Paper.customAttributes)

该链接的示例代码，这里的色调是一个自定义属性

```
 paper.customAttributes.hue = function (num) {
num = num % 1;
return {fill: "hsb(" + num + ", 0.75, 1)"};
};
// Custom attribute “hue” will change fill
// to be given hue with fixed saturation and brightness.
// Now you can use it like this:
var c = paper.circle(10, 10, 10).attr({hue: .45});
// or even like this:
c.animate({hue: 1}, 1e3);

// You could also create custom attribute
// with multiple parameters:
paper.customAttributes.hsb = function (h, s, b) {
    return {fill: "hsb(" + [h, s, b].join(",") + ")"};
};
c.attr({hsb: "0.5 .8 1"});
c.animate({hsb: [1, 0, 0.5]}, 1e3); 
```

# installation - 如何在 Eclipse (Ubuntu) 中安装 opencsv lib

> ID：10925709
> 
> 赞同：2
> 
> 时间：2012-06-07T04:34:32.977
> 
> 标签：installation, opencsv

我知道这个问题很愚蠢，我很努力地搜索但仍然找不到解决方案。

事情是这样的：我下载了带有libs的opencsv的源代码（它的文件名是：opencsv-2.3-src-with-libs.tar.gz），并尝试将其导入我的android项目（在Ubuntu eclipse下）。据我所知，如果不是以*.jar结尾的任何文件，我都无法将其导入为lib，而包中只有一个.jar文件，遗憾的是junit-4.7.jar，似乎没有什么可做的用opencsv做。我严重困惑...

请告诉我如何将 tar.gz 文件作为库导入，非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T04:51:27.453

% tar xfvz opencsv-2.3-src-with-libs.tar.gz
% cd opencsv-2.3/deploy
% ls
你会发现“open-csv-2.3.jar”

# regex - 日期 DD-MM-YYYY 的正则表达式

> ID：10925710
> 
> 赞同：2
> 
> 时间：2012-06-07T04:34:47.570
> 
> 标签：regex, html

我有以下表达式，它将用作 HTML5“模式”属性中的日期验证。

```
?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))-(?:(?:0[1-9]|1[0-2])-(?:19|20)[0-9]{2} 
```

我希望它只允许有效日期，使用“-”作为分隔符。如果是闰年，这意味着最多 2 月 29 日，其他月份则分别为 30/31。

目前，它只允许从 2（2012 年）开始的年份和最多 12 个月（12 月）的月份。但无论哪个月，它都将一天限制为 29 天。

任何人都可以帮我解决它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T04:42:09.923

^(((0[1-9]|[12]\d|3[01])/(0[13578]|1[02])/((19|[2-9]\d)\d{ 2}))|((0[1-9]|[12]\d|30)/(0[13456789]|1[012])/((19|[2-9]\d)\d{ 2}))|((0[1-9]|1\d|2[0-8])/02/((19|[2-9]\d)\d{2}))|(29 /02/((1[6-9]|[2-9]\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048] ]|[3579][26])00))))$

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T00:50:39.110

我被链接到另一个用于验证使用正则表达式的好资源。 [此](http://atomicnoggin.ca/blog/2012/06/07/the-ultimate-date-validation-regexp/)链接为许多不同的日期格式提供“最终”日期验证器，并允许所有分隔符。

# jquery - 从 Zend Framework Controller 获取 Ajax 响应

> ID：10925713
> 
> 赞同：3
> 
> 时间：2012-06-07T04:35:13.163
> 
> 标签：jquery, ajax, zend-framework, response

我正在对控制器的一个视图执行 Ajax 请求，但我无法向 Ajax 方法发回响应。在下面的代码段中，我试图将“hellopanda”这个词发回，但在警报消息中，我将获取数据作为对象。

**看法 ：**

```
$.ajax({  

      type: "POST",  
      url: "localhost/some-activity",
      data: dataString, 
      success: function(data) { 
              alert( "Data is: " + data);
          //do something with data
      },
      error: function(data){
               alert( "Data is: " + data);
        //do something with data 
          },
      onComplete: function(){

          }
    }); 
```

**控制器：**

```
 public function someActivityAction(){

   //do stuff

   echo "hellopanda";

 } 
```

我很确定回声是问题所在。任何有关如何对视图做出正确响应的见解将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T05:10:38.497

您的网址是 在您的操作中`"localhost/some-activity"`更改为`"localhost/someactivity"`

```
public function someactivityAction(){

//do stuff

echo "hellopanda";

exit;

} 
```

如果你想返回一个数组，请确保像这样编码

```
echo $this->_helper->json($yourarray);exit; 
```

你的ajax会是这样的

```
$.ajax({  

      type: "POST",  
      url: "localhost/someactivity",
      data: dataString, 
      dataType: 'json', //if you are returning array
      success: function(data) { 
           for(int i=0;i<data.length;i++){
                 alert(data[i]['yourindexofarray']);
              }
      },
      error: function(data){
               alert( "Data is: " + data);
        //do something with data 
          },
      onComplete: function(){

          }
}); 
```

# matlab - 如何在matlab中线性化之字形线

> ID：10925716
> 
> 赞同：-1
> 
> 时间：2012-06-07T04:35:47.803
> 
> 标签：matlab, smoothing

我必须在matlab中线性化一条之字形线。我使用matlab的'line'命令生成了一条倾斜线，但它并不平滑。谁能帮我。

我现在使用以下代码

```
len = 3;
wid = 1;
ly  = 1;
lx  = 0.5;
th  = 60;
vertices = [lx      ly;
            lx+wid  ly;
            lx+wid  ly+len;
            lx      ly+len;
            lx      ly];
R=[ cos(th) sin(th);
   -sin(th) cos(th)];
w   = vertices*R;
wx1 = w(:,1);
wx1 = wx1';
wy1 = w(:,2);
wy1 = wy1';
h=line(wx1,wy1,'color','black');
axis([-10 10 -10 10])
axis off 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:23:45.663

从您的图像来看，似乎在线上应用了抗锯齿。当您将绘图保存为位图/JPEG 时，它一定发生了。您在轴上看到的图像可能是平滑的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T07:08:05.507

您可以通过设置四个角顶点来绘制一个正方形。如果您的意思是在结果图中看起来不像正方形，那是因为您的 x 轴和 y 轴没有相同的缩放比例。

您将 x 和 y 限制设置为相同

```
axis([-10 10 -10 10]) 
```

但这并不能保证相同的缩放比例，因为图形本身可以具有与高度不同的宽度。

但是，您可以强制缩放相同

```
axis equal 
```

# javascript - Javascript如何使用一些要替换的文本来替换字符串的一部分

> ID：10925718
> 
> 赞同：-1
> 
> 时间：2012-06-07T04:35:51.423
> 
> 标签：javascript, regex, replace

首先，我是一个 JavaScript 菜鸟，对正则表达式几乎一无所知。我正在尝试拼凑一些可以从根本上改变这一点的东西：

```
<span class="fspoiler">spoils</span> 
```

对此：

```
<spoiler>spoils</spoiler> 
```

从一些研究来看，似乎使用正则表达式和`replace()`函数是要走的路，但我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T04:42:07.230

```
var str = '<span class="fspoiler">spoils</span>';
str.replace(/<span class="f(.+)">(.+)<\/span>/, '<$1>$2</$1>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:27:46.960

在同一条线路上多次遇到剧透时遇到了一些问题。由于我是正则表达式的菜鸟，我不确定从哪里开始修复它。我最后只是写了一个while块来做我需要的。

```
var spoilerStart = '<span class="fspoiler">';
var spoilerEnd = '</span>';
while (body.indexOf(spoilerStart) != -1)
{
    var startIndex = body.indexOf(spoilerStart);
    var endIndex = body.indexOf(spoilerEnd, startIndex) + spoilerEnd.length;
    var fullSpoiler = body.substring(startIndex, endIndex);

    var textStartIndex = startIndex + spoilerStart.length;
    var textEndIndex = endIndex - spoilerEnd.length;
    var text = body.substring(textStartIndex, textEndIndex);

    body = body.replace(fullSpoiler, '<spoiler>' + text + '</spoiler>');
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-07T04:42:56.193

通过使用 jquery [replceWith](http://api.jquery.com/replaceWith/)函数

```
$('span.fspoiler').replaceWith('<spoiler>spoils</spoiler>'); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-07T04:48:14.180

```
var className=document.getElementById("abc");
var tagName=className.replace("f","");
var content=document.getElementById("abc").innerHTML;
var newTag = "<"+tagName+">"+content+"<"+tagName"/>"; 
```

在这里，假设`<span>`给定一个`id="abc"`

# php - Codeigniter xss_clean 困境

> ID：10925720
> 
> 赞同：4
> 
> 时间：2012-06-07T04:35:57.947
> 
> 标签：php, codeigniter, xss

我知道这个问题已经被问了一遍又一遍，但我仍然没有找到我喜欢的完美答案，所以又来了……

我一直在阅读很多关于 CI 的 xss_filter 的两极分化评论。基本上大多数人说这很糟糕。有人可以详细说明它有多糟糕，或者至少给出一种最可能的情况来利用它吗？我查看了 CI 2.1 中的安全类，我认为它非常好，因为它不允许像 document.cookie、document.write 等恶意字符串。

如果该站点基本上具有非 html 演示文稿，那么在插入数据库之前使用全局 xss_filter 是否安全（或者如果它真的对性能影响很大，请在每个表单发布的基础上使用它）？我一直在阅读关于是否以大多数人在输入/输出上转义的利弊说我们应该只在输出上转义。但是话又说回来，为什么要允许将字符串之类的字符串`<a href="javascript:stealCookie()">Click Me</a>`保存在数据库中呢？

我不喜欢的一件事是`javascript:`，这样将被转换为`[removed]`. 我可以扩展 CI 的安全核心`$_never_allowed_str`数组，以使不允许的字符串返回空而不是`[removed]`.

我读过的最合理的错误行为示例是，如果用户有密码，`javascript:123`它将被清除`[removed]123`，这意味着像这样的字符串`document.write123`也将作为用户密码传递。再说一次，发生这种情况的可能性有多大，即使发生这种情况，我也想不出会对网站造成任何真正的伤害。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T05:56:02.720

基本上 XSS 是一个 OUTPUT 问题 - 但 Codeigniter 将其视为 INPUT 问题。

> 谁能详细说明它的坏处...

问题是 xss_clean 改变了您的 INPUT - 这意味着在某些情况下（例如您描述的密码问题）输入不是预期的。

> ...或者至少给出 1 个最有可能被利用的场景？

它只查找某些关键字，例如“javascript”。xss_clean 没有检测到其他脚本操作，而且它不会保护您免受任何“新”攻击。

> 我不喜欢的一件事是 javascript: 并将其转换为 [removed]。我可以扩展 CI 的安全核心 $_never_allowed_str 数组，以便永远不允许的字符串返回空而不是 [已删除]

你可以这样做——但你只是在一个糟糕的解决方案上贴了一个创可贴。

> 我一直在阅读关于是否以大多数人在输入/输出上转义的利弊说我们应该只在输出上转义。

这是正确的答案 - 转义所有输出，并且您拥有真正的 XSS 保护，而无需更改输入。

[OWASP 在这里解释了更多关于 XSS 的信息](https://www.owasp.org/index.php/XSS)

[在 XSS 上查看一个好的 Codeigniter 论坛主题](http://codeigniter.com/forums/viewthread/188698)

就我个人而言，我在 Codeigniter 中保护 XSS 的方法是不对输入进行任何 XSS 清理。我在 _output 上运行了一个钩子——它清除了我所有的“view_data”（这是我用来向视图发送数据的变量）。

如果我不希望 XSS Clean 运行，我可以通过在我的控制器中插入“$view_data['clean_output'] = false” 来切换，钩子会检查它：

```
if (( ! isset($this->CI->view_data['clean_output'])) || ($this->CI->view_data['clean_output']))
   {
    // Apply to all in the list
    $this->CI->view_data = array_map("htmlspecialchars", $this->CI->view_data);
   } 
```

这为我的整个站点提供了自动和完整的 XSS 保护——只需几行代码，并且不会影响性能。

# android - 在android中通过wifi访问连接在本地网络上的打印机

> ID：10925722
> 
> 赞同：0
> 
> 时间：2012-06-07T04:36:10.207
> 
> 标签：android, android-wifi, printers

在连接局域网的打印机中，我想打印 android 设备 sd 卡中的文件，所以我想通过 wifi 访问该打印机，而不是打印机的 IP 地址。我花了很多时间在谷歌上搜索，但我没有找到任何解决方案。

任何人都可以在这个问题上帮助我。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:43:27.657

您是要打印到大型桌面打印机还是收据打印机？

如果您正在寻找收据打印机，Star Micronics 有一个 Android SDK，您可以在此处免费下载：http: [//www.starmicronics.com/support/SDKDocumentation.aspx](http://www.starmicronics.com/support/SDKDocumentation.aspx)。

它涵盖了 LAN 打印以及 USB 和蓝牙。

这个 SDK 有一个非常好的示例应用程序，可让您测试和自定义许多打印机功能以查看它们的运行情况。每个函数都记录在源代码中。命令及其参数也可在应用程序本身中作为快速屏幕参考，这很方便。最重要的是，它有据可查。

如果您使用他们的 SDK，您可以将纯文本与命令一起发送到打印机。API 处理将数据转换为打印机可以理解的内容。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-07T04:49:16.960

您应该使用谷歌的云打印技术来获取您本地网络的打印机。

[谷歌云打印](http://www.google.com/cloudprint/learn/)

[安卓市场应用链接](https://play.google.com/store/apps/details?id=com.pauloslf.cloudprint&hl=en)

[用于在 Andorid 中打印文档的 Api](http://android10.org/index.php/articleslibraries/140-api-for-printing-from-android-applications)

# android - 如何在 ListView android 中添加图像

> ID：10925727
> 
> 赞同：1
> 
> 时间：2012-06-07T04:36:41.820
> 
> 标签：android, listview

我想在我的列表视图中添加图像，我有这个代码

```
package com.wilis.appmysql;

import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
//import android.util.Log;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

public class menulayanan extends ListActivity {

    /** Called when the activity is first created. */

    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);

        // Create an array of Strings, that will be put to our ListActivity
        String[] menulayanan = new String[] { "Berita Terbaru", "Info Item", "Customer Service", "Help","Exit"};

        //Menset nilai array ke dalam list adapater sehingga data pada array akan dimunculkan dalam list
        this.setListAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1,menulayanan));
    }

    @Override
    /**method ini akan mengoveride method onListItemClick yang ada pada class List Activity
     * method ini akan dipanggil apabilai ada salah satu item dari list menu yang dipilih
     */
    protected void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);
        // Get the item that was clicked
        // Menangkap nilai text yang dklik
        Object o = this.getListAdapter().getItem(position);
        String pilihan = o.toString();
        // Menampilkan hasil pilihan menu dalam bentuk Toast
        tampilkanPilihan(pilihan);
    }
    /**
     * Tampilkan Activity sesuai dengan menu yang dipilih
     *
     */
    protected void tampilkanPilihan(String pilihan) {
        try {
            //Intent digunakan untuk sebagai pengenal suatu activity
            Intent i = null;
            if (pilihan.equals("Berita Terbaru")) {
                i = new Intent(this, PraBayar.class);
            } else if (pilihan.equals("Info Item")) {
                i = new Intent(this, PascaBayar.class);
            } else if (pilihan.equals("Customer Service")) {
                i = new Intent(this, CustomerService.class);
            } else if (pilihan.equals("Help")) {
                i = new Intent(this, Help.class);
            } else if (pilihan.equals("Exit")) {
                finish();
            } else {
                Toast.makeText(this,"Anda Memilih: " + pilihan + " , Actionnya belum dibuat", Toast.LENGTH_LONG).show();
            }
            startActivity(i);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

我想为每个列表添加不同的图像，所以我的意思是我想将 a.png 添加到“Berita Terbaru”，将 b.png 添加到“信息项”，c.png “客户服务”，那么该怎么做？我很困惑这个，谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T04:41:33.667

为了实现它，您应该制作自定义列表视图。请阅读给定的教程链接。

[自定义列表视图教程链接](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

我希望可以为您提供全面的帮助。

# python - python中的矩阵数据

> ID：10925730
> 
> 赞同：0
> 
> 时间：2012-06-07T04:36:55.970
> 
> 标签：python

我试图逐步减去 3D 矩阵的值。矩阵如下所示：

```
ATOM 1223 ZX SOD A 11 2.11 -1.33 12.33
ATOM 1224 ZY SOD A 11 -2.99 -2.92 20.22
ATOM 1225 XH HEL A 12 -3.67 9.55 21.54
ATOM 1226 SS ARG A 13 -6.55 -3.09 42.11
... 
```

这里最后三列分别代表轴 x、y、z 的值。现在我想要做的是，取第一行的 x、y、z 的值，并以迭代的方式减去第二、第三、第四行并打印每个轴的值。我正在使用：

```
for line in map(str.split,inp):
    x = line[-3]
    y = line[-2]
    z = line[-1] 
```

用于分离值，但如何以迭代方式进行。我应该使用`Counter`.
预期输出：
对于 line1 vs line2：`5.1 1.59 -7.89`
对于 line1 vs line3：`5.78 -10.88 -9.21`
...依此类推。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T04:58:52.447

这将为您提供一个 [x,y,z] 列表列表，您可以对其进行迭代/解包。

```
mylist = [map(float, line[-3:]) for line in map(str.split, inp)] 
```

但是，如果您想迭代地产生从 x,y,z 中减去新行值的结果，最好的办法是编写一个生成器函数，如下所示：

```
def matrix_gen(inp):
    """ iteratively subtracts values from first line of input 3D matrix """
    if len(inp) < 1: raise StopIteration
    first_line = inp[0].split()
    x,y,z = map(float, first_line[-3:])
    yield x,y,z
    for elem in inp[1:]:
        line = elem.split()
        new_x, new_y, new_z = map(float, line[-3:])
        yield x - new_x, y - new_y, z - new_z 
```

生成器将首先产生您的初始 x,y,z 值，然后将产生从您的矩阵中从前一个值中减去下一个 x,y,z 值的结果。然后您可以通过以下方式生成 (x,y,z) 元组：

```
for x,y,z in matrix_gen(inp):
    # do something 
```

如果您不想打印第一行，只需删除第一条`yield`语句。

看起来您想要一个字符串作为输出，您可以为此生成一个字符串列表：

```
[' '.join(x) for x in matrix_gen(inp)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T06:25:22.017

`itertools`更好：

```
import itertools

ss = ['ATOM 1223 ZX SOD A 11 2.11 -1.33 12.33',
      'ATOM 1224 ZY SOD A 11 -2.99 -2.92 20.22',
      'ATOM 1225 XH HEL A 12 -3.67 9.55 21.54',
      'ATOM 1226 SS ARG A 13 -6.55 -3.09 42.11']

mylist = [map(float, i.split()[-3:]) for i in ss]
print [list(itertools.imap(lambda x,y: x - y, i[0], i[1])) for i in itertools.combinations(mylist, 2)] 
```

# node.js - 为什么 Mongoose 模型会抛出“TypeError: Object { _id: x } has no method 'y'”？

> ID：10925735
> 
> 赞同：1
> 
> 时间：2012-06-07T04:37:42.810
> 
> 标签：node.js, mongodb, mongoose

嘿，我是 mongo 和 mongoose 的新手。我尝试通过 _id 更新特定文档，但我不断收到错误

```
TypeError: Object { _id: 4fd02c1d50071a5713000001 } has no method 'update'. 
```

我的代码如下：

```
//Update comment or increment vote up or vote down
app.put('/comments/voteUp/:commentid', function(request, response){

var id = mongoose.Types.ObjectId(request.params.commentid);

var conditions = { "_id": request.params.commentid }
  , update =  {$inc: { 'meta.voteUp': 1 } }
  , options = { multi: false };

console.log(conditions);
var comment = new CommentModel();
comment.update( { "_id": id, update, options, callback );

function callback (err, numAffected) {
    response.send("numAffected: " + numAffected);
}
console.log("commentid: " + request.params.commentid);
  }); 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T12:07:54.400

`update`是模型构造函数的方法，而不是模型实例的方法。所以改为：

```
CommentModel.update({"_id": id}, update, options, callback); 
```

# android - 没有服务的音乐播放器？

> ID：10925739
> 
> 赞同：0
> 
> 时间：2012-06-07T04:38:01.247
> 
> 标签：android

我正在开发一个在线 mp3 播放器，一开始我决定不使用 Service - 因为有很多数据要传递：使用 AIDL 变得非常复杂。相反，我让 Player 作为全局单例。该应用程序几乎完成了，一切正常（即使屏幕关闭也会播放音乐）-但有时整个过程都被杀死了！

因此，我试图通过在音乐开始时启动本地虚拟服务（例如：DummyService）来“欺骗”操作系统，并在音乐停止时停止 DummyService。但这并没有多大帮助，该过程仍然经常被杀死:(。

恕我直言，如果我的应用程序进程有一个“正在运行”的服务——它将有更好的机会不被安卓操作系统杀死。并且 DummyService 与承载 MediaPlayer 的 Service 没有太大区别 - 因为 MediaPlayer 也没有在 UI 线程上播放（调用 Service 时的默认线程）。

所以问题是：**我的播放器（全局静态播放器 + DummyService）和由服务包装的播放器之间是否有任何区别**（例如：MusicDroid 此处[http://www.helloandroid.com/tutorials/musicdroid-audio-player -第二部分](http://www.helloandroid.com/tutorials/musicdroid-audio-player-part-ii)）

谢谢你的关注，范雄山

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:19:16.067

Your problem is gonna be the Singleton implementation. You can read a lot of debate wheter it is suited for DalvikVM or not. This is an example why it is not. The Dalvik GC gonna eat your Singleton, you need another kind of implementation.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T08:36:18.393

使用您的答案作为提示，我再次搜索，并在互联网上找到了一些好东西，它就在这里（关于 Singleton-Activity-Service 生命周期）：

[http://www.2linessoftware.com/2010/08/03/singletons-and-services-and-shutdowns-oh-my/](http://www.2linessoftware.com/2010/08/03/singletons-and-services-and-shutdowns-oh-my/)

这里有很好的相关答案：

[Android中的单例与应用程序上下文？](https://stackoverflow.com/questions/3826905/singletons-vs-application-context-in-android)

我一直在玩 Singleton，发现答案并不完全正确。我试图在活动 A 中创建单例 S，然后转到活动 B（在离开 A 之前，我调用了 A.finish() ，并在 B.onCreate() 中调用 System.gc() ） - 但是 S.finalize( ) 不叫！

以下是代码：

```
public class FirstAct extends Activity implements OnClickListener {

    public static final String TAG = "Test_Service";
    private View btChange;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        System.gc();
        setContentView(R.layout.first_lay);
        btChange = findViewById(R.id.btChange);
        btChange.setOnClickListener(this);
        SomeSingleton.getInstance();
    }

    @Override
    public void onClick(View v) {
        Intent i = new Intent(this,SecAct.class);
        startActivity(i);
        this.finish();
    }

    @Override
    protected void onDestroy() {
        Log.i(TAG,"First activity is destroyed !");     
        super.onDestroy();
        System.gc();
    }

} 
```

第二个活动：

```
public class SecAct extends Activity implements OnClickListener {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        System.gc();
        setContentView(R.layout.first_lay);
        ((TextView) findViewById(R.id.tvLabel)).setText("Second activity");
        findViewById(R.id.btChange).setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
        Intent i = new Intent(this,FirstAct.class);
        this.startActivity(i);
        this.finish();
    }

    @Override
    protected void onDestroy() {
        Log.i(FirstAct.TAG,"Second activity is destroyed !");
        super.onDestroy();
        System.gc();
    }

} 
```

单身人士：

```
public class SomeSingleton {
    private static volatile SomeSingleton instance = null;
    private static int count = 0;
    private SomeSingleton() {
        count++;
        Log.i(FirstAct.TAG, "Created, instance: #" + count);
    }

    public static SomeSingleton getInstance() {
        if ( instance == null ) {
            instance = new SomeSingleton();
        }
        return instance;
    }

    @Override
    protected void finalize() throws Throwable {
        Log.i(FirstAct.TAG, "Finalized! ");
        super.finalize();
    }

    public void kill() {
        instance = null;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-29T18:13:11.930

这是一个迟到的答案，但我正在与类似的问题作斗争。

您是否尝试过从 DummyService 内部初始化 MP3Singleton？根据您在答案中发布的链接，如果您从服务的生命周期内初始化单例，则单例将在服务期间保留在内存中。

# css - css 选择某个 div 内的所有元素

> ID：10925742
> 
> 赞同：0
> 
> 时间：2012-06-07T04:38:18.463
> 
> 标签：css, css-selectors

我想检索不在具有以'xyz_'开头的类的div内的所有输入类型复选框

如何为上述内容编写 CSS 选择器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T04:55:48.957

利用`div:not([class^="xyz_"]) input[type="checkbox"]{ ... }`

请参阅工作示例[http://jsfiddle.net/Sz3zY/](http://jsfiddle.net/Sz3zY/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T04:48:12.703

```
*:not(div[class^="xyz_"]) input[type="checkbox"] { ... } 
```

# java - 在数据库中发现 Java 未知字符

> ID：10925750
> 
> 赞同：2
> 
> 时间：2012-06-07T04:39:30.910
> 
> 标签：java, ms-access

我正在创建一个将 java 连接到访问数据库的程序，但是在表中插入一些字符串后发现了一些问题。

我发现了这个字符： Â 在每条带有“-”的记录上。

示例数据：

```
 A Sample Input -Data 
```

当我尝试检查数据库时，我发现了这个：

```
A Sample Input Â-Data 
```

我不知道我从哪里得到这个角色。

我确定我的代码没有问题，我只是不知道为什么将它插入数据库后会有未知字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T05:20:02.710

Java 使用的编码和数据库使用的编码不匹配。引用的 SO 文章（在上面的评论中）似乎是合适的，因为 Java 使用 Unicode 而 Access 很可能不使用（它可能使用 CP-1252 或 ISO-8859-1）。

您还没有提到您用于访问数据库的库。您应该查看是否有允许您指定编码的选项。如果没有，那么您可能必须自己进行转换。这是[一个如何使用 Java 的 CharsetEncoder 执行此操作的示例](http://www.exampledepot.com/egs/java.nio.charset/ConvertChar.html)。

# asp.net-mvc - ExtJS 和 ASP.NET MVC？

> ID：10925754
> 
> 赞同：1
> 
> 时间：2012-06-07T04:39:48.377
> 
> 标签：asp.net-mvc, architecture, extjs, extjs4, extjs-mvc

我正在使用 ExtJS 构建我的 Web UI，我喜欢他们的 MVC 架构。我打算在 ASP.NET MVC 中将所有业务逻辑作为 UI 和数据库之间的中间层，使用 XML 或 JSON 作为两者之间的标准数据格式。现在，ASP.NET MVC 也可以通过与 ExtJS 集成来生成 UI。您是否认为这种集成是一个好的架构决策，即关注点的清晰分离和易于维护/理解？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T12:14:02.227

这可能不是您要寻找的答案，但看起来没有那么多人去使用 ASP.NET + ExtJs MVC 架构。所以我会告诉你我们是如何做到的：

我们最初计划使用 MS SQL Server + ASP.NET + Silverlight 开发 Web 应用程序。但是感谢上帝，在最后一刻决定改用前端的 ExtJs。

所以目前我们有 MS SQL Server + Entity Framework + ASP.NET (有点 MVC) + ExtJs。

我希望在 EF 和 ASP.NET 中拥有尽可能多的业务逻辑，但事实证明并非如此。我们在 EF 中确实有一些服务器端过滤（当用户无权访问全套数据时），以及几乎所有与用户身份验证/注册相关的内容。

然而，很多与将业务逻辑绑定到 UI 相关的代码都进入了 ExtJS 控制器。以及一些客户端验证和其他一些东西。

如果您感兴趣，我很乐意回答任何更具体的问题。

# xml - 如何通过遍历xslt中另一个标签的属性来创建标签

> ID：10925758
> 
> 赞同：3
> 
> 时间：2012-06-07T04:40:14.730
> 
> 标签：xml, xslt

输入 xml：

```
<content>
    <link>
        <text>sign on</text>
        <trackableReference local="/PUBLIC_WEB_URL" title=""/>
    </link>
</content> 
```

输出xml：

```
<content>
    <a id="mylink" href="PUBLIC_WEB_URL" title="">sign on</a>
</content> 
```

xslt 试过了，它适用于这个：

1)

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>
    <xsl:template match="content">
        <content>
            <xsl:apply-templates/>
        </content>
    </xsl:template>
    <xsl:template match="*[name()='link']">
        <a id="mylink">
            <xsl:attribute name="href"><xsl:value-of select="trackableReference/@local"/></xsl:attribute>
            <xsl:attribute name="title"><xsl:value-of select="trackableReference/@title"/></xsl:attribute>
            <xsl:value-of select="text"/>
        </a>
    </xsl:template>
</xsl:stylesheet> 
```

2)

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>
    <xsl:template match="content">
        <content>
            <xsl:apply-templates/>
        </content>
    </xsl:template>
    <xsl:template match="*[name()='link']">
        <a id="mylink">
            <xsl:attribute name="href">
                <xsl:for-each select="child::*">
                    <xsl:choose>
                        <xsl:when test="name()='trackableReference'">
                            <xsl:value-of select="@local"/>
                        </xsl:when>
                    </xsl:choose>
                </xsl:for-each>
            </xsl:attribute>
            <xsl:attribute name="title">
                <xsl:for-each select="child::*">
                    <xsl:choose>
                        <xsl:when test="name()='trackableReference'">
                            <xsl:value-of select="@title"/>
                        </xsl:when>
                    </xsl:choose>
                </xsl:for-each>
            </xsl:attribute>
            <xsl:for-each select="child::*">
                <xsl:choose>
                    <xsl:when test="name()='text'">
                        <xsl:value-of select="."/>
                    </xsl:when>
                </xsl:choose>
            </xsl:for-each>
        </a>
    </xsl:template>
</xsl:stylesheet> 
```

但是我有一个场景，我必须在模板中创建一些全局变量，其值将根据遍历的子节点动态修改。示例考虑上面在这种情况下修改的模板

```
<xsl:template match="*[name()='link']">
    <xsl:variable name="x1"/>
    <xsl:variable name="x2"/>
    <xsl:variable name="x3"/>
    <xsl:for-each select="child::*">
        <xsl:choose>
            <xsl:when test="name()='trackableReference'">
                <xsl:value-of select="@local"/>
                <xsl:value-of select="@title"/>
            </xsl:when>
            <xsl:when test="name()='text'">
                <xsl:value-of select="."/>
            </xsl:when>
        </xsl:choose>
    </xsl:for-each>
    <a id="mylink">
        <xsl:attribute name="href"><xsl:value-of select="$x1"/></xsl:attribute>
        <xsl:attribute name="title"><xsl:value-of select="$x2"/></xsl:attribute>
        <xsl:value-of select="$x3"/>
    </a>
</xsl:template> 
```

这里

*   `x1`变量应使用从 中选择的值`@local`，
*   `x2`变量应使用从 中选择的值`@title`，
*   `x3`变量应该使用从`'text'`节点中选择的值。

所以我想让这些在顶部声明的变量分配有从遍历的子节点中提取的值。我被困在这里，无法前进。

任何人都可以解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T05:03:08.443

不知道为什么必须使用变量，但这里有一个例子：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="content">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="link">
        <xsl:variable name="x1" select="trackableReference/@local"/>
        <xsl:variable name="x2" select="trackableReference/@title"/>
        <xsl:variable name="x3" select="text"/>
        <a id="mylink" href="{$x1}" title="{$x2}">          
            <xsl:value-of select="$x3" />           
        </a>        
    </xsl:template>

</xsl:stylesheet> 
```

如果你真的不需要变量，你可以这样做：

```
<xsl:template match="link">
    <a id="mylink" href="{trackableReference/@local}" title="{trackableReference/@title}">          
        <xsl:value-of select="text" />          
    </a>        
</xsl:template> 
```

另外，我注意到你说：

> 在模板中创建一些全局变量，其值将被动态修改

这是不可能的。变量一旦设置就不能改变值。

# css - 为什么我的 div 彼此垂直间隔？

> ID：10925759
> 
> 赞同：-1
> 
> 时间：2012-06-07T04:40:30.243
> 
> 标签：css, html, spacing

所以我的问题基本上是我在一个页面上有 3 个 div，而我的中间内容 div 总是与我的页眉和页脚 div 间隔大约 50px。

为什么会发生这种分离？我没有在 css 文件中指定任何边距。

阿马尔

编辑：这是css文件的代码：

```
 @-webkit-keyframes showBody{
        from { opacity: 0; }
        to   { opacity: 1;  }
    }

    body { -webkit-animation: showBody 3s; position:relative; background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#00CC00), to(#24C98D));  height: 100%; margin: 0; background-repeat: no-repeat;
        background-attachment: fixed; }
    #links li {list-style: none; display: inline; margin-right: 30px;}
    a {text-decoration: none;}
    #header { border-top-left-radius: 25px ; border-top-right-radius: 25px; background-color: #FFF; margin-top: 0px; margin-left: auto; margin-right: auto; width:1100px; height: 60px;border-top: 1px solid; border-left: 1px solid; border-right: 1px solid;}
    #navmenu {height: 34px; width: auto; position: relative; left: 100px; top: -25px; }
    #contentArea { background-color: #FFF; border-left: 1px solid; border-right: 1px solid; width: 1100px; margin-right: auto; margin-left: auto;}
    #footer {border-bottom-left-radius: 20px 20px; border-bottom-right-radius: 20px 20px; background-color: #F00; margin-left: auto; margin-right: auto; width:1100px; height: 100px; border-left: 1px solid; border-right: 1px solid; border-bottom: 1px solid; }
    #links {width: 1100px; background-color: #FFF; float: top; border-bottom: 1px solid;}
    #links li {list-style: none; display: inline; margin-right: 30px;}
    #copyrightinfo {width: 1100px; }
    #navmenu {float: top; margin-top: 0px;}
    #container {border-radius: 

20px;} 
```

这是html文件的代码：

```
<!DOCTYPE html>
<html>
<head>
    <link type="text/css" href="css/pagestyle.css" rel="stylesheet"/>
    <link type="text/css" href="css/navmenustyle.css" rel="stylesheet" />

</head>
<body>
    <div id="container">
        <div id="header">
            <div id="logo">
            </div>
            <div id="navmenu">

            <ul id="frodoNav">
               <li><a href="#" title="Home">Home</a></li>
                <li><a href="#" title="About">About</a></li>
                <li><a href="#" title="Social">Social</a></li>
                <li><a href="#" title="Reviews">Reviews</a></li>
                <li><a href="#" title="Special Stories">Special Stories</a></li>
                <li><a href="#" title="Travel With Kids">Travel With Kids</a></li>
                <li><a href="#" title="Support">Support</a></li>        
            </ul>

            </div>
        </div>
        <div id="contentArea" style="clear: both;">
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam pharetra odio vel tellus tempus eget malesuada dui venenatis. In hac habitasse platea dictumst. Ut eu sagittis nisl. Nulla lacinia mattis turpis non tincidunt. Quisque sodales adipiscing libero et consectetur. Donec lectus lacus, consequat et consectetur non, iaculis a urna. Maecenas arcu lacus, luctus at gravida aliquet, varius ac purus. Curabitur varius sodales libero nec semper. Curabitur quis dolor a orci condimentum placerat. Sed sed ipsum nec metus tempus aliquam eu ut metus. Suspendisse arcu magna, dictum ut tristique quis, malesuada at lorem. Nam feugiat dolor quis mauris feugiat blandit.

Phasellus sed risus turpis, ut aliquam felis. Nullam auctor dictum tempor. Vivamus diam lectus, posuere eget viverra sit amet, condimentum nec augue. Pellentesque tellus lectus, scelerisque mollis viverra sit amet, ullamcorper id elit. Cras eu nisi a felis placerat pulvinar. Mauris sit amet ipsum leo. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.

Aliquam quis nulla nunc, quis pellentesque arcu. Proin nulla dolor, porta a malesuada ut, hendrerit eget velit. Ut vel molestie lectus. Nam volutpat scelerisque quam, a pharetra nibh cursus pellentesque. Duis ut magna imperdiet nibh gravida sodales vitae sit amet felis. Phasellus vitae velit lacus. Aenean a nisl ut est interdum cursus. Aliquam eu quam risus. Mauris sed nisi non justo tincidunt semper. Cras ornare porta elit, sed vulputate elit rhoncus quis. Aenean egestas metus vel leo pellentesque hendrerit. Suspendisse porta nulla nec erat sagittis vulputate. Fusce dui eros, imperdiet ut viverra ac, tempor ut tortor.

Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Curabitur non tristique urna. Fusce posuere enim ac nulla semper quis ultrices purus pulvinar. Aenean non eros et erat interdum dictum. Donec sodales porttitor est in lobortis. Proin tellus neque, commodo sed vulputate at, rutrum eget dui. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Fusce feugiat laoreet orci eget euismod. Sed dui ipsum, sodales vitae egestas vel, feugiat a enim. Sed in pharetra odio. Mauris pretium, justo et porttitor semper, enim nulla aliquet erat, non imperdiet augue nisl ut nisi. Proin posuere, nunc non dictum faucibus, tortor massa dictum felis, ut pulvinar dolor erat ac diam. In mollis tincidunt nunc, ut luctus eros cursus at. Etiam pellentesque vehicula magna, sed bibendum sem convallis quis.

Donec sollicitudin, nulla non luctus vestibulum, dui mauris malesuada elit, nec pellentesque magna diam eget sapien. Suspendisse fermentum leo ut dolor adipiscing fringilla. Mauris in condimentum magna. Integer rutrum sem ut metus lacinia a tincidunt felis laoreet. Cras blandit, orci imperdiet tincidunt egestas, erat mauris mattis purus, quis ullamcorper massa urna at sapien. Pellentesque ornare velit mattis purus pretium congue tempor enim porta. Suspendisse ac feugiat ante. Nullam vel lectus sed magna consectetur molestie. Maecenas urna turpis, ultricies non lacinia in, porta vel lacus. Vivamus elit nisl, laoreet ut molestie blandit, vestibulum non arcu. Sed condimentum ante vitae diam ornare rutrum. Sed eget ipsum eu ante posuere placerat nec a orci. Integer ut arcu sit amet arcu eleifend tincidunt. Suspendisse eget pharetra enim.</p>
     </div>
     <div id="footer">
     <div id="footer-nav">
     </div>
     </div>
      </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T04:44:05.570

我一直有这个问题，这是因为你的 div 之间的文本节点。将 float:left 添加到您的 div 中，浏览器应该忽略文本节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T04:46:03.233

最好有代码供我们查看。但是，它可能在其他地方使用默认样式。您可以尝试将边距/填充设置为零。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-10T06:07:04.227

如果有人感兴趣，这是我对问题的解决方案。

```
html,
*
{
    border      : 0;
    box-sizing  : border-box;
    margin      : 0;
    padding     : 0;
}

@-webkit-keyframes showBody
{
    from { opacity : 0; }
    to   { opacity : 1; }
}

a 
{
    text-decoration : none;
}

body 
{
    -webkit-animation     : showBody 3s;
    background-attachment : fixed;
    background-image      : -webkit-gradient(linear, 0% 0%, 0% 100%, from(#00CC00), to(#24C98D));
    background-repeat     : no-repeat;
    height                : 100%;
    position              : relative;
}

#container
{
    border-radius : 20px;
}

#contentArea
{
    background-color : #FFF;
    border-left      : 1px solid;
    border-right     : 1px solid;
    clear            : both;
    margin-left      : auto;
    margin-right     : auto;
    width            : 1100px;
}

#copyrightinfo
{
    width : 1100px;
}

#footer
{
    background-color           : #F00;
    border-bottom              : 1px solid;
    border-bottom-left-radius  : 20px 20px;
    border-bottom-right-radius : 20px 20px;
    border-left                : 1px solid;
    border-right               : 1px solid;
    height                     : 100px;
    margin-left                : auto;
    margin-right               : auto;
    width                      : 1100px;
}

#header
{
    background-color        : #FFF;
    border-bottom           : 1px solid;
    border-left             : 1px solid;
    border-right            : 1px solid;
    border-top              : 1px solid;
    border-top-left-radius  : 25px;
    border-top-right-radius : 25px;
    height                  : 60px;
    margin-left             : auto;
    margin-right            : auto;
    text-align              : center;
    width                   : 1100px;
}

#header:before
{
    content        : '';
    display        : inline-block;
    height         : 100%; 
    vertical-align : middle;
}

#links
{
    background-color : #FFF;
    border-bottom    : 1px solid;
    float            : top;
    width            : 1100px;
}

.menu-item
{
    display      : block;
    float        : left;
    margin-left  : 30px;
    margin-right : 30px;
}

#navmenu
{
    display        : inline-block;
    vertical-align : middle;
}
```

```
<!DOCTYPE html>
<html>
    <head>
        <link href = "css/Example.css"
              rel  = "stylesheet"
              type = "text/css"
        />
    </head>

    <body>
        <div id = "container">
            <div id = "header">
                <div id = "navmenu">
                    <div class = "menu-item"><a href = "#" title = "Home">Home</a></div>
                    <div class = "menu-item"><a href = "#" title = "About">About</a></div>
                    <div class = "menu-item"><a href = "#" title = "Social">Social</a></div>
                    <div class = "menu-item"><a href = "#" title = "Reviews">Reviews</a></div>
                    <div class = "menu-item"><a href = "#" title = "Special Stories">Special Stories</a></div>
                    <div class = "menu-item"><a href = "#" title = "Travel With Kids">Travel With Kids</a></div>
                    <div class = "menu-item"><a href = "#" title = "Support">Support</a></div>
                </div>
            </div>

            <div id = "contentArea">
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam pharetra odio vel tellus tempus eget malesuada dui venenatis. In hac habitasse platea dictumst. Ut eu sagittis nisl. Nulla lacinia mattis turpis non tincidunt. Quisque sodales adipiscing libero et consectetur. Donec lectus lacus, consequat et consectetur non, iaculis a urna. Maecenas arcu lacus, luctus at gravida aliquet, varius ac purus. Curabitur varius sodales libero nec semper. Curabitur quis dolor a orci condimentum placerat. Sed sed ipsum nec metus tempus aliquam eu ut metus. Suspendisse arcu magna, dictum ut tristique quis, malesuada at lorem. Nam feugiat dolor quis mauris feugiat blandit.

                Phasellus sed risus turpis, ut aliquam felis. Nullam auctor dictum tempor. Vivamus diam lectus, posuere eget viverra sit amet, condimentum nec augue. Pellentesque tellus lectus, scelerisque mollis viverra sit amet, ullamcorper id elit. Cras eu nisi a felis placerat pulvinar. Mauris sit amet ipsum leo. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.

                Aliquam quis nulla nunc, quis pellentesque arcu. Proin nulla dolor, porta a malesuada ut, hendrerit eget velit. Ut vel molestie lectus. Nam volutpat scelerisque quam, a pharetra nibh cursus pellentesque. Duis ut magna imperdiet nibh gravida sodales vitae sit amet felis. Phasellus vitae velit lacus. Aenean a nisl ut est interdum cursus. Aliquam eu quam risus. Mauris sed nisi non justo tincidunt semper. Cras ornare porta elit, sed vulputate elit rhoncus quis. Aenean egestas metus vel leo pellentesque hendrerit. Suspendisse porta nulla nec erat sagittis vulputate. Fusce dui eros, imperdiet ut viverra ac, tempor ut tortor.

                Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Curabitur non tristique urna. Fusce posuere enim ac nulla semper quis ultrices purus pulvinar. Aenean non eros et erat interdum dictum. Donec sodales porttitor est in lobortis. Proin tellus neque, commodo sed vulputate at, rutrum eget dui. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Fusce feugiat laoreet orci eget euismod. Sed dui ipsum, sodales vitae egestas vel, feugiat a enim. Sed in pharetra odio. Mauris pretium, justo et porttitor semper, enim nulla aliquet erat, non imperdiet augue nisl ut nisi. Proin posuere, nunc non dictum faucibus, tortor massa dictum felis, ut pulvinar dolor erat ac diam. In mollis tincidunt nunc, ut luctus eros cursus at. Etiam pellentesque vehicula magna, sed bibendum sem convallis quis.

                Donec sollicitudin, nulla non luctus vestibulum, dui mauris malesuada elit, nec pellentesque magna diam eget sapien. Suspendisse fermentum leo ut dolor adipiscing fringilla. Mauris in condimentum magna. Integer rutrum sem ut metus lacinia a tincidunt felis laoreet. Cras blandit, orci imperdiet tincidunt egestas, erat mauris mattis purus, quis ullamcorper massa urna at sapien. Pellentesque ornare velit mattis purus pretium congue tempor enim porta. Suspendisse ac feugiat ante. Nullam vel lectus sed magna consectetur molestie. Maecenas urna turpis, ultricies non lacinia in, porta vel lacus. Vivamus elit nisl, laoreet ut molestie blandit, vestibulum non arcu. Sed condimentum ante vitae diam ornare rutrum. Sed eget ipsum eu ante posuere placerat nec a orci. Integer ut arcu sit amet arcu eleifend tincidunt. Suspendisse eget pharetra enim.</p>
        </div>

        <div id = "footer">
            <div id = "footer-nav">
            </div>
        </div>
    </body>
</html>
```

通过将以下代码插入到 CSS 文件中，解决了 div 间距的问题...

```
*
{
    border      : 0;
    box-sizing  : border-box;
    margin      : 0;
    padding     : 0;
} 
```

这些样式仅使用 . 应用于所有元素`*`。通过将所有元素的`border`,`margin`和`padding`属性设置为`0`，然后在需要的地方覆盖 a`id`或 a`class`中的该值，您可以防止不希望的默认出现`border`,`margin`和 / 或`padding`发生，例如这里的主要问题。

此处使用的行将`box-sizing : border-box;`所有`border`,`margin`和`padding`每个元素的定义放在该`width`元素的 中，从而使页面布局更加简单。

我还将列表 ( `li`) 替换为多个`div`'，这使得开发菜单变得更加容易。列表非常适合呈现文本列表，尤其是当您想要一些简单的项目符号时，但它们不太适合呈现其他项目组，无论是文本还是其他。对于其他组，请改用`div`'s。

我将菜单项放在 contains 中`div` `navmenu`，并将它们水平居中。然后，我能够使用 Fadi 的解决方案版本将它们垂直居中，该解决方案来自[如何在 div 中以可变高度垂直居中内容？](https://stackoverflow.com/questions/59309/how-to-vertically-center-content-with-variable-height-within-a-div).

我还从 CSS 文件中删除了一些冗余/重复的代码，`style`将 HTML 文件中的 a 移到 CSS 文件中，并改进了文件的总体布局和呈现方式。

如果您有任何意见或问题，请随时提出。

# sql - 如何用浮点数显示尾随零

> ID：10925765
> 
> 赞同：2
> 
> 时间：2012-06-07T04:41:10.623
> 
> 标签：sql, sql-server, tsql, sql-server-2000

使用 SQL Server 2000

使用浮点数时不显示零。

询问

```
insert into table1 values ('01.10')
insert into table1 values ('10.50')
insert into table1 values ('02.02') 
```

输出

```
Values (datatype is float)

01.1
10.5
02.02
... 
```

如何也显示最后一个零

预期产出

值（数据类型为浮点数）

```
01.10
10.50
02.02
... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T04:48:30.280

你为什么使用浮点数？我发现在很多情况下，人们在不了解 FLOAT 的局限性或特殊性时会使用它。为了存储具有 2 个小数位的十进制值，我会使用小数。

```
CREATE TABLE #floob(f FLOAT, d DECIMAL(10,2));

INSERT #floob SELECT 2.02, 2.02;
INSERT #floob SELECT 2.7, 2.7;
INSERT #floob SELECT 1.5, 1.5;

SELECT f, f_as_d = CONVERT(DECIMAL(10,2), f), d FROM #floob; 
```

结果：

```
f        f_as_d   d
------   ------   ------
2.02     2.02     2.02
2.7      2.70     2.70
1.5      1.50     1.50 
```

# windows - 如何关闭同一连接上的多台 PC 访问的 VB.NET 应用程序？

> ID：10925778
> 
> 赞同：1
> 
> 时间：2012-06-07T04:42:21.973
> 
> 标签：windows, vb.net

我有一个在 VB.NET 中制作的应用程序。我把它放在我办公室的服务器上，其他所有用户都通过网络连接访问它。我只将驱动器映射到他们的计算机上，然后处理应用程序的快捷方式。我的问题是我可以关闭所有使用单个代码运行的应用程序吗？有时我需要先关闭所有应用程序，然后才能对应用程序执行任何操作（例如，修改报告等）。我目前的方法仍然是手动的，它是调用每个人关闭他们的应用程序或到处跑，我自己关闭应用程序。感谢您的时间...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T04:59:24.860

ClickOnce 部署将为每个用户制作 EXE 的本地副本。

否则，在您的应用程序中放置一个计时器来检查文件，例如 SHUTDOWN.TXT。如果 SHUTDOWN.TXT 存在，则程序将关闭并且在删除 SHUTDOWN.TXT 文件之前不会重新启动。

# javascript - 使用 javascript 获取 html 源代码，包括样式

> ID：10925784
> 
> 赞同：1
> 
> 时间：2012-06-07T04:43:10.780
> 
> 标签：javascript

我正在尝试获取网站的 html 源代码，包括由 css 设置的元素的所有样式。所以基本上是页面的渲染html，这样如果一个元素被隐藏，它就有`style = display:none`

使用以下函数时，css 添加的样式属性不包含在字符串中。

```
document.getElementsByTagName('html')[0].innerHTML; 
```

或者

```
inDocument.documentElement.innerHTML; 
```

有没有办法包含css属性？

谢谢，詹姆斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T04:52:54.430

这将帮助您[返回计算的元素样式以伪克隆该元素的 jQuery CSS 插件？](https://stackoverflow.com/questions/1004475/jquery-css-plugin-that-returns-computed-style-of-element-to-pseudo-clone-that-el)

还要检查这里提到的 jQuery 克隆功能[http://api.jquery.com/clone/](http://api.jquery.com/clone/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T05:19:14.433

我不认为 jQuery 是获取 HTML 源代码所必需的。只需使用

```
document.documentElement.outerHTML
```

这也将包括 CSS 属性。

# php - 使用持续集成和发布管理工具会对 PHP 项目有益吗？

> ID：10925785
> 
> 赞同：0
> 
> 时间：2012-06-07T04:43:10.937
> 
> 标签：php, continuous-integration, qa, sdlc

我在一个非常有用的.NET 项目中使用了 CI，现在我想知道部署 CI 软件是否对 PHP 项目有意义。项目中没有“构建”，但在每次提交时运行系统范围的单元测试可能是有益的。对此有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T13:28:40.630

我认为这绝对有道理。

持续集成工具可以为您提供有关质量的反馈。[对“构建](http://blogs.urbancode.com/continuous-integration/continuous-integration-was-fowler-wrong/)”的强调是错误的，并且主要是来自“它可以编译吗？”的语言的历史产物。是一项非常重要的质量检查。去吧！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T20:11:16.917

毫无疑问！我经营一家[持续集成/部署公司](https://circleci.com)，我们有很多 PHP 用户。通常，他们在每次推送后使用 PHPunit 运行测试。

有趣的是，我们经常将测试称为“构建”，因为这是 CI 圈子中的传统说法，即使没有构建。除非您在测试结束时构建 phar...

# visual-studio-2008 - 使用 AnkhSVN 在 GitHub 中提交

> ID：10925787
> 
> 赞同：2
> 
> 时间：2012-06-07T04:43:12.027
> 
> 标签：visual-studio-2008, svn, github, ankhsvn

我开始这个讨论，因为我想学习如何在 github 或 codeplex 中上传我的项目。

*   我正在使用 Visual Studio 2008 SP！和.NET 3.5。
*   我已经在我的机器上安装了 AnkhSVN。
*   我在 Github 上有一个帐户。
*   我用我的项目名称在 github 上创建了一个存储库。

### 所以这里是问题：

1.  我正在开始我的项目，我在 Visual Studio 文件菜单中按下： `Subversion -> Add Solution to Subversion...`
2.  在选择存储库对话框中，我粘贴了 github 上存储库的 url。当
3.  似乎一切都是正确的，因为对话框显示了存储库的默认结构，但是当我按“确定”时，会出现一条消息：

> 您的多个本地资源之一已过时。在继续操作之前，您需要运行更新。

我的问题是：

1.  如何修复这个问题？
2.  我如何在任何网站上使用 ankhsvn 上传我的项目。
3.  是否有更好的 GUI 软件替代默认 Git 客户端。
4.  用 Visual Studio 项目控制 svn 的最佳方式是什么。

如果我不清楚，我可以上传图片以及我如何得到这个错误的步骤。

感谢您回答这个问题。对我来说，任何人都可以回答我发布的任何问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T04:48:54.600

我使用命令行。这个[教程](http://git-scm.com/book)很受好评。您还可以尝试[Git Extensions](http://code.google.com/p/gitextensions/)，它是集成到 Visual Studio 中的 GUI。

虽然 Github 对 SVN 协议有[实验性的支持](https://github.com/blog/966-improved-subversion-client-support)，但我不推荐它用于任何严重的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T09:30:47.943

要使用带有 Github 的 subversion 客户端，支持链接应该有助于 [https://help.github.com/articles/support-for-subversion-clients](https://help.github.com/articles/support-for-subversion-clients)

除此之外，我建议您使用 Github 的 windows 客户端或“SourceTree”并创建一个 git 存储库而不是 subversion 存储库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-24T01:36:17.617

我知道这是一个非常古老的问题，但回答这个问题以防其他人试图完成这项工作。我必须让这个工作，这对我有用。

1.  在 github 中创建一个 repo（使用自述文件等初始化它）。或者使用现有的

2.  从存储库页面，复制 Subversion 签出 URL（确保这是 Subversion 签出 URL，而不是 HTTPS 或 SSH URL）

3.  打开/创建您要添加的项目并选择 File -> SubVersion -> Add Solution to Subversion

4.  在以下窗口中，输入您在步骤 2 中复制的存储库 URL

5.  选择您创建的 Subversion Repository 的主干，然后单击确定。

而已。您现在可以使用 anknsvn 从 Visual Studio 中的挂起更改窗口签入和签出 github 存储库

# ruby-on-rails - 我是否需要构建 node.js 应用才能使用 trigger.io？

> ID：10925789
> 
> 赞同：1
> 
> 时间：2012-06-07T04:43:47.177
> 
> 标签：ruby-on-rails, node.js, trigger.io

我是一个 Rails 菜鸟，对使用 trigger.io 进行移动应用程序开发非常感兴趣。

我看到“为 web 构建”功能创建了一个 node.js 应用程序，我很想知道这是否意味着我的后端应用程序必须是 node，而不是 Rails。我没有节点经验，如果可以的话，我想利用我拥有的 Rails 技能。

感谢您提供任何信息/资源指针，帮助我更好地了解如何规划我的项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T09:07:12.727

不，Trigger.io 根本不需要您编写任何后端代码，如果您希望拥有服务器端逻辑，您可以使用 Rails 或任何您喜欢的框架。

我们提供了一个 node.js 代理作为我们的“构建到 Web”功能的一部分，因此如果您想使用该功能，您需要在某个地方托管 node.js 以及拥有您的 Rails 后端。我们与 Heroku 紧密集成，因此只需运行“forge package web”即可进行部署。

# c# - Visual Studio“生成方法存根”的模板

> ID：10925791
> 
> 赞同：4
> 
> 时间：2012-06-07T04:44:05.230
> 
> 标签：c#, visual-studio, methods, code-snippets, stub

我研究了 Visual Studio 中的方法存根生成器，发现它运行了一个代码片段。

我以前从未使用过代码片段，并且想知道是否可以在生成的方法上方添加注释。我找到了它使用的片段，并阅读了它，但这对我来说都很陌生。我希望不是 VS 创建这样的存根：

```
 private string SetString(int p)
    {
        throw new NotImplementedException();
    } 
```

我可以得到这样的东西：

```
 /// <summary>
    /// 
    /// </summary>
    /// <param name="p"></param>
    /// <returns></returns>
    private string SetString(int p)
    {
        throw new NotImplementedException();
    } 
```

我意识到它只会节省一点时间，但它也是一个学习曲线。

任何帮助都会很棒。

PS 我已经能够编辑“C:\Program Files\Microsoft Visual Studio 10.0\VC#\Snippets\1033\Refactoring\MethodStub.snippet”，以便在创建存根时，它在开头包含三个斜杠，但这不会调用任何插入 XML 框架的方法。

有谁知道当您输入三个斜杠时 Visual Studio 如何插入该骨架？

如果你感兴趣。要输入三个斜线，我只是将上述文件中的这两行更改为：

```
<![CDATA[$signature$ 
```

至：

```
<![CDATA[///
$signature$ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T16:58:18.220

如果您想快速生成方法注释块，请查看 ghostdoc。

[http://submain.com/products/ghostdoc.aspx](http://submain.com/products/ghostdoc.aspx)

快速`ctrl + shift + d`了解您的方法会产生

```
/// <summary>
/// Sets the string.
/// </summary>
/// <param name="p">The p.</param>
/// <returns></returns>
private string SetString(int p)
{
    throw new NotImplementedException();
} 
```

请注意，在生成摘要和参数文本时，它会考虑您的方法名称和参数。此外，如果您有一个现有的方法注释块，请向该方法添加一个参数，再次生成，它不会修改任何已经存在的文本，只需添加您的新参数。惊人的。

# java - 如何将arraylist转换为数组？

> ID：10925808
> 
> 赞同：4
> 
> 时间：2012-06-07T04:46:39.740
> 
> 标签：java, arrays, spring, collections

我在 Java 中有这个 ArrayList -

```
List<Map<String, Object>> list = new ArrayList<Map<String, Object>>(); 
```

要将其转换为数组，我调用了`list.toArray()`方法，但它返回`Object[]`. 这不是我想要的。我想要`Map<String, Object>[]`。

我知道`List.toArray(T[] a);` 它不适用于参数化类型。

Spring框架中batchUpdate方法的方法签名是这样的——

```
int[] org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.batchUpdate(String sql, Map<String, ?>[] batchValues) 
```

如果无法创建 Map 对象数组，为什么 Spring 使用它？那么我们应该如何使用这种方法呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T05:10:23.483

简而言之，您不能制作具体参数化类型的数组。[这](http://www.angelikalanger.com/GenericsFAQ/FAQSections/ParameterizedTypes.html#FAQ104)是对正在发生的事情的一个很好的解释。Spring类型与说的基本相同`Map batchValues`。参数类型仅用于文档。Java 类型系统中的这个巨大漏洞是对性能的折衷。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T04:56:46.677

试试这个，

```
 Map<String,Object>[] ar=list.toArray(new HashMap[list.size()]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T04:54:33.163

你可以这样尝试：

```
Map<String, Object> [] mp = list.toArray(new HashMap[list.size()]); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T04:58:34.013

这样做：

```
Map<String, Object> [] mp = new HashMap[list.size()]; 
list.toArray(mp); 
```

这个答案有效。我测试了它。

我的完整测试代码如下：

```
import java.util.*;
public class Test {

    public static void main (String [] args) {
        Map<String, Object> map = new HashMap<String, Object>();
        map.put("Hello", "World");
        ArrayList<Map<String, Object>> list = new ArrayList<Map <String, Object>>();
        list.add(map);

        Map<String, Object> [] mp = new HashMap[list.size()]; 
        list.toArray(mp);   
        System.out.println(mp[0]);    // prints out {Hello=World}
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T04:59:12.190

HashMap[] map = list.toArray(new HashMap[0]);

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-06-07T04:55:28.250

你不能这样做。

List.toArray(T[] a) 是您唯一的选择，但它不适用于参数化类型，因为它们不会在运行时保留。

# dynamics-crm - 不允许一个以上的用户处理队列项

> ID：10925814
> 
> 赞同：0
> 
> 时间：2012-06-07T04:47:28.460
> 
> 标签：dynamics-crm, dynamics-crm-2011

我想强制超过 1 个用户不应该在 QueueItem 上工作。设置 QueueItem.WorkerId 对此有何帮助？设置此属性时，后台发生了什么？我们如何在 CRM 2011 中强制执行上述限制。

目前，即使我通过选择 WorkOn 操作设置了 WorkerId 属性，其他用户仍然可以打开 QueueItem 并对其进行处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:45:06.303

我的直觉是挑战您的要求（例如：如果处理该项目的用户在项目解决之前离开公司 - 会发生什么？） - 但我假设您的问题纯粹是技术问题。

这是我的建议（未经测试 - 你需要做一些工作来证明哪条路线是正确的）。我最初的假设是队列项目是根据`queueid`属性分配给用户或团队的，但正如您所指出的，该`workerid`属性可能是更可能的候选者。

## 假设 WorkerId 是驱动程序字段：

我假设`workerid`属性中没有默认值。您将需要编写一个针对实体消息`Pre-Operation`阶段注册的插件。如果该属性*尚未*设置（从 Pre-Entity 图像中获取），则允许操作继续。如果已设置，则向用户*引发*异常，通知他们该项目无法重新分配。您可能需要针对 the 的消息注册您的插件。`Update``queueitem``workerid`*`workerid`*`Create``queueitem`**

 **## 假设 QueueId 是驱动程序字段：

向`queueitem`实体添加一个新属性，称为“原始队列”。然后编写一个针对实体`AddToQueue`消息注册的插件`queueitem`（我最初认为这是当用户单击“工作”按钮时触发的消息 - 我认为将项目移动到用户队列，但我可能是错误的）。如果您的“原始队列”属性*未*设置，则将其设置为旧队列 ID（从 Pre-Entity 图像中获取）并允许重新分配到另一个队列继续进行。如果“原始队列”项*已*设置，则向用户引发异常，通知他们无法重新分配该项目。您可能需要`Create`根据`queueitem`太（我不确定，未经测试，此时将传入队列项分配给队列）。**

# c# - C#中的帕斯卡字符串

> ID：10925815
> 
> 赞同：1
> 
> 时间：2012-06-07T04:47:45.537
> 
> 标签：c#, string, pascal, c-strings

我正在研究 C# 中的音频库，并且正在研究 WAVE 文件格式 ATM。根据我正在使用的信息量很大的[网站，WAVE 使用 Pascal 风格的字符串。](http://www.sonicspot.com/guide/wavefiles.html)我已经在谷歌上搜索了 20 多分钟，并且只提出了一个[C 到 Pascal 转换器](http://www.dreamincode.net/code/snippet2490.htm)。

我知道 Pascal 和 C 字符串如何比较（C 代码）：

```
char *cStr = "Test"; // C - produces {'T', 'e', 's', 't', '\0'}
char pascal[] = {4, 'T', 'e', 's', 't'}; // Pascal 
```

如果有帮助，我正在使用它`System.IO.BinaryReader`来解析文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T05:01:07.293

好吧，如果您使用`BinaryReader`它应该很容易。

```
var size = rd.ReadByte();
var body = rd.ReadBytes(size);
var text = System.Text.Encoding.ASCII.GetString(body); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T04:52:16.193

Pascal 字符串背后的基本思想是第一个字节保存字符串长度，后续字节保存字符串数据（将字符串限制为 255 个字符）。

我将使用字节数组并使用 C# 中的字符串到字节转换方法来填充它。请参阅下面问题的已接受答案，以了解如何将 C# 字符串转换为字节数组，并记住将所有内容偏移 1 个数组位置，以便为第 0 个字节留出空间，保持字符串长度，并记住用第 0 个字节填充实际的字符串长度。检查您的输入字符串长度以确保它不超过 255 个字符 :-)

[如何在不手动指定编码的情况下获得 C# 中字符串的一致字节表示？](https://stackoverflow.com/questions/472906/net-string-to-byte-array-c-sharp)

# prototypejs - 使用原型 js 的 NetworkError

> ID：10925824
> 
> 赞同：0
> 
> 时间：2012-06-07T04:49:10.590
> 
> 标签：prototypejs, http-status-code-404

我使用了一个使用原型 js 的插件，它工作正常，但问题是它正在请求其他一些 js 文件并在 firebug 控制台中向我显示一些 NetworkError。该插件工作正常，因此我不需要包含其他 js 文件。有什么办法可以消除这些错误吗？这就是我在萤火虫控制台中看到的

```
"NetworkError: 404 Not Found - http://example.com/js/builder.js"
"NetworkError: 404 Not Found - http://example.com/js/effects.js"
"NetworkError: 404 Not Found - http://example.com/js/controls.js"
"NetworkError: 404 Not Found - http://example.com/js/sound.js"
"NetworkError: 404 Not Found - http://example.com/js/slider.js"
"NetworkError: 404 Not Found - http://example.com/js/dragdrop.js"
"NetworkError: 404 Not Found - http://example.com/js/controls.js"
"NetworkError: 404 Not Found - http://example.com/js/slider.js"
"NetworkError: 404 Not Found - http://example.com/js/sound.js" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:18:38.293

您正在处理的网页正在尝试加载 Scriptaculous，该插件可能需要它并且您对它的引用配置不正确。

原型不依赖于脚本，反之亦然。你能告诉我插件的名字是什么吗？

**更新**

好的，据我所知，插件没有任何问题，请确保您的包含如下所示（假设您的 HTML 在同一个文件夹中）：

```
<script src="prototype.js" type="text/javascript"></script>
<script src="scriptaculous.js" type="text/javascript"></script>
<script src="dhonishow.js" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-10T05:31:39.993

我包含了`prototype.js`来自`scriptaculous.js`谷歌 CDN（[https://developers.google.com/speed/libraries/devguide](https://developers.google.com/speed/libraries/devguide)）的和，现在它没有显示任何错误，并且由于这些 js 是 gzip 压缩的，因此插件的加载速度比以前更快。无论如何，感谢您花时间回答这个问题。

# ruby-on-rails-3 - 这个 <%= stylesheet_tag %> 有什么问题？

> ID：10925827
> 
> 赞同：0
> 
> 时间：2012-06-07T04:49:28.640
> 
> 标签：ruby-on-rails-3, heroku

这就是我所拥有的：

```
 <%= stylesheet_link_tag "application", "skeleton-v1.1", "flexslider-v1.8", "main-r7", "media-queries-r6", "sprites-r7", "theme-default-r6", font_path("http://fonts.googleapis.com/css?family=Open+Sans:400,600,400italic"), :media => "all" %> 
```

我正在尝试推送到 Heroku，这是我得到的错误：

```
Started GET "/" for XX.XXX.XX.XX at 2012-06-07 04:45:14 +0000
2012-06-07T04:45:15+00:00 app[web.1]: 
2012-06-07T04:45:15+00:00 app[web.1]: ActionView::Template::Error (Invalid CSS after "background:": expected pseudoclass or pseudoelement, was " -webkit-linear..."
2012-06-07T04:45:15+00:00 app[web.1]:   (in /app/app/assets/stylesheets/application.css)):
2012-06-07T04:45:15+00:00 app[web.1]:     15:   <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
2012-06-07T04:45:15+00:00 app[web.1]:     16:   <meta name="apple-mobile-web-app-capable" content="yes">
2012-06-07T04:45:15+00:00 app[web.1]:     17: 
2012-06-07T04:45:15+00:00 app[web.1]:     18:     <%= stylesheet_link_tag "application", "skeleton-v1.1", "flexslider-v1.8", "main-r7", "media-queries-r6", "sprites-r7", "theme-default-r6", "http://fonts.googleapis.com/css?family=Open+Sans:400,600,400italic", :media => "all" %>
2012-06-07T04:45:15+00:00 app[web.1]:     19:     <%= favicon_link_tag 'favicon.ico' %>
2012-06-07T04:45:15+00:00 app[web.1]:     20:     <%= favicon_link_tag 'apple-touch-icon.png', :rel => 'apple-touch-icon', :type => 'image/png' %>      
2012-06-07T04:45:15+00:00 app[web.1]:     21:     <%= favicon_link_tag 'apple-touch-icon-72x72.png', :rel => 'apple-touch-icon', :type => 'image/png', :sizes => '72x72' %>     
2012-06-07T04:45:15+00:00 app[web.1]:   app/views/layouts/application.html.erb:18:in `_app_views_layouts_application_html_erb__609869981572297479_34051980' 
```

我什至尝试取出`font_path`助手并仅包含 URL，但这不起作用。

想法？

PS我正在推动雪松堆栈 - 如果这很重要。

**编辑1：**

应用程序.CSS

```
/*
 *
 *= require_self
 *= require_tree .
*/ 
```

**编辑2：**

我在我的 CSS 中发现了几行`webkit-linear`......我该如何进行这项工作？我可以在短期内评论它们，但我需要它们工作。

想法？

```
background: -webkit-linear-gradient(top,  rgba(0,0,0,0) 0%,rgba(0,0,0,0.09) 100%); /* Chrome10+,Safari5.1+ */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T22:55:40.620

我不得不在我的一个样式表中注释掉这一行。

```
background: -webkit-linear-gradient(top, rgba(0,0,0,0) 0%,rgba(0,0,0,0.09) 100%); /* Chrome10+,Safari5.1+ */ 
```

我不知道真正的解决方案是什么，但这种解决方法似乎对我有用。

# c - Access to the actual member of a union by address

> ID：10925832
> 
> 赞同：1
> 
> 时间：2012-06-07T04:49:59.490
> 
> 标签：c, pointers, struct, unions

I was wondering if can be posible to access the actual member of a union by the union address and not by the `->` & `.` operators. If that is posible, is that allowed?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T04:59:12.460

you can access the memory of the union using the addressof operation `&(union)`

e.g.

```
union foo {
  int32_t bar;
  int64_t baz;
} afoo;

void * address = &afoo; 
```

But the point of a union is to allow transparent access to a 'shared' region of data that composed of different types; if you wanted `char *` access to the data, then you can use a `char *` member, and access the data in that manner.

pretending that the *address is a different type, we can use:

```
int64_t *abar = (int64_t*)address;
printf("%llu\n", *abar); 
```

# codeigniter - 带有 Codeigniter 的 jQuery ajax

> ID：10925833
> 
> 赞同：0
> 
> 时间：2012-06-07T04:50:01.887
> 
> 标签：codeigniter, jquery

JQuery 的 AJAX “.get” 方法调用控制器的（php 页面）方法，并进一步处理返回的数据……但是当我们认为它是最佳实践时，控制器只是将控制权转移到模型和视图。控制器从不返回任何内容或回显任何数据……那么我们如何支持这个论点呢？我可能错了..仍处于初始学习阶段，如果您觉得这个问题有点太天真，请原谅我:(。

一个例如。是我试图实现的 JQuery 的自动完成插件，它需要数据库中的用户名数组。一般来说，使用 CI.. 流程是查看表单 -> 控制器 -> 数据库模型（DATA） -> 控制器（DATA）-> 另一个视图......但如果我必须实现 JQuery/AJAX 方式，那么控制器将不得不输出数据，以便 AJAX 调用函数 (get) 可以获取它。正确的？

那么在不影响 MVC 范式的情况下，流程应该是怎样的呢？

问候。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T04:54:45.313

MVC 只是一种设计模式。它往往使事情变得更容易。但它是一种设计应用程序的方式，并不意味着你必须坚持它。

我使用 Codeigniter 并使用控制器来回复 ajax。在我的例子中，控制器负责接收请求，并将数据发回（就像我在调用视图或模板一样）。

不要想太多，使用你想要的，当你想要的时候，最适合你需要的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T08:03:13.967

如果您真的想坚持使用 mvc，另一个选择是拥有一个仅用于 ajax 响应的视图。

您可以让它简单地回显响应，或者`json_encode()`如果您总是使用 json 回复，您可以让它响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T17:54:29.500

正如 Nicolás 所指出的，MVC 是一种设计模式，而不是法律。

但是，您不应将 AJAX 视为*视图*，而是将其视为一种传输，一种媒介，*控制器*与*视图*或*模型*与*视图*之间通过它进行通信。因此，您的实际*视图*不再由 PHP 表示，而是由浏览器本身表示，或者更确切地说是您在其上运行的 JavaScript 代码。[您可以使用Zend JSON-RPC Server](http://framework.zend.com/manual/1.12/en/zend.json.server.html)之类的 RPC 服务器抽象出 PHP 端的 AJAX 。

另请注意，对于 Web 应用程序，Model-View-Presenter 和类似模式可能更有用，因为它保持 View 和 Presenter 之间的通信。

# c# - 从 wpf 中的 xml 文件获取属性名称的问题

> ID：10925839
> 
> 赞同：0
> 
> 时间：2012-06-07T04:50:17.540
> 
> 标签：c#, wpf

![属性](../Images/195c4e2e456e491d89749b814a5d765f.png)

我试图获取 Chandru 元素的属性，但它显示了“异常已被调用目标抛出”之类的异常。

正是我必须从上面的 xml 文件中获取值 sst5038。

这是我写的代码

```
public partial class XML_3 : Window
{
    public XML_3()
    {
        this.InitializeComponent();

        XmlDocument doc = new XmlDocument();
        doc.Load("D:/student_2.xml");

        XmlNodeList student_list = doc.GetElementsByTagName("Student");

        foreach (XmlNode node in student_list)
        {
            XmlElement student = (XmlElement)node;

            string sname = student.GetElementsByTagName("Chandru")[0].InnerText;

            string fname = student.GetElementsByTagName("FName")[0].InnerText;

            string id = student.Attributes["ID"].InnerText;

            Window.Content = sname + fname + id;
        }
    }
} 
```

请帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T05:03:26.987

应该是第一个学生

```
string id = student.GetElementsByTagName("Chandru")[0].Attributes["ID"].InnerText; 
```

对于第二个学生

```
string id = student.GetElementsByTagName("Guna")[0].Attributes["ID"].InnerText; 
```

# hadoop - 部分聚合与组合器哪个更快？

> ID：10925840
> 
> 赞同：3
> 
> 时间：2012-06-07T04:50:27.850
> 
> 标签：hadoop, cascading, hadoop-plugins, combiners

有关于级联/烫伤如何优化[地图侧评估](http://docs.cascading.org/cascading/2.0/userguide/htmlsingle/#N2146C)的通知 他们使用所谓的部分聚合。它实际上是比组合器更好的方法吗？一些常见的hadoop任务（例如字数）是否有任何性能比较？如果是这样，hadoop 将来会支持这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T06:16:50.547

在实践中，部分聚合比使用组合器有更多的好处。

组合器有用的情况是有限的。此外，组合器优化了任务所需的吞吐量，而不是减少的数量——这是一个微妙的区别，它加起来显着的性能增量。

在大型分布式工作流中，部分聚合的用例范围更广。此外，部分聚合可用于优化工作流所需的作业步骤数。

示例显示在[https://github.com/Cascading/Impatient/wiki/Part-5](https://github.com/Cascading/Impatient/wiki/Part-5)中，它使用`CountBy`和`SumBy`部分聚合。如果您回顾一下该项目在 GitHub 上的代码提交历史，之前使用了`GroupBy`and `Count`，这导致了更多的减少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T09:03:54.707

对于某些类型的聚合更好。级联聚合对于可以聚合的内容要灵活一些。 [从级联站点（重点是我的）：](http://docs.cascading.org/cascading/1.2/userguide/html/ch06s09.html)

> 级联不支持所谓的 MapReduce 组合器。组合器非常强大，因为它们减少了 Mappers 和 Reducers 之间的 IO。当您可以在 Map 端计算一些值并将它们组合在 Reducer 中时，为什么要将所有 Mapper 数据发送到 Reducers。但是**组合器仅限于关联和交换函数，例如 'sum' 和 'max'**。并且为了工作，必须对 Map 任务发出的值进行序列化、排序（反序列化和比较）、再次反序列化和操作，然后再对结果进行序列化和排序。**组合器用 CPU 换取 IO 的收益**。
> 
> 级联通过提供一种机制来执行部分聚合 Map 端并将它们组合到 Reduce 端，从而采用不同的方法。但是 Cascading 选择**通过缓存值（达到阈值）来用内存换取 IO 增益**。这种方法绕过了不必要的序列化、反序列化和排序步骤。它还允许实现任何聚合函数，而不仅仅是关联和交换函数。

# html - 垂直和水平对齐页面的内部 DIV 中心

> ID：10925852
> 
> 赞同：12
> 
> 时间：2012-06-07T04:51:33.273
> 
> 标签：html, css

> **可能重复：**
> [在页面上垂直和水平居中 <div> 的最佳方法？](https://stackoverflow.com/questions/356809/best-way-to-center-a-div-on-a-page-vertically-and-horizontally)

我的网站登陆页面具有`Container`100% 高度和宽度的 DIV。我能够将`InnerContainer`div 水平居中对齐，但我无法将其垂直居中。我更改了几个属性，大部分结果保持不变。

我有相同的[http://jsfiddle.net/cwkzq/12/](http://jsfiddle.net/cwkzq/12/)示例，但我不确定我在哪里做错了。我会很感激这方面的帮助。

**CSS 代码**

```
html, body,form { height: 100%;  }
body { margin: 0;  padding: 0; border: 1; background-color:Aqua; }
.Container { width: 100%;height: 100%; padding: 0; font-size: 12px; border:1px solid green;
 vertical-align: middle;     }
.InnerContainer
{  vertical-align: middle; width: 400px;height: 350px; border-left:1px solid;
    border-right:1px solid; border-color:#f5f5f5;margin: 0 auto;  padding: 0;
    font-size: 12px;  background-color:Red;
} 
```

**代码**

```
<!--  Container    -->
<div class="Container">
<div class="InnerContainer">
    <!--  TopMenu Bar    -->
    <div class="colorBar">

    </div>
    <!--  TopMenu Bar   -->
    <!--  Middle Part    -->
    <div class="MiddleWrapper">
        <!--  Left Title    -->
            <div class="Title">

            </div>
        <!--   Left Title   -->
        <!--   Large Image   -->
            <div class="ImageLeftWrapper">

            </div>
        <!--   Large Image   -->
        <!--  Logo Wrapper    -->
            <div class="LogoWrapper">

            </div>
        <!--   Logo Wrapper   -->
        <!--   Page Text Area  -->
            <div class="PageText">

            </div>
        <!--   Page Text Area   -->
        <!--  Search Bar    -->
            <div class="SearchBar">

            </div>
        <!--   Search Bar    -->
        <!--   Banner Images -->
            <div class="BannerImageWrapper">

            </div>
        <!--  Banner Images   -->
    </div>
    <!--  Middle Part    -->
    <!--   Menu Wrapper    -->
    <div class="MenuWrapper">

    </div>
    <!--   Menu Wrapper    -->
    <!--   Footer Section  -->
    <div class="FooterWrapper">

    </div>
    <!--  Footer Section  -->
</div>
</div>
<!--  Container   --> 
```

大多数网络上的示例都有固定的宽度和高度容器 DIV，而在我的情况下，我的容器 div 具有 100% 的宽度和高度

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-07T05:33:28.883

### **[答案](https://stackoverflow.com/a/13356401/1057730)移至原问题**

我做到了：（[dabblet.com 上的演示](http://dabblet.com/gist/2872671)）

这个演示的主要技巧是在元素的正常流动中从上到下，所以`margin-top: auto`设置为零。然而，对于一个绝对定位的元素，其自由空间分布相同，并且类似地可以在指定的`top`and处垂直居中`bottom`（在 IE7 中不起作用）。

## 这个技巧适用于任何大小的`div`.

### HTML：

```
<div></div> 
```

### CSS：

```
div {
    width: 100px;
    height: 100px;
    background-color: red;

    position: absolute;
    top:0;
    bottom: 0;
    left: 0;
    right: 0;

    margin: auto;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-07T06:00:32.490

如果您知道要对齐的块的确切大小，这是最简单的方法：[jsfiddle](http://jsfiddle.net/e3YR3/)

将此样式添加到您的 .InnerContainer

```
.InnerContainer{
  width: 400px;
  height: 350px;
  border-left: 1px solid;
  border-right: 1px solid;
  border-color: #f5f5f5;
  margin: 0 auto;
  padding: 0;
  font-size: 12px;
  background-color: red;
  position: relative;
  left: 50%;
  top: 50%;
  margin-left: -200px;
  margin-top: -175px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T05:53:42.610

嗨，现在您可以像这样使用此解决方案的多种方法

**CSS**

```
.wraptocenter {
    display: table-cell;
    text-align: center;
    vertical-align: middle;
    width: ...;
    height: ...;
}
.wraptocenter * {
    vertical-align: middle;
}

.wraptocenter {
    display: block;
    background:green;
    height:500px;
}
.wraptocenter span {
    display: inline-block;
    height: 100%;
    width: 1px;
}
.child{
background:pink;
    min-height:100px;
    width:100px;
    display:inline-block;

} 
```

**HTML**

```
<div class="wraptocenter">
    <span></span>
    <div class="child"> Hello I am child and ver and horz....</div>
</div> 
```

现场演示[http://jsfiddle.net/w9dxv/1/](http://jsfiddle.net/w9dxv/1/)

更多信息[http://www.brunildo.org/test/img_center.html](http://www.brunildo.org/test/img_center.html)

* * *

如果你想 **居中水平和垂直对齐**

**CSS**

```
.chv{
width:200px;
    height:100px;
    position:absolute;
    left:50%;
    top:50%;
margin-left:-100px;
    margin-top:-50px;
    border:solid 1px red;
} 
```

**HTML**

```
<div class="chv">
    Center horizontal and vertical align
</div> 
```

现场演示[http://jsfiddle.net/HkEVZ/1/](http://jsfiddle.net/HkEVZ/1/)

* * *

如果你想**水平和垂直居中单行文本**

**CSS**

```
.alldiv{
width:400px;
    height:200px;
    text-align:center;
    line-height:200px;
    border:solid 1px red;
} 
```

**HTML**

```
<div class="alldiv">
Center horizontally and vertically a single line of text
</div> 
```

现场演示[http://jsfiddle.net/SVEtH/1/](http://jsfiddle.net/SVEtH/1/)

* * *

如果你想要**中心水平和垂直对齐**用于像这样的表格属性..

**CSS**

```
.parent{
display:table;
    height:300px;
    text-align:center;
    border:solid 1px red;
    width:100%;
}
.child{
display:table-cell;
    vertical-align:middle;
    border:solid 1px green;
} 
```

**HTML**

```
<div class="parent">
<div class="child">
Center horizontal and vertical align
</div>
</div> 
```

现场演示[http://jsfiddle.net/J3Zc6/2/](http://jsfiddle.net/J3Zc6/2/)

# php - 如何在php中删除文本末尾的“，”？

> ID：10925858
> 
> 赞同：5
> 
> 时间：2012-06-07T04:52:33.460
> 
> 标签：php

我有一段文字：

```
"2G Network":"GSM 850","3G Network":"HSDPA 850", 
```

如何在php中删除文本末尾的“，”

```
"2G Network":"GSM 850","3G Network":"HSDPA 850" 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-07T04:53:05.993

利用[`rtrim()`](http://php.net/rtrim)

```
$str = rtrim($str, ','); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T04:54:30.720

[Substr()](http://www.php.net/manual/en/function.substr.php)是你的朋友。

```
$noComma = substr('"2G Network":"GSM 850","3G Network":"HSDPA 850",', 0, -1); 
```

# sql-server - I/O 错误：SSO 失败：SSPI 未初始化

> ID：10925859
> 
> 赞同：1
> 
> 时间：2012-06-07T04:52:34.840
> 
> 标签：sql-server, jdbc, pentaho, kettle, sspi

我正在使用 pentaho 数据集成 4.1 (Kettle) 来构建 ETL 系统。我的客户需要使用窗口身份验证连接到数据库（MS SQL Server），我知道 Kettle 支持它。但是，当我运行我的 Kettle 工作时，它会引发异常

`"I/O Error: SSO Failed: SSPI Not Initialized"`.

从论坛上的一篇文章中，我将库复制`sqljdbc_auth.dll`到`jre/bin`文件夹中。结果还不错，可以使用window认证连接SQL server。但是这个功能并不稳定，我的意思是有时它运行良好，有时它会抛出异常

`"I/O Error: SSO Failed: SSPI Not Initialized"`.

请告诉我如何解决此错误。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T08:32:22.470

你在使用 JTDS 驱动程序吗？尝试将其与 ntlmauth.dll 结合使用——当在连接到各种远程 sqlserver 数据库的 Windows Server 2003 上运行 PDI 时，它对我们非常有用。

我们将 DLL 放在这个文件夹中：

libswt\win64

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T22:52:19.543

要连接到 SQL Server 2008，我必须安装“Microsoft JDBC Driver 4.0 for SQL Server”，然后将 sqljdbc_auth.dll 的路径添加到 %PENTAHO_DI_JAVA_OPTIONS% 中的 Spoon.bat。像这样：

```
set OPT=%PENTAHO_DI_JAVA_OPTIONS% "-Djava.library.path=%LIBSPATH%;C:\PROGRA~1\MICROS~1.0FO\sqljdbc_4.0\enu\auth\x86;C:\PROGRA~1\IBM\SQLLIB\BIN" "-DKETTLE_HOME=%KETTLE_HOME%" "-DKETTLE_REPOSITORY=%KETTLE_REPOSITORY%" "-DKETTLE_USER=%KETTLE_USER%" "-DKETTLE_PASSWORD=%KETTLE_PASSWORD%" "-DKETTLE_PLUGIN_PACKAGES=%KETTLE_PLUGIN_PACKAGES%" "-DKETTLE_LOG_SIZE_LIMIT=%KETTLE_LOG_SIZE_LIMIT%" 
```

丑陋，但那是你的 Windows 下的 Java。不过现在工作相当可靠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-01T14:00:03.563

在将 JDBC 1.2.2 与 MSSQL 2008 一起使用时，我遇到了同样的问题。事实证明，驱动程序中存在一个错误，如果您使用多个连接对其进行初始化，它会随机崩溃。

如果我们只使用一个与数据库的初始连接，则此错误永远不会出现。

该问题已在更高版本的 JDBC 中得到修复。我们目前使用 1.3.0 并且`I/O Error: SSO Failed: SSPI Not Initialized`从未出现过。

# ruby-on-rails - 多线程环境下的Redis连接（独角兽）

> ID：10925866
> 
> 赞同：2
> 
> 时间：2012-06-07T04:53:39.620
> 
> 标签：ruby-on-rails, ruby, redis, unicorn

我一直在努力解决这个错误很长一段时间：

```
Redis::ProtocolError: Got 'i' as initial reply byte. 
If you're running in a multi-threaded environment, make sure you pass the :thread_safe
option when initializing the connection. If you're in a forking environment, such as 
Unicorn, you need to connect to Redis after forking. 
```

它在使用 Unicorn 和 Redis 的应用程序中间歇性发生。从这个[redis-rb Github 问题](https://github.com/redis/redis-rb/pull/188)来看，该`:thread_safe`选项现在默认启用。我正在使用`redis 2.2.2`，因为`redis 3.0.1`与最新版本的`resque`.

在我的独角兽配置中，我`Redis.current.quit`在分叉后使用。

我还使用名为的 gem 连接到 Redis，`ruote-redis`它是工作流引擎 Ruote 的存储实现。

如何确保我的所有 Redis 连接都是稳定的，并且我不会再收到这个影响我们应用程序正常使用的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T02:00:25.557

Unicorn 不是多线程的。您自己使用线程吗？

如文档中所述，您遇到的问题是多个 Unicorn 工作人员共享相同的连接（即相同的底层文件描述符）。

[包含在 redis-rb 3.0 版本中的这一更改](https://github.com/redis/redis-rb/commit/1bd43346cdf71ba69176612714616289a5a70ed4)使其更加清晰。

如果您仍然遇到此错误，请发布您的 Unicorn 配置。

# java - Android - 如何让 Spinner 在从 Spinner 中选择项目后显示项目？

> ID：10925868
> 
> 赞同：0
> 
> 时间：2012-06-07T04:54:16.780
> 
> 标签：java, android, android-widget

这是我的代码：

```
 package com.testotspeech;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.Iterator;
import java.util.Locale;

import android.app.Activity;
import android.os.Bundle;
import android.speech.tts.TextToSpeech;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Spinner;
import android.widget.TextView;

public class AndroidTestToSpeechActivity extends Activity implements
        TextToSpeech.OnInitListener, OnItemSelectedListener {
    /** Called when the activity is first created. */

    private TextToSpeech tts;
    private Button btnSpeak;
    private EditText txtText;
    private ArrayList<String> itemsList;
    private Spinner spinner;
    private String contry_name;
    private ArrayAdapter<String> dataAdapter;
    private TextView textview;
    private Iterator itr;
    private String[] t = {"Please Select An Item"};

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Log.i("----------",Arrays.toString(Locale.getAvailableLocales()));
        itemsList = new ArrayList<String>();
        itemsList.add(Arrays.toString(Locale.getAvailableLocales()));
        spinner = (Spinner)findViewById(R.id.spinner1);
        spinner.setOnItemSelectedListener(this);

        dataAdapter = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item,t);
        dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_item);
        spinner.setAdapter(dataAdapter);
        textview = (TextView)findViewById(R.id.textView1);

        tts = new TextToSpeech(this, this);
        btnSpeak = (Button) findViewById(R.id.btnSpeak);
        txtText = (EditText) findViewById(R.id.txtText);

        // button on click event
        btnSpeak.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                speakOut();
            }

        });
    }

    @Override
    public void onDestroy() {
        // Don't forget to shutdown tts!
        if (tts != null) {
            tts.stop();
            tts.shutdown();
        }
        super.onDestroy();
    }

    public void onInit(int status) {

        if (status == TextToSpeech.SUCCESS) {

            int result = tts.setLanguage(Locale.ENGLISH);

            if (result == TextToSpeech.LANG_MISSING_DATA
                    || result == TextToSpeech.LANG_NOT_SUPPORTED) {
                Log.e("TTS", "This Language is not supported");
            } else {
                btnSpeak.setEnabled(true);
                speakOut();

            }

        } else {
            Log.e("TTS", "Initilization Failed!");
        }

    }

    private void speakOut() {

        String text = txtText.getText().toString();
        tts.speak(text, TextToSpeech.QUEUE_FLUSH, null);
    }

    public void onItemSelected(AdapterView<?> parent, View v, int position, long id) {

        if (position == 0)
        {
        }
        else
        {

        }
    }

    public void onNothingSelected(AdapterView<?> parent) {
        textview.setText("");
    }

} 
```

编辑：

我想要做的是，当我单击 thw 微调器时，它会折叠/打开，并且我将拥有它自己的每个项目和盒子，并且它将排成一行，例如我单击了我现在将在其下方看到的微调器：

你好

再见

丹尼尔

现在，如果我单击 Hello，它将把 Hello 放在 textView1 中，如果我单击 Bye，它也会把它放在 textView1 中，依此类推。但是我希望微调器设计的图形是，当我单击它时，它会向下折叠并连续显示项目，这样我就可以单击并单击并选择每个项目。

现在我所做的只是将微调器添加一个文本“请选择一个项目”，我上传了我希望它是什么样的图像，例如：

![微调器示例](../Images/070affabc8e9651d98ffbb83884f736f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T06:13:30.660

那是微调器的行为，**总是**有一个选定的项目。

您可以创建一个标志并在覆盖中使用它，在其中`onItemSelected`放置一个计数器并使用它来忽略第一次。

像这样：

```
private int spinnerSelectCount = 0;

@Override
public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
    if(spinnerSelectCount == 0) {
        // Do nothing... initial item on spinner display is the selected item
    } else {
        // your code to process spinner selection here
    }
    }
}); 
```

**编辑**

您需要将字符串作为数组中的第一项，而不是单独的字符串。

```
itemsList = new ArrayList<String>();  
itemsList.add("Please Select An Item");
itemsList.add(Arrays.toString(Locale.getAvailableLocales())); 
```

然后使用数组调用微调器：

```
 dataAdapter = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item,itemsList);        
    dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_item);        
    spinner.setAdapter(dataAdapter); 
```

既然你这样做了，你应该将过滤器更改为基于位置，而不是计数。

```
@Override
public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
    if(pos == 0) {
        // Do nothing... initial item on spinner display is the selected item
    } else {
        // your code to process spinner selection here
        textview.setText(itemsList.get(pos));
    }
    }
}); 
```

**编辑 2**

您在寻找多选吗？这对于标准微调器是不可能的，它被设置为仅选择一项。如果您真的想选择多个项目，则需要使用列表或创建自定义微调器。

幸运的是，看起来有人已经这样做了。您可以在此[SO Answer中找到代码](https://stackoverflow.com/a/6022474/1105376)

**编辑 3**

MultiSpinner 不需要新项目。您只需创建一个新类并使用它来填充您的微调器。

1）创建一个名为 MultiSpinner 的新类
2）从链接中复制代码（省略包名，因为您想使用自己的）
3）在您的 xml 中像这样调用微调器（替换`com.yourpackage.name`为您的实际包名） ：

```
<com.yourpackage.name.MultiSpinner android:id="@+id/multi_spinner" /> 
```

4）如链接所示调用微调器：

```
MultiSpinner multiSpinner = (MultiSpinner) findViewById(R.id.multi_spinner); 
multiSpinner.setItems(items, getString(R.string.for_all), 
                this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T07:05:18.357

一个简单的解决方案是将微调器的第一项设置为诸如“请选择一个值..”之类的文本。然后在代码中..

```
@Override
public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
    if(pos == 0) {
    // do nothing..
    } else {
    // your code..
    }
}
}); 
```

# css - Firefox 定位不适用于表格单元格

> ID：10925873
> 
> 赞同：1
> 
> 时间：2012-06-07T04:55:04.333
> 
> 标签：css, firefox, positioning, css-tables

我有一个 div 显示为*表格单元格*，我想相对于第一个定位另一个。但它在 Firefox 中不起作用。

请在 Firefox 中打开此链接，看看有什么不同。我该如何解决？

[http://jsfiddle.net/JFAbM/](http://jsfiddle.net/JFAbM/)

我看到有人不明白我到底需要什么。所以我更新了代码。我需要定位浅灰色块。

[http://jsfiddle.net/JFAbM/7/](http://jsfiddle.net/JFAbM/7/)

伙计们，我已经通过包装额外的 div 解决了这个问题

前任。这里 jsfiddle.net/JFAbM/8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:38:00.870

替换`position:absolute;`为`position:relative;`

检查[小提琴](http://jsfiddle.net/JFAbM/9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T03:27:43.107

我也在寻找合适的解决方案。正如 jumancy 所指出的，据我所知，您将需要一个包装元素：

```
<table>
<tr>
     <td><div class = "relative-wrapper">
            <!-- Other stuff goes here -->
            <div class = "pos-abs">Be relative to me, wrap me, show me on hover!</div>
            <!-- or here -->
     </div></td>
</tr>
</table>

//CSS
.relative-wrapper{
   position: relative;
   display: block;
}
.pos-abs{
   position: absolute;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T05:33:12.663

只需更改`position:absolute`to `position:relative`，无需包装任何额外的 div

看到这个[小提琴](http://jsfiddle.net/JFAbM/2/)

**更新**：http: [//jsfiddle.net/JFAbM/5/](http://jsfiddle.net/JFAbM/5/)

# java - 在 Java 中映射到 JSON

> ID：10925874
> 
> 赞同：1
> 
> 时间：2012-06-07T04:55:14.713
> 
> 标签：java, json

我有一张像这样的地图：

```
{ 
  facility-1={
    facility-kind1={param1=XPath-1, param2=XPath-2}, 
    facility-kind2={param1=XPath-1, param2=XPath-2}, 
    facility-kind3={param1=XPath-1, param2=XPath-2}
  },
  facility-2={
    facility-kind1={param1=XPath-1, param2=XPath-2}, 
    facility-kind2={param1=XPath-1, param2=XPath-2}, 
    facility-kind3={param1=XPath-1, param2=XPath-2}
  }
} 
```

我想把它转换成这样格式的 JSON

```
[

    {"title": "Item 1"},
    {"title": "Folder 2",
        "children": [
            {"title": "Sub-item 2.1"},
            {"title": "Sub-item 2.2"}
        ]
    },
    {"title": "Folder 3",
        "children": [
            {"title": "Sub-item 3.1"},
            {"title": "Sub-item 3.2"}
        ]
    },
    {"title": "Item 5"}
] 
```

我尝试使用 GSON 但结果输出不是我想要的：

```
{
  "facility-1": {
     "facility-kind1":
      {"param1":"XPath-1","param2":"XPath-2"},
     "facility-kind2":
      {"param1":"XPath-1","param2":"XPath-2"},
     "facility-kind3":
      {"param1":"XPath-1","param2":"XPath-2"}
  },
  "facility-2": { 
     "facility-kind1":
      {"param1":"XPath-1","param2":"XPath-2"},
     "facility-kind2":
      {"param1":"XPath-1","param2":"XPath-2","param3":"XPath-3"},
     "facility-kind3":
      {"param1":"XPath-1","param2":"XPath-2"}
  }
} 
```

如何获得我想要的 json 格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T06:55:40.303

您需要将 JSON 转换为您提供的新格式。

## 要转换的数据：

```
static String json = 
    "{\n" + 
    "  facility-1={\n" + 
    "    facility-kind1={param1=XPath-1, param2=XPath-2},\n" +  
    "    facility-kind2={param1=XPath-1, param2=XPath-2},\n" + 
    "    facility-kind3={param1=XPath-1, param2=XPath-2}\n" + 
    "  },\n" + 
    "  facility-2={\n" + 
    "    facility-kind1={param1=XPath-1, param2=XPath-2},\n" +  
    "    facility-kind2={param1=XPath-1, param2=XPath-2},\n" +  
    "    facility-kind3={param1=XPath-1, param2=XPath-2}\n" + 
    "  }\n" + 
    "}\n"; 
```

## 使用 GSON

创建一些你想处理数据的类，它们看起来像：

```
static class Facility {
    List<Kind> children = new LinkedList<Kind>();
}

static class Kind {
    String title;
    Map<String, String> params;

    public Kind(String title, Map<String, String> params) {
        this.title = title;
        this.params = params;
    }
} 
```

下一步就是查看源代码并创建它的表示形式。我会使用：

```
Map<String, Map<String, Map<String, String>>> 
```

因为输入数据是这样布局的。现在使用转换它`Gson`很容易：

```
public static void main(String... args) throws Exception {

    Gson gson = new GsonBuilder().setPrettyPrinting().create();
    Type type = new TypeToken<
            Map<String, Map<String, Map<String, String>>>>() {}.getType();

    Map<String, Map<String, Map<String, String>>> source = 
        gson.fromJson(json, type);

    Map<String, Facility> dest = new HashMap<String, Facility>();

    for (String facilityName : source.keySet()) {
        Map<String, Map<String, String>> facility = source.get(facilityName);

        Facility f = new Facility();

        for (String kindName : facility.keySet())
            f.children.add(new Kind(kindName, facility.get(kindName)));

        dest.put(facilityName, f);
    }

    System.out.println(gson.toJson(dest));
} 
```

* * *

## 使用 JSONObject/JSONArray

```
public static void main(String... args) throws Exception {

    JSONObject source = new JSONObject(json);
    JSONArray destination = new JSONArray();

    for (Iterator<?> keys = source.keys(); keys.hasNext(); ) {

        String facilityName = (String) keys.next();
        JSONObject kinds = source.getJSONObject(facilityName);

        JSONArray children = new JSONArray();
        for (Iterator<?> kit = kinds.keys(); kit.hasNext(); ) {

            String kind = (String) kit.next();
            JSONObject params = kinds.getJSONObject(kind);

            JSONObject kindObject = new JSONObject();
            kindObject.put("title", kind);

            for (Iterator<?> pit = params.keys(); pit.hasNext(); ) {
                String param = (String) pit.next();
                kindObject.put(param, params.get(param));
            }
            children.put(kindObject);
        }

        JSONObject facility = new JSONObject();
        facility.put("title", facilityName);
        facility.put("children", children);
        destination.put(facility);
    }
    System.out.println(destination.toString(2));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T04:58:24.910

你想要的是漂亮的印刷品。

```
Gson gson = new GsonBuilder().setPrettyPrinting().create();
String json = gson.toJson(yourMap); 
```

# c - 如何获取指向文件地址的 const int

> ID：10925875
> 
> 赞同：0
> 
> 时间：2012-06-07T04:55:14.900
> 
> 标签：c, file, pointers, file-handling

我正在用 c neon 内在函数制作一个关于 bmp 文件解析的程序。这些函数需要一个指向源文件目标的 const int .. 但是通过使用 fstream 和 fopen a 获取指向源的文件对象。那么如何将其转换为 const int 指针

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-04T07:29:00.683

你可以试试这个：

```
const int *intFile = (int *)fopen("path-to-file.bmp", "r"); 
```

您始终可以使用强制转换将指向某种类型的指针分配给指向任何其他类型的指针，例如：

```
int i;
int  *ptrInt  = &i;        // this doesn't need a cast
char *ptrChar = (char*)&i; // this does need a cast 
```

在这种情况下，`ptrChar`指向 的“第一个”字节`i`。这个“第一个”字节可以是 LSB 或 MSB，具体取决于您的机器分别使用小端或大端。

请注意，如果谨慎使用，进行此类转换非常有用，但涉及低级概念，并且可能不安全。

现在，您始终可以直接将指针分配给相同类型的 const 指针：

```
char c;
char *pc = &c;
const char *cpc = pc; 
```

所以，没必要写`const int *intFile = (const int*) ...`

在最后一个示例中，不能通过 修改`const char *cpc`手段，即，是“指向 const char 的指针”：`c``cpc``cpc`

```
*cpc   = 'H';   // error
cpc[0] = 'j'; // error 
```

# javafx-2 - 根据数据禁用 TableRow

> ID：10925882
> 
> 赞同：2
> 
> 时间：2012-06-07T04:55:48.740
> 
> 标签：javafx-2

我在 JavaFX 2.1 中遇到了 TableView 的问题。我想根据数据禁用 TableRow。

例如：

```
public class RowData() {
private String name;
private boolean used;

public String getName(){
return this.name;
}
public void setName(String name){
this.name = name;
}
public boolean isUsed(){
return this.used;
}
public void setUsed(boolean used) {
this.used = used;
}

} 
```

在程序中：

```
 public class ViewController implements Initializable {
    @FXML
        private TableView<RowData> tableAttribute;
    public void initialize(URL location, ResourceBundle resources) {
    List<RowData> data = new ArrayList<RowData>();
            // datatype col
            TableColumn<DataRow, String> attNameCol = new TableColumn<DataRow, DataRow>(
            "Name");
            attNameCol 
            .setCellValueFactory(new PropertyValueFactory<DataRow, String>(
                    "name"));
            attNameCol .setMinWidth(110.0);
            tableComponent.getColumns().addAll(attNameCol );
    loadData(data);

    tableAttribute.setItems(FXCollections.observableList(data));

    //I want to disable row which used = true, enable otherwise

    }
} 
```

我该怎么做才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T06:06:01.850

根据行字段的值禁用行的示例策略：

1.  使用[rowFactory](http://docs.oracle.com/javafx/2/api/javafx/scene/control/TableView.html#setRowFactory%28javafx.util.Callback%29)根据需要将行内容呈现为禁用状态。
2.  显示表格后，查找所有[TableRows](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#lookupAll%28java.lang.String%29)并根据需要将它们呈现为禁用状态。

我创建了一个使用第二个原则的[示例应用程序。](https://gist.github.com/2886805)

*示例中的关键逻辑是在表显示在活动阶段后*执行的以下代码，它根据需要启用和禁用行（以及将样式类应用于每一行，以便在需要时可以单独设置样式）。请注意，对于这种方法，如果表中的行发生更改或重新排序，则必须在重新呈现表后重新运行表中的查找和启用/禁用代码，以便表的样式正确并具有正确的行禁用属性。

```
// highlight the table rows depending upon whether we expect to get paid.
int i = 0;
for (Node n: table.lookupAll("TableRow")) {
  if (n instanceof TableRow) {
    TableRow row = (TableRow) n;
    if (table.getItems().get(i).getWillPay()) {
      row.getStyleClass().add("willPayRow");
      row.setDisable(false);
    } else {
      row.getStyleClass().add("wontPayRow");
      row.setDisable(true);
    }
    i++;
    if (i == table.getItems().size())
      break;
  }
} 
```

> 使用 fxml 控制器时，lookupAll 返回 0 个“TableRow”节点。似乎在 table.setItems(data) 之后填充查找行时为什么？

在回答这个问题之前，我会注意到使用 rowFactory 确实是这个问题的首选解决方案，而不是使用查找。在此答案的其余部分中，其中一些原因将变得显而易见。有关 rowFactory 方法的示例，请参阅[james-d 的此链接示例代码](https://gist.github.com/james-d/7813134)。

查找是一项 CSS 操作，它要求已将 css 应用于正在查找的节点。要显式应用 css，请在将节点放置在场景中后调用[applyCss 。](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/Node.html#applyCss--)

控制器的一个困难是，在初始化调用中，节点可能还没有在场景中。要解决该问题，您可以应用以下模式：

```
Pane parent = (Pane) table.getParent();
parent.getChildren().remove(table);
Scene applyCssScene = new Scene(table);
table.applyCss();
table.layout();
applyCssScene.setRoot(null);
if (parent != null) {
    // Assumes that the original order in the parent does not matter.
    // If it did, you would also need to keep track of the child list position.
    parent.getChildren().add(table);
}
. . .
// perform css based lookup operation on the table. 
```

这将创建一个包含表格的虚拟持有者场景，应用 CSS（之后基于 CSS 的查找操作将起作用），然后从场景中删除表格，以便您可以稍后将其添加到真实场景中，然后放置表回到它的原始父级。正如您可能已经注意到的那样，这有点令人困惑。请注意，我没有尝试在带有 FXML 控制器的示例应用程序中实际执行上述 CSS 应用程序过程，但我相信它会起作用。

在我链接的使用查找的示例应用程序中，不需要上述复杂性，因为查找是在最初显示包含表的阶段*之后进行的。*stage.show() 调用隐式运行布局和 css 应用程序传递要显示的场景（它需要这样做以根据初始场景的计算大小确定舞台的初始大小，并且可能出于其他原因）。

# .net - 适用于 .NET 2.0 的 Google 翻译 API

> ID：10925885
> 
> 赞同：1
> 
> 时间：2012-06-07T04:56:25.417
> 
> 标签：.net, google-api

有谁知道我如何将 Google Translate Api .NET dll 用于 .NET 2.0 版？

它们是为 .NET 3.5 而不是 .NET 2.0 编译的。

有什么解决方法吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T02:56:10.823

我设法做到了。

SampleHelper dll 有问题。

所以我在VS2008下编译它并在VS2005中引用它并且它工作..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T07:18:29.913

您是否尝试在 .net 2.0 上编译它？这是源代码：[http ://contrib.google-api-dotnet-client.googlecode.com/hg/20120504-1.2.4507-beta/Generated/ZipFiles/google-api-dotnet-client-1.2.4507- beta.source.zip](http://contrib.google-api-dotnet-client.googlecode.com/hg/20120504-1.2.4507-beta/Generated/ZipFiles/google-api-dotnet-client-1.2.4507-beta.source.zip)

# android - 将哈希键添加到 facebook 应用程序时出错

> ID：10925887
> 
> 赞同：0
> 
> 时间：2012-06-07T04:56:52.630
> 
> 标签：android, facebook

我在将哈希键添加到 facebook 应用程序时遇到此错误，用于我的 android 应用程序中的 SSO

错误：

```
You have enabled a Mobile Web integration for your app, but have not specified Mobile Web URL. 
```

这是什么意思 ？我以前从未使用过 android-facebook sdk

通过链接：[https](https://developers.facebook.com/docs/mobile/android/build/#register) ://developers.facebook.com/docs/mobile/android/build/#register 我看到一个框名称移动网络网址：[？]，这是什么，应该在那里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T05:06:38.373

您错误地使用 facebook 登录复选框检查了网站。

取消选中它，它会工作。

![在此处输入图像描述](../Images/5b36a09a4496763d5c3d8d0918a7c8a1.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T05:17:15.727

检查下图，您的应用程序设置应如下所示：

![在此处输入图像描述](../Images/ec21e7fec58105244ab8ce6b4ff9dfe6.png)

不要检查除此之外的任何内容。

完成此操作后，生成**Hash Key**并放入相应的字段。

# c# - 使用 aforge GA 预测新的（未知）序列值

> ID：10925890
> 
> 赞同：0
> 
> 时间：2012-06-07T04:57:19.090
> 
> 标签：c#, artificial-intelligence, genetic-algorithm, aforge

我一直在搞乱 aforge 时间序列遗传算法样本，并且我有自己的版本在工作，atm 它只是“预测”斐波那契数。

问题是当我要求它预测超出我给它的数组（包含序列的前 21 个数字，使用窗口大小为 5）之外的新值时，它不会这样做，它会抛出一个异常说“数据大小应该足以用于窗口和预测”。

据我所知，我应该破译“population.BestChromosome”中包含的奇怪公式并用它来推断未来的值，对吗？有没有更简单的方法？我是否忽略了一些非常明显的东西？

我会在 aforge 论坛上询问，但开发人员不再支持它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T11:51:38.363

> 据我所知，我应该破译“population.BestChromosome”中包含的奇怪公式并用它来推断未来的值，对吗？

您所说的“奇异公式”在数据分析中称为*模型。*你从过去的数据中学习这样一个模型，你可以给它提供新的数据来获得预测的结果。这个新结果是有意义的还是只是垃圾，取决于你的模型有多通用。许多技术可以学习非常好的模型，这些模型可以很好地解释观察到的数据，但是这些模型不可推广，并且当您将新数据输入模型时会返回无用的结果。您需要找到一个模型，该模型既可以解释给定数据，也可以解释潜在未观察到的数据，这是一个重要的过程。通常人们估计*泛化误差*通过将已知数据分成两个分区来评估该模型：一个用于学习模型，另一个用于测试学习模型。然后，您要选择对两个数据都准确的模型。您还可以在这里查看我在另一个问题上给出的答案，该问题也涉及机器学习的主题：[https ://stackoverflow.com/a/3764893/189767](https://stackoverflow.com/a/3764893/189767)

我不认为您“忽略了一些非常明显的事情”，而是您面临着一个难以解决的问题。

顺便说一句，您还可以在[HeuristicLab](http://dev.heuristiclab.com)中使用遗传编程 (GP) 。GP 的模型是一个数学公式，在 HeuristicLab 中，您可以将该模型导出到例如 MatLab。

Ad Fibonacci，斐波那契数的封闭公式是 F(n) = (phi^n - psi^n) / sqrt(5)，其中 phi 和 psi 是根据维基百科的特殊幻数。如果你想用 GP 找到它，你需要一个变量 (n)、三个常数和幂函数。但是，您很可能会发现一个在输出上相似的截然不同的公式。机器学习的问题是非常不同的模型可以产生相同的输出。递归形式要求您将过去两个 n 的值包含到数据集中。这类似于学习时间序列回归问题的模型。

# c# - 在 C# 中处理 Outlook 邮件中的超链接单击事件

> ID：10925891
> 
> 赞同：5
> 
> 时间：2012-06-07T04:57:33.330
> 
> 标签：c#, visual-studio-2010, outlook, outlook-addin, outlook-2010

我想处理 Outlook 邮件中的超链接点击事件。打开 Outlook 邮件中的超链接而不打开浏览器本身。

有谁知道如何处理邮件项目上的超链接点击事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T09:39:37.213

找了好久，发现outlook中没有办法捕捉到超链接点击事件。

如果我们想捕获一个链接，我们可以定义我们自己的协议 url，如下所示。

[http://msdn.microsoft.com/en-us/library/aa767914(VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa767914%28VS.85%29.aspx)

然后使用我们自己的协议处理程序，我们可以捕获事件。

如果有人需要更多信息，请在此处询问。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-07T05:04:18.913

编写一个 Outlook 加载项 .net 来处理它。要了解有关编写插件的基本概念，请查看以下链接。

[http://blogs.msdn.com/b/dancre/archive/2004/03/21/93712.aspx](http://blogs.msdn.com/b/dancre/archive/2004/03/21/93712.aspx)

# python - 为什么我不能在 map() 中使用字符串函数？

> ID：10925895
> 
> 赞同：5
> 
> 时间：2012-06-07T04:57:50.177
> 
> 标签：python, string, map, python-3.x

以下示例显示了我在尝试在函数调用中使用字符串函数以进行映射时遇到的错误。我需要帮助了解为什么会发生这种情况。谢谢。

```
>>> s=["this is a string","python python python","split split split"]
>>> map(split,s)
Traceback (most recent call last):
  File "<pyshell#16>", line 1, in <module>
    map(split,s)
NameError: name 'split' is not defined 
```

虽然`split()`是一个内置函数，但它仍然会抛出这个错误？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-07T05:00:41.210

如果您使用它会正常工作`str.split()`

IE，

```
s = ["this is a string","python python python","split split split"]
map(str.split, s) 
```

给出：

```
[['this', 'is', 'a', 'string'],
 ['python', 'python', 'python'],
 ['split', 'split', 'split']] 
```

错误消息指出：**`NameError: name 'split' is not defined`**，因此解释器无法识别`split`，因为`split`is not a [built-in function](http://docs.python.org/library/functions.html)。为了使其工作，您必须`split`与内置`str`对象关联。

**更新**：根据@Ivc 的*有用*评论/建议改进了措辞。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T05:06:10.747

`split`不是内置函数，虽然`str.split`是内置对象的方法。通常，您会将 split 作为`str`对象的方法调用，这就是直接绑定它的原因。

检查解释器的输出：

```
>>> str
<type 'str'>
>>> str.split
<method 'split' of 'str' objects> 
```

# html - 从html中提取文本到NSString

> ID：10925897
> 
> 赞同：1
> 
> 时间：2012-06-07T04:58:00.317
> 
> 标签：html, objective-c, ios, nsstring

我有一个从 UIWebView 收到的 html 字符串：

```
NSString *html = [webview stringByEvaluatingJavaScriptFromString: @"document.documentElement.innerHTML"]; 
```

NSString 的内容是：

```
<head>
  <meta name="viewport" content="width=508">
  <style type="text/css">
    img {max-width:100%;}
    div { margin-top: 0;margin-bottom: 0;font-family:Arial, sans-serif;}
    p{margin-top: 0;margin-bottom: 0;word-wrap:break-word;}
    table{border-collapse: collapse;}
    td{word-wrap:break-word;font-family:Arial;vertical-align:top;}
  </style>
  <style type="text/css" media="screen">
    .bumpedFont16 { font-size:1.6em; }
    .bumpedFont20 { font-size:2.0em; }
  </style>
</head>
<body>
  <div style="width:508;background-color:#FFFFFF; position:relative; overflow:hidden;word-wrap:break-word;min-height:830px; padding-left:20;padding-right:20;padding-top:20;padding-bottom:20;">
    <style type="text/css">
      .s0 {font-size: 12;font-family: Helvetica;color: rgb(0,0,0);}
      .s1 {direction:ltr;text-align: left;}
    </style>
    <p class="s1">
      <span class="s0">
        <span class="bumpedFont16">THIS IS A TEST</span>
      </span>
    </p>
  </div>
</body> 
```

如何将 html 字符串中的“这是一个测试”作为没有任何格式的纯文本转换为另一个 NSString？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T05:20:05.953

在您的代码中而不是使用

```
document.documentElement.innerHtml 
```

利用

```
document.documentElement.innerText 
```

内部文本将返回（来自 chrome 控制台）

```
document.documentElement.innerText  
"THIS IS A TEST" 
```

# iphone - MKMapView viewForAnnotation，保存一个注解

> ID：10925905
> 
> 赞同：0
> 
> 时间：2012-06-07T04:58:26.300
> 
> 标签：iphone, mkmapview

据我了解，当您执行以下操作时：

```
[self.mapView addAnnotation:anAddress]; 
```

它向地图添加注释，然后查看视图的委托方法，如下所示：

```
- (MKAnnotationView *)mapView:(MKMapView *)theMapView viewForAnnotation:(id<MKAnnotation>)annotation {
    static NSString *placeMarkIdentifier = @"SimplePinIdentifier";
    if ([annotation isKindOfClass:[AddressAnnotation class]]) {
        MKPinAnnotationView *annotationView = (MKPinAnnotationView *)[theMapView dequeueReusableAnnotationViewWithIdentifier:placeMarkIdentifier];
        if (annotationView == nil) {
            annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:placeMarkIdentifier];
        }
        else {
            annotationView.annotation = annotation;
        }
        NSLog(@"my annotation: %@", [annotation description]);
        annotationView.enabled = YES;
        annotationView.animatesDrop = YES;
        annotationView.draggable = YES;
        annotationView.canShowCallout = YES;
        annotationView.tag = ANNOTATION_VIEW_TAG;

        UIButton *detailDisclosureButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
        annotationView.rightCalloutAccessoryView = detailDisclosureButton;

        [self performSelector:@selector(showCallout:) withObject:annotation afterDelay:0.5];

        return annotationView;
    }
    return nil;
} 
```

我正在使用更多 iOS 5 开发中的示例，并使用我自己的 AddressAnnotation 对象自定义我的调用。所以这部分按我的预期工作。

按下公开时，用户可以保存位置（它只是将其添加到数组中）。这样可行。因此，当我重新加载地图时，它会添加回该注释。

我不明白的部分是，如果在将第一个图钉保存到地图后，我将图钉拖到屏幕上的其他位置。然后我再次保存它，我的数组有两个对象。当前的 mapView 只有一个引脚，因为我从其原始位置拖动了第一个引脚。当我尝试重新加载地图时，它在我拖到的最后一个位置只有一个图钉。它没有我期望的两个引脚。我基本上只是这样做：

```
[self.mapView addAnnotations:_locations]; // where _locations is an array that stores my saved <MKAnnotation> objects 
```

当我 NSLog _locations 时，我看到两个对象。我认为它会在调用委托后向地图添加两个引脚，并将为数组中的每个对象添加一个引脚到屏幕上。但是，当我在委托 viewForAnnotation: 中使用 NSLog 时，它只被调用一次，对于我上次拖动的对象，而不是原始引脚。

这里发生了什么？谢谢！

编辑：

我保存位置的代码：

```
- (void)mapPickerDidSelectMap:(Map *)aMap {
    DataManager *dmgr = [DataManager sharedInstance];
    if (![dmgr locationExists:self.address forMap:aMap]) {
        NSMutableArray *oldLocations = [[NSMutableArray alloc] initWithArray:aMap.locations];
        [oldLocations addObject:self.address];
        aMap.locations = oldLocations;        
    }
    NSLog(@"%s", __FUNCTION__);
    [dmgr.maps enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
        NSLog(@"obj: %@", [obj description]);
    }];
} 
```

# sql-server - 列出不在视图中的表中的数据

> ID：10925906
> 
> 赞同：-2
> 
> 时间：2012-06-07T04:58:30.497
> 
> 标签：sql-server, sql-server-2008, tsql

`Table1`有列

`Id int, Date smalldatetime.`

`View1`在许多其他列中，有 column `Id int`。

`View1`的最大值为`2000 rows`，但有一些相当复杂的计算来确定所有列的值。

返回所有`Table1.Id`不在介于and之间的最有效方法`View1.Id`是什么？`Table1.Date``'2012-05-30'``'2012-05-31'`

过滤后的选择`Table1`通常返回约`200 unique` `Table1.Id.`

当我执行 SELECT * FROM View1 时，总数据总是在一秒钟内返回。当我从 Table1 WHERE Date BETWEEN '2012-05-30' AND '2012-05-31' 中执行 SELECT Id 时，结果总是即时的。

当我尝试 SELECT Table1.Id from Table1 T1 WHERE Date BETWEEN .. AND .. AND NOT EXISTS (SELECT Id from View1 WHERE ViewId=T1.Id) 时，它需要很长时间（几乎 20 秒）。

我也尝试使用 CTE，将 V1 用作（从 View1 中选择 ID）从表 1 T1 中选择 T1.Id，其中日期在 ... 和...之间并且不存在（从 V1 中选择 Id，其中 V1.Id=T1.Id） ，而且也需要很长时间。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T05:47:07.230

尝试这样的事情：

```
SELECT t.Id, t.[Date]
FROM dbo.Table1 AS t
LEFT HASH JOIN dbo.View1 AS v ON v.Id = t.Id
WHERE t.[Date] >= '20120530' AND t.[Date] < '20120531'
AND v.Id IS NULL 
```

HASH 提示强制 SQL Server 查询优化器只评估一次视图。

另一种方法是使用表变量来存储视图的结果：

```
DECLARE @ViewResult TABLE (Id int PRIMARY KEY)
INSERT INTO @ViewResult 
SELECT Id FROM dbo.View1

SELECT Id, [Date]
FROM dbo.Table1
WHERE [Date] >= '20120530' AND [Date] < '20120531'
AND Id NOT IN (SELECT Id FROM @ViewResult) 
```

拉兹万

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T05:04:21.630

没有什么可做的，我想说如果必须引用该视图，那么：

```
SELECT t.Id, t.[Date]
  FROM dbo.Table1 AS t
  WHERE t.[Date] >= '20120530'
  AND t.[Date] < '20120531'
  AND NOT EXISTS 
  (
    SELECT 1 FROM dbo.View1 AS v
    WHERE v.Id = t.Id
  ); 
```

但是我怀疑如果您可以绕过视图，您可以在这里做一些更有效的事情。

# algorithm - 具有 n 个顶点的图 - 如何打印所有可能的图组合

> ID：10925909
> 
> 赞同：1
> 
> 时间：2012-06-07T04:58:47.917
> 
> 标签：algorithm, graph-algorithm

假设我们将图中的顶点数设置为 n。（我们可以通过用户输入等来设置它。）

我想打印使用边连接顶点的所有可能情况。（所以，我想打印所有可能的（简单的）n 个顶点的连接图。）

另外，对于每种情况，我想在每种情况下打印每个顶点的度数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T05:50:25.080

一个天真的但简单的解决方案是创建所有可能的图形，并过滤掉未连接的图形。

创建一组所有可能的边。有`n(n-1)/2`这些，这将是集合的大小。

找到所需集合的[幂](http://en.wikipedia.org/wiki/Power_set)集。这个幂集代表了所有可以创建的图。

维基百科文章还提供了一种计算集合的幂集的[算法。](http://en.wikipedia.org/wiki/Power_set#Algorithms)[这篇文章](https://stackoverflow.com/questions/1670862/obtaining-powerset-of-a-set-in-java)也讨论了这个问题（java）

对于创建的每个子集 - 检查它是否已连接。它可以使用诸如[BFS](http://en.wikipedia.org/wiki/Breadth-first_search)之类的发现算法来完成。当且仅当 BFS 从单个（随机）源开始时发现所有顶点时，图才连接。

# php - Codeigniter 页码正确显示？

> ID：10925911
> 
> 赞同：0
> 
> 时间：2012-06-07T04:59:05.920
> 
> 标签：php, codeigniter, pagination

我使用了codeigniter的分页......但主要问题是页码显示不正确。

在控制器中，我使用了以下代码：

```
$count = $this->db->count_all_results('table');

    $this->load->library('pagination');

    $this->load->library('pagination');
    $config['base_url'] = base_url().'/lists/';
    $config['total_rows'] = $count;

    $config['per_page'] = 2;
    $config['uri_segment'] = $this->uri->segment('2');
    $config['use_page_numbers'] = TRUE;

    $this->pagination->initialize($config);

    if($config['uri_segment']<=0) $offset = 0;
    else $offset = ($config['uri_segment'] - 1)* 2;
    $limit = 2;
    $data['infoArr'] = $this->home_model->get_all($offset, $limit);

    $this->load->view('list_info',$data); 
```

在模型中，我使用了以下代码：

```
function get_all($offset, $limit){

    return $this->db->query("SELECT * FROM table ORDER BY id DESC LIMIT $offset,$limit")->result_array();
} 
```

在我看来我用过

```
<?php echo $this->pagination->create_links(); ?> 
```

在我的表中插入了 9 信息...根据数据库分页应该显示 1 2 3 4 5 但只显示 1 2 3 > Last 。

当我点击 2 时，只显示 4 个数字，否则不显示 4 和 5 个数字......代码中的主要问题是什么......请帮助我..

提前感谢所有帮助我的人..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-18T06:04:07.350

初始化此索引，它将起作用：

```
$config['num_links'] = NUM_LINKS; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T08:22:55.730

我想你可以做一个

```
$config['num_links'] = 4; 
```

如果您想显示更多案例。否则扩展分页库来做你想做的事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T05:48:41.050

是由于这个设置：

```
$config['per_page'] = 2; 
```

上述设置适用于

```
var $per_page = 10; // Max number of items you want shown per page 
```

您要么更改为更大的数字，要么将其留空（默认为 10）

# android - 扩展 DroidGap 时出现异常

> ID：10925912
> 
> 赞同：0
> 
> 时间：2012-06-07T04:59:06.643
> 
> 标签：android

我之前做过几个电话间隙项目，这次在我的代码中提出了一个新的异常。在我的新项目中，我包含 phonegap jar（cordova 1.5），并且在清单中我声明了 droidgap 类（尝试使用 com.hb.DroidGap 和 org.apache.cordova.DroidGap）。现在，如果我扩展到 Activity 调试器进入 onCreate 方法，但如果我扩展到 DroidGap，下面的异常即将到来并且应用程序强制关闭（调试器没有进入 onCreate）......我有什么遗漏吗？在此先感谢并为我糟糕的英语感到抱歉

```
 06-07 10:03:54.954: E/AndroidRuntime(554): FATAL EXCEPTION: main
    06-07 10:03:54.954: E/AndroidRuntime(554): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.hiddenbrains/com.hiddenbrains.HBPluginsActivity}: java.lang.ClassNotFoundException: com.hiddenbrains.HBPluginsActivity in loader dalvik.system.PathClassLoader[/data/app/com.hiddenbrains-1.apk]
    06-07 10:03:54.954: E/AndroidRuntime(554):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
    06-07 10:03:54.954: E/AndroidRuntime(554):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
    06-07 10:03:54.954: E/AndroidRuntime(554):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
    06-07 10:03:54.954: E/AndroidRuntime(554):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
    06-07 10:03:54.954: E/AndroidRuntime(554):  at android.os.Handler.dispatchMessage(Handler.java:99)
    06-07 10:03:54.954: E/AndroidRuntime(554):  at android.os.Looper.loop(Looper.java:123)
    06-07 10:03:54.954: E/AndroidRuntime(554):  at android.app.ActivityThread.main(ActivityThread.java:4627)
    06-07 10:03:54.954: E/AndroidRuntime(554):  at java.lang.reflect.Method.invokeNative(Native Method)
    06-07 10:03:54.954: E/AndroidRuntime(554):  at java.lang.reflect.Method.invoke(Method.java:521)
    06-07 10:03:54.954: E/AndroidRuntime(554):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
    06-07 10:03:54.954: E/AndroidRuntime(554):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
    06-07 10:03:54.954: E/AndroidRuntime(554):  at dalvik.system.NativeStart.main(Native Method)
    06-07 10:03:54.954: E/AndroidRuntime(554): Caused by: java.lang.ClassNotFoundException: com.hiddenbrains.HBPluginsActivity in loader dalvik.system.PathClassLoader[/data/app/com.hiddenbrains-1.apk]
    06-07 10:03:54.954: E/AndroidRuntime(554):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
    06-07 10:03:54.954: E/AndroidRuntime(554):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
    06-07 10:03:54.954: E/AndroidRuntime(554):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
    06-07 10:03:54.954: E/AndroidRuntime(554):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
    06-07 10:03:54.954: E/AndroidRuntime(554):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
    06-07 10:03:54.954: E/AndroidRuntime(554):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T04:35:08.157

我也有这个确切的问题。一切都在工作，直到昨晚的特定时间，然后我开始收到这些错误。应用程序每次崩溃。我已经将问题追溯到 src>MyApp.name 中的 .java 文件...如果我删除了 cordova 行，例如。MyApp 类扩展了 DroidGap 并将其设置为应用程序不会崩溃的默认值，但它也不起作用。

# ios - iOS 代码在主线程中的 commitAnimations 上崩溃

> ID：10925919
> 
> 赞同：0
> 
> 时间：2012-06-07T04:59:32.010
> 
> 标签：ios, crash, commitanimations

我正在为滚动视图内容插图制作动画，以便下拉刷新。

```
NSLog(@" in main thread? %d", [NSThread isMainThread]); // prints 1
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:.3];
[scrollView setContentInset:UIEdgeInsetsMake(0.0f, 0.0f, scrollView.contentInset.bottom, 0.0f)];
// Crash here
[UIView commitAnimations]; 
```

提交动画时我遇到了崩溃，它使主线程崩溃。如果我删除这段代码，我的应用程序永远不会崩溃。如果它几乎缩小到这个代码块，那么此时可能导致崩溃的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T05:56:13.363

由于动画是滚动的，并且 cellForRowAtIndexPath 引用了 Core Data 获取请求的结果，因此动画导致应用程序崩溃，因为我在重新加载表视图数据之前不小心这样做了。发生这种情况是因为表格视图中的数据不再可用，因此动画滚动到不再存在的行。

经验教训——如果你正在使用滚动视图动画和核心数据，当你选择重新加载你的表视图数据时要小心。不要执行获取，然后滚动，然后重新加载表视图数据。执行获取，然后重新加载表视图数据，然后滚动。

如果崩溃时出现错误消息，那将非常明显。

# c - fork() 和 execvp()

> ID：10925921
> 
> 赞同：0
> 
> 时间：2012-06-07T04:59:44.093
> 
> 标签：c, fork, execvp

我在尝试使用`fork()`and执行进程时遇到问题`execvp()`。我有一个结构`Pcb`，它有一个参数数组（`args`）：

```
#define MAXARGS 2

struct pcb {
    pid_t pid;             // system process ID
    char *args[MAXARGS];  // program name and args
    int arrivaltime;
    int remainingcputime;
    struct pcb * next;     // links for Pcb handlers
    int priority, memalloc, res1, res2, res3, res4, status;
};
typedef struct pcb Pcb;
typedef Pcb * PcbPtr; 
```

其中第一个是要执行的程序的名称。

这是我的叉子功能

```
PcbPtr startPcb(PcbPtr process) {
    int pid;
    switch (pid=fork()) {
        case -1:
            return NULL;
        case 0:
            execvp(process->args[0], process->args);
        default:
            return process;
    }
    process->status = 2;
    return process;
} 
```

*注意：`process->args[0]`只是一个名为“process”的常量字符串，它指的是当前目录中名为“process”的编译程序。*
没有论据。

当我使用 gdb 并遵循子进程时，它只是说：

```
[New process 15186]
[Switching to process 15186]
13                              execvp(process->args[0], process->args);
(gdb)

Program received signal SIGTSTP, Stopped (user).
startPcb (process=0x602250) at util.c:13
13                              execvp(process->args[0], process->args);
(gdb) 
```

为什么会收到 SIGSTP？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T05:42:55.693

原来我没有在 args[0] 中指定完整路径

# cakephp-2.0 - 在嵌套的一对多关系中检索数据的最佳方法

> ID：10925922
> 
> 赞同：1
> 
> 时间：2012-06-07T04:59:54.403
> 
> 标签：cakephp-2.0

我有以下模型：客户端、设备和修订版

Cliente 有很多 Device，Device 有很多 Revision

我想从客户端检索所有最新版本。我知道我可以在客户端使用 recursive=2 ，我会得到这样的修订：

```
$client['Client']['Device'][$i]['Revision'] //(array of revisions) 
```

我真正想要的是获得这样的最新版本：

```
$client['Client']['Revision'][$i] //(array of revisions)
$client['Client']['Revision'][$i]['Device'] //and I may see the device like this. I know this is duplicated info, but the order is pretty much different. 
```

我知道有很多方法可以做到这一点。我认为大部分涉及使用直接 SQL 或处理数组，但实际上是否有一种方法可以通过传递参数来做到这一点？

我还想过首先获取某个客户端的所有device_id，然后找到device_id IN（device1_id，device2_id，...）的所有修订版，但我真的不是这个，想，不确定是否有更好的方法.

# java - 使用 Java 线程创建一个测试碰撞检测的对象

> ID：10925932
> 
> 赞同：1
> 
> 时间：2012-06-07T05:01:52.920
> 
> 标签：java, multithreading, collision-detection

我正在使用 acm 库（acm.jar），这是斯坦福学生在他们的 Java 课程 CS106A 中使用的同一个库，可以更轻松地创建图形应用程序。

acm.jar 可以在这里找到：http: [//jtf.acm.org/](http://jtf.acm.org/)

以下代码将字符精灵添加到图形窗口。如果我按 z ，角色会通过使用 Java 线程来动画自己移动他的弓和箭开始垂直移动。到目前为止没有错误。

现在我希望能够在线程上执行碰撞检测`GImage object(linkArrow)`。当我尝试这样做时，我的程序中发生了错误：

```
arrowPoint = new GPoint(linkArrow.getX(),linkArrow.getY());
arrowObject = getElementAt(arrowPoint); 
```

我收到此错误：

```
Exception in thread "AWT-EventQueue-1" java.lang.NullPointerException 
```

您可以 ctrl+f 并键入 bug 以查看我的程序的错误位置。

在使用我的游戏“BreakOut”使用图形矩形和椭圆之前，我已经完成了碰撞检测，`GPoint`并且`getElementAt`从未遇到过使用`GPoint`and的问题`getElementAt`。

这是我的代码：第一类是运行线程的主程序。第二类是线程。

```
 import java.awt.event.KeyEvent;
        import acm.graphics.GImage;
        import acm.program.GraphicsProgram;
        import acm.util.RandomGenerator;

        public class Link extends GraphicsProgram {

            private static final double GRAVITY = 1;
            public void init(){
                setSize(APPLICATION_WIDTH, APPLICATION_HEIGHT);
                addLink();

                addKeyListeners();
        }

            private void addLink(){
                linkCharacter = new GImage("link sprites/linkFaceRight/link_frame_1_face_right.png");
                add(linkCharacter,link_Location_XCoord,link_Location_YCoord);
            }

          public void keyPressed(KeyEvent e){ 
                /* Link's Movement
                 * 
                 */
              char linkMoveRightKey = e.getKeyChar();
            if(linkMoveRightKey == 'z')
                    {

                    xSpeed = 0;
                    ySpeed = 0;
                    pause(arrowDELAY);
                    linkCharacter.move(xSpeed, ySpeed);
                    linkCharacter.setImage(linkAttackWithBow[linkFrame]);

                    linkFrame++;
                    callArrow();

 // BUG 
           arrowPoint = new GPoint(linkArrow.getX(),linkArrow.getY());
           arrowObject = getElementAt(arrowPoint);

           }
  //                  

                   /*
                    * summon link's arrow
                    */
                    }

                    if(linkFrame>=linkAttackWithBow.length){
                        linkFrame = 0;
                    }

            }

            private void callArrow(){
                if(linkFrame == 2){
                 linkArrow = new ArrowThread(SIZE, rgen.nextColor());
                add(linkArrow,linkCharacter.getX(),linkCharacter.getY());

                Thread arrowThread = new Thread(linkArrow);
                arrowThread.start();

                }
            }

        private ArrowThread linkArrow;
            private int SIZE = 400;

            private RandomGenerator rgen = RandomGenerator.getInstance();
            private GImage gameBackgroundImage;

            private GImage linkCharacter;

            private double arrowDELAY = 28;

            private  int link_Location_XCoord = 50;
            private  int link_Location_YCoord = 50 ;
            private final int APPLICATION_WIDTH = 1200;
            private final int APPLICATION_HEIGHT = 800;
         private String[] linkAttackWithBow = {"link sprites/linkAttackWithBow/Link_Bow_Attack_Frame_1.png","link sprites/linkAttackWithBow/Link_Bow_Attack_Frame_2.png","link sprites/linkAttackWithBow/Link_Bow_Attack_Frame_3.png","link sprites/linkAttackWithBow/Link_Bow_Attack_Frame_1.png","link sprites/linkAttackWithBow/Link_Bow_Attack_Frame_2.png","link sprites/linkAttackWithBow/Link_Bow_Attack_Frame_3.png","link sprites/linkAttackWithBow/Link_Bow_Attack_Frame_1.png","link sprites/linkAttackWithBow/Link_Bow_Attack_Frame_2.png"};

            private int linkFrame = 0;
            private int xSpeed =5; //the number of pixels to move in x
            private int ySpeed = 0; //0 so you only move horizontally
        } 
```

这是我的 Thread 类来产生箭头

```
import java.awt.Color;

import acm.graphics.GImage;

public class ArrowThread extends GImage implements Runnable{

    public ArrowThread(int SIZE,Color color){
        super("link sprites/linkAttackWithBow/arrow.png", SIZE,SIZE);

    }

    public void run(){
        for(int i = 0; i < 1000/STEP;i++){
            pause(60);

            move(arrowSpeedX,arrowSpeedY);

        }

    }

    private static final int arrowSpeedX = 0;
    private static final int arrowSpeedY = -5;

    private static final double STEP  = 5; 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T06:40:00.283

看起来问题是该成员`linkArrow`在第一帧上为空。查看检查：

```
if(linkFrame == 2){
    linkArrow = new ArrowThread(SIZE, rgen.nextColor()); 
```

# iphone - 在 iphone/ipad 应用程序中的应用程序内购买中恢复功能

> ID：10925933
> 
> 赞同：2
> 
> 时间：2012-06-07T05:01:53.250
> 
> 标签：iphone, objective-c, xcode, ios5, in-app-purchase

我在我的应用程序中集成了应用内购买并在我的设备上进行了测试。它工作正常。但是当我在 iTunes 商店上传二进制文件时，Apple 拒绝了我的申请，原因如下：

```
"We found that your app offers In-App Purchase/s that can be restored but it does not    
include a "Restore" feature to allow users to restore the previously purchased In-App     
Purchase/s." 
```

我无法理解实际的问题是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T23:59:17.447

您是否偶然使用 MKStoreKit？我是，并且收到了同样的拒绝信息。

为了解决这个问题，我添加了一个按钮，上面写着“恢复应用内购买”，并`restorePreviousTransactionsOnComplete:onError:`允许用户恢复任何以前购买的 IAP。

# entity-framework - 按特定顺序保存实体

> ID：10925934
> 
> 赞同：0
> 
> 时间：2012-06-07T05:02:21.710
> 
> 标签：entity-framework

我正在使用实体框架并遇到了一个奇怪的问题。我正在尝试将集合保存到数据库中（例如：回合集合）。现在这个集合中的每个项目又都有一个子元素的集合（比如：事件集合）。

看起来像这样：

```
Round 1
    (No Child Elements)
Round 2
    Event 1
    Event 2
    Event 3
Round 3
    (No Child Elements)
Round 4
    Event 1
    Event 2 
```

如上所示，父对象不一定总是有一个子集合。

现在问题来了：我的要求是我想保存已添加到集合中的数据。但是，在保存 EF 时，首先保存具有子集合的项目，因此在保存时会修改顺序。因此，在数据库中，第 2 轮首先保存，然后其他随机保存。

有什么方法可以强制 EF 按照我构建的顺序保存 Rounds 集合？它应始终从第 1 轮开始保存，并应以保存第 4 轮结束。

多谢你们 ： ）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T07:33:41.017

数据库或 EF 都不保证排序。同样，如果您查询数据库，则不必按预期顺序获取元素。如果你想要准确的顺序，你必须添加额外的列来保持记录的排序值，并`OrderBy`在检索数据时使用扩展方法。

执行的操作顺序`SaveChanges`完全由 EF 控制。你不能改变它。

# r - 如何使用 plot.mcmc 将垂直线添加到后密度图？

> ID：10925944
> 
> 赞同：3
> 
> 时间：2012-06-07T05:03:16.113
> 
> 标签：r, jags

我经常在具有已知参数的模拟数据上运行 JAGS 模型。我喜欢对象的默认绘图方法`mcmc`。但是，我想`abline(v=TRUE_VALUE)`为每个建模的参数添加一个。这可以让我快速检查后验是否合理。

当然，我可以手动执行此操作，或者可能重新发明轮子并编写我自己的函数。但我想知道是否有一种基于现有方法的优雅`plot`方法。

这是一个工作示例：

```
require(rjags)
require(coda)

# simulatee data
set.seed(4444)
N <- 100 
Mu <- 100
Sigma <- 15
y <- rnorm(n=N, mean=Mu, sd=Sigma)
jagsdata <- list(y=y)

jags.script <- "
model {
    for (i in 1:length(y)) {
        y[i]  ~ dnorm(mu, tau)
    }
    mu  ~ dnorm(0, 0.001)    
    sigma ~ dunif(0, 1000)
    tau <- 1/sigma^2
}"

mod1 <- jags.model(textConnection(jags.script), data=jagsdata, n.chains=4, 
                   n.adapt=1000)
update(mod1, 200) # burn in
mod1.samples <- coda.samples(model=mod1,
                             variable.names=c('mu', 'sigma'),
                             n.iter=1000)                  
plot(mod1.samples) 
```

![在此处输入图像描述](../Images/88d685e31aa436f8a53d15ec64cd5775.png)

我只想`abline(v=100)`为 mu 和`abline(v=15)`sigma 运行类似的东西。当然，在许多其他示例中，我将有 5、10、20 个或更多感兴趣的参数。因此，我对能够为命名参数提供真值向量很感兴趣。

我看过了`getAnywhere(plot.mcmc)`。修改它是一个好方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T06:32:48.050

好的。所以我修改`plot.mcmc`为如下所示：

```
my.plot.mcmc <- function (x, trace = TRUE, density = TRUE, smooth = FALSE, bwf, 
    auto.layout = TRUE, ask = FALSE, parameters, ...) 
{
    oldpar <- NULL
    on.exit(par(oldpar))
    if (auto.layout) {
        mfrow <- coda:::set.mfrow(Nchains = nchain(x), Nparms = nvar(x), 
            nplots = trace + density)
        oldpar <- par(mfrow = mfrow)
    }
    for (i in 1:nvar(x)) {
        y <- mcmc(as.matrix(x)[, i, drop = FALSE], start(x), 
            end(x), thin(x))
        if (trace) 
            traceplot(y, smooth = smooth, ...)
        if (density) {
            if (missing(bwf)) {
                densplot(y, ...); abline(v=parameters[i])
            } else densplot(y, bwf = bwf, ...)
        }
        if (i == 1) 
            oldpar <- c(oldpar, par(ask = ask))
    }
} 
```

然后运行命令

```
my.plot.mcmc(mod1.samples, parameters=c(Mu, Sigma)) 
```

产生这个

![在此处输入图像描述](../Images/2b8d30786ba112f6d3fc48b367139c63.png)

请注意，它`parameters`必须是一个值向量，其排序顺序与 JAGS 对变量的排序顺序相同，这似乎是按字母顺序排列，然后按数字顺序排列。

### 得到教训

*   默认情况下，简单地编写一个 new`plot.mcmc`不起作用大概是因为命名空间。所以我刚刚创建了一个新功能
*   我不得不更改`set.mfrow`为`coda:::set.mfrow`大概也是因为命名空间。
*   我将 ask 更改为`ask=FALSE`，因为 RStudio 允许浏览数字。

我很高兴听到有关覆盖或调整现有 S3 方法的更好方法的任何建议。

# macos - 有没有办法找到我的 Mac Appstore 应用程序的活跃用户数？

> ID：10925945
> 
> 赞同：3
> 
> 时间：2012-06-07T05:03:20.637
> 
> 标签：macos, statistics, app-store

我最近在 Mac Appstore 上发布了我的免费应用程序。我试图找出有多少用户实际使用它。看起来苹果只告诉我下载次数。

以前我有自己的统计系统，显示安装和每日活跃用户。这就是为什么我确定安装总和不等于总用户数的原因。

所以我的问题是如何在不将我自己的报告系统添加到应用程序的情况下找出我的 Appstore 应用程序的每日活跃用户数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T21:43:27.667

据我所知，没有人在 Apple 为您收集此类数据。如果您想获得与下载次数不同的此类统计信息，则必须使用自己的实现或类似[此服务](http://www.flurry.com/product/analytics/index.html)的网站。

# php - 将 SQL 查询结果呈现为 HTML 表

> ID：10925953
> 
> 赞同：0
> 
> 时间：2012-06-07T05:04:24.787
> 
> 标签：php, html, sql

我需要帮助在 PHP 中呈现数据：

我想使用 SQL 查询的结果来填充一个表，在 4 列网格中显示图像。这是我到目前为止所写的：

```
$result = mysql_query("SELECT * FROM gallery ORDER BY id ASC ");

while($row = mysql_fetch_array($result))
{
    echo "<td align=\"center\" ><a href=\"upload_gallery/".$row['image_name']."\" rel=\"prettyPhoto[gallery1]\" title=\" \"><img src=\"upload_gallery/thumbnail/sml_".$row['image_name']."\" width=\"200\" height=\"170\" /></a></td>";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T05:12:07.467

```
<table><tr>
<?$result = mysql_query("SELECT * FROM gallery ORDER BY id ASC ");
$result =mysql_fetch_array($result)
$count=0;
for($row =0; $row<count($result); $row++)
{
$count++
if($count==4){
echo '</tr><tr>';
$count=0;
}
echo "<td align=\"center\" ><a href=\"upload_gallery/".$row['image_name']."\" rel=\"prettyPhoto[gallery1]\" title=\" \"><img src=\"upload_gallery/thumbnail/sml_".$row['image_name']."\" width=\"200\" height=\"170\" /></a></td>";

} 

?>
</tr>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T05:15:35.697

您可以按照 Frederick 的建议执行 for 循环：

```
$num_rows = mysql_num_rows($result);

for($i = 0; $i < $num_rows; $i++)
{
    // Check if beginning of row
    if($i % 4 == 0)
    {
        //If not the first row, end the last row first
        if($i > 0)
        {
            echo "</tr>";
        }
        echo "<tr>";
    }

    $row = mysql_fetch_assoc($result);
    //Output each individual image
    echo "<td> {*EACH IMAGE code*}</td>";
} 
```

这应该给你的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T05:31:11.880

试试这个：

```
$arr =array("Test1","Test2","Test3","Test4","Test5","Test6","Test7","Test8","Test9","Test10");
echo "<table><tr>";
for($i = 1 ; $i <= count($arr) ; $i++)
{
    echo"<td>".$arr[$i-1]."</td>";
    $last = $i % 4 == 0? "<tr/><tr>":"";
    echo $last;
}
echo "</table>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T05:55:38.797

试试这个，希望对你有用

```
while($row = mysql_fetch_array($result))
{
$data[]= $row['image_name'];## Pass the image data to new array
} 

$ImagePerRow = 4;### Set the value of image per table row
echo "<table border='1'><tr>";

 foreach($data as $key => $ImageName)
 {
    if(($key+1) == $ImagePerRow)## if key index+1 is equal to ImagePerRow
    {
    echo "<td align=\"center\" ><a href=\"upload_gallery/".$ImageName."\" rel=\"prettyPhoto[gallery1]\" title=\" \"><img src=\"upload_gallery/thumbnail/sml_".$ImageName."\" width=\"200\" height=\"170\" /></a></td></tr><tr>";## then close the table row and start a new table row
    $ImagePerRow+=4;### Add a value of 4 in order to increment the imageperRow value on the next loop
    }else{
    echo "<td align=\"center\" >".$ImageName."</td>";### else echo the normal table data
    }
 }
echo "</tr></table>"; 
```

# jquery - jQuery Mask Money 和 Primefaces inputmask 冲突

> ID：10925958
> 
> 赞同：1
> 
> 时间：2012-06-07T05:05:21.723
> 
> 标签：jquery, jsf, primefaces

问题是两者中只有一个同时工作。

我正在使用的代码如下

```
<h:outputScript  library="primefaces" name="jquery/jquery.js" target="head"/>     
<h:outputScript name="jquery.maskMoney.js" library="js" target="head"/>

<script type="text/javascript">
        $(".currencyInput").live("focus", function(){
        $(this).maskMoney({thousands:".", allowZero:false, allowNegative:false, decimal:","});
        $(this).bind('paste', function(){return false;});
        $(this).bind('drop', function(){return false;});
    })
</script> 
```

然后我只是将样式类放入一些输入中......

当我从 Prime 的面具中取出第二行时，显然 maskMoney 不起作用，否则，maskMoney 起作用而 Prime 的面具不起作用。

有什么建议么？

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T05:51:53.620

似乎这是一个已知问题[jquery-maskmoney Conflicts with maskedinput.js](https://github.com/plentz/jquery-maskmoney/issues/35)

（maskedinput.js 是 primefaces 使用的 jquery 插件）

[所以尝试从这里jquery-maskmoney](https://github.com/plentz/jquery-maskmoney)升级到最新版本的 maskmoney 插件

如果这没有帮助，请从此处获取 primefaces 正在使用的最新版本的 jquery mask 插件[Masked Input Plugin](http://digitalbush.com/projects/masked-input-plugin/)

# javascript - jQuery this.data-x 不工作

> ID：10925965
> 
> 赞同：1
> 
> 时间：2012-06-07T05:06:27.657
> 
> 标签：javascript, jquery

我有一个包含元素周期表的表，这个 jQuery 可以在您单击一个元素的名称时告诉您它的全名是什么。

但是，当我单击一个时，什么也没有发生……我尝试了不同的语法等，但仍然没有。

这是我的表格 HTML 的样子（class="s-4" 表示 font-size:4; - 对这个问题没有任何意义）：

```
<td class="s-4"><a class="e" href="#" data-e="B">B</a></td>
<td class="s-4"><a class="e" href="#" data-e="C">C</a></td>
<td class="s-4"><a class="e" href="#" data-e="N">N</a></td>
<td class="s-4"><a class="e" href="#" data-e="O">O</a></td>
<td class="s-4"><a class="e" href="#" data-e="F">F</a></td>
<td class="s-4"><a class="e" href="#" data-e="Ne">Ne</a></td> 
```

这是我的 jQuery/JavaScript 的样子：

```
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">
    $(document).ready(function() {
    $(".e").click(function() {
    var e = this.data-e;
      if(e == 'H') { $("#a").html('H is Hydrogen'); }
      if(e == 'He') { $("#a").html('He is Helium'); }
      if(e == 'Li') { $("#a").html('Li is Lithium'); }
      if(e == 'Be') { $("#a").html('Be is Beryllium'); }
      if(e == 'B') { $("#a").html('B is Boron'); }
      if(e == 'C') { $("#a").html('C is Carbon'); }
      if(e == 'N') { $("#a").html('N is Nitrogen'); }
etc etc... and then

    });
    });
    </script> 
```

#a 指的是我页面顶部的 <h1> ，而 .e 指的是链接（单击以查找元素的名称）

有没有人有任何想法？
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T05:07:20.930

```
var e = this.data-e 
```

应该

```
var e = $(this).data('e'); 
```

或者

```
var e = $(this).attr('data-e'); 
```

阅读**[.data()](http://api.jquery.com/data/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T05:08:52.827

您要访问的属性 data-e 在您的代码中有错误的语法。

语法错误

```
var e = this.data-e; 
```

正确的语法

```
var e =  $(this).attr(data-e); 
```

您的代码将是

```
$(document).ready(function() {
$(".e").click(function() {
var e = $(this).attr(data-e);
    if(e == 'H') { $("#a").html('H is Hydrogen'); }
  if(e == 'He') { $("#a").html('He is Helium'); }
  if(e == 'Li') { $("#a").html('Li is Lithium'); }
  if(e == 'Be') { $("#a").html('Be is Beryllium'); }
  if(e == 'B') { $("#a").html('B is Boron'); }
  if(e == 'C') { $("#a").html('C is Carbon'); }
  if(e == 'N') { $("#a").html('N is Nitrogen'); }
etc etc... and then

});
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T05:08:28.047

```
var e = this.data-e 
```

应该

```
var e = $(this).attr(data-e); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T05:10:43.497

改变这个

```
var e = this.data-e 
```

有了这个

```
var e = $(this).attr("data-e"); 
```

# database - 排他弧和多个多对多关系数据库设计问题

> ID：10925968
> 
> 赞同：1
> 
> 时间：2012-06-07T05:07:03.890
> 
> 标签：database, postgresql, database-design, many-to-many

我有一个现有的应用程序，在数据库中有以下实体

*   顾客
*   发票组
*   销售组

一个客户可以是多个组的一部分。目前这是通过以下方式映射的

```
Customer table
 - cid (Pk)
 - fname
 - surname
 ----
 ---
 - invgrpdid (Fk)
 - salesid (Fk)

Invoicegroup table
 - invgrpid (Pk)
 - name
 - type
 ---
 ----

Salesgroup table
 - salesid (Pk)
 - name
 - desc
 -----
 ----- 
```

我现在需要添加一个新的实体广告系列。一个客户可以是多个活动的一部分。为通过以下方式创建的客户组部署活动 - 选择单个客户（自定义）或 - 选择现有发票组（发票）或 - 选择现有销售组（销售）

活动客户列表应 - 可重复使用，即可用于多个活动 - 动态，即如果从发票/销售组创建，发票和销售组之间的更改应反映到活动客户列表

我在设计动态需求时遇到了困难。我提出了以下设计，但它具有专有弧，即一个键引用多个外键，这不是推荐的方法。我想过超类型和子类型，但我不清楚设计多对多关系。

```
campaign
 - campaignid(Pk)
 - name
 - startdate
 - status
 ------

campaignlist
 - listid(Pk)
 - listname
 - listtype - Invoice, Sales, Custom
 - typeid (Fk) - Refers to invoicegroupid or salesgroupid depending on listtype
 -----

customercampaign
  - listid (Fk)
  - customerid (Fk)
  - status
  - dateupdated
  ------------- 
```

考虑到参照完整性和规范化，什么是更好的设计方法。每天多次运行的最频繁查询是检索客户的所有活动信息。所以需要注意多个表和连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T05:36:58.943

在第一次刺伤时，我会做这样的事情：

```
CampaignList
    - ID (PK)
    - Name

CustomerCampaignList
    - CampaignListID (FK to CampaignList.ID)
    - CustomerID (FK)
      UNIQUE (CampaignListID, CustomerID)

SalesGroupCampaignList
    - CampaignListID (PK,FK to CampaignList.ID)
    - SalesGroupID (FK)
      UNIQUE (CampaignListID, SalesGroupID)

InvoiceGroupCampaignList
    - CampaignListID (PK,FK to CampaignList.ID)
    - InvoiceGroupID (FK)
      UNIQUE (CampaignListID, InvoiceGroupID) 
```

即使用表继承。这是一个相当标准化的设计，在我看来，这是在您尚未了解具体要求时采用的方法。或者，您可以通过将 a 反规范化一点并将 a`CampaignListTypeID`放入`CampaignList`表中来使您的生活更轻松。但是，在这种情况下，如果不在触发器中编写逻辑，就很难保持数据模型的完整性。

我假设您永远不必做有趣的组合组，例如 2 x 销售组 + 发票组 + 一组客户。

# c# - 登录 Visual Studio 2010 后代码无法正常工作的原因是什么？

> ID：10925969
> 
> 赞同：1
> 
> 时间：2012-06-07T05:07:15.193
> 
> 标签：c#, c#-4.0, dll, reference, code-signing

我得到“引用的程序集'xxxxxxxxxx.GPUImage'没有强名称错误”，根据*[如何修复“引用的程序集没有强名称”错误](https://stackoverflow.com/questions/331520/how-to-fix-referenced-assembly-does-not-have-a-strong-name-error-vs2005)*，我已经纠正了这个问题。我也添加了正确的引用。（我在其他两个第三方程序集上遇到了这个问题，并且在签署它们后它们可以正常工作。）

但是在我签名之后，它给出了一个之前没有给出的新错误。如下。

```
Error    2    The type 'xxxxxxxxxx.GPUImage.ImageFilter' is defined in an assembly
that is not referenced. You must add a reference to assembly 'xxxxxxxxxx.GPUImage',
Version=2.0.0.0, Culture=neutral, 'PublicKeyToken=null'. 
```

这是什么原因？.dll 可以与签名中的未分配 .dll 组成吗？

正如@eric 所提到的，我运行 fusion log，以下是日志文件。

![在此处输入图像描述](../Images/695b67ad8981cc5fff47a11e25f2a8dc.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T05:49:00.227

在硬盘上搜索所有出现的未签名程序集，然后删除它们 - 只保留签名版本。然后进行完整的重建。它要么工作，要么你会发现谁在引用旧程序集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T06:22:57.993

学习和使用 Process Monitor，然后你可以看到你的进程尝试从哪里加载程序集，

[http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)

知道所有位置后，继续删除那些未签名的版本。通常它们可能会被您的单元测试套件或其他东西缓存在某个地方。通过删除它们，您应该能够解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T05:09:52.493

解决方案中的某些程序集仍在引用定义 GPUImage.ImageFilter 的程序集的未签名版本。你从`PublicKeyToken=null`.

[尝试使用Fusion Log Viewer 查看](http://msdn.microsoft.com/en-us/library/e74a18c4%28v=vs.100%29.aspx)加载是如何解决的。它应该告诉您哪个程序集试图引用未签名的程序集。

# javascript - 将 XML 转换为 HTML：最佳实践？

> ID：10925970
> 
> 赞同：7
> 
> 时间：2012-06-07T05:07:16.700
> 
> 标签：javascript, xml, xslt

我有这样的 XML：

```
<Artist name="Syd Mead" id="3412" ntrack="28" pop="8"/> 
```

我需要在 HTML 标记中使用：

```
<a href="#" data-name="Syd Mead" data-id="3412"
  data-ntrack="28" data-pop="8"
  class="pop-8"><span>Syd Mead</span></a> 
```

对于最广泛的浏览器，执行此操作的“正确”方法是什么？这可以通过 XSLT 转换可靠地完成吗？使用正则表达式（不太可能）更好还是我必须解析出xml，并为每个`<Artist>`标签读取每个属性并手动执行document.createElement和setAttribute？

标签位于父节点中，其中`<Artist>`有很多。对此有最佳做法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T05:28:09.063

这看起来像是 XSLT 的完美候选 - XML 干净且格式良好。如果您担心浏览器兼容性，为什么不在服务器端进行转换呢？

此 XSLT 将转换您的数据 - 您可以[在此处](http://xslt.online-toolz.com/tools/xslt-transformation.php)对其进行测试：

源数据：

```
<Artists>
    <Artist name="Syd Mead" id="3412" ntrack="28" pop="8"/>
</Artists> 
```

XSLT：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">
    <xsl:for-each select="Artists/Artist">
        <a href="#">
            <xsl:attribute name="data-id">      
                <xsl:value-of select="@id"/>
            </xsl:attribute>
            <xsl:attribute name="data-ntrack">      
                <xsl:value-of select="@ntrack"/>
            </xsl:attribute>
            <xsl:attribute name="data-pop">      
                <xsl:value-of select="@pop"/>
            </xsl:attribute>
            <xsl:attribute name="data-name">      
                <xsl:value-of select="@name"/>
            </xsl:attribute>
           <xsl:attribute name="class">    
                <xsl:value-of select="concat('pop-',@pop)"/>
           </xsl:attribute>

            <span><xsl:value-of select="@name"/></span>
        </a>
    </xsl:for-each>
</xsl:template>
</xsl:stylesheet> 
```

我还没有在客户端这样做，所以很遗憾我不能谈论浏览器的兼容性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-07T12:36:04.243

**这是一个简单的（没有条件，没有额外的模板，没有`xsl:attribute`，没有`xsl:for-each`），简短而完整的转换**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="no"/>

 <xsl:template match="Artist">
     <a href="#" data-name="{@name}"
                 data-id="{@id}"
                 data-ntrack="{@ntrack}"
                 data-pop="{@pop}"
                 class="pop-{@pop}">
    <span><xsl:value-of select="@name"/></span>
  </a>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<Artist name="Syd Mead" id="3412" ntrack="28" pop="8"/> 
```

**产生了想要的正确结果**：

```
<a href="#" data-name="Syd Mead" data-id="3412" data-ntrack="28" data-pop="8" class="pop-8"><span>Syd Mead</span></a> 
```

**说明**：正确使用**[AVT](http://www.w3.org/TR/1999/REC-xslt-19991116#attribute-value-templates)**（属性值模板）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T06:51:11.160

这是另一个在我看来更简单的 XSLT 样式表选项：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html"/>

    <xsl:template match="/*/Artist">
        <a href="#" class="pop-{@pop}"> 
            <xsl:apply-templates select="@*"/>
            <span><xsl:value-of select="@name"/></span>
        </a>        
    </xsl:template>

    <xsl:template match="@*">
        <xsl:attribute name="data-{name()}">
            <xsl:value-of select="."/>
        </xsl:attribute>
    </xsl:template>

</xsl:stylesheet> 
```

**XML 输入**

```
<Artists>
    <Artist name="Syd Mead" id="3412" ntrack="28" pop="8"/> 
</Artists> 
```

**HTML 输出**

```
<a class="pop-8" href="#" data-name="Syd Mead" data-id="3412" data-ntrack="28" data-pop="8">
  <span>Syd Mead</span>
</a> 
```

# android - 如何在 Android 相机预览上叠加视频视图？

> ID：10925971
> 
> 赞同：2
> 
> 时间：2012-06-07T05:07:17.510
> 
> 标签：android, video, android-camera

我已经尝试了很多方法来通过相机预览播放视频，但都没有运气。视频正在播放，但它在相机预览的背景中。谁能告诉我该怎么做？我正在使用 android api 10 和三星 Galaxy s2(os-2.3.3)。当我在三星galaxy-Y（os-2.3.6）上尝试相同时，它工作正常，所以我的问题是什么是正确的方法，为什么它适用于galaxy-Y而不是galaxy s2。

# iphone - iphone中的didselectrowindexpath和willselectrowindexpath有什么区别？

> ID：10925973
> 
> 赞同：5
> 
> 时间：2012-06-07T05:07:31.893
> 
> 标签：iphone, ios5, uitableview, didselectrowatindexpath

解释一下`UITableView`委托方法之间的区别：

`didDeselectRowAtIndexPath`：

```
-(void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath 
```

和

`willSelectRowAtIndexPath`

```
-(NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T05:25:07.547

`willSelectRowAtIndexPath``UITableView`在用户从触摸特定行抬起手指之后和之前将消息发送给代表`didSelectRowAtIndexPath`。

`willSelectRowAtIndexPath`允许您通过返回 来确认可以选择特定行`indexPath`，或者通过提供替代来选择不同的行`indexPath`。

祝你好运

吨

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-07T05:29:11.670

写的代码

```
-(void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath(NSIndexPath*)indexPath 
```

方法在选择行并写入代码后运行

```
-(NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath(NSIndexPath*)indexPath 
```

在所选行之前运行。

它们与

```
- (void)viewDidAppear:(BOOL)animated and - (void)viewWillAppear:(BOOL)animated 
```

如果您现在有任何困惑，请告诉我。

# php - SORT_LOCALE_STRING 的示例使 array_unique 有所不同

> ID：10925985
> 
> 赞同：1
> 
> 时间：2012-06-07T05:08:37.757
> 
> 标签：php, arrays, locale

是否有任何使用 SORT_LOCALE_STRING 的示例，它会在使用 array_unique 时给出与默认 SORT_STRING 不同的结果？

下面是一些代码，展示了如何在 SORT_STRING、SORT_REGULAR、SORT_NUMERIC 之间获得不同的结果。

```
<?php
$list = array(
  '0',
  null,
  0,
  10,
  '10.0',
  '1e1',
  false,
  ''
);
var_dump(array_unique($list));
var_dump(array_unique($list, SORT_NUMERIC));
var_dump(array_unique($list, SORT_REGULAR)); 
```

输出：

```
array(5) {
  [0]=>
  string(1) "0"
  [1]=>
  NULL
  [3]=>
  int(10)
  [4]=>
  string(4) "10.0"
  [5]=>
  string(3) "1e1"
}
array(2) {
  [0]=>
  string(1) "0"
  [3]=>
  int(10)
}
array(4) {
  [0]=>
  string(1) "0"
  [1]=>
  NULL
  [3]=>
  int(10)
  [7]=>
  string(0) ""
} 
```

请帮我找到一个说明 SORT_LOCALE_STRING 用法的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T06:12:57.947

我猜是德语，`ß`我`ss`认为在字典上是平等的。基本上，它们应该被认为是相同的字符和排序。如果您不使用对语言环境敏感的字符串比较（排序是字符串比较），那么，我认为很明显这两个字符串不会比较为相等。

```
$array = array('ß', 't', 'ss');
//binary safe transport of the above chars as present in my text editor
$array = unserialize(base64_decode('YTozOntpOjA7czoxOiLfIjtpOjE7czoxOiJ0IjtpOjI7czoyOiJzcyI7fQ=='));
setlocale(LC_ALL, 'de_DE@euro', 'de_DE', 'deu_deu');
echo setlocale(LC_ALL, '0'), "\n";
var_dump(strcoll('ß', 'ss'));
var_dump(array_unique($array, SORT_LOCALE_STRING)); 
```

产量，在我的机器上（win7，php5.4rc2）

```
German_Germany.1252
int(0)
array(2) {
  [0]=>
  string(1) "ß"
  [1]=>
  string(1) "t"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T05:22:10.293

排序区域设置基本上是按当前设置的区域设置进行排序，例如：

```
$array = array('C', 'A', 'Ą');
setlocale(LC_ALL, 'lt_LT');
sort($array, SORT_LOCALE_STRING);

var_dump($array)
//will output $array = array('Ą', 'A', 'C'), 
//without flag
//$array = array('A', 'C', 'Ą'); 
```

# tfs - TFS 什么是保留结帐选项

> ID：10925990
> 
> 赞同：2
> 
> 时间：2012-06-07T05:09:11.980
> 
> 标签：tfs

在 TFS 中，Visual Studio 中有一个选项可以“签入时保留已签出的项目”，提供这样一个选项的目的是什么？

我正在尝试构建一个报告工具来查找已签出的文件列表，因此如果用户设置了上述选项，我的报告将是准确的，因为开发人员总是可以声称“嘿，我的所有更改已签入”

我如何在我的报告中反映这种结帐？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T05:21:45.213

当其他开发人员需要我正在处理的部分工作时，我会使用此功能，但我实际上还没有完成整个任务。

您的报告仍然是准确的，因为它是系统的真实反映 - 代码确实已签出，并且开发人员可能仍在处理该文件。您真正知道是否所有更改都已签入的唯一方法是将源代码管理中的当前版本与每个开发人员在本地签出的副本进行比较，这对于报告目的是不可行的，并且可能价值有限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T09:42:04.107

在现代 CI 环境中，提交更改并简单地不断更改相同的模块是很常见的。
另一方面，一旦达到里程碑，开发人员只需提交更改并开始处理其他事情。

所以，我认为 TFS 提供这个可配置的标志是很自然的。

TFS 生态系统的另一个主要功能是 gated-checkin：这种模式是在所有成功后提交被搁置、构建和提交。如果没有此选项，开发人员将不得不原地不动并等待该过程完成。

我不同意开发人员说“嘿，我的所有更改都已签入”：我们团队的原则是签出的所有内容都在开发中，
您可以考虑一个规则，即每个开发人员的所有未决更改都在工作日结束时被搁置。我个人反对任何此类措施，但如果我的开发人员不适应该原则，我肯定会考虑将它们作为一种选择。

如果您同意上述观点，那么您的第二个问题将变得相当过时：在我看来，没有几种“类型”的结帐。

# javascript - Titanium Appcelerator 打开新窗口和上一个标题的动态后退按钮

> ID：10925991
> 
> 赞同：2
> 
> 时间：2012-06-07T05:09:22.500
> 
> 标签：javascript, iphone, titanium, titanium-mobile

我开始使用 Ti，并且想知道如何从下面的代码中执行以下操作：

1.  打开标题为“New Win”的新窗口/视图
2.  显示标题为“我的主页”的后退按钮（上一页）

这是我到目前为止的代码：

```
var win = Ti.UI.createWindow({
    title: "My Home",
    backgroundColor: '#bbb'
});
var b = Ti.UI.createButton({
    title:'Button',
    style:Ti.UI.iPhone.SystemButtonStyle.BORDERED
});
win.setToolbar([b]);

var nav = Ti.UI.iPhone.createNavigationGroup({
    window:win
});
var root = Ti.UI.createWindow();
root.add(nav);
root.open();

b.addEventListener({
    // open a new window with Title as "New Win"
    // with a back button, that display the previous title "My Home"
}); 
```

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T10:16:44.940

您正在采用正确的方法，唯一缺少的是：

```
 nav.open(myWindow,{animated:true}); 
```

这是您的完整代码，缺少代码

```
var win = Ti.UI.createWindow({
title: "My Home",
backgroundColor: '#bbb'
});
var b = Ti.UI.createButton({
title:'Button',
style:Ti.UI.iPhone.SystemButtonStyle.BORDERED
});
win.setToolbar([b]);

var nav = Ti.UI.iPhone.createNavigationGroup({
window:win
 });
var root = Ti.UI.createWindow();
root.add(nav);
root.open();

//This is your new window
var myWindow = Ti.UI.createWindow({
 backgroundColor:'#fff',
 title:'New Window' 
 });

// just open this new window with the navigationController you defined
 b.addEventListener('click',function(){
nav.open(myWindow,{animated:true});
}); 
```

使用此代码，您将看到一个标题为“新窗口”的新窗口和一个标题为“我的主页”的后退按钮。

希望能解决你的问题

====================更新：============================ ================================== 要解决您的问题，您只需添加一行，即替换此行

```
 var myWindow = Ti.UI.createWindow({
 backgroundColor:'#fff',
 title:'New Window' 
 }); 
```

经过

```
 var myWindow = Ti.UI.createWindow({
 backgroundColor:'#fff', 
 url:'/newWindow.js'  // make sure you give the right path
 title:'New Window' 
 }); 
```

# testing - 在 clojure 中测试命名空间时出错

> ID：10925998
> 
> 赞同：2
> 
> 时间：2012-06-07T05:10:37.183
> 
> 标签：testing, clojure

在测试文件中，我需要这样的测试文件：

```
(ns calc.alg-spec
  (:refer-clojure)
  (:use clojure-test)
  (:require [calc.alg :as alg]))

(deftest silly-test []
  (is (= 2 2)))

(deftest alg-plus-test []
  (is (= (alg/plus 2 2) 4)))

(run-all-tests) 
```

问题是第一个测试成功，而第二个抛出以下异常：

```
javax.naming.NoInitialContextException: Need to specify class name in environment or system property, or as an applet parameter, or in an application resource file:  java.naming.factory.initial 
```

alg 命名空间有什么问题，为什么我不能调用它的函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T16:39:44.100

您的代码片段没有任何问题，问题出在其他地方。如果您还没有，我会使用[Leiningen ，并遵循 Leiningen 的测试代码约定。](https://github.com/technomancy/leiningen)