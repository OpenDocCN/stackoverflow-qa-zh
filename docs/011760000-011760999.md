# StackOverflow 问答 11760000-11760999

# .net - 在属性更改时在设计时重绘控件

> ID：11760009
> 
> 赞同：2
> 
> 时间：2012-08-01T13:09:48.583
> 
> 标签：.net

我有一个 .NET（特别是 C#）控件，它是 RadioButton 的子类，并且有一个额外的属性可以向其中添加第二个文本字符串。事实上，该属性究竟做了什么并不重要——重要的是它应该改变控件的外观。

在设计视图中更改此属性并按 Enter 时，表单设计器上的控件不会更改。如果我更改 RadioButton 上已存在的属性，则控件将使用新文本重新绘制自身。我认为这可能是通过 IDesigner 类型或属性实现的，但我不知道是什么。

如何在更改添加的属性时重新绘制控件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-06-09T07:26:11.450

可能大多数人不会阅读评论，所以我将其发布为答案。

让我用一个非常简单的例子来解释它：

```
public override Color ForeColor
{
    get { ... }
    set
    {
        if (_foreColor == value) return;
        _foreColor = value;

        // Force redraw to show new color in designer instantly
        if (DesignMode)
            Invalidate();
    }
} 
```

[无效](https://msdn.microsoft.com/de-de/library/598t492a%28v=vs.110%29.aspx)请求重绘。

[DesignMode](http://msdn.microsoft.com/en-us/library/system.componentmodel.component.designmode.aspx)返回此代码是否在设计器模式下执行。所以 if 语句之后的代码**永远不会**为用户运行。

检查`DesignMode`是**可选**的，但它可以保持代码干净，并且不会导致运行时的冗余方法调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-17T09:29:34.993

尝试

```
someGUIControl.Invalidate(); 
```

使您的控件重绘。

# asp.net - Visual Studio 2010 删除调试代码

> ID：11760012
> 
> 赞同：0
> 
> 时间：2012-08-01T13:10:08.407
> 
> 标签：asp.net, css, visual-studio-2010, debugging

我在 Visual Studio 中遇到了一个奇怪的问题；问题是当我写这样的css行时：

```
.Wrapper
{
    width:1050px;
    margin:0 auto;
    height:1000px;
    padding-top:20px;
} 
```

并按下调试按钮，Visual Studio 将删除代码的最后一行，如下例所示：

```
.Wrapper
{
    width:1050px;
    margin:0 auto;
    height:1000px;
    pad
} 
```

然而，它不仅发生在 CSS 上，而且有时会发生，但并不总是如此。

有人熟悉这个问题吗？

# vim - 如何制作 vim 映射以在经过一些处理后传递到自然处理

> ID：11760015
> 
> 赞同：1
> 
> 时间：2012-08-01T13:10:34.217
> 
> 标签：vim

我想映射一个 Shift + Insert，因为我通常会粘贴代码进行学习（或者甚至拿一些 stackoverflow 的问题来准备答案）。但正如为 .cpp 和 .h 所映射的那样，粘贴的代码看起来很乱。

例子：

```
1  class A {
2 }
3 public:
4     class B {
5     }
6             // ...
7             //     };
8             //         static void f();
9             //             // ...
10             //             };
11             //             ) 
```

来自问题的原始代码将[嵌套类导入命名空间 - C++](https://stackoverflow.com/questions/11647376/import-nested-classes-into-namespace-c)：

```
class A {
public:
    class B {
        // ...
    };
    static void f();
    // ...
}; 
```

为避免这种情况有必要运行：`:set paste`.

所以，问题是，如何映射一个 Shift + Insert，就像`imap <S-Insert> <Esc>:set paste<CR>i`在这里传递 Shift + Insert 到它的自然行为，即粘贴然后返回并`:set paste!`返回？

Obs.: { 被映射到断行和放置和结束}，与那种映射一起粘贴的文本会被弄乱。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T14:07:08.653

来自`:help 'paste'`：

> 由于在 'paste' 处于活动状态时映射不起作用，因此您需要使用 'pastetoggle' 选项通过某个键切换 'paste' 选项。

所以解决方案是例如

```
:set pastetoggle=<F12> 
```

并在粘贴时使用以下顺序：（`<F12>i`粘贴）`<Esc><F12>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T07:44:33.853

Vim 自己的特殊寄存器`*`并`+`允许通过终端绕过不稳定的粘贴。`"*p`从 X 选择寄存器`"+p`粘贴和从剪贴板粘贴。在 Windows 中，这些都链接到同一个 IIRC。

# android - 如何在单击时关闭对话框？

> ID：11760019
> 
> 赞同：1
> 
> 时间：2012-08-01T13:10:45.887
> 
> 标签：android

我正在使用一个包含 StringArray 列表的对话框。我想在单击 StringArray 的项目时关闭对话框。但双击后它被解雇了。

谢谢。

```
final Dialog dialog = new Dialog(Disease.this);
            dialog.setCancelable(true);
            dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
            final ListView listSpecialityView = new ListView(Disease.this);
            listSpecialityView.setCacheColorHint(Color.TRANSPARENT);
            listSpecialityView.setAdapter(adapter_list);

            listSpecialityView
                    .setOnItemClickListener(new OnItemClickListener() {

                        public void onItemClick(AdapterView<?> arg0, View arg1,
                                int arg2, long arg3) {
                            // TODO Auto-generated method stub
                            // Txt_Speciality.setText(Speciality_array[arg2]
                            // .toString());
                            // String id = String.valueOf(arg2);
                            if(immunString.equalsIgnoreCase("immun")){
                                data = immunizationsStrings[arg2];
                            }else {
                                data = Drugs[arg2];
                            }

                            showDialog(1);
                            dialog.dismiss();

                            //dialog.dismiss();
                        }
                    });
            dialog.setContentView(listSpecialityView);
            dialog.show(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:15:21.570

更改 listSpecialityView 上的调用顺序。设置 click listener 后尝试设置适配器。

同样在点击监听器中，调用 dialog.dismiss() 后调用 showDialog(1)

# javascript - 使用 enter 提交表单时触发按钮上的单击事件

> ID：11760030
> 
> 赞同：8
> 
> 时间：2012-08-01T13:11:21.593
> 
> 标签：javascript, html, forms, dom-events

我有一个带有两个按钮的表单，一个`input[type=submit]`是普通按钮，一个`button`是取消按钮。

我有两个事件处理程序，一个绑定到`form`on `submit`，一个绑定到`button`on `click`。

当我通过在输入中按 Enter 提交表单时，按钮上的点击事件会触发（并且在我可能添加的提交事件之前），这是为什么呢？

这发生在壁虎和 webkit 中。

这是一个工作示例：http: [//jsfiddle.net/q3JPR/](http://jsfiddle.net/q3JPR/)

如果您按 Enter 提交，我希望触发提交事件，而不是点击事件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T13:16:35.377

如果您将按钮更改为，`<input type="button"...`那么您的事件将正常运行......这是小提琴：

[工作小提琴](http://jsfiddle.net/q3JPR/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-08T17:14:54.970

我也找到了这个解决方案。如果您将 type 属性设置为“button” `<button type="button">My Button</button>`，它将不会提交。我认为默认情况下不指定类型会将其设置为提交。因此，您不必将元素更改为输入。

来源：[在不执行提交的表单内添加常规按钮](https://stackoverflow.com/questions/6617212/add-regular-button-inside-form-that-does-not-perform-a-submit)

# c# - 大量路线的建议

> ID：11760032
> 
> 赞同：0
> 
> 时间：2012-08-01T13:11:25.207
> 
> 标签：c#, .net, asp.net-mvc-4, asp.net-routing

在我们的 RouteConfig 中，为了将公司资料名称作为我们的一些根 URL，我们正在为每个公司名称添加一个路由，例如。xyz.com/acme

虽然这似乎工作正常，但我希望对此有一些一般性建议，或者更好的解决方法。我特别关心性能，尤其是随着我们的成长，我们可能有 10000 多家公司，因此有 10000 多条路线。

代码看起来像这样：

```
foreach (string companyName in companyNameList)
{
    routes.MapRoute(
        name: companyName,
        url: companyName,
        defaults: new { controller = "CompanyProfile", action = "Index" });
} 
```

任何建议将不胜感激？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T13:26:53.567

你不能有以下形式的单一路线：

```
 routes.MapRoute(
            name: "Default",
            url: "{company}/{controller}/{action}/{id}",
            defaults: new { controller = "CompanyProfile", action = "Index", id = UrlParameter.Optional },
            constraints: new { company= new CompanyConstraint(companyNames) }); 
```

在哪里`CompanyConstraint`进行`IRouteConstraint`检查以确保公司名称有效？像这样的东西：

```
internal class CompanyConstraint: IRouteConstraint
{
    public CompanyConstaint(IList<string> companies)
    {
        this.companies = companies;
    }

    public bool Match(HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values, RouteDirection routeDirection)
    {
        object company;
        if (!values.TryGetValue("company", out company) || company == null)
        {
             return false;
        }

        return companies.Contains(company.ToString());
    }
} 
```

干杯，院长

# c# - ObjectContext.CreateDatabaseScript 不创建索引

> ID：11760038
> 
> 赞同：1
> 
> 时间：2012-08-01T13:11:33.453
> 
> 标签：c#, asp.net, asp.net-mvc, entity-framework

我正在尝试创建一个自定义`IDatabaseInitializer`来仅安装表格。这是我到目前为止所得到的：

```
public class CreateTablesIfNotExist<TContext> : IDatabaseInitializer<TContext> where TContext : DbContext
{
    public void InitializeDatabase(TContext context)
    {
        bool databaseExists;

        using (new TransactionScope(TransactionScopeOption.Suppress))
        {
            databaseExists = context.Database.Exists();
        }

        if (databaseExists)
        {
            // Check to see if tables are already created
            int numberOfTables = 0;
            foreach (var t1 in context.Database.SqlQuery<int>("SELECT COUNT(*) FROM INFORMATION_SCHEMA.TABLES WHERE table_type = 'BASE TABLE' "))
                numberOfTables = t1;

            if (numberOfTables == 0)
            {
                // Create all database tables
                var dbCreationScript = ((IObjectContextAdapter)context).ObjectContext.CreateDatabaseScript();
                context.Database.ExecuteSqlCommand(dbCreationScript);
                context.SaveChanges();
            }
        }
        else
        {
            throw new ApplicationException("No database instance");
        }
    }
} 
```

如果这些表尚不存在，则会正确创建它们，但是它们都没有索引或约束。

不`ObjectContext.CreateDatabaseScript()`生成索引/约束？有谁知道在创建数据库后无需手动重新添加索引的替代方法？

任何帮助深表感谢。

# php - 来自mysql的php链接

> ID：11760041
> 
> 赞同：0
> 
> 时间：2012-08-01T13:11:42.647
> 
> 标签：php, mysql

我很长时间以来正在重新访问 php 和 mySQL。

```
mysql_select_db($database_conn, $conn);
$query = sprintf("SELECT DISTINCT Username FROM Entries ");
$result = mysql_query($query);
$row_results = mysql_fetch_assoc($result);

<?php do {
//$name = $row_results['Username'];
//echo $name, "<br/>";
echo '<a href=\"$row_results['Username'],.php\">';
echo '$row_results['Username'],'s overview </a><br/>';
}

while ($row_results = mysql_fetch_assoc($result)); ?> 
```

我想要做的是从结果中回显链接，链接形式为 username.php，用户名存储在数据库中。

我在转义 /" 中使用了单引号和双引号，但得到了不同的错误，我知道它会像 ; 或 " 一样简单。如果有更好的方法来解决这个问题，您是否可以解释一下有什么问题？

查询是正确的，注释掉的代码也可以自己运行。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:14:43.110

您不能通过单引号解析变量：

```
echo '<a href=\"$row_results['Username'],.php\">'; 
```

利用

```
echo '<a href="'.$row_results['Username'].'">'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:14:24.387

尝试：

```
echo '<a href="'.$row_results['Username'].'.php">';
echo $row_results['Username'].'\'s overview </a><br/>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T13:14:31.390

这是您的错误：

1.  即使您`DISTINCT`在 SQL 查询中使用，也可能有多个条目，因此您必须使用 while 循环。
2.  你在那里有一个逗号（可能是错字）。
3.  您需要转义 php 变量。

所以在做了上面的事情之后，应该是这样的。

```
while ($row_results = mysql_fetch_assoc($result)) {
  echo '<a href="' .$row_results["Username"]. '.php">';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T13:14:37.447

```
mysql_select_db($database_conn, $conn);
$query = sprintf("SELECT DISTINCT Username FROM Entries ");
$result = mysql_query($query);
$row_results = mysql_fetch_assoc($result);

<?php do {
    //$name = $row_results['Username'];
    //echo $name, "<br/>";
    echo '<a href="'.$row_results['Username'].'php">';
    echo $row_results['Username'].'\'s overview </a><br/>';
}
while ($row_results = mysql_fetch_assoc($result)); ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T13:17:21.873

在我看来，您的 html 字符串的连接和用户名不正确。

目前，您正在写入页面的字符串是

```
<a href=\"$row_results['Username'],.php\"> 
```

您需要做的是将 html 与来自数据库的值连接起来。

这可以这样做：

```
echo '<a href=\"'.$row_results['Username'].'.php\">';
echo $row_results['Username'].'\'s overview </a><br/>'; 
```

注意“。” 连接字符串的两个药水，以及 's 中撇号的擒纵机构

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-01T13:14:12.077

似乎您与那里的“和”混淆了。您真的应该避免使用除此之外的任何东西`'`-从长远来看，它只会咬您一口。

另外：您与 连接`.`，而不是与`,`。

```
mysql_select_db($database_conn, $conn);
$query = sprintf('SELECT DISTINCT Username FROM Entries ');
$result = mysql_query($query);
$row_results = mysql_fetch_assoc($result);

do {
    $name = $row_results['Username'];
    echo $name.'<br/>';
    echo '<a href="'.$name.'.php">';
    echo $name.'\'s overview </a><br/>';
} while ($row_results = mysql_fetch_assoc($result)); ?> 
```

# windows-phone-7 - wp7模拟器地图屏幕是白色的

> ID：11760047
> 
> 赞同：0
> 
> 时间：2012-08-01T13:12:11.447
> 
> 标签：windows-phone-7, emulation, bing-maps

我最近重新安装了 Windows 8 CP、Visual Studio 2010 Professional 和 WP7 SDK。我的模拟器地图只是一个白屏 - 界面存在但没有地图。

我有互联网连接，并且我已经重新安装了两个 SDK。

有谁知道可能出了什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:23:37.597

是的，模拟器定位工具由于某种原因无法正常工作。[这里](https://stackoverflow.com/questions/11710237/windows-phone-7-emulator-location-data-format)已经有人问过了，我就在[那里](https://stackoverflow.com/questions/11710237/windows-phone-7-emulator-location-data-format)和我的[博客](http://igrali.com/2012/07/30/windows-phone-location-tool-in-emulator-down-no-problem/)上提出了一个建议。

我希望这会让你继续前进！:-)

# asp.net-membership - ASP.NET 成员资格 - 用户存在但无法登录

> ID：11760050
> 
> 赞同：1
> 
> 时间：2012-08-01T13:12:20.313
> 
> 标签：asp.net-membership

在 Visual Studio 中打开我的网站后，我转到网站|ASP.NET 配置。我单击安全选项卡。从那里我创建一个新用户。我为它分配了一个角色。然后，当我尝试使用它登录我的网站时，我登录失败。我删除并重新创建了 10 次用户。但问题仍然存在。我检查了Membeship 表，用户ID 存在于表中。它已获得批准且未被锁定。我还需要检查什么？我可以使用以前创建的用户登录。

# javascript - 如果它在变量内

> ID：11760054
> 
> 赞同：1
> 
> 时间：2012-08-01T13:12:44.893
> 
> 标签：javascript, jquery

> **可能重复：**
> [JavaScript：字符串包含](https://stackoverflow.com/questions/1789945/javascript-string-contains)

我有一个简单的问题要问你。我的网址有一个变量。现在我想检查这个网址。我制作了这个javascript：

```
var url = "http://www.mikevierwind.nl";

if(url == "localhost" ) {
    alert("test");
} 
```

我怎样才能做以下事情。当 mikewind 处于可变状态时。比运行它。变量也可以是 mikevierwind.be 和 mikevierwind.eu。但脚本必须始终运行。我必须检查 mikevierwind 是否在变量中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T13:15:02.060

```
if (url.indexOf("mikevierwind") >= 0 ) {
  alert("test")
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T13:15:02.123

如果您只关心是否`mikevierwind`在*字符串*中，请使用[`indexOf()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/indexOf)

```
var url = "http://www.mikevierwind.nl";

if(url.indexOf('mikevierwind') != -1) {
    alert("test");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T13:15:48.427

尝试以下操作：

```
var url = "http://www.mikevierwind.nl";

if(url.indexOf('mikevierwind') != -1) {
    alert("test");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T13:14:27.490

试试这个而不是本地主机

```
var url = "http://www.mikevierwind.nl";

if(url == document.location.href ) {
    alert("test");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T13:15:55.523

```
var s = "mikewind.bet";
alert(s.indexOf("mikewind") != -1);
//indexOf returns the position of the string in the other string. If not found, it will return -1. 
```

[https://developer.mozilla.org/en/Core%5FJavaScript%5F1.5%5FReference/Objects/String/indexOf](https://developer.mozilla.org/en/Core%5FJavaScript%5F1.5%5FReference/Objects/String/indexOf)

```
var str="This is testing for javascript search !!!";
if(str.search("for") != -1) {
   //logic
} 
```

# asp.net - Crystal Reports 2011 VS 2010 中的日期时间公式无法正确过滤

> ID：11760056
> 
> 赞同：0
> 
> 时间：2012-08-01T13:12:55.810
> 
> 标签：asp.net, crystal-reports, sql-server-2008-r2, crystal-reports-2010

我的报告中有一个公式，用于过滤数据和时间段，这个公式我使用的是 DateTime 类型的静态参数，启用了选项允许范围值，仅此标准的其余部分。

我在公式字段中为以下表达式创建了一个新公式：

```
WhilePrintingRecords;
DateTimeVar date1;
DateTimeVar date2;
date1:=Minimum ({?DateRange});
date2:=Maximum ({?DateRange});
"Periodo de filtro: " + ToText(date1) + " até " + ToText(date2) 
```

我在asp.net 中使用CrystalReportViewer 如何在我运行报告时查看我的报告，说明我返回表中所有数据的报告的日期和开始时间以及结束日期和时间。

我的数据库正在接收 YYYYMMDD HH:MM:SS 中的字段 datetime2(0)，CrystalReportViewer 组件以 DD:MM:YYYY HH:MM:SS 格式通知日期和时间，日期格式与过滤器不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:30:19.333

您的记录选择公式应该是：

```
{table.date} IN {?date range} 
```

如果要*显示*日期范围参数：

```
//{@date-range display}; it may need to be adjusted to handle the 'no lower bound' and 'no upper bound' settings
ToText( Minimum({?date range}), "dd/mm/yyyy" ) + " - " + ToText( Maximum({?date range}), "dd/mm/yyyy" ) 
```

# java - 使用 JAXB 从列表中解组散列映射

> ID：11760058
> 
> 赞同：0
> 
> 时间：2012-08-01T13:12:57.897
> 
> 标签：java, xml, jaxb

我有一个这种结构的 xml（项目的键值对）：

```
<root>
  <item value="dada" key="dad" />
  <item value="mama" key="mum" />
  <others>
    <os>asdad</os>
  </others>
</root> 
```

我想将项目元素映射到一个HashMap，字符串是Item.key

我编写了一个适配器，它从 xml 中解组一个列表并将一个映射编组到一个列表。问题是，JAXB 在解组时获取列表 emtpy，并且在编组到 xml 时只写入一项。

下面是对应的类：

根.java

```
@XmlRootElement(name = "root")
public class Root
{
    @XmlJavaTypeAdapter(ItemMapAdapter.class)
    @XmlElement(name = "item")
    public HashMap<String, Item> getContent()
    {
        return content;
    }

    public void setContent(HashMap<String, Item> content)
    {
        this.content = content;
    }

    private HashMap<String, Item> content;
} 
```

ItemMapAdapter.java

```
public final class ItemMapAdapter extends XmlAdapter<HashMap<String, Item>, LinkedList<Item>>
{
    @Override
    public HashMap<String, Item> marshal(LinkedList<Item> v)
    {
         //the list here is empty.
         //returns a map<Item.key, Item>
    }

    @Override
    public LinkedList<Item> unmarshal(HashMap<String, Item> v){}
} 
```

有人有任何见解吗？可能缺少一些东西.. **谢谢！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:38:01.317

您应该切换`HashMap`并`LinkedList`在您的适配器中：

```
public final class ItemMapAdapter extends XmlAdapter<LinkedList<Item>, HashMap<String, Item>>
{
    @Override
    public LinkedList<Item> marshal(HashMap<String, Item> v) {}

    @Override
    public HashMap<String, Item> unmarshal(LinkedList<Item> v) {}
} 
```

# svn - 在 Windows 上的 Subversion 中添加新用户权限

> ID：11760061
> 
> 赞同：1
> 
> 时间：2012-08-01T13:13:03.863
> 
> 标签：svn, collabnet

我在 Windows（Collabnet 开源版）上安装了 Subversion。

我无法访问它的管理面板，我需要使用命令行或其他一些实用程序为现有存储库添加用户和配置权限，因为我无法访问它的管理面板。

我找不到`svnaccess.conf`文件。谁能告诉我文件的位置？还有如何添加新用户？

在 Windows 上使用命令提示符执行此操作的任何链接都会更好。

# opencart - 编辑选项使用图标/图像而不是文本

> ID：11760063
> 
> 赞同：0
> 
> 时间：2012-08-01T13:13:15.700
> 
> 标签：opencart

我正在使用 Opencart 1.5.3。在目录-> 产品中，我想使用编辑图标/图像而不是在文本中编辑。我不知道该怎么做。请帮我在哪里改变这个。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:29:28.450

你需要打开

```
/admin/language/english/english.php 
```

寻找

```
$_['text_edit']               = 'Edit'; 
```

并将该文本更改为您希望用于图像的 html，例如

```
$_['text_edit']               = '<img src="view/image/edit.png" alt="Edit" title="Edit" />'; 
```

# html - 避免在html中双击内部包装功能

> ID：11760068
> 
> 赞同：0
> 
> 时间：2012-08-01T13:13:27.587
> 
> 标签：html

我想在单击图像时拨打一个号码。为此，我动态创建了包含此类图像的 div 标签。但我每次都需要双击图像才能拨打电话。我认为它正在发生，因为在第一次单击时调用了 wrap 函数，而在第二次单击时调用了 tel 。我想在第一次点击时拨打电话。请为此提出替代方案。我的代码是：

```
for(var i=0;i<len;i++)
    {
        var maindiv=document.createElement("div");
        maindiv.setAttribute("id", "maintablediv");
        var table=document.createElement("table");
        table.setAttribute("class","numbertable" );
        table.setAttribute("border",0);
        table.setAttribute("cellSpacing","0");
        table.setAttribute("cellPadding","0");
        var rowCount = table.rows.length ;
        var row =table.insertRow(rowCount);
        row.id="row";
        var cell1 = row.insertCell(0);
        if(i==0)
        {
            cell1.setAttribute("id","cmdcentralno");
        }
        var cell2=row.insertCell(1);
        var p=document.createElement("p");
        p.innerHTML=desc[i];
        cell1.innerHTML=num[i];
        cell1.setAttribute("class","numbername");
        cell1.appendChild(document.createElement("br"));
        cell1.appendChild(p);
        cell2.setAttribute("class","phoneImg");
        var image=document.createElement("img");
        image.setAttribute("src", "images/Icon-Phone-Green.png");
        if(i==0)
        {
            cell2.setAttribute("id","cmdcentralimage");
        }
        image.setAttribute("id", "imgphn"+i);

        image.className="imgphn";

       // var number=num[i].substring(num[i].indexOf('>')+1,num[i].indexOf('>')+14);

      image.setAttribute("name", dialnum[i]);
        cell2.appendChild(image);
        image.setAttribute("align","centre");
        maindiv.appendChild(table);
        document.getElementById("numberMenu").appendChild(maindiv);
        image.onclick=function()
        {
            var cellnumber=$(this).attr("name");
            $(this).wrap("<a href =tel:"+cellnumber+"/>");
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:27:46.657

未经测试，但我希望这应该可以解决您的问题...

```
 // move this outside of the click handler (and use `image` instead of `this`)
    image.wrap("<a href =tel:"+cellnumber+"/>");

    image.onclick=function()
    {
        var cellnumber=$(this).attr("name");
    } 
```

# android - 错误“无法实例化活动”

> ID：11760069
> 
> 赞同：0
> 
> 时间：2012-08-01T13:13:29.557
> 
> 标签：android

我知道有很多人有这个问题。我已经尝试了很多我能找到的方法，但仍然得到错误。

1.  只有一项活动并且已注册。
2.  试图通过com.hermione.woodenfish.MainActivity完成.MainActivity，没用
3.  清洁和重建也不起作用

真的需要帮助，谢谢！！

日志猫：

```
08-01 12:09:33.944: E/Trace(1032): error opening trace file: No such file or directory (2)
08-01 12:09:34.384: D/AndroidRuntime(1032): Shutting down VM
08-01 12:09:34.424: W/dalvikvm(1032): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
08-01 12:09:34.465: E/AndroidRuntime(1032): FATAL EXCEPTION: main
08-01 12:09:34.465: E/AndroidRuntime(1032): java.lang.RuntimeException: Unable to     instantiate activity   ComponentInfo{com.hermione.woodenfish/com.hermione.woodenfish.MainActivity}: java.lang.NullPointerException
08-01 12:09:34.465: E/AndroidRuntime(1032):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1983)
08-01 12:09:34.465: E/AndroidRuntime(1032):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
08-01 12:09:34.465: E/AndroidRuntime(1032):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
08-01 12:09:34.465: E/AndroidRuntime(1032):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
08-01 12:09:34.465: E/AndroidRuntime(1032):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-01 12:09:34.465: E/AndroidRuntime(1032):     at android.os.Looper.loop(Looper.java:137)
08-01 12:09:34.465: E/AndroidRuntime(1032):     at android.app.ActivityThread.main(ActivityThread.java:4745)
08-01 12:09:34.465: E/AndroidRuntime(1032):     at java.lang.reflect.Method.invokeNative(Native Method)
08-01 12:09:34.465: E/AndroidRuntime(1032):     at java.lang.reflect.Method.invoke(Method.java:511)
08-01 12:09:34.465: E/AndroidRuntime(1032):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-01 12:09:34.465: E/AndroidRuntime(1032):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-01 12:09:34.465: E/AndroidRuntime(1032):     at dalvik.system.NativeStart.main(Native Method)
08-01 12:09:34.465: E/AndroidRuntime(1032): Caused by: java.lang.NullPointerException
08-01 12:09:34.465: E/AndroidRuntime(1032):     at android.content.ContextWrapper.getResources(ContextWrapper.java:81)
08-01 12:09:34.465: E/AndroidRuntime(1032):     at android.media.MediaPlayer.create(MediaPlayer.java:824)
08-01 12:09:34.465: E/AndroidRuntime(1032):     at com.hermione.woodenfish.MainActivity.<init>(MainActivity.java:24)
08-01 12:09:34.465: E/AndroidRuntime(1032):     at java.lang.Class.newInstanceImpl(Native Method)
08-01 12:09:34.465: E/AndroidRuntime(1032):     at java.lang.Class.newInstance(Class.java:1319)
08-01 12:09:34.465: E/AndroidRuntime(1032):     at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
08-01 12:09:34.465: E/AndroidRuntime(1032):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
08-01 12:09:34.465: E/AndroidRuntime(1032):     ... 11 more
08-01 12:33:02.784: E/Trace(1171): error opening trace file: No such file or directory (2)
08-01 12:33:03.125: D/AndroidRuntime(1171): Shutting down VM
08-01 12:33:03.125: W/dalvikvm(1171): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
08-01 12:33:03.154: E/AndroidRuntime(1171): FATAL EXCEPTION: main
08-01 12:33:03.154: E/AndroidRuntime(1171): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.hermione.woodenfish/com.hermione.woodenfish.MainActivity}: java.lang.NullPointerException
08-01 12:33:03.154: E/AndroidRuntime(1171):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1983)
08-01 12:33:03.154: E/AndroidRuntime(1171):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
08-01 12:33:03.154: E/AndroidRuntime(1171):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
08-01 12:33:03.154: E/AndroidRuntime(1171):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
08-01 12:33:03.154: E/AndroidRuntime(1171):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-01 12:33:03.154: E/AndroidRuntime(1171):     at android.os.Looper.loop(Looper.java:137)
08-01 12:33:03.154: E/AndroidRuntime(1171):     at android.app.ActivityThread.main(ActivityThread.java:4745)
08-01 12:33:03.154: E/AndroidRuntime(1171):     at java.lang.reflect.Method.invokeNative(Native Method)
08-01 12:33:03.154: E/AndroidRuntime(1171):     at java.lang.reflect.Method.invoke(Method.java:511)
08-01 12:33:03.154: E/AndroidRuntime(1171):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-01 12:33:03.154: E/AndroidRuntime(1171):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-01 12:33:03.154: E/AndroidRuntime(1171):     at dalvik.system.NativeStart.main(Native Method)
08-01 12:33:03.154: E/AndroidRuntime(1171): Caused by: java.lang.NullPointerException
08-01 12:33:03.154: E/AndroidRuntime(1171):     at android.content.ContextWrapper.getResources(ContextWrapper.java:81)
08-01 12:33:03.154: E/AndroidRuntime(1171):     at android.media.MediaPlayer.create(MediaPlayer.java:824)
08-01 12:33:03.154: E/AndroidRuntime(1171):     at com.hermione.woodenfish.MainActivity.<init>(MainActivity.java:23)
08-01 12:33:03.154: E/AndroidRuntime(1171):     at java.lang.Class.newInstanceImpl(Native Method)
08-01 12:33:03.154: E/AndroidRuntime(1171):     at java.lang.Class.newInstance(Class.java:1319)
08-01 12:33:03.154: E/AndroidRuntime(1171):     at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
08-01 12:33:03.154: E/AndroidRuntime(1171):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
08-01 12:33:03.154: E/AndroidRuntime(1171):     ... 11 more 
```

MainActivity.java

```
package com.hermione.woodenfish;

import android.app.Activity;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    private MediaPlayer mp = MediaPlayer.create(this, R.raw.knok);
    public void sendKnok(View view) {
        if (mp.isPlaying()){
            mp.stop();
        }
        mp.start();
    }
} 
```

显现：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.hermione.woodenfish"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:17:47.077

我认为问题出在这一行，

```
 private MediaPlayer mp = MediaPlayer.create(this, R.raw.knok); 
```

您已尝试在`onCreate()`. 这可能会造成问题。你如何初始化你`MediaPlayer`的onCreate（），

```
private MediaPlayer mp =null;  //Global Declaration

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    mp = MediaPlayer.create(this, R.raw.knok);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:18:02.870

你的问题在这里：

`08-01 12:33:03.154: E/AndroidRuntime(1171): Caused by: java.lang.NullPointerException 08-01 12:33:03.154: E/AndroidRuntime(1171): at android.content.ContextWrapper.getResources(ContextWrapper.java:81) 08-01 12:33:03.154: E/AndroidRuntime(1171): at android.media.MediaPlayer.create(MediaPlayer.java:824) 08-01 12:33:03.154: E/AndroidRuntime(1171): at com.hermione.woodenfish.MainActivity.<init>(MainActivity.java:23) 08-01 12:33:03.154: E/AndroidRuntime(1171): at java.lang.Class.newInstanceImpl(Native Method) 08-01 12:33:03.154: E/AndroidRuntime(1171): at java.lang.Class.newInstance(Class.java:1319) 08-01 12:33:03.154: E/AndroidRuntime(1171): at android.app.Instrumentation.newActivity(Instrumentation.java:1053) 08-01 12:33:03.154: E/AndroidRuntime(1171): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974) 08-01 12:33:03.154: E/AndroidRuntime(1171): ... 11 more`

你得到一个`NullPointerException`. 查看调试中的第 23 行`MainActivity`，看看发生了什么。

# java - MyBatis 字符串作为参数

> ID：11760074
> 
> 赞同：12
> 
> 时间：2012-08-01T13:13:42.583
> 
> 标签：java, database, string, mybatis

我想在 MyBatis 中为 Select 语句使用字符串参数。我的 mapper.xml：

```
<select id="selectAll" parameterType="String" resultMap="fastXMLResultMap">
        SELECT CREATIONDATE, DOCUMENTID, TITEL, REGTITEL, INFORCEDATE, DOCTYPE
        FROM #{databBaseTable}
</select> 
```

和调用函数：

```
public List<FastXMLObject> selectAll(String databBaseTable) {

    SqlSession session = sqlSessionFactory.openSession();

    System.out.println("Table: "+databBaseTable);

    try {
        List<FastXMLObject> list = session.selectList("FastXMLObject.selectAll",databBaseTable);
        return list;
    } finally {
        session.close();
    }
} 
```

字符串 dataBaseTable 是我的数据库表的名称（谁会想到），因为我想从各种表中动态获取数据。

但不幸的是，这不起作用：错误：ORA-00903：Ungültiger Tabbellenname（无效的表名）但它不是。当我打印出“databBaseTable”的值时，它就是表的确切名称。当我在没有变量的情况下将表的名称写入我的 mapper.xml 时，它可以工作。我做错了什么？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-01T13:31:00.027

使用`${dataBaseTable}`而不是“#”。不同之处在于“#”用于 PreparedStatement 替换。'$' 用于直接字符串替换。

但是，如果这样做，则不能将表名作为参数传递给`selectList()`调用。您需要将表名设置为属性。可以使用 MyBatis config.xml 中的元素设置属性，也可以`<properties>`直接在代码中使用`Configuration.getVariables()`.

[请参阅MyBatis 文档](http://www.mybatis.org/core/sqlmap-xml.html)中的“字符串替换”部分。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-01T13:52:27.177

好的，我绝对不知道为什么会这样，但我只是使用以下方法来解决问题：

```
<select id="selectAll" parameterType="String" resultMap="fastXMLResultMap">
        SELECT CREATIONDATE, DOCUMENTID, TITEL, REGTITEL, INFORCEDATE, DOCTYPE
        FROM ${value}
</select> 
```

我没有设置任何属性或其他东西，这只是从更改 `FROM #{databBaseTable}`为`FROM ${value}`

我有人可以回答为什么这会很好。但就目前而言，这真的帮助了我。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-23T09:49:25.053

使用 #{..} 语法 MyBatis 使用 jdbc PreparedStatement 对象，您不能在该对象上指定表名作为参数。使用 #{..} 只能参数化 sql 语句的参数。

当您使用 ${..} 语法时，MyBatis 会进行普通的旧字符串替换，因此您可以自由地参数化几乎任何您想要的 sql 部分。

注意：顺便说一句：使用 #{..} 可以避免 sql 注入，但使用 ${..} 它确实为此类攻击打开了大门

# ios - 如何将我的 xml 文件转换为 kml 文件

> ID：11760077
> 
> 赞同：1
> 
> 时间：2012-08-01T13:13:49.910
> 
> 标签：ios, mkmapview, kml, heatmap

在我的 iOS 应用程序中，我有一个包含数千个位置数据的 xml 文件。我需要将其转换为 kml 格式以在我的地图视图上显示热图。我怎样才能转换它？请给我这个转换的指导方针......

```
<?xml version="1.0"?>
    <row id="1">
        <id>101</id>
            <name>Sharon Appartments</name>
            <longitude>115.23412</longitude>
            <latitude>34.734121</latitude>
            <city>Dallas</city>
            <state>California</state>
            <country>USA</country>
     </row>
     <row id="2">
     .
     .
     .
     .
     <row id="20000">
     .
     .
     </row>
</xml> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T13:41:46.737

由于您要求提供指南，因此示例 kml 文档如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
<Document>
<Placemark>
  <name>New York City</name>
  <description>New York City</description>
  <Point>
    <coordinates>-74.006393,40.714172,0</coordinates>
  </Point>
</Placemark>
</Document>
</kml> 
```

看来您可以保持`<name>`字段相同，您可以将 xml 字段中的项目组合`<city,<state>,<country>`到 klm 字段`<address>city,state,country</address>`或将其用作 kml`<description>`标签（出现在描述气球中的用户提供的内容），因为 kml 将使用 long 和 lat 来确定指出是否提供而不是使用地址。转换xml`<longitute>,<latitudite>`需要转成kml`<point><cordinates>longitute,latatude</cordinates></point>`

因此，您需要将您的 klm 文档转换为如下内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
<Document>
<Placemark>
  <name>Sharon Appartments</name>
  <description>Dallas, California, USA</description>
  <Point>
    <coordinates>115.23412,34.734121</coordinates>
  </Point>
</Placemark>
<Placement>
Put item 2 details here
</Placement>
.
.
.
<Placement>
Put item 20000 details here
</Placement>
</Document>
</kml> 
```

我从[https://developers.google.com/kml/documentation/kmlreference](https://developers.google.com/kml/documentation/kmlreference)得到这个，

现在对于热图部分，如果您可以将文件转换为经纬度列表，您可以将其放入此网页上的 python 程序：http: [//jjguy.com/heatmap/](http://jjguy.com/heatmap/)它将生成一个 kml 覆盖对于基于该数据的谷歌地图，您需要将该叠加层与您的城市数据的 kml 文件结合起来以获得完整的地图。

# c# - 按总金额分组项目

> ID：11760080
> 
> 赞同：5
> 
> 时间：2012-08-01T13:13:56.680
> 
> 标签：c#, .net, linq, group-by

假设我有这个号码列表：

```
List<int> nu = new List<int>();
nu.Add(2);
nu.Add(1);
nu.Add(3);
nu.Add(5);
nu.Add(2);
nu.Add(1);
nu.Add(1);
nu.Add(3); 
```

保持列表项的顺序相同，是否可以对 linq 中总和为 6 的项目进行分组，因此结果将如下所示：

```
2,1,3 - 5 - 2,1,1 - 3 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T13:18:58.050

直接用 LINQ 解决这个问题会很麻烦，相反你可以做一个扩展方法：

```
// Assumptions:
//  (1) All non-negative, or at least you don't mind them in your sum
//  (2) Items greater than the sum are returned by their lonesome
static IEnumerable<IEnumerable<int>> GroupBySum(this IEnumerable<int> source,
    int sum)
{
    var running = 0;
    var items = new List<int>();
    foreach (var x in source)
    {
        if (running + x > sum && items.Any())
        {
            yield return items;
            items = new List<int>();
            running = 0;
        }

        running += x;
        items.Add(x);
    }

    if (items.Any()) yield return items;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T13:27:57.483

你可以用聚合来做到这一点。

（旁注：使用 LinqPad 测试/编写这些类型的查询，让它变得简单）

给出这些结果：

![结果](../Images/b87a2f73e1455298a8597fe96be62a77.png)

像这样：

```
class Less7Holder
{
   public List<int> g = new List<int>();
   public int mySum = 0;
}

void Main()
{
    List<int> nu = new List<int>();
    nu.Add(2);
    nu.Add(1);
    nu.Add(3);
    nu.Add(5);
    nu.Add(2);
    nu.Add(1);
    nu.Add(1);
    nu.Add(3);

    var result  = nu .Aggregate(
       new LinkedList<Less7Holder>(),
       (holder,inItem) => 
       {
          if ((holder.Last == null) || (holder.Last.Value.mySum + inItem >= 7))
          {
            Less7Holder t = new Less7Holder();
            t.g.Add(inItem);
            t.mySum = inItem;
            holder.AddLast(t);
          }
          else
          {
            holder.Last.Value.g.Add(inItem);
            holder.Last.Value.mySum += inItem;
          }
          return holder;
       },
       (holder) => { return holder.Select((h) => h.g );} );

   result.Dump();

} 
```

# flash - Windows 和 OS X 上已签名和未签名的 Flex RSL 缓存在哪里？

> ID：11760081
> 
> 赞同：1
> 
> 时间：2012-08-01T13:13:56.607
> 
> 标签：flash, apache-flex, adobe, rsl

我正在寻找缓存 Flex 框架 swf 和 swz 文件的目录。我已经很久没有需要知道我已经忘记了。为了测试，我需要删除文件并强制浏览器再次下载它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:41:27.057

终于找到了。 [Adobe Flash Player 缓存：数据是否会在系统的不同用户之间持续存在？](https://stackoverflow.com/questions/1430860/adobe-flash-player-cache-does-data-persist-across-different-users-of-a-system)

似乎对 Flash Player 缓存和 RSL 缓存存在一些普遍的混淆。引用的问题描述了已签名 RSL 的位置。评论中引用的站点描述了 Flash 数据或 SharedObjects 的缓存位置。未签名的 RSL 仅由浏览器缓存，因此清除浏览器缓存将删除它们；但是删除已签名的 RSL 并不那么直观。

# java - 二进制转十六进制

> ID：11760082
> 
> 赞同：0
> 
> 时间：2012-08-01T13:13:59.960
> 
> 标签：java, type-conversion

大家好，我已经实现了一个将值从二进制转换为十六进制的解决方案。所以我想知道是否有比我的更优雅的解决方案（很肯定有）。我已经测试了该程序并且它正在运行。这是代码：

```
public class BinaryToHex
{
    public static void main(String[] args) 
    {
        String binary = "1110001101";
        binaryToHex(binary);
        //38d
    }

    public static void binaryToHex(String binaryValue)
    {
        StringBuilder sb = new StringBuilder(binaryValue);

        System.out.println("Original StringBuilder: " + sb);
        sb.reverse();

        System.out.println("reversed StringBuilder: " + sb);

        int convert = binaryValue.length();
        System.out.println("Legth of the binary: " +  convert);

        if(convert % 4 != 0)
        {
            while(convert % 4 != 0)
            {

                sb.append(0);
                convert ++;

                System.out.println("StringBuilder in loop: " + sb);
                System.out.println("Convert in loop: " + convert);
            }
        }
        sb.reverse();
        System.out.println("Ready StringBuilder for use? " + sb);
        String test = null;
//      String test = sb.toString();
        for(int i=0; i<sb.length(); i ++)
        {
            if(i % 4 == 0)
            {
                test = sb.substring(i, (i+4));
                System.out.print(getChar(test));
            }
        }
    }

    public static String getChar(String num)
    {
        String number = "";
        switch(num)
        {
            case "0000" : number = "0"; break;
            case "0001" : number = "1"; break;
            case "0010" : number = "2"; break;
            case "0011" : number = "3"; break;
            case "0100" : number = "4"; break;
            case "0101" : number = "5"; break;
            case "0110" : number = "6"; break;
            case "0111" : number = "7"; break;
            case "1000" : number = "8"; break;
            case "1001" : number = "9"; break;
            case "1010" : number = "A"; break;
            case "1011" : number = "B"; break;
            case "1100" : number = "C"; break;
            case "1101" : number = "D"; break;
            case "1110" : number = "E"; break;
            case "1111" : number = "F"; break;

        }
        return number;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:16:51.547

这个怎么样：`Integer.toHexString(Integer.valueOf(binary, 2))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T13:16:58.253

```
Long.toHexString(Long.valueOf(binaryString, 2)); 
```

如果二进制字符串长于 63 位（`long`在 Java 中是有符号的）：

```
new BigInteger(binaryString, 2).toString(16); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T13:17:25.430

怎么用`Integer.toString(Integer.parseInt(binaryValue,2),16);`？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T13:19:49.973

显然，为简洁起见，我跳过了任何错误检查。

```
int numInDec = Integer.parseInt(binaryString, 2);
String hexString = Integer.toHexString(numInDec); 
```

[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html)

编辑：我看到你想避开图书馆，为什么？这是您正在寻找的“更优雅”的解决方案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-01T15:30:58.513

在库实现中做我们认为理所当然的事情是一个有趣的练习。您可以通过使用计数器跟踪您的位置并防止反向操作来大大改进您的算法。开关块也相当不优雅。

这是我的尝试。没有声称它是高性能的，但我认为这是对您的建议的改进。

```
public class BinToHex {

    static char[] HEX = {'0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F'};
    static int[] POW_2 = {1,2,4,8};
    public static String toHex(String bin) {
        int len = bin.length();
        char[] result = new char[(int)Math.ceil(len*1D/4)];
        int pos = result.length-1;
        int hexval = 0;
        for (int i=0; i<len;i++ ){
            hexval += (bin.charAt(len-i-1)-HEX[0]) * POW_2[i%4];
            if ((i+1)%4==0) {
                result[pos--] = HEX[hexval];
                hexval = 0;
            }
        }
        if (pos==0) {
            result[0] = HEX[hexval];
        }
        return new String(result);
    }

    public static void main(String [] param) {
        System.out.println(BinToHex.toHex("1")); // border case 1 char => 0x1
        System.out.println(BinToHex.toHex("101")); // testcase less than 4 chars => 0x5
        System.out.println(BinToHex.toHex("1011")); // testcase eq 4 chars => 0xB
        System.out.println(BinToHex.toHex("101101011011")); // testcase lenght % 4  = 0
        System.out.println(BinToHex.toHex("11101101011011")); // testcase lenght % 4  != 0
        System.out.println(BinToHex.toHex("000101101011011")); // testcase leading 0
    }

} 
```

# php - 如何在 id 属性之前包含类、样式等属性的 div 标签之间获取文本。我需要使用正则表达式

> ID：11760083
> 
> 赞同：0
> 
> 时间：2012-08-01T13:14:04.073
> 
> 标签：php, html, regex

嗨，我正在使用这个正则表达式来获取测试中的文本

```
<div id = "test">text</div>

$regex = "#\<div id=\"test\"\>(.+?)\<\/div\>#s"; 
```

但是，如果情况发生变化，例如

```
<div class="testing" style="color:red" .... more attributes and id="test">text</div> 
```

或者

```
<div class="testing" ...some attributes... id="test".... some attributes....>text</div> 
```

或者

```
<div id="test" .........any number of attributes>text</div> 
```

那么上面的正则表达式将无法提取 div 标签之间的文本。在第一种情况下，如果在 div 标签的 id 属性前面放置更多属性，即 id 属性是最后一个属性，则上述正则表达式不起作用。在第二种情况下，id 属性在某些属性之间，在第三种情况下，它是 div 标签的第一个属性。我可以有一个可以匹配上述 3 个条件的正则表达式，以便通过**指定 ID ONLY**来提取 div 标签之间的文本。只能使用正则表达式:(。

请帮忙

谢谢....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T13:20:08.440

我强烈推荐[一个 HTML 解析器](http://simplehtmldom.sourceforge.net/)，让自己免于[尝试编写正则表达式来解析 HTML/XML 的永无止境的痛苦](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T13:31:26.333

我建议您通过 xpath 获取该 DOM 元素，该元素的 xpath 表达式为：

```
//div[@class="testing"] 
```

所有这些都可以通过 PHP DOMDocument 扩展或 SimpleXML 扩展来完成。两者都在 99.9% 中使用 PHP，与正则表达式扩展相同，一些粗略的示例代码（[演示](http://codepad.viper-7.com/RWwxNE)）：

```
echo simplexml_import_dom(@DOMDocument::loadHTML($html))
         ->xpath('//div[@class="testing"]')[0]; 
```

Xpath 是一种专门用于从 XML 文档中查询元素和数据的语言，而正则表达式是一种用于更简单字符串的语言。

**编辑：** ID 相同：[http ://codepad.viper-7.com/h1FlO0](http://codepad.viper-7.com/h1FlO0)

```
//div[@id="test"] 
```

我猜你很快就会明白这些简单的 xpath 表达式是如何工作的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T13:34:22.027

这是 DOM 的答案（有点粗鲁但有效）

```
$aPieceOfHTML = '<div class="testing" id="test" style="color:red">This is my text blabla<div>';

$doc = new DOMDocument();
$doc->loadHTML($aPieceOfHTML);
$div = $doc->getElementsByTagName("div");
$mytext = $div->item(0)->nodeValue;

echo $mytext; 
```

* * *

这是克苏鲁之道：

```
$regex = '/(?<=id\=\"test\"\>).*(?=\<\/div\>)/'; 
```

**免责声明** 我绝不保证这在每种情况下都有效（远非如此）。事实上，如果出现以下情况，这将失败：

1.  `id="test"`不是最后一个标签属性
2.  `id="test"`如果和结尾之间有空格（或任何东西）`>`。
3.  如果 div 标签没有正确关闭`</div>`
4.  如果标签是大写的
5.  如果标签属性是大写的
6.  我不知道...在更多情况下这可能会失败

我可以尝试编写一个更复杂的正则表达式，但我不认为我能想出比这更好的东西。此外，当您使用 PHP 内置的其他工具可以更好地解析 HTML 时，这似乎是在浪费时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-29T10:57:13.310

我不知道您是否仍然需要这个，但下面的 RegEx 适用于您问题中的所有给定场景。

```
(!?(<.*?>)|[^<]+)\s* 
```

[https://regex101.com/r/DAObw0/1](https://regex101.com/r/DAObw0/1)

可以通过以下方式访问匹配组：

```
const [_, group1, group2] = myRegex.Exec(input) 
```

# iphone - RootviewController 和 viewControllers 轮换

> ID：11760084
> 
> 赞同：0
> 
> 时间：2012-08-01T13:14:10.473
> 
> 标签：iphone, objective-c, rotation, viewcontroller, rootview

我的应用程序有问题。我想在特定视图上锁定旋转。为此，我使用包含两个自定义视图控制器的 rootviewcontroller。我试图在我的两个视图控制器上覆盖 shouldAutorotateToInterfaceOrientation 方法，但是如果我允许我的 rootViewController 上的所有旋转，我所有的视图控制器都可以像我的 rootviewcontroller 一样旋转，我不明白为什么。

实际上我使用这个配置：

```
RootviewController
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    //By default, i allow all rotation
   return YES
}

FirstCustomviewController
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    //On my first viewController, I allow only orientation in portrait
   return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

但在所有情况下，它都允许所有旋转（我认为它来自 rootviewcontroller），为什么我不能覆盖这个方法？我能为此做些什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:46:11.380

RootViewController 和 FirstCustomViewController 的关系究竟是 push-view 还是 modal-view？如果关系是推视图，则所有子视图旋转都依赖于根视图。

将 UINavigationController 视为房屋，将 UIViewControllers 视为房间。房子里的所有房间都将以与房子相同的方式旋转。如果不转动房屋和其他房间，就无法转动房间。

# asp.net - 如何使用 IIS 7.5 和 VS2010 通过两个或多个 concerrent 请求进行调试

> ID：11760086
> 
> 赞同：0
> 
> 时间：2012-08-01T13:14:11.680
> 
> 标签：asp.net, visual-studio-2010, iis, iis-7.5

我尝试在 iis 中设置 asp 部分：客户端调试 = false 服务器端调试 = false

在我的 web.config 中`<compilation debug="false" targetFramework="4.0">`

现在这一切都在关闭调试，我虽然允许并发请求，但它仍然不允许。如果一个请求仍在处理中，则另一个请求将排队等待完成。

理想情况下，我希望能够同时处理每个请求。就像我可以使用控制台应用程序和创建线程一样！

谢谢。

# python - 将二进制字符串转换为numpy数组

> ID：11760095
> 
> 赞同：31
> 
> 时间：2012-08-01T13:14:37.833
> 
> 标签：python, numpy, binary-data

假设我有字符串：

```
my_data = '\x00\x00\x80?\x00\x00\x00@\x00\x00@@\x00\x00\x80@' 
```

我从哪里得到它是无关紧要的，但为了得到具体的东西，假设我从二进制文件中读取它。

我知道我的字符串是 4 个（4 字节）浮点数的二进制表示。我想将这些浮点数作为一个 numpy 数组。我*可以*这样做：

```
import struct
import numpy as np
tple = struct.unpack( '4f', my_data )
my_array = np.array( tple, dtype=np.float32 ) 
```

但是创建一个中间元组似乎很愚蠢。有没有办法在不创建中间元组的情况下执行此操作？

**编辑**

我还希望能够以可以指定字符串的字节顺序的方式构造数组。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-08-01T13:19:31.063

```
>>> np.frombuffer(b'\x00\x00\x80?\x00\x00\x00@\x00\x00@@\x00\x00\x80@', dtype='<f4') # or dtype=np.dtype('<f4'), or np.float32 on a little-endian system (which most computers are these days)
array([ 1.,  2.,  3.,  4.], dtype=float32) 
```

或者，如果你想要大端：

```
>>> np.frombuffer(b'\x00\x00\x80?\x00\x00\x00@\x00\x00@@\x00\x00\x80@', dtype='>f4') # or dtype=np.dtype('>f4'), or np.float32  on a big-endian system
array([  4.60060299e-41,   8.96831017e-44,   2.30485571e-41,
         4.60074312e-41], dtype=float32) 
```

当然，`b`在 Python 3 之前不需要。

事实上，如果你真的使用二进制文件来加载数据，你甚至可以跳过 using-a-string 步骤，直接从带有`numpy.fromfile()`.

此外，dtype 参考，以防万一：[http ://docs.scipy.org/doc/numpy/reference/arrays.dtypes.html](http://docs.scipy.org/doc/numpy/reference/arrays.dtypes.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-05T23:38:04.713

`np.fromstring()`已弃用。改为使用`np.frombuffer()`。

```
import numpy as np

my_data = b'\x00\x00\x80?\x00\x00\x00@\x00\x00@@\x00\x00\x80@'

# np.fromstring is deprecated
# data = np.fromstring(my_data, np.float32)
data = np.frombuffer(my_data, np.float32)

print(data) 
```

```
[1\. 2\. 3\. 4.] 
```

# php - 我如何在 AdoDB 和 MySQL 中调用存储过程？

> ID：11760102
> 
> 赞同：0
> 
> 时间：2012-08-01T13:14:59.740
> 
> 标签：php, mysql, adodb

> **MySQL 程序**

```
DELIMITER $$
DROP procedure `verifica_nf` $$
CREATE PROCEDURE `verifica_nf` (IN _id_servidor_val BIGINT, IN _nr_periodo_val INT)

BEGIN

DECLARE nota INT;
DECLARE falta INT;

-- Declare variables used just for cursor and loop control
DECLARE no_more_rows BOOLEAN;
DECLARE loop_cntr INT DEFAULT 0;
DECLARE num_rows INT DEFAULT 0;

-- CURSOR--

DECLARE NF_CUR CURSOR FOR 
    -- //////////////////////////////////////////////////////////////// --
    -- // VERIFICA SE E PERIODO ATIVO                                // --
    -- //////////////////////////////////////////////////////////////// --
    SELECT 
    DISTINCT 
    a.nr_notafinal,
    cr.nr_faltas
    FROM 
    pmc_servidor s
    INNER JOIN pat_avaliacao a ON s.id_servidor  = a.id_servidor       
    INNER JOIN pat_avaliacaoetapa ae ON a.id_avaliacao = ae.id_avaliacao  
    INNER JOIN pat_cronograma cr ON s.id_servidor = cr.id_servidor        
    AND cr.nr_periodo = a.nr_periodo
    WHERE 
    s.id_servidor = _id_servidor_val  AND 
    a.nr_periodo  = _nr_periodo_val;

-- Declare 'handlers' for exceptions
DECLARE CONTINUE HANDLER FOR NOT FOUND SET no_more_rows = TRUE;

OPEN NF_CUR;

the_loop: LOOP

    FETCH  NF_CUR INTO nota,  falta;

    IF no_more_rows THEN 
        LEAVE the_loop;
    END IF;

SELECT nota, falta;

  END LOOP the_loop;

END;

$$ 
```

> **PHP 脚本**

```
<?php
require_once("inc/con.php");

$db = ADONewConnection('mysqli');
$db->debug=1;
$db->PConnect("localhost","root","xxxxx","database");

$id = '1197614';
$period = 1;

$stmt = "CALL verifica_nf('$id','$periodo')";

$rs = $db->Execute($stmt);

echo $rs;
?> 
```

* * *

PHP 脚本返回数据库变量的**nota**和**falta**值，但也返回数据库变量的名称。像这样：

**(mysqli): CALL verifica_nf('1197614','1')
nota,falta 10000,1**

如何获取 PHP 变量中的值？

# php - 用于加载类的自动加载器无法按预期工作

> ID：11760107
> 
> 赞同：0
> 
> 时间：2012-08-01T13:15:24.577
> 
> 标签：php, autoloader

最近我开始使用 OOP 并创建了一个类加载器来加载我使用的类。所以我制作了这个类并使用它（本地）并且一切都很好。但是当我将所有内容上传到我的虚拟主机时，它就停止了工作。当我访问加载程序需要加载类的页面时出现以下错误..

```
Fatal error: Uncaught exception 'Exception' with message 'Class "formhandler" could not be autoloaded from:
    /var/www/vhosts/***.nl/httpdocs/admin/lib/formhandler.php' in 
    /var/www/vhosts/***.nl/httpdocs/admin/index.php:30 Stack trace:
        #0 /var/www/vhosts/***.nl/httpdocs/admin/index.php(109): __autoload('formhandler')
        #1 {main} thrown in /var/www/vhosts/***.nl/httpdocs/admin/index.php on line 30 
```

我的自动加载器的代码如下..

```
function __autoload($className) 
      {
        // get the base dir.
          $base = dirname(__FILE__);

          // get path
          $path = $className;

          $file = $base . "/lib/" . $path . '.php';       

          //if exists get file else throw error
          if (file_exists($file)) 
          {
              require $file;      
          }
          else 
          {
              error_log('Class "' . $className . '" could not be autoloaded');
              throw new Exception('Class "' . $className . '" could not be autoloaded from: ' . $file); 
          }
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:31:34.170

比较`formhandler`类的生产路径。我保证它和`/var/www/vhosts/.nl/httpdocs/admin/lib/formhandler.php`. 纠正它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:58:12.967

我找到了解决方案。我有新的表单处理程序（）；但我不得不使用 new FormHandler(); 在我的脚本中，因为我的虚拟主机没有找到它.. 很烦人，但它现在可以工作了！

# sdk - Blackberry NDK 安装后 QNX_CONFIGURATION 设置错误

> ID：11760108
> 
> 赞同：0
> 
> 时间：2012-08-01T13:15:26.197
> 
> 标签：sdk, qnx, blackberry-10

我已经安装了适用于 Windows 7 的 Blackberry Native SDK，但在安装后打开应用程序时出现以下错误：

“QNX 配置设置出错。de QNX_CONFIGURATION 环境变量未正确定义或它指向的位置不可访问。退出 IDE 并修复错误？”

我想解决方案就像将指示的环境变量设置为正确的路径一样简单。但我不知道它必须指向的路径。有人知道吗？

提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T18:42:27.130

它需要指向包含 BlackBerry Native SDK qconfig 文件夹的目录。在 Windows 中，它可能是“C:\Users\ *username* \AppData\Local\Research In Motion\BlackBerry Native SDK”。

# php - RewriteRule 未正确传递 GET 参数

> ID：11760116
> 
> 赞同：1
> 
> 时间：2012-08-01T13:15:55.903
> 
> 标签：php, regex, apache, .htaccess, mod-rewrite

我为我的应用程序的 API 编写了一个简单的正则表达式：

```
^api/([^/]+)/([^/.]+)\.([^$/?=&]+)(?:\?(.*))?$ 
```

这变成

```
/app/api/$1.php?action=$2&format=$3&$4 
```

在[refiddle](http://refiddle.com/2ss)中，正则表达式完美地工作，构造正确的 URL，但 PHP 脚本没有报告除`action`和参数之外的任何 GET`format`参数。放在 / 中的 .htaccess 是

```
AddType image/svg+xml svg
RewriteEngine on
#If the URL is just /api, give them the docs
RewriteRule ^api/?$ /app/api/apidoc.php [L]
#Example api/user/update.json?x=fff&y=gggg
#http://refiddle.com/2ss
RewriteRule ^api/([^/]+)/([^/.]+)\.([^$/?=&]+)(\?(.*))?$ /app/api/$1.php?action=$2&format=$3&$4 [L]
#Example api/user/update?x=000&y=ffe
RewriteRule ^api/([^/]+)/([^/.&=]+)(\?((.*)*))?$ /app/api/$1.php?action=$2&$3 [L] 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:25:16.207

不要尝试捕获额外的查询字符串参数。相反，将它们附加上[`QSA`](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_qsa)标志。

```
RewriteRule ^api/([^/]+)/([^/.]+)\.([^$/?=&]+) /app/api/$1.php?action=$2&format=$3 [L,QSA] 
```

相应地调整你的`RewriteRule`。

# php - PHP：以最少的评估找出变量值

> ID：11760118
> 
> 赞同：1
> 
> 时间：2012-08-01T13:15:58.940
> 
> 标签：php, yii

我正在为我的编辑器编写一个插件来支持 Yii 框架。为了使这个插件工作，我需要找到 2 条路径`index.php`：框架和配置路径。

通常`index.php`（这是 Yii 的入口点）看起来像这样：

```
<?php

// change the following paths if necessary
$yii=dirname(__FILE__).'/../../../../../usr/share/php-libs/framework/yii.php';
$config=dirname(__FILE__).'/protected/config/main.php';

// remove the following lines when in production mode
defined('YII_DEBUG') or define('YII_DEBUG',true);
// specify how many levels of call stack should be shown in each log message
defined('YII_TRACE_LEVEL') or define('YII_TRACE_LEVEL',3);

require_once($yii);
Yii::createWebApplication($config)->run(); 
```

基本上我需要获取所需文件和参数的列表`Yii::createWebApplication()`。

但是这里的代码可以是任何东西。从字面上看任何东西。那么是否有可能以某种方式运行这个文件，`Yii::createWebApplication()`以便我可以找出应用程序目录和框架在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:30:51.373

您可以使用*Yii::app()->basePath*获取应用程序的根路径，使用 Yii::app()-> *baseUrl*获取应用程序的相对 URL。

Yii 框架必须在 Apache 的根 htdocs 中。

# php - 如何在 MVC 项目的 php 类中使用全局变量

> ID：11760119
> 
> 赞同：0
> 
> 时间：2012-08-01T13:15:59.320
> 
> 标签：php, model-view-controller, session, model, global-variables

我想`$st_id`在 mvc 项目的模型类中使用一个函数，如下所示，但它给我一个`$st_id`未定义的错误。我能做些什么来解决这个问题？

```
<?php

@session_start();
$st_id=$_SESSION['username'];
if (!isset($_SESSION['USERNAME']))
{
header('Location: signin.php');
}
//////////////////////    
class model
{
    private $result;
    public $rp_result;
    //////////
    public function exe_query()
    {
        $mysqldb = new MySQLDatabase();
        $result=$mysqldb->query('CALL view_report('.$this->st_id.');');
        $this->rp_result=$mysqldb->fetch_all($result);
    }
}   
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:23:02.840

你怎么称呼你的模型？

我建议你：

```
class model
{
    private $result;
    public $rp_result, $st_id;

    public function __construct($st_id)
    {
        $this->st_id = $st_id;
    }

    public function exe_query()
    {
        $mysqldb = new MySQLDatabase();
        $result=$mysqldb->query('CALL view_report('.$this->st_id.');');
        $this->rp_result=$mysqldb->fetch_all($result);
    }
} 
```

现在，您可以使用：

```
@session_start();
$st_id=$_SESSION['username'];
if (!isset($_SESSION['USERNAME']))
{
    header('Location: signin.php');
}

$model = new model($st_id);
$model->exe_query(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T13:22:15.257

如果你使用它，你必须在类中声明它`$this`

```
class model {
    public $st_id;

    public function __construct() {
        @session_start();
        $this->st_id = $_SESSION['username'];
    }

    public function exe_query()
    {
        $mysqldb = new MySQLDatabase();
        $result=$mysqldb->query('CALL view_report('.$this->st_id.');');
        $this->rp_result=$mysqldb->fetch_all($result);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T13:24:19.763

为什么不直接称它为`$_SESSION['username']`？已经是全球...

# extjs - 对商店中的记录执行 en 编辑

> ID：11760125
> 
> 赞同：0
> 
> 时间：2012-08-01T13:16:30.150
> 
> 标签：extjs

如果我有一条属于-a-store 的记录，但不知道它属于-which-store，如何删除该记录？

例如

```
var store = Ext.create('Ext.data.Store',{
    model:'Pies'
    data:{Type:123,Name:"apple"}
})

var record = store.getAt(0)
//How do I store.remove(record); without actually having the store record handy? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:23:38.897

您的记录实际上将具有`.store`可用于引用它所属的存储的属性 - [http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.Model-property-store](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.Model-property-store)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T15:45:48.843

这是删除给定记录的 Ext JS 代码示例。该记录具有对其所属商店的引用。使用该存储引用与存储的删除方法相结合，您可以删除记录，如下所示。

运行下面粘贴的代码：http: [//jsfiddle.net/MSXdg/](http://jsfiddle.net/MSXdg/)

示例代码：

```
Ext.define('Pies', {
    extend: 'Ext.data.Model',
    fields: [
        'Type',
        'Name'
    ]
})

var pieData = [{
    Type:123,
    Name:'apple'
}];

var store = Ext.create('Ext.data.Store',{
    model:'Pies',
    data: pieData, 
    proxy: {
        type: 'memory'
    }
})

var debug = Ext.fly('debug');

if (debug) {
    debug.setHTML('Record count: ' + store.getCount());
}
console.log('Record count: ' + store.getCount())

var record = store.getAt(0);

// remove the record
record.store.remove(record);

// display the store count to confirm removal
if (debug) {
    debug.setHTML(debug.getHTML() + '<br />Record count after removal: ' + store.getCount());
}
console.log('Record count after removal: ', store.getCount()) 
```

​</p>

# javascript - 通过分配类更改表 td 边框颜色

> ID：11760128
> 
> 赞同：3
> 
> 时间：2012-08-01T13:16:36.240
> 
> 标签：javascript, jquery, html, css

单击按钮时，我想更改表格某些部分的边框颜色。这是一个更大的项目，但我已经能够在这里重现问题 -

[http://jsfiddle.net/RZ7UP/8/](http://jsfiddle.net/RZ7UP/8/)

CSS：

```
table, tr, td
{
    border:1px solid #999;
    padding:8px;
    border-collapse: collapse;
    background-color: #FFF;
}

/*comment this line out and it works*/
#div1 table, #div1 td { border-color:White;}

.colorborder{border:1px solid Red}
​ 
```

css 样式“table, tr, td”在项目中所有页面使用的css文件中。但是，对于这个特定页面，我不想要黑色边框，这就是为什么我想添加样式“#div1 table，#div1 td”（请注意，指定“border:none”具有相同的效果）。但是，添加它会使 jquery 操作停止工作。

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T13:20:13.180

这是 css*特异性的问题。*如果您使用浏览器的 DOM 调试器，您会看到样式`#div1 td`优先于`.colorborder`. 发生这种情况是因为 ID 比类更具体。

尝试将您的 CSS 更改为：

```
#div1 td.colorborder{border:1px solid Red} 
```

[​您可以在此处](http://www.w3.org/TR/CSS21/cascade.html#specificity)阅读 w3.org 的计算特异性规则。如果您打算使用 CSS 进行任何严肃的 Web 开发，那么了解它的工作原理是很好的。

* * *

**CSS 特性的快速介绍**

一般来说，您需要了解以下内容：

*   元素名称（标签名称，如`li`和`td`）具有最低的特异性......
*   ...其次是类和属性（如`[name=firstname]`）...
*   ...后跟ID（如`#div1`）...
*   ...具有最高特异性的内联`style="..."`属性。

此外，对上述的多个实例给予更高的特异性。因此，如果将一种样式分配给`table td`，另一种分配给`table tbody tr td`，则第二种样式将胜出，因为更多的标签名称使其更具体。

当然，您可以通过`!important`在 CSS 中使用来提高效果，但除非在特殊情况下（例如，`class="red"`无论在哪里使用，都希望某个东西用红色着色），否则真的不应该使用它。否则，您会发现自己在整个 CSS 中疯狂地使用它，其中`!important`一个会根据特定性规则覆盖另一个，并且无论如何它通常被认为是草率的编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T13:21:23.877

这一行：

```
#div1 table, #div1 td { border-color:White;} 
```

由元素的 ID (#) 引用，这使得它的层次结构比任何其他普通类规则都高。

为了使其他规则起作用，您需要向它们添加 ID 选择器，以便它们可以覆盖先前规则的层次结构。

```
#div1 .colorborder{border:1px solid Red} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T13:21:32.520

您有一个[特异性](http://www.stuffandnonsense.co.uk/archives/images/specificitywars-05v2.jpg)问题，这意味着具有白色的选择器比红色具有更多的特异性。

现在检查：http: [//jsfiddle.net/RZ7UP/12/](http://jsfiddle.net/RZ7UP/12/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T13:21:10.060

改变

`#div1 table, #div1 td { border-color:White;}`

到

`table#div1, td#div1 { border-color:White;}`

也可以。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T13:21:20.513

您的问题出在 CSS 中，我认为不在 jQuery 中。

你的css的最后一行...... `#div1 table.colorborder, #div1 td.colorborder{border:1px solid red}` 原因是`#div1`ID选择器将获得更高的优先级，无论你是否`.colorborder{...}`在页面下方......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-01T13:24:21.413

那是因为ID作为类具有更高的特异性

# visual-studio-2010 - 如何在 Visual Studio 中添加 .svc 文件

> ID：11760138
> 
> 赞同：31
> 
> 时间：2012-08-01T13:17:28.587
> 
> 标签：visual-studio-2010, svc

我有一个扩展名为 .svc 的文件。第一个问题是什么是 .svc 文件？第二个问题是如何从 Visual Studio 添加项菜单中创建其中之一？我已经尝试了所有最明显的选项，但它们都没有创建 .svc 文件。

谢谢，

萨钦

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-01T13:21:39.067

根据我的经验，SVC 文件是 WCF 服务 - 从项目列表中创建 WCF 应用程序，然后执行“添加新项目”并添加新的 WCF 服务。

为了让它做任何事情，它需要适当的绑定和端点配置和连接 - 在它可以被调用之前。

另请参阅：[WCF 服务。在哪里添加。.svc 文件](https://stackoverflow.com/questions/3566476/wcf-service-where-to-add-svc-file)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-09-01T16:48:26.880

**Q1**：什么是 SVC 文件？
**A1**：用于创建 WCF 服务的类。

**Q2**：如何从 VS Add New Item 菜单创建一个？
**A2**：我假设您在这里使用 C#，但这只是一个细节。

1.  转到添加新项目
2.  查找显示**Web**的节点并单击它（确保您没有选择子节点之一！）
3.  在中间列中查找**WCF 服务**
4.  这里的所有都是它的 ;-）

[![在此处输入图像描述](../Images/f2840e808702ace8c9f8d7095a00042a.png)](https://i.stack.imgur.com/zQFb8.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T14:02:12.707

一个.svc是一个服务文件，[http://www.fileinfo.com/extension/svc](http://www.fileinfo.com/extension/svc)里面 有相当冷门的web文件。

这是一个链接，显示了如何在 Visual Studio 中创建一个，它可能与您拥有的版本不同，但应该差别不大。 [http://www.csharp-examples.net/create-windows-service/](http://www.csharp-examples.net/create-windows-service/)

# android - Android：我从画布创建了一个位图并将其保存到“sdcard/folder/subfolder”，但我无法将其解码为图像视图

> ID：11760144
> 
> 赞同：0
> 
> 时间：2012-08-01T13:17:55.343
> 
> 标签：android, canvas, bitmap

我已经从画布创建了一个位图。将其保存到我的“/sdcard/folder/subfolder/file.png”

我想在保存后将此 png 文件放入 imageview 中。我尝试使用 BitmapFactory.decodeFile("/sdcard/folder/subfolder/file.png"); 方法。但它什么也没返回。imageview 上没有图像。

你有什么主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:32:07.297

尝试使用

```
 String filePath = Environment.getExternalStorageDirectory()+"/folder/subfolder/file.png";//or "folder/subfolder.." 
```

# android - 为什么 excecSQL 在语句中不接受 *？

> ID：11760148
> 
> 赞同：-1
> 
> 时间：2012-08-01T13:18:18.753
> 
> 标签：android, sqlite

我正在开发一个 android 项目，我必须删除表中的所有记录：

```
 public void deleteAll(){
    SQLiteDatabase db=this.getWritableDatabase();
    String req="delete * from "+ TABLE_ENIGME;
    db.execSQL(req);
} 
```

但是当我调用我的函数**deleteAll**时，这个异常被陶醉了：

```
 android.database.sqlite.SQLiteException: near "*": syntax error: delete * from enigme2 
```

那么为什么“*”是不恰当的呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T13:20:37.003

请查看[http://www.sqlite.org/lang_delete.html](http://www.sqlite.org/lang_delete.html)。删除不接受通配符。采用

```
Delete From <table name> 
```

反而

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T13:20:22.847

主要是因为那不是有效的 sql 语法。只需省略星号并执行

```
delete from enigme2; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T13:20:54.860

这是不合适的，因为它不是有效的 SQL 语法。`*`用于表示“所有列”（选择时）。由于 DELETE 语句正在删除整行，因此声明“所有列”是没有意义的，因为默认情况下它会从该行的所有列中删除值。

# ruby-on-rails - rspec 关联测试失败

> ID：11760155
> 
> 赞同：0
> 
> 时间：2012-08-01T13:18:51.983
> 
> 标签：ruby-on-rails, rspec

rspec 仍然有点新，并且无法通过以下测试（问题区域“它“应该以正确的顺序进行正确的处理”块）：

user_spec.rb

```
describe User do

    before do
        @user = User.new(name: "Example User", email: "user@example.com",
                        password: "foobar", password_confirmation: "foobar")
    end

    describe "treating associations" do
        before { @user.save }
        let!(:older_treating) do
            FactoryGirl.create(:treating, user: @user, created_at: 1.day.ago)
        end
        let!(:newer_treating) do
            FactoryGirl.create(:treating, user: @user, created_at: 1.hour.ago)
        end

        it "should have the right treatings in the right order" do          
            @user.sent_treatings.should == [newer_treating, older_treating]
            @user.received_treatings.should == [newer_treating, older_treating]
        end
    end

end 
```

根据下面的用户和处理模型，我知道我需要在测试的某个地方嵌入“请求者”和“被请求者”，并且我尝试了不同的变体，但它们都继续失败。以下是模型：

用户.rb

```
class User < ActiveRecord::Base
    attr_accessible :name, :email, :password, :password_confirmation
    has_secure_password

    has_many :sent_treatings, :foreign_key => "requestor_id", :class_name => "Treating"
    has_many :received_treatings, :foreign_key => "requestee_id", :class_name => "Treating"
end 
```

治疗.rb

```
class Treating < ActiveRecord::Base
  attr_accessible :intro, :proposed_date, :proposed_location

  validates :requestor_id, presence: true
  validates :requestee_id, presence: true

    belongs_to :requestor, class_name: "User"
    belongs_to :requestee, class_name: "User"

    default_scope order: 'treatings.created_at DESC'

end 
```

这是我的 factory.rb 文件：

工厂.rb

```
FactoryGirl.define do
    factory :user do
        sequence(:name) { |n| "Person #{n}" }
        sequence(:email) { |n| "person_#{n}@example.com"}
        password "foobar"
        password_confirmation "foobar"

        factory :admin do
            admin true
        end
    end

    factory :treating do
    intro "Lorem ipsum"
    user
  end
end 
```

寻找适当代码背后的逻辑解释以填写 user_spec 测试的“它“应该以正确的顺序进行正确的处理”块。谢谢！

编辑：对不起，忘记了错误信息，这里是：

失败：

1）用户处理关联应该以正确的顺序进行正确的处理失败/错误：FactoryGirl.create（：处理，用户：@user，created_at：1.day.ago）NoMethodError：未定义的方法`user=' for #<Treating:0x0000010385ec70> # ./spec/models/user_spec.rb:143:in`块（3级）在'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:41:08.760

您正在尝试覆盖一个不存在的字段。

您没有用户，只有请求者或被请求者。例如尝试

```
FactoryGirl.create(:treating, requestor: @user, created_at: 1.hour.ago) 
```

# c++ - 来自控制台的坐标点 - Visual C++ 2010 速成版

> ID：11760159
> 
> 赞同：1
> 
> 时间：2012-08-01T13:19:03.017
> 
> 标签：c++, visual-c++, coordinates, coordinate-systems

我正在尝试编写一个在控制台屏幕上绘制特定形状的程序。我想尝试使用控制台屏幕外的坐标点来指定形状的点，将其存储在数组中，并在控制台屏幕上清楚地显示为白色（或任何颜色）闭合图形。我基本上想知道是否可以在控制台屏幕上设置笛卡尔平面，以便我可以根据我提供的程序的 (x,y) 坐标创建形状和图形。

我不完全了解 Windows GDI 的工作原理，我听说的唯一可以做到这一点的库是“curse.h”或“ncurse.h”库。此外，我在 Internet 上没有找到关于如何在我的 Visual C++ 2010 Express Edition 编译器中安装这些不同库的单一参考资料。感谢@john，我能够查找 Windows 应用程序的控制台功能。我是编码初学者，所以请耐心等待，这是我根据充满错误的程序编写的程序（至少这是构建者所说的）：

```
#include <WinCon.h>
using namespace std;

int main()
{
   char string[] = "#";
   char recString[5] = {'\0'};
   COORD coordinates;
   coordinates.X = 15;
   coordinates.Y = 10;
   SetConsoleCursorPosition(GENERIC_READ, coordinates);
   WriteConsole(GENERIC_WRITE, string, 1, recString, NULL);
   char response;
   cin >> response;
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:26:37.673

Windows 控制台 API 应该为您提供所需的一切[http://msdn.microsoft.com/en-us/library/windows/desktop/ms682073%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682073%28v=vs.85%29.aspx)

编辑：我对这个库没有太多经验，但我可以看到上面的代码有一些问题。像这样的事情更像是你应该做的

```
HANDLE console_out = GetStdHandle(STD_OUTPUT_HANDLE); 
...
SetConsoleCursorPosition(console_out, coordinates); 
...
WriteConsole(console_out, string, 5, recString, NULL); 
```

此页面有一些示例[http://msdn.microsoft.com/en-us/library/windows/desktop/ms686971%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686971%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:46:05.870

请参阅本[教程，了解如何使用带有](http://aaroncox.net/tutorials/2dtutorials/sdlshapes.html)[SDL_gfx](http://www.ferzkopp.net/joomla/software-mainmenu-14/4-ferzkopps-linux-software/19-sdlgfx)附加库的[简单 DirectMedia 层](http://www.libsdl.org/)(SDL) 库来绘制原始形状。这将在控制台窗口之外的窗口上绘制（AFAIK，不可能直接在 Windows 控制台内逐像素绘制图形）。

如果您只是在寻找一种生成带有几何形状的绘图的方法，并且您已经熟悉 Matlab（或其免费克隆[Octave](http://www.gnu.org/software/octave/)），那么您应该考虑使用出色的[geom2d](http://mathworks.com/matlabcentral/fileexchange/7844-geom2d) Matlab 库。

# objective-c - 如何在没有html的情况下将数组写入文件

> ID：11760160
> 
> 赞同：0
> 
> 时间：2012-08-01T13:19:03.877
> 
> 标签：objective-c, arrays, text

我现在的代码如下所示：

```
NSString *path = @"/Users/student/Desktop/conf.txt"

NSArray *myArray = [NSArray arrayWithObjects:@"hello",@"world",@"etc",nil];

[myArray writeToFile:path atomically:YES]; 
```

当我查看它写入的文本文件时，它最终看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN"     "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
    <string>hello</string>
     <string>world</string>
    <string>etc</string>
 </array>
 </plist> 
```

我不想将它显示为 html，我只想要一个简单的文本文档，其中包含 3 行“hello world 等”。

有人知道我该如何解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T13:23:47.300

如果您的数组包含字符串，并且您希望将它们写入每行一个文件，您可以首先使用所有单词创建字符串，然后将其写入文件：

```
NSString *outString = [myArray componentsJoinedByString:@"\n"];
NSError *error = nil;
[outString writeToFile: path atomically:YES encoding:encoding:NSUTF8Encoding error:&error]; 
```

但是如果你想序列化你的数组以备将来使用 plist 格式可能会更方便

# java - 哪个解析器：SAX、DOM 还是 xpath？

> ID：11760164
> 
> 赞同：0
> 
> 时间：2012-08-01T13:19:16.330
> 
> 标签：java, xml

我有运行查询的 xml，如下所述。哪个解析器（sax 或 DOM 或 xpath）最适合按 id 检索查询节点？

您能否用一些示例代码向我解释一下，以便对我有很大帮助？

我想编写一个通用类，它通过 id 读取查询并将参数传递给它。在我们执行查询后返回值的最佳方式是什么，因为每个查询都可能返回一组不同的值？

```
<?xml version="1.0" encoding="UTF-8"?>
<queries>
    <query id="getUserByName">
        select * from users where name=?
    </query>
    <query id="getUserByEmail">
        select * from users where email=?
    </query>
</queries> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T13:26:12.753

它主要取决于用例。

如果一般来说，`SAX Parser`对于解析大文件和`dom parser`备用文件很有用。

原因是`dom parser`在解析大文件/输入流时占用了足够的内存。

在我看来，需要有一定的经验才能最好地利用 Sax Parser。相对 dom 解析更容易学习和使用。

或者，如果用例允许，与 sax 相比更容易并在内部使用 sax，Apaches [commons-digester可以作为替代建议。](http://commons.apache.org/digester/)

并且`xpath`不是解析器。

* * *

对于您的情况，您不需要解析器。我认为您正在寻找 xpath 来使用`xpath`.

如果您需要为您的简单生成一个新的 xml，您`xml`可以手动执行此操作。我现在不能提出任何更好的选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T16:58:02.943

如果您真的将 SQL 放入 XML 中然后执行，我会使用 MyBatis。

如果您不想使用 MyBatis，您应该使用 JAXB 并将整个 XML 作为查询对象列表加载，因为您不想为每个查询重新解析 XML。让我向您展示使用 JAXB 是多么容易：

```
@XmlRootElement(name = "queries")
public class Queries {
  @XmlElement(name = "query")
  public List<Query> queries;
}

public Query {
  @XmlAttribute
  public String id;
  @XmlValue
  public String sql;
}

Queries queries = JAXB.unmarshal(file, Queries.class); 
```

以上内容未经测试，但它应该给你一个想法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-01T16:07:51.887

在可用性和程序员生产力方面更好：SAX 最差，XPath 最好。

在节省机器周期方面更好：SAX 最好，XPath 最差。

所以这取决于你的程序员是否比你的电脑贵。通常他们会这样做。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-01T13:24:39.763

从技术上讲，XPath 不是一种查询，而是[一种用于从 XML 文档中选择节点的查询语言](http://en.wikipedia.org/wiki/XPath)。

SaX 和 DOM 之间的主要区别在于 DOM 会将您的所有文档加载到内存结构中。对于小型 XML 文档，您不会遇到太多麻烦，但对于大型 XML 文档，内存使用可能会成为问题。另一方面，SaX 将以流方式处理您的 XML 文档，因此最终没有代表整个文档的对象模型。相反，您需要自己跟踪在文档中遇到的数据。

对于这种情况，我的选择是使用 SaX 并跟踪文档中的所有查询，例如在 a 中`Map<String, String>`（其中键是查询 ID，值是查询本身）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-01T13:39:51.340

DOM 规范定义了一种基于树的方法来导航 XML 文档 SAX 规范定义了一种基于事件的方法，解析器通过这种方法扫描 XML 数据，每当文档的某些部分调用处理函数 SAX 规范的优势在于它可以扫描并在不达到资源限制的情况下解析千兆字节的 XML 文档

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T16:30:31.843

**Sax 解析器**将非常适合您的情况。我写了一篇关于[Sax 解析的博客文章](http://sanjayacl.blogspot.com/2010/12/sax-parsera-simple-way-to-access-xml.html)

和另一篇关于[如何选择 xml 解析器的博文](http://sanjayacl.blogspot.com/2011/05/how-to-choose-xml-parser.html)

希望这些对您有所帮助。

# asp.net - 幕后更新面板

> ID：11760165
> 
> 赞同：2
> 
> 时间：2012-08-01T13:19:17.643
> 
> 标签：asp.net, .net, ajax, httpwebrequest, updatepanel

我对 UpdatePanel 的了解是

1.  他们使用 Ajax 请求异步工作。
2.  他们执行部分回发。

现在最近我也在使用`$.ajax()`jQuery 的方法处理 Ajax 请求，当我发现我发出的 Ajax 请求和 UpdatePanel 发出的 Ajax 请求有一些不同之处时

1.  UpdatePanel 的 Ajax 请求执行整个页面生命周期，但我的 Ajax 请求仅调用我提供的要调用的特定方法。
2.  UpdatePanel 调用的方法不需要标记为 WebMethod，但我的 Ajax 请求调用的方法必须是 WebMethod。

我在网上搜索以获取有关这些差异的详细信息，但没有找到任何资源，**有人可以告诉我我和 UpdatePanel 进行的 Ajax 调用之间有什么区别，或者更具体地说，这些区别是如何产生的以及 UpdatePanel 使用了哪些特殊技巧来实现那个功能？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T13:42:29.313

我喜欢这个问题队友+1

基本上，邪恶的 UpdatePanel 是万恶之源。可悲的是 =(。幕后的更新面板引发了对服务器的异步回发，但要完全了解发生了什么，您需要了解**UpdatePanel 目标**

UpdatePanel 旨在与 ASP.Net Web 表单一起使用，这些控件**必须经过 whoooole ASP.Net 页面生命周期**才能正常工作，因此，它们需要**whoooole 页面 ViewState**。因此，每次您使用 UpdatePanel 执行回发时，即使您只想部分呈现页面的一小部分，整个页面视图状态也会来回发送到服务器......很烂。微软为什么要创造这个怪物？我认为这是因为早在 5 到 6 年前（或更长时间），AJAX 还没有像今天这样流行。另一个原因是微软希望提供一个框架来以简单的方式编写 AJAX 调用，但又不失 Web 控件的强大功能。

因此，考虑到这一点，AJAX 调用和 AJAX 调用之间的区别`UpdatePanel`很简单：

AJAX 调用仅发送服务器方法所需的数据，并且只返回所需的数据。使用纯 AJAX 调用的性能令人印象深刻。

> 但是我的 Ajax 请求调用的方法必须是 WebMethod。

这部分是正确的，我的意思是有不同的方法可以从服务器公开方法：

*   使用传统的 Web 服务 - 脚本服务 (ASMX)

*   使用 PageMethods（ASPX 页面上的静态方法）

*   公开 WCF 服务

*   公开 WCF REST 服务

*   使用 WEB API

*   使用 MVC 控制器的操作

*   使用自定义 HttpHandlers 返回特定的内容类型，如 JSON

*   ETC

最后结果是一样的，无论你使用什么方法来暴露服务器方法，当你使用纯 AJAX 调用来使用它们时，如果你使用 Web 表单，你将不得不面对以下问题：

*如果您想使用纯 AJAX 调用，那么您应该考虑迁移到 MVC，因为在 Web 表单中您将失去 Web 控件的功能，换句话说，您的开发会更加困难*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:43:00.233

> 他们执行部分回发。

不，更新面板执行完整的回发，它们只是在页面上执行部分更新。

> UpdatePanel 的 Ajax 请求执行整个页面生命周期，但我的 Ajax 请求仅调用我提供的要调用的特定方法。

准确地说，更新面板执行完整的回发。效率极低。

# php - 同一ID上的Javascript多个值

> ID：11760168
> 
> 赞同：0
> 
> 时间：2012-08-01T13:19:24.430
> 
> 标签：php, javascript, sajax

我在 php 中有一个循环，它回显了一个`<input type="hidden" id="lol" value=$id />`

每次循环通过时，我都会在隐藏的输入字段中获得一个新值，如您所见。

现在，我试图从这些项目中获取价值并使用 Javascript 和 SAJAX 获取它。我现在使用的 javascript 可以正常工作，但是！它只获取第一个值（因为每个输入的 ID 相同）

Javascript：

```
function Showbooking() {
    id = document.getElementById('lol').value;
    x_showBookingForm(id, do_showBookingForm);
}
function do_showBookingForm(html) {
    openPopup(600, 550, html);
} 
```

正如您所看到的，我还使用 javascript 打开了一个弹出窗口，并将值导出到该弹出窗口中。

因此，在每个弹出窗口中，我都会得到相同的值（来自第一个输入的值）。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T13:24:25.033

1.  将 ID 更改为名称
2.  使用 document.getElementsByName 和循环

```
var lols = document.getElementsByName("lol");
var vals=[];
for (var i=0, n=lols.length;i<n;i++) {
  vals.push(lols[i].value);
}
alert(vals.join(",")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T13:25:07.067

`getElementById`说*元素*而不是*元素*，因为它只返回一项。`id`应该是独一无二的。你可以做一些事情的效果：

```
var inputs = document.getElementsByTagName("input");
var values = [];
for(var i=0;i<inputs.length;i++){
    if(inputs[i].type === "hidden"){
        values.push(inputs[i].value;
    }
} 
```

# jquery - : 在 Nokogiri 中有 CSS 伪类

> ID：11760171
> 
> 赞同：1
> 
> 时间：2012-08-01T13:19:41.527
> 
> 标签：jquery, css, ruby-on-rails, ruby, nokogiri

我正在寻找[Nokogiri](http://nokogiri.org/Nokogiri/XML/Node.html)`:has`中的伪类。它应该像 jQuery 的[selector](http://api.jquery.com/has-selector/)一样工作。[`has`](http://api.jquery.com/has-selector/)

例如：

```
<li><h1><a href="dfd">ex1</a></h1><span class="string">sdfsdf</span></li>
<li><h1><a href="dsfsdf">ex2</a></h1><span class="string"></span></li>
<li><h1><a href="sdfd">ex3</a></h1></li> 
```

CSS 选择器应该只返回第一个链接，即具有非空`span.string`兄弟的链接。

在 jQuery 中，这个选择器运行良好：

```
$('li:has(span.string:not(:empty))>h1>a') 
```

但不在 Nokogiri 中：

```
Nokogiri::HTML(html_source).css('li:has(span.string:not(:empty))>h1>a') 
```

`:not`并且`:empty`效果很好，但不是`:has`。

* * *

1.  Nokogiri 中是否有关于 CSS 选择器的文档？
2.  也许有人可以编写自定义`:has`伪类？这是一个如何编写选择器的[示例](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-css)`:regexp`。
3.  我可以选择使用 XPath。如何编写 XPath `li:has(span.string:not(:empty))>h1>a`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T17:36:48.187

[Nokogiri 当前实现的问题`:has()`](https://github.com/sparklemotion/nokogiri/issues/350)在于它创建的 XPath 要求内容是直接子代，而不是任何后代：

```
puts Nokogiri::CSS.xpath_for( "a:has(b)" )
#=> "//a[b]"
#=> Should output "//a[.//b]" to be correct 
```

要使此 XPath 与 jQuery 的功能相匹配，您需要允许`span`成为后代元素。例如：

```
require 'nokogiri'
d = Nokogiri.XML('<r><a/><a><b><c/></b></a></r>')
d.at_css('a:has(b)')    #=> #<Nokogiri::XML::Element:0x14dd608 name="a" children=[#<Nokogiri::XML::Element:0x14dd3e0 name="b" children=[#<Nokogiri::XML::Element:0x14dd20c name="c">]>]>
d.at_css('a:has(c)')    #=> nil
d.at_xpath('//a[.//c]') #=> #<Nokogiri::XML::Element:0x14dd608 name="a" children=[#<Nokogiri::XML::Element:0x14dd3e0 name="b" children=[#<Nokogiri::XML::Element:0x14dd20c name="c">]>]> 
```

对于您的具体情况，这是完整的“损坏”XPath：

```
puts Nokogiri::CSS.xpath_for( "li:has(span.string:not(:empty)) > h1 > a" )
#=> //li[span[contains(concat(' ', @class, ' '), ' string ') and not(not(node()))]]/h1/a 
```

在这里它是固定的：

```
# Adding just the .//
//li[.//span[contains(concat(' ', @class, ' '), ' string ') and not(not(node()))]]/h1/a

# Simplified to assume only one CSS class is present on the span
//li[.//span[@class='string' and not(not(node()))]]/h1/a

# Assuming that `not(:empty)` really meant "Has some text in it"
//li[.//span[@class='string' and text()]]/h1/a

# ..or maybe you really wanted "Has some text anywhere underneath"
//li[.//span[@class='string' and .//text()]]/h1/a

# ..or maybe you really wanted "Has at least one element child"
//li[.//span[@class='string' and *]]/h1/a 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T13:39:18.757

Nokogiri 没有`:has`选择器，这里是关于它的作用的文档*：* http: [//ruby.bastardsbook.com/chapters/html-parsing/#h-2-2](http://ruby.bastardsbook.com/chapters/html-parsing/#h-2-2)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T13:59:52.913

好的，我找到了一个可能对某人有用的解决方案。

自定义伪类`:custom_has`：

```
class MyCustomSelectors
  def custom_has node_set, selector
      node_set.find_all { |node| node.css(selector).present? }
  end
end

#usage:
doc.css('li:custom_has(span.string:not(:empty))>h1>a',MyCustomSelectors.new) 
```

为什么我声明`:custom_has`不只是`:has`？因为已经声明过了。在 Nokogiri 存储库中有选择器的[测试](https://github.com/sparklemotion/nokogiri/blob/master/test/css/test_parser.rb#L65)`:has`，但它们不起作用。我向作者[报告了这个问题](https://github.com/sparklemotion/nokogiri/issues/739)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-14T18:41:17.690

Nokogiri 允许链接`.css()`和`.xpath()`调用同一个对象。因此，任何时候您想使用`:has`，只需结束当前`.css()`调用并添加`.xpath(..)`（父选择器）。您甚至可以`.css()`从您`xpath()`离开的地方开始另一个呼叫来恢复您的选择！

**例子：**

这是来自维基百科的一些 HTML：

```
<tr>
    <th scope="row" style="text-align:left;">
        Origin
    </th>
    <td>
        <a href="/wiki/Edinburgh" title="Edinburgh">Edinburgh</a>
        <a href="/wiki/Scotland" title="Scotland">Scotland</a>
    </td>
</tr>
<tr>
    <th scope="row" style="text-align:left;">
        <a href="/wiki/Music_genre" title="Music genre">Genres</a>
    </th>
    <td>
        <a href="/wiki/Electronica" title="Electronica">Electronica</a>
        <a href="/wiki/Intelligent_dance_music" title="Intelligent dance music">IDM</a>
        <a href="/wiki/Ambient_music" title="Ambient music">ambient</a>
        <a href="/wiki/Downtempo" title="Downtempo">downtempo</a>
        <a href="/wiki/Trip_hop" title="Trip hop">trip hop</a>
    </td>
</tr>
<tr>
    <th scope="row" style="text-align:left;">
        <a href="/wiki/Record_label" title="Record label">Labels</a>
    </th>
    <td>
        <a href="/wiki/Warp_(record_label)" title="Warp (record label)">Warp</a>
        <a href="/wiki/Skam_Records" title="Skam Records">Skam</a>
        <a href="/wiki/Music70" title="Music70">Music70</a>
    </td>
</tr> 
```

假设您要选择包含链接之后的`<a>`第一个元素中的所有元素。`<td>``<th>``href="/Music_genre"`

```
@artistPage.css("table th > a[href='/wiki/Music_genre']").xpath("..").css("+ td a") 
```

这将返回`<a>`每个流派列表的所有 's。

现在，为了更好地衡量，让我们获取所有这些`<a>`'s 的内部文本并将它们放入一个数组中。

```
@genreLinks = @artistPage.css("table th > a[href='/wiki/Music_genre']").xpath("..").css("+ td a")
@genres = []
@genreLinks.each do |genreLink|
  @genres.push(genreLink.text)
end 
```

# javascript - 下划线减少，关于备忘录

> ID：11760173
> 
> 赞同：7
> 
> 时间：2012-08-01T13:19:51.747
> 
> 标签：javascript, underscore.js

根据文档[underscore-reduce](http://underscorejs.org/#reduce)我应该传递三个参数。

例如：

```
var m = _.reduce([1,2,3], function (memo, num) {return (num * 2) +memo }, 0);
m; // 12 as expected 
```

如果我尝试只传递前两个参数，我会得到不同的值。为什么？

```
var m = _.reduce([1,2,3], function (memo, num) {return (num * 2) +memo });
m; // 11 ..why? 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T13:21:42.777

只有两个参数传入[`reduce`](http://underscorejs.org/#reduce)，它将使用第一个和第二个数组项作为第一个函数调用的参数。

```
function addDouble(memo, num) {return (num * 2) +memo }

[1,2,3].reduce(addDouble, 0)
// is equivalent to
addDouble(addDouble(addDouble(0, 1), 2), 3)

[1,2,3].reduce(addDouble)
// is equivalent to
addDouble(addDouble(1, 2), 3) 
```

通常你会传递起始值，但许多操作在没有[标识元素](http://en.wikipedia.org/wiki/Identity_element)的情况下启动时会产生相同的结果。例如：

```
function add(a, b) { return a+b; }
function double(a) { return 2*a; }

[1,2,3].map(double).reduce(add) == [1,2,3].map(double).reduce(add, 0) 
```

另请参阅[native`reduce()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/Reduce)的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T19:41:35.077

如果您只传递两个参数，则初始备忘录将采用数组的第一个值，并通过其余的。11 = 1 + (2 * 2) + (3*3)。这就是为什么。如果你传递三个参数，备忘录将把第三个参数作为初始meno，并遍历数组的每一项。

# install4j - install4j 卸载程序不会删除所有文件

> ID：11760174
> 
> 赞同：0
> 
> 时间：2012-08-01T13:19:53.733
> 
> 标签：install4j

我正在使用由 j2re1.4.2_08 编译并在 WindowsXP 上运行的 install4j 4.0.5 为桌面应用程序生成安装程序。问题是卸载程序不会删除任何文件，除非文件已由以前的安装程序安装。示例：它将我的应用程序安装到程序文件文件夹中，可以说“沃达丰”。我的应用程序进一步在“vodafone”文件夹中创建了一些文件和文件夹。在卸载时，它会删除安装程序创建的所有内容，而我的应用程序创建的文件和文件夹即使在重新启动我的机器几次后仍保留在“vodafone”中，所以我需要删除安装文件夹中的所有文件。我需要您的支持才能知道如何解决这个问题，如果有任何解决方法我可以解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T13:37:09.190

卸载程序不会删除安装文件夹中的所有文件和文件夹。只会删除以下文件：

*   包含在安装程序中并且具有导致卸载的卸载策略的文件，例如“始终”或“如果已创建”。

*   `context.registerUninstallFile(...)`安装程序注册的文件

如果删除这些文件后安装目录为空，则安装目录也将被删除。

如果要删除其他外部创建的文件，请改用“删除文件或目录”操作。

# mysql - MySQL命令行中root用户的访问被拒绝

> ID：11760177
> 
> 赞同：42
> 
> 时间：2012-08-01T13:20:07.137
> 
> 标签：mysql, command-line, xampp

我刚刚安装了 xampp，并且正在使用命令行编写 mySQL。我正在使用没有密码的“root”，并且可以连接到 mysql，但`CREATE DATABASE`由于出现错误而无法连接`1044 access denied for user '' @ 'localhost'`。我以`-uroot`.

我在 phpMyadmin 中有权限做我想做的事，但是，在命令行中我似乎没有写权限。我查看了有关此主题的所有其他相关帖子，但无济于事。我不能授予特权，因为无论如何我都没有。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-08-02T09:14:32.220

您是否以 root 身份登录 MySQL？以 MySQL root 身份登录时，您必须明确授予“常规” MySQL 用户帐户的权限。

首先为您的 MySQL 数据库设置一个 root 帐户。

在终端类型中：

```
mysqladmin -u root password 'password' 
```

要登录 MySQL，请使用以下命令：

```
mysql -u root -p 
```

要设置权限，使用 skip-grant-tables 选项手动启动服务器，打开 mysql 客户端并手动更新 mysql.user 表和/或 mysql.db 表。不过，这可能是一项乏味的任务，因此，如果您需要的是具有所有权限的帐户，我将执行以下操作。

`skip-grant-tables`使用选项启动服务器

启动 mysql 客户端（没有用户名/密码）

发出命令

```
flush privileges; 
```

这会强制加载授权表。

使用类似这样的 GRANT 命令创建一个新帐户（但将用户名和密码替换为您想要使用的任何内容。

```
GRANT ALL on *.* to 'username'@'localhost' identified by 'password'; 
```

以正常模式重新启动服务器（没有跳过授权表）并使用新创建的帐户登录。

请参阅[此](http://dev.mysql.com/doc/refman/5.0/en/server-options.html#option_mysqld_skip-grant-tables)MySQL 文档。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-01T13:42:49.647

导航 C:\xampp\mysql\bin\ 并确保文件 mysql.exe 在该文件夹中。

```
mysql -uroot -p 
```

如果没有密码，只需按 Enter。

提示变为

```
mysql> 
```

做你的mysql命令

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-10-12T15:17:47.310

默认情况下，XAMPP 中没有为 root 用户设置密码。

您可以为 MySQL 的 root 用户设置密码。

导航

> 本地主机：80/security/index.php

并为root用户设置密码。

*注意：如果您的 Apache 在不同的端口上，请更改上述 url 中的端口号。*

> 打开 XAMPP 控制面板 点击“Shell”按钮

命令提示符窗口现在将以该窗口类型打开

```
mysql -u root -p; 
```

它将要求输入密码，输入您为 root 用户设置的密码。

在那里你以root用户身份登录：D现在做你想做的事情：P

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-10-22T15:11:28.037

# 访问 MariaDB 10 数据库服务器

停止数据库服务器后，下一步是通过启动数据库服务器并跳过网络和权限表来通过后门访问服务器。这可以通过运行以下命令来完成。

```
sudo mysqld_safe --skip-grant-tables --skip-networking & 
```

## 重置 MariaDB 根密码

现在数据库服务器已以安全模式启动，运行以下命令以不提示密码的情况下以 root 身份登录。为此，请运行以下命令

```
sudo mysql -u root 
```

然后运行以下命令以使用 mysql 数据库。

```
use mysql; 
```

最后，运行以下命令来重置 root 密码。

```
update user set password=PASSWORD("new_password_here") where User='root'; 
```

将**new_password _here**替换为您要为 root 帐户创建的新密码，然后按 Enter。

之后，运行以下命令以更新权限并将更改保存到磁盘。

```
flush privileges; 
```

退出（CTRL + D），你就完成了。

接下来正常启动 MariaDB 并测试您刚刚创建的新密码。

```
sudo systemctl stop mariadb.service
sudo systemctl start mariadb.service 
```

通过运行以下命令登录到数据库。

```
sudo mysql -u root -p 
```

*来源：* [https ://websiteforstudents.com/reset-mariadb-root-password-ubuntu-17-04-17-10/](https://websiteforstudents.com/reset-mariadb-root-password-ubuntu-17-04-17-10/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-11-29T18:20:18.580

我有同样的问题，原来是 MariaDB 被设置为只允许 root 通过 unix_socket 插件在本地登录，因此清除该设置允许使用命令行上指定的用户成功登录，提供当然，输入正确的密码。在 Ask Ubuntu 上查看这个[答案](https://askubuntu.com/a/964762)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-02T11:26:27.280

我重新安装了 ODBC 连接器 msi 并直接重新安装了 mySQL（除了 xampp），它现在可以工作了。我认为这是一个连接器问题，因为 SHOW DATABASES 实际上根本没有显示我的数据库。

我的“root”登录无法访问数据库，这使它看起来权限有限，但实际上连接不正确。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-30T05:35:58.083

服务器文件仅更改名称文件夹

```
etc/mysql
rename
mysql- 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-02-20T09:07:09.590

这可能对 Ubuntu 有所帮助：

转到 /etc/mysql/my.cnf 并评论这一行：

```
bind-address           = 127.0.0.1 
```

希望这对某人有帮助，我也一直在寻找这个

干杯

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2012-08-01T13:36:35.673

和用户名之间不能有空格字符`-u`：

```
mysql -uroot -p
# or
mysql --user=root --password 
```

# algorithm - 找到周期内最大空闲时间段中间的算法？

> ID：11760179
> 
> 赞同：4
> 
> 时间：2012-08-01T13:20:10.087
> 
> 标签：algorithm, scheduling

假设我想在 00:00–00:59 期间安排一系列事件。我将它们安排在整分钟（00:01，从不 00:01:30）。

我想在那段时间内将它们尽可能地分开，但我事先不知道在那一小时内我将有多少事件。我今天可以安排一个活动，明天再安排两个。

我脑子里有一个明显的算法，我可以想出蛮力的方法来实现它，但我相信有人知道更好的方法。我更喜欢 Ruby 或者我可以翻译成 Ruby 的东西，但我会尽我所能。

所以我脑子里能想到的算法：

事件 1 仅在 00:00 结束。

事件 2 结束于 00:30，因为该时间距现有事件最远。

事件 3 可能在 00:15 或 00:45 结束。所以也许我只选择第一个，00:15。

事件 4 然后在 00:45 结束。

事件 5 在 00:08 左右结束（从 00:07:30 向上取整）。

等等。

所以我们可以查看每对花费的分钟数（例如，00:00–00:15、00:15–00:30、00:30–00:00），选择最大的范围（00:30–00:00 )，将其除以二并四舍五入。

但我相信它可以做得更好。分享！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:59:36.563

由于您最多只能安排 60 个事件，所以我认为使用静态表值得一试（与思考算法和测试相比）。我的意思是对你来说，在时间之内安排事件是非常微不足道的任务。但是告诉计算机如何做到这一点并不容易。

所以，我建议用静态时间值来定义表，在该表中放置下一个事件。它可能是这样的：

```
00:00, 01:00, 00:30, 00:15, 00:45... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T14:13:53.073

您可以使用位反转来安排您的活动。只需采用事件序列号的二进制表示，反转其位，然后将结果缩放到给定范围（0..59 分钟）。

另一种方法是按 (0000,1000,0100,1100,...) 的顺序生成位反转字。

这允许轻松分发多达 32 个事件。如果需要更多事件，则在缩放结果后，您应该检查结果分钟是否已被占用，如果是，则生成并缩放下一个单词。

这是 Ruby 中的示例：

```
class Scheduler
  def initialize
    @word = 0
  end

  def next_slot
    bit = 32
    while  (((@word ^= bit) & bit) == 0) do
      bit >>= 1;
    end
  end

  def schedule
    (@word * 60) / 64
  end
end

scheduler = Scheduler.new

20.times do
  p scheduler.schedule
  scheduler.next_slot
end 
```

按顺序生成位反转字的方法是从“[计算事项](http://www.jjj.de/fxt/#fxtbook) ”第 1.14.3 章借用的。

* * *

**更新：**

由于从 0..63 缩放到 0..59，该算法倾向于在 0、15、30 和 45 之后生成最小的槽。问题是：它总是从这些（最小的）槽开始填充间隔，而它是从最大的插槽开始填充更自然。因此，算法并不完美。另一个问题是需要检查“已经占用的分钟”。

幸运的是，一个小修复解决了所有这些问题。只是改变

```
while  (((@word ^= bit) & bit) == 0) do 
```

至

```
while  (((@word ^= bit) & bit) != 0) do 
```

并`@word`用 63 初始化（或继续用 0 初始化它，但进行一次迭代以获得第一个事件）。此修复将反转字从 63 减少到零，它始终将事件分配到最大可能的插槽，并且在前 60 次迭代中不允许“冲突”事件。

* * *

**其他算法**

前面的方法很简单，但它只能保证（在任何时候）最大的空槽不超过最小槽的两倍。由于您希望将事件尽可能分开，因此基于斐波那契数或黄金比例的算法可能是首选：

1.  将初始间隔 (0..59) 放入优先级队列（最大堆，优先级 = 间隔大小）。
2.  要安排一个事件，弹出优先级队列，以黄金比例 (1.618) 分割生成的间隔，使用分割点作为该事件的时间，并将两个生成的间隔放回优先级队列。

这保证了最大的空槽不超过（大约）最小槽的 1.618 倍。对于较小的插槽，近似值会变差，并且尺寸与 2:1 相关。

如果不方便在调度更改之间保留优先级队列，您可以提前准备一个包含 60 个可能事件的数组，并在每次需要新事件时从该数组中提取下一个值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T13:56:48.893

由于您无法重新安排活动，并且您不提前知道有多少活动将到达，我怀疑您自己的建议（带有 Roman 使用 01:00 的说明）是最好的。

但是，*如果您对达到最大值的事件数量有任何估计*，您可能可以对其进行优化。例如，假设您估计最多 7 个事件，您可以准备`60 / (n - 1)`= 10 分钟的时隙并像这样安排事件：

*   00:00
*   01:00
*   00:30
*   00:10
*   00:40
*   00:20
*   00:50 // 相隔 10 分钟

请注意，最后几个事件可能不会到达，因此使用 00:50 的可能性很小。

这将比基于非估计的算法*更公平*，尤其是在最坏的情况下，所有插槽都被使用：

*   00:00
*   01:00
*   00:30
*   00:15
*   00:45
*   00:07
*   00:37 // 仅相隔 7 分钟

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T14:08:45.637

我为我的解决方案编写了一个 Ruby 实现。它有一个边缘情况，任何超过 60 的事件都将在第 0 分钟堆积起来，因为现在每个空闲时间空间的大小都相同，并且它更喜欢第一个。

我没有指定如何处理超过 60 的事件，我也不在乎，但我想如果你在乎的话，随机化或循环可以解决这种边缘情况。

`each_cons(2)` [得到二元组](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-each_cons)；其余的可能很简单：

```
class Scheduler
  def initialize
    @scheduled_minutes = []
  end

  def next_slot
    if @scheduled_minutes.empty?
      slot = 0
    else
      circle = @scheduled_minutes + [@scheduled_minutes.first + 60]
      slot = 0
      largest_known_distance = 0

      circle.each_cons(2) do |(from, unto)|
        distance = (from - unto).abs
        if distance > largest_known_distance
          largest_known_distance = distance
          slot = (from + distance/2) % 60
        end
      end
    end

    @scheduled_minutes << slot
    @scheduled_minutes.sort!
    slot
  end

  def schedule
    @scheduled_minutes
  end
end

scheduler = Scheduler.new

20.times do
  scheduler.next_slot
  p scheduler.schedule
end 
```

# php - Ruby/Rails 开发人员的 PHP/Zend 学习资源？

> ID：11760180
> 
> 赞同：0
> 
> 时间：2012-08-01T13:20:10.693
> 
> 标签：php, ruby-on-rails, ruby, zend-framework

有没有什么好的资源可以为 Ruby/Rails 开发人员学习 PHP/Zend（也许是专门的）？某种速成课程将是理想的！

我只需要了解基础知识，就可以使用 Zend 框架构建的 PHP 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T00:52:09.390

我发现 Zend 认证学习指南是一个很好的参考资料，涵盖了您应该知道的内容。它会给你一些观点：[http ://www.zceguide.com/](http://www.zceguide.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T13:30:14.230

如果你不幸不得不使用 ZF，他们在这里确实有很好的文档，尽管它与 Rails 不相称（但它应该足以让你在遗留应用程序上工作）：[http:// framework.zend.com/manual/en/](http://framework.zend.com/manual/en/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T00:09:14.490

[PHP 文档](http://www.php.net/manual/en/index.php)非常好。前面提到的[Zend 框架手册](http://framework.zend.com/manual/en/reference.html)也是如此，把它们放在一起是几个很好的快速入门教程：

第一个是[Rob Allen 的 ZF 1.x 教程](http://akrabat.com/zend-framework-tutorial/)
第二个是[ZF 快速入门](http://framework.zend.com/manual/en/learning.quickstart.intro.html)

这些应该让你启动并运行......

# c# - 如何在 C# 中操纵“绝对”和“自相关”安全描述符？

> ID：11760182
> 
> 赞同：0
> 
> 时间：2012-08-01T13:20:16.630
> 
> 标签：c#, .net, com, permissions, dcom

我正在玩弄[这里的代码，](https://stackoverflow.com/a/11648863/57428)它使用`RawSecurityDescriptor`类从 Windows 注册表读取安全描述符，对其进行更改，然后将更改后的描述符存储回来。这与“dcomperm”Microsoft SDK 示例的功能基本相同。

然而，“dcomperm”样本进行了两次转换——一旦从注册表中读取描述符，它就会从“selt-relative”转换为“absolute” `MakeAbsoluteSD()`，然后以这种形式进行更改，一旦更改完成，它就会转换回“self” -relative”`MakeSelfRelativeSD()`以“自相关”形式使用和存储。

在我链接到的代码中没有这样的转换。

它们是如何在 C# 中完成的？它们是由 .NET 框架在内部完成的，还是我必须使用 P/Invoke 自己完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:59:50.057

据我了解，`System.Security.AccessControl`命名空间中的类（如`RawSecurityDescriptor`等）`RawAcl`提供了相应 Win32 构造中信息的托管表示。所以 .NET 对象的一个​​实例`RawSecurityDescriptor`，其字段也是 .NET 对象（包括，例如，`RawAcl`DACL 和 SACL 的两个对象）。这种托管表示与 unmanaged 的​​绝对形式或自相关形式都没有直接关系`SecurityDescriptor`。

该类`RawSecurityDescriptor`提供与托管表示的转换，一种是文本 SDDL 表示（与您的问题无关），另一种是它所谓的“BinaryForm”，它对应于 Win32 自相关结构，将 SD 表示为连续的字节数组。

您的托管代码示例使用从存储在注册表中的自相关字节数组转换为托管表示的`ctor`。`RawSecurityDescriptor`然后使用 .NET 代码对托管表示进行更改，最后`GetBinaryForm`调用该方法将修改后的 SD 转换回自相关的非托管形式以存储在注册表中。因此托管代码永远不需要关注任何绝对的 SD 结构。

非托管代码确实需要以各种方式进行转换，因为调用以更改 SD 的某些 Win32 API 需要绝对形式。

# .net - .Net HelloWorld 上的 Scala

> ID：11760184
> 
> 赞同：6
> 
> 时间：2012-08-01T13:20:36.197
> 
> 标签：.net, scala

按照[https://github.com/magarciaEPFL/scaladotnet](https://github.com/magarciaEPFL/scaladotnet)上的 README 为简单的“Hello World”应用程序创建一个 Windows exe：

```
package hello.world

object Main {
  def main(args: Array[String]) {
    println("Hello, World!")
  }
} 
```

使用 README 中的命令构建 .exe：

```
scalacompiler.exe ^
-d C:\test\bin ^
-target:exe ^
-Ystruct-dispatch:no-cache ^
-Xassem-name HelloWorld.exe ^
-Xassem-extdirs C:\scala.net ^
-Xshow-class hello.world.Main ^
C:\test\src\HelloWorld.scala 
```

在使用 64 位 Windows 7 Pro 时，我在尝试运行时收到此错误：

> C:\test\bin>HelloWorld.exe
> 
> 未处理的异常：System.IO.FileNotFoundException：无法加载文件或程序集“scalalib，版本=0.0.0.0，Culture=neutral，PublicKeyToken=null”或其依赖项之一。该系统找不到指定的文件。在主要（字符串 [] 参数）

Scala .Net 编译器目录直接位于路径中，但 HelloWorld.exe 似乎无法找到并加载该目录中的 scalalib.dll。根据下面的评论，将 HelloWorld.exe 直接复制到 C:\scala.net 目录中，然后从那里执行，可以按预期工作。但是，将 .exe 放入另一个目录，并将 C:\scala.net 目录作为 PATH 的一部分，则不会。

怎么了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T14:38:36.020

The .NET Framework does not follow Win32 in using the %PATH% environment variable for locating assemblies.

The short answer is: If it's not in the same folder, then it needs to be in the GAC, or it won't be found.

Also, see [this question](https://stackoverflow.com/questions/2153600/net-does-not-search-in-path-for-my-c-sharp-dll).

# c# - 捕获外部过程输出

> ID：11760186
> 
> 赞同：8
> 
> 时间：2012-08-01T13:20:42.097
> 
> 标签：c#, java, c++, process, stdout

不要将其关闭为重复，因为我对类似问题有一个微妙但重大的变化：

**当我没有创建进程**并且我只知道进程名称时，是否可以在 java 中捕获外部进程（即标准输出）的输出？

我在 Windows 7 上运行。

**编辑：**

如果有办法用其他语言（C#\C++）做到这一点，那么我可以编写一个“CaptureOutput”程序来捕获输出，写入标准输出，然后在我的 java 代码中启动“CaptureOutput”并读取它的标准输入。

丑陋，但可能会奏效。

所以用其他语言回答我也可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T00:03:01.093

首先让我说你的要求打破了进程隔离的所有规则。如果您的进程没有创建要捕获其输出的进程，并且您也无权修改调用进程（命令外壳？服务管理器？您没有说哪个）。那么你唯一的机会，充其量是一个渺茫的机会，就是将一个线程注入进程，而它的所有其他线程都被挂起，改变全局标准输出（和标准错误？）。这只能由对目标进程具有完全访问权限的进程来完成。对正在运行的进程执行此类手术不适合胆小的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T19:54:22.557

您正在尝试做的事情非常危险。意外破坏您尝试进入的进程的内存非常容易。测试，测试，测试。然后再测试一些。祝你好运——我知道我不想这样做。

这篇文章 - [API Hooking](http://www.codeproject.com/Articles/37228/API-Hooking-LoadLibrary) - 解释了如何开始使用你想要的东西（使用 C++）。一旦将代码注入到正在运行的进程中，就会有其他 Windows API 调用来替换 STDOUT（例如[SetStdHandle](http://msdn.microsoft.com/en-us/library/ms686244%28VS.85%29.aspx)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T12:38:55.900

您可以控制流程何时开始吗？如果是这样，您可以启动该过程并将其标准输出通过管道传输到可以读取的文件或您编写的可以将其记录到数据库、事件查看器等中的另一个程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T11:59:06.797

在 Linux 下，查看操作系统的 IPC 机制，例如消息队列、管道、共享内存和套接字。这些机制允许[进程间通信](http://en.wikipedia.org/wiki/Inter-process_communication)。虽然，如果您对程序的输出特别感兴趣，解决方法可能只是让第一个进程将数据输出到磁盘到文件中，然后使用单独的进程读取。这样，您可以为任务使用多种语言。一个简单的例子是让 C++ 将一些数据写入文件，并在给定相同文件的情况下使用 JAVA 读取/使用数据。希望我接近回答，如果有的话。

# .htaccess - mod_rewrite 规则在每个请求上记录“未定义配置变量 ${REQUEST_URI}”

> ID：11760187
> 
> 赞同：10
> 
> 时间：2012-08-01T13:20:43.853
> 
> 标签：.htaccess, mod-rewrite, apache2

我在 Apache/2.4.2-win32 服务器上有以下 .htaccess：

```
# Turn mod_rewrite on
RewriteEngine On

# Allow direct loading of files in the static directory
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^/?static/(.+)$ - [L]

# Send all other requests to controller
RewriteCond ${REQUEST_URI} !^/?(spf/index\.php)?$
RewriteRule .* spf/index.php [L,QSA] 
```

这很好用，完全符合我的要求。对于那些不知道它做了什么的人来说，它会发送所有请求，`spf/index.php`除非它们是针对目录中存在的文件的`static`。

该文件位于虚拟主机的文档根目录中。

通过此 .htaccess 的每个请求都会生成以下错误：

```
[Wed Aug 01 14:14:16.549835 2012] [core:warn] [pid 7100:tid 1076] AH00111: Config variable ${REQUEST_URI} is not defined 
```

这实际上并没有引起问题——每个请求都按预期工作——但它填满了我的错误日志，我不喜欢它。

根据[Google](http://www.google.com/search?q=%22Config+variable+%24%7BREQUEST_URI%7D+is+not+defined%22)的说法，以前没有人遇到过这个错误。就我调试它而言，我真的不知道下一步该去哪里。

有人知道这里发生了什么吗？

*PS我知道这可能是一个更适合SF的问题，如果普遍认为它不属于这里，我会移动它。*

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-01T17:50:13.813

您需要将 替换`$`为`%`：

```
RewriteCond ${REQUEST_URI} !^/?(spf/index\.php)?$ 
```

至

```
RewriteCond %{REQUEST_URI} !^/?(spf/index\.php)?$ 
```

# javascript - 在javascript中，别名命名空间？

> ID：11760191
> 
> 赞同：10
> 
> 时间：2012-08-01T13:21:00.340
> 
> 标签：javascript

在javascript中，我不应该给命名空间起别名吗？

在*[Google JavaScript Style Guide](http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml?showone=Naming#Naming)**的命名*章节中，它说：

```
//Do not alias namespaces.
myapp.main = function() {
  var namespace = some.long.namespace;
  namespace.MyClass.staticHelper(new namespace.MyClass());
}; 
```

但我不能完全理解这个问题。为简洁起见，为什么不给命名空间起别名？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T13:23:56.403

您更改`this`，这可能会破坏别名命名空间中的函数。例子：

```
var foo = {
    bar: function () {
        console.log(this.baz);
    },
    baz: 42
};

foo.bar(); // prints 42
var alias = foo.bar;
alias(); // prints undefined, because `this` is no longer `foo` 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T13:39:38.727

该文档明确表示您*应该*在本地别名长命名空间类型：

> 如果这样做可以提高可读性，请为完全限定类型使用本地别名。本地别名的名称应与类型的最后部分匹配。

但是，除了参考安全之外，我无法想象为什么你不应该给命名空间起别名

别名命名空间的问题是引用不再指向相同的实例。

```
my.long.namespaces.myFunc()
// this refers to the same function, but is a different reference
var myLocalNamespace = my.long.namespace;
namespace.myFunc();
// and you can easily introduce bugs which are hard to find
myLocalNamespace.myFunc = "foobar";
myLocalNamespace.myFunc()  // throws a type error because myFunc is now a string 
```

这个错误很难搜索。

不过，别名有很多好处。JavaScript 中的每个成员查找都需要时间。因此，拥有不断需要查找成员链的代码是在浪费速度。由于本地的成本`var`可以忽略不计，因此强烈建议您在引用长名称空间、函数结果（如`$("something")`）等时使用本地变量。此外，它使您的代码更具可读性。考虑以下：

```
var handleNamespace = function() {
    my.really.long.namespace.foo = "bar";
    my.really.long.namespace.doIt(my.really.long.namespace.foo);
    my.really.long.namespace.member = my.really.long.namespace.somethingElse(my.really.long.namespace.addOne(2));
}; 
```

如您所见，这很快就会变得混乱。摆脱重复代码可以节省处理能力并使您的代码更具可读性。

```
var handleNamespace = function() {
    var namespace = my.really.long.namespace,
        three = namespace.addOne(2);

    namespace.foo = "bar";
    namespace.doIt(namespace.foo);
    namespace.member = namespace.somethingElse(three);
}; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-01T13:40:18.837

我认为这条规则仅适用于命名空间对象：

> 本地别名的名称应与类型的*最后部分*匹配。

你应该使用别名（参见上面的规则一）是你真正想要使用的东西，在这里是`MyClass`构造函数/命名空间。

改进的代码：

```
myapp.main = function() {
  var myClass = some.long.namespace.MyClass;
  myClass.staticHelper(new myClass());
}; 
```

当然，这不适用于您要使用其多个属性的名称空间。如果您的代码也需要`namespace.TheirClass`，那就可以了。

# wix - WIX - 在安装期间选中复选框时删除注册表项

> ID：11760192
> 
> 赞同：1
> 
> 时间：2012-08-01T13:21:03.477
> 
> 标签：wix, custom-action

我有一个注册表项，它已被程序更改为安全的加密密码。但是，在升级此应用程序期间，我们有时想要重置此密码。

安装程序将新密码写入我们在 SOFTWARE 下的文件夹中，但是由于原始密码已移至 VBO，因此无法加密和使用新密码，因为旧密码仍然存在。

基本上我要问的是如何根据 WIX UI 中的复选框值删除注册表项（这将是已移动到 VBO 文件夹的键）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T15:22:06.057

我实际上终于设法解决了它。

我所做的是我创建了一个组件，如果设置了 UI 中的复选框，则删除注册表项。

```
<Component Id="RemoveReg" Guid="{F8ACDA4E-0641-4BCC-860A-DA1B1EB88702}">
   <Condition>RESETPASSWORD</Condition>
   <CreateFolder></CreateFolder>
   <RemoveRegistryKey Id="SQLPWREMOVE" Root="HKLM" Key="SOFTWARE\[Our Software]\VBO" Action="removeOnInstall" />
</Component> 
```

# sql - Eclipse 在写入 '.' 时冻结 在查询中？（BIRT 报表设计器）

> ID：11760199
> 
> 赞同：0
> 
> 时间：2012-08-01T13:21:20.830
> 
> 标签：sql, eclipse, birt

我将 Eclipse 用于 BIRT 报告。当我编辑数据集并处理查询时，每次按“。” 例如要访问 table.field，窗口会冻结 3 分钟。我不知道它在做什么，但这很不方便。有没有办法禁用这种行为？

在 Eclipse JUNO 上使用 BIRT 4.2。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T15:36:24.697

我怀疑您可以通过禁用特定于 BIRT 报表设计器的“内容辅助”的自动激活来禁用此行为。

我没有使用过那种特定的 eclipse 风格，所以无法具体建议禁用哪个 Content Assist。但是，可能值得进入 Eclipse Preferences (Window -> Preferences) 并搜索“Content Assist”。

例如，如果我必须禁用 Java 类中的内容辅助，我可以取消选中“启用自动激活”，如下所示：

![在此处输入图像描述](../Images/55b8b5657c38df2d6977bfe03f44d8a3.png)

# ios - UIButton 操作在一段时间后不起作用（可能在一些垃圾收集之后）

> ID：11760205
> 
> 赞同：0
> 
> 时间：2012-08-01T13:21:33.667
> 
> 标签：ios, objective-c, uibutton, action, programmatically-created

我有一个 UIView，它有大约 60 个调用相同方法的按钮。单击按钮时，我通过这种方法打开不同的图像 - 我使用按钮标签来知道调用了哪个按钮以及要显示哪个图像。把它想象成一个画廊。

由于按钮的绘制很困难，我为此使用了 Interface Builder 并使用该 UIView 创建了一个 XIB。我只是将按钮拖到正确的位置，然后在事件 TouchUpInside 中将它们连接到我的方法。我用它来将视图添加到我的主视图中：

```
NSArray *xibContents = [[NSBundle mainBundle] loadNibNamed:@"Tour" owner:self options:nil];
UIView *tour = [xibContents lastObject];
[self.view addSubview:tour]; 
```

到目前为止一切顺利，乍一看效果很好。不幸的是，当应用程序使用了一段时间时，会出现一些问题。按钮仍然突出显示（所以它们仍然在这里！）但不再调用任何操作。那里只是亮点，但没有行动。

我不知道为什么，但不知何故垃圾收集器似乎破坏了 UIButton 目标。为什么？我该如何解决？

请注意，我没有以编程方式声明按钮。我认为将它们放在 IB 中就足够了。

我也找不到内存警告和 UIButton 目标的破坏之间的联系。内存警告确实出现在我的应用程序中，但大多数时候按钮仍然有效。

但它必须是一个垃圾收集器，因为这个错误完全是随机出现的。无法重现此错误，有时会在单击 5 次后发生，有时会在我的应用程序中花费 10 分钟后发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:10:00.587

当事情出错时重新设定目标是告诉它稍微大声或更坚持地做错误的事情。

你必须找到这个问题的原因。运行 Instruments (Build → Profile)，选择 Allocations 模板并让您的应用启动。运行直到问题发生，然后按左上角的红色录制按钮停止在 Instruments 中录制。

在左侧列表中选择 Allocations 工具，在跨越时间线下方窗口的跳转栏中从 Statistics 更改为 Objects List。现在，每个要分配、保留、释放和释放的对象都有一行。单击小箭头可查看每个对象的历史记录。（严格来说，它是针对每个内存地址的；许多对象可以在应用程序运行时重用相同的内存地址。）您还可以按右上角的任何内容进行过滤，展开右侧边栏以获得有关所选内容的完整堆栈跟踪双击条目以与源代码相关联。

有很多关于 Instruments 的知识；检查文档并搜索网络。但这肯定会告诉你发生了什么，这样你就可以推断为什么会发生或没有发生什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T13:56:39.467

您可以尝试像这样加载您的笔尖：

首先，在您的标头中创建一个 IBOutlet 属性。然后，当您创建 Nib 时，将该 UIView IBOutlet 连接到 Nib 中的顶级视图（所有内容都位于该视图上）。然后在您的实现中，像这样加载它：

```
 [[NSBundle mainBundle] loadNibNamed:@"Tour" owner:self options:nil];
 // self.view if in a view controller
 [self addSubview:self.tourView]; 
```

我的猜测是，可能是指向按钮的指针停止工作，但不是来自垃圾收集，因为这不会发生

并进行调试，您可以尝试以下操作：

```
 for (UIView* view in self.view.subviews)
     if ([view isKindOfClass:[UIButton class]])
     {
               if([self.view respondsToSelector:@selector(myIBAction:)]){
                   NSLog(@"it still sees the method");
                }

         NSLog(@"Button Rect: .2%f, .2%f, .2%f, .2%f", view.frame.origin.x, view.frame.origin.y, view.frame.size.width, view.frame.size.height);
      } 
```

正如我在评论中提到的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T14:08:59.560

这是将选择器添加到所有按钮的最简单方法。

```
for (UIView* view in self.view.subviews)
    if ([view isKindOfClass:[UIButton class]])
    {
         //Add selector
    } 
```

# file - 连接文件 - 包括文件夹中的文件

> ID：11760207
> 
> 赞同：3
> 
> 时间：2012-08-01T13:21:34.630
> 
> 标签：file, ant, command-line, batch-file, concatenation

我目前有这个命令：

```
copy /b *.txt newfile.txt 
```

但我也想包含所有带有文件夹的文件。

我怎样才能做到这一点？是否也可以将其添加到 Apache Ant 中？我也考虑这样做来缩小 JS 文件。

我使用 Windows 并且想要一个命令来运行或批处理文件但有问题。

无论如何也可以删除线条吗？有没有比我目前使用的命令更好的命令？

更新：

```
<target name="concatenate" description="Concatenate all js files">
    <concat destfile="build/application.js">
        <fileset dir="js" includes="*.js" />
    </concat>
</target>
<target name="compress" depends="concatenate" description="Compress application.js to application-min.js">
    <apply executable="java" parallel="false">
        <filelist dir="build" files="application.js" />
        <arg line="-jar" />
        <arg path="C:\yuicompressor-2.4.7\build\yuicompressor-2.4.7.jar" />
        <srcfile />
        <arg line="-o" />
        <mapper type="glob" from="*.js" to="build/*-min.js" />
        <targetfile />
    </apply> 
```

现在我正在使用上面的代码，但不能让它在文件夹中包含文件

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T15:25:13.370

正如[oers](https://stackoverflow.com/users/644450/oers)在评论中指出的那样，Ant 模式用于`**`递归匹配目录。这是 Ant 手册中的相关[模式](http://ant.apache.org/manual/dirtasks.html#Patterns)部分：

> 为了让事情更灵活一点，我们添加了一个额外的功能，它可以匹配多个目录级别。这可用于匹配完整的目录树，或目录树中任何位置的文件。为此，`**`必须将其用作目录的名称。当`**`用作模式中目录的名称时，它匹配零个或多个目录。例如：匹配诸如或但不`/test/**`匹配下的所有文件/目录。`/test/,``/test/x.java,``/test/foo/bar/xyz.html,``/xyz.xml`
> 
> 有一个“速记”：如果模式以`/`or结尾`\`，则`**`附加。例如，`mypackage/test/`被解释为好像是`mypackage/test/**`.

上面的“连接”目标是：

```
<target name="concatenate" description="Concatenate all js files">
  <concat destfile="build/application.js">
    <fileset dir="js" includes="**/*.js" excludes="**/*.min.js" />
  </concat>
</target> 
```

# c# - 如何使用 xaml 代码将光标聚焦在 wpf 中的文本框上？

> ID：11760210
> 
> 赞同：-2
> 
> 时间：2012-08-01T13:21:38.130
> 
> 标签：c#, wpf, xaml

```
<Grid x:Name="LayoutRoot">
    <Button x:Name="btn_A" Content="A" HorizontalAlignment="Left" Height="36" Margin="194,160,0,0" VerticalAlignment="Top" Width="70" Click="Button_Click" />
    <TextBox  x:Name="txt_focus"  HorizontalAlignment="Left" Height="34.5" Margin="177,98,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="97" TextChanged="TextBox_TextChanged" />
</Grid> 
```

下面是c#代码

```
public partial class focus : Window
{
    public focus()
    {
        this.InitializeComponent();         
    }

    private void TextBox_TextChanged(object sender, TextChangedEventArgs e)
    {           
        txt_focus.Focus();
    }

    private void Button_Click(object sender, RoutedEventArgs e)
    {          

        txt_focus.Text += btn_A.Content.ToString();
    }

    private void txt_focus_GotFocus(object sender, RoutedEventArgs e)
    {
        int count = txt_focus.Text.Length;
        txt_focus.CaretIndex = count;
    }
} 
```

上面的代码运行良好。但我需要的是，我必须在 xaml 中实现以下代码

```
private void TextBox_TextChanged(object sender, TextChangedEventArgs e)
{           
    txt_focus.Focus();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:23:51.437

您可以尝试使用此代码

```
<StackPanel Orientation="Vertical"
            FocusManager.FocusedElement="{Binding ElementName=txt_focus}">
    <TextBox x:Name="txt_focus" 
             HorizontalAlignment="Left"
             Height="34.5"
             Margin="167.5,139,0,0"
             TextWrapping="Wrap"
             VerticalAlignment="Top"
             Width="97"
             TextChanged="TextBox_TextChanged" />
</StackPanel> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-01T14:21:54.937

您可以使用 javascript 并在此处使用此代码：

```
if(isset($_REQUEST['sub_con_page'])) 
{ 
//correct 
} 
else  
{ ?> 
<script type="text/javascript"> 
$(document).ready(function() { 
  $("#txt_focus").focus(); 
}); 
</script> 
<?php } ?> 
```

# asp.net-mvc-routing - 在 MVC4 中创建对象后如何获取绝对 URL

> ID：11760216
> 
> 赞同：1
> 
> 时间：2012-08-01T13:22:01.777
> 
> 标签：asp.net-mvc-routing, asp.net-mvc-4

我正在尝试获取刚刚创建的对象的 URL：

```
code = HttpStatusCode.Created;
String location = Url.Route("ApiRoute", new {@id = bp.Id, @controller = "ProfileController" });
Response.AppendHeader("Location", location); 
```

这里的路线

```
routes.MapHttpRoute(
    name: "ApiRoute",
    routeTemplate: "api/{controller}/{id}",
    defaults: new { id = RouteParameter.Optional }
); 
```

但它似乎已经从 MVC3 更改为 MVC4。

有人可以对此有所了解吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:00:47.907

您可以使用[`Url.RouteUrl()`](http://msdn.microsoft.com/en-us/library/dd492238.aspx)接受`protocol`参数的方法。这将返回一个完全限定的 url。

```
// Formatted for readability
code = HttpStatusCode.Created;
String location = Url.Route(
  "ApiRoute", 
  new {@id = bp.Id, @controller = "ProfileController" }, 
  "http"
);
Response.AppendHeader("Location", location); 
```

# silverlight - 如何上传 RadRichTextBox 的内容

> ID：11760219
> 
> 赞同：0
> 
> 时间：2012-08-01T13:22:10.700
> 
> 标签：silverlight

我有 Telerik RadRichTextBox。这里是设计

```
<telerik:RadRichTextBox Name="radRchTxtBoxEdit" HorizontalAlignment="Stretch"  
VerticalAlignment="Top" BorderBrush="Black" BorderThickness="1" Background="White"
LayoutMode="Flow" IsSpellCheckingEnabled="False" TextInput="radRchTxtBoxEdit_TextInput"> 
```

我想要富文本框内容的快照。有没有办法拍摄 RichTextBox 的快照？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:06:29.010

使用 PrintDocument 类，您可以获取（快照/打印）任何 UIElement 或控件。声明 PrintDocument，在 PrintPage Event 中将 RadRichTextBox 分配给 PageVisual。（即 e.PrintPage = radRchTxtBoxEdit）。

这是帮助您入门的链接。

[http://msdn.microsoft.com/en-us/library/system.windows.printing.printdocument%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/system.windows.printing.printdocument%28v=vs.95%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T20:37:15.520

假设您要将文档另存为图像，然后对其进行处理。以下应该工作。

您可以使用以下方法从任何 UIElement 生成位图：

```
WriteableBitmap GetImageForUIElement(UIElement source)
{
    WriteableBitmap bmp = new WriteableBitmap(source, null);
    bmp.Invalidate();

    return bmp;
} 
```

然而，仅仅`feeding your RadRichTextBox`控制这种方法是不够的，因为它`will just create an image of the visible area`。

`To generate the whole page`，你必须深入到`Visual Tree`RadRichTextBox 控件中才能找到[DocumentPagePresenter](http://www.telerik.com/help/silverlight/t_telerik_windows_documents_ui_documentpagepresenter.html)

这将有助于找到正确的子控件：

```
T GetDescendent<T>(DependencyObject root) where T : DependencyObject
{
    int children = VisualTreeHelper.GetChildrenCount(root);
    for (int i = 0; i < children; i++)
    {
        var element = VisualTreeHelper.GetChild(root, i);
        if (element is T)
        {
            return (T)element;

        }
        else
        {
            element = GetDescendent<T>(element);
            if (element != null)
            {
                return (T)element;
            }
        }
    }

    return null;
} 
```

WritableBitmap 可以直接用作 Image 控件的 Source，但是没有本地方法可以将此对象转换为文件系统对象，但是有一些选项。

1.  您可以将原始像素数据发送到 Web 服务并在那里进行保存。(WriteableBitmap.Pixels)
2.  查看[此答案](https://stackoverflow.com/questions/5949545/save-writableimage-to-file-in-silverlight)以了解保存为其他图像格式的方法

...

为了获得完整的答案：这里有一些 XAML 可供查看[（直接来自 Telerik）](http://www.telerik.com/help/silverlight/radrichtextbox-features-working-with-radrichtextbox.html)

```
<telerik:RadRichTextBox x:Name="MyRichTextBox" >
    <telerik:RadDocument LayoutMode="Paged">
        <telerik:Section PageMargin="10, 10, 10, 10">
            <telerik:Paragraph>
                <telerik:ImageInline Width="236" Height="50" UriSource="/Silverlight.Help.RadRichTextBoxSamples;component/Demos/Images/RadRichTextBox.png" />
            </telerik:Paragraph>
            <telerik:Paragraph TextAlignment="Center">
                <telerik:Span Text="Thank you for choosing Telerik" />
                <telerik:Span FontWeight="Bold" Text=" RadRichTextBox!" />
            </telerik:Paragraph>
            <telerik:Paragraph>
                <telerik:Span FontWeight="Bold" Text="RadRichTextBox" />
                <telerik:Span Text=" is a control that is able to display and edit rich-text content including formatted text arranged in pages, paragraphs, spans (runs) etc." />
            </telerik:Paragraph>
            <telerik:Table LayoutMode="AutoFit">
                <telerik:TableRow>
                    <telerik:TableCell>
                        <telerik:Paragraph>
                            <telerik:Span Text="Cell 1" />
                        </telerik:Paragraph>
                    </telerik:TableCell>
                    <telerik:TableCell>
                        <telerik:Paragraph>
                            <telerik:Span Text="Cell 2" />
                        </telerik:Paragraph>
                    </telerik:TableCell>
                </telerik:TableRow>
                <telerik:TableRow>
                    <telerik:TableCell ColumnSpan="2">
                        <telerik:Paragraph>
                            <telerik:Span Text="Cell 3" />
                        </telerik:Paragraph>
                    </telerik:TableCell>
                </telerik:TableRow>
            </telerik:Table>
        </telerik:Section>
    </telerik:RadDocument>

</telerik:RadRichTextBox>
<Image x:Name="MyRichTextImage" />
<Button HorizontalAlignment="Right" VerticalAlignment="Bottom" Content="Click" Click="Button_Click" /> 
```

这是按钮点击处理程序

```
private void Button_Click(object sender, RoutedEventArgs e)
{
    DocumentPagePresenter doc = GetDescendent<DocumentPagePresenter>(MyRichTextBox);

    if (doc != null)
    {
        MyRichTextImage.Source = GetImageForUIElement(doc);
    }
} 
```

# android - Android：通过蓝牙或 wifi 打印

> ID：11760220
> 
> 赞同：0
> 
> 时间：2012-08-01T13:22:12.520
> 
> 标签：android, printing, bluetooth, wifi

我已经为需要将文件（主要是打印账单收据）打印到蓝牙打印机的手机和平板电脑开发了 android 应用程序。

对于这项任务，我们需要一台可以通过蓝牙或 WiFi 连接到安卓手机的便携式打印机（手持式，这很重要）。

是否有任何 API 或 SDK 可用于将 Android 设备连接到打印机？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:45:20.763

据我所知，没有通用的解决方案。每个供应商都有自己的一组驱动程序库。例如，我对这台特定的打印机非常幸运：

[http://www.citizen-systems.com/Product.aspx?id=123#1](http://www.citizen-systems.com/Product.aspx?id=123#1)

# java - 避免 JasperReports 中不需要的分页符

> ID：11760228
> 
> 赞同：2
> 
> 时间：2012-08-01T13:22:38.190
> 
> 标签：java, jasper-reports

在使用 jasper api 打印结果集时，我遇到了一个问题。

**描述 ：**

**报告格式：**

```
GroupA(GroupHeader)

SubGroupName(SubGroup Header)

....Data(Detail Section)..... 
```

**健康）状况 ：**

如果我的子组标题或 GroupHeader 出现在页面底部，我想插入一个分页符，以便标题部分和数据都出现在下一页上。

例子 ：

**实际输出：**

```
GroupA(GroupHeader)

SubGroupName(SubGroup Header)

<unwanted Pagebreak>
....Data(Detail Section)..... 
```

**预期输出：**

我想避免不需要的 Pagebreak.so 我的输出看起来像，

```
GroupA(GroupHeader)

SubGroupName(SubGroup Header)

....Data(Detail Section)..... 
```

我的 JRXML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Account Sub Sub Group Report" language="groovy" pageWidth="842" pageHeight="595" orientation="Landscape" whenNoDataType="NoDataSection" columnWidth="802" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" whenResourceMissingType="Empty">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <parameter name="P_Company" class="java.lang.String" isForPrompting="false"/>
    <parameter name="P_UserName" class="java.lang.String" isForPrompting="false"/>
    <parameter name="P_Criteria" class="java.lang.Object" isForPrompting="false">
        <defaultValueExpression><![CDATA["' '"]]></defaultValueExpression>
    </parameter>
    <parameter name="P_Criteria_Code" class="java.lang.String">
        <parameterDescription><![CDATA[]]></parameterDescription>
        <defaultValueExpression><![CDATA["' '"]]></defaultValueExpression>
    </parameter>
    <parameter name="P_Criteria_Name" class="java.lang.String">
        <parameterDescription><![CDATA[]]></parameterDescription>
        <defaultValueExpression><![CDATA["' '"]]></defaultValueExpression>
    </parameter>
    <parameter name="P_Criteria_Suid" class="java.lang.Integer">
        <parameterDescription><![CDATA[]]></parameterDescription>
        <defaultValueExpression><![CDATA[-1]]></defaultValueExpression>
    </parameter>
    <parameter name="P_Criteria_String" class="java.lang.String" isForPrompting="false"/>
    <parameter name="P_ReportName" class="java.lang.String" isForPrompting="false"/>
    <parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
        <defaultValueExpression><![CDATA["D:\\Ankitha\\DIS\\ws\\dis-services\\src\\main\\resources\\report\\"]]></defaultValueExpression>
    </parameter>
    <queryString>
        <![----Query String----]>
    </queryString>
    <field name="ACGR_NAME" class="java.lang.String"/>
    <field name="ACSG_NAME" class="java.lang.String"/>
    <field name="ACSG_NATURE" class="java.lang.String"/>
    <field name="ACTP_NAME" class="java.lang.String"/>
    <field name="ASSG_CODE" class="java.lang.String"/>
    <field name="ASSG_NAME" class="java.lang.String"/>
    <field name="ASSG_ISLIMITAPPLICABLE" class="java.lang.String"/>
    <field name="ASSG_LIMITFROM" class="java.math.BigDecimal"/>
    <field name="ASSG_LIMITTO" class="java.math.BigDecimal"/>
    <field name="ASSG_ISBUDGETAPPLICABLE" class="java.lang.String"/>
    <field name="ASSG_BUDGETAMOUNT" class="java.math.BigDecimal"/>
    <field name="ASSG_SEQUENCE" class="java.math.BigDecimal"/>
    <variable name="ReportTitle" class="java.lang.String">
        <initialValueExpression><![CDATA[$R{label.report.assg.reporttitle}]]></initialValueExpression>
    </variable>
    <group name="AccountGroupName">
        <groupExpression><![CDATA[$F{ACGR_NAME}]]></groupExpression>
        <groupHeader>
            <band height="17">
                <line>
                    <reportElement isPrintRepeatedValues="false" x="0" y="0" width="802" height="1" printWhenGroupChanges="AccountGroupName"/>
                    <graphicElement>
                        <pen lineWidth="0.01"/>
                    </graphicElement>
                </line>
                <textField isBlankWhenNull="true">
                    <reportElement stretchType="RelativeToBandHeight" x="0" y="1" width="802" height="16" forecolor="#8E6531"/>
                    <textElement verticalAlignment="Middle">
                        <font fontName="Verdana" size="11" isBold="true" isUnderline="true"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$R{label.report.assg.accountGroupName}+" "+$F{ACGR_NAME}]]></textFieldExpression>
                </textField>
            </band>
        </groupHeader>
    </group>
    <group name="AccountSubGroupName">
        <groupExpression><![CDATA[$F{ACSG_NAME}]]></groupExpression>
        <groupHeader>
            <band height="15">
                <textField isBlankWhenNull="true">
                    <reportElement stretchType="RelativeToBandHeight" x="0" y="0" width="802" height="15" forecolor="#404D71"/>
                    <box leftPadding="20"/>
                    <textElement verticalAlignment="Middle">
                        <font fontName="Verdana" size="10" isBold="true"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$R{label.report.assg.accountSubGroupName}+" "+$F{ACSG_NAME}]]></textFieldExpression>
                </textField>
            </band>
        </groupHeader>
    </group>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band height="51" splitType="Stretch">
            <subreport>
                <reportElement stretchType="RelativeToBandHeight" x="1" y="0" width="801" height="51"/>
                <subreportParameter name="SUBREPORT_DIR">
                    <subreportParameterExpression><![CDATA[$P{SUBREPORT_DIR}]]></subreportParameterExpression>
                </subreportParameter>
                <subreportParameter name="P_Criteria_String">
                    <subreportParameterExpression><![CDATA[$P{P_Criteria_String}]]></subreportParameterExpression>
                </subreportParameter>
                <subreportParameter name="P_Criteria_Code">
                    <subreportParameterExpression><![CDATA[$P{P_Criteria_Code}]]></subreportParameterExpression>
                </subreportParameter>
                <subreportParameter name="P_UserName">
                    <subreportParameterExpression><![CDATA[$P{P_UserName}]]></subreportParameterExpression>
                </subreportParameter>
                <subreportParameter name="P_Company">
                    <subreportParameterExpression><![CDATA[$P{P_Company}]]></subreportParameterExpression>
                </subreportParameter>
                <subreportParameter name="P_ReportName">
                    <subreportParameterExpression><![CDATA[$V{ReportTitle}]]></subreportParameterExpression>
                </subreportParameter>
                <subreportParameter name="P_Criteria">
                    <subreportParameterExpression><![CDATA[$P{P_Criteria}]]></subreportParameterExpression>
                </subreportParameter>
                <subreportParameter name="P_Criteria_Suid">
                    <subreportParameterExpression><![CDATA[$P{P_Criteria_Suid}]]></subreportParameterExpression>
                </subreportParameter>
                <subreportParameter name="P_Criteria_Name">
                    <subreportParameterExpression><![CDATA[$P{P_Criteria_Name}]]></subreportParameterExpression>
                </subreportParameter>
                <subreportParameter name="REPORT_RESOURCE_BUNDLE">
                    <subreportParameterExpression><![CDATA[$P{REPORT_RESOURCE_BUNDLE}]]></subreportParameterExpression>
                </subreportParameter>
                <connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
                <subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "Header.jasper"]]></subreportExpression>
            </subreport>
        </band>
    </title>
    <columnHeader>
        <band height="33">
            <frame>
                <reportElement stretchType="RelativeToBandHeight" x="0" y="0" width="802" height="33"/>
                <box>
                    <pen lineWidth="0.01" lineColor="#333333"/>
                    <topPen lineWidth="0.01" lineColor="#333333"/>
                    <leftPen lineWidth="0.01" lineColor="#333333"/>
                    <bottomPen lineWidth="0.01" lineColor="#333333"/>
                    <rightPen lineWidth="0.01" lineColor="#333333"/>
                </box>
                <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                    <reportElement stretchType="RelativeToBandHeight" isPrintRepeatedValues="false" mode="Opaque" x="0" y="0" width="214" height="33" isRemoveLineWhenBlank="true" isPrintInFirstWholeBand="true" backcolor="#CCE6F5"/>
                    <box leftPadding="5"/>
                    <textElement verticalAlignment="Middle">
                        <font fontName="Verdana" size="9" isBold="true"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$R{label.report.assg.name}]]></textFieldExpression>
                </textField>
                <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                    <reportElement stretchType="RelativeToBandHeight" isPrintRepeatedValues="false" mode="Opaque" x="214" y="0" width="79" height="33" isRemoveLineWhenBlank="true" isPrintInFirstWholeBand="true" backcolor="#CCE6F5"/>
                    <box leftPadding="5"/>
                    <textElement verticalAlignment="Middle">
                        <font fontName="Verdana" size="9" isBold="true"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$R{label.report.assg.code}]]></textFieldExpression>
                </textField>
                <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                    <reportElement stretchType="RelativeToBandHeight" isPrintRepeatedValues="false" mode="Opaque" x="293" y="0" width="59" height="33" isRemoveLineWhenBlank="true" isPrintInFirstWholeBand="true" backcolor="#CCE6F5"/>
                    <box leftPadding="5"/>
                    <textElement verticalAlignment="Middle">
                        <font fontName="Verdana" size="9" isBold="true"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$R{label.report.assg.accounttype}]]></textFieldExpression>
                </textField>
                <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                    <reportElement stretchType="RelativeToBandHeight" isPrintRepeatedValues="false" mode="Opaque" x="652" y="0" width="67" height="33" isRemoveLineWhenBlank="true" isPrintInFirstWholeBand="true" backcolor="#CCE6F5"/>
                    <box rightPadding="5"/>
                    <textElement textAlignment="Right" verticalAlignment="Top">
                        <font fontName="Verdana" size="9" isBold="true"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$R{label.report.assg.budget}]]></textFieldExpression>
                </textField>
                <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                    <reportElement stretchType="RelativeToBandHeight" mode="Opaque" x="480" y="17" width="62" height="16" backcolor="#CCE6F5"/>
                    <box rightPadding="5"/>
                    <textElement textAlignment="Right" verticalAlignment="Middle">
                        <font fontName="Verdana" size="9" isBold="true"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$R{label.report.assg.inhouselimitto}]]></textFieldExpression>
                </textField>
                <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                    <reportElement stretchType="RelativeToBandHeight" isPrintRepeatedValues="false" mode="Opaque" x="352" y="17" width="65" height="16" isRemoveLineWhenBlank="true" isPrintInFirstWholeBand="true" backcolor="#CCE6F5"/>
                    <textElement textAlignment="Center" verticalAlignment="Middle">
                        <font fontName="Verdana" size="9" isBold="true"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$R{label.report.assg.applicable}]]></textFieldExpression>
                </textField>
                <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                    <reportElement stretchType="RelativeToBandHeight" isPrintRepeatedValues="false" mode="Opaque" x="542" y="17" width="47" height="16" isRemoveLineWhenBlank="true" isPrintInFirstWholeBand="true" backcolor="#CCE6F5"/>
                    <box leftPadding="5"/>
                    <textElement textAlignment="Center" verticalAlignment="Middle">
                        <font fontName="Verdana" size="9" isBold="true"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$R{label.report.assg.sequence}]]></textFieldExpression>
                </textField>
                <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                    <reportElement stretchType="RelativeToBandHeight" isPrintRepeatedValues="false" mode="Opaque" x="589" y="17" width="63" height="16" isRemoveLineWhenBlank="true" isPrintInFirstWholeBand="true" backcolor="#CCE6F5"/>
                    <textElement textAlignment="Center" verticalAlignment="Top">
                        <font fontName="Verdana" size="9" isBold="true"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$R{label.report.assg.applicable}]]></textFieldExpression>
                </textField>
                <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                    <reportElement stretchType="RelativeToBandHeight" isPrintRepeatedValues="false" mode="Opaque" x="719" y="17" width="83" height="16" isRemoveLineWhenBlank="true" isPrintInFirstWholeBand="true" backcolor="#CCE6F5"/>
                    <textElement textAlignment="Center" verticalAlignment="Middle">
                        <font fontName="Verdana" size="9" isBold="true"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$R{label.report.assg.nature}]]></textFieldExpression>
                </textField>
                <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                    <reportElement stretchType="RelativeToBandHeight" mode="Opaque" x="417" y="17" width="63" height="16" backcolor="#CCE6F5"/>
                    <box rightPadding="5"/>
                    <textElement textAlignment="Right" verticalAlignment="Middle">
                        <font fontName="Verdana" size="9" isBold="true"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$R{label.report.assg.inhouselimitfrom}]]></textFieldExpression>
                </textField>
                <textField isStretchWithOverflow="true">
                    <reportElement stretchType="RelativeToBandHeight" mode="Opaque" x="352" y="0" width="65" height="17" backcolor="#CCE6F5"/>
                    <textElement textAlignment="Center" verticalAlignment="Top">
                        <font fontName="Verdana" size="9" isBold="true"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$R{label.report.assg.limit}]]></textFieldExpression>
                </textField>
                <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                    <reportElement stretchType="RelativeToBandHeight" mode="Opaque" x="417" y="0" width="125" height="17" backcolor="#CCE6F5"/>
                    <box rightPadding="0"/>
                    <textElement textAlignment="Center" verticalAlignment="Top">
                        <font fontName="Verdana" size="9" isBold="true"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$R{label.report.assg.inhouselimit}]]></textFieldExpression>
                </textField>
                <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                    <reportElement stretchType="RelativeToBandHeight" mode="Opaque" x="542" y="0" width="47" height="17" backcolor="#CCE6F5"/>
                    <box leftPadding="5"/>
                    <textElement textAlignment="Center" verticalAlignment="Top">
                        <font fontName="Verdana" size="9" isBold="true"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$R{label.report.assg.reporting}]]></textFieldExpression>
                </textField>
                <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                    <reportElement stretchType="RelativeToBandHeight" mode="Opaque" x="589" y="0" width="63" height="17" backcolor="#CCE6F5"/>
                    <textElement textAlignment="Center" verticalAlignment="Top">
                        <font fontName="Verdana" size="9" isBold="true"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$R{label.report.assg.budgetappl}]]></textFieldExpression>
                </textField>
                <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                    <reportElement stretchType="RelativeToBandHeight" mode="Opaque" x="719" y="0" width="83" height="17" backcolor="#CCE6F5"/>
                    <textElement textAlignment="Center" verticalAlignment="Middle">
                        <font fontName="Verdana" size="9" isBold="true"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$R{label.report.assg.account}]]></textFieldExpression>
                </textField>
            </frame>
        </band>
    </columnHeader>
    <detail>
        <band height="19">
            <rectangle>
                <reportElement stretchType="RelativeToBandHeight" x="1" y="0" width="800" height="18" backcolor="#F2F2F2">
                    <printWhenExpression><![CDATA[new Boolean($V{PAGE_COUNT}.intValue() % 2 == 0)]]></printWhenExpression>
                </reportElement>
                <graphicElement>
                    <pen lineWidth="0.0"/>
                </graphicElement>
            </rectangle>
            <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                <reportElement stretchType="RelativeToBandHeight" x="653" y="0" width="67" height="18" isRemoveLineWhenBlank="true"/>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font fontName="Verdana" size="9"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{ASSG_BUDGETAMOUNT}]]></textFieldExpression>
            </textField>
            <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                <reportElement stretchType="RelativeToBandHeight" x="543" y="0" width="47" height="18" isRemoveLineWhenBlank="true"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font fontName="Verdana" size="9"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{ASSG_SEQUENCE}]]></textFieldExpression>
            </textField>
            <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                <reportElement stretchType="RelativeToBandHeight" x="481" y="0" width="62" height="18" isRemoveLineWhenBlank="true"/>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font fontName="Verdana" size="9"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{ASSG_LIMITTO}]]></textFieldExpression>
            </textField>
            <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                <reportElement stretchType="RelativeToBandHeight" x="353" y="0" width="66" height="18" isRemoveLineWhenBlank="true"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font fontName="Verdana" size="9"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{ASSG_ISLIMITAPPLICABLE}]]></textFieldExpression>
            </textField>
            <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                <reportElement stretchType="RelativeToBandHeight" x="419" y="0" width="61" height="18" isRemoveLineWhenBlank="true"/>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font fontName="Verdana" size="9"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{ASSG_LIMITFROM}]]></textFieldExpression>
            </textField>
            <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                <reportElement stretchType="RelativeToBandHeight" mode="Transparent" x="1" y="0" width="214" height="18" isRemoveLineWhenBlank="true"/>
                <box leftPadding="5"/>
                <textElement verticalAlignment="Middle">
                    <font fontName="Verdana" size="9"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{ASSG_NAME}]]></textFieldExpression>
            </textField>
            <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                <reportElement stretchType="RelativeToBandHeight" x="590" y="0" width="63" height="18" isRemoveLineWhenBlank="true"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font fontName="Verdana" size="9"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{ASSG_ISBUDGETAPPLICABLE}]]></textFieldExpression>
            </textField>
            <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                <reportElement stretchType="RelativeToBandHeight" x="215" y="0" width="79" height="18" isRemoveLineWhenBlank="true"/>
                <box leftPadding="5"/>
                <textElement verticalAlignment="Middle">
                    <font fontName="Verdana" size="9"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{ASSG_CODE}]]></textFieldExpression>
            </textField>
            <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                <reportElement stretchType="RelativeToBandHeight" x="294" y="0" width="59" height="18" isRemoveLineWhenBlank="true"/>
                <box leftPadding="5"/>
                <textElement verticalAlignment="Middle">
                    <font fontName="Verdana" size="9"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{ACTP_NAME}]]></textFieldExpression>
            </textField>
            <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                <reportElement stretchType="RelativeToBandHeight" x="720" y="0" width="82" height="18" isRemoveLineWhenBlank="true"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font fontName="Verdana" size="9"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{ACSG_NATURE}]]></textFieldExpression>
            </textField>
            <break>
                <reportElement x="0" y="18" width="800" height="1">
                    <printWhenExpression><![CDATA[new Boolean($V{AccountSubGroupName_COUNT}.intValue()<1)]]></printWhenExpression>
                </reportElement>
            </break>
        </band>
    </detail>
    <pageFooter>
        <band height="20">
            <textField isStretchWithOverflow="true">
                <reportElement stretchType="RelativeToBandHeight" x="652" y="1" width="113" height="19"/>
                <textElement textAlignment="Right">
                    <font fontName="Verdana"/>
                </textElement>
                <textFieldExpression><![CDATA["Page "+$V{PAGE_NUMBER}+" of"]]></textFieldExpression>
            </textField>
            <textField isStretchWithOverflow="true" evaluationTime="Report">
                <reportElement stretchType="RelativeToBandHeight" x="765" y="1" width="37" height="19"/>
                <textElement>
                    <font fontName="Verdana"/>
                </textElement>
                <textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
            </textField>
        </band>
    </pageFooter>
</jasperReport> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T19:54:08.877

对于组，我相信您可以`Keep Together`在组和/或子组上设置属性来处理此问题。

**在一起说明：**

> 防止组在两个单独的页面/列上拆分的标志，但仅在第一次中断尝试时

# ruby-on-rails - 什么后台作业处理使用最少的内存

> ID：11760229
> 
> 赞同：2
> 
> 时间：2012-08-01T13:22:39.767
> 
> 标签：ruby-on-rails, background-process

我目前正在使用delayed_job 处理对远程http 服务的一些外部调用，以通过gmaps4rails 获取坐标。我的内存用完了，想要比delayed_job 更轻的东西。

有谁知道 queue_classic 是否使用更少的内存？我目前正在使用 PostgreSQL 9.1。 [https://github.com/ryandotsmith/queue_classic](https://github.com/ryandotsmith/queue_classic)

还有其他占地面积更小的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:24:35.927

Sidekick 应该是轻量级的：

[http://mperham.github.com/sidekiq/](http://mperham.github.com/sidekiq/)

试一试 ：）

# c# - ReSharper 单元测试运行器给外部类提供了不确定性

> ID：11760230
> 
> 赞同：14
> 
> 时间：2012-08-01T13:22:47.283
> 
> 标签：c#, unit-testing, nunit, resharper

我有使用 nUnit 编写的单元测试，测试的结构与[Phil Haack 的帖子类似](http://haacked.com/archive/2012/01/02/structuring-unit-tests.aspx)

```
namespace MyNamespace
{
    [TestFixture]
    public class ClassToTest
    {
        [TestFixture]
        public class MethodToTest
        {
            [Test]
            public void ThrowsArgumentNullException_OnNullIndex()
            {
                ...
            }

            .. more tests for the method ..
        }

        [TestFixture]
        public class AnotherMethodToTest
        {
            [Test]
            public void ThrowsArgumentNullException_OnNullIndex()
            {
                ...
            }

            .. more tests for the method ..
        }
    }
} 
```

我的问题是我对用于分组单元测试的外部类*没有定论。*我已经尝试过`[TestFixture]`在外部和/或内部类上使用和不使用，但它总是让我不确定。

我认为正确的行为应该是显示内部类测试中的单元测试状态。有任何想法吗？

![外部班级出现不确定性](../Images/1e092fc418d84e8ebbfd0ed4ead00de7.png)

**更新**

一个**丑陋**的修复似乎是为外部类创建一个虚拟测试，然后`Ignore`在其上放置属性。

```
[Test, Ignore]
public void DummyTest()
{
    Assert.IsTrue(true);
} 
```

**更新 2**

Channs & Wayne 是正确的，外部类只是用于分组，所以从类更改为命名空间是最好的解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T13:32:06.277

您的外部类仅对相关方法进行分组，建议将其替换为命名空间。

```
namespace MyNamespace.ClassToTest
{
  ...
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-01T13:31:19.120

您可能有一个没有 [Test] 的 [TestFixture] - 也许外部类没有任何自己的测试？在这种情况下，为什么不直接使用命名空间呢？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T13:31:25.443

只是猜测，类上的属性会导致您的类被作为测试类处理，但是在类中没有测试它本身会导致我们的不确定：

```
[TestFixture]     
public class ClassToTest 
```

# android - Intent putExtra() 导致空指针异常

> ID：11760235
> 
> 赞同：-1
> 
> 时间：2012-08-01T13:23:03.277
> 
> 标签：android

嗨我正在尝试运行简单的活动我的点击按钮看起来像这样

```
public void onClick(View view){
     Intent intent = new Intent(this,SecondActivity.class);
     intent.putExtra("TextToGive", "Hello second activity");
     startActivityForResult(intent, 1);
} 
```

当我单击按钮时，我得到 NullPointerException no activity found.If 我删除了 intent.putExtra("TextToGive", "Hello second activity"); 它有效，有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:31:57.310

这可能是工作......

```
Intent intent = new Intent(YourActivity.this,SecondActivity.class); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:44:12.317

您在第二个活动中有 getExtras 推荐吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T14:03:10.610

第一：类

```
Intent intent = new Intent(this,SecondActivity.class);
intent.putExtra("TextToGive", "Hello second activity");
startActivity(intent); 
```

第二：类

```
String data = getIntent().getStringExtra("TextToGive"); //Place breakpoint here notice that it contains information. 
```

侧节点：

> 确保您已将您的活动放在 android 清单文件中，并且在谷歌上搜索诸如无法进入下一个活动之类的问题可能会给您一个比仅仅询问更快的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T13:24:56.547

将**SecondActivity**添加到您的**AndroidManifest.xml**

# iphone - 逐步为iOS编写自己的电话间隙插件

> ID：11760236
> 
> 赞同：2
> 
> 时间：2012-08-01T13:23:06.490
> 
> 标签：iphone, cordova, ios4, phonegap-plugins

为这个设置挠头的一天。我觉得编写插件代码比设置要容易得多。我按照以下步骤为 ios 编写了一个简单的电话间隙插件。但不幸的是，无法找到我错过的地方。请打印出代码中缺失/混淆/错误的部分。

**PhoneGap 设置：**

1) 关闭 Xcode。[我有 Xcode 4.3.3] 2) 下载了最新的手机差距。版本 2.0 3) 在 phonegap-phonegap-2dbbdab-1 目录下，安装 Cordova-2.0.0.pkg

4）运行以下代码：

$ ./path/to/cordova-ios/bin/create /path/to/my_new_cordova_project com.example.cordova_project_name CordovaProjectName

*遵循*： [http ://docs.phonegap.com/en/2.0.0/guide_command-line_index.md.html#Command-Line%20Usage](http://docs.phonegap.com/en/2.0.0/guide_command-line_index.md.html#Command-Line%20Usage)

5）打开Xcode项目。

6) 在 www 目录下创建 HelloPlugin.js 文件，其中包含..

```
 var HelloPlugin = {

callNativeFunction: function (success, fail, resultType) {
    return Cordova.exec(success, fail, "com.tricedesigns.HelloPlugin", "nativeFunction", [resultType]);
}
}; 
```

7) 在插件目录中

**HelloPlugin.h**包含：

```
#import "CDVPlugin.h"

@interface HelloPlugin : CDVPlugin {
      NSString* callbackID;
 }

 @property (nonatomic, copy) NSString* callbackID;

- (void) nativeFunction:(NSMutableArray*)arguments withDict:(NSMutableDictionary*)options;

@end 
```

HelloPlugin.m 包含：

```
#import "HelloPlugin.h"

@implementation HelloPlugin

 @synthesize callbackID;    

- (void) nativeFunction:(NSMutableArray*)arguments withDict:(NSMutableDictionary*)options {

    //get the callback id
    NSString *callbackId = [arguments pop];

    NSLog(@"Hello, this i s a native function called from PhoneGap/Cordova!");

    NSString *resultType = [arguments objectAtIndex:0]; 
    CDVPluginResult *result;

    if ( [resultType isEqualToString:@"success"] ) {
        result = [CDVPluginResult resultWithStatus:CDVCommandStatus_OK messageAsString: @"Success :)"];
        [self writeJavascript:[result toSuccessCallbackString:callbackId]];
    }
    else {
        result = [CDVPluginResult resultWithStatus:CDVCommandStatus_ERROR messageAsString: @"Error :("];
        [self writeJavascript:[result toErrorCallbackString:callbackId]];
    }
}

@end 
```

**在 Cordova.plist 中：** 已添加 com.tricedesigns.HelloPlugin、HelloPlugin 作为键/值，类型为字符串。

**在 index.html 中：**

```
 <script type="text/javascript" charset="utf-8" src="HelloPlugin.js"></script>

     <script type="text/javascript">
     function callNativePlugin( returnSuccess ) {
            alert("Inside callNativePlugin");
            HelloPlugin.callNativeFunction( nativePluginResultHandler, nativePluginErrorHandler, returnSuccess );
            alert("End of Hello PLugin");

        }

        function nativePluginResultHandler (result) {
            alert("SUCCESS: \r\n"+result );
        }

        function nativePluginErrorHandler (error) {
            alert("ERROR: \r\n"+error );
        }

</script> 
```

现在，当我单击按钮时，不会调用本机函数。如何前进？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-04T07:17:58.223

我编写了一个[教程](http://codrspace.com/vote539/writing-a-custom-camera-plugin-for-phonegap/)，其中包含有关如何为 iOS 编写 PhoneGap 插件的分步说明。它可能对你有帮助。祝你好运！

# iphone - 更新核心数据中的值

> ID：11760240
> 
> 赞同：0
> 
> 时间：2012-08-01T13:23:19.920
> 
> 标签：iphone, objective-c, ios, uitableview, core-data

我有一个费用清单及其价格存储在 view1 的核心数据中。我在 view2 中检索这些值并在 tableView 中显示它们。

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
//Displayin the values in a Cell.

NSManagedObject *records = nil;
        records = [self.listOfExpenses objectAtIndex:indexPath.row];
        self.firstLabel.text = [records valueForKey:@"category"];
        NSString *dateString = [NSString stringWithFormat:@"%@",[records valueForKey:@"date"]];
        NSString *dateWithInitialFormat = dateString;
        NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
        [dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss Z"];
        NSDate *date = [dateFormatter dateFromString:dateWithInitialFormat];
        [dateFormatter setDateStyle:NSDateFormatterMediumStyle];
        NSString *dateWithNewFormat = [dateFormatter stringFromDate:date];
        self.secondLabel.text = dateWithNewFormat;
        [dateFormatter release];
        NSString *amountString = [NSString stringWithFormat:@"%@",[records valueForKey:@"amount"]];
        self.thirdLabel.text = amountString;
} 
```

如果我单击 tableView 中的一行，它应该导航到 view1，我应该能够编辑核心数据中的值和更新。谁能告诉我如何实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:37:20.450

首先，我建议您使用[NSFetchedResultsController](http://developer.apple.com/library/ios/#DOCUMENTATION/CoreData/Reference/NSFetchedResultsController_Class/Reference/Reference.html)从核心数据填充表格视图（反之亦然）。其次，当您单击 tableview 中的单个行时，像下面一样使用 tableview 的委托（为此，在应用程序委托中，我声明了一个名为 selectedMesageIndex 的 int 变量）

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
   //YourAppDelegate is the name of your app delegate class
   YourAppDelegate* sharedDa= (YourAppDelegate *)([[UIApplication sharedApplication]delegate]);

   sharedData.selectedMesageIndex = indexPath.row;

} 
```

当您回到第一个视图控制器时，从核心数据中获取数据并获取所选索引路径的数据参数（再次通过 `sharedData.selectedMesageIndex`）..

# asp.net - 具有通用登录（身份验证）的多个 ASP.NET Web 应用程序

> ID：11760241
> 
> 赞同：1
> 
> 时间：2012-08-01T13:23:20.330
> 
> 标签：asp.net, .net, iis-7

我创建了 2 个单独的 Asp.Net 应用程序。
应用 1：管理员
应用 2：报告

我们已经在 IIS 7.0 中托管了**管理应用程序。**现在我需要在**管理**应用程序中提供一个链接以链接到**报告**应用程序，在该链接中我不应该再次登录到报告应用程序。

现在，我在**Admin** App下为 IIS中的**Reports创建了虚拟目录。**所以我的问题是如何为这两个应用程序提供一个通用的身份验证。？？**注意**：我正在使用表单身份验证

 ****提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T13:44:37.487

你需要在配置中做三件事，并且每个应用程序必须匹配：

*   `Application`在成员资格和角色提供者中具有相同的属性并使用相同的数据库：和的子级的子级`applicationName`属性。这意味着将共享身份验证和授权数据。`add``provider`[`membership`](http://msdn.microsoft.com/en-gb/library/whae3t94.aspx)[`roleManager`](http://msdn.microsoft.com/en-gb/library/ms164662.aspx)

*   具有相同的密钥来加密和验证身份验证 cookie（在[`machineKey`](http://msdn.microsoft.com/en-gb/library/w8h3skw9.aspx)元素上）。（这也意味着登录将在应用程序池重新启动后继续存在，因为不会在每次应用程序启动时生成新密钥。）

*   让两个应用程序在元素上使用相同的`name`属性，以便使用相同的 cookie。[`forms`](http://msdn.microsoft.com/en-gb/library/1d3t3c61.aspx)

[找到rigth属性后更新第三点。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T13:49:40.340

您可能需要一个应用程序而不是管理应用程序下的虚拟目录。

您需要在 web.config 中设置 enableCrossAppRedirects="true"

两个应用程序应该共享一个共同的 machineKey。这是一个生成 machineKey 的工具：http: [//aspnetresources.com/tools/machineKey](http://aspnetresources.com/tools/machineKey)

示例 web.config 条目：

```
<authentication mode="Forms">
  <forms name=".ASPNETAUTH"
      enableCrossAppRedirects="true"
      loginUrl="Login.aspx"
      protection="All"
      path="/"
      timeout="60" />
</authentication>

<machineKey validationKey='F1D92DF9B41E5D94E79946A10494F52FF26956F256667DB52E9FA9B30E6A4FF61E4C05F1AC2795330F34B7B1389E1BD75FD0D3DCD12E991BD09B9AD004C0FE0D'
            decryptionKey='B8940FB4A776EABD1525E7D9B58E9E5DE057B2F2A67AA913'
            validation='SHA1'/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T13:36:16.963

我认为你应该看看[PreApplicationStartMethodAttribute](http://haacked.com/archive/2010/05/16/three-hidden-extensibility-gems-in-asp-net-4.aspx)和[Managed Extensibility Framework Overview](http://msdn.microsoft.com/ru-ru/library/dd460648.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T13:37:28.017

关键是您需要在每个 web.config 文件中使用相同的机器密钥、验证密钥和解密密钥。

此外，请确保您的所有表单身份验证参数在每个文件中都匹配。

报告应用程序应指向管理应用程序的登录页面。****

# php - 如何为面向用户的站点实施站点维护功能

> ID：11760245
> 
> 赞同：0
> 
> 时间：2012-08-01T13:23:33.350
> 
> 标签：php, session

作为一些网站的站点管理员和开发人员，我需要“站点维护”功能。这些网站都是基于用户登录以获得任何有用的内容。一、原因：

1.  如果我依赖的网站出现故障（即支付处理器），我希望能够设置“维护模式”以禁止登录，以确保在此期间没有人尝试提交付款。
2.  如果我正在测试我推出的一项功能（在测试阶段之后，但在我想 100% 向公众发布之前） - 我想禁止登录以防止任何人看到有问题的版本小时。

我的计划是在数据库中设置一个标志，当用户登录时登录脚本会检查该标志。如果设置了标志 - 用户将无法登录并将收到相应的错误消息。

但是，如何结束每个当前登录用户的会话？

我也想知道这是否因为我可能忽略的任何原因听起来是个坏主意？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:27:45.050

对于第二点：

你可以设置一个不同的webserver，它可以在同一个物理服务器上，但是使用不同的前缀路径或不同的端口或不同的域名，在其应用程序根目录中上传新版本，然后在现场环境（同一台服务器，使用相同的数据库等...）。如果一切正常，请将其推送到真正的实时根目录。这样你就不会有停机时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:28:29.033

我不会注销每个用户，我只会设置一个 cookie，允许某人在维护模式下查看版本，如果它不存在，请不要让他们进入。

我认为这是一个坏主意的唯一原因是它可能会惹恼用户。

# sql-server - SQL：如何进行条件更新

> ID：11760255
> 
> 赞同：1
> 
> 时间：2012-08-01T13:23:52.133
> 
> 标签：sql-server, sql-server-2008

抱歉，标题不是那么好，至少可以这么说。

在我的客户表中，我有 4 列电话号码：P1、P2、P3、P4。而且我还有 1 列告诉我是否根本没有电话号码： NOPHONE 值为 1 或 0 （我知道这听起来很愚蠢，但这是一个很长的故事，所以它就是这样。）

每当我没有电话号码时，该值为 1（这也有其原因）。

现在，我要做的是更新所有具有 0 的电话号码，并将值更改为 NULL ...除了那些具有 NOPHONE=1 的记录（并且将具有 P1=P2=P3=P4 =0)，应该保持原样（即 0）。

如何在 1 个 SQL 语句中做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T13:25:32.673

使用`CASE`语句有条件地设置值。如果要保留当前值，只需将其设置为自身即可。该`WHERE`子句检查是否至少需要更改一列。

```
UPDATE CUSTOMER
SET
  P1 = CASE WHEN P1 = 0 THEN NULL ELSE P1 END,
  P2 = CASE WHEN P2 = 0 THEN NULL ELSE P2 END,
  P3 = CASE WHEN P3 = 0 THEN NULL ELSE P3 END,
  P4 = CASE WHEN P4 = 0 THEN NULL ELSE P4 END
WHERE NOPHONE = 0
  AND (P1 = 0 OR P2 = 0 OR P3 = 0 OR P4 = 0) 
```

你的`NOPHONE`逻辑似乎倒退了。直觉上，我希望`NOPHONE = 1`表明没有可用的电话号码，但您的问题的措辞正好相反。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T13:52:22.683

```
UPDATE Customer
SET P1 = NULLIF(P1, 0), P2 = NULLIF(P2, 0), P3 = NULLIF(P3, 0), P4 = NULLIF(P4, 0)
WHERE NOPHONE = 0 
```

# mysql - 强制扫描子查询结果而不是现有的

> ID：11760256
> 
> 赞同：0
> 
> 时间：2012-08-01T13:23:55.687
> 
> 标签：mysql, sql, optimization

我可以以某种方式强制 mysql 对子查询结果而不是现有表进行全面扫描吗？

假设我有一个查询：

```
DELETE FROM table_a WHERE id IN (SELECT id FROM table_b WHERE ...) 
```

如果我确定子查询返回约 10 个结果，而 table_a 有数千个结果，我可以以某种方式强制查找 table_a 记录并扫描 table_b 结果吗？Mysql 坚持（根据`EXPLAIN SELECT * FROM table_a...`）在 table_a 上执行 ALL 并在 table_b 上进行索引查找。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T13:26:22.320

相反，您可以在字段上添加索引`id`并尝试`INNER JOIN`：

```
DELETE a
FROM table_a a 
     INNER JOIN table_b b
         ON a.id = b.id; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T13:29:01.930

`where someColumn in( ... )`与正确连接相比的效率是可怕的。

改为在两个表上使用内部联接。

避免`in`和其他不能使用索引的子句。

# java - 协变结构因 Java 中的错误捕获而失败

> ID：11760258
> 
> 赞同：4
> 
> 时间：2012-08-01T13:24:04.290
> 
> 标签：java, generics, inheritance, covariance, bounded-wildcard

考虑以下 Java 类定义：

```
class Animal {}
class Lion extends Animal {} 
```

`Cage`在为s定义协变时，`Animal`我在 Java 中使用以下代码：

```
class Cage<T extends Animal> {
void add(T animal) { System.out.println("Adding animal..."); }
} 
```

但是下面的 Java 示例...

```
public static void main(String... args) {
    Cage<? extends Animal> animals = null;
    Cage<Lion> lions = null;
    animals = lions;         // Works!
    animals.add(new Lion()); // Error!
} 
```

...无法编译并出现以下错误：

> *Cage 类型中的方法 add(capture#2-of ? extends Animal) 不适用于参数（Lion）*

这样做是因为否则`Tiger`可能会在运行后添加不同的类型`animals = lions`并在运行时失败？

如果只有一个子类型，是否可以制定一个不会拒绝它的特殊（假设）规则`Animal`？

（我知道我可以将`add`'s`T`替换为`Animal`。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T14:03:06.530

在 java 中：

```
Cage<? extends Animal> animals = null; 
```

这是一个笼子，但你不知道它接受什么样的动物。

```
animals = lions;         // Works! 
```

好吧，你没有添加关于什么样的笼子动物的意见，所以狮子不违反预期。

```
animals.add(new Lion()); // Error! 
```

你不知道笼子里的动物是什么样的。在这种特殊情况下，它恰好是一个狮子笼，你把狮子放进去，很好，但允许这样做的规则只允许将任何种类的动物放入任何笼子。它是正确不允许的。

在 Scala:: `Cage[+T]`if `B`extends`A`中，a`Cage[B]`应该被认为是 a `Cage[A]`。

鉴于此，`animals = lions`是允许的。

但这与java不同，类型参数肯定是`Animal`，而不是通配符`? extends Animal`。您可以将动物放入 a 中`Cage[Animal]`，狮子是动物，因此您可以将狮子放入可能是笼子[鸟]的笼子[动物]中。这很糟糕。

除了它实际上是不允许的（幸运的是）。您的代码不应编译（如果它为您编译，则您观察到编译器错误）。协变泛型参数不允许作为方法的参数出现。原因正是允许它允许将狮子放在鸟笼中。它 T 出现`+T`在 的定义中`Cage`，它不能作为方法的参数出现`add`。

所以两种语言都不允许把狮子放在鸟笼里。

* * *

关于您更新的问题。

这样做是因为否则可以添加老虎吗？

是的，这当然是原因，类型系统的重点是让它变得不可能。这会导致运行时错误吗？很有可能，它会在某个时候出现，但不是在你调用 add 的那一刻，因为在运行时不会检查泛型的实际类型（类型擦除）。但是类型系统通常会拒绝每个它不能证明（某种）错误不会发生的程序，而不仅仅是它可以证明它们确实发生的程序。

如果只有一个动物子类型，是否可以制定一个不会拒绝它的特殊（假设）规则？

也许。请注意，您仍然有两种类型的动物，即`Animal`和`Lion`。所以重要的事实是一个`Lion`实例属于这两种类型。另一方面，`Animal`实例不属于 type `Lion`。`animals.add(new Lion())`可以允许（笼子可以是任何动物的笼子，或者只适合狮子，两者都可以），但`animals.add(new Animal())`不应该（因为动物只能是狮子的笼子）。

但无论如何，这听起来是个非常糟糕的主意。面向对象系统中的继承点是，某个时候，在其他地方工作的其他人可以添加子类型，这不会导致正确的系统变得不正确。事实上，旧代码甚至不需要重新编译（可能你没有源代码）。有了这样的规则，那将不再是真的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T13:34:31.277

我认为这个问题可能会为您回答：

[java泛型协方差](https://stackoverflow.com/questions/2660827/java-generics-covariance)

基本上，Java 泛型不是协变的。

我所知道的最好的解释当然来自 Effective Java 2nd Edition。

你可以在这里读到它：

[http://java.sun.com/docs/books/effective/generics.pdf](http://java.sun.com/docs/books/effective/generics.pdf)

我认为假设规则在运行时很难执行。编译器理论上可以检查显式添加到列表中的所有对象是否确实属于同一类型的动物，但我确信存在可能在运行时破坏它的条件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T14:02:38.437

当你用这种类型*声明*你的变量时：`Cage<? extends Animal>`; 你基本上是说你的变量是一个笼子，里面有一些*未知*的类，它继承自`Animal`. 它可以是 a`Tiger`或 a `Whale`; 所以编译器没有足够的信息让你添加一个`Lion`。为了得到你想要的，你将你的变量声明为 a`Cage<Animal>`或 a `Cage<Lion>`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T14:02:15.627

如果是这样，那很可能是 Scala 编译器中的一个错误。奥德斯基等人。写在[Scala 编程语言概述中](http://www.scala-lang.org/docu/files/ScalaOverview.pdf)：

> Scala 的类型系统通过跟踪使用类型参数的位置来确保方差注释是正确的。对于不可变字段和方法结果的类型，这些位置被归类为协变的，而对于方法参数类型和上类型参数边界而言，这些位置是逆变的。非变体类型参数的类型参数始终处于非变体位置。对应于逆变参数的类型参数内的逆变和协变之间的位置 ips。类型系统强制协变（分别为逆变）类型参数仅用于协变（逆变）位置。

因此，协变类型参数 T 不能作为方法参数出现，因为那是逆变位置。

[Scala 语言规范（版本 2.9）](http://www.scala-lang.org/docu/files/ScalaReference.pdf)第 4.5 节中也存在类似的规则（有更多特殊情况，在这种情况下都不重要）。

# asp.net - （变量名）既不是表 Table 的 DataColumn 也不是 DataRelation

> ID：11760260
> 
> 赞同：1
> 
> 时间：2012-08-01T13:24:11.320
> 
> 标签：asp.net, sql

这是我从数据库中获取数据的代码（我使用数据集）：

```
public DataSet getJobVacancy(GetJobVacancyData data)
{
    try
    {
        string _SPName  = "dbo.SearchJob";
        SqlParameter[] sqlParam = new SqlParameter[3];
        sqlParam[0] = new SqlParameter("@Keyword", SqlDbType.VarChar, 25);

        if(data.Keyword == null || data.Keyword == "")
            sqlParam[0].Value = DBNull.Value;
        else
            sqlParam[0].Value = data.Keyword;

        sqlParam[0].Direction = ParameterDirection.Input;
        sqlParam[1] = new SqlParameter("@LocationID", SqlDbType.SmallInt);

        if(data.LocationID == null)
            sqlParam[1].Value = DBNull.Value;
        else
            sqlParam[1].Value = data.LocationID;

        sqlParam[1].Direction = ParameterDirection.Input;
        sqlParam[2] = new SqlParameter("@ExperienceYears", SqlDbType.TinyInt);

        if(data.ExperienceYears == null)
            sqlParam[2].Value = DBNull.Value;
        else
            sqlParam[2].Value = data.ExperienceYears;

        sqlParam[2].Direction = ParameterDirection.Input;

        return SqlHelper.ExecuteDataset(SystemConfiguration.AMDP2_ConnectionString,
                                        CommandType.StoredProcedure,
                                       _SPName,
                                       sqlParam);

    }
    catch (Exception ex)
    {
        throw ex;
    }
} 
```

这是我的 setter-getter ：

```
public string JobVacancyID { get; set; }
public string PostingDate { get; set; }
public string ClosingDate { get; set; }
public string Position { get; set; }
public string Location { get; set; }
public string Keyword { get; set; }
public string LocationID { get; set; }
public string ExperienceYears { get; set; } 
```

这是我的中继器的数据绑定：

```
protected void rptJob_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || 
        e.Item.ItemType == ListItemType.AlternatingItem)
    {
        DataRowView data = (DataRowView)e.Item.DataItem;

        Literal ltrDatePosted = (Literal)e.Item.FindControl("ltrDatePosted");
        Literal ltrClosingDate = (Literal)e.Item.FindControl("ltrClosingDate");
        LinkButton lbtnPosition = (LinkButton)e.Item.FindControl("lbtnPosition");
        Literal ltrLocation = (Literal)e.Item.FindControl("ltrLocation");
        Literal ltrExpYears = (Literal)e.Item.FindControl("ltrExpYears");
        Literal ltrJobVacancyID = (Literal)e.Item.FindControl("ltrJobVacancyID");

        ltrDatePosted.Text = data["PostingDate"].ToString();
        ltrClosingDate.Text = data["ClosingDate"].ToString();
        lbtnPosition.Text = data["Position"].ToString();
        ltrLocation.Text = data["LocationName"].ToString();
        ltrExpYears.Text = data["ExperienceYears"].ToString();
        ltrJobVacancyID.Text = data["JobVacancyID"].ToString(); //this is where the error occured
    }
} 
```

这是我的 sql 查询/存储过程（我已经运行了这个查询并且 JobVacancyID 列在结果中）：

```
BEGIN
SELECT JobVacancyID, PostingDate, ClosingDate, Position, b.LocationName, ExperienceYears FROM TRJobVacancy a
JOIN LTLocation b on a.LocationID = b.LocationID    
WHERE Position LIKE '%'+ COALESCE(@Keyword,Position) + '%' AND COALESCE(@LocationID, a.LocationID) = a.LocationID AND COALESCE(@ExperienceYears,ExperienceYears)  = ExperienceYears 
```

我得到的错误是：“ **JobVacancyID 既不是 DataColumn 也不是表 Table 的 DataRelation** ”

令人困惑的事实是： 1\. 它只在 data["JobVacancyID"] 处出错，其他的都很顺利。2\. 我想我没有一个名为 Table 的表（错误是这样说的）谢谢 :D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T16:10:11.350

抱歉……我只是想念输入变量……花了大约 3 个小时才意识到它@_@

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-15T01:26:54.963

我遇到了同样的问题，但是除了设置类型之外，我还错过了几个数据字段值。主要在 GridTemplateColumn 列上。

# html - IE下拉菜单问题

> ID：11760262
> 
> 赞同：1
> 
> 时间：2012-08-01T13:24:15.953
> 
> 标签：html, css, internet-explorer, drop-down-menu

据我所知，它只发生在 IE9 中，并且只有在打开兼容模式时才会发生。我让我的一个朋友看一看，它在他的 IE9 的 PC 上运行良好，所以看起来它也可能与某些操作系统隔离。

下拉菜单出现在错误的顶级菜单下 -![在此处输入图像描述](../Images/cae19fba8846dd3092fa483e07443315.png)

该网站可以在这里看到 - [http://www.traffic-club.org/](http://www.traffic-club.org/)

我一直在研究 CSS，据我所知，一切都是 kosher。感谢您的任何反馈！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:47:27.647

在我看来，这个问题的一个很好的解决方案是：

当用户悬停链接时，添加`position: relative;`到`li`具有下拉菜单并将`left`属性设置为`0`(not ) 的 s 中。`auto`

它在您的 css 文件中的第 121 行：

`left: auto;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:47:09.877

**确认，这是源于 IE7 的问题。** 您可以使用 IE 的 CSS 选择器专门针对给您问题的浏览器进行轻微的 CSS 修改。

从这里开始：http: [//css-tricks.com/snippets/css/browser-specific-hacks/](http://css-tricks.com/snippets/css/browser-specific-hacks/)，这应该会让你走上正确的道路。

当然，**您仍然应该确保您的代码都经过正确验证**。但有时 IE 无论如何都不听，这也是将来可能派上用场的解决方案。

# xslt - xsl中节点结构的正确语法是什么

> ID：11760267
> 
> 赞同：1
> 
> 时间：2012-08-01T13:24:23.033
> 
> 标签：xslt, xslt-1.0, transformation

我一直试图让这个 xsl 转换在我的 php 中运行 xsl 运行正常，但它不输出 for-each 部分的值我得到所有标题，但我似乎无法得到它在这里输出任何其他内容就是 curl XML 响应的样子：

```
<search>
<response status="2">
<errors>
 StartdateEarlierThanToday0Incorrect start date. Start date cannot be earlier than today.0FalseFalse
 </errors>
<number_of_hotels>1 of 1</number_of_hotels>
</response>
<lr_rates>
<hotel>
 <hotel_ref>142680</hotel_ref>
 <hotel_currency>GBP</hotel_currency>
 <hotel_rooms>
  <room>
  <ref>4380316</ref>
 <type>10</type>
 <type_description>Apartment</type_description>
 <sleeps>2</sleeps>
 <rooms_available>0</rooms_available>
 <adults>2</adults>
 <children>0</children>
 <breakfast>false</breakfast>
 <dinner>false</dinner>
 <description>
 The apartment has seperate kitchen area, lounge/dining area, bedroom with double bed and bathroom with bath & shower.
 </description>
 <alternate_description/>
 <rack_rate>140.00</rack_rate>
 <rate>
 <date>01/08/2012</date>
 <formatted_date>01 August 2012</formatted_date>
 <price>Full</price>
 <hotelcurrencyprice>Full</hotelcurrencyprice>
 <numeric_price>Full</numeric_price>
 <numeric_hotelcurrencyprice>Full</numeric_hotelcurrencyprice>
  <requested_currency>GBP</requested_currency>
  </rate>
    <rate>
   <date>02/08/2012</date>
   <formatted_date>02 August 2012</formatted_date>
    <price>Full</price>
    <hotelcurrencyprice>Full</hotelcurrencyprice>
    <numeric_price>Full</numeric_price>
     <numeric_hotelcurrencyprice>Full</numeric_hotelcurrencyprice>
     <requested_currency>GBP</requested_currency>
     </rate>
     <available_online>false</available_online>
    <minimum_nights>1</minimum_nights>
   <bed_type>Double</bed_type>
   <cancellation_policy/>
   <cancellation_days/>
   <cancellation_hours/>
   <room_terms/>
  </room>
 <room>...</room>
 </hotel_rooms>
 </hotel>
 </lr_rates>
 </search> 
```

那么这是要使用的 xsl im tryig

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">
<h2>Availability Search:</h2>
<table border="1">
  <tr bgcolor="#FFFFFF">
    <th align="left">Room Type</th>
    <th align="left">Description</th>
    <th align="left">Availability</th>
    <th align="left">Price</th>
   </tr>
  <xsl:for-each select="/">
    <tr>
     <td><xsl:value-of select="type_description" /></td>
     <td><xsl:value-of select="description" /></td>
     <td><xsl:value-of select="rooms_available" /></td>
     <td><xsl:value-of select="rack_rate" /></td>
    </tr>
   </xsl:for-each>
 </table>
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:54:03.367

这是你的问题：

```
<xsl:for-each select="/">
    <tr>
        <td>
            <xsl:value-of select="type_description" />
        </td>
        <td>
            <xsl:value-of select="description" />
        </td>
        <td>
            <xsl:value-of select="rooms_available" />
        </td>
        <td>
            <xsl:value-of select="rack_rate" />
        </td>
    </tr>
</xsl:for-each> 
```

这仅处理一个节点——文档节点`/`，并且因为它没有名为`type_description`or `description`or `rooms_available`or的子节点`rack_rate` ——没有任何输出。

如果没有时间仔细观察，您可能需要以下内容：

```
<xsl:for-each select="/*/lr_rates/hotel/hotel_rooms/room">
    <tr>
        <td>
            <xsl:value-of select="type_description" />
        </td>
        <td>
            <xsl:value-of select="description" />
        </td>
        <td>
            <xsl:value-of select="rooms_available" />
        </td>
        <td>
            <xsl:value-of select="rack_rate" />
        </td>
    </tr>
</xsl:for-each> 
```

# installation - 如何使安装程序创建快捷方式文档和文件夹的快捷方式（Windows 8）

> ID：11760278
> 
> 赞同：0
> 
> 时间：2012-08-01T13:25:01.213
> 
> 标签：installation, windows-8, microsoft-metro, nsis, shortcut

我使用 NSIS（Nullsoft 安装程序）v2.0 开发了 COM 对象库的安装程序。安装程序会创建一些指向文档和示例文件夹的快捷方式。在 Windows 8 上，所有内容都进入 Metro UI 磁贴矩阵中的平面列表。此外，列表中仅显示示例的 .exe 文件的快捷方式（没有文档、没有文档、没有指向 Visual Studio 解决方案的链接等）。

是否可以在不从头开始重建安装程序的情况下解决此问题？我想让安装程序使用我的产品名称创建一个磁贴，然后单击该磁贴应该显示示例文件夹、文档等的磁贴。就像它出现在 Windows 7 的开始菜单中的链接文件夹和经验值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:31:56.773

Metro 风格不允许使用 Metro 磁贴进行分层导航。您需要做的是将您的主文件夹/应用程序固定到开始菜单，以便您的主文件夹在桌面上打开。这可能需要重写您的安装程序。

# android - Android - '无法加载 Foo：findLibrary 返回 null'

> ID：11760284
> 
> 赞同：4
> 
> 时间：2012-08-01T13:25:29.137
> 
> 标签：android, android-ndk, java-native-interface

我知道已经有关于堆栈溢出这个错误的帖子，但是从我在 SO 和 Google 上找到的内容来看，这与我的问题并不相符。

我正在尝试运行我的应用程序，但是每当调用本机函数时，我的程序就会崩溃，并且我得到以下信息`LogCat`...

```
08-01 09:15:57.448: E/AndroidRuntime(16966): FATAL EXCEPTION: main
08-01 09:15:57.448: E/AndroidRuntime(16966): java.lang.ExceptionInInitializerError
08-01 09:15:57.448: E/AndroidRuntime(16966):    at my.eti.commander.MainMenu.initMain(MainMenu.java:241)
08-01 09:15:57.448: E/AndroidRuntime(16966):    at my.eti.commander.MainMenu.onCreate(MainMenu.java:81)
08-01 09:15:57.448: E/AndroidRuntime(16966):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-01 09:15:57.448: E/AndroidRuntime(16966):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
08-01 09:15:57.448: E/AndroidRuntime(16966):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
08-01 09:15:57.448: E/AndroidRuntime(16966):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-01 09:15:57.448: E/AndroidRuntime(16966):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
08-01 09:15:57.448: E/AndroidRuntime(16966):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-01 09:15:57.448: E/AndroidRuntime(16966):    at android.os.Looper.loop(Looper.java:130)
08-01 09:15:57.448: E/AndroidRuntime(16966):    at android.app.ActivityThread.main(ActivityThread.java:3683)
08-01 09:15:57.448: E/AndroidRuntime(16966):    at java.lang.reflect.Method.invokeNative(Native Method)
08-01 09:15:57.448: E/AndroidRuntime(16966):    at java.lang.reflect.Method.invoke(Method.java:507)
08-01 09:15:57.448: E/AndroidRuntime(16966):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-01 09:15:57.448: E/AndroidRuntime(16966):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-01 09:15:57.448: E/AndroidRuntime(16966):    at dalvik.system.NativeStart.main(Native Method)
08-01 09:15:57.448: E/AndroidRuntime(16966): Caused by: java.lang.UnsatisfiedLinkError: Couldn't load RelayAPI: findLibrary returned null
08-01 09:15:57.448: E/AndroidRuntime(16966):    at java.lang.Runtime.loadLibrary(Runtime.java:429)
08-01 09:15:57.448: E/AndroidRuntime(16966):    at java.lang.System.loadLibrary(System.java:554)
08-01 09:15:57.448: E/AndroidRuntime(16966):    at my.eti.commander.RelayAPIModel$NativeCalls.<clinit>(RelayAPIModel.java:432)
08-01 09:15:57.448: E/AndroidRuntime(16966):    ... 15 more 
```

这是我的`Android.mk`文件：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)
EXTRA_CFLAGS := -DANDROID
LOCAL_MODULE := RelayAPI
LOCAL_SRC_FILES := RelayAPI.c
include $(BUILD_EXECUTABLE) 
```

这是我的 jni 文件夹的图片...只会使用 RelayAPI，stringstuff 是一个未使用的额外文件。

![在此处输入图像描述](../Images/aaca09dd0d17e45e231289be79d642b3.png)

我将所有本机函数存储在一个单独的类中，以便可以静态调用它们。不过这不是问题，因为我一直在移动它们，但我只是认为这将是我完成它的最佳方式。

```
public static class NativeCalls {

    static {
        System.loadLibrary( "RelayAPI");
    }

    public native static byte InitRelayJava();

    public native static void FreeRelayJava();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:36:32.300

不应该使用包含 $(BUILD_SHARED_LIBRARY) 而不是包含 $(BUILD_EXECUTABLE)？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T15:06:58.707

好吧，我已经通过了错误。上个月我问了一个不同的问题，在尝试解决这个问题时，这个错误消失了。它与将 my 设置`environment PATH variable`为 NDK 文件夹位置有关。[这是指向更深入答案的链接。](https://stackoverflow.com/a/11761058/1435712)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-30T16:46:22.977

确保在运行您的应用程序（使用该库）之前构建您的库`ndk-build`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T14:27:58.573

`BUILD_EXECUTABLE`是错误的，这将构建一个可执行文件（提示，提示..）而不是共享库。当你使用时，`System.loadLibrary(..)`你必须使用**`BUILD_SHARED_LIBRARY`**. 如果它仍然不起作用，则可能是另一个错误，但使用`BUILD_EXECUTABLE`打算用作共享库的东西是错误的，即使它在某些情况下“可能”工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-07T06:40:28.850

我也遇到了这个问题，但是对于我的情况，您必须将基于处理器的库添加到您的项目库文件夹中。如果您使用的是日食。

[![在此处输入图像描述](../Images/4fdd426a2ca12edfe5e01bf66abd2047.png)](https://i.stack.imgur.com/2hPep.png)

# javascript - 应用简单的 Touchswipe 失败

> ID：11760286
> 
> 赞同：1
> 
> 时间：2012-08-01T13:25:34.107
> 
> 标签：javascript, touch, touch-event

我刚刚开始学习应用一些触摸手势等，并决定使用 touchswipe。我刚刚开始一些测试，并从演示中看到的各种内容开始。但是，到目前为止，我无法让一个简单的 swipeLeft 工作。这是我到目前为止所拥有的。

```
<!doctype html>
<html>
<head>
    <meta charset="utf-8">

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" src="../../JQuery files/touchswipe.js"></script>

    <title>Demo</title>

    <style type="text/css">

    #swipe {
    margin: 0 0 0 0;
    padding: 50px;
    background: #99FFCC;
}

    </style>

  </head>
  <body>

        <div id="swipe">Swipe Here</div>

        <script type="text/javascript">var swipeOptions=
            {
                swipeLeft:swipeLeft,
                threshold:0
            }

            $(function()
            {           
                //Enable swiping...
                $("#test").swipe( swipeOptions );
            });

            //Swipe handlers.
            //The only arg passed is the original touch event object            
            function swipeLeft(event)
            {
                $("#test").text("wahoo");
            }
</script>

  </body>
</html> 
```

# ios5 - 从滚动视图中选择图标

> ID：11760288
> 
> 赞同：0
> 
> 时间：2012-08-01T13:25:43.690
> 
> 标签：ios5, uiscrollview, icons

我希望用户在 iOs 应用程序中选择一个图标。可能的图标数量大于一个屏幕上可以显示的数量。做这个的最好方式是什么？我正在考虑使用滚动视图并在其上创建具有图标作为背景图像的自定义按钮......有人知道其他方式吗？还有一个滚动视图教程会很有用......谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:29:17.223

你肯定想对了。`UIScrollView`绝对是要走的路。为了简单起见，自定义按钮也是我通常的做法。

这是一个很好的教程，正是你想要做的事情:) 我自己写得更简单，所以不妨把它链接起来。

[http://www.raywenderlich.com/130/how-to-write-a-custom-image-picker-like-uiimagepicker](http://www.raywenderlich.com/130/how-to-write-a-custom-image-picker-like-uiimagepicker)

# iphone - 如何传输视图但不会关闭视图数据？

> ID：11760291
> 
> 赞同：1
> 
> 时间：2012-08-01T13:26:02.377
> 
> 标签：iphone, objective-c, ios

对不起，我的问题不干净。我想做 Iphone 应用程序 A 视图转到 B 视图，但是当我单击按钮转到 B 视图时，A 视图数据将被删除。所以我想知道如果我想 B View 回到 A View ，A View 可以保留数据吗？

例如：A 视图做一些工作，但我单击按钮转到 B 视图。这次我回去A View，A View 还可以做。这个任务可以吗？不使用导航栏和 tar 栏只使用按钮传输。

谢谢你的帮助。

我的意思是视图控制器非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:45:18.583

> 例如：A 视图做一些工作，但我单击按钮转到 B 视图。这次我回去A View，A View 还可以做。这个任务可以吗？不使用导航栏和 tar 栏只使用按钮传输。

据我了解，您需要在**视图控制器**A 中启动一些后台任务并转到**视图控制器**B？如果我是对的，您可以通过以下步骤来做到这一点：

1.  启动您需要在后台执行的任务。你可以通过`performSelectorInBackground:@sel`或其他方式做到这一点。您还需要以某种方式指示后台任务何时完成。
2.  通过 显示视图控制器`presentModalViewController:(UIViewController *)viewController animated:(BOOL)animated`B。您在视图控制器 A 中的后台任务继续执行。
3.  在视图控制器 B 中，制作按钮将用作“后退”按钮。向按钮添加操作，并在此操作中执行 [self dismissModalViewControllerAnimated:YES]
4.  当您返回视图控制器 A 时，您可以看到您的后台任务仍在执行（或已经完成）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:20:30.197

我想你只是想回到以前的观点。这很容易，但我也不知道并做了转圈。

你必须写代码，但很短。

您必须添加 UIViewController 文件并设置为第二个视图，如下所示（我认为这有点困难）：

![设置视图控制器](../Images/2224c2b6572c6eecaf1ef4ff0098744c.png)

然后你必须添加以下代码：

```
- (IBAction)back:(id)sender {
    [self dismissModalViewControllerAnimated:YES];
} 
```

我在这里做了一个示例项目：[https ://github.com/weed/p120801_SegueSampleProject](https://github.com/weed/p120801_SegueSampleProject)

您可以下载并运行它。

我希望我的建议对你有所帮助。

# javascript - Jquery - 从不同的链接加载选项卡

> ID：11760295
> 
> 赞同：0
> 
> 时间：2012-08-01T13:26:22.223
> 
> 标签：javascript, jquery, tabs

我将以下 jquery 代码用于简单的选项卡视图，如果单击选项卡，它将显示特定于该选项卡的 div。这仅在单击 ul.tabs 属性内的选项卡时有效。我如何调整代码以允许在 ul.tabs 列表之外的同一页面上的链接以显示我想要的任何 div？

```
 $(document).ready(function(){
    $('ul.tabs').each(function(){
        // For each set of tabs, we want to keep track of
        // which tab is active and it's associated content
        var $active, $content, $links = $(this).find('a');

        // Use the first link as the initial active tab
        $active = $links.first().addClass('active');
        $content = $($active.attr('href'));

        // Hide the remaining content
        $links.not(':first').each(function () {
            $($(this).attr('href')).hide();
        });

        // Bind the click event handler
        $(this).on('click', 'a', function(e){
            // Make the old tab inactive.
            $active.removeClass('active');
            $content.hide();

            // Update the variables with the new link and content
            $active = $(this);
            $content = $($(this).attr('href'));

            // Make the tab active.
            $active.addClass('active');
            $content.show();

            // Prevent the anchor's default click action
            e.preventDefault();
        });
    });
}); 
```

这是html：

```
 <ul class="tabs">
          <li><a href="#photo_tab">Photos</a></li>
        </ul>
        <div id="photo_tab" class="tabcontent">
          <h3>Section 1</h3>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec lobortis placerat dolor id aliquet. Sed a orci in justo blandit commodo. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae.</p>
        </div> 
```

所以我想在页面上其他地方的链接上使用 href="#photo_tab" ，这将显示 photo_tab div 并显示活动选项卡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:32:31.510

您可以在正确的选项卡上手动触发点击触发器。

**HTML：**

```
<div class="extlink" data-tabid="photo_tab">click me!</div>

<ul class="tabs">
   <li><a href="#photo_tab" id="photo_tab">Photos</a></li>
</ul> 
```

**JS：**

```
$('.extlink').click(function(){
    var tabid = $(this).attr('data-tabid');    // this gets the id of the element you want to trigger
    $('#'+tabid).click();   /// this acts as if you clicked on that tab element
}); 
```

# joomla - 在 Joomla 中将数据导出到 Excel

> ID：11760308
> 
> 赞同：0
> 
> 时间：2012-08-01T13:27:11.287
> 
> 标签：joomla

我在 Joomla 中开发了一个应用程序。我使用 Fabrik 输入和检索数据以及数据库管理。在 Fabrik 中，我们可以选择导出到 CSV 和 Excel，但两者都在生成 CSV 文件。

我严格要求 Excel 格式。我应该在哪里更改 Fabrik 文件和文件夹以生成 Excel？还有其他选择吗？如果没有，我想创建一个链接，该链接将从已通过 Fabrik 保存的数据生成 Excel。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T19:14:01.540

我建议您从[Joomla 扩展目录](http://extensions.joomla.org)(JED) 开始您的研究。他们有很多开源解决方案，包括一些非常好的 Excel 解决方案。

我们很乐意为您提供帮助，但仅仅说明您拥有什么以及您想要什么并不足以让任何人认真花时间。如果您提供您在 Joomla 中查看的内容的详细信息，或者您尝试更改的示例，您可能会更加关注您的问题。

# javascript - 使用 jquery 基于 alt 文本向一些图像添加一个类？

> ID：11760310
> 
> 赞同：1
> 
> 时间：2012-08-01T13:27:19.153
> 
> 标签：javascript, jquery

如何使用 jquery 根据 alt 文本向某些图像添加类？

这是图像的示例：

```
<img border="0" src="images/Product/icon/26086_1_.jpg" 
alt="Show Picture 1" onclick="setcolorpicidx_26086(1);" 
style="cursor:hand;cursor:pointer;"> 
```

所以如果替代文本包含“显示图片”然后添加一个类`image-nav`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:32:00.840

您还可以使用过滤器：

```
$('img').filter(function() {
    return $(this).prop('alt').indexOf('Show Picture')!=-1;
}).addClass('image-nav'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:30:37.897

```
$('img[alt^="Show Picture"]').addClass('image-nav'); 
```

使用以选择器[开头的属性](http://api.jquery.com/attribute-starts-with-selector/)

或者

```
$('img[alt*="Show Picture"]').addClass('image-nav'); 
```

使用[属性包含](http://api.jquery.com/attribute-contains-selector/)选择器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T13:31:34.387

您想使用[以选择器开头的属性](http://api.jquery.com/attribute-starts-with-selector/) `[name^="value"]`

```
$('img[alt^="Show Picture"]').addClass("image-nav"); 
```

# java - 在 Spring MVC 中获取 Windows 用户名

> ID：11760312
> 
> 赞同：2
> 
> 时间：2012-08-01T13:27:27.827
> 
> 标签：java, spring, tomcat, spring-security

我在 Solaris 机器上的 Tomcat 7 上运行了一个 Spring-MVC Web 应用程序。该网络应用程序完全在内部，位于 Intranet 上。所有点击该应用程序的用户都在运行 Windows。当他们点击控制器时是否可以获得他们的 Windows 用户名？我让这个与 Waffle 完美配合，但该解决方案在 Solaris 上不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T18:49:55.767

看看[JCFIS](http://jcifs.samba.org/)库。它[支持](http://jcifs.samba.org/src/docs/ntlmhttpauth.html)NTLM 协议，可以将凭据从操作系统传递到您的 webapp。不幸的是，它只适用于 IE。

# mysql - 我可以使用这样的案例陈述吗？

> ID：11760315
> 
> 赞同：0
> 
> 时间：2012-08-01T13:27:50.390
> 
> 标签：mysql, count, case

我目前无权对此进行测试，但没有找到任何相关示例。我想尝试这样的事情：

```
SELECT member.name, DISTINCT member.id, 
     COUNT(CASE WHEN member.code = 'A' 
     THEN 1) AS CountACode, ... CountBCode, COUNT(*) as CountTotal  FROM member 
```

我知道我可以以不同的方式执行此操作，但是我已经在使用其他一些相关的列，这样做会容易得多。但是，我相信有人告诉我我错了，但没有任何说明原因。有人介意告诉我问题出在哪里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:30:44.050

您不能`DISTINCT`在它之间写子句，必须立即在`SELECT`子句之后。

是的，您可以`CASE WHEN`在里面使用语句`COUNT`：

```
SELECT DISTINCT member.name,  member.id, 
       COUNT(CASE WHEN member.code = 'A' THEN 'something..' END) AS CountACode, 
       ... CountBCode, 
       COUNT(*) as CountTotal 
FROM member; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:30:51.937

您的问题是`DISTINCT`适用于整个结果集，而不仅仅是单个字段。

对于计数，这对我们来说是正常的模式`SUM`：

```
SUM(CASE WHEN Condition = value THEN 1 ELSE 0 END) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T13:31:06.623

```
SELECT member.name, member.id, SUM(CASE WHEN member.code = 'A' THEN 1 ELSE 0) AS CountACode, ... CountBCode, COUNT(*) as CountTotal
FROM member
GROUP BY member.name, member.id 
```

# java - 在启动时向 JApplet 添加组件

> ID：11760323
> 
> 赞同：0
> 
> 时间：2012-08-01T13:28:29.610
> 
> 标签：java, swing, load, japplet, jcomponent

我是java的初学者，我正在编写一个JApplet（它也在浏览器之外运行）。在我的主窗体上，我想在加载时添加一个 QuickTable。

目前我有一个按钮，当按下按钮时，QuickTable 已成功添加。我将按钮后面的代码复制到一个 void 中，并尝试在 init() 结束时执行它，但没有显示 QuickTable。

```
 DBTable servers = new DBTable();
                    servers.setConnection(conn);
                    servers.setSelectSql("SELECT ServerID, Naam, Kost, Opslag, Paswoord from tblServers");
                    servers.createControlPanel();
                    jPanel3.add(servers);
                    servers.refresh(); 
```

小程序加载后如何自动执行方法？

我背后的代码按钮在这里（不适合这里）： http: [//ompldr.org/vZXkycw/pasta](http://ompldr.org/vZXkycw/pasta)

**得到这个**：如果我删除“jButton1.setVisible(false);”，片段就会停止工作 我目前在方法的开头使用 .setVisible(false) 并在最后使用 .setVisible(true) ，并且在仍然使用按钮时效果很好。如果我从 init() 中加载代码，则不会显示该表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T13:30:44.013

> 小程序加载后如何自动执行方法？

从（结束）`init()`方法调用它。

# c# - 通过引用传递标签

> ID：11760326
> 
> 赞同：0
> 
> 时间：2012-08-01T13:28:38.450
> 
> 标签：c#

我有一个简单的方法，我想传入一个标签。

现在通过我的阅读，任何基于对象类的东西都应该通过引用自动传递，所以这是我第一次尝试我的方法：

```
 public static void ValiateStepAsInt(String Step, int? Value, Label Error)
        {
            if (Value == null && Step != "")
            {
                Error.Text = "Error!!!";
                return;
            }
            Error.Text = "";
        } 
```

我没有得到任何编译器错误，但是每当我调用它时，它都会设置 Error.text，但是一旦它退出该方法，该值就会消失（所以不是真正通过引用传递）。

所以接下来我在标签错误中添加了“ref”选项；希望这可以解决问题，但仍然是同一件事，方法设置它，但一旦完成，这个值就会消失。

尝试通过引用传递标签时我缺少什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T13:29:46.803

您正在将`Text`属性重置为条件语句下方的空字符串。也许你想`Error.Text = "";`换成`else`.

如果不是这样，那么也许您也在其他地方设置了值，从而覆盖了您在此处向我们展示的方法中的更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T13:30:19.027

值不是因为这行代码而消失了吗：

```
Error.Text = ""; 
```

在方法返回之前，您将 Label 设置为空字符串。

也许你的意思是这样做：

```
public static void ValiateStepAsInt(String Step, int? Value, Label Error)
{
    if (Value == null && Step != "")
    {
        Error.Text = "Error!!!";
    }
    else
    {
        Error.Text = "";
    }
} 
```

# mysql - 我的 MySQL 创建表代码有什么问题？

> ID：11760328
> 
> 赞同：0
> 
> 时间：2012-08-01T13:28:45.350
> 
> 标签：mysql, web, phpmyadmin

为什么我会从此代码中收到此错误

```
CREATE TABLE `a9311211_AppBook`.`Requests` 
(
   `Name` VARCHAR( 15 ) UNSIGNED CHARACTER SET hp8 COLLATE hp8_bin NOT NULL ,
   `Category` BLOB UNSIGNED NOT NULL ,
   `Dificulty` FLOAT( 2 ) UNSIGNED NOT NULL ,
   `Discription` LONGTEXT UNSIGNED CHARACTER SET hp8 COLLATE hp8_bin NOT NULL 
) ENGINE = MYISAM CHARACTER SET hp8 COLLATE hp8_bin 
```

> MySQL 说：
> #1064 - 你的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1`Category`行的“UNSIGNED CHARACTER SET hp8 COLLATE hp8_bin NOT NULL, BLOB UNSIGNED NO”附近使用正确的语法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:31:06.687

去除那个`unsigned`

```
 CREATE TABLE `a9311211_AppBook`.`Requests` (
    `Name` VARCHAR( 15 ) CHARACTER SET hp8 COLLATE hp8_bin NOT NULL ,
    `Catagory` BLOB NOT NULL ,
    `Dificulty` FLOAT( 2 ) UNSIGNED NOT NULL ,
    `Discription` LONGTEXT CHARACTER SET hp8 COLLATE hp8_bin NOT NULL 
) ENGINE = MYISAM CHARACTER SET hp8 COLLATE hp8_bin 
```

只有数字类型可以`unsigned`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:47:48.447

它应该是：

```
`Catagory` BLOB NOT NULL 
```

`BLOB`不能是正数也不能是负数（*因为它不是数字*）。

# objective-c - 故事板中的 Push segue 过渡不适用于 iPad 应用程序

> ID：11760330
> 
> 赞同：2
> 
> 时间：2012-08-01T13:28:54.193
> 
> 标签：objective-c, ios5, xcode4

我正在尝试使用情节提要在两个视图控制器之间为 iPad 应用程序实现推送转场转换。我已经使用与 iPhone 应用程序相同的步骤完成了它，但是 push segue 不起作用，它只有在我使用模态转换时才有效。我是 iPad 开发的新手，所以我知道我遗漏了一些东西。

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T13:35:59.077

没有底层的`UINavigationController`.

你最初的看法是 a`UINavigationController`吗？还是segue的第一个视图至少是a `UINavigationController`？

# linux - 在 Linux 内核中进行 COW 复制？

> ID：11760337
> 
> 赞同：5
> 
> 时间：2012-08-01T13:29:16.717
> 
> 标签：linux, memory, copy-on-write

所以，我想知道 - 我将如何在内核中实现**复制**内存页面 ( ) 并利用**写时复制**机制而不是立即传输数据。`struct page`

 **现在，我通过将用户空间地址转换为页面来复制页面，使用`allocate_pages`内核分配所需数量的页面，使用复制它们`copy_pages`，最后使用`install_special_mapping`. 这可行，但我觉得这可以使用写时复制机制进行优化。**

# javascript - 如何使用 touchstart 和 touchend 手势获取滚动的当前位置

> ID：11760361
> 
> 赞同：5
> 
> 时间：2012-08-01T13:30:36.390
> 
> 标签：javascript, ios, webkit, mobile-safari

好的，我会尽力解释我正在努力做的事情。

使用 Webkit-overflow-scrolling 我正在创建一个具有可堆叠标题的列表，就像 iPhone 的联系人应用程序提供的效果一样。例如，“A”一直停留在顶部，直到“B”将其移开等。这在桌面上或用户仍在滚动时相对容易做到。

但是，一旦用户轻弹滚动条，它就会以缓慢的减速自行滚动，在此期间不会触发任何事件，直到滚动条完全停止，那时为时已晚。

经过大量研究，我发现轻弹减速持续时间始终相同（约 2.4 秒），只是结束位置发生了变化。我还可以看到很多人通过创建自己的库来模仿 iOS 行为来解决这个问题，这可能是我唯一的选择。

我正在尝试通过获取以下内容来计算元素的滚动顶部，因为它会自行滚动：

*   触摸起始位置
*   触摸结束位置
*   这两个手势的时间差

这应该允许我在它发生之前跟踪位置和最终结果。但是，我对如何正确使用这些信息来获得所需的结果有点困惑。任何信息或指针都会非常有帮助。

* * *

**编辑**

在被物理学困住后，我在[Physics stackexchange](https://physics.stackexchange.com/)上提问并收到了这个[答案](https://physics.stackexchange.com/questions/33323/end-position-of-movement-factoring-in-deceleration)

因此我相信这段代码应该可以工作。我想检查以确保我对其应用了正确的逻辑

```
var timeStart = new Date().getTime(); //Triggered on a touchstart event 
var timeEnd = new Date.getTime(); //Triggered on a touchend event 
var startY = event.originalEvent.targetTouches.pageY //Pulled in from different functions containing the events 
var endY = event.originalEvent.changeTouches[0].pageY //The where the touch starts and ends in px 
var timeElasped = timeEnd - timeStart; 
var distance = startY - endY; 
var velocity = distance/timeElasped; 
var result = velocity * (timeElasped - (1/4.8)*(timeElasped*timeElasped)) 
```

因此，结果应该等于触发最终滚动事件时 scrollTop 产生的结果。

* * *

**编辑 2**

可悲的是似乎不起作用。因此，我一定不能给出正确信息的公式。

不确定它是我正在接受的位置还是我如何执行公式。

* * *

**编辑 3**

我认为滚动速度确实每 325 毫秒降低 0.95 倍。我从这篇有用的[文章](http://ariya.ofilabs.com/2011/10/flick-list-with-its-momentum-scrolling-and-deceleration.html)中找到了这些信息。

> 这一观察使我相信动量滚动是一种指数衰减。它的特点是衰减的速度。有两种不同的表达方式：半衰期（还记得放射性衰变吗？）或时间常数。对于后者，它与一阶系统的阶跃响应非常相关。换句话说，减速系统只是一个过阻尼弹簧质量系统。事实证明，一切仍然基于物理学。

```
amplitude = initialVelocity * scaleFactor;
step = 0;

ticker = setInterval(function() {
    var delta = amplitude / timeConstant;
    position += delta;
    amplitude -= delta;
    step += 1;
    if (step > 6 * timeConstant) {
        clearInterval(ticker);
    }
}, updateInterval); 
```

> 事实上，这就是在 Apple 自己的 PastryKit 库（现在是 iAd 的一部分）中实现减速的方式。对于每个动画节拍，它会将滚动速度降低 0.95 倍（16.7 毫秒，目标为 60 fps）。这对应于 325 毫秒的时间常数。如果你是一个数学极客，那么显然你会意识到滚动速度的指数性质将产生位置的指数衰减。通过一点点涂鸦，最终你会发现 325 是 -16.7 / ln(0.95)。

这个[谷歌文档](https://docs.google.com/spreadsheet/ccc?key=0AsWoSGXwvajGdDMzUE42VU12X3FDVUNheFFRd3M1aHc)应该显示公式，希望我做得对。左边是标准公式。在右侧，我试图将速度降低 0.95（速度*0.95）。我从测试中添加了真实信息，以显示我遇到的问题。如果所有方程都正确并且逻辑正确，那么它一定是输入的数据。

* * *

**编辑 4**

经过许多痛苦的小时后，我得出结论，这是 Safari 移动版 webkit 中的一个错误。最好的选择是使用 JS 库来模拟效果并等到错误修复。

*   停止所花费的时间总是变化的主要原因，因此太多的变量会改变以获得准确的读数。

# algorithm - 时间单位交换 - 日、周、月之间的转换

> ID：11760365
> 
> 赞同：-1
> 
> 时间：2012-08-01T13:30:43.287
> 
> 标签：algorithm, time

我有 5 个时间单位，即：日、周、月、季度、年。

如何编写一个函数来计算 2 个时间单位之间的周期数？例如，

一个月中的天数 --> 应为 28、29、30 或 31 天，具体取决于月份。

一年中的天数 --> 应为 365 或 366 天，具体取决于年份是否为闰年。

一年中的月数 --> 12 个月。

一年中的季度数 --> 4 个季度。

一个月中的周数 --> 可能是 4 或 5 周。

ETC..

我知道我可以使用蛮力方法做到这一点。但是，有没有更好的方法来做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:32:20.373

日期、时间和日历计算很*困难*。

它们也比时间本身的黎明还要古老，那么为什么要重新发明轮子呢？如果 C++ 是您选择的语言，为什么不看看[Boost Date_Time](http://www.boost.org/doc/libs/1_50_0/doc/html/date_time.html)呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:41:07.640

从[这个](https://stackoverflow.com/questions/8294591/difference-in-seconds-between-two-dates?rq=1)函数开始计算两个日期/时间值之间的秒差。

现在，您只需添加从输入参数（一个时间单位中的两个时间点）到上述函数中使用的类型的转换，以及从“秒”到您想要的时间单位的另一个转换你的计算结果。

# matlab - 减少像素的局部邻域

> ID：11760370
> 
> 赞同：2
> 
> 时间：2012-08-01T13:30:54.650
> 
> 标签：matlab, image-processing, computer-vision

我最近遇到了一个我似乎无法解决的问题。我有一个经过处理的图像，其中包含多个像素，这些像素以小的“本地”组分布在整个图像中。我想找到每个组的“中心”，并在输出图像中放置一个像素作为每个组的代表。这些分组可以是一个紧密结合的组，它们之间没有像素零间距，也可以是一个较小的展开组，它们之间只有几个（小于 4~5 个像素）。我的第一个想法是使用类似于形态侵蚀的东西，但这并不能解释稍微分散的像素组的情况。我只想知道是否有人可以指出我正确的方向。以下是我想做的一个例子： ![本地组](../Images/8c44cf578eccf114443e868671e83320.png) 左侧图像显示输入（大黑点表示一组像素之间没有零），右侧图像是我想要的输出或处理图像类型的示例。最后，我使用的是 MATLAB，可以假设输入图像是二进制图像（黑色为 1 或 0，逻辑应该相同）。

非常感谢你的帮助！

编辑：感谢大家的投入 - 我将在接下来的一天左右尝试不同的解决方案，我会尝试在我完成后回复每个人。非常感谢你们富有洞察力的投入 - 非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:51:49.770

我推荐一种涉及形态闭合和连通分量分析的方法。请注意，我已经反转了问题，因此“好点”是高价值的，“坏点”是黑色的。这更符合形态操作的预期定义。

```
path = 'yourimage.png'
space = 5; % you can change this to make it accept bigger spacings

input = imcomplement(rgb2gray(imread(path))) > 0;
input = imclose(input, strel('disk', space));
[labels, num] = bwlabel(input, 8);
output = logical(zeros(size(input)));
for i = 1:num
   [r, c] = find(labels==i); 
   x = round(mean(c))
   y = round(mean(r))
   output(y,x) = 1;
end

imshow(output) 
```

结果如下所示：

![结果](../Images/9faae1b7a1f6bcc2f637288106b7c208.png)

在我看来，这就是你要找的东西！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T15:03:59.570

您所描述的问题通常称为[聚类或聚类分析](http://en.wikipedia.org/wiki/Cluster_analysis)。根据您的数据集和分析约束，这可能会非常困难。但是，在您的情况下，这很简单，因为您有一个硬阈值（5 像素）可供使用。

Aardvarkk 已经提出了一个很好的解决方案，但它并没有真正展示集群的过程。这是一种非常简单的方法，您可以对数据进行聚类并获得或多或少相同的结果。

1.  计算点之间的成对距离。对于 N 个点，这会产生一个 NxN 矩阵
2.  阈值矩阵
3.  遍历矩阵的行

每次迭代将如下所示：

*   如果`i`已经集群，继续
*   如果`i`不在集群中，则创建一个新集群并分配`i`给它
*   找到所有其他接近的点`i`（行`i`中等于 1 的列）
*   检查这些点是否已经在集群中
*   如果是，则设置`i`并且所有点都接近`i`最小集群 ID
*   如果没有集合并且所有点都`i`靠近集群`i``i's`

下面是我创建的一个简单示例：

```
%Generate random points
nPts = 300;
clustId = zeros(nPts,1);
clusterCount = 0;
x = randi(3, [1, nPts])*10+ randn(1, nPts);
y = randi(3, [1, nPts])*10 + randn(1, nPts);

%Compute the distance matrix  from http://goo.gl/8mAoC
dist = distance([x;y], [x;y]);

maxDist = 5;
binDist = dist <= maxDist;

for i = 1:nPts
    % if this point is already clustered skip it
    if clustId(i) ~= 0
        continue;
    end

    %if the current point isn't in a cluster, create a new cluster and add
    %the point to that cluster
    if clustId(i) == 0
        clusterCount = clusterCount+1;
        clustId(i) = clusterCount;
        fprintf('New point, creating cluster:%d\n', clusterCount);
    end

    % get the indices of the points that collide with the i
    idx = binDist(:,i);

    % check to see if idx contains points that already belong to another clustered
    % if it doesn't collisionIdx will be equal to i
    collisionIdx = idx & clustId>0;

    %get the smallest cluster from collisionIdx
    mergeClustId = min(clustId(collisionIdx));

    %assing all the original points to that cluster
    clustId(idx) = mergeClustId;
end 
```

只需遍历集群 ID 即可计算质心：

```
cx = [];
cy = [];
for i = 1:clusterCount
    idx = clustId == i;
    cx(i) = mean(x(idx));
    cy(i) = mean(y(idx));
end 
```

然后绘制结果：

```
figure; 
plot(cx,cy,'c.', 'markersize', 50); hold on;
plot(x,y,'.'); 
```

![在此处输入图像描述](../Images/64933d5eb2d2f97dad1871055b60d7c6.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T14:03:39.957

在这种情况下，您可以首先使用区域增长方法来连接聚集的像素，然后使用侵蚀。如果您知道集群之间的距离大于集群本身，那将是可行的。也许在区域增长后使用重心来确定每个斑点的中间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T07:14:48.283

正如 slayton 所指出的，这是一个聚类问题。

由于集群的分离非常清晰，您可以使用简单的基于图形的方法。如果您可以访问图形算法库（例如[boost::graph](http://www.boost.org/doc/libs/1_50_0/libs/graph/doc/index.html)，存在许多绑定），则以下方法应该非常简单：

1.  用边权重作为距离构建一个完整的点图。
2.  计算最小生成树，例如使用[Prims 算法](http://en.wikipedia.org/wiki/Prim%27s_algorithm)
3.  从树中消除超过长度阈值的边
4.  找出剩余的连通分量

# qt - SQLite 测试数据库是否退出。(Qt)

> ID：11760373
> 
> 赞同：0
> 
> 时间：2012-08-01T13:30:57.783
> 
> 标签：qt, sqlite

我在使用 SQLite 的 Qt 应用程序中有这个小代码片段：

```
 db.setDatabaseName("./good.db");
  if(!db.open())
    {
      QMessageBox m(QMessageBox::Critical,"Connection Error",db.lastError().text() );
      m.exec();
      exit(0);
    } 
```

问题是，如果我用不存在的文件（如 bad.db）替换 good.db，那么我不会收到错误消息。我想这是有道理的，因为我实际上可以将数据库创建为过程的一部分，也就是 CREATE TABLE。

我可以简单地测试文件是否存在，但这对我来说似乎是一种粗俗的方法。有什么方法（来自 Qt 和 libsqlite ）来测试数据库的存在吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:39:18.307

不访问数据库，如果它不存在`sqlite3_open`，甚至可能由后续调用创建。如果数据库不存在，则有一个选项强制返回`sqlite3_`错误`sqlite3_open_v2`。`SQLITE_OPEN_READWRITE`

# .htaccess - Htaccess 隐藏子文件夹

> ID：11760375
> 
> 赞同：1
> 
> 时间：2012-08-01T13:31:05.963
> 
> 标签：.htaccess, redirect, subdomain, forward

希望有人可以提供帮助。我试图隐藏子域 /submain/ 以便 www.website.com/home.php 将指向 www.website.com/submain/home.php 但只会显示 www.website.com/home.php。我尝试了一些不同的选项，但它要么破坏了我的 css 文件，要么页面不断循环。

还要提到我的 css 文件夹位于子主文件夹中。当我让代码工作时，这会一直中断。当前代码

```
#redirect to submain subdomain
RewriteEngine On
RewriteCond %{THE_REQUEST} ^GET\ /submain/
RewriteRule ^submain/(.*) /$1 [L,R=301]
RewriteRule !^submain/ submain%{REQUEST_URI} [L] 
```

我也想要相反，以便隐藏带有 submain 的 url 只显示 www.website.com

# xcode - MailCore 代码中缺少文件

> ID：11760378
> 
> 赞同：0
> 
> 时间：2012-08-01T13:31:07.463
> 
> 标签：xcode, frameworks, mailcore

我正在使用 MailCore 框架并准备一些基于 remail 的应用程序，因为我已经从链接[http://code.google.com/p/remail-iphone/](http://code.google.com/p/remail-iphone/)下载了开源代码， 但下载后我还运行了脚本更新。 sh 和 autogen.sh 来获取基本的库文件。但是这些文件在我的项目中丢失并以红色显示。

*   libetpan.framework
*   测试.octest
*   libmailcore.a

从哪里以及如何获取这些文件..或者我在提取库的过程中缺少什么..？请告诉我将 MailCore 集成到 remail 应用程序的过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T19:24:07.853

我相信你会想要使用 git submodule init 和更新。但我不知道 remail 的结构如何。你会想要重写它，因为它是一个非常糟糕的 OO 代码示例。但是，可能是因为 MailCore 现在的结构不同了。

我已经让这些库在最新的 XCode 上运行，老实说，你最好改用较新的库。不要将源代码基于 ReMail，除非您希望编写大量代码以使用已弃用的方法。

但是，MailCore 仍然很棒。它已经更新，任何阅读此内容的人都应该在 libmailcore 的站点上查看它。

# c# - C#中的删除对象

> ID：11760390
> 
> 赞同：0
> 
> 时间：2012-08-01T13:31:38.747
> 
> 标签：c#, .net

在 dotNET 中，我们可以编写非托管代码，我可以在哪里动态分配内存（通过关键字：stackalloc、new）、使用指针等。
可以释放内存（例如通过 C++ 中的 delete）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T13:39:19.467

这取决于您**如何**分配内存。

例如，如果您使用[AllocHGlobal](http://msdn.microsoft.com/en-us/library/5cyb68cy.aspx)分配内存：

```
double* vertices = (double*)Marshal.AllocHGlobal(
                          3 * count *  Marshal.SizeOf(typeof(double))); 
```

您分配给定大小的双精度数组。

在您必须调用[FreeHGlobal后释放该内存](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.freehglobal.aspx)

```
 Marshal.FreeHGlobal((IntPtr)vertices); 
```

还有其他用于分配 COM 任务内存的函数，例如

[AllocCoTaskMem](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.alloccotaskmem.aspx)和相关[的 FreeCoTaskMem](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.freecotaskmem.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-01T13:33:49.993

尝试使用此代码以释放

```
Marshal.FreeHGlobal((IntPtr)vertices); 
```

# html - 表格未在 Outlook 上以正确的形式显示

> ID：11760391
> 
> 赞同：1
> 
> 时间：2012-08-01T13:31:39.153
> 
> 标签：html, email, outlook, abap, alv

我有一个显示一些数据的 ABAP ALV。我需要将输出的 ALV 发送到电子邮件。目前，它适用于所有已发送的电子邮件，Outlook 除外。有人告诉我，我需要在 ABAP 的标签中使用一些东西。这是代码：

```
loop at gt_email into ls_email.
      clear: v_mensagem,  it_message[].
* begin of GC - 26.07.2012
      concatenate
        '<html><head><table border="1">'
        '<tr>'
        '<td>Código de Material</td>'
        '<td>Descrição</td>'
        '<td>Depósito</td>'
        '<td>Stock Actual</td>'
        '<td>Stock Mínimo</td>'
        '<td>Stock Máximo</td>'
        '<td>Necessidade</td>'
        '<td>Stock LPO</td>'
        '</tr>'
        into v_mensagem. 
```

谢谢您的帮助！

这是发送电子邮件的函数：

```
 call function 'SO_DOCUMENT_SEND_API1'
          exporting
            document_data              = gd_doc_data
            put_in_outbox              = 'X'
            sender_address             = c_emissor
            sender_address_type        = 'INT'
            commit_work                = 'X'
          importing
            sent_to_all                = gd_sent_all
          tables
            packing_list               = it_packing_list
            contents_txt               = it_message
            receivers                  = it_receivers
          exceptions
            too_many_receivers         = 1
            document_not_sent          = 2
            document_type_not_exist    = 3
            operation_no_authorization = 4
            parameter_error            = 5
            x_error                    = 6
            enqueue_error              = 7
            others                     = 8. 
```

我相信这是一个标准的 sap 功能。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:01:24.523

您必须为自己将消息的正文分成单独的行，否则系统会在途中的某个地方引入硬换行符，并且它不会关心不破坏 HTML 标签。这真的很讨厌 - 我宁愿发送一封带有简单文本正文的邮件，上面写着“请检查附件”并将 HTML 文件附加到邮件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T00:44:13.667

Eva v_mensagem 似乎是您电子邮件的正文。因为它很可能是一个字符串，所以你不会在那里有标签。

您如何发送电子邮件（哪个类/功能）？可能有一个工作区组件，您需要在将其传递给函数导入参数之前对其进行填充。

# ruby-on-rails - 您如何设置 rsyslog 来过滤通过排水管发送的 heroku 日志？

> ID：11760399
> 
> 赞同：3
> 
> 时间：2012-08-01T13:32:15.890
> 
> 标签：ruby-on-rails, logging, heroku

我想将我的 heroku 日志发送到远程 linux 机器，并将它们过滤到 /var/log/ 中自己的单独文件中

在heroku方面，我发出了这个命令：

```
heroku drains:add syslog://my_linux_ip:514 
```

在我的 ubuntu 机器上，我编辑了**/etc/rsyslog.conf**并取消了这些行的注释：

```
# provides TCP syslog reception
$ModLoad imtcp
$InputTCPServerRun 514 
```

现在我将在**/var/log/messages中看到 heroku 日志输出**

它被标记为主机名**d.d423cb4b.......**

如何获取要在**/var/log/heroku**中收集的所有 heroku 消息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T13:35:22.497

只需将此行添加到您的**rsyslog.conf**

```
if $hostname startswith 'd.d423cb4b' then /var/log/heroku
& ~ 
```

显然，您需要将**d.d423cb4b**与您在自己的日志中观察到的实际主机名匹配。

**& ~**行指示 rsyslog 不要将此输出复制到任何其他日志中。因此，您应该在 /var/log/heroku 中看到您的输出，而其他任何地方都没有。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-08-07T10:24:40.723

您可以使用这些输入根据测功机过滤他们的日志

测功机 ID--d.2a2f9970-dc14-43d8-b893-26a70293c437

```
hostname, contains, "d.2a2f9970-dc14-43d8-b893-26a70293c437" /var/log/heroku/appname/appname_all.log
if ($hostname contains 'd.2a2f9970-dc14-43d8-b893-26a70293c437' and $syslogtag contains 'heroku[web.1]') then /var/log/heroku/appname/appname_Memory_cpu_dyno1.log
if ($hostname contains 'd.2a2f9970-dc14-43d8-b893-26a70293c437' and $syslogtag contains 'heroku[web.2]') then /var/log/heroku/appname/appname_Memory_cpu_dyno2.log
if ($hostname contains 'd.2a2f9970-dc14-43d8-b893-26a70293c437' and $syslogtag contains 'heroku[web.3]') then /var/log/heroku/appname/appname_Memory_cpu_dyno3.log
if ($hostname contains 'd.2a2f9970-dc14-43d8-b893-26a70293c437' and $syslogtag contains 'heroku[web.4]') then /var/log/heroku/appname/appname_Memory_cpu_dyno4.log
if ($hostname contains 'd.2a2f9970-dc14-43d8-b893-26a70293c437' and $syslogtag contains 'heroku[router]') then /var/log/heroku/appname/router_appname.log 
```

# c# - 分辨率更改后隐藏的动画窗口是透明的

> ID：11760400
> 
> 赞同：1
> 
> 时间：2012-08-01T13:32:17.110
> 
> 标签：c#, wpf, animation

我正在为窗口的不透明度设置动画

...

```
 DoubleAnimation myDoubleAnimation =
          new DoubleAnimation(1.0, 0.0, new Duration(TimeSpan.FromSeconds(0.25)), FillBehavior.Stop);
  Storyboard.SetTargetName(myDoubleAnimation, "wndNumpad");
  Storyboard.SetTargetProperty(myDoubleAnimation, new PropertyPath(Window.OpacityProperty));
  m_fadeOut = new Storyboard();
  m_fadeOut.Children.Add(myDoubleAnimation);
  m_fadeOut.Completed += new EventHandler(FadeOut_Completed); 
```

...

```
private void FadeOut_Completed(object sender, EventArgs e)
{
  //  Only hide the running instance
  this.Visibility = System.Windows.Visibility.Hidden;
  // this.Close();
} 
```

如果在 FadeOut_Completed() 运行后更改了监视器的屏幕分辨率，即窗口的不透明度被动画化并且窗口被隐藏。然后重新显示窗口将显示几乎透明的窗口。猜测我会说它在隐藏窗口时具有的不透明度，尽管 Window.Opacity 属性声称不透明度为 1。如果我不设置动画，而只是将不透明度设置为 0 并隐藏窗口并在分辨率更改后将不透明度设置回 1 窗口按预期重新显示。我还尝试在 FadeOut_Completed 中将不透明度设置回 1。

有谁知道发生了什么以及如何避免这个问题？

问候马库斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:39:12.397

您必须有一个透明窗口 ( `AllowsTransparency="True"`)、不可调整大小 ( `ResizeMode="NoResize"`) 且没有边框 ( `WindowStyle="None"`)。在 C# 代码中，我创建了一个`DoubleAnimation`更改窗口不透明度的方法，完成后，窗口将关闭。

XAML 代码：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" Background="Red" WindowStyle="None" AllowsTransparency="True" ResizeMode="NoResize">
    <Grid>

    </Grid>
</Window> 
```

C#代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Windows.Media.Animation;

namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            DoubleAnimation da = new DoubleAnimation();
            da.From = 1;
            da.To = 0;
            da.Duration = new Duration(TimeSpan.FromSeconds(2));
            da.Completed += new EventHandler(da_Completed);
            this.BeginAnimation(OpacityProperty, da);
        }

        void da_Completed(object sender, EventArgs e)
        {
            this.Close();
        }
    }
} 
```

# android - 多个设备的相同数据库

> ID：11760406
> 
> 赞同：3
> 
> 时间：2012-08-01T13:32:36.657
> 
> 标签：android, android-sqlite

我需要在**第一次启动**时让我的应用程序更快。目前，我使用解析的**JSON**文件，并在首次启动时将数据插入数据库。问题是这可能需要很长时间（Samsung spica :/），因为数据量很大。

我正在考虑另一种方法来做到这一点。我将有 2 个应用程序，一个生成第一个**sqlite db**，我将其复制到我的主应用程序的资源中。因此，我**不再需要嵌入我的 JSON 文件，而是嵌入我的数据库**。我知道这是可能的，而且我知道该怎么做。

**问题是**：数据库可以根据设备或 android API 版本而有所不同吗？如果我复制这个数据库，每个设备都会有精确的副本，所以这是一个问题，**数据库是否存在与 X 设备/API 版本不兼容的风险**（我也在谈论一些喜欢制作的构造函数一些变化） ？

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:41:33.493

您可能想要使用“较新”版本的 SQLite 中引入的一些功能。例如，在 SQLite 版本 3.6.19（API 级别 8，Froyo）中引入了外键支持，但所有版本的 Android 都支持触发器 afaik。

因此，如果您的数据库中有外键约束，它们将无法在 API 级别 <8 的 Android 上运行。

我认为没有其他区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T10:43:33.570

我认为如果您使用 sqlite 3.0（所有设备中使用的最低版本）不会有任何重大区别。但是，如果您使用 SQLite 版本 3.6.19 的功能（例如外键等），它们将无法在运行版本 3.0 的设备中运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T14:56:26.497

如果数据没有改变，您可以使用包含所有数据的 xml 文件（或 json）。在第一次启动时，使用 AsyncTask 填充您的 sqlite 数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T05:29:28.583

我有一个想法来加快处理速度，但以下标准应该满足您的要求

1）你的数据库是静态的吗？

2）或者它是动态的，修改你的数据库来修改行。

如果您的数据库是动态的，请首先使用应用程序预加载数据库，并在服务器发生更改时更新您的数据库。

我想它可能会帮助你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T09:32:59.177

我有一个项目，它执行以下操作： - 在启动时（或按下刷新按钮），它会检查 wcf 服务中的新数据（4 个表，大约 1600-2000 个表条目总和）。- 该服务为每个表生成 cvs 文件并压缩数据（gzip） - android 应用程序下载压缩文件并提取其中的数据 - 之后，它处理 csv 文件 整个过程大约需要 2 秒（包括下载）在较旧的设备（1 核，1GHz）上。

我建议你，为你的任务使用服务在后台为你完成工作，如果我是你，我会使用 cvs 而不是 JSON，因为 JSON（据我所知）在你使用时会更慢有很多数据。

在服务中运行信息处理和插入数据库有一些重要的优势： - 如果用户按下主页键，服务可以在后台继续工作 - 您仍然可以向用户显示进度对话框以让他/她知道您的应用程序正在运行 - android 可以在不同的进程上运行服务，所以如果您的主应用程序完全被杀死（由用户或系统在需要其他内存时），所以这样你仍然可以做你的数据库的东西。- 在不同进程中运行的缺点是 - 那是另一个虚拟机，因此它消耗更多内存 - 可能会导致数据库访问出现问题，但由于您只会在第一次运行时使用它来填充数据库，所以没关系您可以阅读更多相关信息这里（安卓：进程）：[http://developer.android.com/guide/topics/manifest/service-element.html#proc](http://developer.android.com/guide/topics/manifest/service-element.html#proc)

**总结** - 使用 cvs 而不是 json - 使用服务来填充数据库 - 如果您使用不同的流程服务（从表中选择 count(*) 并检查它是否与db 中的预期行数）。

# .net - 我如何使用.net捕获腻子中发生的异常

> ID：11760410
> 
> 赞同：0
> 
> 时间：2012-08-01T13:32:54.613
> 
> 标签：.net, c#-3.0

**我如何使用.net捕获腻子中发生的异常**

我正在做的是使用 .net 代码将一些 shell 脚本文件发送到 putty 现在我想捕获脚本文件中发生的任何错误并使用我的 .net 代码处理它。知道如何做到这一点

```
`try
        {
            StringBuilder outputBuilder = new StringBuilder();
            //outputBuilder = null;
            string CommandSetFileName = "D://POC.txt";
            Process objProcess = new Process();
            //objProcess.StartInfo.FileName = "putty.exe";
            //objProcess.StartInfo.Arguments = txtUserName.Text.Trim() + "@" + txtIP.Text.Trim() + " -pw " + txtPassword.Text.Trim() + " -m " + CommandSetFileName;

            ProcessStartInfo objInfo = new ProcessStartInfo();
            objInfo.FileName = "putty.exe";
            objInfo.Arguments = txtUserName.Text.Trim() + "@" + txtIP.Text.Trim() + " -pw " + txtPassword.Text.Trim() + " -m " + CommandSetFileName;
            objInfo.UseShellExecute = false;
            objInfo.RedirectStandardError = true;
            objInfo.RedirectStandardOutput = true;
            objInfo.RedirectStandardInput = true;
            objProcess.StartInfo = objInfo;

            objProcess.EnableRaisingEvents = true;
            // attach the event handler for OutputDataReceived before starting the process 
            objProcess.OutputDataReceived += new DataReceivedEventHandler(delegate(object sender, DataReceivedEventArgs e)
                {         // append the new data to the data already read-in         
                    outputBuilder.Append(e.Data);
                }
                    );

            objProcess.Start();

            objProcess.BeginOutputReadLine(); 
            objProcess.WaitForExit(); 
            objProcess.CancelOutputRead();  // use the output 
            string output = outputBuilder.ToString(); 

            //string output = objProcess.StandardOutput.ReadLine();
            objProcess.WaitForExit();

            string error = objProcess.StandardError.ReadLine();

            objProcess.WaitForExit();
        }
        catch (Exception e)
        {
            MessageBox.Show("Unable to connect UNIX", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            return;
        }` 
```

这是我正在使用的代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:35:24.277

如果您想捕获**发送/复制**时可能发生的任何错误，您可以尝试以下操作：（我对腻子不太熟悉）

```
try
{
  //Send scripts
}
catch(Exception ex)
{
  //Handle error
}
finally
{
  //Cleanup resources if necessary
} 
```

**注意：建议捕获特定的异常类型而不是`Exception`，上面的代码只是一个示例。**

如果您想处理脚本**执行**期间发生的错误，那么上面的代码可能没有帮助。

你能提供任何进一步的信息吗？

# hibernate - Spring MVC 和 Mongo DB 交互的 ORM 选择

> ID：11760412
> 
> 赞同：1
> 
> 时间：2012-08-01T13:32:58.060
> 
> 标签：hibernate, mongodb, spring-mvc, morphia

我有一堆我已经解析成离散字段的 XML 文件。我编写了一个 Spring MVC 应用程序，它显示解析的字段。不，我想要一个可以将这些字段发送到 MongoDB 并在 Spring MVC 上查询数据库的 ORM应用端。我浏览了 ORM，但想了解您对使用哪个 ORM 将 SpringMVC 应用程序与 MongoDB 集成的意见，无论是 Morphia 还是 Java Mongo 驱动程序，还是 Hibernate 可以与 MongoDB 一起使用？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:30:22.150

我在生产环境中使用过 Morphia，如果你有基于 maven 的构建，它很容易包含在内。只需将此片段添加到您想要的构建中：

[http://code.google.com/p/morphia/wiki/Dependencies#Through_Maven](http://code.google.com/p/morphia/wiki/Dependencies#Through_Maven)

但是使用它后，我会说如果我可以再次使用它，那么我将使用 Spring Data（它支持 Mongo）或使用良好的基本 DAO 模式直接使用本机 Mongo 驱动程序。

我的理由如下： 1) Morphia 不像以前那么活跃。2) O/R 映射器在开始时很棒，但您会遇到许多您希望拥有的新功能。例如，一种常见的做法是，当您的数据模型发生变化时，您希望在使用新字段读取旧行时升级它们。使用本机驱动程序非常简单，但一旦抽象它就不是那么简单了。3) Morphia 也有一个已知问题（可能是设计决策），它会与主要父级一起拉取 ref 集合。例如，对于拥有邮箱的用户对象，它会提取他的所有消息并导致许多性能问题。你可以通过延迟加载模式来解决这个问题，但从长远来看又会遇到更多麻烦。

我的建议： 1) 如果你必须使用 O/R 映射器并且你已经在 Spring 为什么不使用 Spring Data，它周围有一个更大的开发者社区（和一家大公司）。2）如果您正在构建一个更大的项目，请使用本机驱动程序。

对于较小的项目，Morphia 仍然是一个不错的选择，并且确实为开发人员带来了良好的生产力提升。请记住它的缺点。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:35:59.070

如果您已经在使用 Spring，那么[Spring Data - MongoDb](http://www.springsource.org/spring-data/mongodb/) 是更好的选择。

# html - Ooyala 播放器 setembedcode

> ID：11760413
> 
> 赞同：1
> 
> 时间：2012-08-01T13:33:00.800
> 
> 标签：html, ooyala

我试图在我的代码中实现 Ooyala 的播放器，有人告诉我，如果我想使用按钮来切换视频播放器的内容，那么我应该使用 setEmbedCode 函数，但他们在他们的网站上提供的示例不是很清楚。

我想要发生的只是有一个链接，单击该链接会将视频更改为不同的 URL/嵌入代码。我试过使用'setQueryStringParameters'

```
document.getElementById('video-player'+pageNum).setQueryStringParameters({embedCode:videoURL}) 
```

我得到的只是：

> '不是功能消息。

```
var url = 'http://player.ooyala.com/player.js?embedCode='+videoURL+'&amp;targetReplaceId=video-player'+pageNum+'';
var tempScript = document.createElement('script');
tempScript.type = 'text/javascript';
tempScript.src = url; 
```

当我调用它时，它可以很好地创建视频播放器，但我不确定如何在创建后更改嵌入代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:46:09.503

从 ooyala 站点检查此示例代码。“SwitchMovie”将播放具有不同嵌入代码的不同视频。

[http://demo.ooyala.com/product-demos/playerScripting-demo.html](http://demo.ooyala.com/product-demos/playerScripting-demo.html)

```
document.getElementById('player').setQueryStringParameters({embedCode:'8wNTqa-6MkpEB1c7fNGOpoSJytLptmm9',hide:'share,fullscreen'}) 
```

**更新：**

以下代码非常适合我。试试吧，正如我在下面的评论中提到的，如果你需要与播放器交互，你需要一个回调函数。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Swap Video</title>
</head>
<body>
<script src="http://player.ooyala.com/player.js?callback=receiveOoyalaEvent&playerId=player&width=480&height=360&embedCode=llMDQ6rMWxVWbvdxs2yduVEtSrNCJUk1&version=2"></script>
<script>
function receiveOoyalaEvent(playerId, eventName, eventArgs) {
}
</script>
<br><br>
<button onclick="document.getElementById('player').setQueryStringParameters({embedCode:'8wNTqa-6MkpEB1c7fNGOpoSJytLptmm9',hide:'share,fullscreen'})">Switch Movie</button>
</body>
</html> 
```

# c# - 如何停止 Page.DataBind() 的递归调用？

> ID：11760415
> 
> 赞同：1
> 
> 时间：2012-08-01T13:33:01.750
> 
> 标签：c#, asp.net, .net, asp.net-4.0

我的代码隐藏中有一个公共属性，我想将它绑定到 .aspx 页面中的控件。如果我使用`Page.DataBind()`它，但我不想使用它，因为这会导致递归数据绑定到所有控件。

即使 Page.DataBind() 有一个重载的方法，它接受布尔值，指示我是否要递归调用它，这将是一个更好的选择，但目前它只会由于递归而降低性能。

我唯一的目标是将我的代码隐藏页面中的公共/受保护属性绑定到我的 .aspx 页面。有没有更好的选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T13:47:06.270

我猜你的绑定代码有点像

```
<%# MyProperty %> 
```

仅当您调用时才会发生这种绑定`Page.DataBind()`，但如果您编写：

```
<%= MyProperty %> 
```

那么你不必打电话`Page.DataBind()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T12:35:52.970

接受的答案适用于简单显示值，但不适用于在服务器标签中使用数据绑定值，例如

```
<asp:Literal Visible='<%# IsNewApplication %>' runat="server">New Application</asp:Literal> 
```

我发现解决这个问题的唯一方法是使用`PlaceHolder`控件来隔离可绑定标签块，然后`DataBind()`在`PlaceHolder`.

由您决定这是否比仅在代码中设置可见性更难看/合适！

# javascript - 用 jQuery 替换输入值 .val()

> ID：11760418
> 
> 赞同：0
> 
> 时间：2012-08-01T13:33:07.190
> 
> 标签：javascript, jquery

所以基本上这里是我的 jsFiddle - [http://jsfiddle.net/CmNFu/](http://jsfiddle.net/CmNFu/)。

和代码也在这里 -

HTML -

```
<b style="float: left; margin-right: 10px;">category 1</b><input type="checkbox" value="category1" style="float: left;" class="portfolio-category" /><br />
<b style="float: left; margin-right: 10px;">category 2</b><input type="checkbox" value="category2" style="float: left;" class="portfolio-category" /><br />
<br />
<br />
<input type="text" name="categories" id="portfolio-categories" />​ 
```

jQuery -

```
jQuery(document).ready(function() {
    jQuery(".portfolio-category").click(function() {
        if(jQuery(this).is(":checked")) {
            jQuery("#portfolio-categories").val(jQuery("#portfolio-categories").val()+" "+jQuery(this).val());
        }
        else {
            var portfolioCategories = jQuery("#portfolio-categories").val();    
            alert("before + "+portfolioCategories);
            var currentElement = jQuery(this).val()+" ";
            alert(currentElement);
            portfolioCategories = portfolioCategories.replace(currentElement, "");
            alert(portfolioCategories);
        }
    });
}); 
```

​嗯，基本上我想要实现的是，当用户选中复选框时，值会自动添加到输入字段中（完成，它正在工作，哇！），但问题是当它取消选中复选框时，值应该从输入框（问题从这里开始），它不会删除任何东西。您可以看到我尝试将 val() 函数分配给变量，但也没有成功。检查我在 jsFiddle 上的示例以查看它。

有什么建议么？我猜 replace() 不适用于 val()，是吗？

那么，还有其他建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T13:40:02.137

我会这样做：

```
jQuery(document).ready(function() {
    jQuery(".portfolio-category").on('change', function() {
        var string = "";
        $('input[type="checkbox"]').each(function() {
            var space = string.length>0?' ':'';
            string += this.checked?space+this.value:'';
        });
        $("#portfolio-categories").val(string);
    });
}); 
```

[**小提琴**](http://jsfiddle.net/CmNFu/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T13:40:04.193

您对输入框中的空格有很大的问题。但我们稍后会谈到。

首先，这会起作用（如果不是因为空间问题）：

在最后一个警报之前添加此行：

```
 jQuery("#portfolio-categories").val(portfolioCategories); 
```

这会起作用，但并非总是如此，因为您附加的最后一个元素后面没有空格。

但是如果您将第 4 行更改为：

```
jQuery("#portfolio-categories").val(jQuery("#portfolio-categories").val()+jQuery(this).val()+" "); 
```

它会起作用，因为它在每个元素之后添加空格，而不是之前。

[http://jsfiddle.net/CmNFu/5/](http://jsfiddle.net/CmNFu/5/)

您的问题是您更改了变量中的值：`portfolioCategories`，但您没有更新输入本身。（注意，改变一个字符串的值，不会改变它最初来自的输入的值）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T13:46:35.217

您需要将字符串portfolioCategories 插入回输入中。空间也产生了很多问题。您可以使用 $.trim(str) 从字符串中删除任何前导和尾随空格。使用有效的解决方案更新了您的小提琴。

[http://jsfiddle.net/CmNFu/11/](http://jsfiddle.net/CmNFu/11/)

希望这可以帮助。

# c++ - 在 C++ 中查找重复文件的最佳方法是什么？

> ID：11760420
> 
> 赞同：4
> 
> 时间：2012-08-01T13:33:09.683
> 
> 标签：c++, algorithm, file

我想在 C++ 文件系统上查找重复文件。有没有算法可以尽可能快地做到这一点？我是否需要创建一个多线程应用程序，或者我可以只使用一个线程来完成它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-01T13:52:30.267

我同意 Kerrek SB 的观点，即有比 C++ 更好的工具，但是，假设您确实需要在 C++ 中执行此操作，这里有一些建议和在您的实现中需要考虑的事项：

1.  使用 boost::filesystem 进行可移植文件系统遍历

2.  散列每个文件的建议是非常合理的，但首先制作一个文件大小是关键的多图可能更有效。然后仅在存在重复大小的文件时应用哈希。

3.  决定如何处理空文件和符号链接/快捷方式

4.  决定如何处理特殊文件，例如在 unix 上，您有目录 fifos、套接字等

5.  考虑到在您的算法运行时文件或目录结构可能会更改、消失或移动的事实

6.  考虑到某些文件或目录可能无法访问或损坏的事实（例如递归目录链接）

7.  使线程数可配置，因为有意义的并行化量取决于底层磁盘硬件和配置。如果您使用的是简单的硬盘驱动器与昂贵的 san，情况会有所不同。但是，不要做出假设；测试一下。例如，Linux 非常擅长缓存文件，因此您的许多读取将来自内存，因此不会阻塞 i/o。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-01T13:36:06.473

1) 不要使用 C++。您需要的所有工具都已经存在。

2) 散列每个文件（例如使用`md5sum`）并建立文件名、文件大小和散列值的索引。*

3) 按散列值排序并寻找重复的散列值和大小对（例如用`sort`）。

`diff`4）对候选副本做一个普通的。

您可以通过一些工作将步骤 2) 并行化，但您会受到存储的 I/O 速度的限制。您可以并行化第 3 步），方法是将您的大型索引文件拆分为多个位，分别对它们进行排序，然后将它们合并（`sort -m`）。

*) 正如@frankc 所说，实际上不要散列*每个*文件，而只散列那些大小不唯一的文件。从基于*大小*的索引开始。你必须散列很多小文件，但只有很少的大文件。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-01T13:37:54.373

我会这样做：

*   扫描您感兴趣的目录，查看每个文件的大小；将文件大小/路径对存储在 a`multimap`中，以文件大小为索引；
*   然后，扫描`multimap`每个键只有一个元素的桶，即大小唯一的文件；那些肯定不能重复。
*   对剩余文件的内容进行哈希处理，并执行与以前相同的操作（`multimap`将哈希作为键，将路径作为值）。
*   然后仅对具有相同散列的文件执行真实（每个字节）比较。

这个过程应该比盲目地散列所有文件要快得多，因为大多数文件都有不同的大小，并且可以通过查看来区分；并且检查文件大小比散列文件便宜得多，因为它只是文件系统属性查找而不是读取文件的全部内容。

需要最后一步，因为不同的文件可能具有相同的哈希值；但是对于良好的散列函数，大部分工作已经完成，因为不相关文件的散列冲突应该非常罕见。

请注意，您的散列函数不需要加密安全，也不需要特别快（我想这个过程的时间将由 IO 控制）。

此外，由于您实际上不需要排序容器，因此`multimap`您可以使用 an而`unordered_multimap`不是`reserve`最大数量的元素，避免重新分配。

# c# - 使用 C# lambdas 组合 List 和整数

> ID：11760423
> 
> 赞同：1
> 
> 时间：2012-08-01T13:33:21.860
> 
> 标签：c#, lambda

我有以下 Pair 对象列表：

```
var listOfPairs = new List<Pair<int, List<int>>>() {
    new Pair<int, List<int>>(30, new List<int>() {3, 6, 9}),
    new Pair<int, List<int>>(40, new List<int>() {4, 8, 12})
}; 
```

我想最终得到以下整数列表：

```
listOfPairs[0] = {30, 3, 6, 9};
listOfPairs[1] = {40, 4, 8, 12}; 
```

我尝试了很多看起来像这样的摆弄，但无济于事：

```
var flattenedListOfPairs = listOfPairs.Select(pair => new List<int>(pair.First).AddRange(pair.Second)); 
```

我认为我正在尝试做的事情是可能的，而我只是错过了一些东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T13:39:19.250

听起来你可能想要这样的东西：

```
var flattened = listOfPairs.Select(pair => new[] { pair.First }.Concat(pair.Second)
                                                               .ToList())
                           .ToList(); 
```

或者：

```
var flattened = listOfPairs.Select(pair => Enumerable.Repeat(pair.First, 1)
                                                     .Concat(pair.Second)
                                                     .ToList())
                           .ToList(); 
```

或使用[MoreLINQ](http://morelinq.googlecode.com)

```
var flattened = listOfPairs.Select(pair => pair.Second.Prepend(pair.First)
                                                      .ToList())
                           .ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T13:40:58.147

这会以您指定的形式为您提供列表列表：

```
listOfPairs.Select(p => new []{ p.First }.Concat(p.Second).ToList()).ToList() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T13:47:21.127

其他答案已经涵盖了如何做到这一点，所以我不会在这里重复。这个答案是为了解释为什么您现有的代码不起作用。您希望将一个 int 传递给 List 构造函数，并让它用该 int 初始化 List。这不是构造函数的工作方式。List 构造函数使用 int 参数来设置列表的初始大小，而不是设置任何项目的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T13:48:21.483

试试这个：

```
var flattenedListOfPairs = listOfPairs.Select(pair => 
                                                  {
                                                      var list = new List<int>(pair.First);
                                                      list.AddRange(pair.Second));
                                                      return list;
                                                  }.ToList(); 
```

# excel - 在 MS-EXCEL 中输入带有时间戳的日期

> ID：11760425
> 
> 赞同：0
> 
> 时间：2012-08-01T13:33:28.460
> 
> 标签：excel, datetime

我正在使用 CONCATENATE 函数对单元格中的数据进行分组，我必须在其中包含日期和时间戳。我需要在我的数据库中运行一些批次的数据作为我日常工作的一部分。我最重要的是需要日期和时间戳，因为这将有助于最大限度地减少我的工作量。

数据单元 A3：2012-07-31 18:00:00 单元 B3：（521976、521977、521978、521979） 公式：=CONCATENATE("update tbl_content_master set start_date='",A3,"' where content_id in ",B3 ,";") 结果：更新 tbl_content_master set start_date='41121.75' where content_id in (521976, 521977, 521978, 521979);

ISSUE FROM FORMULA start_date='",A3,"' ie 2012-07-31 18:00:00 (date with time stamp) FROM RESULT start_date='41121.75' ie 41121.75 (decimal format)

目前结果：更新 tbl_content_master 设置 start_date='41121.75' 其中 content_id 在（521976、521977、521978、521979）；

要求的结果：更新 tbl_content_master 设置 start_date='2012-07-31 18:00:00' 其中 content_id 在（521976、521977、521978、521979）；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T19:34:14.523

使用 TEXT 函数：TEXT( *cell w/date* , " *format string* ")

```
=CONCATENATE("update tbl_content_master set start_date='",TEXT(A3,"YYYY-mm-dd hh:mm:ss"),"' where content_id in ",B3,";") 
```

# c# - 从机器名中删除域名

> ID：11760428
> 
> 赞同：0
> 
> 时间：2012-08-01T13:33:42.890
> 
> 标签：c#

有没有一种安全的方法可以从 C# 中的机器名称中删除域名？

**例子：**

*MYMACHINE.mydomain.com*

应该解决

*机器*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T13:35:21.677

朴素的字符串方法：

```
string fullName = "MYMACHINE.mydomain.com";
string resolvedMachineName = fullName.Split('.')[0]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T13:37:03.867

如果您想对机器名称进行“基本”理解，请使用：

```
Environment.MachineName 
```

它提供不带域的机器名称（传统`COMPUTERNAME`上是命令提示符下的变量）。请参阅：http: [//msdn.microsoft.com/en-us/library/system.environment.machinename.aspx](http://msdn.microsoft.com/en-us/library/system.environment.machinename.aspx)

* * *

**编辑＃1**
@Antineutrino - 当我重新阅读我的答案时，我意识到我们没有足够的信息来给你一个正确的答案。但是，当您说“机器名称”时，不清楚您是想知道如何解析您拥有的字符串，还是想知道如何以正确的方式检索您想要的内容。如果您只是想知道如何解析字符串，那么其他答案都是正确的。另一方面...

*   您想要 NetBios 名称还是集群名称？然后`Environment.MachineName`

*   您想要运行集群的机器的底层名称吗？您需要[深入研究 WMI 类](http://learningpcs.blogspot.com/2009/09/wmic-get-active-cluster-machine-name.html)。

*   您想要解析到当前机器的所有 DNS 字符串中最具体的名称吗？即来自 web1.mysite.com 的 web1？您需要[解析绑定到机器的所有 IP](https://stackoverflow.com/questions/5271724/get-all-ip-addresses-on-machine)。

如果您返回并使用更多详细信息编辑/修改您的问题 - 您将获得更好/更具体的答案。

* * *

**编辑#2**
如果我理解正确，您的场景如下：您有类似的代码在桌面环境中的客户端和服务器计算机上运行。在所有机器注册表中，您都保存了服务器的 DNS 名称 (server.myapp.com)。现在在代码中你想确定一台机器是否是服务器。

*你的要求*

```
string serverName     = Registry.GetValue(REG_KEY, REG_VALUE, "key missing");
string currentMachine = Environment.MachineName;

if (currentMachine.ToLower()  == serverName.ToLower().Split('.')[0] ) {
    //do something fancy
}; 
```

*另一个想法*
您可以增大机器名称，而不是缩小服务器名称。

```
string serverName     = Registry.GetValue(REG_KEY, REG_VALUE, "key missing");
string currentMachine = Environment.MachineName + 
                         Environment.GetEnvironmentVariable("USERDNSDOMAIN");

if (currentMachine.ToLower()  == serverName.ToLower() ) {
    //do something fancy
}; 
```

*你**可能**想要什么*

分发注册表项似乎有点麻烦。如果是我，我可能会做以下一项/一些/多项：

1.  创建不同的构建配置并使用[预处理器指令](http://msdn.microsoft.com/en-us/library/4y6tbswk.aspx)来更改代码。大致如下：`#if(RELEASE_SERVER) { /*do server code*/} #if(RELEASE_CLIENT) { /*do server code*/}`

2.  使用 app.config ---这就是存储配置数据的地方。无需污染注册表。app.config[可以在 build/deployment 上进行转换](https://stackoverflow.com/questions/3004210)，或者只是在一台服务器上手动修改。

3.  将大部分配置数据存储在中央位置。这样，应用程序只需要知道从（即使它本身）检索它的配置。

# iphone - iPhone应用程序上的自定义键盘

> ID：11760429
> 
> 赞同：1
> 
> 时间：2012-08-01T13:33:46.417
> 
> 标签：iphone, objective-c, custom-controls

我需要创建一个应用程序将使用除英语以外的其他语言。我在互联网上进行了研究，发现我必须为此创建自己的 iphone 键盘。

我发现[这篇文章非常有用](https://stackoverflow.com/questions/8323928/code-sample-to-create-own-keyboard)。我尝试制作自定义键盘，但未能成功。应用程序作为自定义键盘的按钮崩溃。该按钮找不到它的`TouchUpInside`事件并崩溃。

我知道我错过了一些东西，我非常接近这一点。这是我使用 XIB 制作的示例应用程序。请任何人拉动并安装此[示例应用程序](https://github.com/vikysaran/Application)，并让我知道我在做什么错误。我会更新代码并再次推送给其他人。

* * *

感谢您的回复。它的 3 版本将以 3 种不同的语言发布。没有语言切换，因为版本不同。阿拉伯语版本将仅显示 arebic 键盘，法语版本将仅显示法语键盘，波斯语版本将仅显示波斯语键盘。在我上面的应用程序中，我制作了一个 UIView，它的行为就像一个键盘`[textview becomeFirstResponder];`之后，我将一个阿拉伯键盘图像作为 UIImageView 作为它的子视图，我将向它放置许多按钮并将这些按钮的标签分配给 ASCII 值，并将跟踪然后 pn 按钮单击

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:40:06.277

您无需创建自定义键盘即可使用非英语语言。无论您通过随机网络搜索找到什么，请停止使用它们并查看开发人员库中的官方文档。特别是[国际化编程主题](https://developer.apple.com/library/ios/#documentation/MacOSX/Conceptual/BPInternational/BPInternational.html#//apple_ref/doc/uid/10000171i)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T11:26:12.613

在这里，您可以找到我使用 xib 制作的示例应用程序。我创建了一个适用于 2 个不同视图控制器文本字段的协议。

[https://github.com/vikysaran/Application](https://github.com/vikysaran/Application)

# eclipse - Eclipse 问题代理连接：无法保存安全首选项

> ID：11760435
> 
> 赞同：3
> 
> 时间：2012-08-01T13:34:10.413
> 
> 标签：eclipse, eclipse-plugin, proxy

![在此处输入图像描述](../Images/f14c861f982a5894151e9183aa6e6873.png)

嗨，如截图所示，eclipse 在保存安全首选项文件时失败。已经尝试授予 777 对这些文件夹的访问权限（事实上，在安全性 -> 安全存储 -> 内容下显示的文件夹，因为存储位置甚至不存在，所以我使用 mkdir 创建了它并给了它 777 访问权限。

但是，填写后，我点击应用，然后点击 OK HTTP 和 HTTPS 数据关于用户和密码没有保存！

任何人？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T15:31:21.963

尝试将默认安全存储位置更改为您**知道**eclipse 已经拥有写入权限的位置。（类似于您当前工作区的子文件夹？）

您可以通过将以下内容添加到 eclipse.ini 来更改默认位置：

```
...
-eclipse.keyring
c:\users\<userid>\.eclipse\secure.storage
... 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-17T10:20:42.137

已知错误：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=286354#c1](https://bugs.eclipse.org/bugs/show_bug.cgi?id=286354#c1)

> 当我重命名文件 C:\Documents and Settings\.eclipse\org.eclipse.equinox.security\secure_storage 再次保存密码时。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-29T08:40:29.343

窗口->首选项->常规->安全->安全存储->'主密码提供者'</p>

选择“Windows 集成”并单击更改密码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T07:01:24.310

我通过安装 Proxy+ 解决了这个问题，所以我输入了我的密码和用户名一个提供的 localhost:4480 作为代理（一种简单的绕过方法，但并没有真正解决问题:)）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-22T15:32:14.070

首先，验证 Eclipse Proxy 是否配置正确：

通过 Window，Preferences 访问 Preferences 然后展开 General，然后 Security。单击安全存储。

在内容选项卡中，展开 [默认安全存储] 列表。验证那里有设置：org.eclipse.core.net.proxy.auth 和 HTTP 设置。您可能还会看到 Git 凭据。

您可以尝试使用质询提示使用恢复密码在密码选项卡上恢复您的 Eclipse 安全存储密码。如果失败，那么您可能需要删除安全存储以“重置”安全存储。

选择 org.eclipse.equinox.secure.storage 并单击删除。

然后将提示您设置安全存储和密码恢复挑战问题。

# python - 如何在 python shell 中转义 Intro

> ID：11760436
> 
> 赞同：0
> 
> 时间：2012-08-01T13:34:18.523
> 
> 标签：python

我通常使用 python shell 来测试小东西，不需要创建一个新的 .py 文件。

我想测试类似的东西：

```
>>> def a : 
     pass 
```

但我不知道如何避免介绍。我试过在同一条线上

```
>>> def a: pass 
```

但会引发语法错误，我想是缩进

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T13:36:40.513

单行[函数定义](http://docs.python.org/tutorial/controlflow.html#defining-functions)的语法是：

```
def a(): pass 
```

你错过了非可选的`()`（例如`def a(arg1, arg2): pass`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:37:53.827

假设您的问题是关于修剪初始缩进，而不是关于您发布的特定行，那么您不能使用香草解释器。你需要一些更强大的东西。如果我没记错的话，`ipython`做类似的事情。或者您可以将其添加到您最喜欢的解释器中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T13:38:08.987

尝试在你的函数名后面加上括号：

```
>>> def f():
...     print "test"
...
>>> f
<function f at 0xfff37764>
>>> f()
test 
```

# sql-server - 遍历数据库中的每一个文本列并进行替换

> ID：11760438
> 
> 赞同：0
> 
> 时间：2012-08-01T13:34:21.497
> 
> 标签：sql-server, tsql, sql-server-2005

我正在尝试遍历数据库中的每个`varchar`,`nvarchar`和`ntext`列，并`replace`使用`@string`.

但是，当该字段的最大长度仅为 50 时，它应该使用`@shortstring`only 运行替换语句。就像下面的代码一样......

我到目前为止是这样的：

```
Declare @string varchar(100), @shortstring varchar(50)
Set @string = 'fullstring_100_characters'
Set @shortstring = 'shortstring_50_characters'

Update [Table] Set [Column] = Replace([Column],@string,'') 
```

但是如果它是一个`ntext`语句看起来像这样，并且总是使用`@string`而不是`@shortstring`

```
Update [Table] Set [Column] = CAST(REPLACE(CAST([Column] as NVarchar(MAX)),@string,'') AS NText) 
```

有人可以告诉我如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:58:55.830

为了更新 text 或 ntext 字段，您必须使用`UPDATETEXT`. 有关详细信息，请参阅以下链接：

[更新 SQL Server 中的 text/ntext 或 varchar(max) 数据类型列](http://decipherinfosys.wordpress.com/2007/07/24/update-textntext-or-varcharmax-data-type-columns-in-sql-server/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:27:12.227

首先我得请你用 nvarchar(max) 替换你的 ntext 字段，ntext 很麻烦

来自微软的报价

"ntext、text 和 image 数据类型将在 Microsoft SQL Server 的未来版本中删除。避免在新的开发工作中使用这些数据类型，并计划修改当前使用它们的应用程序。使用 nvarchar(max)、varchar(max ) 和 varbinary(max) 代替。

用于存储大型非 Unicode 和 Unicode 字符串和二进制数据的固定和可变长度数据类型。Unicode 数据使用 UNICODE UCS-2 字符集。"引用结束

这是更改数据类型的方法：

```
alter table yourtable ALTER COLUMN colname varchar(max) 
```

这是一个脚本，用于替换您在所有表格和列中描述的文本。如果 TABLE 中有一个计算列，脚本会发出一点声音，但它仍然会执行：

```
DECLARE @searchvalue varchar(100)
DECLARE @newvalue varchar(100)
DECLARE @newvalueShort varchar(50)
SET nocount off

SET @searchvalue = 'replace text'
SET @newvalue = 'new long text replacement'
SET @newvalueShort = 'short text'

SELECT * into #t FROM 
(
SELECT 'update [' + a.TABLE_name + '] 
SET ['+ column_name+ ']=replace(' +column_name +','''+@searchvalue +''','''+ case when character_maximum_length > 50 then @newvalue else @newvalueShort end + ''')
where [' +a.column_name+
'] like ''%'+@searchvalue +'%''' sqlstring
FROM INFORMATION_SCHEMA.COLUMNS a
join 
INFORMATION_SCHEMA.TABLES b
ON a.TABLE_name = b.TABLE_name
and b.TABLE_type = 'base TABLE'
WHERE data_type in ('varchar', 'char', 'nchar', 'nvarchar')
and character_maximum_length >= len(@newvalueShort)
) a

DECLARE @sqlstring as nvarchar(500)
DECLARE SqlCursor CURSOR FAST_FORWARD FOR
SELECT sqlstring FROM #t
OPEN SqlCursor
FETCH NEXT FROM SqlCursor
INTO @sqlstring
WHILE @@FETCH_STATUS = 0
BEGIN

     EXEC(@sqlstring)
     FETCH NEXT FROM SqlCursor
     INTO @sqlstring
END
CLOSE SqlCursor
DEALLOCATE SqlCursor
DROP TABLE #t 
```

# c# - TreeViewItem 不能用 datacontext 选择

> ID：11760441
> 
> 赞同：0
> 
> 时间：2012-08-01T13:34:27.920
> 
> 标签：c#, wpf, data-binding, datacontext, hierarchicaldatatemplate

当我通过 DataContext 设置 treeviewitem 的标题时，它会添加一些可单击的填充像素，然后将文本放置为不可单击。我将张贴图片；蓝色：可点击，红色：不可点击。

![](../Images/fa13c2fd39b9bcc589925b55b444dccd.png)

存储数据的类：

```
public class TagClass
{
    public string TagClassMagic { get; set; }
    public ITagClass RawClass { get; set; }
    public List<TagEntry> TagEntries = new List<TagEntry>();

    public IList Children
    {
        get
        {
            return new CompositeCollection()
                {
                    new CollectionContainer() { Collection = TagEntries }
                };
        }
    }

}
public class TagEntry
{
    public string TagFileName { get; set; }
    public ITagEntry RawTag { get; set; }
} 
```

用于显示数据的 XAML：

```
<TreeView x:Name="tvTagList" Margin="15, 40, 15, 50" ItemsSource="{Binding}" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Background="{x:Null}" BorderBrush="{DynamicResource ExtryzeAccentBrushSecondary}" BorderThickness="2" ScrollViewer.CanContentScroll="True" Foreground="White">
    <TreeView.Resources>
        <HierarchicalDataTemplate DataType="{x:Type  DataBind:TagClass}" ItemsSource="{Binding Children}" >
            <TreeViewItem Header="{Binding TagClassMagic}" />
        </HierarchicalDataTemplate>
        <HierarchicalDataTemplate DataType="{x:Type DataBind:TagEntry}"  >
            <TreeViewItem Header="{Binding TagFileName}" />
        </HierarchicalDataTemplate>
    </TreeView.Resources>
</TreeView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:00:29.917

尝试删除这些：

```
<TreeViewItem Header="{Binding TagClassMagic}" />
<TreeViewItem Header="{Binding TagFileName}" /> 
```

而是相应地为 TagEntry 添加一个数据模板 - 在这些数据模板中只放置简单的文本块

# android - 游戏中正确的电源按钮操作处理

> ID：11760444
> 
> 赞同：0
> 
> 时间：2012-08-01T13:34:29.047
> 
> 标签：android, android-screen

我正在解决我的游戏打开时按下电源按钮的问题。正如我的日志所说，屏幕锁定后会调用一系列不同的`Activity`生命周期回调，并且在屏幕解锁时也会发生同样的情况。我正在开始播放背景音乐`onResume()`，那么如何确保在屏幕锁定时不播放音乐？我已经了解`ACTION_SCREEN_OFF`并`ACTION_SCREEN_ON`广播了，但 AFAIK 不建议收听这些事件。这个问题有什么优雅的解决方法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:56:27.077

如果你在 onPause 方法中暂停它，你应该有你想要的效果，不是吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-04-01T19:03:00.397

使用`ACTION_USER_PRESENT`...这是你想要的。

# android - Android设置默认打开pdf的选项

> ID：11760451
> 
> 赞同：0
> 
> 时间：2012-08-01T13:35:02.543
> 
> 标签：android

我正在从我的应用程序中打开一个 pdf 文档。我的平板电脑上有 quickoffice 和 Acrobat 阅读器。每当我尝试打开文档时，它会显示 3 个选项，qucioffice、acrobat 和我的应用程序名称（我不知道为什么它会显示我的应用程序名称）。我可以为 acrobat 设置默认选项并摆脱这些选项吗？我知道，我可以选中选择框来设置默认选项。有没有办法以编程方式设置它？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:40:33.490

> 我不知道为什么它显示我的应用名称

也许您有一个`<intent-filter>`声称是 PDF 查看器的活动。

> 我可以为 acrobat 设置默认选项并摆脱这些选项吗？

用户可能没有 Acrobat。用户可能不需要 Acrobat。请允许用户选择他们想要的 PDF 查看器。

> 我可以选中选择框来设置默认选项。有没有办法以编程方式设置它？

你不能。*用户*控制*用户的*设备和*用户*对 PDF 查看器的选择，而不是您或任何其他应用程序开发人员。

# asp.net-mvc - 循环遍历两个单个对象实体的字段

> ID：11760452
> 
> 赞同：1
> 
> 时间：2012-08-01T13:35:07.460
> 
> 标签：asp.net-mvc, entity-framework

```
[HttpPost]
public ActionResult Edit(orders neworders) 
{
    string modifields;
    orders oldorders = HDB.orders.Where(c => c.id_order == cmd.id_order).First();
    foreach (var field in oldorders)
    {
          if(field!= neworders.samefield)  
          {
              modifields+=nameoffield ;
         }            
    }
} 
```

**Q**如何比较新旧记录中的字段并在值更改时保存字段名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:51:27.890

Equals() 方法覆盖以比较同一类的实例的示例

```
 public override bool Equals(object anObject)
  {
     if (anObject is Order)
     {
        Order newOrder = (Order)anObject;
        if (newOrder.Name.Equals(this.Name)) //add additional comparisons as needed.  You could also use a foreach loop here as Tony shows below
        {
           return true;
        }
        foreach (var field in typeof(Order).GetFields())
        {
            if (field.GetValue(this) != field.GetValue(newOrder)) { return false; }
        }
        foreach (var property in typeof(Order).GetProperties())
        {
            if (property.GetValue(this, null) != property.GetValue(newOrder, null)) { return false; }
        }

     }
     return false;

  } 
```

以下是如何调用您的操作：

```
[HttpPost] public ActionResult Edit(orders neworder)  
{     
    orders oldorder = HDB.orders.Where(c => c.id_order == cmd.id_order).First();     
    if(oldorder.Equals(newOrder)
    {
       //do wome work
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T13:52:55.567

`First()`返回单个对象，因此无法迭代。

在两行之间阅读，您似乎想要遍历对象上的所有字段。在这种情况下，您可以使用反射返回一个字段列表，然后您可以对其进行迭代。

```
foreach (var field in oldorders.GetType().GetFields())
{
    var value = field.GetValue(oldorders);
} 
```

**编辑：**从您的其他评论看来，您希望将该对象与另一个对象进行比较，在这种情况下，您最好实现该 `IEquatable<T>`接口。例如

```
class Order : IEquatable<Order>
{
    // TODO: add properties of an Order
    public string foo { get; set; }
    public string bar { get; set; }

    public bool Equals(Order other)
    {
        foreach (var field in typeof(Order).GetFields())
        {
            if (field.GetValue(this) != field.GetValue(other))
            {
                return false;
            }
        }

        foreach (var property in typeof(Order).GetProperties())
        {
            if (property.GetValue(this, null) != property.GetValue(other, null))
            {
                return false;
            }
        }

        return true;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T13:38:12.127

我会说你的`orders`类没有`IEnumerable`正确实现接口。为了以`foreach`这种方式使用，您必须实现接口并至少考虑支持它所需的所有方法。

[http://msdn.microsoft.com/en-us/library/9eekhta0.aspx](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T13:38:28.313

您的 oldrders 变量不是可枚举的。First() 方法返回一个单一对象。删除 .First() ，您将拥有一个 foreach 循环可以使用的 Enumerable 对象

# powershell - MSDeploy setParamFile 无法识别参数

> ID：11760456
> 
> 赞同：3
> 
> 时间：2012-08-01T13:35:20.387
> 
> 标签：powershell, msdeploy

我正在尝试将 MSDeploy 与参数设置文件选项一起使用，这样我就可以通过使用不同文件覆盖参数来构建一次并部署到多个环境。我从 PowerShell 调用 msdeploy。

```
msdeploy.exe -verb:sync `
 -source:"contentPath='$SourceLocalPath'" ` 
 -dest:"contentPath='$TargetLocalPath',computername='$TargetServer'"
 -setParamFile:"$ParamFilePath" `
 -verbose 
```

这会导致无法识别参数的错误。

> msdeploy.exe：错误：无法识别声明的参数“SqlConnString”。

如果我删除“setParamFile”行，它部署得很好，但随后使用默认值。此外，如果我尝试从 IIS 手动导入包，它会显示填充默认值的参数。

我在 Web 项目的根目录中有一个 Parameter.xml 文件：

```
<parameters>
  <parameter name="SqlConnString" description="Please provide the SQL connection string" defaultValue="...;Initial Catalog=xxx;server=xxx;" tags="">
    <parameterEntry kind="XmlFile" scope="\\web.config$" match="/configuration/connectionStrings/add[@name='Sql']/@connectionString" />
  </parameter>
</parameters> 
```

该包是使用包内的 ...SetParameters.xml 文件创建的，该文件包含我的 Parameters.xml 文件中的条目以及标准条目。

```
<parameters>
  <setParameter name="SqlConnString" value="...Initial Catalog=xxx;server=xxx;"/>
...  
</parameters> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-25T17:55:30.187

尝试将“name”中的值从“SqlConnString”更改为“YourSqlConnectionName-Web.config Connection String”。如果您想知道确切的名称，您必须查看您的 web.config 文件。上面的示例应该适用于 web.config 文件中这样的部分：

```
 <connectionStrings>
    <add name="YourSqlConnectionName"
      connectionString="...;Initial Catalog=xxx;server=xxx;"
      providerName="System.Data.EntityClient"/>
  </connectionStrings> 
```

所以你应该像这样配置你的 setParameters.xml 文件：

```
<parameters>
  <setParameter name="YourSqlConnectionName-Web.config Connection String" value="...Initial Catalog=xxx;server=xxx;"/>
</parameters> 
```

和您的 Parameters.xml 文件，如：

```
<parameters>
  <parameter name="YourSqlConnectionName-Web.config Connection String" description="Please provide the SQL connection string" defaultValue="...;Initial Catalog=xxx;server=xxx;" tags="">
    <parameterEntry kind="XmlFile" scope="\\web.config$" match="/configuration/connectionStrings/add[@name='YourSqlConnectionName']/@connectionString" />
  </parameter>
</parameters> 
```

希望这可以解决您的问题。

# android - 在android软键盘中禁用/检测键盘关闭键

> ID：11760461
> 
> 赞同：1
> 
> 时间：2012-08-01T13:35:28.560
> 
> 标签：android, android-softkeyboard

android 中的一些软键盘带有键盘关闭键。是否有与此键关联的侦听器？编辑器操作侦听器或 onKeyPreIme 或 dispatchKeyEvent 不起作用。或者有没有办法禁用这个键？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:04:47.540

有几件事对你不利。

似乎隐藏键盘键有些特殊，因为只有拥有它的 IME 才能收听它。参考：[https ://groups.google.com/forum/?fromgroups#!topic/android-developers/t4M8Zb9IomY](https://groups.google.com/forum/?fromgroups#!topic/android-developers/t4M8Zb9IomY)

此外，似乎在您的活动中为软键盘获取 Keyevents 充其量是参差不齐： [onKeyListener not working with soft keyboard (Android)](https://stackoverflow.com/questions/1967740/onkeylistener-not-working-with-soft-keyboard-android)

我刚刚在 HTC Evo 4g LTE 上的 EditText 上测试了`onKey()`、`dispatchKeyEvent()`和。`dispatchKeyEventPreIme()`除了退格和回车之外，以上都没有接收软键盘上任何键的回调。包括隐藏键盘键在内的其他所有内容都完全跳过了我重写的方法。

我得出的结论是，没有办法让它按你想要的方式工作。

# javascript - AngularJS：如何使用令牌安全和自定义方法处理 RESTful API？

> ID：11760463
> 
> 赞同：3
> 
> 时间：2012-08-01T13:35:36.160
> 
> 标签：javascript, angularjs, rest

假设我有一个**RESTFul API**，上面有标准`GET`的 、`POST`、`PUT`和`DELETE`方法，但我还有其他针对特定对象类型定制的方法，除此之外，我还需要一个安全令牌。

因此该服务的 URL 可能如下所示：

**GET/PUT/POST/DELETE** [http://sample.com/api/User/123?token=ABCDEF1234](http://sample.com/api/User/123?token=ABCDEF1234)

和

获取[http://sample.com/api/User/GetUsersByStatus?token=ABCDEF1234¶m1=blah¶m2=foo](http://sample.com/api/User/GetUsersByStatus?token=ABCDEF1234&param1=blah&param2=foo)

或者

**发布** [http://sample.com/api/User/DoSomethingCrazy?token=ABCDEF1234](http://sample.com/api/User/DoSomethingCrazy?token=ABCDEF1234)

最后两个做一些自定义功能。也许是重置密码，或者是克隆用户并返回记录，我不知道。只是定制的“东西”。

使用 Angular 处理此问题的最佳实践方法是什么？我见过 $resource 实用程序，但它似乎只适用于标准的**REST**方法，我不确定如何以下一个 Angular 开发人员能够理解的方式扩展它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T21:03:03.093

如果我对您的理解正确，我相信您要问的是如何使资源方法自动包含您的令牌？？？如果这是正确的，那么你可以通过几种方式来做到这一点。首先，您可以扩展预定义的资源方法并烘焙将应用于每次调用的参数，或者您可以定义自己的方法。

此外，当您调用方法时，如果参数没有经过预限定，它们将最终出现在查询字符串中。

下面是我为 cakephp 实现编写的示例代码。我正在为每个预定义的方法和我自己的初始化方法传递动作。

```
 angular.module('myApp.cakephp.services', ['ngResource']).
  factory('CommentSvc', function ($resource) {
        return $resource('/cakephp/demo_comments/:action/:id/:page/:limit:format', { id:'@id', 'page' : '@page', 'limit': '@limit' }, {
          'initialize' : { method: 'GET', params: { action : 'initialize', format: '.json' }, isArray : true },
          'save': { method: 'POST', params: { action: 'create', format: '.json' } },
          'query' : { method: 'GET', params: { action : 'read', format: '.json' } , isArray : true },
          'update': { method: 'PUT', params: { action: 'update', format: '.json' } },
          'remove': { method: 'DELETE', params: { action: 'delete', format: '.json' } } 
        });
  }) 
```

希望这可以帮助

- 担

# php - 在lessphp中从PHP解析字符串时无法注入更少的变量

> ID：11760465
> 
> 赞同：2
> 
> 时间：2012-08-01T13:35:53.640
> 
> 标签：php, less, lessphp

我有以下`less`代码。`less.js`我已经阅读过，在声明中使用变量时存在限制，`url()`因此我使用了两种建议的解决方法，但真正的问题是变量来自 PHP，并且它似乎没有正确传递，因为它从未被解释过。

我在用着[`lessphp`](https://github.com/leafo/lessphp)

也许我做错了什么。

PHP 代码

```
$this->parsed_css = $this->lessc->parse( $this->parsed_css, array( 'fontdir', 'myfontdir' ) ); 
```

`Less`代码

```
@font-face {
    font-family: 'FontAwesome';
    src: url(%("%s/fontawesome-webfont.eot", @fontdir));
    src: url('@{fontdir}/fontawesome-webfont.eot?#iefix') format('embedded-opentype'),
         url('@{fontdir}/fontawesome-webfont.woff') format('woff'),
         url('@{fontdir}/fontawesome-webfont.ttf') format('truetype'),
         url('@{fontdir}/fontawesome-webfont.svgz#FontAwesomeRegular') format('svg'),
         url('@{fontdir}/fontawesome-webfont.svg#FontAwesomeRegular') format('svg');
    font-weight: @fontdir;
    font-style: normal;
} 
```

CSS 输出

```
@font-face {
  font-family:'FontAwesome';
  src:url("/fontawesome-webfont.eot");
  src:url('/fontawesome-webfont.eot?#iefix') format('embedded-opentype'), url('/fontawesome-webfont.woff') format('woff'), url('/fontawesome-webfont.ttf') format('truetype'), url('/fontawesome-webfont.svgz#FontAwesomeRegular') format('svg'), url('/fontawesome-webfont.svg#FontAwesomeRegular') format('svg');
  font-weight:;
  font-style:normal;
} 
```

如您所见，该变量永远不会被解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:39:35.147

根据您的原始问题（在编辑中删除它之前），变量的名称是`$font_dir`，但您`fontdir`在所有引用中都使用（没有下划线）。

尝试用 为`fontdir`元素分配一个值`array('fontdir' => $font_dir)`，例如：

```
$this->parsed_css = $this->lessc->parse( $this->parsed_css, array( 'fontdir' => $font_dir, 'myfontdir' => $my_font_dir) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:04:58.370

我刚刚下载`less`并测试了它，数组的东西似乎不是你的代码不起作用的唯一原因。

这不是有效`less`的代码（至少根据[文档](http://leafo.net/lessphp/docs/#setting_variables_from_php)）

```
src: url('@{fontdir}/fontawesome-webfont.eot?#iefix') format('embedded-opentype')
//         ^       ^    Remove these

//Right
echo $less->parse("color: @color",
    array(
        'color' => 'red'
)); //color:red;

//Wrong
echo $less->parse("color: @{color}",
        array(
            'color' => 'red'
    )); // (no output) 
```

# python - argparse 可选参数

> ID：11760468
> 
> 赞同：2
> 
> 时间：2012-08-01T13:36:02.480
> 
> 标签：python, argparse

我在python中有以下代码：

```
group = parser.add_mutually_exclusive_group()
group.add_argument('-a', '--add', dest='name_to_add', help='Add a new group or a role to existing group')
group.add_argument('-u', '--upgrade', dest='name_to_upgrade', help='Upgrade a group with the new version')
group.add_argument('-r', '--remove', dest='name_to_remove', help='Remove a group')
group.add_argument('-l', '--list', dest="list_server_or_group_name", help='Get group or server state/configuration') 
```

我的问题是“-l”选项。我希望能够列出特定组并列出所有组。目前我这样做：

“python my_script.py -l group_name” - 用于列出特定组和“python my_script.py -l all” - 用于列出所有组。

但我想列出所有组：“python my_script.py -l”。我应该如何更改我的代码才能以这种方式运行它？以及如何稍后在代码中检查它？

谢谢，阿尔沙夫斯基亚历山大。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T13:38:49.593

这是不可能的`optparse`。

但是，如果您切换`optparse`到`argparse`（从[2.7](http://docs.python.org/library/argparse.html#module-argparse)或[3.2](http://docs.python.org/dev/library/argparse.html#module-argparse)开始），您可以通过[`nargs='?'`](http://docs.python.org/dev/library/argparse.html#nargs)：

> '？'。如果可能，将从命令行使用一个参数，并将其作为单个项目生成。如果不存在命令行参数，则将生成默认值。

```
group.add_argument('-l', '--list', dest="list_server_or_group_name",
                   help='Get group or server state/configuration',
                   nargs='?', default=None, const='all') 
```

# codeigniter - 将 add_package_path 用于 Code Igniter 控制器

> ID：11760474
> 
> 赞同：1
> 
> 时间：2012-08-01T13:36:17.690
> 
> 标签：codeigniter, codeigniter-2

我正在尝试使用 $this->load->add_package_path 向我的 CI 应用程序添加一个新的子应用程序。我可以看到如何将其用于视图等：只需放

```
$this->load->add_package_path("/mypackage"); 
```

在控制器ctor中。不幸的是，这无济于事，因为我想从包路径中找到控制器：这似乎是一个先有鸡还是先有蛋的问题。还有其他地方可以调用 add_package_path 吗（例如 index.php）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:54:58.433

通过跟踪 CI 弄清楚了。事实证明你不能这样做。您可以将自己的控制器放在 /application/controllers 的子目录中，但不能将它们放在其他地方：特别是，正如[http://codeigniter.com/user_guide/libraries/loader.html](http://codeigniter.com/user_guide/libraries/loader.html)所暗示的，

> 这些元素可以是库（类）视图文件、帮助程序、模型或您自己的文件。

“您自己的文件”不包括控制器。通过对 CodeIgniter.php 和 Router.php 进行更改，我最终能够让它查看除 APPPATH 之外的 ENVIRONMENT 设置。但是，我不喜欢进行这种更改，因此我取消了更改。我会把它放在这里以防其他人可以从中受益。

Router.php 更改：

```
function _validate_request($segments)
{
...
  // Does the requested controller exist in the root folder?
  if (file_exists(APPPATH.'controllers/'.$segments[0].'.php')
      || file_exists(ENVIRONMENT.'/controllers/'.$segments[0].'.php')) // New bit here
  {
    return $segments;
  }
....
} 
```

CodeIgniter.php 更改，'围绕第 246 行：

```
if ( ! file_exists(APPPATH.'controllers/'.$RTR->fetch_directory().$RTR->fetch_class().'.php'))
{
  // New bit here
  if ( ! file_exists(ENVIRONMENT.'/controllers/'.$RTR->fetch_directory().$RTR->fetch_class().'.php'))
  {
    show_error('Unable to load your default controller. Please make sure the controller specified in your Routes.php file is valid.');
  }
  include(ENVIRONMENT.'/controllers/'.$RTR->fetch_directory().$RTR->fetch_class().'.php');
} else {
  include(APPPATH.'controllers/'.$RTR->fetch_directory().$RTR->fetch_class().'.php');
} 
```

# performance - 计算一年内每日数据的标准差

> ID：11760481
> 
> 赞同：0
> 
> 时间：2012-08-01T13:36:42.103
> 
> 标签：performance, matlab, indexing, time-series

我有一个问题，在 Matlab 中，我有一个包含 20 年每日数据 (X) 的向量和一个相关日期 (DATES) 的向量。为了找到每年每日数据的平均值，我使用以下脚本：

```
A = fints(DATES,X);                          %convert to financial time series
B = toannual(A,'CalcMethod', 'SimpAvg');     %calculate average value per year
C = fts2mat(B);                              %Convert fts object to vector 
```

C 是一个包含 20 个值的向量。显示 20 年中每一年的每日数据的平均值。到目前为止，一切都很好..现在我正在尝试做同样的事情，但不是每年计算平均值，而是每年计算标准值，但似乎没有函数“toannual”这样的选项。

关于如何做到这一点的任何想法？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:38:25.233

I'm assuming that X is the financial information and it is an even distribution across each year. You'll have to modify this if that isn't the case. Just to clarify, by even distribution, I mean that if there are 20 years and X has 200 values, each year has 10 values to it.

You should be able to do something like this:

```
num_years = length(C);
span_size = length(X)/num_years;
for n = 0:num_years-1
    std_dev(n+1,1) = std(X(1+(n*span_size):(n+1)*span_size));
end 
```

The idea is that you simply pass the date for the given year (the day to day values) into matlab's standard deviation function. That will return the std-dev for that year. `std_dev` should be a column vector that correlates 1:1 with your `C` vector of yearly averages.

* * *

```
unique_Dates = unique(DATES) %This should return a vector of 20 elements since you have 20 years.
std_dev = zeros(size(unique_Dates)); %Just pre allocating the standard deviation vector.
for n = 1:length(unique_Dates)
    std_dev(n) = std(X(DATES==unique_Dates(n)));
end 
```

Now this is assuming that your `DATES` matrix is passable to the unique function and that it will return the expected list of dates. If you have the dates in a numeric form I know this will work, I'm just concerned about the dates being in a string form.

In the event they are in a string form you can look at using `regexp` to parse the information and replace matching dates with a numeric identifier and use the above code. Or you can take the basic theory behind this and adapt it to what works best for you!

# google-apps-script - 版本错误：es53 需要 4949 但模块是 4969

> ID：11760482
> 
> 赞同：0
> 
> 时间：2012-08-01T13:36:42.563
> 
> 标签：google-apps-script

有没有人遇到类似的问题？我的脚本不会简单地加载..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:14:43.220

问题已确定，将立即进行修复。

# java - Java Classpath 错误-找不到我的类

> ID：11760484
> 
> 赞同：1
> 
> 时间：2012-08-01T13:36:46.183
> 
> 标签：java, classpath, randoop

我正在尝试使用 randoop（Java 自动测试生成器）并且 randoop 找不到我的课程：

```
eliezer@ubuntu:~/Desktop$ java -ea -classpath \
 randoop.1.3.2.jar:home/eliezer/myclasses \
 randoop.main.Main gentests \
 --testclass=/home/eliezer/Desktop/myclasses/ArrayListError

policy = sun.security.provider.PolicyFile@85af80
Throwable thrown while handling command:java.lang.Error:\
classForName(/home/eliezer/Desktop/myclasses/ArrayListError)
java.lang.Error: classForName(/home/eliezer/Desktop/myclasses/ArrayListError)
at randoop.util.Reflection.classForName(Reflection.java:206)
at randoop.util.Reflection.loadClassesFromList(Reflection.java:386)
at randoop.main.GenInputsAbstract.findClassesFromArgs(GenInputsAbstract.java:507)
at randoop.main.GenTests.handle(GenTests.java:184)
at randoop.main.Main.nonStaticMain(Main.java:80)
at randoop.main.Main.main(Main.java:42)
Caused by: java.lang.ClassNotFoundException: \
 /home/eliezer/Desktop/myclasses/ArrayListError
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:186)
at randoop.util.Reflection.classForName(Reflection.java:198)
... 5 more
Randoop failed.
Last sequence under execution:null 
```

我的课程名为 ArrayListError.java，位于`/home/eliezer/Desktop/myclasses`.

randoop 文档位于：[https](http://randoop.googlecode.com/hg/doc/index.html) ://randoop.github.io/randoop/manual/index.html 。

我确信这确实是微不足道的事情，但我对这些事情缺乏经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:25:40.597

您需要设置您的类路径，以便 jvm 应该能够找到您的所有资源，如类、文件、jar 等。
在您的情况下，`ArrayListError`位于 directory 下`/home/eliezer/Desktop/myclasses`。你需要把它放在你的类路径中。将类路径指向上述目录后，您需要将类名传递给`--testclass=ArrayListError`.

`java -ea -classpath randoop.1.3.2.jar:/home/eliezer/Desktop/myclasses randoop.main.Main gentests --testclass=ArrayListError`

应该解决你的问题。我建议您搜索设置类路径并继续阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:43:26.050

这是错误的

> 我的类名为 ArrayListError.java，位于 /home/eliezer/Desktop/myclasses 中。

您的 ArrayListError.java 是源代码，但 java 虚拟机在其类路径中需要一个已编译的类。

编辑：既然你说你也有 .class 文件，那么你的问题可以通过两种方式解决

一种。无包裹

运行命令（注意--testclas，它不是目录，应该是类）

> java -ea -classpath randoop.1.3.2.jar:/home/eliezer/myclasses randoop.main.Main gentests --testclass=ArrayListError

湾。包中的类

如果您的 ArrayListError 确实在您的**myclasses**`package com.test;`目录中创建了一个目录 /com/test并运行以下命令

 **> java -ea -classpath randoop.1.3.2.jar:/home/eliezer/myclasses/com/test/ randoop.main.Main gentests --testclass=com.test.ArrayListError

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T13:55:36.377

在命令行上检查你的类路径；我看`home/eliezer/myclasses`，没有领先`/`。**

# javascript - 如何在启用选项卡的新窗口中打开链接

> ID：11760485
> 
> 赞同：3
> 
> 时间：2012-08-01T13:36:46.877
> 
> 标签：javascript

我搜索了很多，但无法弄清楚。

是否可以使用`window.open()`方法打开一个启用选项卡的新窗口？chrome 上下文菜单“在新窗口中打开链接”的工作方式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T13:37:37.977

浏览器自行决定如何打开链接。有时用户可以配置如何打开链接，但网页不能这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T13:42:32.837

使用[锚标记](http://www.aitechsolutions.net/htmlhowAtargetattrib.html)，您可以设置`target`属性以控制链接的打开位置*。*除此之外，此行为取决于浏览器和用户，无法由 javascript 控制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T11:37:02.420

使用此代码

```
window.open("http:.//www.google.com","DemoName",'scrollbars=1,height=650,width=1050'); 
```

# python - 如何为 numpy 矩阵生成干净的 x 和 y 轴？

> ID：11760490
> 
> 赞同：4
> 
> 时间：2012-08-01T13:37:06.173
> 
> 标签：python, arrays, numpy, matrix

我在 numpy 中创建一个距离矩阵，输出如下：

```
 ['H', 'B', 'D', 'A', 'I', 'C', 'F']
[[ 0\.   2.4  6.1  3.2  5.2  3.9  7.1]
 [ 2.4  0\.   4.1  1.2  3.2  1.9  5.1]
 [ 6.1  4.1  0\.   3.1  6.9  2.8  5.2]
 [ 3.2  1.2  3.1  0\.   4\.   0.9  4.1]
 [ 5.2  3.2  6.9  4\.   0\.   4.7  7.9]
 [ 3.9  1.9  2.8  0.9  4.7  0\.   3.8]
 [ 7.1  5.1  5.2  4.1  7.9  3.8  0\. ]] 
```

我通过在打印实际矩阵之前打印一个列表来打印该 x 轴，a：

```
print" ", names
print a 
```

我需要按该顺序排列轴，因为列表“名称”正确地对变量及其在矩阵中的值进行排序。但是我怎样才能在 numpy 中获得类似的 y 轴？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:21:33.630

它不是那么漂亮，但是这张漂亮的表格打印效果很好：

```
import numpy as np

names=np.array(['H', 'B', 'D', 'A', 'I', 'C', 'F'])
a=np.array([[ 0.,   2.4,  6.1,  3.2,  5.2,  3.9,  7.1],
 [2.4,  0.,   4.1,  1.2,  3.2,  1.9,  5.1],
 [6.1,  4.1,  0.,   3.1,  6.9,  2.8,  5.2],
 [3.2,  1.2,  3.1,  0.,   4.,   0.9,  4.1],
 [5.2,  3.2,  6.9,  4.,   0.,   4.7,  7.9],
 [3.9,  1.9 , 2.8,  0.9,  4.7,  0.,   3.8],
 [7.1,  5.1,  5.2,  4.1,  7.9,  3.8,  0\. ]])

def pptable(x_axis,y_axis,table):
    def format_field(field, fmt='{:,.2f}'):
        if type(field) is str: return field
        if type(field) is tuple: return field[1].format(field[0])
        return fmt.format(field)     

    def get_max_col_w(table, index):
        return max([len(format_field(row[index])) for row in table])         

    for i,l in enumerate(table):
        l.insert(0,y_axis[i])

    x_axis.insert(0,' ')    
    table.insert(0,x_axis)    
    col_paddings=[get_max_col_w(table, i) for i in range(len(table[0]))]
    for i,row in enumerate(table):
        # left col
        row_tab=[str(row[0]).ljust(col_paddings[0])]
        # rest of the cols
        row_tab+=[format_field(row[j]).rjust(col_paddings[j]) 
                for j in range(1,len(row))]
        print(' '.join(row_tab))         

x_axis=['x{}'.format(c) for c in names]
y_axis=['y{}'.format(c) for c in names]

pptable(x_axis,y_axis,a.tolist()) 
```

印刷：

```
 xH   xB   xD   xA   xI   xC   xF
yH 0.00 2.40 6.10 3.20 5.20 3.90 7.10
yB 2.40 0.00 4.10 1.20 3.20 1.90 5.10
yD 6.10 4.10 0.00 3.10 6.90 2.80 5.20
yA 3.20 1.20 3.10 0.00 4.00 0.90 4.10
yI 5.20 3.20 6.90 4.00 0.00 4.70 7.90
yC 3.90 1.90 2.80 0.90 4.70 0.00 3.80
yF 7.10 5.10 5.20 4.10 7.90 3.80 0.00 
```

如果您希望 X 和 Y 轴相同，只需使用两个相同标签的列表来调用它。

# shell - 如何将一个 csv 内容映射到 unix shell 中的另一个 csv 内容

> ID：11760497
> 
> 赞同：0
> 
> 时间：2012-08-01T13:37:22.887
> 
> 标签：shell, csv, mapping, split

我有一个带有以下输入的 csv

```
Product1,Comp1|Comp2|Comp3|...,Owner1|Owner2|||...
Product2,Comp1|Comp2|Comp3|...,Owner1|||Owner3|...
Product3,CompX 
```

我把 .... 表示由 | 分隔的 Comp 列表的变量号，我们可以假设对于每个 Comp csv 文件将有一个所有者信息（如果可用），否则它将是空白的，

现在我需要生成以下格式的 xml

```
<product='Product1' Comp='Comp1' Owner='Owner1' />
<product='Product1' Comp='Comp2' Owner='Owner2' />
<product='Product1' Comp='Comp3' Owner='' />
.
.
.

<product='Product2' Comp='Comp1' Owner='Owner1' />
<product='Product2' Comp='Comp2' Owner='' />
<product='Product2' Comp='Comp3' Owner='Owner3' />
.
.
.
<product='Product3' Comp='CompX' Owner='' /> 
```

我为此编写了以下代码。

```
ifs=$IFS
IFS='
'

for line in `cat input.csv`;do
# echo $line
prd=`echo $line | cut -d',' -f1`
components=`echo $line | cut -d',' -f2`
owners=`echo $line | cut -d',' -f3`

# echo $components

IFS='|'
i=0
for comp in `echo $components`;do
   i=`expr $i + 1`
   IFS=$ifs
   owner=`echo $owners | cut -d'|' -f$i`
   echo "<product='$prd' Comp='$comp' Owner='$owner' />"
done
done 
```

哪个工作不正常。任何人都可以建议我做其他方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:59:59.403

不确定`...`符号。我会使用一个 for 循环来处理所有内部列逻辑，并使用一种简单的`while read`方法来逐行处理。

```
while read LINE
do
        COLUMNS=(`echo $LINE | tr ',' ' '`)
        COMPS=(`echo ${COLUMNS[1]} | tr '|' ' '`)
        for (( i=0 ; i<${#COMPS[@]} ; i++ ))
        do
                OWNER=`echo ${COLUMNS[2]} | awk '{split($0,owner,"|"); print owner[$1]}'
                echo "<product='${COLUMNS[0]}' Comp='${COMPS[$i]}' Owner='$OWNER' />"
        done
done < input.csv 
```

# c# - C# LINQ to Entities - 对象和对象集合交集的属性

> ID：11760499
> 
> 赞同：3
> 
> 时间：2012-08-01T13:37:37.387
> 
> 标签：c#, entity-framework, linq-to-entities

我曾经问过一个类似的问题，旨在了解如何在另一组中获取与我持有的具有相同属性的模型。

现在的问题是：那么，实际上将我引导到另一组的“相似属性”的名称是什么。

原帖是： [C# LINQ to Entities query for the intersection of two different properties](https://stackoverflow.com/questions/11722084/c-sharp-linq-to-entities-query-for-the-intersection-of-two-different-properties)

我有3个模型命名：

1.  具有 Pencil.Id(int) 和 Pencil.Colors(IEnumerable) 属性的铅笔
2.  具有 Pen.Id(int) 和 Pen.Colors(IEnumerable) 属性的笔
3.  具有 ID 和名称的颜色。

颜色模型是 IEnumerable 所以它有超过 1 种颜色。例如; 钢笔有 15 种不同的颜色，铅笔有 25 种不同的颜色。如果我拿着的笔的其中一种颜色在该铅笔的调色板中也可用，我想带上相应的铅笔。

**Raphael**的最佳解决方案是[https://stackoverflow.com/a/11722191/1062284](https://stackoverflow.com/a/11722191/1062284)

```
int id = id_of_the_pen_that_i_am_holding;
Pen p = db.Pens.Find(id);
var penColorIds = p.Color.Select(m => m.Id).ToList();
var list = db.Pencils.Where(pencil => pencil.Color.Any(color => penColorIds.Contains(color.Id)); 
```

所以它是可以的，并且像一个魅力一样工作，但是学习常见颜色的名称怎么样？我们得到了其他具有相同颜色的属性，但该颜色是什么？

如果有人可以生成此 LINQ 查询，我将不胜感激。我对 LINQ 很陌生，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:51:23.590

您可以在使用[`Intersect`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.intersect.aspx)扩展名减少的颜色上使用[`SelectMany`](http://msdn.microsoft.com/en-us/library/bb534336.aspx)扩展名。

```
var commonColors = 
    db.Pens.SelectMany(p => p.Colors)
        .Insersect(db.Pencils.SelectMany(hb => hb.Colors)); 
```

* * *

由于`Intersct`可能返回一个序列，而不是一个集合，（我没有检查过）你可以像这样删除重复项

```
var commonColors = 
    db.Pens.SelectMany(p => p.Colors).Distinct()
        .Insersect(db.Pencils.SelcectMany(hb => hb.Colors).Distinct()); 
```

* * *

只做`Pen`一个

```
Pen p = db.Pens.Find(id); 
var commonColors = Pen.Colors
    .Insersect(db.Pencils.SelcectMany(p => p.Colors)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:30:09.807

如果您手里拿着多支笔，请使用（在变量中`pens`）

```
var colors = pens.SelectMany(p=>p.Colors).Distinct(); 
var commonColors = db.Pencils.SelectMany (p => p.Colors.Where(c=>colors.Contains(c))).Distinct() 
```

否则，如果您只有一支笔（在变量中`pen`）

```
var colors = pen.Colors;
var commonColors = db.Pencils.SelectMany (p => p.Colors.Where(c=>colors.Contains(c))).Distinct() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T14:38:04.790

好吧，不确定在一个查询中获取所有内容是否真的有意义，但是，有了这个，你应该得到一个铅笔的匿名对象列表和每支铅笔的常用颜色列表（未经测试）。

```
int id = id_of_the_pen_that_i_am_holding;
Pen p = db.Pens.Find(id);
var penColorIds = p.Color.Select(m => m.Id).ToList();

var list = db.Pencils.Where(pencil => pencil.Color.Any(color => penColorIds.Contains(color.Id))
.Select(l => new {
   pencil = l,
   colors = l.Color.Where(c => penColorIds.Contains(c.Id))
}); 
```

# linq - 使用 DynamicObject 的 Linq

> ID：11760504
> 
> 赞同：5
> 
> 时间：2012-08-01T13:37:46.207
> 
> 标签：linq, c#-4.0, dynamic

我有列表，其中 MyType：DynamicObject。MyType 继承自 DynamicObject 的原因是我需要一个可以包含未知数量属性的类型。

在我需要过滤列表之前，一切正常。有没有办法我可以做一个 linq 来做这样的事情：

```
return all items where any of the properties is empty string or white space? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T14:03:45.890

> （来自评论）我可以用 List 做上面的 linq 查询吗？

是的，您可以这样做`ExpandoObject`：

```
var list = new List<ExpandoObject>();
dynamic e1 = new ExpandoObject();
e1.a = null;
e1.b = "";
dynamic e2 = new ExpandoObject();
e2.x = "xxx";
e2.y = 123;
list.Add(e1);
list.Add(e2);
var res = list.Where(
    item => item.Any(p => p.Value == null || (p.Value is string && string.IsNullOrEmpty((string)p.Value)))
); 
```

提供`ExpandoObject`了一个接口，让您可以像在字典中一样枚举其属性-值对，从而使检查它们的过程变得更加简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:03:27.663

好吧，只要每个对象的属性在它们自己*内部不是未知*的，您就可以做到。

没有一个很好的通用方法来测试动态对象的所有属性，如果你无法控制`DynamicObject`你希望实现者实现的`GetDynamicMemberNames()`，你可以使用 nuget 包 ImpromptuInterface 的方法来[获取属性名称](http://code.google.com/p/impromptu-interface/source/browse/ImpromptuInterface/src/Impromptu.cs#557)并[动态调用那些名字](http://code.google.com/p/impromptu-interface/wiki/UsageReallyLateBinding#dynamic_Impromptu.InvokeGet%28object_target,_String_Or_InvokeMembe)。

```
return allItems.Where(x=> Impromptu.GetMemberNames(x, dynamicOnly:true)
                       .Any(y=>String.IsNullOrWhiteSpace(Impromptu.InvokeGet(x,y)); 
```

否则，由于它是您自己的类型`MyType`，您可以添加自己的方法来查看这些成员值的内部核算。

```
return allItems.Where(x => x.MyValues.Any(y=>String.IsNullOrWhitespace(x)); 
```

# asp.net - ASP.NET & IIS 7.0 -- HTTPS 站点预热脚本

> ID：11760516
> 
> 赞同：1
> 
> 时间：2012-08-01T13:38:27.237
> 
> 标签：asp.net, iis-7

[我在 IIS 7.0 上有一个 ASP.NET 4.0 站点，该站点存在此处](https://stackoverflow.com/questions/2102609/slow-first-page-load-on-asp-net-site)描述的首次加载问题。

我做了一些测试，可以确认它只是页面的第一次加载很慢；每个后续页面正常加载。在谷歌搜索之后，我发现了一个“预热”脚本，可以在应用程序池回收后第一次发送 HTTP 请求，这似乎解决了问题。但是，我不确定当我强制将页面设置为仅使用 HTTPS/SSL 时它是否会起作用？

我目前使用的脚本如下：

```
Dim website1

website1 = "http://<website domain>/Auth/Login.aspx"

Function WarmUpSite(strURL)
    On Error Resume Next
    Dim objHTTP 
    Set objHTTP = CreateObject("MSXML2.XMLHTTP")
    objHTTP.Open "GET", strURL, False
    objHTTP.Send
    If Err.Number=0 And objHTTP.Status=200 Then 
        Hget=strURL & " has been warmed up successfully at:  "&Date()&"  "&Time() 
    Else
        Hget=strURL & " found error at:  "&Date()&"  "&Time()
    End If
    Set objHTTP = Nothing
    'Section for writing into a text file
    Const FOR_APPENDING = 8
    strFileName = "C:\WarmUpLog.txt"
    Set objFS = CreateObject("Scripting.FileSystemObject")
    Set objTS = objFS.OpenTextFile(strFileName,FOR_APPENDING)
    objTS.WriteLine Hget
End Function

WarmUpSite(website1) 
```

所以我的问题是，如果我正在预热的网站是一个登录页面，它将是一个 HTTPS 地址，而不是 HTTP，我将如何完成这项工作？如果这是一个愚蠢的问题，我很抱歉，我做的网络工作相对较少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:11:19.977

好吧，显然它只是涉及将 website1 的值更改为 HTTPS url。

;)

# c++ - C++中动态数组的长度

> ID：11760521
> 
> 赞同：3
> 
> 时间：2012-08-01T13:38:30.210
> 
> 标签：c++, arrays, dynamic-arrays

> **可能重复：**
> [如何找到 sizeof（指向数组的指针）](https://stackoverflow.com/questions/492384/how-to-find-the-sizeofa-pointer-pointing-to-an-array)

我声明了一个这样的动态数组：

```
int *arr = new int[n];   //n is entered by user 
```

然后用它来查找数组的长度：

```
int len = sizeof(arr)/sizeof(int); 
```

它给出`len`as`1`而不是`n`. 为什么会这样？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-01T13:39:01.980

因为`sizeof`不适用于动态数组。它为您提供 的大小`pointer`，因为`int *arr`它是一个指针

您应该存储分配数组的大小或更好地使用`std::vector`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-01T13:40:04.413

因为`arr`不是数组，而是指针，并且您在指针大小等于`int`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T13:41:59.420

安德鲁是对的。您必须将**n**保存在某个地方（取决于您在哪里使用它）。或者，如果您使用的是 .NET，您可以使用 Array 或 List ...

# vba - 宏将数据从一个文件夹中多个文件中的特定工作表复制到合并文件

> ID：11760522
> 
> 赞同：0
> 
> 时间：2012-08-01T13:38:42.027
> 
> 标签：vba, excel

我是 Excel 宏的新手。

我有一个包含许多文件的文件夹。让我们说 A、B、C

他们都有一个名为摘要的工作表。

我想要一个名为 Summary 的新文件

它遍历每个文件并将摘要工作表复制到摘要文件中的单独工作表中。

摘要文件将包含 3 张名为 A、B、C 的工作表，每个工作表都有自己的摘要

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:45:18.430

首先，您需要一个文件列表。您可以使用另一个电子表格来保存列表，也可以按如下方式扫描目录：

```
Set fso = CreateObject("Scripting.FileSystemObject")
Set fld = fso.GetFolder("C:\temp")
s = ""
For Each fil In fld.Files
   s = s & fil.Name & vbCrLf 'a sample of doing something with each fil
   'here you can open each workbook using Application.Workbooks.Open

   'then, or later, if you like you can close the ones you opened
   'by remembering which workbooks were opened before you started.
Next 
```

-- 见：http: [//msdn.microsoft.com/en-us/library/aa242702%28v=vs.60%29](http://msdn.microsoft.com/en-us/library/aa242702%28v=vs.60%29)

接下来，您需要创建一个新工作簿，可以使用

```
Set newWkb = Application.Workbooks.Add() 
```

-- 见：http: [//msdn.microsoft.com/en-us/library/ff840478.aspx](http://msdn.microsoft.com/en-us/library/ff840478.aspx)

现在，您可以使用上述海报中描述的技术将工作表从一个工作簿复制到新工作簿。

作为参考，这里有一些关于 VBA 语言的好信息。查看语言参考下的各种函数、对象和方法等：http: [//msdn.microsoft.com/en-us/library/aa242702%28v=vs.60%29](http://msdn.microsoft.com/en-us/library/aa242702%28v=vs.60%29)

这里有一些关于 Excel 对象模型的好信息：http: [//msdn.microsoft.com/en-us/library/ff194068](http://msdn.microsoft.com/en-us/library/ff194068)

# textbox - dijit.form.DateTextBox 中的可滚动年份

> ID：11760525
> 
> 赞同：3
> 
> 时间：2012-08-01T13:38:49.140
> 
> 标签：textbox, calendar, dojo

dojox.widget.Calendar 让我们可以轻松地滚动这些年。可以模拟/添加到 DateTextBox 小部件吗？

我更喜欢 DateTextBox，因为它提供了验证和约束。此外，一旦打开，日历小部件（如在 livedocs 站点中）在选择日期之前无法关闭。而 DateTextBox 中的弹出日历则没有这个问题。

需要是这样的：对于出生日期字段，我们不能假设一个随机的默认年份，比方说，潜在用户可能出生在 1960 年到 2000 年之间的任何时间。因此，用户可能必须进行多次点击（较旧的他是，点击次数越多？！！）。如何解决这个可用性问题？日历小部件有助于轻松导航。但是 DateTextBox 一次只显示 3 年。

这可以通过任何 CSS 更改来完成吗？任何可能的组件混合和匹配？

我正在使用 v1.7.1

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:02:00.917

我也有同样的需求。有一张公开票（[10002](http://trac.dojotoolkit.org/ticket/10002)），但多年来一直没有做任何事情。我将尝试在邮件列表中获得答案。

# rspec - rspec：未定义的局部变量或方法“be_true”

> ID：11760528
> 
> 赞同：2
> 
> 时间：2012-08-01T13:38:54.210
> 
> 标签：rspec, cucumber, bundler, rspec2, rspec-expectations

我正在使用 rspec 2.4.0 和黄瓜 0.6.4。我正在运行一个简单的场景（为了这个问题）：

```
Scenario: Simple Test
When I test something 
```

带步骤定义：

```
require 'rspec'
require 'rspec/expectations'

When /^I test something$/ do
  result = (1==1)
  result.should be_true
end 
```

当我运行这个场景时，我遇到了以下问题：

```
 undefined local variable or method `be_true' for #<Object:0x1b3b424> (NameError) 
```

我也在使用 bundler 来管理我的依赖项。

我在这里做明显错误的事情吗？

问候，

标记

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T14:39:41.863

从黄瓜文档中：

> 要使用 RSpec 的 2.xx 期望（应该），请确保 features/support/env.rb 中有以下内容：

```
require 'rspec/expectations'
World(RSpec::Matchers) 
```

[https://github.com/cucumber/cucumber/wiki/RSpec-Expectations](https://github.com/cucumber/cucumber/wiki/RSpec-Expectations)

# c# - 静态代码分析以在 try/catch 块之外查找代码？

> ID：11760549
> 
> 赞同：1
> 
> 时间：2012-08-01T13:39:57.097
> 
> 标签：c#, exception-handling

我们有一个相当大的 c# 应用程序（1m 行+），它是高度多线程的。对于每个启动的线程，我们需要确保在正确的位置有一个 try/catch 块来捕获可能导致应用程序崩溃的错误。

我想知道是否有任何静态代码分析工具可以扫描代码并在任何尝试捕获之外找到点？

我在这个线程上看到：[如何自动查看哪些函数可能在 C#](https://stackoverflow.com/questions/915941/way-to-automatically-see-which-functions-can-potentially-return-exception-in-c-s)中返回异常，RedGate 曾经有 Exception Hunter，但是这个产品已经被撤回。

我正在寻找的东西会比异常猎人简单得多——它只会找到任何 try/catch 之外的“裸代码”，并突出显示它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:03:34.463

首先尝试反射。例如，您可以使用 MethodBody 查询异常处理。

如果还不够好，请移至 CCI：[http ://ccimetadata.codeplex.com/](http://ccimetadata.codeplex.com/)

# ios - 改变方向改变图像

> ID：11760556
> 
> 赞同：0
> 
> 时间：2012-08-01T13:40:10.113
> 
> 标签：ios, ipad, jquery-mobile, cordova, orientation-changes

因此，我使用 phoneGap/Cordova 和 Jquery mobile 为 iPad 设计了这个应用程序。

在研究了如何在方向变化时更改图像并浏览 Stack Overflow 的史诗资源之后。我实现了这段代码。

```
// The event for orientation change
var onChanged = function () {

    // The orientation
    var orientation = window.orientation,
        // If landscape, then use "land" otherwise use "port"
        image = orientation == 90 || orientation == -90 ? "landscape" : "portrait";

    // Insert the image
    $('#introimg').html('<img src="images/appimages/' + image + '-intro-page.png">');

};

// Bind the orientation change event and bind onLoad
$(window).bind(orientationEvent, onChanged).bind('load', onChanged); 
```

我正在尝试更改介绍页面的图像。我使用的html是：

```
<div data-role="page" id="intro">

        <div data-role="content" class="mycontent" data-theme="a">
            <div id="introimg">
                <img src="images/appimages/portrait-intro-page.png" alt="" width="768" height="1004" id="imglayer1" />
                <br />
                <p id="imglayer2"><a href="#help" data-role="button" data-inline="true" data-theme="a">Start designing</a></p>
            </div>

        </div>  
    </div> 
```

谁能说我做错了什么，这可能是愚蠢的，但我看不到。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:40:41.793

您可以为此使用类：

```
var onChanged = function () {

    // The orientation
   var orientation = (window.orientation == -90 || window.orientation == 90) ? "landscape" : "portrait";

   // Insert the image class
  $("introimg").removeClass("portrait").removeClass("landscape").addClass(orientation);

}; 
```

# vba - 如何使用#NAME 解决 excel 错误 2029？

> ID：11760561
> 
> 赞同：3
> 
> 时间：2012-08-01T13:40:24.660
> 
> 标签：vba, excel, cell

我读了一个excel文件，在一个单元格上我得到了这样的文本：

`"=- Bla Bla Bla".` 这将不会被识别并会显示`#NAME?`

因此，如果您需要读取一些单元格并将其输入数据库，则文件中的此错误将显示为`Error 2029`. 脚本将冻结。`=`那么，如果我在单元格中获取或字符，我是否可以预先替换内容，`-`以便在阅读内容并获取错误之前验证内容。我能不能越过它！

我需要细胞验证

```
Private Sub Worksheet_Change(ByVal Target As Range)
    c = Target.Cells.Column
    r = Target.Cells.Row
    'validate cell
End If 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:00:08.503

这是你正在尝试的吗？

```
Sub Sample()
    Dim sTemp As String

    With Sheets("Sheet1")
        '~~> Check if cell has error
        If IsError(.Range("A1").Value) Then
            '~~> Check if it is a 2029 error
            If .Range("A1").Value = CVErr(2029) Then
                '~~> Get the cell contents
                sTemp = Trim(.Range("A1").Formula)
                '~~> Remove =/-
                Do While Left(sTemp, 1) = "=" Or Left(sTemp, 1) = "-"
                    sTemp = Trim(Mid(sTemp, 2))
                Loop
                '~~> Either put it in back in the cell or do
                '~~> what ever you want with sTemp
                .Range("A1").Formula = sTemp
            End If
        End If
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:21:32.507

您还可以将数据验证添加到工作表中，以防止以这种方式输入内容。在“验证标准”下，允许“自定义”并输入以下公式：

```
=NOT(OR(IF(EXACT(LEFT(TRIM(A1),1),"-"),1,0),IF(EXACT(LEFT(TRIM(A1),1),"="),1,0))) 
```

如果在单元格中输入的值以“-”或“=”（带有前导空格）开头，则它不会接受它。如果该人输入`=123`，那么它将是有效的，因为它被视为公式并且只会将其视为`123`。

如果您不希望单元格包含`=`或`-` *根本*不包含，请尝试将其用于您的数据验证公式。同样，它无法捕捉到类似`=NOW()`or的公式`=-hi`（它会看到`#NAME?`for `-hi`），但它会拒绝，`=-123`因为它看到了`-123`. 如果您将单元格格式化为**Text**，那么它将拒绝任何带有`=`或`-`内部的单元格，因为以开头的值`=`不被视为公式。

```
=NOT(OR(ISNUMBER(FIND("=",A18)),ISNUMBER(FIND("-",A18)))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T12:24:47.730

我让它工作了

```
'verify cell for data
Private Sub Worksheet_Change(ByVal Target As Range)
    c = Target.Cells.Column
    r = Target.Cells.Row

    If IsError(Target.Worksheet.Cells(r, c)) Then
        MsgBox "You have a validation Error!"
        Target.Worksheet.Cells(r, c) = ""
        End If
End Sub 
```

# java - 如何在基于 Spring MVC 的 Web 应用程序中创建撤消功能。？

> ID：11760562
> 
> 赞同：2
> 
> 时间：2012-08-01T13:40:25.440
> 
> 标签：java, spring, model-view-controller, history, undo

我有一个员工和一个相应的员工历史表。

这两个表具有相同的结构。历史表用于跟踪员工在一段时间内所做的历史更改。

现在，我需要为对员工所做的更改添加撤消功能。

例如，员工头衔在 8 月 1 日更改。现在，这将更新 Employee 表中的员工职务，并在 employee_history 表中插入相应的历史记录。

现在，我需要撤消此更改。员工编辑页面将包含按日期对员工所做的更改列表，旁边有一个撤消按钮。

单击撤消应将 Employee 表中的更改恢复为以前的值。另外我认为历史表中标题已更改的记录也应删除。

此外，当我恢复对员工表的更改时，即将标题恢复为以前的标题，这将触发对历史表的​​插入，这是我不想要的。

我不确定这样做的最佳方法是什么。

任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:54:07.237

如果您想实现“持久”撤消 - 可以在应用程序重新启动/会话超时后幸存下来，您应该考虑扩展您的数据库模式宽度`timestamp`字段并删除最后一个条目或将其替换为适当的较早条目。

“轻量级”版本将使用堆栈来存储最后的交互，包括原始值和新值。当然，您可以在会话失效时保留堆栈以结合这两种方法。这似乎是您实际在做的事情。

您可以通过为每个更改创建和存储或导出 SQL 迁移脚本、记录更改以及（如果可能的话）相反的操作来扩展此解决方案。因此，您甚至可以在应用程序实例和环境之间传输脚本，并拥有数据库状态的完整“可重放性”。

tl;博士 - 看起来您已经实施了一个很好的解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:45:43.780

我建议使用一个标志来告诉触发器/历史逻辑在您运行撤消并且不写入历史数据时保持关闭。

通常，这将通过从您的历史表中提供序列化程序类并恢复员工数据，然后再次清理历史条目/解锁历史来完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T13:53:02.637

您也许可以使用事务的回滚功能。

# c# - 遇到异常时这个对象会自动处理吗？

> ID：11760571
> 
> 赞同：2
> 
> 时间：2012-08-01T13:40:57.633
> 
> 标签：c#, .net, garbage-collection

```
using(YourType yourObject = new YourType())
{
   //Treatment on you object 
   //Exception occurs here
} 
```

当我们这样写时，垃圾收集器会自动处理对象，但是如果在这里面发生异常，垃圾收集器仍然会处理对象或者我必须为它写点东西，我知道这是一个蹩脚的 q 但我真的很困惑，thnx

请解释不同 .net 框架中的处理方式，以使事情一目了然。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T13:42:22.150

是的，using 块仍然会调用`Dispose`异常。请参阅[MSDN 文档](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)。

> using 语句可确保调用 Dispose，即使在调用对象上的方法时发生异常也是如此。

还有另一篇有用[的文章避免使用语句出现问题](http://msdn.microsoft.com/en-us/library/aa355056.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T13:50:24.327

来自[MSDN 文档](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)

> using 语句可确保调用 Dispose，即使在调用对象上的方法时发生异常也是如此。您可以通过将对象放在 try 块中，然后在 finally 块中调用 Dispose 来获得相同的结果；事实上，这就是编译器翻译 using 语句的方式。

```
using (var object = new Object())
{
    object.DoSomething();
} 
```

等于：

```
var object = new Object();
try
{
     object.DoSomething();
}
finally
{
    object.Dispose();
} 
```

# python - argparse 参数嵌套

> ID：11760578
> 
> 赞同：26
> 
> 时间：2012-08-01T13:41:18.187
> 
> 标签：python, argparse

我在python中有以下代码：

```
parser = argparse.ArgumentParser(description='Deployment tool')
group = parser.add_mutually_exclusive_group()
group.add_argument('-a', '--add', dest='name_to_add', help='Add a new group or a role to existing group')
group.add_argument('-u', '--upgrade', dest='name_to_upgrade', help='Upgrade a group with the new version')
parser.add_argument('--web_port', help='Port of the WEB instance that is being added to the group') 
```

我的问题是“--web_port”选项。我希望能够仅使用“-a”选项而不是“-u”添加此选项。

我**希望**能够运行：“python my_script.py -a name --web_port=XXXX”。

我**不想**运行：“python my_script.py -u name --web_port=XXXX”

我应该如何更改我的代码才能以这种方式运行它？

谢谢，阿尔沙夫斯基亚历山大。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-08-01T13:46:55.787

您可能想让它们成为子命令，而不是拥有`-a`和成为选项。`-u`然后，`--web-port`选择`add`子命令：

```
python my_script.py add name --web_port=XXXX
python my_script.py upgrade name 
```

就像是：

```
parser = argparse.ArgumentParser(description='Deployment tool')
subparsers = parser.add_subparsers()

add_p = subparsers.add_parser('add')
add_p.add_argument("name")
add_p.add_argument("--web_port")
...

upg_p = subparsers.add_parser('upgrade')
upg_p.add_argument("name")
... 
```

如果你尝试运行

```
my_script.py upgrade name --web_port=1234 
```

您将收到无法识别的参数“--web_port”的错误。

同样，如果您尝试

```
my_script.py add name upgrade 
```

您将收到无法识别的参数“升级”的错误，因为您只为“添加”子命令定义了一个位置参数。

换句话说，子命令是隐式互斥的。唯一的小缺点是您需要将“名称”位置参数添加到每个子解析器。

# android - 在 Android App 中使用 Meter

> ID：11760581
> 
> 赞同：-1
> 
> 时间：2012-08-01T13:41:27.713
> 
> 标签：android

谁能告诉我这个问题？我有两个图像，一个图像是框架，另一个图像是蒙版，我想使用它，例如针对某种计算的结果用蒙版填充框架。例如结果是 60，然后框架也填充蒙版，但不是满但 60% 填满它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:51:58.577

您可以使用可绘制的剪辑来执行此操作。看看： http: [//developer.android.com/reference/android/graphics/drawable/ClipDrawable.html](http://developer.android.com/reference/android/graphics/drawable/ClipDrawable.html)。

# php - 为什么我的日期选择器和时间选择器不显示？

> ID：11760582
> 
> 赞同：0
> 
> 时间：2012-08-01T13:41:30.653
> 
> 标签：php, javascript, jquery

我的日期选择器和时间选择器没有显示在“输入日期：”和“输入时间：”字段旁边：http: [//heightsdental.com/RequestAppt.php](http://heightsdental.com/RequestAppt.php)。代码中有 php include 语句，当它们不存在时：[http://evamagnus.com/RequestAppt.php](http://evamagnus.com/RequestAppt.php)，将显示日期和时间选择器。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

<script src="js/modernizr-2.5.3.min.js"></script>

<script type="text/javascript" src="js/jquery.ptTimeSelect.js"></script>

<script src="js/dimensions.js" type="text/javascript"></script>

    <script src="js/jquery.ui.core.js">
     </script>
    <script src="js/jquery.ui.datepicker.js">
    </script>

<?php
include "Banner.html";
include "header.html"
?>

<div id="form">
<div id="contain">

    <form action="http://www1.budgethostingweb.com/cgi-bin/hosting/user_formmail.cgi" method="post">
    <input type="hidden" name="account" value="dentist">
    <input type="hidden" name="cata" value="accounts">
    <input type="hidden" name="redirect" value="index.php" />

      <table class="form_demo">
        <tr>
          <td>
            <label for="name">
              Name
            </label>
          </td>
          <td>
            <input class="input_full" type="text" id="name" name="name" required="required" />
          </td>
        </tr>
        <tr>
           <td><label for="email">
              Email
            </label>
          </td>
          <td>
            <input class="input_full" type="email" id="email" name="email" required="required" />
          </td>
        </tr>
        <tr>
          <td>
            <label for="cc">
              <abbr title="Courtesy Copy">CC</abbr>
            </label>
          </td>
          <td>
            <input type="checkbox" id="cc" name="cc" value="1" />
            <label for="cc">
              Send me a copy of this email
            </label>
          </td>
        </tr>
        <tr>
          <td>
            <label for="tel">
              Phone
            </label>
          </td>
          <td>
            <input class="input_full" type="tel" id="tel" name="tel" required="required" />
          </td>
        </tr>
        <tr>
          <td><label for="priority_normal">
              Priority
            </label>
          </td>
          <td>
            <input type="radio" name="priority" id="priority_urgent" value="Urgent">
            <label for="priority_urgent">
              Urgent
            </label>
            &nbsp;
            &nbsp;
            <input type="radio" name="priority" id="priority_normal" value="Normal" checked="checked">
            <label for="priority_normal">
              Normal
            </label>
            &nbsp;
            &nbsp;
        </td>
        </tr>
        <tr>
        <td>
            <label for="date">Enter a date:</label>
        </td>   
        <td>
            <input class="input_xlarge" type="text" id="date" name="date" required="required" />    

    <script>
      (function($){
         var pickerOpts = {
            minDate: new Date(),
            maxDate: "+3m,",
            showButtonPanel: true,
            showOn: "button",

            buttonImage: "images/cal.png",
            };
    $("#date").datepicker(pickerOpts);
      })(jQuery);
    </script>
    </td></tr>
    <tr><td>Enter a time: </td>
    <td><input id="time1" name="s2Time1" />

    <script type="text/javascript">
    $('#time1').ptTimeSelect({ popupImage: 'Select Time' });
    </script>
    </td>
    </tr>

        <tr>
          <td>
            <label for="description">
              Reason for<br />
              appointment
            </label>
          </td>
          <td>
            <textarea id="description" name="description" rows="3" required="required"></textarea>
          </td>
        </tr>

        <tr><td colspan="2">To prevent automated spam posts, <br>please type in the access code
displayed: <p><img alt="Access code"
src="http://www1.budgethostingweb.com/cgi-bin/captcha/imagegen.cgi?x-factor=1"/></p></td></tr>
        <tr><td>Access Code:</td> <td><input class="medium" name="access" type="text"></td>
        </tr>
      </table>
      <hr />
      <p class="clearfix">
        <input type="submit" value="Submit" class="float_left" />
        <input type="reset" value="Reset" class="float_right">
      </p>

    </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:47:33.467

以下路径中缺少文件：

[http://heightsdental.com/js/jquery.ui.core.js](http://heightsdental.com/js/jquery.ui.core.js)

[http://heightsdental.com/js/jquery.ui.datepicker.js](http://heightsdental.com/js/jquery.ui.datepicker.js)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T13:44:05.520

您的 jQuery UI 脚本包含失败。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T13:49:46.987

快速浏览一下 chrome 的开发工具会发现：

```
Failed to load resource: the server responded with a status of 404 (Not Found) http://heightsdental.com/js/jquery.ui.core.js
Failed to load resource: the server responded with a status of 404 (Not Found) http://heightsdental.com/js/jquery.ui.datepicker.js
Uncaught TypeError: Object [object Object] has no method 'datepicker' RequestAppt.php:159
Uncaught TypeError: Property '$' of object [object Window] is not a function RequestAppt.php:167 
```

含义：您的 JavaScript 包含指向不存在的文件的点。

查看[您的 js 子目录](http://heightsdental.com/js/)显示：它们确实不存在。

（顺便说一句，允许索引，禁用[目录列表](http://viralpatel.net/blogs/htaccess-directory-listing-enable-disable-allow-deny-prevent-htaccess-directory-listing/)很糟糕）

# android - Twitter 不会重定向到 Android 应用程序 - Twitter4J

> ID：11760584
> 
> 赞同：3
> 
> 时间：2012-08-01T13:41:37.773
> 
> 标签：android, twitter4j

我想使用 Twitter4J 连接到 Twitter。`MainActivity`打电话`TwitterLoginActivity`。TwitterLoginActivity 显示一个 WebView，然后通过 OnNewIntent() 获取 accessToken。问题是在我“登录”Twitter 后 WebView 显示“网页不可用”。这是我的代码。

MainActivity 调用 TwitterLoginActivity：

```
 final Intent intent = new Intent(MainActivity.this, TwitterLoginActivity.class);
                intent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
                startActivityForResult(intent, Constant.LOGIN_REQUEST); 
```

TwitterLoginActivity 显示一个 WebView。

```
 final WebView twitterSite = new WebView(this);
    final ViewGroup viewGroup = (ViewGroup)findViewById(R.id.twitterLoginRoot);
    viewGroup.addView(twitterSite);

    // Open keyboard when focusing on Twitter login form.
    twitterSite.requestFocus(View.FOCUS_DOWN);
    twitterSite.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(final View v, final MotionEvent event) {
            switch (event.getAction()) {
                case MotionEvent.ACTION_DOWN:
                case MotionEvent.ACTION_UP:
                    if (!v.hasFocus()) {
                        v.requestFocus();
                    }
                    break;
            }
            return false;
        }
    });
    twitterSite.setWebViewClient(new CustomWebViewClient());

    try {
        final RequestToken requestToken = twitter.getOAuthRequestToken(Constant.CALLBACK_URL);
        twitterSite.loadUrl(requestToken.getAuthenticationURL());
    } catch (final TwitterException e) {
        e.printStackTrace();
    } 
```

onNewIntent：

```
@Override
protected void onNewIntent(final Intent intent) {
    super.onNewIntent(intent);
    System.out.println("HIEU=================================");
    setResult(RESULT_OK);
    finish();
} 
```

我用它来防止默认浏览器加载。

```
private class CustomWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(final WebView view, final String url) {
        view.loadUrl(url);
        return true;
    }  
} 
```

清单文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.twitterapitest"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <uses-permission
        android:name="android.permission.INTERNET" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:name=".TwitterLoginActivity"
            android:label="@string/title_activity_main" 
            android:launchMode="singleInstance">
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.BROWSABLE" />
                <data android:scheme="test123"/>
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

回调 URI：

```
public static final String CALLBACK_URL = "test123:///"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T18:23:27.127

我猜你想要登录成功时推特返回的“oauth_verifier”，对吧？

您可以从返回 shouldOverrideUrlLoading 方法的 url 中获取它。做这样的事情：

```
webView.setWebViewClient(new WebViewClient(){
    @Override
    public void onPageStarted(WebView view, String url, Bitmap favicon) {
        progressDialog.show();
    }

    @Override
    public void onPageFinished(WebView view, final String url) {
        progressDialog.dismiss();
    }

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        String oauthVerifier = url.substring(url.indexOf("oauth_verifier=") + 15);
        Intent intent = new Intent(context);
        Bundle bundle = new Bundle();

        bundle.putString("oauth_verifier", oauthVerifier);
        intent.putExtras(bundle);

        ((Activity) ctx).setResult(RESULT_OK, intent);

        return true;
    }                 
}); 
```

我遇到了和你类似的问题。我不知道如何将 onNewIntent 调用到 WebViewClient 中，所以我不得不重新考虑真正需要什么，在我的结论中我意识到我只需要 oauth_verifier 并且我可以从返回的 URL 中获取它。

我希望这对你有帮助：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T05:43:09.723

使用下面的 URL 作为您的回调 url，它将解决您的问题。

```
public static final String CALLBACK_URL = "x-oauthflow-twitter://callback"; 
```

# android - 将 Build.PhoneGap.com 与 android 设备一起使用会导致“无法调用未定义的方法 'getPicture'”

> ID：11760592
> 
> 赞同：2
> 
> 时间：2012-08-01T13:41:50.027
> 
> 标签：android, mobile, cordova

我使用 Build.PhoneGap 站点中的示例代码从手机中捕获图像并收到“无法调用未定义的方法 'getPicture'”错误。

在 index.html 和以下 config.xml 中使用以下示例代码，我将压缩目录上传到 PhoneGap，将应用程序安装在 Thunderbolt Android 设备上，并在 capturePhoto 的“navigator.camera.getPicture”部分的 try catch 中() 函数我得到错误。有谁知道这可能会发生什么？提前致谢。

完整示例的网址：

> [http://docs.phonegap.com/en/1.0.0/phonegap_camera_camera.md.html](http://docs.phonegap.com/en/1.0.0/phonegap_camera_camera.md.html)

索引代码（不加注释）：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Capture Photo</title>

    <script type="text/javascript" charset="utf-8" src="phonegap-1.0.0.js"></script>
    <script type="text/javascript" charset="utf-8">

    var pictureSource;   // picture source
    var destinationType; // sets the format of returned value 

    document.addEventListener("deviceready",onDeviceReady,false);

    function onDeviceReady() {
        pictureSource=navigator.camera.PictureSourceType;
        destinationType=navigator.camera.DestinationType;
    }

    function onPhotoDataSuccess(imageData) {
      var smallImage = document.getElementById('smallImage');
      smallImage.style.display = 'block';
      smallImage.src = "data:image/jpeg;base64," + imageData;
    }

    function onPhotoURISuccess(imageURI) {
      var largeImage = document.getElementById('largeImage');
      largeImage.style.display = 'block';
      largeImage.src = imageURI;
    }

    function capturePhoto() {
      try
      { //this throws the error
        navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 50 });
      } catch(exc){
        alert(exc.message);
      }
    }

    function capturePhotoEdit() {
      navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 20, allowEdit: true }); 
    }

    function getPhoto(source) {
      navigator.camera.getPicture(onPhotoURISuccess, onFail, { quality: 50, 
        destinationType: destinationType.FILE_URI,
        sourceType: source });
    }

    function onFail(message) {
      alert('Failed because: ' + message);
    }

    </script>
  </head>
  <body>
    <button onclick="capturePhoto();">Capture Photo</button> <br>
    <button onclick="capturePhotoEdit();">Capture Editable Photo</button> <br>
    <button onclick="getPhoto(pictureSource.PHOTOLIBRARY);">From Photo Library</button><br>
    <button onclick="getPhoto(pictureSource.SAVEDPHOTOALBUM);">From Photo Album</button><br>
    <img style="display:none;width:60px;height:60px;" id="smallImage" src="" />
    <img style="display:none;" id="largeImage" src="" />
  </body>
</html> 
```

配置文件：

```
<?xml version="1.0" encoding="UTF-8" ?>
    <widget xmlns = "http://www.w3.org/ns/widgets"
        xmlns:gap = "http://phonegap.com/ns/1.0"
        id        = "com.phonegap.SampleImg"
        versionCode="10" 
        version   = "1.1.0">

    <!-- versionCode is optional and Android only -->

    <name>PhoneGap SampleImg</name>

    <description>
        An SampleImg for phonegap build docs. 
    </description>

    <author href="https://build.phonegap.com" email="myemail@somedomain.com">
        My Name
    </author>
    <!-- to enable individual permissions use the following examples -->
<feature name="http://api.phonegap.com/1.0/battery"/>
<feature name="http://api.phonegap.com/1.0/camera"/>
<feature name="http://api.phonegap.com/1.0/contacts"/>
<feature name="http://api.phonegap.com/1.0/file"/>
<feature name="http://api.phonegap.com/1.0/geolocation"/>
<feature name="http://api.phonegap.com/1.0/media"/>
<feature name="http://api.phonegap.com/1.0/network"/>
<feature name="http://api.phonegap.com/1.0/notification"/>

</widget> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T17:36:11.677

原来你需要有这个参考

```
<script src="phonegap.js" type="text/javascript" charset="utf-8"></script> 
```

代替

```
<script type="text/javascript" charset="utf-8" src="phonegap-1.0.0.js"></script> 
```

万一其他人遇到此 build.phonegap 将匹配适当的 phonegap.js 文件到您的目标平台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T06:29:42.247

[从http://phonegap.com/download/](http://phonegap.com/download/)安装最新版本的 cordova并添加到您的文件中。我希望你的问题得到解决。由于科尔多瓦的旧版本，这可能不支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-26T22:58:51.880

@Kevin Shah - phonegap.js 不是您需要下载或包含在目录中的文件。根据您的应用程序所针对的平台（iOS、Adroid 等），phonegap 将为您插入正确的“phonegap.js”文件。他们这样做是因为每个平台的行为不同 - 所以他们需要不同的 .js 文件。

您需要做的就是包含通用脚本点击，它会自动指向 phonegap 为所需平台插入的正确文件。

# c# - 如何从 ObservableCollection 中删除项目？

> ID：11760596
> 
> 赞同：3
> 
> 时间：2012-08-01T13:42:06.297
> 
> 标签：c#, foreach, ienumerable, observablecollection, enumerator

> **可能重复：**
> [在 foreach 中修改列表的最佳方法是什么？](https://stackoverflow.com/questions/759966/what-is-the-best-way-to-modify-a-list-in-a-foreach)

假设我有一个`ObservableCollection mycollection`并且我想通过枚举器做一些事情，比如：

```
foreach(var x in mycollection)
{
   // This will do something based on data of x and remove x from mycollection
   x.Close();
} 
```

该方法`Close()`有一行代码 - `mycollection.Remove(x);`. 当我运行此代码时，出现以下错误：

> 收藏已修改；枚举操作可能无法执行。

我无法更改方法`Close()`，因为它在应用程序的许多其他地方被调用。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T13:47:57.317

枚举集合时不能删除项目。一个简单的解决方案是使用`for`从最后一项到第一项的循环并根据需要删除：

```
for (int i = myCollection.Count - 1; i >= 0; i--)
{
    var item = myCollection[i];
    if (ShouldDelete(item))
    {
        item.Close();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T13:47:33.913

有两种方法可以解决这个问题：

1.  如果您不需要从列表中删除所有内容，请使用您`foreach`填充单独的“要关闭的项目”列表，并`.Close`在完成后调用第二个列表中的每个项目。这样，您可以避免`mycollection`在枚举时进行修改。
2.  如果您要调用列表中`Close`的*每个*项目，请尝试以下操作：

    ```
    while (mycollection.Count > 0
    { 
         mycollection[0].Close()) 
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T13:46:45.023

在 foreach 中，`mycollection.ToList()`改为使用。

# ruby-on-rails - S3 / Paperclip 在 Heroku 但不是 Localhost 上工作

> ID：11760597
> 
> 赞同：2
> 
> 时间：2012-08-01T13:42:11.450
> 
> 标签：ruby-on-rails, amazon-s3, paperclip

Paperclip 非常适合我在 Heroku 上的应用程序，但我似乎无法让它在本地工作。每次我尝试做某事时，我都会得到一个“缺少必需的 :bucket 选项”......但是存储桶就在那里，它可以在 Heroku 上运行！

如果有帮助，这是我的模型：

```
 has_attached_file :screen_one, :styles => { :medium => "800x600>", :thumb => "110x80#" },
  :storage => :s3,
  :s3_credentials => {
    :access_key_id => ENV['accesskeyishere'],
    :bucket => ENV['sitebuilderreport'],
    :secret_access_key => ENV['secretaccesskeyishere']
  } 
```

我已经更改了访问密钥，因为这是一个公开帖子:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T20:01:01.520

I met the same problem (missing :bucket every single where). The answer below works perfectly in my case.

a. Add these to **.bash_profile** (Note: Fill in with your Amazon account credentials)

```
export AWS_ACCESS_KEY_ID=XXXXXXXXXX
export AWS_SECRET_ACCESS_KEY=XXXXXXXXXX
export AWS_BUCKET=XXXXXXXXXX 
```

b. This is my **development.rb** (Note: Copy and paste without changing anything)

```
Paperclip.options[:command_path] = "/usr/local/bin/"

config.paperclip_defaults = {
    :storage => :s3,
    :s3_credentials => {
      :bucket => ENV['AWS_BUCKET'],
      :access_key_id => ENV['AWS_ACCESS_KEY_ID'],
      :secret_access_key => ENV['AWS_SECRET_ACCESS_KEY']
    }
} 
```

Be sure you rebundle your Rails app with the latest paperclip and aws-s3 gems. Also, make sure you quit your Terminal and run everything again since this is an update to your .bash_profile file.

I hope everything works out now.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T15:01:29.770

您应该在 mac os的用户**.bash_profile中定义****ENV[]**变量。

 **您应该执行“heroku config”来查看 S3 的 heroku 环境密钥并在本地环境中定义它。

例如：

```
$ heroku config

AWS_ACCESS_KEY_ID: your_S3_XXX_key<br />
AWS_SECRET_ACCESS_KEY: your_secret_XXX_key<br />
AWS_BUCKET: your_production_bucket<br />
DATABASE_URL: postgres://xxxxxxx<br />
[...]<br /> 
```

您应该在**.bash_profile**文件中复制 access_key 和 secret：

```
export AWS_ACCESS_KEY_ID=your_S3_XXX_key<br />
export AWS_SECRET_ACCESS_KEY=your_secret_XXX_key
export AWS_BUCKET=your_development_bucket => "Specify new bucket for your dev environement". 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-10T22:44:01.213

万一有人在做我做的同样愚蠢的事情——并制作一个本地脚本来导出所有 AWS 环境变量——确保你在生成 rails 服务器的同一个终端会话中获取它！如果您使用拆分窗口 (CMD SHIFT D)，请记住，在一个窗口中获取正确的环境变量不会在另一个窗口中这样做。非常愚蠢的错误，但我确信（或至少有点希望）我不会是唯一一个成功的人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T03:46:01.530

您也可以简单地使用（当然填写正确的值）：

```
config.paperclip_defaults = {
    :storage => :s3,
    :s3_credentials => {
      :bucket => 'AWS_BUCKET',
      :access_key_id => 'AWS_ACCESS_KEY_ID',
      :secret_access_key => 'AWS_SECRET_ACCESS_KEY'
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-19T08:21:01.393

我有同样的问题，我有 config/application.yml （不确定它是否是遗留的东西或它来自哪里），但这允许在 rails 'codebase' 中设置环境变量。我忘了它在这里，在 heroku 中被忽略并且覆盖了一些未设置的设置。doh！**

# security - 安全存储敏感数据客户端

> ID：11760602
> 
> 赞同：2
> 
> 时间：2012-08-01T13:42:36.863
> 
> 标签：security, cookies, encryption, data-storage, bcrypt

**背景故事** 我在一家中小型公司工作，我们正在改造面向客户的会计门户，我的经理想要使用存储在最终用户计算机上的 cookie 中的信用卡信息进行单击支付选项。我一点也不喜欢这个主意……（事实上我还在努力改变他的想法）。话虽如此，我正在努力使其尽可能安全，我想我有办法将风险降到最低，这里是：

使用 SSL 进行所有交换

在本地存储的许多 cookie 中加密数据，并将密码作为每次必须输入的确认密码。强制密码变强，比如 15+ 个混合字符，这可以通过在服务器上检查它的哈希来确认。

我知道主要的弱点是以双向加密方式存储的 cookie 信息，也就是说这是一种相当安全的信息存储方式....

**问题** 如何使用这种基本方法对其进行改进。

**请**我知道会有很多事情*不要这样做！*答案（如果我不问，我会是其中之一）所以请具体一点，你是在向合唱团讲道，所以在消极方面要有建设性。

**编辑**- 如果您认为我可以在与我的经理推理时使用特定的观点，请分享。（我已经提出，如果抄送信息从 cookie 中被盗，我们可能会承担法律责任，他说他会让律师检查一下）

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:48:19.713

> 使用 SSL 进行所有交换

无论您使用什么解决方案，只要涉及信用卡/付款信息，都应该这样做。你可能知道。

> 在本地存储的许多 cookie 中加密数据，并将密码作为每次必须输入的确认密码。强制密码变强，比如 15+ 个混合字符，这可以通过在服务器上检查它的哈希来确认。

我通常会记住我的信用卡号，我宁愿把它放进去（因为我已经打算不向任何人透露它）而不是大多数客户无论如何都会写在某个地方的长而复杂的钥匙。

即使我们不允许说“不要这样做！” - 你为什么不向我们寻求好的方法来劝阻你的经理不要做出这个决定呢？;-)

是什么让你不愿意在服务器端存储这个？这不像亚马逊将我的信用卡信息存储在 cookie 中。基本思想是将*所有用户信息*存储在服务器上，并在用户成功认证（即登录）时访问它。

在这种情况下，Cookie 用于在浏览器会话之间保持*登录状态。*此*登录*-session 有权访问的信息存储在服务器上。对于信用卡信息，这通常比其他敏感信息需要更多的安全性，但这是相同的基本思想。

当一些精通技术的客户意识到您在做什么时，将实际信用卡号存储在 cookie（加密或未加密）中可能是潜在的公关噩梦。

更多阅读主题：[哪些信息可以存储在 cookie 中？](https://stackoverflow.com/questions/706858/what-information-is-ok-to-store-in-cookies)

**编辑：**我越读这个问题，我就越傻眼。你的经理甚至知道 cookie 是什么吗？这个怎么运作？它有什么意义？说你想在 cookie 中存储信用卡信息就像说你想用鞋子作为运输鞋带的一种方式。*他无缘无故地积极而有目的地射击自己的脚。*他想要实现的目标可以通过其他更安全的技术更轻松地实现——而不会损失任何功能。

来自Scott Hanselman 链接的[一篇文章：](http://www.west-wind.com/presentations/aspnetecommerce/aspnetecommerce.asp)

> 存储信用卡
> 
> 如果您绝对必须存储信用卡数据，则应以加密形式存储。
> 
> 供应商应该遵循各种**合规标准**（特别是 CSIP 和 PCI），这些标准描述了如何保护网络和存储数据的具体规则。这些规则相当复杂，需要非常昂贵的认证。然而，这些标准是如此严格和昂贵，以至于小企业几乎不可能遵守。虽然较小的供应商不太可能被迫遵守，**但如果存在欺诈或安全漏洞，不遵守实质上会免除信用卡公司的任何责任。换句话说，您对损害的全部程度负有全部责任**（实际上，无论如何，您都是如此——我只是在回应这些认证的粗略概念）。

（我的重点）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:29:21.327

指出 Cookie 会在每个请求中传输。如果您将信用卡信息存储在其中，不仅安全性降低，而且您实际上并没有获得任何实际的时间收益。除了更容易实现之外，没有理由这样做。既然你是实施它的人，他不应该关心实施的难易程度......

编辑：您还可以指出，如果出现任何问题，他将是被解雇的人。威胁他的工作是让他以你的方式看待它的好方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T19:12:47.163

不要使用用户的密码作为密钥，或者至少，它不应该是唯一组成密钥的东西。您应该使用存储在服务器上（用户不知道）的私钥加密信用卡帐户信息。

您可以在服务器上解密信用卡信息，即使它存储在客户端上。这样一来，加密的信用卡信息就无法在客户端（在不知道私钥的情况下）进行反转。

您可以使用私钥和用户输入的密码对信用卡帐户信息进行加密，这样，如果没有正确的密码，它们就无法发送到服务器进行解密。

# javascript - 需要帮助拆分字符串

> ID：11760603
> 
> 赞同：-3
> 
> 时间：2012-08-01T13:42:39.390
> 
> 标签：javascript, split

我有以下字符串：

```
(42332,4333),(3243242,23432) 
```

我想使用正则表达式来生成以下内容：

```
[0]=42332,4333
[1]=3243242,23432 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:45:23.310

```
var s = "(42332,4333),(3243242,23432)"

s.match(/(\d+\,\d+)/g); // return ["42332,4333" , "3243242,23432"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:50:02.307

我建议使用正则表达式，因为 string.split 在这种情况下不会真正起作用。

```
var yourString = '(42332,4333),(3243242,23432)';

var result = yourString.match(/\((\d+,\d+)\)/g);

result[0]; // '42332,4333'
result[1]; // '3243242,23432' 
```

你可以在这里弄乱正则表达式：[http ://regexr.com?31n05](http://regexr.com?31n05)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T13:52:30.733

尝试这个：

`("(42332,4333),(3243242,23432)").replace(/(\),\()|(\)|\()/g, '$1').split('),(')`

# iphone - 如何判断我们何时与 GameCenter GKMatch 会话断开连接？

> ID：11760604
> 
> 赞同：2
> 
> 时间：2012-08-01T13:42:39.530
> 
> 标签：iphone, objective-c, ios, game-center, multiplayer

我想知道当游戏会话正在进行并且我们无法将我们的数据传达给其他玩家时，如何获得本地玩家的断开消息。由于文档中没有任何内容说“只要您的连接失败，此方法就会通知您”，我有点不知所措。

我试图使用这段代码，希望它能起作用，但它是徒劳的。“我们已断开连接”。消息永远不会被触发。

```
- (void)match:(GKMatch *)theMatch player:(NSString *)playerID didChangeState:(GKPlayerConnectionState)state {
  if (self.match != theMatch) return;

  switch (state) {

    case GKPlayerStateDisconnected:
      //disconnected
      NSLog(@"player status changed: disconnected");
      matchStarted = NO;
      GKLocalPlayer *player = [GKLocalPlayer localPlayer];
      if ([playerID isEqualToString:player.playerID]) {

        // We have been disconnected
        NSLog(@"We're disconnected.");
      }
      if ([delegate respondsToSelector:@selector(matchEnded)]) {
        [delegate matchEnded];
      }
      break;
  }
} 
```

我发现的唯一另一条线可能会告诉我们我们无法通信是当我们实际发送这样的数据时：

```
- (void)sendRandomMatchData:(NSData *)data {  
  GKMatch *match = [GCHelper sharedInstance].match;
  BOOL success = [match sendDataToAllPlayers:data
                                withDataMode:GKMatchSendDataReliable
                                       error:nil];
  if (!success) {
    [self matchEnded];
  }
} 
```

但是我假设如果对手断开连接并且我们无法向他们发送消息，那么“成功”也将是错误的。

我有一个非常严格的游戏逻辑，如果有人掉线了，我需要通知他们他们无法继续比赛并且他们已经输了。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T17:00:37.003

有两个地方可以做到这一点，都在[GKMatchDelegate](http://developer.apple.com/library/ios/#documentation/GameKit/Reference/GKMatchDelegate_Ref/Reference/Reference.html)协议中。

首先是实施：

```
- (void)match:(GKMatch *)match player:(NSString *)playerID 
  didChangeState:(GKPlayerConnectionState)state
{
} 
```

如果***是 2 人比赛***，那么您可以发现断开连接的第二个地方是：

```
- (BOOL)match:(GKMatch *)theMatch shouldReinvitePlayer:(NSString *)playerID
{
} 
```

`GKMatch`当终止时，这两个事件都会可靠地触发。如果 Stan 的回答回答了您的问题，那么我*强烈*`NSError`建议您练习在任何可用的地方进行捕捉！可以为您节省大量时间。

所以要发送数据并捕获错误：

```
NSError* nsErr ;
int result = [theMatch sendData:nsd toPlayers:theMatch.playerIDs
              withDataMode:GKMatchSendDataReliable error:&nsErr] ;
if( !result ) { // NO if the match was unable to queue the data.
  error( nsErr, "Failed to sendRoundtripPing" ) ;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T20:54:26.477

检查`error`以下代码行之后的内容如何：

```
 BOOL success = [match sendDataToAllPlayers:data
                                withDataMode:GKMatchSendDataReliable
                                       error:nil]; //replace nil with NSError variable 
```

也许`error`会给你额外的信息你需要。
另一个想法是创建 NSTimer 并设置一些特定的时间来进行移动/转弯。如果某个玩家在一段时间内没有成功，则假设该玩家已断开连接。您还可以检查您的 Internet 连接状态以确定您是否有连接，因为您可能只是丢失了它，这就是您无法发送/接收任何数据的原因。
您还可以通过使用 GC 向他们发送一些少量数据来定期检查每个玩家，以便让他们回答您。这样，您可以确保所有玩家都“活着”或检测到一些“僵尸”。
请记住，如果玩家使用主页按钮将游戏移至后台，则无论如何您都不会检测到它，因为游戏中的代码不会执行。而这种情况并不意味着玩家是“僵尸”。播放器可能正忙于通话或其他应用程序之类的东西。播放器可能会暂时断开 Internet 连接。这意味着他/她可以很快回到比赛中......

# xml - XML DTD Specify a cdata/text pattern for attribute

> ID：11760608
> 
> 赞同：1
> 
> 时间：2012-08-01T13:42:57.880
> 
> 标签：xml, dtd

Is there a way, in a DTD, to specify a "pattern" for a given attribute.

Example: I want to have an attribute called "*position*" which is a string of the form **"X,Y"**.

I would like to have something in my DTD similar to:

```
<!ATTLIST MyElement 
    myattribute "*,*"
> 
```

*(I know, for this example two attributes X and Y would certainly be better, but that's just to highlight what I want to do)*

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:00:09.520

You can't specify a pattern using DTD. You could do it using a schema though:

```
 <xs:element name="MyElement">
    <xs:complexType>
      <xs:attribute name="myattribute" use="required">
        <xs:simpleType>
            <xs:restriction base="xs:string">
                <xs:pattern value="[^,]+,[^,]+"/>
            </xs:restriction>
        </xs:simpleType>
      </xs:attribute>
    </xs:complexType>
  </xs:element> 
```

The `value` in `xs:pattern` is a regular expression.

# .net - 导航后带有 WP7 .NET Silverlight 自定义控件的 NPE

> ID：11760609
> 
> 赞同：1
> 
> 时间：2012-08-01T13:42:59.093
> 
> 标签：.net, windows-phone-7, silverlight-4.0

我已经实现了一个自定义控件，它基本上是屏幕底部的一个按钮面板。我们的应用程序有几个视图，其中大多数将引用此自定义控件。

我创建了一些影响自定义控件中某些 UIElements 的显示属性的方法，但是这些方法在离开默认视图后停止工作，因为所有 UIElements 都变为 null。有人可以解释为什么会发生这种情况以及我能做些什么来防止这个问题吗？如果这仅在一个视图中可用，我所有的工作都将一无所获！这里有一些代码可以使用：

我的自定义控件：

```
<ControlTemplate TargetType="local:ControlBar">
  <Grid x:Name="ControlPanel" Margin="0" Background="{StaticResource PhoneChromeBrush}" Height="70" VerticalAlignment="Bottom" Grid.Row="1">
    <Canvas x:Name="ControlPanelButtonStack">
      <Button x:Name="GoButton" HorizontalAlignment="Left" Width="70" Canvas.Left="6" Canvas.Top="8" Visibility="Visible"/>
      <Button x:Name="StopButton" HorizontalAlignment="Left" Width="70" Canvas.Left="6" Canvas.Top="8" Visibility="Collapsed"/>
    </Canvas>
  </Grid>
</ControlTemplate> 
```

造成问题的方法：

```
public void DisableGoButton()
{
   Button goButton = this.GetTemplateChild("GoButton") as Button;
   goButton.IsEnabled = false;
} 
```

上面的方法可以在 MainPage.xaml 中工作，但是一旦我们导航到不同的视图（称为 SettingsPage.xaml），它就会失败，因为 goButton 将始终为空。在所有这些视图中，自定义控件在 XAML 中被引用，如下所示：

```
<controlBar:ControlBar x:Name="ControlBar" Margin="0,698,0,0" Grid.Row="1" /> 
```

有没有遇到过这个问题的人知道如何解决它？谢谢！

# c# - 使用客户端证书的智能卡身份验证

> ID：11760613
> 
> 赞同：3
> 
> 时间：2012-08-01T13:43:03.257
> 
> 标签：c#, authentication, iis, client-certificates

我有一个第三方 Web 应用程序，现在我的经理想要将智能卡身份验证添加到某些页面（而不是整个应用程序）并返回证书信息。我在想的是在这些页面上添加按钮，在这种情况`onclick`下，我将进行客户端证书身份验证（其中将出现证书选择窗口，然后是“PIN”窗口）并返回证书对象以进行进一步处理。

我最初考虑使用 Web 服务来进行客户端证书身份验证并返回证书信息，这会很棒，因为我们可能会考虑在其他 Web 应用程序（在不同平台上）中使用该 Web 服务。但是，我找不到任何这样做的代码示例。然后我找到了[IIS 解决方案](http://technet.microsoft.com/en-us/library/cc770480%28v=ws.10%29)。

我现在创建了一个单独的文件夹，其中包含一个需要客户端证书的页面。在按钮单击事件中，我重定向到该页面。`X509Certificate`然后在该页面上，我使用该类检索证书信息。我认为这对我正在尝试做的事情没有帮助，或者至少我不知道它有什么帮助。

所以我的问题是（抱歉，背景描述太长了）

1.  如何使用认证结果从该页面重定向回来？
2.  如果可能的话，任何关于如何建立一个 Web 服务的参考，该 Web 服务以与 IIS 相同的方式进行客户端证书身份验证？

谢谢

**更新** 我环顾四周，仍然不知道如何实现这一目标。我不确定如何在 SSL/TLS 握手阶段为 Web 服务编写代码。我也不知道如何将认证返回到我调用此函数的页面。所以我现在要做的是从需要客户端身份验证的受保护页面重定向。似乎 Web 服务器缓存了身份验证结果。这是我的第三个问题，希望有人能回答。

如何在页面会话结束时清除身份验证结果，以便每次访问该页面时，它都会请求客户端身份验证（其中将出现证书选择窗口，然后是“PIN”窗口）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T20:10:42.617

如果您的应用程序托管在 IIS 中，则只需添加（在 web.config 中）一个部分，说明这些页面需要客户端证书。然后浏览器将要求用户提供证书。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-22T07:18:47.653

Windows 具有缓存功能，默认情况下，允许应用程序在初始 PIN 提示后或直到应用程序完全关闭之前的有限时间内访问私钥。

要禁用，请设置此注册表项。（或使用 GPO）

```
[HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Microsoft\Cryptography]
"PrivKeyCacheMaxItems"=dword:00000000
"PrivKeyCachePurgeIntervalSeconds"=dword:00000000 
```

# javascript - 如何向构造函数创建的 javascript 对象的所有实例添加数据/函数？

> ID：11760614
> 
> 赞同：0
> 
> 时间：2012-08-01T13:43:07.143
> 
> 标签：javascript

如何向构造函数创建的 javascript 对象的所有实例添加数据/函数，以便所有实例具有相同的引用而不是它的副本？

基本上实现了 C# 中静态方法的等价物。

例如，给定以下创建 Widget 类的代码。

```
(function() {

    var Widget = function() {
    };

    Widget.prototype.init = function(data) {
        this.data = data;
    };

    this.Widget = Widget;
}).call(this);
var instance1 = new Widget();
instance1.init('inst1');
var instance2 = new Widget();
instance2.init('inst2');

alert(instance1.data); // inst1
alert(instance2.data); // inst2 
```

在上述情况下，每个实例都有自己的 data 属性副本。但是我想添加一个为所有当前和未来实例设置数据的函数。

我目前的解决方案是向构造函数对象添加一个函数，而不是它的原型。例如，请参见下文。这有什么陷阱吗，有没有更好的方法？

```
(function() {

    var Widget = function() {
    };

    Widget.prototype.init = function(data) {
        this.data = data;
    };

    Widget.addStaticData = function(data) {
        this.staticData = data;
    };

    Widget.prototype.getStaticData = function() {
        return Widget.staticData;
    };

    this.Widget = Widget;
}).call(this);
var instance1 = new Widget();
instance1.init('inst1');

Widget.addStaticData('static');

var instance2 = new Widget();
instance2.init('inst2');

alert(instance1.data); // inst1
alert(instance2.data); // inst2
alert(instance1.getStaticData()); // static
alert(instance2.getStaticData()); // static 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:50:28.333

我能想到的三个陷阱：

*   方法论：原型是共享、重用、继承的功能/属性的地方——这样利用它

*   性能：继承比每次在实例上设置要快。John Resig（jQuery 创建者）在一篇我目前似乎无法找到的博客文章中对此进行了一些基准测试。

*   失去继承和拥有的财产之间的分裂。如果您通过构造函数将所有内容应用于实例，则所有内容都是实例属性。

**一切都通过构造函数：**

```
function Dog() { this.legs = 4; }
var fido = new Dog();
fido.name = 'Fido';
for (var i in fido) if (fido.hasOwnProperty(i)) alert(i+' = '+fido[i]); 
```

...警报这两个属性，因为它们被认为是实例自己的。

**通过原型和构造函数**

```
function Dog2() { }
Dog2.prototype.legs = 4;
var fido = new Dog2();
fido.name = 'Fido';
for (var i in fido) if (fido.hasOwnProperty(i)) alert(i+' = '+fido[i]); 
```

...警报只是`name`因为这是唯一的实例属性。（尽管如此，`fido.legs`是可检索的 - 但它来自原型）。

[编辑 - 回应下面的 OP 评论]

如果您想要一个静态方法，则应在声明后将其添加到函数中。

```
function Dog() {}
Dog.static = function() {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:04:24.013

考虑一个局部变量`staticData`而不是`Widget.staticData`属性。这样，外部命令将无法直接写入数据，因此写入数据的唯一方法是通过`addStaticData`函数：

```
(function () {
    var Widget = function () {};
    var staticData;

    Widget.addStaticData = function ( obj ) {
        staticData = obj.data;
    };

    Widget.prototype.init = function () {
        var data = staticData;
        // use data
        // or just use the staticData variable directly
    };

    this.Widget = Widget;
}).call( this ); 
```

使用您的代码，您可以执行以下操作：

```
Widget.staticData = { data: 'COMPROMISED!' }; 
```

更改静态数据。由于您有设置静态数据的专用功能，因此您可能不希望以其他方式更改静态数据。

用我的代码，上面的语句没有任何作用，只能通过`addStaticData`函数来​​改变静态数据。

# xml - 对十六进制字符串进行 xslt 转换

> ID：11760620
> 
> 赞同：0
> 
> 时间：2012-08-01T13:43:28.870
> 
> 标签：xml, xslt, xslt-1.0

我必须以一种特殊的方式转换我的字符串，因为字符串包含许多十六进制值，并且必须根据某些条件应用替换。

我的字符串包含十六进制值。

字符串的长度始终是 18 的倍数。字符串可以包含 1*18 到 5000*18 次（1 组到 5000 组）。

现在我的输出是基于以下条件的转换字符串

```
1) Check if the groups 13th character is 4e(13th and 14th character)

  Then, change such a way that starting from 7th to 10th character(4 chars) of the string, from whatever the value is to '4040'

    Also change starting from 11th till 16th(6 chars) to '4ef0f0'
    The 17th and 18th to be '4040'

   The whole group to be changed based on the above

2) If the check fails, no change for the group 
```

例如，如果我的输入字符串是 - 一组并且第 12 和第 13 是 '4e'

```
<xsl:variable name="inputstringhex"
      select="'005f6f7e8f914e7175'"/> 
```

应该改成

```
'005f6f40404ef0f04040' 
```

我使用的是 xslt1.0，我只能使用分而治之的方法（如果使用任何递归），因为如果使用尾递归方法，我的 xslt 处理器会出错，对于大量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:17:06.637

您可以使用二进制日志递归（也许这就是您所说的分而治之的意思？无论如何，这个 XSLT 1.0 样式表......

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>
<xsl:strip-space elements="*" />

<xsl:variable name="inputstringhex"
      select="'005f6f7e8f914e717512346f7e8f914e7175'"/>

<xsl:template match="/">
  <t>
    <xsl:call-template name="string18s">
      <xsl:with-param name="values" select="$inputstringhex" />
    </xsl:call-template>
  </t>  
</xsl:template>

<xsl:template name="string18s">
  <xsl:param name="values" />
  <xsl:variable name="value-count" select="string-length($values) div 18" />
  <xsl:choose>
    <xsl:when test="$value-count = 0" />
    <xsl:when test="$value-count &gt;= 2">
      <xsl:variable name="half-way" select="floor( $value-count div 2) * 18" />
      <xsl:call-template name="string18s">
        <xsl:with-param name="values" select="substring( $values, 1, $half-way)" />
      </xsl:call-template>
      <xsl:call-template name="string18s">
        <xsl:with-param name="values" select="substring( $values,
         $half-way+1, string-length($values) - $half-way)" />
      </xsl:call-template>      
    </xsl:when>  
    <xsl:otherwise>
      <xsl:call-template name="process-one-string18">
        <xsl:with-param name="value" select="$values" />
      </xsl:call-template>
    </xsl:otherwise>  
  </xsl:choose>
</xsl:template>

<xsl:template name="process-one-string18">
  <xsl:param name="value" />
  <v>
   <xsl:choose>
    <xsl:when test="substring( $value, 13, 2) = '4e'"> 
      <xsl:value-of select="concat( substring( $value, 1, 6),
                                    '40404ef0f04040')" />
    </xsl:when> 
    <xsl:otherwise>
      <xsl:value-of select="$value" />
    </xsl:otherwise> 
   </xsl:choose>
  </v>  
</xsl:template>

</xsl:stylesheet> 
```

...将产生此输出...

```
<t>
  <v>005f6f40404ef0f04040</v>
  <v>12346f40404ef0f04040</v>
</t> 
```

根据需要调整或连接输出的值。输入是 $inputstringhex 变量内容。使用此解决方案只能在 13 级递归中处理 5000*18 长度的输入字符串。

# spring - 生成的 Spring 动态代理存储在哪里？

> ID：11760621
> 
> 赞同：0
> 
> 时间：2012-08-01T13:43:30.583
> 
> 标签：spring, storage, dynamic-proxy

谁能告诉我 Spring 框架生成的动态代理（字节码）**存储/保存在**哪里？

在文件系统上？在记忆中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:54:45.557

它在内存中 - 该类没有字节码增强，但本质上是创建了一个包装器，它拦截对包装类的所有方法调用并将调用委托给 InvocationHandler 。

[http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Proxy.html](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Proxy.html) http://docs.oracle.com/javase/7/docs/api/java/lang/reflect /InvocationHandler.html

# php - PHP MVC - 从模型或控制器调用视图函数？

> ID：11760622
> 
> 赞同：3
> 
> 时间：2012-08-01T13:43:39.333
> 
> 标签：php, model-view-controller

在阅读了一些关于 Stack 的帖子以及在线向我推荐的一些资料后，MVC 模式的解释非常开放，所以请不要用其他解释来回答。谢谢！

我现在已经完成了设计自己的 PHP MVC 的工作，并且有两种可能的方式来推进视图。

但首先，我的控制器目前非常愚蠢，不包含任何类，只是从合适的模型调用公共方法，并呈现适当的视图。

视图是根据需要包含在内的，因此很自然地，对象可以通过构造函数以及所有方法（包括删除/更新等）提供给它们。

我的第一个选择是在视图中使用类似的东西获取数据

```
foreach($object->fetchData() as $data) 
```

然后循环遍历结果。然而，也有人不同意这一点，并建议将此类方法排除在视图之外。相反，建议我将其分配给构造函数中的变量，然后在视图中使用此变量

```
//constructor
$fetched_data = $object->fetchData()

// view
foreach($featched_data as $data) 
```

我不太喜欢这个，因为它看起来很乱而且没有必要。

我的所有关键方法都可用于视图，这是否会被视为一个问题？

所以这就是问题所在。我是否保持原样，并在模型中创建用于呈现数据的新方法（如上所述），或者我可以在构造函数中创建一个类，将模型扩展到其中，保护模型中的关键功能，然后创建我的只读构造器中的公共方法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:41:28.860

我会在构造函数中创建一个类。扩展模型不仅是一种更安全的方法，而且还可以最大限度地减少视图中函数的调用。我假设您将有多个视图，访问构造函数数据比每次在每个视图中调用方法函数要容易得多。

您可以将类添加到将调用方法函数并将数据直接传递到视图的控制器中，而不是集群您的构造函数或引导程序。

# python - 如何使用 Python 对 AL32UTF8 中的文本进行编码

> ID：11760623
> 
> 赞同：1
> 
> 时间：2012-08-01T13:43:40.333
> 
> 标签：python, oracle

我们正在尝试使用 Python 匹配通过 Oracle 的 MD5 哈希算法的哈希。根据他们的[论坛](https://forums.oracle.com/forums/thread.jspa?threadID=2360515)，所有内容在散列之前都以 AL21UTF8 编码：

```
-- Prior to encryption, hashing or keyed hashing, CLOB datatype is
-- converted to AL32UTF8\. This allows cryptographic data to be
-- transferred and understood between databases with different
-- character sets, across character set changes and between
-- separate processes (for example, Java programs).
-- 
```

起初我认为 UTF-8 已经足够好了，但如果我这样做了，我的哈希值仍然不匹配。因此，经过额外的挖掘，我找到了[Oracle 的 Database Companion CD 安装指南](http://download.oracle.com/docs/cd/B19306_01/install.102/b15664/app_glblsupp.htm)中所述的这篇[文章](http://wonderingmisha.blogspot.com/2011/10/utf8-vs-al32utf8.html)：

*AL32UTF8 是适用于 XMLType 数据的 Oracle 数据库字符集。它相当于 IANA 注册的标准 UTF-8 编码，支持所有有效的 XML 字符。*

*不要将 Oracle 数据库数据库字符集 UTF8（无连字符）与数据库字符集 AL32UTF8 或字符编码 UTF-8 混淆。数据库字符集 UTF8 已被 AL32UTF8 取代。不要对 XML 数据使用 UTF8。UTF8 仅支持 Unicode 3.1 及更早版本；它不支持所有有效的 XML 字符。AL32UTF8 没有这样的限制。*

所以我不能使用 UTF-8，我不知道如何让 Python 的编解码器模块区分 utf-8 和 utf8。如果我尝试 AL32UTF8，它会引发错误。有没有其他人在 Python 中用 AL32UTF8 编码过？

我的编解码器代码如下所示：

```
import codecs
sourceFmt = "ascii"
targetFmt = "utf8"
utfFile = "kesa_utf8.dat"
with codecs.open(old, "rU", sourceFmt) as sourceFile:
    with codecs.open(utfFile, "w", targetFmt) as targetFile:
        targetFile.write(sourceFile.read()) 
```

文件本身如下所示：

```
WC000|IC                                                |KESA      |KESA                |                    |                    |                    |2012-07-31-15.12.36       |0090|                                                  |                                                                                                                                |\c\n                                                                                                                                                                 
WC001|100534                          |W.47212-0100534                                   |2012-07-31-15.12.36       | 00000000001270.00|USD|\c\n                                                     
WC002|100534                          |W.47212-0100534                                   |Sally                         |H                             |Klass                         |1235 14th St. W.                                                                                    ||                                                                                                    |Palma Sola                                        ||FL |USA            |34209          |                                                                                                    |                                                                                                    |                                                                                                    |                                                  |               |   |               |               |9412587545          |                    |                    |O         |          |          ||20800426|645858741                       |SSN       |        |        |        |   |               |               |                                |          |        |        |        |   |               |               |                              |                              |                              |                                                                                                    |                                                                                                    |                                                                                                    |                                                  |               |   |               |               |                                                                                                    |                                                                                                    |                                                                                                    |                                                  |               |   |               |               |                    |                    |                    ||          |          |                                                  |        ||          |        |        |        |   |               |               |                                |          |        |        |        |   |               |               |                              |                              |                                                                                                    |                                                                                                    |                                                                                                    |                                                  |               |   |               |               |                              |                    |                    |                    |          |          |          |                                                  |        |                          |                          |                          |KESAPC                                            |                    |       |       |          | |N|          |          |                                                  ||               |                              |                                                                                                    |                                                                                                    |                                                                                                    |               |   |               |               |                              |                              |                    |                    |                    |                    |          |          |          |                                                  |                                                  |                                                  |                                                  |                                                  |                                                  |          |                                                  |                    |                          |                    |                          |                    |                          |                                                                                                    |   |                    |                                                                                                    |                                                                                                    |                                                                                                    |                                                                                                    |                                                                                                    |                                                                                                    |\c\n    
WC999|1000000000|1000000000|4000000000| 
```

哈希应该是 86D993FA7121E3B9EE1657A23345FE21

无论如何，我使用 hashlib 对其进行哈希处理：

```
import hashlib
    with open(path) as f:
    data = f.read()
mdhash = hashlib.md5(data)
mdhash = mdhash.hexdigest()
print mdhash 
```

这导致 8421877dd9cdf7235eec47765821998c

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T18:55:32.943

事实证明，无论客户端在做什么都会导致数据本身发生更改，使其具有“\c\n”行结尾，并且它还会通过填充（空格）使文件中的行大小相同最后）在他们散列之后。一旦我们让客户端停止向我们提供不良数据，我们就能够复制哈希。不过感谢您的帮助！

# php - 在关系 PROPEL 中排序

> ID：11760627
> 
> 赞同：0
> 
> 时间：2012-08-01T13:43:59.830
> 
> 标签：php, symfony1, propel

我有：

```
# config/schema.yml
propel:
  jobeet_category:
    id:           ~
    name:         { type: varchar(255), required: true, index: unique }

  jobeet_job:
    id:           ~
    category_id:  { type: integer, foreignTable: jobeet_category, foreignReference: id, required: true }
    type:         { type: varchar(255) }
    company:      { type: varchar(255), required: true } 
```

例如：

```
JobeetCategory:

id | name
1  | first
2  | second

JobeetJob:

id | category_id | name
1  | 1           | bbb
2  | 1           | ccc
3  | 1           | aaa
4  | 2           | zzz
5  | 2           | xxx 
```

我这样做：

```
$c = new Criteria();
$categories = JobeetCategoryPeer::doSelect($c); 
```

我可以：

```
foreach($categories as $category){

  echo $category->getName();
  foreach ($category->getJobeetJobs() as $job){
          echo '-' . $job->getName();
  }
} 
```

这告诉我：

```
 first
 - bbb
 - ccc
 - aaa
 second
 - zzz
 - xxx 
```

但我想对此进行排序`ASC by NAME`：

```
 first
 - aaa
 - bbb
 - ccc
 second
 - xxx
 - zzz 
```

我怎样才能用 PROPEL QUERY 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:07:56.667

如果你提到了你正在使用的 symfony 和推进的版本，那会更容易。但这里有一些可能有用的东西，希望它有所帮助。

```
$categories = JobeetCategoryQuery::create()
                            ->addJoin(JobeetJobPeer::CATEGORY_ID, JobeetCategoryPeer::ID)
                            ->addAscendingOrderByColumn(JobeetJobPeer::NAME)
                            ->find(); 
```

万一 Query 不存在，您可以为此目的使用标准。

```
 $criteria = new Criteria();
  $criteria->addJoin(JobeetJobPeer::CATEGORY_ID, JobeetCategoryPeer::ID)
                        ->addAscendingOrderByColumn(JobeetJobPeer::NAME);
  $categories = JobeetCategoryPeer::doSelect($criteria); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-27T16:05:11.803

我知道这是一个老问题，但想提供一种更新的方法来做到这一点。您可以将查询对象传递给您的 getter：

```
foreach($categories as $category){
  echo $category->getName();
  $q = JobeetJobQuery::create()->orderByName();
  foreach ($category->getJobeetJobs($q) as $job){
          echo '-' . $job->getName();
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T14:17:06.977

```
$c = new Criteria();
$c->addJoin(JobeetJobPeer::CATEGORY_ID, JobeetCategoryPeer::ID, Criteria::INNER_JOIN);
$c->addAscendingOrderByColumn(JobeetJobPeer::NAME);

$categories = JobeetCategoryPeer::doSelect($c); 
```

但是`jobeet_job`没有列`name`。您是否使用自定义吸气剂`$job->getName()`？

# sql-server-2008-r2 - 基于特定列的选择语句相交

> ID：11760631
> 
> 赞同：1
> 
> 时间：2012-08-01T13:44:06.510
> 
> 标签：sql-server-2008-r2, intersect

我在 Sql server 2008 中的两个选择语句之间有一个关于 INTERSECT 子句的 Q。

选择 1 a,b,c ..... 相交 选择 2 a,b,c....

在这里，两个查询的数据集应该完全匹配以返回公共元素。

但是，我只想匹配两个选择语句的 a 列。如果两个查询中 a 列的值具有相同的值，则整行应该出现在结果集中。

我可以这样做吗？怎么做？

谢谢，马库斯..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:32:46.657

最好的办法是查看查询本身。他们是否需要一个 INTERSECT，是否可以与它进行连接

例如。INTERSECT 看起来像这样

```
select columnA
from   tableA
INTERSECT
select columnAreference
from   tableB 
```

您的结果将包含两个表中的所有列..所以连接会更有用

```
select columnA
from   tableA a
       inner join tableB b
         on  b.columnAReference = a.columnA 
```

如果您查看执行计划，您会发现 INTERSECT 将执行左半连接，而内连接将执行与预期一样的内连接。左半连接不是您可以告诉查询优化器执行的操作，但它更快！！！！左半连接只会从左表返回 1 行，而普通连接将全部返回。在这种特殊情况下，它会更快。

所以 INTERSECT 并不是一件坏事，应该用 INNER JOIN 构造来消除它，有时它会表现得更好。但是，为了给您最好的答案，我需要有关您的查询的更多详细信息:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:13:18.527

```
select * from table1 t1 inner join Table2 t2
on t1.col1=t2.col1 
```

# api - 成功的 paypal api 调用未显示在沙箱中

> ID：11760633
> 
> 赞同：1
> 
> 时间：2012-08-01T13:44:13.060
> 
> 标签：api, paypal, payment, sandbox

嗨我有点困惑。我正在使用沙盒凭据进行贝宝 api 调用。返回 ACK 是：成功。当我转到付款人或企业沙盒帐户时，没有处理任何交易。我进行了调试，看起来我正在填充所有字段，而且我认为如果某些字段丢失，则会引发错误。这是我正在使用的代码。

......

```
APIProfile apiProfile = ProfileFactory.createSignatureAPIProfile();
                    apiProfile.setAPIUsername(paypalAccount.getApiLogin());
                    apiProfile.setAPIPassword(paypalAccount.getApiPassword());
                    apiProfile.setSignature(paypalAccount.getApiSignature());
                    apiProfile.setEnvironment(paypalAccount.getApiEnvironment());

                    // caller
                    NVPCallerServices callerServices = new NVPCallerServices();
                    callerServices.setAPIProfile(apiProfile);

                    // encoder
                    NVPEncoder encoder = new NVPEncoder();
                    encoder.add(METHOD, METHOD_VALUE);
                    encoder.add(RETURNURL, paypalAccount.getReturnUrl());
                    encoder.add(CANCELURL, paypalAccount.getCancelUrl());
                    encoder.add(CURRENCYCODE, CURRENCYCODE_VALUE);
                    encoder.add(PAYMENTACTION, PAYMENTACTION_VALUE);
                    encoder.add(AMT, payment.getPaymentOrder().getPrice().toString());
                    encoder.add(L_NAME0, L_NAME0_VALUE);
                    encoder.add(L_AMT0, payment.getPaymentOrder().getPrice().toString());

                    // call
                    String NVPRequest = encoder.encode();
                    String NVPResponse = callerServices.call(NVPRequest);
                    NVPDecoder decoder = new NVPDecoder();
                    decoder.decode(NVPResponse);

                    String ack = decoder.get(ACK);
                    payment.setPaymentTransaction(decoder.get(TOKEN)); 
```

……

任何帮助都是极好的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:41:32.617

如果您使用快速结帐，则需要拨打 3 个电话：

*   SetExpressCheckout（使用令牌响应）
*   GetExpressCheckout
*   DoExpressCheckout

一旦“DoExpressCheckout”通过，您应该能够看到交易记录在您的沙盒买家和商家帐户中。

看看：[https ://www.x.com/devzone/excerpts/chapter-2-express-checkout](https://www.x.com/devzone/excerpts/chapter-2-express-checkout)

# css - 在 Google Chrome 开发者工具中查看通过检查器添加的 CSS

> ID：11760634
> 
> 赞同：14
> 
> 时间：2012-08-01T13:44:15.413
> 
> 标签：css, google-chrome-devtools

首先，我知道[这个问题](https://stackoverflow.com/questions/6661665/can-you-add-new-css-properties-in-chrome-inspector)存在，但这不是我要解决的问题。我想知道开发人员工具中是否有一些视图可以让您查看“通过检查器”添加的*所有*样式。 [例如](http://screencast.com/t/iaiOxBYeR)，我可以选择 span.count 元素并查看这是我添加的内容。

但是我通过检查员添加了很多东西。现在，我必须单击每个元素以查看它是否是我为其添加样式的元素之一。

任何人都已经看到过这样的帖子或知道答案吗？谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-02T13:54:59.500

至少从 Chrome 22 开始，您可以在 Sources 面板中打开“inspector-stylesheet”源。它包含您手动添加的所有规则。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-01-02T19:17:07.420

如果有人遇到这个问题并且仍然无法使用较新版本的 chrome，这对我有用：在元素的元素面板中添加样式，然后在 CSS 规则内的元素面板中，单击检查器样式表链接。这将在源面板中打开检查器样式表。您可以将其打开并根据需要添加。

# intellij-idea - 如何在 IntelliJ IDEA 上增加 100 个错误的错误限制？

> ID：11760638
> 
> 赞同：17
> 
> 时间：2012-08-01T13:44:39.067
> 
> 标签：intellij-idea

我有一个 IntelliJ IDEA 项目，但是当它遇到超过 100 个错误时编译会停止，我想增加限制，以便弄清楚我需要多少“重构”古老的代码。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-07-23T00:36:08.890

您看到的 100 个错误限制本身并不是 IntelliJ IDEA 的限制*，*`javac`而是用于编译应用程序的编译器的默认设置。IDEA使用后。默认错误数，after 是标准 Sun/Oracle`javac`编译器的默认值，但可以通过将参数传递给编译器来修改；警告的最大数量也是如此，它也默认为 100。

javac 的在线文档（例如，[*'javac - Java 编程语言编译器'* ^(†</sup>)](http://www.webcitation.org/6RTlsAI8T)处的 Java SE 版本 7 页面）提供了这些参数（在“选项”部分的“**非标准****选项**”子标题下“） 如下：

 **```
-Xmaxerrs*号码*
     设置要打印的最大错误数。

-Xmax警告*号码*
     设置要打印的最大警告数。

```

在`javac`IntelliJ IDEA ^(‡</sup> 中使用时，这些（和其他）编译器参数可以通过导航到项目的设置（例如`F̲ile > Set̲tings`或`**Ctrl**`++ `**Alt**`）来添加`**S**`；然后，在*`Project Settings`*标题下，展开该*`▼ Compiler`*部分，选择*`Java Compiler`*所需的设置并将其输入到后面的文本框中*`Additional command line parameters:`*。（例如，要将限制增加到 123 个错误和 456 个警告，`-Xmaxerrs 123 -Xmaxwarns 456`请输入文本框。）)

*^( ^(†</sup> 来自[http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javac.html](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javac.html)，检索于 2014-07-31，由 WebCite® 在[http://www 存档。 webcitation.org/6RTlsAI8T](http://www.webcitation.org/6RTlsAI8T)))*

*^( ^(‡</sup> 这个过程在版本 13 上由 shelleybutterfly 审查，版本 12 由 Nicolas Guillaume 审查，但对于其他版本，这个过程可能非常相似，如果不相同的话。))*

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-08-09T14:26:04.353

如果您使用的是 Gradle（可能是因为您使用的是 Android），请按如下方式更改`allprojects`项目的位`build.gradle`（不是模块一）：

```
allprojects {
    repositories {
        jcenter()
    }

    // Allow 400 errors.
    gradle.projectsEvaluated {
        tasks.withType(JavaCompile) {
            options.compilerArgs << "-Xmaxerrs" << "400"
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-01T18:57:11.307

^(*注意：尽管可以按照此答案的建议更改为 Eclipse 编译器，但没有必要解决此特定问题。相反，您可以简单地向编译器设置添加一个参数，以更改编译器显示的最大错误数`javac`（如Nicolas Guillaume[对问题的此替代答案中所述）。](https://stackoverflow.com/a/17799671/832859)*)

^(*由于在现有项目上切换到不同的编译器或编译器版本时可能会出现微妙的问题，因此在进行如下所述的切换之前，请确保您了解特定情况下的后果。*)

IntelliJ IDEA 不强制执行此限制，它是特定于编译器的（在这种情况下，`javac`编译器的错误限制为 100 个）。

`Settings`要解决此问题，您可以在|中切换到另一个编译器。`Compiler`| `Java Compiler`. Eclipse 编译器应该能够显示更多错误。**

# java - 下划线前后的正则表达式匹配模式

> ID：11760639
> 
> 赞同：-1
> 
> 时间：2012-08-01T13:44:40.117
> 
> 标签：java, php, javascript, regex, kaltura

我在 kaltura 中有一个文件名约定 {referenceId}_{flavor name}.mp4。或者，如果您熟悉 kaltura，请告诉我可以用于此命名约定的 slugRegex，它支持预编码文件摄取

我必须从中提取 referenceId 和文件名。

我在用着

```
/(?P)_(?P)[.]\w{3,}/ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T13:53:33.337

```
var filename = "referenceId_flavor-name.mp4";
var parts = filename.match(/([^_]+)_([^.]+)\.(\w{3})/i);
// parts is an array with 4 elements
// ["referenceId_flavor-name.mp4", "referenceId", "flavor-name", "mp4]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:58:45.877

```
var file = 'refID_name.mp4',
    parts = file.match(/^([^_]+)_(.+)\.mp4/, file); 
```

返回数组：

```
[
    'refID_name.mp4', //the whole match is always match 0
    'refID', //sub-match 1
    'name' //sub-match 2
] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-19T14:34:51.443

```
/**
 * Parse file name according to defined slugRegex and set the extracted parsedSlug and parsedFlavor.
 * The following expressions are currently recognized and used:
 *  - (?P<referenceId>\w+) - will be used as the drop folder file's parsed slug.
 *  - (?P<flavorName>\w+)  - will be used as the drop folder file's parsed flavor. 
 *  - (?P<userId>\[\w\@\.]+) - will be used as the drop folder file entry's parsed user id.
 * @return bool true if file name matches the slugRegex or false otherwise
 */
private function parseRegex(DropFolderContentFileHandlerConfig $fileHandlerConfig, $fileName, &$parsedSlug, &$parsedFlavor, &$parsedUserId)
{
    $matches = null;
    $slugRegex = $fileHandlerConfig->getSlugRegex();
    if(is_null($slugRegex) || empty($slugRegex))
    {
        $slugRegex = self::DEFAULT_SLUG_REGEX;
    }
    $matchFound = preg_match($slugRegex, $fileName, $matches);
    KalturaLog::debug('slug regex: ' . $slugRegex . ' file name:' . $fileName);
    if ($matchFound) 
    {
        $parsedSlug   = isset($matches[self::REFERENCE_ID_WILDCARD]) ? $matches[self::REFERENCE_ID_WILDCARD] : null;
        $parsedFlavor = isset($matches[self::FLAVOR_NAME_WILDCARD])  ? $matches[self::FLAVOR_NAME_WILDCARD]  : null;
        $parsedUserId = isset($matches[self::USER_ID_WILDCARD])  ? $matches[self::USER_ID_WILDCARD]  : null;
        KalturaLog::debug('Parsed slug ['.$parsedSlug.'], Parsed flavor ['.$parsedFlavor.'], parsed user id ['. $parsedUserId .']');
    }
    if(!$parsedSlug)
        $matchFound = false;
    return $matchFound;
} 
```

是处理正则表达式的代码。我使用`/(?P<referenceId>.+)_(?P<flavorName>.+)[.]\w{3,}/`并遵循本教程[在此处输入链接描述](http://www.oodlestechnologies.com/blogs/Drop-Folder-Configuration-in-Kaltura)

# sql - 在声明游标之前插入表中

> ID：11760642
> 
> 赞同：0
> 
> 时间：2012-08-01T13:44:54.090
> 
> 标签：sql, oracle, plsql, oracle-sqldeveloper

我可以将插入语句与来自另一个表上的选择语句的值一起使用`EXECUTE IMMEDIATE`吗？

喜欢 ：

```
execute immediate('insert into table values(select rowid from table where column='NEW')'); 
```

如果不可能，我可以在过程中的游标声明之前放置一个插入语句。

多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:53:44.397

是的，你可以，但你需要整理你的语法和引号：

```
execute immediate('insert into table (column_name) select rowid from table where column=''NEW'''); 
```

**编辑：**

更好的是，使用绑定变量而不是对列名的硬编码引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:52:31.780

当你测试它时，你得到了什么结果？

您的语法有点偏离，但是，正如您在下面看到的，它绝对是可行的。

```
SQL> CREATE TABLE emp2 AS SELECT * FROM emp WHERE 1 = 0;

Table created.

SQL> BEGIN
  2      EXECUTE IMMEDIATE 'INSERT INTO emp2 (empno, ename, job) SELECT e.empno, e.ename, e.job FROM emp e WHERE e.deptno = 10';
  3  END;
  4  /

PL/SQL procedure successfully completed.

SQL> SELECT * FROM emp2;

     EMPNO ENAME      JOB              MGR HIREDATE                    SAL       COMM     DEPTNO
---------- ---------- --------- ---------- -------------------- ---------- ---------- ----------
      7782 CLARK      MANAGER
      7839 KING       PRESIDENT
      7934 MILLER     CLERK

SQL> 
```

# c# - Csharp稀疏矩阵库类似于R矩阵库？

> ID：11760644
> 
> 赞同：1
> 
> 时间：2012-08-01T13:44:58.167
> 
> 标签：c#, linear-algebra, sparse-matrix

有人知道任何好的稀疏矩阵库吗？我需要它来对大型稀疏矩阵 (10,000 x 10,000) 进行 kronecker 产品和乘法运算。

现在我们正在使用 R，它可以很好地处理它们。不幸的是，我们无法将 R 投入生产，因此正在寻找替代方案。我一直在玩 Math.net 数字，但似乎有点慢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:18:55.590

A .NET open-source alternative to *Math.NET Numerics* is [MetaNumerics](http://www.meta-numerics.net/). Most recent downloads can be accessed [here](http://metanumerics.codeplex.com/releases/view/63906). *MetaNumerics* has less functionality than *Math.NET Numerics* and it has not been updated for a year or so, but it does provide some sparse matrix functionality according to the [API documentation](http://www.meta-numerics.net/Documentation/index.html).

There is also [sparse matrix support](http://www.alglib.net/matrixops/sparse.php) in [ALGLIB](http://www.alglib.net/), which is available for multiple platforms including .NET. ALGLIB comes with both an open-source and commercial license.

I do not know if either of these libraries provide faster sparse matrix computation than *Math.NET Numerics*, though.

# jquery - jQuery，在ajax加载后将值添加到输入文本元素中

> ID：11760645
> 
> 赞同：2
> 
> 时间：2012-08-01T13:45:03.180
> 
> 标签：jquery, ajax

我正在创建一个应用程序，其中包含在**AJAX 调用**之后加载的几个**表单**。

 **可以说我的主要文件是 index.html。然后我有几个表单通过 ajax 调用加载到 index.html 中。

我喜欢做的是检查特定文本输入元素是否加载了其中一种表单，然后更改该元素的值。有没有办法做到这一点 ？

对于示例中的事件，有一种`live()`方法可以检查稍后使用 ajax 加载的项目是否发生了一些事件，然后执行了一些代码。我可以在没有事件的情况下做同样的事情吗？加载后可以向该输入文本元素添加值吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T13:48:55.770

您可以定期检查它的存在，如下所示：

```
setInterval(function(){
    if($('input[name=my_input]').length > 0){
        $('input[name=my_input]').val('New Val');
    }
}, 200); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T13:50:30.853

这将是一些伪代码，因为问题中没有提供标记？

```
$.ajax({
    type: 'POST',
    url: 'someurl',
    etc....
}).done(function(data) {
    $(element).append(data); //insert form etc
}).always(function() {
    if ($("#inputID").length) {              //check if input element exists
        $("#inputID").val('some new value'); // could be done with a timeout to make sure the DOM inserting is done
    }
}); 
```**

# jsp - org.apache.jasper.JasperException：

> ID：11760646
> 
> 赞同：0
> 
> 时间：2012-08-01T13:45:06.567
> 
> 标签：jsp, struts2

在我的jsp页面中

```
 <s:if test="#alist[0].aboutme!=null"  test="#alist[0].aboutme!=''">
         <div class="info">
            <div class="title">
               About
            </div>
            <div class="value">
               <div class="value_title">
                    <s:property value="alist[0].aboutme"/>
               </div>
            </div>
         </div>
       </s:if> 
```

我正在检查关于我的值的 ArrayList alist[0] 是否为 null 或 '' 它不会显示关于我的文本和值，以前它工作正常，但现在它显示以下异常

```
HTTP Status 500 -

type Exception report

message

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

org.apache.jasper.JasperException: /pages/profile/about.jsp (line: 67, column: 102)   Attribute qualified names must be unique within an element
org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:42)
org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:408)
org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:89)
org.apache.jasper.compiler.Parser.parseAttributes(Parser.java:171)
org.apache.jasper.compiler.Parser.parseAttributes(Parser.java:153)
org.apache.jasper.compiler.Parser.parseCustomTag(Parser.java:1236)
org.apache.jasper.compiler.Parser.parseElements(Parser.java:1452)
org.apache.jasper.compiler.Parser.parse(Parser.java:138)
org.apache.jasper.compiler.ParserController.doParse(ParserController.java:242)
org.apache.jasper.compiler.ParserController.parse(ParserController.java:102)
org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:198)
org.apache.jasper.compiler.Compiler.compile(Compiler.java:373)
org.apache.jasper.compiler.Compiler.compile(Compiler.java:353)
org.apache.jasper.compiler.Compiler.compile(Compiler.java:340)
org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:646)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:357)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:49:46.367

标签中有两个`test`属性：`s:if`

```
<s:if test="#alist[0].aboutme!=null"  test="#alist[0].aboutme!=''"> 
```

尝试这个：

```
<s:if test="%{#alist[0].aboutme!=null and #alist[0].aboutme!=''}"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:49:48.380

您的第一行包含以下内容：

```
<s:if test="#alist[0].aboutme!=null"  test="#alist[0].aboutme!=''"> 
```

`test`单个`if`元素不能有两个属性

# algorithm - 动态编程具有属性的子序列计数？

> ID：11760647
> 
> 赞同：6
> 
> 时间：2012-08-01T13:45:14.740
> 
> 标签：algorithm, dynamic-programming

考虑一个动态规划问题，该问题询问序列 S 中有多少不同的子序列（不一定是连续的）具有值 p0 的特定属性 P。

P 的范围小且有限，有一种有效的 P 计算方法：

```
P(s1 + s2) = f(P(s1), P(s2)) 
```

其中`+`表示序列连接。

一种方法是计算 S 的前缀有多少`S[1] + S[2] + ... + S[k]`具有属性 px 的子序列。（将其存储在`Count[px][k]`）

所以递归是：

```
Count[px][k] = Count[px][k-1] // not using element S[k];

P pq = f(px,P(S[k])); // calculate property pq of appending element S[k]
Count[pq][k] += Count[px][k-1] // add count of P(prefix+S[k]) 
```

答案是：

```
return Count[p0][S.length] 
```

这在 S 的元素成对不同时有效，但是它将计算两次具有相同值但使用不同位置的不同元素的子序列。

我怎样才能修改这个算法，使它只计算相等的子序列一次？（即只计算*不同的*子序列）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T18:59:32.417

假设序列是字符，S[k] 是字母 x。

问题是您已经重复计算了所有不使用 S[k]，但仍然以 x 结尾的序列（只有当 x 出现在序列中的较早时才会发生这种情况）。

假设最后一次出现 x 是在元素 S[j]。所有以 x 结尾的不同序列都可以通过计算直到位置 j-1 的所有不同序列简单地给出，然后将 x 添加到所有这些序列上。

因此，我们可以通过减去这个计数来纠正重复计数。

```
Count[px][k] = Count[px][k-1] // not using element S[k]
P pq = f(px,P(S[k])) // property pq of appending element S[k]
j = index of previous location in string where S[j]==S[k]
Count[pq][k] += Count[px][k-1] // using element S[k]
Count[pq][k] -= Count[px][j-1] // Removing double counts 
```

# fortran - Fortran 新手，关于写入文件的问题

> ID：11760650
> 
> 赞同：1
> 
> 时间：2012-08-01T12:49:36.277
> 
> 标签：fortran

我对 Fortran 完全陌生，对编程也很陌生。我正在尝试编译其他人编写的脚本。这给我带来了一些问题。代码的上半部分是：

```
C 
C Open direct-access output file ('JPLEPH')
C 
OPEN ( UNIT = 12, 
. FILE = 'JPLEPH', 
. ACCESS = 'DIRECT', 
. FORM = 'UNFORMATTED', 
. RECL = IRECSZ, 
. STATUS = 'NEW' )

C
C Read and write the ephemeris data records (GROUP 1070). 
C 
CALL NXTGRP ( HEADER ) 

IF ( HEADER .NE. 'GROUP 1070' ) CALL ERRPRT(1070,'NOT HEADER') 

NROUT = 0 
IN = 0 
OUT = 0 

1 READ(*,'(2i6)')NRW,NCOEFF
if(NRW .EQ. 0) GO TO 1
READ (*,'(3D26.18)',IOSTAT =IN) (DB(K),K=1,NCOEFF) 

DO WHILE ( ( IN .EQ. 0 ) 
. .AND. ( DB(2) .LT. T2) ) 

IF ( 2*NCOEFF .NE. KSIZE ) THEN 
CALL ERRPRT(NCOEFF,' 2*NCOEFF not equal to KSIZE') 
ENDIF 

C
C Skip this data block if the end of the interval is less 
C than the specified start time or if the it does not begin 
C where the previous block ended. 
C 
IF ( (DB(2) .GE. T1) .AND. (DB(1) .GE. DB2Z) ) THEN 

IF ( FIRST ) THEN 
C 
C Don't worry about the intervals overlapping 
C or abutting if this is the first applicable 
C interval. 
C 
DB2Z = DB(1) 
FIRST = .FALSE. 
ENDIF 

IF (DB(1) .NE. DB2Z ) THEN 
C 
C Beginning of current interval is past the end 
C of the previous one.

CALL ERRPRT (NRW, 'Records do not overlap or abut') 
ENDIF 

DB2Z = DB(2) 
NROUT = NROUT + 1

print*,'Out =', OUT

WRITE (12,REC=NROUT+2,IOSTAT=OUT) (DB(K),K=1,NCOEFF)

print*,'Out2 =', OUT

IF ( OUT .NE. 0 ) THEN 
CALL ERRPRT (NROUT, 
. 'th record not written because of error') 
ENDIF 
```

因此，当我在屏幕上打印“Out”和“Out2”时，我发现 Out=0 和 Out2=110。因为它不再等于零，所以程序给了我一个错误。因此，我基本上想知道这里发生了什么：

```
WRITE (12,REC=NROUT+2,IOSTAT=OUT) (DB(K),K=1,NCOEFF) 
```

我假设 12 指的是我已经打开（并创建）并想要写入的文件。第一个括号的其余部分是做什么的？第二个有什么意义？这是否给了我想要放入文件的信息？以防万一，数据库在哪里填充？

通常我想知道出了什么问题？为什么 OUT 会改变值？（我需要

NCOEFF 在程序开始时被定义为整数，而 DB: 作为 DOUBLE PRECISION DB(3000), DB2Z/0.d0/ ，所以我假设 DB 是某种数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:02:31.367

在这个程序中，`OUT`判断`write`语句是否成功。（语句的`IOSTAT`参数`write`表示“I/O 状态”或输入/输出状态）。如果 I/O 操作成功，则返回 0，否则返回错误代码的编号。[您可以在此处](http://publib.boulder.ibm.com/infocenter/macxhelp/v6v81/index.jsp?topic=%2Fcom.ibm.xlf81m.doc%2Fpgs%2Flr76.htm)找到错误代码的含义。

我不熟悉该`REC`参数，但可以在[此处](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=%2Fcom.ibm.xlf101a.doc%2Fxlflr%2Fwrite.htm)找到调查自己的起点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T13:57:02.810

引用手册`REC`表明要读取或写入的记录号。按照建议，请参阅编译器随附的文档以获取进一步说明。

`(DB(K),K=1,NCOEFF)``DB`表示 '从 1 到的所有元素`NCOEFF`。您正在查看一份`io-implied-do`声明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T13:55:38.767

该声明

```
WRITE (12,REC=NROUT+2,IOSTAT=OUT) (DB(K),K=1,NCOEFF) 
```

就是，如果我没记错的话，称为“隐含的 DO 循环”。如所写，它将从数组 DB 中写入 NCOEFF 值，从 DB(1) 开始。

它被称为隐含 DO 循环，因为显式形式（在 FORTRAN IV 中，对于古人来说：我比更现代的变体更了解它）类似于以下内容：

```
 DO 10 K=1,NCOEFF
      WRITE (12,REC=NROUT+2,IOSTAT=OUT) DB(K)
10    CONTINUE 
```

（假设前两行缩进了六列。）这是一个 DO 循环。隐含的 DO 循环形式允许您将“循环”正确地放在输入/输出语句中。

它的有用之处在于您可以拥有多个数组和多个循环。举个简单的例子：

```
WRITE (12,REC=NROUT+2,IOSTAT=OUT) (DB(K), DC(K), K=1,NCOEFF) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T14:54:20.640

110 是 WRITE 调用抛出的错误代码。您需要检查您的 FORTRAN RTL（运行时库）参考。它应该列出可能的错误代码。我认为 110 意味着您正在尝试将双精度值转换为整数，但该值大于您可以存储在整数中的值。也许将值转储`DB`并查看。

# javascript - 使用 jQuery 在 HTML 表格中交替行

> ID：11760655
> 
> 赞同：-5
> 
> 时间：2012-08-01T13:45:39.280
> 
> 标签：javascript, jquery, html

使用 jQuery 在 HTML 表格中交替行，无需修改现有代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:46:42.307

希望对你有帮助

```
$(document).ready(function() {

            $('#Students > tbody > tr:odd').css("background-color", "green");

 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:50:31.783

由于问题是用 jQuery 标记的，我想 jQuery 解决方案会起作用。

您可以使用jQuery的[元素选择器](http://api.jquery.com/element-selector/)`tr`，并选择所有元素 - `$("tr")`.

然后你可以使用适当的方法或方法，用它来做你想做的事情。

*   `.css()`改变一些样式
*   `.hide()`隐藏它，
*   `.animate()`对其应用一些动画等等。

仅举几例...

一个例子是：

```
$("tr").css("color", "#ccc"); // Change the font color 
```

要获得更具体的代码，您必须澄清您的问题并描述您想要对表格行执行的操作。

# java - 为什么连接没有超时？

> ID：11760661
> 
> 赞同：1
> 
> 时间：2012-08-01T13:46:06.933
> 
> 标签：java, jdbc, websphere, connection-pooling, jtds

在带有 SQLServer 2008 数据库的 Websphere Application Server 7 上运行我的应用程序。当 SQLServer 处于 100% 时，每个连接都挂起并填满连接池。这导致每个线程也挂起。10分钟后，日志充满了这个：

```
00000042 ThreadMonitor W   WSVR0605W: Thread "WebContainer : 11" (00000049) has been active for 742352 milliseconds and may be hung.  There is/are 14 thread(s) in total in the server that may be hung. 
```

连接池正在使用 JTDS，并且超时设置为 300 秒。

我会强调，在 300 秒后，每个连接都会引发异常，然后会使所有线程都挂起？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T00:03:27.587

为什么连接会在 300 秒后抛出异常？如果连接对象正在使用中，它将继续处于活动状态。

还要指定您所指的确切超时属性？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T18:45:00.740

这是[Connection Timeout](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r0/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/udat_conpoolset.html)的定义：

> 该值表示空闲池中没有可用连接且无法创建新连接时连接请求等待的秒数。这通常是因为已达到特定连接池中连接的最大值。
> 
> 例如，如果连接超时设置为 300，并且最大连接数都在使用中，则池管理器将等待 300 秒以使物理连接可用。如果在此时间内物理连接不可用，池管理器将启动 ConnectionWaitTimeout 异常。

所以，它不会让“所有线程都挂起”，它只会在 300 秒后告诉你池中没有空闲连接，所以它不能给你一个。

控制事务可以保持活动多长时间的参数称为[事务超时](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r0/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/udat_contranserv.html)，之后事务被标记为回滚。但是即使这个超时也不会取消使用该连接的线程，它只会将其标记为仅回滚。为了释放连接，您必须使用第三方工具（ITCAM 可以取消服务器中的任何线程），或者从数据库端终止/删除连接。

# vb.net - vb.net ...我在使用访问权限时做错了什么

> ID：11760663
> 
> 赞同：1
> 
> 时间：2012-08-01T13:46:09.867
> 
> 标签：vb.net, syntax

我的问题在 da.Update(dt)。我收到 OleDbException 未处理。INSERT INTO 语句中的语法错误。奇怪的是它在我只保存 10 个项目之前运行，现在它运行起来一点也不混乱。感谢您的任何帮助。

```
Dim dt As New DataTable
    Dim ds As New DataSet

    con.ConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source= C:\MyComplete.accdb;Persist Security Info=False;"

    con.Open()
    MsgBox("here")
    ds.Tables.Add(dt)

    Dim da As New OleDbDataAdapter

    da = New OleDbDataAdapter("SELECT * FROM DealerReview", con)

    da.Fill(dt)

    Dim newRow As DataRow = dt.NewRow

    newRow.Item(1) = User
    newRow.Item(2) = Associate
    newRow.Item(3) = "1"
    newRow.Item(4) = Time
    newRow.Item(5) = Hold
    newRow.Item(6) = GreetingR
    newRow.Item(7) = GreetingA
    newRow.Item(8) = GreetingO
    newRow.Item(9) = GreetingTs
    newRow.Item(10) = GreetingG
    newRow.Item(11) = holdUpdate
    newRow.Item(12) = LookupSize
    newRow.Item(13) = DlyD
    newRow.Item(14) = SiPrice
    newRow.Item(15) = SiDoorPrice
    newRow.Item(16) = TBrand
    newRow.Item(17) = TModel
    newRow.Item(18) = SeveralChoices
    newRow.Item(19) = Financing
    newRow.Item(20) = Benefits
    newRow.Item(21) = Apt
    newRow.Item(22) = ITime
    newRow.Item(23) = AssociateScore
    newRow.Item(24) = hms
    newRow.Item(25) = ymd
    newRow.Item(26) = ElapsedTime

    dt.Rows.Add(newRow)
    Dim cb As New OleDbCommandBuilder(da)
    cb.GetInsertCommand()
    da.Update(dt)
    MsgBox("Saved")
    con.Close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:57:39.763

这是当您的项目计数和/或数据类型与您正在写入的表的列定义不匹配时出现的错误。还有其他可能性，但是由于您提到您添加了更多项目，并且您没有向我们展示表定义，所以这似乎是最有可能的可能性。

您不能只向数据库命令添加更多项目（列），它们必须与您正在读取/写入的表列相匹配。

# javascript - 为更大的单词准备网格

> ID：11760667
> 
> 赞同：0
> 
> 时间：2012-08-01T13:46:18.233
> 
> 标签：javascript, jquery

在我的拖放文字游戏中，设置的网格大小为 6x6（36 个单元格）。它由 6 个 3 个字母的单词和 18 个空格组成。

目前网格是每行 2 个单词，当我在列表中添加一个长于 3 个字母的单词时，当该行上有另一个单词时，它会与网格重叠。

我需要一些脚本，可以为大于 3 个字母的单词赋予它们自己的行，这样网格就不会重叠。

有人可以给我一些建议吗？

这是从 HTML 中的数组列表创建表的脚本...

```
var listOfWords = [];
var rndWord = [];
var ul = document.getElementById("wordlist");

var i;
for (i = 0; i < ul.children.length; ++i) {

    listOfWords.push({
        "name": ul.children[i].getAttribute("data-word"),
        "pic": ul.children[i].getAttribute("data-pic"),
        "audio": ul.children[i].getAttribute("data-audio")
    });

    console.log(listOfWords);
    }

    console.log(listOfWords);

var chosenWords = [];
var cpy_list = listOfWords.slice();

for (var x = 0; x < 6; x++) {
    var rand = Math.floor(Math.random() * (cpy_list.length));
    console.log('push ' + cpy_list[rand].name);
    chosenWords.push(cpy_list[rand].name);
    cpy_list.splice(rand, 1);
    console.log(cpy_list);
        if (chosenWords.length < 12) {
        console.log('make a blank');
        chosenWords.push('   ');
    }
}

console.log(chosenWords);
var shuffledWords = [];
shuffledWords = chosenWords.sort(function() {
    return 0.5 - Math.random()
});

var guesses = {};
console.log(shuffledWords);
var tbl = document.createElement('table');
tbl.className = 'tablestyle';
var wordsPerRow = 2;

for (var i = 0; i < shuffledWords.length - 1; i += wordsPerRow) {

    var row = document.createElement('tr');
    console.log(shuffledWords);
    for (var j = i; j < i + wordsPerRow; ++j) {
        var word = shuffledWords[j];
        console.log(j);
        console.log(word);
        guesses[word] = [];

        for (var k = 0; k < word.length; ++k) {
            var cell = document.createElement('td');

            $(cell).addClass('drop').attr('data-word', word);
            cell.textContent = word[k];

            row.appendChild(cell);
        }
    }
    tbl.appendChild(row);
}
document.body.appendChild(tbl); 
```

这是 HTML 中的单词列表...

```
<ul style="display:none;" id="wordlist">

    <li data-word="mum" data-audio="http://www.wav-sounds.com/cartoon/daffyduck1.wav" data-pic="http://www.clker.com/cliparts/5/e/7/f/1195445022768793934Gerald_G_Lady_Face_Cartoon_1.svg.med.png"></li>

    <li data-word="cat" data-audio="http://www.wav-sounds.com/cartoon/porkypig1.wav" data-pic="http://www.clker.com/cliparts/c/9/9/5/119543969236915703Gerald_G_Cartoon_Cat_Face.svg.med.png"></li>

    <li data-word="dog" data-audio="http://www.wav-sounds.com/cartoon/porkypig1.wav" data-pic="http://www.clker.com/cliparts/e/9/4/1/1195440435939167766Gerald_G_Dog_Face_Cartoon_-_World_Label_1.svg.med.png"></li>

    <li data-word="bug" data-audio="http://www.wav-sounds.com/cartoon/porkypig1.wav" data-pic="http://www.clker.com/cliparts/4/b/4/2/1216180545881311858laurent_scarabe.svg.med.png"></li>

    <li data-word="rat" data-audio="http://www.wav-sounds.com/cartoon/daffyduck1.wav" data-pic="http://www.clker.com/cliparts/C/j/X/e/k/D/mouse-md.png"></li>

    <li data-word="dad" data-audio="http://www.wav-sounds.com/cartoon/daffyduck1.wav" data-pic="http://www.clker.com/cliparts/H/I/n/C/p/Z/bald-man-face-with-a-mustache-md.png"></li>

    <li data-word="cop" data-audio="http://www.wav-sounds.com/cartoon/daffyduck1.wav" data-pic="http://www.clker.com/cliparts/1/4/c/5/1194984609285255522police_man_ganson.svg.med.png"></li>

    <li data-word="pig" data-audio="http://www.wav-sounds.com/cartoon/porkypig1.wav" data-pic="http://www.clker.com/cliparts/6/c/c/c/13286504431247546768Simple%20Pig%20Cartoon.svg.med.png"></li>

    <li data-word="sun" data-audio="http://www.wav-sounds.com/cartoon/porkypig1.wav" data-pic="http://www.clker.com/cliparts/3/b/1/2/11971486551534036964ivak_Decorative_Sun.svg.med.png"></li>

    <li data-word="kid" data-audio="http://www.wav-sounds.com/cartoon/daffyduck1.wav" data-pic="http://www.clker.com/cliparts/d/9/9/f/11954449391541537067Gerald_G_Girl_Face_Cartoon.svg.med.png"></li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T08:03:42.320

试试这个，让我知道它是否有帮助......

```
var listOfWords = [];
var rndWord = [];
var counter = 0;
var ul = document.getElementById("wordlist");
var i;

for (i = 0; i < ul.children.length; ++i) {

    listOfWords.push({
        "name": ul.children[i].getAttribute("data-word"),
        "pic": ul.children[i].getAttribute("data-pic"),
        "audio": ul.children[i].getAttribute("data-audio")
    });
}

var chosenWords = [];
var copylist = listOfWords.slice();

for (var x = 0; x < 6; x++) {
    var rand = Math.floor(Math.random() * (copylist.length));
    chosenWords.push(copylist[rand].name);
    copylist.splice(rand, 1);
    if (chosenWords.length < 12) {
        chosenWords.push('   ');
    }

}

var shuffledWords = [];
shuffledWords = chosenWords.sort(function() {
    return 0.5 - Math.random()
});

var guesses = {};
var tbl = document.createElement('table');
tbl.className = 'tablestyle';
var wordsPerRow = 2;

for (var i = 0; i < shuffledWords.length - 1; i += wordsPerRow) {

    var row = document.createElement('tr');
    for (var j = i; j < i + wordsPerRow; ++j) {
        var word = shuffledWords[j];
        guesses[word] = [];

        for (var k = 0; k < word.length; ++k) {
            var cell = document.createElement('td');

            $(cell).addClass('drop-box').attr('data-word', word).attr('data-letter', word[k]);
            cell.textContent = word[k];

            row.appendChild(cell);
        }
    }

    tbl.appendChild(row);
}

$(".container").append(tbl); 
```

# java - 如果参数“选择”为空，CursorLoader 将抛出 NullPointerException

> ID：11760668
> 
> 赞同：0
> 
> 时间：2012-08-01T13:46:23.797
> 
> 标签：java, android

我第一次尝试在 Android 中使用加载器概念。

这是我的测试代码：

```
package at.powersoftware.hello.loader;

import android.database.Cursor;
import android.os.Bundle;
import android.provider.ContactsContract.Contacts;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.LoaderManager;
import android.support.v4.content.CursorLoader;
import android.support.v4.content.Loader;
import android.support.v4.widget.SimpleCursorAdapter;
import android.util.Log;
import android.view.Menu;
import android.widget.ListView;

public class HelloLoaderActivity extends FragmentActivity implements LoaderManager.LoaderCallbacks<Cursor> {

    static final int LOADER_CONTACTS = 1;   // ID of the loader

    ListView list;
    SimpleCursorAdapter adapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.loaderactivity);

        list = (ListView) findViewById(R.id.listView);

        getSupportLoaderManager().initLoader(LOADER_CONTACTS, null, this);

        String[] from = {Contacts.DISPLAY_NAME, Contacts.TIMES_CONTACTED};
        int[] to = {R.id.tvDisplayName, R.id.tvTimesContacted};

  adapter = new SimpleCursorAdapter(this, R.layout.contactlist3, null, from, to, 0);

        list.setAdapter(adapter);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.loaderactivity, menu);
        return true;
    }

    @Override
    public Loader<Cursor> onCreateLoader(int id, Bundle args) {

        String[] projection = {Contacts._ID, Contacts.DISPLAY_NAME, Contacts.TIMES_CONTACTED};
        String selection = null; //"1=1" or even "" works;  
    String[] selectionArgs = null;
        String sortOrder = Contacts.TIMES_CONTACTED + " desc, " + Contacts.DISPLAY_NAME; 

        CursorLoader cl = new CursorLoader(this, Contacts.CONTENT_URI, projection, selection, selectionArgs, sortOrder);

        return cl;

    }

    @Override
    public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {

        adapter.swapCursor(cursor);
    }

    @Override
    public void onLoaderReset(Loader<Cursor> arg0) {

        adapter.swapCursor(null);
    }

} 
```

我想选择内容提供者的所有记录，因此我为“选择”参数指定了 null。但这给了我下面的错误。如果我提供像“1 = 1”甚至“”这样的选择标准，它就可以完美地工作。任何想法可能是什么问题？- 提前致谢！

```
08-01 13:28:06.092: E/AndroidRuntime(1528): FATAL EXCEPTION: main
08-01 13:28:06.092: E/AndroidRuntime(1528): java.lang.RuntimeException: Unable to start activity ComponentInfo{at.powersoftware.hello.loader/at.powersoftware.hello.loader.HelloLoaderActivity}: java.lang.NullPointerException: println needs a message
08-01 13:28:06.092: E/AndroidRuntime(1528):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
08-01 13:28:06.092: E/AndroidRuntime(1528):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
08-01 13:28:06.092: E/AndroidRuntime(1528):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-01 13:28:06.092: E/AndroidRuntime(1528):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
08-01 13:28:06.092: E/AndroidRuntime(1528):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-01 13:28:06.092: E/AndroidRuntime(1528):     at android.os.Looper.loop(Looper.java:123)
08-01 13:28:06.092: E/AndroidRuntime(1528):     at android.app.ActivityThread.main(ActivityThread.java:3683)
08-01 13:28:06.092: E/AndroidRuntime(1528):     at java.lang.reflect.Method.invokeNative(Native Method)
08-01 13:28:06.092: E/AndroidRuntime(1528):     at java.lang.reflect.Method.invoke(Method.java:507)
08-01 13:28:06.092: E/AndroidRuntime(1528):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-01 13:28:06.092: E/AndroidRuntime(1528):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-01 13:28:06.092: E/AndroidRuntime(1528):     at dalvik.system.NativeStart.main(Native Method)
08-01 13:28:06.092: E/AndroidRuntime(1528): Caused by: java.lang.NullPointerException: println needs a message
08-01 13:28:06.092: E/AndroidRuntime(1528):     at android.util.Log.println_native(Native Method)
08-01 13:28:06.092: E/AndroidRuntime(1528):     at android.util.Log.i(Log.java:158)
08-01 13:28:06.092: E/AndroidRuntime(1528):     at at.powersoftware.hello.loader.HelloLoaderActivity.onCreateLoader(HelloLoaderActivity.java:73)
08-01 13:28:06.092: E/AndroidRuntime(1528):     at android.support.v4.app.LoaderManagerImpl.createLoader(LoaderManager.java:487)
08-01 13:28:06.092: E/AndroidRuntime(1528):     at android.support.v4.app.LoaderManagerImpl.createAndInstallLoader(LoaderManager.java:496)
08-01 13:28:06.092: E/AndroidRuntime(1528):     at android.support.v4.app.LoaderManagerImpl.initLoader(LoaderManager.java:550)
08-01 13:28:06.092: E/AndroidRuntime(1528):     at at.powersoftware.hello.loader.HelloLoaderActivity.onCreate(HelloLoaderActivity.java:30)
08-01 13:28:06.092: E/AndroidRuntime(1528):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-01 13:28:06.092: E/AndroidRuntime(1528):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
08-01 13:28:06.092: E/AndroidRuntime(1528):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:08:27.963

@Jens：你说得对。在我的代码中，我有一行：

```
Log.i("HLA", cl.getSelection()); 
```

（为了更好的可读性，我删除了所有的 Log stmts）

当然，如果 selection 为 null，cl.getSelection() 也返回 null。

我到处找，但那里没有……

非常感谢你们！

@StenaviN：我们看到发布整个代码似乎是个好主意！

# android - AVD 上的 Android 终端模拟器

> ID：11760670
> 
> 赞同：0
> 
> 时间：2012-08-01T13:46:32.190
> 
> 标签：android

我知道可以通过谷歌应用商店获得一些终端模拟器

有没有办法在 AVD 而不是实际设备上安装这些应用程序？

我目前没有智能手机，所以我目前的所有开发都是通过模拟器进行的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:48:41.617

找到一个在 Play 商店之外分发其应用程序的应用程序，例如开源项目。那些应该有资格在模拟器上安装。

# tomcat - 在不指定用户名的情况下使用 Tomcat 的 CLIENT-CERT

> ID：11760674
> 
> 赞同：12
> 
> 时间：2012-08-01T13:46:34.743
> 
> 标签：tomcat, ssl, web.xml, client-certificates

我正在尝试使 Tomcat Web 应用程序对传入连接使用客户端证书身份验证。在 server.xml 中使用 clientAuth=true 时一切正常，但是由于其他应用程序在同一服务器上运行，我们无法在生产环境中使用它。

有没有办法形成一个 web.xml 文档，以便它以与 clientAuth=true 相同的方式强制应用程序使用客户端证书？似乎使用 CLIENT-CERT 设置还需要您为要访问系统的每个证书设置一个 tomcat 用户帐户？我们需要能够允许来自指定 CA（在服务器信任库中设置）的所有证书，其中主题匹配某些规则（在实际应用程序中检查）。我希望像下面这样的东西会起作用，但还没有运气！

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>Everything</web-resource-name>
        <url-pattern>/*</url-pattern>
    </web-resource-collection>
    <user-data-constraint>
        <transport-guarantee>CONFIDENTIAL</transport-guarantee>
    </user-data-constraint>
</security-constraint>
<login-config>
    <auth-method>CLIENT-CERT</auth-method>
</login-config> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T18:55:40.337

首先，听起来你想要`clientAuth=want`而不是`clientAuth=true`: 这将允许客户端提供证书，但不是绝对需要。

当您使用任何类型的身份验证时，Tomcat（或任何 servlet 容器）必须能够从中构建一个`Principal`对象——一个具有名称（通常是用户名）的对象。然后容器必须决定用户具有什么角色才能正确*授权*特定请求。因此，Tomcat 需要事先了解用户才能进行授权。

另一方面，如果您不需要任何授权，您可以设置`clientAuth=want`然后使用 a`Filter`来验证证书。`CLIENT-CERT`如果您已经在进行自己的检查，则无需使用身份验证。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-16T08:08:17.310

我只是在研究上述问题的解决方案，最终找到了解决方案：

1.  使用连接器 clientAuth="false" 属性配置 tomcat（否则所有与服务器的安全连接都将进行相互、客户端服务器、ssl 身份验证。

2.  在 web.xml 中添加以下内容（我刚刚在这里展示了示例）

    ```
    <security-constraint>
        <web-resource-collection>
            <url-pattern>/LoginTestServlet1</url-pattern>
            <http-method>GET</http-method>
            <http-method>POST</http-method>
        </web-resource-collection>
        <auth-constraint>
            <role-name>manager</role-name>
        </auth-constraint>
        <user-data-constraint>
            <!-- transport-guarantee can be CONFIDENTIAL, INTEGRAL, or NONE -->
            <transport-guarantee>CONFIDENTIAL</transport-guarantee>
        </user-data-constraint>
    </security-constraint>
     <security-constraint>
        <web-resource-collection>
            <url-pattern>/LoginTestServlet2</url-pattern>
            <http-method>GET</http-method>
            <http-method>POST</http-method>
        </web-resource-collection>
        <auth-constraint>
            <role-name>manager</role-name>
        </auth-constraint>
       <!--  <user-data-constraint>
            transport-guarantee can be CONFIDENTIAL, INTEGRAL, or NONE
            <transport-guarantee>CONFIDENTIAL</transport-guarantee>  
        </user-data-constraint> -->
    </security-constraint>
     <login-config>
        <auth-method>CLIENT-CERT</auth-method>
        <realm-name>certificate</realm-name>
      </login-config> 
    ```

    经理

3.  在 tomcat users-users.xml 添加以下内容（请注意，如果信任库具有几乎相同的证书，那么您应该清楚地标识您的证书，如下所示）

    ```
    <role rolename="manager"/> 
    ```

    <user username="EMAILADDRESS=hamzas100@yahoo.com, CN=KS, OU=OFF, O=OFS, L=Bukhara,
    ST=Bukhara, C=UZ" password="" roles="manager"/>

4.  放入浏览器（或 curl）地址行：

    [https://yourdomain.com:8443/LoginTest/LoginTestServlet1](https://yourdomain.com:8443/LoginTest/LoginTestServlet1)或
    [https://yourdomain.com:8443/LoginTest/LoginTestServlet2](https://yourdomain.com:8443/LoginTest/LoginTestServlet2)

5.  为此，您必须将证书添加到浏览器个人证书列表（如果您正在使用浏览器进行测试）。我已经尝试使用 Mozilla Firefox，它很容易让你这样做。（但它只接受 b12 证书，所以建议你应该使用带有 java keytool 的 openssl）。如果一切配置正确，那么您将收到 Mozilla 的提示以从现有证书中选择证书。如果您使用 curl（它用于自动 Web 界面测试，则使用以下命令行进行测试（我刚刚在这里给出了一个示例。）请注意，您应该选择导入到信任库中的证书。

    curl -s -k --cert selfsigned.pem --key key.pem -v --anyauth [https://yourdomain.com:8443/LoginTest/LoginTestServlet1](https://yourdomain.com:8443/LoginTest/LoginTestServlet1) --cacert selfsigned.pem 或 curl -s -k --cert selfsigned.pem --key key.pem -v --anyauth [http://yourdomain.com:8080/LoginTest/LoginTestServlet2](http://yourdomain.com:8080/LoginTest/LoginTestServlet2) --cacert selfsigned.pem

注意：我的连接器如下所示：

```
<Connector port="8443"
       maxThreads="150"  scheme="https" secure="true" SSLEnabled="true"
       sslProtocol="TLS" keystoreType="PKCS12"  truststoreType="PKCS12" clientAuth="false"
               keystoreFile="C:/Program Files/glassfish-3.1.2/glassfish/domains/domain1/config/cacerts.pkcs12"
               truststoreFile= "C:/Program Files/glassfish-3.1.2/glassfish/domains/domain1/config/cacerts.pkcs12"
               truststorePass="changeit"
               keystorePass="changeit"
               protocol="org.apache.coyote.http11.Http11Protocol"> 
```

# java - Java中如何通过指针算法访问数组元素

> ID：11760676
> 
> 赞同：1
> 
> 时间：2012-08-01T13:46:40.427
> 
> 标签：java, c, arrays, iterator, operators

鉴于 C 中的以下声明，我可以将“+”应用于地址，并访问其他元素。

```
char toto[5]; 
```

换句话说，应用此运算符 +

```
toto+0x04 
```

在 Java 中访问不同的数组元素。

是否有另一种方法可以在 java 中实现此操作？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T13:55:29.937

如果我是对的，您想访问数组中该位置的元素。你可以在java中做到这一点。

```
char foo[] = new char[]{'1', '2','3','4', '5'};
char fooAtPositionFour = foo[4]; 
```

并以这种方式分配一个新值：

```
foo[4] = 'x'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T13:53:54.150

从技术上讲不是，因为 toto+4 是一个地址，Java 的内存管理策略与 C 的完全不同。但是，您可以使用 toto[4] 获得 *(toto+4) ;)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T15:02:27.710

Almost always there is another way in java to implement what you want.

You rarely process `char[]` directly. Using String and StringBuilder is preferred.

```
String toto = "hello";
String lastChar = toto.substring(4); // from the 4th character. 
```

To answer your question literally. You can use the [sun.misc.Unsafe](http://www.docjar.com/html/api/sun/misc/Unsafe.java.html) with get/putByte or get/putChar class to do pointer arithmetic, but I suggest avoiding it unless you really, really need to.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T15:16:41.553

> 实际上我需要隔离最后四个字节，其中 param 是 char[]

您需要最后四个字节还是最后一个字符？最后一个字符`toto[toto.length-1]`

对于最后四个字节，您需要将 char 数组（Java 中的 UTF-16，我不知道 C 中的编码是什么）转换为字节数组，然后取最后四个字节。

```
new String(toto).toBytes("THE_CHAR_ENCODING_YOU_WANT_TO_USE") 
```

# c# - 直接通过另一个类公开类类型

> ID：11760677
> 
> 赞同：0
> 
> 时间：2012-08-01T13:46:41.170
> 
> 标签：c#

我有一个名为 Config 的类，其声明 `public class Config<T> where T : class, new()`

它包含一些方法来保存类型的配置`T`以及名为的属性中的实际配置`Configuration`。

是否可以直接在我的 Config 类中公开类型的`T`配置而无需通过`Configuration`属性。

到目前为止，我有一些丑陋的工作

```
public T this[int index]
{
    get { return _configuration; }
} 
```

如果不是，那么我想知道是否可以通过继承来完成`T`，但我不清楚如何做到这一点的语法。

**编辑：**
我想你可以做类似的事情

```
public T this
{
    get { return _configuration; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:44:23.240

您可以使用[隐式运算符](http://msdn.microsoft.com/en-us/library/85w54y0a.aspx)：

```
class Config<T> where T: class, new()
{
  private T _configuration;

  public static implicit operator T(Config cfg)
  {
    return cfg._configuration;
  }
} 
```

像这样使用它：

```
var config = new Config<SomeClass>();
SomeClass realConfig = config; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:46:18.977

使用运算符....

```
public static implicit operator T(Config<T> source) {
   return source.Configuration;
} 
```

然后

```
MyClass x=new Config<MyClass>(); 
```

# java - 两次打开小程序

> ID：11760684
> 
> 赞同：1
> 
> 时间：2012-08-01T13:46:59.017
> 
> 标签：java, applet, nullpointerexception

我的小程序在我打开我的 Web 应用程序时运行并且工作正常。在这个 Web 应用程序中，我有一个按钮，如果我的用户单击此按钮，小程序将在弹出窗口中打开，并加载相同的 .dll 文件。

A 得到 .dll 文件被加载到另一个类加载器中的错误，并用谷歌搜索它，我看到我无法再次加载 .dll。所以我把`<archive>`标签剪成`<applet>`这样

```
<applet code="com.griaule.fingerprintsdk.appletsample.FormMain" height="550" width="550">
        <param name="Cliente" value="<%= Cliente_Id %>" /> 
```

但是我得到了一个新的错误，

```
ClassFormatError: Incompatible magic value 218774561 in class files FormMain 
```

在此错误的详细信息中，出现以下堆栈

```
plugin2manager.parentwindowDispose
Exception in thread "thread applet-com.griaule.fingerprintsdk.appletsample.FormMain-1" java.lang.NullPointerException
    at java.awt.EventQueue.isDispatchThread(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.awt.AWTAppletAdapter.runOnEDT(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.awt.AWTAppletAdapter.doClearAppletArea(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
plugin2manager.parentwindowDispose 
```

**更新**

我的web 应用程序上的按钮事件，打开一个调用页面`OnClick`的弹出窗口。`Applet.aspx`

**Applet.ASPX 代码**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Applet.aspx.cs" Inherits="Ui.San.Chaves.Applet" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="../Java/jquery-1.6.2.min.js" type="text/javascript"></script>
    <script src="../Java/jquery.base64.min.js" type="text/javascript"></script>
    <script src="../Java/preloadCssImages.js" type="text/javascript"></script>
    <script src="../Java/jquery-1.4.4.min.js" type="text/javascript"></script>
</head>
<body>
    <applet code="com.griaule.fingerprintsdk.appletsample.FormMain" 
        archive="http://www.netimoveis.com/SignedFingerprintSDKJava.jar, http://www.netimoveis.com/SignedFingerprintSDKJavaAppletSample.jar, http://www.netimoveis.com/sqljdbc4.jar"
        height="550" width="550">
        <param name="Cliente" value="<%= Cliente_Id %>" />
    </applet>
</body>
</html> 
```

有人可以帮助我吗？我需要在加载我的 Web 应用程序时调用小程序，并且当我的用户在同一个 Web 应用程序中单击我的按钮时。

也许是一种卸载应用程序的小程序 .dll 并在另一个弹出窗口中加载的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:15:14.747

> ..小程序将在弹出窗口中打开..

[使用Java Web Start](https://stackoverflow.com/tags/java-web-start/info)以自由浮动方式打开小程序。小程序每次启动都会有一个新的 JVM，DLL 问题就会消失。作为奖励，JWS 将允许您对 OS X 和 *nix 的本地下载进行分区。

* * *

就目前`ClassFormatError`而言，请参阅[此答案](https://stackoverflow.com/a/10327211/418556)，这表明价值加起来为`CR`、`LF`和。这样的字符可能是服务器生成的“404”页面的典型开始。`<``!`

# c - libc.so.1 中的核心

> ID：11760688
> 
> 赞同：0
> 
> 时间：2012-08-01T13:47:11.683
> 
> 标签：c, unix, solaris, core, libc

我正在使用 Solaris 10，我的 C 程序崩溃并创建了一个核心文件。在调试时，似乎核心是在 libc.so.1 中创建的。如果有人有任何线索，请告诉我。以下是 dbx 报告。

```
dbx prock.new core
For information about new features see `help changes'
To remove this message, put `dbxenv suppress_startup_message 7.6' in your .dbxrc
Reading prock.new
core file header read successfully
Reading ld.so.1
Reading libsocket.so.1
Reading libnsl.so.1
Reading libl.so.1
Reading libpthread.so.1
Reading librt.so.1
Reading libthread.so.1
Reading libc.so.1
Reading libaio.so.1
Reading libmd.so.1
Reading libc_psr.so.1
WARNING!!
A loadobject was found with an unexpected checksum value.
See `help core mismatch' for details, and run `proc -map'
to see what checksum values were expected and found.
dbx: warning: Some symbolic information might be incorrect.
t@null (l@1) terminated by signal SEGV (no mapping at the fault address)
0xffffffff7ea3bc14: strcasecmp+0x0134:  orn      %i0, %i3, %i0
(dbx) where
=>[1] strcasecmp(0x10014b68e, 0x57, 0x7ffffc00, 0x1001332d7, 0x27, 0x24), at 0xffffffff7ea3bc14
  [2] 0x10000af48(0x27, 0x10014b68e, 0x57, 0x10014b68e, 0x57, 0x0), at 0x10000af48
  [3] 0x100009c08(0x27, 0x5e, 0x0, 0x9, 0x1001332c3, 0x2b), at 0x100009c08

(dbx) whereis strcasecmp
function:       `libc.so.1`strcasecmp
(dbx) 
```

我的solaris版本是

```
 Solaris 10 8/07 s10s_u4wos_12b SPARC
   Copyright 2007 Sun Microsystems, Inc.  All Rights Reserved.
                Use is subject to license terms.
                    Assembled 16 August 2007 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:52:58.237

不，问题不在于 C 标准库。您将无效参数（NULL 字符串指针等）传递给`strcasecmp()`. 如果没有实际代码（您尚未发布），则无法推断出错误的确切含义。

（另外，你最好用调试符号编译你的程序——关闭优化！如果你在 Solaris 上，你很可能使用 GCC：

```
gcc -O0 -g etc... 
```

)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T13:54:54.307

1) 编译您的程序以包含调试信息（将“-g”添加到编译器的选项列表中），以便您实际获取信息而不是以下信息：

```
 [2] 0x10000af48(0x27, 0x10014b68e, 0x57, 0x10014b68e, 0x57, 0x0), at 0x10000af48
 [3] 0x100009c08(0x27, 0x5e, 0x0, 0x9, 0x1001332c3, 0x2b), at 0x100009c08 
```

2) DBX 现在会告诉你你的哪些函数已经*调用* `strcasecmp`了。单步调试源代码（或让它生成日志输出），检查致命函数调用的参数是否有任何异常（如无效指针）。

与您对该函数的调用出错的可能性相比，您在 libc 函数中发现错误的可能性微乎其微。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T19:16:25.423

1) 运行 bt (backtrace) 以查看谁在调用 strcasecmp [这将列出像 #0、#1 这样的帧]

2) 现在跳转到特定帧以获取值 [帧 0]

3）然后显示/打印传递给strcasecmp的参数值（使用打印或显示）

我觉得调用 strcasecmp 的参数是 NULL ，这就是你得到段错误的原因。

# ruby-on-rails - 当我运行“rake routes”或任何 rake 任务时，它总是首先加载我的环境

> ID：11760689
> 
> 赞同：0
> 
> 时间：2012-08-01T13:47:14.197
> 
> 标签：ruby-on-rails, rake

我试图弄清楚为什么我的非环境 rake 任务，例如：

```
rake routes 
```

需要很长时间才能运行。加载我的应用程序的复杂环境需要一分钟多的时间。这是一个 Rails 2.3.12 应用程序，我的 Rakefile 如下：

```
# Add your own tasks in files placed in lib/tasks ending in .rake,
# for example lib/tasks/switchtower.rake, and they will automatically be available to Rake.
require 'thread'
require(File.join(File.dirname(__FILE__), 'config', 'boot'))

require 'rake'
require 'rake/testtask'
require 'rdoc/task'
require 'delayed/tasks'

require 'tasks/rails' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:35:53.707

调用`rake routes`确实依赖于rails堆栈，并且因为auf这个，环境被加载。

你可以做的是使用第三方宝石，如六分仪：[https ://github.com/schneems/sextant/](https://github.com/schneems/sextant/)

# ruby-on-rails - 为什么每个人都使用双引号而不是单引号？

> ID：11760690
> 
> 赞同：2
> 
> 时间：2012-08-01T13:47:19.087
> 
> 标签：ruby-on-rails, ruby

正如我们在消息中看到的那样，在 ruby[​​ 中使用单引号比双引号更快：在 ruby​​ 中使用单引号与双引号是否有性能提升？](https://stackoverflow.com/questions/1836467/is-there-a-performance-gain-in-using-single-quotes-vs-double-quotes-in-ruby).

那么为什么每个人都使用双引号（或两者）？？？

一些例子 ：

*   [https://github.com/rails/rails/blob/master/activerecord/test/models/company.rb](https://github.com/rails/rails/blob/master/activerecord/test/models/company.rb)
*   [https://github.com/sinatra/sinatra/blob/master/test/routing_test.rb](https://github.com/sinatra/sinatra/blob/master/test/routing_test.rb)
*   [https://github.com/jnicklas/capybara/blob/master/spec/rack_test_spec.rb](https://github.com/jnicklas/capybara/blob/master/spec/rack_test_spec.rb)

（我知道，不是所有人，而是大多数人。）

**编辑1：插值不是原因！**

在 Sinatra 中，双引号并不总是带有插值或任何特殊的东西：

```
it "defines HEAD request handlers with HEAD" do 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T13:54:25.900

双引号允许您进行插值：`"Number of users : #{@count_user}"`

再加上看看基准，我会说充其量没关系，开销很小，而且有些基准实际上用双引号更快......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-01T13:53:18.360

双引号允许字符串插值，单引号不会计算其中的任何内容，而双引号会。例如，双引号将允许您使用转义字符，而单引号则不允许！

```
 "he said \n hello" 
```

将导致 2 行，而

```
 'he said \n hello' 
```

将产生一个中间有 '\n' 的字符串

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T13:52:09.580

一个原因是双引号支持字符串插值，但单引号不支持。

例如：

```
some_var = 15
"I have #{some_var} cats"
# => "I have 15 cats"

'I have #{some_var} cats"
# => "I have \#{some_var} cats" 
```

如果可能，我个人更喜欢单引号，因为我认为它们看起来更干净。但是字符串插值是使用双引号的一个非常重要的原因。

关于性能问题，它是如此微不足道，以至于它实际上是一个偏好问题而不是性能问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T04:20:49.533

它已被回答并接受，其中一些正在重复其他人，但我的 2 美分值得。

1.  使用双引号意味着如果您以后确实想将需要插值的内容添加到字符串中，您可以这样做而无需更改引号。
2.  需要插值的字符串和不需要插值的字符串之间的一致性。
3.  能够在字符串中包含所有英语，例如。"don't", "Jim's" 无需转义或更改引号。
4.  `\`在 \n 和 \t 等字符串中嵌入转义字符

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T13:54:21.650

我不知道您是否真的正确阅读了该线程，但@zetetic 实际上发现使用双引号会稍微快一些。尽管如此，这项测试完成了超过 100 万个任务，因此在这方面它们的速度基本相同。

这一切都归结为偏好。很多人来自无法使用单引号的语言，因此他们习惯于双引号。这都是偏好问题。

# php - 如何在 PHP 中保存之前以写入模式显示另存为对话框以选择文件

> ID：11760694
> 
> 赞同：0
> 
> 时间：2012-08-01T13:47:22.157
> 
> 标签：php, dialog, save

在我的 php 代码中，我从 mySQL 数据库中检索行并将它们保存到 CSV 文件中。我在代码中硬编码文件名。算法简单如下：

```
1\. Allow user select excel file.
2\. Retrieve rows from table, separate column data with commas and build up strings through concatenation.
3\. put the build up into the selected file.
4\. Close the file. 
```

但是，我希望在将构建的 CSV 字符串保存到文件之前显示一个“另存为”对话框供用户选择文件。我看到的所有建议都在谈论使它看起来像下载，但是在下载中，文件已经在用户保存到本地计算机之前建立起来。就我而言，必须首先选择文件。

如果将应用程序从主分区标记为 C: 的机器移动到标记为 D: 的机器，我还希望应用程序是可移植的，因此我不需要硬编码。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:02:09.247

要使浏览器下载文件（而不是在已知 MIME 类型时打开它），您可以设置以下标头：

*   `Content-disposition: attachment; filename=fname.ext`

我不相信有任何方法可以强制浏览器使用另存为对话框进行提示。每个浏览器都有不同的处理方式，通常是本地用户设置。（即自动下载到默认文件夹，每次提示等）

作为替代方案，也许建议您的用户在需要明确指定下载文件位置和名称时使用“右键单击 -> 另存为...”。

# linux - 如何在 Knoppix 中设置 PATH？

> ID：11760695
> 
> 赞同：0
> 
> 时间：2012-08-01T13:47:22.930
> 
> 标签：linux, environment-variables

我正在使用 knoppix 7.0.3 并尝试设置 PATH 环境变量。根据 Ubuntu 官方文档，/etc/environment 应该是首选位置。所以我在文件中添加了这些行：

```
JAVA_HOME="/usr/lib/jvm/java-6-sun"
GRAILS_HOME="/home/knoppix/grails"
PATH="${PATH}:${JAVA_HOME}/bin:${GRAILS_HOME}/bin" 
```

但是在重新启动系统后，文件只是恢复到原来的文件（我使用的是持久存储）。然后在谷歌搜索之后，我尝试像这样编辑 ~/.profile ：

```
export JAVA_HOME="/usr/lib/jvm/java-6-sun"
export GRAILS_HOME="/home/knoppix/grails"
export PATH=$PATH:$JAVA_HOME/bin:$GRAILS_HOME/bin 
```

这一次，前两个变量被设置（在控制台中回显），但 PATH 没有。当我回应时，它仍然是默认的。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T23:04:30.517

Modify `/etc/profile` on the following line:

```
PATH=".:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:34:39.657

问题是您`PATH`在 bash 初始化期间被覆盖，在阅读`.profile`.

从[bash 的联机帮助页](http://linux.die.net/man/1/bash)：

> 当 bash 作为交互式登录 shell 或作为带有 --login 选项的非交互式 shell 调用时，它首先从文件 /etc/profile 中读取并执行命令（如果该文件存在）。读取该文件后，它会按顺序查找 ~/.bash_profile、~/.bash_login 和 ~/.profile，然后从第一个存在且可读的文件中读取并执行命令。当 shell 启动时，可以使用 --noprofile 选项来禁止这种行为。
> 
> ...
> 
> 当一个不是登录 shell 的交互式 shell 启动时，bash 会从 ~/.bashrc 读取并执行命令，如果该文件存在的话。这可以通过使用 --norc 选项来禁止。--rcfile 文件选项将强制 bash 从文件而不是 ~/.bashrc 读取和执行命令。

From your experience, it is apparent that if `.bashrc` doesn't exist, bash is trying to set `PATH` to a default value (I would appreciate if someone confirms this).

As we discussed in the comments on your question, adding the `export` commands to `.bashrc` (and thus creating the file) solves the problem. Alternatively, you can add

```
source ~/.profile 
```

to the end of your `.bashrc` file for the same effect.

# jquery - CKEditor 自动增长功能的问题

> ID：11760699
> 
> 赞同：1
> 
> 时间：2012-08-01T13:47:28.110
> 
> 标签：jquery, ajax, model-view-controller, ckeditor

我在使用 CKEditor 的自动增长功能时遇到问题，我在使用返回部分视图的 MVC 和 ajax 帖子的页面中使用它，当我触发某些 $ajax 帖子（特别是那些返回部分而不重新加载页面的帖子）时，我收到了以下错误：未捕获 [CKEDITOR.resourceManager.add] 资源名称“autogrow”已注册。

我想知道是否有一种方法可以“取消注册”自动增长功能并在流程完成后重新注册它。或者，如果有简单的方法可以避免这一切，除了`location.reload(true)`.

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-04-26T14:11:31.233

您应该在“ckeditor”的“plugins”文件夹中创建一个名称为按钮的文件夹，并在该文件夹中创建文件“plugin.js”，然后您可以使用新按钮的代码。例如： - ckeditor/plugins/timestamp/plugin.js

我的代码：

```
CKEDITOR.plugins.add( 'timestamp', {
init: function( editor ) {
    editor.addCommand( 'insertTimestamp', {
        exec: function( editor ) {
    editor.insertHtml( 'text' );
        }
    });
    editor.ui.addButton( 'Timestamp', {
        label: 'Insert Timestamp',
        command: 'insertTimestamp',
        toolbar: 'insert.0'
    });
} 
```

});

# ruby - 如何在 FactoryGirl 工厂上定义方法？

> ID：11760704
> 
> 赞同：9
> 
> 时间：2012-08-01T13:47:33.263
> 
> 标签：ruby, factory-bot

如何定义一个在我的 FactoryGirl 工厂中使用的常规方法？例如：

```
FactoryGirl.define do
  def silly_horse_name
   verbs = %w[brunches dribbles haggles meddles]
   nouns = %w[landmines hamlets vandals piglets]
   "#{verbs.sample} with #{nouns.sample}".titleize
  end

  factory :racehorse do
    name { silly_horse_name } # eg, "Brunches with Landmines"

    after_build do |horse, evaluator|
      puts "oh boy, I built #{silly_horse_name}!"
    end

  end
end 
```

这样做根本不会调用`silly_horse_name`；如果将其重新定义为`raise 'hey!'`，则不会发生任何事情。

我正在使用 FactoryGirl 2.5.2。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-23T04:10:26.380

我能找到的不污染全局命名空间的最佳解决方案是在模块中定义它。例如，

```
module FactoryHelpers
  extend self

  def silly_horse_name
    ...
  end
end

FactoryGirl.define do
  factory :racehorse do
    name { silly_horse_name }
  end
end 
```

[资源](https://github.com/thoughtbot/factory_girl/issues/564)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T13:49:59.703

我的建议是在`main`. `FactoryGirl.define`因此，只需将其移至块外文件的顶部即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-21T12:07:21.070

好的，这是我的两分钱（请注意史蒂夫的回答存在细微差别）：

```
# /spec/factory_helpers.rb:

module FactoryHelpers
  extend self

  def silly_penguin_name # who says penguins can't be silly too?!
    ...
  end
end 
```

* * *

```
# /spec/factories.rb:

require 'factory_helpers'

FactoryGirl.define do

  factory :racepenguin do
    name { FactoryHelpers.silly_penguin_name }
  end

end 
```

顺便说一句，我使用的是 FactoryGirl 4.8.0 版和 Rails 4.2.0 版。

# ruby - 如何让 Thor 显示选项？

> ID：11760708
> 
> 赞同：5
> 
> 时间：2012-08-01T13:47:44.300
> 
> 标签：ruby, gem, thor

这是我的 Ruby 代码：

```
require 'thor'
require 'thor/group'

module CLI

    class Greet < Thor
        desc 'hi', 'Say hi!'
        method_option :name, :type => :string, :description => 'Name to greet', :default => 'there'
        def hi
            puts "Hi, #{options[:name]}!"
        end

        desc 'bye', 'say bye!'
        def bye
            puts "Bye!"
        end
    end

    class Root < Thor
        register CLI::Greet, 'greet', 'greet [COMMAND]', 'Greet with a command'
    end
end

CLI::Root.start 
```

这是输出：

```
C:\temp>ruby greet.rb help greet
Usage:
  greet.rb greet [COMMAND]

Greet with a command 
```

我怎样才能让它看起来像这样？

```
C:\temp>ruby greet.rb help greet
Usage:
  greet.rb greet [COMMAND]
    --name Name to greet

Greet with a command 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T20:29:31.173

你有两件事在这里发生。首先，您已将 --name 分配给一个方法，而不是整个`CLI::Greet`类。因此，如果您使用以下命令：

```
ruby greet.rb greet help hi 
```

你得到

```
Usage:
  greet.rb hi

Options:
  [--name=NAME]  
                 # Default: there

Say hi! 
```

是的，这是错误的——它在帮助中没有子命令。在 Thor 中为此提交了一个[错误。](https://github.com/wycats/thor/issues/170)但是，它正确显示了方法选项。

然而，看起来你正在寻找的是一个类方法。这是为整个`CLI::Greet`类定义的方法，而不仅仅是为方法定义的`#hi`。

你会这样做：

```
require 'thor'
require 'thor/group'

module CLI

    class Greet < Thor
        desc 'hi', 'Say hi!'
        class_option :number, :type => :string, :description => 'Number to call', :default => '555-1212'
        method_option :name, :type => :string, :description => 'Name to greet', :default => 'there'
        def hi
            puts "Hi, #{options[:name]}! Call me at #{options[:number]}"
        end

        desc 'bye', 'say bye!'
        def bye
            puts "Bye! Call me at #{options[:number]}"
        end
    end

    class Root < Thor
        register CLI::Greet, 'greet', 'greet [COMMAND]', 'Greet with a command'        
        tasks["greet"].options = CLI::Greet.class_options
    end
end

CLI::Root.start 
```

有了这个，`ruby greet.rb help greet`返回

```
Usage:
  greet.rb greet [COMMAND]

Options:
  [--number=NUMBER]  
                     # Default: 555-1212

Greet with a command 
```

请注意，这里仍然需要一个技巧：`tasks["greet"].options = CLI::Greet.class_options`. 在 Thor 中也为此提交了`CLI::Root`一个[错误。](https://github.com/wycats/thor/issues/149)

# java - 如何在 Java 中加快 PC/SC 读卡器上的卡缺失检测？

> ID：11760709
> 
> 赞同：3
> 
> 时间：2012-08-01T13:47:44.707
> 
> 标签：java, detection, nfc, smartcard, rfid

我正在处理的应用程序需要尽快（最多 500 毫秒）检测到卡已从现场移除。

这是我为测试检测卡缺失所需的时间所做的工作：

```
public static long timeToGetCardAbsent(int version) throws CardException{
    TerminalFactory factory = TerminalFactory.getDefault();

    CardTerminals terminalList = factory.terminals();
    CardTerminal ct = terminalList.list().get(0);

    long connectTime = 0, disconnectTime = 0;

    ct.waitForCardPresent(0);
    connectTime = new Date().getTime();

    ct.waitForCardAbsent(0);
    disconnectTime = new Date().getTime();

    return disconnectTime - connectTime;
} 
```

当程序运行时，我在读卡器上点击一张（DESFire）非接触式卡并立即将其取出。

以下是输出：

```
1437
1437
1438
1437
1422 
```

我的意思是读卡器（或程序？）需要将近 1.5 秒才能检测到卡不存在，这对我来说太长了。

有没有办法加快这种检测？我目前正在使用`javax.smartcardio`，我会用另一个库获得更好的结果吗？我实际上不知道我还能用什么，你有线索吗？

谢谢， GChabot

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:26:53.307

我今天实际上设法改善了很多检测时间。我正在查看[“NFC Wizard”中的那个网页，](http://www.nfcwizard.com/engine/nfctag-read.php?lang=en)并注意到他们在检测我的卡移除方面非常快。这个 javascript 网页通过一个 Java 小程序与读者进行通信，所以它实际上只使用了我所拥有的。

[NFC Wizard 的创建者 SpringCard 实际上在该页面的 Other resources > Java 和“SpringCard PC/SC SDK (ZIP archive)”下](http://www.springcard.com/solutions/pcsc.html)提供了类似应用程序的完整文档甚至源代码。

在浏览他们的代码时，我注意到在对卡执行操作后，使用该`card.disconnect(false);`功能（我曾尝试使用`card.disconnect(true);`但结果与以前相同......*运气不好*）。

所以这就是我现在要做的：

```
import java.util.Date;
import javax.smartcardio.*;

public class NewMethod {
    private long connectTime = -1;
    private long disconnectTime = -1;

    private TerminalFactory factory;
    private CardTerminals terminalList;
    private CardTerminal ct;

    public NewMethod() throws CardException{
        factory = TerminalFactory.getDefault();

        terminalList = factory.terminals();
        ct = terminalList.list().get(0);
    }

    public long waitForCardPresent(){
        try {
            ct.waitForCardPresent(0);
        } catch (CardException e) { }
        return new Date().getTime();
    }

    public long waitForCardAbsent(){
        while(true){
            try {
                Thread.sleep(10);
            } catch (InterruptedException e1) { }

            try{
                ct.connect("*").disconnect(false);
            }
            catch(Exception e) {
                return new Date().getTime();
            }
        }
    }

    public void run(){
        while(true){
            connectTime = waitForCardPresent();
            disconnectTime = waitForCardAbsent();
            System.out.println((disconnectTime-connectTime));
        }
    }

    public static void main(String[] args){
        NewMethod nm;
        try {
            nm = new NewMethod();
            nm.run();
        } catch (CardException e) {
            e.printStackTrace();
        }
    }
} 
```

*（线程部分是可选的，但无论有没有它我都得到了相同的结果，所以我更愿意节省一点处理器消耗）*

这是我使用线程版本的时间：这里是非线程版本`531, 437, 656, 657, 735, 657, 547, 844, 15, 766, 859, 563, 765, 562, 422, 437, 563, 562, 562, 672, 672, 16, 547, 546, 672, 15, 344` ：`984, 547, 796, 656, 796, 718, 656, 812, 625, 781, 813, 547, 797, 532, 407, 609, 719, 328, 469, 328, 0, 546, 625, 0, 843, 703`

我们可能会注意到结果非常不稳定（实际上使用线程版本要好得多），这可能来自我将卡敲击读卡器的方式，但我相信这不是唯一的原因。

现在*看起来*对我来说已经足够好了。我只是希望当我在我的应用程序中实际使用它时不会有太大的变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T21:47:49.857

我在 Linux 上进行了一些测试，在 Linux 中，默认的 PCSC守护进程每 400-500 毫秒*轮询*一次驱动程序。如果我发现的 PCSC Lite 信息正确，不稳定的驱动程序似乎会删除此轮询并使用不同的方法。

Java 方法似乎几乎立即返回，所以这不太可能是罪魁祸首。尝试将您的 PCSC 实施、固件和驱动程序更新到最新版本。如果这不起作用，您将别无选择解决它。

这个答案确实让我在 Linux 上安装了 PCSC + SCM SDI010 驱动程序安装和 3 个固件的测试。但无论如何，我自己也想要这些信息。如果我得到更新版本的 PCSC lite 工作，我会更新答案。

# javascript - 在 Windows XP 上运行 BrowserQuest 本地服务器

> ID：11760712
> 
> 赞同：0
> 
> 时间：2012-08-01T13:47:52.303
> 
> 标签：javascript, html, canvas, websocket

我试图在我的 Windows XP 笔记本电脑上运行本地 BrowserQuest 服务器，但我遇到了一些问题。您可以在此处查看 BrowserQuest 博客文章：http: [//hacks.mozilla.org/2012/03/browserquest/](http://hacks.mozilla.org/2012/03/browserquest/)

到目前为止，我已经从 github 下载了 BrowserQuest 源代码，使用 npm install -d 安装了 node.js 以及 BrowserQuest 所需的 node.js 库（下划线、日志、野牛、websocket 等）。

现在我转到命令提示符并使用 node server/js/main.js ，结果如下： [Image](http://i.imgur.com/M5Wdy.png)

现在一切正常，所以我转到客户端文件夹并在 Google Chrome 中打开 index.html，输入名称并单击“播放”按钮，但它只是停留在加载符号上 (spinner.gif)

所以现在我进入谷歌浏览器的控制台，它是这样说的：

```
App initialized. log.js:14
XMLHttpRequest cannot load file:///C:/Test/client/config/config_build.json. Cross origin requests are only supported for HTTP.
Uncaught SyntaxError: Unexpected end of input index.html:1
Uncaught Error: NETWORK_ERR: XMLHttpRequest Exception 101 text.js:6
181waiting... log.js:22
45waiting... log.js:22
Uncaught Error: Load timeout for modules: text!../config/config_build.json 
http://requirejs.org/docs/errors.html#timeout require-jquery.js:80
634waiting... log.js:22 
```

# serialization - 如何反序列化来自 ApiController 的数据

> ID：11760713
> 
> 赞同：1
> 
> 时间：2012-08-01T13:47:52.423
> 
> 标签：serialization, asp.net-mvc-4, asp.net-web-api, entity-framework-5

我有一些 POCO 对象设置为与 Entity Framework Code First 一起使用。

我想从我的 ASP.NET MVC 4 网站中的 ApiController 返回其中一个对象，然后在客户端应用程序中使用它。

我最初在服务器端对对象的序列化有问题，因为实体框架妨碍了（请参阅[Can an ApiController return an object with a collection of other objects?](https://stackoverflow.com/questions/11600734/can-an-apicontroller-return-an-object-with-a-collection-of-other-objects)），它试图序列化 EF 代理对象而不是普通的 POCO 对象。所以，我在我的 DbContext 中关闭了代理生成以避免这种情况 - 现在我的序列化对象看起来不错（在我看来）。

有问题的对象是“标签”——这是我的 POCO 类：

```
public class Tag
{
    public int Id { get; set; }

    public int ClientId { get; set; }
    public virtual Client Client { get; set; }

    [Required]
    public string Name { get; set; }

    [Required]
    public bool IsActive { get; set; }
} 
```

相当标准的东西，但请注意 ClientId 和 Client 成员。这些是 EF Code First“导航”属性。（每个标签只属于一个客户）。

这是我从我的 ApiController 中得到的：

```
<Tag xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.datacontract.org/2004/07/Foo">
  <Client i:nil="true"/>
  <ClientId>1</ClientId>
  <Id>1</Id>
  <IsActive>true</IsActive>
  <Name>Example</Name>
</Tag> 
```

Client 成员为零，因为禁用了代理生成，我没有自动加载引用的对象。这很好，在这种情况下 - 我不需要客户端的数据。

所以现在我试图在客户端反序列化这些对象。我曾希望我能够在客户端应用程序中重用相同的 POCO 类，而不是创建新类。干燥等等。所以，我正在尝试：

```
XmlSerializer xmlSerializer = new XmlSerializer(typeof(Tag));

var tag = xmlSerializer.Deserialize(stream); 
```

但是我遇到了两个问题，这两个问题都是由于 EF Code First 约定：

**问题 1**：因为我的 Tag 类有一个 Client 成员，所以 XmlSerializer 抱怨它不知道如何反序列化它。我想这很公平（尽管我曾希望因为 XML 中的成员是 Nil，所以它不会在意）。我可以在 XmlSerializer 构造函数中传递额外的类型，当我尝试这样做时，它会抱怨 Client 使用的其他类。由于 Client 引用了各种其他对象，我最终不得不将它们全部传入！

我尝试使用 [DataContract] 和 [DataMember] 属性从 XML 中删除 Client 成员（通过不将其标记为 DataMember）。这确实将它从 XML 中删除，但并没有阻止 XmlSerializer 抱怨它。所以我想问题不是在 XML 中，而是在类定义中。

**问题 2**：当我尝试将 typeof(Client) 作为额外类型传入时，它还抱怨它无法反序列化该类，因为它包含一个接口成员。那是因为 - 再次由于 EF Code First 约定 - 它有一个 Tags 成员，如下所示：

```
`public virtual ICollection<Tag> Tags { get; set; }` 
```

所以看起来即使我解决了引用类型的问题，我仍然无法使用我的 POCO 类。

Is there a solution to this, or do I have to create new DTO classes purely for use at the client side, and return those from my ApiController?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:54:48.580

I just tried using `DataContractSerializer` instead of `XmlSerializer`, and for the Tag class that seems to work. I've yet to try it with a class that has a virtual `ICollection<T>` member...

Update: tried it, and it "works". It still manages to reconstruct the object, and leaves the `ICollection` member at null.

Update 2: OK, that turned out to be a dead end. Yes, it meant that I could correctly serialize and de-serialize the classes, but as everyone kept telling me, DTO classes were a better way to go. (DTO = Data Transfer Objects - classes created specifically for transferring the data across the wire, probably with a subset of the fields of the original).

**I'm now using AutoMapper (thanks Cuong Le) so that I can easily transform my POCO entities into simpler DTO classes for serialization**, and that's what I'd recommend to anyone faced with the same problem.

# windows-phone-7 - Windows 手机导航错误

> ID：11760714
> 
> 赞同：0
> 
> 时间：2012-08-01T13:47:53.610
> 
> 标签：windows-phone-7, navigation

我遇到了一个问题。我有一个带有进度条的加载页面。它是非交互式的，它只显示加载数据的进度。加载数据后 - 它导航到 MenuPage。

如果用户在加载过程中最小化应用程序，有时会在 BackStack 中添加一个幻像损坏的条目。

问题：如果这个损坏的条目在 backstack- `NavigationService.RemoveBackEntry()`throws`NullReferenceException`中。

问题：我的目标是当用户按下后从第二页退出应用程序。我能以某种方式做到这一点而不从后台删除项目并抛出异常吗？

![在此处输入图像描述](../Images/8b4dd1d6b87ec9b8444065aad42c29e1.png)

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-08-01T15:32:57.310

简而言之，没有。您不能直接退出应用程序，这很糟糕。但是，您可以通过处理良好的异常来做到这一点。

```
private class QuitException : Exception { }

public static void Quit()
{
    throw new QuitException();
}

private void Application_UnhandledException(object sender, 
ApplicationUnhandledExceptionEventArgs e)
{
    if (e.ExceptionObject is QuitException)
        return;

    if (System.Diagnostics.Debugger.IsAttached)
    {
        System.Diagnostics.Debugger.Break();
    }
} 
```

资源：

[http://www.imaginativeuniversal.com/blog/post/2010/08/22/How-to-Quit-a-WP7-Silverlight-Application.aspx](http://www.imaginativeuniversal.com/blog/post/2010/08/22/How-to-Quit-a-WP7-Silverlight-Application.aspx)

# combobox - WiX：列表项未显示在组合框中

> ID：11760721
> 
> 赞同：1
> 
> 时间：2012-08-01T13:48:18.597
> 
> 标签：combobox, wix, wix3.5, wix3

当我在 WiX 中创建（尝试创建）一个 ComboBox 时，该框从之前在 .wxs 文件中设置的相应属性的值接收其初始值。到目前为止，一切都按计划进行。当我尝试以图形方式更改其值时，它显示没有可用的列表项。我没有在我没有使用过的文档中找到任何必要或相关的属性等，但我对 WiX 也很陌生，所以可能错过了一些明显的东西。代码如下：

```
 <Property Id="LANGUAGE" Value="Swedish" /> 
       ... cut ...
            <Control Type="ComboBox" ComboList="yes" Property="LANGUAGE" Id="languages_combo" Width="..." Height="..." X="..." Y="...">
                <ComboBox Property="LANGUAGE">
                    <ListItem Value="Swedish" />
                    <ListItem Value="English" />
                </ComboBox>
            </Control> 
```

我希望能够在下拉菜单中选择“英语”而不是“瑞典语”，但该选项不可用（就此而言，“瑞典语”不是 - 即使这是默认值）。任何建议如何解决这个问题？我已经在网上搜索但没有成功，所以我想它是如此基本，没有人遇到同样的问题:-)

如果有帮助，这里是编译：

```
candle test.wxs
light -ext WixUIExtension -sice:ICE20 test.wixobj 
```

我的尝试：

*   将 Text="..." 添加到 ListItems 没有帮助。
*   用“ListBox”替换“ComboBox”（并删除属性 ComboList）会显示选项/ListItems，但不幸的是 ListBox 不是我想要的控件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:20:17.963

我认为您需要在 ListItems 上设置可见的显示文本。

试试这个：

```
 <ComboBox Property="LANGUAGE">
    <ListItem Text="English" Value="English" />
    <ListItem Text="Swedish" Value="Swedish" />
  </ComboBox> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T15:52:39.253

当你一遍又一遍地犯同样的错误，却从来没有意识到这是一个很好的老错误时，这很有趣。我增加了 Control 的 Height 属性，所以 ListItems 适合。奇迹般有效！

# php - 为 mysql 转换 Fullcalendar 开始/结束日期

> ID：11760728
> 
> 赞同：-2
> 
> 时间：2012-08-01T13:48:43.277
> 
> 标签：php, javascript, jquery, json

我想知道如何转换 FullCalendar 开始和结束日期，以便我可以将其插入数据库中，这是 fullcalendar js 给出的输出：

> 结束 2012 年 8 月 16 日星期四 00:00:00 GMT 0300
> 
> 开始时间 2012 年 8 月 8 日星期三 00:00:00 GMT 0300

它可以通过javascript或php来完成，这就是我发送的json：

> 标题=测试&开始=2012 年 8 月 8 日星期三 00:00:00 GMT+0300&end=2012 年 8 月 16 日星期四 00:00:00 GMT+0300&uid=7

```
> $.ajax({
>       cache: false,
>       type: 'POST',
>       url: siteURL + 'ajax/add_holiday',
>       data: 'title=' + title + '&start=' + start +'&end=' + end + '&uid=' + '<?php echo $_SESSION['user']->uid; ?>',
>       success: function(data) {
>                   
>       }
>   }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T13:55:31.727

使用[FullCalendar 的内置函数](http://arshaw.com/fullcalendar/docs/utilities/formatDate/)

```
start = $.fullCalendar.formatDate(start, "YYYY-MM-dd HH:mm:ss"); 
```

# c++ - strcmp 的返回值是什么意思？

> ID：11760729
> 
> 赞同：0
> 
> 时间：2012-08-01T13:48:49.397
> 
> 标签：c++

我知道 strcmp 返回...

> 大于零的值表示第一个不匹配的字符在 str1 中的值大于在 str2 中的值；小于零的值表示相反。

但是这些正数或负数是什么意思呢？例如 2 是什么意思？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T13:50:29.627

该标准没有告诉您具体数字的含义。每个实现都可以返回它喜欢的任何东西，只要它返回适当的大于、等于或小于零。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-01T13:50:11.653

简而言之，什么都没有。它通常取决于函数是如何实现的，但你不能依赖它。

例如，在他们在这里讨论的实现中（第 3 篇文章）：[http](http://compsci.ca/v3/viewtopic.php?t=24383) ://compsci.ca/v3/viewtopic.php?t=24383它返回第一个不同字符（的数字表示）之间的差异，`strcmp("ab","ad")`即返回`-2`。

或者，对于此实现，[http](http://en.wikibooks.org/wiki/C_Programming/Strings#The_strcmp_function) ://en.wikibooks.org/wiki/C_Programming/Strings#The_strcmp_function将返回相同的调用`-1`。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-01T13:50:14.257

> 大于零的值表示第一个不匹配的字符在 str1 中的值大于在 str2 中的值

和

> 2 > 0

所以

> 2 表示第一个不匹配的字符在 str1 中的值大于在 str2 中的值

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-01T13:51:09.890

只有返回整数的符号是​​有意义的。尽管在大多数实现中它通常是 -1、0 和 +1（分别），但从不依赖确切的值。

# visual-studio-2010 - 查看 form.cs 或其他多部分项目的修订历史记录

> ID：11760732
> 
> 赞同：1
> 
> 时间：2012-08-01T13:49:02.383
> 
> 标签：visual-studio-2010, svn, version-control

我们有一个 .NET windows 窗体项目。一个表单由三个文件组成：Form.cs Form.Designer.cs 和 Form.resx。我正在尝试使用 SVN 从 Visual Studio 查看 Form.cs 的修订历史。但是，它打开了所有三个文件，并且不允许我查看仅 Form.cs 的历史记录/更改。我可以查看 Form.Designer.cs 和 Form.resx 的更改。其他多部分文件（例如 app.config / debug.config 等）也会发生同样的问题......系列。有没有办法查看顶级项目/文件的修订更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:09:53.490

操作方法如下：（特定于 subversion）右键单击顶层项目 > Subversion > Compare。此对话框允许您挑选和选择特定文件和修订。

# c# - 如何禁用 WPF 动画

> ID：11760733
> 
> 赞同：2
> 
> 时间：2012-08-01T13:49:03.880
> 
> 标签：c#, wpf

我有这段代码，无法弄清楚如何禁用动画。

有什么线索吗？谢谢！

```
 #region Blinking Animation
            Storyboard sb = new Storyboard();
            if (IsImageBlinking)
            {
                DoubleAnimation da = new DoubleAnimation();

                da.From = 1.0;
                da.To = 0.0;
                da.RepeatBehavior = RepeatBehavior.Forever;
                da.AutoReverse = true;

                sb.Children.Add(da);
                Storyboard.SetTargetProperty(da, new PropertyPath("(Image.Opacity)"));
                Storyboard.SetTarget(da, image1);
                sb.Begin();
            }
            else // This code doesn't disable the animation :(
            {
//!!!! Here I need to disable the animation.  
                sb.Stop();
                sb.Children.Clear();
            }

            #endregion 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T14:01:59.190

如果您对 和 使用相同的Storyboard*实例*，它就可以工作。声明为您的班级成员：`Begin``Stop``sb`

```
public class MainWindow
{
    private Storyboard sb = new Storyboard();

    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T11:03:25.670

您是否尝试过使用`sb.BeginAnimation(Image.OpacityProperty, null);`而不是`sb.stop()`？

# c - 分配第一个索引后附加到 cstring

> ID：11760736
> 
> 赞同：0
> 
> 时间：2012-08-01T13:49:08.127
> 
> 标签：c, winapi

这个例子的输出是......

> HC:\Projects\cppexample.exeello 世界。

为什么当前可执行文件的路径被推送到字符串中？

```
#ifndef UNICODE
#define UNICODE 
#endif

    #include <Windows.h>

    int main()
    {
        TCHAR string[255];
        string[0]=TEXT('H');
        wcscat(string,TEXT("ello world"));

        MessageBox(0,string,0,0);

        system("Pause");
        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T13:55:42.810

`string`在调用之前没有空终止字符，[`wcscat()`](http://msdn.microsoft.com/en-us/library/h1x0y282%28v=vs.80%29.aspx)并且`wcscat()`要求目标字符串为空终止：

```
strDestination
    以 Null 结尾的目标字符串。

```

改成：

```
TCHAR string[255] = TEXT("");
string[0]=TEXT('H'); 
```

或者：

```
TCHAR string[255] = TEXT("H"); 
```

或者：

```
TCHAR string[255];
string[0]=TEXT('H');
string[0]=TEXT('\0'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T13:54:38.157

因为您没有以空字节结束“字符串”“H”。因此`wcscat`附加到它在您的（未初始化的）数组中找到第一个空字节的位置，该数组恰好包含可执行路径（以及之前的一个字节）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T13:56:28.250

您需要使用 终止字符串数组`'\0'`。更新代码之类的。

```
string[0]=TEXT('H');
string[1]=TEXT('\0'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T14:19:34.143

你的问题：

```
string[0]=TEXT('H');
wcscat(string,TEXT("ello world")); 
```

并且未初始化`TCHAR string[255];`

这应该可以解决您的问题：

```
wmemset(string,TEXT('\0'), 255);
string[0]=TEXT('H');
string[1]=TEXT('\0');
wcscat(string,TEXT("ello world")); 
```

因此，现在 wcscat() 将愉快地连接两个以 Null 结尾的字符串，“H”和“ello,World”。并且不要扔一些垃圾值。

为了缓冲区安全，避免使用： `wchar_t *wcscat( wchar_t *strDestination, const wchar_t *strSource );`

而是使用： `wchar_t *wcsncat( wchar_t *strDest, const wchar_t *strSource, size_t count );`

在哪里，

*strDest
以 Null 结尾的目标字符串。
strSource 以
Null 结尾的源字符串。
count
要追加的字符数。*

# netty - netty http 基本认证

> ID：11760741
> 
> 赞同：0
> 
> 时间：2012-08-01T13:49:29.187
> 
> 标签：netty, basic-authentication

我使用此处提供的示例 [Netty HTTP Authetication for Client](https://stackoverflow.com/questions/7609691/netty-http-authetication-for-client) 但仍有 401 响应

当我打印请求标头时，我可以看到除了一件事之外一切都很好，授权是：

```
Authorization: YWRtaW46YWRtaW4= 
```

例如，当我使用 Chrome 进行相同的身份验证时，我有：

```
Authorization: Basic YWRtaW46YWRtaW4= 
```

netty doc 中关于如何在标题中添加 Basic 没有什么特别之处

当我使用[tcpmon](http://ws.apache.org/commons/tcpmon/)之类的工具捕获失败消息并通过手动添加基本字符串重新发送消息时，它工作正常。

我的问题可能是如何在 netty 提交的标头中添加 Basic ？

有人遇到过这个吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:53:40.420

您发布的第一个标题不正确。它必须看起来像 Chrome 的那个。

因此，在需要时，您只需调用 HttpMessage.setHeader(...) 并传递值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T03:48:32.140

我终于在 org.jboss.netty.handler.codec.http.HttpHeaders#addHeader 方法中做了一个 hack：

```
 void addHeader(final String name, final Object value) {
    validateHeaderName(name);
    String strVal = toString(value);
    HttpCodecUtil.validateHeaderValue(strVal);
    int h = hash(name);
    int i = index(h);

    if (Names.AUTHORIZATION.equals(name)) strVal = "Basic "+strVal;
    addHeader0(h, i, name, strVal);
} 
```

# c# - 对象引用未设置为对象错误消息的实例

> ID：11760742
> 
> 赞同：0
> 
> 时间：2012-08-01T13:49:31.683
> 
> 标签：c#, asp.net

我的代码有什么问题？我最近在后面的代码中发布了一个关于[计算](https://stackoverflow.com/questions/11754489/calculation-in-code-behind)的问题，我尝试了 Vinoth 的答案，但它在这一行给了我一个错误：

```
bool isChaffeurUsed = (bool)Session["IsChaffeurUsed"]; 
```

错误消息是：**对象引用未设置为对象的实例。**

请告诉我该怎么做。非常感谢，祝您有愉快的一天。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T13:50:23.217

```
Session["IsChaffeurUsed"] 
```

未定义 - 您尚未使用密钥设置任何会话变量`IsChaffeurUsed`

您需要先检查它是否已设置，

```
bool isChaffeurUsed;

if(Session["IsChaffeurUsed"] != null)
    isChaffeurUsed = (bool)Session["IsChaffeurUsed"]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T13:50:23.137

您需要先检查对象，尝试：

```
var isChaffeurUsed = false;

if (Session["IsChaffeurUsed"] != null)
{
    isChaffeurUsed  = bool.Parse(Session["isChaffeurUsed"].ToString());
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-01T13:50:38.503

该错误试图告诉您`Session["IsChaffeurUsed"]`不存在。

如果您知道默认值，则可以将语句更改为：

```
bool isChaffeurUsed = (bool)(Session["IsChaffeurUsed"] ?? false) 
```

或者，如果您想允许空值（这表明该值未专门设置为任何值），您可以使用可为空的类型：

```
bool? isChaffeurUsed = (bool?)Session["IsChaffeurUsed"]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T13:50:40.200

`Session`最有可能的是，您在 name中没有任何内容`"IsChaffeurUsed"`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-01T13:52:50.313

如果 Session 为 null 或在 Session 中未找到 IsChaffeurUsed，您将收到该异常。Session 可能不为空，所以问题很可能是 IsChaffeurUsed 没有找到。

如果未设置 IsChaffeurUsed，您需要决定该怎么做。例如，您可以假设它是错误的：

```
bool isChaffeurUsed = Session["IsChaffeurUsed"] == null ? false 
     : (bool)Session["IsChaffeurUsed"]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-01T13:58:46.470

查看会话变量的一件事是，变量有可能在初始读取后消失（这在我身上发生过几次）。这通常是我在 ASP 应用程序中查看会话/缓存变量时使用的模式：

```
object o = null;
if((o = Session["IsChaffeurUsed"]) != null)
{
    // Do something with o: bool.Parse, (bool), etc...
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-01T13:55:07.723

TryParse() 方法就是因为这个原因而存在的：

```
bool.TryParse(Session["IsChaffeurUsed"], out isChaffeurUsed) 
```

# ruby-on-rails-3 - RoR 3.2.3 中的 Yml 配置文件

> ID：11760756
> 
> 赞同：0
> 
> 时间：2012-08-01T13:50:13.000
> 
> 标签：ruby-on-rails-3

这是我的 config.yml 文件。事实上，对于每个环境（开发、测试或生产），user_id、api_key 和 shared_secret 都是相同的。

```
development:
  user_id: '1234'
  api_key: '1234'
  shared_secret: '43243'
  some_dev_data: 'fdsfdsfd'
test:
   some_test_data: 'rytr'

production:
   some_prod_data: 'hgf' 
```

如何使它们独立于当前环境？或者如何在所有环境之间共享它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T14:22:40.037

您可以使用锚点来提取共享数据：

```
shared_stuff: &shared
  user_id: '1234'
  api_key: '1234'
  shared_secret: '43243'

development:
  <<: *shared
  some_dev_data: 'fdsfdsfd'

test:
  <<: *shared
  some_test_data: 'rytr'

production:
  <<: *shared
  some_prod_data: 'hgf' 
```

您的值`shared_stuff`被赋予锚名称`shared`，然后您可以将其拉入不同的环境。

# web - Evernote 网络笔记编辑器

> ID：11760758
> 
> 赞同：0
> 
> 时间：2012-08-01T13:50:15.617
> 
> 标签：web, editor, wysiwyg, evernote

我正在开发一个与 Evernote 集成的网络应用程序，并且想知道是否有办法在我的应用程序中使用**Evernote 笔记编辑器。**他们是否通过他们的 API 或 URL 提供了一些东西来调用某些特定的参数？我什么也没找到。

如果无法使用 Evernote 编辑器，我可能最终会使用自定义的 WYSIWYG。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T18:28:24.820

我们不提供嵌入笔记编辑器的方法，但您可以使用 URL [https://host.evernote.com/view/guid](https://host.evernote.com/view/guid)和[https://host.evernote 打开特定的现有笔记以进行查看或编辑。 com/edit/guid](https://host.evernote.com/edit/guid)，其中 host 是主机名（沙盒、www），而 guid 是注释 GUID。

# azure - Azure 订阅已禁用

> ID：11760763
> 
> 赞同：7
> 
> 时间：2012-08-01T13:50:25.820
> 
> 标签：azure, subscription, bizspark

我们属于 bizspark 计划，并且有一个已禁用的 Azure 订阅。

不幸的是，我们不知道为什么以及如何查看我们花费了多少资源。

任何人还知道何时重新启用 Bizspark 订阅？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T13:53:50.827

您的帐户已被禁用，因为您已达到支出限额。

要获取更多信息：

1.  转到[manage.windowsazure.com](http://manage.windowsazure.com)
2.  点击右上角的电子邮件地址
3.  选择帐户
4.  登录
5.  单击您的订阅，您可以查看费用摘要

如果您希望在此期间重新启用您的帐户，则必须将支出限额调整为 0 美元以上。不过要小心，一旦你这样做了，我认为你不能回去。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-01T17:36:28.833

尝试访问[https://account.windowsazure.com/Subscriptions](https://account.windowsazure.com/Subscriptions)（如有必要，请登录），然后单击相关订阅。这应该会将您带到帐户帐单上的摘要页面。

默认情况下，它只显示常用的使用指标——很可能你已经超过了其中一个，并且应该很容易找出哪个组件让你超过了，但如果没有，请尝试单击“显示常用用法”的下拉菜单并将其更改为“显示所有用法”。

至于您的第二个问题，禁用/重新启用周期每月发生一次，如果您拥有帐户超过一个月，它应该“捕捉”到从第一个月到最后一个月的时间段. 如果不是，您的期间可能会有所不同，从您拥有帐户的第一天到之后的 30 天，并在该点“捕捉”，或者它可能是一个按比例分配的时期，即从您的帐户的第一天到同月的最后一天，使用配额按比例计算在内。

无论如何，您的东西应该在下一个计费周期的第一天（可能是今天，也可能是 9 月 1 日，具体取决于您的原因）重新启用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-04T21:07:16.117

我确实遇到了与 manage.windowsazure.com 门户类似的问题，但我成功地在新门户 (portal.azure.com) 上创建具有相同订阅的应用程序/站点。在新门户中创建应用程序/站点后，此问题就解决了（即使我可以从 Visual Studio 发布）。

希望这可以帮助某人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-06T16:48:09.350

我遇到了这个问题，但绝对没有达到我的消费限额，我还剩下 100 美元的信用额度。但是我收到以下消息

> 我们找不到与您的帐户关联的任何有效订阅。注册 WINDOWS AZURE 生产门户 WINDOWS AZURE 主页 联系支持

就我而言，这是因为我曾经使用公司凭据登录过 MSDN。因此，尽管我的 azure 的 URL 表明了我的用户名和帐户，例如：

[https://manage.windowsazure.com/@mynamegmail.onmicrosoft.com#Workspaces/All/dashboard](https://manage.windowsazure.com/@mynamegmail.onmicrosoft.com#Workspaces/All/dashboard)

尽管我已经在 MSDN 上选择了注销，但不知何故它混合了两个帐户。我必须从“管理 Azure”屏幕中退出 Azure，然后使用我的个人 Microsoft 帐户重新登录。

# jquery-ui - jQuery 选项卡和 CSS

> ID：11760766
> 
> 赞同：1
> 
> 时间：2012-08-01T13:50:29.500
> 
> 标签：jquery-ui

我正在尝试将 jQuery 选项卡与 cookie 一起使用。我让它工作了，但是用于设置标签样式的 CSS 不起作用，我需要一些帮助才能让它工作。我下载了 jQuery 并将其提取到一个名为**development-bundle的文件夹中**

这是我的css链接，但它不起作用。

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Sticky Tab</title>
    <link rel="stylesheet" href="development-bundle/externals/css/jquery-ui/ui-lightness/1.7.2/jquery-ui-lightness.css" media="screen" />
</head>
<body>
    <div id="tabs">
        <ul>
            <li><a href="#tabs-1">Nunc tincidunt</a></li>
            <li><a href="#tabs-2">Proin dolor</a></li>
            <li><a href="#tabs-3">Aenean lacinia</a></li>
        </ul>
        <div id="tabs-1">
            <p>Proin elit arcu, rutrum commodo, vehicula tempus, commodo a, risus. Curabitur nec arcu. Donec sollicitudin mi sit amet mauris. Nam elementum quam ullamcorper ante. Etiam aliquet massa et lorem. Mauris dapibus lacus auctor risus. Aenean tempor ullamcorper leo. Vivamus sed magna quis ligula eleifend adipiscing. Duis orci. Aliquam sodales tortor vitae ipsum. Aliquam nulla. Duis aliquam molestie erat. Ut et mauris vel pede varius sollicitudin. Sed ut dolor nec orci tincidunt interdum. Phasellus ipsum. Nunc tristique tempus lectus.</p>
        </div>
        <div id="tabs-2">
            <p>Morbi tincidunt, dui sit amet facilisis feugiat, odio metus gravida ante, ut pharetra massa metus id nunc. Duis scelerisque molestie turpis. Sed fringilla, massa eget luctus malesuada, metus eros molestie lectus, ut tempus eros massa ut dolor. Aenean aliquet fringilla sem. Suspendisse sed ligula in ligula suscipit aliquam. Praesent in eros vestibulum mi adipiscing adipiscing. Morbi facilisis. Curabitur ornare consequat nunc. Aenean vel metus. Ut posuere viverra nulla. Aliquam erat volutpat. Pellentesque convallis. Maecenas feugiat, tellus pellentesque pretium posuere, felis lorem euismod felis, eu ornare leo nisi vel felis. Mauris consectetur tortor et purus.</p>
        </div>
        <div id="tabs-3">
            <p>Mauris eleifend est et turpis. Duis id erat. Suspendisse potenti. Aliquam vulputate, pede vel vehicula accumsan, mi neque rutrum erat, eu congue orci lorem eget lorem. Vestibulum non ante. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Fusce sodales. Quisque eu urna vel enim commodo pellentesque. Praesent eu risus hendrerit ligula tempus pretium. Curabitur lorem enim, pretium nec, feugiat nec, luctus a, lacus.</p>
            <p>Duis cursus. Maecenas ligula eros, blandit nec, pharetra at, semper at, magna. Nullam ac lacus. Nulla facilisi. Praesent viverra justo vitae neque. Praesent blandit adipiscing velit. Suspendisse potenti. Donec mattis, pede vel pharetra blandit, magna ligula faucibus eros, id euismod lacus dolor eget odio. Nam scelerisque. Donec non libero sed nulla mattis commodo. Ut sagittis. Donec nisi lectus, feugiat porttitor, tempor ac, tempor vitae, pede. Aenean vehicula velit eu tellus interdum rutrum. Maecenas commodo. Pellentesque nec elit. Fusce in lacus. Vivamus a libero vitae lectus hendrerit hendrerit.</p>
        </div>
    </div>

    <script type="text/javascript" src="development-bundle/externals/jquery/core/1.4.1/jquery.js"></script>
    <script type="text/javascript" src="development-bundle/externals/jquery/ui/1.7.2/jquery-ui.js"></script>
    <script type="text/javascript" src="development-bundle/cookies/jquery.cookies.js"></script>
    <script type="text/javascript">
        $( function()
        {
            var cookieName, $tabs, stickyTab;

            cookieName = 'stickyTab';
            $tabs = $( '#tabs' );

            $tabs.tabs( {
                select: function( e, ui )
                {
                    $.cookies.set( cookieName, ui.index );
                }
            } );

            stickyTab = $.cookies.get( cookieName );
            if( ! isNaN( stickyTab )  )
            {
                $tabs.tabs( 'select', stickyTab );
            }
        } );
    </script>
</body> 
```

这就是我得到的![在此处输入图像描述](../Images/9e58851f749690fd0e82aecec337521a.png)

但这就是我想要实现的 ![在此处输入图像描述](../Images/f1a5c1bdb10bc84f4ffb186cda91da1d.png)

关于我的css链接在这里做错了什么的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T18:08:11.750

您没有将 CSS 类添加到您的标记中。

[http://jqueryui.com/tabs/](http://jqueryui.com/tabs/)

请参阅此示例的源代码。确保您的浏览器没有报告任何错误。

# typo3 - 在 TYPO3 中向用户显示的限制寄存器

> ID：11760773
> 
> 赞同：0
> 
> 时间：2012-08-01T13:51:00.937
> 
> 标签：typo3

我在 Web->List 中有一个表，我需要用户只看到他们拥有的寄存器，而不是它们的全部。

你知道怎么做吗？是否有修改查询的钩子或打字稿？

谢谢您的帮助。

# tabs - 更改标签顺序后，无法在 Sugar Pro 6.3.0 中查看当前标签以外的标签

> ID：11760777
> 
> 赞同：0
> 
> 时间：2012-08-01T13:51:15.447
> 
> 标签：tabs, show-hide, sugarcrm

我正在使用 Sugar 6.3.0，当我更改标签顺序时出现错误

> 管理员 -> 显示模块选项卡和子面板

我只在我的网页上看到当前选项卡，而我看不到所有其他选项卡，并且屏幕还显示以下错误

> 警告：在第 71 行的 var/www/workspace/clientname/modules/MySettings/TabController.php 中为 foreach() 提供的参数无效警告：in_array() 期望参数 2 是数组，在 /var/www/workspace/ 中给出 null第 77 行的 clientname/include/GroupedTabs/GroupedTabStructure.php 警告：array_merge(): Argument #1 is not an array in /var/www/workspace/clientname/include/GroupedTabs/GroupedTabStructure.php on line 93 警告：提供的参数无效对于第 110 行 /var/www/workspace/clientname/include/GroupedTabs/GroupedTabStructure.php 中的 foreach()

我可以通过更改 URL 中的 ?module=MODULENAME 来更改选项卡，例如，如果我设置 ?module=Accounts 我可以看到 Accounts 选项卡，但只有且只有 Accounts 选项卡，所有其他选项卡都消失了。

知道我做错了什么以及如何解决吗？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:52:12.383

```
 I think you have done modifications to module through module builder and redeployed it.This is not the correct way.We need to do modifications through studio only.

 Try to do repair through repair wizard or otherwise use backup.There is any other solution i think.I have tried a lot. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:52:41.497

毕竟我们已经在 Sugar Pro 6.3.0 中找到了解决此问题的解决方案，我们要做的是重命名或删除 modules/Administration 文件夹中名为 SaveTabs.php 的文件，然后进行修复，然后重新排序选项卡和保存。希望它至少对我们来说能正常工作，它工作得很好！

# file - Bash，不同文件测试的结果令人困惑（test -f）

> ID：11760779
> 
> 赞同：5
> 
> 时间：2012-08-01T13:51:22.433
> 
> 标签：file, shell, testing, posix

我在 bash 中被这个表达式弄糊涂了：

```
$ var="" # empty var
$ test -f $var; echo $? # test if such file exists
0 # and this file exists, amazing!
$ test -f ""; echo $? # let's try doing it without var
1 # and all ok 
```

我无法理解这种 bash 行为，也许有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T13:59:29.293

这是因为在看到它之前，它的空扩展`$var`被删除了。`test`您实际上正在运行`test -f`，因此只有一个 arg to `test`，即`-f`. 根据 POSIX，单个 arg like`-f`是真的，因为它不是空的。

来自[POSIX test(1) 规范](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/test.html)：

```
1 argument:
Exit true (0) if `$1` is not null; otherwise, exit false. 
```

永远不会对具有空文件名的文件进行测试。现在有了明确`test -f ""`的两个参数，`-f`并被识别为“测试路径参数是否存在”的运算符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T13:59:40.360

当`var`为空`$var`时，无论是否引用都会表现不同。

```
test -f $var          # <=> test -f       ==>   $? is 0
test -f "$var"        # <=> test -f ""    ==>   $? is 1 
```

所以这个例子告诉我们：我们应该引用`$var`.

# asp.net - 如何在gridview中找到选定的rowcellvalue？

> ID：11760780
> 
> 赞同：1
> 
> 时间：2012-08-01T13:51:19.843
> 
> 标签：asp.net, grid, row

我正在尝试删除我的 gridview 中的记录。为此，我在 gridview 中添加了一个按钮字段。然后我为按钮字段提供了一个命令名称。我写了这样的代码

```
protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
{

    if (e.CommandName == "delete")
    {

        try
        {

            con.Open();
            cmd.CommandText = "Delete from Table where id='" + SelectedRowAndCellValue +"'"

            cmd.Connection = con;
            cmd.ExecuteNonQuery();

            con.Close();
            cmd.Dispose();

            GridView1.DataBind();

        }
        catch (Exception ex)
        {

            Response.Write(ex.ToString());
        }
    }
} 
```

但我找不到 SelectedRowAndCellValue。感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:56:55.443

您可以尝试使用此代码

```
 int index = Convert.ToInt32(e.CommandArgument);
  GridViewRow row = GridView1.Rows[index];
  var result = row.Cells[yourIndex].Text;

  cmd.CommandText = "Delete from Table where id = "+row.Cells[yourIndex].Text; 
```

# php - 将 json 日期转换为 PHP (m/d/Y) 时出错

> ID：11760783
> 
> 赞同：1
> 
> 时间：2012-08-01T13:51:25.727
> 
> 标签：php, json

我正在尝试将 JSON 字符串转换为 PHP 一个 DOB，它可以工作，但给了我错误的 DOB。

```
$url = "test.js";
$content = file_get_contents($url);
$json = json_decode($content, true);
$DOB = date('m/d/Y', preg_replace('/[^\d]/','', $json['Player'][BirthDt])/1000); 
```

得到 JSONJason 的是：

```
"BirthDt":"\/Date(-388094400000)\/" 
```

在 PHP 中我得到这个：*04/19/1982*而不是**09/14/1957**

有任何想法吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:55:10.920

您的正则表达式正在删除负号，因此它成为 unix 纪元（1970 年 1 月 1 日）之后的日期，而不是之前的日期。尝试这样的事情：

```
preg_match('/Date\((-?\d+)\)/', $json['Player']['BirthDt'], $matches);
$timestamp = $matches[1];
$DOB = date('m/d/Y', $timestamp / 1000); 
```

[您可以在演示](http://viper-7.com/kBrsCm)中看到它的工作原理。

# tcl - iTcl：如何创建一个可以返回根名称空间中的对象的静态方法

> ID：11760785
> 
> 赞同：0
> 
> 时间：2012-08-01T13:51:30.827
> 
> 标签：tcl

我在 iTcl 中构建了一个类似单例的类，它是由一个静态方法 (proc) 制成的，该方法被调用并决定是否创建一个新对象：

```
itcl::class sparamParser {

    #Static
    private common files
    array set files {}
    private common count 1

    proc parserInit {file_name} {
        if {![file exists $file_name]} {
            kg_log "-E- file $file_name doesn't exist"
            return
        }

        if [info exists files($file_name)] {
            if [$files($file_name) true] {
                if {[file mtime $file_name] == [$files($file_name) getDate]} {
                    return [lindex $files($file_name) 0]
                }
            }
        }
        set files($file_name) [sparamParser "parser_${count}" $file_name]
        incr count
        return $files($file_name)
    }
    #non static

    private variable matrix
    array set matrix           {}
    private variable ports     [list ]
    private variable file_name {}
    private variable date      {}

    constructor {fname} {
        set file_name $fname
        set date [file mtime $file_name]
        puts "start parsing $file_name"
        set matrix(1,1) [list 1 1]
        set matrix(1,2) [list 1 2]
        set matrix(2,1) [list 2 1]
        set matrix(2,2) [list 2 2]
        lappend ports "port 1"
        lappend ports "port 2"
        puts "finished pasrsing $file_name"
    }
    method true {} {
        return 1
    }
    method getFileName {} {
        return [file tail $file_name]
    }
    method getFullPath {} {
        return $file_name
    }
    method getNumPorts {} {
        return [llength $ports]
    }
    method getPort {num} {
        return [lindex $ports [expr $num + 1]]
    }
    method getAllPorts {} {
        return $ports
    }
    method getPlot {i j} {
        return $martix(${i}${j})
    }
    method getDate {} {
        return $date
    }

} 
```

但是当我调用`sparamParser::parserInit`返回给我的对象时，返回给我的对象是在`sparamParser`命名空间中，而不是在根命名空间中，所以为了解决它，我需要调用`sparamParser::parser_1`并且我不能只使用`sparam_1`. `proc`有没有办法在不移动类外部并暴露公共变量的情况下克服它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:47:16.327

您可以尝试使用解析器命令的完整限定名，方法是在它前面加上`::`：

```
set files($file_name) [sparamParser "::parser_${count}" $file_name] 
```

# objective-c - 电子邮件地址的正则表达式

> ID：11760787
> 
> 赞同：23
> 
> 时间：2012-08-01T13:51:40.063
> 
> 标签：objective-c, regex, email-validation

有人可以向我展示一个电子邮件地址的示例 RegEx 以及如何在 Objective-C 中使用吗？

寻找适合的东西：`name@place.something`

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-01T13:54:27.703

如上所示：http: [//github.com/benofsky/DHValidation](http://github.com/benofsky/DHValidation)

```
- (BOOL) validateEmail: (NSString *) candidate {
    NSString *emailRegex = @"[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}"; 
    NSPredicate *emailTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", emailRegex]; 

    return [emailTest evaluateWithObject:candidate];
} 
```

或者将[http://regexkit.sourceforge.net/RegexKitLite/](http://regexkit.sourceforge.net/RegexKitLite/)添加到您的项目中，然后像上面一样自己执行正则表达式。

还要回答检查电子邮件地址是否真实的问题，而不仅仅是使用正则表达式，您可以使用一些服务，例如：http: [//verify-email.org/register/levels.html](http://verify-email.org/register/levels.html)

**请注意，此答案未考虑更新的 TLD，例如 .online；包括那些将最终的 {2,4} 更新为 {2,63}**

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-01T14:32:43.777

```
NSString *string= @"my@mail.com her@mail.com him@mail.com";
NSError *error = NULL;
NSRegularExpression *regex = nil;
regex = [NSRegularExpression regularExpressionWithPattern:@"\\w+@[a-zA-Z_]+?\\.[a-zA-Z]{2,6}"
                                                  options:NSRegularExpressionCaseInsensitive
                                                    error:&error];   
NSUInteger numberOfMatches = 0;
numberOfMatches = [regex numberOfMatchesInString:string
                                         options:0
                                           range:NSMakeRange(0, [string length])];
NSLog(@"numberOfMatches is: %lu", numberOfMatches); 
```

当然还有更多的选择。[在这里](http://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)阅读。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-03-31T19:41:48.137

由于我找不到任何适用于 Objective-C 的*严肃*电子邮件正则表达式示例，因此我将这个示例放在这里：

```
const char cRegex[] = "^(?!(?:(?:\\x22?\\x5C[\\x00-\\x7E]\\x22?)|(?:\\x22?[^\\x5C\\x22]\\x22?)){255,})(?!(?:(?:\\x22?\\x5C[\\x00-\\x7E]\\x22?)|(?:\\x22?[^\\x5C\\x22]\\x22?)){65,}@)(?:(?:[\\x21\\x23-\\x27\\x2A\\x2B\\x2D\\x2F-\\x39\\x3D\\x3F\\x5E-\\x7E]+)|(?:\\x22(?:[\\x01-\\x08\\x0B\\x0C\\x0E-\\x1F\\x21\\x23-\\x5B\\x5D-\\x7F]|(?:\\x5C[\\x00-\\x7F]))*\\x22))(?:\\.(?:(?:[\\x21\\x23-\\x27\\x2A\\x2B\\x2D\\x2F-\\x39\\x3D\\x3F\\x5E-\\x7E]+)|(?:\\x22(?:[\\x01-\\x08\\x0B\\x0C\\x0E-\\x1F\\x21\\x23-\\x5B\\x5D-\\x7F]|(?:\\x5C[\\x00-\\x7F]))*\\x22)))*@(?:(?:(?!.*[^.]{64,})(?:(?:(?:xn--)?[a-z0-9]+(?:-+[a-z0-9]+)*\\.){1,126}){1,}(?:(?:[a-z][a-z0-9]*)|(?:(?:xn--)[a-z0-9]+))(?:-+[a-z0-9]+)*)|(?:\\[(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){7})|(?:(?!(?:.*[a-f0-9][:\\]]){7,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?)))|(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){5}:)|(?:(?!(?:.*[a-f0-9]:){5,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3}:)?)))?(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))(?:\\.(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))){3}))\\]))$";
NSString *emailRegex = [NSString stringWithUTF8String:cRegex];
NSPredicate *emailPredicate = [NSPredicate predicateWithFormat:@"SELF MATCHES[c] %@", emailRegex];
BOOL isValid = [emailPredicate evaluateWithObject:email]; 
```

这是基于 Michael Rushton 的一个正则表达式，它被 PHP 的函数使用，根据[这个比较](https://fightingforalostcause.net/content/misc/2006/compare-email-regex.php)`filter_var()`，它似乎已经足够好了。

享受！

**编辑**

> **斯威夫特 4**

```
func isValidEmail(email: String) -> Bool {
    let emailRegex = "^(?!(?:(?:\\x22?\\x5C[\\x00-\\x7E]\\x22?)|(?:\\x22?[^\\x5C\\x22]\\x22?)){255,})(?!(?:(?:\\x22?\\x5C[\\x00-\\x7E]\\x22?)|(?:\\x22?[^\\x5C\\x22]\\x22?)){65,}@)(?:(?:[\\x21\\x23-\\x27\\x2A\\x2B\\x2D\\x2F-\\x39\\x3D\\x3F\\x5E-\\x7E]+)|(?:\\x22(?:[\\x01-\\x08\\x0B\\x0C\\x0E-\\x1F\\x21\\x23-\\x5B\\x5D-\\x7F]|(?:\\x5C[\\x00-\\x7F]))*\\x22))(?:\\.(?:(?:[\\x21\\x23-\\x27\\x2A\\x2B\\x2D\\x2F-\\x39\\x3D\\x3F\\x5E-\\x7E]+)|(?:\\x22(?:[\\x01-\\x08\\x0B\\x0C\\x0E-\\x1F\\x21\\x23-\\x5B\\x5D-\\x7F]|(?:\\x5C[\\x00-\\x7F]))*\\x22)))*@(?:(?:(?!.*[^.]{64,})(?:(?:(?:xn--)?[a-z0-9]+(?:-+[a-z0-9]+)*\\.){1,126}){1,}(?:(?:[a-z][a-z0-9]*)|(?:(?:xn--)[a-z0-9]+))(?:-+[a-z0-9]+)*)|(?:\\[(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){7})|(?:(?!(?:.*[a-f0-9][:\\]]){7,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?)))|(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){5}:)|(?:(?!(?:.*[a-f0-9]:){5,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3}:)?)))?(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))(?:\\.(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))){3}))\\]))$"
    return NSPredicate(format: "SELF MATCHES[c] %@", emailRegex).evaluate(with: email)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-28T07:32:21.157

**无效电子邮件格式的正则表达式：**

```
public static bool IsEmailValid(this string inputStr)
  {
    bool isValid = false;
    if (!string.IsNullOrWhiteSpace(inputStr))
     {
  isValid  = Regex.IsMatch(inputStr, @"\A(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?)\Z", 
                                    RegexOptions.IgnoreCase);
       }

         return isValid;

      } 
```

# javascript - 脚本和图像是同步加载还是异步加载？

> ID：11760788
> 
> 赞同：0
> 
> 时间：2012-08-01T13:51:41.140
> 
> 标签：javascript, html

这是一个非常基本的问题 - 网页中的脚本和图像是同步加载还是异步加载（例如 ajax 请求中发生了什么）？我正在谈论以常规 html 方式包含图像和脚本 - 和

我只是想知道浏览器如何响应包含相对较大的文件，例如 jQuery（我上次检查时大约 2mb）或其他大型库或大图像，我是否应该担心这会让我的用户在连接到我的网站时卡住几秒钟? 我特别想知道 jQuery 开销，因为我正在考虑将它用于一个小项目......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T13:54:01.873

图像是异步加载的，可能是同时加载的。不要理会它们，只要使它们尽可能小并使用 CSS sprites。

脚本被阻塞，即在完成下载前一个脚本之前，您无法加载下一个脚本。这是可以理解的，因为可能存在一些脚本间依赖关系。

您通常所做的是将所有 JavaScript 资源压缩并压缩到一个文件中，该文件包含在页面底部。通过这种方式，页面可以很好地呈现，提供良好的用户体验，并且脚本在最后加载。毕竟，您通常不会在 DOM 就绪事件上更早地运行脚本。

顺便说一句，[缩小的 jQuery](https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js)只有 93K 左右。如果您使用上面的链接，它很可能会一劳永逸地缓存在浏览器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T13:54:15.537

*   服务器一发送 DOM，浏览器就可以显示网站。

*   图像是异步加载的，因此大图像在慢速连接上显示缓慢

*   jQuery 是 32kb

*   脚本一个一个地加载，而不是同时加载

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T13:59:01.353

补充一下，有*一些*脚本加载库可以同时加载脚本，但仍然确保它们按出现的顺序*执行*。我使用过并且会推荐的一个是[head.js](http://headjs.com/)。它提供了一个非常简单的界面（以下是从图书馆网站复制的）：

```
head.js("/path/to/jquery.js", "/google/analytics.js", "/js/site.js", function() {
   // all done
}); 
```

此外，为了澄清关于 jQuery 大小的混淆......从 1.7.2 版开始：

*   未压缩和未压缩它是**275 KB**。
*   缩小为**95 KB**。
*   缩小和压缩后大约为**34 KB**（这是您在 jQuery 网站上看到的值）。

最后一个选项是您实际在生产网站上使用的选项；因此，您不必担心用户需要下载 2 MB 的库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T13:54:22.293

脚本*块*是同步的（但它们可以包含异步代码）
图像加载是异步的

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-01T13:53:31.373

我认为 HTML 的正常行为是同步加载所有文件（图像和脚本）。

虽然可以编写一个异步加载文件的小型内联 JavaScript。

# ms-access - 没有为每个控件或事件找到方法或数据成员

> ID：11760791
> 
> 赞同：3
> 
> 时间：2012-08-01T13:52:05.757
> 
> 标签：ms-access, vba

遇到了一个奇怪的问题。我正在调试表单的一些代码，当我突然开始为表单的每个事件获取“未找到方法或数据成员”时，大部分内容都按预期工作。就像我的表单突然无法识别我的任何控件或事件。我已经正确关闭了所有方法，并且没有重命名任何控件。

对于每个带有事件的控件，“未找到方法或数据成员”的根源是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:45:49.783

按照 talbright 的建议导入新数据库给了我更多描述性的错误消息。

全新的导入、压缩和修复以及适当控件的重命名解决了问题的发生。正如 Remou 所建议的，定期维护可以帮助防止此类问题。

为未来的读者编辑：使用共享前端文件时出现此问题。因此，如果可能，请不要这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T21:26:26.070

我发现任何`MISSING:`引用都可能使最简单的代码失败。

签入 Visual Basic 窗口

菜单工具 -> 参考

![查看已检查的参考以查看是否有任何缺失](../Images/b31bbebc0cb181cbc6fe04c907e49ee2.png)

查看已检查的参考以查看是否有任何缺失

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-17T21:53:57.690

我刚刚通过重命名文本和组合框来修复相同的错误，而不是那么接近连接的表和字段字符串。实际上只是在这些名称前加上“tbx”和“cbx”。

# android - 使用 puTTy Telnet 到 Android 模拟器

> ID：11760794
> 
> 赞同：6
> 
> 时间：2012-08-01T13:52:10.437
> 
> 标签：android, android-emulator, emulation, telnet

我正在使用 Windows 7，我需要 Telnet 到我的 android 模拟器才能运行位置应用程序。我该怎么做呢？我发现的唯一教程是针对 linux 的...

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-05-04T16:27:39.567

使用**RAW**作为连接类型而不是 Telnet。
使用以下参数。
**主机名：本地主机
端口：5554**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T13:56:23.403

您首先需要启用 telnet，因为 Windows 7 默认禁用它： [http ://www.itdoescompute.com/2009/10/29/how-to-enable-telnet-in-windows-7/](http://www.itdoescompute.com/2009/10/29/how-to-enable-telnet-in-windows-7/)

或者，下载 Putty @ [http://www.putty.org/](http://www.putty.org/)并连接到您的 Android。我相信它的“本地主机：5554”

您可以通过 ADB Shell 而不是在线连接到您的 Android；`adb -e shell`

**如何使用 ADB Shell：** [http ://www.londatiga.net/it/how-to-use-android-adb-command-line-tool/](http://www.londatiga.net/it/how-to-use-android-adb-command-line-tool/)

**启动应用程序，克里斯蒂安回答（[查看个人资料](https://stackoverflow.com/users/244296/cristian)）** [如何使用 android ADB 工具启动应用程序？](https://stackoverflow.com/questions/4567904/how-to-start-an-application-using-android-adb-tools)

# php - jquery改变父显示：块，不改变子显示

> ID：11760795
> 
> 赞同：1
> 
> 时间：2012-08-01T13:52:11.323
> 
> 标签：php, jquery

我的网站有两种布局，一种是列表视图，另一种是网格视图。我正在更改单击图标的布局。listview 部分工作正常，但对于 gridview，它使父级 tr style="display:block" 但在 tr->td->div 标签样式内部为="display:none"。

我试图通过直接使用 div 标签的类并在 jquery 中使用 children 属性来更改它，但 Ii 根本不起作用。

这是jquery代码：

```
 function changeLayout(layout)
{
    if(layout=='list')
    {
        $(".showGrid").hide();
        $(".showList").show();      
    }
    else if(layout=='grid')
    {
        $(".showGrid").show();
        $(".showList").hide();      
        $(".showgridview").children("div").show();
    }
} 
```

这里也是网站，如果您需要查看。

[http://www.cityeveryday.com/frontend/deals/index/all/all](http://www.cityeveryday.com/frontend/deals/index/all/all)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:06:54.443

除非我误会你...

以下代码只会影响所选元素的*直接子元素*

```
$(".showgridview").children("div").show(); 
```

你想要的是`.find()`- [http://api.jquery.com/find/](http://api.jquery.com/find/)

```
$(".showgridview").find("div").show(); 
```

这将找到所有后代，无论级别如何。

# testing - 无法从 teamcity 运行 nunit 测试

> ID：11760798
> 
> 赞同：8
> 
> 时间：2012-08-01T13:52:18.330
> 
> 标签：testing, nunit, teamcity

我在使用 Nunit build runner 从 teamcity 运行 Nunit 测试时遇到问题。

到目前为止，这些测试都是从托管 Teamcity 和构建代理的机器上运行的。测试在这台机器上按预期运行。但是我们正在将测试从这台机器移到另一台机器上，当我尝试从这台机器上运行测试时，我收到以下错误

```
[10:57:25]: 2012-08-01 10:57:25,688 [9052] ERROR JetBrains.BuildServer.NAntLoggers.NUnitLauncher2 - Compatible parser was not found
[10:57:25]: JetBrains.BuildServer.NUnitLauncher.exe #TeamCityImplicit
[10:57:25]: Arguments will be recieved implicitly
[10:57:25]: JetBrains.BuildServer.NUnitLauncher.exe @@ <xml-arguments-file>
[10:57:25]: JetBrains.BuildServer.NUnitLauncher.exe {v1.1|v2.0|mono-1.0|mono-2.0|ANY} {MSIL|x86|x64} Plugin{|Plugin...}
[10:57:25]: Plugin PartCover:
[10:57:25]: /partcover:<path to PartCover.exe> [/partcover-arg:<arg>]* [/partcover-arguments:<arguments line>] [/partcover-platform:<MSIL|x86|x64|NATIVE>@<v1.1|v2.0|ANY|NATIVE>] [/partcover-reg:true]
[10:57:25]: Where:
[10:57:25]: /partcover-arg: argument should be repeated for every argument of PartCover
[10:57:25]: /partcover-arguments: argument should be excaped to be passed to the program as one argument
[10:57:25]: Plugin mstest:
[10:57:25]: /mstestlocation:[ directory name ] /testcontainer:[ file name ] [/isolated] /runconfig:[ file name ]
[10:57:25]: Plugin dotCover:
[10:57:25]: /dotcover:<path to dotCover.exe> [/dotcover-platform:<MSIL|x86|x64|NATIVE>@<v1.1|v2.0|ANY|NATIVE>] [/dotcover-logs:<logs_folder>]
[10:57:25]: Plugin NCover:
[10:57:25]: /ncover:<path to NCover.Console.exe> [/ncover-arg:<arg>]* [/ncover-arguments:<arguments line>] [/ncover-platform:<MSIL|x86|x64|NATIVE>@<v1.1|v2.0|ANY|NATIVE>]
[10:57:25]: Where:
[10:57:25]: /ncover-arg: argument should be repeated for every argument of NCover
[10:57:25]: /ncover-arguments: argument should be excaped to be passed to the program as one argument
[10:57:25]: Plugin NUnit-*:
[10:57:25]: No assemblies were found.
[10:57:25]: No assemblies were found.
[10:57:25]: [/category-include:categories] [/category-exclude:categories] [/addin:addins] [/runAssemblies:processPerAssembly] <assembly>[(;| )<assembly>[...]]
[10:57:25]: Supported plugin names:
[10:57:25]: NUnit-2.2.10
[10:57:25]: NUnit-2.2.9-VSTS
[10:57:25]: NUnit-2.2.9-VSTS-9.0
[10:57:25]: NUnit-2.4.1
[10:57:25]: NUnit-2.4.6
[10:57:25]: NUnit-2.4.7
[10:57:25]: NUnit-2.4.8
[10:57:25]: NUnit-2.4.8-resharper
[10:57:25]: NUnit-2.5.0
[10:57:25]: NUnit-2.5.10
[10:57:25]: NUnit-2.5.2
[10:57:25]: NUnit-2.5.3
[10:57:25]: NUnit-2.5.4
[10:57:25]: NUnit-2.5.5
[10:57:25]: NUnit-2.5.6
[10:57:25]: NUnit-2.5.7
[10:57:25]: NUnit-2.5.7-resharper
[10:57:25]: NUnit-2.5.8
[10:57:25]: NUnit-2.5.9
[10:57:25]: 2012-08-01 10:57:25,712 [9052] ERROR JetBrains.BuildServer.NAntLoggers.NUnitLauncher2 - Failed to parse arguments
[10:57:25]: Process exited with code -1 
```

运行这些测试的构建代理在一台机器上（比如 Machine-a），而测试在另一台机器（Machine-b）上。所以我在 Machine-a 上使用构建代理在 Machine-b 上运行测试并抛出上述错误。我不确定这是否有效，因为构建代理在另一台机器上。

我还在 Machine-c 上安装了另一个构建代理。所以我尝试使用同一台机器的（Machine-c）构建代理运行 Machine-c 上的 nunits 测试，并得到以下错误。

```
[14:33:02]: 2012-08-01 14:33:02,755 [3116] ERROR JetBrains.BuildServer.NAntLoggers.NUnitLauncher2 - Failed to parse arguments
[14:33:02]: No assemblies were found.
[14:33:02]: Process exited with code -1 
```

所以我很困惑我是否在 Machine-b、Machine-c 上丢失了一些 nunit 程序集（可以很容易地从另一台机器上复制）或者还有其他问题。

我还想知道 Teamcity、构建代理和 nunit 测试是否应该在同一台机器上成功运行测试（就像我们现在一样）。

有人可以帮我解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T13:33:56.577

实际上，我无法运行测试的原因是，我试图使用网络共享名称来访问测试程序集。但是 Teamcity 的 NUnit 构建运行器需要一个相对于它的 checkout/build 目录或绝对路径的路径，但不是具有网络共享名称的路径。

# javascript - javascript中的匿名函数和空返回对象

> ID：11760808
> 
> 赞同：1
> 
> 时间：2012-08-01T13:52:42.700
> 
> 标签：javascript, object, callback, return, anonymous-function

下面是一个将图像预加载到页面上的函数的源代码，作者添加了一些注释来解释代码是如何工作的，但我仍然没有完全理解它。具体来说，他声称这个函数的返回值是一个空对象，带有一个调用预定义匿名函数“postaction()”的“done()”方法。此代码的用户是否应该在第 2 行的空 postaction 函数中输入他/她自己的代码？如果它是这样工作的，那么返回对象中的“postaction=f || postaction”是做什么的？

源代码：

```
function preloadimages(arr){
  var newimages=[], loadedimages=0
  var postaction=function(){}
  var arr=(typeof arr!="object")? [arr] : arr
  function imageloadpost(){
      loadedimages++
      if (loadedimages==arr.length){
          postaction(newimages) //call postaction and pass in newimages array as parameter
      }
  }
  for (var i=0; i<arr.length; i++){
      newimages[i]=new Image()
      newimages[i].src=arr[i]
      newimages[i].onload=function(){
          imageloadpost()
      }
      newimages[i].onerror=function(){
        imageloadpost()
      }
  }
  return { //return blank object with done() method
      done:function(f){
          postaction=f || postaction 
          //remember user defined callback functions to be  called when images load
    }
  }
} 
```

链接到作者页面：http://www.javascriptkit.com/javatutors/preloadimagesplus.shtml

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:01:17.723

您可以为 postaction 输入自己的函数，尽管它不是您可能期望的回调函数。

但是，它会返回一个带有 done 函数的对象。

如果你这样做。像

```
 preloadimages().done(function () {
     console.log('done')
 }); 
```

你的函数将被执行。如果你不提供函数作为 done 的参数，默认的 postaction 将被调用并且什么都不做，因为它是一个空函数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:02:55.300

通过阅读该代码，您似乎并不打算重新定义`postaction()`- 事实上，您根本不需要修改任何代码。实际上，您应该将函数作为参数传递给`done()`函数，稍后将在成功加载图像时调用该函数（“回调”函数）。

这一行：

```
postaction=f || postaction 
```

表示“如果**f**有值，则将 f 的值分配给 postaction，否则将**postaction**分配**给****它**自己”（即不要更改它）。

 ***** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T14:05:47.913

我不知道这段代码到底是做什么用的，但是返回的对象有一个函数 done 可以使用或不使用函数参数。

在完成之内，这个语句

```
f || postaction 
```

含义 f OR postaction 返回 f 如果 f 不是 null/undefined 或 postaction else，所以如果你打电话

```
myreturnObject.done(); 
```

这评估为

```
postaction = postaction 
```

因为 f 没有定义。如果你打电话

```
myreturnObject.done(function(newImages) { ... }); 
```

这评估为

```
postaction = f. 
```

然后在 imageLoadPost 函数的 for 循环中使用 Postaction。如果你想要一些自己的编码，你可以将它作为参数传递给 done 方法，如图所示。如果您在那里不需要任何额外的编码，请不要将函数传递给 postaction。然后将调用定义为回退的空 postaction 函数。****

# facebook - 有什么方法可以通过标签/应用程序之外的 FB PHP SDK 获取签名请求？

> ID：11760809
> 
> 赞同：0
> 
> 时间：2012-08-01T13:52:44.510
> 
> 标签：facebook, facebook-graph-api, oauth, facebook-php-sdk, facebook-authentication

我一直在研究一种方法来确定用户是否喜欢特定页面，以便该页面上的选项卡可以被迷住与否。我不想提示用户对user_likes进行授权，所以我避开了JS SDK，使用了PHP SDK：

```
<?php
require 'src/facebook.php';
$app_id = "...";
$app_secret = "...";
$facebook = new Facebook(array('appId' => $app_id, 'secret' => $app_secret, 'cookie' => true));
$signed_request = $facebook->getSignedRequest();
$like_status = $signed_request["page"]["liked"];
/* testing response */
if ($like_status) {
    /* liked content */
} else {
    /* not liked content */
}
?> 
```

我的问题是签名请求仅在代码位于 FB 选项卡上时传递——如果我在 FB 之外点击 PHP 页面，我什么也得不到。我想知道是否有办法在 Facebook.com 之外获取此用户信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:01:22.953

听起来这在 Facebook 标签之外是不可行的。我们已经开始在 PHP 中部署我们的选项卡，以便在用户不采取任何操作的情况下提取这些数据。

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:08:17.207

您可以尝试将 signed_request 保存在会话或 cookie 中，这样您就可以使用它直到它过期。之后，用户将不得不再次通过标签来更新它。自然地，如果您打算使用 cookie，您应该对 signed_request 进行解码，这样任何人都无法`access_token`从 cookie 中找到并使用它。

# cordova - InAppPurchase 与 phonegap 1.4.1

> ID：11760811
> 
> 赞同：0
> 
> 时间：2012-08-01T13:52:51.170
> 
> 标签：cordova

InAppPurchase with phonegap 1.4.1 或任何 phonegap 版本，请提供帮助，我收到以下错误。

```
[Switching to process 26511 thread 0x2303]
2012-08-01 08:55:45.189 FlightAttendantAnnouncementsLite[26511:207] Device initialization: DeviceInfo = {"name":"iPhone Simulator","uuid":"4D6664CE-E202-5EFF-8139-97F2021DD185","platform":"iPhone Simulator","gap":"1.4.1","version":"5.0","connection":{"type":"wifi"}};
2012-08-01 08:55:45.218 FlightAttendantAnnouncementsLite[26511:207] PGPlugin class  (pluginName: InAppPurchaseManager) does not exist.
2012-08-01 08:55:45.219 FlightAttendantAnnouncementsLite[26511:207] ERROR: Plugin 'InAppPurchaseManager' not found, or is not a PGPlugin. Check your plugin mapping in PhoneGap.plist.
2012-08-01 08:55:45.220 FlightAttendantAnnouncementsLite[26511:207] FAILED pluginJSON = {"className":"InAppPurchaseManager","methodName":"setup","arguments":[]} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:01:56.897

你应该用键 InAppPurchaseManager 和它的值 InAppPurchaseManager 来完成你的 Cordova.plist。

也许它在 1.4.1 版本上有所不同（我在 2.0.0 上工作）

我从 2 天开始就开始工作并收到此错误。但是我用不上，希望你比我有更多的机会……

# rest - 如果省略，则在 Jersey 的 requestURI 中包含默认查询参数值

> ID：11760812
> 
> 赞同：1
> 
> 时间：2012-08-01T13:52:51.030
> 
> 标签：rest, jersey, jax-rs

有没有办法将查询参数“x”包含在默认值的 URL 中，如果它被省略，因为目前我需要做的是下面的事情，我必须为每个具有默认值的参数执行此操作；有一个更好的方法吗？我正在使用泽西岛 1.12 版

```
 public Response getResponse(@DefaultValue("test") @QueryParam("x") String x)
                UriBuilder uriBuilder = UriBuilder.fromUri(uriInfo.getRequestUri());
                uriBuilder = uriBuilder.replaceQueryParam(x);
                QueryContext.setUrl(uriBuilder.build().toString()); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T22:00:06.210

我不知道执行此操作的标准 Jersey 方法，但您可以使用 AOP 拦截该方法并执行以下操作：

```
public class UpdateQueryParamInterceptor implements MethodInterceptor {

  public Object invoke(MethodInvocation method) throws Throwable {
    UriBuilder builder = null;
    for (Object arg: method.getArguments()) {
      if (arg instanceof UriInfo) {
        UriInfo info = (UriInfo)arg;
        builder = UriBuilder.fromUri(info.getRequestUri());
      }
    }

    Annotation[][] annotations = method.getMethod().getParameterAnnotations();
    for (int i = 0; i < method.getArguments().length; i++) {
      if (annotations[i].length > 0) {
        DefaultValue def = null;
        QueryParam param = null;

        for (Annotation annotation: annotations[i]) {
          if (annotation instanceof DefaultValue) {
            def = (DefaultValue)annotation;
          } else if (annotation instanceof QueryParam) {
            param = (QueryParam)annotation;
          }
        }
        if ((null != def) && (null != param)) {
          builder = builder.replaceQueryParam(param.value(), method.getArguments()[i]);
        }
      }
    }

    //Do something with builder.build().toString()); 

    return method.proceed();
  }

} 
```

我不确定`QueryContext`你的代码中有什么类 - 但你也可以在方法中找到它并`setUrl`在拦截器中执行该方法......

# c++ - 将非托管“QT”dll 导入 C# 给出 dllNotFoundException 但存在

> ID：11760819
> 
> 赞同：2
> 
> 时间：2012-08-01T13:53:19.593
> 
> 标签：c++, qt, dll, dllimport

我正在尝试将 dll 导入 C# 控制台应用程序，只是为了查看是否可以让 dll 按需要工作，在尝试此操作并使用 C 代码导出函数时一切正常，并且可以在我的 C# 应用程序中导入函数.

当我尝试向非托管 dll 中的某些 QT 方法添加某种链接时，问题就开始了。我正在使用 DllImport 从 dll 导入函数。

```
[DllImport("cDLL.dll", EntryPoint = "_Add@16")]
static extern double Add(double a, double b); 
```

1 - 这是非托管 dll（不要查看代码的功能，这只是为了测试目的）在正常工作时的样子。

main.cpp 工作

```
#include <stdexcept>
#include "Windows.h"

using namespace std;

extern "C" __declspec(dllexport) double __stdcall Add(double a, double b)
{
    return a + b;
}
extern "C" __declspec(dllexport) const char* getText()
{
    return "hello world";//returnBufferString.c_str();
}
BOOL __stdcall DllMain(HINSTANCE hInst, DWORD dwReason, LPVOID lpReserved) {
    return TRUE;
} 
```

2 - 当我尝试使用一些 QT 代码添加帮助函数时，只是一个普通的 QString，DllImport 开始抛出 dllNotFoundException.dumpbin.exe 在包含 qt 代码后也会显示所有导出的函数......

main.cpp dllNotFoundException

```
#include <QString>
using namespace std;
class testa
{
public:
    static char* test()
    {
        QString a = "hejsan";
        return qString2Char(a);
    }
    static char* qString2Char(QString a)
    {
        return a.toUtf8().data();
    }
}; 
```

这是从 getText() 函数调用的，如下所示：

```
string returnBufferString;
extern "C" __declspec(dllexport) const char* getText()
{
    returnBufferString = testa::test();
    return returnBufferString.c_str();
} 
```

当我尝试从 DllImport 访问 dll 时，我在 2:nd 部分得到 dllNotFoundException 。我该如何解决这个问题？我错过了任何依赖或任何东西。我的 dll 是使用 msvc2010 编译器构建的，.pro 文件如下所示：

cDLL.pro

```
TEMPLATE = lib
 CONFIG  += dll

QT += core

 # Input
 SOURCES += main.cpp 
```

我被困住了...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T11:40:28.807

它并没有准确地告诉你它找不到*什么DLL。*这几乎肯定不是*你的*DLL，它是 QT 需要的 DLL 之一。您还必须将它们复制到 EXE 文件夹中。如果您不知道并且无法在诺基亚文档中找到它，那么您可以使用 SysInternals 的 ProcMon 实用程序找到它。

但是，在这种情况下，您肯定希望将 QT 链接到您的 DLL 中，因为可以共享这些 DLL 的可能性很小。使用此[SO 问题](https://stackoverflow.com/questions/1011197/qt-static-linking-and-deployment)作为设置 QT 项目的指导。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:47:13.210

您需要将 DLL 与可执行文件放在同一文件夹中。

请参阅[http://msdn.microsoft.com/en-us/library/windows/desktop/ms682586%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682586%28v=vs.85%29.aspx)

# javascript - 我可以查询随机历史人物姓名的在线服务

> ID：11760821
> 
> 赞同：4
> 
> 时间：2012-08-01T13:53:28.467
> 
> 标签：javascript, node.js

我决定是时候致富成名了，所以我正在构建一个生成好莱坞电影片名的工具。我打算把它们卖掉换钱。

示例电影名称：*亚伯拉罕·林肯：吸血鬼猎人*。

基本上，我会取一个著名历史人物的名字，并把它和一个受人尊敬的职业结合起来，得到一部电影的名字。

但是，有一个问题。我不知道所有历史人物的名字，我当然介意自己写下来。**那么，有没有我可以查询的在线数据库或服务，它会返回随机历史人物的名字？**我将如何在 Javascript (node.js) 中做到这一点？我可以自己想出的职业。

**编辑：**我正在寻找具有 API 的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T14:28:44.970

您可能想查看[DBPedia](http://dbpedia.org/About)。它为维基百科的数据提供了一个[SPARQL](http://en.wikipedia.org/wiki/SPARQL)端点接口，并返回格式为[RDF](http://en.wikipedia.org/wiki/Resource_Description_Framework)的机器可读结果。

不要被RDF 和semantic-webby 的东西吓到……对于简单的查询，您可以将RDF 解析为XML 并以这种方式处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:59:36.987

你为什么不试试：

[http://en.wikipedia.org/wiki/List_of_celebrities](http://en.wikipedia.org/wiki/List_of_celebrities)

[http://simple.wikipedia.org/wiki/Biographies_of_ Famous_Americans](http://simple.wikipedia.org/wiki/Biographies_of_famous_Americans)

[http://en.wikipedia.org/wiki/List_of_wealthiest_historical_figures](http://en.wikipedia.org/wiki/List_of_wealthiest_historical_figures)

[http://en.wikipedia.org/wiki/The_100](http://en.wikipedia.org/wiki/The_100)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T14:05:36.843

这个看起来也不错：

[http://www.bbc.co.uk/history/historic_figures/](http://www.bbc.co.uk/history/historic_figures/)

不确定他们是否有 API！;)

# openlayers - 我应该添加一个大的矢量叠加层还是许多较小的叠加层？

> ID：11760825
> 
> 赞同：0
> 
> 时间：2012-08-01T13:53:37.563
> 
> 标签：openlayers, kml

我正在创建一个地图应用程序，我在其中根据数据库查询动态添加 kml。它将是一组 LineStrings - 有时十个有时一千个。
什么更有效：

1.  创建一个包含所有元素和样式的大型 kml

2.  每行创建一个小 kml（优势是我可以使用 OL 菜单勾选/取消勾选它们）

3.  通过 javascript 添加它们：
    `addFeature('LINESTRING(20.0367 50.0727,20.0366 50.0727,20.0326 50.0757)');`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:05:15.460

最有效的是使用 WMS（通过地理服务器）和使用 CQL 过滤线。在一张地图上显示数千个特征可能会破坏应用程序的速度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:47:25.013

就个人而言，我认为通过放置 1 行 X 层来创建潜在的数千层并不是一个好主意……您的图层切换器控件将不堪重负，最后您的浏览器将不得不处理相同数量的矢量……

第 1 点和第 3 点可能会给您类似的结果，但无论如何，我建议您找到一种方法来减少地图中同时显示的矢量/线的数量，因为浏览器无法轻松处理尽可能多的数据......尤其是 IE。

使用 OpenLayers.Strategy.BBOX 可以帮助您从数据库中仅提取地图当前范围内所需的向量...

问候

艾蒂安

# ruby-on-rails - 在 Rails 中，如何确定两个 URL 是否相等？

> ID：11760831
> 
> 赞同：1
> 
> 时间：2012-08-01T13:53:59.860
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

如果我在 Rails 中有两个 URL，（无论它们是字符串形式还是 URI 对象）确定它们是否相等的最佳方法是什么？这似乎是一个相当简单的问题，但即使其中一个 URL 是相对的而另一个是绝对的，或者如果其中一个 URL 具有与另一个不同的参数，我也需要该解决方案。

我已经看过[Rails 中确定两个（或多个）给定 URL（作为字符串或哈希选项）是否相等的最佳方法是什么？](https://stackoverflow.com/questions/126332/what-is-the-best-way-in-rails-to-determine-if-two-or-more-given-urls-as-strin)（以及其他几个问题），但是这个问题已经很老了，建议的解决方案不能按我需要的方式工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T15:00:40.333

假设您有 url1 和 url2 是一些包含 URL 的字符串：

```
def is_same_controller_and_action?(url1, url2)
  hash_url1 = Rails.application.routes.recognize_path(url1)
  hash_url2 = Rails.application.routes.recognize_path(url2)

  [:controller, :action].each do |key|
    return false if hash_url1[key] != hash_url2[key]
  end

  return true
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T14:45:04.920

**1) 将 URL 转换为[规范形式](http://en.wikipedia.org/wiki/Canonical_form)**

在我当前的项目中，我正在使用[可寻址](https://github.com/sporkmonger/addressable)gem 来做到这一点：

```
def to_canonical(url)
  uri = Addressable::URI.parse(url)
  uri.scheme = "http" if uri.scheme.blank?
  host = uri.host.sub(/\www\./, '') if uri.host.present?
  path = (uri.path.present? && uri.host.blank?) ? uri.path.sub(/\www\./, '') : uri.path
  uri.scheme.to_s + "://" + host.to_s + path.to_s
rescue Addressable::URI::InvalidURIError
  nil
rescue URI::Error
  nil
end 
```

例子：

```
> to_canonical('www.example.com') => 'http://example.com'
> to_canonical('http://example.com') => 'http://example.com' 
```

**2）比较您的网址：** `canonical_url1 == canonical_url2`

升级版：

*   `Does it work with sub-domains?`- 不，我的意思是，我们不能那样说`translate.google.com`并且`google.com`是平等的。当然，您可以根据自己的需要进行修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T14:36:29.043

检查[可寻址](https://github.com/sporkmonger/addressable/tree/)的gem，特别是`normalize`方法（及其[文档](http://rubydoc.info/github/sporkmonger/addressable/Addressable/URI%3anormalize)）和`heuristic_parse`方法（及其[文档](http://rubydoc.info/github/sporkmonger/addressable/Addressable/URI#heuristic_parse-class_method)）。我过去使用过它，发现它非常强大。

Addressable 甚至可以处理带有 unicode 字符的 URL：

```
uri = Addressable::URI.parse("http://www.詹姆斯.com/")
uri.normalize
#=> #<Addressable::URI:0xc9a4c8 URI:http://www.xn--8ws00zhy3a.com/> 
```

# jquery - Jquery Append div 然后使其可调整大小和可拖动？

> ID：11760834
> 
> 赞同：1
> 
> 时间：2012-08-01T13:54:14.163
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable, jquery-resizable

我很困惑为什么下面的脚本不起作用...它附加了 div (import_box) 并使其可拖动，但不能调整大小？我是否遗漏了什么，我尝试了一些不同的方法，但它们要么禁用拖动，要么不采取任何措施来改善这种情况。我很乐意为您提供任何帮助...

```
function open_import_window(){
$('body').append('<div id="msg_bg"></div>');
$('body').append('<div id="import_box" class="import_box"><div class="title_bar">Import</div><div id="content_import_box"></div></div>');
$('#import_box').draggable({handle:".title_bar"}).resizable();
var window_width = $(window).innerWidth();
var import_box_left = (window_width/2)-400;
$("#import_box").css("left", import_box_left);

var window_height = $(window).innerHeight();
var import_box_top = (window_height/2)-250;
$("#import_box").css("top", import_box_top);

$.ajax({
    url: 'import.php',
    success: function(data) {
        $('#content_import_box').html(data);
        resize();
    }
});
} 
```

我做了一个小jsfiddle：http: [//jsfiddle.net/YSs6U/](http://jsfiddle.net/YSs6U/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T14:01:17.350

是的。你错过了 jQuery UI CSS。[看到这个小提琴，检查左侧的“添加资源”按钮以获取（一个）jQuery UI CSS 主题的链接。](http://jsfiddle.net/YSs6U/1/)

# ssis - 多次更改和迁移后，SSIS 包会损坏吗？

> ID：11760847
> 
> 赞同：1
> 
> 时间：2012-08-01T13:54:46.970
> 
> 标签：ssis, bids

经过多次更改和迁移（如“normal.dot”文件），SSIS 包会损坏吗？我之所以问这个是因为我在包中看到了一些非常奇怪的行为。

**背景**
SISS 包是（由我的前任）开发并在 SQL2005 上运行的。我正在（经过一些其他调整）将其迁移到 SQL2008。SSIS 包所做的一件事是在包运行时将 5 个文件导入数据库。随着时间的推移，SSIS 包会执行许多操作，由于我对此很陌生，所以我不愿意从头开始。该软件包是在商业智能开发工作室中制作的。

**一些症状**

*   在（更大更好的）SQL2008 上，如果一个数据流包含太多的导入任务，它不会经过调试。虽然该包确实在较旧的 SQL2005 服务器上运行。出于这个原因，我创建了几个较小的数据流来导入文件。
*   当较小的数据流（即导入数据）放置在序列框中时，调试会完美运行。包执行通知行已插入......但并非每个表都发生这种情况。
*   将所有数据流放在序列框中，将未填充的表减少到只有 1 个表。包执行仍然通知插入了 35 行。我仔细检查了来源和目的地。
*   在数据流中使用不起作用的数据转换时，另一个导入数据流在运行包时会出现致命错误。虽然源文件或目标表都不相等。并且数据流任务应该能够独立运行。

我的感觉开始告诉我，在调整和迁移之后，SSIS 包变得“维护不稳定”而“损坏”。但是由于我是新手并且重建会花费我很多时间（由于缺乏技能），我首先想确定..随着时间的推移，SSIS 包会变得“损坏”或不稳定吗？

# eclipse - tabris - rap-1.5.target 运行时负载问题

> ID：11760849
> 
> 赞同：0
> 
> 时间：2012-08-01T13:54:49.127
> 
> 标签：eclipse, mobile

每当我尝试使用这个具有[http://developer.eclipsesource.com/technology/tabris/downloads/0.6](http://developer.eclipsesource.com/technology/tabris/downloads/0.6)作为存储库位置的 rap-1.5.target 文件时，我都会在 Eclipse 中收到以下错误。未找到包含以下内容的存储库：org.eclipse.update.feature、com.eclipsesource.tabris.feature,0.6.2.v20120801-0412 未找到包含以下内容的存储库：osgi.bundle、com.eclipsesource.tabris、0.6.2.v20120801-0412未找到包含以下内容的存储库：org.eclipse.update.feature、org.eclipsesource.tabris.source,0.6.2.v20120801-0412 会话上下文为:(profile=TARGET_DEFINITION:resource/com.eclipsesource.tabris.demos/rap-1.5 .target，阶段=org.eclipse.equiniox.internal.p2.engibe.phases.Collect，操作数=，动作=）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T05:48:08.323

This is because the tabris target location is a composite p2 repository which keeps only the 10 last entries. A simple solution is to open the target file, click the tabris repository and press update on the right. After this you have to save and set the target platform.

# java - Java 等效卷曲

> ID：11760850
> 
> 赞同：0
> 
> 时间：2012-08-01T13:54:50.050
> 
> 标签：java, curl

```
curl -d 'user[name]=huck&user[email]=huck@xyz.com''http://sandbox.v2.xyz.com/api/berl/a4be95e6f86/users.json' 
```

谁能告诉我我们将如何运行这个 curl 命令。

另一件事，如果我通过 java 运行它，那么与这个调用等效的 java 是什么？它基本上是一个休息服务的电话

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:22:10.883

你有两个选择：

1.  使用类似[HttpClient](http://hc.apache.org/)的东西。

2.  使用类似[apache exec的东西](http://commons.apache.org/exec/tutorial.html)

# tfs - 从 TFS 命令行“获取最新”而不映射工作区等

> ID：11760851
> 
> 赞同：15
> 
> 时间：2012-08-01T13:54:51.983
> 
> 标签：tfs, automation

我假设这是：

```
tf.exe get $/project /recursive 
```

...需要这种奇怪的工作空间映射、已知的 TFS 服务器等。

有什么办法可以做这个最简单的事情：使用*这组凭据连接到**这个*TFS 服务器，获取*这个*项目的最新源代码并将它放在*这里*？全部来自命令行。

 **** * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-07T09:45:14.813

首先，您是否想要一份不再受源代码控制（例如 SVN 导出）的受控文件的副本，或者您仍然希望使用这些文件和 TFS？

### 选项1：根本没有绑定

如果您只是想要一份最新文件的副本并且没有“绑定”到 TFS，那么您将不得不自己做一些工作。撇开凭据（`[/login:username,[password]]`许多命令行方法的参数）。

1.  使用`TF`命令获取文件列表：`tf dir "$/YourSolution" /Recursive > files.txt`
2.  `files.txt`使用一些巧妙的批处理文件（或使用脚本语言）进行处理：
3.  读取以这是目录开头的行`$/`，在目标中创建目录（删除前三个字符和最后一个字符，一个冒号）。
4.  阅读下一行（直到空白或文件结尾），每一行都代表在步骤 3 中发现的目录中的一个文件。假设您在变量`%file%`和目录中有文件`%dir%`，然后发出以下命令（对于该目录中的每个文件):

`tf view "$/%DIR%/%FILE%" "/output:Your-Target-Path/%DIR%/%FILE%"`

或者如果您对当前目录作为目标感到满意：

`tf view "$/%DIR%/%FILE%" "/output:%DIR%/%FILE%"`

请注意，您需要`%DIR%/%FILE%`在输出部分中添加，否则所有文件都将转储到同一目录中。

注意：这可能是一个非常高的带宽和缓慢的操作！

### 选项 2：临时映射

1.  创建一个临时工作区：（`tf workspace /new /collection:<URL_TO_SERVER> /permission:Private`注意，这会提示，有一个无提示选项，但确定工作区的名称留作练习）
2.  为文件创建一个目录，例如`LOCALDIR`
3.  为您的文件夹创建映射：`tf workfold /map "$/SERVER_DIR" "LOCALDIR"`
4.  进去`LOCALDIR`
5.  获取文件`tf get . /Recursive`

此时，您现在应该拥有所有文件，如果需要，您还可以绑定 TFS，以便提交更改。或者，您现在可以将内容复制到其他地方并破坏映射/工作区。使用 和 的正确命令行变体`tf workfold /unmap`将`tf workspace /delete`取消映射您的工作文件夹并删除工作区。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-21T15:47:27.613

从 TFS 干净地导出任何文件夹？终于找到了我认为的绝妙解决方案。

我现在不打算为您完全研究这个，但打算稍后在有时间的时候用这个替换我非常混乱的构建服务器工作区同步脚本。

解决方案：

使用 Microsoft 的 Git-TF 将源代码保存到磁盘，而无需设置工作区或其他任何东西。我试过这个命令，效果很好。认为它将适用于 TFS 2010 和 2012。据我所知，不会有任何绑定或工作区或任何会在以后引起问题的遗留物。我认为您只需要安装 GIT 和 GIT-TF。

[http://www.microsoft.com/en-us/download/details.aspx?id=30474](http://www.microsoft.com/en-us/download/details.aspx?id=30474)

您实际上会将文件放入 GIT 存储库，这根本不是问题。您将在导出的文件夹中获得一个名为 .git 的（隐藏？）文件夹，我想您可以简单地删除它以消除任何 GIT 痕迹。

如果有人实现了这一点，这应该很容易，请确认它按预期工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-05-19T06:51:35.737

**快速解决方案**
在 Ray Hayes*选项 2*答案的基础上，我整理了一个实际脚本，应该可以直接供那些只想要快速而肮脏的解决方案的人使用。您应该阅读他的[回答](https://stackoverflow.com/a/11843259/217663)以获取更多信息。

**要使用它：**

*   将四个变量设置为您的工作环境
*   请记住，您的 tf.exe 可能与我所在的目录不在同一个目录中，尤其是如果您从将来阅读此文件时 :)

.

```
SET COLLECTION_URL="http://localhost:8080/tfs/<collection>"
SET SERVER_DIR="$/<REMOTE_SOLUTION_DIR>"
SET LOCAL_DIR="X:\<YourLocalDir>"
SET TF_DIR="C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE"

%TF_DIR%\tf workspace /new /collection:%COLLECTION_URL% /permission:Private /noprompt tmp_batchws
%TF_DIR%\tf workfold /map %SERVER_DIR% %LOCAL_DIR%
cd /d %LOCAL_DIR%
%TF_DIR%\tf get . /Recursive
%TF_DIR%\tf workspace /delete tmp_batchws /noprompt 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-06-04T20:45:08.720

我为主要答案编写了 powershell

```
$base = "f:\whereyouwantthefilestogo\"
foreach($l in get-content D:\outputfromTFdir.txt)
{
    if($l -match '^\$.*\:$')
    {
        $repopath = $l.trim(':')
        write-host 'base path'
        $basepath = "$base$($l.Substring(2,$l.Length -3) -replace '/','\')"
        if((Test-Path $basepath) -eq $false)
        {
            write-host 'making directory'
            New-Item -ItemType directory -Path $basepath
        }
        continue;
    }
    elseif($l -match '^\$')
    {
        write-host 'sub folder'
        $subfolderpath = "$basepath\$($l.trim('$'))"
        if((Test-Path $subfolderpath) -eq $false)
        {
            write-host 'making directory'
            New-Item -ItemType directory -Path $subfolderpath
        }
        continue;
    }
    elseif($l -match '.*\..*')
    {
        write-host 'get file'
        $filename = "$basepath\$l"
        write-host $filename
        $repofile = "$repopath/$l"
        tf view "$repofile" "/output:$filename" /collection:http://tfsserver
    }
    else{write-host 'blank line'}
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-01T14:09:12.740

TFS 命令行没有“简单”选项 - 它们几乎总是涉及大量输入（例如无法简单地设置默认设置，因此您不必在每个命令）

使 TFS 命令行“简单”的常用方法是编写批处理文件以隐藏每次必须指定的所有细节（服务器 URL 和递归标志等）

但是，TF.exe 确实允许您执行几乎任何操作，因此它是一个非常简单的 tf 调用序列，用于创建临时映射、执行 Get 并再次删除映射。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-03-01T04:01:36.140

[http://johannblais.blogspot.com/2014/07/tfs-equivalent-of-svn-export.html](http://johannblais.blogspot.com/2014/07/tfs-equivalent-of-svn-export.html)

[http://tfs-server:port/tfs/Collection/TeamProject/Team/_api/_versioncontrol/itemContentZipped?repositoryId=&path=url-encoded-source-control-path](http://tfs-server:port/tfs/Collection/TeamProject/Team/_api/_versioncontrol/itemContentZipped?repositoryId=&path=url-encoded-source-control-path)

*   tfs-server 是 TFS 服务器主机名
*   port 是 TFS 端口（通常是 8080）
*   Collection 是您的团队项目集合的名称
*   TeamProject 是您的团队项目的名称
*   团队是团队的名称
*   url-encoded-source-control-path 是 URL 编码的源代码控制路径（例如，$/Project1/Main/Sources/Folder/SubFolder 变为 %24%2FProject1%2FMain%2FSources%2FFolder%2FSubFolder***

# c# - Include a DLL file in project to avoid circular reference for deploying asp.net application

> ID：11760852
> 
> 赞同：0
> 
> 时间：2012-08-01T13:54:52.603
> 
> 标签：c#, asp.net-mvc-3, visual-studio-2010, msbuild

I have the following solution structure

```
Test_Solution
 |_ Test1.csproj
       |_ Reference
              |_ SomeDll.dll
              |_ Others.dll
       |_ Files

 |_ Test2.csproj
       |_ Reference
             |_ Test1.dll
             |_ Etc.dll
       |_ Files 
```

`Test1` project is a web application (asp.net with mvc 3).

`Test2` is a unit test project.

How you see, `Test2` has already a reference to Test1.dll (has some functions which are found in Test1 project)

For deploying application, I will create package using `msbuild` command (it will create `cmd` file and a ZIP and some XML files).

I want to include in that package also the `Test2.dll` but I cannot because of **circular reference** warning.

Why including that `Test2.dll`? Because I want to deploy whole package on a server and run a test (automated testing) using `Test2.dll` and install the application simultaneously.

What's the best way to do that ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:00:39.980

Make a custom build that always builds both projects and packages both results into the zip

# ruby-on-rails - 想要创建书籍的新实例而不是更新

> ID：11760856
> 
> 赞同：0
> 
> 时间：2012-08-01T13:55:06.207
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我想要的是创建一个个人资料页面，我可以在其中查看以前的书字段，如果客户更改文本，那么它将创建一本新书。

我有以下具有 has_many 关系的模型

```
Customer -- ID, First, Last, Email
Book -- ID, Description
Book_Managers -- ID, Customer_id, Book_id, Visible 
```

现在我拥有的是一个客户编辑，它允许我通过从更多模型（如书籍、电话等）进行渲染来查看多种表单......

这是我的客户控制器

```
def edit
  @customer = Customer.find(params[:id])
  if @customer.books.any?
    @book = @customer.books.order("created_at DESC").first
  else
    @book = @customer.books.build
  end
end 
```

我想看到的是，如果我在预订表格时创建了一个新实例，我应该看到最后一个并且能够将“JavaScript 圣经”修改为“Java 圣经”，它不会更新它，而只是创建一个新的版本。现在，当去表格簿时，我什么也看不到。如果我出于某种奇怪的原因这样做，它只允许我更新。

```
 class BooksController < ApplicationController
   def create
     @book = current_customer.books.build(params[:book])
     if @book.save
       flash[:success] = "Book Created"
       redirect_to root_url
     else
       render 'customer/edit'
     end
   end

   def index
     @books = Book.all
   end

   def destroy
     @book.destroy
     redirect_to root_url
   end
 end 
```

添加了这个

```
def update
 @book = current_customer.books.build(params[:book])
 if @book.save
   flash[:success] = "Book Updated"
   redirect_to root_url
 else
   render 'customer/edit'
 end 
```

结尾

对我的图书管理员来说，现在唯一的问题是我的关联，我似乎无法找到当前客户的任何图书。我的查询有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:28:23.433

有一些用于版本控制的宝石。这就是：[https ://www.ruby-toolbox.com/categories/Active_Record_Versioning](https://www.ruby-toolbox.com/categories/Active_Record_Versioning)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:55:06.453

你可以这样做：

```
def update
  params = params[:book].merge(:previous_version => params[:id])
  @book = current_customer.books.create(params[:book])
end 
```

它将在每次更新时创建一本新书。最后一个版本将是没有“previous_version”的书。

# java - 拦截和解析 Logger 或控制台输出而不干扰它

> ID：11760871
> 
> 赞同：0
> 
> 时间：2012-08-01T13:56:00.590
> 
> 标签：java, intercept, system.out

我在使用 Java 时遇到了一些麻烦。我想要的非常简单，我正在为著名游戏 Minecraft 的 mod 开发一个插件，并且我需要能够解析通过 STOUT 的控制台输出的每一行。

我在互联网上环顾四周，但似乎找不到任何可以用来执行此操作的东西。我知道有些控制台输出是通过默认的 Logger，有些是通过 system.out。我有一个函数，`parseConsole(String line)`它将解析该行并在它包含一个单词等时执行某些操作。我希望为控制台上显示的每一行输出调用此函数，但它不能中断流程，就像在每个在我的函数解析后，行仍将发送到控制台。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T16:28:47.250

您可以使用[System.setOut()](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#setOut%28java.io.PrintStream%29)替换控制台 PrintStream。您可以将其替换为在前往控制台的途中检查文本的实现。

这是您如何过滤的示例：

```
public class MyFilterPrintStream extends PrintStream {
  @Override public void print(String s) {
    // ... process output string here ...

    // pass along to actual console output
    super.print(s);
  }
}

// install my filter 
System.setOut(new MyFilterPrintStream(System.out)); 
```

# php - 更改页面标签（clistview、cgridview）而不更改寻呼机 css（引导程序）

> ID：11760873
> 
> 赞同：0
> 
> 时间：2012-08-01T13:56:07.113
> 
> 标签：php, yii

当我在 CGridView 中设置“寻呼机”时，它会更改引导程序外观，我尝试将 cssFile 设置为 null 或 false，但它不起作用。

```
 'pager' => array(
            'class' => 'CLinkPager',
            'firstPageLabel' => '<<',
            'prevPageLabel' => 'smthprev',
            'nextPageLabel' => 'smthnext',
            'lastPageLabel' => '>>',
        ), 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:27:10.947

Bootstrap 扩展检查是否设置了 htmlOptions['class']，即：isset($htmlOptions['class'])，所以如果我们设置空类，那么它应该可以工作。所以添加这个：

```
 'pager' => array(
        // rest of code
        'htmlOptions'=>array('class'=>'')
    ), 
```

# java - 如何在java中读取xml文件

> ID：11760876
> 
> 赞同：0
> 
> 时间：2012-08-01T13:56:13.043
> 
> 标签：java, xml

如何在 java 中读取 XML 文件。

下面是我的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LivescoreData>
  <Sport SportId="1">
    <Name language="en">Soccer</Name>
    <Name language="se">Fotboll</Name>
    <Category CategoryId="34">
      <Name language="en">Australia</Name>
      <Name language="se">Australien</Name>
      <Tournament TournamentId="144">
        <Name language="en">Hyundai A-League</Name>
        <Name language="se">Hyundai A-League</Name>
        <Match MatchId="4616735">
          <MatchDate>2011-01-05T07:30:00</MatchDate>
          <Team1 TeamId="1029369">
            <Name language="en">Wellington Phoenix FC</Name>
            <Name language="se">Wellington</Name>
          </Team1>
          <Team2 TeamId="529088">
            <Name language="en">Melbourne Victory</Name>
            <Name language="se">Melbourne Victory</Name>
          </Team2>
          <Status Code="100">
            <Name language="en">Ended</Name>
            <Name language="se">Avslutad</Name>
          </Status>
          <Winner>1</Winner>
          <Scores>
            <Score type="Current">
              <Team1>2</Team1>
              <Team2>0</Team2>
            </Score>
          </Scores>
          <Goals></Goals>
          <Cards></Cards>
          <Substitutions></Substitutions>
          <Lineups></Lineups>
        </Match>
      </Tournament>
    </Category>
    <Category CategoryId="1">
      <Name language="en">England</Name>
      <Name language="se">England</Name>
      <Tournament TournamentId="1">
        <Name language="en">Premier League</Name>
        <Name language="se">Premier League</Name>
        <Match MatchId="4601857">
          <MatchDate>2011-01-04T21:00:00</MatchDate>
          <Team1 TeamId="5431228">
            <Name language="en">Blackpool FC</Name>
            <Name language="se">Blackpool FC</Name>
          </Team1>
          <Team2 TeamId="23960">
            <Name language="en">Birmingham City</Name>
            <Name language="se">Birmingham City</Name>
          </Team2>
          <Status Code="100">
            <Name language="en">Ended</Name>
            <Name language="se">Avslutad</Name>
          </Status>
          <Winner>1</Winner>
          <Scores>
            <Score type="Current">
              <Team1>5</Team1>
              <Team2>1</Team2>
            </Score>
          </Scores>
          <Goals></Goals>
          <Cards></Cards>
          <Substitutions></Substitutions>
          <Lineups></Lineups>
        </Match>
        <Match MatchId="4601859">
          <MatchDate>2011-01-04T21:00:00</MatchDate>
          <Team1 TeamId="26511">
            <Name language="en">Fulham FC</Name>
            <Name language="se">Fulham FC</Name>
          </Team1>
          <Team2 TeamId="94356">
            <Name language="en">West Bromwich Albion</Name>
            <Name language="se">West Bromwich Albion</Name>
          </Team2>
          <Status Code="100">
            <Name language="en">Ended</Name>
            <Name language="se">Avslutad</Name>
          </Status>
          <Winner>1</Winner>
          <Scores>
            <Score type="Current">
              <Team1>4</Team1>
              <Team2>1</Team2>
            </Score>
          </Scores>
          <Goals></Goals>
          <Cards></Cards>
          <Substitutions></Substitutions>
          <Lineups></Lineups>
        </Match>
      </Tournament>
    </Category>
  </Sport>
</LivescoreData> 
```

下面是代码：IT 打印 XML Soccer 的第一个值并且无法打印下一个值。

```
nodeLst = doc.getElementsByTagName("Sport"); 
for (int i = 0; i < nodeLst.getLength(); i++) { 

    Node myNode = nodeLst.item(i); 

    if (myNode.getNodeType() == Node.ELEMENT_NODE) { 

       Element Sport = (Element) myNode; 
       NodeList Name= Sport 
        .getElementsByTagName("Name"); 
       Element NameElement = (Element) Name.item(0); 
       NodeList Namevalue = NameElement.getChildNodes(); 
       System.out.println("Name : " 
    + ((Node) Namevalue.item(0)).getNodeValue()+"|");  

    //This gives me null value  
       NodeList Category = Sport 
       .getElementsByTagName("Category"); 
       Element CategoryName= (Element) Category 
       .item(0); 
       NodeList Categoryvalue = CategoryName 
       .getChildNodes(); 
       System.out.println("Category: " 
       + ((Node) Categoryvalue.item(0)) 
       .getNodeValue()); 
   } 
} 
```

我只能读取第一个数据足球。第二个只给出空值。

我需要我的结果：

```
Soccer | Australia | Hyundai A-League | Wellington Phoenix FC - Melbourne Victory : 2 - 0
Soccer | England | Premier League | Blackpool FC - Birmingham City : 5 - 1
Soccer | England | Premier League | Fulham FC - West Bromwich Albion : 4 - 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:05:44.490

最好/更容易不要在 Java 中执行此操作，而是在您可以从 Java 应用程序调用的 XSLT 或 XQuery 代码中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:00:06.133

由于您还没有真正说出您想对所述 XML 文件做什么，所以我能做的最好的就是将您引导至本指南：

[http://tutorials.jenkov.com/java-xml/dom.html](http://tutorials.jenkov.com/java-xml/dom.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T14:16:32.873

您可以使用[JAXP](http://docs.oracle.com/javase/6/docs/technotes/guides/xml/jaxp/ReleaseNotes_160.html)来解析 XML

# netlogo - 在 NetLogo 中报告海龟航向的变化

> ID：11760877
> 
> 赞同：1
> 
> 时间：2012-08-01T13:56:21.103
> 
> 标签：netlogo

当乌龟改变它的方向时，我需要同时学习。也就是说，当海龟改变它的方向时，一个过程或一个报告器将改变一个布尔值。但是这个记者不会被任何其他程序调用，它会在海龟移动时一直运行（检查海龟的航向）。在 NetLogo 中有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:20:18.857

我认为您可以使用“永久”按钮实现与您想要的类似的功能：即，一个不断运行程序的按钮。（人们通常在他们的模型中至少有一个这样的按钮，通常命名为“go”。）

假设您要跟踪的标题是 的`turtle 0`，您可以使用如下代码：

```
globals [
  current-heading
  heading-has-changed
]

to check-heading-changes
  if [ heading ] of turtle 0 != current-heading [
    set heading-has-changed true
    set current-heading [ heading ] of turtle 0
  ]
end 
```

要让`check-heading-changes`代码持续运行，您只需从“永远”按钮调用它：

![永远检查当前标题按钮](../Images/ae86ad2d8317fefa5dafdf829386f97b.png)

当您要开始监控时，您必须记住单击永久按钮。现在，当然，上面的代码还假设您将运行一些其他控制海龟的程序，并且当`heading-has-changed`变成时，它实际上会做一些事情（并重置变量） `true`。

# javascript - 在书签中使用 @import 和 @font-face（适用于 Chrome，但不适用于 Firefox）

> ID：11760883
> 
> 赞同：0
> 
> 时间：2012-08-01T13:56:40.060
> 
> 标签：javascript, css, import, font-face, bookmarklet

我制作了一个非常简单直接的书签来测试我们正在开发的开放网络字体。它在 Chrome 中就像一个魅力，但在 Firefox 中却失败了，关于如何让它跨浏览器工作的任何提示（我是一个真正的 JS 新手，主要是复制粘贴然后祈祷它工作）。这是代码：

```
javascript:var%20addFont%3Ddocument.createElement(%22style%22)%3BaddFont.innerText%3D%22%40import%20url(%27https://dl.dropbox.com/u/16808833/webfontkit-20120729-105013/stylesheet.css%27)%3B%20*%7Bfont-family:%20%27OpenfontRegular%27!important%3Bfont-weight:%20normal!important%3B%7D%22%3Bdocument.body.appendChild(addFont)%3B 
```

或者以更易读的格式：

```
javascript:
var addFont=document.createElement('style');
addFont.innerText="
  @import url('https://dl.dropbox.com/u/16808833/webfontkit-20120729-105013/stylesheet.css');
  *{
    font-family: 'OpenfontRegular'!important;
    font-weight: normal!important;
  }";
document.body.appendChild(addFont); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:03:49.243

FF会在这里抱怨`innerText`。尝试`innerHTML`改用

**编辑 1**

有关它的更多信息 - 选择最适合您的！['innerText' 在 IE 中有效，但在 Firefox 中无效](https://stackoverflow.com/questions/1359469/innertext-works-in-ie-but-not-in-firefox)

**编辑 2**

我一直在为此苦苦挣扎，对我来说没有意义......所以这里有一些可能会产生结果的路线：

1.  尝试`https://dl.dropbox.com/...`在样式表中添加字体文件的完整路径（例如 ）
2.  尝试添加两个元素，而不是使用导入：

```
var addLink = document.createElement('link');
addLink.rel = "stylesheet";
addLink.type = "text/css";
addLink.href = "https://dl.dropbox.com/u/16808833/webfontkit-20120729-105013/stylesheet.css";
document.head.appendChild(addLink);

var addFont=document.createElement('style');
addFont.innerHTML="* {   font-family: 'OpenfontRegular' !important;    font-weight: normal!important;  }";
document.body.appendChild(addFont); 
```

这些都没有真正为我工作，但可能值得一试。我很困惑的原因是这就是添加 googlefonts 的方式；他们在Firefox中完美运行！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:21:24.433

由于 Firefox 不允许远程调用 @font-face 文件，我通过使用 Base64 编码将字体信息嵌入到 CSS 文件中解决了这个问题。这是 FontSquirrel @font-face 生成器中提供的一个选项，它允许小书签导入字体。这是跨浏览器工作的书签代码：

```
javascript:%20newSS%20=%20document.createElement('link');%20newSS.rel%20=%20'stylesheet';%20newSS.href%20=%20'http://dl.dropbox.com/u/2040562/beta0.1/bookmarklet.css';%20document.head.appendChild(newSS);%20void%200 
```

或者：

```
javascript:
newSS = document.createElement('link');
newSS.rel = 'stylesheet'; newSS.href = 'http://dl.dropbox.com/u/2040562/beta0.1/bookmarklet.css';
document.head.appendChild(newSS);
void 0 
```

# xpages - 有条件的客户端验证？

> ID：11760886
> 
> 赞同：0
> 
> 时间：2012-08-01T13:56:46.330
> 
> 标签：xpages

我有一个单选按钮组，它使用@Dblookup 获取它的值。除了出现在单选按钮组中的名称之外，该文档还有一个字段来确定是否应显示 xPage 上的另一个字段。

如果显示该字段，则它应该是必需的。

我可以使用@DbLookup 在SSJS 中很好地进行条件验证，以查找在单选按钮组中选择的文档。

但我希望能够做到 CS，所以它更快，所以它看起来像我的其他验证。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:18:36.437

如果您在整个应用程序中使用客户端验证，则在字段上设置 required 属性应该可以满足您的需要。

如果没有，可能值得查看 Extension Library Dojo Validation Text Box。所有扩展库 Dojo 控件都运行客户端验证，即使验证在应用程序级别设置为服务器端。请记住，对于 Dojo 验证文本框，仅设置所需的属性是不够的。您需要添加更具体的验证。

之后，关键是确保您的无线电组上的部分刷新事件设置为跳过验证。我没有尝试过，但我相信这应该可以达到你所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T23:55:04.147

如果未呈现字段，则该节点将不存在于 DOM 中。您的 CS javascript 需要检查 DOM 并查找节点，通常是通过查找特定 ID。当 Xpages 更改发送到浏览器的 ID 时，您的验证函数要么需要计算，以便它知道要查找的 ID，要么您需要以其他独特的方式查找它（比如添加一个 css 类名）字段，然后对具有该类名的节点进行 DOM 搜索）

一旦您可以确定该字段是否已呈现，您就可以针对其他字段运行通常的 CS 验证例程。

# android - Android 上的级联列表

> ID：11760887
> 
> 赞同：1
> 
> 时间：2012-08-01T13:56:48.113
> 
> 标签：android, android-listview, horizontalscrollview, android-tablelayout

我必须重新设计我的 UI，比如模式“级联列表”。

我还没有在 Android 上找到示例，我正在考虑使用填充屏幕的 Horizo​​ntalScrollView，然后在其中放置一些 ListViews 的 TableLayout。

当用户单击 listView 的一个项目时，它会在其右侧显示另一个列表。“后退”按钮破坏/隐藏列表。当屏幕上有多个列表时，用户可以通过 Horizo​​ntalScrollView 滚动。

你对那个怎么想的 ？

谢谢

# wcf - 打开操作未在分配的 00:01:00 超时内完成 - AX 2012 使用 AIF/WCF

> ID：11760897
> 
> 赞同：1
> 
> 时间：2012-08-01T13:57:35.353
> 
> 标签：wcf, axapta, ax, dynamics-ax-2012, aif

当它处理需要很长时间的大量数据时，我遇到了问题`AIF`。`AX 2012`我正在使用适配器`NetTCP`，并且在使用 WebForm 应用程序使用 Web 服务时遇到以下异常。

```
The open operation did not complete within the allotted timeout of 00:01:00\. 
The time allotted to this operation may have been a portion of a longer timeout.

InnerException:The socket transfer timed out after 00:00:59.9990234\. You have exceeded the timeout set on your binding.
 The time allotted to this operation may have been a portion of a longer timeout.

InnerException:A connection attempt failed because the connected party did not properly respond after a period of time, 
or established connection failed because connected host has failed to respond 
```

应用程序代码基本上是（我什至在每个循环中打开和关闭连接），如主题[错误消息：打开操作未在分配的超时内完成](http://msdn.microsoft.com/en-us/library/aa548693.aspx)：

```
public void CreateFromCSVFile(Stream fileStream)
        {
            ExportingData_Test.VendVendServices.VendTableServiceClient VenSvcClient = new VendTableServiceClient();

            try
            {
                List<string[]> VendData = Helper.ImportCSVFile.ParseCSVFile(fileStream, true);

                foreach (string[] vendor in VendData)
                {
                      VenSvcClient = new VendTableServiceClient();

                       VenSvcClient.Endpoint.Binding.OpenTimeout = new TimeSpan(0, 1, 10, 0);
                       VenSvcClient.Endpoint.Binding.ReceiveTimeout = new TimeSpan(0, 1, 10, 0);
                       VenSvcClient.Endpoint.Binding.SendTimeout = new TimeSpan(0, 1, 10, 0);
                       VenSvcClient.Endpoint.Binding.CloseTimeout = new TimeSpan(0, 1, 10, 0);

                        VenSvcClient.Open();

                        //DO SOME OPERATION IN HERE
                        //Create the Vendor

                        entityKey = VenSvcClient.create(callContext, axdVendor);
                        VenSvcClient.Close();
                 }
            }
            catch (Exception ex)
            {
                String message = ex.Message;
            }
           finally
           {
               VenSvcClient.Close();
           }
        } 
```

我尝试使用[Microsoft Service Configuration Editor](http://community.dynamics.com/product/ax/axtechnical/b/goshoom/archive/2011/06/16/ax2012-service-configuration-editor.aspx)配置增强端口，用于配置下面的 WCF，增加了大多数属性：

在**主机**中：

1.  关闭超时到 00:10:00
2.  OpenTimeout 到 00:10:00

在**绑定**中：

1.  MaxReceivedMessageSize 为 1004857600。在[这里](http://msdn.itags.org/visual-studio/89112/)建议。
2.  MaxBufferSize 为 1004857600。
3.  MaxBufferPoolSize 为 1004857600。
4.  ReceivedTimeout 01:10:00
5.  发送超时 01:10:00
6.  MaxBytesPerRead 1004857600
7.  不活动超时 01:10:00
8.  可靠会话属性 false

但我仍然遇到同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:08:01.817

[这里](http://community.dynamics.com/product/ax/axtechnical/b/ax2012exceldataimport/archive/2012/08/16/dynamics-ax-2012-excel-add-in-issues-and-solutions-timeout-issues.aspx)提到了同样的错误。

但建议是使用 Microsoft WCF 服务配置编辑器编辑参数 ReceiveTimeout 和 SendTimeout，您可能已经这样做了。也许仔细检查您是否点击了正确的端口。

# javascript - 在滚动时查找位于可见屏幕（视口）中间的元素

> ID：11760898
> 
> 赞同：10
> 
> 时间：2012-08-01T13:57:38.660
> 
> 标签：javascript, jquery

我需要知道是否有一种方法可以确定 div 是否位于屏幕中央。

## HTML：

```
<div id="container">
 <div class="box" id="box0">
  text
 </div>
 <div class="box" id="box1">
  text
 </div>

 .....

 <div class="box" id="box100">
  text
 </div>
</div> 
```

考虑到页面是可滚动的，有没有办法确定 div 何时位于可见屏幕的中心？所以基本上，当用户向下滚动页面时，应该选择可见屏幕中间的 div。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-10-20T13:17:09.200

# [演示页面](https://codepen.io/vsync/pen/rwygwq)

```
var findMiddleElement = (function(docElm){
    var viewportHeight = docElm.clientHeight,
        // here i'm using pre-cached DIV elements, but you can use anything you want.
        // Cases where elements are generated dynamically are more CPU intense ofc.
        elements = $('div'); 

    return function(e){
        var middleElement;
        if( e && e.type == 'resize' )
            viewportHeight = docElm.clientHeight;

        elements.each(function(){
            var pos = this.getBoundingClientRect().top;
            // if an element is more or less in the middle of the viewport
            if( pos > viewportHeight/2.5 && pos < viewportHeight/1.5 ){
                middleElement = this;
                return false; // stop iteration 
            }
        });

        console.log(middleElement);
    }
})(document.documentElement);

$(window).on('scroll resize', findMiddleElement); 
```

> 另一种方法（仅适用于现代浏览器）是使用[交集 API](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-07-16T13:36:19.740

这是一个不错的方法：[elementFromPoint()](https://developer.mozilla.org/en-US/docs/Web/API/Document/elementFromPoint)

您可以像这样获得中心的元素：

```
 var elem = document.elementFromPoint($(window).width()/2, $(window).height()/2);

//if you want jquery element you can get it.
var jqueryElem = $(elem); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T14:34:28.357

窗口的高度和窗口的 scrollTop() 将为您提供用户视图中存在的偏移范围：

```
var minHeight = $(window).scrollTop()
var maxHeight = $(window).height()
var middleHeight = (maxHeight + minHeight) / 2; 
```

您可以尝试使用视口选择器，例如： http: [//www.appelsiini.net/projects/viewport](http://www.appelsiini.net/projects/viewport) 这将为您提供所有可见元素。不需要插件，但可以简化选择

```
var visibleElements = $("div.box").filter(":in-viewport") 
```

然后，您可以从此选择中查找最接近 middleHeight 的元素：

```
var $midElement;
var distance = null;
var currDistance = 0;
visibleElements.each(function(index, element) {
    currDistance = Math.abs(middleHeight - $midElement.offset().top);
    if ( distance == null || currDistance < distance ) {
        $midElement = $(element);
        distance = currDistance;
    }
}); 
```

尚未对此进行测试，但它应该是正确的。

# asp.net-mvc-3 - 淘汰向导 + Jquery

> ID：11760900
> 
> 赞同：1
> 
> 时间：2012-08-01T13:57:41.480
> 
> 标签：asp.net-mvc-3, jquery-ui, knockout-2.0

我有一个向导包含 4 个步骤，它可以正常工作，但是当我在第 2 步添加 Jquery 的 datepicker 时，如果我刷新浏览器，日期选择器不会显示（只是输入类型的文本显示），但我会丢失步骤的信息1（如果我刷新浏览器），我该如何解决我的问题，

我的向导是这样的：http: [//jsfiddle.net/FyuSD/36/](http://jsfiddle.net/FyuSD/36/)

**向导.cshtml：**

```
....
<script id="step1" type="text/html">    
 <div>Name: <input type="text" data-bind="value: Name"></div>
 <div>Description: <input type="text" data-bind="value: Description"></div>
</script>

<script id="step2" type="text/html">
  Start: <br/><input type="text" id="from"  data-bind="value: StartDate">
  Stop:<br/> <input type="text" id="to" class="required" data-bind="value: EndDate">
</script>
..... 
```

**日期选择器.js：**

```
 $(function () {
  $("#from").datepicker({
    showOn: "button",
    buttonImage: "/Content/images/calendar.gif",
    buttonImageOnly: true,
    defaultDate: "+1w",
    changeMonth: true,
    numberOfMonths: 1,
    onSelect: function (selectedDate) {
        $("#to").datepicker("option", "minDate", selectedDate);
    }
});
$("#to").datepicker({
    showOn: "button",
    buttonImage: "/Content/images/calendar.gif",
    buttonImageOnly: true,
    defaultDate: "+1w",
    changeMonth: true,
    numberOfMonths: 1,
    onSelect: function (selectedDate) {
        $("#from").datepicker("option", "maxDate", selectedDate);
    }
});
}); 
```

我很抱歉我的英语不好

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T16:43:29.263

我玩了一下小提琴，你的解决方案就是这个问题的答案

[KnockoutJS 未捕获 jQuery UI 日期选择器更改事件](https://stackoverflow.com/questions/6612705/knockout-with-jquery-ui-datepicker)

其中显示了用于自定义绑定的日期选择器实现，如淘汰文档中所述：[Knockout - Custom Bindings](http://knockoutjs.com/documentation/custom-bindings.html)

您需要创建一个自定义绑定处理程序，该处理程序将在呈现模板时初始化您的日期选择器。

```
 // call this before you call ko.applyBindings()
    ko.bindingHandlers.datepicker = {
         init: function(element, valueAccessor, allBindingsAccessor) {
             // initialize here
         },
         update: function(element, valueAccessor, allBindingsAccessor) {
             // change handler here
         }
    }; 
```

当您声明数据绑定时，请使用自定义绑定的名称（而不是“值：StartDate”）

```
 <br/>
    Start :<input type="text" id="from" data-bind="datepicker: StartDate, datepickerOptions: {onSelect: $root.onSelectStartDate()}" /> 
    <br/>
    End :<input type="text" id="to" data-bind="datepicker: EndDate, datepickerOptions: {onSelect: $root.onSelectEndDate()}" /> 
```

当然`$root`是指您的 ViewModel 类，这意味着您需要一些方法。这是您可以放置​​ minDate 和 maxDate 代码的地方。

```
 function ViewModel() {

        // ...

        self.onSelectStartDate = function() {
            return function() {
                alert("Start Date selected");
            };
        };

        self.onSelectEndDate = function() {
            return function() {
                alert("End Date selected");
            };
        };
    }; 
```

我在[http://jsfiddle.net/carbontax/bwA4N/5/](http://jsfiddle.net/carbontax/bwA4N/5/)的更新小提琴中对其进行了测试。它看起来很有趣，因为 datepicker css 不可用，但绑定处理程序正在做正确的事情。

# ssl - SSL 和中间人攻击

> ID：11760901
> 
> 赞同：3
> 
> 时间：2012-08-01T13:57:47.007
> 
> 标签：ssl

我的印象是自签名证书构成中间人攻击的风险，因为中间人可以向客户端提供不同的自签名证书。我的问题如下。

如果我在服务器上使用自签名证书（使用 SelfSSL）并且在运行 ssl 页面（它是管理页面而不是公共页面）时，浏览器会给我一个警告，我将自签名证书安装在受信任的store（假设这个请求没有被中间人拦截），会不会有中间人攻击的风险。对于我的测试，我所做的是更改服务器上的证书，保持所有参数相同，它创建了一个不同的指纹，并且浏览器在运行 ssl 页面时再次开始给我警告。这意味着如果有人更改证书，我将收到警告，表明证书已从我添加到受信任存储的证书更改。我在做什么有什么缺陷吗？我不想只为自己的一页购买任何 ssl。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T13:59:14.613

是的，; 那会很好用。

只要浏览器可以验证您拥有*正确*的自签名证书，就可以了。

但是，如果您在信任证书的第一次连接期间受到 MITM 攻击，那么您就有大麻烦了。（因为您最终会信任攻击者的证书而不是您自己的证书）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T14:40:40.187

从您的帖子中不清楚，如果此网络应用程序只有一个用户（您自己），请忽略下面，否则...

您不只是在训练您的用户忽略浏览器安全警告吗？那么当有人试图在 MITM 攻击期间注入新证书时，他们不会忽略警告呢？您希望他们忽略第一个警告，但如果他们稍后收到另一个警告，他们应该知道这是一个问题吗？

用户没有那么老练。使用自签名 SSL 基本上表示您不关心用户的安全性。

# php - 数组子元素的“垂直”总和的本机函数，例如 vertical_sum($array[$day_of_year]["income"]);

> ID：11760903
> 
> 赞同：3
> 
> 时间：2012-08-01T13:58:06.570
> 
> 标签：php, arrays, multidimensional-array, sum

标题说明了一切：php 中是否有一个垂直求和函数，它在整个数组上添加一个（子）数组值，如下所示：

```
 // pseudo code that would return the sum of "income" for all days of the year
 // for example
 vertical_sum($array[$day_of_year]["income"]); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T14:04:06.340

您可以从每个数组中提取`income`字段，然后使用`array_sum`.

```
function vertical_sum($array, $key){
    return array_sum(array_map(function($a) use($key){
        return $a[$key];
    }, $array));
} 
```

然后你可以这样称呼它：

```
vertical_sum($array, "income"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T14:05:58.820

原生功能？不完全是，但数组减少可以帮助：

```
$array = array(
    array('income' => 1), //day 1
    array('income' => 3), //day 2, etc
    array('income' => 6),
    array('income' => 7)
);
echo array_reduce($array, function($curr_total, $this_val) {
    return $curr_total + $this_val['income'];
}, 0); //17 
```

# php - PHP MySQL比较两列并按顺序返回？

> ID：11760905
> 
> 赞同：-6
> 
> 时间：2012-08-01T13:58:11.260
> 
> 标签：php, mysql

简单的问题哪里错了？

```
$result = mysql_query("
    SELECT * FROM orders 
    WHERE Username='$username' 
        AND completed > ordered 
    ORDER BY completed ASC 
    LIMIT 1
") or die(mysql_error()); 
```

没有错误也没有数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T14:16:51.633

您的查询的语法可能是正确的，但您的算法可能不是：

```
SELECT * FROM orders 
WHERE Username = ? 
AND completed > ordered 
ORDER BY completed ASC 
LIMIT 1 
```

（然后确保绑定查询`$username`以减轻 SQL 注入攻击。）

你有一个`orders`大概包含...它包含什么的表？它不能是日期戳，因为*所有*订单都将在下达后完成。

所以它必须是一个INT？并且您想选择那些*完成的订单比完成的订单多的人*( `AND completed > ordered`)，这在您的公司可能是不可能的。试试`completed < ordered`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-01T14:13:57.877

好的，很抱歉打扰大家，但这是一个简单的错字通知“>”，它应该是“<”，因为完成的不能比订购的大，就是这样。

```
$result = mysql_query("SELECT * FROM orders WHERE Username='$username' AND completed > ordered ORDER BY completed ASC LIMIT 1") or die(mysql_error()); 
```

# php - 读取远程文件或先上传然后从我端读取

> ID：11760907
> 
> 赞同：0
> 
> 时间：2012-08-01T13:58:14.490
> 
> 标签：php, xml

我有一个网站，有两个选项，但希望您的意见选择最合适的一个：

1.  让用户提供指向其 XML 文件的 URL。
2.  让用户将他们的 XML 文件上传到我的服务器。

在这两个选项之后，我的脚本将运行以读取并针对我的 XSD 验证它，然后再放入数据库（如果有效）。

我正在使用 XMLReader 阅读它，因为 DOM 使用大量内存来窒息而死。

主机是共享主机。XML 的最大大小为 10MB。

这两个选项哪个更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:19:17.653

允许用户上传到您的服务器对用户来说更加友好（不是每个人都会理解如何格式化 URL），所以我会这样做。

您始终可以使用 cron 调用清理脚本来删除旧的 XML 文件，或者在处理完文件后直接删除该文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:22:57.213

据我说，你应该允许这两个选项（我知道你已经问过这个或那个）。为什么要强制用户首先下载 XML 并将其上传到您的网站？

因此，如果他们在本地有 XML 文件，他们将上传。如果他们有链接，您可以从您的脚本中获取它。

没什么大不了的，对吧？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T14:20:00.643

如果您使用 XML 一次，“让用户提供他们的 XML 文件的 URL”。:)

# iphone - 如何反转 NSMutableData 的顺序

> ID：11760908
> 
> 赞同：0
> 
> 时间：2012-08-01T13:58:22.700
> 
> 标签：iphone, objective-c, audio, reverse, nsmutabledata

我想反转`NSMutableData`.

我正在从音频文件生成 nsmutabledata 对象。并使用数据播放它。我的目的是反向播放音频。

如果我能扭转局面，`NSMutableData`我就会成功。

这是我的代码

```
NSString *inputVideoPath = [[NSBundle mainBundle] pathForResource:@"chalne" ofType:@"mp3"];

NSMutableData *wave=[NSMutableData dataWithContentsOfURL:[NSURL fileURLWithPath:inputVideoPath]];

avPlayer = [[AVAudioPlayer alloc] initWithData:wave error:nil ];
[avPlayer prepareToPlay];
[avPlayer play]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T14:07:47.763

简单地颠倒位的顺序是行不通的，因为声音数据的字节流具有特定的格式。您需要反转样本，而不是整个字节流。但是，至于回答“如何反转 NSData 的字节”，这应该可以工作（打出来，可能有错别字）：

```
NSData *myData;
const char *bytes = [myData bytes];
char *reverseBytes = malloc(sizeof(char) * [myData length]);
int index = [myData length] - 1;
for (int i = 0; i < [myData length]; i++)
    reverseBytes[index--] = bytes[i];
NSData *reversedData = [NSData dataWithBytes:reverseBytes length:[myData length]]
free(reverseBytes); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T18:30:31.780

我修复了上面的示例并对其进行了测试。现在它可以在一个类别中使用：

```
- (NSData*) reversedData
{
    NSData *myData = self;

    const char *bytes = [myData bytes];

    NSUInteger datalength = [myData length];

    char *reverseBytes = malloc(sizeof(char) * datalength);
    NSUInteger index = datalength - 1;

    for (int i = 0; i < datalength; i++)
        reverseBytes[index--] = bytes[i];

    NSData *reversedData = [NSData dataWithBytesNoCopy:reverseBytes length: datalength freeWhenDone:YES];

    return reversedData;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-26T15:00:54.690

```
-(NSData *)reverseData
{
    NSMutableData *data = [[NSMutableData alloc] init];
    for(int i = (int)self.length - 1; i >=0; i--){
        [data appendBytes: &self.bytes[i] length:1];
    }
    return [data copy];
} 
```

# windows - 修剪前导字符并让我保存在我想要的位置的批处理文件

> ID：11760911
> 
> 赞同：0
> 
> 时间：2012-08-01T13:58:36.237
> 
> 标签：windows, batch-file

我有（并且将有）几个文本文件，需要从每行的前面修剪前 12 个字符。理想情况下，我想要一个批处理文件，在其中输入文件的名称和路径，脚本运行，文件保持相同的名称和位置，或相同的位置，然后在文件名末尾添加“_clean” . 或者，我将 txt 文件放在批处理文件中，或者发生上述两件事之一。

这可能吗？

似乎你可以接近这些例子：

[http://social.technet.microsoft.com/Forums/nl/ITCG/thread/2a14d04c-c38b-4a89-95a2-e24aa586849c](http://social.technet.microsoft.com/Forums/nl/ITCG/thread/2a14d04c-c38b-4a89-95a2-e24aa586849c)

[使用 Windows 批处理从文件中删除尾随空格？](https://stackoverflow.com/questions/9310711/dos-batch-remove-trailing-spaces-from-a-file)

**编辑**

有人帮助我做到了这一点：

```
@echo off 
setlocal enableextensions 
set INFN=%~1 
set OUTFN=%INFN%_clean 
if exist "%OUTFN%" del "%OUTFN%" 
for /f "tokens=1*" %%c in ('type "%INFN%"') do ( 
>> "%OUTFN%" echo %%c %%d 
) 
endlocal 
```

2个问题：

1) 前 12 个字符中有一些文本，所以我需要一些能将前 12 个字符完全切掉的东西。

每行以 2-3 个字符开头，然后是 9-10 个空格，如下所示：

```
99*10spaces*Text 
```

或者

```
100*9spaces*Text 
```

我只需要文本部分

2) 保存输出文件时，它会在 .txt 扩展名后附加 _clean 保存，即使文件扩展名隐藏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-10T17:06:05.970

DragAndDrop.bat：看起来一个很好的解决方案是使用单个 .vbs 文件 (DragAndDropTrim12Add_clean.vbs) 中的检查和平衡 (what-if) 功能的单个 .bat 文件 (DragAndDrop.bat)。请参阅下面两个文件的语法。一些额外的脚本被用来保持脚本行相当短。这已更新到 1.1 版，它添加了一个功能，让用户可以选择通过键入新的目标目录来指定。默认有新文件（复制或重命名）假定旧文件的路径。如果选中命令窗口属性快速编辑模式复选框，则可以轻松粘贴到新的目标目录中。输入提示中的向上箭头也将带您返回之前的输入。如果您尝试在非 cScript 模式下运行 DragAndDropTrim12Add_clean.vbs，则会生成弹出消息，但除外，所有用户的焦点都可以保留在命令行上。如果您选择修改 DragAndDrop.bat 文件，请小心避免在 set 命令上添加尾随空格。还建议继续使用 setlocal 调用以减少对周围环境的影响。

```
:DragAndDropDotBat
 @Title DragAndDrop.bat
  @rem Rev 1.1 11/10/2013 to add optional user specified target directory.
  @rem Labels are followed with "rem :LabelName" for easy GoTo troubleshooting. 
  @rem Script works best if CMD window buffer width set above file lengths.
  @echo off
  @echo ******* THIS IS FILE %0 %DATE% %TIME: =0% ********
  @echo User Choices are not case sensitive.
  @echo Leading or trailing white spaces are trimmed in derived names.
  @echo If Notepad OldFile is selected, the process will loop and run again.

   setlocal
    REM YOU MUST MANUALLY EDIT AND SET THE NEXT LINE PATH!!!!!
     Set FileToCall="x:\Scripts\DragAndDropTrim12Add_clean.vbs"
      Set BatNewFileTargetDir="UseOldFilePath"
       Set Per0=%0
        Set Per0=%Per0:"=%
         Set ProCount=0
          prompt :

:RunProcess
 rem :RunProcess
  Set /A ProCount=%ProCount% + 1

:SameAgain
 rem :SameAgain
  @echo off
   Set BatUserCho=S
    Set ProCntZeroFill=000%ProCount%
     Set strBatMode=
      Set strBatOFFP=
       Set strBatOFNm=
        Set strBatNFFP=
         Set strBatNFNm=
          Set strBatMsgLine0=
           Set BatNewFileTargetDir=%BatNewFileTargetDir%

 @echo ----------------------------------------------------------------
  @echo Process Cmd.%ProCntZeroFill:~-3% for file:  %1
   @echo Key-in e to exit, r to run, s to skip, n to notepad, t to new target dir :
    rem ECHO on
     For /f "tokens=1 delims=" %%a in ('cScript //NoLogo %FileToCall% %1') Do %%a
      If Not #%strBatMode%#==#BatCopyOldToNewThenEraseOld# GoTo PresentUserChoice
       Echo Old File = %strBatOFFP%
        dir "%strBatOFFP%"|findstr /i "%strBatOFNm%"
         Echo New File = %strBatNFFP%
          dir "%strBatNFFP%"|findstr /i "%strBatNFNm%"

:PresentUserChoice
 rem :PresentUserChoice
  @Set /P BatUserCho=%strBatMsgLine0% - Cmd.%ProCntZeroFill:~-3%:[%BatUserCho%]: 
   echo :%BatUserCho%:run-now|findstr /i ":R:" && GoTo RunNow
    echo :%BatUserCho%:exit-now|findstr /i ":E:" && GoTo DoExit
     echo :%BatUserCho%:skip-now|findstr /i ":S:" && GoTo ShiftNow
      echo :%BatUserCho%:notepad-now-and-rerun|findstr /i ":N:" && GoTo NotepadNow
       echo :%BatUserCho%:set-new-target-dir|findstr /i ":T:" && GoTo SetNewTarget
       %echo User Choice: %BatUserCho% not recognized, try again.
        GoTo SameAgain

:RunNow
 rem :RunNow
  If #%strBatMode%#==#BatCopyOldToNewThenEraseOld# GoTo BatCopyOldToNewThenEraseOld
   If #%strBatMode%#==#MsgThenExit# GoTo DoExit
    If #%strBatMode%#==#BatRenameOldToNew# GoTo BatRenameOldToNew
     If #%strBatMode%#==#MsgThenSkip# GoTo ShiftNow

:BatRenameOldToNew
 rem :BatRenameOldToNew
  dir "%strBatOFFP%"|findstr /i "%strBatOFNm%" 
   @echo on
    rename "%strBatOFFP%" "%strBatNFNm%"
     @echo off
      dir "%strBatNFFP%"|findstr /i "%strBatNFNm%"
       If Not Exist "%strBatNFFP%" GoTo BatRenameOldToNewAndNewNotFound
        GoTo ShiftNow

:BatRenameOldToNewAndNewNotFound
 rem :BatRenameOldToNewAndNewNotFound
  @echo New file not found: "%strBatNFFP%" 
   @echo ***** This is a rename failure. ******
    @echo off
     GoTo ShiftNow

:BatRenameOldToNewEnd
 rem :BatRenameOldToNewEnd

:BatCopyOldToNewThenEraseOld
 rem :BatCopyOldToNewThenEraseOld
  dir "%strBatOFFP%"|findstr /i "%strBatOFNm%" 
   dir "%strBatNFFP%"|findstr /i "%strBatNFNm%"
    @echo on
     Copy /-Y "%strBatOFFP%" "%strBatNFFP%"
      @echo off
       dir "%strBatOFFP%"|findstr /i "%strBatOFNm%" 
        dir "%strBatNFFP%"|findstr /i "%strBatNFNm%"
         If Not Exist "%strBatNFFP%"  GoTo BatCopyOldToNewAndNewNotFound
          @echo on
           Erase /P "%strBatOFFP%"
            dir "%strBatOFFP%"|findstr /i "%strBatOFNm%" 
             @echo off
              GoTo ShiftNow

:BatCopyOldToNewAndNewNotFound
 rem :BatCopyOldToNewAndNewNotFound
  @echo New file not found: "%strBatNFFP%" 
   @echo ***** The Delete process was skipped. ******

:BatCopyOldToNewThenEraseOldEnd
 ren :BatCopyOldToNewThenEraseOldEnd

:NotepadNow
 rem :NotepadNow
  rem Notepad FileName will hold bat file, Start Notepad will move on.
   echo on
    @rem Start Notepad "%strBatOFFP%"
     Notepad "%strBatOFFP%"
      @echo off
       GoTo SameAgain

:NotepadNowEnd
 rem :NotepadNowEnd

:SetNewTarget
 rem :SetNewTarget
  echo off
   echo ===============================================
    echo TargetDir=%BatNewFileTargetDir%
     echo Key-in your new targer directory on next line or s to skip:
      Set /P BatTrialTarget=-New Target : 
       echo ::%BatTrialTarget%:skip-now|findstr /i "::S:" && GoTo SameAgain
        Set BatTrialTarget=%BatTrialTarget:"=%
         Set BatTrialTarget=%BatTrialTarget:\\=\%
          Set BatTrialTarget=%BatTrialTarget%#:#
           Set BatTrialTarget=%BatTrialTarget: #:#=#:#%
            Set BatTrialTarget=%BatTrialTarget:\#:#=#:#%
             Set BatTrialTarget=%BatTrialTarget:#:#=%
              dir "%BatTrialTarget%"|findstr /i "Directory.of" && GoTo GoodTDir
               echo This directory not found: "%BatTrialTarget%"
                GoTo SetNewTarget

:GoodTDir
 rem :GoodTDir 
  Set BatNewFileTargetDir="%BatTrialTarget%"
   GoTo SameAgain

:SetNewTargetEnd
 rem :SetNewTargetEnd

:RunNowEnd
 rem RunNowEnd

:ShiftNow
 rem :ShiftNow
  shift
   If #:#%1#:#==#:##:# GoTo DoPause
    GoTo RunProcess

:DoExit
 rem :DoExit
  @echo off
   rem Comment out with rem the next four lines if not wanted.
    echo Call "%Per0%" %1 %2 %3 %4 %5 %6 %7 %8 %9>"%TEMP%\ResumeNext9.bat"
     echo Call "%Per0%" %*>"%TEMP%\ResumeAll.bat"
      echo To Resume: Call "%TEMP%\ResumeNext9.bat"
       echo Or Resume: Call "%TEMP%\ResumeAll.bat"
        endlocal
         ping -n 3 localhost>nul
          GoTo DragAndDropDotBatEnd

:DoPause
 rem :DoPause
  @echo ----------------------------------------------------------------
   echo File %Per0% 
    echo has completed input values [%ProCntZeroFill:~-3%]
     @echo ----------------------------------------------------------------
      endlocal
       Pause

:DragAndDropDotBatEnd

'''DragAndDropTrim12Add_clean.vbs
'''Rev 1.1 11/10/2013 to add optional user specified target directory.
'''Problem Statement: http://stackoverflow.com/questions/11760911/
'''batch-file-that-trims-leading-characters-and-lets-me-save-where-i-want
'''I have (and will have) several text files that need the first 12 characters 
'''trimmed from the front of every line. Ideally, I'd like a batch file where 
'''I input the name and path of the file, the script runs, the file keeps its 
'''same name and location, or same location and you add a "_clean" on the end 
'''of the file name. Or, I drop the txt file on the batch file either one of 
'''the 2 things described above happens.
'''Is this possible?

'''Assuming the existing Directory and File structures look like this:
'''x:\aaa\bbb\c c\2013_11_05_aMyTextFile 05.txt
'''x:\aaa\bbb\c c\2013_11_05_aMyTextFile001.txt
'''x:\aaa\bbb\c c\2013_11_05_aMyTextFile002.txt
'''x:\aaa\bbb\c c\2013_11_05_aMyTextFile003.txt
'''x:\aaa\bbb\c c\2013_11_05_aMyTextFile004.txt
'''x:\aaa\bbb\c c\2013_11_05_bMyTextFile002.txt

'''And you want then to look like this:
'''x:\aaa\bbb\c c\MyTextFile 05_clean.txt
'''x:\aaa\bbb\c c\MyTextFile001_clean.txt
'''x:\aaa\bbb\c c\MyTextFile002_clean.txt
'''x:\aaa\bbb\c c\MyTextFile003_clean.txt
'''x:\aaa\bbb\c c\MyTextFile004_clean.txt

'''And supporting scripts are:
'''x:\Scripts\DragAndDrop.bat
'''x:\Scripts\DragAndDropTrim12Add_clean.vbs

'''To use from File Explorer:
'From File Explorer, highlight the existing files, then right click and choose "Copy" –
'''then drop (paste) them onto x:\Scripts\DragAndDrop.bat
'''This will walk you through the renaming processes.

'DragAndDrop.bat  will call DragAndDropTrim12Add_clean.vbs and invoke the following 
'''     Check processes:
'''1    DragAndDropTrim12Add_clean.vbs is called in CScript mode.
'''2    Script command line values are being passed from bat file to vbs file
'''3    Modified values are passed back to bat file and set by the For loop.
'''4    New trimmed and appended file name does not conflict with an existing file.
'''5    Files passed on the drop-generated command line still exist.
'''6    File to be processed does not already contain the "_clean" string
'''7    File to be processed can support having 12 characters trimmed.
'''8    As each file is processed, the script gives several "User Choice" options. 

'''Bat File Values to pass
'''Set strBatMode=MsgThenExit,MsgThenSkip,BatCopyOldToNewThenEraseOld,BatRenameOldToNew
'''Set strBatOFFP=strOldFileFullPath
'''Set strBatOFNm=strOldFileName
'''Set strBatNFFP=strNewFileFullPath
'''Set strBatNFNm=strNewFileName
'''Set strBatMsgLine0=Note:Do not use double quote.

   Option Explicit ''Requires that you dimension all variables
   Dim funInStrVal, funLastHitVal, StdOut, StdErr, objFSO, strWScriptArg0 
   Dim intLastHit, intLenMinus, intTrimLeadNum, strTrailString
   Dim objDialog, intReturn, strMsg1, strNewFileFullPath, strNFN, strTrS
   Dim strOldFileFullPath, strOldFilePath, strOldFileName, strOldFileNameNoExt
   Dim strNewFileName, strS, wshShell, strBatNewFileTargetDir

   If InStr(1,LCase(WScript.FullName),"cscript.exe",1) = 0 Then
      Dim objShell, Rsp01
      Set objShell = WScript.CreateObject("WScript.Shell")
      Rsp01 = objShell.Popup("This script must be run using cScript" _
      & vbCrLf & "Error from " & Wscript.ScriptFullName & vbCrLf _
      & "Use: cScript //NoLogo """ & Wscript.ScriptFullName _
      & """",10,"     Error Because Not Using cScript " _
      & "(10 sec timeout)",vbOKOnly + vbCritical)
      Set objShell = Nothing
      Wscript.Quit
   End If

   intTrimLeadNum = 12
   strTrailString = "_clean"
   ''Set StdIn = WScript.StdIn
   Set StdOut = WScript.StdOut
   Set StdErr = WScript.StdErr
   Set wshShell = CreateObject( "WScript.Shell" )

   strBatNewFileTargetDir = wshShell.ExpandEnvironmentStrings( "%BatNewFileTargetDir%" )
   Set wshShell = Nothing
   strBatNewFileTargetDir = Replace(strBatNewFileTargetDir,"""","") ''remove dq

   If WScript.Arguments.Count > 0 Then
      strWScriptArg0=Trim(WScript.Arguments.Item(0))
   Else
      strMsg1="NO Command Line" _
      & " value passed to: " & Wscript.ScriptFullName
      StdErr.WriteLine "WARNING: " & strMsg1 
      StdOut.WriteLine "Set BatUserCho=E"
      StdOut.WriteLine "Set strBatMode=MsgThenExit"
      StdOut.WriteLine "Set strBatMsgLine0=.........................Press Enter to Exit"
      Wscript.Quit
   End If

   Set objFSO = CreateObject("Scripting.FileSystemObject")

   If objFSO.FileExists(strWScriptArg0) = False Then
      strMsg1 = strWScriptArg0 & " is not a valid file name."
      StdErr.WriteLine "WARNING: " & strMsg1 
      StdOut.WriteLine "Set BatUserCho=S"
      StdOut.WriteLine "Set strBatMode=MsgThenSkip"
      StdOut.WriteLine "Set strBatMsgLine0=.........................Press Enter to Skip"
      Set objFSO = Nothing
      Wscript.Quit
   End If

      strOldFileFullPath = strWScriptArg0
      strOldFilePath = FunLeftOrRtStr(strOldFileFullPath, "\", "L")
      strS = strOldFileFullPath  ''Short String for using less columns
      strOldFileName = Right(strS,Len(strS) - (FunLastHitInt(strS, "\") + 1))
      strOldFileNameNoExt = Trim(FunLeftOrRtStr(strOldFileName, ".", "L"))
      strNFN=strOldFileNameNoExt
      strTrS=strTrailString &  "." & FunLeftOrRtStr(strOldFileName, ".", "R")

   If Len(strOldFileNameNoExt) <= intTrimLeadNum Then 
      strMsg1 = strOldFileFullPath & " Base File Name is:" & vbCrLf & Len(strOldFileNameNoExt) _
      & " characters which is too short for the " & intTrimLeadNum & " char trim."
      StdErr.WriteLine "WARNING: " & strMsg1 
      StdOut.WriteLine "Set BatUserCho=S"
      StdOut.WriteLine "Set strBatMode=MsgThenSkip"
      StdOut.WriteLine "Set strBatMsgLine0=.........................Press Enter to Skip"
      StdOut.WriteLine "Set strBatOFFP=" & strOldFileFullPath
      StdOut.WriteLine "Set strBatOFNm=" & strOldFileName
      Set objFSO = Nothing
      Wscript.Quit
   End If

      ''Remove any leading or trailing white space with Trim()
      strNewFileName = Trim(Right(strNFN, Len(strNFN) - intTrimLeadNum)) & strTrS

 StdErr.WriteLine "strBatNewFileTargetDir=" & strBatNewFileTargetDir

   If strBatNewFileTargetDir = "UseOldFilePath" Or InStr(1,strBatNewFileTargetDir, "\") = 0 Then
      strNewFileFullPath = strOldFilePath & "\" & strNewFileName
   Else
      strNewFileFullPath = strBatNewFileTargetDir & "\" & strNewFileName
   End If

   If objFSO.FileExists(strNewFileFullPath) = True Then
      StdErr.WriteLine "WARNING: " & strNewFileName & " existing."
      StdOut.WriteLine "Echo You can Copy Old and overwrite Existing"
      StdOut.WriteLine "Echo You will be prompted for the Overwrite:"
      StdOut.WriteLine "Echo You will also be prompted for the Delete:"
      StdOut.WriteLine "Set strBatMode=BatCopyOldToNewThenEraseOld"
      StdOut.WriteLine "Set BatUserCho=R"
      StdOut.WriteLine "Set strBatMsgLine0=..Press Enter to Copy Old to New Then Delete Old"
      StdOut.WriteLine "Set strBatOFFP=" & strOldFileFullPath
      StdOut.WriteLine "Set strBatOFNm=" & strOldFileName
      StdOut.WriteLine "Set strBatNFFP=" & strNewFileFullPath
      StdOut.WriteLine "Set strBatNFNm=" & strNewFileName
      Set objFSO = Nothing
      Wscript.Quit
   Else
      StdOut.WriteLine "Echo Old File = " & strOldFileFullPath
      If InStr(1,strOldFileName, strTrailString) > 0 Then
         strMsg1 = strOldFileName & " already contains: " & strTrailString
         StdErr.WriteLine "***WARNING: " & strMsg1 & "***"
         StdOut.WriteLine "Echo New File Would = " & strNewFileFullPath
         StdOut.WriteLine "Set BatUserCho=S"
         StdOut.WriteLine "Echo...........Key-in r to RUN and Rename Old to New. "
         StdOut.WriteLine "Set strBatMsgLine0=................... or Press Enter to Skip" 
      Else
         StdOut.WriteLine "Echo New File = " & strNewFileFullPath
         StdOut.WriteLine "Set BatUserCho=R"
         StdOut.WriteLine "Set strBatMsgLine0=...........Rename Old to New---Press " _
         & "Enter to RUN"
      End If
      StdOut.WriteLine "Set strBatMode=BatRenameOldToNew"
      StdOut.WriteLine "Set strBatOFFP=" & strOldFileFullPath
      StdOut.WriteLine "Set strBatOFNm=" & strOldFileName
      StdOut.WriteLine "Set strBatNFFP=" & strNewFileFullPath
      StdOut.WriteLine "Set strBatNFNm=" & strNewFileName
   End If

   If 1 = 2 Then  ''''Change to 1 = 1 for testing.  StdErr will not go to bat file
      Dim strInVal, strTFileName, strTNewFile, strTFileNameNoExt, strTFileExt
      ''strInVal = "X:\aaa\bbb\c c\12345.678"
      strInVal = strWScriptArg0
      intLastHit = FunLastHitInt(strInVal, ".")
      StdErr.WriteLine " :  strInVal=" & strInVal
      StdErr.WriteLine " : Path+File=" & Left(strInVal,intLastHit)
      StdErr.WriteLine " : Ext=" & Right(strInVal,Len(strInVal) - intLastHit)
      StdErr.WriteLine " : Path=" & FunLeftOrRtStr(strInVal, "\", "L")
      StdErr.WriteLine " :      FileName=" & FunLeftOrRtStr(strInVal, "\", "R")
      strTFileName=Right(strInVal,Len(strInVal) - (FunLastHitInt(strInVal, "\") + 1))
      strTFileNameNoExt = FunLeftOrRtStr(strTFileName, ".", "L")
      strTFileExt="." & FunLeftOrRtStr(strInVal, ".", "R")
      StdErr.WriteLine " : FileNameNoExt=" &  strTFileNameNoExt
      StdErr.WriteLine " :           Ext=" & strTFileExt
      strTNewFile=Right(strTFileNameNoExt, Len(strTFileNameNoExt) - intTrimLeadNum)
      StdErr.WriteLine " :       NewFile=" & strTNewFile & strTrailString & strTFileExt

   End If ''If 1 = 2 Then

   Function FunLastHitInt(funInputString, funHitChar)
    '''Dim funInStrVal, funLastHitVal (Required at top of script)
    '''For Dir Use: Left(strFullPath,FunLastHitInt(strFullPath, "\"))
    ''For File Use: 
    ''Right(strFullPath,Len(strFullPath) - (FunLastHitInt(strFullPath, "\") + 1))
    If InStr(1,funInputString, funHitChar) > 0 Then
       funInStrVal = 2
       Do Until funInStrVal = 1 ''funLastHitVal will eventually = 0 + 1
          funLastHitVal = InStr(funInStrVal, funInputString, funHitChar)
          If funLastHitVal > 0 Then
             FunLastHitInt = funLastHitVal - 1
          End If
          funInStrVal = funLastHitVal + 1
          ''Wscript.Echo "funLastHitVal=" & funLastHitVal
       Loop
    Else
       FunLastHitInt = 0
    End If
   End Function ''Function FunLastHitInt(funInputString, funLastChar)

   Function FunLeftOrRtStr(funFullPathLR, funHitCharLR, funLorR)
    If InStr(1,funFullPathLR,funHitCharLR) = 0 Then
       FunLeftOrRtStr = funFullPathLR
    ElseIf UCase(funLorR) = "R" Then
       intLenMinus = (FunLastHitInt(funFullPathLR, funHitCharLR) + Len(funHitCharLR))
       FunLeftOrRtStr = Right(funFullPathLR,Len(funFullPathLR) - intLenMinus)
    Else
       FunLeftOrRtStr = Left(funFullPathLR,FunLastHitInt(funFullPathLR, funHitCharLR))
    End If
   End Function

  Set objFSO = Nothing
  Wscript.Quit

'''DragAndDropTrim12Add_clean.vbsEnd 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T16:10:54.540

如果您只想截断输入文件每一行的前 12 个字符，`cut`来自**UnxUtils** [http://unxutils.sourceforge.net/](http://unxutils.sourceforge.net/)是您的朋友。

看看`cut --help`然后试试这个简单的单行 bat 文件

```
cut -c13- %1 >%~dpn1_CLEAN%~x1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T19:18:38.637

这是一种使用本机批处理命令修剪每一行的方法。

## 更新

修改了构建输出文件名的代码。

```
@ECHO OFF

SETLOCAL EnableExtensions EnableDelayedExpansion

SET INFN=%1
SET OUTFN=%~n1_clean%~x1

IF EXIST "%OUTFN%" DEL "%OUTFN%"

FOR /F "tokens=* usebackq" %%c IN (%INFN%) DO (
  SET RESULT=%%c
  SET RESULT=!RESULT:~12!
  REM Displays the trimmed line in the console window
  ECHO !RESULT!
  REM Writes the trimmed line to the output file
  ECHO !RESULT!>>"%OUTFN%"
)

ENDLOCAL 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T18:05:03.947

我把这个问题放到另一个网站上，以下是我们最终完全按照我想要的方式工作：

```
@echo off
if not exist "%~1" (echo Error & pause & exit /b 1) 
echo do until wsh.stdin.atendofstream:wsh.echo mid(wsh.stdin.readline, 9):loop> %temp%\_t.vbs
more /T8 < "%~1" | cscript //nologo %temp%\_t.vbs > "%~dpn1_clean%~x1"
del %temp%\_t.vbs
del %1 
```

再次感谢大家的帮助。

# java - Eclipse 项目“MyClass 无法解析为类型”

> ID：11760917
> 
> 赞同：4
> 
> 时间：2012-08-01T13:58:55.960
> 
> 标签：java, eclipse

我有一个在 Eclipse Indigo 中工作的 Java 项目。看似随机（但通常在文件保存后），IDE 将停止识别我的类，唯一的解决方案是清理项目。例如，我`FailedJobManager.java`在包中有一个类，`com.ccn.sec`它引用了`DistributionJob.java`包中的 a `com.ccn.sec.domain`。当问题出现时，我会在这`FailedJobManager`句话中得到一个错误：`DistributionJob cannot be resolved to a type`. 导入`DistributionJob`也报错，说导入无法解决。如果我进行清理，错误就会消失。

我不介意偶尔点击一次清洁，但是当我必须每 2 分钟点击一次时，它会很快变老。我尝试过使用构建路径顺序，但无济于事。

以前有没有其他人经历过这种情况，如果有，你做了什么来解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T15:09:16.880

我发现了问题。我有一个 ANT 构建，它将已编译的类输出到 Eclipse 构建输出其已编译类的同一构建文件夹。在对项目进行 ANT 构建后，ANT 编译的类将被放入 build/WEB-INF/classes。随后修改文件然后保存该文件将触发 Eclipse 构建，该构建会将 Eclipse 编译的类放入 build/classes 中，从而生成包含两组相同类的构建文件夹。这显然给 Eclipse 编译器造成了冲突，给了我“......无法解析为类型”错误。将 ANT 构建文件夹移动到专用文件夹解决了该问题。

# android - Listview在android中没有项目？

> ID：11760919
> 
> 赞同：-1
> 
> 时间：2012-08-01T13:58:59.240
> 
> 标签：android, android-listview

> **可能重复：**
> [当 ListView 为空时如何显示空视图？](https://stackoverflow.com/questions/3771568/how-to-show-empty-view-when-listview-is-empty)

我有一个关于一项活动的列表视图。listview 从 db 绑定。因此，如果 db 没有结果，那么我如何在 android 中显示“无项目”代替 listview。我已经完成了如下操作，但它在上侧显示 Empty_list，我希望它在 listview 的同一位置。

```
public TextView emptyshow;
lstview.setAdapter(adapter);
emptyshow=(TextView)findViewById(android.R.id.empty);
lstview.setEmptyView(findViewById(android.R.id.empty)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T14:02:01.570

从文档

> 或者，您的自定义视图可以包含任何类型的另一个视图对象，以便在列表视图为空时显示。这个“空列表”通知器必须有一个 id “android:id/empty”。请注意，当存在空视图时，列表视图将在没有数据显示时隐藏。

因此，在您的布局中声明一个带有 id 的可选视图：

```
android:id/empty 
```

并相应地更改其可见性：

# php - 从电子邮件标题转换数据

> ID：11760924
> 
> 赞同：7
> 
> 时间：2012-08-01T13:59:27.547
> 
> 标签：php, date-format, email-headers

有谁可以帮助我如何从电子邮件标题转换数据？

我有来自电子邮件标题的下一个日期格式： `Wed, 28 Apr 2010 21:59:49 -0400`

我需要将它们转换为 mysql 日期或时间戳。谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-01T14:03:04.770

您应该[`DateTime`](http://php.net/datetime)为此使用，特别是[`DateTime::createFromFormat()`](http://php.net/datetime.createfromformat)：

```
$str = 'Wed, 28 Apr 2010 21:59:49 -0400';
$date = DateTime::createFromFormat( 'D, d M Y H:i:s O', $str); 
```

现在，您有一个 Date 对象`$date`，您可以获取 unix 时间戳（如果这是您想要的），或者您可以将其格式化为 MySQL 的日期。

```
echo $date->getTimestamp(); // Outputs: 1272506389
echo $date->format( 'Y-m-d H:i:s'); // For MySQL column, 2010-04-28 21:59:49 
```

[您可以在演示](http://codepad.viper-7.com/Ha8AjI)中看到它的工作原理。

# objective-c - 在当前视图控制器下加载视图控制器

> ID：11760926
> 
> 赞同：0
> 
> 时间：2012-08-01T13:59:34.103
> 
> 标签：objective-c, ios, uiviewcontroller

这甚至可能吗？我有 3 个 UIViewController：主屏幕 (A)、用户点击按钮进入的屏幕 (B) 和登录屏幕 (C)。如果用户未登录，它将从 A -> C 进入，当他们登录时，它应该从 C -> B 进入，但我需要在 C 下方和 C 关闭之前显示 B。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:28:05.787

您可以在关闭 C 之前从 A 和 Push B 的模态视图中呈现 C。如果您想使用 C 的模态呈现（这对我来说似乎更好）。

即使不是这样，您仍然可以在 C 出现之后或在它开始消失之前更改 navigationController 的 viewController。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:07:54.077

您可以在没有动画的情况下以模态方式呈现视图控制器。

```
[self presentViewController:viewControllerC animated:NO completion:nil]; 
```

您可以这样做，`didFinishLaunchingWithOptions:`这意味着您的登录视图控制器将在启动后立即出现。然后当用户成功登录后，您只需调用

```
[self dismissModalViewControllerAnimated:YES]; 
```

在 C 视图控制器（或任何一个是登录控制器）上，它向下滑动以显示主应用程序。这是一个很酷的效果。您还可以选择更改视图控制器的过渡样式，使其水平翻转以在登录后显示应用程序等。

```
viewControllerC.modalTransitionStyle = UIModalTransitionStyleCoverVertical; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T14:10:16.860

如果您从主屏幕调用按钮和登录屏幕的 UIView，您可以执行 [self.view sendSubViewToBack:subview];

# wordpress - wordpress 重新设计上的 URL 映射

> ID：11760928
> 
> 赞同：0
> 
> 时间：2012-08-01T13:59:36.237
> 
> 标签：wordpress, dns

我最近在 wordpress 上重新设计了一个网站。重新设计位于域的子文件夹中。当我按照本教程“使用预先存在的子目录安装”（http://codex.wordpress.org/Giving_WordPress_Its_Own_Directory）翻转新网站时，一切都按计划进行。

但是，当我在 url 中使用 www 导航到该站点时，我仍然得到旧站点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:30:55.037

这可能是您的主机设置存在的问题。听起来您的“A”记录设置不正确。查看此 GoDaddy 支持文章以获取示例。它在所有主机上都是相似的。

[http://support.godaddy.com/help/article/680/managing-dns-for-your-domain-names](http://support.godaddy.com/help/article/680/managing-dns-for-your-domain-names) 单击“添加记录”并阅读。有些主机会要求您有一个“@”和一个“www”记录，以使站点直接到同一个地方，无论有没有 www。

另请记住，更新记录可能需要任何时间。

如果一切都失败了，给你的主人打电话！

# java - 增加 iPhone 应用程序上的应用程序徽章编号

> ID：11760936
> 
> 赞同：0
> 
> 时间：2012-08-01T13:59:55.800
> 
> 标签：java, iphone, push-notification

我使用 Java pns 来推送我的应用程序，这就是我使用它的方式：

```
 public static PushedNotifications Push(String token,String message,String Sound,int badge) throws CommunicationException, KeystoreException{    
         String key=PushUtil.class.getResource("cert.p12").getPath();
         PushedNotifications pn= Push.combined(message, badge, Sound, key, "Pass", true, token);
         System.out.println("pn: "+pn);
         return pn;         
    } 
```

有没有办法发送通知以增加徽章而不是仅仅设置它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:01:59.793

不是我知道的。徽章编号*只是*一个替代品。如果它旨在反映某种状态，则应在服务器中维护该状态，并始终推送绝对值。

# objective-c - 这种带括号的语法是什么意思？

> ID：11760938
> 
> 赞同：3
> 
> 时间：2012-08-01T13:59:59.183
> 
> 标签：objective-c

我很惊讶在一个objective-c项目中看到以下行代码

```
- (void)methodName
{
    ... some code...

    {
        ... some code
    }

    {
        ... some code
    }

} 
```

内括号代表什么？它们之前似乎没有任何声明。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T14:01:24.060

括号创建一个新的范围。在作用域内定义的变量在作用域结束后将不再存在。我个人用它来分离一些逻辑，使事情更容易阅读。

**示例 1**

此示例演示了无法访问在更狭窄定义的范围内实例化的变量。

```
-(void)blockTestA {
    int j = 25;

    {
        int k = 5;

        // You can access both variables 'j' and 'k' inside this block.
    }

    // You can only access the variable 'j' here.
} 
```

**示例 2**

这个例子演示了如何创建一个新的块作用域允许我们拥有同名的不同变量。[您可以在此处](http://www.techotopia.com/index.php/Objective-C_Variable_Scope_and_Storage_Class)阅读有关范围的更多信息。

```
-(void)blockTestB {
    int j = 25;

    {
        int j = 5;
        NSLog(@"j inside block is: %i", j); // Prints '5'
    }

    NSLog(@"j outside of block is: %i", j); // Prints '25'
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T14:00:56.857

他们创建了一个块作用域。这些块内声明的变量在块外将不可用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-01T14:01:26.720

内括号限制了在其中声明的变量的范围。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-01T14:06:23.373

```
- (void)methodName
{
    ... some code...

    {
      int i;//the scope of i is within this block only
        ... some code
    }

    {
       int i;//the scope of i is within this block only
       ... some code
    }

} 
```

我想这会对你有所帮助。

# android - 按下按钮时突出显示按钮而不使用两个drawable？

> ID：11760943
> 
> 赞同：4
> 
> 时间：2012-08-01T14:00:09.433
> 
> 标签：android, button, drawable

在按下按钮状态时我使用两个可绘制的一个，另一个默认为另一个。所以我只是为了简单的效果而制作了一个新的图像！所以我现在问...

按下该按钮时是否可以在可绘制的按钮上应用（滤色器或任何效果）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-13T10:00:19.310

或者您也可以不使用 setOnClickListner 而是使用 setOnTouchListener 仅使用一张图像来获得所需的效果

```
((Button)findViewById(R.id.testBth)).setOnTouchListener(new OnTouchListener() {

      @Override
        public boolean onTouch(View v, MotionEvent event) {
          switch (event.getAction()) {
          case MotionEvent.ACTION_DOWN: {
              Button view = (Button) v;
              view.getBackground().setColorFilter(0x77000000, PorterDuff.Mode.SRC_ATOP);
              v.invalidate();
              break;
          }
          case MotionEvent.ACTION_UP:
              // Your action here on button click
          case MotionEvent.ACTION_CANCEL: {
              Button view = (Button) v;
              view.getBackground().clearColorFilter();
              view.invalidate();
              break;
          }
          }
          return true;
        }
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T15:29:26.507

如果您的按钮是标准灰色背景，您可以`onClick`在按钮的方法中应用过滤器来更改颜色...

```
import android.graphics.PorterDuff;
button.getBackground().setColorFilter(0xFF00FF00, PorterDuff.Mode.MULTIPLY);  //Green 
```

稍后清除过滤器：

```
button.getBackground().clearColorFilter(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T01:03:43.480

我找到了最好的方法！

```
Drawable drawableNotPressed = button.getBackground(); 
Drawable drawable = drawableNotPressed.getCurrent();

//use a filter 
drawable.setColorFilter(0xF00, Mode.MULTIPLY);
StateListDrawable listDrawable = new StateListDrawable();
listDrawable.addState(new int[] { android.R.attr.state_pressed }, drawable);
listDrawable.addState(new int[] { android.R.attr.defaultValue }, drawableNotPressed );
button.setBackgroundDrawable(listDrawable); 
```

瞧！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T14:18:57.373

您可以尝试在 setOn*Listener 方法之一中更改按钮的样式

# java - 加快 HTML 提取速度

> ID：11760947
> 
> 赞同：0
> 
> 时间：2012-08-01T14:00:22.163
> 
> 标签：java, html, optimization, urlconnection

我正在使用 Java 从网页中获取一大块 HTML。现在我正在使用带有 getInputStream() 的 URLConnection，它正在加载整个页面并且花费的时间比我想要的要长一点。无论如何，它是否可以仅加载我需要的块或排除图像或其他任何可以加速它的东西。任何帮助表示赞赏。谢谢你。

这是一些代码：

```
URL page = new URL("http://www.stackoverflow.com");
URLConnection connection = page.openConnection();
String html = getResponseData(connection);

public static String getResponseData(URLConncetion connection) {
StringBuffer sb = new StringBuffer();
InputStream is = connection.getInputStream();
int count;
while((count=is.read()) != -1){
    sb.append((char)count);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:55:19.040

我认为您可以尝试在该 while 循环中找到实际数据，并在找到后立即中止。

旁注，您的代码只会加载 HTML。不是真实的图像。它们不是您在请求页面时获得的响应的一部分。

更新：您还可以缓冲您的输入流。它可以使输入更快。您可以按以下方式执行此操作

```
InputStream is = new BufferedInputStream(connection.getInputStream()); 
```

# android - 三星 Galaxy Tab 2：10.1 - 无法选择“Enter”

> ID：11760948
> 
> 赞同：2
> 
> 时间：2012-08-01T14:00:24.653
> 
> 标签：android, keyboard, keylistener

好的，所以这很愚蠢。我正在使用输入类型为 textPassword 的文本框。

在 Galaxy Tab 2 : 10.1 上：我无法像向下然后左转的箭头那样拿起“完成”按钮。

我正在做以下检查：

```
tv2.setOnKeyListener(new OnKeyListener() {

        @Override
        public boolean onKey(View v, int keyCode, KeyEvent event) {
            if (event.getAction() == KeyEvent.ACTION_DOWN)
            {
                switch (keyCode)
                {
                    case KeyEvent.KEYCODE_DPAD_CENTER:
                    case KeyEvent.KEYCODE_ENTER:
                        performRegister();
                        return true;
                    default:
                        break;
                }
            }
            return false;
        }
    }); 
```

上面的代码在我尝试过的 95% 的设备上都能正常工作，只有 Galaxy Tab 给了我这个问题。我也试过：

```
tv2.setOnEditorActionListener(new OnEditorActionListener() {

        @Override
        public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
            //CODE!!
        }
    }); 
```

但是当我按下按钮时，这些方法都没有被调用。（根本没有调用！不是我没有检查正确的KeyEvent：没有KeyEvent）

这个按钮所做的只是隐藏键盘。

附言。我正在使用带有三星中文 IME 键盘的 Galaxy 标签。v2.0.3

感谢您的帮助：艾登

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T13:57:53.190

尝试使用

```
TextView.setImeOptions(EditorInfo.IME_ACTION_DONE); 
```

那么你应该在你的 OnEditorActionListener 中得到一个回调

# css - emberjs 路由器类活动

> ID：11760949
> 
> 赞同：1
> 
> 时间：2012-08-01T14:00:28.917
> 
> 标签：css, class, ember.js, router, ember-old-router

我知道我可以找到这方面的例子，但我无法将它放入我的代码中而不会出错......只是不知道为什么。

我想从 set class="menu-active" 开始在菜单中的第一个。

```
<li><a {{action gotoAbout}} >About</a></li> 
```

稍后当有人单击菜单的其他位置时，将 class="menu-active" 移动到该位置。

[http://jsfiddle.net/kwladyka/LGArM/3/](http://jsfiddle.net/kwladyka/LGArM/3/)

还有一个额外的问题：你有什么意见可以让我的代码更好吗？

HTML
`<script type="text/x-handlebars" data-template-name="application">
{{view App.NavbarView}}
{{outlet}}
</script>`

```
<script type="text/x-handlebars" data-template-name="navbar">
    <div id="menu" class="grid_12">
        <ul>
            <li><a {{bindAttr class="isAbout:active"}} {{action gotoAbout}} >About</a></li>
            <li><a {{bindAttr class="isProjects:active"}} {{action gotoProjects}} >Projekty</a></li>
            <li><a {{action gotoTechnology}} >Technologie</a></li>
            <li><a {{action gotoContact}} >Kontakt</a></li>
        </ul>
    </div>
</script> 
```

余烬

```
$(function() {

console.log("### emberjs start ###");

App = Em.Application.create({
    rootElement: '#emberjs-container'
});

App.ApplicationController = Em.Controller.extend();
App.ApplicationView = Em.View.extend({
    templateName: 'application'
});

App.NavbarController = Em.Controller.extend({

});
App.NavbarView = Em.View.extend({
    templateName: 'navbar',
});

App.AboutView = Em.View.extend({
    templateName: 'about'
});

App.ProjectsView = Em.View.extend({
    templateName: 'projects'
});

App.TechnologyView = Em.View.extend({
    templateName: 'technology'
});

App.ContactView = Em.View.extend({
    templateName: 'contact'
});

App.Router = Em.Router.extend({
    enableLogging: true,
    location: 'hash',

    root: Em.Route.extend({
        // EVENTS
        gotoAbout: Ember.Route.transitionTo('about'),
        gotoProjects: Ember.Route.transitionTo('projects'),
        gotoTechnology: Ember.Route.transitionTo('technology'),
        gotoContact: Ember.Route.transitionTo('contact'),

        // STATES
        about: Em.Route.extend({
            route: '/',
            connectOutlets: function (router, context) {
                router.get('applicationController').connectOutlet('about');
            }
        }),

        projects: Em.Route.extend({
            route: '/projects',
            connectOutlets: function (router, context) {
                router.get('applicationController').connectOutlet('projects');
            }
        }),

        technology: Em.Route.extend({
            route: '/technology',
            connectOutlets: function (router, context) {
                router.get('applicationController').connectOutlet('technology');
            }
        }),

        contact: Em.Route.extend({
            route: '/contact',
            connectOutlets: function (router, context) {
                router.get('applicationController').connectOutlet('contact');
            }
        })
    })
});

App.initialize();

}); 
```

# sql - oracle 双向分层查询

> ID：11760952
> 
> 赞同：3
> 
> 时间：2012-08-01T14:00:31.650
> 
> 标签：sql, database, oracle

我有一个关于 oracle 分层查询的问题。

假设我有相互关联的单元的关系表，其中 unit1 是父单元，而 unit2 是子单元。

ID UNIT1 UNIT2 其他列

------大量数据--------

假设我正在查看一个单元，现在我想要关于它与其他单元的关系的完整图表/树。

很容易得到相互连接的父母和孩子：

```
 INSERT INTO search_table
 SELECT id
   FROM  mytable
  START  WITH unit_id1 = 12 (or any random unit id)
CONNECT BY nocycle PRIOR unit_id2 = unit_id1
  GROUP BY id; 
```

这是向上移动，类似的是向下移动。现在发生的情况是，例如，当向上移动 1 步时，它不会搜索该单元的子单元，而只会继续搜索父单元。所以基本上我如果父母单位有另一个孩子（不是我们正在寻找的那个）我将无法到达它，因为语法一直只寻找父母。后来它只寻找孩子，而不是这两者的结合。

有没有办法为每个孩子或父母单位，我可以搜索父母和孩子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T07:44:11.727

我不确定你可以用一个查询来做到这一点。
但是您可以分两步轻松完成：

1.  找到你单位的老祖先A（没有父母的那个）
2.  找到 A 的所有孩子

# c# - 我的数据集中的数据没有显示在我的 ReportViewer 中？

> ID：11760953
> 
> 赞同：0
> 
> 时间：2012-08-01T14:00:32.310
> 
> 标签：c#, visual-studio-2010, sql-server-2008, reporting

我有一个在 datagridview 中显示数据的程序。datagridview 中的数据来自数据集中的表。数据在屏幕上看起来不错，所以我决定添加一种打印数据的方法。

我创建了一个新表单，添加了一个报表查看器控件，并设计了报表。我使用我的数据集作为报告的数据源。

我的问题是，当我转到我的报告所在的报告选项卡时，它显示我的报告只有标题，没有数据。就像我的数据集中没有数据一样！

所以，我的问题是，我忘了做什么？数据在那里，它显示在一个表单上（使用 datagridview），但它没有显示在 reportviewer 控件上（只有标题）。

真的没有涉及编码。我刚刚制作了一个新表单，添加了 reportviewer 控件，设计了报表并告诉它使用我的数据集作为数据源。通常，这对我有用。我无法想象为什么它不起作用。

感谢您的任何帮助或建议！

这是我的问题的图像

[http://i.stack.imgur.com/M6NrX.jpg](http://i.stack.imgur.com/M6NrX.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:11:52.857

这很可能是以下两个原因之一：
1\. 您需要在报表数据源中提供 TableName（查看[Datatable 作为 ReportViewer 中](https://stackoverflow.com/questions/11725634/datatable-as-datasource-in-reportviewer)的数据源）
2\. 或者您需要调用 RefreshReport()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-02T06:47:44.677

[https://www.youtube.com/watch?v=hkDIDTNbA6M](https://www.youtube.com/watch?v=hkDIDTNbA6M)

在调用报告之前再次将数据从数据库添加到您的数据集中

```
SqlConnection con = new SqlConnection(@"Data Source=.\SQLEXPRESS;AttachDbFilename=D:\typroject\TYPROJECT\TYPROJECT\logindb.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True");

    billDataSet b1 = new billDataSet();

    SqlDataAdapter s = new SqlDataAdapter("select * from TblOrder",con);

    s.Fill(b1,b1.Tables[0].TableName);

    ReportDataSource rds = new ReportDataSource("orders",b1.Tables[0]);

    this.a.LocalReport.DataSources.Clear();

    this.reportViewer1.LocalReport.DataSources.Add(rds);

    this.reportViewer1.LocalReport.Refresh();

    this.TblOrderTableAdapter.Fill(this.billDataSet.TblOrder, d1.ToString(), 

    d2.ToString(), companyid);

    this.reportViewer1.RefreshReport(); 
```

# localization - Yii 本地化 - CDbMessageSource 示例

> ID：11760954
> 
> 赞同：1
> 
> 时间：2012-08-01T14:00:32.793
> 
> 标签：localization, yii

我是 Yii 的新手。官方文档没有给出 CDbMessageSource 的任何示例。问题：1）如何/在哪里将 CDbMessageSource 设置为我的 MessageSource ？

2）在我当前的应用程序中，我将类别存储在一个表中，并将类别的翻译存储在另一个表中。表结构：

```
CATEGORY
----------  
cat_id  (PK)

CATEGORY_TRANSLATION
--------------------    
cat_id  (FK)
en
ru 
```

现在，如果我介绍子类别，我会以这种方式对 DB 进行建模：

```
SUB_CATEGORY
------------
sub_cat_id (PK) 
cat_id  (FK)

SUB_CATEGORY_TRANSLATION
------------------------
sub_cat_id (FK) 
en
ru 
```

我是否正确理解在 Yii 中，如果我想使用 CDbMessageSource 来存储翻译，那么我需要将 CATEGORY 和 SUB_CATEGORY 合并到一个表中，然后将 CATEGORY_TRANSLATION 和 SUB_CATEGORY_TRANSLATION 合并到另一个表中，以便我得到以下结构（取自这里[http://www.yiiframework.com/doc/api/1.1/CDbMessageSource](http://www.yiiframework.com/doc/api/1.1/CDbMessageSource)）：

```
CREATE TABLE SourceMessage
(
    id INTEGER PRIMARY KEY,
    category VARCHAR(32),
    message TEXT
);
CREATE TABLE Message
(
    id INTEGER,
    language VARCHAR(16),
    translation TEXT,
    PRIMARY KEY (id, language),
    CONSTRAINT FK_Message_SourceMessage FOREIGN KEY (id)
         REFERENCES SourceMessage (id) ON DELETE CASCADE ON UPDATE RESTRICT
); 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T14:07:52.337

### 如何启用`CDbMessageSource`

消息源是一个名为“消息”的[应用程序组件](http://www.yiiframework.com/doc/api/1.1/CApplication)。因此，您可以像配置应用程序配置文件中的任何其他组件一样配置它：

```
array(
    ......
    'components'=>array(
        ......
        'messages'=>array(
            'class'=>'CDbMessageSource',
            // additional parameters for CDbMessageSource here
            ),
        ),
    ),
) 
```

### 消息源和可本地化模型——不是理想的关系

请务必记住，消息源*仅提供已知消息的翻译*。将消息源包含在模型本地化中没有多大意义，因为您将如何使用它？

假设您有一个类别为`id = 1`. 您将如何获得其本地化标题？类似的东西`Yii::t('category', 'title_'.$category->id)`可以工作，但它有点笨拙（不是理想的语法，你必须将你的主键信息“烘焙”到你的显示代码中，等等）。如果您的标题本地化也意味着用户可以修改，这将变得更加复杂。（无论如何，如果您想这样做，那么合并两个翻译表并在填充时使用单独的值`SourceMessage.category`将是可行的方法）。

### 本地化模型的另一种方法

下面简要介绍了如何方便地本地化模型。假设我们有一个`Room`具有可本地化`name`属性的模型。您可以创建一个名为的新表`LocalizedString`以及具有类似于以下结构的相应模型：

```
CREATE TABLE IF NOT EXISTS `localized_string` (
  `Id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `LocaleCode` char(5) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
  `StringTemplate` text CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`Id`,`LocaleCode`),
); 
```

然后，`Room`使用以下关系配置您的模型`LocalizedString`：

```
public function relations()
{
    $localeCode = Yii::app()->getLanguage();

    return array(
        'nameStringTemplate' => array(
            self::BELONGS_TO, 'LocalizedString', 'NameStringTemplateId',
            'condition' => 'nameStringTemplate.LocaleCode = \''.$localeCode.'\''),
    );
} 
```

并添加一个只读属性：

```
public function getName() {
    return $this->nameStringTemplate->StringTemplate;
} 
```

通过这样做，您现在可以`$room->name`在任何地方书写，并且您将自动获取应用程序当前语言的本地化翻译。

有许多细节需要注意，我在这里略过，但这个想法应该是显而易见的。

# php - 将下拉列表值传递给同一页面上的另一个 SELECT 语句

> ID：11760955
> 
> 赞同：0
> 
> 时间：2012-08-01T14:00:34.257
> 
> 标签：php, mysql, variables, drop-down-menu

嗨，谢谢你和我一起看这个。我对使用 PHP 运行 MySQL 选择语句完全陌生。话虽如此，我已经成功地运行了一个 SELECT 语句来填充一个下拉列表......以及另一个 SELECT 语句来填充一个 HTML 表。（这是一个角色扮演游戏）

但这就是我卡住的地方......

我希望下拉选择的值是填充表的第二个选择语句中的“WHERE racename =”值，以便只返回一行而不是所有数据。

这是页面：[http ://www.gamehermit.com/racechoice.php](http://www.gamehermit.com/racechoice.php)

到目前为止，这是我的代码：

```
<?php 

// Make a MySQL Connection 

mysql_connect("localhost", "db_username", "password") or die(mysql_error()); 
mysql_select_db("db_name") or die(mysql_error()); 

$query="SELECT * FROM Races"; 
$result = mysql_query($query); 
echo "<select name=racename>"; 
while($nt=mysql_fetch_array($result)) 
{ 
if ($nt[racename]==$_POST["racename"]) 
$selected="selected"; 
else 
$selected=""; 
echo "<option ".$selected."value=$nt[racename]>$nt[racename]</option>"; 
} 
echo "</select>"; 
echo "<br />"; 

// Get all the data from the "Race" table and create table 

$result2 = mysql_query("SELECT * FROM Races") 
or die(mysql_error()); 

echo "<table border='1'>"; 
echo "<tr> <th>Race Name</th> <th>Might Modifier</th> <th>Valor Modifier</th>         <th>Deftness 

Modifier</th> <th>Insight Modifier</th> <th>Dweomer Modifier</th> </tr>"; 

// keeps getting the next row until there are no more to get 

while($row = mysql_fetch_array( $result2 )) { 
// Print out the contents of each row into a table 
echo "<tr><td>"; 
echo $row['racename']; 
echo "</td><td>"; 
echo $row['modmight']; 
echo "</td><td>"; 
echo $row['modvalor']; 
echo "</td><td>"; 
echo $row['moddeftness']; 
echo "</td><td>"; 
echo $row['modinsight']; 
echo "</td><td>"; 
echo $row['moddweomer']; 
echo "</td></tr>"; 
} 
echo "</table>"; 

?> 
```

我希望这很简单......非常感谢:)

~ 杰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:28:13.280

最好的方法是使用**AJAX**，这样您就不需要传递变量并加载新页面。

但这里是你可以用老式方式做到这一点的方法：

假设您只有一页，并且您将选定的值传递到同一页（需要重新加载页面）

所以假设你的页面是game.php

您需要在此页面中包含一个“跳转菜单”，并在用户从列表中选择某些内容后按下提交按钮

在页面的标题中，您需要使用

```
if(isset($_POST['button_name'])) {

// button pressed.. perform next step and select your new data to fill the table

} else {
// nothing pressed and nothing to be performed load the page normally
} 
```

例如，在“if”的“true”中，您需要从列表中获取传递的变量

```
$var = $_POST['list_name']; 
```

所以现在您有了第二个变量来选择填充表格所需的数据。

完整的代码应该类似于以下 game.php：

```
<?php 
if(!isset($_POST['go_button'])){ //option not selected display list to choose from
// Make a MySQL Connection 

mysql_connect("localhost", "db_username", "password") or die(mysql_error()); 
mysql_select_db("db_name") or die(mysql_error()); 

$query="SELECT * FROM Races"; 
$result = mysql_query($query); 
$num = mysql_numrows($result);
?>

<script type="text/javascript">
function MM_jumpMenuGo(objId,targ,restore){ //v9.0
  var selObj = null;  with (document) { 
  if (getElementById) selObj = getElementById(objId);
  if (selObj) eval(targ+".location='"+selObj.options[selObj.selectedIndex].value+"'");
  if (restore) selObj.selectedIndex=0; }
}
</script>

<form name="form" id="form" action="game.php" method="post">
  <select name="jumpMenu" id="jumpMenu">
  <?php $i=0; while($i<$num) { ?>
    <option value="<?php echo mysql_result($result,$i,'racename_field_value'); ?>"><?php echo mysql_result($result,$i,'racename'); ?></option>
    <?php } ?>
  </select>
  <input type="button" name="go_button" id= "go_button" value="Go" onClick="MM_jumpMenuGo('jumpMenu','parent',0)">
</form>

<?php
echo "<br />"; 
} else { //option selected to get the variable and use it to select data from DB

$var= $_POST['jumpMenu'];

// Get all the data from the "Race" table and create table 

$result2 = mysql_query("SELECT * FROM Races WHERE racename='$var'") 
or die(mysql_error()); 

echo "<table border='1'>"; 
echo "<tr> <th>Race Name</th> <th>Might Modifier</th> <th>Valor Modifier</th>         <th>Deftness 

Modifier</th> <th>Insight Modifier</th> <th>Dweomer Modifier</th> </tr>"; 

// keeps getting the next row until there are no more to get 

while($row = mysql_fetch_array( $result2 )) { 
// Print out the contents of each row into a table 
echo "<tr><td>"; 
echo $row['racename']; 
echo "</td><td>"; 
echo $row['modmight']; 
echo "</td><td>"; 
echo $row['modvalor']; 
echo "</td><td>"; 
echo $row['moddeftness']; 
echo "</td><td>"; 
echo $row['modinsight']; 
echo "</td><td>"; 
echo $row['moddweomer']; 
echo "</td></tr>"; 
} 
echo "</table>"; 
}
?> 
```

我修改了你的代码并添加了一些东西让你开始，如果在尝试加载我写的页面时有任何错误，请原谅我没有尝试它

祝你好运！

# authentication - Yesod auth：将用户重定向到注册页面

> ID：11760958
> 
> 赞同：4
> 
> 时间：2012-08-01T14:00:41.513
> 
> 标签：authentication, haskell, yesod

我正在玩脚手架网站，我想在用户第一次使用 OpenID 或 Google 帐户登录后将其发送到注册页面。

我想出了这个：

```
getAuthId creds = runDB $ do
        x ←  getBy $ UniqueUser $ credsIdent creds
        case x of
            Just (Entity uid _) → return $ Just uid
            Nothing → do
                return $ Just $ Key (PersistInt64 0) 
```

在`HomeR`处理程序中，我检查 UserId 值，在为零的情况下显示注册表单。

这种方法有效，但似乎很老套。处理此类问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T17:19:28.683

我建议将信息分成两个实体：一个`User`跟踪用户凭据的`Profile`实体，一个包含注册信息的实体。例如：

```
User
    ident Text
    UniqueUser ident
Profile
    user UserId
    displayName Text
    UniqueProfile user 
```

在`getAuthId`中，您将返回一个现有的`UserId`，或者如果一个不存在，则创建一个新条目。在`HomeR`中，您将得到是否有`Profile`( `getBy $ UniqueProfile uid`)，如果没有，则显示注册表单。

# android - 什么是 Android 中的 GPS、AGPS、LBS？

> ID：11760962
> 
> 赞同：4
> 
> 时间：2012-08-01T14:00:55.160
> 
> 标签：android, gps, android-location

我正在使用 android（为手机和平板电脑开发应用程序）。我使用**的android版本是2.2。**

在我的应用程序中，我想捕获经度、纬度。据说我的主管使用**GPS、AGPS、LBS捕获位置**

我是安卓新手。我不知道 GPS、AGPS、LBS。

请给我详细信息，这3个有什么区别，优点，缺点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-07T05:25:39.730

不要将 LBS 与 GPS 和 AGPS 进行比较。LBS 代表基于位置的服务。这是在 GPS/AGPS 的帮助下完成的服务。例如，“请求最近的企业或服务，例如 ATM 或餐馆”是用户需要的服务。有许多应用程序可用于提供上述服务。这些应用程序将使用 GPS/AGPS 根据获取的位置为用户查找位置和服务。

因此，任何使用位置服务用户的应用程序都被视为 LBS。

以下是GPS和AGPS之间的区别

GPS 和 A-GPS 之间的区别实际上非常简单。GPS手机带有内置的GPS芯片。GPS是全球定位系统的缩写，通常用于确定设备的位置、速度、方向和时间。因此，例如，在移动电话的情况下，当设备上的 GPS 被激活时，系统将能够在连接三个或更多卫星时对接收器的位置进行三角测量。并且由于它能够计算速度和方向，因此 GPS 也被普遍用作驾驶时的导航设备。

另一方面，A-GPS（辅助 GPS）是为了提高 GPS 的性能而开发的。这在 GPS 芯片可能难以获取卫星信号的环境中尤其有用，例如城市峡谷，或头顶障碍物过多的地方。A-GPS 所做的是利用称为辅助服务器的中介，提供有关小区 ID 或其他数据的信息，以帮助设备识别要连接的正确卫星。尽管某些 A-GPS 解决方案需要主动连接到手机网络，但这缩短了位置锁定所需的时间。

**GPS和AGPS的优缺点：**

GPS的可靠性和准确度高，AGPS低。

AGPS 捕获的位置不如 GPS 准确。

通过 GPS 获取位置既耗时又耗电（电池）等。

希望能帮助到你。有关[A-GPS 的更多详细信息](https://medium.com/ivymobility-developers/understanding-agps-assisted-gps-3ae23cc691ab)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-01T14:08:58.703

*   GPS - 全球定位系统 -> 通过卫星获取您的位置
*   AGPS - 辅助 GPS -> 通过卫星和网络提供商获取您的位置
*   LBS - 基于位置的服务 -> 与获取您的位置没有太大关系。

基本上，在 Android 中，您可以使用以下提供商获取您的位置：

网络：根据您的 wifi 连接获取您的位置。相当快，但不是那么准确的 GPS：根据 GPS 接收器获取您的位置。相当慢，但相当准确

所以你有一个权衡：要么使用网络提供商并快速获得结果，要么使用 GPS 提供商并获得更准确的数据。

在这里阅读更多：

[http://developer.android.com/guide/topics/location/strategies.html](http://developer.android.com/guide/topics/location/strategies.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-10T10:57:59.420

**LBS** - 基于位置的服务

**GPS** - 全球定位系统

**AGPS** - 辅助全球定位系统

**伦敦商学院**

正如 abbas.aniefa 所说，我们不能说 LBS 与 GPS 和 AGPS 的区别。它是使用 GPS/AGPS 来查找位置的服务。Android 为基于位置的服务提供了许多构建块。

**全球定位系统**

GPS，由美国军方运行的全球定位系统。该提供商使用卫星确定位置。根据条件，此提供程序可能需要一段时间才能返回位置修复。

*好处*

*   它将准确地给出我们的位置，

*   它可以在户外位置正常工作。

*缺点*

*   在室内位置可能非常非常慢，

*   它会很快耗尽电池。

*   它会比网络提供商慢。

**全球定位系统**

A-GPS - 辅助 GPS。普通 GPS 可能需要很长时间才能获得定位。出于这个原因，大多数手机公司都关闭了手机中的 GPS，但紧急呼叫和他们向您出售的服务（例如方向）除外。

A-GPS 将归入网络位置提供商类别，因为它使用设备上的 GPS 芯片，以及来自网络（蜂窝网络）的协助来提供快速的初始修复。

*好处*

*   它会给我们的位置非常准确的室内定位，

*   将节省电池的排水，

*   它会比 GPS Provider 更快。

*坏处*

*   我们不能单独使用 GPS。这将取决于网络连接。

**GPS和A-GPS的总体差异**

*全球定位系统*

1.  在设备上使用 GPS 芯片，

2.  对卫星的视线，

3.  需要大约 7 来修复，

4.  需要很长时间才能修复，

5.  不适用于高层建筑。

*全球定位系统*

1.  使用设备上的 GPS 芯片，以及来自网络（蜂窝网络）的协助，以提供快速的初始修复，

2.  非常低的功耗，

3.  非常精准，

4.  在没有任何视线的情况下工作，

5.  取决于支持此功能的运营商和手机（即使手机支持，但网络不支持，则此功能不起作用）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T07:00:48.213

我认为 GPS 是通过卫星通信完成/处理的，没有任何网络服务提供商。
AGPS 是通过网络完成/处理的（由 Airtel、Vodafone 等服务提供商提供）。我们应向服务提供商支付网络使用费。
LBS 通过 AGPS 进行处理。

我不知道我的观点是否正确。我是听别人说的，把它。
欢迎大家提出建议、想法等。

# jquery - 带有进度条的免费 jQuery Fileupload 控件

> ID：11760964
> 
> 赞同：0
> 
> 时间：2012-08-01T14:01:05.473
> 
> 标签：jquery, ajax, file-upload, asp-classic

我知道带有进度条的文件上传器的 jQuery 插件。你知道有谁是免费的吗？我想要一个用于经典 asp 网站的插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:05:48.980

[Uploadify](http://www.uploadify.com/)是一个基于 Flash 的上传器，可与 asp 一起使用。这是我发现[的一个教程，其中显示了如何设置它的示例。](http://www.uploadify.quickersite.com/r/)

[Plupload](http://www.plupload.com/)是我用过的另一个很棒的文件上传插件。我相信你也可以让它与 asp 一起工作。

# php - HTML5 将画布保存为 PNG

> ID：11760972
> 
> 赞同：1
> 
> 时间：2012-08-01T14:01:30.673
> 
> 标签：php, html, canvas

我正在按照此示例将画布保存到 PNG 文件中。[http://greenethumb.com/article/1429/user-friendly-image-saving-from-the-canvas/](http://greenethumb.com/article/1429/user-friendly-image-saving-from-the-canvas/)

我的问题：下载的文件已损坏，当我在记事本中打开它时，它具有以下模式：

1.  HTML CODE（对应PHP文件）
2.  ASCII CHARACTERS（我认为对应于 PNG 文件）
3.  `<body><html>`

如果我删除 #1 和 #3 并将文件保存在本地，我会得到一个有效的 PNG 图像。

我完全按照上面的例子做，但我的结果是不同的。为什么 dataURL 会有任何其他信息。除了画布本身？

谢谢。

编辑

```
<?php
$imdata = $_POST["imgdata"];
//run this code only when there is long POST data
if(strlen($imdata)>1000) {
        //removing the "data:image/png;base64," part
        $imdata =  substr($imdata,strpos($data,",")+1);
        // put the data to a file
        file_put_contents('image.png', base64_decode($imdata));
        //force user to download the image
        if(file_exists("image.png")){
                header('Content-type: image/png');
                header('Content-Disposition: attachment; filename="image.png"');
                readfile('image.png');
        }
}
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T14:11:42.670

当您在 HTML5 中保存画布时，您最终会得到一个 base64 字符串，该字符串的开头是有关图像格式的特定信息。如果您希望保存 base64 以便以后转换为硬文件，则需要将其删除。如果要将图像重绘到画布（或某些图像控件）上，则需要再次添加此信息。

以下是保存文件的方法：

```
var dataURL = document.getElementsByTagName("canvas")[0].toDataURL("image/png");

// strip off invalid data for saving
dataURL = dataURL.replace("data:image/png;base64,", ""); 
```

现在，您只需将 base64 字符串转换为图像，并在需要时保存到硬文件。如果您想再次在画布上显示此图像，请执行以下操作：

```
function displayImage(base64string) {
    var canvas = document.getElementsByTagName("canvas")[0];
    var context = canvas.getContext("2d");
    var image = new Image();

    // prepend the required image info again
    image.src = "data:image/png;base64," + base64string;

    image.onload = function() {
        context.drawImage(image, 0, 0);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-21T14:38:28.780

这对我有用 -

```
function SaveCanvasToFile(myFileName) 
{
   var link = document.createElement('a');
   link.textContent = 'download image';
   link.href = myCanvas.toDataURL('image/png', 1.0);
   link.download = myFileName;
   document.body.appendChild(link);
   link.click();
   document.body.removeChild(link);    
} 
```

这样做的好处是文件不必转到服务器然后再返回。

# django - 发布数据以同时创建相关的 Tastypie 资源？

> ID：11760973
> 
> 赞同：2
> 
> 时间：2012-08-01T14:01:30.500
> 
> 标签：django, post, foreign-keys, nested, tastypie

*给定OneToMany*关系中的两个相关 Django 模型**A**和**B ：**

 ***模型.py**

```
class A(models.Model):
  name = models.CharField(max_length=5)

class B(models.Model):
  name = models.CharField(max_length=5)
  a = models.ForeignKey(A) 
```

并给出（可能不是最佳的）Tastypie 资源：

**api.py**

```
class AResource(ModelResource):
    bs = fields.ToManyField( 'projectname.api.BResource', 'bs', full = True)
    class Meta:
        queryset = A.objects.all()

class BResource(ModelResource):
    a = fields.ToOneField( AResource, 'a', full = True)
    class Meta:
        queryset = B.objects.all() 
```

让我们假设数据库到目前为止是空的。现在我有相关的外部数据，并且想用 A 的一个实例和 B 的几个实例来填充数据库。

解决这个问题的最漂亮的 Tastypionic 方法是什么？是否可以同时拥挤 A 和 B？还是我需要先拥挤 A，然后再拥挤 B 提供 A 的 ID 作为外键？

如果有人能想出一个帖子示例（例如使用 python 字典和 httplib2 或 curl），那就太好了。

太感谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-13T07:42:38.530

解决方案在这里。对可自动填充反向关系同时创建多个对象的美味派字段使用相关名称。 [http://django-tastypie.readthedocs.org/en/v0.10.0/fields.html#tastypie.fields.RelatedField.related_name](http://django-tastypie.readthedocs.org/en/v0.10.0/fields.html#tastypie.fields.RelatedField.related_name)

`RelatedField.related_name`

用于帮助在创建数据时自动填充反向关系。默认为无。

为了使此选项正常工作，其他资源上必须有一个字段，并将其作为属性/实例名称。通常这只是意味着添加一个反射 ToOneField 指向回来。

例子：

```
class EntryResource(ModelResource):
    authors = fields.ToManyField('path.to.api.resources.AuthorResource', 'author_set', related_name='entry')

    class Meta:
        queryset = Entry.objects.all()
        resource_name = 'entry'

class AuthorResource(ModelResource):
    entry = fields.ToOneField(EntryResource, 'entry')

    class Meta:
        queryset = Author.objects.all()
        resource_name = 'author' 
```

使用`related_name`做任务。它映射相关字段的对象并在创建数据时自动填充关系。

正如您`full=True`在资源的两侧所做的那样，它将产生超出最大递归深度的异常，因为这两个资源彼此都已满。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T13:11:13.803

这是一种涉及*多对多*而不是单对多*关系*的解决方案：

**模型.py**

```
class B(models.Model):
    name = models.CharField(max_length=5)

class A(models.Model):
    name = models.CharField(max_length=5)
    bs = models.ManyToManyField(B) 
```

**api.py**

```
class BResource(ModelResource):
    class Meta:
        queryset = B.objects.all()
        resource_name = 'b'

class AResource(ModelResource):
    bs = fields.ToManyField( BResource, 'bs', related_name = 'a', full = True, null=True)
    class Meta:
        queryset = A.objects.all()
        resource_name = 'a' 
```

**卷曲**

```
curl -v -H "Content-Type: application/json" -X POST --data '{"name":"a_name1", "bs":[{"name":"b_name1"}, {"name": "b_name2"}]}' http:<my_path>/api/a/ 
```

**httplib2.py**

一个使用 httplib2 包通过 python 脚本发布数据的工作示例基于[warren-runk 发布的简洁而简单的解决方案](https://gist.github.com/1855363)：

```
post_dict(
    url='http:<my_path>/api/a/',
    dictionary={
        'name' : 'a_name1',
        'bs' : [
            {'name' : 'b_name1'},
            {'name' : 'b_name1'},
        ]
    }
) 
```

**但是**，现在在数据库中创建了一个关联 A 和 B 的附加表。基于A 和 B的*OneToMany关系可能有更好的解决方案？**

# jquery - 如何解决这个 JavaScript 范围问题

> ID：11760979
> 
> 赞同：0
> 
> 时间：2012-08-01T14:01:51.040
> 
> 标签：jquery, ajax

我正在尝试使用 jQuery`.get()`方法获取文件内容，如下所示

```
var news;
$.get('news.txt', function (dat) {
   news = dat;
   if ($('#removeN').is(':checked')) {
       news = "";
   }
   alert(news) // Displaying exact result;               
});
alert(news) // Displaying undefined..; Why? 
```

有人请澄清我的疑问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T14:02:45.253

**JAX 是**异步****的**。**

 **您的最后一行在您从服务器获得响应之前运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T14:03:48.730

```
var news;
$.get('news.txt', function (dat) {
   news = dat;
   if ($('#removeN').is(':checked')) {
       news = "";
   }
   alert(news) // BEFORE THIS!         
});
alert(news) // THIS EXECUTES 
```

如果您想对新闻做点什么，请改用它：

```
$.get('news.txt', function (dat) {
   news = dat;
   if ($('#removeN').is(':checked')) {
       news = "";
   }
   doSomething(news) // Displaying exact result;               
});

var doSomething = function(data) {
    alert(data);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T14:50:41.467

您还应该能够分离出关注点..

```
var news;
$.get('news.txt', function (dat) {
   //process news       
}).done(function(dat){
   //display news, or maybe more processing related to this particular function block
   alert(news);
}).fail(function(){
   //oops, something happened in attempting to get the news.
   alert("failed to get the news");
}).always(function(){
   //this eventually gets called regardless of outcome
}); 
```

等等

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T14:44:18.613

$.get 的第二个参数是一个**回调**。本质上，$.get 所做的是为内容加载事件设置一个事件处理程序，并说“这是我想在触发此事件时运行的函数”。就像其他人所说的那样，它还没有触发那个事件，所以代码会漫无目的地找到你未初始化的变量。**

# c# - Selenium FindsBy 属性引发编译器错误

> ID：11760984
> 
> 赞同：1
> 
> 时间：2012-08-01T14:01:59.610
> 
> 标签：c#, selenium, webdriver

Finder 属性参数是否有效，即它实际上可以使用吗？，每当我尝试使用它时，我都会收到此编译器错误“'Finder' 不是有效的命名属性参数，因为它不是有效的属性参数类型”，例如

```
[FindsBy(Finder = By.Id("test").FindElement(By.TagName("iframe")))]    
public IWebElement Test{ get; set; } 
```

有没有人有一个使用 Finder 属性参数的工作示例，或者这是一个错误？

查看代码： [http ://code.google.com/p/selenium/source/browse/trunk/dotnet/src/WebDriver.Support/PageObjects/FindsByAttribute.cs?r=17167#](http://code.google.com/p/selenium/source/browse/trunk/dotnet/src/WebDriver.Support/PageObjects/FindsByAttribute.cs?r=17167#)

同样来自[http://msdn.microsoft.com/en-us/library/aa664615%28VS.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa664615%28VS.71%29.aspx)，属性类的位置和命名参数的类型仅限于属性参数类型，它们是：

以下类型之一：bool、byte、char、double、float、int、long、short、string。类型对象。类型 System.Type。枚举类型，前提是它具有公共可访问性，并且它嵌套的类型（如果有）也具有公共可访问性（第 17.2 节）。上述类型的一维数组。

据我所知 By 不是上述任何一种类型，所以我得到编译器错误还是我错了？

我想要做的是获取一个 ckeditor 文本框作为页面对象的 WebElement 属性，例如：

```
[FindsBy(Finder = By.Id("cke_Details").FindElement(By.TagName("iframe")))]
public IWebElement Details { get; set; } 
```

还有其他方法可以实现吗？谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T19:34:53.067

这是 .NET`FindsByAttribute`实现中的一个错误。您不应尝试使用该`Finder`物业；它根本不起作用。请改用以下内容：

```
// WARNING: Completely untested code here. Not guaranteed to 
// work correctly, or even to compile.
[FindsBy(How = How.Id, Using = "test")]
public IWebElement Test { get; set; } 
```

如果您需要更复杂的东西，例如您在问题中提到的分层查找路径，您可以使用 XPath 或 CSS 选择器查找，如下所示：

```
// WARNING: Completely untested code here. Not guaranteed to 
// work correctly, or even to compile.
[FindsBy(How = How.XPath, Using = "//*[@id='test']/iframe")]
public IWebElement Test { get; set; } 
```

# php - 扩展核心类 Codeigniter - 404 错误

> ID：11760986
> 
> 赞同：1
> 
> 时间：2012-08-01T14:02:04.650
> 
> 标签：php, codeigniter, extending-classes

我正在尝试学习 Codeigniter。我正在尝试在我的 CI 应用程序中使用 application/core/MY_Controller。MY_Controller.php 为：

```
class MY_Controller extends CI_Controller {

  protected $data = array();

  function __construct() {
    parent::__construct();
  }

  function render_page($view) {
    //do this to don't repeat in all controllers...
    $this->load->view('templates/header', $this->data);
    //menu_data must contain the structure of the menu...
    //you can populate it from database or helper

    $this->load->view($view, $this->data);
    $this->load->view('templates/footer', $this->data);
  }

} 
```

现在我开始将家庭控制器编写为：

```
class Home extends MY_Controller {
         function __construct() {
    parent::__construct();
  }

        public function view($page = 'home')
        {
         $this->load->helper('text');
            $data['records']= $this->services_model->getAll();
            if ( ! file_exists('application/views/pages/'.$page.'.php'))
            {
                // Whoops, we don't have a page for that!
                show_404();
            }

            $data['title'] = ucfirst($page); // Capitalize the first letter

            $this->load->view('pages/'.$page, $data);

        } 
```

我的意见文件夹为

```
+pages
  +home.php
+templates
  +footer.php
  +header.php. 
```

这是我的配置和路由文件。

```
$config['base_url'] = 'http://localhost/~ytsejam/kirmiziblog/';
$config['index_page'] = 'index.php';
$route['default_controller'] = 'pages/view';
$route['(:any)'] = 'pages/view/$1'; 
```

我得到 404 page not found 错误。如何更改我的应用程序以使用 MY_Controller ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T04:50:56.270

我在扩展核心类时也遇到了这个问题。我的问题是它正在我的本地服务器上工作，但不在我的生产服务器上。我在生产中收到 404 错误，并且仅在使用类扩展的控制器上。经过一番研究，我注意到我的本地服务器运行的是 php 版本 5.3.x，而我的生产服务器运行的是 5.2.x。为了解决这个问题，我不得不将我的生产服务器升级到 5.3。

要找出您的站点使用的 php 版本，请将此命令放在您的视图中：

```
<?php echo phpversion() ?> 
```

# java - 在类之外修改私有变量 - Java

> ID：11760987
> 
> 赞同：3
> 
> 时间：2012-08-01T14:02:05.970
> 
> 标签：java, private-members

我正在遍历一些数据，`ArrayList<ArrayList<Cell>>`为每个步骤创建一个。每个`Cell`类都存储一个`row`和`col`（除其他外）。

我的问题是，当我`listOfCells`后来调查时，每个`Cell`对象都有相同的行（最后一行`myData`。这只发生`row`在正确递增，但是当它这样做时，它会更改my 中`row`的所有值。`row``listOfCells`

我不知道是什么原因造成的。

# 创建`Cell`的

```
Cell cell = null;
int row = 0;
int col = 0;
ArrayList<Cell> tmpCellList = new ArrayList<Cell>();
ArrayList<ArrayList<Cell>> listOfCells = new ArrayList<ArrayList<Cell>>();    

for (ArrayList<double> eachRow : myData) {
    row++;
    for (double eachCol : eachRow) {
        col++;
        cell = new Cell();
        cell.setCol(col);
        cell.setRow(row);
        cell.setValue(eachCol);
        tmpCellList.add(cell);
    }
    listOfCells.add(row-1, tmpCellList);
 } 
```

# `Cell`班级

```
public class Cell {
    private int row;
    private int col;
    private double value;

public void setRow(int rowIn)   {
    this.row = rowIn;
}

public int getRow() {
    return row;
}

public void setCol(int colIn)   {
    this.col = colIn;
}

public int getCol() {
    return col;
}

    public void setValue(double val) {
            this.value = val;
    }

    public double getValue() {
            return value;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T14:05:29.760

你所有的行都是一样的`ArrayList<Cell>`。
因此，它们都包含相同的单元格。

您需要`new ArrayList<Cell>()`为每一行创建一个。

# xcode - 在Xcode中将double变量乘以double

> ID：11760993
> 
> 赞同：1
> 
> 时间：2012-08-01T14:02:34.800
> 
> 标签：xcode

我在包含用户输入对象价格的应用程序中制作，并且该应用程序输出含税价格。但是，每次它输出 0 时，我都会收到一个涉及变量 myDouble 的运行时错误。我正在尝试将输入文本字段中的值乘以 1.06（我从设定的税率开始），然后将标签设置为新值。这是我的代码：

```
-(IBAction)textFieldReturn:(id)sender
{
    [sender resignFirstResponder];
    NSString *myString = inputtext2.text;
    double myDouble = [myString doubleValue];
    myDouble = myDouble*1.06;
    NSLog(@"myDouble: %lf", myDouble);
    price.text = [NSString stringWithFormat:@"%g", myDouble];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:21:31.180

很可能您的 inputtext2 变量为零，因此它什么也不返回。如果这是一个插座，请检查接口生成器中的连接。如果未连接出口，则变量将为`nil`，因此字符串值为`nil`，因此双精度值为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:21:41.640

我认为您将要使用 NSNumberFormatter 并检查有效条目。

伪代码，未编译：

```
-(IBAction)textFieldReturn:(id)sender
{
    [sender resignFirstResponder];
    NSString *myString = inputtext2.text;    
    NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
    [formatter setNumberStyle: NSNumberFormatterDecimalStyle];
    NSNumber *myNumber = [formatter numberFromString: myString];
    double myDouble = 0;
    if (myNumber != nil) {
      myDouble = [myNumber doubleValue];
    }

    NSString *outputString = [formatter stringFromNumber:myDouble];
    price.text = outputString;
} 
```

如果输入的文本为 0 或不是有效数字，这应该默认您的数字为 0。

# android - 将 Drawable 对象放置在 Android 片段中布局的视图中

> ID：11760995
> 
> 赞同：5
> 
> 时间：2012-08-01T14:02:42.573
> 
> 标签：android, containers, drawable, inflate, viewgroup

我认为标题涵盖了它：) 我有一个可绘制的对象，它可以获取 .png 照片，我可以用手势操作它。我还有一个带有背景图像的 xml 布局，它应该位于这个可绘制对象的后面。一切都发生在一个片段中。

当我运行代码并到达这个片段时，会显示 png 并且手势可以工作，但是，没有膨胀的布局并且在后退按钮按下应用程序崩溃（我猜那是因为我在片段中使用 setContentView 所以有没有后栈？我该如何避免这种情况？）。

稍后我将在场景中添加其他图层。

我的问题是，我怎样才能同时使用 xml 布局来膨胀片段，在其上显示可绘制对象，以及稍后在所有这些之上添加其他视图？

此片段的代码如下所示：

```
public class RoomFragment extends Fragment {

ViewGroup mRoot;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    mRoot = (ViewGroup) inflater.inflate(R.layout.room_fragment, null);

    /** Placing furniture .png element in SandboxView */
    Bitmap bitmap = BitmapFactory.decodeResource(getResources(),
            R.drawable.furniture);
    View view = new SandboxView(this.getActivity(), bitmap);
    this.getActivity().setContentView(view); // Replace with inflater?

    return mRoot;

}} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:49:44.163

我通过在此片段的 LinearLayout 包装器中添加一个 ID 来解决它，然后在使用其 xml 膨胀片段之后使用 addView(view) 在其中添加一个可绘制视图的实例。

片段 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/bitmapBox"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/room"
    android:gravity="bottom|center"
    android:orientation="vertical" >
</LinearLayout> 
```

片段代码：

```
 ViewGroup mRoot;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    mRoot = (ViewGroup) inflater.inflate(R.layout.room_fragment, null);

    /** placing furniture element in SandboxView */
    LinearLayout myLayout = (LinearLayout) mRoot
            .findViewById(R.id.bitmapBox);

    Bitmap bitmap = BitmapFactory.decodeResource(getResources(),
            R.drawable.furniture);

    View view = new SandboxView(this.getActivity(), bitmap);

    myLayout.addView(view);

    return mRoot; 
```

# java - MessageConsumer 不消费消息

> ID：11760997
> 
> 赞同：6
> 
> 时间：2012-08-01T14:02:52.563
> 
> 标签：java, jakarta-ee, jms, jboss7.x, message-queue

我的应用程序在 Jboss 7.1.1 上运行。我有一个每分钟运行一次的调度程序，需要检查 DLQ 中是否有消息并在数据库中进行一些更新。

我编写了一个消息消费者，它监听预定义的自定义 DLQ。问题是我可以看到自定义 DLQ 中有消息，但`consumer.receiveNoWait()`总是返回 null。

下面是创建消费者的代码：

```
/*this is running fine and creating the consumer*/
public DestinationHandlerImpl(ConnectionFactory connectionFactory,
    Destination destination, boolean useTransaction, int delMode,
    boolean isProducer) throws JMSException {
    connection = connectionFactory.createConnection();
    consumer = session.createConsumer(destination);
} 
```

这是使用消息的代码（每分钟运行一次）：

```
/*this always return null, event when there are messages in the queue*/
public <T extends BaseEvent> T recieveMessage()
        throws JMSException {

    Message message = consumer.receiveNoWait(); // ----> always return null!!!

    if (message != null && !(message instanceof ObjectMessage)) {
        throw new IllegalArgumentException(
                "message object has to be of type ObjectMessage");
    }

    // Extract the object from the message
    return message == null ? null : (T) ((ObjectMessage) message).getObject();

} 
```

我使用了调试模式，我可以看到消费者目标属性设置为正确的队列，那么我做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-01T14:32:29.200

找到了，我只需要`connection.start()`在开始消费之前添加。

```
public <T extends BaseEvent> T recieveMessage()
    throws JMSException {

    connection.start(); // --->**added this line**
    Message message = consumer.receiveNoWait(); 

    if (message != null && !(message instanceof ObjectMessage)) {
        throw new IllegalArgumentException(
            "message object has to be of type ObjectMessage");
    }

    // Extract the object from the message
    return message == null ? null : (T) ((ObjectMessage) message).getObject();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-23T13:59:11.733

我什至有这个问题`connection.start()`！我的工作解决方案：

使用[`receive(long timeout)`](http://docs.oracle.com/javaee/1.4/api/javax/jms/MessageConsumer.html#receive%28long%29)代替[`receiveNoWait()`](http://docs.oracle.com/javaee/1.4/api/javax/jms/MessageConsumer.html#receiveNoWait%28%29);

观察：1000 毫秒，因为在一个简单的测试用例中超时工作正常，但为了确保在生产中，我将其配置为 10000 毫秒。就我而言，在迭代消息时，我在收到`null`（不再有消息）时停止，并且在最后一次调用中，receive(10000) 等待整整 10 秒（显然）。我不得不使用异步方法来缓解该性能问题。

* * *

**编辑：**此外，根据实现（jbm），它可能会预取一些消息（预选以供使用），这使得消息不可用，因为它们处于*传递*状态。