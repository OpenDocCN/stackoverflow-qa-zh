# StackOverflow 问答 10720000-10720999

# php - PHP/mysqli , 如何知道新插入的 ID

> ID：10720000
> 
> 赞同：3
> 
> 时间：2012-05-23T12:32:50.727
> 
> 标签：php, mysql, mysqli

我有一个简单的表，包含一个具有自动增量索引的主键。

当我插入时`mysqli`，是否有机会知道 Auto Increment 列的最后插入值？

笔记：

可能有多个人试图同时插入

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-23T12:35:39.973

您可以使用：[`mysqli_insert_id($con)`](http://php.net/manual/en/mysqli.insert-id.php)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-23T12:56:38.997

您可以使用数据库对象中的 insert_id 值（不是方法调用）:)

```
$id = $db->insert_id; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T00:30:03.293

更正上一篇文章，程序风格采用参数“$link”，其中$link是mysqli_connect()或mysqli_init()返回的标识符：

`$last_id = mysqli_insert_id($link);`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T12:35:58.260

[http://php.net/manual/en/function.mysql-insert-id.php](http://php.net/manual/en/function.mysql-insert-id.php) - mysql_insert_id()

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-23T12:37:10.723

```
 $last_id = $link->insert_id; 
```

`$link`MySQLi 资源在哪里。

或者：

```
$last_id = mysqli_insert_id(); 
```

# wcf - 使用 WCF 实现不需要操作标头的 SOAP 服务器

> ID：10720001
> 
> 赞同：4
> 
> 时间：2012-05-23T12:32:51.623
> 
> 标签：wcf, web-services, soap, header, wcf-binding

我正在尝试使用 WCF 实现一个通过 HTTP 接受 SOAP 1.2 的 Web 服务。不幸的是，我必须使用不将`action`参数作为 HTTP 标头的一部分发送的旧客户端。这似乎导致 WCF 出现问题，它（至少在默认情况下）似乎无法将请求路由到没有`action`.

我创建了一个基于`BasicHttpBinding`但`MessageVersion`设置为的绑定`MessageVersion.Soap12`，我认为这将删除使用 WS-Addressing 的要求。

然后，我重载`ApplyDispatchBehaviour`以`IContractBehavior`设置为根据 SOAP 主体的内容选择正确操作`DispatchRuntime.OperationSelector`的自定义实现（基本上是[此 MSDN 文章](http://msdn.microsoft.com/en-us/library/aa395223.aspx)中使用的方法）`IDispatchOperationSelector`

默认情况下，这似乎不起作用，并且在`SelectOperation`发出请求时不会调用该函数。

但是，如果我在合同中添加一个带有空操作的虚拟操作，如下所示：

```
[OperationContract( Action = "" )]
void DoNothing(); 
```

然后突然`SelectOperation`开始被调用，我的代码按预期工作。似乎我在使 WCF 不再需要操作标头方面没有成功——我刚刚停止了用于直接映射到操作的操作标头。但是，由于合约是从 .wsdl 文件生成的，因此编辑它以使其正常工作似乎是一个非常大的黑客攻击。

所以我的问题是：如何使用 WCF 在没有操作标头的情况下接受 SOAP 1.2 请求？除非我弄错了 SOAP 1.2 规范不需要操作标头，所以肯定有某种方法可以使用 WCF 实现这一点，而无需求助于破解合同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T17:03:07.470

我今天才设法弄清楚这个问题的答案。事实证明，`EndpointDispatcher`正在使用的有一个`ActionMessageFilter`原样`ContractFilter`，这是根据操作过滤掉消息。

在我将 更新`ContractFilter`为 a`MatchAllMessageFilter`之后，所有消息都被传递到我`IDispatchOperationSelector`可以根据 SOAP 正文的内容选择它们的位置。

我用来执行此操作的代码位于`IContractBehavior.ApplyDispatchBehaviour`：

```
foreach(
    var endpointDispatcher in
    dispatchRuntime.ChannelDispatcher.Endpoints
    )
{
    endpointDispatcher.ContractFilter = new MatchAllMessageFilter();
} 
```

我可能会更新以使用比`MatchAllMessageFilter`将来更合适的过滤器，但现在它正在完成这项工作。

# java - 仅使用 JDK 6 将日期舍入为动态时间单位的最优雅方法

> ID：10720002
> 
> 赞同：2
> 
> 时间：2012-05-23T12:32:52.800
> 
> 标签：java, calendar, timezone, jodatime, scjp

我正在尝试做一个优雅的圆形方法，它只使用 JDK 方法并利用该 JDK 的 TimeUnit 类。

我制作了以下代码：

```
 /**
     * Get the date rounded to the given unit
     * @param date
     * @param unit
     * @return the rounded value
     */
    public static Date round(Date date,TimeUnit unit) {
        long dateInMillies = date.getTime();
        long tzOffset = TimeZone.getDefault().getOffset(dateInMillies);
        long dateInMilliesWithoutOffset = dateInMillies + tzOffset;
        long dateInUnit = unit.convert(dateInMilliesWithoutOffset,TimeUnit.MILLISECONDS);
        long dateInMilliesRoundedWithoutOffset = unit.toMillis(dateInUnit);
        long dateInMilliesRoundedWithOffset = dateInMilliesRoundedWithoutOffset - tzOffset;
        return new Date(dateInMilliesRoundedWithOffset);
    } 
```

我的单元测试是：

```
@Test
    public void testRoundDate() {
        Date currentDayDate = new Date();
        Date currentDayBegin = DateUtils.getDayBegin(currentDayDate); // returns 00h00:00 and 000 milliseconds
        Date currentDayEnd = DateUtils.getDayEnd(currentDayDate,TimeUnit.MILLISECONDS); // returns 23h59:59 and 999 milliseconds
        //
        final Calendar initialCalBegin = Calendar.getInstance();
        initialCalBegin.setTime(currentDayBegin);
        final Calendar initialCalEnd = Calendar.getInstance();
        initialCalEnd.setTime(currentDayEnd);
        //
        Calendar testedCalendar = Calendar.getInstance();
        //
        testedCalendar.setTime( DateUtils.round(currentDayBegin, TimeUnit.DAYS) );
        Assert.assertEquals( testedCalendar.get(Calendar.DAY_OF_YEAR), initialCalBegin.get(Calendar.DAY_OF_YEAR) );
        Assert.assertEquals( testedCalendar.get(Calendar.HOUR_OF_DAY), 0 );
        Assert.assertEquals( testedCalendar.get(Calendar.MINUTE), 0 );
        Assert.assertEquals( testedCalendar.get(Calendar.SECOND), 0 );
        Assert.assertEquals( testedCalendar.get(Calendar.MILLISECOND), 0 );
        testedCalendar.setTime( DateUtils.round(currentDayEnd, TimeUnit.DAYS) );
        Assert.assertEquals( testedCalendar.get(Calendar.DAY_OF_YEAR), initialCalEnd.get(Calendar.DAY_OF_YEAR) );
        Assert.assertEquals( testedCalendar.get(Calendar.HOUR_OF_DAY), 0 );
        Assert.assertEquals( testedCalendar.get(Calendar.MINUTE), 0 );
        Assert.assertEquals( testedCalendar.get(Calendar.SECOND), 0 );
        Assert.assertEquals( testedCalendar.get(Calendar.MILLISECOND), 0 );
        //
        testedCalendar.setTime( DateUtils.round(currentDayBegin, TimeUnit.HOURS) );
        Assert.assertEquals( testedCalendar.get(Calendar.DAY_OF_YEAR), initialCalBegin.get(Calendar.DAY_OF_YEAR) );
        Assert.assertEquals( testedCalendar.get(Calendar.HOUR_OF_DAY), initialCalBegin.get(Calendar.HOUR_OF_DAY) );
        Assert.assertEquals( testedCalendar.get(Calendar.MINUTE), 0 );
        Assert.assertEquals( testedCalendar.get(Calendar.SECOND), 0 );
        Assert.assertEquals( testedCalendar.get(Calendar.MILLISECOND), 0 );
        testedCalendar.setTime( DateUtils.round(currentDayEnd, TimeUnit.HOURS) );
        Assert.assertEquals( testedCalendar.get(Calendar.DAY_OF_YEAR), initialCalEnd.get(Calendar.DAY_OF_YEAR) );
        Assert.assertEquals( testedCalendar.get(Calendar.HOUR_OF_DAY), initialCalEnd.get(Calendar.HOUR_OF_DAY) );
        Assert.assertEquals( testedCalendar.get(Calendar.MINUTE), 0 );
        Assert.assertEquals( testedCalendar.get(Calendar.SECOND), 0 );
        Assert.assertEquals( testedCalendar.get(Calendar.MILLISECOND), 0 );
        // 
        testedCalendar.setTime( DateUtils.round(currentDayBegin, TimeUnit.MINUTES) );
        Assert.assertEquals( testedCalendar.get(Calendar.DAY_OF_YEAR), initialCalBegin.get(Calendar.DAY_OF_YEAR) );
        Assert.assertEquals( testedCalendar.get(Calendar.HOUR_OF_DAY), initialCalBegin.get(Calendar.HOUR_OF_DAY) );
        Assert.assertEquals( testedCalendar.get(Calendar.MINUTE), initialCalBegin.get(Calendar.MINUTE) );
        Assert.assertEquals( testedCalendar.get(Calendar.SECOND), 0 );
        Assert.assertEquals( testedCalendar.get(Calendar.MILLISECOND), 0 );
        testedCalendar.setTime( DateUtils.round(currentDayEnd, TimeUnit.MINUTES) );
        Assert.assertEquals( testedCalendar.get(Calendar.DAY_OF_YEAR), initialCalEnd.get(Calendar.DAY_OF_YEAR) );
        Assert.assertEquals( testedCalendar.get(Calendar.HOUR_OF_DAY), initialCalEnd.get(Calendar.HOUR_OF_DAY) );
        Assert.assertEquals( testedCalendar.get(Calendar.MINUTE), initialCalEnd.get(Calendar.MINUTE) );
        Assert.assertEquals( testedCalendar.get(Calendar.SECOND), 0 );
        Assert.assertEquals( testedCalendar.get(Calendar.MILLISECOND), 0 );
        //
        testedCalendar.setTime( DateUtils.round(currentDayBegin, TimeUnit.SECONDS) );
        Assert.assertEquals( testedCalendar.get(Calendar.DAY_OF_YEAR), initialCalBegin.get(Calendar.DAY_OF_YEAR) );
        Assert.assertEquals( testedCalendar.get(Calendar.HOUR_OF_DAY), initialCalBegin.get(Calendar.HOUR_OF_DAY) );
        Assert.assertEquals( testedCalendar.get(Calendar.MINUTE), initialCalBegin.get(Calendar.MINUTE) );
        Assert.assertEquals( testedCalendar.get(Calendar.SECOND), initialCalBegin.get(Calendar.SECOND) );
        Assert.assertEquals( testedCalendar.get(Calendar.MILLISECOND), 0 );
        testedCalendar.setTime( DateUtils.round(currentDayEnd, TimeUnit.SECONDS) );
        Assert.assertEquals( testedCalendar.get(Calendar.DAY_OF_YEAR), initialCalEnd.get(Calendar.DAY_OF_YEAR) );
        Assert.assertEquals( testedCalendar.get(Calendar.HOUR_OF_DAY), initialCalEnd.get(Calendar.HOUR_OF_DAY) );
        Assert.assertEquals( testedCalendar.get(Calendar.MINUTE), initialCalEnd.get(Calendar.MINUTE) );
        Assert.assertEquals( testedCalendar.get(Calendar.SECOND), initialCalEnd.get(Calendar.SECOND) );
        Assert.assertEquals( testedCalendar.get(Calendar.MILLISECOND), 0 );
        //
        testedCalendar.setTime( DateUtils.round(currentDayBegin, TimeUnit.MILLISECONDS) );
        Assert.assertEquals( testedCalendar.get(Calendar.DAY_OF_YEAR), initialCalBegin.get(Calendar.DAY_OF_YEAR) );
        Assert.assertEquals( testedCalendar.get(Calendar.HOUR_OF_DAY), initialCalBegin.get(Calendar.HOUR_OF_DAY) );
        Assert.assertEquals( testedCalendar.get(Calendar.MINUTE), initialCalBegin.get(Calendar.MINUTE) );
        Assert.assertEquals( testedCalendar.get(Calendar.SECOND), initialCalBegin.get(Calendar.SECOND) );
        Assert.assertEquals( testedCalendar.get(Calendar.MILLISECOND), initialCalBegin.get(Calendar.MILLISECOND) );
        testedCalendar.setTime( DateUtils.round(currentDayEnd, TimeUnit.MILLISECONDS) );
        Assert.assertEquals( testedCalendar.get(Calendar.DAY_OF_YEAR), initialCalEnd.get(Calendar.DAY_OF_YEAR) );
        Assert.assertEquals( testedCalendar.get(Calendar.HOUR_OF_DAY), initialCalEnd.get(Calendar.HOUR_OF_DAY) );
        Assert.assertEquals( testedCalendar.get(Calendar.MINUTE), initialCalEnd.get(Calendar.MINUTE) );
        Assert.assertEquals( testedCalendar.get(Calendar.SECOND), initialCalEnd.get(Calendar.SECOND) );
        Assert.assertEquals( testedCalendar.get(Calendar.MILLISECOND), initialCalEnd.get(Calendar.MILLISECOND) );
        ////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        // The TimeUnits under the millisecond precision should not procude any change to the date
        Assert.assertEquals(DateUtils.round(currentDayBegin, TimeUnit.MICROSECONDS) , currentDayBegin);
        Assert.assertEquals(DateUtils.round(currentDayEnd, TimeUnit.MICROSECONDS) , currentDayEnd);
        Assert.assertEquals(DateUtils.round(currentDayDate, TimeUnit.MICROSECONDS) , currentDayDate);
        //
        Assert.assertEquals(DateUtils.round(currentDayBegin, TimeUnit.NANOSECONDS) , currentDayBegin);
        Assert.assertEquals(DateUtils.round(currentDayEnd, TimeUnit.NANOSECONDS) , currentDayEnd);
        Assert.assertEquals(DateUtils.round(currentDayDate, TimeUnit.NANOSECONDS) , currentDayDate);
    } 
```

看来我所做的工作很好，而且非常优雅。但是我不习惯使用时区，我想知道这段代码在非常特殊的情况下是否可以正常工作。例如，对于一个时区发生偏移变化的国家/地区，您是否看到某一天可能发生的事情？如果您认为我的代码有问题，请告诉我。

我可以安全地创建一个采用 TimeZone 参数的新方法，从而可以将日期舍入到给定时区的给定单位吗？

# delphi - Delphi XE 2 中的代码完成功能不适用于 Delphi 7 中的 .pas 文件

> ID：10720003
> 
> 赞同：3
> 
> 时间：2012-05-23T12:32:53.453
> 
> 标签：delphi, delphi-7, delphi-xe2

当我从 Delphi 7 打开甚至复制 pascal 代码时，我无法使用 Delphi XE 2 中的代码完成。有人知道如何解决它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-06T19:10:10.273

如果您不想删除 .dproj 并丢失设置，您可以首先检查以下“DCC_UnitAlias”行是否缺失：

```
<PropertyGroup Condition="'$(Base)'!=''">
    <DCC_DependencyCheckOutputName>aida.exe</DCC_DependencyCheckOutputName>
    <DCC_UnitAlias>WinTypes=Windows;WinProcs=Windows;$(DCC_UnitAlias)</DCC_UnitAlias>
</PropertyGroup> 
```

如果您没有看到它，请制作 dproj 的备份副本，然后将缺少的行添加到正确的位置 ( `<PropertyGroup Condition="'$(Base)'!=''">`)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T17:20:52.320

因此，您的问题的解决方案是安装 IDE Fix Pack。

[http://andy.jgknet.de/blog/ide-tools/ide-fix-pack-2009-10/](http://andy.jgknet.de/blog/ide-tools/ide-fix-pack-2009-10/)

# ruby-on-rails - Rails simple_form grouped_select 奇怪的行为

> ID：10720005
> 
> 赞同：2
> 
> 时间：2012-05-23T12:32:56.943
> 
> 标签：ruby-on-rails, ruby-on-rails-3, simple-form

最近在我身上发生了一件奇怪的事。

我有两个模型：

```
class Direction < ActiveRecord::Base
  has_many :specializations, dependent: :destroy
end

and

class Specialization < ActiveRecord::Base
  belongs_to :direction
end 
```

他们都有一个名为`title`.

我用分组选择制作了一个表格（它不绑定到任何模型）：

```
= simple_form_for :some_name do |f|
  = f.input :specialization_id, collection: Direction.all,
            as: :grouped_select,
            group_method: :specializations 
```

在我的本地机器上一切都很好。我的选择如下所示：

```
Direction1 title
  Specialization1 title
  Specialization2 title
  ...
Direction2 title
  Specialization3 title
  Specialization4 title
  ...
... 
```

当我将它部署到登台服务器时，有点意外。我的选择输出变成了这样：

```
#<Direction:0xb02fb60>
  #<Specialization:0xaa5fb10>
  ...
#<Direction:0x991cf90>
  #<Specialization:0xb02f868>
  ... 
```

看起来它是`:to_s`作为标签方法（和值方法）而不是`:title`.

通过明确指定这些方法来解决问题：

```
= simple_form_for :some_name do |f|
  = f.input :specialization_id, collection: Direction.all,
            as: :grouped_select,
            group_method: :specializations,
            group_label_method: :title,
            label_method: :title,
            value_method: :id 
```

但我想知道为什么会这样？我不喜欢这种惊喜。:)

一些细节：

*   本地机器正在运行 MacOS Lion

*   登台服务器在 Debian Squeeze 上

*   Ruby 版本相同（1.9.3p194 via rvm）

*   导轨版本：3.2.3

*   使用 Capistrano 进行部署

我还尝试在虚拟 Debian 机器上本地重现它以进行调试。但我没有成功。

有人可以告诉我发生了什么吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-21T16:20:45.883

我仅在生产模式下具有相同的行为。

```
= f.input(:city_id, label: 'Ciudad', :collection => Country.order(:name), :as =>     :grouped_select, :group_method => :cities, :group_label_method => :name, :label_method => :name, promt: "Por favor seleccione una ciudad", :include_blank => true, :input_html => { class: 'span4'} ) 
```

我希望得到城市 ID 而不是返回

```
"#<City:0x007f943d5a2de0>" 
```

**更新**

我添加了 simple_form 属性**value_method: :id**并且对我来说很好。

```
= f.input(:city_id, label: 'Ciudad', :collection => Country.order(:name), :as =>     :grouped_select, :group_method => :cities, :group_label_method => :name, :label_method => :name, promt: "Por favor seleccione una ciudad", value_method: :id, :include_blank => true, :input_html => { class: 'span4'} ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T19:41:13.590

尝试与 f.association 一起使用
，例如：

```
 = f.association :direction 
```

您也可以调用 label_method 在选项中定义标签

# objective-c - 为什么我们在创建自定义 View 控制器时不应该在 loadView 中调用 [super loadview]？

> ID：10720010
> 
> 赞同：2
> 
> 时间：2012-05-23T12:33:20.223
> 
> 标签：objective-c, ios, uiviewcontroller

以下是来自 Apple 开发者[参考](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html#//apple_ref/doc/uid/TP40007457-CH10-SW37)的信息。它们是什么意思“这样做会启动默认的视图加载行为？

> 当重写 loadView 方法以编程方式创建视图时，不应调用 super。这样做会启动默认的视图加载行为，通常只会浪费 CPU 周期。您自己的 loadView 方法实现应该完成为您的视图控制器创建根视图和子视图所需的所有工作。有关视图加载过程的详细信息，请参阅“了解如何加载和卸载视图”。</p>

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T12:40:16.317

“默认行为”是加载同名的 XIB 文件、链接属性等。如果没有匹配的 XIB 文件，如文档所述，只会浪费 CPU 周期。

最终，如果不知道 Apple 是如何实施该框架的，我们*就无法*知道文档中所有建议背后的原因。但这并不意味着您应该忽略它们...

# amazon-ec2 - 设置亚马逊自动缩放命令行工具窗口

> ID：10720012
> 
> 赞同：0
> 
> 时间：2012-05-23T12:33:26.383
> 
> 标签：amazon-ec2, amazon-web-services

我已经从这个链接下载了亚马逊自动缩放命令行工具的 zip 文件：

[http://aws.amazon.com/developertools/2535](http://aws.amazon.com/developertools/2535)

解压后，将其重命名为 AWS (C:\AWS)

我已经按照下面的自述说明（README 文件）安装了 java 并创建了一个 bat 文件：

# **自动缩放命令行工具

## 安装：

1.  确保您的系统上安装了 JAVA 1.5 或更高版本：（java -version）
2.  解压部署 zip 文件
3.  设置以下环境变量： 3.1 AWS_AUTO_SCALING_HOME - 复制部署文件以检查的目录：Unix: ls ${AWS_AUTO_SCALING_HOME}/bin 应该列出 as-create-auto-scaling-group ...) Windows: dir "% AWS_AUTO_SCALING_HOME%\bin" 应该列出 as-create-auto-scaling-group ...) 3.2 JAVA_HOME - Java 安装主目录
4.  将 ${AWS_AUTO_SCALING_HOME}/bin（在 Windows 中：“%AWS_AUTO_SCALING_HOME%\bin”）添加到您的路径

    ## 配置：

向命令行工具提供您的 AWS 用户凭证。您可以通过两种方式提供凭据：AWS 密钥或使用 X.509 证书。

## 使用 AWS 密钥

1.  创建凭证文件：部署包括模板文件 ${AWS_AUTO_SCALING_HOME}/credential-file-path.template。编辑此文件的副本以添加您的信息。在 UNIX 上，将权限限制为凭证文件的所有者： $ chmod 600 。
2.  有几种方法可以提供您的凭证信息：设置以下环境变量：AWS_CREDENTIAL_FILE= b。或者，为每个命令提供以下选项 --aws-credential-file c。在命令行上显式指定凭据：--I ACCESS_KEY --S SECRET_KEY

## 使用 X.509 证书

1.  将您的证书和私钥保存到文件中：例如 my-cert.pem 和 my-pk.pem。
2.  有两种方法可以向命令行工具提供证书信息 a. 设置以下环境变量：EC2_CERT=/path/to/cert/file EC2_PRIVATE_KEY=/path/to/key/file b. 直接在命令行上为每个命令指定文件 --ec2-cert-file-path=/path/to/cert/file --ec2-private-key-file-path=/path/to/key/file

    ## 跑步：

3.  要检查您的设置是否正常工作，请运行以下命令： $ as-cmd --help 您应该看到所有 Auto Scaling 命令的使用页面 $ as-describe-auto-scaling-groups --headers 您应该看到标题行. 如果您已经配置了 Auto Scaling 组，您将看到每个 Auto Scaling 组的描述行**

我的 bat 文件如下所示：

```
 REM Path should have bin\java.exe under it
 set AWS_AUTO_SCALING_HOME="C:\AWS"
 set JAVA_HOME="C:\Program Files\Java\jre7"
 set PATH="%PATH%";"%AWS_AUTO_SCALING_HOME%\bin"
 REM Path to Primary Key and Certificate retrieved from AWS 
 set EC2_PRIVATE_KEY="C:\AWS\pv_pk.pem"
 set EC2_CERT="C:\AWS\cert-pk.pem"
 cls
 cmd 
```

执行我的 bat 文件后，我尝试执行命令 ec2_describe_groups 它无法识别。我的 bat 文件有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:47:53.013

该命令是“ec2-describe-group”而不是“ec2_describe_groups”请参阅此处的文档[http://docs.aws.amazon.com/AWSEC2/latest/CommandLineReference/ApiReference-cmd-DescribeSecurityGroups.html](http://docs.aws.amazon.com/AWSEC2/latest/CommandLineReference/ApiReference-cmd-DescribeSecurityGroups.html)

# android - 如何判断手机是否处于待机状态？（屏幕关闭，按下电源按钮）

> ID：10720013
> 
> 赞同：3
> 
> 时间：2012-05-23T12:33:26.630
> 
> 标签：android, screen, state

正如标题所说，我需要获取有关屏幕状态的信息。

我认为待机是我的意思是正确的状态，即当您按下电源按钮并且屏幕完全关闭时。

但是如何检测呢？

提前 Tnx 为您提供帮助。

解决了：

我设法解决了我遇到的问题：代码是正确的，但是在待机模式下线程停止执行；那是因为我有错误的感觉，即代码错误。只需使用唤醒锁即可解决，即使在待机模式下也能确保 cpu 处于活动状态：

```
PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
 PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "My Tag");
 wl.acquire();
   ..CPU will stay on during this section..
 wl.release(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T12:43:39.693

```
PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
boolean isScreenOn = pm.isScreenOn(); 
```

# java - SAXParseException; 编码名称“UTF8”无效

> ID：10720014
> 
> 赞同：1
> 
> 时间：2012-05-23T12:33:34.577
> 
> 标签：java, playframework, saxparseexception

我正在使用 Play Framework 1.2.4 并尝试解析 SOAP 响应。

回应是：

```
<?xml version="1.0" encoding="UTF-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<soap:Body>
...
</soap:Body>
</soap:Envelope> 
```

当我尝试解析它时，`play.libs.WS.HttpResponse.getXml()`我遇到了一个致命错误：

```
[Fatal Error] :-1:-1: Invalid encoding name "UTF8". 
```

有趣的是，编码不是**"UTF8"**而是**"UTF-8"**。那么为什么我会得到这个异常呢？有任何想法吗？

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T01:25:45.340

由于发送 UTF8 的非标准客户端，我在 xmlrpc 服务器应用程序中遇到了同样的问题。

正如我发现的那样，引发该异常的是 xerces，而我绕过它的修复方法是使用 EncodingMap 类将 UTF8 注册为 UTF-8：

```
EncodingMap.putIANA2JavaMapping( "UTF8", "UTF8" );
EncodingMap.putJava2IANAMapping( "UTF8", "UTF8" ); 
```

# php - 无法通过套接字 '/var/run/mysqld/mysqld.sock' 连接到本地 MySQL 服务器 (2)

> ID：10720018
> 
> 赞同：3
> 
> 时间：2012-05-23T12:33:47.363
> 
> 标签：php, mysql, yii, cloudcontrol

我是一个新手程序员，所以我需要你的帮助！在本地，webapp 可以与 db 配合使用！当我将应用程序上传到 cloudcontrol 时，出现以下错误：

CDbConnection 无法打开数据库连接：SQLSTATE[HY000] [2002] Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2)！

我想我还没有上传数据库。这是我第一次在服务器上上传 web 应用程序，所以我不知道为了在服务器上上传数据库而必须遵循的确切步骤。Cloudcontrol 有关于 mysql 的文档！我确实按照这些步骤操作，但 webapp 出现了同样的错误！

你能告诉我我必须遵循哪些步骤才能使其正常工作吗？我确信这个错误是由于缺乏知识！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T23:16:23.850

SQL 服务器很可能驻留在单独的计算机上，您需要通过主机名或 IP 对其进行寻址。

这意味着在您的代码中，您应该替换`localhost`为 SQL 服务器所在机器的主机名（例如：）`mysql.s032.example.com`。

如果托管公司在其控制面板中记录了 SQL 机器的地址，那么查找它应该很容易。或者通过要求托管服务提供商的技术支持告诉您地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:17:34.350

作为一个新手，我认为你**没有安装 mysql-server**并尝试安装 phpmyadmin。

转到突触包 => 选择 mysql-server => 将自动选择必要的组件 => 标记它们以进行安装 => 应用

然后，重新安装 => phpmyadmin

工作正常。

如果上述方法不起作用，那么，请[遵循此](http://www.tech-recipes.com/rx/762/solve-cant-connect-to-local-mysql-server-through-socket-tmpmysqlsock/)

# .net - 在 HTML Helpers 中使用 Castle Windsor 进行依赖注入

> ID：10720023
> 
> 赞同：2
> 
> 时间：2012-05-23T12:34:17.900
> 
> 标签：.net, asp.net-mvc, design-patterns, dependency-injection, castle-windsor

所以，我正在做基于 .NET MVC 3 的应用程序并使用 Castle Windsor 作为 IOC 容器。

我使用它没有任何问题并且工作得很好。现在我遇到了这种情况，我创建了一个公开方法的 HTML 助手

```
public static string GetContentByKey(string key)
{
     //I need to use a service that is resolved by Windsor here
} 
```

问题是，在这个 Helper 类中，我需要使用通过 Windsor 初始化的服务，但是由于这个 Helper 是一个静态方法，所以你没有构造函数注入的选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T14:05:18.730

我同意您可能存在设计缺陷的评论。

话虽这么说，如果您*必须*这样做，有几种方法可以解决：

1）使用服务定位器：从方法中解析所需的接口实现。有些人认为这是一种反模式，有点代码味道。

2）使用可初始化的类级静态字段（可能以空对象实现开始）：

```
public static class MyHelper
{
    private static IMyService service = new NullMyService();

    public static void Assign(IMyService instance)
    {
        service = instance;
    }

    public static string DoSomething(this HtmlHelper html)
    {
        return service.Whatever();
    }
} 
```

然后从你的组合根（现在最喜欢的术语）你通过调用 assign 方法来设置服务：

```
...
MyHelper.Assign(container.Resolve<IMyService>());
... 
```

可能不会感觉 100% 舒适，但会产生理想的结果。

# ruby - 无法在 Ruby + Webdriver 中更改远程 Chrome 的默认下载目录

> ID：10720027
> 
> 赞同：1
> 
> 时间：2012-05-23T12:34:32.940
> 
> 标签：ruby, google-chrome, webdriver

我想在 Webdriver + Ruby 上的测试中使用 Chrome 来下载远程计算机上的文件。在我的开发人员计算机上，此代码一切正常：

```
profile = Selenium::WebDriver::Chrome::Profile.new
profile['download.prompt_for_download'] = false
profile['download.default_directory'] = Settings::DEFAULT_DOWNLOAD_DIRECTORY
@@driver = Selenium::WebDriver.for :chrome, :profile => profile 
```

但我想在几台远程机器上使用运行代码并使用这段代码

```
profile = Selenium::WebDriver::Chrome::Profile.new
profile['download.prompt_for_download'] = false
profile['download.default_directory'] = "/mnt/samba/share_location/"
caps = Selenium::WebDriver::Remote::Capabilities.chrome(:profile => profile)
@@driver = Selenium::WebDriver.for(:remote, :url => "http://" +remote_server + ":4444/wd/hub", :desired_capabilities => caps) 
```

第二种变体不起作用，浏览器将文件下载到每台远程计算机上的默认下载位置

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T21:06:02.803

是的，不幸的是，这不是很直观。我会努力为未来的版本改进它。现在有一个解决方法：

```
profile = Selenium::WebDriver::Chrome::Profile.new
profile['download.prompt_for_download'] = false
profile['download.default_directory'] = "/mnt/samba/share_location/"

data = profile.as_json

caps = Selenium::WebDriver::Remote::Capabilities.chrome
caps['chromeOptions'] = {
  'profile'    => data['zip'],
  'extensions' => data['extensions']
}

driver = Selenium::WebDriver.for :remote, :desired_capabilities => caps 
```

# android - Android SharedPreferences 未保存

> ID：10720028
> 
> 赞同：12
> 
> 时间：2012-05-23T12:34:33.667
> 
> 标签：android, sharedpreferences

我已经多次使用共享首选项，但由于某种原因，更改没有保存在我正在测试的新应用程序中。这是重要代码的片段：

```
SharedPreferences sp = getSharedPreferences(getString(R.string.key_preferences), MODE_PRIVATE);
Set<String> widgets = sp.getStringSet(getString(R.string.key_widgets), (new HashSet<String>()));
widgets.add(name + " " + Integer.toString(appWidgetId) + " " + address);
sp.edit().putStringSet(getString(R.string.key_widgets), widgets).commit(); 
```

我使用日志记录来检查小部件是否已添加到集合中，但从未保存更新的集合。如果我将最后一行更改为...

```
sp.edit().putStringSet(getString(R.string.key_widgets), widgets).putString("testkey", "testvalue").commit(); 
```

...然后一切都保存得很好。我错过了什么？

*更新：

我发现这也有效：

```
SharedPreferences sp = getSharedPreferences(getString(R.string.key_preferences), MODE_PRIVATE);
Set<String> widgets = sp.getStringSet(getString(R.string.key_widgets), (new HashSet<String>()));
Set<String> newWidgets = new HashSet<String>();
for (String widget : widgets) newWidgets.add(widget);
newWidgets.add(name + " " + Integer.toString(appWidgetId) + " " + address);
sp.edit().putStringSet(getString(R.string.key_widgets), newWidgets).commit(); 
```

也许我错过了文档中关于需要为编辑器创建一个新对象来保存首选项的内容。

*更新2：

如果我创建一个编辑器对象没有区别：

```
SharePreferences.Editor spe = sp.edit();
spe.putStringSet(getString(R.string.key_widgets), widgets)
spe.commit(); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-12-29T20:59:30.897

我们只需要更仔细地阅读文档

根据[getStringSet](http://developer.android.com/reference/android/content/SharedPreferences.html#getStringSet(java.lang.String,%20java.util.Set<%3cjava.lang.String%3e))

> 请注意，您不得修改此调用返回的集合实例。如果您这样做，则无法保证存储数据的一致性，您也无法修改实例。

事实上，应该在**SharedPreferences.Editor**中注明不要向 putStringSet 发送**一个**以后可能会修改的集合。在修改之前复制从**getStringSet**返回的集合，并在将集合发送到 putStringSet 之前复制它。

```
SharedPreferences myPrefs = getSharedPreferences(myPrefName, MODE_PRIVATE);
HashSet<String> mySet = new HashSet<string>(myPrefs.getStringSet(mySetKey, new HashSet<string()));
....
SharedPreferences.Editor myEditor = myPrefs.edit(); 
```

然后其中之一

```
myEditor.putStringSet(mySetKey, new HashSet<String>(mySet)); 
```

或者

```
myEditor.putStringSet(mySetKey, (Set<String>) mySet.clone()); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-09-08T11:42:27.357

我想稍微改进一下[Chike](https://stackoverflow.com/a/20830010/1825443)的答案。

## 原因

[如果我们看一下实现](http://grepcode.com/file_/repository.grepcode.com/java/ext/com.google.android/android/5.1.1_r1/android/app/SharedPreferencesImpl.java)（自 v4.0.1 以来未更改），**commit()**没有保存到磁盘的原因是显而易见的，它首先提交到内存，然后等待磁盘写入完成：

```
public boolean commit() {
    MemoryCommitResult mcr = commitToMemory();
    SharedPreferencesImpl.this.enqueueDiskWrite(
        mcr, null /* sync write on this thread okay */);
    try {
        mcr.writtenToDiskLatch.await();
    } catch (InterruptedException e) {
        return false;
    }
    notifyListeners(mcr);
    return mcr.writeToDiskResult;
} 
```

**关键是，如果我们使用来自getStringSet()**的相同实例调用**putStringSet()** ，则不会检测到任何变化：

 **```
// Returns true if any changes were made
private MemoryCommitResult commitToMemory() {
    MemoryCommitResult mcr = new MemoryCommitResult();
    ...
            for (Map.Entry<String, Object> e : mModified.entrySet()) {
                String k = e.getKey();
                Object v = e.getValue();
                ...
                    if (mMap.containsKey(k)) {
                        Object existingValue = mMap.get(k);
                        if (existingValue != null && existingValue.equals(v)) {
                            continue;
                        }
                    }
                    mMap.put(k, v);
                }

                mcr.changesMade = true;
                ...
            }
            ...
        }
    }
    return mcr;
} 
```

由于没有进行任何更改，**因此 writeToFile()**很乐意跳过磁盘写入并设置成功标志：

```
private void writeToFile(MemoryCommitResult mcr) {
    // Rename the current file so it may be used as a backup during the next read
    if (mFile.exists()) {
        if (!mcr.changesMade) {
            // If the file already exists, but no changes were
            // made to the underlying map, it's wasteful to
            // re-write the file.  Return as if we wrote it
            // out.
            mcr.setDiskWriteResult(true);
            return;
        }
        ...
    }
    ...
} 
```

## 解决方案

请参考[Chike](https://stackoverflow.com/a/20830010/1825443)的回答，复制 String 集，然后再将其保存到相同的 SharedPreference 键。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T12:41:18.180

您需要保存 Editor 对象，然后调用 commit()（Android 2.3 之前）或 apply()（Android 2.3 及更高版本）。

```
SharedPreferences.Editor editor = sp.edit();
editor.put...
editor.commit(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T10:27:55.643

我遇到了你描述的同样的问题。

我的布尔值和字符串首选项存储没有问题，但是当我尝试存储字符串集时，问题就开始了。

当我将第一个元素添加到字符串集中并存储它时，它就起作用了。但是，当我尝试添加第二个时，它会添加到内存中（我可以刷新一个视图，显示存储在该首选项中的所有元素）。如果我强制关闭我的应用程序并重新启动它，共享首选项只会添加第一个元素。

我调试了我的代码，发现当我添加一个新的 HashSet 时，我存储字符串的 HashSet 没问题，但是更改没有写入持久存储

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T13:13:16.507

对 Shared Preferences 使用以下结构：

**1.创建一个对象**

```
SharedPreferences myPrefs = context.getSharedPreferences(PREF_NAME, MODE_WORLD_READABLE); 
```

**2\. 在共享首选项中保存值：**

为 Shared Preference 创建一个编辑器：

```
SharedPreferences.Editor prefsEditor = myPrefs .edit(); 
```

然后将值放入 Editor ：

```
prefsEditor.putString("KEY", VALUE); 
```

现在提交更改以保存 Shared Preference ：

```
prefsEditor.commit(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-03T08:21:47.580

我将下面的代码放在 onCreate 方法中，所以每次我重新启动应用程序时它都会重置。

```
 preferences.edit().putInt(...).apply(); 
```

请改用此处所述的方法：[https ://stackoverflow.com/a/28789934/11266070](https://stackoverflow.com/a/28789934/11266070)

```
 SharedPreferences sharedPrefs = getSharedPreferences("sp_name", MODE_PRIVATE);
    SharedPreferences.Editor ed;
    if(!sharedPrefs.contains("initialized")){
        ed = sharedPrefs.edit();

        //Indicate that the default shared prefs have been set
        ed.putBoolean("initialized", true);

        //Set some default shared pref
        ed.putString("myDefString", "wowsaBowsa");

        ed.commit();
    } 
```

希望这会提醒某人...**

# c# - 如何为面板进行双缓冲？

> ID：10720030
> 
> 赞同：2
> 
> 时间：2012-05-23T12:34:38.130
> 
> 标签：c#, winforms, multithreading, graphics, double-buffering

我正在尝试进行双缓冲以消除闪烁，但重新绘制图像闪烁。我需要在新位置的栏中以周期性方式重绘图像，它对我有用。但重绘时闪烁非常明显。请帮忙。

```
namespace CockroachRunning
{
    public partial class Form1 : Form
    {
        Random R = new Random();
        Semaphore s1 = new Semaphore(2, 4);
        Bitmap cockroachBmp = new Bitmap(Properties.Resources.cockroach, new Size(55, 50));
        List<Point> cockroaches = new List<Point>();
        public Form1()
        {
            InitializeComponent();
            this.DoubleBuffered = true;
            cockroaches.Add(new Point(18,13));
            Thread t1 = new Thread(Up);
            t1.Start();
        }
        public void Up()
        {
            while (true) 
            {
                s1.WaitOne();
                int distance = R.Next(1, 6);
                for (int i = 0; i < distance; i++)
                {
                    if (cockroaches[0].Y - 1 > -1)
                    {
                        cockroaches[0] = new Point(cockroaches[0].X, cockroaches[0].Y - 1);
                        panel1.Invalidate();                        
                    }
                }
                s1.Release();
                Thread.Sleep(100);
            }
        }
        private void panel1_Paint(object sender, PaintEventArgs e)
        {
            Image i = new Bitmap(panel1.ClientRectangle.Width, panel1.ClientRectangle.Height);
            Graphics g = Graphics.FromImage(i);
            Graphics displayGraphics = e.Graphics;
            g.DrawImage(cockroachBmp, cockroaches[0]);
            displayGraphics.DrawImage(i, panel1.ClientRectangle);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T12:38:22.110

为了摆脱闪烁，我使用以下设置来配置控件的行为方式：

```
base.DoubleBuffered = true;

SetStyle(ControlStyles.AllPaintingInWmPaint, true);
SetStyle(ControlStyles.ResizeRedraw, true);
SetStyle(ControlStyles.UserPaint, true);
SetStyle(ControlStyles.OptimizedDoubleBuffer, true);
UpdateStyles(); 
```

我在[`Control`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.aspx)派生类的构造函数中调用它。我不确定这是否也适用于表单，但我想它确实有效。

然后在`void OnPaintBackground(PaintEventArgs e)`（擦除客户区）和`void OnPaint(PaintEventArgs e)`（实际绘图）中完成绘图。

# phpstorm - 最初在 phpstorm 中折叠某些（代码）块？

> ID：10720043
> 
> 赞同：0
> 
> 时间：2012-05-23T12:35:50.017
> 
> 标签：phpstorm

我知道 phpstorm 支持某些 PHPDOC 注释来执行某些解析器操作，例如代码检查不检查某些区域。

现在我想知道是否有这样的注释（甚至是正确的词？）来折叠某些代码块（甚至是类/方法/函数）以在加载文件时始终最初折叠该块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T14:32:17.477

PhpStorm 4.0 中引入了[自定义代码折叠区域。](http://blog.jetbrains.com/webide/2012/03/new-in-4-0-custom-code-folding-regions/)

# blackberry - 黑莓 httpConnection 无法处理错误 200

> ID：10720044
> 
> 赞同：0
> 
> 时间：2012-05-23T12:35:52.667
> 
> 标签：blackberry, httpconnection

我无法收到我的错误信息。当连接正常时，我可以看到消息“连接正常”。但是当我想连接到“坏”的 ip 服务器时，我看不到“连接错误”的消息。为什么是这样？我等了 2 分钟（我读取连接有 2 分钟超时）但没有任何反应。

我想要做的是取消我的连接并显示一条消息是连接不好或者我无法从服务器获取信息。

```
public void run() {

        try {

            conn = (HttpConnection) Connector.open(URL);

            int status = conn.getResponseCode();

            if (status != HttpConnection.HTTP_OK) {
                UiApplication.getUiApplication().invokeLater(new Runnable() {
                    public void run() {
                        mainScreen.add(new RichTextField("Bad Connection"));
                    }
                });
                conn.close();
                return;
            }

            InputStream contentIn = conn.openInputStream();
            byte[] data = new byte[400];
            int length = 0;

            StringBuffer raw = new StringBuffer();
            while (-1 != (length = contentIn.read(data))) {
                raw.append(new String(data, 0, length));
                str = raw.toString();
                conn.close();
                UiApplication.getUiApplication().invokeLater(new Runnable() {
                    public void run() {
                        mainScreen.add(new RichTextField("Connection OK"));
                    }
                });
            }
        } catch (Exception e) {

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T17:07:29.673

如果你的坏服务器没有运行，连接就会超时。这将从对 Connector.open() 的调用中引发异常，并且您的 catch 处理程序是空的，因此什么也不会发生。尝试将一些 UI 代码添加到您的异常处理程序。

# javascript - 动画加载图标在 jquery show 上没有动画

> ID：10720045
> 
> 赞同：0
> 
> 时间：2012-05-23T12:35:54.577
> 
> 标签：javascript, jquery

我不确定我这样做是否正确。我有这段代码。在 css loadingDiv 中是 display:none。因此，当我单击 li 时，会显示 loadingDiv 并调用表单，但动画 gif 不会动画。如果我将 display: 设置为阻止只是为了确保，它会按照您的预期进行动画处理，但我当然希望该 div 在单击之前隐藏。有一个更好的方法吗？

```
 $(function() {
       $( ".tc-group-li" ).live("click", function(event){
           var $item = $( this ),
               $target = $( event.target );

           $('.loadingDiv', $item).show();
           $('.tc-group-name', $item).html('');
           $('#gid').val($item.attr('id'));
           $('#tc-form').submit();
       });
   });

<li  class="tc-group-li" id="<%=TcGroupDesc.getID(x)%>" >
     <div class="loadingDiv">&nbsp;</div>
     <div class='tc-group-name'>
        <%=TcGroupDesc.getGroupName(x)%>
     </div>
</li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:02:26.197

在加载 div 中放置一个动画 gif。我假设您使用的是背景图像。

`<div class="loadingDiv"><img src="loading.gif" alt="loading" /></div>`

更新

```
.loadingDiv img {display:none}

<div class="loadingDiv">
<img src="loading.gif" class="load1" alt="loading" />
<img src="loading.gif" class="load2" alt="loading" />
<img src="loading.gif" class="load3" alt="loading" />
</div>

 $('.loadingDiv img.load1', $item).show();  //  $('.loadingDiv img.load1', $item).show().parent().show();
 $('.loadingDiv', $item).show(); 
```

或者

```
<div class="loadingDiv">
<img src="loading.gif" class="loading" alt="loading" />

</div>

 $('.loadingDiv img', $item).attr('src', 'loading2.gif');
 $('.loadingDiv', $item).show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:05:06.040

您可以尝试使用[.fadeOut()](http://api.jquery.com/fadeOut/)和[.fadeIn()](http://api.jquery.com/fadeIn/)而不是 .show() 和 .hide()。

# graph - GraphViz - 在多行中创建集群集群

> ID：10720048
> 
> 赞同：0
> 
> 时间：2012-05-23T12:36:06.790
> 
> 标签：graph, graphviz

我非常感谢您对我想要的图表的帮助。我希望从一个起始集群有许多其他集群的标签，而这些集群又应该组织成多行。

到目前为止，我已经编写了以下代码：

```
digraph g{
rankdir="TB";
compound=true;

subgraph cluster0{
label="Cluster 0";
a0->b0;
b0->c0;
a0->c0;
}

subgraph cluster1{
label="Cluster 1";
a1->b1;
b1->c1;
a1->c1;
}

subgraph cluster2{
label="Cluster 2";
a2->b2;
b2->c2;
a2->c2;
}

subgraph cluster3{
label="Cluster 3";
a3->b3;
b3->c3;
a3->c3;
}

subgraph cluster4{
label="Cluster 4";
a4->b4;
b4->c4;
a4->c4;
}

a0->a1 [ltail=cluster0,lhead=cluster1];
a0->a2 [ltail=cluster0,lhead=cluster2];
a0->a3 [ltail=cluster0,lhead=cluster3];
a0->a4 [ltail=cluster0,lhead=cluster4];

} 
```

尽管此代码生成了我的集群并适当地互连它们，但不幸的是所有集群（即集群 1、2、3 和 4）都在同一行，而我希望集群 1 和 2 在一行中，集群 3 和 4在另一行，正好在包含集群 1 和 2 的行的下方。

尽管集群组织在一起，但通过使用不可见的链接，它们没有正确对齐（在列中），而且内部节点序列似乎很纠结（例如，参见下面稍微复杂的情况，我希望标记为 4 的节点始终在顶部，其余节点 1,2 和 3 应按从左到右的相应顺序放置）

```
digraph g {
compound=true;
fontname=Helvetica
page="8.5,11";
size="135";
overlap=false;

subgraph cluster0 {
"start-0" [ label = "4" ];
"n1-0" [ label = "1" ];
"start-0" -> "n1-0" ;
"n2-0" [ label = "2" ];
"start-0" -> "n2-0" ;
"n3-0" [ label = "3" ];
"start-0" -> "n3-0" ;
subgraph 00 { rank = same;  "n1-0" "n2-0" "n3-0" }
}
subgraph cluster1 {
"start-1" [ label = "4" ];
"n1-1" [ label = "1" ];
"start-1" -> "n1-1" ;
"n2-1" [ label = "2" ];
"start-1" -> "n2-1" ;
"n3-1" [ label = "3" ];
"start-1" -> "n3-1" ;
subgraph 01 { rank = same;  "n1-1" "n2-1" "n3-1" }
}
"start-0" -> "start-1" [ltail=cluster0,lhead=cluster1];
subgraph cluster2 {
"start-2" [ label = "4" ];
"n1-2" [ label = "1" ];
"start-2" -> "n1-2" ;
"n2-2" [ label = "2" ];
"start-2" -> "n2-2" ;
"n3-2" [ label = "3" ];
"start-2" -> "n3-2" ;
subgraph 02 { rank = same;  "n1-2" "n2-2" "n3-2" }
}
"start-0" -> "start-2" [ltail=cluster0,lhead=cluster2];
subgraph cluster3 {
"start-3" [ label = "4" ];
"n1-3" [ label = "1" ];
"start-3" -> "n1-3" ;
"n2-3" [ label = "2" ];
"start-3" -> "n2-3" ;
"n3-3" [ label = "3" ];
"start-3" -> "n3-3" ;
subgraph 03 { rank = same;  "n1-3" "n2-3" "n3-3" }
}
"start-0" -> "start-3" [ltail=cluster0,lhead=cluster3];
subgraph cluster4 {
"start-4" [ label = "4" ];
"n1-4" [ label = "1" ];
"start-4" -> "n1-4" ;
"n2-4" [ label = "2" ];
"start-4" -> "n2-4" ;
"n3-4" [ label = "3" ];
"start-4" -> "n3-4" ;
subgraph 04 { rank = same;  "n1-4" "n2-4" "n3-4" }
}
"start-0" -> "start-4" [ltail=cluster0,lhead=cluster4];
subgraph cluster5 {
"start-5" [ label = "4" ];
"n1-5" [ label = "1" ];
"start-5" -> "n1-5" ;
"n2-5" [ label = "2" ];
"start-5" -> "n2-5" ;
"n3-5" [ label = "3" ];
"start-5" -> "n3-5" ;
subgraph 05 { rank = same;  "n1-5" "n2-5" "n3-5" }
}
"start-0" -> "start-5" [ltail=cluster0,lhead=cluster5];

subgraph cluster6 {
"start-6" [ label = "4" ];
"n1-6" [ label = "1" ];
"start-6" -> "n1-6" ;
"n2-6" [ label = "2" ];
"start-6" -> "n2-6" ;
"n3-6" [ label = "3" ];
"start-6" -> "n3-6" ;
subgraph 06 { rank = same;  "n1-6" "n2-6" "n3-6" }
}
"start-0" -> "start-6" [ltail=cluster0,lhead=cluster6];
subgraph cluster7 {
"start-7" [ label = "4" ];
"n1-7" [ label = "1" ];
"start-7" -> "n1-7" ;
"n2-7" [ label = "2" ];
"start-7" -> "n2-7" ;
"n3-7" [ label = "3" ];
"start-7" -> "n3-7" ;
subgraph 07 { rank = same;  "n1-7" "n2-7" "n3-7" }
}
"start-0" -> "start-7" [ltail=cluster0,lhead=cluster7];
subgraph cluster8 {
"start-8" [ label = "4" ];
"n1-8" [ label = "1" ];
"start-8" -> "n1-8" ;
"n2-8" [ label = "2" ];
"start-8" -> "n2-8" ;
"n3-8" [ label = "3" ];
"start-8" -> "n3-8" ;
subgraph 08 { rank = same;  "n1-8" "n2-8" "n3-8" }
}
"start-0" -> "start-8" [ltail=cluster0,lhead=cluster8];
subgraph cluster9 {
"start-9" [ label = "4" ];
"n1-9" [ label = "1" ];
"start-9" -> "n1-9" ;
"n2-9" [ label = "2" ];
"start-9" -> "n2-9" ;
"n3-9" [ label = "3" ];
"start-9" -> "n3-9" ;
subgraph 09 { rank = same;  "n1-9" "n2-9" "n3-9" }
}
"start-0" -> "start-9" [ltail=cluster0,lhead=cluster9];
subgraph cluster10 {
"start-10" [ label = "4" ];
"n1-10" [ label = "1" ];
"start-10" -> "n1-10" ;
"n2-10" [ label = "2" ];
"start-10" -> "n2-10" ;
"n3-10" [ label = "3" ];
"start-10" -> "n3-10" ;
subgraph 010 { rank = same;  "n1-10" "n2-10" "n3-10" }
}
"start-0" -> "start-10" [ltail=cluster0,lhead=cluster10];

"n1-0" -> "start-1" [style=invis];
"n1-0" -> "start-2" [style=invis];
"n1-0" -> "start-3" [style=invis];
"n1-0" -> "start-4" [style=invis];
"n1-0" -> "start-5" [style=invis];

"n3-1" -> "start-6" [style=invis];
"n3-2" -> "start-7" [style=invis];
"n3-3" -> "start-8" [style=invis];
"n3-4" -> "start-9" [style=invis];
"n3-5" -> "start-10" [style=invis];

} 
```

有什么方法可以使用点来实现吗？

非常感谢您提前提供的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:49:32.060

您可以尝试添加一些**不可见的边缘**：

```
c0->a1 [style=invis];
c0->a2 [style=invis];
c1->a3 [style=invis];
c2->a4 [style=invis]; 
```

并在需要时从那里进一步改进。

这可以确保集群位于不同的等级上。

# python - 覆盖 Account/context_processors.py (Pinax/Django)

> ID：10720049
> 
> 赞同：0
> 
> 时间：2012-05-23T12:36:14.387
> 
> 标签：python, django, pinax

我正在尝试覆盖 Pinax 项目的默认 Account/context_processors.py。

但是，每次我尝试，它都找不到文件并继续使用默认值。

默认项目中文件的路径为：pinax/apps/account/context_processors.py

我尝试将自定义版本的 context_processors.py 放在我项目的以下位置：

1.  myapp/apps/account/context_processors.py
2.  myapp/account/context_processors.py
3.  myapp/pinax/context_processors.py

我认为第一个将是要走的路。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:51:02.893

Django 依赖于[`TEMPLATE_CONTEXT_PROCESSORS`](https://docs.djangoproject.com/en/1.4/ref/settings/#std%3asetting-TEMPLATE_CONTEXT_PROCESSORS)定位和导入上下文处理器。它与模板搜索的行为有点不同。
因此`TEMPLATE_CONTEXT_PROCESSORS`，在设置文件中覆盖以更改`"pinax.apps.account.context_processors.account"`为您的导入路径。

# c# - 拖动和滚动 (WPF)

> ID：10720050
> 
> 赞同：3
> 
> 时间：2012-05-23T12:36:20.330
> 
> 标签：c#, wpf

好的，伙计们，我一直在为这个问题抓狂，并且花了好几个小时试图研究它是如何工作的，但我还没有找到答案。

基本上我遇到的问题是我的应用程序中有一个文件夹树视图，即：

```
Catalog

  Brands
    Nike
    Adidas
    Lactose

  Styles
    Sandles
    Trainers
    Boots 
```

我要解决的问题是，当我拖动文件夹时（这在我的 DragDropManager 类中处理），我无法向上或向下滚动（仅显示一个可爱的停止标志）。

如果我想将某些东西从最顶部移动到最底部，这是一个问题。

滚动无需拖动即可自行正常工作。

如果有人希望看到我的代码的任何部分，请随时询问，因为我不确定要向你们展示什么。

我已经阅读了好几篇文章，只是摸不着头脑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:51:25.947

可能有更好的方法，但我所做的是：

*   在拖动目标元素 (QueryContinueDrag) 期间，您检查您所在的控件是否在其可视树中具有滚动查看器。

*   现在检查您是否靠近滚动查看器的边缘，例如 10 像素。

*   滚动滚动查看器

这是一些代码：

查找关联的 ScrollViewer：

```
var _scrollViewerControl = FindVisualChild<ScrollViewer>(treeView);

private childItem FindVisualChild<childItem>(DependencyObject obj)
where childItem : DependencyObject
{
  for (int i = 0; i < VisualTreeHelper.GetChildrenCount(obj); i++)
  {
    DependencyObject child = VisualTreeHelper.GetChild(obj, i);
    if (child != null && child is childItem)
      return (childItem)child;
    else
    {
      childItem childOfChild = FindVisualChild<childItem>(child);
      if (childOfChild != null)
        return childOfChild;
    }
  }
  return null;
} 
```

在 QueryContinueDrag 中确定当前位置和滚动查看器的增量：

```
// as we don't have eventargs here exposing the current mouse position we use the
// win32 API to get the current mouse position
Win32.POINT p;
if (!Win32.GetCursorPos(out p))
{
    return;
}

//this is the point on the screen
Point point = new Point(p.X, p.Y);

//get position relative to scrollViewerControl
Point controlPoint = _scrollViewerControl.PointFromScreen(point);

if (controlPoint.Y < 10 && -10 < controlPoint.Y)
{
    _scrollViewerControl.LineUp();
}
else if (controlPoint.Y > _scrollViewerControl.ViewportHeight - 10 && _scrollViewerControl.ViewportHeight + 10 > controlPoint.Y)
{
    _scrollViewerControl.LineDown();
}

if (controlPoint.X < 10 && -10 < controlPoint.X)
{
    _scrollViewerControl.LineLeft();
}
else if (controlPoint.X > _scrollViewerControl.ViewportWidth - 10 && _scrollViewerControl.ViewportWidth + 10 > controlPoint.X)
{
    _scrollViewerControl.LineRight();
} 
```

# sencha-touch - 如何在 sencha 中实现自定义小部件？

> ID：10720057
> 
> 赞同：0
> 
> 时间：2012-05-23T12:36:58.740
> 
> 标签：sencha-touch, custom-component

如图所示，我计划在 sencha 中实现自定义小部件。![在此处输入图像描述](../Images/464a13113d5690dbc3377ea9fe2be5ef.png)

是否有任何机构对如何实施它有任何想法？任何线索都会非常有帮助。

谢谢

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-05-23T12:45:18.190

试试看../resources/css/sencha_touch.css 你能修改类吗。我希望能帮助你。

# javascript - 使用函数添加到 div

> ID：10720061
> 
> 赞同：-1
> 
> 时间：2012-05-23T12:37:18.803
> 
> 标签：javascript, html

我在下面有这个函数，我需要将它的结果附加到一个名为 test 的 div 中。我该怎么做？

```
function(response) {
    alert('Your name is ' + response[0].name);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:44:21.597

我猜你有类似的东西：

```
<div id="test"></div> 
```

在您的 HTML 中。

另外，我猜您希望附加 的值，`response[0].name`因为您的函数没有返回语句。

在这种情况下：

```
var testdiv = document.getElementById("test");
testdiv.innerHTML += response[0].name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T12:44:28.200

为了附加数据，而不仅仅是覆盖那里的数据，您需要使用它

```
function(response) {
    //Get current HTML in div
    current = document.getElementById('test').innerHTML;
    //Add your code to the current HTML.  You may want a <br /> in there.
    document.getElementById('test').innerHTML = current + 'Your name is ' + response[0].name;
} 
```

当然，这可以概括为：

```
document.getElementById('test').innerHTML += 'Your name is ' + response[0].name; 
```

# cocoa - 支持层的 NSView 兄弟姐妹是否允许重叠？

> ID：10720062
> 
> 赞同：11
> 
> 时间：2012-05-23T12:37:21.933
> 
> 标签：cocoa, core-animation, calayer, nsview

我有点困惑。[苹果文档](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CocoaViewsGuide/WorkingWithAViewHierarchy/WorkingWithAViewHierarchy.html#//apple_ref/doc/uid/TP40002978-CH4-SW16)说明了这一点：

> 注意：出于性能原因，Cocoa 不强制在同级视图之间进行裁剪，也不保证在同级视图重叠时正确的失效和绘制行为。如果你想在另一个视图前面绘制一个视图，你应该使前视图成为后视图的子视图（或后代）。

所以根据这个，兄弟视图不应该重叠，否则行为是不确定的。

然而，在[Cocoa Slides 演示应用程序](https://developer.apple.com/library/mac/#samplecode/CocoaSlides/Introduction/Intro.html#//apple_ref/doc/uid/DTS10004072)中，支持图层的 NSView 兄弟姐妹**确实重叠**，并且似乎工作得很好：

![可可幻灯片截图](../Images/2480cb51d2947ee0480dce3681df9f11.png)

那么 Cocoa Slides 示例代码是错误的，它的工作原理只是巧合，还是文档已过时？自 10.5 以来已过时，是吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-23T23:20:03.617

在 Leopard 和更高版本上，重叠视图可以正常工作，无论是否支持图层。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-23T12:37:22.590

经过一番研究，苹果文档似乎确实已经过时了。

**从 10.5 开始，支持层的 NSView 兄弟姐妹允许重叠。**

这场[2009](http://www.cocoabuilder.com/archive/cocoa/228191-nsview-behaves-different-on-10-4-vs-10-5.html)年涉及苹果工程师 David Duncan 和[Corbin Dunn](http://www.corbinstreehouse.com/blog/about/)的讨论最终提供了一些明确的答案：

> 重叠视图适用于 Leopard，但在此之前不起作用。文档已过期。
> 
> > 我有一组视图，每个视图内部都有许多较小的视图，它们需要以重叠的方式呈现在窗口上的同一个矩形上，以便它们可以相互看到。在我的初步测试中，我将每个大视图作为单个背景视图的兄弟。计划在必要时通过重新排列 z 顺序将每个都放在前面。这种方法有未来（或现在）吗？
> 
> 这将适用于 Leopard。

来源： http: [//www.cocoabuilder.com/archive/cocoa/228191-nsview-behaves-different-on-10-4-vs-10-5.html#228983](http://www.cocoabuilder.com/archive/cocoa/228191-nsview-behaves-different-on-10-4-vs-10-5.html#228983)

**更新**：*詹姆斯登普* [西也在推特上回复](https://twitter.com/#!/jamesdempsey/status/205298803828469762)：

> 我的理解是，从 10.5 开始，重叠的兄弟视图都可以，无论是否有图层支持。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-23T12:58:15.533

支持层的视图由 OpenGL 分层（嗯，Quartz 合成器，但它有助于将每一层视为一个带有 OpenGL 纹理的多边形），因此它们始终支持正确的重叠。

CocoaBuilder/Cocoa-Dev 上的线程根本没有提到层。这意味着它谈论没有支持 CALayer 的常规 NSView（或者更确切地说，整个窗口只有一个 CALayer）。

提到的一个例外是 OpenGLView（同样，没有图层），它总是在窗口顶部合成它的 OpenGL 矩形，消除任何子视图。我不认为制作一个支持 NSOpenGLView 层的作品，但可以使用一个 OpenGL 层，它将在其他层之间正确合成。

另一个例外是非层支持视图之上的层，这是有道理的，因为所有非层支持的视图都有效地驻留在一个层中，该层当然位于其任何子层之下（由层支持的视图托管在非层支持的父视图中必须是）。

所以简而言之，它从 10.5 开始适用于非分层视图，并且永远适用于分层支持的视图，当您混合匹配或使用 OpenGL 时需要注意。

PS - 不过，我不是 100% 肯定关于重叠的非层支持视图的声明应该被视为规范。这是苹果工程师的非正式声明。事情可能已经改变，并且可能已经发现了使事情无法正常工作的错误。当我想要正确重叠时，我通常使用图层。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-19T07:56:27.950

它可能对某人有用：我遇到了在 MacOS 10.7+ 上闪烁重叠的非分层子视图的问题。在我的应用程序中，视图用于呈现有关所选图形对象（选择框、缩放控制点等）的一些信息，因此它们具有一些**动画**- 这对我来说是关键。

即使没有图层，重叠的兄弟姐妹似乎也能正常工作，但在更简单的情况下。我有一堆动画视图，每个都有它自己的计时器——它轻弹。我找到了两种解决方案：打开**图层**或**同步动画**，切换到单个共享计时器并同时更新所有视图。

至少这个技巧在我的应用程序中有所帮助，因为我不想使用图层。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-05-30T18:33:25.843

NSView 兄弟通常允许重叠。不过，您可能会遇到的一件事是 NSScrollView 默认是如何工作的。当您有一个与兄弟视图重叠的香草 NSScrollView 时，事情就会中断。

那是因为 NSClipView 只绘制视图中滚动的部分并复制未更改的内容。当您有与滚动视图重叠的兄弟视图时，此优化不起作用并且视图似乎滚动，即使它们只是兄弟视图。

为了使重叠的同级视图即使在没有层支持的情况下也能正常工作，您因此必须禁用此优化：

```
[scrollView.contentView setCopiesOnScroll:NO]; 
```

# c# - ITextSharp：文本未环绕单元格内的图像

> ID：10720064
> 
> 赞同：4
> 
> 时间：2012-05-23T12:37:30.223
> 
> 标签：c#, image, pdf, itextsharp

我遇到了真正的问题，我有一个带有短语的单元格，我想要短语左侧的小图标，但每个元素都在新行上呈现

这是我返回单元格的代码：

```
var cell = new PdfPCell();
Bitmap bitmap = new Bitmap(21, 21);
Graphics g = Graphics.FromImage(bitmap);

g.Clear(Color.White);

SolidBrush brush = new SolidBrush(colour);
g.FillEllipse(brush, 0, 0, 20, 20);
brush.Dispose();

g.DrawImageUnscaled(bitmap, 0, 0);

g.Dispose();

var imgIcon = iTextSharp.text.Image.GetInstance(bitmap, System.Drawing.Imaging.ImageFormat.Jpeg);
bitmap.Dispose();
//imgIcon.Alignment = iTextSharp.text.Image.TEXTWRAP | iTextSharp.text.Image.ALIGN_RIGHT;
cell.AddElement(imgIcon);

var phrase = new Phrase(o.ToString(), Report.Fonts.Table);
cell.AddElement(phrase);

//this code scales the image so that it does not fit the cell
foreach (IElement element in cell.CompositeElements)
{
     PdfPTable tblImg = element as PdfPTable;
     if (tblImg != null)
     {
         tblImg.TotalWidth = 10;
         tblImg.LockedWidth = true;
     }
}
return cell; 
```

这是输出：

![在此处输入图像描述](../Images/cb4615a9794068dce918eddaedf82432.png)

任何帮助将不胜感激

--edit：这是设置了 imgIcon 的对齐属性的输出

![在此处输入图像描述](../Images/64e508edf353f0f1c4d4b05c6895e3c8.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T07:54:43.313

iTextSharp`Image`对象显示为*块*元素（在 CSS 术语中）。您需要显式包装`Image`in a`Chunk`以获得*内联*显示，如下所示：

```
PdfPTable table = new PdfPTable(1) {
  TotalWidth = 100, LockedWidth = true, 
  HorizontalAlignment = Element.ALIGN_LEFT
};
PdfPCell cell = new PdfPCell();
Phrase p = new Phrase(new Chunk(image, 0, 0));
p.Add(new Phrase("Print"));
cell.AddElement(p);
table.AddCell(cell);

cell = new PdfPCell();
p = new Phrase(new Chunk(image, 0, 0));
p.Add(new Phrase("A long phrase that will make the PdfPCell wrap it's containing text."));
cell.AddElement(p);
table.AddCell(cell);
document.Add(table); 
```

代码片段结果：

![代码片段结果](../Images/d4ea638691f903c31ec0c8c01d4b932c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:43:23.133

我认为这个答案：

[文本中的图像对齐？](https://stackoverflow.com/questions/1451045/itextsharp-image-alignment-in-text)

或许有答案。您需要设置图像的对齐方式：

```
....
imgIcon.Alignment = 6;
cell.AddElement(imgIcon);
.... 
```

# c++ - 在 C++ 中重命名目录

> ID：10720065
> 
> 赞同：1
> 
> 时间：2012-05-23T12:37:31.753
> 
> 标签：c++, directory, naming

我试图将目录重命名为与 C++ 测试中的现有目录相同的名称。我试过 SHFileOperation。这实际上主要工作。问题是我们有一个自动测试，由于某种原因，在自动测试期间，测试在这里失败了。在手动运行时工作正常，但自动化不是那么多。我们认为即使我将标志设置为不允许，也可能会弹出一些对话框。我还尝试重命名 C++ 函数。尝试将某些内容重命名为现有名称时，重命名似乎不起作用。

那么我还有其他方法可以使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:10:23.067

如果这对您很重要，您可以尝试`boost::filesystem`哪个具有便携性的优势。

```
namespace bfs=boost::filesystem;

std::string name("old_dir", "new_dir");

system::error_code ec = bfs::rename(name, new_name); 
```

`ec`可以在[此处](http://www.boost.org/doc/libs/1_39_0/boost/system/error_code.hpp)引用的is 和错误代码对象，以便您检查错误情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T14:04:29.027

我肯定会选择 boost，但如果你不能使用它，你必须知道 C++ 没有对此类文件操作的内置支持。

你能做的最好的就是使用 C 的 rename()：

[http://en.cppreference.com/w/c/io/rename](http://en.cppreference.com/w/c/io/rename)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-07T14:29:38.923

您可以尝试也适用于目录的 MoveFile。尽管我怀疑是否有任何 API 能够将某些内容重命名为已经存在的名称。 [https://msdn.microsoft.com/en-us/library/windows/desktop/aa365239(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/aa365239(v=vs.85).aspx)

# php - socket_bind()：无法绑定地址 [99]（Amazon EC2 上的 Ubuntu）

> ID：10720067
> 
> 赞同：2
> 
> 时间：2012-05-23T12:37:39.297
> 
> 标签：php, sockets, amazon-ec2

我正在尝试在 EC2 实例上使用套接字，但是当我尝试运行代码时出现以下错误：

> PHP 警告：socket_bind()：无法绑定地址 [99]：无法在第 45 行的 sockets_test.php 中分配请求的地址

以下是相关代码的一部分：

```
$CFG = new stdClass();
$CFG->chat_serverip = 'MY_PUBLIC_EC2_IP';
$CFG->chat_serverport = '9111';

$listen_socket = socket_create(AF_INET, SOCK_STREAM, 0))
socket_bind($listen_socket, $CFG->chat_serverip, $CFG->chat_serverport) 
```

如果我使用 127.0.0.1 或私有 IP，这工作得很好。我的安全组有以下规则：

```
0-65535 0.0.0.0/0 (TCP)
0-65535 0.0.0.0/0 (UDP)
ALL 0.0.0.0/0 (ICMP) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T13:58:52.553

您不能绑定到外部 IP，您必须绑定到内部 IP，并设置一个规则以允许该端口，因此当他们连接到外部 IP 和端口时，它会被重定向到内部 IP。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-01-30T03:25:50.443

The **phantomjs** has some question,

we need bind the **internal ip** of We can see at *ifconfig*, not **external IP** of We can`t see at that.

# f# - .fsproj 文件的 #I 等价物是什么？

> ID：10720068
> 
> 赞同：6
> 
> 时间：2012-05-23T12:37:39.220
> 
> 标签：f#

我想将脚本转换为项目。在脚本中，我使用#I 设置了引用的.dll 的路径。有没有办法直接在 .fsproj 文件中指定这个路径？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T12:59:35.237

该`fsproj`文件实际上是一个[MS Build](http://msdn.microsoft.com/en-us/library/ms171452%28v=vs.90%29.aspx)脚本，因此您可以使用标准的 MS Build 功能来定义变量（例如您的包含路径）并在项目文件中使用它们。这不像`#I`在 F# 脚本文件中使用指令那么简单，但它应该为您提供类似的功能。

例如，您可以创建一个`Includes.proj`定义包含路径的文件，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" 
    xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <IncludePath>C:\MyIncludePath</IncludePath>
  </PropertyGroup>
</Project> 
```

然后您可以修改`fsproj`文件以引用上述文件并`$(IncludePath)`在您的引用中使用。遗憾的是，这必须在文本编辑器中完成（即卸载项目，修改它然后重新加载它）：

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" 
     xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Import Project="Includes.proj" />
  <!-- lots of other stuff -->
  <ItemGroup>
    <Reference Include="mscorlib" />
    <Reference Include="System" />
    <Reference Include="FSharp.Core" />
    <Reference Include="MyAssembly">
      <HintPath>$(IncludePath)\MyAssembly.dll</HintPath>
    </Reference>
  </ItemGroup>
  <!-- lots of other stuff -->
</Project> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-23T13:16:35.460

`Project Properties`您可以在-> `Reference Paths`->中设置参考文件夹`Add Folder`。

如果您想以编程方式执行此操作，请在下设置参考路径`<Project><PropertyGroup><ReferencePath>...`并在`<Project><ItemGroup><Reference><HintPath>...`. 这是[一个反向执行的脚本](https://gist.github.com/2062683)（从 fsproj 到 fsx 文件），但它可以为您提供一些继续操作的提示。

# callback - ALSA：发生欠载时的通知？

> ID：10720072
> 
> 赞同：0
> 
> 时间：2012-05-23T12:37:43.733
> 
> 标签：callback, notifications, alsa

当播放期间发生欠载时，是否有可能通过 ALSA（通过回调或类似方式）通知？

我会使用 snd_async_handler_t 但不幸的是[snd_async_add_pcm_handler()](http://www.alsa-project.org/alsa-doc/alsa-lib/group___p_c_m.html#g0d343597cdce35871a5010b6e6d5535b)失败，告诉我这个函数没有实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:31:24.853

ALSA 在读取当前位置之前不会注意到发生了欠载，这会发生

*   当您的应用程序调用需要该位置的 ALSA 函数时，或
*   在中断处理程序中，它将唤醒任何当前等待的 snd_pcm_write*() 调用。

因此，在实践中，单独的通知是没有意义的。

通常，您只需检查 snd_pcm_write*() 的返回值，或显式调用 snd_pcm_status()。

# php - PHP 复制 mysql_fetch_array 到一个新的

> ID：10720074
> 
> 赞同：-3
> 
> 时间：2012-05-23T12:37:55.787
> 
> 标签：php, arrays, copy

如何将来自 mysql_fetch_array 的数组复制到另一个数组

**例如：**

```
 mysql connection--------->
    $array = array();
    $row= mysql_fetch_array($query) or die(mysql_error()); 
```

我想将数组 $row 复制到新的 $array

我尝试使用 $row = $array 但是当我转储它时它不起作用，新数组是空的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T12:39:48.720

您可以使用`array_merge($array,$row)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T12:41:23.403

我认为这就是你要找的：

```
$array = $row; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T12:41:48.320

像这样的东西？

```
$array = array();
while ($row = mysql_fetch_array($result, MYSQL_NUM)) {
    $array[] = $row;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T12:43:53.470

尝试：

```
$array = $row; 
```

代替：

```
$row = $array; 
```

# java - 如何连接到 SOAP/WSDL Web 服务？

> ID：10720082
> 
> 赞同：0
> 
> 时间：2012-05-23T12:38:36.387
> 
> 标签：java, web-services, soap, wsdl

我正在实现一个 SOAP/WSDL Web 服务。

我正在尝试使用`Service s = Service.create()`例程，但它没有连接到服务器。那么还有另一种连接到 SOAP/WSDL Web 服务的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:49:57.777

我建议让客户端使用 wsimport。

它将创建必要的存根来调用服务。

如果您这样做只是为了测试，您可以使用soapUI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-21T20:49:11.173

**我建议soapUI**

1.  从 Web 下载 SoapUI（只需下载 SoapUI，无需 SoapUI PRO）
2.  单击文件并选择“新建soapUI项目”
3.  给出任何项目名称并输入 WSDL url（注意 webservice url 后面应该跟“?wsdl”）
4.  它将为您加载 wsdl，然后在请求中输入所需的参数
5.  点击播放按钮（绿色按钮，webservice url 旁边），您将在右侧面板中获得响应

我希望这能帮到您

# php - Wordpress / PHP - 如何显示页面描述

> ID：10720086
> 
> 赞同：0
> 
> 时间：2012-05-23T12:38:54.973
> 
> 标签：php, wordpress, wordpress-theming

我是 wordpress 中模板编辑的新手，我试图让页面描述显示在我的网站上，但它没有出现。我试图显示描述的 URL 在这里：

[http://fourwallsla.com/category/the-neighborhood/east-side/](http://fourwallsla.com/category/the-neighborhood/east-side/)

我已经附上了wordpress中页面描述的截图。它似乎正在使用存档模板（为什么不使用页面模板？）。

以下是归档模板的一些代码：

```
<div class="main">
<?php if (have_posts()) : $first = true; ?>
    <?php $post = $posts[0]; // Hack. Set $post so that the_date() works. ?>
    <?php /* If this is a category archive */ if (is_category()) { ?>
      <h1><?php single_cat_title(); ?></h1>
    <?php /* If this is a tag archive */ } elseif( is_tag() ) { ?>
      <h1><?php single_tag_title(); ?></h1>
    <?php /* If this is a daily archive */ } elseif (is_day()) { ?>
      <h1><?php echo get_the_time('F jS, Y'); ?></h1>
    <?php /* If this is a monthly archive */ } elseif (is_month()) { ?>
      <h1><?php echo get_the_time('F, Y'); ?></h1>
    <?php /* If this is a yearly archive */ } elseif (is_year()) { ?>
      <h1><?php echo get_the_time('Y'); ?></h1>
    <?php /* If this is an author archive */ } elseif (is_author()) { ?>
      <h1><?php _e( 'Author Archive', 'gray_white_black' ); ?></h1>
    <?php /* If this is a paged archive */ } elseif (isset($_GET['paged']) && !empty($_GET['paged'])) { ?>
      <h1><?php _e( 'Blog Archives', 'gray_white_black' ); ?></h1>
    <?php } ?>

    <ul class="post-list">
    <?php while (have_posts()) : the_post(); 
```

其中，在上面的代码中，the_post() 适当地指的是页面上显示的类别中的主页列表的内容。但是如何获取页面本身的 the_post()，如屏幕截图所示？谢谢。

![在此处输入图像描述](../Images/ebf5f267c210f7d79f1095125b96c847.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:00:47.273

它正在使用archive.php 模板，因为您正在检索类别中的所有帖子 - 'In The Neighborhood' 和 'East Side'。如果您希望它使用默认的 page.php，您必须在 Wordress 中发布一个页面。要打印描述（“测试描述”）或帖子的内容，请在`<?php the_content(); ?>`或`<?php the_excerpt(); ?>`之后添加：

```
<?php while (have_posts()) : the_post(); 
```

# php - 如何在 Joomla 标题部分添加多个文章 ID

> ID：10720088
> 
> 赞同：0
> 
> 时间：2012-05-23T12:39:11.020
> 
> 标签：php, joomla

Joomla-如何添加多个文章ID

代码在这里

```
<?php if (JRequest::getVar('view')=='article' && JRequest::getVar('id')==2) { ?>
<script type="text/javascript">

</script>
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:43:22.923

你可以通过修改你的 if 语句来使用 PHP 的[`in_array()`](http://php.net/in_array)函数并传递给它一个文章 ID 的数组来做到这一点：

```
<?php if (JRequest::getVar('view')=='article' && 
          in_array(JRequest::getVar('id'), array(2,3,4,5))) { ?>
<script type="text/javascript">

</script>
<?php } ?> 
```

# java - 通过相同方法（Java）从超级运行的扩展类

> ID：10720089
> 
> 赞同：-1
> 
> 时间：2012-05-23T12:39:11.530
> 
> 标签：java, overriding, extends

我知道标题很混乱，但我想不出另一种措辞。

所以，我想要实现的目标是：我已经看到一些 Java 程序有很多子类，它们在它们的超类中有一个方法，并且它们都在调用 supers 方法时运行。当我调用 Synchroniser.RunAll 方法时，我想要做的是让 Synchroniser 的单个子类运行它们自己的 RunAll 方法。

我尝试了多种方法，并且在 Google 上搜索了很多，但我发现的内容对我不起作用。

这是我所拥有的： SUPER 类

```
public class Synchroniser 
{
    public Synchroniser()
    {
        RunAll();
    }

    protected void RunAll()
    {
        System.out.println("RunAll");
    }
} 
```

子类：

```
import org.lwjgl.input.Keyboard;

public class ArrayList extends Synchroniser
{
    public ArrayList()
    {

    }

    public static void Keybind(Info info)
    {
        info.Toggle();
    }

    @Override
    protected void RunAll()
    {
        System.out.println("Ran ArrayList");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:41:13.740

好像您正在寻找**观察者模式**。你用谷歌搜索过吗？或者可能是**模板方法**？

您的代码不匹配（这可能是它不起作用的原因），但您对问题的描述确实如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:51:48.683

**更新**
根据您的最新评论，@Luchian 是正确的。这是一个应用于您的用例的简单示例 - ps：使用现有的 JDK 类作为您自己的类（ArrayList）的名称不是一个好主意：

```
public class Test {

    public static void main(String[] args) {
        ArrayList child1 = new ArrayList(1);
        ArrayList child2 = new ArrayList(2);
        Synchronizer sync = new Synchronizer(); //prints RunAll in Parent
        sync.addListener(child1);
        sync.addListener(child2);
        sync.runAll(); //prints RunAll in Parent, in Child 1 and in Child 2
    }

    public static interface RunAll {

        void runAll();
    }

    public static class Synchronizer implements RunAll {

        List<RunAll> listeners = new CopyOnWriteArrayList<RunAll>();

        public Synchronizer() {
            runAll();
        }

        public void addListener(RunAll l) {
            listeners.add(l);
        }

        @Override
        public void runAll() {
            System.out.println("RunAll in Parent");
            for (RunAll l : listeners) {
                l.runAll();
            }
        }
    }

    public static class ArrayList implements RunAll {
        private final int i;

        private ArrayList(int i) {
            this.i = i;
        }

        @Override
        public void runAll() {
            System.out.println("RunAll in Child " + i);
        }
    }
} 
```

# css - 如果处于活动状态，则显示 css 子菜单

> ID：10720097
> 
> 赞同：1
> 
> 时间：2012-05-23T12:39:51.853
> 
> 标签：css

有人可以帮我显示活动菜单吗 - 例如。当我选择一个子菜单的顶部菜单（如何有子菜单）时，我想在选择时查看其他菜单项。

请参阅下面链接中的示例。

[在此处输入链接描述](http://jsfiddle.net/PhuBQ/20/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:58:38.700

如果您希望它们在单击时显示，请检查此小提琴[http://jsfiddle.net/thebabydino/S8Kwq/](http://jsfiddle.net/thebabydino/S8Kwq/)

在这种情况下，您必须使用`a:focus + ul, a:active + ul`

如果您希望它们在鼠标悬停时显示，那么您可以使用`a:hover + ul`

# c# - 第一次抛出 SocketException 但我的捕获不起作用

> ID：10720109
> 
> 赞同：3
> 
> 时间：2012-05-23T12:40:26.097
> 
> 标签：c#, wcf, try-catch, socketexception

我有一个 WCF 应用程序，它有时会执行长时间运行的查询。我在客户端创建了代码，该代码了解套接字何时发生超时，并将采取措施稍后重新轮询服务器以获取答案。在 TimeoutException 发生之前，系统会抛出许多第一次机会异常，包括 SocketException。过去，在我发现并处理它们之前，第一次机会异常会大大降低我的应用程序的速度。

我想摆脱这些第一次机会异常，所以我创建了一个 try-catch 块来处理 SocketException 并在 VS2010 中打开异常并重新运行代码。当我这样做时，我看到调试器显示发生了 SocketException，但我的 catch 块从未进入。（见下文）

![在此处输入图像描述](../Images/be6de3f016b67f9b6abbba7a925d3c0f.png)

我发现了许多类似的帖子，包括[C# SocketException 没有被捕获](https://stackoverflow.com/questions/6665563/c-sharp-socketexception-doesnt-get-caught)，但我找到的答案都没有解决如何捕获异常，或者我是否应该担心它。

所以我的问题是：

1）我应该担心这些第一次机会例外吗？

2）如果是这样，我如何让系统捕捉到它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T12:48:17.013

您可以附加一个名为 AppDomain.FirstChanceException 事件的事件

这是您连接到它的方式：

```
 AppDomain.CurrentDomain.FirstChanceException += FirstChanceHandler; 
```

它在应用程序运行的应用程序域上，这里是它的文档。 [http://msdn.microsoft.com/en-us/library/system.appdomain.firstchanceexception.aspx](http://msdn.microsoft.com/en-us/library/system.appdomain.firstchanceexception.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T12:48:24.820

第一次机会异常是已经捕获的抛出异常。

换句话说，不可能捕获第一次机会异常。

您也不必担心它们（通常）。

# c# - 将大整数列表与较小整数列表进行比较的最有效方法是什么？

> ID：10720114
> 
> 赞同：29
> 
> 时间：2012-05-23T12:40:53.657
> 
> 标签：c#, performance, algorithm

目前我有一个`list`100 万个`integers`，我检查每个`integer`2000 个的黑名单`integer`。这大约需要 2 分钟。

```
for(int i = 0; i< MillionIntegerList.Length ; i++)
{
    for(int blacklisted = 0; blacklisted < TwoThousandIntegerList.Length ; blacklisted++)
        if(i==blacklisted)
            i = 0; //Zero is a sentinel value 
} 
```

这总共进行了 2,000,000,000 次迭代（循环）。有没有更好的方法我没有看到？谢谢

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-05-23T12:42:28.453

现在有三个选项 - 前两个更通用，因为它们不依赖于`MillionIntegerList`排序（最初没有指定）。在大列表已经排序的情况下，第三个更*可取*。

**选项1**

是的，使用 LINQ 肯定有更好的方法：

```
var common = MillionIntegerList.Intersect(TwoThousandIntegerList).ToList(); 
```

这将在内部使用通过`HashSet<int>`构建的`TwoThousandIntegerList`，然后查找其中的每个元素——这将比每次`MillionIntegerList`都遍历整个元素要高效得多。`TwoThousandIntegerList`

如果您只想要非黑名单，您需要：

```
var valid = MillionIntegerList.Except(TwoThousandIntegerList).ToList(); 
```

请注意，如果您只需要对结果进行一次迭代，则应删除该`ToList`调用 - 我已将其包含在内以实现结果，以便可以廉价地多次检查它们。如果您只是在迭代，则`Intersect`or的返回值`Except`只会*流式传输*结果，从而在内存使用方面便宜得多。

**选项 2**

如果您不想依赖 LINQ to Objects 的实现细节，但仍需要基于哈希的方法：

```
var hashSet = new HashSet<int>(TwoThousandIntegerList);
hashSet.IntersectWith(MillionIntegerList);
// Now use hashSet 
```

**选项 3**

使用大列表已排序这一事实的方法肯定会很有用。

假设您也不介意先对黑名单进行排序，您可以编写一个像这样的流（和通用）实现（未经测试）：

```
// Note: to use this, you'd need to make sure that *both* sequences are sorted.
// You could either sort TwoThousandIntegerList in place, or use LINQ's OrderBy
// method.

public IEnumerable<T> SortedIntersect<T>(this IEnumerable<T> first,
    IEnumerable<T> second) where T : IComparable<T>
{
    using (var firstIterator = first.GetEnumerator())
    {
        if (!firstIterator.MoveNext())
        {
            yield break;
        }

        using (var secondIterator = second.GetEnumerator())
        {
            if (!secondIterator.MoveNext())
            {
                yield break;
            }
            T firstValue = firstIterator.Current;
            T secondValue = secondIterator.Current;

            while (true)
            {
                int comparison = firstValue.CompareTo(secondValue);
                if (comparison == 0) // firstValue == secondValue
                {
                    yield return firstValue;
                }
                else if (comparison < 0) // firstValue < secondValue
                {
                    if (!firstIterator.MoveNext())
                    {
                        yield break;
                    }
                    firstValue = firstIterator.Current;
                }
                else // firstValue > secondValue
                {
                    if (!secondIterator.MoveNext())
                    {
                        yield break;
                    }
                    secondValue = secondIterator.Current;
                }  
            }                
        }
    }
} 
```

（如果你愿意，你可以采用 a`IComparer<T>`而不是依赖于 T 具有可比性。）

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-23T12:54:29.587

由于大列表已排序。通过对小列表进行排序（非常快）然后进行线性合并，您可能会获得最佳结果。您只需要查看大（和小）列表中的每个项目一次，并且不需要在后台创建 Hashtable。

有关如何执行此操作的想法，请参阅 MergeSort 的[合并功能部分。](http://en.wikipedia.org/wiki/Merge_sort)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-23T12:45:43.933

在我看来，您需要的是 Enumerable.Except Method (IEnumerable, IEnumerable)

在这里查看[http://msdn.microsoft.com/en-us/library/bb300779.aspx](http://msdn.microsoft.com/en-us/library/bb300779.aspx)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-23T13:02:44.637

您的方法需要 O(n*n) 时间。考虑这些优化：

*   1)

    如果您的整数不是太大，您可以使用 bool 数组（例如，如果最大可能的整数是 1000000，则使用 bool[] b = new bool[1000000]）。现在要将数字 K 添加到黑名单中，请使用 b[K] = true。检查是微不足道的。这在 O(n) 中有效。您也可以使用 BitArray

*   2)

    整数可以足够大。使用二叉搜索树存储黑名单（例如 SortedSet）。它有 O(logN) 插入和检索时间。所以总的来说它是O（N * logN）。语法与 List (Add(int K), Contains(int K)) 相同，忽略重复项

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-23T13:10:06.723

我认为最好的解决方案是使用[布隆过滤器](http://en.wikipedia.org/wiki/Bloom_filter)，如果布隆过滤器说一个元素可能在黑名单中，只需检查黑名单是否不是误报（可以在 O(Log(n) 中完成）已排序）。该解决方案具有时间效率，并且几乎不使用额外的空间，这使得它比使用哈希集好得多。

这是谷歌在 Chrome 中用于黑名单的解决方案。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-23T13:57:29.077

对较长的列表进行二进制搜索怎么样，因为它是排序的。

```
foreach(integer blacklisted in TwoThousandIntegerList)
{
    integer i  = MillionIntegerList.binarySearch(blacklisted)
    if(i==blacklisted){
          //Do your stuff
    } 
} 
```

该解决方案仅花费*O(m log n)*时间，其中 m 是小列表的大小，n 是较长列表的大小。**警告：**此解决方案假定`MillionIntegerList`没有重复值。

如果不是这种情况，那么您可以遍历重复，因为它们必须位于连续的块中。为此，我将假设这`MillionInterList`是一个记录列表，每个记录都有 a`value`和 an `index`。

```
foreach(integer blacklisted in TwoThousandIntegerList)
{
    integer index = MillionIntegerList.binarySearch(blacklisted)
    //Find the index of the first occurrence of blacklisted value
    while(index > 0 && MillionIntegerList[index - 1].value == blacklisted){
          --index;
    }
    while(MillionIntegerList[index].value == blacklisted){
          //Do your stuff
          ++index;
    } 
} 
```

此解决方案的成本为*O(m log n + mk)*，其中*k*是在 中找到的每个列入黑名单的整数的平均重复数 `MillionInterList`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-23T12:44:40.077

将 HashSet 用于阻止列表。

```
foreach(integer i in MillionIntegerList)
{
        //check if blockedlist contains i
        //do what ever you like. 
} 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-05-23T12:47:22.660

List 的使用`Except`方法。这将起作用

# java - 理解 java return 语句中的类转换异常

> ID：10720117
> 
> 赞同：1
> 
> 时间：2012-05-23T12:41:13.180
> 
> 标签：java, return, classcastexception

我已经阅读了这些页面上有关类强制转换异常的许多其他问题，并且我想确定我的问题本质上是相同的（即与在运行时与编译时相比不知道类的绑定类型有关）。

所以这是我的测试课......

```
public class testCastReturn{
    public test(){

       HashSet<String> StringHash; //a simple hash set

       HashMap(<String, ComplexObject> ObjectInfo; //the String value is the name of the complexObject, and complexObject has multiple members (in this instance it is a java model for a database field so it has info pertaining to Key, size etc)

       //create a ComplexObject here
       addToObjectInfo(aComplexObject); // add it into the HashMap

       //repeat above a number of times....
       //now collect the 'names' of those objects
       StringHash = getObjectKeys();
    }

    public void addToObjectInfo(complexObject c){
        //put a complex object into the HashMap

        ObjectInfo.put(c.getNameID, c); //create a set of key value pairs where the name of the object is the key to get the actual object
    }

    public HashSet<String> getObjectKeys(){
       //retrieve the keys only
       return HashSet<String> this.ObjectInfo.keySet(); //fails with classCastException
       //this however works
       HashSet<String> temp = new HashSet<String>(this.ObjectInfo.keySet());
       return temp;   
    }  
 }//end class 
```

如果我的理解是正确的，这就是为什么我可以以任何一种形式编译我的代码，但我只能运行我明确创建一个临时位置来保存密钥集的代码，因为作为运行时，JVM 不能保证绑定的类型是什么键将在 ComplexObject 中。请记住，这是人为的版本，所以可能过于简化了，在我的实际代码中，我使用的是“构建器”，然后将信息传递给“最终”类，然后这些类中的一堆被保存在三分之一内具有 ComplexObjects 的 HashMap 的对象。

如果您需要任何进一步的信息，请询问（如果您愿意，我什至可以发送我的图书馆的副本）。

大卫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T12:43:33.527

`keySet()`返回 a `Set`，而不是`HashSet`。应该这样`return this.ObjectInfo.keySet();`做。

经验法则：总是通过接口而不是类来引用集合（和一般的对象）。所以更喜欢`List`and`Set`到`ArrayList`and `HashSet`。仅在实例化对象或需要特定于具体实现的某些功能时才使用具体类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T12:46:41.023

```
public Set<String> getObjectKeys(){
   return this.ObjectInfo.keySet();
} 
```

这对你有用吗？

# objective-c - NSOperationQueue 中不需要锁？

> ID：10720118
> 
> 赞同：2
> 
> 时间：2012-05-23T12:41:13.507
> 
> 标签：objective-c, ios, multithreading, nsoperationqueue

我正在阅读 Apple 的文档并发编程指南，我认为 OperationQueue 是一系列操作。文档说我们在大多数情况下都不在 NSOperationQueue 中使用锁。

**问题**

1.  如何使用 NSOperationQueue 实现读写任务？

2.  什么时候在 NSOperationQueue 中使用锁？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-23T13:32:56.993

操作队列不一定是串行队列。您可以通过调用操作队列将其变为串行队列`[queue setMaxConcurrentOperationCount:1]`。否则，默认情况下，`NSOperationQueue`s 是并发的。

您通常应该设计提交给队列的操作，以便它们不需要锁。那是你的责任。这个想法是操作应该是独立的。在提交运行之前，应配置它们需要操作的数据。该数据应该是私人副本；它不应该是操作正在访问的东西，而其他东西也在访问它。当操作运行时，它应该只使用它的私有数据并且不应该访问程序的其他部分。操作完成后，应将其结果提供给程序的其余部分。（这可能是被动的，只需将其结果存储在它自己的属性之一中。然后，可能已经观察到操作完成的程序的其他部分可以读取它。

`NSOperationQueue`不提供对读写锁定的支持。您可以`pthread_rwlock`为此使用 API。但另一种方法是将 GCD 调度队列与屏障任务一起使用。使用 创建私有并发队列`dispatch_queue_create()`。使用 向它提交读取任务`dispatch_[a]sync()`。使用`dispatch_barrier_[a]sync()`.

# c++ - 是否有将范围移动到向量中的标准方法？

> ID：10720122
> 
> 赞同：64
> 
> 时间：2012-05-23T12:41:18.250
> 
> 标签：c++, c++11, insert, stdvector

考虑以下将一系列元素插入向量的程序：

```
vector<string> v1;
vector<string> v2;

v1.push_back("one");
v1.push_back("two");
v1.push_back("three");

v2.push_back("four");
v2.push_back("five");
v2.push_back("six");

v1.insert(v1.end(), v2.begin(), v2.end()); 
```

这有效地复制了范围，在目标向量中为整个范围分配了足够的空间，以便最多需要一次调整大小。现在考虑以下程序，它试图将范围移动到向量中：

```
vector<string> v1;
vector<string> v2;

v1.push_back("one");
v1.push_back("two");
v1.push_back("three");

v2.push_back("four");
v2.push_back("five");
v2.push_back("six");

for_each ( v2.begin(), v2.end(), [&v1]( string & s )
{
    v1.emplace_back(std::move(s));
}); 
```

这执行了成功的移动，但没有享受到 insert() 在目标向量中预分配空间方面的好处，因此在操作期间可以多次调整向量的大小。

所以我的问题是，是否有插入等效项可以将范围移动到向量中？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-05-23T12:48:20.167

您使用`move_iterator`with `insert`：

```
v1.insert(v1.end(), make_move_iterator(v2.begin()), make_move_iterator(v2.end())); 
```

24.5.3 中的例子几乎就是这样。

`vector::insert`如果 (a)使用 iterator-tag dispatch 来检测随机访问迭代器并预先计算大小（您假设它在您的示例中复制），并且 (b)`move_iterator`保留迭代器，您将获得所需的优化它包装的迭代器的类别（标准要求）。

在一个模糊的点上：我很确定`vector::insert`可以从源放置（这在这里无关紧要，因为源与目标的类型相同，所以放置与复制/移动相同，但与其他相同的例子）。我还没有找到必须这样做的声明，我只是从`i,j`传递给的迭代器对的要求`insert`是from的事实`T`推断出来的。`EmplaceConstructible``*i`

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-05-23T12:45:55.830

1.  [`std::move`](http://en.cppreference.com/w/cpp/algorithm/move)预分配算法：

    ```
    #include <iterator>
    #include <algorithm>

    v1.reserve(v1.size() + v2.size()); // optional
    std::move(v2.begin(), v2.end(), std::back_inserter(v1)); 
    ```

2.  以下将更加灵活：

    ```
    v1.insert(v1.end(), 
         std::make_move_iterator(v2.begin()), 
         std::make_move_iterator(v2.end())); 
    ```

    Steve Jessop 提供了关于它具体做什么以及它可能是如何做的背景信息。

# eclipse - 在eclipse项目结构中的动态Web应用程序中将log4j.properties文件存储在哪里？

> ID：10720125
> 
> 赞同：0
> 
> 时间：2012-05-23T12:41:30.527
> 
> 标签：eclipse, log4j

我应该将我的`log4j.properties`文件放在我的**Eclipse**项目结构中的哪个位置，以便在此操作期间找到它：

```
PropertyConfigurator.configure("log4j.properties"); 
```

我找到了以下链接：

[将 Log4j.properties 放入 Eclipse 项目的正确位置在哪里？](https://stackoverflow.com/questions/5081316/where-is-the-correct-location-to-put-log4j-properties-in-an-eclipse-project)

但是根据答案（已选择），我认为该设置是针对服务器本身的，并将
应用于所有项目。但我只希望这个 .properties 文件用于我的相关项目。

我的项目结构是：

```
AccountCeation //project name  
    Java Resources: src  
        com.alw.controllers //packages  
        .....  
        log4j.properties 
```

我总是得到一个`FileNotFoundException`。

**注意：**我正在使用 Spring Framework 开发动态 Web 应用程序。

请指导我在哪里失踪？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-29T15:49:39.283

我能够找到在 Apache Tomcat 6 中运行 Eclipse 动态 Web 项目的解决方案。在 Spring 中可能有一种更优雅的方式来访问上下文并加载资源。

两个基本步骤

(1)将log4j.properties文件拿到war文件的“类目录”中。

(2) 从当前上下文中读取 log4j 属性文件。我发现最好的方法是访问当前线程的上下文并从那里工作。

对于上面的第一步，更改 Eclipse 构建过程以添加一个附加目录，该目录最终将加载到 war 文件中的 WEB-INF/classes 目录中。具体来说....

(1) 在 Eclipse 中，在项目资源管理器中右键单击您的项目，选择“新建”->“文件夹”。您可以将文件夹命名为任何名称，但在这种情况下，标准是“资源”。新文件夹应出现在项目的根级别。

(2) 将 log4j.properties 文件移动到这个新文件夹中。

(3) 再次右击工程，选择'Build-Path'->'Configure Build Path'。选择“来源”选项卡。单击“添加文件夹”按钮。浏览以找到您在上述步骤 (1) 中创建的新文件夹。选择“确定”。

(4) 一旦回到 eclipse Project Explorer 视图，请注意该文件夹现在已移动到“Java Resources”区域（即，由于 eclipse 表示抽象，它不再位于根目录）。

(5) 清理构建您的项目。

(6) 要验证 .properties 文件现在是否存在于您的 war 文件的 WEB-INF/classes 中，请将一个 war 文件导出到一个简单的位置（右键单击项目 -> 导出 -> War 文件）并检查其内容。请注意，log4j.properties 文件现在出现在 WEB-INF/classes 中。

现在进行上面的第二步，访问上下文以读取文件。在尝试读取文件的位置添加以下代码。请注意，这会从战争文件上下文中读取它，因此当战争文件从服务器移动到服务器时，这“应该”起作用。

```
ClassLoader classLoader = Thread.currentThread().getContextClassLoader();
PropertyConfigurator.configure(classLoader.getResourceAsStream("log4j.properties") ); 
```

# macos - Mac OS X 上新文件夹的权限

> ID：10720127
> 
> 赞同：1
> 
> 时间：2012-05-23T12:41:37.277
> 
> 标签：macos, permissions

当我创建一个名为“child”的新文件夹时（例如），如下所示：

```
parent/child/ 
```

子文件夹，没有父文件夹相同的权限！我已经将它们更改为父级，使用`chmod -R +rw parent`但创建的每个新文件夹都没有获得相同的值！我想为那个新文件夹上的“每个人”加上 +rw。

我该怎么办？

提前致谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T13:06:36.380

据我所知，没有继承机制，但您可以使用 umask 来处理您的情况。

它是如何工作的示例：

```
$ umask
022
$ mkdir test
$ cd test
$ mkdir 1
$ ls -la 1
total 0
drwxr-xr-x  2 receiver  wheel   68 23 May 16:57 .
drwxrwxrwx  4 receiver  wheel  136 23 May 16:57 .. 
```

上面我们屏蔽了 022。让我们将 umask 设置为 000：

```
$ umask 000
$ mkdir 2
$ ls -la 2
total 0
drwxrwxrwx  2 receiver  wheel   68 23 May 16:58 .
drwxrwxrwx  5 receiver  wheel  170 23 May 16:58 .. 
```

# hadoop - Hadoop - Reducer 正在等待 Mapper 输入？

> ID：10720132
> 
> 赞同：3
> 
> 时间：2012-05-23T12:42:01.267
> 
> 标签：hadoop, local, reduce

如标题中所述，当我执行我的 Hadoop 程序（并在本地模式下对其进行调试）时，会发生以下情况：

***1\. 我的测试数据中的所有 10 条 csv 行都在 Mapper、Partitioner 和映射步骤之后调用的 RawComperator(OutputKeyComparatorClass) 中正确处理。但是 OutputValueGroupingComparatorClass 和 ReduceClass 的函数不会在之后执行。***

***2\. 我的应用程序如下所示。（由于空间限制，我省略了我用作配置参数的类的实现，直到有人有一个想法，涉及它们）：***

```
public class RetweetApplication {

    public static int DEBUG = 1;
    static String INPUT = "/home/ema/INPUT-H";
    static String OUTPUT = "/home/ema/OUTPUT-H "+ (new Date()).toString();

    public static void main(String[] args) {
    JobClient client = new JobClient();
    JobConf conf = new JobConf(RetweetApplication.class);

    if(DEBUG > 0){
        conf.set("mapred.job.tracker", "local");
        conf.set("fs.default.name", "file:///");
        conf.set("dfs.replication", "1");
    }

    FileInputFormat.setInputPaths(conf, new Path(INPUT));   
    FileOutputFormat.setOutputPath(conf, new Path(OUTPUT));

    //conf.setOutputKeyClass(Text.class);
    //conf.setOutputValueClass(Text.class);
    conf.setMapOutputKeyClass(Text.class);
    conf.setMapOutputValueClass(Text.class);

    conf.setMapperClass(RetweetMapper.class);
    conf.setPartitionerClass(TweetPartitioner.class);
    conf.setOutputKeyComparatorClass(TwitterValueGroupingComparator.class);
    conf.setOutputValueGroupingComparator(TwitterKeyGroupingComparator.class);
    conf.setReducerClass(RetweetReducer.class);

    conf.setOutputFormat(TextOutputFormat.class);

    client.setConf(conf);
    try {
        JobClient.runJob(conf);
    } catch (Exception e) {
        e.printStackTrace();
    }
    }
} 
```

***3.我得到以下控制台输出（对不起格式，但不知何故此日志没有正确格式化）：***

> 12/05/22 03:51:05 信息 mapred.MapTask：io.sort.mb = 100 12/05/22 03:51:05 信息 mapred.MapTask：数据缓冲区 = 79691776/99614720
> 
> 22 年 12 月 5 日 03:51:05 信息 mapred.MapTask：记录缓冲区 = 262144/327680
> 
> 22 年 12 月 5 日 03:51:06 信息 mapred.JobClient：地图 0% 减少 0%
> 
> 12/05/22 03:51:11 信息 mapred.LocalJobRunner：文件：/home/ema/INPUT-H/tweets：0+967 12/05/22 03:51:12 信息 mapred.JobClient：地图减少 39% 0%
> 
> 12/05/22 03:51:14 INFO mapred.LocalJobRunner: file:/home/ema/INPUT-H/tweets:0+967 12/05/22 03:51:15 INFO mapred.MapTask: 开始刷新地图输出
> 
> 22 年 12 月 5 日 03:51:15 信息 mapred.MapTask：完成溢出 0
> 
> 22 年 12 月 5 日 03:51:15 信息 mapred.Task：Task:attempt_local_0001_m_000000_0 已完成。并且正在提交中
> 
> 12/05/22 03:51:15 INFO mapred.JobClient: 地图 79% 减少 0%
> 
> 12/05/22 03:51:17 信息 mapred.LocalJobRunner: 文件:/home/ema/INPUT-H/tweets:0+967
> 
> 12/05/22 03:51:17 信息 mapred.LocalJobRunner: 文件:/home/ema/INPUT-H/tweets:0+967
> 
> 22 年 12 月 5 日 03:51:17 信息 mapred.Task：任务 'attempt_local_0001_m_000000_0' 已完成。
> 
> 12/05/22 03:51:17 信息 mapred.Task：使用 ResourceCalculatorPlugin：org.apache.hadoop.util.LinuxResourceCalculatorPlugin@35eed0
> 
> 22 年 12 月 5 日 03:51:17 信息 mapred.ReduceTask：ShuffleRamManager：MemoryLimit=709551680，MaxSingleShuffleLimit=177387920
> 
> 22 年 12 月 5 日 03:51:17 信息 mapred.ReduceTask：attempt_local_0001_r_000000_0 线程已启动：用于合并磁盘文件的线程
> 
> 22 年 12 月 5 日 03:51:17 信息 mapred.ReduceTask：attempt_local_0001_r_000000_0 线程等待：用于合并磁盘文件的线程
> 
> 22 年 12 月 5 日 03:51:17 信息 mapred.ReduceTask：attempt_local_0001_r_000000_0 线程已启动：用于合并内存文件的线程
> 
> **22 年 5 月 12 日 03:51:17 信息 mapred.ReduceTask：attempt_local_0001_r_000000_0 需要另外 1 个地图输出，其中 0 已经在进行中 12/05/22 03:51:17 信息 mapred.ReduceTask：attempt_local_0001_r_000000_0 计划的 0 输出（ 0 个慢速主机和 0 个重复主机）**
> 
> 22 年 12 月 5 日 03:51:17 信息 mapred.ReduceTask：attempt_local_0001_r_000000_0 线程已启动：用于轮询地图完成事件的线程
> 
> **12/05/22 03:51:18 信息 mapred.JobClient：映射 100% 减少 0% 12/05/22 03:51:23 信息 mapred.LocalJobRunner：减少 > 复制 >**

粗体标记线从这一点开始不断重复。

***4\. 在映射器看到每个元组后，许多打开的进程都处于活动状态：***

```
RetweetApplication (1) [Remote Java Application]    
    OpenJDK Client VM[localhost:5002]   
        Thread [main] (Running) 
        Thread [Thread-2] (Running) 
        Daemon Thread [communication thread] (Running)  
        Thread [MapOutputCopier attempt_local_0001_r_000000_0.0] (Running)  
        Thread [MapOutputCopier attempt_local_0001_r_000000_0.1] (Running)  
        Thread [MapOutputCopier attempt_local_0001_r_000000_0.2] (Running)  
        Thread [MapOutputCopier attempt_local_0001_r_000000_0.4] (Running)  
        Thread [MapOutputCopier attempt_local_0001_r_000000_0.3] (Running)  
        Daemon Thread [Thread for merging on-disk files] (Running)  
        Daemon Thread [Thread for merging in memory files] (Running)    
        Daemon Thread [Thread for polling Map Completion Events] (Running) 
```

有什么理由，为什么 Hadoop 期望映射器的输出（请参阅日志中的粗体标记行）比我放入输入目录中的输出更多？如前所述，我调试了所有输入都在映射器/分区器/等中正确处理。

**更新** 在克里斯的帮助下（见评论）我发现，我的程序没有像我预期的那样在 localMode 下启动：类中的`isLocal`变量`ReduceTask`设置为`false`，尽管它应该是`true`。

对我来说，完全不清楚为什么会发生这种情况，因为必须设置为启用独立模式的 3 个选项设置正确。令人惊讶的是：尽管`local`设置被忽略了，但“从普通光盘读取”设置却没有，这很奇怪，恕我直言，因为我认为`local`模式和`file:///`协议是耦合的。

在调试期间，我通过在我的调试视图中进行评估`ReduceTask`将变量设置为 true ，然后尝试执行程序的其余部分。它没有成功，这是堆栈跟踪：`isLocal``isLocal=true`

```
12/05/22 14:28:28 INFO mapred.LocalJobRunner: 
12/05/22 14:28:28 INFO mapred.Merger: Merging 1 sorted segments
12/05/22 14:28:28 INFO mapred.Merger: Down to the last merge-pass, with 1 segments left of total size: 1956 bytes
12/05/22 14:28:28 INFO mapred.LocalJobRunner: 
12/05/22 14:28:29 WARN conf.Configuration: file:/tmp/hadoop-ema/mapred/local/localRunner/job_local_0001.xml:a attempt to override final parameter: fs.default.name;  Ignoring.
12/05/22 14:28:29 WARN conf.Configuration: file:/tmp/hadoop-ema/mapred/local/localRunner/job_local_0001.xml:a attempt to override final parameter: mapred.job.tracker;  Ignoring.
12/05/22 14:28:30 INFO ipc.Client: Retrying connect to server: master/127.0.0.1:9001\. Already tried 0 time(s).
12/05/22 14:28:31 INFO ipc.Client: Retrying connect to server: master/127.0.0.1:9001\. Already tried 1 time(s).
12/05/22 14:28:32 INFO ipc.Client: Retrying connect to server: master/127.0.0.1:9001\. Already tried 2 time(s).
12/05/22 14:28:33 INFO ipc.Client: Retrying connect to server: master/127.0.0.1:9001\. Already tried 3 time(s).
12/05/22 14:28:34 INFO ipc.Client: Retrying connect to server: master/127.0.0.1:9001\. Already tried 4 time(s).
12/05/22 14:28:35 INFO ipc.Client: Retrying connect to server: master/127.0.0.1:9001\. Already tried 5 time(s).
12/05/22 14:28:36 INFO ipc.Client: Retrying connect to server: master/127.0.0.1:9001\. Already tried 6 time(s).
12/05/22 14:28:37 INFO ipc.Client: Retrying connect to server: master/127.0.0.1:9001\. Already tried 7 time(s).
12/05/22 14:28:38 INFO ipc.Client: Retrying connect to server: master/127.0.0.1:9001\. Already tried 8 time(s).
12/05/22 14:28:39 INFO ipc.Client: Retrying connect to server: master/127.0.0.1:9001\. Already tried 9 time(s).
12/05/22 14:28:39 WARN conf.Configuration: file:/tmp/hadoop-ema/mapred/local/localRunner/job_local_0001.xml:a attempt to override final parameter: fs.default.name;  Ignoring.
12/05/22 14:28:39 WARN conf.Configuration: file:/tmp/hadoop-ema/mapred/local/localRunner/job_local_0001.xml:a attempt to override final parameter: mapred.job.tracker;  Ignoring.
12/05/22 14:28:39 WARN mapred.LocalJobRunner: job_local_0001
java.net.ConnectException: Call to master/127.0.0.1:9001 failed on connection exception: java.net.ConnectException: Connection refused
    at org.apache.hadoop.ipc.Client.wrapException(Client.java:1095)
    at org.apache.hadoop.ipc.Client.call(Client.java:1071)
    at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:225)
    at $Proxy1.getProtocolVersion(Unknown Source)
    at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:396)
    at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:379)
    at org.apache.hadoop.hdfs.DFSClient.createRPCNamenode(DFSClient.java:119)
    at org.apache.hadoop.hdfs.DFSClient.<init>(DFSClient.java:238)
    at org.apache.hadoop.hdfs.DFSClient.<init>(DFSClient.java:203)
    at org.apache.hadoop.hdfs.DistributedFileSystem.initialize(DistributedFileSystem.java:89)
    at org.apache.hadoop.fs.FileSystem.createFileSystem(FileSystem.java:1386)
    at org.apache.hadoop.fs.FileSystem.access$200(FileSystem.java:66)
    at org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:1404)
    at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:254)
    at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:123)
    at org.apache.hadoop.mapred.ReduceTask$OldTrackingRecordWriter.<init>(ReduceTask.java:446)
    at org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:490)
    at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:420)
    at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:260)
Caused by: java.net.ConnectException: Connection refused
    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
    at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:592)
    at org.apache.hadoop.net.SocketIOWithTimeout.connect(SocketIOWithTimeout.java:206)
    at org.apache.hadoop.net.NetUtils.connect(NetUtils.java:489)
    at org.apache.hadoop.ipc.Client$Connection.setupConnection(Client.java:434)
    at org.apache.hadoop.ipc.Client$Connection.setupIOstreams(Client.java:560)
    at org.apache.hadoop.ipc.Client$Connection.access$2000(Client.java:184)
    at org.apache.hadoop.ipc.Client.getConnection(Client.java:1202)
    at org.apache.hadoop.ipc.Client.call(Client.java:1046)
    ... 17 more
12/05/22 14:28:39 WARN conf.Configuration: file:/tmp/hadoop-ema/mapred/local/localRunner/job_local_0001.xml:a attempt to override final parameter: fs.default.name;  Ignoring.
12/05/22 14:28:39 WARN conf.Configuration: file:/tmp/hadoop-ema/mapred/local/localRunner/job_local_0001.xml:a attempt to override final parameter: mapred.job.tracker;  Ignoring.
12/05/22 14:28:39 INFO mapred.JobClient: Job complete: job_local_0001
12/05/22 14:28:39 INFO mapred.JobClient: Counters: 20
12/05/22 14:28:39 INFO mapred.JobClient:   File Input Format Counters 
12/05/22 14:28:39 INFO mapred.JobClient:     Bytes Read=967
12/05/22 14:28:39 INFO mapred.JobClient:   FileSystemCounters
12/05/22 14:28:39 INFO mapred.JobClient:     FILE_BYTES_READ=14093
12/05/22 14:28:39 INFO mapred.JobClient:     FILE_BYTES_WRITTEN=47859
12/05/22 14:28:39 INFO mapred.JobClient:   Map-Reduce Framework
12/05/22 14:28:39 INFO mapred.JobClient:     Map output materialized bytes=1960
12/05/22 14:28:39 INFO mapred.JobClient:     Map input records=10
12/05/22 14:28:39 INFO mapred.JobClient:     Reduce shuffle bytes=0
12/05/22 14:28:39 INFO mapred.JobClient:     Spilled Records=10
12/05/22 14:28:39 INFO mapred.JobClient:     Map output bytes=1934
12/05/22 14:28:39 INFO mapred.JobClient:     Total committed heap usage (bytes)=115937280
12/05/22 14:28:39 INFO mapred.JobClient:     CPU time spent (ms)=0
12/05/22 14:28:39 INFO mapred.JobClient:     Map input bytes=967
12/05/22 14:28:39 INFO mapred.JobClient:     SPLIT_RAW_BYTES=82
12/05/22 14:28:39 INFO mapred.JobClient:     Combine input records=0
12/05/22 14:28:39 INFO mapred.JobClient:     Reduce input records=0
12/05/22 14:28:39 INFO mapred.JobClient:     Reduce input groups=0
12/05/22 14:28:39 INFO mapred.JobClient:     Combine output records=0
12/05/22 14:28:39 INFO mapred.JobClient:     Physical memory (bytes) snapshot=0
12/05/22 14:28:39 INFO mapred.JobClient:     Reduce output records=0
12/05/22 14:28:39 INFO mapred.JobClient:     Virtual memory (bytes) snapshot=0
12/05/22 14:28:39 INFO mapred.JobClient:     Map output records=10
12/05/22 14:28:39 INFO mapred.JobClient: Job Failed: NA
java.io.IOException: Job failed!
    at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:1265)
    at uni.kassel.macek.rtprep.RetweetApplication.main(RetweetApplication.java:50)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:156) 
```

由于这个堆栈跟踪现在向我显示，在执行期间使用了端口 9001，我猜想 xml 配置文件以某种方式覆盖了 local-java-made 设置（我用于测试），这很奇怪，因为我一遍又一遍地阅读在互联网上，java 覆盖了 xml 配置。如果没有人知道如何更正此问题，请尝试简单地删除所有配置 XML。也许这可以解决问题...

**新更新**

重命名 Hadoops`conf`文件夹解决了等待复印机的问题，程序一直执行到最后。`HADOOP_OPTS`遗憾的是，尽管设置正确，但执行不再等待我的调试器。

恢复：这只是一个配置问题：XML 可能（对于某些配置参数）会覆盖 JAVA。如果有人知道我如何让调试再次运行，那将是完美的，但现在我很高兴我再也看不到这个堆栈跟踪了！;)

感谢克里斯的时间和努力！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T02:43:42.933

抱歉，我之前没有看到这一点，但您的 conf xml 文件中似乎有两个重要的配置属性设置为 final，如以下日志语句所示：

> ```
> 12/05/22 14:28:29 WARN conf.Configuration: file:/tmp/hadoop-ema/mapred/local/localRunner/job_local_0001.xml:a attempt to override final parameter: fs.default.name;  Ignoring.
> 12/05/22 14:28:29 WARN conf.Configuration: file:/tmp/hadoop-ema/mapred/local/localRunner/job_local_0001.xml:a attempt to override final parameter: mapred.job.tracker;  Ignoring. 
> ```

这意味着您的作业实际上无法在本地模式下运行，它以本地模式启动，但 reducer 读取序列化作业配置并确定它不在本地模式下，并尝试通过任务跟踪器端口获取映射输出。

您说您的解决方法是重命名 conf 文件夹 - 这会将默认 hadoop 恢复为默认配置，其中这两个属性未标记为“最终”

# html - 我的网站中有一个 .swf 文件

> ID：10720136
> 
> 赞同：0
> 
> 时间：2012-05-23T12:42:17.740
> 
> 标签：html, flash

我被要求修改的网站中有一个 .swf 文件。该文件是否包含普通的 html 文件，如果是，我该如何获取它们，创建该站点的计算机上没有 .fla 文件。

谢谢罗斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:53:38.063

.swf 文件是一个 Flash 元素，可由 Flash 播放器“播放”。.swf 通常是创建使用的动作脚本。换句话说，.swf 文件是 .fla 文件的编译版本，因此您不能编辑 .swf 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T13:12:44.760

尽管 Roskvist 是完全正确的，但有一种方法可以将 .swf 文件转换回 actionscript 代码（可能还有 .fla）。这不会为您提供原始源代码，而是一个“估计”代码（具有不同的变量名等），它会在渲染时为您提供几乎相同的 .swf。这可以通过称为“闪存反编译器”的软件来完成。

警告一句：使用它从他人的 Flash 作品中窃取 Flash 代码是不可以的，您必须有权使用任何源代码。

# java - 如何使用着色器为使用 GL_LINES 和 OpenGL ES 2.0 绘制的线条着色

> ID：10720137
> 
> 赞同：6
> 
> 时间：2012-05-23T12:42:18.367
> 
> 标签：java, android, opengl-es-2.0

我有一个使用 OpenGL ES 2.0 的 Android 应用程序。我需要从一个数组中绘制 10 条线，每条线都由起点和终点描述。所以有 10 行 = 20 个点 = 60 个浮点值。没有一个点是连接的，因此数组中的每一对点都与其他点无关，因此我使用 GL_LINES 绘制。

我通过将值放入浮点缓冲区并调用一些辅助代码来绘制它们，如下所示：

```
public void drawLines(FloatBuffer vertexBuffer, float lineWidth,
        int numPoints, float colour[]) {
    GLES20.glLineWidth(lineWidth);
    drawShape(vertexBuffer, GLES20.GL_LINES, numPoints, colour);
}

protected void drawShape(FloatBuffer vertexBuffer, int drawType,
        int numPoints, float colour[]) {
    // ... set shader ...
    GLES20.glDrawArrays(drawType, 0, numPoints);
} 
```

drawLines 采用浮点缓冲区（60 个浮点数）、一个线宽、点数（20）和一个 4 个浮点数颜色值数组。我没有显示着色器设置代码，但它基本上将颜色变量暴露给统一的 uColour 值。

拾取 uColour 的片段着色器只是将其直接插入输出。

```
/* Fragment */
precision mediump float;

uniform vec4 uColour;
uniform float uTime;

void main() {
    gl_FragColor = uColour;
} 
```

顶点着色器：

```
uniform mat4 uMVPMatrix;

attribute vec4 vPosition;

void main() {
    gl_Position = uMVPMatrix * vPosition;
} 
```

但现在我想做一些不同的事情。我希望缓冲区中的每一行都有不同的颜色。颜色是数组中线条位置的函数。我想将开始的线条涂成白色，最后的深灰色和两者之间的渐变线条，例如#ffffff、#eeeeee、#dddddd 等。

显然，我每次都可以单独绘制每条线，将新值插入 uColour，但这效率低下。当我可以调用一次并每次修改着色器中的值时，我不想调用 GL 10 次。

也许我可以在我的顶点着色器中声明一个名为 uVertexCount 的统一值？在绘制之前，我将 uVertexCount 设置为 0，并且每次调用顶点着色器时，我都会增加该值。片段着色器可以通过查看 uVertexCount 来确定行索引。然后，它可以在某个开始值和结束值或其他方式之间插入一个颜色值。但这取决于是否每条线或点都被认为是一个基元，或者整个线阵列是一个基元。

这可行吗？我不知道每个片段着色器调用顶点着色器多少次。调用是否以这样的方式交错以使其可行，即顶点 0、顶点 1、x * 片段、顶点 2、顶点 3、x * 片段等。

有谁知道一些合理的示例代码可以展示这个概念或指出我做类似事情的其他方式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T13:55:06.727

将颜色信息添加到您的 Vertexbuffer (Floatbuffer) 并在着色器中使用该属性。

示例顶点缓冲区：

```
uniform mat4 uMVPMatrix;

attribute vec4 vPosition;
attribute vec3 vColor;

varying vec3 color;

void main() {
    gl_Position = uMVPMatrix * vPosition;
    color = vColor;
} 
```

示例片段着色器：

```
precision mediump float;

varying vec3 color;

void main() {
    gl_FragColor = color;
} 
```

# java - 为什么在文件服务器程序套接字中写为“Socket s =null”？

> ID：10720138
> 
> 赞同：0
> 
> 时间：2012-05-23T12:42:26.803
> 
> 标签：java, tcp

在这里，我正在创建文件服务器程序。在此我注意到写入了套接字 s=null。我想知道给出 null 的实际原因。我认为它与 ObjectInputStream 或 Scanner 有关。是真的吗与 ObjectInputStream 或 Scanner 相关。这里的代码

```
Server.java 

    public class Server{
public static void main(String[] args){
Socket s=null;
ServerSocket ss=null;
ObjectInputStream ois=null;
ObjectOutputStream oos=null;
Scanner sc=new Scanner(System.in);

try
    {
ss = new ServerSocket(1234);
System.out.println("server is created");

    }
catch(Exception e)
    {
System.out.println(e.getMessage());
    }

try {
s=ss.accept();
System.out.println("connected");
oos = new ObjectOutputStream(s.getOutputStream());
oos.writeObject("Welcome");
ois= new ObjectInputStream(s.getInputStream());
    }catch(Exception e)
    {
e.printStackTrace();
    }
try{
String fil=(String)ois.readObject();
FileInputStream fis = new FileInputStream(fil);
int d;
String data="";
while(true)
        {
d=fis.read();
if(d==-1)
    break;
data = data+(char)d;
        }
oos.writeObject(data);
    }
catch(Exception e)
    {
System.out.println(e.getMessage());
    }
}
} 
```

任何人都可以解释实际原因吗？提前致谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:47:28.067

我不知道我是否理解正确，但如果您在谈论代码的第一行，那么它是一个简单的初始化。

良好的编程实践表明您不应该让编程语言实现初始化您的变量。即使标准声明初始值将是一个特定的值，标准也可能会发生变化，并且在某些时候实现可能会出现错误。因此，您应该始终使用它们的预期初始值来初始化变量。

对于您的代码，空值表示连接不存在。因此，在初始化变量时，假设您尚未连接，则将 null 存储在表示套接字的所有对象中。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T12:57:44.763

您的问题的答案是，`null`如果单独声明和分配变量（而不是让编译器/执行环境为您初始化它们），则将它们初始化为一种很好的做法。这可以追溯到早期的 C 语言，它不能保证本地的值变量被初始化为除非明确设置。

如果 Java 编译器检测到一个变量在没有被初始化或设置的情况下被访问，**它将产生一个错误。**例如：

```
 String s;
    try {
        s = "abc";
    } catch (Exception e) {

    }
    System.out.println(s); 
```

将在最后一行生成编译器错误，说明局部变量可能尚未初始化（因为如果 try 子句在分配*之前* `s`抛出异常，则永远不会设置它）。

在您的情况下，这似乎不是问题，因为即使您`Socket`在 try-block 之外声明，您也永远不会在 try-block 范围之外*访问它。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T12:51:30.337

据我所知，它实际上不是因为一个原因。但是，一般来说，确保所有变量在使用之前都被初始化是一种很好的编码实践。

因此，由于您不想分配新的套接字，因此在调用 accept() 之前，您只需将其分配为 null。

这在这种情况下没有意义，但如果您将未初始化的变量传递到某个地方，它仍然会生成警告。

# iphone - 在设置包中存储来自 NSUserDefaults 的值

> ID：10720140
> 
> 赞同：1
> 
> 时间：2012-05-23T12:42:28.083
> 
> 标签：iphone, objective-c, cocoa-touch

我试图找出如何从 NSDefaults 保存/存储我的值，以便当我退出应用程序时，它们将存储在 Settings.bundle 中。这就是我正在做的...

```
NSDictionary *settings = [NSDictionary dictionaryWithObjectsAndKeys:@"M1", @"IDMissiles", 
                                                                    @"G2", @"IDGuns", 
                                                                    @"B3", @"IDBombs",
                                                                    @"KM", @"IDDistance", nil];
[[NSUserDefaults standardUserDefaults] registerDefaults:settings]; 
```

如果我执行以下操作，值将从 NSUserDefaults 正确打印出来......

```
NSLog(@"IDMissiles: %@", [userDefaults stringForKey:@"IDMissiles"]);
NSLog(@"IDGuns    : %@", [userDefaults stringForKey:@"IDGuns"]);
NSLog(@"IDBombs   : %@", [userDefaults stringForKey:@"IDBombs"]);
NSLog(@"IDDistance: %@", [userDefaults stringForKey:@"IDDistance"]); 
```

但是......每次我运行应用程序时，NSUserDefaults 中的值都以（null）开始，我想这样做`[[NSUserDefaults standardUserDefaults] synchronize];`会在我下次运行应用程序时存储这些值，但没有这样的运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:00:36.953

而不是使用

```
[[NSUserDefaults standardUserDefaults] registerDefaults:settings]; 
```

尝试这个：

```
[[NSUserDefaults standardUserDefaults] setObject:settings forKey:@"settings"]; 
```

然后，从这样的默认值中获取：

```
NSLog(@"IDMissiles:%@[[[NSUserDefaultsstandardUserDefaults]objectForKey:@"settings"]objectForKey:@"IDMissiles"]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T13:13:20.857

从[文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html#//apple_ref/occ/instm/NSUserDefaults/registerDefaults:)中：

> 注册域的内容不写入磁盘；您需要在每次应用程序启动时调用此方法。您可以在应用程序的 Resources 目录中放置一个 plist 文件，然后使用从该文件中读取的内容调用 registerDefaults:。

换句话说，您不会通过像这样注册默认值来存储任何内容。要在您的应用程序和设置包中都有默认值，您必须单独维护设置包，如此[处](https://stackoverflow.com/questions/9025676/getting-default-value-from-settings-bundle)所述。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T13:05:58.930

我在使用 settings.bundle 时发现的一件事是，在您实际打开设置窗格之前，没有任何值被初始化。您可以在此处保存默认值，但在您打开设置之前它们将返回 nil。

我不确定当您尝试在那里保存值但从不打开设置窗格时是否会发生这种情况。

如果您不使用设置窗格，那么您不会想使用 registerDefaults 选项。

试试这个。

```
[[NSUserDefaults standardDefaults] setObject:@"M1" forKey:@"IDMissiles"];
// set remaining values
[[NSUserDefaults standardDefaults] synchronize]; // this really only needs to be called if you plan on accessing values right away, otherwise they are saved automatically after the next run loop 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T13:13:36.960

```
 NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
   [NSUserDefaults removeObjectForKey:@"userDefaults"];
   [userDefaults setObject:[settings objectForKey:@"mainData"] forKey:@"userDefaultsValue"];
   [userDefaults synchronize]; 
```

# java - 使用休眠填充现有实体

> ID：10720143
> 
> 赞同：0
> 
> 时间：2012-05-23T12:42:35.037
> 
> 标签：java, hibernate, jpa

它的问题与此相同：仅在常规 Hibernate 而不是 NHibernate 中[使用 NHibernate 填充现有实体。](https://stackoverflow.com/questions/1107155/populating-an-existing-entity-using-nhibernate)这个问题也没有完全回答海事组织。

总而言之，是否有可能（在休眠状态下）通过先前附加的实体填充/填充新实体？就像是：

```
daoService.getEntityManager().find(Student.class, 123L); 
Student student = new Student(123) // Creating a new student

daoService.fill(student); 
```

结果应该是学生实例将具有与实体管理器找到的值完全相同的值。

我不能使用合并，因为它返回一个新实例（而不是填充给定实例），如果 ID 属于已附加的实体，我不能使用 load()。我希望代码对每个实体都是通用的，因此仅手动设置值是不切实际的。我宁愿在这种情况下不使用反射，因为所有潜在的陷阱（延迟初始化、继承、没有相应 set 方法的 get 方法，反之亦然，等等）

我正在开发一个同时使用 JPA 实体和非实体（使用 JDBC）的遗留系统，这可以解决我的一些主要问题。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:03:18.710

语法不完全准确，因为我正在写我的头顶

```
Student student = new Student();

metadata = factory.getClassMetaData(Student.class);

metadata.getIdproperty();
// copy id

for(Property prop in metadata.getPropertyClosureIterator)
{
    prop.setValue(student, prop.getValue(managedStudent));
} 
```

# .htaccess - mod重写以隐藏url

> ID：10720145
> 
> 赞同：1
> 
> 时间：2012-05-23T12:42:35.820
> 
> 标签：.htaccess, mod-rewrite

我想将以下 php 文件的任何请求隐藏到 www.example.com/。

```
 www.example.com/index.php  to www.example.com/     (hide index.php)
    www.example.com/content.php to www.example.com/    (hide content.php)
    www.example.com/welcome.php to www.example.com/    (hide welcome.php) 
```

注意：我只想隐藏文件而不重定向它们。例如，隐藏 index.php 或 content.php 上的部分而不将它们重定向到 www.example.com/。

我试过了

```
RewriteEngine On

RewriteCond %{THE_REQUEST} ^\w+\ /(.*)\.php(\?.*)?\ HTTP/
RewriteRule ^ http://%{HTTP_HOST}/%1 [R=301]

RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule .* $0.php 
```

我也试过

```
DirectoryIndex index.php
DirectoryIndex content.php
DirectoryIndex welcome.php 
```

这些代码似乎不起作用。任何想法？对不起，我对此很陌生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T12:47:39.220

如果我没记错的话，这样的事情应该可以正常工作。

RewriteRule ^/index.php$ [http://www.example.com/](http://www.example.com/) [R,NC,L]
RewriteRule ^/content.php$ [http://www.example.com/](http://www.example.com/) [R,NC,L]
RewriteRule ^ /welcome.php$ [http://www.example.com/](http://www.example.com/) [R,NC,L]

亲切的问候，
博

# c# - 字符未正确显示 Visual Studio

> ID：10720146
> 
> 赞同：0
> 
> 时间：2012-05-23T12:42:37.297
> 
> 标签：c#, datagridview, character-encoding, phpmyadmin

我在 PhpMyAdmin 中创建了一个数据库，并在 Visual Studio 2010 C# 中开发了一个应用程序。

当我在 PhpMyAdmin 中添加新行时，特殊字符会正确显示在 Visual Studio 中，但是当我在 Visual Studio 的 datagridview 中添加它时，字符 č、ć 和 đ 不会在表格中正确显示。

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T12:46:41.240

数据库上的排序规则可能被错误地设置为不区分重音。这应该会有所帮助：[phpMyAdmin 中的拉丁字符与 UTF-8 排序规则](https://stackoverflow.com/questions/2977238/latin-characters-in-phpmyadmin-with-utf-8-collation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T17:04:19.493

**已解决的问题：**添加到 connectionString **charset=utf8**

```
connectionString="..... ;Default Command Timeout=300000; charset=utf8;" 
```

而已 ：）

# ruby-on-rails - 如何创建在运行任何 Rake 任务时始终运行的 rake 任务？

> ID：10720149
> 
> 赞同：2
> 
> 时间：2012-05-23T12:42:44.363
> 
> 标签：ruby-on-rails, ruby, rake

据我记得，在文档中指定在测试环境中，即使您运行 rake （不带参数），数据库也总是被清除。我想实现这样的事情，这样无论我是否运行任务都没有关系，当我运行 rake 时，总会有一个 Rake 任务正在执行。这可能吗？这是默认任务开始的地方吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:17:34.617

`rakefile`在要从中运行任务的目录中创建一个名为的文件。这段代码将使如果您只键入“rake” my_default_task 将运行：

```
 task :default => 'my_default_task'

  task :my_default_task do
     puts "Now I am doing the task that Tempus wants done when he/she types 'rake' in the console."
  end

  task :my_not_default_task do
    puts "This isn't the default task."
  end 
```

但是，如果您键入`rake my_not_default_task`，则`my_default_task`不会运行。如果您希望它运行，不管这是您可以做的一件事：

```
task :default => 'my_default_task'

task :my_default_task do
    puts "This is the default task"
end

task :my_not_default_task do
  puts "This isn't the default task."
end

Rake::Task['my_default_task'].invoke 
```

此代码中的最后一行确保 my_default_task 即使在您调用其他任务时也会运行，因此如果您键入`rake my_not_default_task`'`my_default_task`也会运行。

编辑：当您使用 rails 时，您可以将上述任务放在文件夹中的文件中，`lib/tasks`扩展名为`.rake``rake`

[Jason Seifer 有一个非常好的关于 rake 的教程](http://jasonseifer.com/2010/04/06/rake-tutorial)。

# javascript - jquery datepicker 在移动设备上运行不佳

> ID：10720150
> 
> 赞同：1
> 
> 时间：2012-05-23T12:42:51.037
> 
> 标签：javascript, jquery, html

我正在设计一个使用 jquery datepicker 的移动应用程序。我有日期文本框和提交按钮。日历在提交按钮上打开。但问题是，当我点击一个月中的任何一天时，这个按钮会获得焦点并被点击而不是选择那一天。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:52:51.897

您的意思是日期选择器下的按钮获得焦点吗？我遇到了这个问题并通过向 datepicker 添加一个回调函数来解决它，该函数会在它被激活时禁用所有其他输入，然后在 datepicker 关闭时再次重新启用它们。

检查文档，日期选择器有打开和关闭的回调。

编辑：

我将在这里发布，而不是另一个回复。

当您初始化日期选择器时，您可以传递选项，包括回调。这是您要使用的两个回调，我在这里所做的是通过 $('# containsdiv').find('input') 获取名为“inputs”的变量中的所有输入，然后在之前显示我添加属性“禁用" 到所有输入，关闭时我只需再次删除此属性。

```
date.datepicker({ 
    beforeShow: function() {
        inputs.attr("disabled","disabled");
    },
    onClose: function() {
        inputs.attr("disabled","");
    }
}); 
```

# c# - 使用自动化框架在文本字段/文本框上设置文本并获取更改事件

> ID：10720162
> 
> 赞同：12
> 
> 时间：2012-05-23T12:43:24.433
> 
> 标签：c#, events, user-interface, input, ui-automation

我想使用 Mircosoft **UI 自动化**框架在文本字段/文本框元素上设置文本，这意味着`AutomationElement`来自`ControlType.Edit`或`ControlType.Document`.

目前我正在使用`TextPattern`从其中之一获取文本`AutomationElements`：

```
TextPattern tp = (TextPattern)element.GetCurrentPattern(TextPattern.Pattern);
string text = tp.DocumentRange.GetText(-1).Trim(); 
```

但现在我想在`AutomationElement`. `TextPattern`我在课堂上找不到这种方法。所以我正在尝试使用，`ValuePattern`但我不确定这是否是正确的方法：

```
ValuePattern value = element.GetCurrentPattern(ValuePattern.Pattern) as ValuePattern;
value.SetValue(insertText); 
```

有没有其他方法来设置文本值？

另一个问题是如何在`Edit`/`Document`元素上更改文本时获取事件？我尝试使用，`TextChangedEvent`但更改文本时没有触发任何事件：

```
AutomationEventHandler ehTextChanged = new AutomationEventHandler(text_event);
Automation.AddAutomationEventHandler(TextPattern.TextChangedEvent, element, TreeScope.Element, ehTextChanged);

private void text_event(object sender, AutomationEventArgs e)
{
    Console.WriteLine("Text changed");
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-22T08:32:08.850

您可以使用 ValuePatern，它就是这样做的方法。从我自己的代码：

```
ValuePattern etb = EditableTextBox.GetCurrentPattern(ValuePattern.Pattern) as ValuePattern;
etb.SetValue("test"); 
```

您可以注册`Event`使用：

```
var myEventHandler= 
            new AutomationEventHandler(handler);

Automation.AddAutomationEventHandler(
    SelectionItemPattern.ElementSelectedEvent, // In your case you might want to use another pattern
    targetApp, 
    TreeScope.Descendants, 
    myEventHandler); 
```

和`handler`方法：

```
private void handler(object src, AutomationEventArgs e) {...} 
```

还有一个`AutomationPropertyChangedEventHandler`（`Automation.AddAutomationPropertyChangedEventHandler(...)`在这种情况下使用）可能有用。

基于来自 MSDN的这个[示例。](http://msdn.microsoft.com/en-us/library/ms771275%28v=vs.90%29.aspx)

# javascript - Ckeditor 选择的 html 在 chrome 浏览器中无法正常工作

> ID：10720166
> 
> 赞同：9
> 
> 时间：2012-05-23T12:43:35.217
> 
> 标签：javascript, jquery, asp.net-mvc, ckeditor

我正在使用 mvc 应用程序并使用 ckeditor 3.6.2 版本。我使用以下代码从 ckeditor 获取选定的 html。

```
CKEDITOR.editor.prototype.getSelectedHtml = function () {

    if (CKEDITOR.env.ie) {
        this.focus();
        selection = this.getSelection();
    } else {
        selection = this.getSelection();
    }
    if (selection) {
        var bookmarks = selection.createBookmarks(),
     range = selection.getRanges()[0],
     fragment = range.clone().cloneContents();

        selection.selectBookmarks(bookmarks);

        var retval = "",
     childList = fragment.getChildren(),
     childCount = childList.count();
        for (var i = 0; i < childCount; i++) {
            var child = childList.getItem(i);
            console.log(child);
            retval += (child.getOuterHtml ?
        child.getOuterHtml() : child.getText());
        }
        return retval;
    }
}; 
```

当我选择文本并调用 CKEDITOR.instances.editor1.getSelectedHtml() 时，Chrome 浏览器出现问题。

例如，假设在我的编辑器中有一个内容 <span style="color:red;">Welcome Note</span>。如果我选择了“Welcome Note”并调用 getSelectedHtml() 方法 firefox,safari,IE8 返回带有 span 标签的“Welcome Note”，但 chrome 只返回文本“Welcome Note”。如果我尝试使用 CKEDITOR.instances.editor1.insertHtml("<div style='font-size:12px'>"+ CKEDITOR.instances.editor1.getSelectedHtml()+"</div>") 替换所选内容，在 chrome 中我丢失了字体颜色，因为 getSelectedHtml() 只返回选定的文本。但这适用于其他浏览器。

> 注意：如果内容是“欢迎<span style="color:red;">注意</span>”，并且选中的词是“欢迎注意”。在这种情况下，这在 chrome 和其他浏览器中是正确的。

请提出适当的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T15:14:30.243

CKEDITOR 网站上记录了一些类似的案例。特别是，看看这个：

[http://cksource.com/forums/viewtopic.php?f=11&t=20202](http://cksource.com/forums/viewtopic.php?f=11&t=20202)

# google-maps - 谷歌地图上的 HTML5 地理位置和可拖动标记

> ID：10720172
> 
> 赞同：1
> 
> 时间：2012-05-23T12:43:55.790
> 
> 标签：google-maps, location, google-maps-markers, geo

我正在尝试编写一个地理位置网页，该网页在地图上显示用户的大致位置。如果他们点击标记，他们可以将其拖动到他们的确切位置。

我有这段代码来显示地图和拖动标记：

```
 function initialize() {
 navigator.geolocation.getCurrentPosition;
 var myLatlng = new google.maps.LatLng(-25.363882,131.044922);
 var myOptions = {
  zoom: 2,
  center: myLatlng,
  mapTypeId: google.maps.MapTypeId.ROADMAP
}
var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

var marker = new google.maps.Marker({
    position: myLatlng,
    map: map,
    draggable:true
});
google.maps.event.addListener(
    marker,
    'drag',
    function() {
        document.getElementById('lat').value = marker.position.lat();
        document.getElementById('lng').value = marker.position.lng();
    }
); 
```

}

**我的问题是如何使用 html5 地理位置在上面设置初始纬度和经度：**

```
 navigator.geolocation.getCurrentPosition; 
```

谢谢

安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T02:48:55.167

为纬度和经度声明两个变量，如下所示：

```
 position.coords.latitude = 35.8624596;
     position.coords.longitude = -86.4081241; 
```

然后是纬度和经度的另一个变量，例如：

```
 var latlon=lat+","+lon; 
```

然后`latlon`像这样使用：

```
 var img_url="http://maps.googleapis.com/maps/api/staticmap?center="+latlon+"&zoom=14&size=400x300&sensor=false"; 
```

# html - 输入的静态占位符

> ID：10720173
> 
> 赞同：1
> 
> 时间：2012-05-23T12:43:57.880
> 
> 标签：html, css

我不知道这个问题的正确标题是什么。我有带有“静态占位符”的输入框，例如 url [jsfiddle.net/manyahin/MxRqX](http://jsfiddle.net/manyahin/MxRqX)

```
<div class="controls">
 <input type="text" />
 <span>http://</span>
</div> 
```

用户不能删除 http:// 并在此之后输入文本。Span 有 margin-left: minus 表示输入上方的位置，输入有 text-ident 以获得 span 的可用空间。

当我点击输入时，光标设置在输入的开头，在 http.xml 之前。当我开始打字时，光标会转到正常位置。如何修复此错误或请给我另一种方法来实现此目的。对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:56:40.963

如果输入文本总是需要以 http:// 开头，更简单的方法是将其作为标签放在字段之前而不是在其中，然后在后端添加 http://。或者您可以在后端捕获它并从输入字段中读取文本，如果用户没有输入，则将 http:// 添加到输入文本中。

另一种方法是通过 jquery，您可以在其中将文本框的值设置为 http:// 以及用户输入的任何文本。

第三种不太优雅的方法是使用两个输入字段并使用 css 来定位和设置它们的样式以使其显示为一个。将第一个字段值设置为 http://（假设它始终为 http://）并将其设置为只读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T14:12:01.220

`:before`在css中使用怎么样？

试一试...... [http://jsfiddle.net/MxRqX/3/](http://jsfiddle.net/MxRqX/3/)

# java - 获取类的实例 [运行时类型令牌]

> ID：10720174
> 
> 赞同：6
> 
> 时间：2012-05-23T12:43:58.113
> 
> 标签：java, generics

我创建了一个 Preferences 类，并且我不想为 Getter 使用 Runtime-Type Token。

所以这是我的getter方法：

```
public <T> T get(String key, Class<T> clazz) {
    // do some crazy stuff (e.g. Double <-> Float)
} 
```

至此，一切正常。但我希望类参数是可选的。

```
boolean b = preferences.get(key); 
```

所以我添加了一个额外的方法：

```
public <T> T get(String key) {
    // return get(key, Class<T>);
} 
```

**现在的问题：**有没有办法做到这一点？有没有办法获取`Class<T>`.

**有一个小的解决方法是可能的：**

```
public <T> T get(String key, T... args) {
    return get(key, (Class<T>) args.getClass().getComponentType());
}

public <T> T get(String key, Class<T> clazz) {
    System.out.println("key  : " + key);
    System.out.println("clazz: " + clazz);
}

// using
Boolean b = get("mykey"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T12:47:14.557

你不能。但是，如果您希望将参数类设为可选，只需`null`在使用时传递并检查它是否不为空。

如果您想从左侧推断它 - 这是不可能的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T07:03:18.460

一个小的解决方法是可能的。

```
public <T> T get(String key, T... args) {
    return get(key, (Class<T>) args.getClass().getComponentType());
}

public <T> T get(String key, Class<T> clazz) {
    System.out.println("key  : " + key);
    System.out.println("clazz: " + clazz);
}

// using
Boolean b = get("mykey"); 
```

Jep 我也不喜欢可变参数，但它到目前为止有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T12:57:17.773

不，泛型类型信息存储在调用方法中，编译`T get(String key)`器本身只知道它是泛型的，但无法找出调用它的具体类型。

```
//code
public <T> T get(String key)
//calling code
Integer value = get("value");

//once compiled 
public Object get(String key)
//calling code
Integer value = (Integer) get("value"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-23T13:08:01.510

你可以有这样的代码：

```
Integer i = getPref("integer");
System.out.println(i);

@SuppressWarnings("unchecked")
static <T> T getPref(String x) {
  return (T)properties.get(x);
} 
```

在这里，类型`<T>`确实是从左侧推断出来的。请记住，这只相当于帮助您避免明显的沮丧`Integer`——对我个人而言，这就足够了，我经常使用这样的野兽。需要注意的另一点是 Java 的类型推断非常蹩脚，您将无法调用 to`getPref`作为另一个方法的参数并推断参数类型。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-23T13:08:59.860

你不能，但是...

考虑这种模式，而不是通过泛型重载：

```
public boolean getBoolean(String key) {
    // boolean impl here
}

public float getFloat(String key) {
    // float impl here
}

// etc 
```

它不仅更容易编码，而且更容易使用——至少你知道什么类型是可以接受的。
使用您当前的代码，这将编译：

```
SomeUnsupportedClass x = preferences.get("foo", SomeUnsupportedClass.class); 
```

但它会在运行时爆炸，因为您没有代码来支持它。

顺便说一句，这很糟糕：您想在编码时发现问题，而不是运行时。

# php - plUpload - 服务器端错误未显示

> ID：10720179
> 
> 赞同：5
> 
> 时间：2012-05-23T12:44:07.157
> 
> 标签：php, javascript, plupload, error-reporting

我有一个基于来自网站的自定义示例的 plupload 实例，它工作完美，除了显示来自服务器端上传脚本的错误消息（来自下载示例文件夹的upload.php）。

正在显示本地错误消息，例如，如果我尝试上传受限制的文件类型，我会收到我期望的错误消息，但是，服务器端消息只是没有显示。

我知道upload.php 文件正在正确触发，因为我的上传已成功处理，并且我设置了一个睡眠功能来验证是否正在请求该文件。此刻，我只是简单地放置在我的upload.php 顶部的行以协助调试，它只是休眠10 秒并返回错误消息，这仍然不起作用。

```
upload.php
    sleep(10);
    die('{"jsonrpc" : "2.0", "error" : {"code": 500, "message": "THIS IS AN ERROR."}, "id" : "id"}');
...(Rest of normal upload.php file)... 
```

我正在使用的 javascript 包含在下面，你们可以提供的任何帮助将不胜感激，因为我已经在这方面花费了太长时间，而问题是让我无法实时推送我的代码。

谢谢，

亚历克斯

```
// Fanart
$(function() {
var fanart_uploader = new plupload.Uploader({
    runtimes : 'html5,flash,html4',
    browse_button : 'fanart_pickfiles',
    container : 'fanart_container',
    drop_element : 'fanart_drop',
    chunk_size : '1mb',
    max_file_size : '8mb',
    url : '/upload.php?gameid=<?= $gameid ?>&arttype=fanart',
    flash_swf_url : '/js/plupload/js/plupload.flash.swf',
    silverlight_xap_url : '/js/plupload/js/plupload.silverlight.xap',
    filters : [
        {title : "Image files", extensions : "jpg,png"},
    ]
});

fanart_uploader.bind('Init', function(up, params) {
    $('#fanart_runtime').html("You are using " + params.runtime);
});

$('#fanart_uploadfiles').click(function(e) {
    fanart_uploader.start();
    e.preventDefault();
});

fanart_uploader.init();

fanart_uploader.bind('FilesAdded', function(up, files) {
    $.each(files, function(i, file) {
        $('#fanart_filelist').append(
            '<div style="padding: 4px; margin: 3px; border: 1px dotted #fff; border-radius: 6px; background-color: #333;" id="' + file.id + '"><img class="tick" src=\"<?= $baseurl ?>/images/common/icons/tick_16.png\" style=\"display: none; vertical-align: -2px;\" />' +
            file.name + ' <em>(' + plupload.formatSize(file.size) + ')</em> <div style=\"margin: auto; margin-top: 3px; width: 200px; height: 20px; border: 1px solid #fff; border-radius: 6px; background-color: #222;\"><div class="progressbar" style=\"width: 0px; height: 16px; padding: 2px 0px; background-color: #ccc; border-radius: 6px; text-align: center;\"><b style="font-size: 16px; color: #222;"></b></div></div>' +
        '</div>');
    });

    up.refresh(); // Reposition Flash/Silverlight
});

fanart_uploader.bind('UploadProgress', function(up, file) {
    $('#' + file.id + " b").html(file.percent + "%");
    $('#' + file.id + " .progressbar").css("width", (file.percent * 2));
});

fanart_uploader.bind('Error', function(up, err) {
    $('#fanart_filelist').append("<div>Error: " + err.code +
        ", Message: " + err.message +
        (err.file ? ", File: " + err.file.name : "") +
        "</div>"
    );

    up.refresh(); // Reposition Flash/Silverlight
});

fanart_uploader.bind('FileUploaded', function(up, file) {
    $('#' + file.id + " .tick").show();
});
}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-25T01:33:38.867

And here is the answer you linked to:

> NM, Answered my own question...
> 
> It seems my plUpload instance relieves the server response which is a JSON string into a JS object which can be accessed through the "FileUploaded" event.
> 
> This is a code example for anyone else who needs this answer.
> 
> ```
> fanart_uploader.bind('FileUploaded', function(up, file, info) {
>     $('#' + file.id + " .tick").show();
>     printObject(info);
> 
>     var response = jQuery.parseJSON(info.response);
> 
>     alert(response.error.message);
> }); 
> ```

# android - 如何在后台没有任何活动的情况下弹出警报消息？

> ID：10720181
> 
> 赞同：0
> 
> 时间：2012-05-23T12:44:15.357
> 
> 标签：android, alarmmanager, alarm, android-alarms

在我的 android i 应用程序中，我可以使用警报功能和注销功能。设置闹钟时间后，我通过单击注销按钮退出应用程序。

我在用

```
 ExitActivity.this.finish();  
         Intent intent1 = new Intent(ExitActivity.this,PinActivity.class);  
         intent1.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);   
         startActivity(intent1);  

         Intent intent = new Intent(Intent.ACTION_MAIN); 
         intent.addCategory(Intent.CATEGORY_HOME);  
         intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
         startActivity(intent); 
```

此代码退出应用程序，进入主屏幕，然后启动主屏幕。这是因为当我回到我的应用程序时，它会启动 pinscreen。警报完全符合我的要求，但是在弹出警报消息时，它在后台具有 pinactivity（我不想要）。我不想摆脱后台的 pin 活动。

这是我的接收器类？

```
 public class ShortTimeEntryReceiver extends BroadcastReceiver{

     @Override
     public void onReceive(Context context, Intent intent) {

    Toast.makeText(context,"Alarm Working", Toast.LENGTH_SHORT).show();

     try {
         Bundle bundle = intent.getExtras();
         String message = bundle.getString("alarm_message");

         Intent newIntent = new Intent(context, ReminderPopupMessage.class);
         newIntent.putExtra("alarm_message", message);
         newIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
         context.startActivity(newIntent);
        } catch (Exception e) {
         Toast.makeText(context, "There was an error somewhere, but we still received an alarm", Toast.LENGTH_SHORT).show();
         e.printStackTrace();

        }
} 
```

我怎么做？谢谢你们的帮助。。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T13:03:21.067

您应该使用警报管理器在 Android 中设置警报。警报管理器保留您的警报并在警报时间触发未决意图。

首先创建一个像这样的待处理意图：

```
 pendingIntent = PendingIntent.getService(CONTEXT, ALARM_ID,  INTENT_TO_LAUNCH, 0); 
```

然后使用这个待处理的意图来设置这样的警报：

```
 AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);
 alarmManager.set(AlarmManager.RTC_WAKEUP, ALARM_TIME, pendingIntent); 
```

这将在给定时间启动待处理的意图。

要删除警报，您必须使用相同的 ALARM_ID 重新创建相同的 Pending Intent ：

```
 alarmManager.cancel(pendingIntent); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-09T13:53:00.863

首先创建一个像这样的待处理意图：

```
 pendingIntent = PendingIntent.getService(context, alarm_id, Pass your data with intent,  PendingIntent.FLAG_UPDATE_CURRENT); 
```

像这样设置警报：

```
 AlarmManager am = (AlarmManager)getSystemService(ALARM_SERVICE);

 if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT) {
        //19 4.4and above api level
        am.setExact(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis() + AlarmManager.INTERVAL_DAY, sender);
 } else {
        //below 19 4.4
        am.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis() + AlarmManager.INTERVAL_DAY, sender);
 } 
```

这将在给定时间启动待处理的意图。

要删除警报，您必须使用相同的待处理意图和相同`ALARM_ID`：

```
am.cancel(pendingIntent); 
```

现在您需要创建一项服务来捕捉警报。

# php - 我怎样才能制作这个BBcode？[HTML 到 PHP]

> ID：10720184
> 
> 赞同：-2
> 
> 时间：2012-05-23T12:44:26.330
> 
> 标签：php, html, bbcode

> **可能重复：**
> [php regex <b> 到 <b>](https://stackoverflow.com/questions/7545920/php-regex-b-to-b)

在我的管理面板中，我有一个文本区域，员工可以在其中向客户插入消息。

我想`[[p=304_red]]`在返回中转换并检测到两个匹配项。我在想 str_replace 但我不能做两次。此外，str_replace 将被限制为一个，工作人员可能会添加两次。任何人都推荐一个更好的解决方案（preg_replace 似乎很棘手和混乱）

```
[[p=304_red]] 
```

应该返回

```
<a href="http://site.com/jump?go=304_red">
<img src="http://cdn.com/304_red/large/1.jpg" />
</a> 
```

我的代码只返回 URL。

```
$question = $_GET['replyBoxField'];
$question = str_replace("[[p=", "<a href='http://site.com/jump?go='>", $question);
$question = str_replace("]]", "</a>", $question); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T13:01:29.817

简单的正则表达式应该在这里为您工作。

```
$question = preg_replace('@\[\[p=([^\]]+)\]\]@i', '<a href="http://site.com/jump?go=$1"><img src= "http://cdn.com/$1/large/1.jpg" ></a>', $question); 
```

=)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:02:19.520

正则表达式不是更好的方法吗？

```
$filter = "/\[\[p=([^\]\s]+)\]\]/";
$transform = "<a href='http://site.com/jump?go=$1'><img src='http://cdn.com/$1/large/1.jpg' /></a>";

$string = preg_replace($filter, $transform, $string); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-23T13:03:56.337

所有其他答案都错了，请参阅：

将您的 BBCode 更改为此`[[p=304_sapphire]#[304_sapphire]]`

```
$question = str_replace("[[p=", "<a href='http://domain.com/jump?go=", $question);
$question = str_replace("]#[", "'><img src='http://cdn.com/files/", $question);
$question = str_replace("]]", "/1/small.jpg'/></a>", $question); 
```

# javascript - 在滚动到页面底部之前调用函数

> ID：10720192
> 
> 赞同：2
> 
> 时间：2012-05-23T12:44:43.877
> 
> 标签：javascript, jquery

我知道当滚动到页面底部时如何调用函数。

```
$(window).scrollTop() == $(document).height() - $(window).height() 
```

但我想在它触底之前做一点。我将如何做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T12:48:35.520

```
$(window).scroll(function () {
   if ($(window).scrollTop() >= $(document).height() - $(window).height() - 10) {
      alert('end of page');
   }
}); 
```

[检查这个例子](http://jsfiddle.net/wQfMx/)

`-10`指示在函数执行之前用户必须离页面末尾多远。这使您可以根据需要灵活调整行为

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:48:15.143

你快到了.. 要检查用户是否接近底部，你可以决定一个偏移量，之后你决定用户接近底部并即将到达它。

```
$(window).scroll(function() {
   if($(window).scrollTop() + $(window).height() > $(document).height() - offset) {
       callFunction();
   }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T12:51:57.917

只需将“之前一点”添加到等式中并检查您是否已经通过它，例如：

```
var a_little_bit_before = 400;

if ( $(window).scrollTop() > $(document).height() - $(window).height() - a_little_bit_before ) {
    alert("TA DA!");
} 
```

# database - 如何获得对沙盒应用程序内资源中的数据库的读/写访问权限？

> ID：10720194
> 
> 赞同：1
> 
> 时间：2012-05-23T12:45:00.083
> 
> 标签：database, cocoa, resources, entitlements, sandbox

我在 MyApp.app/Contents/Resources 文件夹中有数据库。我至少想在沙盒应用程序中从中读取数据。

现在我在控制台中有很多“拒绝文件写入数据/Users/user/Desktop/MyApp.app/Contents/Resources/DB/app_db.db”。

我不能使用 com.apple.security.temporary-exception.files.home-relative-path.read-write 因为我不想依赖应用程序的最终用户位置。

尽管控制台中有警告，但我的应用程序正在运行。是否有权授予访问权限，或者我应该在第一次启动时将我的数据库复制到容器中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T21:43:42.313

即使从数据库读取也可能需要数据库写入以创建锁等，并且您对此没有太多控制权（您可能有一些取决于数据库）。只需按照您自己的直觉 - 将第一次运行时的数据库复制到您的容器中。

还要装个雷达，不会有伤害的。

# python - vim 为常用命令创建别名

> ID：10720196
> 
> 赞同：5
> 
> 时间：2012-05-23T12:45:02.337
> 
> 标签：python, vim, wsh, waf

> **可能重复：**
> [在 vim 中为命令起别名](https://stackoverflow.com/questions/3878692/aliasing-a-command-in-vim)

所以我不得不编辑很多 waf wscript 文件。每次我执行这个命令来设置文件类型

```
set filetype=python 
```

有没有办法为上述命令设置一个小别名？这样我就可以进入 EX 模式并键入执行相同操作的“py”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T12:59:20.923

如果我正确理解了您的问题，以下内容将添加到您的`.vimrc`工作中

```
autocmd BufRead,BufNewFile *.waf set filetype=python 
```

如果它是一个特定的文件名，例如`wscript`，这也可以：

```
autocmd BufRead,BufNewFile wscript set filetype=python 
```

如果您不能依赖扩展名或文件名，您可以在文件的顶部或底部添加模式行

```
# vim: set filetype=python : 
```

有关`:help modeline`更多信息，请参阅。

但这有点难看，因为您必须修改文件，并且如果您在团队中工作，则可能会出现问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-23T13:04:36.460

你不想进入*Ex*模式。你想进入的是[*命令行*模式](http://vimdoc.sourceforge.net/htmldoc/cmdline.html#Command-line)。

```
command! Py set filetype=python 
```

完全符合您的要求：您键入`:Py<CR>`以将文件类型更改为`python`.

*您还可以使用普通*模式映射使其更快：

```
nnoremap <F11> :set filetype=python<CR> 
```

# java - servlet (TOMCAT) 中的 Log4J 日志路径

> ID：10720197
> 
> 赞同：1
> 
> 时间：2012-05-23T12:45:16.863
> 
> 标签：java, tomcat, log4j

我想使用 db 参数设置我的 log4j 日志路径。我的 log4j 属性是这样的：

```
 log4j.appender.file.File=${log.app.path}/app/app1.log 
```

我用 JVM 变量填充了系统属性 ${log.app.path}。现在我想用数据库中的值设置该路径。比我想用 ServletContextListener 设置它，但我发现 log4j 正在运行。

有什么建议么？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:58:05.760

您始终可以在代码中使用 FileAppender 初始化记录器。您可以只使用您想要的值（来自 db 或任何地方）并将 FileAppender 的参数设置为 Logger 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:17:21.407

您是否尝试过使用 log4j jdbcapender ？

链接是：

[http://www.tutorialspoint.com/log4j/log4j_logging_database.htm](http://www.tutorialspoint.com/log4j/log4j_logging_database.htm)

# c# - Xunit 的 App.config

> ID：10720198
> 
> 赞同：10
> 
> 时间：2012-05-23T12:45:17.187
> 
> 标签：c#, xunit.net

我正在为一些依赖于一些配置设置的帮助程序类编写一些[xUnit测试，这些配置设置通常存储在执行项目的 App.config 或 Web.config 中。](http://xunit.codeplex.com/)

配置如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <appSettings>
    <add key="FileNamePattern" value="\\d{8}_\\w{4:20}\.png"/>
    <!-- and the likes -->
  </appSettings>
</configuration> 
```

我正在使用 GUI 运行程序 (xunit.gui.clr4.exe) 和 xUnit 控制台运行程序（在 Jenkins CI 服务器上）运行 xUnit 1.9。目前，我可以通过手动设置 xunit.gui.clr4.exe.config 和 xunit.console.exe.config 文件将这些配置值“注入”到测试环境中）；然而，这是乏味且容易出错的。

我还可以在夹具中模拟这些配置设置。但是在 10 个不同的文件中使用相同的夹具是相当重复的。

有没有更好的方法来使用 xUnit 模拟这些配置设置，例如为测试项目提供 App.config 文件？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-25T22:32:33.500

如果您的代码假定它们在 . `app.config`，那么 xUnit.net 支持通过提供一个将它们连接到那里（通常当测试在 DLL 文件中时，这意味着您 `AssemblyName.dll.config`在项目输出中获得一个文件，运行程序将其加载为设置（如果它在加载时存在）。

显然，首先使用 DI 原则来删除这些依赖项并没有什么坏处，但我想说，在你真正开始测试之前不要弄乱代码。

为了保持干燥，请将 app.config 放在中心位置并将其添加为链接（通过对话框中“打开”按钮上的箭头）。（是的，有很多不喜欢的地方——只有当你觉得它是最不邪恶的方法时才使用。）

* * *

需要注意的一件事是，除非您要求重新加载程序集，否则不会在 GUI 运行器中重新加载更改。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-02-27T00:47:37.680

*从更复杂的项目和团队工作的角度来看，我建议：*

1.  **xUnit 项目的单独 .config**文件（它利用独立的配置和日志记录来运行测试）
2.  **单独为 xUnit 项目**设置***依赖注入*和*.config 读取***

 **我们的团队正在使用这种 xUnit **init & dispose**模式：

```
 public class MyTest : IDisposable
    {
        public IServiceProvider Services { get; private set; }
        public MyProjectOptions Options { get; private set; }
        public Logger Logger { get; private set; }

        private void Configure()
        {
            // appsettings.workspace.json for custom developer configuration
            var configuration = new ConfigurationBuilder()
                .SetBasePath(Directory.GetCurrentDirectory())
                .AddJsonFile("appsettings.json")
                .AddJsonFile("appsettings.workspace.json", optional: true)
                .Build();

            Logger = new LoggerConfiguration()
                .MinimumLevel.Debug()
                .WriteTo.LiterateConsole()
                .WriteTo.RollingFile("logs/{Date}-log.txt")
                .CreateLogger();

            Options = configuration.GetSection("MyProject").Get<MyProjectOptions>();

            var services = new ServiceCollection();
            services.AddSingleton<ILogger>(s => Logger);
            // other DI logic and initializations ...
            //services.AddTransient(x => ...);

            Services = services.BuildServiceProvider();
        }

        public MyTest()
        {
            Configure();

            // ... initialize data in the test database ...
            var data = Services.GetService<TestDataService>();
            data.Clean();
            data.SeedData();
        }

        public void Dispose()
        {
            // ... clean-up data in the test database ...
            var data = Services.GetService<TestDataService>();
            data.Clean();
        }
    } 
```**

# android - 使用android单击主类中的按钮时如何在Layout Inflater中启用图像视图

> ID：10720203
> 
> 赞同：1
> 
> 时间：2012-05-23T12:45:28.873
> 
> 标签：android

我是安卓新手。我的问题是当我尝试单击主类（Trip_planning_list）中的按钮时，我需要在我的子类（EventListAdapter）中启用一个图像视图，然后我收到以下 logcat 错误和我的代码。

谢谢，赛姆。

```
05-23 18:12:37.292: I/value of imagerotation(606): [mmm]
05-23 18:12:39.052: D/AndroidRuntime(606): Shutting down VM
05-23 18:12:39.052: W/dalvikvm(606): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
05-23 18:12:39.082: E/AndroidRuntime(606): FATAL EXCEPTION: main
05-23 18:12:39.082: E/AndroidRuntime(606): java.lang.NullPointerException
05-23 18:12:39.082: E/AndroidRuntime(606):  at com.igfa.Trip_planning_list$3.onClick(Trip_planning_list.java:106)
05-23 18:12:39.082: E/AndroidRuntime(606):  at android.view.View.performClick(View.java:2408)
05-23 18:12:39.082: E/AndroidRuntime(606):  at android.view.View$PerformClick.run(View.java:8816)
05-23 18:12:39.082: E/AndroidRuntime(606):  at android.os.Handler.handleCallback(Handler.java:587)
05-23 18:12:39.082: E/AndroidRuntime(606):  at android.os.Handler.dispatchMessage(Handler.java:92)
05-23 18:12:39.082: E/AndroidRuntime(606):  at android.os.Looper.loop(Looper.java:123)
05-23 18:12:39.082: E/AndroidRuntime(606):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-23 18:12:39.082: E/AndroidRuntime(606):  at java.lang.reflect.Method.invokeNative(Native Method)
05-23 18:12:39.082: E/AndroidRuntime(606):  at java.lang.reflect.Method.invoke(Method.java:521)
05-23 18:12:39.082: E/AndroidRuntime(606):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-23 18:12:39.082: E/AndroidRuntime(606):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-23 18:12:39.082: E/AndroidRuntime(606):  at dalvik.system.NativeStart.main(Native Method)

package com.igfa;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Timer;
import java.util.TimerTask;

import android.app.Dialog;
import android.app.ListActivity;
import android.content.Context;
import android.content.Intent;
import android.database.Cursor;
import android.database.SQLException;
import android.net.Uri;
import android.opengl.Visibility;
import android.os.Bundle;
import android.os.Handler;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.View.OnClickListener;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.RelativeLayout;
import android.widget.TextView;

import com.igfa.database.DBAdapter;
public class Trip_planning_list extends ListActivity {
    ImageView facebookimage,donateimage,getthemobileapp;
    Timer timer;
    TimerTask task;
    ImageView slidingimage,deleteCrossButton,deleteBigButton;
    int value1=0;

    public int currentimageindex=0;
    boolean f1=false;
    private int[] IMAGE_IDS = {
            R.drawable.facebook,
            R.drawable.donateimage,
            R.drawable.getthemobileapp
    };
    TextView name,address,dob,dep,mstatus;
    ListView lv;
    DBAdapter db;
    /** Called when the activity is first created. */
    Button cancel,ok;
    TextView addView,add_list;
    ImageButton backButton,EditButton;
    EditText edit;  
    Cursor state_value;
    RelativeLayout _tmplinear;
    ArrayList<String>value=new ArrayList<String>();
    int i=1;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tripplanninglist);

        db= new DBAdapter(getApplicationContext());
        db.open();
         facebookimage=(ImageView)findViewById(R.id.facebook);

         final Handler mHandler = new Handler();

            // Create runnable for posting
            final Runnable mUpdateResults = new Runnable() {
                public void run() {

                    AnimateandSlideShow();

                }
            };

            int delay = 1000; // delay for 1 sec.

            int period = 8000; // repeat every 4 sec.

            Timer timer = new Timer();
            timer.scheduleAtFixedRate(new TimerTask() {

                public void run() {

                    mHandler.post(mUpdateResults);

                }

            }, delay, period);

        addView =(TextView)findViewById(R.id.Add);
        backButton = (ImageButton)findViewById(R.id.ig);
        EditButton = (ImageButton)findViewById(R.id.edit_button);

        EditButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                deleteCrossButton.setVisibility(View.VISIBLE);
            }
        });

        backButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent backIntent = new Intent(Trip_planning_list.this,Igfamobile1Activity.class);
                startActivity(backIntent);
            }
        });

        try {

            state_value= db.getState();

            if (   state_value.moveToFirst())
            {
                do {    
                    value.add(state_value.getString(1));

                }

                while (state_value.moveToNext());
            }

        } catch (SQLException e) {
            // TODO Auto-g

        }

        Collections.sort(value);
        lv = (ListView) findViewById(R.id.list);
        lv=getListView();
        lv.setAdapter(new StateListAdapter(this));
        lv.setFastScrollEnabled(true);

        ListAdapter listAdapter = lv.getAdapter();
        if (listAdapter == null) {
            // pre-condition
            return;
        }
        int totalHeight = 0;
        for (int i = 0; i < listAdapter.getCount(); i++) {
            View listItem = listAdapter.getView(i, null, lv);
            //listItem.measure(0, 0);
            totalHeight += listItem.getMeasuredHeight();
        }

        ViewGroup.LayoutParams params = lv.getLayoutParams();
        params.height = totalHeight
                + (lv.getDividerHeight() * (listAdapter.getCount() - 1));
        lv.setLayoutParams(params);
        lv.requestLayout();

        addView.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                final Dialog dialog = new Dialog(Trip_planning_list.this);
                dialog.setContentView(R.layout.custom1);
                dialog.setCancelable(true);
                cancel=(Button)dialog.findViewById(R.id.Cancle_c);
                ok=(Button)dialog.findViewById(R.id.OK_c);
                edit=(EditText)dialog.findViewById(R.id.edit_c);
                ok.setOnClickListener(new OnClickListener() {
                    int i=0;
                    @Override
                    public void onClick(View v) {
                        // TODO Auto-generated method stub
                        //value.clear();
                        ok.setBackgroundResource(R.drawable.ok);
                        cancel.setBackgroundResource(R.drawable.cancel_hover);

                        value.add(edit.getText().toString().trim());
                        db.insertStateName(edit.getText().toString().trim());
                        Log.i("value of addtrip",value.get(i));
                        i++;
                        edit.setText("");

                        Collections.sort(value);

                        lv=getListView();
                        lv.setAdapter(new EventListAdapter(this));

                        lv.setFastScrollEnabled(true);
                        dialog.dismiss();
                    }
                });
                cancel.setOnClickListener(new OnClickListener() {
                    @Override
                    public void onClick(View v) {
                        ok.setBackgroundResource(R.drawable.ok_hover);
                        cancel.setBackgroundResource(R.drawable.cancel1);
                        // TODO Auto-generated method stub
                        dialog.dismiss();
                    }
                });
                dialog.show();

            }

        });

    }

    public void onClick(View v) {

        finish();
        android.os.Process.killProcess(android.os.Process.myPid());
    }

    private void AnimateandSlideShow() {

        slidingimage = (ImageView)findViewById(R.id.facebook);
        slidingimage.setImageResource(IMAGE_IDS[currentimageindex%IMAGE_IDS.length]);

        currentimageindex++;
        value1=currentimageindex;
        facebookimage.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                if(value1%3==1)
                {
                    Intent i = new Intent(Intent.ACTION_VIEW);   
                    i.setData(Uri.parse("http://www.facebook.com/pages/International-Game-Fish-Association/103760506329326"));   
                    startActivity(i);  
                }
                else if(value1%3==2)
                {
                    Intent i = new Intent(Intent.ACTION_VIEW);   
                    i.setData(Uri.parse("http://www.igfa.org/Donate/DonorSocieties.aspx"));   
                    startActivity(i);  
                }else
                {
                    Intent i = new Intent(Intent.ACTION_VIEW);   
                    i.setData(Uri.parse("http://www.igfa.org/Fish/IGFA-Mobile.aspx"));   
                    startActivity(i); 
                }
            }
        });
        Log.v("---==================", ""+currentimageindex);
        Log.i("value of imagerotation",String.valueOf(value));
        //Animation rotateimage = AnimationUtils.loadAnimation(this, R.anim.custom_anim);

        //slidingimage.startAnimation(rotateimage);

    }

    /*
     * Adapter for populating data in list
     */
    private class EventListAdapter extends BaseAdapter {

        private OnClickListener mContext;

        public EventListAdapter(OnClickListener onClickListener) {
            mContext = onClickListener;
        }

        public int getCount() {

            return value.size();
        }
        public Object getItem(int position1) {
            return position1;
        }
        public long getItemId(int position1) {
            return position1;
        }
        public View getView(final int position1, View convertView, ViewGroup parent) {

            View v;
            LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.trip_list, null);

            deleteCrossButton = (ImageView)findViewById(R.id.delete_cross_icon);
            deleteBigButton = (ImageView)findViewById(R.id.deleteBtn);

            add_list=(TextView)v.findViewById(R.id.Add_trip);
            add_list.setText(value.get(position1));
            _tmplinear=(RelativeLayout)v.findViewById(R.id.linear_trip);

            deleteCrossButton.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    deleteBigButton.setVisibility(View.VISIBLE);
                }
            });

            _tmplinear.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    Intent in=new Intent(getApplicationContext(),TripPlaning_SubList.class);
                    in.putExtra("select", value.get(position1));
                    startActivity(in);
                }
            });                     

            return v;

        }

    };
    /*
     * Adapter for populating data in list
     */
    private class StateListAdapter extends BaseAdapter {

        private Trip_planning_list mContext;

        public StateListAdapter(Trip_planning_list tripPlanningList) {
            mContext = tripPlanningList;
        }

        public int getCount() {

            return value.size();
        }
        public Object getItem(int position) {
            return position;
        }
        public long getItemId(int position) {
            return position;
        }
        public View getView(final int position, View convertView, ViewGroup parent) {

            View v;
            LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.trip_list, null);

            add_list=(TextView)v.findViewById(R.id.Add_trip);

            add_list.setText(value.get(position));

            _tmplinear=(RelativeLayout)v.findViewById(R.id.linear_trip);

            _tmplinear.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    Intent in=new Intent(getApplicationContext(),TripPlaning_SubList.class);
                    in.putExtra("select", value.get(position));
                    startActivity(in);
                }
            });    

            return v;

        }

    };

} 
```

# c# - 从数据表中删除数据行

> ID：10720204
> 
> 赞同：1
> 
> 时间：2012-05-23T12:45:32.443
> 
> 标签：c#, winforms, datagridview

我有一个 Windows 应用程序，我将在其中从数据表中删除一个数据行。但我有一个例外。

> 给定的 DataRow 不在当前 DataRowCollection 中。

编码：

```
DataTable dt = new DataTable();
DataRowView currentDataRowView = (DataRowView)DataGridView1.CurrentRow.DataBoundItem;
DataRow row = currentDataRowView.Row;

dt.Rows.Remove(row); // exception here.
DataGridView1.DataSource = dt; 
```

数据表 dt 的信息如图所示。 ![数据表 dt](../Images/97c380c51120d2836993e658127bf94d.png)

我认为我已经将 datarowview 转换为 datarow。

**编辑：** dt 是从另一个 DataGridView 创建的。

```
 foreach (DataGridViewRow row in DatGridView2.Rows)
                {
                    DataGridViewCheckBoxCell check = row.Cells[0] as DataGridViewCheckBoxCell;
                    if (check.Value != null)
                    {
                        if ((bool)check.Value)
                        {
                            //this row has a checkBox set to true (tick is added)
                            //add this row to dataTable ...
                            DataRow myRow = (row.DataBoundItem as DataRowView).Row;
                            DataRow dr = dt.NewRow();
                            dr[0] = myRow[0];
                            dr[1] = myRow[1];
                            dr[2] = myRow[2];
                            dr[3] = myRow[3];
                            if (!dt.Rows.Contains(dr[0]))
                            {
                                dt.Rows.Add(dr);
                            }
                        }
                    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T12:54:35.373

我认为您不能引用与`CurrentRow.DataBoundItem`来自的数据表不同的数据表。

您的`dt`DataTable 是从 DataGridView2 构建的，但`CurrentRow.DataBoundItem`来自 DataGridView1。

您必须自己在 DataGridView1 中找到匹配的行，然后才能将其删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T13:17:40.547

我已经尝试了您的代码，并且没有问题：

```
 DataTable dt = (DataTable)dataGridView1.DataSource;
        DataRowView currentDataRowView = (DataRowView)dataGridView1.Rows[0].DataBoundItem;
        DataRow row = currentDataRowView.Row;

        dt.Rows.Remove(row); 
        dataGridView1.DataSource = dt; 
```

因此，正如我在上面所写的，错误“给定的 DataRow 不在当前的 DataRowCollection 中”意味着您尝试删除不在 DataTable“dt”中的行。

# java - 从原始数据的字节数组中获取缓冲图像

> ID：10720212
> 
> 赞同：5
> 
> 时间：2012-05-23T12:46:10.027
> 
> 标签：java, bytearray, bufferedimage, jai

我正在使用 JNA。我正在从我的 c++ 方法中获取原始数据的字节数组。现在我被困在如何使用这个原始数据字节数组在 java 中获取缓冲图像。我尝试了几件事来将其作为 tiff 图像，但我没有成功。这是我到目前为止尝试的代码。这里我的字节数组包含 16 位灰度图像的数据。我从 x-sensor 设备中获取这些数据。现在我需要从这个字节数组中获取图像。

**第一次尝试**

```
byte[] byteArray = myVar1.getByteArray(0, 3318000);//array of raw data

          ImageInputStream stream1=ImageIO.createImageInputStream(newByteArrayInputStream(byteArray));
            ByteArraySeekableStream stream=new ByteArraySeekableStream(byteArray,0,3318000);
                 BufferedImage bi = ImageIO.read(stream); 
```

**第二次尝试**

```
 SeekableStream stream = new ByteArraySeekableStream(byteArray);
         String[] names = ImageCodec.getDecoderNames(stream);

          ImageDecoder dec = ImageCodec.createImageDecoder(names[0], stream, null);
//at this line get the error ArrayIndexOutOfBoundsException: 0 
            RenderedImage im = dec.decodeAsRenderedImage(); 
```

我想我在这里失踪了。由于我的数组包含原始数据，因此它不包含 tiff 图像的标头。我对吗？如果是，那么如何在字节数组中提供此标头。最终如何从这个字节数组中获取图像？

为了测试我是否从我的本机方法中获得了正确的字节数组，我将此字节数组存储为 .raw 文件，并在 ImageJ 软件中打开此原始文件后，它会播下正确的图像，因此我的原始数据是正确的。我唯一需要的是如何将我的原始字节数组转换为图像字节数组？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T16:11:28.187

这是我用来将原始像素数据转换为`BufferedImage`. 我的像素是 16 位签名的：

```
public static BufferedImage short2Buffered(short[] pixels, int width, int height) throws IllegalArgumentException {
    BufferedImage image = new BufferedImage(width, height, BufferedImage.TYPE_USHORT_GRAY);
    short[] imgData = ((DataBufferShort)image.getRaster().getDataBuffer()).getData();
    System.arraycopy(pixels, 0, imgData, 0, pixels.length);     
    return image;
} 
```

然后我使用 JAI 对生成的图像进行编码。告诉我你是否也需要代码。

编辑：感谢@Brent Nash对类似问题的[回答](https://stackoverflow.com/a/12062505/1098603)，我大大提高了速度。

编辑：为了完整起见，这里是无符号 8 位的代码：

```
public static BufferedImage byte2Buffered(byte[] pixels, int width, int height) throws IllegalArgumentException {
    BufferedImage image = new BufferedImage(width, height, BufferedImage.TYPE_BYTE_GRAY);
    byte[] imgData = ((DataBufferByte)image.getRaster().getDataBuffer()).getData();
    System.arraycopy(pixels, 0, imgData, 0, pixels.length);     
    return image;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T12:52:56.487

字节数组是否只包含像素数据或结构化图像文件（如 TIFF 等）实际上取决于您从哪里获得它。从提供的信息中无法回答这个问题。

但是，如果它确实包含结构化图像文件，那么您通常可以：

*   在它周围包裹一个 ByteArrayInputStream
*   将该流传递给 ImageIO.read()

如果您只有字面上的原始像素数据，那么您有几个主要选择：

*   “手动”获取该像素数据，使其位于一个 int 数组中，每个像素一个 int，采用 ARGB 格式（ByteBuffer 和 IntBuffer 类可以帮助您处理字节）
*   创建一个空白的 BufferedImage，然后调用它的 setRGB() 方法从你之前准备的 int 数组中设置实际的像素内容

如果你知道你在用比特和字节做什么，我认为上面是最简单的。但是，原则上，您应该能够执行以下操作：

*   找到一个合适的 WritableRaster.create... 方法方法，该方法将创建一个包裹在数据周围的 WritableRaster 对象
*   将该 WritableRaster 传递给相关的 BufferedImage 构造函数以创建图像。

# javascript - 如何在 HTML 菜单下方显示黄玉签名？

> ID：10720219
> 
> 赞同：0
> 
> 时间：2012-05-23T12:46:45.030
> 
> 标签：javascript, html, topaz-signatures

我们将 Topaz Systems 签名板设备用于签名 asp.net Web 应用程序。

```
<object class="sgPad" id="s2" style="z-index: -1;" width="120" height="20"  classid="clsid:69A40DA3-4D42-11D0-86B0-0000C025864A">
<param name="_Version" value="131095" />
<param name="_ExtentX" value="2646" />
<param name="_ExtentY" value="2646" />
<param name="_StockProps" value="9" />
</object> 
```

IE 总是在所有元素的顶部显示这个控件。我正在使用悬停菜单进行导航，并且签名控件始终出现在菜单顶部。我试图设置 z-index 但它不起作用。知道如何在签名上显示菜单吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:47:40.077

显然，这是页面上 ActiveX 控件的已知行为。

从不畏惧！我从 2005 年发现了这个解决方法：[Overlap an ActiveX Object with HTML](http://www.codeproject.com/Articles/12211/A-workaround-to-overlap-an-ActiveX-with-an-HTML-el)

作者建议在不使用时使用图像占位符，然后在激活时将图像替换为实际的 ActiveX 控件。

# javascript - 单击链接后将全屏api保持在全屏状态

> ID：10720222
> 
> 赞同：7
> 
> 时间：2012-05-23T12:47:01.060
> 
> 标签：javascript, html, hyperlink, fullscreen

我正在使用 HTML5 全屏 API，因此用户可以全屏查看我的网站，但是当用户单击链接（例如菜单项）时，用户会切换回正常浏览器模式。当用户单击某些链接时，如何使浏览器保持全屏显示？最好不必将整个网站转换为 AJAX 页面加载系统。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T13:08:07.427

如果不转换为 AJAX 加载系统，就不可能做到这一点。当您导航到不同的页面时，DOM 树被破坏，但您进入全屏模式的元素是所述 DOM 树的一部分。

# c# - 中继器内的中继器

> ID：10720228
> 
> 赞同：4
> 
> 时间：2012-05-23T12:47:25.057
> 
> 标签：c#, asp.net, repeater

我在中继器中有一个中继器，如何使用下面的代码：

```
<input type="hidden" value='<%# Container.ItemIndex %>' /> 
```

指向第一个中继器？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T13:09:45.600

[这个问题](https://stackoverflow.com/questions/1411336/accessing-parent-data-in-nested-repeater-in-the-headertemplate)类似；虽然它谈到从 访问属性`<HeaderTemplate>`，但*感觉*它应该从`<ItemTemplate>`.

所以试试`<%# ((RepeaterItem)Container.Parent.Parent).ItemIndex %>`

如果这不起作用，您可能需要更多`.Parent`s. 尝试暂时将处理程序附加到内部中继器，并使用属性返回与aspx中给出的相同对象`ItemDataBound`的事实。所以基本上评估等等，直到你找到另一个。然后在你的 aspx 中使用相同数量的s。`RepeaterItemEventArgs` `Item``Container``e.Item.Parent``e.Item.Parent.Parent``RepeaterItem``.Parent`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:51:34.347

来自 MSDN：[如何使用嵌套中继器控件显示分层数据](http://support.microsoft.com/kb/306154)

这篇文章有几年的历史了，但内容就是你要找的。

# c - 无法理解 OpenMP 部分

> ID：10720231
> 
> 赞同：0
> 
> 时间：2012-05-23T12:47:37.840
> 
> 标签：c, openmp

我有这个使用部分的 OpenMP 代码

```
 #pragma omp parallel sections num_threads(8)
    {
        printf_s("Allo from thread %d\n", omp_get_thread_num());
        #pragma omp section
        printf_s("Bello from thread %d\n", omp_get_thread_num());
        #pragma omp section
        printf_s( "Cello from thread %d\n", omp_get_thread_num());
    } 
```

我得到不同类型的输出。有时只有线程 0 打印所有三行，有时不同的线程会打印。我不明白这一点，三行不应该总是从三个不同的线程中打印出来吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:56:12.353

OpenMP 不保证您期望的行为。这些部分构造保证（至少，构造保证的规范，实现可能会被破坏）每个部分由一个（并且只有一个）线程执行。它不保证每个部分都由不同的线程执行。

正如您所观察到的，在您观察到的级别上，您的程序是不确定的。这对于并行程序来说并不少见，值得牢记的教训；在某些情况下，如果有必要，程序员有责任命令执行代码段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T06:41:44.837

Open MP 保证每个部分将由不同的线程执行以进行并发计算。

您的第一个语句可以由创建的 8 个线程中的任何一个执行，但第二个和第三个打印语句将由创建的 8 个线程中的任何两个不同线程执行。如果没有发生，请将第一条语句放在 pragma 部分指令下。然后所有三个语句将由不同的线程执行。

# jquery - slideToggle：第二次更改文本（打开->关闭->打开->关闭...）

> ID：10720236
> 
> 赞同：0
> 
> 时间：2012-05-23T12:47:55.477
> 
> 标签：jquery, text, slidetoggle

```
<div id="sidebar_archive_infoline_bottom"><a id="showallnews" href="#">SHOW ALL NEWS</a></div>     

<script>
$('#newsdiv').hide();
$('#showallnews').click(function () {
$('#newsdiv').slideToggle('fast');
$('#showallnews').text('CLOSE')
}); </script> 
```

第一次单击后，文本“显示所有新闻”变为“关闭”。现在我需要一种方法将其从“关闭”更改为“显示所有新闻”等等......

此致！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T12:52:54.377

```
<script>
    $('#newsdiv').hide();
    $('#showallnews').click(function() {
    $('#newsdiv').slideToggle('fast', function() {
        $('#showallnews').text().toLowerCase().indexOf('close') != -1 ? $('#showallnews').text('SHOW ALL NEWS') : $('#showallnews').text('CLOSE');
    });
});​
</script> 
```

[演示](http://jsfiddle.net/ankur20us/BM8jD/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:51:56.967

```
$('#showallnews').click(function () {
$('#newsdiv').slideToggle('fast');
$('#showallnews').addClass("closed");
$('#showallnews').text('CLOSE')
});

$('.closed').click(function(){
$('#newsdiv').slideToggle('fast');
$('#showallnews').removeClass("closed");
$('#showallnews').text('Show all news')

}) 
```

不是最好的方法，但这可以做到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T13:08:04.280

尝试这个

```
<script>
...
 $("#showallnews").toggle(function (){
            $("#showallnews").text("SHOW ALL NEWS")
            .stop();
        }, function(){

            $("#showallnews").text("CLOSE")
            .stop();
        });
</script> 
```

# javascript - 文本字段的正则表达式

> ID：10720237
> 
> 赞同：1
> 
> 时间：2012-05-23T12:47:57.503
> 
> 标签：javascript, jquery

我希望每个单词都以大写字母开头，其余部分在输入文本字段时应以小写字母开头。

我不知道如何给出正则表达式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T14:01:00.460

为什么不使用 css [transform:capitalize](http://www.w3schools.com/cssref/pr_text_text-transform.asp)会更容易？:D

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T13:02:57.917

看起来像一个经典的大写函数。

```
input.value = input.value.replace(/\b[a-zA-Z]+/g,
    function(m) {return m.charAt(0).toUpperCase()+m.substring(1).toLowerCase();}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T13:13:30.043

假设您想验证某些输入，您应该为您*不*想要的内容编写一个匹配项，然后将其取反：

```
!( /\b[a-z]|\w[A-Z]/.test(input_string) ) 
```

此正则表达式匹配单词开头的小写字母或紧随另一个字母（即单词中间）的大写字母。如果你否定这个结果，就像我在这里所做的那样，你会得到你想要的验证。

[MDN 对正则表达式](https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions)和[JavaScript RegExp 对象](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp)有很好的介绍

# android - 同步期间出错：使用 maven 将 apk 部署到设备时超时

> ID：10720241
> 
> 赞同：9
> 
> 时间：2012-05-23T12:48:18.203
> 
> 标签：android, android-maven-plugin

我正在使用 maven android 插件来构建我的项目并将它们部署到设备上。

使用`mvn clean install android:undeploy android:deploy`我可以成功部署到我的 2.2 ZTE 刀片：

```
[INFO] Found 1 devices connected with the Android Debug Bridge
[INFO] android.device parameter not set, using all attached devices
[INFO] Successfully uninstalled com.jameselsey.apps from P729J_SBM_ZTE_ZTE-BLADE
[INFO] Found 1 devices connected with the Android Debug Bridge
[INFO] android.device parameter not set, using all attached devices
[INFO] Successfully installed D:\development\james-projects\MyApp\target\myapp-0.5-SNAPSHOT.apk to P729J_SBM_ZTE_ZTE-BLADE 
```

但是，当我在 2.3.3 上插入三星 GT-I9000 时，这似乎不起作用，这就是我得到的：

```
[INFO] Found 1 devices connected with the Android Debug Bridge
[INFO] android.device parameter not set, using all attached devices
[INFO] Successfully uninstalled com.jameselsey.apps from 333297C93FD200EC_samsung_GT-I9000
[INFO] Found 1 devices connected with the Android Debug Bridge
[INFO] android.device parameter not set, using all attached devices
01:36:59 E/Device: Error during Sync: timeout. 
```

什么会导致超时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-04T06:50:21.983

我在 Eclipse 中遇到了这个问题，这是因为 ADB 连接超时。

默认值为 5000 毫秒，将其更改为 10000 后得到修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-14T01:43:34.813

实际上，@Capitain 溢出提到的连接超时只是为了让插件首先打开一个针对设备的套接字。之后，安装过程有自己的超时（以分钟为单位），由环境变量控制（根据[ddmlib](https://android.googlesource.com/platform/tools/base/+/master/ddmlib/src/main/java/com/android/ddmlib/Device.java)：`ADB_INSTALL_TIMEOUT`默认为 4 分钟）

# .net - 仅触发显示的用户控件的服务器验证器

> ID：10720244
> 
> 赞同：0
> 
> 时间：2012-05-23T12:48:20.897
> 
> 标签：.net, validation, user-controls

在某些页面上，我有一个带有用户控件的转发器，其中包含一个文本框和一个用于检查文本框内容的自定义验证器。如果可能，验证器的逻辑应该保持不变。

控件已呈现，但默认情况下不显示。用户可以通过选中复选框（启动 jQuery 脚本）来显示它们，因此它们被标记为“已添加”。现在，如果用户单击保存按钮，**则只有显示的控件的验证器应该触发**。目前，所有验证器都会触发，这是不希望的。

**更新**
默认情况下，我在代码后面禁用了验证器

```
controlValidator.Enabled = false; 
```

并尝试在 jQuery 脚本中启用它们。但是，这没有效果。

```
$val = $(this).find(".controlCell").find(".controlValidator");
$val.removeAttr('disabled'); 
```

我可以通过它的 css 类（而不是 ID）找到验证器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:57:53.473

您可以将**ValidationGroup**属性添加到添加的控件。现在，您可以控制要验证的 asp.net 控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:58:39.713

据我所知，您可以禁用控件并使其不可见，如下所示：

```
$("#<%ControlID.ClientID%>").attr("disabled", "disabled"); 
```

希望这可以帮助！！

# python - Python的itertools产品内存消耗

> ID：10720247
> 
> 赞同：15
> 
> 时间：2012-05-23T12:48:35.363
> 
> 标签：python, generator, itertools

[文档](http://docs.python.org/library/itertools.html#itertools.product)说笛卡尔积函数

```
the actual implementation does not build up intermediate results in memory. 
```

发电机怎么可能做到这一点？有人可以向我展示一个 2 个生成器的内存消耗有限的示例吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-23T12:57:20.973

查看模块的源代码，`itertools.product()`实际上将每个参数转换为一个元组：

```
// product_new() in itertoolsmodule.c
for (i=0; i < nargs ; ++i) {
    PyObject *item = PyTuple_GET_ITEM(args, i);
    PyObject *pool = PySequence_Tuple(item); //<==== Call tuple(arg)
    if (pool == NULL)
        goto error;
    PyTuple_SET_ITEM(pools, i, pool);
    indices[i] = 0;
} 
```

换句话说，`itertools.product()`的内存消耗似乎与输入参数的大小呈线性关系。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T12:56:11.523

好吧，它还说：

> 嵌套循环像里程表一样循环，每次迭代时最右边的元素都会前进。此模式创建一个字典顺序，以便如果输入的可迭代项已排序，则产品元组按排序顺序发出。

这几乎就是它在实现中的工作方式（`Modules/itertoolsmodule.c`）

这是状态对象：

```
typedef struct {
    PyObject_HEAD
    PyObject *pools;       /* tuple of pool tuples */
    Py_ssize_t *indices;   /* one index per pool */
    PyObject *result;      /* most recently returned result tuple */
    int stopped;           /* set to 1 when the product iterator is exhausted */
} productobject; 
```

下一项由函数返回，该函数`product_next`使用此状态和引用中描述的算法来生成下一个状态。请参阅[此答案](https://stackoverflow.com/a/8695700/8206)以了解内存要求。

对于普通教育，您可以[在此处](http://eli.thegreenplace.net/2012/04/05/implementing-a-generatoryield-in-a-python-c-extension/)阅读有关如何从 C 扩展中创建具有状态的生成器的信息。

# iphone - 使用 UISlider 移动标签

> ID：10720249
> 
> 赞同：2
> 
> 时间：2012-05-23T12:48:39.197
> 
> 标签：iphone, ios, uislider

我有一个要求，我必须使用 UISlider 移动标签上的值。我试过这段代码

```
[slider addTarget:self action:@selector(dragMoving:withEvent:) forControlEvents: UIControlEventTouchDragInside];

- (void)dragMoving:(UIControl *)c withEvent:ev {  
    UITouch *touch = [[ev allTouches] anyObject];
    CGPoint touchPoint = [touch locationInView:self.view];
     sliderLabe.frame = CGRectMake(touchPoint.x,250, 270, 40);
} 
```

sliderLabel 就在滑块的下方，但是当我拖动得更快时它会给我带来奇怪的结果，但是如果我缓慢地移动 mu 滑块，它就可以正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T13:20:03.543

当滑块移动时，它也在计算它的新值并调用`valueChanged`. 这可能会干扰您的额外`UIControlEventTouchDragInside`处理程序。

如果`slider.continuous`设置为`YES`您可以尝试将您的标签移动代码移动到`valueChanged`处理程序中。

当然触摸位置在这个方法中是未知的，所以它需要从滑块的其他属性中计算出来：`frame.origin.x`, `frame.size.width`, `minimumValue`,`maximumValue`和`value`

# c - 管理日志文件大小

> ID：10720251
> 
> 赞同：0
> 
> 时间：2012-05-23T12:48:45.037
> 
> 标签：c, file, logging

我有一个记录其活动的程序。
我想实现一个日志文件机制，将日志文件保持在一定的大小，比如说 10 MB。
日志文件本身只保存程序执行的命令；这些命令是可变长度的。

目前，该程序在 Windows 环境下运行，但我可能很快会将其移植到 UNIX。

## **我想出了两种管理日志文件的方法：**

**1.**保留多个较小大小的文件，如果新命令超过当前文件长度，则将最旧的文件截断为零大小，然后从那里开始写入。

**2.**在文件中保留一个标头，其中包含有关文件中第一个命令的元数据，以及文件中要写入的下一个位置。*我还认为，每个命令都应该以这种方式保存有关其长度的元数据。*

**我的问题如下：**

*   就效率而言，您会使用哪种方法，为什么？
*   是否有一个unix命令/功能很容易？

非常感谢你的帮助，
尼希尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:18:12.927

在 UNIX/Linux 平台上，有一个管理日志文件的 logrotate 程序。例如，可以在这里找到详细信息：http: [//linuxcommand.org/man_pages/logrotate8.html](http://linuxcommand.org/man_pages/logrotate8.html)

# c# - doPostBack 没有触发

> ID：10720253
> 
> 赞同：1
> 
> 时间：2012-05-23T12:48:47.327
> 
> 标签：c#, javascript, visual-studio-2010, sharepoint-2010, dopostback

我正在关注这篇文章：[http](http://www.thorntontechnical.com/tech/sharepoint/sharepoint-2010-document-sets-custom-ribbon-buttons-with-custom-code/comment-page-1#comment-35294) ://www.thorntontechnical.com/tech/sharepoint/sharepoint-2010-document-sets-custom-ribbon-buttons-with-custom-code/comment-page-1#comment-35294在功能区按钮中获取事件。

```
 <?xml version="1.0" encoding="utf-8"?>
 <Elements xmlns="http://schemas.microsoft.com/sharepoint/">
  <CustomAction 
Id="Hello_world"
RegistrationType="List"
RegistrationId="101"
Location="CommandUI.Ribbon"
Sequence="5">
<CommandUIExtension>
  <CommandUIDefinitions>
    <CommandUIDefinition Location="Ribbon.Documents.Manage.Controls._children">
      <Button 
        Id="Ribbon.ManageDocumentSet.MDS.Manage.Controls.CustomButton" 
        TemplateAlias="o1" 
        ToolTipDescription="Demonstrate a ribbon doing something cool"
        ToolTipTitle="Download as Zip" 
        LabelText="Weeeee"
        Alt="Weee" 
        Command="Ribbon.ManageDocumentSet.MDS.Manage.CustomButtonClick" 
        Sequence="20"/>
    </CommandUIDefinition>
  </CommandUIDefinitions>
  <CommandUIHandlers>
         <CommandUIHandler Command="Ribbon.ManageDocumentSet.MDS.Manage.CustomButtonClick" CommandAction="javascript:__doPostBack('MyDelegateEvent', '');"/>
  </CommandUIHandlers>
     </CommandUIExtension>
   </CustomAction>
 </Elements> 
```

此 xml 将功能区放在 Documents.Manage 选项卡中。

```
 <Elements xmlns="http://schemas.microsoft.com/sharepoint/">
   <Elements xmlns="http://schemas.microsoft.com/sharepoint/">
   <Control
     ControlClass="SharePointProject1.MyClass"
     ControlAssembly="SharePointProject1, Version=1.0.0.0, Culture=neutral,      PublicKeyToken=f5b43d1a96c6223e"
Sequence="50" Id="AdditionalPageHead"/>
 </Elements><Control
     ControlClass="SharePointProject1.MyClass"
ControlAssembly="SharePointProject1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=f5b43d1a96c6223e"
     Sequence="50" Id="AdditionalPageHead"/>
 </Elements> 
```

控制类xml...

最后是cs类：

```
 namespace SharePointProject1
{
    public class MyClass : WebControl
    {
        const string MYEVENT = "MyDelegateEvent";

        protected override void OnLoad(EventArgs e)
        {
            this.EnsureChildControls();
            base.OnLoad(e);
            if (this.Page.Request["__EVENTTARGET"] == MYEVENT)
            {
                // custom code here
                int itemId = Convert.ToInt32(this.Page.Request["__EVENTARGUMENT"]);
                System.IO.TextWriter mywriterFired = new StreamWriter(@"C:\zzz_CodeBehindFileItemMenu.txt", true);
                mywriterFired.WriteLine("Event Fired at:" + DateTime.Now.ToLongTimeString() + ": Item ID:" + itemId.ToString());
                mywriterFired.Close();
            }
        }

    }
} 
```

我在汇编中添加了这段代码......但是 __doPostBack 事件从未触发......每个人都知道可能是什么原因吗？

# asp.net - 如何在 div 标签中放置控件并像这样设计

> ID：10720254
> 
> 赞同：0
> 
> 时间：2012-05-23T12:48:49.750
> 
> 标签：asp.net, html

我有一个要求，我需要在设计中放置这样的控件：

```
 label1 textbox1    label5 textbox5
  label2 textbox2    label6 textbox6
  label3 textbox3    label7 textbox7
  label4 textbox4    label8 textbox8 
```

现在我需要将所有控件放在一个 div 标签中，我该怎么做呢？我正在使用 vs 2008 和 asp.net

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:35:04.777

这是CSS

```
<style>
#txtbx1div
{
  width:200px;
  padding:5px;
  display:inline;
  float:left;
  position:relative;
}

#txtbx2div
{
  width:200px;
  padding:5px;
  display:inline;
  float:left;
  position:relative;
}
</style> 
```

html部分..记住这个例子中发布的值被视为一个数组txtbox []..你可以根据需要重命名它。

```
<div id="txtbx1div">
  <label>label1</label>
  <input type="text" id="textbox[]" />
  <label>label2</label>
  <input type="text" id="textbox[]" />
  <label>label3</label>
  <input type="text" id="textbox[]" />
  <label>label4</label>
  <input type="text" id="textbox[]" />
</div>

<div id="txtbx2div">
  <label>label5</label>
  <input type="text" id="textbox[]" />
  <label>label6</label>
  <input type="text" id="textbox[]" />
  <label>label7</label>
  <input type="text" id="textbox[]" />
  <label>label8</label>
  <input type="text" id="textbox[]" />
</div>
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:18:42.840

```
<div>
        <div class="left_align">
            label1</div>
        <div class="left_align">
            textbox1</div>
        <div class="left_align">
            <div class="left_align">
                label5</div>
            <div class="left_align">
                textbox5</div>
        </div>
    </div> 
```

CSS样式表是：

```
.left_align
 {
        float:left;
 } 
```

# php - PHP、OOP 接口和抽象

> ID：10720258
> 
> 赞同：2
> 
> 时间：2012-05-23T12:49:11.273
> 
> 标签：php, oop, interface, abstract

> **可能重复：**
> [接口和抽象类有什么区别？](https://stackoverflow.com/questions/1913098/what-is-the-difference-between-an-interface-and-abstract-class)

我阅读了关于接口和抽象之间区别的指南，但我不明白该指南说：为什么在我们可以使用抽象方法时使用完全接口，答案是接口的使用不需要我们从某个抽象类继承，因此，两个不继承自同一个类的类可以包含相似的接口，实际上使用接口允许我们不使用冗余方法膨胀父类。我真的很想理解它，但它没有注册，如果有人可以在这里帮助我，我将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T12:56:17.543

关于何时使用接口和抽象类的一些建议（礼貌：MSDN）

1) 如果您预期创建组件的多个版本，请创建一个抽象类。抽象类提供了一种简单易行的方式来对组件进行版本控制。通过更新基类，所有继承类都会随着更改而自动更新。另一方面，接口一旦创建就不能更改。如果需要新版本的接口，则必须创建一个全新的接口。

2）如果您正在创建的功能将在广泛的不同对象中有用，请使用接口。抽象类应该主要用于密切相关的对象，而接口最适合为不相关的类提供通用功能。

3）如果您正在设计小而简洁的功能，请使用接口。如果您正在设计大型功能单元，请使用抽象类。

4) 如果您想在组件的所有实现中提供通用的、已实现的功能，请使用抽象类。抽象类允许您部分实现您的类，而接口不包含任何成员的实现。

[http://msdn.microsoft.com/en-us/library/scsyfw1d%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/scsyfw1d%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T12:57:46.050

接口允许您在多个不相关的类层次结构中基于相似的方法集合具有多态性。这意味着您可以编写一个方法来使用一系列不一定相互关联的类中的任何一个。您还可以通过将多个接口应用于一个类来混合和匹配，因此该类可以用于许多事情。

相比之下，抽象方法只允许您互换使用父类的直接后代，这可能会受到限制，因为您不能拥有多个行为集合（因为类只能有一个父类）。

# css - 使用 css 水平展开 div

> ID：10720260
> 
> 赞同：1
> 
> 时间：2012-05-23T12:49:15.193
> 
> 标签：css, html, autoresize

我希望在动态调整视频大小后水平扩展 div，类似于 YouTube 调整大小的方式。

我在视频上重新调整了图像的大小，它们工作正常，用户可以按 + 或 - 箭头很好，视频会调整大小，但右侧的框不会低于它并展开 100% 的 1024px 容器（最大视频调整大小）。此外，当视频缩小时，框不会向左扩展。

谁可以帮我这个事？

请以我的 jsFiddle 为例[http://jsfiddle.net/headex/Xw8EV/](http://jsfiddle.net/headex/Xw8EV/)（*注意*：*调整大小按钮的图像不在小提琴中，您只需要想象它们就在那里*）

任何帮助深表感谢。

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T14:41:40.960

尝试`diplay: inline-block`用于容器元素。在这种情况下，您不必为它定义宽度，它将具有内部元素的大小。

# java - 从 sql 代码自动生成 java hibernate 代码

> ID：10720261
> 
> 赞同：1
> 
> 时间：2012-05-23T12:49:19.217
> 
> 标签：java, sql, hibernate, reverse-engineering

是否有能够从 sql 查询开始生成 java hibernate 代码的工具？（就像休眠的相反，从java代码生成选择）它将帮助我将所有查询移动到休眠！

我的意思是，如果我有一个带有如下参数的选择：

```
 select ta.id label, ta.nume value
    from ar 
    left outer join ta ta on idp = ta.ID
    where ta.status = 1
    and (dp = 0 OR ps = idps_)
    and status = 1
order by ta.nume; 
```

最终获得这样的东西：

```
 DetachedCriteria criteria = DetachedCriteria.forEntityName("ar");
    criteria.createAlias("ta", "ta", Criteria.LEFT_JOIN);
    criteria.add(Restrictions.eq("ta.status", 1));
    Criterion eq = Restrictions.eq("ps.id", idps_);
    Criterion isZero = Restrictions.eq("dp.id", 0);
    Criterion or = Restrictions.or(eq, isZero);
    criteria.add(or);
    criteria.add(Restrictions.eq("status", 1));
    ProjectionList projectionList = Projections.projectionList();
    projectionList.add(Projections.property("ta.id"), "value");
    projectionList.add(Projections.property("ta.nume"), "label");
    criteria.setProjection(Projections.distinct(projectionList));
    criteria.setResultTransformer(Transformers.ALIAS_TO_ENTITY_MAP);
    criteria.addOrder(Order.asc("ta.nume")); 
```

或者使用地图作为输出的类似东西......

向工具提供我存储实体/bean与表的映射的路径（或bean的路径，如果bean被注释）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:16:39.293

您拥有 HQL，它是一种与 Hibernate 一起使用的类似 SQL 的方言。您使用实体中的字段名称而不是表中的字段名称。它支持连接等。

事实上，Criteria API 对连接的支持非常有限（至少上次我尝试使用过），而且我已经完成了几次从 Criteria API 到 HQL 的所有内容的重写，所以我现在只需将 Criteria API 当作没有选择。

在 HQL 中，您还可以在 SELECT 和 WHERE 部分中使用 SQL 函数，这些函数是嵌入的和您自己编写的。

# xpages - 注销控制不起作用

> ID：10720262
> 
> 赞同：4
> 
> 时间：2012-05-23T12:49:23.633
> 
> 标签：xpages, xpages-ssjs

我的应用程序的主布局中有登录/注销链接，采用 David Leedy 在此视频中描述的方式：http: [//notesin9.com/index.php/2012/03/09/notesin9-049-xpages-login -然后注销/](http://notesin9.com/index.php/2012/03/09/notesin9-049-xpages-login-and-logout/)

一切正常，除了注销链接。链接的代码是：

`facesContext.getExternalContext().getRequest().getContextPath() + "?Logout&redirectTo=" + facesContext.getExternalContext().getRequest().getContextPath()`

单击它时，我会退出并返回主页，这很好。但是，如果我刷新或单击另一个页面，我会立即重新登录，而不会提示密码。这是因为服务器上保存了一个未被清除的会话吗？如何更改此设置，以便在注销后，有人必须再次完成完整的登录过程才能登录？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T13:32:08.647

这取决于您的服务器是否设置为使用基本身份验证或基于会话的身份验证。基本身份验证没有注销机制，关闭浏览器时您将注销。

上面的代码仅适用于通过 domino admin 在您的 domino 服务器上配置的基于会话的代码。

这里有一些说明： [http ://www-12.lotus.com/ldd/doc/domino_notes/7.0/help7_admin.nsf/b3266a3c17f9bb7085256b870069c0a9/1e4058257e426e5e8525706f0065d97a?OpenDocument](http://www-12.lotus.com/ldd/doc/domino_notes/7.0/help7_admin.nsf/b3266a3c17f9bb7085256b870069c0a9/1e4058257e426e5e8525706f0065d97a?OpenDocument)

# eclipse - 无法在 http://beust.com/eclipse 读取存储库

> ID：10720263
> 
> 赞同：8
> 
> 时间：2012-05-23T12:49:23.557
> 
> 标签：eclipse, testng, testng-eclipse

Eclipse for Testers 版本：Indigo Release Build id：20110615-0604

我尝试安装 TestNG 但出现以下错误。

“无法读取位于[http://beust.com/eclipse](http://beust.com/eclipse)的存储库。http : [//beust.com/eclipse](http://beust.com/eclipse)不是有效的存储库位置。”

好心解决问题

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2018-01-14T14:39:46.983

这是因为[http://beust.com/eclipse](http://beust.com/eclipse)正在重定向到[http://dl.bintray.com/testng-team/](http://dl.bintray.com/testng-team/)并且 Eclipse 软件似乎没有按预期处理此 URL 重定向。

如果您将 URL 添加为[http://dl.bintray.com/testng-team/testng-eclipse-release/](http://dl.bintray.com/testng-team/testng-eclipse-release/)那么这将正常工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-08-25T21:32:20.303

我在末尾添加了一个“ [/”：http://beust.com/eclipse/](http://beust.com/eclipse/)，然后就可以了。如果您使用 RAD 8+，请从 Windows -> Preferences -> General -> Network Connections 导航，确保此处设置正确，对我来说，我必须将设置从 Native 更改为 Direct。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-08-08T08:44:00.653

从您公司的 Intranet 网络断开连接并连接到您的网络（如移动热点或家庭 wifi）。那就试试安装吧。为我工作。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-11-13T07:47:40.250

You can try below link
[https://www.techbeamers.com/install-testng-in-eclipse-ide/](https://www.techbeamers.com/install-testng-in-eclipse-ide/)

The URL for downloading the Zip file is for version 6.11 in the above link. If you need a higher version try [http://dl.bintray.com/testng-team/testng-eclipse-release/zipped/](http://dl.bintray.com/testng-team/testng-eclipse-release/zipped/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-07-11T11:23:38.573

It doesn't work for Eclipse Neon at all. You can try to download the [zipped](http://dl.bintray.com/testng-team/testng-eclipse-release/zipped/) archive file and add the 'update site' as an archive file from the file system.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-12-02T07:08:57.533

我正在使用“ [http://beust.com/eclipse/](http://beust.com/eclipse/) ”但无法下载 TestNG jar，它没有显示任何内容。

如果您将使用此 URL“ [http://dl.bintray.com/testng-team/testng-eclipse-release/](http://dl.bintray.com/testng-team/testng-eclipse-release/) ”，那么您将能够下载，它对我有用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-01-17T09:11:09.177

**> 通过离线 Jar 文件在 Eclipse IDE 中安装 TestNG**

1.  [从链接TestNg Jars](https://dl.bintray.com/testng-team/testng-eclipse-release/zipped/6.11.0.201703011520/site_assembly.zip)下载最新的 TestNG Jar 文件
2.  转到 eclipse 安装目录并在那里查找“<em>dropins”文件夹。
3.  *在dropins*文件夹中创建一个文件夹并将其命名为“testng-eclipse-6.11”</li>
4.  解压“site_assembly.zip”文件并将其内容复制到新创建的“testng-eclipse-6.11”目录中。
5.  重启 Eclipse

资料来源：[techbeamers](https://www.techbeamers.com/install-testng-in-eclipse-ide/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-23T17:56:10.833

当您尝试添加软件站点时，请确保在“使用”字段中的条目之前或之后没有空格字符。

除此之外，该软件站点是完全有效的。也许在您尝试它时服务器刚刚关闭。您还可以检查以确认您端没有代理或防火墙过滤。尝试 ping 该站点或以其他方式访问它。如果 Eclipse 不能与该站点对话，它就无法知道它是否有效。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-04-21T12:19:48.353

请尝试以下步骤：- 在 CMD 中 Ping URL 以检查是否有任何数据包丢失。所以你会清楚你的网络是否有问题，尝试不同的网络。很多时候，您的防病毒软件或防火墙会阻止传入网络，因此请暂时禁用它们并尝试。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-05-23T14:14:48.773

我尝试了网络连接-> 将本机更改为手动-> 选定的袜子并单击清除，然后我尝试从安装新软件安装 TestNG 插件并添加 URL。安装 Eclipse 时要求登录，但我每次都单击确定并完成安装。

我尝试了许多步骤来编辑 eclipse.ini 文件等并将本机更改为直接。这些步骤都不适合我

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-02-12T04:44:24.047

上面的链接不起作用，这意味着您需要更高版本的 TestNG 才能使用 Eclipse。在此之前检查 TestNG 是否安装，以便知道在向导中按 CTRL+N 可以看到 TestNG 类文件名。

如果未显示，请尝试通过离线 Jar 文件在 Eclipse IDE 中安装 TestNG：

1）从链接TestNg Jars（“ [https://github.com/cbeust/testng-eclipse](https://github.com/cbeust/testng-eclipse) ”）下载最新的TestNG Jar文件 2）下载TestNG 6.11，点击链接将下载“site_assembly.zip”文件TestNG 6.11 版。该文件包含名为“features”和“plugins”的两个文件夹。转到eclipse安装目录并在那里查找“dropins”文件夹。3) 在 dropins 文件夹中创建一个文件夹，命名为“testng-eclipse-6.11” 4) 解压“site_assembly.zip”文件并将其内容复制到新创建的“testng-eclipse-6.11”目录中。5)重启Eclipse

或者

去点击帮助>安装新软件>在可用软件>使用文本框粘贴这个“2019-06 - [http://download.eclipse.org/releases/2019-06](http://download.eclipse.org/releases/2019-06) ”，然后点击添加。您现在将看到像 TestNG 这样的文件以及许多其他文件。选择 TestNG 点击 Next> Next> Accept the condtions> Finish。它将重新启动日食。为了知道安装是否成功按CTRL+N。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-05-23T14:05:26.140

1.  确保您已连接到 Internet
2.  键入确切的 URL - [http://beust.com/eclipse/](http://beust.com/eclipse/)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-12-03T05:09:00.383

只需从以下 URL 安装 TestNG，在最新的 Eclipse 版本中不会出现此类问题：

[http://dl.bintray.com/testng-team/testng-eclipse-release/](http://dl.bintray.com/testng-team/testng-eclipse-release/)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-09-30T10:48:17.143

要解决这个问题。

转到 Eclipse 安装文件夹编辑 eclipse.ini 文件并在该文件末尾插入 -Djava.net.preferIPv4Stack=true。重启日食。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-06-09T07:15:42.723

给定的链接是[https://beust.com/eclipse](https://beust.com/eclipse) 从 https 中删除“s”并尝试链接[http://beust.com/eclipse](http://beust.com/eclipse)

# android - 暂停翻译动画 Android ObjectAnimator

> ID：10720264
> 
> 赞同：2
> 
> 时间：2012-05-23T12:49:26.263
> 
> 标签：android, animation

我正在使用 ObjectAnimator 在类似于股票行情的文本视图中翻译文本。我想在按下按钮时暂停自动收报机。然而，尽管在动画对象上调用了 cancel()/end()，ticker 会继续移动直到动画结束。

还尝试在 AnimatorListerner#onAnimCancel() 中显式清除底层 textView 上的所有动画。然而，底层的 textView 似乎没有与任何动画相关联。

如果有人能指出会出现什么问题，那就太好了。

相关代码部分如下。

```
anim = ObjectAnimator.ofFloat(mTextViewTicker, "TranslationX", 0, -mSomeValue);
anim.addListener(new AnimatorListenerAdapter() {
        @Override
        public void onAnimationCancel(Animator animation) {
            Log.d(TAG,"Animation Pause invoked");
            super.onAnimationCancel(animation);
        }

        public void onAnimationEnd(Animator animation) {
            Log.d(TAG,"Animation Ended");
            ((View)((ObjectAnimator)animation).getTarget()).setTranslationX(anim.getAnimatedFraction());
        }
    });
anim.start();

public void stopScroll() {
   anim.cancel();
} 
```

stopScroll() 从活动中的按钮单击调用。

# javascript - jquery自动完成选择混乱数据

> ID：10720267
> 
> 赞同：1
> 
> 时间：2012-05-23T12:49:31.087
> 
> 标签：javascript, jquery, jquery-ui-autocomplete

我无法弄清楚为什么在 jquery 自动完成上，选择函数会弄乱数据。我的意思是`value`=`label`当它不应该的时候。

控制台日志输出`console.log(val);`

```
Object { value="1558825", label="Cree sus propias noticias cliente", icon="http://servidor...News/10_ae4e0.jpg"} 
```

控制台日志输出`console.log(ui.item);`

```
Object { label="Cree sus propias noticias cliente", value="Cree sus propias noticias cliente"} 
```

代码：

```
$("#search_input").autocomplete({

  source: function(req, add) {

    $.getJSON("do.php", { OP: "news_search", category: cat_id, get: req }, function(results){

      var suggestions = [];

      $.each(results, function(i, val){
        console.log(val);
        suggestions.push(val.label)
      });

      add(suggestions);

    });
  },
  select: function(event, ui){
    console.log(ui.item); // Here value and label is the same, when it shouldn't
    $("#search_input").val(ui.item.label).attr('data-target', ui.item.value);
    return false;
  },
  minLength: 2
}); 
```

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:58:44.497

代码 `suggestions.push(val.label)`只推送标签。`ui`所以除了对象中的标签之外，你什么也得不到

尝试推送 val 对象`suggestions.push(val)`

# iphone - defaultPieSliceColorForINdex：索引未返回正确的颜色值：coreplot

> ID：10720269
> 
> 赞同：0
> 
> 时间：2012-05-23T12:49:35.080
> 
> 标签：iphone, core-plot, pie-chart

我正在尝试使用下面的委托方法来绘制数据标签

```
-(CPTLayer *) dataLabelForPlot:(CPTPlot *)plot recordIndex:(NSUInteger)index
{  
    CPTTextLayer *label = [[CPTTextLayer alloc] initWithText:
        [NSString stringWithFormat:@"%u", index]];  
    CPTMutableTextStyle *textStyle = [label.textStyle mutableCopy];  
    textStyle.color = [CPTPieChart defaultPieSliceColorForIndex:index];  
    label.textStyle=textStyle;  
    return label;  
} 
```

我得到的输出是这样的：
![看图片](../Images/5f8feb3e40d117af545edff0479cebb3.png)

所以你可以看到差异：

*   切片 0 数据标签为红色，但应为黄色。
*   切片 3 数据标签为黄色，但应为洋红色。

我可以通过 实现这一点`switch(index)`，但为什么它不能以这种方式工作？
有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T22:55:34.920

标签是正确的颜色 - 与默认颜色不匹配的是饼图。其他数据源方法返回什么值？

默认颜色为：

```
索引 RGB 颜色
------------------------------------------
  0 (1.0, 0.0, 0.0) 红色
  1 (0.0, 1.0, 0.0) 绿色
  2 (0.0, 0.0, 1.0) 蓝色
  3 (1.0, 1.0, 0.0) 黄色
  4 (0.25, 0.5, 0.25) 深绿色
  5 (1.0, 0.0, 1.0) 洋红色
  6 (0.5, 0.5, 0.5) 灰色
  7 (0.25, 0.5, 0.0) 中绿色
  8 (0.25, 0.25, 0.25) 深灰色
  9 (0.0, 1.0, 1.0) 青色

```

# javascript - 为什么这个 json 在 IE 控制台和 Visual Studio 屏幕解析器中抛出错误？

> ID：10720273
> 
> 赞同：1
> 
> 时间：2012-05-23T12:49:53.283
> 
> 标签：javascript, json, visual-studio-2010

我一直在寻找和寻找我似乎无法弄清楚为什么......

```
{
    "Head": 
    [{
        "ID": "1",
        "Name": "Pete"
    }]
}; 
```

在 IE 控制台和 Visual Studio 屏幕解析器中引发错误并出现错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T12:52:56.153

JSON 中没有分号。你描述的是数据，而不是陈述。

```
{
    "Head": 
    [{
        "ID": "1",
        "Name": "Pete"
    }]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T12:52:53.867

如果这是一个 JSON 字符串，那么它`;`会导致错误 - 将其删除。JSON没有`;`

如果这是一个 JS 对象，则必须将其分配给某处的变量。

# android - 在 Eclipse 中包含 Android-DirectionalViewPager .jar 时出错

> ID：10720276
> 
> 赞同：7
> 
> 时间：2012-05-23T12:49:56.423
> 
> 标签：android, eclipse, android-viewpager

我正在尝试在我的应用程序中实现垂直滑动。（就像使用[ViewPager](http://android-developers.blogspot.de/2011/08/horizontal-view-swiping-with-viewpager.html)滑动一样，但垂直滑动）。

我找到了 Jake Whartons 图书馆[Android-DirectionalViewPager](https://github.com/JakeWharton/Android-DirectionalViewPager)。它是一个独立的 .jar 文件，除了兼容性库之外，还应包括在内。我将文件包含在我的项目中。它现在位于“引用库”下，就像兼容性库一样。
但问题是，我什至无法让图书馆提供的示例正常工作。调试器停在行

```
setContentView(R.layout.main); 
```

'找不到来源'

LogCat 抛出此错误：“05-23 14:43:13.583: E/dalvikvm(329): 找不到类 'com.directionalviewpager.DirectionalViewPager'，引用自方法 own.vvp.MainActivity.onCreate ”

有人已经使用过这个库了吗？我需要一些帮助 ：）

这是我的代码：

清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="own.vvp"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="7" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

布局：

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<com.directionalviewpager.DirectionalViewPager
    android:id="@+id/pager"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:padding="2dp"
    android:orientation="horizontal">

    <Button
        android:id="@+id/horizontal"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="wrap_content"
        android:layout_marginRight="1dp"
        android:text="Horizontal" />
    <Button
        android:id="@+id/vertical"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="wrap_content"
        android:layout_marginLeft="1dp"
        android:text="Vertical" />

</LinearLayout>

</LinearLayout> 
```

和主要活动：

```
package own.vvp;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.view.View;
import android.widget.Button;
import com.directionalviewpager.DirectionalViewPager;

public class MainActivity extends FragmentActivity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    //Set up the pager
    final DirectionalViewPager pager = (DirectionalViewPager)findViewById(R.id.pager);
    pager.setAdapter(new TestFragmentAdapter(getSupportFragmentManager()));

    //Bind to control buttons
    ((Button)findViewById(R.id.horizontal)).setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            pager.setOrientation(DirectionalViewPager.HORIZONTAL);
        }
    });
    ((Button)findViewById(R.id.vertical)).setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            pager.setOrientation(DirectionalViewPager.VERTICAL);
        }
    });
}
} 
```

它与示例中的代码相同，除了包名称和主要活动的名称，所以我想，我包含库的方式一定是错误的。

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-10T22:48:31.573

**更新（2 月 14 日）：**这个库是一个非常好的选择。我目前在我的项目中使用它，它工作得很好。它仍在维护中，它是对来自支持库 r19 的标准 ViewPager 的非常接近的修改。另一个优点是，如果您使用 gradle，您可以通过 maven Central 轻松集成和解决它。

[https://github.com/castorflex/VerticalViewPager](https://github.com/castorflex/VerticalViewPager)

* * *

感谢 Oleg Vaskevich，我能够从当前的 git 文件和 oleg 的添加/修复中编译出一个新的和工作的 directionalViewpager jar 文件。我可以确认它正在使用当前的 support-lib v4 r11。

[https://dl.dropbox.com/u/24363935/android-directionalviewpager-1.2.1fixed.jar](https://dl.dropbox.com/u/24363935/android-directionalviewpager-1.2.1fixed.jar)

希望这对某人有用:)

添加：我在 DirectionalViewPager.setAdapter(PagerAdapter adapter){...}; 中有一个 IllegalArgumentException。所以我已经修改和修复，重新编译并上传了新的jar。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-18T12:35:56.043

由于对 ViewPager 的重大更改，DVP 已被开发人员弃用。但是，这并不意味着它没有用。

尝试直接下载源代码并将两个源文件包含在您的项目中。如果您使用的是最新的支持/兼容性库，则需要`android.database.DataSetObserver`使用`ViewPager.DataSetObserver`. 希望这可以帮助！

修改后的代码应该可以工作：[https ://dl.dropbox.com/u/21007282/Code/DirectionalViewPager-works.zip](https://dl.dropbox.com/u/21007282/Code/DirectionalViewPager-works.zip)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-05T10:58:45.753

在集成已存档的旧 Jake Wharton 项目时，我遇到了许多问题。我来到了这个 github 项目，它与最新的应用程序兼容/支持版本正确集成。希望它可以帮助某人。 [垂直和水平视图寻呼机滑动](https://github.com/251329796s/DirectionalViewPager)

# eclipse - 在 Eclipse 中将 // 注释转换为 Javadoc

> ID：10720279
> 
> 赞同：2
> 
> 时间：2012-05-23T12:50:05.500
> 
> 标签：eclipse, comments, javadoc

我正在 Eclipse 中处理一些 Java 代码，其注释样式如下：

```
//-------------------------------------------------------------
// Useful method
//-------------------------------------------------------------
public void usefulMethod() 
```

我想将注释转换为 Javadoc，例如

```
/**
 * Useful method
 */
public void usefulMethod() 
```

最好的方法是什么？Eclipse 是否有一些自动魔法可以提供帮助？由于我在方法中使用相同的注释样式（并希望保持这种方式），天真的 find-replace 在这里不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:02:14.057

标记整个`//`注释行。然后按 [strg]+[F] 并使用 "replace all" // with * 。它只会在标记的代码序列中完成。然后将第一个 lint 更改为 /** 并将最后一行更改为 */

这只是一种解决方法，但非常容易并且可以保存使用。

# wpf - XAML - WPF 表单关闭时运行代码

> ID：10720280
> 
> 赞同：0
> 
> 时间：2012-05-23T12:50:14.957
> 
> 标签：wpf, xaml

我有一个由 UserControls 而不是 Windows 组成的 WPF 表单。与 Windows 不同，UserControl 没有 a`UserControl.Close`或`UserControl.Closing`. 当我的应用程序关闭时，我需要能够通过单击应用程序右上角熟悉的红色 x 来运行代码。有没有人这样做过？请记住，我正在使用 MVVM。

这是页面的 XAML：

```
<UserControl x:Class="ClassName"
             <!--etc..-->
             >
    <Grid>
        <Grid.ColumnDefinitions>
            <!--Columns-->
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <!--Rows-->
        </Grid.RowDefinitions>
        <!--WPF Content-->
    </Grid>
</UserControl> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:39:51.313

用户控件没有关闭和关闭事件。因此您可以使用 unloaded 但 unloaded 不会自动触发

要处理用户控件，请阅读以下文章。

[http://geekswithblogs.net/cskardon/archive/2008/06/23/dispose-of-a-wpf-usercontrol-ish.aspx](http://geekswithblogs.net/cskardon/archive/2008/06/23/dispose-of-a-wpf-usercontrol-ish.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:59:40.807

你没有窗户吗？这怎么可能？你在屏幕外创建它们吗？

好吧，您显然不能完全使用 XAML，但是如果您想在关闭应用程序之前得到通知，那么[Application.Exit怎么样。](http://msdn.microsoft.com/en-us/library/system.windows.application.exit)如果您想要一个可拦截和可取消的解决方案，您可以使用主窗口上的[Closing](http://msdn.microsoft.com/en-us/library/system.windows.window.closing.aspx)（如果有的话）。当然[Closed](http://msdn.microsoft.com/en-us/library/system.windows.window.closed.aspx)事件也是一个解决方案。最后但并非最不重要的是，您在用户控件上获得了[Unloaded 事件。](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.unloaded.aspx)

希望对您有所帮助。

# c - 编译器如何以及为什么用 null 函数替换 extern 函数？

> ID：10720282
> 
> 赞同：0
> 
> 时间：2012-05-23T12:50:20.623
> 
> 标签：c, linux, macros, usb, extern

考虑 linux/drivers/usb/hid-core.c 中的以下代码：

```
static void hid_process_event (struct hid_device *hid,
                               struct hid_field *field,
                               struct hid_usage *usage,
                               __s32 value)
{
   hid_dump_input(usage, value);
   if (hid->claimed & HID_CLAIMED_INPUT)
         hidinput_hid_event(hid, field, usage, value);
#ifdef CONFIG_USB_HIDDEV
   if (hid->claimed & HID_CLAIMED_HIDDEV)
         hiddev_hid_event(hid, usage->hid, value);
#endif
} 
```

如果未启用特定配置选项，作者不想在这里调用 hiddev_hid_event()。这是因为如果未启用配置选项，该功能甚至不会出现。

要删除此#ifdef，对 include/linux/hiddev.h 进行了以下更改：

```
#ifdef CONFIG_USB_HIDDEV
   extern void hiddev_hid_event (struct hid_device *,
                                 unsigned int usage,
                                 int value);
#else
   static inline void
   hiddev_hid_event (struct hid_device
*hid,
                     unsigned int usage,
                     int value) { }
#endif 
```

然后drivers/usb/hid-core.c改为：

```
static void hid_process_event
                           (struct hid_device *hid,
                            struct hid_field *field,
                            struct hid_usage *usage,
                            __s32 value)
{
   hid_dump_input(usage, value);
   if (hid->claimed & HID_CLAIMED_INPUT)
         hidinput_hid_event(hid, field, usage, value);
   if (hid->claimed & HID_CLAIMED_HIDDEV)
         hiddev_hid_event(hid, usage->hid, value);
} 
```

如果未启用 CONFIG_USB_HIDDEV，编译器会将 hiddev_hid_event() 调用替换为 null 函数调用，然后完全优化 if 语句。

我无法理解的是编译器如何将 hiddev_hid_event() 调用替换为 null 函数。我看到的唯一区别是返回类型`extern void`已替换为`static inline void`. 这是否意味着所有外部函数如果未定义将自动变为空函数？

参考：[http ://www.linuxjournal.com/article/5780?page=0,3](http://www.linuxjournal.com/article/5780?page=0,3)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T12:52:57.390

该函数实际上*已*定义，但有一个空主体：

```
static inline void
hiddev_hid_event (struct hid_device *hid,
                 unsigned int usage,
                 int value) 
{ } 
```

我想用空体优化内联函数是微不足道的。

# windows-phone-7 - 导航时 Windows Phone 7 中的 NullReferenceException

> ID：10720289
> 
> 赞同：1
> 
> 时间：2012-05-23T12:50:38.200
> 
> 标签：windows-phone-7, navigation, pivot

嗨，我也是 Windows phone7 的新手。在这里，我以 root 身份进行了枢轴控制，我正在尝试使用服务 uri 导航到另一个页面。

以下是我用来从枢轴导航到另一个视图的代码段

然后我创建了另一个名为 page1.xaml 的页面

在 mainpage.cs 中，我编写如下代码：

```
PivotItem p = new PivotItem();
            p.Header = "Home";
            p.Content = new page1(); 
            main.Items.Add(p); 
```

所以这里的数据透视应用程序的内容为 page1

我的问题是：如果在 page1 中创建按钮以导航到另一个名为 page2 的页面。

```
NavigationService.Navigate(new Uri("/Page2.xaml",UriKind.Relative)); 
```

但是当我尝试导航应用程序时，应用程序崩溃了，并且我得到了如下错误日志（来自列表框选择的这个错误已更改）

```
 System.NullReferenceException at activity name(Object Sender, SelectionChangedEventArgs e) at 
     System.Windows.Controls.Prmitive.Selector/OnSelctionChanged 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T14:17:35.710

看起来您有一些代码在您离开第一个（枢轴）页面时触发选择更改时正在执行某些操作。

因为它来自`System.Windows.Controls.Prmitive.Selector`我猜想你有一些代码用于关键项目选择更改，这是罪魁祸首。可能当您离开时不再有选择，您认为总会有一个。

作为新手，另请参阅[http://tinyurl.com/so-hints](http://tinyurl.com/so-hints)

# java - 哪个内存用于从 java 运行的外部进程 - java 堆空间或 OS 内存？

> ID：10720290
> 
> 赞同：3
> 
> 时间：2012-05-23T12:50:38.090
> 
> 标签：java, memory, heap-memory

如果我运行以下行

```
final String[] command = new String[]{ffmpeg -y -i /home/user/video.mov -ss 0 -t 20 -vcodec libx264 -vpre slow -crf 18 -f flv -bf 0 -g 10 -vsync 1 -r 30 -an -threads 0 -s 1920x1080 /home/user/video0.flv};

final Process process = Runtime.getRuntime().exec(command, null, null); 
```

它将启动 ffmpeg 并将 video.mov 的前 20 秒转换为 video.flv。但有时对于高分辨率视频，OutOfMemory 会被抛出。显然ffmpeg占用了太多内存。

**我的问题如下 - 外部进程是从 Java 启动的，还是从 Java 堆空间或操作系统内存中获取内存的？**

知道了这一点，我就知​​道如何调整-Xms和-Xmx参数了。如果外部进程从操作系统内存中取出，我将保留 -Xms 和 -Xmx 的低值（让操作系统有更多可用内存）。否则，我会将 -Xms 和 -Xmx 设置为较高的值，从而为 Java 进程提供更多内存。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T12:51:27.810

您正在启动一个单独的操作系统级本机进程——它与 JVM 内存、堆或其他无关。

# asp.net - 在 asp .NET MVC3 中关闭表单缓存

> ID：10720295
> 
> 赞同：1
> 
> 时间：2012-05-23T12:50:59.040
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我正在尝试关闭 MVC3 中的页面缓存。试过：

```
@{
    Response.AddHeader("Cache-Control","no-cache");
    Response.AddHeader("Pragma", "no-cache,no-store,private,must-revalidate,max-stale=0,post-check=0,pre-check=0 "); 
 } 
```

但没有奏效。谢谢。

* * *

刚刚意识到我可能要求的是错误的东西。我想禁用表单历史记录，以便在填充表单字段时不显示选项以前的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T14:24:20.347

使用 ModelState.Clear(); 在您清除模型状态的操作中：

```
public ViewResult YourAction(YourModel model) 
{
    .........
    ModelState.Clear();
    return View(model); 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T14:19:35.303

添加`autocomplete='off'`到您的输入标签：

```
<input type="text" autocomplete="off" ... /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T12:53:00.683

尝试将此添加到控制器内的操作中

```
[OutputCache(NoStore = true, Duration = 0, VaryByParam = "*")]
public ActionResult Test() {
 ...
} 
```

我有类似的问题，应该可以解决问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T14:18:31.767

使用以下 JQuery 作品：

```
$(':text').attr("autocomplete", "off"); 
```

在里面添加`$(document).ready()`

# java - Struts2 - 如何创建一个 对于每一行

> ID：10720303
> 
> 赞同：0
> 
> 时间：2012-05-23T12:51:25.223
> 
> 标签：java, jsp, struts2, displaytag

我试图显示一个显示标签表，我希望将每一行映射到不同的 s:form 上。每行显示我的 ComputerSystem 对象的所有属性，我希望选择一行并作用于相关对象。我尝试将多个 display:column 放在一个表单中，但是当我加载 JSP 时，在生成的源代码中找不到任何表单标记。

*（我必须使用 s:form，因为我的一列包含 as:doubleselect）*

有什么建议吗？

我的代码：

```
<display:table name="${systemList}" uid="row" pagesize="20" sort="list" requestURI="" >

<display:column title="System ID" property="systemID" />

            ... other columns ...

<s:form action="provision.action" method="post" name="provisionForm%{#attr.row.systemID}">

<display:column title="IP" >
    <s:textfield name="systemList[%{#attr.row_rowNum - 1}].ip"  />
</display:column>

<display:column>
    <s:submit type="image" src='image.png' name='submit' />
</display:column>
</s:form>

</display:table> 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:31:16.307

您可以在装饰器内生成代码，获取行对象属性，然后在显示标签内使用装饰器。

# windows-phone-7 - 在应用程序中心提交更新时在哪里写下更新信息？

> ID：10720304
> 
> 赞同：1
> 
> 时间：2012-05-23T12:51:26.363
> 
> 标签：windows-phone-7, app-hub

我只是在 App Hub 中提交了我的应用程序的更新版本。

但是让我很困惑的是，更新的所有步骤都与我提交新应用程序时一样。

所以我只是不知道在哪里写下更新信息。

我检查了 MSDN，但没有找到答案，所以，呃，需要帮助 -_-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:53:34.173

您需要将其添加到您的应用说明中。只是做类似的事情

```
Your original description about the app

=== Updates 23rd May 2012 ===
 - live tile feature added
 - email and sms alerts even when app closed added 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:54:19.793

在说明中。我所做的是添加一个额外的文本：

## 版本 1.x（此版本）

*   添加了这个功能
*   添加了这个功能
*   修改了这个功能

# c# - asp.net mvc3,c#

> ID：10720308
> 
> 赞同：0
> 
> 时间：2012-05-23T12:51:31.117
> 
> 标签：c#, asp.net-mvc-3

我想要分开的朋友 facebook 和 twitter。像这样 ：

**推特** **脸书**

*编辑器模板：* **FriendModel.cshtml**

```
@model App.Web.Models.FriendModel
<div>
<input type="checkbox" name="saveInputs" value="@Model.FriendID"/>
<img alt="" src="@Model.ProfileImageUrl" />
<strong>@Model.Name</strong> Friends: <strong>@Model.FriendsCount</strong>
</div>
<br /> 
```

*浏览量：* **FriendTeam.cshtml**

```
@model App.Web.Models.FriendTeamModel
@{
   ViewBag.Title = "FriendTeam";
}
<h2>
  FriendTeam</h2>

 @using (@Html.BeginForm())
{          @Html.ValidationSummary(true)     
  <h3>Twitter</h3>
  <br />    
   @Html.EditorFor(model =>     model.Friends.Where(x=>x.SocialNetworkName=="Twitter"))                  

 <h3>Facebook</h3>
  <br />    
   @Html.EditorFor(model => model.Friends.Where(x=>x.SocialNetworkName=="Facebook")) 
 }
 <div>
@Html.ActionLink("Back to List", "Index") 
```

**朋友团队型号：**

```
public class FriendTeamModel
{
    public long FriendTeam{ get; set; }
    public IEnumerable<FriendModel> Friends { get; set; }
} 
```

**朋友型号：**

```
public class FriendModel
{
    public string FriendID { get; set; }
    public string SocialNetworkName { get; set; }

    public string Name { get; set; }       
    public int FriendsCount { get; set; }      
    public string ProfileImageUrl { get; set; }
} 
```

***错误 ：***

> 模型只能与房屋所有权的表达式访问字段、一维数组的索引或自定义索引器单个参数一起使用。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:28:50.740

该错误基本上意味着您不能这样做：

```
@Html.EditorFor(model => model.Friends.Where(x=>x.SocialNetworkName=="Twitter")) 
```

如果您想全部显示它们，或者`IEnumerable<FriendModel> Friends`使用返回单个的过滤方法`FriendModel`，例如：

```
@Html.EditorFor(model => model.Friends.SingleOrDefault(x=>x.SocialNetworkName=="Twitter")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T06:18:12.787

您应该更改视图模型以更好地适应您的视图

```
public class FriendTeamModel
{
    public long FriendTeam{ get; set; }
    public IEnumerable<FriendModel> FacebookFriends { get; set; }
    public IEnumerable<FriendModel> TwitterFriends { get; set; }
} 
```

并在控制器中设置这些参数值，而不是在视图中。这样，在视图中，您将拥有

```
@using (@Html.BeginForm())
{          
  @Html.ValidationSummary(true)     
  <h3>Twitter</h3>
  <br />    
   @Html.EditorFor(model => model.TwitterFriends)                  

  <h3>Facebook</h3>
  <br />    
   @Html.EditorFor(model => model.FaceookFriends) 
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T07:25:52.617

我认为您需要以一种形式添加多个项目。这篇文章可能会帮助你：

*   [http://sroucheray.org/blog/jquery-dynamic-form/](http://sroucheray.org/blog/jquery-dynamic-form/)

> jQuery Dynamic Form 是一个 jQuery 插件。它提供了基于 HTML 模板动态添加字段的能力。更新版本 1.0 已发布并已上传到 Google Code。它包括两个期待已久的功能：嵌套字段复制和数据注入。有时间我会更新示例，但是您已经在 zip 中有一个可用的示例包，快去下载吧！ [http://code.google.com/p/jquery-dynamic-form/downloads/list](http://code.google.com/p/jquery-dynamic-form/downloads/list)

# php - Twitter API - 回复转推

> ID：10720314
> 
> 赞同：0
> 
> 时间：2012-05-23T12:51:51.723
> 
> 标签：php, codeigniter, twitter, codeigniter-2

我正在编写一个小推特 API（使用[Elliot Haughin 的库](https://github.com/elliothaughin/codeigniter-twitter)），我想回复应用发布的转推。

我已经阅读了有关states [/update](https://dev.twitter.com/docs/api/1/post/statuses/update)的文档，并尝试将 '*in_reply_to_status_id*' 与从 '*user_mentions*' 中获取的值一起使用，但它似乎不起作用。

我做错了什么，或者有更好的方法吗？

代码示例；

```
$answer = '@'.$retweet->entities->user_mentions[0]->screen_name.' thanks!!';
$this->tweet->call('post', 'statuses/update', array('status' => $answer, 'in_reply_to_status_id' => $retweet->id)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:54:30.677

您应该包括转发帖子的用户的姓名，而不是帖子中提到的用户名。

```
$answer = '@'.$retweet->user->screen_name.' thanks!!'; 
```

当然，为此，您应该使用以下方式请求推文`include_entities => 1`

# google-app-engine - 谷歌应用引擎 blobstore 和地理复制

> ID：10720323
> 
> 赞同：1
> 
> 时间：2012-05-23T12:52:29.570
> 
> 标签：google-app-engine, replication, blobstore, geo

我想知道存储在应用引擎 blobstore 中的数据的安全性和可用性（单个数据中心中断）。例如，HR 数据存储使用 paxos 在不同的数据中心之间分发数据 ( [https://developers.google.com/appengine/docs/python/datastore/overview](https://developers.google.com/appengine/docs/python/datastore/overview) )，而 Google Cloud Storage 也在地理上分发数据 ( [https://developers. google.com/storage/docs/faq](https://developers.google.com/storage/docs/faq)）。那么blobstore呢？我的所有数据是否都存储在单个数据中心中，还是内置了一些 HA 功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T13:57:19.530

存储在 blobstore 中的 Blob 被复制到多个数据中心。

# r - 我的 r 程序用于计算文件中丢失的数据

> ID：10720324
> 
> 赞同：0
> 
> 时间：2012-05-23T12:52:30.480
> 
> 标签：r

我已经创建了我的程序来计算一个超过 10,000 行的文件中的缺失数据（我有 1700 个这样的文件）。最后，警告消息说：“if ((b[i, 5] == NA) && (b[i, 1] > 1980)) 中的错误：需要 TRUE/FALSE 的缺失值”

代码如下：

```
rm(list=ls())
setwd("C:\\Users\\.......")
a <- list.files();
n=0;
j=1;
mat <- matrix(data=NA,nrow=20000,ncol=8);
colnames(mat)<-c("Station","S.Year","S.Month","S.Day","E.Year","E.Month","E.Day","Count");
d<-matrix(data=NA,nrow=3,ncol=1);
for( k in 1:length(a) )
{
    b <- as.matrix(read.table(a[k],skip=7,header=F));
    t<-gsub(".txt","",a[k])

    for(i in 1:(length(b[,1])-1))

        {                     
        if((b[i,5]==NA)&&(b[i,1]>1980))
             {n=n+1;

            if(n==1)
            {d[1,1]=b[i,1]
            d[2,1]=b[i,2]
            d[3,1]=b[i,3]}

        if((b[i+1,5]!=NA)||(i==(length(b[,1])-1)))
            { if(n>10)
             {mat[j,1]=t;
              mat[j,2]=d[1,1]
              mat[j,3]=d[2,1]
              mat[j,4]=d[3,1]
              mat[j,5]=b[i,1]
              mat[j,6]=b[i,2]
              mat[j,7]=b[i,3]
              mat[j,8]=n;
              j=j+1;} 
            n=0;}                 

               }
          }
j=j+1;  
    }
write.csv(mat,"Count.csv", append = TRUE,row.names = FALSE) 
```

任何帮助为什么该错误消息？也许我忽略了什么？

数据来自气象站，因此将具有以下结构：

YY MM DD Srad Tmax Tmin (雨) 1980 1 1 3 2 -3

一直持续到 2011 年 12 月 31 日

预期的输出应该是一个 csv 文件，第一个 Col 是文件名（每一行都是一个文件），第二个 Col 是遇到第一个 NA 时的年份，第三个 Col 是月份，第四个 Col 是遇到第一个 NA 时的日期找到 NA，第五、第六和第七列是结束年份，Mm 和 Dd，当 NA 是最后一个时。最后一列是该时间范围内的 NA 总数因此对于一个文件（例如 File1.txt），从 1981-1-13 到 1981-2-1 可能有 3 天的数据丢失，我将在最后一列此期间的 NA 数量。对于同一个文件，稍后（例如 1997 年）我可能会有另一个 NA 时期，因此在第三行我将再次有文件名、开始和结束时间框架的时期以及 NA 的数量。我希望这不会太混乱......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T13:15:14.027

对 NA 来说，什么都不是“==”或“！=”。使用`is.na()`或`!is.na()`代替。所以逻辑测试将是：

```
if ( is.na( b[i,5]) && ( b[i,1]>1980 ) )

if( !is.na(b[i+1,5]) || (i==(length(b[,1])-1))) 
```

# java - Selenium WebDriver：等待带有 JavaScript 的复杂页面加载

> ID：10720325
> 
> 赞同：112
> 
> 时间：2012-05-23T12:52:33.583
> 
> 标签：java, c#, selenium, selenium-webdriver, webdriver

我有一个使用 Selenium 测试的 Web 应用程序。页面加载时有很多 JavaScript 运行。
这段 JavaScript 代码写得不太好，但我无法更改任何内容。因此，等待元素出现在 DOM 中的`findElement()`方法不是一种选择。
我想在 Java 中创建一个通用函数来等待页面加载，一个可能的解决方案是：

*   从 WebDriver 运行 JavaScript 脚本并将结果存储`document.body.innerHTML`在字符串变量`body`中。
*   将`body`变量与以前版本的`body`. 如果它们相同，则设置递增计数器，`notChangedCount`否则设置`notChangedCount`为零。
*   等待一小段时间（例如 50 毫秒）。
*   如果页面在一段时间内（例如 500 毫秒）没有改变，`notChangedCount >= 10`那么退出循环，否则循环到第一步。

你认为这是一个有效的解决方案吗？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-05-23T19:12:22.553

如果有人真的知道一个通​​用且始终适用的答案，那么它会在很久以前就已经在*任何地方*实施，并且会让我们的生活变得更加轻松。

你可以做很多事情，但每一件事都有一个问题：

1.  正如 Ashwin Prabhu 所说，如果您对脚本非常了解，您可以观察它的行为并跟踪它的一些变量`window`等等`document`。但是，此解决方案并不适合所有人，并且只能由您使用，并且只能在有限的一组页。

2.  通过观察 HTML 代码以及它是否有一段时间被更改，您的解决方案还不错（还有[一种方法](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.html#getPageSource%28%29)可以直接通过 获取原始和未编辑的 HTML `WebDriver`），但是：

    *   实际断言页面需要很长时间，并且可能会显着延长测试时间。
    *   你永远不知道什么是正确的间隔。该脚本*可能*正在下载需要超过 500 毫秒的大文件。我们公司的内部页面上有几个脚本在IE中需要几秒钟。您的计算机可能会暂时缺乏资源 - 假设防病毒软件将使您的 CPU 充分工作，那么即使对于不复杂的脚本来说，500 毫秒也可能太短了。
    *   有些脚本永远不会完成。它们会延迟调用自己 ( `setTimeout()`) 并一次又一次地工作，并且每次运行时都可能更改 HTML。说真的，每个“Web 2.0”页面都会这样做。甚至堆栈溢出。您可以覆盖最常用的方法，并将使用它们的脚本视为已完成，但是……您不能确定。
    *   如果脚本除了更改 HTML 之外还做了其他事情怎么办？它可以做成千上万的事情，而不仅仅是一些`innerHTML`乐趣。
3.  有一些工具可以帮助您解决这个问题。即[进度侦听器](https://developer.mozilla.org/en/Code_snippets/Progress_Listeners)以及[nsIWebProgressListener](https://developer.mozilla.org/en/nsIWebProgressListener)和其他一些。然而，浏览器对此的支持是可怕的。Firefox 从 FF4 开始尝试支持它（仍在发展中），IE 在 IE9 中有基本支持。

我想我很快就会想出另一个有缺陷的解决方案。事实是——因为永远的脚本在做他们的工作，什么时候说“现在页面已经完成”没有明确的答案。选择最适合您的，但要注意它的缺点。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-10-17T17:25:01.713

谢谢阿什温！

在我的情况下，我需要等待某个元素中的 jquery 插件执行。特别是“qtip”

根据您的提示，它对我来说非常有效：

```
wait.until( new Predicate<WebDriver>() {
            public boolean apply(WebDriver driver) {
                return ((JavascriptExecutor)driver).executeScript("return document.readyState").equals("complete");
            }
        }
    ); 
```

*注意：我正在使用 Webdriver 2*

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2015-05-05T16:59:14.440

您需要等待 Javascript 和 jQuery 完成加载。执行 Javascript 检查 if `jQuery.active`is`0`和`document.readyState`is `complete`，表示 JS 和 jQuery 加载完成。

```
public boolean waitForJStoLoad() {

    WebDriverWait wait = new WebDriverWait(driver, 30);

    // wait for jQuery to load
    ExpectedCondition<Boolean> jQueryLoad = new ExpectedCondition<Boolean>() {
      @Override
      public Boolean apply(WebDriver driver) {
        try {
          return ((Long)executeJavaScript("return jQuery.active") == 0);
        }
        catch (Exception e) {
          return true;
        }
      }
    };

    // wait for Javascript to load
    ExpectedCondition<Boolean> jsLoad = new ExpectedCondition<Boolean>() {
      @Override
      public Boolean apply(WebDriver driver) {
        return executeJavaScript("return document.readyState")
            .toString().equals("complete");
      }
    };

  return wait.until(jQueryLoad) && wait.until(jsLoad);
} 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2017-05-04T23:01:45.583

如果您需要做的只是等待页面上的 html 在尝试与元素交互之前变得稳定，您可以定期轮询 DOM 并比较结果，如果在给定的轮询时间内 DOM 相同，您就是金的。像这样的东西，你在比较之前传递了最大等待时间和页面轮询之间的时间。简单有效。

```
public void waitForJavascript(int maxWaitMillis, int pollDelimiter) {
    double startTime = System.currentTimeMillis();
    while (System.currentTimeMillis() < startTime + maxWaitMillis) {
        String prevState = webDriver.getPageSource();
        Thread.sleep(pollDelimiter); // <-- would need to wrap in a try catch
        if (prevState.equals(webDriver.getPageSource())) {
            return;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-05-23T15:51:41.330

JS 库是否定义/初始化窗口上的任何众所周知的变量？

如果是这样，您可以等待变量出现。您可以使用

[`((JavascriptExecutor)driver).executeScript(String script, Object... args)`](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/JavascriptExecutor.html#executeScript%28java.lang.String,%20java.lang.Object...%29)

测试这种情况（类似于`window.SomeClass && window.SomeClass.variable != null`：）并返回一个布尔值`true`/ `false`。

将其包装在一个 中[`WebDriverWait`](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/WebDriverWait.html)，然后等待脚本返回`true`。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2016-12-19T12:23:17.587

我有同样的问题。此解决方案适用于 WebDriverDoku：

```
WebDriverWait wait = new WebDriverWait(driver, 10);
WebElement element = wait.until(ExpectedConditions.elementToBeClickable(By.id("someid"))); 
```

[http://www.seleniumhq.org/docs/04_webdriver_advanced.jsp](http://www.seleniumhq.org/docs/04_webdriver_advanced.jsp)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-07-27T02:32:09.193

下面的代码在我的情况下完美运行 - 我的页面包含复杂的 java 脚本

```
public void checkPageIsReady() {

  JavascriptExecutor js = (JavascriptExecutor)driver;

  //Initially bellow given if condition will check ready state of page.
  if (js.executeScript("return document.readyState").toString().equals("complete")){ 
   System.out.println("Page Is loaded.");
   return; 
  } 

  //This loop will rotate for 25 times to check If page Is ready after every 1 second.
  //You can replace your value with 25 If you wants to Increase or decrease wait time.
  for (int i=0; i<25; i++){ 
   try {
    Thread.sleep(1000);
    }catch (InterruptedException e) {} 
   //To check page ready state.
   if (js.executeScript("return document.readyState").toString().equals("complete")){ 
    break; 
   }   
  }
 } 
```

源代码 -[如何在 Selenium WebDriver 中等待页面加载/准备就绪](http://www.software-testing-tutorials-automation.com/2015/02/how-to-wait-for-page-to-loadready-in.html)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-11-15T14:24:53.480

在找到页面上的任何元素之前，可以使用两个条件来检查页面是否已加载：

```
WebDriverWait wait = new WebDriverWait(driver, 50); 
```

使用下面的 readyState 将等到页面加载

```
wait.until((ExpectedCondition<Boolean>) wd ->
   ((JavascriptExecutor) wd).executeScript("return document.readyState").equals("complete")); 
```

下面的 JQuery 将等到数据尚未加载

```
 int count =0;
            if((Boolean) executor.executeScript("return window.jQuery != undefined")){
                while(!(Boolean) executor.executeScript("return jQuery.active == 0")){
                    Thread.sleep(4000);
                    if(count>4)
                        break;
                    count++;
                }
            } 
```

在这些 JavaScriptCode 之后尝试 findOut webElement。

```
WebElement we = wait.until(ExpectedConditions.presenceOfElementLocated(by)); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-05-03T19:57:44.520

我要求我的开发人员创建一个我可以访问的 JavaScript 变量“isProcessing”（在“ae”对象中），他们在事情开始运行时设置并在事情完成时清除。然后我在一个累加器中运行它，该累加器每 100 毫秒检查一次，直到它连续五个，总共 500 毫秒，没有任何变化。如果 30 秒过去了，我会抛出一个异常，因为那时应该已经发生了一些事情。这是在 C# 中。

```
public static void WaitForDocumentReady(this IWebDriver driver)
{
    Console.WriteLine("Waiting for five instances of document.readyState returning 'complete' at 100ms intervals.");
    IJavaScriptExecutor jse = (IJavaScriptExecutor)driver;
    int i = 0; // Count of (document.readyState === complete) && (ae.isProcessing === false)
    int j = 0; // Count of iterations in the while() loop.
    int k = 0; // Count of times i was reset to 0.
    bool readyState = false;
    while (i < 5)
    {
        System.Threading.Thread.Sleep(100);
        readyState = (bool)jse.ExecuteScript("return ((document.readyState === 'complete') && (ae.isProcessing === false))");
        if (readyState) { i++; }
        else
        {
            i = 0;
            k++;
        }
        j++;
        if (j > 300) { throw new TimeoutException("Timeout waiting for document.readyState to be complete."); }
    }
    j *= 100;
    Console.WriteLine("Waited " + j.ToString() + " milliseconds. There were " + k + " resets.");
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-04-06T19:22:20.237

要正确执行此操作，您需要处理异常。

这是我等待 iFrame 的方法。这要求您的 JUnit 测试类将 RemoteWebDriver 的实例传递给页面对象：

```
public class IFrame1 extends LoadableComponent<IFrame1> {

    private RemoteWebDriver driver;

    @FindBy(id = "iFrame1TextFieldTestInputControlID" )
    public WebElement iFrame1TextFieldInput;

    @FindBy(id = "iFrame1TextFieldTestProcessButtonID" )
    public WebElement copyButton;

    public IFrame1( RemoteWebDriver drv ) {
        super();
        this.driver = drv;
        this.driver.switchTo().defaultContent();
        waitTimer(1, 1000);
        this.driver.switchTo().frame("BodyFrame1");
        LOGGER.info("IFrame1 constructor...");
    }

    @Override
    protected void isLoaded() throws Error {        
        LOGGER.info("IFrame1.isLoaded()...");
        PageFactory.initElements( driver, this );
        try {
            assertTrue( "Page visible title is not yet available.", driver
     .findElementByCssSelector("body form#webDriverUnitiFrame1TestFormID h1")
                    .getText().equals("iFrame1 Test") );
        } catch ( NoSuchElementException e) {
            LOGGER.info("No such element." );
            assertTrue("No such element.", false);
        }
    }

    @Override
    protected void load() {
        LOGGER.info("IFrame1.load()...");
        Wait<WebDriver> wait = new FluentWait<WebDriver>( driver )
                .withTimeout(30, TimeUnit.SECONDS)
                .pollingEvery(5, TimeUnit.SECONDS)
                .ignoring( NoSuchElementException.class ) 
                .ignoring( StaleElementReferenceException.class ) ;
            wait.until( ExpectedConditions.presenceOfElementLocated( 
            By.cssSelector("body form#webDriverUnitiFrame1TestFormID h1") ) );
    }
.... 
```

注意：您可以[在此处查看我的整个工作示例](https://raw.github.com/djangofan/WebDriverTestingTemplate/master/parallelwebdriver/src/main/java/webdriver/test/IFrame1.java)。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-04-20T03:36:58.910

对于`nodejs`Selenium 库，我使用了以下代码段。就我而言，我正在寻找添加到窗口中的两个对象，在此示例中`<SOME PROPERTY>`是`10000`超时毫秒数，`<NEXT STEP HERE>`是在窗口上找到属性后发生的情况。

```
driver.wait( driver => {
    return driver.executeScript( 'if(window.hasOwnProperty(<SOME PROPERTY>) && window.hasOwnProperty(<SOME PROPERTY>)) return true;' ); }, 10000).then( ()=>{
        <NEXT STEP HERE>
}).catch(err => { 
    console.log("looking for window properties", err);
}); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-03-01T15:08:01.880

这对我来说很适合动态呈现的网站：

1.  等待完整页面加载

```
WebDriverWait wait = new WebDriverWait(driver, 50); 
wait.until((ExpectedCondition<Boolean>) wd -> ((JavascriptExecutor) wd).executeScript("return document.readyState").equals("complete"));
```

2.  使用总是失败的虚拟条件进行另一个隐式等待

```
 try {          
 wait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath("//*[contains(text(),'" + "This text will always fail :)" + "')]"))); // condition you are certain won't be true 
  } 
  catch (TimeoutException te) {
  }
```

3.  最后，不要获取 html 源代码（在大多数单页应用程序中会给您带来不同的结果），而是拉取第一个 html 标记的 externalhtml

```
String script = "return document.getElementsByTagName(\"html\")[0].outerHTML;"; 
content = ((JavascriptExecutor) driver).executeScript(script).toString();
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-03-13T11:55:11.007

您可以编写一些逻辑来处理这个问题。我写了一个返回的方法，`WebElement`这个方法将被调用三次，或者你可以增加时间并添加一个空检查`WebElement`这是一个例子

```
public static void main(String[] args) {
        WebDriver driver = new FirefoxDriver();
        driver.get("https://www.crowdanalytix.com/#home");
        WebElement webElement = getWebElement(driver, "homekkkkkkkkkkkk");
        int i = 1;
        while (webElement == null && i < 4) {
            webElement = getWebElement(driver, "homessssssssssss");
            System.out.println("calling");
            i++;
        }
        System.out.println(webElement.getTagName());
        System.out.println("End");
        driver.close();
    }

    public static WebElement getWebElement(WebDriver driver, String id) {
        WebElement myDynamicElement = null;
        try {
            myDynamicElement = (new WebDriverWait(driver, 10))
                    .until(ExpectedConditions.presenceOfElementLocated(By
                            .id(id)));
            return myDynamicElement;
        } catch (TimeoutException ex) {
            return null;
        }
    } 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-09-10T20:37:11.497

这是我自己的代码：
Window.setTimeout 仅在浏览器空闲时执行。
因此，如果浏览器中没有活动，递归调用该函数（42 次）将花费 100 毫秒，如果浏览器忙于做其他事情，则需要更多时间。

```
 ExpectedCondition<Boolean> javascriptDone = new ExpectedCondition<Boolean>() {
        public Boolean apply(WebDriver d) {
            try{//window.setTimeout executes only when browser is idle,
                //introduces needed wait time when javascript is running in browser
                return  ((Boolean) ((JavascriptExecutor) d).executeAsyncScript( 

                        " var callback =arguments[arguments.length - 1]; " +
                        " var count=42; " +
                        " setTimeout( collect, 0);" +
                        " function collect() { " +
                            " if(count-->0) { "+
                                " setTimeout( collect, 0); " +
                            " } "+
                            " else {callback(" +
                            "    true" +                            
                            " );}"+                             
                        " } "
                    ));
            }catch (Exception e) {
                return Boolean.FALSE;
            }
        }
    };
    WebDriverWait w = new WebDriverWait(driver,timeOut);  
    w.until(javascriptDone);
    w=null; 
```

作为奖励，计数器可以在 document.readyState 或 jQuery Ajax 调用或任何 jQuery 动画正在运行时重置（仅当您的应用程序使用 jQuery 进行 ajax 调用...）
...

```
" function collect() { " +
                            " if(!((typeof jQuery === 'undefined') || ((jQuery.active === 0) && ($(\":animated\").length === 0))) && (document.readyState === 'complete')){" +
                            "    count=42;" +
                            "    setTimeout( collect, 0); " +
                            " }" +
                            " else if(count-->0) { "+
                                " setTimeout( collect, 0); " +
                            " } "+ 
```

...

编辑：我注意到如果加载新页面并且测试可能会停止响应不确定，则 executeAsyncScript 无法正常工作，最好改为使用它。

```
public static ExpectedCondition<Boolean> documentNotActive(final int counter){ 
    return new ExpectedCondition<Boolean>() {
        boolean resetCount=true;
        @Override
        public Boolean apply(WebDriver d) {

            if(resetCount){
                ((JavascriptExecutor) d).executeScript(
                        "   window.mssCount="+counter+";\r\n" + 
                        "   window.mssJSDelay=function mssJSDelay(){\r\n" + 
                        "       if((typeof jQuery != 'undefined') && (jQuery.active !== 0 || $(\":animated\").length !== 0))\r\n" + 
                        "           window.mssCount="+counter+";\r\n" + 
                        "       window.mssCount-->0 &&\r\n" + 
                        "       setTimeout(window.mssJSDelay,window.mssCount+1);\r\n" + 
                        "   }\r\n" + 
                        "   window.mssJSDelay();");
                resetCount=false;
            }

            boolean ready=false;
            try{
                ready=-1==((Long) ((JavascriptExecutor) d).executeScript(
                        "if(typeof window.mssJSDelay!=\"function\"){\r\n" + 
                        "   window.mssCount="+counter+";\r\n" + 
                        "   window.mssJSDelay=function mssJSDelay(){\r\n" + 
                        "       if((typeof jQuery != 'undefined') && (jQuery.active !== 0 || $(\":animated\").length !== 0))\r\n" + 
                        "           window.mssCount="+counter+";\r\n" + 
                        "       window.mssCount-->0 &&\r\n" + 
                        "       setTimeout(window.mssJSDelay,window.mssCount+1);\r\n" + 
                        "   }\r\n" + 
                        "   window.mssJSDelay();\r\n" + 
                        "}\r\n" + 
                        "return window.mssCount;"));
            }
            catch (NoSuchWindowException a){
                a.printStackTrace();
                return true;
            }
            catch (Exception e) {
                e.printStackTrace();
                return false;
            }
            return ready;
        }
        @Override
        public String toString() {
            return String.format("Timeout waiting for documentNotActive script");
        }
    };
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-05-23T05:21:02.453

我喜欢你轮询 HTML 直到它稳定的想法。我可以将其添加到我自己的解决方案中。以下方法使用 C# 并需要 jQuery。

我是 SuccessFactors (SaaS) 测试项目的开发人员，我们对开发人员或网页背后的 DOM 特性完全没有影响。SaaS 产品每年可能会更改其底层 DOM 设计 4 次，因此一直在寻找使用 Selenium 进行测试的强大、高性能的方法（包括在可能的情况下不使用 Selenium 进行测试！）

这是我用于“页面准备就绪”的内容。它目前适用于我自己的所有测试。几年前，同样的方法也适用于一个大型的内部 Java Web 应用程序，并且在我离开该项目时已经运行了一年多。

*   `Driver`是与浏览器通信的 WebDriver 实例
*   `DefaultPageLoadTimeout`是以滴答声为单位的超时值（每滴答声 100ns）

* * *

```
public IWebDriver Driver { get; private set; }

// ...

const int GlobalPageLoadTimeOutSecs = 10;
static readonly TimeSpan DefaultPageLoadTimeout =
    new TimeSpan((long) (10_000_000 * GlobalPageLoadTimeOutSecs));
Driver = new FirefoxDriver(); 
```

在接下来的内容中，请注意方法中的等待顺序`PageReady`（Selenium 文档就绪、Ajax、动画），如果您考虑一下，这是有道理的：

1.  加载包含代码的页面
2.  使用代码通过 Ajax 从某处加载数据
3.  呈现数据，可能带有动画

可以在 1 和 2 之间使用 DOM 比较方法之类的方法来增加另一层稳健性。

* * *

```
public void PageReady()
{
    DocumentReady();
    AjaxReady();
    AnimationsReady();
}

private void DocumentReady()
{
    WaitForJavascript(script: "return document.readyState", result: "complete");
}

private void WaitForJavascript(string script, string result)
{
    new WebDriverWait(Driver, DefaultPageLoadTimeout).Until(
        d => ((IJavaScriptExecutor) d).ExecuteScript(script).Equals(result));
}

private void AjaxReady()
{
    WaitForJavascript(script: "return jQuery.active.toString()", result: "0");
}

private void AnimationsReady()
{
    WaitForJavascript(script: "return $(\"animated\").length.toString()", result: "0");
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-11-07T21:20:22.353

不知道该怎么做，但在我的情况下，页面加载和渲染结束与 Firefox 选项卡中显示的 FAVICON 匹配。

因此，如果我们可以在 webbrowser 中获取 favicon 图像，则网页已完全加载。

但是如何执行这个....

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-03-02T00:37:37.073

使用隐式等待对我有用。

```
driver.Manage().Timeouts().ImplicitWait = TimeSpan.FromSeconds(10); 
```

参考这个答案[Selenium c# Webdriver: Wait Until Element is Present](https://stackoverflow.com/questions/6992993/selenium-c-sharp-webdriver-wait-until-element-is-present)

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2018-07-05T23:44:41.317

这是我的做法：

```
new WebDriverWait(driver, 20).until(
       ExpectedConditions.jsReturnsValue(
                   "return document.readyState === 'complete' ? true : false")); 
```

# cucumber - 未捕获的投掷 :halt

> ID：10720326
> 
> 赞同：1
> 
> 时间：2012-05-23T12:52:42.433
> 
> 标签：cucumber, sinatra, capybara, rack, ruby-1.9.3

我正在尝试实现基本的 http 身份验证，但我需要根据已通过身份验证的帐户的状态返回不同的 HTTP 状态代码。我正在使用 Sinatra 来托管 API，这就是我的应用程序的样子：

```
require 'rubygems'
require 'bundler/setup'
require 'sinatra'
require 'active_record'
require 'openssl'

# Define the paths that the application responds to, and include the authentication mechanism to provide
# basic HTTP authentication using the Rack middleware.
use Rack::Auth::Basic do |username, password|
  result = LoginApi::User.authenticate(username, password)

  # Check the status of the user we just authenticated. If he is banned or unverified then we
  # need to return special responses.
  throw :halt, [403, 'User is banned'] if LoginApi::AuthUser.user.banned?
  throw :halt, [412, 'User is not verified'] unless LoginApi::AuthUser.user.verified?

  # Return the result if no exceptions were raised in the meanwhile
  result
end

# This action responds on the root of the application and will return the basic authentication of a User
# in the headers. This is done by Rack::Auth, which requires the credentials to be sent in the initial
# call so they can be verified by the application
get '/' do
  headers \
    "X-UserID" => "#{LoginApi::AuthUser.user.id}|",
    "X-P1" => "#{LoginApi::AuthUser.p1}",
    "X-P2" => "#{LoginApi::AuthUser.p2}"
end 
```

所以基本上，它返回一个状态 200 表示 ok 身份验证，403 表示被禁止的用户，412 表示未验证的用户，如果身份验证失败则返回 400。

问题是我无法让我的测试正常工作。正常身份验证的测试工作正常并通过，但需要检查自定义 HTTP 状态响应的测试失败，并出现以下错误：

> ArgumentError: uncaught throw :halt ./app.rb:23:in `throw' ./app.rb:23:in`block in ' ./features/step_definitions/when_steps.rb:8:in`/^I make the call to the API$/' ./features/banned.feature:8:in`当我调用 API 时
> 
> 跳过步骤

有人可以解释一下我做错了什么或错过了什么以使其按我的意愿工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:35:20.243

将禁止和未验证的检查移至动作主体，并在那里处理结果。

可惜我不能在机架助手中做到这一点......

# wpf - 我可以在像 MVC 这样的 WPF 中将 DataAnnotations 与 Viewmodel 类一起使用吗

> ID：10720338
> 
> 赞同：1
> 
> 时间：2012-05-23T12:53:02.150
> 
> 标签：wpf, validation, automapper, data-annotations

在我的解决方案中，我有 WPF 项目，以及与数据库一起使用的 WCF 项目。我`AutoMapper`用来映射对象。

我的问题是：我可以将 DataAnnotations 与我的视图模型类一起使用，并将它们映射到从 WCF 服务项目接收到的对象吗？就像我在 Asp.net MVC 项目中所做的那样

我想使用 DataAnnotations 进行验证

像那样

```
 public class MContact
 {
      [Required(ErrorMessage = " Name is required.")]
      [StringLength(50, ErrorMessage = "No more than 50 characters")]
      [Display(Name = "Name")]
      public string Name { get; set; }

      [Required(ErrorMessage = "Email is required.")]
      [StringLength(50, ErrorMessage = "No more than 50 characters")]
      [RegularExpression(".+\\@.+\\..+", ErrorMessage = "Valid email required e.g. abc@xyz.com")]
      public string Email { get; set; }

      [Display(Name = "Phone Number")]
      [Required]
      [RegularExpression(@"^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$",
            ErrorMessage = "Entered phone format is not valid.")]
      public string PhoneNumber { get; set; }

      public string Address { get; set; }
      [RegularExpression(@"^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$",
    ErrorMessage = "Entered phone format is not valid.")]
      public string Mobil { get; set; }

 } 
```

这是我的 xaml 代码

```
<Window x:Class="WPFClient.AddNewContact"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="AddNewContact" Height="342" Width="432" mc:Ignorable="d" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:my="clr-namespace:WPFClient.PhoneBookServiceReference" Loaded="Window_Loaded">
<Window.Resources>
</Window.Resources>
<Grid>
    <GroupBox Header="Add Contact">
        <Grid HorizontalAlignment="Left" Margin="21,21,0,0" Name="grid1" VerticalAlignment="Top" Height="168" Width="357">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="194" />
                <ColumnDefinition Width="64*" />
            </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
                <RowDefinition Height="8*" />
            </Grid.RowDefinitions>

            <Label Content="Name:" Grid.Column="0" Grid.Row="0" HorizontalAlignment="Left" Margin="3" VerticalAlignment="Center" />
            <TextBox Grid.Column="1" Grid.Row="0" Height="23" HorizontalAlignment="Left" Margin="0,3,0,6" Name="nameTextBox" VerticalAlignment="Center" Width="120" />

            <Label Content="Email:" Grid.Column="0" Grid.Row="1" HorizontalAlignment="Left" Margin="3" VerticalAlignment="Center" />
            <TextBox Grid.Column="1" Grid.Row="1" Height="23" HorizontalAlignment="Left" Margin="0,3,0,6" Name="emailTextBox" VerticalAlignment="Center" Width="120" />

            <Label Content="Phone Number:" Grid.Column="0" Grid.Row="2" HorizontalAlignment="Left" Margin="3" VerticalAlignment="Center" />
            <TextBox Grid.Column="1" Grid.Row="2" Height="23" HorizontalAlignment="Left" Margin="0,3,0,6" Name="phoneNumberTextBox" VerticalAlignment="Center" Width="120" />

            <Label Content="Mobil:" Grid.Column="0" Grid.Row="3" HorizontalAlignment="Left" Margin="3" VerticalAlignment="Center" />
            <TextBox Grid.Column="1" Grid.Row="3" Height="23" HorizontalAlignment="Left" Margin="0,3,0,6" Name="mobilTextBox" VerticalAlignment="Center" Width="120" />

            <Label Content="Address:" Grid.Column="0" Grid.Row="4" HorizontalAlignment="Left" Margin="3" VerticalAlignment="Center" />
            <TextBox  Grid.Row="4" Grid.Column="1" Height="23" HorizontalAlignment="Left" Margin="0,3,0,6" Name="addressTextBox"   VerticalAlignment="Center" Width="151" />

        </Grid>
    </GroupBox>
         <Button Content="Add" Height="23" HorizontalAlignment="Left" Margin="24,217,0,0" Name="btnAdd" VerticalAlignment="Top" Width="75" />
    <Button Content="Cancel" Height="23" HorizontalAlignment="Left" Margin="123,217,0,0" Name="btnCancel" VerticalAlignment="Top" Width="75" />

</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T10:30:48.887

不，您必须手动实现 IDataErrorInfo 接口。

从[shared-validation-code-between-a-wpf-client-a-wcf-service-and-entity-framework-4-1-using-data-annotations](http://blogs.infosupport.com/sharing-validation-code-between-a-wpf-client-a-wcf-service-and-entity-framework-4-1-using-data-annotations/)：

> 您必须了解，在 WPF 中，与 Silverlight 不同的是，组件 (DataGrid) 不会自动读取数据注释。您必须实现 IDataErrorInfo 接口并使用数据注释手动验证。

# c# - 是更好地处理每个列表元素还是先找到要处理的元素？

> ID：10720344
> 
> 赞同：1
> 
> 时间：2012-05-23T12:53:22.147
> 
> 标签：c#, list

我有一个清单：`List<MyClass> MyList = new List<MyClass>();`。

`MyClass`有方法`SetBool`和`IsTrue`. 我必须将此列表中的每个对象都设置为 false ( `obj.SetBool(false)`)。

有两种可能的方式：

第一的：

```
foreach (MyClass obj in MyList)
{
    obj.SetBool(false)
} 
```

第二：

```
List<MyClass> MyList2 = MyList.Where(c => c.IsTrue()).ToList();

foreach (MyClass obj in MyList2)
{
    obj.SetBool(false)
} 
```

如果我使用第一个它可能会很慢，因为它会改变每个元素。第二种方式也可能很慢，因为它必须先找到对象。

所以我的问题是：哪一个会更快（我的列表中可能有非常多的元素），为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T12:58:28.913

最快的是组合：

```
foreach (MyClass obj in MyList)
{
    if (obj.IsTrue())
        obj.SetBool(false)
} 
```

但是与您的第一个版本的差异只有在进行`SetBool()`一些广泛的验证或计算时才有意义，并且比`Istrue()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T12:57:29.073

**首先会更短。第二个会很长。**

`Why ?`

假设您在列表中有 100 个项目。

对于第一个片段，它将仅迭代 100 多个项目。

而对于第二个片段，它将循环超过 100，然后取出 15（让我们假设）。然后它将遍历这 15 个。

所以基本上它迭代了超过 115 次以获得 100 个项目的列表。

相反，您可以通过这种方式进行检查

```
foreach (MyClass obj in MyList)
{
    if (obj.IsTrue())
        obj.SetBool(false)
} 
```

这将遍历所有这些，但`SetBool()`只会在正确的地方调用

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T13:00:05.167

更快的一个可能是（但就像在您的特定情况下必须测量所有内容一样）是使用`for`

```
for(int i=0;i<MyList.Count;i++)
{
    if (MyList[i].Istrue())
        MyList[i].SetBool(false)
} 
```

所有这些优化都是**上下文相关**的。

很多取决于：

*   你的列表大小
*   该列表中的真实值分布
*   SetBool 方法是否做一些“重”的事情

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T13:03:17.007

这取决于，如果`SetBool`是一个昂贵的功能，那么它确实很重要。再说一次，如果这`isTrue`是一个昂贵的功能，那么它确实很重要。

但无论如何，我宁愿使用你的第二种方式，而不是使用你的第二种方式

```
foreach (MyClass obj in MyList.Where(c => c.IsTrue()))
{
    obj.SetBool(false)
} 
```

与您的实现相比，这将降低速度和内存消耗。但同样，你必须测量它。如果检查需要更长的时间，如果项目 IsTrue 然后设置对象，那么只需使用您的第一种方式。如果是反之，那就用我的方法。

就[大 O 表示法](http://en.wikipedia.org/wiki/Big_O_notation)而言，两者都以 O(n) 运行

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T12:57:05.457

对于`SetBool`第一个版本的每个合理实现应该更快。

# android-viewpager - ActionbarSherlock 和 ViewpagerIndicator：如何使用片段将不同的操作栏菜单添加到 ViewPagerIndicator 中的不同页面

> ID：10720345
> 
> 赞同：3
> 
> 时间：2012-05-23T12:53:23.397
> 
> 标签：android-viewpager, actionbarsherlock, viewpagerindicator

我的应用程序使用`Actionbarsherlock`带有`ViewpagerIndicator`. 每页使用 1 个片段。我希望每个页面都有不同的操作栏菜单，那么我该如何存档呢？

我已经尝试`onCreateOptionsMenu`在每个上使用`SherlockFragment`但操作栏菜单不显示，我还尝试找到一些以编程方式添加菜单的方法，但没有办法。

```
@Override
public void onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu, com.actionbarsherlock.view.MenuInflater inflater)
{       
    inflater.inflate(R.menu.main, menu);    
    super.onCreateOptionsMenu(menu, inflater);
} 
```

谢谢！

****编辑：添加更多细节 ****

如果我在 Activity 中使用 onCreateOptionsMenu，菜单（操作项）会正常显示。

```
@Override
public boolean onCreateOptionsMenu(Menu menu)
{
    MenuInflater menuInflater = getSupportMenuInflater();
    menuInflater.inflate(R.menu.main, menu); 
```

这就是我设置 ActionBar 和 ViewPager 的方式

```
final ActionBar actionbar = getSupportActionBar();
    actionbar .setNavigationMode(ActionBar.NAVIGATION_MODE_STANDARD);
    actionbar .setDisplayHomeAsUpEnabled(true);
    actionbar .setTitle("olala");

    mFragmentAdapter = new MyFragmentPagerAdapter(getSupportFragmentManager());     
    mPager.setAdapter(mFragmentAdapter);

    mIndicator.setViewPager(mPager);
    mIndicator.setOnPageChangeListener(new MyPageChangeListener());
    mPager.setCurrentItem(3); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T15:52:15.170

我们需要在 Fragment（onCreate 或 onCreateView）上添加它，以便通过接收对 onCreateOptionsMenu(Menu, MenuInflater) 和相关方法的调用来报告此 Fragment 希望参与填充选项菜单。

```
setHasOptionsMenu(true); 
```

参考：http: [//developer.android.com/reference/android/app/Fragment.html](http://developer.android.com/reference/android/app/Fragment.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T12:58:54.590

没有调用我也有同样的情况`super`。

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    inflater.inflate(R.menu.chat_thread_list_fragment_menu, menu);
} 
```

更新：

我已经在我的活动的 onCreate 中设置了这个......

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.profile_activity);
    final ViewPager viewPager = (ViewPager) findViewById(R.id.profile_activity_pager);

    final Intent intent = getIntent();

    // I guess some setup should be done...
    final ActionBar bar = getSupportActionBar();
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_STANDARD);
    bar.setDisplayHomeAsUpEnabled(true);
    if (intent.hasExtra(EXTRA_USER_NAME)) {
        bar.setTitle(intent.getStringExtra(EXTRA_USER_NAME));
    } else {
        bar.setTitle(R.string.title_profile);
    }

    final PagerAdapter tabsAdapter = new TabsAdapter(this);
    viewPager.setAdapter(tabsAdapter);

    final TitlePageIndicator titleIndicator = (TitlePageIndicator) findViewById(R.id.profile_activity_tabs);
    titleIndicator.setViewPager(viewPager);

    if (intent.hasExtra(EXTRA_TAB_ID)) {
        final int tabId = intent.getIntExtra(EXTRA_TAB_ID, -1);
        if (tabId > -1 && tabId < tabsAdapter.getCount()) {
            viewPager.setCurrentItem(tabId);
        }
    }
} 
```

# c# - 如何确保所有类字段在首次使用前都已初始化

> ID：10720346
> 
> 赞同：1
> 
> 时间：2012-05-23T12:53:26.283
> 
> 标签：c#, initialization

假设我有一个做一些计算的类。这组计算需要一组参数作为输入。

```
public class Calculator
{
private CalculatorConfig _config;
public Calculator(CalculatorConfig config)
{
_config = config;
}

public Result Calculate(object obj){}
} 
```

我的 CalculatorConfig 类非常简单：

```
public class CalculatorConfig
{
      public double param1;
      public double param2;
      ...
} 
```

我很简单地初始化它

```
var config = new CalculatorConfig();
config.param1 = val;
....
var calculator = new Calculator(config); 
```

我的困境是这个类的用户可能会忘记初始化一些可能导致奇怪行为的字段。可能有意义的解决方案是将字段转换为属性，并且每个私有字段都有一个额外的布尔值，用于保存字段是否已初始化的信息。我还可以创建一个巨型构造函数，它将所有字段都作为参数。

在这种情况下你会选择什么方法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:57:35.703

如果所有参数都是绝对必需的，那么我会选择“大型构造函数”选项。它是一种更简洁的方式来确保所有内容都已初始化，并且您不必添加额外的布尔属性并处理未初始化某些内容的情况。如果您的布尔值之一包含错误值，您会怎么做？除了某种异常处理之外，您如何强制您的类的用户返回并添加这些值？构造函数将简单地确保这些事情甚至不会在编译时发生，而不是在运行时发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:57:43.890

在声明中设置默认值：

```
public class CalculatorConfig
{
      public double param1 = 1.0; // a default value chosen by you
      public double param2 = 2.0; // a default value chosen by you

} 
```

或者更OO的解决方案：使用属性而不是公共字段，然后在创建实例时设置默认值：

```
public class CalculatorConfig
{
      public double param1 {get;set;}
      public double param2 {get;set;}

      public CalculatorConfig()
      {
          InitParams();
      }

      private void InitParams()
      {
          param1 = 1.0;
          param2 = 2.0;
      }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T12:59:42.173

我将使用另一种方法。

*   向 CalculatorConfig 类添加另一个名为 Check 的方法（可能是内部方法）。
*   在Calculate 方法的执行过程中调用此方法。
*   在 Check 方法中验证每个参数并抛出自定义异常是否有问题

    ```
    public class CalculatorConfig 
    { 
      public double param1; 
      public double param2; 
      ... 
      internal void Check()
      {
           if(param1 == 0.0)
               throw new ArgumentException("Configuration error: param1 is not valid!");
           if(param2 == 0.0)
               throw new ArgumentException("Configuration error: param2 is not valid!");
           .... // other internal checks
      }
    } 

    public class Calculator 
    { 
        private CalculatorConfig _config; 
        public Calculator(CalculatorConfig config) 
        { 
            _config = config; 
        } 

        public Result Calculate(object obj)
        {
            // Throw ArgumentException if the configuration is not valid
            // Will be responsability of our caller to catch the exception
            _config.Check();

            // Do your calcs
            .....
        } 
    } 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T12:59:55.760

我认为您的配置参数应该是`readonly`（并且可以`private`通过属性访问）。然后，将警告设置为标记为错误。然后，当您无法初始化这些变量之一时，您将收到编译时错误

> 该字段`CalculatorConfig.param1`永远不会分配给，并且将始终具有其默认值。

现在您已经在编译时发现了问题。

# c# - 发送意外的 RS232 值

> ID：10720347
> 
> 赞同：1
> 
> 时间：2012-05-23T12:53:28.217
> 
> 标签：c#, serial-port

因 RS232 编程问题而把我的头发扯掉了。

我有一个 char[7] 缓冲区，其中包含一些我正在写入串行端口的字符。我正在使用串行端口监视器程序来监视端口的传入和传出。

我发送到端口的缓冲区包含

```
a5 00 01 00 0b 4a 
```

当我进入监控程序时，监控程序表明它可以看到：

```
3f 00 01 00 0b 4a 
```

因此，标题字符要么被监视错误，要么在程序退出时被更改。

我很困惑，不知道如何解决这个问题。

这是我用来填充缓冲区的代码。

```
 char[]cmdBuffer=createCommandBuffer(0, 4, 1);
        cmdBuffer[4] = Convert.ToChar(what);
        placeChecksums(cmdBuffer);
        serialPort.Write(cmdBuffer, 0, cmdBuffer.Length); 
```

在调用之前，我已经在断点中检查了 cmdBuffer 的内容，`serialPort.Write`它们是正确的。我只能断定监控程序是错误的，但是当我使用它来监控以相同波特率运行的其他软件时 - 它可以正确监控。

其他人有同样的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T12:59:03.327

您正在处理*characters*，但您已将值表示为*bytes*。

我个人鼓励您尽可能使用二进制数据，以简化事情 - 但`a5`转换为的原因`3f`几乎可以肯定是由于默认为 ASCII的[`Encoding`](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.encoding.aspx)属性。`SerialPort`ASCII 中不存在值 0xA5，因此将其转换为“？” 反而。

如果这*确实*是文本，那么适当地更改编码 - 但如果它是二进制数据，则使用二进制 API（它处理字节和字节数组而不是字符、字符数组和字符串）。

# objective-c - 在 iOS 中创建 Excel

> ID：10720349
> 
> 赞同：0
> 
> 时间：2012-05-23T12:53:29.527
> 
> 标签：objective-c, ios, xml, excel, xsd

您好我正在尝试通过 iOS 应用程序创建 Excel 文件，该应用程序将包含一些图像和数据。为此，我使用 OOXML 概念通过代码创建 Xml 文件，该文件可以作为 Excel 打开。它可以很好地处理数据，但我没有找到任何用于在 xml 中嵌入图像的标签。

我已将所有图像转换为 Base64 字符串并将其放入 XML。现在，XML 中是否有任何方法可以在以 Excel 格式打开时将 Base64 字符串转换为图像？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T03:13:59.307

我通过将所有图像转换为 Base64 字符串以节省空间来理解您的逻辑，但是 Excel 禁用嵌入图像作为安全预防措施。Base64 编码使防病毒软件很难检测到可能的威胁。因此，Excel 没有再次将字符串解码回图像的原因。

**请查看此链接，其中有人声称能够成功地将 Base64 图像解码和编码为 excel 文件。**

[https://stackoverflow.com/a/1400028/445312](https://stackoverflow.com/a/1400028/445312)

我希望这有帮助。

**PK**

# c# - 将不同的数据传递给相关的类

> ID：10720350
> 
> 赞同：0
> 
> 时间：2012-05-23T12:53:31.230
> 
> 标签：c#, .net, oop, design-patterns

我有课叫`WebAction`。还有一些继承自`WebAction`, `LoginStartWebAction`,等的类`LoginConfirmWebAction`。`SearchWebAction`它们有很多共同点，但也有一个很大的不同。每一个都需要不同的数据集才能工作，但都需要一些数据。到目前为止，我有一个财产

```
object DataObject {get; set;} 
```

在每个对象中，我已将它们转换为适合该指定类的类型（大部分是一些复杂类型）。

我这样使用它：

```
Object data = DataSet;    
for (int i = stepNo; i < _actions.Count; i++)
    {
        _actions[i].SetData(data);
        Response actionResponse = _actions[i].Perform();
        ThrowErrorIfServerError(actionResponse);
        if (i < _actions.Count - 1)
        {
            data = _actions[i].PrepareDataFor(_actions[i + 1].GetType());
        }
     } 
```

但现在我必须序列化这个 DataObject 并将其保存在某个位置。我不能序列化`object`类型，因为它可能是一切。

有没有什么好方法可以向一个类族提供不同但可序列化的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T16:50:53.177

如果您在基类中有属性，则它必须是 Object 类型。

如果您在派生类型中有属性，它可以是任何类型。

您尚未指定正在使用的序列化程序/格式化程序。

如果您使用的是[XmlSerializer](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)，则不需要任何东西，所有公共属性都将被序列化。

如果您使用[DataContractSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer.aspx)，则必须使用[KnownType](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.knowntypeattribute.aspx)属性指定所有可能的数据对象类型。

如果您使用[BinaryFormatter](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatters.binary.binaryformatter%28v=vs.100%29.aspx)，唯一的先决条件是派生类型必须是可序列化的。

如果您使用任何其他序列化程序，它将取决于序列化程序的 API 设计，它如何接受自定义类型信息（在序列化/反序列化期间，如果确实需要此信息）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:58:01.033

如果您使用 BinarySerializer 对其进行序列化，它将在序列化输出中包含该类型，因此即使您将其作为对象传递，您也可以稍后将其反序列化为相同的类型。

# android - 如何在 Android 中旋转、缩放和移动图像

> ID：10720353
> 
> 赞同：0
> 
> 时间：2012-05-23T12:53:38.153
> 
> 标签：android, image-rotation, zooming, custom-view

我是 ANDROID 的新手，想在我自己的自定义视图中旋转、缩放和移动图像。但是我在同一个 onTouchEvent 方法中编写了所有这些（旋转、缩放、移动）。因此，当我移动图像时，它也会旋转或缩放图像，它会被移动。我必须分别处理它们，但不知道如何处理。我想我可以添加一个按钮，例如名称是“旋转”。所以我可以修复图像，它只允许旋转。但我无法在我的自定义视图中创建按钮。代码如下所示：

```
公共类 MyView 扩展视图 {

`// The ‘active pointer’ is the one currently moving our object.
private int mActivePointerId = INVALID_POINTER_ID;
private static final int INVALID_POINTER_ID = -1;
private ScaleGestureDetector mScaleDetector;
private float mScaleFactor = 1.f;

private float mPosX;
private float mPosY;
private float mLastTouchX;
private float mLastTouchY;

//For Fetching image
private Bitmap bmp;
private Drawable image;
private byte[] byteArray;
private ByteArrayBuffer baf = null;

//For Rotation
int direction = 0;
int degree = 0;
private float centerX ;
private float centerY ;
private float newX ;
private float newY ;
private float rotateX;
private float rotateY;

public MyView(Context context) {
    this(context, null, 0);
}

public MyView(Context context, AttributeSet attrs) {
    this(context, attrs, 0);
}

public MyView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);

    String url = "http://www.queness.com/resources/images/png/apple_ex.png";    

    AsyncTask<String,Void,ByteArrayBuffer> connection=new GetUrlData().execute(url);

    try {
        baf=connection.get();
    } catch (InterruptedException e) {
        e.printStackTrace();
    } catch (ExecutionException e) {
        e.printStackTrace();
    }

    byteArray =  baf.toByteArray();
    bmp = BitmapFactory.decodeByteArray(byteArray, 0 , byteArray.length);

    image =new BitmapDrawable(context.getResources() , bmp);
    image.setBounds(0, 0, image.getIntrinsicWidth(), image.getIntrinsicHeight());
    mScaleDetector = new ScaleGestureDetector(context, new ScaleListener());    
}

@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    canvas.drawColor(Color.BLACK);

    //For Rotation
    int height = this.getHeight();
    int width = this.getWidth();
    centerX = width/2;
    centerY = height/2;
    canvas.rotate(direction, width / 2, height / 2);

    canvas.save();
    canvas.translate(mPosX, mPosY);
    canvas.scale(mScaleFactor, mScaleFactor);
    image.draw(canvas);
    canvas.restore();   
}

//For Rotation
private void updateRotation(float newX2, float newY2) {

    degree = (int)Math.toDegrees(Math.atan2(newY, newX))-90;

    setDirection(degree);
}
//For Rotation
public void setDirection(int direction) {
    this.direction = direction;
    this.invalidate();
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    // Let the ScaleGestureDetector inspect all events.
    mScaleDetector.onTouchEvent(event);

    final int action = event.getAction();

    if (action == MotionEvent.ACTION_DOWN) {
        final float x = event.getX();
        final float y = event.getY();

        mLastTouchX = x;
        mLastTouchY = y;
        mActivePointerId = event.getPointerId(0); 
    }

    if (action == MotionEvent.ACTION_MOVE) {
        final int pointerIndex = event.findPointerIndex(mActivePointerId);
        final float x = event.getX(pointerIndex);
        final float y = event.getY(pointerIndex);

        // Only move if the ScaleGestureDetector isn't processing a gesture.
        if (!mScaleDetector.isInProgress()) {
            final float dx = x - mLastTouchX;
            final float dy = y - mLastTouchY;

            mPosX += dx;
            mPosY += dy;

            invalidate();
        }

        mLastTouchX = x;
        mLastTouchY = y;

        //For Rotation
        rotateX =   event.getX();
        rotateY =   event.getY();

        newX =  centerX-rotateX;
        newY = centerY-rotateY;

        updateRotation( newX,  newY);

    }

    if (action == MotionEvent.ACTION_UP) {
        mActivePointerId = INVALID_POINTER_ID;

        updateRotation( newX,  newY);
    }

    if (action == MotionEvent.ACTION_CANCEL) {
        mActivePointerId = INVALID_POINTER_ID;
    }

    if (action == MotionEvent.ACTION_POINTER_UP) {
        final int pointerIndex = (event.getAction() & MotionEvent.ACTION_POINTER_INDEX_MASK) 
        >> MotionEvent.ACTION_POINTER_INDEX_SHIFT;
        final int pointerId = event.getPointerId(pointerIndex);
        if (pointerId == mActivePointerId) {
            // This was our active pointer going up. Choose a new
            // active pointer and adjust accordingly.
            final int newPointerIndex = pointerIndex == 0 ? 1 : 0;
            mLastTouchX = event.getX(newPointerIndex);
            mLastTouchY = event.getY(newPointerIndex);
            mActivePointerId = event.getPointerId(newPointerIndex);
        }

    }

    return true;
}

private class ScaleListener extends ScaleGestureDetector.SimpleOnScaleGestureListener {
    @Override
    public boolean onScale(ScaleGestureDetector detector) {
        mScaleFactor *= detector.getScaleFactor();

        // Don't let the object get too small or too large.
        mScaleFactor = Math.max(0.1f, Math.min(mScaleFactor, 5.0f));

        invalidate();
        return true;
    }
}` 

}

我希望我能说出我想要什么。你能帮我解决这个问题吗？

            回答 #1

赞同：2

时间：2013-09-17T06:37:30.097

试试下面的代码它对我有用。

```
float[] lastEvent = null;
float d = 0f;
float newRot = 0f;
private Matrix matrix = new Matrix();
private Matrix savedMatrix = new Matrix();
public static String fileNAME;
public static int framePos = 0;

private float scale = 0;
private float newDist = 0;

// Fields
private String TAG = this.getClass().getSimpleName();

// We can be in one of these 3 states
private static final int NONE = 0;
private static final int DRAG = 1;
private static final int ZOOM = 2;
private int mode = NONE;

// Remember some things for zooming
private PointF start = new PointF();
private PointF mid = new PointF();
float oldDist = 1f;

 public boolean onTouch(View v, MotionEvent event) {
            ImageView view = (ImageView) v;

            // Handle touch events here...
            switch (event.getAction() & MotionEvent.ACTION_MASK) {
            case MotionEvent.ACTION_DOWN:
                savedMatrix.set(matrix);
                start.set(event.getX(), event.getY());
                mode = DRAG;
                lastEvent = null;
                break;
            case MotionEvent.ACTION_POINTER_DOWN:
                oldDist = spacing(event);
                if (oldDist > 10f) {
                    savedMatrix.set(matrix);
                    midPoint(mid, event);
                    mode = ZOOM;
                }
                lastEvent = new float[4];
                lastEvent[0] = event.getX(0);
                lastEvent[1] = event.getX(1);
                lastEvent[2] = event.getY(0);
                lastEvent[3] = event.getY(1);
                d = rotation(event);
                break;
            case MotionEvent.ACTION_UP:
            case MotionEvent.ACTION_POINTER_UP:
                mode = NONE;
                lastEvent = null;
                break;
            case MotionEvent.ACTION_MOVE:
                if (mode == DRAG) {
                    // ...
                    matrix.set(savedMatrix);
                    matrix.postTranslate(event.getX() - start.x, event.getY()
                            - start.y);
                } else if (mode == ZOOM && event.getPointerCount() == 2) {
                    float newDist = spacing(event);
                    matrix.set(savedMatrix);
                    if (newDist > 10f) {
                        float scale = newDist / oldDist;
                        matrix.postScale(scale, scale, mid.x, mid.y);
                    }
                    if (lastEvent != null) {
                        newRot = rotation(event);
                        float r = newRot - d;
                        matrix.postRotate(r, view.getMeasuredWidth() / 2,
                                view.getMeasuredHeight() / 2);
                    }
                }
                break;
            }

            view.setImageMatrix(matrix);

            return true;
        } 
```

//用于在多点触控上旋转图像。

```
private float rotation(MotionEvent event) {
    double delta_x = (event.getX(0) - event.getX(1));
    double delta_y = (event.getY(0) - event.getY(1));
    double radians = Math.atan2(delta_y, delta_x);

    return (float) Math.toDegrees(radians);
}
private float spacing(MotionEvent event) {
        float x = event.getX(0) - event.getX(1);
        float y = event.getY(0) - event.getY(1);
        return FloatMath.sqrt(x * x + y * y);
    }

private void midPoint(PointF point, MotionEvent event) {
        float x = event.getX(0) + event.getX(1);
        float y = event.getY(0) + event.getY(1);
        point.set(x / 2, y / 2);
    } 
```

```

# ios - 单击TextView中的链接时如何防止默认浏览器打开？

> ID：10720355
> 
> 赞同：2
> 
> 时间：2012-05-23T12:53:39.730
> 
> 标签：ios, xcode, ipad, ios5

我有一个文本视图并包含一些链接。当我点击链接时，默认的 iOS 浏览器会打开。但我想为此目的打开我的自定义 Web 视图。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:55:17.243

[单击按钮后，您可以使用UIWebView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)调用 UIViewController ，然后您可以使用`loadRequest: method`加载您的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T15:51:21.480

我不知道是否有可能为覆盖默认处理程序的链接注册一个处理程序，但如果没有，那么您更改链接是否容易？如果是这样，您可以从以下链接启动您的应用程序：

myappurlscheme://

如果原始链接中有信息，您需要将其传递给您的应用，例如

myappurlscheme://http.theoriginalurl.com/somestuff

然后在您的应用程序中，您可以提取 http.theoriginalurl.com/somestuff 并将其传递给 UIWebVIew。

这种技术通常用于启动应用程序，但由于您的应用程序已经在运行，它仍然可以工作并导致对您的应用程序委托的函数调用。

[http://mobiledevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html](http://mobiledevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T02:52:29.087

使用`NSURLProtocol`- 从中​​派生您自己的类并实现相关方法（查看文档，它应该是不言自明的，如果没有回到这里有任何问题）。

您将在您的应用委托中注册您的课程`didFinishLaunchingWithOptions`。

在文本视图中单击链接时，您将有机会拦截 url 并阻止浏览器启动。一旦你拦截了它，你就可以对它做你想做的事情——比如在一个`UIWebView`例子中加载它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T14:46:52.837

我实际上已经按照奥斯卡的建议做了。问题是，您实际上只能为每个按钮分配一个“链接”。我实际上想更多地了解您的问题。你真的有大量的文本，在多行 UITextView 中显示多个 HTML 链接吗？您放入 UITextView 的文本是静态的（不变的）还是动态的（在哪里发生变化的）？

无论哪种情况，我都建议您在应用程序中将带有链接的文本实现为本地 HTML 文件，并在您自己的 UIWebView 中打开它们。在您自己的 UIWebView 中点击的任何链接都将打开并保留在您的 WebView 中，而不是退出标准浏览器。这是我在多个场合都做过的事情，因为我使用本地存储的 HTML 来进行游戏指导等......在应用程序中使用。有一种方法可以使 HTML 页面具有透明背景，以允许后面的其他视图（如背景等）显示文本。稍后我将尝试对其进行编辑，为您提供必须添加到 HTML 文件中以允许透明 HTML 支持的行（如果这是您需要的，因为它会使它看起来/感觉更像默认的 UITextView）。

这也是 Apple 在其 UITextView 类参考中给出的建议：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UITextView_Class/Reference/UITextView.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextView_Class/Reference/UITextView.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-10T06:33:08.833

有一个 UITextViewDelegate 方法 - textView:shouldInteractWithURL:inRange: 返回一个 Bool 变量。

因此，只需在此方法中创建您的自定义 UIWebView 并在此 webview 中加载 URL 并返回 No 以防止默认浏览器打开该链接。

`- (BOOL)textView:(UITextView *)textView shouldInteractWithURL:(NSURL *)URL inRange:(NSRange)characterRange{ NSLog(@"%@",URL); UIStoryboard *storyboard = self.storyboard; SDWebViewController *webViewController = [storyboard instantiateViewControllerWithIdentifier:@"WebViewController"]; webViewController.strURL = [NSString stringWithFormat:@"%@",[URL absoluteString]]; [self.navigationController pushViewController:webViewController animated:YES]; return NO; }`

然后在 SDWebViewController 类对象中加载 WebView 中的 URL。

# c++ - 遍历 C++ 映射 >

> ID：10720359
> 
> 赞同：3
> 
> 时间：2012-05-23T12:54:04.707
> 
> 标签：c++, map, iterator

尝试迭代地图及其列表成员时出现此错误：

```
error: 'template<class _Category, class _Tp, class _Distance, class _Pointer, class _Reference> struct std::iterator' used without template parameters
invalid use of qualified-name '<declaration error>::ii'
error: 'ii' was not declared in this scope
error: 'struct std::_Rb_tree_iterator<std::pair<const int, std::list<int, std::allocator<int> > > >' has no member named 'second'
error: 'struct std::_Rb_tree_iterator<std::pair<const int, std::list<int, std::allocator<int> > > >' has no member named 'second' 
```

这是代码（之前正确填充了地图）：

```
map<int, list<int> >::iterator it; 
list<int>iterator:: ii;

for(it=this->mapName.begin(); it!=this->mapName.end(); ++it){ 

    cout<<(*it).first<<" { ";
    for(ii = (*it).second().begin(); ii!=(*it).second.end(); ++ii){
        cout<<(*ii)<<" ";
    }
    cout << " }" << endl;                   
} 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T12:56:01.487

你在这里有一个语法错误：

```
 list<int>iterator:: 
```

应该

```
 list<int>::iterator 
```

还，

```
(*it).second().begin() 
```

应该

```
(*it).second.begin() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-25T11:06:11.293

```
map<int, list<int> >::iterator it; 
list<int>::iterator ii;

for(it=this->mapName.begin(); it!=this->mapName.end(); ++it){ 

    cout<<(*it).first<<" { ";
    for(ii = (*it).second.begin(); ii!=(*it).second.end(); ++ii){
        cout<<(*ii)<<" ";
    }
    cout << " }" << endl;                   
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T13:41:15.683

你可以用 - 取消内部 for 循环

```
 std::copy( it->second.begin(), it->second.end(),
               std::ostream_iterator<int>(std::cout, " ") ); 
```

这也意味着您可以摆脱`ii`.

# php - 如何通过 ASIFormDataRequest 逐块发送文件的包含？

> ID：10720372
> 
> 赞同：0
> 
> 时间：2012-05-23T12:54:59.757
> 
> 标签：php, iphone

我实现了使用 ASIFormDataRequest 将文件上传到服务器的代码

我的代码是这样的：

```
 NSURL *url = [NSURL URLWithString:@"someurl"];
    NSString *filePath = [[NSBundle mainBundle] pathForResource:@"medelix.db" ofType:nil];  
    NSData *myData = [NSData dataWithContentsOfFile:filePath]; 

    ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
    [request setPostValue:@"file" forKey:@"serverIP"];

    [request setData:myData withFileName:@"Data.txt" andContentType:@"application/octet-stream" forKey:@"uploadedfile"];
   // [request setProgressDelegate:self];
    [request setDelegate:self];
    [request setDidFinishSelector:@selector(postFinished:)];
    [request setDidFailSelector:@selector(postFailed:)];

    [request startAsynchronous];

    NSData *newStringData = [request responseData];
    NSString *x = [[[NSString alloc] initWithData:newStringData encoding:NSUTF8StringEncoding] autorelease];
    NSLog(@"result text from server is %@", x); 
```

我的服务器端 PHP 是：

```
<?php

$target_path = '/Applications/XAMPP/xamppfiles/htdocs/myupload/';

$target_path = $target_path . basename( $_FILES['uploadedfile']['name']);

if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) 
{ 
    echo "The file ". basename( $_FILES['uploadedfile']['name']). " has been uploaded"; 
} 
else{ 
    echo "There was an error uploading the file, please try again!";
}

?> 
```

**我在运行时发现的错误：request responseData 没有给出任何东西**

**现在我想通过 ASIFormDataRequest 向服务器发送一个数据块，直到文件包含未完成（逐块发送文件包含块）。**

任何人都可以用一段代码建议我如何使用 ASIFormDataRequest 逐块发送数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T06:11:23.943

您的上传本机代码看起来像这样：

```
- (void)uploadSomethingFiveTimes:(NSURL *)url
{
    NSString *filePath = [[NSBundle mainBundle] pathForResource:@"medelix.db" ofType:nil];  

    NSFileHandle *file = [NSFileHandle fileHandleForUpdatingAtPath: filePath];
    ASINetworkQueue *myQueue=[[ASINetworkQueue alloc] init] ;
    [myQueue cancelAllOperations];
    [myQueue setUploadProgressDelegate:myProgressIndicator];

    [myQueue setDelegate:self];
    [myQueue setRequestDidFinishSelector:@selector(queueComplete:)];
    int index;
 NSData *myData=nil;
    int Filedata= [file seekToEndOfFile];
    Filedata=(Filedata/3);
   [file seekToFileOffset:0];

    NSLog (@"Offset = %llu", [file offsetInFile]);

    for (index=3; index>0; index--) {

         myData = [file readDataOfLength: Filedata];

        NSString *x1 = [[[NSString alloc] initWithData:myData encoding:NSUTF8StringEncoding] autorelease];
        NSLog(@"responseData=%@",x1);

         NSLog (@"Offset = %llu", [file offsetInFile]);

        ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
        [request setDelegate:self];
        [request setDidFinishSelector:@selector(postFinished:)];
        [request setDidFailSelector:@selector(postFailed:)];
        [request timeOutSeconds];
        [request setNumberOfTimesToRetryOnTimeout:2];
        [request setPersistentConnectionTimeoutSeconds:120];
        [request setShowAccurateProgress:YES];
         NSString *ServerFileName=[NSString stringWithFormat:@"%@_%@",[self getcurrentdateTime],@"medelix.db"];

          [request setData:myData withFileName:ServerFileName andContentType:@"application/x-www-form-urlencoded" forKey:@"uploadedfile"];
        NSString *x = [[[NSString alloc] initWithData:[request responseData]encoding:NSUTF8StringEncoding] autorelease];
        NSLog(@"responseData=%@",x);
      ⠀
        [myQueue addOperation:request];
    }
    [myQueue go];

}

- (void)postFinished:(ASIFormDataRequest *)request
{
    // NSData *newStringData = [request responseData];
    NSString *x = [[[NSString alloc] initWithData:[request responseData]encoding:NSUTF8StringEncoding] autorelease];

    NSLog(@"Post Success %d [request responseData]=%@",[request inProgress],x);
    NSLog(@"Post Success %@" ,[request timeOutSeconds]);
}
- (void)postFailed:(ASIFormDataRequest *)request
{
    NSLog(@"Post Failed %d",[request inProgress]);
     NSLog(@"Post Failed %@",[request error]);
}

- (void)queueComplete:(ASINetworkQueue *)queue
{
    //[queue requestsCount];
  // NSLog(@"Max:%d", );
    NSLog(@"Max: %f, Value: %f", [myProgressIndicator progress],[myProgressIndicator progress]);
} 
```

服务器端代码将是：-

+

```
<?php

    $target_path = '/Applications/XAMPP/xamppfiles/htdocs/myupload/';

    $target_path = $target_path . basename( $_FILES['uploadedfile']['name']);

    $myFile=$_FILES['uploadedfile']['name'];
    echo $myFile." 1st line \n";

    if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) 
    { 
        echo "The file ". basename( $_FILES['uploadedfile']['name']). " has been uploaded"; 
    } 
    else{ 
        echo "There was an error uploading the file, please try again!";
    }

    if(file_exists($myFile))

    {

        $file="server_".$_FILES['uploadedfile']['name'];

         //exec("chmod $target_path 0777");
         if( chmod($_FILES['uploadedfile']['tmp_name'], 777))
         {
         echo "YES!";
         }
        if( chmod($target_path, 777))
        {
            echo "YES";
        }
        else
        {
            echo "NO";
        }

       $fh = fopen($target_path,'r');
       // $file='/Applications/XAMPP/xamppfiles/htdocs/myupload/server';
       $ab=file_put_contents($file, fread($fh,filesize($target_path)),FILE_APPEND);
        echo "Fread".$ab;
    //    fwrite($fh,"\n");
        fclose($fh);
        echo $fh." 2st line \n".$target_path." \n";

    }

    unlink($target_path);

    ?> 
```

# wpf - wpf自定义用户控件mouseleftButtonDown捕获区域

> ID：10720373
> 
> 赞同：0
> 
> 时间：2012-05-23T12:55:03.147
> 
> 标签：wpf, vb.net, xaml

当您单击它时，我有一个带有事件处理程序的自定义控件。一切正常，事件被正确触发。

```
 AddHandler (cu.MouseLeftButtonDown), AddressOf Me.DoSomething 
```

当控件调整大小以显示一些额外的信息时，它会展开。当用户按下按钮时，它也会折叠。这工作正常。但是现在当我单击扩展区域曾经所在的位置时，它仍然会在该控件上触发鼠标 leftbuttondown。我试图在展开的元素上将 IsHitTestVisible 设置为 false，但它不起作用。这是一些xaml ...

```
 <UserControl x:Class="MyCustomControl">
     <StackPanel>
       <Grid>
          'Stuff thats always visible
       </Grid>
    <Border IsHitTestVisible="False"   Grid.Row="1" HorizontalAlignment="left" BorderThickness="1" VerticalAlignment="top" x:Name="overView" Background="#EEEEEE" Visibility="Hidden" Margin="-325,-95,0,0" Width="auto" Height="auto" Padding="5,5,5,5" BorderBrush="#999999" CornerRadius="3,3,3,3">
        <Border IsHitTestVisible="False" x:Name="myBorder" Margin="1" Width="300" Height="225" BorderThickness="1" BorderBrush="#999999" Background="#DDDDDD" CornerRadius="3,3,3,3" HorizontalAlignment="Left" VerticalAlignment="Top">
            <Rectangle IsHitTestVisible="False" x:Name="rtgOverView">
            </Rectangle>
        </Border>
    </Border>
   </StackPanel>
 </UserControl> 
```

当我使用此代码时，概述变得可见

```
 overView.Visibility = Windows.Visibility.Visible 
```

当我使用它时隐藏起来

```
 OverView.Visibility = Windows.Visibility.Collapsed 
```

我用视觉刷填充矩形。加载控件时会发生这种情况。

```
 rtgOverView.Fill = visual 
```

overView 像这样定位在后面的代码中

```
 If x > 350 Then
        overView.HorizontalAlignment = Windows.HorizontalAlignment.Left
        overView.Margin = New Thickness(-325, -95, 0, 0)
    Else
        overView.HorizontalAlignment = Windows.HorizontalAlignment.Right
        overView.Margin = New Thickness(0, -95, -300, 0)
    End If 
```

我不能在我的 customcontrol 周围使用另一个元素，因为我也在所有不同类型的控件上使用这个 MouseLeftButtonDown。我无法弄清楚 cu.MouseLeftButtonDown 事件的边界是如何解决这个问题的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:08:14.690

堆栈面板的大小发生了一些奇怪的事情。就像 auto 属性不会将其缩小。我设法像这样修复它。当鼠标进入我输入：

```
 layoutroot.ClipToBounds = False 
```

这允许我在控件之外显示内容。当鼠标离开我使用：

```
 layoutroot.ClipToBounds = True 
```

绑定的剪辑以某种方式迫使 StackPanel 变小。

# foursquare - Foursquase API - 获取用户的所有签到

> ID：10720375
> 
> 赞同：1
> 
> 时间：2012-05-23T12:55:08.623
> 
> 标签：foursquare

4SQ 表示它只接受最后 6 个月或最后 500 个独特的场地。

有没有办法解析所有数据？

我希望能够分析用户的所有签到以绘制一些图表和统计数据。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T23:50:38.930

不要使用**场地历史**服务。我使用**/users/checkins**和**/multi/multi**来批量处理我的请求。

例如：

```
/users/1234/checkins?offset=0&limit=250
/users/1234/checkins?offset=250&limit=250
... 
```

如果您存储签到，您还可以使用**afterTimestamp**参数而不是重新获取所有数据：

```
/users/1234/checkins?offset=0&limit=250&afterTimestamp=lastCachedCheckin 
```

如果您需要“实时”新鲜度，可以使用**用户推送 API**：[https ://developer.foursquare.com/overview/realtime](https://developer.foursquare.com/overview/realtime)

每次用户在某处签到时，Foursquare 都会通知您的服务器。

# python - 如何减少请求时间？

> ID：10720376
> 
> 赞同：0
> 
> 时间：2012-05-23T12:55:10.853
> 
> 标签：python, tornado

我有一个简单的例子：

```
c = tornadoredis.Client()
c.connect()

class SourceHandler(tornado.web.RequestHandler):
@tornado.web.asynchronous
@tornado.gen.engine
def get(self):
    pipe = c.pipeline(transactional=True)
    pipe.zadd( 'test1'), 1212, "test" )
    pipe.zadd( 'test2'), 1212, "test" )
    .....
    pipe.zadd( 'testN'), 1212, "test" )
    res = yield tornado.gen.Task(pipe.execute)
    self.set_header('Content-Type', 'text/html')
    self.render("template.html", title="result") 
```

此请求的时间 = N * zadd 操作的时间。

我可以减少这个请求的时间吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:14:28.517

管道请求是一种事务性请求，它要求其中的所有操作都作为原子单元执行。该语句 -`res = yield tornado.gen.Task(pipe.execute)`将等到所有`zadd`语句都被执行，直到它返回执行到您的 get(...) 函数。

您可以减少执行时间的唯一方法是删除`gen.engine`火灾并忘记模式中的位，尽管您将不再拥有任何响应信息。

```
class SourceHandler(tornado.web.RequestHandler):
    @tornado.web.asynchronous
    def get(self):
        pipe = c.pipeline(transactional=True)
        pipe.zadd( 'test1'), 1212, "test" )
        pipe.zadd( 'test2'), 1212, "test" )
        ...
        pipe.execute()
        # of course you no longer have the response information...
        ...old code... 
```

# c++ - 成员变量可以用来初始化初始化列表中的其他成员吗？

> ID：10720377
> 
> 赞同：39
> 
> 时间：2012-05-23T12:55:14.270
> 
> 标签：c++, initialization-list, member-variables

考虑以下（简化的）情况：

```
class Foo
{
private:
    int evenA;
    int evenB;
    int evenSum;
public:
    Foo(int a, int b) : evenA(a-(a%2)), evenB(b-(b%2)), evenSum(evenA+evenB)
    {
    }
}; 
```

当我像这样实例化 Foo 时：

```
Foo foo(1,3); 
```

那么evenA为0，evenB为2，但是evenSum会被初始化为2吗？

我在我当前的平台（iOS）上试过这个，它似乎工作，但我不确定这段代码是否可移植。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-23T12:57:48.443

这*是*定义明确且可移植的，¹但它可能容易出错。

成员按照它们在类主体中声明的顺序进行初始化，而不是它们在初始化列表中列出的顺序。因此，如果您更改类主体，此代码可能会默默地失败（尽管许多编译器会发现这一点并发出警告）。

* * *

[1\. 来自 C++ 标准中的 [class.base.init]：

> 在非委托构造函数中，初始化按以下顺序进行：
> 
> *   首先，并且仅对于最派生类（1.8）的构造函数，虚拟基类按照它们出现在基类的有向无环图的深度优先从左到右遍历的顺序进行初始化，其中“左- to-right”是派生类base-specifier-list中基类的出现顺序。
> *   然后，直接基类按照它们出现在 base-specifier-list 中的声明顺序进行初始化（无论 mem-initializers 的顺序如何）。
> *   **然后，非静态数据成员按照它们在类定义中声明的顺序进行初始化** （同样不管 mem-initializers 的顺序）。
> *   最后，执行构造函数主体的复合语句。

（突出显示是我的。）

然后标准的这一部分继续给出使用成员变量来初始化其他成员变量的示例。] 

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-23T13:00:11.977

是的，只要它们已经建成。只是不要忘记构造顺序是类定义中声明的顺序，*而不是*构造函数中初始化程序的顺序。并且编译器通常不会告诉您是否在构造变量之前使用它。例如，在您的情况下，如果您移动到类的顶部，则您有未定义的行为（因为它的初始化程序使用未初始化的`evenSum`成员），即使在您的构造函数中，您在.`evenA``evenB``evenSum`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-23T12:57:22.517

成员按照它们在类定义中声明的顺序进行初始化。只要您的初始化程序列表遵循此顺序，就可以了。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-23T12:59:09.387

这也在 g++ 4.0.3（现在 6 岁）上编译没有错误。

我相信这将在任何合理的最新编译器上编译得很好。

# zend-framework - Zend 模型的内连接

> ID：10720381
> 
> 赞同：0
> 
> 时间：2012-05-23T12:55:43.533
> 
> 标签：zend-framework, zend-db

这个脚本有问题：

```
$select = $tabela->select()
                     ->joinInner('pedidos_itens', 'pedidos.peIp = pedidos_itens.ipPedido', array('ipProduto', 'ipQtde', 'ipCor', 'ipTextura', 'ipTamanho', 'ipSeq'))
                     ->joinInner('representantes_m', 'pedidos.peRepresentante = representantes_m.rpId', array('rpNome', 'rpTelefone', 'rpCidade', 'rpEstado', 'rpEmail'))
                     ->joinInner('produtos_m', 'pedidos_itens.ipPedido = produtos_m.prId', array('prTitulo', 'prRef', 'prCategoria', 'prColecao'))
                     ->joinInner('produtos_cores_m', 'pedidos_itens.ipProduto = produtos_cores_m.pcProduto', array('pcTitulo'))
                     ->joinInner('texturas_m', 'pedidos_itens.ipProduto = texturas_m.teProduto', array('teTitulo'))
                     ->joinInner('colecoes_m', 'produtos_m.prColecao = colecoes_m.coId', array('coTitulo'))
                     ->joinInner('categorias_m', 'produtos_m.prCategoria = categorias_m.caId', array('caTitulo'))
                     ->where('pedidos.peId = 2')
                     ->order('pedidos.peId DESC'); 
```

这将返回此错误：

```
Warning: Select query cannot join with another table in C:\Arquivos de programas\Zend\ZendServer\share\ZendFramework\library\Zend\Db\Select.php on line 1345 
```

- - - - 编辑

我已将其更改为：

```
$db = Zend_Db_Table::getDefaultAdapter();

    $select = $db->select()
                     ->from('pedidos', array('peId', 'peRepresentante', 'peData', 'peStatus'))
                     ->joinInner('pedidos_itens', 'pedidos.peId = pedidos_itens.ipPedido', array('ipProduto', 'ipQtde', 'ipCor', 'ipTextura', 'ipTamanho', 'ipSeq'))
                     ->joinInner('representantes_m', 'pedidos.peRepresentante = representantes_m.rpId', array('rpNome', 'rpTelefone', 'rpCidade', 'rpEstado', 'rpEmail'))
                     ->joinInner('produtos_m', 'pedidos_itens.ipPedido = produtos_m.prId', array('prTitulo', 'prRef', 'prCategoria', 'prColecao'))
                     ->joinInner('produtos_cores_m', 'pedidos_itens.ipProduto = produtos_cores_m.pcProduto', array('pcTitulo'))
                     ->joinInner('texturas_m', 'pedidos_itens.ipProduto = texturas_m.teProduto', array('teTitulo'))
                     ->joinInner('colecoes_m', 'produtos_m.prColecao = colecoes_m.coId', array('coTitulo'))
                     ->joinInner('categorias_m', 'produtos_m.prCategoria = categorias_m.caId', array('caTitulo'))
                     ->where('pedidos.peId = 2')
                     ->order('pedidos.peId DESC');

    $resultado = $db->query($select)->fetchAll(); 
```

它返回一个空数组，即使有记录。所以？：/

---- 编辑 2

这是查询：

选择`pedidos`。`peId`, `pedidos`. `peRepresentante`, `pedidos`. `peData`, `pedidos`. `peStatus`, `pedidos_itens`. `ipProduto`, `pedidos_itens`. `ipQtde`, `pedidos_itens`. `ipCor`, `pedidos_itens`. `ipTextura`, `pedidos_itens`. `ipTamanho`, `pedidos_itens`. `ipSeq`, `representantes_m`. `rpNome`, `representantes_m`. `rpTelefone`, `representantes_m`. `rpCidade`, `representantes_m`. `rpEstado`, `representantes_m`. `rpEmail`, `produtos_cores_m`. `pcTitulo`, `texturas_m`. `teTitulo`, `produtos_m`. `prTitulo`, `produtos_m`. `prRef`, `produtos_m`. `prCategoria`, `produtos_m`. `prColecao`, `colecoes_m`. `coTitulo`, `categorias_m`. `caTitulo`FROM `pedidos` INNER JOIN `pedidos_itens`ON pedidos.peId = pedidos_itens.ipPedido INNER JOIN`representantes_m`ON pedidos.peRepresentante `produtos_cores_m`=presentantes_m.rpId INNER JOIN `texturas_m`ON pedidos_itens.ipProduto = produtos_cores_m.pcProduto INNER JOIN ON pedidos_itens.ipProduto = texturas_m.teProduto INNER JOIN `produtos_m`ON pedidos_itens.ipProduto = produtos_m.prId INNER JOIN `colecoes_m`ON produtos_m.coIdColecao。`categorias_m`在 produtos_m.prCategoria = categorias_m.caId WHERE (pedidos.peId = 2) ORDER BY`pedidos`上。`peId`DESC

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T05:19:39.263

试试这个

```
 $db = Zend_Db_Table::getDefaultAdapter();

    $select = $db->select()
    $select->setIntegrityCheck(FALSE); //Now it will join

                     ->from('pedidos', array('peId', 'peRepresentante', 'peData', 'peStatus'))
                     ->joinInner('pedidos_itens', 'pedidos.peId = pedidos_itens.ipPedido', array('ipProduto', 'ipQtde', 'ipCor', 'ipTextura', 'ipTamanho', 'ipSeq'))
                     ->joinInner('representantes_m', 'pedidos.peRepresentante = representantes_m.rpId', array('rpNome', 'rpTelefone', 'rpCidade', 'rpEstado', 'rpEmail'))
                     ->joinInner('produtos_m', 'pedidos_itens.ipPedido = produtos_m.prId', array('prTitulo', 'prRef', 'prCategoria', 'prColecao'))
                     ->joinInner('produtos_cores_m', 'pedidos_itens.ipProduto = produtos_cores_m.pcProduto', array('pcTitulo'))
                     ->joinInner('texturas_m', 'pedidos_itens.ipProduto = texturas_m.teProduto', array('teTitulo'))
                     ->joinInner('colecoes_m', 'produtos_m.prColecao = colecoes_m.coId', array('coTitulo'))
                     ->joinInner('categorias_m', 'produtos_m.prCategoria = categorias_m.caId', array('caTitulo'))
                     ->where('pedidos.peId = 2')
                     ->order('pedidos.peId DESC');

    $resultado = $db->query($select)->fetchAll(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:02:53.817

您不能对表对象使用连接。你应该使用适配器

所以，你应该使用

```
$tabela->getAdapter()->select() 
```

你应该使用 from 方法

```
 $tabela->getAdapter()->select()->from($this, array()) 
```

# c# - 编码 UI 中的隐藏控件

> ID：10720383
> 
> 赞同：0
> 
> 时间：2012-05-23T12:55:51.587
> 
> 标签：c#, coded-ui-tests

我正在尝试为 WPF 应用程序记录编码的 UI。我的目标是单击按钮 ( `Mybutton`)。

问题是在应用程序中有另一个控件不可见，它位于我的按钮顶部。每次我单击时`myButton`- CUIT 生成的代码都是针对blockingControl 的。

我有应用程序代码 - 但无权更改 xaml（我可以添加自己的实现，例如“onCrerationAutomationPeer”）。

有没有办法编写一个插件来识别 BlockingCcontrol 不可见 - 并且不会选择它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T12:51:21.503

我发现如果我实现`onCrerationAutomationPeer`返回 null 阻塞控制将被忽略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-19T11:49:07.380

在 WPF 中，您还可以询问按钮是否已启用。

```
if(button.GetProperty("Enabled").Equals(true)) { ... } 
```

# iphone - 几个 UIButton 标题变化

> ID：10720385
> 
> 赞同：0
> 
> 时间：2012-05-23T12:56:04.873
> 
> 标签：iphone, uibutton

我是 iphone 编程新手。我想知道如何同时更改几个 UIButtons 的标题。例如，有十个 UIButton，当我单击第一个时，我希望其余的标题发生变化。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:02:26.360

如果要更改视图中的所有其他按钮，一种方法是迭代`UIView`包含`UIButtons`.

```
- (void)buttonTapped:(UIButton *)sender {
    for (id subview in self.view.subviews) {
        if ([subview isKindOfClass:[UIButton class]] && subview != sender) {
            UIButton *button = (UIButton *)sender;
            [button setTitle:@"new title" forState:UIControlStateNormal];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T13:05:28.687

将按钮保存在数组中（如果它们在 IB 中，则使用 IBOutletCollection）。然后，当他们需要更改时，使用 for 语句遍历数组。

# visual-c++ - LNK2001 - 应该很容易解决..但我看不到它！(VS2005)

> ID：10720386
> 
> 赞同：0
> 
> 时间：2012-05-23T12:56:10.833
> 
> 标签：visual-c++, linker-errors

我在这里敲我的头.. 试图解决这些 LNK2001 错误。帮助页面给了我很多原因，但我看不出哪一个适用。

请知识渊博的 VS 2005 C++ 人员协助解决这些问题？问我问题..有时会有所帮助。如果我不害怕看起来像个心理医生，我会找一只橡皮鸭来解释这个:-)但我坐在办公室里。

> 错误 LNK2001：无法解析的外部符号“struct ethernetParams_t * ethernetData_g”(?ethernetData_g@@3PAUethernetParams_t@@A) simple_Console.obj

我的代码 simple_console.cpp 试图使用在 C 中定义的结构，但 #includes 的工作方式和 #stdafx 超出了我的范围。包含 ethernetParams_t 的标头包含在 stdafx.h 中

```
#include "CON_ethernet_defs.h" 
```

请问一下...@@之后的线索是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:00:21.600

链接器告诉您有一个`ethernetData_g`类型为 的未知外部符号`struct ethernetParams_t *`。造成这种情况的原因是，尽管`ethernetData_g`在您包含的标头中声明了它，但它的定义来自您需要链接的另一个目标文件。由于您没有与适当的目标文件链接，因此链接器找不到正确的定义

您缺少的目标文件必须来自您尝试使用的库，因此请在该文件夹中查找 .obj 文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T13:27:30.117

为了使用其他人开发的代码（例如，在您的案例中使用静态库），您需要两件事：

1.  将函数签名提供到您的项目中（包含文件）
2.  将功能实现提供到您的项目中（库文件）

看起来你做了第一件事，但没有做第二件事。这是如何解释链接器以这种非常神秘的形式给出的错误......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T13:45:11.853

@Attila 和 @mox 可能已经解决了：您需要链接到包含您正在使用的函数的实现的`obj`or`lib`文件。

如果您在解决方案资源管理器中右键单击您的项目，单击属性，然后选择链接器|输入，您可以查看并编辑您链接到的库/目标文件列表（“附加依赖项”）。

您说结构是用 C 而不是 C++ 定义的，另一个可能的问题是`extern "C"`包含文件中的缺失，请参见[此处](http://msdn.microsoft.com/en-us/library/0603949d%28v=VS.80%29.aspx)的解释。

# mysql - 跨越 2 天时按时间排序的 SQL

> ID：10720391
> 
> 赞同：1
> 
> 时间：2012-05-23T12:56:25.793
> 
> 标签：mysql, sql, datetime

标题可能很神秘，但这是我的问题。

我有一张一天的活动表（行程）。每个条目（例如参观博物馆）都有 slot_start 和 slot_end 时间列。这是 24 小时制，例如 13:00:00 - 15:00:00。

我想通过 slot_start asc 订购这些，但我可以使用 slot_start 00:00:00 输入“去酒吧/俱乐部”，即。午夜将首先订购，这将是正确的顺序，但由于这实际上是新的一天，我希望它在博物馆之后。

这些没有具体的日期。他们只受到他们的时段限制，并被认为是一天的事件。

有没有人有这种设置的经验？或者任何人都可以建议一种不同的方式来设置每个“事件”的时间？我想我可能必须根据第 1 天、第 2 天来介绍它是哪一天的一些元素......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:13:51.557

我个人使用 start_unix 和持续时间。

*   start_unix 是事件开始时的 unix_timestamp
*   持续时间只是持续时间
*   end_unix = (start_unix + 持续时间)

这是实现对这些问题的完全控制的简单方法。

对您来说，一个有罪的解决方案可能是将这些经过午夜的时间设置为例如 25:00:00 (01:00:00)，并且当您向他们展示时，您会执行 a `SELECT MOD(slot_start, 24) AS slot_start_mod`and `ORDER BY slot_start`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:13:00.090

所以“00:00:00”是指在博物馆之后，如果他们在 00:01:00 进入俱乐部？还是 00:01:00？

你需要在你的桌子上放一个“一天”来控制它。

您的问题的一个非常“丑陋”的解决方案是这样的：

首先选择一个“限制”来考虑记录总是“较旧”，比如说凌晨 3 点，因此 3 点之前的每条记录都将被视为“之后”。然后做：

```
select * 
from your_table 
where slot_start > '03:00:00'
order by slot_start 

union

select * 
from your_table 
where slot_start < '03:00:00'  and slot_start > '00:00:00'
order by slot_start 
```

但同样，这不是一个好的解决方案。理想情况下，您需要在桌子上进行“日”控制

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T13:03:53.893

您可以使用以下命令按多列排序：

```
ORDER BY Day, Time 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T13:29:06.603

这是一个想法，您可以从实际 Slot_start 时间中减去 1 分钟来进行排序（但建议在表中使用日期列）。

```
Select * from Table order by dateadd(minute,-1,TIME) 
```

dateadd 函数将 (-1) 分钟添加到 TIME 列只是为了对它们进行排序

# facebook - 如何使用应用访问令牌在 Rails 中发布 opengraph 操作

> ID：10720395
> 
> 赞同：3
> 
> 时间：2012-05-23T12:57:03.583
> 
> 标签：facebook, ruby-on-rails-3, facebook-graph-api, facebook-opengraph

嗨，我想为我的 rails 应用程序发布开放图形操作。我想发布简单的待办事项共享操作。我得到了以下代码来做到这一点

```
https://graph.facebook.com/me/[YOUR_APP_NAMESPACE]:todo
     ?recipe=OBJECT_URL&access_token=ACCESS_TOKEN 
```

现在我的问题是我想使用应用访问令牌来执行此发布请求，但是当我使用 app_token 时出现以下错误。

```
{    "error": {
      "message": "An active access token must be used to query information about the current user.",
      "type": "OAuthException",
 "code": 2500    }
} 
```

我从浏览器尝试了上面的 url。我想知道**如何从 rails 控制器发出发布请求**以及**如何使用 app_access 令牌发布打开图形操作**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T14:47:29.377

因为您使用的是应用程序访问令牌，所以特殊 id`me`没有意义。

如果您想使用应用令牌代表用户发布操作，您需要执行以下操作：

```
https://graph.facebook.com/[USER_ID]/[YOUR_APP_NAMESPACE]:todo
 ?recipe=OBJECT_URL&access_token=APP_ACCESS_TOKEN 
```

请注意，路径中指定的用户必须已授予您的应用发布操作的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:38:10.273

您可以使用常规 HTTP 请求来完成此操作，您需要的所有信息都在这里：

*   [Facebook 身份验证（服务器端流程）](https://developers.facebook.com/docs/authentication/server-side/)

也就是说，因为您使用的是 Ruby（和 Rails），所以您应该考虑使用其中一种 ruby​​ Facebook gem，例如：

*   [考拉](https://github.com/arsduo/koala)

# sql - 存储过程执行次数过多

> ID：10720397
> 
> 赞同：0
> 
> 时间：2012-05-23T12:57:04.810
> 
> 标签：sql, sql-server

存储过程是：

```
CREATE PROCEDURE [dbo].[spManagedRouteSheetList]
@dStartDate DateTime,
@dEndDate DateTime
AS
BEGIN 
SELECT IT.TriggerParentID,IT.ProductID, IT.[Weight],IT.[DateTime],IT.ProductType,IT.InOutType,IT.TriggerParentType FROM ITransaction IT 
    WHERE IT.InOutType=101 and IT.LotID in (select ManagedLotID from RSInQCDetail where YarnFormat <>4 and ManagedLotID>0) 
    AND IT.[DateTime]>=@dStartDate AND IT.[DateTime]<@dEndDate

    --YarnCategory 
    SELECT YarnCategoryID,Name,Code FROM YarnCategory WHERE YarnCategoryID IN (SELECT Distinct ProductID FROm ITransaction IT WHERE IT.InOutType=101 and IT.LotID in (select ManagedLotID from RSInQCDetail where YarnFormat <>4 and ManagedLotID>0) 
    AND IT.[DateTime]>=@dStartDate AND IT.[DateTime]<@dEndDate) 

    --RouteSheet 
    SELECT RouteSheetID,RoutesheetNo, ReqYarnQty, [date],RSState,Shift,Subfactory,(SELECT Name FROM Location WHERE LocationID=Subfactory) 
    FROM Routesheet where RoutesheetID IN (SELECT distinct IT.TriggerParentID FROM ITransaction IT WHERE IT.InOutType=101 and IT.LotID in (select ManagedLotID from RSInQCDetail where YarnFormat <>4 and ManagedLotID>0) 
    AND IT.[DateTime]>=@dStartDate AND IT.[DateTime]<@dEndDate)

    --RSInQCDetail
    SELECT RouteSheetID,Qty,YarnFormat,ManagedLotID FROM RSInQCDetail WHERE RouteSheetID IN     (SELECT distinct IT.TriggerParentID FROM ITransaction IT WHERE IT.InOutType=101 and IT.LotID in (select ManagedLotID from RSInQCDetail where YarnFormat <>4 and ManagedLotID>0) 
    AND IT.[DateTime]>=@dStartDate AND IT.[DateTime]<@dEndDate)

    --RouteSheet History
    SELECT RouteSheetID,YarnQtyInLBS,[Event] from RouteSheetHistoryEnhance WHERE EVENt IN (14) 
    AND RouteSheetID IN (SELECT distinct IT.TriggerParentID FROM ITransaction IT WHERE IT.InOutType=101 and IT.LotID in 
    (select ManagedLotID from RSInQCDetail where YarnFormat <>4 and ManagedLotID>0) 
    AND IT.[DateTime]>=@dStartDate AND IT.[DateTime]<@dEndDate)

END 
```

执行程序：

```
EXECUTE dbo.[spManagedRouteSheetList] '21 May 2012 08:00:00','22 May 2012 08:00:00'.. 
```

这将需要 2 次错误，但如果我执行以下查询，则只需 1 或 3 秒

```
DECLARE @dStartDate as datetime
        ,@dEndDate as datetime

        SET @dStartDate='21 May 2012 08:00:00'
        SET @dEndDate='22 May 2012 08:00:00'

SELECT IT.TriggerParentID,IT.ProductID, IT.[Weight],IT.[DateTime],IT.ProductType,IT.InOutType,IT.TriggerParentType FROM ITransaction IT 
    WHERE IT.InOutType=101 and IT.LotID in (select ManagedLotID from RSInQCDetail where YarnFormat <>4 and ManagedLotID>0) 
    AND IT.[DateTime]>=@dStartDate AND IT.[DateTime]<@dEndDate

    --YarnCategory 
    SELECT YarnCategoryID,Name,Code FROM YarnCategory WHERE YarnCategoryID IN (SELECT Distinct ProductID FROm ITransaction IT WHERE IT.InOutType=101 and IT.LotID in (select ManagedLotID from RSInQCDetail where YarnFormat <>4 and ManagedLotID>0) 
    AND IT.[DateTime]>=@dStartDate AND IT.[DateTime]<@dEndDate) 

    --RouteSheet 
    SELECT RouteSheetID,RoutesheetNo, ReqYarnQty, [date],RSState,Shift,Subfactory,(SELECT Name FROM Location WHERE LocationID=Subfactory) 
    FROM Routesheet where RoutesheetID IN (SELECT distinct IT.TriggerParentID FROM ITransaction IT WHERE IT.InOutType=101 and IT.LotID in (select ManagedLotID from RSInQCDetail where YarnFormat <>4 and ManagedLotID>0) 
    AND IT.[DateTime]>=@dStartDate AND IT.[DateTime]<@dEndDate)

    --RSInQCDetail
    SELECT RouteSheetID,Qty,YarnFormat,ManagedLotID FROM RSInQCDetail WHERE RouteSheetID IN     (SELECT distinct IT.TriggerParentID FROM ITransaction IT WHERE IT.InOutType=101 and IT.LotID in (select ManagedLotID from RSInQCDetail where YarnFormat <>4 and ManagedLotID>0) 
    AND IT.[DateTime]>=@dStartDate AND IT.[DateTime]<@dEndDate)

    --RouteSheet History
    SELECT RouteSheetID,YarnQtyInLBS,[Event] from RouteSheetHistoryEnhance WHERE EVENt IN (14) 
    AND RouteSheetID IN (SELECT distinct IT.TriggerParentID FROM ITransaction IT WHERE IT.InOutType=101 and IT.LotID in ``
    (select ManagedLotID from RSInQCDetail where YarnFormat <>4 and ManagedLotID>0) 
    AND IT.[DateTime]>=@dStartDate AND IT.[DateTime]<@dEndDate) 
```

那么..存储过程有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:00:52.407

如果这是针对 SQL Server...

这不一定是一个完美的解决方案，但它可能会消除您看到的差异。

尝试添加`WITH RECOMPILE`到存储过程定义。

```
CREATE PROCEDURE [dbo].[spManagedRouteSheetList]
    @dStartDate DateTime,
    @dEndDate DateTime
WITH RECOMPILE
AS ... 
```

# c# - 从视图状态获取值，以防会话过期

> ID：10720399
> 
> 赞同：0
> 
> 时间：2012-05-23T12:57:15.687
> 
> 标签：c#, asp.net, .net

我的项目中有很多页面。在我写的所有页面中：

```
if (!IsPostBack)
{     
   if (HttpContext.Current.Session["curUserRole"] == null)
   {
      DBUsers.SetUserStatusOnline("0", ViewState["curUserLogin"].ToString());
      ViewState["curUserLogin"] = "";
      Response.Redirect("~/Login.aspx");
   }
   else
   {       
      ViewState["curUserLogin"] = HttpContext.Current.Session["curUserLogin"].ToString();
      DBUsers.SetUserStatusOnline("1", ViewState["curUserLogin"].ToString());
   }
} 
```

当用户登录站点时，当前用户角色被写入会话，当前用户登录被写入视图状态。会话结束后，我以为可以在视图状态中查看当前用户登录，并在数据库中设置离线状态。但是当`session`为空时，视图状态也为空。我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:14:32.167

如果`Response.redirect`使用，则无法跨页面访问 ViewState。尝试使用`Server.transfer`

检查[访问 ViewState 跨页面](http://www.codeproject.com/Articles/37753/Access-ViewState-Across-Pages)了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T17:36:53.507

使用[表单身份验证](http://www.asp.net/web-forms/tutorials/security/introduction/an-overview-of-forms-authentication-cs)不是比手动处理角色、视图状态和会话更好的方法吗？

这样，您将与当前[身份](https://stackoverflow.com/questions/8810496/forms-authentication-understanding-context-user-identity)进行交互以获取用户信息，而不是自定义信息存储。

而且我认为您可能不应该依赖用户的回发来确定会话是否已过期。如果用户只是关闭浏览器怎么办？他/她将无限期地保持“在线”。

您应该为用户提供手动注销的机制。

现在，如果您将[InProc](http://msdn.microsoft.com/en-us/library/ms178586.aspx)用于会话状态，您可以在 global.asax 中处理 Session_End 以将该用户设置为数据库中的“离线”。如果您使用 StateServer 或 SQLServer，则 Session_End 不会在超时时调用，您必须以自定义方式处理它，例如通过 DB Server 上的计划任务将用户标记为离线。

现在，如果您真的需要非常精确地控制在线/离线状态，您可能需要采用更复杂的方法。一种选择是，每当用户执行任何操作时，将日期时间存储在 User 表上的最后一个活动上。并考虑任何在特定时间内未进行任何活动的用户处于离线状态。另一种选择是将 ajax 调用用作更新上述日期时间的保持活动调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T12:59:20.970

除了`UnhandledException`'s answer，我还要补充一点，最好将您的逻辑集中在一个类中，然后从该新类中派生您的页面，而不是将其剪切并粘贴到每个页面：

```
public class MyPageClass : System.Web.UI.Page
{
    protected override void OnLoad(EventArgs e)
    {
        // Add your logic here.

        base.OnLoad(e);
    }
}

public class WebPage1 : MyPageClass
{  
    private void Page_Load(object sender, System.EventArgs e)
    {
    }
} 
```

# android - 在android中加密任何数字

> ID：10720406
> 
> 赞同：-1
> 
> 时间：2012-05-23T12:57:25.877
> 
> 标签：android, encryption, numbers

`android`例如，我想加密一个数字`12345`。如何加密号码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:11:17.047

转换为字符串然后加密字符串可能会对您有所帮助！

我建议你检查这个帖子：

[如何在Android中对字符串进行哈希处理？](https://stackoverflow.com/questions/3934331/android-how-to-encrypt-a-string)

一定要检查所有的答案！第一个有缺陷并在第二个中修复..在第三个中再次修复..确保在实际开始之前检查整个事情！

这里还有一个帖子：[http ://www.androidsnippets.com/encryptdecrypt-strings](http://www.androidsnippets.com/encryptdecrypt-strings)

不过，这个是关于 AES 加密的。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:59:54.677

您可以通过包含 java 的库在 java 中加密数字，并尝试通过一些 java 加密程序来帮助您！！！！！！！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T13:33:45.017

您可以通过将数字的基数从十进制更改为二进制、八进制、六进制或您自己的基数来加密数字。

**原始编号：** 12345（十进制）

加密后的结果：

*   二进制：11000000111001
*   八进制：30071
*   六边形：3039

# java - GWT：从 html 字符串（.png，jpeg）生成图像

> ID：10720409
> 
> 赞同：1
> 
> 时间：2012-05-23T12:57:30.083
> 
> 标签：java, google-app-engine, gwt

我有一个生成 HTML 字符串的 GWT 应用程序。我想将此字符串转换为图像，例如

```
<html>
 <head> </head>    
 <body>
  <several HTML elements including <img too>
 </body>
</html> 
```

我尝试使用[Html2Image](http://code.google.com/p/java-html2image/)，当我在普通 Java 代码（使用主类）中本地测试它时，它可以工作

但是当我部署到 Google App Engine (GAE) 时，我得到：

```
 java.lang.NoClassDefFoundError: java.awt.geom.Dimension2D is a restricted class.
 Please see the Google App Engine developer's guide for more details.
        at com.google.apphosting.runtime.security.shared.stub.java.awt.geom.Dimension2D.<clinit>(Dimension2D.java)
        at gui.ava.html.image.generator.HtmlImageGenerator.<clinit>(HtmlImageGenerator.java:26)
        at co.za.cre8.web.lottoShop.server.NotificationServiceImpl.geneateImage(NotificationServiceImpl.java:237)
        at co.za.cre8.web.lottoShop.server.NotificationServiceImpl.sendMessage(NotificationServiceImpl.java:181) 
```

很清楚问题是什么，是否有替代库？

提前致谢。铅

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T01:43:53.713

[转换 API](https://developers.google.com/appengine/docs/python/conversion/)将为您处理此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:03:27.973

我不确定你是如何接收图像的。

如果它是作为文件系统上的文件，并且如果您可以为此目的使用简单的网关，那么使用[CutyCapt](http://cutycapt.sourceforge.net)很容易做到。

由于它是二进制文件，因此您可以保留网关或请求队列，并在请求到来时不断生成图像。

但是，如果您期待`BufferedImage`，这可能不是正确的事情。

谢谢。

# c# - 需要日期时间插入转换帮助

> ID：10720410
> 
> 赞同：-1
> 
> 时间：2012-05-23T12:57:32.393
> 
> 标签：c#, sql, sql-server, database, datetime

我需要插入格式为 dd/mm/yyyy 的日期，但不幸的是，目前我的 sql 正在从嵌入式插入中抛出以下错误

***将 varchar 数据类型转换为 datetime 数据类型导致值超出范围。该语句已终止。***

我相信这是因为数据库正在寻找错误的日期格式。谁能指出我如何让​​数据库查找 dd/mm/yyyy 的解决方案。我想避免转换代码中的每个日期，因为同时完成了数千个插入。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T13:00:57.617

> 我需要插入格式为 dd/mm/yyyy 的日期

不要*考虑*特定的格式。日期和时间本身*没有*格式。确保您的数据库字段是与日期/时间相关的类型，然后使用指定`DateTime`或`DateTimeOffset`值的参数化 SQL。这样*你的代码根本不处理字符串*。

错误正在谈论转换的事实`varchar`表明您将数据作为字符串提供。你不应该那样做。即使您的*输入*格式是文本，您也应该尽早将其转换为其自然数据类型（例如`DateTimeOffset`）——这将使您在整个代码库中处理数据变得更加容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T13:02:29.590

您的日期文字应始终采用安全、明确且与语言无关的格式。所以你的嵌入式 SQL 应该是：

```
INSERT dbo.table(column) VALUES('YYYYMMDD'); 
```

您可以在 C# 中使用`ToString()`.

但更好的是，您应该使用参数化语句，传递适当的日期时间参数，并且根本不用担心字符串格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T12:59:47.447

您可以使用[convert](http://msdn.microsoft.com/en-us/library/ms187928.aspx)并将 103 指定为样式。

```
convert(datetime, YourColumn, 103) 
```

或者您可以[设置日期格式](http://msdn.microsoft.com/en-us/library/ms189491.aspx)。

```
set dateformat dmy 
```

# php - 如何在 wordpress 用户帖子中添加 pdf 上传功能

> ID：10720413
> 
> 赞同：0
> 
> 时间：2012-05-23T12:57:38.740
> 
> 标签：php, wordpress, pdf

我想在用户帖子中添加 pdf 上传功能，我正在尝试使用 Quick Post Widget，但无法使用它上传 PDF。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:16:59.960

第一步是为用户提供一个表单元素，以便使用表单上的 enctype 进行交互。

```
<form action="yourpage.php" enctype="multipart/form-data" method="POST">
    <input type="file" name="upfile">
</form> 
```

重要的部分是 enctype="multipart/form-data" 属性。

这会将文件上传到临时位置。然后，您将需要使用 PHP 将文件移动到有意义的位置。在 PHP 中，您可以立即访问 $_FILES 全局变量。

以下教程应该有助于更好地解释它然后我可以 -> [http://www.tizag.com/phpT/fileupload.php](http://www.tizag.com/phpT/fileupload.php)

# node.js - node-postgres：如何执行“WHERE col IN（ ）“ 询问？

> ID：10720420
> 
> 赞同：101
> 
> 时间：2012-05-23T12:58:02.657
> 
> 标签：node.js, node-postgres

我正在尝试执行这样的查询：

```
SELECT * FROM table WHERE id IN (1,2,3,4) 
```

问题是我要过滤的 id 列表不是恒定的，每次执行时都需要不同。我还需要转义 id，因为它们可能来自不受信任的来源，尽管无论来源的可信度如何，我实际上都会转义查询中的任何内容。

node-postgres 似乎只适用于绑定参数`client.query('SELECT * FROM table WHERE id = $1', [ id ])`：如果我有已知数量的值（`client.query('SELECT * FROM table WHERE id IN ($1, $2, $3)', [ id1, id2, id3 ])`），这将起作用，但不能直接使用数组：`client.query('SELECT * FROM table WHERE id IN ($1)', [ arrayOfIds ])`，因为似乎没有对数组参数进行任何特殊处理。

根据数组中的项目数动态构建查询模板并将 ids 数组扩展为查询参数数组（在我的实际情况下，它还包含除 ids 列表之外的其他参数）似乎过于繁琐。在查询模板中硬编码 id 列表似乎也不可行，因为 node-postgres 不提供任何值转义方法。

这似乎是一个非常常见的用例，所以我的猜测是我实际上忽略了一些东西，而不是不可能将常见的`IN (values)`SQL 运算符与 node-postgres 一起使用。

如果有人以比我上面列出的更优雅的方式解决了这个问题，或者如果我真的错过了关于 node-postgres 的一些东西，请帮忙。

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-05-31T08:15:24.633

根据您对@ebohlman 的[回答](https://stackoverflow.com/a/10771206/112196)的评论，您似乎已经很接近了。您可以使用`WHERE id = ANY($1::int[])`. PostgreSQL 会将数组转换为参数转换为 in 的[类型](http://www.postgresql.org/docs/9.1/interactive/sql-syntax-lexical.html#SQL-SYNTAX-CONSTANTS-GENERIC)`$1::int[]`。所以这是一个对我有用的人为例子：

```
var ids = [1,3,4]; 

var q = client.query('SELECT Id FROM MyTable WHERE Id = ANY($1::int[])',[ids]);

q.on('row', function(row) {
  console.log(row);
})

// outputs: { id: 1 }
//          { id: 3 }
//          { id: 4 } 
```

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2012-07-27T16:10:58.173

我们之前在 github 问题列表中看到过这个问题。正确的方法是根据数组动态生成参数列表。像这样的东西：

```
var arr = [1, 2, "hello"];
var params = [];
for(var i = 1; i <= arr.length; i++) {
  params.push('$' + i);
}
var queryText = 'SELECT id FROM my_table WHERE something IN (' + params.join(',') + ')';
client.query(queryText, arr, function(err, cb) {
 ...
}); 
```

这样你就可以得到 postgres 参数化的转义。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2014-12-30T23:19:45.940

我发现的最好的解决方案是将该`ANY`函数与 Postgres 的数组强制结合使用。这使您可以将列与任意值数组匹配，就好像您已经写出一样`col IN (v1, v2, v3)`。这是[pero 的答案](https://stackoverflow.com/a/10829760/454967)中的方法，但在这里我表明 的性能`ANY`与`IN`.

### 询问

您的查询应如下所示：

```
SELECT * FROM table WHERE id = ANY($1::int[]) 
```

最后说的那一点`$1::int[]`可以更改以匹配您的“id”列的类型。例如，如果您的 ID 的类型是`uuid`，您将写入`$1::uuid[]`将参数强制转换为 UUID 数组。[有关 Postgres 数据类型的列表，请参见此处](http://www.postgresql.org/docs/devel/static/datatype.html)。

这比编写代码来构造查询字符串更简单，并且可以安全地防止 SQL 注入。

### 例子

使用 node-postgres，一个完整的 JavaScript 示例如下所示：

```
var pg = require('pg');

var client = new pg.Client('postgres://username:password@localhost/database');
client.connect(function(err) {
  if (err) {
    throw err;
  }

  var ids = [23, 65, 73, 99, 102];
  client.query(
    'SELECT * FROM table WHERE id = ANY($1::int[])',
    [ids],  // array of query arguments
    function(err, result) {
      console.log(result.rows);
    }
  );
}); 
```

### 表现

了解 SQL 查询性能的最佳方法之一是查看数据库如何处理它。示例表有大约 400 行和一个名为“id”类型的主键`text`。

```
EXPLAIN SELECT * FROM tests WHERE id = ANY('{"test-a", "test-b"}');
EXPLAIN SELECT * FROM tests WHERE id IN ('test-a', 'test-b'); 
```

在这两种情况下，Postgres 都报告了相同的查询计划：

```
Bitmap Heap Scan on tests  (cost=8.56..14.03 rows=2 width=79)
  Recheck Cond: (id = ANY ('{test-a,test-b}'::text[]))
  ->  Bitmap Index Scan on tests_pkey  (cost=0.00..8.56 rows=2 width=0)
        Index Cond: (id = ANY ('{test-a,test-b}'::text[])) 
```

根据表的大小、索引的位置和查询，您可能会看到不同的查询计划。但对于上述查询，`ANY`处理`IN`方式相同。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2015-04-11T08:52:58.043

使用[pg-promise](https://github.com/vitaly-t/pg-promise)，这可以通过[CSV 过滤器](https://github.com/vitaly-t/pg-promise#csv-filter)（逗号分隔值）很好地工作：

```
const values = [1, 2, 3, 4];

db.any('SELECT * FROM table WHERE id IN ($1:csv)', [values])
    .then(data => {
        console.log(data);
    })
    .catch(error => {
        console.log(error);
    }); 
```

为了解决对各种数据类型的担忧，`:csv`修饰符将数组序列化为 csv，同时根据其 JavaScript 类型将所有值转换为适当的 PostgreSQL 格式，甚至支持[自定义类型格式](https://github.com/vitaly-t/pg-promise#custom-type-formatting)。

如果你有像这样的混合类型值: `const values = [1, 'two', null, true]`，你仍然会得到正确转义的 SQL：

```
SELECT * FROM table WHERE id IN (1, 'two', null, true) 
```

**更新**

从 v7.5.1 开始，[pg-promise](https://github.com/vitaly-t/pg-promise)开始支持`:list`作为`:csv`过滤器的可互换别名：

```
db.any('SELECT * FROM table WHERE id IN ($1:list)', [values]) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-26T12:03:57.417

另一种可能的解决方案是使用如下`UNNEST`函数：

```
 var ids = [23, 65, 73, 99, 102];
 var strs = ['bar', 'tar', 'far']
 client.query(
   'SELECT * FROM table WHERE id IN(SELECT(UNNEST($1))',
    [ids],  // array of query arguments
    function(err, result) {
       console.log(result.rows);
    }
);
client.query(
   'SELECT * FROM table WHERE id IN(SELECT(UNNEST($1))',
    [strs],  // array of query arguments
    function(err, result) {
       console.log(result.rows);
    }
); 
```

我已经在存储过程中使用了它，它工作正常。相信它也应该适用于 node-pg 代码。

[您可以在此处](http://www.postgresql.org/docs/9.2/static/functions-array.html)阅读有关 UNNEST 功能的信息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-28T17:14:13.703

另一个可行的解决方案是例如 NODE JS 中的 REST API：

```
var name = req.body;//Body is a objetc that has properties for example provinces
var databaseRB = "DATABASENAME"
var conStringRB = "postgres://"+username+":"+password+"@"+host+"/"+databaseRB; 

var filter_query = "SELECT row_to_json(fc) FROM ( SELECT 'FeatureCollection' As type, array_to_json(array_agg(f)) As features FROM (SELECT 'Feature' As type, ST_AsGeoJSON(lg.geom)::json As geometry, row_to_json((parameters) As properties FROM radiobases As lg WHERE lg.parameter= ANY($1) )As f) As fc";

var client = new pg.Client(conStringRB);
client.connect();
var query = client.query(new Query(filter_query,[name.provinces]));
query.on("row", function (row, result) {
  result.addRow(row);
});
query.on("end", function (result) {
 var data = result.rows[0].row_to_json
   res.json({
     title: "Express API",
     jsonData: data
     });
}); 
```

请记住，可以使用任何类型的数组

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-11-30T22:55:12.147

总体思路：

```
var invals = [1,2,3,4], cols = [...fields];
var setvs = vs => vs.map(v=> '$'+ (values.push(v))  ).join();

var values = [];
var text = 'SELECT '+ setvs(cols) +' FROM table WHERE id IN (' + setvs(invals) +')'; 
```

# .net - 签名和电子邮件 - 找不到原始签名者

> ID：10720423
> 
> 赞同：0
> 
> 时间：2012-05-23T12:58:19.307
> 
> 标签：.net, x509certificate

我有以下代码，但是当我运行代码时收到错误**System.Security.Cryptography.CryptographicException：找不到原始签名者。**，为什么会出现这种情况？是因为我的证书设置不正确吗？

```
 public byte[] GetSignature(string message, X509Certificate2 signingCertificate,
                               X509Certificate2 encryptionCertificate)
    {
        byte[] messageBytes = Encoding.ASCII.GetBytes(message);

        SignedCms signedCms = new SignedCms(new ContentInfo(messageBytes), true);

        CmsSigner cmsSigner = new CmsSigner(SubjectIdentifierType.IssuerAndSerialNumber, signingCertificate);
        cmsSigner.IncludeOption = X509IncludeOption.WholeChain;

        if (encryptionCertificate != null)
        {
            cmsSigner.Certificates.Add(encryptionCertificate);
        }

        Pkcs9SigningTime signingTime = new Pkcs9SigningTime();
        cmsSigner.SignedAttributes.Add(signingTime);

        signedCms.ComputeSignature(cmsSigner, false);

        return signedCms.Encode();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T06:51:18.830

您是否尝试过删除此行：

```
cmsSigner.IncludeOption = X509IncludeOption.WholeChain; 
```

我遇到了与您描述的相同的问题，我也使用了该`WholeChain`选项，省略它为我解决了问题。我希望它会帮助其他人，即使这个问题是 8 个月前发布的。

# android - Android 菜单组可勾选

> ID：10720427
> 
> 赞同：0
> 
> 时间：2012-05-23T12:58:34.373
> 
> 标签：android, menu, menuitem

我目前正在为 API 10 及更高版本编程。我创建了一个菜单并希望实现方法 Menu.setGroupCheckable(id, checkable, Exclusive)。下面是我的代码。从文档中，我期望对组中的选定项目和其他项目进行复选标记被禁用。然而，这种情况并非如此。

```
 @Override
public boolean onCreateOptionsMenu(Menu menu) {
     super.onCreateOptionsMenu(menu);
     menu.add(0, 1, 0, "I1").setIcon(R.drawable.ic_launcher);
     menu.add(0, 2, 1, "I2");
     menu.add(0,3,2,"I3");

     menu.add(1, 4, 3, "I4");
     menu.add(1, 5, 4, "I5");
     menu.add(1,6,5,"I6");

    menu.setGroupCheckable(1, true, true);

     return true;
} 
```

* * *

Android 文档链接：http: [//developer.android.com/reference/android/view/Menu.html](http://developer.android.com/reference/android/view/Menu.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:02:03.960

[Android 菜单：同一菜单中的两个可单选组](https://stackoverflow.com/questions/6698954/android-menu-two-single-checkable-groups-in-the-same-menu)

[http://www.brighthub.com/mobile/google-android/articles/28673.aspx](http://www.brighthub.com/mobile/google-android/articles/28673.aspx)

[http://www.mysamplecode.com/2011/07/android-options-menu-submenu-group.html](http://www.mysamplecode.com/2011/07/android-options-menu-submenu-group.html)

[http://www.itcsolutions.eu/2011/09/26/android-tutorial-how-to-add-a-menu-programmatic-vs-declarative-solution/](http://www.itcsolutions.eu/2011/09/26/android-tutorial-how-to-add-a-menu-programmatic-vs-declarative-solution/)

这些链接可以帮助你！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-21T07:35:30.373

使用更新的库

compile 'com.android.support:appcompat-v7:23.1.0' compile 'com.android.support:design:23.1.0'

# npm - NPM 还原下载包中的更改

> ID：10720432
> 
> 赞同：1
> 
> 时间：2012-05-23T12:58:51.690
> 
> 标签：npm

我在我的 Mac 中下载了一个 npm 包，并对其中一个 html 文件（index.html）进行了更改，但我现在想恢复到原始初始版本，npm 中是否有执行此操作的命令？

还是我必须再次加载包裹？

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T08:35:07.627

只需再次安装软件包：

```
npm install PACKAGE_NAME 
```

# java - 如何从 Java 中动态创建的 JTree 生成 XML 文件

> ID：10720448
> 
> 赞同：0
> 
> 时间：2012-05-23T12:59:39.990
> 
> 标签：java, xml, swing, jtree

帮助我编写用于生成 xml 文件的代码，该文件`JTree`是通过 java 代码动态创建的。如何从中生成 XML 文件？请解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:13:46.417

由于 TreeNode 可以序列化，因此您可以使用 xstream 来执行此操作。

见[http://www.java-forums.org/xml/25994-how-can-i-create-xml-file-jtree-need-ur-valueable-suggestions.html](http://www.java-forums.org/xml/25994-how-can-i-create-xml-file-jtree-need-ur-valuable-suggestions.html)

IE：

```
System.out.println(   new XStream().toXml(jtree)    ); 
```

# java - Java XPath：使用默认命名空间 xmlns 进行查询

> ID：10720452
> 
> 赞同：8
> 
> 时间：2012-05-23T12:59:43.303
> 
> 标签：java, xml, xpath, namespaces, xml-namespaces

我想对此文件进行 XPath 查询（显示摘录）：

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- MetaDataAPI generated on: Friday, May 25, 2007 3:26:31 PM CEST -->
<ModelClass xmlns="http://xml.sap.com/2002/10/metamodel/webdynpro" xmlns:IDX="urn:sap.com:WebDynpro.ModelClass:2.0">
    <ModelClass.Parent>
        <Core.Reference package="com.test.mypackage" name="ModelName" type="Model"/> 
```

这是我正在使用的代码片段：

```
DocumentBuilderFactory domFactory = DocumentBuilderFactory.newInstance();
DocumentBuilder builder = domFactory.newDocumentBuilder();
Document document = builder.parse(new File(testFile));
XPathFactory factory = XPathFactory.newInstance();
XPath xpath = factory.newXPath();
xpath.setNamespaceContext( new NamespaceContext() {
    public String getNamespaceURI(String prefix) {
...

String result = xpath.evaluate(xpathQueryString, document);
System.out.println(result); 
```

我面临的问题是，在 XPath 查询中引用默认命名空间时，不会调用 getNamespaceURI 方法来解决它。例如，此查询不提取任何内容：

`//xmlns:ModelClass.Parent/xmlns:Core.Reference[@type=\"Model\"]/@package`

现在我尝试通过替换`xmlns`为假前缀来“欺骗”解析器`d`，然后`getNamespaceURI`相应地编写方法（以便在遇到`http://xml.sap.com/2002/10/metamodel/webdynpro`时返回`d`）。在这种情况下，`getNamespaceURI`会调用 ，但 XPath 表达式求值的结果始终是空字符串。

如果我从文件和 XPath 查询表达式中去除名称空间，我可以得到我想要的字符串 (com.test.mypackage)。

有没有办法让默认命名空间正常工作？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-23T16:19:10.907

XPath 1.0 规范要求“没有前缀意味着没有命名空间”。因此，为 XPath 1.0 设计的 JAXP 阻止您将“空前缀”绑定到某个非空名称空间是完全正确的。

XPath 2.0 允许您在 XPath 表达式中为非限定名称声明一个默认名称空间，但要利用它，您需要一个利用此功能的 API（例如 Saxon 的 s9api）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-23T13:26:05.067

在您的`Namespace`上下文中，将您选择的前缀（例如`df`）绑定到文档中的命名空间 URI

```
xpath.setNamespaceContext( new NamespaceContext() {
    public String getNamespaceURI(String prefix) {
      switch (prefix) {
        case "df": return "http://xml.sap.com/2002/10/metamodel/webdynpro";
        ...
       }
    }); 
```

然后在路径表达式中使用该前缀来限定元素名称，例如`/df:ModelClass/df:ModelClass.Parent/df:Core.Reference[@type = 'Model']/@package`.

# c - do { } while(0) vs. if (1) { } 在宏中

> ID：10720465
> 
> 赞同：5
> 
> 时间：2012-05-23T13:00:38.177
> 
> 标签：c, c-preprocessor

> **可能重复：**
> [为什么在 C/C++ 宏中有时会出现无意义的 do/while 和 if/else 语句？](https://stackoverflow.com/questions/154136/why-are-there-sometimes-meaningless-do-while-and-if-else-statements-in-c-c-mac)

当需要在预处理器宏中执行多条语句时，通常这样写

```
#define X(a) do { f1(a); f2(a); } while(0) 
```

因此，当在表达式中使用此宏时，例如：

```
if (...)
    X(a); 
```

它不会被搞砸的。

问题是：无论我在哪里看到这样的表达，它总是`do { ... } while(0);`。有什么理由更喜欢这样的概念（在我看来更清楚）`if (1) { ... }`？还是我的观察错了，它们同样受欢迎？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T13:04:47.240

不，你没有错。

其实有一个很好的理由：

```
#define my_code if (1) { ... }

if (1)
    my_code; 
```

问题在于`;`！它不应该在那里......这看起来很奇怪，而且不符合语言的精神。您可以选择将代码`;`连续扩展为两个，也可以选择看起来*非 c-ish*的代码:)

另一方面，`do-while`建筑没有这个问题。

* * *

另外，正如其他人提到的，还有一个`else`问题：

```
if (1)
    my_code;
else { ... } 
```

忽略`;`问题，该`else`块现在属于错误的如果。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-23T13:03:43.000

`if``do/while`只有有`else`分支才能安全。例如：

```
#define X(a) if(1) { f1(a); f2(a); } else{} 
```

与以下一样安全：

```
#define X(a) do { f1(a); f2(a); } while(0) 
```

这样用户就不能这样做：

```
X(...) else ...; 
```

一个区别是，当使用`do/while`它时，最后需要 a `;`，`if/else`而不需要。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-23T13:04:55.497

考虑一下：

```
if(foo)
    X(a);
else
    whatever(); 
```

这将扩展为：

```
if(foo)
    if(1) { ... }
else
    whatever(); 
```

这很糟糕，因为现在 else 属于错误的 if。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-23T13:04:09.307

使用`do... while`允许您`break`在必要时退出。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-23T13:04:20.967

当您使用`#define X(a) do { ... } while(0)`表单时，它会强制您放在`;`语句的末尾`X(1)`。

# cron - Ubuntu 中的 Cron 作业

> ID：10720466
> 
> 赞同：1
> 
> 时间：2012-05-23T13:00:38.960
> 
> 标签：cron, crontab

如何在 ubuntu 中以启动 python 脚本的方式运行 cron 作业？

请用一个小例子来解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T13:07:33.057

您可以设置一条简单的线从 x 运行到 x 时间：

**例如，**

```
0,10,20,30,40,50 * * * * ~/py/my_python_script.py 
```

*每 10 分钟运行一次*

**逐步使用 Vim 作为选定的编辑器**

1.  在您的终端上，运行：`sudo crontab -e`

2.  然后，选择你喜欢的编辑器（例如，vim）

3.  键入`:i`并点击`enter`以插入新行

4.  过去或编写 cronjob 行`0,10,20,30,40,50 * * * * ~/py/my_python_script.py`并点击`enter`然后`return`退出该行

5.  输入`:w`并点击`enter`，写入文件

6.  输入`:q`并点击`enter`退出

**星号说明：**

```
minute (0-59), hour (0-23, 0 = midnight), day (1-31), month (1-12), weekday (0-6, 0 = Sunday), command 
```

# 深入：

要阅读有关其工作原理的更详细过程：

[CronHowto](https://help.ubuntu.com/community/CronHowto)

[VIM 命令备忘单](http://bullium.com/support/vim.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-21T10:29:13.103

您可以在 Ubuntu 中运行 Crontab。只需将以下脚本复制并粘贴到终端中即可。

```
crontab -e 
```

在那里你可以编写命令来运行你的 python 脚本，它将在特定的时间间隔内执行程序。

```
* * * * *   python   </path/to/the/file> 
```

您可以参考[链接](https://crontab.guru/)了解时间间隔

您可以在此处查看日志文件

```
tail -f /var/log/syslog 
```

# android - 收到的 Intent 不包含 Extras

> ID：10720470
> 
> 赞同：0
> 
> 时间：2012-05-23T13:00:56.697
> 
> 标签：android, android-intent

当我试图将数据传递给另一个活动时，由于某种原因它会丢失。我的发送活动如下所示：

```
protected OnItemClickListener onArtistItemClick = new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> adapter, View arg1, int cursor, long arg3) {
            Intent artistCardIntent = new Intent(getBaseContext(),  ArtistCardActivity.class);
            Artist artist = (Artist) adapter.getItemAtPosition(cursor);
            artistCardIntent.putExtra("artist_id", artist.getId());
            artistCardIntent.putExtra("tt", "tt");
            startActivity(artistCardIntent);
        };
    }; 
```

在调试时我可以看到artistCardIntent 被填充，但是在接收活动中我不包含任何额外的信息：

```
public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.artist_card);
            Intent i = getIntent(); 
```

我究竟做错了什么？

PS 这两个活动都扩展了 FragmentActivity。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:31:59.850

要接收数据，请使用 getextras() 方法。找到以下代码。我认为它可以帮助你

```
 Intent i = getIntent();
       Bundle b=i.getExtras();
       if(b!=null)
      {
      String artist= ("artist_id");
          } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:06:13.070

将这些值转换为字符串并尝试它，它会工作

```
startActivity(new Intent(Home.this,galmenu.class).putExtra("page","home"));

     Intent myIntent = getIntent(); 
     test=myIntent.getExtras().getString("page"); 
```

它运行良好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T13:08:20.500

我没有看到你得到额外的信息。

查看此答案[如何从 Android 上的意图中获取额外数据？](https://stackoverflow.com/questions/4233873/how-to-get-extra-data-from-intent-in-android)

# sparql - 找出正确的 SPARQL 查询

> ID：10720471
> 
> 赞同：1
> 
> 时间：2012-05-23T13:00:56.993
> 
> 标签：sparql

我试图以某种方式从资源链接中找到所有 owl:sameAs 属性。一个简单的查询就像

```
SELECT ?x WHERE {
  <http://dbpedia.org/resource/Tetris>  owl:sameAs ?x
} 
```

但是，我也想获得提到的 Yago 链接，就像 owl:sameAs 一样。任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T15:06:18.653

您可以像这样获取 YAGO 链接：

```
SELECT ?x WHERE {
  ?x owl:sameAs <http://dbpedia.org/resource/Tetris>
} 
```

或者在一个查询中同时获取“传入”和“传出”链接：

```
SELECT ?x WHERE {
  { <http://dbpedia.org/resource/Tetris>  owl:sameAs ?x }
  UNION
  { ?x owl:sameAs <http://dbpedia.org/resource/Tetris> }
} 
```

# php - Magento 产品订购报告在升级到 1.6.2.0 后返回“未找到此期间的记录”

> ID：10720474
> 
> 赞同：1
> 
> 时间：2012-05-23T13:01:12.317
> 
> 标签：php, javascript, mysql, magento-1.6

大约三个月前，我们将我们的 magento 1.3.3 网站升级到了 1.6.2.0 版本。自升级以来，我们的产品订购报告在升级日期之前没有显示任何历史记录，但在升级日期之后显示所有订单就好了。

我已经在诸如 magentocommerce、Stack Overflow、Google 等地方查看了有关该主题的所有类型的帖子......我所有的搜索都导致人们收到 404 错误（我没有遇到）或正在经历我的人同样的问题，但似乎没有人知道如何在实时站点上解决它。我花了超过 3 天和无数小时来寻找解决我的实时网站报告问题的答案，但没有运气。

只要站点处于开发阶段并且尚未上线，就有许多修复，例如截断一堆数据库表，但是一旦站点上线，似乎没有人知道如何解决问题

我知道在大多数情况下，EAV 表在升级过程中被淘汰了，这可能是问题的一部分。

有谁知道产品订购报告在 1.3.3 版中使用的数据库表，以及它在 1.6.2.0 版中使用的数据库表是否相同。如果它们不同，那么报告中使用了哪些表，现在使用了哪些表？

或者如果您知道如何在现场网站上解决此问题或有一些建议，请不要犹豫，我需要您的帮助

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T11:44:36.357

该问题很可能来自`sales_flat_order_item`用于生成此报告的表。

我有类似的问题。使用 phpmyadmin 修复了我的问题。

浏览表格，如果您发现为`store_id`空，请编辑并`store_id`为您的商店选择正确的表格。

我运行以下查询来更新所有订单项：

```
UPDATE `sales_flat_order_item` SET `store_id`=1; 
```

（这是假设您只有 1 个商店并且其商店 id = 1。另外，请在运行前进行备份。

# encoding - 生成用户唯一的 6 字符确认码的算法？

> ID：10720475
> 
> 赞同：1
> 
> 时间：2012-05-23T13:01:15.370
> 
> 标签：encoding, hash, uniqueidentifier

我希望能够创建一个算法来生成一个 6 个字符的确认代码（例如 A1JU2Z），这对于给定的（用户、代码）对来说是唯一的。原因是，我想将代码保留为 6 个字符，但使用一组修剪过的字母数字（以避免与 1 和 I 等混淆）仅允许在发生冲突之前约 3 亿个代码。当然，我可能永远不需要 3 亿个代码，但如果我这样做了，回去修复这个问题将是一个巨大的痛苦。

那么有没有办法利用用户......说他们的用户名，通用唯一代码，这样如果同一个用户想要生成另一个代码，它保证它对他们来说是唯一的？（这当然是假设单个用户不会生成超过 300 个工厂代码）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:32:01.443

如果 ID 仅对当前用户唯一，则可以随机生成 ID 的每个字符。只要不期望用户生成大量此类 ID，您就有合理的机会不会多次生成相同的 ID（您需要进行一些数学运算以获得预期碰撞机会的确切数字，因为生成的 ID 数量增长）。

如果您*必须*不惜一切代价避免发生冲突，您需要保留所有先前生成的 ID 并为新的 ID 进行比较，或者保留生成的 ID 的计数（这需要一个方案，其中 ID 生成是基于计数，但也是独一无二的——一个非常简单的例子是`{ID=count; ++count;}`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:10:39.073

我认为您可以使用这样的简单密码生成器：[http ://www.webtoolkit.info/php-random-password-generator.html](http://www.webtoolkit.info/php-random-password-generator.html)

结合检查算法以确保它尚未被使用。

```
$pass=generate_password();
$found=find_password($pass);
while($found){
    $pass=generate_password();
    $found=find_password($pass);
}
save_password($user,$code,$pass); 
```

generate_password() 是链接中引用的函数。find_password() 是一个你必须编写的函数来检查数据库中已经生成的代码。save_password() 是您必须编写的一个函数，用于将生成的代码存储在数据库中。

代码在 PHP 中，但逻辑在这里。链接中的密码生成器很容易理解，你可以得到 6 个字符长，有你想要的字符规则。

# javascript - 如何将复杂的javascript对象转换为字符串并返回

> ID：10720477
> 
> 赞同：2
> 
> 时间：2012-05-23T13:01:25.003
> 
> 标签：javascript, string, object, serialization

我有一个包含数组的对象，该数组由其他数组组成，它还包含方法。我面临的问题是由于多维数组和方法，我不能使用 JSon。

我想将其转换为字符串的原因是存储到 Iphone 的 localStorage 中。

您只能在其中存储文本，我希望有一种方法可以将有关用户的复杂对象存储为字符串，然后能够再次反序列化它。有没有办法做到这一点。我不太了解javascript，无法编写自己的api。这是我现在开始尝试研究的选项:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:03:20.173

将其序列化为 JSON。您可以序列化/反序列化复杂的对象和数组。

您无法序列化方法（代码）。

对于本地存储持久性，我会推荐[Lawnchair](http://brian.io/lawnchair/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:09:55.243

无需存储在 localStorage 中，您可以在应用程序的任何位置使用全局数组 尝试一次

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T13:11:37.470

通常可以使用序列化方法`myfunc.toString()`

因此，您*可以*在和识别方法中使用`replacer`函数，并调用它们，它们会在解析时以某种方式识别它们并将它们转换回一流的函数。`JSON.stringify()``JSON.parse()``.toString()`

但是 - 请注意，重构的函数将无法访问原始对象的范围，即私有变量或方法等。

例如

```
function A() {
    var foo = 'bar';
    this.test = function test() { console.log(foo) };
};

var b = new A();
var f = b.test.toString();  // the text of the method
b.test2 = new Function(f);

b.test2();
> undefined 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T08:03:02.033

好吧，有一种方法可以将带有函数的对象转换为字符串和虎钳诗句。看看这个插件：

[http://www.eslinstructor.net/jsonfn/](http://www.eslinstructor.net/jsonfn/)

祝你好运，

-瓦迪姆

# iphone - 如何解决错误““_CGAffineTransformMakeRotation”，引用自：”？

> ID：10720478
> 
> 赞同：0
> 
> 时间：2012-05-23T13:01:25.837
> 
> 标签：iphone, objective-c, xcode

当我使用以下代码时，我收到错误消息

> ""_CGAffineTransformMakeRotation"，引用自："

```
 companyNameLbl.transform=CGAffineTransformMakeRotation(30); 
```

谁能告诉我这个错误的原因是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:04:48.957

如果我没记错的话，这些转换需要您链接到 CoreGraphics 框架。

请参阅[如何在 Xcode 4 中“添加现有框架”？](https://stackoverflow.com/questions/3352664/how-to-add-existing-frameworks-in-xcode-4)如果您在 XCode 中添加新框架时遇到困难。

# php - 服务器变量在其他页面中无法识别

> ID：10720484
> 
> 赞同：0
> 
> 时间：2012-05-23T13:01:38.760
> 
> 标签：php, apache, server-variables

我在 login.php 文件中有这段代码：

```
 //save user data 
  $token=$user->getId().'_'.hash('sha256',$user->getUsername().microtime());
  $name='fsusr_'.$user->getUsername();

  //set session and server variables
  $_SESSION[$name]=$token;   //set session variable
  $_SERVER[$name]=$token;    //set server variable 
```

在 page_init.php 中，在登录过程之后，我想检索服务器和会话变量，以便我可以比较它们，并决定下一步做什么：

我在第 8 行有这个：

```
 echo $_SERVER[$name]; 
```

事实上，问题在于其他页面在这一行向我发送了这个错误：

未定义的索引：fsusr_smoootk in ... 第 8 行。

当我在 login.php 中创建 print_r($_SERVER) 时，我看到包含 $_SERVER[$name] 变量的数组...但是在另一页中执行相同操作时，我发现它不再包含该变量。

我知道它没有将服务器变量保存到其他页面，但我不知道为什么？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T13:04:58.973

$_SERVER 变量用于服务器信息。您应该将自己的变量分配给 $_SESSION。

[http://us.php.net/manual/en/reserved.variables.server.php](http://us.php.net/manual/en/reserved.variables.server.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T13:04:33.513

试试这个`$_SESSION['name'] = $token`

您正在会话中保存数据并回显 $_SERVER... 好人！

# iphone - 当 textLabel 长度超过 20 个字符时调整 UITableView 字体大小？

> ID：10720485
> 
> 赞同：-1
> 
> 时间：2012-05-23T13:01:41.487
> 
> 标签：iphone, objective-c, xcode, uitableview

我想调整我的 UITableView 单元格的字体。如果它们包含太长的标题，则 textLabel 会被拆分。

那么，例如，当标签长度超过 20 个字符时，如何调整字体大小？我想：

```
NSString *cellText = cell.textLabel.text;
if (cellText.length > 20){
    cellText = [UIFont systemFontOfSize:11.0];
} 
```

但是有问题，因为它崩溃了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:08:55.367

`cellText`是 an`NSString`并且您将 a 设置`UIFont`为`NSString`指针，您应该将 Font 设置为`textLabel`，如下所示：

```
NSString *cellText = cell.textLabel.text;
if (cellText.length > 20){
    cell.textLabel.font = [UIFont systemFontOfSize:11.0];
} 
```

如果不是问题，请同时发布崩溃日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:44:50.753

```
NSString *cellText = cell.textLabel.text;    

UILabel *cellLabel = [[UILabel alloc] initWithFrame:CGRectMake(5, 2, 300, 20)];
cellLabel.text =cellText;
cellLabel.adjustsFontSizeToFitWidth = NO;
cellLabel.numberOfLines = 0;
[cellLabel setBackgroundColor:[UIColor clearColor]];
[cellLabel setFont:[UIFont fontWithName:@"Arial" size:14.0f]];
cellLabel.textAlignment = UITextAlignmentLeft;       
[cell.contentView addSubview:cellLabel];
[cellLabel release]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T13:12:55.417

你不需要这个代码！

在检查员中：

*   设置字体大小
*   设置最小字体大小
*   然后检查“适合”

# sql - 将记录添加到表中时记录的日期/时间戳？

> ID：10720486
> 
> 赞同：38
> 
> 时间：2012-05-23T13:01:45.150
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

有谁知道这样的功能，当用户向数据库表中添加记录时，我可以使用它在列中添加自动日期和时间戳？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-05-23T13:05:37.523

您可以在表上创建一个不可为空的 DATETIME 列，并在其上创建一个 DEFAULT 约束以在添加行时自动填充。

例如

```
CREATE TABLE Example
(
SomeField INTEGER,
DateCreated DATETIME NOT NULL DEFAULT(GETDATE())
) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-23T13:05:34.820

您可以在此列上设置默认约束，将默认 getdate() 作为值。

例子：

```
alter table dbo.TABLE 
add constraint df_TABLE_DATE default getdate() for DATE_COLUMN 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-23T13:07:00.310

您可以使用`datetime`字段并将其默认值设置为`GetDate()`.

```
CREATE TABLE [dbo].[Test](
    [TimeStamp] [datetime] NOT NULL CONSTRAINT [DF_Test_TimeStamp] DEFAULT (GetDate()),
    [Foo] [varchar](50) NOT NULL
) ON [PRIMARY] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-23T13:06:57.677

您可以将`GetDate()`函数作为参数传递给插入查询，例如

```
Insert into table (col1,CreatedOn) values (value1,Getdate()) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T13:03:49.190

如果要添加的时间戳是固定的或依赖于另一列，则可以在触发器或计算列上使用[DateAdd](http://msdn.microsoft.com/en-us/library/ms186819.aspx)

# php - 如何将包含json数据的txt文件上传到php服务器并将数据保存到mysql？

> ID：10720488
> 
> 赞同：-1
> 
> 时间：2012-05-23T13:01:47.693
> 
> 标签：php, android, mysql, json

我正在制作一个android应用程序来备份短信并将包含json数据的文件备份文件上传到php服务器，以进一步将数据保存到mysql。我已经在 sd 卡上备份了 .txt 文件中的数据，但仍然无法将文件上传到服务器，然后将数据插入 mysql。有人可以在这方面帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:07:37.770

[带有Android 客户端](http://www.androidsnippets.com/executing-a-http-post-request-with-httpclient "安卓客户端")或服务的AsyncTask ，但谁愿意向您发送他们所有的短信？

# yii - 在本地主机上安装优惠券的问题

> ID：10720495
> 
> 赞同：3
> 
> 时间：2012-05-23T13:02:13.607
> 
> 标签：yii

我正在尝试在我的本地主机（xampp）上安装优惠券，但我收到一条错误消息：

严格标准：不应静态调用非静态方法 UFactory::getModuleAlias()，假设 $this 来自第 254 行 C:\xampp\htdocs\couponic\framework\uniprogy\framework\worklets\UWorkletConstructor.php 中的不兼容上下文

这是错误之一，但它们都来自同一函数 (getModuleAlias) 上的同一类型。

我已经将受保护/配置/初始文件夹重命名为受保护/配置/公共，当我使用 url 正确的 url (localhost/couponic/install) 访问时，我得到了这些错误。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-30T01:01:26.917

这里的问题是您可能在 localhost php 5.4 中安装并且优惠券不支持 php 5.4，要绕过此问题，您必须更换

```
public function getModuleAlias($module) 
```

和

```
static public function getModuleAlias($module) 
```

但是会出现更多问题，直到 uniprogy 使脚本在 php 5.4 上运行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T05:49:23.620

禁用 php.ini 中的严格错误：error_reporting = E_ALL

现在你可能有：E_ALL & E_STRICT

所以你需要丢失 E_STRICT 部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-01T23:21:15.170

我已经有了“E_ALL”，但它不起作用。我切换到“E_ERROR”，就成功了。

`error_reporting = E_ERROR`

E_ALL “包括 PHP 6.0.0 的 E_STRICT”，但我们还没有完全做到。

# c# - 如何使用 C# 更改 Excel 单元格的文本格式？

> ID：10720498
> 
> 赞同：6
> 
> 时间：2012-05-23T13:02:23.030
> 
> 标签：c#, excel

我目前正在编写一个应用程序 (C#) 来根据其他报告在 excel 文件中生成报告。

问题是，一旦从某个工作表中获取一个数字并复制到另一个工作表，目标单元格的格式不正确，并且数字无法正确显示。

```
E.g : 
Number from source : 14.34 
Number on destination : 14.345661 
```

如何格式化目标单元格以强制数字格式与源单元格相同。

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T13:08:21.513

excel中给定单元格/范围的格式可以通过代码设置。

```
public void SetCustomFormat(string format, int r, int c)
{
    ((Excel.Range)xlWks.Cells[r, c]).NumberFormat = format;
} 
```

在您的具体情况下，我相信您需要使用格式“#.00”或“#.##”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T13:05:21.603

这是我使用的一些代码的片段，向您展示格式化单元格的一般模式。显然，声明了一些变量，但它应该告诉你你需要什么。

```
sheet.get_Range("A" + CurrentRowIndex.ToString(), ColPrefix + CurrentRowIndex.ToString()).Font.Bold = true;
sheet.get_Range("A" + CurrentRowIndex.ToString(), ColPrefix + CurrentRowIndex.ToString()).Interior.Color = Color.Silver.ToArgb();
sheet.get_Range("A" + CurrentRowIndex.ToString(), ColPrefix + CurrentRowIndex.ToString()).BorderAround(Microsoft.Office.Interop.Excel.XlLineStyle.xlContinuous, Microsoft.Office.Interop.Excel.XlBorderWeight.xlThin, Microsoft.Office.Interop.Excel.XlColorIndex.xlColorIndexAutomatic, null);
sheet.get_Range("A" + CompetencyStartRowIndex.ToString(), ColPrefix + CurrentRowIndex.ToString()).BorderAround(Microsoft.Office.Interop.Excel.XlLineStyle.xlContinuous, Microsoft.Office.Interop.Excel.XlBorderWeight.xlThin, Microsoft.Office.Interop.Excel.XlColorIndex.xlColorIndexAutomatic, null); 
```

第一行，假设 CurrentRowIndex = 1 和 ColPrefix = "B"，用结果值替换变量将转换为

```
sheet.get_Range("A1", "B1").Font.Bold = true; 
```

无论如何，您要设置数字格式。（未来..）

```
sheet.Cells[Row, Column].NumberFormat = "0.00" 
```

# c++ - C++：没有虚拟性的继承

> ID：10720504
> 
> 赞同：2
> 
> 时间：2012-05-23T13:02:46.437
> 
> 标签：c++, polymorphism, virtual

我想知道我目前所做的是否是 C++ 的耻辱，或者是否可以。

我为计算目的编写代码。对于某些类，我使用具有虚拟性/多态性的普通继承方案。但是我需要一些类来进行密集计算，并且避免由于虚拟性而产生的开销会很棒。

基本上，我想在没有指针或重定向的情况下使用这些类：继承只是为了避免大量复制/粘贴代码（基类的文件大小为 60Ko（这是很多代码））。所以没有虚函数，也没有虚析构函数。

我想知道从 C++ 的角度来看它是否完全可以，或者它是否会产生副作用（相关类将在程序中大量使用）。

非常感谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T13:10:05.377

在 C++ 中使用多态性既不好也不坏。多态性是有目的的，缺乏多态性也是如此。使用继承而不单独使用多态性并没有错。

由于多态性是有目的的，而缺乏多态性也是有目的的，因此您应该在设计类时牢记这些目的。例如，如果您需要将行为运行时绑定到类实例，则需要多态性。

话虽如此，选择一种方法而不是另一种方法有正确和错误的原因。如果您严格地设计没有多态性的类，因为您想“避免开销”，这可能是一个错误的原因。这是一个过早优化的例子，只要您在没有分析您的代码并证明多态性是一个实际问题的情况下进行设计更改或决策。

首先按架构要求设计。如果设计被证明是非性能的，稍后返回并重构。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T13:16:02.633

我会改写这个问题：

> 如果您避开多态性，继承会带来什么组合无法实现？

如果答案是否定的，我怀疑，那么也许一开始就不需要继承。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-23T13:06:21.717

不使用`virtual`成员/继承是完全可以的。C++ 旨在娱乐广大观众，它不会将任何人限制在特定的范式中。

您可以使用 C++ 编写过程、通用、面向对象或它们的任何组合。只是尽力做到最好。

> 我目前正在做的是 C++ 的耻辱，或者如果它还可以。

一点也不。
相反，如果您不需要 OO 设计并且仍然仅仅为了它而强加它，那将是一种耻辱。

> 基本上，我想在没有指针或重定向的情况下使用这些类......

事实上，你正朝着正确的方向前进。使用指针、数组和这样的低级特性更适合高级编程。改用 like `std::shared_ptr`、`std::vector`和 标准库容器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T13:11:31.373

基本上，您正在**使用没有多态性的继承**。没关系。

面向对象编程具有多态性以外的其他特性。如果您可以从中受益，请使用它们。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-23T13:41:49.983

一般来说，使用继承来*重用*代码并不是一个好主意。继承是由旨在使用您的基类的代码使用的*。*我会建议一种不同的方法来解决这个问题。考虑一些替代方案，例如组合，更改要在自由函数而不是基类中实现的功能，或静态多态性（通过使用模板）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-23T13:22:04.773

[在您能够证明之前，这不是性能问题](https://stackoverflow.com/a/449832/419450)。

查看该答案和“最快的代表”文章。

# django - 将数据传递给中间件

> ID：10720505
> 
> 赞同：1
> 
> 时间：2012-05-23T13:02:50.490
> 
> 标签：django, django-middleware

我有为我做一些工作的中间件。是否可以将一些关于将要呈现的模板的数据传递给这个中间件？

让我们假设我有网址：

```
url(r'^some/$', direct_to_template, {'template': 'some.html'}, name='community', kwargs={'value': 'value'}), 
```

我想将价值传递给中间件。是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:24:27.127

是的，您可以查看[https://docs.djangoproject.com/en/1.4/topics/http/middleware/#process-view中的视图 kwargs](https://docs.djangoproject.com/en/1.4/topics/http/middleware/#process-view)

# c# - 有没有办法阻止 .NET 中的事件流？

> ID：10720508
> 
> 赞同：1
> 
> 时间：2012-05-23T13:03:07.583
> 
> 标签：c#, .net, vb.net, winforms, events

这是我一直在问自己的一个问题。

给出一定的事件流，我可以在处理其中一个事件时**停止下一个**事件吗？

例如，当折叠在**树视图**（winform）中选择了哪个子节点时，会像这样引发事件：

*   之前折叠
*   选择前
*   后选择
*   折叠后

我可以通过使用类成员来阻止它们，但我想知道是否有一个内置函数或只是另一种方式（一种更优雅的方式）来实现这一点，直接作用于事件队列。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:09:43.027

不容易，不。事件触发的顺序由 TreeView 控件类控制，并且没有内置的方法来阻止事件触发。但是你有几个选择：

1.  创建您自己的继承自基类的 TreeView 类，然后添加一个`bool`属性以防止处理事件。然后你可以`BeforeCollapse`在调用之前覆盖等来检查布尔值`base.BeforeCollapse`。
2.  只需创建一个`bool`标志，并检查每个事件中的标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:06:42.510

*不，对于那种*类型的事件（您要求 TreeView），没有办法做到这一点。

例如，可以通过内置机制管理[KeyEventArgs.Handled 。](http://msdn.microsoft.com/en-us/library/system.windows.forms.keyeventargs.handled.aspx)

您可以使用一些实例（布尔？）值来管理流程，

或者您可以*取消订阅*您不希望收到更多的事件，但在再次订阅之后。听起来很粗糙的解决方案，但有时结果是合理的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T13:07:19.303

即使引发了事件，如果您不将事件处理程序绑定到它们，也不会发生任何事情。在这种情况下，您可以使用以下代码删除处理程序：

```
object.Event -= new EventHandlerType(your_Method) 
```

否则，您应该创建自己的自定义控件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T13:10:29.247

根据[OnBeforeCollapse](http://msdn.microsoft.com/de-de/library/system.windows.forms.treeview.onbeforecollapse.aspx)你得到一个具有属性的[TreeViewCancelEventArgs 。](http://msdn.microsoft.com/de-de/library/system.windows.forms.treeviewcanceleventargs)`Cancel`将此设置为 true 应该会停止流程，但也不会折叠它。也一样`OnBeforeSelect`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T13:11:36.760

唯一可以轻松“取消”事件的情况是事件处理程序具有`CancelEventHandler`委托类型。即使这样，它并没有真正取消它，而是为剩余事件设置一个标志，使其跳过执行所有订阅它的事件。

如果您*确实*有一个`CancelEventHandler`类型（这些没有），您只需`Cancel`在处理程序中将事件对象本身设置为 true。

许多其他答案为您提供了您应该做什么的建议。我只是按照你的想法去做：在你的控制类中设置一个“事件取消”标志，然后检查它。当系列中的最后一个事件被调用时，重置它。

# jquery - 在 jQuery 中使用选择器选择元素

> ID：10720509
> 
> 赞同：2
> 
> 时间：2012-05-23T13:03:08.957
> 
> 标签：jquery, list, select, checkbox

我有一个带有复选框的嵌套列表。使用第一个复选框，我想切换该列表中的所有复选框。我知道如何用 jQUery 切换它们，但我不知道如何选择它们。这就是问题所在，选择部分。

```
<ul>
    <li>
        <p> lorem ipsum </p>
        <ul class="list">
            <li><input type="checkbox"></li>
            <li><input type="checkbox"></li>
            <li><input type="checkbox"></li>
        </ul>
    </li>
    <li>
        <p> lorem ipsum </p>
        <ul class="list">
            <li><input type="checkbox"></li>
            <li><input type="checkbox"></li>
            <li><input type="checkbox"></li>
        </ul>
    </li>
 </ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T13:11:12.623

假设我已正确阅读您的请求；

jQuery[`.siblings()`](http://api.jquery.com/siblings/)

示例：http : [//jsfiddle.net/52DBv/](http://jsfiddle.net/52DBv/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:17:51.697

你可以用这样的东西：

**HTML**：

```
<ul>
    <li>
        <p> lorem ipsum </p>
        <ul class="list">
            <li><input type="checkbox"></li>
            <li><input type="checkbox"></li>
            <li><input type="checkbox"></li>
        </ul>
    </li>
    <li>
        <p> lorem ipsum </p>
        <ul class="list">
            <li><input type="checkbox"></li>
            <li><input type="checkbox"></li>
            <li><input type="checkbox"></li>
        </ul>
    </li>
 </ul>​ 
```

**Javascript**

```
$(".list li:first-child input[type=checkbox]").click(function() {
    if (!this.checked) {
        $(this).parents(".list").find("input[type=checkbox]").removeAttr(    "disabled");
    } else {
        $(this).parents(".list").find("input[type=checkbox]").attr(    "disabled", true);
        $(this).parents(".list").find("li:first-child input[type=checkbox]"    ).removeAttr("disabled");
    }
});​ 
```

[你可以在这里](http://jsfiddle.net/ramsesoriginal/GQTtU/embedded/result/)看到一个现场工作演示，或者查看[jsFiddle](http://jsfiddle.net/ramsesoriginal/GQTtU/)。通常情况下，有很多可能的解决方案，但这可能会奏效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T13:16:41.173

尝试这个：

```
$(".list").find("input[type=checkbox]:first").on("click", function(){
    var cb = $(this);
    cb.parents(".list").find("input[type=checkbox]").attr("checked", cb.is(":checked"));
});​ 
```

**编辑**：对不起，现在为第二个列表工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T13:20:54.510

您可以收集具有“列表”类的元素内的所有复选框，如下所示：

```
$('.list input:checkbox') 
```

所以，这样的事情应该有效：

```
 <ul>
        <li>
            <p> lorem ipsum </p>
            <ul class="list">
                <li><input type="checkbox" onclick="$('.list input:checkbox').attr('checked', true);"></li>
                <li><input type="checkbox"></li>
                <li><input type="checkbox"></li>
            </ul>
        </li>
        <li>
            <p> lorem ipsum </p>
            <ul class="list">
                <li><input type="checkbox"></li>
                <li><input type="checkbox"></li>
                <li><input type="checkbox"></li>
            </ul>
        </li>
     </ul> 
```

（您必须添加“切换”逻辑）

检查[jq](http://api.jquery.com/checkbox-selector/)以获取更多信息 con jquery 复选框选择器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T13:23:05.463

尝试这样做：

```
$('.list').find('input:eq(0)'​)​.on('click', function(){        
    var $checkbox = $(this).is(':checked');
    $(this).closest('ul').find('input').attr('checked', $checkbox);
});​​​ 
```

# java - Java的DHT路由库

> ID：10720510
> 
> 赞同：1
> 
> 时间：2012-05-23T13:03:09.540
> 
> 标签：java, routing, dht

我需要某种路由库，类似于 openkad，它不提供任何哈希表功能，而只是提供

*   在网络中注册新节点
*   当我们处理带有密钥的对象时收到一条消息（保存在本地数据库/文件系统/等中，已删除）
*   应检索对象时收到消息

所以我宁愿需要Java中的某种路由器实现。

# visual-studio-2010 - 如何设置vs2011的默认宏如$(vcinstalldir)

> ID：10720512
> 
> 赞同：4
> 
> 时间：2012-05-23T13:03:11.643
> 
> 标签：visual-studio-2010, macros

当我加载 vs2010 项目时，我通知 Vcinstalldir 对于不同的 vs2010 项目是不同的。

我想知道在哪里以及如何设置或更改这些宏值，例如 Vcinstalldir 。

# javascript - 在对象中声明函数名，为什么？

> ID：10720521
> 
> 赞同：2
> 
> 时间：2012-05-23T13:03:28.607
> 
> 标签：javascript

正在研究一些 js 代码性能并看到了这种方法：

```
window.sample = {

    foo: function foo(a,b){
       // code goes here
    }

    bar: function bar(a,b){
       // code goes here
    }

} 
```

有什么理由让你在“function”这个词之后减速函数名？

它有助于调试吗？

它是好是坏还是只是不必要的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T13:07:50.757

唯一的原因是您可以在函数内部使用函数本身，而无需引用对象：

```
foo: function foo(a,b){
   return a > 0 ? a + foo(a-1,b) : b;
} 
```

但是请注意，对命名函数文字的支持在浏览器中并不一致，因此您应该避免使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T13:07:02.903

他们没有为 foo 和 bar 属性分配匿名函数，而是分配了命名函数。

它对调试很有帮助：据我所知，唯一的区别是您将看到函数的名称显示在调用堆栈中，而不是“javascript匿名函数”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T14:05:40.633

这是一个*命名函数表达式*。函数的名称只能作为函数本身的变量使用。这对于递归很有用，例如：

```
var obj = {
    foo: function foo(node) {
        // Do something to node

        var childNode = node.firstChild;
        while (childNode) {
            foo(childNode);
            childNode = childNode.nextSibling;
        }
    }
}; 
```

在大多数浏览器中，函数的名称也可以通过函数的非标准`name`属性获得，这有助于在调试或检查堆栈跟踪时识别函数。

IE < 9 的实现有缺陷，因此在使用时需要小心。完整的细节可以在[Juriy Zaytsev 关于这个主题的优秀文章中](http://kangax.github.com/nfe/)找到。

# sharepoint - SharePoint 2010 权限问题

> ID：10720524
> 
> 赞同：0
> 
> 时间：2012-05-23T13:03:38.113
> 
> 标签：sharepoint, sharepoint-2010

我最近使用团队网站和一些从该网站继承的子网站创建了一个网站。

结构是

顶层 - 站点 x

子站点站点 w 和站点 e（这些继承）

子子站点（在站点 w 下）站点 d 和站点 r（继承中断）

使用标准用户，即使 NT 身份验证用户在站点 x 的访问者组中，我也无法访问站点 w

任何帮助将不胜感激。

干杯特鲁兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:58:54.687

菜鸟错误！

我删除了所有自定义 Web 部件，并且权限运行良好。

其中一个 Web 部件试图通过测试用户无权访问的子 Web 进行递归。

我以为我已经通过以提升的权限运行来解决这个问题，但经过进一步调查，我正在传递一个 SPWeb 对象，其中仍然有旧的未提升的上下文。

我没有传递 Web 对象，而是传递了站点 ID，并在运行中创建了具有提升权限的 Web。

如果有人不明白，请发表评论，我将编写一个示例代码示例以进一步解释。

干杯特鲁兹

# c# - WCF - Windows 凭据缓存

> ID：10720530
> 
> 赞同：1
> 
> 时间：2012-05-23T13:04:02.543
> 
> 标签：c#, wcf, wcf-security

我有一个远程 WCF 服务，我在其中实现了自定义授权管理器。作为授权的一部分，我获取客户端的 Windows 身份以执行一些自定义授权。

我遇到的问题是客户端进程作为“UserA”运行，但是当它向 ServerX 上的远程服务发送请求时，该服务会看到“UserB”。

我已经确定这种情况正在发生，因为当我在过去某个阶段（例如通过 RDP）连接到 ServerX 时，我已经要求 Windows 缓存帐户“UserB”的客户端凭据。这是一种很常见的模式，因为许多开发人员都有一个“用户”帐户和一个“管理员”帐户，并且在连接到远程计算机时经常配置 Windows 以缓存他们的“管理员”帐户的凭据。

我知道如何从 Windows 凭据缓存中手动清除项目，但是如何防止 WCF 使用缓存，即始终使用客户端进程标识。

# php - 提取由某些字符包裹的子字符串

> ID：10720531
> 
> 赞同：1
> 
> 时间：2012-05-23T13:04:08.233
> 
> 标签：php, javascript, regex

使用正则表达式在一对分隔符之间选择内容的**最佳实践**是什么，不包括**PHP**和**JS**中的分隔符？

```
aassssd [dddd] fff ffff (delimiter=[..])   output -> dddd
aassssd QddddQ fff ffff (delimiter=Q)      output -> dddd
aassssd RddddQ fff ffff (delimiters=R...Q) output -> dddd
aassssd "dddd" fff ffff (delimiter=")      output -> dddd 
```

关心的是排除分隔符，选择整体相对容易：

```
/\"[^"]\"/ //for  line four 
```

解决方案最好返回一个缩放器。一个理想的答案只使用正则表达式，可以在[http://regexpal.com/中进行测试](http://regexpal.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:30:00.460

我会使用 non-greedy`.*?`来捕获所有内容，直到结束分隔符：

```
$str = 'aassssd QddddQ fff ffff';
preg_match_all('/[Q](.*?)[Q]/', $str, $out, PREG_PATTERN_ORDER);
var_dump($out); 
```

产生：

```
Array
(
    [0] => Array
        (
            [0] => QddddQ
        )

    [1] => Array
        (
            [0] => dddd
        )

) 
```

您需要转义`[`和`]`分隔符：`/[\[](.*?)[\]]/`

这使用单个捕获组`(.*?)`，因此您需要的输出位于输出数组中的位置 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:58:27.250

```
aassssd [dddd] fff ffff (delimiter=[..])   output -> dddd 
```

PHP 的正则表达式：

```
(?<=\[).*?(?=\]) 
```

用于 JS 的 RegEx（也适用于 PHP）：

```
[^\[]*?(?=\]) 
```

# java - Java - 使用 JTable 中的路径显示图像

> ID：10720533
> 
> 赞同：0
> 
> 时间：2012-05-23T13:04:18.863
> 
> 标签：java, swing, jtable, javax.imageio

我偶然发现了我的程序的一个问题。

**它的作用：**监听 JTable 中的行选择，使用“getSelectedRow”来获取单元格的内容，如下所示：

```
 public void valueChanged(ListSelectionEvent e) {   

    int row = resultTable.getSelectedRow();
    String val = resultTable.getValueAt(row,2).toString();

    System.out.println("The value of cell 2 at selected row is: " + val);

 } 
```

上面示例中没有显示的是 JTable 的单元格 2 包含图像的本地路径，这些路径是从本地运行的 MySQL 数据库中获取的。

**我希望它做什么：**每当触发 valueChanged（如上所示）时，我希望使用 JTable 单元格 2 中包含的路径在外部 JFrame 中绘制和显示图像。

考虑到上述情况（以及我对此相当陌生的事实），我将如何将此“val”传递给 ImageIO.read（我假设它将在单独的类中运行？）

感谢您的宝贵时间，任何帮助都是值得的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:21:02.210

对于 JPEG 图像，您实际上并不需要 ImageIO。只需添加这个而不是您的 System.out.println：

```
JFrame frame = new JFrame();
frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
JLabel label = new JLabel(new ImageIcon(val));
frame.setContentPane(label);
frame.pack();
frame.setVisible(true); 
```

如果 val 参数包含有效路径，则将显示图像。

如果图像多次打开，请检查 ListSelectionEvent 的 getValueIsAdjusting() 值

# node.js - 现在js不工作

> ID：10720536
> 
> 赞同：1
> 
> 时间：2012-05-23T13:04:26.550
> 
> 标签：node.js, socket.io, nowjs-sockets

我在我的服务器上成功安装了 nowjs。现在我正在尝试本教程： http: [//nowjs.com/doc/example](http://nowjs.com/doc/example) 我创建了两个文件并将它们放入 var/www/test 通过运行此命令

```
node helloworld_server.js 
```

在腻子中我得到一个错误：

```
module.js:337
    throw new Error("Cannot find module '" + request + "'");
          ^
Error: Cannot find module 'now'
    at Function._resolveFilename (module.js:337:11)
    at Function._load (module.js:279:25)
    at Module.require (module.js:359:17)
    at require (module.js:375:17)
    at Object.<anonymous> (/var/www/helloworld_server.js:7:13)
    at Module._compile (module.js:446:26)
    at Object..js (module.js:464:10)
    at Module.load (module.js:353:31)
    at Function._load (module.js:311:12)
    at Array.0 (module.js:484:10) 
```

安装工作正常，节点安装正确。我是管理服务器的初学者，但代码有什么问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:01:27.123

这是一个非常普遍的错误，告诉您 Node.js 找不到模块。如果你在项目的根目录中安装了 npm install module，你应该有一个 node_module 目录。在该目录中，您应该能够看到您安装的模块。

# c# - 取消放大地图控制 Windows Phone

> ID：10720539
> 
> 赞同：2
> 
> 时间：2012-05-23T13:04:33.637
> 
> 标签：c#, silverlight, windows-phone-7

我正在我的 Windows Phone 应用程序中使用地图控件。设置两点之间的路线后，地图控制自动放大。如何实现设置死记硬背后不放大？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:04:11.860

您应该只禁用地图控件，如下所示：

```
map1.IsEnabled = false; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T14:03:21.870

我希望你不能。

地图控件在平移和四处移动时会自动调整缩放级别，除了跟踪原始缩放级别并在控件完成操作后重置它之外，我还没有找到解决此问题的方法。

# .net - Levenshtein 距离和特殊字符

> ID：10720545
> 
> 赞同：3
> 
> 时间：2012-05-23T13:04:54.320
> 
> 标签：.net, unicode, levenshtein-distance, unicode-normalization, ligature

[如Steve Hanov](http://stevehanov.ca/blog/index.php?id=114)所述，我使用特里树实现了 Levenshtein 距离算法。但是，我在处理特殊字符时遇到了困难。例如，如果我计算 Großmann 和 Grossmann 之间的距离，我需要距离为零，因为 ß 和 ss 应该被认为是相等的。

什么是支持这些特殊情况的最佳解决方案（如果有）。

我最初的想法是在计算距离之前对所有字符串进行标准化。所以在 Großmann -> Grossman, österreich -> oesterreich, ... 但是，.NET 中似乎没有这样的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T14:32:50.363

挑战在于当前的文化无法识别单个单词的语言。

假设您愿意在比赛方面犯错。

确定一组永远不需要映射的字符。

确定所有文化的集合映射。

确定特定文化的映射。

首先做一个未映射的 Levenshtein 距离。

如果未映射的距离为零，则停止。

如果未映射的距离大于 x（例如 4），则停止，因为它不匹配。

如果单词只有不需要映射的字符（例如 az），则停止。

如果距离为零，则将两者映射到所有文化。

映射到默认区域性，如果距离为零，则停止。

映射到其他文化，如果距离为零，则停止。

我在 Levenshtein 中添加了一个直接的 string.compare，如果为真，则报告 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:10:02.583

我认为规范化是要走的路。

我不知道有任何现成的图书馆可以做到这一点，快速搜索也没有发现任何东西。

这里讨论了一个类似的问题：[Converting "Bizarre" Chars in String to Roman Chars](https://stackoverflow.com/questions/4551199/converting-bizarre-chars-in-string-to-roman-chars)。

他们的解决方案是手动创建映射，只要您能提前全面识别所有必要的映射即可。

# android - ImageButton (Android) 的触摸反馈

> ID：10720553
> 
> 赞同：3
> 
> 时间：2012-05-23T13:05:24.343
> 
> 标签：android, android-4.0-ice-cream-sandwich, feedback

我正在为 ICS 开发一个应用程序。我喜欢操作栏中的按钮反馈用户触摸的方式（周围的蓝色发光），是否有一些简单的方法可以为 ImageButton 添加相同的反馈？

像这样，但使用 ImageButton： ![在此处输入图像描述](../Images/c90631a52a5335e94a94600d4ab7e7e0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:15:20.620

是的，进入你的 SDK。

导航到平台->android-15->数据->res

您现在位于系统的 res 文件夹中。如果您在可绘制文件夹中搜索，您应该能够找到代表默认系统按钮的 xml 选择器。该选择器应该引用存储在其他可绘制文件夹中的一些图像。选择一个分辨率并进入其文件夹并找到所有需要的图像。

一旦您获得了所有必需的资源，您就可以将它们包含在您自己的项目中。然后使用您自己的选择器在按下时显示替代图像。

我不确定您所追求的效果，但我认为如果您将 btn_default_holo_pressed.9.png 设置为图像视图的背景，并在 src 中有一个图像，它应该会在其外部出现蓝色条。使用选择器，您可以在按下操作期间进行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-20T01:46:32.260

如果您只是想添加反馈

使用 drawable 作为 ImageButton 背景。

```
 <ImageButton
        android:id="@+id/btn_show_filter_dialog"
        android:layout_width="24dp"
        android:layout_height="24dp"
        android:background="@drawable/ic_filter_state"/> 
```

为您的图像按钮创建可绘制文件：

ic_filter_state.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:state_enabled="false"
        android:drawable="@drawable/ic_filter_disable" />
    <item
        android:state_pressed="true"
        android:state_enabled="true"
        android:drawable="@drawable/ic_filter_click" />
    <item
        android:state_focused="true"
        android:state_enabled="true"
        android:drawable="@drawable/ic_filter_roll" />
    <item
        android:state_enabled="true"
        android:drawable="@drawable/ic_filter_solid" />
</selector> 
```

对于反馈，您只需要 state_pressed="true" 和 state_enabled="true" 可绘制对象

这是一个带有矢量可绘制对象的示例，但您可以添加自己的可绘制对象。更改每个状态的 fillColor 列：

ic_filter_solid.xml：

```
<vector android:alpha="1" android:height="24dp"
    android:viewportHeight="512" android:viewportWidth="512"
    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="#ffffff" android:pathData="M487.976,0H24.028C2.71,0 -8.047,25.866 7.058,40.971L192,225.941V432c0,7.831 3.821,15.17 10.237,19.662l80,55.98C298.02,518.69 320,507.493 320,487.98V225.941l184.947,-184.97C520.021,25.896 509.338,0 487.976,0z"/>
</vector> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T13:16:02.267

我认为这可能是您正在寻找的内容： [带有触摸事件的 Canvas 中的图像](https://stackoverflow.com/questions/5743328/android-image-in-canvas-with-touch-events)

Imagebuttons 和 imageviews 非常相似。

# c# - 如何概括从另一个类继承的类

> ID：10720555
> 
> 赞同：-1
> 
> 时间：2012-05-23T13:05:30.203
> 
> 标签：c#, generics

我有一个看起来像这样的课程：

```
public class InvokeProxy : MarshalRefByObject, IFace
{
    public InvokeProxy(IFace face)
    {
        this.Face = face;
    }

    private IFace Face { get; set; }

    public string Execute(string data)
    {
        return this.Face.Execute(data)
    }
} 
```

我的任务是让它通用。由于我不能从泛型类继承，我有点卡住了，有人知道解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:13:30.573

我不太确定你想做什么`InvokeProxy`……`InvokeProxy<T>`这有帮助吗？

```
public class InvokeProxy<T> : MarshalRefByObject, IFace where T : IFace
{
    public InvokeProxy(T face)
    {
        this.Face = face;
    }

    private T Face { get; set; }

    public string Execute(string data)
    {
        return this.Face.Execute(data);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:15:41.037

不太确定我是否理解了这个问题......

```
public class InvokeProxy<T> : MarshalRefByObject where T : class
{
    public InvokeProxy(T face)
    {
        this.Face = face;
    }

    private T Face { get; set; }

    public string Execute(string data)
    {
        return this.Face.Execute(data)
    }
} 
```

# clojure - 无法理解这个 clojure make-adder 示例

> ID：10720558
> 
> 赞同：5
> 
> 时间：2012-05-23T13:05:42.697
> 
> 标签：clojure

我正在尝试阅读有关 Clojure 的内容，但我遇到了以下基本示例：

```
(defn make-adder [x]
  (let [y x]
    (fn [z] (+ y z))))
(def add2 (make-adder 2))
(add2 4)
-> 6 
```

我不明白的是如何`add2`将数字 4 传递给 make-adder 函数，以及该函数如何将该数字分配给 z。

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T13:13:10.177

`make-adder`返回一个接受一个参数 (z) 的函数，传入的参数`make-adder`用于为 y 赋值。`add2`设置为等于`make-adder`使用参数 2 进行评估的结果。因此`add2`设置为等于从 返回的函数`make-adder`，其中（因为 y 已分配给参数 from `make-adder`）看起来像

```
(fn [z] (+ 2 z)) 
```

所以`(add2 4)`调用这个计算结果为 6 的函数。这有帮助吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T14:51:44.317

对我来说，您似乎正在研究一个有趣的问题。

您的示例 make-adder 函数（在没有 let 绑定的情况下重写）

```
(defn make-adder [x]
  "Returns a function that returns the sum of x and yet to be supplied z."
  (fn [z] (+ z x)))) 
```

返回一个对 x 和 z 求和的函数，其中 make-adder 必须已经用一个值调用过。我相信您的示例正在实现 Clojure 部分函数，​​这非常酷。

这是您重写的 make-adder 函数以将其两个参数相加，而不是返回函数（因此我们可以在 add2 中使用 partial），

```
(defn make-adder
  "Returns sum of x and y." 
  [x y] 
  (+ x y)) 
```

这里是 add2 使用以 2 作为 x 参数的部分重写：

```
(def add2 (partial make-adder 2)) 
```

如果我称`(add2 2)`答案为 4，`(add2 3)`则答案为 5，依此类推。

# generics - 如何调用泛型重载方法

> ID：10720563
> 
> 赞同：2
> 
> 时间：2012-05-23T13:06:00.513
> 
> 标签：generics, c#-4.0

我有这个方法，我们称之为A

```
public static List<string> GetDocuments<T>(T t, string documentType) 
```

和一个重载，我们称它为 B

```
public static List<string> GetDocuments(Guid id, string documentType)
{
   return GetDocuments(id, documentType);
} 
```

问题是 B 中的调用是对 B 的，这意味着它将永远递归。我如何在 B 中调用 A？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:08:31.793

我想以下应该是明确的：

```
public static List<string> GetDocuments(Guid id, string documentType)
{
   return GetDocuments<Guid>(id, documentType);
} 
```

# ios - 有没有办法计算将视图从帧 A 转换到帧 B 所需的 CGAffineTransform？

> ID：10720569
> 
> 赞同：19
> 
> 时间：2012-05-23T13:06:23.420
> 
> 标签：ios, core-graphics, linear-algebra

比如说，我有两个 CGRect，CGRect A 和 CGRect B。我的 UIView 的帧与 CGRect B 相同，但我想创建一个动画来显示 UIView 从帧 A 过渡到 B。

我试图通过更改 UIView 的转换属性来做到这一点，所以我不必过多地弄乱它的框架。但是，我需要 CGAffineTransform 来实现这一点。计算这种变换的最佳方法是什么？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2015-01-29T12:03:20.010

以前的答案对我不起作用。这应该有效：

### 斯威夫特 5（扩展）

```
extension CGAffineTransform {
    init(from source: CGRect, to destination: CGRect) {
        let t = CGAffineTransform.identity
            .translatedBy(x: destination.midX - source.midX, y: destination.midY - source.midY)
            .scaledBy(x: destination.width / source.width, y: destination.height / source.height)
        self.init(a: t.a, b: t.b, c: t.c, d: t.d, tx: t.tx, ty: t.ty)
    }
} 
```

### 斯威夫特 4

```
func transformFromRect(from source: CGRect, toRect destination: CGRect) -> CGAffineTransform {
    return CGAffineTransform.identity
        .translatedBy(x: destination.midX - source.midX, y: destination.midY - source.midY)
        .scaledBy(x: destination.width / source.width, y: destination.height / source.height)
} 
```

### 迅速

```
func transformFromRect(from: CGRect, toRect to: CGRect) -> CGAffineTransform {
    let transform = CGAffineTransformMakeTranslation(CGRectGetMidX(to)-CGRectGetMidX(from), CGRectGetMidY(to)-CGRectGetMidY(from))
    return CGAffineTransformScale(transform, to.width/from.width, to.height/from.height)
} 
```

### Objective-C

```
+ (CGAffineTransform) transformFromRect:(CGRect)sourceRect toRect:(CGRect)finalRect {
    CGAffineTransform transform = CGAffineTransformIdentity;
    transform = CGAffineTransformTranslate(transform, -(CGRectGetMidX(sourceRect)-CGRectGetMidX(finalRect)), -(CGRectGetMidY(sourceRect)-CGRectGetMidY(finalRect)));
    transform = CGAffineTransformScale(transform, finalRect.size.width/sourceRect.size.width, finalRect.size.height/sourceRect.size.height);

    return transform;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-29T15:49:49.683

我还没有找到任何一种方便的方法来解决这个问题，所以我求助于尝试过的真正的矩阵计算来实现这一点。

给定一个 CGRect A 和 CGRect B，要计算从 A 到 B 所需的转换，请执行以下操作：

```
CGAffineTransform transform = CGAffineTransformTranslate(CGAffineTransformIdentity, -A.origin.x, -A.origin.y);
transform = CGAffineTransformScale(transform, 1/A.size.width, 1/A.size.height);
transform = CGAffineTransformScale(transform, B.size.width, B.size.height);
transform = CGAffineTransformTranslate(transform, B.origin.x, B.origin.y); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-11T01:51:45.400

[这是josema.vitaminew 答案](https://stackoverflow.com/a/28214319/3438932)的一个变体，它也考虑了纵横比（如果您正在处理视频或图像，这很有用）：

```
+ (CGAffineTransform)transformFromRect:(CGRect)sourceRect toRect:(CGRect)finalRect keepingAspectRatio:(BOOL)keepingAspectRatio {
    CGAffineTransform transform = CGAffineTransformIdentity;

    transform = CGAffineTransformTranslate(transform, -(CGRectGetMidX(sourceRect)-CGRectGetMidX(finalRect)), -(CGRectGetMidY(sourceRect)-CGRectGetMidY(finalRect)));

    if (keepingAspectRatio) {
        CGFloat sourceAspectRatio = sourceRect.size.width/sourceRect.size.height;
        CGFloat finalAspectRatio = finalRect.size.width/finalRect.size.height;

        if (sourceAspectRatio > finalAspectRatio) {
            transform = CGAffineTransformScale(transform, finalRect.size.height/sourceRect.size.height, finalRect.size.height/sourceRect.size.height);
        } else {
            transform = CGAffineTransformScale(transform, finalRect.size.width/sourceRect.size.width, finalRect.size.width/sourceRect.size.width);
        }
    } else {
        transform = CGAffineTransformScale(transform, finalRect.size.width/sourceRect.size.width, finalRect.size.height/sourceRect.size.height);
    }

    return transform;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-05-13T20:41:23.307

一个不错的 Swift 3 解决方案：

```
extension CGAffineTransform {
    init(from: CGRect, toRect to: CGRect) {
        self.init(translationX: to.midX-from.midX, y: to.midY-from.midY)
        self = self.scaledBy(x: to.width/from.width, y: to.height/from.height)
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-11T12:52:55.837

上面代码片段的最后一行需要修改如下：

`transform = CGAffineTransformTranslate (transform, B.origin.x*A.size.width/B.size.width, B.origin.y*A.size.height/B.size.height);`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-28T01:10:34.623

我开始使用 Kanobius 答案，但要么我误解了他对“纵横比”一词的使用，要么他是，因为它没有按我预期的那样执行。这是我的版本，它保持原始视图的纵横比（通过将缩放应用于 H 和 W）以实现“纵横比”行为

```
+ (CGAffineTransform)transformFromRect:(CGRect)sourceRect toRect:(CGRect)finalRect keepingAspectRatio:(BOOL)keepingAspectRatio
{
    CGAffineTransform transform = CGAffineTransformIdentity;

    // since the scale transform works around the midpoints, align them before doing the transform.
    transform = CGAffineTransformTranslate(transform, -(CGRectGetMidX(sourceRect)-CGRectGetMidX(finalRect)), -(CGRectGetMidY(sourceRect)-CGRectGetMidY(finalRect)));

    CGFloat originalHeight = sourceRect.size.height;
    CGFloat scaledHeight = finalRect.size.height;
    CGFloat hScalePercentage = scaledHeight / originalHeight;

    CGFloat originalWidth = sourceRect.size.width;
    CGFloat scaledWidth = finalRect.size.width;
    CGFloat wScalePercentage = scaledWidth / originalWidth;

    if (keepingAspectRatio)  
    {
        CGFloat scalePercentage = MIN(hScalePercentage, wScalePercentage);   // the most amount of scaling == smallest float number
        transform =  CGAffineTransformScale(transform, scalePercentage, scalePercentage);
    }
    else
    {
        transform = CGAffineTransformScale(transform, wScalePercentage, hScalePercentage);
    }

    return transform;
} 
```

# c++ - MFC PreCreateWindow 创建一个填充除任务栏以外的屏幕的窗口

> ID：10720570
> 
> 赞同：1
> 
> 时间：2012-05-23T13:06:25.600
> 
> 标签：c++, mfc

我想创建一个填充整个桌面空间的窗口，不包括 Windows 开始菜单，也不最大化窗口。

我认为代码应该是这样的：

```
BOOL CWnd::PreCreateWindow(CREATESTRUCT& cs)
{
    cs.cx = ::GetSystemMetrics(SM_CXSCREEN); 
    cs.cy = ::GetSystemMetrics(SM_CYSCREEN); // minus start menu height please

    return CMDIFrameWnd::PreCreateWindow(cs);
} 
```

但是我如何获得开始菜单的高度？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:59:34.707

要避开任务栏和任何应用栏，您需要填充工作区。使用该`GetMonitorInfo`功能并查看`rcWork`成员。（请注意，每台显示器都有不同的工作区域，因此您需要知道您关心的是哪台显示器。）

# git - 有没有办法将 SourceGear Vault 导入/导出到 Git

> ID：10720571
> 
> 赞同：9
> 
> 时间：2012-05-23T13:06:26.130
> 
> 标签：git, version-control, dvcs, sourcegear-vault

我有一个使用 SourceGear Vault 的源代码控制系统。

我正在玩 Git，想看看是否可以将我的 SourceGear 存储库放入 Git。

我看不到任何方法可以做到这一点。

任何人都可以推荐一种方法吗？

我找到了一个创建 VFE 文件扩展名的文件夹导出/导入工具。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T15:02:58.220

除非我自己写，否则看起来没有工具可以做到这一点！[http://support.sourcegear.com/viewtopic.php?f=5&t=18994](http://support.sourcegear.com/viewtopic.php?f=5&t=18994)

**更新：** Vault2Git似乎确实有一个[可能的解决方案](https://github.com/AndreyNikiforov/vault2git)

# php - 检查数组中同一日期的重叠时间？

> ID：10720572
> 
> 赞同：0
> 
> 时间：2012-05-23T13:06:26.770
> 
> 标签：php, arrays, overlap

我有一个数组，它是由希望保留时间段以自愿加入我们组织的人们制作的。我想看看他们是否在同一天选择了重叠的时间段。在我下面的示例数组中，第一个和第三个元素是重叠的，我需要检测到这一点。任何建议将不胜感激：

```
 Array
(
    [0] => Array
        (
            [id_pc_time_blocks] => 3
            [id_pc] => 2
            [pc_date] => 2012-11-21
            [pc_time_block] => 9:00 AM-1:00 PM
            [pc_time_block_max] => 25
            [pc_time_block_count] => 0
            [pc_name] => Atlanta
        )

    [1] => Array
        (
            [id_pc_time_blocks] => 4
            [id_pc] => 2
            [pc_date] => 2012-11-21
            [pc_time_block] => 1:00 PM-5:00 PM
            [pc_time_block_max] => 25
            [pc_time_block_count] => 10
            [pc_name] => Atlanta
        )

    [2] => Array
        (
            [id_pc_time_blocks] => 6
            [id_pc] => 2
            [pc_date] => 2012-11-21
            [pc_time_block] => 10:00 AM-2:00 PM
            [pc_time_block_max] => 25
            [pc_time_block_count] => 0
            [pc_name] => Atlanta
        )

       [3] => Array
        (
            [id_pc_time_blocks] => 6
            [id_pc] => 2
            [pc_date] => 2012-11-23
            [pc_time_block] => 10:00 AM-2:00 PM
            [pc_time_block_max] => 25
            [pc_time_block_count] => 0
            [pc_name] => Atlanta
        )

       [4] => Array
        (
            [id_pc_time_blocks] => 6
            [id_pc] => 2
            [pc_date] => 2012-11-23
            [pc_time_block] => 3:00 AM-6:00 PM
            [pc_time_block_max] => 25
            [pc_time_block_count] => 0
            [pc_name] => Atlanta
        )

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:30:27.290

不推荐用于 HUGE 阵列，但这是一个快速的解决方案。您需要将 hte 时间分解为 unix 时间戳以进行比较

```
// Run down each element of the array. (I've called it MyStartArray)
$numElements = count($MyStartArray);
for ($i=0; $i<$numElements ; $i++) {

    // Calculate "Start Time" and "End Time" as Unix time stamps (use mktime function) and store as another items in the array
    // You can use preg_match or substr to get the values to pump into mktime() below - not writing hte whole thing for you ;)
    $MyStartArray[$i]['start_time'] = mktime( ... );
    $MyStartArray[$i]['end_time'] = mktime( ... );

    // Now run through all the previous elements to see if a start time is before the end time, or an end time is after the start time.
    if ($i > 0) {
        for ($j=0; $j<$i;$j++) {
            if ($MyStartArray[$i]['start_time'] < $MyStartArray[$j]['end_time'] ||
                  $MyStartArray[$j]['end_time'] > $MyStartArray[$j]['start_time'] ) {
                     echo 'CLASH';
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T19:46:45.280

这是我检查每个日期是否有重叠时间的解决方案。唯一的事情是，这是针对我的特定情况的，并且不考虑重叠年份，因为我不需要此应用程序。

这是我的工作示例：

```
$dateIdx = 0;
    foreach($timeblocks_array as $obj) {
           $timeblocks_array[$dateIdx]["intDay"] = idate("z",strtotime($obj["pc_date"]));
           $timeblocks_array[$dateIdx]["intStart"] = intval($obj["start_time"]);
           $timeblocks_array[$dateIdx]["intEnd"] = intval($obj["end_time"]);
           $mindates[] = idate("z",strtotime($obj["pc_date"]));
           $dateIdx++;
    }
    $minDateSingle = min($mindates);
    $maxDateSingle = max($mindates);

    $currentDate = $minDateSingle;
    $dateIdx = 0;
    while ($currentDate <= $maxDateSingle) {
           $hrIndex = 0;
           while ($hrIndex < 24) {
                  $matrixArray[$dateIdx][$hrIndex]["count"] = 0;
                  $matrixArray[$dateIdx][$hrIndex]["intDay"] = $currentDate;
                  $hrIndex++;         
           }
           // calculate counts:
           $hourIdx = 0;
           foreach($matrixArray[$dateIdx] as $hour){
                  foreach($timeblocks_array as $block) {
                         if ($hour["intDay"] == $block["intDay"]) {
                               if ($hourIdx >= $block["intStart"] && $hourIdx < $block["intEnd"]) {
                                      $matrixArray[$dateIdx][$hourIdx]["count"] = $matrixArray[$dateIdx][$hourIdx]["count"] + 1;
                                      $matrixArray[$dateIdx][$hourIdx]["requests"][] = $block;
                               }
                         }
                  }
                  $hourIdx++;
           }
           $dateIdx++;
           $currentDate = $currentDate + 1; 
    }

    //loop through the matrix array and timeblocks array to see if they intersect
    foreach($matrixArray as $day) {
           $hourIdx = 0;
           foreach($day as $hour) {
                  if ($hour["count"] > 1) {
                         //echo $hour["intDay"]." - Overlap on Hour $hourIdx\n";
                         $smarty->assign('overlappingError', 1);
                         $error = 1;
                         foreach($hour["requests"] as $overlapblock) {
                               //echo " --> conflict: ". $overlapblock["pc_date"]." ".$overlapblock["pc_time_block"]." (".$overlapblock["intStart"]." to ".$overlapblock["intEnd"].")\n";
                         }
                  } else if ($hour["count"] == 1) {
                         // these are valid hours
                  }     
                  $hourIdx++;
           }     
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T09:43:38.473

罗比的回答对我不起作用。我发现在他的示例中，仅针对日期需要制定的规则是：

$i[start] 需要小于且不等于 $i[stop]

$i[start] 需要大于且不等于 $j[stop]

$j[start] 需要小于且不等于 $j[stop]

因此我的解决方案是：

```
$numElements = count($dates);

for ($i=0; $i<$numElements; $i++) {

    $dates[$i]['start_time'] = strtotime($dates[$i]['start']);
    $dates[$i]['end_time'] = strtotime($dates[$i]['end']);

    if ($i > 0) {

        for ($j=0; $j<$i;$j++) {

            if($dates[$i]['start_time'] >= $dates[$i]['end_time'] || $dates[$i]['start_time'] <= $dates[$j]['end_time'] || $dates[$j]['start_time'] >= $dates[$j]['end_time']) {
                $this->set_error(['dates_overlap']);
                $this->dates_overlap = true;
                break;
            }

        }
    }

    if(isset($this->dates_overlap))
        break;
} 
```

# javascript - 鼠标在下部 div 上移动事件，鼠标单击上部

> ID：10720573
> 
> 赞同：4
> 
> 时间：2012-05-23T13:06:30.547
> 
> 标签：javascript, javascript-events

有谁知道如何实现这样的功能？我以这种方式有两个绝对定位的 div： ![在此处输入图像描述](../Images/7c0ee533c231a2294d9e2e1fcab360b5.png)

我想要做的是 div1 正在侦听 mouseover 和 mouseout 事件，而 div2 正在侦听鼠标单击。当我在 div2 上移动鼠标时，会在 div1 上触发 mouseout 事件，我不希望它这样做。我希望用户可以在不触发 div1 mouseout 的情况下在 div2 上移动光标（因为 div1 在 div2 后面，所以实际上用户没有将光标移出）并单击 div2。

我没有使用 jQuery，但有人可以指出我如何在 jQuery 中执行此操作并添加一些详细信息 jQuery 如何处理此类问题，那么我也会喜欢这个答案；）但我仍然更喜欢 jQuery 免费答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:22:58.167

mouseout 功能旨在如此工作。

您可能会过滤掉 mouseout 事件回调的行为，检查是否

```
event.relatedTarget != div2 
```

rgds

编辑：关于点击 div2，请评论您可能遇到的任何其他问题，但我认为不应该有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T13:12:14.773

好吧，如果它们是绝对定位的，你可以在 div 1 的 mouseout 事件上检查鼠标的坐标。如果它们在 div 1 的矩形中，防止它的默认行为，即不要调用 mouseout 事件的回调函数.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T13:20:13.040

您遇到了一个经典的甚至冒泡/捕获问题。

查看这篇文章：[http ://www.quirksmode.org/js/events_order.html](http://www.quirksmode.org/js/events_order.html)

它将能够比我更好地解释您的情况！

这里有一段让你兴奋的摘录：

> 基本问题非常简单。假设你在一个元素中有一个元素

```
-----------------------------------
| element1                        |
|   -------------------------     |
|   |element2               |     |
|   -------------------------     |
|                                 |
----------------------------------- 
```

> 并且都有一个 onClick 事件处理程序。如果用户点击 element2，他会在 element1 和 element2 中引发点击事件。但是哪个事件首先触发？应该首先执行哪个事件处理程序？换句话说，事件顺序是什么？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T13:23:47.147

如果您可以嵌套 div 1 和 div 2，则可以模拟 IE 专有的 mouseenter / mouseleave 事件，这比标准的 mouseover / mouseout 更有用。jQuery 有通过[.mouseenter()](http://api.jquery.com/mouseenter/)和[.mouseleave()](http://api.jquery.com/mouseleave/)模拟它们的方法；他们的实施可能会对您有所帮助。

这是一个演示：http: [//jsfiddle.net/kXjRM](http://jsfiddle.net/kXjRM)

编辑：您是否考虑过使用 CSS 而不是 JS？就像嵌套它们并使用

```
#two {
  display: none;
}

#one:hover #two {
  display:block;
} 
```

?

# sencha-touch-2 - Sencha Touch - 在视图之间切换

> ID：10720582
> 
> 赞同：0
> 
> 时间：2012-05-23T13:07:06.507
> 
> 标签：sencha-touch-2

我正在尝试使用 miamicode 制作相同的应用程序，我在第 3 步 [http://miamicoder.com/2012/how-to-create-a-sencha-touch-2-app-part-3/](http://miamicoder.com/2012/how-to-create-a-sencha-touch-2-app-part-3/)

我尝试制作转到新笔记的按钮（切换到新屏幕并创建新笔记）

示例中的代码是这样的：

```
 onNewNoteCommand: function () {
   console.log("onNewNoteCommand");
   var now = new Date();
   var noteId = (now.getTime()).toString() + (this.getRandomInt(0, 100)).toString();
   var newNote = Ext.create("NotesApp.model.Note", {
          id: noteId,
            dateCreated: now,
            title: "",
            narrative: ""
        });

        this.activateNoteEditor(newNote);
    } 
```

activateNotesList 函数是这样的：

```
activateNotesList: function () {

   Ext.Viewport.animateActiveItem(this.getNotesListView(), this.slideRightTransition); 
```

在我自己的示例中，我尝试在不传递数据的情况下进入编辑视图。所以我试试这个：

```
onNewNoteCommand:function()

{
var noteEditor = this.getNoteEditor();

 // Ext.Viewport.add(noteEditor);  also tried this.

Ext.Viewport.setActiveItem(noteEditor); 
```

该代码运行没有错误，但屏幕没有改变。有什么建议吗？add 有什么区别？

如何将视口（尚未创建任何自定义视口）设置为卡片？这是 setactiveitem 不起作用的问题吗？在视图之间切换的任何其他方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T14:41:26.250

google chrome 浏览器的控制台中是否有一些错误？`Ctrl+Shift+J`打开。

您还必须检查 noteEditor 是否等于 Object 或 Number。

来自 sencha 文档：`setActiveItem( Object/Number activeItem )`

# c++ - 双线性插值，我的实现有问题

> ID：10720586
> 
> 赞同：4
> 
> 时间：2012-05-23T13:07:19.780
> 
> 标签：c++

我正在尝试实现双线性插值函数，但由于某种原因，我得到了不好的输出。我似乎无法弄清楚出了什么问题，任何帮助走上正轨的人都将不胜感激。

```
double lerp(double c1, double c2, double v1, double v2, double x)
{
if( (v1==v2) ) return c1;
double inc = ((c2-c1)/(v2 - v1)) * (x - v1);
double val = c1 + inc;
return val;
};

void bilinearInterpolate(int width, int height)
{
// if the current size is the same, do nothing
if(width == GetWidth() && height == GetHeight())
    return;

//Create a new image
std::unique_ptr<Image2D> image(new Image2D(width, height));

// x and y ratios
double rx = (double)(GetWidth()) / (double)(image->GetWidth()); // oldWidth / newWidth
double ry = (double)(GetHeight()) / (double)(image->GetHeight());   // oldWidth / newWidth

// loop through destination image
for(int y=0; y<height; ++y)
{
    for(int x=0; x<width; ++x)
    {
        double sx = x * rx;
        double sy = y * ry;

        uint xl = std::floor(sx);
        uint xr = std::floor(sx + 1);
        uint yt = std::floor(sy);
        uint yb = std::floor(sy + 1);

        for (uint d = 0; d < image->GetDepth(); ++d)
        {
            uchar tl    = GetData(xl, yt, d);
            uchar tr    = GetData(xr, yt, d);
            uchar bl    = GetData(xl, yb, d);
            uchar br    = GetData(xr, yb, d);
            double t    = lerp(tl, tr, xl, xr, sx);
            double b    = lerp(bl, br, xl, xr, sx);
            double m    = lerp(t, b, yt, yb, sy);
            uchar val   = std::floor(m + 0.5);
            image->SetData(x,y,d,val);
        }
    }
}

//Cleanup
mWidth = width; mHeight = height;
std::swap(image->mData, mData);
} 
```

![输入图像（4 像素宽和高）](../Images/621a9eed099e2828471361ed301e6d94.png)

输入图像（4 像素宽和高）

![我的输出](../Images/96d3b16cf9bd70e881dd7558259cdcb3.png)

我的输出

![预期输出（Photoshop 的双线性插值）](../Images/3cb121b23bcc8ad5bb00eafea1659693.png)

预期输出（Photoshop 的双线性插值）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T13:19:01.117

Photoshop 的算法假定每个源像素的颜色位于像素的中心，而您的算法假定颜色位于其左上角。与 Photoshop 相比，这会导致您的结果向上和向左移动半个像素。

另一种看待它的方法是，您的算法将 x 坐标范围映射`(0, srcWidth)`到`(0, dstWidth)`，而 Photoshop 映射`(-0.5, srcWidth-0.5)`到`(-0.5, dstWidth-0.5)`，并且在 y 坐标中相同。

代替：

```
double sx = x * rx;
double sy = y * ry; 
```

您可以使用：

```
double sx = (x + 0.5) * rx - 0.5;
double sy = (y + 0.5) * ry - 0.5; 
```

得到类似的结果。`sx`请注意，这可以为您提供和的负值`sy`。

# php - 100 的压缩仍然会在 PHP GD 上失去质量

> ID：10720587
> 
> 赞同：0
> 
> 时间：2012-05-23T13:07:20.750
> 
> 标签：php, php-gd

当我使用：

`imagecreatefromjpeg()`$path 参数是一个 URL。我将 jpeg 保存为 100 压缩...但我仍然会受到轻微的质量损失...

有没有办法防止这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T13:10:20.673

重新保存 jpeg 图像时，质量总是会下降，您应该复制图像文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T13:11:18.157

无论压缩如何，所有 jpg 图像都会有伪影。如果这是一张有很多颜色且没有真正锋利边缘的图片，那应该不是问题，但是如果它是徽标或边缘很重要的东西，您应该考虑使用 PNG 替代品。

# c# - 使用向上/向下箭头滚动 DataGridRows，包括 RowDetailstemplate

> ID：10720588
> 
> 赞同：1
> 
> 时间：2012-05-23T13:07:22.620
> 
> 标签：c#, wpf, datagrid

我在 Rowdetails 模板中有带有嵌套数据网格的数据网格。

我想使用键盘上/下箭头键滚动所有数据网格行。

例如，看下面的数据

1.MainDatagridRow 我 NestedDatagridRow

```
ii NestedDatagridRow

iii NestedDatagridRow 
```

2.MainDatagridRow 一个 NestedDatagridRow

```
b NestedDatagridRow

c NestedDatagridRow 
```

我想使用向上/向下箭头顺序滚动包括 NestedDatagridrow 在内的每一行，请做必要的事情。

# objective-c - NSTableView 不刷新？

> ID：10720590
> 
> 赞同：0
> 
> 时间：2012-05-23T13:07:24.820
> 
> 标签：objective-c, cocoa, nstableview

我有一个 NSTableView，它的数据源是一个 NSMutableArray。数组的计数在 numberOfRowsInTableView: 方法中返回。

通过在其他组件（例如 NSPopupButton）中进行选择来刷新表，这会更改数组的内容并执行 reloadData 方法。

问题是有时我会得到一种数据被相互写入。因此，例如，如果计数为 4，然后在执行操作后为 10，则额外的 6 条记录写入前 4 条下方。只有在我手动上下滚动表格后，数据（正确的数据）才是显示。

控制台显示一条消息，

```
-[NSCFArray objectAtIndex:]: index(-1(or possibly larger)) beyond bounds (1056). 
```

我知道错误消息似乎指出它是一个超出范围的数组，但是当我只返回时怎么会这样，比如 [array objectAtIndex: rowIndex] 在

```
- (id)tableView:(NSTableView *)aTableView objectValueForTableColumn:(NSTableColumn *)aTableColumn row:(NSInteger)rowIndex 
```

方法？

此外，在 numberOfRowsInTableView 中返回的计数返回始终是正确的（我知道这一点，因为我每隔几秒就使用计时器记录计数）。

有任何想法吗？谢谢！

**编辑1：** 我返回的数据如下：

```
pc = [[PrinterClass alloc]init];
pc = [ads_printers_array objectAtIndex:rowIndex];       

            if (aTableColumn == tc_make)    
                return [pc make];

            if (aTableColumn == tc_model)           
                return [pc model];

            if (aTableColumn == tc_driver_name)         
                return [pc ppd];

            if (aTableColumn == tc_rdp_driver)      
            {
                if ([pc decider] == 1)
                    return [pc rdp];

                else return [pc model]; 
            } 
```

我上面提到的数组填充了我创建的一个名为 PrintersClass 的类的对象。

要重新加载数据，只需像往常一样重新加载数据：

```
[ads_rdp_driver_table reloadData]; 
```

ads_rdp_driver_table 是 tableView 名称。

问题是这个问题是随机出现的，而不是在特定点。这就是为什么我不能指望它..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:37:42.783

您是否 100% 确定已连接委托和数据源？

您也可以在代码中执行此操作

```
ads_rdp_driver_table.datasource = self;
ads_rdp_driver_table.delegate = self; 
```

添加这是在 f.ex 中。从笔尖醒来。

您还必须将 tableview 本身连接到 iboutlet，否则您不能按名称调用它。

# css - 纯 CSS3 垂直手风琴

> ID：10720591
> 
> 赞同：1
> 
> 时间：2012-05-23T13:07:25.927
> 
> 标签：css, accordion

I am having trouble figuring out a way to keep the tab open when a header is selected. 目前，选项卡仅在鼠标悬停时保持打开状态，但一旦鼠标移动到另一个区域，选项卡就会关闭。谢谢

```
 }

.verticalaccordion>ul {
    margin: 0;
    padding: 0;
    list-style:none;
    width: 280px;
    float: right;

}

.verticalaccordion>ul>li {
    display:block;
    overflow: hidden;

    margin: 0;
    padding: 0;
    list-style:none;
    height:40px;
    width: 280px;

    /* Decorative CSS */
    background-color:#f0f0f0;

}

.verticalaccordion>ul>li>h3 {
    display:block;
    margin: 0;
    padding:10px;
    height:19px;

    /* Decorative CSS */
    border-top:#f0f0f0 1px solid;
    font-family: Arial, Helvetica, sans-serif;
    text-decoration:none;

    color: #FFFFFF;
    background: #074377;

}

.verticalaccordion>ul>li>div {
    margin:0;
    overflow: auto;
    padding:10px;
    height:220px;

}

.verticalaccordion>ul>li:hover {
    height: 280px;
}

.verticalaccordion:hover>ul>li:hover>h3 {
    /* Decorative CSS */
    color:#fff;
    background: #CA006C;
}   

    verticalaccordion section:target  
    {  
        width: 30em;  
        padding: 0 1em;  
        color: #333;  
        background-color: #fff;  
    }  
    verticalaccordion section:target h2  
    {  
        position: static;  
        font-size: 1.3em;  
        text-indent: 0;  
        color: #333;  
        -webkit-transform: rotate(0deg);  
        -moz-transform: rotate(0deg);  
        -ms-transform: rotate(0deg);  
        -o-transform: rotate(0deg);  
        transform: rotate(0deg);  
    } 
```

这是其余代码的示例：

```
 <div id="google-map">
<iframe src="frame link" name="frame" width="550" marginwidth="0" height="650" marginheight="0" scrolling="No" frameborder="0" id="frame-window"></iframe></div><div class="verticalaccordion" >

  <ul>
    <li>
      <h3>Menu</h3>
      <div>
        <ul class="location">
          <li><a href="Link" target="frame">Link 1</a><br />
            <font color="#000000">Link Info</font></li>
          <li><a href="Link 2" target="frame">Link 2</a><br />
            <font color="#000000"> Link Info</font>    </li>
        </ul>
      </div>
    </li>
    </ul>
    </div> 
```

我试图让下拉菜单保持打开状态，即使鼠标不再悬停，直到选择另一个类别

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T13:10:27.893

检查我刚才制作的这个演示[http://dabblet.com/gist/1728264](http://dabblet.com/gist/1728264) - 我认为它完全符合您的要求。

# java - 隐藏一个' ' 取决于 javabean 值

> ID：10720595
> 
> 赞同：1
> 
> 时间：2012-05-23T13:07:46.817
> 
> 标签：java, html, jsp, javabeans

如标题所述，如果 bean 返回特定值，我想隐藏一个 div。我有以下代码，但不起作用（它不隐藏 div）

JSP：

```
<jsp:useBean id="Product1" type="Model.Product" scope="request" /> 
    <script>       
            if(  "empty_val".equals(${Product1.name}))
            {   
                product1.style.display = "none";
            }
    </script>

    <div id="product1"> 
```

...

Servlet 正确发送所有内容，但我找不到“处理”特定 bean 值的情况以隐藏“div”的方法。有任何想法吗？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:22:28.473

如果您的 bean 已经存在于范围中，则消除该`<jsp:useBean />`标记。

如果您打算将 写入`div`页面，但将其显示样式设置为无：

```
<div id="product1">...</div>
<script>
<c:if test="${Product1.name eq 'empty_val'}">
    product1.style.display = "none";
</c:if>
</script>
... 
```

如果您不想将其写入`div`页面：

```
<c:if test="${Product1.name ne 'empty_val'}">
    <div id="product1">...</div>
</c:if> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T13:10:52.190

更好地`<c:if>`与 JSTL 一起使用并有条件地显示 DIV

```
<c:if test="${Product1.name eq 'empty_val'}">
 <DIV></DIV>
</c:if> 
```

**看**

*   [JSTL](https://stackoverflow.com/tags/jstl/info)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T13:11:14.820

```
// JavaScript ain't Java
if ("${Product1.name}" === "empty_val") {
    ...
} 
```

...更好地根据服务器值向 div 添加一个类（例如“隐藏”），实际上不需要 JavaScript：

```
.hide {
    display: none;
} 
```

# extjs4 - ExtJS：绑定一个可观察的布尔属性

> ID：10720597
> 
> 赞同：0
> 
> 时间：2012-05-23T13:07:56.957
> 
> 标签：extjs4

我有一个包含一些选项卡（TabView）的视图。最初，某些选项卡被禁用 - 只有在满足特定条件时才应启用它们。

我想通过以下方式实现它：

创建一个包含布尔（可观察？）属性 PersonSelected 的 TabViewModel。创建 TabViewStore 将 TabViewStore 绑定到 TabView

在我的控制器中，我将有一个操作方法（例如 onPersonSelected），它应该将 PersonSelected 属性设置为 true。

将 PersonSelected 属性绑定到视图的最佳方法是什么？由于我的商店只会记录在案，我觉得使用 有点过分。我可以在没有商店的情况下这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:19:14.207

您可以简单地订阅`change`UI 元素的事件（复选框？在您的情况下）。我错过了什么吗？

# actionscript-3 - 捏以缩放 4.0 冰淇淋三明治中的独立轴

> ID：10720601
> 
> 赞同：0
> 
> 时间：2012-05-23T13:08:14.390
> 
> 标签：actionscript-3, apache-flex, flex4.5, android-4.0-ice-cream-sandwich, pinchzoom

我在 Adob​​e Flex (4.6) 中开发了一个移动应用程序，它包括使用捏拉缩放功能来放大图片，以便更轻松地阅读图片中的文字。在以前的 android 版本中（2.1 到 2.3.3 和 2.3.4，如果你正在运行 cyanogenmod），捏到缩放可以正常工作。但是，如果应用程序在 ICS (Android 4.x) 设备上运行，轴似乎可以单独处理图片的放大。即，当您将手指水平分开时，图像会变得很宽，但垂直尺寸保持不变，反之亦然。

首先，有人知道为什么会这样吗？

其次，有没有人知道如何修复它以使其像以前一样工作？

我将更新以包括屏幕截图。

**更新：**我已经确认这也是 Honeycomb 的一个问题。即，3.x OS 的行为与 4.x ICS 相同。

Sense，运行最新的 HTC 更新： ![原始图像](../Images/6101abbfe2d7ce169068af63c804c1b6.png)![捏拉缩放](../Images/d3bee0e13e51bc36b0b86e1fa26ad89f.png)![捏拉缩小](../Images/e206df84f3e69c9a47423971660dec85.png)

ICS，在 AOKP 上，但已验证这也是标准 ICS 发行版的问题： ![ICS 捏到缩放拉伸](../Images/56d4dda687078d955d6425df6515bc97.png)![可以任意拉伸...](../Images/eb8ab197f9011c7053ffb41b0afef061.png)![有点迷失方向](../Images/21e57b2179a60f3c91f4e467031d7887.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:43:27.863

解决了这个问题。代码以前是：

```
 protected function onZoom(e:TransformGestureEvent, img:Image):void
        {
                DynamicRegistration.scale(img, new Point(e.localX, e.localY), img.scaleX*e.scaleX, img.scaleY*e.scaleY);
        } 
```

将最终更改`e.scaleY`为`e.scaleX`. 这使它仅基于缩放的一部分（在 x 方向上）进行缩放，并相应地缩放 X 和 Y。不完全完美，但在实践中效果很好。

最终代码是这样的：

```
 protected function onZoom(e:TransformGestureEvent, img:Image):void
        {
                DynamicRegistration.scale(img, new Point(e.localX, e.localY), img.scaleX*e.scaleX, img.scaleY*e.scaleX);
        } 
```

# java - Android ormlite查询按另一个表排序

> ID：10720604
> 
> 赞同：1
> 
> 时间：2012-05-23T13:08:25.413
> 
> 标签：java, android, sql-order-by, ormlite

我想从 A 中查询我的数据并从 B 中按字段排序， B 中的字段可能是`null`. 有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T18:39:03.773

从 4.22 版开始，[ORMLite](http://ormlite.com/)现在支持简单的 JOIN 查询语法。这是它的文档：

> [http://ormlite.com/docs/join-queries](http://ormlite.com/docs/join-queries)

所以你的查询可能是这样的：

```
QueryBuilder<B, Integer> bQb = bDao.queryBuilder();
bQb.orderBy("someBField", true);
QueryBuilder<A, Integer> aQb = aDao.queryBuilder();
List<A> results = aQb.join(bQb).query(); 
```

您当然也可以使用这些`dao.queryRaw()`方法来构建您自己的查询。这是一个很好的例子，你将如何制定查询：

> [另一个表中的列的 SQL 顺序](https://stackoverflow.com/questions/1805600/sql-order-by-a-column-from-another-table)

# nosql - 这种DB关系设计是否有利且正确？是否应该将其转换为 no-sql 解决方案？

> ID：10720607
> 
> 赞同：0
> 
> 时间：2012-05-23T13:08:34.570
> 
> 标签：nosql, rdbms

*首先，我进行了研究，但作为一个新手，我对单词不太熟悉，因此可能无法找到正确的单词。万一可能重复，请见谅。*

**问题一：**

我有一张由`ID [PK] and LABEL [Varchar 128]`. 这里的每条记录（行）都是唯一的。我想要的是，定义这些标签之间的关系。

必备：

将有***n***个组，每个组包含一个或多个这些标签。在每个组中，每个 LABEL 可以存在或不存在（意味着一个组没有 2x 个相同的 LABEL）。

我应该如何定义这种关系？

我想创建另一个表`ID [PK] - Group ID [randomly assigned unique key] - LABEL_ID [ID of Labels table pointing to a single Label]`

**这是正确和有利的吗？**如果一个组有 10 个 LABELS，那么将有 10 条具有唯一 ID 的记录，相同的唯一分配`Group ID and LABEL_ID`指向 LABELS 表。

问题2：

**我应该放弃关系解决方案（如上所述）并选择 NoSQL 解决方案吗？**其中每个组都作为一个单独的条目单独存储到数据库中，并带有`ID [PK] - Data [Containing either labels or IDs of labels pointing to the Label table]?`

如果 NoSQL 是要走的路，我应该如何存储这些数据？

a) 我应该有 ID - 数据（包含标签）吗？b) ID - 数据（包含标签的 ID）？

问题 3：

**如果这里的 NoSQL 解决方案是最好的方法，我应该为这个用例选择哪个 NoSQL 数据库？**

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:17:38.460

这里的信息太少，无法就“to SQL or not to SQL”这个问题提出建议。

但是，我认为关系方法将如您所描述的那样。

```
CREATE TABLE Group
(
    GroupId int PRIMARY KEY
)

CREATE TABLE GroupLabel
(
    GroupId int FOREIGN KEY REFERENCES Group,
    LabelId int FOREIGN KEY REFERENCES Label,
    UNIQUE (GroupId, LabelId)
)

CREATE TABLE Label
(
    LabelId int PRIMARY KEY,
    Value varchar(100) UNIQUE
) 
```

在这里，每个标签都是唯一的，每个组中可能有很多标签，每个标签可能在很多组中，但每个标签只能在每个组中出现一次。

正如@Damien_The_Unbeliever 所指出的，`Group`如果您不需要通过使表`GroupId`上的列`GroupLabels`唯一而存储有关每个组的任何其他属性，则可以省略该表。

对于正在使用的任何 RDBMS，您可能需要稍微更改语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T13:28:54.707

此表中没有真正需要`ID`列`GroupLabels`：

```
CREATE TABLE GroupLabels (
     GroupID int not null,
     LabelID int not null,
     constraint PK_GroupLabels PRIMARY KEY (GroupID,LabelID),
     constraint FK_GroupLabels_Groups FOREIGN KEY (GroupID) references Groups,
     constraint FK_GroupLabels_Labels FOREIGN KEY (LabelID) references Labels
) 
```

通过执行上述操作，我们自动实现了一个约束——同一个标签不能多次添加到同一个组中。

综上所述，我想说这是一个相当常见的 SQL 解决方案。

# sql-server - 服务器上的 Sql Server CE“提供程序未注册”错误

> ID：10720609
> 
> 赞同：0
> 
> 时间：2012-05-23T13:08:40.000
> 
> 标签：sql-server, configuration, driver

我有一个配置为使用 NUnit 和 Sql Server Compact Edition 4.0（通过 Nuget 安装）进行单元测试的 .NET 控制台应用程序。在我的本地机器（运行 Windows 7）上一切正常，但是当我将它推送到构建服务器（Win2k3）时，我不断收到错误消息：“Provider Microsoft.SQLSERVER.CE.OLEDB.4.0 未在本地机器上注册” . （这是我用来连接到我的 sdf 文件的临时实例的提供程序）。我们的 Windows2k3 构建服务器是一个 64 位机器，应用程序配置为针对 x86 平台构建，但平台目标设置为“任何 CPU”。

# iphone - 如何通过旋转在圆形轨迹上移动uiview？

> ID：10720618
> 
> 赞同：3
> 
> 时间：2012-05-23T13:09:07.753
> 
> 标签：iphone, objective-c, ios, core-animation

就像图片中的路径

（新用户不能发图片，抱歉只能给链接）

[http://cdn.dropmark.com/30180/3bd0f0fc6ee77c1b6f0e05e3ea14c821f8b48a82/questiong1-1.jpg](http://cdn.dropmark.com/30180/3bd0f0fc6ee77c1b6f0e05e3ea14c821f8b48a82/questiong1-1.jpg)

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T13:51:53.917

在触摸事件委托上试试这个（如果你想用触摸事件旋转视图）-

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
  {
    touches = [event allTouches];
    UITouch *touch = [[event allTouches] anyObject];

    CGPoint Pageposition = [touch locationInView:self];

    CGPoint prevPoint = [[[touches allObjects] objectAtIndex:0] previousLocationInView:self];
    CGPoint curPoint = [[[touches allObjects] objectAtIndex:0] locationInView:self];

    float prevAngle = atan2(prevPoint.x, prevPoint.y);
    float curAngle= atan2(curPoint.x, curPoint.y);
    float angleDifference = curAngle - prevAngle;

    CGAffineTransform newTransform3 = CGAffineTransformRotate(self.transform, angleDifference);
    self.transform = newTransform3;
  } 
```

使用变换旋转，并告诉我它是否有效..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T13:39:58.527

请查看[我对“围绕任意点旋转标签”的问题的回答，以获得](https://stackoverflow.com/questions/6160519/how-to-rotate-an-object-around-a-arbitrary-point/10651195#10651195)有关旋转时使用锚点的更详细说明（忽略关键帧动画答案，因为它们更复杂，而不是“正确的工具”工作”，即使答案是这样说的）。

**简而言之：**将锚点设置为点（在视图层的单位坐标系中）到视图之外的点，然后应用正常的旋转动画。

* * *

### 编辑：要记住的一件事

图层的框架（也是视图的框架）是使用位置、边界和锚点计算的。更改锚点将更改您的视图在屏幕上的显示位置。您可以通过在更改锚点后重新设置框架来解决此问题（这将为您设置位置）。否则，您可以将位置设置为您自己旋转的点。[Layer Geometry and Transforms](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/Layers.html "核心动画编程指南")（链接到另一个问题）也提到了这一点。

* * *

我在该答案中提供的代码（概括为 UIView 和核心动画而不是 UIView 动画）：

```
#define DEGREES_TO_RADIANS(angle) (angle/180.0*M_PI)

- (void)rotateView:(UIView *)view 
       aroundPoint:(CGPoint)rotationPoint 
          duration:(NSTimeInterval)duration 
           degrees:(CGFloat)degrees {

    CABasicAnimation *rotationAnimation = [CABasicAnimation animationWithKeyPath:@"transform"];
    [rotationAnimation setDuration:duration];
    // Additional animation configurations here...

    // The anchor point is expressed in the unit coordinate
    // system ((0,0) to (1,1)) of the label. Therefore the 
    // x and y difference must be divided by the width and 
    // height of the view (divide x difference by width and 
    // y difference by height).
    CGPoint anchorPoint = CGPointMake((rotationPoint.x - CGRectGetMinX(view.frame))/CGRectGetWidth(view.bounds),
                                      (rotationPoint.y - CGRectGetMinY(view.frame))/CGRectGetHeight(view.bounds));

    [[view layer] setAnchorPoint:anchorPoint];
    [[view layer] setPosition:rotationPoint]; // change the position here to keep the frame
    CATransform3D rotationTransform = CATransform3DMakeRotation(DEGREES_TO_RADIANS(degrees), 0, 0, 1);
    [rotationAnimation setToValue:[NSValue valueWithCATransform3D:rotationTransform]];

    // Add the animation to the views layer
    [[view layer] addAnimation:rotationAnimation
                        forKey:@"rotateAroundAnchorPoint"]  
} 
```

# javascript - 返回被点击元素js的背景颜色

> ID：10720620
> 
> 赞同：0
> 
> 时间：2012-05-23T13:09:19.070
> 
> 标签：javascript, html, onclick

我想使用 javascript 将元素的背景颜色发送到函数，例如：

```
<td style="background-color:#ff0000" onClick="getColor()"></td> 
```

谁能给我一个关于我必须在 getColor() 函数中做什么的指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:12:11.943

将其更改为：

```
<td style="background-color:#ff0000" onClick="getColor(this)"></td> 
```

这将是 javasctipt：

```
getColor(elem){
    alert(elem.style.backgroundColor);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T13:12:19.733

如果 jQuery 没问题：

```
<td style="background-color:#ff0000" onClick="getColor(this)"></td>
<script>
function getColor(element) {
    var bgColor = $(element).css('background-color');
    // ... do something with bgColor here...
}
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T13:16:27.397

修改调用以将对象作为参数发送。像这样-

```
<td style="background-color:#ff0000" onClick="getColor(this)"></td> 
```

功能将是-

```
function getColor(obj){
 var bgColor = obj.style.backgroundColor;
 alert(var);
} 
```

# asp.net - ASP 中带有数字的动态购物车图标图像

> ID：10720622
> 
> 赞同：1
> 
> 时间：2012-05-23T13:09:31.807
> 
> 标签：asp.net, database, dynamic, png

我已经看过无数次了，但我是一名前端人员，编写 ASP（我们有一个 .Net/Modified MS StoreFront 设置）不是我的强项。我想创建一个购物车图标/图像，其中动态显示图像中的篮子中有多少物品。这些将显示在购物车图标上方的一个红色小气泡中。如果篮子里没有物品，红色气泡甚至不会显示。我只是不确定如何完成它。提前感谢您的任何建议！

对于基本文本返回，数据库调用是：

```
((!NUM_CART_ITEMS!)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:34:09.350

您必须在图像上进行文本定位，如以下链接中所述：

[使用 CSS 位置属性在图像上放置文本](http://frinity.blogspot.in/2008/06/placing-text-over-image-using-css.html)

例如。

```
<div><img src="YOUR-IMAGE-URL" /></div>
<div style="position: absolute; left: 20px; top: 160px;">
PUT-TEXT-NEED-TO-BE-DISPLAYED-ON-IMAGE
</div> 
```

根据您的需要修改样式属性。您可以根据需要使用**绝对或相对**定位。

# c# - 如何使树视图控件的子节点使面板控件可见

> ID：10720623
> 
> 赞同：-1
> 
> 时间：2012-05-23T13:09:34.660
> 
> 标签：c#, asp.net, treeview

如何为树视图控件的子节点编写单击事件...如果我单击子节点，则应该可以看到静态面板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:14:11.603

据我所知，唯一的方法是以编程方式告诉选择了哪个节点（通过 e.Node 参数检索适当的节点），然后触发相应的功能。此代码可以放在 TreeView.AfterSelect 事件中。

# matlab - 关于 MATLAB 中 fftshift 和 fft2 的困惑

> ID：10720627
> 
> 赞同：0
> 
> 时间：2012-05-23T13:09:51.640
> 
> 标签：matlab, fft

我对如何在 Matlab 中正确应用 FFT 变换及其逆变换感到非常困惑。我有一个我需要的程序

1.  将 FFT2 应用于大小为 4x32 的矩阵（对应于模式`m=-1:2`, `n=-15:16`）
2.  做一些处理，这导致另一个函数的系数矩阵，其傅里叶系数通过一个简单的代数（按分量）公式与第一组数据相关
3.  使用这两个函数的一些属性，让我可以通过对形式的表达式求和来计算我需要的内容，`2*abs(A_n)*cos(phi+n*theta+alpha_n)`其中`A_n`是`m=1`模式的第 n 个系数 和`alpha_n = arg(A_n)`。

我对 FFT2 函数进行了一些实验，并试图了解它是如何安排输出的。根据我的理解（来自我的课程文献中的来源），系数将按照以下脚本的说明进行排序：

```
>>m = -1:2; n = -7:8;
>>[N,M] = meshgrid(n,m); 
>>MN = M; MN(:,:,2) = N; 
>>asfft = @(X) [X(2:4,8:16,:) X(2:4,1:7,:); X(1,8:16,:) X(1,1:7,:)];
>>asfft(MN)
ans(:,:,1) =
     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0
     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1
     2     2     2     2     2     2     2     2     2     2     2     2     2     2     2     2
    -1    -1    -1    -1    -1    -1    -1    -1    -1    -1    -1    -1    -1    -1    -1    -1
ans(:,:,2) =
     0     1     2     3     4     5     6     7     8    -7    -6    -5    -4    -3    -2    -1
     0     1     2     3     4     5     6     7     8    -7    -6    -5    -4    -3    -2    -1
     0     1     2     3     4     5     6     7     8    -7    -6    -5    -4    -3    -2    -1
     0     1     2     3     4     5     6     7     8    -7    -6    -5    -4    -3    -2    -1 
```

where`asfft`以我认为的相同方式重新排序索引`fft2`，但没有其他任何作用。换句话说，每个索引从 0 到最大值排序，然后从最小值到 -1。根据文档，我应该能够重新排列它，所以我在中间使用 0 得到 0 `fftshift`，但这并没有给我我期望的输出。相反，我得到了这个：

```
>> fftshift(asfft(MN))
ans(:,:,1) =
     8    -7    -6    -5    -4    -3    -2    -1     0     1     2     3     4     5     6     7
     8    -7    -6    -5    -4    -3    -2    -1     0     1     2     3     4     5     6     7
     8    -7    -6    -5    -4    -3    -2    -1     0     1     2     3     4     5     6     7
     8    -7    -6    -5    -4    -3    -2    -1     0     1     2     3     4     5     6     7
ans(:,:,2) =
     2     2     2     2     2     2     2     2     2     2     2     2     2     2     2     2
    -1    -1    -1    -1    -1    -1    -1    -1    -1    -1    -1    -1    -1    -1    -1    -1
     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0
     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1 
```

如您所见，最大值位于频谱的错误一侧-而不是`-7 -6 ... -1 0 1 ... 8`and`-1 0 1 2`我有`8 -7 6 ...`and `2 -1 0 1`。这对我来说是致命的，因为为了能够进行上面 3 中描述的计算，我需要知道各个系数的索引。（这两个层也被切换了，但这对我来说并不重要，因为我只打算在 MxN 矩阵上执行此操作，而不是在 Nd 阵列上，稍后。）

为什么是这样？我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T13:30:08.087

首先考虑简单的一维案例，`fft`为您提供：

```
[X(0) X(1) X(2) ... X(N/2-1) X(-N/2) X(-N/2+1) ... X(-1)] 
```

我`X(k)`用来表示[数学 DFT](http://en.wikipedia.org/wiki/Discrete_Fourier_transform#Definition)的元素的地方。

`fftshift`所做的就是将它们旋转，所以你`N/2`最终得到：

```
[X(-N/2) X(-N/2+1) ... X(-1) X(0) X(1) X(2) ... X(N/2-1)] 
```

即线性顺序。¹

在多维情况下，`fftshift`只需在所有维度上应用此旋转即可。

* * *

[1\. 虽然根据定义，`X(k) == X(N+k)`对于 DFT，未旋转的向量也是“线性”顺序！]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:47:00.447

检查这个新闻阅读条目 [http://www.mathworks.com/matlabcentral/newsreader/view_thread/285244](http://www.mathworks.com/matlabcentral/newsreader/view_thread/285244)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-23T13:41:41.863

从 Oli 排队，问题是你没有在中间解析它：

因此对于`asfft = @(X) [X(2:4,8:16,:) X(2:4,1:7,:); X(1,8:16,:) X(1,1:7,:)];`

```
size(8:16)
ans =
     1     9
size(1:7)
ans =
     1     7 
```

这样做：

```
asfft = @(X) [X(3:4,9:16,:) X(3:4,1:8,:); X(1:2,9:16,:) X(1:2,1:8,:)]; 
```

# php - 发出 GET 请求并在 AJAX、php 中发送最后日期

> ID：10720629
> 
> 赞同：1
> 
> 时间：2012-05-23T13:10:00.847
> 
> 标签：php, ajax

所以我从我的服务器发出了一些数据的获取请求。现在我正在尝试发出 GET 请求并从我的服务器获取最新数据。我需要将最新获取请求的最新日期保存在某个地方。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:14:04.367

我认为您正在使用 JSON。只需使用 PHP 生成实际日期：getdate()（阅读手册），并将其放入您的 JSON 对象中！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:17:37.157

我认为这就是您要寻找的内容[如何在 PHP 中将数据保存在应用程序范围内？](https://stackoverflow.com/questions/3713311/how-do-i-save-data-in-an-application-scope-in-php)

使用它来保存应用程序范围内的日期。因此，您下次拨打电话时会收到此信息。

# php - Uploadify中的302和IO错误

> ID：10720633
> 
> 赞同：0
> 
> 时间：2012-05-23T13:10:07.907
> 
> 标签：php, uploadify

在我的本地机器上使用uploadify 进行图像处理。但是在另一个页面刷新之后uploadify开始给我IO和HTTP 302错误。有什么想法吗？顺便说一句，试图将这些指令放入 .htaccess

```
SecFilterEngine Off
SecFilterScanPOST Off 
```

但在那之后它根本不起作用（没有显示swf按钮，选择时没有自动上传）。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:36:15.360

在我看来，插入头部的脚本没有指向正确的文件。您能否发布您的脚本并解释上传目录与您的页面相关的位置？例如，如果您的 uploadify 目录的位置位于 www.yourdomain.com/uploadify 并且您的页面存储在 www.yourdomain.com/somedirectory/somefile.html，那么您将必须在目录位置进行备份。下面的代码应该对您有所帮助。还要确保您的服务器允许将文件上传到它。

```
<script type="text/javascript" src="../uploadify/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="../uploadify/swfobject.js"></script>
<script type="text/javascript" src="../uploadify/jquery.uploadify.v2.1.4.min.js">       </script>
<script type="text/javascript">
// <![CDATA[
$(document).ready(function() {
  $('#file_upload').uploadify({
    'uploader'  : '../uploadify/uploadify.swf',
    'script'    : '../uploadify/uploadify.php',
    'cancelImg' : '../uploadify/cancel.png',
    'folder'    : 'somefolder',
    'auto'      : true,
  });
});
// ]]>
</script> 
```

# c# - 在嵌套内容页面中引用公共对象

> ID：10720643
> 
> 赞同：0
> 
> 时间：2012-05-23T13:10:39.017
> 
> 标签：c#, asp.net, webforms, master-pages

我的页面结构是：

```
MainNew (Master Page)
|
-->  Store (Nested Master Page)
     |
     -->  StoreCheckout.aspx (Content Page) 
```

`MainNew`有声明

```
public LoggedInUser ThisUser { get; set; } 
```

`Nested Masterpage`我可以按如下方式访问此属性：

```
((MasterPages_MainNew)Master).ThisUser 
```

但我似乎无法弄清楚如何`ThisUser`从内容页面引用。谁能告诉我语法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:14:11.393

```
((MasterPages_MainNew)this.Master.Master).ThisUser 
```

# prolog - \+ 在 Prolog 中做了什么？

> ID：10720644
> 
> 赞同：2
> 
> 时间：2012-05-23T13:10:42.590
> 
> 标签：prolog

我正在研究这段代码，颜色函数中有一个+，我不知道它是做什么的。我对此感到非常困惑，我基本上坚持这一点，因为我无法理解它的作用。

```
/* prolog  tutorial 2.9 Map coloring redux */
adjacent(X,Y,Map) :-  member([X,Y],Map) ; member([Y,X],Map). 
find_regions([],R,R). 
find_regions([[X,Y]|S], R,A) :- 
 (member(X,R) ->  
  (member(Y,R) -> find_regions(S,R,A) ; find_regions(S,[Y|R],A)) ; 
    (member(Y,R) -> find_regions(S,[X|R],A) ; find_regions(S,[X,Y|R],A) ) ). 

color(Map,Colors,Coloring) :-
    find_regions(Map,[],Regions), 
    color_all(Regions,Colors,Coloring), 
    \+ conflict(Map,Coloring). 
color_all([R|Rs],Colors,[[R,C]|A]) :- 
    member(C,Colors), 
    color_all(Rs,Colors,A). 
color_all([],_,[]). 

conflict(Map,Coloring) :- 
    member([R1,C],Coloring), 
    member([R2,C],Coloring), 
    adjacent(R1,R2,Map). 

map1([[1,2],[1,3],[1,4],[1,5],[2,3],[2,4],[3,4],[4,5]] ). 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T13:22:56.857

这是一个否定，请参阅[此处](http://www.cse.unsw.edu.au/~billw/prologdict.html#negation)以获取示例的详细说明。您基本上可以将其理解为等同于“不”，或者更准确地说，“不可证明”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T13:28:22.227

“在标准 Prolog 中，运算符 + 表示否定失败”

[这里](http://www.learnprolognow.org/lpnpage.php?pagetype=html&pageid=lpn-htmlse45)有一个很好的教程。

# actionscript-3 - Flash 使用自动完成功能开发奇怪的行为

> ID：10720655
> 
> 赞同：1
> 
> 时间：2012-05-23T13:11:14.740
> 
> 标签：actionscript-3, flashdevelop

嘿，快速的问题，

FD 中的自动完成功能开始做一些奇怪的事情。

通常当你输入

```
var position:Point 
```

FD 只是在 Imports 中有 game.geom 路径。

在我的一堂课上，当我键入它时，它会自动完成

```
var position:flash.geom.Point 
```

到处。并且对 Rectangle 类做同样的事情。

当有两个具有相同名称的类（不明确的调用）时，我有这种行为，但我在这里没有这个问题。

如果有人有想法？

非常感谢

## 编辑

发现问题...

我有一个名为“flash”的变量

```
var flash:Blink; 
```

确实如此模棱两可的电话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:22:24.253

当我将一个 swc 添加到我的项目中时，我曾经发生过这种情况，该项目与为 Flash Develop 设置的 sdk 具有相同的类。

我会确保您没有引用任何其他可能与这些类重复的 swc 或 sdk。

如果失败，我可能会备份我的用户设置并重新安装。

# php - 从 PHP 和 PDF 转换

> ID：10720658
> 
> 赞同：0
> 
> 时间：2012-05-23T13:11:18.347
> 
> 标签：php, html, pdf, dompdf

我需要从 Php(html Table) 转换为 Pdf。我已使用 DOM PDf 进行转换。但我没有在 pdf 中得到正确的视图。请找到以下图片。

PDF 视图

![Pdf查看](../Images/56a046a03f5062ceae28d0085e34807b.png)

HTML 视图

![html视图](../Images/28fae5efce739844d1c1dcef0955680e.png)

下面的代码：

```
<html>
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  </head>
<?php if(count($this->userDetails)>=1){ for($a=0;$a<count($this->userDetails);$a++){ $user = $this->userDetails[$a]; ?>
  <body>
    <div style="background-image: url(http://192.168.2.26/skins/schooladmin/images/id_bg.png); background-repeat: repeat; width:400px; height:220px;margin:10px 0px 0px 10px;float:left;position:relative;">
<table style="font-family:Verdana, Arial, Helvetica, sans-serif; font-size:14px; font-weight:bold; color:#fff; background-image:url(http://192.168.2.26/skins/schooladmin/images/id_white_bg.png); background-repeat:no-repeat;" width="100%" border="0" cellpadding="5" cellspacing="5">
  <tr>
    <td style="background-image: url(http://192.168.2.26/skins/schooladmin/images/schoollogo.png); background-repeat:no-repeat; width:36px; height:61px;">&nbsp;</td>
    <td colspan="2"><?php echo $this->schoolDetails['name'] ?></td>
    </tr>
<?php
    if($user){
    $user['userdetails']['name'] = $user['userdetails']['firstname'].$user['userdetails']['lastname'];
    $photoPath = BASE_PATH."/uploads/photos/student/".$user['userdetails']['photo'];
    if(!file_exists($photoPath)){
        $photoPath = BASE_PATH."/skins/schooladmin/images/id_photo.png";
    }
    }else{
        $photoPath = BASE_PATH."/skins/schooladmin/images/id_photo.png";
    }
?>
  <tr>
    <td style="background-image: url(<?php echo $photoPath; ?>); background-repeat:no-repeat; width:82px; height:82px;">&nbsp;</td>
    <td colspan="2">
    <table width="100%" border="0" cellspacing="3" cellpadding="3" style="font-family:Verdana, Arial, Helvetica, sans-serif; font-size:12px; font-weight:bold; color:#fff;" >
    <?php if($this->templateDetails['template']){ 
        for($i=0;$i<1;$i++){
            for($j=0;$j<count($this->templateDetails['template_details']);$j++){
                if($this->templateDetails['template_details'][$j]['type'] == "text" && $this->templateDetails['template_details'][$j]['page'] == "front"){
    ?>
      <tr>
        <td width="38%"><?php echo $this->templateDetails['template_details'][$j]['label']; ?></td>
        <td width="62%"><?php echo @$user['userdetails'][$this->templateDetails['template_details'][$j]['field']]; ?></td>
      </tr>
    <?php } } } } ?>
    </table>
    </td>
    </tr>
    <tr>
        <td colspan="3" style="font-family:Verdana, Arial, Helvetica, sans-serif; font-size:12px; font-weight:bold; color:#fff;"  align="center"><?php echo $this->schoolDetails['address'] ?>, <?php echo $this->schoolDetails['address2'] ?>, <?php echo $this->schoolDetails['city'] ?> - <?php echo $this->schoolDetails['zipcode'] ?></td>
    </tr>
    <tr>
        <td colspan="3" style="font-family:Verdana, Arial, Helvetica, sans-serif; font-size:12px; font-weight:bold; color:#fff;"  align="center">Ph: <?php echo $this->schoolDetails['contactno'] ?></td>
    </tr>
</table>
    </div>

    <div style="background-image: url(http://192.168.2.26/skins/schooladmin/images/id_bg.png); background-repeat: repeat; width:400px; height:220px;margin:10px 0px 0px 10px;float:left;position:relative;">
<table style="font-family:Verdana, Arial, Helvetica, sans-serif; font-size:14px; font-weight:bold; color:#fff; background-image:url(http://192.168.2.26/skins/schooladmin/images/id_white_bg.png); background-repeat:no-repeat;" width="100%" border="0" cellpadding="5" cellspacing="5">
    <?php if($this->templateDetails['template']){ 
        for($i=0;$i<1;$i++){
            for($j=0;$j<count($this->templateDetails['template_details']);$j++){
                if($this->templateDetails['template_details'][$j]['type'] == "text" && $this->templateDetails['template_details'][$j]['page'] == "back"){
    ?>
      <tr>
        <td width="38%"><?php echo $this->templateDetails['template_details'][$j]['label']; ?></td>
        <td width="62%"><?php echo @$user['userdetails'][$this->templateDetails['template_details'][$j]['field']]; ?></td>
      </tr>
    <?php } } } } ?>
</table>
    </div>
    <?php } }  ?>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T14:12:14.847

我建议不要尝试修改您的 HTML，以便它以这种方式转换为 PDF。当您切换渲染引擎甚至打印机时，您将花费大量精力来调整可能会改变的东西。

[如果您使用FPDF](http://www.fpdf.org/)或[TCPDF](http://www.tcpdf.org/)本地创建 PDF，您会更轻松。例如（只是为了让你开始）：

```
<?php

require_once('/path/to/tcpdf.php');

// misc variables
$lightblue = array(100, 100, 250);
$darkblue = array(0, 0, 255);
$white = array(255, 255, 255);

// prepare new PDF document
$pdf = new TCPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, true, 'UTF-8', false);
$pdf->SetFont('helvetica', 'B', 20);

// add a page
$pdf->AddPage();

// set the coordinates of the gradient
$coords = array(0, 1, 1, 0);

// paint a linear gradient
$pdf->LinearGradient(20, 45, 105, 60, $lightblue, $darkblue, $coords);

// write text
$pdf->SetTextColorArray($white);
$pdf->Text(40, 50, 'hello');
$pdf->Text(40, 60, 'world');

// Close and output PDF document
$pdf->Output('tkexample.pdf', 'I'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:23:08.043

要获得 100% 相同的视图，请使用 php fpdf 库。您可以从[此处获取所有支持、教程和下载](http://www.fpdf.org)

# ios - 在 Storyboard 上使用内置的 UITabBarItem 图像

> ID：10720662
> 
> 赞同：2
> 
> 时间：2012-05-23T13:11:32.330
> 
> 标签：ios

我的标签栏是通过情节提要创建的。我试图弄清楚如何更改项目以使用内置图像。只能以编程方式访问内置图像吗？如果是这样，我将使用什么代码来访问它们？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T12:00:11.543

我假设您在谈论[UITabBarSystemItem 选择](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITabBarItem_Class/Reference/Reference.html#//apple_ref/c/tdef/UITabBarSystemItem)？您可以在 IB/Storyboard 中通过单击选项卡栏项目和属性检查器来设置它，然后选择一个标识符。请参阅随附的屏幕截图：

![第1步](../Images/4c7f0ea3b9bb1e9c9e4a490a393b0abd.png)

* * *

![第2步](../Images/e177ad488b2d72f4084886b901420fed.png)

# sharepoint - 访问 Sharepoint 视图

> ID：10720666
> 
> 赞同：0
> 
> 时间：2012-05-23T13:11:38.997
> 
> 标签：sharepoint, sharepoint-2010

我创建了一个包含 4 列的自定义列表，并为此列表创建了两个视图 view1 和 view2。现在我有 2 个共享点组，group1 和 group2。我的要求是我想限制 group1 中的用户只能在 view1 中查看项目，而 group2 只能在 view2 中查看项目。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T23:57:41.313

您需要做一些“受众定位”：

[看一下这个](http://office.microsoft.com/en-us/sharepoint-server-help/target-content-to-specific-audiences-HA010169053.aspx)

# android - 在屏幕超时时保持 Android 应用程序处于活动状态

> ID：10720668
> 
> 赞同：0
> 
> 时间：2012-05-23T13:11:46.410
> 
> 标签：android, eclipse, android-activity, timeout

我对制作 Android 应用程序还很陌生，所以我有一个问题。

如果我让我的应用程序运行并等待几秒钟，我的屏幕就会超时。问题是当我再次解锁屏幕时，我的应用程序已关闭。我希望应用程序在屏幕超时时保持活动状态，这样我就不必重新启动应用程序。

我不想让应用程序在后台运行，也不想禁用屏幕超时。我只是不希望应用程序在屏幕自动超时后自行关闭。

有没有机会这样做？

_EDIT > 添加了我的一些代码。

**安卓清单**

```
 <supports-screens
    android:largeScreens="true"
    android:normalScreens="true"
    android:smallScreens="true"
    android:resizeable="true"
    android:anyDensity="true"
    />
    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.RECEIVE_SMS" />
    <uses-permission android:name="android.permission.RECORD_AUDIO" />
    <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <uses-permission android:name="android.permission.WRITE_CONTACTS" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.BROADCAST_STICKY" />

    <uses-sdk android:minSdkVersion="10" />

    <application
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name" >
            <activity
                    android:name=".SIOM_AndroidActivity"
                    android:label="@string/app_name"
                    android:screenOrientation="portrait"
                    android:configChanges="orientation|keyboardHidden" 
                    android:theme="@android:style/Theme.NoTitleBar" >
                    <intent-filter>
                            <action android:name="android.intent.action.MAIN" />
                            <category android:name="android.intent.category.LAUNCHER" />
                    </intent-filter>
            </activity>     
            <activity 
                    android:name="com.phonegap.DroidGap" 
                    android:label="@string/app_name" 
                    android:screenOrientation="portrait"
                    android:configChanges="orientation|keyboardHidden" > 
                    <intent-filter> 
                    </intent-filter> 
            </activity>
    </application>
</manifest> 
```

**安卓活动**

```
package com.siom.android;

import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.os.Bundle;
import android.view.KeyEvent;
import android.webkit.JsResult;
import android.webkit.WebChromeClient;
import android.webkit.WebView;
import android.webkit.WebViewClient;

import com.phonegap.*;

public class SIOM_AndroidActivity extends DroidGap {
    /** Called when the activity is first created. */
    /** @Override */
    WebView mWebView;
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
            super.init();
            super.clearCache();
            setContentView(R.layout.main);

            mWebView = (WebView) findViewById(R.id.webview);
            mWebView.getSettings().setJavaScriptEnabled(true);
            mWebView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
            mWebView.setWebViewClient(new HelloWebViewClient());
            mWebView.setWebChromeClient(new MyWebChromeClient());

            mWebView.loadUrl("http://www.example.com/test.html");
    }

    // Maakt een WebChromeClient class aan
    final Context myApp = this;
    final class MyWebChromeClient extends WebChromeClient {

        // Zorgt er voor dat confirm werkt in WebView
        @Override
        public boolean onJsConfirm(WebView view, String url, String message, final JsResult result) {
            new AlertDialog.Builder(myApp)
            .setTitle("Title here")
            .setMessage(message)
            .setPositiveButton(android.R.string.ok,
                new DialogInterface.OnClickListener()
                {
                    public void onClick(DialogInterface dialog, int which)
                    {
                        result.confirm();
                    }
                })
            .setNegativeButton(android.R.string.cancel,
                new DialogInterface.OnClickListener()
                {
                    public void onClick(DialogInterface dialog, int which)
                    {
                        result.cancel();
                    }
                })
            .create()
            .show();
                 return true;
        }

        // Zorgt er voor dat alert werkt in WebView
        @Override
        public boolean onJsAlert(WebView view, String url, String message, final JsResult result) {
            new AlertDialog.Builder(myApp)
            .setTitle("Title here")
            .setMessage(message)
            .setPositiveButton(android.R.string.ok,
                new AlertDialog.OnClickListener()
                {
                    public void onClick(DialogInterface dialog, int which)
                    {
                        result.confirm();
                    }
                })
            .setCancelable(false)
            .create()
            .show();
                 return true;
        }
    }
    // Alle links worden in webview geladen
    private class HelloWebViewClient extends WebViewClient {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);
            return true;
        }
    }

    // Geeft de back knop een goback actie
    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if ((keyCode == KeyEvent.KEYCODE_BACK) && mWebView.canGoBack()) {
            mWebView.goBack();
            return true;
        }
        if (keyCode == KeyEvent.KEYCODE_MENU) {
            return true;
        }
        return super.onKeyDown(keyCode, event);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:31:42.393

你的问题没有直接的答案。看看[图 1。活动生命周期](http://developer.android.com/guide/topics/fundamentals/activities.html)

该概念表示，当屏幕锁定时，您的活动不再可见（onPause()）。当屏幕重新打开时，会调用 onResume()。您可以使用这些方法来获得所需的结果。

通常，我初始化活动的所有 onCreate() 并刷新值（如果有 onResume()）。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:13:26.567

经过这么多小时、几天、几周甚至几个月的尝试来解决这个问题，我终于找到了它。

如果您查看我在第一篇文章中添加的代码，您会看到以下两行代码：

```
super.init();
super.clearCache(); 
```

这两个小家伙一遍又一遍地让我的应用程序崩溃，现在在我查看它之后，难怪他们做到了。添加这些是因为我第一次使用 PhoneGap 并在某处遵循一些教程告诉我添加这些行。再次删除这两行后，我的应用程序再次照常工作。仅删除一行也不起作用。

有时编程真的是地狱。

# windows - 为什么 PowerShell 在设置执行策略权限时抛出注册表访问错误？

> ID：10720669
> 
> 赞同：0
> 
> 时间：2012-05-23T13:11:48.437
> 
> 标签：windows, powershell

我尝试[在 PowerShell 中设置执行策略权限](https://technet.microsoft.com/en-us/library/ee176961.aspx)以启用使用此 Cmdlet 执行脚本，

```
PS C:\> Set-ExecutionPolicy Unrestricted 
```

但 PowerShell 控制台给出了`Registry access denied`错误。语法似乎没问题。我是否忽略了什么。请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T13:27:57.577

您应该使用提升的权限运行 PowerShell。只需右键单击 Windows PowerShell 并单击以管理员身份运行即可以提升的权限打开 PowerShell。

# openlayers - 如何根据缩放级别加载图层？

> ID：10720670
> 
> 赞同：10
> 
> 时间：2012-05-23T13:11:49.313
> 
> 标签：openlayers

我想控制 OpenLayers 中的缩放。

当缩放为 3 时，我想加载 KML1，当缩放为 4 时，我想加载 KML2。

你能告诉我如何控制缩放事件吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T08:04:16.340

正如 j_freyre 所提到的，您应该将一个函数注册为“zoomend”事件，该函数会更改 KML 层的可见性。在您的情况下，它必须如下所示：

```
map.events.register("zoomend", map, zoomChanged);

zoomChanged()
{
  zoom = map.getZoom();
  if (zoom == 3)
  {
    kml1.setVisibility (true);
    kml2.setVisibility (false);
  }
  else if (zoom == 4)
  {
    kml1.setVisibility (false);
    kml2.setVisibility (true);
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T13:16:19.923

实现这一点的一种方法是在地图上的事件“zoomend”上注册一个事件，例如

```
map.events.register(type, obj, listener); 
```

您可以在此处找到更多信息：[http ://dev.openlayers.org/releases/OpenLayers-2.11/doc/apidocs/files/OpenLayers/Map-js.html](http://dev.openlayers.org/releases/OpenLayers-2.11/doc/apidocs/files/OpenLayers/Map-js.html)

也许您还应该加载两个 kml，然后根据缩放级别隐藏/显示正确的图层。

# mysql - MySQL用户自定义函数生成主键

> ID：10720673
> 
> 赞同：1
> 
> 时间：2012-05-23T13:11:59.520
> 
> 标签：mysql, database, user-defined-functions

我认为在 PostgreSQL 中，您可以使用函数在表中生成主键，而不仅仅是使用 auto_increment。类似于：

```
CREATE TABLE `blah` (
    `id` bigint(20) unsigned NOT NULL my_generator_function(),
    etc. 
```

哪里`my_generator_function()`会返回一个bigint。

MySQL 可以做到这一点，还是我必须自己从应用程序代码中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:23:03.763

您可以创建一个触发器 -

```
CREATE TRIGGER trigger1
  BEFORE INSERT
  ON table1
  FOR EACH ROW
BEGIN
  IF NEW.id = 0 THEN -- generate new ID if zero is set
    SET NEW.id = ...; -- write your code to generate new ID
  END IF;
END 
```

# asp.net - ASP 网页中的免注册 COM

> ID：10720676
> 
> 赞同：1
> 
> 时间：2012-05-23T13:12:07.960
> 
> 标签：asp.net, web-applications, dll, com, regfreecom

我有一个网页应用程序，它在 DLL 和 OCX 后面的代码中使用，其中一些 DLL 是 VB6，其他的是 C++。目前对这些 DLL/OCX 的访问是通过注册表进行的，我想使用[RegFree COM](http://msdn.microsoft.com/en-us/library/ms973913.aspx)更改它。

问题：到目前为止，我发现的所有示例都演示了如何使用清单文件修改访问 DLL 到 Registry Free 的 EXE，假设我们有一个 EXE 和一个 DLL，Registration Free 访问将为 EXE 生成一个清单文件（在设置了对 DLL mnaifest 的依赖项）和另一个用于 DLL（引用 DLL）的依赖项，在我的情况下，我没有 EXE，但有一个浏览器，所以我被 EXE 的清单卡住了。

是否可以在我的场景中使用 Registry Free COM？如果是，我在哪里设置 EXE-> DLL 之间的依赖关系，它在 Visual Studio 的某个地方吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T00:36:39.227

也许您可以查看描述所需过程的[http://www.mazecomputer.com/sxs/help/iis6config.htm 。](http://www.mazecomputer.com/sxs/help/iis6config.htm)

如果你真正的意思是 ASP.Net 试试[http://www.mazecomputer.com/sxs/help/iis6aspnet2.htm](http://www.mazecomputer.com/sxs/help/iis6aspnet2.htm)

# c#-4.0 - 如何获取枚举变量的值？

> ID：10720677
> 
> 赞同：2
> 
> 时间：2012-05-23T13:12:11.120
> 
> 标签：c#-4.0, enums

我的问题是如何获取枚举变量的值？

![在此处输入图像描述](../Images/63a5c9f47018fb3d40e6342d5473b037.png) 请查看随附的屏幕截图...“hatas”是一个标志枚举。我想得到“HasError”-“NameOrDisplayNameTooShort”错误来显示它们。

```
using System;

namespace CampaignManager.Enums
{
    [Flags]
    public enum CampaignCreaterUpdaterErrorMessage
    {
        NoError = 0,
        HasError = 1,
        NameOrDisplaynameTooShort = 2,
        InvalidFirstName = 3,
    }
} 
```

我简单地尝试过；

```
Messagebox.Show(hatas);  // it's showing InvalidFirstName somehow... 
```

非常感谢您的帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:14:57.053

第一件事：如果你想在你的枚举上使用[FlagsAttribute](http://msdn.microsoft.com/en-us/library/system.flagsattribute.aspx)，你需要像这样定义两个幂的值：

```
[Flags]
public enum CampaignCreaterUpdaterErrorMessage
{
    NoError = 0,
    HasError = 1,
    NameOrDisplaynameTooShort = 2,
    InvalidFirstName = 4,
} 
```

要获取标记的枚举的一部分，请尝试以下操作：

```
 var hatas = CampaignCreaterUpdaterErrorMessage.HasError | CampaignCreaterUpdaterErrorMessage.NameOrDisplaynameTooShort;
    var x = (int)hatas;

    for (int i=0; i<Enum.GetNames(typeof(CampaignCreaterUpdaterErrorMessage)).Length; i++)
    {
        int z = 1 << i; // create bit mask

        if ((x & z) == z) // test mask against flags enum
        {
            Console.WriteLine(((CampaignCreaterUpdaterErrorMessage)z).ToString());
        }
    } 
```

要获取基础值，请尝试强制转换：

```
Messagebox.Show(((int)hatas)ToString()); 
```

在您的示例中，默认情况下会针对 CampaignCreaterUpdaterErrorMessage 枚举调用 ToString，该枚举返回枚举的字符串表示形式。

通过转换为 int（枚举的底层默认类型），您可以在整数值上获得 ToString。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T13:17:47.803

您需要将枚举转换/拆箱为 int，如下所示。

```
(int)CampaignCreaterUpdaterErrorMessage.NoError 
(int)CampaignCreaterUpdaterErrorMessage.HasError 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T13:20:28.753

试试这个：

`Messagebox.Show(CampaignCreaterUpdaterErrorMessage.NameOrDisplaynameTooShort);`

# iphone - 在用户授权应用程序后解析 api 删除“您已经授权此应用程序”

> ID：10720681
> 
> 赞同：3
> 
> 时间：2012-05-23T13:12:18.250
> 
> 标签：iphone, xcode, facebook, user-permissions, parse-platform

我使用 parse.com 登录控制器将用户登录到 facebook。

如果用户在从 Facebook 获得“您已经授权此应用程序”之前授权了该应用程序。

有谁知道如何解决？

我使用的代码：

```
PFLogInViewController *logInController = [[PFLogInViewController alloc] init];
logInController.delegate = self;
logInController.fields =  PFLogInFieldsFacebook ;
logInController.facebookPermissions = [NSArray arrayWithObjects:@"publish_stream", nil];
NSLog(@"%@",logInController.facebookPermissions);
[self.navigationController presentModalViewController:logInController animated:YES]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T17:11:13.203

我怀疑您不必要地显示视图。如果 [PFUser currentUser] 返回 nil，请尝试仅显示 PFLogInViewController。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T23:56:18.970

托马斯是对的。此外，您的 navigationController 不应该呈现模式。 *自我*应该是。

# c# - WPF WebBrowser 控件如何禁用 IE 的快捷键？

> ID：10720685
> 
> 赞同：1
> 
> 时间：2012-05-23T13:12:27.173
> 
> 标签：c#, wpf, controls

大家好我有一个问题我在应用程序中使用WPF WebBrowser控件，我需要禁用IE的快捷键，例如`Ctrl`+`N`等有没有办法解决这个问题？请帮帮我。

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-02T15:17:40.330

在 winforms WebBrowser 上，您还可以处理`PreviewKeyDown`事件并设置`IsInputKey = true`. 这使您可以更好地控制要禁用的快捷键/热键。此示例说明如何禁用 Ctrl+N 和 Ctrl+O，但允许其他热键，如 Ctrl+F 和复制/粘贴启用。

```
void browser_PreviewKeyDown(object sender, PreviewKeyDownEventArgs e)
{
    if ((e.KeyCode == Keys.N || e.KeyCode == Keys.O) && e.Control)
    {
        e.IsInputKey = true;
    }
} 
```

`PreviewKeyDown`WPF 版本上确实存在事件，但我没有尝试过等效代码。`WebBrowser`由于 WPF 版本缺乏功能，我改为在 WPF 中托管 winforms 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T13:22:40.887

将 WebBrowser 控件的 WebBrowserShortcutsEnabled 属性设置为 false 应该可以完成您要执行的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-17T13:23:00.590

添加有关如何在 WPF`WebBrowser`控件中禁用某些快捷方式/热键的最终答案。

初始化：

```
Browser = new WebBrowser();
Browser.LoadCompleted += DocumentLoaded;
Browser.PreviewKeyDown += BrowserOnPreviewKeyDown; 
```

事件处理：

```
private void BrowserOnPreviewKeyDown(object sender, KeyEventArgs e)
{
    Key key = (e.Key == Key.System ? e.SystemKey : e.Key);
    switch (key)
    {
        // disable F5
        case Key.F5:
            e.Handled = true;
            return;
        // disable Ctrl + O, Ctrl + N, Ctrl + L
        case Key.O:
        case Key.N:
        case Key.L:
            if (e.KeyboardDevice.IsKeyDown(Key.LeftCtrl))
            {
                e.Handled = true;
            }
            return;
        case Key.P: // Print dialog
            if (e.KeyboardDevice.IsKeyDown(Key.LeftCtrl))
            {
                // is handled, when printing is disabled
                e.Handled = !EnablePrintHotKey;
            }
            return;
    }
} 
```

*基于@curlyhairedgenius 的回答*

# c# - 不允许在 TextBox 中使用日文字符

> ID：10720688
> 
> 赞同：0
> 
> 时间：2012-05-23T13:12:35.270
> 
> 标签：c#, winforms, unicode, textbox

确保用户不会在 C# WinForms TextBox 中输入（或复制）日文字符的最佳方法是什么？

问题是我们的软件将被德语、英语和日语用户使用。各种字符和符号都处理得很好，但是日文字符似乎在底层持久化框架中造成了一些麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:20:38.520

可以使用白名单吗？例如：

```
bool IsValidInput(String input)
{
    return input != null && input.All(c => IsValidLetter(c));
}

bool IsValidLetter(char c)
{
     return Char.IsNumber(c) || (c >= 'A' && c <= 'Z') || (c >= 'a' && c <= 'z');
} 
```

虽然我必须同意，如果您想要日本客户，最好的方法是解决您使用日语字符的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T13:22:06.007

请阅读我的评论。我真的建议您修复持久性部分以使其正常工作。但由于这不能回答您的问题，您有两种选择：

1.  使用带有掩码和一些选项的[MaskedTextBox 。](http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.mask.aspx)或者自己写`MaskedTextProvider`。
2.  或者：处理验证事件，并手动检查每个字符以确保它不在日文的 unicode 字符范围内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T06:39:09.250

虽然我同意以前的海报，因此不想做*我*的回答，但我想添加一些关于日本人专门输入“拉丁”文本的内容。在 99.99999%（是的，这是 5 个 9，我们在这里谈论的是 Erlang 式的可靠性 ;-）的案例中，即使他们输入拉丁字符的文本，比如**SUZUKI**（一个常见的姓氏），你*真正*要做什么得到的是**ＳＵＺＵＫＩ**。范围内的代码点`FF20-FF60`。糟糕，我再次破坏了你的持久性引擎。并且惹怒了顾客。因为他们不明白你为什么拒绝他们完全正确的**拉丁**字符。或者他们认为...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T10:06:22.217

您只能将其用于英文字符；

```
private void txtSmsMessage_TextChanged(object sender, EventArgs e)
        {
            //sadece latin karakterlerin girilmesi saglanıyor.
            string str = ((TextBox)sender).Text;
            byte[] key = null;
            if (!string.IsNullOrEmpty(str))
            {
                key = Encoding.Unicode.GetBytes(str.Substring(str.Length - 1, 1));
                if (Convert.ToInt32(key[1]) != 0 || (Convert.ToInt32(key[0]) < 32 && Convert.ToInt32(key[0]) > 127))
                {
                    txtSmsMessage.Text = txtSmsMessage.Text.Substring(0, str.Length - 1);
                    txtSmsMessage.SelectionStart = txtSmsMessage.Text.Length;
                    return;
                }
            }
} 
```

如果您想使用其他语言，请查看此链接。 [http://www.tamasoft.co.jp/en/general-info/unicode.html](http://www.tamasoft.co.jp/en/general-info/unicode.html)

# javascript - Javascript 在 WP7 WebBrowser 中不起作用

> ID：10720690
> 
> 赞同：0
> 
> 时间：2012-05-23T13:12:37.707
> 
> 标签：javascript, windows-phone-7, epub

我正在尝试在 wp7 上制作电子书（epub）阅读器。我能够成功读取并显示`WebBrowser`控制页面并且工作正常。

现在我正在尝试将 html 页面拆分为多个部分，以使感觉像是阅读电子书。

要拆分页面，我使用以下 js：

```
void wb_LoadCompleted(object sender, System.Windows.Navigation.NavigationEventArgs e)
{
      int columnCount = (int)Math.Floor(wb.Height / wb.Width) + 1;
      int columnWidth = columnCount * 100;

      String js = "var d = document.getElementsByTagName('body')[0];" +
                "d.style.WebkitColumnCount=" + columnCount + ";" +
                "d.style.WebkitColumnWidth='" + columnWidth + "%';";

       wb.InvokeScript("eval", "javascript:(function(){" + js + "})()");

} 
```

但它不工作，甚至它也没有显示任何错误。为此目的，相同的 js 在 android web 视图中工作。

我在哪里做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:45:03.723

CSS3 多列布局目前仅作为专有扩展提供（Webkit-Column 和 Moz-Column 分别用于 Safari/Chrome 和 Firefox）。与 Opera 一样，Internet Explorer 目前没有专有的 CSS 多列布局实现，因此您暂时必须以老式的方式创建列。

好消息是 IE 10 确实通过实际规范支持它。因此，Windows Phone 8 可能会改变这种情况。

# osgi - 使用 Sling Launchpad 进行生产

> ID：10720693
> 
> 赞同：4
> 
> 时间：2012-05-23T13:12:50.013
> 
> 标签：osgi, jackrabbit, jcr, sling

[当我开始想知道是否可以简单地使用Sling Launchpad](http://sling.apache.org/site/discover-sling-in-15-minutes.html)并简单地使用 jar 启动服务器时，我试图了解 Sling/JCR 的部署场景。我的项目需要简单而不是性能，但是这种方法是否存在严重问题？或者，是否有详细讨论 Sling/JCR 部署的好地方？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T07:07:05.990

我认为我们没有关于如何部署 Sling 应用程序的详细说明，最好在用户邮件列表中询问（[http://sling.apache.org/site/project-information.html#ProjectInformation-lists](http://sling.apache.org/site/project-information.html#ProjectInformation-lists) ) 以便其他人可以分享他们的经验。

至于从启动板开始，我认为这没有问题，这几乎就是我们在 Adob​​e CQ5 中使用 Sling 的方式。我们有自己的定制启动器，其中添加了一些功能，主要与升级管理相关，但基本内容是相同的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T13:32:06.060

尽管您的项目的细节很少，但我可以说 Sling-Launchpad 是一个非常有用的工具，可用于启动带有可选包的 OSGi 环境。您只需列出要包含在环境中的捆绑包。[它在Apache Stanbol](http://incubator.apache.org/stanbol/)项目中非常活跃。有关详细信息，您可以调查 Stanbol 的各种发射器，例如[full](http://svn.apache.org/repos/asf/incubator/stanbol/trunk/launchers/) [、](http://svn.apache.org/repos/asf/incubator/stanbol/trunk/launchers/full/) full [-war](http://svn.apache.org/repos/asf/incubator/stanbol/trunk/launchers/full-war/)等。这些启动器生成一个 jar 文件，其中包括启动服务器所需的文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-12T01:51:49.200

冷冻答案，也许迟到总比没有好。只要您不在集群配置之后，sling trunk build 现在就有一个 debian contrib 模块，它将启动板 jar 打包到 debian 包中。这是一种简单的打包机制，并没有完全利用所有可能的用例，但它确实设置了日志记录并为配置设置提供了 etc/defaults。

# mysql - 仅当引用的行在字段中具有特定值时才允许行

> ID：10720697
> 
> 赞同：0
> 
> 时间：2012-05-23T13:13:05.730
> 
> 标签：mysql, database

假设某种实体（在一个表中）可以具有*OK*或*Error*的状态。对于那些状态为*OK*的实体，也应该有一些数据（在另一个表中），但是当状态为*Error*时，应该没有数据。

*因此，只有在第一个表中引用的行的状态设置为OK*时，才应允许该行存在于后一个表中。

在数据库中强制执行此约束的推荐方法是什么？

# .net - Linq to SQL 扩展数据类 - 共享 DataContext

> ID：10720700
> 
> 赞同：0
> 
> 时间：2012-05-23T13:13:12.843
> 
> 标签：.net, linq, linq-to-sql, datacontext

我正在使用 Linq2SQL 的部分类功能向我的对象添加一些辅助方法。

问题是我需要在这些辅助方法中执行一些额外的数据库查询，所以我每次都必须创建一个新的 DataContext。

我想在单个 Web 服务查询中为所有数据库操作重用 DataContext。

如果我将辅助方法保存在一个单独的类中，我只需在类构造函数中初始化上下文一次并将其重用于所有方法。

使用扩展的 Linq2SQL 类，我无法弄清楚如何获取对用于检索当前对象的相同 DataContext 的引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:18:48.877

事实上，你真的不能这样。尤其重要的是，因为 LINQ-to-SQL 可以与 POCO 一起使用。您必须手动处理您的数据上下文，如果您想在各个点使用它们，请保留它们。这里的一种方法可能是使该方法可从数据上下文而不是叶对象中使用 - 然后您*被迫*了解数据上下文。

在某些情况下，针对“请求”或“上下文”对象保持数据上下文可用可能是解决此问题的好方法，因为这通常很容易获得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T14:36:17.070

我不相信有办法获得创建数据上下文。您必须将其传递给您的自定义方法。在我的实体部分类中，我做了很多这样的操作：

```
public void Query()
{
    using (var db = new DataContext())
    {
         Query(db);
    }
}

public void Query(DataContext db)
{
    /* do something with the db */
} 
```

这使您可以灵活地传入创建对象的 DataContext 或在紧要关头使用新的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T13:20:19.353

> 问题是我需要在这些辅助方法中执行一些额外的数据库查询，所以我每次都必须创建一个新的 DataContext。

不，你没有。防止向您的 L2S 实体添加业务逻辑。它很快就会变成一个无法控制的纠结泥球。将这些操作放在使用这些实体的服务类中。例如，使用[命令/处理程序](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=91)和[查询/处理程序](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=92)模式。

> 我想在单个 Web 服务查询中为所有数据库操作重用 DataContext。

无论您做什么，都要防止一个`DataContext`实例被多个线程使用。您可以做的是`DataContext`每个网络请求都有一个。

# c# - WebBrowser 没有到达 DocumentCompleted 事件

> ID：10720703
> 
> 赞同：2
> 
> 时间：2012-05-23T13:13:21.000
> 
> 标签：c#, browser

我是 C# 的新手，正在尝试构建一个登录网站并返回其源代码的程序。问题是，我在页面加载时注册了一个事件监听器，但是当我调试它时，它在设置相同的事件后退出，实际上并没有在页面“加载”后做我想要它做的事情。

这是来源 -

```
using System;
using System.Windows.Forms;

namespace WIN
{
    class Program
    {
        string url = -snip-;
        string username = -snip-;
        string password = -snip-;
        string task = -snip-;
        string action = -snip-;
        string timezone = -snip-;

        private void Login()
        {
            Console.WriteLine("Started.");
            Console.ReadLine();
            Console.WriteLine("Declaring WebBrowser instance browser...");
            WebBrowser browser = new WebBrowser();
            Console.WriteLine("Done.");
            Console.ReadLine();
            Console.WriteLine("Registering an event for when the page finishes loading...");
            browser.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(pageLoaded);
            Console.WriteLine("Done.");
            Console.ReadLine();
            Console.WriteLine("Using method Navigate of browser instance with url parameter...");
            browser.Navigate(url);
            Console.WriteLine("Done.");
            Console.ReadLine();

        }

        private void pageLoaded(object sender, WebBrowserDocumentCompletedEventArgs e)
        {
            Console.WriteLine("Declaring WebBrowser instance browser as sender...");
            WebBrowser browser = sender as WebBrowser;
            Console.WriteLine("Done.");
            Console.ReadLine();
            string response = browser.DocumentText;

            Console.WriteLine("Searching for authenticity token...");
            // looks in the page source to find the authenticity token.
            // could also use regular expressions here.
            int index = response.IndexOf("authenticity_token");
            int startIndex = index + 41;
            string authenticityToken = response.Substring(startIndex, 40);
            Console.WriteLine("Found authenticity token.");

            Console.WriteLine("Unregistering first event handler...");
            // unregisters the first event handler
            // adds a second event handler
            browser.DocumentCompleted -= new WebBrowserDocumentCompletedEventHandler(pageLoaded);
            Console.WriteLine("Done.");
            Console.WriteLine("Adding second event handler...");
            browser.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(pageLoaded2);
            Console.WriteLine("Done.");
            Console.Read();

            Console.WriteLine("Formatting data to be posted to server...");
            string postData = string.Format("_user={0}&_pass={1}&authenticity_token={2}&_task{3}&_action{4}&_timezone{5}", username, password, authenticityToken, task, action, timezone);
            Console.WriteLine("Done.");
            Console.Read();

            Console.WriteLine("Declaring ASCIIEncoding instance enc...");
            System.Text.ASCIIEncoding enc = new System.Text.ASCIIEncoding();
            Console.WriteLine("Done.");
            Console.Read();

            //  we are encoding the postData to a byte array
            Console.WriteLine("Encoding postData to a byte array...");
            browser.Navigate(url, "", enc.GetBytes(postData), "Content-Type: application/x-www-form-urlencoded\r\n");
            Console.WriteLine("Done..");
            Console.Read();

        }

        [STAThread]
        static void Main(string[] args)
        {
            Program p = new Program();
            p.Login();
        }
    }
} 
```

从所有这些控制台输出中，它只能*使用带有 url 参数的浏览器实例的使用方法 Navigate ...*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T13:37:24.830

WebBrowser 要求您的程序泵送一个消息循环。否则它不会触发它的事件。这通常是任何使用单线程 COM 组件的程序的要求。或者用更容易理解的术语来说：你不能让程序忙于从控制台读取数据，同时触发像 DocumentCompleted 这样的事件。一个线程一次只能做一件事。您可以通过编写一个 Winforms 应用程序或自己使用 Application.Run() 启动一个消息循环。使用消息循环，线程*一次可以*做不止一件事。但这确实需要与您现在编写的非常不同的代码，您仍然不能使用 Console.ReadLine()，而是使用 TextBox。

[您可以通过在单独的线程中运行浏览器来挽救您拥有的东西，您将在此答案](https://stackoverflow.com/a/4271581/17034)中找到所需的代码。

# javascript - 文件系统 API - 从本地驱动器上传到本地文件系统

> ID：10720704
> 
> 赞同：3
> 
> 时间：2012-05-23T13:13:26.930
> 
> 标签：javascript, html, upload, html5-filesystem

我已经阅读了很多关于文件系统 API 和 HTML5 的内容，但是我找不到一个可行的解决方案，所以我问你们：

我想要一个文件上传表单，拖放或常规输入框无关紧要，但是我想选择一个文件，上传后应该将文件或整个文件夹“上传”到位于客户端的文件系统计算机。上传在括号中，因为我实际上想将文件/文件夹复制到客户端本地文件系统。

甚至可能吗？因为我想制作一个应用程序，用户可以将他的文件（例如音乐或大型视频和电影）上传到他的本地文件系统并在我的应用程序中编辑/观看等。我知道我必须上传那些大文件，我必须将它们切成小块并将它们堆叠起来，但我只想从小事开始:)

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T14:47:48.053

目前关于这个主题的信息确实很少，所以我整理了一个例子，它结合了：

*   使用 上的`webkitdirectory`属性`<input type="file">`。
    *   这允许用户使用适当的对话框来选择目录。
*   使用文件系统 API。
    *   这是关于沙盒文件系统，它允许您将文件存储在客户端机器上。
*   使用文件 API。
    *   这是允许您读取文件的 API。这些文件可以通过一个`<input type="file">`元素、通过使用拖放的传输或通过 Filesystem API 来访问。

由于这些目前仅在 Chrome 中运行良好，因此我`webkit`在必要时使用了前缀。

[http://jsfiddle.net/zLna6/3/](http://jsfiddle.net/zLna6/3/)

代码本身有我希望清楚的注释：

```
var fs,
    err = function(e) {
        throw e;
    };

// request the sandboxed filesystem
webkitRequestFileSystem(
    window.TEMPORARY,
    5 * 1024 * 1024,
    function(_fs) {
        fs = _fs;
    },
    err
);

// when a directory is selected
$(":file").on("change", function() {
    $("ul").empty();

    // the selected files
    var files = this.files;
    if(!files) return;

    // this function copies the file into the sandboxed filesystem
    function save(i) {
        var file = files[i];

        var text = file ? file.name : "Done!";

        // show the filename in the list
        $("<li>").text(text).appendTo("ul");

        if(!file) return;

        // create a sandboxed file
        fs.root.getFile(
            file.name,
            { create: true },
            function(fileEntry) {
                // create a writer that can put data in the file
                fileEntry.createWriter(function(writer) {
                    writer.onwriteend = function() {
                        // when done, continue to the next file
                        save(i + 1);
                    };
                    writer.onerror = err;

                    // this will read the contents of the current file
                    var fr = new FileReader;
                    fr.onloadend = function() {
                        // create a blob as that's what the
                        // file writer wants
                        var builder = new WebKitBlobBuilder;
                        builder.append(fr.result);
                        writer.write(builder.getBlob());
                    };
                    fr.onerror = err;
                    fr.readAsArrayBuffer(file);
                }, err);
            }, 
            err
        );
    }

    save(0);
});

$("ul").on("click", "li:not(:last)", function() {
    // get the entry with this filename from the sandboxed filesystem
    fs.root.getFile($(this).text(), {}, function(fileEntry) {
        // get the file from the entry
        fileEntry.file(function(file) {
            // this will read the contents of the sandboxed file
            var fr = new FileReader;
            fr.onloadend = function() {
                // log part of it
                console.log(fr.result.slice(0, 100));
            };
            fr.readAsBinaryString(file);
        });
    }, err);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T13:41:44.867

确切地说，这是不可能的，但您的应用程序可能仍然可以工作。可以通过[文件输入](http://www.html5rocks.com/en/tutorials/file/dndfiles/)表单元素读取文件，但是将文件写回磁盘是您遇到麻烦的地方。

您的浏览器可以写入磁盘的两种方式是 1) 下载文件和 2) [HTML5 文件系统 API](http://www.html5rocks.com/en/tutorials/file/filesystem/)。选项 #1 显然不允许您的应用程序选择目标，选项 #2 仅适用于浏览器创建的沙箱文件系统。这个限制对你来说可能不会破坏交易——它只是意味着你的应用程序使用的文件夹将被埋在浏览器数据文件的某个地方。

此外，文件系统 API 目前仅适用于 Chrome（但它是一个开放标准）。如果您想要跨平台支持，也许您可​​以使用[IndexedDB](https://developer.mozilla.org/en/IndexedDB/IndexedDB_primer)。您可以使用 localStorage，但 Chrome 有 5MB 的硬性限制，这对于媒体应用程序来说太糟糕了。

# android - 绘画时如何在android中保存活动

> ID：10720710
> 
> 赞同：0
> 
> 时间：2012-05-23T13:13:40.670
> 
> 标签：android

我做了一个应用程序，它通常用于绘制线条 n 数字。假设我做了一个正方形。现在我想保存它，当我再次启动我的应用程序时，我必须看到正方形。这怎么可能。这是我的代码

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // Set full screen view
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                                     WindowManager.LayoutParams.FLAG_FULLSCREEN);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    DrawView drawView = new DrawView(this, null);
    setContentView(drawView);
    drawView.requestFocus();

}
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // TODO Auto-generated method stub
    menu.add(0,1,1,"RED").setShortcut('3', 'C');
    menu.add(0,2,2,"GREEN");
    menu.add(0,3,3,"BLUE");
    menu.add(0,4,4,"Erase");
    return super.onCreateOptionsMenu(menu);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // TODO Auto-generated method stub
    switch(item.getItemId())
    {
    case 1:
        first(x,y,z);
        break;

    case 4:
        DrawView.second();
        break;
    }
    return super.onOptionsItemSelected(item);
}

public List<Integer> first(int x2, int y2, int z2) {
    // TODO Auto-generated method stub

    x2=100;y2=150;z2=200;
    al.add(x2);al.add(y2);al.add(z2);
    return al;

} 
```

}

```
 public DrawView(Context context, AttributeSet attrs) {
    super(context, attrs);
    list1 = d.first(a,b,c);   
    paint.setAntiAlias(true);
    paint.setColor(Color.rgb(list1.get(0),list1.get(1),list1.get(2)));
    paint.setStyle(Paint.Style.STROKE);
    paint.setStrokeJoin(Paint.Join.ROUND);
    paint.setStrokeWidth(5f);
  }

  @Override
  protected void onDraw(Canvas canvas) {
    canvas.drawPath(path, paint);
  }

  @Override
  public boolean onTouchEvent(MotionEvent event) {
    float eventX = event.getX();
    float eventY = event.getY();

    switch (event.getAction()) {
      case MotionEvent.ACTION_DOWN:
        path.moveTo(eventX, eventY);
        return true;
      case MotionEvent.ACTION_MOVE:
      case MotionEvent.ACTION_UP:
        path.lineTo(eventX, eventY);
        break;
      default:
        return false;
    }

    // Schedules a repaint.
    invalidate();
    return true;
  }

static void second() {
    // TODO Auto-generated method stub
    erase(paint);
}

private static void erase(Paint paint2) {
    // TODO Auto-generated method stub
    paint2.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:27:16.183

[将画布保存为 jpg 图像](https://stackoverflow.com/questions/2174875/android-canvas-to-jpg)，然后在`Activity`启动时检查图像是否存在。如果是，[则加载并在其上绘制](https://stackoverflow.com/questions/5176441/drawable-image-on-a-canvas)，否则在空画布上绘制。

# lotus-notes - Xpages 富文本字段完全对齐

> ID：10720724
> 
> 赞同：1
> 
> 时间：2012-05-23T13:14:33.713
> 
> 标签：lotus-notes, xpages, lotus-domino

在富文本字段中，我选择完全对齐，但预览时文本左对齐。当我关闭并重新打开文档时，文本将恢复为左对齐。如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T13:10:44.840

如果我理解正确，您有一个带有富文本字段的备注表单，您可以在其中对齐文本“对齐”，如下面的屏幕截图所示： ![在 Notes 客户端中对齐，在 Notes 客户端中查看](../Images/c5eff76d37f5db631818f459e9573547.png)

但是，如果您在 Xpage 中查看，文本不再是合理的，无论是在只读渲染中，还是在使用 CKEditor 的编辑渲染中： ![在 Notes 客户端中对齐对齐，在浏览器中被视为 Xpage](../Images/6fdfa03c0ec9ef6eb6b52d162a3e359e.png)

唉，如果你通过 CKEditor 对齐文本，它会在浏览器中正确呈现 ![在 CKEditor 中对齐对齐，在浏览器中被视为 Xpage](../Images/92d20df4e903c04a6666052b7d1afe5b.png)

Notes 客户端中的“有趣”呈现： ![在 CKEditor 中对齐，在 Notes 客户端中查看](../Images/b35ae48afd5a37d205358c9fa0e060cb.png)

这是一个“已知”问题，在我的演示案例中，Xpages 运行时引擎甚至会警告我： ![保存此文档会将其格式从原生 Notes 富文本更改为 HTML。 如果在常规 Notes 客户端中再次打开，这可能会导致格式更改或丢失。](../Images/256d85cffda24a7b9a14ec55670fad32.png)

> “保存此文档会将其格式从原生 Notes 富文本更改为 HTML。如果在常规 Notes 客户端中再次打开，这可能会导致格式更改或丢失。”

富文本到 HTML 的转换，反之亦然，这并不是问题的全部，尽管消息中这么说。也存在反复转换来回改变字体大小、丢失某些颜色和样式等问题。

这是Ben Langhinrichs[长期存在的问题](http://www.geniisoft.com/showcase.nsf/archive/20090128-1117)，他[相当彻底地记录了这一点](http://www.geniisoft.com/showcase.nsf/archive/20081212-0332)，甚至出售了一个[扩展来更好地处理这种转换](http://www.geniisoft.com/showcase.nsf/CoexEdit)。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T15:42:07.770

我正在使用 v8.5.3，在 CKeditor 的所有属性中，它们有一个名为“htmlConversion 警告”的属性，您可以将其设置为“noWarning”，这似乎可以防止上述保存此文档消息。似乎 IBM 的某个人已经从 Microsoft 那里获得了关于提供解决方案的说明。现在，如果他们能从他们那里记下如何推销产品就好了。

# java - facebook 是否通过 web 服务公开其 API？

> ID：10720730
> 
> 赞同：-4
> 
> 时间：2012-05-23T13:14:56.153
> 
> 标签：java, facebook, facebook-graph-api

我想使用servlet和JSP在java中制作一个facebook应用程序。但我发现facebook没有为java提供任何SDK。我不希望使用restfb等第三方API。facebook是否通过webservices公开其API我可以使用java使用哪个？也可以将 GRAPH API 视为 Web 服务吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:23:30.197

Facebook 已经通过 RESTfull 网络服务公开了它的服务。看看 facebook graph api 和 FQL。

是的，您说 facebook 没有 JAVA SDK 是正确的。但是您始终可以使用第三方库。使用库不是强制性的，因为您可以直接进行调用。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:21:22.093

虽然 Facebook 不提供*官方*API，但有一些方法可以从 Java 连接到 FB。例如，检查[这个 SO question](https://stackoverflow.com/q/2022336/209629)。

# ios - 在单个 UIScrollview 中使用多个 UITableViews，如何仅加载可见单元格的单元格数据

> ID：10720733
> 
> 赞同：1
> 
> 时间：2012-05-23T13:15:05.753
> 
> 标签：ios, uitableview, uiscrollview

我在一个 uiscrollview 中有 3 个 uitableviews。每个 uitableview 都是全长且不可滚动的，因此外部 uiscrollview 将它们一起滚动。这工作正常，除了 uitableviews 认为所有单元格都是可见的，因此所有单元格都是预先创建的。即使这是可以接受的，除非每个调用都有一个从 url 异步加载的图像视图（缩略图）。我试图弄清楚如何将图像加载限制为仅可见单元格，但仍允许用户滚动外部 uiscrollview （从而模仿 uitableview 行为）。

单个表格的替代设计包含每个显示 3 个单元格的单元格不起作用（基于其他设计要求），因此我坚持采用某种方法来限制图像下载。最大单元数将是 125 个左右。uiscrollview 委托似乎没有足够的调用来允许即时更新单元格，但我可能是错的。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T21:16:18.643

看来我可以简单地使用 UIScrollViewDelegate scrollViewDidScroll 调用，然后使用滚动视图的 contentOffset.y 为每个表视图使用 tableView indexPathsForRowsInRect 来触发任何可见（或即将出现）的单元格的缩略图。我的单元子类有一个触发缩略图下载的方法。

滚动时似乎为每个像素调用了 scrollViewDidScroll 委托方法，这是完美的。我认为这可能太慢了，但到目前为止这没什么大不了的。唯一的问题是确保我总是检查可见的单元格，如果我对它们进行排序或其他什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T15:44:10.913

TableViewDatasource 协议实现： - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

对于不在范围内的完整表，您只需将 tableview 指针参数与您主动显示的 tableview 进行比较并跳过不可见的 tableview 即可限制更新。

对于 Cells：考虑到您在同一个滚动视图上实现 3，这是一个更困难的问题。如果您实现了 3 个单独的表视图，每个表视图都是标准实现的，这会更容易一些。这个声明的原因是，如果上面的 Apple 协议实现了例程，则确实只为当前需要显示在屏幕上的单元格调用。通过这种方式，您可以在上面定义的例程中实现您的图像背景加载器，并且您确实会得到您想要的。我已经这样做了，它确实有效。

另一个答案：也许您应该查看一个自定义表格视图，在其中为单个表格视图定义您自己的自定义外观和感觉，该表格视图将您希望的所有信息合并到该单个表格中，从而允许您实现上述另一半。

为了给出更好的答案，我想我必须更深入地研究你最终想要完成的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T15:29:53.870

也许只是做一个自定义检查：如果 tableView 不可见（因为不在你的 scrollView 的范围内），那么不要在“cellForRowAtIndexPath”中加载 tableView 的图像（或单元格）。

如果 tableView 可见，则调用 reloadData 并显示图像。

您可以使用 scrollViewDelegate 方法检查所有这些。

# logging - 如何在黑莓设备中查看日志？

> ID：10720734
> 
> 赞同：0
> 
> 时间：2012-05-23T13:15:10.340
> 
> 标签：logging, blackberry, qr-code

我正在使用 ZXing 1.7 库为黑莓设备创建 Barcode Sanner。

因为他们使用了自己的 Log 类。但是如何查看我使用 Log.info("Test") 记录的内容？

我可以在设备上看到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T14:59:27.550

方法`Log.info(String)`在课堂`com.google.zxing.client.rim.util.Log`上。

类日志到`net.rim.device.api.system.EventLogger`. 如果您有源代码，您可以将代码更改为也登录到`System.out`. 下面是从源代码复制的一段代码，我将日志输出设置为`System.out`：

```
 /** Used to determine if the log message should be set to System.out */
  private static final boolean logToSystemOut;

  static {
   // Initializes the logger. Currently set to not log to System.out and log
   // at the INFO level.
    EventLogger.register(LOG_ID_LONG, LOG_ID_STRING, EventLogger.VIEWER_STRING);
    EventLogger.setMinimumLevel(EventLogger.DEBUG_INFO); // set this to change logging level message.

    logToSystemOut = true; // <-- UPDATE THIS LINE TO SET TO true
  } 
```

通过此更改，您可以在应用程序运行时在 Eclipse 的调试窗口中查看输出。为了更容易找到（因为这个控制台中有很多信息），我会做出这样的改变：

```
 private static void logToSystemOut(String message) {
    if (logToSystemOut) {
      System.out.println("  ------------ " + message);
    }
  } 
```

* * *

另一种方法是`EventLogger`直接查看输出。在设备上，您可以按照 EventLogger javadoc 中的说明执行此操作：

*   *要查看设备的当前事件日志，请按住 ALT 键并键入“lglg”。*

[或者，您可以使用javaloader](http://www.enduserguides.com/mobile/blackberry/eug_bbjavaloader.html)工具将事件日志下载到您的 PC ：

*   `javaloader.exe -u eventlog > eventlog.txt`

* * *

有关这方面的更多信息，请参阅此问题：[Blackberry 控制台输出](https://stackoverflow.com/questions/6439331/blackberry-console-output)。我从那里复制了答案中的一些信息。

# jquery - Jquery UI 表格 - 如何对 html 表格 td 单元格进行排序

> ID：10720742
> 
> 赞同：1
> 
> 时间：2012-05-23T13:15:44.210
> 
> 标签：jquery, html, jquery-ui

Jquery ui-table：
我有一个这样的表：

```
<table>
  <tr>
      <td> 1 </td> 
      <td> 2 </td>
      <td> 3 </td>
  </tr>
 <tr>
      <td> 4 </td>
      <td> 5 </td>
      <td> 6 </td>
 </tr> 
```

我想以这样的方式对其进行排序，如果我想将元素“1”移动到“5”，那么如果我将元素“1”拖放到元素“5”，那么他们应该交换他们的位置，那么表格应该是这样的：

```
 <table>
<tr>
  <td> 5 </td> 
  <td> 2 </td>
  <td> 3 </td>
</tr>
<tr>
  <td> 4 </td>
  <td> 1 </td>
  <td> 6 </td>
</tr>
 </table> 
```

**另外，我有一个像 image.jpg 这样的处理程序图像，在每个td**中都有 id : imageid 。我尝试了很多次，但我无法让它工作

我努力了：

```
$("table").sortable({contentWith : 'table',handle : 'imageid' })  
$("table td").sortable({handle : 'imageid' })  
$("table tr").sortable({,handle : 'imageid' })  
$("table tbody").sortable({,handle : 'imageid' })  //for this,i added tbody in table ,but didnt work . 
```

我并不是说他们根本没有移动，他们在移动但不正确。

这里发布了一些小代码，以便您可以快速编辑：http: [//jsfiddle.net/Vq8CK/3/](http://jsfiddle.net/Vq8CK/3/)

# android - apk 文件可以正常从网站下载，但上传到谷歌播放时崩溃

> ID：10720750
> 
> 赞同：0
> 
> 时间：2012-05-23T13:16:09.560
> 
> 标签：android

安卓开发新手。有一个我可以从我的网站下载并安装的 APK 可以完美运行。上传到谷歌播放，当应用程序尝试打开时它会崩溃。真的很奇怪。将对文件进行比较，但我 100% 确定它们是相同的。

任何想法表示赞赏。

# sql - 什么是 SQL Server 的 SET NOCOUNT ON 的 Oracle 等效项？

> ID：10720751
> 
> 赞同：7
> 
> 时间：2012-05-23T13:16:14.697
> 
> 标签：sql, sql-server, oracle, plsql

什么是 SQL Server 的 SET NOCOUNT ON 的 Oracle 等效项？

从[SQL Server 文档](http://msdn.microsoft.com/en-us/library/ms189837.aspx)：

> SET NOCOUNT ON... 停止显示受 Transact-SQL 语句或存储过程影响的行数的消息作为结果集的一部分返回...
> 
> 对于包含多个不返回太多实际数据的语句的存储过程，或者对于包含 Transact-SQL 循环的过程，将 SET NOCOUNT 设置为 ON 可以显着提高性能，因为网络流量大大减少。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T13:44:20.810

在存储过程中使用时，Oracle 中没有等效项`set nocount on`，仅仅是因为（在过程或函数内部）没有必要这样做。

唯一模糊匹配的事情是`set feedback off`BigMike 提到的

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T13:23:07.627

`SET FEEDBACK OFF`在 SQL*plus 提示符下。

官方文档可以参考[这个](http://docs.oracle.com/cd/B19306_01/server.102/b14357/ch12040.htm#i2698970)

# c# - 如何在单个 Razor 视图中编辑多个模型

> ID：10720756
> 
> 赞同：10
> 
> 时间：2012-05-23T13:16:28.013
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3, razor

我是 MVC3 的新手，我有多个模型，例如、 、`BussinessDetails`以及`ContactPerson`更多模型。我有一个单一的视图页面，其中共享视图页面，如，，等。这些都在选项卡中。他们有自己的模型。`ServiceArea``Address``Contacts``BusinessDetails``Address``ServiceArea`

我的问题是如何在同一个编辑视图页面中编辑多个模型。在发送这篇文章之前，我借助了 MVC3“音乐商店”示例，但只有一个模型`ALBUM`，如果有一个或多个模型，我将如何在同一视图页面中编辑，他们会为一个模型提供编辑操作。

我已经制作了一个父业务规范类。这是来自 MVC“音乐商店”

```
public ActionResult Edit(int id) {
    Album album = db.Albums.Find(id);
    ViewBag.GenreId = new SelectList(db.Genres, "GenreId", "Name", album.GenreId);
    ViewBag.ArtistId = new SelectList(db.Artists, "ArtistId", "Name", album.ArtistId);
    return View(album);
}                                                        

[HttpPost]
public ActionResult Edit(Album album) {
    if (ModelState.IsValid) {
        db.Entry(album).State = EntityState.Modified;
        db.SaveChanges();
        return RedirectToAction("Index");
    }

    ViewBag.GenreId = new SelectList(db.Genres, "GenreId", "Name", album.GenreId);
    ViewBag.ArtistId = new SelectList(db.Artists, "ArtistId", "Name", album.ArtistId);
    return View(album);
} 
```

如果有更多模型`HTTP POST`，则只有模型`ALBUM`我如何对多个模型执行编辑操作并查看？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-23T13:22:00.187

您需要`CompositeModel`像这样将其他 ViewModel 包含到 main 中

```
public class CompositeModel {
    public Album AlbumModel { get; set; }
    public Another AnotherModel { get; set; }
    public Other EvenMore { get; set; }
} 
```

像这样发送到你的视图

```
public ActionResult Index() {
    var compositeModel = new CompositeModel();
    compositeModel.Album = new AlbumModel();
    compositeModel.OtherModel = new AnotherModel();
    compositeModel.EvenMore = new Other();        
    return View(compositeModel)
} 
```

修改您的视图以采用新的模型类型

```
@model CompositeModel 
```

要引用子模型的属性，您可以使用如下语法

```
@Html.TextBoxFor(model => model.Album.ArtistName) 
```

或者您可以在文件夹中创建一个视图，该视图`EditorTemplates`采用子模型并像这样`AlbumModel`使用`EditorFor`

```
@Html.EditorFor(model => model.Album) 
```

模板看起来像这样

```
@model AlbumModel

@Html.TextBoxFor(model => model.AlbumName)
@Html.TextBoxFor(model => model.YearReleased)
@Html.TextBoxFor(model => model.ArtistName) 
```

现在只需`CompositeModel`发回您的控制器，然后保存所有子模型，现在 Bob 就是您的叔叔了！

```
[HttpPost]
public ActionResult Index(CompositModel model) {
    // save all models
    // model.Album has all the AlbumModel properties
    // model.Another has the AnotherModel properties
    // model.EvenMore has the properties of Other
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-23T13:20:44.493

您需要创建一个包含您需要的两种类型的视图模型。像这样的东西（假设你正在编辑专辑和艺术家）：

```
public class MyModel
{
    public Album Album { get; set; }
    public Artist Artist { get; set; }
    public SelectList Genres { get; set; }
    public SelectList Artists{ get; set; }
} 
```

然后更改您的视图以使用新模型，如下所示：

```
@model MyModel 
```

然后将您的 Get 方法更改为：

```
public ActionResult Edit(int id) 
{
    var model = new MyModel();
    model.Album = db.Albums.Find(id);
    model.Artist = yourArtist; //whatever you want it to be
    model.Genres = new SelectList(db.Genres, "GenreId", "Name", model.Album.GenreId);
    model.Artists = new SelectList(db.Artists, "ArtistId", "Name", model.Album.ArtistId);

    return View(model);
} 
```

然后更改您的 Post 方法以采用以下`MyModel`类型：

```
[HttpPost]
public ActionResult Edit(MyModel model) {

    if (ModelState.IsValid) {
    //save your items here

        db.SaveChanges();

        return RedirectToAction("Index");
    }

    model.Genres = new SelectList(db.Genres, "GenreId", "Name", model.Album.GenreId);
    model.Artists = new SelectList(db.Artists, "ArtistId", "Name", model.Album.ArtistId);

    return View(album);
} 
```

假设您的视图具有类似的内容（当然包含在带有提交按钮的表单中）：

```
@Html.EditorFor(m => m.Artist.Name) //do this for all Artist Fields
@Html.EditorFor(m =? m.Album.Name) //do this for all Album Fields

//the following two show you how to wire up your dropdowns:
@Html.DropDownListFor(m => m.Album.ArtistId, Model.Artists)
@Html.DropDownListFor(m => m.Album.GenreId, Model.Genres) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-01T11:18:00.030

一种替代方法是使用 C# 元组
[http://www.dotnetperls.com/tuple](http://www.dotnetperls.com/tuple)
在您的视图和控制器中，定义一个元组，它是您的类（模型）的列表

# asp.net-mvc - 处理时区 C# Asp.Net MVC SQL Server

> ID：10720757
> 
> 赞同：2
> 
> 时间：2012-05-23T13:16:32.330
> 
> 标签：asp.net-mvc, timezone

这是一个棘手的场景，所以我会尝试很好地解释自己。我们有一个系统，该系统将有不同时区的用户，但会有一个他们都参与的计划，该计划将过期并且在给定日期的午夜不再对他们可见。

我们以 UTC 存储日期，但如果我们有一个用户在说印度，我相信比 UTC 早 5:30 小时，所以如果我们将其保留为 UTC，每个人都可以在额外的 5:30 看到该程序小时，如果我们在西雅图有一个用户，该用户晚于 -8:00 小时，该程序将在下午 4 点结束。这些都没有考虑夏令时。

我的问题是处理这个问题的最佳方法是什么，我花了几个小时搜索并且有各种选择，它们都不理想。

1.  在他们的个人资料中添加一个选项，让他们选择一个时区、需要翻译、大量工作等。如果我们允许他们更改它，他们可以设置一个时区，让他们在应该继续查看项目之后已过期。或者我们设置了一个时区，如果他们移动、旅行等，他们不能改变它，但不是很直观。

2.  使用浏览器通过javascript获取offet，再次打开滥用，更改日期等。

处理这个问题的最佳方法是什么？其他人是怎么做的？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:50:42.287

这两种方法都是可以接受的。这取决于用户的位置在您的程序中是否具有重要作用。它还取决于程序的“虚拟”程度。

例如，如果它显示某个商店是否营业，则比第二种方法更好。它也更容易实现，而且确实不是那么不可靠。

但是，如果程序是虚拟的，并且午夜只是一个协议，则比第一种方法更好。当然，实现起来比较困难，但在虚拟世界中看起来要好得多。

# c# - Task.WaitAll 不等待子任务？

> ID：10720760
> 
> 赞同：5
> 
> 时间：2012-05-23T13:16:42.437
> 
> 标签：c#, .net, multithreading, c#-4.0, task-parallel-library

您好，我有`_noOfThreads`一次定义的任务要运行。所以我继续使用`%`运算符继续任务，在循环结束时我有`Tasks.WaitAll`. 这是代码片段。

```
for (int index = 0; index < count; index++)
{

                if (index < _noOfThreads)
                    tasks[index] = Task.Factory.StartNew(somedelegate);
                else
                    tasks[index % _noOfThreads].ContinueWith(task => { foo.bar(); }, 
                            TaskContinuationOptions.AttachedToParent);
 }
  Task.WaitAll(tasks); 
```

但是，我注意到它不会等待子任务完成。父任务完成后，将执行下一行`Task.WaitAll`。如何更改此代码以等待子任务？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T13:35:09.323

我认为您将任务分配为：

```
Tasks[] tasks = new Task[ _noOfThreads]; 
```

将您的代码更改为：

```
Tasks[] tasks = new Task[count];

for (int index = 0; index < count; index++)
{

    if (index < _noOfThreads)
         tasks[index] = Task.Factory.StartNew(somedelegate);
    else
         tasks[index] = tasks[index % _noOfThreads].ContinueWith(task => { foo.bar(); }, 
                            TaskContinuationOptions.AttachedToParent);
}
Task.WaitAll(tasks); 
```

试试看！祝你好运 ：）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T13:36:47.130

您只在等待原始任务。要等待所有延续完成，您需要调用`WaitAll`延续任务。完成此操作的简单方法是将每个延续任务重新分配回原始变量，以便您只等待最终延续：

```
else
    tasks[index % _noOfThreads] =
        tasks[index % _noOfThreads].ContinueWith(task => { foo.bar(); }, 
                        TaskContinuationOptions.AttachedToParent); 
```

另请参阅[此相关问题](https://stackoverflow.com/questions/6997480/task-continuewith-not-working-how-i-expected)。

# sql - 将 SQL 查询转换为 Doctrine2 DQL

> ID：10720761
> 
> 赞同：2
> 
> 时间：2012-05-23T13:16:48.983
> 
> 标签：sql, symfony, group-by, doctrine-orm, dql

我正在尝试将此（My）SQL 转换为 DQL

```
SELECT content, created, AVG(rating)
FROM point
GROUP BY DAY(created)
ORDER BY created ASC 
```

而且我被困在 GROUP BY 部分，显然 DAY/WEEK/MONTH 未被识别为有效的“功能”。

**[语义错误] 第 0 行，第 80 列“（p.created）ORDER”附近：错误：无法按未定义的标识变量分组。**

```
$this->createQueryBuilder('p')
       ->select('p')
       ->groupBy('DAY(p.created)')
       ->orderBy('p.created', 'ASC') 
```

**问：是否可以使用查询生成器创建这种查询，或者我应该使用本机查询？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T10:03:37.230

在 Doctrine 2.1.? 的 GROUP BY 查询中无法使用自定义 DAY/WEEK/MONTH 用户函数，仅支持 SELECT 查询（不确定 2.2.? 分支），所以我最终使用本机查询，一切正常美好的。

**代码概览：**

```
// creating doctrines result set mapping obj.
$rsm = new Doctrine\ORM\Query\ResultSetMapping();

// mapping results to the message entity
$rsm->addEntityResult('Omglol\AppBundle\Entity\Message', 'm');
$rsm->addFieldResult('m', 'id', 'id');
$rsm->addFieldResult('m', 'content', 'content');
$rsm->addFieldResult('m', 'rating', 'rating');
$rsm->addFieldResult('m', 'created', 'created');

$sql = "SELECT id, content, AVG(rating) as rating, created
        FROM message 
        WHERE domain_id = ? 
        GROUP BY WEEK(created)";

$query = $this->_em->createNativeQuery($sql, $rsm);
$query->setParameter(1, $domainId);
$query->getResult(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:36:11.770

有相同的主题： [Link to google group](https://groups.google.com/group/doctrine-user/browse_thread/thread/0b9f8c56e1408556)

# .net - WCF REST 服务客户端调用映射到错误的 Uris

> ID：10720764
> 
> 赞同：3
> 
> 时间：2012-05-23T13:16:53.153
> 
> 标签：.net, wcf, rest

我有一个 WCF REST 服务，非常简单，如下所示：

```
[ServiceContract]
    public interface ITestService
    {
        [OperationContract]
        [WebInvoke(
           Method = "GET",
           UriTemplate = "getNumber")]
         int GetSomeNumber();
    }

public class TestService : TestServiceApp.ITestService
    {
        public int GetSomeNumber()
        {
            return 5;
        }
    } 
```

它是这样配置的：

```
<services>
      <service name="TestServiceApp.TestService">
        <endpoint address="" binding="webHttpBinding" behaviorConfiguration="restBehaviour" contract="TestServiceApp.ITestService" />
      </service>
    </services>

    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="restBehaviour">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
    </behaviors> 
```

使用指定的 Uri 模板从浏览器调用它可以正常工作：

```
http://localhost:52602/TestService.svc/getnumber. 
```

我这样配置我的客户端：

```
 <client>
      <endpoint name="TstSvc" address="http://localhost:52602/TestService.svc" binding="webHttpBinding" contract="TstSvc.ITestService" behaviorConfiguration="restBehaviour"/>
    </client>

  <behaviors>
    <endpointBehaviors>
      <behavior name="restBehaviour">
        <webHttp/>
      </behavior>
    </endpointBehaviors>
  </behaviors> 
```

当我使用以下代码调用服务时：

```
 using (WebChannelFactory<ITestService> factory = new WebChannelFactory<ITestService>("TstSvc"))
    {
        var svc = factory.CreateChannel(); 
        svc.GetSomeNumber();
    } 
```

我得到错误：

> “没有 `http://localhost:52602/TestService.svc/GetSomeNumber`可以接受消息的端点监听。”

我怀疑由于某种原因，我使用 GetSomeNumber 方法的调用未正确映射到 uri /getnumber。为什么？我该如何解决这个问题，我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:33:08.630

我能想到的唯一问题是您的合同在客户端代码`ITestService`中不是最新的。`WebChannelFactory`

我在测试中确实注意到您使用的位置很`WebInvoke`重要。`WebInvoke`应始终放在您的`ServiceContract`( *interface* ) 上，以便`WebChannelFactory`在通过 REST 通信时具有正确的 URI。如果您放置`WebInvoke`在具体类（*implementation*）上，则`WebChannelFactory`默认`OperationContract`为您在上面观察到的名称。

# javascript - Javascript/jQuery - 具有多个字段的时区更改脚本

> ID：10720765
> 
> 赞同：2
> 
> 时间：2012-05-23T13:16:56.290
> 
> 标签：javascript, jquery

我编写了一个 javascript，用于使用下拉选择菜单更改我网站上某个字段的“时区”。

你可以在这里看到脚本：http: [//jsfiddle.net/dTb76/14/](http://jsfiddle.net/dTb76/14/)

但是，我已经达到了我知道如何做的极限 - 我需要脚本来修改几个“时间”字段，但是，目前它只能与一个字段一起使用。

几天来，我一直试图弄清楚要进行哪些更改，但是我运气不佳。我能说的最好的，我需要某种“foreach”语句，告诉它存储每个字段的原始时间，然后通过选择中选择的任何内容对其进行修改，但是我不确定如何在 jQuery/javascript 中实现它.

非常感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:46:07.983

您将希望使用 jQuery 的`each()`方法来遍历您的每个`.time`元素。这将允许您获取每个特定元素的当前时间并在每个元素的基础上进行计算；否则，`$('.time').text()`类似的事情将始终返回所选第一个元素的值，这就是您所看到的。

这应该让你开始：

```
 $('#modTime').change(
        function(){

        var modifyBy = parseInt($(this).val(),10);  // Here, this refers to your select element, the element whose change event handler we're now in

        $('.time').each(function(){ // each() iterates through each .time element found in the DOM individually; that's what you'd like to do
            var $this = $(this), // Refers to the current .time element
                curTime = $this.text(),
                curTimeHH = parseInt(curTime.split(':')[0],10),
                curTimeHH = parseInt(curTime,10) + modifyBy;                

            $this.attr('originalTime',curTime);
            if (curTimeHH == 0) {
                $this.text('24:00');
            } else if (curTimeHH > 24) { 
                 curTimeHH = curTimeHH - 24;
                 $this.text('0'+curTimeHH + ':00');
            } else if (curTimeHH < 0) {
                curTimeHH = curTimeHH + 24;
                $this.text(curTimeHH + ':00');
            } else { 
            $this.text(curTimeHH + ':00');
             }                    
        });            
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T13:46:23.607

您只需要使用[$.each JQuery 函数](http://api.jquery.com/jQuery.each/)：

```
$('#modTime').change(function() {

    var times = $('.time');

    $.each(times, function(index, value) {

        var curTime = $(value).text();

        curTimeHH = parseInt(curTime.split(':')[0],10);

        $(value).attr('originalTime', curTime);

        var modifyBy = parseInt($('#modTime').val(),10);

        curTimeHH = parseInt(curTime,10) + modifyBy;

        if (curTimeHH === 0) {
            $(value).text('24:00');
        } else if (curTimeHH > 24) { 
            curTimeHH = curTimeHH - 24;
            $(value).text('0'+curTimeHH + ':00');
        } else if (curTimeHH < 0) {
            curTimeHH = curTimeHH + 24;
            $(value).text(curTimeHH + ':00');
        } else { 
            $(value).text(curTimeHH + ':00');
        }                
    });        
});​ 
```

**编辑：**

要检索每个字段的“原始时间”，您可以执行以下操作：

```
 var times = $('.time');

    $.each(times, function(index, value) {

        var originalTime = $(value).attr('originalTime');
        ...
    }); 
```

# sencha-touch - 将图像链接到 Sencha Touch 2 中的不同视图

> ID：10720766
> 
> 赞同：1
> 
> 时间：2012-05-23T13:16:58.000
> 
> 标签：sencha-touch, extjs, sencha-touch-2

经过 2 天的搜索和尝试各种代码片段和解释后，我需要在这里寻求帮助！

**演示： http:** [//kachipun.se/sandbox/touch/](http://kachipun.se/sandbox/touch/)

**问题：** 在应用程序的登录页面上，我有 8 个相同图像的实例（计划稍后将它们装扮成按钮）。我想将这些单独的图像链接到我在左侧菜单中列出的 8 个不同视图。

据我了解，我需要使用 setActiveItem()，但是我尝试无法让它工作；/

**资源：** 对于这个特定的项目，我使用了 wozznik 的 Slider Menu 作为菜单的基础，并以此为基础。

它包含一个存储不同视图的数据。

```
Ext.define('SliderMenu.store.MenuOptions', {    extend: 'Ext.data.Store',

    requires: [,
    ],

    config: {
        model: 'SliderMenu.model.MenuOption',
        storeId: 'MenuOptionsStore',

        //Customize your menu options
        data: [
            {id: 1, view: 'SliderMenuDemo.view.Start', iconCls: 'basic', iconMask:true, text:'Start'},
            {id: 2, view: 'SliderMenuDemo.view.MC', iconCls: 'basic', iconMask:true, text:'Machining Center'},
            {id: 3, view: 'SliderMenuDemo.view.TC', iconCls: 'basic', iconMask:true, text:'Turning Center'},
            {id: 4, view: 'SliderMenuDemo.view.ST', iconCls: 'basic', iconMask:true, text:'Silent Tools'},
            {id: 5, view: 'SliderMenuDemo.view.HC', iconCls: 'basic', iconMask:true, text:'Heavy Cuts'},
            {id: 6, view: 'SliderMenuDemo.view.MT', iconCls: 'basic', iconMask:true, text:'Multi Task'},
            {id: 7, view: 'SliderMenuDemo.view.SH', iconCls: 'basic', iconMask:true, text:'Sliding Head'},
            {id: 8, view: 'SliderMenuDemo.view.VTL', iconCls: 'basic', iconMask:true, text:'VTL'},
            {id: 9, view: 'SliderMenuDemo.view.Web', iconCls: 'basic', iconMask:true, text:'Web'},
        ]
    }
}); 
```

在登陆视图（Start.js）上，我有这样的图像设置，侦听器监听不同图像的点击（检查控制台日志）：

```
items: [{            
                   html: '<div class="gridwrapper">'+
                  '<img class="test1 normal" src="http://static.flickr.com/43/102997171_f9263d8797_o.jpg" width="23%" />'+
                  '<img class="test2 normal" src="http://static.flickr.com/43/102997171_f9263d8797_o.jpg" width="23%" />'+
                  '<img class="test3 normal" src="http://static.flickr.com/43/102997171_f9263d8797_o.jpg" width="23%" />'+
                  '<img class="test4 normal" src="http://static.flickr.com/43/102997171_f9263d8797_o.jpg" width="23%" />'+
                  '<img class="test5 normal" src="http://static.flickr.com/43/102997171_f9263d8797_o.jpg" width="23%" />'+
                  '<img class="test6 normal" src="http://static.flickr.com/43/102997171_f9263d8797_o.jpg" width="23%" />'+
                  '<img class="test7 normal" src="http://static.flickr.com/43/102997171_f9263d8797_o.jpg" width="23%" />'+
                  '<img class="test8 normal" src="http://static.flickr.com/43/102997171_f9263d8797_o.jpg" width="23%" />'+
                  '</div>',

                },
                {
              }],

        listeners: [{        
            element: 'element',          
            delegate: 'img.test1',          
            event: 'tap',          
            fn: function() {
                console.log('One!');
              }      
        },{            
            element: 'element',          
            delegate: 'img.test2',          
            event: 'tap',          
            fn: function() {
               console.log('Two!');
              }
        } 
```

我真的希望你们能帮助我理解这一点！

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T17:11:52.113

```
Please try:
listeners: [{        
            element: 'element',          
            delegate: 'img.test1',          
            event: 'tap',          
            fn: function() {
                Ext.getCmp("maincard").changeViewTo(Ext.create("SliderMenuDemo.view.SH"));
                // alternative: Ext.getCmp("SliderMenu.view.Main").changeViewTo(Ext.create("SliderMenuDemo.view.SH"));
              }      
        } 
```

# android - Android 串行 USB 端口

> ID：10720767
> 
> 赞同：1
> 
> 时间：2012-05-23T13:17:00.183
> 
> 标签：android, usb, serial-port

我想开发一个应用程序来读取来自串行端口设备（如 gps 等）的数据。我有 pl2303 串行到 USB 电缆，我用于此目的的选项卡有规格..

Ainol Novo 7 Advanced ii 型号：GTI900 Android 版本：4.0.3 基带 0.3 Android 内核：3.0.8

由于选项卡缺少 pl2303.ko，我的问题是我应该从哪里获得提到的内核以及如何在内核中安装 pl2303.ko。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T16:33:52.797

**应该可以工作，不需要生根**
*这是一个较旧的线程，但它在搜索结果中的出现率很高......*
我想我会让人们知道，从股票 Android ICS 4.0.3 开始，（*并且可能回填到早期版本中，我已经看到报告说，只要您的设备支持 USB 主机模式，即自 Honeycomb 3.1 起*），就应该内置 Prolific PL2303（以及 FTDI）芯片支持。

我知道我的只*适用*于我的东芝 Thrive，没有生根，而不是花哨的东西。虽然我认为 Thrive 是少数具有全尺寸 USB (A) 主机端口的大众市场平板电脑之一，但我认为他们可能已经确保它可以正常工作。

其他设备，尤其是手机，可能已经剥离了串行 I/O 模块以适应更小（更便宜）的 ROM，即使它们具有微型 USB 端口。

# jquery - 将使用uploadify上传的图片添加到tinymce textarea

> ID：10720768
> 
> 赞同：0
> 
> 时间：2012-05-23T13:17:11.167
> 
> 标签：jquery, tinymce, uploadify

我正在尝试构建一个允许我发布文章的脚本。应该允许用户在文章末尾添加图像。我想通过允许用户先写文章然后上传一些图片来解决这个问题。上传图片后，它们应自动添加到 tinymce 文本区域的末尾。我得到了文件名，但不知道如何将它添加到 Tinymce。我尝试使用 jquery 的追加，但它不起作用。

谢谢您的回答 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:33:34.140

我通过在 tinyMCEPopup 窗口中处理上传操作实现了类似的解决方案。上传完成并获得文件名后，我将调用以下命令，然后关闭弹出窗口。

```
tinyMCEPopup.execCommand('mceInsertContent', false, imgSrc);
tinyMCEPopup.close(); 
```

imgSrc 是图像的路径。

# c# - 如何将背景图像添加到 Windows 窗体网格视图？

> ID：10720771
> 
> 赞同：1
> 
> 时间：2012-05-23T13:17:24.287
> 
> 标签：c#, winforms, gridview

我想知道是否有任何方法可以将背景图像以 windows 形式放置到 gridview ...我正在使用 c#

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:27:07.350

使用 OnPaint 事件你可以做这样的事情

```
private void dataGridView1_Paint(object sender, PaintEventArgs e)
    {
         DataGridView dgv = (DataGridView) sender;
        int i = dgv.Rows.GetRowsHeight(DataGridViewElementStates.Visible);
        e.Graphics.DrawImage(Properties.Resources.BackGround, new Rectangle(0, i, dgv.Width, (dgv.Height - i)));
    } 
```

**编辑** 这可以检测行，但如果需要的话，它似乎没有检测到底部的 UserAddRow 选项。我很茫然。

# mysql - 如何使用“a”字段按“b”字段的最大值合并两个生成的表？

> ID：10720772
> 
> 赞同：1
> 
> 时间：2012-05-23T13:17:30.417
> 
> 标签：mysql, sql, merge, group-by, union

有下一个查询：

```
select `privmsgs_id`, `contact`, `privmsgs_date`, `contentType` from (
    (
        select max(`privmsgs_id`) as `privmsgs_id`, `contact`, max(`privmsgs_date`) as `privmsgs_date`, `contentType` from (
            (
                select `privmsgs_from_userid` as `contact`, `privmsgs_id`, `privmsgs_date`, 'message' as `contentType`
                    from `privmsgs_table`
                where `privmsgs_to_userid` = 305026
            ) union (
                select `privmsgs_to_userid` as `contact`, `privmsgs_id`, `privmsgs_date`, 'message' as `contentType`
                    from `privmsgs_table`
                where `privmsgs_from_userid` = 305026
            )
        ) as `tmp` group by `contact` order by `privmsgs_date` desc
    ) union (
        select max(`privmsgs_id`) as `privmsgs_id`, `contact`, max(`privmsgs_date`) as `privmsgs_date`, `contentType` from (
            (
                select `from_userid` as `contact`, `id` as `privmsgs_id`, `date` as `privmsgs_date`, 'postcard' as `contentType`
                    from `postcards_table`
                where `to_userid` = 305026
            ) union (
                select `to_userid` as `contact`, `id` as `privmsgs_id`, `date` as `privmsgs_date`, 'postcard' as `contentType`
                    from `postcards_table`
                where `from_userid` = 305026
            )
        ) as `tmp1` group by `contact` order by `privmsgs_date` desc
    )
) as `rTmp` order by `privmsgs_date` desc; 
```

有两个表`tmp`并`tmp1`通过联合合并，但字段加倍`contact`：

```
privmsgs_id contact privmsgs_date   contentType
21490780    7070    1315207813      message
21556868    7070    1315215266      postcard
21226460    7754    1312025735      message
21539085    15588   1314615528      postcard
21489812    15588   1315208838      message 
```

所以，我只需要最后一条记录（消息或明信片 - 无关紧要）和最后一条记录的 id（有问题 - 我可以在消息和明信片中分别获取 max(id)，但不能在合并表中执行此操作):

```
privmsgs_id contact privmsgs_date   contentType
21556868    7070    1315215266      postcard
21226460    7754    1312025735      message
21489812    15588   1315208838      message 
```

原因，为什么我不通过简化查询来做到这一点，是因为我需要特定数量的结果，所以，我只能通过一个查询来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:25:10.153

您必须将结果分组`contact`并选择 max `privmsgd_id`，然后仅从那些中选择信息`privmsgd_id`。

查看[GROUP BY](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)了解更多信息。

# spring - Spring 3.0 MVC 处理程序拦截器不起作用

> ID：10720781
> 
> 赞同：0
> 
> 时间：2012-05-23T13:18:07.303
> 
> 标签：spring, handler, interceptor

我正在尝试 Spring MVC 3.0 中的 HandlerInterceptors。

下面是我的拦截器

```
public class SessionInterceptor extends HandlerInterceptorAdapter {

   @Override public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {
      System.out.println("inside preHandle");
      if(request.getSession().getAttribute(SessionConsta nts.USER_SESSION_NAME) == null) {
         response.sendRedirect("welcome");
         return false;
      }
      return true;
   }
} 
```

下面是我在我的 xml 中的配置

```
<mvc:annotation-driven/>

<mvc:interceptors>
<mvc:interceptor>
<mvc:mapping path="/services/*"/>
<bean class="com.ca.myca.interceptors.SessionInterceptor " />
</mvc:interceptor>
</mvc:interceptors> 
```

但是拦截器没有被调用。

如果我遗漏任何东西，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T00:15:14.807

您正在使用`<mvc:annotation-driven/>`mvc 拦截器。

请检查 Spring 参考：

[http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/web/servlet/DispatcherServlet.html](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/web/servlet/DispatcherServlet.html)

*“在 Java 5+ 环境中运行时，也会注册一个默认的 AnnotationMethodHandlerAdapter。HandlerAdapter 对象可以作为 bean 添加到应用程序上下文中，覆盖默认的 HandlerAdapters。与 HandlerMappings 一样，可以为 HandlerAdapter 指定任何 bean 名称（它们经过测试按类型）。”*

`<mvc:annotation-driven/>`应该用于注解驱动的 MVC 控制器，如 @RequestMapping、@Controller 等，但我看到没有必要定义“ `<mvc:annotation-driven/>`”来支持它。

除非您使用 jackson（用于 json 支持），否则您可以尝试删除`<mvc:annotation-driven/>`并使用“ `<context:annotation-config>`”来代替自动装配等常见用途。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T14:51:38.090

在我们的应用程序中，我们使用 double`**`来匹配任何服务子路径，因此请尝试更改它并检查它是否有帮助：

```
<mvc:mapping path="/services/**"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-17T22:53:38.693

参考[arviarya](https://stackoverflow.com/users/409410/arviarya)的上述[帖子](https://stackoverflow.com/a/13280532/987044)，配置 XML 中的 <mvc:annotation-driven /> 导致将不同的处理程序对象传递给拦截器。在我们的拦截器方法中，我们有：

```
@Override
public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView mav) throws Exception {
    if (mav != null && handler instanceof HandlerMethod) {
        // something we want to have happen
    } 
```

这是在没有 <mvc:annotation-driven /> 的情况下使用@Controller 派生对象调用的，但在它存在时使用 HandlerMethod 派生对象调用。为了使我们的 if 块正常工作，我需要配置 XML 中的标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-20T08:50:22.470

尝试[使用 Jackson 配置 Spring MVC 和 JSON 中](https://stackoverflow.com/questions/10733916/configuration-of-spring-mvc-and-json-using-jackson)的建议。

把你的拦截器放在`<mvc:interceptors>`标签中

```
<mvc:interceptors>
    <bean class="xx.x..x..x...UserSessionInterceptor" />
</mvc:interceptors> 
```

你可以保留`<mvc:annotation-driven/> and <context:annotation-config>`

# python - 文本小部件返回光标

> ID：10720782
> 
> 赞同：2
> 
> 时间：2012-05-23T13:18:11.453
> 
> 标签：python, tkinter

我的问题：在我正在编写的 Tkinter 编辑器中，有一种情况是我需要重新加载文件并在我正在编写的地方重新打开它。

我的第一次重新加载尝试是这样的

```
pos=config.text.index(INSERT)          # memorize where I am
...                                    # do stuff
textopen_and_display(currentfn)        # reopen it
text.mark_set(INSERT,pos)          # go 
text.see(INSERT)                   # there 
```

其中*text*是我的文本小部件。问题是，以这种方式调用的 .see() 方法没有做我想要的：它向下滚动刚好足以看到 INSERT，然后停止。如果我不在文件顶部可见的第一行，它就不起作用。

我需要的是*文本小部件最后可见行的索引*：我怎样才能找到它？在这个索引上使用 .see() 应该按我想要的方式工作

PS我什至无法在运行时找到文本小部件的高度，因为我将它定义为小尺寸（高度= 5），并用fill = BOTH，expand = 1包装它：询问text.config（）它返回的高度初始值 5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T16:17:34.257

要保存滚动位置：

```
x_pos = text.xview()[0]
y_pos = text.yview()[0] 
```

要恢复滚动位置：

```
text.xview(Tkinter.MOVETO, x_pos)
text.yview(Tkinter.MOVETO, y_pos) 
```

# c - 奇怪的结构定义

> ID：10720785
> 
> 赞同：3
> 
> 时间：2012-05-23T13:18:13.850
> 
> 标签：c

在英特尔 DPDK 的代码示例中，我发现了这种奇怪的语法结构。谁能解释一下这是什么意思？

```
static const struct rte_eth_conf port_conf = {
    .rxmode = {
        .split_hdr_size = 0,
        .header_split   = 0,
        .hw_ip_checksum = 0,
        .hw_vlan_filter = 0,
        .jumbo_frame    = 0,
        .hw_strip_crc   = 0,
    },
    .txmode = {
    }
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T13:21:25.687

这是一种称为[指定初始化程序](http://gcc.gnu.org/onlinedocs/gcc/Designated-Inits.html)的 C99 语法。

在早期的 C 标准中，结构初始值设定项的元素必须以与结构定义中相同的顺序出现。使用指定的初始化程序，该限制被解除。自然地，必须命名结构成员以指示正在初始化的成员。

指定的初始化器也可以与数组一起使用，并允许您初始化数组的特定元素。例如：

```
int a[6] = { [4] = 29, [2] = 15 }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T13:21:19.233

[*这是称为指定初始化程序*](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=/com.ibm.xlcpp8a.doc/language/ref/designators.htm)的 C99 功能。它允许您指定要为其设置值的字段的名称，而不是按照相应字段在声明中出现的顺序指定值。此外，此语法允许您初始化除第一个之外的联合成员 - 这在 C99 之前是不可能的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T13:22:49.873

如果你有

```
struct X
{
    type_a var_a;
    type_b var_b;
    type_c var_c;
    type_d var_d;
}; 
```

你可以像这样初始化一个对象：

```
struct X x = {value_a, value_b, value_c, value_d}; 
```

但这意味着您需要知道变量的顺序以及`X`所有变量的初始值。或者，您可以像这样初始化：

```
struct X x = {
    .var_a = value_a,
    .var_b = value_b,
    .var_c = value_c,
    .var_d = value_d
}; 
```

这样，您可以按任何顺序初始化成员变量，甚至可以跳过一些。

这在你有一些变量需要由用户初始化的库中特别有用，而其他变量更内部，甚至可以随着你的库的不同版本而改变。使用这种初始化，用户不需要知道那些额外的变量。

# java - 创建一个循环，让这个动画重复

> ID：10720788
> 
> 赞同：0
> 
> 时间：2012-05-23T13:18:28.970
> 
> 标签：java, loops, infinite-loop, lwjgl

我编写了代码来绘制点（看起来像星星）并让它移动但是我如何让这个动画重复而不​​是在几秒钟后停止？最好的方法是什么，因为我不想在这个动画上浪费资源（如果它不删除丢失屏幕的点）；

```
package game;

import static org.lwjgl.opengl.GL11.*;
import static org.lwjgl.util.glu.GLU.gluPerspective;

import java.util.Random;

import org.lwjgl.input.Keyboard;
import org.lwjgl.opengl.*;
import org.lwjgl.*;

public class Main {

    public Main() {
        try {
            Display.setDisplayMode(Display.getDesktopDisplayMode());
            Display.setFullscreen(true);
            Display.create();
        } catch(LWJGLException e) {
            e.printStackTrace();
        }

        glMatrixMode(GL_PROJECTION);
        glLoadIdentity();

        int width = Display.getWidth();
        int height = Display.getHeight();

        System.out.println("" + width);
        System.out.println("" + height);

        gluPerspective((float) 30, 1280f / 800f, 0.001f, 100);
        glMatrixMode(GL_MODELVIEW);

        Point[] points = new Point[10000];
        Random random = new Random();

        for(int i=0;i<points.length;i++) {
            points[i] = new Point((random.nextFloat() - 0.5f) * 100f, (random.nextFloat() - 0.5f) * 100f, random.nextInt(200) - 200);
        }

        float speed = 0.25f;

        while(!Display.isCloseRequested()) {
            glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

            glTranslatef(0, 0, speed);

            glBegin(GL_POINTS);
            for(Point p : points) {
                glVertex3f(p.x, p.y, p.z);
            }
            glEnd();

            System.out.println("" + speed);

            Display.update();

            Display.sync(60);
        }
    }

    public static class Point {
        float x, y, z;

        public Point(float x, float y, float z) {
            this.x = x;
            this.y = y;
            this.z = z;
        }
    }
} 
```

**更新**

现在我有这段代码，但循环非常明显，有谁知道我该如何解决这个问题？

```
package game;

import static org.lwjgl.opengl.GL11.*;
import static org.lwjgl.util.glu.GLU.gluPerspective;

import java.util.Random;

import org.lwjgl.opengl.*;
import org.lwjgl.*;

public class Main {

    public Main() {
        try {
            Display.setDisplayMode(Display.getDesktopDisplayMode());
            Display.setFullscreen(true);
            Display.create();
        } catch(LWJGLException e) {
            e.printStackTrace();
        }

        glMatrixMode(GL_PROJECTION);
        glLoadIdentity();

        int width = Display.getWidth();
        int height = Display.getHeight();

        System.out.println("" + width);
        System.out.println("" + height);

        gluPerspective((float) 30, 1280f / 800f, 0.001f, 100);
        glMatrixMode(GL_MODELVIEW);

        Point[] points = new Point[10000];
        Random random = new Random();

        for(int i=0;i<points.length;i++) {
            points[i] = new Point((random.nextFloat() - 0.5f) * 100f, (random.nextFloat() - 0.5f) * 100f, random.nextInt(200) - 200);
        }

        float speed = 0.25f;

        int count = 0;

        while(!Display.isCloseRequested()) {
            glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

            count++;
            if(count < 100)
                glTranslatef(0, 0, speed);
              else
              {
                glTranslatef(0, 0, -100 * speed);
                count = 0;
              }

            glBegin(GL_POINTS);
            for(Point p : points) {
                glVertex3f(p.x, p.y, p.z);
            }

            glTranslatef(0, 0, width);

            glBegin(GL_POINTS);
              for(Point p : points) {
                glVertex3f(p.x, p.y, p.z);
              }

            glEnd();

            Display.update();

            Display.sync(60);
        }
    }

    public static class Point {
        float x, y, z;

        public Point(float x, float y, float z) {
            this.x = x;
            this.y = y;
            this.z = z;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:21:39.007

我看到您正在翻译整组星星（“点”数组）以产生运动效果。我猜过了一会儿，星星的集合到达尽头，你的屏幕变黑了。（所有星星都在屏幕外）我假设星星在水平滑动，z 是你的水平方向。

想到的最有效的解决方案是在到达屏幕末尾时将“点”的位置重置为初始状态。使一组星星分布在适合您的屏幕尺寸的区域中。并绘制星星两次，第二次在水平轴上移动一个屏幕宽度，以模拟连续性。

我在下面写了一个伪代码；它可能有问题，但它旨在给你这个想法。

```
 int count = 0;
    while(!Display.isCloseRequested()) {
      glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

      count++;
      if(count < 100)
        glTranslatef(0, 0, speed);
      else
      {
        glTranslatef(0, 0, -100*speed); // To initial position
        count = 0;
      }

      glBegin(GL_POINTS);
      for(Point p : points) {
        glVertex3f(p.x, p.y, p.z);
      }

      glTranslatef(0, 0, screenWidth);

      glBegin(GL_POINTS);
      for(Point p : points) {
        glVertex3f(p.x, p.y, p.z);
      }

      glEnd();

      System.out.println("" + speed);

      Display.update();

      Display.sync(60);
    } 
```

# extjs3 - 如何从 servlet 获取数据到 EXTJS

> ID：10720791
> 
> 赞同：0
> 
> 时间：2012-05-23T13:18:41.203
> 
> 标签：extjs3

我正在使用 EXTJS 和 SERVLET，在 servlet 中我通过 request.setAttribute 传递值，但无法在 EXTJS 中获取值。

```
Ext.onReady(function(){
    var myData=null;
    Ext.Ajax.request({
        url: 'DisplayTest',
        method:'POST',
        success: function ( result, request ) { 

        myData =Ext.decode(result.responseText);

        },
        failure: function ( result, request) { 
                Ext.MessageBox.alert('Failed', result.responseText); 
        } 
    });

     var store = new Ext.data.ArrayStore({
            fields: [
               {name: 'name'},
               {name: 'id'},

            ]
        });

     store.loadData(myData);

        // create the Grid
        var grid = new Ext.grid.GridPanel({
            store: store,
            columns: [
                {
                  //  id       :'company',
                    header   : 'Name', 
                    width    : 160

                },
                {
                    header   : 'ID', 
                    width    : 75 

                },

            ],

            height: 350

        });

        grid.render('db-grid');

}); 
```

在上面的代码中，我想将 servlet 中的值以数组或列表的形式放入变量 myData。谁能通过servlet和EXTJS给我一些例子。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:22:10.270

您将无法使用 Servlet 直接从 Servlet 传递数据`request.setAttribute`。使用该`formPanel.getForm().load()`方法将请求传递给 servlet。此方法需要响应中的 JSON 对象：形式如下：

```
{ success: true, {
    name: "Andy",
    dob: "11-12-1987"
    }
} 
```

您可以通过 PrintWriter.write() 函数发送此数据，也可以使用 servlet 中的 JSON API，该 API 根据提供给 API 的数据直接提供 json 字符串。

# android - 通过 LocalSocket 从 MediaRecorder 流式传输视频

> ID：10720796
> 
> 赞同：6
> 
> 时间：2012-05-23T13:18:55.773
> 
> 标签：android, sockets, video

我正在尝试通过本地套接字从 Android 的 MediaRecorder 发送 h264/AAC 视频。目标是通过 RTMP 或 RTSP 将视频发送到 WOWZA 服务器，但这给我带来了很多麻烦，现在我只是尝试将数据从 LocalServerSocket 写入文件。

这是一些代码。抱歉，它不是很干净，但我花了几个小时测试很多东西，我的项目现在一团糟。

在 Camera 活动中，输出文件设置：

```
LocalSocket outSocket = new LocalSocket();

try {
    outSocket.connect(new LocalSocketAddress(LOCAL_SOCKET));
} catch (Exception e) {
    Log.i(LOG_TAG, "Error connecting socket: "+e);
}
mMediaRecorder.setOutputFile(outSocket.getFileDescriptor()); 
```

LocalServerSocket 实现：

```
try {
    mLocalServerSocket = new LocalServerSocket(mName);
} catch (Exception e) {
    Log.e(LOG_TAG, "Error creating server socket: "+e);
    return;
}

while (true) {

    File out = null;
    FileOutputStream fop = null;
    try {
        mLocalClientSocket = mLocalServerSocket.accept();

        InputStream in = mLocalClientSocket.getInputStream();

        out = new File(mContext.getExternalFilesDir(null), "testfile.mp4");
        fop = new FileOutputStream(out);

        int len = 0;
        byte[] buffer = new byte[1024];
        while ((len = in.read(buffer)) >= 0) {

            Log.i(LOG_TAG, "Writing "+len+" bytes");
            fop.write(buffer, 0, len);
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    finally{
        try {
            fop.close();
            mLocalClientSocket.close();
        } catch (Exception e2) {}
    }
} 
```

问题是任何媒体播放器都无法读取由此产生的文件。您认为这是因为编码问题吗？如果我理解得很好，这段代码应该会生成一个二进制文件？！

提前谢谢，干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T15:15:52.463

好的，我找到了文件无法播放的原因。在 MP4 和 3GPP 文件中，有一个包含以下字节的标头：

> ftyp3gp4 3gp43gp6 宽 mdat

十六进制

> 0000001866747970336770340000030033677034336770360000000877696465000392D86D6461740000

'mdat' 标记前的 4 个字节表示位于文件末尾的另一个 'moov' 标记的位置。该位置通常在录制结束时设置，但由于 MediaRecorder 无法查找套接字，因此在我们的示例中它无法将这些字节设置为正确的值。

我现在的问题是找到一种方法使这样的文件可流式传输，因为它涉及在录制结束之前播放它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T20:43:39.960

您可以尝试使用 mp4box 来重组您的文件。moov 框给出了每个音频和视频样本的索引。如果那是在文件的末尾，则很难进行流式传输。

这可能会有所帮助： [http ://boliston.wordpress.com/tag/moov-box/](http://boliston.wordpress.com/tag/moov-box/)

或者这个：mp4box -inter 0.5 some_file.mp4

（我目前没有机会尝试）

如果您需要它与您的应用程序一起使用，我不知道将 mp4box 移植到 Android 的任何活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-26T06:37:28.140

我今天尝试做同样的事情，但 mp4 不是很容易流式传输（如前所述，有些部分写在最后）。我并不是说这是不可能的，但至少看起来很难。

因此，较新的 Android API（4.3）的解决方法可能是这个：

*   将相机预览设置为 SurfaceTexture：camera.setPreviewTexture
*   使用 OpenGL 和 MediaCodex + Muxer 记录此纹理

此解决方案的缺点是相机的预览尺寸可能小于视频尺寸。这意味着根据您的设备，您无法以最高分辨率录制。提示：有些相机说他们不支持更高的预览尺寸，但他们支持，您可以尝试配置相机以将预览尺寸设置为视频尺寸。如果您这样做，则捕获 camera.setParameters 的 RuntimeException 并且如果它失败，则仅使用支持的预览大小。

一些链接如何从 SurfaceTexture 记录：

[Bigflage：MediaCodec 的好例子。](http://bigflake.com/mediacodec/CameraToMpegTest.java.txt)

[Lablet 的 VideoRecorder 类。](https://github.com/czeidler/Lablet/tree/master/app/src/main/java/nz/ac/auckland/lablet/camera/recorder)

也可能有用：spydroid-ipcamera 将来自 MediaRecorder 套接字的数据作为 RTP 流进行流式传输，但我找不到将其提供给 MediaCodec 的方法。（我已经在阅读正确的 NAL 单元大小时遇到​​了困难……）

# c# - ADO.NET 如何在数据集中使用参数？

> ID：10720797
> 
> 赞同：0
> 
> 时间：2012-05-23T13:18:57.957
> 
> 标签：c#, ado.net

![数据库数据集](../Images/d8198ee3e1dae21835b9c60796ee9a31.png)

我需要在哪里初始化参数，何时打开表单以使其工作？

询问：

```
SELECT id, id_work, name FROM ttz WHERE (id_work = @idwork) 
```

我想要@idwork value = textBox1.Text

我这样做了：

```
private void frmTTZ_Load(object sender, EventArgs e)
{
    this.ttzTableAdapter.Fill(this.dbDataSet.ttz,Convert.ToInt32(textBox1.Text));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:37:36.683

您是否使用自动生成更新语句的类型化数据集？您的图像暗示了这一点，因为它包含 TableAdapters。

> 是的。当我打开表单时，我想用我的参数进行查询。

那么一切都已经存在了。您只需要创建一个实例`ttzTableAdapter`并调用`GetData`or`Fill`方法。

```
var da = new ttzTableAdapter();
ttz tbl = da.GetData(textBox1.Text); 
```

或者通过一个 ttz 表：

```
var tbl = new ttz();
da.Fill(tbl, textBox1.Text); 
```

[MSDN：`TableAdapters`- 概述](http://msdn.microsoft.com/en-us/library/7zt3ycf2%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:35:55.060

如果“ttz”是一个 TableAdapter，那么

var 结果 = ttzTableAdapter.GetData(textBox1.Text);

希望这可以帮助

# html - CSS：在 Div 中定位图像

> ID：10720801
> 
> 赞同：0
> 
> 时间：2012-05-23T13:19:17.410
> 
> 标签：html, css, positioning

我正在寻找将图像放置在具有固定背景的 div 之上。我正在使用 CSS 来设置 div 以及位于背景顶部的图像的样式，但我没有看到我期望的结果。位于 div 背景图像顶部的图像不会根据我的像素设置进行调整。

这是我的 HTML：

```
<div class="colorpicker" id="colorpicker">
    <img src="images/color_unselected.png" class="unselected" />
    <img src="images/color_C.png" class="c_image" />
    <img src="images/color_K.png" class="k_image" />
    <img src="images/color_M.png" class="m_image" />
    <img src="images/color_Y.png" class="y_image" />
</div> 
```

这是我的CSS：

```
#colorpicker{
    border: 0px;
    width: 63;
    height: 342;
    position: relative;
    margin: 0px auto;
    margin-left: 1002px;
    background-image: url(images/color_tab_container.png);
    background-repeat: no-repeat;
}
#colorpicker.unselected{
    top: 50px;
    right: 25px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T13:31:35.547

我无法从你的问题中弥补你想要如何定位这四个图像，但我会为你的图像而不是父 div 制作一个选择器：

*html:*

```
<div class="colorpicker" id="colorpicker">
  <img src="images/color_unselected.png" class="unselected">
  <img src="images/color_C.png" id="c_image" class="image" />
  <img src="images/color_K.png" id="k_image" class="image" />
  <img src="images/color_M.png" id="m_image" class="image" />
  <img src="images/color_Y.png" id="y_image" class="image" />
</div> 
```

*CSS：*

```
img.image {
  /*whatever you want to do here*/
}
#colorpicker {
  border: 0px;
  width: 63;
  height: 342;
  position: relative;
  margin: 0px auto;
  margin-left: 1002px;
  background-image: url(images/color_tab_container.png);
  background-repeat: no-repeat;
}
#colorpicker.unselected{ top: 50px; right: 25px; } 
```

旁注：您可以在此处键入/复制粘贴代码，选择并按下上面的“代码示例”按钮。如上所示，这将正确显示（确保分别为 html 和 css 执行此操作）:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:53:38.410

要将图像“堆叠”，并在两者之间留有边距，请添加以下 CSS：

```
#colorpicker img {
    display: block;
    margin-bottom: 2px;
} 
```

有关工作示例，请参见[http://jsfiddle.net/KX5mS/ 。](http://jsfiddle.net/KX5mS/)

# objective-c - UINavigationBar：自定义按钮？

> ID：10720803
> 
> 赞同：-1
> 
> 时间：2012-05-23T13:19:49.870
> 
> 标签：objective-c, ios, uinavigationcontroller, uibarbuttonitem

我想制作一个看起来像 BRED 应用程序的导航栏：

![BRED的主要观点](../Images/42f9df64539bc7184cfc19c021e7e7b5.png)

但我不知道如何删除栏按钮的边框和底部。

谢谢你的建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T14:03:28.647

如果 iOS 5 或更高版本，请查看[UIAppearance API](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAppearance_Protocol/Reference/Reference.html)。否则，SO 上有一堆资源可以自定义导航栏，包括[这个](https://stackoverflow.com/questions/6672229/how-to-subclass-uinavigationbar-for-a-uinavigationcontroller-programatically)。没有办法只删除边框，您必须从头开始创建它。

# c# - 更新 Picturebox 中的图像

> ID：10720805
> 
> 赞同：0
> 
> 时间：2012-05-23T13:19:59.480
> 
> 标签：c#

我目前正在编写一个 C# 应用程序，该应用程序在表单上使用 PictureBox 显示图像。

现在，我想始终如一地更新这个图像（例如每 2 秒）。但我无法做到这一点。

因为新图像也具有相同的文件目录/名称，它将替换加载的原始图像。所以当我想替换它显示的图像时，“文件正在被另一个程序使用......等等）。

基本上，我想使用 PictureBox 加载图像，并且随着加载的图像在其目录中发生更改，该图像将不断更新。

这可能吗？在 C# 中有没有其他方法可以做到这一点？

提前致谢，佩马尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:25:24.407

听起来好像流没有关闭。`stream.close();`加载图像后尝试调用。如果您要像这样加载图像，`Image i = new Image(File.Open("blub.png"));`那么您将不得不像这样重写它；

```
FileStream fs = File.Open("blub.png");
Image img = new Image(fs);
fs.Close();
fs.Dispose(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:31:40.150

只需使用计时器（`timeImageChange`在下面的示例中调用）并将文件重命名为两个不同的文件名。然后你可以有类似的东西

```
bool imageALoaded = true;
timerImageChange.Interval = 2000;
timerImageChange.Enabled = true;

private void timerImageChange_Tick(object sender, EventArgs e)
{
    if (imageALoaded)
    {
        this.pictureBox1.Image = imageB;
        imageALoaded = false;
    }
    else
    {
        this.pictureBox1.Image = imageA;
        imageALoaded = true;
    }
} 
```

这应该做你想要的。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T13:36:56.310

我对您的最佳解决方案是使用可执行文件，它称为卷影复制。这实际上在 Windows 中用于备份，因为它允许您复制正在使用的文件。我实际上已经在没有 C# 代码的情况下尝试过这个工具，但它很容易在代码中使用。

这是一个链接： http: [//www.howtogeek.com/howto/windows-vista/backupcopy-files-that-are-in-use-or-locked-in-windows/](http://www.howtogeek.com/howto/windows-vista/backupcopy-files-that-are-in-use-or-locked-in-windows/)

我的想法是使用另一个名称复制文件并访问该文件并在下次加载后删除，我认为这是最适合您的方法。

# ajax - 基于 Web 的 ajax IRC 客户端如何克服 IRC 服务器的连接限制？

> ID：10720811
> 
> 赞同：2
> 
> 时间：2012-05-23T13:20:34.240
> 
> 标签：ajax, proxy, irc

大多数 IRC 网络对每个 IP 地址允许的连接数实施一个小的限制（例如，每个 IP 5 个连接）。

[像Mibbit](http://mibbit.com/)这样的AJAX 客户端允许看似无限的客户端通过其服务器连接到网络。

考虑到 IRC 服务器应该限制从托管 AJAX 客户端的服务器（Mibbit 服务器）允许的连接数，这怎么可能呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T23:45:51.227

查看[有关 IRC 服务器设置的 Mibbit wiki](http://wiki.mibbit.com/index.php/Enable_Mibbit_on_Your_IRC_Server)。本质上，Mibbit 没有绕过连接限制，irc 服务器本身允许 Mibbit 连接。

# xmpp - Facebook Chat、Application、XMPP 在资源请求期间提供第一个测试帐户

> ID：10720819
> 
> 赞同：0
> 
> 时间：2012-05-23T13:20:54.330
> 
> 标签：xmpp, facebook-chat

我为我的测试应用程序创建了两个 facebook 测试帐户。两个测试帐户都具有 xmpp_login 扩展权限。我正在使用 SleekXMPP python 库（使用第二个帐户）连接到 chat.facebook.com 服务器。在资源请求阶段（iq type="set" id="somethinghere" bind xmlns="urn:ietf:params:xml:ns:xmpp-bind" iq）我将获得第一个测试帐户的 JID 作为最终 JID作为服务器的响应，而我正在尝试使用第二个帐户 JID。

有没有办法在 iq stanza 请求阶段告诉聊天服务器，我正在为我的客户请求一些特定的测试帐户 jid（在 developer.facebook.com 聊天 API 示例中，options['uid'] 不用于任何事物） ？我想为我的应用程序创建一些带有测试帐户的 python 客户端，这些客户端通过聊天与实际的浏览器用户进行通信。

非常感谢您的帮助，-Mika

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T02:31:44.867

您是否使用`X-FACEBOOK-PLATFORM`身份验证方法？即，使用：

```
self.credentials['api_key'] = '... API_KEY ...'
self.credentials['access_token'] = '... TOKEN ...' 
```

如果是这样，Facebook 在绑定期间根据提供的访问令牌提供 JID；没有办法请求不同的，并且连接时提供的初始 JID 被忽略。您确定您的帐户使用了不同的令牌，并且它是用于您的第二个帐户的正确访问令牌吗？

在您提到的 API 文档中，`options['uid']`只是指用户的 JID，格式为`the_username@chat.facebook.com`。

如果您只是使用`DIGEST-MD5`身份验证选项（即，没有像上面那样设置凭据），那么不清楚问题出在哪里。不要忘记，`sleek@conference.jabber.org`在这种情况下，您可以加入聊天室以帮助使用 Sleek 进行调试。

——兰斯

# c - 我试图理解 getchar() != EOF

> ID：10720821
> 
> 赞同：42
> 
> 时间：2012-05-23T13:21:03.420
> 
> 标签：c, eof, getchar, putchar

我正在阅读 The C Programming Language 并且到目前为止已经理解了所有内容。但是，当我遇到`getchar()`and时`putchar()`，我无法理解它们的用途，更具体地说，是以下代码的作用。

```
main()
{
    int c;
    while ((c = getchar()) != EOF)
       putchar(c);
} 
```

我理解`main()`函数、整数的声明`c`和`while`循环。然而，我对`while`循环内部的条件感到困惑。此 C 代码中的输入是什么，输出是什么。

抱歉，如果这是一个基本而愚蠢的问题，但在我继续阅读本书并变得更加困惑之前，我只是在寻找一个简单的解释。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-23T13:23:22.147

这段代码可以更清楚地写成：

```
main()
{
    int c;
    while (1) {
        c = getchar();            // Get one character from the input
        if (c == EOF) { break; }  // Exit the loop if we receive EOF ("end of file")
        putchar(c);               // Put the character to the output
    }
} 
```

当`EOF`没有更多输入时接收字符。在从真实文件读取输入而不是用户输入（这是文件的特殊情况）的情况下，该名称更有意义。

* * *

[顺便说一句，通常该`main`函数应写为`int main(void)`。]

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-05-23T13:24:34.090

`getchar()`**是一个从标准输入**读取字符的函数。`EOF`是**C**中使用的一个特殊字符，表示已到达**END OF FILE 。**

通常，当您的标准输入不是控制台（即文件）时，您会得到一个`EOF`字符返回。`getchar()`

如果你像这样在 unix 中运行你的程序：

```
$ cat somefile | ./your_program 
```

然后，您将在结束`getchar()`时返回每个字符。`somefile``EOF``somefile`

如果你像这样运行你的程序：

```
$ ./your_program 
```

并通过控制台发送一个`EOF`（通过`CTRL+D`在 Unix 中点击或在 Windows 中按 CTRL+Z），然后`getchar()`也将返回`EOF`并且执行将结束。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-08-08T22:39:12.830

用当前 C 标准编写的代码应该是

```
#include <stdio.h>

int main(void)
{
    int c;
    while ((c = getchar()) != EOF)
       putchar(c);
} 
```

循环可以重写为

```
int c;
while (1) {
    c = getchar();
    if (c != EOF)
        putchar(c);
    else
        break;
} 
```

这读作

*   永远重复
    *   从[*标准输入*](https://stackoverflow.com/questions/19540425/what-is-standard-input)中获取输入的下一个字符（“字节”）并将其存储到`c`
    *   如果在读取所述字符时没有发生异常情况
        *   然后将存储的字符输出`c`到*标准输出中*
    *   别的
        *   打破循环

许多编程语言通过*引发*破坏正常程序流程的异常来处理异常情况。C没有这样的事情。相反，可能失败的函数有一个返回值，任何异常情况都由一个特殊的返回值发出信号，您需要从给定函数的文档中检查该返回值。如果是`getchar`，来自 C11 标准的文档说（[C11 7.21.7.6p3](http://port70.net/~nsz/c/c11/n1570.html#7.21.7.6p3)）：

> 3.  该`getchar`函数从 指向的输入流中返回下一个字符`stdin`。如果流处于文件末尾，则设置流的文件结束指示符并`getchar`返回`EOF`. 如果发生读取错误，则设置流的错误指示符并`getchar`返回`EOF`。

在别处声明它`EOF`是一个小于 0 的整数常量，并且任何普通的返回值都是 >= 0 -`unsigned char`零扩展为`int`.

位于文件末尾的流意味着所有输入都已被使用。对于标准输入，可以通过在 Unix/Linux 终端上键入+和在 Windows 控制台窗口中键入`Ctrl`+来从键盘输入。另一种可能性是程序从文件或管道而不是从键盘接收输入 - 然后只要输入被完全消耗，就会发出文件结束信号，即`D``Ctrl``Z`

```
cat file | ./myprogram 
```

或者

```
./myprogram < file 
```

* * *

正如上面的片段所说，实际上有两种不同的条件会导致`getchar`return `EOF`：到达*文件末尾，**或者*发生了实际错误。这不能仅从返回值推断出来。相反，您必须使用函数`feof`和`ferror`。`feof(stdin)`如果在标准输入上到达文件结尾，将返回一个真值。`ferror(stdin)`如果发生错误，将返回 true。

如果发生实际错误，则`errno`定义的变量`<errno.h>`将包含错误代码；该函数`perror`可用于自动显示带有前缀的人类可读错误消息。因此，我们可以将示例扩展为

```
#include <stdio.h>
#include <errno.h> // for the definition of errno
#include <stdlib.h> // for exit()
int main(void)
{
    int c;
    while ((c = getchar()) != EOF)
       putchar(c);

    if (feof(stdin)) {
        printf("end-of-file reached\n");
        exit(0);
    }
    else if (ferror(stdin)) {
        printf("An error occurred. errno set to %d\n", errno);
        perror("Human readable explanation");
        exit(1);
    }
    else {
        printf("This should never happen...\n");
        exit('?');
    }
} 
```

要触发文件结尾，可以`^D`在 Linux 上的新行上使用 Ctrl+D（此处显示为 ）：

```
% ./a.out
Hello world
Hello world
^D
end-of-file reached 
```

（注意这里的*输入*是如何被行缓冲的，所以输入不会与输出交错在行内）。

同样，我们可以通过使用管道来获得相同的效果。

```
% echo Hello world | ./a.out
Hello world
end-of-file reached 
```

触发错误有点棘手。在`bash`和`zsh`shell 中，标准输入可以*关闭*，这样它就不会来自任何地方，方法是附加`<&-`到命令行：

```
% ./a.out <&-
An error occurred. errno set to 9
Human readable explanation: Bad file descriptor 
```

*Bad file descriptor*，或`EBADF`表示*标准输入*- 文件描述符编号 0 无效，因为它根本没有打开。

另一种产生错误的有趣方法是从*目录*中读取标准输入——这会导致`EISDIR`在 Linux 上将 errno 设置为：

```
% ./a.out < / 
An error occurred. errno set to 21
Human readable explanation: Is a directory 
```

* * *

`putchar`实际上，也应该检查的返回值- 它同样会`EOF`在错误或写入的字符时返回：

```
while ((c = getchar()) != EOF) {
    if (putchar(c) == EOF) {
        perror("putchar failed");
        exit(1);
    }
} 
```

现在我们可以通过将标准输出重定向到`/dev/full`- 但是有一个陷阱 - 因为标准输出是缓冲的，我们需要写入*足够的*内容以使缓冲区立即刷新，而不是在程序结束时刷新。我们从 得到无限的零字节`/dev/zero`：

```
 % ./a.out < /dev/zero > /dev/full
 putchar failed: No space left on device 
```

* * *

PS始终使用类型的变量*`int`*来存储的返回值非常重要`getchar()`。即使它读取一个*字符*，[使用`signed`// `unsigned`plain`char`总是错误](https://stackoverflow.com/a/35356684/918959)的。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-21T11:37:15.280

也许您对在命令行中输入 -1 并不会结束您的程序这一事实感到困惑？因为`getchar()`将其读取为两个字符，- 和 1。在对 c 的赋值中，该字符被转换为 ASCII 数值。这个数值存储在某个内存位置，由 c 访问。

然后`putchar(c)`检索该值，查找 ASCII 表并转换回字符，然后打印。

我猜想在 ASCII 表中找到十进制值 -1 是不可能的，因为该表从 0 开始。因此`getchar()`必须考虑不同平台上的不同解决方案。也许`getchar()`每个平台都有一个版本？

我只是觉得奇怪的是这个 EOF 不在常规的 ascii 中。它可能是第一个不可打印的字符。例如，行尾是 ASCII。

如果将文件从 windows 传输到 linux 会发生什么？EOF 文件字符会自动更新吗？

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-08-08T14:07:44.197

[getchar()](https://en.wikibooks.org/wiki/C_Programming/stdio.h/getchar) function reads a character from the keyboard (ie, `stdin`)

In the condition inside the given `while` loop, `getchar()` is called before each iteration and the received value is assigned to the integer `c`.

Now, it must be understood that in C, the standard input (`stdin`) is [like](https://stackoverflow.com/questions/3385201/confused-about-stdin-stdout-and-stderr) a file. ie, the input is buffered. Input will stay in the buffer till it is actually consumed. `stdin` is actually the [standard input stream](https://en.wikipedia.org/wiki/Standard_streams).

`getchar()` returns the the next available value in the input buffer.

The program essentially displays whatever that was read from the keyboard; including white space like `\n` (newline), space, etc.

ie, the input is the input that the user provides via the keyboard (`stdin` usually means keyboard). And the output is whatever we provide as input.

The input that we provide is read character by character & treated as characters even if we give them as numbers.

`getchar()` will return `EOF` only if the end of file is reached. The ‘file’ that we are concerned with here is the `stdin` itself (standard input).

Imagine a file existing where the input that we provide via keyboard is being stored. That’s `stdin`. This ‘file’ is like an [infinite file](https://stackoverflow.com/a/3197123/5375464). So no `EOF`.

If we provide more input than that `getchar()` can handle at a time (before giving it as input by pressing enter), the extra values will still be stored in the input buffer unconsumed. The `getchar()` will read the first character from the input, store it in `c and print`c`with`putchar(c)`.

During the next iteration of the `while` loop, the extra characters given during the previous iteration which are still in `stdin` are taken during `while ((c = getchar()) != EOF)` with the `c=getchar()` part. Now the same process is repeated till there is nothing left in the input buffer.

This makes it look as if `putchar()` is returning a string instead of a single character at a time if more than one character is given as input during an iteration.

Eg: if input was
`abcdefghijkl`
the output would’ve been the same
`abcdefghijkl`

If you don’t want this behaviour, you can add [fflush(stdin);](https://stackoverflow.com/questions/18170410/what-is-the-use-of-fflushstdin-in-c-programming) right after the `putchar(c);`. This will cause the loop to print only the first character in the input provided during each iteration.

Eg: if input was
`adgbad`
only `a` will be printed.

The input is sent to `stdin` only after you press enter.

[putchar()](https://en.wikibooks.org/wiki/C_Programming/stdio.h/getchar) is the opposite of `getchar()`. It writes the output to the standard output stream (`stdout`, usually the monitor).

`EOF` is not a character present in the file. It’s something returned by the function as an error code.

You probably won’t be able to exit from the give `while` loop normally though. The input buffer will emptied (for displaying to the output) as soon as something comes into it via keyboard and the `stdin` won't give `EOF`.

For manually exiting the loop, `EOF` can be sent using keyboard by pressing `ctrl`+`D` in Linux and
`ctrl`+`Z` in Windows

eg:

```
while ((c = getchar()) != EOF)
{

   putchar(c);
   fflush(stdin);
}
printf("\nGot past!"); 
```

If you press the key combination to give `EOF`, the message `Got past!` will be displayed before exiting the program.

If `stdin` is *not* already empty, you will have to press this key combination twice. Once to clear this buffer and then to simuate `EOF`.

EDIT: The extra pair of parenthesis around `c = getchar()` in `while ((c = getchar()) != EOF)` is to make sure that the value returned by `getchar()` is first assigned to `c` before *that* value is compared with `EOF`.

If this extra parenthesis were not there, the expression would effectively have been `while (c = (getchar() != EOF) )` which would've meant that `c` could have either of 2 values: `1` (for true) or `0` (for false) which is obviously not what is intended.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-12-29T19:12:21.923

```
 getchar() 
```

从输入中获取一个字符。

```
 c = getchar() 
```

这个赋值的值是赋值后左边的值，或者是被读取的字符的值。`EOF`默认值为`-1`。

```
 ((c = getchar()) != EOF) 
```

只要值保持不变，`EOF`或者换句话说，只要条件保持为真，循环就会继续迭代。一旦该值变为`EOF`整个条件的值，`0`它将打破循环。

周围的附加括号`c = getchar()`用于编译器，以强调我们确实想在条件内进行赋值，因为它通常假定您要键入`==`并警告您。

```
 main() {
     int c;
     while ((c = getchar()) != EOF)
         putchar(c);
 } 
```

所以整个代码实际上回显了您输入的内容。它将字符的值分配给`c`条件内部，然后将其输出回循环体，仅在检测到文件结尾时结束。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-24T06:02:18.707

以与 | 类似的方式 上面的管道命令你可以在你的系统上使用重定向来利用上面的代码来显示文件的所有字符内容，直到它到达通常由 CTRL-Z 或 CTRL-D 表示的结尾（EOF）。

在控制台中： `ProgramName < FileName1.txt`

要创建从 FileName1 读取的内容的副本，您可以： `ProgramName < FileName1.txt > CopyOfInput.txt`

这以多种方式演示了您的程序，希望有助于您的理解。

- 希望有帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-06-19T14:25:05.870

```
main(){
int c;
while ((c = getchar()) != EOF)
   putchar(c);
} 
```

实际上 c=getchar() 提供了用户在控制台上输入的字符，并且该值使用代表 End Of File 的 EOF 检查。在文件的最后遇到 EOF。(c = getchar()) != EOF 等价于 c != EOF 。现在我认为这要容易得多。如果您有任何进一步的疑问，请告诉我。

# php - 比较两个对象数组并替换值

> ID：10720822
> 
> 赞同：0
> 
> 时间：2012-05-23T13:21:06.960
> 
> 标签：php, codeigniter, for-loop, e-commerce

我在电子商务项目中有 2 个对象数组（内置 Code Igniter），一个是产品对象数组，一个是销售项目对象数组，带有产品 ID 和折扣金额。我需要比较这些数组，以便可以在出售的商品中设置新价格，但我似乎无法正确编码循环。这是我当前的代码：

```
private function checkSalesProducts($query) {  //$query is an array of product objects 

    $this->db->select("sale_product, sale_discount");
    $salesItems = $this->db->get("sale_items");

    foreach($salesItems->result() as $salesItem)
    {

        for($i=0; sizeof($query); ++$i)
        {

            if($salesItem->sales_product == $query[$i]->prod_id)
            {

                $query[$i]->prod_price = $query[$i]->prod_price * (1 - $salesItem->sales_discount);
                $query[$i]->sale_item = true;
                break;

            }

        }

    }

    echo "<pre>";
    print_r($query);
    echo "</pre>";

} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:32:40.720

你`for()`应该是

```
for($i = 0; $i < sizeof($query); $i++) 
```

您的脚本此时应该冻结，因为您告诉它循环 while `sizeof($query) > 0`，因为您没有在循环中修改它，所以它总是如此。

# javascript - Internet Explorer 中预期的对象。使用 jQuery

> ID：10720824
> 
> 赞同：-1
> 
> 时间：2012-05-23T13:21:18.423
> 
> 标签：javascript, jquery, html

在我的 html 中运行此代码时，我收到一个对象预期错误，并且无法让任何按钮起作用。这是我的代码。

```
<button type="button" id="button">Click</button>

<script language="javascript" type="text/javascript">

$("button").click(function () {
    $("p").addClass("highlight");
})
</script> 
```

调试器说错误开始于 $("button").click(function () {

这是我的整个 html：

[http://jsfiddle.net/J7QFy/](http://jsfiddle.net/J7QFy/)

我不能让两个按钮都改变颜色，它们只是把颜色变成黄色。这似乎在这个小提琴网站上有点工作，但是我无法从 Internet Explorer 运行它，因为我得到了对象预期错误。当我说从 Internet Explorer 运行它时，我的意思是在浏览器中打开 html 页面文件。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:23:14.933

可能是一个愚蠢的问题，但您已经包含了 JQuery js 文件，对吧？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T13:25:32.087

```
<button type="button" id="button">Click</button>
<script type="text/javascript">
$(function() {
    $("button").click(function () {
        $("p").addClass("highlight");
    })
});
</script> 
```

[http://jsfiddle.net/4vx7J/](http://jsfiddle.net/4vx7J/)

编辑：试试这个

[http://jsfiddle.net/J7QFy/11/](http://jsfiddle.net/J7QFy/11/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T13:24:07.730

您需要将此代码包含在文档就绪的 jquery 代码中，以便它也能正确运行。

```
$(document).ready(function() {

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T13:27:24.573

是否尝试过其他方法来绑定点击事件？

```
$(function() {
  $("button").on({
    'click': function() {
      $("p").addClass("highlight");
    }
  });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T13:29:40.083

```
<style>
.highlight {background-color: red;}
</style>
<button type="button" id="button">Click</button>
<p>foo!!!</p>

<script type="text/javascript">
$(function() {
    $("button").click(function () {
        $("p").addClass("highlight");
        })
});
</script>​ 
```

[http://jsfiddle.net/UQ43j/2/](http://jsfiddle.net/UQ43j/2/)

# iphone - 临时构建未安装在 ios 5.1 上

> ID：10720829
> 
> 赞同：0
> 
> 时间：2012-05-23T13:21:28.267
> 
> 标签：iphone, ios, ipad

我正在尝试为 iPad 安装一个临时构建，但它不会安装。它确实安装在装有 iOS 5.0 的 iPad 上，所以我知道这不是证书问题。我似乎无法理解为什么它不能通过 Safari 临时安装安装在设备上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:25:28.473

我曾经发生过这种情况，因为我使用许多不同的机器来构建多个项目和多个设备进行测试。

您说过您的 iPad 运行的是 iOS 5.0，但您正在为基础 SDK 5.1 构建临时构建。XCode 工具不允许您的测试设备与您正在开发的基本 SDK 不完全匹配。

您要么需要将 iPad 更新到 5.1，要么将基础 SDK 降级到 5.0。我建议您简单地升级您的 iPad ！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T12:38:44.063

我想出了解决方案。我需要去 Edit scheme->archive 然后将 Build Configuration 设置为 Release

# .net - 通过正则表达式的括号列表？

> ID：10720831
> 
> 赞同：0
> 
> 时间：2012-05-23T13:21:42.777
> 
> 标签：.net, regex

我需要构造一个正则表达式来分解这样的字符串 (1 2 3);(abc);(4 5 6)

即括号中的每一件事都是一个blob（或接下来要分开的列表）

有什么想法吗？

这是我在此找到的链接。到目前为止，我还无法让它在.net 下工作。如果你能做翻译，那将不胜感激。

[http://www.perlmonks.org/?node_id=574517](http://www.perlmonks.org/?node_id=574517)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T13:25:10.357

这可以使用以下方法轻松实现[`string.Split`](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)：

```
string[] results = myString.Split("();".ToCharArray(), 
                                  StringSplitOptions.RemoveEmptyEntries);

// results[0] == "1 2 3"
// results[1] == "a b c"
// results[2] == "4 5 6" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T20:08:12.240

从我上面的评论：

只是为了挑战，这里是正则表达式：

`(?<=(^|;)\()(?<list>[^();]+)(?=\)(;|$))`

它将列表的开头定义为字符串的开头或分号后跟左括号，并且仅当每个列表遇到紧括号后跟字符串末尾的分号时才考虑结束。“list”是包含（你猜对了）每个列表的命名组。

# google-apps-script - 消息中的换行符

> ID：10720832
> 
> 赞同：10
> 
> 时间：2012-05-23T13:21:49.120
> 
> 标签：google-apps-script

使用 Google Apps 脚本，如何在变量中换行以发送邮件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T14:29:55.737

如果您不发送 HTML 格式的消息，请使用“\n”。我个人鄙视 HTML 格式的电子邮件。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-23T15:30:08.743

您应该`<br>`在发送电子邮件的 HTML 部分时使用该标记。

下面是我如何撰写相同的电子邮件正文的示例，但 HTML 和纯文本的格式不同。（不是最好的代码，但希望它能说明这一点）

```
function onFormSubmit(e) {
  var subject = "Subject";

  // Collect user data
  var name = e.values[0];
  var email = e.values[1];   // Where user enters his/her email address

  // Generate content - Replace this with what you're composing
  var content = [];
  content.push("Hi " + name);
  content.push("Thanks for submitting the survey!___LINE_BREAK___");
  content.push("Survey Team");

  // Combine content into a single string
  var preFormatContent = content.join('___LINE_BREAK___');

  // Replace text with \n for plain text
  var plainTextContent = preFormatContent.replace('___LINE_BREAK___', '\n');
  // Replace text with <br /> for HTML
  var htmlContent = preFormatContent.replace('___LINE_BREAK___', '<br />');

  MailApp.sendEmail(email , 
                    subject, 
                    plainTextContent ,                    
                    { 
                      name: "Survey Team", 
                      html: htmlContent 
                    });  
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-11-16T09:23:09.487

换行符`msgBox`：

```
Browser.msgBox('line 1 \\n line 2'); 
```

请注意，您需要使用额外的反斜杠来转义 '\n'。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-23T13:38:29.923

我通常在邮件中使用表格，但我认为`<br />`应该可以

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-05T00:26:45.457

对于 HTML，`<br>`应该可以。对于 sheetApp 等其他谷歌应用程序中的 javascript/appscript，请使用模板文字，因为 MailApp 不响应 \n。（即）键入两个反引号之间的内容并使用“输入”作为换行符，如下所示。无需使用单引号或双引号

```
const recipient = 'abc@xyz.com,cde@xyz.com'
const sub = 'some subject'
const line1 = 'some line1 content'// say 'Name'
const line2 = 'some line2 content'// say 'Contact Number'
const line3 = 'some line3 content'//say 'EMail Id'
const body = `Name: ${line1}
              Contact Number: ${line2}
              EMail Id: ${line3}`
MailApp.sendEmail(recipient,sub,body)

// There was a mistake with the original answer; I've added "$" for making the code above work. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-12T16:09:31.677

您可以使用`\r`更改 GmailApp `\\n`的行来更改 msgBox 的行。

# jquery - jQuery根据动态角度调整图像大小以按比例适合div的宽度和高度

> ID：10720833
> 
> 赞同：0
> 
> 时间：2012-05-23T13:21:58.340
> 
> 标签：jquery, css, jquery-ui

我真的需要一些帮助。我正在学习 jQuery，我完全被困在我需要生产的一个功能上。我在互联网上到处寻找，但找不到我正在努力实现的现有示例。相反，我有两个单独的示例，我构建并放置在 jsfiddle 中。我希望有人可以看一下每个示例，然后向我展示如何将它们都实现为一件事。

**场地：**

我有一个容器 div，我称之为“canvas”，它将接受一个可放置的元素。我的可放置元素是一个带有 div 的图像。当您将图像拖放到“画布”上时，它将调整大小以适应该 div 并保持纵横比。此示例中的图像最终将是动态的。我不会知道图像的宽度、高度或方向。我已经为初始放置完成了重新调整大小的功能。我还允许用户将丢弃的图像每 90 度旋转一次。请务必在“示例 1”中拖放图片后点击该图片</p>

**问题：**

当您在将图像放入容器后单击图像时，它会像我说的那样旋转得很好，但需要适应“画布”的宽度和高度。因此，当图像呈 90 度角时，它会与“画布”div 重叠。我需要以新角度调整图像大小并自动保持其纵横比。图像不能倾斜以适合。在“示例 2”中，我几乎实现了重新调整大小方面。如果您加载“示例 2”，您将看到在重新调整浏览器大小时图像会重新调整大小。它还在此过程中保持其纵横比。我在此示例中添加了一个图像 onClick，因此您可以旋转图像，然后在更改浏览器大小时观看它正确调整大小。

**目标：**

我需要从“示例 1”中删除的图像来执行图像在“画布”div 容器中的“示例 2”中所做的事情。而不是在浏览器重新调整大小时发生此操作，我需要在单击图像时发生此操作，以便正确调整每个角度的大小并居中。

就像我说的那样，我已经尝试了一切，任何可以向我展示这个想法的例子的人都会让我度过最后的 7 天！

**简而言之：**

旋转时，图像需要适合“画布”尺寸。图像无论放置在什么角度都需要保持纵横比。

**示例 1：**

[http://jsfiddle.net/jwuliger/wJQmQ/](http://jsfiddle.net/jwuliger/wJQmQ/)

**示例 2：**

[http://jsfiddle.net/jwuliger/bH8nx/](http://jsfiddle.net/jwuliger/bH8nx/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:21:37.927

我不确定我是否完全理解这个问题，特别是因为您的示例 2 在 Chrome 中对我不起作用（旋转的图像仍然会溢出容器），但这有帮助吗？[http://jsfiddle.net/fEMuW/](http://jsfiddle.net/fEMuW/)（减去可拖动无法正确重新定位的问题）。

# java - Java EOFException 服务器/客户端 TCP 应用程序

> ID：10720839
> 
> 赞同：0
> 
> 时间：2012-05-23T13:22:06.350
> 
> 标签：java, tcp, client, packet

我在我的应用程序中运行 2 个线程。一种用于检查传入数据包，另一种用于处理和发送数据包。他们都在同一条线上做这件事。

示例 1：

```
while (connection open) {
    in.readObject() instanceof ...
} 
```

示例 2：

```
while (connection open) {
    processPacket(in)
} 
```

我很确定 EOFException 是线程尝试同时使用流的时候。这不是一个恒定的 EOF，但就像每 1 秒我得到一个 EOF 一样，其余的工作正常。所以这就是为什么我怀疑它们重叠并尝试同时使用流。

如果这是问题所在，任何人都知道我如何在保持当前更新速度并使用两个线程的同时将它们同步到一个又一个？

我需要两个线程，因为对传入的检查会排成一行，直到收到数据包，并且我需要服务器不断发送进程并检查数据包。

如何修复 EOFException？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T16:55:18.950

如果您收到 EOFException，通常意味着对方挂断了。你通常会在阅读端得到这些。

这是一个类似的SO[问题](https://stackoverflow.com/questions/4729277/java-prevent-socket-from-throwing-eofexception)

编辑1：问题真的是为什么套接字关闭了。这可能是由于多种原因，服务器端的可编程计时器在 X 分钟内检查没有数据，防火墙关闭连接，网络中断等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T18:43:57.303

两个线程不应该读取同一个流。

您应该读取对象并将它们放在 ConcurrentLinkedQueue 中，然后从第二个线程中您可以检查队列中准备处理的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T22:12:38.107

EOFException 是“正常的”。它也发生在一个线程上。您在两个线程中同时读取的架构不可能工作，但这不是这个问题的原因。原因是对端关闭了连接。这将会发生。除非您的应用程序协议包含消息计数或关闭通知或其他一些预测 EOS 的方法，否则它将获得 EOFExceptions，或 readLine() 返回 null，或 read() 返回 -1，具体取决于您调用的读取方法。

# php - 具有嵌套参数的 Doctrine 2 DQL 引发 Invalid PathExpression 异常

> ID：10720840
> 
> 赞同：0
> 
> 时间：2012-05-23T13:22:10.560
> 
> 标签：php, doctrine-orm

我在为我的代码编写正确的 DQL 时遇到问题（异常：无效的 PathExpression。必须是 StateFieldPathExpression）。我将从勾勒我的项目结构开始。

每个实体都继承自 IdentifiableObject，后者为每个实体提供一个 id

```
 /**
 * @MappedSuperclass
 */
class IdentifiableObject {
    /**
     * @Id
     * @Column(type="integer")
     * @GeneratedValue(strategy="IDENTITY")
     */
    protected $id;

    /**
     * getters and setters go here
     */
} 
```

然后我们有一个包含“UserProperties”列表的用户对象

```
 /**
 * @Entity
 * @Table(name="users")
 */
class User extends IdentifiableObject {
    /**
     * Other unimportant vars go here
     */

    /**
     * @Column(type="string")
     */
    private $userName;

     /**
     * @OneToMany(targetEntity="UserProperty", mappedBy="user", cascade={"persist", "remove"}, orphanRemoval=true)
     */
    private $userProperties = null;

     public function __construct() {
        $this->userProperties = new ArrayCollection();
    }

    /**
     * Getters and setters go here
     */
} 
```

Userproperty 有一个属性（基本上是一个类型，说明它是什么类型的 userproperty）和一个值

```
 /**
     * @Entity
     * @Table(name="userProperties")
     */
    class UserProperty extends IdentifiableObject {
        /**
         * @OneToOne(targetEntity="Property")
         * @JoinColumn(name="propertyID", referencedColumnName="id")
         */
        private $property;

        /**
         * @ManyToOne(targetEntity="User")
         * @JoinColumn(name="userID", referencedColumnName="id")
         */
        private $userValue
    } 
```

最后是财产

```
 /**
     * @Entity
     * @Table(name="properties")
     */
    class Property extends IdentifiableObject {

        /**
         * @Column(type="string")
         */
        private $name;

        /**
         * @Column(type="string")
         */
        private $description;

        /**
         * @Column(type="integer")
         */
        private $mandatory = 0;

        /**
         * @OneToOne(targetEntity="PropertyType")
         * @JoinColumn(name="type", referencedColumnName="id")
         */
        private $type;
} 
```

我想做的是让所有拥有与某个属性对应的用户属性的用户。我的尝试是：

```
$queryUserId = "SELECT userprop.user FROM UserProperty userprop JOIN userprop.property prop WHERE prop.id = '$propertyId'"; 
```

或者

```
$queryUserId = "SELECT user FROM User user JOIN user.userProperties userprop WHERE userprop in(SELECT up FROM UserProperty up WHERE up.property = '$property')"; 
```

截至今天，除了“无效的 PathExpression。必须是 StateFieldPathExpression”之外，我无法从系统中获得一些明智的东西......

任何人都可以帮忙吗？

编辑：我会澄清我想在这里做什么。

我想要的是这个 sql 查询的 DQL 版本（有效）：

```
SELECT * 
FROM users
WHERE id
IN (
     SELECT u.userId
     FROM userproperties u, properties p
     WHERE u.propertyID = p.id
     AND p.id =1
) 
```

p.id = xxx 将是我想在搜索中使用的属性对象（或至少是 id）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:59:38.437

好的，我似乎找到了一个有效的 DQL 解决方案：

```
$query = "SELECT user from User user WHERE user.id in(SELECT u FROM UserProperty up JOIN up.user u WHERE up.property = '$property')" 
```

作品！（您需要在子查询中加入用户，否则您会得到可怕的“无效路径表达式”异常。

# c# - 如何将 += 与 pageddatasource 一起应用

> ID：10720841
> 
> 赞同：0
> 
> 时间：2012-05-23T13:22:17.613
> 
> 标签：c#, datasource, paging

我有一个 for 循环，我想使用添加分页数据源

```
pageddatasource += pageddatasource 
```

这是我的代码

```
string[] arrSearchFilter = SearchFilter.Split(',');
for (int i = 0; i < arrSearchFilter.Length; i++)
{
    pData += ctr.GetAllProjectsNoLOCandSt(
                     Convert.ToInt16(arrSearchFilter[i]), this.ModuleId);
} 
```

在哪里

```
ctr.GetAllProjectsNoLOCandSt(Convert.ToInt16(arrSearchFilter[i]), this.ModuleId); 
```

是一个存储过程返回一个分页数据源

和

```
pData 
```

是分页数据源有人可以帮我吗？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:25:55.270

您不能将项目添加到`PagedDataSource`. 您必须将项目添加到`PagedDataSource`正在使用的任何内容中`DataSource`（假设集合允许您添加项目）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:45:28.673

没有自然的方法来组合`PagedDataSource`结果，因为它们旨在成为绑定显示控件的最终结果。但是，由于`PagedDataSource`确实 implement `IEnumerable`，您可以手动迭代结果并将它们组合成一些合并的集合：

```
List<object> results = new List<object>();

string[] arrSearchFilter = SearchFilter.Split(',');
for (int i = 0; i < arrSearchFilter.Length; i++)
{
    var pData = ctr.GetAllProjectsNoLOCandSt(
                        Convert.ToInt16(arrSearchFilter[i]), this.ModuleId);
    foreach (var result in pData)
        results.Add(result);
}

// do something with `results` collection 
```

# java - ObjectInputStreamReader 和 InputStreamReader 有什么区别？

> ID：10720846
> 
> 赞同：1
> 
> 时间：2012-05-23T13:22:38.080
> 
> 标签：java, inputstream, objectinputstream

我的老师说在文件服务器程序`ObjectInputStreamReader`中是必须写的。当我问原因时，他说我对文件服务器程序很舒服。我认为这不是必要的理由。为什么`InputStreamReader`或其他替代品不能使用？`ObjectInputStreamReader`over有什么好处`InputStreamReader`。

这里的客户端/服务器代码：

```
public class Client {
    public static void main(String[] args) {
        Socket s = null;
        ObjectInputStream ois = null;
        ObjectOutputStream oos = null;
        Scanner sc = new Scanner(System.in);

        String data = "";
        try {
            s = new Socket("localhost", 1234);
            System.out.println("client is connectd");

            ois = new ObjectInputStream(s.getInputStream());
            String jai = (String) ois.readObject();
            System.out.println("DATA from SERVER:" + jai);
            oos = new ObjectOutputStream(s.getOutputStream());
        } catch (Exception e) {
            e.printStackTrace();
        }

        System.out.println("Enter file name:");
        try {
            String fil = (String) sc.next();
            OutputStream pw = new FileOutputStream(fil + ".new");
            oos.writeObject(fil);
            data = (String) ois.readObject();
            pw.write(data.getBytes());
        } catch (Exception e) {
            System.out.println(e.getMessage());
        }
        System.out.println("Content of file:" + data);
    }
} 
```

谁能说出真正的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:32:49.600

An`InputStream`是一个*抽象类*，可用于定义任何类型的输入流，包括从文件系统、URL、套接字等读取。

您实际上并没有创建一个`InputStream`，因为它本身并不意味着任何东西。相反，您创建一种*定义*如何读取/写入特定类型数据的`InputStream`类型，例如建议的`ObjectInputStream`. 此类定义正在写入的数据是 Java `Object`（实现`Serializable`或`Externalizable`）。还有其他`InputStreams`用于通用文件数据、图像、音频和一系列其他类型。

没有这样的东西`ObjectInputStreamReader`，除非你自己写一个这样的类，目的是写一个`ObjectInputStream`。

更多启示请参考[ObjectInputStream](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/ObjectInputStream.html)和[InputStream Java 文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/InputStream.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T13:34:31.523

我认为你的意思是`ObjectInputStream`和`BufferedInputStream`（不是读者）。

`ObjectInputStream`包装输入流并提供允许从流中读取特定类型数据的类型化方法。例如`readDouble()`，`readObject()`等等。

`BufferedInputStream`不提供额外的 API（与常规相比`InputStream`）。它唯一要做的就是缓冲数据，即逐块读取数据，这比逐字节读取要有效得多。

# c# - Tessnet2“无法加载文件或组件”

> ID：10720859
> 
> 赞同：0
> 
> 时间：2012-05-23T13:23:10.297
> 
> 标签：c#, visual-studio-2010, web-deployment, tessnet2

我已经实现了 Tessnet2 库以在我的 Web 项目中工作。在调试时，我已经摆脱了所有“常见的”错误++。

当我使用 Visual Studio 2010 将此解决方案部署到网络服务器并测试该站点时，我收到错误消息：

```
Could not load file or assembly 'tessnet2_32' or one of its dependencies. 
An attempt was made to load a program with an incorrect format. 
```

堆栈跟踪如下：

```
[BadImageFormatException: Could not load file or assembly 'tessnet2_32' or one of its dependencies. An attempt was made to load a program with an incorrect format.]
   System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +0
   System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection, Boolean suppressSecurityChecks) +567
   System.Reflection.RuntimeAssembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection) +192
   System.Reflection.Assembly.Load(String assemblyString) +35
   System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +123

[ConfigurationErrorsException: Could not load file or assembly 'tessnet2_32' or one of its dependencies. An attempt was made to load a program with an incorrect format.]
   System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +11568160
   System.Web.Configuration.CompilationSection.LoadAllAssembliesFromAppDomainBinDirectory() +485
   System.Web.Configuration.AssemblyInfo.get_AssemblyInternal() +79
   System.Web.Compilation.BuildManager.GetReferencedAssemblies(CompilationSection compConfig) +337
   System.Web.Compilation.BuildManager.CallPreStartInitMethods() +280
   System.Web.Hosting.HostingEnvironment.Initialize(ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters, PolicyLevel policyLevel, Exception appDomainCreationException) +1167

[HttpException (0x80004005): Could not load file or assembly 'tessnet2_32' or one of its dependencies. An attempt was made to load a program with an incorrect format.]
   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +11700896
   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +141
   System.Web.HttpRuntime.ProcessRequestInternal(HttpWorkerRequest wr) +11532014 
```

问题是，有人见过这个吗？并处理它？或知道修复？

我尝试将 tessdata-folder 移动到服务器上的 bin 文件夹，我确保 tessnet2_32.dll 文件和 pdb 文件位于服务器上的 bin 文件夹中...

所有其他库也应该存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:26:13.227

服务器是 64 位进程，而 tessnet2_32.dll 是 32 位的。所以你不能加载 DLL 并得到这个异常。

# objective-c - 无法在 Objective-C/C 中正确 malloc

> ID：10720863
> 
> 赞同：1
> 
> 时间：2012-05-23T13:23:23.170
> 
> 标签：objective-c, c, malloc

我有一个 OpenGL 程序，但无法正确分配。

```
m_VertexData = (GLfloat*)malloc(sizeof(m_TempVertexData));
m_NormalData = (GLfloat*)malloc(sizeof(m_TempNormalData));
NSLog(@"sizeOfTempVertex: %d sizeOfTempNormal: %d", sizeof(m_TempVertexData),sizeof(m_TempNormalData));
NSLog(@"sizeOfVertex: %d sizeOfNormal: %d",sizeof(m_VertexData),sizeof(m_NormalData)); 
```

NS日志：

> sizeOfTempVertex：432 sizeOfTempNormal：432
> 
> sizeOfVertex: 4 sizeOfNormal: 4

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T13:26:13.313

`sizeof`告诉你类型的大小（在编译时计算）。它不会告诉您动态分配了多少内存。¹

* * *

[1\. C99 变长数组的特殊情况除外。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T13:34:26.653

m_VertexData 和 m_normalData 是指针，所以它们的大小是 sizeof（无论它有什么类型 *），所以它分配了正确的内存量。您需要分配 sizeof(数组成员) * 内存的项目字节数。顺便说一下，与 malloc 相关的一些事情：

1.  不要强制转换 malloc 的返回值。它使代码不可读并且没有必要，因为 void * 被隐式提升为分配给它的任何指针类型。
2.  不要使用`sizeof(type)`，而是`sizeof(variable)`。如果你改变了变量的类型，它会导致难以追踪的错误。

考虑到这些点，请使用以下代码：

```
m_VertexData = malloc(sizeof(*m_VertexData) * numberOfItems); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T13:36:17.120

根据 C 标准，第 6.5.3.4.2 节：

> sizeof 运算符产生其操作数的大小（以字节为单位），它可以是表达式或带括号的类型名称。大小由操作数的类型决定。结果是一个整数。如果操作数的类型是变长数组类型，则计算操作数；否则，不计算操作数，结果是一个整数常量。

在您的情况下，操作数`m_VertexData`和`m_NormalData`是指针（这是有道理的，因为您刚刚为它们分配了调用的结果`malloc`）。因此，它们的大小与系统上任何其他指针的大小相同 - 4 个字节。

如果您想知道，没有标准的方法可以确定您拥有多少内存`malloc`。如果您需要该大小以供将来参考，则需要将该数字存储在单独的变量中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T13:27:48.373

`sizeof`可能无法按照您认为的方式工作。`sizeOfVertex`并且`sizeOfNormal`都是 32 位指针，因此 4 是它们的正确大小。没有可移植的方法来确定分配内存的实际大小。请参阅[确定 c 中动态分配内存的大小](https://stackoverflow.com/questions/1281686/determine-size-of-dynamically-allocated-memory-in-c)。

# go - 为什么我在 golang 中的网络服务器不处理并发请求？

> ID：10720867
> 
> 赞同：65
> 
> 时间：2012-05-23T13:23:36.427
> 
> 标签：go

这个简单的 HTTP 服务器包含对 time.Sleep() 的调用，它使每个请求需要五秒钟。当我尝试在浏览器中快速加载多个选项卡时，很明显每个请求都按顺序排队和处理。我怎样才能让它处理并发请求？

```
package main

import (
   "fmt"
   "net/http"
   "time"
)

func serve(w http.ResponseWriter, r *http.Request) {
   fmt.Fprintln(w, "Hello, world.")
   time.Sleep(5 * time.Second)
}

func main() {
   http.HandleFunc("/", serve)
   http.ListenAndServe(":1234", nil) 
} 
```

其实我是在写完这个问题后才找到答案的，而且很微妙。无论如何我都会发布它，因为我在谷歌上找不到答案。你能看到我做错了什么吗？

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-05-23T15:15:53.300

您的程序已经同时处理请求。您可以`ab`使用 Apache 2 附带的基准测试工具来测试它：

```
ab -c 500 -n 500 http://localhost:1234/ 
```

在我的系统上，基准测试总共需要 5043 毫秒来处理所有 500 个并发请求。**只是您的浏览器限制了每个网站的连接数。**

顺便说一句，对 Go 程序进行基准测试并不是那么容易，因为您需要确保您的基准测试工具不是瓶颈，并且它还能够处理那么多并发连接。因此，最好使用几台专用计算机来生成负载。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-11-24T09:05:44.657

从 Server.go ，当连接被接受时， go 例程在 Serve 函数中生成。以下是片段，:-

```
// Serve accepts incoming connections on the Listener l, creating a 
// new service goroutine for each.  The service goroutines read requests and
// then call srv.Handler to reply to them.
func (srv *Server) Serve(l net.Listener) error {
        for {
            rw, e := l.Accept()
               if e != nil {
......
            c, err := srv.newConn(rw)
            if err != nil {
                continue
            }
            c.setState(c.rwc, StateNew) // before Serve can return
            go c.serve()
        }
} 
```

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2016-06-15T22:22:02.010

如果您使用 xhr 请求，请确保 xhr 实例是局部变量。

例如，`xhr = new XMLHttpRequest()`是一个全局变量。当您使用相同的 xhr 变量执行并行请求时，您只会收到一个结果。所以，你必须像这样在本地声明 xhr `var xhr = new XMLHttpRequest()`。

# java - Tomcat 上的 Tapestry Web App 偶尔会吐出垃圾

> ID：10720869
> 
> 赞同：6
> 
> 时间：2012-05-23T13:23:45.137
> 
> 标签：java, tomcat, gzip, tapestry

我们有一个在 Tomcat 6 上运行的 Tapestry-Spring-Hibernate webapp，每秒处理大约 1000 个请求。随机地，没有明显的原因，页面只是在浏览器上显示一堆随机字符。但是，当页面刷新时，它显示正常。下面是 Chrome 上乱码页面的来源截图：

![Chrome上tomcat的页面](../Images/d119a02003006717fc409cd644e21578.png)

这是我到目前为止发现的：

1.  它似乎不是特定于浏览器的。我在 Chrome 和 Firefox 上见证了这一点，但用户也在 IE 7 及更高版本上报告了这一点。
2.  服务器上的负载似乎与发生这种情况的时间无关。
3.  刷新页面正常显示页面，就好像什么都没发生过一样。
4.  我在服务器或应用程序日志中看不到任何相关内容
5.  页面的内容类型标签是`<meta content="text/html; charset=utf-8" http-equiv="content-type"/>`
6.  在同一个容器上部署了其他几个 web 应用程序，一个是 Alfresco，但它们似乎根本没有展示这一点。

我的问题是，以前有没有人遇到过这种情况，如果有，他们能指出我应该从哪里开始寻找吗？这是页面具有不正确的内容类型或服务器由于某种原因无法处理它的问题吗？或者这可能是 Tapestry 或应用程序本身的框架错误？欢迎任何指点。在这一点上，我不确定问题出在哪里，所以我不确定这是发生在 ServerFault 上还是留在这里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:46:00.810

这很可能是应用程序中的错误。（大多数错误是......尽管程序员自然倾向于责怪其他事情。）

但是，追踪这个问题可能有点棘手。我建议你从标准的东西开始：

*   查看服务器错误日志以查看在这些“事件”之一发生时是否出现任何奇怪的情况。
*   查看服务器访问日志，看看您是否可以识别产生垃圾数据的请求。
*   启用浏览器的调试器，看看是否可以通过这种方式追踪错误请求。

如果您能弄清楚产生不良响应的请求是什么，您将更有动力找到原因。

* * *

FWIW - 这看起来不像是字符编码问题的结果。这看起来更像是二进制或压缩数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T05:25:00.237

这是导致我看到乱码页面的一种情况。在错误页面上，Tapestry 设置了一个名为 X-Tapestry-ErrorMessage 的响应标头。显然标头中不允许换行符（至少在某些浏览器上），因此如果该标头中有换行符，则会出现乱码。我们设置的一条错误消息恰好有一个尾随的新行。在设置该标题之前，我将其更改为删除任何换行符，然后错误页面正确显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T21:39:16.177

这似乎与 Tapestry 框架中的 gzip 压缩问题有关（如 @barnyr 所建议），并且可能是 Tapestry 5.3 中的回归错误。从[邮件列表线程中](http://tapestry.1045711.n5.nabble.com/strange-situation-tp4687286p4687445.html)引用霍华德：

> 我相信这是一个错误，在某些情况下，损坏的 GZIP 页面内容流将流式传输到客户端；这肯定在 5.2.6 中修复，但我认为它在 5.2.5 中也已修复。

`contributeApplicationDefaults`快速修复是在应用模块类的方法中添加以下配置符号：

```
configuration.add(SymbolConstants.GZIP_COMPRESSION_ENABLED, "false"); 
```

这当然会禁用 gzip 压缩，但可能值得进行权衡。

可能相关的问题：

*   [如果请求超过 http 1.0，则应禁用 GZip 压缩](https://issues.apache.org/jira/browse/TAP5-1880)
*   [GZIP 压缩与 XmlHttpRequest 兼容吗？](http://tapestryjava.blogspot.ca/2009/04/is-gzip-compression-compatible-with.html)

# r - 具有非个体特定固定效应的面板回归

> ID：10720876
> 
> 赞同：2
> 
> 时间：2012-05-23T13:24:13.027
> 
> 标签：r, panel

我每周都会对不同国家/地区的不同产品销售收入进行观察，如下所示：

```
df <- data.frame(year=rep(c(2002,2003), each=16),
             week=rep(1:4,4),
             product=rep(c('A','B'), each=8, times=2),
             country=rep(c('usa','germany'), each=4, times=4),
             revenue=abs(rnorm(32))) 
```

这意味着对收入的观察仅对以下组合是唯一的`year`- `week`- `country`-`product`

我现在想估计一个模型，该模型包括对`country`和`year`的相互作用的固定效应，`product`但无法弄清楚如何做到这一点：

*   由于内存不足，通过估计`summary(lm(revenue~factor(paste(country,year)) + factor(product) + ..., data=df))`失败，因为我的数据集比上面的示例大得多，这意味着我必须估计大约 1000 个固定效应
*   据我了解，使用该软件包可以更好地估计面板，`plm`但我的案例似乎并不完全适合面板的标准框架，其中观察仅在一次和一个横截面维度上有所不同，并且估计了固定效应对于每个。我可以从中生成一个时间索引`year`，`week`但是（a）仍然给我留下两个横截面维度，并且（b）会给我每个交互的固定效果`year`，`week`这比我想要的要好得多。

是否有任何方法可以估计这一点，`plm`或者是否有其他软件包可以做这种事情？我知道我可以贬低上述组中的数据，通过估计`lm`然后进行 df 校正，但我宁愿避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-21T17:52:12.373

首先，创建一个变量“fe”，用于标识国家、年份、产品的唯一组合。

```
library(data.table)
# convert data.frame to data.table
setDT(df)
# create a new group variable
df[, fe := .GRP, by = list(country, year, product)]
head(df)
   year week product country    revenue fe
1: 2002    1       A     usa 0.84131750  1
2: 2002    2       A     usa 0.07530538  1
3: 2002    3       A     usa 0.56183346  1
4: 2002    4       A     usa 0.80720792  1
5: 2002    1       A germany 1.25329883  2
6: 2002    2       A germany 0.44860296  2 
```

现在使用`plm`或`felm`。我喜欢`felm`，因为它也适用于多种固定效果和交互式固定效果

```
library(lfe)
felm(revenue ~ week | fe, df) 
```

# coffeescript - Coffeescript：如何将字符串转换为数字？

> ID：10720878
> 
> 赞同：45
> 
> 时间：2012-05-23T13:24:24.130
> 
> 标签：coffeescript

我正在构建一个在 POST 请求中发送的 JSON 对象。该对象具有在发送前需要从字符串类型转换为整数类型的属性。如何使用咖啡脚本做到这一点？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-05-23T13:27:25.637

使用javascript`parseInt`函数。

```
number = parseInt( stringToParse, 10 ); 
```

参考在[这里](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/parseInt)。

请记住，coffeescript 只是编译后的 javascript

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-05-23T13:32:43.670

您可以使用不那么明显、更神奇、键盘密集度较低的运算符 +：

```
+"158" 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-23T13:32:01.727

Javascript 的 parseInt 函数将实现这一点。请记住设置 radix 参数以防止混淆并确保可预测的行为。（例如在 Coffeescript 中）

```
myNewInt = parseInt("176.67", 10) 
```

MDN 资源中有一些很好的例子：[https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-11T09:31:10.777

它尚未在官方手册中记录，但似乎演员操作员也可以工作：

```
myString = "12323"
myNumber = (Number) myString 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-08-26T08:44:02.857

我不建议使用`parseInt`，因为在一种情况下它是错误的 - 我发现：

```
parseInt('09asdf', 10); 
#> return 09 which is not correct at all. It should return NaN 
```

正确答案应该是来自@Corkscreewe 的答案。还有一个：

```
cleanInt = (x) ->
  x = Number(x)
  (if x >= 0 then Math.floor(x) else Math.ceil(x)) 
```

从[https://coderwall.com/p/cbabhg学习](https://coderwall.com/p/cbabhg)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-02-18T09:41:10.260

根据[nXqd 的答案](https://stackoverflow.com/a/18440032/1836143)中提到的链接，您还可以通过将字符串乘以 1 来隐式转换字符串：

```
'123' * 1 // 123 
```

对于不正确的输入，它的行为正确：

```
'123abc' * 1 // NaN 
```

您也可以使用浮点数执行此操作：

```
'123.456' * 1 // 123.456 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-18T01:22:44.480

这是满足您需要的简单方法。NaN 将按预期返回。

```
parseInt( "09asdf".match(/^\d+$/)?[0] ? NaN,  10) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-09-09T11:45:43.293

```
stringToConvernt = "$13,452,334.5"
output = Number(stringToConvernt.replace(/[^0-9\.]/g, ''))
console.log(output)
//The output is `13452334.5`.
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-03-16T12:27:18.263

我总是使用按位或将**字符串转换为整数**。

```
"99.999" | 0 // returns 99 
```

# wcf - 无法使用此设置与 WCF 服务通信：带有 SSL 证书的 Microsoft Forefront/TMG 后面的 WCF 服务的 IIS

> ID：10720884
> 
> 赞同：1
> 
> 时间：2012-05-23T13:24:38.437
> 
> 标签：wcf, iis, ssl-certificate, wcf-security

我有一个在 Microsoft Forefront/TMG 后面运行的 WCF 服务。该服务位于使用端口 80 的 IIS 上。TMG 侦听端口 443。TMG 安装了 SSL 证书。TMG 设置由我们的 IT 部门完成。我能够访问`https://mypublicsite:443/myservice.svc`和`https://mypublicsite:443/myservice.svc?wsdl`. 但是，如果使用 Visual Studio 测试客户端：WCFTestClient.exe（或任何客户端） - 在执行此错误的调​​用时出现超时：

> 调用服务失败。可能原因：服务离线或无法访问；客户端配置与代理不匹配；现有代理无效。有关更多详细信息，请参阅堆栈跟踪。您可以尝试通过启动新代理、恢复到默认配置或刷新服务来恢复。

我现在卡住了。`http://myinternalsite:80/myservice.svc`从网络内部访问服务时，一切正常。任何有解决方案的人？或者找到解决办法的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:46:33.310

它可能是：

*   您被防火墙阻止（尝试 telnet）
*   TMG 设置有问题（尝试从浏览器访问服务 wsdl）
*   您的 wcf 配置设置为使用/不使用传输安全性（检查服务器和客户端配置文件是否匹配）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T12:10:45.840

找到了解决方案。[让 fiddler2](http://www.fiddler2.com/fiddler2/)显示网络包的内容。这引导我找到解决方案。500 响应的原因是由于 WCF AddressFilter 不匹配。通过将其添加到我的服务中已解决此问题：`[ServiceBehavior(AddressFilterMode=AddressFilterMode.Any)]`

这是帮助我的文章： http: [//social.msdn.microsoft.com/Forums/en-US/wcf/thread/b5ae495b-f5fb-4eed-ae21-2b2280d4fec3/](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/b5ae495b-f5fb-4eed-ae21-2b2280d4fec3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T22:55:04.097

当我在服务发送的枚举上没有零值时，我收到了这个错误。如果使用**枚举**，请确保定义了发送的值。**默认为 0**。

```
[DataContract]
public enum MyEnum // No name for value 0 in this enum
{
    [EnumMember]
    Something1=1,
    [EnumMember]
    Something2=2,   
} 
```

# java - 在 Android 中创建 .jar

> ID：10720885
> 
> 赞同：0
> 
> 时间：2012-05-23T13:24:38.963
> 
> 标签：java, android, jar

我有一个 Android 项目，其中包含一些我想压缩为 JAR 的类。

我通过右键单击我的项目 - 导出 - JAR - 来创建 JAR - 并且 JAR 被创建而没有任何警告。

我可以在我的代码中访问 JAR 中的所有类，但是当我尝试构建项目时得到这个异常：

```
java.lang.NoClassDefFoundError: name.of.class.in.package 
```

有谁知道应该使用 JAR 导出哪些资源？你得到的选项是

```
.class path
.prject
AndroidManifest.xml
proguard.cfg
project.properties 

Right now I have included all of the above. 
```

将 JAR 变成库项目不是一种选择。为了清楚起见，我的 JAR 项目的 RES 文件夹中没有任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:58:28.717

它看起来与[这个](https://stackoverflow.com/questions/3642928/adding-a-library-jar-to-an-eclipse-android-project)主题相似。遵循 Russ Bateman 所写的非常明确的说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:46:49.057

打开项目属性 -> Java Build Path -> Order and Export 并检查项目 Android Dependencies 是否被检查以导出到结果 APK。

如果 .jar 存在于 Android Dependencies 项下的 Library 选项卡中。

如果您在“libs”文件夹中有 .jar，则默认情况下应该包含它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T13:36:25.717

只需将您的 JAR 添加到类路径或使用 Maven 构建您的项目并包含依赖项

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T14:01:53.347

尝试以不同的方式生成 jar。基本上 jar 是所有类文件的压缩文件，扩展名为 .jar。

1.  选择所有需要包含在 jar 文件中的类文件。
2.  右键单击并发送到压缩文件（Zip 文件）。
3.  您将拥有一个包含所有类文件的压缩文件。
4.  使用扩展名 .jar 重命名此压缩文件

现在将这个 jar 文件包含到您想要使用的项目中。

或者，如果您想通过不同的方法压缩所有文件，请确保所有文件都压缩在一起，没有文件夹。因此，当您解压缩文件时，您应该得到所有不包含在文件夹中的文件。

# php - MySQL now() 更改时区

> ID：10720887
> 
> 赞同：13
> 
> 时间：2012-05-23T13:24:53.243
> 
> 标签：php, mysql, timezone

我正在使用以下 INSERT 语句：

```
INSERT INTO messages SET `to` = '".$to."', `from` = '".$this->userid."', `title` = '".$title."', `message` = '".$message."', `created` = NOW() 
```

但是，它使用我的服务器时间（美国/蒙特利尔）。我想要亚洲的时区 (Asia/Calcutta)

这可能与相同的查询？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2018-02-26T10:12:54.997

最好在查询中直接使用 SQL 格式：

```
..`created` = CONVERT_TZ(NOW(),'SYSTEM','Asia/Calcutta').. 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-23T13:27:19.847

你会想要继续使用`CONVERT_TZ()`MySQL 中的函数。它基于您的操作系统使用的[Olson 数据库。](http://en.wikipedia.org/wiki/IANA_time_zone_database)

[这](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_convert-tz)是文档。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-23T13:33:54.527

打开与 MySQL 的连接后，运行以下查询：

```
SET time_zone = timezone; 
```

然后，您执行的所有功能都将为该连接在该时区运行（即，直到您关闭到数据库的“链接”）。

如果您拥有适当的权限，则可以“永久”/全局锁定它。Tiemzone 字符串是标准字符串，正如您在问题中所使用的那样。

[http://dev.mysql.com/doc/refman/5.5/en/time-zone-support.html](http://dev.mysql.com/doc/refman/5.5/en/time-zone-support.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T13:33:44.733

```
$myDateTime = new DateTime('2012-05-23 17:01', new DateTimeZone('GMT'));
$myDateTime->setTimezone(new DateTimeZone('Asia/Kolkata'));
echo $myDateTime->format('Y-m-d H:i'); 
```

修改上述代码后，如所需格式；您可以使用`$myDateTime`变量插入数据库。

# c++ - 将其他库链接到动态加载的库中

> ID：10720888
> 
> 赞同：0
> 
> 时间：2012-05-23T13:25:00.510
> 
> 标签：c++, gcc, shared-libraries, dynamic-loading

我正在编写一个由另一个程序动态加载的库。该库使用一些 Boost 库（例如，线程）。是否可以在不重新编译相关程序的情况下使其以某种方式工作？

如果我使用链接标志`-lboost_thread`，它就不起作用，因为使用这个库的程序也需要链接同一个 Boost 库。使用`/usr/lib/libboost_thread.a`也不起作用，因为`.a`文件不是用`-fPIC`.

我在 Linux 下使用 GCC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:23:41.810

再次尝试，我发现问题不是我描述的。由于其他原因，库没有加载。我发现将图书馆与`-lboost_thread`作品联系起来，具有以下条件：

*   gcc 给出编译器警告（可能是因为库来自`-L`不在的路径`$LD_LIBRARY_PATH`）。
*   加载库时，它会自动加载 Boost，前提是它可以找到它们。

# perl - Perl：从函数返回 hashref 不起作用

> ID：10720890
> 
> 赞同：2
> 
> 时间：2012-05-23T13:25:04.040
> 
> 标签：perl, function, obfuscation, hashref

当我遇到一些我不理解的奇怪行为时，我在玩弄一些没有任何用处的混淆代码。

这是我的代码。

```
no strict;
sub foo{1&&{${$_[0]},${$_[0]}}}say map {&${${_}}(${_})->{${${_}}}}map{\$_}qw(foo); 
```

并在缩进：

```
no strict;
sub foo {
  1 && { ${$_[0]} => ${$_[0]} }
}
say map { &${ ${_} }( ${_} )->{ ${ ${_} } } }
  map { \$_ } qw (foo); 
```

它应该做的是获取字符串`foo`，构建对它的引用，然后使用该名称 ( `&foo`) 调用函数。该函数应该返回一个 hashref，其中键和值都是`foo`字符串。之后，它打印返回的 hashref 的 key 的值`foo`，即`foo`.

到目前为止，一切都很好。没用，但还是很有趣。奇怪的是，当我删除`1 &&`sub 中的部分时，尽管有卷曲，它仍会返回一个列表，我不知道为什么会这样做。

如果我只是说它`sub foo { { 'foo'=>'foo' } }`返回参考。为什么在我的情况下没有？此外，为什么在我添加时会出现`1 &&`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T13:27:31.663

如果没有该`1 &&`部分，花括号将被解释为一个块，从而返回一个列表。通过附加部分，perl 解释器根据需要创建匿名哈希引用。

`1 &&`你也可以使用简单`+`的 perl 解释器来代替：

```
sub foo {
  +{ ${$_[0]} => ${$_[0]} }
} 
```

# c++ - 这个同步对象实现线程安全吗？

> ID：10720891
> 
> 赞同：2
> 
> 时间：2012-05-23T13:25:04.923
> 
> 标签：c++, thread-safety

我正在审查一位同事的 Visual Studio 2008 C++03 应用程序，并且遇到了线程同步原语的实现（如下）。

假设`SyncObject`正确实现，在下面的代码中使用布尔值来了解资源是锁定还是解锁线程安全？如果不是，您能否通过“ThreadA”执行此操作而“ThreadB”执行此操作，以便我理解您的逻辑？

```
class CMyLock
{
public:
    CMyLock(SyncObject* object) 
        : object_(object), acquired_(false) 
    { 
    };

    // return true if the resource is locked within the given timeout period
    bool Lock(DWORD dwTimeOut = INFINITE)
    {
        acquired_ = object_->Lock(dwTimeOut);
        return acquired_;
    };

    // return true if the resource is unlocked
    bool Unlock()
    {
        if (acquired_)
            acquired_ = !object_->Unlock();
        return !acquired_;
    };

    // return true if the resource is locked
    bool IsLocked() { return acquired_; };

private:
    bool acquired_;
    // some thread synchronization primitive
    SyncObject* object_;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:31:55.323

它不是线程安全的。

直接`m_pObject->Unlock()`返回后，等待的另一个线程`m_pObject->Lock(dwTimeOut)`可以返回并设置`m_bAcquired`为true，然后解锁线程设置`m_bAcquired`为false并错误地覆盖锁定状态（对象被锁定时IsLocked将返回false）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T13:38:54.633

我看到这段代码有几个严重的问题。在代码审查中，我会拒绝它。

1.  目前尚不清楚这个类的目的是什么。它可能是原语的瘦代理。它可能是一个自动储物柜。无论哪种情况，设计都是错误的，并且文档（无）没有详细说明。

2.  它不使用 RAII。无论这个对象打算是什么，这都是一个好主意，但对于自动储物柜来说，这一点尤其重要。

3.  它保留自己的状态，这可能与同一线程中的其他实例不同步。例如，如果您在线程 A 上创建此对象的 2 个实例，将一个设置为`locked`并检查另一个的状态，它应该说`locked`但它不会。

4.  可能最重要的是，它充其量只是在重新发明轮子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T13:28:32.860

简短的回答：**没有**

您也需要锁定阅读，否则您可能会看到过时的状态。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T13:30:49.887

不，不是——至少从我所见。可能发生的情况是一个线程调用 lock 并获取锁，而另一个线程在 m_bAcquired 被导致锁的线程更新之前访问它。

这就是为什么你需要一把锁来阅读，正如 Matthieu M. 所说的那样。

A：锁定在 m_pObject 被锁定之后但在设置 m_bAcquired 之前 B：IsLocked --> 返回 false A - 仍在锁定中：m_pObject = true

所以B有虚假信息。

其他问题：解锁依赖于 m_bAcquired。

我认为这个对象应该在一个线程中使用。所以每个线程都有自己的 CSingleLock 实例，但它们都使用相同的 SyncObject。在这种情况下，只有 SyncObject 需要是线程安全的并且它可以工作。

# vb.net - 属性返回值错误

> ID：10720896
> 
> 赞同：0
> 
> 时间：2012-05-23T13:25:13.487
> 
> 标签：vb.net, properties

我有一个类 class1.vb，它有一个名为 prop1 的公共属性，带有一个 get 和一个 set 子句。我将在 set 子句中传递的值加一，并在 get 子句中返回在 set 子句中确定的值变量。但是，我在 get 子句中的变量上收到错误...

```
Public Property prop1()
    Get 
        Return value 
    End Get 
    Set (value)
        value = value +1
    End Set 
End Property 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:27:28.430

尝试设置属性的类型并尝试将`value`变量更改为其他变量，因为`Set`它使用的是它自己的同名局部变量：

```
Private myValue As Integer

Public Property prop1() As Integer
  Get 
    Return MyValue 
  End Get 
  Set (ByVal value As Integer)
    MyValue = value
  End Set
End Property 
```

# perl - 使用 XML::Smart 从具有多个子元素的 XML 元素中获取 Perl 数组？

> ID：10720897
> 
> 赞同：1
> 
> 时间：2012-05-23T13:25:16.093
> 
> 标签：perl, xml-parsing

鉴于此 XML 文件片段：

```
<properties>
  <one>ONE</one>
  <two>TWO</two>
  <three>THREE</three>
</properties> 
```

我想要这两个数组：

```
(ONE, TWO, THREE)
(one, two, three) 
```

或者哈希也是合适的。如果可能的话，我想使用它，[`XML:Smart`](https://metacpan.org/module/XML%3a%3aSmart)因为我已经经常使用它了。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T13:37:01.623

您可以使用它[`XML::Simple`](http://search.cpan.org/perldoc?XML%3a%3aSimple)来解析 XML。然后简单地将键/值对提取到数组中。

```
use strict;
use warnings;
use Data::Dumper;

use XML::Simple;

my $file = shift;
my $xml  = XMLin($file);   # $xml is now a hash ref with the data

my @keys = keys %$xml;     # extract hash keys
my @vals = values %$xml;   # extract hash values

print Dumper \@keys, \@vals; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T14:10:35.210

感谢您向我介绍 XML::Smart。它从我身边经过，似乎比无处不在的 XML::Simple 要好得多。

看起来您需要以哈希的形式访问 XML。这就像 XML::Simple，但在这种情况下，哈希是绑定的而不是真实的，因此实现可以更加稳固。

使用该`nodes`方法访问`<properties>`元素内的节点列表，并使用 和 获取每个元素的标签名称和文本`key`内容`content`。

这是一些代码。

```
use strict;
use warnings;

use XML::Smart;

my $xml = <<'XML';
<properties>
  <one>ONE</one>
  <two>TWO</two>
  <three>THREE</three>
</properties>
XML

my $smart = XML::Smart->new($xml);

my @nodes = $smart->{properties}->nodes;
my @text = map $_->content, @nodes;
my @names = map $_->key, @nodes;

printf "(%s)\n", join ', ', @text;
printf "(%s)\n", join ', ', @names; 
```

**输出**

```
(ONE, TWO, THREE)
(one, two, three) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T14:08:37.017

我很快就用 XML::Smart 进行了尝试。此代码有效。

```
use strict;
use feature qw(say);
use XML::Smart;
my %config;

my $str = qq~<properties>
  <one>ONE</one>
  <two>TWO</two>
  <three>THREE</three>
</properties>~;

my $XML = XML::Smart->new($str);
my @nodes = $XML->{properties}->nodes();
foreach my $k (@nodes) {
  say "$k: ", $k->key;
  $config{$k} = $k->key;
}
print Dumper \%config; 
```

它将打印以下内容：

```
ONE: one
TWO: two
THREE: three
$VAR1 = {
          'TWO' => 'two',
          'THREE' => 'three',
          'ONE' => 'one'
        }; 
```

这一切都在文档中：[key-method](http://search.cpan.org/~gmpassos/XML-Smart-1.6.9/lib/XML/Smart.pm#key%28%29)，[nodes-method](http://search.cpan.org/~gmpassos/XML-Smart-1.6.9/lib/XML/Smart.pm#nodes%28%29)

把它放在两个数组中似乎更难。也许看看[i()-method](http://search.cpan.org/~gmpassos/XML-Smart-1.6.9/lib/XML/Smart.pm#i%28%29)。

# string - 如何以编程方式将 MAC 地址插入 /etc/network/interfaces？

> ID：10720898
> 
> 赞同：1
> 
> 时间：2012-05-23T13:25:18.267
> 
> 标签：string, bash, ubuntu, text, insert

我正在尝试编写一个在使用`wlan0`接口时使用用户创建的 MAC 地址的脚本。

为了测试，我制作了一个名为 的文件`testFile.txt`，它是`/etc/network/interfaces`. 如果后面有接口`wlan0`，我不能使用`echo "$var" >> testFile.txt`，因为那只是将文本添加到末尾。

我能够找到`wlan0`界面文本的结尾，但我不知道如何插入那里。以下是我目前拥有的：

```
#!/bin/bash

echo "Enter MAC Address"
read var
log=$(cat testFile.txt | grep -o "wlan0.*" | grep -o dhcp)
echo $log 
```

`echo $log`打印`dhcp`。

我尝试添加`| echo "hwaddress ether $var" >> testFile.txt`，`$log`但仍然附加到文件的末尾。之后如何直接插入`$log`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:45:16.263

### 问题

1.  无用的*cat*。不要那样做。
2.  你没有使用正确的工具来完成这项工作。使用 GNU sed 让自己的生活更轻松。

### 解决方案

```
# Insert hwaddress line into /etc/network/interfaces.
read -p "Enter MAC Address: "
sudo sed -i.bak "/iface wlan0/a\    hwaddress $REPLY" /etc/network/interfaces

# Replace existing hwaddress line in /etc/network/interfaces.
read -p "Enter MAC Address: "
sudo sed -ri.bak "s/(hwaddress).*/\1 $REPLY/" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T13:32:39.713

您可能要使用`sed`插入 MAC 地址。如果你想用 wlan0 将它插入到行尾，那就是

```
sed "s/\(wlan0.*\)/\1 $var/" testFile.txt > testFile.txt.tmp 
```

如果这有效，那么

```
mv testFile.txt.tmp testFile.txt 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-23T13:30:20.690

你需要一个不同的工具，例如 SED

```
$ seq 5 | sed '/3/ s/.*/something else/'
1
2
something else
4
5 
```

例如，您可以将带有 '3' 的行替换为 'something else' - 并且没有限制

# emacs - elisp 变量定义。像“defvar bh/organization-task-id”这样的变量名中斜杠的作用是什么

> ID：10720905
> 
> 赞同：2
> 
> 时间：2012-05-23T13:25:44.733
> 
> 标签：emacs, lisp, org-mode

以下功能来自[组织模式 - 以纯文本组织您的生活！](http://doc.norang.ca/org-mode.html)它在 emacs-23.4-r1 中不起作用。但是，如果我删除 bh/organization-task-id 中的 bh/ 前缀并将其更改为 organization-task-id。它奏效了。我不知道为什么。变量名和函数名中斜杠的作用是什么？提前谢谢。

```
(defvar bh/organization-task-id "eb155a82-92b2-4f25-a3c6-0304591af2f9")

(defun bh/clock-in-organization-task-as-default ()
  (interactive)
  (org-with-point-at (org-id-find bh/organization-task-id 'marker)
    (org-clock-in '(16)))) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T14:37:08.053

'bh/' 代表函数的作者 Bernt Hansen。

由于 Elisp 不支持命名空间，因此通常的做法是在函数和变量名称前加上一个通用标识符，以避免与其他模块中使用的名称冲突。例如，所有 org-mode 函数和变量都以`org-`or开头`ob-`（对于 org-babel）。

我无法回答您关于为什么在 emacs-23.4 上失败的问题。

# javascript - 我应该如何格式化 socket.io 消息以从 Perl 脚本发送到 node.js？

> ID：10720907
> 
> 赞同：5
> 
> 时间：2012-05-23T13:25:56.893
> 
> 标签：javascript, perl, node.js, socket.io

我有一个使用 socket.io 的简单 node.js 服务器来监听消息。我正在从 Perl 脚本向服务器发送消息 - 服务器似乎正在接收消息，但无法识别消息的“通道”。如何正确构造要从 Perl 脚本发送的 node.js/socket.io 消息？

这是我的 node.js 服务器：

```
var express = require('express');
var app = express.createServer();
var io = require('socket.io').listen(app);

app.listen(3000);

io.sockets.on('connection', function (socket) {
  console.log("In connection");
  socket.on('testevent', function (data) {
    console.log("In testevent");
    console.log(data);
  });
}); 
```

这是我发送消息的 Perl 脚本的一部分：

```
#$clientID is set to 1598760311220985572 earlier... obtained from a handshake

$uri = "http://192.168.3.13:3000/socket.io/1/xhr-polling/$clientID";

$message = "5:::{'name':'testevent','args':['hello!']}";

$request = HTTP::Request->new( 'POST', $uri );
$request->content( $message );

print $response = $browser->request( $request )->as_string; 
```

从 Perl 脚本收到消息后的服务器日志：

```
 info  - handshake authorized 1598760311220985572
  debug - client authorized for 
In connection
  debug - xhr-polling received data packet 5:::{'name':'testevent','args':['hello!']} 
```

因此，node.js 服务器似乎正在接收消息，但无法识别通道“testevent”，因为如果它正确解释消息，我希望服务器记录字符串“In testevent”。

我是否在 Perl 中正确格式化了我的消息，或者我的服务器代码是错误的？

# c# - Rhino Mocks - 通过多次调用模拟其返回值更改（即使传递相同的参数）的方法

> ID：10720908
> 
> 赞同：22
> 
> 时间：2012-05-23T13:25:58.867
> 
> 标签：c#, unit-testing, mocking, rhino-mocks

我正在寻找如何模拟第二次调用第一次返回不同值的方法。例如，像这样：

```
public interface IApplicationLifetime
{
    int SecondsSinceStarted {get;}
}

[Test]
public void Expected_mock_behaviour()
{
    IApplicationLifetime mock = MockRepository.GenerateMock<IApplicationLifetime>();

    mock.Expect(m=>m.SecondsSinceStarted).Return(1).Repeat.Once();
    mock.Expect(m=>m.SecondsSinceStarted).Return(2).Repeat.Once();

    Assert.AreEqual(1, mock.SecondsSinceStarted);
    Assert.AreEqual(2, mock.SecondsSinceStarted);
} 
```

有什么可以让这成为可能吗？除了为实现状态机的 getter 实现 sub 之外？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-23T13:44:42.413

`.WhenCalled`您可以使用该方法拦截返回值。请注意，您仍然需要通过`.Return`方法提供一个值，但是如果`ReturnValue`从方法调用中更改，Rhino 将简单地忽略它：

```
int invocationsCounter = 1;
const int IgnoredReturnValue = 10;
mock.Expect(m => m.SecondsSinceLifetime)
    .WhenCalled(mi => mi.ReturnValue = invocationsCounter++)
    .Return(IgnoredReturnValue);

Assert.That(mock.SecondsSinceLifetime, Is.EqualTo(1));
Assert.That(mock.SecondsSinceLifetime, Is.EqualTo(2)); 
```

* * *

再挖掘一下，似乎在这种情况下`.Repeat.Once()` **确实**有效，并且可以用来实现相同的结果：

```
mock.Expect(m => m.SecondsSinceStarted).Return(1).Repeat.Once();
mock.Expect(m => m.SecondsSinceStarted).Return(2).Repeat.Once();
mock.Expect(m => m.SecondsSinceStarted).Return(3).Repeat.Once(); 
```

将在连续调用时返回 1、2、3。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-23T15:30:54.050

只需使用

```
mock.Expect(m=>m.SecondsSinceStarted).Return(1).Repeat.Once();
mock.Expect(m=>m.SecondsSinceStarted).Return(2).Repeat.Once(); 
```

这将`1`在第一次调用`2`期间和第二次调用期间返回。至少在 Rhino Mocks 3.6.0.0 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T14:26:43.703

如果时间是方法返回的决定因素，我会尝试抽象出时间流逝，以便您在测试中直接控制它。

类似于一个名为 ITimeProvider 的接口和一个名为 GetElapsedTime() 的成员，然后创建一个默认实现以在整个应用程序中使用。

然后，当您进行测试时，传入一个模拟的 ITimeProvider，这样您就可以控制应用程序感知到的时间。

# html - 使用 css 自动调整高度的动态大小

> ID：10720910
> 
> 赞同：0
> 
> 时间：2012-05-23T13:26:10.963
> 
> 标签：html, css

因为我可以有一个 div 里面有两个孩子，其中一个没有显示（显示：无），另一个占据了父亲的整个空间，但是当我告诉 javascript 显示隐藏的其他 autoredimensiones 到空间离开而不使用javascript？

html:

```
<div class="parent">
    <div class="child1" id="id1">
    </div>
    <div class="child2">
    </div>
</div> 
```

CSS：

```
.parent {
    height: 200px;
    background-color: red; 
}
.child2 {
    height: 100%;
    background-color: blue;
}
.child1 {
    display:none;
    height: 50px;
    background-color: green;
} 
```

javascript:

```
var myDiv = document.getElementById('id1');
myDiv.style.display="block"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:00:02.503

这不能用纯 CSS 来实现，但如果你可以添加一点 JavaScript（为了添加类名），那么它可以实现：

修改后的 JavaScript：

```
var myDiv = document.getElementById('id1');
myDiv.style.display = "block";
myDiv.className += ' nowShown'; 
```

附加的CSS：

```
.child1.nowShown {
    float: left;
    width: 50%;
}

.child1.nowShown + .child2​ {
    display: inline-block;
    width: 50%;
}​ 
```

[JS Fiddle 概念验证](http://jsfiddle.net/davidThomas/9hZzK/)。

否则这是不可能的，仅仅是因为 CSS 缺乏确定`display`元素的视觉/状态的能力。如果它有一个`:visible`伪类，那么它是可能的，但没有这样的，就像目前一样，遗憾的是没有。

* * *

修改了上述概念验证以实现稍微不太简洁的切换：

```
function showDiv1() {
    var myDiv = document.getElementById('id1'),
        cN = myDiv.className;
    myDiv.style.display = "block";

    if (cN.match(/nowShown/)){
        myDiv.className = cN.replace(/nowShown/,'');
        myDiv.style.display = 'none';
    }
    else {
        myDiv.className += ' nowShown';
    }
    nC = myDiv.className;
    myDiv.className = nC.replace(/\s{2,}/,' ');
}

document.getElementsByTagName('button')[0].onclick = function(){
    showDiv1();
};​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/9hZzK/1/)。

# stomp - 用于持久订阅的 stomp 协议常规序列

> ID：10720913
> 
> 赞同：0
> 
> 时间：2012-05-23T13:26:16.250
> 
> 标签：stomp

我正在使用活动 mq 实现作为 stomp 服务器/代理来使用 stomp 协议。我想有一个 stomp 客户端的消息队列，可以在客户端离线时填充，这样当客户端不时连接时，它可以获取离线时已经存放的消息。

正如我所读到的，这可以通过简单订阅或持久订阅来实现。我决定持久订阅。这是正确的方法吗？

然后我想知道我应该在客户端使用哪些消息和标头。实际上我正在使用以下内容

连接

*   登录：
*   密码：
*   客户端 ID：some_mac_adr

订阅

*   目的地：/queue/some_mac_adr
*   收据：收据-msg
*   持久订阅者名称：默认

*现在等待消息*

*超时 -->*

断开

此消息序列是否正确？此外，我没有使用取消订阅命令。这也正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:46:11.920

> 我决定持久订阅。这是正确的方法吗？

默认情况下，队列是持久的，因此您不必显式地使消费者持久。

关于标头，正如我所说，由于您不需要使消费者耐用，因此可以避免传递耐用订阅者名称标头。而且，不确定这是否是偶然的，但您不需要保持队列名称和客户端 ID 相同。

顺便说一句，您使用的是哪种语言？不同语言的 STOMP 实现应该注意合理的默认值，因此您无需担心 CONNECT、SUBSCRIBE 等的标头。

> 此外，我没有使用取消订阅命令。这也正确吗？

同样， unsubscribe() 对队列没有太大影响，但是当消费者完成其工作时取消订阅会更干净。

我希望这对你的案子有帮助。

# onclick - 在 D3 中更改域

> ID：10720915
> 
> 赞同：1
> 
> 时间：2012-05-23T13:26:27.840
> 
> 标签：onclick, resize, dns, d3.js

我通过 SQL 将数据以逗号分隔的形式返回到 asp.net 标签。我正在提取 x、y 和 c 数据。我正在使用第三个变量来告诉我数据属于哪个集合（我有多个集合）。现在，这些集合具有不同的域，所以让我们使用一个玩具示例：

X = [1,0.5,0.75,0.8; 10,5,7.5,8; 100、50、75、80]

Y = [2,3,4,5; 20,30,40,50; 200、300、400、500]

C = [1,1,1,1; 2,2,2,2; 3,3,3,3]

我已经设置好了，所以当用户从下拉列表中选择一个集合时，我只通过运行显示该集合

```
.attr("r", function (d) { if(d.c == $('#pick').val()) return 1; else return 0}) 
```

但当然，显示这些的适当尺度是完全不同的！我确定域的方式总是返回最大值（对于 X 将是 100）

```
 var x = d3.scale.linear().domain([0, d3.max(datafiltered, function (d) { return parseInt(d.x) }) * 1.1]).range([0 + margin, w - margin]), 
```

有没有办法在 onclick 事件中重置它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T16:17:30.813

用 onclick 处理程序中的新比例（基本上重复实例化 d3.scale 的行）替换比例（`x`在您的情况下），然后重绘可视化。如果覆盖比例，则不需要更改任何实际的可视化代码。

# jquery - 带有两个四个月视图的剑道日历

> ID：10720922
> 
> 赞同：1
> 
> 时间：2012-05-23T13:27:12.430
> 
> 标签：jquery, calendar, kendo-ui

我想知道如何在 Kendo 日历中查看两个月的视图，因为我的客户想要一个有两个月的日历，一个有四个月的日历。

提前致谢，谢尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T03:16:12.610

最新版本的 Kendo UI 无法做到这一点。日期选择器等小部件的某些配置选项非常有限。

在此处查看所有配置选项：http: //docs.kendoui.c​​om/api/web/ [datepicker](http://docs.kendoui.com/api/web/datepicker)

# asp.net-mvc-3 - SignalR 在特定客户端上广播

> ID：10720923
> 
> 赞同：0
> 
> 时间：2012-05-23T13:27:15.910
> 
> 标签：asp.net-mvc-3, signalr

我有一个通知系统，使用 mvc 3，当为该用户打开新问题时，系统将向特定客户端发送通知。用户必须登录才能看到这些通知，这没关系，但我怎么知道要发送哪个用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T16:05:09.320

您可以将 SignalR 配置为使用特定的客户端 id - 例如，您可以使用会员提供者生成的 id。然后，当您想向特定用户广播时，您可以使用您的会员提供商提供的 id（或者您已经生成了一个唯一的 id）。

# twitter - 显示带有 twitter 控件/信息的 twitter 帐户列表

> ID：10720925
> 
> 赞同：0
> 
> 时间：2012-05-23T13:27:18.417
> 
> 标签：twitter

我有一些推特帐户列表，我想在我的网站上推荐（例如，关注这些出色的制作博主）。如果我有这些人的推特 ID，是否可以创建一个显示他们推特信息（图片、推文/关注者数量等）的项目列表以及允许用户关注每个人的控件（或多个）推特帐户？我希望能够根据帐户列表动态执行此操作，以便我可以更新列表而不必重新设计页面。我觉得我以前在网上看到过这个，但我没有看到任何小部件可以做到这一点，我想知道它是如何完成的。

（我想使用 javascript/jquery，但在这里非常灵活）

谢谢！杰夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:30:07.617

我会先看看[Twitter API](https://dev.twitter.com/)。您将找到有关 Twitter 工作原理的更多信息，并且您可能会在您的网站上找到适用于您想要完成的任务的信息。这是一个开始，没有比源本身更好的起点了。

# sql-server - 如何使用标量函数在 CASE 语句中检查 NULL？

> ID：10720937
> 
> 赞同：25
> 
> 时间：2012-05-23T13:27:39.587
> 
> 标签：sql-server, tsql

当您`NULL`使用?`CASE``Scalar Function`

我原来的查询是......但它失败了

```
SELECT  CASE dbo.fnCarerResponse('')
          WHEN NULL THEN 'Pass'
          ELSE 'Fail'
        END 
```

我读了关于 using的[SO](https://stackoverflow.com/questions/2085100/how-to-catch-null-values-using-case-statement)`IS NULL`问题，就像这样......

```
SELECT  CASE dbo.fnCarerResponse('') IS NULL 
          WHEN NULL THEN 'Pass'
          ELSE 'Fail'
        END 
```

但这给出了`incorrect syntax near the keyword is`错误

你能有一个`Scalar Function`吗`CASE`？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-23T13:29:27.947

您使用了错误的样式`CASE`- 您需要使用`CASE WHEN <expression> THEN`not `CASE <expression> WHEN <expression> then`：

```
SELECT CASE 
 WHEN dbo.fnCarerResponse('') IS NULL
 THEN 'Pass'
 ELSE 'Fail'
END 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-23T13:29:58.600

```
SELECT CASE 
         WHEN dbo.fnCarerResponse('') IS NULL 
         THEN 'Pass'
         ELSE 'Fail'
       END 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-23T13:30:04.813

```
SELECT  CASE 
          WHEN dbo.fnCarerResponse('') is NULL THEN 'Pass'
          ELSE 'Fail'
        END 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-06T20:36:59.947

您也可以使用这种方式：

```
SELECT   CASE ISNULL(dbo.fnCarerResponse(''),'NULLVALUE')
           WHEN 'NULLVALUE' THEN 'Pass'
           ELSE 'Fail'
         END 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-06T17:49:58.940

在列表的上下文中使用时，例如 SELECT 查询的列的定义，整个表达式必须用括号括起来，就像这样。

```
 ,LastEditorEmail = (SELECT CASE
        WHEN  CF.LastModifiedBy IS NULL THEN
            NULL
        ELSE
            UE.Email
    END) 
```

# iphone - deezer-ios 添加静态库

> ID：10720938
> 
> 赞同：0
> 
> 时间：2012-05-23T13:27:47.093
> 
> 标签：iphone, ios, static-libraries

我正在尝试使用 Deezer 提供的 iOS SDK 来开发 iPhone 应用程序。[我在这里](http://developers.deezer.com/sdk/ios)下载了框架。

我在 Xcode (xcode 3.2.6) 上启动了一个新项目，然后我导入了所有头文件（以及资源​​中的图片）。然后我右键单击框架并选择“添加>添加现有框架”并选择 deezer 提供的“libDeezer.a”。

我在我的应用程序委托类中编写了一些代码，当我尝试构建和运行项目时，我收到一个警告和一个错误：

```
ld: warning: in /Users/.../deezer-ios-sdk-0.5 3/deezer-ios-0.5/libDeezer.a, missing required architecture i386 in file
Undefined symbols:
   "_OBJC_CLASS_$_DeezerConnect", referenced from:
    objc-class-ref-to-DeezerConnect in deezer5AppDelegate.o
    ld: symbol(s) not found
    collect2: ld returned 1 exit status 
```

如何将库链接到我的项目？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:28:20.727

您是为模拟器还是设备构建？Deezer 的 iOS SDK 不适用于模拟器，而仅适用于设备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T13:35:27.307

双击项目目标，在搜索路径组中，有一个名为库搜索路径的属性。请正确指定路径。

如果您仍有疑问，请告诉我，我会详细说明

# java - Java 泛型：无法正确获取语法

> ID：10720941
> 
> 赞同：1
> 
> 时间：2012-05-23T13:28:00.400
> 
> 标签：java, generics

我正在尝试编写一个自定义 UI 组件（在 android 上），它将显示一个文本编辑控件以及两个可以向上或向下单击的按钮。向上增加编辑控件中的数字，向下减少它。

我希望这个类在数字类型上是通用的，即我想将这个类专门用于 int 和 float 类型。

我一直在阅读这个不错的[Java 泛型教程](http://java.sun.com/j2se/1.5/pdf/generics-tutorial.pdf)，但我的特定实现似乎没有编译。这是我得到的：

```
public class NumberPicker<T> extends LinearLayout implements OnClickListener,
        OnFocusChangeListener, OnLongClickListener {

    public interface OnChangedListener<T> {
        void onChanged(NumberPicker<T> picker, T oldVal, T newVal);
    }

    public interface Formatter<T> {
        String toString(T value);
    }

    // Error: Cannot make a static reference to the non-static type T
    public static final NumberPicker.Formatter<T> TWO_DIGIT_FORMATTER =
            new NumberPicker.Formatter<T>() {
                public String toString(T value) {
                        // Do something with T value
                }
        };
} 
```

我在声明中收到以下编译器错误`TWO_DIGIT_FORMATTER`：

> 无法对非静态类型 T 进行静态引用

有人可以帮我语法。来自 C++，我对泛型理解得足够好，并且知道两者之间的一些差异。我只需要语法方面的帮助。

我尝试更改为：

```
 // "Syntax error on token "int", Dimensions expected after this token"
    public static final NumberPicker.Formatter<int> TWO_DIGIT_FORMATTER =
            new NumberPicker.Formatter<int>() {
                public String toString(int value) {
                    return mFmt.toString();
                }
        }; 
```

这给出了“令牌“int”的语法错误，此令牌之后的预期尺寸”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:33:04.450

*这与语法*无关，它与您的类型`T`与. 所以没有类型可以引用。*`NumberPicker``TWO_DIGIT_FORMATTER``static``NumberPicker``T`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T13:32:38.587

`T`参数属于一个实例，每个实例可以有不同的`NumberPicker`值，所以不能依赖于类的静态字段。

也不能在 中引用`public interface Formatter<T>`，因为接口成员默认是静态的。

解决此问题的一种方法是：

1.  `TWO_DIGIT_FORMATTER`, 作为一个常数应该有参数绑定。仔细想想，在这种情况下，未绑定的参数实际上并没有多大意义。
2.  `Formatter`可以有自己的单独参数，在将其传递给`NumberPicker`实例时进行检查。（这已经在 . 中隐含地完成了`OnChangedListener`。）

所以你的代码将是这样的：

```
public class NumberPicker<T>  {

    public interface OnChangedListener<Y> { //
        void onChanged(NumberPicker<Y> picker, Y oldVal, Y newVal);
    }

    public interface Formatter<X> {
        String toString(X value);
    }

    public void setFormatter( Formatter<T> formatter ) { ... }

    public static final NumberPicker.Formatter<? extends Number> TWO_DIGIT_FORMATTER =
        new NumberPicker.Formatter<Number>() {
            public String toString(Number value) {
                    // Do something with T value
            }
        };

} 
```

我在接口定义中替换`T`为`X`and`Y`以避免混淆。接口的参数与参数完全分开，`NumberPicker`通过给它们不同的名称，这很明显。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T13:34:04.483

您的字段`TWO_DIGIT_FORMATTER`是静态字段，即类字段，不属于任何特定实例。另一方面，只有当您引用绑定到具体类型`T`的特定实例时，才会解析类型参数。不同实例的类型会发生变化，因此自然对类字段没有任何意义。您必须从中删除限定符，然后您必须通过该类的实例访问它。`NumberPicker``T``T``static``TWO_DIGIT_FORMATTER`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T13:36:33.893

您不能在静态方法中使用泛型。Generic 将对您的实例进行参数化，而 static 不是实例，而是类范围。

您可以将其更改为（删除静态）：

```
public final NumberPicker.Formatter<T> TWO_DIGIT_FORMATTER = ... 
```*

# c# - 从我的 Windows Phone 应用程序呼叫 Skype 用户

> ID：10720942
> 
> 赞同：0
> 
> 时间：2012-05-23T13:28:03.703
> 
> 标签：c#, windows-phone-7

在我的 Windows Phone 应用程序中，我需要实现对某些用户的 Skype 呼叫。是否可以从我的 Windows Phone 应用程序呼叫 Skype 用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:08:27.853

对此没有内置支持，也没有专门针对 Windows Phone 的公共 SDK。

如果你真的必须这样做，那么你需要为[他们的 API](http://developer.skype.com/public-api-reference)实现一个与 WP7 兼容的接口。

# c# - 以编程方式获取 MenuItem 的事件处理程序

> ID：10720944
> 
> 赞同：0
> 
> 时间：2012-05-23T13:28:10.770
> 
> 标签：c#, wpf, xaml, event-handling, menuitem

我在 xaml 中定义了这个菜单项：

```
<MenuItem 
   Header="header of item"  
   Click="eventhandler_of_item" 
   Name="nameofitem"/> 
```

现在我想以编程方式获取点击事件的事件处理程序。获取标题很容易：

```
string header = nameofitem.Header.ToString(); 
```

但是获取 click 事件处理程序似乎有点棘手。谁能给个提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:32:41.913

它很乱，我建议你使用[命令](http://msdn.microsoft.com/en-us/library/ms752308.aspx)，它们可以很容易地传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:32:44.953

我不认为，这是可能的。您只能添加或删除事件处理程序（注册和取消注册）。
据我所知，不可能遍历附加的处理程序（我写了迭代，因为可能有多个处理程序附加到一个事件）。

*对于 CLR 事件，我记得我曾经看到过基于反射的解决方案。*

正如 HB 所说（+1），使用命令，这是“正常”类型，可以根据需要使用......

# php - 当我使用 FQL 查询 facebook 事件并且我只想获取未来事件时，我必须将当前时间转换为 PST 吗？

> ID：10720948
> 
> 赞同：0
> 
> 时间：2012-05-23T13:28:28.117
> 
> 标签：php, facebook, facebook-graph-api, facebook-fql

我知道当我从 facebook 事件中检索数据时，它会在 PST 时间出现，但是当我进行这样的查询时

```
 $imploded_eids = implode( ',', $eids );
        $fql[$id] = "
        SELECT
            eid,
            name,
            description,
            start_time,
            end_time,
            venue,
            location,
            update_time
        FROM
            event
        WHERE
            eid IN ($imploded_eids) AND start_time > $start_time"; 
```

我需要将实际 gmt() 时间转换为 PST 时间吗？或者我应该使用当前登录用户的时区吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:03:00.767

如果您要手动填充`$start_time`，则应将所需时间输入为 America/Los_Angeles（如果适用，则使用夏令时），然后将其转换为 UTC 以进行查询。无论活动地点如何，都是如此。

如果您要向多个时区的用户显示网络研讨会之类的时间，您将采用转换后的 America/Los_Angeles 时间并将其视为事件区域设置的时区。然后转换为用户的当前时区。

从过去几周事件对话框发生的变化来看，它的工作方式似乎即将发生变化。

# java - 创建拼贴画的最佳方法（Java 中）

> ID：10720949
> 
> 赞同：7
> 
> 时间：2012-05-23T13:28:30.270
> 
> 标签：java, photo, self-organizing-maps

我想创建一张照片拼贴画。类似于这张图片（想想照片而不是那些彩色矩形）：

![拼贴画](../Images/c5db79282ca8618522f644a9387d85b2.png)

应根据以下信息构建拼贴画。

我们有一个 2d 插槽地图和一组图像。地图（在本例中为 3x3 插槽）如下所示：

```
| s1 | s2 | s3 |
| s4 | s5 | s6 |
| s7 | s8 | s9 | 
```

现在，对于每个图像，我们都知道它属于哪个插槽。此外，可能没有图像属于特定插槽；然而，不止一张图像可以属于一个特定的插槽（我们可能有超过 9 张图像）。

除此之外，如果多个图像属于特定槽，我们知道图像属于该槽的程度。

那么，创建一个看起来很漂亮但仍保留上述地图结构的拼贴（用 Java 语言）的最佳方法是什么？

（要获得这张 2d 地图，我们使用的是 Kohonen 地图）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:21:53.187

您可以有一个值 (xa)，它 += 是每次绘制到画布上的图像的宽度，然后设置下一个图像 x 相对于 xa 的位置，然后在该值上不断使用模数，然后使用除法计算下一张图像的 Y 值（xa / pageWidth）。这是即兴的，如果没有意义，我很抱歉。

# php - 选择存储在变量中

> ID：10720950
> 
> 赞同：0
> 
> 时间：2012-05-23T13:28:30.620
> 
> 标签：php, mysql

嗨，我正在尝试为大学作业创建购物车，我正在尝试从变量的内容中加载表格，但无论我做什么，它都无法识别其内容。

这里的代码片段

`$sql = sprintf("SELECT name, description, price FROM %s WHERE id = %d;",$table, $product_id); $result = mysql_query($sql);`

表变量内容被遗漏了，所以它看起来是一个无名的表，我搜索了谷歌并找到了几个例子，但对我有用。

有没有人有任何想法？

谢谢斯科特。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:36:13.480

mysql_query 有两个参数，一个是你的查询，另一个是连接到你的数据库，所以你需要执行以下操作 $result = mysql_query($sql,your connection variable); `

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:43:48.313

尝试在 WHERE id = %d 后去掉分号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T14:17:23.233

试试这个，它应该识别你的变量：

```
$sql = sprintf("SELECT name, description, price FROM " .$table. " WHERE id = %d", product_id); 
$result = mysql_query($sql); 
```

# jquery - 右边框未显示在第一个 li

> ID：10720955
> 
> 赞同：0
> 
> 时间：2012-05-23T13:28:39.777
> 
> 标签：jquery, css

我对以下示例有一个特定问题：http: [//jsfiddle.net/c7NyZ/8/](http://jsfiddle.net/c7NyZ/8/)

在 IE7 中打开它或执行 IE7 模式。第一个 LI（右边界）似乎已与第二个 li 合并。

我正在为圆角使用 jquery 库。

你能帮我像其他人一样再次显示边界吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:36:13.620

问题与 IE<9 中不支持的圆角有关，您可以运行它 -

```
$("ul#top-nav li:first").corner("tl: 5px bl:5px ");
$("ul#top-nav li:last").corner("tr: 5px br:5px ");​ 
```

如果不是 IE<9 [http://api.jquery.com/jQuery.browser/](http://api.jquery.com/jQuery.browser/)

# mysql - StoredProcedure 结果到 MySQL 过程中的临时表中

> ID：10720958
> 
> 赞同：4
> 
> 时间：2012-05-23T13:28:48.053
> 
> 标签：mysql, database, stored-procedures

我有一个存储过程/例程“ABC”，它返回一个包含几行列的表。

在另一个 SP/例程“XYZ”中，我想将“ABC”返回的结果集与数据库中的表进行比较。

但是我遇到了一个障碍，我无法找到从“XYZ”中调用SP“ABC”的方法。有什么方法可以通过从“XYZ”调用“ABC”来填充临时表。

我对 MySQL 很陌生，并且很确定这在 SQL Server 中是可能的，但我现在对如何继续前进一无所知。请帮助我确定我在理解我的过程中犯了什么错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T13:42:29.027

您可以在过程中创建和填充临时表。然后您可以从另一个过程中通过其名称来引用该表，但您必须使用创建临时表的会话。临时表是会话范围的对象。

* * *

**例子：**

```
DELIMITER $$

CREATE PROCEDURE ABC()
BEGIN
  CREATE TEMPORARY TABLE tmpEnt SELECT 1;
END$$

CREATE PROCEDURE XYZ()
BEGIN
  INSERT INTO tmpEnt VALUES (100);
END$$

DELIMITER ;

CALL ABC; -- it will create temp. table
CALL XYZ; -- it will insert one more record into temp. table

SELECT * FROM tmpEnt;
+-----+
| 1   |
+-----+
|   1 |
| 100 |
+-----+ 
```

*我使用存储过程而不是函数。*

# c# - 如何解析坏的html？

> ID：10720961
> 
> 赞同：0
> 
> 时间：2012-05-23T13:28:52.350
> 
> 标签：c#, html, regex

我正在编写一个搜索引擎，它可以访问我公司所有附属网站，解析 html 并将它们存储在数据库中。这些网站非常老旧，在 100000 个网站中不符合 html 标准，大约 25% 的网站的 html 不好，难以解析。我需要编写可能修复错误 html 的 ac# 代码，然后解析内容或提出解决上述问题的解决方案。如果您有想法，实际的提示或代码片段会有所帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T13:31:10.363

只需使用[Html Agility Pack](http://htmlagilitypack.codeplex.com/)。解析错误的html代码非常好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T13:31:52.407

人们通常使用某种形式的启发式驱动[标签汤](http://en.wikipedia.org/wiki/Tag_soup)解析器。

例如对于

*   [爪哇](http://ccil.org/~cowan/XML/tagsoup/)
*   [哈斯克尔](http://hackage.haskell.org/packages/archive/tagsoup/0.12.6/doc/html/Text-HTML-TagSoup.html)

这些大多只是词法分析器，它们尽最大努力从所有随机符号构建 AST。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T13:36:08.697

使用 tagoup 解析器，我确定它是[C#](https://stackoverflow.com/q/704832/1048572)的解析器。然后，您可以将 DOM 序列化为或多或少有效的 HTML，具体取决于该解析器是否符合 HTML DTD。或者，您可以使用[HTML Tidy](https://stackoverflow.com/q/4002346/1048572)，它至少可以清除最严重的错误。

正则表达式不适用于此任务。

# image - 图像拖放上的 tinyMCE 回调处理程序

> ID：10720964
> 
> 赞同：1
> 
> 时间：2012-05-23T13:29:00.800
> 
> 标签：image, url, drag-and-drop, callback, tinymce

tinyMCE 支持将图像从网站（不是本地文件浏览器）拖动到富文本编辑器字段。它们被转换为`<img src=''>...</img>`标签并立即显示为图像。

我想在以`src`这种方式插入图像标签时更改它的 url。我尝试使用粘贴插件中的`urlconverter_callback`处理程序和`paste_preprocess`处理程序，但是当我将图像拖放到编辑器字段时，它们都没有被触发。

我可以使用哪个回调对图像拖放到编辑器做出反应？还是有另一种方法可以在删除图像 src 时更改它？

（`urlconverter_callback`当我使用“插入图像”按钮添加图像时有效，但这不是我想要的。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:30:12.457

关键取决于已经告诉过的内容：Drag-n-Drop 事件属于浏览器域，因此 TinyMCE 对它们一无所知，除非我们绑定它们，在这种情况下它是不必要的。

记住拖放交互在不同事件之间共享信息的方式也很重要：通过**getData**和**setData**函数读取和写入**dataTransfer**属性。

 ****也就是说，这是我的方法（注意我使用 jquery 进行选择和事件绑定）：

**将dragstart**事件绑定到图像，以便在我们开始交互时触发。进行字符串替换并将结果存储在 dataTransfer 上。

[https://gist.github.com/3040473](https://gist.github.com/3040473)

有用的链接：

*   [http://www.useragentman.com/blog/2010/01/10/cross-browser-html5-drag-and-drop/](http://www.useragentman.com/blog/2010/01/10/cross-browser-html5-drag-and-drop/)
*   [https://developer.mozilla.org/En/DragDrop/Drag_and_Drop](https://developer.mozilla.org/En/DragDrop/Drag_and_Drop)****

# php - 第一个数据卷曲 WSDL SSL 失败

> ID：10720966
> 
> 赞同：0
> 
> 时间：2012-05-23T13:29:06.730
> 
> 标签：php, soap, ssl, curl, firstdata

我正在与 FirstData wsdl 集成。跟随[`First Data Global Gateway Web Service API Integration Guide`](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CF8QFjAA&url=http://www.firstdata.com/downloads/marketing-merchant/fdgg-web-service-api.pdf&ei=XOa8T6FSh86tB6qN8cAN&usg=AFQjCNFukMvmj3nb_n7EtIlzkQ5vWzQiYw&sig2=QBhGHRPN4P7owq6BhX0UrQ) . `$kslocation`是`.key`文件的路径。`$kslocation`是`.pem`文件的路径，所有这些路径都是有效的。

```
$ch = curl_init($wsdl);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, array("Content-Type: text/xml"));
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
curl_setopt($ch, CURLOPT_USERPWD, "$userid:$password");
curl_setopt($ch, CURLOPT_POSTFIELDS, $body);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_SSLCERT, $pemlocation);
curl_setopt($ch, CURLOPT_SSLKEY, $kslocation);
curl_setopt($ch, CURLOPT_SSLKEYPASSWD, $keyname);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$result = curl_exec($ch);
echo curl_error($ch)."\n";
curl_close($ch); 
```

给我错误。

```
SSL read: error:1409441B:SSL routines:SSL3_READ_BYTES:tlsv1
alert decrypt error, errno 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T10:55:31.857

问题是我使用的是测试帐户网址。我将其更改为实时网址并且它有效。

# codeigniter - cookie 没有立即设置

> ID：10720967
> 
> 赞同：0
> 
> 时间：2012-05-23T13:29:07.570
> 
> 标签：codeigniter, cookies

我有一个篮子 cookie，在将产品添加到篮子之前，该函数会检查是否存在 cookie 或是否需要新的 cookie。这在一次添加一个项目时效果很好，但有时会同时添加多个项目。同样，如果存在旧的篮子 cookie，则此方法可以正常工作。问题是当不存在篮子 cookie 并且函数必须创建一个时。

第一次通过时，会创建 cookie，并添加数据库记录等。

第二次我们检查 cookie 的函数没有找到 cookie 并创建了另一个 cookie 等等。

```
 $this->db->select('basket_id');
  $this->db->from($this->basket_table);
  $this->db->where('basket_id', get_cookie('basket_id'));
  $check_basket = $this->db->get();

 if($check_basket->num_rows > 0){
   $basket_exists = 1;
 }else{
   $basket_exists = 0;
 }

 if($basket_exists == 0){
  delete_cookie('basket_id');

  $basket = array(
   'lang_id' => $lang_id,
   'currency_id'  => $currency_id,
   'customer_id'  => $customer_id,
  );

  $this->db->insert($this->basket_table, $basket);
  $basket_id =  $this->db->insert_id();;

  $cookie  = array(
   'name' => 'basket_id',
   'value' => $basket_id,
   'expire' => 60*60*24*30,
   'domain' => 'REMOVED'
   'path' => '/',
   'prefix' => '',
  );

  set_cookie($cookie);
}else{
  $basket_id = get_cookie('basket_id');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T04:28:23.753

为了设置 cookie，您需要将其发送到浏览器，但如果您的函数在创建视图之前循环多次，则不会发生这种情况。

所以在他们使用篮子之前设置cookie，或者只检查cookie是否需要设置一次，如下所示：

```
 $this->db->select('basket_id');
  $this->db->from($this->basket_table);
  $this->db->where('basket_id', get_cookie('basket_id'));
  $check_basket = $this->db->get();

 if($check_basket->num_rows > 0) { 

  $basket = array(
   'lang_id' => $lang_id,
   'currency_id'  => $currency_id,
   'customer_id'  => $customer_id,
  );

  $this->db->insert($this->basket_table, $basket);
  $basket_id =  $this->db->insert_id();

  $cookie  = array(
   'name' => 'basket_id',
   'value' => $basket_id,
   'expire' => 60*60*24*30,
   'domain' => 'REMOVED'
   'path' => '/',
   'prefix' => '',
  );

  set_cookie($cookie);
}

// Now run your basket logic here - knowing the cookie is setup 
```

}

# c# - Crm 2011 - 检索关联的 [N:N] 实体 (C#)

> ID：10720968
> 
> 赞同：1
> 
> 时间：2012-05-23T13:29:18.093
> 
> 标签：c#, crm, microsoft-dynamics

我正在编写一个将实体导入 CRM 的简单应用程序。在此导入期间，我需要将导入的实体（自定义实体）关联到另一个（也是自定义）实体。

新对象没有问题，但是当我尝试更新时，我需要删除有关导入实体的所有关联并根据导入的数据重新创建它们。

我怎样才能做到这一点？

我正在考虑获取所有关联实体，然后为每个实体调用 disassociate，但我在尝试获取这些关联实体时遇到了困难。

我应该如何处理这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-02T07:04:04.880

假设您有学生实体，并且您想将学生课程复制到另一个自定义实体，如您所说，名为 CStudent
您可以使用以下代码：

```
var scs = Context.new_Student_CourcesSet.Where(x => x.new_courceid == Cource.Id).ToList<new_Student_Cources>();

var removedsc = Context.new_new_CStudent_CourcesSet.Where(x => x.new_cstudentid == CStudent.Id).ToList<new_CStudent_Cources>();

EntityReferenceCollection relatedEntities = new EntityReferenceCollection();
EntityReferenceCollection removedrelatedEntities = new EntityReferenceCollection();
Relationship relationship = new Relationship(new_CStudent_Cources.EntityLogicalName);

if (removedsc != null)
{
    foreach (new_CStudent_Cources c in removedsc )
    {
        RemovedrelatedEntities.Add(new EntityReference(new_Cources.EntityLogicalName, (Guid)ar.new_courcesid));
    }

    Service.Disassociate(CStudent.LogicalName, CStudnetid, relationship, RemovedrelatedEntities);
}

foreach (new_Student_Cources d in scs)
{
    relatedEntities.Add(new EntityReference(new_Cources.EntityLogicalName, (Guid)d.new_courceid));
}

Service.Associate(CStudent.LogicalName, CStudentid, relationship, relatedEntities); 
```

# c# - wpf，我在运行时动态创建了许多窗体，但是我怎样才能获取这些窗体的身份呢？

> ID：10720969
> 
> 赞同：0
> 
> 时间：2012-05-23T13:29:19.980
> 
> 标签：c#, wpf

我想向指定的窗口发送不同的消息，但我不知道如何从所有窗口中识别给定的窗口。是使用窗口的“名称”属性的方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:47:56.513

另一种选择是使用反射来查找`Windows`执行程序集中的所有内容：

```
var windows = System.Reflection.Assembly.GetExecutingAssembly()
             .GetTypes().OfType<Window>(); 
```

拥有 Windows 集合后，您可以按名称找到其中的任何一个：

```
Window win = windows.SingleOrDefault( x => x.Name == "MyName" ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:33:30.927

您可以创建自己的 Window 类

```
public class MyCoolWindow : Window
{
   public string WindowKey {get;set;}
} 
```

并在每个窗口上创建一个新窗口到 glbal 集合，例如：

```
var windows = new List<MyCoolWindow>(); 

public void AddAndShowWindow(MyCoolWindow wnd)
{        
    windows.Add(wnd);
    wnd.Show();
} 
```

查找窗口，例如

```
public MyCoolWindow FindWindowByKey(string windowKey)
{
    return windows.Where(w=>w.WindowKey == windowKey).SelectSingleOrDefault();
} 
```

只是例子。

# vb.net - VB.net 选择文件夹中的文件和文件夹

> ID：10720970
> 
> 赞同：1
> 
> 时间：2012-05-23T13:29:22.583
> 
> 标签：vb.net, winforms

我正在尝试选择要压缩的文件夹中的文件和文件夹，但它似乎正在做的是选择所有文件夹，直到我选择的文件夹以及最终文件夹中的文件，而不是那里的文件夹并将它们拉上拉链。因此，例如在 tbFolder 我有字符串：“C:\Users\tomb\Desktop\DeOld\Mota7” 我想选择这个文件夹并压缩这个文件夹的全部内容、图像和所有内容。但发生的情况如下：

![在此处输入图像描述](../Images/c7da145e62df933d0af4f080e2aebc1c.png)

它将文件夹结构创建到我要压缩的文件夹，并仅在其中添加文件而不是文件夹。我猜我需要调整这条线：

```
System.IO.Directory.GetFiles(DirectoryToZip) 
```

这是整个代码：

```
Private Sub btnCreate_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnCreate.Click

        Dim ZipFile As String = "C:\Releases\" & drpService.Text & "-" & DateTime.Now.ToString("YYmmDD") & ".zip"
        Dim DirectoryToZip As String = tbFolder.Text
        Dim filenames As String() = System.IO.Directory.GetFiles(DirectoryToZip)

        Using zip As ZipFile = New ZipFile
            zip.AddFiles(filenames)
            zip.Save(ZipFile)
        End Using

    End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:37:43.340

如果您使用的是[DotNetZip](http://dotnetzip.codeplex.com/wikipage?title=VB-Examples&referringTitle=Examples)，他们的网站上有一个示例可以添加整个目录

```
zip.AddDirectory(DirectoryToZip, "RootFolderInZip"); 
```

# html - joomla html 5 ie7 模板

> ID：10720973
> 
> 赞同：0
> 
> 时间：2012-05-23T13:29:25.970
> 
> 标签：html, templates, joomla, internet-explorer-7

我正在为 joomla 制作一个 html5 模板。每件事都适用于 chrome、safari、ff 和 ie8、ie9

ie7 渲染非常错误。由于脚本，它呈现 html 5 元素，但呈现错误。

请帮助我，我做错了什么？

谢谢。

网站是：dev.talamasterclass.com

源代码和模板的链接： [www.3dyonic.com/zip/html5template.zip](http://www.3dyonic.com/zip/html5template.zip)

任何帮助将不胜感激。模板具有 html 覆盖，但它们不相关，index.php 和 css/template.css 和 mabye js 文件夹是我认为相关的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:12:46.560

尝试将其添加到您的脑海中。

```
<!--[if lt IE 7]>
   <script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE7.js"></script>
   <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--> 
```

# javascript - 带有数字的Jquery幻灯片 - 帮助数字链接保持颜色直到选择另一个？

> ID：10720975
> 
> 赞同：1
> 
> 时间：2012-05-23T13:29:34.737
> 
> 标签：javascript, jquery, hyperlink, slideshow

我对此进行了无止境的研究，并尝试了类似问题的其他答案，但没有运气。我希望数字（即链接）在选择时更改为一种颜色并保持该颜色，直到选择另一个数字/链接并将其更改回其原始颜色。

I have gotten it the script to work so that it changes color when selected...but it wont change back when the next link is selected. 以下是我的代码（如果显示不正确，我深表歉意）。如果您需要查看更多信息，请告诉我！这是现场测试页面的链接：http: [//bmww.com/clients/index3/casestudies/cabrini_casestudy3.html](http://bmww.com/clients/index3/casestudies/cabrini_casestudy3.html)

脚本：

```
 <script type="text/javascript">
        $(window).load(function () {
$('.slideshow').blinds();

})
$(document).ready(function(){
$('a').click(function(){
    $(this).toggleClass('clicked');
    });
});
    </script> 
```

这是我的CSS：

```
<style>

a{
color: #666335;
}

a.clicked{
color: #D85D27;
} 
```

这是我的html：

```
<a href="#" class="change_link" onclick="$('.slideshow').blinds_change(1); return     false">1</a>
<a href="#" class="change_link" onclick="$('.slideshow').blinds_change(2); return false">2</a>
<a href="#" class="change_link"  onclick="$('.slideshow').blinds_change(3); return false">3</a>
<a href="#" class="change_link"  onclick="$('.slideshow').blinds_change(4); return false">4</a>
<a href="#" class="change_link" onclick="$('.slideshow').blinds_change(5); return false">5</a>
<a href="#" class="change_link" onclick="$('.slideshow').blinds_change(6); return false">6</a>
<a href="cabrini_casestudy2.html" class="ex1" >     >> </a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:37:04.563

如果再次单击相同的链接，您的代码将起作用。

尝试这个 ：

```
$(document).ready(function(){
$('a.change_link').click(function(){
    $('.clicked').removeClass('clicked');
    $(this).addClass('clicked');
    });

}); 
```

# javascript - 有没有办法改变我的 页面到达某个#anchor 点时的样式？

> ID：10720978
> 
> 赞同：2
> 
> 时间：2012-05-23T13:29:37.850
> 
> 标签：javascript, jquery, css, html

我有一个问题要问，希望能得到答案。我正在制作一个包含四`#anchor`点“页面”的单页投资组合网站。div 具有 100% 的高度，因此它们填充了整个浏览器高度。我的标题（徽标和导航）有一个固定的位置。`#anchor`当用户单击链接或滚动到第三和第四点时，我想更改标题的样式（我的徽标和链接颜色） 。有人可以帮我解决这个问题，因为我无法弄清楚吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T13:47:00.650

[jQuery Waypoints](http://imakewebthings.com/jquery-waypoints)可能是实现这一目标的简单方法。当用户滚动页面上的某些点时，它允许您触发任何类型的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T16:03:48.880

这将检查页面上 div 相对于您在滚动时定位的 div 的高度位置。这就是我相信你正在寻找的东西。

```
$(function(){

$(window).scroll(function(){
    if($('#targetDiv').offset().top >= window.scrollX ){

    }

  })
}) 
```

# ios - 压缩或压缩 iOS sqlite 数据库

> ID：10720980
> 
> 赞同：1
> 
> 时间：2012-05-23T13:29:40.707
> 
> 标签：ios, database, sqlite, compression, zip

人们，

如何压缩我的 iOS 应用程序的 sqlite 数据库？因为我正试图用云计算它，但我遇到了一些麻烦......

我应该使用哪些类来压缩它？请帮帮我！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T13:34:10.953

您可以使用 ZipArchive，它是一个用于压缩/解压缩的目标 c 包装器 - [http://code.google.com/p/ziparchive/](http://code.google.com/p/ziparchive/)

邮编：-

```
NSArray* paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString* dPath = [paths objectAtIndex:0];
    NSString* txtfile = [dPath stringByAppendingPathComponent:@"test.txt"];
    NSString* zipfile = [dPath stringByAppendingPathComponent:@"test.zip"];
    ZipArchive* zip = [[ZipArchive alloc] init];
    BOOL ret = [zip CreateZipFile2:zipfile];
    ret = [zip addFileToZip:txtfile newname:@"test.txt"];//zip
    if( ![zip CloseZipFile2] )
    {
        zipfile = @"";
    }
    [zip release];
    NSLog(@"The file has been zipped"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:33:24.923

您可以使用 Zlib，它位于：[http ://code.google.com/p/objective-zip/](http://code.google.com/p/objective-zip/)

# javascript - 过渡闪烁

> ID：10720985
> 
> 赞同：1
> 
> 时间：2012-05-23T13:30:00.613
> 
> 标签：javascript, transition, d3.js

我在过渡后看到了奇怪的闪烁效果。这很不寻常，主要是因为我没有以任何方式设置不透明度（我希望颜色保持不变）。任何想法为什么会发生这种情况？要了解代码的外观，这里有一个示例。

```
var theBars = this.vis.selectAll(".bar" + source.id).data(this.columns);

theBars.enter().insert("svg:rect")
       //some attributes
        .style("fill", sourceColor)
        //some other attributes

theBars.transition()
        //.duration(.01)
        .attr("y", function(d) {
                return this.settings.base - this.getStackedBarHeight(d, source.id);
            }.bind(this))
        .attr("height", function(d) {
                return this.getBarHeight(d.counters[source.id]);
            }.bind(this)); 
```

可以看出，只有一条线设置颜色。我最初认为我在绑定时犯了一些错误，但在检查了此处和 Google Groups 上的一些帖子后，我发现这种闪烁通常出现在您有也会改变对象不透明度的转换时。不幸的是，我没有改变任何不透明度，我只是做了一个过渡。执行该转换 (theBars.transition) 时，此效果会出现在所有主要浏览器中。

我尝试从堆叠条中选择一个条并修改其高度。

最好的祝福！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:25:52.863

为了解决这个问题，我添加了两件事：

1.  在初始化阶段 - 我添加了所有条形图，但所有计数器都设置为 0；
2.  在绘图阶段 - 我添加了以下代码：

    ```
    var theBars = this.vis.selectAll("#bar_"+index+"_"+currentIndex);

    this.settings.sources.each(function(pair) {
         theBars
             .style("fill", source.color)
             .attr("height", this.getBarHeight(source.id)
             .attr("y", this.settings.size.baseLine - this.getStackedBarHeight(counters, source.id))
    }, this); 
    ```

由过渡引起的闪烁消失了，因为我们这里没有过渡。在某些情况下，我们仍然需要进行转换，例如，当我们有多个带有相同单词的条时，但我通过非常快速地处理来解决闪烁问题（.duration(.1) 甚至更少）。

# google-chrome-extension - 访问 Chrome Webstore 自动生成的 .pem 文件

> ID：10720988
> 
> 赞同：1
> 
> 时间：2012-05-23T13:30:07.967
> 
> 标签：google-chrome-extension, pem, chrome-web-store

我有以下问题：我的谷歌浏览器扩展在打包机制（即将你自己的pem文件发送到网上商店）被引入*之前*已经提交了。现在我想更新扩展，但由于我没有 pem 文件，所以网上商店会自动生成一个新的，因此，我的扩展将有一个新 ID，这会导致更新机制失败，我会失去我的现有的用户群。

是否可以为旧扩展获取 pem 文件，或者我可以提供我自己的 pem 文件而不会破坏更新机制。

谢谢，彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T01:53:32.697

如果您的扩展程序已经在 Chrome 网上应用店中，那么您不需要 .pem 文件来提交更新。如果您的扩展程序不在网上应用店中，但您想将其移到那里并保持相同的 ID，那么您可以上传带有该名称的旧 .pem 文件`key.pem`（有关详细信息，请参阅[文档](http://code.google.com/chrome/extensions/packaging.html#upload)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T18:37:49.470

这并不是一个真正理想的解决方案，但您可以将其称为 B 计划。更新后的扩展（带有新 id）可以通过查找旧的 id 自动禁用旧的扩展。

```
chrome.management.getAll(function(ext){
    if(ext.length===1) return;

    for(var i=0; i<ext.length; i++){
        if(ext[i].id!=="ENTER_OLD_EXTENSION_ID_HERE") continue;
        chrome.management.setEnabled(ext[i].id,false);
    }
}); 
```

# c - 如何在c中进行while循环

> ID：10720991
> 
> 赞同：2
> 
> 时间：2012-05-23T13:30:16.170
> 
> 标签：c, while-loop

我试图在我的 C 代码中进行 while 循环

像这样：

```
main()
{
char q ;
while( a == 'yes' )   
{
    /* my code */
    printf("enter no to exit or yes to continue");
    scanf("%s",q);
 } 
} 
```

但是当我输入字符“q”时......控制台崩溃了

并停止工作

我在while循环中有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T13:31:35.153

您不能将字符串与`a == 'yes'`. 你需要使用`strcmp`函数。

你需要这样的东西：

```
int main(int argc, char **argv)
{
    char a[200];
    strcpy(a, "yes");
    while( !strcmp(a, "yes") )
    {
       /* my code */
       printf("enter no to exit or yes to continue");
       scanf("%s",a);
    } 
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-23T13:35:19.583

有几个错误：

1.  字符串文字应该用双引号引起来：`"yes"`，而不是`'yes'`.
2.  字符串文字不能与字符变量进行比较。
3.  `scanf`需要变量的地址：`scanf("%s", &q)`，而不是`scanf("%s", q)`。
4.  显然，您需要数组变量 ( `char q[4]`)，而不是字符一 ( `char q`)。
5.  `a`条件中引用的变量`while( a == 'yes')`未声明。
6.  您不会在屏幕上看到您的消息，因为它正在被缓冲直到`'\n'`打印出来。

所以你可能需要的是：

```
#include <stdio.h>
#include <string.h>

#define INP_SIZE 3
int main() {
    char inp[INP_SIZE + 1] = { 0 };
    while (strcmp(inp, "yes")) {
        printf("enter yes to continue or whatever else to exit\n");
        scanf("%3s", inp);
    }
    return 0;
} 
```

PS我想过构造一个格式字符串来避免重复`3`，但我的懒惰赢了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T13:36:27.447

使用 `scanf("%s",&q);`而不是`scanf("%s",q);`.

您没有在函数中传递`'q'`变量的地址。`scanf`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T13:37:28.353

你有很多错误。1\. 一个字符只是一个字符 - 事实上它实际上是一个数字 2\. 你用单引号写“是”。这给出了一个 char 类型，你应该只在单引号中有一个字符。例如 'y' 3\. 在 c 中，字符串被保存为 char 数组，您不能像整数那样只比较它们。

我还没有检查过这个，但尝试类似：

```
main() {
char buf[255]; //Set up an array of chars to hold the string
buf[0] = '/0'; //set the first charactory in the array to a null charactor.
               //c strings are null terminated so this sets it to an empty string

while ( strcmp(buf,"yes")==0) { //we have to use the strcmp function to compare the array
                                //also yes in double quotes is a null terminated char array so
printf("enter no to exit or yes to continue:"); //looks better with a colon
scanf("%s",buf); //scan f function will fill the buffer with a null terminated array
printf("\n"); //a new line here is nice
}
} 
```

这可能对你有用。我手头没有交流编译器，所以我无法测试它。

}

};

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-23T13:41:22.247

没有 q 的地址，尝试在 q 之前添加 &，并添加 strcmp(a, "yes") 以正确评估表达式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-28T16:17:29.813

```
class WhileLoopExample {
     public static void main(String args[]){
        int i=10;
        while(i>1){
          System.out.println(i);
          i--;
        }
     }
} 
```

# matlab - Matlab - 从单元格转换为双精度是不可能的

> ID：10720999
> 
> 赞同：1
> 
> 时间：2012-05-23T13:30:46.353
> 
> 标签：matlab, 3d

有人能告诉我为什么我会收到这个错误 - ？？？从单元格转换为双精度时出现以下错误： 使用 ==> 双精度时出错 无法从单元格转换为双精度。

==> 测试中的错误 18 CX(end+1,:) = temp(1);

这是代码：

```
file = fopen('C:\Program Files (x86)\Notepad++\testFile.txt'); % open text file

tline = fgetl(file); % read line by line and remove new line characters

%declare empty arrays
CX = [];
CY = [];
CZ = [];

while ischar(tline) % true if tline is a character array
    temp = textscan(fid,'%*s%f%f%f','Delimiter',',<>'); % loads the values from all rows with the specified format into the variable data

    CX(end+1,:) = temp(1);
    CY(end+1,:) = temp(2);
    CZ(end+1,:) = temp(3);

    tline = fgetl(file);
end

fclose(file); % close the file

plot3(CX, CY, CZ) % plot the data and label the axises
xlabel('x')
ylabel('y')
zlabel('z') 
grid on
axis square 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T13:40:10.413

快速猜测：使用花括号有帮助吗？

```
CX(end+1,:) = temp{1} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T13:39:13.643

使用[cell2mat](http://www.mathworks.com/help/techdoc/ref/cell2mat.html)将元胞数组（`textscan`返回的内容）转换为数值数组，您可以将其与其他数值数组一起使用（如附加到，在您的情况下）。

我还建议使用[vertcat](http://www.mathworks.com/help/techdoc/ref/vertcat.html)而不是您采用的连接方法：

```
CX = vertcat(CX, cell2mat(temp(1))); 
```

或者，您可以将所有 3 个值读入一行，然后连接成一个 N×3 矩阵......很多选项。