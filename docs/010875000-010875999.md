# StackOverflow 问答 10875000-10875999

# c# - 委托是否会使用局部变量创建线程安全问题？

> ID：10875001
> 
> 赞同：0
> 
> 时间：2012-06-04T00:10:09.930
> 
> 标签：c#, delegates, scope, local-variables

我正在使用 new 关键字将可变类实例初始化为局部变量。然后我将此对象作为参数传递给委托。委托是否延长了这个变量的生命周期？其他线程是否使用此变量或创建自己的实例？我可能会问显而易见的问题，但我想确定一下。

```
public void DoSometing(Action<Foo> action)
{
    Foo foo = new Foo();
    action.Invoke(foo);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T00:14:54.450

每当您传递以一种或另一种方式“转义”该方法的局部变量时，您*确实会*延长其生命周期。在 C# 中，您永远不会对包含对不存在对象的引用的变量进行操作——该概念在托管环境中毫无意义。

所以是的，`foo`将继续存在，并且您将需要以完全相同的方式关注线程安全，就像您只是调用另一个普通方法一样。在这种情况下，lambda 不会改变问题的复杂性。

然而，有时这可能更微妙，特别是如果你*返回*一个 lambda —— 一个[封闭](https://stackoverflow.com/questions/428617/what-are-closures-in-net)局部变量的。在这种情况下，您从 lambda 中引用的所有变量都以与`foo`.

# iphone - 丑陋的 XCode 错误：它认为我的 NSArray 是 UIImageView？

> ID：10875003
> 
> 赞同：1
> 
> 时间：2012-06-04T00:10:15.633
> 
> 标签：iphone, xcode, nsarray, exc-bad-access

每当我调用下面的代码时，

```
BOOL currentState = [[allGroupThreeArray objectAtIndex:indexNumber] getState]; 
```

我得到以下控制台错误：

*-[UIImageView objectAtIndex:]：无法识别的选择器发送到实例 0x1f574d50*

和

*由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[UIImageView objectAtIndex:]: unrecognized selector sent to instance 0x1f574d50”*

我不知道为什么它说“UIImageView objectAtIndex”，因为 allGroupThreeArray 是一个 NSArray，它由下面的代码在 @implementation 之上定义

```
static NSArray *selectedGroupThreeArray; 
```

selectedGroupThreeArray 是我的类“ItemInstance”的实例数组，“getState”是该类中返回布尔值的公共方法。

我花了几个小时在这上面，完全不知道问题是什么。任何帮助是极大的赞赏！

编辑： indexNumber 由下面的代码定义

```
int indexNumber = itemNumber-300-1; 
```

其中 itemNumber 是一个参数，它被发送到所有这些发生的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T00:13:14.437

像这样的错误通常是内存问题的迹象。您的数组可能已释放，但`nil`在您尝试调用之前未设置为`objectAtIndex:`.

# java - ConcurrentHashMap 在调用 put 方法时未插入非空键值对

> ID：10875008
> 
> 赞同：0
> 
> 时间：2012-06-04T00:10:41.397
> 
> 标签：java, multithreading, concurrenthashmap, socketchannel

我正在使用 ConcurrentHashMap 来缓存我在 SocketChannel 上处理的任务。StreamTask 是一个 Runnable，用于在客户端服务器通信期间超过往返阈值时重新调度自身，因此如果时间过去，它将自己从缓存中删除。此外，StreamWriteTask 线程会将其放在缓存中，而 StreaReadTask 将尝试将其删除。

问题是当我调用“processingCache.put()”时，它并不总是添加到地图中。

```
public class ClientServerTest {

    private class StreamTask implements Runnable {
        private final String taskIdentifier;
        private byte[] data;
        private int scheduleAttempts = 1;
        private long startTime;
        private Runnable future;

        private static final long ROND_TRIP_THRESHOLD = 15000L;
        private static final int MAX_SCHEDULE_ATTEMPTS = 3;

        public StreamTask(String taskIdentifier, byte[] data) {
            super();
            this.taskIdentifier = taskIdentifier;
            this.data = data;
        }

        @Override
        public void run() {
            if (scheduleAttempts < MAX_SCHEDULE_ATTEMPTS) {
                StreamTask task = null;
                processingCacheLock.writeLock().lock(); 
                try{
                    task = processingCache.remove(taskIdentifier);
                }finally{
                    processingCacheLock.writeLock().unlock();
                }

                if (task == null) {
                    return;
                }

                scheduleStreamTask(task);
                scheduleAttempts++;
            } else {
                failedTasks.add(this);
            }

        }

        @Override
        public int hashCode() {
            return taskIdentifier == null ? 0 : super.hashCode();
        }

        @Override
        public boolean equals(Object obj) {
            if (obj == null) {
                return false;
            }

            if (!(obj instanceof StreamTask)) {
                return false;
            }
            StreamTask task = (StreamTask) obj;
            boolean equals = false;
            if (this.taskIdentifier != null
                    && this.taskIdentifier.equals(task.taskIdentifier)) {
                equals = true;
            }

            if (this.hashCode() == task.hashCode()) {
                equals = true;
            }

            return equals;
        }

    }

    private class StreamWriteTask implements Runnable {
        private ByteBuffer buffer;
        private SelectionKey key;

        private StreamWriteTask(ByteBuffer buffer, SelectionKey key) {
            this.buffer = buffer;
            this.key = key;
        }

        private byte[] getData() {
            byte[] data;
            if (key.attachment() != null) {
                data = (byte[]) key.attachment();
                System.out.println("StreamWriteTask continuation.....");
            } else {
                StreamTask task = getStreamTask();
                if (task == null) {
                    return null;
                }
                System.out.println("Processing New Task ~~~~~ "
                        + task.taskIdentifier);
                processingCacheLock.readLock().lock();
                try {
                    task = processingCache.put(task.taskIdentifier, task);
                    boolean cached = processingCache.containsKey(task.taskIdentifier);
                    System.out.println("Has task been cached? " + cached);
                } finally {
                    processingCacheLock.readLock().unlock();
                }

                task.startTime = System.currentTimeMillis();
                data = task.data;
            }

            return data;
        }

        @Override
        public void run() {
            byte[] data = getData();
            if (data != null) {
                SocketChannel sc = (SocketChannel) key.channel();
                buffer.clear();
                buffer.put(data);
                buffer.flip();
                int results = 0;
                while (buffer.hasRemaining()) {
                    try {
                        results = sc.write(buffer);
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                    if (results == 0) {
                        buffer.compact();
                        buffer.flip();
                        data = new byte[buffer.remaining()];
                        buffer.get(data);
                        key.interestOps(SelectionKey.OP_WRITE);
                        key.attach(data);
                        System.out
                                .println("Partial write to socket channel....");
                        selector.wakeup();
                        return;
                    }
                }
            }

            System.out
                    .println("Write to socket channel complete for client...");
            key.interestOps(SelectionKey.OP_READ);
            key.attach(null);
            returnBuffer(buffer);
            selector.wakeup();
        }

    }

    private class StreamReadTask implements Runnable {
        private ByteBuffer buffer;
        private SelectionKey key;

        private StreamReadTask(ByteBuffer buffer, SelectionKey key) {
            this.buffer = buffer;
            this.key = key;
        }

        @Override
        public void run() {
            long endTime = System.currentTimeMillis();
            SocketChannel sc = (SocketChannel) key.channel();
            buffer.clear();
            byte[] data = (byte[]) key.attachment();
            if (data != null) {
                buffer.put(data);
            }
            int count = 0;
            int readAttempts = 0;
            try {
                while ((count = sc.read(buffer)) > 0) {
                    readAttempts++;
                }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            if (count == 0) {
                buffer.flip();
                data = new byte[buffer.limit()];
                buffer.get(data);
                String uuid = new String(data);
                System.out.println("Client Read - uuid ~~~~ " + uuid);
                boolean success = finalizeStreamTask(uuid, endTime);
                key.interestOps(SelectionKey.OP_WRITE);
                key.attach(null);
                System.out.println("Did task finalize correctly ~~~~ "
                        + success);
            }

            if (count == -1) {
                try {
                    sc.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }

            returnBuffer(buffer);
            selector.wakeup();
        }

    }

    private class ClientWorker implements Runnable {

        @Override
        public void run() {
            try {

                while (selector.isOpen()) {
                    int count = selector.select(500);

                    if (count == 0) {
                        continue;
                    }

                    Iterator<SelectionKey> it = selector.selectedKeys()
                            .iterator();

                    while (it.hasNext()) {
                        final SelectionKey key = it.next();
                        it.remove();
                        if (!key.isValid()) {
                            continue;
                        }

                        if (key.isConnectable()) {
                            SocketChannel sc = (SocketChannel) key.channel();
                            if (!sc.finishConnect()) {
                                continue;
                            }
                            sc.register(selector, SelectionKey.OP_WRITE);
                        }

                        if (key.isReadable()) {
                            ByteBuffer buffer = borrowBuffer();
                            if (buffer != null) {
                                key.interestOps(0);
                                executor.execute(new StreamReadTask(buffer, key));
                            }
                        }
                        if (key.isWritable()) {
                            ByteBuffer buffer = borrowBuffer();
                            if (buffer != null) {
                                key.interestOps(0);
                                executor.execute(new StreamWriteTask(buffer,
                                        key));
                            }
                        }
                    }
                }
            } catch (IOException ex) {
                // Handle Exception
            }

        }
    }

    private class ServerWorker implements Runnable {
        @Override
        public void run() {
            try {
                Selector selector = Selector.open();
                ServerSocketChannel ssc = ServerSocketChannel.open();
                ServerSocket socket = ssc.socket();
                socket.bind(new InetSocketAddress(9001));
                ssc.configureBlocking(false);
                ssc.register(selector, SelectionKey.OP_ACCEPT);
                ByteBuffer buffer = ByteBuffer.allocateDirect(65535);
                DataHandler handler = new DataHandler();

                while (selector.isOpen()) {
                    int count = selector.select(500);

                    if (count == 0) {
                        continue;
                    }

                    Iterator<SelectionKey> it = selector.selectedKeys()
                            .iterator();

                    while (it.hasNext()) {
                        final SelectionKey key = it.next();
                        it.remove();
                        if (!key.isValid()) {
                            continue;
                        }

                        if (key.isAcceptable()) {
                            ssc = (ServerSocketChannel) key.channel();
                            SocketChannel sc = ssc.accept();
                            sc.configureBlocking(false);
                            sc.register(selector, SelectionKey.OP_READ);
                        }
                        if (key.isReadable()) {
                            handler.readSocket(buffer, key);
                        }
                        if (key.isWritable()) {
                            handler.writeToSocket(buffer, key);
                        }
                    }
                }

            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

    }

    private class DataHandler {

        private JsonObject parseData(StringBuilder builder) {
            if (!builder.toString().endsWith("}")) {
                return null;
            }

            JsonParser parser = new JsonParser();
            JsonObject obj = (JsonObject) parser.parse(builder.toString());
            return obj;
        }

        private void readSocket(ByteBuffer buffer, SelectionKey key)
                throws IOException {
            SocketChannel sc = (SocketChannel) key.channel();
            buffer.clear();
            int count = Integer.MAX_VALUE;
            int readAttempts = 0;
            try {
                while ((count = sc.read(buffer)) > 0) {
                    readAttempts++;
                }
            } catch (IOException e) {
                e.printStackTrace();
            }

            if (count == 0) {
                buffer.flip();
                StringBuilder builder = key.attachment() instanceof StringBuilder ? (StringBuilder) key
                        .attachment() : new StringBuilder();
                Charset charset = Charset.forName("UTF-8");
                CharsetDecoder decoder = charset.newDecoder();
                decoder.onMalformedInput(CodingErrorAction.IGNORE);
                CharBuffer charBuffer = decoder.decode(buffer);
                String content = charBuffer.toString();
                charBuffer = null;
                builder.append(content);
                JsonObject obj = parseData(builder);
                if (obj == null) {
                    // System.out.println("Server processed partial read for task");
                    key.attach(builder);
                    key.interestOps(SelectionKey.OP_READ);
                } else {
                    JsonPrimitive uuid = obj.get("uuid").getAsJsonPrimitive();
                    System.out
                            .println("Server read complete for task  ~~~~~~~ "
                                    + uuid);
                    key.attach(uuid.toString().getBytes());
                    key.interestOps(SelectionKey.OP_WRITE);
                }
            }

            if (count == -1) {
                key.attach(null);
                sc.close();
            }
        }

        private void writeToSocket(ByteBuffer buffer, SelectionKey key)
                throws IOException {
            SocketChannel sc = (SocketChannel) key.channel();
            byte[] data = (byte[]) key.attachment();
            buffer.clear();
            buffer.put(data);
            buffer.flip();
            int writeAttempts = 0;
            while (buffer.hasRemaining()) {
                int results = sc.write(buffer);
                writeAttempts++;
                // System.out.println("Write Attempt #" + writeAttempts);
                if (results == 0) {
                    System.out.println("Server process partial write....");
                    buffer.compact();
                    buffer.flip();
                    data = new byte[buffer.remaining()];
                    buffer.get(data);
                    key.attach(data);
                    key.interestOps(SelectionKey.OP_WRITE);
                    return;
                }
            }

            System.out.println("Server write complete for task ~~~~~ "
                    + new String(data));
            key.interestOps(SelectionKey.OP_READ);
            key.attach(null);
        }
    }

    public ClientServerTest() throws IOException {
        selector = Selector.open();
        processingCache = new ConcurrentHashMap<String, StreamTask>(
                MAX_DATA_LOAD, 2);
        for (int index = 0; index < MAX_DATA_LOAD; index++) {
            JsonObject obj = new JsonObject();
            String uuid = UUID.randomUUID().toString();
            obj.addProperty("uuid", uuid);
            String data = RandomStringUtils.randomAlphanumeric(12800000);
            obj.addProperty("event", data);
            StreamTask task = new StreamTask(uuid, obj.toString().getBytes());
            taskQueue.add(task);
        }

        for (int index = 0; index < CLIENT_SOCKET_CONNECTIONS; index++) {
            ByteBuffer bf = ByteBuffer.allocate(2 << 23);
            bufferQueue.add(bf);
            SocketChannel sc = SocketChannel.open();
            sc.configureBlocking(false);
            sc.connect(new InetSocketAddress("127.0.0.1", 9001));
            sc.register(selector, SelectionKey.OP_CONNECT);
        }

        Thread serverWorker = new Thread(new ServerWorker());
        serverWorker.start();

        Thread clientWorker = new Thread(new ClientWorker());
        clientWorker.start();

    }

    private void start() {
        long startTime = System.currentTimeMillis();
        for (;;) {
            if (taskQueue.isEmpty() && processingCache.isEmpty()) {
                long endTime = System.currentTimeMillis();
                System.out.println("Overall Processing time ~~~~ "
                        + (endTime - startTime) + "ms");
                break;
            }
        }
    }

    private ByteBuffer borrowBuffer() {
        ByteBuffer buffer = null;

        try {
            buffer = bufferQueue.poll(5000L, TimeUnit.MILLISECONDS);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return buffer;
    }

    private boolean returnBuffer(ByteBuffer buffer) {
        boolean success = true;
        try {
            buffer.clear();
            bufferQueue.offer(buffer, 5000L, TimeUnit.MILLISECONDS);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            success = false;
            e.printStackTrace();
        }
        return success;
    }

    private StreamTask getStreamTask() {
        StreamTask task = null;
        taskQueueAddLock.lock();
        try {
            task = taskQueue.take();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } finally {
            taskQueueAddLock.unlock();
        }

        return task;
    }

    private boolean scheduleStreamTask(StreamTask task) {
        boolean success = true;
        taskQueueRemoveLock.lock();
        try {
            taskQueue.offer(task, 5000L, TimeUnit.MILLISECONDS);
        } catch (InterruptedException e) {
            success = false;
            e.printStackTrace();
        } finally {
            taskQueueRemoveLock.unlock();
        }

        return success;
    }

    private boolean finalizeStreamTask(String uuid, long endTime) {
        boolean success = true;
        StreamTask task;
        processingCacheLock.writeLock().lock();
        try {
            task = processingCache.remove(uuid);
            success = task != null;
        } finally {
            processingCacheLock.writeLock().unlock();
        }

        if (success) {
            success = executor.remove(task.future);
            executor.purge();
        }

        if (!success) {
            taskQueueAddLock.lock();
            taskQueueRemoveLock.lock();
            try {
                Iterator<StreamTask> it = taskQueue.iterator();
                while (it.hasNext()) {
                    task = it.next();
                    if (task.taskIdentifier == uuid) {
                        it.remove();
                        success = true;
                    }
                }
            } finally {
                taskQueueAddLock.unlock();
                taskQueueRemoveLock.unlock();
            }
            success = !taskQueue.contains(task);
        }

        System.out.println("Processing time ~~~~~~ "
                + (endTime - task.startTime) + "ms");
        return success;
    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        try {
            ClientServerTest test = new ClientServerTest();
            test.start();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    private static final int CLIENT_SOCKET_CONNECTIONS = 1;
    private static final int MAX_DATA_LOAD = 2;

    private volatile ConcurrentHashMap<String, StreamTask> processingCache;
    private volatile LinkedBlockingQueue<StreamTask> taskQueue = new LinkedBlockingQueue<StreamTask>();
    private volatile ScheduledThreadPoolExecutor executor = new ScheduledThreadPoolExecutor(
            CLIENT_SOCKET_CONNECTIONS);
    private volatile LinkedBlockingQueue<ByteBuffer> bufferQueue = new LinkedBlockingQueue<ByteBuffer>();
    private volatile List<StreamTask> failedTasks = new ArrayList<StreamTask>();
    private volatile Selector selector;
    private final ReentrantLock taskQueueAddLock = new ReentrantLock();
    private final ReentrantLock taskQueueRemoveLock = new ReentrantLock();
    private final ReentrantReadWriteLock processingCacheLock = new ReentrantReadWriteLock();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T08:32:23.897

您的问题可能是对`put()`返回的内容的误解。在这一行之后：

```
task = processingCache.put(task.taskIdentifier, task); 
```

task 等于存储在该键的映射中的先前值（如果有），否则为 null。`task.taskIdentifier`如果地图在该调用之前没有键，则`put()`返回 null 和下一行：

```
boolean cached = processingCache.containsKey(task.taskIdentifier); 
```

会抛出一个`NullPointerException`.

来自[ConcurrenMap#put javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentHashMap.html#put%28K,%20V%29)（强调我的）：

> 返回与 key 关联的**先前**值，如果没有 key 映射，则返回**null**

# java - GridLayout 无法正常工作的问题

> ID：10875012
> 
> 赞同：2
> 
> 时间：2012-06-04T00:11:53.533
> 
> 标签：java, swing, awt, layout-manager, grid-layout

我正在尝试为我正在开发的会员计​​划创建一个由 4 个按钮组成的 2x2 网格。我遇到的问题是，无论我做什么，它都只是显示为 1x4 网格。代码如下。

```
 private void buildStartupPanel()
{
    startup = new JPanel();
    startup.setLayout(new GridLayout(2,2));
    addMember = new JButton ("Add a new member");
    removeMember = new JButton ("remove Member");
    reviewMember = new JButton ("Review a Member");
    reviewAll = new JButton ("Review All Members");
    startup.add(addMember);
    startup.add(removeMember);
    startup.add(reviewMember);
    startup.add(reviewAll);
    addMember.addActionListener(this);
    removeMember.addActionListener(this);
    reviewMember.addActionListener(this);
    reviewAll.addActionListener(this);
} 
```

当我输出结果时，它显示以下内容

添加新成员

删除成员

审查会员

审查所有成员

代替

添加新成员 删除成员

查看会员 查看所有会员

另外，如果有人可以帮我在每个按钮之间留一个空格，那就太好了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T01:48:26.463

使用第 3 和第 4`int`到构造函数的间距。否则，似乎在这里工作得很好：

![启动窗格](../Images/7b03bdd2180143413c8fedddc2dc781c.png)

```
import java.awt.GridLayout;
import javax.swing.*;

public class StartupPanel {

    private JComponent getStartupPanel()
    {
        JPanel startup = new JPanel();
        startup.setLayout(new GridLayout(2,2,50,5));
        JButton addMember = new JButton("Add a new member");
        JButton removeMember = new JButton("remove Member");
        JButton reviewMember = new JButton("Review a Member");
        JButton reviewAll = new JButton("Review All Members");
        startup.add(addMember);
        startup.add(removeMember);
        startup.add(reviewMember);
        startup.add(reviewAll);

        return startup;
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                StartupPanel sp = new StartupPanel();
                JOptionPane.showMessageDialog(null, sp.getStartupPanel());
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T22:56:56.037

感谢您的回复！来发现这是我添加到代码中的第二个面板拼写错误（哇塞）并且把所有东西都扔掉了。猜猜这就是发布完整的 SSCCE 的重要性。至少我学会了如何做间距！谢谢大家！

# java - StringBuilders 是否应该始终用于字符串操作？

> ID：10875015
> 
> 赞同：2
> 
> 时间：2012-06-04T00:12:19.930
> 
> 标签：java

> **可能重复：**
> [何时在 java 中使用 StringBuilder](https://stackoverflow.com/questions/4645020/when-to-use-stringbuilder-in-java)

如果不是，这些代码中哪一个更好，为什么

```
public String backAround(String str) {
   int len = str.length();
   StringBuilder sb = new StringBuilder(str);
   char chEnd = sb.charAt(len-1);
  if(len > 0){
  sb = sb.append(chEnd);
  sb= sb.insert(0,chEnd);

  str= sb.toString();
  return str;

  }else{ return str;}
} 
```

或者

```
public String backAround(String str) {
  // Get the last char
  String back = str.substring(str.length()-1, str.length());
  return back + str + back;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T01:02:20.853

如果您只是像在 backAround() 方法中那样“将几个元素粘在一起”，那么您也可以使用 + 符号。编译器会将其转换为适合您的 StringBuilder.append()s，所以为什么还要“拼写出来”。

显式使用 StringBuilder 的想法是，原则上您可以手动优化元素添加到字符串的准确方式，包括设置初始缓冲区容量并确保您不会意外创建在以下情况下不必要的中间 String 对象编译器可能无法预测这些事情。

因此，本质上，当有稍微复杂的*逻辑*来决定要附加到字符串的内容时，显式使用 StringBuilder 。例如，如果您在循环中附加内容，或者附加内容取决于不同点的各种条件。您可能使用 StringBuilder 的另一种情况是，如果需要从各种方法构建字符串，例如：然后您可以将 StringBuilder 传递给不同的方法并要求它们附加各种元素。

PS 我应该说 StringBuilder 也为您购买了更多的编辑能力（例如，除其他外，您可以设置它的长度）并且，鉴于 Appendable 接口的存在，您实际上可以创建更多的*通用*方法，或者附加到 StringBuilder或例如 StringWriter。但这些都是边缘案例，我会提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T00:28:42.183

这真的取决于你想要做什么。在您的情况下，您似乎试图获取一个字符串并获取最后一个字母并将其添加到前面，然后将另一个添加到末尾。为此，我可能会这样做：

```
public String manipulate(String string)
{
    char c = string.charAt(string.length);
    return c + string + c;
} 
```

在这种情况下，您不必使用 StringBuilder。在某些情况下 StringBuilder 类很有用。以下是 StringBuilder 可以做的一些难以用 String 做的事情：

*   删除索引处的字符
*   在索引处附加字符
*   获取特定序列的索引
*   还有更多

如果您想查看 StringBuilder 的文档：

[字符串生成器](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html)

我希望这对你有所帮助！

# android - Android中的多个数据库连接（来自Activity和Service）

> ID：10875022
> 
> 赞同：3
> 
> 时间：2012-06-04T00:13:20.603
> 
> 标签：android, sqlite, android-activity, intentservice, database-locking

我想使用 SQLite 数据库将数据存储在 Android 应用程序中。没问题。但是在预定义的时间间隔（每天 10、14、18 和 22 点），我想运行一个`IntentService`也需要访问数据库的程序。问题来了：

当用户在`IntentService`启动时使用应用程序时，会出现问题，因为 中有一个数据库连接处于活动状态，`Activity`而`IntentService`. 所以数据库将被锁定并且`IntentService`会失败，对吗？

我如何实现这一点，在这些情况下，`IntentService`只是等待`Activity`完成当前操作（`SELECT`,`UPDATE`等）然后正常运行？

在我的活动中，我在 中打开数据库连接（通过`SQLiteOpenHelper`）并在 中`onCreate`关闭它`onDestroy`。这是否意味着 IntentService 在此期间没有机会在数据库上工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T00:19:29.573

> 所以数据库会被锁定，IntentService 会失败，对吧？

如果他们同时对不同的`SQLiteDatabase`对象执行操作，是的。

> 我如何实现这一点，在这些情况下，IntentService 只是等待 Activity 完成当前操作（SELECT、UPDATE 等）然后正常运行？

对活动和服务使用单个`SQLiteOpenHelper`实例，无论是通过单例、自定义`Application`对象还是`ContentProvider`.

# rackspace-cloud - 使用 Rackspace Cloud Java API 设置内容处置

> ID：10875024
> 
> 赞同：0
> 
> 时间：2012-06-04T00:13:27.620
> 
> 标签：rackspace-cloud, cloudfiles

我正在为 Rackspace Cloud API 使用 Java 绑定

我想弄清楚如何为我上传到 rackspace 的文件设置内容处置

我没有看到通过通过此 API 公开的 FilesClient 对象执行此操作的直接方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T21:05:49.167

Java API 不提供开箱即用的此功能

我最终更改了 FilesClient.saveObjectAs 函数

-- 添加一个字符串参数作为“contentDispositionValue” -- 构造请求的代码，将该参数添加到一组请求参数中

# java - 如何在 Clojure 中捕获多个异常？

> ID：10875025
> 
> 赞同：12
> 
> 时间：2012-06-04T00:13:29.283
> 
> 标签：java, exception, clojure

我的 Clojure 代码有一些 java 互操作，其中包含一个引发多个异常的方法。我希望与他们中的每一个人打交道。根据 Clojure 文档：

```
(try expr* catch-clause* finally-clause?)
catch-clause -> (catch classname name expr*) 
```

它没有提到捕获多个异常。在 Clojure 中可以这样做吗？

谢谢！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-04T00:18:53.647

这和Java中的一样，你可以`catch`一个接一个地声明几个表达式，它们会按照它们声明的顺序被匹配——首先`Exception1`，如果它不匹配那么`Exception2`等等，并且`finally`部分将永远是执行。

```
(try <some code>
    (catch Exception1 e1 (prn "in catch1"))
    (catch Exception2 e2 (prn "in catch2"))
    (finally (prn "in finally"))) 
```

实际上，这是在文档中指定的，`(try expr* catch-clause* finally-clause?)`意味着您可以将“零个或多个表达式”、“零个或多个 catch 子句”和“零个或一个 finally 子句”作为`try`表达式的一部分。

# ruby-on-rails - 比较变量和函数

> ID：10875035
> 
> 赞同：0
> 
> 时间：2012-06-04T00:14:49.270
> 
> 标签：ruby-on-rails, ruby

在本书中： [http ://ruby.railstutorial.org/chapters/updating-showing-and-deleting-users#code:current_user_p](http://ruby.railstutorial.org/chapters/updating-showing-and-deleting-users#code:current_user_p)

作者做了以下事情：

```
 def current_user
    @current_user ||= User.find_by_remember_token(cookies[:remember_token])
  end

  def current_user?(user)
    user == current_user
  end 
```

我的问题是当有比较时，user == current_user; 什么是rails比较？用户 == @current_user？或 user.name == @current_user.name ？

如果我有以下情况会发生什么

```
 def current_user
    @current_user ||= User.find_by_remember_token(cookies[:remember_token])
    @other_user ||= User.find_by_other_token(cookies[:other_token])
  end 
```

ser == current_user 会比较 other_user 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T00:26:39.883

`current_user`in`user == current_user`是对方法的调用，`current_user`在 ruby​​ 中，方法返回最后执行的语句。因此，在示例中，`@current_user` 正在与 进行比较`user`。

如果您添加`@other_user`到该`current_user`方法，那么您认为`user == current_user`将 user 与`@other_user`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T00:30:54.417

`@current_user`→ 实例变量
`current_user`→ 方法

因此方法将（方法）`current_user?`的返回值与参数进行比较。`current_user``user`

这是完全相同的代码，但名称略有不同：

```
def get_current_user
  @current_user ||= User.find_by_remember_token(cookies[:remember_token])
end

def is_current_user?(user)
  user == get_current_user
end 
```

# php - 我的 PDO 插入语句有什么问题？

> ID：10875039
> 
> 赞同：-1
> 
> 时间：2012-06-04T00:15:38.190
> 
> 标签：php, pdo

这是我的 SQL 语句：

```
protected static $_SQLInsert = "INSERT INTO location
(host_id, street, suburb, region, post_code, country, phone, email,
timezone, longitude, latitude, is_main)
VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"; 
```

我准备声明如下：

```
static::$_PDOSInsert = self::$_PDO->prepare(static::$_SQLInsert); 
```

准备一个包含 12 个值的数组后，我执行以下语句：

```
static::$_PDOSInsert->execute($array); 
```

然后我收到以下警告：

> PDOStatement::execute(): SQLSTATE[HY093]: Invalid parameter number: parameter was not defined in...

那么，我做错了什么？？？

编辑：这是数组：

```
(
    [host_id] => 15
    [street] => Street 15
    [suburb] => Suburb 15
    [region] => Region 15
    [post_code] => Post Code 15
    [country] => AU
    [phone] => 12341234
    [email] => asfd@email.com
    [timezone] => 1
    [longitude] => 123
    [latitude] => 234
    [is_main] => 1
) 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T01:11:57.110

pdo 对你提供给 execute() 的数组非常挑剔。如果您使用未命名的占位符，例如`?`，它需要一个数字索引数组，并且它必须从索引 0 开始。

# java - java 分词器或分词器，适用于不同的语言

> ID：10875041
> 
> 赞同：0
> 
> 时间：2012-06-04T00:16:09.430
> 
> 标签：java, normalization, wordbreaker

我想知道是否有一些基于 Java 的语言实用程序可以帮助执行以下字符串标记化或分词和消除噪音

所以对于一个字符串

```
Friday's meeting is wonderful 
```

预期结果将是一系列单词

```
Friday meeting wonderful 
```

和被删除的地方

对于字符串

```
I went to the farmer's market 
```

预期结果将是单词

```
went farmer market 
```

I, to, the, and 被删除的地方

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T01:15:02.150

这个问题没有通用的解决方案，因为（尤其是）你对“噪音”的概念定义不明确......而且很可能与其他人不同。

如果我正在实施这个（并且我同意你的“噪音”概念），我会：

1.  使用空格和可接受的标点符号作为分隔符进行标记。
2.  剥离引号
3.  剥离撇号
4.  规范化连字符（也许只是删除连字符）
5.  使用停用词过滤器去除“噪音”词。

简而言之，您将不得不编写大量代码来执行此操作。

* * *

当然，剥离“噪音”词是剥离与文本的适当语义分析相关的信息。（“我击球”和“你击球”说的是不同的东西。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T03:31:32.340

我以前玩过[斯坦福解析器](http://nlp.stanford.edu/software/lex-parser.shtml)。它是一个 NLP 引擎，对于大多数用途而言具有足够好的结果。它会给你很大的权力来具体选择你想要保留的单词。

[在线演示](http://nlp.stanford.edu:8080/parser/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T00:28:23.427

也许看看这个？我也知道有一个 String Tokenizer 类，但这可能很难用于您的目的。

[http://docs.oracle.com/javase/7/docs/api/java/text/Normalizer.html](http://docs.oracle.com/javase/7/docs/api/java/text/Normalizer.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T00:40:06.027

我不知道有什么实用程序可以开箱即用，但可能会看看这个 -[从 java 中的另一个字符串中删除字符串](https://stackoverflow.com/questions/4769282/removing-strings-from-another-string-in-java)。希望这有点帮助。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-06-04T00:22:45.427

可能这不是最好的解决方案，但您可以使用 String 类的 replaceAll 方法，替换空字符串的噪音。

例如，类似：line.replaceAll("'s", "");

# grails - 每个组织的 Spring Security 用户角色

> ID：10875042
> 
> 赞同：2
> 
> 时间：2012-06-04T00:16:14.847
> 
> 标签：grails, spring-security

在我的应用程序中，我有一个名为组织的顶级实体。用户和组织之间的关系是多对多的。

因此，我可能会遇到以下情况：

*   用户 A 具有组织 A 的角色 ROLE_ADMIN
*   用户 A 具有组织 B 的角色 ROLE_USER

我需要确保当用户 A 访问组织 B 的资源时，他不是以管理员身份进行操作。因此，我需要额外检查用户是否在组织级别具有正确的角色。Spring Security 中是否有任何内置功能允许这样做？如果没有，有谁知道解决这个问题的最佳方法是什么？

更新：更多信息......

用户登录并选择他们想要使用的组织。那存储在会话中。除此之外，URL 被 Secured 注释锁定。这意味着如果 UserA 登录并选择 OrgA，他们应该能够访问 /admin/user/create，但是，如果他们登录并选择 OrgB，他们不应该访问该 URL。

漫长的道路是在每个重要的方法中添加额外的检查。所以调用一些服务方法，上面写着“好的，你是 OrgA 的管理员，但不是 OrgB 的管理员，并且你使用 OrgB 登录，所以拒绝这个请求”。

我希望有一种更多的 grails / spring-security 方式来处理这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:52:30.900

您可能可以通过使用自定义`AccessDecisionVoter`. 该`vote`方法将为您提供资源（方法或 URL）的“配置属性”，这通常是所需的角色，您可以直接从`Authentication`对象获取当前用户的角色/权限，或者通过读取当前组织并为用户选择适当的角色。

我假设您有某种方法可以根据他们选择的组织来区分用户的角色。

从本质上讲，您将编写标准的扩展版本，该版本[`RoleVoter`](https://github.com/SpringSource/spring-security/blob/254333ce825c79ae4500c5f0c6ec7d7dfae0b306/core/src/main/java/org/springframework/security/access/vote/RoleVoter.java)将组织考虑在内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-17T23:33:00.353

我想我来晚了，但这对我有用：

选择组织后，您可以在会话中设置具有新角色的新身份验证对象（之前的身份验证对象无效）。像这样的东西：

```
@RequestMapping(value = "/org-a")
String orgA(HttpServletRequest request) {
    request.getSession().setAttribute("org", "org-a")
    Organization org = new Organization("org-a")
    reloadRolesForAuthenticatedUser(org)
    ....
}

private void reloadRolesForAuthenticatedUser(Organization org) {
    Authentication auth = SecurityContextHolder.getContext().getAuthentication()
    List<String> newRoles = getRoles(auth.getPrincipal().getUsername(), org)
    List<GrantedAuthority> authorities = getAuthorities(newRoles)
    Authentication newAuth = new UsernamePasswordAuthenticationToken(auth.getPrincipal(),auth.getCredentials(),authorities)
    SecurityContextHolder.getContext().setAuthentication(newAuth)
}

private List<GrantedAuthority> getAuthorities(List<String> roles) {
    List<GrantedAuthority> auths = new ArrayList<GrantedAuthority>()
    if (!roles.isEmpty()) {
        for (String r : roles) {
            auths.add(new SimpleGrantedAuthority(r))
        }
    }
    return auths
} 
```

# node.js - Mongoose：仅从嵌入文档数组中返回一个嵌入文档

> ID：10875044
> 
> 赞同：0
> 
> 时间：2012-06-04T00:16:36.590
> 
> 标签：node.js, mongodb, mongoose

我有一个模型，其中包含一组嵌入式文档。该嵌入式文档跟踪用户在给定活动中获得的积分。由于用户可以是多个活动的一部分，也可以只是一个活动的一部分，因此将这些活动保持在一个数组中是有意义的。现在，我想提取名人堂，即给定活动的前十名用户。目前我正在这样做：

```
userModel.find({ "stats.activity": "soccer" }, ["stats", "email"])
.desc("stats.points")
.limit(10)
.run (err, users) -> 
```

（如果您想知道语法，那就是咖啡脚本）

其中“stats”是嵌入文档/活动的数组。

现在这确实有效，但目前我只测试只有一项活动的帐户。我假设一旦用户有更多活动，就会出现问题（排序方式）。无论如何我可以告诉猫鼬只返回嵌入文档，其中“活动”==“足球”以及顶级文档？

顺便说一句，我意识到我可以通过另一种方式做到这一点，通过在它自己的集合中拥有统计信息并向相关用户提供一个 db-ref，但我想知道在我考虑任何重写之前是否可以这样做。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T02:29:48.297

你是对的，一旦你的数组中有多个活动，这将不起作用。

具体来说，由于您不能只返回带有元素的数组的任意子集，因此您将取回所有元素，并且排序将应用于所有点，而不仅仅是与“活动”“配对”的点：“足球”。

不过，您可以对架构进行一个非常简单的调整来解决这个问题。不要将活动名称存储为值，将其用作键。

```
{ _id: userId,
  email: email,
  stats: [
    {soccer : points},
    {rugby:   points},
    {dance:   points}
  ]
} 
```

现在您将能够像这样查询和排序：

```
users.find({"stats.soccer":{$gt:0}}).sort({"stats.soccer":-1}) 
```

请注意，当您迁移到版本 2.2（目前仅作为不稳定的开发版本 2.1 提供）时，您将能够使用[聚合框架](http://docs.mongodb.org/manual/applications/aggregation/)来获得您想要的确切结果（仅与您的查询匹配的数组或子文档的特定子集）而无需更改你的架构。

# jquery - CSS动态高度，滚动溢出，上下2个固定高度div

> ID：10875045
> 
> 赞同：0
> 
> 时间：2012-06-04T00:16:36.983
> 
> 标签：jquery, html, css

我的目标正是这种布局：http: [//jsfiddle.net/rQVmK/](http://jsfiddle.net/rQVmK/)

...但是在“顶部”上方和“底部”下方添加了另一个固定高度的 div。随着窗口垂直调整大小，内容容器的高度应增加/缩小。滚动条出现在内容溢出时。插图（对不起，我无法以新用户的身份直接嵌入图像）：

[http://i47.tinypic.com/s2bsic.gif](http://i47.tinypic.com/s2bsic.gif)

如果可能的话，我想只用 css 来实现这一点。jQuery 解决方案是不可取的，但如果仅使用 css 是不可能的，这是一个可以接受的折衷方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T00:24:41.137

对您来说最简单的解决方案可能是将顶部和底部容器分成两个水平部分：

```
<div id="div3">
    <div id="subfooter" style="height:15px;width:100%">Sub Footer</div>
    <div id="footer" style="height:15px;width:100%">Footer</div>
</div> 
```

您必须根据需要对其进行编辑，但我认为这足以给您一个想法。

# android - 旋转二维图像onclick android

> ID：10875046
> 
> 赞同：1
> 
> 时间：2012-06-04T00:16:53.677
> 
> 标签：android, imageview, scale, degrees

我想旋转 imageView 的图像，我已经使用矩阵缩放了图像，但旋转有问题，我正在使用代码...

```
int previousDegrees = 0;
        int degrees = 90;
        RotateAnimation animation = new RotateAnimation(previousDegrees,degrees,160,160);
        ImageView imageView = (ImageView)findViewById(R.id.imageView);
        animation.setDuration(1000);//Set the duration of the animation to 1 sec.
        imageView.startAnimation(animation); 
```

它旋转图像一秒钟并退回到原始位置..有什么方法可以让图像在点击时连续旋转..就像在（0,90.180.270,360）度上......请帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T00:23:50.607

像这样设置这些参数：

```
 animation.setFillEnabled(true);
    animation.setFillAfter(true); 
```

来自[Android 开发者参考](http://developer.android.com/reference/android/view/animation/Animation.html)：

> 如果 fillAfter 为 true，则此动画执行的转换将在完成后持续存在。

# c++ - 在构造函数的初始化列表中初始化数组

> ID：10875048
> 
> 赞同：5
> 
> 时间：2012-06-04T00:17:19.817
> 
> 标签：c++, arrays, constructor, initialization

我正在尝试在构造函数的初始化列表中初始化一个数组，并且我希望该数组的大小为 MAX_SIZE，这是我的 Stack 类中的一个公共静态常量。我怎样才能让它工作？编译器抱怨说他们在将 'double' 分配给 'double[0u]' 时有不兼容的类型

这是我的代码：

```
class Stack {
    public:      
          Stack();
          static const unsigned MAX_SIZE; 
    private:
          double array[];
          unsigned elements;     
    };  // class Stack

    Stack::Stack(): array( array[MAX_SIZE] ), elements(0) {}

    const unsigned Stack::MAX_SIZE = 4; 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T00:32:40.647

```
 class Stack {
        public:
              Stack();
              static const unsigned MAX_SIZE = 4;
        private:
              double array[MAX_SIZE];
              unsigned elements;
        };  // class Stack

 Stack::Stack():  array(), elements(0) {} 
```

但是，`std::vector`正如评论中提到的那样会更好。

# html - 动态创建图表/布局

> ID：10875050
> 
> 赞同：0
> 
> 时间：2012-06-04T00:17:56.127
> 
> 标签：html, css, perl

所以我刚在这家公司实习，作为一个业余项目，他们希望我重新设计他们的一个网页。在他们的网页上，他们有如下图像：

![粗略布局图](../Images/8d2b83a39e086a2c6d96a148c50c4f1e.png)

基本上，这是一个房间布局的图像，具有用于测试的不同服务器盒（白色方块）。当您单击其中一个白框时，它会将您超链接到与该服务器框有关的页面等等。问题是，如果他们重新设计房间，或添加服务器箱等，他们需要重新制作一个新图像，然后在一个写得很糟糕的 perl 脚本中更改相当多的坐标。（我认为这是一种糟糕的做事方式，我建议首先破坏整个形象创意，但他们想保留它）。无论如何，有没有更简单的方法可以用代码做到这一点，所以如果需要更改更改，它只涉及添加/减去代码行？我正在考虑使用某种 html/css 组合，但我不知道是否有更好的方法来做这件事......

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T07:54:07.760

Image Magick 通常安装在 Web 服务器上。看看[http://www.imagemagick.org/script/perl-magick.php](http://www.imagemagick.org/script/perl-magick.php)

# javascript - 用于精美字体效果的 Javascript 库

> ID：10875053
> 
> 赞同：1
> 
> 时间：2012-06-04T00:18:25.643
> 
> 标签：javascript, css

之前的某个时候，我遇到了一个允许人们以各种形式和排列方式编写文本的 javascript 库。好像没找到，有大神推荐一下链接吗？

谢谢，穆尔塔萨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T00:26:31.993

有很多处理文本效果的 jQuery 插件。这里有几个：

*   [刻字.js](http://letteringjs.com/)
*   [jqIsoText](http://code.google.com/p/jqisotext/)
*   [代号彩虹](http://labs.dragoninteractive.com/rainbows.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T00:27:58.797

这是 11 个 jQuery 插件的列表： http: [//sixrevisions.com/javascript/jquery-plugins-typography/](http://sixrevisions.com/javascript/jquery-plugins-typography/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T00:25:07.297

除了个人感受（我发现这样的效果在专业网站上有些陈词滥调，另一方面，如果网站是设计驱动的，那么编写自定义代码可能非常值得），还有一些库，比如[fittext.js](http://fittextjs.com/)

# ruby-on-rails-3 - 我在哪里放 PgSearch.multisearch_options？

> ID：10875055
> 
> 赞同：2
> 
> 时间：2012-06-04T00:18:50.993
> 
> 标签：ruby-on-rails-3, pg-search

我是否将其放在每个模型中，就在之前，`multisearchable :against => [ ... ]`还是应该放在单独的文件中？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T08:45:32.533

我对如何实现 PgSearch.multisearch_options 有类似的问题。

这对我有用。希望它会帮助别人。

我创建了初始化程序`config/initializers/pg_search.rb`

```
PgSearch.multisearch_options = {
  :using => {
    :tsearch => {
      :dictionary => "english"
    }
  }
} 
```

在我的`application.rb`文件中，我取消了对这一行的注释：`config.active_record.schema_format = :sql`

然后创建了一个迁移，称为`rails g migration add_trigram_extension`将以下内容添加到迁移文件中

```
def up
    execute "create extension pg_trgm"
end

def down
    execute "drop extension pg_trgm"
end 
```

然后运行`bundle exec rake db:migrate`

重启服务器

现在，使用 Stemming 进行全文搜索正在工作。

ps这使用（PostgreSQL）9.1.4

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T01:41:48.740

好的，找到了答案，所以我会在下面发布。

我创建了一个名为的文件`config/initializers/pg_search.rb`，如下所示：

```
PgSearch.multisearch_options = { :using => { :tsearch => { :prefix => true },
                                             :trigram => {},
                                             :dmetaphone => {} },
                                 :ignoring => :accents } 
```

我不完全理解为什么`:trigram => {}`有效而不仅仅是`:trigram`，但我想这应该在另一篇文章中。

# spring - Spring 的旧 DAO

> ID：10875061
> 
> 赞同：0
> 
> 时间：2012-06-04T00:19:23.833
> 
> 标签：spring, jdbc

我有一个自定义 DAO 生成器，我在当前项目的工作中使用它。对于下一个项目，我正在考虑使用 Spring 3.1，因为这些特性。我的问题是：¿我的应用程序生成的 DAO 在 Spring 环境中仍然可以正常工作吗？或者我必须使用更改它来使用 JdbcTemplates。我粘贴了一个 DAO 示例。

```
public class ProductsDAOImpl implements ProductsDAO {

private static Log log = LogFactory.getLog(ProductsDAOImpl.class);
private Exception error;
private String msg;
private JdbcTransaction jdbcTransaction;

@Override
public void setJdbcTransaction(JdbcTransaction trans) {
    this.jdbcTransaction = trans;
}

@Override
public void createProduct(Products dto) throws DAOException {
    if (getProduct(dto.getProductID()) != null) {
        throw new DAOException("El id " + dto.getProductID() + " ya está siendo     usado");
    }
    Connection conn = getConnection();
    PreparedStatement ps = null;
    error = null;
    msg = "";
    int i = 1;
    try {
        String sql = "insert into products (ProductID, ProductName, SupplierID, "
                + "CategoryID, QuantityPerUnit, UnitPrice, UnitsInStock, UnitsOnOrder, "
                + "ReorderLevel, Discontinued) values (?, ?, ?, "
                + "?, ?, ?, ?, ?,"
                + "?, ?)";
        log.info("ProductsDAOImpl.createProduct, id = " + dto.getProductID());
        ps = conn.prepareStatement(sql);
        ps.setInt(i++, dto.getProductID());
        ps.setString(i++, dto.getProductName());
        ps.setInt(i++, dto.getSupplierID());
        ps.setInt(i++, dto.getCategoryID());
        ps.setString(i++, dto.getQuantityPerUnit());
        ps.setDouble(i++, dto.getUnitPrice());
        ps.setInt(i++, dto.getUnitsInStock());
        ps.setInt(i++, dto.getUnitsOnOrder());
        ps.setInt(i++, dto.getReorderLevel());
        ps.setShort(i++, dto.getDiscontinued());
        ps.executeUpdate();
    } catch (SQLException e) {
        error = e;
        msg = "Create failed " + e.getMessage();
    } finally {
        close(conn, ps, null);
        checkOk();
    }

}

@Override
public void updateProduct(Products dto) throws DAOException {
    if(getProduct(dto.getProductID())==null) {
        throw new DAOException("Product with ID " + dto.getProductID() + "does not exist");
    }
    Connection conn = getConnection();
    PreparedStatement ps = null;
    error = null;
    msg = "";
    int i = 1;
    try {
        log.info("ProductsDAOImpl.updateProduct, id" + dto.getProductID());
        String sql = "update products set ProductName = ?, SupplierID = ?, "
                + "CategoryID = ?, QuantityPerUnit = ?, UnitPrice = ?, "
                + "UnitsInStock = ?, UnitsOnOrder = ?, "
                + "ReorderLevel = ?, Discontinued = ? where ProductID = ?";
        ps = conn.prepareStatement(sql);
        ps.setString(i++, dto.getProductName());
        ps.setInt(i++, dto.getSupplierID());
        ps.setInt(i++, dto.getCategoryID());
        ps.setString(i++, dto.getQuantityPerUnit());
        ps.setDouble(i++, dto.getUnitPrice());
        ps.setInt(i++, dto.getUnitsInStock());
        ps.setInt(i++, dto.getUnitsOnOrder());
        ps.setInt(i++, dto.getReorderLevel());
        ps.setShort(i++, dto.getDiscontinued());
        ps.setInt(i++, dto.getProductID());
        ps.executeUpdate();
    } catch (SQLException e) {
        error = e;
        msg = "Update failed " + e.getMessage();
    } finally {
        close(conn, ps, null);
        checkOk();
    }
}

@Override
public void deleteProduct(int productID) throws DAOException {
    if(getProduct(productID)==null) {
        throw new DAOException("Id " + productID +" not found");
    }
    Connection conn = getConnection();
    PreparedStatement ps = null;
    error = null;
    msg = "";
    try {
        log.info("ProductsDAOImpl.deleteProduct, id = " + productID);
        String sql = "delete from products where productid = ?";
        ps = conn.prepareStatement(sql);
        ps.setInt(1, productID);
        ps.executeUpdate();
    } catch (SQLException e) {
        error = e;
        msg = "Delete failed " + e.getMessage();
    } finally {
        close(conn, ps, null);
        checkOk();
    }
}

@Override
public List<Products> getAll() throws DAOException {
    List<Products> list = new ArrayList<Products>();
    Connection conn = getConnection();
    Statement s = null;
    ResultSet rs = null;
    try {
        log.info("ProductsDAOImpl.getAll");
        s = conn.createStatement();
        rs = s.executeQuery("select * from products");
        list = makeProductsObjectsFromResultSet(rs);
    } catch (SQLException e) {
        error = e;
        msg = "getAll failed " + e.getMessage();
    } finally {
        close(conn, s, rs);
        checkOk();
    }
    return list;

}

@Override
public List<Products> selectByQuery(String sql) throws DAOException {
    List<Products> list = new ArrayList<Products>();
    Connection conn = getConnection();
    Statement s = null;
    ResultSet rs = null;

    try {
        log.info("ProductsDAO.selectByQuery");
        s = conn.createStatement();
        rs = s.executeQuery(sql);
        list = makeProductsObjectsFromResultSet(rs);
    } catch (SQLException e) {
        error = e;
        msg = "selectByQuery failed " + e.getMessage();
    } finally {
        close(conn, s, rs);
        checkOk();
    }
    return list;
}

@Override
public Products getProduct(int productID) throws DAOException {
    Products prod = null;
    Connection conn = getConnection();
    PreparedStatement ps = null;
    ResultSet rs = null;
    try {
        log.info("Products.getProduct, id = " + productID);
        ps = conn.prepareStatement("select * from products where productid = ?");
        ps.setInt(1, productID);
        rs = ps.executeQuery();
        List<Products> list = makeProductsObjectsFromResultSet(rs);
        if (!list.isEmpty()) {
            prod = list.get(0);
        }
    } catch (SQLException e) {
        error = e;
        msg = "getProduct failed " + e.getMessage();
    } finally {
        close(conn, ps, rs);
    }
    return prod;
}

public List<Products> makeProductsObjectsFromResultSet(ResultSet rs) throws SQLException {
    List<Products> list = new ArrayList<Products>();
    while (rs.next()) {
        Products dto = new Products();
        dto.setCategoryID(rs.getInt("categoryID"));
        dto.setDiscontinued(rs.getShort("discontinued"));
        dto.setProductID(rs.getInt("productID"));
        dto.setProductName(rs.getString("productName"));
        dto.setQuantityPerUnit(rs.getString("quantityPerUnit"));
        dto.setReorderLevel(rs.getInt("reorderLevel"));
        dto.setSupplierID(rs.getInt("supplierID"));
        dto.setUnitPrice(rs.getDouble("unitPrice"));
        dto.setUnitsInStock(rs.getInt("unitsInStock"));
        dto.setUnitsOnOrder(rs.getInt("unitsOnOrder"));
        list.add(dto);
    }
    return list;
}

private Connection getConnection() throws DAOException {
    Connection conn = null;
    if (jdbcTransaction == null) {
        conn = ResourceManager.getConnection();
    } else {
        conn = jdbcTransaction.getConnection();
    }
    return conn;
}

private void close(Connection conn, Statement s, ResultSet rs) {
    closeResultSet(rs);
    closeStatement(s);
    closeConnection(conn);
}

public void closeResultSet(ResultSet rs) {
    if (rs != null) {
        try {
            rs.close();
        } catch (SQLException e) {
            if (error == null) {
                error = e;
                msg = "Close result failed";
            }
        }
    }
}

private void closeConnection(Connection conn) {
    if (conn != null) {
        try {
            if (conn.getAutoCommit()) {
                conn.close();
                conn = null;
            }
        } catch (SQLException e) {
            if (error == null) {
                error = e;
                msg = "Close conn failed";
            }
        }
    }
}

private void closeStatement(Statement s) {
    if (s != null) {
        try {
            s.close();
        } catch (SQLException e) {
            if (error == null) {
                error = e;
                msg = "Close statement failed";
            }
        }
    }
}

private void checkOk() throws DAOException {
    if (error != null) {
        throw new DAOException(msg, error);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T04:08:18.977

春天很少，如果有的话，*要求*你以某种方式做事。这个 DAO，虽然读起来很吓人，但在 Spring 应用程序中也能像在其他任何地方一样工作。自然，您不会获得 Spring 的 JDBC 支持提供的任何优势。

# html - 有没有一种有效的方法可以用 HTML 元素包装 dt 和 dd ？

> ID：10875064
> 
> 赞同：58
> 
> 时间：2012-06-04T00:20:02.760
> 
> 标签：html, validation, semantics, w3c, specifications

我希望 HTML 可以做一些在语义上等同于此的事情；

```
<dl class="main-list">
    <definitionitem>
        <dt>Some Thing</dt>
            <dd>You know it!</dd>
        <dt>Another Thing</dt>
            <dd>Word.</dd>
    </definitionitem>
    <definitionitem>
        <dt>Stuff</dt>
            <dd>Alright!</dd>
    </definitionitem>
</dl> 
```

但是，由于我最接近的是我对语义不是 100% 满意的东西；

```
<div class="redundant-wrapper">
    <dl class="main-list">
        <dt>Some Thing</dt>
            <dd>You know it!</dd>
        <dt>Another Thing</dt>
            <dd>Word.</dd>
    </dl>
    <dl class="another-main-list">
        <dt>Stuff!</dt>
            <dd>Alright!</dd>
    </dl>
</div> 
```

我想知道是否有人对您如何做到这一点有任何其他想法？

此外，将项目分组的原因是因为它们在被标记的内容中可视地分组。想象一个字典页面，有一个定义列表，其中每个定义都在一个向左浮动的插入框中。我一直遇到这种情况。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-06-12T13:48:51.657

不，Ian Hickson（HTML 规范编辑器）[确信](http://lists.w3.org/Archives/Public/www-style/2012Feb/0193.html)这是一个 CSS 问题，而不是 HTML 问题：

> 这不应该是必要的。这是 CSS 的限制。
> 
> 正确的解决方案是让 CSS 提供一些伪元素或其他机制，将匿名容器引入到渲染树中，以包装您要包装的元素。

与此同时，fantasai（CSS 规范编辑器）则[相反](http://lists.w3.org/Archives/Public/www-style/2012Feb/0231.html)：

> 我认为这不是 CSS 问题。我认为这是一个 HTML 问题。伪元素对于规范来说是一件不平凡的事情，实现起来也是一件不平凡的事情，而且使用起来比较混乱。

尽管如此，伊恩显然忽略了这一点，并继续与现实脱节。

[`LEGEND`](http://www.w3.org/html/wg/tracker/issues/200)（必须是`FIELDSET`根据 HTML 规范的第一个直接子级）、[`FIGCAPTION`](https://www.w3.org/Bugs/Public/show_bug.cgi?id=12835)（必须是 的第一个/最后一个直接子级`FIGURE`）和`LI`（`UL`/的直接子级）存在相同的问题`OL`。

至于`DT`/`DD`特别是，我个人[使用](https://tanalin.com/en/blog/2014/12/dt-dd/) `UL`list with `DL`inside each `LI`：

```
<ul>
    <li><dl>
        <dt>Lorem</dt>
        <dd>Lorem definition</dd>
    </dl></li>

    <li><dl>
        <dt>Ipsum</dt>
        <dd>Ipsum definition</dd>
    </dl></li>
</ul> 
```

所以我们必须在and和list`DL`之间建立关系，使它们都属于一个列表。`DT``DD``UL`

**更新（2016-11-14）：** HTML 标准（现在是[WHATWG 版本](https://html.spec.whatwg.org/multipage/semantics.html#the-dl-element)）现在（自 2016-10-31 起）[允许](https://github.com/whatwg/html/commit/5454d702e0262749aba55576dda32c48e0e498f0)`DIV`元素（可选地与所谓的脚本支持元素混合`SCRIPT`）成为元素`TEMPLATE`的直接子`DL`元素。W3C 的[HTML 验证器](https://validator.w3.org/)尚未*考虑*此更改，但实验性[HTML5.org 验证器](https://checker.html5.org/)可以。

**更新（2017-01-18）：**原来规范[不允许](https://github.com/whatwg/html/issues/1937#issuecomment-255339408)多个嵌套`DIV`包装器`DT`/ `DD`，因此该功能在实践中的实用性实际上非常有限，`UL`这里描述的 →<code>LI→<code>DL 方法仍然相关。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2018-06-05T13:57:52.543

有一个[关于 dd-dt wrapping 的仓库](https://github.com/whatwg/html/issues/1937)。根据 html 规范 whatwg 可以在 DL 中用 div 标签[包装每个dd & dt 。](https://html.spec.whatwg.org/multipage/grouping-content.html#the-dl-element)

```
<dl>
   <div>
     <dt>Bolster</dt>
     <dd>to support, strengthen, or fortify</dd>
   </div>
   <div>
     <dt>Capitalize</dt>
     <dd>to use to your advantage</dd>
   </div>
</dl> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-10-17T17:34:36.223

2018年我们在这里！[CSS 网格](https://caniuse.com/#feat=css-grid)得到很好的支持，如果主要目标是控制`dt`/ `dd`...

HTML

```
<dl>
    <dt>Favorite food</dt>
    <dd>Pizza</dd>

    <dt>Favorite drink</dt>
    <dd>Beer</dd>
</dl> 
```

CSS

```
dl {
    display: grid;
    grid-template-columns: min-content 1fr;
} 
```

（您可以调整 的值`grid-template-columns`以匹配您的特定设计要求。）

这并不能“解决”规范的限制，但我认为它很有帮助，因为您特别提到了对语义标记的担忧。正如我上面提到的，网格可以做什么是有限制的，但如果目标是控制`dt`/的布局，`dd`我认为这可能是最符合语义的方式，它仍然是有效的 HTML。

# wordpress - 阅读更多 wordpress 中每个帖子的链接

> ID：10875070
> 
> 赞同：0
> 
> 时间：2012-06-04T00:21:04.693
> 
> 标签：wordpress, wordpress-theming

我正在使用 wordpress。我想自动为每个帖子添加阅读更多链接。我不想使用标签。因为我想保持每个帖子的长度相同。就像在 200 字之后它会显示阅读更多链接。

我正在使用二十十个主题。我把代码放在function.php中

```
function new_excerpt_more($more) {
       global $post;
    return '<a href="'. get_permalink($post->ID) . '">Read the Rest...</a>';
}
add_filter('excerpt_more', 'new_excerpt_more'); 
```

但这不起作用。

任何人都知道如何做到这一点

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:32:52.297

使用 the_content 而不是 the_excerpt

如果全部失败尝试设置 $more = 0; 在你的循环开始之前

# c - ANSI C 中的索引内存指针数组与间接整数索引数组

> ID：10875071
> 
> 赞同：3
> 
> 时间：2012-06-04T00:21:32.480
> 
> 标签：c, pointers, gcc, indexing

该声明

```
a[i] += a[j] * a[k]; 
```

将在可能执行数千到数百万次的循环中执行数千次。表示对 中的条目的随机访问的索引`i`、`j`和可以由语句设置`k``a`

```
i = i_index[l];
j = j_index[l];
k = k_index[l]; 
```

哪里`l`是`for`循环的索引。整数数组`i_index`, `j_index`, 和`k_index`是在程序开始时设置的，可能偶尔会更改。

内存指针数组是另一种选择。例如

```
*ap1[l] += *ap2[l] * (*ap3[l]); 
```

其中内存指针数组`ap1`、`ap2`和`ap3`被预先设置为指向最初由 、 和 数组标识`i_index`的`j_index`位置`k_index`。它们也可能偶尔更改。

第一种方法看起来比第二种方法更干净，但它似乎更慢，除非有某种方法可以向编译器提供额外的信息。似乎 XCode 中的 GCC 编译器无法提前发现`i_index`, `j_index`, 和`k_index`or `ap1`, `ap2`, 并且`ap3`大部分时间是不变的。有什么方法可以提醒 gcc 编译器以提高性能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T00:50:46.923

您不太可能找到让编译器有效地缓存您在代码的第二版本中明确计算和保存的代码的第一版本中的指针值的选项。这是因为编译器需要发出代码来生成和保存一个非常大的数据结构来缓存这些值，这不是典型的编译器行为。

但是，根据您所针对的架构，这可能无关紧要。许多体系结构都有“间接基址+索引”寻址模式，这将用于访问`a`in `a[i] += a[j] * a[k];`，并且在现代内核上，与普通的“间接”寻址模式相比，这些没有任何性能损失（即 - 一个指令将`i`乘以 的大小`a[0]`，将其添加到 的基地址`a`并取消引用结果）。在您的目标架构上配置文件并查看。

*对于任一版本，可能会*改进的一件事是使用`struct`s 的数组而不是三个单独的数组，以便每个值所需的三个值`l`连续保存在内存中：

```
i = index[l].i;
j = index[l].j;
k = index[l].k; 
```

或者

```
*ap[l].i += *ap[l].j * *ap[l].k; 
```

这将意味着您的代码正在通过`index`or`ap`数组进行一次线性遍历，而不是同时进行三个线性遍历，这应该有助于预取器识别您在做什么。

# packets - iSCSI 数据包理解以及每个数据包的作用

> ID：10875074
> 
> 赞同：2
> 
> 时间：2012-06-04T00:22:16.050
> 
> 标签：packets, iscsi

我正在研究 iSCSI 协议，现在我处于使用 Wireshark 捕获要查看的数据包的阶段，哪些数据包用于维护活动的会话，以及当我将文件复制到我的逻辑卷时，哪些数据包被交易。下面是一张图片。我会很感激帮助我![在此处输入图像描述](../Images/b6eaa1c3546e1b47c9fa258db21f77da.png)试图理解或指向任何解释它的网站。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-12T04:29:02.443

After establishing a TCP connection between an initiator and a target, the initiator MUST start a Login Phase to gain,further access to the target’s resources.

There are two types of login sessions:

```
Normal 
Discovery 
```

The login process will go through the exchange of iSCSI operational parameters as well as security authentication processes, which are intended to ensure that the initiator is valid and authorized. On the completion of the login, the connection and the session will be able to flow SCSI commands and data between the initiator and the target

View the Complete Wireshark Analysis of ISCSI Protocol [here](https://www.youtube.com/watch?v=4nQPF3kpA6U)

Some of the Operation Supported in ISCSI commands are

```
NOP_OUT((byte) 0x00), 
NOP_IN((byte) 0x20)
SCSI_COMMAND((byte) 0x01)
SCSI_DATA_IN((byte) 0x25)
SCSI_DATA_OUT((byte) 0x05)
SCSI_RESPONSE((byte) 0x21)
R2T((byte) 0x31) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T15:44:40.230

请参考这个问题/答案： [iSCSI Packet Header](https://stackoverflow.com/questions/7886594/iscsi-packet-header) ，它将您定向到其他一些资源。

我还发现这些很有用：

1.  [http://www.bswd.com/iSCSI-Primer.pdf（David](http://www.bswd.com/iSCSI-Primer.pdf) Black）和此处引用的其他资源：[http ://www.bswd.com/cornucop.htm](http://www.bswd.com/cornucop.htm)

2.  [http://www.woodsmall.com/SCSI.htm](http://www.woodsmall.com/SCSI.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-27T03:27:56.067

您的图像看起来像在正常会话中进行写入操作。iscsi 有两种写方式：1 写需要“iscsi 目标”来确认 2 直接写。在您的图像中，是第一个，INI 发送一个 SCSI::write，并等待 TGT 发送一个 Ready To Transfer。然后 INI 用 SCSI::Data OUT 发送数据。

谷歌 iscsi_rfc3720.pdf。这个参考告诉你所有的会话建设和每个 iscsi 命令，之后你可以清除你的图像。

# javascript - 如何切换内容

> ID：10875075
> 
> 赞同：2
> 
> 时间：2012-06-04T00:22:19.817
> 
> 标签：javascript, jquery, html

所以我有一个很好的小功能来切换表格的内容。内容存储在`<div>`类“hiddenDiv”中。有一个`<span>`“toggle”类包含一个链接，单击该链接会打开“hiddenDiv”。我想将整个脚本应用于整个`<tr>`，以便当您单击其中的任何位置时，`<tr>`它会显示“hiddenDiv”。但是，当我只是将类更改`<tr>`为“切换”并删除`<span>`该类时，什么也没有发生。任何帮助表示赞赏！

```
$(".toggle").click(function () { 
  if ($(this).next().is(":hidden")) {
    $(".hiddenDiv").hide();
    $(this).next().slideDown("fast"); 
  } else { 
    $(this).next().hide(); 
  }
}); 
```

HTML：

```
 <table width="96%" border="0" align="center" cellpadding="4">
      <tr class="toggle" id="messageRow">
        <td width="4%" valign="top">
        <input type="checkbox" name="cb<?php echo $row['id']; ?>" id="cb" value="<?php echo $row['id']; ?>" />
        </td>
        <td width="20%" valign="top"><div class="message_name"><a href="../../pages/profile_page/profile_page.php?id=<?php echo $Sid; ?>"><?php echo $Fname.' '. $Lname ;?></a></div></td>
        <td width="58%" valign="top">
          <span style="padding:3px;">
          <a class="<?php echo $textWeight; ?>" id="subj_line_<?php echo $row['id']; ?>" style="cursor:pointer;" onclick="markAsRead(<?php echo $row['id']; ?>)"><?php echo stripslashes($row['subject']); ?></a>
          </span>
          <div class="hiddenDiv" id="hiddenDivId"> <br />
            <?php echo stripslashes(wordwrap(nl2br($row['message']), 54, "\n", true)); ?>
            <br /><br /><a href="javascript:toggleReplyBox('<?php echo stripslashes($row['subject']); ?>','<?php echo $my_uname; ?>','<?php echo $my_id; ?>','<?php echo $Sname; ?>','<?php echo $fr_id; ?>','<?php echo $thisRandNum; ?>')">Reply</a><br />
          </div>

       </td>
        <td width="18%" valign="top"><span style="font-size:10px;"><?php echo $date; ?></span></td>
      </tr>
    </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T00:44:55.337

如果您正在谈论的隐藏 div 位于带有“.toggle”类的 tr 中的 td 中，则以下内容应该有效：

```
$(".toggle").click(function () { 
  var $hiddenDiv = $(this).find(".hiddenDiv");
  if ($hiddenDiv.is(":hidden")) {
    $hiddenDiv.slideDown("fast"); 
  } else { 
    $hiddenDiv.slideUp("fast"); 
  }
}); 
```

但是您可以将其简化如下：

```
$(".toggle").click(function () { 
  $(this).find(".hiddenDiv").slideToggle("fast");
}); 
```

请参阅[`slideToggle()`文档](http://api.jquery.com/slidetoggle/)。

编辑：刚刚看到你用 html 更新的问题。如果您的元素有一个 id，那么通过 id 而不是 class 选择更有效，即，`$("#hiddenDivId")`而不是`$(".hiddenDiv")`. 相同的`$("#messageRow")`而不是`$(".toggle")`。

此外，您不应将表格用于非表格数据。

# api - 通过 api 订阅/取消订阅新闻源中的朋友

> ID：10875077
> 
> 赞同：2
> 
> 时间：2012-06-04T00:22:40.417
> 
> 标签：api, facebook-graph-api, feed

一些背景：我有兴趣构建一个应用程序，允许用户有效地浏览他们的朋友列表并订阅或取消订阅他们朋友的帖子。

问题：通过任何 facebook api 是否有办法以编程方式取消订阅朋友？同样有没有办法以编程方式订阅朋友？我不确定术语，而不是订阅/取消订阅，也许我应该替换隐藏/取消隐藏？我特别有兴趣为该人执行此操作，而不是针对特定帖子。

此功能存在于用户的新闻提要中，facebook 在此处对其进行了描述：

[Facebook 帮助中心 - 如何控制我在动态消息中看到的内容？](https://www.facebook.com/help/?faq=218728138156311)

# java - java中未使用的异常并从地图中删除对象

> ID：10875079
> 
> 赞同：0
> 
> 时间：2012-06-04T00:22:46.080
> 
> 标签：java, exception, map, zip

我用Java制作了一个游戏。虽然它在 Eclipse 中运行良好，但当打包到 jar 中时，出现了一个问题，即地图中的对象永远不会被破坏。为了检查任何异常，我从命令行启动它，java 告诉我以下异常。

```
C:\Users\SriHarshaCH>java -jar C:\Users\SriHarshaCH\Desktop\Treasure.jar

java.io.IOException: mark/reset not supported
        at java.util.zip.InflaterInputStream.reset(Unknown Source)
        at java.io.FilterInputStream.reset(Unknown Source)
        at com.sun.media.sound.SoftMidiAudioFileReader.getAudioInputStream(Unknown Source)
        at javax.sound.sampled.AudioSystem.getAudioInputStream(Unknown Source)
        at com.gej.sound.WavPlayer.loadSound(WavPlayer.java:39)
        at treasure.Treasure.initResources(Treasure.java:152)
        at com.gej.core.Game.run(Game.java:117)
        at java.lang.Thread.run(Unknown Source)
java.io.IOException: mark/reset not supported
        at java.util.zip.InflaterInputStream.reset(Unknown Source)
        at java.io.FilterInputStream.reset(Unknown Source)
        at com.sun.media.sound.SoftMidiAudioFileReader.getAudioInputStream(Unknown Source)
        at javax.sound.sampled.AudioSystem.getAudioInputStream(Unknown Source)
        at com.gej.sound.WavPlayer.loadSound(WavPlayer.java:39)
        at treasure.Treasure.initResources(Treasure.java:154)
        at com.gej.core.Game.run(Game.java:117)
        at java.lang.Thread.run(Unknown Source)
java.io.IOException: mark/reset not supported
        at java.util.zip.InflaterInputStream.reset(Unknown Source)
        at java.io.FilterInputStream.reset(Unknown Source)
        at com.sun.media.sound.SoftMidiAudioFileReader.getAudioInputStream(Unknown Source)
        at javax.sound.sampled.AudioSystem.getAudioInputStream(Unknown Source)
        at com.gej.sound.WavPlayer.loadSound(WavPlayer.java:39)
        at treasure.Treasure.initResources(Treasure.java:156)
        at com.gej.core.Game.run(Game.java:117)
        at java.lang.Thread.run(Unknown Source)
java.io.IOException: mark/reset not supported
        at java.util.zip.InflaterInputStream.reset(Unknown Source)
        at java.io.FilterInputStream.reset(Unknown Source)
        at com.sun.media.sound.SoftMidiAudioFileReader.getAudioInputStream(Unknown Source)
        at javax.sound.sampled.AudioSystem.getAudioInputStream(Unknown Source)
        at com.gej.sound.WavPlayer.loadSound(WavPlayer.java:39)
        at treasure.Treasure.initResources(Treasure.java:158)
        at com.gej.core.Game.run(Game.java:117)
        at java.lang.Thread.run(Unknown Source)
java.io.IOException: mark/reset not supported
        at java.util.zip.InflaterInputStream.reset(Unknown Source)
        at java.io.FilterInputStream.reset(Unknown Source)
        at com.sun.media.sound.SoftMidiAudioFileReader.getAudioInputStream(Unknown Source)
        at javax.sound.sampled.AudioSystem.getAudioInputStream(Unknown Source)
        at com.gej.sound.WavPlayer.loadSound(WavPlayer.java:39)
        at treasure.Treasure.initResources(Treasure.java:163)
        at com.gej.core.Game.run(Game.java:117)
        at java.lang.Thread.run(Unknown Source) 
```

但我没有使用任何 zip 文件，而且 wav 播放器在游戏中也可以正常工作。游戏仍在启动。但对象并未从地图中移除。我怎么能解决这个问题？？？

这是我更新和删除死对象的地图的 updateobjects 方法。

```
/**
 * Updates all the objects contained in the map.
 * @param elapsedTime The time elapsed in the current frame.
 */
public static void updateObjects(long elapsedTime){
    for (int i=0; i<objects.size(); i++){
        try {
            GObject obj = objects.get(i);
            if (obj!=null){
                if (obj.isAlive()){
                    obj.superUpdate(elapsedTime);
                    obj.moveHorizontally(elapsedTime);
                    checkCollisions(obj, true, false);
                    obj.moveVertically(elapsedTime);
                    checkCollisions(obj, false, true);
                    checkCollisions(obj, false, false);
                } else {
                    // Remove the dead object
                    objects.remove(i);
                }
            } else {
                objects.remove(i);
            }
        } catch (NullPointerException e){}
    }
} 
```

编辑：当 jar 被提取并使用代码启动时，游戏运行良好

```
java treasure.Treasure 
```

它什么也不返回，而且玩得很好。

这是 loadSound 方法

```
/**
 * Loads a sound from a file in the jar file to play them
 * at any time. Supports loading of .wav, .au, .aiff files.
 * Also converts MIDI files on the fly
 * @param s The path of the wav file.
 * @return The sound data loaded into the WavSound object
 */
public static WavSound loadSound(String s){
    // Get an input stream
    InputStream is = WavPlayer.class.getClassLoader().getResourceAsStream(s);
    AudioInputStream audioStream;
    try {
        // Create the audio input stream and audio format
        audioStream = AudioSystem.getAudioInputStream(is);
        AudioFormat format = audioStream.getFormat();
        // The length of the audio file
        int length = (int)(audioStream.getFrameLength() * format.getFrameSize());
        // The array to store the samples in
        byte[] samples = new byte[length];
        // Read the samples into array to reduce disk access (fast-execution)
        DataInputStream dis = new DataInputStream(audioStream);
        dis.readFully(samples);
        // Create a sound container
        WavSound sound = new WavSound(samples, format);
        // Don't start the sound on load
        sound.setState(SoundState.STATE_STOPPED);
        // Create a new player for each sound
        new WavPlayer(sound);
        return sound;
    } catch (Exception e){
        // An error. Mustn't happen
        e.printStackTrace();
    }
    return null;
} 
```

现在重新创建 jar 文件修复了异常的问题。但是这些物体并没有被破坏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T00:34:39.193

发生的事情是您用来播放 .wav 文件的 API 使用`mark()`和`reset()`I/O 方法。当 .wav 文件是文件系统上的“真实”文件时，这可以正常工作，但是当它在 jar 文件中时，系统无法再`mark()`执行`reset()`. 这是将数据放入 jar 文件的一个陷阱——在运行时，无法保证 jar 文件驻留在文件系统中。它甚至可以通过网络流式传输，并且在运行它的系统上没有物理存在。

应该发生的是，您在程序启动时将 .wav 资源复制到系统定义的临时目录中，然后可以是“真实”文件，然后从那里播放它们。

# xcode - 将核心数据文件从二进制转换为 XML

> ID：10875080
> 
> 赞同：4
> 
> 时间：2012-06-04T00:23:04.833
> 
> 标签：xcode, core-data

Xcode 4 显然现在将 Core Data 文件存储在 XML 中，而之前的版本创建了二进制文件。我想将一些较旧的 .xcdatamodel 文件（以及该包中的元素和布局二进制文件）转换为 XML 版本，以便我可以在多个源代码控制分支中区分和合并它们。

有谁知道如何获取现有的 Xcode Core Data 模型文件（.xcdatamodeld、.xcdatamodel 或其他）并将其转换为较新的 XML 文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T13:58:22.360

您可以通过更改 Xcode 中 .xcdatamodel 文件的工具版本将旧的二进制文件转换为 XML。

脚步：

1.  在 Xcode 中选择 .xcdatamodel 文件。
2.  在 Utilities 窗格（⌘⌥0 - 右侧的窗格）中，找到**Core Data Model** > **Tools Version**并将最小值设置为 Xcode 4.1（或更高版本）。
3.  瞧！您的 .xcdatamodel 文件现在应该格式化为 XML。

![核心数据模型 > 工具版本](../Images/9681509d8e7d34beec6de574febb480d.png)

感谢[Sam Hatchett 的回答](https://stackoverflow.com/a/12271380)指出我[这个答案](https://stackoverflow.com/a/8899089)最终导致了解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T21:07:53.027

我没有二进制 xcdatamodel 文件来尝试这个，但是[这个问题](https://stackoverflow.com/questions/5850401/how-to-turn-xcdatamodel-file-into-xcdatamodeld-file)的答案能满足你的需要吗？基本上是将旧文件作为新数据模型的“版本”导入？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T21:18:52.740

我认为我知道的唯一方法是编写一个工具，从旧格式中捕获所有信息并生成新格式的“骨架”并填写这些值。我们可以举一个新旧格式的例子吗？

# java - 将 Outlook 电子邮件复制到文件夹或通过 javamail 阅读电子邮件？

> ID：10875082
> 
> 赞同：0
> 
> 时间：2012-06-04T00:23:21.510
> 
> 标签：java, email, outlook

我们正在处理来自客户的许多电子邮件。每封主题行带有案例编号的电子邮件都会上传到我们的 CRM。目前，我们的分析师正在执行此过程，即，他收到或发送的每封电子邮件都会将电子邮件复制到桌面，然后将该文件上传到相关案例。

这是非常乏味和耗时的。我的设计问题是这样的：

选项 1：通过 java mail 阅读电子邮件，如果主题行有案例编号 - 只需获取内容和附件并将电子邮件上传到 crm。

或者

选项 2：将 Outlook 电子邮件复制到桌面，然后将电子邮件**作为文件**上传到 crm。

我不确定，但看起来选项 2 更好，因为电子邮件中的所有内容（附件、文档、图表、照片）都将被上传，当分析引用 caseid 时，他将能够按原样查看电子邮件' （好像它来自前景一样）。

第一个选项为我节省了使用 Outlook 的麻烦，但我担心电子邮件将只是文本（不确定是否有办法像 Outlook 文件一样上传整个电子邮件）

感谢您的任何指点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T05:07:39.510

您直接连接到邮件服务器的第一个选项实际上非常简单。

我们通过使用 JavaMail 登录到我们的 Exchange 服务器来做一些非常相似的事情：一个 Java 应用程序定期连接到 Exchange 并处理它找到的任何邮件。处理完一封电子邮件后，它会将其移动到另一个文件夹，因此不会再次被处理。

我不太明白您的第二个选项是如何工作的，但是将 Java 代码连接到 Outlook 对我来说听起来更难。

下面概述了如何使用 JavaMail 在 Exchange 服务器上处理电子邮件。它应该适用于任何支持 IMAP 的邮件服务器：

```
public void processMailExample() {
   Store store = session.getStore(new javax.mail.URLName("imap://user:pass@mailserver..."));
   store.connect();
   Folder inputFolder = store.getFolder("INBOX");
   Folder outputFolder = store.getFolder("INBOX/Processed");

   inputFolder.open(Folder.READ_WRITE);

   Message[] messages = inputFolder.getMessages();
   for (Message message : messages) {

       // Process message here

       moveMessage(message, outputFolder);
   }
}

public void moveMessage(Message m, Folder to) throws MessagingException
{
    m.getFolder().copyMessages(new Message[] {m}, to);
    m.setFlag(Flag.DELETED, true);
    m.getFolder().expunge();
} 
```

如果特定电子邮件有附件，那么它将是一个实例，`javax.mail.internet.MimeMessage`而不仅仅是`Message`. 该`MimeMessage`课程使您可以完全访问所有附件、HTML 等，因此您应该能够访问您需要上传到您的 CRM 系统的所有内容。

# mysql - mysql 对数据插入的操作

> ID：10875083
> 
> 赞同：2
> 
> 时间：2012-06-04T00:23:31.073
> 
> 标签：mysql, time, triggers

我有 3 列的表：“输入时间”“退出时间”“计算时间”。所有3个都是“TIME” sql类型。

有没有办法为每一行插入“进入时间”和“退出时间”创建任务，它会自动运行 TIMEDIFF 并将结果添加到“计算时间”？

谢谢！

* * *

使用 2 个触发器使用 mysql 计算时间差异是一个好主意，还是使用 PHP 更好？

```
如果存在 `test` $$ 则删除触发器
    在插入“5_2012”之前创建触发器“测试”
    每一行开始
      设置 NEW.chhour = NEW.exit - NEW.enter;

```

```
如果存在 `test2` $$ 则删除触发器
    在“5_2012”更新之前创建触发器“test2”
    每一行开始
      设置 NEW.chhour = NEW.exit - NEW.enter;

```

# ruby-on-rails-3 - Rails 嵌套模型类型不匹配

> ID：10875084
> 
> 赞同：0
> 
> 时间：2012-06-04T00:23:32.197
> 
> 标签：ruby-on-rails-3, heroku, nested-attributes

我有一个在我的开发机器上运行没有任何问题的应用程序。当我将它推送到 Heroku 时，我收到以下导致应用程序崩溃的错误：

```
ActiveRecord::AssociationTypeMismatch (Profile(#47183120) expected, got ActiveSupport::HashWithIndifferentAccess(#35109340)) 
```

从日志来看，这是：

```
153 <13>1 2012-06-04T00:07:57+00:00 app web.1 - - Started POST "/users" for 2.124.94.147/027c5e93.bb.sky.com at 2012-06-04 00:07:57 +0000
138 <13>1 2012-06-04T00:07:57+00:00 app web.1 - - Processing by RegistrationsController#create as HTML
517 <13>1 2012-06-04T00:07:57+00:00 app web.1 - -   Parameters: {"utf8"=>"✓", "authenticity_token"=>"ztrHyRb/VzLSNRKZI1ifP6NZfdXFacDGi6edxM7RCRM=", "user"=>{"email"=>"user@email.com", "username"=>"user", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "profile"=>{"full_name"=>"Some Name", "birth_date(3i)"=>"21", "birth_date(2i)"=>"10", "birth_date(1i)"=>"1985", "gender"=>"0", "postcode"=>"XXXX XXX", "description"=>"Site designer."}}, "commit"=>"Sign up"}
129 <13>1 2012-06-04T00:07:57+00:00 app web.1 - - Completed 500 Internal Server Error in 84ms
86 <13>1 2012-06-04T00:07:57+00:00 app web.1 - -
211 <13>1 2012-06-04T00:07:57+00:00 app web.1 - - ActiveRecord::AssociationTypeMismatch (Profile(#47001900) expected, got ActiveSupport::HashWithIndifferentAccess(#29446440)): 
```

用户模型（来自设计）：

```
class User < ActiveRecord::Base
    # Include default devise modules. Others available are:
    # :token_authenticatable, :confirmable,
    # :lockable, :timeoutable and :omniauthable
    devise :database_authenticatable, :registerable,
           :recoverable, :rememberable, :trackable, :validatable

    # FriendlyID for slugs
    extend FriendlyId
    friendly_id :username, use: :slugged

    # Setup accessible (or protected) attributes for your model
    attr_accessible :email, :password, :password_confirmation, :profile_attributes, :remember_me, :username
    # attr_accessible :title, :body

    # Set relationships
    has_one :profile, dependent: :destroy
    accepts_nested_attributes_for :profile

    # Validation
    VALID_USERNAME_REGEX = /^[a-z0-9_]+$/i
    validates :username, presence: true, uniqueness: true, length: { minimum: 5, maximum: 15 }, format: { with: VALID_USERNAME_REGEX }

end 
```

型材型号：

```
class Profile < ActiveRecord::Base
    attr_accessible :birth_date, :description, :full_name, :gender, :latitude, :longitude, :postcode

    belongs_to :user

    geocoded_by :geocode_string

    INVALID_NAME_REGEX = /^[^0-9`!@#\$%\^&*+_=]+$/
    VALID_POSTCODE_REGEX = /^\s*((GIR\s*0AA)|((([A-PR-UWYZ][0-9]{1,2})|(([A-PR-UWYZ][A-HK-Y][0-9]{1,2})|(([A-PR-UWYZ][0-9][A-HJKSTUW])|([A-PR-UWYZ][A-HK-Y][0-9][ABEHMNPRVWXY]))))\s*[0-9][ABD-HJLNP-UW-Z]{2}))\s*$/i
    validates :full_name, format: { with: INVALID_NAME_REGEX }, presence: true
    validates :birth_date, timeliness: { before: :today, type: :date }, presence: true
    validates :gender, presence: true
    validates :postcode, format: { with: VALID_POSTCODE_REGEX }, allow_blank: true
    validates :description, length: { maximum: 500 }

    after_validation :geocode

    private
        def geocode_string
            "#{postcode}"
        end
end 
```

新用户视图（用户/注册）：

```
<h2>Sign up</h2>

<% resource.build_profile %>
<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
    <%= devise_error_messages! %>

    <div><%= f.label :email %><br />
    <%= f.email_field :email %></div>

    <div><%= f.label :username %> <i>(this cannot be changed so choose wisely)</i><br />
    <%= f.text_field :username %></div>

    <div><%= f.label :password %><br />
    <%= f.password_field :password %></div>

    <div><%= f.label :password_confirmation %><br />
    <%= f.password_field :password_confirmation %></div>

    <%= f.fields_for resource.profile do |profile_form| %>
        <div><%= profile_form.label :full_name %><br />
        <%= profile_form.text_field :full_name %></div>

        <div><%= profile_form.label :birth_date %><br />
        <%= profile_form.date_select :birth_date, start_year: Time.now.year, end_year: Time.now.year - 80, order: [:day, :month, :year], prompt: { day: 'Choose day', month: 'Choose month', year: 'Choose year' } %></div>

        <div><%= profile_form.label :gender %><br />
        <%= profile_form.select :gender, { "Male" => '0', "Female" => '1' } %></div>

        <div><%= profile_form.label :postcode %><br />
        <%= profile_form.text_field :postcode %></div>

        <div><%= profile_form.label :description, "About you" %><br />
        <%= profile_form.text_area :description %></div>
    <% end %>

    <div><%= f.submit "Sign up" %></div>
<% end %>

<%= render :partial => "devise/shared/links" %> 
```

除了更改 after_update_path 之外，注册控制器对于所有意图和目的都是标准的：

```
class RegistrationsController < Devise::RegistrationsController

    protected

        def after_update_path_for(resource)
            users_control_panel_path
        end
end 
```

我看过其他一些关于此的帖子，但它们似乎不相关 - 如果我错了，请原谅我。有什么问题，我该如何解决？我特别困惑，因为它在我的本地机器上运行，而不是在 Heroku 上（我已经迁移了数据库）。

**编辑：**

抱歉，它在我的开发机器上不起作用 - 我添加了这个功能，它不起作用，所以我在控制台中添加了详细信息并忘记重新访问它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T09:30:46.360

我已经通过更换解决了这个问题

```
<%= f.fields_for resource.profile do |profile_form| %> 
```

和

```
<%= f.fields_for :profile do |profile_form| %> 
```

# ruby-on-rails - 如何从另一个控制器中获取控制器的响应？

> ID：10875085
> 
> 赞同：7
> 
> 时间：2012-06-04T00:23:36.510
> 
> 标签：ruby-on-rails, ruby-on-rails-3, api, backbone.js

**导轨 3.2.5**。我有一系列控制器组成我的 Backbone.js 应用程序使用的 JSON API。我现在正在寻找创建一系列控制器，为爬虫/蜘蛛/googlebot 提供静态内容。我想从 JSON API 获得相同的数据，因为它们是针对我已经在我的 Backbone.js 应用程序中使用的车把模板量身定制的，但这次将它们呈现在服务器端。

**有没有办法可以从我的 API 控制器获取 JSON 响应并从另一个控制器访问它们？**. 我知道我可以使用`curl`，但由于 JSON API 对我来说已经是本地的并且在同一个 Rails 应用程序中，有没有更高效和优雅的方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T04:39:30.400

不，没有。如果您需要这样的东西，请将**共享**代码分解为另一个类（您可能正在尝试构建[服务](http://domaindrivendesign.org/node/125)），然后在两个控制器中使用它，这样您就可以轻松共享代码，然后从它们的输出中生成 JSON .

鉴于您使用 RABL 生成 JSON，您应该将[要重用的部分转换为部分](https://github.com/nesquena/rabl#partials)，然后将它们包含在每个特定视图中，就像任何其他 Rails 视图一样。

# php - mysql中的长文本字段？

> ID：10875091
> 
> 赞同：1
> 
> 时间：2012-06-04T00:24:46.343
> 
> 标签：php, mysql

首先为这个愚蠢的问题道歉，我在其他编程领域相当有经验，但我正在自学网络开发。

我正在建立一个网站，它将拥有`articles`. 我知道如何将站点连接到 mysql 表，并且可以基于查询构建站点，即我有一个名为`something.com/articles?articleid="123456"`

使用 MySQL 表，我可以为每篇文章填充所有标题、元数据和其他所有内容，我遇到的问题是正文的主体，我不愿意这样做（例如）`varchar(2000)`部分原因是在大多数情况下这将是矫枉过正而且很少见有时可能还不够。

如果我在此过程中做出了错误的假设，再次道歉，我主要从猜测和反复试验中获得了我对 Web 开发的了解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T00:33:48.097

您应该使用 MySQL 的[`TEXT`](http://dev.mysql.com/doc/refman/5.0/en/blob.html)数据类型。这种类型最多可以[容纳 65,535 个字符](http://www.electrictoolbox.com/maximum-length-mysql-text-field-types/)。如果您需要更多，还有`MEDIUMTEXT`甚至`LONGTEXT`类型（尽管`LONGTEXT`在大多数情况下可能会矫枉过正）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T00:30:35.820

如果您打算在一列中包含大量文本，则可能需要考虑将文本存储在文件中。这些文件可以被放置在一个专门的目录中，并由它们各自的文章 ID 命名。

例如，如果用户请求文章#12345，MySQL 将提供该文章的元数据/标题/等，然后 PHP 将检索该特殊目录中的 12345.txt 并显示它。

# java - 创建自定义表格单元格渲染器（按钮和文本框）

> ID：10875094
> 
> 赞同：1
> 
> 时间：2012-06-04T00:25:13.723
> 
> 标签：java, swing, jtable, tablecellrenderer, tablecelleditor

我想知道如何在java中制作自定义表？？？我希望它有 4 个文本框，然后是一个按钮。如果有人能告诉我如何为我的桌子做这个，我会非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T00:40:33.413

基本上，您要做的不是表格模型，而是自定义单元格编辑器和渲染器。希望这篇文档能解开你的疑惑，[JTables官方教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

祝你好运！

# sed - 如何将这两个 `sed` 命令压缩为一个？

> ID：10875098
> 
> 赞同：0
> 
> 时间：2012-06-04T00:26:33.177
> 
> 标签：sed

更多的是好奇，但是有没有办法将这两个 sed 命令压缩为一个？

```
sed -r '/sometext/!d' file.txt | sed -r '5,10!d' 
```

以上为我提供了包含“sometext”的行的第 5 到第 10 个实例（总共 6 个）。

串联：

```
sed -r '/sometext/!d;5,10!d' file.txt 
```

只给我在原始文件的第 5 行到第 10 行中出现“sometext”的行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T07:19:57.217

这可能对您有用：

```
# make some test data
# seq 50 > /tmp/a
sed -i 's/.*/& sometext/;n' /tmp/a
# run existing commands
sed -r '/sometext/!d' /tmp/a | sed -r '5,10!d'
sometext
9 sometext
11 sometext
13 sometext
15 sometext
17 sometext
19 sometext
# run new command
sed '/sometext/H;$!d;g;s/\n/&&/5;s/.*\n\n//;s/\n/&&/6;s/\n\n.*//' /tmp/a
9 sometext
11 sometext
13 sometext
15 sometext
17 sometext
19 sometext 
```

解释：

*   将感兴趣的线推入保持空间 (HS)。`/sometext/H`
*   删除除最后一行之外的所有其他行。`$!d`
*   用 HS 的内容覆盖最后一行。`g`
*   删除前 5 行。注意 第一个换行符是`H`命令的产物。`s/\n/&&/5;s/.*\n\n//`
*   删除除前 6 行之外的所有行。`s/\n/&&/6;s/\n\n.*//'`

注意`5,10!d`命令意味着删除除第 5 到 10 行之外的所有内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T11:01:12.627

不是 sed，但 awk 可读性很强：

```
awk '/sometext/ && ++count && 5 <= count && count <= 10' file.txt 
```

# java - onClick 上的 Java/Android NullPointerException

> ID：10875100
> 
> 赞同：1
> 
> 时间：2012-06-04T00:27:04.200
> 
> 标签：java, android, nullpointerexception

我不知道为什么 Android/Java 会这样做，这很难想，因为我非常疲倦，目前无法独立思考。

我正在创建静态函数并以这种方式输入和执行代码，我认为这不是原因，因为它甚至还没有通过 if 语句；大家怎么看？我敢打赌这是一个简单的解决方案，我只是无法为我的生活弄明白。

代码：

```
public class LogIn extends Activity {
    Button login;
    EditText user;
    EditText pass;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.login);
        TextView top = (TextView) findViewById(R.id.textView2);
        EditText user = (EditText) findViewById(R.id.etUser);
        EditText pass = (EditText) findViewById(R.id.etPass);
        CheckBox stay = (CheckBox) findViewById(R.id.cBStay);
        Button login = (Button) findViewById(R.id.btLogin);
        Process();

   }

    private void Process() {
        // TODO Auto-generated method stub
    login.setOnClickListener( new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            String user1 = user.getText().toString();
             String pass1 = pass.getText().toString();
            if(user1 !=null &user1.length()>=1 & pass1 !=null &pass1.length()>=1) {
                ComHelper.SendLogin(user1, pass1);
            }
        }
    });

    }

} 
```

日志猫：

```
06-03 22:34:01.178: E/AndroidRuntime(2599): FATAL EXCEPTION: main
06-03 22:34:01.178: E/AndroidRuntime(2599): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.gta5news.qwuik/com.gta5news.qwuik.LogIn}: java.lang.NullPointerException
06-03 22:34:01.178: E/AndroidRuntime(2599):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
06-03 22:34:01.178: E/AndroidRuntime(2599):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
06-03 22:34:01.178: E/AndroidRuntime(2599):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
06-03 22:34:01.178: E/AndroidRuntime(2599):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
06-03 22:34:01.178: E/AndroidRuntime(2599):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-03 22:34:01.178: E/AndroidRuntime(2599):     at android.os.Looper.loop(Looper.java:137)
06-03 22:34:01.178: E/AndroidRuntime(2599):     at android.app.ActivityThread.main(ActivityThread.java:4424)
06-03 22:34:01.178: E/AndroidRuntime(2599):     at java.lang.reflect.Method.invokeNative(Native Method)
06-03 22:34:01.178: E/AndroidRuntime(2599):     at java.lang.reflect.Method.invoke(Method.java:511)
06-03 22:34:01.178: E/AndroidRuntime(2599):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-03 22:34:01.178: E/AndroidRuntime(2599):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-03 22:34:01.178: E/AndroidRuntime(2599):     at dalvik.system.NativeStart.main(Native Method)
06-03 22:34:01.178: E/AndroidRuntime(2599): Caused by: java.lang.NullPointerException
06-03 22:34:01.178: E/AndroidRuntime(2599):     at com.gta5news.qwuik.LogIn.Process(LogIn.java:32)
06-03 22:34:01.178: E/AndroidRuntime(2599):     at com.gta5news.qwuik.LogIn.onCreate(LogIn.java:26)
06-03 22:34:01.178: E/AndroidRuntime(2599):     at android.app.Activity.performCreate(Activity.java:4465)
06-03 22:34:01.178: E/AndroidRuntime(2599):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
06-03 22:34:01.178: E/AndroidRuntime(2599):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T00:36:13.710

我知道这是一个事实，但这只是因为方法中有一行`Process()`。

您的实例成员`login`从未被初始化，因此它是，因此，当您调用该方法时`null`它会抛出 a 。`NullPointerException``Process()`

如果您查看您的`onCreate()`方法，您不会将`Button`“登录”保存到实例成员，而是保存到本地成员。

```
login = (Button) findViewById(R.id.btLogin); 
```

这应该可以解决一个问题，但您的其他实例成员也会遇到同样的问题（至少`user`和`pass`）。

```
user = (EditText) findViewById(R.id.etUser);
pass = (EditText) findViewById(R.id.etPass); 
```

# playframework - 如何在关闭时停止 akka 线程

> ID：10875101
> 
> 赞同：4
> 
> 时间：2012-06-04T00:27:09.763
> 
> 标签：playframework, playframework-2.0, akka

我目前正在使用播放框架（版本 2.0.1）。我的应用程序需要收听 udp 广播消息。所以我需要一个新线程来监视套接字并接收所需的字节。在查看 play 框架后，似乎 Akka 系统用于处理线程/作业。所以我实现了一个新的后台 akka 任务来读取我的套接字。见下文。一切都按我的预期工作，我能够在后台任务中接收我想要的数据。我遇到的问题是当我关闭服务器时。在开发中按下 Control D。它显示消息“[info] play - 关闭应用程序默认 Akka 系统。” 但随后挂起并且永远不会关闭我的后台线程。

```
public running = false;
public void onReceive(Object message) {
    if (message instanceof SystemConfiguration) {
        try {
            InetAddress group = InetAddress.getByName("222.1.1.1");
            MulticastSocket socket = new MulticastSocket(54321);
            socket.joinGroup(group);
            running = true;

            while (running) {
                Logger.info("MultiCastController - waiting to receive message");
                byte[] buf = new byte[1000];
                DatagramPacket recv = new DatagramPacket(buf, buf.length);
                socket.setSoTimeout(30000);
                try {
                    socket.receive(recv);
                    String msgString = new String(recv.getData()).trim();
                    Logger.info("retreived: " + msgString);
                } catch (SocketTimeoutException e) {
                    Logger.info("MultiCastController - timed out"
                            + recv.getData().toString());
                }
            }
        } catch (Exception ex) {
            Logger.info("Errror message caught: " + ex.toString());
        }
    } else {
        Logger.info("Error starting multicast receiver incorrect value passed: ");
    }
} 
```

我试图覆盖 post stop，但它似乎从未被调用过。我也尝试过 akka.system().isTerminated() 但它没有用。

```
@Override
public void postStop()
{
    Logger.info("MultiCastController - postStop() - stopping thread");
    running = false;
} 
```

我一直在寻找的另一个可能的选择是有什么方法可以获取 akka 状态吗？它正在关闭，所以我可以做类似的事情

同时（运行 && akka.system().alive()）。我发现如果我收到一条消息，它会崩溃，因为 ebean 服务器已关闭。我什至可以做一个黑客并检查它是否以某种方式活着吗？

同时（运行 && ebean.server.isalive()）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T11:51:59.587

将您的线程创建为守护线程，然后在应用程序退出时它将存在。

或者您可以注册一个回调，以便在 ActorSystem 关闭时执行：

> def registerOnTermination（代码：Runnable）：单位
> 
> 注册一个代码块（回调）以在此actor系统中的所有actor都停止后运行。

来自：[http ://doc.akka.io/api/akka/2.0.1/#akka.actor.ActorSystem](http://doc.akka.io/api/akka/2.0.1/#akka.actor.ActorSystem)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:16:09.513

您可以覆盖 Global.onStop 以向您的演员发送停止消息。如果运行得太晚，您可以在列表的早期注册一个插件，以便在 Play 开始关闭时立即发送该停止消息：

```
import play.api.Plugin
import play.api.Application

class ShutdownObserver(app: Application) extends Plugin {

  override def onStop() {
    ... send message to your actor telling it to stop...
  }
} 
```

然后使用以下命令创建您的 conf/play.plugins 文件：

```
1:ShutdownObserver 
```

# netbeans - Cygwin 在 netbeans 7 中运行不佳

> ID：10875102
> 
> 赞同：0
> 
> 时间：2012-06-04T00:27:12.443
> 
> 标签：netbeans, terminal, cygwin, filepath

netbeans 中的终端不显示我所在的目录，这与 cygwin 中的当前文件路径以彩色显示不同。有没有办法改变它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:05:04.583

我和你有同样的问题，我发现我可以在 NetBeans 的终端中运行 Cygwin 的 bash.exe，然后在该终端中初始化 ~/.bash_profile，就像在 Cygwin 中运行一样。例如，

```
/usr/bin/bash.exe 
```

接着

```
. ~/.bash_profile 
```

# azure - 我如何知道 Azure VIP 交换何时完成？

> ID：10875103
> 
> 赞同：1
> 
> 时间：2012-06-04T00:27:56.047
> 
> 标签：azure

我刚刚使用管理 REST API 进行了 VIP 交换。操作返回状态代码“Succeeded”之前花了 30 秒，但在对服务的请求开始返回新内容之前又过了一分钟左右。因为我需要管理启动缓慢的流程，所以我需要在 VIP 交换之前和之后通知我的工作角色。所以问题是这样的：我如何确信 VIP 交换已经完成？如果我开始从新部署中取回内容，我应该等待多长时间才能采取行动？也就是说，所有网络角色是否几乎同时交换？ [该线程](http://social.msdn.microsoft.com/Forums/pl-PL/windowsazureconnectivity/thread/09f0edf7-4f46-4ac4-8be7-de29def28ce8)报告旧内容被退回长达 30 分钟，但我觉得这很难相信。也许他们有缓存或代理。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T03:31:59.477

实际的 VIP 交换永远不会超过几十秒，所以“等一下”就可以了。也就是说，*现有的*连接可以持续相当长的一段时间。如果您一遍又一遍地在同一个浏览器中刷新，您可能会设法保持一个 TCP 套接字打开（由于 HTTP 保持活动状态）。尽管进行了 VIP 交换，套接字仍然打开并连接到旧部署。

因此，需要多长时间取决于您要测量的是什么。重新编程负载均衡器以指向新部署的过程非常快。所有用户断开连接并建立新连接（以及他们的缓存被刷新等）的过程可能需要更长的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T00:51:56.733

关于在 Azure 端进行 VIP 交换的实际物理操作，我不知道您的问题的确切答案。但是，当交换发生时，DNS 名称更改需要一些时间才能传播。即使您的 TTL（生存时间）相对较小。这是因为大多数 ISP 的缓存 DNS 解析也在他们自己的服务器上，当新 IP 解析为旧名称时，各种 DNS 缓存都必须刷新

# python - 如何查找python用户定义类的属性？

> ID：10875106
> 
> 赞同：0
> 
> 时间：2012-06-04T00:28:29.727
> 
> 标签：python, object

请看下面的示例代码，它在一个文件中，比如说

**`classattr.py`**

```
class BaseClass(object):
    def __init__(self, param1, param2):
        self.param1 = param1
        self.param2 = param2

    def somemethod(self):
        return "This is returned when I do Base.__dict__"

class ChildOfBaseClass(BaseClass):
    def __init__(self, param1, param2, param3, param4):
        super(ChildOfBaseClass, self).__init__(param1, param2)
        self.param3 = param3
        self.param4 = param4

    def somemethod(self, param3, param4):
        a = param3 + param4
        return a 
```

我想在创建任何实例之前获取类的所有属性（我假设`param1`等`param2`称为属性）。命令`dir(classattr.BaseClass)`不列出`param1`和`param2`。但是，它确实返回了 method `somemethod`。

我试图获取属性的原因如下： 模块**`classattr`**被导入到另一个文件中，其中类的名称`classattr.BaseClass`或者`classattr.ChildOfBaseClass`作为某个函数的输入提供。我想在运行时确定它是哪一个，然后在创建实例时使用适当的输入（如果是前者，或者是后者的所有参数`param1`）。我正在考虑这样做的方式是检查该类是否具有属性，然后使用正确的输入创建实例。还有其他更好的检查方法吗？另一种方法是将和作为输入`param2``param1``param4``param3``param3``param4``BaseClass`即使他们什么都不做，然后总是用所有四个参数作为输入来创建实例。但这似乎不是合适的做事方式。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T00:31:40.523

没有真正的方法可以获取仅在创建对象后才分配的属性名称，例如在 中定义的属性名称`__init__()`，而无需实际创建实例。该`__init__()`方法可以做任何事情，并且一个实例可能已经被甚至不在类中的代码进一步修改。所以如果你想知道一个实例有什么属性，你需要一个实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T00:33:36.357

您无法知道类将赋予其实例哪些实例属性，因为在创建实例之前它们不存在。

但是，如果您想知道在实例化类时需要传递哪些参数，则可以检查类`__init__`方法的调用签名以查看它接受哪些参数。有关获取调用签名的一些信息，请参阅[确定 lambda 中的参数数量。](https://stackoverflow.com/questions/10865325/determining-the-number-of-parameters-in-a-lambda)

`__init__`请注意，实例属性和参数之间没有内在关系。你可以有这样的课程：

```
class Foo(object):
    def __init__(self):
        self.someAttr = 10 
```

. . . 它定义了一个实例属性而不接收任何参数。（反之亦然，一个接受参数但不使用它们来创建实例属性的类。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T02:34:30.660

BrenBarn 的回答将引导您找到一些可能帮助您解决问题的想法。我只是想我会添加一些关于术语的注释。

在 Python 中，对象的*属性*是存储在其中的命名值（对象几乎无非就是“具有属性的事物”）。它们是使用`dotted.name`语法检索的。

Python 中的类是对象。因此它们具有属性。最重要的是您在`class`块中定义的所有名称（包括方法），它们成为类对象的属性。因此，当您询问类的*属性*时，听起来您想要检索**类对象本身**的属性，但实际上并非如此。

确实其中一件事`dir(classattr.BaseClass)`是查找 的属性`classattr.BaseClass`，它在哪里找到`somemethod`属性，但没有找到`param1`，或者`param2`因为它们*不是***类对象** 的属性`BaseClass`；一旦这些实例被创建和初始化，它们（将是）*实例*的属性。`BaseClass`

但是您似乎*真正*要问的是如何找出`__init__`给定类的方法的调用签名。正如 BrenBarn 所指出的，尽管类*通常被*编写为简单地直接从参数初始化其实例的属性 到`__init__`，但绝对不能保证确实如此。但是，如果您的目的只是为了知道要传递给类以创建实例的信息，那么您不需要知道（也不应该关心）最终将存储为属性的内容，而只是知道什么是`__init__`方法的必需参数。

# eclipse - Eclipse删除空格快捷方式

> ID：10875108
> 
> 赞同：2
> 
> 时间：2012-06-04T00:28:44.250
> 
> 标签：eclipse

我总是从代码中删除空白块。我正在寻找一种方法来删除 Eclipse 中光标下的当前空白块，而不是 ctrl-shift-arrow-keying。

例如说我的代码是：

```
 <macrodef name="execute-step">
        <attribute name="plugins" />
        <attribute name="step" />
        <sequential>   |
            <sleep-if-required sleep-time-property-name="sleep-before-@{step}"/> 
```

（管道“|”是我的光标）。最好按一下快捷键来拉出该空白块，以提供：

```
 <macrodef name="execute-step">
        <attribute name="plugins" />
        <attribute name="step" />
        <sequential>|<sleep-if-required sleep-time-property-name="sleep-before-@{step}"/> 
```

（同样，管道“|”显示删除空格后的光标位置。）

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-09T04:43:12.330

Eclipse 本身或我知道的任何 Eclipse 插件中都没有这样的功能。但是，最接近的可能是[AnyEdit](http://andrei.gmxhome.de/anyedit/)。在您的示例中，它能够自动从行尾删除空格应该注意光标前面的空格。它是开源的，因此您可以随时深入研究并自己添加功能（请记住与 AnyEdit 共享它，以便我们其他人也受益！）。

如果这不是你的事，你可以轻松地使用第三方应用程序来调用适当的宏来删除空格。如果您更喜欢使用键盘快捷键，您可以尝试（假设是 Windows）[AutoHotkey](http://www.autohotkey.com/)之类的东西，或者，如果您更喜欢使用鼠标，我最喜欢的应用程序之一（太糟糕了，它的 Ubuntu 等效应用程序远没有那么好！）[StrokeIt](http://www.tcbmi.com/strokeit/)，它可以让您使用自定义鼠标手势来做......好吧，几乎任何事情。

您正在寻找的宏将是这样的：

`End`, `Shift`+ `Down`, `Shift`+ `Home`,`Del`

第一个键将移动到该行*中非空白文本的末尾*，即在您的示例中它实际上会向左移动。接下来的两个将选择到下一行*中非空白文本的开头*，因此您可以删除这两行之间的空白。显然，这只有在中间没有任何空行的情况下才有效。

将您的宏绑定到可用的键盘组合或鼠标手势，然后离开。

# javascript - Fancybox 中的目标 href

> ID：10875109
> 
> 赞同：0
> 
> 时间：2012-06-04T00:28:49.290
> 
> 标签：javascript, jquery, fancybox, fancybox-2

我试图在标题中放置一个链接，该链接本质上是选定的锚href，带有前缀。我该怎么做以下？我希望能够在选定的锚元素上获取 this.href。

```
$(".gallery-module > li > a").fancybox(
{
    title       : '<a href="'+ this.href + '-large">DOWNLOAD</a><br> High Resolution File, 300dpi'
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T01:25:17.620

我假设您使用的是 fancybox v1.3.x，不是吗？

使用该版本，您不能`this.href`直接引用，除非它在回调函数中。在您的情况下，您可以使用`titleFormat`自定义标题的选项，例如

```
$(".gallery-module > li > a").fancybox({
 titleFormat: function(){
  return '<div class="newTititleWrap"><a href="'+ this.href + '-large">DOWNLOAD</a><br> High Resolution File, 300dpi</div>'
 } 
}); 
```

请注意，我将自定义标题包装在`DIV`with *class* = `newTititleWrap`（或您喜欢的任何内容）中，您可以`css`稍后使用它来设置样式。

**更新**：我错过了标签`fancybox-2`（我的错）。对于fancybox v2.0.6，使用如下`beforeShow`回调选项：

```
 $(".gallery-module > li > a").fancybox({
   beforeShow : function() {
    this.title = '<div class="newTititleWrap"><a href="'+ this.href + '-large">DOWNLOAD</a><br> High Resolution File, 300dpi</dv>';
   } 
 }); // fancybox 
```

我将发布 v1.3.4 的解决方案，以防它帮助其他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T01:17:02.993

当你绑定fancybox时：

```
$(".gallery-module > li > a").fancybox({
    title: '<a href="'+ this.href + '-large">DOWNLOAD</a><br> High Resolution File, 300dpi'
}); 
```

`this`不是匹配`<a>`元素，`this`可能不是'属性，`window`是（可能），这不是你想要的标题。`this.href``<a>``href``this.href``window.href`

[`each`](http://api.jquery.com/each/)如果您想使用来自 fancybox 中链接的信息，您可以使用并分别绑定 fancybox 来遍历匹配元素集`<a>`：

```
$('.gallery-module > li > a').each(function() {
    // 'this' will be the <a> in here
    $(this).fancybox({
        title: '<a href="'+ this.href + '-large">DOWNLOAD</a><br> High Resolution File, 300dpi'
    });
}); 
```

在`$('.gallery-module > li > a').each`回调中，`this`将是`<a>`您正在寻找的。

# jquery - 交换图像时无法保持垂直滚动位置

> ID：10875110
> 
> 赞同：0
> 
> 时间：2012-06-04T00:30:00.400
> 
> 标签：jquery

我已经有一段时间了，似乎无法让 scrollTop 工作，不知道我做错了什么。这是我正在处理的网站：http: [//graysonearle.com/newtest/#prettyPhoto/6/](http://graysonearle.com/newtest/#prettyPhoto/6/)基本上你可以滚动左边的东西，选择一个缩略图，然后它会加载到内容部分。问题是它重置了不太理想的垂直滚动位置。我该怎么办？

还是想不通。我想这是因为内容淡出，不存在，所以垂直滚动位置不再好，因为它需要重置到顶部，到一个存在的区域。我可以在那里放一些占位符之类的吗？

# delphi - 如何识别自动排列列表中列表项的矩形？

> ID：10875116
> 
> 赞同：0
> 
> 时间：2012-06-04T00:30:41.870
> 
> 标签：delphi, custom-controls, listitem

我正在构建一个自定义列表控件，类似于列表视图但更轻。它具有属性`ItemWidth`，并且`ItemHeight`对于它的每个项目，这些项目都在一个`TOwnedCollection`. 每个项目的大小相同。我还有一些属性，`Margins`用于`ItemSpacing`指定每个项目的位置相距多远。

问题在于计算每个项目的位置以使其最适合当前控制空间。该控件只有垂直滚动，没有水平滚动。因此，我需要识别一个项目何时无法放入列表并将其带到下一行。

为了使这更加棘手，我还必须能够识别给定点是否在项目的矩形区域内，以处理鼠标事件。所以为了解决这个问题，我决定在每个项目上放置一个函数，该函数`GetRect`将返回该项目`Rect`在控件上的区域。但是我如何让这个函数计算这个呢？

此函数的两个主要实现将在`Paint`控件中：

```
for X := 0 to FItems.Count - 1 do begin
  Canvas.Rectangle(FItems[X].GetRect);
end; 
```

当确定一个点是否在这个项目的区域内时：

```
for X := 0 to FItems.Count - 1 do begin
  R:= FItems[X].GetRect;
  Result := (P.X > R.Left) and (P.X < R.Right) and (P.Y > R.Top) and (P.Y < R.Bottom);
end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T01:12:00.433

知道网格中任何单元格的位置不需要计算所有先前单元格的位置。这就是网格的伟大之处。每个单元格都有一个可预测的位置。

首先，您需要知道在一行中可以水平排列多少个单元格。使用[第一个答案](https://stackoverflow.com/a/10875117/33732)中的值，由以下等式给出：

```
CellsPerRow := (CW - ML - MR + SH) div (IW + SH); 
```

这需要总客户端宽度，减去边距，然后除以单个单元格的有效宽度，通过将项目宽度与项目间距相加得到。每行的一个单元格没有间距（因为它紧靠控件的边缘），所以我们假设客户区实际上比`SH`像素更宽。

现在我们知道一行可以容纳多少项目，我们可以计算任何项目属于哪一行（从零开始）：

```
ItemRow := Item.Index div CellsPerRow; 
```

该行（列）中的（从零开始的）位置也很容易计算：

```
ItemColumn := Item.Index mod CellsPerRow; 
```

现在我们可以计算单元格的位置：

```
LP := ML + ItemColumn * (IW + SH);
TP := MT + ItemRow * (IH + SV); 
```

把它们放在一起，我们得到这个：

```
function TMyListItemGrid.GetCellsPerRow: Integer;
begin
  Result := (ClientWidth - Margins.Left - Margins.Right + SpacingHorz) div (ItemWidth + SpacingHorz);
end;

function TMyListItem.GetRect: TRect;
var
  Row, Col: Integer;
  EffectiveWidth, EffectiveHeight: Integer;
begin
  EffectiveWidth := Owner.ItemWidth + Owner.SpacingHorz;
  EffectiveHeight := Owner.ItemHeight + Owner.SpacingVert;

  Row := Index div Owner.CellsPerRow;
  Result.Top := Owner.Margins.Top + Row * EffectiveHeight;
  Result.Bottom := Result.Top + Owner.ItemHeight;

  Col := Index mod Owner.CellsPerRow;
  Result.Left := Owner.Margins.Left + Col * EffectiveWidth;
  Result.Right := Result.Left + Owner.ItemWidth;
end; 
```

小心不要让控件变得太窄，或者让边距变得太宽。如果发生这种情况，则该`CellsPerRow`属性可能会变为零，这将导致所有`GetRect`调用出现异常。`CellsPerRow`如果变成负数，事情也可能看起来很奇怪。您需要为控件强制执行某个最小宽度。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-04T00:30:42.463

我已经分解了这个过程来演示如何计算这样的位置：

```
function TMyListItem.GetRect: TRect;
var
  I: Integer;   //Iterator
  LP: Integer;  //Left position
  TP: Integer;  //Top position
  CW: Integer;  //Client width
  CH: Integer;  //Client height
  IW: Integer;  //Item width
  IH: Integer;  //Item height
  SV: Integer;  //Vertical spacing
  SH: Integer;  //Horizontal spacing
  ML: Integer;  //Margin left
  MT: Integer;  //Margin top
  MR: Integer;  //Margin right
  MB: Integer;  //Margin bottom
  R: TRect;     //Temp rect
begin //'Owner' = function which returns the control
  //Initialize some temporary variables...
  CW:= Owner.ClientWidth;
  CH:= Owner.ClientHeight;
  IW:= Owner.ItemWidth;
  IH:= Owner.ItemHeight;
  SV:= Owner.SpacingVert;
  SH:= Owner.SpacingHorz;
  ML:= Owner.Margins.Left;
  MT:= Owner.Margins.Top;
  MR:= Owner.Margins.Right;
  MB:= Owner.Margins.Bottom;
  LP:= ML;  //Default left position to left margin
  TP:= MT;  //Default top position to top margin
  for I := 0 to Collection.Count - 1 do begin
    R:= Rect(LP, TP, LP + IW, TP + IH);
    if Self.Index = I then begin
      Result:= R;
      Break;
    end else begin
      //Calculate next position
      LP:= LP + IW + SV;    //move left position by item width + vertical spacing
      if (LP + IW + MR) >= CW then begin //Does item fit?
        LP:= ML;            //reset left position
        TP:= TP + IH + SH;  //drop down top position to next line
      end;
    end;
  end;
end; 
```

这是它产生的样本：

![在此处输入图像描述](../Images/c9b5a9efbd70d1ae5aceadb981b72563.png)

应该有更好的替代方案。此过程正在执行循环计算，因此数百个项目的列表可能会显示较慢的结果。

# java - 何时使用/不使用同步适配器

> ID：10875119
> 
> 赞同：6
> 
> 时间：2012-06-04T00:31:03.077
> 
> 标签：java, android, sync

我试图弄清楚是否需要在我的 android 应用程序中使用同步适配器。

程序方法示例：

1.  （有网络覆盖）用户所做的更改将自动发送到服务器。
2.  （无网络覆盖）更改将保存在 sqlite 表中，并等待在线广播上传更改。
3.  发送到服务器的更改将被保存到一个 sqlite 表中，在某种程度上反映了服务器上的内容。
4.  服务器上的更改将使用 C2DM 框架通知用户更改。
5.  当应用程序收到通知时，它将从服务器获取必要的数据并更新 sqlite 表。

问题是，我应该为这项工作使用同步适配器吗？如果是这样，基于我上面的示例的高级方法是什么。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T01:36:12.623

您要与哪个服务器应用程序同步？如果您的应用程序想要将用户数据与服务器同步，C2DM（使用同步适配器）可能是要走的路。它确实提供了开销。我发现在大多数情况下，一个简单的 Restful 界面更容易创建和维护。

如果您想要更详细的答案，则必须提供有关您的应用程序的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-21T17:05:26.160

If you don't care battery draining, use `SyncAdapter` to do periodic bidirectional syncing(down and upstream) and modify only local db to interact with user's action. This way you only need two scripts on server side, one for downstream syncing and the other for upstream syncing.

Of course you need have

1). 3 flags, i.e. insert_state, update_state and delete_state for local db to indicate dirty data.

2). uuid for both local and remote db

GoogleIO RESTFUL SYNCING Reference: [http://www.youtube.com/watch?v=xHXn3Kg2IQE](http://www.youtube.com/watch?v=xHXn3Kg2IQE)

# python - 使用 .format() 格式化具有字段宽度参数的列表

> ID：10875121
> 
> 赞同：48
> 
> 时间：2012-06-04T00:31:31.080
> 
> 标签：python, list, string-formatting

我最近（终于？）开始使用它`.format()`并且可能有一个有点模糊的问题。

给定

```
res = ['Irene Adler', 35,  24.798] 
```

和

```
(1) print('{0[0]:10s} {0[1]:5d} {0[2]:.2f}'.format(res))
(2) print('{:{}s} {:{}d} {:{}f}'.format(res[0], 10, res[1], 5, res[2], .2)) 
```

工作得很好，都打印：

```
Irene Adler    35 24.80
Irene Adler    35 24.80 
```

我不知道我可以处理（1）中的列表，这很整洁。我之前已经看到过使用旧`%`格式的字段宽度参数 (2)。

我的问题是关于想要做这样的事情，它结合了（1）和（2）：

```
(3) print('{0[0]:{}s} {0[1]:{}d} {0[2]:{}f}'.format(res, 10, 5, .2)) 
```

但是，我无法做到这一点，而且我无法从文档中弄清楚这是否可能。最好只提供要打印的列表和宽度参数。

顺便说一句，我也试过这个（没有运气）：

```
args = (10, 5, .2)
(4) print('{0[0]:{}s} {0[1]:{}d} {0[2]:{}f}'.format(res, args)) 
```

在这两种情况下，我得到：

```
D:\Users\blabla\Desktop>python tmp.py
Traceback (most recent call last):
  File "tmp.py", line 27, in <module>
    print('{0[0]:{}s} {0[1]:{}d} {0[2]:{}f}'.format(res, 10, 5, .2))
ValueError: cannot switch from manual field specification to automatic field numbering

D:\Users\blabla\Desktop>python tmp.py
Traceback (most recent call last):
  File "tmp.py", line 35, in <module>
    print('{0[0]:{}s} {0[1]:{}d} {0[2]:{}f}'.format(res, args))
ValueError: cannot switch from manual field specification to automatic field numbering 
```

我还尝试使用`zip()`组合这两个序列而没有运气。

**我的问题是：**

我可以指定一个要有效打印的列表，以执行我在 (3) 和 (4) 中尝试未成功执行的操作（显然，如果这是可能的，我没有使用正确的语法），如果可以，怎么做？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-06-04T00:36:35.757

错误信息

```
ValueError: cannot switch from manual field specification to automatic field numbering 
```

几乎说明了一切：您需要在任何地方给出明确的字段索引，并且

```
print('{0[0]:{1}s} {0[1]:{2}d} {0[2]:{3}f}'.format(res, 10, 5, .2)) 
```

工作正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-03T08:47:17.147

如果要使用`.format(res, args)`，可以像这样在格式字符串中指定所有索引：

```
>>> print('{0[0]:{1[0]}s} {0[1]:{1[1]}d} {0[2]:{1[2]}f}'.format(res, args))
Irene Adler    35 24.80 
```

但是，如果你想制作没有索引的格式字符串，你可以创建一个连续对的元组`(res[0], args[0], ... , res[-1], args[-1])`。

这是由这个成语完成的：

```
>>> sum(zip(res, args), ())
('Irene Adler', 10, 35, 5, 24.798, 0.2) 
```

您现在可以将其传递给简化的格式字符串（通过`*`-argument）：

```
>>> fmt = sum(zip(res, args), ())
>>> print('{:{}s} {:{}d} {:{}f}'.format(*fmt))
('Irene Adler', 10, 35, 5, 24.798, 0.2) 
```

当然，这可以在一行中完成：

```
>>> print('{:{}s} {:{}d} {:{}f}'.format(*sum(zip(res, args), ())))
Irene Adler    35 24.80 
```

为了使其可读，我将转换命名为：

```
def flat_pairs(iterable1, iterable2):
    return sum(zip(iterable1, iterable2), ())

# (...)

>>> print('{:{}s} {:{}d} {:{}f}'.format(*flat_pairs(res, args)))
Irene Adler    35 24.80 
```

我认为最后一个是可读性、便利性之间的合理权衡，当然还有——炫耀你的 Pythonic 思维方式，这是玩这些东西的主要动机。

# android - Android加载以光标一个ID范围

> ID：10875122
> 
> 赞同：0
> 
> 时间：2012-06-04T00:31:32.077
> 
> 标签：android, database, sqlite

```
Cursor cursor = db.rawQuery("SELECT id,name FROM  people WHERE id="+ id + " AND name IS NULL",null); 
```

我不想只将一个 id 的记录加载到我的游标中，而是想加载一系列 id，例如从 id=100 到 id=150 到游标。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T00:43:00.977

您可以通过更改`WHERE`子句中使用的运算符来做到这一点。

```
SELECT id, name FROM  people WHERE id>100 AND id<150 AND name IS NULL 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T00:51:44.937

试试这些查询

```
SELECT id, name FROM  people WHERE id >= 100 AND id <= 150 AND name IS NULL
SELECT id, name FROM  people WHERE id BETWEEN 100 AND 150 AND name IS NULL 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T00:42:31.330

```
Cursor cursor = db.rawQuery("SELECT id,name FROM  people WHERE id <"+ upperBoundId + " AND id > " + lowerBoundId" + AND name IS NULL",null); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T00:47:14.703

试试这个：

```
Cursor c = db.rawQuery("select id,name from people where id>100 and id<150 and name is null",null);
int Column1 = c.getColumnIndex("id");
int Column2 = c.getColumnIndex("name");
c.moveToFirst();
   if (c != null) {
    // Loop through all Results
    do {
         int id = c.getInt(Column1);
     String name = c.getString(Column2);

    }while(c.moveToNext()); 
```

# mysql - SQL非规范化，将表列组合到另一个表列

> ID：10875129
> 
> 赞同：1
> 
> 时间：2012-06-04T00:33:16.590
> 
> 标签：mysql, denormalization

我在将数据库中的表连接在一起时遇到问题，我想以特定顺序显示它，这里是示例。

桌子：`product`

```
product_id product_price product_qty
1          5.25          100 
```

桌子：`product_detail`

```
product_id product_name product_generic_name
1          Alcohol      Isoprophyl Alcohol 
```

我希望加入的结果是

```
product_id product_name product_generic_name product_price product_qty
1          Alcohol      Isoprophyl Alchohol  5.25          100 
```

我失败的代码是：

```
SELECT `product_detail`.`product_name`,`product_detail`.`product_name`,`product_detail`.`product_generic_name` 
FROM `product_detail`
UNION
SELECT * FROM `product` 
```

但结果不是我需要的，它不会只添加行。请给我建议如何解决这个问题，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T00:40:13.590

```
SELECT p.product_id,
       product_name ,
       product_detail,
       product_generic_name ,
       product_price, 
       product_qty
FROM product as p
       inner join product_detail as pd on p.id = pd.id 
```

您可能想阅读一些关于如何连接表的 mysql 教程，因为这可能就像获取[MySQL 参考手册一样简单](http://dev.mysql.com/doc/refman/5.0/en/join.html)

根据您的评论，这里是另一种尝试的选择：

```
Select * from
         (SELECT p.product_id,
                 product_name ,
                 product_detail,
                 product_generic_name ,
                 product_price, 
                 product_qty
         FROM product as p) as newTable 
```

或者，如果您想要其他东西，您可以尝试使用临时表。

```
create temporary table new_table
SELECT p.product_id,
                 product_name ,
                 product_detail,
                 product_generic_name ,
                 product_price, 
                 product_qty
         FROM product as p 
```

然后在同一个脚本中，或者无论你怎么称呼它，你都可以尝试：

从 new_table 中选择 *

# java - 使用 Scala 的 Raw 类型实现 Java 接口

> ID：10875130
> 
> 赞同：6
> 
> 时间：2012-06-04T00:33:29.093
> 
> 标签：java, scala, generics, sonarqube, scala-java-interop

我正在尝试使用 Scala 为 Sonar 构建扩展。我需要扩展以下 Java 接口：

```
public interface Decorator extends BatchExtension, CheckProject {
    void decorate(Resource resource, DecoratorContext context);
} 
```

但**资源**类型实际上定义如下：

```
public abstract class Resource<PARENT extends Resource> 
```

我知道我可以解决创建 Java 原始超类的问题。我想坚持仅使用 Scala，也知道是否有我遗漏的解决方案，以及我是否可以建议 SonarSource 人在他们身边做出改进（使用原始类型）。

我已经读过这个问题，以及某些情况下的一些解决方法，但似乎没有一个适用于这里（[一种解决方法](http://michid.wordpress.com/2009/08/30/implementing-java-interfaces-and-generics/)，[一个明显固定](https://issues.scala-lang.org/browse/SI-1737)的票，还有票 2091 ......）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T14:51:14.320

经过一些试验和错误并查看错误消息后，我想出了这个编译：

```
import org.sonar.api.batch._
import org.sonar.api.resources._ 

object D {
  type R = Resource[T] forSome {type T <: Resource[_ <: AnyRef]}
  type S[T] = Resource[T] forSome {type T <: Resource[_ <: AnyRef]}
}

class D extends Decorator {
  def decorate(r: D.R, context: DecoratorContext) {}
  //def decorate(r: D.S[_], context: DecoratorContext) {} // compiles too
  def shouldExecuteOnProject(project: Project) = true
} 
```

我不确定它是否能让你实现你所需要的。我查看了[Resource](http://docs.sonarsource.org/2.2/apidocs/org/sonar/api/resources/Resource.html)，它可以表示`File`哪个扩展`Resource<Directory>`，或者有时是一个擦除（原始？）类型，`Resource`就像 for一样扩展`Directory`。

编辑：再想一想，`forSome`可以消除-这也可以编译：

```
def decorate(resource: Resource[_ <: Resource[_ <: AnyRef]],
             context: DecoratorContext) {
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T03:13:28.313

我不知道答案，但如果我写

```
def decorate(r: Resource[Resource[_]]) 
```

我收到一个错误

> `type arguments [Resource[_]] do not conform to class Resource's type parameter bounds [PARENT <: Resource[_ <: AnyRef]]`

这对我来说似乎是错误的，因为我认为实际的类型边界应该更像`Resource[_ <: Resource[_ <: Resource[... ...]]`（`AnyRef`不适合作为上限）。

# c++ - ofstream 奇怪的行为

> ID：10875134
> 
> 赞同：4
> 
> 时间：2012-06-04T00:34:12.513
> 
> 标签：c++, file-io, iostream

我遇到了 ofstream 的一个奇怪行为，“对我来说最不奇怪。这是我的程序，我使用的是 Visual Studio 2010 Express Edition。

```
int main () {

    std::ofstream file("file.txt");
    file << "something1";
    file.close();

    file.open("file.txt", std::ios::ate | std::ios::in );
    file << "something2";
    file.close();

    return 0;
} 
```

这会产生正确的输出。

> 某事1某事2

现在，如果我用以下代码替换第 9 行，

```
file.open("file.txt", std::ios::ate); 
```

我得到这个输出。

> 某事2

但是如果我再次替换第 9 行，这次用这段代码，

```
file.open("file.txt", std::ios::ate | std::ios::in ); 
```

我得到这个输出。

> 某事1某事2

现在，我想问题是，有人可以帮我解释一下吗？为什么最后一个解决方案有效，但中间一个没有。

**编辑：**更正了主要功能。你每天都会学到一些东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T00:43:57.513

`ofstream`默认为`std::ios::trunc`-- 截断现有内容的标志。传递`std::ios::in`禁用截断（除非`trunc`还指定了标志）。

实际上，规则是，如果使用了标志，或者如果使用了标志并且既不也不也不（注意与 不同，*每次*写入都会重新定位，而只影响初始指针） ，则`fstream`执行截断。自动设置。 没有 就不能使用。`trunc``out``in``app``app``ate``app`*`ate``ofstream``out``trunc``out`*

# php - jquery.ajax() processData - 设置为 false，仍将表单数据附加到 url - 和其他问题

> ID：10875135
> 
> 赞同：0
> 
> 时间：2012-06-04T00:34:37.520
> 
> 标签：php, javascript, jquery, ajax

所以我正在尝试学习一些 jquery 以在表单中使用来访问 mysql 数据库，这是表单：

```
<form class="loginform" id="loginform" name="loginform">
    <input type="email" id="login" name="login" placeholder="Login..." autofocus required /><br/>
    <input type="password" id="password" name="password" placeholder="Password..." required /><br/>
    <input type="submit" id="loginsubmit" name="loginsubmit" value="LOGIN"/><br/>
    <input type="submit" id="register" name="register" value="REGISTER"/><br/>
</form><!-- end loginform --> 
```

我有一个 JS 函数，并且正在使用该`$.submit()`函数并通过定义为参数的函数，因为`$.submit()`我有这样的调用`$.ajax()`：

```
function validateLogin(){
  $('#loginform').submit(function() {      
    $.ajax({
      url: "./validateLogin.php", 
      processData: false,
      data: {
        login: $("#login").val(), 
        password: $("#password").val()
      }, 
      success: function (result){
        alert($('#login').val());
        alert(result);
      }
    });
  });
} 
```

注意读取的行，最后是url 设置中`processData: false,` 的方法调用的 php 脚本：`$.ajax()`

```
<?php
$verified = FALSE;
$login = $_POST["login"];
$password = $_POST["password"];

$con = mysql_connect(host, user, pass) or die(mysql_error());
mysql_select_db(db, $con) or die(mysql_error());

$result = mysql_query("SELECT * FROM logins") or die(mysql_error());
while ($row = mysql_fetch_array($result)) {
  if ($row[login] == $login) {
    $verified = TRUE;
  }
}
?>

<html>
    <body>
        <?php echo($verified); ?>
    </body>
</html> 
```

有几件事不起作用，除了将表单数据附加到 url 之外，我什么也做不了（提交后 url 看起来像这样：`http://localhost/index.htmlqlogin=aloginname&password=apassword&login=LOGIN`，它还添加了 name: 值对出于某种原因，我将提交按钮提交给查询字符串），我从阅读[HERE（请参阅数据设置）](http://api.jquery.com/jQuery.ajax/)中了解到，`processData: false`这种情况甚至不应该发生。

我也无法`success: function()`触发警报（我也尝试过发出警报，`beforeSend: function()`但也不会触发。

我有点理解 jQuery，但并不完全是因为我对它比较陌生，但我对我编写的代码的理解是，在 JS 函数中，我将事件处理程序附加到表单（？ - 不是表单），并且在该事件处理程序将执行的函数中，我正在调用该`$.ajax()`方法，该方法将数据发送到 url 并在成功完成该处理时处理方法`success:`设置中定义的函数`$.ajax()`。然后在我的 php 脚本中，我连接到 mysql，查询它，检查表单中的登录是否与数据库中的条目匹配，如果匹配，则布尔值更改为 true，最后布尔值在内部回显`<html>`标记，但是我不确定如何显示该 html 数据。

简而言之，这就是我的问题。任何指导将不胜感激！如果我对上述过程有任何误解，请随时纠正我。再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T00:59:39.183

有几点需要说明。

1-确保路径**./validateLogin.php**是正确的。

2- 我不知道你是否已经这样做了，但如果你不使用[**Firebug**](https://addons.mozilla.org/en-en/firefox/addon/firebug/)，这是开发网站时最酷的调试插件。从字面上看，它将为您节省数小时的工作时间，并帮助您解决涉及 javascript 的错误。

3- ajax 最常见的用途是发布或带来数据。*可以是像“ done* ”或“ *error* ”这样的简单字符串，也可以是像*JSON*这样的序列化数据。（参见**[JSON](http://en.wikipedia.org/wiki/JSON)**）。如果需要输出数组或对象，请使用PHP 中的**json_encode**函数。

**这是一些代码供您尝试，它对我有用。**

**在 PHP 方面**

```
 $result = mysql_query("SELECT * FROM logins") or die(mysql_error());
   while ($row = mysql_fetch_array($result)) {
       if ($row[login] == $login) { 
         $verified = TRUE;
       }
   }
   if ($verified){
        echo 'TRUE';  // This could be anything you want, an array, an object, numbers or a string
   }else{
        echo 'FALSE';
   } 
```

**在 Javascript 方面**

```
$(document).ready(function(){ // Everything is encapsuled in the ready function in order to wait for the page to load completely.
    $.ajax({
        url: './validateLogin.php', 
        type: 'POST',
        success: function(result){

            if(result == 'TRUE'){
                alert('Verified!');                         
            }else{
                alert('Not verified!');                             
            }

        }
    });
}); 
```

我知道您也尝试输出 and 标记，但请记住 javascript 和 ajax 旨在平滑更改现有布局。所以你真的不想在你的请求中带来大量的 HTML 代码。您应该首先使用 HTML 和 PHP 准备布局，然后仅使用 javascript 和 ajax 来带来重要的数据或您需要即时更改的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T09:35:32.083

```
//hey try to use this server side php script

$logins = $_POST['login'];
$password = $_POST['password'];

$sqlquery = mysql_query("SELECT * FROM logins WHERE logins=$logins AND password=$password");
$numrow = mysql_num_rows($sqlquery);//check if exists or not

if($numrow > 0){
$verified =  "TRUE";
}
else{
$verified = "FALSE";
}
echo json_encode(array('verified'=>$verified));// echo out with json encode
//JS

$(document).ready(function(){
$("#loginbtn").click(function(){
$.ajax({
      type:'post',
      url:'validatelogin.php',
      data: {login: $("#login").val(), password: $("#password").val()},
      dataType:'json',
      success:function(data){

             alert(data.verified);
      }
});     
});

}); 
```

# python - 需要调试帮助

> ID：10875141
> 
> 赞同：0
> 
> 时间：2012-06-04T00:36:15.710
> 
> 标签：python, debugging, syntax-error

我是 Python 新手，我需要将它用作实验室报告的计算器。我只是将它用作计算器，以方便和轻松地调试脚本语言。我在 python shell 中输入了这个，但是，由于某种原因，当我按下回车键时，它只是开始了一个新行。这只发生在最后一行。我使用了错误的语法吗？

> > > mCupWater = 131.6
> > > 
> > > mCupWaterIce = 153.1
> > > 
> > > mITemp = 49
> > > 
> > > mFTemp = 29
> > > 
> > > mCup = 3.7
> > > 
> > > mWater = mCupWater - mCup
> > > 
> > > c = 4.181
> > > 
> > > mIceWater = mCupWaterIce - mCup
> > > 
> > > l = ((mWater * c * (mITemp - mFTemp)) - (mIceWater * c * (mFTemp)) / (mIceWater)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T00:39:58.770

你错过了一个结束`)`。在圆括号、方括号和大括号中存在隐式续行。

# javascript - HTML5 Canvas 擦除绘制的对象？

> ID：10875144
> 
> 赞同：4
> 
> 时间：2012-06-04T00:37:16.817
> 
> 标签：javascript, jquery, html

我无法为我绘制的对象实现“擦除”功能。我像这样绘制对象：

```
function draw_obj1(context) {
    context.lineTo(...)
    context.arc(...)
    //etc
} 
```

这些是在我为画布拥有的图像背景之上绘制的（通过 context.createPattern、fillStyle = pattern 等）。

所以说上面的函数使用各种 lineTo 调用来追踪一个三角形。现在要“擦除”或“撤消”此绘图，我的一个计划是在其上重新绘制同一对象的“异或”版本，以撤消它。我通过 context.globalCompositeOperation 执行此操作（请参阅：[https](https://developer.mozilla.org/samples/canvas-tutorial/6_1_canvas_composite.html) ://developer.mozilla.org/samples/canvas-tutorial/6_1_canvas_composite.html ）。

这几乎可行，除了最终结果在我的浅蓝色背景下并不完全空白。它是一个浅灰色的三角形，而不是原来的黑线三角形。

编辑 - 忘了提及我尝试过的另一个想法。在我需要离开的区域上执行“clearRect”会在我的浅蓝色背景中产生一个白洞，这不好。

那么我应该如何撤消我绘制的线条/弧线？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T00:52:35.380

仅使用您的 Canvas 内容是不可能的。画布元素的反应就像一个真实的画布：因为东西被绘制，它们被合并并绑定到完整的图片。

这是因为在大多数图形 API 中，canvas 只是一个字节数组。计算机无法单独知道如何识别和区分构成当前帧的对象。

最好的方法是实现“场景图”之类的东西，即图树。然后，您可以将对象附加到此图形树并构建自己的算法以在画布上绘制每个对象。

您可以拥有一个历史数据结构，以允许撤消/重做从场景图中添加/删除对象，并在一个小时间片（纳毫秒）内重绘每个对象。

这是对您的问题的整体看法。希望您知道如何以编程方式处理图形。

更多信息：[如何向 HTML5 Canvas 添加撤消功能？](https://stackoverflow.com/questions/3099322/how-to-add-undo-functionality-to-html5-canvas)

在这里：[http ://www.abidibo.net/blog/2011/10/12/development-undo-and-redo-functionality-canvas/](http://www.abidibo.net/blog/2011/10/12/development-undo-and-redo-functionality-canvas/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T00:48:53.873

您应该改为执行“绘制队列”。也就是说，将在画布上完成的操作序列放入一个数组中。这种方法的好处是你所做的每一个动作都会在一个数组中被跟踪。不利的一面是必须重新绘制整个画布以适应更改。

画布动画框架大部分时间都在做这些。

一个简单的表示是这样的：

```
var drawingQueue = [
    {
        shape : 'rectangle',
        fill : 'red'
    },
    {
        shape : 'circle',
        fill : 'blue'
    },
    {
        shape : 'arc',
        fill : 'green'
    }
]; 
```

这`drawingQueue`是一个命令/属性数组，用于指示在画布中绘制什么的命令。在本例中，此队列将绘制一个红色矩形、蓝色圆圈和绿色弧线。

例如，我想删除圆圈，我只需将其从数组中删除并重绘队列中的所有内容 - 现在没有圆圈。假设我们进行撤消，我们将使用数组`pop()`删除最后一项，然后重新绘制画布 - 现在没有弧线。

但为了更快的开发，我建议改用框架。他们将为您的形状提供内部跟踪系统，以便在画布中轻松添加和删除“元素”。首选是 KineticJS 和 FabricJS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T05:21:21.107

```
prev_comp = context.globalCompositeOperation
context.globalCompositeOperation = 'destination-out'
context.strokeStyle = "rgba(255, 255, 255, 1)"

/* Draw some "eraser" lines/shapes ..*/

context.globalCompositeOperation = prev_comp 
```

# ios - 保留/强类成员变量会在卸载视图控制器时自动清理吗？

> ID：10875145
> 
> 赞同：1
> 
> 时间：2012-06-04T00:37:33.540
> 
> 标签：ios, memory-management, uiviewcontroller

我有以下财产

。H

```
@property (nonatomic, strong) NSMutableDictionary *cache; 
```

.m

```
@synthesize cache = _cache; 
```

数据`_cache`建立在 viewDidLoad 上。现在我想知道`_cache`一旦视图控制器被卸载，是否会自动清理，还是我必须明确地做一个`_cache = nil;`in `viewWillUnload`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T00:43:01.000

无论您是否使用 ARC，它们都*不会*在`-viewDidUnload`. 您必须明确释放它们（或将它们设置为`nil`ARC。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T04:08:05.257

最简洁的答案是不。实例变量不会自动释放。它不会导致视图控制器上的释放。被控制的视图被清除。

您想要清除的任何内容都必须在 viewDidUnload 中显式完成（请注意，通过 IB 添加的变量将自动放置在该方法中）。

viewDidUnload 的典型场景是由控制器管理的视图不再出现在屏幕上（例如，另一个控制器已使用导航控制器推送）。系统检测到内存压力，您的视图已被卸载。

对视图中对象的任何弱引用都将被自动清除（只要您在某处没有对它们的额外强引用）。在 viewDidUnload 中，当视图显示在屏幕上时，您需要对可以重新加载的数据的强引用为零。

执行 viewDidUnload 与 dealloc 不同。如果您正在管理必须释放（或在 KVO 或通知中心注册）的资源，您也需要执行该工作。请注意，在这些情况下，您必须在 viewDidUnload 和 dealloc 中都执行它们（视情况而定）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T04:08:19.233

ARC不能回答，但是viewdidUnload不代表VC被释放。这意味着视图正在被释放。要强制它，您可以尝试使用 NavigationController，推送几个视图，然后在模拟器中发送一些内存警告。viewDidUnload 将为不是顶部的 vcs 调用。

Re: ARC，你当然可以有一个 dealloc 方法，它会在 vc 发布时调用。根本不叫超级。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T01:28:13.960

你可以加：

```
-(void)dealloc { 
    // If you are using ARC remove the line below
    [super dealloc]
} 
```

并放置一个断点，它会告诉你它什么时候被释放。dealloc 方法也将被 ARC 调用，只要确保你不要在 ARC 中调用 [super dealloc]。

# php - Google Maps API / php 生成的链接

> ID：10875147
> 
> 赞同：0
> 
> 时间：2012-06-04T00:38:06.620
> 
> 标签：php, mysql, xml, google-maps

我四处寻找解决方案，但还没有完全找到我正在寻找的东西。

基本上我有一个谷歌地图，其中有几个从 mysql 表生成的标记，然后转换为 xml 以为每个地址创建一个单独的标记。

我想为每个标记创建一个显示在信息框中的单独链接。
目前，当单击标记时，信息框仅显示地址但没有链接。

我已经能够创建一个出现在信息窗口中的链接，但这是每个标记的相同链接。创建的链接必须指向另一个带有地址 ID 的 php 文件，例如：

```
www.mysite.com/newpage.php?ID=address_ID_from_table 
```

提前致谢！

这是当前代码：

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">
    //<![CDATA[

var customIcons = {
      Highfield: {
        icon: 'http://labs.google.com/ridefinder/images/mm_20_green.png',
        shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
      },
      bar: {
        icon: 'http://labs.google.com/ridefinder/images/mm_20_green.png',
        shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
      }
    };

function load() {
      var map = new google.maps.Map(document.getElementById("map"), {
        center: new google.maps.LatLng(50.929602,-1.392002),
        zoom: 14,
        mapTypeId: 'roadmap'
      });
      var infoWindow = new google.maps.InfoWindow;

      // Change this depending on the name of your PHP file
      downloadUrl("phpsqlajax_genxml2.php", function(data) {
        var xml = data.responseXML;
        var markers = xml.documentElement.getElementsByTagName("marker");
        for (var i = 0; i < markers.length; i++) {
          var name = markers[i].getAttribute("name");
          var address = markers[i].getAttribute("address");
          var type = markers[i].getAttribute("type");
          var point = new google.maps.LatLng(
              parseFloat(markers[i].getAttribute("lat")),
              parseFloat(markers[i].getAttribute("lng")));
          var html = "<b>" + name + "</b> <br/>" + address;
          var icon = customIcons[type] || {};
          var marker = new google.maps.Marker({
            map: map,
            position: point,
            icon: icon.icon,
            shadow: icon.shadow
          });
          bindInfoWindow(marker, map, infoWindow, html);
        }
      });
    }

    function bindInfoWindow(marker, map, infoWindow, html) {
      google.maps.event.addListener(marker, 'click', function() {
        infoWindow.setContent(html);
        infoWindow.open(map, marker);
      });
    }

    function downloadUrl(url, callback) {
      var request = window.ActiveXObject ?
          new ActiveXObject('Microsoft.XMLHTTP') :
          new XMLHttpRequest;

      request.onreadystatechange = function() {
        if (request.readyState == 4) {
          request.onreadystatechange = doNothing;
          callback(request, request.status);
        }
      };

      request.open('GET', url, true);
      request.send(null);
    }

    function doNothing() {}

    //]]>

  </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T05:56:05.157

解决方案非常简单：只需将 html 内容生成器移动到 bindInfoWindow 方法中。

这是更新的代码：

```
 <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">
    //<![CDATA[

var customIcons = {
      Highfield: {
        icon: 'http://labs.google.com/ridefinder/images/mm_20_green.png',
        shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
      },
      bar: {
        icon: 'http://labs.google.com/ridefinder/images/mm_20_green.png',
        shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
      }
    };

function load() {
      var map = new google.maps.Map(document.getElementById("map_canvas"), {
        center: new google.maps.LatLng(50.929602,-1.392002),
        zoom: 14,
        mapTypeId: 'roadmap'
      });
      var infoWindow = new google.maps.InfoWindow;

      // Change this depending on the name of your PHP file
      downloadUrl("phpsqlajax_genxml2.php", function(data) {
        var xml = data.responseXML;
        var markers = xml.documentElement.getElementsByTagName("marker");
        console.log(markers);
        for (var i = 0; i < markers.length; i++) {
          var type = markers[i].getAttribute("type");
          var point = new google.maps.LatLng(
              parseFloat(markers[i].getAttribute("lat")),
              parseFloat(markers[i].getAttribute("lng")));
          var icon = customIcons[type] || {};
          var marker = new google.maps.Marker({
            map: map,
            position: point,
            icon: icon.icon,
            shadow: icon.shadow
          });
          marker.data = markers[i];
          bindInfoWindow(marker, map, infoWindow);
        }
      });
    }

    function bindInfoWindow(marker, map, infoWindow) {
      google.maps.event.addListener(marker, 'click', function() {
        var name = marker.data.getAttribute("name");
        var address = marker.data.getAttribute("address");
        var html = "<b>" + name + "</b> <br/>" + address+"<br/><a href='www.mysite.com/newpage.php?ID="+name+"'>download</a>";
        infoWindow.setContent(html);
        infoWindow.open(map, marker);
      });
    }

    function downloadUrl(url, callback) {
      var request = window.ActiveXObject ?
          new ActiveXObject('Microsoft.XMLHTTP') :
          new XMLHttpRequest;

      request.onreadystatechange = function() {
        if (request.readyState == 4) {
          request.onreadystatechange = doNothing;
          callback(request, request.status);
        }
      };

      request.open('GET', url, true);
      request.send(null);
    }

    function doNothing() {}

    //]]>

  </script> 
```

# ios - 当视图控制器正在执行 viewDidUnload 时，是否意味着它正在被释放？

> ID：10875163
> 
> 赞同：0
> 
> 时间：2012-06-04T00:41:34.957
> 
> 标签：ios, memory-management, uiviewcontroller

> **可能重复：**
> [保留/强类成员变量会在卸载视图控制器时自动清理吗？](https://stackoverflow.com/questions/10875145/will-the-retained-strong-class-member-variables-got-automatically-cleand-up-on)

正如问题所示，当 viewDidUnload 被调用时，是否意味着视图控制器正在被释放？如果是这种情况，是否意味着在视图控制器中分配的所有成员变量（特别是强变量）都会自动释放？

# testing - 将 HP QC 缺陷数据导出到 Excel

> ID：10875164
> 
> 赞同：6
> 
> 时间：2012-06-04T00:41:34.927
> 
> 标签：testing, qa, hp-quality-center

在工作中，一位同事将缺陷数据从 hp qc 复制并粘贴到 excel 中，这需要她的时间……这让我发疯！

无论如何要从 hp qc 导出数据到 excel 吗？只需要转储缺陷列表及其相关字段，如 ID、日期、摘要、分配给等......

一定有办法导出到excel...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T06:23:01.937

您可以从 QC 本身导出到 excel。

缺陷 => 导出 => 全部/选定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T09:47:41.010

是的，肯定有办法导出这些缺陷。

1.  过滤掉您需要的所有缺陷。或者您可以突出显示您需要的内容。

2.  在菜单栏中（据我所知，它是“缺陷”菜单项，但我可能错了）-> 有导出选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-14T11:23:26.107

我不确定这是否会有所帮助。要下载过滤的缺陷，可以转到缺陷-> 分析（在顶部菜单上）-> 项目报告-> 已选择报告-> 然后选择您需要的格式。

对于 excel 提取，缺陷-> 缺陷（在顶部菜单上）-> 导出

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-24T08:12:37.280

所有有效选项，我将再添加一个：分析菜单中的 Excel 查询选项。

仪表板 > 分析视图 > 添加按钮 > 新建 Excel 报告

您必须提供报告的名称，然后确认。

在查询窗口中，您可以键入查询。如何加入表格？在帮助 > 文档库 > HP ALM 项目数据库参考中查阅数据库方案

您可以添加后处理来构建 excel。

添加的每个查询都会出现在 Excel 中的新选项卡中。

通过这种方式，您可以编写相当复杂的 Excel 报告。

但请注意：添加后处理时，您会创建一个 xlsm 文件，并且需要启用宏。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-19T16:07:28.437

我编写了一个代码，它将连接到 ALM 12.53 并将缺陷或任何其他报告导出到 Excel 中。您需要在 Excel 2013 中检查 Tool=>Reference..OTA COM 类型库。我遇到了 HTML 代码问题，因此我在下面添加了几行以从 Excel 字段中删除 HTML 标记。

```
Sub Main()
Const QCADDRESS = "http://xxx:xxx/qcbin"
Const DOMAIN = "xxxx"
Const PROJECT = "xxxx"
Const QCUSR = "xxxx"
Const QCPWD = "xxxx"

Dim QCConnection, com, recset
Dim XLS, Wkb, Wks, i

Set QCConnection = CreateObject("TDApiOle80.TDConnection")

QCConnection.InitConnectionEx QCADDRESS
QCConnection.Login QCUSR, QCPWD
QCConnection.Connect DOMAIN, PROJECT
QCConnection.IgnoreHtmlFormat = True
Set com = QCConnection.Command

com.CommandText = "SELECT BUG.BG_BUG_ID /*Defect.Defect ID*/ as     defectid  , " _
                & "BUG.BG_STATUS /*Defect.State*/ as state ," _
                & "BUG.BG_USER_TEMPLATE_15 /*Defect.Root Cause*/ RootCause, " _
                & "BUG.BG_USER_02 /*Defect.Assigned To*/ as AssignedTo, " _
                & "BUG.BG_DETECTION_DATE /*Defect.Detected on Date*/ as detectiondate, " _
                & "BUG.BG_USER_01 /*Defect.Application Involved*/  as ApplicationInvolved, " _
                & "BUG.BG_SUMMARY /*Defect.Summary*/  as summary   , " _
                & "BUG.BG_DESCRIPTION /*Defect.Description*/ as description, " _
                & "BUG.BG_SEVERITY /*Defect.Severity*/ as  severity , " _
                & "BUG.BG_DETECTED_BY /*Defect.Submitter*/ as submitter , " _
                & "BUG.BG_RESPONSIBLE /*Defect.Assignee*/    as Assignee, " _
                & "BUG.BG_USER_04 /*Defect.Workstream*/   as workstream , " _
                & "BUG.BG_USER_03 /*Defect.Commited Resolution Date*/ as CommitedResolutionDate, " _
                & "BUG.BG_USER_05 /*Defect.Vendor Ticket Number*/   as Vendorticketnumber, " _
                & "BUG.BG_DEV_COMMENTS /*Defect.Comments*/ as comments " _
                & "FROM        BUG /*Defect*/ " _
                & "where    BG_Status = 'Cancelled' " _
                & "order by   BUG.BG_DETECTION_DATE,BUG.BG_USER_TEMPLATE_15"

Set recset = com.Execute

Set XLS = CreateObject("Excel.Application")
XLS.Visible = False
QCConnection.IgnoreHtmlFormat = True
Set Wkb = XLS.Workbooks.Add
Set Wks = Wkb.Worksheets(1)
'Wks.Name "DataFromBugQuery"

i = 1

Wks.Cells(i, 1).Value = "Defect ID"
Wks.Cells(i, 2).Value = "State"
Wks.Cells(i, 3).Value = "Root Cause"
Wks.Cells(i, 4).Value = "Assigned To"
Wks.Cells(i, 5).Value = "Detection Date"
Wks.Cells(i, 6).Value = "Application Involved"
Wks.Cells(i, 7).Value = "Summary"
Wks.Cells(i, 8).Value = "Description"
Wks.Cells(i, 9).Value = "Severity"
Wks.Cells(i, 10).Value = "Submitter"
Wks.Cells(i, 11).Value = "Assignee"
Wks.Cells(i, 12).Value = "Workstream"
Wks.Cells(i, 13).Value = "Commited Resolution Date"
Wks.Cells(i, 14).Value = "Vendor Ticket Number"
Wks.Cells(i, 15).Value = "Comments"

If recset.RecordCount > 0 Then
i = 2
recset.First
Do While Not (recset.EOR)

Wks.Cells(i, 1).Value = recset.FieldValue(0)
Wks.Cells(i, 2).Value = recset.FieldValue(1)
Wks.Cells(i, 3).Value = recset.FieldValue(2)
Wks.Cells(i, 4).Value = recset.FieldValue(3)
Wks.Cells(i, 5).Value = recset.FieldValue(4)
Wks.Cells(i, 6).Value = recset.FieldValue(5)
Wks.Cells(i, 7).Value = recset.FieldValue(6)
Wks.Cells(i, 8).Value = recset.FieldValue(7)
Wks.Cells(i, 9).Value = recset.FieldValue(8)
Wks.Cells(i, 10).Value = recset.FieldValue(9)
Wks.Cells(i, 11).Value = recset.FieldValue(10)
Wks.Cells(i, 12).Value = recset.FieldValue(11)
Wks.Cells(i, 13).Value = recset.FieldValue(12)
Wks.Cells(i, 14).Value = recset.FieldValue(13)
Wks.Cells(i, 15).Value = recset.FieldValue(14)

Dim r As Range
Wks.Cells(i, 8).NumberFormat = "@"  'set cells to text numberformat
Wks.Cells(i, 15).NumberFormat = "@"
With CreateObject("vbscript.regexp")
.Pattern = "<[^>]+>|;"
.Global = True
 For Each r In Wks.Cells(i, 8)
 r.Value = .Replace(r.Value, "")

Next r
For Each r In Wks.Cells(i, 15)
r.Value = .Replace(r.Value, "")
Next r
End With

Text = Wks.Cells(i, 8).Value
Wks.Cells(i, 8).Value = Replace(Text, "&nbsp", "")
Text = Wks.Cells(i, 8).Value
Wks.Cells(i, 8).Value = Replace(Text, "&quot", "'")

Text = Wks.Cells(i, 15).Value
Wks.Cells(i, 15).Value = Replace(Text, "&nbsp", "")
Text = Wks.Cells(i, 15).Value
Wks.Cells(i, 15).Value = Replace(Text, "&ltv6ucbs&gt", "")

i = i + 1
recset.Next
Loop

Wkb.SaveAs "C:\Users\xxxx\Downloads\Files\Cancelled_Defects.xls"
End If

Wkb.Close
XLS.Quit

QCConnection.Disconnect

Set recset = Nothing
Set com = Nothing
Set QCConnection = Nothing
Set XLS = Nothing
Set Wkb = Nothing
Set Wks = Nothing
End Sub 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-09T05:16:35.673

1.登录HP QC

2.转到`defects`（左侧菜单）

3.过滤你的缺陷

4.转到第一行的缺陷菜单

5.单击并选择`Export`按钮

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-05-13T15:21:16.320

您可以过滤并选择缺陷，单击其中`Defects --> Export -->`一个`ALL`或`Selected`保存文件。

我这里还有一个问题，比如..除了 XLS 格式之外，还有什么方法可以保存文件以保存为 CSV 或 XML 格式。有人可以指导我..谢谢

# database - Boyce Codd 分解后的剩余函数依赖关系？

> ID：10875166
> 
> 赞同：3
> 
> 时间：2012-06-04T00:42:11.510
> 
> 标签：database, normalization, database-normalization, decomposition

这个分解示例是在课堂上给出的，但是解决方案令人困惑，因为它似乎留下了一些 FD 未解决的问题。请确认 3) 下面是在 BCNF 中，还是不能放入 BCNF？

```
Let R be a relation schema, with schema(R) = {C,T,H,R,S,G}

set of FDs F over R :
C->T
HR->C
HT->R
CS->G
HS->R 
```

分解：

```
1) C T H R S G
2) C T      C H R S G
3) C T      H R C       H R S G 
end. (Not further decomposed.) 
```

在 3) HRSG 包含属性 R 和 G，但似乎不满足 ht->r 或 cs->g。

ht->r 打折，因为我们在 HRSG 中没有 t cs->g 打折，因为我们在 HRSG 中没有 c

是否有一条规则，如果函数依赖的 LHS 包含不在关系中的属性，则 FD 不适用？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:52:10.340

FD 仍然适用于整体数据库设计。

每个 FD 始终是某些业务规则的表达。所有规定的业务规则始终适用，无论它们是在数据库模式的 1 表版本还是在其分解版本上强制执行。但是，将它们表示***为 FD***要求 FD 中涉及的所有属性都***出现在同一个 relvar 中***（因为这就是它们的发明方式：作为表达适用于***关系***模式的规则的一种方式（请注意，它***没有***说“数据库模式”在这里）。逻辑结果是 FD 根本无法表达“跨越”多个关系模式的规则。其逻辑结果*是*在新版本中，“分解关系模式”将/可能导致某些 FD 变得无法表达（***不是*“不适用”**）是很正常的。

(1) 在分解/归一化为 BCNF 之后仍然可以表达的 FD，可以通过将 FD 的 LHS 声明为关系模式的键来“实现”。

(2) 在分解的模式中变得无法表达的 FD 必须以数据库约束的形式在整个数据库设计中恢复。这个“数据库约束”与（1）中的那些 FD 对应的键约束非常相似，因为这些数据库约束也是某种“键”，它们只是不是数据库模式中关系的键，相反，它们是可在数据库模式中定义的“虚拟”关系（也称为“视图”）的关键。此视图是所涉及的关系模式的 JOIN（因此，“从分解的部分重新组合”）的投影（恰好在 FD 任一侧提到的属性上）。

这是很多话，可能很难理解，但过程是（对于 cs->g）：将分解的关系模式重新连接在一起（通过 HR，再次给我们一个关系 HRCSG），投影到涉及的属性FD（因此，向下投射到 CSG），在这种关系中，CS 必须是关键。

请注意，我在这里说“关键”是因为不能允许相同的 CS 值组合以不同的 G 值出现。从某种意义上说，这是您可以对任何 DBMS 做出的声明以强制执行此类规则。如果 DBMS 可以有效地做到这一点，数据库设计会容易得多 :-) 这意味着规则的执行，并确保没有数据会违反此规则，现在由您决定。

Fortunately, in practice these cases are not too numerous, and most of the time you will notice that the vast majority of the FD's in your original version, end up simply as keys declared on BCNF tables.

# php - 返回假阴性的函数

> ID：10875167
> 
> 赞同：0
> 
> 时间：2012-06-04T00:42:18.287
> 
> 标签：php

我正在将手机游戏的游戏状态保存在 MySql 数据库中。信息已成功保存，但它显示保存游戏状态时出错。我仍在适应 php，不知道这是从哪里来的。

PS 我知道 SQL 语句是不安全的。现在，我只是让基础知识启动并运行，因为语句和表格本身很快就会改变。

传入 json 的清单：

```
 } else if ($tag == 'save_game_state') {
    $email = $_POST['email'];
    $virtumon = $_POST['monster'];
    $qty = $_POST['qty'];
    $exp = $_POST['exp'];
    $user = $db->saveGameState($email, $monster, $qty, $exp);
        if ($user) {
            $response["success"] = 1;
            $response["The game state has been successfully saved"];
         echo json_encode($response);
        } else {
            // user failed to store
            $response["error"] = 1;
            $response["error_msg"] = "Error occured in saving the game state";
            echo json_encode($response);
        } 
```

将信息输入数据库并返回成功/失败。

```
 public function saveGameState($email, $monster, $qty, $exp) {

    $result = mysql_query("INSERT INTO user_profiles(email, monster, qty, exp) VALUES('$email', '$monster', '$qty', '$exp')") or die(mysql_error());
    // TODO check for successful store
    $success = mysql_query("SELECT email, monster, qty, exp FROM user_profiles WHERE email = '$email' AND monster= '$monster' AND qty = '$qty' AND exp = '$exp'");
   if ($success) {
            return mysql_fetch_array($success);
    } else {
       return false;
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T00:48:55.273

绝对不应该`SELECT`在你`INSERT`检查它是否有效之后运行。只需检查`$result`运行后的内容。从

从[http://php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)：

> 对于其他类型的 SQL 语句，INSERT、UPDATE、DELETE、DROP 等，mysql_query() 在成功时返回 TRUE，在错误时返回 FALSE

尝试

```
$result = mysql_query("INSERT INTO user_profiles(email, monster, qty, exp) VALUES('$email', '$monster', '$qty', '$exp')") or die(mysql_error());
return $result; 
```

如果要返回刚刚插入的内容，请在运行后调用另一个函数`saveGameState`。但是，如果您已经拥有这些值，则可以使用这些值而不是再次查询数据库。

您还应该研究[PDO](http://www.php.net/manual/en/intro.pdo.php)的使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T00:50:02.987

您正在检查您的 select 语句是否成功。您应该检查插入是否成功。

```
if ($result = mysql_query(INSERT INTO user_profiles(email, monster, qty, exp) VALUES('$email', '$monster', '$qty', '$exp') or die(mysql_error())) {
    if ($success = mysql_query("SELECT email, monster, qty, exp FROM user_profiles WHERE email = '$email' AND monster= '$monster' AND qty = '$qty' AND exp = '$exp'") or die(mysql_error())) {
        if (mysql_num_rows($success) > 0) return mysql_fetch_assoc($success);
    }
}
else { return false; } 
```

# c# - 在 VS 2010 C# Forms 应用程序中添加 .Lib 文件有困难

> ID：10875171
> 
> 赞同：0
> 
> 时间：2012-06-04T00:43:37.483
> 
> 标签：c#, visual-studio-2010, propertysheet

首先，我对编程很生疏。我正在尝试将外部库 (FFMpeg) 链接到 VS 2010 中的 C# 表单应用程序，但我遇到了困难。所有迹象都指向使用“属性表”，但在我在网上找到的示例中（例如[http://www.youtube.com/watch?v=5AmwIwedTCM](http://www.youtube.com/watch?v=5AmwIwedTCM)），我的看起来比其他所有人都空。这就是我的样子：http: [//imgur.com/GcpJn](http://imgur.com/GcpJn)。是我做错了什么，还是我过去弄乱了我的财产表，现在我正在承受后果？请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T00:45:53.533

您不能直接将 .lib 文件添加到 C# 项目。您要么必须 P/Invoke 它们，为 COM 程序集创建互操作，要么使用 C++/CLI 创建托管包装器。

# python - Python C API - 使用比较函数会导致“分段错误”

> ID：10875176
> 
> 赞同：1
> 
> 时间：2012-06-04T00:44:33.700
> 
> 标签：python, c, api

我目前正在尝试学习如何用 C 编写 Python 扩展，一切似乎都进展顺利。但是，当我尝试使用比较函数时，它们都会导致 Segmentaion 错误。例如：

```
#include "Python.h"

int test(void) {
    int result;
    printf("Before compare...\n");
    result = PyObject_Compare(PyInt_FromLong(1), PyInt_FromLong(3));
    printf("result= %d\n", result);
    return 0;   
} 
```

从 Python执行`test()`（我使用 ctypes）给出以下输出：

```
Before compare...
Segmentation fault 
```

这发生在我身上，用于其他比较功能，例如：`PyObject_cmp`...等

任何帮助表示赞赏，谢谢。

### 更多信息：

我首先将文件（test.c）编译为共享库：

```
$> python-config --cflags
-I/usr/include/python2.7 -I/usr/include/python2.7 -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes
$> python-config --ldflags
-L/usr/lib/python2.7/config -lpthread -ldl -lutil -lm -lpython2.7 -Xlinker -export-dynamic -Wl,-O1 -Wl,-Bsymbolic-functions

$> gcc -c $(python-config --cflags) ./test.c -o test.o
$> gcc -shared  ./test.o  $(python-config --ldflags) -o libtest.so 
```

然后我像这样从 Python 启动函数：

```
import ctypes
testlib = ctypes.CDLL('./libtest.so')

testlib.test() 
```

### 编辑：

使用 Viktor 给出的测试

```
$> gcc -o dlltest test.c -ldl
$> gdb dlltest
(gdb) run
Starting program: dlltest 
[Thread debugging using libthread_db enabled]
Cannot find new threads: generic error
(gdb) 
```

所以我这样做了：

```
$> LD_PRELOAD=libpthread-2.13.so gdb dlltest
(gdb) run
Starting program: dlltest
[Thread debugging using libthread_db enabled]
Before compare...
result= -1
[Inferior 1 (process 3274) exited normally]
(gdb) 
```

### 编辑2：

```
>$ gdb --args python frompython.py
(gdb) run
Starting program: /usr/bin/python frompython.py
[Thread debugging using libthread_db enabled]
Before compare...

Program received signal SIGSEGV, Segmentation fault.
0x080a855b in PyObject_Compare ()
(gdb) backtrace
#0  0x080a855b in PyObject_Compare ()
#1  0x005225d8 in test () at ./testmod.c:29
#2  0x005181ca in ffi_call_SYSV ()
   from /usr/lib/python2.7/lib-dynload/_ctypes.so
#3  0x00517eff in ffi_call () from /usr/lib/python2.7/lib-dynload/_ctypes.so
#4  0x00510312 in _ctypes_callproc ()
   from /usr/lib/python2.7/lib-dynload/_ctypes.so
#5  0x0050788d in ?? () from /usr/lib/python2.7/lib-dynload/_ctypes.so
#6  0x0805dc31 in PyObject_Call ()
#7  0x080f81c1 in PyEval_EvalFrameEx ()
#8  0x080fd804 in PyEval_EvalCodeEx ()
#9  0x080fe177 in PyEval_EvalCode ()
#10 0x0811acd0 in ?? ()
#11 0x0811b8e9 in PyRun_FileExFlags ()
#12 0x0811c4cc in PyRun_SimpleFileExFlags ()
#13 0x0812c7c6 in Py_Main ()
#14 0x0805da0b in main ()
(gdb) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T07:40:46.707

“test()”函数中没有 Python 解释器的初始化（没有 Py_Initialize 调用）。

PyInt_FromLong() 返回指向内部数组的指针，在您的情况下未初始化。因此，您得到一些无效指针并将其传递给 Py_Compare() 函数会使解释器崩溃。

有关初始化的详细信息，请参见此处：http: [//docs.python.org/c-api/init.html#initializing-and-finalizing-the-interpreter](http://docs.python.org/c-api/init.html#initializing-and-finalizing-the-interpreter)

至少尝试在 test() 函数的开头添加“Py_Initialize()”调用。

编辑：

有趣的是，如果您使用此程序从 C 运行 libtest.test，GDB 的堆栈跟踪将是什么：

```
#include <dlfcn.h>

typedef int (*fcn)();

int main()
{
    void* dll = dlopen("libtest.so", RTLD_LAZY);

    /* dlerror checks here */

    fcn Test = (fcn)dlsym(dll, "test");

    Test();

    dclose(dll);

    return 0;
} 
```

编辑2：

1.  编译测试（gcc -o dlltest test.c -ldl）

2.  运行“gdb dlltest”

3.  在 gdb 提示符下键入命令“运行”

4.  看看会不会崩溃

5.  如果是，请在 gdb 的提示符中键入回溯。

编辑3：

目前尚不清楚坠机地点。尝试添加“fflush(stdout);” 在每次 printf() 调用以确保打印错误之后。

如果“result= -1”出现在基于 python 的应用程序中，则错误在 ctypes 中，而不是在 libtest.so 中。

# xml - 使用 xml-conduit 的脆弱和冗长的代码

> ID：10875179
> 
> 赞同：4
> 
> 时间：2012-06-04T00:45:09.220
> 
> 标签：xml, haskell, conduit

我使用[XML-conduit](http://hackage.haskell.org/package/xml-conduit)构建了一个 GPX 解析器，并且遇到了用于识别元素和跳过不需要的标签的代码过于冗长和脆弱的问题。

**识别元素（一个小烦恼）**

我通过仅比较`nameLocalName`s 来明确忽略名称空间。我想正确的方法是将正确的命名空间硬编码到程序中，并让一个助手构造我的元素名称以便在`tag*`函数中进行比较？这有点烦人，因为我必须支持至少两个不同的名称空间（GPX 1.1 和 1.0），它们非常相似，以至于我的使用不需要更改代码。

**跳过元素**

GPX 较大，自定义扩展集较大。因为我正在构建的工具需要有限的信息，所以我决定忽略特定标签及其所有子元素。例如：

```
<trkpnt lat="45.19843" lon="-122.428">
    <ele>4</ele>
    <time>...</time>
    <extensions>
         ...
    </extensions>
</trkpnt> 
```

为了忽略`extensions`带有大量子元素的类似标签，我制作了一个接收器，它会消耗元素直到结束元素`Event`：

```
skipTagAndContents :: (MonadThrow m) => Text -> Sink Event m (Maybe ())
skipTagAndContents n = tagPredicate ((== n) . nameLocalName)
                                    ignoreAttrs
                                    (const $ many (skipElements n) >> return ())

skipElements t = do
        x <- await
        case x of
                Just (EventEndElement n) | nameLocalName n == t -> Done x Nothing
                Nothing -> Done x Nothing
                _ -> return (Just ()) 
```

似乎应该有一个`tag*`变体可以为我做到这一点（在没有消耗所有孩子的情况下成功）但是没有表明我缺少一个简单的组合器或应该发送一个补丁的事实 - 是它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T03:44:12.087

如果您根本不使用命名空间，最简单的方法可能是完全剥离它们，使用类似`Data.Conduit.List.map stripNamespace`.

坦率地说，我自己并不经常使用流媒体接口。我几乎所有的工作都涉及到 DOM ( `Text.XML`) 或游标接口。所以完全有可能缺少组合子。但是在这种情况下，我相信您可以大大简化实现，因为`tagPredicate`不应该让内部`Sink`读取超过元素的末尾。所以你可以重写`skipTagAndContents`为：

```
tagPredicate ((== n) . nameLocalName) ignoreAttrs (const Data.Conduit.List.sinkNull) 
```

您应该在将其放入之前对其进行测试，我可能会错误地记住流接口的一些细节。

# javascript - Javascript - 链接隐藏脚本需要修改

> ID：10875186
> 
> 赞同：-2
> 
> 时间：2012-06-04T00:46:55.960
> 
> 标签：javascript, redirect, masking, cloaking

以下脚本将我的会员扩展添加到我页面上的每个 url。例如，如果`http://www.Google.com/`在我的页面某处...将此脚本添加到页面将自动将 url 更改为`http://adf.ly/xxxxxx/http://www.Google.com/`- 这适用于页面上的每个 url...

如果页面上的 url 已经超链接，则此脚本非常有用，因为链接文本保持不变，但目标 url 现在有我的附属扩展。

我的问题是......我如何修改这个脚本以使其原始网址（非超链接）仍然可以显示为原始网址，但我的附属扩展名已添加到目的地？更好的说法是，我需要这个脚本来超链接页面上的所有原始 url。我需要它，以便如果我的`http://www.Google.com`页面上有原始 url，脚本会将目标更改为`http://adf.ly/xxxxxx/http://www.Google.com/`--但查看器仍然只能看到`http://www.Google.com`.

同样，这个脚本已经可以很好地处理超链接，因为它只影响 URL，而不是链接文本。我只需要它来隐藏/屏蔽/超链接所有原始 url，以便观众仍然看到原始 URL 目标，而不是带有我的附属扩展的新目标。

在此先感谢您，这是示例 HTML 代码：

```
<script type="text/javascript">
    onmousemove = function adfly() {
        adfly_id = 'xxxxxx';
        for(var i = 0; i < document.links.length; i++) {
            var hrefer = document.links[i].href;
            if(hrefer.match("adf.ly") || hrefer.match("javascript:") || hrefer.match("#")) {
                document.links[i].href = document.links[i].href;
            } else {
                document.links[i].href = 'http://adf.ly/' + adfly_id + '/' + document.links[i].href;
            }
        }
    }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T04:59:14.387

你可以这样做：

1.  遍历文本节点（或您感兴趣的子集），找到包含与[URL 正则表达式](https://stackoverflow.com/questions/5461702/regex-to-find-url-in-a-text)匹配的节点。
2.  为以下对象创建新节点：
    *   文本部分
    *   锚点/链接
3.  将这些新节点插入 DOM（删除/替换原始文本节点）

这将是一个与您现有的通过 document.links 的循环分开的循环。

最后但同样重要的是：警惕 XSS 漏洞！

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-10-01T15:13:15.643

下面的锚标记在`href`属性中显示“google.fr”，但由于`onclick`，单击链接会将您带到那里列出的站点。

```
 <a title="google" href="http://google.fr/whatpeopleseeonrollover" onclick="this.href='http://yahoo.fr/wherepeoplegoforreal'">http://google.fr/whatpeoplethinktheygo</a>
```

您可以使用类似的方法来重定向页面上的链接。

# iphone - 为什么调用 Self 来访问 Class 自己的属性？

> ID：10875187
> 
> 赞同：0
> 
> 时间：2012-06-04T00:46:58.357
> 
> 标签：iphone, objective-c, xcode, ipad, properties

我对某个概念有些困惑。问我问题的最好方法是用一个例子来说明它。现在在下面的代码中，我声明了一个名为 loan 的属性，并合成了这个属性。现在这可能看起来像一个小问题，但我将值“250.00”分配给贷款。我在网上看到过可能会执行“self.loan = 250.00;”的教程 VS 我的“贷款 = 250.00;” 两种方式似乎都完成了同样的事情。但是为什么人们使用“self.propertyName”来访问属性，当使用属性名称本身就足够了？

```
//ClassA.h
@interface ClassA: UIViewController
@property double loan;
@end

//ClassA.m
@implementation ClassA
@synthesize loan;

-(void)doSomething{
  loan = 250.00;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T00:50:37.660

`@synthesize`还会为您的属性生成一个底层实例变量，不幸的是，默认情况下它的名称与属性相同。

这意味着当您使用 时`loan = 250.0`，您实际上是直接访问底层实例变量，而不是通过。属性访问器。如果您将`@synthesize`线路更改为：

```
@synthesize loan = _loan; 
```

现在您的代码不再编译，您必须使用其中任何一个`self.loan`来访问它。生成的属性访问器，或`_loan`访问底层实例变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T00:52:27.860

它们并不完全相同。

```
self.loan = 250.00; 
```

真的是简写

```
[self setLoan:250.00]; 
```

这是一个方法调用；而`loan = 250.00`只是将该值直接写入内存的适当部分。

例如，当另一段代码使用 Key-Value Observing 来监控贷款属性的变化时，这种差异很重要。通过调用`setLoan:`，将触发所有适当的通知。通过`loan`直接设置，它们不会。

此外，如果您不使用自动引用计数，set 方法将确保保留新值并正确释放旧值。（如果您使用 ARC，无论哪种方式都会自动处理。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T00:49:25.967

这是因为`self.loan`引用了属性，而`loan`只是引用了基础变量。它是具有`retain`,`copy`或其他修饰符的引用类型的关键。

# javascript - Extjs LoadPage：如何减少后台获取uri请求的数量

> ID：10875190
> 
> 赞同：2
> 
> 时间：2012-06-04T00:47:15.887
> 
> 标签：javascript, extjs, extjs4

当用户单击排序时，我试图加载/刷新页面一次。目前页面在后台多次获取数据，但在视觉上数据显示完全正确，数据显示没有问题。

我担心的是性能调整，我试图减少一次对数据的后台获取请求。（当我使用 firbug 控制台并转到 >net tab >ALL 时，我注意到在时钟排序时有几个 Get url 请求）.. 我会宁愿做一次或两次）

我正在考虑添加一个计数器以在计数器达到一两个时切断。下面的代码。

当用户点击排序时，最好的方法是什么？

```
 this.view.panel.store.addListener("load", dataLoadedCallback);  

    var currentPage = this.view.panel.store.getPageFromRecordIndex(visibleStart);

container.view.panel.store.loadPage(currentPage);  

 // Call Back function for addListener
    function dataLoadedCallback(dataStore, records, success){

 //I have some code hereto handle the callback

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T05:57:42.437

这不应该发生。商店的数据应该加载一次以进行初始显示和每次排序（当然，如果你是远程排序的话）。我想知道您是否在强制更多负载的排序事件上设置了额外的侦听器？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T11:55:45.760

要添加到@DmitryB 答案中-如果您添加侦听器的第一行代码被多次调用-您将有多个`load`处理程序，并且您的函数将执行一次以上。

如果您需要确保只调用一次处理程序 - 检查`options`addListener 中的参数并传递`{ single: true }`

# c++ - 嵌套循环中的 OpenMP 数组索引

> ID：10875191
> 
> 赞同：0
> 
> 时间：2012-06-04T00:47:21.443
> 
> 标签：c++, for-loop, openmp

我在尝试使用 OpenMP 并行化嵌套循环时遇到问题 - 它只是用于玩耍和习惯的演示代码。

```
int* myresults = new int[1000]   
#pragma omp parallel
{
    #pragma omp for 
    for(int z=0; z<=mainCount;z++)
    {
        results[n++] = myfunc(z,0); //compute something

        for(int i=0;i<=secondCount;i+=5)
        {
            results[n++]=myfunc(z,i);
        }
    }
} 
```

我的问题是我的结果数组的索引。我假设由于 OpenMP 正在并行化他使用`results[]`两次或更多位置的第一个 for 循环，因为`results[n++]`会产生未定义的行为（因为不能保证 n 正确递增），我正确吗？

如何正确索引和存储我的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T06:26:41.360

`n`增加一次`myfunc(z,0)`和`1 + secondCount/5`次`myfunc(z,i)`。这意味着`n`应该`z * (2 + secondCount/5)`在外循环的每次迭代的开始。你应该像这样重写你的代码：

```
#pragma omp parallel for private(n)
for (int z = 0; z <= mainCount; z++)
{
    n = z * (2 + secondCount/5);

    results[n++] = myfunc(z, 0);

    for (int i = 0; i <= secondCount; i += 5)
        results[n++] = myfunc(z, i);
} 
```

# jquery - jQuery选择以前的这个？

> ID：10875195
> 
> 赞同：0
> 
> 时间：2012-06-04T00:48:38.977
> 
> 标签：jquery

jsfiddle 调试：http:
[//jsfiddle.net/ZpsCX/](http://jsfiddle.net/ZpsCX/)

**较新的更新：**
这是 html

```
<li>Something</li>
<div class='a'>
 <div class='x'>REMOVE</div>
</div> 
```

我试图通过转到父级然后上一个来删除 LI：

```
 $('.x').click(function(){
    $(this).parent().prev().remove();
 }); 
```

但如果我用这个

```
 $('.x').click(function(){
   if(bla bla bla){ // and it returns TRUE
     $(this).parent().prev().remove();
   }
 }); 
```

它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T01:13:02.387

固定：http: [//jsfiddle.net/ZpsCX/11/](http://jsfiddle.net/ZpsCX/11/)

我删除了 if 语句，因为它总是返回 true。您还需要包含 jQuery 并添加一个包装器 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T01:26:56.467

我稍微修改了你的小提琴。您需要确保其中包含 jQuery，然后还将您的代码包装在：

```
$(document).ready(function() {
 $('.x').click(function(){
  if(true){ // and it returns TRUE
   $(this).parent().prev().remove();
  }
 });
}); 
```

​您的原始代码将适用于此。

[http://jsfiddle.net/ZpsCX/4/](http://jsfiddle.net/ZpsCX/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T01:28:20.340

好的，既然您*终于*在小提琴中显示了完整的代码，我可以告诉您，问题是您在`this`尝试执行之前删除了引用的元素，`$(this).parent().prev().remove();`这不起作用，因为`this`没有离开后就没有父母了...

您需要按以下相反的方式进行操作：

```
$(".x").live("click", function(x) {
    // if clicked ".x" has no siblings it must be the last one
    // in the current group
    if ($(this).siblings(".x").length == 0) {
        $(this).parent().prev().remove();
    }
    $(this).remove();
}); 
```

[http://jsfiddle.net/ZpsCX/12/](http://jsfiddle.net/ZpsCX/12/)

请注意，li 元素应该属于 ul 或 ol，并且将 div 作为 li 的兄弟是无效的（尽管大多数浏览器都对此表示宽容并让您侥幸逃脱）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T01:29:09.823

您的代码不起作用的原因是因为 div`class = 'x'`没有嵌套在 li 标记内，因此对 .parent 的调用将永远找不到 li。

您可以将 div 嵌套在 li 中并使用以下代码：

HTML：

```
<ul>
    <li>
        Something
        <div class='a'>
            <div class='x'>REMOVE</div>
        </div>
    </li>
    <li>
        Something Else
        <div class='a'>
            <div class='x'>REMOVE</div>
        </div>
    </li>
</ul> 
```

查询：

```
$('.x').click(function(){
    $(this).parents('li').remove();
 });​ 
```

[JSFIDDLE 示例](http://jsfiddle.net/flynfish/QK64e/)

# mysql - 在 Join 期间将文本转换为 int（强制转换？）

> ID：10875196
> 
> 赞同：0
> 
> 时间：2012-06-04T00:48:40.910
> 
> 标签：mysql, sql, casting

我有一个看起来像这样的查询：

```
SELECT p.prodname, p.prodcode, o.vovalue, p.productid, i.imageprodid, c.vcstock, p.prodcatids, t.catname
FROM isc_products p
LEFT OUTER JOIN isc_product_variation_combinations c ON c.vcproductid = p.productid
LEFT OUTER JOIN isc_product_variations v ON v.variationid = c.vcvariationid
LEFT OUTER JOIN isc_product_variation_options o ON o.voptionid = c.vcoptionids
LEFT OUTER JOIN isc_product_images i ON i.imageprodid = p.productid
LEFT OUTER JOIN isc_categories t ON t.categoryid = p.prodcatids
WHERE c.vcstock >1
AND  i.imageprodid IS NULL
ORDER BY ca.catname 
```

我正在尝试检索列中的类别名称（t.catname）。由于 t.categoryid = p.prodcatids 的连接，它返回 NULL 值。

p.prodcatids 是文本 (utf8_general)，t.categoryid 是 int(11)。

如何将（转换？）p.prodcatids 转换为 int11，以便它加入 t.categoryid？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T00:58:19.857

```
CAST(p.prodcatids AS UNSIGNED) 
```

应该做的工作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T02:08:45.150

只是一些笔记。

您可以进行强制转换以获得所需结果的事实并不能替代拥有适当的数据结构。您应该让所有外键与主键的类型相同。特别是，这会对查询优化器造成严重破坏，并且通常会保证嵌套循环连接（效率最低的类型）。

此外，当您遇到这种情况时，从字符数据类型转换出来通常更准确。这是因为 cast 函数可能与其他字段不完全匹配。例如“100”不等于“100.00”。

然而，这引入了演员阵容失败的可能性。一些数据库，如 SQL Server，提供了 isnumeric 和 isdate 等函数来处理这种情况。其他人没有。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T00:57:46.953

如果这是在 mysql 中-您是否检查了转换和转换功能？[http://dev.mysql.com/doc/refman/5.0/en/cast-functions.html#function_cast](http://dev.mysql.com/doc/refman/5.0/en/cast-functions.html#function_cast)

# objective-c - 初始化模型对象时返回错误的最佳方法？

> ID：10875200
> 
> 赞同：0
> 
> 时间：2012-06-04T00:49:01.070
> 
> 标签：objective-c, ios

我有一个代表三角形的模型对象。有一些 init 方法采用不同的已知参数组合。然后它求解剩余的值（边长和角度）。目前，如果给定参数为 nil 或超出此三角形类型的适当范围，我的初始化程序将返回 nil。然而，为了向用户提供适当的反馈，控制器对象还必须检查不正确的输入值，例如角度 > 90 度等。这对我来说很臭，因为这些规则应该在模型中定义一次。所以我的想法是有一个 NSError 对象被设置为控制器应该向用户显示的字符串。我只是不确定将其传达给控制器的最佳方式。如果发生错误，我的 init 方法是否应该返回此 NSError 而不是 Triangle 实例？这似乎是错误的。或者我是否将一个指向 NSError 对象的指针作为参数传递给 init，并在发生错误时填充它？如果我这样做，我是否仍然从三角形对象的 init 返回 nil，因为它不可用，或者我只是部分初始化三角形并返回它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T00:56:53.990

您应该遵循其他 Cocoa 对象使用的相同约定，如 Apple 的[错误处理编程指南](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/ErrorHandlingCocoa/CreateCustomizeNSError/CreateCustomizeNSError.html#//apple_ref/doc/uid/TP40001806-CH204-SW5)中所述：

*   添加一个参数，该参数将 an`NSError**`作为方法的最后一个参数。
*   发生错误时，如果该参数不是`NULL`，则使用对象填充它`NSError`并返回`nil`。
*   对于`init`方法，您还应该`[self release]`在返回之前`nil`（除非您使用 ARC）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T00:56:38.157

如果您想要详细的错误消息，请执行以下任一操作：

1.  抛出异常。这正是他们的目的。

2.  提供只验证输入的方法，例如

`+ (NSError *)errorFromValidationOfSide:(float)a size:(float)b;`

在创建对象之前调用它。这样，您可以在内部共享任何验证代码，而不是在对象之外复制它。

正如您所怀疑的，让您的`init`方法返回除正确类型的工作对象之外的任何内容是一个坏主意。在 init 上使用 NSError 指针是可以的，但对我来说似乎有点笨拙。

# google-chrome-extension - 有没有办法给 Chrome 控制台标签权限？

> ID：10875204
> 
> 赞同：1
> 
> 时间：2012-06-04T00:50:08.877
> 
> 标签：google-chrome-extension

我想编写一个简短的脚本，以便在某些事件上，chrome 将打开页面上与某个正则表达式匹配的所有链接。我已经把所有的逻辑都记下来了，我只是对 chrome 编程知之甚少。我用谷歌搜索了如何在 chrome 中创建新标签，我发现这`chrome.tabs.create`是我想要的方法。但是，当我尝试在 chrome 中使用内置的 javascript 控制台进行测试时，它告诉我这`chrome.tabs`是未定义的。我能做些什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T17:43:08.277

`chrome.tabs`仅在扩展页面（即以 开头的页面`chrome-extension://`）上可用。 [创建一个新扩展](http://code.google.com/chrome/extensions/getstarted.html)并让该扩展的[背景页面](http://code.google.com/chrome/extensions/background_pages.html)打开选项卡。

您需要使用[内容脚本（或通过后台页面中的](http://code.google.com/chrome/extensions/content_scripts.html)[executeScript](http://code.google.com/chrome/extensions/tabs.html#method-executeScript)注入文件脚本）将代码加载到普通网页中，该脚本运行您的链接收集逻辑[并将](http://code.google.com/chrome/extensions/messaging.html)所有 URL 传递到后台页面，然后可以打电话`chrome.tabs.create`。

我希望它更容易，但这确实是最简单的方法。后台页面可以访问完整的扩展 API，但依赖于其他脚本在普通网页中运行，以通过消息传递向它们提供委托。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T08:46:58.597

确保您的文件中有`tabs`权限`manifest.json`： [https ://code.google.com/chrome/extensions/manifest.html#permissions](https://code.google.com/chrome/extensions/manifest.html#permissions)

# android - 如何构建 APK 准备发布？

> ID：10875209
> 
> 赞同：0
> 
> 时间：2012-06-04T00:50:34.797
> 
> 标签：android, apk

我想构建一个 APK 以供稍后需要由另一组人手动签名。删除/更新 android:debuggable 为 false 并将 apk 交给签名团队是否足够？还是还有更多需要做的？我正在使用 eclipse 生成 apk 并希望在构建项目后在 bin 目录中看到它。逐步解释会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T00:54:00.303

在 Eclipse 中，右键单击项目，转到`Android Tools`并选择`Export Unsigned Application Package`. 没有什么比你更重要的了。

# ruby - Ruby：注册shell命令的输出

> ID：10875212
> 
> 赞同：0
> 
> 时间：2012-06-04T00:50:55.823
> 
> 标签：ruby, bash, shell, command-line

我有一个 shell 命令，我从 ruby​​ 运行：

```
 cat_command = "cat 0.mpg 7.mpg 15.mpg 8.mpg 1.mpg > intermed.mpg"  

 %x[cd #{my_dir} && #{cat_command}] 
```

它返回

```
cat: 8.mpg: No such file or directory 
```

我如何捕捉这个响应（用于救援/错误处理）。在红宝石中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T01:16:36.830

其实想通了。。

```
 stderr = Open3.popen3("cat 0.mpg 7.mpg 15.mpg 8.mpg 1.mpg > intermed.mpg" )
 stderr[2].gets
  => "cat: 0.mpg: No such file or directory\n" 
```

# python - urllib 下载在线目录的内容

> ID：10875215
> 
> 赞同：7
> 
> 时间：2012-06-04T00:51:14.743
> 
> 标签：python, python-3.x, directory, urllib2, urllib

我正在尝试制作一个可以打开目录的程序，然后使用正则表达式获取 powerpoint 的名称，然后在本地创建文件并复制其内容。当我运行它时，它似乎可以工作，但是当我实际尝试打开文件时，他们一直说版本错误。

```
from urllib.request import urlopen
import re

urlpath = urlopen('http://www.divms.uiowa.edu/~jni/courses/ProgrammignInCobol/presentation/')
string = urlpath.read().decode('utf-8')

pattern = re.compile('ch[0-9]*.ppt') #the pattern actually creates duplicates in the list

filelist = pattern.findall(string)
print(filelist)

for filename in filelist:
    remotefile = urlopen('http://www.divms.uiowa.edu/~jni/courses/ProgrammignInCobol/presentation/' + filename)
    localfile = open(filename,'wb')
    localfile.write(remotefile.read())
    localfile.close()
    remotefile.close() 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-04T01:10:43.197

这段代码对我有用。我只是对其进行了一些修改，因为您正在复制每个 ppt 文件。

```
from urllib2 import urlopen
import re

urlpath =urlopen('http://www.divms.uiowa.edu/~jni/courses/ProgrammignInCobol/presentation/')
string = urlpath.read().decode('utf-8')

pattern = re.compile('ch[0-9]*.ppt"') #the pattern actually creates duplicates in the list

filelist = pattern.findall(string)
print(filelist)

for filename in filelist:
    filename=filename[:-1]
    remotefile = urlopen('http://www.divms.uiowa.edu/~jni/courses/ProgrammignInCobol/presentation/' + filename)
    localfile = open(filename,'wb')
    localfile.write(remotefile.read())
    localfile.close()
    remotefile.close() 
```

# ios - iOS函数说“CGRectMinY”应该在左下角

> ID：10875216
> 
> 赞同：9
> 
> 时间：2012-06-04T00:51:15.443
> 
> 标签：ios, cgrect

根据 Apple 文档，

> CGRectMinY(CGRect) rect 返回指定矩形右上角的y坐标

它不应该是矩形的左下角吗？因为我认为Y轴是向下的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-04T01:09:01.273

如果这适用于 iOS，我认为您的功能是错误的。

[http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CGGeometry/Reference/reference.html](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CGGeometry/Reference/reference.html)

> CGRectGetMinY
> 
> 返回建立矩形底部边缘的 y 坐标。
> 
> CGFloat CGRectGetMinY ( CGRect 矩形 );
> 
> 参数
> 
> 矩形
> 
> ```
> The rectangle to examine. 
> ```
> 
> 返回值
> 
> 指定矩形左下角的 y 坐标。可用性
> 
> ```
> Available in iOS 2.0 and later. 
> ```
> 
> 相关示例代码
> 
> ```
> HeadsUpUI
> oalTouch
> PhotoScroller
> QuartzDemo
> SpeakHere 
> ```
> 
> 在 CGGeometry.h 中声明

**编辑**：清除混乱。"CGRectGetMinY" 是一个用于 CGRect 的函数，这意味着它将返回结果，就好像它只考虑一个矩形一样。例如：

```
// With a self created element

CGRect rect = CGRectMake(0, 429, 100, 44);

NSLog(@"rect.origin.y: %f",rect.origin.y);
NSLog(@"rect.size.height: %f",rect.size.height);
NSLog(@"CGRectGetMinY(rect): %f",CGRectGetMinY(rect));
NSLog(@"CGRectGetMaxY(rect): %f",CGRectGetMaxY(rect)); 
```

返回

```
2012-06-04 10:55:49.737 test[7613:707] rect.origin.y: 429.000000
2012-06-04 10:55:49.739 test[7613:707] rect.size.height: 44.000000
2012-06-04 10:55:49.741 test[7613:707] CGRectGetMinY(rect): 429.000000
2012-06-04 10:55:49.748 test[7613:707] CGRectGetMaxY(rect): 473.000000 
```

关键是要考虑这一点，如果你要求最小值，你会得到比你要求最大值更低的值。即使您在不使用 ios 坐标系的情况下考虑这一点。

现在ios是倒置的，所以你要考虑这一点，以前的功能也可以，但是从视觉上讲结果是倒置的，因为系统是倒置的。

```
// With an element on the screen

NSLog(@"gpsButton.frame.origin.y: %f",gpsButton.frame.origin.y);
NSLog(@"gpsButton.frame.size.height: %f",gpsButton.frame.size.height);
NSLog(@"CGRectGetMinY(gpsButton.frame): %f",CGRectGetMinY(gpsButton.frame));
NSLog(@"CGRectGetMaxY(gpsButton.frame): %f",CGRectGetMaxY(gpsButton.frame)); 
```

返回

```
2012-06-04 10:55:49.725 test[7613:707] gpsButton.frame.origin.y: 429.000000
2012-06-04 10:55:49.727 test[7613:707] gpsButton.frame.size.height: 44.000000
2012-06-04 10:55:49.732 test[7613:707] CGRectGetMinY(gpsButton.frame): 429.000000
2012-06-04 10:55:49.735 test[7613:707] CGRectGetMaxY(gpsButton.frame): 473.000000 
```

对于看到这一点的人来说，也没有错，min小于max。

所以混乱出现在 ios 倒置系统中，因为您想从倒置系统中检索视觉上较少的值。

这就是为什么看起来很奇怪，CGGeometry 中的描述是针对“人类世界”的。不适用于 ios 倒置系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T01:03:28.123

Y 轴确实指向下方，从视图的左上角开始。所以较小的 y 值更接近视图的顶部。

# java - Android - Jar 集成 - Dalvik 错误 1 或无法解析超类

> ID：10875217
> 
> 赞同：1
> 
> 时间：2012-06-04T00:51:44.757
> 
> 标签：java, android, pdf, jar, superclass

我正在将一个 Jar 文件集成到一个测试项目中，以完成*PDF*文件的读取。这是我要集成的库：

[https://github.com/jblough/Android-Pdf-Viewer-Library](https://github.com/jblough/Android-Pdf-Viewer-Library)

* * *

我需要添加一个 jar 文件并从那里派生活动。首先让我说，我没有使用过集成 .jar 文件，所以我可能在“导出活动”时做错了。虽然到目前为止，我认为我已经尝试了所有可能的方法来让它发挥作用。

我制作了一个新文件 - PdfReader：

```
package net.sf.andpdf.pdfviewer;

import android.os.Bundle;

public class PdfReader extends PdfViewerActivity {

    /**
     * Called when the activity is first created.
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

    }

    @Override
    public int getNextPageImageResource() {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public int getPdfPageNumberEditField() {
        // TODO Auto-generated method stub
        return 0;
    }
} 
```

我运行 Eclipse 3.7.2 和 ADT18 - 目标 Android 2.1。我知道，ADT17 / ADT18 与 Jar 的集成存在问题。

我现在已经经历了各种组合，其中大多数应该可以从我在其他页面上阅读的内容开始工作，这给了我一个 Dalvik 1 错误。

我可以让它在没有 Dalvik 1 错误的情况下启动，方法是将 Jar 文件设置为项目的一部分 + 从那里添加 Jar。然后eclipse很开心。但是当我在 AVD 中启动该函数时，我得到了无法解决超类错误。

(+) 通过将添加的 .Jar 文件设置为导出，在构建路径菜单中，我得到一个 Dalvik 1 错误。

如果我将 jar 放在 libs 文件夹中（直接导入）到 Android Dependencies，我会得到一个 Dalvik 1 错误。

我试图将项目导入到我的旧笔记本电脑上，上面有 ADT15，我得到“无法解析超类”。

我需要有关其他尝试的建议，因为我已经坐在那里看了一个星期了，却没有得到任何结果... :-/

* * *

这是我在 AVD 中遇到的错误

* * *

```
06-04 00:40:47.636: D/ddm-heap(236): Got feature list request
06-04 00:40:47.716: W/dalvikvm(236): Unable to resolve superclass of Lnet/sf/andpdf/pdfviewer/PdfReader; (27)
06-04 00:40:47.716: W/dalvikvm(236): Link of class 'Lnet/sf/andpdf/pdfviewer/PdfReader;' failed
06-04 00:40:47.716: E/dalvikvm(236): Could not find class 'net.sf.andpdf.pdfviewer.PdfReader', referenced from method net.sf.andpdf.pdfviewer.Niels.onClick
06-04 00:40:47.716: W/dalvikvm(236): VFY: unable to resolve const-class 26 (Lnet/sf/andpdf/pdfviewer/PdfReader;) in Lnet/sf/andpdf/pdfviewer/Niels;
06-04 00:40:47.716: D/dalvikvm(236): VFY: replacing opcode 0x1c at 0x000a
06-04 00:40:47.716: D/dalvikvm(236): Making a copy of Lnet/sf/andpdf/pdfviewer/Niels;.onClick code (124 bytes)
06-04 00:41:17.527: D/AndroidRuntime(236): Shutting down VM
06-04 00:41:17.527: W/dalvikvm(236): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
06-04 00:41:17.527: E/AndroidRuntime(236): Uncaught handler: thread main exiting due to uncaught exception
06-04 00:41:17.536: E/AndroidRuntime(236): java.lang.NoClassDefFoundError: net.sf.andpdf.pdfviewer.PdfReader
06-04 00:41:17.536: E/AndroidRuntime(236):  at net.sf.andpdf.pdfviewer.Niels.onClick(Niels.java:44) 
```

* * *

这是导致 DALVIK 1 错误的方式：

* * *

对不起，链接，但我还不能在这里发布图片：

```
 http://euroturbo.net/tester_problem.jpg 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T02:45:10.647

此错误表示当您尝试运行应用程序时找不到该类。

```
E/AndroidRuntime(236): java.lang.NoClassDefFoundError: net.sf.andpdf.pdfviewer.PdfReader 
```

确保它`PdfViewer.jar`存在于`/libs/`您项目的文件夹中。

将文件添加`JAR`到应由构建工具自动拾取的文件夹后，您可能必须`Refresh`( `F5`) 在 Eclipse 中将项目显示在该`Android Dependencies`部分中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T20:15:41.910

解决了这个问题。由于我用于包/类的名称，我似乎“加倍”了一些术语。创建了一个不同名称的新项目。

# testing - 在 HP QC 中运行缺陷查询

> ID：10875220
> 
> 赞同：0
> 
> 时间：2012-06-04T00:52:15.920
> 
> 标签：testing, qa, hp-quality-center

我们目前正在寻求在我们的一个项目中改进当前的缺陷报告流程（主要是通过加快它们的速度）。我们使用 HP QC 记录缺陷并使用 Excel 创建表格/图表。

我想知道是否可以在 HP QC 上运行 SQL 查询，因为它看起来是在关系数据库后端构建的......

如果是这样，这与excel（主要是导出）集成的效果如何...即您可以编写SQL语句返回一个表，然后将该表演示到excel中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T21:19:49.053

此答案将取决于您安装的 QC 版本，但如果您拥有 10.0 或更高版本，则该功能是内置的。如果您尚未安装 Excel 插件，请先安装。

接下来转到仪表板模块并单击分析视图（在 QC 10 中引入）。在那里单击绿色加号图标，然后在下拉菜单中选择新的 Excel 报告。使用 excel 选择的 excel 报告单击详细信息旁边的配置选项卡。然后，您可以使用查询生成器生成自定义 SQL 查询并将它们直接导出到 Excel 电子表格。[这里](http://www.learnqualitycenter.com/dashboard-module-quality-center-alm/)有更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T21:06:29.767

Excel 支持 VBA 。这是 Visual Basic 代码，您可以在其中创建到 QC 数据库的 ADODB 连接并触发查询。使用 Adodb 记录集，您可以将输出操作到 excel 中。

有关在 QC 数据库上编写查询的更多详细信息，您可以参考以下 URL。QC 主要有三到四个表，如需求、错误、测试、测试周期。下面的链接提供了更多的解释 [QC 报告](http://qtp-automate.blogspot.co.uk/search/label/Quality%20Center)

# css - 如何使用 CSS3 动画切换转换

> ID：10875221
> 
> 赞同：0
> 
> 时间：2012-06-04T00:52:21.707
> 
> 标签：css, css-transitions

我创建了一个人造开/关切换标记。是否可以动画背景颜色/边框的过渡以向左/向右滑动？

目前，我只使用`-webkit-transition:0.5s ease`淡入淡出切换效果，但理想情况下我希望它看起来像左/右切换。

这是下面的[小提琴](http://jsfiddle.net/bv4gs/1/)：

```
$('.btnFauxLink').click(function() {
  $('.btnFauxLink').removeClass('selected');
  $(this).toggleClass('selected');
});
```

```
.autoRefreshSetting {
  border: 0;
  color: #999;
  font-weight: normal;
  margin: 1em 0 1.2em;
  padding: 0
}
.autoRefreshSetting .btnFauxLinkContainer {
  /*background:url(img/sprite-skin-article.png) -557px -322px;*/
  background: #f8f8f8;
  -moz-border-radius: 5px;
  -webkit-border-radius: 5px;
  border-radius: 5px;
  box-shadow: inset 0 1px 0 1px #D4D4D4;
  -webkit-box-shadow: inset 0 1px 0 1px #D4D4D4;
  -moz-box-shadow: inset 0 1px 0 1px #D4D4D4;
  display: inline-block;
  margin: 0 5px;
  padding: 2px 0 0
}
.autoRefreshSetting .btnFauxLinkContainer .btnFauxLink {
  border: 1px solid transparent;
  color: #666;
  font-size: 15px;
  font-weight: normal;
  margin: -2px 0 0;
  padding: 3px;
  text-transform: uppercase;
  vertical-align: text-top
}
.autoRefreshSetting .btnFauxLinkContainer .selected {
  background: #e7e7e7;
  background: -moz-linear-gradient(top, #ffffff 0%, #fafafa 29%, #ebebeb 79%, #e7e7e7 100%);
  background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #ffffff), color-stop(29%, #fafafa), color-stop(79%, #ebebeb), color-stop(100%, #e7e7e7));
  background: -ms-linear-gradient(top, #ffffff 0%, #fafafa 29%, #ebebeb 79%, #e7e7e7 100%);
  background: linear-gradient(top, #ffffff 0%, #fafafa 29%, #ebebeb 79%, #e7e7e7 100%);
  border: 1px solid #d4d4d4;
  -moz-border-radius: 5px;
  -webkit-border-radius: 5px;
  border-radius: 5px;
  color: #333
}
#autoRefreshOff {
  margin-left: -4px
}
.btnFauxLink {
  -webkit-transition: 0.5s ease
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<div class="autoRefreshSetting"> <span class="btnFauxLinkContainer">
        <button class="btnFauxLink" type="button" id="autoRefreshOn">on</button>
        <button class="btnFauxLink selected" type="button" id="autoRefreshOff">off</button>
    </span> 
</div>
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T01:43:13.623

我没有直接回答你的问题，主要是因为我不想让你的 CSS 代码可读，但我可以告诉你，这是可能的，因为几个月前我已经用纯 CSS3 做到了这一点。如果您有兴趣 => [https://secure.anonsphere.com/files/yesno.php](https://secure.anonsphere.com/files/yesno.php)。

# java - jar 中的 Log4J - 属性

> ID：10875225
> 
> 赞同：0
> 
> 时间：2012-06-04T00:52:44.060
> 
> 标签：java, jar, log4j

我的项目中的 log4J 有问题。它在 Eclipse 中运行良好，但是当我将它放入可运行的 jar 中时，我会遇到如下问题：

![在此处输入图像描述](../Images/26420e5580ea4e85d96c2a6bc98be2ff.png)

我的结构看起来像这样：

![在此处输入图像描述](../Images/87da9efa23e212b43faeae2db7d3e4df.png)

所以我相信加载我的 Log4J 属性文件时存在问题。

我通过以下方式加载它们：

![在此处输入图像描述](../Images/15bcc16ca60429778f40430cb9bfc38d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T01:12:51.120

这通常不是您配置 log4j 的方式。通常，您会创建一个名为 log4j.properties 的文件，而根本不调用 PropertyConfigurator。您可以将该文件放在 jar 的根目录中，或者放在添加到类路径的外部目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T01:15:08.437

它们属于项目 CLASSPATH。如果您将 log4j.properties 或 log4j.xml 放在 CLASSPATH 中，您将毫无问题地找到它们。

这是另一个例子，说明在不知道它在做什么的情况下使用 Eclipse 是有害的。有多少人来这里说“它在 Eclipse 中运行良好，但没有它会失败”？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T01:54:45.157

属性文件必须在 CLASSPATH 中。在那里将其添加到调用路径中`Right Click the Project --> Build Path --> Use as Source Folder`

# assembly - 如何直接使用 DASM 设置字节？

> ID：10875226
> 
> 赞同：3
> 
> 时间：2012-06-04T00:52:47.447
> 
> 标签：assembly, 6502

我正在学习 6502 汇编语言，但无法解决问题。我一直在尝试[JavaScript 6502 assembler/emulator](http://6502asm.com/)，并注意到大多数示例都有一个如下所示的部分：

```
colors:
  dcb 0,0,0,0,0,$9,$9,1,1,0,0,0,0,0 
```

我试过谷歌是什么`dcb`意思，我得到的最接近的是十进制编码的二进制。从源代码来看，汇编器似乎正在获取这些值并将每个值作为一个单独的字节插入到代码的当前位置。

我在本地使用 DASM 来组装我的代码，它不支持`dcb`. DASM 中是否有类似的方法可以直接在代码中设置字节值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:41:42.460

`.DC`工作正常，但[DASM](http://dasm-dillon.sourceforge.net/)中的直接等价物是

```
colors:
    dc.b 0,0,0,0,0,$9,$9,1,1,0,0,0,0,0 
```

正如 AusCBloke 所说，这`b`是字节。您可以将其替换`w`为 for words（2 个字节）或`l`for long words（4 个字节）。

您已经正确推测 的目的`dc.x`是在当前位置注入常量值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T01:03:07.153

好吧，通常情况下，提出问题帮助我找到了答案。根据[此页面](http://www.macs.hw.ac.uk/~pjbk/scholar/dasm.html)，`.DC`用于此目的。

因此，问题中的示例如下所示：

```
colors:
  .DC 0,0,0,0,0,$9,$9,1,1,0,0,0,0,0 
```

# wix - 如何在 Burn (WiX) 中引用 Reboot Pending 属性

> ID：10875227
> 
> 赞同：5
> 
> 时间：2012-06-04T00:52:53.093
> 
> 标签：wix, windows-installer, wix3.6, burn

如何在[刻录](http://en.wikipedia.org/wiki/WiX#Burn)(WiX) 引导程序中引用 RebootPending 属性？我知道属性名称是 RebootPending，它实际上引用了 Windows Installer 中的 MsiSystemRebootPending 属性。

我目前正在尝试这样的事情：

```
<bal:Condition Message="There is a restart pending. Please restart your computer before  attempting to install !(loc.ProductName).">RebootPending = 0</bal:Condition> 
```

但这始终是正确的，即使 Windows 更新刚刚完成更新并需要重新启动。

我的语法错了吗？我的情况应该改为 [RebootPending] 吗？

被告知 Burn 中的 RebootPending 属性可能与 Windows Installer 使用的属性不完全对应，否则我将如何确保我的应用程序在重新启动挂起时不会尝试安装？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T01:52:59.207

Burn 不使用 MSI 的 MsiSystemRebootPending，因为它在安装事务之外运行。所以 Burn 使用[ISystemInformation::RebootRequired](http://msdn.microsoft.com/en-us/library/windows/desktop/aa386098%28v=vs.85%29.aspx)代替。不能保证 MSI 和 ISystemInformation::RebootRequired 对是否需要重新启动有相同的想法，因为 MSI 没有记录 MsiSystemRebootPending 反映。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T03:13:11.587

对于一些一般性的想法，请参阅工具[WhyReboot](http://exodusdev.com/products/whyreboot)。这是它的作用：

> 检查记录的注册表位置以进行重启后文件复制/重命名/删除操作。
> 
> 检查记录的“运行一次”应用程序的注册表位置：这些将在下次重新启动时运行一次，并且可能被安装程序用于执行重新启动后的文件清理和其他操作，例如注册表操作。
> 
> 检查 Win9x/ME 平台上的 Wininit.ini 是否有挂起的文件重命名/删除操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-09T23:36:38.077

***ISystemInformation::RebootRequired***：有人要求提供一些示例代码来调用的回答中提到的[ISystemInformation::RebootRequired 。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa386098%28v=vs.85%29.aspx)

这是一个简介 - 不是很好，但不妨试一试：

```
Set autoupdate = CreateObject("Microsoft.Update.AutoUpdate")
autoupdate.Pause()
MsgBox Err.Number & " " & Err.Description

Set sys = CreateObject("Microsoft.Update.SystemInfo")
MsgBox sys.RebootRequired

' autoupdate.Resume() ' Enable to resume AutoUpdate
Set sys = Nothing
Set autoupdate = Nothing 
```

也许只使用后一部分：

```
Set sys = CreateObject("Microsoft.Update.SystemInfo")
MsgBox sys.RebootRequired
Set sys = Nothing 
```

我[对 Windows Update Agent Object Model](https://msdn.microsoft.com/en-us/library/windows/desktop/aa387291%28v=vs.85%29.aspx)不是很熟悉。

* * *

***重启***：触发重启（警告）可能涉及许多注册表位置。[获取-PendingReboot-查询](https://gallery.technet.microsoft.com/scriptcenter/Get-PendingReboot-Query-bdb79542)。还有[一个类似的 PowerShell 脚本](https://gist.github.com/altrive/5329377)。

以下是我发现的一些与 Windows 重新启动有关的注册表位置（绝对不是详尽的）：

*   `HKLM\SOFTWARE\Microsoft\Updates : UpdateExeVolatile`
*   `HKLM\SYSTEM\CurrentControlSet\Control\Session Manager : PendingFileRenameOperations`
*   `HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Installer : InProgress`
*   `HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Component Based Servicing : RebootPending`
*   `HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\WindowsUpdate\Auto Update : RebootRequired`
*   `HKLM\SYSTEM\Setup : SystemSetupInProgress`

并且正在进行计算机重命名操作：

*   `HKLM\SYSTEM\CurrentControlSet\Control\ComputerName\ActiveComputerName : ComputerName`
*   `HKLM\SYSTEM\CurrentControlSet\Control\ComputerName\ComputerName : ComputerName`

[***CCMClientSDK***](https://msdn.microsoft.com/en-us/library/jj874138.aspx)：然后有一些 WMI 调用需要检查`SCCM 2012 Client Reboot Pending Status`。`CCMClientSDK.IsHardRebootPending`和`CCMClientSDK.RebootPending`。检查[Get-PendingReboot-Query 脚本](https://gallery.technet.microsoft.com/scriptcenter/Get-PendingReboot-Query-bdb79542)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T01:32:39.793

我不知道它是否有帮助，但它[在这里](http://wix.sourceforge.net/manual-wix3/bundle_built_in_variables.htm)说 RebootPending 值

> 首次请求变量时将反映系统的重启状态

# widget - 它是否存在微调器 ActiveX 控件？

> ID：10875238
> 
> 赞同：0
> 
> 时间：2012-06-04T00:56:52.100
> 
> 标签：widget, activex, spinner, wsh, hta

我正在寻找一种将[微调器](http://en.wikipedia.org/wiki/Spinner_%28computing%29)控件添加到 Html 应用程序 (HTA) 中的表单的方法。

当然，我可以自己构建一个，但这不是很方便，尤其是对于这么简单的事情。

Windows 的 API 和框架库中是否已经构建了 activeX 控件或类似的东西？

**跟进：**
我找到了`System.Windows.Forms.NumericUpDown`正是我需要的课程。不幸的是，它是一个 .NET 类，所以我认为它不适用于我的情况。
我想知道是否有办法通过 COM 接口或其他方式将其嵌入到 HTA 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T10:41:56.250

也许您可以使用下面的代码来模拟微调器。

```
<select multiple size="1" id="sel">
    <option value="0">foo</option>
    <option value="1">bar</option>
    <option value="2">baz</option>
</select> 
```

为了防止用户选择多个选项：

```
document.getElementById('sel').addEventListener('click',preventMultiselect,false);

function preventMultiselect(e){
    if(e.ctrlKey){
        this.selectedIndex=this.selectedIndex;
    }
    return;
} 
```

这也适用于 Quirks 模式（使用“旧式”事件处理）。

# php - 自动填充“最受欢迎”文章的 PHP 脚本？

> ID：10875241
> 
> 赞同：0
> 
> 时间：2012-06-04T00:57:07.540
> 
> 标签：php, scripting

我是编程新手。你知道很多 WP 博客在他们的软件中都有“最受欢迎”的文章功能吗？脚本代码会是什么样子？我似乎无法想象这将是一个困难的语法，但我试图弄清楚它是如何实际编写的。再次感谢大家的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T01:16:16.473

看看这个插件：[WP最受欢迎](http://wordpress.org/extend/plugins/wp-most-popular/)

祝你好运！

# ios - AmazonS3Client putObject 仅适用于 iOS 主线程？

> ID：10875242
> 
> 赞同：6
> 
> 时间：2012-06-04T00:57:11.080
> 
> 标签：ios, multithreading, amazon-s3

我正在尝试使用 AmazonS3Client 来放置对象。奇怪的是，它似乎只在我在 iOS 主线程上运行 putObject 代码时才起作用。

代码基本上是这样的：

```
-(void)uploadVideoToS3
{
    S3PutObjectRequest * videoPOR = [[S3PutObjectRequest alloc] initWithKey:video.onlineVideoID inBucket:video.onlineVideoBucketName];
    videoPOR.contentType = @"video/quicktime";
    videoPOR.data        = [NSData dataWithContentsOfURL:video.convertedVideoLocalURL];
    videoPOR.delegate    = self;

    // Put the thumbnail and video into the specified s3 
    AmazonS3Client * s3 = [AmazonClientManager s3];

    [s3 putObject:videoPOR];
    [videoPOR  release];
} 
```

存储桶存在，我有权限等。如果我只是调用

```
[self uploadVideoToS3] 
```

在我的代码中（不在主线程中），整个视频上传方法运行（我有一些 NSLogs 来证明这一点），但我从来没有收到任何状态回调，没有抛出异常，并且对象永远不会放入它的存储桶中在 S3 上。

当我像这样在主线程上调用上传函数时：

```
dispatch_async(dispatch_get_main_queue(), ^(void) {
                    [self uploadVideoToS3];
                }); 
```

我收到进度回调，一切正常，对象已成功放入 S3 存储桶。

有谁知道 putObject 是否仅适用于 iOS 主线程？如果是这样，那将是不幸的，因为它通常是 UI 线程。

谢谢，凯文

PS 我尝试在非主线程上分派函数调用，但结果相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T01:32:17.850

我认为您的线程一旦完成发送请求就会终止，因此回调没有线程可以访问。创建一个线程并不意味着它永远存在。一旦它完成它的任务，它就会结束并被回收到线程池中。要在另一个线程上执行此操作，您将必须设计一个与运行循环集成的方法。Apple docs的[Threading Programming Guide](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html#//apple_ref/doc/uid/10000057i-CH16-SW1)中有一个关于它的部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T13:59:40.323

问题实际上是如果您设置委托，S3PutObjectRequest 会异步运行。委托在当前运行循环上发送它的回调，这在主线程上工作正常，但在调度队列线程上却不行。您必须启动自己的运行循环才能处理委托。我仍在尝试确定管理此问题的最佳方法。

当然，我希望他们只提供同步和异步方法，而不是神奇地切换，但这在委托属性的 AmazonServiceRequest.h 头文件中进行了解释。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T13:59:12.550

**AmazonS3Client 的 putObject**方法阻塞了主线程。甚至我也面临着这个问题。**但我在S3TransferManager**中找到了更好的解决方案。

示例代码：

```
AmazonS3Client * s3 = [AmazonClientManager s3];

S3PutObjectRequest * videoPOR =  [[S3PutObjectRequest alloc] initWithKey:video.onlineVideoID inBucket:video.onlineVideoBucketName];                  
videoPOR.contentType = @"video/quicktime";
videoPOR.data = [NSData dataWithContentsOfURL:video.convertedVideoLocalURL];

S3TransferManager *manager = [S3TransferManager new];
manager.s3 = s3; 
[manager upload:videoPOR]; 
```

**S3TransferManager**异步运行。您可以在[此处](http://mobile.awsblog.com/post/TxIRFEQTW9XU8G/S3TransferManager-for-iOS-Part-I-Asynchronous-Uploads)找到有关它的更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-25T16:47:43.110

我知道这个问题有点老了，但我刚刚遇到了同样的问题，想分享我从以下网址找到的解决方案：[https](https://github.com/0i0/iOS-Amazon-S3-upload-service) ://github.com/0i0/iOS-Amazon-S3-upload-service 。

正如人们所提到的，如果您调用从主线程上传数据，那么您需要确保您的线程保持活动状态。一种方法是使用 NSRunLoops。在下面的代码中，我们看到 do-while 循环将访问当前线程的运行循环，并将保持线程直到上传完成。

```
-(void)uploadFileWithData:(NSData *)data
                 fileName:(NSString *)fileName
                 progress:(void (^)(NSInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite))progressCallback
                  success:(void (^)(id responseObject))successCallback
                  failure:(void (^)(NSError *error))failureCallback
{

    progress = progressCallback;
    success = successCallback;
    failure = failureCallback;

    _doneUploadingToS3 = NO;

    AmazonS3Client *s3Client = [[AmazonS3Client alloc] initWithAccessKey:kAWSAccessKeyID withSecretKey:kAWSsecret];
    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
    dispatch_async(queue, ^{

        NSString *pathToFile =  [NSString stringWithFormat:@"%@%@",kAWSPath,fileName];
        // Upload image data.  Remember to set the content type.
        S3PutObjectRequest *por = nil;
        por = [[S3PutObjectRequest alloc] initWithKey:pathToFile inBucket:kAWSBucket];
        por.cannedACL = [S3CannedACL publicRead];
        @try {

            por.delegate = self;
            por.contentType = @"image/jpeg";
            por.data = data;

            [s3Client putObject:por];
        }
        @catch (AmazonClientException *exception) {
            _doneUploadingToS3 = YES;
        }

        do {
            [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];
        } while (!_doneUploadingToS3);

        por.delegate = nil;
    });

}

-(void)request:(AmazonServiceRequest *)request didCompleteWithResponse:(AmazonServiceResponse *)response
{
    _doneUploadingToS3 = YES;
    success(response);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-30T22:02:01.930

感谢您对非主线程 s3 上传的见解。即使上传失败，我也发现了 didCompleteWithResponse 触发器，并且没有找到一种简单的方法来确定它失败了。我正在尝试仅使用 ObjectPut 权限上传，因此程序无法触发 ObjectGet 以检查文件是否存在。

# haskell - 我可以在这个 Show 实例中消除对 Free Monad 的 UndecidableInstances 的使用吗？

> ID：10875243
> 
> 赞同：5
> 
> 时间：2012-06-04T00:57:19.723
> 
> 标签：haskell, monads

我一直在试图将我的头包裹在免费的单子上；作为学习帮助，我设法`Show`为以下`Free`类型编写了一个实例：

```
{-# LANGUAGE FlexibleContexts, UndecidableInstances #-}

-- Free monad datatype
data Free f a = Return a | Roll (f (Free f a))

instance Functor f => Monad (Free f) where
    return = Return
    Return a >>= f = f a
    Roll ffa >>= f = Roll $ fmap (>>= f) ffa

-- Show instance for Free; requires FlexibleContexts and
-- UndecidableInstances
instance (Show (f (Free f a)), Show a) => Show (Free f a) where
    show (Return x) = "Return (" ++ show x ++ ")"
    show (Roll ffx) = "Roll (" ++ show ffx ++ ")"

-- Identity functor with Show instance
newtype Identity a = Id a deriving (Eq, Ord)

instance Show a => Show (Identity a) where
    show (Id x) = "Id (" ++ show x ++ ")"

instance Functor (Identity) where
    fmap f (Id x)= Id (f x)

-- Example computation in the Free monad
example1 :: Free Identity String
example1 = do x <- return "Hello"
              y <- return "World"
              return (x ++ " " ++ y) 
```

的使用`UndecidableInstances`让我有些困扰；没有它有办法吗？Google提供的只是[Edward Kmett 的这篇博文](http://comonad.com/reader/2008/monads-for-free/)`Show`，令人欣慰的是，它与我的类定义基本相同。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-04T02:39:33.873

您实际上*可以*消除此处的 UndecidableInstance 要求`Show`，尽管您不能为`Read`or做同样的事情`Eq`。

诀窍是用你可以更直接地展示的东西替换你的仿函数的内容，但你不会告诉其他任何人。因此，我们将出口限制为：

```
{-# LANGUAGE FlexibleContexts #-}

module Free (Free(..)) where 
```

并为我们只能做的事情敲出一个数据类型`show`。

```
newtype Showable = Showable (Int -> ShowS)

showable :: Show a => a -> Showable
showable a = Showable $ \d -> showsPrec d a

instance Show Showable where
    showsPrec d (Showable f) = f d 
```

现在，如果我们从不告诉任何人`Showable`， 的唯一实例`Show (f Showable)`将是在 的参数中具有多态性的实例，`a`最多限制为 Show 实例。只要最终用户没有主动尝试使用其他扩展来破坏您的代码，这就是合理的推理。通过添加功能依赖和/或重叠/不可判定的实例，可能会出现一些问题，但只有那些会破坏意图的东西，没有任何东西会导致你崩溃。

这样我们就可以构建一个可判定的`Show`实例。

```
data Free f a = Pure a | Free (f (Free f a))

instance (Functor f, Show (f Showable), Show a) => Show (Free f a) where
  showsPrec d (Pure a)  = showParen (d > 10) $ showString "Pure " . showsPrec 10 a
  showsPrec d (Free as) = showParen (d > 10) $ showString "Free " . showsPrec 10 (fmap showable as) 
```

这里给出的实现并没有消除对`FlexibleContexts`.

我在几个包中使用了这个技巧——包括我的`ad`包——来减少对不确定实例的需求。

# mysql - 什么时候应该使用 MySQL TEXT 字段而不是文件？

> ID：10875244
> 
> 赞同：0
> 
> 时间：2012-06-04T00:57:44.840
> 
> 标签：mysql, file

**与MySQL TEXT**类型的字段相比，使用**文件**存储长文本（例如，一篇冗长的博客文章）有什么优势吗？在我看来，我会想象通过您的程序 (PHP) 检索文件比让 MySQL 为您获取文件要快得多。

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T01:03:55.343

对短字符串使用“char”和friends，对于您可能搜索的“结构化”数据，就像搜索数字或日期一样。否则，在您想要对大量*非结构化*文本数据*进行全文搜索的地方使用“文本”。*喜欢博客；）

 *这是一篇好文章：

[http://devzone.zend.com/26/using-mysql-full-text-searching/](http://devzone.zend.com/26/using-mysql-full-text-searching/)

如果您只存储大量文本 - 如果您实际上不想使用 mySql*搜索*它，那么在外部存储文件与在外部存储 .mp3 音频文件或 .png 图像具有相同的权衡。一般来说，我更喜欢在文件系统上存储大的“blob”，而不是在数据库中。

恕我直言...

==================================================== =

附录：

如果您有任何疑问 - 我建议将您的博客作为“文本”存储在数据库中可能是更好的选择。该数据库更擅长存储大量小型实体（博客条目），并且您还可以获得基本上“免费”的全文搜索的额外好处。

恕我直言..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T01:05:06.723

根本没有优势，如果编码不当会引入错误。许多 cms 系统使用数据库是有原因的，因为它们旨在比文件更有效地存储和检索此类数据。如果这是一个更好的主意，Drupal、Joomla、Wordpress 等将使用文件而不是数据库。现在，如果您谈论的是图像，那么是的，最好将其存储在文件系统中，但即使您写了一个 10,000 字的博客，您谈论的是最小尺寸。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T01:08:34.513

我想说这两种方式都有优势，这取决于你的具体情况。例如：

使用文本数据库字段意味着您的博客条目都包含在您的数据库中，从而更容易备份和移动。这也意味着您不必担心文件访问，例如安全性、文件锁定、文件名等。此外，您无需编写任何特殊代码即可查询数据。

改用文件也有好处。它使您的数据库保持较小，尤其是在处理大量文件时。它允许其他人、程序或机器在没有数据库访问权限的情况下轻松访问数据。如果您需要重新组织磁盘，您可以轻松地将文件传输到另一个位置。

所以这完全取决于你的环境。就个人而言，除非您要处理大量文件或大型文件，否则我可能会坚持使用数据库选项。在大多数情况下，它更容易处理。***

# iphone - iPhone - 一次弹出多个表单

> ID：10875246
> 
> 赞同：0
> 
> 时间：2012-06-04T00:57:58.157
> 
> 标签：iphone, ios, cocoa-touch, forms, uinavigationcontroller

我有一个调查应用程序。

在我的故事板中，我有一系列 7 个表格。表单通过 push segue 向前导航。

在用户进入最终表单后，我有一个“提交”按钮。当用户按下此按钮时，我会存储调查，然后我想“弹出”所有 7 个表单并导航回用户开始调查的主表单。

从堆栈中“弹出”所有这些表单并返回主表单的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T01:10:16.713

由于情节提要使用 UINavigationController 来管理推送的视图控制器，您可以执行 [self.navigationController popToRootViewController:YES] 来一次弹出所有推送的控制器。

请参阅：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T01:13:36.947

我还没有使用故事板，但是从理论上思考。你可以尝试类似的东西，

[self.navigationController popToViewController:firstViewController 动画：YES];

如果您可以在堆栈中获取视图控制器数组，请使用 [viewControllers objectAtIndex:0]

# c++ - 构建许多哈希表

> ID：10875250
> 
> 赞同：1
> 
> 时间：2012-06-04T00:58:50.553
> 
> 标签：c++, c++11

我有一棵包含 125,000 个节点的树（最多 2 个子节点）。我正在尝试确定每个节点的子节点数（直接和间接）。因为树是一个 DAG *，但*到每个子节点的链接数量是无限的，所以许多节点实际上会将所有其他节点都作为子节点。树的总复杂度，仅供参考，如果没有记忆，则超过 10^30。这意味着，即使存储一个指向每个子节点的简单指针（并记忆输出）也会产生 15.625GB 的数据块，甚至忽略哈希表、内存分配器和其他开销。

虽然这是所需的输出，但要实现它需要一点时间和太多内存。我只有一个工作站，具有公平但不是顶级的电源（i7 930、6GB RAM）。

有什么方法可以记忆或以其他方式缓存表，以便在合理的时间内仍然可以访问数据（我可能会对数据进行数十万次访问）？我考虑过懒惰地评估查询，但我担心访问它们需要多长时间。

此外，我对哪些节点是子节点并不特别感兴趣，但我*确实*需要知道它们的*数量*——这基本上与我相信的相同，因为我不能将同一个子节点数两次。

编辑：树是不可变的。我要做的就是阅读孩子的数量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T01:41:37.143

如果您想遍历直接无环图而不遍历节点两次（例如对每个节点计数一次），您可以`mutable`向每个节点添加一个布尔值，指示您之前是否遍历过该节点。您可以通过标记节点、查看节点并递归遍历节点的未标记子节点来查看节点的所有后代。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T02:22:06.517

看起来您已经找到了答案，但只是为了踢球[，DAG 的传递闭包](http://en.wikipedia.org/wiki/Transitive_closure#Graph_theory)可能对其他思考此类问题的人有用。

[Timothy Chan](http://www.cs.uwaterloo.ca/~tmchan/)在 2005 年发表[了一篇论文，脚注是关于有效计算 DAG 的传递闭包](http://www.cs.uwaterloo.ca/~tmchan/apsp.ps)。引用论文：

> ...对于计算未加权有向图的传递闭包的更简单问题，Yuster 和 Zwick 在最近的一篇论文中要求使用 O(mn) 时间算法，但需要 O(mn/log n + n ² ) 时间限制实际上很容易上 RAM 这个词。²
> 
> ...
> 
> ²证明：假设图是无环的，因为我们可以在线性时间内预先计算强连通分量并收缩每个分量。我们想在每个顶点 u 可达的所有顶点上*找到*集合*S [u]*。对于逆拓扑顺序的每个顶点*u*，我们可以通过对从*u*入射的所有顶点*v取**S* *[v]*的并集 来计算*S* *[u]*。通过将集合表示为 (n/log n) 字向量并使用按位或运算，可以在 O(n/log n) 时间内执行这些 O(m) 集合并集操作中的每一个。

 ***显然还有一点需要弄清楚——你需要预先计算“强连接组件”并且必须能够以相反的拓扑顺序访问节点——但是他描述的有效地进行重复联合的过程听起来很合理计算 DAG 中给定节点的子节点数的方法。

*   Timothy M. Chan， O(n **[³](http://www.cs.uwaterloo.ca/~tmchan/apsp.ps)** **[/log n) 时间](http://www.cs.uwaterloo.ca/~tmchan/apsp.ps)****[内具有实权重的所有对最短路径](http://www.cs.uwaterloo.ca/~tmchan/apsp.ps)**。 *计算机科学讲义，2005 年，第 3608 卷，算法和数据结构，第 318-324 页。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T01:17:33.520

我会在节点本身中缓存节点的后代数量。由于节点是不可变的，因此您可以计算并缓存后代计数，而不必担心缓存的值会变得陈旧。

给定节点的后代数是 1 加上其每个子节点（直接子代，而不是间接后代）的后代数之和。由于每个孩子都缓存了其后代的计数，因此这是一个非常快速的计算。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T01:21:54.503

试图打破一些算法？:naughty: 最简单的方法是使用 n/nlogn( work in general ) n ( reference in general ) 情况，在这种情况下，您将存储对该表的键引用，并在需要特定映射哈希堆栈时查找。因此，例如，n根节点有n1和n2子节点，n1子节点没有被处理，而是被引用并保存在磁盘上的某个位置，但是n1根节点（这与n1子节点基本相同，但没有特权be counted ) 将被进一步处理并具有 n11 和 n12 子节点，然后 n11 根节点将被映射为对该树的引用，依此类推。因此，例如，您将只有 125,000 个引用键和指向其他引用键的指针，如果需要任何您想要的东西，您的 PC 将真正处理，

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T09:13:09.420

这可以通过 mapreduce 方法来完成，因为部分问题是大型数据集。这是一种非常不同的方法，因为它是在文本文件和集群领域而不是 C++ 领域，但它至少会随着机器数量而扩展，而不会过多地影响完成时间。

该方法将从表示每个有向边的键：值对开始，并建立从每个节点下降的节点集，直到每个节点都标记为完成。从两个子节点收集时，使用子集的交集，分别维护不完整节点集。这应该像每个深度级别需要 2 个地图和收集，但显然随着您上升图表而减少工作量。

它显然需要更多的计算工作，但它可以利用现有的 hadoop 等系统来轻松扩展。

我想这个答案有两个层次：a）考虑多通道方法，b）考虑使用 hadoop 等人来分配工作。***

# facebook-graph-api - Facebook 权限混乱

> ID：10875252
> 
> 赞同：0
> 
> 时间：2012-06-04T00:59:30.720
> 
> 标签：facebook-graph-api, facebook-ios-sdk

我正在尝试使用 iO SDK 检索用户 ID 和名称。据我了解，获取这些参数不需要额外的授权。

因此我这样做：

```
FBRequest *userIDRequest = [facebook requestWithGraphPath:@"http://graph.facebook.com/me?fields=id,name" 
                                              andDelegate:self]; 
```

然后处理数据。但是，当我这样做时，我得到一个错误：

```
The operation couldn’t be completed. (facebookErrDomain error 10000.) 
```

关于这个错误，我唯一能找到的是缺乏用户权限，但正如我上面所说，这些项目应该免费获得。知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T01:38:43.263

RequestWithGraph 路径在方法调用中已经有 URL。您只需将图形路径添加到方法中：

```
FBRequest *userIDRequest = [facebook requestWithGraphPath:@"me" andParams: params andDelegate:self]; 
```

只要确保正确填写参数即可。

# php - PHP从数据库返回浮点数而不是字符串？

> ID：10875253
> 
> 赞同：0
> 
> 时间：2012-06-04T00:59:37.187
> 
> 标签：php, mysql, floating-point, base-conversion, unique-id

我用它为我店里的每个产品创建一个唯一的代码，

```
echo base_convert(uniqid(),16,10); 
```

例如，

```
1403802682572650 
```

我的查询很简单，

```
 $sql = "
            SELECT * 
            FROM page AS p

            LEFT JOIN stock AS o
            ON o.id = p.page_id

            WHERE p.type = ?
            AND p.hide != ?
            ORDER BY p.backdated_on
        "; 
```

当我想获得产品代码时，我会这样做，

```
var_dump($product->code); 
```

但是 PHP 返回`float(1.4038026825726E+15)` 而不是`1403802682572650`

为什么 PHP 返回`float`而不是`string`？我怎样才能得到原来的号码？

或者在从 db 表请求结果之前，我应该在我的 SQL 查询中将数字转换/转换为字符串或 varchar 吗？

**编辑：** 在我的代码中发现错误。

我有一行将 json 转换为数组并将字符串转换为浮点数，例如，

```
echo json_decode("1403802682572650", true); // 1.4038026825726E+15 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T01:02:50.587

不，您应该将列本身更改为，`VARCHAR`因为它并没有*真正*用作数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T01:14:45.987

您可以执行以下两项操作之一，而不会对数据库架构进行可能有害的更改。

你可以先输入 cast $product->code：

```
var_dump( (string) $product->code ); 
```

或者您可以在查询中转换/转换选择：

```
SELECT CAST(columnName as char) as code ... 
```

如果数据库引擎不支持您的查询，我一直喜欢通过代码而不是查询来处理大多数此类更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T01:19:43.777

值超出范围。

**PHP 人：**

整数的大小取决于平台，尽管通常值约为 20 亿的最大值（即 32 位有符号）。64 位平台的最大值通常约为 9E18。PHP 不支持无符号整数。自 PHP 4.4.0 和 PHP 5.0.5 起，可以使用常量 PHP_INT_SIZE 确定整数大小，使用常量 PHP_INT_MAX 确定最大值。

如果 PHP 遇到超出整数类型范围的数字，它将被解释为浮点数。此外，导致数字超出整数类型范围的操作将改为返回浮点数。

# jquery - 我怎样才能避免在 BACKBONEJS + requireJS 中出现这个长路由器文件？

> ID：10875257
> 
> 赞同：1
> 
> 时间：2012-06-04T01:00:22.680
> 
> 标签：jquery, backbone.js, requirejs, router

```
// Filename: router.js

define(['jquery','underscore','backbone',
'collections/series','views/series/list','text!templates/series/list.html',
'models/series',
    'views/series/details','text!templates/series/details.html',
    'views/series/preview','text!templates/series/preview.html'
], function($, _, Backbone,
        SeriesCollection, SeriesListView, SeriesListTemplate,
        SeriesModel,
        SeriesDetailsView, SeriesDetailsTemplate,
        SeriesPreviewView, SeriesPreviewTemplate
){

_.templateSettings = { interpolate : /\{\{(.+?)\}\}/g };

... 
```

更新：

所有这一切的原因是在我的路由器功能中我正在这样做：

```
 seriesList: function(){
  // We have no matching route, lets display the home page

    var seriesCollection = new SeriesCollection();
    seriesCollection.fetch({success:function(){

        var seriesListView = new SeriesListView({collection:seriesCollection, el:'#page'});
        seriesListView.template = _.template(SeriesListTemplate);
        seriesListView.render();
    }});

} 
```

含义 - 我正在连接模板并在数据返回时查看。它有效 - 但这是一种好的做法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T04:28:25.540

在我看来，你的路由器现在是一种上帝对象。它知道的太多了。我认为重构应用程序以实现更清晰的关注点分离是有意义的。然后你的路由器就不会像上面那样，也不会有那么多依赖。例如，您可以让视图负责其自己的模板（顺便说一句，并负责呈现自身）：

```
// router.js
seriesList: function(){
    var seriesCollection = new SeriesCollection();
    var seriesListView = new SeriesListView({collection:seriesCollection, el:'#page'});
    seriesCollection.fetch();
}

// view/series/list.js
define(['jquery',
       'underscore',
       'backbone',
       'text!templates/series/list.html'], function($, _, Backbone, SeriesListTemplate){

    var SeriesListView = Backbone.View.extend({
        template: _.template(SeriesListTemplate),

        initialize: function (options) {
            this.collection.on('reset', this.render, this);
        }
        ...
    });
    return SeriesListView;
} 
```

然后相应的模板依赖将从 router.js 中消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T06:23:17.197

您是否考虑过将您的单一路线分成不同的路线？

正如 Backbone 文档所说，一定要`Backbone.history.start`在 DOM-ready（对于 IE）上运行，并且在你启动所有路由器之后。

```
$(function(){
  new WorkspaceRouter;
  new HelpPaneRouter;
  Backbone.history.start({pushState: true});
}); 
```

我没有意识到这`Backbone.history`是“主”路由器，因此您可以`.bind`在子路由器上设置事件以仅影响这些路由或`.bind`在 Backbone.history 上设置所有事件。`master`显然，这意味着您可以在所有子路由器上设置要重用的辅助方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T01:41:37.060

问题是，至少如果我理解它，您正在尝试一次加载所有内容，以便您可以使用它进行某些设置？

例如，为什么要在其视图之外加载系列详细信息模板？

试试我今天给某人的这个答案，我在这里提供了一个 AMD 将如何工作的示例： [骨干设计](https://stackoverflow.com/questions/8381170/backbone-design/10871794#10871794) 或要点： [https ://gist.github.com/2863979](https://gist.github.com/2863979)

如您所见，我不会将所有内容都加载到一个巨大的 router.js 文件中。

一个很好的资源： [http ://addyosmani.github.com/backbone-fundamentals/#modularjs](http://addyosmani.github.com/backbone-fundamentals/#modularjs)

ps 我还没有遇到过用于骨干网和require.js 的router.js 文件的概念。你是从哪里得到这个想法的？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-20T21:31:24.537

您可以将依赖项移动到路由处理程序：

```
define(['backbone'], function (Backbone) {

    var Router = Backbone.Router.extend({

        routes: {
            "Series(/)": "seriesList"
        },

        seriesList: function() {
            require(['collections/series', 'views/series/list'], function(SeriesCollection, SeriesListView) {
                var seriesCollection = new SeriesCollection();
                var seriesListView = new SeriesListView({collection:seriesCollection, el:'#page'});
                seriesCollection.fetch();
            });
        } 
    });
}); 
```

这使得`define()`调用更易于管理并将加载延迟到实际使用路由。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-13T05:27:38.373

这是另一种方式：

1.  实例化一个不知道任何路由的路由器（全局或应用程序的成员）
2.  在每个视图的 initialize() 方法中，定义由该视图处理的路由

router.route('tasks', 'tasks', function () { ... })

1.  在调用 Backbone.history.start() 之前，在主 App 视图中实例化所有顶级视图
2.  （可选）启动应用程序时导航到默认视图路由

更多解释和示例代码在[http://mariusa.github.io/writings/handling-backbone-routes.html](http://mariusa.github.io/writings/handling-backbone-routes.html)

# java - 注释有什么作用？我该如何使用它？

> ID：10875259
> 
> 赞同：0
> 
> 时间：2012-06-04T01:01:25.010
> 
> 标签：java, annotations

> **可能重复：**
> [这些 Java 注释有什么作用？](https://stackoverflow.com/questions/808711/what-function-do-these-java-annotations-serve)
> [Java 中如何以及在何处使用注解？](https://stackoverflow.com/questions/1372876/how-and-where-are-annotations-used-in-java)

好吧，我试图弄清楚注释是什么，阅读了大量文档，但仍然不明白它们的作用以及如何使用它......好吧，我有这个示例注释描述：

```
 @Documented
@interface ClassPreamble {
   String author();
   int currentRevision() default 1;
   String lastModified() default "N/A";
   String lastModifiedBy() default "N/A";
} 
```

然后我尝试使用它，但我什至不知道会发生什么，哈哈：

```
 @ClassPreamble (author = "James")
public class PreAmbleReal {
    static public void main(String[] args) {

    }

    public String author();

} 
```

那么，谁能给我解释一下？否则我会浪费几个小时的时间，什么也学不到。：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T01:04:12.067

注释的用途之一是它告诉编译器检查特定的东西。例如，@Override 将确保该函数实际上与基类相同。还有一些其他注释，例如@Author。我敢肯定你去过这个页面，但这是一个更详细的解释 - [http://docs.oracle.com/javase/1.5.0/docs/guide/language/annotations.html](http://docs.oracle.com/javase/1.5.0/docs/guide/language/annotations.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T01:10:58.840

注释本身不会做任何事情。它们是一些放在其他代码结构（例如方法、类、参数...）上的属性。必须有其他处理器来读取注释并执行某些操作。

有些注解只是在源代码中，并没有放在编译后的代码中，所以处理源代码的工具会读取并处理它们，有些注解放在编译后的代码中但没有被类加载器加载，有些是放在编译后的代码并由类加载器加载，因此可以在运行时读取它们（这三种行为通过`@Retention`注解本身的注解来区分）。

据我所知，在 Java 语言规范中，提到运行时缺少注释类不会停止应用程序的工作，这意味着类加载器只是忽略它们。但可能是使用它们的处理器或框架会出错（这是他们应该做的）。

# xml - XML 错误 - 格式不正确

> ID：10875265
> 
> 赞同：3
> 
> 时间：2012-06-04T01:02:46.843
> 
> 标签：xml

我不明白为什么我不断收到此错误消息：

在此行找到多个注释：

> *   文档中根元素之后的标记必须格式正确。
> *   错误：解析 XML 时出错：文档元素后出现垃圾

错误在以下开头发现：

```
LinearLayout 
android:orientation="vertical"
android:layout_weight="30"
android:layout_width="fill_parent"
android:layout_height="fill_parent" 
```

**XML:**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" 
android:weightSum="100">
<ScrollView android:layout_weight="30" android:layout_width="fill_parent"  
android:layout_height="fill_parent">
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView" />

<EditText
    android:id="@+id/editText1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:ems="10"/>

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView" />

<EditText
    android:id="@+id/editText2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:ems="10" />

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView" />

<EditText
    android:id="@+id/editText3"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:ems="10" />

<TextView
    android:id="@+id/textView4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView" />
<EditText
    android:id="@+id/editText4"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:ems="10" />

<TextView
    android:id="@+id/textView5"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView" />
<EditText
    android:id="@+id/editText5"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:ems="10" />

<TextView
    android:id="@+id/textView6"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView" />

<EditText
    android:id="@+id/editText6"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:ems="10" />
    </LinearLayout>
</ScrollView>

<LinearLayout
    android:layout_weight="40"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"/>

<Button android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Button"/>
</LinearLayout>

<LinearLayout 
android:orientation="vertical"
android:layout_weight="30"
android:layout_width="fill_parent"
android:layout_height="fill_parent"/>

<AnalogClock
android:id="@+id/analogClock1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"/>

</LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T01:14:54.553

```
<LinearLayout
android:layout_weight="40"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"/>

 <Button android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button"/>
</LinearLayout> 
```

`/`你在 LinearLayout 的开始标签上有一个额外的

下一`LinearLayout`组也有一个

# emacs - 重置emacs中的swank

> ID：10875268
> 
> 赞同：2
> 
> 时间：2012-06-04T01:03:17.637
> 
> 标签：emacs, clojure, swank, swank-clojure

让我描述一下我在 emacs 中遇到的问题。

我使用 clojure-jack-in 开始了 swank。由于某种原因我不得不杀死它，并使用 Mk 杀死了 swank（我不知道是否有更好的方法来关闭它）。

然后我开始了 suber-lisp 模式，它实际上具有与上面相同的键绑定。但是现在当我评估代码时，它显示“未连接”，因为它仍在寻找以前的 swank 服务器。

如何在不重新启动我的 emacs 的情况下重置它？

谢谢，穆尔塔萨

# php - mod_rewrite 搞砸了 php 包括？

> ID：10875271
> 
> 赞同：0
> 
> 时间：2012-06-04T01:03:38.257
> 
> 标签：php, .htaccess

我正在编写一个基本的小 CMS，并使用 RewriteRules 将每个请求重定向到 index.php，然后解析 URI 的其余部分并需要/包含不同的 php 文件来组合请求的站点。URI 的重写和解析似乎工作得很好，但是当我尝试包含一个 php 文件时，index.php 的所有输出都被删除，并且只显示包含的 php 文件的输出。

我写了一个基本的脚本来测试这个问题，但我找不到问题：

index.php

```
<?php
    if(isset($_GET['parameter_1']))
        $get_parameter_1 = $_GET['parameter_1'];

    if(isset($get_parameter_1))
    {
        echo "You favourite colour is ";
        if($get_parameter_1 == "red")
        {
            include('red.php');
        }
        else
        {
            echo "obviously not red.";
        }
    }
    else
    {
        echo "
            Parameter not set.
        ";
    }
?> 
```

red.php

```
<?php
    echo "red";
?> 
```

.htaccess

```
RewriteEngine on

RewriteBase /htaccess_testing/

RewriteRule \.(css|jpe?g|gif|png)$ - [L]
RewriteRule \.(php)$ - [L]

RewriteCond %{REQUEST_URI} ^/[^\.]+[^/]$
RewriteRule ^(.*)$ http://%{HTTP_HOST}/htaccess_testing/$1/ [R=301,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/\.]+)/?$ /htaccess_testing/index.php?parameter_1=$1 [L] 
```

当我请求 www.example.com/htaccess_testing/ 时，它正确显示“未设置参数”。

当我请求 www.example.com/htaccess_texting/blue/ 时，它正确显示“您最喜欢的颜色显然不是红色。”

当我请求 www.example.com/htaccess_testing/red/ 时，它只显示“红色”。而不是“你最喜欢的颜色是红色”。这是它应该做的......

谁能指出我的错误？谢谢/K

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T01:12:12.027

发生这种情况是因为您已指定条件

```
RewriteCond %{REQUEST_FILENAME} !-f 
```

这意味着：如果文件存在，则不要重写。只需删除它

**更新**：

你需要把

```
Options -MultiViews 
```

在你的开始`.htaccess`

# python - 在 Qt Designer 中更改 LCD 数字的颜色

> ID：10875274
> 
> 赞同：1
> 
> 时间：2012-06-04T01:03:48.370
> 
> 标签：python, qt-designer, lcd

我正在用 QtD 编写一个简单的 Python GUI。我不知道（如果可能的话）如何更改 LCD 数字的颜色。它们与背景颜色相同，很难看到。任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T01:32:42.710

设置样式表对我来说似乎很好。在 QDesigner 中，右键单击 lcd 小部件（或者更好的是顶部小部件），单击“更改样式表”并粘贴以下文本：

```
QLCDNumber{
    color: rgb(255, 89, 242);    
    background-color: rgb(0, 85, 0);
} 
```

当你按下 OK 时，你应该有一个 QLCDNumber 与绿色背景上的粉红色数字

我只是随意挑选了一些颜色，不要以可怕的组合来评判我！;)

# ruby-on-rails - 在 heroku 上的 postgresql 数据库中创建一个函数

> ID：10875277
> 
> 赞同：1
> 
> 时间：2012-06-04T01:04:33.533
> 
> 标签：ruby-on-rails, function, postgresql, heroku, plpgsql

我正在尝试在我的 Heroku 数据库上创建一个函数。我最终会把它绑在触发器上。

我已经看到了整个错误，但我似乎看不到解决它的方法。

我得到的错误是......

```
rake aborted!
PG::Error: ERROR:  language "plpgsql" does not exist 
```

我正在阅读的是我无法在 heroku 上创建触发器或函数。除非我使用 shared_database，否则这不是一个选项。我的应用程序已经是多租户的，并且使用了它自己的模式。

我试图按照建议创建语言，但被拒绝了。

问题：我读对了吗，可以在 heroku 上的 postgesql 中创建函数吗？
问题：如果可以在数据库中创建函数，那么有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T10:49:39.367

自 PostgreSQL 9.0 起，程序语言 PL/pgSQL 已预先安装。在早期版本中，您必须运行：

```
CREATE LANGUAGE plpgsql; 
```

每个数据库一次。Heroku 共享的可能仍然是 PostgreSQL 8.3。[更多在精美手册中。](http://www.postgresql.org/docs/current/interactive/sql-createlanguage.html)

但是，据我所知，旧的“共享”计划不允许使用 plpgsql（自己不要使用它）。[不过，PostgreSQL 9.1](https://devcenter.heroku.com/articles/heroku-shared-postgresql)有一个新计划，支持 plpgsql。

# c# - VSTO 加载项、COMAddIns 和 RequestComAddInAutomationService

> ID：10875278
> 
> 赞同：3
> 
> 时间：2012-06-04T01:04:35.053
> 
> 标签：c#, com, vsto, add-in, msdn

**请参阅第一次编辑**（底部的屏幕截图）：

我已经按照这篇文章让 Winform 应用程序触发了 VSTO 加载项方法：http: [//blogs.msdn.com/b/andreww/archive/2007/01/15/vsto-add-ins-comaddins-and -requestcomaddinautomationservice.aspx](http://blogs.msdn.com/b/andreww/archive/2007/01/15/vsto-add-ins-comaddins-and-requestcomaddinautomationservice.aspx)

在上述文章的末尾，作者提到了一个问题并试图在此处进行改进：http: [//blogs.msdn.com/b/andreww/archive/2008/08/11/why-your-comaddin-object-should -派生自-standardolemarshalobject.aspx](http://blogs.msdn.com/b/andreww/archive/2008/08/11/why-your-comaddin-object-should-derive-from-standardolemarshalobject.aspx)

我现在已经多次通过代码，并且**派生 StandardOleMarshalObject 以改善异常的方法不起作用**！

`System.InvalidCastException: Unable to cast COM object of type 'System.__ComObject' to interface type ... This operation failed because the QueryInterface call on the COM component for the interface with IID`

这是一个重现 - 两个项目都针对 .Net 3.5：

a) 创建一个新的 Office > 2007 或 2010 > Excel 加载项：

```
namespace ExcelAddIn1
{
    public partial class ThisAddIn
    {
        private AddinUtilities addinUtilities;
        protected override object RequestComAddInAutomationService()
        {
            if (addinUtilities == null)
            {
                addinUtilities = new AddinUtilities();
            }
            return addinUtilities;
        }
        private void ThisAddIn_Startup(object sender, System.EventArgs e)
        {
        }
        private void ThisAddIn_Shutdown(object sender, System.EventArgs e)
        {
        }
}
} 
```

b) 向 Excel 加载项添加一个类：

```
namespace ExcelAddIn1
{
[ComVisible(true)]
[InterfaceType(ComInterfaceType.InterfaceIsDual)]
public interface IAddinUtilities
{
    void DisplayMessage();
}

[ComVisible(true)]
[ClassInterface(ClassInterfaceType.None)]
public class AddinUtilities :
    StandardOleMarshalObject,
    IAddinUtilities
{
    void IAddinUtilities.DisplayMessage()
    {
        MessageBox.Show("Hello World");
    }
}
} 
```

c) 设置 Project Properties > Build > seklect Register For COM Interop。编译加载项。

d) 新建 Winform App，引用 ExcelAddIn1、Microsoft.Office.Interop.Excel 和 Office，并将此代码包含在 Form1 中：

```
public partial class Form1 : Form
{
private Microsoft.Office.Interop.Excel.Application excel;
private IAddinUtilities utils;
public Form1()
{
    InitializeComponent();
}
private void Form1_Load(object sender, EventArgs e)
{
    excel = new Microsoft.Office.Interop.Excel.Application();
    excel.Visible = true;
    excel.Workbooks.Add(Microsoft.Office.Interop.Excel.XlSheetType.xlWorksheet);
    object addinName = "ExcelAddin1";
    COMAddIn addin = excel.COMAddIns.Item(ref addinName);
    utils = (IAddinUtilities)addin.Object;
    utils.DisplayMessage();
}
} 
```

`utils = (IAddinUtilities)addin.Object;`e) 运行 Winform 应用程序，无论 AddinUtilities 是否派生自 StandardOleMarshalObject ，该行都会失败。

正如 MSDN 博客特别指出的那样，我在这里不知所措：“要解决所有这些问题，您可以简单地从 StandardOleMarshalObject 派生 AddinUtilities 类，然后重建：”

**第一次编辑：**我在另一台 PC-B 上尝试了代码，它可以在没有派生的情况下工作 `StandardOleMarshalObject`，

![在此处输入图像描述](../Images/24cf2872f898d021b06804fcd4270ccc.png)

当我在 PC-B 上尝试时`StandardOleMarshalObject`，我遇到了与 PC-A 相同的问题。PC-A 不适用于任何一种方式，我能想到的唯一区别是管理员权限。

![在此处输入图像描述](../Images/c2871f988756bd404848babc6226815f.png)

管理员权限和 Win7 之前的版本（旧的 msdn 文章）是我能想到它为什么不起作用的唯一原因。

# ios - 是否可以将 Eye-Fi 集成到 iPad/iPhone 应用程序中？

> ID：10875282
> 
> 赞同：2
> 
> 时间：2012-06-04T01:07:05.390
> 
> 标签：ios

[Eye-Fi](http://www.eye.fi)是一种内置 WiFi 模块的 SD 卡 - 因此数码相机中的图像可以直接传输到 iPad。但是 - 您必须安装并运行他们的应用程序。我想知道是否可以将此功能（从 WiFi 卡接收图像）集成到我的 iOS 应用程序中。有没有人对此有任何经验 - 正面或负面的？请问有链接吗？我用谷歌搜索，但我找不到明确的答案。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T03:07:39.783

我一直希望 Eye-Fi 为 3rd 方移动应用程序推出一个 API，以便以某种能力直接与 Eye-Fi 卡集成。

简而言之，目前没有 Eye-Fi API/SDK，但 Eye-Fi 鼓励开发人员通过其[官方开发人员计划与他们的](https://dev.getcirc.com/)[Circ](http://www.getcirc.com/)产品集成。

* * *

这是一个更详细的时间表，涵盖了截至 2013 年 4 月的有关 Eye-Fi API/SDK 的新闻和发展：

Eye-Fi 最初于 2010 年[推出了一个开发者计划](http://mashable.com/2010/09/07/eye-fi-developer-program/)。然而，Eye-Fi 网站上有关该计划的所有链接现在都已失效。

随后，Eye-Fi 论坛在 2012 年底/2013 年初充当了一个有点[临时的等待名单](http://forums.eye.fi/viewtopic.php?t=6958)，以进入开发人员计划的下一个化身。

这基本上以[Circ 开发者计划的宣布](http://forums.eye.fi/viewtopic.php?t=6958#p28158)结束：

> 虽然您是因为对 Eye-Fi API 感兴趣而来到这里的，但我们想告诉您，我们 Eye-Fi 已经开发了一种新的基于云的产品，目前处于测试阶段，称为 Circ，其中包括一个新的公共 API 和基于 SDK 的产品。[...] 像您这样对 Eye-Fi API 感兴趣的人所要求的大部分内容已包含在 Circ.

Circ 开发者计划在这里：[https ://dev.getcirc.com/](https://dev.getcirc.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-28T15:40:16.920

就在这里。我已经做到了。从这里开始：[https ://github.com/Ignigena/PhotoPad](https://github.com/Ignigena/PhotoPad)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-14T05:36:01.393

我最后一次从 EyeFi 听到关于这件事的消息是在 2011 年——他们指出，EyeFi 应用程序在后台运行后会继续将照片写入照片库十分钟。

# joomla - joomla 清单创建者

> ID：10875283
> 
> 赞同：0
> 
> 时间：2012-06-04T01:07:10.427
> 
> 标签：joomla

我已经为 Joomla 创建了一个应用程序，现在需要创建安装清单 XML。

任何人都知道构建这个的任何好的应用程序吗？

我的应用程序同时具有前端和管理组件，因此我需要一些可以为两者创建文件路径的东西。

我尝试了在互联网上找到的几个，但它们都仅限于获取一个组件，前端或管理员，但不能同时获取。

保重，李

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:53:53.547

通常这是需要创建以测试扩展安装的第一件事。老实说，您可以只查看另一个组件的清单并根据自己的需要进行调整。

这是 Joomla 提供的 Joomla 1.5 的基本版本！文档：但是更改`version="1.5.0"`为您使用的任何版本的 Joomla

[http://docs.joomla.org/Developing_a_Model-View-Controller_Component_-_Part_1#Wrapping_It_All_Up_-_Creating_the_hello.xml_File](http://docs.joomla.org/Developing_a_Model-View-Controller_Component_-_Part_1#Wrapping_It_All_Up_-_Creating_the_hello.xml_File)

那里可能有一些你不需要的东西。

节省时间的文件夹结构示例：

```
<files folder="admin">
    <filename>index.html</filename>
    <filename>controller.php</filename>
    <filename>helper.php</filename>
    <filename>shoutbox.php</filename>
    <folder>swfupload</folder>
    <folder>views</folder>
    <folder>tables</folder>
    <folder>controllers</folder>
    <folder>models</folder>
    <folder>assets</folder>
    <folder>install</folder>
    <folder>packages</folder>
</files> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-26T20:53:15.527

[您可以使用Joomla](http://www.component-creator.com)的组件创建器创建一个“重复”组件，并使用其中的清单文件。

# google-chrome - LocalStorage 消息传递问题 - 几乎可以工作

> ID：10875284
> 
> 赞同：1
> 
> 时间：2012-06-04T01:07:41.643
> 
> 标签：google-chrome, google-chrome-extension, local-storage, message-passing

在过去的两天里，我一直在努力让它发挥作用，作为最后的手段，我在这里问。我查看了 StackOverflow 上所有与消息传递相关的帖子、一些博客，当然还有 Google 的消息传递页面。

我构建的 APP 将在包含某些内容的页面中查找链接并替换它的开头。例如，将在 url 中查找“google.com”并将开头替换为“ask.com”。

我遇到的问题是我想将此变量存储在似乎发生的本地存储变量中。但是，当刷新页面时，不会使用传递的新 url。我已经去掉了一些杂乱无章的东西，制作了一个简化版本，以便于调试。请帮忙！很快就没有头发了！

`localStorage["talktest1"]`包含应该更改为从 popup.js 传递的新 URL。然后，当下次加载替换脚本时，它应该使用新`talktest1`变量，但是它继续使用旧的“www.google.co.uk”变量。

`Manifest.js`：

```
{
  "name": "Talk Talk",
  "version": "1.0",
  "description": "Tests stuff.",  
    "browser_action": {
    "default_icon": "img/icon16.png",
    "default_popup": "popup.html"
  },
    "options_page": "options.html",
  "permissions": [
    "tabs", "*://*/*"
  ],
  "background": {
    "scripts": ["js/jquery-1.7.2.min.js","js/bg.js"]
  },
    "icons": { "16": "img/icon16.png",
               "48": "img/icon48.png",
               "128": "img/icon128.png" },
  "content_scripts": [
    {
      "matches": ["*://*/*"],
      "js": ["js/jquery-1.7.2.min.js","js/bg.js"],
      "run_at": "document_end"
    }
  ]
} 
```

`popup.js`：

```
$(document).ready(function() {

    chrome.extension.getBackgroundPage().alert_this();

    $('.link_change').click(function() { // when a link is clicked - url is grabbed from a 'href'

        chrome.extension.sendRequest({localstorage: "http://www.something.com"}, function(response) {
            var email = response.value;
            chrome.extension.getBackgroundPage().alert_this();
        });     

        return false;
    });

}); 
```

`bg.js`：

```
if(!talktest1){
    var talktest1;
}
if(!localStorage["talktest1"]){
    localStorage["talktest1"] = "http://www.google.co.uk";
}

talktest1 = localStorage["talktest1"];

chrome.extension.onRequest.addListener(
    function(request, sender, sendResponse) {       
        localStorage["talktest1"] = request.localstorage;
        talktest1 = request.localstorage;
        sendResponse({value: localStorage.talktest1});
    }
);

function alert_this(){
    alert("localstore|" + localStorage["talktest1"]);
    alert("talktest1|" + talktest1);
}

$("a[href*='google.com']").each(function(){ 
    this.href = this.href.replace('http://www.ask.com',talktest1);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:02:01.670

1.  Why do you use `bg.js` as a both background page and a content script? It doesn't make any sense. `chrome.extension.onRequest` can't be used in a content script and throws you an error on console. Put `$("a[href*='google.com']")...` part in a different script (something like `content.js`) and update your `manifest.json`.

2.  You haven't set up a `manifest_version` and the default is 1 where `background` setting wasn't available ([source](http://code.google.com/chrome/extensions/manifestVersion.html)), there was only a `background_page`.

3.  `$('.link_change').click` in `popup.js` reacts only on links inside the popup being clicked, not links from the site. Is that what you intended? Popup lives its own life, it doesn't have any idea about currently open website.

4.  I believe you can't display an `alert()` from a background page. Does your `alert_this()` function even work?

5.  Are there any errors in popup or on the bg page? Have you debugged it? You should try putting a breakpoint in `onRequest` listener function (bg.js) and see what happens there (is `request.localstorage`, ok? Are values being set correctly?). To debug a background page please use `Inspect active views` option under your extension on the chrome extensions page.

# ember.js - 在 Ember Data 中的何处指定模型的复数形式？

> ID：10875285
> 
> 赞同：17
> 
> 时间：2012-06-04T01:07:57.100
> 
> 标签：ember.js, ember-data

我有一个以 -y 结尾的模型类型：安全性

如何告诉 Ember Data 使用 /securities 而不是 /securitys 来查找资源？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-09T18:45:17.343

向 create 方法添加哈希似乎不适用于最新版本的 Ember Data。我使用此票证中的建议使 RESTAdapter.configure 方法按预期工作：[https](https://github.com/emberjs/website/pull/218) ://github.com/emberjs/website/pull/218 。

```
DS.RESTAdapter.configure("plurals", { person: "people" });
App.Store = DS.Store.extend({
  revision: 11,
  adapter: DS.RESTAdapter.create({
    namespace: 'api'
  })
}); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-04T01:07:57.723

在挖掘 Ember 数据源之后，您需要做的是为您创建的 DS.RESTAdapter 添加一个哈希，阿拉：

```
App.store = DS.Store.create({
  适配器：DS.RESTAdapter.create({ bulkCommit: false,
                                   复数：{“证券”：“证券”}}），
  修订：4
});

```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-02-17T21:06:41.190

**从 ED 1.0.0-beta 起，这与复数最相关**

使用 ember-data beta 及更高版本，您可以定义不规则且不可数的复数形式，如下所示：

```
Ember.Inflector.inflector.irregular('formula', 'formulae');
Ember.Inflector.inflector.uncountable('advice'); 
```

例子：

```
import DS from 'ember-data';
import Ember from 'ember';

var ApplicationAdapter = DS.RESTAdapter.extend({
  namespace: 'api'
});

var inflector = Ember.Inflector.inflector;
inflector.uncountable('advice'); //only makes call to /advice

export default ApplicationAdapter; 
```

# mysql - 为什么此代码与 nodejs 和everyauth 会因 MySQL 中的空数组而崩溃？

> ID：10875288
> 
> 赞同：3
> 
> 时间：2012-06-04T01:08:48.007
> 
> 标签：mysql, node.js, everyauth

我有一些代码可以连接到 MySQL 数据库以验证任何用户...此代码工作正常。问题是当我从 MySQL 收到一个空数组时，它会使 nodejs 崩溃...

这是everyauth中代码的一部分...... sql是一个导出函数......

```
var promise = this.Promise();

sql.getUserInfo(userInfo, function(user, err) {
    if(err) return promise.fulfill([ err ]);

    promise.fulfill(user);
});

return promise; 
```

我不知道是什么`promise`，但不认为这是问题所在。这是nodejs崩溃时控制台中的错误：

```
starting step - extractLoginPassword
...finished step
starting step - authenticate
[]//--- it cames from mysql when there is no user and password 

timers.js:96
            if (!process.listeners('uncaughtException').length) throw e; 
```

这是调用数据库并提取信息的导出函数：

```
exports.getUserInfo = function(user, callback) {
  var email = user.email;
  var passwd = user.password;
  var sql = "SELECT id_email, contrasena FROM usuarios.usuario WHERE id_email = ? AND contrasena = ? ";
  var params = [email, passwd];

  client.query(sql, params, function(err, rows) {

    if (err) return callback(null, err);
    if (rows && rows.length > 0) {
      var user = rows[0];

      callback(user,err);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T16:03:18.150

只需检查查询是否真的返回了一些东西，如果是，则完成一些错误

```
sql.getUserInfo(userInfo, function(user, err) {
                if(err) return promise.fulfill([ err ]);
                if(!user) return promise.fulfill(['Authentication error']);
                promise.fulfill(user);
            }); 
```

应该可以正常工作^

# java - ArrayList 中的对象是否还有引用？

> ID：10875290
> 
> 赞同：2
> 
> 时间：2012-06-04T01:09:20.440
> 
> 标签：java, reference, arraylist, lwjgl

我用 LWJGL 制作了一个简单的“游戏”，让您可以控制一个三角形（这与我的 OpenGL 知识范围有关），当您按下空格键时，该三角形会射出较小的三角形。每个射弹在创建时都存储在一个 ArrayList 中：`projectiles.add(new Projectile(x, y));`. 我可以通过循环访问这些（代码如下所示），这是否意味着引用仍然存在？

```
for (int i = 0; i < projectiles.size(); i++) {
    projectiles.get(i).shoot();
} 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T01:12:02.290

是的，存在对您的射弹的可访问引用，因此射弹不受垃圾收集的影响。

当它们不再相关时，您将需要从 ArrayList 中删除它们，否则您将慢慢“泄漏”内存。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-04T01:19:39.783

答案是“可能”。

ArrayList 引用了它所拥有的元素，但是......

如果您的代码引用了 ArrayList，则也引用了元素（通过 ArrayList 引用）。

如果您的代码未引用 ArrayList，则不会引用元素，**并且**ArrayList 及其所有元素都可能被垃圾回收。要取消引用 ArrayList 及其所有元素，只需执行`list = null;`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T01:20:07.627

> 那么这是否意味着引用仍然存在？

是的，它确实。（Java 中的对象列表是对对象的引用列表。该语言在对象和它们的引用之间没有真正的区别......它们是不可分割的。）

第二个问题是列表本身存在多长时间，但简单的规则是，如果您的应用程序有某种方式访问​​对它的（硬）引用，那么一个对象（任何对象！）将继续存在于 Java 中。

在您的示例中，如果您的应用程序仍然可以执行该循环，则保证列表中的对象存在。时期。

请注意，将对列表的引用设置为 null 会导致循环失败；即它使我刚才所说的前提条件无效。此时，列表及其内容*可能*仍然存在，也可能不存在。但从执行循环代码的角度来看，这是没有意义的。

（唯一的问题是，如果应用程序保留了对它不打算使用的对象的引用，那么该对象很可能会继续存在。这是内存泄漏，它*可能是一个问题*......如果它发生太多了。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T02:28:45.457

是的，通常 ArrayList 仅包含引用而不是完整对象。当您尝试从 arraylist 中检索时，它会为您提供参考。这就是为什么您不需要实例化用于存储从 arraylist 检索的值的对象的原因。

# solr - Solr 位置分面搜索

> ID：10875293
> 
> 赞同：0
> 
> 时间：2012-06-04T01:09:51.123
> 
> 标签：solr, location, facet

我正在使用 solr 进行多面搜索。我在 Solr 中填充了数据，典型的文档如下所示：

```
<doc>
<str name="id">1</str>
<date name="last_modified">2012-06-03T07:23:11.215Z</date>
<str name="location">22.60325666,114.1371245</str>
<int name="media_type">0</int>
</doc> 
```

当我运行查询时： {!geofilt pt=37.3320927,-121.90056663 d=100 sfield=location d=5} 我得到 2 个文档。同样，当我运行： {!geofilt pt=37.3320927,-121.90056663 d=100 sfield=location d=50} 我得到 6 个文档。

但是当我运行查询时：

```
http://localhost:8983/solr/select?sfield=location&pt=37.3320927,-121.90056663&facet.query={!geofilt%20d=10%20key=d10}&facet.query={!geofilt%20d=20%20key=d20}&facet.query={!geofilt%20d=50%20key=d50}&wt=xml&facet=true 
```

我得到回应：

同样适用于：

```
http://localhost:8983/solr/select?sfield=location&pt=37.3320927,-121.90056663&facet.query={!geofilt%20d=10%20key=d10}&facet.query={!geofilt%20d=20%20key=d20}&facet.query={!geofilt%20d=50%20key=d50}&wt=xml&facet=true 
```

我得到回应：

有什么我做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T21:53:30.637

通过使用查询，我得到了一些工作：

```
http://localhost:8983/solr/select?q=*:*&sfield=location&pt=37.3320927,-121.90056663&facet.query={!frange l=0 u=5}geodist()&facet.query={!frange l=5.001 u=20.0}geodist()& &facet.query={!frange l=20.001 u=100}geodist()&facet.pivot=media_type&wt=xml&facet=true&rows=0 
```

下一个问题是如何在查询中添加另一个方面？具体来说，在这种情况下，我想使用 media_type 分解结果。

# django - 连接到 Amazon Web Services 时的 httplib.HTTPSConnection 超时

> ID：10875296
> 
> 赞同：2
> 
> 时间：2012-06-04T01:10:07.370
> 
> 标签：django, amazon-s3, boto, httplib

我已按照在我的应用程序中安装和启用 django-storages 和 boto 的所有说明将文件上传到 S3。（由于此应用程序旨在部署在 Heroku 上，因此我使用 virtualenv 来管理依赖项。）

对于本地开发，我已将所有凭据放入 ~/.bash_profile：

```
export AWS_ACCESS_KEY_ID=xxxx
export AWS_SECRET_ACCESS_KEY=yyyy
export S3_BUCKET_NAME=zzzz 
```

所以，太好了，但接下来是：

```
> python manage.py shell
>>> import boto
>>> conn = boto.connect_s3()
>>> conn.get_all_buckets() 
```

产生这些调试消息和这个错误：

```
2012-06-04 23:17:34,432 [DEBUG] boto: path=/
2012-06-04 23:17:34,432 [DEBUG] boto: auth_path=/
2012-06-04 23:17:34,433 [DEBUG] boto: Method: GET
2012-06-04 23:17:34,433 [DEBUG] boto: Path: /
2012-06-04 23:17:34,433 [DEBUG] boto: Data: 
2012-06-04 23:17:34,433 [DEBUG] boto: Headers: {}
2012-06-04 23:17:34,433 [DEBUG] boto: Host: s3.amazonaws.com
2012-06-04 23:17:34,433 [DEBUG] boto: establishing HTTPS connection: host=s3.amazonaws.com, kwargs={'timeout': 2}
2012-06-04 23:17:34,433 [DEBUG] boto: Token: None
2012-06-04 23:17:34,436 [DEBUG] boto: StringToSign:
GET

Tue, 05 Jun 2012 03:17:34 GMT
2012-06-04 23:17:36,900 [DEBUG] boto: encountered SSLError exception, reconnecting
2012-06-04 23:17:36,901 [DEBUG] boto: establishing HTTPS connection: host=s3.amazonaws.com, kwargs={'timeout': 2}
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "../venv/lib/python2.7/site-packages/boto/s3/connection.py", line 346, in get_all_buckets
    response = self.make_request('GET', headers=headers)
  File "../venv/lib/python2.7/site-packages/boto/s3/connection.py", line 454, in make_request
    override_num_retries=override_num_retries)
  File "../venv/lib/python2.7/site-packages/boto/connection.py", line 838, in make_request
    return self._mexe(http_request, sender, override_num_retries)
  File "../venv/lib/python2.7/site-packages/boto/connection.py", line 803, in _mexe
    raise e
SSLError: _ssl.c:484: The handshake operation timed out 
```

我无法理解的是，使用相同的确切凭据，我可以使用 Mac 上的 GUI 浏览 S3 进行连接，而不会出现任何问题。我可以列出所有的桶。我可以进入桶 zzzz。我可以上传一个文件给它。我可以重新下载。我可以删除它。一切都很好。但无论我通过 Boto 尝试什么，它都会超时，没有进一步的评论。

**为什么 boto 在我的本地环境中超时？**

## 更新

我能够将以下范围缩小到：

```
>>> import httplib
>>> h1 = httplib.HTTPSConnection('s3.amazonaws.com')
>>> h1.request ("GET", "/")
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 958, in request
    self._send_request(method, url, body, headers)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 992, in _send_request
    self.endheaders(body)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 954, in endheaders
    self._send_output(message_body)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 814, in _send_output
    self.send(msg)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 776, in send
    self.connect()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 1161, in connect
    self.sock = ssl.wrap_socket(sock, self.key_file, self.cert_file)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ssl.py", line 382, in wrap_socket
    ciphers=ciphers)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ssl.py", line 143, in __init__
    self.do_handshake()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ssl.py", line 306, in do_handshake
    self._sslobj.do_handshake()
error: [Errno 60] Operation timed out 
```

然而：

```
>>> h1 = httplib.HTTPSConnection('google.com')
>>> h1.request ("GET", "/")
>>> r1 = h1.getresponse()
>>> print  r1.status, r1.reason
301 Moved Permanently 
```

AWS 是什么让 httplib.HTTPSConnection 搞砸了？

（我知道上面的请求不是正确和完整的 AWS 请求，但我简化了它只是为了尝试从服务器获得响应。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:15:49.150

基于调试输出中的这一行：

```
boto: establishing HTTPS connection: host=s3.amazonaws.com, kwargs={'timeout': 2} 
```

我假设你已经在你的 boto 配置文件中放了这样的东西：

```
[Boto]
http_socket_timeout = 2 
```

那是对的吗？如果是这样，如果将此超时时间增加到 10 秒或 20 秒，会发生什么情况。你还有超时吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T19:47:35.533

不幸的是，问题似乎出在我的家庭互联网上！当我把笔记本电脑带到别处工作时，问题并没有重演。所以这个问题与 Django、Boto、AWS、S3、SSL、Python 或任何远程有趣的东西无关，而与时代华纳有线电视的糟糕程度有关。你相信吗？！

# flash - 从 .as 类调用 Facebook Api

> ID：10875297
> 
> 赞同：0
> 
> 时间：2012-06-04T01:10:08.157
> 
> 标签：flash, facebook-graph-api, flash-cs5

请我尝试使用 Facebook Api 但我收到这些错误

```
D:\proyectos\pa-mago-yo\MainFBtest.as, Línea 4  1172: No se encontró la definición com.facebook.graph:Facebook.
D:\proyectos\pa-mago-yo\MainFBtest.as, Línea 3  1172: No se encontró la definición com.adobe.serialization.json:JSON.
D:\proyectos\pa-mago-yo\MainFBtest.as, Línea 65 1120: Acceso a una propiedad Facebook no definida. 
```

我正在导入这些库

```
 import com.adobe.serialization.json.JSON;
 import com.facebook.graph.Facebook; 
```

我把 FacebookGraphAPI.swc 放在同一个目录中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T19:19:29.020

我必须在 Flash 电影中的“Configuration de ActionScript”选项中聚合“FacebookGraphAPI.swc”，然后是“ruta de biblioteca”，仅此而已

# c++ - C++ 异常开销和抛出指令

> ID：10875301
> 
> 赞同：0
> 
> 时间：2012-06-04T01:10:49.803
> 
> 标签：c++, try-catch, throw

> **可能重复：**
> [异常如何在 C++ 中工作（在幕后）](https://stackoverflow.com/questions/307610/how-do-exceptions-work-behind-the-scenes-in-c)

我知道 try/catch 块会在运行时增加一点开销。但是对于没有 try/catch 块的单个“抛出”指令，情况是否如此？

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T01:16:21.493

如果 throw 没有 try/cache，那么 throw 是没有意义的，会导致应用程序崩溃。

# c - 我收到损坏的变量错误

> ID：10875307
> 
> 赞同：1
> 
> 时间：2012-06-04T01:12:05.860
> 
> 标签：c

好吧，我有一个实验室要做功课，我想知道是否有人可以帮助我解决这个问题。程序一直说我的变量已损坏。如果有人可以帮助我，那就太好了。顺便说一句，不介意这些问题哈哈。

```
int main (void)
{
char answer;

printf("welcome to the celebrity look alike game. You will be asked 5 yes or no questions. To answer please either put a y for yes or an n for no");
printf("\nQuestion 1: Do you have brown eyes?");
scanf("%1s", &answer);
if (answer=='y')
    {printf("\nQuestion 2:Do you have white hair?");
    scanf("%1s", &answer);
    if (answer=='y')
        printf("\nQuestion 3:Is your height around 5 feet 10 inches?");
        scanf("%1s", &answer);
        if (answer=='y')
            printf("\nQuestion 4:Are you a slim man?");
            scanf("%1s", &answer);
            if (answer=='y')
                printf("\nQuestion 5: Do you dress well?");
                scanf("%1s", &answer);
                if (answer=='y');
                    printf("You really look like Matt Leblanc!");}
else printf("Sorry, you do not look like this celebrity.");

return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T01:27:49.140

问题是它`answer`属于 datatype `char`，但`scanf()`被告知将其视为长度为（至少）2的字符数组。这会导致`scanf()`将变量写入内存中发生的任何事情。在这种情况下，没有其他变量可以乱写，它可能正在破坏程序的堆栈。

有几种方法可以解决这个问题。

代码还有其他几个问题：

*   if..then..else 结构有缺陷。*除非除*最后一个之外的所有条件都为真，否则它不会显示“看起来不像这个名人”消息。
*   缩进不决定语句嵌套。您必须显式使用花括号对语句进行分组。
*   为了以可预测的方式处理用户输入，您可能希望坚持让他们使用`y`or来回答`n`。在编写程序时，它将接受`X`和`7`作为“否”的同义词。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T01:29:01.373

您需要更改`scanf("%1s", &answer);`为`scanf("%c", &answer);`. 前者会尝试读取一个*字符串*，这需要两个字符——一个读取字符和一个空字符来终止*字符串*。后者只是读取一个字符。

因为`answer`只有一个字符读取一个*字符串*会破坏您的记忆。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T01:27:57.663

我认为问题在于您使用`scanf`如下：

```
scanf("%1s", &answer); 
```

虽然您的变量`answer`只是一个`char`. 请记住，C 字符串总是以空字符终止，因此只有一个字符的字符串需要存储两个字符——字符本身和空终止符。因此，当您尝试将该字符串存储在单个字符中时，您最终会在`char`变量之后立即丢弃内存，因为`scanf`试图在其中放置一个空字符。

要解决此问题，请更改您的声明为`answer`，`char answer[2]`或更改您的`scanf`，以便您阅读单个字符：

```
scanf("%c", &answer); 
```

或者使用`getchar()`.

希望这可以帮助！

# c# - 使用标志恢复停止的线程

> ID：10875310
> 
> 赞同：1
> 
> 时间：2012-06-04T01:12:20.347
> 
> 标签：c#, multithreading

我有以下代码：

```
class SoundPlayback
{ 
        protected volatile bool _playing;
        public bool Playing {...}

        protected void Begin()
        {
            while (Playing && _sheet.TimeTick != 0)
            {
                _sheet.PlaySounds();
                Thread.Sleep(_sheet.TimeTick);
            }
            _playing = false;
        }
} 
```

我有一个使用线程启动调用 Begin() 的线程，它第一次工作正常，但是当 _playing 为 false 并且我想恢复播放时，我不能。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T01:18:15.317

线程（*任何*线程，不仅仅是.Net）：

*   睡眠：不好

*   事件阻止：好

看看这个最优秀的教程中的“同步要点”：

*   [http://www.albahari.com/threading/part2.aspx#_Synchronization](http://www.albahari.com/threading/part2.aspx#_Synchronization)

并将您的循环更改为：

1）调用其他一些函数来做“工作”

2）依赖一些全局“完成”变量（而不是在“TimeTick！= 0”时退出！！！！！）

# css - 无法删除列表样式图像

> ID：10875314
> 
> 赞同：1
> 
> 时间：2012-06-04T01:13:04.307
> 
> 标签：css, html

我有一个奇怪的问题。

正如你在这里看到的~~[http://www.skywarder.eu/blog/](http://www.skywarder.eu/blog/)~~¹右侧边栏上有两个语言标志。

我正在努力删除列表样式图像，但直到现在我还没有成功。你能帮我一把吗？

谢谢

这是我的CSS

```
/* qTranslate Widget */
.qtrans_language_chooser {
list-style:none;
}

.qtrans_language_chooser li {
float:left;
margin-left:3px;

} 
```

¹网站已更改，链接不再与问题相关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T01:27:29.310

箭头来自 style.css 第 572 行的这条规则

```
.widget li {
    list-style-image: url("img/side_arrow.gif");
    list-style-position: outside;
} 
```

要仅针对翻译小部件覆盖该小部件，您需要添加以下规则：

```
.widget .qtrans_language_chooser li {
    list-style: none;
} 
```

# android - Android - 将 AdMob 添加到视图时出现问题

> ID：10875316
> 
> 赞同：0
> 
> 时间：2012-06-04T01:14:16.033
> 
> 标签：android, view, admob, android-linearlayout

我正在制作一款安卓游戏。我有我的 Main 类，它扩展了活动，我的 Game 类扩展了 View。

我将 Activity 的内容视图设置为 Game 类的实例。所以，我从不使用任何用 XML 制作的布局。

我在将 AdMob 广告添加到 Game 对象时遇到问题。我不确定如何设置它。这就是我现在所拥有的：

```
AdView adView;
String AD_ID = "XXXXXXXXXXXXXX";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                            WindowManager.LayoutParams.FLAG_FULLSCREEN);

    game = new Game(this);

    setContentView(game);

    // Create the adView
    adView = new AdView(this, AdSize.BANNER, AD_ID);

    LinearLayout layout = (LinearLayout)game; // ERROR HERE

    // Add the adView to it
    layout.addView(adView);

    // Initiate a generic request to load it with an ad
    adView.loadAd(new AdRequest());
}

public class Game extends View{
...
} 
```

另外，这是在我的清单中：

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"></uses-permission>

<application
    android:icon="@drawable/icon"
    android:label="@string/app_name" >

    <activity 
        android:name="com.google.ads.AdActivity"
        android:configChanges="keyboard|keyboardHidden|orientation"
       /> 
```

我不确定如何使用 LinearLayout 并在扩展 View 的类中显示广告。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T02:34:12.923

这应该适合你：

```
AdView adView;
String AD_ID = "XXXXXXXXXXXXXX";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                            WindowManager.LayoutParams.FLAG_FULLSCREEN);

          LinearLayout mainPanel = new LinearLayout(this);

          mainPanel.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                                           LayoutParams.FILL_PARENT));
          mainPanel.setOrientation(LinearLayout.VERTICAL);

          Game game = new Game(this);
          adView = new AdView(this, AdSize.BANNER, AD_ID);

          mainPanel.addView(game);
          mainPanel.addView(adView);

         // Initiate a generic request to load it with an ad
          adView.loadAd(new AdRequest());

          setContentView(mainPanel);

}

public class Game extends LinearLayout{
...
} 
```

# php - 重定向一个php提交表单

> ID：10875322
> 
> 赞同：0
> 
> 时间：2012-06-04T01:15:01.743
> 
> 标签：php

在以下 php 脚本中，每次我添加重定向标头时，Dreamweaver 都会给我一个语法错误：

```
header('Location: thankyou.htm'); 
```

信息发送到我的电子邮件地址没有问题，但客户没有重定向到thankyou.htm 页面。我是否输入完整的网址都没有关系。真诚感谢任何帮助。请保持简单的解释 - 谢谢！

请看下面...

```
<?php

$senderName = $_POST['name'];
$senderEmail =  $_POST['email'];
$sendToEmail = "wildlifeart@heathersoos.ca";
$emailMessage = $_POST['message'];

$recipient = "$sendToEmail";

$headers = "From: $senderEmail ";
$message = "From: $senderName, \nEmail Address: $senderEmail\nMessage: $emailMessage";
$message = StripSlashes($message);

mail($recipient, "Heather's Artwork", $message, $headers)

header('Location: thankyou.htm');

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T01:16:43.147

您在以下位置缺少分号 ( `;`)

```
mail($recipient, "Heather's Artwork", $message, $headers); <-- here 
```

# java - JSP 中的 Scriptlet - 访问请求对象

> ID：10875325
> 
> 赞同：6
> 
> 时间：2012-06-04T01:15:49.063
> 
> 标签：java, jsp, scriptlet

我知道在 JSPS 中使用 jstl 是最好的，但我被明确告知在这个项目中使用 scriptlet。我的问题是我的 servlet 将一个 Arraylist 项目附加到请求对象，我想使用 scriptlet 循环该项目。

示例：我的 servlet 附加它并将其转发到 jsp

```
 request.setAttribute("list", Content); where Content is Arraylist<String> 
```

jsp 是检索该对象并将其打印在我尝试的页面上：

```
 <%    
          ArrayList<String> cont =  (ArrayList)request.getAttribute("Content");
          for (int i=0;i<cont.size();i++)
          {
              out.println(cont.get(i));

          }
   %> 
```

这是我得到的错误

```
org.apache.jasper.JasperException: An exception occurred processing JSP page /EnrolledSuccess.jsp at line 35

32:           ArrayList<String> cont =  (ArrayList)request.getAttribute("cont");
33:           for (int i=0;i<=cont.size();i++)
34:           {
35:               out.println(cont.get(i));
36:               
37:           }
38:    %> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T02:08:28.830

尝试`Arraylist`使用`Iterator`.

`out.println`打印到浏览器并`System.out.println()`打印到服务器控制台。

```
<%    
          ArrayList<String> cont =  (ArrayList)request.getAttribute("list");
          Iterator<String> itr = cont.iterator();
          while (itr.hasNext()) {
          String element = itr.next();
          out.println(element);
    }
   %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T01:19:26.180

你试过request.getAttribute吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T01:33:32.530

```
first, you must get attribute from request.
<br/>
<%<br/>
  ArrayList<String> list = (ArrayList<String>)request.getAttribute("list");<br/>
    for(int i = 0; i < list.size(); i++){<br/>
        //you can print the value<br/>
        out.printLn(list.get(i));<br/>
    }<br/>
%><br/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T02:24:45.773

ArrayList 的索引从“0”开始，所以在 for 循环中，条件应该是 i

# oracle - 如何保存我的 Oracle Toad 连接以转移到新 PC？

> ID：10875330
> 
> 赞同：14
> 
> 时间：2012-06-04T01:16:30.267
> 
> 标签：oracle, toad

我想搬到新的 PC 上并带上我的 Toad 连接，因为我有几个，不想全部重新输入。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-30T08:39:27.297

将**%APPDATA%\Dell\Toad for Oracle\ *VERSION* \User Files 文件**夹复制到您的新 PC。

IE。

C:\Users\ *USERNAME* \AppData\Roaming\Dell\Toad for Oracle\ *VERSION* \User Files

C:\Documents and Settings\ *USERNAME* \Application Data\Dell\Toad for Oracle\ *VERSION* \User Files

当心：在旧版本的 Toad “Dell”中，上述路径曾经是“Quest Software”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T01:19:42.553

您必须保存各自的 oracle 安装的 tnsnames.ora 文件。另外，我相信 TOAD 使用 TNS_ADMIN 环境变量来定位它正在使用的 TNS_NAMES.ORA。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-10-16T19:42:22.910

Toad 12.6 - 64 位处理文件夹对我不起作用。Toad 有新的选项 - 菜单实用程序 -> 复制用户设置。这有效并导入了用户名和密码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-04T15:49:42.457

在旧机器上：菜单>会话>新连接

然后选择所有连接并使用导出按钮（带有指向右下的蓝色箭头 - 位于弹出屏幕的顶部）。

在新机器上：菜单>会话>新连接

然后使用导入按钮（带有向上的蓝色箭头 - 位于弹出屏幕的顶部）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-25T05:16:00.073

还要注意的是，在 Evan 指定的新计算机文件夹目标中（通常它在 ADMIN 文件夹中，您可以搜索 ora 格式，很少有其他格式的文件）。如果在安装 Toad 后，已经存在 tnsname.ora 文件，您必须做一些工作：

1.  复制和粘贴
2.  如果遇到问题，请退出该文件夹，右键单击并选择管理视图（尤其适用于 Windows 7 和 vista）
3.  允许您编辑文件
4.  如果不允许粘贴，只需剪切并移动现有的 tnsname.ora 文件并将其“剪切”出文件夹
5.  然后将正确的移入
6.  通常您现在可以在 ADMIN 文件夹之外编辑 tnsname.ora 文件，随意打开然后粘贴所有 TNS 名称。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-19T17:40:50.827

转到`%APPDATA%\Quest Software\Toad`文件`Oracle\VERSION\User Files\`夹。将以下文件：`CONNECTIONACTIONS.INI`和`Connections.xml`, 复制到新 PC 的同一文件夹中。

IE。`C:\Users\USERNAME\AppData\Roaming\Quest Software\Toad for Oracle\13.2 Trial\User Files`

# ruby-on-rails-3 - Rails 3.2 如何只为新记录调用 before_validation

> ID：10875333
> 
> 赞同：2
> 
> 时间：2012-06-04T01:16:48.590
> 
> 标签：ruby-on-rails-3, sti

Rails 3.x`before_validation(:on => :create) do`不工作。任何其他想法表示赞赏

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-15T04:27:03.693

这就是我做得很好的作品。

```
before_validation do
  if self.new_record?      
    # do something here
  end
end 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-04T14:56:25.120

您可以使用以下方法向回调添加条件：

```
before_validation :do_something, :unless => Proc.new { |model| model.persisted? } 
```

# apache - Apache (XAMPP 1.8.0) access.log/入侵检测问题

> ID：10875335
> 
> 赞同：0
> 
> 时间：2012-06-04T01:17:11.810
> 
> 标签：apache, xampp

我在 Vista Pro x64 上运行 Apache (XAMPP 1.8.0)。现在有几次我在`access.log`. 令人担忧的是，“攻击”似乎以某种方式从我的网络上的公共 IP 转移到了有效的私有 IP（恰好是我的一个路由器的 WAN 地址）。

两个问题：源IP地址怎么可能改变，如果“攻击者”偶然发现一个有效的请求会发生什么？

我用谷歌搜索了这个无济于事。

```
177.0.X.X - - [03/Jun/2012:08:19:34 -0400] "GET /phpMyAdmin-2.5.4/index.php HTTP/1.1" 403 
177.0.X.X - - [03/Jun/2012:08:19:34 -0400] "GET /phpMyAdmin-2.5.5-rc1/index.php HTTP/1.1" 403 
177.0.X.X - - [03/Jun/2012:08:19:34 -0400] "GET /phpMyAdmin-2.2.6/index.php HTTP/1.1" 403 
177.0.X.X - - [03/Jun/2012:08:19:34 -0400] "GET /phpMyAdmin-2.5.5-rc2/index.php HTTP/1.1" 403 
192.168.15.3 - - [03/Jun/2012:08:19:56 -0400] "GET /phpMyAdmin-2.5.6-rc2/index.php HTTP/1.1" 403 
177.0.X.X - - [03/Jun/2012:08:19:56 -0400] "GET /phpMyAdmin-2.5.6-rc1/index.php HTTP/1.1" 403 
177.0.X.X - - [03/Jun/2012:08:19:56 -0400] "GET /phpMyAdmin-2.5.5-pl1/index.php HTTP/1.1" 403 
192.168.15.3 - - [03/Jun/2012:08:19:59 -0400] "GET /phpMyAdmin-2.5.7/index.php HTTP/1.1" 403 
192.168.15.3 - - [03/Jun/2012:08:20:01 -0400] "GET /phpMyAdmin-2.5.7-pl1/index.php HTTP/1.1" 403 
192.168.15.3 - - [03/Jun/2012:08:20:02 -0400] "GET  HTTP/1.1" 400 1060 "-" "-" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:54:26.593

这是一种正常的情况，公共 IP（以及它们背后的本地网络）不断被黑客扫描，其他人喜欢这些工具和脚本。当我第一次查看我的家庭服务器日志时，我发现有多少（数千）次这种近乎随机的访问尝试是对我的 IP 进行的，这是外部的（稳定的），但在这个意义上，我是私有的，我感到震惊和恐惧。仅将其用于私人问题，不要在任何地方发布。

这是你的第一个问题，关于它是如何可能的。欢迎来到今天的世界！:]

至于你的第二个问题，会发生什么？这取决于您是否考虑了足够的安全问题，例如使用强密码保护 MySQL 的 root 用户或完全删除它。有权访问有效的 URL 并不意味着有人已授予对其背后服务的访问权限。使用加密 (SSL) 和强密码，您可以睡得很好。

BTW：虽然这涉及到 XAMPP，但这并不是纯粹的开发问题。考虑将这样的问题发布到 StackOverflow 的名为“ServerFault”的姊妹项目。

# javascript - 在jquery中成功加载内容之前使用加载图像

> ID：10875337
> 
> 赞同：2
> 
> 时间：2012-06-04T01:17:41.437
> 
> 标签：javascript, jquery

我使用 JSON 从我的控制器中检索数据并使用 jquery 将其打印在我的视图上。当用户单击菜单链接时显示内容。在内容加载之前，用户必须等待几秒钟。

所以在这期间，我想在我的视图中显示加载图像，当内容显示成功时，加载图像隐藏。

这是我放置加载图像的 html：

```
<div id="loading" style="position:relative; text-align:center;">  
   <img src="/Content/Images/loading.gif" alt="Processing" />
</div> 
```

这是 jquery 的示例函数：

```
function ViewProduct() {
  $('#loading').hide();
  $("#content ul#navmenu-v").empty();
  $.getJSON(url, function (data) {
     $.each(data, function (index, dataOption) {
     var new_li = $("<li class='level1' id='select_list'><a href='javascript:void(0);' id='" + dataOption.ID + "' class ='selectedcategory'>" + dataOption.Name + "</a>");
        mainMenu.append(new_li);
        $('a#' + dataOption.ID).click(function () {
            //display the loading image
            $.getJSON("ProductListing/Index", data, function (product) {
                //append the content in the body of web page
            });
        });
    });
}); 
```

}

这是我调用函数的地方：

```
$(document).ready(function () {
   ViewProduct();
}); 
```

问题：我想在点击后隐藏加载图像。任何人都可以告诉我这件事吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T04:01:36.533

`$.getJSON(url, [, data], [, callback])`是简写

```
$.ajax({
  url: url,
  dataType: 'json',
  data: data,
  success: callback
}); 
```

[jQuery.ajax 规范](http://api.jquery.com/jQuery.ajax/)表明我们可以指定一个无论 AJAX 请求是否成功都会触发的回调。我们将使用它来隐藏请求后的加载图标：

```
function ViewProduct() {
    $('#loading').hide();
    $("#content ul#navmenu-v").empty();

    $.getJSON(url, function (data) {
        $.each(data, function (index, dataOption) {
        var new_li = $("<li class='level1' id='select_list'><a href='javascript:void(0);' id='" + dataOption.ID + "' class ='selectedcategory'>" + dataOption.Name + "</a>");
        mainMenu.append(new_li);
        $('a#' + dataOption.ID).click(function () {

            //display the loading image
            $('#loading').show();

            $.ajax({
                'type': 'GET',
                'url': 'ProductListing/Index',
                'data': data,
                'dataType': 'json',
                'success': function (product) {
                    //append the content in the body of web page
                },
                'complete': function () {
                    $('#loading').hide();
                }
            });
        });
    });
}); 
```

# ios - TabBarController 是否有像 prepareForSegue 这样的拦截点？

> ID：10875338
> 
> 赞同：9
> 
> 时间：2012-06-04T01:17:48.473
> 
> 标签：ios, model-view-controller, uitabbarcontroller

我正在寻找对标签栏控制器提供的控制器进行一些控制器配置。是否有一个很好的拦截点，我可以将一些值传递给目标控制器，就像 prepareForSegue 方法一样？

非常感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T01:29:27.007

您可以通过 tabviewcontroller 的数组访问来自 tabview 的所有控制器。您可以直接在那里修改它们。如果您希望在用户看到特定内容之前更改某些内容，请设置委托并实现委托方法。（您可以简单地更改此方法中的 vc 并返回 yes）

[http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITabBarControllerDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITabBarControllerDelegate_Protocol/Reference/Reference.html)

```
tabBarController:shouldSelectViewController:

Asks the delegate whether the specified view controller should be made active.
- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController Parameters

tabBarController

    The tab bar controller containing viewController. viewController

    The view controller belonging to the tab that was tapped by the user.

Return Value

YES if the view controller’s tab should be selected or NO if the current tab should remain active. Discussion

The tab bar controller calls this method in response to the user tapping a tab bar item. You can use this method to dynamically decide whether a given tab should be made the active tab. Availability

    Available in iOS 3.0 and later.

Declared In UITabBarController.h 
```

# android - Freetype FT_Request_Size() 在 Android 上崩溃

> ID：10875343
> 
> 赞同：1
> 
> 时间：2012-06-04T01:18:17.887
> 
> 标签：android, crash, freetype, freetype2

我已经在 android 上编译了 freetype 2.4.2，任何时候我尝试使用 FT_Set_Char_Size() 它都会在 FT_Request_Size() 函数中的 ftobjs.c 文件中崩溃这一行

```
error = clazz->request_size( face->size, req );    //line 2832 
```

我的代码在 Windows、Linux、Mac、iPhone 和 iPad 上运行良好。但这是交易。在我使用 /Za“禁用语言扩展”编译 freetype 之前，我遇到了完全相同的问题，在 Windows (vc++) 上的同一位置发生了同样的崩溃。

所以我很确定这是在 Android 上编译 freetype 的方式导致了崩溃。我已经查找了如何在 android 上禁用语言扩展但无济于事。

这是我的免费类型的 Android.mk 文件

```
LOCAL_PATH:= $(call my-dir)
include $(CLEAR_VARS)

LOCAL_C_INCLUDES += \
    $(LOCAL_PATH)/builds \
    $(LOCAL_PATH)/include

LOCAL_SRC_FILES:= \
    src/base/ftbbox.c \
    src/base/ftbitmap.c \
    src/base/ftglyph.c \
    src/base/ftstroke.c \
    src/base/ftxf86.c \
    src/base/ftbase.c \
    src/base/ftsystem.c \
    src/base/ftinit.c \
    src/base/ftgasp.c \
    src/raster/raster.c \
    src/sfnt/sfnt.c \
    src/smooth/smooth.c \
    src/autofit/autofit.c \
    src/truetype/truetype.c \
    src/cff/cff.c \
    src/psnames/psnames.c \
    src/pshinter/pshinter.c \
    src/type1/type1.c \
    src/cid/type1cid.c \
    src/pfr/pfr.c \
    src/type42/type42.c \
    src/winfonts/winfnt.c \
    src/pcf/pcf.c \
    src/psaux/psaux.c \
    src/bdf/bdf.c \
    src/gzip/ftgzip.c \
    src/lzw/ftlzw.c

LOCAL_CFLAGS += -DFT2_BUILD_LIBRARY
LOCAL_MODULE := freetype
LOCAL_LDLIBS := -ldl -llog

include $(BUILD_STATIC_LIBRARY) 
```

我的完整项目可以在这里找到

```
 http://digitalknob.googlecode.com 
```

它编译得很好，我没有收到任何错误。只是我使用 FT_Set_Char_Size() 时的崩溃。现在让我发疯了几天：P非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T22:45:29.163

这是答案。事实证明，问题一直是从 .apk 文件中加载字体文件，因为它在技术上是压缩的。使用 SDL，我们使用 SDL_RWops 在 .apk 文件的 assets 文件夹中加载字体文件。我们使用 ftgles 将字体文件加载到 OpenGLES 中。完整示例可在[www.digitalknob.com找到](http://www.digitalknob.com)

```
SDL_RWops *file = SDL_RWFromFile(filename, "rb"); 

unsigned long fileLen; 
SDL_RWseek(file,0,SEEK_END); 
fileLen=SDL_RWtell(file); 
SDL_RWseek(file,0,SEEK_SET); 

//Allocate memory 
buffer=(unsigned char *)malloc(fileLen+1); 
if (!buffer){ 
   printf("Memory error!\n"); 
   SDL_RWclose(file); 
   return; 
} 

//Read file contents into buffer 
SDL_RWread(file, buffer, fileLen, 1); 
SDL_RWclose(file); 

texture_font = new FTGLTextureFont(buffer, fileLen); 
texture_font->FaceSize(18); 

//don't forget to free your buffer later.
//free(buffer); 
```

如果您不使用 SDL，则需要 zlib 或其他东西来访问字体文件。

# alias - “sudo kill -HUP `cat /usr/local/var/run/nginx.pid`”的 zsh 别名失败

> ID：10875345
> 
> 赞同：1
> 
> 时间：2012-06-04T01:18:37.567
> 
> 标签：alias, zsh

我刚刚切换到 zsh，并将我的所有别名从 ~/.bash_profile 复制到 ~/.zshrc。几乎所有这些都是开箱即用的，但我用来快速杀死 nginx 的那个却没有。它使用 `` 从 pid 文件中为 kill 命令获取 pid 数据。它失败并显示以下内容：

> cat: /usr/local/var/run/nginx.pid: 没有那个文件或目录

所以它试图在定义别名时运行它。我怎么可能解决这个问题？

编辑：别名的定义：

```
 alias knx="sudo kill -HUP `cat /usr/local/var/run/nginx.pid`" 
```

谢谢！

马塞洛。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T23:09:17.893

变量和命令替换（即`$foo`，`$(foo)`和``foo``）在双引号内执行。所以在定义别名的时候：

*   如果`/usr/local/var/run/nginx.pid`不存在，那么您会看到该错误消息，并且别名变为`sudo kill -HUP `.
*   如果`/usr/local/var/run/nginx.pid`存在并包含（例如）42，则别名变为`sudo kill -HUP 42`.

在评估别名之前，您需要保护命令替换不被评估。

```
alias knx='sudo kill -HUP `cat /usr/local/var/run/nginx.pid`' 
```

这会根据需要创建`knx`别名`sudo kill -HUP `cat /usr/local/var/run/nginx.pid``。

推荐阅读：[环境变量中单引号和双引号有什么意义？](https://unix.stackexchange.com/questions/16303/what-is-the-significance-of-single-and-double-quotes-in-environment-variables)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T21:43:24.923

尝试单引号而不是双引号。

# jquery - 单击元素时如何恢复pixastic中的图像？

> ID：10875354
> 
> 赞同：0
> 
> 时间：2012-06-04T01:20:16.733
> 
> 标签：jquery, pixastic

我只是尝试使用以下代码来模糊图像，效果很好。但是我想在单击元素时恢复原状，我该怎么做？

```
$(window).bind("load",function() {

         $(".testclass").pixastic("blurfast", {amount:0.9});
    $(".clickclass").click(function(e){
        // this statement should revert the image
                });
    }
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T01:24:53.657

我从来没有使用过它，但试试这个：

```
$(".clickclass").click(function(e){
      $(this).pixastic("blurfast", {amount:0}); //This should remove the blur
}); 
```

**编辑**：黑暗中的另一个刺：

```
$(".clickclass").click(function(e){
      Pixastic.revert(this);
 }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-07T15:07:06.670

```
adding [0] made a big difference. Definitely did the trick for me. Give it a try

Pixastic.revert($(this).find('.imageUrl')[0]);

Another thing is i had to create a VAR as pixastic creates a duplicate canvas

This is my whole function

$(function () {

        $('.col1.w1').mouseenter(function () {

            var origImg = ($(this).find('.imageUrl'));
            if (origImg.is('img')) {
                Pixastic.process(origImg[0], 'blurfast', { amount: 2 });
            }

        });
        $('.col1.w1').mouseout(function () {
            var origImg = ($(this).find('.imageUrl'));
            Pixastic.revert($(this).find('.imageUrl')[0]);

        });
    }); 
```

# c++ - Makfile 和 SDL 遇到问题

> ID：10875358
> 
> 赞同：0
> 
> 时间：2012-06-04T01:21:48.143
> 
> 标签：c++, linux, makefile, g++, sdl

我仍然习惯于设置 Makefile 和同时使用 SDL，但我无法让 makefile 正常工作。我不知道这是我的 makefile 有问题还是我在 SDL 上做错了什么。这是我的制作文件：

```
#Game Make file
EXEC = game.exe
OBJS = App.o\
   App_OnInit.o\
   App_OnEvent.o\
   App_OnLoop.o\
   App_OnRender.o \
   App_OnCleanup.o
CC = g++ 

CFLAGS = -o $(shell sdl-config --cflags) 
LIBS =
LDFLAGS = $(shell sdl-config --libs)

$(EXEC): $(OBJS)
       $(CC) $(CFLAGS) $(LDFLAGS) $@ $(OBJS) $(LIBS)
%.o: src/%.cpp
       $(CC) -c $<

.PHONY: clean
clean:
    rm -f $(EXEC) $(OBJS) *~ 
```

当我尝试做到这一点时，虽然我得到了这个：

```
g++ -c src/App.cpp
g++ -c src/App_OnInit.cpp
g++ -c src/App_OnEvent.cpp
g++ -c src/App_OnLoop.cpp
g++ -c src/App_OnRender.cpp
g++ -c src/App_OnCleanup.cpp
g++ -o -I/usr/include/SDL -D_GNU_SOURCE=1 -D_REENTRANT  -L/usr/lib/i386-linux-gnu -lSDL           game.exe App.o App_OnInit.o App_OnEvent.o App_OnLoop.o App_OnRender.o App_OnCleanup.o 
g++: error: game.exe: No such file or directory
make: *** [game.exe] Error 1 
```

**我正在尝试拼凑如何正确使用 makefile，但是我在它们上找到的大多数网站都向您展示了一种完全不同的使用方式，这使得学习它们变得困难。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T01:41:07.423

这是makefile的问题。当它到达这一点时：

```
g++ -o -I/usr/include/SDL -D_GNU_SOURCE=1 -D_REENTRANT  -L/usr/lib/i386-linux-gnu -lSDL           game.exe App.o App_OnInit.o App_OnEvent.o App_OnLoop.o App_OnRender.o App_OnCleanup.o 
```

-o 选项设置输出文件的名称。您想要更多类似的东西：

```
g++ -o game.exe -I/usr/include/SDL ... 
```

我对 Makefiles 不太感兴趣，但我的猜测是会有这样的东西：

```
$(EXEC) : $(OBJS)
    $(CC) -o $@ $(CFLAGS) $(LDFLAGS) $(OBJS) 
```

并将 CFLAGS 更改为不包含 -o 选项：

```
CFLAGS = $(shell sdl-config --cflags) 
```

我认为在尝试自动化该过程之前，学习如何手动构建它（即，自己从命令行使用 g++）也可能会有所帮助。

# bash - 在 BASH Ubuntu 中按字母顺序复制文件夹中的文件

> ID：10875363
> 
> 赞同：2
> 
> 时间：2012-06-04T01:22:10.980
> 
> 标签：bash, ubuntu

我正在尝试在 Ubuntu 中使用 BASH 复制一系列文件和文件夹。重要的是要按字母顺序复制文件，因为它们将进入一个数码相框，该相框按照它们添加到闪存驱动器的顺序读取文件。根据我的发现，Nautilus 根据 inode 编号复制它们，因此它们最终在相框上无序。

从我所做的搜索中，我想出了以下命令：

```
for i in "$(find * -type f -print0 | sort)"; do cp -v "$i" "/media/PicFrame/$i"; done 
```

这会导致文件名太长的错误。看来 BASH 正在尝试创建一个文件，每个文件名都用“\n”分隔。我尝试删除一些引号，但是在尝试复制文件名时会导致几个“无法统计”错误（因为其中很多都有空格）。

关于如何使这项工作的任何想法？我对其他方法持开放态度，但我真的希望这是一个单一的命令/脚本，我可以在每个月更换图片时运行它。（我一直在 Windows 中这样做，但现在我正在尝试在 Ubuntu 中做所有事情。我已经来回大约两年了。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T01:25:28.457

`read`而是在`while`循环中使用。

```
find ... | while read file
do
  cp ..."$file"...
done 
```

不过，您可能要考虑使用`rsync`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T01:39:40.150

正如 Ignacio 所提到的，`while read`如果您使用`find`.

如果您不需要递归（您的文件都在一个目录级别），您可以使用`for`带有 globbing 的循环。使用此技术时，您不需要使用，`sort`因为可以保证 glob 会按照您的语言环境的字典顺序进行扩展（换句话说，“已排序”）。

```
for file in *
do
    cp "$file" dest
done 
```

您应该注意，您问题中脚本的部分问题是您正在使用`print0`管道输出`find`into `sort`。为了进行这项工作，您将需要适当的选项来`sort`确定您的版本是否具有它。

```
find ... -print0 | sort --files0-from=- 
```

# c# - c# DataGridView EditMode 和 DeleteKey

> ID：10875364
> 
> 赞同：2
> 
> 时间：2012-06-04T01:22:32.510
> 
> 标签：c#, winforms, datagridview

时间：2019-06-01 标签：c#winforms

我的 DataGridView 有：

选择模式 - 单元格选择

EditMode - EditOnKeyStroke

它适用于除 fot DeleteKey 之外的所有键（按下时 - 没有任何反应）。

我想要 - 如果 DeleteKey 被按下 - 选定的单元格（或单元格）保持选中状态，但是 - 空值（如在 Excel 中）。

我必须仅为 DeleteKey 创建单独的 KeyDownEvent 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T02:53:33.973

删除键在（可能）允许用户从网格中删除一行方面具有特殊意义。不允许 Delete 键在 DataGridView 中启动“编辑”模式。因此，您需要以某种方式使单元格进入编辑模式，以便允许 DataGridViewCell（而不是 DataGridView 本身）处理删除键。

为此，您可以按照您的建议实现 KeyPress 处理程序，以便按下删除键让您进入编辑模式，然后再次处理以删除内容。或者，如果这太费力了，您也可以将 DataGridView.EditMode 更改为“OnEnter”，在这种情况下，每个单元格总是在获得焦点时进入编辑模式，无论是通过鼠标还是在单元格之间切换。然后，按删除将导致内容被删除。

# android - SqlLiteDatabase 数据库 rawQuery() 方法是如何工作的？

> ID：10875365
> 
> 赞同：0
> 
> 时间：2012-06-04T01:23:03.143
> 
> 标签：android, sqlite

我试图弄清楚这是如何工作的，但我不知道绑定是如何发生的？获取 valueOf() 的需要是什么？字符串数组中的参数不应该只是字符串吗？

```
private final String MY_QUERY = "SELECT * FROM table_a a INNER JOIN table_b b "+
"ON a.id=b.other_id WHERE b.property_id=?";

db.rawQuery(MY_QUERY, new String[]{String.valueOf(propertyId)}); 
```

我也想加入表，但不知道如何正确设置它，至少是字符串数组的参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T01:30:51.627

我假设这两行代码是您在某个地方找到的示例？String.valueOf 是一个标准的 java 函数。如果 propertyId 是 int，它会将 int 转换为 String。您可以省略参数 String[]，并将参数硬编码在 sql 字符串中，但这不是好的编程习惯。我不确定我是否理解您关于“绑定”的问题，但会发生什么情况是 peropertyId 的值（通过 valueOf 转换为 String）被插入到您的查询中的问号处。

# javascript - Firefox 过早调用 setTimeout 函数（或 Date.getTime() 已关闭？）

> ID：10875370
> 
> 赞同：7
> 
> 时间：2012-06-04T01:24:45.007
> 
> 标签：javascript, jquery

我在 Firefox 12 中遇到了一个奇怪的问题。 setTimeout() 似乎并不总是等待适当的长度。或者也许是日期的毫秒数没有变化？

[看看这个小提琴。](http://jsfiddle.net/katowulf/C6pZX/3/)本质上，100 毫秒的 setTimeout 似乎在 80 毫秒到 110 毫秒之间运行。根据[John Resig 对 timers 的解释，](http://ejohn.org/blog/how-javascript-timers-work/)我可以理解更多。但更少？

您可能需要刷新一次或两次才能看到问题，因为它有时在第一次运行时可以正常工作。它似乎在 IE 和 Chrome 中工作得很好。

这是我在小提琴中使用的代码：

```
var txt = '',
    TIMEOUT_LENGTH = 100,
    _now;

now = Date.now || function() { return new Date().getTime() };

function log(time) {
    c = time < 100? 'class="error"' : '';
    $('#log').append('<p '+c+'>waited ' + time + '</p>');
}

function defer() {
    var d = $.Deferred(),
        start = now();
    setTimeout(function() {
        d.resolve(now() - start);
    }, TIMEOUT_LENGTH);
    return d.promise();
}

for (var i = 0; i < 20; i++) {
    defer().then(log);
} 
```

这是一个古怪的输出示例：

![在此处输入图像描述](../Images/80dabe573b40200cb48f2061ed15a620.png)

这是我的浏览器信息：

![在此处输入图像描述](../Images/af542b311dabf25476208f7976b71905.png)

非常感谢您阅读我的问题！我希望有人可以对此有所了解。

**更多信息**

我通过使用 setInterval() 并检查每个增量以查看所需时间是否已经过去来解决该问题。[看到这个小提琴](http://jsfiddle.net/katowulf/C6pZX/5/)。

但是，我仍然很想知道是否有人可以阐明问题的根源

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T01:38:22.517

是的。`setTimeout`的准确性取决于许多因素，并且不能保证始终在您指定的确切时间执行。

我不能以任何权威这么说，但我会冒险猜测 Firefox 为了看起来更快，会暂时加速 JS 引擎以使一切运行起来（这很有趣，因为根据我的经验，基于计时器最初在我的 Firefox 版本中，函数实际上运行速度较慢）。

正如您发布的链接所述，既不`setTimeout`也不`setInterval`承诺他们将在正确的时间执行。但是，使用`setInterval`，您将受益于计时器循环，如果它落后太远，您可以通过追赶来“纠正自己”，因此无论您尝试做什么，它可能更合适。

无论如何，这是我在 Macbook 10.6.8 上的结果：

火狐 5.0.1：

```
waited 92
waited 92
waited 93
waited 93
waited 93
waited 93
waited 93
waited 94
waited 93
waited 93
waited 93
waited 93
waited 94
waited 94
waited 94
waited 94
waited 94
waited 95
waited 96
waited 96 
```

Safari 5.1.5：

```
waited 100
waited 104
waited 104
waited 103
waited 104
waited 104
waited 104
waited 104
waited 104
waited 104
waited 104
waited 104
waited 104
waited 104
waited 104
waited 104
waited 104
waited 104
waited 104
waited 104 
```

铬 19.0.1084.52：

```
waited 101
waited 103
waited 103
waited 104
waited 104
waited 103
waited 103
waited 103
waited 103
waited 103
waited 103
waited 103
waited 103
waited 103
waited 104
waited 104
waited 104
waited 104
waited 104
waited 104 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T16:34:58.677

JavaScript 是同步的。浏览器会将您`setTimeout`的 s 添加到队列中并在之后执行它们

1.  倒计时结束
2.  倒计时结束时，它已完成队列中的任何其他任务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-25T19:36:11.673

我编写了以下函数以确保我的代码至少在给定的毫秒数后执行。我用它代替 setTimeout

```
mySetTimeout=function(f,t){
    var endTime=new Date().valueOf()+t;
    setTimeout(function(){
        var now=new Date().valueOf();
        if(now<endTime){
            mySetTimeout(f,endTime-now);
        }else{
            f();
        }
    },t);
}; 
```

# c# - 验证 exe 文件

> ID：10875373
> 
> 赞同：2
> 
> 时间：2012-06-04T01:24:56.620
> 
> 标签：c#, code-signing

我在很大程度上了解使用 Microsoft signtool 签署 exe 的工作原理。我有一个 exe (C#)，我只想在文件未被修改的情况下运行它，如果我理解正确，这可以验证。我不明白的是如何验证文件。如果我验证文件的代码是在我正在验证的 exe 中构建的，难道不能反编译 exe，删除检查文件的代码，然后重新编译吗？

我对代码签名的理解基本上是这样的： ![](../Images/842cae42c205890c9325ffb908a683dc.png)

图片来源： [https ://developer.apple.com/library/mac/#documentation/Security/Conceptual/CodeSigningGuide/Introduction/Introduction.html](https://developer.apple.com/library/mac/#documentation/Security/Conceptual/CodeSigningGuide/Introduction/Introduction.html)

但是我不明白为什么不能完全从文件中取出检查文件完整性的机制，并在修改后运行程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T06:01:24.080

是的，有人可能会这样做，但您不负责验证代码。CLR 会自动为具有公钥令牌的 dll 执行此操作。如果公钥与文件哈希不匹配，CLR 将不会加载文件。只需给您的 exe 起一个强名称，您就会很安全。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-04T01:33:16.943

如果我理解你的话，你想在现有的 exe 应用程序中注入一些代码，对吧？如果是这样，最好是了解更多关于代码注入，如何使用 exe 文件进行操作（通常这很容易，因为在应用程序中向现有代码添加新代码不需要像它需要的那样大惊小怪改变现有的）。是的，您必须学习汇编程序，因为它是与现有 exe 通信的唯一方法。您不必编译任何东西，因为 exe 是以这种方式形成的，它仅充当其中的对象/代码的包装器和启动器（这就是为什么输入新代码比使用现有的，如果您弄乱了代码，则不会发生错误）。首先，

# c# - 下载管理器 - 限制下载速度

> ID：10875374
> 
> 赞同：6
> 
> 时间：2012-06-04T01:25:10.553
> 
> 标签：c#, .net, stream, download, download-manager

我需要为我的文件下载器应用程序实现下载速率限制，并且我已经查看了`ThrottledStream`CodeProject 中的类，但这不适用于我的情况，因为我必须能够在下载期间更改限制，而不仅仅是一开始。这是我在后台线程中使用的下载方法的一部分：

```
webResponse = (HttpWebResponse)webRequest.GetResponse();
responseStream = webResponse.GetResponseStream();
responseStream.ReadTimeout = 5000;

downloadCache = new MemoryStream(this.MaxCacheSize);
byte[] downloadBuffer = new byte[this.BufferSize];
int bytesSize = 0;
CachedSize = 0;
int receivedBufferCount = 0;

while (true)
{
    bytesSize = responseStream.Read(downloadBuffer, 0, downloadBuffer.Length);

    if (this.Status != DownloadStatus.Downloading || bytesSize == 0 
        || this.MaxCacheSize < CachedSize + bytesSize)
    {
        WriteCacheToFile(downloadCache, CachedSize);

        this.DownloadedSize += CachedSize;
        downloadCache.Seek(0, SeekOrigin.Begin);
        CachedSize = 0;

        if (this.Status != DownloadStatus.Downloading || bytesSize == 0)
            break;
    }

    downloadCache.Write(downloadBuffer, 0, bytesSize);
    CachedSize += bytesSize;

    receivedBufferCount++;
    if (receivedBufferCount == this.BufferCountPerNotification)
    {
        this.RaiseDownloadProgressChanged();
        receivedBufferCount = 0;
    }
} 
```

我也看到有人使用 Thread.Sleep() 或 Thread.Wait()，但这是个好主意吗？你有什么建议我可以在这个while循环中做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T12:30:20.633

我已经使用此代码从服务器下载文件可能对您有帮助...

```
 private bool DownLoadFile(string pstrFileName, string pstrFilePath, long plngFileSize)
    {
        try
        {
            string strNewFileSize = CalcFileSize(plngFileSize);
            int numIterations = 0;  // this is used with a modulus of the sampleInterval to check if the chunk size should be adjusted.  it is started at 1 so that the first check will be skipped because it may involve an initial delay in connecting to the web service
            Offset = 0;
            long webConfigSetting = this.mobjService.GetMaxRequestLength();
            this.MaxRequestLength = Math.Max(1, (webConfigSetting * 1024) - (2 * 1024));    // set the max buffer size to slightly less than the request length to allow for SOAP message headers etc.  
            if (File.Exists(pstrFilePath))
            {
                Offset = new FileInfo(pstrFilePath).Length;
                if (Offset == plngFileSize)
                    Offset = 0;
                //File.Delete(pstrFilePath);
            }
            if (Offset == 0 && !File.Exists(pstrFilePath))   // create a new empty file
                File.Create(pstrFilePath).Close();

            // open a file stream for the file we will write to in the start-up folder
            lblFileName.Text = pstrFileName.Substring(0, pstrFileName.LastIndexOf(".")).Replace("&", "&&");
            using (FileStream fs = new FileStream(pstrFilePath, FileMode.OpenOrCreate, FileAccess.Write))
            {
                pbrSummary.Maximum = (int)plngFileSize;
                fs.Seek(Offset, SeekOrigin.Begin);
                // download the chunks from the web service one by one, until all the bytes have been read, meaning the entire file has been downloaded.
                while (Offset < plngFileSize)
                {
                    int currentIntervalMod = numIterations % this.ChunkSizeSampleInterval;
                    if (currentIntervalMod == 0)
                        StartTime = DateTime.Now;   // used to calculate the time taken to transfer the first 5 chunks
                    else if (currentIntervalMod == 1)
                        CalcAndSetChunkSize(plngFileSize);
                    try
                    {
                        // although the DownloadChunk returns a byte[], it is actually sent using MTOM because of the configuration settings. 
                        byte[] Buffer = mobjService.DownloadChunk(pstrFileName, Offset, ChunkSize);
                        fs.Write(Buffer, 0, Buffer.Length);
                        Offset += Buffer.Length;    // save the offset position for resume
                    }
                    catch (Exception ex)
                    {
                        if (ex.Message.Contains("File not found") || NumRetries++ >= MaxRetries)    // too many retries, bail out
                        {
                            fs.Close();
                            return false;
                            //throw new Exception("Error occurred during upload, too many retries.\r\n" + ex.Message);
                        }
                    }
                    numIterations++;
                    //----------------------- Code Commented ------------------------
                    //lblDownload.Text = CalcFileSize(Offset) + " of " + strNewFileSize;
                    //lblRate.Text = CalcFileSize(ChunkSize)+"/sec";
                    ////pbrSummary.Value = (int)Offset;
                    ////if ((int)Offset <= pbrSummary.Maximum)
                    ////    pbrSummary.Value = (int)Offset;
                    ////else
                    ////    pbrSummary.Value = pbrSummary.Maximum;
                    //------------------------------------------------------------------
                }
            }
            return true;
        }
        catch (Exception Exc)
        {
            throw (Exc);
        }
    }
    private void CalcAndSetChunkSize(long plngFileSize)
    {
        /* chunk size calculation is defined as follows 
         *      in the examples below, the preferred transfer time is 1500ms, taking one sample.
         *      
         *                                    Example 1                                 Example 2
         *      Initial size                = 16384 bytes   (16k)                       16384
         *      Transfer time for 1 chunk   = 800ms                                     2000 ms
         *      Average throughput / ms     = 16384b / 800ms = 20.48 b/ms               16384 / 2000 = 8.192 b/ms
         *      How many bytes in 1500ms?   = 20.48 * 1500 = 30720 bytes                8.192 * 1500 = 12228 bytes
         *      New chunksize               = 30720 bytes (speed up)                    12228 bytes (slow down from original chunk size)
         */
        double transferTime = DateTime.Now.Subtract(this.StartTime).TotalMilliseconds;
        double averageBytesPerMilliSec = this.ChunkSize / transferTime;
        double preferredChunkSize = averageBytesPerMilliSec * this.PreferredTransferDuration;
        this.ChunkSize = (int)Math.Min(this.MaxRequestLength, Math.Max(4 * 1024, preferredChunkSize)) * 10; // set the chunk size so that it takes 1500ms per chunk (estimate), not less than 4Kb and not greater than 4mb // (note 4096Kb sometimes causes problems, probably due to the IIS max request size limit, choosing a slightly smaller max size of 4 million bytes seems to work nicely)         

        //string statusMessage = String.Format("Chunk size: {0}{1}", CalcFileSize(this.ChunkSize), (this.ChunkSize == this.MaxRequestLength) ? " (max)" : "");
    } 
```

# c++ - 为什么析构函数在 C++ 中运行两次？

> ID：10875381
> 
> 赞同：4
> 
> 时间：2012-06-04T01:26:09.390
> 
> 标签：c++, constructor, destructor

在做我的编程作业时，我似乎对基本的 C++ 概念感到困惑。我在我的程序中发现了这个错误，这是由于我的析构函数运行的次数超出了我的预期。这是一个代码示例，展示了我做错了什么，直到最基本的要素。

```
#include <iostream>
using namespace std;

class A
{
public:
    A(int num)
    {
        number = num;
        cout << "A constructed with number " << number << ".\n";
    }
    ~A()
    {
        cout << "A destructed with number " << number << ".\n";
    }
private:
    int number;
};

class B
{
public:
    B(A pa)
        : a(pa)
    {
        cout << "B constructor run.\n";
    }
    ~B()
    {
        cout << "B destructor run.\n";
    }
private:
    A a;
};

int main()
{
    A foo(7);
    {
        B bar(foo);
    }
    //Pause the program.
    system("pause");
} 
```

我期望发生的是在堆栈上为名为`A foo(7);`的对象分配空间并调用构造函数，传递. 它分配并打印指示构造函数运行的输出。现在在堆栈上为一个名为的对象分配空间并调用构造函数，按值传递，它只是一个. 构造函数将传递给它的参数分配给它自己的私有数据成员，并将输出打印到屏幕上。`A``foo``7``7``number``B bar(foo);``B``bar``foo``int``A``a`

现在，当`bar`在右花括号处超出范围时，我希望`bar`调用 ' 的析构函数，它将输出打印到屏幕上，然后为其数据成员调用析构函数，即`A a`. 该析构函数将输出打印到屏幕上，并丢弃`int number`它所包含的内容。

我期望的输出应该是：

```
A constructed with number 7.
B constructor run.
B destructor run.
A destructed with number 7.
//Destructors should be called in the reverse order of their construction right? 
```

实际输出：

```
A constructed with number 7.
B constructor run.
A destructed with number 7\. //This is unexpected.
B destructor run.
A destructed with number 7. 
```

是什么造成了额外的破坏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T01:31:07.157

您的`B`构造`A`函数按值获取对象，这意味着将`foo`其复制到参数`pa`中，然后将其复制到 member `a`。编译器已经能够删除其中一个副本（构造函数的参数），但另一个不能被删除，并且您有第二个`A`被破坏的对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T01:51:25.170

显然是来自会员数据A a；B类的。我猜你的疑问是为什么看不到A的任何构造输出，因为它是用A类的默认复制ctor构造的，最好为A类添加一个复制ctor，这样你就会看到构造程序。

```
A(const A& a)
{
     number = a.number;
     cout << "A copy-constructed with number " << number << ".\n";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T01:30:29.737

当人们对“foo”和“bar”变得可爱时，我讨厌它。

但我看到两个“A”实例正在构建——一个是明确的，另一个是由“B”隐含的。两个析构函数被调用。

这张照片有什么不喜欢的;)？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T01:30:00.627

因为在 B 类中，有一个成员 `A a` ，所以要破坏 B 对象，首先要调用其成员的析构函数。

# php - 使用 php include 时 css 元素定位混乱

> ID：10875382
> 
> 赞同：-1
> 
> 时间：2012-06-04T01:26:25.583
> 
> 标签：php, css, include

我正在尝试使用我的主 index.php 文件，并使用“include”将其与其他 php 文件（header.php、content.php 和 footer.php）中的 html 内容和文本一起加载。

但是，当我将 index.php 加载到浏览器中时，我对元素的 css 定位都搞砸了。其他文件中的元素重叠。他们只是没有按照我在我的 css 中想要的方式定位。我试图用谷歌搜索解决方案，但没有找到它。有人可以指导我参考一些在线参考资料或告诉我在 php 中使用 include 时元素的定位是如何工作的吗？先感谢您。

编辑/添加代码：Index.php

```
<html>
<head>
<link rel="stylesheet" type="text/css" href="main.css"></link>
</head>
<body>
<?php
include './views/header_view.php';
include '/views/sadrzaj_view.php';
include '/views/footer_view.php';
?>
</body>
</html> 
```

头文件是这样的>

```
<div id="header" >
    <a id="logo"  onmouseover="document.getElementById('logo').style.color='#D0D0D0';" onmouseout="document.getElementById('logo').style.color='#ffffff';">LOGO</a>

</div> 
```

内容文件目前仅包含文本...

页脚文件是这样的>

```
<center>
<div id="footer"> 
    123 footer
</div></center> 
```

和 CSS 是这样的>

```
body{
border:0;
margin:0;
padding:0;
position:relative;
background-image:url(slike/blue_circuit.jpg);
background-repeat:no-repeat;

}

#header{
position:absolute;
background-image:url(./slike/header_bckgnd.png);
border-bottom:1px solid black;

top:0;
height:70;
width:100%;

color:white;
font-family:helvetica;
}

#logo{
position:relative;
left:30;
top:10;
font-size:45;
font-weight:600;
text-shadow: 1px 1px 9px #1E90FF;
cursor:pointer;

}

#footer{

position:fixed;
background-image:url(slike/header_bckgnd.png);
bottom:0;
height:30;

color:white;
line-height:2em;
border:0;
margin:0;
padding:0;
width:100%;

} 
```

页脚与我的 IE 浏览器中的内容部分重叠。如果我使用绝对或相对定位，它不会变得更好...... :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-01T03:34:31.390

我遇到了与您类似的问题，经过一些缩小后，我发现我的一个包含文件（纯粹是 php）在底部有一个 echo 语句，这导致我的 css 以某种方式打乱（似乎 div 在绝对位置）。无论如何，我希望这可以帮助你。干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T01:29:34.800

转到您的输出文件并检查标记以查看是否存在冲突。
我会从这个输出中创建一个 html 文件并在你的浏览器上打开它，它可能会给你一些关于正在发生的事情的线索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T01:51:24.503

将您的 css 放在 index.php 上 body 标记的末尾

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T06:52:11.233

我遇到了这个问题，最终意识到我从旧的 html 文件中复制到我的 require() 语句中的部分（认为它对所有页面都是通用的）实际上对主页的编码略有不同。因此，当我从索引文件中复制 html 并在所有页面的 require 语句中使用它时，会导致出现不正确的定位。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-25T17:13:35.667

在遇到同样的问题后，我发现了这篇文章。我突然明白发生了什么事。实际上，切换到 PHP 包含应该与 CSS 定位无关。我的错误的原因是我*放置*PHP 包含的位置。我正在替换没有绝对定位的导航，因此必须将包含放置在相同的位置。

# c# - C# 使用 LINQ 读取和总结文本文件

> ID：10875385
> 
> 赞同：1
> 
> 时间：2012-06-04T01:26:57.617
> 
> 标签：c#, linq, text

我已经阅读了许多针对 LINQ 的单独功能的不同解决方案，这些解决方案放在一起可以解决我的问题。我的问题是我仍在努力思考如何正确地将 LINQ 语句组合在一起。我似乎无法正确使用语法，或者它出现了混杂的信息，而不是我想要的。

如果其中一半看起来像重复，我提前道歉。我的问题比仅仅阅读文件更具体。我希望这一切都在同一个查询中。

不过说到点子上了。。

我正在阅读带有分号分隔的数据列的文本文件。

一个例子是：

```
US;Fort Worth;TX;Tarrant;76101
US;Fort Worth;TX;Tarrant;76103
US;Fort Worth;TX;Tarrant;76105
US;Burleson;TX;Tarrant;76097
US;Newark;TX;Tarrant;76071
US;Fort Worth;TX;Tarrant;76103
US;Fort Worth;TX;Tarrant;76105 
```

这是我到目前为止所拥有的：

```
var items = (from c in (from line in File.ReadAllLines(myFile)
    let columns = line.Split(';')
    where columns[0] == "US"
    select new
    {
        City = columns[1].Trim(),
        State = columns[2].Trim(),
        County = columns[3].Trim(),
        ZipCode = columns[4].Trim()
    })
    select c); 
```

这适用于读取文件。但在那之后我的问题是我不想要原始数据。我要一个总结。

具体来说，我需要计算城市、州组合的出现次数以及邮政编码出现的次数。

我最终会用它制作一个树视图。我的目标是让它有点像这样布置：

```
- Fort Worth,TX (5)
       -  76101 (1)
       -  76103 (2)
       -  76105 (2)  

- Burleson,TX (1)
       - 76097 (1)

- Newark,TX (1)
     - 76071 (1) 
```

我可以晚点做树的事情，因为还有其他处理要做。

**所以我的问题是：**如何结合查询本身中特定值的计数？我知道 GroupBy 函数，也见过 Aggregates，但我无法让它们正常工作。如何将所有这些函数包装到一个查询中？

**编辑**：我想我问错了问题。我并不是说我必须在一个查询中完成所有这些操作......我问的是有**没有**一种清晰、简洁和有效的方法可以在一个查询中使用 LINQ 来做到这一点？如果没有，我将返回循环。

如果我能指出正确的方向，那将是一个巨大的帮助。如果有人有更简单的想法来做这一切，请告诉我。

我只是想避免遍历大量值并在每一行上使用 Regex.Split。

让我知道是否需要澄清。

谢谢！

*****编辑 6/15 *******

 **我想到了。感谢那些回答它的人提供了帮助，但并不是我所需要的。作为旁注，我最终还是把它全部改变了。LINQ 实际上比其他方式慢，因为它不相关，所以我不会进入。至于那些多次评论“一个查询有它很愚蠢”的人，那是设计师的决定。并非所有“最佳实践”都适用于所有地方。它们是指导方针。相信我，我确实想让我的代码清晰易懂，但我也有一个非常具体的理由来这样做。

我非常感谢您的帮助和指导。

下面是我使用但后来放弃的原型。

```
 /* Inner LINQ query Reads the Text File and gets all the Locations.
     * The outer query summarizes this by getting the sum of the Zips 
     * and orders by City/State then ZIP */

var items = from Location in(
    //Inner Query Start
    (from line in File.ReadAllLines(FilePath)
    let columns = line.Split(';')
    where columns[0] == "US" & !string.IsNullOrEmpty(columns[4])
    select new
    {
    City = (FM.DecodeSLIC(columns[1].Trim()) + " " + columns[2].Trim()),
    County = columns[3].Trim(),
                   ZipCode = columns[4].Trim()
    }
    ))
    //Inner Query End
    orderby Location.City, Location.ZipCode  
                   group Location by new { Location.City, Location.ZipCode , Location.County} into grp
            select new
            {
            City = grp.Key.City,
            County = grp.Key.County,
            ZipCode = grp.Key.ZipCode,
            ZipCount = grp.Count()      
            }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T18:41:47.360

使用 File.ReadAllLines 的缺点是您必须在操作之前将整个文件拉入内存。此外，使用 Columns[] 有点笨拙。您可能需要考虑我的[文章描述使用 DynamicObject 和流式传输](http://www.thinqlinq.com/Post.aspx/Title/LINQ-to-CSV-using-DynamicObject)文件作为替代实现。分组/计数操作是次要的讨论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T02:08:20.367

```
 var items = (from c in
                         (from line in File.ReadAllLines(myFile)
                          let columns = line.Split(';')
                          where columns[0] == "US"
                          select new
                                     {
                                         City = columns[1].Trim(),
                                         State = columns[2].Trim(),
                                         County = columns[3].Trim(),
                                         ZipCode = columns[4].Trim()
                                     })
                     select c);
        foreach (var i in items.GroupBy(an => an.City + "," + an.State))
        {
            Console.WriteLine("{0} ({1})",i.Key, i.Count());
            foreach (var j in i.GroupBy(an => an.ZipCode))
            {
                Console.WriteLine(" - {0} ({1})", j.Key, j.Count());

            }

        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T02:10:04.647

将所有内容都集中到一个查询中是没有意义的。最好拆分查询以使其有意义。试试这个你的结果

```
var grouped = items.GroupBy(a => new { a.City, a.State, a.ZipCode }).Select(a => new { City = a.Key.City, State = a.Key.State, ZipCode = a.Key.ZipCode, ZipCount = a.Count()}).ToList(); 
```

**结果截图**

![在此处输入图像描述](../Images/733dc73a2a11bd2f31f067caa49cf6fe.png)

**编辑**

这是一个大的长查询，它给出了相同的输出

```
var itemsGrouped = File.ReadAllLines(myFile).Select(a => a.Split(';')).Where(a => a[0] == "US").Select(a => new { City = a[1].Trim(), State = a[2].Trim(), County = a[3].Trim(), ZipCode = a[4].Trim() }).GroupBy(a => new { a.City, a.State, a.ZipCode }).Select(a => new { City = a.Key.City, State = a.Key.State, ZipCode = a.Key.ZipCode, ZipCount = a.Count() }).ToList(); 
```**

# iphone - NSMetadataQuery 完成（或未完成）时不发送通知

> ID：10875387
> 
> 赞同：3
> 
> 时间：2012-06-04T01:27:08.983
> 
> 标签：iphone, objective-c, ios

我正在尝试使用 NSMetadataQuery 访问存储在应用程序文档目录中的一些文件，但 NSMetadataQueryDidFinishGatheringNotification 没有通知我的应用程序。我发现[了这个问题](https://stackoverflow.com/questions/8312749/nsmetadataquery-doesnt-finish-gathering-no-notification)，但答案是让 NSMetadataQuery 成为 ivar，我已经这样做了。

这是我正在使用的代码：

```
self.query = [[NSMetadataQuery alloc] init];
[self.query setSearchScopes:[NSArray arrayWithObject:documentsDirectoryURL]];
NSPredicate *pred = [NSPredicate predicateWithFormat:@"%K ENDSWITH '_task'", NSMetadataItemFSNameKey];
[self.query setPredicate:pred];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(queryDidFinishGathering:) name:NSMetadataQueryDidFinishGatheringNotification object:self.query];

[self.query enableUpdates];

[self.query startQuery]; 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T04:24:40.397

这来自 Apple 文档“关于文件元数据查询”：

iOS 允许在 iCloud 中搜索元数据以查找文件对应的文件。它只提供了Objective-C接口来查询文件元数据，NSMetadataQuery和NSMetadataItem，并且只支持搜索iCloud的搜索范围。

与桌面不同，iOS 应用程序的沙箱不能使用元数据类进行搜索。为了搜索应用程序的沙箱，您需要使用 NSFileManager 类递归地遍历沙箱文件系统中的文件。一旦找到匹配的文件，您就可以按照您需要的方式访问该文件。您还可以使用 NSMdatataItem 类来检索该特定文件的元数据。

因此，您必须改用 NSFileManager。

# ajax - JSF 2.0：请求的多个 ajax 响应

> ID：10875403
> 
> 赞同：1
> 
> 时间：2012-06-04T01:30:10.223
> 
> 标签：ajax, jsf-2

我将有一个可以进行多项选择（复选框）的数据表。我应该触发一个**AJAX 请求**作为回报我应该能够更新***多个 AJAX 响应*****中每个选择**（行）的状态*的状态。*

 *如何在 JSF 2.0 中实现这一点？我已经查看了**PrimeFaces、ICEFaces 和 RichFaces**，但我无法得出使用哪一个来完成此要求的结论。我是新的 JSF 2.0，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:32:12.693

如果您知道所有字段的 ID 需要更新，那么可以这样做

```
List<String> renderList = (List<String>)        
FacesContext.getCurrentInstance().getPartialViewContext().getRenderIds();

renderList.add(clientId1);
renderList.add(clientId2);
renderList.add(clientId3);
renderList.add(clientId4); 
```

这里的客户 id 是 id 和表单 id 的组合，例如：

```
<h:form id="myBean">
    <h:inputText id="textBox" />
</h:form> 
```

那么客户端 ID 将是：myBean:textBox

那么您在重新渲染列表中添加的所有字段都将在单个 ajax 请求中重新渲染*

# jira - 创建问题时自动创建 JIRA 子任务

> ID：10875414
> 
> 赞同：12
> 
> 时间：2012-06-04T01:32:54.730
> 
> 标签：jira, jira-plugin

我想知道有一种方法可以在创建问题时自动创建子任务。

例如，我创建了一个自定义标准问题类型 XXX，以及子任务问题类型 YYY 和 ZZZ。当我创建一个类型为 XXX 的问题时，将自动创建两个问题类型为 YYY 和 ZZZ 的子任务。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-04T07:08:50.420

您可以使用[Jira Scripting Suite](https://marketplace.atlassian.com/16346)通过在项目工作流的问题创建过渡上使用 post 功能轻松实现这一点。示例代码：

```
from com.atlassian.jira.util import ImportUtils
from com.atlassian.jira import ManagerFactory
from com.atlassian.jira.issue import MutableIssue
from com.atlassian.jira import ComponentManager
from com.atlassian.jira.issue.link import DefaultIssueLinkManager
from org.ofbiz.core.entity import GenericValue;

# get issue objects
issueManager = ComponentManager.getInstance().getIssueManager()
issueFactory = ComponentManager.getInstance().getIssueFactory()
authenticationContext = ComponentManager.getInstance().getJiraAuthenticationContext()
subTaskManager = ComponentManager.getInstance().getSubTaskManager();
issueLinkManager = ComponentManager.getInstance().getIssueLinkManager()
customFieldManager = ComponentManager.getInstance().getCustomFieldManager()
userUtil = ComponentManager.getInstance().getUserUtil()

# define subtask
issueObject = issueFactory.getIssue()
issueObject.setProject(issue.getProject())
issueObject.setIssueTypeId("5") # normal subtask
issueObject.setParentId(issue.getId())

# set subtask attributes
issueObject.setFixVersions(issue.getFixVersions())
issueObject.setAffectedVersions(issue.getAffectedVersions())
issueObject.setPriority(issue.getPriority())
issueObject.setSummary("Auto created sub task- "+issue.getSummary())
issueObject.setAssignee(userUtil.getUserObject("joe"))

# Create subtask on JIRA 4.x
# subTask = issueManager.createIssue(authenticationContext.getUser(), issueObject)
# subTaskManager.createSubTaskIssueLink(issue.getGenericValue(), subTask, authenticationContext.getUser())

# Create subtask on JIRA 5 and higher
subTask = issueManager.createIssueObject(authenticationContext.getLoggedInUser(), issueObject)
subTaskManager.createSubTaskIssueLink(issue, subTask, authenticationContext.getLoggedInUser())

# Link parent issue to subtask   issueLinkManager.createIssueLink(issue.getId(),issueObject.getId(),10300,1,authenticationContext.getUser())

# Update search indexes
ImportUtils.setIndexIssues(True);
ComponentManager.getInstance().getIndexManager().reIndex(subTask)
ImportUtils.setIndexIssues(False) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T18:18:25.523

要考虑的一件事是如果在所有子任务关闭之前关闭父问题会发生什么。我建议在关闭问题之前加入一个钩子来提示用户解决所有子任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-24T14:36:03.037

我使用附加脚本运行程序找到了一个简单的解决方案 - http: [//isolaso​​ftware.it/2014/01/08/create-an-issue-in-jira-with-predefined-sub-tasks/](http://isolasoftware.it/2014/01/08/create-an-issue-in-jira-with-predefined-sub-tasks/)。

您无需编写任何代码，只需在工作流编辑器中设置发布功能“创建子任务”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-01T05:50:22.657

只需创建一个名为“模板”的票证（包含所有必要的子任务）并在创建新实例时复制/克隆它。

# ruby-on-rails - 用户通过 REST 调用注册时绕过设计登录

> ID：10875417
> 
> 赞同：1
> 
> 时间：2012-06-04T01:33:10.953
> 
> 标签：ruby-on-rails, rest, devise

我正在使用启用了休息的设计。我有一个需要用户认证/注册的表格。身份验证在fancybox灯箱中实现。

我可以使用 ajax 调用注册和登录。登录似乎返回一个 session_id。注册后如何获取会话对象。或者，更像是在注册时创建的会话对象？

如果没有创建一个，我将如何在注册后第一次绕过登录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T05:07:20.297

似乎没有直接的方法可以做到这一点。到目前为止，我能做到这一点的唯一方法是刷新页面。

# php - 使用 XAMPP、sendmail 和 gmail smtp 服务器发送邮件

> ID：10875423
> 
> 赞同：3
> 
> 时间：2012-06-04T01:33:45.697
> 
> 标签：php, smtp, xampp, sendmail.exe

这看起来相当简单，我的 php 脚本能够执行。但是我从来没有收到邮件。以下是相关代码：

**php.ini**

```
[mail function]
; For Win32 only.
; http://php.net/smtp
;SMTP = localhost
; http://php.net/smtp-port
;smtp_port = 25

sendmail_path = "C:\xampplite\sendmail\sendmail.exe -t -i" 
```

**发送邮件.ini**

```
smtp_server=smtp.gmail.com

smtp_port=587
smtp_ssl=auto
default_domain=mydomain.com
error_logfile=error.log
debug_logfile=debug.log
auth_username=username50@gmail.com
auth_password=passpass

force_sender=myemail@gmail.com
hostname=smtp.gmail.com 
```

这里有什么我想念的吗？我的脚本正在向自己发送电子邮件。那不会有问题吧？

```
<?php
$to = "blah@gmail.com";
$subject = "Test mail";
$message = "Hello! This is a simple email message.";
$from = "someonelse@example.com";
$headers = "From:" . $from;
mail($to,$subject,$message,$headers);
echo "Mail Sent.";
?> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-04-15T08:05:25.843

尝试这个

**发送邮件.ini**

**[发邮件]**

```
smtp_server=smtp.gmail.com
smtp_port=465
smtp_ssl=ssl
error_logfile=error.log
debug_logfile=debug.log
auth_username=[email]@gmail.com
auth_password=[email password]
pop3_server=
pop3_username=
pop3_password=
force_sender=[email]@gmail.com
force_recipient=
hostname=smtp.gmail.com 
```

**php.ini**

**[邮件功能]**

```
SMTP = smtp.gmail.com
smtp_port = 465
sendmail_path = "\"C:\xampp\sendmail\sendmail.exe\" -t"
mail.add_x_header=Off 
```

# git - Github：fork a repo vs 在主 repo 下创建文件夹

> ID：10875431
> 
> 赞同：1
> 
> 时间：2012-06-04T01:35:20.377
> 
> 标签：git, github

我们的团队不熟悉 Git，我觉得我们没有正确使用它。

他们用实验室的名字开了一个 github 帐户。不同的人（不一定在同一个项目上工作）有一个带有他们名字的文件夹，他们用它来组织他们的代码。如果有人需要其他人的代码，他会将其复制到自己的文件夹中，然后随意使用。

这是一个大约 6 人的小团队（有时处理不同的东西），所以代码变化不是很快。

这是这样做的正确方法吗？还是应该让不同的人拥有自己的帐户，然后分叉项目并稍后合并？

有什么好的教程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T02:47:42.493

Github 'fork' 是托管在 Github 上的 Github 存储库的 Git 克隆；不多也不少。Github 'fork' 很有用，因为 Github 限制了谁可以推送到存储库。您需要成为“合作者”才能推动；如果你不是合作者，那么你 fork 以便你拥有一个**可以**推送到的 Github 存储库。

就您而言，听起来您不需要叉子。您只需创建一个 Github 存储库，将所有团队成员添加为协作者，然后让每个团队成员克隆 Github 存储库。此时，团队已准备好进行开发。

至于教程，搜索“git tutorial”或“git workflow”会找到很多有用的信息。'git help' 也是你的朋友。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T20:10:07.207

每个团队成员都应该有自己的 GitHub 帐户，而不是整个团队的帐户。[您可能需要考虑在https://github.com/settings/organizations](https://github.com/settings/organizations)（开源免费）上创建一个组织或将拥有存储库的当前帐户转换为组织。将每个团队成员添加为协作者。

从那里，团队成员可以在分支、他们自己的存储库的个人分支中工作，或者在主存储库的主分支中一起工作。

在任何情况下，他们都不应该**在**存储库的个人文件夹中来回复制代码。这在很大程度上违背了首先进行版本控制的目的。如果我需要使用您的代码并将其复制到我的文件夹中，然后您对副本进行更改，我现在正在使用过期代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T02:02:14.387

听起来好像 fork/pull request 这样做可能会更好。尝试每人拥有一个帐户，并分叉彼此的东西。

有很多很好的教程。这里有几个例子：

[https://help.github.com/articles/fork-a-repo](https://help.github.com/articles/fork-a-repo)

[http://git-scm.com/book](http://git-scm.com/book)

# eclipse - 从文件系统运行 pydev 项目（从不同的包导入）

> ID：10875432
> 
> 赞同：2
> 
> 时间：2012-06-04T01:35:23.147
> 
> 标签：eclipse, filesystems, pydev, packages

我想通过双击主模块（在eclipse之外）来运行我的**工作pydev项目python代码：xxx.py**

问题是由于我的导入位于不同的包中：

```
from src.apackage.amodule import obj 
```

当 xxx.py 被双击时，它抱怨它不知道导入在哪里（即使当我在 pydev 中运行 xxx.py 时它*神奇地*知道我正在导入什么）。

一个简单的解决方法是删除所有包并将所有模块移动到一个目录中（这显然有效但非常不方便）

我怎样才能在文件系统中运行我的代码而不做这个工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-10T01:27:46.963

这个页面很好地回答了我的问题：

[http://blog.habnab.it/blog/2013/07/21/python-packages-and-you/](http://blog.habnab.it/blog/2013/07/21/python-packages-and-you/)

底线始终是从顶层、最高级别的根目录执行您的代码（例如，使用执行程序主脚本的最小**主**.py 文件）。然后，始终使用绝对导入，并且您永远不会遇到缺少模块的问题，因为您从顶级目录启动程序并且所有导入都基于该“主”路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T14:41:53.973

您遇到的问题是大多数语言的自然行为。一个程序只知道它的工作路径（它开始的路径），在环境变量中注册的路径以及至少是相对路径。

因此，您创建的可执行文件的“魔力”是：它收集所需的所有脚本/模块，并将它们复制/组合到可执行文件旁边/中。然后，可执行文件在所有其他脚本也驻留的目录中运行，瞧……

如果您对每次想要在没有 PyDev 的情况下运行项目时创建可执行文件的解决方法不满意，则有两种选择。首先但不是我建议的是将工作路径注册到环境变量中。第二个也是我认为更好的一个：创建指向 python 可执行文件的链接并更改文本字段“目标：”的调用字符串。将路径附加到您要运行的脚本。然后更改文本字段“Start in:”并进入项目目录。完成此操作后，您应该能够通过简单的双击来启动您的项目。

（如果您依赖既不在路径上也不在项目中的外部库，您可以通过 sys 模块搜索临时附加到 pythonpath 的路径。）

我希望我能帮上一点忙。

# javascript - 如何从javascript中的单选按钮检索值？

> ID：10875433
> 
> 赞同：1
> 
> 时间：2012-06-04T01:35:24.900
> 
> 标签：javascript, html

好的，我已经检查了很多其他答案，但是那里发布的解决方案超出了我所学课程的范围。IE 我们还没有讨论过如何做到这一点。

无论如何，我只是想从一个单选按钮中获取值，这里是我的 html 代码和我的 javascript。

```
<script type="text/javascript">
function bookTrip()
{
    var arrivalcity;

    arrivalcity = document.reservations.radCity.value;

    alert(arrivalcity);
}
</script> 
```

实际的按钮在我的 html 代码中看起来像这样。

```
 Milwaukee: ($20) <input type="radio" name="radCity" value="20" /> 
```

当我提醒（到达）；我得到的只是NaN。我不明白为什么，它不应该返回字符串 20 吗？

请允许我澄清一下。我有 3 个不同的城市选择。我已经对其进行了编辑，以准确显示我开始表单时所拥有的内容。

```
<form name="reservations">
    <p>First Name: <input type="text" name="txtFirstName" />
    Last Name: <input type="text" name="txtLastName" /></p>

    <span style="font-weight:bold;">Arrival City:</span><br />

    Milwaukee: ($20) <input type="radio" name="radCity" value="20" /><br />
    Detriot: ($35) <input type="radio" name="radCity" value="35" /><br />
    St. Louis: ($40) <input type="radio" name="radCity" value="40" /> 
```

我需要从选择的任何一个中获取值。我无法将其硬编码到我的脚本中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T02:00:50.037

此功能将通过以下方法执行您想要的操作[`querySelector`](https://developer.mozilla.org/en/DOM/Document.querySelector)：

```
function selectedRadio(){
    var selValue = document.querySelector('input[name="radCity"]:checked').value;
    alert(selValue);
} 
```

[***JSFiddle***](http://jsfiddle.net/ult_combo/EYQCB/3/)

[参考](https://developer.mozilla.org/en/DOM/Document.querySelector)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T01:39:07.607

你的身体里有一个叫reservation的表格吗？

它将像这样工作：

```
<form name="reservations">
 <input type="radio" name="radCity" value="20" />
</form>

​function bookTrip()
{
    var arrivalcity;
    arrivalcity = document.reservations.radCity.value;
    alert(arrivalcity);
} 
```

看到它在这里运行：http: [//jsfiddle.net/eBhEm/](http://jsfiddle.net/eBhEm/)

* * *

**但是** ，我更喜欢这个：

```
<input type="radio" id="radCity" value="20" /> 
```

然后使用[getElementById](https://developer.mozilla.org/en/DOM/document.getElementById)

```
function bookTrip()
{
    var arrivalcity;
    arrivalcity = document.getElementById("radCity").value;
    alert(arrivalcity);
} 
```

看到这个[在 jsfiddle 上运行](http://jsfiddle.net/QmMqt/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T02:39:12.953

您可以在支持它的浏览器中使用 querySelector，但并非所有正在使用的浏览器都这样做。老式（可靠、健壮、适用于任何地方）方法是遍历集合以找到被检查的集合：

```
function getValue() {
  var buttonGroup = document.forms['reservations'].elements['radCity'];
  // or 
  // var buttonGroup = document.reservations.radCity;

  // Check for single element or collection, collections don't have
  // a tagName property
  if (typeof buttonGroup.tagName == 'string' && buttonGroup.checked) {
      return buttonGroup.value;

  } else {

    // Otherwise, it's a collection
    for (var i=0, iLen=buttonGroup.length; i<iLen; i++) {
      if (buttonGroup[i].checked) {
        return buttonGroup[i].value;
      }
    }
  }
} 
```

请注意，HTMLCollection 和 DOM 元素之间的测试使用 DOM 元素必须具有但 HTMLCollection 不应该具有的属性，除非集合的成员具有名称“tagName”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T02:55:38.687

```
function bookTrip() {
var arrivalcity= document.reservations.radCity;

for (var i = 0, iLen = arrivalcity.length; i < iLen; i++) {
    if (arrivalcity[i].checked) {
        alert(arrivalcity[i].value);

    }
} 
```

}

我相信这应该会有所帮助。

看到它在这里工作 [http://jsfiddle.net/eBhEm/24/](http://jsfiddle.net/eBhEm/24/)

# android - 移动重定向域级别，保留页面url

> ID：10875434
> 
> 赞同：1
> 
> 时间：2012-06-04T01:35:34.657
> 
> 标签：android, mobile, jquery-mobile, url-rewriting

我发现了移动检测和重定向脚本，但在“整个”站点级别，例如，如果您使用移动/智能手机/平板电脑到达内页（例如：www.site.com/this_page.php），您就是重定向到代理子域站点，比如说 m.site.com。

这不适合我的需要，我正在寻找对浏览器/设备检测有好处的东西，但是然后使用上面的示例将您重定向到完全相同的页面但在子域上，它应该是：m.site。 com/this_page.php,

有这样的剧本吗？

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:17:34.303

如果我理解正确，您应该能够在您网站的任何位置使用设备检测脚本（php 或其他）。例如，将您的示例与[51Degrees.mobi](http://51degrees.mobi?CATReferrer=1765)框架一起使用：

```
<?php
include('51Degrees/51Degrees.mobi.php');

$IsMobile = $_51d["IsMobile"] == "True";
    if ($IsMobile)
        redirect(m.site.com);
    else
        redirect(www.site.com);
?> 
```

这可以嵌入到您的索引的 HTML 中，但也可以放在 /this_page.php 中：

```
<?php
include('51Degrees/51Degrees.mobi.php');

$IsMobile = $_51d["IsMobile"] == "True";
    if ($IsMobile)
        redirect(m.site.com/this_page.php);
    else
        redirect(www.site.com/this_page.php);
?> 
```

代码的放置位置由您决定。

# html - HTMl5 标签的 Greppable 列表

> ID：10875435
> 
> 赞同：0
> 
> 时间：2012-06-04T01:35:40.017
> 
> 标签：html

我正在学习 HTML5。我已经阅读了一些简单的教程，这些教程告诉了我基础知识。

我现在想要的......是一个巨大的列表：

*   所有可能的 HTML5 标签

*   他们每个人都有哪些领域

是否有一些网页将所有这些都包含在一个列表中（所以我可以通过它来搜索？）。

我更喜欢我可以 grep 的文件 [而不是包含许多单独链接的网页]，因为前者更容易与 VIM 集成。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T01:39:22.220

看看这个 - [http://www.samsungdforum.com/upload_files/files/guide/data/html/html_2/reference/HTML%20Specification.html#Specification](http://www.samsungdforum.com/upload_files/files/guide/data/html/html_2/reference/HTML%20Specification.html#Specification)

（只需向下滚动到 HTML 标签）

# python - 在 Python 中考虑大小写

> ID：10875437
> 
> 赞同：1
> 
> 时间：2012-06-04T01:35:52.567
> 
> 标签：python, string, if-statement, module

有没有办法在python中同时考虑大写和小写字母？这是示例：

```
if 'jay' in rapper:
    print 'blah blah blah' 
```

我希望 if 语句对于 Jay 或 jay 是正确的。

我能做些什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T01:38:13.927

```
if 'jay' in rapper.lower():
    #do stuff 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T01:45:21.543

只是为了提供替代方案（@JoelCornett 的解决方案更好），您还可以这样做：

```
if rapper in ('jay', 'Jay'):
   # do stuff 
```

这种方法的一个优点是您可以检查不同的名称（尽管在这种情况下不是必需的）。

我假设这`rapper`是一个没有任何其他信息的字符串。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-04T02:25:43.277

如果说唱歌手是字符串列表

```
if "jay" in [x.lower() for x in rapper]:
    # do something
    print "done" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T01:50:33.843

最简单的方法是这样做（假设`rapper`是一个非空字符串）：

```
if rapper.strip().lower() == 'jay':
    print 'blah blah blah' 
```

另一种选择，使用正则表达式：

```
import re
if re.match(r'Jay', rapper.strip(), re.IGNORECASE):
    print 'blah blah blah' 
```

以上将适用于`rapper =` `'jay'`or `'jAy'`or `'JAY'`or `' Jay '`... 等。

# wcf - > EF 4.1 中的工作单元和存储库

> ID：10875438
> 
> 赞同：0
> 
> 时间：2012-06-04T01:35:58.260
> 
> 标签：wcf, silverlight, entity-framework, ria

我还需要 EF 4.1 中的 UoW/存储库模式吗？似乎 DbDomainContext 提供的接口已经给了我一个 UoW/Repository 模式。我也看过一些博客，他们既不喜欢存储库模式也不喜欢 UoW，但仍然使其可测试。

# python - 可以在python中更改函数的repr吗？

> ID：10875442
> 
> 赞同：22
> 
> 时间：2012-06-04T01:36:49.860
> 
> 标签：python, function, repr

我只看到了`__repr__`在类定义中设置方法的示例。是否可以在定义中或定义后更改`__repr__`for 函数？

我试过没有成功...

```
>>> def f():
    pass
>>> f
<function f at 0x1026730c8>
>>> f.__repr__ = lambda: '<New repr>'
>>> f
<function __main__.f> 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-04T01:52:58.307

是的，如果你愿意放弃实际上是一个函数的函数。

首先，为我们的新类型定义一个类：

```
import functools
class reprwrapper(object):
    def __init__(self, repr, func):
        self._repr = repr
        self._func = func
        functools.update_wrapper(self, func)
    def __call__(self, *args, **kw):
        return self._func(*args, **kw)
    def __repr__(self):
        return self._repr(self._func) 
```

添加装饰器功能：

```
def withrepr(reprfun):
    def _wrap(func):
        return reprwrapper(reprfun, func)
    return _wrap 
```

现在我们可以定义 repr 和函数：

```
@withrepr(lambda x: "<Func: %s>" % x.__name__)
def mul42(y):
    return y*42 
```

现在`repr(mul42)`生产`'<Func: mul42>'`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-04T01:44:06.510

不，因为`repr(f)`是这样做的`type(f).__repr__(f)`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-04T07:56:32.893

为此，您需要更改`__repr__`给定类的函数，在本例中是内置函数类 ( `types.FunctionType`)。因为在 Python 中你不能编辑内置类，只能对它们进行子类化，你不能。

但是，您可以采用两种方法：

1.  按照 kwatford 的建议包装一些功能
2.  使用您自己的 repr 函数创建您自己的表示协议。例如，您可以定义一个首先`myrepr`查找`__myrepr__`方法的函数，您不能将其添加到函数类，但您可以按照您的建议将其添加到单个函数对象（以及您的自定义类和对象），然后默认为 repr 如果`__myrepr__`没有找到。一个可能的实现是：

    ```
    def myrepr(x):
      try:
        x.__myrepr__
      except AttributeError:
        return repr(x)
      else:
        return x.__myrepr__() 
    ```

    然后你可以定义`__myrepr__`方法并使用`myrepr`函数。或者，您也可以`__builtins__.repr = myrepr`将您的功能设为默认值`repr`并继续使用`repr`. 这种方法最终会完全按照您的意愿进行，尽管编辑`__builtins__`可能并不总是可取的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-04-04T11:55:57.767

这似乎很难。Kwatford 的方法仅部分解决了这个问题，因为它不适用于类中的函数，因为它`self`会被视为位置参数，如[装饰 Python 类方法中所述 - 如何将实例传递给装饰器？](https://stackoverflow.com/questions/2365701/decorating-python-class-methods-how-do-i-pass-the-instance-to-the-decorator)- 但是，不幸的是，该问题的解决方案不适用于这种情况，因为使用`__get__()`and`functools.partial`会覆盖 custom `__repr__()`。

# c# - 在 C# 中自动遍历树

> ID：10875446
> 
> 赞同：-2
> 
> 时间：2012-06-04T01:37:43.720
> 
> 标签：c#, recursive-query, mptt

朋友们好日子！目前我正在研究这个数据库模型设计，称为修改前序树遍历（MPTT）。在看到使用 Common Table Expressions (CTE) 的劣势后，我发现了使用 MPTT 的建议。但在我可以使用 MPTT 的好处之前，我需要通过添加“右”和“左”节点值来重新设计我的数据库表。为此，我需要制作一个程序来自动化和更新表中每个数据的值。我的问题是我无法制作一个自动化节点值的程序。我正在尝试将 php 语言转换为 C# 代码，但我做不到。我在编程方面的弱点之一是创建“递归”方法。

我使用这个链接作为我的参考。 [分层数据库模型](http://www.sitepoint.com/hierarchical-data-database-3/)

这是我试图转换为 C# 的代码

```
<?php 
function rebuild_tree($parent, $left) {   
    // the right value of this node is the left value + 1   
    $right = $left+1;   

    // get all children of this node   
    $result = mysql_query('SELECT title FROM tree '.   
                           'WHERE parent="'.$parent.'";');  
    while ($row = mysql_fetch_array($result)) {   
        // recursive execution of this function for each   
        // child of this node   
        // $right is the current right value, which is   
        // incremented by the rebuild_tree function   
        $right = rebuild_tree($row['title'], $right);   
    }   

    // we've got the left value, and now that we've processed
    // the children of this node we also know the right value   
    mysql_query('UPDATE tree SET lft='.$left.', rgt='.   
                 $right.' WHERE title="'.$parent.'";');   

    // return the right value of this node + 1   
    return $right+1;   
}   
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T01:00:41.803

这是我自己的代码，如果有更好的解决方案，请告诉我

```
 int right = 0;

    public int rebuild_tree(int parent, int left)
    {
        // the right value of this node is the left value + 1
        right = left + 1;

        // get all children of this node
        command = conn.CreateCommand();
        command.CommandText = "SELECT cat_id FROM tbl_RefDataCategory_mst WHERE parent_id=@parent";
        command.Parameters.Add("parent", SqlDbType.Int).Value = parent;

        using (SqlDataReader reader = command.ExecuteReader())
        {
            while (reader.Read())
            {
                int temp = Convert.ToInt32(reader["cat_id"]);
                right = rebuild_tree(temp, right);
            }

            command = conn.CreateCommand();
            command.CommandText = "UPDATE tbl_RefDataCategory_mst SET lft=@l, rgt=@r WHERE cat_id=@p";
            command.Parameters.Add("l", SqlDbType.Int).Value = left;
            command.Parameters.Add("r", SqlDbType.Int).Value = right;
            command.Parameters.Add("p", SqlDbType.Int).Value = parent;

            command.ExecuteNonQuery();
        }

        return right + 1;
    } 
```

# javascript - 使用 ScrollPath jQuery 插件，有什么方法可以在碰到某个元素时暂停滚动？

> ID：10875448
> 
> 赞同：0
> 
> 时间：2012-06-04T01:37:59.837
> 
> 标签：javascript, jquery

我正在使用 jQuery ScrollPath 插件，我想知道它们是否是一种让路径在每个 DIV 处停止一秒钟左右的方法。我见过其他插件做类似的事情。

我在其他网站上看到过，你一直在滚动，它会停止滚动一秒钟左右。

这是我使用它的网站：

[http://mikelegacywebdesign.com/index.html](http://mikelegacywebdesign.com/index.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T19:55:11.520

我需要使用 jQuery Scrollpath 插件来做同样的事情，我找到了一种解决方法，尽管我意识到这可能不是最好的方法。

`scrollToStep()`我在基本上负责实际滚动的函数处修改了插件的源代码，并基于文档中的标志变量添加了条件检查，该变量在设置时`true`会转义`scrollToStep()`方法。现在，只需通过适当处理`setTimeout()`的调用使用您选择的一些外部代码设置标志，就可以模拟滚动路径中关键点的暂停。

我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T02:02:19.370

这是一个带有简单延迟滚动示例的[jsfiddle 。](http://jsfiddle.net/jwatts1980/ghXJG/)我不确定这将如何与 ScrollPath 插件交互，但这可能是一个好的开始。

# vb.net - SetValue/GetValue 与通过参数直接访问数组

> ID：10875453
> 
> 赞同：0
> 
> 时间：2012-06-04T01:38:48.797
> 
> 标签：vb.net, vb6-migration

我有一个数组，它最初是 VB6 中的 Variant 数组。

VB6 中的示例代码：

```
ListBoxDrawings.List(X1, Y1) = myArray(X2, Y2)
myArray(A, B) = ListBoxDrawings.List(I, C) 
```

通过[ArtinSoft 的 VBUC](http://www.artinsoft.com/pr_vbcompanion.aspx)运行它后，它的值使用[`GetValue`](http://msdn.microsoft.com/en-us/library/147tce02.aspx)&处理[`SetValue`](http://msdn.microsoft.com/en-us/library/f1sefc5x)。

VB.NET 中的示例代码：（*忽略到 ListView 的转换）*

```
ListViewDrawings.Items(X1).SubItems(Y1).Text = CStr(myArray.GetValue(X2, Y2))
myArray.SetValue(ListViewDrawings.Items(I).SubItems(C).Text, A, B) 
```

由于 VB.NET 不做变体，我发现该数组应该被键入为 2D 字符串数组。似乎没有理由使用 GetValue/SetValue，因为前者返回一个对象，而后者需要一个。这意味着如果我想将返回的对象分配给一个变量，我必须将它转换为字符串（Cstr），这似乎是一个可能引入错误的毫无意义的额外步骤。此外，由于该方法有很多重载，因此代码可能不那么清晰。 **使用 SetValue / GetValue 有什么好处**，还是我应该只考虑 VBUC 转换 Variant 的工件，并像原始代码一样直接访问数组？

没有 Get/Set 方法的 VB.NET：

```
ListViewDrawings.Items(X1).SubItems(Y1).Text = myArray(X2, Y2)
myArray(A, B) = ListViewDrawings.Items(I).SubItems(C).Text 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T01:44:44.483

肯定会抛弃对象以支持字符串。转换工具几乎总是将 Variant 视为 Object，因为在 VB6 中，Variant 是通用类型，就像在 .NET Object 中一样。

# python - 存在外键时，Django中的UserCreationForm带有额外的字段

> ID：10875454
> 
> 赞同：0
> 
> 时间：2012-06-04T01:39:05.930
> 
> 标签：python, django

我对 Django 很陌生，我正在尝试创建一个注册表单。这是我的**模型**的相关部分：

```
class UserProfile(models.Model):
    user = models.OneToOneField(User)

    university = models.ForeignKey('University')
    course_title = models.ForeignKey('Course_Title')

    class Meta:
        db_table = 'user_profile'

def create_user_profile(sender, instance, created, **kwargs):
    if created:
        UserProfile.objects.create(user=instance)

post_save.connect(create_user_profile, sender=User) 
```

这是我正在使用的表格：

```
from django.contrib.auth.forms import UserCreationForm
from django import forms
from django.contrib.auth.models import User
from shelf.models import University, Course_Title, UserProfile

class RegistrationForm(UserCreationForm):

error_messages = {
    'duplicate_email': "A user with that e-mail already exists.",
    'email_mismatch': "The two e-mail fields didn't match.",
}

# An e-mail is being used instead of the usual Django username.
username = forms.EmailField(label="E-mail")
username2 = forms.EmailField(label="Confirm E-mail")
university = forms.ModelChoiceField(queryset=University.objects.all(), empty_label="Please choose a university")
course_title = forms.ModelChoiceField(queryset=Course_Title.objects.all(), empty_label="Please choose a course title")

class Meta:
    model = User
    fields = ("first_name", "last_name", "university", "course_title", "username", "username2")

    .
    .
    .

def save(self, commit=True):
    user = super(RegistrationForm, self).save(commit=False)
    user.save()
    user_profile = UserProfile(user=user, university=self.cleaned_data["university"], course_title=self.cleaned_data["course_title"])
    if commit:
        user_profile.save()
    return user_profile 
```

而且，这是我的**观点**：

```
def index(request):
    if request.method == 'POST':
        form = RegistrationForm(request.POST)
        if form.is_valid():
            new_user = form.save()
            return HttpResponseRedirect("/")
    else:
        form = RegistrationForm() 

    return render(request, "shelf/register.html",  {'form': form,  }) 
```

我收到错误 user_profile.university_id 可能不是 NULL。我已经寻找了很多为什么会发生这种情况，并且我理解它为什么会发生。但我似乎无法修复它。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T02:14:22.573

看起来问题是由您的信号处理程序引起的：

```
def create_user_profile(sender, instance, created, **kwargs):
    if created:
        UserProfile.objects.create(user=instance) # no university here

post_save.connect(create_user_profile, sender=User) 
```

请尝试禁用此处理程序并再次测试。

如果您需要信号处理程序，请尝试更改 form.save 方法：

```
def save(self, commit=True):
    user = super(RegistrationForm, self).save(commit=False) #this should trigger the signal handler to create a UserProfile instance, but not commit
    user_profile = user.get_profile()
    user_profile.university=self.cleaned_data["university"]
    user_profile.course_title=self.cleaned_data["course_title"]
    if commit:
        user.save()
        user_profile.save() 
```

小心，如果你在 shell 中创建一个用户，你仍然会得到同样的错误，我想也许你可以在 UserProfile 模型中为大学和 course_title 字段添加默认值：

```
class UserProfile(models.Model):
    user = models.OneToOneField(User)

    university = models.ForeignKey('University', default=1)
    course_title = models.ForeignKey('Course_Title', default=1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T05:27:38.433

我有同样的问题，但我按照步骤无法解决

**模型**

```
from django.db import models
from django.contrib.auth.models import User
from django.db.models.signals import post_save

class UserProfile(models.Model):
    url = models.URLField()
    home_address = models.TextField()
    user = models.ForeignKey(User, unique=True)

def create_user_profile(sender, instance, created, **kwargs):
    if created:
        UserProfile.objects.create(user=instance)

post_save.connect(create_user_profile, sender=User) 
```

**看法**

```
from django.contrib.auth.forms import UserCreationForm
from django.contrib.auth.models import User, Group
from django import forms
from django.shortcuts import render_to_response
from django.http import HttpResponse
from django.template.context import RequestContext
from django.views.decorators.csrf import csrf_protect
class RegisterForm(UserCreationForm):
    permission_choices = (
            ('1', 'test1'),
            ('2', 'test2'),
            )
    email      = forms.EmailField(required=False)
    first_name = forms.CharField(required=False)
    last_name  = forms.CharField(required=False)
    url        = forms.URLField()
    permission = forms.ChoiceField(choices=permission_choices)

    class Meta(UserCreationForm.Meta):
        model = User
        fields = ('first_name', 'last_name', 'url', 'username', 'email', 'password1', 'password2', 'permission')

    def save(self, commit=True):
        user = super(RegisterForm, self).save(commit=False)
        user_profile    = user.get_profile()
        user.email      = self.cleaned_data['email']
        user.first_name = self.cleaned_data['first_name']
        user.last_name  = self.cleaned_data['last_name']
        user.permission = self.cleaned_data['permission']
        user_profile.url = self.cleaned_data['url']
        if commit:
            user.save()
            user_profile.save()
        return user

@csrf_protect
def register(request):
    if request.method == 'POST':
        form = RegisterForm(request.POST)
        if form.is_valid():
            new_user = form.save()
            if new_user.permission == 'q':
                try:
                    new_user.groups.add(Group.objects.get(name='test1'))
                except Group.DoesNotExist:
                    u = User.objects.get(pk=new_user.pk)
                    u.delete()
                    return HttpResponse('The Organisation you\'ve just choosed doesn\' exist')
            return HttpResponse('OK')
    else:
        form = RegisterForm()

    return render_to_response('registration/user.html', {'form': form}, context_instance=RequestContext(request)) 
```

# wpf - 使对象“颤动”/增长和收缩

> ID：10875457
> 
> 赞同：0
> 
> 时间：2012-06-04T01:39:28.740
> 
> 标签：wpf, pixelsense

WPF 很新，但我制作了一个 Surface 应用程序，以在我的办公室接待处引起人们的注意。

[http://www.diaryofaninja.com/blog/2012/06/03/building-an-image-and-video-viewer-for-microsoft-surface-20-in-no-time-at-all](http://www.diaryofaninja.com/blog/2012/06/03/building-an-image-and-video-viewer-for-microsoft-surface-20-in-no-time-at-all)

我想做的是，如果人们有一段时间没有触摸屏幕（我已经用计时器记录了这个），我想让我的应用程序中的每个对象一个一个地“Throb”得到人们的关注。

我会使用转换还是故事板？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T03:26:28.570

我最终在计时器上调用了以下方法：

```
void RunScaleAnimation(FrameworkElement e)
{

var storyboard = new Storyboard();
var easeOut = new BackEase { EasingMode = EasingMode.EaseOut, Amplitude = 0.3 };

double startHeight = e.ActualHeight;
double startWidth = e.ActualWidth;

var growAnimationHOut = new DoubleAnimation(startHeight, startHeight * 1.05,
                                            TimeSpan.FromMilliseconds(100)) { AutoReverse = true };

var growAnimationWOut = new DoubleAnimation(startWidth, startWidth * 1.05,
                                            TimeSpan.FromMilliseconds(100)) { AutoReverse = true };

growAnimationHOut.EasingFunction = easeOut;
growAnimationWOut.EasingFunction = easeOut;

storyboard.Children.Add(growAnimationHOut);
storyboard.Children.Add(growAnimationWOut);

Storyboard.SetTargetProperty(growAnimationWOut, new PropertyPath(FrameworkElement.WidthProperty));
Storyboard.SetTargetProperty(growAnimationHOut, new PropertyPath(FrameworkElement.HeightProperty));

e.BeginStoryboard(storyboard);
} 
```

# asp.net - TinyMCE、AntiXSS、MVC3 和 GetSafeHtmlFragment

> ID：10875458
> 
> 赞同：6
> 
> 时间：2012-06-04T01:39:32.723
> 
> 标签：asp.net, asp.net-mvc-3, tinymce, xss, antixsslibrary

我已经阅读了很多关于 XSS 和如何处理的关于 SO 的帖子。通常，共识是白名单而不是黑名单，避免使用正则表达式（太多变体无法处理）。

我正在开发一个 ASP.Net MVC3 应用程序。我需要能够显示来自用户条目的 HTML（例如 <strong>、<ul>、<li> 等...），但我不希望有任何 XSS 风险。

我正在通过 Nuget 使用 AntiXSS 包。在我的模型中，我有

```
[AllowHtml]
public string UserDetails{ get; set; } 
```

在我看来，我将 TinyMCE 连接到了 textarea。

在我的控制器中，我从视图中获取帖子并对其进行清理：

```
using Microsoft.Security.Application;
...
string SanitizedDetails = Sanitizer.GetSafeHtmlFragment(model.UserDetails); 
```

我的问题：我做对了吗？我是否受到了大多数 XSS 问题的保护，或者我是在吠叫错误的树吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T04:40:49.650

您被张贴在某些表格上。允许 html 是一项危险的操作，因此您正在尝试尽可能地减轻它。你的方法在这里很好。

还有其他选项可以提供帮助，但不幸的是，并非一切都已准备好生产。有各种浏览器部分支持的内容安全策略标头。例如： [http ://www.w3.org/TR/CSP/](http://www.w3.org/TR/CSP/)

所以你所拥有的是不错的，但如果你想冒险进入内容安全策略，你可以稍微增强一下（对于一个）

如果您有兴趣，我会在这里讨论很多 XSS 攻击。 [http://www.pluralsight-training.net/microsoft/Courses/TableOfContents?courseName=hack-proofing-dotnet-app](http://www.pluralsight-training.net/microsoft/Courses/TableOfContents?courseName=hack-proofing-dotnet-app)

您可能希望在渲染之前（和保存之前）包含额外的清理，以防另一个攻击（例如 sql 注入）将 xss 代码插入到您的 html 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-03T10:59:25.583

当我们`Sanitizer.GetSafeHtmlFragment(model.UserDetails);`在白名单的帮助下使用时，它不会允许任何标签通过它执行。例如当

```
model.UserDetails = "Testdata `<script>alert('Malicious Code');</script>`" 
```

它是一个注入代码，SafeHtmlFragment 方法不允许`<script>`标签执行。

```
model.UserDetails = "Testdata `<a href="www.google.com">Google <a/>`" 
```

这是一个安全的代码，它应该返回一个文本和谷歌超链接以导航到 google.com。

当`model.UseDetails`仅返回**Testdata**作为其输出时。

# java - 预留实例和预热请求不起作用

> ID：10875460
> 
> 赞同：4
> 
> 时间：2012-06-04T01:39:59.750
> 
> 标签：java, google-app-engine

我从来没有能够让它正常工作，它是如此令人不安：我已经配置了预热请求，但我从来没有看到它们通过，所以大约 10% 的请求会导致一个新实例被启动并且请求需要 30 秒或更差。而且由于持续的放缓，有时这些旋转需要比平时更长的时间并且超时，这太可怕了。这是一个 spring 应用程序，启动速度非常慢，我可能会优化到不到 30 秒，但除此之外......我需要预热请求才能工作，因此实例在它们之前不会服务用户请求其实准备好了。

有人说，除非你有常驻实例，否则预热请求不起作用，这是有道理的，所以我注册了 336 小时/周的折扣实例小时，但一个小时后我仍然看不到创建任何保留实例。即使我杀死了所有动态的，也会创建新的动态。

所以我的具体问题是：我需要做任何其他事情来设置保留实例吗？一旦这些都启动了，那会打开热身请求吗？

我的应用设置：

空闲实例：自动自动

等待延迟：5s-10s

配置的服务：预热请求

appengine-web.xml：

```
<warmup-requests-enabled>true</warmup-requests-enabled>
<threadsafe>true</threadsafe> 
```

网页.xml：

```
 <servlet>
   <servlet-name>_ah_warmup</servlet-name>
   <servlet-class>com.google.apphosting.utils.servlet.WarmupServlet</servlet-class>
   </servlet>
   <servlet-mapping>
   <servlet-name>_ah_warmup</servlet-name>
   <url-pattern>/_ah/warmup</url-pattern>
   </servlet-mapping> 
```

我的主要 Spring Dispatcher servlet 和 appstats servlet 也有：

```
 <load-on-startup>1</load-on-startup> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T19:10:34.910

我自己想通了。更好的谷歌搜索出现了正确的文档页面：

[https://developers.google.com/appengine/docs/adminconsole/performancesettings](https://developers.google.com/appengine/docs/adminconsole/performancesettings)

预留实例是在您指定空闲实例时创建的。所以我将 Idle Instances 设置从 auto/auto 更改为 2/auto。就是这样！

性能现在很好而且很稳定，所以我建议任何拥有付费应用程序的人指定至少 1 个空闲实例。

我也确实看到了新动态实例的热身请求，因此保留实例确实是热身的要求。

# python - Django MongoDB 引擎 InvalidID

> ID：10875462
> 
> 赞同：-1
> 
> 时间：2012-06-04T01:40:32.667
> 
> 标签：python, django, mongodb

当使用带有以下内容的python shell时：

```
>>> User.objects.get(pk=1) 
```

我收到以下错误：

```
InvalidId: AutoField (default primary key) values must be strings 
    representing an ObjectId on MongoDB (got u'1' instead) 
```

这个问题的一个可能的解决方案对我不起作用，可以在这里找到：http: [//django-mongodb.org/troubleshooting.html](http://django-mongodb.org/troubleshooting.html)

我想知道是否有其他人遇到过这个问题，您是如何解决的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T08:39:47.663

MongoDB 不使用整数主键。

# php - 在 php 中发送带有从数据库生成的附件的电子邮件

> ID：10875464
> 
> 赞同：0
> 
> 时间：2012-06-04T01:40:48.713
> 
> 标签：php, email, email-attachments, vcf-vcard

我有一个简单的脚本，用于发送带有用户上传附件的电子邮件。如何修改脚本，以便通过电子邮件发送在 php 中生成的文件（例如，在这种情况下，我想从数据库中提取联系信息，生成文件的 vCard 并将其附加到电子邮件。

查看公司.php

```
<?php
// this auto-magically inserts header.html here
require('header.html');  

include('mail.php');

if(isset($_POST['name'], $_FILES['file'])){

    $body = array(

        "From: {$_POST['name']}",

        "Details:",
        "Name: {$_FILES['file']['name']}",
        "Size: {$_FILES['file']['size']}",
        "Type: {$_FILES['file']['type']}"

    );

    mail_file('receiver@email.com','sender@email.com','subject', implode("\r\n", $body), $_FILES['file']);

}
?> 
```

* * *

```
<?php
echo    "<form action='' method='post' enctype='multipart/form-data'>";
echo        "<p>";
echo            "<label for='name'>Name</label>";
echo            "<input type='text' name='name' id='name'>";
echo        "</p>";
//          $file = "getVcard.php?CompanyID=" . $CompanyID;

echo        "<p>";
echo            "<label for='file'>File</label>";
echo            "<input type='file' name='file' id='file'>";
echo        "</p>";

echo        "<p>";
echo            "<input type='submit' value='Email file'>";
echo        "</p>";
echo    "</form>";
?> 
```

* * *

邮件.php

```
<?php

function mail_file($to, $from, $subject, $body, $file){

    $boundary = md5(rand());

    $headers = array(
        "MIME-Version: 1.0",
        "Content-Type: multipart/mixed; boundary=\"{$boundary}\"",
        "From: {$from}"
    );

    $message = array(
        "--{$boundary}",
        "Content-Type: text/plain",
        "Content-Transfer-Encoding: 7bit",
        "",
        chunk_split($body),
        "--{$boundary}",
        "Content-Type: {$file['type']}; name=\"{$file['name']}\"",
        "Content-Disposistion: attachment; fielname=\"{$file['name']}\"",
        "Content-Transfer-Encoding: base64",
        "",
        chunk_split(base64_encode(file_get_contents($file['tmp_name']))),
        "--{$boundary}--"
    );

    mail($to, $subject, implode("\r\n", $message), implode("\r\n", $headers));
}

?> 
```

我试图改变

```
echo            "<label for='file'>File</label>";
echo            "<input type='file' name='file' id='file'>"; 
```

至

```
$file = "getVcard.php?CompanyID=" . $CompanyID; 
```

生成电子名片，但是当我这样做时，电子邮件不会发送。

有什么建议么？

谢谢，

营汤1988

* * *

这是我的 getVcard.php 文件：

```
<?php
include "connection.php";
$CompanyID = $_GET['CompanyID'];
$CompanyID=$_GET['CompanyID']; // Collecting data from query string
if(!is_numeric($CompanyID)){ // Checking data it is a number or not
    echo "Data Error"; 
exit;
}
$query = "SELECT * FROM company where CompanyID = $CompanyID";
$result = mysql_query($query) or die(mysql_error());
header('Content-Type: text/vcard');
header('Content-Disposition: attachment; filename=vcardexport.vcf');
        while($ResultsLists = mysql_fetch_array($result)){  
echo                "BEGIN:VCARD\n";
echo                "VERSION:4.0\n";
echo                "KIND:org\n";
echo                "FN:" . $ResultsLists['CompanyName'] . "\n";
echo                "ORG:" . $ResultsLists['CompanyName'] . "\n";
echo                "ADR;TYPE=work;LABEL=\"". $ResultsLists['CompanyAddress1'] . "\n" . $ResultsLists['CompanyAddress2'] . "\n". $ResultsLists['CompanyCity'] . "\, " . $ResultsLists['CompanyState'] . " " . $ResultsLists['CompanyZipcode'] . "\n" . $ResultsLists['CompanyCountry'] . "\":" .  $ResultsLists['CompanyAddress2'] . ";" . $ResultsLists['CompanyAddress1'] . ";" . $ResultsLists['CompanyCity'] . ";" . $ResultsLists['CompanyState'] . ";" . $ResultsLists['CompanyZipcode'] . ";" . $ResultsLists['CompanyCountry'] . "\n";
                if($ResultsLists['CompanyPhone'] != ""){
echo                    "TEL;TYPE=\"work,voice\";VALUE=uri:tel:" . $ResultsLists['CompanyPhone'] . "\n";
                }
                if($ResultsLists['CompanyEmail'] != ""){
echo                    "WORK.EMAIL:" . $ResultsLists['CompanyEmail'] . "\n";
                }
echo                "WORK.LANG;PREF=1:en\n";
                if($ResultsLists['CompanyNotes'] != ""){
echo                    "NOTE:" . $ResultsLists['CompanyNotes'] . "\n";
                }
                if($ResultsLists['CompanyWebsite'] != ""){
echo                    "URL:" . $ResultsLists['CompanyWebsite'] . "\n";
                }
echo                "END:VCARD";
?> 
```

* * *

**更新：** 是否可以将 vcf 文件保存到临时位置，然后自动将临时文件附加到电子邮件（在将临时文件附加到电子邮件之前重命名）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T01:56:57.573

最简单的解决方案是手动传递您的 vcard 数据：

```
$file = array(
              'type' => 'text/plain',
              'name' => 'vcard.txt',
              'tmp_name' => 'http://yourdomain/getVcard.php?CompanyID=' . $CompanyID
        ); 
```

但这是一个非常肮脏的解决方案。从长远来看，最好使用像[phpmailer](http://phpmailer.worxware.com/)这样的类。

# cakephp - 输出 CSV 时缺少视图文件

> ID：10875468
> 
> 赞同：0
> 
> 时间：2012-06-04T01:41:30.733
> 
> 标签：cakephp, csv, routing

我正在使用 CakePHP 2.x，并在 IIS 上本地运行它。我正在按照[CakePHP方式将数据导出到CSV](http://bakery.cakephp.org/articles/jeroendenhaan/2010/04/23/exporting-data-to-csv-the-cakephp-way)的教程进行操作，但出现错误。

我输入的 URL 是这样的：`http://myproject.localhost/territory/spreadsheet.csv`

我有`Router::parseExtensions('csv');`作为第一件事`app\Config\routes.php`

这是我的控制器：

`class TerritoryController 扩展 AppController { public $useTable = 'ezrep_territory';

```
public $paginate = array('limit' => 50);

public function beforeFilter()
{
    parent::beforeFilter();
    $this->Auth->deny('index');
}

public function Index()
{
    // ... snip ...
}

public function Spreadsheet()
{
    $data = $this->Territory->find(
        'all',
        array(
            'conditions' => array('Territory.ez' => $this->ez),
            'fields' => array('territory','terrcode','terrdesc'),
            'contain' => false
    ));
    $headers = array(
        'Territory'=>array(
            'territory' => 'Territory ID',
            'terrcode' => 'Terr Code',
            'terrdesc' => 'Terr Desc'
        )
    );

    array_unshift($data,$headers);
    $this->set(compact('data'));
} 
```

} `

在`app\View\Layouts\csv`，我有一个文件`default.ctp`：

`<?php echo $content_for_layout; ?>`

在`app\View\Territory`，我有一个文件`spreadsheet.ctp`：

```
// Loop through the data array
foreach ($data as $row)
{
    // Loop through every value in a row
    foreach ($row['Territory'] as &$value)
    {
        // Apply opening and closing text delimiters to every value
        $value = "\"".$value."\"";
    }
    // Echo all values in a row comma separated
    echo implode(",",$row['Territory'])."\n";
} 
```

当我转到 时`http://myproject.localhost/territory/spreadsheet.csv`，我得到一个页面，该页面似乎是通过 呈现的`app\View\Layouts\default.ctp`，但出现错误：

`View file &quot;C:\zproj\ezrep40\app\View\Territory\csv\spreadsheet.ctp&quot; is missing.` 和 `Error: An Internal Error Has Occurred.`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T07:59:04.023

这个不对

> 在 app\View\Territory 中，我有一个文件 spreadsheet.ctp：

您还需要在以扩展名命名的子目录中放置视图，而不仅仅是布局：

> app\View\Territory\csv\spreadsheet.ctp

# ruby-on-rails - 如何在 erb 形式中实例化铁路模型？

> ID：10875471
> 
> 赞同：0
> 
> 时间：2012-06-04T01:41:45.967
> 
> 标签：ruby-on-rails, haml, erb

是否可以在 erb 表单中实例化一个 rails 模型（知道它的 id）。我正在使用下面的 haml 进行此操作，现在想使用 erb 表单。

```
- business_trip_request = BusinessTripRequest.find(id) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T01:45:47.633

是的，你可以，但你不应该。违反 MVC 结构通常不是好的做法。视图不应访问数据库。您应该让控制器从模型中加载实例变量，并让视图专注于显示它。

如果必须这样做，请在 html.erb 文件中尝试：

```
<% business_trip_request = BusinessTripRequest.find(id) %> 
```

要显示 id 和 name 字段（例如）：

```
<%= business_trip_request.id %> <br />
<%= business_trip_request.name %> <br /> 
```

# iphone - 如何优化我的控制器以使其加载更快？

> ID：10875474
> 
> 赞同：0
> 
> 时间：2012-06-04T01:42:06.817
> 
> 标签：iphone, objective-c, ios, performance, optimization

我使用的大多数 iOS 应用程序都非常敏感，当我点击一个元素时，它会立即转到下一个视图。在我的应用程序中，我的一些视图控制器需要 0.5-1.0 秒才能加载。

我的代码都在`viewDidLoad`方法中，我很确定这是问题所在，但我无法移出任何东西，因为我需要实例化的每一个元素。

我认为的一个解决方案是将我在 viewDidLoad 中所做的所有工作移到一个线程中，然后在我准备好调用时调用主线程`addSubview`，即使 UIKit 不是线程安全的，这也能工作吗？还是我还缺少其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T04:05:27.380

尝试将 viewDidLoad 中的一些代码移动到 viewdidAppear。一旦呈现视图，就会调用 viewDidAppear。如果你必须做一些艰苦的工作，那就在那里做，也许在你做的时候在某个地方展示一个微调器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T04:21:59.650

你在 viewDidLoad 中到底在做什么？顺便说一句，仅在需要时才加载视图，如果您想更快地在视图之间切换，我可以建议您创建一个初始化阶段，在该阶段您在要显示的所有视图控制器上调用 -view，也许对微调器有所帮助或进度条。但请注意，这仅适用于密集加载任务，而不适用于内存消耗任务。
你的请求听起来很奇怪，所以你最好试着更好地解释为什么你的 viewDidLoad 这么慢，也许有什么问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T02:57:53.003

在 Xcode 中定义您的 UI 元素作为界面设计的一部分。这样，Xcode 可以将您的 storeyboard 或 xib 文件编译成快速加载的二进制形式。

# php - 让我的 AJAX 错误消息显示

> ID：10875481
> 
> 赞同：1
> 
> 时间：2012-06-04T01:43:12.577
> 
> 标签：php, ajax, email, message

无论用户数据是否有效，我都会显示一条成功消息。我有一条错误消息，但无法显示它。我不是最好的编码员，所以要友善:)

另外，由于某种原因，当我通过表单收到电子邮件时，用户的电子邮件会显示为 user@MISSING_DOMAIN。我的第一个问题优先，所以如果它太多，你不必帮助我。

表格代码

```
<form action="contactformprocess3.php" method="post" class="myForm" >
<input name="name" type="text" id="f1" class="name-textinput"/><br />
    <script type="text/javascript">
        var f1 = new LiveValidation('f1');
        f1.add( Validate.Presence );
    </script>

<input name="email" type="text" id="f21" class="email-textinput"/><br />
    <script type="text/javascript">
        var f21 = new LiveValidation('f21');
            f21.add( Validate.Presence );
            f21.add( Validate.Email );
            f21.add( Validate.Length, { minimum: 10, maximum: 35 } );
    </script>

<textarea name="message" rows="9" cols="34" id="field3" class="message-textinput"></textarea>
    <span class="underform">
        <input type="reset" class="reset" />
        <input type="submit" value="submit" class="submit" />
    </span>
</form> 
```

AJAX

```
$(function() {
$('.myForm').submit(function(e) {
    e.preventDefault();
    var form = $(this);
    var post_url = form.attr('action');
    var post_data = form.serialize();
    $.ajax({
        type: 'POST',
        url: post_url,
        data: post_data,
        success: function(msg) {
            $('.success-box').fadeIn("slow").delay(3000).fadeOut("slow");
        },
        error: function(xhr, status, error, req) {
            $('.failure-box').fadein("slow").delay(3000).fadeOut("slow");
        }

    });
  });
}); 
```

PHP 电子邮件

```
<?php
$to = 'wj@pieceofmedesigns.com';
$subject = 'Piece of Me Designs';
$from = $_POST['email'];
$name = $_POST['name'];
$message = $_POST['message'];

if (mail($to, $subject, $message, 'From: '.$name.' &lt;'.$from.'&gt;')) {
    echo 'Message was sent successfully.';
} else {
    echo 'There was a problem sending your message.';
} 
```

?>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T02:13:35.487

埃德所说的完全正确。这意味着您在 ajax 块的“错误：”部分等待业务规则故障（未发送电子邮件）对您来说是什么，而此块中只会显示技术错误。

从技术角度来看，业务错误仍然返回“成功”；这只是您的应用程序必须处理的不同“成功”答案。

所以，基本上对你来说，解决方案是检查回声：

```
success: function(msg) {
    if (msg == 'Message was sent successfully.') {
       $('.success-box').fadeIn("slow").delay(3000).fadeOut("slow");
    } else {
       $('.failure-box').fadein("slow").delay(3000).fadeOut("slow");
    }
},
error: function(xhr, status, error, req) {
    //alert the user there was a technical problem
} 
```

我可能会建议您从您的 php 服务返回基于 XML 的回显，然后您可以更轻松地管理标签和规范化响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T02:05:29.997

当无法联系服务器或服务器返回不是 200 的状态码时，会发生 AJAX 错误情况。此类事情是找不到文件、脚本错误或网络问题，

因此，要获得正确的消息，您需要验证数据。您可以在使用 AJAX 之前执行此操作，以确保您发送到服务器脚本的数据已经过验证。

您还需要获取您的 PHP 脚本来进行验证。这是确保安全的好政策。

# security - Grails - Spring Security 帐户创建

> ID：10875483
> 
> 赞同：1
> 
> 时间：2012-06-04T01:43:17.460
> 
> 标签：security, grails, plugins, login, spring-security

我正在使用 Spring Security Core 插件，并且可以成功地将用户登录和注销我的应用程序。但是，当用户成功注册时，我不明白如何在注册回发中设置该用户的安全上下文，以便他们可以重定向到安全页面而无需再次登录。欢迎任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T03:53:13.527

您引用的另一个链接是 2 岁。从那时起，我`reauthenticate`向 SpringSecurityService 添加了一个方法。请参阅文档中的“6.2 SpringSecurityService”部分：http: [//grails-plugins.github.com/grails-spring-security-core/docs/](http://grails-plugins.github.com/grails-spring-security-core/docs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T02:27:58.173

我最终找到了这个链接，它可以解决问题：[https ://stackoverflow.com/a/7112838/469106](https://stackoverflow.com/a/7112838/469106)

以下是该链接的内容：

如果你没有密码，你可以通过加载用户

```
def user = User.findByUsername(username) 
```

并在 3 参数构造函数中设置权限数组。通过创建身份验证

```
GrantedAuthority[] auths = user.authorities.collect { new GrantedAuthorityImpl(it.authority) } 
```

然后您可以省略对 authenticate() 的调用并使用：

```
SecurityContextHolder.context.authentication = new UsernamePasswordAuthenticationToken(username, 'unknown', auths) 
```

# android - 在片段内未检测到android滑动

> ID：10875485
> 
> 赞同：5
> 
> 时间：2012-06-04T01:43:59.133
> 
> 标签：android, swipe, gesture-recognition

我有一个基于选项卡主机并使用片段的项目，

在一个选项卡上它有一个 listFragment，用户点击一个单元格并转到另一个片段，

从那里用户可以在该选项卡的片段之间滑动，

我让项目工作，直到我进入 listFragment 的单元格，

我需要检测向左或向右滑动以相应地更改片段，

这是我的代码：

```
public class PrepareSkin extends Fragment implements OnGestureListener{

      private static final int SWIPE_MIN_DISTANCE = 120;
       private static final int SWIPE_MAX_OFF_PATH = 250;
       private static final int SWIPE_THRESHOLD_VELOCITY = 200;

       private GestureDetector gestureScanner;

    @Override
     public View onCreateView(LayoutInflater inflater, ViewGroup container,
       Bundle savedInstanceState) {

        gestureScanner = new GestureDetector(this);

      // TODO Auto-generated method stub
      View myFragmentView = inflater.inflate(R.layout.prepare_skin, container, false);

       Log.i("Mirko", "CREATO <<");

      return myFragmentView;
     }

       public boolean onTouchEvent(MotionEvent me)
       {
        return gestureScanner.onTouchEvent(me);
       }

    @Override
    public boolean onDown(MotionEvent e) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
            float velocityY) {
        try {
               if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH)
                   return false;
               // right to left swipe
               if(e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                   Log.i("Mirko", "LEFTERS <<");

               }  else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                   Log.i("Mirko", "rIGTHERS >>");

               }
               else if(e1.getY() - e2.getY() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
               }  else if (e2.getY() - e1.getY() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
               }
           } catch (Exception e) {
               // nothing
           }

                   return true;
    }

    @Override
    public void onLongPress(MotionEvent e) {
        // TODO Auto-generated method stub

    }

    @Override
    public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX,
            float distanceY) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public void onShowPress(MotionEvent e) {
        // TODO Auto-generated method stub

    }

    @Override
    public boolean onSingleTapUp(MotionEvent e) {
        // TODO Auto-generated method stub
        return false;
    }

} 
```

那么为什么我的手势识别器不起作用？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-30T16:42:12.900

这个链接似乎在你的小巷里：[Android Fragment onCreateView with Gestures](https://stackoverflow.com/questions/11421368/android-fragment-oncreateview-with-gestures)

虽然他们没有`OnGestureListener`在他们的类中实现，而是将 clickListener 附加到他们的整个视图，然后以这种方式触发 Gesture Listener，但它仍然应该适用于您的代码片段。

另一个快速解决方法可能是您将其返回`onDown()`为 false - 也许您应该将其返回为 true。我知道 Android 不会识别`onUp()`if之前`onDown()`没有返回`true`。

# mysql - 如何在 MySQL 上构建检索 GROUP BY 统计信息的 SQL 查询

> ID：10875490
> 
> 赞同：0
> 
> 时间：2012-06-04T01:45:17.697
> 
> 标签：mysql, sql

我有两张桌子，系列和卡片（一对多：每个系列都有很多卡片）

```
series: seriesID, seriesName...
cards: cardID, seriesID, cardActive (bit), cardUsed(bit) 
```

我想返回一个查询：

*   每个系列总共有多少张牌？
*   每个系列有多少张无效卡？
*   每个系列有多少张二手卡？
*   每个系列有多少未使用和激活的卡？

目标是有一个包含以下标题的表：

```
seriesID | seriesName | total cards count | inactive cards | etc.. 
```

我试过用这个：

```
SELECT seriesID,COUNT(*) AS cardsCount FROM cards GROUP BY seriesID 
```

但我想知道是否需要 5 个不同的查询来获取指定的统计信息。我应该使用函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T02:37:22.850

您可能可以对位字段求和（除非产生奇偶校验值而不是整数），并且 CASE 表达式有助于最后一个：

```
 SELECT s.SeriesID,
        s.SeriesName,
        COUNT(*)              AS "Total Cards",
        SUM(NOT c.CardActive) AS "Inactive Cards",
        SUM(NOT c.CardUsed)   AS "Unused Cards",
        SUM(CASE WHEN c.CardActive AND NOT c.CardUsed THEN 1 ELSE 0 END)
                              AS "Active and Unused"
   FROM Series AS s
   JOIN Cards  AS c ON s.SeriesID = c.SeriesID
  GROUP BY s.SeriesID, s.SeriesName; 
```

鉴于它是 MySQL，您可以`s.SeriesName`从 GROUP BY 中省略，您可能会得到相同的答案；大多数其他 DBMS 将要求 GROUP BY 子句中的两个非聚合列。

有可能`SUM(NOT c.CardActive)`and`SUMN(NOT c.CardUsed)`表达式不会做我想要的。在这种情况下：

```
 SUM(CASE WHEN c.CardActive THEN 0 ELSE 1 END) AS "Inactive Cards",
       SUM(CASE WHEN c.CardUsed   THEN 0 ELSE 1 END) AS "Unused Cards", 
```

会成功的。

对于至少列出一张卡的系列来说，这一切都是干净的。如果您有没有卡片的系列并且您希望它们在输出中，那么您需要在表之间使用 LEFT OUTER JOIN，并且您必须担心空值。这一次，`SUM(CASE...END)`整个过程都需要。请注意，`COUNT(C.CardID)`仅计算非空值，因此当系列没有卡片时这将为零。

```
 SELECT s.SeriesID,
        s.SeriesName,
        COUNT(c.CardID) AS "Total Cards",
        SUM(CASE WHEN c.CardID IS NULL THEN 0 WHEN c.CardActive THEN 0 ELSE 1 END)
                        AS "Inactive Cards",
        SUM(CASE WHEN c.CardID IS NULL THEN 0 WHEN c.CardUsed   THEN 0 ELSE 1 END)
                        AS "Unused Cards",
        SUM(CASE WHEN c.CardID IS NULL THEN 0
                 WHEN c.CardActive AND NOT c.CardUsed THEN 1 ELSE 0
            END)        AS "Active and Unused"
   FROM Series AS s
   LEFT JOIN Cards AS c ON s.SeriesID = c.SeriesID
  GROUP BY s.SeriesID, s.SeriesName; 
```

# c# - 如何将值从 C# 返回到 Windows 命令提示符 (CMD)

> ID：10875492
> 
> 赞同：1
> 
> 时间：2012-06-04T01:45:39.730
> 
> 标签：c#, cmd, return

我想将一个值（一个字符串）从我的 C# 程序返回到 cmd。我怎样才能做到这一点？

# ruby - rspec 中的参数错误

> ID：10875496
> 
> 赞同：1
> 
> 时间：2012-06-04T01:47:25.387
> 
> 标签：ruby, rspec

我想用 ruby​​ 写一些树数据结构。类文件：

```
class Tree
  attr_accessor :node, :left, :right
  def initialize(node, left=nil, right=nil)
    self.node=node
    self.left=left
    self.right=right
  end
end 
```

rspec 文件：

```
require 'init.rb'

describe Tree do
  it "should be created" do
    t2=Tree.new(2)
    t1=Tree.new(1)
    t=Tree.new(3,t1,t2)
    t.should_not be nil
    t.left.node should eql 1
    t.right.node should eql 2
  end
end 
```

Rspec 一直在抱怨：

```
1) Tree should be created
     Failure/Error: t.left.node should eql 1
     ArgumentError:
       wrong number of arguments (0 for 1)
     # ./app/tree.rb:3:in `initialize'
     # ./spec/tree_spec.rb:9:in `block (2 levels) in <top (required)>' 
```

为什么？？我将规范代码移动到类文件中，它可以解决。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T03:12:38.290

信不信由你，问题是您的 rspec 中缺少两个点。这些行：

```
t.left.node should eql 1
t.right.node should eql 2 
```

应该是这样的：

```
t.left.node.should eql 1
t.right.node.should eql 2 
```

在 之前插入那个句点`should`，您的规范应该会通过。

这是正在发生的事情。该`should`方法适用于任何值，但如果您将其称为裸，如下所示：

```
should == "hello" 
```

它将在您的测试主题上运行。题目是什么？好吧，您可以使用该方法将主题设置为您想要的任何内容`subject`，但如果您不这样做，rspec 将假定主题是所描述的任何类的实例。它会在您的规范顶部看到这一点：

```
describe Tree 
```

并尝试创建这样的主题：

```
Tree.new 
```

这会爆炸，因为`initialize`没有任何论据你就无法工作；它至少需要一个。如果您不打算编写`should`带有隐式主题的 a，结果是一个非常神秘的错误。

# javascript - 画布到图像显示为无图像（空白）

> ID：10875497
> 
> 赞同：0
> 
> 时间：2012-06-04T01:47:56.383
> 
> 标签：javascript, html

我正在使用 dataurl 将画布转换为图像。我有以下代码在控制台中没有输出错误。似乎有点工作，但是当我访问 dataurl 它显示一个空白图像。

```
window.onload = function() {
    var canvas = document.getElementById("myCanvas");
    var context = canvas.getContext("2d");
    var imageObj = new Image();

    imageObj.onload = function() {
        var myImage = context.drawImage(imageObj, 0, 0);        
        var myImg = canvas.toDataURL("image/png");
        document.getElementById("canvasimg").setAttribute("src", myImg);
    };
    imageObj.src = "http://img801.imageshack.us/img801/5641/3cc67ca1a74049ce99bc92b.png";
};

<canvas id="myCanvas" width="578" height="400"></canvas>
<img id="canvasimg" alt="" src=""> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T02:28:46.917

测试您发布的代码，我收到了一个安全错误。这是可以预料的。画布有一个 clean-origin 标志，一旦该标志为假，您就无法从中提取数据。

这是一个更详细的相关[问题](https://stackoverflow.com/questions/2390232/why-does-canvas-todataurl-throw-a-security-exception)

[答案中链接到的文档](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-canvas-todataurl)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T01:49:13.670

看看你在做什么。您在图像加载时绘制图像，但在图像绘制之前将其转换为数据 url！移动那个`toDataURL`调用和`setAttribute`调用内部的`onload`函数。

# javascript - Javascript & JQuery：$x 和 x 作为变量声明有什么区别？

> ID：10875506
> 
> 赞同：3
> 
> 时间：2012-06-04T01:50:33.887
> 
> 标签：javascript, jquery

在 Javascript 和 JQuery 中，$x 和 x 作为变量声明有什么区别？例如，如果我声明

```
var x = 5;
$x = 5;
x = 5; 
```

我只是说同样的话还是有范围含义，或者我只是因为我一直在用几种不同的语言编码而感到困惑？

谢谢，黛比

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-04T01:51:35.960

`x`并且`$x`只是两个不同的变量。在命名 JavaScript 变量时，美元符号只是另一个没有特殊含义的字符。

有些人（包括我）倾向于使用美元符号前缀命名 JS 变量，如果该变量应该包含一个 jQuery 对象，例如，，`var $x = $("div")`但这只是一个约定，以便更容易记住变量的用途，它就 JS 解释器而言，根本没有区别。

在问题的代码中，`$x`将是一个全局变量不是因为，`$`而是因为任何未使用`var`语句声明的变量都是自动全局的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T01:53:34.297

`x``$x`是两个不同的变量。第一行声明一个变量`x`并为其赋值。第二行为变量分配一个值`$x`，在其他条件相同的情况下，只要您没有在严格模式下运行，它将在全局范围内隐式声明。第三行重新分配给先前声明的变量`x`。

# r - R中数据帧的[1]，[1，]，[,1]，[[1]]有什么区别？

> ID：10875511
> 
> 赞同：1
> 
> 时间：2012-06-04T01:51:36.723
> 
> 标签：r, statistics, sas

> **可能重复：**
> [在 R 中，访问列表元素的 [] 和 [[]] 符号有什么区别？](https://stackoverflow.com/questions/1169456/in-r-what-is-the-difference-between-the-and-notations-for-accessing-the)

我对数据帧类型的 [1]、[1,]、[,1]、[[1]] 的区别感到困惑。

据我所知， [1,] 将获取 a 的第一行`matrix`， [,1] 将获取第一列。[[1]] 将获取 a 的第一个元素`list`。

但我检查了 的文件`data.frame`，上面写着

> 数据框是具有唯一行名称的相同行数的变量列表

然后我输入了一些代码来测试用法。

```
>L3 <- LETTERS[1:3]
>(d <- data.frame(cbind(x=1, y=1:10), fac=sample(L3, 10, replace=TRUE)))
  x  y fac
1  1  1   C
2  1  2   B
3  1  3   C
4  1  4   C
5  1  5   A
6  1  6   B
7  1  7   C
8  1  8   A
9  1  9   A
10 1 10   A
> d[1]
   x
1  1
2  1
3  1
4  1
5  1
6  1
7  1
8  1
9  1
10 1
>d[1,]
  x y fac
1 1 1   C
>d[,1]
 [1] 1 1 1 1 1 1 1 1 1 1
>d[[1]]
 [1] 1 1 1 1 1 1 1 1 1 1 
```

让我感到困惑的是：[1,] 和 [,1] 仅用于`matrix`. [[1]] 只在 中使用`list`，[1] 在 中使用`vector`，但为什么它们都在数据框中可用？

有人可以解释这些用法的区别吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T11:01:14.443

*在 R 中，运算符不仅仅*用于一种数据类型。运算符可以为您喜欢的任何数据类型重载（例如 S3/S4 类）。

事实上，data.frames 就是这种情况。

*   由于 data.frames 是列表，`[i]`and `[[i]]`(and `$`) 显示类似列表的行为。

*   行、列索引对于表格确实有直观的含义，而 data.frames 看起来像表格。可能这就是为什么定义 data.frame [i, j] 的方法的原因。

您甚至可以查看定义，它们是在 S3 系统中编码的（so `methodname.class`）：

```
> `[.data.frame` 
```

和

```
> `[[.data.frame` 
```

（反引号引用函数名，否则 R 会尝试使用运算符并最终出现语法错误）

# c++ - 用 C++ 实现 AVL 添加？

> ID：10875515
> 
> 赞同：2
> 
> 时间：2012-06-04T01:52:35.443
> 
> 标签：c++, templates, avl-tree

我正在尝试实现 AVL 树，但似乎在使用 Node 类时遇到了问题。我收到错误 C4430: missing type specifier with the second getHeight 我以为我将类型指定为子树的节点？

```
template <typename T>
class SetAVL
{
public:
int getHeight()
{
    return getHeight(root);
}
// Complaining about this line
int getHeight(const Node<T> *subtree)
{
    // If we are at a leaf
    if (subtree == NULL)
        return 0;

    return 1 + max(getHeight(subtree->left), getHeight(subtree->right));
}

void add(Node<T> *item)
{
    Node<T> *t = new Node<T>(item);
    insert(root, t);
}

void insert(Node<T> *root, Node<T> *t)
{
    if (root == NULL)
        root = t;
    else
    {
        if (t->item < root->item)
            insert(root->left, t);
        else if (t->item != root->item)
            insert(root->right, t);
        else
            delete t;
    }
}

protected:
    template <typename T>
    class Node
    {
    public:
        T item;
        Node *left;
        Node *right;
        int height;

        Node(T item)
        {
            this->item = item;
            this->left = NULL;
            this->right = NULL;
            this->height = 0;
        }
    }

    Node<T> *root;
    int treeSize;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T02:06:00.137

似乎需要为左右点指定正确的类型

```
Node *left;
Node *right; 
```

应该

```
Node<T> *left;
Node<T> *right; 
```

我在使用之前移动了节点定义。顺便说一句，你失去了一个';' 在类节点定义的末尾。

```
template <typename T>
class SetAVL
{
protected:
    template <typename T>
    class Node
    {
    public:
        T item;
        Node<T> *left;
        Node<T> *right;
        int height;

        Node(T item)
        {
            this->item = item;
            this->left = NULL;
            this->right = NULL;
            this->height = 0;
        }
    };

    Node<T> *root;
    int treeSize;
public:
    int getHeight()
    {
        return getHeight(root);
    }

    int getHeight(const Node<T> *subtree)
    {
        // If we are at a leaf
        if (subtree == NULL)
            return 0;

        return 1 + max(getHeight(subtree->left), getHeight(subtree->right));
    }

    void add(Node<T> *item)
    {
        Node<T> *t = new Node<T>(item);
        insert(root, t);
    }

    void insert(Node<T> *root, Node<T> *t)
    {
        if (root == NULL)
            root = t;
        else
        {
            if (t->item < root->item)
                insert(root->left, t);
            else if (t->item != root->item)
                insert(root->right, t);
            else
                delete t;
        }
    }

}; 
```

希望能帮助到你！

# xml - 使用 XSLT 转换子节点，但保持其余部分不变

> ID：10875520
> 
> 赞同：4
> 
> 时间：2012-06-04T01:54:13.913
> 
> 标签：xml, xslt

我有一个 XML，我只想修改一个特定的部分，而其余部分保持不变，怎么做？即我只想修改节点AA2

```
<root>
  <parentHeader>
  </parentHeader>
  <body>
    <ChildAA>
      <AA1>
        <foo>bar</foo>
        <foo>bar2</foo>    
      </AA1>
      <AA2>
        <foo>bar</foo>
        <foo>bar2</foo>    
      </AA2>
     </ChildAA>
     <ChildBB>
      <BB1>
       <foo>bar</foo>
       <foo>bar2</foo>
      </BB1> 
      <BB2>
       <foo>bar</foo>
       <foo>bar2</foo>
      </BB2>   
     </ChildBB>
   </body>
</root> 
```

我有以下 XSLT，它只返回修改后的部分。我怎样才能包括其他所有内容？

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
     <xsl:output omit-xml-declaration="yes" indent="yes"/>
     <xsl:strip-space elements="*"/>

      <!-- Whenever you match any node or any attribute -->
      <xsl:template match="/*"> 
           <xsl:apply-templates/>  
      </xsl:template>

    <xsl:template match="AA2">
       <RenamedAA2>    
         <xsl:copy-of select="."/>
      </RenamedAA2>
    </xsl:template>    
    <xsl:template match="text()"/>

</xsl:stylesheet> 
```

我正在寻找这样的结果

```
<root>
  <parentHeader>
  </parentHeader>
  <body>
    <ChildAA>
      <AA1>
        <foo>bar</foo>
        <foo>bar2</foo>    
      </AA1>
     <RenamedAA2>
        <foo>bar</foo>
      </RenamedAA2>
      <RenamedAA2>
        <foo>bar2</foo>    
      </RenamedAA2>
     </ChildAA>
     <ChildBB>
      <BB1>
       <foo>bar</foo>
       <foo>bar2</foo>
      </BB1> 
      <BB2>
       <foo>bar</foo>
       <foo>bar2</foo>
      </BB2>   
     </ChildBB>
   </body>
</root> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T02:41:58.303

你想要的是[身份转换](http://www.w3.org/TR/xslt#copying)。

您的带有评论的模板`Whenever you match any node or any attribute`没有按照您的想法进行。它只匹配根元素。

此外，您正在`text()`使用最后一个模板剥离所有节点。

这是您应该执行的操作的示例：

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <!--Identity Transform.-->
    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="AA2/foo">
        <RenamedAA2>
            <xsl:copy>
                <xsl:apply-templates select="node()|@*"/>
            </xsl:copy>
        </RenamedAA2>
    </xsl:template>

    <xsl:template match="AA2">
        <xsl:apply-templates/>
    </xsl:template>

</xsl:stylesheet> 
```

**XML 输出**

```
<root>
   <parentHeader/>
   <body>
      <ChildAA>
         <AA1>
            <foo>bar</foo>
            <foo>bar2</foo>
         </AA1>
         <RenamedAA2>
            <foo>bar</foo>
         </RenamedAA2>
         <RenamedAA2>
            <foo>bar2</foo>
         </RenamedAA2>
      </ChildAA>
      <ChildBB>
         <BB1>
            <foo>bar</foo>
            <foo>bar2</foo>
         </BB1>
         <BB2>
            <foo>bar</foo>
            <foo>bar2</foo>
         </BB2>
      </ChildBB>
   </body>
</root> 
```

# jquery - firebug 指向 jquery 错误，但我不知道如何解决该错误

> ID：10875521
> 
> 赞同：1
> 
> 时间：2012-06-04T01:54:16.037
> 
> 标签：jquery, firebug, conflict

我相信我的网站上存在 jquery 冲突。但我不明白如何使用萤火虫来调试它。

从我们的购物车页面单击“计算运输和处理链接”时，结果永远不会显示。

为此，您首先需要在[http://www.musicforte.com/sheet_music/](http://www.musicforte.com/sheet_music/)上将一个项目添加到您的购物车，然后单击页面右上角的“购物车”。

在使用“persist”查看“控制台”时，我在 firebug 中看到的是红色 x，并且 jquery.js 第 141 行有错误。

我怎样才能了解冲突在哪里并解决它？

我修改了代码以按照建议在“计算运费”按钮中包含一个 id，但仍然没有运气。这是正在使用的代码：

我尝试将 ID 添加到“计算运费”按钮。但它并没有解决问题。我将代码修改为：

```
<a href="#" class="EstimateShippingLink" onclick="Cart.ToggleShippingEstimation(); return false;"><em>%%LNG_CalculateShippingHandling%%</em></a>
                        <div class="EstimateShipping" style="display: none;">
                            <div class="EstimatedShippingMethods" style="display: none;">
                                <div class="ShippingMethodList">
                                </div>
                                <hr />
                            </div>
                            <dl>
                                <dt>%%LNG_Country%%:</dt>
                                <dd>
                                    <select style="width:200px;" name="shippingZoneCountry" id="shippingZoneCountry" onchange="Cart.ToggleShippingEstimateCountry();">
                                        %%GLOBAL_ShippingCountryList%%
                                    </select>
                                </dd>

                                <dt>%%LNG_StateProvince%%:</dt>
                                <dd>
                                    <select style="display: %%GLOBAL_ShippingHideStateList%%" style="width:200px;" name="shippingZoneState" id="shippingZoneState">
                                        %%GLOBAL_ShippingStateList%%
                                    </select>
                                    <input style="display: %%GLOBAL_ShippingHideStateBox%%" type="text" class="Textbox Field200" name="shippingZoneStateName" id="shippingZoneStateName" value="%%GLOBAL_AddressState%%" />
                                </dd>

                                <dt>%%LNG_ZipPostcode%%:</dt>
                                <dd><input type="text" class="Field100 Textbox" name="shippingZoneZip" id="shippingZoneZip" value="%%GLOBAL_ShippingZip%%" /></dd>
                            </dl>
                            <p class="Submit EstimateShippingButtons">
                                <span style="display:inline-block;padding-right: 10px;vertical-align:top;"><a href="#" onclick="Cart.ToggleShippingEstimation();">%%LNG_Cancel%%</a> %%LNG_or%% </span><input type="image" class="formBtn" src="%%GLOBAL_TPL_PATH%%/images/%%GLOBAL_SiteColor%%/CalculateShipping.gif" onclick="Cart.EstimateShipping();" value="%%LNG_CalculateShipping%%" id="fixshipping" />
                            </p>
                        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T02:13:07.147

问题是您将模块嵌入表单中，当您单击图像输入时，它正在执行浏览器默认设置并提交整个表单，而不仅仅是您的运输字段，并导致页面重新加载。

我认为错误是由于 ajax 被中止。

我在控制台中运行了它，并且能够在不重新加载页面或错误的情况下返回运输计算

```
$('.EstimateShippingButtons input').click(function(){
   return false;
}) 
```

您可能想要改进选择器，也许在您的 shiiping calcs 提交按钮中添加一个 ID

编辑：实际上只需要添加`return false`或添加`event.preventDefault()`到您现有的处理程序

在 cart.js 中将其添加到 Cart.EstimateShipping 的末尾

# ruby-on-rails - 根据 ActiveRecord 结果在 Ruby 中创建多维散列

> ID：10875524
> 
> 赞同：0
> 
> 时间：2012-06-04T01:54:55.190
> 
> 标签：ruby-on-rails, activerecord, rails-models

我是 Rails 新手，在用 ActiveRecord 搞清楚一些事情时遇到了麻烦。

现在，我有三个模型：

```
class Project < ActiveRecord::Base
    attr_accessible :name
    has_and_belongs_to_many :tags
    has_many :tasks
end

class Task < ActiveRecord::Base
    attr_accessible :todo
    has_and_belongs_to_many :tags
    has_many :tasks
end

class Tag < ActiveRecord::Base
    attr_accesible :description
    has_and_belongs_to_many :projects
    has_and_belongs_to_many :tasks
end 
```

我正在尝试创建一个返回属于特定标签的任务的哈希，以便：

```
Project_Tasks = { 1 => { project.name, "tasks" => { "task 1", "task 2", "task 3" } 
                  2 => { project.name, "tasks" => { "task 1", "task 2", "task 3" } } 
```

我不太确定如何创建它。我的第一个倾向是在其中一个类中创建一个方法（我已经在哪个类上来回走动......现在，我认为它最好在“标签”下提供）循环通过与给定标签匹配的项目, 查询匹配两者的任务并将它们附加到数组中。

迄今为止，这还没有奏效。我完全被难住了。

关于我如何做到这一点的任何想法？一种方法是合适的方法，还是在 ActiveRecord 中有一个技巧来创建一个至少可以让我接近这个的查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T02:13:38.780

我已尝试修复您的模型定义。

```
class Project < ActiveRecord::Base
    attr_accessible :name
    has_and_belongs_to_many :tags
    has_many :tasks
end

class Task < ActiveRecord::Base
    attr_accessible :todo
    has_and_belongs_to_many :tags
    belongs_to :project
end

class Tag < ActiveRecord::Base
    attr_accesible :description
    has_and_belongs_to_many :projects
    has_and_belongs_to_many :tasks
end 
```

现在您应该能够访问特定项目的数据（在控制器中），如下所示：

```
@project = Project.find_by_id(1)  # Loaded a project
@tasks = @project.tasks  # all task for this project in an array 
```

要在视图中显示它：

```
<%= @project.name %><br />
<% @tasks.each do |task| %>
  <%= task.todo %><br />
<% end %> 
```

我希望这有帮助

# php - 将新变量定义为旧值之和加 1

> ID：10875525
> 
> 赞同：0
> 
> 时间：2012-06-04T01:54:55.537
> 
> 标签：php, mysql, wordpress, variables

我有一些插件代码应该在数据库中查找“up_votes”的数量，如果单击了输入，则使用 UPDATE 查询向数据库添加另一个“up”投票。

问题是，它只能工作一次。我可以点击输入，并将值从 0 更新为 2，但在页面重新加载时无法转到 3、4、5 等。显然，出了点问题。

这是带有标记为“问题”的注释的代码，我遇到了麻烦：

```
/*
DISPLAY THE LIST
*/          
//Get the list from the database, and set the variables for display in the output.
$get_list = $wpdb->get_results('SELECT entry_ID, '.$cb_lud_field1_name.' AS "field1", '.$cb_lud_field2_name.' AS "field2", up_votes, down_votes, up_votes - down_votes AS "total_votes"
    FROM '.$cb_lud_table.'
    GROUP BY entry_ID
    ORDER BY total_votes DESC
    ',OBJECT);

//Check if list is null, and if so, set a variable to display a warning. Otherwise, display the list.
if (empty($get_list)) {
    $cb_lud_sc_output .= "<em>Warning: You don't seem to have any records for this list. Why don't you add some now?</em>";
    $cb_lud_sc_output .= $cb_lud_sc_form;
    return $cb_lud_sc_output;
}
else {
    $cb_lud_sc_output .= $cb_lud_sc_form;
    $cb_lud_sc_output .= '</br>';
    $cb_lud_sc_output .= '<table border="1" cellpadding="10">';
    $cb_lud_sc_output .= '<tr><td align="center"><strong>'.$cb_lud_field1_name.'</strong></td><td align="center"><strong>'.$cb_lud_field2_name.'</strong></td><td align="center"><strong>Score</strong></td><td align="center"><strong>Vote Up/Down</strong></td></tr>';
        foreach ($get_list as $list_items) {
            $cb_lud_sc_output .= '<tr><td>'.stripslashes($list_items->field1).'</td><td>'.stripslashes($list_items->field2).'</td><td>'.$list_items->total_votes.'</td><td><form action="" method="post"><input name="arrow-up-ID-'.$list_items->entry_ID.'" type="image" src="'.$cb_lud_upimg.'" value="'.$list_items->entry_ID.'"/>&nbsp;<input name="arrow-down-ID-'.$list_items->entry_ID.'" type="image" src="'.$cb_lud_downimg.'" value="'.$list_items->entry_ID.'"/></form></td></tr>';
        }
    $cb_lud_sc_output .= '</table>';
    //Problem --> Seems like I've set a variable for the current_up_votes, added it to 1, so if there are currently 2 up_votes, it should go to 3, but it stops at 2 for some reason.
    //find the values posted to the form
    $cb_lud_arrow_keys = array_keys($_POST);
    $cb_lud_arrow_values = array_values($_POST);
    $cb_lud_entry_id = (int)$cb_lud_arrow_values[2];
    $cb_lud_current_up_votes = $wpdb->query('SELECT up_votes
        FROM '.$cb_lud_table.' 
        WHERE entry_ID = '.$cb_lud_entry_id.'', ARRAY_A);
    $i = 1;
    $cb_lud_new_up_votes = $cb_lud_current_up_votes + $i;
    var_dump($cb_lud_current_up_votes);
    var_dump($cb_lud_base_votes);
    var_dump($cb_lud_new_up_votes);

        //set some variables to "up" or "down" depending on form input.
            if (strpos($cb_lud_arrow_keys[2], 'up-ID') > 0) {
                $cb_lud_arrow_direction = "up";
            }
            else if (strpos($cb_lud_arrow_keys[2], 'down-ID') > 0) {
                $cb_lud_arrow_direction = "down";
            }
            else {
                $cb_lud_arrow_direction = "nothing";
            }

        //create the update query that will record the up and down votes.
            if ($cb_lud_arrow_direction == "up" && $cb_lud_arrow_direction != "nothing") {
                $wpdb->query('UPDATE '.$cb_lud_table.' SET up_votes='.$cb_lud_new_up_votes.'
                    WHERE entry_ID='.$cb_lud_entry_id.'');
            }
            else if ($cb_lud_arrow_direction == "down" && $cb_lud_arrow_direction != "nothing") {
                //Get the id and update it to the down field
            }

    return $cb_lud_sc_output;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T02:08:20.853

要测试增量，请尝试将您的 UPDATE 查询更改为：

```
$wpdb->query('UPDATE '.$cb_lud_table.' SET up_votes=up_votes+1
                WHERE entry_ID='.$cb_lud_entry_id.''); 
```

# php - 更简单的方法来完全解码这个字符串？

> ID：10875526
> 
> 赞同：-1
> 
> 时间：2012-06-04T01:55:06.483
> 
> 标签：php, decode, urldecode

而不是这样做

```
urldecode(urldecode(urldecode(curl_exec($ch)))); 
```

curl_exec 的输出被多次编码，有没有一种方法可以只调用一次函数就可以完全解码它？

我刚刚写了这个函数，它工作得很好

```
function decodeSource($encodedSource){
    while($encodedSource != urldecode($encodedSource)){
        $encodedSource = urldecode($encodedSource);
    }
return $encodedSource;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T02:02:45.543

使用自己的功能怎么样？

```
function multiurldecode($url, $count=1) {
  for($i=1; $i<=$count; $i++)
    $url=urldecode($url);
  return($url);
} 
```

这是我的头顶，未经测试....

**每条评论**更新：****

 **一点也不坏！这是代码。

```
function multiurldecode($url, $count=1) {
  if ($count==0) {
    for( $last=urldecode($url); $last!=$url; $url=urldecode($url) )
      $last=$url;
  } else {
    for ($i=1; $i<=$count; $i++)
      $url=urldecode($url);
  }
  return($url);
} 
```

同样，我还没有对此进行测试，但它在我的脑海中运行良好。:) 这里的想法是，如果您提供的计数为零，则 for 循环将继续运行，直到解码的 URL 与其源相同。**

# actionscript-3 - actionscript 3.0 错误 1069 “this”在函数外找不到声明的变量

> ID：10875527
> 
> 赞同：0
> 
> 时间：2012-06-04T01:55:14.633
> 
> 标签：actionscript-3

“This”无法找到合适的变量“array1”，尽管它在函数中明确声明。但是，如果我在函数之外声明变量，它就可以工作。我怎样才能在函数中包含变量但保持它的工作？

```
package 
{

public class main extends MovieClip
{
//If I declared the variables here it would work.
    public function main():void
    {
        var array1:Array = [1,2];
        var array2:Array = [3,4];
        trace(this["array"+1][1]); //returns reference error 1069   
    }

}
} 
```

我是否坚持在函数之外声明变量？

不，多维数组不能满足我的需要。虽然看起来它可以解决提供的代码片段中的所有问题，嗯？

我的意图是通过要使用的类传递数组并更改我使用的数组组。如果我使用多维数组，由于会发生大量复制，效率会很低。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T02:26:20.357

要`this[]`访问属性，这些属性必须属于`this`。在您的示例中，属性属于定义它们的函数，并且在该范围之外无法访问。

所以首先; 是的，要使您的代码正常工作，您当然需要在类级别范围内定义属性。

但更重要的是，我会仔细研究你正在尝试做的事情，并确定这是否是一个好方法——我敢打赌，它不是。看起来您可能想要考虑一个处理您要存储的所有数据的隔离类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T02:39:54.783

你的错误是因为你错误地定义了变量。
“this”关键字意味着您试图将变量定位在类的特定实例上。
您已将变量范围限定为函数。
您需要将它们移动到类声明区域才能使“this”正常工作。

```
package 
  {

  public class main extends MovieClip
  {
         public var array1:Array = [1,2];
         public var array2:Array = [3,4];
      public function main():void
      {
          trace(this["array"+1][1]); //returns reference error 1069   
      }

  }
}

// now if you meant to scope them locally to the function then you can not use "this"
// you have to assign them to an object or an array 

package 
  {

  public class main extends MovieClip
  {
      public function main():void
      {
          var obj:Object = {}
              obj['array1'] = new Array( [1,2] )
              obj['array2'] = new Array( [3,4] )
          trace(obj["array"+1][1]);
      }
  }
} 
```

这是未经测试的代码，但它应该让你走上正轨。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T02:40:04.127

根据您要准确完成的任务，您还可以考虑将数组作为参数传递给函数，例如：

```
function main():void
{
    var array1:Array = [1,2];
    var array2:Array = [3,4];
    doSomethingWithArray(array2);
}
main();

function doSomethingWithArray(arr:Array):void
{
    trace(arr[1]); //Traces the value of array2[1], which = 4
} 
```

还可以考虑拥有一个`var currentArray:Array`您可以设置为您想要的任何数组并根据需要引用它（如果适用）。

```
public class main extends MovieClip
{

    ...
    public var currentArray:Array;

    function main():void
    {
        var array1:Array = [1,2];
        currentArray = array1;
        doSomethingithCurrentArray();

        var array2:Array = [3,4];
        currentArray = array2;
        doSomethingithCurrentArray();

        currentArray = null;
    }

    public function doSomethingithCurrentArray():void {
       if(currentArray != null){
          trace(currentArray);
       }
    }

} 
```

# ios - 以编程方式从情节提要 IOS5 加载初始视图控制器

> ID：10875529
> 
> 赞同：3
> 
> 时间：2012-06-04T01:56:25.767
> 
> 标签：ios, uistoryboard, ios5

我正在为我的 iphone 应用程序创建登录类型功能。我已经在故事板中列出了整个事情。我设置了一个条件，让用户保持登录一天。然后，应用程序应该将它们引导到初始视图控制器（他们必须输入登录凭据的页面）。

我打算把这个逻辑放在 AppDelegate 中（应用确实加载了）。如果有更好的地方来放置这个逻辑，我会对此持开放态度。但是我如何访问和加载我的故事板中的初始视图控制器？

我不能只为这个初始视图加载一个 segue 的原因是因为我不一定知道用户最后离开应用程序的位置。而且我不想从每个视图创建单独的 segues 回到初始视图。

谢谢！

**编辑！回应 Luis 的回答** 好的，太好了！我在右舷的开头添加了一个导航控制器，就像建议的第一个字符一样。现在，我想在每次打开或重新打开应用程序时返回导航控制器，以便执行导航控制器的逻辑。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T02:41:14.843

阅读为这个问题提供的两个答案，第一种方法更容易，但你必须做你刚刚写的你没有做的事情，第二种方法是你正在寻找的，但它的方式更复杂。

[iOS 5 故事板，以编程方式确定路径](https://stackoverflow.com/questions/7889510/ios-5-storyboard-programmatically-determine-path)

# ssrs-2008 - 如何使用日期时间获取毫秒？

> ID：10875532
> 
> 赞同：4
> 
> 时间：2012-06-04T01:56:58.127
> 
> 标签：ssrs-2008, reporting-services

我有一个客户希望根据他们的报告显示报告的执行时间。为了适应它们，我在报告（在报告属性下）创建了一个名为“GroupExecutionTime”的变量，其表达式如下：

```
=System.DateTime.Now 
```

然后在报告的页脚中，我有以下内容：

```
="Execution Time: " +
IIf(Variables!GroupExecutionTime.Value.Subtract(Globals!ExecutionTime).TotalSeconds < 1, "0 seconds", 
(
IIf(Variables!GroupExecutionTime.Value.Subtract(Globals!ExecutionTime).Hours > 0, Variables!GroupExecutionTime.Value.Subtract(Globals!ExecutionTime).Hours & " hour(s), ", "") +
IIf(Variables!GroupExecutionTime.Value.Subtract(Globals!ExecutionTime).Minutes > 0, Variables!GroupExecutionTime.Value.Subtract(Globals!ExecutionTime).Minutes & " minute(s), ", "") +
IIf(Variables!GroupExecutionTime.Value.Subtract(Globals!ExecutionTime).Seconds > 0, Variables!GroupExecutionTime.Value.Subtract(Globals!ExecutionTime).Seconds & " second(s)", ""))
) 
```

不幸的是，客户回来说他们希望我显示报告执行的毫秒数，而它不到一秒。这是一个低优先级的要求，但好奇心和满足要求的愿望让我想知道这是如何完成的？不幸的是`System.DateTime.Now`，似乎没有存储任何低于秒的东西。

**修复了以下问题（感谢 Anthony Sottile 的回答）**

```
="Execution Time: " +
IIf(Variables!GroupExecutionTime.Value.Subtract(Globals!ExecutionTime).TotalSeconds < 1, "0." & Variables!GroupExecutionTime.Value.Subtract(Globals!ExecutionTime).Milliseconds & " seconds.", 
(
IIf(Variables!GroupExecutionTime.Value.Subtract(Globals!ExecutionTime).Hours > 0, Variables!GroupExecutionTime.Value.Subtract(Globals!ExecutionTime).Hours & " hour(s), ", "") +
IIf(Variables!GroupExecutionTime.Value.Subtract(Globals!ExecutionTime).Minutes > 0, Variables!GroupExecutionTime.Value.Subtract(Globals!ExecutionTime).Minutes & " minute(s), ", "") +
IIf(Variables!GroupExecutionTime.Value.Subtract(Globals!ExecutionTime).Seconds > 0, Variables!GroupExecutionTime.Value.Subtract(Globals!ExecutionTime).Seconds & " second(s)", ""))
) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T03:21:08.337

该方法生成的`TimeSpan`对象`.Subtract()`应该具有`.Milliseconds`可以打印的属性。

[http://msdn.microsoft.com/en-US/library/system.timespan.milliseconds%28v=vs.90%29](http://msdn.microsoft.com/en-US/library/system.timespan.milliseconds%28v=vs.90%29)

我不确定为什么 DateTime.Now 不会记录毫秒？如果没有，那么这将没有多大帮助。不幸的是，我似乎无法启动我的 SSRS 实例来自己测试它......

# android - 从 WebService 加载 ListView

> ID：10875535
> 
> 赞同：0
> 
> 时间：2012-06-04T01:57:28.510
> 
> 标签：android, web-services, http, tomcat, servlets

您好我正在尝试通过网络服务从数据库中加载我的列表视图。我尝试过两次这样做，但我对每个阶段都不是很有信心。

1.  从我的tomcat返回一个列表/数组这是代码

    ```
    String mylist[] = {"", "", "", "", "", ""};

    try {
        Class.forName(driver).newInstance();
        con = DriverManager.getConnection(url + db, user, pass);

        String query1 = "select username from Users where online = 'yes'";
        PreparedStatement preparedStmt1 = con.prepareStatement(query1);
        ResultSet result1 = preparedStmt1.executeQuery();

        int i = 0;
        while (result1.next()) {
            mylist[i] = result1.getString(1);               
        }
    } catch (Exception e1) {
        e1.printStackTrace();
    }

    out.println(mylist);
    out.close(); 
    ```

我的问题是这是从网络服务返回列表的正确方法吗？

1.  第二阶段是将列表获取到我的列表视图，这是我的代码

    ```
    try {
        HttpClient client = new DefaultHttpClient();
        HttpGet request = new HttpGet();
        URI webservice = new URI("http://192.168.0.3:8080/Users/users");
        request.setURI(webservice);
        HttpResponse response = client.execute(request);

        BufferedReader rd = new BufferedReader(
                new InputStreamReader(response.getEntity()
                        .getContent()));

        while ((rd.readLine()) != null) {

            ArrayList<String> list = rd.readLine();
        }
    } catch (Exception e1) {
        e1.printStackTrace();
    } 
    ```

这似乎只在 web 服务返回单行文本时有效。如何从 Http 请求中检索类似数组的内容？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T02:19:31.837

WebService 只能返回 xml 或字符串类型，因此您可以将列表放入格式如下的字符串中：

```
"this is a string 1; this is a string 2; this is a string 3" 
```

**服务器端**看起来像：

```
 StringBuilder myList = new StringBuilder();

 try {
     Class.forName(driver).newInstance();
     con = DriverManager.getConnection(url + db, user, pass);

     String query1 = "select username from Users where online = 'yes'";
     PreparedStatement preparedStmt1 = con.prepareStatement(query1);
     ResultSet result1 = preparedStmt1.executeQuery();

     int i = 0;
      while (result1.next()) {
          myList.append( result1.getString(1) + ";");               
  }
} catch (Exception e1) {
  e1.printStackTrace();
 }

out.println(mylist.toString());
out.close(); 
```

然后从**Android 客户端**，你可以通过 String.split(";");
这是一个例子：

```
private String inputStreamToString(InputStream is)
{
String line = "";
StringBuilder total = new StringBuilder();
// Wrap a BufferedReader around the InputStream
BufferedReader rd = new BufferedReader(new InputStreamReader(is), 1024 * 4);
// Read response until the end
try
{

    while ((line = rd.readLine()) != null)
    {
        total.append(line);
    }
} catch (IOException e)
{
    Log.e(TAG, "error build string" + e.getMessage());
}
// Return full string
return total.toString();
 }

InputStream is = response.getEntity().getContent();
String strResponse = inputStreamToString(is);
String mylist[] = strResponse .split(";"); 
```

或者您可以使用 JSON 解析列表对象并从 WebService 传输到 Android 客户端

# jquery - 如何使用轮播插件显示特定页面和项目

> ID：10875537
> 
> 赞同：1
> 
> 时间：2012-06-04T01:58:03.593
> 
> 标签：jquery, select, backbone.js, haml, carousel

嗨，我正在使用轮播插件为我的主题视图实现水平滚动

![在此处输入图像描述](../Images/e6beccfcc3a5bf3c60eca9bb7e52c74f.png)

页面上发生的事情是这样的：

1) 用户可以滚动到右边几页来搜索主题

2）用户点击他/她喜欢的话题

3）整个页面重新渲染即主题部分和下面的部分将全部重新渲染

4) 主题板块将被重置，主题滚动的第一页将再次显示

如何跟踪选择了轮播列表中的哪个项目，以便在重新呈现页面时显示它？另外，如何将滚动移动到正确的页面以显示所选主题？

我当前实现的片段如下：

```
//Appending topics in carousel plugin (question page view)
addAllTopics: ->
  @options.topics.each(@addOneTopic)
  Onethingaday.Public.checkActive(Backbone.history.fragment)

  @$('li.all_topics').show()

  $('#my-carousel').carousel({
    itemsPerPage: 4,
    itemsPerTransition: 4,
    speed: 500,
    noOfRows: 1,
    nextPrevLinks: true,
    pagination: true,
    easing: 'swing'
  })

addOneTopic: (topic) ->
  if topic.get('question_count') > 0
    $(@el).find('ul.topics').append @topic_template(topic.toJSON())

//individual @topic_template - on click on topic, the route of '/topics/topic_slug' will be triggered which rerenders the whole questions page
%li
  %a{href: "/topics/<%= topic.slug %>", :'data-active' => "/topics/<%= topic.slug %>", slug: "<%= topic.slug %>", text: "<%= topic.text %>" } #<%= topic.slug %> 
```

# javascript - 获取分配的 jQuery 变量以“重新查询”

> ID：10875540
> 
> 赞同：3
> 
> 时间：2012-06-04T01:58:33.913
> 
> 标签：javascript, jquery

我正在尝试使用 jQuery 来构建一个自制的验证器。我想我在 jQuery 中发现了一个限制：将 jQuery 值分配给 json 变量，然后使用 jQuery 向当前页面添加更多适合该变量查询的 DOM 元素时，似乎没有办法访问那些 DOM添加到适合 json 变量查询的页面的元素。

请考虑以下代码：

```
var add_form = {
    $name_label: $("#add-form Label[for='Name']"),
    $name: $("#add-form #Name"),
    $description_label: $("#add-form Label[for='Description']"),
    $description: $("#add-form #Description"),
    $submit_button: $("#add-form input#Add"),
    $errors: $("#add-form .error"),
    error_marker: "<span class='error'>&nbsp;*</span>"
}
function ValidateForm() {
    var isValid = true;

    add_form.$errors.remove();

    if (add_form.$name.val().length < 1 ) {
        add_form.$name_label.after(add_form.error_marker);
        isValid = false;
    }
    if (add_form.$description.val().length < 1) {
        add_form.$description_label.after(add_form.error_marker);
        isValid = false;
    }

    return isValid
}
$(function(){
    add_form.$submit_button.live("click", function(e){
        e.preventDefault();
        if(ValidateForm())
        {
        //ajax form submission...
        }
    });
}) 
```

这里有一个例子：http: [//jsfiddle.net/Macxj/3/](http://jsfiddle.net/Macxj/3/)

首先，我创建了一个 json 变量来表示 html 添加表单。然后，我创建了一个函数来验证表单。最后，我将表单提交按钮的单击事件绑定到验证表单。

请注意，我使用 jQuery after() 方法在表单中的每个无效字段标签之后放置一个包含“*”的跨度。另请注意，在重新验证之前，我从表单中清除了先前提交尝试的星号（这就是失败的原因）。

显然，调用 add_form.$errors.remove(); 不起作用，因为 $errors 变量仅指向在创建时与其查询匹配的 DOM 元素。在那个时间点，所有标签都没有以 error_marker 变量为后缀。

因此，jQuery 变量在尝试删除它们时无法识别其查询的匹配元素，因为在首次分配变量时它们不存在。**如果 jQuery 变量有一个eval()**方法来重新评估其包含的查询以查看是否有任何新的 DOM 元素匹配它，那就太好了。可惜...

有什么建议么？

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T03:22:16.167

jQuery 对象不是“活动的”是正确的——也就是说，jQuery 对象中的元素集不是动态更新的。（这是一件好事。）

如果您真的想更新任意 jQuery 对象，您可以从以下位置获取用于创建对象的选择器`.selector`：

```
var els = $('#form input');
els.selector // '#form input' 
```

所以你可以`els = $(els.selector);`重新查询 DOM。

但是请注意，如果您在初始选择器之后修改了集合（函数，如`add`, `filter`,`children`等），或者如果创建 jQuery 对象时没有使用选择器（通过传递 a `DOMElement`），那么`.selector`将毫无用处，因为选择器将为空、不正确，甚至可能无效。

更好的办法是重新构造你的代码，这样你就不会持有一个陈旧的 jQuery 对象；其他答案提出了一些很好的建议。

^(另外，请确保您也在验证输入服务器端！)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-04T02:53:49.510

对于将要更改的对象，不要将 JSON 对象引用为静态值，而是将其设为函数：

`$errors: function() { return $("#add-form .error"); },`

因为它是一个函数，它会在你每次调用时重新评估错误字段`add_form.$errors()`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-04T03:05:17.823

您解决问题的方法存在许多结构性问题：

1.  避免使用全局变量

    您正在验证的页面上可能并不总是只有一个表单。如果有一天你会决定你将有几种形式。您的`add_form`变量是全局变量，因此会发生冲突。

2.  不要使用提交按钮单击事件来检测表单提交。

    如果表单是通过类似 js 调用`$("form").submit();`或通过 enter 键提交的怎么办？

3.  如果您不确定在配置对象创建时对象是否已经存在，请存储选择器而不是 DOM 对象。

4.  `.live`已弃用。改为使用`.on`。

3\. 将解决您的实际问题，但我强烈建议解决所有 4 个问题。

对于 2，附加验证器的最佳位置不是在提交按钮上，而是在表单的提交事件上。像这样的东西：

```
$("#add-form").submit(function(event) {
    event.preventDefault();

    if (validateForm(this))
       $.ajax({
           url: $(this).attr("action"),
           data: $(this).serialize(),
           //ETC
       });
}); 
```

请注意，现在该表单也更易于访问。您的配置对象不再需要存储对提交按钮的引用。

您的配置对象现在可以简化为如下所示：

```
{
    name_label: "Label[for='Name']",
    name: "#Name",
    description_label: "Label[for='Description']",
    description: "#Description",
    errors: ".error",
    error_marker: "<span class='error'>&nbsp;*</span>"
} 
```

在 validateForm 中，您可以按如下方式使用这些选择器：

```
var $name_label = $(configuration.name_label, this); //Finds the label within the current form. 
```

现在，要允许每个表单使用不同的配置参数，请使用以下内容：

```
function enableValidation(form, configuration) {

 $.extend(configuration, {
     //Default configuration parameters here.
 });

  function validateForm(form) {
     //Your original function here with modifications.
  }

  $(form).submit(funciton(e) {
      if (!validateForm(this))
        e.preventDefault();
  });
}

function enableAjax(form) {
   $(form).submit(function(e){
       if (!e.isDefaultPrevented()) {
           e.preventDefault();
           $.ajax(...);
       }
   });
}

$(function() {
   enableValidation("#add-form", {/*specialized config parameters here*/});
   enableAjax("#add-form");
}); 
```

# sql - 有两个表用于在特定时刻捕获数据

> ID：10875541
> 
> 赞同：0
> 
> 时间：2012-06-04T01:58:48.730
> 
> 标签：sql, database

我正在创建一个包含简历的应用程序

用户应该能够：

创建不同的工作信息以用于不同的简历

工作名称，开始日期，结束日期，...

CV 会有很多 WorkInformations Workinformation 属于很多 CV's

虽然当用户更改 CV 范围之外的工作信息时，我不希望它在当前 CV 中更改。

**有一个包含相同信息的额外表格是否正确？** ![重复表](../Images/d51682f7824520cf348d92fb443f44df.png)

它应该从“workinformation_that_shouldent..”的副本创建一个新的“workinformation”

或我应该研究的任何其他方法，对所有建议开放，对设计关系数据库是新的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T02:05:26.600

不，我认为您不应该有不同的工作信息表。

相反，您应该让 CV 指向工作信息记录。当工作信息记录在 CV 世界之外发生变化时，则创建新版本的记录。这样，所有的工作信息记录都在同一个表中。简历所指的内容保持不变。

您可以通过多种方式跟踪同一记录的不同版本。一种简单的方法是让版本参考基本工作信息记录，另一个字段具有版本号。

顺便说一句，我发现一个工作信息记录会被多个 CV 引用是不寻常的。

# php - Jquery使用keyup和keydown在循环中选择列表项

> ID：10875543
> 
> 赞同：0
> 
> 时间：2012-06-04T01:59:00.553
> 
> 标签：php, javascript, jquery

当用户注册到网站时，我正在尝试在 Jquery、ajax 和 json 中进行自动建议以搜索城市。

到目前为止，我能够从数据库中获取结果。我附加到列表中。但现在我需要使用向上选择数据并输入键。

关键事件正在为第一个城市增加课程。但是我想使用向上和向下键遍历所有结果，并在用户按 Enter 时向城市文本框添加值。我在 php 中将数据限制为 5，因此列表项中有 5 个结果。

这是我的代码：

```
$('#city').keyup(function (event) {
  var input_query = $(this).val();
  $.post("get_city.php", {
    "query": input_query
  }, function (data) {
    $('#cityres').html("");
    $.each(data, function (i, item) {
      $('#cityresults').append("<li>" + item.city + "</li>");
    });
  }, "json");
  //below code is for key event
  var key = gtKeycode(event);
  if (key == 40) {
    // I am not sure i need to do this way
    $('li').first().addClass('SelectedCity');
  }
});

function gtKeycode(e) {
  var code;
  if (!e) var e = window.event;
  if (e.keyCode) code = e.keyCode;
  return code;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T08:10:03.967

我想我现在有解决您问题的方法希望这对您有所帮助..！

1.  我制作了一个回显 json 编码的 php 文件，仅列出以下内容：

    ```
    //PHP "action.php?action=show"
    e.g $option[] =  array(
      'option0'=>".Choose an option",
      'option1'=>'somepage1',
      'option2'=>'somepage2',
      'option3'=>'somepage3');

    echo json_encode(array('options'=>$option)); 
    ```

2.  我编写了将作为输出处理程序的 html，然后将追加

    ```
    <select class="myoptions">

    </select> | <span class="optcap"></span> 
    ```

3.  JS

    ```
    function selectedOption()
    {
      var myoptions = $(".myoptions");
      $.ajax({
        type:'GET',
        url:'action.php?action=show',
        dataType:'JSON',
        success:function(data){
          if(data.s==1){
            myoptions.empty();
            $.each(data.options, function(x,val){
              myoptions.append("<option class='option' value='"+val.option0+"'>"+val.option0+"</option>"
                +"<option class='option' value='"+val.option1+"'>"+val.option1+"</option>"
                +"<option class='option' value='"+val.option2+"'>"+val.option2+"</option>"
                +"<option class='option' value='"+val.option3+"'>"+val.option3+"</option>");
            });
          }  
        }
      });
    }

    $(document).ready(function(){
      selectedOption();
      $(".myoptions").keyup(function(){
        var option = [];

        $("option.option:selected").each(function(x){
          option[x] = $(this).val();
        });
        $(".optcap").html("["+option+"]");
      });
    }); 
    ```

# c++ - 发生 Ogre SDK 异常

> ID：10875544
> 
> 赞同：0
> 
> 时间：2012-06-04T01:59:02.287
> 
> 标签：c++, windows, user-interface, ogre3d

我已经在我的 PC 上设置了 Ogre 和依赖项，并下载了一些 Ogre 应用程序。当我启动我刚刚下载的项目的新 exe 文件时，它会生成以下错误：

```
05:37:59: Loading library C:/OgreSDK_vc9_v1-7-1/bin/debug\RenderSystem_Direct3D9_d
05:37:59: OGRE EXCEPTION(7:InternalErrorException): Could not load dynamic library C     :/OgreSDK_vc9_v1-7-1/bin/debug\RenderSystem_Direct3D9_d.  System Error: The specified module  could not be found.

in DynLib::load at ..\..\..\..\OgreMain\src\OgreDynLib.cpp (line 91) 
```

任何帮助，将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T22:11:16.953

创建中央 Ogre3D 类[Ogre::Root](http://www.ogre3d.org/docs/api/html/classOgre_1_1Root.html)后，您需要传递一个 *.CFG 文件的名称，该文件包含所有要加载的 Ogre 插件，例如上面提到的 D3D9 渲染系统。

默认情况下，该文件需要在您的 *.EXE 旁边，并且应该如下所示（以仅加载 D3D9 渲染系统并且匹配的 DLL 文件位于此 CFG 文件旁边的最小形式）：

```
# Defines plugins to load

# Define plugin folder
PluginFolder=.

# Define plugins
Plugin=RenderSystem_Direct3D9 
```

有关更多信息，请查看[Ogre3D 教程 1 中的此部分](http://www.ogre3d.org/tikiwiki/Basic+Tutorial+1#Configuration_Files)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-06T14:42:59.030

这花了我一段时间，直到我弄清楚了。缺少 dll (RenderSystem_Direct3D9_d)，因为您没有构建它 - 它是 OGRE.sln 中具有相同名称 (RenderSystem_Direct3D9) 的项目

我使用的是 OGRE 2.1，所以我缺少的 dll 是 RenderSystem_Direct3D11_d.dll 而不是像你的 RenderSystem_Direct3D9_d.dll ，但修复方法类似，只需构建该 dll 的项目，如下图所示。 [![OgreMain_RenderSystem_Direct3D11](../Images/a54ae7ae66392478d4299d1fa0c82c55.png)](https://i.stack.imgur.com/eELVP.png)

无论如何，作为初学者，为避免任何麻烦，只需按 F6 即可构建完整的解决方案。

# r - raster::aggregate() 函数不适用于我自己的函数

> ID：10875546
> 
> 赞同：2
> 
> 时间：2012-06-04T01:59:10.513
> 
> 标签：r, aggregate, raster

```
require(raster)

## Function to aggregate
fun.patch <- function(x) {
  if (max(table(x)) >= 0.9 * length(x)) {
    return(as.vector(which.max(table(x))))
  }
  else
    return(NA)
}

r.lc <- raster(nrows = 100, ncols = 100)
r.lc[] <- 1:6
aggregate(r.lc, fact = c(5,5), fun.patch) 
```

FUN(newX[, i], ...) 中的错误：未使用的参数 (na.rm = TRUE)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T02:52:25.283

From `?raster::aggregate`- 你传递的函数应该接受或忽略一个`na.rm`参数

要忽略，`...`请在函数参数中包含

```
fun.patch <- function(x,...) {
  if (max(table(x)) >= 0.9 * length(x)) {
  return(as.vector(which.max(table(x))))
  }
else
  return(NA)
}

r.lc <- raster(nrows = 100, ncols = 100)
r.lc[] <- sample(1:6, 100^2, replace = T)
aggregate(r.lc, fact = c(5,5), fun.patch) 
```

# c# - 在 Linq-to-entities 中组合谓词

> ID：10875547
> 
> 赞同：5
> 
> 时间：2012-06-04T01:59:51.927
> 
> 标签：c#, linq-to-entities

我想动态构建我的 where 条件列表。这是我的代码片段：

```
protected Expression<Func<event_info, bool>> _wherePredicate = c => true;

public void main() 
{

 _wherePredicate = _wherePredicate.And(c => c.createdby == 6);
 _wherePredicate = _wherePredicate.And(c => c.isdeleted == 0);

 var query = from ev in dataConnection.event_info
                       where ev.isdeleted == 0
                       select ev;
 Results = query.Where(_wherePredicate).ToList(); 
} 
```

除非这不起作用，因为 linq-to-entities 不支持 Invoke 方法。

我可以在 linq-to-entities 中组合谓词的好方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T02:15:23.463

事实证明，您需要添加以下内容：

结果 = 查询。**AsExpandable** .Where(_wherePredicate).ToList();

然后它就神奇地起作用了！

我遵循了本教程： [http ://www.albahari.com/nutshell/predicatebuilder.aspx](http://www.albahari.com/nutshell/predicatebuilder.aspx)

# database - DataGrid 不会显示数据集/记录集

> ID：10875548
> 
> 赞同：0
> 
> 时间：2012-06-04T02:00:06.763
> 
> 标签：database, vb.net, datagridview

我认为自己是一个非常有耐心的人，有很大的决心让事情在我正在研究的程序中运行。然而，我觉得我只是在浪费宝贵的时间，我可以用这些时间来真正获得知识，而不是把头撞到墙上什么也没做。所以..我要假装我今天花了 11 个小时试图解决这个问题并没有浪费，只要我能够解决它。我是数据库新手，正在开发数据库程序。它是用 vb6 编写的，我试图在 vb.net 中重写它。我已经将程序从所有不需要的花哨插件中完全剥离出来，现在只需要运行它所需的代码。该程序检索记录，但不会将这些记录填充到数据网格中。是的，

表格1

```
Imports ADS_SQL_TEST_VBNET
Public Class Form1

Private Sub Form1_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
Module1.Main()
End Sub

Public Sub cmdSQLBound_Click()
sWhichDataType = "SQL"
Call SetGridSize("SQL Table Bound.")
End Sub

Public Sub optYes01ph_Click()
BuildTable()         'sets sFields and sQuery
cmdSQLBound_Click()
End Sub

End Class 
```

模块1

```
Imports System.Data
Imports System.Data.SqlClient
Imports ADS_SQL_TEST_VBNET.Form1
Imports ADS_SQL_TEST_VBNET.Class1

Public Module Module1

Public rs As ADODB.Recordset
Public db As ADODB.Connection

Public dgvDataGrid As DataGridView
Public DataGridRef As New DataGridView
Public sWhichDataType, sSource, sTable, sFields, sQuery, sFilter, sOrderBy, sSelectedIndex, sStoreId    
Public lblCount As Object
Public Ctrl1, Ctrl2, Freq, Overhead As Decimal
Public l, x As Integer
Public A, I As Long

Public Sub Main()

  Form1.optYes01ph_Click()

End Sub

Public Sub BuildTable()
    If sTable = "yes01ph" Or sTable = "" Then
        sTable = "yes01ph"
        sFields = "store_id,control_no,first_name,last_name,company,address,city,State,zip,phone,total,stat_code,Year,make_id,model_id,engine_id,contact,phone1,phone2,phone3,phone4,invoice_no,ready_proc,summary,note"
        sOrderBy = "control_no"
    Else
        sFields = "store_id,ml_id,first_name,last_name,company,address,city,state,zip,phone,last_upd,address2,phone2,ref_count,comments,fobs_key,quest,lockedby,rmte_stat,serv_upd,serv_id,psm_use,psm_points"
        sOrderBy = "ml_id"
    End If
    BuildFilter()
End Sub

Public Sub BuildFilter()
    sFilter = " AND control_no > 1 AND control_no < 500000"
    BuildQuery()
End Sub

Public Sub BuildQuery()

    sQuery = "SELECT " & sFields & " FROM " & sTable & " WHERE Store_ID Like 'XXX' " & sFilter & " Order By " & sOrderBy
    sQuery = Replace(sQuery, "'XXX'", "'" & Trim(UCase("250")) & "'")
End Sub

Public Sub SetGridSize(ByVal sMessage As String)

    Dim lblTableType As String
    lblTableType = "  " & sMessage
    Form1.dgvDataGrid.Text = "Data populated using: " & UCase(sMessage)

    DataGridRef.ColumnCount = 99
    DataGridRef.RowCount = 1

    DataSetRef.LoadDataBound()
End Sub
End Module 
```

第一类

```
Public Class Class1

Public Sub LoadDataBound()

rs = GetData()
If Not rs.EOF Then
    dgvDataGrid.DataSource = rs '     Bind the Datagrid to the recordset
    dgvDataGrid.Refresh()
Else
    MsgBox("No Records Found in DataGrid!")
End If
End Sub

Public Function GetData() As ADODB.Recordset
sWhichDataType = UCase(Trim(sWhichDataType))

sSource = "development"
GetData = OpenSQL()
End Function

Public Function OpenSQL() As ADODB.Recordset
db = New ADODB.Connection : rs = New ADODB.Recordset ' Initialize Connection object &    RecordSet object

With db
    .CursorLocation = ADODB.CursorLocationEnum.adUseClient
    .Mode = ADODB.ConnectModeEnum.adModeReadWrite
    .ConnectionString = "Provider=SQLOLEDB.1;Password=pacesql;Persist Security Info=True;User ID=sa;Initial Catalog=speedwrench;Data Source=" & sSource
    .Open() ' "Provider=SQLOLEDB.1;Data Source=development", "sa", "pacesql", -1
End With

OpenSQL = db.Execute(sQuery)
End Function

End Class 
```

我认为问题出在 LoadDataBound() Sub 例程中，但我不能肯定地说，因为我自己无法解决这个问题。非常感谢花时间阅读所有这些内容的人，如果它目前草率并且加载了未使用的方法或变量，我深表歉意......我已经完全破坏了这个东西，试图让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T03:41:49.177

我认为问题在于您使用的是 ADO 而不是 ADO.NET。

我没有时间编写您的代码，但也许您应该从可行的东西开始。这应该从您的数据库中提取一些数据并填充 datagridview。您当然需要更改连接字符串和表/字段名等：

```
 Private Sub Button4_Click(sender As System.Object, e As System.EventArgs) Handles Button4.Click
    Dim strCnn As String = "Data Source=sqlservername;Timeout=10;Database=databasename;Trusted_Connection=no;User ID=userid;Password=password;"
    Using cnn As New SqlConnection(strCnn)
      cnn.Open()
      Dim strSql As String = "SELECT * FROM Tablename"
      Dim dtb As New DataTable
      Using dad As New SqlDataAdapter(strSql, cnn)
        dad.Fill(dtb)
      End Using
      'now hide all the columns except the ones we want to show'
      dgv.AutoGenerateColumns = False 'dgv is the name of the datagridview'
      Dim intColIndex As Integer
      intColIndex = dgv.Columns.Add("Field1", "Field 1") 'aliases'
      dgv.Columns(intColIndex).DataPropertyName = "F1" 'column name in database'
      intColIndex = dgv.Columns.Add("Field3", "Field 3") 'aliases'
      dgv.Columns(intColIndex).DataPropertyName = "F3" 'column name in database'
      'now bind'
      dgv.DataSource = dtb
    End Using
  End Sub 
```

哦，你需要

```
Imports System.Data
Imports System.Data.SqlClient 
```

在表单源代码的顶部。

# github - git push -u origin master 错误：收到 HTTP 代码 0

> ID：10875550
> 
> 赞同：1
> 
> 时间：2012-06-04T02:00:26.013
> 
> 标签：github

我多次使用此命令并且每次都有效，但是今天在我创建一个存储库并再次使用它之后发生了错误：

```
git push -u origin master 
```

它给了我这个：

```
error: Received HTTP code 0 from proxy after CONNECT while accessing https://github.com/[myrepo]

fatal: HTTP request failed 
```

我使用`echo $http_proxy` 并得到了`http://127.0.0.1:48100`。但我不记得我曾经设置过这个。（有时我确实将这个用于我的Firefox。）我使用了该`unset`命令，但它仍然给了我同样的错误。有没有办法可以永久将此代理设置为无？

还有其他方法可以实现这一目标吗？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T04:53:31.530

如果你考虑：

*   问题“ [CURL：CONNECT 后来自代理的代码 0？](https://stackoverflow.com/questions/1943265/curl-code-0-from-proxy-after-connect) ”
*   错误代码（不是有效的[http 错误代码](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)）

似乎您的当前`http_proxy`/`https_proxy`环境变量（或您的`git config --global http(s).proxy`）不再引用有效的代理。
还要检查用于这些代理的语法（每个都应以`http://...`in开头`http://host:port`）。

# jquery - 无法使用 JQuery 设置“TD”的背景颜色

> ID：10875553
> 
> 赞同：2
> 
> 时间：2012-06-04T02:01:00.247
> 
> 标签：jquery

我有一张桌子如下

```
<table >
        <tr>
            <th scope="col">EmpId</th><th scope="col">EmpName</th>
        </tr>
        <tr>
            <td>1</td><td>ABC</td>
        </tr>
        <tr>
            <td>2</td><td>DEF</td>
        </tr>
</table> 
```

我想只设置表格的**"td"**元素而不是**"th"**的背景颜色。我试过了

```
$("table").children("td").css('background-color', '#00ff00');

OR

$("table").children("tr").children("td").css('background-color', '#00ff00'); 
```

但是没有结果。

请帮助我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T02:02:25.527

您可以尝试如下：

```
$("table tr").find("td").css('background-color', '#00ff00'); 
```

或者

```
$("table td").css('background-color', '#00ff00'); 
```

**[演示](http://jsfiddle.net/thecodeparadox/QStkd/130/)**

根据@Matt Huggins 的评论，您也可以执行以下操作：（但不是必需的）

```
$("table tbody td").css('background-color', '#00ff00'); 
```

**[演示](http://jsfiddle.net/thecodeparadox/ADuEU/)**

# java - GWT CellTable 或类似的

> ID：10875554
> 
> 赞同：0
> 
> 时间：2012-06-04T02:01:08.867
> 
> 标签：java, gwt

使用需要类似 CellTable 来显示和编辑数据的 GWT 应用程序。我在 CellTable 示例中没有看到的额外要求：

*   多个标题行。我真的不需要这样的标题行，但是每隔几行（4-10）的数据我想要一个标题之类的东西（基本上解释了下一个'n'项是如何相关的）

*   根据某些数据（当前日期和对象中指定的日期），某些字段应该是不可编辑的。我找到了有关如何使列不可编辑的示例，但是如何将其映射回来自自定义渲染器的实际数据？（即对应于行的数据对象 - 应该很容易，但我错过了一些东西......）

我可以用 CellTable 做到这一点吗？我应该看一个更好的小部件吗？我知道我可以在 Grid 中完成所有操作，但 CellTable 看起来要好得多！

谢谢。

# 回答

在下面扩展 Thomas Broyer 的答案时，我已经设法让不可编辑的东西继续下去。我从没想过“标题行”很容易，所以编辑是主要部分。

正如我在下面评论的那样，我没有找到任何简单、易于遵循的示例来向我展示整个画面。我设法从几个不同的来源拼凑起来。

如果有人有任何意见或我遗漏了一些明显的东西：请告诉我！

```
// Step 1: Create a cell (in this case based on text)
class MyEditTextCell extends EditTextCell {
    @Override
    public void render(com.google.gwt.cell.client.Cell.Context context,
            String value, SafeHtmlBuilder sb) 
    {
        bool editable = true;
        // TODO: What goes here?

        if (!editable) {
        sb.appendHtmlConstant("<div contentEditable='false' unselectable='true'>" + value + "</div>");
    }
    else {
            super.render(context, value, sb);
        }
    }
}

// It gets used to add a column to the table like this
final MyEditTextCell myCell = new MyTextCell();
Column<RowType, String> nmyCol = new Column<RowType, String>(myCell) {
    @Override
    public String getValue(RowType o) {
        return o.someMethod(); // This gets the particular row out of your column.
    }
};
table.addColumn(myCol, "Heading"); 
```

所以所有这些工作都相当容易，但我仍然无法弄清楚使用该行的 TODO。这一切都与另一个处理 KeyProviders 的示例结合在一起。KeyProvider 提供了一个链接，该链接来自您在单元格的 render() 方法中获得的 Context 以及该单元格所属的行。它通过一个索引（它只是一个对象）来做到这一点。

所以你最终得到：

```
// Step 2: Cell can get the row and use it to decide how to draw.
class MyEditTextCell extends EditTextCell {
    @Override
    public void render(com.google.gwt.cell.client.Cell.Context context,
            String value, SafeHtmlBuilder sb) 
    {
        Object key = context.getKey();
        // What the key is is uo to you: if could be an Integer that indexes into
        // a collection of objects, it could be a key for a hashmap. I'm guessing
        // it could even be the real object itself (but I haven't tried that...)
        // e.g.
        boolean editable = true;
        int index = ((Integer)key).intValue();
        RowType row = myRowCollection.get(index);
        if (row != null) {
            if (/*some condition on the row*/) {
                editable = false;
            }
        }
        if (!editable) {
        sb.appendHtmlConstant("<div contentEditable='false' unselectable='true'>" + value + "</div>");
    }
    else {
            super.render(context, value, sb);
        }
    }
}

// Key provider links gets a unique id from the rows - I just used an in.
// This gets provided to the CellTable on creation
// e.g. CellTable tab = new CellTable(LEY_PROVIDER);
//
private static final ProvidesKey<RowType> KEY_PROVIDER = new ProvidesKey<RowType>() {
    public Object getKey(RowType item) {
        return Integer.valueOf(item.getId());
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T02:24:35.430

> *   多个标题行。我真的不需要这样的标题行，但是每隔几行（4-10）的数据我想要一个标题之类的东西（基本上解释了下一个'n'项是如何相关的）

（又名分组行）
GWT 2.5（将在一个月左右发布）将添加`CellTableBuilder`允许您更改从其*模型*`CellTable`构建其*视图*的方式。*您可以在*此处 看到一个示例（与您的用例不同：添加*子行*而不是*分组行*）：[http](http://showcase2.jlabanca-testing.appspot.com/#!CwCustomDataGrid) ://showcase2.jlabanca-testing.appspot.com/#!CwCustomDataGrid 在您的情况下，棘手的部分是检测何时插入分组行。

 ***> *   根据某些数据（当前日期和对象中指定的日期），某些字段应该是不可编辑的。我找到了有关如何使列不可编辑的示例，但是如何将其映射回来自自定义渲染器的实际数据？（即对应于行的数据对象 - 应该很容易，但我错过了一些东西......）

您最好的选择是使用带有行对象值的自定义`Cell`项*（*因此它可以决定单元格是否应可编辑），但仅显示/编辑该对象的字段/属性。
您应该能够将呈现和事件处理推迟到 a`TextInputCell`或者`EditTextCell`如果该值是可编辑的，`TextCell`否则 a 。

棘手的部分是使列可编辑的条件是否取决于本身可编辑的属性。在这种情况下，您必须触发表的刷新（至少是修改后的行），以便刷新*有条件的可编辑*列。在这种情况下，我认为通过使用最初总是呈现相同但可以切换到可编辑模式（类似于）
的自定义，你会有更好的机会；并在处理事件时执行*值可编辑*计算，并有条件地拒绝切换到编辑模式。 您应该可以从这里复制/粘贴很多内容。`Cell``EditTextCell` *`EditTextCell`****

# matlab - MATLAB 直方图显示额外的值

> ID：10875557
> 
> 赞同：0
> 
> 时间：2012-06-04T02:02:17.797
> 
> 标签：matlab, probability, histogram

我需要在掷两个骰子时产生 7 的总和之前生成掷骰数的概率直方图。实验正常运行，通过 10,000 次迭代，我得到的数据看起来与您预期的一样。然而，我在直方图中显示这些数据时遇到了很多麻烦。问题是有大量额外数据似乎打印到直方图上，而这些数据在我传递给的向量中不存在`hist()`。这显示为 x 轴上较大值的大量无限大的 bin。

由于掷出 7 和的概率是 6/36 = 1/6，因此这通常发生在前几次掷骰中的一个上。这里我有一个行向量“rollbins”，其中第 i 个条目保存需要“i”个滚动的实验的频率。经过多次实验迭代后，rollbins 的前几个元素很大，随后的每个元素都变小，直到第 45 个元素通常为零。

我已经将该`hist()`函数与 bins 向量参数一起使用，并且根据[这个](https://stackoverflow.com/questions/9123238/limit-data-values-displayed-in-matlab-histogram)问题，我曾经`xlim()`将 x 轴上的显示限制为仅 0-45。然而，输出不受有无限制`xlim()`。

任何帮助是极大的赞赏 ：）

```
iters = 1000;
% do not consider extreme results
maxrolls = 45;
% rollbins(i) is how many experiments occured with i rolls
rollbins = zeros(1, maxrolls);

for r=1 : 1 : iters
    % roll die until get sum of 7, note times taken
    sum = 0;
    % the amount of rolls the experiment takes
    rolls = 0;
    while sum ~= 7
        rolls = rolls + 1;
        % sum two rolls of a die (same as one roll two dies)
        sum = floor( 6*rand(1) + 1 ) + floor( 6*rand(1) + 1 );
    end

    % assign if within the vector's limits; discards outliers
    if rolls < maxrolls
        rollbins(rolls) = rollbins(rolls) + 1;
    end
end

% 1,2,3...45
range = 1:1:maxrolls;
% limit the values on x-axis to 0-45
xlim([0 maxrolls]);
% the histogram shows more than 45 vertical bars
hist(rollbins, range) 
```

编辑：`xlim()`调用应该在`hist()`函数之后。离开最后一个图形函数 ( ) 的分号`ylim`可以实现这些效果。

```
hist(rollbins, range);
xlim([0 maxrolls-1]);
ylim([0 iters / 5]) 
```

但是，我现在意识到这些条形仍然太短，并且这些条形图的间隔显示为 0.1 而不是 1，正如我所预期的那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T02:55:18.043

您正在记录滚动计数的频率，但您应该只记录滚动计数本身，然后让 hist 在直方图中显示频率。

此外，您需要在生成直方图后（而不是之前）应用 xlim。

```
rollbins = zeros(1, maxrolls);
numberofrolls = [];   % Initialise numberofrolls 
```

和

```
if rolls < maxrolls
    rollbins(rolls) = rollbins(rolls) + 1;
    numberofrolls (end+1) = rolls;  % Record # of rolls
end 
```

和

```
hist(numberofrolls);    % Generate histogram 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:17:08.367

以下是我将如何实现此模拟：

```
iters = 1000;               %# number of times to run simulation
maxrolls = 45;              %# max number of rolls to consider
numRolls = nan(iters,1);    %# store number of rolls in each run
for r=1:iters
    %# rolls dice "maxrolls"-times, and compute the sums
    diceSums = sum(randi([1 6],[maxrolls 2]), 2);

    %# find the first occurence of a sum of 7
    ind = find(diceSums==7, 1, 'first');

    %# record it if found (otherwise noted as NaN)
    if ~isempty(ind)
        numRolls(r) = ind;
    end
end

%# compute frequency of number of rolls, and show histogram
counts = histc(numRolls, 1:maxrolls);
bar(1:maxrolls, counts, 'histc'), grid on
xlabel('Number of dice rolls to get a sum of 7')
ylabel('Frequency')
xlim([1 maxrolls]) 
```

![截屏](../Images/cd336d5526eacf066de3b0bfb5e0f15c.png)

如果你觉得有点冒险，这里是大循环的完全矢量化版本：

```
numRolls = cellfun(@(v) find(v,1,'first'), ...
    num2cell(sum(randi([1 6],[iters maxrolls 2]),3) == 7, 2), ...
    'UniformOutput',false);
numRolls(cellfun(@isempty,numRolls)) = {NaN};
numRolls = cell2mat(numRolls); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T21:50:08.810

这是我最终得到的解决方案（我还不太熟悉矢量化）

```
iters = 10000;
% preallocation of experiments row vector, one element for every experiment
experiments = zeros(1,iters);
for i=1 : 1 : iters
    % roll die until get sum of 7, note times taken
    sum = 0;
    rolls = 0;
    while sum ~= 7
        rolls = rolls + 1;
        sum = floor(6*rand(1)+1) + floor(6*rand(1)+1);
    end

    % save the number of rolls this experiment took
    experiments(i) = rolls;
end

% do not plot experiments that took more than 50 rolls
bins = 0:1:50;
hist(experiments, bins);
xlim([0 50]);
ylim([0 1750]) 
```

# sql - 更新每个客户的所有服务的查询，除了最近的

> ID：10875561
> 
> 赞同：0
> 
> 时间：2012-06-04T02:02:38.763
> 
> 标签：sql, ms-access, sql-update

总的来说，我要做的只是显示最近**30 天内****未**出现服务的最新客户记录，并且仅显示根据当前日期的最新服务记录。

 **有两个表，它们以一对多的关系构造。

第一个表是表：“客户”

```
|---------------------------------------------------|
| ID | FirstName | LastName | Male | Female | Phone | 
|---------------------------------------------------|
  35    John       Mulling    True    False    905    
  84    Mike       Stone      True    False    416    
  90    Cassie     Daniels    False   True     315 
```

第二个表是表：“tblservice”

```
|-------------------------------------------------------------------------|
| ServiceID  |  Followup30 | Timing     | Service1 | Total   | customerID |
|-------------------------------------------------------------------------|
      1         Yes         01/02/2012   Serv-001   120.00       35
      2         No          02/05/2012   Serv-003   500.00       84
      3         No          03/25/2012   Serv-008    85.00       90 
```

此列表通过以下查询在用户界面中过滤，员工每周或每月检查一次以跟进客户（一旦致电客户，员工将“followup30”复选框设置为“是” ):

```
SELECT customer.FirstName, customer.LastName, customer.Male, customer.Female,
customer.Phone, tblservice.Followup30, tblservice.Timing, tblservice.Service1,
tblservice.Total 
FROM customer 
INNER JOIN tblservice 
ON customer.ID=tblservice.customerID 
WHERE (((tblservice.Followup30)=No) 
AND ((tblservice.Timing)<=DateAdd("d",-30,Date())) 
AND ((customer.Phone) Is Not Null)) 
ORDER BY tblservice.Timing; 
```

然而问题似乎是当客户在 20 天内进来时，他/她之前的条目仍在系统中，需要跟进。（我**不想**只显示最近的旧服务记录，如果它超过 30 天）

UI 中的上述查询将处理 30 天或更早的部分，但是我需要清理列表中旧客户服务条目的系统。

**尝试：**

所以我想在加载用户界面时执行更新查询，这将清除员工所有旧服务条目的列表。

我只希望查询将每个客户的服务表中的真/假字段（followup30）的所有条目设置为真，但最近日期**除外。**

这是我到目前为止所拥有的，但我认为它不会单独对待每个客户，并且可能存在一些语法问题。

```
UPDATE tblservice
SET followup30='Yes'
WHERE (SELECT Timing FROM tblservice WHERE Timing <> (SELECT MAX(Timing) 
FROM tblservice)); 
```

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T02:33:26.697

您可以使用相关子查询执行此操作：

```
UPDATE tblservice
    SET followup30 = 'Yes'
    FROM (select max(Timing) as maxTiming
          from tblservice ts
          where tblservice.CustomerId = ts.Customerid
         ) t
    where tblservice.Timing = maxTiming 
```

我认为这捕获了您想要的逻辑，即仅查看最新记录。（您可能需要修改它以放入 30 天的逻辑。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T04:30:55.057

我相信您可以使用嵌入式 SQL 执行此操作，但是如果您创建一个名为 LastService 的查询，如下所示

```
SELECT tblService.CustomerId, Max(tblService.Timeing) AS MaxOfTimeing FROM tblService GROUP BY tblService.CustomerId; 
```

然后您可以在更新查询中使用它，如下所示

```
UPDATE customer INNER JOIN LastService ON customer.CustomerId = LastService.CustomerId SET customer.Followup30 = iif(LastService.MaxOfTimeing<DateAdd("d",-30,Now()),'YES','NO') 
```

这是假设 Followup30 是一个文本字段，如果它是一个 YES/NO 字段，您将必须相应地调整更新查询。**

# xaml - Visual Studio 2012 RC 设计器无法识别 Windows Metro 应用程序的 xaml

> ID：10875565
> 
> 赞同：0
> 
> 时间：2012-06-04T02:02:58.133
> 
> 标签：xaml, windows-8, winrt-xaml, visual-studio-2012

我最近安装了 Visual Studio 2012 的候选发布版和 Windows 8 的发布预览版。我丢失了 xaml 智能感知，VS 将 xaml 视为 XML 文档。有没有其他人有任何想法从哪里开始解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T19:42:59.760

我只是重新安装了 Visual Studio 2012 RC。我不愿意尝试重现该问题，但我相信这就是我所做的：将安装了 Visual Studio 2010 的 Windows 7 Professional 升级到 Windows 8 Professional，安装了 Visual Studio 2012 RC，安装了 Windows 8 SDK。

我的症状包括：

1.  在工具、选项、文本编辑器下，没有 xaml 选项。
2.  当我尝试通过设计器查看 xaml 页面时，属性窗口将所有内容显示为 XML 文档
3.  我无法在 Visual Studio 中查看设计器（我可以在 Blend 中查看），它不允许我显示 xaml 标记。
4.  没有智能。

重新安装并没有花费太多时间，大概 20-30 分钟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T23:31:22.680

尝试在解决方案资源管理器中右键单击 XAML 文件，然后选择“打开方式”。在那里选择“XAML UI Designer”，点击“Set as Default”，然后点击“Ok”。这应该强制 VS 使用 XAML 设计器。

# ruby - 如何在 ruby 1.8 中用 ascii 替换 unicode 引号？

> ID：10875566
> 
> 赞同：1
> 
> 时间：2012-06-04T02:03:05.003
> 
> 标签：ruby, regex, unicode, ruby-1.8.7

如何在 ruby​​ 1.8.7中查找和替换[unicode 引号？](http://www.cl.cam.ac.uk/~mgk25/ucs/quotes.html)例如，来自：

```
“Good morning.” 
```

至：

```
'Good morning.' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T02:13:51.307

您应该能够进行正常的搜索和替换，例如：

```
>> '“Good morning.”'.gsub(%r/“|”/, "'")
=> "'Good morning.'" 
```

# java - Java Flash AS3套接字读取更大的数据包+代码确认

> ID：10875570
> 
> 赞同：0
> 
> 时间：2012-06-04T02:04:12.813
> 
> 标签：java, actionscript-3, flash, sockets

所以我四处阅读，显然网络将数据包分解成更小的块或其他东西并单独发送它们，但java不知道应该接收的字节的总大小是多少。我在数据包中添加了一个字节大小前缀，这样它就知道要读取多少

```
while ( inputStream.available() != -1 )
        {
            int packetSize = inputStream.readByte() ;

            if ( packetSize == -1 )
            {
                closeConnection();
            }

            debug( "read bytearray size:" + packetSize );
            ByteArrayOutputStream bout = new ByteArrayOutputStream();
            byte packetBuffer[] = new byte[packetSize];
            int byteTrans = 0;
            while ( byteTrans < packetSize )
            {inputStream.read() );
                inputStream.read( packetBuffer , byteTrans , 1 );
                byteTrans++;
            } 
```

我试着玩读，到目前为止，这就是我开始工作的地方。

我想我记得一个字节最多只能包含和 int 255。我想我应该为那些大字符串发送一个无符号的 short 吗？

我的主要问题是：flash actionscript 3 是否同样如此？如果是这样，我该如何实现类似的东西？

我的想法是在 socketData 的处理程序中，读取缓冲区大小，然后将所有数据保存到类的字节数组缓冲区中。如果缓冲区的大小是接收到的大小，则运行读取方法。所以一般来说，每次调用socketData处理程序时，在java端的while循环中运行代码。

谢谢！

# javascript - 使用 Rickshaw 混合条形图和折线图（基于 d3 的 js 图形库）

> ID：10875571
> 
> 赞同：5
> 
> 时间：2012-06-04T02:04:13.613
> 
> 标签：javascript, d3.js

使用 d3 绘图库 Rickshaw 时，在图形上设置渲染器（区域、线或条形图）。是否有一个包含多个系列的图表，其中一个系列绘制为一条线，另一个绘制为条形？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T06:38:03.327

我尝试了相同的用例。

我修改了人力车源。但是我找到了这个。

nvd3 支持[混合图](http://nvd3.org/examples/linePlusBar.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-19T12:09:30.503

**您现在可以在人力车上组合图表！**

渲染器类型称为“多”。它的工作原理是你给每个单独的系列它自己独特的渲染器，即

```
var graph = new Rickshaw.Graph({
    element: el, width: 960, height: 500,
    padding: { top: 0, right: 0, bottom: 0, left: 0 },
    renderer: 'multi',
    series: [
        {
            renderer: 'line',
            data: [
                { x: 0, y: 40 },
                { x: 1, y: 49 }
            ]
        },
        {
            renderer: 'bar',
            data: [
                { x: 0, y: 30 },
                { x: 1, y: 60 }
            ]
        },
    ]
}); 
```

完整示例在这里[https://github.com/shutterstock/rickshaw/blob/a240899625c2d83961b3e682cd77ab8e5199a866/tests/Rickshaw.Graph.Renderer.Multi.js](https://github.com/shutterstock/rickshaw/blob/a240899625c2d83961b3e682cd77ab8e5199a866/tests/Rickshaw.Graph.Renderer.Multi.js)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T10:28:58.933

我发现了比解决方案更多的解决方法，但无论如何它可能会有所帮助。

您可以在彼此之上绘制两个人力车图：

```
<div style="height: 0; overflow: visible;">
  <div id="barChart" style="height: 300px;"></div>
</div>

<div style="height: 0; overflow: visible;">
  <div id="lineChart" style="height: 300px;"></div>
</div> 
```

现在绘制两个图表，并为每个图表 div 调用两次 Rickshaw.Graph()。请注意，您需要复制折线图中的最后一个点，否则您将无法在 x 轴上获得准确的匹配。

我知道这很难看，但它对简单的图表很有用。但是，我不知道如果您尝试使用悬停效果或类似效果会发生什么。

如果有一个干净的解决方案，我也会感兴趣。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T20:20:54.477

在 Rickshaw 中有一个合并多个图表的[拉取请求](https://github.com/shutterstock/rickshaw/pull/71)。显然，该方法仍需要一些改进，但代码似乎大部分都有效。

目前，您可以克隆[功能分支](https://github.com/BluePhoenixLab/rickshaw/tree/feature/renderermulti)，看看它是否符合您的目的。

# c# - 绘制贝塞尔曲线问题，未在最后一点结束

> ID：10875572
> 
> 赞同：-1
> 
> 时间：2012-06-04T02:04:17.193
> 
> 标签：c#, graphics, drawing, bezier

我正在学校制作用于绘制贝塞尔曲线的程序（仅适用于 n 形式 <1,9>）。

对于绘图，我使用曲线定义中的蛮力算法（为简单起见）。我知道De Casteljau会更好。当我根据参数 t 计数点时，即 <0.0,1.0> 并且我还必须设置参数化步骤（增量 t）。我称之为一步。我有一个从 0.1 到 0.05 的可选步骤——我只是在 GUI 中选择它。

我的主要问题是，当我的步长为 0.1 时，它可以正常工作，但是当我的步长较小时，曲线不会到达最后一个控制点。贝塞尔曲线应该从第一个控制点开始，到最后一个控制点结束。

这是我如何绘制它的代码（在 C# 中）：顶点是控制点列表。

```
public void drawBezier(Graphics g, int n, Pen pen) 
   {
       int nuberOfPoints = n + 1; // number of points
       double[] B; //Bernstein polynoms
       double step = ((double)(stepNumericUpDown.Value)) / 100.0; //stepNumericUpDown.Value 
                                                  //could be <5,10> to get step <0.05,0.10>

       List<Point> pointsT = new List<Point>();
       for (double t = 0.0; t <= 1.0; t += step)
       {

           B = new double[nuberOfPoints];
           //count Bernstein polynoms at i position
           for (int i = 0; i < B.Length; i++) B[i] = getBernstein(n, i, t);

           //count points of curve
           Point pointT;
           double x = 0.0;
           double y = 0.0;

           for (int i = 0; i < n + 1; i++)
           {
               x += (vertices[i].X * B[i]); //vertices is List of control Points
               y += (vertices[i].Y * B[i]);
           }
           int xi = Convert.ToInt32(x);
           int yi = Convert.ToInt32(y);
           pointT = new Point(xi, yi);
           pointsT.Add(pointT); //add to list of points of curve
       }

       for (int i = 0; i < pointsT.Count; i++)
       {
           //draw the curve from the points what I've count              
           if ((i - 1) >= 0) g.DrawLine(pen, pointsT[i - 1], pointsT[i]);  //vykreslí čáry             
       }

   }

        }

    /// <summary>
    /// Return bernstein polynom value in n,i,t
    /// </summary>
    /// <param name="n">n</param>
    /// <param name="i">position i</param>
    /// <param name="t">step t</param>
    /// <returns></returns>
    public double getBernstein(int n, int i, double t) 
    {
        double value;
        int nCi = getBinomial(n, i);
        value = nCi * Math.Pow(t, i) * Math.Pow((1 - t), (n - i));
        return value;
    }

    /// <summary>
    /// Count binomial n over k
    /// </summary>
    /// <param name="n">n</param>
    /// <param name="k">k</param>
    /// <returns></returns>
    public int getBinomial(int n, int k)
    {
      int fn = Factorial(n);
      int fk = Factorial(k);
      int fnk = Factorial(n - k);
      return fn / (fk * fnk);
    }

    /// <summary>
    /// Count factorial
    /// </summary>
    /// <param name="factor">argument</param>
    /// <returns></returns>
    public int Factorial(int factor) 
    {

        if (factor > 1)
        {
        return factor * Factorial(--factor);
        }

        return 1;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:12:55.423

答案是根据以下评论解决的：

> 我通过使用较小的步长解决了舍入问题。现在我使用步长 0.0001，曲线非常平滑，并以起点和终点结束 :) 因为我的 n 限制为 9，所以性能也没有问题...
> 
> -user1097772

# java - Java 正则表达式查找两个大写字母，后跟一个空格和七个数字

> ID：10875575
> 
> 赞同：0
> 
> 时间：2012-06-04T02:05:07.920
> 
> 标签：java, regex

我想为以下模式找到一个正则表达式：（`"AA XXXXXXX"`两个字符，一个空格和 7 位数字）。

示例：`"AA 1234567"`。

现在我找不到答案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T02:11:33.617

你想要的模式是：

```
[a-zA-Z]{2} [0-9]{7} 
```

正好两个字符（大写或小写）后跟空格，后跟正好 7 位数字。

如果字符只能像示例字符串中那样大写：

```
[A-Z]{2} [0-9]{7} 
```

在 Java 中：

```
Pattern p = Pattern.compile("[A-Z]{2} [0-9]{7}");
Matcher m = p.matcher("AA 1234567");
boolean b = m.matches(); 
```

# html - 使用 sql 查询 xml 时如何保留 HTML 标签？

> ID：10875577
> 
> 赞同：7
> 
> 时间：2012-06-04T02:05:12.470
> 
> 标签：html, sql, xml, sql-server-2008, sql-server-2005

当我编写查询以生成 xml 标签时，我想在我的 sql 查询中保留 html 标签。例如：

```
select '<p> this is a code</p>' as code
from table name
for xml path (''), type 
```

输出：

```
<code>&ltp&gt; this is a code &lt/p&gt; <code> 
```

它应该输出什么：

```
<code><p> this is a code </p><code> 
```

我该如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T02:25:13.387

如果使用`xhtml`，我相信转换为`Xml`：

```
select convert(xml, '<p> this is a code</p>') as code
from table name
for xml path (''), type 
```

编辑：如果列是`ntext`，则支持隐式转换`Xml`：

```
create table #t(html ntext)
insert into #t values(N'<p> this is a code</p>')
select convert(xml, html) as code
from #t
for xml path (''), type
drop table #t 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-28T10:32:46.770

下面的片段对我有用

```
DECLARE @HTMLt  NVARCHAR(MAX)  ;

........

SET @HTMLt = REPLACE(REPLACE(REPLACE(@HTMLt,'&amp;','&' ) , '&lt;','<'),'&gt;','>'); 
```

# php - MySQL 整数 IN 参数被转换为 0

> ID：10875580
> 
> 赞同：-1
> 
> 时间：2012-06-04T02:05:40.823
> 
> 标签：php, mysql, mysqli

我有一个 MySQL 存储例程，它有一个 INTEGER 类型的 IN 参数（IN p_user_id INTEGER）。如果用户正在创建一个新用户，我将 p_user_id 作为 '' 传递，否则如果用户正在更新用户，我将传递正在编辑的用户的 user_id。我的问题是，当 p_user_id 以 '' 的形式出现时，它会被转换为 0。我在 PHP 将值发送到 MySQL（并且值是 ''）之前将用户 ID 转储出去并正确地转储它在 MySQL 例程的开头，p_user_id 现在为 0。我可以了解如何处理这个问题，以便我可以让 p_user_id IN 参数为 NULL。提前致谢！

PHP代码：

```
<?php 
session_start();

$functionCalled = $_GET['function'];

function userMaintMerge()
{   
    $userMaintUserId = $_GET['userMaintUserId'];
    $userMaintStep = $_GET['userMaintStep'];
    $userMaintFirstName = $_GET['userMaintFirstName'];
    $userMaintMI = $_GET['userMaintMI'];
    $userMaintLastName = $_GET['userMaintLastName'];
    $userMaintUserType = $_GET['userMaintUserType'];
    $userMaintSchoolId = $_GET['userMaintSchoolId'];
    $userMaintGrade = $_GET['userMaintGrade'];
    $userMaintLogin = $_GET['userMaintLogin'];
    $userMaintLogin = $_GET['userMaintPassword1'];

    $mysqli = new mysqli($_SESSION['dbaddress'],$_SESSION['user'],$_SESSION['dbpword'],$_SESSION['database']);
    if ($mysqli->connect_errno) 
    {
        echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error;
    }
    if (!$SelectUser = $mysqli->query("call MergeUser('$userMaintUserId','$userMaintStep','$userMaintFirstName','$userMaintMI','$userMaintLastName','$userMaintUserType','$userMaintSchoolId','$userMaintGrade','$userMaintLogin','$userMaintPassword1',@error)")) 
    {
        echo "CALL failed: (" . $mysqli->errno . ") " . $mysqli->error;
    }
}
?> 
```

MySQL存储例程：

```
CREATE DEFINER=`root`@`localhost` PROCEDURE `MergeUser`(IN  p_user_id      INTEGER
,IN  p_step         VARCHAR(10)
,IN  p_first_name   VARCHAR(100)
,IN  p_mi           VARCHAR(5)
,IN  p_last_name    VARCHAR(100)
,IN  p_user_type    INTEGER
,IN  p_school_id    VARCHAR(25)
,IN  p_grade        VARCHAR(2)
,IN  p_login        VARCHAR(25)
,IN  p_password     VARCHAR(25)
,OUT p_error        VARCHAR(1) 
)
BEGIN

    insert into rjh_log values ('',p_user_id,sysdate());

    IF p_step = 'add' THEN

        INSERT INTO USERS
                    ( USER_ID
                    , LOGIN
                    , FIRST_NAME
                    , MI
                    , LAST_NAME
                    , USER_TYPE_ID
                    , GRADE
                    , SCHOOL_ID
                    , PASSWORD
                    , ACTIVE_FLAG
                    ) 
             VALUES ( NULL
                    , p_login
                    , p_first_name
                    , p_mi
                    , p_last_name
                    , p_user_type
                    , p_grade
                    , p_school_id
                    , p_password
                    , 'Y'
                    ) ;

    ELSE

        UPDATE USERS
           SET LOGIN = p_login
             , FIRST_NAME = p_first_name
             , MI = p_mi
             , LAST_NAME = p_last_name
             , USER_TYPE_ID = p_user_type
             , GRADE = p_grade
             , SCHOOL_ID = p_school_id
             , PASSWORD = p_school_id
         WHERE USER_ID = p_user_id;

    END IF;

END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T02:19:55.793

```
$userMaintUserId = ($_GET['userMaintUserId'] == "" ? "NULL" : $_GET['userMaintUserId']);
$userMaintStep = ($_GET['userMaintStep'] == "" ? "NULL" : $_GET['userMaintStep']);
$userMaintFirstName = ($_GET['userMaintFirstName'] == "" ? "NULL" : $_GET['userMaintFirstName']);
$userMaintMI = ($_GET['userMaintMI'] == "" ? "NULL" : $_GET['userMaintMI']);
$userMaintLastName = ($_GET['userMaintLastName'] == "" ? "NULL" : $_GET['userMaintLastName']);
$userMaintUserType = ($_GET['userMaintUserType'] == "" ? "NULL" : $_GET['userMaintUserType']);
$userMaintSchoolId = ($_GET['userMaintSchoolId'] == "" ? "NULL" : $_GET['userMaintSchoolId']);
$userMaintGrade = ($_GET['userMaintGrade'] == "" ? "NULL" : $_GET['userMaintGrade']);
$userMaintLogin = ($_GET['userMaintLogin'] == "" ? "NULL" : $_GET['userMaintLogin']);
$userMaintLogin = ($_GET['userMaintPassword1'] == "" ? "NULL" : $_GET['userMaintPassword1']); 
```

# google-app-engine - 哪个更适合，XMPP 或 Channel API 用于 Google App Engine 中的聊天系统

> ID：10875581
> 
> 赞同：2
> 
> 时间：2012-06-04T02:05:44.513
> 
> 标签：google-app-engine

我很困惑这两者中的哪一个：XMPP 或 Channel API（Google App Engine）更适合要求：“应用程序的用户（身份验证：google 帐户）应该能够与其他用户聊天”

与其他 XMPP 客户端聊天不是要求的一部分。

如果应用程序有成百上千的用户（使用聊天功能），Channel API 的配额可以处理吗？

单独AJAX可以满足要求吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T02:48:51.837

XMPP API 用于将消息从 Google App Engine 发送到任何 XMPP 客户端，例如 Gmail 中的 Google Chat 客户端。

Channel API 用于从 Google App Engine 实例向用户的浏览器发送消息。这是一个“推送”消息。

只要你付钱，是的，但要计算成本。

您可以使用 AJAX 从浏览器向 App Engine 发送消息，但您需要 Channel API 将消息从 App Engine 发送回您的浏览器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T17:44:38.787

以下是我所知道的每个优点和缺点的非常简短的列表：

**XMPP**

*   开放、成熟、知名、有据可查。
*   专为聊天而设计，但足够灵活，可以做其他事情。
*   使用 XML（对某些人来说是强项，对其他人来说是弱点）。
*   因具有相对较高的延迟而臭名昭著。
*   使用多种语言（包括 JavaScript）的[客户端。](http://xmpp.org/xmpp-software/libraries/)

**频道 API**

*   应用引擎专有
*   更少的延迟
*   不是为聊天而“制造”的。您可能需要在此基础上设计一些东西。

我要做出决定的决定性因素是问题延迟对您来说有多大。我强烈建议进行一些基准测试，以确定延迟对您的应用程序有多糟糕，并从那里做出决定。

# mysql - MySQL计算单词的频率

> ID：10875583
> 
> 赞同：-1
> 
> 时间：2012-06-04T02:05:52.990
> 
> 标签：mysql, word-frequency

我希望能够计算特定列出现的单词频率。

如果我想计算匹配句子的频率，则此代码有效，但我需要它来搜索单个单词。

```
SELECT DISTINCT `Text`, COUNT(*) AS num 
FROM MyTable 
GROUP BY `Text` 
ORDER BY num DESC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T02:19:10.097

在代码中执行此操作的一种方法是读取每个字符串，对于每个字符串，如果可能，通过“”或其他分隔符进行标记，并维护一个哈希表或哈希映射，每个标记作为键以及它在表中出现的次数作为价值。

# sql-server-2008 - READ_COMMITTED_SNAPSHOT 的优缺点

> ID：10875586
> 
> 赞同：10
> 
> 时间：2012-06-04T02:07:26.227
> 
> 标签：sql-server-2008, c#-4.0, transactions

`READ_COMMITTED_SNAPSHOT ON`在 SQL Server 2008中设置的优缺点是什么？

实际上我正在解决事务死锁的问题，但是通过设置`READ_COMMITTED_SNAPSHOT ON`和禁用*锁升级*（仅在导致死锁的事务中使用的表上）。这样就解决了大约 90% 的死锁问题；但我担心它可能还有其他一些问题，例如性能等。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-04T03:15:13.900

RCSI 的好处：

*   在查询开始时提供一致的数据视图
*   无阻塞
*   更少的锁定/升级

然而，这不是免费的。tempdb 用于保存它所谓的“版本存储”。这可能意味着：

*   增加 tempdb 的空间和 I/O 要求以维护版本
*   如果长时间运行的事务需要长期保存版本和/或存在多个版本，则可能会降低性能

此外，行版本信息每行增加 14 个字节。

RCSI 的常见替代方案通常涉及将写入活动与报告分开。这可以通过各种 HA 技术来完成，例如 SQL Server 2012 中的日志传送、镜像 + 快照或可用性组 + 只读辅助节点。

一些官方文档参考：

*   [在 SQL Server 2005 中使用 tempdb](http://msdn.microsoft.com/en-us/library/cc966545.aspx)
*   [选择基于行版本控制的隔离级别](http://msdn.microsoft.com/en-us/library/ms188277%28SQL.105%29.aspx)

# asp.net-mvc - MVC4 HttpPost 未触发

> ID：10875587
> 
> 赞同：0
> 
> 时间：2012-06-04T02:07:28.607
> 
> 标签：asp.net-mvc, razor

我有一个用 MVC3 (VB.NET) 制作的系统，它工作正常。我正在尝试将此系统升级到 MVC4（Beta），除了 HttpPost 之外一切正常。

这是视图代码（剃刀）：

```
@Using Html.BeginForm()

    @<fieldset>
        <legend></legend>
        <br />

        <fieldset>
            <legend>Datos Generales</legend>
            <table>
                <tr>
                    <td style="border-width:0px; border-style:solid">
                        @Html.LabelFor(Function(Model) Model.IDCertificado)
                        @Html.TextBox("ID_CERTIFICADO1", "Automático", New With {.readonly = "readonly", .style = "width:90px; text-align:center", .class = "letraingreso"})
                    </td>
                    <td style="width:20px"></td>
                    <td style="border-width:0px; border-style:solid">
                        @Html.LabelFor(Function(Model) Model.IDPoliza)
                        @Html.DropDownListFor(Function(Model) Model.IDPoliza, Nothing, New With {.style = "width:200px; visibility:visible", .class = "letraingreso"})
                    </td>
                </tr>
                <tr>
                    <td style="border-width:0px; border-style:solid">
                        @Html.LabelFor(Function(Model) Model.IDCampaña)
                        @Html.DropDownListFor(Function(Model) Model.IDCampaña, Nothing, New With {.style = "width:250px; visibility:visible", .class = "letraingreso"})
                    </td>   
                    <td style="width:20px"></td>
                    <td style="border-width:0px; border-style:solid">
                        @Html.LabelFor(Function(Model) Model.IDVigencia)
                        @Html.DropDownListFor(Function(Model) Model.IDVigencia, Nothing, New With {.style = "width:183px; visibility:visible", .class = "letraingreso", .disabled = "disabled"})
                    </td>
                </tr>
            </table>
        </fieldset>
        <br />

        <fieldset>
            <legend>Datos del Certificado</legend>
            <table width="99%">
                <tr>
                    <td style="border-width:0px; border-style:solid; width:8%">
                        @Html.LabelFor(Function(Model) Model.FechaEmision)
                    </td>
                    <td style="border-width:0px; border-style:solid; width:11%">
                        @Html.TextBox("FechaEmision", Nothing, New With {.style = "width:80px; text-align:center", .class = "letraingreso", .readonly = "readonly"})
                    </td>
                    <td style="width:1%"></td>
                    <td style="border-width:0px; border-style:solid; width:8%">
                        @Html.LabelFor(Function(Model) Model.FechaInicioVigencia)
                    </td>
                    <td style="border-width:0px; border-style:solid; width:12%">
                        @Html.TextBoxFor(Function(Model) Model.FechaInicioVigencia, New With {.maxLength = "10", .onkeyup = "DateFormat(this, this.value, event, false, '3')", .onblur = "DateFormat(this, this.value, event, true, '3')", .style = "width:80px", .class = "letraingreso"})
                        <a href="#"><img src="@Url.Content("~/Images/spacer.gif")" class="imagenfecha" style="border:0" height="16px" width="20px" id="imgFechaInicioVigencia" alt="" /></a>
                        <script type="text/javascript">
                            Calendar.setup(
                            {
                                inputField: "FechaInicioVigencia",
                                ifFormat: "%d/%m/%Y",
                                button: "imgFechaInicioVigencia",
                                align: "Tl",
                                singleClick: true
                            });
                        </script>
                    </td>
                    <td style="width:1%"></td>
                    <td style="border-width:0px; border-style:solid; width:25%">
                        @Html.LabelFor(Function(Model) Model.FechaFinVigencia)
                        @Html.TextBoxFor(Function(Model) Model.FechaFinVigencia, New With {.maxLength = "10", .onkeyup = "DateFormat(this, this.value, event, false, '3')", .onblur = "DateFormat(this, this.value, event, true, '3')", .style = "width:80px", .class = "letraingreso"})
                        <a href="#"><img src="@Url.Content("~/Images/spacer.gif")" class="imagenfecha" style="border:0" height="16px" width="20px" id="imgFechaFinVigencia" alt="" /></a>
                        <script type="text/javascript">
                            Calendar.setup(
                            {
                                inputField: "FechaFinVigencia",
                                ifFormat: "%d/%m/%Y",
                                button: "imgFechaFinVigencia",
                                align: "Tl",
                                singleClick: true
                            });
                        </script>
                    </td>
                </tr>

                <tr>
                    <td style="border-width:0px; border-style:solid; width:8%">
                        @Html.LabelFor(Function(Model) Model.IDEstado)
                    </td>
                    <td style="border-width:0px; border-style:solid; width:11%">
                        @Html.DropDownListFor(Function(Model) Model.IDEstado, Nothing, New With {.style = "width:100px; visibility:visible", .class = "letraingreso", .disabled = "disabled"})
                    </td>
                    <td style="width:1%"></td>
                    <td colspan="5" style="border-width:0px; border-style:solid; width:13%">
                        @Html.LabelFor(Function(Model) Model.IDPlanGrupoCobertura)
                        @Html.DropDownListFor(Function(Model) Model.IDPlanGrupoCobertura, Nothing, New With {.style = "width:350px; visibility:visible", .class = "letraingreso"})
                    </td>
                </tr>
            </table>
        </fieldset>
        <br />

        <div id="tabs">
            @*Establece los tabs a ser creados*@
            <ul>
                <li><a href="#fragment-1"><span>Asegurado</span></a></li>
            </ul>

            @*Asegurados*@
            <div id="fragment-1">
                <table>
                    <tr>
                        <td style="border-width:0px; border-style:solid; width:58px">
                            @Html.LabelFor(Function(Model) Model.IDAsegurado)
                        </td>
                        <td style="border-width:0px; border-style:solid">
                            @Html.TextBox("IDAsegurado", "Automático", New With {.readonly = "readonly", .style = "width:80px; text-align:center", .class = "letraingreso"})
                        </td>
                        <td style="width:10px"></td>
                        <td style="border-width:0px; border-style:solid">
                            @Html.LabelFor(Function(Model) Model.IDTipoDocumentoAsegurado)
                            @Html.DropDownListFor(Function(Model) Model.IDTipoDocumentoAsegurado, Nothing, New With {.style = "width:200px; visibility:visible", .class = "letraingreso"})
                        </td>
                        <td style="width:10px"></td>
                        <td style="border-width:0px; border-style:solid">
                            @Html.LabelFor(Function(Model) Model.NumeroDocumentoAsegurado)
                            @Html.TextBoxFor(Function(Model) Model.NumeroDocumentoAsegurado, New With {.onkeyup = "if(this.value.match(/\D/))this.value=this.value.replace(/\D/g,'')", .class = "letraingreso", .style = "width:100px"})
                        </td>
                        <td style="width:10px"></td>
                        <td style="border-width:0px; border-style:solid">
                            @Html.LabelFor(Function(Model) Model.FechaNacimientoAsegurado)
                            @Html.TextBoxFor(Function(Model) Model.FechaNacimientoAsegurado, New With {.maxLength = "10", .onkeyup = "DateFormat(this, this.value, event, false, '3')", .onblur = "DateFormat(this, this.value, event, true, '3')", .style = "width:80px", .class = "letraingreso"})
                            <a href="#"><img src="@Url.Content("~/Images/spacer.gif")" class="imagenfecha" style="border:0" height="16px" width="20px" id="imgFechaNacimientoAsegurado" alt="" /></a>
                            <script type="text/javascript">
                                Calendar.setup(
                                {
                                    inputField: "FechaNacimientoAsegurado",
                                    ifFormat: "%d/%m/%Y",
                                    button: "imgFechaNacimientoAsegurado",
                                    align: "Tl",
                                    singleClick: true
                                });
                            </script>
                        </td>
                    </tr>
                </table>
                <table>
                    <tr>
                        <td style="border-width:0px; border-style:solid; width:58px">
                            @Html.LabelFor(Function(Model) Model.NombresAsegurado)
                        </td>
                        <td style="border-width:0px; border-style:solid">
                            @Html.TextBoxFor(Function(Moel) Model.NombresAsegurado, New With {.style = "text-transform:uppercase; width:270px", .class = "letraingreso"})
                        </td>
                        <td style="width:15px"></td>
                        <td style="border-width:0px; border-style:solid">
                            @Html.LabelFor(Function(Model) Model.PrimerApellidoAsegurado)
                            @Html.TextBoxFor(Function(Model) Model.PrimerApellidoAsegurado, New With {.style = "text-transform:uppercase; width:182px", .class = "letraingreso"})
                        </td>
                        <td style="width:15px"></td>
                        <td style="border-width:0px; border-style:solid">
                            @Html.LabelFor(Function(Model) Model.SegundoApellidoAsegurado)
                            @Html.TextBoxFor(Function(Model) Model.SegundoApellidoAsegurado, New With {.style = "text-transform:uppercase; width:182px", .class = "letraingreso"})
                        </td>
                    </tr>
                </table>
                <table>
                    <tr>
                        <td style="border-width:0px; border-style:solid; width:58px">
                            @Html.LabelFor(Function(Model) Model.IDCiudadAsegurado)
                        </td>
                        <td style="border-width:0px; border-style:solid">
                            @Html.DropDownListFor(Function(Model) Model.IDCiudadAsegurado, Nothing, New With {.style = "width:180px; visibility:visible", .class = "letraingreso"})
                        </td>
                        <td style="width:15px"></td>

                        <td style="border-width:0px; border-style:solid">
                            @Html.LabelFor(Function(Model) Model.IDGeneroAsegurado)
                            @Html.DropDownListFor(Function(Model) Model.IDGeneroAsegurado, Nothing, New With {.style = "width:98px; visibility:visible", .class = "letraingreso"})
                        </td>
                    </tr>
                </table>
            </div>

        </div>

        <br />
        <fieldset>
            <legend>Observaciones</legend>
            @Html.LabelFor(Function(Model) Model.Observaciones)
            @Html.TextBoxFor(Function(Model) Model.Observaciones, New With {.class = "letraingreso", .style = "width:90%; text-transform:uppercase"})
        </fieldset>
    </fieldset>

    @<div style="display:none; position:absolute; margin:auto; left:0; right:0; text-align:center" id="inprogress">
        <br /><br /><br /><br /><br /><br />
        <img id="inprogress_img" src="@Url.Content("~/Images/loading.gif")" alt="Procesando..." />
        <br />
        Por favor espere mientras su solicitud es procesada...
    </div>

    @<p>
        <input type="submit" value="Guardar" id="cmdGuardar" onclick="return doSubmit()" />
    </p>

    @<div>
        @Html.ActionLink(" ", "ListarCertificadosAPG", "CertificadosLayout", New With {.area = ""}, New With {.class = "imgRegresar", .title = "Regresar"})
    </div>
End Using 
```

正如我所说，在 MVC3 中，提交按钮提升控制器：

```
<HttpPost()> _
    Function Create(<Bind(Exclude:="IDCertificado, IDAsegurado")> ByVal parCertificadoAPG As Global.iSAM.Certificados) As ActionResult 
```

todo 结束函数

但是在 MVC4 中没有触发 HttpPost。我在视图代码中的**End Using**之后放置了下一个代码（就像示例一样） ：

```
@Using Html.BeginForm()
    @<input type="submit" value="SSS" />
End Using 
```

当我按下**SSS**按钮时，它会引发 HttpPost。有人可以帮我解决或理解错误或错误在哪里吗？

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T17:51:19.720

经过一些测试，我找到了提交不提高的原因。在我的 MainLayout 上，我已经声明：

```
<script src="@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/Scripts/js")"></script> 
```

我不得不评论这条线并提交作品。但是我不知道为什么这条线使提交不起作用。

我安装了 MVC4 RC，现在我评论了这 3 行：

```
<link href="@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/Content/css")" rel="stylesheet" type="text/css" />
<link href="@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/Content/themes/base/css")" rel="stylesheet" type="text/css" />
<script src="@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/Scripts/js")"></script> 
```

我需要查看更深入的 MVC4 以了解这些行的作用。问候大家。

# haskell - 所有的 Haskell 包都相互兼容吗？

> ID：10875588
> 
> 赞同：3
> 
> 时间：2012-06-04T02:07:34.247
> 
> 标签：haskell, libraries

我看到这里列出了很多 Haskell 包：

[http://hackage.haskell.org/packages/archive/pkg-list.html#cat:database](http://hackage.haskell.org/packages/archive/pkg-list.html#cat:database)

所有这些软件包是否相互兼容？如果我为了制作一个程序而引入了 10 个包，它们都可以吗？如果我带了页面上列出的所有包裹怎么办？

想象一下，如果你在 Java 中，如果你从网络上引入 10 个 jar，那么在 Java 中，JAR 之间可能存在依赖关系，这意味着一个 JAR 需要另一个 JAR 的版本，而另一个 JAR 对不同的 JAR 来说不是一个好的版本。例如，一个 JAR 可能需要 Hibernate 3.0.0 版本，而另一个 JAR 需要 Hibernate 2.0.0。所以我不能使用这两个罐子，因为它们没有使用一个共同的相等的 Hibernate 版本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T02:37:12.943

不是，但

1.  包都声明依赖关系，包括版本范围
2.  如果您使用 cabal-install，它将尽最大努力保持一切一致。大多数时候它都做得很好。由于对旧版本的依赖，我一直无法构建软件，但我从未见过阴谋集团被愚弄的情况。如果 cabal 为您安装软件包，它就会工作；cabal 可能会为您安装软件包

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-04T03:08:11.450

您在 Haskell 中遇到了同样的问题，尽管正如指出的那样，Cabal 在以最佳方式解决依赖关系方面非常聪明。

Cabal 会很高兴地安装一个包的多个版本，但是在创建自己的包时可能会导致一个微妙的错误：你的包可能间接依赖于多个版本（Cabal 在这样做时会警告你`configure`），这有一个微妙的惊喜：当你参考间接（例如通过类型推断）到一个类型，比如 State，它可能在一个地方被解析为 mtl 1.x，在另一个地方被解析为 mtl 2.x，两者不能统一。当您使用两个包并希望将它们组合到您的代码中时，这会成为一个问题。这很少是一个问题，但值得注意。

另请注意，Haskell 包通常依赖于版本范围而不是单个版本。这意味着 Cabal 构建了已接受版本的交集并使用其中的最新版本。

# c - 为什么当我在 C 中创建双向链表时，节点中的变量数量似乎很重要？

> ID：10875590
> 
> 赞同：-1
> 
> 时间：2012-06-04T02:08:01.360
> 
> 标签：c, pointers, data-structures

我在 C 中创建了一个双向链表，在它具有三个变量作为其数据之前（在我输入 typedef int bool 之后，两个 int 和一个 bool）和两个指针 next 和 prev。我在后面插入了一个大致说的功能

```
void insert(list *l, int x, int y, bool z)
{
    node *n = makeNode(x, y, z);
    if(isEmpty(*l))
        l->head = l->tail = NULL;
    else
    {
        l->tail->next = n;
        n->prev = l->tail;
        l->tail = n;
    }
} 
```

我的 makeNode 函数说的是：

```
node *makeNode(int x, int y, bool z)
{
    node *n = malloc(sizeof(n));
    n -> x = x;
    n -> y = y;
    n -> z = z;
    n -> next = NULL;
    n -> prev = NULL;
    return n;
} 
```

所以然后我用看起来像这样的东西打印出来：

```
void printList(list l)
{
    node *i;
    for(i = list.head; i != NULL; i = i -> next)
        printf("%d %d %d\n", i -> x, i -> y, i -> z);
    printf("\n");
} 
```

那个效果很好，但后来我有了

```
void reversePrintList(list l)
{
    node *i;
    for(i = list.tail; i != NULL; i = i -> prev)
        printf("%d %d %d\n", i -> x, i -> y, i -> z);
    printf("\n");
} 
```

那一个是段错误的。在玩弄了代码之后，出于某种奇怪的原因，虽然“下一个”指针每次都保持不变，但“上一个”指针并没有指向我最初让它们指向的节点，而且显然它们没有指向 NULL任何一个。

此外，早些时候我试图将它实现为一个循环双向链表，由于某种原因，下一个指针仍然工作得很好，但上一个指针再次指向某个奇怪的地方。

但真正奇怪的是，当节点只包含一个 int 时，一切都在线性和循环双向链表上完美运行。当我进行一些语法更改以将代码转换为 C++ 时，它可以完美地与更大的节点配合使用。我看了一遍，没有我写的代码应该改变插入函数之外的 prev 指针。那么，当我在 C 中使用更大的节点时，会发生什么弄乱了 prev 指针和只有 prev 指针？

谢谢！

复仇的书呆子

PS这是我的结构

```
typedef struct node{
    int x;
    int y;
    bool z;
    struct node *next;
    struct node *prev;
} node;

typedef struct list{
    node *head;
    node *tail;
} list; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T02:16:10.803

这是什么？？？？

```
int i;
for(i = list.tail; i != NULL; i = i -> prev)
  printf("%d %d %d\n", i -> x, i -> y, i -> z);  /* WTF??? */ 
```

我会期待更多类似的东西：

```
struct mystruct {
  int value;
  struct mystruct *next;
  struct  mystruct *prev;
};
...

  struct mystruct *s;
  ...
  while (s != NULL) {
      printf("value=%d next=%x prev=%x\n", s->value, s->next, s->prev);
      ... 
```

PS：您能否发布“列表”和“节点”定义的代码？他们可能看起来很有希望......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T03:02:48.390

```
node *n = malloc(sizeof(n)); 
```

这没有任何意义。您希望分配足够的字节来保存节点，而不是指向节点的指针。尝试：

```
node *n = malloc(sizeof node); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T04:19:24.520

我注意到插入函数的 else 部分有一个小东西。在 l->tail=n 行之后，我认为你应该有
l->tail->next = NULL
这是为了将最后一个节点的 next 分配给 NULL。您的代码中似乎缺少它。

# api - 如何将带有子查询的 JPQL 转换为等效的 Criteria API？

> ID：10875591
> 
> 赞同：0
> 
> 时间：2012-06-04T02:08:03.823
> 
> 标签：api, jpa, subquery, criteria

有一个由 5 个实体组成的简单对象模型：

1.  公司
2.  组织
3.  地址
4.  俱乐部
5.  团体

![节目公司、俱乐部和团体都与组织相关联](../Images/7329843bfc6e39ea26e70c3095a87308.png) ![在此处输入图像描述](../Images/0ca6518de76fac8ecb5a7f83f42febc4.png)

公司与单个组织相关联。（组和俱乐部也与单个组织相关联——它们是单向的，这意味着该组织不包含对其所有者的引用）。一个组织可能有 0 个或多个地址。

子查询可用于根据特定邮政编码访问公司对象，邮政编码是地址的一个属性。这是一个 JPQL 查询，可以使用特定的邮政编码访问这些公司。

> @Query("select p from Company p, Organization org where (p.organization = org.id) and exists (select 1 from Address ad where zipcode = :zipcode and ad.organization = org.id)")

如何使用 JPA Criteria API 完成同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T13:13:28.110

这将使用内部连接选择提供邮政编码的公司，这是您想要的吗？

```
CriteriaBuilder cb = em.getCriteriaBuilder();
CriteriaQuery<Company> cq = cb.createQuery(Company.class);
Root<Organization> root = cq.from(Organization.class);
Join<Organization, Address> adr = root.join("addresses");
cq.select(root.get("company"));
cq.where(cb.equal(adr.get("zipcode"), zipcode)); 
```

如果公司没有属性，您将无法通过组织访问公司。如果您的公司引用了组织，那么您可以将以下代码添加到组织类中进行单向映射到双向映射：

```
@OneToOne(mappedBy="organization") //Providing the name of property in Company 
private Company company; 
```

# http - 区分跟踪 cookie 和普通 cookie

> ID：10875596
> 
> 赞同：0
> 
> 时间：2012-06-04T02:08:34.753
> 
> 标签：http, cookies

我的问题听起来很愚蠢，但我不知道如何区分两者。我正在寻找任何可能的方法来编写一个小软件来做到这一点。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T02:36:25.450

您无法从客户端的角度区分跟踪 cookie 和其他 cookie。跟踪 cookie 是由服务器完成的，而不是特定类型的 cookie。

如果您想了解有关跟踪 cookie 的更多详细信息，[维基百科](http://en.wikipedia.org/wiki/HTTP_cookie#Tracking)有很好的描述。

# javascript - JavaScript 验证

> ID：10875599
> 
> 赞同：0
> 
> 时间：2012-06-04T02:09:43.940
> 
> 标签：javascript, html

当您使用链接提交表单时如何验证表单（不是提交按钮？）

这是我用来提交表单的：

```
<a href='javascript:document.forms["send"].submit()'>Send</a> 
```

但是如何检查表单内的文本区域并仅在它不为空时才提交？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T02:13:12.493

无论表单是使用提交按钮还是 JavaScript 提交，onSubmit 事件都会触发。所以监控表单的提交事件应该是你需要做的所有事情：

首先，为您提供一个 ID 以便于访问。我将在示例中使用“myForm”：

```
document.getElementById('myForm').onSubmit = function() {
    // validate textarea
    // return false on bad data
    // return true if ok
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T02:28:41.757

通常验证函数附加到表单的 onsubmit 监听器，`false`如果表单不应该提交，则返回，例如

```
<form ... onsubmit="return validate(this);" ...> 
```

验证功能类似于：

```
function validate(form) {
  var valid = true;
  var elements = form.elements;

  for (var i=0, iLen=elements.length; i<iLen; i++) {
    // validate elements[i]
    // if any invalid, set valid to false
  }
  return validl;    
} 
```

# ios - 如何使用 RestKit 发送布尔值？

> ID：10875601
> 
> 赞同：2
> 
> 时间：2012-06-04T02:09:52.450
> 
> 标签：ios, json, core-data, restkit

我的 RestKit 应用程序在发送它的核心数据对象时失败，因为生成的 JSON 具有`1`或`0`用于布尔属性值，而不是 true 或 false。服务员不喜欢。

转换发生在`JSONKit.m`第 2723 行，代码执行如下操作：

```
if (object == (id)kCFBooleanTrue) { /*... yield "true" */ }
else if (object == (id)kCFBooleanFalse) { /*... yield "false" */ }
/* else yield integer */ 
```

比较在这里失败。我的核心数据对象显然存储了它的真实值，`[NSNumber numberWithInt:1]`而不是`[NSNumberWithBool:YES]`（我很惊讶地发现它们产生了不同的对象，尽管它们都是`1`由调试器打印的）。

请注意，我将该布尔属性设置为：

```
myManagedObject.boolFieldValue = myUISwitch.on; 
```

`boolFieldValue`MOgenerator 定义的属性在哪里，setter 是：

```
-(void) setBoolFieldValue:(BOOL)value_ {
  [self setBoolField:[NSNumber numberWithBool:value_]];
} 
```

有没有办法强制 1 值的输出为真？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T02:49:16.423

我正在开发一个基于 Restkit 的项目，我也在使用核心数据集成。我也有布尔字段，没有这样的问题。

*   对于我的 NSManagedObject，我的属性定义为 NSNumber。
*   在 Core Data 中，相应的属性被定义为 Integer16 （不记得为什么我没有选择 Boolean，但那可能是我遇到了和你一样的问题）
*   为了设置我的布尔值，我使用了类似的东西：

`[myObject setValue:[NSNumber numberWithBool:value] forKey:@"booleanAttribute"];`

# android - 动态更改 src 后保存 Android 图像状态

> ID：10875602
> 
> 赞同：2
> 
> 时间：2012-06-04T02:09:54.837
> 
> 标签：android, imageview, onrestoreinstancestate

我正在开发一个Android应用程序，我在页面上有一个imageView，onLongClick它从Image A变为Image B。但是，当他们离开页面时，imageView又回到Image A。我怎样才能保存状态（我猜它完成了onpause，stop和destroy），以便它保存ImageView的当前图像src并在下次访问和创建页面时加载它。我从来没有在Android中保存过数据..

任何简单的数据保存教程/示例将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T03:31:55.663

这些方面的东西应该可以帮助你：

```
// Use a static tag so you're never debugging typos
private static final String IMAGE_RESOURCE = "image-resource";
private int image;
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    // if there's no bundle, this is the first time; use default resource
    if (savedInstanceState == null) {
        image = R.drawable.default;
    } else {
        // if there is a bundle, use the saved image resource (if one is there)
        image = savedInstanceState.getInt(IMAGE_RESOURCE, R.drawable.default);
    }
}

@Override
public void onSaveInstanceState(Bundle outState) {
    // Make sure you save the current image resource 
    outState.putInt(IMAGE_RESOURCE, image);
    super.onSaveInstanceState(outState);
} 
```

确保在单击侦听器中更改图像变量的同时将其设置为正确的资源。

如果您想记住比这更长的状态，请查看[SharedPreferences](http://developer.android.com/guide/topics/data/data-storage.html#pref)。

# java - 在 Lucene 中搜索句子并获得匹配的术语

> ID：10875604
> 
> 赞同：1
> 
> 时间：2012-06-04T02:10:02.260
> 
> 标签：java, search, indexing, lucene, large-data

我有一个应用程序需要我索引几 GB 的句子（大约 1600 万行）。

目前我的搜索按以下方式工作。

我的搜索词通常围绕一个短语。例如“在公园里跑步”。我希望能够搜索与此类似的句子或包含这些短语的一部分。我通过构建更小的短语来做到这一点：

“在公园里跑步”等。

他们每个人都有一个重量（更长的重量越大）

目前，我将每一行视为一个文档。典型的搜索大约需要几秒钟，我想知道是否有办法提高搜索速度。

最重要的是，我还需要得到匹配的东西。

例如：“I was jogging in the park this morning”匹配“in the park”，我想知道它是如何匹配的。我知道用于 lucene 搜索的解释器，但有没有更简单的方法，或者是否有资源可以让我学习如何从 Lucene 的解释器中提取我想要的信息。

我目前正在使用正则表达式来获取匹配项。它很快但不准确，因为 lucene 有时会忽略标点符号和其他东西，我无法处理所有特殊情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T08:49:23.600

荧光笔比解释器好，它更快。您可以在突出显示标签后提取标签之间的匹配短语。 [Java正则表达式提取标签之间的文本](https://stackoverflow.com/questions/6560672/java-regex-to-extract-text-between-tags)

```
public class HighlightDemo {
Directory directory;
Analyzer analyzer;
String[] contents = {"running in the park",
        "I was jogging in the park this morning",
        "running on the road",
        "The famous New York Marathon has its final miles in Central park every year and it's easy to understand why: the park, with a variety of terrain and excellent scenery, is the ultimate runner's dream. With its many paths that range in level of difficulty, Central Park allows a runner to experience clarity and freedom in this picturesque urban oasis."};

@Before
public void setUp() throws IOException {

    directory = new RAMDirectory();
    analyzer = new WhitespaceAnalyzer();

    // indexed documents

    IndexWriter writer = new IndexWriter(directory, analyzer, IndexWriter.MaxFieldLength.UNLIMITED);
    for (int i = 0; i < contents.length; i++) {
        Document doc = new Document();
        doc.add(new Field("content", contents[i], Field.Store.NO, Field.Index.ANALYZED)); // store & index
        doc.add(new NumericField("id", Field.Store.YES, true).setIntValue(i));      // store & index
        writer.addDocument(doc);
    }
    writer.close();
}

@Test
public void test() throws IOException, ParseException, InvalidTokenOffsetsException {
    IndexSearcher s = new IndexSearcher(directory);
    QueryParser parser = new QueryParser(Version.LUCENE_36, "content", analyzer);
    org.apache.lucene.search.Query query = parser.parse("park");

    TopDocs hits = s.search(query, 10);
    SimpleHTMLFormatter htmlFormatter = new SimpleHTMLFormatter();
    Highlighter highlighter = new Highlighter(htmlFormatter, new QueryScorer(query));
    for (int i = 0; i < hits.scoreDocs.length; i++) {
        int id = hits.scoreDocs[i].doc;
        Document doc = s.doc(id);
        String text = contents[Integer.parseInt(s.doc(id).get("id"))];

        TokenStream tokenStream = analyzer.tokenStream("content", new StringReader(text));
        org.apache.lucene.search.highlight.TextFragment[] frag = highlighter.getBestTextFragments(tokenStream, text, false, 10);
        for (int j = 0; j < frag.length; j++) {
            if ((frag[j] != null) && (frag[j].getScore() > 0)) {
                assertTrue(frag[j].toString().contains("<B>"));
                assertTrue(frag[j].toString().contains("</B>"));

                System.out.println(frag[j].toString());
            }
        }

    }

}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T12:14:05.983

Lucene 的“contrib”模块[Highlighter](http://lucene.apache.org/core/3_6_0/api/contrib-highlighter/index.html)将让您提取 Lucene 匹配的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-15T12:13:49.163

SpanQueries 可能会帮助您找到查询在句子中匹配的位置： [https ://lucene.apache.org/core/6_2_0/core/org/apache/lucene/search/spans/package-summary.html](https://lucene.apache.org/core/6_2_0/core/org/apache/lucene/search/spans/package-summary.html)

使用它，您可以从查询中获得准确的位置： [How to get the matching spans of a Span Term Query in Lucene 5?](https://stackoverflow.com/questions/32385887/how-to-get-the-matching-spans-of-a-span-term-query-in-lucene-5)

# scala - 是否有任何演示来展示如何在 Scala 中使用这样的占位符？

> ID：10875606
> 
> 赞同：1
> 
> 时间：2012-06-04T02:10:25.803
> 
> 标签：scala

我在 Scala 中发现了占位符的“奇怪”用法：在[precompiler-in-scala](https://github.com/scalate/scalate/blob/c3fa76f0f06559903be5001e2cac2429bd8eacc7/scalate-core/src/main/scala/org/fusesource/scalate/support/Precompiler.scala)

```
class Precompiler {
  var sources = Array[File]()
  var workingDirectory: File = _
  var targetDirectory:File = _
  var templates = Array[String]()
  var info:{def apply(v1:String):Unit} = (value:String)=>println(value)
  var contextClass:String = _
  var bootClassName:String = _
  // ...
} 
```

这是偏函数吗？还是别的什么？是否有任何演示可以显示这样的占位符的用法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T02:31:04.527

实际上，不，这只是无聊-老`null`。来自[Scala 语言规范](http://www.scala-lang.org/docu/files/ScalaReference.pdf)：

> 变量定义 var x : T = _ 只能作为模板的成员出现。它引入了一个类型为 T 和默认初始值的可变字段。默认值取决于类型 T，如下所示：
> 
> ```
>  0        if T is Int or one of its subrange types,
>   0L       if T is Long,
>   0.0f     if T is Float,
>   0.0d     if T is Double,
>   false    if T is Boolean,
>   ()       if T is Unit,
>   null     for all other types T . 
> ```

`null`在这些情况下写可能会更清楚。我想`_`可能看起来更像 Scala-y。

# language-agnostic - reduce 的同义词综合列表

> ID：10875607
> 
> 赞同：9
> 
> 时间：2012-06-04T02:10:31.410
> 
> 标签：language-agnostic, programming-languages, functional-programming, fold

通常称为的高阶函数`reduce`在各种语言中有很多同义词。

在我的脑海中，我能想到：

*   `foldr`, `foldl`（又名右折和左折）（Haskell）
*   `inject`（Smalltalk、Ruby、Groovy）
*   `Aggregate`(LINQ)
*   `accumulate`（[维基百科](http://en.wikipedia.org/wiki/Fold_%28higher-order_function%29)）
*   `compress`（[维基百科](http://en.wikipedia.org/wiki/Fold_%28higher-order_function%29)）

是否有该函数所有不同名称的完整列表？如果没有，让我们在这里做一个。知道会很有用。

我对从每种语言中获取库函数名称不太感兴趣，我正在寻找更多的口语，“它如何在句子中使用”类型参考。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T02:17:57.477

您可能会注意到，一般来说，这个概念被称为*catamorphism*。 [来自 wikipedia](http://en.wikipedia.org/wiki/Catamorphism)，或者还有可爱的文章[使用香蕉、镜头、信封和铁丝网进行函数式编程](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.41.125)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-06T18:12:13.750

好吧，到目前为止，总清单似乎是：

*   `catamorphism`（通用术语，[见 Kristopher 的帖子](https://stackoverflow.com/a/10875647/224354)）
*   `reduce`（Python、Clojure、Common Lisp、Ruby）
*   `reduction`(APL)
*   `foldr`, `foldl`（又名右折和左折）（Haskell，Scheme）
*   `inject`（Smalltalk、Ruby、Groovy）
*   `#inject:into`（短暂聊天）
*   `Aggregate`(LINQ)
*   `accumulate`（[维基百科](http://en.wikipedia.org/wiki/Fold_(higher-order_function))）
*   `compress`（[维基百科](http://en.wikipedia.org/wiki/Fold_(higher-order_function))）
*   `insertion`(FP)
*   `Insert`(J)

感谢大家的帮助，如果以后有人提供更好的列表，我将确保接受该列表！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-04T12:38:22.843

来自《[关于 fold 的普遍性和表现力的教程](http://www.cs.nott.ac.uk/~gmh/fold.pdf)》：

> 折叠运算符起源于递归理论 (Kleene, 1952)，而在编程语言中使用折叠作为中心概念可以追溯到 APL 的**归约**运算符 (Iverson, 1962)，然后是 FP的**插入**运算符（[巴克斯，1978 年](http://www.cs.cmu.edu/~crary/819-f09/Backus78.pdf)）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-09T09:59:19.657

Scala 称它们为`foldLeft`和`foldRight`. 它们也由符号`/:`和表示`:\`。

这些有一些不带种子的变体。它们被称为`reduceLeft`和`reduceRight`。还有一些变体`reduce*`不会在空序列上引发错误。它们被称为`reduceLeftOption`和`reduceRightOption`。

有一些变体，无论哪种方式，遍历的方向都无关紧要。它们被称为`fold`and `reduce`; 第一个有种子，第二个没有。

我本可以把它放在一张漂亮的桌子上。可惜stackoverflow不允许这样做。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-04T02:12:26.720

还有几个：

*   `foldr, foldl`（方案）
*   `reduce`（Python、Clojure、Common Lisp）
*   `#inject:into:`（短暂聊天）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-14T14:16:36.443

另一个

*   foldl'（Haskell，类似于 foldl，但适用于更长的列表）

（希望你的反讽检测器已经打开......）

# c# - Sqlite + c#：无法打开数据库文件

> ID：10875612
> 
> 赞同：11
> 
> 时间：2012-06-04T02:12:09.127
> 
> 标签：c#, sqlite, connection

```
private void SetConnection()
{
     string a = string.Format(@"Data Source={0};Version=3;New=False;Compress=True;", "~/lodeDb.db");
     sql_con = new SQLiteConnection(a);
}

private void ExecuteQuery(string txtQuery)
{
     SetConnection();
     sql_con.Open();
     sql_cmd = sql_con.CreateCommand();
     sql_cmd.CommandText = txtQuery;
     sql_cmd.ExecuteNonQuery();
     sql_con.Close();
} 
```

当我运行到 sql_cmd.ExecuteNonQuery 时，Sqlexception 是“无法打开数据库文件”。我的在线主机上的“lodeDb.db”文件，我认为数据源是错误的。你能告诉我在线托管中是否有 db 文件吗？如何设置数据源进行连接谢谢注意：权限文件在这里没有问题

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2014-03-11T14:09:04.007

我在尝试打开网络驱动器上的数据库时遇到了同样的异常（路径以“\\myServer\myDbFile ...”开头），我通过将参数放入连接构造函数中`true`来解决它。`parseViaFramework`

```
sql_con = new SQLiteConnection(a, true); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-04T02:16:37.020

这是一个连接字符串问题，

**SQL Lite 连接字符串格式**

基本的 ：

```
Data Source=filename;Version=3; 
```

使用 UTF16 ：

```
Data Source=filename;Version=3;UseUTF16Encoding=True; 
```

带密码：

```
Data Source=filename;Version=3;Password=myPassword; 
```

使用 3.3x 之前的数据库格式：

```
Data Source=filename;Version=3;Legacy Format=True; 
```

使用连接池：

```
Data Source=filename;Version=3;Pooling=False;Max Pool Size=100; 
```

只读连接：

```
Data Source=filename;Version=3;Read Only=True; 
```

* * *

**编辑 1：**
连接到远程数据库不同，您必须检查以下内容。

1.  防火墙端口许可。
2.  公司/主机提供数据库允许远程连接。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-11T13:57:10.240

My problem is solved when add "Journal Mode=Off;" in connection string

Disable the Journal File This one disables the rollback journal entirely.

Data Source=c:\mydb.db;Version=3;Journal Mode=Off;

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-16T10:02:38.930

我遇到了同样的问题，并使用如下查询字符串修复了它：@"Data Source=C:\ProgramData\proj\lodeDb.db;Version=3;FailIfMissing=False"

我的意思是，当我使用完整路径作为数据库文件的位置时，它可以工作，当我使用“~/lodeDb.db”时，它不起作用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-09T11:19:24.440

这个解决方案对我有用：

```
var index = dialog.FileName.IndexOf('\\'); example: "C:\TEST.DB"
if (0 != index) {
    Models.Context.CreateDatabase(dialog.FileName);
    OpenProject(dialog.FileName);
}
else //example: "\\Ceng\Share\MyPC"
{
    var path = dialog.FileName.Replace('\\', '/');
    Models.Context.CreateDatabase(path);
    OpenProject(path);
} 
```

# php - Php 执行 Shell 命令并输入密码

> ID：10875623
> 
> 赞同：0
> 
> 时间：2012-06-04T02:14:06.123
> 
> 标签：php, shell-exec

我正在尝试从 php 页面以 root 身份运行命令，有没有办法运行 shell_exec( `su - root -c 'apt-get update'`)（例如）并将密码传递给 shell？或者是否有另一种方法可以从 php 运行 root 命令并将密码传递给命令。

我不希望执行以下操作：

```
edit the /etc/sudoers file;
install the ssh2 php extension; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T07:44:17.760

`setuid`您可以为要运行的命令创建一个包装器，然后执行该包装器：

```
echo '#!/bin/bash' > /path/to/wrapper.sh
echo 'apt-get update' >> /path/to/wrapper.sh
chown root /path/to/wrapper.sh
chmod a+x,u+s /path/to/wrapper.sh 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T02:45:42.523

使用了一个完全基于 PHP 的 SSH 实现，称为[phpseclib](http://phpseclib.sourceforge.net/)。

这样用户就不必安装像 ssh2 这样的 php 扩展，只需下载文件并将它们包含在您的脚本中。然后您可以将密码通过管道传递给命令，如下所示：

```
set_include_path(get_include_path() . PATH_SEPARATOR . 'phpseclib');
include('Net/SSH2.php');

 $ssh = new Net_SSH2('localhost');
 if (!$ssh->login('root', $password)) {
     exit('Login Failed');
  }

 echo $ssh->exec('whoami'); 
```

此 php 代码将返回值“root”。您此时运行的任何命令都将以 root 身份运行。

# mysql - 从表 1 和表 2 中选择的 SQL 查询？

> ID：10875626
> 
> 赞同：1
> 
> 时间：2012-06-04T02:14:31.403
> 
> 标签：mysql, sql

我正在努力寻找我想要运行的查询的答案。我想要

```
SELECT * FROM users AND tempusers WHERE username='joe' 
```

两个表都有一个名为 username 的列。我不断遇到 SQL 1064 语法错误，这对我没有多大帮助。

数据库结构：

**数据库名称**：mydb

**表**：用户 **列**：id、用户名、电子邮件、密码。

**表**：临时 用户**列**：id、用户名、电子邮件、密码、激活码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T02:17:50.060

你得到的错误是因为你不能选择 from `table1 AND table2`; 这通常不是有效的 SQL 语法。（我说“通常”是因为 MySQL 有一些大多数其他数据库不使用的专有语法。）

a 似乎`JOIN`不会起作用，因为您没有描述表之间的那种关系。

如果两个表具有完全相同的结构（列名和类型以及相同的列数），这应该可以工作：

```
SELECT * FROM users WHERE username = 'joe'
UNION ALL
SELECT * FROM tempusers WHERE username = 'joe' 
```

如果表没有相同的确切架构，您必须至少在第一个表中命名列`SELECT`：

```
SELECT 
  username, id, username, email, password, '' as activationcode
FROM 
  users 
WHERE 
  username = 'joe'
UNION ALL
SELECT 
  username, id, username, email, password, activationcode
FROM 
  tempusers
WHERE 
  username = 'joe' 
```

`''`您可能必须在第一个选择中提供空格来代替，或者如果它不是字符列（例如，对于整数列） ，则为`activationcode`该列使用正确类型的值。`activationcode``0`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T03:08:44.300

这可能会解决错误并帮助您思考错误发生的原因：

```
SELECT * 
FROM   users, tempusers 
WHERE  users.username='joe' 
       or tempusers.username='joe' 
```

*但是*- 我强烈建议在这里使用正确的连接。这个查询会很慢，而且很麻烦。Ken White 的回答很成功（绝对应该被接受）——我发布这个只是为了帮助您更清楚地理解初始错误（dbms 无法区分您指的是哪个表的用户名列并且可以） t 在一个陈述中同时提及两者）。

# android - Android将帧动画添加到加载屏幕

> ID：10875630
> 
> 赞同：0
> 
> 时间：2012-06-04T02:15:15.037
> 
> 标签：android, animation, screen, loading, frame

我有一个加载屏幕，它在 5 秒后关闭，然后应用程序启动。在加载屏幕期间，我希望在背景加载屏幕图像之上运行逐帧动画。这是一个简单的概念，之前已经被许多应用程序使用过，我只是不知道该怎么做，因为我是 android 新手并且一起编程。下面是 splash.java 屏幕的代码，我将把代码包含在 frenchsilk.java 类中，这样您就可以在没有任何其他代码的情况下看到动画是如何工作的。（是的，动画本身就已经开始工作了）。

飞溅.java

```
import android.app.Activity;
import android.content.Intent;
import android.media.MediaPlayer;
import android.os.Bundle;

public class Splash extends Activity {

    MediaPlayer ourSong;

@Override
protected void onCreate(Bundle PieLovesPie) {
    // TODO Auto-generated method stub
    super.onCreate(PieLovesPie);
    setContentView(R.layout.splash);
    ourSong = MediaPlayer.create(Splash.this, R.raw.sound2);
    ourSong.start();
    Thread timer = new Thread(){
        public void run(){
            try{
                      sleep(4800);

            } catch (InterruptedException e){
                e.printStackTrace();
            }finally{
    *I shortened these*     Intent open"appname" = new Intent"packageNameCode"
    *2 lines for space resonse* startActivity(open"appname");
            }
        }
    };
    timer.start();
}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    ourSong.release();
    finish();

}

} 
```

法国丝绸.java

```
import android.app.Activity;
import android.graphics.drawable.AnimationDrawable;
import android.os.Bundle;
import android.widget.ImageView;

public class FrenchSilk extends Activity {
/** Called when the activity is first created. */

AnimationDrawable mainanimation; 

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.frenchsilk);

    ImageView mainimage = (ImageView) findViewById(R.id.MainAnim); 
    mainimage.setBackgroundResource(R.anim.mainanim); 
    mainanimation = (AnimationDrawable) mainimage.getBackground(); 
//        mainanimation.start();  
}
public void onWindowFocusChanged (boolean hasFocus)  
{ 
    super.onWindowFocusChanged(hasFocus); 
//        AnimationDrawable frameAnimation = (AnimationDrawable) mainimage.getBackground(); 
//        if(hasFocus) { 
        mainanimation.start(); 
//        } else { 
//            mainanimation.stop(); 
//        } 
    } 
} 
```

*我用**注释了一些东西（和 // 在实际的编码过程中），因为它弄乱了代码行间距。我在想睡下（4800）；一个类或其他东西可能会去那里告诉动画开始或其他东西的行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:12:25.913

好的，所以我自己想通了。只需将代码放入受人尊敬的位置，并且 onWindow 在主 java 文件的底部发生了更改。

# python - 具有意外结果的 Python 数字列表排列

> ID：10875636
> 
> 赞同：1
> 
> 时间：2012-06-04T02:16:09.333
> 
> 标签：python, list, permutation

我正在尝试获取包含 0-9 的数字列表并返回列表的所有排列。我想出了两个不同的函数，它们在一定程度上返回了预期的结果，但这都不是我的目标。这是一个返回一个周期的正确结果的方法：

```
x = [0,1,2,3,4,5,6,7,8,9]

def test(x):
  place_holder = 9
  count = 9
  print x
  while count > 1:
    old_x = x[count]
    x[count] = x[count-1]
    x[count-1] = old_x
    count -= 1
    print x
    if count == 1:
      x.sort()
      place_holder -= 1
      count = place_holder 
```

回报：

```
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
[0, 1, 2, 3, 4, 5, 6, 7, 9, 8]
[0, 1, 2, 3, 4, 5, 6, 9, 7, 8]
[0, 1, 2, 3, 4, 5, 9, 6, 7, 8]
[0, 1, 2, 3, 4, 9, 5, 6, 7, 8]
[0, 1, 2, 3, 9, 4, 5, 6, 7, 8]
[0, 1, 2, 9, 3, 4, 5, 6, 7, 8]
[0, 1, 9, 2, 3, 4, 5, 6, 7, 8]
[0, 9, 1, 2, 3, 4, 5, 6, 7, 8]
[0, 1, 2, 3, 4, 5, 6, 8, 7, 9]
[0, 1, 2, 3, 4, 5, 8, 6, 7, 9]
[0, 1, 2, 3, 4, 8, 5, 6, 7, 9]
[0, 1, 2, 3, 8, 4, 5, 6, 7, 9]
[0, 1, 2, 8, 3, 4, 5, 6, 7, 9]
[0, 1, 8, 2, 3, 4, 5, 6, 7, 9]
[0, 8, 1, 2, 3, 4, 5, 6, 7, 9]
[0, 1, 2, 3, 4, 5, 7, 6, 8, 9]
[0, 1, 2, 3, 4, 7, 5, 6, 8, 9]
[0, 1, 2, 3, 7, 4, 5, 6, 8, 9]
[0, 1, 2, 7, 3, 4, 5, 6, 8, 9]
[0, 1, 7, 2, 3, 4, 5, 6, 8, 9]
[0, 7, 1, 2, 3, 4, 5, 6, 8, 9]
[0, 1, 2, 3, 4, 6, 5, 7, 8, 9]
[0, 1, 2, 3, 6, 4, 5, 7, 8, 9]
[0, 1, 2, 6, 3, 4, 5, 7, 8, 9]
[0, 1, 6, 2, 3, 4, 5, 7, 8, 9]
[0, 6, 1, 2, 3, 4, 5, 7, 8, 9]
[0, 1, 2, 3, 5, 4, 6, 7, 8, 9]
[0, 1, 2, 5, 3, 4, 6, 7, 8, 9]
[0, 1, 5, 2, 3, 4, 6, 7, 8, 9]
[0, 5, 1, 2, 3, 4, 6, 7, 8, 9]
[0, 1, 2, 4, 3, 5, 6, 7, 8, 9]
[0, 1, 4, 2, 3, 5, 6, 7, 8, 9]
[0, 4, 1, 2, 3, 5, 6, 7, 8, 9]
[0, 1, 3, 2, 4, 5, 6, 7, 8, 9]
[0, 3, 1, 2, 4, 5, 6, 7, 8, 9]
[0, 2, 1, 3, 4, 5, 6, 7, 8, 9] 
```

虽然当我在排列中使用另一个列表时，它会产生意想不到的结果：

```
x = [1,0,2,3,4,5,6,7,8,9]

[1, 0, 2, 3, 4, 5, 6, 7, 8, 9]
[1, 0, 2, 3, 4, 5, 6, 7, 9, 8]
[1, 0, 2, 3, 4, 5, 6, 9, 7, 8]
[1, 0, 2, 3, 4, 5, 9, 6, 7, 8]
[1, 0, 2, 3, 4, 9, 5, 6, 7, 8]
[1, 0, 2, 3, 9, 4, 5, 6, 7, 8]
[1, 0, 2, 9, 3, 4, 5, 6, 7, 8]
[1, 0, 9, 2, 3, 4, 5, 6, 7, 8]
[1, 9, 0, 2, 3, 4, 5, 6, 7, 8]
[0, 1, 2, 3, 4, 5, 6, 8, 7, 9]
[0, 1, 2, 3, 4, 5, 8, 6, 7, 9]
[0, 1, 2, 3, 4, 8, 5, 6, 7, 9]
[0, 1, 2, 3, 8, 4, 5, 6, 7, 9]
[0, 1, 2, 8, 3, 4, 5, 6, 7, 9]
[0, 1, 8, 2, 3, 4, 5, 6, 7, 9]
[0, 8, 1, 2, 3, 4, 5, 6, 7, 9]
[0, 1, 2, 3, 4, 5, 7, 6, 8, 9]
[0, 1, 2, 3, 4, 7, 5, 6, 8, 9]
[0, 1, 2, 3, 7, 4, 5, 6, 8, 9]
[0, 1, 2, 7, 3, 4, 5, 6, 8, 9]
[0, 1, 7, 2, 3, 4, 5, 6, 8, 9]
[0, 7, 1, 2, 3, 4, 5, 6, 8, 9]
[0, 1, 2, 3, 4, 6, 5, 7, 8, 9]
[0, 1, 2, 3, 6, 4, 5, 7, 8, 9]
[0, 1, 2, 6, 3, 4, 5, 7, 8, 9]
[0, 1, 6, 2, 3, 4, 5, 7, 8, 9]
[0, 6, 1, 2, 3, 4, 5, 7, 8, 9]
[0, 1, 2, 3, 5, 4, 6, 7, 8, 9]
[0, 1, 2, 5, 3, 4, 6, 7, 8, 9]
[0, 1, 5, 2, 3, 4, 6, 7, 8, 9]
[0, 5, 1, 2, 3, 4, 6, 7, 8, 9]
[0, 1, 2, 4, 3, 5, 6, 7, 8, 9]
[0, 1, 4, 2, 3, 5, 6, 7, 8, 9]
[0, 4, 1, 2, 3, 5, 6, 7, 8, 9]
[0, 1, 3, 2, 4, 5, 6, 7, 8, 9]
[0, 3, 1, 2, 4, 5, 6, 7, 8, 9]
[0, 2, 1, 3, 4, 5, 6, 7, 8, 9] 
```

它正确地通过九个周期然后回到0-9。所以我可以看到这是因为 x.sort() 调用。所以我把这个函数改成这样：

```
def exp_test(x):
  static = []
  for i in x:
    static.append(i)
  place_holder = 9
  count = 9
  print x
  while count > 1:
    old_x = x[count]
    x[count] = x[count-1]
    x[count-1] = old_x
    count -= 1
    print x
    if count == 1:
      x = static
      place_holder -= 1
      count = place_holder 
```

现在这工作正常，直到七的转变，它去到每隔一个数字。我想计数搞混了，但是，我通过并没有看到它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T02:25:16.967

尝试`x = static`在最后一条`if`语句中修改为`x = static[:]`. 问题是您只是将名称重新绑定到绑定`x`到的同一个列表`static`。您真的想复制`static`绑定的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T02:22:11.820

最好的解决方案是

```
from itertools import permutations 
```

但如果你必须自己写，通常的解决方案是递归的：

```
def permutations(seq):
    _len = len(seq)
    if _len:
        if _len==1:
            yield seq
        else:
            for p in permutations(seq[1:]):
                for i in range(_len):
                    yield p[:i] + seq[0:1] + p[i:] 
```

**编辑：**嗯，欧拉问题需要完全不同的方法......诀窍不是生成所有排列到 1,000,000（这太慢），而是计算第百万个排列必须是什么。有n！排列 n 项的方法 - 您可以在序列的尾部递归地使用它来计算必须重新排列多少子序列才能达到第 100 万个排列，并从中计算出必须是什么排列。

你需要写一些更像

```
def nth_arrangement(seq, n):
    # you have to figure this bit out! 
```

# php - 获取日期的数字

> ID：10875641
> 
> 赞同：1
> 
> 时间：2012-06-04T02:16:50.207
> 
> 标签：php, filemaker

我在 filemaker 中有一个函数 GetAsNumber(date)。例如：`GetAsNumber(10/10/2008) returns 733325.` 我需要用 PHP 编写函数 GetAsNumber。但是在 php 中使用函数 mktime() 我不能用同一个文件生成器来做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T02:39:48.287

奇怪的功能，但这似乎可以解决问题：

```
function getasnumber($date)
{
    $dt_date = new DateTime($date);
    $dt_start = new DateTime('1/0/0001');
    return $dt_date->diff($dt_start)->days;
}

var_dump(getasnumber('10/10/2008')); // 733325
var_dump(getasnumber('10/10/2014')); // 735516 
```

[根据您提供的第一个日期和其他文档](http://www.filemaker.com/12help/html/func_ref3.33.56.html)，返回值似乎是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T03:25:10.447

此功能似乎与 FileMaker 的`GetAsNumber`功能相同：

```
function GetAsNumber($str) {
    static $DATE_OFFSET = 719163;  // adjust because PHP is from 1980 and Filemaker from 0001
    static $SECONDS_IN_DAYS = 86400;  // get only days from date

    if (preg_match('/^(\\d{2})[-\\/\\.](\\d{2})[-\\/\\.](\\d{2}|\\d{4})$/', trim($str), $matches)) {
        $val = intval(strtotime("{$matches[1]}-{$matches[2]}-{$matches[3]}") / $SECONDS_IN_DAYS) + $DATE_OFFSET;
    } else {
        $val = floatval(preg_replace('/[^\\d\\.]/', '', $str));
    }

    return $val;
} 
```

用这些值测试：

```
echo GetAsNumber("FY98") . ' == 98' . PHP_EOL;
echo GetAsNumber("$1,254.50") . ' == 1254.5' . PHP_EOL;
echo GetAsNumber("2 + 2") . ' == 22' . PHP_EOL;
echo GetAsNumber("TKV35FRG6HH84") . ' == 35684' . PHP_EOL;
echo GetAsNumber("10/10/2014") . ' == 735516' . PHP_EOL;
echo GetAsNumber("10/10/2008") . ' == 733325' . PHP_EOL; 
```

# xml - 是否有将 Emma XML 报告转换为 Cobertura XML 格式的工具？

> ID：10875642
> 
> 赞同：11
> 
> 时间：2012-06-04T02:17:10.723
> 
> 标签：xml, code-coverage, cobertura, emma, gcov

我使用的代码覆盖工具只能生成 Emma XML 报告，而我需要的是 Cobertura 或 gcov 格式。是否已经存在一些用于进行转换的工具？如果没有，恐怕我必须自己做。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-11-18T10:51:16.280

[为此目的创建了cover2cover](https://github.com/rix0rrr/cover2cover)。

# c# - 创建自定义参数选择

> ID：10875644
> 
> 赞同：0
> 
> 时间：2012-06-04T02:17:27.943
> 
> 标签：c#, parameters

我有一个方法需要一个参数来区分几个不同的场景。我可以只传递一个字符串，并希望我（或将来使用该类的任何人）将使用一个公认的命令。我宁愿有这样的构造：

方法声明：

```
myMethod(myOption opt){ ... } 
```

并且调用应该如下所示：

```
myMethod(myOption.option1); 
```

在方法中我应该能够做到这一点：

```
if (opt == myOption.option1){ ... } 
```

当我传递按钮或图标配置时，我相信这就是消息框的工作方式。

我已经尝试了很多并且搜索了很多，但我没有找到任何东西。也许那是因为我没有找到正确的关键字组合来提供给谷歌。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T02:19:25.460

如果您有一组有限的可用参数，那么枚举可能是您的方法最合适的参数类型。因此，创建一个枚举作为参数传递；

```
public enum MyOption
{
    Option1,
    Option2,
    Option3,
}

public void MyMethod(MyOption option)
{
    switch (option)
    {
        case MyOption.Option1:
            // do stuff
            return;
        case MyOption.Option2:
            // do stuff
            return;
        case MyOption.Option3:
            // do stuff
            return;
    }
} 
```

# ios5 - 如何从 UIPickerView 单元格创建 segue

> ID：10875646
> 
> 赞同：0
> 
> 时间：2012-06-04T02:17:53.457
> 
> 标签：ios5, uistoryboardsegue

我从 CoreData 创建了一个用于显示用户的选择器，但我希望第一个选项是创建一个用户，这样即使没有用户，选择器也可以使用。

我正在为我的程序使用情节提要，并且我想从第一个单元格到新的 UIView 进行转场。

我发现了两个没有答案的相关问题，所以我认为这个问题没有简单的解决方案，如果有更正确的方法会很棒，因为我可能只是创建一个新按钮来创建用户，但这似乎是一个糟糕的设计。

[https://stackoverflow.com/questions/9936130/how-to-use-storyboard-segue-from-a-table-cell-to-self-view-controller-and-others](https://stackoverflow.com/questions/9936130/how-to-use-storyboard-segue-from-a-table-cell-to-self-view-controller-and-others)

[https://stackoverflow.com/questions/9936130/how-to-use-storyboard-segue-from-a-table-cell-to-self-view-controller-and-others](https://stackoverflow.com/questions/9936130/how-to-use-storyboard-segue-from-a-table-cell-to-self-view-controller-and-others)

# java - 如何将字符串写入输出流

> ID：10875649
> 
> 赞同：12
> 
> 时间：2012-06-04T02:18:32.003
> 
> 标签：java, string, outputstream

如何创建一个实现`OutputStream`并将内容写入其中的类？

例如下面的打印方法是错误的，不会编译。有哪些选择或更好的技术？

```
public class FooBarPrinter{
    private OutputStream o;
    public FooBarPrinter(OutputStream o){
        this.o=o;
    }

    public void print(String s){        
        o.write(s);
    }
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-04T02:21:51.657

泛型`OutputStream`无法`String`直接向其写入 a 。相反，您需要获取`byte[]`of `String`，然后将它们写出到流中。

```
public void print(String s){ 
    o.write(s.getBytes());
} 
```

有关支持的写入数据类型的更多信息，请参阅[OutputStream](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/OutputStream.html) java 文档。

我的建议是确保`OutputStream`您在构造函数中提供的是 a `BufferedOutputStream`，因为这将提高代码的性能。它的工作原理是缓冲内存中的一些数据，并将其以大块的形式写入磁盘，而不是许多较小的写入。

这是[BufferedOutputStream的 java 文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/BufferedOutputStream.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-04T03:15:51.483

我认为其他答案缺少重要的一点/问题。

> 你真的应该使用 OutputStream 吗？

和类层次结构用于写入`OutputStream`和`InputStream`读取面向字节的数据。但是 Java 字符串不是面向字节的。它们是面向字符的（初步近似），Java 中的字符是 16 位 Unicode 代码单元。

当您将字符写入字节流时，JVM 必须进行转换以将字符*编码*为字节。事实上，有很多可能的方法可以做到这一点。例如，UTF-8 将序列中的每个字符编码为一个*或多个*字节，Latin-1 或 ASCII 将字符*子集*编码为单个字节，并将其他字符（可能）变成问号。等等。

现在，可以这样写：

```
 public void print(String s){ 
      o.write(s.getBytes());
  } 
```

但它有一个问题。问题是 a 上的`getBytes()`方法`String`使用 JVM 的默认字符编码方案进行转换。这（默认编码方案）取决于启动 JVM 的环境。因此，该代码根据环境执行不同的操作。现在您可以通过指定字符集来解决这个问题：

```
 public void print(String s){ 
      o.write(s.getBytes("UTF-8"));
  } 
```

但是如果你在很多地方调用 getBytes 就会变得很麻烦。

如果您正在执行大量基于文本的输出，更好的主意是使用`Writer`API 而不是`OutputStream`API。`Writer`API 及其实现在后台处理转换......并且更加一致和有效。

最后一点是，还有其他 API 可以帮助进行基于文本的输出。

*   该类`BufferedWriter`（以及`BufferedOutputStream`）通过在输出过程中引入内存缓冲来支持高效输出。这可以节省系统调用，尤其是在您执行大量小型写入操作时。
*   该类`PrintWriter`提供了很多方便的方法，并且还消除了处理 IOExceptions 的需要。（如果发生 IOException，则会`PrintWriter`记录下来。有一种方法可以测试是否发生了异常。这可能有用也可能很危险，具体取决于您在做什么......）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T02:26:15.220

要写出字符串，请查看[`PrintStream`](http://docs.oracle.com/javase/6/docs/api/java/io/PrintStream.html)该类。[您可以在此处](https://github.com/codecrafter/orders/blob/master/src/main/java/codecrafter/orders/SimpleReceipt.java)看到一个执行您想要的类的示例。

`OutputStream`此外，您可以使用[以下`PrintStream`构造函数](http://docs.oracle.com/javase/6/docs/api/java/io/PrintStream.html#PrintStream%28java.io.OutputStream%29)之一包装一个：

```
public class FooBarPrinter{
  private PrintStream p;
  public FooBarPrinter(OutputStream o){
    p = new PrintStream(o);
  }
  public void print(String s){      
    p.print(s);
  }
} 
```

**编辑**：请注意，您也可以[`PrintWriter`](http://docs.oracle.com/javase/6/docs/api/java/io/PrintWriter.html)以与上述相同的方式使用该类`PrintStream`；这通常更好，因为您可以指定要使用的编码，避免任何平台依赖性。

# ruby-on-rails - 什么是解析 RSS 提要的好 Rails 3 gem？

> ID：10875651
> 
> 赞同：1
> 
> 时间：2012-06-04T02:18:58.843
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rss, feed

我偶然发现了[Feedzirra](https://github.com/pauldix/feedzirra)，但它似乎不是 Rails gem，而只是 Ruby gem。

有谁知道仍然支持 Rails 3 的任何好东西？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T02:25:18.427

我不认为有任何特定于 Rails 的提要解析的宝石......我建议只检查[Ruby Toolbox](https://www.ruby-toolbox.com/categories/feed_parsing)以了解哪些是常见的和可用的。

如果你最终选择了 Feedzirra，这里有一个[Railscast](http://railscasts.com/episodes/168-feed-parsing)。有点旧，但它仍然可以在 Rails 3 中使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-01T05:31:34.027

我现在面临一个类似的问题。我要和这个宝石一起去：[https ://github.com/cardmagic/simple-rss](https://github.com/cardmagic/simple-rss)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-21T09:52:49.483

我们创建了一个[Rails 引擎](http://blog.superfeedr.com/consuming-rss-feeds-rails/)来通过 Superfeedr 使用 RSS 提要。它允许您订阅、取消订阅、从提要中检索过去的内容，并代表您处理新内容的通知。

你可以[从那里得到这颗宝石](https://rubygems.org/gems/superfeedr_engine)。

# javascript - JavaScript - 无法在函数中传递参数

> ID：10875657
> 
> 赞同：1
> 
> 时间：2012-06-04T02:19:32.667
> 
> 标签：javascript, html, parameters

我正在尝试在我的 JavaScript 代码中运行一个函数。我正在尝试创建两个数组，一个包含阿拉伯语单词，一个包含英语翻译单词，其中每个数组中的相应单词具有相同的索引。该功能的目的是让我可以同时添加一个阿拉伯语单词及其翻译。

该函数在我调用它时没有运行，并且我已经确定我在函数中传递参数的事实是导致它无法运行的原因。为什么会发生这种情况，我怎样才能让该功能运行？该脚本位于`<body>`HTML 中。

这是我的代码：

```
var arabic = [];
var english = [];    
function addToArrays(arabic, english) {
    arabic.push(arabic);
    english.push(english);
}
addToArrays("string1", "string2"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T02:23:12.567

您的参数名称将覆盖您的数组。所以你需要做的是重命名你的参数。像这样的东西应该工作。

```
var arabic = [];
var english = [];

function addToArrays(a, e) {
  arabic.push(a);
  english.push(e);
}

addToArrays("string1", "string2"); 
```

# c - C程序中的Linux POSIX在取消线程中失败

> ID：10875658
> 
> 赞同：0
> 
> 时间：2012-06-04T02:19:53.793
> 
> 标签：c, linux, pthreads, posix, cancellation

我正在编写一个程序，它读取不同线程中的部分数据，然后在其中找到一个模式。

但在此之前（问题出现在下面的代码中）我只是想检查线程是否正确取消。这就是我卡住的地方。看到错误需要时间，但基本上在（有时 40 次）启动我的程序之后，它会挂在主线程的 while 循环中

```
while (alive_threads) { //never ends, because alive_threads==1, but pthread_cleanup_pop should make sure that all canceling threads reduces counter and as a result reduce it to 0
 usleep(1000);
} 
```

...等待最后一个线程取消。

代码在这里： http: [//pastebin.com/VqRrhXPD](http://pastebin.com/VqRrhXPD)

我还提供了我正在读取的文件的内容。

开幕：

```
./a.out 20 test.txt 40 clean

20 -number of threads

40 -portion of data 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T02:30:23.417

您正在修改全局变量`alive_threads`而没有任何内存同步。这会调用未定义的行为；很可能，它会导致一些减量丢失。

# ruby-on-rails-3 - 将应用程序移植到 Rails 3 时，我不知道 Rails 2 的路线

> ID：10875659
> 
> 赞同：1
> 
> 时间：2012-06-04T02:19:54.203
> 
> 标签：ruby-on-rails-3, routes, rails-3-upgrade

我似乎无法弄清楚如何将这条特定的路线从 Rails 2 移植到 3：

```
map.resources :webservices, :new => { :push_data => :post, :reset_url => :post } 
```

相关的馅饼在这里：[http ://pastie.org/4022761](http://pastie.org/4022761)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:34:56.623

好的，我明白你在做什么。
您需要像这样更新您的 routes.rb 文件：

```
resources :webservices do 
    post :push_data, :on => :new
    post :reset_url, :on => :new
end 
```

我对我在一个名为 Notes 的项目中的模型做了这个，当我调用 rake 路由时，它给了我这个：

```
push_data_new_note POST   /notes/new/push_data(.:format)        notes#push_data
reset_url_new_note POST   /notes/new/reset_url(.:format)        notes#reset_url
new_note           GET    /notes/new(.:format)                  notes#new 
```

这应该可以解决您遇到的路线问题。让我知道这对你有什么影响。

# database - 将数据存储在数据库中是否有效？

> ID：10875663
> 
> 赞同：0
> 
> 时间：2012-06-04T02:20:55.570
> 
> 标签：database

我在一家小公司找到了一份工作。我正在更新现有项目。

在数据库中，所有数据都包含在 JSON 格式中。它看起来像这样。

```
{"app_ip":"192.168.1.36","app_edate":"1319690682","app_region":"English","app_uuid":"c404a51da152938861ffb215550425cb6f8c12bd","app_id":"com.byto.neokhan","app_ip_3g":"10.169.244.113","app_platform":"iPhone","app_sdate":"1319690542","app_osinfo":"iPhone OS 4.3.5","app_ver":"1.2"} 
```

我相信这在某种程度上不是存储数据的好方法。我只是想知道这是否不是问题。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T02:24:51.040

这取决于。如果将所有数据一起使用，则可以轻松提取一次并使用它。

然而，关于数据库的优点之一是对其进行排序——如果你把它分成表格和列，你可以很容易地找到 iPhone 客户端上的人数。或者查身份证。通常你会想要这些东西，所以在这种情况下是的——它没有有效地利用数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T04:54:47.720

以这种格式存储数据会破坏使用数据库的目的。数据库“是有组织的数据集合”。所以你的答案就在数据库的定义中。正如@Raeki 告诉你应该使用适当的表格。

# c# - 在 XNA 中依次显示列表中的名称

> ID：10875665
> 
> 赞同：2
> 
> 时间：2012-06-04T02:22:05.330
> 
> 标签：c#, list, loops, for-loop, foreach

我不太确定如何解释这一点，但希望你明白我的意思。

目前我正在尝试从我的数据库中提取所有用户名并放入列表中，它可以工作，然后我尝试提取我放入列表中的所有名称，然后将其显示在屏幕上，但是我不能让这个工作。

我尝试过使用 foreach，但这仅显示列表中的姓氏：

```
 foreach (var text in allUsers)
                        {
                            message = text.Bruger.ToString();
                        } 
```

这不是我想要的，我想一个接一个地显示每个名字，所以我尝试了这个：

```
foreach (var text in allUsers)
                        {
                            message += text.Bruger.ToString() + '\n';
                        } 
```

但这只是一遍又一遍地显示相同的内容，列表中只有 4 个名称，但每个名称显示超过 4 次（并且继续显示）。

然后我尝试制作一个设置为假的布尔值，这样当“For”循环运行两次时，它会将布尔值设置为假，这将停止循环。但是，这确实会停止循环，但是在显示所有名称至少 5 次后它会停止循环（名称从屏幕上用完，所以我只能计算每个名称 5 次）。

该代码如下所示：

```
bool isDoneAdding = false;

                if (isDoneAdding == false)
                {
                    for (int i = 0; i < 2; i++)
                    {
                        foreach (var text in allUsers)
                        {
                            message += text.Bruger.ToString() + '\n';
                        }
                        if (i == 2)
                        {
                            isDoneAdding = true;
                        }
                    }
                } 
```

这个问题的答案可能很简单，但我还是个新手，我一辈子都无法弄清楚。

提前致谢。

*编辑*

这是我将所有用户添加到列表的地方：

```
 List<User> allUsers = new List<User>();

 MathAndYouDBEntities db = new MathAndYouDBEntities();

            foreach (User user in db.Users)
            {
                allUsers.Add(user);

            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T04:57:52.247

从您的问题文本中，我了解到 allUsers 的内容是正确的（即 4 项），并且 foreach 循环执行了很多次。

此外，您对布尔值的尝试不起作用，因为它永远不会进入`isDoneAdding = true;`语句，因为 for 循环是针对 i = 0 和 i = 1 执行的，并且会在 i 达到值 2 之前退出。即使该语句是执行（例如将条件设置为 i == 1），foreach 将执行两次，而不仅仅是一次。

要使用 bool，您应该执行以下操作：

```
bool isDoneAdding = false;

if (!isDoneAdding)
{
    foreach (var text in allUsers)
    {
         message += text.Bruger.ToString() + '\n';
    }
}
else
{
    isDoneAdding = true;
} 
```

但是，如果您说 foreach 执行了 4 次，我认为这不会起作用。我不知道您的问题的上下文，但假设您的代码是为了响应某个事件而执行的，并且该事件被多次触发。然后，您可能拥有在包含 for 循环的方法之外定义的 message 变量（可能是实例变量？）并且只被初始化一次。如果是这种情况，您应该在定义消息的同一位置定义您的 isDoneAdding。

# php - php：爆炸字符串

> ID：10875669
> 
> 赞同：2
> 
> 时间：2012-06-04T02:22:14.377
> 
> 标签：php, string, explode

我正在尝试从字符串中获取一个简单的数组。

Ej。[位置] => ???? [标题] => ??? [音高] => ??? [缩放] => ???

但由于某种原因，我收到以下错误：

> **注意**：未定义索引：第 21 行标题

**这是PHP代码：**

```
<?php
$mysql_data= 
"position: 34.032616, -118.286564|
heading: -159.50240187408838|
pitch: 0|
zoom: 2";

$pov = explode("|", $mysql_data);
foreach($pov as $key)
{
    $element = explode(": ", $key);
    $pov[ $element[0] ] = $element[1];
}
unset($element);

//Testing echoes
print_r($pov);
echo "\n";
echo $pov['heading'];
?> 
```

另外，有没有更简单的方法可以一次性完成并跳过 foreach ？
顺便说一句：我不需要键的 0,1..etc，只需要标记为“标题”、“缩放”等

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T02:25:48.613

前面有一个换行符`heading`。

在您的循环中，您应该`trim()`使用数组键（和值以防万一）：

```
$pov[ trim($element[0]) ] = trim($element[1]); 
```

**更新**

一个简单的正则表达式也可以解决这个问题：

```
$s = <<<EOM
position: 34.032616, -118.286564|
heading: -159.50240187408838|
pitch: 0|
zoom: 2
EOM;

if (preg_match_all('/(\w+):([^|]+)/', $s, $matches)) {
    $pov = array_combine($matches[1], $matches[2]);
} 
```

顺便说一句：不要使用`parse_str`hacks，该功能适用​​于已经正确 URL 编码的数据，而且老实说，它是适合这项工作的错误工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T02:58:53.907

`foreach()`假设输入字符串中没有换行符，则更简单的方法是：

```
$str = 'position: 34.032616, -118.286564|heading: -159.50240187408838|pitch: 0|zoom: 2';
$str = str_replace(array('|',':'), array('&','='), $mysql_data);

parse_str($str, $pov);

print_r($pov);
/*
Array
(
    [position] =>  34.032616, -118.286564
    [heading] =>  -159.50240187408838
    [pitch] =>  0
    [zoom] =>  2
)
*/ 
```

如果输入字符串中有换行符，请更改`str_replace`args 中的规则。

```
str_replace(array("\r\n","\n",'|',':'), array('','','&','='), $mysql_data); 
```

# java - 程序似乎无缘无故地循环

> ID：10875671
> 
> 赞同：2
> 
> 时间：2012-06-04T02:22:41.530
> 
> 标签：java, loops, if-statement

似乎我的输入框似乎出现了两次，即使它们也不应该出现。似乎无法弄清楚为什么。如果有人可以提供帮助会很棒:)

```
int x; //temperature input
int y; //temperature type
int z; //temperature convert
int c; //temperature celsius 
int f; //temperature fahrenheit 

public void init() 

{
    setSize(500, 500);
    Container c = getContentPane();
    c.setBackground(Color.BLUE);

}

public void paint (Graphics g)

{
    super.paint(g); 

    g.setFont(new Font("Veranda", Font.PLAIN, 20));
    g.setColor(Color.BLACK);

    String number = JOptionPane.showInputDialog("What temperature would you like to convert? (input # of degrees)");
    x = Integer.parseInt(number);   

    String number2 = JOptionPane.showInputDialog("What temperature type are you inputting? 1\. Fahrenheit 2\. Celsius");
    y = Integer.parseInt(number2);

    if (y==1)
    {
        c=(5/9)*(f-32);

        g.drawString("Your temperature of" + x + "is" + y + "Celsius", 250, 100); 
    }//end if   

    if (y==2)
    { 
        f=(9/5)*c+32;

        g.drawString("Your temperature of" + x + "is" +y + "Fahrenheit", 250, 100);
    }//end if

}//end paint 
```

我知道这是一个非常基本的程序，但我或多或少只是试图通过盯着基本的东西来学习 java。所以希望如果我能理解如何让一个简单的程序运行起来，我就可以继续前进。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T02:24:36.693

不要将 JOptionPane 方法放入paint 方法中，除非您想将程序冻结到爬行状态。该`paint(...)`方法应仅用于绘画。paint 方法负责绘制组件包含的所有内容，如果您不必要地中断其流程，您的 gui 将无法及时呈现，或者可能根本无法呈现。

您也无法控制何时调用paint，或者即使它会被调用。如您所见，它不是由您直接调用（也不应该是），而是由 JVM 调用，或者响应代码中的建议（通过调用`repaint()`）或由于操作系统的请求，例如如果操作系统发现窗口的一部分是“脏的”，它将执行此操作。事实上，您会发现由于这些原因，它最初经常被调用两次。将该代码放在其他地方，也许在 init 方法中。

此外，这似乎是 Swing 应用程序，而不是 AWT 应用程序，因为您调用`getContentPane()`了 init 方法。如果是这样，不要直接在 JApplet 的`paint(...)`方法中绘制，而是在`paintComponent(...)`JApplet 拥有的 JPanel 或其他 JComponent 派生的方法中绘制。这有几个原因，但主要原因是小程序的paint(...) 方法负责许多您不想冒险搞砸的事情，包括边框和子窗口的绘制，相反，您应该重写一个只负责绘制组件的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T04:22:52.073

该`paint()`方法将被自动调用，因为它的功能是使用图形上下文中更新的任何内容来绘制屏幕。在这种情况下，您希望接受来自用户的输入并基于此值，您需要在屏幕上显示一些内容。这里发生的事情是，由于该`paint`方法是回调方法被多次调用，显然您的输入将始终显示。因此，取出所有`JOptionPane.showInputDialog`方法`paint()`并在其他地方调用它。

# postgresql - 有什么理由不在 Heroku 上使用 PostgreSQL 的内置全文搜索？

> ID：10875674
> 
> 赞同：69
> 
> 时间：2012-06-04T02:23:16.750
> 
> 标签：postgresql, heroku, solr, full-text-search, sphinx

我正准备在 Heroku 上部署一个需要全文搜索的 Rails 应用程序。到目前为止，我一直在使用 MySQL 和 Sphinx 的 VPS 上运行它。

但是，如果我想在 Heroku 上使用 Sphinx 或 Solr，我需要付费购买附加组件。

我注意到 PostgreSQL（Heroku 上使用的数据库）具有内置的全文搜索功能。

我不能使用 Postgres 的全文搜索有什么原因吗？它比狮身人面像慢还是有其他一些主要限制？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-06-04T05:38:26.523

### 编辑，2016 年 — 为什么不两者兼而有之？

如果您对 Postgres 和 Lucene 感兴趣，为什么不两者兼而有之？查看 Postgres 的[ZomboDB](https://github.com/zombodb/zombodb)扩展，它将 Elasticsearch 集成为一流的索引类型。仍然是一个相当早期的项目，但对我来说它看起来很有希望。

*   [https://github.com/zombodb/zombodb](https://github.com/zombodb/zombodb)

（技术上在 Heroku 上不可用，但仍然值得一看。）

* * *

披露：我是[Websolr](http://websolr.com)和[Bonsai](http://bonsai.io/) Heroku 附加组件的联合创始人，所以我的观点有点偏向 Lucene。

我对 Postgres 全文搜索的了解是，它对于简单的用例来说非常可靠，但是 Lucene（以及因此 Solr 和 ElasticSearch）在性能和功能方面都优越的原因有很多。

对于初学者来说，[jpountz](https://stackoverflow.com/users/675589/jpountz)为这个问题提供了一个真正优秀的技术答案，[为什么 Solr 比 Postgres 快这么多？](https://stackoverflow.com/questions/10053050/why-is-solr-so-much-faster-than-postgres/10054078)值得仔细阅读以真正消化。

我还评论了[最近 RailsCast 的一集](http://railscasts.com/episodes/343-full-text-search-in-postgresql?view=comments#comment_157644)，比较了 Postgres 全文搜索与 Solr 的相对优缺点。让我在这里回顾一下：

### Postgres 的实用优势

*   重用您已经在运行的现有服务，而不是设置和维护（或支付）其他东西。
*   远远优于极其缓慢的 SQL`LIKE`运算符。
*   由于数据都在同一个数据库中，因此保持数据同步的麻烦更少——无需与某些外部数据服务 API 进行应用程序级集成。

### Solr（或 ElasticSearch）的优势

在我的脑海中，没有特别的顺序......</p>

*   将您的索引和搜索负载与常规数据库负载分开扩展。
*   更灵活的术语分析，​​例如重音规范化、语言词干提取、N-gram、标记删除……其他很酷的功能，例如拼写检查、“丰富内容”（例如 PDF 和 Word）提取……</li>
*   Solr/Lucene 可以很好地完成[Postgres 全文搜索 TODO 列表中](http://www.sai.msu.su/~megera/wiki/FTS_Todo)的所有操作。
*   更好更快的术语相关性排名，在搜索时有效地定制。
*   常见术语或复杂查询的搜索性能可能更快。
*   可能比 Postgres 更有效的索引性能。
*   通过将索引与主数据存储分离，更好地容忍数据模型的变化

显然，我认为基于 Lucene 的专用搜索引擎是这里更好的选择。基本上，您可以将 Lucene 视为事实上的搜索专业知识的开源存储库。

但是，如果您唯一的其他选择是`LIKE`运算符，那么 Postgres 全文搜索绝对是一个胜利。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2016-10-04T14:50:32.217

由于我刚刚将弹性搜索 (1.9) 与 postgres FTS 进行了比较，因此我认为我应该分享我的结果，因为它们比@gustavodiazjaimes 引用的更新一些。

我对 postgres 的主要担心是它没有内置 faceting，但是构建自己很简单，这是我的示例（在 django 中）：

```
results = YourModel.objects.filter(vector_search=query)
facets = (results
    .values('book')
    .annotate(total=Count('book'))
    .order_by('book')) 
```

我正在使用 postgres 9.6 和 elastic-search 1.9（通过 django 上的 haystack）。下面是 elasticsearch 和 postgres 在 16 种不同类型查询中的比较。

```
 es_times  pg_times  es_times_faceted  pg_times_faceted
0   0.065972  0.000543          0.015538          0.037876
1   0.000292  0.000233          0.005865          0.007130
2   0.000257  0.000229          0.005203          0.002168
3   0.000247  0.000161          0.003052          0.001299
4   0.000276  0.000150          0.002647          0.001167
5   0.000245  0.000151          0.005098          0.001512
6   0.000251  0.000155          0.005317          0.002550
7   0.000331  0.000163          0.005635          0.002202
8   0.000268  0.000168          0.006469          0.002408
9   0.000290  0.000236          0.006167          0.002398
10  0.000364  0.000224          0.005755          0.001846
11  0.000264  0.000182          0.005153          0.001667
12  0.000287  0.000153          0.010218          0.001769
13  0.000264  0.000231          0.005309          0.001586
14  0.000257  0.000195          0.004813          0.001562
15  0.000248  0.000174          0.032146          0.002246
                  count      mean       std       min       25%       50%       75%       max
es_times           16.0  0.004382  0.016424  0.000245  0.000255  0.000266  0.000291  0.065972
pg_times           16.0  0.000209  0.000095  0.000150  0.000160  0.000178  0.000229  0.000543
es_times_faceted   16.0  0.007774  0.007150  0.002647  0.005139  0.005476  0.006242  0.032146
pg_times_faceted   16.0  0.004462  0.009015  0.001167  0.001580  0.002007  0.002400  0.037876 
```

为了让 postgres 达到这些多面搜索的速度，我必须在字段上使用带有 SearchVectorField 的 GIN 索引，这是 django 特有的，但我确信其他框架具有类似的向量类型。

另一个考虑因素是 pg 9.6 现在支持短语匹配，这是巨大的。

我的收获是，在大多数情况下，postgres 会更受欢迎，因为它提供：

1.  更简单的堆栈
2.  无需处理搜索后端 api 包装器依赖项（thinking-sphinx、django-sphinx、haystack 等）。这些可能会很麻烦，因为它们可能不支持您的搜索后端所做的功能（例如干草堆分面/聚合）。
3.  具有相似的性能和功能（满足我的需要）

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-05-20T04:06:11.763

我发现了这个惊人的比较并想分享它：

[PostgreSQL 中的全文搜索](http://es.slideshare.net/billkarwin/full-text-search-in-postgresql)

构建索引 LIKE 谓词的时间 -- 无
PostgreSQL / GIN -- 40 分钟
Sphinx 搜索 -- 6 分钟
Apache Lucene -- 9 分钟
倒排索引 -- 高

索引存储 LIKE 谓词 -- 无
PostgreSQL / GIN -- 532 MB
Sphinx 搜索 -- 533 MB
Apache Lucene -- 1071 MB
倒排索引 -- 101 MB

查询速度 LIKE 谓词 -- 90+ 秒
PostgreSQL / GIN -- 20 毫秒
Sphinx 搜索 -- 8 毫秒
Apache Lucene -- 80 毫秒
倒排索引 -- 40 毫秒

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-07-13T04:54:21.770

Postgres 的全文搜索在词干提取、排名/提升、同义词处理、模糊搜索等领域具有惊人的功能——但不支持分面搜索。

因此，如果 Postgres 已经在您的堆栈中并且您不需要分面，那么在寻找基于 Lucene 的解决方案之前，最好先尝试一下，以利用易于保持索引同步和保持流畅堆栈的巨大好处——至少如果全部您的应用不基于搜索。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-02-26T08:14:33.323

合成客户数据（1000 万条记录）的一些更新结果。

[![在此处输入图像描述](../Images/795f45fc58ff3a5ada1739e0a7675817.png)](https://i.stack.imgur.com/h7iV1.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-04T03:50:45.737

Postgresql 的 FTS 函数在查找方面非常成熟且相当快。值得一看。

# algorithm - 如何找出两个堆栈的所有弹出可能性？

> ID：10875675
> 
> 赞同：3
> 
> 时间：2012-06-04T02:23:17.443
> 
> 标签：algorithm, data-structures, stack

这里有两个堆栈：

```
A: 1,2,3,4 <- Stack Top
B: 5,6,7,8 
```

A 和 B 将弹出到另外两个堆栈：C 和 D。

```
Example: 
 pop(A),push(C),pop(B),push(D).
 If an item have been popped out , it must be pushed to C or D immediately. 
```

那么，是否有一种算法可以找出 C 和 D 的所有可能性？

非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T04:30:36.167

我有一个想法，但不知道它是否正确：

设置一个有 8 位的堆栈，1 表示 A pop，0 表示 B pop（只要确保有四个 1 和四个 0）。

所以答案变成了找出 8 位数组组合的所有可能性。

然后迭代 8 位以弹出 A 或 B。

这是代码：

```
public class Test {
public static void generate(int l, int[] a) {
    if (l == 8) {
        if (isValid(a)) {
            for (int i = 0; i < l; i++) {
                System.out.print(a[i]);
            }
            System.out.println();
        }
    } else {
        for (int i = 0; i < 2; i++) {
            a[l] = i;
            generate(++l, a);
            --l;
        }
    }
}

// the combination must have four 0 and four 1.
public static boolean isValid(int[] a) {
    int count = 0;
    for (int i = 0; i < a.length; i++) {
        if (a[i] == 0) count++;
    }
    if (count != 4) return false;
    return true;
}

public static void main(String[] args) {
    generate(0, new int[8]);
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T03:25:01.230

您可以生成所有可能的堆栈弹出列表，然后模拟：

但是，会有重复，考虑每个堆栈上只有两个元素的情况。如果将 a 推送到 c 并将 b 推送到 d，则它们被推送的顺序无关紧要。

```
def simulate(steps):
    source={'a':range(4),'b':range(4,8)}
    res = {'c':"",'d':""}; 
    for i,step in enumerate(steps):
        res[step[1]]+=str(source[step[0]].pop())
    # this is what each stack will look like
    return res['c']+'-'+res['d']  

def steps(a_left,b_left):
    ret = []
    if a_left>0:
        substeps = steps(a_left-1,b_left)
        ret.extend( [ x + [('a','c')] for x in substeps] )
        ret.extend( [ x + [('a','d')] for x in substeps] )
    if b_left>0:
        substeps = steps(a_left,b_left-1)
        ret.extend(  [ x + [('b','c')] for x in substeps] )
        ret.extend(  [ x + [('b','d')] for x in substeps] )
    if(len(ret)==0):
        return [[]]
    return ret; 
```

结果：

```
>>> [x for x in steps(1,1)]
[[('b', 'c'), ('a', 'c')], [('b', 'd'), ('a', 'c')], [('b', 'c'), ('a', 'd')], [
('b', 'd'), ('a', 'd')], [('a', 'c'), ('b', 'c')], [('a', 'd'), ('b', 'c')], [('
a', 'c'), ('b', 'd')], [('a', 'd'), ('b', 'd')]]
>>> [simulate(x) for x in steps(1,1)]
['73-', '3-7', '7-3', '-73', '37-', '7-3', '3-7', '-37']
>>> len(set([simulate(x) for x in steps(4,4)]))
5136 
```

如果我们考虑只有一个目标堆栈的两个堆栈，我们可以在 (2*n)!/(n!)^2 处找到唯一堆栈的数量。这与 8 个元素的排列数相同，其中 4 个是“A”，其中 4 个是“B”。然后，我们可以通过将它们划分为子集来将它们分配给每个单独的堆栈 - 每个堆栈具有 N 个唯一编号的子集的数量将是 2^(2^n)

```
(2^(2*n))/((2*n)!/(n!)^2) 
```

不过，我没有看到更有效地生成这些的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T18:01:25.473

C 和 D 的内容可以以任意顺序写成四个 A 和四个 B 的序列。

> AABABBBA *（代表弹出 A 两次，然后 B 一次，然后 A 一次，等等）*

恰好有**8 个选择 4 个**这样的序列。因此，只需[遍历每个这样的序列](http://www.codingthewheel.com/archives/exhaustively-enumerating-combinations-and-permutations-in-code) *（“无重复组合”）*即可获得答案。

# css - 未找到网站页面和呈现问题

> ID：10875678
> 
> 赞同：0
> 
> 时间：2012-06-04T02:24:08.620
> 
> 标签：css, wordpress, internet-explorer-8, internet-explorer-9

我的网站启动并运行，但在 MS IE8 和 IE9 中遇到渲染问题，但在 Chrome 和 Firefox 中似乎运行良好。

我的网站中也只有一个页面不断返回“未找到页面”并且不确定为什么，因为它只是其余页面中的一页有效。

查询是：

1.  为什么此链接不起作用：[http](http://solarinstallations.com.au/gallery-testimonials/) ://solarinstallations.com.au/gallery-testimonials/而在主站点上找到的其他链接可以，即：[http ://solarinstallations.com.au/](http://solarinstallations.com.au/)

2.  关于为什么我的网站在 IE8 和 IE9 中的渲染无处不在的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T13:47:51.397

在渲染方面，事实证明我的 HTML 无效，因此通过 W3C Validator 运行了网站，在那里我纠正了问题，现在一切都很好。

对于“找不到页面”问题，仍然不确定是什么原因，所以只是删除了页面并重新创建了它。这解决了这个问题。

# jquery - jQuery addclass 到带有特定单词的链接

> ID：10875679
> 
> 赞同：0
> 
> 时间：2012-06-04T02:24:15.430
> 
> 标签：jquery, hyperlink, addclass

如何将类添加到带有特定单词的 href 标记？我希望每个带有“单击此处”和“更多信息”的标签实例都可以添加一个类。

```
<a href="">click here</a> <a href="">more information</a> 
```

成为：

```
<a href="" class="arrow">click here</a> <a href="" class="arrow">more information</a> 
```

一些链接上有断字，导致“包含”数组错过它们：

```
 <a title="Vision and Values" href="/about-us/vision-and-values.aspx">click
here</a> 
```

不是，`<br/>`而是 HTML 将这两个词呈现在不同的行上

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T02:27:27.803

使用[filter](http://api.jquery.com/filter/)，如果你想完全匹配“点击这里”：

```
$('a').filter(function() {
    var text = $(this).text();
    return text === 'click here' || text === 'more information';
}).addClass('arrow'); 
```

或者，如果您有很多条件，请使用`inArray` [http://api.jquery.com/jQuery.inArray/](http://api.jquery.com/jQuery.inArray/)：

```
$('a').filter(function() {
    var whitelist = ['click here', 'more information'];
    var text = $(this).text();
    return $.inArray(text, whitelist) != -1;
}).addClass('arrow'); 
```

> 因为 JavaScript 将 0 视为松散地等于 false（即 0 == false，但 0 !== false），如果我们要检查数组中是否存在值，我们需要检查它是否不等于（或大于) -1。

这样，如果您有其他要匹配的文本，您只需添加到该数组中。

您也可以使用`contains`，但它会匹配诸如`click here 2`等之类的东西，基本上是`contains`“点击这里”的任何东西，但不完全是这样。

```
$('a:contains(click here),a:contains(more information)').addClass('arrow'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T02:25:50.047

使用[包含](http://api.jquery.com/contains-selector/)选择器（区分大小写）：

```
$("a:contains('click here')").addClass('arrow'); 
```

必须为此使用 JQuery，因为没有 CSS3 选择器可以做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T02:27:40.857

我认为您可能只需要一个常规循环，例如：

```
jQuery("a").each(function() {
    var elem = jQuery(this);
    var html = elem.html();
    if (html == "click here" || html == "more information") {
        elem.addClass("arrow");
    }
}); 
```

# c# - 如何在 binaryformatter 反序列化期间追踪重复键异常的原因？

> ID：10875683
> 
> 赞同：1
> 
> 时间：2012-06-04T02:24:39.793
> 
> 标签：c#, .net, serialization, deserialization, binaryformatter

在尝试反序列化由 BinaryFormatter 创建的文件时，会引发以下异常：

**ArgumentException：已添加具有相同键的项目。**

堆栈跟踪从 BinaryFormatter 中的 Deserialize 方法开始，我无法确定代码中的哪个类导致了冲突。

我正在序列化 100 多个标有**[Serializable]**属性的类

我看到另一个问题表明原因可能与具有重复名称的字段有关。但是，我在 100 多个类中找不到导致冲突的字段，并且除了手动梳理代码之外，我不知道还有一种更有效的方法来追踪它。

除了手动检查每个班级的字段之外，还有更好的方法来开始调试这个问题吗？首先，碰撞可能有不同的原因吗？我非常感谢可以提供的对此问题的任何见解。

**异常内容**

```
System.ArgumentException was unhandled
  Message=An item with the same key has already been added.
  Source=mscorlib
  StackTrace:
   at System.ThrowHelper.ThrowArgumentException(ExceptionResource resource)
   at System.Collections.Generic.Dictionary`2.Insert(TKey key, TValue value, Boolean add)
   at System.Collections.Generic.Dictionary`2.OnDeserialization(Object sender)
   at System.Runtime.Serialization.DeserializationEventHandler.Invoke(Object sender)
   at System.Runtime.Serialization.ObjectManager.RaiseDeserializationEvent()
   at System.Runtime.Serialization.Formatters.Binary.ObjectReader.Deserialize(HeaderHandler handler, __BinaryParser serParser, Boolean fCheck, Boolean isCrossAppDomain, IMethodCallMessage methodCallMessage)
   at System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Deserialize(Stream serializationStream, HeaderHandler handler, Boolean fCheck, Boolean isCrossAppDomain, IMethodCallMessage methodCallMessage)
   at System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Deserialize(Stream serializationStream)
   at SPX.Saves.Save`1.Read() in .\SPX.Save\Save.cs:line 42
   at OGUR.States.MainMenuState.Update() in .\OGUR\OGUR\States\MainMenuState.cs:line 64
   at SPX.States.StateManager.Update() in .\SPX.States\StateManager.cs:line 30
   at OGUR.Game.Update(GameTime gameTime) in .\OGUR\OGUR\Game.cs:line 63
   at Microsoft.Xna.Framework.Game.Tick()
   at Microsoft.Xna.Framework.Game.HostIdle(Object sender, EventArgs e)
   at Microsoft.Xna.Framework.GameHost.OnIdle()
   at Microsoft.Xna.Framework.WindowsGameHost.RunOneFrame()
   at Microsoft.Xna.Framework.WindowsGameHost.ApplicationIdle(Object sender, EventArgs e)
   at System.Windows.Forms.Application.ThreadContext.System.Windows.Forms.UnsafeNativeMethods.IMsoComponent.FDoIdle(Int32 grfidlef)
   at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData)
   at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
   at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
   at System.Windows.Forms.Application.Run(Form mainForm)
   at Microsoft.Xna.Framework.WindowsGameHost.Run()
   at Microsoft.Xna.Framework.Game.RunGame(Boolean useBlockingRun)
   at Microsoft.Xna.Framework.Game.Run()
   at OGUR.EntryPoint.Main(String[] args) in .\OGUR\OGUR\EntryPoint.cs:line 15
InnerException: 
```

# php - 取消表单提交默认行为 jQuery Mobile

> ID：10875686
> 
> 赞同：0
> 
> 时间：2012-06-04T02:25:11.037
> 
> 标签：php, jquery, jquery-mobile

我想在不重新加载页面的情况下提交表单，并使用 $.post 将数据传递到外部 php 文件。我在防止表单提交时重新加载页面时遇到问题。单击提交按钮后如何取消重新加载？

这是代码：

```
<script>
    $(document).ready(function(e){
        $("#formajax").live("submit", function(e){
            var $this = $(this);
            e.preventDefault();
            $.post("process.php", $this.serialize(), function(data){
                alert("DATA PASSED!");
            });
            return false;
        })
    })
</script>

<form method="post" action="" id="formajax">
    <input type="text" id="samplefield" name="samplefield" value=""/>
    <input type="submit" value="Submit"/>
</form> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T02:48:22.243

我不熟悉该`live`方法对 jQuery 的作用，但它似乎是您问题的根源。如果您替换`live`为`bind`，在我的测试中，页面不会重新加载，并且我会收到“数据通过”提示。

```
 <script>
            $(document).ready(function(e){
                    $("#formajax").bind("submit", function(e){
                            var $this = $(this);
                            e.preventDefault();
                            $.post("index.php", $this.serialize(), function(data){
                                    alert("DATA PASSED!");
                            });
                            return false;
                    })
            })
    </script>

    <form method="post" action="" id="formajax">
            <input type="text" id="samplefield" name="samplefield" value=""/>
            <input type="submit" value="Submit"/>
    </form> 
```

# jquery - 如何使用 jQuery 实现这种 Flash 效果？

> ID：10875695
> 
> 赞同：5
> 
> 时间：2012-06-04T02:26:23.660
> 
> 标签：jquery, css

**更新：**效果很好。**剩下的最后一件事是试图滑过我似乎无法[弄清楚](http://www.sopranowebdesign.com/animation/)的 div 。**

* * *

**更新：**我已经设法用[转换插件](http://ricostacruz.com/jquery.transit/)做到了。仍然存在一个问题：当文本在框中滑动时，我可以看到它是如何从外部进入框的。[点击这里](http://www.sopranowebdesign.com/animation/)看看我的意思。

* * *

我想使用 jQuery (top -> flash, bottom -> jquery) 来实现[这个 flash 效果](http://www.sopranowebdesign.com/animation/)，这样它就可以在 iphone 和智能手机上查看。

目前，我无法让文本从这些框下方滑入。

**HTML 代码：**

```
<div id="banner">
    <div>
        <img src="img/banner-1.jpg" class="banner-bg" />
        <div class="left"></div>
        <div class="left-text"><span>POLISHED FLOORS1</span></div>
        <div class="right"></div>   
        <div class="right-text"><span>Custom-made, elegant and long lasting.</span></div>
    </div>
    <div>
        <img src="img/banner-2.jpg" class="banner-bg" />
        <div class="left"></div>
        <div class="left-text"><span>POLISHED FLOORS2</span></div>
        <div class="right"></div>   
        <div class="right-text"><span>Custom-made, elegant and long lasting.</span></div>
    </div>
    <div>
        <img src="img/banner-3.jpg" class="banner-bg" />
        <div class="left"></div>
        <div class="left-text"><span>POLISHED FLOORS3</span></div>
        <div class="right"></div>   
        <div class="right-text"><span>Custom-made, elegant and long lasting.</span></div>
    </div>
</div> 
```

**jQuery代码：**

```
$(document).ready(function(){   
    //$("#banner .left").transition({opacity: "1", width: "238px"}, 1200);
    //$("#banner .right").transition({opacity: "0.7", width: "662px"}, 1200);
    //$("#banner .left-text").delay(1200).transition({ opacity: '1', x: '-220px' });
    //$("#banner .right-text").delay(1200).transition({ opacity: '1', x: '+642px' });

    $(function(){
        $ds = $('#banner div .banner-bg');
        $ds.hide().eq(0).show();
        setInterval(function(){
                $ds.filter(':visible').fadeOut(function(){
                        var $banner_bg = $(this).next('div .banner-bg');
                        var $left = $(this).next('div .left');
                        var $right = $(this).next('div .right');
                        var $left_text = $(this).next('div .left-text');
                        var $right_text = $(this).next('div .right-text');
                        if ( $banner_bg.length == 0 ) {
                            $ds.eq(0).fadeIn();
                        } else {
                            $left.transition({opacity: "1", width: "238px"}, 1200);
                            $right.transition({opacity: "0.7", width: "662px"}, 1200);
                            $left_text.delay(1200).transition({ opacity: '1', x: '-220px' });
                            $right_text.delay(1200).transition({ opacity: '1', x: '+642px' });
                            $banner_bg.fadeIn();
                        }
                });
        }, 5000);
    });
}); 
```

**CSS 代码：**

```
#banner {
    height:299px;
    width:900px;
    position:relative;
    overflow:hidden;
}
#banner .banner-bg {
    z-index:0;
    position:absolute;
    top:0;
    left:0;
}
#banner .left {
    float:left;
    width:0px;
    height:100px;
    background:url(img/banner-left-bg.png);
    opacity:0.3;
    position:relative;
    z-index:7;
}
#banner .right {
    float:right;
    width:0px;
    height:100px;
    background-color:#34515c;
    opacity:0.3;
    position:relative;
    z-index:5;
}
#banner .left-text, #banner .right-text {
    font-family:Verdana, Arial;
    font-size:22px;
    font-style:normal;
    color:#fff;
    top:35px;
}
#banner .left-text {
    position:absolute;
    left:233px;
    opacity:0;
    z-index:8;
}
#banner .right-text {
    position:absolute;
    right:662px;
    width:630px;;
    font-size:24px;
    opacity:0;
    z-index:6;
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T04:17:53.923

我为您的在线标记创建了一个[jsFiddle](http://jsfiddle.net/PuuEy/2/)。

解决方案是`z-index`为左边的文本块设置一个值，即`.left`它`.left-text`覆盖传入的动画。

**编辑：**对于您的问题中列出的第二次更新，我看到您的在线 HTML 和在线 jQuery 与您在此处列出的方法完全不同。我知道你的目标是什么，但你的标记到处都缺少很多东西，但你走在正确的道路上。

我建议使用许多免费的幻灯片插件之一，这些插件可以与您独特的带有动画的横幅文本相结合。在此处查看[s3Slider DEMO](http://www.serie3.info/s3slider/demonstration.html)。这些**横幅文本框**可以换成您自己的**漂亮版本**。s3Slider主页**在**[这里](http://www.serie3.info/s3slider/)。

**状态：**最后，一个 jsFiddle 使用经过大量修改的 s3Slider jQuery 插件重新创建 Flash 效果，该插件也使用 jsLint 进行验证。我在那个 Demo 中有很多评论。

**链接：**   [**jsFiddle 演示**](http://jsfiddle.net/wJgTx/10/)（2012 年 12 月 26 日更新）

为了获得***灵感***，这里有一些看起来相同的 CSS3 广告与 Flash 广告的[**webkit 示例。**](http://dev.sencha.com/deploy/css3-ads/)猜猜哪个！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T03:02:34.080

听起来像是`#banner`需要`overflow: hidden;`。

# ruby - 为什么 xpath 不返回此 XML 节点？

> ID：10875699
> 
> 赞同：0
> 
> 时间：2012-06-04T02:27:33.207
> 
> 标签：ruby, xml, nokogiri

所以我有如下代码：

```
content_url = 'http://auburn.craigslist.org/cpg/index.rss'
doc = Nokogiri::XML(open(content_url))
bq = doc.xpath('//item') 
```

但它返回`bq`为空。

我确定它有那个标签，这是该页面上的前几个标签：

```
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://purl.org/rss/1.0/" xmlns:ev="http://purl.org/rss/1.0/modules/event/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:taxo="http://purl.org/rss/1.0/modules/taxonomy/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:syn="http://purl.org/rss/1.0/modules/syndication/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:admin="http://webns.net/mvcb/">
<channel rdf:about="http://auburn.craigslist.org/cpg/index.rss">...</channel>
<item rdf:about="http://auburn.craigslist.org/cpg/3012277218.html">...</item> 
```

想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T02:49:02.087

由于*item*不在默认命名空间中，您需要告诉 XPath 在哪个命名空间下查看。

首先，您的命名空间是`xmlns`属性设置的内容。对于 Craigslist，它似乎是`http://purl.org/rss/1.0/`. 这就是您必须告诉 XPath 您要使用的名称空间。

但是，在调用 XPath 时，我们必须指定要使用的额外命名空间是什么。像这样。

```
doc.xpath('//item', { 'rdf' => 'http://purl.org/rss/1.0/' }) 
```

不是这样，我们需要告诉 XPath 项目在`rdf`命名空间下。我们可以通过在标签名称前加上命名空间来做到这一点。像这样。

```
doc.xpath('//rdf:item', { 'rdf' => 'http://purl.org/rss/1.0/' }) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T02:49:44.413

它与命名空间有关。你可以这样做：

```
doc.remove_namespaces! 
```

或者你可以使用

```
doc.css('item') 
```

反而

# css - 如何在里面实现3个垂直div

> ID：10875700
> 
> 赞同：0
> 
> 时间：2012-06-04T02:27:38.633
> 
> 标签：css, html, header

请帮忙！如何在标题标签内实现 3 个垂直 div。我将标头定义为相对，将每个内部 div 定义为绝对。 **对于内部 div**

*   div1：将偏移值设置为top：0和right：0
    div2：不确定要设置什么偏移值。（请在这里帮忙！）div3：将偏移值设置为bottom：0和right：0

在此处输入代码

```
<!--html code -->
<header id="divhead">
        <div id="logo"></div>
        <div id="links"></div>
            <div id="social_links"></div>
        <div id="navigation"></div>
</header>

/* css */
#divhead{
    width:960px;
    height:96px;
    margin-bottom:1em;
    background:yellow;
    opacity:.5;
    margin:0 auto;
    position:relative;
}
#logo{
    width:240px;
    height:94px;
    background: url(images/ss_logo_transparent_text.png)no-repeat;/*image width:230.4px/image height:43.2*/
    border:1px solid #000;
    position:absolute;
    float:left;
}
#links{
    width:715px;
    height:22px;
    border:1px solid #000;
    position:absolute;
    top:0;
    right:0;
    background:green;
    opacity:.5;
}
#social_links{
    width:715px;
    height:20px;
    border:1px solid #000;
    position:absolute;
    right:0;
    background:blue;
    opacity:.5;

}
#navigation{
    width:715px;
    height:50px;
    border:1px solid #000;
    position:absolute;
    bottom:0;
    right:0;
    background:#888;
    opacity:.5;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T05:49:38.180

从评论中我了解到您可能正在寻找这样的[东西](http://fiddle.jshell.net/SsdPH/14/)

# python - 您将如何按给定持续时间的块对时间戳进行分组？

> ID：10875702
> 
> 赞同：0
> 
> 时间：2012-06-04T02:27:46.320
> 
> 标签：python, grouping

假设您有一个包含 n 个时间戳（Python`datetime`对象）的排序列表。你将如何产生一个形式的元组列表，一个对象`(t, count)`在哪里，列表中的元素数最多是多少分钟？`t``datetime``count``x``t`

例如，给定日期（字符串，为简洁起见；实际上是`datetime`对象）：

```
timestamps = ["13:00", "13:01", "13:03", "13:04", "13:05", "13:06", "13:09"] 
```

如果`x`是两分钟，则屈服

```
[("13:00", 2), ("13:03":3), ("13:06":1), ("13:09", 1)]] 
```

我想要做的是在资源上制作一个更粗略的点击列表，我拥有的唯一数据是每次点击的访问时间（粒度化到毫秒，我希望它精确到分钟，或十分钟）

我会发布我的尝试，但我很惭愧......

编辑：这是我到目前为止所拥有的......测试它是否有效......

```
def group_timestamps(timestamps, chunksize=10):
    """Groups a list of timestamps in chunks of ``chunksize`` minutes"""
    cs = timedelta(minutes=chunksize)

    if not timestamps:
        return []

    t0 = timestamps[0]
    count = 1
    chunks = []

    for ts in timestamps:
        if (ts - t0) <= cs:
            count += 1
        else:
            chunks.append((t0, count))
            t0 = ts
            count = 1
    return chunks 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T02:47:10.590

这应该有效：

```
current = timestamps[0]
count = 0
res = []
for t in timestamps:
    if (t - current) <=  timedelta(minutes= 2): 
         count = count + 1
    else:
         res.append((current,count))
         current = t
         count = 1
res.append(current,count) #add last tuple 
```

按照你的例子：

```
timestamps = [datetime(hours=13,minutes=00), datetime(hours=13,minutes=01), datetime(hours=13,minutes=03), datetime(hours=13,minutes=04), datetime(hours=13,minutes=05), datetime(hours=13,minutes=06), datetime(hours=13,minutes=09)]

res = [(datetime(hours=13,minutes=00),2),(datetime(hours=13,minutes=03),3),(datetime(hours=13,minutes=06),1),(datetime(hours=13,minutes=09),1)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T02:58:48.487

这是我的解决方案版本：

```
from datetime import datetime

# SAMPLE TIMESTAMP DATA
timestamps = []
timestamps.append(datetime.utcfromtimestamp(1338777480))
timestamps.append(datetime.utcfromtimestamp(1338777580))
timestamps.append(datetime.utcfromtimestamp(1338777610))
timestamps.append(datetime.utcfromtimestamp(1338777680))
timestamps.append(datetime.utcfromtimestamp(1338777780))
timestamps.append(datetime.utcfromtimestamp(1338777980))
timestamps.append(datetime.utcfromtimestamp(1338778180))
timestamps.append(datetime.utcfromtimestamp(1338778230))
timestamps.append(datetime.utcfromtimestamp(1338778480))

MIN_THRSH = 2  # Range in minutes within to chunk data.

def chunk_time(timestamp_list):
    chunk_list = []
    current_chunk_idx = None
    for i, dt in enumerate(timestamp_list):
        if (i == 0 or
            ((dt - timestamp_list[current_chunk_idx]).seconds / 60) > MIN_THRSH):
            chunk_list.append([dt.strftime('%H:%M'), 1])
            current_chunk_idx = i
        else:
            chunk_list[-1][1] += 1
    return chunk_list

if __name__ == "__main__":
    for t in timestamps:
        print t.strftime('%H:%M')
    print chunk_time(timestamps) 
```

输出：

```
02:38
02:39
02:40
02:41
02:43
02:46
02:49
02:50
02:54
[['02:38', 3], ['02:41', 2], ['02:46', 1], ['02:49', 2], ['02:54', 1]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-13T09:04:37.323

如果您只需要计数，您可以简单地在 unix 时间戳上使用直方图。例如`numpy.histogram`。

# svn - SVN如何将主干中丢失的文件添加到分支

> ID：10875713
> 
> 赞同：0
> 
> 时间：2012-06-04T02:28:51.537
> 
> 标签：svn

我正在使用带有 ahknsvn 插件和 TortoiseSvn 的 Visual Studio 2008。

当我为某个项目创建存储库时，我忘记了要添加的几个文件。之后我对项目进行了分支，由于缺少文件而无法编译。所以我将丢失的文件添加到主干存储库并提交。从主干合并分支时，没有任何文件添加到分支，但合并成功。我该如何解决这种情况？

# xmgrace - 使用 xmgrace 时，如何指定要在多个文件上绘制的列？

> ID：10875716
> 
> 赞同：3
> 
> 时间：2012-06-04T02:29:47.980
> 
> 标签：xmgrace

我知道如果我这样做：

```
xmgrace file1 file2 file2 
```

将有三组不同颜色的图，如果这些文件中有多个列，则第二列将与第一列绘制。

如果我想为所有人绘制第 3 对第 1 怎么办？

我试过了

```
xmgrace -block file1 file2 file2 -bxy 1:3 
```

这是行不通的

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T14:13:40.590

**解决方案：**

有必要为*每个*文件指定`-block`标志和`-bxy col1:col2`标志/信息。

 *```
xmgrace -block file1 -bxy 1:3 -block file2 -bxy 1:3 -block file3 -bxy 1:3 
```

**解释：**

从 xmgrace 手册：

> ```
>  -block file
>           Assume the data file is block data 
> ```

```
 -bxy x:y:etc.
          Form a set from the current block data set using the current set
          type from columns given in the argument 
```

如果要从同一个文件中绘制多组列，只需使用`-block`一次，指定当前块数据集，然后使用`-bxy`从当前块数据集形成数据集：

```
xmgrace -block file1 -bxy 1:3 -bxy 1:4 -bxy 1:5 
```

对于多个文件，就像您正在尝试的那样，您必须将每个文件依次指定为“当前”块数据集，并且每次使用`-bxy n:m`.

键入更耗时，但遵循*单个数据文件*情况的逻辑进展。*

# gcc - CentOS 6 产生奇怪的链接错误

> ID：10875718
> 
> 赞同：0
> 
> 时间：2012-06-04T02:29:58.640
> 
> 标签：gcc, centos, scons, centos6

我们的网络最近从 CentOS 5 切换到 CentOS 6。使用 gcc 编译后，我们发现在链接时我们发现了这个错误。

```
/usr/bin/ld: cannot find -lz
collect2: ld returned 1 exit status 
```

现在看来，在 CentOS5 中，我们的编译器会绕过它。

```
/usr/bin/ld: skipping incompatible /usr/lib/libz.a when searching for -lz 
```

我们正在使用经过大量修改的 SCons 编译工具 (http://www.scons.org/)。我无法弄清楚这个错误，我不知道从哪里开始。这些错误的唯一区别是一台机器使用centOS 5，另一台使用centOS6。有没有人有什么建议？

Ĵ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T02:46:13.777

> 我无法弄清楚这个错误，我不知道从哪里开始。

问题是您正在构建 64 位程序，而链接器正在查找 32 位 libz.a，反之亦然。

在您的 CentOS5 机器上，链接器会跳过这个不兼容的，并在其他*地方*`libz.a`找到另一个。`libz.a`

 *在你的 CentOS6 机器上，其他地方不存在，所以你得到一个错误。

您可以找出`libz.a`CentOS5 机器正在使用哪台机器：将`-Wl,-t`标志添加到您的链接行并查看输出。然后找到`libz.a`属于哪个包，安装到你的CentOS6机器上。*

# php - PHP页面在启动时加载随机图像

> ID：10875721
> 
> 赞同：1
> 
> 时间：2012-06-04T02:30:38.630
> 
> 标签：php, image, random

我想打开一个只包含三个图像之一的网页。我希望在任何给定时间打开一个随机图像。我的代码不起作用。这就是我所拥有的：

```
 <?php
 $imageArray = array(
 1 => array("address" => "Daily_Deals_Updated1.png", "alt_text" => "Image 1"),
 2 => array("address" => "Daily_Deals_Updated2.png", "alt_text" => "Image 2"),
 3 => array("address" => "Daily_Deals_Updated3.png", "alt_text" => "Image 3"),
 );
 ?>
 <!DOCTYPE html>
 <html>
<head>
    <title>Daily Deals</title>
</head>
<body style="width: 100%;">
    <div style="margin: 100px auto 0; width: 454px;">
        <?php
        $randomImageNumber = array_rand($imageArray, 1);
        echo "<img src='" . $imageArray[$randomImageNumber]['address']' . " />";
        ?>

        <!--        <img src="Daily Deals_Updated.png" alt="Daily Deals!" /> -->
    </div>
</body>
 </html> 
```

成功后，我想稍微改变一下随机性，让图像只显示一定百分比的时间。例如，1 张图片 45%，1 张图片 45%，1 张图片 10%。

网页上没有其他内容，只有一张图片。我想把它全部保存在一个脚本上，我不必包含其他文件。

编辑：有效的代码！

```
 <?php
      $images=array(0=>'Daily_Deals_Updated.png',1=>'Daily_Deals_Updated2.png',2=>'Daily_Deals_Updated.png',);
 ?>
 <!DOCTYPE html>
 <html>
<head>
    <title>Daily Deals</title>
</head>
<body style="width: 100%;">
    <div style="margin: 100px auto 0; width: 454px;">
        <?php
            $r = rand(0, 100) / 100;

        if ($r < 0.75) {
            $output="<img src=\"Demonstration_Screen_1.png\" >";
            print($output);
        } else if ($r > 0.76 && $r < 0.94) {
            $output="<img src=\"Demonstration_Screen_2.png\" >";
                print($output);
        } else if ($r > 0.95)  {
            $output="<img src=\"Demonstration_Screen_3.png\" >";
            print($output);
        }
        ?>

    </div>
</body>
 </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T02:34:56.830

生成一个`r`介于 0 和 1 之间的随机数，然后按照下面的伪代码进行操作。

```
if (r < 0.45)
    display first image
else if (r < .9)
    display second image
else
    display third image 
```

这可以扩展到任何数量的案例和每个案例的任何概率。注意第一个来自`[0, 0.45)`，第二个来自`[0.45, 0.9)`，第三个是`[0.9, 1.0]`。您只需要以适合您需要的方式拆分间隔，并且可以有尽可能多的 if/elseif 案例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T03:06:27.003

将图像命名为 img1、img2、img3 等。

然后使用

```
$img=rand(0,3);
$bg="img$img"; 
```

# android - Android 中 GridView 的自定义适配器

> ID：10875723
> 
> 赞同：0
> 
> 时间：2012-06-04T02:30:41.657
> 
> 标签：android

我有让 ListAdapters 工作的经验，并在网上寻找有关自定义适配器与 GridView 接口的教程，但我似乎无法让我的工作。我在线路上收到 NullPointerException：

```
image.setBackgroundColor(Color.GREEN); 
```

我的Activity和Adapter如下： FixtureActivity：

```
package net.blakely.paul.Hyperion;

import android.os.Bundle;
import android.widget.GridView;
import com.actionbarsherlock.app.SherlockActivity;

public class FixtureActivity extends SherlockActivity {

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.fixtures);
        FixtureItemAdapter fia = new FixtureItemAdapter(this, 6);
        GridView grids = (GridView) findViewById(R.id.grids);
        grids.setAdapter(fia);

        }

} 
```

FixtureItemAdapter：

```
package net.blakely.paul.Hyperion;

import android.app.Activity;
import android.graphics.Color;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.TextView;

public class FixtureItemAdapter extends BaseAdapter {

    private Activity context;
    public int size;
    private ImageView image;
    private TextView label;

    public FixtureItemAdapter(Activity context, int size) {
        super();
        this.context = context;
        this.size = size;
    }

    public int getCount() {
        // TODO Auto-generated method stub
        return size;
    }

    public Object getItem(int arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub

        Log.v("Hyperion","convertView is Null?="+Boolean.toString(convertView==null));
        if (convertView == null) {
            LayoutInflater inflater = context.getLayoutInflater();
            convertView = (LinearLayout) inflater.inflate(net.blakely.paul.Hyperion.R.layout.outputitem, null, true);

            image = (ImageView) convertView.findViewById(net.blakely.paul.Hyperion.R.id.imageView1);
            Log.v("Hyperion","image is Null?="+Boolean.toString(image==null));
            label = (TextView) convertView.findViewById(net.blakely.paul.Hyperion.R.id.textView2);

        } 

        // Decide which channel this is and set information accordingly

        image.setBackgroundColor(Color.GREEN);
        label.setText("LABEL");

        return convertView;
    }

} 
```

对此问题的任何帮助将不胜感激。物有所值。我发现我在第一次通过适配器运行时获得了 NPE，当 convertView 为空时，图像最终也为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T03:05:46.903

你打电话

```
image.setBackgroundColor(Color.GREEN);
label.setText("LABEL"); 
```

如果我们不输入if语句图像和标签对象没有实例化，调用setBackroundColr时会得到空指针异常，setText试试：

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub

        Log.v("Hyperion","convertView is Null?="+Boolean.toString(convertView==null));
        if (convertView == null) {
            LayoutInflater inflater = context.getLayoutInflater();
            convertView = (LinearLayout) inflater.inflate(net.blakely.paul.Hyperion.R.layout.outputitem, null, true);

        } 
          image = (ImageView)convertView.findViewById(net.blakely.paul.Hyperion.R.id.imageView1);
          label = (TextView) convertView.findViewById(net.blakely.paul.Hyperion.R.id.textView2);
        // Decide which channel this is and set information accordingly

        image.setBackgroundColor(Color.GREEN);
        label.setText("LABEL"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:27:03.400

I'm sorry, but I found out my problem. It turned out that I was calling the wrong xml file, outputitem instead of fixtureitem, since I had copied that line from a different ListAdapter in the program. Thanks for your answers.

# javascript - JavaScript 对象在创建时变得疯狂？

> ID：10875726
> 
> 赞同：2
> 
> 时间：2012-06-04T02:31:17.680
> 
> 标签：javascript, json, nan, javascript-objects

我目前正在使用 Javascript 开发多人游戏，我的 PlayerList 数据结构/对象似乎有一个非常特殊的问题。

这是对象：

```
var PlayerList = function(){
    this.list = {};
} 
```

该对象具有我通过执行添加的几种方法...

```
PlayerList.prototype.method = function(){...} 
```

方法有：addPlayer、removePlayer、playerInList、findPlayer、jsonify和unjsonify。我对*unjsonify有***很大**的问题。这是代码：

 *```
PlayerList.prototype.unjsonify = function(jsonList){
    var object = JSON.parse(jsonList);
    var li = new PlayerList();
    console.log(li.list.x);
    console.log(li.list.y);
    console.log(li.list);
    //insert the fake player objects from the fake list into the new list as real player objects
    for(p in object.list){
        var pObj = object.list[p];
        //create real player object
        var player = new Player(pObj.name, pObj.x, pObj.y, pObj.velX, pObj.velY);
        li.addPlayer(player);
    }
    return li;
} 
```

这样做的原因是因为如果我只是解析服务器发送的 jsonList 对象，结果对象具有正确的结构，但没有一个 PlayerList 应该具有的方法。

这就是问题所在：我后来注意到，当我浏览 PlayerList.list 并绘制每个玩家时，我收到了这个错误：

> 未捕获的类型错误：对象 NaN 没有方法“getX”

事实证明，由于某种原因，当我在*unjsonify*中创建一个新的 PlayerList 时，它有两个额外的字段 x 和 y，都设置为**NaN**。问题出现在这里：

```
PlayerList.prototype.unjsonify = function(jsonList){
    var object = JSON.parse(jsonList);
    var li = new PlayerList(); 
```

出于某种非常奇怪的原因，li*并不是*应有的新的空 PlayerList。它包含两个额外的变量 x 和 y，都设置为**NaN**。更奇怪的是，它不仅不是一个新的空列表，它还包含当前在服务器上的所有播放器——这对我来说似乎是不可能的，因为客户端第一次获取包含 json 播放器列表的包时它甚至没有有自己的过去版本可以摆脱。

最重要的是，如果您查看*unjsonify*的代码块， console.log(li.list.x) 和 console.log(li.list.y) 都输出*undefined*，然后是 console.log(li.list ) 输出一个对象，该对象（除了服务器上的所有玩家）字段 x 和 y 设置为 NaN。

我完全不知道这怎么可能发生。似乎没有人可以解决这些错误之一，因为它们没有任何意义。但是，如果有人对如何帮助我有丝毫的想法，那将不胜感激！

*我应该注意，在我拥有这个 PlayerList 对象之前，我只是使用了一个没有任何方法的对象原语并手动完成了所有操作（例如 pList.username = player 添加玩家等）并且一切正常（我可以看到其他玩家移动在我的屏幕上等）但由于此时它变得相当大，我想添加一些结构，因此我创建了这个 PlayerList 对象，它应该使我的代码更有条理和漂亮，但到目前为止只引起了比其他任何事情更多的问题.*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T03:07:09.717

您的 PlayerList 没有 .addPlay 方法。

当您使用代码时，更容易在变量可读的地方命名。

```
 function PlayerList() {
                this.list = [];
         };
            //
 PlayerList.prototype.unjsonify = function (jsonList) {
          var jsonLst = JSON.parse(jsonList),
                    myPlayerList = new PlayerList(),
                    player,
                    jsonItem;
                //
      for (var i = 0; i < jsonLst.list.length; i++) {
                    jsonItem = jsonLst.list[i];
                    //
                    player = new Player(jsonItem.name, jsonItem.x, jsonItem.y, jsonItem.velX, jsonItem.velY);

                    myPlayerList.list.push(player);

                };
                return myPlayerList;
            }; 
```

我已将您的 Player.list 从对象更改为数组。*

# ruby - vim 使用 AutoComplPop 插件崩溃

> ID：10875731
> 
> 赞同：7
> 
> 时间：2012-06-04T02:33:50.430
> 
> 标签：ruby, vim

我使用 vim 来编辑 ruby​​ 文件，但是当我输入“.”时它崩溃了。
我发现它是由 AutoComplPop 插件引起的。我该做什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T02:11:40.427

我找到了一种使用 autocomplpop 和 filetype=ruby 来防止 vim 崩溃的方法。

将以下行放入您的**.vimrc**

```
let g:acp_behaviorRubyOmniMethodLength = -1 
```

当您键入“。”时，这将阻止 autocomplpop 触发。（时期）

这不是解决办法。（我不是 vim 插件程序员）

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T08:10:48.147

将此报告给 AutoComplPop 的作者；你会在 找到他的地址`:help acp-author`。说明准确的 Vim 版本（`:version`输出）、插件版本和操作系统/环境，以及重现的准确步骤。

如果您有兴趣，可以深入研究插件的源代码并尝试提出一个显示崩溃的最小片段。如果在最新的 Vim 开发快照中仍然发生此崩溃，则应将其报告给 vim_dev 邮件列表。但通常插件作者最有能力（并且有动力）为您执行此操作。

# node.js - 如何修改js文件然后将其保存回文件？

> ID：10875737
> 
> 赞同：0
> 
> 时间：2012-06-04T02:35:15.847
> 
> 标签：node.js, module

我喜欢在 node.js 中更新一个 javascript 文件（模块）然后保存它。我有以下 js 模块。

```
var test = {
   scripts: ["a.js","b.js"],
   getScripts: function()
   {
        return this.scripts;
   }
}

module.exports = test; 
```

我喜欢在其他模块中加载上述模块，然后更新脚本数组，然后将其保存回文件。我尝试使用**JSON.stringify(test)**，但它不保留 getScripts 方法。

这有什么技巧或窍门吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T05:58:48.813

您几乎需要阅读 using 中的脚本`readfile`，对数组进行*文本*操作`scripts`，然后使用`writefile`.

# android - 正在为泰卢固语报纸开发 RSS 新闻提要阅读器？我如何在 Android 中显示泰卢固语字体？

> ID：10875740
> 
> 赞同：0
> 
> 时间：2012-06-04T02:35:24.340
> 
> 标签：android

> **可能重复：**
> [想要在 android 中显示来自 RSSFeed 的印度地区语言（泰卢固语、印地语、泰米尔语和马拉雅拉姆语）的数据？](https://stackoverflow.com/questions/10687653/want-to-display-data-in-indian-regional-languagetelugu-hindi-tamil-and-malayala)

![在此处输入图像描述](../Images/c06bd6afe88a9a1d9d50ec90e3a5f40e.png)

我想为这样的泰卢固语报纸开发应用程序，任何人都可以帮助我，我想从 RSS 新闻提要阅读器中获取数据......我已经尝试过

```
Typeface tf = Typeface.createFromAsset(getAssets(), "fonts/your_font.ttf");  
   TextView tv = (TextView) findViewById(R.id.CustomFontText);
   tv.setTypeface(tf); 
```

提前致谢

# javascript - 在提交表单按钮中添加 javascript

> ID：10875741
> 
> 赞同：1
> 
> 时间：2012-06-04T02:35:44.923
> 
> 标签：javascript, jquery

我正在尝试在我的表单提交按钮中放置一个 javascript 代码。

```
 $('#BtExcluir').click(function(event){
      var urlParams = event.target.href.split("/");
      if (! confirm("Tem certeza que deseja excluir o usuário?")) 
         return false;
   }); 
```

上面的代码适用于`<a>`元素，但不适用于输入提交按钮。请帮我！

[http://jsfiddle.net/f5Xfw/3/](http://jsfiddle.net/f5Xfw/3/)

我的完整代码：@{ Page.Title = "Editar Usuário";

```
// Inicializar variáveis.
int selectedUserId = -1;
var email = "";
var nome = "";

List<string> statusMessages = new List<string>();

// Get the values from the REST-style URL parameters
selectedUserId = UrlData[0].AsInt(-1);
if (selectedUserId < 0){
    ModelState.AddFormError("Erro: Especificado ID de usuário inválido");
}

if(Request["action"] == "Alterar"){
    nome = Request.Form["nome"];
    email = Request.Form["email"];
    // Valida o nome do usuário
    if (nome.IsEmpty())
    {
        ModelState.AddError("nome","Um nome deve ser informado.");
    }
    // Valida o endereço de email
    if (email.IsEmpty())
    {
        ModelState.AddError("email","Um endereço de email deve ser informado.");
    }

    if (!email.IsEmpty() && !Functions.IsValidEmail(email)) {
        ModelState.AddError("email","O endereço de email informado não é válido.");
    }        

    if (ModelState.IsValid)
    {
        // Verifica se o email está cadastrado
        var user = Usuario.PesquisarEmail(email,selectedUserId);
        if (user == null) {
            if (Usuario.AlterarUsuario(nome, email, selectedUserId) > 0)
            {
                statusMessages.Add(String.Format("Alterado usuário de {0}",nome));
            }
            else
            {
                ModelState.AddFormError(String.Format("Erro: Não foi possível alterar o usuário de  "
                            + "{0}", nome));
            }
        }else{
            ModelState.AddFormError("O endereço de email informado já está em uso.");
        }
    }  
}

else if(Request["action"] == "Excluir"){
    if (Usuario.ExcluirUsuario(selectedUserId) > 0){
        statusMessages.Add("Excluído usuário de ID = " + selectedUserId.ToString());
        selectedUserId = -1;
    }
    else{
        ModelState.AddFormError("Erro: Não foi possível excluir o usuário de ID = "
            + selectedUserId.ToString());
    }
}

else if(Request["action"] == "Voltar para Lista"){
    Response.Redirect("~/Admin/Usuarios/Listar.cshtml",false);
}

else if(Request["action"] == "Novo"){
    Response.Redirect("~/Admin/Usuarios/Cadastrar",false);
} 
```

} ​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T02:46:43.297

您是在说`event.target.href`，但输入按钮没有`href`属性 - 这是一个锚元素的东西（显然，这就是为什么它适用于您的`<a>`）。所以`event.target.href`是未定义的，因此没有`.split()`方法。这是一个错误，执行将在该行停止并且永远不会到达`if (!confirm(...`.

鉴于您从未实际使用过该`urlParams`变量，您可以删除该行。

否则，等效于 的形式`href`是`action`，所以可能是这样的：

```
$('#BtExcluir').click(function(event){
  var urlParams = $(this).closest("form")[0].action.split("/");
  if (! confirm("Tem certeza que deseja excluir o usuário?")) 
     return false;
}); 
```

另请注意，在事件处理程序`this`中将引用事件所属的元素 - 这比说`event.target`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T02:56:47.650

第一个。我看到您有用于、和选项的`submit`按钮。您不会以相同的 default 提交所有这 4 个。`edit``delete``new``back to the list``form` `action`

因此，您必须添加`event.preventDefault();`到`submit`按钮的功能，或者用可以手动处理重定向的常用按钮替换它们。

第二。如果您有一个完整的链接功能，请将其回滚到链接版本以节省大量工作。=]

第三。不要忘记承诺[51 区的](http://area51.stackexchange.com/)[葡萄牙语 Stack Overflow](http://area51.stackexchange.com/proposals/23539/stack-overflow-in-portuguese)提案。 （无耻推销）

如果您遇到无法在此处解决的问题，我也可以建立一个聊天室。=]

# ios - 如何在 UITableView 中显示 JSON 数据

> ID：10875745
> 
> 赞同：1
> 
> 时间：2012-06-04T02:36:41.760
> 
> 标签：ios, xcode, json

我有以下 JSON 数据，这是来自我的 Web 服务的响应。

```
 {"d": [{"raumKlassenObject":"Telepresenzraum"},
{"raumKlassenObject":"Besprechungsraum"},
{"raumKlassenObject":"Videokonferenzraum"},
{"raumKlassenObject":"IT-Schulungsraum"},
{"raumKlassenObject":"Konferenzraum"}]} 
```

如何在 TableView 中显示 Data Telepresenzraum、Besprechungsraum 等。

到目前为止，这是我的代码。

```
 - (void)viewDidLoad
{
    [super viewDidLoad];

    dic = [NSJSONSerialization JSONObjectWithData:result options:kNilOptions error:nil];
    array = [dic allKeys];

}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    // Return the number of rows in the section.
    return array.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

   cell.textLabel.text=[NSString stringWithFormat:@"%@",[dic objectForKey:@"d"]];    

return cell;
} 
```

如果我这样做，Tableview 中的输出是

```
 [{"raumKlassenObject":"Telepresenzraum"},{"raumKlassenObject":"Besprechungsraum"},{"raumKlassenObject":"Videokonferenzraum"},{"raumKlassenObject":"IT-Schulungsraum"},{"raumKlassenObject":"Konferenzraum"}] 
```

我不知道如何在 tableview 行中仅显示 Telepresenzraum、Besprechungsraum、Videokonferenzraum 等。

谢谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T04:50:05.860

您的顶级字典只有一个键“d”，因此 array.count 将为 1，而 [dic objectForKey:@"d"] 将是整个字典数组。

因此，要将这个重新定义数组修复为：

```
array = [[dic valueForKey:@"d"] valueForKey:@"raumKlassenObject"]; 
```

这应该为您提供该键的所有值的数组。然后，将下面的第一行替换为第二行：

```
cell.textLabel.text= [NSString stringWithFormat:@"%@",[dic objectForKey:@"d"]]; 
cell.textLabel.text= [array objectAtIndex:indexPath.row]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T02:40:07.947

您需要对`cell`. **在您滚动一点之前，它将**为零。如果为 nil，则需要使用 UITableView 单元格类的 init 方法实际创建单元格。

# java - 在 ArrayList 中添加和删除元素设置为哈希图中的值

> ID：10875746
> 
> 赞同：0
> 
> 时间：2012-06-04T02:36:42.647
> 
> 标签：java, arraylist, hashmap

所以我有一个看起来像这样的文件：

```
 1st 2nd­ nth
    e1­, ­­v1, 1
    e1, v3, 2
    e1, v4, 4
    e1, v5, 7
    e2, v1, 1
    ., ­., .
    ., ­., .
    ., ­., . 
```

我希望第一列是哈希图（e1、e2 或 e3）的键，值是一个名为“Ratings”的 ArrayList，我希望第二列有它的值（一个 int），在数组列表的第 n 个索引内。

到目前为止，这是我的全部代码：

```
import java.util.*;
import java.io.*;

public class Setup
{
    public static void Setup(String[] args)
    {
        String user;
        int value, location;
        //Create a Hashmap that holds a string key and an ArrayList value
        HashMap<String, ArrayList<Integer>> userRatings = new HashMap<String, ArrayList<Integer>>();
        try
        {
            BufferedReader bufferReader = new BufferedReader(new FileReader("Student list.txt")); //read from file
            String line, sentence; //declare two string variables
            String[] sData; //declare a string array (store the contents here)
            line = bufferReader.readLine(); //Read the line
            while (line != null) //While there is a line, do this:
            {
                line = bufferReader.readLine();
                sData  = line.split(", "); //Into the string array, enter individual values in the line split by the ", " characters
                int iData[] = new int[sData.length]; //Create an int array the size of the string array
                user = sData[0];
                for (int i = 0; i <sData.length; i++) //fill the int array with the int-version of the string array
                {
                    iData[i] = Integer.parseInt(sData[i]); //pass the strings as integers into the integer array
                }
                value = iData[1];
                location = iData[2];
                if(!userRatings.containsKey(user)) //The user does not have ratings.
                {
                    ArrayList<Integer> ratings = new ArrayList<Integer>();
                    //                     ratings = userRatings.get(user);
                    for (int j = 0; j < 50; j++)
                    {
                        ratings.add(j);
                    }
                    System.out.println(user + " " + userRatings.get(user));

                }
                else //The user has ratings
                {
                    userRatings.get(user).add(location,value);
                    System.out.println(user + " " + userRatings.get(user));
                }
            }
            bufferReader.close();
        }    catch (FileNotFoundException e)
        {
            System.out.println("File does not exist or could not be found.");
        }
        catch (IOException e)
        {
            System.out.println("Can't read from file");
        }
        catch (NullPointerException e)
        {
        }
    }
} 
```

我在修改数组列表的内容时遇到问题。

总结一下：文件第一列中的每个字符串在hashmap（userList）中都有自己的键程序将检查它是否有键，如果不存在键，它将创建一个新的arraylist作为值钥匙。arrayList 将填充 50 个索引，其中它们将包含“0”。之后，arraylist 将从文件中添加新值，其中第二列中的整数将添加到第 n 列的相应值。

我将如何填充数组列表，以及如何编辑它，以便如果我想在用户 e6 的第 n 个索引处添加一个新整数，我可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T02:52:55.873

我认为您可以只读取第 n 个值并使用它将值插入列表中。

例如

```
List<Integer> list = new ArrayList<Integer>();
//values values (0) will be inserted into the list
//after that for each value in the nth you do something as follows    
//i is the value in the nth column, if the least value for i is 1 otherwise just use i
list.add(i-1, value); 
```

也为了引用使用，接口而不是实现类如下 -

```
Map<String, List<Integer>> userRatings = new HashMap<String, List<Integer>>();
List<Integer> ratings = new ArrayList<Integer>(); 
```

要将值插入到用户 e6 的第 n 个索引中：

```
List<Integer> ratings = userRatings.get(user); 
if(ratings == null) { 
     ratings = new ArrayList<Integer>(); //it's not in the map yet
     //insert 50 0s here
     userRatings.put(user, ratings);
}
ratings.add(i, value); //i is the nth index and value is the rating 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T02:52:38.957

当您的地图中不存在给定键时，您必须添加一个新的键值对

```
if(!userRatings.containsKey(user)) //The user does not have ratings.
{
   ArrayList<Integer> ratings = new ArrayList<Integer>();                   
   for (int j = 0; j < 50; j++) {
       ratings.add(j);
  }
  userRatings.put(user, ratings); // place new mapping 
  System.out.println(user + " " + userRatings.get(user));
} else //The user has ratings
{
    ArrayList<Integer> ratings  = userRatings.get(user);
    ratings.add(location,value); // Update your list with location and value
    System.out.println(user + " " + userRatings.get(user)); 
} 
```

`iData[i] = Integer.parseInt(sData[i]);`这将不起作用，因为它会抛出您的文件内容，`NumberFormatException`因为 v1 无法解析为 int。

相反，您可以执行以下操作：

```
value = Integer.parseInt(sData[1].trim().substring(1));
location = Integer.parseInt(sData[2].trim()); 
```

比较两个键的值：

方法一

```
ArrayList<Integer> first = userRatings.get(e1);
ArrayList<Integer> second = userRatings.get(e2);

//Taking the smallest size will ensure that we don't get IndexOutOfBoundsException.

int length = first.size() < second.size() ? first.size() : second.size();

for(int iDx = 0; iDx < legth; iDx++){
   //compare content
} 
```

方法二

```
ArrayList<Integer> first = userRatings.get(e1);
ArrayList<Integer> second = userRatings.get(e2);

Arrays.equals(first.toArray(), second.toArray()); 
```

# android - Button.setCompoundDrawablesWithIntrinsicBounds() 的左/右填充？

> ID：10875750
> 
> 赞同：25
> 
> 时间：2012-06-04T02:37:24.543
> 
> 标签：android

我正在尝试在按钮上设置左图标：

```
setCompoundDrawablesWithIntrinsicBounds(R.drawable.foo, 0, 0, 0); 
```

但是该图标与按钮的左边缘和文本字符串齐平。有没有办法在提供的图标上指定一些左/右填充，使其不会正好靠在边缘？

谢谢

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-04T02:57:40.627

我相信你正在寻找的是[`android:drawablePadding`](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3adrawablePadding)

这是一个在按钮中使用和定位`drawablePadding`图像`paddingLeft`的示例`paddingRight`

```
<Button
    android:id="@+id/button"
    android:layout_width="200dp"
    android:layout_height="80dp"
    android:drawableLeft="@drawable/ic_launcher"
    android:drawablePadding="2dip"
    android:paddingLeft="30dip"
    android:paddingRight="26dip"
    android:text="Test" /> 
```

![图片示例](../Images/85e9d8eebaff0fc1fc1eb4da5648ffbd.png)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-01-19T15:49:02.387

对于任何寻找程序化方式的人，这里有一个例子：

```
menuButton.setCompoundDrawablesWithIntrinsicBounds(R.drawable.foo, 0, 0, 0);
menuButton.setCompoundDrawablePadding(10); 
```

# ios - zbar - 扫描仪框架，如何使其横向

> ID：10875754
> 
> 赞同：1
> 
> 时间：2012-06-04T02:38:11.630
> 
> 标签：ios, camera

我在将相机/扫描仪设置为横向模式时遇到问题，即使我将屏幕更改为横向，但相机/扫描仪仍然看起来是垂直的。

我可以知道应该做些什么来解决这个问题吗？在相机 APi 上还是应该在 zbar 库上进行更改？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T14:22:28.787

您必须为阅读器设置方向掩码：

```
reader.supportedOrientationsMask = ZBarOrientationMaskAll; 
```

您可以在 ZBarReaderViewController 中编辑掩码：

```
// orientation set support
#define ZBarOrientationMask(orient) (1 << orient)
#define ZBarOrientationMaskAll \
(ZBarOrientationMask(UIInterfaceOrientationPortrait) | \     
ZBarOrientationMask(UIInterfaceOrientationPortraitUpsideDown) | \
ZBarOrientationMask(UIInterfaceOrientationLandscapeLeft) | \
ZBarOrientationMask(UIInterfaceOrientationLandscapeRight)) 
```

# r - 使用 R、abind 和其他函数处理 Poisson 是否有效？

> ID：10875757
> 
> 赞同：0
> 
> 时间：2012-06-04T02:39:39.667
> 
> 标签：r

我正在尝试帮助我的女朋友完成 R 课程的任务。我对代码一无所知，我知道 C++，但 RI 不知道。

我正在阅读文档，但如果你能帮助我，那就太好了！

以下代码来自[该](http://sfb649.wiwi.hu-berlin.de/quantnet/index.php?p=show&id=1381)网站。

代码第一部分：

```
# rm(list=ls(all=TRUE))  
# It's discourteous to wipe out your responder's entire workspace
install.packages("abind")
library(abind)
simHPP<-function(lambda,T,N){
    # lambda: scalar, intensity of the Poisson process 
    # T: scalar, time horizon
    # N: scalar, number of trajectories
    EN <- rpois(N,lambda*T)
     y <- matrix(T,nrow=2*max(EN)+2,ncol=N)*matrix(1,nrow=2*max(EN)+2,ncol=N)
    yy <- abind(y,matrix(1,nrow=2*max(EN)+2,ncol=N)*EN,along=3)
i=1
  while(i<=N){
    if(EN[i]>0){
    yy[1:(2*EN[i]+1),i,1] <- c(0,rep(sort(T*runif(EN[i])),each=2))
    } else {
    yy[1,i,1]=0
    }
    yy[1:(2*EN[i]+2),i,2] <- c(0,floor((1:(2*EN[i]))/2),EN[i])
    i=i+1
  }
  return(yy)
} 
```

功能`abind`，它是如何工作的？R中的赋值运算符（=）看起来像（<-）？

例如，这是在做什么？

```
yy[1:(2*EN[i]+1),i,1] <- c(0,rep(sort(T*runif(EN[i])),each=2)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T03:04:36.703

有一个代码审查网站，这可能是合适的，因为您（部分）要求解释您没有给出上下文的代码。

（t 使用大写 T 作为向量名称虽然不是错误，但令人困惑，因为对该名称的默认分配是逻辑 TRUE。）

`abind`将数组作为参数并返回增广数组。如果您有两个 2 x 2 x 2 数组，`abind`那么您将得到一个 2 x 2 x 4 数组

```
abind( array(1:8, c(2,2,2) ),  array (9:16, c(2,2,2)))
#------------
, , 1
     [,1] [,2]
[1,]    1    3
[2,]    2    4

, , 2
     [,1] [,2]
[1,]    5    7
[2,]    6    8

, , 3
     [,1] [,2]
[1,]    9   11
[2,]   10   12

, , 4
     [,1] [,2]
[1,]   13   15
[2,]   14   16 
```

# serialization - 将对象转换为可序列化对象的术语

> ID：10875760
> 
> 赞同：0
> 
> 时间：2012-06-04T02:39:55.527
> 
> 标签：serialization, marshalling, dto, vocabulary

我正在设计一个系统，用于将内存中的对象序列化为多种格式（即 json、协议缓冲区等）。为此，我使用了两步过程：首先，我为要序列化的每个类定义方法，以将其转换为更简单、可序列化的对象，即具有简单树结构且没有内存引用的对象。在第二步中，我定义了一个模式，用于将这些简单的可序列化对象转换为例如 json、xml 或协议缓冲区。

我想知道我在做什么是否有任何 CS 术语？我假设第二步称为序列化或编码，但第一步叫什么？即将一个对象转换为另一个对象以使其可序列化？这是编组吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T02:45:48.540

“简单”对象通常称为 DTO（数据传输对象）。术语“编组”倾向于与“序列化”互换使用，尽管“序列化”可能更多地用于二进制格式，而“编组”更多地用于文本格式。

# python - 芹菜适合这个任务吗？

> ID：10875761
> 
> 赞同：0
> 
> 时间：2012-06-04T02:39:58.340
> 
> 标签：python, celery, distributed-computing

此查询与我的[Google Summer of Code 项目](http://www.google-melange.com/gsoc/project/google/gsoc2012/amitsaha/24001)有关。基本上，我有一个主节点，它将构建任务委托给许多指定的图像构建节点。现在，我使用手册“scp”进行操作，然后使用“ssh”策略进行远程执行。所以，我没有任何调度或任务分配 - 自动。

我现在正在寻找一种可能比我目前的策略更好的解决方案。我在看“芹菜”，并玩弄了一下。我已经能够远程运行一个简单的工作。但是，据我所知，芹菜需要*工作节点*的源文件。我也无法探索 celery 是否会进行自动任务分配/调度？我使用 RabbitMQ 作为代理。

我是新手，所以任何更有经验的人肯定可以建议芹菜是一个不错的选择，还是有什么更适合这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:49:12.153

I was a little confused. And I have it figured out. Celery will automatically choose one of the workers using the same broker. So, yes, it does the scheduling and distribution.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T09:40:38.883

Celery does need access to the worker source, as really it's just a decorator around your functions that cause them to run differently. However, you can change what a worker node is. You just write a python script on the master node that does exactly what you have been doing (scp, ssh). This becomes the "worker". You'd then make a controlling script (feed file locations, urls, so on so forth) also on the master node and run that using Celery. The Celery server would then handle task scheduling, distribution, either via crontab like periodic taks [(here)](http://docs.celeryproject.org/en/latest/userguide/periodic-tasks.html) or you can just wait on the result of a running task ([here](http://docs.celeryproject.org/en/latest/reference/celery.result.html)) and then have it schedule a new one on finish.

# c - C中的数组是否有等效的indexOf？

> ID：10875762
> 
> 赞同：3
> 
> 时间：2012-06-04T02:40:02.583
> 
> 标签：c, arrays

我是 C 的新手，希望有一些内置的东西我可以使用。假设我有一个列表，我想查找列表的位置（列表中的所有项目都是唯一的）。像这样： `char *name[] = {"monkey", "pig", "goat", "dog", "cat"};`我试过：

```
 char *name[] =  {"monkey", "pig", "goat", "dog", "cat"};
   int *found = strstr (*name,"dog");
   printf("Found at %i \n", found); //expect 3(or 4, if it doesn't use 0s) result 
```

但它一直给我 2 的结果（即使我输入了不存在的名称）。我换`strstr`了`strcspn`也没有运气。

我之所以问是因为我不确定并且我创建了自己的函数来执行此操作，但是它非常糟糕而且不是很灵活（我在其中硬编码了列表名称），我想如果 C 中有一些东西那么它会更好我。这是我制作的功能（如果您不想失去阅读它的脑细胞，请遮住眼睛，开玩笑:-)：

```
int indexOf(char nameToFind) {
    //returns the location of an item in a list
    int pos = -1;
    int i;
    for (i = 0; i < sizeof(name) / sizeof(name[0]) && pos == -1; i++)
    {
        // Assuming there is a char[] field called name in Stdinfo
        if (*name[i] == nameToFind) {
            pos = i;
        }
    }
    return pos;
} 
```

C 中是否存在这样的东西，它比我的版本更快、更灵活？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T02:57:39.027

您编写的代码在几个级别上是错误的。你的线

```
char *name[] = {"monkey", "pig", "goat", "dog", "cat"}; 
```

创建一个指针数组`char`，每个指针指向一个 -`NULL`终止的字符串。到目前为止，一切都很好。但是，您的线路

```
int *found = strstr (*name,"dog"); 
```

设置`found`为指向 in 的第一次出现的`"dog"`指针`*name = name[0] = "monkey"`。除了不按预期查看数组外`name`，您还将`char *`返回的 by分配`strstr`给`int *`. 不好。你的下一行

```
printf("Found at %i \n", found); 
```

尝试打印`found`，但说明符需要 an`int`并且您正在传递它`found`， an `int *`。这些都是要避免的事情，我认为其中很多是未定义的行为。

你想要的是一个使用 的循环，`strcmp`例如：

```
char *name[] = {"monkey", "pig", "goat", "dog", "cat"};
unsigned int numElements = sizeof(name)/sizeof(name[0]);
unsigned int i;
for(i = 0; i < numElements; ++i) {
    if (strcmp(name[i], "dog") == 0) {
        printf("Found at %u\n", i);
        break;
    }
}
if (i >= numElements) {
    printf("Not found\n");
} 
```

如果将数组传递给函数，以这种方式计算`numElements`将不起作用，因此在这种情况下您必须显式传递元素的数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T02:42:19.533

对于字符数组，有一个[`strchr`](http://en.cppreference.com/w/cpp/string/byte/strchr)函数，它在数组中搜索字符。如果找到它，它会返回一个指向该字符的指针。如果不是，它将返回一个 NULL 指针。然后，您可以使用指针减法来确定索引。

[`bsearch`](http://en.cppreference.com/w/cpp/algorithm/bsearch)对于一般数组，如果对数组进行排序，则有库函数。大多数编译器提供了一个[`lsearch`](http://praxis.edoceo.com/man/3/LSEARCH)非标准函数，它只是对数组进行线性搜索以找到给定值。

如果您使用的是 C++，那么您可以访问执行类似任务的 、 和 STL`find`算法`lower_bound`。`upper_bound`

希望这可以帮助！

# android - MapActivity 上 EditText 中的不可见文本

> ID：10875768
> 
> 赞同：0
> 
> 时间：2012-06-04T02:41:15.197
> 
> 标签：android, android-mapview, android-edittext

我正在开发的 android 应用程序有问题。

我在屏幕顶部有一个`Activity`带有一个的，以及一个占据其余空间的地图。`EditText`问题是`EditText`不显示我放入的任何文本。您可以聚焦`EditText`并键入更多文本，甚至可以选择应用程序放入的文本`EditText`并复制它。当您将其粘贴到另一个应用程序中时，您可以看到它是假设在`EditText`. 所以我知道文本在那里，但我真的不明白为什么没有显示文本。

我尝试更改背景颜色`EditText`（有效，但文本仍然不可见）并更改文本颜色（没有改变）。这是我的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:focusable="true"
    android:focusableInTouchMode="true"
    android:orientation="vertical" >

<EditText
    android:id="@+id/status"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="@string/findingSatellites"
    android:inputType="text"
    android:ems="10" />

    <com.google.android.maps.MapView
        android:id="@+id/bigMap"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:apiKey="someapikey"
        android:clickable="true" >
    </com.google.android.maps.MapView>

</LinearLayout> 
```

地图显示正确。你能帮助我吗？

**更新：**
我试图从 XML 文件（和代码）中注释掉地图，现在`EditText`渲染里面的文本。我还尝试注释掉我的 MapOverlay，但现在仍然显示文本。我尝试用`EditText`a替换，`TextView`结果相同。有地图时怎么没有文字呈现`Activity`？

**UPDATE2：**
我已根据您的建议修改了我的 xml。这就是我现在所拥有的：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:focusable="true"
    android:focusableInTouchMode="true" >

    <RelativeLayout 
        android:id="@+id/statusLayout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" >

        <EditText
            android:id="@+id/status"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:inputType="text"
            android:text="@string/findingSatellites" />
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/mapLayout"
        android:layout_below="@id/statusLayout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true" >

        <com.google.android.maps.MapView
            android:id="@+id/bigMap"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:apiKey="0ZGxti1I-qNSsMmsOCqnbPsnNG7Sl4U2aHvDc-Q"
            android:clickable="true" />

    </RelativeLayout>

</RelativeLayout> 
```

它仍然不呈现任何文本。

这是正在发生的事情的图片：

![标记了一些不可见文本的 EditText](../Images/c25d9c8c3635e5915b3e25d01c00209d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:50:39.867

我发现了问题。android 上的颜色由整数表示为 ARGB，我来自仅使用 RGB 的 HTML/CSS 背景。这使我将 textcolor 的 alphachannel 设置为 0，这意味着完全透明。我真的很傻！谢谢你们的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T02:52:40.050

我会尝试使用 a来`RelativeLayout`定位`MapView``EditText`

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:focusable="true"
    android:focusableInTouchMode="true" >

    <EditText
        android:id="@+id/status"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:ems="10"
        android:inputType="text"
        android:text="@string/findingSatellites" />

    <com.google.android.maps.MapView
        android:id="@+id/bigMap"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:apiKey="someapikey"
        android:layout_below="@id/status"
        android:clickable="true" >
    </com.google.android.maps.MapView>

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T11:27:14.980

放入`editText`另一个布局。

# objective-c - 类和 viewController.m 之间的委托

> ID：10875770
> 
> 赞同：0
> 
> 时间：2012-06-04T02:41:19.273
> 
> 标签：objective-c, ios, delegates

我有`PGMidi.h`以下代表

```
@protocol PGMidiSourceDelegate
- (void) midiSource:(PGMidiSource*)input midiReceived:(const MIDIPacketList *)packetList; 
```

然后在我的`viewController.m`我只是想得到一个`NSLog`委托被调用的时间

```
@interface viewController () <PGMidiDelegate, PGMidiSourceDelegate>

@end

@implementation viewController;

- (void) midiSource:(PGMidiSource*)midi midiReceived:(const MIDIPacketList *)packetList   
{
  NSLog(@"test");
} 
```

我知道代表正在工作，因为在`PGMidi`课堂上我也放了

```
- (void) midiSource:(PGMidiSource*)midi midiReceived:(const MIDIPacketList *)packetList  
{
 NSLog(@"test");
} 
```

它有效。

但由于某种原因，它没有与 viewController.m 通信。我还在标题中声明了@PGMidi 类。但也许我必须导入整个 PGMidi.h？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T02:51:23.257

在您的 PGMidi.h 中，您实际上应该声明一个委托属性，即

```
@property (nonatomic, assign) id<PGMidiSourceDelegate> delegate; 
```

确保`synthesize`在您的 PGMidi.m 文件中具有该属性。然后，在您的 PGMidi.m 中，您应该这样做：

```
-(void) midiSource:(PGMidiSource*)midi midiReceived:(const MIDIPacketList *)packetList {
    [delegate midiSource:midi midiReceived:packetList];
} 
```

您还需要将视图控制器实际设置为 PGMidi 对象的委托：

```
myPGMidi.delegate = myViewController; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T02:51:23.750

您是否包括在 PGMidi.h`@end`中结束您的代码？`@protocol PGMidiSourceDelegate`还要确保在 viewController.h 中您说的是`@interface viewController : (parentClass) <PGMidiSourceDelegate`。(parentClass) 是 viewController 继承自的任何类。基本上，要么你的问题是你忘记了@end，要么你没有指定 viewController 是 PGMidi.h 的代表。

# java - 将文本文件每行的第一个单词读入 ArrayList

> ID：10875771
> 
> 赞同：0
> 
> 时间：2012-06-04T02:41:30.267
> 
> 标签：java, file-io, arraylist, bufferedreader, fileinputstream

我有一个很长的本地文本文件，我想编写一个方法来读取它并将每行的第一个单词添加`ArrayList`到`Strings`.

我对基本的 I/O 操作有一个非常原始的理解。现在，据我了解，我需要让某种`InputReader`对象读取每个第一个单词，然后使用类似 an 的东西依次添加`OutputStreamBuffer`每个单词。我在正确的轨道上吗？`Strings``ArrayList`

如果这是正确的，我不确定正确的语法是什么（尤其是`InputStreamReader`在复制每行中的第一个单词后转到下一行。如果我什至不接近，你会怎么做伙计们呢？

非常感谢大家的帮助。我希望我的描述对你来说足够清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T02:47:15.467

您走在正确的轨道上-这是我对您的要求的一般建议...

1.  创建一个`ArrayList<String>`用于存储您的单词
2.  使用 a`BufferedReader`逐行读取文件`readLine();`
3.  拆分行并仅阅读第一个单词（可能使用`String.split()`方法或`StringTokenizer`正则表达式）
4.  将单词存储在`ArrayList`using`add()`方法中，然后从第 2 点读取下一行。

不需要`OutputStream`为您的使用`ArrayList`，那只是使事情复杂化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T02:55:04.363

我会使用`java.util.Scanner`，特别是 hasNextLine 和 nextLine 方法来获取每一行。

然后在每一行上使用另一个扫描仪和 hasNext 和 next 方法来获取第一个单词，或者使用 String split 方法（或其他方式）来获取第一个单词。

然后将第一个单词添加到`ArrayList<String>`.

# javascript - 提交前检查下拉列表中的值

> ID：10875772
> 
> 赞同：-4
> 
> 时间：2012-06-04T02:41:55.210
> 
> 标签：javascript, jquery

我需要帮助提交具有相同值的多个下拉列表的表单，

**条件：**如果`email`未选择警报电子邮件需要选择否则检查已选择的值

```
<form method="post" action="record_save.php">
    <div id="student_records">
        <select name="select1">
            <option value="0">None</option>
            <option value="1">email</option>
            <option value="2">firstname</option>
            <option value="3">lastname</option>
        </select>
        <select name="select2">
            <option value="0">None</option>
            <option value="1">email</option>
            <option value="2">firstname</option>
            <option value="3">lastname</option>
        </select>
        <select name="select3">
            <option value="0">None</option>
            <option value="1">email</option>
            <option value="2">firstname</option>
            <option value="3">lastname</option>
        </select>
        <!-- until -->
        <select name="select10">
            <option value="0">None</option>
            <option value="1">email</option>
            <option value="2">firstname</option>
            <option value="3">lastname</option>
        </select>
        <input type='submit' name='submit'>
    </div>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T03:00:24.020

这应该做你想要的。

我遍历选定的选项并计算每个选项出现的次数。在第一次检测到重复时，我添加了一条错误消息。我还确保选择了一封电子邮件。如果有任何错误，我们会提醒他们，否则表单将被提交。

```
(function ($) {

    var form = $('#student_records').parent();

    form.submit(function (event) {

        event.preventDefault();

        var selected = {},
            errors = [];

        form.find('option:selected').each(function (index, elem) {

            var val = $(elem).val().trim();

            if (! selected[val]) {
                selected[val] = 1;
                return;

            } else if (selected[val] == 1) {

                errors.push('Already selected: ' + $(elem).text());
            }

            selected[val] += 1;
        });

        if (! selected[1]) {
            errors.push('Must select email.');
        }

        if (errors.length) {
            alert(errors.join("\n"));
            return;
        }

        form.submit();
    });

}) (jQuery); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T02:53:10.870

您应该使用 JQuery 或 JavaScript 来检查值。如下所示：

```
 if (validateTheForm()) { 
    $('#yourForm').submit();
 }

function validateTheForm () {
$(':text, select, textarea').each(function() {  
    if ($(this).val().trim().length == 0) {  
        $(this).addClass('errorField'); 
            return false; 
    } else {
        $(this).removeClass('errorField').addClass('successField');
        return true;
    }    
});
}; 
```

# c - 如何将char数组与字符串进行比较

> ID：10875777
> 
> 赞同：0
> 
> 时间：2012-06-04T02:42:53.753
> 
> 标签：c, arrays, string, filter, compare

我的程序是从 Zigbee 接收数据并对其进行过滤以获得我想要的。

```
unsigned char idata buff[100];            //To read data from rawrxd[] and process data
unsigned char count=0;                    //To store counter for rawrxd[]
unsigned char buff_count=0;               //store counter for buff[], read counter for rawrxd[]
if(buff_count!=count)                   //checking Is there any unread data?
    {
        if(buff_count==100)                 //go back to start position of array
        buff_count=0;

        buff[buff_count] = rawrxd[buff_count];  //read the data

        if(strcmp(buff, "UCAST:000D6F0000A9BBD8,06=!221~@") ==0)
        {
        ES0=0;
        Serial_txString("AT+UCAST:000D6F0000A9BBD8=!222~@");
        tx(0x0D);
        tx(0x0A);
        ES0=1;
        }

        if(strcmp(buff, "UCAST:000D6F0000A9BBD8,06=!221#@") ==0)
        {
        ES0=0;
        Serial_txString("AT+UCAST:000D6F0000A9BBD8=!222#@");  
        tx(0x0D);
        tx(0x0A);
        ES0=1;
        }

        buff_count++;                           //increase the read_count
    } 
```

这就是缓冲区应该如何接收UCAST，然后将它与字符串进行比较，如果它相同，则返回0。但是，它只比较一次，之后我收到下一个UCAST，它根本不比较.

此外，它的第一次比较必须相同才能工作。如果收到错误的字符，然后收到正确的字符，它将无法工作。由此看来，是指针问题吗？因为我的缓冲区是一个字符数组，我试图将它与一个字符串进行比较。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T03:52:38.753

通过分配您拥有的方式：

```
buff[buff_count] = rawrxd[buff_count]; 
```

您只是将 rawrxd 缓冲区的第一个元素分配给 buff 变量。它是变量赋值，而不是指针赋值。

因为，两者都具有相同的缓冲区大小，所以就等于两个基指针，如下所示：

```
buff = rawrxd; 
```

然后执行 strcmp()，或者更好的是，使用 strncmp()，因为字节（元素）的数量是固定的。

希望能帮助到你。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T03:00:21.170

问题是`buff[]`在进行字符串比较之前没有 NUL 字符。所以`strcmp()`没有感觉到你认为应该接收到的字符串的结尾（而不是看到之前数组中剩下的任何内容），所以它永远不会匹配。

```
 buff [buff_count] = rawrxd[buff_count];  //read the data
     buff [++buff_count] =  '\000';       /*  you need to add this */ 
```

加上这个，`strcmp()`s 有机会工作，如果一切都好的话。

另外，我很确定您可以整理和优化代码序列

```
 Serial_txString("AT+UCAST:000D6F0000A9BBD8=!222~@");
    tx(0x0D);
    tx(0x0A); 
```

进入

```
 Serial_txString("AT+UCAST:000D6F0000A9BBD8=!222~@\x0d\x0a"); 
```

# c# - 在 C# 中使用 AD 凭据登录

> ID：10875791
> 
> 赞同：0
> 
> 时间：2012-06-04T02:46:13.640
> 
> 标签：c#, asp.net, active-directory

我正在使用以下代码来验证 AD 用户

```
string strLDAP = "LDAP://dc=ADServerIP/cn=Users,DC=Domain;
DirectoryEntry entry = new DirectoryEntry(strLDAP, usr, pwd);
object nativeObject = entry.NativeObject;
return true; 
```

执行时出现以下异常

```
object nativeObject = entry.NativeObject; 
```

> System.Runtime.InteropServices.COMException (0x80005000):
> System.DirectoryServices.DirectoryEntry.Bind(Boolean throwIfFail)
> 在 System.DirectoryServices.DirectoryEntry.Bind()
> 在 System.DirectoryServices.DirectoryEntry.get_NativeObject() 的未知错误 (0x80005000)

相同的代码适用于另一台 AD 服务器。可能是什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T05:04:34.590

您正在使用 .NET 3.5 或更高版本吗？如果是这样，您可以使用 System.DirectoryServices.AccountManagement 命名空间并轻松验证您的凭据：

```
// create a "principal context" - e.g. your domain (could be machine, too)
using(PrincipalContext pc = new PrincipalContext(ContextType.Domain, "YOURDOMAIN", usr, pwd))
{
    // validate the credentials
    bool isValid = pc.ValidateCredentials("myuser", "mypassword");
} 
```

它很简单，很可靠，它是 100% 的 C# 托管代码 - 您还能要求什么？:-)

在这里阅读所有相关信息：

*   [Managing Directory Security Principals in the .NET Framework 3.5](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)
*   [MSDN docs on System.DirectoryServices.AccountManagement](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)

# iphone - 对 UIGraphicGetCurrentContext() 感到困惑

> ID：10875797
> 
> 赞同：0
> 
> 时间：2012-06-04T02:47:20.037
> 
> 标签：iphone, cgcontext

我正在做一些定制并面对

```
CGContextRef context = UIGraphicsGetCurrentContext(); 
```

我的问题：这个上下文的默认大小是多少以及这个上下文的大小是如何定义的。

编辑 ：

我问是因为我在链接 1和链接 2 上[关注](http://www.raywenderlich.com/2079/core-graphics-101-shadows-and-gloss)[教程](http://www.raywenderlich.com/2033/core-graphics-101-lines-rectangles-and-gradients)......

请看一个上下文，当我们有红色的背景单元格和红色`link1`的标题部分时`link2`。

但是，即使它们是子类，它们的宽度也不相同`UIView`，我迷失了寻找原因......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T04:53:06.083

我不明白你的问题是什么，特别是当 Raywenderlich 的教程非常清楚地说明它时。

```
CGContextRef context = UIGraphicsGetCurrentContext(); 
```

将为您提供当前的“画布”，然后您只需更改该画布的状态。

```
CGContextRef context = UIGraphicsGetCurrentContext();

CGColorRef redColor = 
    [UIColor colorWithRed:1.0 green:0.0 blue:0.0 alpha:1.0].CGColor;

CGContextSetFillColorWithColor(context, redColor);
CGContextFillRect(context, self.bounds); 
```

根据苹果文档，大小由您调用 get context 函数的任何位置定义，该函数在自定义 drawRect 方法中被调用：

> 当前图形上下文默认为 nil。在调用它的 drawRect: 方法之前，视图对象将一个有效的上下文压入堆栈，使其成为当前的。但是，如果您不使用 UIView 对象进行绘图，则必须使用 UIGraphicsPushContext 函数手动将有效上下文推送到堆栈上。

因此，当 self.bounds 被传递时，将使用调用此函数的元素的大小。

甚至可以为不同大小的不同单元格调用此代码，因为每个单元格都会调用 drawRect 方法并获得相应的大小。

也许您的困惑在于它们是 UIView 的子类，这并不意味着它们具有故事板视图中的“UIView”属性。这意味着它们是与 uiview 具有相同结构的元素（这就是它们可以调用 drawRect 的原因），但是您将针对所需的行为进行扩展或自定义。

PD：刚刚注意到我今天早些时候回答了你的另一个问题哈哈。

# javascript - 在 JavaScript 中使用全局引用是一种好习惯吗？

> ID：10875808
> 
> 赞同：0
> 
> 时间：2012-06-04T02:49:37.060
> 
> 标签：javascript

例如javascript代码是：

```
function a() {  
    this.Foo = function() {//...}
} 
```

我通常做的是创建一个全局引用：

```
_a = new a(); 
```

然后在正文或其他脚本区域中的任何地方使用它：

```
_a.Foo() 
```

这是好还是坏的做法？还是有更好/更专业的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T02:54:27.203

一般来说，Javascript 开发人员会尽量避免这种情况，因为不同的库在全局范围内可能会相互冲突。为避免这种情况，请考虑（如果可能）使用所谓的*闭包*为变量创建私有范围。看起来像这样：

```
(function() {
    _a = new a();
})(); 
```

内部函数内部声明的所有内容对于外部代码都是不可见的。

如果出于某种原因您不能使用闭包，那么另一种方法是为您的变量创建一个“命名空间”。

```
var MyCompany = { };
MyCompany.MyLibrary = { };
MyCompany.MyLibrary._a = new a(); 
```

通过这种方式，您可以将代码限制为获取单个全局名称 (MyCompany)，而其他变量和方法位于该名称空间内。

# .htaccess - htaccess 重写 url

> ID：10875811
> 
> 赞同：1
> 
> 时间：2012-06-04T02:49:51.380
> 
> 标签：.htaccess, url, rewrite

我将如何更改以下 htaccess：

```
RewriteEngine On
RewriteRule ^([^/]*)/([^/]*)\.html$ /index.php?administration=$1&pid=$2 [L] 
```

不仅影响像这样的网址

```
www.example.com/administration/modules //this is working allready 
```

但也有像 fe 这样的 url

```
www.example.com/upload/category 
```

要不就

```
www.example.com/news 
```

提前感谢，杰登

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T21:00:33.200

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

## If the request is for a valid file
RewriteCond %{REQUEST_FILENAME} -f [OR]
## If the request is for a valid link
RewriteCond %{REQUEST_FILENAME} -l
## don't do anything
RewriteRule ^ - [L]

RewriteRule ^([^/]+)/([^/]+)/?$ /index.php?$1=$1&pid=$2 [L,QSA]
RewriteRule ^([^/]+)/?$ /index.php?pid=$1 [L,QSA] 
```

# sql-server-2008-r2 - 如何在扩展属性中保存二进制文件？

> ID：10875812
> 
> 赞同：0
> 
> 时间：2012-06-04T02:49:55.567
> 
> 标签：sql-server-2008-r2, extended-properties

我使用此代码在我的扩展属性中保存一个字符串，

```
EXEC sp_addextendedproperty @name = N'SampleProperty1', @value = N'SampleValue1' 
```

我的问题是，我可以在保存像图像这样的二进制文件时使用该代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T03:28:12.427

我建议您考虑将图像存储在磁盘上并将扩展属性设置为图像的路径/URL。虽然理论上扩展属性可以是任何支持的数据类型`SQL_VARIANT`（因此您可以传递`varbinary`数据），但限制为 8,016 字节，因此除非您的图像非常简单/很小，否则它们无论如何都会被截断且无法使用。将它们存储在扩展属性中的另一个问题是，在 SQL Server 中，您无法真正解决它们 - 当您使用诸如`sys.fn_listextendedproperty`.

# iphone - 如何使 UITableViewCell 上的滑动删除按钮变小？

> ID：10875814
> 
> 赞同：2
> 
> 时间：2012-06-04T02:50:06.830
> 
> 标签：iphone, ios, cocoa-touch, uitableview

我在这里卡了几天。。

我的 TableViewCell 的高度很短。我喜欢它，除了滑动删除按钮。

它太大了，以至于那个按钮弄乱了我的桌子……不漂亮。

请让我知道如何调整我的 tableview 上的删除按钮的大小...

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T03:05:58.093

它可能比最初所说的更复杂，但使用了我在下面所说的大部分内容。看看这个 StackOverflow 链接。

[UITableViewCell 自定义editingAccessoryView - 未正确关闭](https://stackoverflow.com/questions/7699431/uitableviewcell-custom-editingaccessoryview-not-properly-dismissed)

您可以设置自己的 UIView 并使用 editingAccessoryView 属性。

在此视图中，您将实现自己的删除按钮（无论您希望它看起来如何）并捕获自己按下的删除按钮。

# ruby-on-rails - 在 Heroku 上使用 open-uri 运行 rake 任务会导致连接被拒绝错误

> ID：10875823
> 
> 赞同：0
> 
> 时间：2012-06-04T02:51:33.017
> 
> 标签：ruby-on-rails, heroku, open-uri

我编写了一个 rake 任务，它使用来自第三方 API 的数据填充我的数据库。

```
namespace :populate do
desc "Populate database with data from first page of TicketWeb API"
task :one_page => :environment do
    require 'open-uri'
    json_data = open(SOME_URL).read
    parsed_json = JSON.parse(json_data)
    parsed_json["events"].each do |e|
        existing_event = Event.find_by_id(e["eventid"])
        if existing_event == nil
            new_event = Event.new(e)
            new_event.save
        else
            existing_event.update_attributes(e)
        end
    end
end 
```

结尾

在我的机器上本地运行时，这非常有效。但是，在 Heroku 实例上运行它会导致此错误：

耙中止！连接被拒绝 - 连接(2)

我承认我对 Rails 不是很有经验，所以我不确定我是否以正确的方式从第三方 API 获取数据，或者 Heroku 是否只是不喜欢我正在做的事情。我只是难住了，此刻。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T04:18:49.887

Turns out the third-party API was blocking any requests coming from Heroku.

I got around this by pushing my local database to Heroku's database with this command:

```
heroku db:push 
```

# erlang - mnesia db查询，多键同时查询

> ID：10875827
> 
> 赞同：3
> 
> 时间：2012-06-04T02:52:29.457
> 
> 标签：erlang, mnesia

该表只有两列。一是关键，二是价值。密钥就像从 1,2,3,...N 开始的序列号。我想通过提供键列表来同时搜索多个值以节省时间，而不是通过调用来一一搜索`mnesia:read/N`。是否可以？键列表可能像 '1, 21, 55' 没有一些规则。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T23:59:15.000

该表非常小，因此 ets:match 和 select 都不会产生影响。我看到的唯一优化是使用dirty_read，并且每次读取都不包含在事务中。

我不确定这里，但由于 mnesia 线性散列的性质，没有批量读取隐藏 API。如果您的密钥可以是完全随机的，那无论如何也无济于事。

# git - 使用 DSL 格式在 gerrit 中创建访问控制的任何脚本

> ID：10875831
> 
> 赞同：1
> 
> 时间：2012-06-04T02:53:00.027
> 
> 标签：git, dsl, puppet, gerrit

在gerrit中，我们需要设置[项目的访问控制](http://gerrit-documentation.googlecode.com/svn/Documentation/2.4/access-control.html)，主要是通过网页来完成，这是初始化它的效率。

在互联网上，有在脚本中操作数据库（如 h2 的 gsql）的解决方案，但它也是低级别和低效率的。

我不知道是否

1.  目前我们可以使用更好的 API 在 gerrit 中轻松创建访问控制
2.  或者任何人已经以 DSL 格式编写配置，该脚本可以处理 gerrit（sql over ssh）。
3.  或任何木偶好模块？

我在 DSL 中的预期配置如下所示

```
Group1; Read on refs/heads/* and refs/tags/*
Group2; Push to refs/for/refs/heads/* and refs/changes/*
Group3; Push merge commit to refs/for/refs/heads/* and refs/changes/*
Group4; Forge Author Identity
Group5; Label: Code review with range -2 to +2
Group6; Label: Verify with range -1 to +1
Group7; Submit 
```

脚本有助于其余的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T06:28:50.663

你可以试试这个：

```
git fetch origin refs/meta/config
git checkout -b config FETCH_HEAD 
```

更新您的`project.config`：

```
git push origin HEAD:refs/meta/config 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:53:16.697

您可以下载 refs/meta/config 分支并更改 project.config 文件。像这样

```
git fetch origin +refs/meta/*:refs/remotes/origin/*
git checkout -b config --track origin/config 
```

您只需打开`project.config`文件并进行所需的访问更改，然后将其推送到 gerrit

```
git push origin HEAD:refs/meta/config 
```

您必须具有对 refs/meta/config 的读取权限才能执行此操作。这些访问权限已从 gui 授予。

要在创建新项目时绕过它，您可以将其添加到 project_creators 已读取的所有项目中，并推送对 refs/meta/config 的访问权限。

干杯

# algorithm - 如何从具有链接信息的配对数据列表中查找唯一名称的数量？

> ID：10875832
> 
> 赞同：0
> 
> 时间：2012-06-04T02:53:01.860
> 
> 标签：algorithm, graph-theory

我有'n'行数据集，每个数据集都有两个由空格分隔的组件。第一个是卡号，第二个是姓名。一个人是相同的，如果他有相同的卡号或姓名。如何从数据集中找到唯一人的总数？

例子：

1个

1乙

2乙

3℃

该数据集有 2 个独特的人。这是因为第一行和第二行卡号相同，第二行和第三行名称相同。

什么样的算法可以用来解决这类问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T03:51:45.600

这是使用图论和连接组件的另一个解决方案：

```
 int CountUnique(Person[] persons)
                Dictionary<string, int> phones = new Dictionary<string, int>();
                Dictionary<string, int> emails = new Dictionary<string, int>();
                bool[] unique = new bool[n];
                int count = 0;
                int max = 0;
                for (int i = 0; i < n; i++)
                {
                    Person p = persons[i];
                    int pA = -1, pB = -1;
                    if (phones.ContainsKey(p.Phone))
                    {
                        pA = phones[p.Phone];
                    }
                    if (emails.ContainsKey(p.Email))
                    {
                        pB = emails[p.Email];
                    }
                    if (pA != -1)
                    {
                        persons[pA].Next.Add(p);
                        p.Next.Add(persons[pA]);
                    }
                    else
                    {
                        phones.Add(p.Phone, p.Index);
                    }

                    if (pB != -1 && pB != pA)
                    {
                        persons[pB].Next.Add(p);
                        p.Next.Add(persons[pB]);
                    }
                    if (pB == -1)
                    {
                        emails.Add(p.Email, p.Index);
                    }
                }

                int current = 0;
                Person pCurrent;
                count = 0;
                while ((pCurrent = FindUnvisited(persons, current)) != null)
                {
                    BFS(pCurrent);
                    count++;
                }

                return count;

            }

            private static void DFS(Person pCurrent)
            {
                pCurrent.Visited = true;
                foreach (Person p in pCurrent.Next)
                {
                    if (!p.Visited)
                    {
                        BFS(p);
                    }
                }
            }

            private static Person FindUnvisited(Person[] persons, int current)
            {
                for (int i = current; i < persons.Length; i++)
                {
                    if (persons[i].Visited == false) return persons[i];
                }
                return null;
            }

        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T03:23:30.463

我想出的解决方案是使用某种分区：大多数操作都在 O(1) 或 O(logn) 中完成，并且由用户完成一次，因此时间复杂度约为 O(n),O(logn)取决于字典的实现方式。

```
int CountUnique(Person persons)
{
        Dictionary<string, int> phones = new Dictionary<string, int>(); //Keep a dictionary where each phone number is mapped to a partition
        Dictionary<string, int> email = new Dictionary<string, int>();  //Keep a dictionary where each email is mapped to a partition
        bool[,] linked = new bool[n, n]; //Lookup table used to tell if 2 partitions are linked (represents the same person)
        int count = 0;
        int max = 0;
        for (int i = 0; i < n; i++)
        {
            Person p = persons[i];
            int pA = -1, pB = -1; // Partition found using the phone number, Partition found using email
            if (phones.ContainsKey(p.Phone))
            {
                pA = phones[p.Phone];
            }
            if (emails.ContainsKey(p.Email))
            {
                pB = emails[p.Email];
            }

            if (pA == -1 && pB == -1) // First case, not found: Add both phones and email and create a new partition. Number of unique persons is also incremented.
            {
                phones.Add(p.Phone.Trim(), max);
                emails.Add(p.Email.Trim().ToLower(), max);
                max++;
                count++;
            }
            else
            {
                if (pA != -1 && pB != -1 && pA != pB) // Found using both parameters on different partitions
                {
                    if (!linked[pA, pB] && !linked[pB, pA]) // If the partition are not linked, link them
                    {
                        count--; // We'lost one partition => one unique person less
                        linked[pA, pB] = linked[pB, pA] = true;
                    }
                }
                if (pA == -1) // We did find an existing email but no phone
                {
                    phones.Add(p.Phone.Trim(), pB); // Add the phone number
                    max++;
                }
                if (pB == -1) // We did find an existing phone but no email
                {
                    emails.Add(p.Email.Trim().ToLower(), pA); // Add the email number
                    max++;
                }
            }

        }

return count;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T03:33:00.990

有点 C++。但把它当作伪代码。

```
int uniqueCount = 0;
map<string, bool> column_1;
map<string, bool> column_2;
string left, right
for(int x = 0 ;x < matrix.count; x++) {
   left = matrix[x][0]
   right = matrix[x][1];
   if(column_1.find(left) != column_1.end && column_2.find(right) != column_2.end){
  ++uniqueCount 
   column_1[left] = true;
   column_2[right] = true;
   }
  else --uniqueCount;
} 
```

如果以上内容无法编译，我很抱歉。把它当作伪代码吧，我有一段时间没接触过c++了，没想到rails代码会有这么大的帮助。

# java - .jar 文件不断给我“找不到主类”。程序将会退出

> ID：10875839
> 
> 赞同：3
> 
> 时间：2012-06-04T02:54:01.570
> 
> 标签：java, jar, compilation

我在 netbeans 和 eclipse 上都遇到了这个问题，即使是一个简单的文件，它显示一个带有 jlabel 的 jframe。我的 netbeans 的项目属性清楚地将 testing2.hihi 设置为我的 Main 类，我已经清理并构建了它，它在我的 dist 文件夹中生成了一个 .jar 文件。当我双击它时，它给了我消息“找不到主类。程序将退出。” 但是，如果我选择从命令提示符“java -jar hello2.jar”运行它，它将正常运行！

这是 .jar 文件中的清单文件。

```
 Manifest-Version: 1.0
Ant-Version: Apache Ant 1.8.3
Created-By: 1.7.0_04-b20 (Oracle Corporation)
Class-Path: 
X-COMMENT: src/hihi
Main-Class: testing2.hihi

package testing2;

public class hihi extends javax.swing.JFrame {

/**
 * Creates new form hihi
 */
public hihi() {
    initComponents();
}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {

    jLabel1 = new javax.swing.JLabel();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

    jLabel1.setText("hihi");

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addGap(50, 50, 50)
            .addComponent(jLabel1)
            .addContainerGap(334, Short.MAX_VALUE))
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addGap(33, 33, 33)
            .addComponent(jLabel1)
            .addContainerGap(253, Short.MAX_VALUE))
    );

    pack();
}// </editor-fold>

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    /*
     * Set the Nimbus look and feel
     */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /*
     * If Nimbus (introduced in Java SE 6) is not available, stay with the
     * default look and feel. For details see
     * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
     */
    try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(hihi.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(hihi.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(hihi.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(hihi.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>

    /*
     * Create and display the form
     */
    java.awt.EventQueue.invokeLater(new Runnable() {

        public void run() {
            new hihi().setVisible(true);
        }
    });
}
// Variables declaration - do not modify
private javax.swing.JLabel jLabel1;
// End of variables declaration
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T04:49:05.677

我怀疑为 Jar 文件注册的打开命令设置不正确。这是一种从命令行检查的方法（至少在 Windows 7 上；我很确定它可以在 Windows Vista 上运行）：

1.  输入命令：`assoc .jar`
2.  它应该打印`.jar=jarfile`。如果未找到（考虑到您的症状，可能性很小），请使用命令创建条目`assoc .jar=jarfile`。
3.  输入命令：`ftype jarfile`
4.  它应该打印类似的内容
    `"C:\Program Files\Java\jre6\bin\javaw.exe" -jar "%1" %*`
    （您的机器上的路径`javaw.exe`可能不同。）
5.  如果未定义或打印错误值，请使用以下方法修复：
    `ftype jarfile="C:\Program Files\Java\jre6\bin\javaw.exe" -jar "%1" %*`

您可能必须重新启动，或者至少打开一个新的 Windows 资源管理器窗口，以查看现在双击 .jar 文件是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T03:28:10.110

请检查您的环境变量、您的 JAVA_HOME、CLASS_PATH 和 PATH 设置。您可以在 cmd 窗口中回显 %JAVA_HOME% 来检查这一点。确保您的设置正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T22:04:53.377

Ted Hopp 的回答是正确的，但我会在不同的情况下改变一些东西。如果你已经在系统环境变量“path”中设置了Java的路径，你可以把它放在命令提示符下：

1.  assoc .jar=jar 文件

2.  ftype jarfile=javaw.exe -jar %1 %*

因为如果您放置整个 JRE 路径，则每次更新 JRE 时都必须再次执行此操作。在这种情况下，您只需要更改环境变量，系统将完成其余的工作。

# cakephp-2.0 - cakephp 可以获取用户名、角色但不能获取 id

> ID：10875842
> 
> 赞同：0
> 
> 时间：2012-06-04T02:54:18.077
> 
> 标签：cakephp-2.0

这是一个谜......在我的控制器添加功能中，我想将用户的 ID 输入到正在创建的记录中。我将 $this->Session->read('Auth.User.id') 放在 create 语句之后。但它总是空白..我发现我可以获得用户名和角色，但 id 总是空的。

我遵循表和字段名称的蛋糕命名约定。用户表有：id 用户名角色

调用 Session 和 Auth 我可以从表中获取用户的角色、用户名、任何其他值，但不能获取 id ......非常奇怪

$this->Session->read('Auth.User.role') ----> this 返回角色

$this->Session->read('Auth.User.username') ----> 这会返回用户名

$this->Session->read('Auth.User.id') ----> 这是空白！

任何想法可能会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T06:59:41.427

所以我的问题的答案（我自己过了一段时间才发现）是在添加新记录后，自动编号 ID 不会被放入当前用户的身份验证会话中。Cake 在登录时执行此操作，因此您必须注销并重新登录才能在 Auth Session 中获取新 ID。但是，您可以使用 getInsertId() 获取新插入的用户自动编号，然后使用 $this->Session->write('Auth.Model.id', $this->Model->getInsertId 使用它来更新 Auth Session ()); – genoki 49 秒前 编辑

# php - in_array() 不返回所有结果

> ID：10875845
> 
> 赞同：1
> 
> 时间：2012-06-04T02:54:37.583
> 
> 标签：php, mysql, arrays, loops, foreach

一个名为的数据库表`users`有一个列`timemarks`。

`timemark`字段看起来像这样.. `11:00:00, 13:45:00, 17:00:00, 18:25:00`（每个用户的时间标记不同）

我的 php 脚本应该列出具有指定时间标记的用户。

查询：（`SELECT * FROM ('users')`查询结果返回给`$users`）

环形：

> 1.  遍历用户
> 2.  `$timemarks_arr`通过使用拆分时间标记字符串为每个用户创建数组`str_getcsv`
> 3.  回显具有指定时间标记值的用户

```
foreach ($users as $user): 

   $timemarks_arr = str_getcsv($user->timemarks); //split time-marks by comma and create array

    if (in_array("17:00:00", $timemarks_arr)) //users with specified time-mark
    {                               
        echo $entry->username . "<br />";
    }

endforeach; 
```

出于某种原因，它只回显了 2 个用户，但有更多用户使用 time-mark `17:00:00`。有谁知道为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T02:56:51.253

它不会匹配诸如`17:00:00`的值，因为有一个前导空格。

试试这个去除字符串开头和结尾的所有空格：

```
$timemarks_arr = array_map( "trim", str_getcsv($user->timemarks)); //split time-marks by comma and create array 
```

# .net - 具有字符串特殊情况的泛型函数

> ID：10875846
> 
> 赞同：1
> 
> 时间：2012-06-04T02:54:56.447
> 
> 标签：.net, vb.net

处理这种情况的最佳方法是什么：

我有这个通用功能

```
Function FieldValue(Of T)(row As DataRow,fieldName As String) As T
  Return If(row.IsNull(fieldName),Nothing,CType(row(fieldName),T))
End Function 
```

在字段值为 null 且 T 为 String 的特殊情况下，我想返回 String.Empty 而不是 Nothing。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T03:04:04.140

我认为最简单的方法是为 T = string 提供一个特定的函数：

```
Function FieldValue(row As DataRow ,fieldName As String) As String
  Return If(row.IsNull(fieldName), String.Empty, CType(row(fieldName), String))
End Function 
```

（在您现有的通用功能之上）

* * *

这是另一种选择：

```
Function FieldValue(Of T)(row As DataRow,fieldName As String) As T
    If GetType(T) = GetType(String) And row.IsNull(fieldName) Then
        Return CType(CType(String.Empty, Object), T)
    Else
        Return If(row.IsNull(fieldName), Nothing, CType(row(fieldName), T))
    End If
End Function 
```

# android - 更改 ContextVIew android

> ID：10875852
> 
> 赞同：0
> 
> 时间：2012-06-04T02:55:31.030
> 
> 标签：android, layout

可以在运行时在我的活动中设置另一个布局吗？

怎么可能？

只做 setContextView(new layout ) 它会在执行中出错

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T03:47:07.530

我建议您过渡到新的`Activity`而不是`setContentView()`再次调用。

如果您想再次调用`setContentView()`，则必须再次重新初始化`Views`布局中的所有内容，`findViewById()`并确保不使用或泄漏旧引用。

# asp.net - 会话变为空

> ID：10875855
> 
> 赞同：0
> 
> 时间：2012-06-04T02:56:25.990
> 
> 标签：asp.net, vb.net

我面临一个问题，因为我的用户在参加多项选择在线考试时退出频率。

我们在单个页面上实施了考试，并在用户选择相同的选项时将选项存储在视图状态中。在选择下一个问题页面时再次加载。有时 "If Session("User") = """ 结果为真，用户注销。

我在第一次页面加载时设置了会话

会话超时 = 340

在 web 配置文件中会话超时也是 2 小时。

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Session("User") = "" Then
        Response.Redirect("Default.aspx")
    Else
        //Processing and updating view state. 
```

请帮忙看看这个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T05:58:38.497

可能是 AppPool 被回收的原因。以下是造成这种情况的一些原因：

1.  您的 sessionState 超时已过期
2.  您更新您的 web.config 或其他导致 AppDomain 回收的文件类型
3.  IIS 中的 AppPool 回收
4.  您使用大量文件更新您的站点，并且 ASP.NET 主动破坏您的 AppDomain 以重新编译和保留内存。
5.  或者可能是任何文件或目录被删除。

参考：[丢失会话状态](https://stackoverflow.com/questions/3515947/losing-session-state)

解决方案：使用 stateserver 而不是 InProc。

```
<sessionState mode="StateServer" stateConnectionString="tcpip=127.0.0.1:42424"   cookieless="UseCookies" timeout="10" regenerateExpiredSessionId="true" /> 
```

[http://msdn.microsoft.com/en-us/library/ms972429.aspx](http://msdn.microsoft.com/en-us/library/ms972429.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T03:18:07.383

在 web config 中增加会话超时值 525,600 分钟（1 年）。

[http://msdn.microsoft.com/en-us/library/ms525473(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms525473(v=vs.90).aspx)

[http://msdn.microsoft.com/en-us/library/h6bb9cz9(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/h6bb9cz9(v=vs.80).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T06:14:52.363

我之前遇到过这个问题。请在您的解决方案中添加此代码。

```
 public int SessionLengthMinutes
    {
        get { return Session.Timeout; }
    }
    public string SessionExpireDestinationUrl
    {
        get { return "../Login.aspx"; }
    }
    protected override void OnPreRender(EventArgs e)
    {
        base.OnPreRender(e);
        this.Controls.Add(new LiteralControl(
        String.Format("<meta http-equiv='refresh' content='{0};url={1}'>",
        SessionLengthMinutes * 60, SessionExpireDestinationUrl)));
    } 
```

通过这个您可以检查您的页面何时从主页重定向到登录页面。然后我们可以进一步工作并解决问题。希望对你有效。

# android - 在 FragmentTabsPager 设计模型中生成 ContextMenu

> ID：10875864
> 
> 赞同：0
> 
> 时间：2012-06-04T02:57:45.720
> 
> 标签：android, android-fragments, android-tabhost, android-viewpager, actionbarsherlock

我正在将一些代码切换到 FragmentTabsPager 设计模型，该模型在提供选项卡式导航和页面滑动方面做得很好（请参阅[FragmentTabsPager](http://developer.android.com/resources/samples/Support4Demos/src/com/example/android/supportv4/app/FragmentTabsPager.html)和[ABS 版本的 FragmentTabsPager](http://code.google.com/p/sherlock-demo/source/browse/#git%2Fsrc%2Fcom%2Fexample%2Fandroid%2Fsherlockdemo)）。

但是我不知道如何在选择列表项时生成 ContextMenu。以前我会简单地通过调用来做到这一点：

```
ListView listView = (ListView) findViewById(R.id.listViewid);
registerForContextMenu(listView); 
```

然后定义 onCreateContextMenu() 以动态生成菜单项，并定义 onContextItemSelected() 根据所选项目执行适当的操作。

我现在遇到的问题是，在 FragmentTabsPager 模型中，listview 是动态生成的——而不是在 XML 文件中——所以没有一个明显的地方可以为 registerForContextMenu 调用获取 listView。

知道怎么做吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T00:08:07.250

我想出了如何使上下文菜单与 FragmentTabsPager 一起工作。

首先，使用上面提到的 FragmentTabsPager，将来自 FragmentTabsPager.java 的 mTab​​sAdapter.addTab() 调用集成到您的具有 Sherlock 操作栏的活动中，并且您要为其实现滑动。

然后，通过将 onCreateContextMenu() 和 onContextItemSelected() 添加到 AccountListFragment 来修改同一存储库中的 AccountListActivity.java。

调用后将在列表项上调用 ContextMenu 回调

```
registerForContextMenu(getListView()); 
```

来自 onActivityCreated() 函数。为注册调用获取正确的参数是我缺少的一点。祝你好运！

# git - 我应该对这些相互依赖的 git 项目进行分组吗？

> ID：10875865
> 
> 赞同：1
> 
> 时间：2012-06-04T02:57:47.333
> 
> 标签：git

假设我有 5 个相互依赖的 git 项目：

1.  数据库（与下面的服务器对话）
2.  渲染服务器（与下面的服务器对话）
3.  主应用服务器（REST API）
4.  启动：用于构建上述 Amazon 4 EC2 机器的脚本和 json。
5.  测试：在 App Server 上运行
6.  Javascript API（依赖于 REST API）
7.  JS 和 REST API 文档（依赖于 REST API）

我假设上面的 git 项目部门以一种实用的方式演变为并行工作流组织。

问题在于，整个系统的成功取决于确保上述 7 个项目彼此一致，处于一致的状态。

一方面，通过仅将一个项目的 time_1 SHA-1 哈希与同一项目的 time_2 SHA-1 进行比较，似乎更容易表示整个系统的变化。

另一方面，我阅读了这些[SO answers](https://stackoverflow.com/questions/889100/what-is-the-best-way-to-organize-multiple-projects-when-using-git)，其中提到了对太多项目进行分组的复杂性成本。此外，Linus 还提到了 git 系统的灵活性，甚至可以将分支用于不同的项目，以及在以后切换分组策略的能力（但我们不会这样做，因为我们是规避风险的新手）。

非常感谢任何考虑到高运营风险和低专业经验的企业的建议或指南。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T04:33:24.863

虽然有点复杂，但“分组”策略有优点并且值得一试：
它被称为**[子模块](http://git-scm.com/book/ch6-6.html)**，允许您为*所有*项目定义一个唯一的引用，同时允许您将这些项目作为独立的 git 存储库进行管理。

正如我在“[子模块的真实性质](https://stackoverflow.com/questions/1979167/git-submodule-update/1979194#1979194)”中解释的那样，您仍然可以在子模块中进行修改，只要您在父 repo 中记录新的子模块状态。

# if-statement - 如何使用 DoctrineExtensions 提供的 IF 语句

> ID：10875868
> 
> 赞同：1
> 
> 时间：2012-06-04T02:57:54.817
> 
> 标签：if-statement, doctrine, doctrine-orm

我正在玩[DoctrineExtensions](https://github.com/beberlei/DoctrineExtensions)但无法管理它。注册 DoctrineExtensions 后，我在 Zend 框架中有以下 DQL 行：

```
$qb->having(new IfElse("A.type = 0", new FindInSet(1, new GroupConcat('B.id', ',')) >0 , '1') ); 
```

但是得到这个错误消息：

> 异常信息：
> 
> 消息：在此上下文中不允许使用“DoctrineExtensions\Query\Mysql\IfElse”类型的表达式。*

您能帮我指出我的命令或有关如何使用 DoctrineExtensions 的任何文档中有什么不正确的地方吗？

更新：

我找到了一种通过以下方式实现自定义功能的方法：我通过将这一行添加到 boostrap 来尝试一下：

```
$config->addCustomStringFunction('IF', 'DoctrineExtensions\Query\Mysql\IfElse'); 
```

并在 DQL 中将其用作：

```
$qb->having("IF( A.type = 0, S.status = 0, S.status = 1 )"); 
```

但是得到这个错误：

消息：[语法错误] 第 0 行，第 152 列：错误：预期的 Doctrine\ORM\Query\Lexer::T_COMMA，得到 '='

也许我语法错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-08T10:42:10.887

你有没有尝试过

```
$qb->having("S.status = IF( A.type = 0, 0, 1 )"); 
```

# php - 数组拼接PHP和文档中的错误？

> ID：10875873
> 
> 赞同：1
> 
> 时间：2012-06-04T02:59:08.910
> 
> 标签：php, arrays, function

看看这个页面的文档`array_splice`，并检查第一个示例。

[http://www.php.net/manual/en/function.array-splice.php](http://www.php.net/manual/en/function.array-splice.php)

这让我感到困惑，因为据我所知，示例 1 中的以下代码不正确，

```
$input = array("red", "green", "blue", "yellow");
array_splice($input, 2);
// $input is now array("red", "green") 
```

当我在本地机器上执行此操作时，我得到以下信息，

```
$array = array(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20);
array_splice($array, 10);
// $array is now array(11, 12, 13, 14, 15, 16, 17, 18, 19, 20); 
```

在 PHPs 页面上，该示例**返回**元素，而在我的本地计算机上，它**会删除**它们吗？

我不明白？我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:52:06.567

可能文档是错误的。

我测试了你的代码和 php.net 上的代码，效果非常好，就像你的例子一样。

我得到这个：

```
$input = array("red", "green", "blue", "yellow");
array_splice($input, 2);
// $input is now array("blue", "yellow") 
```

所以我会说 php.net 是错误的（很奇怪！！不是吗？？？？）

# c# - 来自 argb 的 C# 颜色名称

> ID：10875874
> 
> 赞同：2
> 
> 时间：2012-06-04T02:59:10.713
> 
> 标签：c#

我有 2 个所有者绘制的组合框。一个是线条颜色选择器 - 在图片中它不是组合框。另一个是线型选择器。一旦用户在第一个组合中选择了一种颜色，线型选择器组合（参见第二张图片，最后一个组合（一个没有名字的组合））必须具有相同的颜色线。

![在此处输入图像描述](../Images/cd197ab0bb3bfd66a37850b5756a98c2.png)

目前它显示这样

![在此处输入图像描述](../Images/1a9bb57270fb068de28f8f763de8f0ee.png) 这是两个组合线颜色选择器的代码

```
 public partial class ColorPicker : ComboBox
    {
        // Data for each color in the list
        public class ColorInfo
        {
            public string Text { get; set; }
            public Color Color { get; set; }

            public ColorInfo(string text, Color color)
            {
                Text = text;
                Color = color;
            }
        }

        public ColorPicker()
        {
            InitializeComponent();

            DropDownStyle = ComboBoxStyle.DropDownList;
            DrawMode = DrawMode.OwnerDrawFixed;
            DrawItem += OnDrawItem;
        }

        // Populate control with standard colors
        public void AddStandardColors()
        {
            Items.Clear();
            Items.Add(new ColorInfo("Black", Color.Black));
            Items.Add(new ColorInfo("Blue", Color.Blue));
            Items.Add(new ColorInfo("Lime", Color.Lime));
            Items.Add(new ColorInfo("Cyan", Color.Cyan));
            Items.Add(new ColorInfo("Red", Color.Red));
            Items.Add(new ColorInfo("Fuchsia", Color.Fuchsia));
            Items.Add(new ColorInfo("Yellow", Color.Yellow));
            Items.Add(new ColorInfo("White", Color.White));
            Items.Add(new ColorInfo("Navy", Color.Navy));
            Items.Add(new ColorInfo("Green", Color.Green));
            Items.Add(new ColorInfo("Teal", Color.Teal));
            Items.Add(new ColorInfo("Maroon", Color.Maroon));
            Items.Add(new ColorInfo("Purple", Color.Purple));
            Items.Add(new ColorInfo("Olive", Color.Olive));
            Items.Add(new ColorInfo("Gray", Color.Gray));
        }

        // Draw list item
        protected void OnDrawItem(object sender, DrawItemEventArgs e)
        {
            if (e.Index >= 0)
            {
                // Get this color
                ColorInfo color = (ColorInfo)Items[e.Index];

                // Fill background
                e.DrawBackground();

                // Draw color box
                Rectangle rect = new Rectangle();
                rect.X = e.Bounds.X + 2;
                rect.Y = e.Bounds.Y + 2;
                rect.Width = 18;
                rect.Height = e.Bounds.Height - 5;
                e.Graphics.FillRectangle(new SolidBrush(color.Color), rect);
                e.Graphics.DrawRectangle(SystemPens.WindowText, rect);

                // Write color name
                Brush brush;
                if ((e.State & DrawItemState.Selected) != DrawItemState.None)
                    brush = SystemBrushes.HighlightText;
                else
                    brush = SystemBrushes.WindowText;
                e.Graphics.DrawString(color.Text, Font, brush,
                    e.Bounds.X + rect.X + rect.Width + 2,
                    e.Bounds.Y + ((e.Bounds.Height - Font.Height) / 2));

                // Draw the focus rectangle if appropriate
                if ((e.State & DrawItemState.NoFocusRect) == DrawItemState.None)
                    e.DrawFocusRectangle();
            }
        }

        /// <summary>
        /// Gets or sets the currently selected item.
        /// </summary>
        public new ColorInfo SelectedItem
        {
            get
            {
                return (ColorInfo)base.SelectedItem;
            }
            set
            {
                base.SelectedItem = value;
            }
        }

        /// <summary>
        /// Gets the text of the selected item, or sets the selection to
        /// the item with the specified text.
        /// </summary>
        public new string SelectedText
        {
            get
            {
                if (SelectedIndex >= 0)
                    return SelectedItem.Text;
                return String.Empty;
            }
            set
            {
                for (int i = 0; i < Items.Count; i++)
                {
                    if (((ColorInfo)Items[i]).Text == value)
                    {
                        SelectedIndex = i;
                        break;
                    }
                }
            }
        }

        /// <summary>
        /// Gets the value of the selected item, or sets the selection to
        /// the item with the specified value.
        /// </summary>
        public new int SelectedValue
        {
            get
            {
                if (SelectedIndex >= 0)
                    return SelectedItem.Color.ToArgb();
                return Color.White.ToArgb();
            }
            set
            {
                for (int i = 0; i < Items.Count; i++)
                {
                    if (((ColorInfo)Items[i]).Color.ToArgb() == value)
                    {
                        SelectedIndex = i;
                        break;
                    }
                }
            }
        }
    }
}

Code for lineselector combo. This is the last combo(the one with no name) on my second picture. : `

    public partial class comboBoxLineStyle : ComboBox
    {
        public comboBoxLineStyle()
        {
            InitializeComponent();
            this.DrawMode = DrawMode.OwnerDrawFixed;
            this.DropDownStyle = ComboBoxStyle.DropDownList;

        }
        protected override void OnDrawItem(DrawItemEventArgs e)
        {
            base.OnDrawItem(e);

            if (e.Index < 0) { return; }
            e.DrawBackground();
            ComboBoxItem item = (ComboBoxItem)this.Items[e.Index];
           e.Graphics.DrawImage(item.Picture,new Point(e.Bounds.X, e.Bounds.Y));

        }
        public new Image SelectedItem
        {
            get
            {
                return (Image)base.SelectedItem;
            }
            set
            {
                base.SelectedItem = value;
            }
        }
        public new Image SelectedValue
        {
            get
            {
                return (Image)base.SelectedValue;
            }
            set
            {
                base.SelectedValue = value;
            }
        }

    }

    public class ComboBoxItem
    {
        public string text;
        public Image Picture;
        public int foreColor;
        //public override string ToString()
        //{
        //    return text;
        //}

        public ComboBoxItem() { }
        public ComboBoxItem(string pText, Image pValue)
        {
            text = pText;
            Picture = pValue;
        }
        public ComboBoxItem(string pText, Image pValue, int pColor)
        {

            text = pText; Picture = pValue; foreColor = pColor;

        }

    }
} 
```

以我访问这些的形式如下：

```
private void DlgGraphOptions_Load(object sender, EventArgs e)
        {

            Color selCol = m_SerOpts.GetColor(idxSeries);
            int selcolARGB = selCol.ToArgb();
            Color color = Color.FromArgb(selcolARGB);

            ComboBoxItem item1Solid = new ComboBoxItem("Solid Line",Properties.Resources.Solidline,selcolARGB);
            ComboBoxItem item1dash = new ComboBoxItem("Dashed Line", Properties.Resources.dashedline,selcolARGB);
            ComboBoxItem item1dashed = new ComboBoxItem("Dashed Line", Properties.Resources.dashdash,selcolARGB);

             comboBoxLineStyle1.Items.Add(item1Solid);
            comboBoxLineStyle1.Items.Add(item1dash);
            comboBoxLineStyle1.Items.Add(item1dashed);
            comboBoxLineStyle1.SelectedIndex = 0;

              //I prefer doing something like this
comboBoxLineStyle1.ForeColor.ToArgb() = selcolARGB .

            } 
```

m_SerOpts.GetColor(idxSeries) 方法返回一个颜色对象，但返回一个“00fff00”类型的 Name 值。请让我知道你是否需要更多解释

`

感谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T03:34:03.167

我会使用反射来填充来自 Color 类的所有颜色的列表（尽管您可以在代码中复制它）：

```
Dictionary<String, Color> colors = typeof(Color).GetProperties(BindingFlags.Static | BindingFlags.Public).ToDictionary(p => p.Name, p => (Color)p.GetValue(null, null) ); 
```

然后使用一种方法在此字典中搜索与传递的颜色匹配的颜色：

```
public String GetColorName(Color color)
{
    return colors.Where(c => c.Value.A == color.A && c.Value.R == color.R && c.Value.G == color.G && c.Value.B == color.B).FirstOrDefault().Key;
} 
```

如果没有匹配到颜色，则返回 null。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T03:00:41.400

简单地，

```
System.Drawing.ColorTranslator.FromHtml("#FFFFFF").Name 
```

# php - .htaccess 重定向 javascript 资源

> ID：10875879
> 
> 赞同：-1
> 
> 时间：2012-06-04T03:00:23.493
> 
> 标签：php, .htaccess, mod-rewrite

我已将我网站的论坛移至子文件夹，但有些资源 url 不再起作用，我想做如下重定向，从

```
mydomain.com/jscripts/popup_menu.js?ver=1600 
```

到

```
mydomain.com/forum/jscripts/popup_menu.js?ver=1600 
```

在 .htaccess 我放了以下内容：

```
RewriteRule ^/jscripts/$ /forum/$1 [R=301,L] 
```

好像不太对，正确的形式是什么？谢谢

全部内容：

```
#
# Apache/PHP/Drupal settings:
#

# Protect files and directories from prying eyes.
<FilesMatch "\.(engine|inc|info|install|make|module|profile|test|po|sh|.*sql|theme|tpl(\.php)?|xtmpl|svn-base)$|^(code-style\.pl|Entries.*|Repository|Root|Tag|Template|all-wcprops|entries|format)$">
  Order allow,deny
</FilesMatch>

# Don't show directory listings for URLs which map to a directory.
Options -Indexes

# Follow symbolic links in this directory.
# Options +FollowSymLinks

# Make Drupal handle any 404 errors.
ErrorDocument 404 /index.php

# Force simple error message for requests for non-existent favicon.ico.
<Files favicon.ico>
  # There is no end quote below, for compatibility with Apache 1.3.
  ErrorDocument 404 "The requested file favicon.ico was not found.
</Files>

# Set the default handler.
DirectoryIndex index.php

# Override PHP settings. More in sites/default/settings.php
# but the following cannot be changed at runtime.

# PHP 4, Apache 1.
<IfModule mod_php4.c>
  php_value magic_quotes_gpc                0
  php_value register_globals                0
  php_value session.auto_start              0
  php_value mbstring.http_input             pass
  php_value mbstring.http_output            pass
  php_value mbstring.encoding_translation   0
</IfModule>

# PHP 4, Apache 2.
<IfModule sapi_apache2.c>
  php_value magic_quotes_gpc                0
  php_value register_globals                0
  php_value session.auto_start              0
  php_value mbstring.http_input             pass
  php_value mbstring.http_output            pass
  php_value mbstring.encoding_translation   0
</IfModule>

# PHP 5, Apache 1 and 2.
<IfModule mod_php5.c>
  php_value magic_quotes_gpc                0
  php_value register_globals                0
  php_value session.auto_start              0
  php_value mbstring.http_input             pass
  php_value mbstring.http_output            pass
  php_value mbstring.encoding_translation   0
</IfModule>

# Requires mod_expires to be enabled.
<IfModule mod_expires.c>
  # Enable expirations.
  ExpiresActive On

  # Cache all files for 2 weeks after access (A).
  ExpiresDefault A1209600

  <FilesMatch \.php$>
    # Do not allow PHP scripts to be cached unless they explicitly send cache
    # headers themselves. Otherwise all scripts would have to overwrite the
    # headers set by mod_expires if they want another caching behavior. This may
    # fail if an error occurs early in the bootstrap process, and it may cause
    # problems if a non-Drupal PHP file is installed in a subdirectory.
    ExpiresActive Off
  </FilesMatch>
</IfModule>

# Various rewrite rules.
<IfModule mod_rewrite.c>
  RewriteEngine on

  # If your site can be accessed both with and without the 'www.' prefix, you
  # can use one of the following settings to redirect users to your preferred
  # URL, either WITH or WITHOUT the 'www.' prefix. Choose ONLY one option:
  #
  # To redirect all users to access the site WITH the 'www.' prefix,
  # (http://example.com/... will be redirected to http://www.example.com/...)
  # adapt and uncomment the following:
  # RewriteCond %{HTTP_HOST} ^example\.com$ [NC]
  # RewriteRule ^(.*)$ http://www.example.com/$1 [L,R=301]
  #
  # To redirect all users to access the site WITHOUT the 'www.' prefix,
  # (http://www.example.com/... will be redirected to http://example.com/...)
  # uncomment and adapt the following:
  # RewriteCond %{HTTP_HOST} ^www\.example\.com$ [NC]
  # RewriteRule ^(.*)$ http://example.com/$1 [L,R=301]

  # Modify the RewriteBase if you are using Drupal in a subdirectory or in a
  # VirtualDocumentRoot and the rewrite rules are not working properly.
  # For example if your site is at http://example.com/drupal uncomment and
  # modify the following line:
  # RewriteBase /drupal
  #
  # If your site is running in a VirtualDocumentRoot at http://example.com/,
  # uncomment the following line:
  # RewriteBase /

  # Rewrite URLs of the form 'x' to the form 'index.php?q=x'.
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} !=/favicon.ico
  RewriteRule ^(.*)$ index.php?q=$1 [L,QSA]
  RewriteRule ^/jscripts/(.+)$ /forum/jscripts/$1 [R=301,L]
</IfModule>

# $Id$ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T03:04:22.930

我认为这是您想要的重写：

```
RewriteRule ^/jscripts/(.+)$ /forum/jscripts/$1 [R=301,L] 
```

反向引用 $1 需要引用捕获（括号中的表达式）。

编辑：

您需要将其放在此行之上：

```
RewriteRule ^(.*)$ index.php?q=$1 [L,QSA] 
```

这会将所有内容重定向到要处理的 index.php。该`[L]`标志告诉它停止处理重写规则。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T12:27:55.543

答案是：

```
RewriteRule ^(jscripts)/(.*) /forum/$1/$2 [R=301,L] 
```

花了一些时间，但最后，感谢安东尼的这一点：

反向引用 $1 需要引用捕获（括号中的表达式）。

# mysql - MySQL：搜索儿童记录

> ID：10875884
> 
> 赞同：0
> 
> 时间：2012-06-04T03:00:57.267
> 
> 标签：mysql, sql, database

假设有 2 个表：

```
TABLE: team
-----------
| team_id |
===========
| 1       |
-----------
| 2       |
-----------

TABLE: team_member
-------------------------------------------
| team_member_id | team_id | age | gender |
===========================================
| 1              | 1       | 20  | Male   |
-------------------------------------------
| 1              | 2       | 25  | Male   |
-------------------------------------------
| 1              | 2       | 23  | Female |
------------------------------------------- 
```

我如何搜索这样的东西：

1.  年龄在 18 至 25 岁之间的所有男性团队列表。
2.  所有男性和女性团队的列表，其中任一性别在 18 至 25 岁之间。
3.  等等。

我基本上是在寻找有关如何在所有子记录中应用某些过滤器（例如年龄）的一般策略`team`。建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:47:52.330

团队，团队成员

如果您只检查全男性或全女性团队，则不能只应用一个简单的 WHERE 子句……需要将其与所有团队成员进行比较。尝试

```
select 
      tm.team_id,
      sum( if( tm.gender = 'Male' AND tm.age between 18 and 25, 1, 0 )) as MaleInRange,
      count(*) AllTeamMembers
  from
      team_member tm
  group by
      tm.Team_ID
  having
      MaleInRange = AllTeamMembers 
```

同样，为了确保你有男性和女性......

```
select 
      tm.team_id,
      sum( if( tm.age between 18 and 25, 1, 0 )) as AgeInRange,
      sum( if( tm.gender = 'Male', 1, 0 )) as MaleCnt,
      sum( if( tm.gender = 'Female', 1, 0 )) as FemaleCnt,
      count(*) AllTeamMembers
  from
      team_member tm
  group by
      tm.Team_ID
  having
         AgeInRange = AllTeamMembers
     AND MaleCnt > 0
     AND FemaleCnt > 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T03:05:16.377

类似于 - SELECT * FROM t1 WHERE key_col > 1 AND key_col < 10;

检查这个例子 - [http://www.roseindia.net/sql/mysql-example/mysql-range.shtml](http://www.roseindia.net/sql/mysql-example/mysql-range.shtml)。希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T03:20:03.843

你可以这样做：
1\. `SELECT * FROM T2 WHERE Gender='Male' and Age BETWEEN 18 AND 25`.
2 `SELECT * FROM T2 WHERE Age BETWEEN 18 AND 25`..
希望能帮助到你！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T04:26:19.287

BTW **team_member_id 必须是唯一的，否则此列无用！**

所有男性和女性团队的列表，其中任一性别在 18 至 25 岁之间。

```
SELECT * FROM team_member WHERE Age BETWEEN 18 AND 25 GROUP BY team_id. 
```

结果

```
| team_member_id | team_id | age | gender |
===========================================
| 1              | 1       | 20  | Male   |
-------------------------------------------
| 1              | 2       | 25  | Male   |
------------------------------------------- 
```

# mysql - 如何将博客标题包含到 wp_blogs 表中？

> ID：10875885
> 
> 赞同：0
> 
> 时间：2012-06-04T03:01:36.927
> 
> 标签：mysql, wordpress, wpmu

我想在注册时将博客标题插入`wp_blogs`表格中。我在文件上找不到我`wp-signup.php`应该在哪里插入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T05:05:07.903

您不需要修改核心文件。您应该为此使用适当的钩子。查看[插件 API/操作参考](http://codex.wordpress.org/Plugin_API/Action_Reference "动作参考")了解更多详细信息。我认为[user_register](http://codex.wordpress.org/Plugin_API/Action_Reference/user_register "用户注册")会完成这项工作

# java - primefaces 中的可滚动提要阅读器

> ID：10875888
> 
> 赞同：0
> 
> 时间：2012-06-04T03:02:36.490
> 
> 标签：java, jakarta-ee, primefaces

我想在我的应用程序中显示实时新闻，我正在使用 primefaces 提要阅读器，如下所示：

```
 <div>

                <p:feedReader size="20" value="http://finance.yahoo.com/rss/headline?s=yhoo" var="feed">  
    <h:outputText value="#{feed.title}" style="font-weight: bold"/>  
    <br />  
    <h:outputText value="#{feed.description.value}" escape="false"/>  
    <p:separator />  
</p:feedReader>  
            </div> 
```

但我希望让这个新闻可以滚动。我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T05:43:37.340

试着把`<p:feedReader`里面的`<p:scrollPanel>`

看看展示[PrimeFaces ScrollPanel](http://www.primefaces.org/showcase/ui/scrollPanel.jsf)

# java - 2个文本字段之间的乘法（Android App）

> ID：10875890
> 
> 赞同：-1
> 
> 时间：2012-06-04T03:02:53.977
> 
> 标签：java, android, eclipse

好吧，所以我对 android 应用程序开发相当陌生。我想您也可以笼统地说编码。我只熟悉 Visual Basic 和一些 HTML/CSS。我正在使用 eclipse 并在 android 1.5 中开发

```
EditText costofmeal, tippercent;
TextView tiptotal;
Button calctipbtn;
BigDecimal costNum, percentNum;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    calctipbtn = (Button) findViewById(R.id.calctipbtn);

    costofmeal = (EditText) findViewById(R.id.CostofMeal); 
    tippercent = (EditText) findViewById(R.id.PercentTipText);

    tiptotal = (TextView) findViewById(R.id.tiptotal);

    calctipbtn.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            costNum = new BigDecimal(costofmeal.getText().toString());
            percentNum = new BigDecimal(tippercent.getText().toString());
            tiptotal.setText(costofmeal.multiply(tippercent).toString());

        }
    });

} 
```

我想要做的是在 calctipbtn 被推送后让tiptotal 代表costofmeal * tippercent。我已经查看了教程和其他我似乎无法让它工作的东西我现在得到的唯一错误是

对于 EditText 类型，方法 muliply(EditText) 未定义

任何帮助对不起，如果在我环顾四周之前已经问过这个问题并且找不到我理解的东西，也许之前已经问过但我只看到了在声明和整数并将变量放入时处理的示例。只是不知道如何在这种情况下这样做。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T03:11:56.467

我认为您只是使用了错误的变量：

```
tiptotal.setText(costNum.multiply(percentNum).toString()); 
```

costNum 和 percentNum 是数字，而 costofmeal 和 tippercent 是文本，所以你不能将它们相乘。

# java - 在 java 中，如何从 jar 文件中检索图像？

> ID：10875892
> 
> 赞同：2
> 
> 时间：2012-06-04T03:03:02.773
> 
> 标签：java, reference, jar

我在将我的 java 项目导出到 jar（来自 Eclipse）时遇到问题。我在 jar 中包含了一个名为`images`. 它包含我的项目使用的所有图像文件。问题是，我对这些图像的引用仅在项目*不是*jar 形式时才有效。我不知道为什么，我想知道是否需要更改图像参考的措辞。这是我正在做的参考图像：

```
 URL treeURL = null;
    Image tree = null;
    File pathToTheTree = new File("images/tree.png");
    try {
        treeURL = pathToTheTree.toURL();
    } catch (MalformedURLException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    try {
        tree = ImageIO.read(treeURL);
    } catch(IOException e) {
        e.printStackTrace();
    } 
```

很可能这是一个简单的问题，因为我是编码的初学者。当这些引用都在一个罐子里时，我需要改变什么才能使这些引用起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T03:05:19.383

这确实很简单：您使用 和 中的各种`getResource()`方法。例如，在您的应用程序中，您可以只写`java.lang.Class``java.lang.ClassLoader`

```
treeURL = getClass().getResource("/images/tree.png"); 
```

这将`images`在 jar 文件的根目录中找到该文件。这些`getResource()`方法的好处在于，无论文件是否在 jar 中，它们都可以工作——如果`images`目录是磁盘上的真实目录，这仍然可以工作（只要父级`images`是类路径的一部分。）

# django - Django - 本地化小部件属性

> ID：10875893
> 
> 赞同：1
> 
> 时间：2012-06-04T03:03:27.860
> 
> 标签：django, localization, django-forms, django-templates

我在表单字段中有一个占位符数值作为示例。该值作为小部件属性传递。有没有办法让这个值本地化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:09:17.870

我已经找到`django.utils.formats.number_format`工作了。

# android - 使用带有 ActionBarSherlock 和 Roboguice 的 maven android 构建失败

> ID：10875898
> 
> 赞同：1
> 
> 时间：2012-06-04T03:04:36.910
> 
> 标签：android, actionbarsherlock, roboguice, android-maven-plugin

几个月前，我在业余时间开始了一个 Android 项目。为了让朋友轻松协作，我想使用 maven，但我未能构建我的项目。

我的项目使用 ActionBarSherlock 和 Roboguice（以及允许这种协作的 Roboguice Sherlock 库）。经过几个小时试图破解我的pom后，我得到了这个：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>

<groupId>com.github.armelbd</groupId>
<artifactId>my-places</artifactId>
<version>0.1-SNAPSHOT</version>
<name>MyPlaces</name>
<url>https://github.com/armelbd/my-places</url>

<issueManagement>
    <url>https://github.com/armelbd/my-places/issues</url>
    <system>GitHub Issues</system>
</issueManagement>

<licenses>
    <license>
        <name>Apache V2</name>
        <url>http://www.apache.org/licenses/LICENSE-2.0</url>
        <distribution>repo</distribution>
    </license>
</licenses>

<scm>
    <url>https://github.com/armelbd/my-places</url>
    <connection>scm:git:git://github.com/armelbd/my-places.git</connection>
    <developerConnection>scm:git:git@github.com:armelbd/my-places.git</developerConnection>
</scm>

<properties> 
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding> 
</properties> 

<dependencies>
    <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>android</artifactId>
        <scope>provided</scope>
        <version>4.0.1.2</version>
    </dependency>

    <!-- Dependency injection using Roboguice and Google Guice extensions -->
    <dependency>
        <groupId>org.roboguice</groupId>
        <artifactId>roboguice</artifactId>
        <version>2.0</version>
    </dependency>
    <dependency>
        <groupId>com.google.inject</groupId>
        <artifactId>guice</artifactId>
        <version>3.0</version>
        <classifier>no_aop</classifier>
    </dependency>
    <dependency>
        <groupId>com.google.inject.extensions</groupId>
        <artifactId>guice-multibindings</artifactId>
        <version>3.0</version>
    </dependency>
    <dependency>
        <groupId>com.google.inject.extensions</groupId>
        <artifactId>guice-assistedinject</artifactId>
        <version>3.0</version>
    </dependency>

    <!-- Action Bar sherlock -->
    <dependency>
        <groupId>com.actionbarsherlock</groupId>
        <artifactId>library</artifactId>
        <version>4.0.0</version>
        <type>apklib</type>
    </dependency>

    <!-- Let Roboguice and Sherlock work together -->
    <dependency>
        <groupId>com.github.rtyley</groupId>
        <artifactId>roboguice-sherlock</artifactId>
        <version>1.4</version>
    </dependency>
</dependencies>

<build>
    <finalName>${project.artifactId}</finalName>
    <sourceDirectory>src</sourceDirectory>
    <plugins>
       <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.5</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
        <plugin>
            <groupId>com.jayway.maven.plugins.android.generation2</groupId>
            <artifactId>android-maven-plugin</artifactId>
            <version>3.0.0</version>
            <extensions>true</extensions>
            <configuration>
                <sdk>
                    <platform>15</platform>
                </sdk>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

但我得到这些错误：

```
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building MyPlaces 0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ my-places ---
[debug] execute contextualize
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /Users/bourgona/Project/my-   places/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.5:compile (default-compile) @ my-places ---
[INFO] Compiling 18 source files to /Users/bourgona/Project/my-places/target/classes
[INFO] -------------------------------------------------------------
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] /Users/bourgona/Project/my-  places/src/net/esial/myplaces/views/AddressBarFragment.java:[3,25] cannot find symbol
symbol  : class R
location: package net.esial.myplaces
[ERROR] /Users/bourgona/Project/my- places/src/net/esial/myplaces/views/AddressBarFragment.java:[8,33] package  com.actionbarsherlock.view does not exist
[ERROR] /Users/bourgona/Project/my-  places/src/net/esial/myplaces/views/AddressBarFragment.java:[9,33] package com.actionbarsherlock.view does not exist
[ERROR] /Users/bourgona/Project/my- places/src/net/esial/myplaces/views/AddressBarFragment.java:[22,7] cannot access   com.actionbarsherlock.app.SherlockFragment
class file for com.actionbarsherlock.app.SherlockFragment not found
public class AddressBarFragment extends RoboSherlockFragment {
[ERROR] /Users/bourgona/Project/my-  places/src/net/esial/myplaces/views/AddressBarFragment.java:[65,33] cannot find symbol
symbol  : class Menu
location: class net.esial.myplaces.views.AddressBarFragment
[ERROR] /Users/bourgona/Project/my-  places/src/net/esial/myplaces/views/AddressBarFragment.java:[65,44] cannot find symbol
symbol  : class MenuInflater
location: class net.esial.myplaces.views.AddressBarFragment
[ERROR] /Users/bourgona/Project/my- places/src/net/esial/myplaces/controllers/AddressAutoCompleteAdapter.java:[10,25] cannot find   symbol
symbol  : class R
location: package net.esial.myplaces
[ERROR] /Users/bourgona/Project/my-  places/src/net/esial/myplaces/views/PlacesActivity.java:[3,33] package   com.actionbarsherlock.view does not exist
[ERROR] /Users/bourgona/Project/my- places/src/net/esial/myplaces/views/PlacesActivity.java:[4,33] package  com.actionbarsherlock.view does not exist
[ERROR] /Users/bourgona/Project/my-places/src/net/esial/myplaces/views/PlacesActivity.java:[8,25] cannot find symbol
symbol  : class R
location: package net.esial.myplaces
[ERROR] /Users/bourgona/Project/my- places/src/net/esial/myplaces/views/PlacesActivity.java:[13,7] cannot access  com.actionbarsherlock.app.SherlockFragmentActivity
class file for com.actionbarsherlock.app.SherlockFragmentActivity not found
public class PlacesActivity extends RoboSherlockFragmentActivity {
[ERROR] /Users/bourgona/Project/my- places/src/net/esial/myplaces/views/PlacesActivity.java:[32,39] cannot find symbol
symbol  : class Menu
location: class net.esial.myplaces.views.PlacesActivity
[ERROR] /Users/bourgona/Project/my- places/src/net/esial/myplaces/views/AddressBarFragment.java:[32,2] cannot find symbol
symbol  : variable super
location: class net.esial.myplaces.views.AddressBarFragment
[ERROR] /Users/bourgona/Project/my- places/src/net/esial/myplaces/views/AddressBarFragment.java:[36,57] package R does not exist
[ERROR] /Users/bourgona/Project/my- places/src/net/esial/myplaces/views/AddressBarFragment.java:[36,10] cannot find symbol
symbol  : method getLayoutInflater(android.os.Bundle)
location: class net.esial.myplaces.views.AddressBarFragment
[ERROR] /Users/bourgona/Project/my- places/src/net/esial/myplaces/views/AddressBarFragment.java:[53,2] cannot find symbol
symbol  : variable this
location: class net.esial.myplaces.views.AddressBarFragment
[ERROR] /Users/bourgona/Project/my- places/src/net/esial/myplaces/views/AddressBarFragment.java:[30,1] method does not override or  implement a method from a supertype
[ERROR] /Users/bourgona/Project/my-  places/src/net/esial/myplaces/views/AddressBarFragment.java:[56,1] method does not override or  implement a method from a supertype
[ERROR] /Users/bourgona/Project/my- places/src/net/esial/myplaces/views/AddressBarFragment.java:[67,23] package R does not exist
[ERROR] /Users/bourgona/Project/my- places/src/net/esial/myplaces/views/AddressBarFragment.java:[64,1] method does not override or  implement a method from a supertype
[ERROR] /Users/bourgona/Project/my-  places/src/net/esial/myplaces/controllers/AddressAutoCompleteAdapter.java:[40,13] package R   does not exist
[ERROR] /Users/bourgona/Project/my- places/src/net/esial/myplaces/controllers/AddressAutoCompleteAdapter.java:[129,54] package R  does not exist
[ERROR] /Users/bourgona/Project/my-  places/src/net/esial/myplaces/views/PlacesActivity.java:[21,8] cannot find symbol
symbol  : variable super
location: class net.esial.myplaces.views.PlacesActivity
[ERROR] /Users/bourgona/Project/my-places/src/net/esial/myplaces/views/PlacesActivity.java:[22,24] package R does not exist
[ERROR] /Users/bourgona/Project/my-places/src/net/esial/myplaces/views/PlacesActivity.java:[25,42] cannot find symbol
symbol  : method getSupportFragmentManager()
location: class net.esial.myplaces.views.PlacesActivity
[ERROR] /Users/bourgona/Project/my- places/src/net/esial/myplaces/views/PlacesActivity.java:[27,27] cannot find symbol
symbol  : method add(net.esial.myplaces.views.AddressBarFragment,java.lang.String)
location: class android.support.v4.app.FragmentTransaction
[ERROR] /Users/bourgona/Project/my- places/src/net/esial/myplaces/views/PlacesActivity.java:[18,4] method does not override or  implement a method from a supertype
[ERROR] /Users/bourgona/Project/my- places/src/net/esial/myplaces/views/PlacesActivity.java:[34,8] cannot find symbol
symbol  : class MenuInflater
location: class net.esial.myplaces.views.PlacesActivity
[ERROR] /Users/bourgona/Project/my- places/src/net/esial/myplaces/views/PlacesActivity.java:[34,32] cannot find symbol
symbol  : method getSupportMenuInflater()
location: class net.esial.myplaces.views.PlacesActivity
[ERROR] /Users/bourgona/Project/my- places/src/net/esial/myplaces/views/PlacesActivity.java:[35,26] package R does not exist
[ERROR] /Users/bourgona/Project/my- places/src/net/esial/myplaces/views/PlacesActivity.java:[31,4] method does not override or   implement a method from a supertype
[INFO] 31 errors 
[INFO] -------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1.914s
[INFO] Finished at: Sun Jun 03 19:54:15 PDT 2012
[INFO] Final Memory: 12M/81M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.5:compile  (default-compile) on project my-places: Compilation failure: Compilation failure:
[ERROR] /Users/bourgona/Project/my- places/src/net/esial/myplaces/views/AddressBarFragment.java:[3,25] cannot find symbol
[ERROR] symbol  : class R
[ERROR] location: package net.esial.myplaces
[ERROR] /Users/bourgona/Project/my- places/src/net/esial/myplaces/views/AddressBarFragment.java:[8,33] package com.actionbarsherlock.view does not exist
[ERROR] /Users/bourgona/Project/my- places/src/net/esial/myplaces/views/AddressBarFragment.java:[9,33] package  com.actionbarsherlock.view does not exist
[ERROR] /Users/bourgona/Project/my- places/src/net/esial/myplaces/views/AddressBarFragment.java:[22,7] cannot access  com.actionbarsherlock.app.SherlockFragment
[ERROR] class file for com.actionbarsherlock.app.SherlockFragment not found
[ERROR] public class AddressBarFragment extends RoboSherlockFragment {
[ERROR] /Users/bourgona/Project/my- places/src/net/esial/myplaces/views/AddressBarFragment.java:[65,33] cannot find symbol
[ERROR] symbol  : class Menu
[ERROR] location: class net.esial.myplaces.views.AddressBarFragment
[ERROR] /Users/bourgona/Project/my-places/src/net/esial/myplaces/views/AddressBarFragment.java:[65,44] cannot find symbol
[ERROR] symbol  : class MenuInflater
[ERROR] location: class net.esial.myplaces.views.AddressBarFragment
[ERROR] /Users/bourgona/Project/my- places/src/net/esial/myplaces/controllers/AddressAutoCompleteAdapter.java:[10,25] cannot find  symbol
[ERROR] symbol  : class R
[ERROR] location: package net.esial.myplaces
[ERROR] /Users/bourgona/Project/my- places/src/net/esial/myplaces/views/PlacesActivity.java:[3,33] package  com.actionbarsherlock.view does not exist
[ERROR] /Users/bourgona/Project/my- places/src/net/esial/myplaces/views/PlacesActivity.java:[4,33] package  com.actionbarsherlock.view does not exist
[ERROR] /Users/bourgona/Project/my- places/src/net/esial/myplaces/views/PlacesActivity.java:[8,25] cannot find symbol
[ERROR] symbol  : class R
[ERROR] location: package net.esial.myplaces
[ERROR] /Users/bourgona/Project/my- places/src/net/esial/myplaces/views/PlacesActivity.java:[13,7] cannot access com.actionbarsherlock.app.SherlockFragmentActivity
[ERROR] class file for com.actionbarsherlock.app.SherlockFragmentActivity not found
[ERROR] public class PlacesActivity extends RoboSherlockFragmentActivity {
[ERROR] /Users/bourgona/Project/my-places/src/net/esial/myplaces/views/PlacesActivity.java:[32,39] cannot find symbol
[ERROR] symbol  : class Menu
[ERROR] location: class net.esial.myplaces.views.PlacesActivity
[ERROR] /Users/bourgona/Project/my-places/src/net/esial/myplaces/views/AddressBarFragment.java:[32,2] cannot find symbol
[ERROR] symbol  : variable super
[ERROR] location: class net.esial.myplaces.views.AddressBarFragment
[ERROR] /Users/bourgona/Project/my-places/src/net/esial/myplaces/views/AddressBarFragment.java:[36,57] package R does not exist
[ERROR] /Users/bourgona/Project/my-places/src/net/esial/myplaces/views/AddressBarFragment.java:[36,10] cannot find symbol
[ERROR] symbol  : method getLayoutInflater(android.os.Bundle)
[ERROR] location: class net.esial.myplaces.views.AddressBarFragment
[ERROR] /Users/bourgona/Project/my-places/src/net/esial/myplaces/views/AddressBarFragment.java:[53,2] cannot find symbol
[ERROR] symbol  : variable this
[ERROR] location: class net.esial.myplaces.views.AddressBarFragment
[ERROR] /Users/bourgona/Project/my-places/src/net/esial/myplaces/views/AddressBarFragment.java:[30,1] method does not override or  implement a method from a supertype
[ERROR] /Users/bourgona/Project/my-  places/src/net/esial/myplaces/views/AddressBarFragment.java:[56,1] method does not override or  implement a method from a supertype
[ERROR] /Users/bourgona/Project/my- places/src/net/esial/myplaces/views/AddressBarFragment.java:[67,23] package R does not exist
[ERROR] /Users/bourgona/Project/my- places/src/net/esial/myplaces/views/AddressBarFragment.java:[64,1] method does not override or  implement a method from a supertype
[ERROR] /Users/bourgona/Project/my-places/src/net/esial/myplaces/controllers/AddressAutoCompleteAdapter.java:[40,13] package R does not exist
[ERROR] /Users/bourgona/Project/my- places/src/net/esial/myplaces/controllers/AddressAutoCompleteAdapter.java:[129,54] package R does not exist
[ERROR] /Users/bourgona/Project/my- places/src/net/esial/myplaces/views/PlacesActivity.java:[21,8] cannot find symbol
[ERROR] symbol  : variable super
[ERROR] location: class net.esial.myplaces.views.PlacesActivity
[ERROR] /Users/bourgona/Project/my-places/src/net/esial/myplaces/views/PlacesActivity.java:[22,24] package R does not exist
[ERROR] /Users/bourgona/Project/my-places/src/net/esial/myplaces/views/PlacesActivity.java:[25,42] cannot find symbol
[ERROR] symbol  : method getSupportFragmentManager()
[ERROR] location: class net.esial.myplaces.views.PlacesActivity
[ERROR] /Users/bourgona/Project/my-places/src/net/esial/myplaces/views/PlacesActivity.java:[27,27] cannot find symbol
[ERROR] symbol  : method add(net.esial.myplaces.views.AddressBarFragment,java.lang.String)
[ERROR] location: class android.support.v4.app.FragmentTransaction
[ERROR] /Users/bourgona/Project/my-places/src/net/esial/myplaces/views/PlacesActivity.java:[18,4] method does not override or implement a method from a supertype
[ERROR] /Users/bourgona/Project/my-places/src/net/esial/myplaces/views/PlacesActivity.java:[34,8] cannot find symbol
[ERROR] symbol  : class MenuInflater
[ERROR] location: class net.esial.myplaces.views.PlacesActivity
[ERROR] /Users/bourgona/Project/my-places/src/net/esial/myplaces/views/PlacesActivity.java:[34,32] cannot find symbol
[ERROR] symbol  : method getSupportMenuInflater()
[ERROR] location: class net.esial.myplaces.views.PlacesActivity
[ERROR] /Users/bourgona/Project/my- places/src/net/esial/myplaces/views/PlacesActivity.java:[35,26] package R does not exist
[ERROR] /Users/bourgona/Project/my-places/src/net/esial/myplaces/views/PlacesActivity.java:[31,4] method does not override or implement a method from a supertype
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the  following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException 
```

我的配置有什么问题？

## 更新

添加后`<packaging>apk</packaging>`我收到此错误：

```
[INFO] UNEXPECTED TOP-LEVEL EXCEPTION:
[INFO] java.lang.IllegalArgumentException: already added: Lcom/google/inject/AbstractModule;
[INFO]  at com.android.dx.dex.file.ClassDefsSection.add(ClassDefsSection.java:123)
[INFO]  at com.android.dx.dex.file.DexFile.add(DexFile.java:163)
[INFO]  at com.android.dx.command.dexer.Main.processClass(Main.java:486)
[INFO]  at com.android.dx.command.dexer.Main.processFileBytes(Main.java:455)
[INFO]  at com.android.dx.command.dexer.Main.access$400(Main.java:67)
[INFO]  at com.android.dx.command.dexer.Main$1.processFileBytes(Main.java:394)
[INFO]  at com.android.dx.cf.direct.ClassPathOpener.processArchive(ClassPathOpener.java:245)
[INFO]  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:131)
[INFO]  at com.android.dx.cf.direct.ClassPathOpener.process(ClassPathOpener.java:109)
[INFO]  at com.android.dx.command.dexer.Main.processOne(Main.java:418)
[INFO]  at com.android.dx.command.dexer.Main.processAllFiles(Main.java:329)
[INFO]  at com.android.dx.command.dexer.Main.run(Main.java:206)
[INFO]  at com.android.dx.command.dexer.Main.main(Main.java:174)
[INFO]  at com.android.dx.command.Main.main(Main.java:95)
[INFO] 1 error; aborting 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T06:35:00.940

在 yorkw 的帮助下，我终于可以用 maven 编译我的项目了。该`already added: Lcom/google/inject/AbstractModule`错误是由于对 guice-no_aop 的多重依赖造成的。

首先 roboguice 2.0 依赖于 guice-no_aop 所以我删除了这部分：

```
<dependency>
    <groupId>com.google.inject</groupId>
    <artifactId>guice</artifactId>
    <version>3.0</version>
    <classifier>no_aop</classifier>
</dependency> 
```

此外 guice-multibindings 和 guice-assistedinject 也依赖于 guice-no_aop 但不完全相同的版本。在这个[问题](https://stackoverflow.com/questions/8975886/maven-actionbarsherlock-v4-and-roboguice-v2-how-do-i-get-it-to-build)上讨论了一个类似的问题，所以我将它添加到 guice-multibindings 和 guice-assistedinject 依赖项中：

```
<exclusions>
    <exclusion>
        <groupId>com.google.inject</groupId>
        <artifactId>guice</artifactId>
    </exclusion>
</exclusions> 
```

作为记录，我的最后一个 pom 是：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>com.github.armelbd</groupId>
<artifactId>my-places</artifactId>
<version>0.1-SNAPSHOT</version>
<name>MyPlaces</name>
<packaging>apk</packaging>
<url>https://github.com/armelbd/my-places</url>

<issueManagement>
    <url>https://github.com/armelbd/my-places/issues</url>
    <system>GitHub Issues</system>
</issueManagement>

<licenses>
    <license>
        <name>Apache V2</name>
        <url>http://www.apache.org/licenses/LICENSE-2.0</url>
        <distribution>repo</distribution>
    </license>
</licenses>

<scm>
    <url>https://github.com/armelbd/my-places</url>
    <connection>scm:git:git://github.com/armelbd/my-places.git</connection>
    <developerConnection>scm:git:git@github.com:armelbd/my-places.git</developerConnection>
</scm>

<properties> 
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding> 
</properties> 

<dependencies>
    <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>android</artifactId>
        <scope>provided</scope>
        <version>4.0.1.2</version>
    </dependency>

    <!-- Dependency injection using Roboguice and Google Guice extensions -->
    <dependency>
        <groupId>org.roboguice</groupId>
        <artifactId>roboguice</artifactId>
        <version>2.0</version>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>com.google.inject.extensions</groupId>
        <artifactId>guice-multibindings</artifactId>
        <version>3.0</version>
        <exclusions>
            <exclusion>
                <groupId>com.google.inject</groupId>
                <artifactId>guice</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>com.google.inject.extensions</groupId>
        <artifactId>guice-assistedinject</artifactId>
        <version>3.0</version>
        <exclusions>
            <exclusion>
                <groupId>com.google.inject</groupId>
                <artifactId>guice</artifactId>
            </exclusion>
        </exclusions>
    </dependency>

    <!-- Action Bar sherlock -->
    <dependency>
        <groupId>com.actionbarsherlock</groupId>
        <artifactId>library</artifactId>
        <version>4.0.0</version>
        <type>apklib</type>
    </dependency>

    <!-- Let Roboguice and Sherlock work together -->
    <dependency>
        <groupId>com.github.rtyley</groupId>
        <artifactId>roboguice-sherlock</artifactId>
        <version>1.4</version>
    </dependency>
</dependencies>

<build>
    <finalName>${project.artifactId}</finalName>
    <sourceDirectory>src</sourceDirectory>
    <plugins>
       <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.5</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
        <plugin>
            <groupId>com.jayway.maven.plugins.android.generation2</groupId>
            <artifactId>android-maven-plugin</artifactId>
            <version>3.0.0</version>
            <extensions>true</extensions>
            <configuration>
                <sdk>
                    <platform>15</platform>
                </sdk>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

# android - 使用 Android 代码解析 URL 时出错

> ID：10875899
> 
> 赞同：1
> 
> 时间：2012-06-04T03:04:50.417
> 
> 标签：android, xml-parsing

我正在尝试使用 Android 从 URL 解析 XML。当我运行我的应用程序时，我收到以下错误：

```
06-04 10:57:50.250: W/System.err(16811): org.apache.harmony.xml.ExpatParser$ParseException: At line 29, column 854: mismatched tag
06-04 10:57:50.250: W/System.err(16811):    at org.apache.harmony.xml.ExpatParser.parseFragment(ExpatParser.java:519)
06-04 10:57:50.250: W/System.err(16811):    at org.apache.harmony.xml.ExpatParser.parseDocument(ExpatParser.java:478)
06-04 10:57:50.250: W/System.err(16811):    at org.apache.harmony.xml.ExpatReader.parse(ExpatReader.java:317)
06-04 10:57:50.250: W/System.err(16811):    at org.apache.harmony.xml.ExpatReader.parse(ExpatReader.java:275)
06-04 10:57:50.250: W/System.err(16811):    at com.first.MyApp.MyApp$downloadSaAsnyc.doInBackground(MyApp.java:970)
06-04 10:57:50.250: W/System.err(16811):    at com.first.MyApp.MyApp$downloadSaAsnyc.doInBackground(MyApp.java:1)
06-04 10:57:50.250: W/System.err(16811):    at android.os.AsyncTask$2.call(AsyncTask.java:252)
06-04 10:57:50.250: W/System.err(16811):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
06-04 10:57:50.250: W/System.err(16811):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
06-04 10:57:50.250: W/System.err(16811):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1081)
06-04 10:57:50.250: W/System.err(16811):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:574)
06-04 10:57:50.250: W/System.err(16811):    at java.lang.Thread.run(Thread.java:1020) 
```

我试图解析的 URL 中的 XML 看起来像这样......

```
<ScheduledAudienceResponse>
    <ScheduledAudiences>
        <ScheduledAudience>
            <audience_id>1</audience_id>
            <audience_name>Jones Kapate</audience_name>
            <firstname>Jones</firstname>
            <lastname>Kapate</lastname>
            <id_number>123434</id_number>
            <branch_id>164</branch_id>
            <audience_group_id>8</audience_group_id>
            <scheduled_date>2012-06-04</scheduled_date>
        </ScheduledAudience>
        <ScheduledAudience>
            <audience_id>4</audience_id>
            <audience_name>John Doe</audience_name>
            <firstname>John</firstname>
            <lastname>Doe</lastname>
            <id_number>12312</id_number>
            <branch_id>164</branch_id>
            <audience_group_id>8</audience_group_id>
            <scheduled_date>2012-06-04</scheduled_date>
        </ScheduledAudience>
    </ScheduledAudiences>
</ScheduledAudienceResponse> 
```

我用来解析上述 XML 代码的代码如下所示......

```
String sa_target_url = "http://my.app.com/scheduled_audiences/scheduled_audience_xml/" 
                        + username + "/" + password + "/" + current_date + "/"
                        + device_id;

Log.v( LOG_TAG, "sa_target_url: " + sa_target_url );

URL sa_url = new URL( sa_target_url );

sa_url.openConnection();

SAXParserFactory spf = SAXParserFactory.newInstance();
SAXParser sp = spf.newSAXParser();
XMLReader xr = sp.getXMLReader();

ScheduledAudienceHandler myScheduledAudienceHandler = new ScheduledAudienceHandler();

xr.setContentHandler( myScheduledAudienceHandler );
xr.parse( new InputSource( sa_url.openStream() ) ); 
```

谢谢你的帮助！

# git - Git - 将更改提交到另一个人的子模块

> ID：10875906
> 
> 赞同：0
> 
> 时间：2012-06-04T03:06:11.603
> 
> 标签：git

我有一个带有子模块的 git repo，它属于其他人。现在我想对其进行更改，例如添加和修改。

我考虑分叉该项目，然后将其用作新的子模块。无论如何我可以通过简单地将新文件提交到子模块并使用我当前的 repo 跟踪它来避免这种情况吗？

谢谢阅读，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T03:41:10.167

如果您无权访问作为子模块的存储库，则无法对其进行更改。您必须有一个 fork 并将其添加为子模块。一旦你做出更改，将它们推送到子模块，以便任何克隆你的仓库的人都可以看到这些更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T03:27:37.023

子模块基本上是存储库中的存储库。如果您进入子模块所在的目录，您可以像使用任何 git repo: `add`、`commit`、检查日志等一样使用它。它与其他存储库隔离。

但是，当子模块更改时，父存储库显示必须添加并提交到父存储库的*单个*更改*目录。*

# c++ - 基本 c 指针返回

> ID：10875913
> 
> 赞同：2
> 
> 时间：2012-06-04T03:07:26.673
> 
> 标签：c++, pointers

以下应用程序因空指针而崩溃。我想知道怎么了...

```
#include "stdio.h"
#include "string.h"

char* getFileData(char* fileName);
bool createShader( int shaderType, const char* shader, const char* shaderFile ) ;
void glShaderSource(int shader, int count, const char** string, const int* length);

int main(int argc, char* argv[])
{
    char* shader = getFileData("filea.csd");
    bool success = createShader(1, shader, "filea.csd");
    return 0;
}

char* getFileData(char* fileName) {
    if(!strcmp(fileName, "filea.csd"))
        return "this is the content of the file a\0";
    else if(!strcmp(fileName, "fileb.csd"))
        return "this is the content of the file b\0";
    else if(!strcmp(fileName, "filec.csd"))
        return "this is the content of the file c\0";
    else 
        return "";
}

bool createShader( int shaderType, const char* shader, const char* shaderFile ) 
{
    int shaderHandle = 122;

    glShaderSource( shaderHandle, 1, &shader, NULL ); ////This line is where it crashes.
    return true;
}

void glShaderSource(int shader, int count, const char** string, const int* length) {
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T03:22:08.413

我认为检查 glCreateShader 的返回值可能是一件好事。确保它不为零。

线

`delete shader`

也是错误的。它可能不会在那里崩溃，但您需要使用它`free`来释放 malloc 分配的内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T03:30:13.193

由于指针为 NULL，请尝试传递双指针。某种形式的东西

```
bool createShader( GLenum shaderType, const char** shader, const char* shaderFile )//<-- change 
{
    GLuint shaderHandle = glCreateShader( shaderType );

    glShaderSource( shaderHandle, 1, shader, NULL ); //<--change
    glCompileShader( shaderHandle );

    int status = 0;

    glGetShaderiv( shaderHandle, GL_COMPILE_STATUS, &status );
}

void main () {
      char* shader = strdup(getFileData("filea.csd"));
      bool success = createShader(shaderType, &shader, "filea.csd"); //<--change
      delete shader;
      return success;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T04:17:16.843

我看到的一个错误是这一行：

```
 delete shader; 
```

只有当着色器指向的内存是使用 new 运算符分配的时，该行才能正常工作。但是，如果我们查看您的 getFileData() 方法，我们会发现它返回的字符数组不是由 new 分配的，而是静态数据。

So the fix would be to have getFileData() return a character array that was allocated by the new operator, or better yet a std::string. Using dynamically-allocated character arrays for string handling is very error prone and not recommended.

# php - 使用 PHP 生成 JSON 文件时的外语问题

> ID：10875925
> 
> 赞同：0
> 
> 时间：2012-06-04T03:10:21.017
> 
> 标签：php, mysql, json, unicode

我有一个 MySQL 数据库，其中包含一些文本，其中一些文本是外语的。当我尝试使用 PHP 使用这些内容生成 JSON 时。我得到这些字段的问号和空值。

如果我使用 MySQL Workbench 来检索这些字段，它们会以外语正确显示。无论如何我可以解决这个问题？以下是我用来生成 JSON 文件的代码。

```
$arr = array();
$rs = mysql_query($sql) or die(json_encode(array("error"=>mysql_error())));
while($obj = mysql_fetch_object($rs)) {
    $arr[] = $obj;
}

echo json_encode(array("T"=>$arr));
exit; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T03:21:08.180

使用**utf8_encode**函数将您从数据库中带入的所有内容编码为 UTF8。

确保您的所有文件都以相同的方式编码，并在您的 HTML 中添加：

```
<meta charset="UTF-8"> 
```

在`<head>`标签的开头

# php - “无法检索指定的页面。请验证是否传入了正确的 href。”

> ID：10875927
> 
> 赞同：2
> 
> 时间：2012-06-04T03:11:14.457
> 
> 标签：php, facebook-likebox

尝试在我的网站上添加 facebook like 框时出现以下错误：

无法检索指定的页面。请验证正确的 href 是否已传入。

类似框在我的 DEV 文件夹中似乎可以正常工作，该文件夹是 public_html 目录中的子目录。因此，当我的 data-herf 包含“/DEV/”时，DEV/index.php 工作正常。但是，当我将 data-href 更改为 /DEV/ 以外的任何内容时，它会失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T03:17:26.187

data-href 应该是一个**完整**的非私有 URL，例如**http://www.stackoverflow.com**。不要使用像**/foo/bar.php**这样的相对路径。

希望能帮助到你！

# matlab - matlab如何判断图像的质量？

> ID：10875928
> 
> 赞同：3
> 
> 时间：2012-06-04T03:11:22.780
> 
> 标签：matlab, image-processing

我正在研究虹膜识别和预处理，我必须检查图像是否

1.  散焦
2.  运动中

你能帮忙找出图像是否属于上述类别吗？

我正在使用 Matlab 2010b，所有图像都是灰度 480x240 包含眼睛。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T03:17:15.013

所以你想测量模糊？我假设“运动中”是指运动模糊，所以请查看： http: [//www.mathworks.com/matlabcentral/fileexchange/24676-image-blur-metric](http://www.mathworks.com/matlabcentral/fileexchange/24676-image-blur-metric)

我自己从未使用过它，但也许它会有所帮助。

# javascript - How to change parentId property on Extjs NodeInterface

> ID：10875934
> 
> 赞同：1
> 
> 时间：2012-06-04T03:12:30.930
> 
> 标签：javascript, rest, extjs, extjs4

I creating simple tree with rest service on *Extjs 4.1*.
How can I change parentId property name from `Ext.data.NodeInterface`?

Here is my model:

```
Ext.define('Buildlife.model.Folder', { 
    extend:'Ext.data.Model', idProperty:'id',  
    fields:[
        {name:'id', type:'auto',defaultValue:null},
        {name:'name', type:'auto'},  
        {name:'files',type:'auto',convert:function(val,rec){
            for(var i in val){
                var each = val[i];
                Ext.apply(each,{
                    name: each.fileName,
                    leaf:true,
                    iconCls:'x-event-icon'
                });
                rec.appendChild(rec.createNode(each));
            } 
            return val;
        },defaultValue:null}
    ], 
    proxy:{
        type:'rest', 
        url:GlobalConf.contextPath+'/rest/folder', 
        reader:{type:'json', root:'children', successProperty:'success'}, 
        writer:{type:'json', root:'children', writeAllFields:false}, 
        listeners:{exception:GlobalConf.storeExceptionHandler}
    }
}); 
```

When I add child node, it send parent node as a parentId.

```
{
    "children": {
        "name": "test",
        "parentId": "4fc742f344aeac0cc87e6afa",
        "leaf ": false
        //etc.
    }
} 
```

Is it possible to change it to customProperty such as:

```
{
    "children": {
        "name": "test",
        "customProperty": "4fc742f344aeac0cc87e6afa",
        "leaf ": false
        //etc.
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T05:53:31.737

Doesn't look like it. ParentId is part of the NodeInterface class which every tree node subclasses. You would have to override the 'decorate' static method listed here: [http://docs.sencha.com/ext-js/4-1/source/NodeInterface.html#Ext-data-NodeInterface](http://docs.sencha.com/ext-js/4-1/source/NodeInterface.html#Ext-data-NodeInterface) Also there is an updateInfo method that gets called after a node move that will try to set parentId property - so that must be changed too.

# events - 使用 vaadin 捕获表中文本字段上的值更改事件

> ID：10875936
> 
> 赞同：3
> 
> 时间：2012-06-04T03:12:38.427
> 
> 标签：events, listener, vaadin

请支持我下面的问题。

我有一个包含一个表和其他组件的对话框。该表有多行和多列。一列包含由用户输入数据的**文本字段。**

但是，源代码是由其他一些层构建的，如下所示：

1.  Dialog组件由DialogA类构建
2.  Table组件由TableB类构建
3.  TableB 调用生成器类 GeneratorC 生成该表的列、行、文本字段

如果我留在 GeneratorC 中，我可以在 TableB 中的**文本字段**上添加侦听器并捕获事件，但我留在 DialogA 中，我无法在该**文本字段**上捕获值更改事件。虽然我在 TableB 上添加了侦听器，但此侦听器仅捕获列和行的事件，此侦听器不捕获该**文本字段**的任何事件。

实际上，我只需要捕获文本字段的值更改事件。目前我仍然没有找到任何解决这个问题的方法。

源代码段为TableB添加监听器，此源代码留在DialogA中：

```
 TableB.addListener(new Property.ValueChangeListener()
    {
        private static final long serialVersionUID =
        1L;

        @Override
        public void valueChange(
            ValueChangeEvent event)
        {
             String temp = (String)event.getProperty().getValue();
        }
   }); 
```

我期待着你的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T11:30:33.933

侦听器应添加到您在 ColumnGenerator 中添加的文本字段，而不是表本身：

```
 private class TextFieldColumnGenerator implements Table.ColumnGenerator {

            private TextField tf;

            @Override
            public Component generateCell(final Table source, final Object itemId,
                    final Object columnId) {
                Item item = source.getItem(itemId);
                        tf.addListener(new FieldEvents.TextChangeListener() {

                @Override
                public void textChange(TextChangeEvent event) {

                    doSomething(event.getText());
                }
            });
    return tf;
    } 
```

我认为这应该是正确的，我是在 IDE 之外编写的，因此可能会出现一些错误。

# python - 创建一个充满 HBox/Any Widget 的边框

> ID：10875937
> 
> 赞同：2
> 
> 时间：2012-06-04T03:12:41.787
> 
> 标签：python, gtk, pygtk

**如何在 gtk 中的框/任何小部件周围创建边框？**

当我说边框时，我指的是您在下图中看到的浅灰色圆角矩形：

![在此处输入图像描述](../Images/52d3dcc348cc7127f9b0c0cfebb0e5fb.png)

我尝试/寻找的功能不会创建边框，即 set_border() 在小部件周围创建内部间隙/填充。

```
b= gtk.VBox(False, 10)
b.set_border(1) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T06:13:23.860

使用`gtk.Frame`：

```
import gtk

w = gtk.Window()
w.connect('destroy', lambda x: gtk.main_quit())
f = gtk.Frame()
b = gtk.HBox()
f.add(b)
w.add(f)
w.show_all()

gtk.main() 
```

# c++ - 如何在 POCO C++ 库中正确使用 OpenSSL

> ID：10875938
> 
> 赞同：17
> 
> 时间：2012-06-04T03:12:54.447
> 
> 标签：c++, https, openssl, poco-libraries

根据 POCO 助手中的规范：

> 通过调用 Poco::Crypto::OpenSSLInitializer::initialize() 初始化 NetSSL 库以及底层 OpenSSL 库。应该在使用 NetSSL 库中的任何类之前调用​​。NetSSL 将在创建 Context 或 SSLManager 实例时通过 Poco::Crypto::OpenSSLInitializer 实例或类似机制自动初始化。但是，建议在任何情况下在应用程序启动时调用 initializeSSL()。

当我想使用`HTTPSClientSession`时，我必须先构造一个 Application 对象吗？如何在客户端中使用它？任何人都可以告诉我吗？非常感谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-02T03:42:39.363

我们以 Net/samples/httpget 为例，我们将 httpget/ 复制为一个新的 httpsget 目录：

1.  打开 Makefile，将“PocoNetSSL”添加到 target_libs
2.  将“HTTPClientSession”替换为“HTTPSClientSession”
3.  您需要为 SSL 使用创建 Poco::Net::Context
4.  替换 'HTTPClientSession session(uri.getHost(), uri.getPort());' 有以下两行：

```
const Context::Ptr context = new Context(Context::CLIENT_USE, "", "", "", Context::VERIFY_NONE, 9, false, "ALL:!ADH:!LOW:!EXP:!MD5:@STRENGTH");
HTTPSClientSession session(uri.getHost(), uri.getPort(), context);
```

概括：

1.  将 PocoNetSSL 添加为 lib_depends
2.  将 Poco::Net::Context 与 HTTPSClientSession 一起使用

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-10-26T03:18:49.883

不，您不需要 Application 对象。这是一个功能齐全的示例：

```
$ httpsget https://httpbin.org/user-agent
{
  "user-agent": "Poco HTTPSClientSession"
} 
```

代码：

```
#include "Poco/StreamCopier.h"
#include "Poco/URI.h"
#include "Poco/Exception.h"
#include "Poco/SharedPtr.h"
#include "Poco/Net/SSLManager.h"
#include "Poco/Net/KeyConsoleHandler.h"
#include "Poco/Net/ConsoleCertificateHandler.h"
#include "Poco/Net/HTTPSClientSession.h"
#include "Poco/Net/HTTPRequest.h"
#include "Poco/Net/HTTPResponse.h"
#include <memory>
#include <iostream>

using namespace Poco;
using namespace Poco::Net;

class SSLInitializer {
public:
    SSLInitializer() { Poco::Net::initializeSSL(); }

    ~SSLInitializer() { Poco::Net::uninitializeSSL(); }
};

int main(int argc, char** argv)
{
    SSLInitializer sslInitializer;

    SharedPtr<InvalidCertificateHandler> ptrCert = new ConsoleCertificateHandler(false);
    Context::Ptr ptrContext = new Context(Context::CLIENT_USE, "", "", "rootcert.pem", Context::VERIFY_STRICT, 9, false, "ALL:!ADH:!LOW:!EXP:!MD5:@STRENGTH");
    SSLManager::instance().initializeClient(0, ptrCert, ptrContext);

    try
    {
        if (argc > 1)
        {
            URI uri(argv[1]);
            HTTPSClientSession s(uri.getHost(), uri.getPort());
            HTTPRequest request(HTTPRequest::HTTP_GET, uri.getPath());
            request.set("user-agent", "Poco HTTPSClientSession");
            s.sendRequest(request);
            HTTPResponse response;
            std::istream& rs = s.receiveResponse(response);
            StreamCopier::copyStream(rs, std::cout);
        }
    }
    catch (Exception& ex)
    {
        std::cout << ex.displayText() << std::endl;
        return 1;
    }

    return 0;
} 
```

# c# - 在 WCF 可靠请求回复服务方法中回复时如何处理失败

> ID：10875942
> 
> 赞同：3
> 
> 时间：2012-06-04T03:14:05.000
> 
> 标签：c#, .net, wcf, ws-reliablemessaging

在可靠的请求回复中，我了解回复是公认且可靠的。如果由于某种原因，回复消息在所有 8 次尝试中持续失败（默认重试次数为 8 次），则通道将出现故障。

在服务器端服务方法中，如果回复失败，我需要采取措施，但我看不到如何实现这一点，因为服务方法不知道 WCF 上下文。

```
 /// <summary>
    /// This is my service method, and does the reply in reliable request reply
    /// </summary>
    /// <returns></returns>
    public IModelJob GetNextJob()
    {
        //dequeue the next item if there is any
        var modelJob = _priorityQueue.Dequeue();

        //if all attempts to reply fail (or at least fail to be acknowledged) then when and how do I get a chance to requeue this job?
        return modelJob;

    } 
```

当您是客户端并在代理本身上调用服务方法时，处理故障似乎要容易得多，因为您可以从 ClientBase 实现自己的代理。

我已阅读： http: [//msdn.microsoft.com/en-us/library/aa480191.aspx](http://msdn.microsoft.com/en-us/library/aa480191.aspx)并进行了搜索，但找不到任何具体内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-24T03:12:29.230

根据您最终支持的业务运营来考虑它。例如，如果服务期望每隔 30 分钟定期从客户端发送一系列消息，那么您可能有一个要求（在业务意义上），如果一条消息在 120 分钟内没有看到，那么服务应该通知行政人员。这将在驱动您的服务的业务逻辑中实现。

当它没有收到消息时，你不能让它抛出异常，这不是 WCF 的缺点——它怎么知道它应该首先期待一个异常？

请记住，Reliable Messaging 在应用程序的下一层工作，就像 TCP 重新传输发生在您的 HTTP 应用程序完全不知道的情况下一样。事实上，在 TCP 级别需要重新传输或多次传输，这不是接收者关心的问题，当然也不会在协议堆栈上抛出异常。由数据的发送者最终检测到数据无法发送，并对其进行处理。或者，在我给出的示例中，服务背后的业务逻辑在业务级别实现需求。

您可能对我写的关于 WS-ReliableMessaging 的一些缺点的[博客文章感兴趣。](http://oceanweb.net.nz/ws-unreliablemessaging-and-the-us-postal-service/)

# mysql - 将一个表中某个字段的值与另一个表中多个字段的总和进行比较

> ID：10875945
> 
> 赞同：1
> 
> 时间：2012-06-04T03:14:34.983
> 
> 标签：mysql, sql, join

我有两张桌子

*   包表：packageid、数量
*   交易表：transactionid、packageid、数量

每当获得“ `package`”时，都会在“ ”表中创建一个条目`transactions`，以及获得的数量。可以执行多个' `transactions`'，并且当完全获得包裹时，该包裹的所有交易的总和应该等于包裹表中该包裹的数量。

我想写一个 SQL 语句来检查一个特定的 packageid 是否没有被完全获取，即：

1.  未执行任何交易
2.  已执行交易，但所有交易的数量之和小于包裹表中的数量

我怎样才能做到这一点？我尝试使用的每个加入都只为 2 号服务，但不考虑没有交易的包裹

我试过：

`select package.packageid, package.quantity, sum(transactions.quantity) from package join transactions on package.packageid = transactions.packageid where package.quantity > sum(transactions.quantity)`

也试过左加入，但它不起作用。理想情况下，我希望结果中左侧表中列出的所有包在必要时右侧为空值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T03:33:03.137

如果要包含没有事务的包，则需要[left outer join](http://en.wikipedia.org/wiki/Join_%28SQL%29#Left_outer_join)。这将保留结果中的所有包并匹配存在事务的事务。

然后您需要[分组，](http://www.w3schools.com/sql/sql_groupby.asp) `package.packageid`以便您的`sum`操作仅适用于`transactions`属于某个特定的记录`packageid`。

然后使用与 where 子句类似的[having 子句](http://www.w3schools.com/sql/sql_having.asp)，只是它适用于聚合函数，例如`sum`.

```
select
  p.packageid,
  p.quantity,
  sum(t.quantity) as transaction_sum
from
  packages p
  left outer join transactions t on (t.packageid = p.packageid)
group by
  p.packageid,
  p.quantity
having
  coalesce(sum(t.quantity), 0) != p.quantity
; 
```

合并只是说，“取第一个非空值”。因此，如果`sum(t.quantity)`返回`null`，那么它将`0`改为使用。这将确保结果集中包含有数量但没有交易的包。

我建议您阅读 group by 和 having 。在使用 sql 时，它们是必不可少的。从本质上讲，分组依据是根据数据的共同标准将您的数据分成几组。然后根据组的质量过滤掉某些结果。

# php - PHP 多语言脚本

> ID：10875948
> 
> 赞同：0
> 
> 时间：2012-06-04T03:14:54.110
> 
> 标签：php, mysql

我正在尝试编写多语言 php 脚本（英语和韩语）。但是，问题是从管理员添加的数据。我有一种方法可以将脚本中的常量创建为`phrases`，但是会有很多数据将从管理员添加。

例如，管理员会将学校添加到脚本中并在主页中显示。我为每种语言都有一张表格`constants`

```
school_id       school_name                                 school_description
--------------------------------------------------------------------------------------------------------------------
    1               ELI             This school is good for students who are looking to develope thier acadmic skills
    2               ALI             This school is good for students who are looking to develope thier conversation skills
    3               ELI             이 학교는 그들의 대화 기술을 개발하고자하는 학생들에게 좋다 
```

正如您在我的数据库中看到的这些英文数据，我想让管理员也能够将这些数据添加到`Korean`. 在用户界面中，用户将在用户页面中看到常量变量的短语。

如果管理员想在韩语部分或英语部分显示这所学校，我的解决方案是在数据库中添加一个字段。但是，我想在这里问您是否有任何标准解决方案可以采用这种方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T03:23:36.757

也许您可以使用“一对多”表关系：

```
table school [school_id, school_name, default_desc]
table school_property [school_id, desc, facilities, advantages, disadvantages, language] 
```

这样您就可以使用两种以上的语言（例如韩语、英语和日语）

# mysql - 从无效的 URL 中隐藏 mySQL 错误

> ID：10875954
> 
> 赞同：0
> 
> 时间：2012-06-04T03:16:31.490
> 
> 标签：mysql

我有一个站点，其中包含存储在 mySQL 数据库中的 300 篇文章，URL 格式为 www.site.com/article1.html。

大多数无效 URL 成功重定向到主站点。例如，www.site.com/article301 重定向到 www.site.com，这正是我想要的。

但是 www.site.com/article301.html 不会重定向到任何地方。相反，它会在页面顶部加载一个空白文章模板和以下错误：

```
Warning: mysql_num_rows(): supplied argument is not a valid MySQL result resource in /home//public_html/site.com/functions.php on line 26 
```

第 26 行及以下读取

```
 if(mysql_num_rows($result)>0) {
        $row=mysql_fetch_array($result);
        if(ENABLE_REWRITE == 1) $path=' &raquo; <a href="'.DOC_ROOT.'/'.$row['nameurl'].'/page_1/">'.$row['name'].'</a>'.$path;
        if(ENABLE_REWRITE == 0) $path=' &raquo; <a href="index.php?page=1&category='.$id.'">'.$row['name'].'</a>'.$path;
        if($row['parent']==0) $f=1;
        else $id=$row['parent'];
    } else {
        return ' - ';
    }
}
return $path;
} 
```

任何想法如何解决这一问题？

这是 King Skippus 要求的完整代码

```
<?php
/*function get_folders_path($id) {
    $f=0;
    $path='';
    while($f==0)
    {
        $result=mysql_query("SELECT name, parent FROM categories WHERE id=$id");
        if(mysql_num_rows($result)>0) {
            $row=mysql_fetch_array($result);
            $path=' &raquo; '.$row['name'].$path;
            if($row['parent']==0) $f=1;
            else $id=$row['parent'];
        } else {
            return ' - ';
        }
    }
    return $path;
}*/

function get_folders_path($id) {
    $f=0;
    $path='';
    while($f==0)
    {
        $result=mysql_query("SELECT * FROM categories WHERE id=$id");
        if($result !== FALSE && mysql_num_rows($result)>0) {
            $row=mysql_fetch_array($result);
            if(ENABLE_REWRITE == 1) $path=' &raquo; <a       href="'.DOC_ROOT.'/'.$row['nameurl'].'/page_1/">'.$row['name'].'</a>'.$path;
            if(ENABLE_REWRITE == 0) $path=' &raquo; <a href="index.php?page=1&category='.$id.'">'.$row['name'].'</a>'.$path;
            if($row['parent']==0) $f=1;
            else $id=$row['parent'];
        } else {
            return ' - ';
        }
    }
    return $path;
}

function get_categories_tree($id) {
    static $categs = array ();
    static $level=0;
    $level++;

    $result=mysql_query("SELECT * FROM categories WHERE parent=$id");

    while($row=mysql_fetch_array($result)) {
        $categs[$row['id']][0] = $row['id'];
        $categs[$row['id']][1] = '/'.$row['nameurl'];
        $categs[$row['id']][2] = str_repeat('&nbsp;&nbsp;', $level-1);
        $categs[$row['id']][3] = $row['name'];
        get_categories_tree($row['id']);
    }
    $level--; 
    return $categs;
}

function get_cats($id) {
    $categs = array ();
    $result=mysql_query("SELECT * FROM categories WHERE parent=$id");

    while($row=mysql_fetch_array($result)) {
        $categs[$row['id']][0] = $row['id'];
        $categs[$row['id']][1] = '/'.$row['nameurl'];
//      $categs[$row['id']][2] = str_repeat('&nbsp;&nbsp;', $level-1);
        $categs[$row['id']][3] = $row['name'];
    }
    return $categs;
}

/*function login() {
    if (!isset($_SERVER['PHP_AUTH_USER'])) {
       header('WWW-Authenticate: Basic realm="My Realm"');
       header('HTTP/1.0 401 Unauthorized');
       return false;
    } else {
        $result=mysql_query("SELECT * FROM users WHERE login='{$_SERVER['PHP_AUTH_USER']}' AND password='{$_SERVER['PHP_AUTH_PW']}'");
        if(mysql_num_rows($result)>0) return true;
        else {
            header('WWW-Authenticate: Basic realm="My Realm"');
            header('HTTP/1.0 401 Unauthorized');
            return false;
        }
    }
}*/

function login() {
    if (!isset($_SESSION['AUTH_USER']) || !isset($_SESSION['AUTH_PASS'])) return false;
    else {
        $result=mysql_query("SELECT * FROM users WHERE     login='{$_SESSION['AUTH_USER']}' AND password='{$_SESSION['AUTH_PASS']}'");
        if(mysql_num_rows($result)>0) return true;
        else return false;
    }
}

function get_categories($id) {
    static $categs = array ("0" => "[Top]");
    static $level=0;
    $level++;

    $result=mysql_query("SELECT * FROM categories WHERE parent=$id");

    while($row=mysql_fetch_array($result)) {
        $categs[$row['id']] = str_repeat('|&nbsp;&nbsp;&nbsp;', $level-1).'|___'.$row['name'];
        get_categories($row['id']);
    }
    $level--; 
    return $categs;
}

function get_parent_name($id) {
    if($id!=0) {
        $result=mysql_query("SELECT name FROM categories WHERE id=$id");
        if(mysql_num_rows($result)>0) {
            $row=mysql_fetch_array($result);
            return $row['name'];
        }
        else return '-';
    }
    else return 'Top';
}
function getcatname($id, $table)
{
        $r=mysql_query("SELECT title FROM $table WHERE id='$id'");
        if(mysql_num_rows($r)>0) {
            $row=mysql_fetch_array($r);
            return $row['title'];
        }
    else
        return "-";
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T03:19:50.843

可能您的查询失败了，并且您没有错误处理。您的基本基本查询序列应该是：

```
$result = mysql_query($sql) or die(mysql_error());
                           ^^^^^^^^^^^^^^^^^^^^^^ 
```

如果您假设查询成功并`$result`稍后盲目使用，您往往会得到您所做的错误类型，因为 mysql_query 将在某些事情发生时返回布尔值 FALSE。该 FALSE 不是有效的语句句柄，因此后续的 num_rows/fetch 调用也将蓬勃发展。

永远不要假设查询已经成功。即使您的 sql 语法是 100% 完美的，也有太多其他原因导致无法检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T03:21:55.527

尝试更换

```
if(mysql_num_rows($result)>0) { 
```

和

```
if($result === FALSE) {
    header('Location: http://www.example.com/');
}
else if (mysql_num_rows($result)>0) {
    // Query was valid, but no rows returned. Take appropriate action.
} 
```

**编辑**

出于故障排除的目的，如果您将功能更改为此，它会显示什么？请注意，这会故意破坏您的网站，但它会提供对故障排除有用的数据。

```
function get_folders_path($id) {
    $f=0;
    $path='';
    while($f==0)
    {
        $result=mysql_query("SELECT * FROM categories WHERE id=$id");
        die(sprintf("Value of id: %s, MySQL Error: %s",
            var_dump($id, true), var_dump(mysql_error($result), true)));
        // Leave the rest of your function as-is, just insert the line above. 
```

# python - 我如何知道 taskmgr 中正在运行哪个 python 脚本？

> ID：10875955
> 
> 赞同：6
> 
> 时间：2012-06-04T03:16:49.600
> 
> 标签：python, windows, taskmanager

似乎在任务管理器中我得到的只是python/pythonwin的进程。那么如何确定正在运行的 python 脚本呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-04T03:23:00.643

此类问题的通常答案是[Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)。您可以查看工具提示的任何实例`python.exe`或`pythonw.exe`工具提示中的完整命令行。

要在 Python 中获取相同的信息，您可以使用[psutil 模块](http://code.google.com/p/psutil/)。

```
import psutil

pythons = [[" ".join(p.cmdline), p.pid] for p in psutil.process_iter() 
            if p.name.lower() in ("python.exe", "pythonw.exe")] 
```

结果 ,`pythons`是代表 Python 进程的列表列表。每个列表的第一项是启动进程的命令行，包括任何选项。第二项是进程 ID。

psutil`Process`类中有很多其他的东西，所以如果你想要所有这些，你可以这样做：

```
pythons = [p for p in psutil.process_iter() if p.name.lower() in ("python.exe", "pythonw.exe")] 
```

现在，在我的系统上，迭代所有进程`psutil.process_iter()`需要几秒钟，这在我看来很荒谬。下面的速度明显更快，因为它在 Python 看到它之前进行了进程过滤，但它依赖于`wmic`命令行工具，并非所有版本的 Windows 都有（尤其是 XP Home 缺少它）。此处的结果与第一个`psutil`版本相同（列表列表，每个列表都包含一个 Python 进程的命令行和进程 ID）。

```
import subprocess

wmic_cmd = """wmic process where "name='python.exe' or name='pythonw.exe'" get commandline,processid"""
wmic_prc = subprocess.Popen(wmic_cmd, stdout=subprocess.PIPE, stderr=subprocess.PIPE, shell=True)
wmic_out, wmic_err = wmic_prc.communicate()
pythons = [item.rsplit(None, 1) for item in wmic_out.splitlines() if item][1:]
pythons = [[cmdline, int(pid)] for [cmdline, pid] in pythons] 
```

如果`wmic`不可用，您将得到一个空列表`[]`。由于您知道至少有一个 Python 进程（您的！），您可以将其捕获为错误并显示适当的消息。

要获得您自己的进程 ID，因此如果您要开始杀死进程，则可以将其排除在外，请尝试 pywin32`win32process.GetCurrentProcessID()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-05T22:20:25.427

我对kindall的回答有一些疑问。使用 python 3.8：

```
import psutil
for p in psutil.process_iter():
    try: 
        if p.name().lower() in ["python.exe", "pythonw.exe"]:
            print(p.pid, p.cmdline)
    except: 
        continue 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-11-01T07:30:30.360

使用 Python 3：

```
import psutil

pythons = [[" ".join(p.cmdline()), p.pid] for p in psutil.process_iter()
        if p.name().lower() in ["python.exe", "pythonw.exe"]] 
```

# android - 如何组合字符串数组资源？

> ID：10875957
> 
> 赞同：0
> 
> 时间：2012-06-04T03:17:03.980
> 
> 标签：android

在我的 Android 应用程序中，我有多个使用不同数组资源的活动，我想创建一个包含所有这些资源的活动。有没有一种简单的方法可以做到这一点，以便当我将一个项目添加到字符串数组时，它会自动添加到“全部”活动中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T03:31:41.320

您需要在名为 ConstantCodes.java 的类中创建一个通用数组，并在其中声明所有数组，如下所示，

```
public class ConstantCodes
{
       public static String[][] arrayCollection = { { "A11","A22","A33" }, 
                                    { "B11","B22","B33" },
                                    { "C11","C22","C33" } 
                                  };
} 
```

**调用 FirstActivity.java**

```
private String[] firstActivityArray = ConstantCodes.arrayCollection[0]; // this will return first stored array on 0th position. 
```

**调用 SecondActivity.java**

```
private String[] secondActivityArray = ConstantCodes.arrayCollection[1]; // this will return first stored array on 1st position. 
```

# openwrt - OpenWrt/network - 为广告拦截配置 dnsmasq 失败，“地址错误”

> ID：10875959
> 
> 赞同：0
> 
> 时间：2012-06-04T03:17:21.670
> 
> 标签：openwrt, adblock, dnsmasq

试图让广告拦截在 OpenWrt 路由器固件 10.03.1 中工作

我准备了一个文件 /etc/hosts.ads 包含无害的条目，如

```
address=/eviladserver1.com/127.0.0.1
address=/eviladserver2.com/127.0.0.1 
```

在 /etc/dnsmasq.conf 我添加了以下行：

```
 addn-hosts=/etc/hosts.ads 
```

并重新启动 dnsmasq。现在重新启动时，我看到日志中充满了错误消息：

```
Jun  3 22:52:33 OpenWrt daemon.err dnsmasq[13056]: bad address at /etc/hosts.ads line 1 
```

关于 hosts.ads 中的每一行，我都用谷歌搜索了它，但没有运气。从语法上看，一切似乎都是正确的，为什么 dnsmasq 不喜欢它？

（hosts.ads 中的所有行仅以 [LF] 结尾）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-05T17:25:30.163

/etc/hosts.ads 的适当格式是标准 HOSTS 格式，例如：

```
127.0.0.1 eviladserver1.com
127.0.0.1 eviladserver2.com 
```

看看我在[http://jazz.tvtom.pl/adblock-w-openwrt/](http://jazz.tvtom.pl/adblock-w-openwrt/)（波兰语）上为 OpenWRT 实现的 adblock。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-04T18:35:57.413

根据[dnsmasq 文档](http://www.thekelleys.org.uk/dnsmasq/docs/dnsmasq-man.html)，以格式`addn-hosts=`指定其他地址。`/etc/hosts`看起来您正在尝试添加一个额外的 dnsmasq 配置文件。为此，您想`conf-file=`直接指定文件，或者您想将文件放在指定的目录中`conf-dir=`。

# jquery - 错误循环遍历循环并在满足条件时中断

> ID：10875964
> 
> 赞同：2
> 
> 时间：2012-06-04T03:18:50.147
> 
> 标签：jquery, backbone.js, coffeescript, break

我正在使用 jQuery 循环遍历数组并将每个值与模型的用户 ID 进行比较。如果找到匹配项，我只会显示特定文本。

```
$.each current_user.get('following_ids'), (i, e) =>
  console.log(@model.get('user')._id == e)
  if @model.get('user')._id == e
    @is_following = true
    //break from loop if condition is met
    return false
  else
    @is_following = false
    //else continue looping through
    return true

if @is_following
  $(@el).find('.user_info .follow a').text "following"
else
  $(@el).find('.user_info .follow a').text "follow" 
```

但是我的代码不起作用，它总是返回我“关注”文本。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T03:37:22.467

大概`current_user.get('following_ids')`是某种ID数组。立即想到两种可能性：

1.  `current_user.get('following_ids')`不包含`@model.get('user')._id`所以一切都按预期工作。
2.  你有类型问题。也许`following_ids`是一个字符串数组并且`_id`是一个数字，反之亦然。

选项**2**需要更多解释：CoffeeScript`==`被转换为 JavaScript `===`，所以`1 == '1'`在 CoffeeScript 中为假，但在 JavaScript 中为真。这确实使**2成为****1**的隐藏且可能令人惊讶的变体，但它的特殊性足以成为它自己的情况。

考虑一下您的情况的这种简化模拟：

```
$.each ['1','2','3'], (i, e) =>
    if 2 == e
        @is_following = true
        return false
    else
        @is_following = false
        return true
console.log @is_following 
```

你会摆脱`false`它，因为`2 == '2'`它`false`是 CoffeeScript：http: [//jsfiddle.net/ambiguous/YsstH/](http://jsfiddle.net/ambiguous/YsstH/)

但是，如果我们修复类型：

```
$.each [1,2,3], (i, e) =>
    # Only the array changes...
console.log @is_following 
```

然后我们得到`true`我们期望的结果：http: [//jsfiddle.net/ambiguous/CxHXu/](http://jsfiddle.net/ambiguous/CxHXu/)

* * *

无论如何，由于您使用的是 Backbone，因此您有下划线，因此您可以使用[`_.any`](http://documentcloud.github.com/underscore/#any)：

```
@is_following = _(current_user.get('following_ids')).any (id) => @model.get('user')._id == id 
```

或更好：

```
want_this_id  = @model.get('user')._id
@is_following = _(current_user.get('following_ids')).any (id) -> want_this_id == id 
```

不过，您仍然必须解决类型问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T03:25:33.163

最有可能的是，您在找到匹配项后会覆盖结果。如果您找到了匹配项，则无需继续检查。

```
$.each current_user.get('following_ids'), (i, e) =>
  unless @is_following
    console.log(@model.get('user')._id == e)
    if @model.get('user')._id == e
       @is_following = true
      //break from loop if condition is met
      return false
    else
      @is_following = false
      //else continue looping through
      return true

if @is_following
  $(@el).find('.user_info .follow a').text "following"
else
  $(@el).find('.user_info .follow a').text "follow" 
```

# iphone - 2 个库中的 Objective-C 链接器错误

> ID：10875965
> 
> 赞同：0
> 
> 时间：2012-06-04T03:19:28.910
> 
> 标签：iphone, objective-c, ios, xcode, linker-errors

我在同一个项目中使用 2 个库。一个需要设置键“Other Linker Flags”，一个不需要。

对于第一个库，“Other Linker Flags”必须设置为“-ObjC”和“-all_load”才能正常运行。但如果是这样，第二个库会出现编译错误：

> ld：在 /Users/Applehouse/working/joshibu/svn/B_SOURCE/ProGir/ProGir/CCIAd/libCCIMobile-Release.a(TagParser.o) 和 /Users/Applehouse/working/joshibu/svn/B_SOURCE/ProGir 中重复符号 _parseAdvertizeTag /ProGir/CCIAd/libCCIMobile-Debug.a(TagParser.o) 架构 i386 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

仅当我设置标志时才会发生错误。如果我不使用第一个库，我将“Other Linker Flags”设置为无值，没有错误，第二个库运行正常。

我如何解决它？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T03:26:54.013

仔细查看错误信息。您同时链接库的调试 (libCCIMobile-Debug.a) 和发布 (libCCIMobile-Release.a) 版本。

仅链接您的调试版本的调试版本，并且仅链接您的发布版本的发布版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T04:53:18.300

您在一个目标中包含两个库。那是错误的。

因为在这两个库中有许多相同的值。首先是 _parseAdvertizeTag 错误。

您必须仅在 1 个目标中使用 libCCIMobile-Release.a 或 libCCIMobile-Debug.a

# winapi - Process32Next 因 ERROR_INSUFFICIENT_BUFFER 失败（Windows 7）

> ID：10875966
> 
> 赞同：3
> 
> 时间：2012-06-04T03:19:49.767
> 
> 标签：winapi, visual-c++, process

我正在尝试获取正在运行的进程的所有可执行路径的列表

do-while 循环（如下所示）开始并在大约 90 次迭代后失败并出现 ERROR_INSUFFICIENT_BUFFER 错误。我想那是 pBuffer，我尝试了一个非常大的缓冲区，但它仍然失败。失败迭代的 ProcessEntry 结构在 szExeFile 中有垃圾。请告知（我关闭了把手，下面没有显示）

代码：

```
// Retrieve a handle to the process snapshot
HANDLE hProcessSnapshot(CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS, 0));
if (INVALID_HANDLE_VALUE == hProcessSnapshot) ERROR;

// Retrieve information about the first process and exit if unsuccessful
PROCESSENTRY32 oProcessEntry;
memset(&oProcessEntry, 0x00, sizeof(oProcessEntry));
oProcessEntry.dwSize = sizeof(PROCESSENTRY32);
BOOL bFileFound(Process32First(hProcessSnapshot, &oProcessEntry));
DWORD dwError;
if(!bFileFound) {        
    dwError = GetLastError();
    if(ERROR_NO_MORE_FILES == dwError) return TPathList();

    // Error
    ERROR; 
}

// Walk the snapshot of processes
TCHAR pBuffer[MAX_PATH];
TPathList lExecutablePaths;
do {
    // Get handle to process
    HANDLE hProcess(OpenProcess(PROCESS_QUERY_INFORMATION | PROCESS_VM_READ, 
                                FALSE, 
                                oProcessEntry.th32ProcessID));
    if(INVALID_HANDLE_VALUE == hProcess) ERROR;
    if (!hProcess) continue;

    // Get the module path
    if(GetModuleFileNameEx(hProcess, 0, pBuffer, MAX_PATH) == 0) ERROR;      
    lExecutablePaths.push_back(CPath(pBuffer));        
} 
// Get next process 
while(Process32Next(hProcessSnapshot, &oProcessEntry));

// If we ran out of files return what has been found
dwError = GetLastError();
if(ERROR_NO_MORE_FILES == dwError) return lExecutablePaths;
ERROR; 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-04T06:31:47.973

你可以这样使用：

```
CString sBuffer;
DWORD dwSize = MAX_PATH + 1, dwError = 0;

do
{
    GetModuleFileName( NULL, sBuffer.GetBuffer( dwSize ), dwSize );

    // Retrieve the last error. If we've succeeded ERROR_SUCCESS
    // will be returned; otherwise, we'll get an ERROR_INSUFFICIENT_BUFFER
    // error.
    dwError = ::GetLastError( );

    // Buffer may not be big enough so double its size
    dwSize *= 2;
}
while( dwError == ERROR_INSUFFICIENT_BUFFER
    && dwError != ERROR_SUCCESS );

// Release the buffer (turn the string back to const)
sBuffer.ReleaseBuffer( ); 
```

我希望它会奏效。

您也可以更喜欢[如何计算 GetModuleFileName 的完整缓冲区大小？](https://stackoverflow.com/questions/805814/how-can-i-calculate-the-complete-buffer-size-for-getmodulefilename)

# php - 如何在 2 个 php 文件之间传递变量值？

> ID：10875968
> 
> 赞同：-2
> 
> 时间：2012-06-04T03:19:53.200
> 
> 标签：php

我正在开发一个 PHP 站点。在那里，我正在像这样将图像加载到我的主页。

```
img src="?php  echo"css/images/".$Vid_arr[count($Vid_arr)-5]."/front.jpg" ?" alt="Product Image 9" 
```

现在我只需要将这部分传递`$Vid_arr[count($Vid_arr)-5]`给我的`details.php`文件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T03:29:39.997

它们有几种方法可以做到这一点，首先你可以使用 GET 方法，或者简单地使用会话： `session_start(); $_SESSION['foo'] = $Vid_arr[count($Vid_arr)-5];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T03:32:29.677

如果它是一个变量，并且该变量在上一页中可用。你可以使用`$_SESSION`. 但是，如果前一页中没有它。采用`include_once('details.php');`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T03:29:17.817

您可以`include_once('path_to_details.php');`在该`<img>`行之后使用，并且在 details.php 脚本中`$Vid_arr[count($Vid_arr)-5]`正常使用。

**include_once**将调用您想要的脚本。通过这种方式，您可以将许多代码片段分隔在多个文件中，并且可以使用**include**和**include_once**函数将它们全部合并为一个。

# objective-c - 无法在 iOS 的 UIWebView 中滚动

> ID：10875971
> 
> 赞同：13
> 
> 时间：2012-06-04T03:20:55.607
> 
> 标签：objective-c, ios5, xcode4.2, ios-simulator

我以编程方式创建了一个 webview，但无法在此视图中启用滚动。

如何启用滚动？

```
 UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(0,40, 325, 1000)];
    webView.contentMode = UIViewContentModeScaleAspectFit;     
    [webView setBackgroundColor:[UIColor clearColor]];
    [webView loadHTMLString:html baseURL:nil];
    [self.view insertSubview:webView atIndex:0]; 
```

**提前致谢 ！**

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-04T11:53:34.517

要启用滚动，

```
webview.scrollView.scrollEnabled = TRUE; 
```

而不是写这个，

```
webView.contentMode = UIViewContentModeScaleAspectFit; 
```

写这个，

```
webview.scalesPageToFit = TRUE; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-19T09:37:19.343

从 Interface Builder 中删除并通过代码添加对我来说确实如此。出于某种原因，在 IB 中它没有滚动。

```
UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 64, 320, 50)];
[self.view addSubview: webView]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-09T07:00:41.233

这些是可能的解决方案。

i) 您的 webview 的大小可能比您预期的要大，或者您的内容小于 webview 的大小。

2）实现以下方法。

```
func webViewDidFinishLoad(webView: UIWebView)
{
    appDelegate.hideLoadingView()

    let res: NSString = webView.stringByEvaluatingJavaScriptFromString("document.body.offsetHeight;")!
    let h: CGFloat = CGFloat(res.integerValue)
    agreementContentView.scrollView.contentSize = CGSizeMake(webView.frame.size.width, h + 50); // Offset if required
} 
```

# javascript - 关联多维数组上的jquery客户端分页

> ID：10875975
> 
> 赞同：0
> 
> 时间：2012-06-04T03:21:27.737
> 
> 标签：javascript, jquery, paging

我正在编写一个工作门户，我必须从 api 中获取数据。我每次都需要从这个站点加载 1000 个工作。为了使系统有效，我在页面加载时第一次加载了 9 个作业，然后通过 ajax (jQuery) 调用将其他剩余的作业和这 9 个作业加载到 java-script 数组中。

我需要做的是在数组上应用分页并在第一页上维护第一个加载的 9 个作业（因为它们将是 1000 个作业数组中的前 9 个）。我希望这是有道理的。

PS：我在 div 中显示工作。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T03:47:39.097

将作业数据存储在作业数组中。然后，您始终可以根据用户选择的页面选择要显示的元素。

它会很简单

```
var startIndex = selectedPage * PageSize;
var endIndex = startIndex  + PageSize; 
```

一组对象应该非常适合这项工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T12:59:38.450

如果您想（伪）通过 JQuery 对页面中的结果进行分页，您可以提供帮助：

[JSFIDDLE](http://jsfiddle.net/FqxhT/)

# python - Python正则表达式从C头文件中提取数据

> ID：10875977
> 
> 赞同：2
> 
> 时间：2012-06-04T03:22:02.183
> 
> 标签：python, c, regex

我有一个包含很多枚举、typedef 和函数原型的 C 头文件。我想使用 Python regex (re) 提取这些数据。我真的需要语法方面的帮助，因为我似乎每次学习时都会忘记它。

```
ENUMS
-----
enum
{
(tab character)(stuff to be extracted - multiple lines)
};

TYPES
-----
typedef struct (extract1) (extract2)

FUNCTIONS
---------
(return type)
(name)
(
(tab character)(arguments - multiple lines)
); 
```

如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T04:40:52.257

我想像这样的东西是你所追求的？

```
>>> re.findall('enum\s*{\s*([^}]*)};', 'enum {A,B,C};')
['A,B,C']
>>> re.findall("typedef\s+struct\s+(\w+)\s+(\w+);", "typedef struct blah blah;")
[('blah', 'blah')] 
```

当然，语法有很多变化，而且函数要复杂得多，所以我把这些留给你，坦率地说，这些正则表达式已经足够脆弱和不够优雅了。我会敦促您使用实际的解析器，除非这只是一个一次性项目，其中健壮性完全不重要并且您可以确定输入的格式。

# haskell - 如何使用 map 函数将元组列表拆分为 haskell 中的两个列表？

> ID：10875980
> 
> 赞同：4
> 
> 时间：2012-06-04T03:22:08.757
> 
> 标签：haskell, map, unzip

这是昨天到期的家庭作业，但我不希望答案只是指向正确的方向；）

我正在尝试使用和带有haskell的lambda来实现该`unzip`功能。`map`

```
:t unzip
[(a,b)] -> ([a],[b]) 
```

所以我认为 lambda 看起来像`\(a,b)->([a],[b])`这样的作品，除了我从我的输入中得到，`[(4,5),(7,5),(9,7)] => [([4],[5]),([7],[5]),([9],[7])]`但我希望看到`[4,7,9],[5,5,7]`。那么我在这里做错了什么？

提前感谢您为我指明正确的方向

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T03:28:36.383

好吧，`map :: (a -> b) -> ([a] -> [b])`返回一个列表，对吧？而且你希望你的函数返回两个列表，所以......你需要使用`map`两次。这是一个骨架供您填写：

```
unzip xs = (map {- ??? -} xs, map {- ??? -} xs) 
```

不幸的是，坚持使用`map`是低效的，因为这意味着您必须通过列表两次。你可以做得更好一点，但这很棘手！[试一试，然后将其与GHC 的实现](http://hackage.haskell.org/packages/archive/base/latest/doc/html/src/GHC-List.html#unzip)进行比较，看看你做得如何。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T03:30:43.357

您不能`unzip`在单个地图中实现

```
\(a,b)->([a],[b]) :: (a,b) -> ([a],[b]) 
```

所以

```
map \(a,b)->([a],[b]) :: [(a,b)] -> [([a],[b])] 
```

相反，您需要*两张*地图

```
unzip ls = (map ???,map ???) 
```

填空

# linux - 在 OSX 10.6 上安装 pkg-config

> ID：10875983
> 
> 赞同：1
> 
> 时间：2012-06-04T03:22:46.837
> 
> 标签：linux, macos, pkg-config

请原谅一个非 linux 人的问题。

我正在尝试在 OSX 10.6 上构建一些需要 pkg-config 的源代码。我找到了很多关于如何做到这一点的说明，但它们都需要编译 pkg-config，而且每组说明都会出现各种错误。

如果我知道更多的 linux 命令，我相信它会很简单，但是时间期限太长了，我宁愿不成为创建和安装 Linux 工具的专家。如果有一位 linux 大师可以指导我，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T03:26:02.920

您可以随时使用 homebrew(http://mxcl.github.com/homebrew/) 在 osx 上安装 pkg-config 和许多其他“linux”软件。

# android - SurfaceView Inflate Button 在纵向底部居中

> ID：10875984
> 
> 赞同：2
> 
> 时间：2012-06-04T03:22:52.760
> 
> 标签：android, layout, button, surfaceview, inflate

我正在滚动我自己的相机应用程序，为此我使用了具有横向方向的 SurfaceView 作为标准。

我想要做的是，给 SurfaceView 充气以获得一个按钮。但我希望按钮显示在纵向底部的中心，就像大多数股票相机应用程序一样。我正在充气的按钮的布局如下，我不确定哪种控件组合会给我想要的结果。

我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="right"
    >
<Button
    android:id="@+id/takepicture"  
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" 
    android:text=" * Take Picture " 
        android:layout_alignParentRight="true" 
        android:layout_centerVertical="true" 
    android:layout_margin="10px"
    />
</LinearLayout> 
```

谢谢你的帮助！=]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T03:34:40.630

到处玩`layout_weight`。试试这个：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:gravity="right"
>
<com.YOURSurfaceView android:layout_width="fill_parent" android:background="#ff0" android:layout_weight=".2"
android:layout_height="fill_parent" >

</com.YOURSurfaceView>
<Button
android:id="@+id/takepicture"  
android:layout_width="fill_parent" 
android:layout_height="fill_parent" 
android:text=" * Take Picture " 
    android:layout_weight="1"
android:layout_margin="10px"
/>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-06T23:20:06.850

谢谢阿瑞斯，你的回答。我在这里挖掘了更多，并找到了使用 LinearLayout 的解决方案，但据我了解，一切都有它的位置，但一般来说，RelativeLayout 提供更好的性能，所以我做了一些实验，现在我得到了这个，这对我有用. 请注意，我使用图像作为按钮，因此您可能想要升级它，包括按下其他按钮等并适当地缩放它（这就是我接下来要做的）。但在准系统中，这对我有用。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:baselineAligned="false"
    android:gravity="right"
    android:orientation="horizontal" >
    <RelativeLayout
        android:layout_width="40dp"
        android:layout_height="fill_parent"
        android:gravity="center_vertical" >
        <ImageButton
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@null"
            android:src="@drawable/lens_2" />
    </RelativeLayout>
</RelativeLayout> 
```

以上在我的 SurfaceView 上被夸大了，我这样声明：

```
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);

requestWindowFeature(Window.FEATURE_NO_TITLE);
getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

mPreview = new CameraPreview(this);
setContentView(mPreview);

LayoutInflater controlInflater = LayoutInflater.from(getBaseContext());
View viewControl = controlInflater.inflate(R.layout.control, null);
LayoutParams layoutParamsControl 
    = new LayoutParams(LayoutParams.MATCH_PARENT, 
    LayoutParams.MATCH_PARENT);
this.addContentView(viewControl, layoutParamsControl); 
```

}

希望这可以帮助。

# c++ - 标准池：wstring。这种做法是不是太天真了？

> ID：10875985
> 
> 赞同：0
> 
> 时间：2012-06-04T03:22:56.673
> 
> 标签：c++

我在玩一些代码，我写了这个小类来池 std::wstring。当我描述它时，我想知道你对这么简单地接近一个字符串池的看法。

我有一个 std::vector 的 std::wstring 和两个映射，一个用于保存向量中未使用元素的索引，另一个用于保存正在使用的元素。

如果使用 new_string() 请求了一个字符串并且没有任何空闲索引，我会调整向量的大小并将新添加的索引插入到空闲索引映射中。

这是代码：

```
typedef std::wstring string_t;

class string_pool
{
    public:
        string_pool()
        {
            grow_factor = 2;
            strings.resize(10);
            for (size_t i=0; i<10; i++)
            {
                free_indexes.insert(std::make_pair(&strings[i],i));
            }
        }

        virtual ~string_pool()
        {

        }

        string_t* new_string()
        {
            if (!free_indexes.size())
            {
                size_t old_size = strings.size();
                size_t new_size = old_size+grow_factor;
                for (size_t i=old_size;i<new_size; i++)
                {
                    free_indexes.insert(std::make_pair(&strings[i],i));
                }
                strings.resize(new_size);
            }
            iter = free_indexes.begin();
            used_indexes.insert(*iter);     // Mark the index as used
            string_t* str = (*iter).first;    // Get a pointer to the string
            free_indexes.erase(iter);       // Erase the free index
            return str;
        }

        void delete_string(string_t* str)
        {
            str->clear();
            iter = used_indexes.find(str);
            free_indexes.insert(*iter);     // Mark the index as free
            used_indexes.erase(iter);       // Erase the used index
        }

    protected:
        std::map<string_t*, size_t>             used_indexes;
        std::map<string_t*, size_t>             free_indexes;
        std::vector<string_t>                   strings;
        size_t                                  grow_factor;
        std::map<string_t*, size_t>::iterator   iter;
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T03:51:53.757

您关心的`new`/不是描述符的分配，而是数据。池化对象没有多大帮助，内容仍将被动态分配。`delete``string``string``string`

# html - 当在 UIWebView 中加载 html 时？

> ID：10875987
> 
> 赞同：0
> 
> 时间：2012-06-04T03:23:00.643
> 
> 标签：html, ios, uiwebview

我使用 UIWebView 来获取并显示一个 html 页面。我想在 html 完成加载时做一些事情，并在 ViewController 中显示，同时图像正在加载。我用

```
(void)webViewDidFinishLoad:(UIWebView *)webView 
```

接收回电。但它应该在所有元素加载完成后采取行动，可能需要一分钟。它太慢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T00:58:03.520

如果您想知道 dom 何时加载，您必须使用 javascript 列出 dom 加载事件，然后在该事件发生时调用您的 Objective-c 代码。

如果正在加载的是您的网页，那么您可以在源代码处添加必要的 javascript，如果是其他人的网页，则您需要使用 stringByEvaluatingJavaScriptFromString 将 javascript 注入页面。

要在 dom 加载事件触发后从 Javascript 调用 Objective-C，请参见此处

[http://blog.techno-barje.fr/post/2010/10/06/UIWebView-secrets-part3-How-to-properly-call-ObjectiveC-from-Javascript/](http://blog.techno-barje.fr/post/2010/10/06/UIWebView-secrets-part3-How-to-properly-call-ObjectiveC-from-Javascript/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T04:02:36.583

我建议使用 javascript 来了解图像何时加载。你可以打电话

```
stringByEvaluatingJavaScriptFromString: 
```

在 webview 中执行一些 javascript 代码。

# javascript - 例外：在 for 循环控制之后缺少 )

> ID：10875989
> 
> 赞同：0
> 
> 时间：2012-06-04T03:23:14.990
> 
> 标签：javascript, google-apps-script

我在运行代码时收到了上述异常。

```
// 此函数假定 CSV 没有带逗号的字段，
// 并去掉所有的双引号

函数 parseCsvResponse(csvString) {
    var retArray = [];

    var strLines = csvString.split(/\n/g);
    var strLineLen = strLines.length;
    for (var i = 0; i < strLineLen; i++) {
        var line = strLines[i];
        如果（行！=''）{
            retArray.push(line.replace(/"/g, "").split(/,/));
        }
    }

    返回 retArray；
}

函数 populateSheetWithCSV(sheet, csvUrl, user, pw) {

    // 请求 CSV！
    var resp = UrlFetchApp.fetch(csvUrl, {
        标题：{
            // 使用基本认证
            '授权': '基本' + Utilities.base64Encode(user + ':' + pw, Utilities.Charset.UTF_8)
        }
    });
```

```
// parse the response as a CSV
var csvContent = parseCsvResponse(resp.getContentText());

// clear everything in the sheet
sheet.clearContents().clearFormats();

// set the values in the sheet (as efficiently as we know how)
sheet.getRange(1, 1, csvContent.length /* rows */, csvContent[0].length /* columns */).setValues(csvContent); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T04:02:12.273

正如评论者所建议的那样，这条线看起来像是罪魁祸首：

`retArray.push(line.replace(/"/g, "").split(/,/));`

你有一个开放的双引号对。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T04:10:09.707

我会认为是因为这个。

```
/"/g 
```

你可以把它放在引号中。像这样的东西：

```
var myregexp =new RegExp('"','g'); 
```

问题：几乎一样。明星吗？

[http://code.google.com/p/google-apps-script-issues/issues/detail?id=419](http://code.google.com/p/google-apps-script-issues/issues/detail?id=419)