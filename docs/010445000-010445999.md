# StackOverflow 问答 10445000-10445999

# asp.net - 将值从 XMLWebService 绑定到 ASP.Net 中的下拉列表

> ID：10445001
> 
> 赞同：0
> 
> 时间：2012-05-04T08:04:45.637
> 
> 标签：asp.net, xml, vb.net, web-services, drop-down-menu

如何将 XMLWebService 中的数据绑定到 DropDownList？

我有这段代码，但它不起作用：

```
Dim xMaster As New MasterService.Masterservice

DT = xMaster.GetDataProgram
DT.Load(DT)

DDL.DataSource = DT
DDL.DataTextField = DT.Columns("cdProgram").ColumnName.ToString()
DDL.DataValueField = DT.Columns("nmProgram").ColumnName.ToString()
DDL.DataBind() 
```

我试图将它绑定到 GridView 并显示值。但是，当我尝试将其绑定到下拉列表时，它什么也不返回。非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T08:07:41.140

试试这个：

```
DDL.DataTextField = "cdProgram"
DDL.DataValueField = "nmProgram" 
```

# android - Android GestureOverlayView 限制可绘制区域

> ID：10445002
> 
> 赞同：1
> 
> 时间：2012-05-04T08:04:46.367
> 
> 标签：android

在 GestureOverlayView 中是否有任何方法可以限制可绘制区域。即在整个视图中我想要一些不可绘制的边距，视图（GestureOverlayView）覆盖所有可用区域

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:17:21.720

您可以尝试在视图中应用填充。可能在您的布局 xml 中，或通过代码`View.setPadding(int left, int top, int right, int bottom)`

# mysql - mysql 中有什么更好的 - 多个表没有更少。记录或一张大号的表。记录

> ID：10445007
> 
> 赞同：0
> 
> 时间：2012-05-04T08:05:08.117
> 
> 标签：mysql

我有一个匿名表，其中包含三列**（Title，Tough，Id）**，其中只能输入八个不同的艰难值。现在我想知道他们是否需要为我的数据库中的每个艰难值创建 8 个不同的表快速 SQL 查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:08:26.383

我应该做的是以下（假设 Type 是 a `VARCHAR`）

创建一个具有两列**(typeId, type)**的新表。然后引用您的匿名表。这减少了您的数据存储，您只需捕获 8 个值一次。然后你只使用数字来引用这 8 个值。

我不确定这是否会提高您的查询性能，但这肯定会使您的数据库包含更少的冗余数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:09:18.160

您应该创建一个`Types`包含 和 列的表，`type_id`而`type_name`不是创建另一个包含 、 和 列`anonymous_id`的`title`表`type_id`。

在第二个表中，`type_id`将是链接到 table 的主键 (type_id) 的外键`Types`。

这样一来，您的表得到优化并包含更少的重复数据，并且您可以只允许那些已经在数据库中的类型，从而更具可扩展性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T08:13:32.637

我建议你继续使用一个表，看看 if 是如何工作的。它将简化您的应用程序结构，并且不会妨碍您查看不同的问题。

但是，如果您在截止日期前，那么您应该考虑您的应用程序结构以及索引将如何增长。如果更改您的应用程序太痛苦，那么您应该快速重做，直到它变成无法解决的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T08:39:42.000

通常，您应该尝试规范化您的数据结构，并在测量表明您需要时担心性能。

```
CREATE TABLE `Anonymous` (
    `id` INT NOT NULL AUTO_INCREMENT,
    `tough_id` INT NOT NULL,
    `title` VARCHAR(64),
    PRIMARY KEY (`id`),
    KEY `idxTough` (`tough_id`)
);

CREATE TABLE `Tough` (
    `id` INT NOT NULL AUTO_INCREMENT,
    `name` VARCHAR(64) NOT NULL,
    PRIMARY KEY (`id`)
);

INSERT INTO `Tough` (`name`) VALUES ('ToughA'), ('ToughB'), ('ToughC'), ('ToughD');

INSERT INTO `Anonymous` (`title`, `tough_id`) VALUES
    ('Anon with tough A', 1),
    ('Anon with tough B', 2),
    ('Anon with tough C', 3),
    ('Anon with tough D', 4)
; 
```

# android - 每当Rss文件更改时通知android

> ID：10445013
> 
> 赞同：0
> 
> 时间：2012-05-04T08:05:35.653
> 
> 标签：android, service, rss

我在 dantri.com.vn 创建了一个简单的获取新闻，我的项目运行正常，但我想在 dantri.com.vn 有新消息时通知用户，（我认为 rss 文件已更改），我该怎么做? 能给我一些理想吗，非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:16:18.893

去推送通知

它将允许您将新闻更新推送到设备。一旦通知您的客户端应用程序可以获取所有更新的数据

检查下面的答案

[Android 平台中的推送通知](https://stackoverflow.com/questions/1378671/push-notifications-in-android-platform)

# php - 列名“RNumber”无效 - 尝试使用 PHP 和 MS SQL 实现分页

> ID：10445014
> 
> 赞同：1
> 
> 时间：2012-05-04T08:05:37.900
> 
> 标签：php, sql-server

我正在尝试使用 MS SQL 实现 LIMIT OFFSET 查询，以便在网站上与 PHP 和 PDO 一起实现对我的产品的分页，但我收到以下错误：**“列名无效”**

我的查询

```
SELECT OITM.ItemCode,OITM.ItemName,ITM1.Price , 
OITM.CardCode,ROW_NUMBER() OVER (ORDER BY OITM.ItemName DESC) AS RNumber 
FROM OITM INNER JOIN OCRD ON OCRD.CardCode = OITM.CardCode 
INNER JOIN ITM1 ON OITM.ItemCode = ITM1.ItemCode 
WHERE OITM.frozenFor='N' AND PriceList=1 AND U_Publish='Y' 
AND RNumber >= 1 AND RNumber <= 2 
```

不确定这里有什么问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T08:15:56.613

您不需要`HAVING`子句。您可以使用 cte 函数或子查询。像这样：

```
;WITH CTE
AS
(
    SELECT OITM.ItemCode,OITM.ItemName,ITM1.Price , 
    OITM.CardCode,ROW_NUMBER() OVER (ORDER BY OITM.ItemName DESC) AS RNumber 
    FROM OITM INNER JOIN OCRD ON OCRD.CardCode = OITM.CardCode 
    INNER JOIN ITM1 ON OITM.ItemCode = ITM1.ItemCode 
    WHERE OITM.frozenFor='N' AND PriceList=1 AND U_Publish='Y' 
)
SELECT
    *
FROM
    CTE
WHERE
    RNumber >= 1 AND RNumber <= 2 
```

或者使用这样的子查询：

```
SELECT
    *
FROM
    (
        SELECT OITM.ItemCode,OITM.ItemName,ITM1.Price , 
        OITM.CardCode,ROW_NUMBER() OVER (ORDER BY OITM.ItemName DESC) AS RNumber 
        FROM OITM INNER JOIN OCRD ON OCRD.CardCode = OITM.CardCode 
        INNER JOIN ITM1 ON OITM.ItemCode = ITM1.ItemCode 
        WHERE OITM.frozenFor='N' AND PriceList=1 AND U_Publish='Y' 
    ) AS t
WHERE
    t.RNumber >= 1 AND t.RNumber <= 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:11:04.883

您不能在 Where 条件中使用新定义的名称，您必须放入 HAVING 子句。

```
SELECT OITM.ItemCode,OITM.ItemName,ITM1.Price , 
OITM.CardCode,
ROW_NUMBER() OVER (ORDER BY OITM.ItemName DESC) AS RNumber 
FROM OITM INNER JOIN OCRD ON OCRD.CardCode = OITM.CardCode 
INNER JOIN ITM1 ON OITM.ItemCode = ITM1.ItemCode 
WHERE OITM.frozenFor='N' AND PriceList=1 AND U_Publish='Y' 
HAVING RNumber >= 1 AND RNumb 
```

# .net - XSLT 在 .NET 中消失了吗

> ID：10445021
> 
> 赞同：0
> 
> 时间：2012-05-04T08:06:38.367
> 
> 标签：.net, xslt, xpath

我正在研究有关 XSLT 的课程，但我已经阅读了 XSLT 并且 xpath 在 .NET 中逐渐消失。阅读此[链接](http://www.ektron.co.uk/billcavablog/the-slow-quiet-disappearance-of-xslt-in-net/)似乎我应该将我的学习投入到其他地方。我可以使用 .net 中的哪些其他工具来转换 xml，XSLT 真的正在消失吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T08:12:58.453

旧的类仍然会*存在*，但目前看起来不像是重大开发工作的方向。因此，您至少应该能够使用 1.0 - 坦率地说，这对于大多数常见操作来说已经足够好了。

备择方案：

*   （使用 .NET 中当前的 xslt 1.0 工具）
*   替代的 3rd 方 xslt 工具（或撒克逊，如果你喜欢）
*   加载到诸如`XDocument`/之类的 DOM`XmlDocument`并对其进行操作（仍然提供 xpath 支持等）
*   将 xml 反序列化为对象模型并操作模型；也许重新序列化
*   反序列化为对象模型并使用 T4 或 razor 等模板语言

就个人而言，我喜欢 xslt——它在一些场景中强大而优雅；至少值得了解，但是...除非我知道我有一个非常具体的目的，否则我不会在课程上花费很多时间。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-04T09:06:40.570

Sharepoint 2010 广泛使用 XSLT。我希望他们能杀了它。开发环境极差:(

# ssis - 加载文件时 SSIS 无法理解的错误

> ID：10445022
> 
> 赞同：1
> 
> 时间：2012-05-04T08:06:39.283
> 
> 标签：ssis, dts

通过 SSIS 包加载文件时，我遇到了一个非常难以理解的错误。

![在此处输入图像描述](../Images/38098948174a9606e8ef73229b6355a6.png)

这基本上循环存在于文件夹中的文件并通过 DTS 2000 处理它们。这项工作适用于文件夹中包含的 99% 的文件。对于一个特定的文件，（它的命名语法与其他文件完全相同）该包在加载 DTS 包的步骤中失败。虽然如果我执行“Simucosc db files 上的循环”内容，它会通过！并正确加载所有数据。所以真的是在运行整个包时才会出现错误。我用不同的检查点检查变量，好的和失败的没有区别。

在 DTS 任务中激活日志时，它只显示：

步骤错误来源：Microsoft JET 数据库引擎步骤错误描述：Erreur inattendue du Pilote de base de données externe (9499)。步骤错误代码：80004005 步骤错误帮助文件：步骤错误帮助上下文 ID：5003000

但这对我没有帮助。

有没有人有任何可以提供帮助的想法？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:04:39.787

您尝试链接、导入或导出到的路径的总字符长度（包括数据库名称）超过 65 个字符。

# iphone - 向 GameCenter 添加摇动手势

> ID：10445023
> 
> 赞同：1
> 
> 时间：2012-05-04T08:06:45.243
> 
> 标签：iphone, ios

我正在编写代码，当他摇晃他的 iOS 设备时通知另一个用户做某事。Shakle 手势工作正常，但如何将其与游戏中心集成。我想使用游戏中心，因为它可以很容易地添加朋友和邀请他们，但它是基于点击按钮。我想使用摇动手势来实现相同的功能。因此，他不会点击特定用户，而是摇动他的设备，然后会自动通知下一个用户加入他。我可以这样做吗？是否可以编辑游戏中心的功能。

# c# - Windows phone 7 TCP 网络客户端

> ID：10445030
> 
> 赞同：0
> 
> 时间：2012-05-04T08:07:10.550
> 
> 标签：c#, windows-phone-7, networking, tcp

基本上，我编写了一个 windows phone 7 客户端，它应该从服务器接收一个很长的字符串。但是，电话网络代码似乎存在一些限制，并且无法弄清楚如何执行此操作。以下是我正在使用的代码：

```
public string Receive()
    {
        string response = "Operation Timeout";
        StringBuilder content = new StringBuilder();

        // We are receiving over an established socket connection
        if (_socket != null)
        {
            // Create SocketAsyncEventArgs context object
            SocketAsyncEventArgs socketEventArg = new SocketAsyncEventArgs();
            socketEventArg.RemoteEndPoint = _socket.RemoteEndPoint;

            // Setup the buffer to receive the data
            socketEventArg.SetBuffer(new Byte[MAX_BUFFER_SIZE], 0, MAX_BUFFER_SIZE);

            // Inline event handler for the Completed event.
            // Note: This even handler was implemented inline in order to make this method self-contained.
            socketEventArg.Completed += new EventHandler<SocketAsyncEventArgs>(delegate(object s, SocketAsyncEventArgs e)
            {
                if (e.SocketError == SocketError.Success)
                {
                        response = Encoding.UTF8.GetString(e.Buffer, e.Offset, e.BytesTransferred);
                        response = response.Trim('\0');
                }
                else
                {
                    response = e.SocketError.ToString();
                }

                _clientDone.Set();
            });

            // Sets the state of the event to nonsignaled, causing threads to block
            _clientDone.Reset();

            // Make an asynchronous Receive request over the socket
            _socket.ReceiveAsync(socketEventArg);

            // Block the UI thread for a maximum of TIMEOUT_MILLISECONDS milliseconds.
            // If no response comes back within this time then proceed
            _clientDone.WaitOne(TIMEOUT_MILLISECONDS);
        }
        else
        {
            response = "Socket is not initialized";
        }

        return response;
    } 
```

就目前而言，这将仅接受消息的前 N ​​个字节并返回...任何有关如何执行此操作的帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T08:19:04.923

首先，我会尝试重新设计您的代码以适当地异步 - 解决 WP7 不通过构建自己的同步 IO 的事实并不像拥抱异步那么干净。

其次，您假设您只需要一次`ReceiveAsync`调用即可获取整个数据。假设您使用 TCP，这是一个*基于流的*协议。您需要添加某种分隔符或长度前缀，或者继续阅读，直到对方关闭连接（如果这是您的协议的工作方式）。

（顺便说一句，您有什么理由不使用 HTTP 和`WebClient`or`WebRequest`来执行此操作？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:23:00.030

首先，我会尝试将您的代码重新设计为适当的异步 - 解决 WP7 不通过构建自己的同步 IO 并不像拥抱异步一样干净这一事实。

其次，您假设您只需要一个 ReceiveAsync 调用即可获取整个数据。假设您使用 TCP，这是一个基于流的协议。您需要添加某种分隔符或长度前缀，或者继续阅读，直到对方关闭连接（如果这是您的协议的工作方式）。

（顺便说一句，您有什么理由不使用 HTTP 和 WebClient 或 WebRequest 执行此操作？）

# html - Dojo 转换到同一项目中的另一个 html 文件

> ID：10445033
> 
> 赞同：1
> 
> 时间：2012-05-04T08:07:23.890
> 
> 标签：html, mobile, transition, dojo

我正在使用 Dojo 1.7。使用Phonegap 实现一个Android 移动应用程序。那么我的问题是，我在我的项目中的 index.html 中实现了一个标签栏。现在我想通过单击从 index.html 到 view2.html 的 view-div（称为 testdiv）的 tabbar-icon 进行转换，这是同一项目中的另一个 html 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-29T08:50:37.730

使用 data-dojo-prop 属性中可用的 url 属性，如下所示 -

**Index.html - 在另一个页面上查看的链接**

```
<div id="detailsHeading" data-dojo-type="dojox.mobile.Heading"
        data-dojo-props="fixed: 'top', label: 'Details', back:'Back', moveTo:'view1', transition:'slide', transitionDir:'-1',url:'sample.html'">
</div> 
```

上面的 url 属性包含要引用的 html 的名称， moveTo 包含要显示的视图（您的另一个 html 可能有多个视图）

**Sample.html - 视图定义**

```
<div data-dojo-type="dojox.mobile.ScrollableView" id="view1"
    data-dojo-props="selected:false,scrollDir:'v'">
</div> 
```

单击“detailsHeading”时，应用程序将加载 sample.html 并呈现视图 - view1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T09:35:06.757

这里没什么可去的；但我几乎 100% 确定您所说的“标签栏”是 dojox.mobile.TabBar？

如果是这样，则不支持直接拉入远程页面，但您可以通过将 dijit.layout.ContentPane 添加到选项卡栏来做到这一点。

为您的项目试用此代码，每个窗格都加载 viewX.html

```
<div id="groupview1" data-dojo-type="dojox.mobile.View"
       data-dojo-props='selected:true'>
  <ul data-dojo-type="dojox.mobile.TabBar"
       data-dojo-props='barType:"segmentedControl", fixed:"top"'>
    <li data-dojo-type="dojox.mobile.TabBarButton"
        data-dojo-props='moveTo:"subview1", selected:true'>New</li>
    <li data-dojo-type="dojox.mobile.TabBarButton"
       data-dojo-props='moveTo:"subview2"'>What's Hot</li>
  </ul>

 <div id="subview1" data-dojo-type="dojox.mobile.ScrollableView"
        data-dojo-props='selected:true'>
    <ul data-dojo-type="dijit.layout.BorderContainer">
      <li data-dojo-type="dijit.layout.ContentPane"
       data-dojo-props='region:"center", href:"view1.html"'>Hello</li>
    </ul>
 </div>

  <div id="subview2" data-dojo-type="dojox.mobile.ScrollableView" data-dojo-props=''>
    <ul data-dojo-type="dijit.layout.BorderContainer">
        <li data-dojo-type="dijit.layout.ContentPane"
             data-dojo-props='region:"center", href:"view2.html"'></li>
  </ul>
</div></div>

 <script type="text/javascript">
       require(["dojox/mobile/TabBar", "dojox/mobile/TabBarButton", "dojox/mobile/TabBarButton", "dojox/mobile/ScrollableView", "dijit/layout/BorderContainer", "dijit/layout/ContentPane", "dojo/domReady!"], function() {
              dojo.parser.parse();
       });
 </script> 
```

# php - 菜单有什么问题

> ID：10445037
> 
> 赞同：0
> 
> 时间：2012-05-04T08:07:31.253
> 
> 标签：php, magento

我的 top.phtml 文件有此代码

```
<div class="header-nav-container">
    <div class="header-nav">
        <h4 class="no-display"><?php echo $this->__('Category Navigation:') ?></h4>
        <ul id="nav">
            <li><a href="<?php echo $this->getUrl('home') ?>"><?php echo $this->__('Home') ?></a></li>
            <?php foreach ($this->getStoreCategories() as $_category): ?>
                <?php echo $this->drawItem($_category) ?>
            <?php endforeach ?>
            <li><a href="<?php echo $this->getUrl('contacts') ?>"><?php echo $this->__('Contact Us') ?></a></li>
             <li><a href="<?php echo $this->getUrl('aboutus') ?>"><?php echo $this->__('About Us') ?></a></li>
        </ul>
    </div>
    <?php echo $this->getChildHtml('topLeftLinks') ?>
</div> 
```

但这个节目只有首页，联系我们和关于我们链接

我还通过目录- **>管理类别**添加了类别，但我无法在顶部导航菜单中看到此类别

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:32:14.577

1.  Mage::app()->getStore()->getId() 是否为您提供了预期的商店 id ？
2.  Mage::app()->getStore()->getRootCategoryId() 是否为您提供了预期的类别 id ？
3.  您是否可销售（有库存、数量、已启用、...）此类别的产品？
4.  您的索引是最新的吗？
5.  您是否尝试过清理缓存？

# java - 变量类型的Java泛型调用方法

> ID：10445041
> 
> 赞同：0
> 
> 时间：2012-05-04T08:07:43.710
> 
> 标签：java, generics, reflection

我有一个关于 Java 泛型的基本问题。我有一个由另一个类 T 实例化的类 X。在每个将要使用的类 T 中，都有一个称为 methodOfT() 的方法。但是，Java 给了我编译器时间错误，因为它不知道 obj 和 methodOfT()。

```
public class X<T>
{
     T obj;
     public void methodOfX()
     {
          obj.methodOfT();
     }  
} 
```

为了避免这个问题，我所做的是我定义了另一个类 XSuper。现在每个想要实例化 X 的类都将扩展这个 XSuper 类。这消除了编译时错误并允许我实现我想要的。

```
public abstract class XSuper
{
    public abstract void methodOfT();
}

public class UserOfX extends XSuper
{
    X<UserOfX> objX = new X<UserOfX>();
    public void methodOfT() 
    {
    }
} 
```

但是，我想知道做这件事的更干净的方式。因为我想从另一个类派生类 UserOfX。另一个问题是我想将 methodOfT() 方法定义为 -

```
public methodOfT(T objOfT)
{
} 
```

在这种情况下，上述解决方案将失败。有人可以帮忙吗。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T08:11:09.720

```
public class X<T>
{
     T obj;
     public void methodOfX()
     {
          obj.methodOfT();
     }  
} 
```

编译器不知道 T 是什么，所以它被评估为 Object。对象没有`methodOfT`方法，所以编译失败。以下是解决方法：

```
public interface SomeInterface{
    void methodOfT();
}
public class X<T extends SomeInterface>
{
     T obj;
     public void methodOfX()
     {
          obj.methodOfT();
     }  
} 
```

在这种情况下，编译器知道提供的 T 将实现接口`SomeInterface`并因此具有方法`methodOfT`。（您也可以使用类而不是接口，但这不太优雅）

鉴于您的额外要求，我们将不必再更改此代码：

```
public interface SomeInterface<X>{
    void methodOfT(X object);
}
public class X<T1, T2 extends SomeInterface<T1>>
{
     T1 obj1;
     T2 obj2;
     public void methodOfX()
     {
          obj2.methodOfT(obj1);
     }  
} 
```

# c++ - std:: 在 std::string 和 std::vector 之间移动

> ID：10445042
> 
> 赞同：18
> 
> 时间：2012-05-04T08:07:46.380
> 
> 标签：c++, string, vector, std, unsigned-char

我正在使用 2 个库。一个接收并返回`std::string`s，而另一个使用`std::vector<unsigned char>`s。

如果我可以从中窃取底层数组`std::string`并且`std::vector<unsigned char>`能够将它们相互移动而无需过度复制，那就太好了。

ATM我使用类似的东西：

```
const unsigned char* raw_memory =
    reinterpret_cast<const unsigned char*>(string_value.c_str()),
std::vector<unsigned char>(raw_memory, raw_memory + string_value.size(); 
```

另一种方式：

```
std::string(
    reinterpret_cast<const char*>(&vector_value[0]),
    vector_value.size()); 
```

能够定义一个会好得多：

```
std::string move_into(std::vector<unsigned char>&&);
std::vector<unsigned char> move_into(std::string&&); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-04T08:14:12.150

您可以使用迭代器进行初始化。看看[这里](http://ideone.com/NdPn0)

编辑：粘贴代码，这样你就不必去 ideone。仍然留下链接，以便您可以使用代码玩转

```
#include <iostream>
#include <string>
#include <vector>
using namespace std;

int main() {
        string a = "Hello world";
        vector<unsigned char> v(a.begin(), a.end());
        for (int i= 0 ;i<  v.size(); ++i) {
           cout << v[i] << endl;
        }
        string s(v.begin(), v.end());
        cout << s << endl;
        return 0;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-04T08:27:13.717

这是不可能的。

`vector`和`string`类不提供从其他任何东西窃取的方法，而`vector`不是`string` **分别**。它们不是为了交换内容。

问题在于，`vector`并且`string`可能具有广泛不同的基础表示。例如，通常在 gcc 中，使用老式的 COW（写入时复制）“优化”，这与典型的表示（通常只是指针/size_t 属性的三元组）`string`大不相同。`vector`

如果您正在处理原始字节，请责怪决定将它们放入的库，`string`并尽可能重构它。

否则：复制。`reinterpret_cast`不应该是必要的，因为它们`char`之间`unsigned char`有隐式转换（现在`char`通常`unsigned`是默认的）。

# php - 自动超时文件中的 AJAX 请求

> ID：10445046
> 
> 赞同：0
> 
> 时间：2012-05-04T08:08:03.713
> 
> 标签：php, jquery, ajax

我写了一个代码，当用户不执行任何活动时自动注销。但有一件事，我无法弄清楚。我希望当我从下拉列表中选择选项时，它将传递给 AJAX，您能否修改它，以便我可以将选项中的数据发送到 AJAX。

```
<!DOCTYPE html>
<html lang="en">
<head>
<title></title>
<style type="text/css">
#idletimeout { background:#CC5100; border:3px solid #FF6500; color:#fff; font-family:arial, sans-serif; text-align:center; font-size:12px; padding:10px; position:relative; top:0px; left:0; right:0; z-index:100000; display:none; }
#idletimeout a { color:#fff; font-weight:bold }
#idletimeout span { font-weight:bold }
</style>

</head>
<body>

<div id="idletimeout">
You will be logged off in <span><!-- countdown place holder --></span>&nbsp;seconds due to inactivity.
<a id="idletimeout-resume" href="#">Click here to continue using this web page</a> Please select reason for being idle.
<select id='idleReason' size="1">
<option value="nothing" selected="selected">Select a site</option>
<option value="Option 1">Option 1</option>
<option value="Option 2">Option 2</option>
<option value="Option 3">Option 3</option>
<option value="Option 4">Option 4</option>
</select>

</div>

Content Lorem Impsum

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js" type="text/javascript"></script>
<script src="jquery.idletimer.js" type="text/javascript"></script>
<script src="jquery.idletimeout.js" type="text/javascript"></script>
<script type="text/javascript">
$.idleTimeout('#idletimeout', '#idletimeout a', {
        idleAfter: 3,
        pollingInterval: 2,
        keepAliveURL: 'keepalive.php',
        serverResponseEquals: 'OK',
        onTimeout: function(){
                $(this).slideUp();
                window.location = "timeout.htm";
        },
        onIdle: function(){
                $(this).slideDown(); // show the warning bar
        },
        onCountdown: function( counter ){
                $(this).find("span").html( counter ); // update the counter
        },
        onResume: function(){
                $(this).slideUp(); // hide the warning bar
        }
});
//
</script>

</body>
</html> 
```

我会很感激你的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:17:43.823

您的 jQuery 函数的基本形式应如下所示：

```
$('#idleReason').change(function(){
    $.ajax({
        url: 'http://www.your.ajax.handler'
        data: $('#idleReason option:selected').html()
    });
); 
```

您应该查看[ajax 文档](http://api.jquery.com/jQuery.ajax/)以获取有关如何自定义查询的更多信息。

# xml - XSD 验证错误：元素“{http://www.example.com}Scope”：不需要此元素。预期是（范围）

> ID：10445055
> 
> 赞同：8
> 
> 时间：2012-05-04T08:08:58.817
> 
> 标签：xml, xsd, schema, validation, xmllint

我创建了以下 XSD（使用 Eclipse）：

```
 <?xml version="1.0" encoding="UTF-8"?>
  <schema targetNamespace="http://www.example.com" xmlns="http://www.w3.org/2001/XMLSchema" xmlns:tns="http://www.example.com">
    <element name="Make">
      <complexType>
        <sequence>
          <element name="Scope"></element>
        </sequence>
      </complexType>
    </element>
  </schema> 
```

并使用这个简单的 XML 进行验证

```
 <?xml version="1.0"?>
  <Make xmlns="http://www.example.com">
    <Scope>
    </Scope>
  </Make> 
```

给出：

```
 xmllint.exe --noout --schema sources.xsd sources.xml
  sources.xml:3: element Scope: Schemas validity error : Element '{http://www.example.com}Scope': This element is not expected. Expected is ( Scope ).
  sources.xml fails to validate 
```

在我看来，这**一定**是正确的：XML 文件位于命名空间[http://www.example.com](http://www.example.com)中（验证器也是这样说的）。

对于 XSD，我将默认命名空间设置为 XSD 模式（这是 Eclipse 所做的，所以它应该是正确的！）并且我给出了正确的 targetNamespace。我也尝试使用

```
<element name="tnd:Scope" /> 
```

但是，这也不起作用。

这是 xmllint 中的错误还是问题出在哪里？

问候 divB

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T08:26:45.247

*@dbasemans*答案的替代方法是指定`elementFormDefault`as*合格*：

```
 <schema targetNamespace="http://www.example.com"
     xmlns="http://www.w3.org/2001/XMLSchema"
     xmlns:tns="http://www.example.com"
     elementFormDefault="qualified"> 
```

为您的架构命名空间使用`xsd`or`xs`前缀可能被认为是常见的，因此可能希望选择按照*dbaseman*的建议修改您的架构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T08:21:15.543

~~如果您不想在要验证的 XML 文件中指定任何限定符，则必须将*targetNamespace和根 XSD 命名空间设置为相同的值。*所以它必须是：~~

 ~~```
<schema targetNamespace="http://www.example.com" xmlns="http://www.example.com" xmlns:xsd="http://www.w3.org/2001/XMLSchema"> 
```~~ 

但是当然，您必须使用 xsd: 限定 XSD 元素。换句话说，要让您的 XML 文件按原样验证，您需要像这样编写架构：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema targetNamespace="http://www.example.com" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://www.example.com">
    <xsd:element name="Make">
        <xsd:complexType>
            <xsd:sequence>
               <xsd:element name="Scope"></xsd:element>
            </xsd:sequence>
       </xsd:complexType>
    </xsd:element>
</xsd:schema> 
```

 ~~请参阅此处了解更多信息：[http ://www.xfront.com/DefaultNamespace.pdf](http://www.xfront.com/DefaultNamespace.pdf)

**编辑**感谢 PetruGardea 指出错误。正如菲尔伯特的回答所暗示的那样，**elementFormDefault**默认情况下是*不合格*的，这意味着假定实例文档位于目标命名空间中。所以菲尔伯特的回答是正确的——唯一的选择是使整个事情匿名，通过省略*targetNamespace*并将*elementFormDefault*保留为*unqualified*，然后从实例文档中完全删除命名空间引用。

这是*elementFormDefault*所做的一个很好的细分： [http ://www.xfront.com/HideVersusExpose.html](http://www.xfront.com/HideVersusExpose.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-21T10:25:42.957

如果您不能或不想更改 XSD，我找到了解决此问题的另一种方法。以下 XML 符合您的 XSD：

```
<?xml version="1.0"?>
<tns:Make xmlns:tns="http://www.example.com">
    <Scope>
    </Scope>
</tns:Make> 
```

如果`elementFormDefault`设置为 unqualified，则必须为全局元素定义命名空间，并且不得为局部元素定义命名空间。全局元素是 XSD 中模式元素正下方的元素，局部元素是嵌套在其他元素中的元素。您的错误是由使用默认命名空间定义本地元素 Scope 的命名空间引起的。

[在http://www.oracle.com/technetwork/articles/srivastava-namespaces-092580.html](http://www.oracle.com/technetwork/articles/srivastava-namespaces-092580.html)有进一步的解释。~~

# sybase - 比较两个数据库的 DDLGEN 输出

> ID：10445060
> 
> 赞同：-1
> 
> 时间：2012-05-04T08:09:08.567
> 
> 标签：sybase

我使用[ddlgen](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.ase_15.0.utility/html/utility/utility204.htm)工具从我的 DEV 和 UAT 服务器导出数据库模式。现在我正在尝试对输出进行*文件比较*，但生成 DDL 的顺序与两台服务器不同。

该工具的文档似乎没有对输出进行排序的选项。有吗？

或者，是否有其他工具可用于此目的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:46:42.280

关于排序你是对的，没有选择这样做！

* * *

如果您需要比较模式，您可以一次提取所有表和所有存储过程。然后你单独比较每个文件。

# c# - Autofac IoC GetInstance 方法

> ID：10445064
> 
> 赞同：5
> 
> 时间：2012-05-04T08:09:20.127
> 
> 标签：c#, dependency-injection, autofac

我正在尝试在我的项目中使用 autofac。因此，在 Mef 中，我可以使用以下代码获取接口的实例：

```
private static CompositionContainer _container;

        public static void Initialize()
        {
            string path = AppDomain.CurrentDomain.BaseDirectory.Contains(@"\bin") ?
                AppDomain.CurrentDomain.BaseDirectory :
                Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "bin");

            //DirectoryCatalog catalog = new DirectoryCatalog(Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "bin"), "*.Data*.dll");
            DirectoryCatalog catalog = new DirectoryCatalog(path, "*.dll");
            _container = new CompositionContainer(catalog);
            _container.ComposeParts();
        }

        private static void CheckContainer()
        {
            if (_container == null)
            {
                Initialize();
            }
        }

        public static T GetInstance<T>()
        {
            CheckContainer();

            return _container.GetExportedValue<T>(); 
        } 
```

但是 autofac 对我来说似乎很困惑......我如何使用 autofac 将此功能添加到我的应用程序中？

谢谢

* * *

我将该代码更改为：

```
private static ContainerBuilder _container;
        private static IContainer container;

        public static void Initialize()
        {
            _container = new ContainerBuilder();
            var logging = Assembly.Load("StarlightFramework.Logging");
            _container.RegisterAssemblyTypes(logging);
            container = _container.Build();

        }

        public static T GetInstance<T>()
        {
            if(container == null)
                Initialize();
            return container.Resolve<T>();
        } 
```

但是这次我收到了这个错误：“无法加载文件或程序集'Autofac，Version=2.6.1.841，Culture=neutral，PublicKeyToken=17863af14b0044da'或其依赖项之一。”

可能是什么问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-04T08:14:49.267

首先，您必须构建您的容器并注册您的服务。

```
var builder = new ContainerBuilder();
builder.RegisterType<MyService>().As<IMyService>(); 
var container = builder.Build(); 
```

`Resolve`然后，您可以使用扩展方法获取已注册服务的实例。

```
var service = container.Resolve<IMyService>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T11:20:54.487

确保 Autofac.dll 程序集存在于应用程序的 bin 文件夹中，并且该程序集的版本与 StarlightFramework.Logging 使用的版本相同。

# facebook - 在买家的 Facebook 墙上分享从订单中购买的产品

> ID：10445065
> 
> 赞同：0
> 
> 时间：2012-05-04T08:09:32.390
> 
> 标签：facebook, facebook-like

我目前工作的公司想要创建一个按钮，让人们在付款后在 Facebook 上分享他们的订单，但随着“分享”按钮的弃用，我真的不知道该怎么做。

“喜欢”按钮似乎不适合这个。任何想法，任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:13:09.343

有几种方法可以解决这个问题。

* * *

您可以使用[标准共享器](http://developers.facebook.com/docs/share/)。这适用于一次性共享，或者在您无法控制或不想控制共享的呈现方式并且您希望 Facebook 处理它的情况下。

`http://www.facebook.com/sharer.php?u=<url to share>&t=<title of content>`

它不需要您拥有应用程序 ID，但您也不会为您的应用程序共享[历史/见解](http://www.facebook.com/insights/)获得一个不错的控制面板。您可以通过查看打开的图表来查询并获取有关您共享的 URL 的一些信息。

IE

```
https://graph.facebook.com/?ids=http%3A%2F%2Fwww.cnn.com
https://graph.facebook.com/comments/?ids=http%3A%2F%2Fwww.cnn.com 
```

您可以设置内容的`URL`和`Title`。然后，共享者将查看您共享的网页上的元数据，以确定共享的内容。更多内容如下。

* * *

您还可以使用[Feed 对话框](http://developers.facebook.com/docs/reference/dialogs/feed/)。它带有更多自定义选项。如果您将共享集成为应用程序的一个组成部分，Feed 对话框是最佳选择。我认为您至少需要包含`app_id`,`redirect_uri`和`link`属性。[浏览这里](http://developers.facebook.com/docs/reference/dialogs/feed/)的属性。您需要一个应用 ID 才能使用此提要对话框，如果您使用 JS api，您还需要对用户进行身份验证。您还可以通过直接 url 直接调用对话框，您不需要预先验证用户。

* * *

使用任何一种共享方法，您都可能希望在您的网页上包含自定义的开放图元标记。通过这种方式，您可以影响 Facebook 抓取工具的分享方式。您可以在页面上设置一些默认的（Facebook 预先接受的）打开图元标记。或者，您现在可以在仪表板中创建自己的集合。在 Facebook 上的 Open Graph 仪表板中，您可以自定义 Facebook 应该如何阅读您的元标记并与之交互。

您可以通过调试器传递您的 URL 来调试您的页面打开图元标记。

IE

[http://developers.facebook.com/tools/debug/og/object?q=www.cnn.com](http://developers.facebook.com/tools/debug/og/object?q=www.cnn.com)

例如，这将为您提供 JSON 或 FB 如何查看页面的 HTML 表示形式。

# facebook - 使用预处理器时要考虑使用哪个构建

> ID：10445072
> 
> 赞同：0
> 
> 时间：2012-05-04T08:10:14.310
> 
> 标签：facebook, blackberry, preprocessor, blackberry-jde

我有一个项目需要在 4.6 和 5.0 版本的黑莓中使用。我在 4.6 和 5.0 版本中运行了相同的代码，并在代码中附加了一些预处理器指令（我需要用于 5.0 的#ifndef 语句，因为 4.6 版本不支持 facebook sdk）我有 2 个 .cod 文件（一个用于4.6 和 5.0 的其他版本）它们在各自的模拟器中根据需要工作。

但是，当我将 4.6 的 .cod 文件加载到 5.0 中时……（它将它视为预处理器中的代码作为注释），当我这样做时，反之亦然

即从 5.0 到 4.6 ...它说 ... projectname-1.cod not found 。

此处也发布了一个类似的问题，查看关于 bbtool 的评论说它可以 [在黑莓中为两个不同版本（4.6、4.7 和 5.0+以上）构建一个版本](https://stackoverflow.com/questions/10399216/one-build-for-two-different-versions-4-6-4-7-and-5-0above-in-blackberry)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:17:36.707

**使用预处理器不是`A SINGLE BUILD`为不同的 BB OS 版本**制作的方法（无论您使用什么工具来准备构建）。

预处理器仅用于在编译/构建整个代码之前根据提供的条件删除/添加代码的特定部分。更一般地，预处理器用于针对不同条件以不同方式考虑源代码。更一般地说，预处理器用于为不同的条件生成不同的源代码。在这种情况下，预处理器的范围仅**在**编译/构建代码之前...**而不是在**您构建代码并获得**可执行文件/.cod/...等之后。**文件

[阅读T](http://www.lix.polytechnique.fr/~liberti/public/computing/prog/c/C/SYNTAX/preprocessors.html) [H](http://www.ibiblio.org/pub/languages/fortran/ch3-5.html) [E](http://www.cprogramming.com/tutorial/cpreprocessor.html) [S](http://www.tutorialspoint.com/ansi_c/c_preprocessors.htm) [E](http://en.wikipedia.org/wiki/Preprocessor)链接的前几行；虽然这些是关于 C 预处理器的，但基本在这里也适用。

假设您的代码如下：

```
// START OF CODE
//#preprocess
// this is the second line of the code
//...
//#ifdef OS_5
import net.rim.device.api.ui.component.AutoCompleteField;
//#else
//don't import AutoCompleteField and import something else if needed
//#endif

//...
//... // some more codes
//...

//#ifdef OS_5
//...
//...
// Codes for using AutoCompleteField
//...
//...
//#else
//...
//...
// Codes for implementing AutoCompleteField another way by yourself
//...
//...

//...
//... // some more codes
//...
 // END OF CODE 
```

使用什么工具来构建代码（JDE、Eclipse 或使用 Ant）并不重要，如果您使用预处理器构建，`'OS_5'`那么（如果您的工具可以理解预处理器）将生成以下代码：

```
// START OF CODE
// this is the second line of the code
//...
import net.rim.device.api.ui.component.AutoCompleteField;

//...
//... // some more codes
//...

//...
//...
// Codes for using AutoCompleteField
//...
//...

//...
//... // some more codes
//...
 // END OF CODE 
```

并且`.cod`文件将使用上面的代码生成。并且此`.cod`文件不会在低于 5.0 的 BB OS 版本上运行，因为**`AutoCompleteField`**它受 OS 5 的支持。

如果您在**没有**预处理器**“OS_5”**或其他预处理器的情况下构建，则会生成以下代码：

```
// START OF CODE
// this is the second line of the code
//...
//don't import AutoCompleteField and import something else if needed

//...
//... // some more codes
//...

//...
//...
// Codes for implementing AutoCompleteField another way by yourself
//...
//...

//...
//... // some more codes
//...
 // END OF CODE 
```

并且`.cod`文件将使用上面的代码生成，这将是一个`.cod`与前一个不同的文件。

现在，如果您想`A SINGLE BUILD`成功地准备和部署不同的支持 BB OS 的设备，那么您必须`remove dependencies`在编码时，即仅使用所有操作系统版本（4.6、5.0 和其他版本）支持的那些 API 类，如果您愿意）。但有时在某些情况下这非常困难，因为您可能必须编写自己的代码来实现某些功能。

为不同的操作系统准备不同的构建更容易——为此，您当然可以使用预处理器..

* * *

恐怕我以非常复杂的方式解释了一件简单的事情。

# php - 如何在 cpanel 中安装 cake 项目（共享主机）

> ID：10445076
> 
> 赞同：0
> 
> 时间：2012-05-04T08:10:25.683
> 
> 标签：php, cakephp, cpanel

我已经将 cake 2.X 用于网站 developmentmet 并且它在我的本地机器上工作正常，但是在将其上传到服务器（共享）后出现 403 错误，更改了 tmp 和 webroot 目录的文件权限，我不知道关于.htaccess 和 httpd.conf 文件，请指导我解决问题。

提前致谢

# mod-rewrite - 重写条件不适用于单个页面上的重写规则

> ID：10445081
> 
> 赞同：2
> 
> 时间：2012-05-04T08:11:01.607
> 
> 标签：mod-rewrite, redirect, url-rewriting

我正在尝试编写一个规则，该规则将捕获任何没有销售/任何内容的 url 到 .php 或 .php3 文件以及之后的任何内容 - 如果有的话 - 并将其重写到新网站，如下所示：

```
RewriteCond %{REQUEST_URI} !^(/sales/.*php3?).*
RewriteRule ^/sales/([^./]*)$ http://www2.domain.com/sales$1/index.shtml [R,L] 
```

如果我输入 www.domain.com/sales 但如果我只输入[http://www.domain.com/sales/trucks.shtml](http://www.domain.com/sales/trucks.shtml)如果不捕获单个页面，它会捕获。

任何人都可以看到我需要做什么才能使其正常工作吗？

**澄清：**

.如果我输入网址 www.domain.com/sales，该网站将重定向到 www2.domain.com/sales/index.shtml ....但是如果我输入网址 www.domain.com/sales/trucks。 shtml条件没有被拾取并且url没有重写到ww2站点所以我仍然卡在旧页面上......谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:48:08.783

好吧，根据您的要求使用以下两条规则：

```
RewriteRule ^sales/?$ http://www2.domain.com/sales/index.shtml [R,L,NC]

RewriteRule ^sales/(?!.*\.php3?$).*$ http://www2.domain.com%{REQUEST_URI} [R,L,NC] 
```

# php - HTML 表单数据 > PHP > MySQL UTF 编码（西里尔字母）

> ID：10445083
> 
> 赞同：1
> 
> 时间：2012-05-04T08:11:08.770
> 
> 标签：php, mysql, encoding, utf-8

问题：西里尔字母、UTF-8 编码字符串，例如“Михаил”，以 HTML 形式指定，由 PHP 保存到 MYSQL 中，变成不可读的 krakozyabras，例如“РњРёС…Р°Р№Р»РѕРІРёС‡”。

现在这是一个新问题，但到目前为止我还没有找到解决方案......如果有人以前遇到过这个问题，请帮忙。

HTML 页面采用 UTF-8 编码，并已正确设置 META；保存 PHP 脚本是 UTF-8 编码的（有或没有 BOM - 没关系）。MySL 表具有默认编码 utf-8：

```
CREATE TABLE `cms_deposit_request` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8; 
```

欢迎任何输入！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T08:17:29.667

总是打电话

```
mysql_set_charset('utf8');` 
```

连接到数据库后立即使用函数（或您正在使用的 API 中的类似函数）

如果没有这样的功能，运行

```
SET NAMES utf8 
```

SQL查询在同一个地方

# c++ - 指向对象的全局指针导致访问冲突？

> ID：10445085
> 
> 赞同：1
> 
> 时间：2012-05-04T08:11:10.797
> 
> 标签：c++

也许你能为我澄清一些事情，因为我不知道我的想法到底哪里有缺陷。首先是一些代码：

说话者.h：

```
class talker       
{
    public:
    talker();
    void sayHello() {cout << "Hello";} ;
}; 
```

另一个类.h：

```
class anotherClass
{
    public:
    anotherClass();
    void doSomethingYourself() { cout << "will do"; };
    void askHimToSayHello() { pointerToTalker->sayHello; };  
                          //Access violation, bad pointer(?)
}; 
```

常见的.h：

```
 static talker *pointerToTalker;       
      // if I add here "= new talker", code works fine 
```

主.cpp：

```
#include "common.h"
int main()
{
    pointerToTalker = new talker;            // Here is the bug, but why?
    pointerToTalker -> sayHello;             // says Hello alright

    anotherClass *pointerToAnotherClass = new anotherClass;
    pointerToAnotherClass -> doSomething ();  //Does something OK

    pointerToAnotherClass -> askHimToSayHello(); // Causes access violation 
} 
```

当然，函数有点复杂，每个函数都在对应的 .cpp 中实现，包括“common.h”。我的问题是 - 为什么 pointerToTalker，如果在 main() 中初始化，在 anotherClass::AskHimToSayHello() 中不起作用？它应该在使用时指向有效内存。这是我的“Hello world，OOP！” 顺便说一句，所以如果我没有希望，请保持温柔:)

顺便说一句，对不起孩子气的风格。它可以帮助我减少我必须的代码，使其更紧凑，而不会失去大局:)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T08:12:16.580

因为

```
static talker *pointerToTalker; 
```

不是全局的。在此上下文中，`static`为包含的每个翻译单元（cpp 文件 + 包含的文件）提供变量内部链接`common.h`。

您需要将其声明为`extern`：

```
extern talker *pointerToTalker; 
```

并在单个实现文件中对其进行初始化。

声明它将为每个翻译单元`static`创建一个副本。`pointerToTalker`因此，您正在从`main.cpp`. 其他人未初始化，因此您遇到**未定义的行为**。正确的方法是：

```
//common.h:
extern talker *pointerToTalker;    

//common.cpp
#include "common.h"
talker* pointerToTalker = new talker; 
```

# asp.net-mvc - 在 mvc 3 中按日期搜索过滤器

> ID：10445086
> 
> 赞同：0
> 
> 时间：2012-05-04T08:11:16.897
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我正在尝试按日期进行搜索过滤，但出现错误。这是我的搜索方法：

```
 public ActionResult Search(DateTime StartDate,DateTime EndDate)
    {
        var result = (
            from r in context.Rooms
            from v in context.Reservations
                .Where(a =>a.Room_ID == r.RoomID
                    &&
                    !(
                        StartDate >= a.Data_Check_out ||
                        EndDate <= a.Data_Check_in
                    )
                    && a.Cancel == false
                ).DefaultIfEmpty()
            where v.ReservationID == null
            select r
            );
        return View(result);
    } 
```

这是我的观点：

```
@model IEnumerable<MvcApplication4.Models.Room>

             @using (Html.BeginForm("Search", "Room", FormMethod.Get)) 
            { 
           @Html.TextBox("StartDate") 
           <input type="submit" value="Search" /> 
         @Html.TextBox("EndDate") 
         <input type="submit" value="Search" /> }
          @foreach (var x in Model)
          {
         <div class="item">
         <h1>@x.Room_Type.Room_Type1</h1>

        </div>}` 
```

我收到以下错误：

> 参数字典包含“MvcApplication4.Controllers.RoomController”中方法“System.Web.Mvc.ActionResult Search(System.DateTime, System.DateTime)”的不可为空类型“System.DateTime”的参数“StartDate”的空条目'。可选参数必须是引用类型、可空类型或声明为可选参数。参数名称：参数`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T08:13:48.890

您是否在 url 中传递参数？如果不是，那么最好在控制器中使用模型来获取价值。出现此错误是因为控制器无法获取参数值。

# ruby-on-rails - 访问父模型中的嵌套子属性？

> ID：10445087
> 
> 赞同：0
> 
> 时间：2012-05-04T08:11:19.533
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有以下发布表格，其中轨道字段被接受为我的发布模型中的嵌套属性。

```
<%= form_for(@release) do |f| %>
<%= f.hidden_field :user_id, :value => current_user.id, :class => "text" %>
<%= f.text_field :title, :class => "text" %>

<%= f.fields_for :tracks do |builder| %>
<%= render 'track_fields', :f => builder %>
<% end %>

<% end %> 
```

我的发布模型包含：

```
 accepts_nested_attributes_for :tracks, :reject_if => lambda { |a| a[:name].blank? }, :allow_destroy => :true
  accepts_nested_attributes_for :releases_tracks

  before_save :order_tracks
  before_update :order_tracks

  def order_tracks 
    releases_tracks.each { |t| t.position = track_attributes.position }
    tracks.each { |t| t.user_id = user_id}
    tracks.each { |t| t.label_id = label_id}
  end

  def track_attributes=(track_attributes)
    track_attributes.each do |attributes|
    tracks.build(attributes)
    artists_tracks.build(attributes)
    end
  end 
```

一切正常，除了下面的行，我试图获取在表单的 fields_for 部分输入的位置值。我可以访问父表单中的值，例如 user_id，但是如何访问子值？

```
releases_tracks.each { |t| t.position = track_attributes.position } 
```

谢谢大家！

（注意：我不想为此使用acts_as_list）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:58:02.683

尝试使用：

```
releases_tracks.each { |t| t.position = track_attributes[:position] }  or 
releases_tracks.each { |t| t.position = track_attributes["position"] } 
```

# php - Kohana make View::factory('/foo/bar') 在 foo 类中点击 bar

> ID：10445088
> 
> 赞同：0
> 
> 时间：2012-05-04T08:11:21.717
> 
> 标签：php, view, kohana

我的问题是 Kohana 只渲染视图。当我

`View::factory('/foo/bar')`在 Controller_Other 中，它不会首先击中 Controller_Foo。我希望它击中控制器，然后渲染视图。

```
class Controller_Other extends Controller_Template {
    public $template = 'main';
    public function action_index() {
        $this->template->body = View::factory('/foo/bar');
    }
} 
```

我如何让它首先通过控制器运行：

```
class Controller_Foo extends Controller_Template {
    public function action_bar() {
        $this->myVar = 'foo';
    }
} 
```

所以在视图中，当我从其他人调用它时`$myVar`总是设置？`views/foo/bar.php``View::factory()`

编辑：

必须有一种更清洁的方法，而不是强制`action_bar`将其自己的视图呈现为字符串然后继续：

```
$foo = new Controller_Foo($this->request, $this->response);
$this->template->body = $foo->action_bar(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T12:46:25.257

我不确定您在做什么 - 想要绑定全局视图变量或执行内部请求。无论如何，以下是这两种情况的示例：

**绑定全局视图变量**

```
class Controller_Other extends Controller_Template {
    public $template = 'main';

    public function action_index() {
      View::bind_global('myVar', 'foo'); 
      //binds value by reference, this value will be available in all views. Also you can use View::set_global();

      $this->template->body = View::factory('/foo/bar');
    } 
```

}

**做一个内部请求**

这是 'foo/bar' 动作

```
class Controller_Foo extends Controller_Template {

     public function action_bar() {
        $myVar = 'foo';
        $this->template->body = View::factory('/foo/bar', array('myVar' => $myVar);
     }
}

class Controller_Other extends Controller_Template {
    public $template = 'main';
    public function action_index() {
         $this->template->body = Request::factory('foo/bar')->execute()->body();
         //by doing this you have called 'foo/bar' action and put all its output to curent requests template body
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:14:20.263

在渲染之前，您应该始终将 $myVar 变量传递给查看

```
public function action_index() {
    $this->template->body = View::factory('/foo/bar')->set('myVar', 'foo');
} 
```

在其他控制器中，您应该再次设置它，因为 View 只是一个模板。如果您打算在脚本的不同位置使用相同的视图，您可以将 View 实例分配给某个变量并在以下位置使用它：

```
public function action_index() {
    $this->view = View::factory('/foo/bar')->set('myVar', 'foo');

    $this->template->body = $this->view ;
}

public function action_bar() {
    $this->template->head = $this->view ;
} 
```

# php - mod重写问题

> ID：10445089
> 
> 赞同：0
> 
> 时间：2012-05-04T08:11:30.737
> 
> 标签：php, apache, mod-rewrite, url-rewriting

在 apache .htaccess 文件中，我写过，

> RewriteRule ^animals$ index.php?type=animals

[它将http://localhost/animals](http://localhost/animals)重定向到 [http://localhost/index.php?type=animals](http://localhost/index.php?type=animals)
并且当 URL 键入为[http://localhost/animals/](http://localhost/animals/)时发生错误，找不到文件。

[执行http://localhost/animals](http://localhost/animals)和[http://localhost/animals/](http://localhost/animals/)以重定向到[http://localhost/index.php?type=animals](http://localhost/index.php?type=animals)的正确语法是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T08:25:18.803

您应该使用`L`标志来标记规则的结束并`QSA`保留新的查询参数，如下所示：

```
RewriteRule ^animals/?$ index.php?type=animals [L,QSA,NC] 
```

NC 不用于案例比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:14:11.727

这应该有效：

```
RewriteRule ^animals/?$ index.php?type=animals 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T08:14:25.647

尝试`RewriteRule ^animals/?$ index.php?type=animals`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T10:51:23.077

这是通过设置此规则完成的，如果指定了基础，则所有链接都将获得基础路径

```
RewriteBase / 
```

# iphone - CALayer 遮罩去除？

> ID：10445093
> 
> 赞同：10
> 
> 时间：2012-05-04T08:11:57.800
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我知道一个面具添加了类似的东西

```
UIImageView *mask = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"mask.png"]];
[mask setFrame:kHexagonMaskRect];
[self setBackgroundColor:kBackgroundColor];
[self layer].mask = [mask layer];
[mask release]; 
```

但是我该如何删除它？将其设置为 nil 有效，但这是泄漏的。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-04T08:30:19.533

```
#import <QuartzCore/QuartzCore.h> 
```

**添加蒙版**

```
UIImageView *maskimageview = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"mask.png"]];
CALayer *mask = [CALayer layer];
mask.contents = (id)[[UIImage imageNamed:@"mask.png"] CGImage];
maskimageview.layer.mask = mask;
maskimageview.layer.masksToBounds = YES; 
```

**取下面具**

```
 maskimageview.layer.mask = nil; 
```

希望对你有帮助..

# facebook - 如何使用自定义 appid 更新状态？

> ID：10445094
> 
> 赞同：0
> 
> 时间：2012-05-04T08:12:14.603
> 
> 标签：facebook, facebook-graph-api

我有一个 Facebook 应用程序。我想使用另一个应用程序 ID 更新此应用程序的用户状态，因为我必须自定义 via 参数。

我试试这段代码：

```
FB.api('/me/feed', 'post', { message: status, application: xxxxxxxxxxxxx } 
```

但不起作用。

我知道用户可以通过这种方式通过参数进行自定义：

```
http://www.facebook.com/connect/prompt_feed.php?preview=true&api_key=xxxxxxxxxxxxx 
```

如何从我的应用程序执行此操作？

# datetime - nutch-solr：将网页元数据中的日期格式化为正确的 Solr 格式

> ID：10445095
> 
> 赞同：3
> 
> 时间：2012-05-04T08:12:15.473
> 
> 标签：datetime, solr, date-format, nutch, date-formatting

我目前正在配置 nutch 和 solr 来索引网页及其元数据。元数据标签包含格式为 yyyy-mm-dd 的日期，因此它们缺少用作 solr.DateField 或 solr.TrieDateField 所需的时间格式扩展。我想在日期字段上使用日期范围，如果没有这些格式之一，就不能工作，对吧？

目前，我的日期作为文本包含在架构中：

```
<fieldType name="string" class="solr.StrField" sortMissingLast="true" omitNorms="true"/>
... 
<field name="Date Modified" type="string" stored="true" indexed="true" multiValued="true"/> 
```

每当我将其用于字段定义时...

```
<fieldType name="date" class="solr.TrieDateField" omitNorms="true" positionIncrementGap="0"/>
<field name="Date Modified" type="date" stored="true" indexed="true" multiValued="true"/> 
```

...我收到此错误消息：

```
2012-05-02 23:45:58,370 WARN  mapred.LocalJobRunner - job_local_0029
org.apache.solr.common.SolrException: ERROR: [doc=http://ec.gc.ca/] Error adding field     'Date Modified'='2011-12-05'

ERROR: [doc=http://ec.gc.ca/] Error adding field 'Date Modified'='2011-12-05'

request: http://localhost:8983/solr/update?wt=javabin&version=2
    at     org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:430)
    at     org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java    :244)
    at     org.apache.solr.client.solrj.request.AbstractUpdateRequest.process(AbstractUpdateRequest.j    ava:105)
    at org.apache.solr.client.solrj.SolrServer.add(SolrServer.java:49)
    at org.apache.nutch.indexer.solr.SolrWriter.close(SolrWriter.java:93)
    at     org.apache.nutch.indexer.IndexerOutputFormat$1.close(IndexerOutputFormat.java:48)
    at org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:474)
    at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:411)
    at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:216)
2012-05-02 23:45:58,966 ERROR solr.SolrIndexer - java.io.IOException: Job failed! 
```

我浏览了不同的论坛，但没有找到有效的解决方案。可能是我错过了有关数据导入处理的一些内容。我是否需要更改 nutch 配置中的某些内容以获取正确格式的日期字段？

非常感谢！

一切顺利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:33:58.570

看看[`DateField`文档](http://lucene.apache.org/solr/api/org/apache/solr/schema/DateField.html)。它包含一些正确日期格式的示例。这应该没问题：`2011-12-05T00:00:00Z`。在将日期发送到 Solr 之前，不要忘记将日期转换为 UTC。

但是您的问题更多是如何告诉 nutch 将此字段索引为日期，并将其转换为正确的格式。我查看了源代码，但我还没有找到开箱即用的方法。我想你应该写一些代码，可能扩展你正在使用的插件，也许你甚至可以将它贡献回项目。

# c++ - 使用 stringstream 缩进/居中输出

> ID：10445098
> 
> 赞同：6
> 
> 时间：2012-05-04T08:12:38.377
> 
> 标签：c++, centering, stringstream, getline

我正在学习 c++ 并让项目发送一个帕斯卡的三角形输出（经过 n 行计算）。得到这样的输出，存储在字符串流“缓冲区”中

```
 1
 1 1
 1 2 1
 1 3 3 1 
```

但我想要的是

```
 1
   1 1
  1 2 1
 1 3 3 1 
```

我的想法是：计算最后一行和当前行长度的差（我知道最后一行是最长的）。然后使用空格（行长差的一半）填充每一行。我现在的问题是：

*   我不明白 getLine 是如何工作的，也不知道如何提取特定的（-> 最后一行）
*   我不知道也找不到如何编辑字符串流中的特定行

不知何故，我觉得我不是使用 stringstream 的最佳方式。

所以这是一个相当普遍的问题：你是如何解决这个问题的，如果可能的话，使用 stringstreams - 怎么样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T20:32:06.303

要知道第一行的缩进，您需要知道输入中的行数。因此，您必须首先读入所有输入。为了方便 .size() 成员函数，我选择使用向量来存储值，该函数将在读取所有输入后给出总行数。

```
#include<iostream>
#include<sstream>
#include<vector>
#include<iomanip> // For setw
using namespace std;
int main()
{
  stringstream ss;
  vector<string> lines;
  string s;

  //Read all of the lines into a vector
  while(getline(cin,s)) 
    lines.push_back(s);

  // setw() - sets the width of the line being output 
  // right  - specifies that the output should be right justified 
  for(int i=0,sz=lines.size();i<sz;++i)
    ss << setw((sz - i) + lines[i].length()) << right << lines[i] << endl;

  cout << ss.str();
  return 0;
} 
```

在此示例中，我使用 setw 将线的宽度设置为右对齐。字符串左侧的填充由 (sz - i) 给出，其中 sz 是总行数，i 是当前行。因此，每个后续行的左侧都少了 1 个空间。

接下来我需要添加行的原始大小（lines[i].length()），否则该行将不包含足够大的空间，以使生成的字符串在左侧具有正确的填充。

```
setw((sz - i) + lines[i].length()) 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:35:25.777

如果您可以访问编写初始输出的代码，并且知道`N`要编写的行数，则可以简单地执行以下操作：

```
for(int i = 0; i < N; ++i) {
    for(int j = 0; j < N - 1 - i; ++j)
        sstr << " "; // write N - 1 - i spaces, no spaces for i == N.
    // now write your numbers the way you currently do
} 
```

# php - 以 JSON 格式输出 SQL Result Array 的适当方式

> ID：10445099
> 
> 赞同：2
> 
> 时间：2012-05-04T08:12:40.720
> 
> 标签：php, arrays, json

我正在输出我的数据库结果，如下所示：

```
foreach($result as $row) {
    echo json_encode($row);
} 
```

这将输出以下内容：

```
{"nummer":"600","name":"Location Name 600"}{"nummer":"698","name":"Location Name 698"}{"nummer":"1110","name":"Location Name 1110"} 
```

这是正确的方法吗？我是否必须将结果行彼此分开？

编辑：如果我从 jquery 获得回调 id，我会以什么方式将其格式化为 jsonp？更具体地说，我想在 jsonp 中放入一个包含结果总量的值，然后是找到的所有结果（jquery 向我发送回调的 id，我必须将其放入输出中）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T08:14:24.580

简单地...

```
echo json_encode($result); 
```

# iphone - NSTimer 导致崩溃

> ID：10445107
> 
> 赞同：0
> 
> 时间：2012-05-04T08:13:11.717
> 
> 标签：iphone, ios, xcode, crash, nstimer

以下方法会导致崩溃。UI 就像一个按钮，它处理 NSTimer 的启动/停止功能。如果计时器运行，则更新 UILabel。使用 viewDidLoad 方法使我的计时器工作，停止它也工作，但再次启动它会使应用程序崩溃。

删除 viewDidLoad 方法中的 alloc 并尝试使用开始按钮会*立即*导致崩溃。连the`NSLog(@"Start now");`都不叫。

代码：

```
- (void)tick {
NSLog(@"tick");
float value = [moneyLabel.text floatValue];
moneyLabel.text = [NSString stringWithFormat:@"%f", value + 1.0];

}

- (IBAction)startStopButtonClicked:(UIButton *)sender {
if ([sender.titleLabel.text isEqualToString:@"Start"]) {
    NSLog(@"Start now");
    if (timer) {
        NSLog(@"Timer valid");
        [timer fire];
    } else {
        NSLog(@"Timer is nil");
        timer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(tick) userInfo:nil repeats:YES];
        [timer fire];
    }

    NSLog(@"bla");

    [sender setTitle:@"Stop" forState:UIControlStateNormal];
} else {
    [timer invalidate];
    timer = nil;
    NSLog(@"Stopped.");
    NSLog(@"Timer isValid: %@", timer);
    [sender setTitle:@"Start" forState:UIControlStateNormal];
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T08:27:30.387

我认为根本不需要打电话`[NSTimer fire]`；它应该足以让计时器决定何时触发。

首先确保它`timer`是`nil`（如果它是对象的实例变量应该是），尽管明确地将它设置为`nil`in`- (id)init`不会受到伤害。

接下来，我将使用计时器本身的状态来确定是否按下了启动/停止，而不是按钮中的文本：

```
- (IBAction)startStopButtonClicked:(UIButton *)sender
{
    if (timer != nil)
    {
        NSLog(@"Stopping timer");
        [timer invalidate];
        timer = nil;
    }
    else
    {
        NSLog(@"Starting timer");
        timer = [NSTimer scheduledTimerWithTimeInterval:1
                                                 target:self
                                               selector:@selector(tick)
                                               userInfo:nil
                                                repeats:YES];
    }

    [sender setTitle:(timer != nil ? @"Stop" : @"Start")
            forState:UIControlStateNormal];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:41:40.700

The code you have posted works as desired - just tested it in a new project, so the problem could be somewhere else. I tested it only by declaring the ivar `NSTimer *timer;` without any initialization in `viewDidLoad:` or the designated initializers...

# mysql - 处理临时错误

> ID：10445108
> 
> 赞同：1
> 
> 时间：2012-05-04T08:13:12.973
> 
> 标签：mysql

我已经建立了一个包含 1 个 mngt、2 个数据和 2 个 SQL 节点的集群。每台 PC（共 2 台）上都有一个数据和一个 SQL 节点，mngt 位于单独的（第 3 台）PC 上。

我编写了一个 Delphi 应用程序来尝试连接到特定的 SQL 节点，如果失败，则通过使用`SELECT 1`查询来测试连接性来尝试第二个节点。当我使用第一个节点关闭 PC 时，有时我会在我的应用程序中收到一条错误/警告消息，上面写着“临时服务器错误……”或类似的内容。不幸的是，我不能总是让错误发生。

现在我已将 ADOQuery.OPEN 调用放在异常块中，但不知何故它没有捕捉到这些临时错误。

有人可以帮我吗？

# php - 在 php 中插入数据库时 出错

> ID：10445109
> 
> 赞同：-4
> 
> 时间：2012-05-04T08:13:16.587
> 
> 标签：php

我正在尝试在我的 php 程序中向数据库中插入一些值，但出现错误

```
Parse error: parse error, expecting `T_STRING' or `T_VARIABLE' or `T_NUM_STRING' in C:\wamp\www\php\books.php on line 9 
```

mysql_查询..

```
mysql_query("insert into books values('$_GET["title"]','$_GET["author"]','$_GET["edition"]','$_GET["publish"]','$_GET["isbn"]',)") or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:18:23.723

在变量中获取您的值，例如

```
$title = $_GET["title"];
$author = $_GET["author"]; 
```

然后使用这样的查询

```
mysql_query("insert into books values('$title','$author','$edition','$publish','$isbn',)") or die(mysql_error()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:19:21.637

您正在使用嵌套双引号

```
mysql_query("insert into books values('{$_GET["title"]}','{$_GET["author"]}','{$_GET["edition"]}','{$_GET["publish"]}','{$_GET["isbn"]}',)") or die(mysql_error()); 
```

或者

```
mysql_query("insert into books values('$_GET[title]','$_GET[author]','$_GET[edition]','$_GET[publish]','$_GET[isbn]',)") or die(mysql_error()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T08:24:22.393

好的查询是：

```
mysql_query("insert into books values('" . $_GET["title"] . "','" . $_GET["author"] . "','" . $_GET["edition"] . "','" . $_GET["publish"] . "','" . $_GET["isbn"] . "')") or die(mysql_error()); 
```

在查询的末尾，有非转义的引号，还有一个与此处无关的逗号。也许你应该先学习 PHP 及其语法。

# entity-framework - 比较列表的最佳方法是什么 带有数据库表 id 列

> ID：10445111
> 
> 赞同：0
> 
> 时间：2012-05-04T08:13:31.407
> 
> 标签：entity-framework, linq-to-entities

我有一个`List<int>`包含 id 的集合，我想查询一个数据库表中的所有记录，其中 id 在集合中。

我知道我可以编写一个方法来遍历集合并将 linq 写入实体`from t in context.table where t.id=id select t`，但这意味着我必须访问数据库的次数与集合中的 id 数量一样多，这显然不是我想要的。

任何人都可以帮忙吗？提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:18:22.813

你可以这样做（假设*ids*是一个 ID 列表）：

```
from t in context.table
where ids.Contains(t.Id)
select t; 
```

# c# - mvc httppost href 参数

> ID：10445116
> 
> 赞同：4
> 
> 时间：2012-05-04T08:14:08.817
> 
> 标签：c#, asp.net-mvc, c#-4.0, asp.net-mvc-views, asp.net-mvc-controller

我目前正在使用 EF 4.0 使用 ASP.NET MVC 4。我有一个带有列表项的无序列表。每个列表项都包含一个名称和地址，并且是可点击的。现在我想这样做，当我单击列表项时，我会转到一个新视图。此视图称为 UitgebreidPersoonScherm，位于同一控制器 RelatieZoekenController 中。

这是我目前拥有的代码：

控制器：

```
[HttpPost]
public ActionResult UitgebreidPersoonScherm(int psnID)
{
    ViewBag.Message = "UitgebreidPersoonScherm";

    return View("UitgebreidPersoonScherm");
} 
```

看法：

```
 @model MobileApp.Models.ZoekModel
    @{
        ViewBag.Title = " Resultaten";
    }
    @using (Html.BeginForm("UitgebreidPersoonScherm", "RelatieZoeken", FormMethod.Post, new { id = "resultForm" }))
    { <ul data-role="listview" data-filter="true" data-inset="true" data-theme="g">
        @foreach (var adres in Model.AdresList)
        {            
            <li>
            <a href='@Html.Action("UitgebreidPersoonScherm", "RelatieZoeken")'><b>@adres.Naam </b>
                <br />@adres.Adres
            </a></li>
        }
        </ul>

} 
```

现在我不知道这是怎么可能的。我试图用一个动作链接来制作它，但它不会显示我的数据。如果我删除 httppost，我可以让它工作，但没有参数。目前它也没有给出任何参数。

如果您需要任何额外信息，请询问。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T08:19:32.330

但由于您只是返回链接，我建议您以某种方式替换它：

```
<a href='@Url.Action("UitgebreidPersoonScherm", "RelatieZoeken", new { psnID = adres.Id })'> 
```

# php - 登录后重定向页面的好处

> ID：10445121
> 
> 赞同：4
> 
> 时间：2012-05-04T08:14:12.857
> 
> 标签：php

我看到很多网站（比如使用 vbulletin 的网站）都有...

> 谢谢！您已成功登录。**单击此处继续**

页。

这样做有什么好处/好处吗？那和不重定向有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T08:20:37.067

*重定向站点的*流程如下（此处的打开页面是指“登录”区域的第一页）：

```
login page --(login data)--> redirect page ----> opener page 
```

与没有它的流程相反：

```
login page --(login data)--> opener page 
```

当用户在打开页面并点击重新加载时，就会出现差异。在第一种情况下，只是页面重新加载，一切都（希望）很好。

然而，在第二种情况下，再次发送登录数据。这有两个后果：

1.  大多数浏览器会显示“您真的要重新发送该数据吗？” 对话给用户。可能会使用户感到困惑；甚至可能如此之多，以至于他离开了您的网站。
2.  在后端，可能会触发另一个登录过程。这可能会破坏对多次登录或用户活动记录的一些保护。

一般来说，第一个后果更为严重，因为作为页面开发人员的您可以防止第二个后果。所以基本上你可以通过不让他们面对（不必要的）对话框来节省你的用户一些时间，并且一个快乐的用户是一个经常性的用户。

**评论后编辑**

@Christoph：上述模式称为[PRG 模式](http://en.wikipedia.org/wiki/Post/Redirect/Get)

@CodeCaster：登录后直接在响应头中发送[302重定向](http://en.wikipedia.org/wiki/HTTP_302)，而不是单独的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:39:57.723

当您不想使用 javascript 进行用户登录时，这个解决方案是我心目中的最佳解决方案。您可以使用它，但我更喜欢登录后自动重定向用户。

在我看来，最好的用户交互是 Javascript 登录。你不重定向用户，不重新加载页面，它更快

# c++ - QTcpSocket 状态始终连接，即使拔掉以太网线

> ID：10445122
> 
> 赞同：25
> 
> 时间：2012-05-04T08:14:14.613
> 
> 标签：c++, qt, network-programming, state, qtcpsocket

我有一个 QTcpSocket，我正在读一个循环。每次读取完整的数据包或出现错误时，我都会手动检查循环内套接字的状态，其中：

```
 while(true){
    if(socket->state()==QAbstractSocket::ConnectedState){
        qDebug()<<"Socket status: connected. Looking for packets...";
        if(socket->waitForReadyRead(2000)){
        //...
    } 
```

当我执行de程序时，一旦连接并且循环开始，它总是打印`qDebug()<<"Socket status: connected. Looking for packets..."`；然后一直停留`waitForReadyRead`直到准备好读取一些数据。

问题是未检测到断开连接。如果我从操作系统选项断开网络连接，或者即使我拔下以太网线，它的行为也是一样的：套接字状态等于`QAbstractSocket::ConnectedStat`e，所以它继续，但当然没有收到任何东西。

我还尝试检测断开连接`disconnected()`信号（在第一次连接后）到重新连接功能：

```
// Detect disconnection in order to reconnect
    connect(socket, SIGNAL(disconnected()), this, SLOT(reconnect()));

void MyClass::reconnect(){
    qDebug()<<"Signal DISCONNECTED emitted. Now trying to reconnect";
    panelGUI->mostrarValueOffline();
    socket->close();
    prepareSocket((Global::directionIPSerialServer).toLocal8Bit().data(), 8008, socket);
    qDebug()<<"Reconnected? Status: "<<socket->state();
} 
```

但是信号永远不会发出，因为这段代码永远不会被执行。这是合乎逻辑的，因为它看起来像套接字状态总是`ConnectedState`.

如果我再次插入，连接将恢复并再次开始接收数据，但我确实想检测断开连接以在 GUI 上显示“断开连接”。

为什么 QTcpSocket 会这样，我该如何解决这个问题？

编辑：我在类构造函数中创建套接字，然后初始化调用 prepareSocket 函数：

```
socket = new QTcpSocket();
socket->moveToThread(this);

bool prepareSocket(QString address, int port, QTcpSocket *socket) {
    socket->connectToHost(address, port);
    if(!socket->waitForConnected(2000)){
        qDebug()<<"Error creating socket: "<<socket->errorString();
        sleep(1);
        return false;
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-04T11:02:46.737

终于在这个[Qt 论坛](http://qt-project.org/forums/viewthread/2420)中找到了解决方案：

> 如果一段时间内没有数据交换，TCP 将开始发送 keep-alive 段（基本上是确认号设置为当前序列号减一的 ACK 段）。另一个对等方然后用另一个确认回复。如果在一定数量的探测段内未收到此确认，则自动断开连接。小问题是内核在连接空闲 2 小时后开始发送 keep-alive 段！因此，您需要更改此值（如果您的操作系统允许）或在您的协议中实现您自己的保持活动机制（就像许多协议一样，例如 SSH）。Linux 允许您使用 setsockopt 更改它：

```
int enableKeepAlive = 1;
int fd = socket->socketDescriptor();
setsockopt(fd, SOL_SOCKET, SO_KEEPALIVE, &enableKeepAlive, sizeof(enableKeepAlive));

int maxIdle = 10; /* seconds */
setsockopt(fd, IPPROTO_TCP, TCP_KEEPIDLE, &maxIdle, sizeof(maxIdle));

int count = 3;  // send up to 3 keepalive packets out, then disconnect if no response
setsockopt(fd, SOL_TCP, TCP_KEEPCNT, &count, sizeof(count));

int interval = 2;   // send a keepalive packet out every 2 seconds (after the 5 second idle period)
setsockopt(fd, SOL_TCP, TCP_KEEPINTVL, &interval, sizeof(interval)); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-13T18:48:33.153

我在使用 QT 客户端应用程序时也遇到了类似的问题。基本上我用定时器、信号和插槽来处理它。当应用程序启动时，它会启动一个 4 秒的 checkConnectionTimer。每 4 秒计时器到期，如果客户端套接字状态 != AbstractSocket::Connected 或 Connecting，它会尝试与 clientSocket->connectToHost 连接

当套接字发出“connected()”信号时，它会启动一个 5 秒的服务器心跳计时器。服务器应每 4 秒向其客户端发送一个 1 字节的心跳消息。当我收到心跳（或由 readyRead() 发出的任何类型的消息）时，我会重新启动心跳计时器。因此，如果心跳计时器超时，我假设连接已关闭并调用`clientSocket->disconnectFromHost ();`

这对于服务器上所有不同类型的断开连接都非常有效，无论是优雅的还是其他的（拉动电缆）。是的，它需要自定义心跳类型的东西，但归根结底，它是最快、最便携的解决方案。

我并不热衷于在内核中设置 KEEPALIVE 超时。这种方式更便携。在构造函数中：

```
connect(clientSocket, SIGNAL(readyRead()), this, SLOT(readMessage()));
connect(clientSocket, SIGNAL(connected()), this, SLOT(socketConnected()));
connect(clientSocket, SIGNAL(disconnected()), this, SLOT(socketDisconnected()));
connect(heartbeatTimer, SIGNAL(timeout()), this, SLOT(serverTimeout()));
...
// Other Methods

void NetworkClient::checkConnection(){
    if (clientSocket->state() != QAbstractSocket::ConnectedState &&
            clientSocket->state() != QAbstractSocket::ConnectingState){
        connectSocketToHost(clientSocket, hostAddress, port);
    } 
}

void NetworkClient::readMessage()
{
    // Restart the timer by calling start.
    heartbeatTimer->start(5000);
    //Read the data from the socket
    ...
}

void NetworkClient::socketConnected (){
    heartbeatTimer->start(5000);
}

void NetworkClient::socketDisconnected (){
    prioResponseTimer->stop();
}

void NetworkClient::serverTimeout () {
    clientSocket->disconnectFromHost();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-29T11:30:26.157

试试这个信号槽连接：

`connect(this, SIGNAL(stateChanged(QAbstractSocket::SocketState)), this, SLOT(onStateChanged(QAbstractSocket::SocketState)));`

在插槽实现时：

```
void TCPWorker::onStateChanged(QAbstractSocket::SocketState socketState ){
qDebug()<< "|GSTCPWorkerThread::onStateChanged|"<<socketState;
...} 
```

我有同样的问题，但是您的问题（始终连接），在拔下以太网线后，我有 4-5 秒的延迟来接收断开信号。

仍在寻找解决方案，如果找到，请发布答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T09:12:14.870

在 Qt 中尝试我的客户端模板：

```
class Client: public QTcpSocket {
   Q_OBJECT
public:
    Client(const QHostAddress&, int port, QObject* parent= 0);
    ~Client();
    void Client::sendMessage(const QString& );
private slots:
    void readyRead();
    void connected();
public slots:
    void doConnect();
}; 
```

在 cpp 上：

```
void Client::readyRead() {

    // if you need to read the answer of server..
    while (this->canReadLine()) {
    }
}

void Client::doConnect() {
    this->connectToHost(ip_, port_);
    qDebug() << " INFO : " << QDateTime::currentDateTime()
            << " : CONNESSIONE...";
}

void Client::connected() {
    qDebug() << " INFO : " << QDateTime::currentDateTime() << " : CONNESSO a "
            << ip_ << " e PORTA " << port_;
    //do stuff if you need
}

void Client::sendMessage(const QString& message) {
    this->write(message.toUtf8());
    this->write("\n"); //every message ends with a new line
} 
```

我省略了一些代码作为构造函数和插槽连接..试试这个，如果它不起作用，可能服务器端有问题..

# svn - 为什么 svn checkout 使用错误的 URL？

> ID：10445128
> 
> 赞同：1
> 
> 时间：2012-05-04T08:14:37.737
> 
> 标签：svn, svn-checkout

可能是一个愚蠢的问题，但有谁知道为什么`svn checkout`可以从您指定的 URL 以外的 URL 签出？我正在运行这个命令：

```
svn co -r107616 https://svn.wso2.org/repos/wso2/branches/carbon/3.2.0 r107616 
```

但是，结帐后`svn info`的目录中显示：`r107616`

```
Path: .
URL: https://svn.wso2.org/repos/wso2/tags/carbon/3.2.0
Repository Root: https://svn.wso2.org/repos/wso2
Repository UUID: a5903396-d722-0410-b921-86c7d4935375
Revision: 107616
Node Kind: directory
Schedule: normal
Last Changed Author: senaka
Last Changed Rev: 107616
Last Changed Date: 2011-06-10 07:51:44 +0100 (Fri, 10 Jun 2011) 
```

需要注意的关键是 URL 指的是标签而不是分支。请问有什么想法吗？

对于它的价值，这对我来说是可重现的（我已经尝试了两次）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T12:01:35.043

为了实现您的目标，您应该使用 peg-revision。

```
svn co https://svn.wso2.org/repos/wso2/branches/carbon/3.2.0@107616 r107616 
```

更多答案在这里[http://www.visualsvn.com/support/svnbook/advanced/pegrevs/](http://www.visualsvn.com/support/svnbook/advanced/pegrevs/)

# windows-phone-7 - 如何从我在 WP7 上的应用程序启用定位服务

> ID：10445131
> 
> 赞同：1
> 
> 时间：2012-05-04T08:14:47.787
> 
> 标签：windows-phone-7, service, localization, location, geo

我正在为一些地理定位编写应用程序。

如何以编程方式从我的应用程序中启用/禁用位置服务？像我的个人应用程序中的设置页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T08:37:25.417

在您的应用程序中，您应该尝试使用定位服务（GeoCoordinateWatcher），然后您应该检查 Permission 属性，如果将其设置为 Denied，则这意味着用户在您的应用程序外部禁用了手机上的定位服务，因此这是您需要关心的全部。您可以显示一条友好的消息，告诉用户您的应用程序中的某些功能将不可用，但您将决定是否启用位置服务留给用户。

以下文章详细介绍了 watcher_StatusChanged 事件处理程序，其中包括上述检查：-

[http://msdn.microsoft.com/en-us/library/ff431782%28v=vs.92%29.aspx](http://msdn.microsoft.com/en-us/library/ff431782%28v=vs.92%29.aspx)

# javascript - 根据子元素的数量设置分页的宽度

> ID：10445138
> 
> 赞同：0
> 
> 时间：2012-05-04T08:15:24.470
> 
> 标签：javascript, jquery

我正在尝试根据可用的子元素数量来设置分页的宽度。

这样做的原因是因为我想将它集中在父 div 元素中。

目前，我试图找到 UL 元素的 outerWidth 并设置 css 以反映这一点，但这仍然行不通。

有任何想法吗？

[http://jsbin.com/ezaqax/edit#javascript,html](http://jsbin.com/ezaqax/edit#javascript,html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:26:07.857

你不需要 javascript，只需要 CSS：

```
div {
    width:415px;
    border:2px solid red; 
    text-align: center
}
ul {
    margin-top:20px;
    display:inline-block;
    margin:0;
    list-style:none;
    padding:0;
} 
```

[http://jsbin.com/ezaqax/4/edit](http://jsbin.com/ezaqax/4/edit)

`ol`中间有空是有原因的`li`吗？此外，您还有一些`li`不包含在父级`ul`或`ol`.

# html - 在CSS中将多行插入边框？

> ID：10445140
> 
> 赞同：0
> 
> 时间：2012-05-04T08:15:34.850
> 
> 标签：html, css, styling

我有一个页面，我希望边框超过一行。

```
h2.bord
{
border-style:inset;
border-width:8px;
border-color:green;
background-color:black;
color:white;
text-align:center;
} 
```

这（使用时）在文本周围显示边框。然而，我想家不止我一条线在这个边界。

帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T08:17:35.730

使用带边框的 div 并在其中放置此 h2 边框

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T08:18:24.307

是`border-style:double;`你要找的吗？

或者，如果您想要的不仅仅是双边框或多种样式的边框，您可以使用多个嵌套 div，例如

```
<style>
  .inset-border { border: 4px inset Black; }
  .double-border { border: 4px double Black; }
</style>

<div class="inset-border">
  <div class="double-border">
    <h2>content</h2>
  </div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T08:27:46.513

标准 CSS 边框最多只支持双线（参见@Jaimal 的回答）。

如果您需要更多，您需要尝试以下操作：

*   附加标记：即更多的容器元素，每个元素都有自己的边框。
*   使用`:before`and`:after`并给他们一个`border`. 做得对，它们应该包裹在原来的盒子上，并给你额外的边框。在 IE6 或 IE7 中不起作用。
*   使用`outline`除`border`. 大纲的工作方式与边框非常相似，但确实有一些细微差别。但是，如果除了`border-style:double;`. 请注意，它可能不适用于旧版浏览器。
*   CSS3 `border-image`。使用它，您可以为边框定义自己的图形，这意味着您可以定义任意多的线条。注意：这肯定不会在旧浏览器中工作；它只是 CSS 的一个相当新的补充。
*   用来造假`background-image`。如果您知道盒子的大小，这可能是最简单且跨浏览器兼容的方式。但是，如果您事先不知道盒子的大小，那就没那么有用了。

希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T08:29:12.273

我假设您正在尝试实现 3d/“凸起”类型的边框；如果是这样，那么您可以简单地使用`border-style: groove`：[JS Fiddle 演示](http://jsfiddle.net/davidThomas/RuQGU/1/)。

但是，如果可以，您可以使用`::after`伪元素和`outset`边框样式：

```
h2.bord {
    border-style:inset;
    border-width:8px;
    border-color:green;
    background-color:black;
    color:white;
    text-align:center;
    position: relative; /* in order to position the pseudo element relative to the parent */
    margin: 8px; /* to move the edges of the element from the container element in order to see the borders of the pseudo-element */
}

h2.bord::after {
    content: '';
    position: absolute;
    top: -16px;
    left:-16px;
    right: -16px;
    bottom: -16px;
    border: 8px outset green;
} 
```

​<a href="http://jsfiddle.net/davidThomas/RuQGU/" rel="nofollow">JS Fiddle 演示。

# php - Cakephp 重定向不起作用

> ID：10445142
> 
> 赞同：-2
> 
> 时间：2012-05-04T08:15:44.033
> 
> 标签：php, cakephp, redirect

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

我不知道，但不久前，重定向功能正在工作。但现在它给了我这个错误：

```
 Cannot modify header information - headers already sent by (output started at C:\xampp\htdocs\NewFolder\app\webroot\relationship1\app\controllers\books_controller.php:114) [CORE\cake\libs\controller\controller.php, line 744] 
```

这是我的控制器：C:\xampp\htdocs\NewFolder\app\webroot\trial\app\controllers\users_controller.php

```
<?php
    class UsersController extends AppController{

        function register(){
            if(!empty($this->data)){
                if($this->User->save($this->data)){
                    $this->Session->setFlash('Data saved');
                    $this->redirect(array('action'=>'index'));
                } else{
                    $this->Session->setFlash('Could not save data');
                }
            } else{

                $this->Session->setFlash('Please fill this form');
            }
        }

        function index(){
            $users = $this->User->find('all');
            $this->set('users',$users);
        }

        function login(){
        //$this->Session->write('user','chams');
            //pr($this->Session->read());
            if(!empty($this->data)){
                //pr($this->data['User']['username']);
                $username = $this->data['User']['username'];
                //if($this->User->read(NULL,$username)){
                //$condition = array('User.username'=>$username);
                if($this->User->findByUserName($username)){
                    pr('existing');
                    $data = $this->User->find('first',$username);
                    $this->set('data',$data);
                    if($this->redirect(array('action'=>'main'))){
                        $this->Session->setFlash('redirected to index');
                    }

                } else{
                    pr('non existing');
                }

            }
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:18:45.770

我假设`$this->set('data',$data);`填充模板，尝试删除它。您尝试重定向用户，因此无论如何它都是多余的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:20:19.277

在您的登录中，您写

```
$this->set('data', $data); 
```

在重定向之前，它已经发送了一个标头输出。您应该修改登录方法：

```
.......    
if($this->User->findByUserName($username)){
   pr('existing'); // remove this
   $data = $this->User->find('first',$username);           
   if($this->redirect(array('action'=>'main'))){
      $this->Session->setFlash('redirected to index');
   }

   } else {
        pr('non existing');
   }
    $this->set('data',$data);
    ..... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T08:20:31.087

```
<?php ob_start(); ?> 
```

将此代码放入您的 ctp

# android - 在 Android 中从 AsyncTask 创建 Tabhost 并添加规范

> ID：10445143
> 
> 赞同：0
> 
> 时间：2012-05-04T08:15:46.380
> 
> 标签：android, android-asynctask, android-tabhost

我正在尝试在其中创建一个标签栏和规范，但问题是我需要在 asycn 任务中执行它，因此它没有 TabActivity。在下面运行此代码后，我只看到我的主要布局。最后，我想要做的是，我想向用户显示一个进度条，表示安装应用程序后第一次复制必要的文件，同时复制文件然后创建 tabHost 并添加规范. 没有 asyncTask 它工作得很好，但是应用程序第一次运行时屏幕会被锁定 20 或 30 秒，直到复制过程完成。任何想法 ？提前致谢。

```
public class AsyncTest extends AsyncTask<Void, Void, Void> {

Context context;
DataBaseJSONFunctions json;

TabHost tabHost;

TabWidget tabWidget;

Resources res;

TabHost.TabSpec sp;

Intent intent;

ProgressDialog dialog;

Activity ac;

public AsyncTest(Context context, TabHost tabHost, TabHost.TabSpec sp, Bundle savedInstanceState) {
    this.context = context;
    json = new DataBaseJSONFunctions(context);
    this.tabHost = tabHost;
    tabWidget = tabHost.getTabWidget();
    this.sp = sp;
    ac = (Activity) context;
    res = context.getResources();

    LocalActivityManager mlam = new LocalActivityManager(ac, false);
    mlam.dispatchCreate(savedInstanceState);
    tabHost.setup(mlam );

}

@Override
protected Void doInBackground(Void... params) {
    initializeAll();
    return null;
}

@Override
protected void onPostExecute(Void result) {

    dialog.dismiss();

    // to go through to the another activity in the tab I need to initialize an intent.
    // and I need to set the Tab bar and it's icon.
    intent = new Intent().setClass(ac, Activities.class);
    sp = tabHost.newTabSpec("activities").setIndicator("activities",res.getDrawable(R.drawable.tab_activities_selector)).setContent(intent);
    tabHost.addTab(sp);

    // doing the same things for Songs Activity.
    intent = new Intent().setClass(ac, Promotions.class);
    sp = tabHost.newTabSpec("promotions").setIndicator("promotions",res.getDrawable(R.drawable.tab_promotions_selector)).setContent(intent);
    tabHost.addTab(sp);

    // doing the same things for another Activity.
    intent = new Intent().setClass(ac,Menu.class);
    sp = tabHost.newTabSpec("menu").setIndicator("Menu",res.getDrawable(R.drawable.tab_menu_selector)).setContent(intent);
    tabHost.addTab(sp);

    intent = new Intent().setClass(ac, Gallery.class);
    sp = tabHost.newTabSpec("gallery").setIndicator("Gallery",res.getDrawable(R.drawable.tab_gallery_selector)).setContent(intent);
    tabHost.addTab(sp);

    intent = new Intent().setClass(ac, Info.class);
    sp = tabHost.newTabSpec("info").setIndicator("Info",res.getDrawable(R.drawable.tab_info_selector)).setContent(intent);
    tabHost.addTab(sp);

    for(int i = 0; i < tabWidget.getChildCount(); i++){
        tabWidget.getChildAt(i).setBackgroundResource(R.drawable.tab_bar);
    }

    tabHost.setCurrentTab(0);

    // Starting location listener service.
    ac.startService(new Intent(ac, LocationService.class));

    ac.setContentView(R.layout.tabbar_main);
    super.onPostExecute(result);
}

@Override
protected void onPreExecute() {
    dialog = ProgressDialog.show(context, "", "Copying files please wait...");
    super.onPreExecute();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:33:00.533

对于选项卡布局，您的 xml 应该像这样；

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TabHost
        android:id="@android:id/tabhost"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical" >

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1" />

            <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="0" />
        </LinearLayout>
    </TabHost>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T07:54:57.110

我找到了方法，我有一个图像视图，其可见性为 GONE，在 onPreExecute() 中，我将此图像的可见性设置为 VISIBLE。还有 onPostExecute() 我像以前一样让它消失了。

# jquery - jQuery过滤列表效果

> ID：10445144
> 
> 赞同：0
> 
> 时间：2012-05-04T08:15:47.050
> 
> 标签：jquery, plugins

我想知道过滤器列表使用什么插件@ [http://www.kriesi.at/themes/angular/](http://www.kriesi.at/themes/angular/) 您可以通过单击任何链接（All/CSS/HTML/PSD/Video）来查看效果，请查看效果让我知道它是否不是 jQuery 插件，所以我怎么能做到这种效果谢谢。

问候， 穆罕默德·阿西夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:22:22.393

他们使用同位素 JS。[在http://isotope.metafizzy.co/](http://isotope.metafizzy.co/)上查看更多详细信息。

# android - 在 Android ICS 上隐藏系统栏的简单方法

> ID：10445157
> 
> 赞同：10
> 
> 时间：2012-05-04T08:16:50.563
> 
> 标签：android, fullscreen, android-4.0-ice-cream-sandwich, kiosk-mode

我会给我的 ICS 平板电脑供用户完成调查，所以我希望用户只使用我的应用程序。他们应该无法切换到主屏幕，按后退按钮等，所以我想完全隐藏系统栏。

我的平板电脑已植根，我知道这样的一些应用程序 [可以](https://play.google.com/store/apps/details?id=com.goodmooddroid.gesturecontroldemo&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5nb29kbW9vZGRyb2lkLmdlc3R1cmVjb250cm9sZGVtbyJd)帮助我，但我不需要这个应用程序的所有额外功能。

我发现[这个教程](http://www.redmondpie.com/how-to-enable-on-screen-virtual-buttons-on-any-android-ice-cream-sandwich-rom-tutorial/)可以帮助我，但如果我可以添加代码来做我自己的，那就太好了。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-10-15T04:50:32.397

在互联网上进行了大量搜索后，我设法让系统栏隐藏并出现在 4.2 设备中，使用：

隐藏：

```
Runtime.getRuntime().exec("service call activity 42 s16 com.android.systemui"); 
```

或者对于小于 14 的 API 使用 79 而不是 42。您可能还需要包括 SET_DEBUG_APP 权限，在这种情况下，您需要使用系统密钥对应用程序进行签名或安装在 /system/app/ 目录中。

显示：

```
Runtime.getRuntime().exec("am startservice --user 0 -n com.android.systemui/.SystemUIService"); 
```

或者，有些人使用了 -a（而不是 -n）选项，尽管这导致我的设备出现错误：

错误：未找到；没有服务启动。

对于 Android 4.4，有一个名为沉浸式模式的新功能，它隐藏了系统栏和状态栏。系统 UI 由用户通过使用从屏幕顶部或底部的边缘滑动来切换。有关更多详细信息，请查看：

[http://developer.android.com/reference/android/view/View.html#setSystemUiVisibility(int)](http://developer.android.com/reference/android/view/View.html#setSystemUiVisibility(int))

[在 android kitkat 中使用新的 IMMERSIVE 模式](https://stackoverflow.com/questions/21135445/using-new-immersive-mode-in-andorid-kitkat)

例如：

```
getWindow().getDecorView().setSystemUiVisibility(
          View.SYSTEM_UI_FLAG_LAYOUT_STABLE
        | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION
        | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN
        | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION
        | View.SYSTEM_UI_FLAG_FULLSCREEN
        | View.SYSTEM_UI_FLAG_IMMERSIVE) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-18T17:32:13.580

HideBar 具有专门针对此用例的信息亭模式。

可从[http://ppareit.github.com/HideBar/](http://ppareit.github.com/HideBar/)免费下载。您也可以在[https://play.google.com/store/apps/details?id=be.ppareit.hidebar](https://play.google.com/store/apps/details?id=be.ppareit.hidebar)在市场上找到它。

如果您想将其合并到您自己的测试/调查应用程序中，您可以随时联系开发人员（请参阅电子邮件链接）。可以解释代码或`Intent`提供隐藏操作。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-04T08:30:11.677

检查这个链接：（需要root） [http://android.serverbox.ch/?p=306](http://android.serverbox.ch/?p=306)

这里也发布了类似的问题： [有没有办法在 Android 3.0 中隐藏系统栏？这是一个内部设备，我正在管理导航](https://stackoverflow.com/questions/5109988/is-there-a-way-to-hide-the-system-bar-in-android-3-0-its-an-internal-device-an)

或尝试 HideBar [http://ppareit.github.com/HideBar/](http://ppareit.github.com/HideBar/)

实际上，您可以简单地将系统栏置于“熄灯”模式，系统栏按钮和通知会变暗。

```
View v = findViewById(R.id.view_id);
v.setSystemUiVisibility(View.STATUS_BAR_HIDDEN); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-05-06T15:07:01.227

我想在现有回复中添加一些信息，希望它对某人有用。

*要在我的低成本中国平板电脑*上实现真正的全屏显示，我需要编辑位于

```
system/build.prop 
```

替换文本

```
ro.property.tabletUI=true 
```

和

```
#ro.property.tabletUI=true 
```

（我评论这条线）。之后，我可以使用全屏

```
android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" 
```

对于 minfest.xml 中的每个活动

此解决方案仅在您使用应用程序销售平板电脑并且**需要 root 权限**来编辑`system/build.prop`. **所以这不是一个适合所有人的解决方案**，所以请不要对这个小小的贡献投反对票。

**编辑：** 我注意到我的平板电脑的框架上有硬件按钮（主页、菜单和返回）。所以Android让我隐藏系统栏。我尝试了其他没有硬件按钮的平板电脑，但**没有成功**。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-08T19:28:48.263

Google 打算将 Android 仅用于消费者。他们将系统 UI 栏更紧密地集成到 Android ICS (4.0) 中，以防止人们以这种方式生根设备并杀死栏。尝试删除系统栏进程将阻止操作系统完全启动。

如果您想限制用户访问主屏幕，那么您对 ​​Android ICS 不走运。我建议找一家平板电脑制造商来为设备预装 Android 2.3。要么，要么使用有根的 Android 3.x 设备。

如果您打算将 Android 用于信息亭或锁定设备，那么您最好选择更开放的操作系统。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-03-16T14:57:47.967

我找到了一个解决方案，在我的用例中，即使在未根目录的设备上也隐藏菜单栏，它就像一个魅力：

设置这个标志

```
layoutparams.flags = 0x80000000 | layoutparams.flags; 
```

到我的窗口的布局参数就可以了！

这是我使用的完整片段：

```
 Window window = getWindow();
    android.view.WindowManager.LayoutParams layoutparams = window.getAttributes();
    layoutparams.flags = 0x80000000 | layoutparams.flags;
    window.setAttributes(layoutparams); 
```

在我的活动 onCreate。

为了找出这一点，我反向设计了一个非系统 Apk，我发现它能够以某种方式做到这一点。

根据官方文档：

[http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#FLAG_DRAW_SYSTEM_BAR_BACKGROUNDS](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS)

that "0x80000000" is the FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS introduced as a system constant in Api level 21, and it basically indicates that "this Window is responsible for drawing the background for the system bars." and since i'm not manually drawing any system bar, no menu bar is shown.

I only tested this on a pair of Moverio BT-200 running Android ICS 4.0.3 because that is the device i'm currently working on and also because right now i don't have other device running Api levels prior to 19 under my hands to test it.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-10T12:59:17.933

有一种解决方法可以在所有大多数平板电脑中禁用菜单栏（而不是隐藏）而无需生根。但这有点棘手，但它很干净。目前市场上的几个知名应用程序使用此策略为其应用程序实现此禁用菜单栏功能。

*   授予管理员权限（需要一次用户参与才能激活）。
*   以编程方式使用设备管理配置文件 API 设置密码并锁定设备。
*   然后在本机锁定屏幕上加载任何 UI。（当然，每当活动之间发生转换时，这将显示背景锁定屏幕。但如果逻辑组织得当，那么它会很流畅，用户不会注意到）
*   当需要重新启用时，使用设备策略管理器对象的 resetPassword("", 0) 将密码重置为 ""。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-12-27T03:21:13.063

为了补充已经给出的答案，如果它对需要类似行为的人有用，有这个针对 android 设备 4.0 及更高版本的教程，它告诉你如何隐藏导航栏和状态栏（它们会在再次触摸屏幕）：

[https://developer.android.com/training/system-ui/navigation.html](https://developer.android.com/training/system-ui/navigation.html)

我意识到这不是您所需要的，但可能对其他查看此问题的人有用。

# algorithm - 了解回溯算法的伪代码

> ID：10445160
> 
> 赞同：0
> 
> 时间：2012-05-04T08:16:55.660
> 
> 标签：algorithm, backtracking

要启动回溯算法，i=0 时可以调用以下伪代码；X[1..0] 表示空元组。

```
ALGORITHM Backtrack(X[1..i])
   //Gives a template of a generic backtracking algorithm
   //Input: X[1..i] specifies first i promising components of a solution.
   //Output: Alll the tuples representing the problem's solutions
   If X[1..i] is a solution write X[1..i]
   else
     for each element x belongs to Si+1 consistent with X[1..i] and constraints do
        X[i+1] <- x
        Backtrack(X[1..i+1]) 
```

我很难理解上述逻辑。我试图通过逐步解决 4 皇后问题，但没有。请通过 4 个皇后问题的步骤帮助您理解上述逻辑。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:56:23.657

看看这个 PDF 文件，第 25 页。它有一步一步的描述，其中包含关于 4 个带回溯的皇后解决方案的图像。

[http://ce.sharif.edu/courses/90-91/2/ce417-1/resources/root/Lectures/Chapter-6.pdf](http://ce.sharif.edu/courses/90-91/2/ce417-1/resources/root/Lectures/Chapter-6.pdf)

简单来说：

该算法试图为数组 X 的每个元素找到一个与所有约束一致的赋值。

为了通过回溯做到这一点，我们使用递归函数。在每个步骤中，我们检查当前变量（域集 S [i+1]）的所有可用值，如果它与约束一致，我们递归地转到下一个变量，直到找到解决方案。

# javascript - 如何使用 JQ 启用和禁用复选框的单选按钮

> ID：10445161
> 
> 赞同：0
> 
> 时间：2012-05-04T08:17:10.917
> 
> 标签：javascript, jquery, checkbox

我需要使用从此开关开始的复选框禁用和启用 3 单选按钮

```
jQuery("input:checked").each(function () {
        var valore = jQuery(this).val();
        if(str != ""){
            str += " + ";
        }
        switch(valore)
                {
                    case "1": 
                       str += "casa";
                       if(num == "") num = "cooc &euro;";                                            
                    break;
                    case "2": 
                       str += "Struttura";
                       if(num == "") num = "cccd";
                    break;
                    case "3": 
                       str += "inserzione";
                       if(num == "") num = "ddds;";
                    break;
                    default:;
                } 
```

html

```
<input id="radio-01" value="3" name="radio" type="radio" class="rambo" />
<input id="radio-01" value="3" name="radio" type="radio" class="rambo" />
<input id="radio-01" value="3" name="radio" type="radio" class="rambo" />
<input id="radio-01" value="3" name="checkbox" type="checkbox" class="rambo" /> 
```

帮助我 感谢您的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:20:44.780

喜欢班级的名字。

`$('input [type="radio"]).attr('checked', true)`如果您想检查所有 3 个无线电，您应该在交换机内部使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-24T20:02:50.503

```
$('input[type="radio"]').attr('disabled', true); 
```

# mysql - SQL 在 GROUP BY 中显示最近的记录？

> ID：10445162
> 
> 赞同：27
> 
> 时间：2012-05-04T08:17:11.673
> 
> 标签：mysql, sql, group-by, sql-order-by

我有一个看起来像这样的表：

```
id    |    SubjectCode    |    Grade    |    DateApproved    |    StudentId

1            SUB123            1.25            1/4/2012            2012-12345

2            SUB123            2.00            1/5/2012            2012-12345

3            SUB123            3.00            1/5/2012            2012-98765 
```

我正在尝试 GROUP BY SubjectCode 但我希望它显示最新的 DateApproved 所以它看起来像：

```
 id    |    SubjectCode    |    Grade    |    DateApproved    |    StudentId

2            SUB123            2.00            1/5/2012            2012-12345

3            SUB123            3.00            1/5/2012            2012-98765 
```

我有点不知道该怎么做？

编辑：

好吧，伙计们现在我在我的真实电脑上，对这个结构不佳的问题感到抱歉。

这就是我真正想要做的事情：

```
SELECT GD.GradebookDetailId, G.SubjectCode, G.Description, G.UnitsAcademic, G.UnitsNonAcademic, 
GD.Grade, GD.Remarks, G.FacultyName, STR_TO_DATE(G.DateApproved, '%m/%d/%Y %h:%i:%s') AS 'DateAproved'
FROM gradebookdetail GD INNER JOIN gradebook G ON GD.GradebookId=G.GradebookId 
WHERE G.DateApproved IS NOT NULL AND G.GradebookType='final' AND StudentIdNumber='2012-12345'

GROUP BY <?????>
ORDER BY G.SubjectCode ASC 
```

基本上，我只想显示“SubjectCode”的**最新**“DateApprove”，所以我不会得到多个条目。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-04T08:39:56.053

从这个开始：

```
select StudentId, max(DateApproved) 
from tbl
group by StudentId 
```

然后将其集成到主查询：

```
select * 
from tbl
where (StudentId, DateApproved) in

(
  select StudentId, max(DateApproved) 
  from tbl
  group by StudentId
) 
```

你也可以使用这个：

```
select * 
from tbl
join (select StudentId, max(DateApproved) as DateApproved 
      from tbl 
      group by StudentId)
using (StudentId, DateApproved) 
```

但我更喜欢元组测试，它[更整洁](http://www.anicehumble.com/2012/05/tuple-matching-is-neat-how-to-simulate.html)

现场测试：[http ://www.sqlfiddle.com/#!2/771b8/5](http://www.sqlfiddle.com/#!2/771b8/5)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-04T08:46:04.933

```
SELECT t2.*
FROM temp t2 
INNER JOIN(
    SELECT MAX(DateApproved) as MaxDate, StudentId
    FROM temp
    GROUP BY StudentId
    ) t1 ON t1.MaxDate = t2.DateApproved and t1.StudentId = t2.StudentId 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T08:31:37.413

```
SELECT *
FROM TheTable a
WHERE NOT EXISTS(SELECT *
                 FROM TheTable b
                 WHERE b.StudentCode = a.StudentCode AND b.DateApproved > a.DateApproved) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-14T05:37:22.957

对于在撰写本文时（2020 年）仍不支持元组的 SQL Server 中尝试此操作的用户，您可以使用以下内容（在此处改进另一个答案）

改变这个：

```
-- MYSQL
select * 
from tbl
where (StudentId, DateApproved) in
(
  select StudentId, max(DateApproved) 
  from tbl
  group by StudentId
) 
```

进入这个：

```
-- Microsoft SQL Server
select * 
from tbl
where concat(StudentId, DateApproved) in
(
  select concat(StudentId, max(DateApproved)) 
  from tbl
  group by StudentId
) 
```

# ruby-on-rails - ruby on rails rake db:seed 未定义的方法

> ID：10445163
> 
> 赞同：2
> 
> 时间：2012-05-04T08:17:12.303
> 
> 标签：ruby-on-rails, ruby, rake, seed, migrate

我正在尝试设置基本用户身份验证 - 我已对用户登录内容进行了排序，并准备为用户添加角色。

本质上，我希望我的用户拥有许多角色，这使他们能够访问权限。

我写了一些种子数据，但不断收到错误：

```
rake aborted!
undefined method `roles' for #<Array:0x007f8c0581ba80> 
```

我的种子数据如下所示：

```
#user
user = User.create!([{ email: 'admin@admin.com', first_name: 'Admin', last_name: 'Test', password: 'admin', password_confirmation: 'admin'}])
user.roles << admins = Role.create!(:name => "Admin")

#user roles
create = Right.create!(:resource => "users", :operation => "CREATE") 
read = Right.create!(:resource => "users", :operation => "READ") 
update = Right.create!(:resource => "users", :operation => "UPDATE") 
delete = Right.create!(:resource => "users", :operation => "DELETE")

#add the roles to the admin
admins.rights << read
admins.rights << create
admins.rights << update
admins.rights << delete 
```

rake db:migrate 工作正常，所有表列都符合我的预期。就在我运行 rake db:seed 时，它会因上述错误而中止。我明白错误在说什么 - 我只是看不出我没有将 has_many 定义为角色。

我已经非常仔细地浏览了这些模型，但似乎找不到我错过的东西。

我的模型文件如下所示：

```
class User < ActiveRecord::Base
    has_secure_password

    has_many :assignments
    has_many :roles, :through => :assignments

    attr_accessible :email, :first_name, :last_name, :password, :password_confirmation

    validates_presence_of :email, :on => :create
    validates :password, :confirmation => true
    validates :password_confirmation, :presence => true
    validates_uniqueness_of :email

    #will be using this later to check if the user has access to resources/actions
    # def can?(action, resource)
    #   roles.includes(:rights).for(action, resource).any?
    # end
end

class Role < ActiveRecord::Base
    has_many :grants
    has_many :assignments
    has_many :users, :through => :assignments
    has_many :rights, :through => :grants  
    scope :for, lambda{|action, resource| 
            where("rights.operation = ? AND rights.resource = ?", 
                  Right::OPERATION_MAPPINGS[action], resource
                 )
          }  
end

class Right < ActiveRecord::Base
    attr_accessible :operation, :resource
    has_many :grants
    has_many :roles, :through => :grants
    OPERATION_MAPPINGS = {
        "new" => "CREATE",
        "create" => "CREATE",
        "edit" => "UPDATE",
        "update" => "UPDATE",
        "destroy" => "DELETE",
        "show" => "READ",
        "index" => "READ"
    }
end

class Grant < ActiveRecord::Base
    attr_accessible :right_id, :role_id
    belongs_to :role
    belongs_to :right
end

class Assignment < ActiveRecord::Base
    belongs_to :user
    belongs_to :role
    attr_accessible :role_id, :user_id
end 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T08:23:59.733

您不应将一个用户创建为用户数组。尝试删除 User.create!() 中的方括号

```
user = User.create!({email: 'admin@admin.com', first_name: 'Admin', last_name: 'Test', password: 'admin', password_confirmation: 'admin'}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T08:24:45.933

只需去掉第一行中的`[]`'s 和`{}`'s，例如：

```
 user = User.create!(email: 'admin@admin.com', first_name: 'Admin', last_name: 'Test', password: 'admin', password_confirmation: 'admin') 
```

# java - URL编码+符号

> ID：10445164
> 
> 赞同：-1
> 
> 时间：2012-05-04T08:17:14.537
> 
> 标签：java, urlencode, url-encoding, urldecode

我有一个带有`+`名字的应用程序（例如。`DB+JSP.jws`）。

尝试创建连接时出现错误，因为 java`+`使用空格对 url 进行编码，因此无法将连接添加到`DB JSP/../META-INF/connection.xml`（未找到文件异常）。

`URLEncoder.encode()`有什么方法可以仅通过使用和方法来规避这种情况`URLDecoder.decode()`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T23:38:40.850

您需要正确编码 URL，因为 '+' 是 URL 中的保留字符，并且只能在正确的上下文中使用，否则需要使用 %2B 进行编码。

您的 URL 字符串将编码为“DB%2BJSP.jws”。

因此，如果您定义了以下内容：

```
String url = URLEncoder.encode("DB+JSP.jws");
System.out.println(url); 
```

输出将是相同的：

```
DB%2BJSP.jws 
```

您可以根据需要在编码的 URL 前添加“http://localhost/”。

# django - 如何编写查询以在 django 的 json 字段中查找值

> ID：10445176
> 
> 赞同：25
> 
> 时间：2012-05-04T08:18:05.983
> 
> 标签：django, django-models, django-queryset

我的数据库中有一个 json 字段，就像

```
jsonfield = {'username':'chingo','reputation':'5'} 
```

如何编写查询以便查找用户名是否存在。就像是

```
username = 'chingo'
query = User.objects.get(jsonfield['username']=username) 
```

我知道上面的查询是错误的，但我想知道是否有办法访问它？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2015-04-10T06:27:39.977

如果您使用的是 django-jsonfield 包，那么这很简单。假设您有这样的模型：

```
from jsonfield import JSONField
class User(models.Model):
    jsonfield = JSONField() 
```

然后要搜索具有特定*用户名*的记录，您可以这样做：

```
User.objects.get(jsonfield__contains={'username':username}) 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2017-11-28T14:30:27.147

从 Django 1.9 开始，您已经能够使用 PostgreSQL 的原生 JSONField。这使得搜索 JSON 变得非常简单。在您的示例中，此查询将起作用：

```
User.objects.get(jsonfield__username='chingo') 
```

如果你有旧版本的 Django，或者你使用 Django JSONField 库来兼容 MySQL 或类似的东西，你仍然可以执行你的查询。

在后一种情况下，`jsonfield`将存储为文本字段并在带入 Django 时映射到字典。在数据库中，您的数据将像这样存储

```
{"username":"chingo","reputation":"5"} 
```

因此，您可以简单地搜索文本。您在这种情况下的查询将是：

```
User.objects.get(jsonfield__contains='"username":"chingo"') 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-05-04T14:16:37.350

这种用法有点反模式。此外，它的实现不会有常规性能，并且*可能*容易出错。
当您需要通过字段查找时，通常不要使用 jsonfield。正如 Daniel 指出的那样，使用 RDBMS 提供的方式或 MongoDB（内部在更快的 BSON 上运行）。

由于[JSON 格式的确定性](http://json.org/)，您可以通过使用`contains`（`regex`在处理多个`'\'`甚至更慢时出现问题）来实现它，我认为*`username`*以这种方式使用并不好，因此请*`name`*改用：

```
def make_cond(name, value):
    from django.utils import simplejson 
    cond = simplejson.dumps({name:value})[1:-1] # remove '{' and '}'
    return ' ' + cond # avoid '\"'

User.objects.get(jsonfield__contains=make_cond(name, value)) 
```

只要它有效

*   使用相同转储实用程序的 jsonfield（`simplejson`此处）
*   *`name`*并且*`value`* 不太*特别*（到目前为止我不知道任何egde-case，也许有人可以指出）
*   您的 jsonfield 数据没有损坏（虽然不太可能）

实际上我正在研究一个可编辑的 jsonfield 并考虑是否支持这样的操作。否定的证明就是上面说的，感觉有点黑魔法，嗯。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2019-07-25T22:52:13.453

2019：正如@freethebees 指出的那样，现在很简单：

```
User.objects.get(jsonfield__username='chingo') 
```

但是正如文档示例所提到的，您可以深入查询，如果 json 是一个数组，您可以使用整数对其进行索引：

[https://docs.djangoproject.com/en/2.2/ref/contrib/postgres/fields/#querying-jsonfield](https://docs.djangoproject.com/en/2.2/ref/contrib/postgres/fields/#querying-jsonfield)

```
>>> Dog.objects.create(name='Rufus', data={
...     'breed': 'labrador',
...     'owner': {
...         'name': 'Bob',
...         'other_pets': [{
...             'name': 'Fishy',
...         }],
...     },
... })
>>> Dog.objects.create(name='Meg', data={'breed': 'collie', 'owner': None})

>>> Dog.objects.filter(data__breed='collie')
<QuerySet [<Dog: Meg>]>

>>> Dog.objects.filter(data__owner__name='Bob')
<QuerySet [<Dog: Rufus>]>

>>> Dog.objects.filter(data__owner__other_pets__0__name='Fishy')
<QuerySet [<Dog: Rufus>]> 
```

虽然这是针对 postgres 的，但我相信它在 MySQL 等其他数据库中的工作原理相同

*   Postgres：[https ://docs.djangoproject.com/en/2.2/ref/contrib/postgres/fields/#querying-jsonfield](https://docs.djangoproject.com/en/2.2/ref/contrib/postgres/fields/#querying-jsonfield)
*   MySQL：[https ://django-mysql.readthedocs.io/en/latest/model_fields/json_field.html#querying-jsonfield](https://django-mysql.readthedocs.io/en/latest/model_fields/json_field.html#querying-jsonfield)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-04T21:34:17.927

如果您使用 PostgreSQL，您可以使用原始 sql 来解决问题。

```
username = 'chingo'
SQL_QUERY = "SELECT true FROM you_table WHERE jsonfield::json->>'username' = '%s'"
User.objects.extra(where=[SQL_EXCLUDE % username]).get() 
```

`you_table`数据库中表的名称在哪里。

使用 JSON 时的任何方法，例如使用纯文本 - 看起来都非常糟糕。所以，我也认为你需要一个更好的数据库模式。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-11-14T15:14:21.187

这是我发现可以解决您的问题的方法：

```
search_filter = '"username":{0}'.format(username)
query = User.objects.get(jsonfield__contains=search_filter) 
```

希望这可以帮助。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-04T08:36:48.153

你不能那样做。对结构化数据使用普通数据库字段，而不是 JSON blob。

如果您需要搜索 JSON 数据，请考虑使用 MongoDB 等 noSQL 数据库。

# php - SQL 查询 - 子查询返回多于一行

> ID：10445179
> 
> 赞同：3
> 
> 时间：2012-05-04T08:18:18.750
> 
> 标签：php, mysql, sql

桌子：

```
laterecords
-----------
studentid - varchar
latetime - datetime
reason - varchar 
```

我的查询：

```
SELECT laterecords.studentid,
laterecords.latetime,
laterecords.reason,
( SELECT Count(laterecords.studentid) FROM laterecords 
      GROUP BY laterecords.studentid ) AS late_count 
FROM laterecords 
```

我收到“MySQL 子查询返回多行”错误。

我知道此查询使用以下查询的解决方法：

```
SELECT laterecords.studentid,
laterecords.latetime,
laterecords.reason 
FROM laterecords 
```

然后使用 php 循环查看结果并执行以下查询以获取`late_count`并回显它：

```
SELECT Count(laterecords.studentid) AS late_count FROM laterecords 
```

但我认为可能有更好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T08:19:43.790

简单的解决方法是`WHERE`在子查询中添加一个子句：

```
SELECT
    studentid,
    latetime,
    reason,
    (SELECT COUNT(*)
     FROM laterecords AS B
     WHERE A.studentid = B.student.id) AS late_count 
FROM laterecords AS A 
```

更好的选择（就性能而言）是使用连接：

```
SELECT
    A.studentid,
    A.latetime,
    A.reason,
    B.total
FROM laterecords AS A
JOIN 
(
    SELECT studentid, COUNT(*) AS total
    FROM laterecords 
    GROUP BY studentid
) AS B
ON A.studentid = B.studentid 
```

# google-app-engine - 一个可以测试其他网站的网站

> ID：10445184
> 
> 赞同：2
> 
> 时间：2012-05-04T08:18:26.520
> 
> 标签：google-app-engine, rest, selenium, automated-tests

有没有办法，或者是否有一个网站可以针对另一个 REST 服务器运行测试用例？在“测试者”网站上，你会说：在这个 URI 上执行这个 PUT，使用这个身份验证机制，使用这个 JSON 字符串，这个头等等。如果结果包含 XYZ，那么认为它是成功的，否则认为它是失败的...

其他用户应该能够添加新的测试用例和编辑现有的测试用例。

我想在编写 wiki、google app engine、selenium 等的组合之前检查一下。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:48:26.117

Its not what you probably search for, but still probably worth the check: [SimpleTestIO](http://simpletest.io)

That project's goal is to be easier than Selenium and easy to use. In the future will be probably paid.

Disclaimer: I am not connected with the page, just found it while researching for Selenium alternatives

# php - 在 Javascript、PHP 中验证图像分辨率

> ID：10445186
> 
> 赞同：2
> 
> 时间：2012-05-04T08:18:33.270
> 
> 标签：php, javascript, validation, resolution, image-size

我想在通过 Javascript 上传 PHP 中的图像之前验证图像分辨率。在我的 php 表单中，我想上传两个不同的图像，并且两个图像都有不同的分辨率限制。

我尝试以下代码

PHP 代码

```
echo "<form name='add' enctype='multipart/form-data' action='AppActions.php' method='post' onSubmit='return validate_create();'>";
echo "<div class='form_label'>Album Wrapper (Big Image) *</div>";
echo "<div class='form_input'><input type='file' name='bigimage' id='bigimage' />";

echo "<div class='form_label'>Album Wrapper (Small Image) *</div>";
echo "<div class='form_input'><input type='file' name='smallimage' id='smallimage' />;
echo "<input type='submit' name='add' value='Create' class='Buttons' id='add'>"; 
```

在 Javascript 中

```
function validate_create()
{
var bigimage = document.getElementById('bigimage');
var smallimage = document.getElementById('smallimage');

var big_img_width = bigimage.clientWidth;
var big_img_height = bigimage.clientHeight;

var small_img_width = smallimage.clientWidth;
var small_img_height = smallimage.clientHeight;

// if condtion to check the condition //
} 
```

在这里，即使我选择不同大小的文件，我也会得到两个图像的宽度和高度。

这该怎么做？请建议我

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T08:37:41.303

您可以使用 JavaScript 中的新 HTML5 File API 来检查这一点。但是，这在许多浏览器中尚不可用。不过，您可以实现它，因此支持此功能的浏览器用户可以利用此功能。查看[此 SO 帖子](https://stackoverflow.com/questions/7460272/getting-image-dimensions-using-javascript-file-api)以获取更多信息和示例。另一种可能性是使用某种闪存上传器（只需搜索它）。

您无法在 PHP 中预先检查它。PHP 运行服务器端，显然，它无法访问客户端计算机上的任何内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T08:43:37.093

使用[getimagesize()](http://www.php.net/getimagesize)验证文件尺寸。如果它无效，则抛出错误。此外，您可能想阅读[使用 javascript / jquery 获取上传的图像尺寸？](https://stackoverflow.com/questions/1491199/get-uploaded-image-dimensions-with-javascript-jquery)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T08:34:58.577

当你执行`bigimage.clientWidth`or`smallimage.clientWidth`时，你实际上得到的是`input`元素的宽度，而不是你要上传的图像。此外，您的 JavaScript 是在文件实际上传之前执行的，目前尚不清楚图像的分辨率。事实上，您甚至不知道这些文件是否真的是图像文件。

上传文件的类型，如果是图片，图片的分辨率只能在上传完成后才能确定。因此，这必须在 PHP（您的`AppActions.php`脚本）中完成。在 PHP 中，您可以访问文件`$_FILES`全局以查看上传了哪些文件、它们的类型和大小。然后，您可以打开图像并使用`imagesx`和`imagesy`来确定尺寸。

如果您在允许上传之前必须知道文件类型，那么我相信您唯一的出路是使用 Flash 组件。例如，[SWFUploader](http://code.google.com/p/swfupload/)。JavaScript 永远无法访问用户计算机上的文件，但 Flash 可以并且允许您在实际上传文件之前确定文件类型和大小。尽管如此，您的网站仍然需要 Flash，这可能不是您想要的。

# asp.net - 用asp.net c#处理html表单

> ID：10445187
> 
> 赞同：0
> 
> 时间：2012-05-04T08:18:35.630
> 
> 标签：asp.net

我有下表，它位于 asp.net 表单中。我试图使用按钮上的 onclick 事件来处理它。但元素是 html 文本框和 html 复选框，它们的名称都是数组

我试过这样做

```
for(int i = 0; i < Request["pageimagesOrder"].Length; i++) 
{
      Response.Write(Request["pageimagesOrder"][i]);
} 
```

但它只是倒下了。我确定它很简单，但就像所有事情一样，只有你知道才简单

谢谢

```
<table>
      <tr>
        <td width="200"><img src="/CaptionImages/Thmbs/1.png" width="196" height="140" /></td>
        <td width="300" valign="top">caption txt 1</td>
        <td width="25" valign="top"><input style="width:20px;" type="text" name="pageimagesOrder[1]" value="1 "></td>
        <td width="100" valign="top"><input type="checkbox" value="1" name="pageimagesDelete[]" /></td>
      </tr>
      <tr>
        <td width="200"><img src="/CaptionImages/Thmbs/2.png" width="196" height="140" /></td>
        <td width="300" valign="top">caption txt 1</td>
        <td width="25" valign="top"><input style="width:20px;" type="text" name="pageimagesOrder[2]" value="2 "></td>
        <td width="100" valign="top"><input type="checkbox" value="2" name="pageimagesDelete[]" /></td>
      </tr>
      <tr>
        <td width="200"><img src="/CaptionImages/Thmbs/3.png" width="196" height="140" /></td>
        <td width="300" valign="top">caption txt 1</td>
        <td width="25" valign="top"><input style="width:20px;" type="text" name="pageimagesOrder[3]" value="3 "></td>
        <td width="100" valign="top"><input type="checkbox" value="3" name="pageimagesDelete[]" /></td>
      </tr>
      <tr>
        <td width="200"><img src="/CaptionImages/Thmbs/5.png" width="196" height="140" /></td>
        <td width="300" valign="top">caption txt 1</td>
        <td width="25" valign="top"><input style="width:20px;" type="text" name="pageimagesOrder[5]" value="4 "></td>
        <td width="100" valign="top"><input type="checkbox" value="5" name="pageimagesDelete[]" /></td>
      </tr>
      <tr>
        <td width="200"><img src="/CaptionImages/Thmbs/7.png" width="196" height="140" /></td>
        <td width="300" valign="top">caption txt 2</td>
        <td width="25" valign="top"><input style="width:20px;" type="text" name="pageimagesOrder[7]" value="5 "></td>
        <td width="100" valign="top"><input type="checkbox" value="7" name="pageimagesDelete[]" /></td>
      </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:39:36.360

你需要做：

```
Response.Write(Request["pageimagesOrder[" + i + "]"]); 
```

这会给你正确的命名:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:30:32.267

您实际上是用括号 [] 命名它们

如果你 `Response.Write(Request["pageimagesOrder[1]"])`在后面写代码，你会得到一个值。

# html - Twitter 的 Bootstrap - 创建一个包含 2 列的表单

> ID：10445188
> 
> 赞同：32
> 
> 时间：2012-05-04T08:18:40.823
> 
> 标签：html, css, twitter-bootstrap

是否可以使用 twitter bootstrap 创建一个两列表单？他们在这里有一些很好的例子：http: [//twitter.github.com/bootstrap/base-css.html](http://twitter.github.com/bootstrap/base-css.html) 但不幸的是，他们都使用一列。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-05-04T12:13:08.720

将表单标签包裹在您的跨度 div 周围。这对我有用，但您可能需要稍微调整一下：

```
<div class="row">
  <form class="form-horizontal">
    <div class="span6">
      <fieldset>
      <legend>Legend text</legend>
      <div class="control-group">
        <label class="control-label" for="input01">Text input</label>
        <div class="controls">
          <input type="text" class="input-xlarge" id="input01">
          <p class="help-block">Supporting help text</p>
        </div>
      </div>
      </fieldset>
    </div>
    <div class="span6">
      <fieldset>
        <legend>Legend text</legend>
        <div class="control-group">
          <label class="control-label" for="input01">Text input</label>
          <div class="controls">
            <input type="text" class="input-xlarge" id="input01">
            <p class="help-block">Supporting help text</p>
          </div>
        </div>
      </fieldset>
    </div>
  </form>
</div> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-27T21:18:44.920

```
<div class="row">
    <div class="span12">
        <div class="row-fluid">
            <div class="span6">
                <label>First Name</label>
                <input type="text" class="span12" placeholder="">
            </div>
            <div class="span6">
                <label>Last Name</label>
                <input type="text" class="span12" placeholder="Type something…">
            </div>
        </div>
    </div>
</div> 
```

示例：http: [//jsfiddle.net/JJnDg/460/](http://jsfiddle.net/JJnDg/460/)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-02-19T10:10:28.107

**Bootstrap 3 中的 2 列：**

[http://jsfiddle.net/52VtD/10419/](http://jsfiddle.net/52VtD/10419/)

```
<div class="container">
    <div class="row">
        <form action="#">
            <div class="col-xs-6">
                <div class="form-group">
                    <label for="firstname">Firstname</label>
                    <input type="text" class="form-control" id="firstname" placeholder="Firstname">
                </div>
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" class="form-control" id="email" placeholder="example@domain.com">
                </div>
                <button type="submit" class="btn btn-default">Submit</button>
            </div>
            <div class="col-xs-6">
                <div class="form-group">
                    <label for="lastname">Last Name</label>
                    <input type="text" class="form-control" id="lastname" placeholder="Last Name">
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" class="form-control" id="password" placeholder="Password">
                </div>
            </div>
        </form>
    </div>
</div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-14T14:05:22.997

使用 Bootstrap3 的示例两列

```
 <div class="row">
            <label>Date</label>
            <div class="row">
                <div class="col-xs-7" style=" padding: 0px 2px 2px 1px;">
                    <input type="date" class="form-control col-xs-12">
                </div>
                <div class="col-xs-5" style="padding: 0px 1px 2px 1px;">
                    <input type="time" class="form-control col-xs-12">
                </div>
            </div>
        </div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-20T03:48:42.080

我用过这个，效果很好..它对引导程序有响应

```
 <div class="row-fluid">
   <div class="span12">
    <form action="" class="form-horizontal" name="user_account_add" id="user_account_add" method="post">
      <div class="span12">
        <div class="well clearfix">
         <fieldset>
          <div class="span5">
           <legend>Business Info</legend>
            <input type="hidden" name="action"  value="save" />
             <div class="control-group">
               <label class="control-label">Business Name:  </label>
               <div class="controls">
                <input type="text" class="input-xlarge"  name="business_name"  id="business_name">
               </div>
             </div>
             <legend>Owner Info</legend>
             <div class="control-group">
               <label class="control-label">Firstname: </label>
               <div class="controls">
                <input type="text" class="input-xlarge" name="fname" id="owners_name">
               </div>
             </div>
             <div class="control-group">
              <label class="control-label">Lastname: </label>
              <div class="controls">
               <input type="text" class="input-xlarge" name="Lname" id="owners_name">
              </div>
             </div>
         </div>
         <div class="span7">
          <legend>Business Operation Location</legend>
          <div class="control-group">
           <label class="control-label">Street Address</label>
           <div class="controls">
             <input type="text" class="input-xlarge"  name="address" id="address" >
           </div>
          </div>
          <div class="control-group">
           <label class="control-label">City</label>
           <div class="controls">
            <input type="text" class="span3"  name="city" id="city">
           </div>
          </div>
          <div class="control-group">
            <label class="control-label">State</label>
            <div class="controls">
             <input type="text" class="span3"  name="state" id="state">
            </div>
          </div>
          <div class="control-group">
           <label class="control-label">Zip</label>
           <div class="controls">
            <input type="text" class="span3"  name="zip" id="zip">
           </div>
          </div>
        </div>
        </fieldset>
                <button class="btn btn-primary">Submit</button>
                <button class="btn">Clear</button>
              </div>
             </div>
         </form>
     </div>
  </div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-25T03:58:58.133

```
<div class="row-fluid">
<form id="myForm" modelAttribute="mymodel">
    <div class="span12">
        <div class="well clearfix">
            <div class="span5">
                <legend>Text1</legend>          
                    <table width="100%" align="center">
                        <tr>
                            <td>
                                <label for="lable1">Label1 *</label>
                            </td>
                            <td>        
                                <input id="input1" class="input-xlarge"/>
                            </td>                       
                        </tr>           
                        <tr>
                            <td>
                                <label for="lable2">Label2 *</label>
                            </td>
                            <td>        
                                <input id="input2" class="input-xlarge"/>
                            </td>                       
                        </tr>
                        <tr>
                                <td colspan=2 align="center">
                                    <button class="btn btn-primary" type="submit">Submit</button>
                                    <button class="btn" type="reset" id="resetButton">Reset</button>
                                </td>
                        </tr>
                    </table>
            </div>
            <div class="span5 offset1">
                <legend>Text2</legend>                 
            </div>
        </div>
    </div>
</form> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-12T07:09:14.027

我使用以下

```
 <form class="no-margin" >
      <fieldset>
          <div class="form-group no-margin">
              <div class="row-fluid">
                  <div class="form-group col-sm-6 no-margin"> Input 1 <div>
                  <div class="form-group col-sm-6 no-margin"> Input 2 <div>
              </div>
          </div>
      <fieldset>
  </form> 
```

# java - 复选框和 Textview 与空白对齐

> ID：10445190
> 
> 赞同：0
> 
> 时间：2012-05-04T08:18:47.983
> 
> 标签：java, android, xml

我的 XML 布局有问题。如下图所示，文本视图位于复选框旁边（不包括任何`android:text`字段。如何删除我用蓝色下划线的空间？

![在此处输入图像描述](../Images/554265be7b47369845811dba31703a74.png)

代码：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/bDisinstalla"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginTop="5dp"
        android:text="@string/disinstalla"
        android:textColor="#FF0000"
        android:textSize="26dp" />

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:fadeScrollbars="true" >

        <TableLayout
            android:id="@+id/tableLayout1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <CheckBox
                android:id="@+id/cbAbilitaServizio"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/abilita_servizio" >
            </CheckBox>

            <CheckBox
                android:id="@+id/cbSpegniSchermo"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/spegni_schermo" >
            </CheckBox>

            <CheckBox
                android:id="@+id/cbLandscape"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/landscape" >
            </CheckBox>

            <Button
                android:id="@+id/bCalibrazione"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:text="@string/calibrazione" /> 
```

有问题的代码：

```
 <!-- BELOW THERE IS THE PROBLEMATICCODE -->
            <!-- BELOW THERE IS THE PROBLEMATICCODE -->
            <!-- BELOW THERE IS THE PROBLEMATICCODE -->
            <!-- BELOW THERE IS THE PROBLEMATICCODE -->

            <TableRow
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="10dp"
                android:background="@drawable/ripetisfondo"
                android:padding="1dp" >

                <CheckBox
                    android:id="@+id/checkBox1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="#000000" />

                <TextView
                    android:id="@+id/textView1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:shadowColor="#000000"
                    android:shadowDx="1"
                    android:shadowDy="1"
                    android:shadowRadius="2"
                    android:text="@string/titolo1"
                    android:textColor="#FFFFFF"
                    android:textSize="15dp"
                    android:textStyle="bold" />
            </TableRow>
            <!-- TITOLO   TITOLO   TITOLO   TITOLO   TITOLO   TITOLO   TITOLO --> 
```

其余代码：

```
 <!-- TITOLO   TITOLO   TITOLO   TITOLO   TITOLO   TITOLO   TITOLO -->

            <TableRow
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="#33b5e5"
                android:padding="1dp" >
            </TableRow>

            <TableRow
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="#555555"
                android:padding="1dp" >

                <TextView
                    android:id="@+id/textView1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="10dp"
                    android:text="@string/impostazioni_5"
                    android:textSize="15dp"
                    android:textStyle="bold" />
            </TableRow>
            <!-- TITOLO   TITOLO   TITOLO   TITOLO   TITOLO   TITOLO   TITOLO -->

            <SeekBar
                android:id="@+id/sbNumeroPassate"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginLeft="10dp"
                android:layout_marginRight="10dp" />

            <LinearLayout>

                <TextView
                    android:id="@+id/tvMilliseconds"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="10dp"
                    android:layout_marginRight="10dp"
                    android:text="@string/impostazioni_1a" />

                <TextView
                    android:id="@+id/tvCurrentWaves"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="10dp"
                    android:layout_marginRight="10dp"
                    android:text="@string/impostazioni_current" />
            </LinearLayout>

            <LinearLayout>

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="10dp"
                    android:layout_marginRight="10dp"
                    android:text="@string/impostazioni_2a" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="10dp"
                    android:layout_marginRight="10dp"
                    android:text="@string/impostazioni_4a" />
            </LinearLayout>

            <!-- TITOLO   TITOLO   TITOLO   TITOLO   TITOLO   TITOLO   TITOLO -->

            <TableRow
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="#33b5e5"
                android:padding="1dp" >
            </TableRow>

            <TableRow
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="#555555"
                android:padding="1dp" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="10dp"
                    android:text="@string/impostazioni_6"
                    android:textSize="15dp"
                    android:textStyle="bold" />
            </TableRow>
            <!-- TITOLO   TITOLO   TITOLO   TITOLO   TITOLO   TITOLO   TITOLO -->

            <SeekBar
                android:id="@+id/sbMillisecTraPassate"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginLeft="10dp"
                android:layout_marginRight="10dp" />

            <LinearLayout>

                <TextView
                    android:id="@+id/tvMilliseconds"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="10dp"
                    android:layout_marginRight="10dp"
                    android:text="@string/impostazioni_1b" />

                <TextView
                    android:id="@+id/tvCurrentInterval"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="10dp"
                    android:layout_marginRight="10dp"
                    android:text="@string/impostazioni_current" />
            </LinearLayout>

            <LinearLayout>

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="10dp"
                    android:layout_marginRight="10dp"
                    android:text="@string/impostazioni_2b" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="10dp"
                    android:layout_marginRight="10dp"
                    android:text="@string/impostazioni_4b" />
            </LinearLayout>

            <!-- TITOLO   TITOLO   TITOLO   TITOLO   TITOLO   TITOLO   TITOLO -->

            <TableRow
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="#33b5e5"
                android:padding="1dp" >
            </TableRow>

            <TableRow
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="#555555"
                android:padding="1dp" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="10dp"
                    android:text="@string/impostazioni_7"
                    android:textSize="15dp"
                    android:textStyle="bold" />
            </TableRow>
            <!-- TITOLO   TITOLO   TITOLO   TITOLO   TITOLO   TITOLO   TITOLO -->

            <LinearLayout>

                <TextView
                    android:id="@+id/tvAccensioni"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="10dp"
                    android:layout_marginRight="10dp"
                    android:text="@string/statistica_1" />

                <TextView
                    android:id="@+id/tvSpegnimenti"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="10dp"
                    android:layout_marginRight="10dp"
                    android:text="@string/statistica_2" />
            </LinearLayout>

            <LinearLayout>

                <TextView
                    android:id="@+id/tvPotenzaUsata"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="10dp"
                    android:layout_marginRight="10dp"
                    android:text="@string/statistica_3" />

                <TextView
                    android:id="@+id/tvBottoneSalvato"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="10dp"
                    android:layout_marginRight="10dp"
                    android:text="@string/statistica_4" />
            </LinearLayout>

            <Button
                android:id="@+id/bSalva"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:layout_marginTop="10dp"
                android:text="@string/impostazioni_salva" />
        </TableLayout>
    </ScrollView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T09:49:14.400

与其使用单独的 TextView 来显示 String 为什么不使用 Checkbox 的 text 属性？

```
 <CheckBox
                android:id="@+id/checkBox1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="#000000"
                android:shadowColor="#000000"
                android:shadowDx="1"
                android:shadowDy="1"
                android:shadowRadius="2"
                android:text="@string/titolo1"
                android:textColor="#FFFFFF"
                android:textSize="15dp"
                android:textStyle="bold" /> 
```

# sql - 估计运行 SQL 查询的时间

> ID：10445192
> 
> 赞同：1
> 
> 时间：2012-05-04T08:19:01.723
> 
> 标签：sql

我有一个 SQL 查询来从带有一些连接的表中选择记录。该表包含数百万条记录。

如何估计在执行 SQL 查询之前运行它的时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:29:56.980

使用“top 10”运行查询，然后是“top 100”，然后是“top 1000”，依此类推。一旦达到大约需要 10 秒的水平，您就可以划分以获得估计的每秒行数。

您应该从中了解运行所有行需要多长时间。

# java - 如何在 Java 中高效地在机器之间传输对象

> ID：10445194
> 
> 赞同：4
> 
> 时间：2012-05-04T08:19:05.220
> 
> 标签：java, serialization

我有 2 个 JVM 正在运行，我正在从第一个复制很多对象到第二个，但不是一次全部复制。*对象图有很多交叉点，所以如果有一种方法可以只发送对象图的缺失*部分，那就太好了。我知道我曾经偶然发现了一个为此而设计的框架，但我不记得这个名字了。你会推荐什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T08:51:25.553

不确定是否有专门用于此目的的自定义框架，但您有几个其他选项可以将 Java 对象从一个 JVM 传输到另一个。他们之中有一些是：

1.  [协议缓冲区](http://code.google.com/apis/protocolbuffers/docs/javatutorial.html)

2.  [管理系统](http://en.wikipedia.org/wiki/Java_Message_Service)

3.  [基于简单套接字的客户端/服务器 Java](http://download.oracle.com/javase/tutorial/networking/sockets/clientServer.html)

4.  [节约](http://wiki.apache.org/thrift/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T08:23:36.993

您需要设法检测上次发送的数据集的更改并发送指令或如何将复制的数据更改为相同。

一个简单的方法是记录原始文件发生的每一个变化（使用支持这个的接口）

您可以将相同的更改推送到第二个实例并“重放”它们以获得相同的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-24T08:38:27.870

你可以试试kryonet。它是一个简单但高效的 Java TCP 和 UDP 客户端/服务器库。

[https://code.google.com/p/kryonet/](https://code.google.com/p/kryonet/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T08:32:49.197

您可以使用 Java 远程方法调用 (RMI)。它提供远程调用和将可序列化对象传输到另一台机器。当然，您需要一些代码来比较对象图，这可以通过计算对象图某些部分的一种哈希并调用远程对象来比较远程图与该哈希来完成。

# jakarta-ee - 枚举字段的 JSR-303 Bean 验证

> ID：10445197
> 
> 赞同：14
> 
> 时间：2012-05-04T08:19:28.340
> 
> 标签：jakarta-ee, java-ee-6, bean-validation

我有一个带`enum`字段的简单 bean

```
public class TestBean{
   @Pattern(regexp = "A|B") //does not work
   private TestEnum testField;
   //getters + setters
}

enum TestEnum{
  A, B, C, D
} 
```

我想`testField`使用 Bean Validation 进行验证。具体来说，我想确保只允许 A 和 B 值（对于特定的校准组）。似乎没有处理枚举 JSR 303（我试图使用 @Pattern 验证器）或者我以错误的方式做某事。

我得到了例外：

```
javax.validation.UnexpectedTypeException: No validator could be found for type: packagename.TestEnum 
```

有没有办法在不编写自定义验证器的情况下验证枚举字段？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-19T22:36:13.423

由于某些原因不支持枚举，因此可以通过简单的基于字符串的验证器来简单地处理此限制。

**验证器：**

```
/**
 * Validates a given object's String representation to match one of the provided
 * values.
 */
public class ValueValidator implements ConstraintValidator<Value, Object>
{
    /**
     * String array of possible enum values
     */
    private String[] values;

    @Override
    public void initialize(final Value constraintAnnotation)
    {
        this.values = constraintAnnotation.values();
    }

    @Override
    public boolean isValid(final Object value, final ConstraintValidatorContext context)
    {
        return ArrayUtils.contains(this.values, value == null ? null : value.toString());
    }
} 
```

**界面：**

```
@Target(value =
{
    ElementType.METHOD, ElementType.FIELD, ElementType.ANNOTATION_TYPE, ElementType.CONSTRUCTOR, ElementType.PARAMETER
})
@Retention(RetentionPolicy.RUNTIME)
@Constraint(validatedBy =
{
    ValueValidator.class
})
@Documented
public @interface Value
{
    public String message() default "{package.Value.message}";

    Class<?>[] groups() default
    {};

    Class<? extends Payload>[] payload() default
    {};

    public String[] values() default
    {};
} 
```

*Validator 使用 apache 公共库。高级强制类型方法将进一步增强此验证器的灵活性。*

另一种方法可以使用单个字符串属性而不是数组并按分隔符拆分。这也可以很好地打印错误消息的值，因为没有打印数组，但是使用处理空值可能是一个问题`String.valueOf(...)`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-04T14:00:12.147

如果要将约束放在*testField*上，则需要自定义验证器。没有一个默认的处理枚举。

作为一种解决方法，您可以添加一个 getter 方法，该方法返回枚举的字符串值

```
public class TestBean{
   private TestEnum testField;
   //getters + setters

   @Pattern(regexp = "A|B") //does not work
   private String getTestFieldName() {
       return testField.name();
   }
} 
```

不过，自定义验证器可能是更清洁的解决方案。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-09-20T20:42:50.860

我想分享我的工作解决方案：

```
@Documented
@Constraint(validatedBy = { EnumValueValidator.class })
@Retention(RetentionPolicy.RUNTIME)

@Target({ 
    ElementType.ANNOTATION_TYPE, 
    ElementType.CONSTRUCTOR,
    ElementType.FIELD, 
    ElementType.METHOD, 
    ElementType.PARAMETER 
})

public @interface EnumValue
{
    public abstract String                             message() default "{validation.enum.message}";

    public abstract Class<?>[]                         groups()  default {};

    public abstract Class<? extends Payload>[]         payload() default {};

    public abstract Class<? extends java.lang.Enum<?>> enumClass();
}

public class EnumValueValidator implements ConstraintValidator<EnumValue, Object>
{
    private Object[] enumValues;

    @Override
    public void initialize(final EnumValue annotation)
    {
        enumValues = annotation.enumClass().getEnumConstants();
    }

    @Override
    public boolean isValid(final Object value, final ConstraintValidatorContext context)
    {
        if (null != value) {
            String contextValue = value.toString();

            for (Object enumValue : enumValues) {
                if (enumValue.toString().equals(contextValue)) {
                    return true;
                }
            }
        }

        return false;
    } 
```

# java - 更换 。如果 . 没有被数字包围，则将 \" 放在每一侧的字符串周围

> ID：10445198
> 
> 赞同：0
> 
> 时间：2012-05-04T08:19:28.337
> 
> 标签：java

我有一个像这样的字符串：

`"This is my abc.def ght.123 example 12.34 test"`

我想改为：

`"This is my \"abc def\" \"ght 123\" example 12.34 test"`

如何在java中使用正则表达式？谢谢伊萨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:26:24.467

如果只有一个点序列，例如`abc.def`或`ght.123`尝试以下操作：

```
String input = "This is my abc.def ght.123 example 12.34 test";

input = input.replaceAll("\\b([a-zA-Z]+)\\.([a-zA-Z0-9]+)\\b", "\\\"$1 $2\\\"");

System.out.println( input );
//output: This is my "abc def" "ght 123" example 12.34 test 
```

使用的表达式是指：任何字符序列后跟一个点和一个字符或数字序列（这`\b`是防止匹配的单词边界 ( `_abc.def`，如果你也想要它们，你可以将下划线添加到字符类或删除`\b`）。

然后替换将用`\"$1 $2\"`where `$1`is the content of the first group`([a-zA-Z]+)`和`$2`is the content of the second group替换匹配项`([a-zA-Z0-9]+)`。

*更新*：

对于所需的输入`"This is my complexe string 12.34 ab.cd a+-.12 34.0+b zer.123.456 or 12.34.56 etc"`（参见注释），可以使用以下表达式：

```
(?i)(?<=^|\s)([a-z\+\-]+)\.([a-z0-9\+\-]+)(?=\s|$) 
```

这里`(?i)`的意思是表达式应该不区分大小写，`(?<=^|\s)`如果我们在字符串的开头或空格之后`(?=\s|$)`表示匹配，如果后面是空格或字符串的结尾则表示匹配。

核心表情依旧`([a-z\+\-]+)\.([a-z0-9\+\-]+)`。如您所见，我只在字符类中添加了`+`and `-`（请注意，可以写成`-`not`\-`但减号的含义将取决于它在字符类中的位置）。如果要支持更多字符，请根据需要将它们添加到字符类中。有关预定义字符类的更多信息，`\d`请`p{L}`参见[此处](http://www.regular-expressions.info/reference.html)和[此处](http://www.regular-expressions.info/unicode.html)。

# linux - 如何在不使用 crontab 的情况下在后台连续运行 unix 脚本。

> ID：10445201
> 
> 赞同：0
> 
> 时间：2012-05-04T08:19:42.130
> 
> 标签：linux, unix, solaris

如何在不使用 crontab 的情况下在后台连续运行脚本。即使在我注销后脚本也应该运行，并且如果它在系统重新启动后没有启动是可以接受的。我是 unix 新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T08:22:59.840

有几种方法可以做到这一点，但最简洁的方法是使用[screen](http://www.slac.stanford.edu/grp/cd/soft/epics/extensions/iocConsole/screen.1.html)。这使您可以创建一个永久存在于机器上的会话，您可以简单地重新连接以检查长期运行过程的进度。

如果您不想使用`screen`，可以使用`nohup`它来运行以下任务：

`nohup mytask &`

您的任务现在将在后台运行，并且将在注销后继续存在，但是与`screen`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T09:56:41.417

```
if [ "x$1" != "x--" ]; then
$0 -- 1> /dev/null 2> /dev/null &
exit 0
fi 
```

这就是您可以将脚本作为**守护进程**运行的方式。首先，您的脚本（父亲）将创建他自己（孩子）的副本，因此它被视为父亲的过程。然后父亲在孩子还在奔跑的时候自杀了。猜猜当你做这样的事情时会发生什么？子进程附加到 init 进程。因此，即使您注销，脚本仍然会运行。您甚至可以在没有“&”运算符的情况下启动它，因为您启动的父亲会在一毫秒后被杀死。
您可以再次控制它，就像在您的计算机上运行的任何程序一样。

顺便说一句，它不是一个真正的“守护进程”程序，它只是一种模拟。如果你想在登录时启动它，你不能只在启动时启动它（我的意思是真正的启动而不是登录），很简单把它放在你的`.xinitrc`

此解决方案的主要优点是您的脚本不依赖于任何其他程序，例如“nohup”，我认为这真的很糟糕。

问候
PS：如果您想了解有关上述命令的作用的一些信息，请问我。这只是一个“参数”的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T11:25:44.090

正如其他人之前提到的，您需要使用 nohup 来防止进程获得挂断信号（因此 no-h-up）。

但是，如果您在后台启动该进程以开始，如

```
prompt> nohup process & 
```

这样做的缺点是不允许您输入启动该过程可能需要的任何数据。这可能是密码/凭证或过程需要的其他输入。

如果您有此要求，请在末尾不带“&”的情况下启动它，输入您的输入，然后按 Ctrl-Z 使进程进入睡眠状态。要将其发送到后台，请在提示符处键入“bg”并按 Enter。

```
prompt> nohup process
Enter password:
(Now press Ctrl-Z)
[1]+  Stopped                 process
prompt> bg
[1]+ process & 
```

现在，即使您注销，该进程也将继续在后台运行。

或者，如果您使用的是 bash 或 zsh，如果您没有使用 nohup 启动该进程，并且无法杀死它并重新启动，那么您可以使用内置的 disown 命令。首先暂停和后台进程。然后阻止挂断信号到达它。

```
prompt> process
Enter password:
(Now press Ctrl-Z)
[1]+  Stopped                 process
prompt> bg
[1]+ process &
prompt> disown -h 
```

注意：如果您正在运行其他后台作业，则需要提供作业规范以仅拒绝此特定作业。

```
prompt> disown -h %1 
```

如果您在暂停并将进程发送到后台时看到 [2]，而不是 [1]，您会说`disown -h %2`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T08:27:18.973

除了在后台启动它，如上所述，您可能需要使用“nohup”。这意味着即使您关闭终端，它也会继续运行。

nohup ./abc.sh &

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-04T08:22:20.540

使用 & 运算符在后台启动它，例如

./abc.sh & 这将一直持续到 (a) 执行完成或 (b) 你杀死它或 (c) 系统重新启动

# javascript - 获取父母 带有 jQ uery 的项目

> ID：10445205
> 
> 赞同：9
> 
> 时间：2012-05-04T08:19:50.107
> 
> 标签：javascript, jquery, html, jquery-selectors, treeview

`<li>`当我单击特定`<li>`项目时，我正在尝试获取父级。

[http://jsfiddle.net/doonot/GjbZk/](http://jsfiddle.net/doonot/GjbZk/)

所以假设我点击`submodule 1`，我得到了点击的 ID，我现在如何获得在这种情况下`$(this).attr('id');` 的父 ID ？`<li>``module 1`

请注意，我的树很大，所以它必须灵活。

非常感谢，非常感谢您的回答。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-04T08:23:42.333

您可以使用该[`closest`](http://api.jquery.com/closest/)方法获取与选择器匹配的第一个祖先：

```
var li = $(this).closest("li"); 
```

来自 jQuery 文档：

> 获取与选择器匹配的第一个元素，从当前元素开始，向上遍历 DOM 树。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-04T08:30:16.170

```
var parentModule = $('this')             //the selector of your span
    .parents('li:eq(1)')                 //get the next li parent, not the direct li
    .children('.rightclickarea:first')   //get the first element, which would be the span
    .attr('id')                          //get the span id 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-04T08:23:53.490

```
var parent = $(this).closest("li"); 
```

# matlab - 将矩阵划分为比标量值输入更高和更低的值

> ID：10445209
> 
> 赞同：1
> 
> 时间：2012-05-04T08:20:01.883
> 
> 标签：matlab, sorting, matrix, sum, divide

因为我是这种编程语言的新手，所以我在 matlab 中遇到了一些问题。好的，这里是：

我有`Matrix`并且我已经对它进行了升序排序，例如：

```
1
1
1
3
4
4
4
5
6
6
7
7
9
9
9
9
9 
```

它只有 1 列矩阵。我想用一些标量值将矩阵分成两组。我是否选择 5 作为标量，所以我的矩阵将分为高于 5 和低于 5 的两组：

预期结果 ：

下矩阵：

```
1
1
1
3
4
4
4
5 
```

高级矩阵：

```
6
6
7
7
9
9
9
9
9 
```

我曾尝试使用`max`and`min`命令，但此命令保持矩阵大小并将所有低于标量 (5) 的数字替换为 5。这是一个问题，因为下一步我想对每个较低和较高的矩阵求和。

你能给我一些技巧吗？非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T08:24:48.857

您可以使用逻辑寻址来执行此操作：

```
LowValuesMatrix = Matrix(Matrix <= 5);
HighValuesMatrix = Matrix(Matrix > 5);

LowValuesMatrix =
 1
 1
 1
 3
 4
 4
 4
 5

HighValuesMatrix =
 6
 6
 7
 7
 9
 9
 9
 9
 9 
```

# javascript - 如何选择具有取决于 javascript 变量的 id 的行？

> ID：10445210
> 
> 赞同：2
> 
> 时间：2012-05-04T08:20:07.343
> 
> 标签：javascript, jquery

我与`id="row_4"`

我有`rownum`一个值为 4的 javascript 变量

如何使用 jQuery 选择这个元素？我试过了

`$('#row_' + rownum)`

但这似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T08:41:20.387

如果您没有收到任何错误，那么您可以在页面加载之前调用（如 alnitak 所暗示的）尝试放入 doucment.ready() 函数。

像这样。

```
 $(document).ready(function(){
   alert($('#row_' + rownum).text());
}); 
```

# google-apps-script - 使用 Google Apps 脚本的 Tasks API（完成任务）

> ID：10445212
> 
> 赞同：1
> 
> 时间：2012-05-04T08:20:10.493
> 
> 标签：google-apps-script, google-tasks-api, google-tasks

我正在尝试使用 Tasks API 将任务的状态设置为已完成。它表明代码已成功完成，但任务未标记为已完成。此外，当我尝试在更新后获取任务的状态时，它显示状态为“needsAction”。这是我的代码

```
function setTaskStatus(){
  // Suppose a task with name "MyTaskListName" is contained
  //within task list with name "MyTaskName"

  var tasklist = Tasks.Tasklists.list().getItems();
  var title = 'MyTaskListName';
  var id;
  for(var i in tasklist){
    if(title == tasklist[i].getTitle()){
      id = tasklist[i].getId();
    }
  }

  //Get the task list items
  var tasks = Tasks.Tasks.list(id).getItems();
  for(var i in tasks){
    if(tasks[i].getTitle() == 'MyTaskName'){
      tasks[i].setStatus("completed");// set status completed
      Logger.log(tasks[i].getStatus());// this shows that the task has completed
      //But it does not reflect actually
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T03:31:05.620

我需要添加该行

> Tasks.Tasks.update(tasks[i], tasklistId, tasks[i].getId());

# php - PHP：对 MD5 散列的输入字符串的长度有任何实际限制吗？

> ID：10445213
> 
> 赞同：1
> 
> 时间：2012-05-04T08:20:14.783
> 
> 标签：php, hash, md5

我正在使用 PHP+MySQL 在数据库中存储一些密码

我意识到 MD5 不是存储密码的安全方法，但现在我使用它主要是为了确保无论密码的长度如何，都可以轻松地将其存储在数据库中。

为此，我使用 PHP 对密码进行哈希处理并将其存储在数据库中。

我可以使用这种方式存储的密码长度是否有任何实际限制？

（安全性在这里并不重要，我使用散列只是为了方便）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T08:22:43.223

不，您不必限制长度。PHP 已经包含对最大请求大小的一些安全检查，以避免恶意用户填满您的内存。

但正如您所提到的：MD5 不接受散列密码。**除非您将其与盐**一起使用，否则任何其他散列算法都不是！

# jquery - jQuery ajaxStop() 递增并触发多次

> ID：10445216
> 
> 赞同：0
> 
> 时间：2012-05-04T08:20:22.287
> 
> 标签：jquery, ajax, post

在发布此内容之前，我已经阅读了大量内容，并尽我所能让它发挥作用。所以基本上我正在尝试使用 ajaxStop() 作为一种钩子来完成所有其他 jQuery ajax 请求之后的操作，这样我就可以对其进行操作和添加更多内容。

但似乎当我确实使用 ajaxStop() 时，它似乎多次执行我在请求中添加的附加内容......

现在经过一些试验和错误。我了解到这是因为在我的 ajaxStop() 函数中，一旦单击某些内容，我将调用另一个 ajax 帖子来获取数据，以填充弹出窗口。我需要在加载所有其他 ajax 后注册此单击事件处理程序...因为如果我将其从 ajaxStop() 方法中取出，多重性错误就会消失，但如果我通过 ajax 刷新内容而不是单击事件不会' t 注册了。我很可能会解决这个错误，但可以使用一些帮助。时间不早了，我的脑子很痛，所以明天我会重新审视它。

```
jQuery('.content').one('ajaxStop', function() {

 setInterval(doPopUpOptionsMenu , 1000);
 return false;

 }); 
```

doPopUpOptionsMenu 内部是另一个 ajax 调用，用于获取选项弹出的内容。

```
 function doPopUpOptionsMenu() {
 jQuery(".activity-popUpMenu").one('click',function(e) {
 var activityId = jQuery(this).parent().attr('id').split('-');
 //code to grab options and show the user the Options box.

   jQuery("#optionsPopUpContainer").css({'display': 'block', 'position' :'absolute',   'top' : e.pageY , 'left' : e.pageX});
var myAjaxURL = "example.com";
  var jqxhr = jQuery.post(myAjaxURL, { menuOptions : true, id : activityId[1] } ,     function($response) {
 jQuery("#optionsPopUpContainer").html($response);
})
.success(function() { alert("second success"); })
.error(function() { alert("error"); })
.complete(function() { alert("complete"); });

 });
 jQuery(".activity_update").hover(
 function(){
 jQuery(this).children('.activity-popUpMenu').addClass('activated');

 } ,
function() {
 jQuery(this).children('.activity-popUpMenu').removeClass('activated');
 //jQuery(".activity-popUpMenu").unbind('click');
  });

 } 
```

现在，第一次单击时会弹出两次警报，一次成功，一次完成。然后我再次单击弹出选项，它会弹出四个警报，而不是 8 个比 16 个，并不断增加一倍的弹出窗口。就像我说的那样，我想这是由于 ajaxStop 调用中的 ajax 造成的，但我怎样才能绕过它或做一些更好的事情......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:19:37.970

我偶然发现这篇文章正在寻找答案，因为我遇到了类似的问题。对于我的情况，我`.load()`用来将各种文件加载到我的页面中。当我使用 Vic 的示例时`$(document).ajaxComplete(function(){ //my function });`，我的函数实际上最终运行了 5 次。我有 5 个 .load() 请求。所以在我看来，`.ajaxComplete()`每次请求后都会运行该函数。

对于我的解决方案，我使用...

```
$(document).ajaxStop(function () {
   //my function

}); 
```

它运行了一次函数，这就是我想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:03:33.333

如果您在队列中跟踪 AJAX 请求，您将能够检查在 $.ajaxStop 触发之前发出的实际请求。问题是您必须在 AJAX 调用上放置一个 doNotQueue 属性，这样您就可以将选定的调用排除在队列跟踪之外。

如果您在 $.ajaxSend 中使用 jqXHR 对象，这实际上并不太难。这是一些示例咖啡脚本代码，应该可以帮助您：

```
$.xhrPool = []
# When sent, all ajax requests get pushed into the XHR pool so we can abort/access
# them if necessary.
$(document).ajaxSend((event, xhr, ajaxOptions) ->
  unless ajaxOptions.doNotQueue
    $.xhrPool.push(xhr)
)

# Whenever an ajax call completes, remove it from the queue and then perform the
# desired operation if the queue is empty.
$(document).ajaxComplete((event, xhr, ajaxOptions) ->
  index = $.xhrPool.indexOf(xhr)

  # If this is a request being tracked by the queue, remove it from the queue
  if index > -1
    $.xhrPool.splice(index, 1)

    # If the queue is now empty then all ongoing AJAX calls we want to track 
    # have finished.
    if $.xhrPool.length == 0
      # Perform your desired action here, but make sure that if you make an AJAX
      # call you include the doNotQueue property. Note that this will fire every
      # time your queue runs out, so if you want to do something only once globally,
      # you'll have to keep track of that yourself.
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-12T10:38:33.860

确保该*`async`*属性未设置为`false`.

...我一直忽略的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T08:25:22.317

如果您想在文档中的所有 ajax 调用完成后使用某些东西，请使用 $(document).ajaxComplete(function(){handler}); 这可能不是最好的方法，但如果你想听所有 ajax 完成，它确实工作得很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-15T17:44:51.777

我有一个类似的问题。我所有的 ajax 请求都执行了 ajaxStop 中的代码。我在页面加载时有一些 ajax 请求来构建内容，这些应该是唯一使用 ajaxStop 调用的请求。我找到的解决方案是取消绑定 ajaxStop 函数，使其只运行一次。

```
$(document).ajaxStop(function() {
    customFunction();       
    $(document).unbind("ajaxStop");
}); 
```

# c# - MVC 4 在 aspx 文件中集成 jQuery DatePicker

> ID：10445219
> 
> 赞同：0
> 
> 时间：2012-05-04T08:20:29.227
> 
> 标签：c#, jquery, asp.net, asp.net-mvc, datepicker

我正在使用 aspx 文件，因为我的 ReportViewer 控件和来自 asp:TextBox 的 jQuery datepicker 没有弹出。

如何在 TextBox 中显示 DatePicker ？

```
<form id="form1" runat="server">
    <div>
        <asp:DropDownList ID="DropDownListAgenti" runat="server" DataTextField="nume" DataValueField="id_agent" DataSourceID="EntityDataSourceHelios" />                     
        From  <asp:TextBox ID="TextBoxFrom" Width="80"  runat="server"></asp:TextBox>
        To    <asp:TextBox ID="TextBoxTo" Width="80" runat="server"></asp:TextBox>

        <asp:Button ID="Display" runat="server" onclick="Display_Click" Text="Display" />

        <rsweb:ReportViewer ID="ReportViewerAgentvanz" runat="server" Font-Names="Verdana" Font-Size="8pt" Width="800px" Height="800px"  InteractiveDeviceInfos="(Collection)"   />
        <asp:ScriptManager ID="ScriptManagerAgentvanz" runat="server" />

        <asp:EntityDataSource ID="EntityDataSourceHelios" runat="server" EnableFlattening="False" 
            ConnectionString="name=HeliosEntities" DefaultContainerName="HeliosEntities" EntitySetName="agenti"
            Select="it.[id_agent], it.[nume]" OrderBy="it.nume ASC" Where="it.active = TRUE">
        </asp:EntityDataSource>        
    </div>
</form> 
```

其他解决方法 - 我可以在剃须刀页面 (*.cshtml) 中显示 rdlc 报告查看器吗？

我有 jQuery 1.7.2、Nuget 1.7，对于我的剃刀文本框，我有一个编辑器模板

编辑：链接到 html 文件：[单击](http://www.arhimedes.ro/misi/VanzariForm.zip)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T08:36:37.920

要在文本框中显示 jquery datepicker，只需执行以下操作：

```
$(function () {
    $("#TextBoxTo").datepicker();
    $("#TextBoxFrom").datepicker();
}); 
```

现在，您关于在剃刀页面中查看报告的问题，恐怕这是不可能的。为了查看报告，您需要`ReportViewer`控件（已在代码中使用），并且不能在 Razor 中使用 ASP.NET 控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T09:31:19.937

您没有包含 JQuery 库、JQueryUI 库或 JQueryUI CSS 文件。

将此添加到`<head>`您的文档中：

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.8.20/themes/base/jquery-ui.css" type="text/css" media="all" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script src="http://code.jquery.com/ui/1.8.20/jquery-ui.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T05:22:22.807

您没有包含 JQuery 库、JQueryUI 库或 JQueryUI CSS 文件。

将此添加到您的文档中：

# c# - MVC3 中的 Ninject 会话范围概念

> ID：10445221
> 
> 赞同：8
> 
> 时间：2012-05-04T08:20:33.757
> 
> 标签：c#, asp.net-mvc, ninject

我正在使用 Ninject 框架构建一个 MVC3 应用程序。我有一个初始化耗时的服务，最后这个服务将有一个包含用户特定信息的对象，然后只要用户会话处于活动状态，我就需要重新使用该服务，这样我可以避免一次又一次地初始化那个服务

所以我的问题是

当我使用 Ninject 绑定服务时，我应该选择什么样的范围，Ninject 中没有每个范围的会话，那么实现需求的最佳方法是什么？还是我走错了方向？

我为我的一项服务创建了一个自定义提供程序，它将根据从当前 Controller.User.Identity.Name 获取的用户名详细信息创建服务。下面的代码将不起作用，因为缺少 userName 局部变量，如何通过 Ninject 将用户名值传递给我的自定义提供程序，以便我可以从 IContext 中获取它？

```
public class TfsConnectionManagerProvider : Provider<TfsConnectionManager>
    {
        protected override TfsConnectionManager CreateInstance(IContext context)
        {
            Uri serverUri = new Uri(ConfigurationHelper.TfsServerUrl);
            // Connect to the server without impersonation
            using (TfsTeamProjectCollection baseUserConnection = TfsTeamProjectCollectionFactory.GetTeamProjectCollection(serverUri))
            {
                // Get the identity management service
                IIdentityManagementService ims = baseUserConnection.GetService<IIdentityManagementService>();

                // Get the identity to impersonate
                TeamFoundationIdentity identity = ims.ReadIdentity
                (
                    IdentitySearchFactor.AccountName,
                    userName,  //NOTE: How can I get user name value from IContext???
                    MembershipQuery.None,
                    ReadIdentityOptions.None
                );

                // Connect using the impersonated identity
                using (TfsTeamProjectCollection impersonatedConnection = new TfsTeamProjectCollection(serverUri, identity.Descriptor))
                {
                    WorkItemStore store = impersonatedConnection.GetService<WorkItemStore>();

                    return new TfsConnectionManager
                    {
                        Store = store
                    };
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T11:04:40.103

Ninject 有意不提供会话范围，因为在几乎所有情况下，将服务置于会话状态都是错误的。你应该非常小心地使用会话状态，因为它带来了很多缺点。

首先尝试拥有一个无状态的应用程序。

如果有充分的理由将数据置于会话范围内，则将该数据（而不是服务）放入会话状态并使用处于单例、瞬态或请求范围内的服务进行处理（数据和功能分离）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T15:44:12.930

我原来使用自定义提供程序来创建实例，并在自定义提供程序中检查它是否存在于会话中。

绑定如下

```
Bind<IRepository>().ToProvider(new TfsRepositoryProvider()); 
```

自定义提供程序如下

```
public class TfsRepositoryProvider : Provider<TfsRepository>
    {
        private const string SesTfsRepository = "SES_TFS_REPOSITORY";

        protected override TfsRepository CreateInstance(IContext context)
        {
            // Retrieve services from kernel
            HttpContextBase httpContext = context.Kernel.Get<HttpContextBase>();

            if (httpContext == null || httpContext.Session == null)
            {
                throw new Exception("No bind service found in Kernel for HttpContextBase");
            }

            return (httpContext.Session[SesTfsRepository] ?? (
                    httpContext.Session[SesTfsRepository] = new TfsRepository(context.Kernel.Get<IWorkItemStoreWrapper>()))
                ) as TfsRepository;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T08:24:54.780

好的，您可以在应用程序中缓存/存储用户信息，如果您没有（最近的）用户信息，则仅调用外部服务。在您的用户信息检索“层”中，您只需对这两种可能性进行编程。

在哪里缓存，完全取决于您。例如，您可以将此信息存储在本地数据库中。

显然我理解错了，我很抱歉（在我原来的答案下面）。

> 例如，您可以使用（例如）保存服务的静态成员（例如）的（抽象）工厂，以便重用它。
> 
> 尽管取决于您的服务，这可能会产生一些不必要的副作用（我曾经使用 Data Services 做过一次，在 ASP.NET MVC3 应用程序中，由于发生了一些魔法，我的数据上下文有点搞砸了）。我只想说：小心并好好测试它。

# java - 使用 Turnkey Linux 在 Windows 环境中托管 Java Web 服务？

> ID：10445228
> 
> 赞同：0
> 
> 时间：2012-05-04T08:20:53.007
> 
> 标签：java, linux, wcf, interop, turnkeylinux.org

我在 WCF 上找到了 Yaron Navehs 的一篇很棒的帖子，并希望让这个示例 java web 服务运行起来，以便我可以尝试使用我的 WCF 客户端连接到它。
示例：[http ://webservices20.blogspot.com/2010/01/axis2-wcf-interoperability.html](http://webservices20.blogspot.com/2010/01/axis2-wcf-interoperability.html)

我的计划是在 Virtualbox 上使用 Turnkey Linux 虚拟设备，并在其上托管 Web 服务。

您会为此推荐哪种设备？
我正在查看以下内容：
[http://www.turnkeylinux.org/tomcat](http://www.turnkeylinux.org/tomcat)
[http://www.turnkeylinux.org/tomcat-apache](http://www.turnkeylinux.org/tomcat-apache)
[http://www.turnkeylinux.org/lampstack](http://www.turnkeylinux.org/lampstack)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T08:25:02.723

如果是出于测试目的，以下任何人都会这样做：

[http://www.turnkeylinux.org/tomcat](http://www.turnkeylinux.org/tomcat) [http://www.turnkeylinux.org/tomcat-apache](http://www.turnkeylinux.org/tomcat-apache)

现在关于部署，您可以查看每个提供的功能并做出选择。

我在任何地方都看不到 Tomcat 版本

# javascript - 在 url 中附加参数而不重新加载页面

> ID：10445229
> 
> 赞同：1
> 
> 时间：2012-05-04T08:21:00.950
> 
> 标签：javascript, jquery, url, append, pushstate

我正在使用以下代码将参数附加到 url。这工作正常，但是当在 url 中附加参数时，页面正在重新加载。我想在不重新加载页面的情况下使用此功能。

```
function insertParam(key, value)
{
    key = escape(key); value = escape(value);

    var kvp = document.location.search.substr(1).split('&');

    var i=kvp.length; var x; while(i--) 
    {
        x = kvp[i].split('=');

        if (x[0]==key)
        {
                x[1] = value;
                kvp[i] = x.join('=');
                    alert('sdfadsf');
                break;
        }
    }

    if(i<0) {kvp[kvp.length] = [key,value].join('=');}

    //this will reload the page, it's likely better to store this until finished
    document.location.search = kvp.join('&'); 
    //alert(document.location.href); 
```

# }

我想在不重新加载页面的情况下向 url 添加多个参数，例如：

*   txt1
*   txt2
*   txt3

*   链接1
*   链接2
*   链接3

我想要网址：“..../search.php”

单击 txt2 后，我想要 url：“..../search.php#t_2”

点击link2后我想要网址：“..../search.php#t_1&l_2”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T08:22:45.567

您只能使用[`history.pushState(state, title, url)`](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history)HTML5 功能来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-25T09:15:02.460

有一个新功能旨在用`location.hash`更好的解决方案代替使用：`pushState`.

```
 window.history.pushState(data, "Title", "/new-url"); 
```

更多信息：[http ://badassjs.com/post/840846392/location-hash-is-dead-long-live-html5-pushstate](http://badassjs.com/post/840846392/location-hash-is-dead-long-live-html5-pushstate)

# iphone - UIToolbar 被隐藏

> ID：10445230
> 
> 赞同：0
> 
> 时间：2012-05-04T08:21:03.940
> 
> 标签：iphone, ios, ios4, uitoolbar

我创建了 UIToolbar 控件。它作为 setInputAccessoryView 添加到一个 UITextField 控件中。效果很好。点击 UITextField 时，收费栏会出现 uikeyboard。这没有问题。

当我放置一个按钮时，点击它时我想隐藏键盘并且只想显示工具栏。

这没有发生。工具栏被隐藏了。

请让我知道，代码中的问题/原因是什么。

谢谢你的时间。

```
- (void)viewDidLoad {

 [super viewDidLoad];

        //
        myToolbar = [[UIToolbar alloc] init];
        [myToolbar sizeToFit];
        myToolbar.frame = CGRectMake(0,198, 320, 35);
        myToolbar.barStyle = UIBarStyleBlackTranslucent;
        [self.view addSubview:myToolbar];

        UIImage *image = [UIImage imageNamed:@"orangebuttonsmall.png"];
        UIButton *aButton = [UIButton buttonWithType:UIButtonTypeCustom];
        aButton.frame = CGRectMake(0, 100, image.size.width, 25 );    
        aButton.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
        [aButton setTitle:@"Tap" forState:UIControlStateNormal];
        [aButton setBackgroundImage: image forState:UIControlStateNormal];
        [aButton setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
        aButton.titleLabel.font = [UIFont boldSystemFontOfSize:10];
        [aButton addTarget:self action:@selector(aCenterBtnClicked:) forControlEvents:UIControlEventTouchUpInside];
         [self.view addSubview:aButton];

        myToField = [[UITextField alloc] init];
        myToField.frame = CGRectMake(0, 0, 320, 48);
        myToField.textColor = [UIColor blackColor]; //text color
        myToField.font = [UIFont systemFontOfSize:17.0];  //font size
        myToField.placeholder = @"To:";  //place holder
        myToField.backgroundColor = [UIColor whiteColor]; //background color
        myToField.autocorrectionType = UITextAutocorrectionTypeNo;  // no auto correction support
        myToField.keyboardType = UIKeyboardTypePhonePad;  // type of the keyboard
        myToField.returnKeyType = UIReturnKeyDone;  // type of the return key
        myToField.clearButtonMode = UITextFieldViewModeWhileEditing;
        [myToField setInputAccessoryView:myToolbar];
        myToField.textAlignment = UITextAlignmentLeft;
        [myToField setContentVerticalAlignment:UIControlContentVerticalAlignmentCenter];

        myToField.rightViewMode=UITextFieldViewModeAlways;
        // has a clear 'x' button to the right
        myToField.delegate = self;  
        [myToField becomeFirstResponder];
        [self.view addSubview:myToField];

     }

    -(void)aCenterBtnClicked:(id)sender{

        [myToField resignFirstResponder];

        myToolbar.frame = CGRectMake(0,198, 320, 35);
        myToolbar.barStyle = UIBarStyleBlackTranslucent;
        [self.view addSubview:myToolbar];
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:46:09.327

您尝试使用静态工具栏，我认为这对您来说很容易。在从 setinputview 删除之前我还没有完成，因为没有删除设置输入视图的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:30:42.863

inputAccessoryViews 作为子视图放置在 UIKeyboard 上，如果隐藏键盘，它会隐藏 inputAccessoryView。尝试将工具栏添加为 self.view 的子视图，并在显示键盘时通过订阅 UIKeyboardWillShow 通知并从 userInfo 中拉动动画持续时间来为其位置设置动画。

# sql - 如何更新没有主键的重复行

> ID：10445236
> 
> 赞同：1
> 
> 时间：2012-05-04T08:21:33.810
> 
> 标签：sql, sql-server-2008

我有一张没有主键的表。

```
name      age       sex
a         12        m
b         61        m
c         23        f
d         12        m
a         12        m
a         12        m
f         14        f 
```

我正好有 3 个相似的第 1 行、第 5 行和第 6 行。我想更新第 5 行而不影响第 1 行和第 6 行。请帮助我，如何实现这一目标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T09:35:27.590

您真正的问题是您没有行号，也无法区分相同的行。如果您的数据仍然按照插入的顺序排列，那么到目前为止您已经很幸运了。SQL Server 不保证行排序，并且可以随机化顺序，恕不另行通知。为了保留您的顺序，您可以在表中添加一个标识列。

```
ALTER TABLE TableWithNoPrimaryKey
ADD RowNum int IDENTITY(1,1) PRIMARY KEY 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T10:41:02.397

有一种方法可以做你想做的事。虽然不推荐。

```
;WITH cte AS
(
    SELECT *, RowNum = ROW_NUMBER() OVER (ORDER BY GETDATE())
    FROM [table]
)
UPDATE cte
SET age = age + 1
WHERE (RowNum = 5)
AND (name = 'a' AND age = 12 AND sex = 'm'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T09:31:20.597

它不可能在 SQL 中使用 ROW_NUMBER 函数，因为这种重复可以分布在数千条记录中。ROW_NUMBER 用于通过 OVER 子句获取行号，并且由于此类数据的存储是非集群的，因此无法删除。唯一的选择是向表中添加一些标识或唯一列，然后删除特殊记录，如果您不想要具有新索引或新列的表，您可以从表中删除该列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-04T06:25:32.573

我已将您的表名视为 T1 并更新了其中一行。我不想订购结果集但仍想生成行号，所以我使用了一个虚拟子查询 - 选择 0。下面的查询适用于 Oracle 和 IBM Netezza。如果它存在于 SQL SERVER 中，您可以尝试使用 rowid 或任何其他与 rowid 等效的东西。

```
UPDATE T1 SET name = a1, age = 21, sex = 'm'
FROM (SELECT name, age, sex, rowid,
row_number() over(partition by name, age, sex ORDER BY(SELECT 0)) as rn
FROM T1)A
WHERE T1.name = A.name 
AND T1.age = A.age
AND T1.sex = A.sex
AND T1.rowid = A.rowid 
AND A.rn = 1; 
```

# ssh - 具有完全访问控制的免费 IaaS 开发？（如 EC2）

> ID：10445239
> 
> 赞同：0
> 
> 时间：2012-05-04T08:21:49.257
> 
> 标签：ssh, cloud, cloud-hosting, paas, iaas

我正在寻找一种“免费”的 IaaS 服务来替代 EC2，它可以让我通过 SSH 进入具有完全用户权限的系统（从存储库创建/删除文件、安装服务、库和应用程序）。

尝试过 OpenShift，但由于 SSH 的严格权限政策而最终离开。**Heroku**、**dotCloud**、**CloudFoundry.com**、**Stackato**是 PaaS 提供商。**Rackspace**和**Linode**可能有我需要但不是免费的。

我自己的家庭服务器或 EC2 是我仅有的两个选择吗？出于好奇，我想在我不在家的时候从计算机上将我的整个`.vim`文件夹和文件部署到云上进行开发。`.vimc`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T13:21:54.530

似乎您想要免费的东西，而在任何地方都没有免费提供。我知道这是一种耻辱，但公司会为这样的事情收费是合理的。鉴于你想要它免费，我猜你不需要太多的力量或任何大规模的东西。在这种情况下，我会研究更便宜的虚拟专用服务器端或 EC2 上的微型实例。VPS 服务器的起价约为每月 20 美元，而微型服务器的起价为 14 美元。当然，对于微服务器，您将不得不为带宽和可能的 EBS 容量支付一些额外费用。此外，AWS 提供免费套餐，几乎可以让您在第一年使用 EBS 运行微型实例。

# jquery - 修改jQuery对话框中元素的类

> ID：10445241
> 
> 赞同：0
> 
> 时间：2012-05-04T08:22:08.027
> 
> 标签：jquery, jquery-ui

我想用用户在 jquery 对话框中提供的用户名替换当前选择器类中的“用户名”。问题是我不能在 jquery 对话框按钮内使用 $(this).attr() 因为它将指jquery 对话框。请建议如何在 jquery 对话框中用用户输入替换单词用户名。提前致谢

```
<form action="#" method="post" >
</form>
<p id="text" class="www.username.google.com"> click me </p>
<div id="test" class="sandy" > 
    <input id="username" class="sandy1" />
</div> 
```

==================================================== ==============================

```
$('#text').click(function(){
    var provider_url= $(this).attr('class');
    $('.sandy').dialog({
        buttons: {
            "OK": function() {
                if($('#username').val() == '') {
                    $('#username').focus();
                } else {
                    var myvalue= $("#username").val();
                    var nextval= replace(provider_url, username,myvalue);
                    $(this).dialog('close');
                    alert(nextval);
                    $('form').append(nextval);
                    $('form').submit();
                }
            }
        }
    });
}); 
```

jsfiddle代码演示在这里[http://jsfiddle.net/zCFD5/127/](http://jsfiddle.net/zCFD5/127/.Please) 。请帮帮我​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T08:42:21.967

Try this:

```
$('#text').click(function() {
    var provider_url = $(this).attr('class');
    $('.sandy').dialog({
        buttons: {
            "OK": function() {
                if ($('#username').val() == '') {
                    $('#username').focus();
                } else {
                    var myvalue = $("#username").val();
                    var nextval = provider_url.replace(/\.username\./, "." + myvalue + ".");
                    $(this).dialog('close');
                    alert(nextval);
                    $('form').append(nextval);
                    $('form').submit();
                }
            }
        }
    });
}); 
```

[**Example fiddle**](http://jsfiddle.net/zCFD5/130/)

It's worth noting though that you should really use `data` attributes for this, rather than storing it in the `class`. You'll need to upgrade your version of jQuery to do this though.

Also, I included the leading and trailing `.` in the regex so that you're definitely replacing the right part of the url in cases like this: `http://www.username.superusername.com`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T08:41:10.697

首先，您当前的问题不是由于“this”参考问题，而是错误的 js/jQuery 代码。

代替 ：

```
var nextval= replace(provider_url, username,myvalue); 
```

写 ：

```
var nextval= provider_url.replace('username', myvalue); 
```

它会更好地工作。

**编辑：**正如罗里所说，不要使用类属性来存储值。这不是一个好方法。如果您已经知道最终 url，也许您可​​以将其硬编码到您的按钮回调中。如果您的字符串可以更改，则可以将其传递给将创建对话框的函数参数。

# ios - 嵌套 performBlock：在 NSManagedObjectContext 上

> ID：10445246
> 
> 赞同：8
> 
> 时间：2012-05-04T08:22:33.080
> 
> 标签：ios, core-data, nsmanagedobjectcontext

当使用`NSPrivateQueueConcurrencyType`和`NSMainQueueConcurrencyType`类型时`NSManagedObjectContext`，在同一个上下文中进行嵌套的 performBlock 调用是否安全？

```
[backgroundContext performBlock:^{
   NSFetchRequest *myRequest = ...;  
   __block NSArray *result= nil;
   [backgroundContext performBlockAndWait:^{
       results = [backgroundContext executeFetchRequest:myRequest error:NULL];
   }];
}]; 
```

这可能看起来很愚蠢，但我有一个现有的代码库，其中包含许多封装`executeFetchRequest`调用的辅助方法。我不想假设调用者是否已经使用了 performBlock。例如：

```
-(void)updateObjects:(BOOL)synchronous
{
    if (YES == synchronous)
        [self fetchHelper];
    else
    {
        [backgroundContext performBlock:^{
             [self fetchHelper];
        }];
    }
}

-(NSArray*)fetchHelper
{
     [self.backgroundContext performBlockAndWait:^{
         //Fetch the objects...
         [self.backgroundContext executeFetchRequest: (...)];
     }];
} 
```

我已经尝试过了，它有效。但我已经学会了（艰难的方式）对 Core Data 和多线程非常小心。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T15:20:18.710

是的， performBlockAndWait 是可重入的。直接来自 Apple 的发行说明...

> Core Data 使用新选项将 NSManagedObjectContext 类的并发模型形式化。创建上下文时，您可以指定与它一起使用的并发模式：线程限制、私有调度队列或主调度队列。NSConfinementConcurrencyType 选项提供的行为与 5.0 之前的 iOS 版本中存在的行为相同，并且是默认行为。将消息发送到使用队列关联创建的上下文时，如果您的代码尚未在该队列上（对于主队列类型）或在 performBlock... 调用的范围内执行，则必须使用 performBlock: 或 performBlockAndWait: 方法（对于私有队列类型）。在传递给这些方法的块中，您可以自由地使用 NSManagedObjectContext 的方法。performBlockAndWait：方法支持 API 重入。performBlock: 方法包括一个自动释放池，并在完成时调用 processPendingChanges 方法。

# eclipse - eclipse下同一个多模块maven项目的多个版本

> ID：10445252
> 
> 赞同：5
> 
> 时间：2012-05-04T08:22:49.990
> 
> 标签：eclipse, maven, pom.xml, multi-module

我想在eclipse下处理**同一个多模块maven项目的****两个不同版本。**

 **不幸的是，当您在eclipse下导入多模块maven项目时，您可以自己更改**父模块**项目名称，以防止冲突，但**不能更改子模块项目名称**。子模块作为根项目导入，以模块名称命名。显然，在导入期间无法重命名它们。

在理想情况下，我想**保持 pom 原样**。显然我想保持**相同的日食工作区**......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-04T08:25:40.910

是的你可以。您必须在 m2eclipse 导入器中更改名称模式。所有模块都将具有这种模式，并且您将拥有一个无冲突的环境。**

# android - 建议在 Android 上进行 UI 原型制作的工具 - AppInventor，其他？

> ID：10445257
> 
> 赞同：3
> 
> 时间：2012-05-04T08:23:01.910
> 
> 标签：android, user-interface, prototyping

我正在寻找适用于 Android 的原型设计工具 - 您的经验是什么，[MIT AppInventor](http://www.appinventor.mit.edu/)（前 Google AppInventor）值得一看吗？

你能推荐我应该注意的任何其他（更好的）原型设计工具吗？

我对用 Java 开发应用程序很熟悉，我只想要一个工具，它可以让我进行早期的用户体验测试。您的经验是，使用原型工具值得额外学习还是我应该只编写应用程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T08:50:36.957

这是一个在线生成器

*   Android 资产工作室[http://android-ui-utils.googlecode.com/hg/asset-studio/dist/index.html](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/index.html)

如果你想创建 android 设计模型，Pencil 是一个不错的选择

*   铅笔 GUI 原型设计工具 - [http://pencil.evolus.vn/en-US/Home.aspx](http://pencil.evolus.vn/en-US/Home.aspx)
*   下载铅笔模板：[http ://code.google.com/p/android-ui-utils/downloads/list](http://code.google.com/p/android-ui-utils/downloads/list)

来源：[http ://code.google.com/p/android-ui-utils/](http://code.google.com/p/android-ui-utils/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T10:08:31.897

我想说只是用你的屏幕编写一个没有功能或功能最少的应用程序。在 Eclipse Android UI 设计器中编写 XML 布局并不困难。如果你使用其他工具做同样的事情，你会做两次工作，并且不能确定你是否能够为 Android 实现同样的功能

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T08:50:02.633

Preview mode of IntelliJ IDEA is really useful and allows you to get look and feel quickly while autoring xml layout

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-02T05:18:32.497

为了在用户测试中获得高质量的反馈，您需要使用具有在真实设备上运行的本机控件的逼真原型。基于静态图像的“点击假人”很有用，但还远远不够。

查看[jimu Mirror](http://jimulabs.com/)和[Mirror.js](http://jimulabs.com/mirrorjs-preview/)，与编写完整的应用程序相比，它们可以更轻松地创建此类原型。

Mirror 是一款 UI 开发工具，可让您在真实设备上实时预览 Android UI。您可以使用一个简单的 XML 文件来用示例数据填充您的 ListView（或其他视图），以便屏幕看起来与应用程序完成时完全相同。它的行为也相同，因为它是在设备上运行的应用程序。

Mirror.js 建立在 Mirror 的活力之上，让您可以对 UI 的动态部分进行原型制作：动画、屏幕转换、屏幕之间的导航等。您使用 Android 的 XML 资源和一些 JavaScript 来制作这些原型和**大部分代码可以在开发中重用**。完成后，您可以以 APK 的形式分享您的工作。

完全披露，我是这个工具的创造者之一。

# android - 如何在布局 xml 中抑制关于我使用 px 的警告？

> ID：10445260
> 
> 赞同：7
> 
> 时间：2012-05-04T08:23:21.537
> 
> 标签：android, android-lint, sony-smartwatch

我正在处理一个包含 a 的项目，`Sony SmartWatch`并且当我将布局发送到该项目时，我需要使用真实的像素值。[如果您没有在其上使用通过蓝牙连接并用作“控制”设备可以绘制的额外显示器的手表]

我正在使用 Eclipse，所以它给了我一个警告，我不应该`px`在`layout.xml`文件中使用......有没有办法在我知道我应该使用的行中抑制这些警告`px`？（注意：我只想在我知道应该使用它的行上禁止这些警告，因此从 lint 错误检查器中关闭此检查不是我想要的）

再说一次，*我知道 px 在使用 android 时通常不是一个好主意，但这是少数需要它的情况之一。*

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-04T08:28:56.383

添加`xmlns:tools="http://schemas.android.com/tools"`到您的 xml，然后您可以通过在您的视图中包含以下内容来禁用 px 警告：`tools:ignore="PxUsage"`.

这可以通过单击“使用注释/属性抑制此错误”按钮从 lint-warnings 窗口自动完成。

# jquery - 当我在其中组合 JQuery 对话框和 JQuery 选项卡时，我的表单无法正常工作

> ID：10445261
> 
> 赞同：1
> 
> 时间：2012-05-04T08:23:24.420
> 
> 标签：jquery, jquery-ui

我正在尝试将 JQuery 对话框与两个 JQuery 选项卡结合起来。我在对话框中制作了选项卡列表，将表单添加到其中一个选项卡。没有标签的表格做得很好。我可以改变我想要的并保存。但是当我引入标签时它停止工作。即使在 Firefox 选择框上工作（在 Chrome 上不是），该按钮仍然工作。唯一的问题是 textarea 就像 readonly 我不能改变任何东西。这是对话框的代码：

```
$(function() {
    $( "#dialog:ui-dialog" ).dialog( "destroy" );
    $( "#dialog-form" ).dialog({
        autoOpen: false,
        height: 400,
        width: 750,
        modal: true,
        draggable:true,
        buttons: {
             Salva: function() { 
                var save = false;

                if(document.getElementById("sr_id_state").value==18 || document.getElementById("sr_id_state").value==20){
                    onClick:if(confirm('Archiviazione definitiva?')){ save = true; }
                } else {
                    save = true;
                }                
                if (save){
                $.ajax({
                        url: 'agendaRichiamoSaveJson.do',
                        type: "POST",
                        dataType: "json",
                        data: $("#dialogform").serialize(),
                        success: 
                            function(result) {
                            if (result.esito!='OK') {
                                alert(result.esito + ' ' + result.message);  
                            } else {
                                doUpdate( $('#agr_id').val() , $('#agr_date').val(), $('#agr_id_patient').val(), $('#agr_id_performance').val(), $('#agr_id_appointment').val(),
                                        $('#agr_performed').val(), $('#agr_id_state').val(), $('#agr_notes').val(), $('#agr_user_changes').val(), $('#agr_date_changes').val(), $('#a_name').val(), $('#a_surname').val(), $('#a_telefono').val(), $('#idMedico').val());

                                alert('Salvataggio completato!');
                                $("#newTable").flexReload();
                                $( "#dialog-form" ).dialog( "close" );
                            }
                        }, error:function (xhr, ajaxOptions, thrownError){ alert(xhr.status); alert(thrownError);} });  }

            },Annula : function() { $( this ).dialog( "close" ); }
        }});
    $( "#dialog-form" ).dialog({ closeText: ''  });
}); 
```

我添加了这个来启用标签：

```
$(function() {$( "#tabs" ).tabs();}); 
```

这是该对话框和内部选项卡的 HTML：

```
<div id="dialog-form" title="Gestione Richiami" class="notThere" style = "overflow: hidden; z-index: 9999;" >
<div>
    <div id="tabs">
        <ul>
            <li><a href="#tabs1">Gestione Richiami</a></li>
            <li><a href="#tabs2">Prossimi Appuntamenti</a></li>
        </ul>
        <div id="tabs1">

  <form id="dialogform" action="agendaRichiamoSaveJson.do"  >
    <input type="hidden" name="azione" id="idAzione" value="update"  />
    <input type="hidden" name="agr_id" id="agr_id" value=""  />
    <input type="hidden" name="agr_id_patient" id="agr_id_patient" value=""  />
    <input type="hidden" name="idMedico" id="idMedico" value=""  />
    <fieldset>
    <br><br>
       <table>
            <tr>
                <td><label for="a_surname" >Paziente</label></td>
                <td><input type="text" size="80" name="a_surname" id="a_surname" class="text ui-widget-content ui-corner-all" readonly="readonly" /></td>
            </tr>
            <tr>
                <td><label for="agr_date" >Data</label></td>
                <td><input type="text" size="10" name="agr_date" id="agr_date" class="text ui-widget-content ui-corner-all" readonly = "readonly"/></td>
                <td id='tele'><label for="a_telefono" >Telefono</label></td>
                <td id='tele2'><input type="text" size="10" name="a_telefono" id="a_telefono" class="text ui-widget-content ui-corner-all" readonly = "readonly"/></td>
                <td id='tele3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <button type="button" class="operactive-button green" onClick="javascript:myPreloadPaz()" title="Apri agenda">
                        <img width="16" height="16" src="base/images/icons/fugue/tick-circle-blue.png">
                        Agenda
                    </button>
                </td>
            </tr>
            <tr><td></td><td><br></td></tr>
            <tr >
                <td><label for="sr_id_state">Stato</label></td>
                <td><select name="sr_id_state" id="sr_id_state" class="text ui-widget-content ui-corner-all"   
                        size="1">
                    <c:forEach var="item" items="${elencoStatoRigaDocumento}" >
                        <c:if test="${item.idTipoDocumento=='8' && item.idUtenteInvalidaz==-1}">    
                            <option  selected value="${item.idStatoRiga}"><c:out value="${item.descrizione}" /></option>
                        </c:if>
                    </c:forEach>
                </select></td>
            </tr>
            <tr>
                <td><label for="agr_notes">Nota</label></td>
                <td><textarea rows="4" cols="80" maxlength="250" name="agr_notes" id="agr_notes" onblur="clearChar(this)" class="text ui-widget-content ui-corner-all"></textarea></td>
            </tr>
        </table>
    </fieldset>
  </form>
        </div><div id="tabs2">sdsfs</div>
</div>
</div>
</div> 
```

# javascript - 奇怪的字符 (amp;) 添加到 moss 服务输出

> ID：10445262
> 
> 赞同：0
> 
> 时间：2012-05-04T08:23:27.853
> 
> 标签：javascript, asp.net-mvc-3, moss

我有输出图像网址的苔藓服务。

假设输出 url 有 '&' 字符，服务附加 amp; 旁边 ＆。

例如：Directory.aspx?&z=BWxNK

这里放大器; 额外添加。这是一项苔藓服务。所以我无法控制服务。

我能做的是解码输出。当我使用 Ajax 调用调用 moss 服务时，我被迫解码来自 javascript 的输出。我试过 decodeURIComponent、decodeURI、unescape。没有解决问题。

非常感谢任何帮助。甚至服务器端功能也很有帮助。我正在使用 Aspl.net MVC3

问候，库马尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:27:26.823

`&amp;`不是 URI 编码的，它是 HTML 编码的。

对于服务器端解决方案，您可以这样做：

```
Server.HtmlDecode("&amp;") // yields "&" 
```

对于 JavaScript 解决方案，您可以将*html*设置为`"&amp;"`并读出*text*，以模拟 HTML 解码。在 jQuery 中，它可能看起来像这样：

```
$("<span/>").html("&amp;").text(); // yields "&" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:27:34.673

`&amp;`是 SGML/XML/HTML 的`&`.

如果服务正在输出 XML 文档，那么请确保您使用的是 XML 解析器来解析它（而不是正则表达式或同样疯狂的东西）。

否则，您需要解码（大概）HTML。在 JavaScript 中，最简单的方法是：

```
var foo = document.createElement('div');
foo.innerHTML = myString;
var url = foo.firstChild.data; 
```

# javascript - 绑定到外部模型的变化

> ID：10445264
> 
> 赞同：0
> 
> 时间：2012-05-04T08:23:38.293
> 
> 标签：javascript, backbone.js

我有一个带有模型的主干视图。

此外，我有一个全局模型，其中包含一些特定于应用程序的东西。

现在我将此模型的更改事件绑定到我的视图的渲染方法，但这似乎不起作用。

```
model: new Preferences.Item(),

render: function() {

    $(that.el).html(template(that.model.toJSON()));                 
},

initialize : function() {
        this.render = _.bind(this.render, this);
        // global account model holder
            App.Storage.account.bind("change", this.render);
}, 
```

我必须做一些特定的绑定来附加到外部模型的事件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:40:55.783

您应该`render`使用 Backbone 的内联绑定来绑定该方法。另外，您`that`在`render`方法中使用了它，这将是一个错误。

```
var ModelView = Backbone.View.extend({
    model: new Preferences.Item(),
    template: _.template('<div><%= variable %></div>');
    render: function () {
        this.$el.html(this.template(this.model.toJSON()))
    },
    initialize: function () {
        App.Storage.account.on('change', this.render, this);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:35:54.917

找到解决方案...您必须致电：

```
App.Storage.account.on("change", this.render) 
```

# asp.net-mvc-3 - 下载文件无法在 Internet Explorer 6 上运行（仅适用于某些人）

> ID：10445271
> 
> 赞同：1
> 
> 时间：2012-05-04T08:24:10.463
> 
> 标签：asp.net-mvc-3, internet-explorer, internet-explorer-6, download, cross-browser

我正在开发一个 ASP.NET MVC3 web 应用程序。

我有一个“下载”按钮，可以从服务器下载文件。

```
<input type="button" onclick="window.location.href='@Url.Action("DownloadFile", "Home")';" value="Download"/> 
```

在 HomeController 中，我调用返回文件的操作“DownloadFile”

```
return File(fileToReturn, Path.GetFileName(fileToReturn)); 
```

这在所有浏览器上都能正常工作。

但是有些人报告说下载在 Internet Explorer 6 上不起作用。

我安装了 IE6 并在上面测试了网站，它工作正常。

所以这是我的问题：

什么可能导致下载不适用于某些 IE6，但适用于其他 IE6？

首先，我认为这是 IE 中的一个安全选项。但后来我在我的 IE6 上测试了不同的安全选项，当我由于安全原因无法下载时，我收到一条消息 `Your current security settings does not allow this file to be downloaded`但他们没有得到这个（文件只是没有下载而没有任何事情发生）

这可能是什么原因造成的？我无法复制它以修复它。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T08:38:01.273

我曾经遇到过类似的问题，并通过以下步骤设法解决了它：

*   在 Internet Explorer 中，单击*工具*，然后单击*Internet 选项*。
*   单击*安全*选项卡。
*   列出了四个安全区域：*Internet*、*本地 Intranet*、*受信任的站点*、*受限制的站点*。单击您的网站所在的区域（当您导航到您的网站时，当前区域会显示在 IE 窗口底部的状态栏中）。
*   在此区域的*安全级别*下，单击*自定义级别*。
*   在“*下载*”下的“**自动提示文件下载**”下，单击“**启用**”，然后单击“确定”两次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:34:35.483

你说你已经检查过它不是浏览器安全设置，但它可能是他们网络上的安全设置，而不仅仅是浏览器。

如果他们的网络防火墙配置为阻止下载某些类型的文件，那么除了更改您发送的文件类型之外，您可能无能为力。（或与他们的网络运营商很好地交谈）。

考虑到这些天运行 IE6 所涉及的安全风险，我想大多数仍在使用 IE6 的公司都会有相当偏执的网络安全设置，所以这是一个很可能的解释。

# prolog - 如何扭转或构建对 jason (agentspeak) 的信念？

> ID：10445273
> 
> 赞同：2
> 
> 时间：2012-05-04T08:24:15.220
> 
> 标签：prolog, agent, multi-agent

我想做以下事情：

我有一个将论点作为信念的初始目标，我想将其反转，以使信念的论点成为新的信念，而论点成为信念名称。

像这样的东西：

```
//Agent asker in project Test.mas2j
!translate(barks(dog)). //I would like to have the belief: dog(barks)
+!translate(T)<-
    T =.. [A,[B],C];
    .print("functor: ",A);
    .print("argument: ",B);
    //.print("source: ",C);
    +B(A);//<- I want something like this, but it gives a syntax error.
    +B. //<-this works, but it doesn't give the argument to it 
```

所以，我的问题是，以这种方式来建立信仰有什么好处？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T08:41:39.590

像你一样构建术语`T`：

```
...
X =.. [B,[A]]; // constructs the belief
+X; // adds the belief to the current belief base
... 
```

从[使用 Jason 在 AgentSpeak 中编程多代理系统一书中](http://eu.wiley.com/WileyCDA/WileyTitle/productCd-0470029005.html)：

> Prolog 中也可用的一个操作符在此处的工作方式略有不同（因为 Prolog 中没有谓词注释）是 '<code>=..'，它用于将文字解构为列表。结果列表的格式`[functor, list of arguments, list of annotations]`为 ，例如： `p(b,c)[a1,a2] =.. [p, [b,c], [a1,a2]]`。

# java - 如果查找键是字符串，则 EnumMap 或 HashMap

> ID：10445274
> 
> 赞同：29
> 
> 时间：2012-05-04T08:24:15.737
> 
> 标签：java, collections, hashmap, enum-map

`EnumMap`我正在尝试权衡使用over a的利弊`HashMap`。因为，我将始终使用 a 进行查找`String`，似乎`HashMap`带有 a`String`键的 a 将是正确的选择。然而，一个`EnumMap`似乎更好的设计，因为它传达了我将键限制为特定枚举的意图。想法？

这是一个虚构的例子，展示了我将如何使用`Map`：

```
enum AnimalType { CAT, DOG }
interface Animal {}
class Cat implements Animal {}
class Dog implements Animal {}

public class AnimalFactory {

    private static final Map<AnimalType, Animal> enumMap 
            = new EnumMap<AnimalType, Animal>(AnimalType.class);
    // versus
    private static final Map<String, Animal> stringMap 
            = new HashMap<String, Animal>();

    static {
        enumMap.put(AnimalType.CAT, new Cat());
        enumMap.put(AnimalType.DOG, new Dog());
        stringMap.put("CAT", new Cat());
        stringMap.put("DOG", new Dog());
    }
    public static Animal create(String type) {
        Animal result = enumMap.get(AnimalType.valueOf(type));
        Animal result2 = stringMap.get(type);
        return result;
    }
} 
```

假设`AnimalType`enum 和 map 将仅被用于`AnimalFactory`创建动物而不是其他任何地方。

我应该使用哪个`Map`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-04T08:27:42.797

如果可以枚举所有有效键，我会使用它，因为它可以确保您始终使用有效值。

它还可以避免混淆，因为 String 可以用于很多事情，并且很容易将“Animal”字符串转换为用于其他用途的字符串。由于枚举类型通常不能与其他类型互换（除非您使用通用接口），因此编码出错的可能性较小。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T09:12:45.097

如果一组可能的键是有限的并且事先已知（如您的示例/问题所建议的那样），那么枚举就是对此的完美表示。正如其他人所说，使用枚举确保在使用密钥时不会出错。

*此外，这种 Map 的实现非常优化，因为键的范围是预先知道的（据我所知，EnumMap 在内部使用长度为numberOfEnums*的数组，由枚举的序号索引）。

所以我也会推荐**`EnumMap`**。

不过要记住两件（小）事情：

*   您将无法通过继承添加特殊案例（例如，您不能扩展枚举，因此没有动物地图和专门的哺乳动物地图）
*   将成员添加到枚举时，如果将其添加到其他成员的“中间”，则会更改序数。由于 EnumMap 可以使用此信息，因此如果您重新加载从旧版本枚举构造的 EnumMap（例如使用序列化），这可能会出现问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-02T13:16:30.037

首先，你所有的键都是最终不可变的。你绝对应该使用`EnumMap`.

这就像 Ruby 中的哈希：

```
options = { :font_size => 10, :font_family => "Arial" } 
```

`:font_size`是 Ruby 中的符号，Java 中的最终静态对应物。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T08:29:49.167

地图的键应该是不可修改和唯一的，这可以使用枚举来保证。

与管理 String 相比，管理它也会更容易，更不容易出错。

所以选择 EnumMap。

此外，由于我们有高级枚举，我们可以使用密钥本身附加许多其他信息和操作。

```
enum AnimalType {

  Dog("I am dog and I hate cats", true), 
  CAT("I am cat and I love to eat rats", true),
  RAT("I am a mouse and I love tearing human cloths apart", false) ;

  private final String description;
  private final boolean isHelpFullToHuman;

  private AnimalType(String description , boolean isHelpFullToHuman) {
     this.description = description;
     this.isHelpFullToHuman = isHelpFullToHuman;
  }

  public boolean isHelpFullToHuman() {
     return isHelpFullToHuman;
  }

  public String getDescription() {
     return description;
  }

} 
```

# c++ - “未解决的外部 _WinMain@16”如果我将 WndProc 移动到另一个 cpp 文件

> ID：10445275
> 
> 赞同：3
> 
> 时间：2012-05-04T08:24:18.633
> 
> 标签：c++, winapi, unresolved-external

对于 Windows 应用程序，我正在尝试获取`CreateWindow()`并且`WndProc()`（或我的版本）成为在开始时创建的单例类的一部分，`_tWinMain()`但由于尝试将函数转移到`GameHandler.h`并且`GameHandler.cpp`我不断收到“未解析的外部符号 _WinMain@ 16"。它们最初是全局函数`main.cpp`，一切都编译得很好，然后我决定将它们移到 GameHandler ，因为我得到的只是未解决的外部函数，即使我尝试将它们移回`main.cpp`.

我在 VS2010 中这样做，该项目是作为 Windows 应用程序创建的，并且在属性中没有设置特定的入口点（我仔细检查了到目前为止我发现的每个解决方案都说这是因为它是一个控制台应用程序 - 这不是t)。

我目前拥有的代码如下所示。实际项目有几千行其他代码，我认为它不相关（但很高兴证明是错误的。虽然实际的窗口创建代码是相关的，但我认为代码本身并不相关）是问题所在（除了我留下的），它是 GameWindowProc() 和/或 CreateGameWindow() 的位置或它们的调用方式。实际的窗口创建代码取自[NeHe 的教程](http://nehe.gamedev.net/tutorial/creating_an_opengl_window_%28win32%29/13001/)。尝试仅编译以下代码给出上述未解决的外部。

主.cpp：

```
#include <Windows.h>
#include "GameManager.h"

#ifndef USEGMGR
bool CreateGameWindow(char* title, int width, int height, int bits, bool fullScreenFlag);
LRESULT CALLBACK GameWindowProc(HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam);
#endif

int APIENTRY _tWinMain(HINSTANCE hInst, HINSTANCE hPrevInst, 
                        LPTSTR lpCmdLine, int nCmdShow)
{
    GameManager::Startup();
    GameManager* GMgr = GameManager::GetInstance();

    GMgr->SetProgramState(GAME_MODE);
    while(GMgr->GetProgramState() != GAME_MODE) // Normally this would be if (State != GAME_QUIT)
    { /* do game related stuff */ }

    GameManager::Shutdown();
    return 0;
}

#ifndef USEGMGR
bool CreateGameWindow(char* title, int width, int height, int bits, bool fullScreenFlag)
{
    // Fairly complex but flexible creation code, taken from NeHe's tutorials. Of relevant interest is:
    WNDCLASS        wc;                             // Windows Class Structure
    wc.lpfnWndProc  = (WNDPROC) GameWindowProc;  // WndProc Handles Messages
    if (!RegisterClass(&wc))                         // Attempt To Register The Window Class
    {
        MessageBox(NULL,"Failed To Register The Window Class.","ERROR",MB_OK|MB_ICONEXCLAMATION);
        return false;
    }
    return true;
}

LRESULT CALLBACK GameWindowProc(HWND    hWnd,            // Handle For This Window
    UINT    uMsg,            // Message For This Window
    WPARAM    wParam,            // Additional Message Information
    LPARAM    lParam)            // Additional Message Information
{
    // various custom message handling, if not processed:
    return DefWindowProc(hWnd,uMsg,wParam,lParam);
}
#endif 
```

在 GameManager.h 中：

```
#ifndef GAMEMANAGER_H
#define GAMEMANAGER_H
#define USEGMGR // makes CreateGameWindow() and GameWindowProc() methods in GameManager instead of global

#include <Windows.h>

enum ProgramState
{
    GAME_MODE,
    GAME_QUIT,
};

class GameManager
{
public:
    static void             Startup();
    static void             Shutdown();
    static GameManager*     GetInstance();
    void                    Update(); // code not shown, check quit key etc
#ifdef USEGMGR
    const bool              CreateGameWindow(char* title, int width, int height, int bits, bool fullScreenFlag);
    static LRESULT CALLBACK GameWindowProc(HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam);
#endif
    void                    KillGameWindow(void);
    const int                GetProgramState() const;
    void                    SetProgramState(const int& newMode);
private:
    GameManager();
    ~GameManager();
    GameManager(const GameManager&);
    GameManager& operator=(const GameManager&);
    HINSTANCE                m_hInstance;
    HWND                    m_hWnd;        
    HDC                        m_hDC;        
    static GameManager*        s_instance;
    int                        m_programState; // uses ProgramState enum
};
#endif 
```

在 GameManager.cpp 中：

```
#include "GameManager.h"
#include <Windows.h>
#include <assert.h>

#ifndef USEGMGR
extern bool CreateGameWindow(char* title, int width, int height, int bits, bool fullScreenFlag);
#endif
GameManager*        GameManager::s_instance    = NULL;
GameManager::GameManager(){}
GameManager::~GameManager(){}

void GameManager::Startup()
{
    assert(s_instance == NULL);
    s_instance = new GameManager;
#ifdef USEGMGR
    if (! (s_instance->CreateGameWindow("Game Window", 800, 600, 32, true )) )
#else
    if (! (CreateGameWindow("Game Window", 800, 600, 32, true )) )
#endif
        assert("CreateGameWindow failed! Need an error here"); // Quit If Window Was Not Created - clean this up later    
}

void GameManager::Shutdown()
{
    assert(s_instance != NULL);
    delete s_instance;
    s_instance = NULL;
}

GameManager* GameManager::GetInstance(){return s_instance;}

void GameManager::Update(){/* msg handling, watch for quit key, etc */}
const int GameManager::GetProgramState() const{return s_instance->m_programState;}
void GameManager::SetProgramState(const int& newState){s_instance->m_programState = newState;}

#ifdef USEGMGR
const bool GameManager::CreateGameWindow(char* title, int width, int height, int bits, bool fullScreenFlag)
{
    // Fairly complex but flexible creation code, taken from NeHe's tutorials. Of relevant interest is:
    WNDCLASS        wc;                             // Windows Class Structure
    wc.lpfnWndProc  = (WNDPROC) GameManager::GameWindowProc;  // WndProc Handles Messages
    if (!RegisterClass(&wc))                         // Attempt To Register The Window Class
    {
        MessageBox(NULL,"Failed To Register The Window Class.","ERROR",MB_OK|MB_ICONEXCLAMATION);
        return false;
    }
    return true;
}

LRESULT CALLBACK GameManager::GameWindowProc(HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam)
{
    // various custom message handling, if not processed:
    return DefWindowProc(hWnd,uMsg,wParam,lParam);
}
#endif 
```

正如你所看到的，我已经设置了一些预处理器条件来在 GameManager 中`main.cpp`或作为 GameManager 的一部分的麻烦函数之间切换。`#define USEGMGR`在开头注释掉以`GameManager.h`将它们作为全局函数在`main.cpp`.

有人可以告诉我我做错了什么吗？

*编辑：*删除了关于如果你让它运行就无法退出的评论。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T08:27:48.387

该`WinMain`函数不能是类的成员函数，即使是“单例”类。

由于它充当程序的“入口点”，基本上取代了`main`您在传统 C++ 应用程序中找到的函数，因此它需要是一个免费的全局函数。

该消息`Unresolved external _WinMain@16`只是编译器告诉您它无法找到预期的入口点的神秘方式，命名`WinMain`（加上一些名称修改）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T08:31:40.563

添加

```
#include <tchar.h> 
```

到顶部，`main.cpp`以便`_tWinMain`正确定义宏。

如果您没有宏定义，会发生什么情况，您最终会在目标文件中得到一个名为`_tWinMain()`（或名称的一些修改版本，如`?_tWinMain@@YGHPAUHINSTANCE__@@0PADH@Z()`）的函数，但链接器和运行时初始化代码正在寻找`WinMain()`or `wWinMain()`。他们没有找到。

`<tchar.h>`定义了一个宏，该宏将名称`_tWinMain()` 转换为其他所有名称都在寻找的两个名称之一。在开始重构之前（很可能是间接的），您一定已经拥有包含该标头的东西，并且以某种方式丢失了它。

或者您可以省去宏版本并将函数命名为`WinMain`or `wWinMain`（无论您是否为 UNICODE 构建，任何一个都应该工作）。如果您这样做，只需记住更改`LPTSTR`参数声明以匹配您选择的那个。

# emacs - 组织模式：嵌入信息文件的链接

> ID：10445285
> 
> 赞同：13
> 
> 时间：2012-05-04T08:24:56.853
> 
> 标签：emacs, elisp, org-mode

我在 org 模式下维护一个日记（包含要记住的想法的内部博客），有时，当我学习 Emacs 时，我将学习的技能和技巧与对信息文件的引用一起存储。

目前我执行以下操作。我打开所需的信息文件，按下`c`以复制当前节点名称，按下`< s TAB`- 这是一个[简单的模板](http://orgmode.org/manual/Easy-Templates.html)，可以展开为[src-block](http://orgmode.org/manual/Working-With-Source-Code.html)。然后我添加 lisp 表达式并粘贴节点名称，最后链接如下所示：

```
#+begin_src emacs-lisp
(info "(org) Properties and Columns")
#+end_src 
```

当我需要查看信息文件时，我将光标放在 lisp sexp 之后并按`C-x C-e`(eval-last-sexp)。

这个过程是乏味和不优雅的。在 org-mode 中嵌入指向信息文件的链接的最佳方法是什么？

**编辑：**我发现了如何将链接添加到信息节点。[外部链接](http://orgmode.org/manual/External-links.html)的组织模式手册描述了使用链接的这些等效方法：

```
[[info:org#Tags]]
[[elisp:(info "(org) Tags")]] 
```

对于第一个变体，我不确定如何自动转换`(org) Tags`为`org#Tags`. 我怎样才能进一步简化这个过程？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-04T17:16:26.683

您可以像在任何受支持的链接类型中一样执行此操作（请参阅手册中的[“处理链接”](http://orgmode.org/manual/Handling-links.html)部分）。在 info 文件中，您说`M-x org-store-link`,（按照手册中的建议将其绑定到`C-c l`），然后在您的 org 文件中，插入带有`C-c C-l`. 在那里，您只需从存储的链接列表中选择指向您的信息文件的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T21:27:09.713

`org-store-link`访问 Info 页面时说“无法链接到未访问文件的缓冲区”，因为 Info 设置了`buffer-name`to`*info*`和`buffer-file-name`to `nil`。为了解决这个问题，可以稍微修改社区提供的如何添加到手册页链接的示例（ [http://orgmode.org/manual/Adding-hyperlink-types.html ）：](http://orgmode.org/manual/Adding-hyperlink-types.html)

```
;; Modified version of contrib/lisp/org-man.el; see
;; (http://orgmode.org/manual/Adding-hyperlink-types.html#Adding-hyperlink-types)
(require 'org)

(org-add-link-type "info" 'org-info-open)
(add-hook 'org-store-link-functions 'org-info-store-link)

(defcustom org-info-command 'info
  "The Emacs command to be used to display an info page."
  :group 'org-link
  :type '(choice (const info)))

(defun org-info-open (path)
  "Visit the infopage on PATH.
   PATH should be a topic that can be thrown at the info command."
  (funcall org-info-command path))

(defun org-info-store-link ()
  "Store a link to an info page."
  (when (memq major-mode '(Info-mode))
    ;; This is a info page, we do make this link
    (let* ((page (org-info-get-page-name))
           (link (concat "info:" page))
           (description (format "Infopage for %s" page)))
      (org-store-link-props
       :type "info"
       :link link
       :description description))))

(defun org-info-get-page-name ()
  "Extract the page name from Info in a hackish way."
  ;; This works for `Info-mode'.
  ;; Hackity-hack: copy the node name into the kill ring.
  (Info-copy-current-node-name)
  ;; Just return the kill.
  (current-kill 0))

(provide 'org-info) 
```

重要的一点是接近尾声：由于 info 节点名称不能直接访问（不是我可以很容易找到），我们可以通过调用`Info-copy-current-node-name`将它放在 中来解决它`kill-ring`，然后返回第一个条目`kill-ring`（应该是刚刚插入的节点名称）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-05T15:24:40.553

应该工作的步骤-转到您需要的信息节点，然后按'c'（节点名称将是杀死环的条目）-在您的组织源文件上转到您需要插入链接的点按Cc，Cl-按 T​​ab 然后选择 elisp: 从显示的提示缓冲区（或您需要的任何类型的链接）。现在您在迷你缓冲区中的提示说 elisp: - 在 ':' (info "^") 之后输入此上下文，让 ^ 成为您的节点名称由 Cy 拉回 - 按 Ret，然后您将被要求提供一些描述，只需填写您自己的。现在你已经完成了，但仍然不知道到底发生了什么。- Mx，可见性模式，以及如何手动编写该内容，我们现在得出的结论是“%20”必须替换上下文中出现的每个空格。eg.==>自己做，

# android - 我的文本视图宽度在我的自定义列表视图中不是静态的

> ID：10445289
> 
> 赞同：0
> 
> 时间：2012-05-04T08:25:17.290
> 
> 标签：android, android-layout

我的 textviews 宽度在我的自定义列表视图中不是静态的我需要我的 textview 的大小是标准的，但它不起作用

我的布局代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_margin="10dp"
    android:layout_weight="1"
    android:background="@drawable/menuitemsgradient" >

    <LinearLayout
        android:id="@+id/linearLayout3"
        android:layout_width="wrap_content"
        android:layout_height="match_parent" >

        <ImageView
            android:id="@+id/imgChkOut"
            android:layout_width="60px"
            android:layout_height="60px"
            android:layout_margin="5dp"
            android:src="@drawable/no_image" >
        </ImageView>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout2"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center"
        android:layout_marginLeft="5dp"
        android:layout_weight="1"
        android:orientation="vertical" >

        <TableLayout
            android:id="@+id/tableLayout1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <TableRow
                android:id="@+id/tableRow2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <TextView
                    android:id="@+id/textView3"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:text="" >
                </TextView>

                <ImageView
                    android:id="@+id/btn_delete"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="right"
                    android:layout_margin="5dp"
                    android:layout_marginRight="5dp"
                    android:src="@drawable/btn_delete" >
                </ImageView>
            </TableRow>

            <TableRow
                android:id="@+id/tableRow1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <TextView
                    android:id="@+id/textView1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="right"
                    android:text="Name: "
                    android:textColor="@color/textcolorWhite" >
                </TextView>

                <TextView
                    android:id="@+id/txtName"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="top"
                    android:text="xdf "
                    android:textColor="#FFFFFF"
                    android:textSize="12sp"
                    android:textStyle="bold" />
            </TableRow>

            <TableRow
                android:id="@+id/tableRow1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <TextView
                    android:id="@+id/textView1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="right"
                    android:text="Price: "
                    android:textColor="@color/textcolorWhite" >
                </TextView>

                <TextView
                    android:id="@+id/txtPrice"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:textColor="#FFFFFF"
                    android:textSize="12sp"
                    android:textStyle="bold" />
            </TableRow>

            <TableRow
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" >

                <TextView
                    android:id="@+id/textView2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="right"
                    android:text="Quantity: "
                    android:textColor="@color/textcolorWhite" >
                </TextView>

                <TextView
                    android:id="@+id/txtQty"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@color/textcolorWhite"
                    android:text="1"
                    android:textColor="@color/textColorBlack" >
                </TextView>

                <Button
                    android:id="@+id/btnPlus"
                    android:layout_width="30dp"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="3dp"
                    android:layout_marginLeft="3dp"
                    android:layout_marginRight="5dp"
                    android:background="@drawable/text_button_bg"
                    android:focusable="false"
                    android:focusableInTouchMode="false"
                    android:padding="5dp"
                    android:text="+" >
                </Button>

                <Button
                    android:id="@+id/btnMinus"
                    android:layout_width="30dp"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="3dp"
                    android:layout_marginRight="5dp"
                    android:background="@drawable/text_button_bg"
                    android:focusable="false"
                    android:focusableInTouchMode="false"
                    android:padding="5dp"
                    android:text="-" >
                </Button>
            </TableRow>

            <TableRow
                android:id="@+id/tableRow4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <TextView
                    android:id="@+id/textView1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="right"
                    android:text="Total: "
                    android:textColor="@color/textcolorWhite" >
                </TextView>

                <TextView
                    android:id="@+id/txtTotal"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="3dp"
                    android:textColor="#FFFFFF"
                    android:textSize="12sp"
                    android:textStyle="bold" />
            </TableRow>
        </TableLayout>
    </LinearLayout>
</LinearLayout> 
```

[http://imageshare.web.id/viewer.php?file=4jlqbt6ge3jj5kq0omht.png](http://imageshare.web.id/viewer.php?file=4jlqbt6ge3jj5kq0omht.png)

数量行的 tetxview 工作很奇怪我不知道为什么...请帮助我提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:05:11.590

我试图创建一个小布局，它会给你创建布局的想法。也许对你有帮助。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

    <TableLayout
        android:id="@+id/tableLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:gravity="center" android:paddingRight="5dp">

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Price : "
                android:textAppearance="?android:attr/textAppearanceMedium" android:singleLine="true" android:gravity="right"/>

            <TextView
                android:id="@+id/textView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:singleLine="true"
                android:text="Medium Text"
                android:textAppearance="?android:attr/textAppearanceMedium" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:gravity="center">

            <TextView
                android:id="@+id/textView3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Quantity : "
                android:textAppearance="?android:attr/textAppearanceMedium" android:layout_weight="1" android:gravity="right"/>

            <RelativeLayout
                android:id="@+id/relativeLayout1"
                android:layout_width="match_parent"
                android:layout_height="wrap_content" android:layout_weight="1" android:layout_gravity="center" android:gravity="center">

                <TextView
                    android:id="@+id/textView4"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_toLeftOf="@id/button1"
                    android:text="Medium Text"
                    android:textAppearance="?android:attr/textAppearanceMedium" android:layout_centerVertical="true"/>

                <Button
                    android:id="@+id/button1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentTop="true"
                    android:text="Button" android:layout_toLeftOf="@id/button2"/>

                <Button
                    android:id="@+id/button2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentRight="true"
                    android:layout_alignParentTop="true"
                    android:text="Button" />

            </RelativeLayout>

        </TableRow>

        <TableRow
            android:id="@+id/tableRow3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
        </TableRow>

        <TableRow
            android:id="@+id/tableRow4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
        </TableRow>
    </TableLayout>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:35:03.643

您是否尝试`android:layout_width="match_parent"`在每个 TableRow 上进行设置？

# java - 添加到 Set 时缺少元素

> ID：10445291
> 
> 赞同：0
> 
> 时间：2012-05-04T08:25:20.507
> 
> 标签：java, collections

```
StringUtils.split(topic.getFirstorgroup(), ",") 
```

返回一个包含 47 个元素的列表。

```
apiFormatBooleanTopic.setTopics(Sets.newHashSet(StringUtils.split(topics.getFirstorgroup(), ",") ); 
```

但是当我试图在接受 set 的方法方法中添加它们时，添加到对象的值只有 28，我想知道为什么其余的都丢失了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T08:27:26.683

A`Set`不能容纳重复的条目。当您添加已包含的条目时，旧条目将被替换。（将其视为 a 的键`Map`）。`equals()`如果该对象的返回 true，则将其视为“包含” 。

# solr - Solr 核心分片的信息

> ID：10445294
> 
> 赞同：0
> 
> 时间：2012-05-04T08:25:30.753
> 
> 标签：solr, full-text-search

我正在研究 Solr 和一些碎片核心。我这样做是因为我曾经的核心和阅读和写作变得非常缓慢。但是当我在大核心上完成分片时，读取时间并没有太大变化，我预计速度会提高 3 倍，因为我制作了大约 5 个核心但没有工作。

所以，Solr 是多线程的。我正在使用 Solr 1.4 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:32:06.323

Solr 搜索时的主要瓶颈是硬盘。

尝试将内核放在不同的物理驱动器或不同的机器上。

# objective-c - ObjC 块和 openssl C 回调

> ID：10445295
> 
> 赞同：6
> 
> 时间：2012-05-04T08:25:37.120
> 
> 标签：objective-c, ios, callback, openssl, block

有一个简单的一次性任务，需要一个进度条。OpenSSL 有一个有用的回调，可以使用它：

```
rsa=RSA_generate_key(bits,RSA_F4,progressCallback,NULL); 
```

和

```
static void callback(int p, int n, void *arg) {
    .. stuff 
```

但是，我想毫不费力地从 ObjectiveC 调用它：

```
 MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
    hud.mode = MBProgressHUDModeAnnularDeterminate;
    hud.labelText = @"Generating CSR";

    [self genReq:^(int p,int n,void *arg) {
            hud.progress = --heuristic to guess where we are --
    } completionCallback:^{
            [MBProgressHUD hideHUDForView:self.view animated:YES];
    }]; 
```

使用 Genrec: 作为 objC 方法：

```
-(void)genReq:(void (^)(int,int,void *arg))progressCallback 
      completionCallback:(void (^)())completionCallback 
{
    .....
    rsa=RSA_generate_key(bits,RSA_F4,progressCallback,NULL);
    assert(EVP_PKEY_assign_RSA(pkey,rsa));
    rsa=NULL;
    ....

   completionCallback();
} 
```

现在完成回调（）；工作出色，符合预期。但我收到一个编译器警告/错误，我无法为进度回调平息：

```
 Passing 'void (^__strong)(int, int, void *)' to parameter of incompatible type 'void (*)(int, int, void *)' 
```

所以我很好奇 - 这样做的适当方法是什么？

谢谢，

德。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T09:33:08.293

**所有代码都只是输入到这个答案中，使用前请仔细测试！**

函数指针和块不是一回事；前者只是对代码的引用，后者是包含代码和环境的闭包；它们不是可以互换的。

你当然可以在 Objective-C 中使用函数指针，所以这是你的第一选择。

如果您想使用块，那么您需要找到一种方法来包装块并将其作为函数引用传递......

的定义`RSA_generate_key`是：

```
RSA *RSA_generate_key(int num,
                      unsigned long e,
                      void (*callback)(int,int,void *),
                      void *cb_arg); 
```

第四个参数可以是任何东西，并作为第三个参数传递给回调；这表明我们可以将*块*连同指向调用它的 C 函数的指针一起传递：

```
typedef void (^BlockCallback)(int,int);

static void callback(int p, int n, void *anon)
{
   BlockCallback theBlock = (BlockCallback)anon; // cast the void * back to a block
   theBlock(p, n);                               // and call the block
}

- (void) genReq:(BlockCallback)progressCallback 
         completionCallback:(void (^)())completionCallback 
{
   .....
   // pass the C wrapper as the function pointer and the block as the callback argument
   rsa = RSA_generate_key(bits, RSA_F4, callback, (void *)progressCallback);
   assert(EVP_PKEY_assign_RSA(pkey,rsa));
   rsa = NULL;
   ....

   completionCallback();
} 
```

并调用：

```
[self genReq:^(int p, int n)
             {
                hud.progress = --heuristic to guess where we are --
             }
      completionCallback:^{
                            [MBProgressHUD hideHUDForView:self.view animated:YES];
                          }
]; 
```

是否需要任何桥接模型（用于 ARC）留作练习！

# html - 如何将类属性分配给 textarea 标签？

> ID：10445297
> 
> 赞同：0
> 
> 时间：2012-05-04T08:25:51.693
> 
> 标签：html, css

我有一个文本区域标签，想写水印功能。所以，我已经为该标签分配了一个类（css）。但它没有得到认可。如果我为 textarea ID 编写 CSS 样式，它正在工作。

```
function renderhtml(subgrid_id, row_id) {debugger;

    var script = "<div style='margin-left:10px; margin-top:10px; margin-bottom:10px;'>";
    script += "<textarea cssClass=watermarkOn cols=20 id=txtCommentSection name=txtCommentSection rows=2>Type your comments here</textarea>";
    script += "<input type='image' id='image' src='../../Content/Images/commentIcon.png'/>";
    script += "</div>";

    return script;
} 
```

这是css样式：

```
.watermarkOn{color: #CCCCCC; font-style: italic;width:800px; height:30px;  } 
```

我尝试将类从“cssClass”更改为“class”，但样式仍然没有受到影响。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T08:28:16.543

使用`textarea class="watermarkOn"`代替`textarea cssClass=watermarkOn`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T08:29:14.687

这条线是罪魁祸首。

```
 script += "<textarea cssClass=watermarkOn cols=20 id=txtCommentSection name=txtCommentSection rows=2>Type your comments here</textarea>"; 
```

它应该是：

```
script += '<textarea class="watermarkOn" cols=20 id="txtCommentSection" name="txtCommentSection "rows=2>Type your comments here</textarea>'; 
```

# c# - Monotouch mp3 错误

> ID：10445307
> 
> 赞同：0
> 
> 时间：2012-05-04T08:26:19.660
> 
> 标签：c#, xamarin.ios, mp3

我正在播放 mp3 为我的 iPad 游戏提供背景音乐，我正在使用以下代码播放歌曲：

```
audioPlayer = AVAudioPlayer.FromUrl(NSUrl.FromFilename(fileName));

audioPlayer.FinishedPlaying += delegate { audioPlayer.Dispose(); audioPlayer=null; };
if (audioPlayer.PrepareToPlay())
    audioPlayer.Play(); 
```

它实际上可以工作，但是在运行时，我在控制台中收到大量错误消息。我做错了吗？我应该担心吗？

这是我得到的错误的转储：

```
2012-05-04 16:22:17.220 Music[42300:22b03] Error loading /System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn: dlopen(/System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn,  262):
    Symbol not found: ___CFObjCIsCollectable   Referenced from:
    /System/Library/Frameworks/Security.framework/Versions/A/Security  
    Expected in:
    /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation in /System/Library/Frameworks/Security.framework/Versions/A/Security    
2012-05-04 16:22:17.223 Music[42300:22b03] Error loading /System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn:  dlopen(/System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn, 262): Symbol not found: ___CFObjCIsCollectable   Referenced from:
    /System/Library/Frameworks/Security.framework/Versions/A/Security  
    Expected in:
    /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation in /System/Library/Frameworks/Security.framework/Versions/A/Security  
2012-05-04 16:22:17.256 Music[42300:22b03] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable   Referenced from:
    /System/Library/Frameworks/Security.framework/Versions/A/Security  
    Expected in:
    /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation in /System/Library/Frameworks/Security.framework/Versions/A/Security  
2012-05-04 16:22:17.258 Music[42300:22b03] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn: dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable Referenced from:
    /System/Library/Frameworks/Security.framework/Versions/A/Security  
    Expected in:
    /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation in /System/Library/Frameworks/Security.framework/Versions/A/Security  
2012-05-04 16:22:17.260 Music[42300:22b03] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn: dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable Referenced from:
    /System/Library/Frameworks/Security.framework/Versions/A/Security  
    Expected in:
    /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation in /System/Library/Frameworks/Security.framework/Versions/A/Security  
2012-05-04 16:22:17.261 Music[42300:22b03] Error loading  /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable Referenced from:
    /System/Library/Frameworks/Security.framework/Versions/A/Security  
    Expected in:
    /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation in /System/Library/Frameworks/Security.framework/Versions/A/Security  
2012-05-04 16:22:17.263 Music[42300:22b03] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn: dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable   Referenced from:
    /System/Library/Frameworks/Security.framework/Versions/A/Security  
    Expected in:
    /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation in /System/Library/Frameworks/Security.framework/Versions/A/Security  
2012-05-04 16:22:17.264 Music[42300:22b03] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable Referenced from:
    /System/Library/Frameworks/Security.framework/Versions/A/Security  
    Expected in:
    /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation in /System/Library/Frameworks/Security.framework/Versions/A/Security 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T10:26:20.363

这些错误似乎是无害的（我见过很多，但没有注意到任何实际问题）。

无论如何，这些错误将在 MonoTouch 的未来版本中得到修复。

# objective-c - 收到推送通知时如何调用函数？

> ID：10445308
> 
> 赞同：0
> 
> 时间：2012-05-04T08:26:22.977
> 
> 标签：objective-c, ios, methods, apple-push-notifications

我正在开发一个带有推送通知的 iphone 应用程序。我的问题是，当我收到推送通知而不创建 classB 的实例或使用静态方法时，如何从 classB 调用函数？

非常感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:36:16.500

您需要在接收推送通知的对象中保存对 classB 的引用：

```
// The header file of the class that receives the notification

@class classB;

@interface MyNotifiedClass : NSObject
{
    classB *_classB;
}

@property (retain, nonatomic, readwrite) classB *classB;

// The implementation file of the class that receives the notification

@implementation MyNotifiedClass

....

@synthesize classB = _classB;

- (void)theMethodThatReceivesTheNotification:(whatever)
{
    [_classB doSomethingNowPlease];
} 
```

你显然必须`classB`在这个类中设置实例才能工作：

```
// Someplace outside both classes (assuming _classB points to an instance of classB
// and _myNotifiedClass points to an instance of MyNotifiedClass)

[_myNotifiedClass setClassB:_classB]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T09:27:16.247

如果不实例化类，就无法调用类的实例方法。您的解决方案是调用类方法或`classB`可能具有单例初始化程序。

# tfs - tfs 工作项（例如风险） - 需要将当前 *html* 字段值复制到另一个新的 html 字段

> ID：10445311
> 
> 赞同：0
> 
> 时间：2012-05-04T08:26:38.290
> 
> 标签：tfs

我计划在 excel 中执行此操作并将更改发布回 TFS，但我得到了 TF84013，[此链接](http://connect.microsoft.com/VisualStudio/feedback/details/559803/unable-to-edit-steps-to-repro-and-expected-result-in-test-cases-exported-to-excel)说这是因为 excel 中的 html 编辑是“简而言之，此时不支持在任何 HTML 字段中从 excel 进行编辑。”

有任何想法吗？我是否必须直接进入 TFS，我正在努力直接从 SQL 数据库中尝试，我想我会尽快编写一个小控制台应用程序来为我做这件事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T09:15:12.510

您不必与 SQL 数据库交互来解决您的问题。（你应该永远远离那个）。

有一个非常易于使用的 TFS API，您可以在其中打开工作项，然后更新其字段并保存它。所以最好的方法是写一个小工具来做到这一点。

看看[这篇文章](http://www.dotnetspider.com/resources/28885-How-access-TFS-work-items-using-TFS-API.aspx)作为一个起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:55:03.537

如果您在同一系统上同时拥有 Team Explorer 和 Powershell，也可以从 PowerShell 使用此 API。可以在此处找到一段更新工作项的示例代码：

[https://serverfault.com/questions/311222/how-to-modify-a-tfs-item-by-using-powershell](https://serverfault.com/questions/311222/how-to-modify-a-tfs-item-by-using-powershell)

# php - Facebook PHP SDK 3.x，有时不给我用户 ID

> ID：10445314
> 
> 赞同：0
> 
> 时间：2012-05-04T08:26:40.927
> 
> 标签：php, facebook-php-sdk

嘿，我正在开发一个 fb 画布应用程序，这个应用程序就像一个控制面板，如果你点击一个按钮，你会转到应用程序的其他部分等，等等，

我使用 facebook 的用户 id 来确定用户是否可以使用该应用程序，因为仅适用于少数人，所以我的问题是 facebook 有时会给我用户 id 有时没有，我使用这个简单的代码

```
$facebook = new Facebook(array(
  'appId'  => 'YOUR_APP_ID',
  'secret' => 'YOUR_APP_SECRET',
  'cookie' => true,

));

// Get User ID
$user = $facebook->getUser();

if ($user){ $auth=true; }else{ $auth=false; } 
```

这段代码在我包含在每个文件中的“config.php”中，然后我使用 $auth 来确定用户是否可以看到我想要的信息，它总是在主页上工作，但有时当我跳转时到应用程序的其他页面（包括 config.php），它没有给我 userId，奇怪的是有时它会

我试图将其存储在会话中，但我意识到当它不显示用户 ID 时，也没有任何会话：S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T09:13:41.703

编辑：抱歉，我没有注意到您正在开发画布应用程序。但是，我将把它留在这里，告诉您仅获取用户 ID 是不够的。

处理 Facebook 身份验证的最简单方法可能是在您的网站上集成[JS-lib 和登录按钮。](https://developers.facebook.com/docs/reference/plugins/login/)然后，php SDK 将“自动”识别身份验证会话，因此您不必:)

另一方面，使用 ID 不足以对用户进行身份验证。您应该`me`使用图形 API 进行获取，以确保用户已对您的应用进行了身份验证：

```
try {
    $user_profile = $facebook->api('/me','GET');
} catch (Exception $e) {
    //Not authenticated
} 
```

# url - 301 URL 从一个域重定向到另一个保持完整 URL

> ID：10445317
> 
> 赞同：2
> 
> 时间：2012-05-04T08:26:54.157
> 
> 标签：url, redirect, url-rewriting

我有两个域 - crmpicco.co.uk 和 ayrshireminis.com - 如果我浏览到：

`www.crmpicco.co.uk/mini/new`我希望能够重定向到`www.ayrshireminis.com/mini/new`

我确定我以前见过这样做，但我不确定这是配置设置还是编码更改。我是否需要以某种方式配置 crmpicco.co.uk 域？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T08:31:51.483

如果你运行 apache，你可以在你的 .htaccess 文件中试试这个：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^(www\.)?crmpicco\.com$
RewriteRule ^(.*)$ http://www.ayrshireminis.com/$1 [R=301,L] 
```

# javascript - animate() 不能连续工作

> ID：10445324
> 
> 赞同：3
> 
> 时间：2012-05-04T08:27:28.323
> 
> 标签：javascript, jquery

我想在 jQuery 中`#ani`连续使用动画。`animate()`我的代码只工作一次。如何制作这个动画循环？

这是我的代码，您可以[在此处](http://jsfiddle.net/9hN2g/)查看在线演示。

**HTML**

```
<div id="ani">animation</div> 
```

**脚本**

```
$('#ani').css('position','absolute');

setTimeout(function(){
    $('#ani').animate({top:'-10px'},2000)
},100);

setTimeout(function(){
    $('#ani').animate({top:'20px'},2000)
},100); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T08:34:26.463

```
$('#ani').css('position','absolute');
function loop(){
    $('#ani').animate({top:'-10px'},2000,function(){
        $('#ani').animate({top:'20px'},2000,function(){
               loop();            
        }) ;                
    })    

}
loop() 
```

我想你可以看到修改后的在线演示：http: [//jsfiddle.net/9hN2g/5/](http://jsfiddle.net/9hN2g/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T08:31:50.740

您需要使用`setInterval()`, not`setTimeout()`并调用动画的第二部分作为第一部分的回调。尝试这个：

```
function animate() {
    $('#ani').stop(true, true).animate({ top: '-10px' }, 1000, function() {
        $('#ani').stop(true, true).animate({ top: '20px' }, 1000)
    })
}

animate(); // on load
setInterval(animate, 2000); // set to run continously 
```

[**示例小提琴**](http://jsfiddle.net/9hN2g/6/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T08:33:14.357

您当前的代码所说的是：

1.  从现在开始十分之一秒 ( `100ms`)，开始一个 2 秒的动画，移动`#ani`到 -10 像素。
2.  在同一时间（另一个`100ms`），开始另一个 2 秒动画，移动`#ani`到 20 像素。

jQuery 在这里所做的是对第二个动画进行排队。你的代码可以写成：

```
setTimeout(function(){
    $('#ani').animate({top:'-10px'}).animate({top:'20px'}),2000);
},100); 
```

对于连续动画，您需要使用`callbacks`; 动画完成时调用的函数。

```
function moveUp() {
   $('#ani').animate({ top: -10 }, 2000, moveDown);
}

function moveDown() {
   $('#ani').animate({ top: 20 }, 2000, moveUp);
}

setTimeout(moveUp, 100); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T08:38:28.160

使您的函数递归。

```
$('#ani').css('position', 'absolute');
anim1();
function anim1() {
    setTimeout(function() {
        $('#ani').animate({
            top: '-10px'
        }, 2000, function(){
            anim2();
        });
    }, 100);
}

function anim2() {
    setTimeout(function() {
        $('#ani').animate({
            top: '20px'
        }, 2000, function(){
            anim1();
        });
    }, 100);
}​ 
```

[演示](http://jsfiddle.net/9hN2g/7/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T09:02:37.163

看到这个[http://jsfiddle.net/9hN2g/8/](http://jsfiddle.net/9hN2g/8/)，只需将 setTimeout() 函数替换为 setInterval() 。

浏览此链接一次，以更好地了解这两个有趣的 diff b/w [http://www.whadiz.com/what-is.aspx/programming/javascript/settimeout-versus-setinterval](http://www.whadiz.com/what-is.aspx/programming/javascript/settimeout-versus-setinterval)

```
$('#ani').css('position','absolute');

setInterval(function(){
    $('#ani').animate({top:'-10px'},2000)
},100);

setInterval(function(){
    $('#ani').animate({top:'20px'},2000)
},100); 
```

# ruby - Ruby - rails - 只读文本值表单输入

> ID：10445333
> 
> 赞同：0
> 
> 时间：2012-05-04T08:27:46.387
> 
> 标签：ruby, ruby-on-rails-3

如何将简单文本打印为表单值并使其不可编辑？我不是在寻找

```
<%= text_field_tag :something, nil, :readonly => true %> 
```

我想要它没有只读输入框。像 html 一样，仍然通过表单发布。

```
<a id="something"></a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:53:05.960

```
<%= hidden_field_tag ... %>
<%= your_variable_here_with_whatever_format_you_want %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T07:22:32.350

渲染字段（字段，前缀，options.merge（：hide_description => true，：readonly => true））

其中 render_field 如下：

# 返回 html def render_field(field, prefix = "", options = {}) hidden = field.fetch("HIDDEN", false) return if hidden field_type = field["TYPE_KIND"].upcase return "Unkown field type #{ field_type}" 除非 %w(CNDGP).include?(field_type)

```
send("render_#{field_type.downcase}_type", *[field, prefix, options]) 
```

结尾

# java - 通过第一个和最后一个字符删除部分字符串？

> ID：10445337
> 
> 赞同：0
> 
> 时间：2012-05-04T08:28:08.327
> 
> 标签：java, android, string

由于查询远程 XML 提要，我得到一个 HTML 字符串。我使用结果将文本设置为`TextView`. 问题是字符串包含`TextView`元素不支持的 HTML 注释标记。

现在，我需要一种通过指示将被删除的部分来删除（子字符串）结果字符串的方法。我不能通过开始和结束位置工作，但我必须使用开始和结束字符串模式（`<!--`作为开始和`-->`结束）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T08:34:01.793

也许使用这个：

```
String str = "your html string";
int start = str.indexOf("<!--");
int end = str.indexOf("-->");
str = str.replace(str.substring(start, (end - start)), ""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T08:35:54.953

我在这里找到了这个。我相信，由于 android 在这里是一个标签，所以答案将是相关的。

```
android.text.Html.fromHtml(instruction).toString() 
```

[从 String 中删除 HTML 标记](https://stackoverflow.com/questions/240546/removing-html-from-a-java-string)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T08:38:54.430

您可以使用正则表达式，例如

```
 String input = "<!-- \nto be removed -->hello <!-- to be removed-->world";
    Pattern pattern = Pattern.compile("<!--.*?-->", Pattern.DOTALL | Pattern.UNICODE_CASE | Pattern.MULTILINE);
    Matcher matcher = pattern.matcher(input);
    StringBuilder builder = new StringBuilder();
    int lastIndex = 0;
    while (matcher.find()) {
        builder.append(input.substring(lastIndex, matcher.start()));
        lastIndex = matcher.end();
    }
    builder.append(input.substring(lastIndex));
    System.out.println(builder); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T08:35:36.697

你也可以使用`HTML.fromHTML`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T08:35:58.187

您可以使用该`Html.fromHtml()`方法在 a 中使用 html 格式的文本`TextView`，例如：

```
CharSequence text = Html.fromHtml("before <!--comment--><b>after</b>");
myTextView.setText(text); 
```

TextView 现在将具有“之前**之后**”的文本。

# cakephp - find('all') 返回两个不同的查询

> ID：10445343
> 
> 赞同：1
> 
> 时间：2012-05-04T08:28:33.220
> 
> 标签：cakephp

我正在使用 cake1.3，我有两个模型：-

```
class Patient extends AppModel {
var $hasMany = array(
    'ConsultingDet' => array(
        'className' => 'ConsultingDet',
        'foreignKey' => 'patient_id',           
    )
);
}

class ConsultingDet extends AppModel {
var $belongsTo = array(
    'Patient' => array(
        'className' => 'Patient',
        'foreignKey' => 'patient_id',
    )   ''
    );
} 
```

当我使用

```
$patients = $this->Patient->find('all') 
```

sqldump 显示了两个查询，一个是从患者中选择字段，第二个是咨询和患者之间的连接查询。（只有我真正需要。）。由于它导致两个不同的查询，我无法向它添加条件？为什么 find 如此返回？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T09:55:49.447

在 hasMany 关系的情况下，Cake 不会进行左连接，仅在属于 belongsTo 的情况下。因此，如果您以相反的方式 ( `$this->ConsultingDet->find('all')`) 执行此操作，则 cake 应该运行一个查询。

如果您想为这两个表应用不同的条件，您只需手动运行两个查询。

如果您想尝试一下，可以通过在 cake 的查询中自定义 'joins' 参数来解决这个问题。

# html - 如何一致地构建多种形式

> ID：10445349
> 
> 赞同：0
> 
> 时间：2012-05-04T08:28:55.717
> 
> 标签：html, css, forms

我目前正在尝试构建多种形式。我不擅长 HTML，所以我的第一次尝试是使用`<table>`标签来保持表单的一致性。

```
<table>
  <tr>
    <form>
      <td><input type="text" /></td><td><input type="submit" value="Display" /></td>
    </form>
  </tr>
  <tr>
    <form>
      <td><input type="text" /></td><td><input type="submit" value="Display" /></td>
    </form>
  </tr>
</table> 
```

这两种形式代表了选择数据的两种可能方式，因此它们需要在代码（即我不能轻易地将它们合并为一个形式）和视觉风格上保持一致。

我希望这能给我两种形式，其中输入字段和按钮（在原始示例中有更多数据和更多按钮）布局一致。但是，这样做有两个问题：

*   这是滥用`<table>`布局。我知道这很糟糕，但在这种情况下，这是我愿意接受的一个缺点。
*   更严重的是：这不是我刚刚学到的有效 HTML，因为 a`<form>`可能不会直接出现在 a`<tr>`中，只能出现在 a 中`<td>`。所以这两种形式不能像他们应该的那样一起工作。

我在网上查看了如何在 HTML 中构建表单并找到了几个链接，但它们都只是一致地处理单个表单的布局（例如通过使用`<dl>`for layout，这应该比 using 更好`<table>`）。这意味着我不知道如何将其应用于始终构建这些单独表单的问题。

有什么好的方法可以实现这一目标吗？

**编辑**：

由于有些人似乎对我的解释感到困惑，这里是我希望最终看起来像的图表：

```
Value1: [input_field1_which_is_longer]  [Button1]
Value2: [input_field2]                  [Button2] 
```

这里`[input_field1_which_is_longer]`又`[Button1]` 属于一种形式。`[input_field2]`并且`[Button2]`属于第二种形式。由于这两种形式提供了两种访问相同数据的不同方法，因此它们应该在视觉上对齐。

我需要两个单独的表格，因为这样我可以保持服务器端的处理部分非常简单（我根本不需要检查按下了哪个按钮，单独的数据就足够了）。如果我试图把它变成一个单一的形式，那么我还必须检测两个按钮中的哪一个被按下，这在处理方面要复杂得多。

此外，如果我只是将这些表格放入简单的单独`<div>`的 s 中，它会看起来变形，因为第一个表格比第二个表格长得多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:56:16.227

使用表格作为表格的结构是可以的；只需忽略宗教上的反对意见，特别是因为字段及其标签构成了表格数据的一个很好的例子。（并非所有数据都是数字。）

你提到的语法问题更严重。是的，它肯定是任何 HTML 版本的无效标记。但它有效。不，没有人可以保证在任何情况下都可以在每个浏览器上运行。如果您查看 Firebug 中的页面，您会看到代码没有被正常解析。因此，样式化表单可能会失败。

HTML5 具有让您使用属性将表单字段与表单相关联的功能，而不是通过句法嵌套进行的普通简单关联。他们会很好地解决问题，只要您可以依靠他们跨浏览器工作（您可能需要等待十年左右☺）。

如果您使用单独的表格，每个表格都有自己的形式，您可以避免这个语法问题。但是你有一个样式问题，因为每个表的列宽分配是单独进行的。设置固定宽度可以解决这个问题，如果使用单位也不会太糟糕`em`，但也不是很理想：您需要猜测或估计宽度，而不是让浏览器自适应地进行。

如果可能的话，理想的解决方案是使其成为一个包含表格的大型表格。然后，服务器端表单处理程序首先需要检查哪个按钮用于提交它，并相应地进行分支。如果表格复杂且结构和功能不同，这将是不可行的。但对于一组小表格，它可能工作得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T15:37:04.360

作为与我的第一个答案不同的方法，您可能会考虑不在 HTML 标记中使用表格，而是在 CSS 中创建表格表示。主要问题似乎是在 IE 9 之前的 IE 中缺乏支持。这在某些情况下可能是可以接受的；在旧的 IE 版本上，该功能仍然存在并且标记将是有效的，但格式会很差。

在这种方法中，您将拥有一个`div`元素，例如`class=forms`，包含`form`元素。在它们内部，您将使用`span`带有 ，`class=cell`而不是元素的`td`元素。你会`display`在 CSS 中使用合适的值，例如

```
<style>
.forms { display: table; }
form   { display: table-row; }
.cell  { display: table-cell; }
</style>
<div class="forms">
   <form action="...">
      <span class="cell"><input type="text" ... /></span>
      <span class="cell"><input type="submit" value="Display" /></span>
   </form>
   <form action="...">
      <span class="cell"><input type="text" ... /></span>
      <span class="cell"><input type="submit" value="Display" /></span>
   </form>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T08:33:28.820

是的...我个人会使用`<form>`然后`<ul>` `<li>`或浮动`<div>`除了表格之外的任何东西，按照标准，它只能用于表格数据。您需要提供更多关于您需要实现的目标的详细信息。就个人而言，我有点困惑。

# dart - 如何在服务器上运行 Dart？

> ID：10445352
> 
> 赞同：8
> 
> 时间：2012-05-04T08:29:07.110
> 
> 标签：dart, dartium

有没有办法在服务器上运行 Dart 代码，类似于 Node.js 运行 javascript 或 ruby​​ 解释器运行 ruby​​ 代码的方式？还是目前只能在 Dartium 中运行？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-04T12:45:57.597

答案是肯定的。

例如，以下文件 Hello.dart：

```
main() => print("Hello World"); 
```

使用命令运行时（在 windows 上，但也适用于 mac、linux）

```
dart.exe Hello.dart 
```

将输出

```
"Hello World" 
```

它非常像 node.js。

此外，在 Dart 编辑器中，您可以单击“新建 > 服务器应用程序”，然后“运行”命令将像上面的示例一样工作

看看这个从命令行运行 http 服务器的[文件。](https://github.com/chrisbu/CrimsonHttp/blob/master/test/crimsonTest.dart)

**更新**：我现在写[了一篇](http://blog.dartwatch.com/2012/05/there-have-been-number-of-posts-on.html)关于这个的博客文章，应该给出一个例子和可运行的代码

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-02T00:26:39.280

是的，您可以运行用 Dart 编写的服务器端应用程序。Dart 项目提供了一个[dart:io 库](http://api.dartlang.org/io.html)，其中包含用于套接字、HTTP 服务器、文件和目录的类和接口。

用 Dart 编写的简单 HTTP 服务器的一个很好的例子：[http ://www.dartlang.org/articles/io/](http://www.dartlang.org/articles/io/)

示例代码：

```
#import('dart:io');

main() {
  var server = new HttpServer();
  server.listen('127.0.0.1', 8080);
  server.defaultRequestHandler = (HttpRequest request, HttpResponse response) {
    response.outputStream.write('Hello, world'.charCodes());
    response.outputStream.close();
  };
} 
```

# ksoap2 - 安卓 3.2 上的 Ksoap2

> ID：10445354
> 
> 赞同：0
> 
> 时间：2012-05-04T08:29:12.283
> 
> 标签：ksoap2, android-3.2-honeycomb

我遇到了一个问题，我在 Android 2.3 上开发了一个应用程序（连接一个 aspx Web 服务）并且它一直在处理。

但我尝试在 Android 3.2 上使用相同的应用程序时遇到了一些问题。

有什么方法可以在 Android 3.2 上使用 Ksoap2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:48:54.740

I think there is a bug on 3.2 . try on 3.1 .that worked for me

# php - 如何在php中foreach语句的每三个结果输出一个值？

> ID：10445357
> 
> 赞同：10
> 
> 时间：2012-05-04T08:29:14.577
> 
> 标签：php, foreach, echo

我的应用程序中有一个`foreach`声明，它与我的数据库结果列表相呼应：

```
<?php

foreach($featured_projects as $fp) {
  echo '<div class="result">';
  echo $fp['project_name'];
  echo '</div>';
}

?> 
```

## 我想：

在每三个结果中，给 div 一个不同的类。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-04T08:32:13.330

您可以使用计数器和[模/模](http://php.net/manual/en/language.operators.arithmetic.php)运算符，如下所示：

```
<?php

// control variable
$counter = 0;

foreach($featured_projects as $fp) {

    // reset the variable
    $class = '';

    // on every third result, set the variable value
    if(++$counter % 3 === 0) {
        $class = ' third';
    }

    // your code with the variable that holds the desirable CSS class name
    echo '<div class="result' . $class . '">';
    echo $fp['project_name'];
    echo '</div>';
}

?> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-04T08:40:33.560

```
<?php

foreach ($featured_projects as $i => $fp) {
    echo '<div class="result' . ($i % 3 === 0 ? ' third' : '') . '">';
    echo $fp['project_name'];
    echo '</div>';
}
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T08:31:19.807

如果`$featured_projects`数组基于增量索引，您可以简单地使用索引和[模`%`运算符](http://en.wikipedia.org/wiki/Modulo_operation)。

否则，您将不得不添加一个计数器。

[http://php.net/manual/en/language.operators.arithmetic.php](http://php.net/manual/en/language.operators.arithmetic.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T08:31:38.380

在此循环中添加一个计数器并检查计数器是否等于 3 并应用类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T08:31:47.243

使用计数器和模运算符，这很容易实现

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T08:35:14.050

这是工作版本，对不起我的上一个版本：

```
<?php
$featured_projects[0]['project_name'] = "pippo";
$featured_projects[1]['project_name'] = "pippo2";
$featured_projects[2]['project_name'] = "pippo3";

$class[0] = "class1";
$class[1] = "class2";

$i=0;
foreach($featured_projects as $fp) {
  $i++;
  if ($i == 3) {
    $c = $class[1];
    $i=0;
  } else {
    $c = $class[0];
  }
  echo "<div class=\"$c\">";
  echo $fp['project_name'];
  echo "</div>\n";
}
?> 
```

产生：

```
<div class="class1">pippo</div>
<div class="class1">pippo2</div>
<div class="class2">pippo3</div> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-04T08:35:36.390

您可以在循环中添加一个计数器...尝试以下操作...

```
 <?php 
 $i = 0; 
 foreach($featured_projects as $fp) {
 $i = ++$i;
 if(($i%3) == 0)
 {
  $class1 = 'test1';
 }
 else
 {
 $class1 = 'test2';
 }
       echo '<div class="'.$class1.'">';
       echo $fp['project_name'];
       echo '</div>';
 }
 ?> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-04T08:36:02.623

```
<?php 
foreach($featured_projects as $fp) {
    if(++$i % 3 === 0) {
        $class = ' something';
    } else {
        $class = '';
    }
    echo '<div class="result' . $class . '">';
    echo $fp['project_name'];
    echo '</div>';
}
?> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-04T08:36:16.693

```
<?php
$i = 0;
foreach($featured_projects as $fp) {
    echo '<div class="'.($i++%3 ? 'result' : 'other_class').'">';
    echo $fp['project_name'];
    echo '</div>';
}
?> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-05-04T08:37:04.190

使您的代码大部分保持不变的是

```
<?php 
$i = 1;
foreach($featured_projects as $fp) {
printf ('<div class="%s">',(($i % 3) ? "result" : "result_every_third" ));
echo $fp['project_name'];
echo '</div>';
$i++;
}
?> 
```

但是您可能需要考虑在“each($featured_projects)”周围使用 for 或 while 构造（请参阅[http://php.net/manual/en/function.each.php](http://php.net/manual/en/function.each.php)），这可能会产生更简洁的代码。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-05-04T08:38:29.097

```
<?php
    $counter = 0;

    foreach ($featured_projects as $fp) {
        echo '<div class="result' . ($counter++ % 3 === 0 ? ' third' : '') . '">';
        echo $fp['project_name'];
        echo '</div>';
    }
?> 
```

# rtc - 修改流中的现有组件

> ID：10445359
> 
> 赞同：1
> 
> 时间：2012-05-04T08:29:24.370
> 
> 标签：rtc

我有一个包含多个顶级文件夹的组件，这些文件夹对应于 jar 文件。向该组件添加新的顶级文件夹（对应于新的 jar 文件）是不好的做法吗？或者我应该在添加组件后添加新组件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T09:21:56.563

不好的做法不是添加新的顶级文件夹，而是首先添加任何 jar。

更一般地说，当您拥有一组连贯的文件时，添加一个新组件是合理的，这些文件可以自行发展，将是分支或标记为全部。
它用于*源*或文本数据。不适用于二进制文件，尤其是您可以从源代码重建的生成的二进制文件。

# java - f:ajax 看不到我的对话

> ID：10445360
> 
> 赞同：0
> 
> 时间：2012-05-04T08:29:25.010
> 
> 标签：java, ajax, jsf-2, cdi, conversation-scope

我的 AJAX 事件有点麻烦，我想知道是否有人可以帮助我找出哪里出错了。

我的页面上有一个下拉列表，当它更改时，我希望它更新此页面的另一部分。当我使用没有长时间对话的页面时，一切正常。但是，一旦我尝试开始长时间运行的对话并尝试使用下拉框，我就会收到“WELD-000321 找不到要恢复 id 1 的对话”错误。谁能想到这其中的原因？我确定对话已经开始并且可用于页面。这是在 Tomcat 6 上运行的，使用 Mojarra 2.1.6，Weld 1.1.5 和 PrimeFaces 也在那里（尽管这部分没有涉及）。

我可以看出错误是由于我的 f:ajax 标签的 onerror 而发生的。这是调用一个 JavaScript 函数，该函数打印出正在发生的错误对象。调试初始页面请求上的代码显示对话已启动，并且打印出对话的部分代码 (#{collectionHome.conversation}) 返回我的对话。

下面是我的代码的精简版本。

**表格：**

```
<ui:define name="metadata">
  <f:metadata>
    <f:event type="preRenderView" listener="#{collectionHome.init(true)}" />
  </f:metadata>
</ui:define>

<ui:define name="content">
  <h:form id="modalForm" class="modalForm">
    <ul class="layout form">
      <li>
        <label for="type" class="required">Type:</label>
        <h:selectOneMenu id="type" value="#{collectionHome.selectedCollectionType}">
          <f:selectItems value="#{collectionHome.types}" var="colType" itemLabel="#{colType.displayName}" itemValue="#{colType}"/>
          <f:ajax event="change" listener="#{collectionHome.switchType}" onerror="handleError" render="@form" />
        </h:selectOneMenu>
        <p:message id="typeMsg" for="type" />
      </li>
      <li>
        <p>#{collectionHome.conversation}</p>
      </li>
      <h:panelGroup rendered="#{collectionHome.selectedCollectionType eq 'IMAGE'}">
        <li>
          <!-- Content to show/hide goes here -->
        </li>
      </h:panelGroup>
    </ul>
  </h:form>
</ui:define> 
```

**收藏首页：**

```
@Named("collectionHome")
public class CollectionHome extends EntityHome<FileCollection> implements Serializable {
  private CollectionTypes selectedCollectionType;

  public boolean doInit() {
    return true;
  }

  public String switchType(AjaxBehaviorEvent event) {
    switch (selectedCollectionType) {
      case IMAGE:
        setEntity(new ImageCollection(getEntity()));
        break;
      case DOCUMENT:
        setEntity(new DocumentCollection(getEntity()));
        break;
      default:
        break;
    }
    return OutcomeStrings.SUCCESS;
  }
} 
```

**实体首页：**

```
@ConversationScoped
public abstract class EntityHome<T extends BaseEntity> {
  @Inject
  private Conversation conversation;

  public void init(boolean startConversation) throws AuthenticationException {
    if (doInit()) {
      if (startConversation) {
        beginConversation();
      }
      postInit();
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T04:53:52.690

我以前见过这样的问题。我记得，这是一个 Mojarra 问题。Ajax 调用未在请求中发送 cid 参数，或者未将其正确添加到视图中。要检查的另一件事是 preRenderView 事件的出现侦听器。它也会被 Ajax 请求调用，因此您需要检查它是否是回发并跳过初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-07T14:14:02.040

我遇到了同样的问题。这是 JSF 2 不传播对话 ID 的问题。尝试以下解决方法。我假设你有来自你正在使用的**p:message的 primefaces。**

```
<h:selectOneMenu id="type" value="#{collectionHome.selectedCollectionType}" onchange="saveCollection([{name:'cid',value:'#{javax.enterprise.context.conversation.id}'}])">
      <f:selectItems value="#{collectionHome.types}" var="colType" itemLabel="#{colType.displayName}" itemValue="#{colType}"/>
</h:selectOneMenu>
<p:remoteCommand name="saveCollection" action="#{collectionHome.switchType}"
                                 process="type" /> 
```

# c++ - Push 和 pop 操作的混合序列为什么这个序列是不可能的

> ID：10445364
> 
> 赞同：7
> 
> 时间：2012-05-04T08:29:52.983
> 
> 标签：c++, algorithm, data-structures, stack

我正在为期末考试而学习，但我无法弄清楚这个问题：

> 假设客户端执行混合的堆栈推送和弹出操作序列。推操作将整数 0 到 9 按顺序推入堆栈；弹出操作打印出返回值。以下哪个序列不能发生？
> 
> (a) 4 3 2 1 0 9 8 7 6 5
> (b) 2 1 4 3 6 5 8 7 9 0
> (c) 0 4 6 5 3 8 1 7 2 9
> (d) 4 6 8 7 5 3 2 9 1 0
> (e) 所有这些序列都是可能的

答案是 C 但我不确定如何得出这个结论

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-04T08:40:34.877

好的，所以程序总是按 0-9 的顺序推送，所以查看每一行，我们计算出推送和弹出的顺序

```
**The first line.**   - Stack is
Pushes 0, 1, 2, 3, 4  - [0, 1, 2, 3, 4]
Pops   4, 3, 2, 1, 0  - []
Pushes 5, 6, 7, 8, 9  - [5, 6, 7, 8, 9]
Pops   9, 8, 7, 6, 5  - []

**Second line**  - Stack is  
Pushes 0, 1, 2   - [0, 1, 2]  
Pops   2, 1      - [0]  
Pushes 3, 4      - [0, 3, 4]  
Pops   4, 3      - [0]  
Pushes 5, 6      - [0, 5, 6]  
Pops   6, 5      - [0]  
Pushes 7, 8      - [0, 7, 8]  
Pops   8, 7      - [0]  
Pushes 9         - [0, 9]  
Pops   9, 0      - []  

**Third line**    - Stack is   
Pushes 0          - [0]  
Pops   0          - []  
Pushes 1, 2, 3, 4 - [1, 2, 3, 4]  
Pops   4,         - [1, 2, 3]  
Pushes 5, 6       - [1, 2, 3, 5, 6]  
Pops   6, 5, 3    - [1, 2]  
Pushes 7, 8       - [1, 2, 7, 8]  
Pops   8          - [1, 2, 7]   
Pops   ? 
```

下一个 pop**必须**是 7，因为它是在 8 之前被推送的，所以它*不能*是 1。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T08:39:08.147

这并不难解决。您只需开始编写序列，直到找到第一个弹出的数字；然后将其划掉并继续。现在我们可以看到为什么第三个序列不能出现：

```
0 // Pop 0
-
1 2 3 4 // Pop 4
1 2 3
1 2 3 5 6 // Pop 6
1 2 3 5 // Pop 5
1 2 3 // Pop 3
1 2
1 2 7 8 // Pop 8
1 2 7 // And here it fails; you cannot possibly pop a 1 from the stack 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T08:43:07.423

对于输出序列中的任何递减子序列，您不能存在`[a1, ..., an]`这样的情况，即存在 k，其中`ak > a1`和没有出现在输出中并且`ak < an`不是子序列的一部分。`ak``ak``[a1, ..., an]`

这里 [8, 1] 是一个这样的子序列，其中 7 没有出现在之前并且仍然不是子序列的一部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T08:37:02.983

您在 1 之前打印了 8，因此当弹出 1 时，直到 8 的数字已经被推送。但如果是这种情况，2 也已被推送，因此它应该在 1 之前弹出。

编辑：更详细一点 - 如果你有一个值 x 然后在序列中有一个值 y 并且你有 x > y 并且 x 在序列中的 y 之前，则区间 [y, x] 中没有值可以满足y 之后的序列。

# c++ - C++ new 运算符 - 内存布局

> ID：10445365
> 
> 赞同：6
> 
> 时间：2012-05-04T08:30:02.723
> 
> 标签：c++, oop, memory

new 运算符是否保证分配连续的堆内存块？即是

```
objects=new Base[1024]; 
```

在内存分配方面与

```
objects=(Base*)malloc(1024*sizeof(base)); 
```

还是可以有差距？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T08:30:34.167

是的，记忆将是连续的。在分配方面，它与`malloc`版本相同，但有几个不同之处（对构造函数的调用，`new`不返回`NULL`，`malloc`不抛出异常等）。

请注意，您不能`new[]`与`delete`or混淆`free`，您必须使用它`delete[] objects`来释放内存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T08:40:56.123

也许。`new`运算符做了两件事：它调用函数，该`operator new`函数将返回一个连续的内存块，为所有可能的类型充分对齐（除非它没有；例如误用的放置新）；然后它调用对象的构造函数，它可以做任何事情。包括分配额外的块，这些块不会与第一个块连续。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T10:59:50.700

如果`new`运算符没有重载，则分配的内存块是连续的。但是如果它重载，我们不知道（一些邪恶的程序员可能已经重载了它？：D）

# io - 第二次调用 READ 得到文件结束错误

> ID：10445367
> 
> 赞同：0
> 
> 时间：2012-05-04T08:30:10.803
> 
> 标签：io, fortran

我正在尝试从文件中读取二进制数据。

```
INTEGER MAX_LAT,MAX_LON,MAX_SHELL,MAX_ORB_PNTS
INTEGER YYYY1,MON1,DD1,HH1,MIN1,DOY1
REAL*8 SEC1

OPEN(20,FILE=INPUTFILE,STATUS='OLD',FORM='UNFORMATTED')
READ(20)MAX_LAT,MAX_LON,MAX_SHELL,MAX_ORB_PNTS
...
READ(20)YYYY1,MON1,DD1,DOY1,HH1,MIN1,SEC1
...
CLOSE(20) 
```

在两者之间（我放'...'）我只是在做一些字节交换和打印读取的数据。

如果我运行此代码，第一个 READ 工作正常。所以我确信输入文件在正确的位置。但是我在第二个 READ 的行中收到此错误：

```
Fortran runtime error: End of file 
```

我的变量的数据类型与编写文件的程序中的相同。无论如何，文件> 3000 KB，所以我很确定在读取四个整数值后无法到达文件末尾。

编辑：正如下面的评论中提到的，问题是字节序。OPEN 语句中的一个简单的 CONVERT='SWAP' 解决了这个问题。感谢所有的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:25:24.270

Fortran 的二进制 I/O 可能非常棘手。我建议您将流用于更像 C 的行为。可以在[这里](http://www.star.le.ac.uk/~cgp/streamIO.html)找到一个很好的介绍。

这个页面可以总结如下：

写作：

```
OPEN(UNIT=11, FILE="file.name", STATUS="NEW", ACCESS="STREAM")
WRITE(11) your,data1,variables
WRITE(11) more,data2 
```

阅读：

```
OPEN(UNIT=22, FILE="file.name", STATUS="OLD", ACCESS="STREAM")
ipos = 1
READ(22,POS=ipos) your,data1,variables
ipos = IPOS + SIZEOF(your) + SIZEOF(data1) + SIZEOF(variables)
READ(22,POS=ipos) more,data2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:25:40.480

奇怪的是错误是“文件结束”而不是“记录结束”。你确定你打开的是正确的文件吗？您是否输出了您在第一次读取时读取的值以查看它们是否正确？如有必要，使用十六进制编辑器来确定预期值。

使用十六进制编辑器检查文件，查看记录长度，并与读取的预期长度进行比较。由于由 Fortran 编写，每条记录都将包含一个具有记录长度的前值和后值，通常为 4 个字节。正如一些评论所暗示的，您可以通过编写测试文件或检查其文档来确定文件中记录长度值的长度，并与当前编译器使用的长度进行比较。一些编译器有编译选项来改变使用的长度。4 字节是典型的，但有时使用 8 字节。

# vba - SoapClient30 在窗口 7 64 位中给出错误

> ID：10445372
> 
> 赞同：3
> 
> 时间：2012-05-04T08:30:20.583
> 
> 标签：vba, deprecated, soap-client

我正在使用 VBA 7。当我尝试为 . 创建一个新对象时`Set sc_SearchEngineXML = New SoapClient30`，它给我一个错误，指出 ActiveX 组件无法创建该对象。

是否有任何替代解决方案可以用来代替已弃用的 SOAP 工具包？

根据[MSDN](http://support.microsoft.com/gp/lifedevtool)：

> 所有 SOAP 工具包都已被 Microsoft .NET Framework 取代。.NET 框架通过 COM 组件和应用程序提供基本的 Web 服务功能。不再支持 3.0 之前的 SOAP Toolkit 版本。对 SOAP Toolkit 3.0 的支持已延长至 2004 年 7 月 1 日的原始停用日期之后，以更接近为 Visual Studio 6.0 提供的支持。SOAP Toolkit 3.0 的标准支持将于 2005 年 3 月 31 日到期，扩展支持将于 2008 年 4 月 8 日到期。有关开发 Web 服务的支持技术的最新信息，请访问 MSDN 网站上的 Web 服务开发人员中心。要了解在 .NET Framework 上构建 Web 服务解决方案的好处并利用最新的高级 Web 服务功能，

请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:01:17.063

[根据这篇迁移文章：http: //msdn.microsoft.com/en-us/library/ms973876.aspx，SOAP](http://msdn.microsoft.com/en-us/library/ms973876.aspx)工具包已迁移到 Web 服务。有一个使用新 .NET SOAP 框架基础知识的演练教程。浏览一下，似乎确实有一个新的 Web 服务框架的明确替代方案，因此我建议您尽可能熟悉它。

许多声明和语法看起来保持相对相同，例如`Set sc = New SoapClient`. 我建议从演练开始，然后通过参考工具推进以了解您的方位。

# c# - c#WinForm如何从代码后面的资源文件中检索值

> ID：10445377
> 
> 赞同：0
> 
> 时间：2012-05-04T08:30:42.083
> 
> 标签：c#, winforms, localization, resources

在 asp.net 我这样使用：

```
 gridView_Desti.Columns["CODE_DEST"].Caption = (string) HttpContext.GetGlobalResourceObject("Client", "Code_Dest"); 
```

我怎样才能在 WinForm 上做同样的事情？

Client 是资源名称文件 --> Client.resx
Code_Dest 是 Client.resx 上的字符串 --> 字符串 Code_Dest，值 Code Destinataire

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T08:33:08.493

您应该`Resources`在项目的`Properties`命名空间中调用一个自动生成的类。每个资源都作为该类中的属性公开。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T08:44:14.490

你可以做 ：

```
Client.ResourceManager.GetString("Code_Dest"); 
```

根据文化，它将在 Client.en-US.resx 中查找字符串（如果 en-US 是您当前的文化），如果失败，则在 Client.resx 中查找。

您也可以像这样访问（Code_Dest 必须在 Client.resx 中）：

```
Client.Code_Dest; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T08:41:51.317

1.  添加新项目 -> 资源，即“Resources1.resx”
    1.  放置必要的资源名称和值，即字符串资源-> 'YourResourcesName' 值。
    2.  访问它的价值`Resources1.YourResourcesName`

希望这有帮助，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-30T01:55:46.973

如果您没有命名空间，则在前面加上“属性”C#，如下所示：

```
Properties.Resources1.YourResourcesName 
```

使用 resx 文件使您的代码更加简洁。例如，我有一个 DataGridViewImageColumn 并为其分配了一个图像（来自 VS Image Library - 该图像是一个 .png 文件）：

```
colAddNewItem.Image = Properties.Resource1.Add_16x; 
```

仅供参考，在 VB.Net 中是

```
Resources.Resources1.YourResourcesName 
```

还有许多其他方法，但这是最简单、最干净和首选的方法。

# webstorm - 无法在 webstorm 上调试 javascript

> ID：10445389
> 
> 赞同：2
> 
> 时间：2012-05-04T08:31:50.377
> 
> 标签：webstorm

我正在尝试让调试在 ff/chrome 上工作。我已经检查了你谷歌时出现的所有帖子。

我所做的： - 设置一个 ff 配置文件 - 设置一个就地部署并仔细检查远程 URL .. - 所有插件都已启用（包括 Javascript 调试器）

似乎 webstorm 调试扩展没有安装在 firefox（或 chrome）中。我找不到任何关于如何安装它的信息。（我已经尝试过重新安装 Webstorm）

当我调试文件时，firefox 会打开，但不显示任何页面，并且 url-bar 是空的..

我正在使用 Webstorm 4.0 和 Firefox 11

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-07T12:23:35.530

虽然这篇文章可能已经过时：您需要在相应的浏览器中安装 JetBrains IDE 扩展。完成后，检查是否为 Webstorm 以及扩展指定了相同的主机和端口。

# python - 非常慢的选择查询，我怎样才能加快速度？

> ID：10445392
> 
> 赞同：5
> 
> 时间：2012-05-04T08:32:05.747
> 
> 标签：python, sql, performance, sqlite, comparison

我问了两个相关问题（[如何在运行 sqlite 查询后加快获取结果的速度？](https://stackoverflow.com/questions/10412604/how-can-i-speed-up-fetching-the-results-after-running-an-sqlite-query)以及[sqlite.fetchall() 这么慢是否正常？](https://stackoverflow.com/questions/10336492/is-it-normal-that-sqlite-fetchall-is-so-slow)）。我已经改变了一些东西并得到了一些加速，但是 select 语句仍然需要一个多小时才能完成。

我有一个`feature`包含`rtMin`、`rtMax`和值`mzMin`的表。`mzMax`这些值一起是矩形的角（如果您阅读我的旧问题，我将这些值分开保存，而不是从`convexhull`表中获取 min() 和 max()，这样可以更快地工作）。
我得到了一个`spectrum`带有一个`rt`和一个`mz`值的表。我有一个表格，当光谱的`rt`和`mz`值在特征的矩形中时，它将特征链接到光谱。

为此，我使用以下 sql 和 python 代码来检索频谱和特征的 id：

```
self.cursor.execute("SELECT spectrum_id, feature_table_id "+
                    "FROM `spectrum` "+
                    "INNER JOIN `feature` "+
                    "ON feature.msrun_msrun_id = spectrum.msrun_msrun_id "+
                    "WHERE spectrum.scan_start_time >= feature.rtMin "+
                    "AND spectrum.scan_start_time <= feature.rtMax "+
                    "AND spectrum.base_peak_mz >= feature.mzMin "+
                    "AND spectrum.base_peak_mz <= feature.mzMax")        
spectrumAndFeature_ids = self.cursor.fetchall()

for spectrumAndFeature_id in spectrumAndFeature_ids:
        spectrum_has_feature_inputValues = (spectrumAndFeature_id[0], spectrumAndFeature_id[1])
        self.cursor.execute("INSERT INTO `spectrum_has_feature` VALUES (?,?)",spectrum_has_feature_inputValues) 
```

我对执行、提取和插入时间进行了计时，得到了以下结果：

```
query took: 74.7989799976 seconds
5888.845541 seconds since fetchall
returned a length of: 10822
inserting all values took: 3.29669690132 seconds 
```

所以这个查询大约需要一个半小时，大部分时间都在执行 fetchall()。我怎样才能加快速度？我应该在 python 代码中进行`rt`和比较吗？`mz`

* * *

## 更新：

为了显示我得到的索引，这里是表的创建语句：

```
CREATE  TABLE IF NOT EXISTS `feature` (
  `feature_table_id` INT PRIMARY KEY NOT NULL ,
  `feature_id` VARCHAR(40) NOT NULL ,
  `intensity` DOUBLE NOT NULL ,
  `overallquality` DOUBLE NOT NULL ,
  `charge` INT NOT NULL ,
  `content` VARCHAR(45) NOT NULL ,
  `intensity_cutoff` DOUBLE NOT NULL,
  `mzMin` DOUBLE NULL ,
  `mzMax` DOUBLE NULL ,
  `rtMin` DOUBLE NULL ,
  `rtMax` DOUBLE NULL ,
  `msrun_msrun_id` INT NOT NULL ,
  CONSTRAINT `fk_feature_msrun1`
    FOREIGN KEY (`msrun_msrun_id` )
    REFERENCES `msrun` (`msrun_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

  CREATE UNIQUE INDEX `id_UNIQUE` ON `feature` (`feature_table_id` ASC);
  CREATE INDEX `fk_feature_msrun1` ON `feature` (`msrun_msrun_id` ASC);

CREATE  TABLE IF NOT EXISTS `spectrum` (
  `spectrum_id` INT PRIMARY KEY NOT NULL ,
  `spectrum_index` INT NOT NULL ,
  `ms_level` INT NOT NULL ,
  `base_peak_mz` DOUBLE NOT NULL ,
  `base_peak_intensity` DOUBLE NOT NULL ,
  `total_ion_current` DOUBLE NOT NULL ,
  `lowest_observes_mz` DOUBLE NOT NULL ,
  `highest_observed_mz` DOUBLE NOT NULL ,
  `scan_start_time` DOUBLE NOT NULL ,
  `ion_injection_time` DOUBLE,
  `binary_data_mz` BLOB NOT NULL,
  `binaray_data_rt` BLOB NOT NULL,
  `msrun_msrun_id` INT NOT NULL ,
  CONSTRAINT `fk_spectrum_msrun1`
    FOREIGN KEY (`msrun_msrun_id` )
    REFERENCES `msrun` (`msrun_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

  CREATE INDEX `fk_spectrum_msrun1` ON `spectrum` (`msrun_msrun_id` ASC);

CREATE  TABLE IF NOT EXISTS `spectrum_has_feature` (
  `spectrum_spectrum_id` INT NOT NULL ,
  `feature_feature_table_id` INT NOT NULL ,
  CONSTRAINT `fk_spectrum_has_feature_spectrum1`
    FOREIGN KEY (`spectrum_spectrum_id` )
    REFERENCES `spectrum` (`spectrum_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_spectrum_has_feature_feature1`
    FOREIGN KEY (`feature_feature_table_id` )
    REFERENCES `feature` (`feature_table_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

  CREATE INDEX `fk_spectrum_has_feature_feature1` ON `spectrum_has_feature` (`feature_feature_table_id` ASC);
  CREATE INDEX `fk_spectrum_has_feature_spectrum1` ON `spectrum_has_feature` (`spectrum_spectrum_id` ASC); 
```

* * *

## 更新2：

我有 20938 个光谱、305742 个特征和 2 个 msruns。结果是 10822 个匹配项。

* * *

## 更新 3：

使用新索引 (CREATE INDEX `fk_spectrum_msrun1_2`ON `spectrum`( `msrun_msrun_id`, `base_peak_mz`);) 之间保存约 20 秒：查询耗时：76.4599349499 秒 5864.15418601 秒自 fetchall

* * *

## 更新 4：

从 EXPLAIN QUERY PLAN 打印：

```
(0, 0, 0, u'SCAN TABLE spectrum (~1000000 rows)'), (0, 1, 1, u'SEARCH TABLE feature USING INDEX fk_feature_msrun1 (msrun_msrun_id=?) (~2 rows)') 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T16:36:57.870

您正在关联两个大表。一些快速的数学运算：300k x 20k = 60 亿行。如果只是返回所有这些行的问题，那么您肯定会受到 I/O 限制（但实际上仅在 ( **O** ) 输出端）。但是，您的 where 子句几乎过滤掉了所有内容，因为您只返回了 10k 行，因此您可以肯定这里的 CPU 受限。

SQLite 一次不能使用多个索引，除了所谓的“ [OR 优化](http://www.sqlite.org/optoverview.html#or_opt)”。此外，您不会从内部连接中获得任何性能提升，因为它们“[被转换为 WHERE 子句的附加条款](http://www.sqlite.org/optoverview.html#joins)”。

底线是 SQLite 将无法像 say `postgresql`et al 那样有效地执行您的查询。

我玩弄了您的场景，因为我很想知道您的查询可以优化多少。最终，似乎最好的优化是删除所有显式索引（！）。似乎 SQLite 计算了一些动态索引/索引，这些索引/索引比我尝试的不同方法具有更好的性能。

作为演示，请考虑从您的模式派生的此模式：

```
CREATE TABLE feature ( -- 300k
    feature_id INTEGER PRIMARY KEY,
    mzMin DOUBLE,
    mzMax DOUBLE,
    rtMin DOUBLE,
    rtMax DOUBLE,
    lnk_feature INT);
CREATE TABLE spectrum ( -- 20k
    spectrum_id INTEGER PRIMARY KEY,
    mz DOUBLE,
    rt DOUBLE,
    lnk_spectrum INT); 
```

`feature`有 300k 行和`spectrum`20k 行（执行此操作的 python 代码在下面的某处）。由于定义，没有指定显式索引，[只有隐](http://www.sqlite.org/lang_createtable.html#constraints)`INTEGER PRIMARY KEY`式索引：

> 除了 INTEGER PRIMARY KEY 列之外，UNIQUE 和 PRIMARY KEY 约束都是通过在数据库中创建索引来实现的（与“CREATE UNIQUE INDEX”语句的方式相同）。这种索引与数据库中的任何其他索引一样用于优化查询。因此，在已经共同受 UNIQUE 或 PRIMARY KEY 约束的一组列上创建索引通常没有优势（但开销很大）。

使用上面的模式，SQLite 提到它会在查询的生命周期内创建一个索引`lnk_feature`：

```
sqlite> EXPLAIN QUERY PLAN SELECT feature_id, spectrum_id FROM spectrum, feature
   ...> WHERE lnk_feature = lnk_spectrum
   ...>     AND rt >= rtMin AND rt <= rtMax
   ...>     AND mz >= mzMin AND mz <= mzMax;
0|0|0|SCAN TABLE spectrum (~20000 rows)
0|1|1|SEARCH TABLE feature USING AUTOMATIC COVERING INDEX (lnk_feature=?) (~7 rows) 
```

即使我在该列或其他列上使用索引进行了测试，似乎运行该查询的最快方法是没有任何这些索引。

我使用 python 运行上述查询的最快时间是 20 分钟。这包括完成`.fetchall()`. 您提到在某个时候您将有 150 倍的行。如果我是你，我会开始调查`postgresql`;-)... 请注意，您可以将工作拆分为线程，并可能将完成查询的时间除以能够同时运行的线程数（即除以可用的 CPU 数量）。

无论如何，这是我使用的代码。您能否自己运行它并报告查询在您的环境中运行的速度。请注意，我正在使用`apsw`，所以如果你不能使用它，你需要调整以使用你自己的 sqlite3 模块。

```
#!/usr/bin/python
import apsw, random as rand, time

def populate(cu):
    cu.execute("""
CREATE TABLE feature ( -- 300k
    feature_id INTEGER PRIMARY KEY,
    mzMin DOUBLE, mzMax DOUBLE,
    rtMin DOUBLE, rtMax DOUBLE,
    lnk_feature INT);
CREATE TABLE spectrum ( -- 20k
    spectrum_id INTEGER PRIMARY KEY,
    mz DOUBLE, rt DOUBLE,
    lnk_spectrum INT);""")
    cu.execute("BEGIN")
    for i in range(300000):
        ((mzMin, mzMax), (rtMin, rtMax)) = (get_min_max(), get_min_max())
        cu.execute("INSERT INTO feature VALUES (NULL,%s,%s,%s,%s,%s)" 
                    % (mzMin, mzMax, rtMin, rtMax, get_lnk()))
    for i in range(20000):
        cu.execute("INSERT INTO spectrum VALUES (NULL,%s,%s,%s)"
                    % (get_in_between(), get_in_between(), get_lnk()))
    cu.execute("COMMIT")
    cu.execute("ANALYZE")

def get_lnk():
    return rand.randint(1, 2)

def get_min_max():
    return sorted((rand.normalvariate(0.5, 0.004), 
                   rand.normalvariate(0.5, 0.004)))

def get_in_between():
    return rand.normalvariate(0.5, 0.49)

def select(cu):
    sql = """
    SELECT feature_id, spectrum_id FROM spectrum, feature
    WHERE lnk_feature = lnk_spectrum
        AND rt >= rtMin AND rt <= rtMax
        AND mz >= mzMin AND mz <= mzMax"""
    start = time.time()
    cu.execute(sql)
    print ("%s rows; %.2f seconds" % (len(cu.fetchall()), time.time() - start))

cu = apsw.Connection('foo.db').cursor()
populate(cu)
select(cu) 
```

我得到的输出：

```
54626 rows; 1210.96 seconds 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T08:37:20.573

让它在 sql 部分更好。

总之，**使用 INDEXES**！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T08:36:39.410

使用 between 代替 >= 和 <= 进行范围比较。

```
self.cursor.execute("SELECT spectrum_id, feature_table_id "+
                        "FROM `spectrum` "+
                        "INNER JOIN `feature` "+
                        "ON feature.msrun_msrun_id = spectrum.msrun_msrun_id "+
                        "WHERE spectrum.scan_start_time between feature.rtMin " + 
                        "AND feature.rtMax "+
                        "AND spectrum.base_peak_mz between feature.mzMin "+
                        "AND feature.mzMax") 
```

您可以在 spectrum.scan_start_time 、feature.rtMin 、feature.rtMax 、spectrum.base_peak_mz、m feature.mzMin 和 feature.mzMax 字段上创建非聚集索引。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-16T22:09:30.040

我运行了 Ludo 的脚本，它在我的系统上报告了 1451 秒。然后我添加了以下索引，将时间缩短到 875 秒（减少了 40%）：

```
CREATE INDEX idx1 ON feature (lnk_feature, mzMin, mzMax, rtMin, rtMax); 
```

仍然不是快得令人眼花缭乱，但更好。这是 EXPLAIN QUERY PLAN 的输出：

```
0|0|0|SCAN TABLE spectrum (~20000 rows)
0|1|1|SEARCH TABLE feature USING COVERING INDEX idx1 (lnk_feature=? AND mzMin<?) (~7 rows) 
```

请注意，这是一个覆盖索引，这意味着 SQLite 可以从索引中读取它需要的所有字段，因此永远不必从特征表中读取。它还能够将索引用于 WHERE 子句中五个条件中的两个（而不是仅一个）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-04T09:06:38.830

在普通的 RDBMS 中，应该在`spectrum`和`features`表之间进行哈希连接。如果您可以强制它执行散列连接，则查询应该会飞。

但是，您可以尝试单个查询吗？

```
self.cursor.execute("INSERT INTO `spectrum_has_feature` " + 
                    "SELECT spectrum_id, feature_table_id "+
                    "FROM `spectrum` "+
                    "INNER JOIN `feature` "+
                    "ON feature.msrun_msrun_id = spectrum.msrun_msrun_id "+
                    "WHERE spectrum.scan_start_time >= feature.rtMin "+
                    "AND spectrum.scan_start_time <= feature.rtMax "+
                    "AND spectrum.base_peak_mz >= feature.mzMin "+
                    "AND spectrum.base_peak_mz <= feature.mzMax") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T09:56:35.307

改变这个

```
CREATE INDEX `fk_spectrum_msrun1` ON `spectrum` (`msrun_msrun_id` ASC); 
```

到其中之一（以更具选择性的为准）

```
CREATE INDEX `fk_spectrum_msrun1_1` ON `spectrum` (`msrun_msrun_id`, `scan_start_time`);
CREATE INDEX `fk_spectrum_msrun1_2` ON `spectrum` (`msrun_msrun_id`, `base_peak_mz`); 
```

第一个可以加快比较，`scan_start_time`第二个可以加快比较`base_peak_mz`。因为这些是不等式比较，所以两列上的索引都没有用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-04T10:39:11.537

1.使用 between 代替 <= 或 =>。

2.在scan_start_time和base_peak_mz上添加索引

# regex - 一次调用中所有匹配项的 Actionscript RegExp 位置和长度

> ID：10445394
> 
> 赞同：2
> 
> 时间：2012-05-04T08:32:13.470
> 
> 标签：regex, actionscript-3, apache-flex, actionscript, position

如何使用 actionscript 中的正则表达式在一次调用中定位文本中某个单词的所有位置。

例如，我有这个正则表达式：

```
var wordsRegExp:RegExp = /[^a-zA-Z0-9]?(include|exclude)[^a-zA-Z0-9]?/g; 
```

它会在文本中找到单词“include”和“exclude”。

我在用

```
var match:Array;
match = wordsRegExp.exec(text) 
```

找到单词，但它首先找到第一个单词。我需要找到所有单词“包含”和“排除”以及位置，所以我这样做：

```
 var res:Array = new Array();
    var match:Array;
    while (match = wordsRegExp.exec(text)) {
        res[res.length]=match;
    } 
```

这可以解决问题，但对于大量文本来说非常非常慢。我正在寻找其他方法，但没有找到。

请提前帮助和感谢。

```
EDIT: I tried var arr:Array = text.match(wordsRegExp);
it finds all words, but not there positions in string 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T11:45:50.390

我想这就是野兽的本性。我不知道您所说的“大量文本”是什么意思，但是如果您想要更好的性能，您应该编写自己的解析函数。这不应该那么复杂，因为您的搜索表达式相当简单。

我从来没有比较过`String`搜索功能和的性能`RegExp`，因为我认为它们都基于相同的实现。如果`String.match()`更快，那么您应该尝试`String.search()`. 使用索引，您可以计算下一次搜索迭代的子字符串。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-13T11:05:21.630

**[在help.adobe.com](http://help.adobe.com/)**网站上找到了这个，...

**[“对字符串使用正则表达式的方法：exec() 方法”](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7ea8.html#WS5b3ccc516d4fbf351e63e3d118a9b90204-7e77)**

…数组还包含一个index属性，表示子串匹配开始的索引位置…</p>

```
var pattern:RegExp = /\w*sh\w*/gi; 
var str:String = "She sells seashells by the seashore"; 
var result:Array = pattern.exec(str); 

while (result != null) 
{ 
    trace(result.index, "\t", pattern.lastIndex, "\t", result); 
result = pattern.exec(str); 
} 
//output:  
// 0      3      She 
// 10      19      seashells 
// 27      35      seashore 
```

# php - 将视图中 Zend_Form 提交的数据传递给模型

> ID：10445396
> 
> 赞同：0
> 
> 时间：2012-05-04T08:32:22.953
> 
> 标签：php, model-view-controller, zend-framework

我使用zend form创建了一个表单，它位于applications目录的form目录中。我在控制器中创建了这个表单的一个实例：

```
public function getBookSlotForm(){
        return new Application_Form_BookSlot();
    }
public function bookSlotAction()
    {
    $form = $this->getBookSlotForm();
    $this->view->form = $form;
    } 
```

并在视图中显示给用户：

```
echo $this->form; 
```

当用户填写表格时，我如何将这些数据存储在模型中的变量中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:20:57.557

就蒂姆而言，他是正确的，但您似乎需要更多细节。您似乎对将表单显示在页面上没有任何问题。现在将该表单中的数据输入您的控制器，然后输入您想要的任何模型，这非常简单直接。

我将假设您在此示例中使用表单中的 post 方法。

当您在任何 php 应用程序中发布表单时，它会将其数据以数组形式发送到`$_POST`变量。在 ZF 中，此变量存储在请求对象的前端控制器中，通常使用它访问`$this->getRequest()->getPost()`并将返回一个关联的值数组：

```
//for example $this->getRequest->getPost();
POST array(2) {
  ["query"] => string(4) "joel"
  ["search"] => string(23) "Search Music Collection"
}

//for example $this->getRequest()->getParams();
PARAMS array(5) {
  ["module"] => string(5) "music"
  ["controller"] => string(5) "index"
  ["action"] => string(7) "display"
  ["query"] => string(4) "joel"
  ["search"] => string(23) "Search Music Collection"
} 
```

作为使用扩展表单时的特殊情况，`Zend_Form`您应该使用访问表单值，`$form->getValues()`因为这将返回已应用表单过滤器的表单值，`getPost()`并且`getParams()`不会应用表单过滤器。

所以现在我们知道我们从将值发送到模型的过程中收到了什么非常简单：

```
public function bookSlotAction()
{
    $form = $this->getBookSlotForm();
    //make sure the form has posted
    if ($this->getRequest()->isPost()){
      //make sure the $_POST data passes validation
      if ($form->isValid($this->getRequest()->getPost()) {
         //get filtered and validated form values
         $data = $form->getValues();
         //instantiate your model
         $model = yourModel();
         //use data to work with model as required
         $model->sendData($data);
      }
      //if form is not vaild populate form for resubmission
      $form->populate($this->getRequest()->getPost());
   }
   //if form has been posted the form will be displayed
   $this->view->form = $form;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:37:43.180

典型的工作流程是：

```
public function bookSlotAction()
{
    $form = $this->getBookSlotForm();
    if ($form->isValid($this->getRequest()->getPost()) {
        // do stuff and then redirect
    }

    $this->view->form = $form;
} 
```

调用 isValid() 还将数据存储在表单对象中，因此如果验证失败，您的表单将重新显示用户输入的数据。

# c - strcmp 返回意外结果

> ID：10445398
> 
> 赞同：3
> 
> 时间：2012-05-04T08:32:44.030
> 
> 标签：c, char, strcmp

如果第一个字符串大于第二个字符串，我认为 strcmp 应该返回一个正数。但是这个节目

```
#include <stdio.h>
#include <string.h>

int main()
{
    char A[] = "A";
    char Aumlaut[] = "Ä";
    printf("%i\n", A[0]);
    printf("%i\n", Aumlaut[0]);
    printf("%i\n", strcmp(A, Aumlaut));
    return 0;
} 
```

打印`65`,`-61`和`-1`.

为什么？有什么我忽略的吗？
我想也许我保存为 UTF-8 的事实会影响事情。你知道，因为`Ä`那里由 2 个字符组成。但是保存为 8 位编码并确保字符串的长度都为 1 并没有帮助，最终结果是相同的。
我究竟做错了什么？

在此处使用 32 位 Linux 下的 GCC 4.3，以防万一。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T08:36:13.347

`strcmp`而其他字符串函数实际上并不支持 utf。在大多数 posix 机器上，C/C++`char`内部是 utf8，这使得大多数事情在读写方面“正常工作”，并提供库理解和操作 utf 代码点的*选项。*但是默认`string.h`函数对文化不敏感，并且不知道任何关于比较 utf 字符串的事情。您可以查看源代码`strcmp`并亲自查看，它是尽可能幼稚的实现（这意味着它也比国际化感知比较函数更快）。

我刚刚[在另一个问题中](https://stackoverflow.com/questions/10444522/c11-case-insensitive-comparison-of-beginning-of-a-string-unicode/10444687#10444687)回答了这个问题——你需要使用一个支持 UTF 的字符串库，比如 IBM 优秀的[ICU - International Components for Unicode](http://www-01.ibm.com/software/globalization/icu/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T08:38:35.567

保存为 8 位 ASCII 编码，`'A' == 65`如果`'Ä'`您认为它是`unsigned char`. 无论如何，`'Ä'`严格来说是正数并且大于 2^7-1，你只是在打印它，就好像它已经签名一样。

如果你认为`'Ä'`是一个`unsigned char`（它是），它的值在你的字符集中是 195。因此，`strcmp(65, 195)`正确报告`-1`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T08:41:23.010

strcmp() 将字符作为无符号 ASCII 值。所以，你的双点 A 不是 char -61，而是 char 195（或者可能是 196，如果我的数学错误的话）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T09:50:22.760

和类似的`strcmp`比较函数将字符串中的字节视为`unsigned char`s，如第 7.24.4 节第 1 节中的标准所指定（在 C99 中为 7.21.4）

> 比较函数 memcmp、strcmp 和 strncmp 返回的非零值的符号由被比较对象中不同的第一对字符**（均解释为无符号字符）**的值之间的差异符号确定。

（强调我的）。

原因可能是这样的解释保持了公共编码中代码点之间的顺序，而将它们解释为有符号`char`的 s 则没有。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T08:44:33.090

Check the strcmp manpage:

```
The strcmp() function compares the two strings s1 and s2\. It returns
an integer less than, equal to, or greater than zero if s1 is found,
respectively, to be less than, to match, or be greater than s2. 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-04T09:07:22.997

当输入字符集超过 UTF8 时，要在 C 中正确处理字符串，您应该使用标准库的宽字符工具来处理字符串和 i/o。你的程序应该是：

```
#include <wchar.h>
#include <stdio.h>

int main()
{
    wchar_t A[] = L"A";
    wchar_t Aumlaut[] = L"Ä";
    wprintf(L"%i\n", A[0]);
    wprintf(L"%i\n", Aumlaut[0]);
    wprintf(L"%i\n", wcscmp(A, Aumlaut));
    return 0;
} 
```

然后它会给出正确的结果（GCC 4.6.3）。你不需要一个特殊的图书馆。

# jquery - 应用 scrollTo 时 jScrollPane 滚动条消失

> ID：10445403
> 
> 赞同：1
> 
> 时间：2012-05-04T08:33:04.670
> 
> 标签：jquery, jquery-plugins, scrollto, jquery-jscrollpane

我对结合了[scrollTo](http://archive.plugins.jquery.com/project/ScrollTo)插件的 jQuery 扩展[jScrollPane有疑问。](http://jscrollpane.kelvinluck.com)如果我将命令应用于可滚动容器**并且滚动条位于顶部位置，则滚动**条会消失。（如果滚动不在顶部位置，则一切正常。）`scrollTo`

 **为了恢复滚动条，我尝试重新初始化它。然后发生的是滚动回到顶部，取消`scrollTo`命令。

我的代码：

```
 $('#myScrollableDiv div.jspContainer').scrollTo(delta);
  c = $('#myScrollableDiv').jScrollPane({
        autoReinitialise: true,
        maintainPosition: true
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:26:22.547

如果使用jScrollPane，则必须使用jScrollPane的功能才能向下滚动。

```
var delta = 20;
var element = $('#myContainer').jScrollPane();
var api = element.data('jsp');
$('#scroll').click(function() {
    api.scrollByY(delta);
});​ 
```

[在 jsfiddle 上试试](http://jsfiddle.net/rUk34/1/)

有关 api 变量的函数列表，请参阅[jScrollPane Api](http://jscrollpane.kelvinluck.com/api.html)。

`p`注意：当您省略文本周围的标签时，它不起作用。**

# c# - 通过 xsi:schemaLocation 属性中指定的 XSD 模式检查 XML

> ID：10445404
> 
> 赞同：1
> 
> 时间：2012-05-04T08:33:06.213
> 
> 标签：c#, .net, xml, linq, xsd

对不起我的英语不好。

C# 4.0，LINQ to XML。

我从 XML 文件中获取 XDocument，例如：

```
<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../../support/localization.xslt"?>
<doc:resources xmlns:doc="http://mea-orbis.com/2012/XMLSchema/localization"
               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xsi:schemaLocation="http://mea-orbis.com/2012/XMLSchema/localization ../../support/localization.xsd">
  <!--Заголовки столбцов таблицы-->
  <doc:record id="commandName">Команда</doc:record>
  <doc:record id="commandNameDescript">Краткое описание</doc:record>
  <doc:record id="commandNameNotes">Примечание</doc:record>
  <!--******************************************-->

  <!--Наименования групп команд-->
  <doc:record id="group1">Команды смены кодировок</doc:record>

  <!--******************************************-->

  <!--Наименования команд, их краткое описание и примечания-->
  <doc:record id="dwgconvertName">DWGCONVERT</doc:record>
  <doc:record id="dwgconvertKeyWords">кодировка</doc:record>
  <doc:record id="dwgconvertDescr">конвертация текущего чертежа (версии AutoCAD до 2011 включительно)</doc:record>

  <doc:record id="dwgconvertcpName">DWGCONVERTCP</doc:record>
  <doc:record id="dwgconvertcpKeyWords">кодировка</doc:record>
  <doc:record id="dwgconvertcpDescr">конвертация текущего чертежа (версии AutoCAD с 2008)</doc:record>

  <doc:record id="dwgconvertfilesName">DWGCONVERTFILES</doc:record>
  <doc:record id="dwgconvertfilesKeyW">кодировка</doc:record>
  <doc:record id="dwgconvertfilesDescr">конвертация выбранных пользователем чертежей</doc:record>

  <doc:record id="dwgconvertstrName">DWGCONVERTSTR</doc:record>
  <doc:record id="dwgconvertstrKeyW">кодировка</doc:record>
  <doc:record id="dwgconvertstrDescr">
    конвертация отдельного текстового примитива (примитивов)
    из текущего чертежа
  </doc:record>
  <doc:record id="ns">DWGCONVERT</doc:record>

  <doc:record id="arxload">Загрузка всех ARX файлов</doc:record>
  <doc:record id="netload">Загрузка всех DLL файлов</doc:record>
</doc:resources> 
```

我需要检查 XDocument 以进行 XSD 模式验证。我在 MSDN 中找到了两个示例： [first](http://msdn.microsoft.com/ru-ru/library/bb340331.aspx)，[second](http://msdn.microsoft.com/en-us/library/bb387037%28v=vs.90%29.aspx)。

但在示例中，XSD 架构与文件是分开的。我不想做多余的操作，因为这些模式已经在我的 XML 文件的 xsi:schemaLocation 属性中指定了。

执行对象 XDocument 检查的正确方法是什么，其中所有必要的模式都已在 xsi:schemaLocation 属性中指定？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T01:07:30.277

这可能有点晚了，但我发现了这个问题，然后我在 Stack Overflow 的其他地方找到了这个答案：

[Validating an XML against referenced XSD in C#](https://stackoverflow.com/questions/751511/validating-an-xml-against-referenced-xsd-in-c-sharp)。

我刚刚检查过它是否至少适用于本地存储的 xsd。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:39:45.850

框架中未构建模式位置的 xsi 属性处理；你必须自己做。

我这样做的方式涉及以下步骤：

*   读取与文档根元素关联的 schemaLocation 或 noNamespaceSchemaLocation 属性。这是您必须提出最适合您需求的解决方案的地方；如果您不关心性能，那么您可以简单地使用基于 DOM 的 API - 它可能会导致对源 XML 进行两次检查：一次将其解析到内存中，然后再次对其进行验证。或者，您使用快速、仅转发的阅读器仅读取根节点的所有属性，寻找您的 xsi: ，然后在超过根元素后放弃阅读。
*   找到后，您必须解析属性值；通常，您在空格（\t、\r、\n、0x20）上调用 string.Split()、修剪所有、丢弃空和配对（当使用命名空间时）。最终，这将为您提供 XSD 所在的 URI 列表
*   对于每个 URI，将其解析为绝对 URI，最终使用 XML 文件的基本绝对 URI 转换任何相对
*   通过添加所有 XSD构建一个[XmlSchemaSet ；](http://msdn.microsoft.com/en-us/library/system.xml.schema.xmlschemaset.aspx)通过从源 XML 获取阅读器来编译它并使用它进行验证。

# php - Symfony2 中多个文件上传的问题

> ID：10445408
> 
> 赞同：14
> 
> 时间：2012-05-04T08:33:13.917
> 
> 标签：php, file-upload, symfony, doctrine-orm, symfony-forms

我正在制作一个需要多个图像上传选项的 Symfony2 应用程序。我已经使用食谱条目进行了单个文件上传：**[如何使用 Doctrine 处理文件上传](http://symfony.com/doc/current/cookbook/doctrine/file_uploads.html)**，效果很好。我已经实现了用于上传和删除的**生命周期回调。**

现在我需要把它变成一个多重上传系统。我也从 Stack Overflow 阅读了一些答案，但似乎没有任何效果。

堆栈溢出问题：

1.  [使用 Symfony2 上传多个文件](https://stackoverflow.com/questions/6736946/multiple-file-upload-with-symfony2)
2.  [多个文件上传 symfony 2](https://stackoverflow.com/questions/8302691/multiple-file-upload-symfony-2)

我目前有以下代码：

**文件**实体：

```
<?php
namespace Webmuch\ProductBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;
use Symfony\Component\HttpFoundation\File\UploadedFile;

/**
 * @ORM\Entity
 * @ORM\HasLifecycleCallbacks
 */
class File
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    public $id;

    /**
     * @ORM\Column(type="string", length=255, nullable=true)
     */
    public $path;

    /**
     * @Assert\File(maxSize="6000000")
     */
    public $file = array();

    public function __construct()
    {

    }

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set path
     *
     * @param string $path
     */
    public function setPath($path)
    {
        $this->path = $path;
    }

    /**
     * Get path
     *
     * @return string 
     */
    public function getPath()
    {
        return $this->path;
    }

    public function getAbsolutePath()
    {
        return null === $this->path ? null : $this->getUploadRootDir().'/'.$this->path;
    }

    public function getWebPath()
    {
        return null === $this->path ? null : $this->getUploadDir().'/'.$this->path;
    }

    protected function getUploadRootDir()
    {
        // the absolute directory path where uploaded documents should be saved
        return __DIR__.'/../../../../web/'.$this->getUploadDir();
    }

    protected function getUploadDir()
    {
        // get rid of the __DIR__ so it doesn't screw when displaying uploaded doc/image in the view.
        return 'uploads';
    }

    /**
     * @ORM\PrePersist()
     * @ORM\PreUpdate()
     */
    public function preUpload()
    {
        if (null !== $this->file) {
            // do whatever you want to generate a unique name
            $this->path[] = uniqid().'.'.$this->file->guessExtension();
        }
    }

    /**
     * @ORM\PostPersist()
     * @ORM\PostUpdate()
     */
    public function upload()
    {
        if (null === $this->file) {
            return;
        }

        // if there is an error when moving the file, an exception will
        // be automatically thrown by move(). This will properly prevent
        // the entity from being persisted to the database on error
        $this->file->move($this->getUploadRootDir(), $this->path);

        unset($this->file);
    }

    /**
     * @ORM\PostRemove()
     */
    public function removeUpload()
    {
        if ($file = $this->getAbsolutePath()) {
            unlink($file);
        }
    }
} 
```

**文件控制器**：

```
<?php

namespace Webmuch\ProductBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Method;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Template;

use Webmuch\ProductBundle\Entity\File;

/**
 * File controller.
 *
 * @Route("/files")
 */
class FileController extends Controller
{
    /**
     * Lists all File entities.
     *
     * @Route("/", name="file_upload")
     * @Template()
     */
    public function uploadAction()
    {
        $file = new File();
        $form = $this->createFormBuilder($file)
            ->add('file','file',array(
                    "attr" => array(
                        "accept" => "image/*",
                        "multiple" => "multiple",
                    )
                ))
            ->getForm()
        ;

        if ($this->getRequest()->getMethod() === 'POST') {
            $form->bindRequest($this->getRequest());
                $em = $this->getDoctrine()->getEntityManager();

                $em->persist($file);
                $em->flush();

                $this->redirect($this->generateUrl('file_upload'));
        }

        return array('form' => $form->createView());
    }
} 
```

和**upload.html.twig**：

```
{% extends '::base.html.twig' %}

{% block body %}
<h1>Upload File</h1>

<form action="#" method="post" {{ form_enctype(form) }}>

    {{ form_widget(form.file) }} 

    <input type="submit" value="Upload" />
</form>
{% endblock %} 
```

我不知道该怎么做才能使它作为一个多文件上传系统工作。我保留了我所遵循的教程中的评论，所以我可以记住正在做什么。

**更新：**

新表格代码：

```
$images_form = $this->createFormBuilder($file)
    ->add('file', 'file', array(
            "attr" => array(
                "multiple" => "multiple",
                "name" => "files[]",
            )
        ))
    ->getForm()
; 
```

新表格树枝代码：

```
<form action="{{ path('file_upload') }}" method="post" {{ form_enctype(images_form) }}>

    {{ form_label(images_form.file) }}
    {{ form_errors(images_form.file) }}
    {{ form_widget(images_form.file, { 'attr': {'name': 'files[]'} }) }}

    {{ form_rest(images_form) }}
    <input type="submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-19T16:43:25.367

[这是GitHub 上引用](https://github.com/symfony/symfony/issues/1400)的一个已知问题。

正如他们所说，您应该附加`[]`到`full_name`模板中的属性：

```
{{ form_widget(images_form.file, { 'full_name': images_form.file.get('full_name') ~ '[]' }) }} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-06T14:23:13.830

我不知道注释语法是否可行。所以我将在控制器中用普通的 PHP 编写它

```
$images_form = $this->createFormBuilder($file)
    ->add('file', 'file', array(
        'constraints' => array(
            new NotBlank(), // Makes sure it is filled at all.
            new All(array( // Validates each an every entry in the array that is uploaded with the given constraints.
                'constraints' => array(
                    new File(array(
                        'maxSize' => 6000000
                    )),
                ),
            )),
        ),
        'multiple' => TRUE,
    ))
    ->getForm(); 
```

从 Symfony 2.4 开始，这应该可以完美运行。在此之前，您必须像以前那样将`multiple`属性放入`attr`键中。

正如我所说，您必须使用注释来完成这项工作。它可能会起作用，但如果您必须将它们全部放在一行中，它的可读性可能会降低。

玩得开心 ;）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-24T21:08:26.740

我最近遇到了同样的问题，按照这里的建议，但出现错误，因为验证器“文件”无法处理数组。

所以我不得不编写自己的验证器，它可以处理多个文件。为此，我遵循[了 Symfony.com 的本教程](http://symfony.com/doc/current/cookbook/validation/custom_constraint.html)，将验证器“文件”中的代码复制/粘贴到其中，用`foreach`循环封装它并根据需要更改变量。

如果你这样做，你可以`$file`在你的实体中使用它。

# javascript - 获取 div 元素的 X 和 Y 坐标

> ID：10445410
> 
> 赞同：19
> 
> 时间：2012-05-04T08:33:22.173
> 
> 标签：javascript, drag-and-drop

我一直在尝试制作一个 javascript 来获取`div`元素的 X 和 Y 坐标。经过一番尝试，我想出了一些数字，但我不确定如何验证它们的确切位置（脚本返回 X 为 168，Y 为 258）我正在运行屏幕分辨率为 1280 的脚本x 800。这是我用来获得此结果的脚本：

```
function get_x(div) {
    var getY;
    var element = document.getElementById("" + div).offsetHeight;
    var get_center_screen = screen.width / 2;

    document.getElementById("span_x").innerHTML = element;
    return getX;
}

function get_y(div) {
    var getY;
    var element = document.getElementById("" + div).offsetWidth;
    var get_center_screen = screen.height / 2;

    document.getElementById("span_y").innerHTML = element;
    return getY;
}​ 
```

现在的问题是。假设这些是函数返回的准确坐标是否合理，或者是否可以轻松地在该位置生成一些东西以查看它到底是什么？

最后，我将如何让这个`div`元素移动？我知道我应该使用`mousedown`事件处理程序和一段时间来继续移动元素，但是非常感谢任何提示/提示我最关心的是如何让 while 循环运行。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-04T08:47:55.877

到目前为止，获取元素的绝对屏幕位置的最简单方法是[`getBoundingClientRect`](https://developer.mozilla.org/en/DOM/element.getBoundingClientRect).

```
var element = document.getElementById('some-id');
var position = element.getBoundingClientRect();
var x = position.left;
var y = position.top;
// Et voilà! 
```

但请记住，坐标[不包括文档滚动偏移量](http://ejohn.org/blog/getboundingclientrect-is-awesome/)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-04T08:50:06.843

这是获取有关 html 元素位置的各种信息的简单方法：

```
 var my_div = document.getElementById('my_div_id');
        var box = { left: 0, top: 0 };
        try {
            box = my_div.getBoundingClientRect();
        } 
        catch(e) 
        {}

        var doc = document,
            docElem = doc.documentElement,
            body = document.body,
            win = window,
            clientTop  = docElem.clientTop  || body.clientTop  || 0,
            clientLeft = docElem.clientLeft || body.clientLeft || 0,
            scrollTop  = win.pageYOffset || jQuery.support.boxModel && docElem.scrollTop  || body.scrollTop,
            scrollLeft = win.pageXOffset || jQuery.support.boxModel && docElem.scrollLeft || body.scrollLeft,
            top  = box.top  + scrollTop  - clientTop,
            left = box.left + scrollLeft - clientLeft; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T08:36:43.393

您还需要使用父母的位置找到位置。这里有一个很好的教程：[http ://www.quirksmode.org/js/findpos.html](http://www.quirksmode.org/js/findpos.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T08:39:37.437

我认为你可以使用 jQuery .offset() [http://api.jquery.com/offset/](http://api.jquery.com/offset/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-03T12:47:14.090

鉴于元素...

```
<div id="abc" style="position:absolute; top:350px; left:190px;">Some text</div> 
```

如果元素在**主文档**中，您可以使用...获取 DIV 的坐标

```
 var X=window.getComputedStyle(abc,null).getPropertyValue('left');

 var Y=window.getComputedStyle(abc,null).getPropertyValue('top'); 
```

如果元素在**iframe**中，您可以使用...获取 DIV 的坐标

```
 var X=FrameID.contentWindow.getComputedStyle(abc,null).getPropertyValue('left');

 var Y=FrameID.contentWindow.getComputedStyle(abc,null).getPropertyValue('top'); 
```

注意：返回值的格式应为“190px”和“350px”。

# bash - 从文件中复制文件列表

> ID：10445417
> 
> 赞同：2
> 
> 时间：2012-05-04T08:34:19.193
> 
> 标签：bash, shell, ftp

我的文件包含由行尾分隔的文件列表

```
$ cat file_list
file1
file2
file3 
```

我想用 FTP 复制这个文件列表

我怎样才能做到这一点 ？我必须写一个脚本吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T08:45:38.317

You can turn your list of files into list of ftp commands easily enough:

```
(echo open hostname.host; 
 echo user username; 
 cat filelist | awk '{ print "put " $1; }'; 
echo bye) > script.ftp 
```

Then you can just run:

`ftp -s script.ftp`

Or possibly (with other versions of ftp)

`ftp -n < script.ftp`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T08:44:07.613

Something along these lines - the `somecommand` depends on what you want to do - I don't get that from your question, sorry.

```
#!/bin/bash
# Iterate through lines in file
for line in `cat file.txt`;do
#your ftp command here do something    
 somecommand $line
done 
```

edit: If you really want to persue this route for multiple files (you shouldn't!), you can use the following command in place of `somecommand $line`:

```
ncftpput -m -u username -p password ftp.server.com /remote/folder $line 
```

ncftpput propably also takes an arbitrary number of files to upload in one go, but I havn't checked it. Notice that this approach will connect and disconnect for every single file!

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T17:32:20.057

感谢有关如何将文件列表提供给 ftp 的非常有用的示例。这对我来说效果很好。

在 Linux (CentOs 5.5) 中创建我的 ftp 脚本后，我运行该脚本：

```
ftp –n < ../script.ftp 
```

我的脚本（更改名称以保护无辜者）开头是：

```
open <ftpsite>
user <userid> <passwd>
cd <remote directory>
bin
prompt
get <file1>
get <file2> 
```

并以：

```
get <filen-1>
get <filen>
bye 
```

# android - 如何在android中拖动多个图像

> ID：10445425
> 
> 赞同：2
> 
> 时间：2012-05-04T08:34:53.547
> 
> 标签：android

我可以在画布上拖动一张图片。现在我想拖动多张图片。有没有可能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T05:48:43.960

使用此代码对您很有帮助，如果有帮助，请点击右侧。

```
package edu.sbcc.cs123.draganddropbasic;

import android.app.*;
import android.graphics.*;
import android.os.*;
import android.view.*;
import android.view.View.*;
import android.widget.*;

  @SuppressWarnings("deprecation")
   public class DragAndDropBasicActivity extends Activity implements OnTouchListener {
private ImageView letterView;                       // The     letter that the user drags.
private ImageView emptyLetterView;              // The letter outline that the user is supposed to drag letterView to.
private AbsoluteLayout mainLayout;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mainLayout = (AbsoluteLayout) findViewById(R.id.mainLayout);
    mainLayout.setOnTouchListener(this);
    letterView = (ImageView) findViewById(R.id.letterView);
    letterView.setOnTouchListener(this);

    emptyLetterView = (ImageView) findViewById(R.id.emptyLetterView);
}

private boolean dragging = false;
private Rect hitRect = new Rect();

@Override
/**
 * NOTE:  Had significant problems when I tried to react to ACTION_MOVE on letterView.   Kept getting alternating (X,Y) 
 * locations of the motion events, which caused the letter to flicker and move back and forth.  The only solution I could 
 * find was to determine when the user had touched down on the letter, then process moves in the ACTION_MOVE 
 * associated with the mainLayout.
 */
public boolean onTouch(View v, MotionEvent event) {
    boolean eventConsumed = true;
    int x = (int)event.getX();
    int y = (int)event.getY();

    int action = event.getAction();
    if (action == MotionEvent.ACTION_DOWN) {
        if (v == letterView) {
            dragging = true;
            eventConsumed = false;
        }
    } else if (action == MotionEvent.ACTION_UP) {

        if (dragging) {
            emptyLetterView.getHitRect(hitRect);
            if (hitRect.contains(x, y))
                setSameAbsoluteLocation(letterView, emptyLetterView);
        }
        dragging = false;
        eventConsumed = false;

    } else if (action == MotionEvent.ACTION_MOVE) {
        if (v != letterView) {
            if (dragging) {
                setAbsoluteLocationCentered(letterView, x, y);
            }
        }
    }

    return eventConsumed;

}

private void setSameAbsoluteLocation(View v1, View v2) {
    AbsoluteLayout.LayoutParams alp2 = (AbsoluteLayout.LayoutParams) v2.getLayoutParams();
    setAbsoluteLocation(v1, alp2.x, alp2.y);
}

private void setAbsoluteLocationCentered(View v, int x, int y) {
    setAbsoluteLocation(v, x - v.getWidth() / 2, y - v.getHeight() / 2);
}

private void setAbsoluteLocation(View v, int x, int y) {
    AbsoluteLayout.LayoutParams alp = (AbsoluteLayout.LayoutParams) v.getLayoutParams();
    alp.x = x;
    alp.y = y;
    v.setLayoutParams(alp);
}
  } 
```

和 XML 是......

```
 <?xml version="1.0" encoding="utf-8"?>
 <AbsoluteLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"  
    android:id="@+id/mainLayout">

<ImageView 
    android:layout_height="wrap_content" 
    android:layout_width="wrap_content" 
    android:id="@+id/emptyLetterView" 
    android:src="@drawable/r_empty" 
    android:layout_x="200px" 
    android:layout_y="300px">

</ImageView>

<ImageView 
    android:layout_height="wrap_content" 
    android:layout_width="wrap_content" 
    android:id="@+id/letterView" 
    android:src="@drawable/r_filled" >

</ImageView> 
```

# php - 使用mysql表上的空间索引选择最近的地理坐标不起作用

> ID：10445429
> 
> 赞同：1
> 
> 时间：2012-05-04T08:35:02.187
> 
> 标签：php, mysql

我有一个 mysql MyISAM 表，其中包含许多行，其中包含有关地点的信息，例如地理坐标和地名。

我想根据给定的输入纬度和经度从该表中选择最近的地方。我想创建一个包含地理坐标点的列，使用空间索引和 MBRContains 来选择数据。

选择数据时出现错误。我将写下我在这里执行的步骤：

# 第1步

```
ALTER TABLE mytable ADD mypoint Point;

UPDATE  mytable
SET     mypoint = Point(lat, lon);

ALTER TABLE mytable MODIFY mypoint NOT NULL;

CREATE SPATIAL INDEX sx_mytable_coords ON mytable(mypoint ); 
```

结果：我在 mypoint 列中看到了这一点（我不确定这是否可行，但所有记录都一样）：`[GEOMETRY - 25Bytes]` 我看到添加了索引：`Name: mypoint Type: SPATIAL Field: mypoint (32) Collation: A`

# 第2步

我尝试以两种方式选择数据：

1.  推荐用于低于 MySQL 5.1 的版本（我的情况）

    ```
    SET @lat = 40;
    SET @lon = -10;

    SELECT  *
    FROM    mytable
    WHERE   MBRContains(LineFromText(CONCAT(
            '('
            , @lon + 10 / ( 111.1 / cos(RADIANS(@lon)))
            , ' '
            , @lat + 10 / 111.1
            , ','
            , @lon - 10 / ( 111.1 / cos(RADIANS(@lat)))
            , ' '
            , @lat - 10 / 111.1 
            , ')' )
            ,mypoint) 
    ```

    ### 我收到此错误：

    > 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本对应的手册，以在第 15 行的 'LIMIT 0, 30' 附近使用正确的语法

2.  推荐用于高于 MySQL 5.1 的版本

    ```
    SET @lat = 40;
    SET @lon = -10;

    SELECT  *
        FROM    mytable
        WHERE   MBRContains
                        (
                        LineString
                                (
                                Point
                                        (
                                        @lon + 10 / ( 111.1 / COS(RADIANS(@lat))),
                                        @lat + 10 / 111.1
                                        ) 
                                Point
                                        (
                                        @lon - 10 / ( 111.1 / COS(RADIANS(@lat))),
                                        @lat - 10 / 111.1
                                        ) 
                                ),
                        mypoint
                        ) 
    ```

    ### 我收到此错误：

    > 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 12 行的“Point (”附近使用正确的语法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T09:11:15.877

你有一个丢失的括号，你没有关闭你的 LineFromText。

尝试：

```
SELECT  *
FROM    mytable
WHERE   MBRContains(LineFromText(CONCAT(
    '('
    , @lon + 10 / ( 111.1 / cos(RADIANS(@lon)))
    , ' '
    , @lat + 10 / 111.1
    , ','
    , @lon - 10 / ( 111.1 / cos(RADIANS(@lat)))
    , ' '
    , @lat - 10 / 111.1 
    , ')' ))
    ,mypoint) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T09:05:24.433

1.  你缺少一个`)`.

2.  您在`,`两个`Point`函数调用之间缺少 a 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T09:05:56.930

LineString 中的点之间不需要`,`分隔符吗？就像是

```
LineString(1 1,2 2,3 3) 
```

或者

```
LineString
(
   Point
   (
        @lon + 10 / ( 111.1 / COS(RADIANS(@lat))),
        @lat + 10 / 111.1
   ) 
   ,
   Point
   (
        @lon - 10 / ( 111.1 / COS(RADIANS(@lat))),
        @lat - 10 / 111.1
   ) 
) 
```

# for-loop - lisp循环整数位的方式

> ID：10445433
> 
> 赞同：3
> 
> 时间：2012-05-04T08:35:11.143
> 
> 标签：for-loop, lisp, common-lisp, bit-manipulation, sbcl

假设我有一个整数，例如 109, 1101101 二进制。如何迭代此数字的位，例如：[64, 32, 8, 4, 1]？在 lisp 中这样做的好方法是什么？我应该通过添加一个案例来稍微修改 for 宏，还是应该将整数转换为位向量或列表？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T09:01:56.230

如果您只想处理“一个”，那么如果这些位很少，则循环遍历所有位是无效的。这就是我在这种情况下要做的

```
(defmacro do-bits ((var x) &rest body)
  "Evaluates [body] forms after binding [var] to each set bit in [x]"
  (let ((k (gensym)))
    `(do ((,k ,x (logand ,k (1- ,k))))
         ((= ,k 0))
       (let ((,var (logand ,k (- ,k))))
         ,@body)))) 
```

它使用了一个很好的 2-complement 事实，即对一个数字和它的对面进行位与运算会返回最低有效设置位，并且将一个数字与比该数字小一的数字与运算会将这个最低有效设置位归零。

请注意，此处理从最低有效设置位到最高有效（在您的示例中，您使用了相反的顺序）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-04T10:34:21.643

看一下[logbitp](http://clhs.lisp.se/Body/f_logbtp.htm)，它可以让您访问整数的各个位。例如，

```
(loop for i below (integer-length 109)
      collect (if (logbitp i 109) 1 0))

=> (1 0 1 1 0 1 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T09:42:33.313

这可能不太复杂，但可以。请注意，您需要在使用它之前测试“zerop”，因为如果您使用零调用它，则不会调用迭代回调。

```
(defun iterate-bits-of (x handler)
  (unless (zerop x)
    (and (funcall handler (logand x 1))
     (iterate-bits-of (ash x -1) handler))))

(iterate-bits-of
 #b1101101
 #'(lambda (x) (not (format t "bit ~b~&" x))))
;; bit 1
;; bit 0
;; bit 1
;; bit 1
;; bit 0
;; bit 1
;; bit 1 
```

另请注意，对于大数字，“ash”可能会变得非常昂贵，在这种情况下，您可能希望使用 6502 的变体。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-06-19T14:11:19.333

```
( defun firstbit (x)
  ( logand x (- x)))

( defun ones (x)
  ( do (( bit (firstbit x) (firstbit x)) bits)
    (( zerop bit) bits)
    ( setq bits (cons bit bits))
    ( setq x (logxor x bit)))) 
```

提供

```
* (ones 109)

(64 32 8 4 1) 
```

# c# - 使用规则将字符串转换为树表示

> ID：10445437
> 
> 赞同：7
> 
> 时间：2012-05-04T08:35:27.490
> 
> 标签：c#, .net, algorithm, data-structures

我要做一些简单的 RTF 文本解析，我需要纠正一个问题。给定以下字符串：

```
{aaaaaaa\}aaaa\{aaaaa{bbbbbbbb{ccccc\{cccc}bbb{eeeee}{{gggg}ffff}bbbbbb}aaaaa} 
```

在哪里：

```
\ means ignore next character
{ means expand
} means collapse up to parent 
```

在字符串中的任何点，状态都可能受到任何先前字符的影响，除了封闭标签中的字符。例如 {gggg} 不会影响 ffff 但 aaaaaaa}aaa.. 会影响`bbbb, ccc, eee, ggg, fff`等等。

由此我们可以将上述内容拆分为有意义的块

```
A1 = aaaaaaa\}aaaa\{aaaaa
B1 = bbbbbbbb
C = ccccc\{cccc
B2 = bbb
E = eeeee
G = gggg
F = ffff
B3 = bbbbbb
A2 = aaaaa 
```

产量：

```
{A1{B1{C}B2{E}{{G}F}B3}A2} 
```

为了描述我使用 X > Y 的依赖关系，意味着 Y 依赖于 X（因为 X 可能会改变 Y 的含义）

```
A1
A1 > B1
A1 > B1 > C
A1 > B1 > B2
A1 > B1 > B2 > E
A1 > B1 > B2 > G
A1 > B1 > B2 > F
A1 > B1 > B2 > B3
A1 > B1 > B2 > A2
A1 > A2 
```

因此，如果我们有一个可以具有值和子值的有序列表的节点。这样价值树看起来像这样：

```
A1
- B1
- - C
- - B2
- - - E
- - - G
- - - F
- - - B3
- A2 
```

然后要获得影响任何节点的字符，我可以递归地逐步遍历每个父节点。

我一直卡在试图将字符串解析到我的节点类中：

```
public class myNode
{
    public myNode Parent;
    public string Value;
    public List<myNode> subNodes;
} 
```

我逐个字符地读取字符串，当我遇到 a 时，`\`我增加了 2。当我遇到 a 时，`{`我将之前的文本部分保存为节点值并进入子节点，当我遇到 a 时，我会`}`退出。

但我一直在搞乱逻辑，尤其是对于`G`and `A2`。在纸上做起来很简单，但是当我尝试做实际的下台逻辑时，我一直把它搞砸了。

有没有更直接的方法来制作这种结构？（或者我应该使用更好的结构）。我认为应该有一些库允许将字符串转换为树，但我似乎找不到任何东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T09:42:28.740

使用“状态机”方法，其中状态是当前节点和转义标志：

```
string rtf = @"{aaaaaaa\}aaaa\{aaaaa{bbbbbbbb{ccccc\{cccc}bbb{eeeee}{{gggg}ffff}bbbbbb}aaaaa}";

Node root = new Node { Parent = null, Value = "root", SubNodes = new List<Node>() };
Node node = root;
bool escape = false;
foreach (char c in rtf) {
  if (escape) {
    node.Value += c;
    escape = false;
  } else {
    switch (c) {
      case '{':
        node = new Node { Parent = node, Value = String.Empty, SubNodes = new List<Node>() };
        node.Parent.SubNodes.Add(node);
        break;
      case '}':
        node = new Node { Parent = node.Parent.Parent, Value = String.Empty, SubNodes = new List<Node>() };
        if (node.Parent != null) node.Parent.SubNodes.Add(node);
        break;
      case '\\':
        escape = true;
        break;
      default:
        node.Value += c;
        break;
    }
  }
}

PrintNode(root, String.Empty); 
```

Node 类（只是重命名了一点）：

```
public class Node {
  public Node Parent;
  public string Value;
  public List<Node> SubNodes;
} 
```

对于显示：

```
private static void PrintNode(Node node, string level) {
  if (node.Value.Length > 0) Console.WriteLine(level + node.Value);
  foreach (Node n in node.SubNodes) {
    PrintNode(n, level + "  ");
  }
} 
```

输出：

```
root
  aaaaaaa}aaaa{aaaaa
    bbbbbbbb
      ccccc{cccc
    bbb
      eeeee
        gggg
      ffff
    bbbbbb
  aaaaa 
```

请注意，G 节点不是 E 节点的子节点，而是具有空值的节点的子节点。

当然，您还必须添加一些错误处理。

# objective-c - Mac OS X Lion 上的图标叠加

> ID：10445439
> 
> 赞同：2
> 
> 时间：2012-05-04T08:35:31.830
> 
> 标签：objective-c, macos, finder

我尝试在 Mac 上添加图标叠加，比如 Dropbox！我已经搜索过了，我试试[这个](https://stackoverflow.com/questions/1294335/how-to-write-os-x-finder-plugin/8782596#8782596)

[使用 SIMBL 插件，所以我按照快速教程了解如何在此处](http://code.google.com/p/simbl/wiki/Tutorial)制作 SIMBL 插件

就像 Les Nie 所说，我尝试使用 class-dump 获取所有 Finder 的标头，我尝试这样做：

```
./class-dump -H /System/Library/PrivateFrameworks/FinderKit.framework/FinderKit 
```

但是 Les Nie 代码出现了一些错误！

有谁知道是什么：

```
struct TNSRef<id> _parent; 
```

我收到此错误：

```
Expected member name or ';' after declaration specifiers 
```

有人已经设法在 Mac OS-X Lion 上添加 Overlay Icon 吗？而且我知道如果我这样做了，我将不会像 dropbox 一样出现在 App Store 上！

谢谢，

# ios - iOS 多窗口自动旋转

> ID：10445451
> 
> 赞同：1
> 
> 时间：2012-05-04T08:36:06.227
> 
> 标签：ios, uiinterfaceorientation

我正在构建一个库，在其中创建一个窗口，然后将我自己的视图控制器（UIViewController 类的子类）附加到它。现在我需要在测试应用程序中使用它。现在，当我尝试在更改方向时旋转此屏幕时，它不会发生，因为我自己的视图控制器没有收到 shouldAutoRotateOnOrientaionChange 通知。如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T09:20:56.420

在目标设置`Supported Device Orientations`的`Summary`选项卡中设置。

# apache - apache：无权访问此服务器上的 /。当我使用虚拟主机时

> ID：10445455
> 
> 赞同：2
> 
> 时间：2012-05-04T08:36:14.153
> 
> 标签：apache, vhosts

例如，文档根目录`virtualHost`为`/var/www`，服务器名称为`aaa.com`。但是，如果我使用and`forbidden`访问服务器，apache 会告诉我。如果我将选项更改为，apache 将运行良好。我不知道为什么？`localhost``aaa.com``Directory``http.conf``/var/www`

我想`Directory`在 every 中设置选项`httpd-vhosts.conf`，而不是在 中`httpd.conf`，我该怎么做？

这是我的`http.conf`：

![在此处输入图像描述](../Images/0d786de2bccf2118e368348c16a4e0a2.png)

这是我的`httpd-vhosts.conf`：

![在此处输入图像描述](../Images/48914daafb22d369063c639ecb7e3b6b.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-04T11:42:57.777

在`http.conf`文件中，您应该只为`<Directory />`. 您应该在`httpd-vhosts.conf`文件中定义的所有 VirtualHosts 选项。就像是：

httpd.conf：

```
DocumentRoot "/var/www"

<Directory />
        Order deny,allow
        Deny from all
        Options None
        AllowOverride None
</Directory> 
```

httpd-vhosts.conf：

```
ServerName aaa.com
DocumentRoot /var/www

<Directory /var/www>
        Options FollowSymLinks Includes
        AllowOverride All
        Order allow,deny
        Allow from all
</Directory> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-05-12T10:04:07.880

此配置对 apache 2.2 版有效

`apachectl -V`首先通过在终端中输入来检查您的 apache 版本。

如果它显示这样的东西

```
Server version: Apache/2.4.27 (Ubuntu)
Server built:   2018-04-18T14:20:05 
```

然后您的 apache 版本已更新，但您使用的 conf 已弃用。

所以而不是

**2.2 配置：**

```
Order allow,deny
Allow from all 
```

用这个：

**2.4 配置：**

```
Require all granted 
```

有关升级的更多文档，请遵循官方文档：

[http://httpd.apache.org/docs/current/upgrading.html](http://httpd.apache.org/docs/current/upgrading.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-22T04:42:56.223

**2.4 配置：**

```
<Directory />

Options All
AllowOverride All

</Directory> 
```

# asp.net-mvc - 如何根据 ASP.NET MVC3 中的条件使用或不使用标签？

> ID：10445471
> 
> 赞同：0
> 
> 时间：2012-05-04T08:37:17.147
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller, tags, conditional

我怎样才能正确使用以下内容？

```
{ bool submitter = value; }

...

@(submitter ? "" : @"<a href=""" + Url.Action(actionName, "Queue") + @""">")
<div>
    ...
</div>
@(submitter ? "" : "</a>") 
```

我的错误是锚标记定义正在输出，就像它应该在 Web 浏览器的 HTML 代码中一样，而不是看到周围的链接，`<div>`我看到了`<a href="...`等。

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T08:52:56.033

这是因为除非您使用 HTML5，否则您不能将块级元素（例如`div`）放入内联元素（例如）中。`a`从你的描述我猜你不是。

如果您正在检查浏览器 DOM 检查器，您将看到您的代码如下所示：

```
<div></div>
<a href="queue/action"></a>
<div></div>
<a></a> 
```

如果需要，另一种方法是更改​​您的`div`to并在 CSS 中`span`设置它。`display: block`

此外，这种逻辑最好放在 ViewModel 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T02:21:06.703

如果您不想进行编码，则需要使用 Raw 扩展方法：

```
@Html.Raw(submitter ? "" : @"<a href=""" + Url.Action(actionName, "Queue") + @""">")
<div>
    ...
</div>
@Html.Raw(submitter ? "" : "</a>") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T10:42:48.820

我找到的解决方案：找到

```
@(new MvcHtmlString(@"<a href=""..."">blah blah</a>")) 
```

# php - PHP MySQL Query 按项目分组

> ID：10445474
> 
> 赞同：0
> 
> 时间：2012-05-04T08:37:35.527
> 
> 标签：php, mysql, json

我使用以下 php 查询从 mySQL 获取此 JSON 结果：

```
/* grab the posts from the db */
 $query = "SELECT * FROM ko_timetable";
 $result = mysql_query($query,$link) or die('Errant query:  '.$query);

 /* create one master array of the records */
 $posts = array();

if(mysql_num_rows($result)) {

while($post = mysql_fetch_assoc($result)) {
      $posts[] = array('post'=>$post);
    } 
} 
```

**JSON结果**：

```
post =         {
"CLASS_LEVEL" = "Intro/General";
"CLASS_TYPE" = "Muay Thai";
"DAY_OF_WEEK" = Sunday;
ID = 19;
"ORDER_BY" = 5;
TIME = "1:00pm - 2:30pm";
};
}
{
post =         {
"CLASS_LEVEL" = "General/Intermediate/Advanced";
"CLASS_TYPE" = "Muay Thai Spar - Competitive";
"DAY_OF_WEEK" = Sunday;
ID = 27;
"ORDER_BY" = 5;
TIME = "6:00pm - 9:00pm";
};
},
{
post =         {
"CLASS_LEVEL" = "Fighters/Advanced/Intermediate";
"CLASS_TYPE" = "Fighters Training";
"DAY_OF_WEEK" = Monday;
ID = 1;
"ORDER_BY" = 1;
TIME = "9:30am - 11:00pm";
}; 
```

但是如何更改此查询以按“DAY_OF_WEEK”获取此结果组。请参阅下面的示例，感谢您的帮助：

```
{
Sunday =         {
"CLASS_LEVEL" = "Intro/General";
"CLASS_TYPE" = "Muay Thai";
"DAY_OF_WEEK" = Sunday;
ID = 19;
"ORDER_BY" = 5;
TIME = "1:00pm - 2:30pm";
};
{
"CLASS_LEVEL" = "General/Intermediate/Advanced";
"CLASS_TYPE" = "Muay Thai Spar - Competitive";
"DAY_OF_WEEK" = Sunday;
ID = 27;
"ORDER_BY" = 5;
TIME = "6:00pm - 9:00pm";
};
},
{
Monday =         {
"CLASS_LEVEL" = "Fighters/Advanced/Intermediate";
"CLASS_TYPE" = "Fighters Training";
"DAY_OF_WEEK" = Monday;
ID = 1;
"ORDER_BY" = 1;
TIME = "9:30am - 11:00pm";
}; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T09:56:39.430

您可以像这样使用 DAY_OF_WEEK 作为数组索引，

```
while($post = mysql_fetch_assoc($result)) {
      $posts[$posts["DAY_OF_WEEK"]] = array('post'=>$post);
    } 
```

但请记住，在示例中，您显示数组的索引是日期的名称，然后上周日的结果将被本周周日替换，依此类推。您还可以使用计数变量来避免用重复名称替换键，就像这样。

```
$count = 1;
while($post = mysql_fetch_assoc($result)) {
      $posts[$posts["DAY_OF_WEEK"].$count] = array('post'=>$post);
      $count++;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T08:42:39.717

改变这个：

```
while($post = mysql_fetch_assoc($result)) {
    $posts[ $post['DAY_OF_WEEK'] ] = $post;
} 
```

# git - 无法推或拉到 Github

> ID：10445478
> 
> 赞同：2
> 
> 时间：2012-05-04T08:37:49.717
> 
> 标签：git, github, push

当我尝试拉动时：

```
error: cannot open .git/FETCH_HEAD: Permission denied 
```

当我尝试 push 或 a 时`push -u origin master`：

```
master -> master (non-fast-forward)
error: failed to push some refs to 'git@github.com:xxxxxxxx/xxxxxxxxxx.git'
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes before pushing again.  See the 'Note about
-forwards' section of 'git push --help' for details. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T08:47:25.363

通读“man git-push”，他们提到“git pull”应该足以解决这个问题，但是由于您收到“错误：无法打开.git/FETCH_HEAD：权限被拒绝”，您是否可能创建了使用 sudo 分支？如果是这样，您的用户可能无法读取您的文件。仔细检查您的用户帐户是否可以读取文件 .git/FETCH_HEAD。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T08:49:26.740

您的本地副本可能与远程集线器不同步。

从/向 github repo 拉/推时，这是一个很好的指南：

1.  git stash - 确保您的更改被存储并且您的副本恢复到与远程同步的最后一次提交。
2.  git pull - 从远程拉取更改
3.  git stash pop - 将您的更改合并到最新的源代码
4.  git mergetool - 如果存在冲突，您需要在合并更改之前执行此操作。
5.  git commit - 在本地仓库中提交更改
6.  git push - 将您的更改推送到远程。

# iphone - UIButton 禁用和启用背景图像

> ID：10445480
> 
> 赞同：3
> 
> 时间：2012-05-04T08:38:00.893
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我的应用程序由几个按钮组成，当用户触摸其中一个按钮时，它们下方会出现一个阴影，其余按钮不应有任何背景图像，我需要类似 Instagram 应用程序效果的东西，这是我的代码，但我的问题是当我触摸时其他按钮没有出现阴影。

```
#define BGB [btn setBackgroundImage:[UIImage imageNamed:@"shadow.png"] forState:UIControlStateNormal]
#define _BGB [btn setBackgroundImage:nil forState:UIControlStateNormal]

- (IBAction)effectsPerform:(id)sender {

    UIButton *btn = (UIButton *)sender;

    if (btn == EB0) { BGB; } else {  _BGB; }
    if (btn == EB1) { BGB; } else {  _BGB; }
    if (btn == EB2) { BGB; } else {  _BGB; }

    //and other buttons ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:52:34.953

试试这个方法：

```
-(void)changeButton:(UIButton *)button background:(UIImage *)image
{
    [button setBackgroundImage:image forState:UIControlStateNormal];
}

- (IBAction)effectsPerform:(UIButton *)sender 
{
    [self changeButton:sender background:(sender == EB0 || sender == EB1 || sender == EB2) ? [UIImage imageNamed:@"shadow.png"] : nil];
} 
```

更新：您可以在 viewDidLoad: 方法中为您可以设置的每个按钮使用另一种方法：

```
[button setBackgroundImage:nil forState:UIControlStateNormal];
[button setBackgroundImage:[UIImage imageNamed:@"shadow.png"] forState:UIControlStateSelected]; 
```

然后在你的`-(IBAction)effectsPerform:`

```
- (IBAction)effectsPerform:(UIButton *)sender 
{
    button1.isSelected = (sender == button1);
    button2.isSelected = (sender == button2);
    ....
} 
```

...这样您就可以保证您只有一个选定的按钮。您可以做些什么来优化您的代码是您可以继承 UIButton 并在 init 方法中调用背景设置方法，然后所有按钮都可以是这种类型（您可以通过设置它们的类在界面构建器中标记它们） - 这个这样您就不需要为每个按钮的每个状态设置背景图像。

# java - JUnit 和 JFileChooser

> ID：10445503
> 
> 赞同：3
> 
> 时间：2012-05-04T08:40:15.953
> 
> 标签：java, junit, jfilechooser

我遇到了一些使用 JFileChoosers 的测试用例的问题。我正在寻找一种在运行 JUnit 测试时以编程方式摆脱文件选择器窗口（而不是按 ESC 7 次）的方法。

我试图在我的测试用例中包含以下内容：

```
Robot robot = new Robot();
robot.delay(1000);
robot.keyPress(KeyEvent.VK_ESCAPE); 
```

这似乎不起作用。你有什么建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T09:14:49.420

只是一个猜测，但听起来`Robot`你在启动`JFileChooser`. 如果没有记忆，许多 JFileChooser 方法会阻塞当前线程，直到用户选择了一个文件。

`Robot`如果您还没有，请尝试在单独的线程中启动。

编辑：

例如：

```
// Start Robot in a new thread.
new Thread(new Runnable() {
    @Override
    public void run() {
        Robot robot = new Robot();
        robot.delay(1000);
        robot.keyPress(KeyEvent.VK_ESCAPE);
    }
}).start();

// Launch JFileChooser.
jFileChooser.getSelectedFile(); 
```

# objective-c - NSWindow 是否有 IBAction

> ID：10445504
> 
> 赞同：0
> 
> 时间：2012-05-04T08:40:24.197
> 
> 标签：objective-c, xcode4

在 ViewController 的子视图中，我们可以指定加载表单时表单将执行的操作等。我们可以为 NSWindow 对象执行此操作吗？看起来每次我拖放时，我唯一能拉出的就是插座。

我们通常可以使用 Assistant Editor 通过拖放来创建 IBAction。

# java - 删除 TitledBorder 中标题周围的空格

> ID：10445513
> 
> 赞同：1
> 
> 时间：2012-05-04T08:41:16.580
> 
> 标签：java, swing, user-interface, border, titled-border

如何删除 TitledBorder 中标题周围的空格？我的意思是这个红色边框
[![红色边框](../Images/df424cd45707c61f3b6c0d0d64dd14cb.png)](https://i.stack.imgur.com/b5spT.jpg)

一段代码：

```
Font f = new Font(Font.DIALOG, Font.PLAIN, 14);
Map m = f.getAttributes();
m.put(TextAttribute.BACKGROUND, Color.yellow);
Font ff = new Font(m);
Border mb = BorderFactory.createMatteBorder(20, 0, 0, 0, Color.yellow);
Border test = BorderFactory.createEmptyBorder(-2,-2,-2,-2);
Border mb6 = BorderFactory.createTitledBorder(mb, "Title", TitledBorder.CENTER, TitledBorder.TOP, ff, Color.DARK_GRAY);
mb6 = BorderFactory.createCompoundBorder(test, mb6);
Border mb2 = BorderFactory.createMatteBorder(1, 0, 0, 0, Color.gray);
mb2 = BorderFactory.createCompoundBorder(test,mb2);
Border mb3 = BorderFactory.createCompoundBorder(mb6, mb2);
Border mb4 = BorderFactory.createMatteBorder(1, 1, 1, 1, Color.gray);
Border mb5 = BorderFactory.createCompoundBorder(mb4, mb3);
modeSetPanel.setBackground(Color.red);
modeSetPanel.setBorder(mb5); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T12:34:40.610

如果您不关心边框，您可以在设置选项卡面板中添加一个 JPanel。在此 JPanel 中，您可以添加另一个带有 BorderLayout 的 JPanel。在带有 BorderLayout 的那个里面添加两个 JPanel：北一个是黄色背景，中间一个是红色背景。只需在黄色的 JPanel 中添加一个标有“标题”的 JLabel，在红色的 JPanel 中添加您的控件。

标签周围的红色边框消失了。

这是一个没有任何边界且在 Nimbus 外观和感觉中的示例：

![样本...](../Images/65930b16119f85890cc974c35166429e.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T12:56:41.393

事实上这不是一个答案，但评论中的图像是不可能的......

我试过这段代码：

```
import java.awt.Color;
import java.awt.Font;
import java.awt.font.TextAttribute;
import java.util.Map;

import javax.swing.BorderFactory;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.border.Border;
import javax.swing.border.TitledBorder;

public class RedBorderProblem extends JFrame {

    public RedBorderProblem() {
        final JPanel modeSetPanel = new JPanel();

        final Font f = new Font( Font.DIALOG, Font.PLAIN, 14 );
        final Map m = f.getAttributes();
        m.put( TextAttribute.BACKGROUND, Color.yellow );
        final Font ff = new Font( m );
        final Border mb = BorderFactory.createMatteBorder( 20, 0, 0, 0, Color.yellow );
        final Border test = BorderFactory.createEmptyBorder( -2, -2, -2, -2 );
        Border mb6 = BorderFactory.createTitledBorder( mb, "Title", TitledBorder.CENTER, TitledBorder.TOP, ff,
                Color.DARK_GRAY );
        mb6 = BorderFactory.createCompoundBorder( test, mb6 );
        Border mb2 = BorderFactory.createMatteBorder( 1, 0, 0, 0, Color.gray );
        mb2 = BorderFactory.createCompoundBorder( test, mb2 );
        final Border mb3 = BorderFactory.createCompoundBorder( mb6, mb2 );
        final Border mb4 = BorderFactory.createMatteBorder( 1, 1, 1, 1, Color.gray );
        final Border mb5 = BorderFactory.createCompoundBorder( mb4, mb3 );
        modeSetPanel.setBackground( Color.red );
        modeSetPanel.setBorder( mb5 );

        this.add( modeSetPanel );

        this.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
        this.pack();
        this.setVisible( true );
    }

    public static void main( final String[] args ) {
        new RedBorderProblem();
    }

} 
```

结果是

![在此处输入图像描述](../Images/fa7770df5675acca2d30d226984d956e.png)

# ios - Navigation controller with two views

> ID：10445518
> 
> 赞同：0
> 
> 时间：2012-05-04T08:41:31.337
> 
> 标签：ios

I have a navigation controller that controls view switch. How can I show a view without removing the current view?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:45:50.547

如果您的新视图有视图控制器使用

[self.navigationController presentModalViewController:newController Animation:YES];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:48:28.200

This will add a view to the viewcontrollers view.

```
[parentView addSubview:subView]; 
```

This will add the view in variable `subView` into the view in variable `parentView`. In your case this would mean parentView is the viewcontroller's view and the subView is the view you want to add.

You can change the position of the subView in the parentView by setting the subview's subview.frame property.

If you are talking about a viewController you want to show take a look at the answer of Andiih.

# android - Refill Layout when hiding some elments

> ID：10445523
> 
> 赞同：0
> 
> 时间：2012-05-04T08:41:47.800
> 
> 标签：android, android-layout

I would like to show different elements to the user.
Therefore I would like to hide some elements, while others will show.
However, replaced elements cannot fill up the original area.

So are there any method to replace it.?

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <VideoView
        android:id="@+id/lesson_main_left_videoView"
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight="6" />

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/lesson_main_left_LinearLayout"
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight="6"
        android:orientation="horizontal" >

        <EditText
            android:id="@+id/lesson_main_left_record"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:editable="false"
            android:ems="10"
            android:singleLine="false" />

        <ListView
            android:id="@+id/lesson_main_left_buddyList"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:animateLayoutChanges="true" />
    </LinearLayout>

    <TableRow
        android:id="@+id/lesson_main_left_tableRow1"
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight="1" >

        <EditText
            android:id="@+id/lesson_main_left_message"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="4" >
        </EditText>

        <Button
            android:id="@+id/lesson_main_left_send"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="SEND" />
    </TableRow>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T08:44:27.297

Yes, you can do that, using

```
setVisibility(View.GONE) 
```

(instead of View.INVISIBLE).

# drupal - Pass search word to template in Drupal Solr search

> ID：10445526
> 
> 赞同：0
> 
> 时间：2012-05-04T08:41:59.283
> 
> 标签：drupal, solr, drupal-7, drupal-theming

Can I get the searched word passed to the search-results.tpl.php template? I am using Drupal and Solr search.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T17:31:33.140

尝试将搜索到的文本保存在 $variables['makeurown'] 之类的全局变量中，然后在模板文件中访问它。它应该工作。

# python - Python：脚本发送的邮件被Gmail标记为垃圾邮件

> ID：10445528
> 
> 赞同：4
> 
> 时间：2012-05-04T08:42:02.087
> 
> 标签：python, email, gmail, spam

我们有一个 python 脚本，它每天将邮件发送到一个 xml 地址列表。这些邮件始终被 Gmail 标记为垃圾邮件。这是代码：

```
 email_body =  '<html><body><div style="text-align: center; font-family: serif; font-size: 15px;"><br/><br/>@<br/><br/>' + text_splited[i] + '<br/><br/>@<br/><br/><a href="http://anemailstory.net/"><i>Tr@ces</i></a><br/><br/> - <br/><br/><a href="http://anemailstory.net/unsubscribe.html">unsubscribe</a><br/><br/></div></body></html>'  
#text corresponding to that subcription date    

            # email     
            msg = MIMEMultipart('alternative') #Create Multipart msg (allows html)
            msg['To'] = email.utils.formataddr(('Recipient', 'readers@traces.net'))
            msg['From'] = email.utils.formataddr(('Traces', 'traces@anemailstory.net'))
            msg['Subject'] = 'Tr@ces - Part #' + str((i+2))

            part_html = MIMEText(email_body, 'html')
            msg.attach(part_html)

            server = smtplib.SMTP('localhost')
            server.set_debuglevel(False) # show communication with the server
            try:
                server.sendmail('traces@noreply.net', email_addrs, msg.as_string())
            finally:
                server.quit() 
```

这是生成的电子邮件：

```
Return-path: <traces@noreply.net>
Envelope-to: mimmo@mimmo.com
Delivery-date: Wed, 25 Apr 2012 23:59:07 -0600
Received: from localhost ([127.0.0.1] helo=host131.hostmonster.com)
    by host131.hostmonster.com with esmtp (Exim 4.76)
    (envelope-from <traces@noreply.net>)
    id 1SNHjO-0006T0-C2; Wed, 25 Apr 2012 23:59:06 -0600
Content-Type: multipart/alternative;
    boundary="===============1468314745133566460=="
MIME-Version: 1.0
To: Recipient <readers@traces.net>
From: Traces <traces@anemailstory.net>
Subject: Tr@ces - Part #9
X-Identified-User: {:host131.hostmonster.com:andrecas:host131.hostmonster.com} {sentby:program running on server}

--===============1468314745133566460==
Content-Type: text/html; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit

<html><body><div style="text-align: center; font-family: serif; font-size: 15px;"><br/><br/>@<br/><br/><br/>Mail content<br/><br/><br/>@<br/><br/><a href="http://anemailstory.net/"><i>Tr@ces</i></a><br/><br/> - <br/><br/><a href="http://anemailstory.net/unsubscribe.html">unsubscribe</a><br/><br/></div></body></html>
--===============1468314745133566460==-- 
```

你有什么解决办法吗？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T08:46:22.883

您的电子邮件几乎只包含 HTML 和一个链接。这闻起来像垃圾邮件。

建议：

*   发送纯文本电子邮件（不太可能被视为垃圾邮件 - 对许多用户来说更舒服）
*   如果您使用 HTML，请始终包含纯文本版本
*   提高文本到链接/html 的比率。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T09:01:43.397

嗯...取决于 SMTP 的签名，这可能接近“垃圾邮件”。

1.  尝试将“noreply.net”更改为真实域

2.  也可能是服务器主机名 *.hostmonster.com 位于垃圾邮件列表中，因为来自其任何服务器的已知垃圾邮件（经常发生）

3.  许多其他原因...

    *   错误的新行
    *   错误的日期/时间格式
    *   电子邮件客户端无法处理您的邮件（格式错误）
4.  尝试使用另一个 SMTP 服务器，看看它是签名还是服务器，而不是你的脚本！

5.  还尝试发送带有更少图像/链接甚至更多文本的邮件！

如果是垃圾邮件，您能否提供一些有关 X-Spam-Status、X-Spam-Level、X-Spam-DCC（标头元素）的信息。他们对出了什么问题给出了最好的概述！

-- 关于垃圾邮件的一些附加信息：http: [//emailium.com/blog/wp-content/uploads/2011/02/Exact-Target-Infographic-Spam_vs_Whitelist-v2.jpg](http://emailium.com/blog/wp-content/uploads/2011/02/Exact-Target-Infographic-Spam_vs_Whitelist-v2.jpg)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T12:29:16.907

也可以试试 Google 的这个帮助文档。如果您做了相应的操作，您可以联系 Google 支持。

[https://support.google.com/mail/bin/answer.py?hl=en&answer=81126](https://support.google.com/mail/bin/answer.py?hl=en&answer=81126)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-20T12:48:28.820

如果您使用 google smtp 发送电子邮件，请确保使用与您的 FirstName 匹配的 Sender's Name 和与您的 google 帐户匹配的 Lastname，例如：

名字：约翰姓氏：Doe

在蟒蛇中：

```
sender_address = john.doe@gmail.com

message["From"] = f"John Doe{sender_address}" 
```

这让我犯了很多错误和尝试。

# objective-c - 指定初始化器和 initWithFrame

> ID：10445531
> 
> 赞同：1
> 
> 时间：2012-05-04T08:42:14.603
> 
> 标签：objective-c, ios

我创建了一个以这种方式定义的指定初始化程序的类：

```
-(id)initWithFrame:(CGRect)frame 
          aProperty:(float)value {

    self = [super initWithFrame:frame];

    if(self){   
        ///....do something 
    }
} 
```

现在我想知道如何避免直接调用 initWithFrame 方法，例如：

```
MyClass *theObj = [MyClass alloc]initWithFrame:theFrame]; 
```

我想过在 initWithFrame 定义中抛出异常：

```
- (id)initWithFrame:(CGRect)frame
{
    @throw ([NSException exceptionWithName:@"InitError" 
                                    reason:@"This class needs to be initialized with initWithFrame:aProperty: method" 
                                  userInfo:nil]);
} 
```

这是一个好的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T08:46:11.713

使用默认值调用指定的初始化程序怎么样`aProperty`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T08:49:09.250

我在初始化器中使用的两种技术。我敢肯定还有更多。

技术1：

在 initWithFrame 中，使用属性的默认值调用您的初始化程序

```
- (id)initWithFrame:(CGRect)frame
{
    return [self initWithFrame:frame aProperty:1.0f];
} 
```

技术2：

只需返回零；

```
- (id)initWithFrame:(CGRect)frame
{
    return nil;
} 
```

# c# - LINQ query with multiple join result represented as comma seperated results

> ID：10445536
> 
> 赞同：0
> 
> 时间：2012-05-04T08:42:47.297
> 
> 标签：c#, linq, linq-to-entities

The query below returns a list of leads joined to an "address" table, of where there can be multiple per lead.

I'm looking to return one response per lead, with addresses concatenated in the city view within the model and seperated by commas. If there are no cities in the join result, it should return '-'.

**CURRENT OUTPUT**

```
Company Name | Company City
===========================
Company 1    | Glasgow
Company 1    | London
Company 2    | London
Company 3    | NULL 
```

**DESIRED OUTPUT**

```
===========================
Company 1    | Glasgow, London
Company 2    | London
Company 3    | - 
```

**QUERY**

```
 return (from t1 in db.Opportunities
                    from s1 in db.OpportunityStatus.Where(x => x.OpportunityStatus_ID == t1.StatusReason_ID)
                    from t2 in db.Leads.Where(x => x.Lead_ID == t1.Lead_ID)
                    from t3 in db.LeadAddresses.Where(x => x.Lead_ID == t2.Lead_ID).DefaultIfEmpty()
                    from t4 in db.Addresses.Where(x => x.Address_ID == t3.Address_ID).DefaultIfEmpty()
                    orderby (t1.Created) descending
                    select new FieldSalesPipelineViewModel
                    {
                        Id = t1.Opportunity_ID,
                        CompanyName = t2.Company_Name,
                        OpportunityTitle = t1.Opportunity_Title,
                        CompanyCity = "",
                        OpportunityStatusName = s1.OpportunityStatus_Name
                    }).Take(howMany); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T08:49:05.740

Try a string-join:

```
CompanyCity = string.Join(",", (from p in db.Opportunities where t2.companyname == p.companyname select p.Companycity) 
```

For your example:

```
 return (from t1 in db.Opportunities
                    from s1 in db.OpportunityStatus.Where(x => x.OpportunityStatus_ID == t1.StatusReason_ID)
                    from t2 in db.Leads.Where(x => x.Lead_ID == t1.Lead_ID)
                    from t3 in db.LeadAddresses.Where(x => x.Lead_ID == t2.Lead_ID).DefaultIfEmpty()

                    orderby (t1.Created) descending
                    select new FieldSalesPipelineViewModel
                    {
                        Id = t1.Opportunity_ID,
                        CompanyName = t2.Company_Name,
                        OpportunityTitle = t1.Opportunity_Title,
                        CompanyCity = string.Join(",", (from t4 in db.Addresses Where t4.Address_ID == t3.Address_ID select t4.CompanyCity),
                        OpportunityStatusName = s1.OpportunityStatus_Name
                    }).Take(howMany); 
```

# javascript - How to toggle multiple overlays in Google Maps?

> ID：10445538
> 
> 赞同：1
> 
> 时间：2012-05-04T08:43:02.907
> 
> 标签：javascript, jquery, html, google-maps

I have a click event that grabs coordinates remotely, lays them on a map, and connects them with a polyline. I have other click events that do the same, but want to keep them as a separate layer so that the user can toggle to view each of the clicks they have done. Does anyone know of a good way to group them separately to do this or another approach?

Here is my code so far:

```
drawPoints: function (points, color) {
    $.each(points, function (key, val) {
        var location = new google.maps.LatLng(val.Latitude, val.Longitude);
        MyTest.addMarker(location, val.Name, val.Description);
        MyTest.coordinates.push(location);
    });

    this.path = new google.maps.Polyline({
        path: MyATest.coordinates,
        strokeColor: color,
        strokeOpacity: 1.0,
        strokeWeight: 2
    });

    this.path.setMap(this.googlemap);
},

addMarker: function (location, title, html) {
    var marker = new google.maps.Marker({
        position: location,
        map: this.googlemap,
        title: title,
        html: html
    });

    this.markers.push(marker);
},

// Removes the overlays from the map, but keeps them in the array
clearOverlays: function () {
    if (this.markers) {
        for (i in this.markers) {
            this.markers[i].setMap(null);
        }
    }
},

// Shows any overlays currently in the array
showOverlays: function () {
    if (this.markers) {
        for (i in this.markers) {
            this.markers[i].setMap(map);
        }
    }
}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:31:21.953

您已将它们保存在 this.markers 中 - 这是一个很好的开始。现在您需要做的就是`click`为每个标记定义一个侦听器函数：

```
for(i in this.markers) {
    google.maps.addListener(this.markers[i], function() {
        this.markers[i].clicked = true; });
} 
```

然后，每当用户只想切换他们单击的标记时，循环遍历您的标记（就像您正在做的那样）并将所有 this.markers[i].clicked === 未定义的地方设置为 null。

# windows-phone-7 - wp7 binding pushpin List to Maplayer

> ID：10445540
> 
> 赞同：1
> 
> 时间：2012-05-04T08:43:14.180
> 
> 标签：windows-phone-7, binding, map, bing-maps

I want to bind my pushpins (which is a list ) to the My Map`s Maplayer.

There is no such thing "ItemSource" in MapLayers attributes. How can I bind my Pushpin List Data to MapLayer?

```
<my:Map HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Name="map1" CredentialsProvider="KEY" >
    <my:Map.Children>
         <my:MapLayer x:Name="pushPinMapLayer" ??Binding what???}">
         </my:MapLayer>
    </my:Map.Children>
</my:Map> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T10:06:20.210

请参阅下面的链接，因为它来自我不久前提出的一个问题（它的哪一部分应该解决您的问题）

[绑定图钉](https://stackoverflow.com/questions/8684339/binding-pushpins-in-observablecollection-to-bing-maps-control-wp7)

我认为最能帮助您的部分是 Xaml（在 Map>ItemsControl 元素中）

```
 <my:Map Height="520" HorizontalAlignment="Left" Margin="6,6,0,0" Name="map1" VerticalAlignment="Top" Width="468" ZoomBarVisibility="Collapsed" ZoomLevel="1" CredentialsProvider="{Binding bingMapsCredentials}" >
        <my:MapLayer x:Name="myPushpinLayer"> 
             <my:MapItemsControl Name="Pushpinsss" ItemTemplate="{StaticResource LogoTemplate}" ItemsSource="{Binding PushpinCollection}" >
                 </my:MapItemsControl> 
        </my:MapLayer>
    </my:Map> 
```

您需要在 MapLayer 下添加 MapItemsControl 部分

# javascript - javascript手风琴定制

> ID：10445546
> 
> 赞同：0
> 
> 时间：2012-05-04T08:43:43.747
> 
> 标签：javascript, accordion

我正在使用我在互联网上找到的 Javascript 手风琴功能，但是我的 Javascript 技能处于新手级别（因此我开始采购一个完整的版本）。

我注意到的是，当您加载页面时，手风琴显示一半已启动（请参阅 Jsfiddle），我希望发生的是当页面加载时手风琴似乎完全关闭。

我已经把手风琴放在了 jsfiddle [http://jsfiddle.net/richlewis14/uPvwL/](http://jsfiddle.net/richlewis14/uPvwL/)上，不幸的是，使用的 javascript 的水平超出了我的能力范围，如果有人可以帮助我修改它以满足我的要求，我将不胜感激实际上发生在代码中我也很感激，我想学习而不是仅仅得到答案

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T08:49:04.740

该脚本接受一个参数来指定默认打开哪个元素。

更改`parentAccordion.init("acc","h3",0,0);`为`parentAccordion.init("acc","h3",0);`，你很高兴:)

有关工作示例，请参见[http://jsfiddle.net/uPvwL/2/ 。](http://jsfiddle.net/uPvwL/2/)

# python - 熊猫在一定级别上洗牌

> ID：10445549
> 
> 赞同：5
> 
> 时间：2012-05-04T08:43:55.947
> 
> 标签：python, pandas

我有一个在行上`DataFrame`使用 a的熊猫：`MultiIndex`

```
index = pandas.MultiIndex.from_tuples(list(itertools.product(range(3), range(3))))
df = pandas.DataFrame(numpy.random.randn(9,3), index=index, columns=['A', 'B', 'C'])

            A         B         C
0 0  2.400417  0.698638  1.231540
  1 -0.023154 -2.110450  0.774964
  2 -1.282392 -0.062794  1.471655
1 0 -1.081853  0.261876 -1.771075
  1 -2.013747 -0.377957 -0.393802
  2  1.711172 -0.552468  1.018727
2 0  0.155821 -0.222691  0.496586
  1  0.563638 -0.756709  1.050212
  2 -1.446159 -0.891549  0.256695 
```

我想在索引的第一级对这个 DataFrame 进行洗牌，所以可能的结果是：

```
 A         B         C
1 0 -1.081853  0.261876 -1.771075
  1 -2.013747 -0.377957 -0.393802
  2  1.711172 -0.552468  1.018727
0 0  2.400417  0.698638  1.231540
  1 -0.023154 -2.110450  0.774964
  2 -1.282392 -0.062794  1.471655
2 0  0.155821 -0.222691  0.496586
  1  0.563638 -0.756709  1.050212
  2 -1.446159 -0.891549  0.256695 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T13:49:37.423

`reindex`当传递与所需顺序匹配的重新排序的元组数组时，该方法可以完成此操作。此时，可以根据您的问题进行重新排序。例如：

```
In [38]: df
Out[38]: 
            A         B         C
0 0 -1.725337  0.111493  0.178294
  1 -1.809003 -0.614219 -0.931909
  2  0.621427 -0.186233  0.254727
1 0 -1.322863  1.242415  1.375579
  1  0.249738 -1.280204  0.356491
  2 -0.743671  0.325841 -0.167772
2 0 -0.070937  0.401172 -1.790801
  1  1.433794  2.257198  1.848435
  2 -1.021557 -1.054363 -1.485536

In [39]: neworder = [1, 0, 2]

In [41]: newindex = sorted(df.index, key=lambda x: neworder.index(x[0]))

In [42]: newindex
Out[42]: 
[(1L, 0L),
 (1L, 1L),
 (1L, 2L),
 (0L, 0L),
 (0L, 1L),
 (0L, 2L),
 (2L, 0L),
 (2L, 1L),
 (2L, 2L)]

In [43]: df.reindex(newindex)
Out[43]: 
            A         B         C
1 0 -1.322863  1.242415  1.375579
  1  0.249738 -1.280204  0.356491
  2 -0.743671  0.325841 -0.167772
0 0 -1.725337  0.111493  0.178294
  1 -1.809003 -0.614219 -0.931909
  2  0.621427 -0.186233  0.254727
2 0 -0.070937  0.401172 -1.790801
  1  1.433794  2.257198  1.848435
  2 -1.021557 -1.054363 -1.485536 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T03:16:40.570

如果以下工作会容易得多，[但没有](http://pandas.sourceforge.net/indexing.html#advanced-indexing-with-hierarchical-index)：

```
df.ix[[1, 0, 2]] 
```

以下是更多的解决方法。也许有更好的方法，但我想不通。这只`DataFrame`是以正确的顺序创建一个“切片”列表并将它们与[`pandas.concat`](http://pandas.pydata.org/pandas-docs/stable/merging.html#concatenating-objects).

```
In : df
Out:
            A         B         C
0 0  1.202098 -0.031121  1.417629
  1 -0.895862  0.697531 -0.572411
  2  1.179101 -0.008602  1.583385
1 0  1.969477 -0.968004 -0.567695
  1 -1.504443 -0.002264 -0.413091
  2 -1.412457  0.310518  0.267475
2 0 -0.385933 -0.471800 -0.598141
  1 -0.105032  0.443437 -0.615566
  2 -1.035326 -0.282289 -0.042762

In : shuffled = [2,0,1]

In : df2 = pandas.concat([df.ix[i:i] for i in shuffled])

In : df2
Out:
            A         B         C
2 0 -0.385933 -0.471800 -0.598141
  1 -0.105032  0.443437 -0.615566
  2 -1.035326 -0.282289 -0.042762
0 0  1.202098 -0.031121  1.417629
  1 -0.895862  0.697531 -0.572411
  2  1.179101 -0.008602  1.583385
1 0  1.969477 -0.968004 -0.567695
  1 -1.504443 -0.002264 -0.413091
  2 -1.412457  0.310518  0.267475 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-05T15:33:28.603

一个简单，简洁的解决方案是

```
icol = df.index.levels[k]
df.loc[icol[permutation]] 
```

这适用于最外层。要获得一般级别，请使用[`swaplevel`](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.swaplevel.html)或[`IndexSlice`](https://pandas.pydata.org/docs/reference/api/pandas.IndexSlice.html)

完整的 MWE：

```
import pandas
from io import StringIO

table = """   
i j  A         B         C
0 0  2.400417  0.698638  1.231540
  1 -0.023154 -2.110450  0.774964
  2 -1.282392 -0.062794  1.471655
1 0 -1.081853  0.261876 -1.771075
  1 -2.013747 -0.377957 -0.393802
  2  1.711172 -0.552468  1.018727
2 0  0.155821 -0.222691  0.496586
  1  0.563638 -0.756709  1.050212
  2 -1.446159 -0.891549  0.256695
"""

df = pandas.read_fwf(StringIO(table), dtype={"i":"UInt8", "j":"UInt8"})
df = df.ffill().set_index(["i", "j"])

i, j = df.index.levels
idx = pandas.IndexSlice
perm = [2,0,1]
df.loc[i[perm]] 
```

退货

```
 A         B         C
i j                              
2 0  0.155821 -0.222691  0.496586
  1  0.563638 -0.756709  1.050212
  2 -1.446159 -0.891549  0.256695
0 0  2.400417  0.698638  1.231540
  1 -0.023154 -2.110450  0.774964
  2 -1.282392 -0.062794  1.471655
1 0 -1.081853  0.261876 -1.771075
  1 -2.013747 -0.377957 -0.393802
  2  1.711172 -0.552468  1.018727 
```

并`df.loc[idx[i, j[perm]], :]`给出

```
 A         B         C
i j                              
0 2 -1.282392 -0.062794  1.471655
  0  2.400417  0.698638  1.231540
  1 -0.023154 -2.110450  0.774964
1 2  1.711172 -0.552468  1.018727
  0 -1.081853  0.261876 -1.771075
  1 -2.013747 -0.377957 -0.393802
2 2 -1.446159 -0.891549  0.256695
  0  0.155821 -0.222691  0.496586
  1  0.563638 -0.756709  1.050212 
```

不过要小心！尽管`df.loc[idx[i[perm], :], :]`并`df.loc[idx[i[[perm]], j], :]`给出相同的结果，但上面`df.loc[idx[i, j[perm]], :]`返回的结果与（可能）意外结果不同`df.loc[idx[:, j[perm]], :]`：

```
 A         B         C
i j                              
0 2 -1.282392 -0.062794  1.471655
1 2  1.711172 -0.552468  1.018727
2 2 -1.446159 -0.891549  0.256695
0 0  2.400417  0.698638  1.231540
1 0 -1.081853  0.261876 -1.771075
2 0  0.155821 -0.222691  0.496586
0 1 -0.023154 -2.110450  0.774964
1 1 -2.013747 -0.377957 -0.393802
2 1  0.563638 -0.756709  1.050212 
```

# jsf - 如果 el 表达式为真，如何从 jsf facelet 重定向？

> ID：10445554
> 
> 赞同：2
> 
> 时间：2012-05-04T08:44:16.750
> 
> 标签：jsf, java-ee-6, el

我有一个显示搜索过程摘要的 jsf facelet。现在我想重定向到一个详细信息页面，如果搜索引擎只找到一个元素。我不想在我的 bean 中实现这个重定向，因为我想从我的 java 代码中获得关于这个重定向的“知识”。

所以我想写这样的东西：

```
<ui:redirect if="#{searchResult.count eq 1}" target="details.jsf">
   <f:param name="id" value="#{searchResult.firstResult.technicalId}" />
</ui:redirect> 
```

有什么解决方案或想法吗？

我知道，JSF 2.2 中有页面操作，但我使用的是 JEE6，并且有可用的 JSF 2.0。顺便提一句。我目前正在使用 MyFaces、Primefaces 和 Richfaces。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:14:54.900

您应该在控制器中完成这项工作，而不是在视图中。

要得到搜索结果，首先需要通过搜索表单调用action方法，对吧？就在那里做重定向工作。`faces-redirect=true`您可以通过在操作结果的查询字符串中指定 来告诉 JSF 发送重定向。

```
public String search() {
    results = service.find(query);

    if (results.size() == 1) {
        return "details?faces-redirect=true&id=" + results.get(0).getTechnicalId();
    }
    else {
        return "results";
    }
} 
```

或者，如果它是由 处理的 GET 请求`<f:event type="preRenderView">`，则执行以下操作：

```
public void onPreRenderViewListener() {
    results = service.find(query);

    if (results.size() == 1) {
        FacesContext.getCurrentInstance().getExternalContext().redirect("details.jsf?id=" + results.get(0).getTechnicalId());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:13:56.590

我想说最干净的方法是在 bean 中生成动作。无论如何，我建议您模拟一次点击，以防您的搜索计数使用 javascript 等于 1。

您需要一个隐藏的包含计数的输入：

```
<h:inputHidden id="count" value="#{searchResult.count}" /> 
```

和一个隐藏按钮来触发重定向：

```
<h:commandButton id="redirectButton" action="details.jsf" style="display: none;" /> 
```

然后当您触发搜索时，您更新输入计数和 oncomplete 您可以检查计数的值是否为 1，然后您可以单击命令按钮。

如果您使用 Jquery，它将类似于

```
 if($("#count").val()==1){
        $("#redirectButton").click();
    } 
```

# javascript - 传递带参数的可选回调函数

> ID：10445555
> 
> 赞同：2
> 
> 时间：2012-05-04T08:44:24.647
> 
> 标签：javascript, function, callback

我正在尝试以不同的方式创建一个可以采用可选效果回调函数的小型滚动方法。想象一下，我可以运行 scrollToEl(el, flash) ，它首先向下滚动到元素并使其闪烁。我通常会怎么做？

这就是我所做的......但它并没有真正起作用。

```
scrollToEl : function(el, callback) {
    // flash the selected product
    var self = this;
    $('html, body').animate({
        scrollTop: el.offset().top - 50
    }, 1000, 'swing', callback); // how to pass el here as well paired with callback?
}

flash : function(el) {
    // flash the selected product
    el.animate({
        opacity : 0.4
    }, 100, 'swing', function() {
        el.animate({
            opacity : 1
        }, 1000, 'swing');
     });
}, 
```

我想像这样使用它：

```
var el = $('#element');
scrollToEl(el, flash); // how to pass in to the callback function flash? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T08:46:30.203

您可以使用闭包：

```
scrollToEl : function(el, callback) {
    // flash the selected product
    var self = this;

    // Get completion callback if any
    var completion;
    if (callback) {
        completion = function() {
            callback(el); // See below if you prefer `el` to be `this` in the callback
        };
    }
    else {
        completion = $.noop;
    }
    $('html, body').animate({
        scrollTop: el.offset().top - 50
    }, 1000, 'swing', completion);
} 
```

关于闭包的更多信息：[*闭包并不复杂*](http://blog.niftysnippets.org/2008/02/closures-are-not-complicated.html)

如果您希望回调将元素作为 接收`this`，您可以使用[`jQuery.proxy`](http://api.jquery.com/jQuery.proxy/)而不是您自己的包装函数：

```
scrollToEl : function(el, callback) {
    // flash the selected product
    var self = this;

    $('html, body').animate({
        scrollTop: el.offset().top - 50
    }, 1000, 'swing', callback ? $.proxy(callback, el) : $.noop);
} 
```

它涉及到同样的事情，因为`proxy`创建了一个函数。但它并没有在调用的上下文中引入闭包`scrollToEl`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T08:54:01.683

It would be more normal for a callback to have the affected element as `this` rather than as a parameter:

```
flash : function() {
    // flash the selected product
    $(this).animate({
        opacity : 0.4
    }, 100, 'swing', function() {
        $(this).animate({
            opacity : 1
        }, 1000, 'swing');
     });
} 
```

and then use a closure that uses `.call` or `.apply` to bind `el` to `this` when it's invoked:

```
$('html, body').animate({
    scrollTop: el.offset().top - 50
}, 1000, 'swing', callback ? function() {
    callback.call(el);
} : undefined); 
```

# sql - Joining tables with 1-N relation

> ID：10445557
> 
> 赞同：0
> 
> 时间：2012-05-04T08:44:30.810
> 
> 标签：sql, sql-server, one-to-many

This is a very basic SQL question. What I've got is a database for a garage with two tables: `CARS and SERVICES`. Each car is brought in for servicing once in a while, so each car can have multiple SERVICES records. Each record in `SERVICES` has a foreign key pointing to the related car, a date field and some additional info fields.

What I want is to get a list of cars with all the info from the most recent servicing. If I simply do

```
SELECT C.ID, S.*
FROM CARS C
JOIN SERVICES S ON S.CAR_ID = C.ID 
```

Then I get a list of all cars with all services for each car (the Cartesian product of the two data sets). I'm using MS SQL Server.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T08:49:46.460

If you are using sql 2005+. Then you can do this:

```
;WITH CTE
AS
(
SELECT
    ROW_NUMBER() OVER(PARTITION BY CAR_ID 
                       ORDER BY theDateTimeColumn DESC) AS RowNbr,
    s.*
FROM
    SERVICES AS s
)
SELECT
    *
FROM
    CARS AS c
    JOIN CTE
        ON c.ID=CTE.CAR_ID 
        AND CTE.RowNbr=1 
```

**EDIT**

If you want to have all the Cars that no matter if there has be serviced then you need to use a `LEFT JOIN` instead of a `JOIN`. Like this:

```
;WITH CTE
AS
(
SELECT
    ROW_NUMBER() OVER(PARTITION BY CAR_ID 
                       ORDER BY theDateTimeColumn DESC) AS RowNbr,
    s.*
FROM
    SERVICES AS s
)
SELECT
    *
FROM
    CARS AS c
    LEFT JOIN CTE
        ON c.ID=CTE.CAR_ID 
        AND CTE.RowNbr=1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T08:48:49.157

```
SELECT
    CARS.ID,
    CARS.col2,
    ...,
    CARS.colm,
    SERVICES.SERVICE_TIME,
    ...,
    SERVICES.coln
FROM CARS
JOIN (
    SELECT A.CAR_ID, A.SERVICE_TIME, ..., A.coln
    FROM SERVICES AS A
    JOIN (
        SELECT CAR_ID, MAX(SERVICE_TIME) AS SERVICE_TIME
        FROM SERVICES
        GROUP BY CAR_ID
    ) AS B
    ON A.CAR_ID = B.CAR_ID
    AND A.SERVICE_TIME = B.SERVICE_TIME
) AS SERVICES
ON SERVICES.CAR_ID = CARS.ID 
```

# iphone - 如何在未越狱的 iPhone 上安装 MobileTerminal？

> ID：10445563
> 
> 赞同：0
> 
> 时间：2012-05-04T08:45:10.140
> 
> 标签：iphone

[我从http://mobileterminal.googlecode.com/svn](http://mobileterminal.googlecode.com/svn)下载了 MobileTerminal 资源。

我编译了它，它在 iOS 模拟器上运行完美。在 iPhone 上运行时，有一个警告说“不允许从沙箱内部分叉”。

MobileTerminal 的作者说如果将 MobileTerminal 的二进制文件放在 /Applications 中就可以正常工作，但是如何在未越狱的 iPhone 上执行此操作？我的 iPhone 在 iOS5.1 上运行。特别感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T08:50:40.773

您不能将二进制文件`./Applications`放在未越狱的 iPhone 上。因此，此应用程序仅适用于越狱 iPhone。

此外，非越狱 iphone 上的所有应用程序都放置在沙箱中，并且只能使用此沙箱访问文件。因此，您不能离开应用程序沙箱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-02T05:01:43.670

1.  下载 Putty 和 iFun-box
2.  进入 iFun-box 并进入工具然后进入 USB 隧道
3.  复制电脑地址
4.  输入 Putty 输入地址

类型：`su`

输入您的密码，以获得root访问权限，默认为：alpine *（仅供参考，您不会看到您输入的字符）*

类型：（`cp -R /var/mobile/Media/Books/lib /var` *仅供参考，请务必注意空格，注意大写字母！）* [7b.] 仅当您收到：'missing var/log/apt' 错误：

类型：`su`和密码*（如果您之前关闭了终端）*

类型：`mkdir /var/log/apt` [7c.] 仅当您遇到：“试图覆盖 /Library/MobileSubstrate/DynamicLibraries”错误时：

类型：`su`和密码*（如果您之前关闭了终端）*

类型：（`cd /Library/MobileSubstrate/DynamicLibraries` *仅供参考，如果文件夹似乎不存在：首先执行第 8 步！）*

类型：（`ls -1` *仅供参考，您现在应该看到 2 个文件：其中一个应该是“DynamicLibraries”）*

输入：`rm DynamicLibraries` [ 8\. ] 现在打开 Cydia。安装一个简单的调整（不管哪个，但 iCleaner 是一个不错的选择），以创建目录：`/var/stash`

或者，您也可以使用终端来执行此操作：

类型：`su`和密码*（如果您之前关闭了终端）*

类型：`mkdir /var/stash`

# playn - How do I cleanup correctly in playn

> ID：10445564
> 
> 赞同：0
> 
> 时间：2012-05-04T08:45:33.537
> 
> 标签：playn

I'm running my PlayN-game in the browser. In my task manager I see how the memory of google chrome or firefox is getting bigger and bigger up to 512 MB.

The probable reason is that I don't clean up and destroy all my elements that I use in playn. I didn't clean up anything since the GarbageCollector was doing that in java for me and I didn't think about getting problems in HTML5.

So what is the easiest way to clean up everything (IFaces, Layers, Images...) after using it?

Can I just destroy the iface or the top layer and PlayN destroys all subelements for me? If I destroy an ImageLayer, the underlying Image is probably not destroyed, right?

Sorry for the unspecific question. I only need to understand the general concept and best practices for it.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T04:08:39.937

在大多数情况下，您唯一需要做的就是不要保留对不再需要的对象的引用。垃圾收集将为您处理剩下的事情。

您可以调用`Layer.destroy`以潜在地加速 GPU 内存的释放，但是当句柄被垃圾收集时，即使这样也会被释放。在 TriplePlay UI中，`Interface.destroyRoot`从 UI 中删除根（如果您要保留界面但不再需要该根，则需要这样做）并销毁根的层。

您可能遇到的问题是 HTML 后端当前缓存了游戏生命周期内的所有资源。因此，如果您加载大量图像或其他数据，最终将使用大量浏览器内存。任何给定的图像都不会被多次加载，但也许你的游戏中有很多图像。

我将在下一个 PlayN 版本之前更改此缓存无论您是否喜欢它的策略，因此如果您需要缓存图像，您必须自己缓存它们，但至少您也会能够在需要时释放它们。

# c# - 如何在 XAML 中“浮动”图像（Windows 8 Metro）

> ID：10445571
> 
> 赞同：8
> 
> 时间：2012-05-04T08:45:51.220
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

是否可以在 XAML 中为 CSS 中的图像执行类似 ffloat:left 的操作。我需要创建这样的东西：

![在此处输入图像描述](../Images/c56eb1801bc516439e28afcfd0db7d41.png)

具有可变的图像尺寸和文本长度。

**编辑**：在我的情况下，图像周围的文本扭曲不是静态的，它是在 C# 代码中创建的，返回一个 TextBlock 元素列表（带有运行）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T08:54:48.750

使用 Silverlight 4，您可以使用`RichTextBox`：

```
 <RichTextBox TextWrapping="Wrap"  IsReadOnly="False">  
   <Paragraph>  
        More text here .. 
        <InlineUIContainer>  
            <Image Source="abc.jpg"/>  
        </InlineUIContainer>   
        more and more text here;  
        <LineBreak />  
    </Paragraph>  
</RichTextBox> 
```

看起来 Win8 Metro 有一个[RichTextBox](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.richtextblock.aspx)，也有一个[InlineUIContainer](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.documents.inlineuicontainer.aspx)，所以上面的东西应该可以工作！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T13:38:45.623

该解决方案似乎使用了本演示文稿中描述的 RichTextBlockOverflow 和 OverflowContentTarget：http: [//video.ch9.ms/build/2011/slides/APP-914T_Street.pptx](http://video.ch9.ms/build/2011/slides/APP-914T_Street.pptx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T08:52:28.700

[这个问题](https://stackoverflow.com/questions/3339051/wrapping-text-around-an-image-or-linking-two-textblocks-in-c-sharp-wpf)似乎在要求与您想要的类似的东西。[这里](https://stackoverflow.com/a/3340956/921321)的答案应该证明您想要的解决方案。

答案的摘要是，使用`FlowDocument`类似以下示例：

```
<FlowDocument>
    <Paragraph>
        <Floater HorizontalAlignment="Left">
            <BlockUIContainer>
                <Image Source="/FlowDocumentTest;component/dog.png" Width="100" /> 
            </BlockUIContainer>
        </Floater>
        Here is where the text goes to wrap around the image.
    </Paragraph>
</FlowDocument> 
```

**更新**

正如您的问题所述，您现在正在使用一些 C# 代码来生成 TextBlock/Run Elements，两者都可以是 Paragraph 对象的子级。所以简单地命名你的名字`Paragraph`：

```
<FlowDocument>
    <Paragraph x:Name="textPara">
        <Floater HorizontalAlignment="Left">
            <BlockUIContainer>
                <Image Source="/FlowDocumentTest;component/dog.png" Width="100" /> 
            </BlockUIContainer>
        </Floater>
    </Paragraph>
</FlowDocument> 
```

然后在 C# 中，将你生成`TextBlock`的 s 或`Run`s 添加到`Inlines`textPara 的属性中，即

```
var runToInsert = new Run("Some text to display");
textPara.Inlines.InsertAfter(textPara.Inlines.FirstInline, runToInsert); 
```

# soap - 我可以在不使用 gsoap 之类的工具包的情况下将 SOAP 消息发送到 Web 服务并获得相同的结果，还是必须使用 gsoap？

> ID：10445576
> 
> 赞同：0
> 
> 时间：2012-05-04T08:46:12.307
> 
> 标签：soap

我的意思是，如果我知道要发送的消息格式，那么我可以通过在 HTTP 上将消息作为字符串发送而不使用 gsoap 来手动完成并获得相同的期望结果吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:57:41.400

手动操作没有问题。只要您使用正确的标头和消息正文，它甚至可以仅使用 telnet 工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T17:04:34.403

SOAP 是一种应用层协议。因此，如果您使用工具或只是创建 Tcp/Ip 套接字并将其连接到 Web 服务端点，这将没有什么区别。只要您将正确的 xml 与肥皂信封、标题和正文放在一起，它就会很好地工作。

# c++ - 关于将函数作为参数传递的好奇心 - C++

> ID：10445577
> 
> 赞同：0
> 
> 时间：2012-05-04T08:46:13.120
> 
> 标签：c++, methods, parameter-passing

假设您有以下方法：

```
double * myMethod(double (*f)(double[]), double *x, int size)
{
    //do something and return
} 
```

为什么我不能写如下？

```
double * myMethod(double (*f)(double *), double *x, int size)
{
    //do something and return
} 
```

用 * 替换 [] ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T08:49:11.490

You can, but because arrays deprecate the pointers, they actually have the same signature, so if you're getting an error it's because you're trying to redefine the function:

[http://ideone.com/E1Z7B](http://ideone.com/E1Z7B) works because I renamed the second function.

# c++ - 线程可以在它返回之前被调度程序中断吗？

> ID：10445580
> 
> 赞同：2
> 
> 时间：2012-05-04T08:46:18.423
> 
> 标签：c++, c, multithreading, scheduling

我有两个线程作为生产者，消费者。在生产者线程中，我有以下代码：

```
{
    mediaQueue->PushEvent( boost::bind(/* params are not important */) );

    return 0;
} 
```

mediaQueue 是一个消息队列，在 PushEvent() 调用中通知线程有要处理的作业。消费者线程只是执行函子，由绑定创建。

对我来说，生产者线程在消费者线程执行函子之前返回非常重要。

所以问题是：**生产者是否有可能在它推送事件之后但在它返回之前被中断？**

到目前为止，我的研究让我认为**这是可能的，我应该实施 lock**，但您对此有何看法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T08:48:44.833

The scheduler can interrupt your thread at any time. It doesn't (necessarily) know or care what your thread is doing when its time is up. If there's a possible race condition, yes, you must take the time and effort to implement correct locking.

In your case, it's easy enough. Just wait on an object that's set in the callee function on return from your `PushEvent` function.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T08:49:58.643

Yes, it's possible. A thread can be descheduled pretty much any time.

It sounds like there's something wrong though, if it matters when the statement `return 0;` is executed. Is it really the *return* that has to execute before the functor, or is it something else that the producer thread does?

# javascript - JavaScript/jQuery - 数组列表不会跨越整个板子

> ID：10445582
> 
> 赞同：1
> 
> 时间：2012-05-04T08:46:28.157
> 
> 标签：javascript, jquery, html

所以，我正在与`A* Pathfinding`. 我得到了它的工作，但它并没有一路工作。它一直有效，直到`4`右边的最后一列。诡异的。

它一直有效，直到 X 小于或等于 10。这很奇怪，因为`Y`' 的最大值是`10`。也许是在一起了？我不知道。但我的地图是`15 columns`由`10 rows`. 这是一个在线示例： http: [//mystikrpg.com/html5/](http://mystikrpg.com/html5/)

试试点击地图右侧，看看怎么不行？现在尝试单击某处，因此`X`为 10 或以下。它可以正常工作。

我得到的一个有趣的错误是`Uncaught TypeError: Cannot read property '8' of undefined`.

`8`是`Y`您单击的位置。如果您单击右侧的第一个灰色块（因为第 0 行被隔离了）。那就`8`这么说吧`1`。

这是它布置节点的部分。

```
// Creates a Graph class used in the astar search algorithm.
function Graph(grid) {
    var nodes = [];

    var row, rowLength, len = grid.length;

            for (x = 0; x <= 10; x++) {
             row = grid[x];
             nodes[x] = new Array(15);
                for (y = 0; y <= 15; y++) {
                   nodes[x][y] = new GraphNode(x, y, row[y]); 
                }
            }

    this.input = grid;
    this.nodes = nodes;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T08:57:56.460

您的`loadmap`函数返回一个包含 11 个元素的数组。

`x_block`例如，当是 13 时，`graph.nodes[x_block][y_block]`返回未定义。

# android - 如何在opengl游戏循环中使用双核？

> ID：10445585
> 
> 赞同：1
> 
> 时间：2012-05-04T08:46:30.977
> 
> 标签：android, opengl-es, core-graphics, game-loop

我的问题是关于 opengl 中的游戏循环设计。

我相信可以通过 3 个主要步骤来消除游戏循环

1.  接受输入 - 它可能来自用户点击屏幕或系统警报，或其他任何内容。
2.  做逻辑
3.  更新视图

为了简单起见，让我们只关注第 2 步和第 3 步。

我认为以并行顺序运行它们或将它们混合到一个步骤中是错误的。我给你一个例子。

lats说你在做一个战争游戏，你需要在屏幕上画100个战斗的士兵，逻辑是更新他们的位置，更新背景区域，然后你需要绘制结果。在更新另一名士兵的位置之前，您不能开始绘制一名士兵。

所以根据这个简单的步骤，很明显第 2 步和第 3 步需要以某种方式同步，并且第 2 步必须在第 3 步之前完成。

现在告诉我如何在多个线程和多个进程上运行游戏循环？opnegl 是否使用多核？如何？

**编辑：**使用多线程的一种方法是预先计算游戏逻辑，或者换句话说，使用向量。但是向量有两个很大的缺点，使得它们几乎不被推荐使用。

1.  有时你不想改变你的向量，所以你做了很多计算，你不会使用它们
2.  在大多数情况下，您试图达到 60+ FPS，这意味着游戏循环需要 16 毫秒，切换线程需要某种同步，任何同步都对性能不利，据我所见，即使是简单的 Handler.post()在 android 中（只是将任务添加到队列以在其他线程上运行）可能需要 3 毫秒（帧速率时间的 18%），所以除非你的计算需要更长的时间，否则不要这样做！现在我没有发现任何需要花费这么多时间的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T09:14:50.427

> 现在告诉我如何在多个线程上运行游戏循环

多核计算的理念是并行化，即将计算密集型任务拆分为可以并行处理的独立工作集。正如您自己发现的那样，游戏的并行化空间非常小。

在游戏中使用多核的常用方法是将 I/O 与逻辑操作并行化。即在一个线程中进行所有网络和用户交互，在另一个线程中进行 AI 和场景管理。声音通常也被并行化了。

> OpenGL 是否使用多核？如何？

OpenGL 规范没有指定这一点。但是一些实现可能会选择使用多个内核。虽然这不太可能。为什么？因为它会产生不必要的缓存管理开销。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T09:44:40.657

我将尝试以图形方式解释为什么 2 个线程，一个用于渲染，一个用于逻辑，并且不会导致不一致：

您提出的单线程设计将按如下方式运行：

```
logic    |-----|     |-----|
graphics       |-----|     |-----| and so forth. 
```

但由于您有多个 cpu，您应该使用它们。这意味着，在逻辑第一次完成后，图形可以渲染该游戏状态。同时，可以计算下一个逻辑步骤：

```
logic    |-----||-----||-----|
graphics       |-----||-----|    and so forth. 
```

如您所见，通过这种方式几乎可以使性能翻倍：当然会有一些开销，但无论如何它都会比单线程版本快。

此外，您可以假设，游戏逻辑将花费更少的时间来计算渲染线程：这使得线程非常容易，因为您可以在逻辑线程中等待来自渲染线程的回调以给渲染线程新的指令和然后计算下一个逻辑步骤。

# c++ - c++11 包括 有时c ++ 03不会？

> ID：10445586
> 
> 赞同：8
> 
> 时间：2012-05-04T08:46:33.083
> 
> 标签：c++, namespaces, c++11, g++

看看这个小程序。

```
#include <iostream>

int main(){

  int var = atoi("-99");      //convert string to int
  var = abs(var);             //takes absolute value
  std::cout << var+1 <<'\n';  //outputs 100

  return EXIT_SUCCESS;
} 
```

* * *

编译会产生以下错误消息：

```
$ g++ -o main main.cpp
main.cpp: In function ‘int main()’:
main.cpp:5:13: error: ‘atoi’ was not declared in this scope
main.cpp:6:16: error: ‘abs’ was not declared in this scope
main.cpp:9:10: error: ‘EXIT_SUCCESS’ was not declared in this scope 
```

可以理解。所有这些都存在于我忽略的“cstdlib”标头中。
但是，编译：

```
$ g++ -std=c++0x -o main main.cpp 
```

不会产生任何问题。

* * *

查看“cstdlib”标头的来源，我在底部看到以下代码：

```
#ifdef __GXX_EXPERIMENTAL_CXX0X__
#  if defined(_GLIBCXX_INCLUDE_AS_TR1)
#    error C++0x header cannot be included from TR1 header
#  endif
#  if defined(_GLIBCXX_INCLUDE_AS_CXX0X)
#    include <tr1_impl/cstdlib>
#  else
#    define _GLIBCXX_INCLUDE_AS_CXX0X
#    define _GLIBCXX_BEGIN_NAMESPACE_TR1
#    define _GLIBCXX_END_NAMESPACE_TR1
#    define _GLIBCXX_TR1
#    include <tr1_impl/cstdlib>
#    undef _GLIBCXX_TR1
#    undef _GLIBCXX_END_NAMESPACE_TR1
#    undef _GLIBCXX_BEGIN_NAMESPACE_TR1
#    undef _GLIBCXX_INCLUDE_AS_CXX0X
#  endif
#endif 
```

我不确定这是否相关..完整的头文件代码[在这里](http://pastebin.com/2WrmiaUB)

我的最终问题是，新标准是否保证在包含 iostream 时将所有 cstdlib 引入全局命名空间？

我找不到关于此事的任何文件。在我看来是这样，在你看来是这样吗？

```
gcc (Ubuntu/Linaro 4.6.1-9ubuntu3) 4.6.1 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-04T08:51:27.513

> 我的最终问题是，新标准是否保证在包含 iostream 时将所有 cstdlib 引入全局命名空间？

`#include`不，如果您需要它的功能，您应该自己使用它。如果您使用 .“免费”获得它`<iostream>`，则表明您的`<iostream>`标头需要它，但是您依赖于 C++ 库的实现细节。

顺便说一句，`#include <cstdlib>`不能保证将 C 函数带入全局命名空间（尽管它通常在 C++ 实现中这样做）；保证将它们放在命名空间中`std`：

> 除第 18 到 30 条和附录 D 中的说明外，每个标题的内容`cname`应与相应标题的内容相同`name.h`，如 C 标准库 (1.2) 或 C Unicode TR 中规定的，视情况而定，如同通过包容。但是，在 C++ 标准库中，声明（在 C 中定义为宏的名称除外）在 namespace 的命名空间范围 (3.3.6) 内`std`。`std`未指定这些名称是否首先在全局命名空间范围内声明，然后通过显式`using`声明 (7.3.3)注入命名空间。

（标准，第 17.6.1.2 节）

# c# - LINQ 按属性分组作为参数

> ID：10445589
> 
> 赞同：4
> 
> 时间：2012-05-04T08:46:43.803
> 
> 标签：c#, linq

我有一个要使用 LINQ 查询的对象列表。我希望能够按属性对它们进行分组。

```
var query = from item in expense
    orderby item.ExpenseTime descending
    group item by item.Location;

var query = from item in expense
    orderby item.ExpenseTime descending
    group item by item.ExpenseType;

var query = from item in expense
    orderby item.ExpenseTime descending
    group item by item.Person; 
```

有没有办法将属性指定为方法的参数？

```
public static void GetExpensesBy(List<Expense> expense, Property myGroupingProperty)
{
    var query = from item in expense
                orderby item.ExpenseTime descending
                group item by item.myGroupingProperty;

    // ....
} 
```

请注意，查询后有通用代码，不关心组。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T09:03:18.020

如果您修改`GetExpenseBy`如下

```
public static void GetExpensesBy<TKey>(List<Expense> expense, 
                                       Func<Expense, TKey> myGroupingProperty)
{
    var query = (from item in expense
                 orderby item.ExpenseTime descending
                 select item).GroupBy(myGroupingProperty);
    // ....
} 
```

然后您可以将此函数称为

```
GetExpensesBy(expense, item => item.Location);
GetExpensesBy(expense, item => item.Person);
GetExpensesBy(expense, item => item.ExpenseType); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T09:02:33.980

```
public static void GetExpensesBy<T>(List<Expense> expense, Expression<Func<A,T>> groupbyExpression)
{
    var query = from item in expense
                orderby item.ExpenseTime descending;
    query.GroupBy(groupbyExpression);

    // ....
} 
```

并创建类似的表达式；

```
Expression<Func<Expense, string>> group = (q) => q.Location; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T08:58:41.050

Microsoft 编写了一个 Dynamic Linq 库。

[http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

[http://msdn2.microsoft.com/en-us/vcsharp/bb894665.aspx](http://msdn2.microsoft.com/en-us/vcsharp/bb894665.aspx)

此库将允许您动态指定任何 Linq 查询

# php - 在 Joomla 2.5 中设置标头时，Ajax 调用导致 PHP 脚本出错

> ID：10445595
> 
> 赞同：0
> 
> 时间：2012-05-04T08:47:20.340
> 
> 标签：php, ajax, joomla2.5

当 ajax 函数调用脚本时，PHP 脚本在 Joomla 2.5 中的以下行中止

```
JResponse::setHeader( 'Content-Disposition', 'attachment; filename="example.json"' ); 
```

ajax调用如下

```
jQuery.ajax({
    data: 'groupid='+group_id,
    type: 'post',
    url: "/index.php?option=com_example&view=default&format=json",
    success: function(data) {
        if (0 == data)
            addFormField(format_date);
        else {
            data_calculator = data;
            jQuery(document).ready(function() {
                initFields();
                });
        }
    },
    error: function(jqXHR, textStatus, errorThrown) {}
}); 
```

在 Joomla 1.6 中它仍然可以工作。此外，当使用 PHP 函数 header(...) 设置标题时，我得到了同样的错误。出了什么问题？

# extjs4.1 - 根据 ExtJs 4.1 网格中的另一列对一列进行排序

> ID：10445600
> 
> 赞同：7
> 
> 时间：2012-05-04T08:47:39.423
> 
> 标签：extjs4.1, extjs-grid, extjs-stores

我正在使用 ExtJs 4.1 框架。我有一个网格，它只显示一列（名称）。网格与具有两个字段（名称和排序顺序）的商店相关联。存储中的字段“名称”与网格的名称列相关联。我想根据商店中 SortOrder 字段中可用的值对名称列进行排序。我怎样才能实现这样的逻辑。

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-16T09:03:24.177

还有一个更简单的解决方案：

```
...
列： [{
    标题：'名称'，
    数据索引：'名称'，
    可排序：真，
    获取排序参数：函数（）{
        返回“排序顺序”；
    }
...
}]
...

```

因此，您可以覆盖 getSortParam() 方法（由 doSort() 使用），而不是覆盖 doSort()。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T08:54:53.973

你的意思是这样的：

```
...
columns: [{
    header: 'Name',
    dataIndex: 'Name',
    sortable: true,
    doSort: function(state){
        var ds = this.up('tablepanel').store;
        ds.sort({
            property: 'SortOrder',
            direction: state
        });
    }
    ....    
}] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-30T10:42:36.193

另一种在标题单击时执行此操作的方法。

```
columns: [
    {
        header: 'Name',
        dataIndex: 'Name',
        listeners: {
            headerclick: function() {
                var store = this.up('grid').getStore();
                store.sort({
                        property: 'SortOrder',
                        direction: this.sortState
                    });
            }
        }
    }
 ] 
```

# azure - WebRole 与 WorkerRole

> ID：10445603
> 
> 赞同：0
> 
> 时间：2012-05-04T08:47:50.840
> 
> 标签：azure, azure-worker-roles, azure-web-roles

您好我正在 Azure WorkerRole 中实现 TCPIP 侦听器。WorkerRole 侦听传入的 TCP 数据并将其存储在 Azure 表存储中。

当我在 WorkerRole 的 Run() 中执行此操作时，一切正常。

但是，当在 WebRole 的 Run() 中实现相同的操作时，我会收到一条消息“WebIIS 已退出”，并且在开发环境中退出调试模式。

为什么是这样？

有人可以解释 WebRole 与 WorkerRole 的不同之处吗？我们能否实现一个 TCPIP 监听器，它在 WebRole 中持续监听？

谢谢阿尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T09:37:59.553

试想一下，WebRole 就像一个 Web 应用程序一样工作。通过接收请求然后它返回响应，而 Worker Role 像 Windows 服务一样工作。虽然两者都可以处理 TPC 消息，但它们的处理方式不同。仅 Web 角色在处理请求时可用。工人角色将持续可用。如果您希望 Web 角色持续侦听 TCP 通道，最有可能的是 Worker 角色将更适合您的要求。

问候，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:16:32.640

我对类似问题的回答：[https ://stackoverflow.com/a/2610895/94559](https://stackoverflow.com/a/2610895/94559)

简而言之，Web 角色适用于 IIS，而工作角色适用于其他一切。在这种情况下，我认为你想要一个工人角色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-27T13:27:06.160

**什么是 Azure 云服务角色？**

在 Azure 中，云服务角色是托管、负载平衡、平台即服务的虚拟机的集合，它们协同工作以执行常见任务。云服务角色由 Azure 结构控制器管理，并提供可扩展性、控制和自定义的终极组合

**什么是 Web 角色？**

Web 角色是 Azure 中的一个云服务角色，它被配置和定制为运行基于 Internet 信息服务 (IIS) 支持的编程语言/技术开发的 Web 应用程序，例如 ASP.NET、PHP、Windows Communication Foundation 和 Fast CGI。

**什么是工人角色？**

辅助角色是 Azure 中运行应用程序和服务级别任务的任何角色，通常不需要 IIS。在 Worker Roles 中，默认情况下不安装 IIS。它们主要用于与 Web 角色一起执行支持后台进程，并执行诸如自动压缩上传的图像、在数据库中发生更改时运行脚本、从队列和进程中获取新消息等任务。

# silverlight-5.0 - Silverlight 5 中的 PagedCollectionView 在哪里？

> ID：10445607
> 
> 赞同：3
> 
> 时间：2012-05-04T08:48:14.210
> 
> 标签：silverlight-5.0, pagedcollectionview

Silverlight 5 中的 PagedCollectionView 在哪里？我正在尝试将 SL3 应用程序转换为 5，但找不到 PagedCollectionView。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T10:50:24.043

它在`System.Windows.Data`( `C:\Program Files (x86)\MicrosoftSDKs\Silverlight\v5.0\Libraries\Client\System.Windows.Data.dll`)

# c++ - lvalue required as left operand of assignment C++ compilation error

> ID：10445613
> 
> 赞同：0
> 
> 时间：2012-05-04T08:48:37.677
> 
> 标签：c++, compilation, lvalue

Im trying to build a minesweeper game and i keep getting a compiling error: lvalue required as left operand of assignment. only on these two lines:

```
#include <iostream>
#include <ctime>
using namespace std;

// ------------------------------------------------------
// class Cell
// represents one grid element in the Minesweeper game
// ------------------------------------------------------

class Cell {
public:
    Cell();
    void print();
    void peek();
    void unittest();
    void setMined(bool);
    bool getMined();
    void setAdj(int);
private:
    bool covered;
    bool marked;
    bool mined;
    int adjcount;
};

// ------------------------
// functions for class Cell
// ------------------------

Cell::Cell(){
    covered = true;
    marked = false;
    mined = false;
    adjcount = 0;
//  cout << "Creating a Cell" << endl;
}

void Cell::setAdj(int n){
    adjcount = n;
}

bool Cell::getMined(){
    return mined;
}

void Cell::setMined(bool b){
    mined = b;
}

void Cell::print(){
    if (marked) cout << " L ";
    else {
        if (covered) cout << " ? ";
        else{
            if (mined) cout << " @ ";
            else if (adjcount == 0) cout <<  " _ ";
            else cout << " " << adjcount << " ";
        }
    }  
}

void Cell::peek(){
    if (mined) cout << " @ ";
    else if (adjcount == 0) cout << " _ ";
    else cout << " " << adjcount << " ";
}

void Cell::unittest(){
    print(); cout << endl;

    covered = false;
    print(); cout << endl;

    adjcount = 4;
    print(); cout << endl;

    mined = true;
    print(); cout << endl;

    covered = true;
    print(); cout << endl;

    marked = true;
    print(); cout << endl;
}

// -------------------------------------
// class Board
// this class represents a 2 dimensional
// array of Cell objects for the game
// of minesweeper
//--------------------------------------

class Board{
public:
    Board();
    void print();
    void peek();
    void adjacencycount();
    void mixMined();
private:
    static const int rows = 5;
    static const int cols = 5;
    Cell cells [rows][cols];
    int mines;
};

// --------------------------
// functions for class Board
// --------------------------
Board::Board(){
    mines = 6;
        for(int i = 0; i < 1 ; i++){
            for(int j = 0; j < mines; j++){
                cells[i][j].setMined(true);
            }
        }
}

void Board::mixMined(){
    int shuffle = 1000;
    for(int i = 0; i < shuffle; i++){
        int r1 = (rand()%rows);
        int c1 = (rand()%cols);
        int r2 = (rand()%rows);
        int c2 = (rand()%cols);
        if(r1 && c1 != r2 && c2){
            bool temp = cells[r1][c1].getMined();
            cells[r1][c1].getMined() = cells[r2][c2].getMined();
            cells[r2][c2].getMined() = temp;
        }
     }

}

void Board::adjacencycount(){ 

    for( int i = 0; i < rows; i++){      
        for( int j = 0; j < cols; j++){ 
            if(!cells[i][j].getMined()){
                int count = 0;
                    if (i-1 >= 0 && j-1 >= 0 && cells[i-1][j-1].getMined()) count++;
                    if (i-1 >= 0 && cells[i-1][j].getMined()) count++;
                    if (i-1 >= 0 && j+1 <= cols-1 && cells[i-1][j+1].getMined()) count++;                                          
                    if (j-1 >= 0 && cells[i][j-1].getMined()) count++;
                    if (j+1 <= cols-1 && cells[i][j+1].getMined()) count++;                                       
                    if (i+1 <= rows-1 && j-1 >= 0 && cells[i+1][j-1].getMined()) count++;
                    if (i+1 <= rows-1 && cells[i+1][j].getMined()) count++;
                    if (i+1 <= rows-1 && j+1 <= cols-1 && cells[i+1][j+1].getMined()) count++;
                    cells[i][j].setAdj(count);              
                    // cout << count; -- for testing purposes
            }
        } 
    }
}

void Board::print(){
        for (int i = 0; i < rows; i++){
                for (int j = 0; j < cols; j++){
                        cells[i][j].print();
                                        }
                cout << endl << endl;
        }
}

void Board::peek(){
        for (int i = 0; i < rows; i++){
                for (int j = 0; j < cols; j++){
                        cells[i][j].peek();
                }
                cout << endl << endl;
        }
}

// -------------------------
// main function for testing
// -------------------------

int main(void) {
    //Cell c;
    //c.unittest();
    srand(time(0));

    Board b;
    b.mixMined();
    b.adjacencycount();
    b.peek();

    return 0;
} 
```

I'm trying to get my cells to swap, so that the mines would randomize every new game. Ive searched around and couldn't find a solution to this. I added "==" but that function isn't going to do what i want it to.

++EDIT++ I'm sorry it did state lvalue required, i missed typed that

```
minesweeper.cpp: In member function ‘void Board::mixMined()’:
minesweeper.cpp:130: error: lvalue required as left operand of assignment
minesweeper.cpp:131: error: lvalue required as left operand of assignment 
```

Thats the error that occurs.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T08:50:41.840

我认为`getMined()`实际上是这样的：

`bool getMined()`

所以你试图分配给`rValue`哪个是不可能的

您可能想编写一些函数，例如：

`void setMined(bool m)`并像这样使用它：

`cells[r1][c1].setMined( cells[r2][c2].getMined() );`

# java - Linkedin API. How do I get a pop window which asks user to click on allow and automatically get the code instead of copying and pasting in Linkedin

> ID：10445615
> 
> 赞同：0
> 
> 时间：2012-05-04T08:48:42.227
> 
> 标签：java, eclipse, linkedin

```
//Linkedin API 
 public AuthHandler(OAuthService serviceProvider)
 {
Scanner in = new Scanner(System.in);
Token requestToken = serviceProvider.getRequestToken();
System.out.println(serviceProvider.getAuthorizationUrl(requestToken));
System.out.println("And paste the verifier here");
System.out.print(">>");
Verifier verifier = new Verifier(in.nextLine()); //no errors in the code
accessToken = serviceProvider.getAccessToken(requestToken, verifier);
} 
```

// Here iam requesting the accesstoken // I got the url

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:00:33.987

我认为指定回调 url 选项可以做到这一点，并且复制粘贴代码是用于桌面应用程序而不是 Web 应用程序的 oauth 集成

# c++ - C++ - How to screen-capture, except for some windows

> ID：10445617
> 
> 赞同：11
> 
> 时间：2012-05-04T08:48:49.120
> 
> 标签：c++, windows, winapi, hide, screen-capture

**Situation**: I have a software that performs screen sharing over the Internet, where one user acts as a presenter, and other users act as viewers/attendees.

Besides the presentation windows, the presenter also has a set of NON-SHARING-WINDOWS that appear on the screen (a button bar for start sharing/stop sharing/etc., a Skype window etc.).

The presenter can configure from the setup of the screen sharing software to make these NON-SHARING-WINDOWS invisible (i.e. they will not appear in the screen sharing that is being sent to the attendees, but the window content behind them will appear in the screenshot).

The screenshots are sent at approximately 10 frames-per-second, or faster.

**Question**: how can I programmatically capture the screen, except for these NON-SHARING-WINDOWS windows?

**Notes**:

*   Because of the higher frames-per-second value, I cannot minimize/maximize/set alpha for these windows, because then the windows will flicker. The application is written in Win32 C++.
*   I would use layered windows, but because of the Windows 7 Desktop Composition feature, this is not usable out-of-the-box (and in Windows 8, you cannot use DwmEnableComposition anymore to temporarily and programmatically disable composition)
*   I could use the layered window approach for Windows XP/2000/7 etc., and a different approach for Windows 8 (if there is one), though I would prefer a single process that works on all systems
*   I could also try to "compose" the screenshots by capturing individual images (of the desktop, the windows that need to be captured) and using their z-index to create the final image, but because of the required frames-per-second value, this process would be too slow.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-19T08:31:41.950

在 Windows 中，甚至桌面也被认为是一个窗口，并且有自己的 HWND。然而，仅靠自己复制“壁纸”似乎并不容易。

所以我基本上看到了两种方法来做到这一点。1\. 复制整个桌面 例如 BitBlt(GetWindowDC(GetDesktopWindow()),...)

或者

2.  `GetWindow`从桌面窗口开始反向 ​​使用和遍历窗口列表，您可以使用 GetDesktopWindow() 确定其 HWND，如下所示：

    `// paint on a black DC hwnd=GetDesktopWindow() while (hwnd = GetWindow(hwnd, GW_HWNDPREV)) { // is this window not shared? continue // else bitblt it into our dc }`

希望我能给我一些启发:-) 如果有人知道如何只复制没有子窗口的桌面，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-26T10:26:04.180

您可以使用放大镜 API。

放大镜 API 中有一个函数允许您从目标窗口中排除特定窗口（放大镜呈现 1 倍放大率的窗口）。

您可以将此窗口设置为全屏并使其透明，然后使用 PrintWindow 功能。

功能：[https ://docs.microsoft.com/en-us/windows/desktop/api/magnification/nf-magnification-magsetwindowfilterlist](https://docs.microsoft.com/en-us/windows/desktop/api/magnification/nf-magnification-magsetwindowfilterlist)

示例项目：

[https://www.codeproject.com/Articles/607288/Screenshot-using-the-Magnification-library](https://www.codeproject.com/Articles/607288/Screenshot-using-the-Magnification-library)

[https://code.msdn.microsoft.com/windowsdesktop/Magnification-API-Sample-14269fd2](https://code.msdn.microsoft.com/windowsdesktop/Magnification-API-Sample-14269fd2)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-04T19:40:14.420

我认为将捕获内容限制在大窗口内会更简单。否则，您将需要从屏幕截图中剪切一些窗口。

# visual-studio-2010 - No option to 'Get Latest' in VS2010 with TFS

> ID：10445620
> 
> 赞同：1
> 
> 时间：2012-05-04T08:48:55.783
> 
> 标签：visual-studio-2010

I am using VS2010 and have suddenly lost the option to get latest code using TFS in my solution. In the 'Team Explorer' tab I also cannot expand the 'Source Control' option. Everything else seems ok as far as I can see.

This *may* have something to do with getting IE7 installed on Windows 7 (I know, i know!!) which cocked everything up. A re-register of dlls appeared to have fixed things, but this is being problematic.

Operating system, as said above, is Windows 7 32 bit.

Any thoughts or pointers?

cheers.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:08:01.867

1.  检查您是否已连接到 TFS 服务器。
2.  检查您的工作区映射。
3.  命令行有什么`tf get`作用？
4.  命令行有什么`tf get /force`作用？（服务器是否对您的工作区状态有不同的想法？）

# noclassdeffounderror - kafka NoClassDefFoundError kafka/Kafka

> ID：10445621
> 
> 赞同：17
> 
> 时间：2012-05-04T08:48:57.407
> 
> 标签：noclassdeffounderror, apache-zookeeper, apache-kafka

关于[Apache-Kafka 消息队列](http://incubator.apache.org/kafka/index.html)。

我已经从 Kafka 下载页面下载了 Apache Kafka。我已将其提取到`/opt/apache/installed/kafka-0.7.0-incubating-src`.

[快速入门页面](http://incubator.apache.org/kafka/quickstart.html)说您需要启动 Zookeeper，然后通过运行以下命令启动 Kafka ：
`>bin/kafka-server-start.sh config/server.properties`

我正在使用一个单独的 Zookeeper 服务器，所以我编辑`config/server.properties`指向那个 Zookeeper 实例。

当我按照快速入门页面中的说明运行 Kafka 时，出现以下错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: kafka/Kafka
Caused by: java.lang.ClassNotFoundException: kafka.Kafka
        at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:252)
        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)
Could not find the main class: kafka.Kafka.  Program will exit. 
```

我使用 telnet 确保可以从运行 Kafka 的机器访问 Zookeeper 实例。一切都好。

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-04T10:35:04.407

您必须首先通过运行以下命令来构建 Kafka：

```
> ./sbt update
> ./sbt package 
```

只有这样，Kafka 才能准备好使用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-22T00:57:28.423

你应该知道

```
./sbt update
./sbt package 
```

默认情况下，将为 Scala 2.8.0 生成 Kafka 二进制文件。如果您需要其他版本，则需要执行

```
./sbt "++2.9.2 update"
./sbt "++2.9.2 package" 
```

将 2.9.2 替换为所需的版本号。这将生成适当的二进制文件。一般来说，当你切换版本时，你应该运行

```
./sbt clean 
```

清理以前版本的二进制文件。

实际上，此外，您可能还需要执行此命令

```
./sbt "++2.9.2 assembly-package-dependency" 
```

此命令解析运行 Kafka 的所有依赖项，并创建一个仅包含这些依赖项的 jar。然后启动脚本会将其添加到类路径中，您应该拥有所有所需的类。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-08-14T20:06:22.960

似乎没有`SCALA_VERSION`环境变量，可执行文件不知道如何加载必要的库。从 Kafka 安装目录尝试以下操作：

`SCALA_VERSION=2.9.3 bin/kafka-server-start.sh config/server.properties`

请参阅[http://kafka.apache.org/documentation.html#quickstart](http://kafka.apache.org/documentation.html#quickstart)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T19:05:12.637

只是为了添加到前面的答案，如果您正在运行 IntelliJ，并且想要在 IntelliJ 中运行 Kafka 和/或单步执行它，请确保运行

```
> ./sbt idea 
```

我轻松地花了半天时间尝试从头开始创建 IntelliJ 项目，结果发现我只需要一个命令就可以让它工作。此外，请确保您已安装 IntelliJ 的 Scala 插件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-11T09:43:07.373

您还可以使用 Apache 提供的二进制下载。

例如，从此[链接](http://a.mbbsindia.com/kafka/0.9.0.1/kafka_2.11-0.9.0.1.tgz)下载 kafka 版本-0.9.0.1 。

对于其他版本，请从[link2](http://kafka.apache.org/downloads.html)下载并下载二进制版本。这些是已经构建的版本。无需使用 Scala 再次构建。

使用正在使用源下载代替。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-07-08T11:05:46.793

您已经下载了源版本。下载 Kafka 的二进制包并继续您的测试。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-01-03T22:16:13.087

您可以在 Kafka 下载页面上找到以下两个选项

[https://kafka.apache.org/downloads.html](https://kafka.apache.org/downloads.html)

源下载：
二进制下载

你已经下载了“kafka-0.7.0-incubating-src”它的源代码

下载Kafka Scala 2.10的二进制包——kafka_2.10-0.10.1.1.tgz (asc, md5)

# c# - 关于 C# 中的列表视图

> ID：10445634
> 
> 赞同：-2
> 
> 时间：2012-05-04T08:49:48.660
> 
> 标签：c#, listview

我正在从用户那里获取字符串，我需要使用 listview 将此字符串打印到屏幕上。但我的代码不起作用。我怎么了

```
 string tagToSearch = null;
        tagToSearch = textBoxSearch.Text;

        ListViewItem lvItem = new ListViewItem(tagToSearch);
        listViewSearch.Items.Insert(0, lvItem);

        listViewSearch.Refresh(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:56:03.693

要将您的项目添加到 ListView，您应该使用 listViewSearch.Items.Add(lvItem);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:13:38.477

要让 ListView 在详细信息模式下显示某些内容，您必须添加至少[一列](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.columns.aspx)。

```
// Create columns for the items and subitems.
// Width of -2 indicates auto-size.
listView1.Columns.Add("Item Column", -2, HorizontalAlignment.Left); 
```

# coldfusion - 如何在 ColdFusion 中确定文件路径是绝对路径还是相对路径

> ID：10445635
> 
> 赞同：4
> 
> 时间：2012-05-04T08:49:55.880
> 
> 标签：coldfusion

我有一个接受文件路径的函数。用户可以传入文件的绝对路径或相对路径。如果提供了相对路径，该`ExpandPath`函数可以将其转换为绝对路径，如下所示：

```
<cfset filepath = ExpandPath("data/test.txt") > 
```

..它返回：

```
C:\www\example\data\test 
```

但是，如果用户提供了一个绝对路径，例如：

```
<cfset filepath = ExpandPath("C:\www\example\data\test") > 
```

..它返回：

```
C:\www\example\C:\www\example\data\test 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T15:37:03.407

一种可能更灵活的方法是检查原始输入中的目录是否存在，如果不存在，请尝试扩展路径。像这样的东西：

```
<cfif directoryExists(myFileLocation)>
  <cfset theDirectory=myFileLocation)>
<cfelseif directoryExists(expandPath(myFileLocation))>
  <cfset theDirectory=expandPath(myFileLocation)>
<cfelse>
  <cfthrow message="Invalid directory!">
</cfif> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T09:30:30.847

您可以测试该字符串并查看它是否以 C:\ 开头（对于 windows 或 \\ 对于 unix），并将其用作 if？这可能是您的窗口检查：

```
<cfif reFindNoCase("[a-zA-Z]:\\",myFileLocation)>
   <!--- Is a absolute path --->
<cfelse>
   <!--- Is not an absolute path --->
</cfif> 
```

# c++ - Weird vector addition with '0' as '-1'

> ID：10445637
> 
> 赞同：0
> 
> 时间：2012-05-04T08:50:01.323
> 
> 标签：c++, debugging, error-handling

I'm writing a basic chess program to calculate how many sets you can make with the given chess figures. The data file:

```
4
22 3 5 6 2 0
1 1 1 1 1 1
8 4 4 4 1 2
5 3 3 3 0 2 
```

The code:

```
#include <iostream>
#include <fstream>
#include <vector>

int main
(int argc, char *argv[])
{
    std::fstream data_file;
    size_t i, k;
    std::vector<long> chess;
    long t, n;

    data_file.open("U1.txt", std::ios::in);

    data_file >> n;

    for (i = 0; i < n; i++)
        chess.push_back(0);

    for (i = 0; i < n; i++) {
        for (k = 0; k < 6; k++) {
            data_file >> t;
            std::cout << t << " ";
            chess[k] += t;
        }
        std::cout << std::endl;
    }

    data_file.close();

    for (int i = 0; i < 6; i++)
        std::cout << chess[i] << " ";
    std::cout << std::endl;

    data_file.open("U1rez.txt", std::ios::out);
    data_file << n;
    std::cout << n << std::endl;
    data_file.close();

    return EXIT_SUCCESS;
} 
```

The output:

```
22 3 5 6 2 0 
1 1 1 1 1 1 
8 4 4 4 1 2 
5 3 3 3 0 2 
36 11 13 14 3 4 
4 
```

Why am I getting **3** and **4** at the end result just after 36, 11, 13 and 14 at line 5? When I print the test values I seem to get the right numbers but something goes terribly wrong in the addition of them in the vector container.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T08:55:11.413

```
for (i = 0; i < n; i++)
    chess.push_back(0); 
```

. . .

```
 for (i = 0; i < n; i++) {
    for (k = 0; k < 6; k++) {
        data_file >> t;
        std::cout << t << " ";
        chess[k] += t;
    }
    std::cout << std::endl;
} 
```

在这里，您在向量中初始化了 n(=4) 个位置，但在这里您正在访问导致加法问题的向量国际象棋的索引 4 和 5。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T09:42:39.083

顺便说一句，如果你放弃 C 强加的一些规则，你会更轻松地使用 C++。

*   C++ API 使用范围有界的资源管理；也就是说，这里不需要显式关闭文件句柄，因为当在声明的作用域的末尾调用它的析构函数时，该类会为您执行此操作。
*   首选`std::cout << "\n"`，`std::cout << std::endl`除非您实际上打算插入换行符并刷新缓冲区。许多 C++ 程序员仍在使用`printf`，我个人认为它比 C++ 对 IO 的丑陋标准解决方案要优雅得多——随意使用`printf`。
*   `for (size_type i = 0; ... ; ...)`当您在使用变量的位置（例如）而不是在方法的开头声明变量时，您是否发现代码更易于管理和阅读？这也允许编译器对寄存器的使用做出更好的选择，因为它有更多关于临时变量范围的信息。

以下是 C++11 的一些功能，它们也可以为您节省一些时间：

*   自动类型推断：当编译器可以推断出变量的类型时，您不必显式指定它；您可以`auto`改用（例如`auto x = parse_data();`）。
*   Range-for：如果您在提供全局定义`begin()`和`end()`（例如任何标准容器）的容器上进行操作，则不要这样：

```
typedef typename container_type::const_iterator iter;
for (iter i = begin(container), iter l = end(container); i != l; ++i) { ... } 
```

你可以这样做：

```
for (const auto& x : container) { ... }
```

我只是想给你一些快速的指示，可以节省你一些时间。

# objective-c - 如何以编程方式检索收藏的联系人

> ID：10445640
> 
> 赞同：0
> 
> 时间：2012-05-04T08:50:15.923
> 
> 标签：objective-c, ios

> **可能重复：**
> [是否可以访问 iPhone 的“收藏”号码？](https://stackoverflow.com/questions/2433665/is-it-possible-to-access-the-iphone-favorite-numbers)

我想检索特别喜欢的联系人。是否有任何标志表明此联系人是否收藏？这有可能得到最喜欢的旗帜吗？如果是，那么如何？

# samsung-smart-tv - 测试期间三星智能电视应用程序 ID？

> ID：10445641
> 
> 赞同：0
> 
> 时间：2012-05-04T08:50:28.953
> 
> 标签：samsung-smart-tv

我一直在研究为三星智能电视制作应用程序。我已经启动并运行了整个开发环境，并且我还有一个可用于测试的“真实”设备。我唯一无法弄清楚的是，您如何在开发中获取 appID？

我需要它，因为我必须与电视应用程序通信。此处描述了执行此操作的 API：[Client to TV comm](http://www.samsungdforum.com/upload_files/files/guide/data/html/html_3/api_reference/javascript_apis/convergence_app_api/convergence_app_client_to_tvapp_comm.html)

文档说：

> 注意：appID 是 Samsung Apps 发布的唯一电视应用程序 ID。

这是否意味着只有将应用程序上传到三星“应用商店”后才会分配 ID？如果是这样，我如何在上传之前测试我的客户端和电视应用程序之间的通信？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T17:48:52.377

The appId is the value of curWidget.id, for example:

```
var appId = curWidget.id; 
```

# haskell - 我们可以为自己更改 dFAULT_FD_BUFFER_SIZE 值吗？

> ID：10445647
> 
> 赞同：0
> 
> 时间：2012-05-04T08:50:38.140
> 
> 标签：haskell

我看过[http://www.haskell.org/ghc/docs/latest/html/libraries/base/src/GHC-IO-FD.html](http://www.haskell.org/ghc/docs/latest/html/libraries/base/src/GHC-IO-FD.html)。那里说：

```
-- We used to use System.Posix.Internals.dEFAULT_BUFFER_SIZE, which is
-- taken from the value of BUFSIZ on the current platform.  This value
-- varies too much though: it is 512 on Windows, 1024 on OS X and 8192
-- on Linux.  So let's just use a decent size on every platform:
dEFAULT_FD_BUFFER_SIZE :: Int
dEFAULT_FD_BUFFER_SIZE = 8096 
```

我们可以为自己更改 dFAULT_FD_BUFFER_SIZE 值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T10:42:47.947

您可以在源代码中更改它并使用新大小编译 GHC。这可能会影响性能（它肯定会影响极端值），否则您可能不会注意到。

除此之外，您无法更改它。

快速搜索[基地](http://hackage.haskell.org/package/base)来源仅显示一个使用站点，

```
instance BufferedIO FD where
  newBuffer _dev state = newByteBuffer dEFAULT_FD_BUFFER_SIZE state
  fillReadBuffer    fd buf = readBuf' fd buf
  fillReadBuffer0   fd buf = readBufNonBlocking fd buf
  flushWriteBuffer  fd buf = writeBuf' fd buf
  flushWriteBuffer0 fd buf = writeBufNonBlocking fd buf 
```

所以没有地方可以在编译后插入不同的值。

# actionscript-3 - 坐标插值

> ID：10445650
> 
> 赞同：1
> 
> 时间：2012-05-04T08:51:10.210
> 
> 标签：actionscript-3, math, interpolation

我们每 300 毫秒从服务器向客户端发送球的坐标。我们必须插入坐标以使移动平滑。这是代码（AS3）：

```
private function run(event:Event):void
{
    // Current frame ball position
    var currentPosition:Point = new Point(this.x, this.y);

    // Vector of the speed
    _velocity = _destinationPoint.subtract(currentPosition);

    // Interpolation
    // Game.timeLapse - time from last package with coordinates (last change of destinationPoint)
    // stage.frameRate - fps
    _velocity.normalize(_velocity.length * 1000 / Game.timeLapse / stage.frameRate);

    // If ball isn't at the end of the path, move it
    if (Point.distance(currentPosition, _destinationPoint) > 1) {
        this.x += _velocity.x;
        this.y += _velocity.y;
    } else {
        // Otherwise (we are at the end of the path - remove listener from this event
        this.removeEventListener(Event.ENTER_FRAME, run);
        this.dispatchEvent(new GameEvent(GameEvent.PLAYER_STOP));
    }
} 
```

问题描述如下图：

![在此处输入图像描述](../Images/5d2fed35511f6d1f6b3ba96e76c65d92.png)

*   红点 - 目的地点

*   黑线 - 从当前点到目的地的线，没有标准化

*   绿色点缀 - 球的路径

也许有一种方法可以使移动更顺畅但更准确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:08:57.330

1.  如果您想精确地为三个点插入路径步骤，则需要使用[二次贝塞尔曲线](http://en.wikipedia.org/wiki/B%C3%A9zier_curve)数学来计算曲线上距起点的*任何给定距离的任何位置。*你需要它来沿着曲线获得*相等的步长*，你在你的照片上。这相当棘手，因为当您使用多项式形式的贝塞尔曲线方程时，对于相等的参数增量，您不会沿着曲线获得相等的距离。

    ![二次贝塞尔曲线参数多项式](../Images/f94022c3e697aa88af63e576ed246c07.png)

    因此，您需要将**贝塞尔曲线视为抛物线段**（实际上就是这样），并且可以将任务重新表述为“沿着等长的步长沿着抛物线步进”。这仍然很棘手，但幸运的是有一个解决方案：

    [http://code.google.com/p/bezier/](http://code.google.com/p/bezier/)

    我多次使用这个库（沿着抛物线等步走），它对我来说非常好用。

2.  您很可能希望在任意一组点之间进行插值。如果是这种情况，您可以使用**拉格朗日近似**。

    下面是我对拉格朗日近似的简单实现。（谷歌搜索它肯定会给你更多。）你提供具有任意数量的已知函数值的逼近器，它可以为介于两者之间的任何参数值生成平滑函数的值。

--

```
package org.noregret.math 
{
    import flash.geom.Point;
    import flash.utils.Dictionary;

    /**
     * @author Michael "Nox Noctis" Antipin
     */
    public class LagrangeApproximator {

        private const points:Vector.<Point> = new Vector.<Point>();
        private const pointByArg:Dictionary = new Dictionary();

        private var isSorted:Boolean;

        public function LagrangeApproximator()
        {
        }

        public function addValue(argument:Number, value:Number):void
        {
            var point:Point;
            if (pointByArg[argument] != null) {
                trace("LagrangeApproximator.addValue("+arguments+"): ERROR duplicate function argument!");
                point = pointByArg[argument];
            } else {
                point = new Point();
                points.push(point);
                pointByArg[argument] = point;
            }
            point.x = argument;
            point.y = value;
            isSorted = false;
        }

        public function getApproximationValue(argument:Number):Number
        {
            if (!isSorted) {
                isSorted = true;
                points.sort(sortByArgument);
            }
            var listLength:uint = points.length;
            var point1:Point, point2:Point;
            var result:Number = 0;
            var coefficient:Number;
            for(var i:uint =0; i<listLength; i++) {
                coefficient = 1;
                point1 = points[i];
                for(var j:uint = 0; j<listLength; j++) {
                    if (i != j) {
                        point2 = points[j];
                        coefficient *= (argument-point2.x) / (point1.x-point2.x);
                    }
                }        
                result += point1.y * coefficient;
            }
            return result;
        }

        private function sortByArgument(a:Point, b:Point):int
        {
            if (a.x < b.x) {
                return -1;
            }
            if (a.x > b.x) {
                return 1;
            }            
            return 0;
        }

        public function get length():int
        {
            return points.length;            
        }

        public function clear():void
        {
            points.length = 0;
            var key:*;
            for (key in pointByArg) {
                delete pointByArg[key];
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:07:40.837

您可以在每个刻度上发送多个坐标。或者与每个点一起发送一些额外的属性，也许说它是否是球反弹的点，或者是否可以平滑。

与发送、处理和接收的开销相比，在一个事务中发送一系列点将为您提供更高的准确性，并且不会增加太多的数据包大小。

# c# - 如何自动移动轨迹栏

> ID：10445651
> 
> 赞同：0
> 
> 时间：2012-05-04T08:51:13.027
> 
> 标签：c#

嗨，我正在尝试`MP3`用语言制作玩家，`C#`但我遇到了问题。

我想`SeekBar`用`TrackBar`. 所以，我希望我的拇指定期移动。

但似乎没有合适的功能供我使用....

有没有人知道怎么做？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T19:47:09.943

```
double duration = double.Parse(trackBar1.Value.ToString()) / double.Parse(trackBar1.Maximum.ToString());
                axWindowsMediaPlayer1.Ctlcontrols.currentPosition =axWindowsMediaPlayer1.currentMedia.duration * duration; 
```

# android - 如何在项目中将文件添加到内部存储

> ID：10445659
> 
> 赞同：1
> 
> 时间：2012-05-04T08:51:40.510
> 
> 标签：android, storage, internal

我有一些应该是可编辑的配置文件。在创建 .apk 文件之前，我需要将它们全部添加到项目中。他们也应该对应用程序保持私有，然后我想他们应该进入内部存储。有可能吗？我应该把它们放在哪个文件夹中。

我发现的一个解决方案是在第一次运行时将它们添加到资产并移动到内部存储，但是文件大小太大而无法复制内存。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:02:51.430

> 我有一些应该是可编辑的配置文件。在创建 .apk 文件之前，我需要将它们全部添加到项目中。

默认情况下，这两个概念是互斥的。`assets/`无法编辑APK 中的文件（例如 in ）。

> 我发现的一个解决方案是在第一次运行时将它们添加到资产并移动到内部存储，但是文件大小太大而无法复制内存。

然后制作更小的文件。这是您唯一的选择，甚至可以满足您的要求。

# wpf - 集合和父/子关系的 MVVM 概念

> ID：10445660
> 
> 赞同：2
> 
> 时间：2012-05-04T08:51:41.370
> 
> 标签：wpf, data-binding, mvvm

在我的应用程序模型中，我有一个“父母”列表，每个“父母”都引用一个“孩子”列表（例如，一个足球队列表，每个足球队都包含一个球员列表）。

我在树视图中可视化这个列表。我为树创建了一个视图模型类，为足球队创建了一个视图模型类（我们称之为“footballteamViewModel”）。树的类包含带有 footballteamViewModel-items 的 ObservableCollection。树的项目源是这个 ObservableCollection。在初始化期间，我为模型中的每个足球队创建一个对应的 footballteamViewModel 对象并将其添加到 ObservableCollection。

问题是，我的模型中的足球队列表可以从树的外部进行更改，并且我希望更新树。因此，如果有人从我的模型列表中删除了一个足球队，我将不得不删除我的足球队视图模型项目的 ObservableCollection 中的相应项目。

我无法将模型中的足球队列表直接绑定到视图。因此，每次更改模型中的集合时，我都必须以某种方式更新 ViewModel 中的 ObservableCollection。

我处理这个问题的方法是在模型中使用 ObservableCollection 并注册到 ViewModel 中的 collectionChanged 事件，以便在模型集合发生更改时更新我的​​ ViewModel（footballteamViewModel 对象的 Observable 集合）。但这并不“正确”。有没有更好的办法？

在键入此内容时，我发现另一篇文章描述了完全相同的问题：[WPF/MVVM: Delegating a domain Model collection to a ViewModel](https://stackoverflow.com/questions/2906940/wpf-mvvm-delegating-a-domain-model-collection-to-a-viewmodel)。那里的答案鼓励我，我解决这个问题的方式并不是完全错误的，但我仍然想知道是否还有另一种方法。

编辑：从您提供的第一个答案中，我假设我的问题没有明确的答案。他们都很有帮助，所以值得一读。我只参考 Bindable Linq/Continous Linq/Optics 框架来标记答案，因为我认为它会帮助其他最容易被我的问题绊倒的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T09:47:05.583

这是 MVVM 更令人讨厌的地方之一。

我前一段时间做过的一件事是创建一个`ViewModelCollection<T>`继承`ObservableCollection<T>`并具有修改器方法（添加、删除）的方法，它们对两个集合执行操作，如下所示：

```
 public interface IViewModel<T>
{
    T WrappedModel { get; }
}

public class ViewModelCollection<T,M> : ObservableCollection<T,M> where T : IViewModel<M>
{
    private IList<M> _baseCollection;

    public ViewModelCollection(IList<T> baseCollection)
    {
        _baseCollection = baseCollection;
    }

    public override void Add(T objectToAdd)
    {
        IViewModel<M> vm = objectToAdd as IViewModel<M>;
        if (vm != null)
        {
            this.Add(objectToAdd);
            _baseCollection.Add(vm.WrappedModel);
        }
    }

    public override void Remove(T objectToRemove)
    {
        IViewModel<M> vm = objectToRemoveas IViewModel<M>;
        if (vm != null)
        {
            this.Remove(objectToRemove);
            _baseCollection.Remove(vm.WrappedModel);
        }
    }
} 
```

现在我根本不这样做，我只是使用 Castle Proxies，将 INotifyPropertyChanged 功能添加到我的模型中 - 节省了大量样板代码！

请注意，我没有测试代码，只是从内存中输入的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T09:42:16.370

您说您不能将模型集合直接绑定到视图（这意味着视图模型需要`ObservableCollection`使用模型集合包含的内容的副本制作自己的），另外，当模型集合更改时需要实时更新视图（这意味着模型需要将此类更改通知视图模型，并且视图模型需要更新其内部副本）。

所有这一切并没有留下太多的回旋余地。一种可能有趣的变体是将模型的集合设置为 read/write `IEnumerable`，在这种情况下，模型的消费者将被迫在需要修改集合时将其与新实例交换。作为回报，可以简化视图模型的“保持同步”代码，并且可以通过`INotifyPropertyChanged`集合属性触发同步。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T02:52:04.447

迟到了，但可能会帮助其他人...

阅读这个关于这个主题的优秀的 3 部分博客文章系列。
第 3 部分是关于集合并展示了一些解决方案 - 对我有很大帮助

[MVVM：包装还是不包装？ViewModel 应该包装多少 Model？](http://blog.alner.net/archive/2010/02/09/mvvm-to-wrap-or-not-to-wrap.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T09:43:19.967

您的解决方案完全没有错，但是有一些库可以帮助您更轻松地实现它，例如 BindableLinq、ContinuousLinq 或 Obtics。[你在这里](https://stackoverflow.com/questions/167622/bindable-linq-vs-continuous-linq)有一个关于他们的讨论。可悲的是，它们似乎都没有进一步发展。

我对 Clinq 的个人体验非常好，我仍然使用它，应该适用于您的情况。

# java - 从 mysql 数据库中检索图像并将其显示在 html 页面中

> ID：10445661
> 
> 赞同：0
> 
> 时间：2012-05-04T08:51:43.190
> 
> 标签：java, servlet-3.0

我只是想从数据库中检索图像并显示它。我写了以下代码：

```
 RetreiveImage.java

    import myconnection.ConnetionDefault;
    import java.sql.*;
    import java.io.*;
    import javax.servlet.*;
    import javax.servlet.http.*;
    public class RetreiveImage extends HttpServlet{
    public void doGet(HttpServletRequest request, HttpServletResponse response)         throws         ServletException, IOException{
    PrintWriter out = response.getWriter();
    Connection con=null;
    String id=request.getParameter("id");
    try{
    con=ConnetionDefault.getConnection();
    ResultSet results = null;
    PreparedStatement ps = null;
    ps = con.prepareStatement("select picture from pic_229084519 where pic_id=?");
    ps.setString(1,id);
    results = ps.executeQuery();
    String imgLen="";
    if(results.next()){
    imgLen = results.getString(1);
    System.out.println(imgLen.length());

    int len = imgLen.length();
    byte [] rb = new byte[len];
    InputStream readImg = results.getBinaryStream(1);
    int index=readImg.read(rb, 0, len);
    System.out.println("index"+index);
    ConnetionDefault.close(results,ps,con);
    response.reset();
    response.setContentType("image/jpg");
    response.getOutputStream().write(rb,0,len);
    response.getOutputStream().flush();

    RequestDispatcher rd=request.getRequestDispatcher("gg.html");
    rd.forward(request,response);
    }
    } catch (Exception e){

    e.printStackTrace();
    }
    }
    }

    retImagel.html

    <html>
    <head>
    <title>Login</title>

    </head>  
    <body bgcolor="Gold">
    <center>

    <form action="ret.pic">
    <table>
    <tr><th>Namme</th><td><input type="text" name="id" size="3"/></td><td></td>

    <td><input type="submit" value="Get"></td><td><input type="reset"     value="Cancel"/></td></tr>
    </table>
    </form>

    </center>
    </body>
    </html>

    gg.html

    <html>
    <head>
     <title>Login</title>

    </head>  
    <body bgcolor="Gold">

    <img src="/ret.pic?id=${id}"/>
    </center>
    </body>
    </html> 
```

我的问题是它在默认响应页面中显示图像。但我想要它在我出错的 gg.html 中。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T09:54:36.113

在您的 web.xml 中设置过滤器以调用您的 servlet。

在您的 gg.html 页面上插入标签 < img "url to image that filter can intersept" >

# c# - c#：什么是常量表达式？

> ID：10445663
> 
> 赞同：6
> 
> 时间：2012-05-04T08:52:06.937
> 
> 标签：c#, custom-attributes, constant-expression

我目前正在使用属性。我经常遇到错误“属性参数必须是属性参数类型的常量表达式、typeof 表达式或数组创建表达式。” 我真的不知道“常量表达式”是什么意思。

能够将 a 传递`Func<MyType, bool>`给属性（由在属性存在时执行的代码使用）将非常有用。但很可惜，没有。我不明白为什么不能将该类型放在程序集元数据中，我认为这是我无法将其传递给属性的原因。

谁能给我任何想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T08:55:40.183

常量表达式是仅在编译时确定的值，包括其他常量表达式的字符串连接、算术等。

因此，例如“”是一个常量表达式，但`String.Empty`不是。

`String`是唯一支持非空常量表达式的引用类型。对于值类型，原始类型（`int`等）并`decimal`支持常量表达式......虽然您不能`decimal`在属性中使用，因为它不是 CLR 中的原始类型。（您甚至不能`decimal`在属性构造函数中指定为参数类型。）

有关详细信息，请参阅 C# 4 规范的第 7.19 节。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T08:58:48.457

编译器需要能够在编译时创建属性，因为它们与实际数据一起嵌入到程序集中（它们由编译器实例化并序列化到输出文件中）。这就是为什么你需要一个常量表达式。

基本上，您可以使用所有基本数据类型（如`int`、`bool`等`string`）。您还可以使用`typeof`表达式，因为它们将被解析为标识类型的元数据标记，这在编译时很好。

也许您可以将您的概念`Func<MyType, bool>`放入您的类型实现的接口中。或者进入一个单独的处理程序类，您可以使用`typeof(MyHandlerClass)`表达式将其传递给您的属性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T08:54:29.607

中的属性`C#`是*编译时*工件，因此为了创建它们，它们必须具有*常量*类型参数/标记/任何...

我想，有可能*尝试*做你想做的事情：

[C# 中的动态属性](http://geekswithblogs.net/abhijeetp/archive/2009/01/10/dynamic-attributes-in-c.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-04T08:55:25.097

> 常量表达式是可以在编译时完全计算的表达式。

[http://msdn.microsoft.com/en-us/library/aa691319](http://msdn.microsoft.com/en-us/library/aa691319(v=vs.71).aspx) (v=vs.71).aspx（旧文章但仍然有效）

# android - 在 Android SurfaceView 上实现捏合和缩放

> ID：10445664
> 
> 赞同：10
> 
> 时间：2012-05-04T08:52:11.667
> 
> 标签：android, graphics, 2d

我正在使用 SurfaceView 在 Android 应用程序中显示大图像（通常比屏幕大，但并非总是如此）。这是非常简单的图形，使用 OnTouchListener 或 GestureDetector 很容易实现滚动。图形在渲染循环中运行，但性能似乎对于所有真实设备来说都绰绰有余（不过，模拟器可能有点痛苦）。

我也在考虑在图像上实现 Pinch 和 Zoom，但我宁愿避免使用 OpenGL，因为我对 OpenGL 的经验很少，而且对于这么简单的事情，使用 OpenGL 似乎有点矫枉过正。

似乎 android.graphics.Camera 类可能允许我实现我想要的缩放功能。

有谁知道在基本的 Android SurfaceView 上实现类似捏缩放功能的任何好的示例？

另外，如果您已经实现了类似的东西，对性能有什么想法吗？考虑到这里需要的东西如此简单，OpenGL 是否值得额外的麻烦？

* * *

这里的问题不清楚，还是我错过了我应该找到的 Android 开发者网站上一些非常明显的文档/代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T00:25:05.580

好的 - 终于有时间真正研究这个问题一段时间，我实际上找到了一个解决我遇到的问题的解决方案。

该解决方案依赖于 BitmapRegionDecoder (API10+)。这样做是允许应用程序加载位图的一部分，而不是尝试一次性加载整个位图。

解决方案的本质：

1.  整个位图的下采样版本保存在内存中。因为这个版本是下采样的，所以它可以永久保存在那里。
2.  线程在位图的当前视口（或更多）中不断加载到内存（使用 BitmapRegionDecoder）。由于它至多比屏幕略大，因此它也应该能够舒适地存储在内存中。
3.  渲染线程将适当的版本绘制到 Canvas；即，如果您正在缩小或位图不可用（例如，因为它在后台加载），则使用下采样版本。
4.  Pan、Fling 和 Zoom 由 GestureListeners 处理。

感谢 John Lombardo 首次实现了我发现的这个想法。

[我在https://github.com/micabyte/android_game](https://github.com/micabyte/android_game)开源了我自己的实现以及我的一些其他实用程序类

这是一个相当新的实现，所以它目前还没有受到真实用户的洗礼。但是，我已经运行了显示 8000x4000 像素位图的测试，到目前为止没有任何问题。性能似乎足以满足我的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T23:58:22.683

Implementing pinch and zoom is something that you would do with a combination of the ScaleGestureDetector and the Canvas interface with a transformation matrix. You'll want to make use of the same transformation matrix to handle both scale and translation.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T00:08:16.453

查看索尼爱立信开发者网站上的 One Finger Zoom 示例。 [http://developer.sonymobile.com/wp/tag/zoom/](http://developer.sonymobile.com/wp/tag/zoom/)

# java - 带有更新图像的 JLabel 刷新图标

> ID：10445665
> 
> 赞同：4
> 
> 时间：2012-05-04T08:52:25.113
> 
> 标签：java, swing, refresh, jlabel, imageicon

我正在尝试进行图像处理实验。基本上我有一个由计时器持续更新的图像，我在 JLabel 中显示该图像。

我的问题是 JLabel 不刷新图像。

这是我的计时器代码：

```
Timer timer = new Timer(200, new ActionListener() {
        public void actionPerformed(ActionEvent e) {

            count++;

            System.out.println("timer");
            System.out.println(filename);

            ImageIcon icon = new ImageIcon(filename);

            label = new JLabel();
            label.setIcon(icon);
            label.setText(""+count);

            panel = new JPanel();
            panel.add(label);

            frame.getContentPane().removeAll();
            frame.getContentPane().add(panel);

            frame.repaint();
            frame.validate();

            try{
                FileWriter fstream;

                fstream = new FileWriter(filename,true);

                BufferedWriter out = new BufferedWriter(fstream);

                out.write("text to append");
                out.close();
            }catch (Exception ex){
                System.err.println("Error: " + ex.getMessage());
            }
        }
    }); 
```

其中文件名是我的图像的路径。

显示图像，但 JLabel 从不刷新我的图像。我测试了我的代码，如果我在两个不同的图像之间切换，它就可以工作......

编辑：

每次创建最后一个图像并使用时间戳重命名时，我都通过重复来解决。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T09:32:47.437

```
label = new JLabel();
label.setIcon(icon);
label.setText(""+count);

panel = new JPanel();
panel.add(label);

frame.getContentPane().removeAll();
frame.getContentPane().add(panel);

frame.repaint();
frame.validate(); 
```

将所有内容替换为以下内容：

```
label.setIcon(icon); 
```

如果此时标签不可见，则将其声明为外部类的类属性或与 相同的级别`frame`（在该片段中显然可以访问）。

# python - Mac OSX：切换到 Python 2.7.3

> ID：10445666
> 
> 赞同：6
> 
> 时间：2012-05-04T08:52:27.807
> 
> 标签：python, macos, version, python-2.7, command-line-interface

我已经安装了[Mac OSX Python 2.7.3](http://www.python.org/download/releases/2.7.3/)，并尝试切换到新版本：

```
$ python2.7 -V
Python 2.7.3         # It was installed
$ python -V
Python 2.6.1         # Default is 2.6
$ export VERSIONER_PYTHON_VERSION=2.5
$ python -V
Python 2.5.4         # I can switch to 2.5
$ export VERSIONER_PYTHON_VERSION=2.6
$ python -V
Python 2.6.1         # And 2.6 
```

但：

```
$ export VERSIONER_PYTHON_VERSION=2.7
$ python -V
python: VERSIONER_PYTHON_VERSION environment variable error (ignored)
Python 2.6.1 
```

无法切换到2.7！这是为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T10:07:18.613

python.org 安装会将 python 可执行文件放在 /usr/local/bin 中。苹果的 python 在 /usr/bin

要调用 python.org python，您可以使用其完整路径 /usr/local/bin/python 或更改路径以将 /usr/local/bin 放在 /usr/bin 之前。您仍然可以使用完整路径 /usr/bin/python 调用 Apple 的 python

一些python 安装，例如Macports 提供了一个工具，它提供了各种python 安装的符号链接，并允许您在它们之间切换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T04:24:16.320

我不认为我们可以在 Mac OS X 上切换 python 版本而不求助于`MacPorts`或`ActivePython`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T09:00:12.880

我认为这是因为 VERSIONER_PYTHON_VERSION 特定于苹果构建的 python 包。

# symfony - 覆盖 AdmingeneratorGeneratorBundle 的一个字段

> ID：10445669
> 
> 赞同：0
> 
> 时间：2012-05-04T08:52:29.560
> 
> 标签：symfony, overwrite, admin-generator

我正在尝试覆盖[AdmingeneratorGeneratorBundle](https://github.com/cedriclombardot/AdmingeneratorGeneratorBundle)的一个字段，并希望将链接附加到某个字段。[在文档](http://symfony2admingenerator.org/documentation/form.html#overwrite-the-rendering-of-a-field)之后效果很好：

```
{% extends_admingenerated "MyMainBundle:PageEdit:index.html.twig" %}
{% block form_status %}
    {{  parent() }}
    <a href="{{ path("_admin_preview", {'id': 8, '_format': 'pdf'}) }}">Preview</a>
{% endblock %} 
```

我现在需要做的是获取我的页面的真实 id 而不是静态 8，但我无法弄清楚在 twig 模板中调用的对象是什么。有任何想法吗？

**更新：** 在我的情况下，因为我只需要我的页面的 ID，我可以使用 app.request.attributes.get('pk') 在树枝中获取它。如何让其他价值观变得艰难会很有趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:30:33.927

只需使用

```
{% extends_admingenerated "MyMainBundle:PageEdit:index.html.twig" %}

{% block form_status %}
   {{  parent() }}
   <a href="{{ path("_admin_preview", {'id': Movie.Id, '_format': 'pdf'}) }}">Preview</a>
{% endblock %} 
```

塞德里克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:23:05.033

[文档](http://symfony2admingenerator.org/documentation/list.html#overwrite-the-rendering-of-a-field)已更新。

这就是它的工作原理：

```
{% extends_admingenerated "NamespaceYourBundle:List:index.html.twig" %}
{% block list_td_column_title %}
    <span style="font-weight:bold">{{ Movie.title }}</span>
{% endblock %} 
```

# javascript - IE8中的javascript怪异，document.write问题

> ID：10445671
> 
> 赞同：0
> 
> 时间：2012-05-04T08:52:36.123
> 
> 标签：javascript, onclick, document.write

知道为什么以这种方式放置 google plus 代码在 IE8 或我猜的任何其他版本中不起作用吗？不过在Firefox中工作得很好。

现场演示：http: [//jsfiddle.net/9zqsZ/](http://jsfiddle.net/9zqsZ/)

```
<script>

var socialString = '<g:plusone size="tall"></g:plusone>';
document.write(socialString);

   //google plus share button
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();

</script> 
```

我只是想把它放在外部文件中。奇怪的是它不能与 document.write 一起使用，并且如果直接放在 html 中就可以使用。在这种情况下如何实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:08:29.550

您可以执行以下操作：

```
<script>
    if (navigator.appVersion.indexOf("MSIE") != -1) {
      var socialString = '<g:plusone size="tall"></g:plusone>';
      var newEle = document.createElement(socialString);
      document.body.appendChild(newEle);
    }
    else {
       var socialString = '<g:plusone size="tall"></g:plusone>';
       document.write(socialString);
    }

   //google plus share button
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script> 
```

# jquery - jquery offset() 固定定位元素的奇怪定位

> ID：10445672
> 
> 赞同：0
> 
> 时间：2012-05-04T08:52:44.610
> 
> 标签：jquery, offset

`offset()`当在固定定位元素上调用时，Jquery会做一些奇怪的事情。

位置元素的第一次调用`myFixedElement.offset(position)`相对于窗口，所有接下来的调用将它相对于文档定位。

你可以试试[演示](http://jsfiddle.net/w9WqJ/2/)。只需滚动到底部并单击“Hell yes”。注意“Hell no”消失了。再次单击。“Hell no”将再次出现。

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T08:59:05.983

这解决了它：http: [//jsfiddle.net/w9WqJ/3/](http://jsfiddle.net/w9WqJ/3/)

如果没有初始值，则不知何故偏移不起作用。

# android - 如何使用 Layout 显示从 XML 获取的结果

> ID：10445674
> 
> 赞同：0
> 
> 时间：2012-05-04T08:52:46.007
> 
> 标签：android, listview

我是 Android 的新人。我尝试开发一个列表，可以在同一行显示歌曲名称和作者。源数据来自在线 XML 文件

以下是我尝试在我的程序中使用的代码。但是，我只能在列表中显示作者姓名。我想问我应该如何修改代码，以便我可以在列表的同一行显示歌曲名称和作者？

我尝试阅读的在线 XML 文件的格式

```
<recipes>
<song>
    <id>1</id>
    <title>Sing A Song</title>
    <songs_author>ACM</songs_author>
</song>
<song>
    <id>2</id>
    <title>DO Re Me</title>
    <songs_author>BBC/songs_author>
</song>
</recepies> 
```

src/com.mobile/SongsActivity

```
package com.mobile;

import java.io.IOException;
import java.net.URL;
import java.util.ArrayList;

import org.xmlpull.v1.XmlPullParser;
import org.xmlpull.v1.XmlPullParserException;
import org.xmlpull.v1.XmlPullParserFactory;

import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.Window;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.widget.SimpleAdapter;

public class SongsActivity extends Activity implements OnItemClickListener {

    protected static final int DIALOG_KEY = 0;
    ListView mListView;
    Button mClear;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
        this.setProgressBarIndeterminateVisibility(false);

        setContentView(R.layout.Songs);

        mListView = (ListView) findViewById(R.id.listView1);
        mListView.setTextFilterEnabled(true);
        mListView.setOnItemClickListener(this);

        LoadRecipesTask1 mLoadRecipesTask = new LoadRecipesTask1();
        mLoadRecipesTask.execute("http://123.com/mobile/Songs_list.php");          

        mClear = (Button) findViewById(R.id.button3);
        mClear.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                mListView.setAdapter(null);
            }
        });

    }

    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        Datum datum = (Datum) mListView.getItemAtPosition(position);
        Uri uri = Uri.parse("http://123.com/mobile/Songs.php?Songsid=" + datum.getId());
        Intent intent = new Intent(Intent.ACTION_VIEW, uri);
        this.startActivity(intent);
    }

    public static ArrayList<Datum> parse(String url) throws IOException, XmlPullParserException {
        final ArrayList<Datum> results = new ArrayList<Datum>();

        URL input = new URL(url);

        XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
        factory.setNamespaceAware(true);
        XmlPullParser xpp = factory.newPullParser();

        xpp.setInput(input.openStream(), null);
        int eventType = xpp.getEventType();
        String currentTag = null;
        Integer id = null;
        String title = null;
        String Songs_author = null;
        while (eventType != XmlPullParser.END_DOCUMENT) {
            if (eventType == XmlPullParser.START_TAG) {
                currentTag = xpp.getName();
            } else if (eventType == XmlPullParser.TEXT) {
                if ("id".equals(currentTag)) {
                    id = Integer.valueOf(xpp.getText());
                }
                if ("title".equals(currentTag)) {
                    title = xpp.getText();
                }
                if ("Songs_author".equals(currentTag)) {
                    Songs_author = xpp.getText();
                }
            } else if (eventType == XmlPullParser.END_TAG) {
                if ("song".equals(xpp.getName())) {
                    results.add(new Datum(id, title, Songs_author));
                }
            }
            eventType = xpp.next();
        }
        return results;
    }

    protected class LoadRecipesTask1 extends AsyncTask<String, Void, ArrayList<Datum>> {

        @Override
        protected void onPreExecute() {
            SongsActivity.this.setProgressBarIndeterminateVisibility(true);
        }

        @Override
        protected ArrayList<Datum> doInBackground(String... urls) {
            ArrayList<Datum> datumList = new ArrayList<Datum>();
            try {
                datumList = parse(urls[0]);
            } catch (IOException e) {
                e.printStackTrace();
            } catch (XmlPullParserException e) {
                e.printStackTrace();
            }
            return datumList;
        }

        @Override
        protected void onPostExecute(ArrayList<Datum> result) {

            mListView.setAdapter(new ArrayAdapter<Datum>(SongsActivity.this, R.layout.list_item, result));
            //SongsActivity.this.setProgressBarIndeterminateVisibility(false);
        }
    }

} 
```

src/com.mobile/Datum

```
package com.mobile;

public class Datum {

    int id;
    String title;
    String songs_author;

    public Datum(int id, String title, String songs_author) {
        this.id = id;
        this.title = title;
        this.songs_author= songs_author;
    }

    public String toString() {
        return songs_author;
    }

    public int getId() {
        return id;
    }

    public String getTitle() {
        return title;
    }

    public String get Songs_author() {
        return Songs_author;
    }

} 
```

res/layout/songs.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical" android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:orientation="horizontal" android:layout_width="fill_parent"
                android:layout_height="wrap_content">
                <Button android:text="Refresh 1" android:id="@+id/button1"
                        android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_weight="1"></Button>
                <Button android:text="Clear" android:id="@+id/button3"
                        android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_weight="1"></Button>
        </LinearLayout>
        <ListView android:id="@+id/listView1" android:layout_height="fill_parent"
                android:layout_width="fill_parent"></ListView>
</LinearLayout> 
```

资源/布局/list_item.xml

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp"
    android:textSize="16sp" >
</TextView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:26:27.730

网络上充满了使用自定义适配器的 ListView 的教程和示例。您将不得不花一些时间尝试学习它们。没有捷径。您可以[在此处](http://www.vogella.com/articles/AndroidListView/article.html)选择其中一本书，也可以从 Amazon 中选择其中一本书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T09:17:25.833

只需使用数组适配器制作自定义列表视图。

参考这个例子..

[http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/](http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/)

# android - 如何以编程方式将数据存储在android设备的内部存储器中

> ID：10445675
> 
> 赞同：2
> 
> 时间：2012-05-04T08:52:46.957
> 
> 标签：android, data-storage

我有一个应用程序，我应该存储在edittext中输入的数据。那么我用什么将数据存储在设备的内部存储器中？请尽快帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T08:57:44.127

也许这可以帮助你，

[使用内部存储](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)

# ios - 如何在多视图应用程序中使用 UITableView

> ID：10445676
> 
> 赞同：0
> 
> 时间：2012-05-04T08:52:49.710
> 
> 标签：ios, model-view-controller, uitableview, multiview

我有一些其他视图控制器触发另一个视图控制器，其中 UItableView 作为子视图我的代码遵循两个文件 .h ， .m

当我使用带有此代码的基于单视图的应用程序时，它工作正常但是当我使用两个视图时，例如第一个是 loggingscreen n 调用第二个 nib 文件使用这个

```
Viewcomment *b=[[SimpleTableViewController alloc] initWithNibName:@"SimpleTableViewController" bundle:nil];
[self presentModalViewController:b animated:YES]; 
```

或者

```
self.window= [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.
self.viewController = [[Viewcomment alloc] initWithNibName:@"Viewcomment" bundle:nil];
self.window.rootViewController = self.viewController;
[self.window makeKeyAndVisible]; 
```

它显示“SIGABRT”！我哪里错了？

.h 文件：

```
#import <UIKit/UIKit.h>

@interface SimpleTableViewController : UIViewController <UITableViewDelegate,UITableViewDataSource>{
    NSArray *listData;
}

@property(nonatomic, retain) NSArray *listData; 

@end 
```

.m 文件

```
#import "SimpleTableViewController.h"

@implementation SimpleTableViewController
@synthesize listData;

- (void)viewDidLoad {
    NSArray *array = [[NSArray alloc] initWithObjects:@"iPhone", @"iPod", @"iPad",nil];
    self.listData = array;
        [super viewDidLoad];

}

 - (void)didReceiveMemoryWarning {
         [super didReceiveMemoryWarning];

}

- (void)viewDidUnload {

}

- (void)dealloc {

}

#pragma mark - 
#pragma mark Table View Data Source Methods

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [self.listData count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *SimpleTableIdentifier = @"SimpleTableIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier: SimpleTableIdentifier];
    if (cell == nil) { cell =  [[UITableViewCell alloc]
                                initWithStyle:UITableViewCellStyleDefault reuseIdentifier:SimpleTableIdentifier]   ;
    }
    NSUInteger row = [indexPath row]; cell.textLabel.text = [listData objectAtIndex:row]; return cell;

}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T09:05:37.477

你的失踪：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView 
```

从你的 UITableViewDataSource 这将导致崩溃。

如果这不起作用，请确保视图连接到视图控制器的 nib 文件中，并确保您的 UITableView 正确连接到数据源。

# javascript - 用于复选框列表控件的选中和取消选中检测的 Javascript

> ID：10445677
> 
> 赞同：-2
> 
> 时间：2012-05-04T08:52:50.247
> 
> 标签：javascript, asp.net

我想为复选框列表 asp.net 控件编写 javascript 逻辑，如果复选框选择中的某些条件为真，则全选，否则取消全选。如何弄清楚这个检查取消选中并且使用javascript有价值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T09:02:46.150

`.checked`将返回您是否选择，而不是您可以选择全部

例如，我举了一个示例

```
var idckbIsSolicitor = '<%= ckbIsSolicitor.ClientID %>';
var ckbIsSolicitor = document.getElementById(idckbIsSolicitor);

 if (ckbIsSolicitor.checked)
{
//select all
}
else
{
//deselect all
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T08:59:33.603

```
<div><input type="checkbox" class="checkall"> Check all</div>
    <div><input type="checkbox" class="check"> Checkbox</div>
    <div><input type="checkbox" class="check"> Checkbox</div>
    <div><input type="checkbox" class="check"> Checkbox</div>

    <select size="5" multiple="multiple" class="listbox">
      <option value="test1">test1</option>
      <option value="test1">test1</option>
      <option value="test1">test1</option>
      <option value="test1">test1</option>
      <option value="test1">test1</option>
    </select>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript"></script>
<script>
$(function () { // this line makes sure this code runs on page load
    $('.checkall').click(function () {
        $('.check').attr('checked', this.checked); //if you want to select/deselect checkboxes use this
        $('.listbox option').attr('selected', this.checked);//if you want to select/deselect options in list use this
    });
});
</script> 
```

**[http://jsfiddle.net/fMk2e/](http://jsfiddle.net/fMk2e/)**

# javascript - 重置缩放不遵守轴极端

> ID：10445679
> 
> 赞同：1
> 
> 时间：2012-05-04T08:52:59.903
> 
> 标签：javascript, highcharts

我试图让“Rest Zoom”按钮不要一直返回
并显示整个图表，而是要遵守轴的极端。
示例[http://jsfiddle.net/rDts7/](http://jsfiddle.net/rDts7/)
那么当你在这里进一步放大时，“重置缩放”
按钮只会回到极端，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T13:05:14.600

您可以使用以下方法将重置缩放完全推离图表：

```
resetZoomButton: {position: {x: 1000, y: 1000}} 
```

然后使用 getExtremes 和/或 setExtremes 方法的组合来产生您想要的结果。您可以在此处找到这两种方法的定义：[Axis Object Methods](http://www.highcharts.com/ref/#axis-object)

# java - 如何为 TreeMap 对象组织 Collections.binarySearch Java 模拟？

> ID：10445684
> 
> 赞同：0
> 
> 时间：2012-05-04T08:53:17.047
> 
> 标签：java, binary-search, treemap

我必须使用 1.42 Java。我使用`TreeMap`是为了使 , 具有 O(log n) 复杂`put()`度`remove()`。让我们假设键是`int`单词的偏移量，值是它的长度。我需要“不太严格”的搜索——比如`Collections.binarySearch`in——如果没有找到确切的键而不是简单的答案 a-la“未找到”，它可以返回特殊的负值（可以从中计算插入点）。

让我们假装我们有一个文本编辑器。这里“|” 表示光标位置。带有 ArrayList 的 Collections.binarySearch 返回`-(insertion point) - 1`以下示例。

单词 1 单词 | 单词 2 单词 3

# ruby-on-rails - 使用 Dragonfly 更改 S3 中文件的权限

> ID：10445685
> 
> 赞同：0
> 
> 时间：2012-05-04T08:53:30.573
> 
> 标签：ruby-on-rails, amazon-s3, fog, dragonfly-gem

在我的 Rails 项目中，我使用蜻蜓上传文件并将它们存储在 S3 中。

最初我为上传的文件传递 {'x-amz-acl' => 'private'} 并使用具有到期日期的私有 URL。

文件上传到 S3 后，有没有一种简单的方法可以将其更改为“公共读取”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T09:31:19.090

我用`aws/s3`宝石。可以通过以下方式处理权限：

```
S3Object.store(
    'kiss.jpg',
    data,
    'marcel',
    :access => :public_read
  ) 
```

在您的情况下，您将使用`S3Object.find`然后更改策略。gem 记录[在这里](http://amazon.rubyforge.org/)。

# version-control - 如何以易于部署的方式实现自定义规则以在 hg 或 git 上推送更改？

> ID：10445686
> 
> 赞同：1
> 
> 时间：2012-05-04T08:53:34.740
> 
> 标签：version-control, githooks, mercurial-hook

用例：当主干标记为红色时，您想阻止人们推到主干 - 在这种情况下，您想在接受之前要求他们确认。

问题是本地`.hg/hgrc`挂钩是只有您才能获得它们，当您想为所有开发人员实现类似的东西时，这不是一种可接受的方法。

怎么可能以适合所有人的方式实施这样的事情。

# php - 在 CakePHP 中更改命名参数的路由

> ID：10445688
> 
> 赞同：0
> 
> 时间：2012-05-04T08:53:39.760
> 
> 标签：php, cakephp

我有以下两条路线，它们使 url`/posts/recent`显示我的帖子控制器的 index 方法的最近过滤器的第 1 页，并且还允许分页，例如：`/posts/recent/page:2`通过在下一条路线上使用 *。如您所见，我在第一条路线上调用了第 1 页，这样我就不会得到第 1 页的重复网址。

```
Router::connect('/posts/recent', array('controller'=>'posts','action'=>'index','filter'=>'recent', 'page' => 1), array('pass'=>array('filter')));

Router::connect('/posts/recent/*', array(
  'controller' => 'posts', 'action' => 'index', 'filter'=>'recent'), array(
    'named' =>array('page' => '[\d]+'),
     'pass'=>array('filter')
  )
); 
```

但是我想这样做，以便命名参数这样做：

`/posts/recent/page/2`但我该怎么做呢？

我查看了文档，但似乎没有看到任何关于这样做的信息......

是否可以关闭命名参数以支持查询字符串？

如果重要的话，我正在使用 CakePHP 2.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:50:41.623

也许使用 Router::connectNamed()？

[http://book.cakephp.org/2.0/en/development/routing.html](http://book.cakephp.org/2.0/en/development/routing.html)

# asp.net-mvc-3 - MVC 3 Webgrid 使整行可点击

> ID：10445690
> 
> 赞同：6
> 
> 时间：2012-05-04T08:53:48.560
> 
> 标签：asp.net-mvc-3, razor, webgrid

我在 MVC 3 的 razor 视图中使用 webgrid。下面是我的 webGrid 的外观，我想让整个行可点击，并且在点击时也将值传递给 javascript 方法。

我能够在所有列的文本上调用我的 javascript 方法。我希望单击整行上的任何位置也能发生同样的情况。

请指导我。谢谢

```
 @grid.GetHtml(

            columns: grid.Columns(

            grid.Column("CompanyName", format: @<text><a href="javascript:SubmitValues('@item.Col1','@item.Col2','@item.Col3');">@item.CompanyName</a></text>, header: "ABC"),

            grid.Column("CompanyAddress", format: @<text><a href="javascript:SubmitValues('@item.Col1','@item.Col2','@item.Col3');">@item.CompanyName</a></text>, header: "DEF"),

            ))      

         } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T13:52:18.930

您必须使用 JQuery 来添加行点击功能

在您的 webgrid 中添加 htmlAttributes: new { id="MainTable" }。

```
<script type="text/javascript">
   $(function () {
        var tr = $('#MainTable').find('tr');
        tr.bind('click', function (event) {
            var values = '';
            var tds = $(this).find('td');

            $.each(tds, function (index, item) {
                values = values + 'td' + (index + 1) + ':' + item.innerHTML + '<br/>';
            });
            alert(values);

        });
    }); 

</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-29T07:53:10.767

我已经在我的项目中通过`style: "click_able"`在特定列上添加一个类来完成此操作，例如。

```
grid.Column("CompanyName", style: "click_able", format: @<text><a href="javascript:SubmitValues('@item.Col1','@item.Col2','@item.Col3');">@item.CompanyName</a></text>, header: "ABC"), 
```

然后添加点击功能。

```
<script type="text/javascript">
$(".click_able").click(function () {
    // Do something 
}); 
```

在我的情况下它工作正常。

# zend-framework - Zend 表单：自定义验证器 isvalid()

> ID：10445695
> 
> 赞同：0
> 
> 时间：2012-05-04T08:54:19.120
> 
> 标签：zend-framework, zend-form, zend-validate

我必须在下面创建我的自定义`FORM:isvalid()`函数`form`，因为我必须检查是否至少填写了这两个字段之一：

```
class Products_AddForm extends Zend_Form {

public function isValid($data)
{

    // Check special post data
    $pzn_val = $data['PZN'];
    $mar_val = $data['PZO'];

    if(empty($pzn_val) && empty($mar_val)) {
        $this->getSubForm('sub1')->getElement('PZN')->setErrors(array('PZN or PZO needed'));
        $this->getSubForm('sub2')->getElement('PZO')->setErrors(array('PZN or PZO needed'));
    }

    // Standard validation
    return parent::isValid($data);

} 
```

`PZN`和的错误`PZO`只会在找到另一个错误（其他字段）时触发。我怎样才能得到`form error`？场`PZN`和`PZO`定义为`not required`。

TIA 马特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T08:59:19.087

尝试：

```
public function isValid($data) {
    $isValid = parent::isValid($data); 
    // Check special post data
    $pzn_val = $data['PZN'];
    $mar_val = $data['PZO'];

    if(empty($pzn_val) && empty($mar_val)) {
        $this->getSubForm('sub1')->getElement('PZN')->setErrors(array('PZN or PZO needed'));
        $this->getSubForm('sub2')->getElement('PZO')->setErrors(array('PZN or PZO needed'));
        $isValid = false;
    }    

    return $isValid;
} 
```

# php - 无法使用带 php 的 simplexml 将 CDATA 添加到我的 XML 字符串中

> ID：10445696
> 
> 赞同：0
> 
> 时间：2012-05-04T08:54:25.283
> 
> 标签：php, xml, cdata

我只是想将 cdata 添加到 xml 节点 - 描述。我的xml函数如下。我尝试在我的函数中使用[php.net上的以下函数](http://php.net/manual/en/domdocument.createcdatasection.php)

```
<?php
function updateXMLFile($itemName, $description, $pageName, $imageFileName)
{
  $imageSrc         = "<img src='http://nicolaelvin.com/authoring/phpThumb/phpThumb.php?src=../images/" . $imageFileName . "&w=100'/>";
  $id               = strtolower($id = str_replace(' ', '_', $itemName));
  $directLinkToItem = 'http://nicolaelvin.com/authoring/' . $pageName . '.php#' . $id;

  $xml  = simplexml_load_file('nicolaElvinsPortfolio.xml');
  $item = $xml->channel->addChild('item');
  $item->addChild('title', $itemName);

  $item->addChild('pubDate', date('r'));
  $item->addChild('link', $directLinkToItem);
  $item->addChild('description');
  $cdata->description->createCDATASection('testyfhgjhsgsdjahgs');
  $item->appendChild($cdata);

  ///Format XML to save indented tree rather than one line
  $dom                     = new DOMDocument('1.0');
  $dom->preserveWhiteSpace = false;
  $dom->formatOutput       = true;
  $dom->loadXML($xml->asXML());

  //Save XML to file - remove this and following line if save not desired
  $dom->save('nicolaElvinsPortfolio.xml');

}

//function from php.net
function sxml_cdata($path, $string)
{
  $dom   = dom_import_simplexml($path);
  $cdata = $dom->ownerDocument->createCDATASection($string);
  $dom->appendChild($cdata);
}
?> 
```

![当前的xml文档树，只想到一个cdata里面的description标签](../Images/1262d1b03e4566162966b317882b8942.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T10:43:40.223

试穿这个尺寸。如果您对此有任何问题/对此有任何疑问，请告诉我（已**修复**）。

```
function updateXMLFile($itemName, $description, $pageName, $imageFileName) {

  // Path to file that will be used
  $filePath = 'nicolaElvinsPortfolio.xml';

  // Create links - don't forget to escape values appropriately with urlencode(), htmlspecialchars() etc
  $imageSrc = "<img src='".htmlspecialchars('http://nicolaelvin.com/authoring/phpThumb/phpThumb.php?src=../images/'.urlencode($imageFileName).'&w=100')."'/>";
  $directLinkToItem = 'http://nicolaelvin.com/authoring/'.urlencode($pageName).'.php#'.urlencode(strtolower(str_replace(' ', '_', $itemName)));

  // Create the CDATA value - whatever you want this to look like
  $cdata = "$description: $imageSrc";

  // Create a DOMDocument
  $dom = new DOMDocument('1.0');
  $dom->preserveWhiteSpace = false;
  $dom->formatOutput = true;

  // Load data from file into DOMDocument
  if (!$dom->load($filePath)) throw new Exception("Unable to load data source file '$filePath'");

  // Create the new <item> and add it to the document
  $item = $dom->getElementsByTagName('channel')->item(0)->appendChild(new DOMElement('item'));

  // Add the <item>'s sub elements
  $item->appendChild(new DOMElement('title', $itemName));
  $item->appendChild(new DOMElement('pubDate', date('r')));
  $item->appendChild(new DOMElement('link', $directLinkToItem));

  // Add the CDATA
  $item->appendChild(new DOMElement('description'))->appendChild(new DOMCdataSection($cdata));

  // Now save back to file
  $dom->save($filePath);

} 
```

注意，如果失败，现在会抛出异常`DOMDocument::load()`- 不要忘记`catch`它！

# java - Android - Eclipse：令牌“（”上的语法错误，此令牌后应有表达式

> ID：10445699
> 
> 赞同：0
> 
> 时间：2012-05-04T08:54:31.287
> 
> 标签：java, android, arrays, asynchronous, download

我还在学习，我试图弄清楚这一点，我想我会问专家。有任何想法吗？

我在这一行得到错误： final Button btn = (Button) findViewById ([btnIds]);

```
public class choiceTest extends Activity{

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.atcchoice);
}
final OnClickListener listener = new OnClickListener() { 
     public void onClick(View v){ 
         switch(v.getId()){  
         case R.id.sec1:  
            break; 
         case R.id.sec2: 
            break; 
         case R.id.sec3: 
            break; 
         } 
     } 
};
final int[] btnIds = new int[]{R.id.sec1, R.id.sec2, R.id.sec3};{ 
for(int i = 0; i < btnIds.length; i++) { 
    final Button btn = (Button) findViewById ([btnIds]); 
    btn.setOnClickListener(listener); 
}

}
} 
```

此外，这是一个下载程序，我正在使用 Async 来下载我的文件。我可以在上面的代码中添加什么来将我的下载器 URL 更改为不同的 URL？否则我会有一个很长的代码...这是下载 URL 代码的方法。

```
private void startDownload() {
    DownloadFile downloadFile = new DownloadFile();
    downloadFile.execute("http://www.website.com/document.pdf");

} 
```

下载它的异步代码：

```
class DownloadFile extends AsyncTask<String, Integer, String> {

URL url = new URL(aurl[0]); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T08:57:40.460

您访问这样的数组：

```
Button btn = (Button) findViewById( btnIds[i] ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T09:03:31.180

你正在传递整个数组。更改：

```
for(int i = 0; i < btnIds.length; i++) { 
    final Button btn = (Button) findViewById ([btnIds]); 
    btn.setOnClickListener(listener); 
} 
```

和

```
for(int i = 0; i < btnIds.length; i++) { 
    final Button btn = (Button) findViewById (btnIds[i]); 
    btn.setOnClickListener(listener); 
} 
```

# computer-science - 启发式和元启发式有什么区别？

> ID：10445700
> 
> 赞同：41
> 
> 时间：2012-05-04T08:54:43.277
> 
> 标签：computer-science, heuristics

在对算法进行了一些研究之后，我发现了两个让我感到困惑的术语。我已经阅读了至少 20 篇论文，但两者都没有明确的定义。我希望有人可以帮助我区分启发式算法和元启发式算法之间的区别。如果可能的话，添加它的来源。

ps：我已经知道这些词的含义，但我不知道它们在计算机科学中的确切区别是什么。

提前致谢

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-05-07T16:15:46.050

您可以将启发式算法视为问题的近似（而非近似）解决方案。近似和近似之间的区别在于，第一个是关于对问题的解决方案进行很好的猜测，但您并不真正知道它有多好。第二个是关于获得一个解决方案，您可以证明它与最佳解决方案有多接近。

因此，启发式方法通常取决于问题，也就是说，您为给定问题定义启发式方法。元启发式是与问题无关的技术，可以应用于广泛的问题。例如，启发式方法是在快速排序中选择一个随机元素进行旋转。元启发式对将要应用的问题一无所知，它可以将函数视为黑匣子。

您可以说启发式利用与问题相关的信息来为特定问题找到“足够好”的解决方案，而元启发式就像设计模式一样，是可以应用于广泛问题的通用算法思想。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-01-20T21:58:12.140

为了给出正确的报价，相对于亚历杭德罗的回答：

> « 元启发式是一个高级别的独立于问题的算法框架，它提供了一套指导方针或策略来开发启发式优化算法 [...] 根据元启发式框架中表达的指导方针，启发式优化算法的特定问题实现也称为元启发式 »（Sörensen，Glover 在[http://scholarpedia.org/article/Metaheuristics](http://scholarpedia.org/article/Metaheuristics)上）

要完全完整。我们应该区分精确算法、近似算法和启发式算法。精确算法找到精确解。近似算法应在可接受的时间内找到近似解，并指出其与假设最优解的差异范围。启发式方法只是在可接受的时间内找到足够好的解决方案。

顺便说一句，由于两三个不同的原因，Alejandro 快速排序的示例似乎并不完全合适。

1.  事实上，启发式和元启发式是优化领域的一部分。因此，他们试图解决的问题是搜索最优，而不是排序。
2.  当您想要解决的问题在计算意义上太复杂时，通常会使用启发式算法——排序问题不是这样。
3.  如果我理解得很好，通过快速排序示例指出的是随机元素。原则上，您可以使用确定性启发式算法——我从未遇到过确定性元启发式算法，但可能有人可以对其进行编码。这可能有点“玩文字游戏”，但是随机元素比（元）启发式更恰当地描述了“随机搜索”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-21T19:38:16.320

详细解释见：

[索伦森，K.（2015 年）。元启发式——暴露的隐喻。运筹学国际交易，22（1），3-18。](https://www.cs.ubc.ca/~hutter/EARG.shtml/stack/2013_Sorensen_MetaheuristicsTheMetaphorExposed.pdf)

> 元启发式是一种高级的独立于问题的算法框架，它提供了一组指导或策略来开发启发式优化算法。该术语还用于指根据此类框架中表达的指南（Sörensen，2015）的启发式优化算法的特定问题实现。

启发式是指导方针，元启发式是使用这些指导的框架。

# java - 使用特定于字段的 FeedbackLabels 时如何避免多余的 Wicket 日志警告？

> ID：10445703
> 
> 赞同：3
> 
> 时间：2012-05-04T08:54:50.633
> 
> 标签：java, validation, wicket, feedbackpanel

我正在使用“FeedbackLabels”来显示特定于组件的验证消息，基于此博客文章中的想法和代码：[使用 Wicket 进行用户友好的表单验证](http://stuq.nl/weblog/2008-09-03/user-friendly-form-validation-with-wicket)。

问题是，使用此类 FeedbackLabels 验证消息的页面会在日志中充斥着多余的警告：

```
2012-05-04 10:43:32,824 ["http-bio-8080"-exec-6] WARN  org.apache.wicket.protocol.http.WebSession - Component-targetted feedback message was left unrendered. This could be because you are missing a FeedbackPanel on the page.  Message: [FeedbackMessage message = "Tilille on pakollinen tieto", reporter = toAccount, level = ERROR]
2012-05-04 10:43:32,824 ["http-bio-8080"-exec-6] WARN  org.apache.wicket.protocol.http.WebSession - Component-targetted feedback message was left unrendered. This could be because you are missing a FeedbackPanel on the page.  Message: [FeedbackMessage message = "Tililtä on pakollinen tieto", reporter = fromAccount, level = ERROR]
2012-05-04 10:43:32,824 ["http-bio-8080"-exec-6] WARN  org.apache.wicket.protocol.http.WebSession - Component-targetted feedback message was left unrendered. This could be because you are missing a FeedbackPanel on the page.  Message: [FeedbackMessage message = "Viitenro on pakollinen tieto", reporter = reference, level = ERROR]
2012-05-04 10:43:35,039 ["http-bio-8080"-exec-6] WARN  org.apache.wicket.protocol.http.WebSession - Component-targetted feedback message was left unrendered. This could be because you are missing a FeedbackPanel on the page.  Message: [FeedbackMessage message = "Tilille on pakollinen tieto", reporter = toAccount, level = ERROR]
[...] 
```

检票口声称：

> 未呈现针对组件的反馈消息。这可能是因为您在页面上缺少反馈面板。

问题是，正如您在屏幕截图中看到的那样，这些消息**已**呈现（在每个字段随附的 FeedbackLabels 中），并且我**在**页面上也有一个 FeedbackPanel（但它使用 ComponentFeedbackMessageFilter 过滤以组件为目标的消息，以便它们没有显示两次）。

![在此处输入图像描述](../Images/898fe5603f74abe47020b6ccef2cdf50.png)

无论如何，这些日志消息显然没有用。**我怎样才能让 Wicket 闭嘴**？（不诉诸暴力方法，例如将日志记录级别更改为 FATAL。）是否应该在 Daan 的 FeedbackLabel 实现中修复某些内容（见下文）？

* * *

附录：基本上FeedbackLabel（扩展标签）检查相关组件是否有反馈消息，如果有，显示它。如果您不介意从[文章](http://stuq.nl/weblog/2008-09-03/user-friendly-form-validation-with-wicket)中加载代码，这里是相关部分：

```
// (Author of this code is Daan, StuQ.nl
// it's licenced under Apache 2.0 license.)
@Override
protected void onBeforeRender() {
    super.onBeforeRender();

    if(component.getFeedbackMessage()!=null) {
        if(this.text!=null) {
            setDefaultModel(this.text);
        } else {
            setDefaultModel(new Model(component.getFeedbackMessage().getMessage()));
        }

        this.add(new AttributeModifier("class", true, new Model("feedbackLabel " + component.getFeedbackMessage().getLevelAsString())));
    } else {
        setDefaultModel(new Model(""));
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T10:02:05.823

FeedbackMessage 有一个 markRendered() 函数。我会为添加到标签的每条消息添加一个调用。请参阅反馈面板的代码。

# java - 正则表达式和 RSS 提要

> ID：10445709
> 
> 赞同：0
> 
> 时间：2012-05-04T08:55:05.537
> 
> 标签：java, android, regex

我写了一个简单的 Rss Feed 阅读器，现在我遇到了这个问题，在项目描述中我有文本，但是这个文本有这个字符`<br/>` 例如

> “我的狗`<br/>`是黑色的，他`<br/>`留在桌子上”

现在我不会从这个字符中清除字符串，我写这个方法

```
private static String IsMatch(String s, String pattern) {
    try {
        Pattern patt = Pattern.compile(pattern);
        Matcher matcher = patt.matcher(s);
        return matcher.group();
    } catch (RuntimeException e) {
      return "Error";
    } } 
```

和

```
String regex ="[<br/>]";

theString2=IsMatch(theString,regex);
 AppLog.logString(theString2); 
```

但是这个方法总是返回错误。谁能告诉我有什么问题？

最好的问候安东尼奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:08:06.910

问题是你永远不会在你的匹配器上调用 find() 。您必须在调用 group() 之前调用 find()（并测试 find() 返回 true）。

我不确定你的方法`IsMatch`应该做什么。事实上，它要么返回匹配项（即`"<br/>"`，假设你之前调用`find()`过）要么返回`"Error"`。

另外，不要将括号`<br/>`放在您的正则表达式中，它们不是必需的。

为了您的目的，我真的会考虑使用替换而不是正则表达式：

```
String s = "my dog <br/> is black and he <br/> stay on table ".replace("<br/>",""); 
```

作为建议，不要在不记录异常的情况下捕获异常。它们提供了不应隐藏的有价值的信息。当出现问题时，它会使调试变得非常困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T09:11:49.500

```
String regex ="(\<br\/\>)"; 
```

我认为您需要注意有关正则表达式的语法细节：1.转义“<”之类的特殊字符

不同语言的正则表达式有不同的规范

# bash - .bash_functions：调用另一个函数

> ID：10445717
> 
> 赞同：1
> 
> 时间：2012-05-04T08:55:32.697
> 
> 标签：bash

我在我的`.bash_functions`（来源`.bashrc`）中定义了以下两个函数：

```
up() {
  if (($# == 0)); then
    cd ..
  else
    for basename; do
      local result=$(_foo)
      echo $result
      cd $result
    done
  fi
}

_foo() {
  echo ${PWD%/$1/*}/$basename
} 
```

虽然我可以执行`_foo`，但当我执行时`up`，up 似乎不知道`_foo`。我在这里做错了什么，还是这不可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:15:38.670

它确实“知道” `_foo`，但您没有将参数传递给`_foo`，所以这可能会导致混乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T11:20:05.887

Bash 脚本按顺序执行。在您的情况下，`_foo()`可以在之前定义，`up()`并且一切都应该正常工作。

# google-bigquery - 加载多个文件

> ID：10445718
> 
> 赞同：4
> 
> 时间：2012-05-04T08:55:37.410
> 
> 标签：google-bigquery

以下按预期工作。

./bq --nosync load -F '^' --max_bad_record=30000 myvserv.xa one.txt ip:string,cb:string,country:string,telco_name:string, ...

1) 但是如何在同一命令中发送两个 csv 文件 one.txt 和 two.txt？

2）我不能 cat 文件然后管道 | 到 bg 命令？

3) 不同步是什么意思？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T16:46:12.033

1.  不幸的是，您不能（还）使用相同的命令上传两个文件；你必须运行 bq 两次。（不过，如果您从 Google Cloud Storage 加载数据，则可以指定多个 gs:// 网址，以逗号分隔。）

2.  不，bq（还）不支持从标准输入读取上传数据，尽管这对于未来的版本来说是个好主意。

3.  如果您只是运行“bq load”，bq 将在服务器上创建一个加载作业，然后轮询完成。如果您指定 --nosync 标志，它只会创建加载作业，然后退出而不进行轮询。（如果需要，您可以使用“bq wait”单独轮询完成。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T16:47:32.173

对于 1)，正如 Jeremy 所提到的，您不能在同一命令中一次导入两个本地文件。但是，您可以对同一个表启动两个并行加载 - 加载是原子的，并且默认情况下追加，因此这应该可以满足您的要求，并且可能比在单个作业中导入两者更快，因为上传将并行发生。

# haml - 如何练习 HAML 和 SASS（环境）

> ID：10445719
> 
> 赞同：0
> 
> 时间：2012-05-04T08:55:37.957
> 
> 标签：haml, development-environment, sass

您能否给我建议如何更好地练习 HAML 和 SASS。

我已经为 Windows 下载并安装了所有东西，我可以编译文件并通过命令行使用它。但我仍然希望能够立即编码和浏览它，而不是在命令行中编写任何内容。

我的意思是我应该在我的本地主机上做什么来使用它？我是否可以与任何类型的引擎一起使用，例如 Drupal。还是有更简单的方法？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T11:45:03.873

我最近发现了一个免费的在线 SASS/SCSS-HAML 编辑器，名为 Voyage，由雷志强开发（谢谢！）。对初学者练习非常有用，对每个人都可以快速测试代码片段。

[http://voyage-editor.herokuapp.com/](http://voyage-editor.herokuapp.com/)

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T10:28:38.147

好的，对于 Sass 和 Compass，您始终可以使用 --watch 标志来查看修改后的文件并随时重新编译它们。现在我认为这不考虑没有 --watch 标志的 HAML 或其他语言，如 CoffeeScript 等。目前稳定且易于使用的环境的最佳解决方案是使用外部软件这将为您完成命令行工作。

有几个，我已经尝试了其中的几个——取决于你当前的平台和你想投入多少（从 0 美元到 9 美元）。我不知道很多免费的预处理器经理，所以如果人们想去评论免费的替代品，我会很高兴。

*以我的拙见*，最好的是[LiveReload](http://livereload.com)，因为我已经测试过它是您组织中最宽松的，它编译速度快，在更改时重新加载您的浏览器等。考虑到 Windows，最好在 Mac 上使用它版本仍处于测试阶段，远未完成。但是，如果您使用的是 Mac，对我来说这绝对是正确的选择。

你也可以使用[FireApp](http://fireapp.handlino.com)，它做同样的工作，但它不那么宽容。有些事情你不能用你的 Compass 配置文件，你必须以某种方式命名的文件夹等等。它也是付费的，但它是跨平台的（用 JRuby 编码）。

在生活的免费方面，您目前拥有适用于 Mac 的[CodeKit](http://incident57.com/codekit/)，但它仅在测试期间免费，并且将变为付费。另一方面，它的执行效果真的很值得，它真的会让你的生活更简单。

您可能可以在互联网上查找类似的软件，但您明白了。目前，在避免命令行的同时拥有易于使用的工作环境的最佳方法是通过这些软件。

# flash - DisplayObjects 在弄脏之前不在鼠标事件流中

> ID：10445725
> 
> 赞同：0
> 
> 时间：2012-05-04T08:55:55.330
> 
> 标签：flash, actionscript, actionscript-3

我最近不得不使用#flash #as3 解决一些问题。

我正在使用舞台事件侦听器来确定指针下方的 displayObject。这在 99% 的情况下都可以正常工作，但有时（特别是在将 displayObject 添加到显示列表而不改变其外观时）mouse_move、mouse_over、mouse_up 实际上所有鼠标事件都会像它们一样直接通过某些 displayObject不存在。

1% 似乎只有在 displayObjects 最近被添加到显示列表时才会发生，并且没有变化 - 我的修复（通过修改目标显示对象的 alpha 来弄脏显示对象）有效，表明这不是实现的问题.

我应该补充一点：1）问题在一段时间后消失了——也就是说，displayObjects 又回到了事件流中，2）我在 chrome 中这样做，我还没有在其他地方检查过。

我真的希望有人看到类似的东西？

# python - 如何在 python 2.x 和 3.x 中直接打印到文本文件？

> ID：10445726
> 
> 赞同：17
> 
> 时间：2012-05-04T08:55:56.093
> 
> 标签：python, file, python-3.x, stdout, python-2.x

除了使用`write()`之外，在 Python 2 和 3 中写入文本文件的另一种方法是什么？

```
file = open('filename.txt', 'w')
file.write('some text') 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-04T08:58:19.523

您可以使用`print_function` [*未来的导入*](http://docs.python.org/library/__future__.html)从 python2 中的 python3获取`print()`行为：

```
from __future__ import print_function
with open('filename', 'w') as f:
    print('some text', file=f) 
```

如果您不希望该函数在末尾附加换行符，请将`end=''`关键字参数添加到`print()`调用中。

但是，请考虑使用`f.write('some text')`，因为这更清晰并且不需要`__future__`导入。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-04T08:57:43.393

```
f = open('filename.txt','w')

# For Python 3 use
print('some Text', file=f)

#For Python 2 use
print >>f,'some Text' 
```

# c# - 将项目添加到 C# 中的通用列表中

> ID：10445729
> 
> 赞同：1
> 
> 时间：2012-05-04T08:56:08.153
> 
> 标签：c#

我试图将一个对象插入到一个通用的 BindingList 中。但是，如果我尝试添加特定对象，编译器会说： *“参数类型......不可分配给参数类型”*

```
private void JoinLeaveItem<T>(BindingList<T> collection)
    {

        if (collection.GetType().GetGenericArguments()[0] == typeof(UserInformation))
        {
            var tmp = new UserInformation();
            collection.Add(tmp);
        }
    } 
```

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T08:58:39.803

在强类型列表中，不能有两种不同类型的对象没有共同的祖先。也就是说：在您的情况下，除非您的两个（或更多）类具有共同的基类，否则您将需要不同的集合。

尝试创建重载，就像这样

```
private void JoinLeaveItem(BindingList<UserInformation> collection)
{
    collection.Add(new UserInformation());
}

private void JoinLeaveItem(BindingList<GroupInformation> collection)
{
    collection.Add(new GroupInformation());
} 
```

像这样使用它

```
JoinLeaveItem(userInformationCollection)
JoinLeaveItem(groupInformationCollection) 
```

注意：我已经内联了`tmp`变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T09:16:31.607

根据您在评论中描述的内容，您是否想做这样的事情......

```
private void JoinLeaveItem<T>(BindingList<T> collection)  where T: new()
    { 
            var tmp = new T(); 
            collection.Add(tmp); 
    } 
```

编辑如果您想添加额外的测试以仅限于您指定的项目，您可以在开头添加一个大测试

```
private void JoinLeaveItem<T>(BindingList<T> collection)  where T: new()
    { 
        if (typeof(T) == typeof(UserInformation) || typeof(T) == typeof(GroupInformation) 
            var tmp = new T(); 
            collection.Add(tmp); 
        } 
    } 
```

或者，您可以通过使用接口来制作更通用的解决方案。

定义一个接口

```
public interface ILeaveItem { } 
```

使 UserInformation 和 GroupInformation 继承自它，然后使用

```
private void JoinLeaveItem<T>(BindingList<T> collection)  where T: ILeaveItem, new()
    { 
            var tmp = new T(); 
            collection.Add(tmp); 
    } 
```

# hibernate - 无法使用休眠将对象保存到数据库

> ID：10445732
> 
> 赞同：1
> 
> 时间：2012-05-04T08:56:33.677
> 
> 标签：hibernate, struts2, struts2-s2hibernate

我是 sturts2 和休眠框架的新手。我正在制作测试网络应用程序。我有一个模型类“UserDetails”一个DAO 类一个DAO 和动作类的实现。将对象保存到数据库时，出现以下错误：

UserDetails.class

```
package org.project.model;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name="user_details")
public class UserDetails {

private int userId;
private String userName;

@Id
@GeneratedValue
@Column(name="id")
public int getUserId() {
    return userId;
}

public void setUserId(int userId) {
    this.userId = userId;
}

@Column(name="name")
public String getUserName() {
    return userName;
}

public void setUserName(String userName) {
    this.userName = userName;
}
} 
```

UserDetailsDaoImpl - 实现类

```
 package org.project.model.dao.iml;

import java.util.List;

import org.hibernate.Session;
import org.hibernate.Transaction;
import org.project.model.UserDetails;
import org.project.model.dao.UserDetailsDao;

import com.googlecode.s2hibernate.struts2.plugin.annotations.SessionTarget;
import com.googlecode.s2hibernate.struts2.plugin.annotations.TransactionTarget;

public class UserDetailsDaoImpl implements UserDetailsDao {

    @SessionTarget
    Session session;
    @TransactionTarget
    Transaction transaction;

    @Override
    public void saveUser(UserDetails user) {
        try {
            session.save(user);
        } catch (Exception e) {
            transaction.rollback();
            e.printStackTrace();
        }
    }

    @SuppressWarnings("unchecked")
    @Override
    public List<UserDetails> listUser() {
        List<UserDetails> users = null;
        try {
            users = session.createQuery("from UserDetails").list();
        } catch (Exception e) {
            e.printStackTrace();
        }
        return users;
    }
} 
```

动作类是

```
package org.project.actions;

import java.util.ArrayList;
import java.util.List;

import org.project.model.UserDetails;
import org.project.model.dao.UserDetailsDao;

import com.opensymphony.xwork2.ActionSupport;
import com.opensymphony.xwork2.ModelDriven;

public class UserAction extends ActionSupport implements ModelDriven<UserDetails>{

private static final long serialVersionUID = -2167265047934268752L;

private UserDetails user = new UserDetails();
private UserDetailsDao userDao;
private List<UserDetails> userList = new ArrayList<UserDetails>();

@Override
public UserDetails getModel(){
    return user;
}

public String add() {
    userDao.saveUser( user );
    return SUCCESS;
}

public String list() {
    userList = userDao.listUser();
    return SUCCESS;
}

public String execute(){
    return SUCCESS;
}

/* With all setter and getter methods */ 
```

当我按下保存按钮时，会发生以下错误

```
java.lang.NullPointerException
org.project.actions.UserAction.add(UserAction.java:26)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
java.lang.reflect.Method.invoke(Unknown Source)
com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:440)
com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:279)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
com.googlecode.s2hibernate.struts2.plugin.s2hibernatevalidator.interceptor.HibernateValidatorInterceptor.intercept(HibernateValidatorInterceptor.java:77)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:163)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:122)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:195)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:148)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:93)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:235)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:89)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:128)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
org.apache.struts2.interceptor.ProfilingActivationInterceptor.intercept(ProfilingActivationInterceptor.java:104)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:267)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:126)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:148)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:138)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:128)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:176)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
com.googlecode.s2hibernate.struts2.plugin.interceptors.SessionTransactionInjectorInterceptor.intercept(SessionTransactionInjectorInterceptor.java:157)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:52)
org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:468)
org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(Stru     tsPrepareAndExecuteFilter.java:76) 
```

可能有什么问题？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T09:13:33.560

第 26 行正在做

```
userDao.saveUser( user ); 
```

它抛出一个 NullPointerException。这意味着不应该为空的东西是空的。在这行代码中什么可能是空的？`userDao`当然。

您是否在某处初始化了 userDao？没有。这条线

```
private UserDetailsDao userDao; 
```

相当于

```
private UserDetailsDao userDao = null; 
```

初始化你的`userDao`变量。

# resources - 用 EditPart 连接标记

> ID：10445737
> 
> 赞同：2
> 
> 时间：2012-05-04T08:56:42.690
> 
> 标签：resources, marker, eclipse-plugin, eclipse-gef

我有一个扩展*GraphicalEditorWithFlyoutPalette*的图形编辑器。

可能会出现不同的标记，所以如果有可能将标记与*EditPart*连接起来，那就太好了。

我认为一种可能性是扩展*TableViewer*和相应的单元格类。但也许有更好更简单的方法。

我创建了我的测试标记，如下所示：

```
IResource resource = (IResource) input.getAdapter(IResource.class);

try 
{
    IMarker marker = resource.createMarker(IMarker.PROBLEM);
    marker.setAttribute(IMarker.TEXT, "text");
    marker.setAttribute(IMarker.SEVERITY, IMarker.SEVERITY_ERROR);
    marker.setAttribute(IMarker.MESSAGE, "message");
}
catch (CoreException e) 
{
    e.printStackTrace();
} 
```

**输入**是我的*IEditorInput*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:56:42.533

在我的第一次尝试中，我试图扩展*ExtendedMarkersView*，但它失败了，因为它是一个内部类。
另一种方法是编写视图和所有相应的新内容，但这似乎毫无意义。

所以我找到了一个基于[https://stackoverflow.com/a/10501971/390177](https://stackoverflow.com/a/10501971/390177)的解决方法。
在创建*IMarker*时，我设置了附加属性来链接相应的数据对象。在对象的帮助下，我可以使用*EditPartRegistry*搜索*AbstractGraphicalEditPart*。 之后，可以在*EditPart*上创建一个选择并显示给它。

 **```
@Override
public void selectionChanged(IWorkbenchPart part, ISelection selection) {
    IStructuredSelection s = (IStructuredSelection) selection;

    if (s.getFirstElement() instanceof MarkerItem) {
        MarkerItem marker = (MarkerItem) s.getFirstElement();
        if (marker != null && marker.getMarker() != null) {
            IMarker iMarker = marker.getMarker();
            AbstractGraphicalEditPart editPart = null;

            DataObject object ...
            editPart = (AbstractGraphicalEditPart) getGraphicalViewer().getEditPartRegistry().get(object);

            if (editPart != null) {
                StructuredSelection eSelection = new StructuredSelection(editPart);
                getGraphicalViewer().setSelection(eSelection);
                // once selected if you want to get it so the
                // graphicalviewer scrolls to reveal the part on the
                // screen
                getGraphicalViewer().reveal(editPart);
            }
        }
    } else {
        super.selectionChanged(part, selection);
    }
} 
```**

# android - 如何获取最后安装的应用程序的名称

> ID：10445740
> 
> 赞同：1
> 
> 时间：2012-05-04T08:56:54.843
> 
> 标签：android, android-intent, broadcastreceiver

我写了一个广播接收器来检测这样的应用程序安装事件

```
 <receiver android:name="ApplicationBroadcastService" >
        <intent-filter>
            <action android:name="android.intent.action.PACKAGE_INSTALL" />
            <action android:name="android.intent.action.PACKAGE_ADDED" />
            <data android:scheme="package" />
        </intent-filter>
    </receiver> 
```

现在，我想知道这个最后安装的应用程序的名称，我该怎么做，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T11:01:20.697

（通过 获得）`Uri`中的 将包含已安装应用程序的包名称。然后，您可以使用给定包名称来获取有关应用程序的更多详细信息。`Intent``getData()``PackageManager`

# vba - Excel VBA 防止删除单元格但允许编辑

> ID：10445742
> 
> 赞同：3
> 
> 时间：2012-05-04T08:57:00.573
> 
> 标签：vba, excel

我制作了一个电子表格，用户可以将邮政编码和数量输入到 2 个单元格中，我让其他单元格进行计算并显示结果。

我添加了一些 VBA 以防止任何人删除行和列，但我想防止删除范围内的任何单元格，但也允许用户更改某些单元格，但也防止编辑带有公式的单元格。

在单元格`E4`中，用户可以输入邮政编码。在`E6`中，用户可以输入数量。这些可以编辑但不能删除。`E8:E9`并且`E11:E14`都是包含列表数据的下拉列表（验证）。这些可以使用下拉菜单更改，但不能删除。

`L10:L14`, `L16`, `L23:L27`, `L29`,`L30:L33`都可以对其数据进行编辑但不能删除。

用于此的 VBA 会是什么样子？我想它会使用`Worksheet_Change() event`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T11:06:53.073

这是你正在尝试的吗？用户可以编辑单元格`E4`，`E6`但不能将其留空。我还假设该单元格事先不是空的。

```
Option Explicit

Private Sub Worksheet_Change(ByVal Target As Range)
    On Error GoTo Whoa

    Application.EnableEvents = False

    If Not Intersect(Target, Range("E4")) Is Nothing Then
        If Len(Trim(Range("E4").Value)) = 0 Then Application.Undo
    ElseIf Not Intersect(Target, Range("E6")) Is Nothing Then
        If Len(Trim(Range("E6").Value)) = 0 Then Application.Undo
    End If

LetsContinue:
    Application.EnableEvents = True
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume LetsContinue
End Sub 
```

**跟进**

> 谢谢，这就是我想要做的。其他范围呢？这只是 IF THEN 负载的情况，还是我们可以使用 CASE 并循环遍历？– AdRock 2 分钟前

根据需要从下方添加/删除单元格地址。

```
Option Explicit

Private Sub Worksheet_Change(ByVal Target As Range)
    On Error GoTo Whoa

    Application.EnableEvents = False

    If Not Intersect(Target, Range("E4,E6,E8:E9,E11:E14,L10:L14,L16,L23:L27,L29,L30:L33")) Is Nothing Then
        If Len(Trim(Target.Value)) = 0 Then Application.Undo
    End If

LetsContinue:
    Application.EnableEvents = True
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume LetsContinue
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T09:39:57.383

您部分正确，但 Worksheet_Change() 在更改后触发，因此在删除后触发。我要做的是有一个隐藏的工作表来存储用户输入的值，然后您可以在 Worksheet_Change() 中检查新值是否为空（已删除）。

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If Target.Address = "$E$4" Then
        ' check the previous value on the hidden sheet here, if changed, then save it, if empty, then restore it
    End If
End Sub 
```

# c# - 具有至少一个值的 C# 参数

> ID：10445743
> 
> 赞同：24
> 
> 时间：2012-05-04T08:57:04.040
> 
> 标签：c#, parameters

我怎样才能有一个`params`至少有一个值的参数？

```
public void Foo(params string[] s) { }

public void main()
{
    this.Foo(); // compile error
    this.Foo(new string[0]); // compile error
    this.Foo({ }); // compile error
    this.Foo("foo"); // no error
    this.Foo("foo1", "foo2"); // no error
} 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-04T08:58:10.863

做就是了：

```
public void Foo(string first, params string[] s) { } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-04T09:13:02.440

您不能`params`在编译时指定此类条件。

但是，您可以在运行时检查这一点，如果不满足您指定的条件，则抛出异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-13T13:17:52.073

有一种方法可以在编译时要求至少一个参数，但这真的很hacky。

```
 public class RequireAtLeastOneParam {
    public string Foo(params string[] args) 
      => string.Join(' ', args);

    /// <summary>The purpose of this overload is to require at least one argument
    /// on any call to Foo. Because this overload exists, call with no arguments won't compile.</summary>
    public string Foo(params char[] args)
      => Foo(args.Select(x => x.ToString()).ToArray());

    public void WontCompile() {
      string foo = Foo(); // compilation fails because this is ambiguous between the two overloads.
    }
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-27T14:27:54.587

要完成接受的答案：

```
public void Foo(string bar, params string[] bars)
{
    string[] strs = new string[] { bar }.Concat(bars).ToArray();
} 
```

# php - PHP：有人知道任何将 facebook 连接与用户登录系统集成的教程吗？

> ID：10445744
> 
> 赞同：0
> 
> 时间：2012-05-04T08:57:11.340
> 
> 标签：php, mysql, facebook, unix

我正在建立一个可以从用户注册中受益的网站。显然，使用 facebook 添加登录会使用户更容易。除了普通的用户注册/登录表单之外，是否有一个很好的资源可以帮助您轻松（在 php 中）实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T08:59:23.507

我只是在用户表中添加了一个列“facebook_id”。

连接应用程序后，我得到他们的 facebook user_id 并将其插入相关或新用户行。
然后我只需将该 id 与 facebook javascript 提供的活动 ID 进行比较。您可以通过 -value 获取 facebook_id `$_COOKIES`。

如果您`facebook_id`在表中找到该用户，则认为用户已登录。运行登录功能（如果有）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T09:14:01.407

您可以从[http://developers.facebook.com/获取 facebook 开发者教程](http://developers.facebook.com/)

[以及来自https://github.com/facebook/php-sdk](https://github.com/facebook/php-sdk)的最新 facebook php sdk

上面的sdk中有例子

# c++ - 尝试使用指向成员函数的指针时出现强制转换问题

> ID：10445745
> 
> 赞同：0
> 
> 时间：2012-05-04T08:57:12.957
> 
> 标签：c++, casting, struct, static-methods, member-function-pointers

出于多种原因，我必须使用在 extern C lib 中定义的结构。我已经简化了我的代码以使其可读。

### C Lib 中定义的结构体

```
extern "C" {
    typedef struct {
        double (*_function)(double x);
    } FuncR;
} 
```

### 包含 A 类的 Cpp 文件

```
Class A {
public:
    A();
    void foo(double x); // Cannot be static since it uses m
    void bar();
private:
    double m; // non-static member by nature
};

void A::bar() {
    FuncR f;
    f._function = &A::foo;
}; 
```

该调用`f._function = &A::foo;`产生以下错误：

`error C2440 : '=' : cannot convert from 'double (__thiscall A::*)(double)' to 'double(__cdecl*)(double)'`

我一直在寻找答案，显然`foo`必须声明为静态的。就我而言，这是不可能的，因为它必须使用非静态成员......

有什么技巧可以解决我的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T10:23:43.623

不，我不认为有“解决”这个问题的技巧。

方法调用需要一个`this`指针，函数指针无法处理。

通常你可以定义一个静态的“trampoline”函数来让你进入一个方法，但这需要外层（在这种情况下是C代码）支持传递，例如 `void *`你可以存储`this`指针的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T17:52:58.743

Does the FuncR struct really need to be defined/used in C code? Can you use C++-style member function pointers?

How about this?...

```
class A;

struct classA_MemberFuncR {
    double(A::*_function)(double);
};

class A {
public:
    A() : m(1.234) {};
    double foo(double x) {
        std::cout << "In foo(" << x << "): this="
                << (void*)this << ", m=" << m << '\n';
        return m+x;
    }
    void bar();
private:
    double m; // non-static member by nature
};

void A::bar() {
    classA_MemberFuncR fm;
    fm._function = &A::foo;
    double result = (this->*fm._function)(4.321);
    std::cout << "Result is: " << result << std::endl;
}; 
```

[Comment added at this point:] Dang. Re-read OP's original post. (Supposedly we're stuck with the C struct's non-member function pointer.)

Hmm. On GCC I tried a whole lot of casting combinations and it never let me cast M::foo's address to much of anything else, so I wrote a runtime cast function template to force it to allow me to cast anything at all to any other type I want without complaining (Everyone: Please hold off on the screams of "that's not portable!" Sure it's portable... It's just how you use it that may or may not be portable!):

```
/*---- In a header file somewhere... ----*/
#include <stdarg.h>
template <typename ToTy, typename FromTy>
ToTy forceCast_helper(int dummy, ...);

template <typename ToTy, typename FromTy>
inline ToTy forceCast(FromTy obj) {
    // ...has nothing to do with Star Wars!
    return forceCast_helper<ToTy,FromTy>(1, obj);
}

/*---- In a source file somewhere... ----*/
template <typename ToTy, typename FromTy>
ToTy forceCast_helper(int dummy, ...) {
    va_list args;
    va_start(args, dummy);
    ToTy ret = va_arg(args, ToTy);
    va_end(args);
    return ret;
} 
```

Which allowed me to compile the following code without error:

```
typedef double(*doubleFuncDouble_t)(double);
typedef double(A::*doubleClassAMemberfuncDouble_t)(double);

f._function = forceCast<doubleFuncDouble_t>(&A::foo);

// and then call this->foo(4.321) with it from within A::bar() as follows...

(this->*(forceCast<doubleClassAMemberfuncDouble_t>(f._function)))(4.321); 
```

Unfortunately when it ran, it segfaulted. Further investigation shows that, at least on GCC for 32-bit Linux for x86, sizeof(a member function pointer) is 8, while sizeof(a nonmember function pointer) is 4\. When I changed the type of FuncR::_function to uint64_t, amazingly, the call succeeded. (I was surprised as well.)

So it seems regardless of any casting magic you might find that compiles without error, there's really no way at all you'd ever be able to squeeze a member function pointer into a nonmember function pointer, at least on GCC for 32-bit x86\. And even if you could, that doesn't encapsulate the 'this' pointer, as 'unwind' mentioned in his post.

* * *

I think there's still hope, though.

unwind's post suggests a trampoline function but concedes that it would require separately passing the 'this' pointer & managing that in the C code as a void*. I'm assuming your C library is not modifiable? If so, you should still be able to do a trampoline without being able to pass a 'this' pointer through it, assuming you have a limited number of such function pointers you'll need to be specifying:

You could create an array of class A object pointers, sized to however many of these FuncR function pointer objects you'll be using:

```
A* arrayThatHoldsAObjPointers[8]; // assuming you only need 8 such FuncR func ptr objects 
```

Then create that many physical static nonmember functions (each conveniently named with a suffix number corresponding with its associated array index), and in the body of each, make them call A::foo() via its associated 'A' object in the arrayThatHoldsAObjPointers:

```
double trampoline_0(double d) { return arrayThatHoldsAObjPointers[0]->foo(d); }
double trampoline_1(double d) { return arrayThatHoldsAObjPointers[1]->foo(d); }
...and so on... 
```

Then when you need to set a FuncR object for use by your C library, give it the address of one of the trampolines, and at the same time, store the pointer to that A object in the associated arrayThatHoldsAObjPointers[] element. To make the code that sets these easier to use, you could also create an array of function pointers to the trampolines.

# android - 在android中使用sqlite分组和计数

> ID：10445746
> 
> 赞同：3
> 
> 时间：2012-05-04T08:57:15.130
> 
> 标签：android, sqlite, group-by

我的 android 应用程序中有一个 sqlite 表，我需要计算有多少项目具有相同的日期。这是表的简单模式：

col1 | col2 | 日期项目 |

XX | XX | 2012-04-12|

年年 | 呃| 2012-05-12|

…………

我想要计算有多少行具有相同的日期，我需要使用 group by 进行查询。问题是，如果我这样做：

```
Cursor cursor = db.query("table_name", new String[] {"date_item"}, null, null, "date_item", null, null); 
```

我回来了`cursor.getColumnCount();`。我只得到 1 列。那么我怎样才能有 2 列（一列用于**date_item**，一列用于**count**）？

谢谢， 马蒂亚

# javascript - 使用相同的源创建两个 HTML5 视频元素不起作用

> ID：10445748
> 
> 赞同：4
> 
> 时间：2012-05-04T08:57:26.967
> 
> 标签：javascript, html, video

我正在尝试做一件简单的事情，但到目前为止我还没有取得任何成功，我不明白为什么它不起作用。

我需要两个（或多个，就此而言）HTML5 视频元素来播放相同的视频，但它不起作用。这是我一直在尝试的代码：http: [//jsfiddle.net/4K8DZ/](http://jsfiddle.net/4K8DZ/)

关于为什么会这样的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-03T19:22:30.577

我自己也遇到了这个问题。我通过向第二个视频元素的源文件添加查询参数来解决它：

```
video1.setAttribute("src", "whatever.mp4");
video2.setAttribute("src", "whatever.mp4?random=1"); 
```

[http://jsfiddle.net/br2bn/](http://jsfiddle.net/br2bn/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T15:39:41.410

尽管我仍然无法发表评论，但我必须将此作为答案提交。

只要其中一个正在缓冲，这个错误对于大于 10mb 的文件就会持续存在，而另一个则不会工作。如果你按下暂停，另一个就会工作。

我更新了示例以演示该错误：http: [//jsfiddle.net/4K8DZ/23/](http://jsfiddle.net/4K8DZ/23/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-18T21:10:43.853

实际上，我只能在 Windows7 上使用 iPad + Safari 和 Chrome 播放一个视频。使用 Safari，如果我开始播放一个视频，那么另一个会停止。使用 Chrome，我得到了几乎相同的结果。

# c# - 图书馆代码中的一次性资源

> ID：10445751
> 
> 赞同：3
> 
> 时间：2012-05-04T08:57:42.287
> 
> 标签：c#, .net, theory, idisposable

想象一下你正在编写一个库。比如说，这个库将用于 24/7 服务器应用程序。有一些未管理的资源，包装在你的公共 API 中，所以你实现 Disposable 模式（你甚至可以实现终结器）

通常，您会使用`using`语句来释放非托管资源。但是您只是在编写一个库，而不是最终的应用程序。如果另一个程序员“忘记”打电话`Dispose()`怎么办？您将在您的库中获得资源泄漏！我们可以依赖终结器，但不能保证终结器会被[调用](http://blogs.msdn.com/b/oldnewthing/archive/2010/08/09/10047586.aspx "叫")。那么，有没有办法保证以某种方式释放非托管资源？有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T09:06:53.743

除了记录您的课程之外，没有其他解决方案。在你的文档中明确地写出你的类是如何被使用的（即它们应该在尽可能早的时候被释放，可能使用`using`，或者显式调用`Dispose`）。

如果您的消费者没有正确处理其对象，那么您无需为内存泄漏负责，就像人们在野外丢弃垃圾时工业部门对污染负责一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T09:03:52.950

您可能希望服务器应用程序具有代码分析规则[CA2213: Disposable fields should be dispose](http://msdn.microsoft.com/en-us/library/ms182328.aspx)启用。

否则我不知道是否有办法保证他们调用你的 Dispose() 方法。

# android - 键盘处于活动状态时如何防止标题栏隐藏？

> ID：10445758
> 
> 赞同：2
> 
> 时间：2012-05-04T08:58:02.440
> 
> 标签：android

我在 TabActivity 中有一个表单（滚动视图），选项卡出现在页面底部，并且我在页面底部有一个 EditText 元素。每当用户想要输入文本时，总 UI 会随着标题栏移到顶部。有没有可能阻止它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:03:37.260

尝试设置[`android:windowSoftInputMode`](http://developer.android.com/guide/topics/manifest/activity-element.html)为清单中的活动。否则将布局更改为相对并使您的 EditText`android:layout_alignParentBottom="true"`

参考这个[例子](https://stackoverflow.com/a/5401828/598170)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T09:06:06.650

`android:windowSoftInputMode="adjustPan"`在 android 清单中与您的活动一起使用或参考[SoftInputMode 文档](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#softInputMode)。

# android - 如何更改 SearchView 上的默认图标，以便在 Android 的操作栏中使用？

> ID：10445760
> 
> 赞同：59
> 
> 时间：2012-05-04T08:58:09.097
> 
> 标签：android, android-actionbar

我在自定义 SearchView 中的搜索图标时遇到了一些麻烦。在我看来，可以在Item属性中更改图标，对吗？只需检查下面的代码..

有人可以告诉我我做错了什么吗？

这是我正在使用的菜单，带有我的自定义搜索图标**icn_lupa**。但是当我运行应用程序时，我总是得到默认的搜索图标......

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
<item android:id="@+id/menu_search"
      android:title="@string/menu_search"
      android:icon="@drawable/icn_lupa"
      android:showAsAction="always"
      android:actionViewClass="android.widget.SearchView" />
</menu> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2013-08-21T14:43:20.670

我找到了另一种更改搜索图标的方法，该图标与 Diego Pino 的答案在同一行，但直接在`onPrepareOptionsMenu`.

在你的 menu.xml 中（和以前一样）

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
<item android:id="@+id/action_search"
      android:icon="@drawable/ic_action_fav"
      android:title="@string/action_websearch"
      android:showAsAction="always|never"
      android:actionViewClass="android.widget.SearchView" />
</menu> 
```

在您的活动中：

```
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    MenuItem searchViewMenuItem = menu.findItem(R.id.action_search);    
    mSearchView = (SearchView) searchViewMenuItem.getActionView();
    int searchImgId = getResources().getIdentifier("android:id/search_button", null, null);
    ImageView v = (ImageView) mSearchView.findViewById(searchImgId);
    v.setImageResource(R.drawable.your_new_icon); 
    mSearchView.setOnQueryTextListener(this);
    return super.onPrepareOptionsMenu(menu);
} 
```

我按照示例更改了此[示例](https://stackoverflow.com/questions/11085308/changing-the-background-drawable-of-the-searchview-widget/11669808#11669808)中的编辑文本。

您应该能够为您的所有图标/背景执行此操作`SearchView`，以找到您可以[在此处](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.4_r1.2/android/widget/SearchView.java/#248)查看的正确 ID 。

希望这对其他人也有帮助！

**2017 年 11 月更新：**

由于这个答案 android 已经更新，可以通过 XML 更改搜索图标。

如果您针对 android v21 以下的任何内容，您可以使用：

```
<android.support.v7.widget.SearchView
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    app:searchIcon="@drawable/ic_search_white_24dp"
    app:closeIcon="@drawable/ic_clear_white_24dp" /> 
```

或 v21 及更高版本：

```
<SearchView
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:searchIcon="@drawable/ic_search_white_24dp"
    android:closeIcon="@drawable/ic_clear_white_24dp" /> 
```

还有更多选择：

```
closeIcon
commitIcon
goIcon
searchHintIcon
searchIcon
voiceIcon 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2014-08-02T06:17:53.813

@just_user 的好回答

就我而言，由于我将 appcompat v7 库用于 SearchView + ActionBar，因此我稍微修改了他的解决方案以使其与我的项目兼容，只要您在添加 appcompat v7 时没有修改任何内容，它就应该可以工作图书馆

XML:

```
<menu xmlns:android="http://schemas.android.com/apk/res/android"
      xmlns:metrodeal="http://schemas.android.com/apk/res-auto" >

    <item
        android:id="@+id/main_menu_action_search"
        android:orderInCategory="100"
        android:title="@string/search"
        metrodeal:showAsAction="always"
        metrodeal:actionViewClass="android.support.v7.widget.SearchView" 
        android:icon="@drawable/search_btn"/>

</menu> 
```

Java代码：

```
@Override
public void onPrepareOptionsMenu(Menu menu) {
    MenuItem searchViewMenuItem = menu.findItem(R.id.main_menu_action_search);
    SearchView mSearchView = (SearchView) MenuItemCompat.getActionView(searchViewMenuItem);
    int searchImgId = android.support.v7.appcompat.R.id.search_button; // I used the explicit layout ID of searchview's ImageView
    ImageView v = (ImageView) mSearchView.findViewById(searchImgId);
    v.setImageResource(R.drawable.search_btn);
    super.onPrepareOptionsMenu(menu);
} 
```

请原谅这个非常大的图标（我还没有调整图标的大小），但它应该可以正常工作。

![在此处输入图像描述](../Images/a67ba14d7a9ac3791052e46e69d239cc.png)

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-07-20T13:53:18.370

我也在为此苦苦挣扎，但后来我不小心使用了“collapseActionView”并修复了它！我的 menu.xml 现在看起来像这样：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
<item android:id="@+id/menu_search"
      android:title="@string/menu_search"
      android:showAsAction="always|withText|collapseActionView"
      android:actionViewClass="android.widget.SearchView"
      android:icon="@android:drawable/ic_menu_search" /> 
</menu> 
```

这样做的缺点是，在平板电脑上，SearchView 将出现在 ActionBar 的左侧，而不是 searchicon 所在的位置，但我不介意。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2015-04-17T07:40:22.023

我定义了一种风格来做到这一点。

这是我的xml：

```
 <android.support.v7.widget.SearchView
        android:id="@+id/sv_search"
        android:icon="@android:drawable/ic_menu_search"
        android:layout_width="fill_parent"
        **style="@style/CitySearchView"**
        android:layout_height="wrap_content"/> 
```

这是我的风格：

```
<style name="CitySearchView" parent="Base.Widget.AppCompat.SearchView">
    <item name="searchIcon">@drawable/ic_more_search</item>
</style> 
```

就是它！</p>

完成之后，看看 Base.Widget.AppCompat.SearchView。

```
<style name="Base.Widget.AppCompat.SearchView" parent="android:Widget">
    <item name="layout">@layout/abc_search_view</item>
    <item name="queryBackground">@drawable/abc_textfield_search_material</item>
    <item name="submitBackground">@drawable/abc_textfield_search_material</item>
    <item name="closeIcon">@drawable/abc_ic_clear_mtrl_alpha</item>
    <item name="searchIcon">@drawable/abc_ic_search_api_mtrl_alpha</item>
    <item name="goIcon">@drawable/abc_ic_go_search_api_mtrl_alpha</item>
    <item name="voiceIcon">@drawable/abc_ic_voice_search_api_mtrl_alpha</item>
    <item name="commitIcon">@drawable/abc_ic_commit_search_api_mtrl_alpha</item>
    <item name="suggestionRowLayout">@layout/abc_search_dropdown_item_icons_2line</item>
</style> 
```

每个项目都可以通过定义新样式来覆盖。

希望能帮助到你！

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2013-06-07T16:19:43.160

有办法做到这一点。诀窍是使用它的标识符恢复 ImageView 并使用`setImageResource()`. 此解决方案的灵感来自于[更改 searchview 小部件的背景可绘制对象](https://stackoverflow.com/questions/11085308/changing-the-background-drawable-of-the-searchview-widget)。

```
private SearchView searchbox;

private void customizeSearchbox() {
    setSearchHintIcon(R.drawable.new_search_icon);
}

private void setSearchHintIcon(int resourceId) {
    ImageView searchHintIcon = (ImageView) findViewById(searchbox, 
        "android:id/search_mag_icon");
    searchHintIcon.setImageResource(resourceId);
}

private View findViewById(View v, String id) {
    return v.findViewById(v.getContext().getResources().
        getIdentifier(id, null, null));        
} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-08-26T12:47:39.243

SearchView searchView = (SearchView) findViewById(R.id.address_search);

```
 try {
        Field searchField = SearchView.class
                .getDeclaredField("mSearchButton");
        searchField.setAccessible(true);
        ImageView searchBtn = (ImageView) searchField.get(searchView);
        searchBtn.setImageResource(R.drawable.search_glass);
    } catch (NoSuchFieldException e) {
    } catch (IllegalAccessException e) {
    } 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2014-05-13T20:27:45.770

After some research I found the solution [here](http://nlopez.io/how-to-style-the-actionbar-searchview-programmatically/). The trick is that the icon is not in an `ImageView` but in the `Spannable` object.

```
// Accessing the SearchAutoComplete
int queryTextViewId = getResources().getIdentifier("android:id/search_src_text", null, null);  
View autoComplete = searchView.findViewById(queryTextViewId);

Class<?> clazz = Class.forName("android.widget.SearchView$SearchAutoComplete");

SpannableStringBuilder stopHint = new SpannableStringBuilder("   ");  
stopHint.append(getString(R.string.your_new_text));

// Add the icon as an spannable
Drawable searchIcon = getResources().getDrawable(R.drawable.ic_action_search);  
Method textSizeMethod = clazz.getMethod("getTextSize");  
Float rawTextSize = (Float)textSizeMethod.invoke(autoComplete);  
int textSize = (int) (rawTextSize * 1.25);  
searchIcon.setBounds(0, 0, textSize, textSize);  
stopHint.setSpan(new ImageSpan(searchIcon), 1, 2, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);

// Set the new hint text
Method setHintMethod = clazz.getMethod("setHint", CharSequence.class);  
setHintMethod.invoke(autoComplete, stopHint); 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-02-28T09:29:50.247

在菜单 xml 中：

```
<item
    android:id="@+id/menu_filter"
    android:actionLayout="@layout/menu_filter"
    android:icon="@drawable/ic_menu_filter"
    android:orderInCategory="10"
    android:showAsAction="always"
    android:title="@string/menu_filter"/> 
```

并创建`layout/menu_filter`：

```
<?xml version="1.0" encoding="utf-8"?>
<SearchView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:searchIcon="@drawable/ic_menu_filter"/> 
```

然后在活动中`onCreateOptionsMenu`或`onPrepareOptionsMenu`：

```
SearchView searchView = (SearchView) menu.findItem(R.id.menu_filter).getActionView();
searchView.setOnQueryTextListener(this); 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-05-04T09:11:12.733

看起来 actionViewClass 覆盖了图标，并且看起来您无法从[此类](https://developer.android.com/reference/android/widget/SearchView.html)更改它。

你有两个解决方案：

*   忍受它，我认为它是用户体验和平台一致性方面的最佳选择。
*   [定义自己的 actionViewClass](https://stackoverflow.com/questions/5446126/custom-action-view-cant-be-clicked)

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2019-06-28T23:40:24.923

这适用于 Material Design（MaterialComponents 主题）和 BottomAppBar。

如果您使用的是 androidx 库，例如：

```
 <item
    android:id="@+id/sv"
    android:title="@string/search"
    app:actionViewClass="androidx.appcompat.widget.SearchView"
    app:showAsAction="always" /> 
```

您可以创建一个方法并从任何您想要的地方调用它：

```
 /**
 * Set SearchView Icon
 * @param i Drawable icon
 */
private void setSVIcon(int i) {
    ImageView iv = searchView.findViewById(androidx.appcompat.R.id.search_button);
    iv.setImageDrawable(ResourcesCompat.getDrawable(getResources(), i, null));
} 
```

使用示例：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(m, menu);
    MenuItem mn = menu.findItem(R.id.sv);
    if (mn != null) {
        searchview = (SearchView) mn.getActionView();
        setSVIcon(R.drawable.ic_sr);
    }
} 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2016-04-04T19:15:27.803

```
<SearchView
            android:searchIcon="@drawable/ic_action_search"
..../> 
```

使用 searchIcon xml 标签

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2014-11-03T19:05:03.843

更新 AutocompleteTextView 的提示，用于在扩展模式下更新搜索图标，从 android 源复制，

```
@Override
    public boolean onPrepareOptionsMenu(Menu menu) {
        mSearchMenuItem = menu.findItem(R.id.action_search);
        SearchView searchView = (SearchView) mSearchMenuItem.getActionView();
        int searchImgId = getResources().getIdentifier("android:id/search_button", null, null);
        ImageView v = (ImageView) searchView.findViewById(searchImgId);
        v.setImageResource(R.drawable.search_or);

        int searchTextViewId = searchView.getContext().getResources().getIdentifier("android:id/search_src_text", null, null);
        AutoCompleteTextView searchTextView = (AutoCompleteTextView) searchView.findViewById(searchTextViewId);
        searchTextView.setHintTextColor(getResources().getColor(R.color.hint_color_white));
        searchTextView.setTextColor(getResources().getColor(android.R.color.white));
        searchTextView.setTextSize(18.0f);

        SpannableStringBuilder ssb = new SpannableStringBuilder("   "); // for the icon
        ssb.append(hintText);
        Drawable searchIcon = getResources().getDrawable(R.drawable.search_or);
        int textSize = (int) (searchTextView.getTextSize() * 1.25);
        searchIcon.setBounds(0, 0, textSize, textSize);
        ssb.setSpan(new ImageSpan(searchIcon), 1, 2, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
        searchTextView.setHint(ssb);

        return super.onPrepareOptionsMenu(menu);
    } 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-01-26T09:21:04.883

从 API 21，您可以在 xml 中更改它：

```
android:searchIcon="@drawable/loupe"
android:closeIcon="@drawable/x_white" 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-12-07T11:57:55.453

使用 Kotlin 的绝望解决方案

```
 val s = (searchView.getAllChildren().firstOrNull() as? LinearLayout)?.getAllChildren()?.filter { it is AppCompatImageView }?.firstOrNull() as? AppCompatImageView
    s?.setImageResource(R.drawable.search) 
```

获取所有儿童：

```
fun ViewGroup.getAllChildren() : ArrayList<View> {
val views = ArrayList<View>()
for (i in 0..(childCount-1)) {
    views.add(getChildAt(i))
}
return views
} 
```

希望它可以帮助某人。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2015-07-09T04:48:08.883

对于 api 级别 < 21，我这样做了：

```
 int searchImgId = getResources().getIdentifier("android:id/search_mag_icon", null, null);
    ImageView ivIcon = (ImageView) searchView.findViewById(searchImgId);
    if(ivIcon!=null)
        ivIcon.setImageResource(R.drawable.ic_search); 
```

由此

![在此处输入图像描述](../Images/d1a4d4dbbd4bfb6fdce36396af4cc85e.png)

对此

![在此处输入图像描述](../Images/17f53302b3666379b00fb6b7c794bcfc.png)

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2016-11-21T11:26:47.617

有三个放大镜图标。其中两个在 IconizedByDefault 为真时显示（一个在按下之前显示，一个在“提示”中显示），一个在 IconizedByDefault 为假时始终显示。所有字段都是私有的，因此获取它们的方法是通过它们的 xml id。（大部分代码已经在这篇文章的其他答案中单独提及）

当 IconizedByDefault 为 true 时，将提示中的图标（仅在按下图标后可见）更改为：

```
mSearchSrcTextView = (SearchAutoComplete)findViewById(R.id.search_src_text); 
```

然后执行与 android 源代码中相同的操作：

```
final int textSize = (int) (mSearchSrcTextView.getTextSize() * 1.25);
    newSearchIconDrawable.setBounds(0, 0, textSize, textSize);

    final SpannableStringBuilder ssb = new SpannableStringBuilder("   ");
    ssb.setSpan(new ImageSpan(newSearchIconDrawable), 1, 2, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
    ssb.append(hintText); 
```

mSearchHintIcon 已替换为 newSearchIconDrawable，这是您的新搜索图标。然后设置提示

```
mSearchSrcTextView.setHint(ssb); 
```

其他 2 个图标位于 中`ImageView`，可通过其 ID 找到。对于搜索视图关闭时的图标（当 iconizedByDefault 为 true 时），请执行以下操作：

```
mSearchButton = (ImageView) findViewById(R.id.search_button); 
```

对于总是出现的那个（如果 iconizedByDefault 为假）

```
mCollapsedIcon = (ImageView) findViewById(R.id.search_mag_icon); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2014-07-16T14:06:08.767

Just name your icon the same name as the icon that is used by the search view. When it compiles it takes the resource in the project over the icon in the library.

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2013-08-27T17:07:27.940

我的解决方案：使用两个菜单 xml 文件。在其中一个 xml 中，菜单项有一个 actionView，而在另一个没有。最初膨胀折叠的菜单，当单击菜单项时，使菜单无效并膨胀展开的菜单 xml 并确保调用 setIconified(false);

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater)
{
    if(!mShowSearchView)
    {
        inflater.inflate(R.menu.menu_collapsed, menu);
    }
    else
    {
        inflater.inflate(R.menu.menu_expanded, menu);
        MenuItem searchItem = menu.findItem(R.id.action_search);
        SearchView searchView = (SearchView) MenuItemCompat.getActionView(searchItem);
        searchView.setIconified(false);
        searchView.setOnCloseListener(new OnCloseListener()
        {
            @Override
            public boolean onClose()
            {
                mShowSearchView = false;
                ActivityCompat.invalidateOptionsMenu(getActivity());
                return false;
            }
        });
    }
    super.onCreateOptionsMenu(menu, inflater);
}

@Override
public boolean onOptionsItemSelected(MenuItem item)
{
    if (item.getItemId() == R.id.action_filter)
    {
        menu.showMenu();
    }
    else if (item.getItemId() == R.id.action_search)
    {
        mShowSearchView = true;
        ActivityCompat.invalidateOptionsMenu(getActivity());
    }
    return super.onOptionsItemSelected(item);
} 
```

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2014-04-03T22:36:53.517

我使用 AppCompat 库。是的，指定`android:icon="@drawable/search_icon_png"`不起作用。所以我查看了@style/Theme.AppCompat 的源代码，找到了android 使用的图标。

```
<item name="searchViewSearchIcon">@drawable/abc_ic_search</item> 
```

因此，如果您将 drawables 中的搜索图标重命名为`abc_ic_search.png`，则此图标将首先在您的应用程序可绘制对象中找到，而不是在 appcompat 可绘制文件夹中找到。为我工作:)

使用这种方法，您也可以自定义搜索小部件的关闭和清除图标。

# uml - 如何通过编程创建 uml 类图和符号？

> ID：10445762
> 
> 赞同：1
> 
> 时间：2012-05-04T08:58:17.793
> 
> 标签：uml, eclipse-emf, eclipse-gmf

```
Package model = UMLFactory.eINSTANCE.createPackage();
model.setName("MyPackage");
Class cls = model.createOwnedClass("MyClass", false); 
```

我通过上面的代码创建了一些 uml2 模型，现在我想创建一个类图和一些包/类等符号。我如何通过编程来做到这一点？（我们可以在eclipse中通过uml2tools为.uml初始化类图，但是它的API是什么？）

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:19:45.980

uml2 模型为您提供创建 uml 模型所需的实体。UML 图是这些模型的视图，不是模式定义的一部分。所以你不能创建图表:-(

# wcf - WCF：如何使用不同类型的操作（更新、添加、删除......）修改寄存器

> ID：10445765
> 
> 赞同：1
> 
> 时间：2012-05-04T08:58:36.380
> 
> 标签：wcf

好吧，[在这篇文章](https://stackoverflow.com/questions/10164949/entity-framework-4-1-how-to-work-with-per-call-life-time-data-context)中，我得出的结论是，在每次调用模式下使用服务更好，因为它更有效。这使我拥有短暂的数据上下文，即我调用的方法的生命周期。

在这个例子中，我看到了如何修改元素列表的数据，只需要将实体的状态设置为修改。

但是，例如，我该如何处理一项操作、修改和更新？

一种情况可能是这样。我有书籍和作者，客户端应用程序有一个包含两个数据网格的视图，一个用于作者，另一个用于书籍。用户可以在第一个数据网格中添加作者和修改他们的信息，并对第二个数据网格中的书籍执行相同的操作。也可以将书籍分配给他们的作者。

我有 POCO 类，所以我有一个作者类，其属性是书籍列表。好吧，我可以将书籍添加到这个列表中，然后当我调用服务方法 updateAuthors 时，我只需要使用作者的类作为参数，EF 就知道如何处理书籍了。也不需要通过这本书。

但是，当书籍列表中有新书籍以及存在但其信息被修改的书籍时会发生什么？

在我开头提到的帖子示例中，它说明了当所有实体都被修改时如何做，但是如果我想添加新的寄存器，我需要将状态设置为添加。那么，如果有混合实体，我该怎么办？它是否存在任何模式或某种方式来做到这一点？我必须设置所有书籍的状态？我可以知道账簿的状态，因为我使用了一个自动数字作为 ID，所以如果 ID 为 0 是一个新的寄存器，否则是一个修改。

谢谢。戴姆洛克。

编辑：也许我的问题不是很清楚。我想知道的是如何一次保存许多实体的更改。例如，我有 Authors、Books 和 Custormers。我添加，修改和删除其中许多信息。在我的 WCF 客户端中，我有保存作者更改的方法、保存书籍更改的其他方法和保存客户更改的其他方法。

每次调用我的服务如何，我需要进行三个调用，每种类型的实体一个，这是独立的。但是，如果我直接使用实体框架，我可以对多种类型的实体进行许多更改，并且我只需要调用一次 savechanges，它就可以完成所有工作。如何对 WCF 和 POCO 实体执行相同操作？

我正在阅读有关自我跟踪实体的信息，购买我有同样的问题，我可以使用 Applychanges(entity) 但如果我没记错的话，它只会将更改应用于一个实体。如果我对许多实体进行了更改，是否需要调用 N 次？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T10:42:51.673

不确定这是否会回答您的问题，但这是我的建议：

*   使用标志（IsNew、IsDirty、IsDeleted）管理 POCO 实体的状态；
*   当您将 POCO 实体传递给对象上下文时，使用 ObjectStateManager 更改附加的实体状态；
*   递归遍历子实体列表并应用相同的方法。

编辑：以下代码是 AuthorStateManager 类：

```
public partial class AuthorStateManager : IStateManager<Author, Context>
{

    private IStateManager<Book, Context> _BookStateManager = new BookStateManager();

    public void ChangeState(Author m, Context ctx)
    {
        if (m == null) return;
        ctx.Authors.Attach(m);
        if (m.IsDeleted)
        {
            ctx.ObjectStateManager.ChangeObjectState(m, System.Data.EntityState.Deleted);
        }
        else
        {
            if (m.IsNew)
            {
                ctx.ObjectStateManager.ChangeObjectState(m, System.Data.EntityState.Added);
            }
            else
            {
                if (m.IsDirty)
                {
                    ctx.ObjectStateManager.ChangeObjectState(m, System.Data.EntityState.Modified);
                }
            }
        }
        SetRelationsState(m, ctx);
    }

    private void SetRelationsState(Author m, Context ctx)
    {
        foreach (Book varBook in m.Books)
        {
            _BookStateManager.ChangeState(varBook, ctx);
        }
    }
} 
```

其中`Authors`是POCO 类型的实体`ObjectSet`，是对象上下文，是循环遍历所有子状态管理器以更新其状态的方法。`m``Author``ctx``SetRelationsState`

更改状态后，在我的存储库对象中调用`ctx.SaveChanges()`. 这是 AuthorRepository 类中的 Update 方法：

```
public Author Update(Author m, bool commit)
{
    _AuthorStateManager.ChangeState(m, _ctx);
    if (commit)
    {
        _ctx.SaveChanges();
    }
    return m;
} 
```

`_BookStateManager`是`BookStateManager`类型的私有成员，它以自己的`ChangeState()`方法修改 Book 状态。我建议您让状态管理器类实现一个名为 的接口`IStateManager`，该接口具有该`ChangeState()`方法。

这似乎有点令人费解，但如果您为这些类生成代码，它会变得更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:01:38.667

如果您想在单个服务调用中执行多个操作，那么要执行的操作需要从方法调用转变为对象。例如，您可能有一个 InsertCustomerAction 类，该类有一个与之关联的 Customer 实例。所有这些操作都将具有一个基类 (Action)，并且您的 WCF 方法将采用 Action 实例的集合。

# css - 以前 Gzip 静态文件而不是动态文件

> ID：10445770
> 
> 赞同：1
> 
> 时间：2012-05-04T08:58:46.670
> 
> 标签：css, performance, compression, gzip, deflate

如果不使用 mod_deflate 或 mod_gzip 我会手动 gzip 一个 css 或 js 文件，获得类似：

```
base.css.gz 
```

我将其重命名为：

```
base.css 
```

然后从 HTML 页面加载它，它会工作吗？

这在内存和资源非常有限的环境中可能很有用，例如网状网络中的无线接入点。

我还想问一下，在普通网站上这样做是否可以节省服务器cpu的资源？在我使用 mod_deflate 的那一刻，我认为使用这种方法，内容会在每次请求时即时压缩，是这样吗？是不是有点浪费资源？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T17:01:01.497

我回答自己，因为没有人回答我的问题。

可以手动提供 gzip 压缩文件，例如 css，但它们需要由具有正确内容类型和压缩头的 Web 服务器提供，只需从 <link> 或 <javscript> 标签加载 gzip 压缩文件即可不行。

这是一个使用 php 的示例：

```
<?php
header("Content-Encoding: gzip");
header("Content-Type: text/css");
echo file_get_contents("base.min.css.gz");
exit(0);

// no closing tag to prevent occasionally printing any chars 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T09:12:49.050

如果设置为对静态文件使用压缩，HTTP 服务器会为您缓存压缩文件 - 所以不用担心。

[IIS 文档在这里](http://www.iis.net/ConfigReference/system.webServer/httpCompression)

我不太喜欢 Apache，但是 mod_deflate 和 mod_cache 一起工作[https://serverfault.com/a/220418/7869](https://serverfault.com/a/220418/7869)

# php - PHP、IMAP 和 Outlook 2010 - 文件夹名称编码不同？

> ID：10445774
> 
> 赞同：1
> 
> 时间：2012-05-04T08:58:56.023
> 
> 标签：php, symfony, imap, utf-7

我在 php 中开发电子邮件客户端（使用 symfony2），我遇到了名称中包含非 ascii 字符的文件夹的问题。

在 php 应用程序中创建的文件夹在同一应用程序中正确可见。在 Outlook 中相同，在 Outlook 中创建的 Outlook 看起来不错。在其他情况下不是。在 Outlook 中创建的文件夹在 php 中无法正确显示，反之亦然。

我使用 utf-7 对 php 中的文件夹名称进行编码。哪种编码使用 Outlook？

示例：名为“Wysłąne”的文件夹（波兰语拼写错误，意思是“已发送”），第一个由 php 以 utf7 编码，第二个在 Outlook 中创建：

PHP：

```
Wys&xYLEhQ-ne 
```

外表：

```
Wys&AUIBBQ-ne 
```

为什么不一样？如何以相同的编码制作它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T12:23:12.187

您的源字符编码中似乎存在混淆。imap_utf7_encode （和类似的）期望您的字符串采用 ISO-8859-1 编码。

AFAICT 无法在 ISO-8859-1 中表示 Wysłąne。“Wysłąne”表示为 UTF-8 变为（十六进制字节）

```
byte value (hex)    57, 79, 73, C5 82, C4 85, 6E 65
unicode character   W   y   s   ł      ą      n  e 
```

解码后的 PHP 结果 Wys&xYLEhQ-ne 为“Wys얂쒅ne”。其中的两个特殊字符是韩文字符，码位分别为U+C582和U+C485。因此，似乎以某种方式尝试了逐字符转换，其中两个字符的 UTF-8 表示被解释为 Unicode 代码点。

解决此问题的最简单方法是使用`mbstring`具有该`mb_convert_encoding`功能的扩展程序。

```
$utf7encoded = mb_convert_encoding($utf8SourceString, "UTF7-IMAP","UTF-8")
$decodedAsUTF8 = mb_convert_encoding($utf7String,"UTF-8", "UTF7-IMAP") 
```

# python - 将除第一列和最后一列之外的所有列加倍

> ID：10445780
> 
> 赞同：4
> 
> 时间：2012-05-04T08:59:25.403
> 
> 标签：python, list-comprehension

我想从如下数据结构中获取：

```
[[0,   12,  25,  45,  65,  100],
 [0,   0,   0,   255, 255, 255],
 [0,   0,   255, 255, 0,   0],
 [255, 255, 0,   0,   0,   0]] 
```

至：

```
[[0,   12,  12, 25,   25,  45,  45,  65,  65, 100],
 [0,   0,   0,   0,   0,   255, 255, 255, 255, 255],
 [0,   0,   0,   255, 255, 255, 255, 0,   0,   0],
 [255, 255, 255, 0,   0,   0,   0,   0,   0,   0]] 
```

（除了第一列和最后一列之外的所有列都重复）。

我有以下有效的列表理解：

```
[[l[0]] + [x for sl in [[i, i] for i in l[1:-1]] for x in sl] + [l[-1]] for l in list_of_lists] 
```

但我想知道是否有更优雅、更易读的方式来写这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T09:03:30.337

> 我想知道是否有一种更优雅、更易读的方式来编写它。

我认为您还应该考虑“更具可读性”并不一定与“是否可以将其塞进一行？”的意思相同。它通常意味着更明确和直接的迭代代码。也许你会发现这个函数更具可读性：

```
>>> def double_middle_items(l):
        if len(l) < 2:
            raise ValueError("there must be at least two items in l")

        result = [l[0]]
        for item in l[1:-1]:
            result.append(item)
            result.append(item)
        result.append(l[-1])
        return result

>>> double_middle_items([1,2,3,4,5])
[1, 2, 2, 3, 3, 4, 4, 5] 
```

然后你的代码变得非常简单：

```
>>> [double_middle_items(l) for l in list_of_lists] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T09:04:47.083

```
>>> from itertools import chain
>>> data = [[0,   12,  25,  45,  65,  100], [0,   0,   0,   255, 255, 255], [0, 0, 255, 255, 0,   0], [255, 255, 0,   0,   0,   0]]
>>> [list(chain.from_iterable(zip(l,l[1:]))) for l in data]
[[0, 12, 12, 25, 25, 45, 45, 65, 65, 100], [0, 0, 0, 0, 0, 255, 255, 255, 255, 255], [0, 0, 0, 255, 255, 255, 255, 0, 0, 0], [255, 255, 255, 0, 0, 0, 0, 0, 0, 0]] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T09:05:21.390

鉴于您的清单为

```
>>> spam=[[0,   12,  25,  45,  65,  100],
 [0,   0,   0,   255, 255, 255],
 [0,   0,   255, 255, 0,   0],
 [255, 255, 0,   0,   0,   0]] 
```

您可以链接列表中每个元素的重复项

```
>>> from itertools import repeat,chain
>>> [list(chain(*([i]*2 for  i in r)))[1:-1]  for r in spam]
[[0, 0, 12, 12, 25, 25, 45, 45, 65, 65, 100, 100], [0, 0, 0, 0, 0, 0, 255, 255, 255, 255, 255, 255], [0, 0, 0, 0, 255, 255, 255, 255, 0, 0, 0, 0], [255, 255, 255, 255, 0, 0, 0, 0, 0, 0, 0, 0]] 
```

或使用重复

```
>>> [list(chain(*(repeat(i,2) for  i in r)))[1:-1]  for r in spam] 
```

# internet-explorer - 在站点中使用模式的好习惯？

> ID：10445781
> 
> 赞同：14
> 
> 时间：2012-05-04T08:59:32.503
> 
> 标签：internet-explorer, internet-explorer-7

我最近发现了将以下内容添加到网站标题中的乐趣：

```
<meta http-equiv="X-UA-Compatible" content="IE=8" /> 
```

网站可以正常工作，CSS 很漂亮，生活很美好。但我有点担心这是一种多么好的做法？

安装了 IE7 的非常旧的计算机怎么样？那个版本的IE7真的可以访问IE8标准模式吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-04T09:11:53.747

对您问题最后一部分的简短回答是否定的：IE7 不能在 IE8 模式下工作。因此，使用`X-UA-Compatible`标头不会强制旧版本的 IE 认为它们是新版本。（如果可行，我们都可以开始使用`content="IE-10"`并永远不必担心向后兼容性）

该`X-UA-Compatible`标志的作用是告诉较新版本的 IE 退回到兼容模式以模拟旧版本。因此，您的`content="IE-8"`标志对 IE7 或 IE8 没有影响，但会使 IE9 退回到 IE8 模式。

这意味着 IE9 将以试图向后兼容的名义有效地抛弃它的新功能。

如果这是你想要的 IE9，那么一定要使用`X-UA-Compatible`标题。如果它不是你想要的，那就不要使用它。

（值得注意的是，众所周知，IE 中的向后兼容模式不太擅长与他们试图模拟的版本的真实副本 100% 兼容，所以不要以为你会得到一个完美的副本IE8 也可以在 IE9 中运行——它会有自己的怪癖，与正常模式下的 IE8 或 IE9 不同）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T09:38:53.887

另一件需要注意的是，微软提供的标签示例并不总是有效。阅读[定义文档兼容性](http://msdn.microsoft.com/en-us/library/cc288325%28v=vs.85%29.aspx)，尤其是页面底部的社区添加。

就最佳实践而言，它们可能不是最好的长期解决方案，但在 IE9 发布和网站关闭时非常方便。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-24T06:47:24.427

后向兼容大家说的对，只能在严格要求的情况下才应用，因为它不能完美运行，而且不，你不能仅仅通过添加兼容性标签来获得新浏览器的功能到旧浏览器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T10:52:34.477

我在 Windows 7 测试环境中安装了 IE8，它像以前的 IE7 一样呈现我的代码的某些部分（我的元标记中没有**content="IE7" ）！**
在另一台装有 Windows 7 + IE8 的机器上，代码呈现不同，但我想要的方式。[在http://www.greywyvern.com/?post=313](http://www.greywyvern.com/?post=313)
上有一篇有趣的文章告诉我们 IE8 的渲染方式取决于系统上安装的 Service Pack（这篇文章是关于 XP，但我的是 Windows 7，我有同样的问题）。

所以现在我把**content="IE10"**放在我的网页上，我的网站在 IE10、IE9 和 IE8 中正确显示。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-03T15:40:35.347

我正在使用 Discus，它与旧版本的 IE 不兼容。我得到了他们说在我的页面代码中使用 content="IE-8" 的帮助......

content="IE-8" 还告诉我的浏览器更改表格和文本的大小等：p 我更改为**content="IE-7"**它工作得很好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-07T06:50:12.097

# android - 是否可以在 sdcard 中创建共享首选项文件

> ID：10445783
> 
> 赞同：1
> 
> 时间：2012-05-04T08:59:35.493
> 
> 标签：android, preferences

谁能帮我 ？是否可以在 sdcard 中而不是在 android 应用程序的私有路径上创建共享首选项文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T09:12:23.370

您无法修改共享首选项的存储位置。它是私人存储。如果你想使用 sd 卡，请使用 Environment.getExternalStorageDirectory()。并获取存储在 sdcard 中的目录路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T10:04:56.697

可以通过将 xml 文件读写到外部存储中来实现，但它与 sharedPreferences 不同。你将不得不实现你自己的方式，或者使用这个类的android代码。但是，使用内部存储有一些缺点：

1.  您存储在 sdcard 上的任何内容对每个应用程序都是可见的，最终用户只需打开它即可读取它。只有在内部存储中，您才能获得某种防止读取文件的保护，因此只有根设备才能读取文件。

2.  外部存储也可以卸载，因此数据有时可能无法访问。您需要处理因此可能发生的错误。

3.  在安装 sd 卡时卸载应用程序意味着数据将保留在 sdcard 上。

# image - 使用 Grails 在电子邮件中发送图像

> ID：10445785
> 
> 赞同：4
> 
> 时间：2012-05-04T08:59:38.513
> 
> 标签：image, email, grails

我正在使用 Grails[邮件插件](http://grails.org/plugin/mail)发送电子邮件，我想在电子邮件正文中发送图像，而不是作为附件。我想要的是在电子邮件正文中显示图像，就像在时事通讯中一样。我试过：

```
img style="display:block; height:100px; width:100; " alt="candle"
src="http://www.xyz.com//Candle_4.jpg"> 
```

但它按原样显示。

我还尝试使用 wikimedia 格式：

```
[[:File:Example.jpg]]<br/>
[[Special:FilePath/Example.jpg]] 
```

但同样，两者似乎都链接到外部。

**我究竟做错了什么？**

这是我正在使用的电子邮件模板：

```
<img src="cid:springsourceInlineImage" /> Dear [username],<br/>
Thank you for shopping with us.<br/>
You have placed a new order with following details.<br/>
[details]<br/>
Happy shopping! 
```

但是，如果我想在我的模板中放 10 张图片，我该怎么做呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-04T09:49:20.573

你必须做三件事

1.  将邮件声明为多部分
2.  将您的图像附加为内联图像
3.  从您的邮件模板中引用您的内联图像

根据[这个](http://grails.1312388.n4.nabble.com/How-to-send-inline-images-using-Asynchronous-mail-plugin-td3855299.html)邮件列表线程，它应该像这样工作：

```
sendMail{
    multipart true
    to "[hidden email]"
    subject "Subject goes here"
    html  g.render( template: '/emails/mailTemplate')
    inline 'springsourceInlineImage', 'image/jpg', new File('./web-app/images/springsource.png')
} 
```

在您的模板中，您可以像这样引用图像

```
<img src="cid:springsourceInlineImage" /> 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T14:09:04.583

一般来说，大多数“时事通讯”类型的电子邮件只是 HTML 电子邮件，不会在电子邮件正文中嵌入图像。事实上，许多电子邮件服务器会直接*拒绝*太大的电子邮件，将图像数据放在电子邮件正文中很容易产生这种风险。

相反，解决这个问题的方法是只使用 HTML 电子邮件，其中包含您希望作为普通 HTML 图像链接包含的图像。

有关如何发送 HTML 电子邮件的更多信息，请参阅[邮件插件文档。](http://grails.org/plugin/mail)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-28T11:36:59.547

抱歉，我没有足够的 Stackoverflow 积分来评论其他人的答案。

在@aiolos 的回答中，它包含：

```
inline 'springsourceInlineImage', 'image/jpg', new File('./web-app/images/springsource.png') 
```

这将“image/jpg”指定为输出，但文件为 png 格式。这是故意的吗？

维基百科提供了 mime 类型列表：[http ://en.wikipedia.org/wiki/Internet_media_type#Type_image](http://en.wikipedia.org/wiki/Internet_media_type#Type_image)

我尝试了'image/png'并且它有效，所以我不确定将它设置为'image/jpg'是否有任何区别。

# ruby - Ruby 1.9.3 并行运行时不运行任何单元测试

> ID：10445786
> 
> 赞同：2
> 
> 时间：2012-05-04T08:59:44.157
> 
> 标签：ruby, testunit, ruby-1.9.3

并行运行时，Ruby 1.9.3 不运行任何单元测试

给定以下代码，

```
# Modified from https://gist.github.com/1334056/121396125ca4dd7ee1bb81536cce0754700f20fb
# replication.rb
require 'test/unit'
class TestTest < Test::Unit::TestCase
  def test_one
    assert true
  end

  def test_two
    assert true
  end
end 
```

单元测试在不并行运行时有效，但在并行运行时无效：

```
$ ruby1.9.1 replication.rb 
Run options: 

# Running tests:

..

Finished tests in 0.000348s, 5740.7094 tests/s, 5740.7094 assertions/s.

2 tests, 2 assertions, 0 failures, 0 errors, 0 skips

$ ruby1.9.1 replication.rb --jobs=2 --ruby /usr/bin/ruby1.9.1
Run options: --jobs=2 --ruby /usr/bin/ruby1.9.1

# Running tests:

Retrying...

Finished tests in 0.039012s, 0.0000 tests/s, 0.0000 assertions/s.

0 tests, 0 assertions, 0 failures, 0 errors, 0 skips 
```

对于它的价值，以下是调试开关打开时发生的情况：

```
$ export RUBYOPT="-d"
$ ruby1.9.1 replication.rb 
Exception `LoadError' at /usr/lib/ruby/1.9.1/rubygems.rb:1243 - cannot load such file -- rubygems/defaults/operating_system
Exception `LoadError' at /usr/lib/ruby/1.9.1/rubygems.rb:1252 - cannot load such file -- rubygems/defaults/ruby
Run options: 

# Running tests:

..

Finished tests in 0.000350s, 5718.3539 tests/s, 5718.3539 assertions/s.

2 tests, 2 assertions, 0 failures, 0 errors, 0 skips
$ ruby1.9.1 replication.rb --jobs=2 --ruby /usr/bin/ruby1.9.1
Exception `LoadError' at /usr/lib/ruby/1.9.1/rubygems.rb:1243 - cannot load such file -- rubygems/defaults/operating_system
Exception `LoadError' at /usr/lib/ruby/1.9.1/rubygems.rb:1252 - cannot load such file -- rubygems/defaults/ruby
Run options: --jobs=2 --ruby /usr/bin/ruby1.9.1

# Running tests:

Exception `LoadError' at /usr/lib/ruby/1.9.1/rubygems.rb:1243 - cannot load such file -- rubygems/defaults/operating_system
Exception `LoadError' at /usr/lib/ruby/1.9.1/rubygems.rb:1252 - cannot load such file -- rubygems/defaults/ruby
Exception `LoadError' at /usr/lib/ruby/1.9.1/rubygems.rb:1243 - cannot load such file -- rubygems/defaults/operating_system
Exception `LoadError' at /usr/lib/ruby/1.9.1/rubygems.rb:1252 - cannot load such file -- rubygems/defaults/ruby
/usr/lib/ruby/1.9.1/test/unit/parallel.rb:149: warning: method redefined; discarding old on_parallel_worker?
/usr/lib/ruby/1.9.1/test/unit/testcase.rb:11: warning: previous definition of on_parallel_worker? was here
/usr/lib/ruby/1.9.1/test/unit/parallel.rb:149: warning: method redefined; discarding old on_parallel_worker?
/usr/lib/ruby/1.9.1/test/unit/testcase.rb:11: warning: previous definition of on_parallel_worker? was here
Exception `Errno::EPIPE' at /usr/lib/ruby/1.9.1/test/unit/parallel.rb:125 - Broken pipe - <STDOUT>
Exception `Errno::EPIPE' at /usr/lib/ruby/1.9.1/test/unit/parallel.rb:133 - Broken pipe - <STDOUT>

Retrying...

Finished tests in 0.033203s, 0.0000 tests/s, 0.0000 assertions/s.

0 tests, 0 assertions, 0 failures, 0 errors, 0 skips 
```

我也尝试过要求 minitest，但没有可用的并行测试：

```
# mini_me.rb
# modified from http://apidock.com/ruby/MiniTest
require 'minitest/autorun'

class TestMeme < MiniTest::Unit::TestCase
  def test_one
    assert true
  end

  def test_two
    assert true
  end
end 
```

给

```
$ ruby1.9.1 mini_me.rb --help
minitest options:
    -h, --help                       Display this help.
    -s, --seed SEED                  Sets random seed
    -v, --verbose                    Verbose. Show progress processing files.
    -n, --name PATTERN               Filter test names on pattern. 
```

这是 Ruby 和 ubuntu 的版本。

```
$ ruby1.9.1 --version
ruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-linux]

$ uname -a
Linux [redacted] 3.2.0-24-generic #37-Ubuntu SMP Wed Apr 25 08:43:22 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux 
```

我还使用最近提交的 Ruby on OS X snow leopard (ruby 2.0.0dev (2012-05-05 trunk 35543) [x86_64-darwin10.8.0]) 运行了第一个脚本，但它在那里不起作用。

我究竟做错了什么？

当我有多个文件但未明确使用时会发生以下情况`Test::Unit::Runner`

测试1.rb

```
require "test/unit"

class Test1 < Test::Unit::TestCase
  def test_one
    assert true
  end
end 
```

test2.rb

```
require "test/unit"

class Test2 < Test::Unit::TestCase
  def test_two
    assert true
  end
end 
```

test_all.rb

```
require_relative "test1"
require_relative "test2" 
```

尝试使用这种方法：

```
$ ruby test_all.rb --basedir=. --jobs 2 --ruby /Users/agrimm/.rvm/rubies/ruby-head/bin/ruby
Run options: --basedir=. --jobs 2 --ruby /Users/agrimm/.rvm/rubies/ruby-head/bin/ruby

# Running tests:

Retrying...

Finished tests in 0.075256s, 0.0000 tests/s, 0.0000 assertions/s.

0 tests, 0 assertions, 0 failures, 0 errors, 0 skips

ruby -v: ruby 2.0.0dev (2012-05-05 trunk 35543) [x86_64-darwin10.8.0] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T01:23:03.173

我是 sora_h 的维护者`test/unit`。

`test/unit`为每个测试文件并行化。

您需要分离测试文件并`TestCase`进行并行化。

很抱歉给您带来不便，但我们无法为每个`test_*`方法并行化，因为有些`test_*`方法不能单独运行。（需要订购）

您可以使用`Test::Unit::Runner`来运行多个文件。

谢谢你。

# c# - 如果数据集有行？

> ID：10445788
> 
> 赞同：0
> 
> 时间：2012-05-04T08:59:54.333
> 
> 标签：c#

我还有一个问题

我有这个 foreach 声明：

```
foreach (DataRow dr_art_custsuply in ds.Tables["CustomerSupplier"].Rows)
{
    //Podaci iz CustomerSupplier-a

    //Id dobavljača
    string cust_id;
    if (!dr_art_custsuply.Table.Columns.Contains("Id"))
        cust_id = "";
    else if (dr_art_custsuply["Id"].ToString().Length <= 0)
        cust_id = "";
    else
        cust_id = dr_art_custsuply["Id"].ToString();

    //Naziv dobavljača
    string name;
    if (!dr_art_custsuply.Table.Columns.Contains("Name"))
        name = "";
    else if (dr_art_custsuply["Name"].ToString().Length <= 0)
        name = "";
    else
        name = dr_art_custsuply["Name"].ToString();  

   //GLN
   string gln;
   if (!dr_art_custsuply.Table.Columns.Contains("GLN"))
        gln = "";
   else if (dr_art_custsuply["GLN"].ToString().Length <= 0)
        gln = "";
   else
        gln = dr_art_custsuply["GLN"].ToString();
} 
```

我想要做的是检查 ds.Tables["CustomerSupplier"].Rows 是否存在，如果不是每个都跳过这个，是否有通过代码，如果

```
(!ds.Tables.Contains("CustomerSupplier"))
{
} 
```

但我得到一个错误，所以帮助帮助，如何写呢？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T09:02:01.833

如果没有行，您当前的代码将已经跳过`foreach`.

```
foreach (DataRow dr_art_custsuply in ds.Tables["CustomerSupplier"].Rows) 
```

该行将转到末尾，`foreach`如果没有行，则不会执行正文中的任何代码。

更新：

您的问题并不完全清楚，但您似乎需要检查该*表*是否真的在数据集中。将以下内容包裹`if`起来`foreach`以测试其是否存在：

```
if(ds.Tables["CustomerSupplier"] != null) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T09:01:25.550

只需在循环之前添加此检查（如果没有行，它将不会进入 foreach）

```
if(ds.Tables["CustomerSupplier"].Rows.Count > 0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T09:10:54.623

**只需在foreach**之前添加以下条件：

```
if(ds.Tables["CustomerSupplier"].Rows.Count > 0) 
```

# debugging - 在 Eclipse RCP 应用程序的调试中打开编辑器

> ID：10445789
> 
> 赞同：0
> 
> 时间：2012-05-04T08:59:58.057
> 
> 标签：debugging, editor, eclipse-rcp, eclipse-pde

我正在开发一个允许开发 PDE 模块的 Eclipse 应用程序。请注意，此应用程序有自己的工作区。我有以下问题要问您：是否可以使用应用程序工作区中的所有插件项目在调试模式下打开 GraphicalEditor？

如果是，我该怎么做？

在此先感谢米尔科

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T09:28:53.303

您不能使用 Eclipse 实例调试同一实例...

但是您可以使用额外的插件运行一个新的 Eclipse 实例并对其进行调试。只需选择有问题的插件，右键单击“Debug As...”->“Eclipse Application”。您可以稍后调整使用的插件和/或功能，以便更快地启动...

# objective-c - iPhone Cocos2D游戏编程教材中的循环引用

> ID：10445790
> 
> 赞同：1
> 
> 时间：2012-05-04T09:00:02.427
> 
> 标签：objective-c, ios, cocos2d-iphone, static-methods

一个被滥用的话题，但我找不到答案。我正在关注“Learn iPhone and iPad cocos2d Game Development”一书，无法真正理解 ShootEmUp 示例中的方法（可在[1](https://softwareengineering.stackexchange.com/questions/11856/whats-wrong-with-circular-references)处获得）是否是最好的方法。作者使用了一个 GameScene，它添加了各种对象（例如 Ship、InputLayer 等）作为子对象。有争议的方面是，在这些对象中，通过使用静态方法调用 GameScene，该方法返回 GameScene 类的静态实例，该实例在 GameScene 的 init 方法中实例化。这对我来说似乎是一个循环引用，并且根据许多人[（例如，参见这篇文章）](https://softwareengineering.stackexchange.com/questions/11856/whats-wrong-with-circular-references)是要避免的。我不确定在游戏编程中是否也是如此，因为这种方法在[1](https://softwareengineering.stackexchange.com/questions/11856/whats-wrong-with-circular-references)这可能是有原因的。

有人能澄清一下吗？我不确定是完全重构我的代码还是保留静态变量方法。

非常感谢你 ：）！

[源代码](http://www.apress.com/downloadable/download/sample/sample_id/640/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T12:34:44.150

我猜你指的是这部分：

```
static GameScene* instanceOfGameScene;
+(GameScene*) sharedGameScene
{
  NSAssert(instanceOfGameScene != nil, @"GameScene instance not yet initialized!");
  return instanceOfGameScene;
} 
```

这不会创建循环引用。有些人可能会争辩说，以这种方式构建代码不是一个好习惯，但这是一个不同的讨论。

如果此函数（`GameScene`对象）的返回值在某些 GameScene 子项中没有被引用为强属性，那没关系。

如果您在其中一个孩子中有此情况，您将遇到循环引用的情况：

```
@property(nonatomic, strong) GameScene *mainScene;
// OR for non-ARC
@property(nonatomic, retain) GameScene *mainScene; 
```

这些将使`GameScene`对象的引用计数不会变为 0 并解除分配。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T04:30:44.313

你在这里看到的是一个半单例模式，它在整个 Cocos 中被广泛使用，实际上 Cocos 框架本身是完全建立在单例对象上的（就像很多 Apple 的 UIKit 一样）。游戏经常使用单例，因为您通常在游戏中拥有大量中心数据，例如分数、健康、武器等，您的许多对象都需要了解这些数据。您通常还有一些对象，例如玩家、敌人等，它们需要通知您的应用程序的中央调度他们正在做什么，以便游戏中的其他对象可以做出相应的反应或调整。

这就是为什么许多 Cocos 游戏使用您在此处展示的技术的原因。如果您了解单例编程的风险，这不是一个坏习惯。基本上，请记住这一点：

*   无论您使用单例技术还是使用另一种方法调用父级，您基本上都在做同样的事情。直接引用中央游戏引擎可能比依赖方法为您派生它更好。我不建议使用`[self parent]`，因为当您首先必须确定“谁是父级”时，以后会很难阅读和调试，而是单例访问可以让您立即知道您正在访问谁。
*   孩子永远不应该保留其父母。您可以引用父级，但不要保留。
*   这里的单例方法的替代方法是在子节点中创建一个指向父节点的 iVar。但这本质上是相同的想法，因此为了最大限度地降低保留周期的风险，访问单例通常更安全。如果您的 iVar 设置不正确，您可能会有一个循环引用。您在此处显示的方法*不是*循环引用。

请注意，此特定代码会阻止您*在*初始化 GameScene`+(GameScene*) sharedGameScene`之前使用方法。这就是使它成为半单例的原因。通常，如果单例中的这个方法还没有初始化，那么它会很聪明地初始化它自己，这样使用这个类方法要么返回，要么首先创建然后返回对象。

 *在 Cocos 中可能不是问题，因为您可能会在执行其他任何操作之前初始化游戏场景，因此它已经存在。*

# java - 编辑/修改已编译类文件的最简单方法

> ID：10445791
> 
> 赞同：3
> 
> 时间：2012-05-04T09:00:08.970
> 
> 标签：java, decompiling

我的主要问题是我有一些来自游戏的类文件，我不想编辑/修改其中的一部分

实现这一目标的最简单方法是什么？

除非您有一些不会导致源代码错误的反编译器，否则反编译整个代码并重新编译不是一种选择，因为我不想花时间修复它们。

此致

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T09:04:24.340

一个解决方案可能是使用像[ASM](http://asm.ow2.org/)或[BCEL](http://commons.apache.org/bcel/)这样​​的字节码操纵器。它们都提供了一个 API 来加载类文件、更改其中的一部分并保存它。ASM 的优势在于能够在运行时执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T00:45:40.433

你也可以使用我写的[Krakatau 反汇编器/汇编器。](https://github.com/Storyyeller/Krakatau)反汇编器将类文件转换为人类可读的（如果你理解字节码，则可读性很好）格式，然后你可以对其进行编辑和重新组装。如果您想手动查看和编辑类文件，这很有用，在这种情况下，编写一堆库调用然后编译和运行程序只是为了使用 ASM 或 BCEL 相当笨拙。

Krakatau 还有一个专门设计用于处理混淆类的反编译器，因此即使没有其他反编译器可以生成有效的源代码。当然，如果类被混淆，生成的源代码可能仍然不可读。

# asp.net - ASP.Net Web 处理程序

> ID：10445793
> 
> 赞同：1
> 
> 时间：2012-05-04T09:00:10.470
> 
> 标签：asp.net, asp.net-mvc-3, c#-4.0, asp.net-ajax, httphandler

Managed Handler 与普通的 .ashx web Handler 相比有什么优势？

性能关键型应用程序的最佳选择是什么？

1.  Asp.Net 同步 Web 处理程序
2.  Asp.Net 异步 Web 处理程序

对于多个并发请求处理应用程序，例如图像管理应用程序，哪个处理程序是最佳选择？同步、异步或托管

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T10:01:18.237

首先，在 .NET 中编写的同步和异步处理程序都是托管处理程序。“托管”只是 IIS 上下文中使用的一个术语，它可以使用以本机、非托管代码以及托管代码编写的处理程序。

至于你应该使用哪个，这取决于。这将归结为处理程序执行的工作性质和并发用户负载。如果您有大量并发用户以及合理数量的 IO、数据库、处理或外部服务调用，那么异步可以带来性能提升。同样，如果处理程序执行长时间运行、繁重的 IO 或其他处理，少数并发用户仍然可以受益。但是，您不会自动假设最坏的情况（高用户并发性）并立即设置异步处理程序。它们的创作、调试和维护更加复杂。

# javascript - RegEx 在 Expresso 中匹配，但在 JavaScript 中不匹配

> ID：10445796
> 
> 赞同：-1
> 
> 时间：2012-05-04T09:00:18.230
> 
> 标签：javascript, regex, parsing, browser

我在 Expresso 的帮助下编写了一个正则表达式。它与我的所有示例匹配，因此我将其复制到我的 JavaScript 代码中。它与我的示例之一不匹配，但为什么呢？

正则表达式：

```
^(\d{1,2}):?(\d\d)?\s*-\s*(\d{1,2}):?(\d\d)?$ 
```

应该匹配：

```
10-12
10:00-12:00
1000-1200 
```

在 JavaScript 中，10:00-12:00 不适用于所有浏览器，如 IE9、Chrome、Firefox。有任何想法吗？

更新（JavaScript 代码）： input.match(/^(\d{1,2}):?(\d\d)?\s*-\s*(\d{1,2}):?(\ d\d)?$/);

更新（已解决）：由于一些预过滤，代码从未到达。对不起！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:05:45.290

现在在 Chrome 中测试它，它似乎可以工作：

```
var exp = /^(\d{1,2}):?(\d\d)?\s*-\s*(\d{1,2}):?(\d\d)?$/;
exp.test('10-12') // true
exp.test('10:00-12:00') // true
exp.test('1000-1200') // true
exp.test('1000-12005') // false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T09:03:13.420

将表达式放在 Javascript 代码中时是否转义了 \'s？

将其嵌入为字符串时，您最终会编写：

```
 var expression = "^(\\d{1,2}):?(\\d\\d)?\\s* etc 
```

# android - 在 HTML5 画布 ipad 中保存鼠标位置和时间

> ID：10445797
> 
> 赞同：0
> 
> 时间：2012-05-04T09:00:32.547
> 
> 标签：android, ipad, html, html5-canvas

我们有一个[图像](http://www.efm.leeds.ac.uk/CIVE/mobile/digitise/room-image.html)，并希望同时保存鼠标点击和每次鼠标点击对文件的时间。

这将是一个 Ipad/Android 应用程序。到目前为止，我们已经有了鼠标坐标和时间。但是我们如何才能将这些信息保存到文件中呢？`localStorage`?

你觉得呢？你有没有什么想法？

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:19:04.543

这取决于您要对保存的数据做什么。如果客户端应用程序必须记住数据，localStorage 是可以的，它在大多数现代浏览器中实现，包括 iOS 和 android 上的浏览​​器。

但是用户可以清除这个本地内存，就像他可以擦除 cookie 和缓存内存一样，所以真正的问题是：

您将如何重用您保存的数据？

如何在 w3cschool 上使用 localStorage [http://www.w3schools.com/html5/html5_webstorage.asp](http://www.w3schools.com/html5/html5_webstorage.asp)

**编辑**

考虑到您的响应，您想要保存到用户计算机上的文件中。出于安全原因，使用简单的 javascript（您需要浏览器插件）这是不可能的（阅读本主题[Read/write to file using jQuery](https://stackoverflow.com/questions/582268/read-write-to-file-using-jquery)）。这个插件很有趣[http://jquery.tiddlywiki.org/twFile.html](http://jquery.tiddlywiki.org/twFile.html)

但是，由于您要保存的文件是简单的数据并且一点也不重，您可能希望将文件保存到服务器（甚至数据库中的条目），这样您就不会用安装的东西打扰用户（这可能会导致他们逃离）。无论他使用何种计算机（或移动设备），他都可以访问他的文件。缺点是用户必须登录到您的应用程序才能访问他的文件。

# html - HTML 5 网页加载缓慢如何提高性能

> ID：10445800
> 
> 赞同：-4
> 
> 时间：2012-05-04T09:00:43.763
> 
> 标签：html

我有网页，它的性能非常好，加载图像和其他东西需要很长时间。如何提高加载性能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T09:02:52.987

这是一个模糊的问题，但可以给出一些一般性建议。

*   首先通过[http://gtmetrix.com/](http://gtmetrix.com/)之类的工具运行您的网站，该工具使用 Yahoo 的 YSlow 和自定义验证引擎来提供建议。您将从 GT Metrix 获得的建议将涵盖 95% 以上的最常见 Web 最佳实践。（不附属；只是真的很喜欢他们的工具）。

*   如果您的网站不公开，您可以使用 Chrome 的开发人员工具（运行审核以获得整个页面的性能建议列表，以及 JS 和 CSS 解释时间——非常有用）。

*   [使用http://validator.w3.org](http://validator.w3.org)验证您的文档是否存在错误。即使您的网站不是公开的，您也可以将源代码作为文本粘贴到验证器引擎中。

*   如果图像是您主要关心的问题，请使用延迟加载技术仅加载可见内容，例如[用于图像的 jQuery 延迟加载器](http://www.appelsiini.net/projects/lazyload)。为 Web 图像使用正确的大小/格式。使用[http://www.smushit.com/ysmush.it/](http://www.smushit.com/ysmush.it/)之类的工具来压缩图像。

## 一般页面性能因素

*来自 YSlow，按字母顺序*

*   添加过期标头
*   避免使用 AlphaImageLoader 过滤器
*   避免 CSS 表达式
*   避免空 src 或 href
*   避免 HTTP 404（未找到）错误
*   避免 URL 重定向
*   使用 gzip 压缩组件
*   配置实体标签 (ETags)
*   不要在 HTML 中缩放图像
*   使 AJAX 可缓存
*   使网站图标小且可缓存
*   减少 HTTP 请求
*   使 JavaScript 和 CSS 外部化
*   缩小 JavaScript 和 CSS
*   将 CSS 放在顶部
*   将 JavaScript 放在底部
*   减小 cookie 大小
*   减少 DNS 查找
*   减少 DOM 元素的数量
*   删除重复的 JavaScript 和 CSS
*   使用内容交付网络 (CDN)
*   使用无 cookie 域
*   将 GET 用于 AJAX 请求

# c# - winforms .net c# - 外部程序

> ID：10445802
> 
> 赞同：1
> 
> 时间：2012-05-04T09:00:57.217
> 
> 标签：c#, .net, winforms, external

我有带有按钮的 c# .net (winforms) 程序。我还有另一个 C++ 控制台程序（它作为参数文本文件并更改它）。我想要这样的东西：我按下按钮（在 c# 程序中存储了 txt 文件的路径），C++ 程序被执行但用户看不到它（我不想在新窗口中打开例如命令行）。有可能做这样的事情吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T09:09:55.183

也许，你应该看看`Process.Start()`方法：http: [//msdn.microsoft.com/en-us/library/0w4h05yb.aspx](http://msdn.microsoft.com/en-us/library/0w4h05yb.aspx)

在`ProcessStartInfo`你可以传递给这个方法中，你可以指定不应该打开任何窗口。

```
Process.Start(new ProcessStartInfo(pathToExeFile)
{
    CreateNoWindow = true,
    UseShellExecute = false,
    // ...
}); 
```

# java - 使用 hbm2ddl 在 HSQLDB 中使用 Hibernate 生成序列时出错

> ID：10445805
> 
> 赞同：4
> 
> 时间：2012-05-04T09:01:10.540
> 
> 标签：java, hibernate, hsqldb

在为 HSQLDB 中的 id 字段生成序列时出现错误。映射文件配置如下：

```
<hibernate-mapping>
    <class name="ddol.rtdb.dto.Configuration" table="RTDB_CONFIGURATION">
        <id name="id" type="int">
            <column name="CONF_ID" />
            <generator class="sequence">
                <param name="sequence">CONF_ID_SEQ</param>
            </generator>
        </id>
        <property generated="never" lazy="false" name="configurationDate"
            type="java.util.Date">
            <column name="CONF_DATE" />
        </property> 
```

它在我使用与 oracle 相同的映射时有效，但在与 HSQLDB 一起使用时不生成序列进行测试。还有什么我应该添加到映射中的吗？

当我尝试在表中插入某些内容时遇到的错误是：

```
ERROR org.hibernate.util.JDBCExceptionReporter - user has no privileges or object not found: CONF_ID_SEQ 
```

HSQLDB 版本是 2.2.8，Hibernate 版本是 3.6.10

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:32:13.223

创建序列（CONF_ID_SEQ - 如果它不存在）并确保您拥有该序列的`"grant"`权限。或者，您可以为序列
创建一个并为所有用户或您想要的特定用户授予权限。然后它应该工作。`"synonym"``"grant"`

```
 E.g  
    Consider, You are creating Sequence as "dbauser". Now, some other "user"(who don't have access) trying to use it,  
then u will get "user has no privileges" error.  
    In that case you can use above strategy. 
```

# c# - 通用列表c#中的重复值

> ID：10445807
> 
> 赞同：2
> 
> 时间：2012-05-04T09:01:23.463
> 
> 标签：c#

我在尝试防止重复时向 ac# 通用列表添加值，但没有成功。任何人都知道下面这段代码不起作用的原因吗？

我在这里有一个简单的课程：

```
public class DrivePairs
{
    public int Start { get; set; }
    public int End { get; set; }
} 
```

这是我的方法，它试图返回上述类的通用列表：

```
ArrayList found = DriveRepository.GetDriveArray(9, 138);
List<DrivePairs> drivePairs = new List<DrivePairs>();
foreach (List<int> item in found)
{
    int count = item.Count;
    if (count > 1)
    {
        for (int i = 0; i < (count - 1); i++)
        {
            DrivePairs drivePair = new DrivePairs();
            drivePair.Start = item[i];
            drivePair.End = item[i + 1];

            if (!drivePairs.Contains(drivePair))
                drivePairs.Add(drivePair);
        }
    }
}
drivePairs = drivePairs.Distinct().ToList(); 
```

正如您可能看到的，我有一个`ArrayList`，并且每一行都包含一个`List<int>`. 我正在做的是遍历每个并添加到仅包含对的列表中。例如，如果我的`List<int>`包含`[1,3,6,9]`我想在我的配对列表中添加三个条目：

```
[1,3]
[3,6]
[6,9] 
```

除了不识别重复项之外，这一切都很好。我认为这条线就足够了：

```
if (!drivePairs.Contains(drivePair))
    drivePairs.Add(drivePair); 
```

但它继续将它们全部添加。即使我`Distinct()`在最后添加 a ，它仍然不会删除它们。我也尝试将它们添加到 a`HashSet`中，但它仍然包含所有重复项。

任何人都知道为什么重复可能不会被拾取的原因？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T09:05:55.290

您的`DrivePairs`类没有指定相等性，因此，该`Contains`方法将使用引用相等性。`Start`添加一个同时使用和来确定相等性的 Equals 方法，`End`您可能会发现您的代码有效。

请参阅：[等式比较（C# 编程指南）](http://msdn.microsoft.com/en-us/library/dd183752.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T09:11:52.653

List.Contains 方法

> 此方法通过使用默认相等比较器来确定相等性，该比较器由对象对 T（列表中的值的类型）的 IEquatable.Equals 方法的实现定义。

改变你的`DrivePairs`班级

```
 public class DrivePairs: IEquatable<DrivePairs>
    {
        public int Start { get; set; }
        public int End { get; set; }

        public bool Equals(DrivePairs other)
        {
            return (this.Start == other.Start && this.End == other.End)
        }
    } 
```

请参阅：http: [//msdn.microsoft.com/en-us/library/bhkz42b3.aspx](http://msdn.microsoft.com/en-us/library/bhkz42b3.aspx)

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T09:08:24.230

您正在创建新`List<int>`对象 - 这些是不同的对象，当相互比较时，即使它们包含*相同*的值（以相同或不同的顺序），也会被评估为不同，因为引用类型的默认比较方法是引用比较.

您需要编写一个自定义比较器，该比较器将以您的应用程序所需的方式识别相等的列表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T09:29:55.563

我已将 Colin 标记为答案，但这里是代码，以防万一它对任何人有用：

平等比较器：

```
 public class EqualityComparer : IEqualityComparer<DrivePairs>
    {
        public bool Equals(DrivePairs x, DrivePairs y)
        {
            return x.StartHub.Equals(y.Start);
        }

        public int GetHashCode(DrivePairs obj)
        {
            return obj.Start.GetHashCode();
        }
    } 
```

在控制器中：

```
IEqualityComparer<DrivePairs> customComparer = new EqualityComparer();

IEnumerable<DrivePairs> distinctDrivePairs = drivePairs.Distinct(customComparer);
drivePairs = distinctDrivePairs.ToList(); 
```

感谢所有的帮助和评论

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T09:07:21.750

DrivePairs 类类型是一个引用类型（记住引用类型和值类型的概念）。因此，当您检查 DrivePairs 变量是否已添加到 List 集合中时，它会返回 false，因为每个 DrivePairs 变量的内存位置都不同。

尝试使用 Dictionary 或 StringDictionary 或任何其他键值对集合。它肯定会起作用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T09:08:07.557

我没有测试它，但我认为默认的相等测试是它是否是同一个实例。尝试覆盖 Equals 方法并使其使用您的属性。

# serialization - 协议缓冲区和 Hadoop

> ID：10445815
> 
> 赞同：3
> 
> 时间：2012-05-04T09:01:46.603
> 
> 标签：serialization, hadoop, protocol-buffers, avro

我是 Hadoop 世界的新手。我知道 Hadoop 有自己的序列化机制，称为 Writables。AVRO 是另一个这样的库。我想知道我们是否可以使用 Google 的协议缓冲区序列化来编写 map-reduce 作业？如果是的话，那么有人可以指出一个很好的例子来让我开始。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T19:33:25.640

Twitter 发布了他们的[大象鸟](https://github.com/kevinweil/elephant-bird)库，它允许 hadoop 使用协议缓冲区文件。

# python - 覆盖类的 __contains__ 方法

> ID：10445819
> 
> 赞同：14
> 
> 时间：2012-05-04T09:01:56.603
> 
> 标签：python, python-3.x, metaclass

我需要在 Python 中模拟枚举，并通过编写如下类来实现：

```
class Spam(Enum):
    k = 3
    EGGS = 0
    HAM = 1
    BAKEDBEANS = 2 
```

现在我想使用以下语法测试某个常量是否是特定 Enum 派生类的有效选择：

```
if (x in Foo):
    print("seems legit") 
```

因此，我尝试创建一个“枚举”基类，并在其中覆盖如下`__contains__`方法：

```
class Enum:
    """
    Simulates an enum.
    """

    k = 0 # overwrite in subclass with number of constants

    @classmethod
    def __contains__(cls, x):
        """
        Test for valid enum constant x:
            x in Enum
        """
        return (x in range(cls.k)) 
```

但是，在`in`类上使用关键字时（如上面的示例），我收到错误：

```
TypeError: argument of type 'type' is not iterable 
```

为什么？我能以某种方式得到我想要的语法糖吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-04T09:14:21.493

> 为什么？

当您使用特殊语法时，会根据 的类型查找`a in Foo`该方法。但是，您的实现本身存在，而不是它的类型。的类型是，它没有实现这个（或迭代），因此错误。`__contains__``Foo``__contains__``Foo``Foo``type`

如果您实例化一个对象，然后*在*创建它之后，将一个`__contains__`函数添加到实例变量中，也会发生同样的情况。该函数不会被调用：

```
>>> class Empty: pass
... 
>>> x = Empty()
>>> x.__contains__ = lambda: True
>>> 1 in x
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: argument of type 'Empty' is not iterable 
```

> 我能以某种方式得到我想要的语法糖吗？

是的。如上所述，该方法是在`Foo`'s 类型上查找的。类的类型称为**[元类](http://docs.python.org/py3k/reference/datamodel.html#customizing-class-creation)**，因此您需要一个新的元类来实现`__contains__`。

试试这个：

```
class MetaEnum(type):
    def __contains__(cls, x):
            return x in range(cls.k) 
```

如您所见，元类上的方法将元类实例——类——作为它们的第一个参数。这应该是有道理的。它与类方法非常相似，只是该方法存在于元类而不是类上。

从具有自定义元类的类继承也继承了元类，因此您可以像这样创建基类：

```
class BaseEnum(metaclass=MetaEnum):
    pass

class MyEnum(BaseEnum):
    k = 3

print(1 in MyEnum) # True 
```

# c - 将结构声明为指针，可能吗？

> ID：10445821
> 
> 赞同：0
> 
> 时间：2012-05-04T09:02:03.530
> 
> 标签：c

我在 C 方面不高深，我更喜欢 Java。我在我的一个伙伴那里看到了以下代码，我很好奇它是否可以，因为它对他不起作用，但他说它应该起作用并且错误在其他地方。

```
typedef struct nameOfStruct {
   type1 *elem1;
   type2 *elem2;
   struct nameOfStruct *next;
} *nameOfStruct; 
```

那么，是否有可能拥有`*nameOfStruct`，或者应该只是拥有`nameOfStruct`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T09:05:49.080

这是有效的 C，但使用起来会令人难以置信的混乱（`nameOfStruct`听起来像一个对象类型，但实际上它是一个指针）。所以避免它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T09:06:02.823

没有看到调用代码就不可能回答这个问题，但这是你应该知道的：

`*nameOfStruct`为指向结构的指针创建一个别名，这很容易引起误解，因为名称并不表明它实际上是一个指针。我不建议使用它。

如果他想将其用作快捷方式，`struct nameOfStruct`则删除额外的`*`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T09:06:35.447

`nameOfStruct`是指向 a 的指针`struct nameOfStruct`。 `*nameOfStruct`是指向 a 的指针的指针`struct nameOfStruct`。

两者都是有效的并且意味着不同的东西，我想你想使用第一个。不过，您应该命名您的 typedef `nameOfStruct_ptr`，因为名称令人困惑。

# c++ - C++ Vector 遍历抽象类

> ID：10445826
> 
> 赞同：6
> 
> 时间：2012-05-04T09:02:10.150
> 
> 标签：c++, vector, iterator, sfml

背景信息：我和几个朋友在 och sfml 和 box2d 的帮助下用 C++ 构建这个平台游戏以完成学校作业。要求之一是我们遵循“MVC 模式”。

我们为模型创建了像 Bullet 和 Character 这样的类。BulletView 和 CharacterView（都继承了抽象类 sf::Drawable）用于视图。

而不是复制代码进行绘图并有两个方法 drawBullets 和 drawCharacter 这样

```
void WorldView::drawBullets()
{
    std::vector<BulletView*>::iterator it;
    for ( it = bullets.begin() ; it < bullets.end(); it++ )
        window->draw(**it);
}

void WorldView::drawCharacters()
{
    std::vector<CharacterView*>::iterator it;
    for ( it = characters.begin() ; it < characters.end(); it++ )
        window->draw(*it);
} 
```

我想要一个使用多态的更通用的方法，它看起来像这样：

```
void WorldView::drawVector(const std::vector<sf::Drawable*>& vector)
{
    std::vector<sf::Drawable*>::iterator it;
    for ( it = vector.begin() ; it < vector.end(); it++ )
        window->draw(**it);
} 
```

bulletView 向量声明如下：

```
std::vector<BulletView*> bullets; 
```

不能让它工作。我对 C++ 有点陌生，所以请怜悯！我试过搜索，但没有找到非常具体的答案。

我在编译时遇到的错误。

> 错误 8 错误 C2679：二进制“=”：未找到采用“std::_Vector_const_iterator<_Myvec>”类型的右侧 > 操作数的运算符（或没有可接受的 > 转换）c:\users\niklas\multiplaya\ sfml 测试\sfml 测试\view\worldview.cpp 409 >1 SFML_Test
> 
> 错误 7 错误 C2664: 'mp::WorldView::drawVector' : 无法将参数 1 从 >'std::vector<_Ty>' 转换为 'const std::vector<_Ty> &' c:\users\niklas\multiplaya \sfml >test\sfml 测试\view\worldview.cpp 402 1 SFML_Test

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T09:05:48.317

问题是多态性在向量级别不起作用，而是在它们包含的指针级别起作用。所以`std::vector<Derived*>`永远不能作为 传递`std::vector<Base*>`，因为它们是完全不同的类型。但是，您可以`std::vector<Base*>`使用指向`Derived*`.

所以，你应该将你的子弹向量声明为

```
std::vector<Drawable*> bullets; 
```

并用 填充它`BulletView*`，例如：

```
bullets.push_back( new BulletView( some args) );

drawVector(bullets); 
```

**注意**：在上面的代码中，我回避了动态分配对象所有权的问题。显然，必须有一些机制在适当的`BulletViews`时候删除。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T09:34:48.510

不要使用多态向量，而是使用模板函数：

```
template <typename T>
void WorldView::drawVector(const std::vector<T*>& vector)
{
    typename std::vector<T*>::iterator it;
    for ( it = vector.begin() ; it < vector.end(); it++ )
        window->draw(**it);
} 
```

顺便说一句 - 原始指针向量对我来说看起来很可疑。谁拥有它们（谁创建它们以及谁负责删除它们）？考虑使用值向量或`boost::ptr_vector`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T09:19:31.983

您遇到的错误是由循环`it = vector.begin();`中的分配产生的。`for`问题是您试图将`iterator`( `it`) 分配给`const iterator`( `vector.begin()`)。您不能使用迭代器对数据结构进行`const`迭代，因为它的值在每次迭代时都会发生变化。此外，在使用迭代器遍历数据结构时，您应该使用 the`operator !=`而不是`operator <`.

如果您`const`从`const std::vector& vector`事物中删除它们应该可以正常工作。

希望这可以帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T09:04:56.277

您正在模仿[Composite Design-Pattern](http://en.wikipedia.org/wiki/Composite_pattern)。

但是你的错误是：你应该写**替换 < by !=**因为它是一个**迭代器**而不是一个**int**

```
void WorldView::drawBullets()
{
    std::vector<BulletView*>::iterator it;
    for ( it = bullets.begin() ; it != bullets.end(); it++ )
        window->draw(**it);
}

void WorldView::drawCharacters()
{
    std::vector<CharacterView*>::iterator it;
    for ( it = characters.begin() ; it != characters.end(); it++ )
        window->draw(*it);
}
I would like a more generic method using polymorhism which would look something like this:

void WorldView::drawVector(const std::vector<sf::Drawable*>& vector)
{
    std::vector<sf::Drawable*>::iterator it;
    for ( it = vector.begin() ; it != vector.end(); it++ )
        window->draw(**it);
} 
```

# iphone - NSString 区分大小写的字符串比较问题

> ID：10445829
> 
> 赞同：0
> 
> 时间：2012-05-04T09:02:23.050
> 
> 标签：iphone, nsstring

我在数据库中保留了一个字符串字段，该字段应该是唯一的。因此，每当我想使用 Text 字段为该字段添加新记录时，我都必须测试这样的记录是否已经存在。如果我已经添加了“A”，那么以后我什至不能添加“a”。但是使用我的代码，如果我添加'A'，则不会添加'A'，而是添加'a'。那么这个“案例”问题的解决方案是什么。我也试过 [someString compare:otherString options:NSCaseInsensitiveSearch] 但我没有为我工作。

这是我的代码：

```
isDuplicate = FALSE;

            for(int i=0; i<[streetArray count]; i++) // This array contains my field
            {
                strToCompare = (NSString *)[[streetArray objectAtIndex:i]Address];
                if ([[textfield1.text lowercaseString] isEqualToString:[strToCompare lowercaseString]]) // Here I compare stings by making them lower
                {
                    isDuplicate = TRUE;
                    break;
                }
            }

            if(isDuplicate == TRUE)
            {
                [self showAlert:nil withMessage:@"Data already exists"];
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T09:05:43.310

如此处所述[，](https://stackoverflow.com/questions/3222284/case-insensitive-compare-against-bunch-of-strings)您可以将所有字符串放在小写形式的`NSSet`or中。`NSMutableSet`这将有效地处理您的问题，因为这正是`NSSet`s 存在的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T09:07:36.973

使用该`compare:options:NSCaseInsensitiveSearch:`方法`NSString`应该可以工作。

```
if ([@"A" compare:@"a" options:NSCaseInsensitiveSearch] == NSOrderedSame) {
    NSLog(@"same");
} 
```

# azure - 为什么文件名为 $$$.$$$ 的 blob 会出现在 Azure 目录列表中？

> ID：10445830
> 
> 赞同：1
> 
> 时间：2012-05-04T09:02:30.290
> 
> 标签：azure, azure-storage, azure-blob-storage

有谁知道为什么当我在这样的目录中列出 blob 时：

```
var container = BlobClient.GetContainerReference(containerName);
var blobs = container.GetDirectoryReference(fileStroageLocation).ListBlobs().ToList(); 
```

我找到了我上传的两个文件和一个文件名为 $$$.$$$ 的附加 blob。如果我使用 Azure 文件存储浏览器 CloudXplorer，我看不到该文件。

但是，我可以通过忽略该文件名来过滤掉它。只是想知道为什么它在那里？如果有什么特殊意义呢？它是如何创建的？如果有更好的排除方法。搜索“$$$.$$$”时，Google 似乎不是很有帮助！

谢谢

格雷姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T15:13:53.783

我不记得是哪个，但是当您在其 UI 中创建目录时，一些存储工具会将该文件创建为占位符。因为blob存储没有目录的概念，所以无法创建`container/dir`，所以有些工具会创建`container/dir/$$$.$$$`。

如果 CloudXplorer 没有向您显示该文件，我猜 CloudXplorer 是创建它的工具。

# c# - 以编程方式单击 dataGridView 标题单元格

> ID：10445831
> 
> 赞同：1
> 
> 时间：2012-05-04T09:02:31.250
> 
> 标签：c#, gridview-sorting

如何以编程方式单击某个 dataGridView 列标题？我想对数据进行排序，但是当我使用 SQL ORDER BY 对数据进行排序时，我得到了一些奇怪的结果（我认为这是因为数据有一些克罗地亚字母作为起始字符）。但是，当我单击列标题时，dataGridView 会对其进行正确排序。那么我怎样才能在显示器上自动做到这一点呢？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T09:12:07.880

```
datagridview.sort(DataGridviewColumn column, System.ComponentModel.ListSortDirection direction); 
```

按列和方向对 datagridview 进行排序的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T09:12:32.950

只需使用[DataGridView 排序方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.sort.aspx)

# mysql - 无法将属性创建为整数

> ID：10445836
> 
> 赞同：0
> 
> 时间：2012-05-04T09:02:48.510
> 
> 标签：mysql

如果我尝试这样定义一个简单的表：

```
create table test 
(
    id integer primary key
); 
```

当我使用命令*describe test*查看表详细信息时，我看到 test 有一个 int(11) 作为属性 id 的类型。
我在 Mac os X 上使用 mysql 5.5 集群，我不知道这是什么原因，我如何声明一个整数？我必须将其声明为 int(1) 吗？没有别的办法了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T09:09:09.753

int(11) 不是整数数组。[它表示存储在该列中的整数的最小宽度](http://dev.mysql.com/doc/refman/5.5/en/numeric-type-attributes.html)。如果您希望存储较小的数字，也许[TINYINT](http://dev.mysql.com/doc/refman/5.5/en/integer-types.html)甚至[BIT](http://dev.mysql.com/doc/refman/5.5/en/bit-type.html)可能是您正在寻找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T09:20:30.407

对于 MySQL，`INT(11)`数据类型描述了一个简单的整数列，存储大小为 4 个字节（[参见此处](http://dev.mysql.com/doc/refman/5.0/en/integer-types.html)）。括号内的数字（`11`在您的情况下）只是整数类型列的最大显示宽度的指示（[请参见此处](http://dev.mysql.com/doc/refman/5.0/en/numeric-type-overview.html)）。

# php - 字符串分隔符ajax调用

> ID：10445839
> 
> 赞同：2
> 
> 时间：2012-05-04T09:03:17.333
> 
> 标签：php, javascript, ajax, string, delimiter

所以一个 PHP 文件返回一个字符串（到一个 ajax 调用），如下所示：

```
$output = $sessID."###".$sessEmail."###".$sessFirstName."###".$sessLanguage."###".$sessRememberMe; 
```

在javascript中我这样做：

```
 if (reply.indexOf("###") >= 0) {
    arrayReply = reply.split("###");
    user.ID = arrayReply[0];
    user.Email = arrayReply[1];
    user.FirstName = arrayReply[2];
    user.Language = arrayReply[3];
    user.RememberMe = arrayReply[4];
    } 
```

当部分回复包含我使用的分隔符“###”时，可能会出现问题。在这种情况下我能做什么？在我看来，使分隔符更复杂/更稀有并不是解决方案。

PS：我确实尝试过 JSON，但它的服务器端速度较慢。

最终编辑：

服务器端 JSON 速度较慢，客户端也是如此，但它不会成为瓶颈（100.000 次调用需要 430 毫秒），而且正如 Jules 所说，不需要重新发明轮子。还有一个解决方案：php 中的 bin2hex() [将时间从 430ms 减少到 240]，然后使用 hex2string 函数在 javascript 中取回字符串，但不值得付出努力。JSON 是。谢谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T09:15:34.340

如果如您所说的 JSON 编码比您可以尝试以下操作要慢，

```
$output = '"' . some_kind_of_escape_function($sessID).'","'.some_kind_of_escape_function($sessEmail).'","'.some_kind_of_escape_function($sessFirstName).'","'.some_kind_of_escape_function($sessLanguage).'","'.$sessRememberMe.'"'; 
```

当然，用适当的 php 函数（例如，addlashes 或 mysql_real_escape_string）替换 some_kind_of_escape_function 自从我完成 PHP 开发以来已经有一段时间了，所以选择最适合您需要的那个

然后是一个用逗号分割并去掉引号的简单案例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T09:08:37.817

一种选择是改用 JSON 对象。

对于 PHP（使用[json_encode](http://php.net/manual/en/function.json-encode.php)）：

```
$output = json_encode(array(
    "sessid" => $sessID,
    "sessEmail" => $sessEmail,
    "sessFirstName" => $sessFirstName,
    "sessLanguage" => $sessLanguage,
    "sessRememberMe" => $sessRememberMe
)); 
```

对于 JS（使用[jQuery 方法](http://api.jquery.com/jQuery.getJSON/)）：

```
$.getJSON("/path/to/script.php", function(reply) {
    user.ID = reply.sessid;
    user.Email = reply.sessEmail;
    user.FirstName = reply.sessFirstName;
    user.Language = reply.sessLanguage;
    user.RememberMe = reply.sessRememberMe;
}); 
```

否则，您可以使用在字段中可能找不到的任何其他分隔符（或者您可以在整个字段中替换它）。示例之一是使用换行符 ( `\n`) 的符号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T09:08:58.850

如果已经有一种格式，为什么还要开发自己的格式？使用 Json：

```
$output = json_encode(array('sessionID'=>$sessID,'sessionEmail'=>sessEmail,'sessionFirstName'=>$sessFirstName,'sessLanguage'=>$sessLanguage,'sessRememberMe'=>$sessRememberMe)); 
```

对于 Javsascript 方面，请参阅 [http://www.javascriptkit.com/dhtmltutors/ajaxgetpost4.shtml](http://www.javascriptkit.com/dhtmltutors/ajaxgetpost4.shtml) 或者如果您使用 JQuery 等，您的框架很可能具有某种内置功能，例如[http://api.jquery。 com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

但是，如果你想使用你的###-Delimiter，我建议你将它减少到只是“#”，为了简单和空间。之后引入所谓的转义字符，例如“\”，因此在预通行证中，您将解析输入并将所有出现的 # 替换为 #，在输出中反之亦然。然后，您可以使用特殊的正则表达式拆分您的字符串，该正则表达式仅按 # 拆分，而不是按“#”拆分

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T09:06:08.020

你可以使用json。

[http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

[如何在 JavaScript 中对数组元素进行 JSON 解码？](https://stackoverflow.com/questions/182410/how-to-json-decode-array-elements-in-javascript)

# facebook - 访问令牌是否过期？

> ID：10445848
> 
> 赞同：0
> 
> 时间：2012-05-04T09:03:52.627
> 
> 标签：facebook, facebook-javascript-sdk, oauth-2.0

我希望每个人都可以**在用户从 facebook 注销后**向朋友发送消息。

所以我保存了访问令牌，但是当我从 facebook 注销时，facebook 告诉我令牌已过期，因为用户已注销。

也许我必须请求一些特定的**许可**？我知道不推荐使用**offline_access**权限...那我该怎么办？

这是错误：

```
 "error": {
      "message": "Error invalidating access token: The session is invalid because the user logged out.",
      "type": "OAuthException",
      "code": 190,
      "error_subcode": 467
   } 
```

Ps 我正在使用 JS SDK，但我认为这没关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:10:45.043

您将不得不扩展您的访问令牌，看看这个：

[http://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/](http://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/)

Facebook参考如何处理offline_permissions：

[http://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/](http://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/)

你应该能够管理。

@Alexandre Couturon 参考资料：

如果您获得访问令牌客户端（JS SDK），您将获得一个短期令牌。您可以使用交换 oAuth 端点将此令牌交换为长期存在的令牌：

[https://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)

# r - 在R中将字符转换为数值

> ID：10445851
> 
> 赞同：6
> 
> 时间：2012-05-04T09:04:04.893
> 
> 标签：r, casting, dataframe

我有一个文件，我读入 R 并被转换为数据帧（称为 CA1）以具有如下结构：

```
 Station_ID Guage_Type   Lat   Long     Date Time_Zone Time_Frame H0 H1 H2 H3 H4 H5  H6  H7  H8  H9 H10 H11 H12 H13 H14 H15 H16 H17 H18 H19 H20 H21 H22 H23
 1    4457700         HI 41.52 124.03 19480701         8        LST  0  0  0  0  0  0   0   0   0   0   0   0 MIS MIS MIS MIS MIS MIS MIS MIS MIS MIS MIS MIS
 2    4457700         HI 41.52 124.03 19480705         8        LST  0  1  1  1  1  1   2   2   2   4   5   5   4   7   1   1   0   0  10  13   5   1   1   3
 3    4457700         HI 41.52 124.03 19480706         8        LST  1  1  1  0  1  1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
 4    4457700         HI 41.52 124.03 19480727         8        LST  3  0  0  0  0  0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
 5    4457700         HI 41.52 124.03 19480801         8        LST  0  0  0  0  0  0   0   0   0   0   0   0 MIS MIS MIS MIS MIS MIS MIS MIS MIS MIS MIS MIS
 6    4457700         HI 41.52 124.03 19480817         8        LST  0  0  0  0  0  0 ACC ACC ACC ACC ACC ACC   6   1   0   0   0   0   0   0   0   0   0   0 
```

H0 到 H23 被作为 character() 读入，因为在某些情况下该值不是数字，而是具有诸如 MIS、ACC 或 DEL 之类的值。

我的问题：有没有办法将每列 H0 到 H23 的值类型转换为数字并将字符值（MIS、ACC、DEL）作为 NA 或 NAN，如果它们是（is.nan 或is.na) 所以我可以在上面运行一些数字模型。还是最好将字符值更改为标识符，例如 -9999？

我尝试了很多方法。我在这个网站上找到了一些，但没有工作。如：

```
 for (i in 8:31)
 {
     CA1[6,i] <- as.numeric(as.character(CA1[6,i]))
 } 
```

这当然会发出警告，但是当我测试两个特定值 is_numeric() (CA1[6,8] 和 CA1[6,19]) 时，我得到了一个错误的陈述。第一个我不明白为什么，但第二个我明白，因为它是一个“”。但是，我可以用 is.na(CA1[6,19]) 测试它并返回 true，这对我来说很好知道它不是数字。

我尝试的第二种方法是：

```
 for (i in 8:31)
 {
     CA1[6,i] <- as.numeric(levels(CA1[6,i]))[CA1[6,i]]
 } 
```

我得到与以前相同的结果。

有没有办法以有效的方式做我想做的事情？非常感谢您的帮助。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T09:13:26.667

读入数据时，通常可以指定列类型。例如，`read.table`/`read.csv`有一个`colClasses`参数。

```
# Something like this
read.table('foo.txt', header=TRUE, colClasses=c('integer', 'factor', 'numeric', numeric', 'Date')) 
```

有关`?read.table`更多信息，请参阅。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-04T09:18:11.133

直接的问题是数据框的每一列只能包含一种类型的值。代码中的`6`in`CA1[6,i]`表示每列中只转换一个值，因此，在转换后插入它时，必须将其强制转换回字符串以匹配该列的其余部分。

您可以通过一次性转换整个列来解决此问题，以便完全替换该列。即删除`6`：

```
 for (i in 8:31)
 {
     CA1[,i] <- as.numeric(as.character(CA1[,i]))
 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T10:27:01.600

按照汤米的回答，您可能会在读取数据时处理此问题。如果并且总是表示缺失值，您可以使用 中`"MIS"`的参数。`"ACC"``"DEL"``na.strings``read.table`

```
read.table('foo.txt', header=TRUE, na.strings = c("MIS", "ACC", "DEL")) 
```

如果还有其他字符串总是表示缺失值，那么您可以将它们添加到上述向量中。

但是，例如，如果`"MIS"`出现在列中`Time_Frame`并且它的含义不是表示缺失值，那么不要采取这种方法！

# java - 不容易将签名切换到基类？

> ID：10445852
> 
> 赞同：-1
> 
> 时间：2012-05-04T09:04:09.630
> 
> 标签：java, rmi, nosuchmethoderror

我有一个 RMI 服务，它提供以下方法：

```
ArrayList<T> save(ArrayList<T> saveList) throws RemoteException; 
```

我想将其签名更改为：

```
Collection<T> save(Collection<T> saveList) throws RemoteException; 
```

这不会导致编译错误，所以一切似乎都很好。但是当客户端应用程序尝试执行该方法时，我得到以下异常。我没有更改调用者，这意味着该方法仍然使用`ArrayList`.

```
java.lang.NoSuchMethodError: com/IDatabaseDao.sync(Ljava/util/ArrayList;)Ljava/util/ArrayList; 
```

我不知道 RMI 的详细工作原理，但似乎找不到该方法，因为它没有预期的字符串表示形式？真的吗？所以我必须在这里改变所有来电者，还是有更好的方法？

这似乎很容易出错，因为我在这里没有编译错误。是否有识别此类问题的工具，也许是 Eclipse 插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T09:27:48.453

我的理解是，由于参数类型不同，以下是不同的方法声明：

```
ArrayList<T> save(ArrayList<T> saveList) throws RemoteException;
Collection<T> save(Collection<T> saveList) throws RemoteException; 
```

您可以尝试将这两种方法放在 Eclipse 中的一个类中，IDE 不会给出任何编译错误，这可以很好地表明我的观点是正确的。

Java RMI 只会远程调用必须与客户端有相同声明的方法。他们没有那么聪明地发现你在做什么，然后给出一个 NoSuchMethodError。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T09:13:47.487

错误信息很清楚：没有找到这样的方法。这是因为该方法不仅由其名称定义，还由参数和返回类型定义。您实际上删除了一种方法并创建了另一种方法。

您必须在此处更改呼叫者。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-04T10:34:01.150

您已经更改了服务器端而没有更新客户端。你不能那样做。您需要将更改的远程接口和存根（如果有）部署到客户端，并重新编译任何受影响的客户端代码并重新部署它。

# json - 如何在 sencha touch 中使用 json 代理调用 Web 服务？

> ID：10445857
> 
> 赞同：0
> 
> 时间：2012-05-04T09:04:30.973
> 
> 标签：json, web-services, proxy, sencha-touch

我也是 sencha touch 和 Web 服务的新手。我有一个 json 文件，我使用它来填充我的屏幕，如下所示：

```
proxy:{
       type:'ajax',
       url:'data/messages.json',

        reader:
        {
            type:'json',
            rootProperty:'alerts'
        }
    } 
```

这对我来说很好。但是当我尝试做同样的网络服务时，我在控制台上得到了这个：

> 选项 http://{server}/aosmobile/alerts?_dc=1336122076647&page=1&start=0&limit=25 404（未找到）
> 
> XMLHttpRequest 无法加载 http://{server}/aosmobile/alerts?_dc=1336122076647&page=1&start=0&limit=25。Access-Control-Allow-Origin 不允许来源[http://localhost:8080 。](http://localhost:8080)

我使用这种方法来实现相同的目的：

```
proxy:{

        type:'rest',
        url:'http://{server}/aosmobile/alerts',
        headers: {                
            'Accept' : 'application/json'                 
        },
        reader:
        {
            type:'json',
            rootProperty:'alerts'
        }
    } 
```

url 已部署。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T11:10:08.217

看来您正在执行跨域请求。以下代理定义可能会有所帮助：

```
proxy:{
    type:'scripttag',
    url:'http://{server}/aosmobile/alerts',
    reader:
    {
        type:'jsonp',
        rootProperty:'alerts'
    }
} 
```

# hibernate - 未知枚举常量 javax.persistence.CascadeType.DETACH

> ID：10445860
> 
> 赞同：2
> 
> 时间：2012-05-04T09:04:48.743
> 
> 标签：hibernate, spring-mvc, hibernate-mapping

在我的域代码中：

```
@ManyToMany(mappedBy = "xyz", cascade = {CascadeType.MERGE, CascadeType.PERSIST, CascadeType.DETACH})
@Cascade(org.hibernate.annotations.CascadeType.SAVE_UPDATE)
private Set<xyzGroup> groups = new HashSet<xyzGroup>(); 
```

当我尝试构建我的项目（使用 maven 包）时，出现以下异常。

```
in class file (xyz.class) : unknown enum constant javax.persistence.CascadeType.DETACH 
```

为什么会发生这种类型的异常？

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T09:16:22.297

`CascadeType.DETACH`在 JPA 2.0 中添加。确保您的 Hibernate 版本是 3.5 或更高版本，并且您的类路径中没有 JPA 1.0 jar（运行`mvn dependency:tree -Dverbose`以检查它）。

# c# - 上传时验证大文件

> ID：10445861
> 
> 赞同：35
> 
> 时间：2012-05-04T09:04:53.137
> 
> 标签：c#, asp.net, validation, file-upload, asp.net-mvc-2

我正在使用 c# MVC 2 和 ASP.NET。我的一个表单包括一个文件输入字段，允许用户选择任何文件类型，然后将其转换为 blob 并保存到数据库中。我的问题是，每当用户选择的文件超过一定数量的 Mb（大约 8）时，我都会收到一个页面错误，内容如下：

```
The connection was reset
The connection to the server was reset while the page was loading. 
```

我不介意用户上传的文件有 8Mb 的限制，但是我需要阻止当前错误的发生并显示正确的验证消息（最好使用 ModelState.AddModelError 函数）。有谁能够帮我？在页面中发生其他任何事情之前，我似乎无法“捕获”错误，因为它发生在它到达控制器内的上传功能之前。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-05-04T09:38:06.117

一种可能性是编写自定义验证属性：

```
public class MaxFileSizeAttribute : ValidationAttribute
{
    private readonly int _maxFileSize;
    public MaxFileSizeAttribute(int maxFileSize)
    {
        _maxFileSize = maxFileSize;
    }

    public override bool IsValid(object value)
    {
        var file = value as HttpPostedFileBase;
        if (file == null)
        {
            return false;
        }
        return file.ContentLength <= _maxFileSize;
    }

    public override string FormatErrorMessage(string name)
    {
        return base.FormatErrorMessage(_maxFileSize.ToString());
    }
} 
```

然后你可以有一个视图模型：

```
public class MyViewModel
{
    [Required]
    [MaxFileSize(8 * 1024 * 1024, ErrorMessage = "Maximum allowed file size is {0} bytes")]
    public HttpPostedFileBase File { get; set; }
} 
```

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View(new MyViewModel());
    }

    [HttpPost]
    public ActionResult Index(MyViewModel model)
    {
        if (!ModelState.IsValid)
        {
            // validation failed => redisplay the view
            return View(model);
        }

        // the model is valid => we could process the file here
        var fileName = Path.GetFileName(model.File.FileName);
        var path = Path.Combine(Server.MapPath("~/App_Data/uploads"), fileName);
        model.File.SaveAs(path);

        return RedirectToAction("Success");
    }
} 
```

和一个观点：

```
@model MyViewModel

@using (Html.BeginForm(null, null, FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.TextBoxFor(x => x.File, new { type = "file" })
    @Html.ValidationMessageFor(x => x.File)
    <button type="submit">OK</button>
} 
```

现在当然要让它工作，您必须将 web.config 中允许的最大上传文件大小增加到足够大的值：

```
<!-- 1GB (the value is in KB) -->
<httpRuntime maxRequestLength="1048576" /> 
```

对于 IIS7：

```
<system.webServer>
    <security>
        <requestFiltering>
           <!-- 1GB (the value is in Bytes) -->
            <requestLimits maxAllowedContentLength="1073741824" />
        </requestFiltering>
    </security>
</system.webServer> 
```

我们现在可以将我们的自定义验证属性更进一步，并启用客户端验证以避免浪费带宽。当然，上传前验证文件大小只能使用[HTML5 File API](https://developer.mozilla.org/en/Using_files_from_web_applications#Getting_information_about_selected_files)。因此，只有支持此 API 的浏览器才能利用它。

所以第一步是让我们的自定义验证属性实现[IClientValidatable](http://msdn.microsoft.com/en-us/library/system.web.mvc.iclientvalidatable.aspx)接口，这将允许我们在 javascript 中附加一个自定义适配器：

```
public class MaxFileSizeAttribute : ValidationAttribute, IClientValidatable
{
    private readonly int _maxFileSize;
    public MaxFileSizeAttribute(int maxFileSize)
    {
        _maxFileSize = maxFileSize;
    }

    public override bool IsValid(object value)
    {
        var file = value as HttpPostedFileBase;
        if (file == null)
        {
            return false;
        }
        return file.ContentLength <= _maxFileSize;
    }

    public override string FormatErrorMessage(string name)
    {
        return base.FormatErrorMessage(_maxFileSize.ToString());
    }

    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        var rule = new ModelClientValidationRule
        {
            ErrorMessage = FormatErrorMessage(_maxFileSize.ToString()),
            ValidationType = "filesize"
        };
        rule.ValidationParameters["maxsize"] = _maxFileSize;
        yield return rule;
    }
} 
```

剩下的就是配置自定义适配器：

```
jQuery.validator.unobtrusive.adapters.add(
    'filesize', [ 'maxsize' ], function (options) {
        options.rules['filesize'] = options.params;
        if (options.message) {
            options.messages['filesize'] = options.message;
        }
    }
);

jQuery.validator.addMethod('filesize', function (value, element, params) {
    if (element.files.length < 1) {
        // No files selected
        return true;
    }

    if (!element.files || !element.files[0].size) {
        // This browser doesn't support the HTML5 API
        return true;
    }

    return element.files[0].size < params.maxsize;
}, ''); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T09:46:07.173

您可以增加 web.config 中某些 url 的请求最大长度：

```
<location path="fileupload">
  <system.web>
    <httpRuntime executionTimeout="600" maxRequestLength="10485760" />
  </system.web>
</location> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-04T09:31:21.210

我用谷歌搜索了一下，想出了以下两个 URL，它们似乎表明这个问题或异常最好在 Global.asax 中的应用程序错误事件中处理。

1.  [捕获“超出最大请求长度”](https://stackoverflow.com/questions/665453/catching-maximum-request-length-exceeded)
2.  [如何处理“超出最大请求长度”异常](http://www.velocityreviews.com/forums/t97027-how-to-handle-maximum-request-length-exceeded-exception.html)

# c# - ListView.SelectedItems 未显示所选项目

> ID：10445870
> 
> 赞同：-6
> 
> 时间：2012-05-04T09:05:31.607
> 
> 标签：c#

> **可能重复：**
> [ListView.SelectedItems 显示 0 个选中](https://stackoverflow.com/questions/10411620/listview-seleccteditems-shows-0-selected)

好的..让我以更好的方式解释我的要求很简单，因为它出现在我的计算机资源管理器中实现了Tree节点控件和Listview控件。我需要的是我将在列表视图中选择一个节点和一个对象，然后单击另一种`Listview.Selecteditems`显示为 0 的形式的按钮。如何克服？我觉得它显示 0 bcoz 列表视图正在失去焦点

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T09:18:07.063

将[ListView.HideSelection](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.hideselection.aspx)属性设置为`false`。在该列表视图之后，如果控制失去焦点，则保留选定的项目。

# ruby - Ruby - Rails - 类型错误

> ID：10445871
> 
> 赞同：0
> 
> 时间：2012-05-04T09:05:34.653
> 
> 标签：ruby, ruby-on-rails-3

类型错误是什么意思？我正在从带有`SELECT`语句的表中读取一个值，并使用该值传递给一个方法。

```
 a = Item.select("value").where("item.value LIKE :posted_data",{:posted_data => params[:posted_data]})
    @h = Issue.ask(xyz, abc, a[:value]) 
```

TypeError (can't convert Symbol into Integer): 我试过`a`, `a[:value]`, `a[:value].to_s`. 一切都没有奏效。

```
puts a.to_s
#<ActiveRecord::Relation:0xa898ba4> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:23:08.900

采用：`a.first[:value]`

这是因为'a'在这种情况下是一个关系，它可以包含多个项目。

# c# - 如何区分 Outlook 2010 中的内联图像和附件 [C#]

> ID：10445892
> 
> 赞同：5
> 
> 时间：2012-05-04T09:06:41.937
> 
> 标签：c#, outlook-addin, msdn, mailitem

嗨，我必须使用 C# 从 Outlook 2010 的本地目录中分别读取附件和内联图像。我为此使用了属性和内容 ID 概念。我正在使用以下代码来执行此操作，但它现在正在工作。

```
if (mailItem.Attachments.Count > 0)
{
    /*for (int i = 1; i <= mailItem.Attachments.Count; i++)
    {
    string filePath = Path.Combine(destinationDirectory, mailItem.Attachments[i].FileName);
    mailItem.Attachments[i].SaveAsFile(filePath);
    AttachmentDetails.Add(filePath);
    }*/

    foreach (Outlook.Attachment atmt in mailItem.Attachments)
    {
        MessageBox.Show("inside for each loop" );
        prop = atmt.PropertyAccessor;
        string contentID = (string)prop.GetProperty(SchemaPR_ATTACH_CONTENT_ID);
        MessageBox.Show("content if is " +contentID);

        if (contentID != "")
        {
            MessageBox.Show("inside if loop");
            string filePath = Path.Combine(destinationDirectory, atmt.FileName);
            MessageBox.Show(filePath);
            atmt.SaveAsFile(filePath);
            AttachmentDetails.Add(filePath);
        }
        else
        {
            MessageBox.Show("inside else loop");
            string filePath = Path.Combine(destinationDirectoryT, atmt.FileName);
            atmt.SaveAsFile(filePath);
            AttachmentDetails.Add(filePath);
        }
    }
} 
```

请帮助正在进行的工作....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-04T02:16:00.840

我来这里是为了寻找解决方案，但不喜欢在整个 HTMLBody 中搜索“cid:”的想法。首先，对每个文件名都这样做很慢，其次，如果正文中出现“cid:”，我会得到误报。此外，在 HTMLBody 上执行 ToLower() 也不是一个好主意。

相反，我最终在 HTMLBody 上使用了一个正则表达式来查找 <img> 标记的任何实例。因此，无法在正文中错误地匹配“cid:”（尽管这不太可能）。

```
 Regex reg = new Regex(@"<img .+?>", RegexOptions.Singleline | RegexOptions.CultureInvariant | RegexOptions.IgnoreCase);
     MatchCollection matches = reg.Matches(mailItem.HTMLBody);

     foreach (string fileName in attachments.Select(a => a.FileName)
     {
        bool isMatch = matches
           .OfType<Match>()
           .Select(m => m.Value)
           .Where(s => s.IndexOf("cid:" + fileName, StringComparison.InvariantCultureIgnoreCase) >= 0)
           .Any();

        Console.WriteLine(fileName + ": " + (isMatch ? "Inline" : "Attached"));
     } 
```

我很确定我可以编写一个正则表达式来仅返回文件名，并且它可能会更有效。但我宁愿为那些必须维护代码的非正则表达式专家的可读性而付出额外的费用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-28T09:50:10.893

这对我有用 - 检查附件名称是否存在于电子邮件的 HTMLBody 中

VB.NET

```
<i>
For Each oAttachment In m_olMailItem.Attachments 
If m_olMailItem.HTMLBody.ToLower.Contains("cid:" & oAttachment.FileName) = True Then 
   Msgbox("Embedded")

Else 
   Msgbox("Not Embedded ! ")

End if 
```

[http://www.outlookforums.com/threads/44155-detecting-if-attachement-is-embedded-or-not/](http://www.outlookforums.com/threads/44155-detecting-if-attachement-is-embedded-or-not/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-09T14:58:59.290

我知道这是一个老问题，但答案可能对某人有所帮助。

```
 using Attachment = MsgReader.Outlook.Storage.Attachment;

    foreach (Attachment attachment in mailItem.Attachments.Where(a => ((Attachment)a).Hidden == false)) {
      // do whatever you want with the 'real' attachments.
    } 
```

# c++ - 暂停时编辑轨迹栏值

> ID：10445898
> 
> 赞同：0
> 
> 时间：2012-05-04T09:07:18.960
> 
> 标签：c++, opencv

在下面的代码中，我创建了一个循环，它一直运行直到按下“q”。我正在使用轨迹栏设置 2 个变量。但是，我想在运行此循环之前创建某种暂停来设置这些轨迹栏。但是 getch() 函数会冻结整个程序，直到我按下一个键并且不允许我编辑轨迹栏。是否可以创建某种允许我编辑轨迹栏的暂停？

```
int main(int argc, const char * argv[])
{
    cvNamedWindow("test image", CV_WINDOWS_AUTOSIZE);
    cvCreateTrackbar("subject", "test image", &subjectID, 40, NULL);
    cvCreateTrackbar("subject", "test image", &photoID, 10, NULL);
    ...
    <some more code>
    ...

    while(key != 'q')
    {
        cout << "set trackbars and press enter";
        getch()
        ...
        <and more code>
        ...
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T08:01:09.813

另一个 while 循环和 cv::waitKey() 应该可以解决问题。

```
cout << "set trackbars and press enter"; //you might want to put this inside the loop
while (true) {
            int c = waitKey(10);
            if( c == 13) { break; } 
        }

while(key != 'q')
{
    ...
    /*all your code*/
    ...
} 
```

# java - 传入参数的字符串

> ID：10445902
> 
> 赞同：0
> 
> 时间：2012-05-04T09:07:24.357
> 
> 标签：java, jna

我对 JNA 有点问题。

我的代码：

标题 c：

```
#ifndef IOPROTOCOL_H_INCLUDED
#define IOPROTOCOL_H_INCLUDED

typedef signed char INT8;
typedef short       INT16;
typedef int         INT32;
typedef unsigned char  UINT8;
typedef unsigned short UINT16;
typedef unsigned int   UINT32;

/* Types d'IO */
typedef enum { IOT_U1, IOT_U2, IOT_U8, IOT_I8, IOT_U16, IOT_I16, IOT_U32, IOT_I32, IOT_F32, IOT_STRING, IOT_MAX } IoTypeE;

typedef union {
    INT32  i;
    UINT32 u;
    float  f;
    char * s;
} Value;

typedef struct {
    int (*Read) (char *rxbuf, int rxlen, UINT8 interTo);
    int (*Write) (char *txbuf,int txlen);
    int (*FunctionResponse) (int address, Value value, IoTypeE type);
    int (*SendTraceRoute) (char * trace);
} DeviceFuncT;

    int readTrame( DeviceFuncT *deviceFunct, UINT32 function, UINT32 address, UINT32 countAddress, UINT32 slave, UINT32 type);
    int writeTrame(DeviceFuncT *deviceFunct, UINT32 function, UINT32 address, Value value, UINT32 type, UINT32 slave);

#endif // IOPROTOCOL_H_INCLUDED 
```

DeviceFuncT 是用 Java 创建的，并在函数 readTrame 或 writeTrame 中传入参数。

我调用 C(since dll ^^) DeviceFuncT->(*Read) (char *rxbuf, int rxlen, UINT8 interTo);

在java中，

```
 public static interface ReadFunct extends com.sun.jna.Callback{
        int invoke(String rxbuf, int rxlen, byte interto);
    } 
```

所以`char* rxbuf == String rxbu`f

在完成函数之前，我必须在 Java 中处理 rxbuf，之后，我处理 rxbux en C，但我没有在 C 中的函数中设置 Java 中的值...

你能帮忙解决这个问题吗？请 ：）。

对不起我的解释。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T16:31:45.337

仅`String`当您的本机类型为`const char *`（只读 C 字符串）时才应使用。如果您的原生类型实际上是原生端写入的缓冲区，则`com.sun.jna.Memory`在从 Java 调用原生代码以及`Pointer`在回调中从原生代码接收数据时，您需要使用原始数组或 NIO 直接缓冲区。

由于您在回调中使用它，因此参数必须是 type `Pointer`。然后，您可以使用各种`Pointer`访问方法从内存中读取或写入。

您不能`java.nio.Buffer`在回调中使用原始数组，因为本机代码无法构造这些对象，并且`String`不合适，因为您无法更改 Java 的内容`String`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-05T04:33:24.720

不需要在java中更改参数，这会传递一个String。您必须更改 c 中的代码才能接收没有指针的字符串。

```
Int invoke (String rxbuf, int rxlen, int byte) {
Char Newrxbuf [200];
    Strcpy (Newrxbuf, rxbuf.t_str ());
} 
```

`.t_str()`适用于builder c ++ 2010，但可以将字符串转换为`char *`其他版本的c

# ruby - 我无法从 nokogiri 节点内容中删除空格

> ID：10445905
> 
> 赞同：1
> 
> 时间：2012-05-04T09:07:46.770
> 
> 标签：ruby, string, nokogiri

代码：

```
digits.each do |digit|
  puts digit.content #&0000000000032056.00000032 056
  value = digit.content[24..-1].strip
  puts value #32 056 it's ok
  puts value.gsub(/\s+/, "") #32 056 !!!! I expected 32056
  population << value
end 
```

我不明白为什么 gsub 不能按我的预期工作：/ 有人可以帮忙吗？

**[编辑]**

无论如何，我用另一种方式做：

```
 value = digit.content.split(".")[0]
  value = value[12..-1].strip 
```

但我仍然想知道，为什么第一个解决方案很糟糕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T06:27:17.217

拿走你需要的！

```
value.gsub(/[^0-9]+/, '') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T09:20:33.437

```
digit='&0000000000032056.00000032 056'
value = digit[24..-1].strip
puts value #32 056
puts value.gsub(/\s+/, "") #32056 
```

你的值是字符串吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T09:24:56.077

有两件事要尝试：

如果您正在检查`population`变量，则您的方法实际上并没有将替换放入其中。将最后一行更改为：

```
population << value.gsub(/\s+/, "") 
```

如果这仍然不起作用，也许在您的终端中有一些看起来像空格的非空格字符？尝试替换非数字：

```
population << value.gsub(/\D/, "") 
```

# javascript - 数字和浮点验证不成功

> ID：10445907
> 
> 赞同：0
> 
> 时间：2012-05-04T09:07:57.590
> 
> 标签：javascript

我有一个验证函数（只接受整数和浮点数）

```
function isNumeric(prodFilterValue)
{
    if((parseFloat(prodFilterValue) == parseInt(prodFilterValue)) && !isNaN(prodFilterValue))
    {
        alert('numeric');       
        alert('hahahahhahaha');
        $("#valuetxt1").css('background-color', 'white');           

    }
    else
    {
        alert('HIIIIIIIIIII');
        $("#valuetxt1").css('background-color', 'grey');
    }

    return prodFilterValue;
} 
```

现在的问题是..当验证0.1时它会说它不是数字..假设它是数字..当我提出另一个条件时

```
if((parseFloat(prodFilterValue) == parseInt(prodFilterValue)) && !isNaN(prodFilterValue) || (prodFilterValue % 1 !=0)) 
```

它将验证 1A 为数字

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T09:27:42.820

您可以检查它是否是数字，然后是浮点数或整数。

```
function checkNumber(numb1)
{
  numb1 += "";   // to handle boolean when true / false is passed
  if(numb1.length == 0) return false; // to handle empty string like checkNumber("")

  if(isNaN(numb1))
      alert("It is a number");
  else
      alert("It is not a number");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T09:09:41.543

使用数字转换检查它：

```
 !isNaN(Number([value]));
 // e.g.
 isNumber = !isNaN(Number('.3421')); //=> true
 isNumber = !isNaN(Number('nonumber.3421')); //=> false
 isNumber = !isNaN(Number('1500032')); //=> true
 // you can also just use the conversion 
 isNumber = Number('.3421'); //=> 0.3421
 isNumber = Number('nonumer.3421'); //=> NaN
 if (!isNumber) { /*...*/ }
 // a hidden goodie: Number automatically trims the parameter
 isNumber = Number('    .3421 ');   //=> 0.3421
 isNumber = Number('    .3421 \n'); //=> 0.3421 
```

应用于您的功能：

```
function isNumeric(prodFilterValue,thousandsDelim) {
  prodFilterValue = Number(prodFilterValue);
  return prodFilterValue 
            ? (alert('yeah!'), prodFilterValue) 
            : (alert('no sir'), false);
} 
```

此外`isNaN([value])`，对 应用了隐式数字转换`[value]`，因此您也可以使用它。

请记住`Number('')`, `Number(null)`or `Number('\t\n ')`all 评估为 0 并 `Number(true)`评估为 1。因此，要完整，您必须进行额外的检查。就像是：

```
function isNumeric(prodFilterValue) {
    prodFilterValue = prodFilterValue && 
                      /stri/i.test(typeof prodFilterValue) && 
                      prodFilterValue.replace(/^\s+|\s+$/,'').length 
                       ? Number(prodFilterValue) 
                       : undefined;
    return prodFilterValue && prodFilterValue !== 0
            ? (alert('yeah!'), prodFilterValue) 
            : (alert('no sir'), false);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T09:14:04.287

那是因为`parseInt`and`parseFloat`会丢弃数字后面的任何字母，并解析`4K`为`4`. 添加一个附加条件：`isFinite(prodFilterValue)`应该可以处理这些情况。

`parseInt`并且`parseFloat`仅在第一个字符无法转换为数字时才返回 NaN。

但请注意，它`parseInt`也处理像十六进制这样的值：

```
parseInt("0xF"); // 15 
```

# android - 为什么动画drawable没有出现

> ID：10445909
> 
> 赞同：0
> 
> 时间：2012-05-04T09:08:05.997
> 
> 标签：android, xml, animation, layout, drawable

我想从 14 个 png 图像创建动画 drawable。我将 14 个图像添加到所有可绘制文件夹中，并创建了一个如下所示的动画列表，但没有出现，这是什么问题？

圈子.xml：

```
<animation-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/f1" android:duration="50" />
    <item android:drawable="@drawable/f2" android:duration="50" />
    <item android:drawable="@drawable/f3" android:duration="50" />
    <item android:drawable="@drawable/f4" android:duration="50" />
    <item android:drawable="@drawable/f5" android:duration="50" />
    <item android:drawable="@drawable/f6" android:duration="50" />
    <item android:drawable="@drawable/f7" android:duration="50" />
    <item android:drawable="@drawable/f8" android:duration="50" />
    <item android:drawable="@drawable/f9" android:duration="50" />
    <item android:drawable="@drawable/f10" android:duration="50" />
    <item android:drawable="@drawable/f11" android:duration="50" />
    <item android:drawable="@drawable/f12" android:duration="50" />
    <item android:drawable="@drawable/f13" android:duration="50" />
    <item android:drawable="@drawable/f14" android:duration="50" />
</animation-list> 
```

布局xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/btnStart"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Start" />

    <ImageView
        android:id="@+id/imgCircle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

爪哇代码：

```
package pit.opensource.animation;

import android.app.Activity;
import android.graphics.drawable.AnimationDrawable;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;

public class CircleAnimationActivity extends Activity {
    /** Called when the activity is first created. */
    Button btnStart;
    ImageView imgCircle;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        btnStart = (Button)findViewById(R.id.btnStart);
        imgCircle = (ImageView) findViewById(R.id.imgCircle);
        imgCircle.setBackgroundResource(R.drawable.circle);

        AnimationDrawable ani = (AnimationDrawable) imgCircle.getBackground();
        ani.start();
        btnStart.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                //  ani.start();

            }
        });

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-17T09:50:00.830

可能还有第三个原因。

第一个原因是***OutOfMemoryError***。您需要压缩图像。

[解决方案](https://stackoverflow.com/questions/8692328/causing-outofmemoryerror-in-frame-by-frame-animation-in-android)

第二个原因是你的 circle.xml 中的***android:oneshot***参数。该动画仅运行 14 帧。通过将列表的 android:oneshot 属性设置为 true，它将只循环一次然后停止并保持在最后一帧。如果设置为 false，则动画将循环播放。

改变

```
<animation-list xmlns:android="http://schemas.android.com/apk/res/android"> 
```

和

```
<animation-list xmlns:android="http://schemas.android.com/apk/res/android" android:oneshot="true"> 
```

第三个原因是在 Activity 的 onCreate() 方法期间无法调用 AnimationDrawable 上调用的***start()方法，因为 AnimationDrawable 尚未完全附加到窗口。***

使用以下代码更改您的 MainActivity.java：

```
package pit.opensource.animation;

import android.app.Activity;
import android.graphics.drawable.AnimationDrawable;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;

public class CircleAnimationActivity extends Activity {

    Button btnStart;
    ImageView imgCircle;
    AnimationDrawable ani;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        imgCircle = (ImageView) findViewById(R.id.imgCircle);
        imgCircle.setBackgroundResource(R.drawable.circle);

        ani = (AnimationDrawable) imgCircle.getBackground();

        addListenerOnButton();
    }

    public void addListenerOnButton() {

        btnStart = (Button)findViewById(R.id.btnStart);

        btnStart.setOnClickListener(new OnClickListener() {

            public void onClick(View arg0) {

                ani.start();

            }

        });

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T09:19:36.550

背景应该是动画，你应该把circle.xml放到res/anim中，然后改变

```
imgCircle.setBackgroundResource(R.drawable.circle); 
```

至

```
imgCircle.setBackgroundResource(R.anim.circle); 
```

尝试以下代码来启动动画

```
 imgCircle.post(new Runnable() {
        @Override
        public void run() {
            AnimationDrawable ani = (AnimationDrawable) imgCircle.getBackground();
            ani.start();
        }
    }); 
```

或实现将动画开始移动到 onWindowFocusChanged

```
public void onWindowFocusChanged(boolean flag) {
    super.onWindowFocusChanged(flag);
    AnimationDrawable anim = (AnimationDrawable) imgCircle.getBackground();
    anim.start();
} 
```

# objective-c - 为什么当我想顺时针旋转时，我的旋转只会逆时针旋转？

> ID：10445912
> 
> 赞同：12
> 
> 时间：2012-05-04T09:08:14.447
> 
> 标签：objective-c, ios, core-animation

```
[CATransaction begin];
            [CATransaction setAnimationDuration:5];
            CGAffineTransform currentTransform = squareLayer.affineTransform;
            CGFloat angle = M_PI;

            squareLayer.affineTransform = CGAffineTransformRotate(currentTransform, angle);
            [CATransaction commit]; 
```

和

```
[CATransaction begin];
            [CATransaction setAnimationDuration:5];
            CGAffineTransform currentTransform = squareLayer.affineTransform;
            CGFloat angle = (M_PI * -1);

            squareLayer.affineTransform = CGAffineTransformRotate(currentTransform, angle);
            [CATransaction commit]; 
```

我原以为-1会改变方向，但显然不是？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-04T09:11:26.543

角度是一样的。要走一圈，你需要 2 * Pi，所以半圈是 Pi。如果您使用 -Pi，它将在同一点结束。

编辑：如果你需要让它顺时针转动，你可以稍微偏离-Pi。例如，使用 -3.141593 代替 -M_PI。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-06-24T21:14:40.187

刚刚遇到这个问题，虽然@radicalraid 的解决方案运行良好，但我更喜欢在旋转之前调整起始角度，而不是旋转到小于所需终点的角度。此外，您可以`CALayer`使用动画块为变换设置动画。

我的代码：

```
// iOS will rotate the shortest distance to the end angle,
// using counter-clockwise if equal.
// Force the rotation to open clockwise and close counter-clockwise by bumping
// the initial angle
CGFloat startRadians, endRadians;
if (isOpening) {
    startRadians = 0.01f;
    endRadians = M_PI;

}
else {
    startRadians = M_PI - 0.01f;
    endRadians = 0.0f;
}

self.myImageView.layer.affineTransform = CGAffineTransformMakeRotation(startRadians);

[UIView animateWithDuration:0.3f
                 animations:^{
                     self.myImageView.layer.affineTransform = CGAffineTransformMakeRotation(endRadians);
                 }]; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-05T20:52:50.517

我对 Core animatinon 的体验与 Apple 的引用不符。我发现唯一重要的是最终角度值。正 pi 和负 pi 旋转产生相同的变换矩阵，因此系统无论如何都会逆时针旋转。

我所做的以特定方向旋转或完整 360 度旋转是使用像 transform.rotation.z 这样的类型创建显式 CABasicAnimation，填充模式设置为 kCAFillModeForwards，并且只提供一个 toValue . 这会导致动画从前一个值开始。然后，您可以设置一个轮换，该轮换占您所需的总轮换的偶数部分，并给它一个重复计数。

例如，下面的代码创建了一个旋转 5 个四分之一圈或 450 度的动画。如果你想顺时针旋转 180 度，你可以旋转 pi/2，重复计数为 2。对于逆时针，使用 -pi/2，重复计数为 2。

```
 CABasicAnimation* rotate =  [CABasicAnimation animationWithKeyPath: 
    @"transform.rotation.z"];
  rotate.removedOnCompletion = FALSE;
  rotate.fillMode = kCAFillModeForwards;

  //Do a series of 5 quarter turns for a total of a 1.25 turns
  //(2PI is a full turn, so pi/2 is a quarter turn)
  [rotate setToValue: [NSNumber numberWithFloat: -M_PI / 2]];
  rotate.repeatCount = 5;

  rotate.duration = duration/rotate.repeatCount * 2 ;
  rotate.beginTime = start;
  rotate.cumulative = TRUE;
  rotate.timingFunction = [CAMediaTimingFunction 
    functionWithName:kCAMediaTimingFunctionLinear]; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-07-06T06:16:41.953

编辑：而不是 -M_PI 使用 -3 * M_PI，逆时针

并删除相反方向的“-”符号。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-04T09:17:00.637

看看这个先前的问题：[Force 顺时针/逆时针旋转 UIImageView](https://stackoverflow.com/questions/3470082/force-clockwise-anticlockwise-rotation-for-a-cabasicanimation-of-a-uiimageview)的 CABasicAnimation 代码有点不同，但它确实有效。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-04T09:20:56.567

这是来自苹果文档的引用“在 iOS 中，正值指定逆时针旋转，负值指定顺时针旋转。” 您是否尝试过这样做：

```
squareLayer.affineTransform = CGAffineTransformRotate(currentTransform, -M_PI); 
```

这就是我过去所做的所有顺时针旋转。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-03-15T21:10:42.953

这是我用来使其始终顺时针`if endAngle > startAngle`和逆时针旋转的功能`if startAngle > endAngle`。（例如动画不应该“越过 2*pi 线”）

```
private func rotate(view: UIView, from startAngle: CGFloat, to endAngle: CGFloat) {
    let midAngle = (startAngle.truncatingRemainder(dividingBy: 2 * .pi) + endAngle.truncatingRemainder(dividingBy: 2 * .pi)) / 2

     UIView.animateKeyframes(withDuration: UIView.inheritedAnimationDuration, delay: 0, options: .calculationModeCubicPaced, animations: {
        UIView.addKeyframe(withRelativeStartTime: 0, relativeDuration: 0) {
            view.transform = CGAffineTransform(rotationAngle: midAngle)
        }
        UIView.addKeyframe(withRelativeStartTime: 0, relativeDuration: 0) {
            view.transform = CGAffineTransform(rotationAngle: endAngle)
        }
    }, completion: nil)
} 
```

您可以从另一个 UIView.animate 块内部调用它，以使用其他东西对其进行动画处理。例如：

```
UIView.animate(withDuration: 1) {
   rotate(view: view, from: .pi * 0.25, to: 1.5 * .pi)
   otherView.alpha = 1
} 
```

使用该`.calculationModeCubicPaced`选项很重要，否则您必须手动指定相对开始时间和持续时间

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-02-26T15:04:50.673

同意 Duncan 和 XJones 的观点。最终价值似乎是最重要的。然后 CA 将找到最短路径。

使用 XJones 的想法。这似乎对我有用：

```
private let angleRadians = CGFloat(M_PI)
private let angleRadiansOffset = CGFloat(0.1 * M_PI/180.0)

let turnAngle = angleRadians - angleRadiansOffset;

//pre-rotate by an 'invisible amount', to force rotation in the same direction every time
primView.layer.transform = CATransform3DRotate(primView.layer.transform, angleRadiansOffset, 0.0, 1.0, 0.0)

UIView.animateKeyframesWithDuration(duration, delay: 0, options: [.BeginFromCurrentState], animations: { () -> Void in

    UIView.addKeyframeWithRelativeStartTime(0, relativeDuration: 0.8, animations: { () -> Void in

        //now we will complete the rotation to the correct end value
        primView.layer.transform = CATransform3DRotate(primView.layer.transform, turnAngle, 0.0, 1.0, 0.0)

    })

    //... other code ....

}) { (finished) -> Void in

} 
```

# winforms - 将数据添加到 DataGridView Column wise

> ID：10445913
> 
> 赞同：1
> 
> 时间：2012-05-04T09:08:17.460
> 
> 标签：winforms, datagrid, datagridview, runtime

我想在数据网格视图列中添加数据。

我在运行时添加列，然后我想向它添加数据。

列是否有可能调整自身大小以适应窗口。

例如，如果有 10 列，则 10 列应填满窗口，否则如果有 5 列，则 5 列应填满窗口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T10:40:42.957

这是一个简单示例的代码，可以执行您想要的操作。它来自一个带有一个 DataGridView 控件的简单表单的代码。

```
public partial class Form1 : Form
{

    public Form1()
    {
        InitializeComponent();

        BindingList<BindingClass> data = new BindingList<BindingClass>() { 
            new BindingClass { Name = "joe", Surname = "bloggs" }, 
            new BindingClass { Name = "sue", Surname = "bloggs" } };
        dataGridView1.DataSource = data;
        dataGridView1.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.Fill;
    }

}   

    public class BindingClass
    {
        public string Name { get; set; }
        public string Surname { get; set; }
    }

} 
```

我创建了一个自定义对象用于我的数据 - 这是您的列表所在的位置。绑定到 DataGridView 的数据源的列表的所有公共属性都被创建为列 - 然后您可以隐藏不需要的列。

在我的示例中，我选择使用 a`BindingList<T>`而不是 a `List<T>`- 这通常是首选，因为它可以让您进行编辑并且可以扩展以支持排序。

我还将`AutoSizeColumnsMode`网格设置为`Fill`- 还有其他几个选项，包括单独设置每列的宽度或填充属性，这些也可以通过设计器进行设置。

* * *

我不推荐使用 a`ListView`因为它不提供自动数据绑定。

# ruby-on-rails - 如何让 Devise session#create 测试通过

> ID：10445918
> 
> 赞同：1
> 
> 时间：2012-05-04T09:08:38.223
> 
> 标签：ruby-on-rails, devise

这是我的测试：

需要'test_helper'

```
class SessionsControllerTest < ActionController::TestCase
  setup do
    @request.env["devise.mapping"] = Devise.mappings[:user]
    @u = Factory :user, :password => :mypass, :password_confirmation => :mypass
  end
  test 'log in page loads' do
    get :new
    assert :success
  end
  test 'log in with devise password' do

    post :create, :user => {:email => @u.email, :password => 'mypass'}
    ap session
  end

end 
```

给出这个输出，表明登录失败：

```
Loaded suite test/functional/sessions_controller_test
Started
.{
        "action" => "create",
        "locale" => "en",
    "controller" => "sessions",
          "user" => {
        "password" => "mypass",
           "email" => "458286@email.com"
    }
}
{
    "flash" => {
        :alert => "Invalid email or password."
    }
}
.
Finished in 0.49123 seconds. 
```

这是我的会话控制器：

```
#this is an extension of the devise controller for sessions
class SessionsController < Devise::SessionsController
  before_filter :set_title_h1, :only => :new
  before_filter :debug, :only => :create
  before_filter :old_password_system_fix, :only => :create

  private

  def set_title_h1
    @layout[:show_h1] = false
    title 'Sign in Or Register'
  end
  def after_sign_in_path_for(resource)
  #override Devise default sign in path /opt/local/lib/ruby/gems/1.8/gems/devise-1.1.2/lib/devise/controllers/helpers.rb
    #edit_user_registration_path
    '/en/main/index' #forces locale to be defined
  end

  def after_sign_out_path_for(resource)
  #override Devise default sign out path /opt/local/lib/ruby/gems/1.8/gems/devise-1.1.2/lib/devise/controllers/helpers.rb
    main_index_path
  end
  def old_password_system_fix
  #purpose is to bring old users into the new system by setting their old password to the new format

    require 'digest/md5'

    email = params[:user][:email]
    pw    = params[:user][:password]

    #get user
    u = User.find_by_email email

    return if u.nil?

    #if they don't have a devise-style pw, authenticate with old
    if u.encrypted_password.blank? && u.old_password.present?

      #if [params pw] == md5 [old pw] then create devise-style pw & salt, store it, and let them through to devise auth action
      if u.old_password == Digest::MD5.hexdigest(pw)

        set_devise_style_pw(u, pw)

      #if no match, give "invalid email or pw" message.
      else
        #flash[:notice] = "Sign in failed."
        flash[:notice] = t 'devise.failure.invalid'
        #render :new
        redirect_to new_user_session_path
      end

    end
  end
  def debug
    ap params
  end
end 
```

我缺少什么以及如何通过功能测试来测试新会话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T21:34:36.453

原来你必须使用集成测试，而不是功能测试。不要问我为什么...

# c# - 以编程方式设置选项卡的内容

> ID：10445920
> 
> 赞同：0
> 
> 时间：2012-05-04T09:08:53.627
> 
> 标签：c#, .net, wpf

我有一个 WPF 应用程序，我想以编程方式显示内容。但是当我尝试按特定顺序执行此操作时，它无法显示。

这有效

```
public partial class MainWindow : Window
    {
        private static GX3Logger logger = GX3Logger.GetLogger();
        private GX3ClientMain.GX3ClientMain clientMain = null;

        /// <summary>
        ///  Main method
        /// </summary>
        /// <param name="args">
        ///  Application args
        /// </param>
        /// 
        public MainWindow()
        {
            InitializeComponent();
            Button btn = new Button();
            btn.Content = "Moo";
            btn.Height = 100;
            btn.Width = 100;
            stackPanel1.Children.Add(btn);
        }

        public int Initialise(string[] args)
        {
        ........
        }
} 
```

这不

```
public partial class App : Application
    {
        void app_Startup(object sender, StartupEventArgs e)
        {
            MainWindow mw = new MainWindow();
            mw.Initialise(e.Args);

        }
    }

public partial class MainWindow : Window
    {
        private static GX3Logger logger = GX3Logger.GetLogger();
        private GX3ClientMain.GX3ClientMain clientMain = null;

        /// <summary>
        ///  Main method
        /// </summary>
        /// <param name="args">
        ///  Application args
        /// </param>
        /// 
        public MainWindow()
        {
            InitializeComponent();            
        }

        public int Initialise(string[] args)
        {
            Button btn = new Button();
            btn.Content = "Moo";
            btn.Height = 100;
            btn.Width = 100;
            stackPanel1.Children.Add(btn);
            .......
        }
} 
```

为什么不？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:24:27.003

您需要在选项卡项中放置一个 StackPanel

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" Loaded="Window_Loaded">
        <TabControl>
            <TabItem Name="tab1">
                <StackPanel Name="stackPanel1">

                </StackPanel>
            </TabItem>
        </TabControl>
</Window> 
```

然后在后面的代码中

```
namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            Button btn = new Button();
            btn.Content = "Moo";
            stackPanel1.Children.Add(btn);
            Button btn2 = new Button();
            btn2.Content = "test";
            stackPanel1.Children.Add(btn2);

        }

        private void Window_Loaded(object sender, RoutedEventArgs e)
        {
        }
    }
} 
```

# sql-server - TSQL：如何检查列是否启用全文？

> ID：10445924
> 
> 赞同：15
> 
> 时间：2012-05-04T09:09:13.403
> 
> 标签：sql-server, tsql, sql-server-2005, full-text-search

我需要修改列定义，但我想先检查该列是否启用了全文。有没有办法在 TSQL 脚本中进行这样的检查？

我正在使用 SQL Server 2005。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-04T09:39:18.607

您可以尝试使用[COLUMNPROPERTY()](http://msdn.microsoft.com/en-us/library/ms174968%28v=sql.90%29.aspx)函数。

```
DECLARE @value INT;
SELECT @value = COLUMNPROPERTY(OBJECT_ID('schema.table'), 'column_name', 'IsFulltextIndexed')

IF (@value = 1)
  PRINT 'Fulltext column'
ELSE
  PRINT 'No Fulltext column' 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-04T09:38:40.093

你可以尝试这样的事情：

```
SELECT * 
FROM sys.columns c 
INNER JOIN sys.fulltext_index_columns fic ON c.object_id = fic.object_id 
                                          AND c.column_id = fic.column_id 
```

如果您需要将其限制在给定的表中，请使用：

```
SELECT * 
FROM sys.columns c 
INNER JOIN sys.fulltext_index_columns fic ON c.object_id = fic.object_id 
                                          AND c.column_id = fic.column_id
WHERE c.object_id = OBJECT_ID('YourTableNameHere') 
```

# java - 有异常的接口扩展无异常的接口

> ID：10445929
> 
> 赞同：0
> 
> 时间：2012-05-04T09:09:27.550
> 
> 标签：java, exception, interface, extends, throws

带异常的接口无异常扩展接口

干草，

我有一个带有唯一字段电子邮件的用户表，用作用户名。现在，当我使用相同的信息两次调用 dao.create 方法时，我得到一个 org.springframework.dao.DataIntegrityViolationException（重复条目......）。这让我明白了，我希望我的 userDao.create(o) 抛出一个已检查的异常。现在我遇到了问题，我的 UserDao-Interface 扩展了 GenericDao-Interface，它已经定义了没有 throw 子句的 create 方法。

由于扩展接口不能引发比它正在扩展的接口更多的异常，因此此代码无法编译：

```
public interface GenericDao<T, PK extends Serializable> {
    /...
    T create(T object);
    /...
}

public interface UserDao extends GenericDao<User, Long> {
        /...
    User create(User user) throws UserExistsException;
    /...
} 
```

（为什么这是原因，请参阅：[Java 接口扩展问题](https://stackoverflow.com/questions/616684/java-interface-extends-questions)（来自 cletus 的回答））

现在我的问题是：解决这个问题的最佳实践是什么？

非常感谢您提前回答=）

* * *

PS：到目前为止，我想出了几个答案，这并不能真正让我满意。一方面，我可以让 GenericDao 抛出一个检查异常，但由于大约 99% 的表没有唯一字段（除了 pk），这是不可接受的。使 UserExistsException 成为运行时异常并记录它也不是很好，因为我想强制该方法的用户捕获异常并将其报告给最终用户。创建一个抛出 Exeption 的新 userDao.createUser()-method 并使用已经存在的 userDao.create()-method 抛出 UnsupportedOperationException 对我来说是迄今为止我想到的所有解决方案中最整洁的。我仍然很想知道，解决这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:14:06.067

我建议：

```
public interface GenericDao<T, PK extends Serializable> {
    /...
    T create(T object) throws DaoException;
    /...
} 
```

DaoException 是一个（可能是抽象的）类，UserExistsException 扩展了 DaoException。

# javascript - 调用 REST Web 服务时无法执行 ajax 调用

> ID：10445933
> 
> 赞同：0
> 
> 时间：2012-05-04T09:09:48.210
> 
> 标签：javascript, ajax, web-services, rest

嗨，我试图从 ajax 获取请求中调用休息网络服务。

以下是我为此尝试的代码。

```
function callRestService(){
        var xmlhttp;
        if (window.XMLHttpRequest){// code for IE7+, Firefox, Chrome, Opera, Safari
          xmlhttp=new XMLHttpRequest();
        }else{// code for IE6, IE5
          xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
        $.ajax({
                xmlhttp.open("GET","http://mywebservice/test/",false);
                xmlhttp.send();
                alert(xmlhttp.responseText);
        });
    } 
```

运行此代码时出现以下错误/

```
missing : after property id
[Break On This Error]   

xmlhttp.open("GET","http://mywebservice/test..

/AjaxC...ervice/ (line 30, col 13) 
```

在第一种情况下，我尝试了类似以下的方法

```
$.ajax({
              type: "GET",
              url: "http://mywebservice/test/",
              cache: false,
              success: function(data){
                    alert(data);
                    //var obj = eval(data);
              },
               error: function (msg, url, line) {
                   alert('error trapped in error: function(msg, url, line)');
                   alert('msg = ' + msg + ', url = ' + url + ', line = ' + line);
               }
        }); 
```

在上述情况下，控制进入错误块，但我不明白这是什么原因。这就是我尝试第一种情况的原因。

这段代码有什么问题吗？？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T09:19:09.167

你的代码全错了。假设这`$.ajax`是 jQuery ajax 调用，那么您的代码应如下所示：

```
function CallRestService() {
  $.ajax({url:'http://mywebservice/test'}).done(function(data) {
      alert(data);
   })
  );
} 
```

如果您使用 jquery ajax 调用，则不需要创建 xml http 请求。请参阅：[http](http://api.jquery.com/jQuery.ajax/#jQuery-ajax-settings) ://api.jquery.com/jQuery.ajax 以供参考。

如果你不想使用 jQuery：

```
function callRestService(){
    var xmlhttp;
    if (window.XMLHttpRequest){// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
    }else{// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.open("GET","http://mywebservice/test/",false);
    xmlhttp.send();
    if (xmlhttp.status == "200") {
        alert(xmlhttp.responseText);
    }
} 
```

参考这里：[使用 XMLHttpRequest](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest)

如果您使用跨域调用，请参见此处： [jQuery AJAX 跨域](https://stackoverflow.com/questions/3506208/jquery-ajax-cross-domain)

# sed - 更改多个文件

> ID：10445934
> 
> 赞同：250
> 
> 时间：2012-05-04T09:09:52.907
> 
> 标签：sed

以下命令正确更改了 2 个文件的内容。

```
sed -i 's/abc/xyz/g' xaa1 xab1 
```

但我需要做的是动态更改几个这样的文件，我不知道文件名。我想编写一个命令，该命令将从当前目录中读取所有文件，`xa*`并且`sed`应该更改文件内容。

* * *

## 回答 #1

> 赞同：214
> 
> 时间：2015-06-08T19:46:05.800

我很惊讶没有人提到 find 的 -exec 参数，它适用于这种类型的用例，尽管它会为每个匹配的文件名启动一个进程：

```
find . -type f -name 'xa*' -exec sed -i 's/asd/dsg/g' {} \; 
```

或者，可以使用 xargs，它会调用更少的进程：

```
find . -type f -name 'xa*' | xargs sed -i 's/asd/dsg/g' 
```

或者更简单地使用`+` [exec 变体](https://stackoverflow.com/a/6085272/1941755)而不是`;`in find 以允许 find 为每个子进程调用提供多个文件：

```
find . -type f -name 'xa*' -exec sed -i 's/asd/dsg/g' {} + 
```

* * *

## 回答 #2

> 赞同：161
> 
> 时间：2012-05-04T09:32:40.490

更好的是：

```
for i in xa*; do
    sed -i 's/asd/dfg/g' $i
done 
```

因为没有人知道那里有多少文件，而且很容易打破命令行限制。

当文件太多时会发生以下情况：

```
# grep -c aaa *
-bash: /bin/grep: Argument list too long
# for i in *; do grep -c aaa $i; done
0
... (output skipped)
# 
```

* * *

## 回答 #3

> 赞同：87
> 
> 时间：2014-03-20T13:41:21.107

您可以同时使用 grep 和 sed。这允许您递归搜索子目录。

```
Linux: grep -r -l <old> * | xargs sed -i 's/<old>/<new>/g'
OS X: grep -r -l <old> * | xargs sed -i '' 's/<old>/<new>/g'

For grep:
    -r recursively searches subdirectories 
    -l prints file names that contain matches
For sed:
    -i extension (Note: An argument needs to be provided on OS X) 
```

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2012-05-26T05:58:44.793

`sed`这些命令在Mac OS X 附带的默认设置中不起作用。

来自`man 1 sed`：

```
-i extension
             Edit files in-place, saving backups with the specified
             extension.  If a zero-length extension is given, no backup 
             will be saved.  It is not recommended to give a zero-length
             extension when in-place editing files, as you risk corruption
             or partial content in situations where disk space is exhausted, etc. 
```

试过了

```
sed -i '.bak' 's/old/new/g' logfile* 
```

和

```
for i in logfile*; do sed -i '.bak' 's/old/new/g' $i; done 
```

两者都工作正常。

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2015-01-23T23:23:57.727

[@PaulR](https://stackoverflow.com/q/10445934/393280#comment13486175_10445934)将此作为评论发布，但人们应该将其视为答案（这个答案最适合我的需要）：

```
sed -i 's/abc/xyz/g' xa* 
```

这将适用于中等数量的文件，可能在几十个数量级，但[可能不是在几百万个数量级](https://superuser.com/q/257250/45163)。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2015-01-08T21:34:52.490

另一种更通用的方法是使用`find`：

```
sed -i 's/asd/dsg/g' $(find . -type f -name 'xa*') 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-10-24T21:44:16.293

我正在使用`find`类似的任务。这很简单：你必须将它作为这样的参数传递`sed`：

`sed -i 's/EXPRESSION/REPLACEMENT/g' `find -name "FILE.REGEX"``

这样您就不必编写复杂的循环，而且很容易看到您要更改哪些文件，只需在运行`find`之前运行`sed`。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-12-02T13:47:04.390

你可以做

' **xxxx** ' 文本 u 搜索并将其替换为 ' **yyyy** '

```
grep -Rn '**xxxx**' /path | awk -F: '{print $1}' | xargs sed -i 's/**xxxx**/**yyyy**/' 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-09-18T21:33:05.250

如果您能够运行脚本，这是我在类似情况下所做的：

使用字典/哈希映射（关联数组）和`sed`命令变量，我们可以循环遍历数组来替换几个字符串。在 中包含通配符将允许用特定目录 ( ) 中`name_pattern`的模式（这可能类似于 ）替换文件中的文件。所有的变化都写在`name_pattern='File*.txt'``source_dir``logfile``destin_dir`

```
#!/bin/bash
source_dir=source_path
destin_dir=destin_path
logfile='sedOutput.txt'
name_pattern='File.txt'

echo "--Begin $(date)--" | tee -a $destin_dir/$logfile
echo "Source_DIR=$source_dir destin_DIR=$destin_dir "

declare -A pairs=( 
    ['WHAT1']='FOR1'
    ['OTHER_string_to replace']='string replaced'
)

for i in "${!pairs[@]}"; do
    j=${pairs[$i]}
    echo "[$i]=$j"
    replace_what=$i
    replace_for=$j
    echo " "
    echo "Replace: $replace_what for: $replace_for"
    find $source_dir -name $name_pattern | xargs sed -i "s/$replace_what/$replace_for/g" 
    find $source_dir -name $name_pattern | xargs -I{} grep -n "$replace_for" {} /dev/null | tee -a $destin_dir/$logfile
done

echo " "
echo "----End $(date)---" | tee -a $destin_dir/$logfile 
```

首先声明pairs数组，每对是一个替换字符串，然后在文件中`WHAT1`被替换为`FOR1`和`OTHER_string_to replace`被替换。在循环中读取数组，该对的第一个成员被检索为，第二个成员被检索为。该命令在目录中搜索文件名（可能包含通配符），并且该命令在同一文件中替换先前定义的内容。最后，我添加了一个重定向到日志文件以记录文件中所做的更改。`string replaced``File.txt``replace_what=$i``replace_for=$j``find``sed -i``grep`

这对我有用，`GNU Bash 4.3` `sed 4.2.2`并且基于 VasyaNovikov 对 [Loop over tuples in bash](https://stackoverflow.com/questions/9713104/loop-over-tuples-in-bash)的回答。

# r - R - quantstrat 订单相互取消

> ID：10445936
> 
> 赞同：4
> 
> 时间：2012-05-04T09:10:07.943
> 
> 标签：r, quantstrat

如何在quantstrat中输入相互取消的订单？例如，一旦我进入交易，我立即开两个订单：“止损”和“止盈”。一旦一个被填满，另一个将被取消。

```
#Enter signal 

strategy <- add.rule(strategy, name="ruleSignal", 
                     arguments=list(sigcol="EnterBuy", sigval=TRUE, orderqty=100,
                                    ordertype="market", orderside="long", 
                                    pricemethod="market", osFUN=osMaxPos),
                     type="enter", path.dep=TRUE)

#Stop loss

strategy <- add.rule(strategy, name="ruleSignal", 
                     arguments=list(sigcol="EnterBuy", sigval=TRUE, 
                                    orderqty="all", ordertype="stoplimit", 
                                    orderside="short", threshold=-5, 
                                    tmult=FALSE), 
                     type="exit", path.dep=TRUE)

#Take profit

strategy <- add.rule(strategy, name="ruleSignal", 
                     arguments=list(sigcol="EnterBuy", sigval=TRUE,
                                    orderqty="all", ordertype="stoplimit", 
                                    orderside="short", threshold=5, 
                                    tmult=FALSE),
                     type="exit", path.dep=TRUE) 
```

目前，他们正在独立工作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T12:05:12.433

SVN r 1010 将代码添加到 quantstrat 以更轻松地使用 OCO（一个取消其他）订单集。[此处](https://r-forge.r-project.org/scm/viewvc.php/pkg/quantstrat/demo/macd.R?view=markup&revision=1010&root=blotter)的“macd”演示中有一个示例，它使用新公开的*orderset*参数为退出订单提供 OCO 功能。

您需要使用当前的 svn（r1010 或更高版本）才能使用此功能。我还要注意，订单大小功能现在有点坏，我们正在努力。

你的例子，使用订单集，看起来像这样：

```
#Enter signal 

strategy <- add.rule(strategy, name="ruleSignal", 
                     arguments=list(sigcol="EnterBuy", sigval=TRUE, orderqty=100,
                                    ordertype="market", orderside="long", 
                                    pricemethod="market", osFUN=osMaxPos),
                     type="enter", path.dep=TRUE)

#Stop loss

strategy <- add.rule(strategy, name="ruleSignal", 
                     arguments=list(sigcol="EnterBuy", sigval=TRUE, 
                                    orderqty="all", ordertype="stoplimit", 
                                    orderside="long", threshold=-5, 
                                    tmult=FALSE, orderset='altexits'), 
                     type="exit", path.dep=TRUE)

#Take profit

strategy <- add.rule(strategy, name="ruleSignal", 
                     arguments=list(sigcol="EnterBuy", sigval=TRUE,
                                    orderqty="all", ordertype="stoplimit", 
                                    orderside="long", threshold=5, 
                                    tmult=FALSE, orderset='altexits'),
                     type="exit", path.dep=TRUE) 
```

请注意将*orderset='altexits'参数添加到***ruleSignal**的参数列表中。

# php - 按日期对数组进行排序，在同一个数组内

> ID：10445937
> 
> 赞同：1
> 
> 时间：2012-05-04T09:10:09.000
> 
> 标签：php, codeigniter

我正在使用 codeigniter 开发一个博客站点。在该站点中，博客将列在最后一个第一顺序中。即最后一个将在顶部。在我的应用程序变量 $blogs 中包含所有要列出的博客和date_created.$blogs 将显示博客，但不是按要求的顺序。现在我想按 date_created 值对博客进行排序。

返回博客的主要模型函数在这里

```
public function LoadAllBlogs(){

         $blogs = array();

         $this->db->select('id');
         $this->db->from('blog');
         $q=  $this->db->get();                                 

         foreach ($q->result() as $row) {
               $blog = new Blog();
               $blog->loadWithLatestPublishedEntry($row->id);
               $blogs[] = $blog;
         }

     return $blogs; //contain all the blogs entry and the date in which blog is created
} 
```

谁能帮我.....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T09:13:56.520

您将需要在查询中添加 ORDER BY 子句，以便它们按数据库排序。这很简单，给`order_by()`函数传递一个字段名，**asc**表示升序，**desc**表示降序。

```
$this->db->select('id');
$this->db->from('blog');
$this->db->order_by("date_created", "desc");
$q = $this->db->get(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T09:14:49.520

在我看来，这听起来你需要一个自定义函数来比较每两个帖子，并使用 php uksort ( array &$array ， callable $cmp_function ) 来完成这项工作。

[http://php.net/manual/en/function.uksort.php](http://php.net/manual/en/function.uksort.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T12:31:34.157

@cilosis 是对的-通过查询使用 order

但由于您不打算这样做，您可以尝试以下方法 -

我不知道博客数组是什么样的，我假设您的日期值类似于 -`"Y-m-d"`

```
 foreach ($q->result() as $row) {
               $blog = new Blog();
               $blog->loadWithLatestPublishedEntry($row->id);

               $time = strtotime($blog->posting_date);

               $blogs[$time] = $blog;
         }

ksort($blogs); //Oldest first
krsort($blogs); //Latest first 
```

[http://www.php.net/manual/en/function.strtotime.php](http://www.php.net/manual/en/function.strtotime.php)

//只是一个旁注 - 使用 strtotime 时 - 记住这一点 -> 通过查看各个组件之间的分隔符来消除 m/d/y 或 dmy 格式的日期：如果分隔符是斜杠 (/)，然后假设美国 m/d/y；而如果分隔符是破折号 (-) 或点 (.)，则假定为欧洲 dmy 格式。

[http://www.php.net/manual/en/function.krsort.php](http://www.php.net/manual/en/function.krsort.php)

# amazon-web-services - 在 AWS VPC 中找不到用于创建 RabbitMQ 集群的节点？

> ID：10445938
> 
> 赞同：2
> 
> 时间：2012-05-04T09:10:19.817
> 
> 标签：amazon-web-services, rabbitmq, amazon-vpc

尝试在 AWS VPC 上配置 RabbitMQ 集群

我将 cookie 从主节点交换到第二个节点

并执行以下步骤

```
sudo /etc/init.d/rabbitmq-server stop
sudo rabbitmqctl stop_app
sudo rabbitmqctl reset
sudo rabbitmqctl cluster rabbit@ip-10-0-2-215 
```

给出错误

使用 ['rabbit@ip-10-0-2-215'] 集群节点 'rabbit@ip-10-0-2-108' ... 错误：{no_running_cluster_nodes,['rabbit@ip-10-0-2 -215'], ['rabbit@ip-10-0-2-215']}

防火墙配置中的所有端口

能够在这两个实例之间 ping

我正在使用 RabbitMQ -v 2.8.2

注意：在 AWS VPC 之外完成相同的过程并且它可以正常工作，所以 VPC 可能存在什么问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T13:14:45.137

不幸的是，RabbitMQ 没有 DNS（因为 Erlang 对由它们的 FQDN 标识的集群节点的支持很差）。

您需要确保每个 RabbitMQ 节点都可以相互连接。尝试从另一个节点检查一个节点的状态。使用类似的东西：

```
rabbitmqctl -n rabbit@ip-10-0-2-215 status 
```

如果这不起作用，您需要检查两个节点是否具有相同的[Erlang cookie](http://www.rabbitmq.com/clustering.html#setup)。如果在那之后它仍然不起作用，您需要将主机名添加到`/etc/hosts`两个实例上的文件中。

如果您仍有问题，请向[RabbitMQ 讨论](https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss)邮件列表发送消息。开发人员在那里回答了所有问题，还有其他人设法在 AWS 上设置了 RabbitMQ 集群。

# objective-c - IOS - ObjC - 来自 NSString 的 JSONString

> ID：10445940
> 
> 赞同：0
> 
> 时间：2012-05-04T09:10:43.250
> 
> 标签：objective-c, ios, json, nsstring, nsdictionary

我需要从 NSString 创建一个 JsonString，而 ObjC 中没有任何键。所有教程都讨论了 NSDictionary 或 NSData 的序列化。

我的字符串就像@“fr-FR”。我正在寻找的结果就像@"{"fr-FR"}"，但是是动态的。我自己不能这样做，因为我需要为不同类型的论点做同样的事情。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T09:14:45.913

为了达到您要求的结果（即使它不是正确的 JSON），您可以尝试这样的事情：

```
NSString *myString = @"fr-FR"; // Or whatever
NSString *result = [NSString stringWithFormat:@"{\"%@\"}", myString]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T09:15:48.740

您需要使用 JSON 框架/库，例如[TouchJSON](https://github.com/TouchCode/TouchJSON)，然后您可以执行以下操作来编码您的`NSString`：

```
theData = [[CJSONSerializer serializer] serializeObject:theString
                                                  error:&theError]; 
```

（来自[这里的演示代码](https://github.com/TouchCode/TouchJSON/blob/master/Support/Demo/main.m)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T09:20:10.870

如果您在 IOS 5 + 上开发，您可以使用 NSJSONSerialization 类

用你的字符串创建数据

```
NSString *myString = @"fr-FR"; // Or whatever
NSString *result = [NSString stringWithFormat:@"{%@}", myString];
NSData* data=[result dataUsingEncoding:NSUTF8StringEncoding]; 
```

然后使用

```
+ (id)JSONObjectWithData:(NSData *)data options:(NSJSONReadingOptions)opt error:(NSError **)error 
```

创建您的 JSON 对象

（只是输入，未测试）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T09:29:43.767

恕我直言，再次阅读 json 规范 ( [http://www.json.org](http://www.json.org) ) {"string"} 不是有效的 json 并且您在 c# 中使用的代码会产生无效的结果。但是，如果您需要与以这种方式操作的 c# 代码进行通信，您应该使用 JSON 库对字符串本身进行编码，然后*将*其打包在花括号中。这样，您就可以获得特殊情况下 JSON 所需的所有转义（例如引号和诸如此类的东西），如果您只是手动添加引号和大括号，您就不需要这些转义。

# gwt - GWT CellList 中按钮的 onClick/onSelected 事件

> ID：10445943
> 
> 赞同：1
> 
> 时间：2012-05-04T09:10:57.470
> 
> 标签：gwt

我有一个 GWT CellList。每个单元格有一个图像、两个标签和一个按钮。

每当用户单击单元格时，就会发生 onSelected 事件。

如果用户单击一个按钮，我想触发 onClick 事件，如果单击其他区域（不是内部按钮），我想触发 onSelected。

有可能这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:48:49.267

`onBrowserEvent(...)`最简单的方法是覆盖`AbstractCell<C>`. 这是我如何实现它来处理`<a/>`元素上的点击事件：

```
@Override
public void onBrowserEvent(Context context, Element parent, BIBonusDto value, NativeEvent event,
        ValueUpdater<BIBonusDto> valueUpdater) {
    super.onBrowserEvent(context, parent, value, event, valueUpdater);
    if ("click".equals(event.getType())) {
        EventTarget eventTarget = event.getEventTarget();
        if (!Element.is(eventTarget)) {
            return;
        }
        if (parent.getElementsByTagName("a").getItem(0).isOrHasChild(Element.as(eventTarget))) {
            if (valueUpdater != null)
                valueUpdater.update(value);
        }
    }
} 
```

单元格模板如下所示：

```
<div id='info' class='campaign' style='cursor:default;'>
  <div id='claim-inner2'>
    <a id='claim-inner1' style='cursor:pointer;'>
      <div id='claim-inner' title='Claim Points Now'></div>
    </a>
  </div>
</div> 
```

我们必须检查事件的类型是否正确以及它是否是一个元素，然后我们可以检查它是否正确并将操作委托给值更新器回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T09:51:10.717

我想你想要这样的东西， http://gwt.google.com/samples/Showcase/Showcase.html#! [CwCellSampler](http://gwt.google.com/samples/Showcase/Showcase.html#!CwCellSampler)

您可以使用 ActionCell 或 ButtonCell。

让我知道这是否符合您的目的。

# javascript - 防止 Highcharts 重绘轴的比例

> ID：10445947
> 
> 赞同：2
> 
> 时间：2012-05-04T09:11:10.983
> 
> 标签：javascript, highcharts

我想知道当我添加一个新系列时，是否有办法阻止 Highcharts 重新计算和重新绘制轴的比例。我需要做的是：我有一个包含大量数据的散点图；当用户选择一个点时，我添加了一个“线”类型的新系列。这个系列的点是前几个点的有限样本，因此没有添加“真正的”新点，但 xAxis 的比例会发生变化。将 xAxis 的最小值和最大值、startOnTick 和 endOnTick 设置为 true 并不能解决问题。任何的想法？

* * *

编辑：正如我所写，Highcharts 处理轴刻度的方式对我来说仍然是一个谜。就我而言，我在同一个画布上渲染了一个散点图和一个柱形图。为了响应用户点击，我添加了 2 个新系列：一个系列系列和一个列系列，每个系列都基于原始数据的一个子集。问题是由柱形图引起的：当你在柱形图中添加一个新的系列时，条形图没有重叠，而是重新分布，从而产生了比例变化的效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:57:26.930

尝试创建线系列但隐藏，当你想显示它时使用[chart.series[1].show()](http://www.highcharts.com/stock/ref/#series-object)。

# extjs4 - ExtJs：从 Store 初始化变量

> ID：10445949
> 
> 赞同：0
> 
> 时间：2012-05-04T09:11:12.953
> 
> 标签：extjs4

嗨，我正在使用 ExtHs 4。

我有一个需要从商店初始化的全局变量。

```
var cp=0;

Ext.onReady(function(){
Ext.define('Init', {
            singleton: true,
            cp: 0
        });

Ext.define('loggedUserList', {
                extend: 'Ext.data.Model',
                fields: ['id','name']
            });

            loggedUser = Ext.create('Ext.data.Store', {
                model: 'loggedUserList',
                autoLoad: true,
                proxy: {
                    type: 'ajax',
                    url : url+'/lochweb/loch/users/getLoggedUser',
                    reader: {
                     type: 'json',
                        root: 'provider'
                    }                   
                },
                listeners: {
                    load:function(loggedUser){
                        Init.cp = loggedUser.getAt(0).data.id;

                    }
                }

            }); 
}); 
```

我在另一个网址中使用 cp 的值，如下所示，

```
Ext.define('vocbList', {
                extend: 'Ext.data.Model',
                fields: [
                    { name: 'id', mapping: 'id' },
                    { name: 'code', mapping: 'code' },
                    { name: 'loinc', mapping: 'loinc.loincNumber' }
                ]
            });     

            var vocabulary = Ext.create('Ext.data.Store', {             
                model: 'vocbList',
                autoLoad: true,
                proxy: {
                    type: 'ajax',                   
                    url : url+'/lochweb/loch/vocabulary/getVocabularyByProvider?providerId='+Init.cp,                   
                    reader:  {
                        type: 'json',
                        root: 'Vocabulary'
                    }
                }
            }); 
```

但它的值仍然是 0。如何分配它的值形式存储，以便它可以被重用于其他目的。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T20:47:58.263

你需要的是一个回调。

存储调用是异步完成的，因此在存储从数据库获取数据时浏览器不会冻结。

```
me.vocabulary.load({
    scope: this,
    callback: function (records, operation, success) {
        //here the store has been loaded so records are not empty
    }

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T10:16:42.370

在您的`Ext.onReady`中，定义一个像这样的全局类：

```
Ext.define('Init', {
    singleton: true,

    cp: 0
}); 
```

然后你可以在任何你想要的地方获取或设置**cp ：**

```
Init.cp = 'some';
var myCp = Init.cp; 
```

# java - 使用 HQL 分页数据

> ID：10445951
> 
> 赞同：1
> 
> 时间：2012-05-04T09:11:14.637
> 
> 标签：java, mysql, hibernate, pagination, hql

我有一个使用`Hibernate`和`MySQL`. 在一个页面上，我有一个搜索表单，在提交时我创建了一个 HQL`Query`来获取结果。

我使用`.setFirstResult()`and`.setMaxResults()`进行分页。这工作正常，但不是当我的结果集包含很多记录时......我认为 .setMaxResults() 会在实际的 SQL 查询中使用限制，但它似乎没有。所以它将整个结果加载到内存中，然后才使用我在 .setMaxResults() 中设置的值，这会导致内存问题。

这是它的工作原理，还是我做错了什么？

如果是这样，这对我来说是不可用的。

**ps：** 使用 Criteria API 它确实可以工作，但是我在创建标准时还有一些其他限制。这就是为什么我尝试改用 HQL，但我现在面临这个问题。

那么我的观察是否正确？还有其他解决方案吗？

# php - 用于 PHP 的 Wso2 Web 服务框架以及 ssl 客户端和 http 发送器的问题

> ID：10445953
> 
> 赞同：0
> 
> 时间：2012-05-04T09:11:17.720
> 
> 标签：php, web-services, wsdl, wso2

我将用于 PHP 的 Wso2 Web 服务框架 (WSF) 与 Zend Server CE 5.5 一起使用，由于某种原因，在与 Web 服务的连接阶段的最后阶段会出现问题。

Web 服务（我相信内置于 .NET）通过 HTTPS 接受调用，无需用户/密码身份验证，也无需客户端证书。我还将 WSDL 与 WSClient 一起使用。

因此，在连接时，我只需设置以下参数：

```
$settings = array(
    "wsdl" => realpath(dirname(__FILE__) . "/resources/wsdl.xml"),
    "classmap" => $classMap, // classMap maps the WSDL names to corresponding PHP classes
    "CACert" => realpath(dirname(__FILE__) . "/resources/cert.pem"),
    "timeout" => 40,
    "useSOAP" => "1.2",
    "useWSA" => 1.0
); 
```

在 WSDL 中找到的策略如下：

```
<wsp:Policy wsu:Id="BasicHttpBinding_IApplication_policy" xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
  <wsp:ExactlyOne>
    <wsp:All>
      <sp:TransportBinding xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
        <wsp:Policy>
          <sp:TransportToken>
            <wsp:Policy>
              <sp:HttpsToken RequireClientCertificate="false"/>
            </wsp:Policy>
          </sp:TransportToken>
          <sp:AlgorithmSuite>
            <wsp:Policy>
              <sp:Basic256/>
            </wsp:Policy>
          </sp:AlgorithmSuite>
          <sp:Layout>
            <wsp:Policy>
              <sp:Strict/>
            </wsp:Policy>
          </sp:Layout>
        </wsp:Policy>
      </sp:TransportBinding>
    </wsp:All>
  </wsp:ExactlyOne>
</wsp:Policy> 
```

在`wsf_php_client.log`我发现没有建立任何联系，但很难准确指出问题所在。`[info]`日志中的行是`[error]`后来启动的吗？

```
[warning] msg_ctx.c(1384) RampartClientConfiguration not set in message context
[info]  [ssl client] Client certificate chain filenot specified
[error] http_sender.c(1355) Error occurred in transport
[error] engine.c(171) Transport sender invoke failed
[error] wso2-wsf-php-src-2.1.0/src/wsf_wsdl.c(1226) [wsf_wsdl] Response envelope not found 
```

在每个阶段，一切看起来都很好。我查看了函数返回`wsf_process_wsdl`的`wsf_wsdl.php`数据，收集的数据看起来不错。

我已经挖掘了大多数似乎至少触及我的问题的 wso2 论坛主题，但没有什么与此完全对应。对于问题所在以及如何解决问题，我真的没有办法了。使用其设置数组设置 WSClient 时，我是否遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T09:52:56.130

text/xml 是 SOAP 1.1 的内容类型，application/soap+xml 是soap1.2 的内容类型，由于您将soap 版本设置为soap12，因此消息很可能作为soap12 消息发送。

从您指定的错误来看，在我看来，消息未能到达端点。您能否检查 wsdl 中指定的端点是否正确。或者您可以在客户端选项数组中指定端点。

# android - 滚动列表时包含复选框的自定义列表视图

> ID：10445954
> 
> 赞同：-1
> 
> 时间：2012-05-04T09:11:17.847
> 
> 标签：android, listview, checkbox, scroll

我的自定义 Listview 有问题，每个项目中有 2 个 TextView 和一个 CheckBox，问题是在滚动 Listview 时，选中的项目随机取消选中，反之亦然，任何人都可以帮助定义一个自定义的适配器来解决这个问题，我会很感激的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T09:14:36.677

检查您是否正确回收`convertView`了`getView`.

如果视图已在使用中，请确保选中状态与表示的新项目相符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T09:17:20.783

我有同样的问题，我解决了如下：

我有一个布尔变量**isCheckedByUser**。在适配器中，每次我使用复选框做某事时，我都会先将此变量设置为 false，然后使用复选框执行所有我必须做的事情，然后再次将变量设置为 true。然后，在**onCheckedChanged**方法中，我检查这个变量是否为真，如果是，则意味着用户想要修改状态，所以我用复选框做任何需要的事情。

事实上，这个问题并不是那么“随机”。列表视图重复使用单元格，这就是为什么对您来说复选框似乎是随机取消选中的。

# netty - 为什么我不能遍历 ChannelLocal？

> ID：10445955
> 
> 赞同：1
> 
> 时间：2012-05-04T09:11:19.267
> 
> 标签：netty

我不知道 ChannelLocal 的内部结构，但目前似乎无法迭代。我认为它是通道对象映射的集合，所以我认为它应该是可能的。有办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T09:45:17.613

没有办法 atm ......但我喜欢我们可以让它实现 Iterable 的想法。

您能否在我们的 bugtracker [1] 上为此打开一个问题。

[1] [https://github.com/netty/netty/issues](https://github.com/netty/netty/issues)

# eclipse - 我可以在保存/提交/上传时将元数据添加到 Eclipse 中的源文件吗？

> ID：10445956
> 
> 赞同：3
> 
> 时间：2012-05-04T09:11:21.220
> 
> 标签：eclipse, git, version-control

在工作中，我们使用 svn $Id$-Property 跟踪提交时源文件（尤其是 JavaScript 文件）中的最新修订。

对于家里的小型自由项目（Web 或 Java），我使用 eclipse 和本地 git 版本跟踪。

我很想向我的源文件添加元数据，例如时间戳或上次保存的修订。对我来说，数据是否会在保存、提交或上传文件时添加并不重要。

像 svns $Id$ 这样的令牌替换方法是最好的，但我对任何其他方法持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:49:22.993

查看[Git 书籍的“Git 属性”](http://git-scm.com/book/en/Customizing-Git-Git-Attributes)部分，关于自定义清洁/涂抹过滤器的部分可能对您有用！

# regex - 在 Perl 中 $ 到底匹配什么？

> ID：10445960
> 
> 赞同：12
> 
> 时间：2012-05-04T09:11:35.613
> 
> 标签：regex, perl

直到几分钟前，我还相信[Perl](http://en.wikipedia.org/wiki/Perl)可以匹配任何类型的`$`行尾。不幸的是，我的假设被证明是错误的。

以下脚本仅删除单词*end*`$string3`。

```
use warnings;
use strict;

my $string1 = " match to the end" . chr(13);
my $string2 = " match to the end" . chr(13) . chr(10);
my $string3 = " match to the end" .           chr(10);

$string1 =~ s/ end$//;
$string2 =~ s/ end$//;
$string3 =~ s/ end$//;

print "$string1\n";
print "$string2\n";
print "$string3\n"; 
```

但我几乎 75% 确信我见过`$`至少匹配的案例`chr(13).chr(10)`。

`$`那么，原子究竟匹配什么（以及在什么情况下） ？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-04T09:32:32.270

首先，这取决于`/m`修饰符是否生效。

使用`/m`active 时，它​​匹配`\n`字符之前或字符串末尾。它相当于`(?=\n|\z)`.

如果没有`/m`，则匹配`\n`字符串的最后一个字符或字符串末尾的字符。它相当于`(?=\n?\z)`.

它与通用换行符不匹配。元`\R`字符（在 5.10.0 中引入）可以做到这一点（但没有 的字符串结尾属性`$`）。您可以替换以前`\R`的`\n`等效项之一来获得`$`与通用换行符匹配的类似作品。

请注意，`\n`并非总是如此`chr(10)`。这取决于平台。当前使用的大多数平台都有`\n`意义`chr(10)`，但并非总是如此。例如，在较旧的 Mac 上，`\n`曾经`chr(13)`和`\r`曾经是`chr(10)`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-04T09:30:51.367

`$`仅匹配 / 之前的位置，而不匹配`\n`/之前的位置。`chr(10)``\r``chr(13)`

它经常被误解为在`newline`字符之前匹配（在很多情况下它不会导致问题），但严格来说，它在“换行”字符之前匹配，**而不是在回车字符之前匹配！**

请参阅*[正则表达式教程 - 字符串或线锚的开始和结束](http://www.regular-expressions.info/anchors.html)*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T16:36:21.573

```
/$/
/$/m 
```

相当于

```
/(?=\n\z)|\z/
/(?=\n)|\z/ 
```

分别。`\n`在所有现有平台上匹配 U+000A（LINE FEED aka NEWLINE）。

# javadoc - javadoc doclet libs：运行时出现非法包名或 ClassCastException

> ID：10445967
> 
> 赞同：0
> 
> 时间：2012-05-04T09:11:55.030
> 
> 标签：javadoc, libs, doclet

我遇到了下一个问题：

我正在尝试在控制台（Windows 7）中运行我自己的漂亮 doclet：

```
javadoc com.mypackages.api -sourcepath ./src/main/java/ 
```

这让我遇到了一大堆例外：

```
java.lang.ClassCastException: com.sun.tools.javadoc.ClassDocImpl cannot be cast to com.sun.javadoc.AnnotationTypeDoc
    at com.sun.tools.javadoc.AnnotationDescImpl.annotationType(AnnotationDescImpl.java:46)
    at com.sun.tools.doclets.internal.toolkit.util.Util.isDeprecated(Util.java:811)
    at com.sun.tools.doclets.formats.html.PackageWriterImpl.writeClassesSummary(PackageWriterImpl.java:114) 
```

（总是一样的）。

然后，我在 StackOverflow 中发现有人说这是一个带注释的第三方库问题（[StackOverFlow：为什么在生成 javadocs 时我得到一个 ClassCastException？](https://stackoverflow.com/questions/44853/why-am-i-getting-a-classcastexception-when-generating-javadocs)）。解决方案看起来是将那些带有注释的库添加到类路径中，所以我运行了下一行：

```
javadoc com.mindmatics.mcashwebservice.remote.api -sourcepath ./src/main/java/ -docletpath ./all-libs/*.jar 
```

我现在收到下一个错误：

```
javadoc: error - Illegal package name: "./all-libs/webservice-commons-1.0.2-SNAPSHOT.jar" 
```

所有库都包含在 all-libs 目录中。谁能解释我做错了什么？非常感谢 ：-）

PS：我使用的是 JDK 1.6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:20:12.673

查看您的目标路径：./all-libs/*.jar

不幸的是，这不是一个带有连字符的正确包名称。您需要去掉连字符或将其转换为下划线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-18T12:53:55.470

它似乎`*.jar`被shell扩展为`1.jar 2.jar ...`
列出`-classpath dir1/1.jar:dir2/2.jar`对我有用的jar文件。

# spring - 在 JBoss AS 7.1.X 上使用带有 Spring 3.0.X 的 JAX-WS Web 服务

> ID：10445969
> 
> 赞同：3
> 
> 时间：2012-05-04T09:12:05.893
> 
> 标签：spring, jax-ws, jboss7.x, autowired

我在 JBoss AS Final 7.1.1 上使用 Spring 3.0.6 部署 JAX-WS Web 服务时遇到了一些问题。

我已经尝试了本教程中的两种第一种方法：[http ://www.javacodegeeks.com/2010/11/jaxws-with-spring-and-maven-tutorial.html](http://www.javacodegeeks.com/2010/11/jaxws-with-spring-and-maven-tutorial.html)

当我使用第一种方法（扩展 SpringBeanAutowiringSupport 并在 web.xml 中声明 servlet）时，应用程序正确部署，但我在 web 服务中注入的 bean 为 Null。

使用 SimpleJaxWsServiceExporter 的第二种方法我在部署时遇到错误：

```
10:09:33,012 ERROR [org.springframework.web.context.ContextLoader] (MSC service thread 1-2) Context initialization failed: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.remoting.jaxws.SimpleJaxWsServiceExporter#0' defined in ServletContext resource [/WEB-INF/generic-applicationContext.xml]: Invocation of init method failed; nested exception is javax.xml.ws.WebServiceException: java.lang.RuntimeException: java.net.BindException: Address already in use: bind
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1420) [spring-beans-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519) [spring-beans-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456) [spring-beans-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293) [spring-beans-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) [spring-beans-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290) [spring-beans-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192) [spring-beans-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585) [spring-beans-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895) [spring-context-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425) [spring-context-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:282) [spring-web-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:204) [spring-web-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47) [spring-web-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:3392) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3850) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_18]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_18]
    at java.lang.Thread.run(Thread.java:619) [rt.jar:1.6.0_18]
Caused by: javax.xml.ws.WebServiceException: java.lang.RuntimeException: java.net.BindException: Address already in use: bind
    at org.apache.cxf.jaxws.EndpointImpl.doPublish(EndpointImpl.java:350)
    at org.apache.cxf.jaxws.EndpointImpl.publish(EndpointImpl.java:239)
    at org.jboss.wsf.stack.cxf.client.ProviderImpl$DelegateEndpointImpl.publish(ProviderImpl.java:300)
    at org.springframework.remoting.jaxws.SimpleJaxWsServiceExporter.publishEndpoint(SimpleJaxWsServiceExporter.java:68) [spring-web-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at org.springframework.remoting.jaxws.AbstractJaxWsServiceExporter.publishEndpoints(AbstractJaxWsServiceExporter.java:154) [spring-web-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at org.springframework.remoting.jaxws.AbstractJaxWsServiceExporter.afterPropertiesSet(AbstractJaxWsServiceExporter.java:125) [spring-web-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477) [spring-beans-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417) [spring-beans-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    ... 20 more 
```

# web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" version="2.5">

    <display-name>subscription-barring-service</display-name>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/generic-applicationContext.xml</param-value>
    </context-param>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
        </listener>
</web-app> 
```

# 应用上下文：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jee="http://www.springframework.org/schema/jee"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:task="http://www.springframework.org/schema/task"
    xsi:schemaLocation="
            http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
            http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.0.xsd
            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
            http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
            http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.0.xsd">

        <context:component-scan
            base-package="org.bluewin.bwsso.services.barring" />

        <bean class="org.springframework.remoting.jaxws.SimpleJaxWsServiceExporter"/>
</beans> 
```

# 网络服务：

```
@Service("terminateSessionsEndpoint") 
@WebService(serviceName = "TerminateSessionsEndpoint", portName = "TerminateSessionsEndpoint")
public class TerminateSessionsEndpoint extends SpringBeanAutowiringSupport {

    private Logger logger = Logger.getLogger(TerminateSessionsEndpoint.class);

    @Autowired
    Service serviceImpl;

    @WebMethod(operationName = "TerminateAllSessionsForAccountId")
    @WebResult(name = "TerminateAllSessionsResponse") 
    public TerminateAllSessionsResponseVO terminateAllSessionsForAccountId(
            @WebParam(name = "TerminateAllSessionsRequest") 
            TerminateAllSessionsRequestVO requestWS) {

        //do some logic..
    }
} 
```

任何线索我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T08:36:42.400

我在部署具有类似配置的 JAX-WS 时也遇到了问题。实际上，使用 Spring 文档章节“19.5.5 使用 JAX-WS 公开基于 servlet 的 Web 服务”中描述的 SpringBeanAutowiringSupport 不能按预期工作。

请参阅文档[http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/remoting.html#remoting-web-services](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/remoting.html#remoting-web-services)

但是你在这里尝试使用 SimpleJaxWsServiceExporter 是错误的。spring doc 的“19.5.6 使用 JAX-WS 导出独立 Web 服务”一章。

这与 jboss 已注册的 Web 服务发生冲突。

**为了证明尝试使用更新的端口号应用程序上下文**进行以下配置 ：

 **```
<bean class="org.springframework.remoting.jaxws.SimpleJaxWsServiceExporter">
   <property name="baseAddress" value="http://localhost:8081/"/>
</bean> 
```

最后，您将运行暴露的两个服务

```
http://localhost:8080/war-root/MyService?wsdl
http://localhost:8081/MyService?wsdl 
```

至于现在，我发现了其他人提出的两种解决方法：

1.  使用 org.springframework.beans.factory.config.AutowireCapableBeanFactory：[Jax-ws、spring 和 SpringBeanAutowiringSupport](https://stackoverflow.com/questions/2943082/jax-ws-spring-and-springbeanautowiringsupport)
2.  将依赖注入移动到@PostConstruct 方法：[JBoss 6 + Spring 3.0.5 + JAX-WS/CXF](https://stackoverflow.com/questions/5350723/jboss-6-spring-3-0-5-jax-ws-cxf)

两种解决方法都可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T16:26:53.983

肯定是端口问题。例外很明显。

```
Caused by: javax.xml.ws.WebServiceException: java.lang.RuntimeException: java.net.BindException: Address already in use: bind 
```

从您的评论中，您表明在端口 9999 上监听了一些东西，`<property name="baseAddress" value="http://localhost:9999/ws/" />`. `management-native`默认端口是端口 9999。如果您在您的下方查看，您可能`standalone.xml`会`<socket-binding-group/>`看到类似以下内容。

```
<socket-binding-group name="standard-sockets" default-interface="public" port-offset="${jboss.socket.binding.port-offset:0}">
    <socket-binding name="management-native" interface="management" port="${jboss.management.native.port:9999}"/>
    <socket-binding name="management-http" interface="management" port="${jboss.management.http.port:9990}"/>
    <socket-binding name="management-https" interface="management" port="${jboss.management.https.port:9443}"/>
    <socket-binding name="ajp" port="8009"/>
    <socket-binding name="http" port="8080"/>
    <socket-binding name="https" port="8443"/>
    <socket-binding name="osgi-http" interface="management" port="8090"/>
    <socket-binding name="remoting" port="4447"/>
    <socket-binding name="txn-recovery-environment" port="4712"/>
    <socket-binding name="txn-status-manager" port="4713"/>
    <outbound-socket-binding name="mail-smtp">
        <remote-destination host="localhost" port="25"/>
    </outbound-socket-binding>
</socket-binding-group> 
```

对于使用以下命令独立启动的测试。

```
$JBOSS_HOME/bin/standalone.sh -Djboss.management.native.port=19999 
```**

# java - Hibernate：插入ManyToMany，在关系表中生成ID

> ID：10445970
> 
> 赞同：5
> 
> 时间：2012-05-04T09:12:06.813
> 
> 标签：java, hibernate, jpa

让我有表格（书籍和作者有多对多关系）

**书
id **book_name**** 

 ****作者**
id
author_name

**BOOKS_AUTHORS**
id
book_id
author_id

我将此表映射到实体上

```
class Books  
{  
   @Id  
   long id;  

  @Column(name = "author_name")
   String name;

   @ManyToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL)
   @JoinTable(name = "BOOKS_AUTHORS", 
              joinColumns = @JoinColumn(name = "book_id"),
              inverseJoinColumns = @JoinColumn(name = "author_id"))  
   List<Authots> authors;  

// setter, getters, adder  
}  

class Authors  
{  
   @Id  
   long id;  

   @Column(name = "author_name")
   String name;

   @ManyToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL)
   @JoinTable(name = "BOOKS_AUTHORS", 
              joinColumns = @JoinColumn(name = "author_id"),
              inverseJoinColumns = @JoinColumn(name = "book_id"))  
   List<Books> books;  

// setter, getters, adder  
} 
```

现在，我尝试下一步

```
public void addAuthor(final String bookName, final Author author)
{  
      final Book book = // get book from database by bookName
      if (book == null)
         throw new DataNotFoundException("Book not found :(");
      author.addBook(book);
      book.addAuthor(author);  
      entityManager.persist(author);  
} 
```

1) 我得到 BOOKS_AUTHORS 记录的 ID 不能为 NULL 的异常
2) 我如何为关系表 BOOKS_AUTHORS 生成 ID（序列生成器）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-04T09:22:24.807

您不能用于`@ManyToMany`创建带有 id 字段的连接表。

如果连接表中的 id 字段是必需的，则必须为该表创建一个特殊的实体类（例如），并将其与具有/关系`BookAuthor`的书籍和作者连接起来。`@ManyToOne``@OneToMany`

否则，您需要从`BOOKS_AUTHORS`表中删除 id 字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T09:19:44.190

```
@Id
@GeneratedValue(strategy=GenerationType.AUTO)
private long id; 
```

如果`books_authors`没有使用 Hibernate 映射，则使用数据库端自动 id 增量器。例子：

```
ALTER table book_authors CHANGE id long NOT NULL AUTO_INCREMENT; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T09:27:47.560

尝试使用[投影](http://www.163jsp.com/help/hibernate32api/org/hibernate/criterion/Projections.html)

```
 session.CreateCriteria(typeof (BOOKS_AUTHORS))
                           .SetProjection(Projections.Max("Id"))
                           .UniqueResult() 
```

并添加到它+1 :) 对不起它的.net 代码我不熟悉java 希望它会帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-21T11:22:05.777

在**SpringBoot 1.5.3**和**spring-boot-starter-data-jpa**中，您可以使用 annotation `{@OrderColumn(name = "id")}`。对于你的例子，它应该看起来像：

```
 @ManyToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL)
       @JoinTable(name = "BOOKS_AUTHORS", 
          joinColumns = @JoinColumn(name = "author_id"),
          inverseJoinColumns = @JoinColumn(name = "book_id")) 
    @OrderColumn(name = "id")             
    List<Books> books; 
```**

# jquery - jQuery：有没有办法使用数组选择器选择多个元素？

> ID：10445974
> 
> 赞同：0
> 
> 时间：2012-05-04T09:12:20.643
> 
> 标签：jquery

是否可以使用**数组选择器**选择多个元素？

如果是这样，最好的方法是什么？在我的项目中，我只需要使用数组选择器。

这是我的示例代码：

```
<ul>
    <li>1<li>
    <li>2<li>
    <li>3<li>
    <li>4<li>
    <li>5<li>
</ul>
<a href="#">select</a>​

$('a').click(function(){
    var element = $('ul').find('li')[0]; // Instead is it possible $('ul').find('li')[0,3,4]? I know we can select finding each alone. But is there any shortcut?
    $(element).css({border:'1px solid red'});
})​ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T09:17:01.267

这将给出预期的结果。只需按[index()](http://api.jquery.com/index/)过滤并使用[inArray()](http://api.jquery.com/jQuery.inArray/)。

```
var arr = [0, 3, 5];
$('ul li').each(function() {
    if ($.inArray($(this).index(), arr) < 0)
        return;
    // Code here!
    $(this).css('border', '1px solid red');
}); 
```

基本上所有的`<li>`都通过 each() 运行，然后我循环检查给定的 .index() 是否在给定的数组中。如果它们不存在（ $.inArray() == -1 ），那么我会返回；跳过执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T09:27:53.063

这是一种性感的方法：`Array`按照另一个答案中的建议向 JavaScript 对象添加自定义方法。

```
Array.prototype.filter = function(indexes) {
    var array = new Array();
    for(var i=0; i<indexes.length; i++) {
        array.push(this[indexes[i]]);
    }
    return array;
}; 
```

调用它：

```
$('ul').find('li').filter([0,3,4]).anything(); 
```

如您所愿的自定义通用快捷方式:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T09:28:31.573

一种选择是使用[filter](http://api.jquery.com/filter/)；

```
var indexArray = [1,3,4];
$('ul li').filter(function(index) {
    return jQuery.inArray($(this).index(), indexArray) > -1;
}); 
```

还使用[$.inArray](http://api.jquery.com/jQuery.inArray/)和[index()](http://api.jquery.com/index/)。查看[演示](http://jsfiddle.net/st3fan/DsN5d/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T09:19:37.650

也许这会起作用（但性能不太好）：

```
$('ul li:nth-child(0),ul li:nth-child(2)'); 
```

或这个：

```
$('ul li:eq(0),ul li:eq(2)'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T09:23:12.833

您也可以使用 forEach of array

```
arr = "013".split("");
arr.forEach(function(a,b){
    var element = $('li')[a]; 
    console.log(element);
    $(element).css({border:'1px solid red'});
}); 
```

这是[小提琴](http://jsfiddle.net/ranganadh/t4CSH/1/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T09:26:14.973

循环它

```
$('a').click(function() {
    var element = $('ul').children('li');
    var count = 0;
    for (x in element) {
        count++;
        if ((count == 0) || (count == 3) || (count == 5))
            x.css({ border: '1px solid red' });
    }
}); 
```

# python - Python游戏中的非阻塞UDP服务器？

> ID：10445978
> 
> 赞同：1
> 
> 时间：2012-05-04T09:12:29.007
> 
> 标签：python, sockets, udp, twisted, pygame

我正在用 Python 制作动作游戏。它必须支持至少 2 名玩家通过 Internet 一起玩。我选择了 UDP，因为它似乎是低延迟游戏的自然选择。我将使用客户端-服务器模型，我希望一个玩家主持游戏。这意味着一名玩家同时托管游戏（服务器）和运行游戏（客户端）。

我应该为此使用线程还是有其他方法？问题是 Python 文档说要使用 serve_forever 但我需要一个非阻塞解决方案，理想情况下我可以调用每个游戏循环。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T09:49:48.487

我假设，通过您对“Python 文档说要使用 serve_forever”的引用，您打算使用 SocketServer。该模块实现了同步（分叉或线程）服务器，您似乎正在寻找异步解决方案。

对于异步的、非阻塞的解决方案，您可以查看twisted [http://twistedmatrix.com/trac/](http://twistedmatrix.com/trac/)（特别是twisted.internet）。

或者，您需要一些非常具体的东西并且不介意编写事件循环，只需使用 poll 或 select 获取套接字和其他资源......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T15:05:24.293

UDP 不是“自然选择”。它是针对特定类型数据（通常是位置/速度数据）的特定类型问题（丢包）的优化。

您应该坚持使用 TCP，直到您可以证明您的游戏存在问题。

要将非阻塞网络集成到 Python 中的游戏中，请看一下[Game](https://launchpad.net/game)采用的方法，它从 Twisted 调用 PyGame 主循环。这同样适用于 TCP、UDP 或任何其他使用套接字的协议。

# android - 通过 Android 上的原生 Twitter 应用打开 Twitter 推文

> ID：10445980
> 
> 赞同：4
> 
> 时间：2012-05-04T09:12:39.927
> 
> 标签：android, twitter

一条推文可以通过浏览器打开，链接格式为：

> [http://twitter.com/1Direction_X/statuses/197752514391715842](http://twitter.com/1Direction_X/statuses/197752514391715842)

如何从我的应用程序中通过本机 Twitter 应用程序打开上述推文。

使用 iOS，我可以通过以下语句来做：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"twitter://status?id=197752514391715842"]]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-30T03:27:47.943

在 Android 上，您可以使用此链接在本地 Twitter 应用程序中打开推文

twitter://status?status_id=197752514391715842

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T09:27:29.313

您通常使用`Intent.ACTION_SEND`意图打开共享对话框，然后用户可以在其中选择 twitter 应用程序。

我发现本教程可用于直接启动 twitter 应用程序：http: [//blog.rafaelsanches.com/2010/06/18/using-native-twitter-app-intent-to-share-on-android /](http://blog.rafaelsanches.com/2010/06/18/using-native-twitter-app-intent-to-share-on-android/)

# jquery - 缓动滚动

> ID：10445981
> 
> 赞同：0
> 
> 时间：2012-05-04T09:12:43.063
> 
> 标签：jquery, scroll, mousewheel, easing

我花了很多时间来寻找一个 jquery 代码，以确保我可以使用缓动效果滚动。

我知道您可以使用 jQuery Mousewheel 来操作它，但我无法实现缓动效果，例如：[http ://www.loisjeans.com/web2012/es](http://www.loisjeans.com/web2012/es)

我很感激我能得到的所有帮助，让我朝着正确的方向前进。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T09:20:43.150

如果缓动是指惯性，请尝试 iScroll。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T12:30:32.083

品牌标识

请花一些时间使用[http://manos.malihu.gr/jquery-custom-content-scroller](http://manos.malihu.gr/jquery-custom-content-scroller)制作滚动条，因为它确实有效

在滚动容器上使用 100% 的高度和宽度，然后您可以在身体上添加具有 100% 高度和宽度的 css，并通过应用溢出：隐藏您删除正常的滚动条，并且可以在适当的位置设置新滚动条的样式。

它确实有效：D

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T09:17:07.643

这可能会有所帮助： http: [//manos.malihu.gr/tuts/jquery_custom_scrollbar.html](http://manos.malihu.gr/tuts/jquery_custom_scrollbar.html)

# python - AppEngine Python上的Facebook“登录”（OAuth2）

> ID：10445985
> 
> 赞同：4
> 
> 时间：2012-05-04T09:13:02.810
> 
> 标签：python, facebook, google-app-engine, oauth-2.0

我有以下处理程序

首先，用户调用此处理程序并被重定向到 Facebook：

```
class LoginFacebookHandler(BasicHandler):
    def get(self):
        user = self.auth.get_user_by_session()
        if not user:
            h = hashlib.new('sha512')
            h.update(str(datetime.now())+"abc")
            nonce = h.hexdigest()
            logging.info("hash "+str(nonce))
            memcache.set(str(nonce), True, 8600)
            #facebook_uri = "https://www.facebook.com/dialog/oauth?client_id=%s&redirect_uri=%s&state=%s&scope=%s" % ("20773", "http://upstrackapp.appspot.com/f", str(nonce), "email")
            data = {"client_id": 20773, "redirect_uri": "http://***.appspot.com/f", "state": str(nonce), "scope": "email"}
            facebook_uri = "https://www.facebook.com/dialog/oauth?%s" % (urllib.urlencode(data))
            self.redirect(facebook_uri) 
```

在他授权我的应用程序 facebook 重定向到重定向 URI（处理程序）后：

```
class CreateUserFacebookHandler(BasicHandler):
    def get(self):
        state = self.request.get('state')
        code = self.request.get('code')
        logging.info("state "+state)
        logging.info("code "+code)
        if len(code) > 3 and len(state) > 3:
            cached_state = memcache.get(str(state))
            logging.info("cached_state "+str(cached_state))
            if cached_state:
                #memcache.delete(str(state))
                data = { "client_id": 20773, "redirect_uri": "http://***.appspot.com/f", "client_secret": "7f587", "code": str(code)}
                graph_url = "https://graph.facebook.com/oauth/access_token?%s" % (urllib.urlencode(data))
                logging.info("grph url "+graph_url)

                result = urlfetch.fetch(url=graph_url, method=urlfetch.GET)
                if result.status_code == 200:
                    fb_response = urlparse.parse_qs(result.content)
                    access_token = fb_response["access_token"][0]
                    token_expires = fb_response["expires"][0]
                    logging.info("access token "+str(access_token))
                    logging.info("token expires "+str(token_expires))
                    if access_token:
                        api_data = { "access_token": str(access_token)}
                        api_url = "https://graph.facebook.com/me?%s" % (urllib.urlencode(api_data))
                        logging.info("api url "+api_url)
                        api_result = urlfetch.fetch(url=api_url, method=urlfetch.GET)
                        if api_result.status_code == 200:
                            api_content = json.loads(api_result.content)
                            user_id = str(api_content["id"])
                            email = str(api_content["email"])
                            logging.info("user id "+str(user_id))
                            logging.info("email "+str(email))
                            h = hashlib.new('sha512')
                            h.update(str(user_id)+"abc")
                            password = h.hexdigest()
                            expire_data = datetime.now() + timedelta(seconds=int(token_expires))
                            user = self.auth.store.user_model.create_user(email, password_raw=password, access_token=access_token, token_expires=expire_data, fb_id=user_id)
                        else:
                            self.response.write.out.write("error contacting the graph api")
                    else:
                        self.response.out.write("access token not long enough")
                else:
                    self.response.out.write("error while contacting facebook server")
            else:
                self.response.out.write("error no cached state")
        else:
            self.response.out.write("error too short") 
```

大多数情况下，这一直有效，直到代码尝试检索 access_token 并且我最终得到“联系时出错......”。有趣的是，我记录了所有 URL、状态等，所以我进入我的日志，复制并粘贴 urlfetch 尝试打开的 URL（fb api->access_token），将其粘贴到我的浏览器中，瞧，我的 access_token + 过期了。当代码试图从图表（graph/me）中获取用户信息时，有时也会发生同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T22:43:34.163

关键问题不是facebook。这是 AppEngine 部署过程。我总是实时测试代码的更改，而不是本地测试，因为 OAuth 无法正常工作。因此，该`deployment -> flush casche -> flush database`过程似乎有一定的延迟，导致工件保留，从而混淆了代码。

因此，如果您必须实时测试 OAuth 之类的东西，我建议将更改部署为应用程序的新版本，并在部署后删除所有可能在新版本中充当工件的数据。

# android - Android 动画示例

> ID：10445989
> 
> 赞同：0
> 
> 时间：2012-05-04T09:13:17.867
> 
> 标签：android, android-layout

我是 Android 新手，我正在尝试创建动画，但我找不到任何有用的东西。我的任务是第一次单击按钮从按钮开始动画。我找不到任何关于它的例子。谁能告诉我链接或示例

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T12:55:18.997

看看[这个](http://android-er.blogspot.com/2011/09/implement-slide-in-and-slide-out.html)例子，也许你会在这里找到任何有用的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T09:14:50.380

您可以开始查看 Android API 演示 [http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/animation/index.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/animation/index.html)

# javascript - W3Schools 无法复制 tryit 编辑器

> ID：10445990
> 
> 赞同：0
> 
> 时间：2012-05-04T09:13:18.923
> 
> 标签：javascript, html, xml

我在 tryit 编辑器上测试了一些代码，当我在本地保存代码时无法复制功能，我想知道是否有人对为什么会发生这种情况有任何想法。

代码片段是

```
<html>
<head>
<script type="text/javascript" src="http://www.w3schools.com/dom/loadxmldoc.js"></script>
</head>
<body>  
<script type="text/javascript">
xmlDoc=loadXMLDoc("http://www.w3schools.com/dom/books.xml");
for (j=0;j<xmlDoc.getElementsByTagName("book").length;j++ )
{
    x=xmlDoc.getElementsByTagName("book")[j].childNodes;
    y=xmlDoc.getElementsByTagName("book")[j].firstChild;
    for (i=0;i<x.length;i++)
    {
        if (y.nodeType==1)  
        {
            //Process only element nodes (type 1)  
            document.write(y.nodeName + " : " +x[i].childNodes[0].nodeValue + "<br />");  
        }
        y=y.nextSibling;
    }
}
</script>
</body>
</html> 
```

有人可以告诉我我在这里做错了什么

提前谢谢了

编辑：感谢所有 w3schools 提示。我认为我滥用 tryit 的次数超过了我应该停止这样做的次数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T09:17:14.590

`loadXMLDoc()`w3schools 在幕后提供使用，`XMLHttpRequest`这是受同源策略限制的。(标准操作程序)

[SOP 规定](http://en.wikipedia.org/wiki/Same_origin_policy)您只能向同一域上的资源发出请求。

当您在本地保存文件时，您不再位于 w3schools 域中，因此无法访问其中的文件。

```
function loadXMLDoc(dname) {
    if (window.XMLHttpRequest) {
        xhttp = new XMLHttpRequest();
    }
    else {
        xhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xhttp.open("GET", dname, false);
    xhttp.send();
    return xhttp.responseXML;
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T09:16:37.023

您可能在这里遇到了相同的来源策略。

尝试在本地保存 XML 文件并从那里加载它，而不是从 w3schools 的远程服务器加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T09:17:06.590

首先，您应该避免使用 w3schools 作为参考[http://w3fools.com](http://w3fools.com)

其次，您不能像`loadXMLDoc`使用 AJAX 那样做到这一点，也不能使用 AJAX 请求不同域中的文档（除非您使用 JSONP，但这完全是另一个主题）

[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

# sql - 动态数据透视表，如何在不知道列名的情况下删除 NULL 值？

> ID：10445993
> 
> 赞同：1
> 
> 时间：2012-05-04T09:13:38.647
> 
> 标签：sql, sql-server-2008, tsql

好的，所以我让自己需要一个动态数据透视表，这很好。

我需要创建一个动态大小的临时表来保存这些值，最终我解决了这个问题。称之为#table

我可以在插入后摆脱空值而不动态执行它吗？我真的不想要更可怕的红色东西。

```
#table 

Year   CashflowID1   CashflowID2   CashflowID3........CashflowIDn   
 1      NULL          -4            1.23............... etc
 2      43            78            -34 ............... NULL 
```

每个现金流 ID 可能包含不同年份的数据，从而导致一堆空值。

像这样简单的东西

```
SELECT ISNULL(*,0) 
FROM   #table 
```

但是，你知道，这很聪明，而且确实有效。顺便说一句，我尝试使用默认值和不可为空的列设置#table，但这只是破坏了插入。

如果我遗漏了任何明显的东西，或者没有提供必要的信息，请大声喊叫。

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:06:21.623

所以，这有点混乱，但这里的想法

为此，我正在查询主表并以接收到的变量（日期时间）为中心。

```
declare @columns varchar(max)
declare @columnsisnull varchar(max)
declare @sql nvarchar(max)

SELECT  @columns = STUFF(( SELECT DISTINCT TOP 100 PERCENT '],[' + CONVERT(VARCHAR(7), m1.received, 120)
          FROM master m1 where m1.received between DATEADD(year, -1, getdate()) and GETDATE()
   ORDER BY  '],[' + CONVERT(VARCHAR(7), m1.received, 120) desc
   FOR XML PATH('')), 1, 2, '') + ']'

    SELECT  @columnsisnull = STUFF(( SELECT DISTINCT TOP 100 PERCENT ', isnull([' + CONVERT(VARCHAR(7), m1.received, 120) + '],0)'

          FROM master m1 where m1.received between DATEADD(year, -1, getdate()) and GETDATE()
   --ORDER BY  ', isnull([' + CONVERT(VARCHAR(7), m1.received, 120) + '],0)'
   FOR XML PATH('')), 1, 2, '') 
```

这看起来基本上像您获取 cols 的代码，不同之处在于 @columnsisnull 我只是将 isnull 函数附加到列中

然后为你的@sql

```
set @sql = N'SELECT name, ' + @columnsisnull + ' from master ) p
pivot(sum(amount) for received in ( '+@columns+')) as pvt'

execute(@sql) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T09:24:41.543

我建议使用默认值再尝试一次，此功能应该适用于您的情况。这是更复杂的解决方案，因为您将不依赖于查询中的逻辑，也不会使用 NULL 重复替换。

# iphone - JSON编码问题ios 5

> ID：10445995
> 
> 赞同：-1
> 
> 时间：2012-05-04T09:13:41.893
> 
> 标签：iphone, json, ios5, encoding

好的，我应该更好地解释这个问题。我正在开发一个 iPhone 应用程序来显示数据。数据是使用 php 文件从 Mysql 数据库中获取的。

在这里，我展示了 PHP 文件的代码：

```
<?php
header("text/html; charset=utf-8");
//Credenciales de la BBDD
$db = "json";
$host = 'localhost';
$username = "dpbataller";
$password = '1234';

//Conectamos al servidor de la Base de datos
$link = mysql_connect($host,$username,$password) or die("No se puede conectar");
//Seleccionamos la BBDD
mysql_select_db($db) or die ("No se ha podido seleccionar a la base de datos");
mysql_set_charset('utf8', $link);
//Lanzamos la consulta
$consulta = mysql_query("SELECT id,nombre from personas");
//Creamos un array para almacenar los resultados
$filas = array();
//Agregamos las filas devueltas al array
while ($r = mysql_fetch_assoc($consulta)) { 
$filas[] = $r;      
}
//Devolvemos el resultado
echo json_encode($filas);
?> 
```

此时，如果我在浏览器上运行脚本，他会返回 [{"id":"0","nombre":"Pep\u00e9"}]

此外，在 xcode 项目中，我编写了以下代码：

```
NSString *urlString = [NSString stringWithFormat:@"http://10.0.1.18/mysql_iphone/mostrar_personas.php"];

NSURL *url = [NSURL URLWithString:urlString];

NSData *data = [NSData dataWithContentsOfURL:url];

NSError *error;

NSDictionary *json = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];
NSLog(@"%@", json); 
```

控制台返回： ( { id = 0; nombre = "Pep\U00e9"; } ) 就像浏览器一样...这是我的问题，因为我有很多有口音的人...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T09:28:35.377

好吧，我猜你的问题是你的 JSON 不起作用，你需要使用 NSDictionary 而不是 NSArray：

```
 NSDictionary *json = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error]; 
```

那应该解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T09:47:52.310

您的 JSON 看起来很笨重，实际上它完全错误。它应该看起来更像这样：

```
[{
    "id":1,
    "name":"Jos \u00e9"
},
{
    "id":2,
    "name":"David"
}
] 
```

我建议您使用众多验证器之一检查 JSON 格式，例如：http: [//json.parser.online.fr/](http://json.parser.online.fr/)

**编辑** 看来你被调试器愚弄了......

我尝试了以下方法：

```
 NSError *error = nil;
    NSData *data = [@"[{\"id\":\"0\",\"nombre\":\"Pep\u00e9\"}]" dataUsingEncoding:NSUTF8StringEncoding];

    NSArray *json = [NSJSONSerialization JSONObjectWithData:data options:0 error:&error];
    NSLog(@"%@", json);

    NSDictionary *item = [json lastObject];
    NSString *nombre = [item objectForKey:@"nombre"];

    NSLog(@"%@", nombre); 
```

第一个 NSLog 将打印出转义字符，但提取的字符串实际上已正确编码为 UTF8。

**编辑 2**

你的代码已经在工作了，你不需要改变任何东西

```
NSString *urlString = [NSString stringWithFormat:@"http://10.0.1.18/mysql_iphone/mostrar_personas.php"];

NSURL *url = [NSURL URLWithString:urlString];

NSData *data = [NSData dataWithContentsOfURL:url];

NSError *error;

NSArray *items = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];

// This will print all the names of people in your JSON.
for (NSDictionary *item in items)
{
    NSLog(@"nombre: %@", [item objectForKey:objectForKey:@"nombre"]);
} 
```

# objective-c - Objective-C 中的最大递归深度

> ID：10445998
> 
> 赞同：4
> 
> 时间：2012-05-04T09:13:59.007
> 
> 标签：objective-c, recursion

Objective-C 的最大递归深度限制是多少？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T09:41:45.263

Objective-C 或大多数语言中没有预设的最大递归深度。

此外，一个简单的测试，你递归并计算直到你出错的次数也不能给你一个现实的答案，它可能会高估你在真实程序中可以达到的深度。

只要堆栈上有足够的空间用于您正在调用的方法/函数的*框架，您就可以继续调用。*帧包括各种管理信息（通常是固定大小）、保存寄存器（可变大小）和方法/函数的局部变量（可变大小）——因此没有单一的帧大小。

如果您想要一个粗略的近似值，您可以声明一个函数，其中包含代码中出现的局部变量的平均数量和类型，并计算可以递归调用它的次数。*这将为您提供正在运行的机器*的近似值。

Mac OS X 本身对堆栈大小施加了上限，您可以使用`ulimit -s`. 另请参阅此[Apple 文档](http://developer.apple.com/library/mac/#qa/qa1419/_index.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T09:18:16.850

它几乎肯定取决于堆栈的大小。

# mysql - InnoDB MySQL 会自动使用行级锁定吗？

> ID：10445999
> 
> 赞同：0
> 
> 时间：2012-05-04T09:14:01.260
> 
> 标签：mysql, innodb, myisam

我有一个当前使用 MyISAM 的 MySQL 数据库，但我正在考虑切换到 InnoDB，因为它的流量很高，并且对同一个表进行了大量写入，这导致访问者的加载时间变慢，然后必须等待每次写入在整个表被锁定时完成。

如果我更改为 InnoDB，它会自动使用行级锁定而不是表锁定吗？或者我必须进行任何查询修改。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T09:21:36.133

它对写操作具有自动行级锁定。如果您的写入次数多于读取次数，那么这是比 MyIsam 更好的选择。您无需更改查询。但是你可以做其他的改变方法。如果您插入的数据对立即查看并不重要，那么您可以留在 MyISam 上并使用`INSERT DELAYED`方法。我们在 highload 项目中使用了它，它在非常大的桌子上表现出色。