# StackOverflow 问答 12293000-12293999

# html - 在导航栏中显示当前页面的标记

> ID：12293001
> 
> 赞同：1
> 
> 时间：2012-09-06T04:31:01.733
> 
> 标签：html, css, navigation

我正在研究一种帮助用户在网站上导航的解决方案。目前，我的导航栏下方有一个面包屑导航栏，显示用户所在网站当前部分的完整路径。

我现在想创建一个脚本或使用 CSS 规则在导航栏中的选项卡下方显示一个标记，以显示用户所在的部分。有人可以告诉我我可以用来实现这一目标的一般方法吗？

请注意，我使用一个小的 .png 作为箭头标记，我想在每个选项卡下方显示它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T04:54:40.233

像这样：[**演示**](http://jsfiddle.net/akhurshid/f7d7K/)

**HTML：**

```
<ul>
    <li><a href="#">Home</a></li>
    <li class="active"><a href="#">About</a></li>
    <li><a href="#">Contact</a></li>
</ul>​ 
```

**CSS：**

```
.active {
       background:#ccc url(path/to/image/marker.png) center bottom no-repeat; 
} 
```

通过将标记切换为单击的链接，您需要使用 jQuery/Javascript 等脚本语言

**jQuery解决方案：**

```
$("ul li a").on('click', function(e){
   e.preventDefault();
   $(this).closest('li').addClass('active').siblings().removeClass('active')
});​ 
```

# objective-c - 目标 C 和 C++ 中的函数调用

> ID：12293006
> 
> 赞同：1
> 
> 时间：2012-09-06T04:31:24.977
> 
> 标签：objective-c, ios, xcode, function, methods

我有一些关于 Objective C 的一般性问题，我已经在线阅读了 Objective C 的基础知识，并且在一些书籍中，我怀疑我在哪里遇到了函数调用。在Objective C中，像这样将方法传递给对象......

```
eg: [object method]; // here object is objective C class. 
```

它将被视为消息传递。如果是这样，如果我像这样进行普通的 C++ 调用，那该怎么办...

```
eg: object->method(); // here object is C++ class. 
```

这也是在目标 C 中传递的消息，否则它将被视为普通 C++ 方式。

感谢您的澄清...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T04:33:06.647

如果`object`是 C++ 对象，`object->method()`则将是常规 C++ 调用。通常，两者（C++ 和 Objective-C）是不同的，但在某些情况下，您可以使用["Objective-C++"](http://en.wikipedia.org/wiki/Objective-C#Objective-C.2B.2B)将两者混合。

# cloud - Openstack Nova-network 无法启动

> ID：12293008
> 
> 赞同：3
> 
> 时间：2012-09-06T04:31:38.917
> 
> 标签：cloud, openstack

我尝试在 ubuntu 12.04 上安装 openstack essex，在完成所有进程后，我的 nova-network 运行不正常。

当我检查 /var/log/nova-network.log 上的错误消息时，我收到如下所示的错误消息：

```
Exit code: 2
Stdout: ''
Stderr: "Bad argument `SNAT'\nError occurred at line: 23\nTry `iptables-restore -h' or 'iptables-restore --help' for more information.\n"
2012-09-06 11:24:25 TRACE nova Traceback (most recent call last):
2012-09-06 11:24:25 TRACE nova   File "/usr/bin/nova-network", line 49, in <module>
2012-09-06 11:24:25 TRACE nova     service.wait()
2012-09-06 11:24:25 TRACE nova   File "/usr/lib/python2.7/dist-packages/nova/service.py", line 413, in wait
2012-09-06 11:24:25 TRACE nova     _launcher.wait()
2012-09-06 11:24:25 TRACE nova   File "/usr/lib/python2.7/dist-packages/nova/service.py", line 131, in wait
2012-09-06 11:24:25 TRACE nova     service.wait()
2012-09-06 11:24:25 TRACE nova   File "/usr/lib/python2.7/dist-packages/eventlet/greenthread.py", line 166, in wait
2012-09-06 11:24:25 TRACE nova     return self._exit_event.wait()
2012-09-06 11:24:25 TRACE nova   File "/usr/lib/python2.7/dist-packages/eventlet/event.py", line 116, in wait
2012-09-06 11:24:25 TRACE nova     return hubs.get_hub().switch()
2012-09-06 11:24:25 TRACE nova   File "/usr/lib/python2.7/dist-packages/eventlet/hubs/hub.py", line 177, in switch
2012-09-06 11:24:25 TRACE nova     return self.greenlet.switch()
2012-09-06 11:24:25 TRACE nova   File "/usr/lib/python2.7/dist-packages/eventlet/greenthread.py", line 192, in main
2012-09-06 11:24:25 TRACE nova     result = function(*args, **kwargs)
2012-09-06 11:24:25 TRACE nova   File "/usr/lib/python2.7/dist-packages/nova/service.py", line 101, in run_server
2012-09-06 11:24:25 TRACE nova     server.start()
2012-09-06 11:24:25 TRACE nova   File "/usr/lib/python2.7/dist-packages/nova/service.py", line 162, in start
2012-09-06 11:24:25 TRACE nova     self.manager.init_host()
2012-09-06 11:24:25 TRACE nova   File "/usr/lib/python2.7/dist-packages/nova/network/manager.py", line 1695, in init_host
2012-09-06 11:24:25 TRACE nova     self.l3driver.initialize()
2012-09-06 11:24:25 TRACE nova   File "/usr/lib/python2.7/dist-packages/nova/network/l3.py", line 84, in initialize
2012-09-06 11:24:25 TRACE nova     linux_net.init_host()
2012-09-06 11:24:25 TRACE nova   File "/usr/lib/python2.7/dist-packages/nova/network/linux_net.py", line 442, in init_host
2012-09-06 11:24:25 TRACE nova     add_snat_rule(ip_range)
2012-09-06 11:24:25 TRACE nova   File "/usr/lib/python2.7/dist-packages/nova/network/linux_net.py", line 432, in add_snat_rule
2012-09-06 11:24:25 TRACE nova     iptables_manager.apply()
2012-09-06 11:24:25 TRACE nova   File "/usr/lib/python2.7/dist-packages/nova/utils.py", line 943, in inner
2012-09-06 11:24:25 TRACE nova     retval = f(*args, **kwargs)
2012-09-06 11:24:25 TRACE nova   File "/usr/lib/python2.7/dist-packages/nova/network/linux_net.py", line 334, in apply
2012-09-06 11:24:25 TRACE nova     attempts=5)
2012-09-06 11:24:25 TRACE nova   File "/usr/lib/python2.7/dist-packages/nova/network/linux_net.py", line 813, in _execute
2012-09-06 11:24:25 TRACE nova     return utils.execute(*cmd, **kwargs)
2012-09-06 11:24:25 TRACE nova   File "/usr/lib/python2.7/dist-packages/nova/utils.py", line 242, in execute
2012-09-06 11:24:25 TRACE nova     cmd=' '.join(cmd))
2012-09-06 11:24:25 TRACE nova ProcessExecutionError: Unexpected error while running command.
2012-09-06 11:24:25 TRACE nova Command: sudo nova-rootwrap iptables-restore
2012-09-06 11:24:25 TRACE nova Exit code: 2
2012-09-06 11:24:25 TRACE nova Stdout: ''
2012-09-06 11:24:25 TRACE nova Stderr: "Bad argument `SNAT'\nError occurred at line: 23\nTry `iptables-restore -h' or 'iptables-restore --help' for more information.\n"
2012-09-06 11:24:25 TRACE nova 
```

这意味着什么 ？

我应该怎么做才能解决这个问题？

Tks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-03T18:02:53.413

这似乎是一个令人讨厌的错误，现在接下来的操作将解决问题：

[root@server nova]# vim **/etc/nova/nova.conf**

添加：

**fixed_range = 10.11.0.0/24** #####（无论你的网络是什么，不要添加评论）

**service openstack-nova-network restart** 停止 openstack-nova-network: [FAILED] 启动 openstack-nova-network: [ OK ]

2014-04-03 19:58:24 801893 AUDIT nova.service [-] 启动网络节点（版本 2012.2.4-1.el6）

2014-04-03 19:58:48 801893 INFO nova.openstack.common.rpc.impl_qpid [-] 连接到控制器上的 AMQP 服务器：5672

希望这可以帮助。

# ruby-on-rails - 需要在 rspec 中调用 stub() 和 should_receive() 以获得视图部分规范

> ID：12293012
> 
> 赞同：0
> 
> 时间：2012-09-06T04:31:53.947
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, rspec2, rspec-rails

我一直对 rspec (v2.8) 中的 should_receive() 感到困惑

我的理解是，它既对方法进行了存根——就像 stub() 所做的那样——并设定了将调用这个存根方法的期望。

但是，在尝试使用它来存根从视图部分调用的辅助方法时，我不断收到错误消息：

```
Failure/Error: render 'invitations/header'
 ActionView::Template::Error:
   undefined method `require_javascript' for #<#<Class:0x7fe21d03d9f8>:0x7fe21cfd0c40> 
```

最后，我还必须添加一个 stub() 方法**以**使测试成功通过。此代码如下所示 - 当我删除 before 块时，我得到上面显示的错误。

```
describe 'invitation/header' do

  before do
    view.stub(:require_javascript)  # Why is this required ?!
  end                                                           

  it "should initialize the expandable section javascript" do
    view.should_receive(:require_javascript).with('expandable_section')
    render 'invitations/header'
  end

  ...
end 
```

请注意，我在此文件中有许多其他测试，其中没有一个需要 stub() 方法才能成功通过。所以我很困惑为什么在这种情况下需要它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-11T19:31:01.007

当您删除该存根时，您的测试将失败，因为它期望`view.should_receive(:require_javascript).with('expandable_section')`.

存根意味着您基本上是在重影方法调用。当您`render`查看您的“存根”时，就好像该方法实际上会返回一些东西一样。

你可以在这里阅读更多：[https ://relishapp.com/rspec/rspec-mocks/v/2-4/docs/method-stubs](https://relishapp.com/rspec/rspec-mocks/v/2-4/docs/method-stubs)

# html - 为什么我在 CSS 中用于填充的百分比不起作用？

> ID：12293016
> 
> 赞同：-2
> 
> 时间：2012-09-06T04:32:36.377
> 
> 标签：html, css, padding

我在我的 CSS 中使用百分比而不是像素来填充，但它们不起作用。

```
.menu li a{ padding-left:5%; padding-right:5%;} 
```

我想使用百分比来使菜单部分在所有维度上都具有响应性。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T04:43:17.337

你写的在技术上是好的。它可能会被覆盖——但这只是一种可能性。它还取决于父元素的宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T04:41:03.313

嘿，现在在您的锚链接中定义像素值

替换`%`_`pixel value`

```
padding-left:5px;
padding-right:5px; 
```

***[演示](http://jsfiddle.net/DrPQe/2/)***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T04:51:22.327

% 在这里工作，但您在 'li' 元素内的锚标记没有指定任何宽度，这就是您看不到效果的原因。

如果你想看到效果，尝试在“#coolMenu li a”中放置“width: 100px”，你会立即看到 % padding 的效果。

# c# - UploadModule 未安装到 web.config

> ID：12293022
> 
> 赞同：0
> 
> 时间：2012-09-06T04:33:08.933
> 
> 标签：c#, asp.net, image-processing, web-config

当我尝试上传图片时，出现错误

```
UploadModule is not installed into web.config 
```

请帮助找出解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-24T03:44:17.293

```
protected void Page_Load(object sender, EventArgs e)
{
   Context.Items[typeof(CuteWebUI.UploadModule)] = true;
} 
```

# java - 从 WSDL 创建 Java 文件后，如何调用服务？

> ID：12293023
> 
> 赞同：0
> 
> 时间：2012-09-06T04:33:21.493
> 
> 标签：java, wsdl

我是网络服务的初学者。

我用给定的 WSDL 文件创建了一个 jar；现在我该如何使用该服务？那里似乎没有API。

看起来有许多工具可用于从 WSDL 生成 Java 代码。使用不同的工具是否意味着调用服务的方式不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T04:50:49.627

[这会帮助你](https://stackoverflow.com/questions/8654517/creating-client-for-web-service/8654927#8654927)。它解释了如何调用已暴露的 Web 服务。

# c++ - 对于 C++ 项目，什么是好的交互式语言解析器？

> ID：12293026
> 
> 赞同：1
> 
> 时间：2012-09-06T04:33:42.420
> 
> 标签：c++, interactive

我正在开发一个 C++ 项目，该项目需要命令行界面才能在代码库的另一个区域启动命令。在单个会话中，可以通过此 CLI 发送任意数量的命令，格式均为`command-keyword [ param1 [ param2 [ ... [ paramN ] ] ] ]`.

我正在寻找一个图书馆：

*   解析来自给定命令的关键字和参数。
*   维护关键字到函数指针、关键字到最小和最大参数数量、错误消息等的映射。
*   当命令格式正确时调用映射函数，并在命令格式不正确或关键字不存在时正常失败。
*   依赖项非常轻量级（如果我能提供帮助，我不想导入整个 boost）。

我确信这在很大程度上是一个已解决的问题（也许我的 Google 和 SO 搜索失败了），但我似乎找不到适合我需要的库。

有没有人为此目的使用某个库？

tl;dr - 我正在寻找一个类似于 shell 的界面，我可以将其集成到我自己的 C++ 项目中以管理交互式命令解析。有什么好的，轻量级的资源吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:33:06.010

这可以满足您的要求：它以交互方式读取命令，就像交换机或路由器的控制台一样，它使用树结构来定义命令和选项。一个问题：它使用套接字而不是标准输入和标准输出。你可以修改它。 [https://github.com/dparrish/libcli](https://github.com/dparrish/libcli)

# postgresql - 记录到函数中的日志表会显示其中所有操作的相同时间，尽管它们相隔几分钟

> ID：12293027
> 
> 赞同：3
> 
> 时间：2012-09-06T04:33:42.480
> 
> 标签：postgresql, plpgsql

我有写入日志表的功能，其中`timestamp`包含`default current_timestamp`. 我的问题是来自函数运行的所有日志总是获得相同的时间戳，即使实际上运行开始和运行结束时的日志至少相隔几分钟。

我不知道这是否重要，但写入日志表是通过另一个函数完成的`write_to_log`。

如何使日志写入显示实时而不是（我猜）事务时间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T08:01:43.417

您将需要其中一个`statement_timestamp()`或`clock_timestamp()`函数，它们确实是 PostgreSQL 扩展。这些可以并且确实在交易期间发生变化。

另请参阅乔纳森的回答和文档：

[http://www.postgresql.org/docs/9.1/static/functions-datetime.html#FUNCTIONS-DATETIME-CURRENT](http://www.postgresql.org/docs/9.1/static/functions-datetime.html#FUNCTIONS-DATETIME-CURRENT)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T05:53:42.777

SQL 标准要求数据库服务器保持 SQL 语句即时执行的虚构。因此，当语句运行时，时间被冻结。通常，您会发现有一个非标准函数确实提供（真实的、非冻结的）当前时间，但标准定义的核心函数（CURRENT_TIMESTAMP、CURRENT_TIME）在语句执行时不允许更改。

# html - 给定已知子 DIV ID 的任何方式为父 DIV 编写 CSS？

> ID：12293029
> 
> 赞同：2
> 
> 时间：2012-09-06T04:33:56.397
> 
> 标签：html, css, dom, css-selectors

> **可能重复：**
> [是否有 CSS 父选择器？](https://stackoverflow.com/questions/1014861/is-there-a-css-parent-selector)

鉴于我无法更改 HTML 文件，只能更改 CSS 文件。

如果我只知道直接子 DIV ID，如何向父 DIV 添加一些 CSS？

例如：

```
<div>
  <div id="child">
    content
  </div>
</div> 
```

类似的东西： `#child:parent div`CSS 规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T04:35:54.750

不，css 选择器不支持它。在 css4 中有一些东西（但现在不可用）：

```
$div > #child {
  /* here code for parent div */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T05:08:04.450

试试这个，但它使用 jquery

```
$('#child').parent().css({'background-color':'green','color':'black'}); 
```

[演示](http://jsfiddle.net/krish/yWAUD/)

# ruby - 添加两个 ActiveRecord::Relation 对象

> ID：12293035
> 
> 赞同：9
> 
> 时间：2012-09-06T04:34:36.710
> 
> 标签：ruby, ruby-on-rails-3

你如何将两个关系加在一起？当我尝试 + 运算符时，它返回一个数组。但我需要它来返回关系。

谢谢，迈克

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T04:37:46.943

尝试：

```
new_relation = relation.merge(another_relation) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-01T18:59:09.483

您可以使用 Arel 约束添加两个 ActiveRecord::Relation

```
constraints_1 = Model.matching_one.arel.constraints
constraints_2 = Model.matching_two.arel.constraints

Model.where(constraints_1.and(constraints_2)).class => ActiveRecord::Relation 
```

您也可以使用 or 运算符

```
Model.where(constraints_1.or(constraints_2)).class => ActiveRecord::Relation 
```

真实例子

```
constraints_1 = User.where(id: 1..5).arel.constraints
constraints_2 = User.where('id != 2').arel.constraints

User.where(constraints_1.and(constraints_2)) 
```

您可以观看有关该[http://railscasts.com/episodes/355-hacking-with-arel的精彩截屏](http://railscasts.com/episodes/355-hacking-with-arel)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-25T01:27:29.087

如果您添加 ActiveRecord::Relation 对象以获得“OR”结果而不是“AND”（通过链接获得“AND”行为），并且您仍然需要结果是 ActiveRecord::Relation 才能发挥出色使用其他一些代码（例如 meta_search）....

```
def matching_one_or_two
  temp = Model.matching_one + Model.matching_two
  Model.where('id in (?)',temp.map(&:id))
end 
```

当然不是世界上最好的性能，但它会导致 ActiveRecord::Relation 对象指向“或”结果。

您也可以直接将“OR”放入 sql 中，而不是让 Rails 为您生成它，让您的数据库应用程序有机会更好地执行。一个例子：

Model.where("table_name.col = '一个' OR table_name.col = '两个'")

这也将返回一个 ActiveRecord::Relation 对象。

# sql - 具有不同时区的不同数据库的sql server。如何获取所有数据库的getdatetime

> ID：12293036
> 
> 赞同：4
> 
> 时间：2012-09-06T04:34:40.610
> 
> 标签：sql, sql-server

我有 4 个数据库，每个数据库都在不同的时区。
我如何获得所有这些的日期和时间`GetDateTime`。

通常我们得到服务器时间，但我需要数据库的日期和时间

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T05:32:56.583

如果您使用的是 SQL 2008 或更高版本，您可以查看

[SYSDATETIMEOFFSET](http://msdn.microsoft.com/en-us/library/bb677334.aspx) 和[SWITCHOFFSET](http://msdn.microsoft.com/en-us/library/bb677244.aspx)

通常，第一个是返回带有时区偏移部分的系统日期时间，例如 -07:00，第二个可以根据 datetimeoffset 和时区偏移属性计算时间。

由于时区**没有数据库级别设置**，您应该找到其他解决方案。

如果您想在**同一个 SQL Server**中管理一个应用程序，但要管理**4 个不同**的数据库，每个数据库都有正确的时区，我认为最好的方法是制作一个 SystemSetting（名称不重要）表，您可以在其中保存偏移量. 然后，您可以使用 SWITCHOFFSET 通过您需要的每个查询来计算给定数据库的正确时间。

或者您可以尝试使用虚拟机。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T05:14:37.143

如果这些是 SQL 2008 服务器或更高版本...

```
select sysutcdatetime() 
```

# java - 有没有一种方法可以将不同的 Java Web 应用程序组合到一个 Web 应用程序（战争）而不会相互影响？

> ID：12293041
> 
> 赞同：1
> 
> 时间：2012-09-06T04:35:14.977
> 
> 标签：java, web

我正在运行一个具有多种不同功能的应用程序，它们是完全独立的；唯一的原因是我一起运行它们是我在内存有限的小型 vps 上运行它们；

我期待着：

1.  单独开发每个模块

2.  使用一些 ant 任务将它们组合成一个应用程序；

对于一个ear文件，我们可以将几个不同的war文件合并为一个，它们可以正常运行而不会相互影响，但是，由于我正在运行一个tomcat并且不想涉及像jboss之类的重型容器，一个ear文件不可用；

有没有办法可以做到这一点？比如我们独立开发一些东西，然后把它们打包成一个jar，把它放到web-inf/lib中就可以了？谢谢。

我使用的选项：

1.  在一个应用程序中开发它们，使用不同的目录来分隔它们
2.  在许多不同的应用程序中开发它们并将它们部署为tomcat中的不同Web应用程序，但这似乎将web-inf / lib下的重复类加载到内存中，这不是一个好的选择，而我不喜欢将它们全部放在雄猫/库...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T04:38:19.470

您可以使用 Maven（如果您乐于使用 Maven 而不是 Ant）和适用于 Maven 的 Cargo 插件来执行此操作。它具有“uberwar”打包格式，允许将多个 WAR 文件合并到一个组合的 WAR 文件中。详细信息可在此处获得：

[http://cargo.codehaus.org/Merging+WAR+files](http://cargo.codehaus.org/Merging+WAR+files)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-21T22:23:26.287

您需要建造某种墙，因此会存在技术限制，以避免糟糕的开发人员破坏您的设计，从而产生不必要的依赖。您可以将所有 java 类放入新合并的 Web 项目中嵌入的不同 jar 中，并将 Web 内容保存在同一个项目中但单独的文件夹中。

Maven+SVN 可以为新项目托管和提供 jar。

# mobile - PhoneGap 或母语

> ID：12293044
> 
> 赞同：2
> 
> 时间：2012-09-06T04:36:01.477
> 
> 标签：mobile, cordova

我要开发**一个移动聊天应用程序**。我的应用程序将在 2 个移动平台（iOS 和 Android）上运行。其功能可能包括：

*   添加好友

*   在线查看好友

*   聊天和发送文件

*   ...

我之前为 Android（Android Java）和 iOS（Object-C）编写了应用程序。而现在，我开始学习PhoneGap。不知道选择最多的是什么？

我希望能得到您的帮助！非常感谢！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T04:42:43.107

PhoneGap 是跨平台的，它可以帮助您将额外的工作移植代码保存到不同的平台。它确实需要权衡某些低级 API 无法访问并且性能可能是一个问题。

在聊天客户端中，性能不是那么关键，我认为PhoneGap是一个不错的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T04:44:15.240

如果您可以使用他们首选的“本地”语言为这两个平台编写程序，那么使用 PhoneGap 就没有意义了。PhoneGap 适用于不打算学习 Java 或 Objective-C 的 Web 开发人员。然而，HTML+JavaScript 总是会比 Java 和 Objective-C 更慢并且提供更差的用户体验，这仅仅是因为 JavaScript 不是为高性能原生应用程序编程而设计的，而是为 web 脚本设计的。Java 是为此而设计的，并且在 Android 上具有高度优化的 VM（专为手机中通常较弱的硬件而设计），而 Objective-C 是完全原生的，可以从 iDevices 的处理器中榨取最佳性能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T04:49:17.630

如果您打算将网络套接字用于聊天应用程序，那么是的，性能可能是一个问题。

正如人们之前指出的那样，phonegap 适用于不打算学习objective-C 或java 的Web 开发人员。但同样，如果您希望参与 ios/android 的长期开发，objective-c 和 java 将是您的选择。如果只是为了这个项目，那么我真的不建议您承担所有的麻烦。

我是一位非常有经验的 Web 开发人员，在 c/c++ 和 java 方面有很强的背景。我必须/必须非常努力地让 ios 中的原生应用程序工作，但我选择了原生应用程序，因为我也将在其他项目中工作。

另外，使用 phonegap，您必须在 css/html 方面非常努力地工作，才能为应用程序提供原生的感觉。

# ruby - 别名方法递归

> ID：12293048
> 
> 赞同：1
> 
> 时间：2012-09-06T04:36:16.413
> 
> 标签：ruby, alias

[在来自ruby​​ docs](http://www.ruby-doc.org/core-1.9.3/Module.html#method-i-alias_method)的以下代码中，为什么不`orig_exit`最终以无限递归调用自身？

```
module Mod
  alias_method :orig_exit, :exit
  def exit(code=0)
    puts "Exiting with code #{code}"
    orig_exit(code)
  end
end
include Mod
exit(99) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T04:38:32.327

> 为什么 orig_exit 最终不会以无限递归方式调用自己？

因为这里没有递归。

首先，`exit`从最后一行 ( `exit(99)`) 开始调用，该行又调用`orig_exit`，这是一个不同的函数。除非`orig_exit`明确调用`exit`（没有理由相信它确实如此），否则不可能递归。返回时`orig_exit`，它的返回值也从那里返回`exit`。

`alias_method`*已将被*命名的方法重命名`exit`为`orig_exit`，然后定义了一个全新的函数 named `exit`。

# java - 正则表达式的实用程序类（第三个 jar 文件）？

> ID：12293057
> 
> 赞同：-1
> 
> 时间：2012-09-06T04:37:11.203
> 
> 标签：java, regex

是否有一个实用程序类或第三个 jar 文件可以让我们轻松使用正则表达式。

我希望它会提供以下方法：

```
boolean matchString(int length);

boolean matchInt(int min,int max);
...... 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T05:16:41.783

自 JDK 1.4 起， Java 通过标准包支持正则表达式`java.util.regex`，这是您真正应该使用的。

如果您正在寻找该包的实际 .jar，请查看`rt.jar`.

至于第三方 .jar 文件，您可以尝试：

*   [http://jakarta.apache.org/regexp/](http://jakarta.apache.org/regexp/)
*   [http://jakarta.apache.org/oro/](http://jakarta.apache.org/oro/)
*   [http://sourceforge.net/projects/jregex/](http://sourceforge.net/projects/jregex/)

# javascript - 将列收缩到图像网格的宽度

> ID：12293060
> 
> 赞同：0
> 
> 时间：2012-09-06T04:37:29.540
> 
> 标签：javascript, html, css

假设我有以下网站。

```
#left_column {
width: 200px;
}

<div id="left_column">
/* some content */
</div>

<div id="right_column">
/* A bunch of 100px width photos that are being floated */
</div> 
```

正如代码所暗示的，该站点由左栏和右栏组成。左列是 200 像素宽。右列将包含一堆图像。根据人的屏幕宽度，右列每行可能容纳 7 个图像，或者 10 个或更多。此外，每行的右侧几乎总是会留有空间（因为屏幕的宽度不是 100 的倍数）。

我希望 right_column 收缩图像周围的环绕，使其宽度不会超出最右侧图像的右边界。换句话说，我希望 right_column 的宽度等于可以适合每一行的图像的所有宽度的总和。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T10:14:07.853

使用 jQuery，我想出了这个：http: [//jsbin.com/ijedej/4/edit](http://jsbin.com/ijedej/4/edit)

```
$(document).ready( function() {
  var column_width = Math.floor(($("#body").innerWidth()-$("#left_column").width())/100)*100;
  $("#right_column").css("width", column_width);
}); 
```

所以这计算出有多少可用空间（`$("#body").innerWidth()`），减去左列的宽度，除以 100，将其下限得到一个整数，然后乘以 100 得到新的宽度。

你可能不用 jQuery 也能做到，但这不是我擅长的。

# java - 使用 SecurityContext 的 REST Web 服务的身份验证方法

> ID：12293064
> 
> 赞同：5
> 
> 时间：2012-09-06T04:38:27.667
> 
> 标签：java, web-services, rest, authentication, jax-rs

开发了一个 Java EE Web 应用程序，该应用程序具有使用 Jersey 的 REST Web 服务。

任何人都可以指出使用 Java 中的 SecurityContext 类（JAX-RS）对用户访问进行身份验证的 Java 代码示例或路径

请提出您能想到的任何其他方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T05:13:44.220

[这是关于SecurityContext](http://docs.oracle.com/cd/E24329_01/web.1211/e24983/secure.htm#RESTF255)的好教程试试这个

# mysql - 查询第一次状态改变的行

> ID：12293065
> 
> 赞同：0
> 
> 时间：2012-09-06T04:38:28.120
> 
> 标签：mysql, database, data-modeling

我有一个存储客户详细信息列表的表格，如下所示。我想要第一次更改状态的客户名称

```
CREATE TABLE 客户（Row_Id INT NOT NULL PRIMARY KEY auto_increment，
                       客户名称 VARCHAR(255),
                       Created_On 日期，
                       Customer_Email VARCHAR(255),  
                       looking_Positive tinyint)

```

表中的值如下所列

```

    插入客户（CustomerName、Created_On、Customer_Email、Looking_Positive）
                   VALUES('客户 A', '20120815', 'CustA@domain.com', 0),
                         ('客户 B', '20120815', 'CustB@domain.com', 0),
                         ('客户 C', '20120815', 'CustC@domain.com', 0),

                         （“客户 A”、“20120816”、“CustA@domain.com”、1）、
                         ('客户 B', '20120816', 'CustB@domain.com', 0),
                         ('客户 C', '20120816', 'CustC@domain.com', 0),

                         ('客户 A', '20120817', 'CustA@domain.com', 1),
                         ('客户 B', '20120817', 'CustB@domain.com', 0),
                         ('客户 C', '20120817', 'CustC@domain.com', 1),

                         ('客户 A', '20120818', 'CustA@domain.com', 1),
                         ('客户 B', '20120818', 'CustB@domain.com', 1),
                         ('客户 C', '20120818', 'CustC@domain.com', 0),

                         ('客户 A', '20120819', 'CustA@domain.com', 0),
                         ('客户 B', '20120819', 'CustB@domain.com', 1),
                         ('客户 C', '20120819', 'CustC@domain.com', 0),

                         ('客户 A', '20120820', 'CustA@domain.com', 1),
                         ('客户 B', '20120820', 'CustB@domain.com', 1),
                         ('客户 C', '20120820', 'CustC@domain.com', 0);

```

通过将表中的状态更改为 1 和 0，客户将被标记为积极和不积极，直到他们转换为销售。

我想要一个查询，它显示标记为看起来积极的客户，而不是第一次看起来积极，即从 0 到 1。请注意，客户名称应该是那些在特定日期第一次被标记为积极的客户。

即，如果我在 where 类中运行日期查询，并且日期为 20120816，它应该将客户 A 显示为 Look Positive，因为它在 20120815 上为 0，在 20120816 上更改为 1。

如果我在 where 类中运行日期查询，并且日期为 20120821，则不应将客户 A 显示为 Look Positive，因为它在 20120815 上为 0，而在 20120816 上更改为 1。

我想查询被标记为第一次看起来积极的客户

# java - Java 中的 Microsoft 翻译器中的 TranslateApiException

> ID：12293069
> 
> 赞同：0
> 
> 时间：2012-09-06T04:38:53.153
> 
> 标签：java, localization, language-translation, microsoft-translator

我目前正在尝试通过[此处](http://code.google.com/p/microsoft-translator-java-api/)`microsoft-translator-java-api`提供的连接到 Microsoft Translator 。我已经按照这里描述的步骤[，按照这里](http://www.microsoft.com/web/post/using-the-free-bing-translation-apis)[的](http://code.google.com/p/microsoft-translator-java-api/source/browse/trunk/microsoft-translator-java-examples/src/main/java/com/memetix/mst/examples/TranslateExample.java)简单代码，我设法发送了一些要翻译的句子。

但问题是，翻译只适用于**第一次**。当第二句发送到 api 时，`TranslateApiException`总是作为翻译结果生成，我必须等待大约 10 分钟才能发送新句子。

任何人都可以帮忙吗？
谢谢之前

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T13:37:20.760

要解决此问题：

1.  确保您订阅了翻译。在此处登录：[https ://datamarket.azure.com/account/datasets](https://datamarket.azure.com/account/datasets)

-- 它是否表明您有翻译订阅，并且它是活跃的？如果没有，就注册一个（可以免费使用200万字一个）

1.  确保您已在 Azure 上注册您的应用程序。在这里做： [https ://datamarket.azure.com/developer/applications](https://datamarket.azure.com/developer/applications)

-- 并使用该注册应用程序的客户端 ID 和客户端密码。

# java - 如何使用 Java 播放 MP3 文件？

> ID：12293071
> 
> 赞同：2
> 
> 时间：2012-09-06T04:39:25.513
> 
> 标签：java, audio, mp3, javafx-2, javasound

使用`Applet.AudioClip`我可以播放 .wav 文件，但如果我尝试在 MP3 文件上执行此操作，那么即使没有抛出异常，似乎也不会播放音频。

有没有办法用 Java 播放 MP3，无论是使用 Swing、Java FX 还是任何其他 Java 技术？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T04:49:25.657

```
package test;

import java.io.File;

import javax.media.Format;
import javax.media.Manager;
import javax.media.MediaLocator;
import javax.media.Player;
import javax.media.PlugInManager;
import javax.media.format.AudioFormat;

public class AudioTest {
public static void main(String[] args) {
    Format input1 = new AudioFormat(AudioFormat.MPEGLAYER3);
    Format input2 = new AudioFormat(AudioFormat.MPEG);
    Format output = new AudioFormat(AudioFormat.LINEAR);
    PlugInManager.addPlugIn(
        "com.sun.media.codec.audio.mp3.JavaDecoder",
        new Format[]{input1, input2},
        new Format[]{output},
        PlugInManager.CODEC
    );
    try{
        Player player = Manager.createPlayer(new MediaLocator(new File("data/audioFiles/abc.mp3").toURI().toURL()));
        player.start();
    }
    catch(Exception ex){
        ex.printStackTrace();
    }
}
} 
```

希望能帮助到你..

# c# - 为什么 MakeGenericType 在它创建的类型中加上反引号？

> ID：12293073
> 
> 赞同：0
> 
> 时间：2012-09-06T04:40:09.423
> 
> 标签：c#, unity-container

所以我在放屁，放屁来自《*ASP.NET MVC 2 In Action*》一书中的演示。没有任何真正的原因只是玩它。我试图用一个真正的 IOC 容器来实现一个示例（他们在示例代码中使用的那个是假的，当然可以工作）。我遇到的问题是 MakeGenericType 返回一个奇怪的类型，名称中有一个反勾号 1。我看了这个问题[What does a backtick in a type name mean in the Visual Studio debugger?](https://stackoverflow.com/questions/8593626/what-does-a-backtick-in-a-type-name-mean-in-the-visual-studio-debugger) 这似乎表明它只是为了展示目的？但似乎并非如此。

这是我的代码：

```
//here are the ways I tried to register the types
private static void InitContainer()
{
    if (_container == null)
    {
        _container = new UnityContainer();
    }
    _container.RegisterType<IMessageService, MessageService>();
    _container.RegisterType<IRepository, Repository>();
    _container.RegisterType(typeof(IRepository<Entity>), typeof(Repository<Entity>));
 } 
```

这是我试图实现的模型绑定器的代码：

```
public class EntityModelBinder: IFilteredModelBinder
{
    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        ValueProviderResult value = bindingContext.ValueProvider.GetValue(bindingContext.ModelName);
        if (value == null)
            return null;
        if (string.IsNullOrEmpty(value.AttemptedValue))
            return null;
        int entityId;
        if (!int.TryParse(value.AttemptedValue, out entityId))
            return null;
        Type repoType = typeof (IRepository<>).MakeGenericType(bindingContext.ModelType);
        var repo = (IRepository)MvcApplication.Container.Resolve(repoType, repoType.FullName, new ResolverOverride[0]);
        Entity entity = repo.GetById(entityId);
        return entity;
    }

    public bool IsMatch(Type modelType)
    {
        return typeof (Entity).IsAssignableFrom(modelType);
    }
} 
```

调用`container.resolve`总是会出现以下错误：

> 依赖解析失败，type = "MvcModelBinderDemo.IRepository`1[MvcModelBinderDemo.Entity]", name = "MvcModelBinderDemo.IRepository`1[[MvcModelBinderDemo.Entity, MvcModelBinderDemo, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null ]]”。异常发生时：解决时。

另外，我确实知道将 ref 放入其中`MvcApplication`有点`ModelBinder`草率，只是想弄清楚事情是如何工作的以及需要到达容器。

感谢您的任何意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T04:59:12.113

我认为问题在于您在`Resolve`. 尝试删除第二个参数`repoType.FullName`。

尝试使用`MvcApplication.Container.Resolve(repoType);`. 不要忘记`using Microsoft.Practices.Unity;`在 *.cs 文件的顶部添加。

您链接的问题中已经回答了反引号的含义。但是，你的结论是不正确的。它不仅用于显示目的。带有反引号的名称是您的类的 CLR 名称。
那不是你问题的根源。

# sql - LEFT OUTER JOIN 后输出中的重复条目

> ID：12293076
> 
> 赞同：0
> 
> 时间：2012-09-06T04:40:39.423
> 
> 标签：sql, sqlite, left-join

我有一个制表符分隔的两列文件“cluster-refSeq.csv”，其中包含数千个这样的条目：

```
chr10_100486611_100486680_+     NM_053314
chr10_102864904_102865004_-     NM_001013042
chr10_103280127_103280156_-     NM_001013042 
```

这里，“cluster”列中的条目是唯一的，但它们可以链接到多个 refSeq。

我有另一个文件“refSeq-symbol.csv”，其中包含数千个这样的条目：

```
NM_053314       Kcnj16
NM_053316       Ip6k1
NM_053317       Nr0b1 
```

在这里，refSeq 列中的条目是唯一的，但它们可以链接到多个符号。

每个文件中的行都是唯一的（没有重复的条目）。

我想加入这两个文件，以便第一个文件中的集群条目通过 refseq 条目链接到第二个文件的符号条目。我想要所有可能的有效组合。我想我想要的是一个 LEFT OUTER JOIN。

所需的输出应如下所示：

```
chr10_100486611_100486680_+     NM_053314       Kcnj16 
```

我试图用 sqlite 做到这一点：

```
create table alpha (cluster text, refseq text);
create table beta (refseq text, symbol text);
.separator "\t"
.import cluster-refSeq.csv alpha
.import refSeq-symbol.csv beta
select alpha.cluster, alpha.refseq, beta.symbol from alpha left outer join beta on alpha.refseq=beta.refseq; 
```

这确实生成了我想要的输出（我认为），但它确实包含重复的条目！

即，如果我通过 sort 和 uniq 运行输出，我会得到更少的三元组。

我的问题是：我是否真的在做我认为我正在使用上面的 sqlite 代码做的事情，为什么我会得到重复的输出行？如何修复我的 sqlite 代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:08:25.767

如果您在查询中添加 distinct，这将消除重复的行

```
select distinct alpha.cluster,... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T05:14:59.570

由于重复的行使用**DISTINCT**

但是，如果您想实现您在问题中所写的内容，那么我认为您需要**INNER JOIN**而不是**LEFT JOIN**

```
chr10_100486611_100486680_+     NM_053314
chr10_102864904_102865004_-     NM_001013042
chr10_103280127_103280156_-     NM_001013042

NM_053314       Kcnj16
NM_053316       Ip6k1
NM_053317       Nr0b1 
```

使用左连接，输出将是：

```
chr10_100486611_100486680_+     NM_053314       Kcnj16
chr10_102864904_102865004_-     NM_001013042    NULL
chr10_103280127_103280156_-     NM_001013042    NULL 
```

代替：

```
chr10_100486611_100486680_+     NM_053314       Kcnj16 
```

# javascript - JS 无法支持 firefox 15.0

> ID：12293082
> 
> 赞同：0
> 
> 时间：2012-09-06T04:42:34.447
> 
> 标签：javascript

这是我的 JS

```
function validate(evt) {
  var theEvent = evt || window.event;
  var key = theEvent.keyCode || theEvent.which;
  key = String.fromCharCode( key );
  var regex = /[0-9]/;
  if( !regex.test(key) ) {
    theEvent.returnValue = false;
    if(theEvent.preventDefault) theEvent.preventDefault();
  }
} 
```

该脚本仅适用于`input`标签，只能输入数字。

它在谷歌浏览器上运行良好，但在 Firefox 15.0 退格、删除、箭头键不起作用

这是Firefox的错误，还是我的脚本有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T04:56:35.780

原因是 Chrome 和 IE 不会触发这些特殊键（退格、删除、箭头键）的按键事件。

但是对于 Firefox，该事件将被触发，并且匹配正则表达式失败，因此`theEvent.preventDefault()`将被执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T05:08:45.990

正如 xdazz 所说：

```
var key = theEvent.keyCode || theEvent.which; 
```

`key`是按键的 ASCII 码。退格是 8，删除是 46。

```
var key = theEvent.keyCode || theEvent.which; 
```

现在该代码已转换为字符。退格键和删除键不映射到数字，因此正则表达式会导致默认操作被阻止。

该策略是有缺陷的，因为在将字段提交到服务器之前，您不关心字段的值是什么，因此在用户离开字段和提交表单时验证内容（并且总是再次在服务器上） .

用户可以通过除按键以外的多种方式将数据放入表单字段，因此使用字段的值（而不是按下的键）进行验证。它更简单，更不容易出错。

# bash - bash cmdline 标记器/相对频率直方图... uniq 失败

> ID：12293087
> 
> 赞同：0
> 
> 时间：2012-09-06T04:43:33.353
> 
> 标签：bash

为了好玩，我想用命令行工具在 bash 中编写这个脚本。

```
# make the corpus
echo -e "this \t is   a \n cor-pus;  \nthis  \t\nis \n\t sparta. \n" > corpus.txt

# munge, collapse whitespace, tokenize
cat corpus.txt | tr -d '.!@#$%^&*()-_=+' | tr '\t' ' ' | tr '\n' ' ' | tr -s ' ' | fmt -1 | uniq -c | sort -rn 
```

我预计

```
 2 this
   2 is
   1 a
   1 corpus
   1 sparta 
```

但我明白了

```
 1 this
   1 is
   1 a
   1 corpus
   1 this
   1 is
   1 sparta 
```

`uniq`管道时失败`fmt -1`。也许有我看不到的 eof 字符`cat -e`？如何`uniq`决定什么是行，什么是文件？

`echo a a b | fmt -1 | uniq`也符合我的预期，所以我不知道为什么`... | fmt -1 | uniq | ...`我的脚本中的 不起作用。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T04:50:16.653

您需要在调用之前进行排序`uniq`，因为`uniq`它的输入需要被排序。所以：

```
< corpus.txt tr -d '.!@#$%^&*()-_=+' | tr -s '\t ' '\n' | sort | uniq -c | sort -rn 
```

# java - 如何使 JFileChooser 在断开网络驱动器的情况下正常运行？

> ID：12293092
> 
> 赞同：1
> 
> 时间：2012-09-06T04:44:11.513
> 
> 标签：java, swing, jfilechooser, event-dispatch-thread

当我在网络驱动器断开连接的系统上创建 JFileChooser 时，需要很长时间才能显示 JFileChooser。它用一个断开的网络驱动器阻止 EDT 大约 20 秒。

看起来这将是一个常见问题，但我找不到解决它的方法。我见过的可能选项是：

*   使用 JFileDialog
*   将 FileSystemView 替换为 getRoots() 返回固定驱动器列表的位置
*   在尝试打开 JFileChooser(s) 之前切换到等待光标
*   在启动时创建一个 JFileChooser 并永远保留它
*   尝试使用[xfiledialog](http://code.google.com/p/xfiledialog/)

我的用例非常简单，以至于我讨厌求助于第三方库。不过，其他选项对我来说似乎都很糟糕。

还有其他建议吗？

也许13 年前提交[此错误报告的那个人在这里闲逛，现在已经弄清楚了。](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4260746)

## 更新了代码和日志输出

这是我为此使用的代码。

```
private void initFileChooser() {
    log.debug("Initializing fileChooser.");

    fileChooser = new JFileChooser();
    log.debug("FileChooser instantiation complete.");

    fileChooser.setFileFilter(new FileNameExtensionFilter("PDF Files", "pdf"));
    log.debug("File filter setup complete.");

    fileChooser.setMultiSelectionEnabled(false);
    log.debug("Multi-selection disabled.");

    fileChooser.setFileSelectionMode(JFileChooser.FILES_ONLY);
    log.debug("File selection mode set to files only.");
} 
```

这是上面的代码在没有断开网络驱动器的情况下运行时的日志输出。

```
05:37:13.126 [AWT-EventQueue-0] DEBUG - Initializing fileChooser.
05:37:13.481 [AWT-EventQueue-0] DEBUG - FileChooser instantiation complete.
05:37:13.482 [AWT-EventQueue-0] DEBUG - File filter setup complete.
05:37:13.482 [AWT-EventQueue-0] DEBUG - Multi-selection disabled.
05:37:13.482 [AWT-EventQueue-0] DEBUG - File selection mode set to files only. 
```

这是在 Windows 7 上使用断开的网络驱动器运行上述代码时的日志输出。我正在创建一个断开的网络驱动器，方法是使用[ExpanDrive](http://www.expandrive.com/) (1.8.4) 连接到 Linux 机器并在初始连接后关闭 Linux 机器制作。

```
05:37:58.953 [AWT-EventQueue-0] DEBUG - Initializing fileChooser.
05:38:11.108 [AWT-EventQueue-0] DEBUG - FileChooser instantiation complete.
05:38:11.110 [AWT-EventQueue-0] DEBUG - File filter setup complete.
05:38:11.110 [AWT-EventQueue-0] DEBUG - Multi-selection disabled.
05:38:11.110 [AWT-EventQueue-0] DEBUG - File selection mode set to files only. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T06:28:30.073

您阻止了 EDT，可能在无法访问或返回异常`RepaintManager`的情况下`Network Drive`出现异常，您必须

*   使用`SwingWorker`或`Runnable#Thread`

*   通知用户`"Please wait, whatever ...."`

*   如果成功，则`JFileChooser`显示`Files`

*   否则你的 GUI 会冻结，直到网络驱动器返回内容或异常

# php - 使用 php 识别单击了哪个按钮

> ID：12293096
> 
> 赞同：-1
> 
> 时间：2012-09-06T04:44:26.737
> 
> 标签：php, javascript, jquery, mysql, css

我正在为一家制作公司制作一个小网站，当用户从我的菜单中点击导演的名字时，所有菜单项都会消失，只显示该导演制作的传记和作品。

我遇到的问题是我不知道如何将负责识别单击了哪个导演的javascript变量传递给php，以便它实际上可以从数据库中检索导演的信息......有没有办法做这没有 GET 或 POST，因为我试图在页面到页面的单个无缝动画中维护它？

为了澄清，我想将所有这些都包含在一个页面中，没有任何插页式页面

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T04:55:08.273

您应该使用 AJAX 来实现这一点。虽然您仍然在技术上传递 GET 或 POST 变量，但这将是无缝的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T04:48:38.283

可能有各种基于脚本的解决方案，但它可以在没有脚本的情况下完成。

使用具有多个提交按钮的表单。给每个人一个唯一的名字，只有被点击的那个会与表单一起提交。

您还可以将每个导演的所有信息加载到页面中，只显示被点击的那个的信息，无需单独调用服务器。

或者，您可以使用 AJAX 请求。在请求中使用来自单击按钮的唯一标识符（例如其名称、id 或类），以便返回适当的信息。但与普通表单或仅显示或隐藏页面中已有的元素相比，此类功能需要更多工作并且更容易出错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T05:52:12.300

我认为 RobG 关于一次加载所有数据然后使用 JavaScript 隐藏/显示您想要的内容的建议是在这种情况下要走的路。

假设你有 3 位导演，你给了他们每个人一个 'div' 包含他们的简历和作品，每个 div 有一个 id='dir1'、'dir2' 和 'dir3'。它们都有一个名为“directorInfo”的类，并且在页面首次加载时使用属性 style='display:none' 隐藏。将有三个按钮对应于名为“but1”、“but2”、“but3”的每个导演，每个按钮的值 = 1、2 或 3，我也会给每个按钮一个 class='directorButtons ' 以便它们更容易与您的 JQuery 识别。

使用您的 JQ，将按钮绑定到单击事件。像这样： `$('.directorButtons').on('click', function(){
$('.directorInfo').hide();
$('#menuItems').hide();
$('#dir'+this.val()).show();
return false;
});
$('.close').on("click", function(){
//give the user a way to unhide the menu.
$('.directorInfo').hide();
$('#menuItems').show();
return false;
});`

代码的第二部分是因为每个 div 也应该有一个关闭按钮，或者在带有 href='#' 和 class='close' 的 'a' 标签内有一个 X，这样当用户单击 X 时，它们将被带走回到开始，菜单将再次可见。

这是一个简单的例子，你可以调整它做很多事情（比如使用模态和动画）。这样做而不是使用 AJAX 还提供了即时响应而不是等待服务器响应的额外好处。

# php - 使用 str_replace 修改

> ID：12293098
> 
> 赞同：0
> 
> 时间：2012-09-06T04:44:31.877
> 
> 标签：php

用 PHP 修改内容的最简单方法是什么。假设`$link = http://www.example.com`如何修改这个链接并在一个像这样的新变量中宣布它> `$link_modified = http://site.com/go.html?http://www.example.com`，我可以`str_replace`在这种情况下使用或任何其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T04:46:33.240

```
$link_modified = "http://site.com/go.html?" . $link; 
```

或者如果你的意思是在同一个 var

```
$link = "http://site.com/go.html?" . $link; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T04:49:23.540

我认为你可以这样做：

```
$link = "http://www.example.com";
$link_modified = "http://site.com/go.html." . $link; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T05:02:55.143

您还可以使用 sprintf 返回格式化的字符串。

```
$link = 'http://www.example.com';
$link_modified = sprintf('http://site.com/go.html?%s', $link); 
```

# php - 常规 MVC 路由被视为 REST 路由

> ID：12293105
> 
> 赞同：2
> 
> 时间：2012-09-06T04:46:18.603
> 
> 标签：php, zend-framework

我有一个名为 AjaxController 的简单控制器，

```
<?php
    class AjaxController extends Zend_Controller_Action {

    public function init() {
        $params = $this->_getAllParams();
        Zend_Debug::dump($params);
    }

    public function cartAction() {
        $params = $this->_getAllParams();
        Zend_Debug::dump($params);
    }
}

?> 
```

我从 jQuery调用这个 URL - [http://example.com/ajax/cart ，如下所示：](http://example.com/ajax/cart)

```
$.post(base_path + "ajax/cart/", { },
 function(data) {
     alert("Data Loaded: " + data);
 }); 
```

通过 jQuery 调用/直接访问 URL 时出现 404 错误（未找到操作）

我单独得到以下输出（对于 init 函数）：

```
array(4) {
  ["controller"] => string(4) "ajax"
  ["action"] => string(3) "get"
  ["id"] => string(4) "cart"
  ["module"] => string(7) "default"
} 
```

这里的 action 是“get”，“cart”进入 ID（就像 Zend Rest Route）。相反，动作名称应该是“购物车”。这里有什么问题？

如果我通过 ini 文件添加以下路由，则该路由可以正常工作：

```
routes.about.type = "Zend_Controller_Router_Route_Static"
routes.about.route = "ajax/cart"
routes.about.defaults.controller = "ajax"
routes.about.defaults.action = "cart" 
```

但是我不能为每个控制器中的**所有操作添加这样的路由。**

我创建了一个测试控制器来测试它。

```
<?php

Class TestController extends Zend_Controller_Action {

    function indexAction() {
        echo "Index"; exit();
    }

    function testAction() {
        echo "Test"; exit();
    }
}
?> 
```

只有索引操作有效。测试操作不起作用（抛出 EXCEPTION_NO_ACTION 异常）

Zend 框架版本 - 1.12.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:26:52.500

回答我自己的问题（实际答案在 Bas van Dorst 的评论中）

引导程序中有一个 Zend_Rest_Route 代码，我忘记从旧代码中删除它。删除该代码后，默认路由开始工作。

# php - Zend 框架：打开失败需要 Zend/Loader.php (include_path='.:/php/includes')

> ID：12293107
> 
> 赞同：1
> 
> 时间：2012-09-06T04:46:28.377
> 
> 标签：php, linux, zend-framework, centos

```
PHP Fatal error:  main(): Failed opening required 'Zend/Loader.php' (include_path='.:/php/includes') 
```

我已经在 CentOS 上安装了 ZF，但是在调用时遇到了这个问题

```
require_once 'Zend/Loader.php' 
```

我正在使用 Zend Framework 版本：1.11.12

我尝试使用以下过程解决此问题：

在库路径上创建 Symlink Zend 框架

```
ln -s /usr/share/php/Zend . 
```

在库路径上复制 Zend Framework

```
cp -R /usr/share/php/Zend . 
```

没有解决。我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T04:57:20.080

错误说明了一切。您当前的 include_path -> `(include_path='.:/php/includes')` /php/includes 只是您的 php include_path 中的唯一目录。尝试在您的包含路径中添加 Zend 目录，或者像下面这样即时执行：

```
set_include_path('/path/to/ZendFramework-1.11.12/library/'.get_include_path());
require_once('Zend/Loader.php'); 
```

# android - 在 EditText 中四舍五入

> ID：12293108
> 
> 赞同：1
> 
> 时间：2012-09-06T04:46:31.750
> 
> 标签：android, eclipse, math, decimal, rounding

我试图弄清楚如何将总数四舍五入到小数点后两位。总数是一个 EditText。我不能把它缩小到小数点后两位。它有什么问题？谢谢你的帮助。

```
public void macro() {
    caloriesTotal = Double.parseDouble(calories.getText().toString());
    total = (caloriesTotal * .20)/9;
    DecimalFormat round = new DecimalFormat ("###.##");
    round.format(total);
    carbsTotal = (caloriesTotal * .40)/4;
    proteinTotal = (caloriesTotal * .40)/4;       
    fat.setText(Double.toString(total));
    carbs.setText(Double.toString(carbsTotal));
    protein.setText(Double.toString(proteinTotal));
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T04:55:10.437

试试这个。

```
fat.setText(Double.valueOf(round.format(total))); 
```

当您将任何数字转换为 N 个十进制数字时，您需要将该值存储在任何变量中或直接显示，如我上面提到的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T05:00:55.813

简直`format()`应该为你做，

```
DecimalFormat round = new DecimalFormat ("###.##");
String formatted = round.format(double_value);
fat.setText(formatted); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T06:04:27.277

你可以使用`String.format("%.2f", d)`，你的双精度数将被四舍五入

# c++ - 为什么在向上转换后调用派生类的虚方法？

> ID：12293110
> 
> 赞同：3
> 
> 时间：2012-09-06T04:46:42.920
> 
> 标签：c++, derived-class, upcasting

在向上转换派生类的指针后，派生类的虚方法仍然被调用，这在我看来是错误的，因为切片应该发生。你能评论一下这段代码有什么问题吗？

```
class Base
{
public:
    virtual void Hello() { cout << "Hello Base" << endl; }
};

class Derived: public Base
{
public:
    void Hello() { cout << "Hello Derived" << endl; }
};

int main()
{
    Derived* der = new Derived;
    Base* base = dynamic_cast<Base*> (der);
    if (base) base->Hello();
} 
```

输出：你好派生

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T05:02:50.710

切片没有发生，因为您没有使用 的任何值`Base`，只是指向它的指针。

这会导致切片：

```
Base base = *der; 
```

但是如果你想调用一个函数并抑制动态调度，你可以这样做：

```
base->Base::Hello(); 
```

要调用的函数是静态指定的。当然，这`der`也适用于避免中间人。

* * *

你`dynamic_cast`在这里不需要。您可以隐式向上转换，因为这在编译时可以轻松验证。您可以使用`static_cast`to downcast，但要确保这实际上是正确的；`dynamic_cast`只是一个检查版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T04:49:34.873

指针转换是关于静态类型系统的，它在编译时是安全的。例如，铸造告诉编译器“相信我”。它在运行时没有任何影响。更好的转换操作，如 dynamic_cast 提供一些运行时检查（除非有意义，否则不要这样做），但这仍然不会影响多态性，它只是更合格的“相信我”......除非我这样做，否则相信我一些疯狂的东西。

多态性是关于在运行时做正确的事情。当您通过指针调用虚方法时，它将运行对对象实例执行正确的操作。

在 C++ 中，您可以使用 :: 运算符请求特定的分辨率，但这通常保留用于实现细节。

# mysql - 如何选择围绕一行的行而不是按 id

> ID：12293115
> 
> 赞同：2
> 
> 时间：2012-09-06T04:47:32.880
> 
> 标签：mysql, select, join

这里有很多关于选择使用 ID 来解决问题的匹配行的周围行的问题。这不是我需要的，因为我的表是单词，我需要按单词排序。

示例表：字

```
id    word
1     boing
2     aleluya
3     chimp
4     dinner
5     after
6     zup
7     pop
8     house
9     chain 
```

假设我想要按单词 ASC 排序的“晚餐”周围的 3 行，我的结果应该是：

```
id    word
1     boing
9     chain
3     chimp
4     dinner
8     house
7     pop
6     zup 
```

我需要使用什么查询？我试过这个：

```
SELECT word FROM `word` t WHERE t.word <> 'dinner' 
ORDER BY abs( t.word - (SELECT t2.word  FROM word t2 WHERE t2.word = 'dinner'))
LIMIT 5 
```

这显然是行不通的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-06T05:03:14.680

```
SELECT t.id, t.word FROM word t 
WHERE t.word >= 
(
    SELECT lo.word FROM `word` lo 
    WHERE lo.word <= 'dinner' ORDER BY lo.word DESC LIMIT 3,1
)
ORDER BY t.word ASC LIMIT 0,7
; 
```

SQL小提琴[在这里](http://sqlfiddle.com/#!2/0c6bf/16/0)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T05:21:52.900

Try deriving a RANK for the ordered column set. Something like this will work:

```
SELECT 
   e.id, e.word 
FROM  
   (select id, word, @rownum:=@rownum+1 AS RANK from Word, (select @rownum := 0) r order by word asc) d, -- for getting the rank for 'dinner'
   (select id, word, @num:=@num+1 AS RANK from Word, (select @num := 0) r order by word asc) e -- for getting the rank for the other words
WHERE 
   d.word='dinner' AND 
   e.RANK BETWEEN d.RANK-3 AND d.RANK+3 -- +/- 3 columns; 
```

Hope this helps!

# c# - 将表情添加到 RichTextBox 时出错（**已添加具有相同键的项目**）

> ID：12293116
> 
> 赞同：0
> 
> 时间：2012-09-06T04:47:48.877
> 
> 标签：c#, wpf

我尝试在 WPF 的 RichTextBox 中添加使用下面功能的表情符号，当我从 Textbox 键入文本 :) 时，它显示了良好的结果，但是当我再次键入其他文本时它显示错误（**已添加具有相同键的项目**).这是我从下面的 Emoticons 函数调用的代码：

```
 private void btnSend_Click(object sender, RoutedEventArgs e)
     {
        Paragraph p = new Paragraph();
        p.LineHeight = 1;
        Run dd = new Run();
        dd.Text= DateTime.Now.ToString("(HH:mm:ss)") + "Chat" + rtbMessage.Text;
        rtbBody.Document.Blocks.Add(p);
        Emoticons(dd.Text);     
    } 
```

我输入修复它，但仍然没有解决。我希望所有的程序员都会帮助我。谢谢

```
///Function Emoticon////

private Dictionary<string, string> _mappings = new Dictionary<string, string>();
        private string GetEmoticonText(string text)
    {

        string match = string.Empty;
        int lowestPosition = text.Length;

        foreach (KeyValuePair<string, string> pair in _mappings)
        {
            if (text.Contains(pair.Key))
            {
                int newPosition = text.IndexOf(pair.Key);
                if (newPosition < lowestPosition)
                {
                    match = pair.Key;
                    lowestPosition = newPosition;
                }
            }
        }

        return match;

    }
       // And also function which add smiles in richtextbox, here is it:

    private void Emoticons(string msg)
    {
        //try
        //{
            _mappings.Add(@":)", "/Images/smiles/silly.png");
            _mappings.Add(@">:o", "/Images/smiles/angry.png");
            _mappings.Add(@":'(", "/Images/smiles/cry.png");
            _mappings.Add(@"B-)", "/Images/smiles/cool.png");
            _mappings.Add(@":^0", "/Images/smiles/laught.png");
            _mappings.Add(@":-[", "/Images/smiles/blush.png");
            _mappings.Add(@":-)", "/Images/smiles/happy.png");
            _mappings.Add(@"?:|", "/Images/smiles/confuse.png");
            _mappings.Add(@":x", "/Images/smiles/love.png");

            var para = new Paragraph { LineHeight=1};
            //Paragraph para = new Paragraph();

            var r = new Run(msg);

            para.Inlines.Add(r);

            string emoticonText = GetEmoticonText(r.Text);

            //if paragraph does not contains smile only add plain text to richtextbox rtb2
            if (string.IsNullOrEmpty(emoticonText))
            {
                rtbBody.Document.Blocks.Add(para);
            }
            else
            {
                while (!string.IsNullOrEmpty(emoticonText))
                {

                    TextPointer tp = r.ContentStart;

                    // keep moving the cursor until we find the emoticon text
                    while (!tp.GetTextInRun(LogicalDirection.Forward).StartsWith(emoticonText))

                        tp = tp.GetNextInsertionPosition(LogicalDirection.Forward);

                    // select all of the emoticon text
                    var tr = new TextRange(tp, tp.GetPositionAtOffset(emoticonText.Length)) { Text = string.Empty };

                    //relative path to image smile file
                    string path = _mappings[emoticonText];

                    var image = new Image
                    {
                        Source =
                            new BitmapImage(new Uri(Environment.CurrentDirectory + path,
                                                    UriKind.RelativeOrAbsolute)),
                       Width=Height=25,
                    };

                    //insert smile
                    new InlineUIContainer(image, tp);

                    if (para != null)
                    {
                        var endRun = para.Inlines.LastInline as Run;

                        if (endRun == null)
                        {
                            break;
                        }
                        else
                        {
                            emoticonText = GetEmoticonText(endRun.Text);
                        }

                    }

                }
                rtbBody.Document.Blocks.Add(para);

            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T04:53:57.323

您收到此错误的原因是因为您在字典中添加了一个具有相同键的对象，实际上您`_mappings`在每次调用函数时添加了字典中的所有项目`Emoticons`。您不能在字典中添加重复条目。我不知道您为什么要这样做，但是您可以在应用程序启动或窗口加载事件中填写一次字典，然后再使用它。

将以下行移至仅执行一次的任何方法/事件。

```
_mappings.Add(@":)", "/Images/smiles/silly.png");
_mappings.Add(@">:o", "/Images/smiles/angry.png");
_mappings.Add(@":'(", "/Images/smiles/cry.png");
_mappings.Add(@"B-)", "/Images/smiles/cool.png");
_mappings.Add(@":^0", "/Images/smiles/laught.png");
_mappings.Add(@":-[", "/Images/smiles/blush.png");
_mappings.Add(@":-)", "/Images/smiles/happy.png");
_mappings.Add(@"?:|", "/Images/smiles/confuse.png");
_mappings.Add(@":x", "/Images/smiles/love.png"); 
```

# ember.js - Emberjs/数据对象“没有方法'_create'”

> ID：12293124
> 
> 赞同：5
> 
> 时间：2012-09-06T04:49:01.220
> 
> 标签：ember.js, ember-data

我正在尝试使用 Ember 和 Ember/Data 来显示从 REST API 返回的简单 JSON。
这是我的js：

```
window.ManageClients = Em.Application.create();

ManageClients.store = DS.Store.create({
  revision: 4,
  adapter: DS.RESTAdapter.create({
    bulkCommit: false,
    namespace: "api"
  })
});

ManageClients.Client = DS.Model.extend({
  url: '/clients',
  name: DS.attr('string'),
  slug: DS.attr('string'),
  programs: DS.attrArray('string'),
  selfserve: DS.attrArray('string')
});

ManageClients.Clients = ManageClients.store.findAll(ManageClients.Client);

ManageClients.ClientsView = Em.View.create({
  templateName: 'client-template'
});

ManageClients.ClientsView.appendTo('#ManageClients'); 
```

我的模板：

```
<div id="ManageClients">
    <script type="text/x-handlebars" data-template-name="client-template">
        <ul>
            {{#each ManageClients.Clients}}
            <li>
                {{#if isLoaded}}
                    Client:{{name}}
                {{else}}
                    Loading...
                {{/if}}
            </li>
            {{/each}}
        </ul>
    </script>
</div>
<script language="javascript" src="/js/manageClients.js"></script> 
```

错误：

```
Uncaught TypeError: Object ManageClients.Client has no method '_create' ember-data.js:1811
DS.Store.Ember.Object.extend.materializeRecord ember-data.js:1811
DS.Store.Ember.Object.extend.findByClientId ember-data.js:1204
DS.RecordArray.Ember.ArrayProxy.extend.objectAtContent ember-data.js:45
Ember.wrap.newFunc ember.js:949
Ember.ArrayProxy.Ember.Object.extend.objectAt ember.js:9204
Ember.wrap.newFunc ember.js:949
Ember.Array.Ember.Mixin.create.arrayContentDidChange ember.js:6946
Ember.ArrayProxy.Ember.Object.extend.arrangedContentArrayDidChange ember.js:9227
invokeAction ember.js:3174
iterateSet ember.js:3156
sendEvent ember.js:3273
Ember.Array.Ember.Mixin.create.arrayContentDidChange ember.js:6941
Ember.Mixin.create.replace ember.js:9616
Ember.MutableArray.Ember.Mixin.create.insertAt ember.js:7410
Ember.MutableArray.Ember.Mixin.create.pushObject ember.js:7458
DS.Store.Ember.Object.extend.updateRecordArray ember-data.js:1618
DS.Store.Ember.Object.extend.updateRecordArrays.manyArrays ember-data.js:1586
DS.Store.Ember.Object.extend.updateRecordArrays ember-data.js:1584
DS.Store.Ember.Object.extend.load ember-data.js:1744
DS.Store.Ember.Object.extend.loadMany ember-data.js:1763
DS.RESTAdapter.DS.Adapter.extend.findAll.ajax.success ember-data.js:4580
f.Callbacks.o jquery-1.7.2.min.js:2
f.Callbacks.p.fireWith jquery-1.7.2.min.js:2
w jquery-1.7.2.min.js:4
f.support.ajax.f.ajaxTransport.send.d 
```

和：

```
Uncaught TypeError: Object ManageClients.Client has no method '_create' ember-data.js:1811
DS.Store.Ember.Object.extend.materializeRecord ember-data.js:1811
DS.Store.Ember.Object.extend.findByClientId ember-data.js:1204
DS.RecordArray.Ember.ArrayProxy.extend.objectAtContent ember-data.js:45
Ember.wrap.newFunc ember.js:949
Ember.ArrayProxy.Ember.Object.extend.objectAt ember.js:9204
Ember.wrap.newFunc ember.js:949
Ember.CollectionView.Ember.ContainerView.extend.arrayDidChange ember.js:14651
Ember.CollectionView.Ember.ContainerView.extend._contentDidChange ember.js:14582
Ember.CollectionView.Ember.ContainerView.extend.init ember.js:14553
Ember.wrap.newFunc ember.js:949
Ember._Metamorph.Ember.Mixin.create.init ember.js:18038
Ember.wrap.newFunc ember.js:949
Class ember.js:8259
Ember.Mixin.create.create ember.js:8398
Ember.View.Ember.Object.extend.createChildView ember.js:13320
Ember.View.states.inBuffer.appendChild ember.js:13762
Ember.View.Ember.Object.extend.invokeForState ember.js:12402
Ember.View.Ember.Object.extend.appendChild ember.js:13199
EmberHandlebars.ViewHelper.Ember.Object.create.helper ember.js:18873
(anonymous function) ember.js:19030
(anonymous function) ember.js:19229
(anonymous function) ember.js:19366
(anonymous function)
(anonymous function) handlebars.js:1879
Ember.View.Ember.Object.extend.render ember.js:12368
Ember.View.Ember.Object.extend.renderToBuffer ember.js:13017
Ember.View.Ember.Object.extend.createElement ember.js:12814
Ember.View.states.preRender.insertElement ember.js:13702
Ember.View.Ember.Object.extend.invokeForState ember.js:12402
invoke ember.js:3377
iter ember.js:3424
RunLoop.flush ember.js:3480
RunLoop.end ember.js:3396
Ember.run.end ember.js:3588
autorun 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-28T12:27:05.847

此错误已在更高版本的 ember 中得到解决，不再相关。

# asp.net-mvc-3 - Jquery 验证器重置 $.validator.setDefaults({ onfocusout: false, onkeyup: false }); 在 MVC3 中

> ID：12293125
> 
> 赞同：0
> 
> 时间：2012-09-06T04:49:09.117
> 
> 标签：asp.net-mvc-3, jquery-validate, unobtrusive-validation

有什么方法可以重置**$.validator.setDefaults({ onfocusout: false, onkeyup: false });** 在 MVC3 中。我想将值更改 **为 $.validator.setDefaults({ onfocusout: true, onkeyup: true });** 在我点击一个按钮后。这个怎么存档？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:43:33.423

`setDefaults`应该在`$('form').validate()`被调用之前设置。一旦`validate()`被调用，默认不使用，因此您必须更新实例设置：

```
var settings = $('form').validate().settings;
settings.onkeyup = ... 
```

（布鲁斯回答：[链接回答](http://forums.asp.net/p/1840918/5136065.aspx/1?Re%20MVC3%20jquery%20validator%20How%20to%20reset%20validator%20setDefaults%20onfocusout%20false%20onkeyup%20false)）

# java - javax.xml.bind.UnmarshalException：意外元素（uri：

> ID：12293134
> 
> 赞同：6
> 
> 时间：2012-09-06T04:49:53.183
> 
> 标签：java, jaxb

尝试使用 jaxb 将 xml 响应转换为 java 对象时出现以下错误

```
 javax.xml.bind.UnmarshalException: unexpected element (uri:"http://SOMETHING/doc/2006-03-01/", local:"Name"). Expected elements are <{}Name>,<{}IsTruncated>,<{}MaxKeys>,<{}Contents>,<{}Prefix>,<{}Marker> 
```

这是我的 XML：

```
 <ListBucketResult xmlns="http://something/doc/2006-03-01/">
           <Name>test2</Name>
            <Prefix/>
            <Marker/>
            <MaxKeys>3</MaxKeys>
            <IsTruncated>false</IsTruncated>
            <Contents>
                  <Key>metadata.xml</Key>
                  <LastModified>2012-09-04T08:29:36.000Z</LastModified>
                    <ETag>6b836fd43c402681506926b2248ec418</ETag>
                    <Size>3258</Size>
                   <StorageClass>STANDARD</StorageClass>
             </Contents>
          </ListBucketResult> 
```

我的java对象类是这样的

```
 @XmlAccessorType(XmlAccessType.FIELD)
    @XmlType(name = "", propOrder = {
        "name",
        "prefix",
        "marker",
        "maxKeys",
        "isTruncated",
        "contents"
    })
    @XmlRootElement(name = "ListBucketResult")
    public class ListBucketResult {

@XmlElement(name = "Name", required = true)
protected String name;
@XmlElement(name = "Prefix", required = true)
protected String prefix;
@XmlElement(name = "Marker", required = true)
protected String marker;
@XmlElement(name = "MaxKeys")
protected int maxKeys;
@XmlElement(name = "IsTruncated")
protected boolean isTruncated;
@XmlElement(name = "Contents", required = true)
protected ListBucketResult.Contents contents;

         @XmlAccessorType(XmlAccessType.FIELD)
         @XmlType(name = "", propOrder = {
                "key",
                "lastModified",
                   "eTag",
                   "size",
                 "storageClass"
           })
          public static class Contents {

    @XmlElement(name = "Key", required = true)
    protected String key;
    @XmlElement(name = "LastModified", required = true)
    @XmlSchemaType(name = "dateTime")
    protected XMLGregorianCalendar lastModified;
    @XmlElement(name = "ETag", required = true)
    protected String eTag;
    @XmlElement(name = "Size")
    protected int size;
    @XmlElement(name = "StorageClass", required = true)
    protected String storageClass; 
```

最后我的解组代码是：

```
 JAXBContext jc = JAXBContext.newInstance(ListBucketResult.class);
            Unmarshaller unmarshaller = jc.createUnmarshaller();
            unmarshaller.setEventHandler(new javax.xml.bind.helpers.DefaultValidationEventHandler());
               JAXBElement element = (JAXBElement) unmarshaller.unmarshal (inputStream);
            ListBucketResult customer = (ListBucketResult) element.getValue(); 
```

有人可以让我知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T09:02:22.567

您可以使用类`@XmlSchema`上的注释`package-info`来控制命名空间限定。如果您已经编写了 package-info 类，请确保它正在被编译（某些版本的 ant 与 package-info 类有问题）。

**包信息**

```
@XmlSchema( 
    namespace = "http://something/doc/2006-03-01/", 
    elementFormDefault = XmlNsForm.QUALIFIED) 
package example;

import javax.xml.bind.annotation.XmlNsForm;
import javax.xml.bind.annotation.XmlSchema; 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/08/jaxb-namespaces.html](http://blog.bdoughan.com/2010/08/jaxb-namespaces.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T04:57:15.420

XML 文档包含属于“http://something/doc/2006-03-01/”命名空间的元素，但带注释的 java 类与该命名空间无关。尝试将 @XmlType 注释更改为：

```
@XmlType(name = "", namespace="http://something/doc/2006-03-01/", propOrder = { ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T04:38:54.680

我收到了类似的错误**org.codehaus.jackson.JsonParseException**和**javax.xml.bind.UnmarshalException**：带有链接异常：[ **javax.xml.bind.UnmarshalException：意外元素（uri：“sometext”，local：“elementA”）。预期的元素是**.

这是将**RESTEasy**和**Spring与我使用****JAXB**生成的 DTO集成时。我正在使用**杰克逊**进行转换。

为了解决这个问题，我在 Maven 依赖项中引入了 Jackson 库，它解决了我的问题。特定于此的杰克逊依赖项是

```
 <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-xc</artifactId>
        <version>1.9.9</version>
    </dependency> 
```

我还需要其他杰克逊罐子，所以我的 POM 基本上如下所示。

```
 //The jackson-core-asl jar contains streaming JSON parser and generator interfaces and implementations
<dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-core-asl</artifactId>
        <version>1.9.9</version>
    </dependency>
//Ability to use JAXB annotations containing classes needed to add XML compatibility support.
    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-xc</artifactId>
        <version>1.9.9</version>
    </dependency>
    //Mapper jar contains functionality for data binding: 
    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-mapper-asl</artifactId>
        <version>1.9.9</version>
   </dependency> //This dependency makes a JAX-RS implementation like Jersey,RESTEasy use Jackson for binding of JSON to-from Java objects
    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-jaxrs</artifactId>
        <version>1.9.9</version>
    </dependency> 
```

# windows-8 - Windows 8 商店中缺少图标

> ID：12293141
> 
> 赞同：4
> 
> 时间：2012-09-06T04:50:18.173
> 
> 标签：windows-8

我最近上传了我的第一个 Windows 8 应用商店应用程序（万岁！）

[http://apps.microsoft.com/webpdp/app/doctor-pepper-tattoo/03ed51ee-c1a4-4fb5-b388-76a2ccf10061](http://apps.microsoft.com/webpdp/app/doctor-pepper-tattoo/03ed51ee-c1a4-4fb5-b388-76a2ccf10061)

唯一的问题是，虽然我在应用清单中指定了一个有效的小徽标 (30x30)，但它并没有出现在 Windows 应用商店中。这是文件（我希望它不是由 TinyPic 转换的）

[http://i50.tinypic.com/35k9b20.png](http://i50.tinypic.com/35k9b20.png)

可能是什么问题呢？也许是不受支持的 PNG 变体？我注意到商店中还有很多其他应用程序缺少图标（urbaneous、Volksvagen Commerial Vehicles Turkey 等），因此他们可能面临类似的问题。

谢谢， 提莫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T13:07:09.313

由于您在应用程序清单中指定了该文件，因此它应该在您安装应用程序时出现。如果您在提交时提交了应用程序，那么它应该已经出现在市场上。我不了解 Windows 8 应用程序，但由于它与 Windows 7 的应用程序应该没有太大区别，所以这只是我能理解的。请安装并检查图标。我还希望当用户将您的磁贴最小化到开始屏幕上的最小尺寸时，将使用该图标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T01:26:51.227

您是否在 apppackage 中指定了 Store Logo？

转到[此处](http://msdn.microsoft.com/en-us/library/windows/apps/hh846296.aspx)，以便您可以阅读有关应用程序图像的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T17:48:22.717

这很可能是微软的错误。您必须在以下位置发帖： [http ://social.msdn.microsoft.com/Forums/en-US/windowsstore/threads](http://social.msdn.microsoft.com/Forums/en-US/windowsstore/threads)

或者等到 MS 更新他们的后端。没有不受支持的 png 这样的东西，它可能是许多问题。

这很可能会在实际的 MS Windows 8 发布之前得到修复。

# java - CountDownTimer的连续功能

> ID：12293142
> 
> 赞同：3
> 
> 时间：2012-09-06T04:50:31.287
> 
> 标签：java, android, eclipse

我正在制作一个具有启动`Timer`. 但是我面临一个非常严重的问题。

现在假设我已经盯着`10 minutes`使用的计时器`CountDownTimer`。10 分钟后，它应该会发出哔哔声。现在假设我按下了主页按钮，从而使应用程序在后台运行。`CountDownTimer`属性是它会继续倒计时，因此 10 分钟后我会得到一个`beep`.

但是，如果屏幕时间没有结束，就会发生这种情况。如果`screen time is out`屏幕变为空白/黑色，则计时器仍会继续，但在完成时，应用程序中的任何内容都不会像应用程序暂停一样运行，一旦我单击移动设备上的任何按钮使移动设备处于活动状态，应用程序就会开始在后台运行再次..

我想停止这种情况，并希望即使屏幕时间也结束了应用程序也能运行。

这怎么可能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T04:54:20.267

您必须获得[部分唤醒锁](http://developer.android.com/reference/android/os/PowerManager.html#PARTIAL_WAKE_LOCK)以保持 CPU 运行，以便您的计时器继续运行。否则设备进入睡眠状态。

```
PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
 PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "Countdown");
 wl.acquire(); 
```

最后，您可以发布。

```
 wl.release(); 
```

# php - phpgraphlib_v2.31 - 图形未加载到 PHP 中的 Div

> ID：12293143
> 
> 赞同：0
> 
> 时间：2012-09-06T04:50:35.663
> 
> 标签：php, phpgraphlib

我使用此链接在 php 中创建了一个图表。图表创建成功。

但是当我将它加载到 div 中时，它会显示错误。

这意味着这是我的代码：

```
<div>
<?php
include('phpgraphlib.php');
$graph = new PHPGraphLib(500,350);
$data = array(12124, 5535, 43373, 22223, 90432, 23332, 15544, 24523,
 32778, 38878, 28787, 33243, 34832, 32302);
$graph->addData($data);
$graph->setTitle('Widgets Produced');
$graph->setGradient('red', 'maroon');
$graph->createGraph();
?>
</div> 
```

然后它显示错误：

```
Image corrupt or truncated: http://localhost/graph/graph.php 
```

这是什么原因？

但是当我删除`<div>`和`</div>`标记时，它会完美地显示图表。

但我需要在 div 中显示它。

我怎样才能做到这一点？

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T21:32:07.307

您不能在包含 phpgraphlib.php 之前放置任何 HTML 或空格，因为标头是随文件一起发送的。

删除潜水并在另一个页面中尝试：

```
<div>
<img src='GraphFile.php' />
</div> 
```

或阅读： [http ://www.ebrueggeman.com/phpgraphlib/documentation/tutorial-phpgraphlibpie-extension](http://www.ebrueggeman.com/phpgraphlib/documentation/tutorial-phpgraphlibpie-extension)

# java - 不知道如何实现只有最后一个节点作为参考的循环链表

> ID：12293145
> 
> 赞同：0
> 
> 时间：2012-09-06T04:50:42.467
> 
> 标签：java, singly-linked-list

我被要求重新实现链表的定义方式。任务是：删除对 LinkedList 类中第一个节点的引用，以便我只跟踪列表中的最后一个元素。我还被要求将最后一个元素的 next() 引用到第一个元素，这样这个链表就变成了一个循环链表。有没有一种优雅的方式来做到这一点？

这是我到目前为止所拥有的：

```
import java.util.NoSuchElementException;

public class LinkedList
{  
   private Node last;

   /** 
      Constructs an empty linked list.
   */
   public LinkedList()
   {  
      last = null;
   }

   /**
      Returns the first element in the linked list.
      @return the first element in the linked list
   */
   public Object getFirst()
   {  
      if (last == null) 
         throw new NoSuchElementException();
      return last.next.data;
   }

   /**
      Removes the first element in the linked list.
      @return the removed element
   */
   public Object removeFirst()
   {  
      if (last == null) 
         throw new NoSuchElementException();
      Object element = last.next.data;
      last.next = last.next.next;
      return element;
   }

   /**
      Adds an element to the front of the linked list.
      @param element the element to add
   */
   public void addFirst(Object element)
   {  
        if( last == null ){
          last = new Node();
          last.data = element;
          last.next = last;
        }
        else{
      Node newNode = new Node();
      newNode.data = element;
      last.next = newNode;
      newNode.next = last.next;
      }
   }

   /**
      Returns an iterator for iterating through this list.
      @return an iterator for iterating through this list
   */
   public ListIterator listIterator()
   {  
      return new LinkedListIterator();
   }

   class Node
   {  
      public Object data;
      public Node next;
   }

   class LinkedListIterator implements ListIterator
   {  
      private Node position;
      private Node previous;
      /**
         Constructs an iterator that points to the front
         of the linked list.
      */
      public LinkedListIterator()
      {  
         position = null;
         previous = null;
      }

      /**
         Moves the iterator past the next element.
         @return the traversed element
      */
      public Object next()
      {  
         if (!hasNext())
            throw new NoSuchElementException();
         previous = position; // Remember for remove

         if (position == null)
            position = last.next;
         else
            position = position.next;

         return position.data;
      }

      /**
         Tests if there is an element after the iterator position.
         @return true if there is an element after the iterator position
      */
      public boolean hasNext()
      {  
         if (position == null)
            return last != null;
         else
            return position.next != null;
      }

      /**
         Adds an element before the iterator position
         and moves the iterator past the inserted element.
         @param element the element to add
      */
      public void add(Object element)
      {  
         if (position == null)
         {
            addFirst(element);
            position = last;
         }
         else
         {  
            Node newNode = new Node();
            newNode.data = element;
            newNode.next = position.next;
            position.next = newNode;
            position = newNode;
         }
         previous = position;
      }

      /**
         Removes the last traversed element. This method may
         only be called after a call to the next() method.
      */
      public void remove()
      {  
         if (previous == position)
            throw new IllegalStateException();

         if (position == last)
         {
            removeFirst();
         }
         else 
         {  
            previous.next = position.next;
         }
         position = previous;
      }

      /**
         Sets the last traversed element to a different value. 
         @param element the element to set
      */
      public void set(Object element)
      {
         if (position == null)
            throw new NoSuchElementException();
         position.data = element;
      }
   }
} 
```

* * *

这是原始代码：

```
import java.util.NoSuchElementException;

/**
   A linked list is a sequence of nodes with efficient
   element insertion and removal. This class 
   contains a subset of the methods of the standard
   java.util.LinkedList class.
*/
public class LinkedList
{  
   private Node first;

   /** 
      Constructs an empty linked list.
   */
   public LinkedList()
   {  
      first = null;
   }

   /**
      Returns the first element in the linked list.
      @return the first element in the linked list
   */
   public Object getFirst()
   {  
      if (first == null) 
         throw new NoSuchElementException();
      return first.data;
   }

   /**
      Removes the first element in the linked list.
      @return the removed element
   */
   public Object removeFirst()
   {  
      if (first == null) 
         throw new NoSuchElementException();
      Object element = first.data;
      first = first.next;
      return element;
   }

   /**
      Adds an element to the front of the linked list.
      @param element the element to add
   */
   public void addFirst(Object element)
   {  
      Node newNode = new Node();
      newNode.data = element;
      newNode.next = first;
      first = newNode;
   }

   /**
      Returns an iterator for iterating through this list.
      @return an iterator for iterating through this list
   */
   public ListIterator listIterator()
   {  
      return new LinkedListIterator();
   }

   class Node
   {  
      public Object data;
      public Node next;
   }

   class LinkedListIterator implements ListIterator
   {  
      private Node position;
      private Node previous;
      /**
         Constructs an iterator that points to the front
         of the linked list.
      */
      public LinkedListIterator()
     {  
         position = null;
         previous = null;
      }

      /**
         Moves the iterator past the next element.
         @return the traversed element
      */
      public Object next()
      {  
         if (!hasNext())
            throw new NoSuchElementException();
         previous = position; // Remember for remove

         if (position == null)
            position = first;
         else
            position = position.next;

         return position.data;
      }

      /**
         Tests if there is an element after the iterator position.
         @return true if there is an element after the iterator position
      */
      public boolean hasNext()
      {  
         if (position == null)
            return first != null;
         else
            return position.next != null;
      }    

      /**
         Adds an element before the iterator position
         and moves the iterator past the inserted element.
         @param element the element to add
      */
      public void add(Object element)
      {  
         if (position == null)
         {
            addFirst(element);
            position = first;
         }
         else
         {  
            Node newNode = new Node();
            newNode.data = element;
            newNode.next = position.next;
            position.next = newNode;
            position = newNode;
         }
         previous = position;
      }

      /**
         Removes the last traversed element. This method may
         only be called after a call to the next() method.
      */
      public void remove()
      {  
         if (previous == position)
            throw new IllegalStateException();

         if (position == first)
         {
            removeFirst();
         }
         else 
         {  
            previous.next = position.next;
         }
         position = previous;
      }

      /**
         Sets the last traversed element to a different value. 
         @param element the element to set
      */
      public void set(Object element)
      {
         if (position == null)
            throw new NoSuchElementException();
         position.data = element;
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:04:29.217

我认为您需要做的是将 Node 类修改为以下内容：

```
class Node {
    // point to the previous node in the linked list
    private Node prev;
    private Object data;   
} 
```

所以现在你的链表是一种反向链接，在 LinkedList 中你只需要跟踪“尾部”，你可以跟随尾部的链接来获取链表的任何节点，对吗？

现在要使 LinkedList 成为一个圆圈，您需要做的就是确保您的链表的头节点（第一个节点）的“prev”字段始终指向您的尾部。这是如何做到的：

1.  当列表为空时，什么都不做：）
2.  当第一个节点被添加到列表中时，将 LinkedList 中的“tail”指向它，还将节点的“prev”指向自身。因为节点既是尾也是头，对吧？
3.  添加更多节点时，首先在LinkedList中找到头节点，从“尾”一路链接，直到找到链接到“尾”的节点。然后添加新节点，并相应地更新头/尾节点的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:01:15.033

给出第 3.4.1 节的循环链表数据结构的更健壮的实现，如果尝试非法操作，它会抛出适当的异常

# java - JTable 不会失去对 ENTER 和 TAB 的关注

> ID：12293147
> 
> 赞同：1
> 
> 时间：2012-09-06T04:50:49.430
> 
> 标签：java, swing, focus, jtable, focusmanager

```
table.changeSelection(table.getRowCount()-1, 3, false, false); 
```

像上面那样设置单元格选择后，单元格被选中，如果我在单元格中输入值，则单元格进入编辑模式。但是，输入值后，如果我按 ENTER 或 TAB 键，则单元格仍处于编辑模式。如果我按下其他组件上的某个位置，则只有单元格关闭编辑器模式。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T05:43:22.173

> 像上面那样设置单元格选择后，单元格被选中，如果我在单元格中输入值，单元格进入编辑模式

1.  为了获得更好的帮助，请尽快发布[SSCCE](http://sscce.org/)`table.changeSelection`证明您的问题`TableCellEditor`

2.  必须覆盖`stopCellEditing`

取决于您的 TableCellEditor

```
table.putClientProperty("terminateEditOnFocusLost", Boolean.TRUE); 
```

或者

```
@Override
public boolean stopCellEditing() {// @see CellEditor#stopCellEditing()
    fireEditingStopped();
    return true;
} 
```

# javascript - 如何获得元素的“固定”位置？

> ID：12293151
> 
> 赞同：16
> 
> 时间：2012-09-06T04:51:16.523
> 
> 标签：javascript, jquery

我想获取元素相对于窗口的位置（固定位置）。

这是我到目前为止所得到的：

```
(function ($) {
    $.fn.fixedPosition = function () {
        var offset = this.offset();
        var $doc = $(document);
        return {
            'x': offset.left - $doc.scrollLeft(),
            'y': offset.top - $doc.scrollTop()
        };
    };
})(jQuery);

$('#thumbnails img').click(function () {
    var pos = $(this).fixedPosition();
    console.log(pos);
}); 
```

但是当我单击缩略图时，它似乎偏离了大约 10 个像素左右。`y`即，即使照片的顶部边缘距离浏览器窗口顶部大约 5 像素，它也会给我负值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T05:39:00.757

**更新：**

解决方案现在取决于[JSizes](http://www.bramstein.com/projects/jsizes/)和几个辅助方法：

```
function Point(x, y) {
    return {
        'x': x,
        'y': y,
        'left': x,
        'top': y
    };
}

$.fn.outerOffset = function () {
    /// <summary>Returns an element's offset relative to its outer size; i.e., the sum of its left and top margin, padding, and border.</summary>
    /// <returns type="Object">Outer offset</returns>
    var margin = this.margin();
    var padding = this.padding();
    var border = this.border();
    return Point(
        margin.left + padding.left + border.left,
        margin.top + padding.top + border.top
    );
};

$.fn.fixedPosition = function () {
    /// <summary>Returns the "fixed" position of the element; i.e., the position relative to the browser window.</summary>
    /// <returns type="Object">Object with 'x' and 'y' properties.</returns>
    var offset = this.offset();
    var $doc = $(document);
    var bodyOffset = $(document.body).outerOffset();
    return Point(offset.left - $doc.scrollLeft() + bodyOffset.left, offset.top - $doc.scrollTop() + bodyOffset.top);
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-30T00:02:04.307

采用：

```
element.getBoundingClientRect(); 
```

在 JQuery 插件中：

```
$.fn.fixedPosition = function () {
    var rect = this.getBoundingClientRect();
    return {
        x: rect.left,
        y: rect.top
    };
}; 
```

看：

*   [https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect](https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect)
*   [https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDOMClientRect](https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDOMClientRect)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T05:11:19.773

您的代码看起来不错，应该可以按您的预期工作。

也就是说，.offset() 有一个“陷阱”，它不会考虑应用于 DOM 主体的任何填充、边距或边框。它找到元素相对于文档的偏移量，而不是窗口。

[http://api.jquery.com/offset/](http://api.jquery.com/offset/)

从文档中：

> 注意：jQuery 不支持获取隐藏元素的偏移坐标或考虑在 body 元素上设置的边框、边距或填充。

一些 css 应该有望修复奇怪的结果：

```
body { margin: 0; padding: 0; border: none; } 
```

# cuda - CUBLAS 库没有给出正确的结果

> ID：12293152
> 
> 赞同：1
> 
> 时间：2012-09-06T04:51:20.467
> 
> 标签：cuda, matrix-multiplication, cublas

我正在尝试探索 CUBLAS 库，因此使用其 API 编写了矩阵乘法代码。但我得到了奇怪的输出。我在下面粘贴代码和输出。请帮我。

```
#include<cublas.h>

// Thread block size
#define BLOCK_SIZE 3

#define WA 3   // Matrix A width
#define HA 3   // Matrix A height
#define WB 3   // Matrix B width
#define HB WA  // Matrix B height
#define WC WB  // Matrix C width
#define HC HA  // Matrix C height
// Allocates a matrix with random float entries.
void randomInit(float* data, int size)
{
    for (int i = 0; i < size; ++i)
    data[i] = i;
}
/////////////////////////////////////////////////////////
// Program main
/////////////////////////////////////////////////////////

int main(int argc, char** argv)
{

   // 1\. allocate host memory for matrices A and B
   unsigned int size_A = WA * HA;
   unsigned int mem_size_A = sizeof(float) * size_A;
   float* h_A = (float*) malloc(mem_size_A);

   unsigned int size_B = WB * HB;
   unsigned int mem_size_B = sizeof(float) * size_B;
   float* h_B = (float*) malloc(mem_size_B);
   cublasStatus_t status;
   // 2\. initialize host memory
   randomInit(h_A, size_A);
   randomInit(h_B, size_B);

   // 3\. print out A and B
   printf("\n\nMatrix A\n");
   for(int i = 0; i < size_A; i++)
   {
       printf("%f ", h_A[i]);
       if(((i + 1) % WA) == 0)
          printf("\n");
   }

   printf("\n\nMatrix B\n");
for(int i = 0; i < size_B; i++)
{
   printf("%f ", h_B[i]);
   if(((i + 1) % WB) == 0)
      printf("\n");
}
// 8\. allocate device memory
float* d_A;
float* d_B;
cudaMalloc((void**) &d_A, mem_size_A);
cudaMalloc((void**) &d_B, mem_size_B);

// 9\. copy host memory to device

status = cublasSetMatrix(BLOCK_SIZE,BLOCK_SIZE,sizeof(float), h_A, BLOCK_SIZE,d_A, BLOCK_SIZE);
if (status != CUBLAS_STATUS_SUCCESS) {
    fprintf (stderr, "!!!! CUBLAS initialization error\n");
    return EXIT_FAILURE;
}

status = cublasSetMatrix(BLOCK_SIZE,BLOCK_SIZE,sizeof(float), h_B, BLOCK_SIZE,d_B, BLOCK_SIZE);
if (status != CUBLAS_STATUS_SUCCESS) {
    fprintf (stderr, "!!!! CUBLAS initialization error\n");
    return EXIT_FAILURE;
}

// 4\. allocate host memory for the result C
unsigned int size_C = WC * HC;
unsigned int mem_size_C = sizeof(float) * size_C;
float* h_C = (float*) malloc(mem_size_C);

// 10\. allocate device memory for the result
float* d_C;
cudaMalloc((void**) &d_C, mem_size_C);

// 5\. perform the calculation
          cublasSgemm('N','N',BLOCK_SIZE,BLOCK_SIZE,BLOCK_SIZE,1.0f,d_A,BLOCK_SIZE,d_B,BLOCK_SIZE,1.0f,d_C,BLOCK_SIZE);
status = cublasGetError();
if (status) {
    fprintf (stderr, "!!!! kernel execution error.\n");
    return EXIT_FAILURE;
}

// 11\. copy result from device to host

status = cublasGetMatrix(BLOCK_SIZE,BLOCK_SIZE,sizeof(float),d_C, BLOCK_SIZE,h_C,BLOCK_SIZE);
if (status != CUBLAS_STATUS_SUCCESS) {
    fprintf (stderr, "!!!! device access error (read C)\n");
    return EXIT_FAILURE;
}

// 6\. print out the results
printf("\n\nMatrix C (Results)\n");
for(int i = 0; i < size_C; i++)
{
   printf("%f ", h_C[i]);
   if(((i + 1) % WC) == 0)
      printf("\n");
}
printf("\n");
// 7\. clean up memory
free(h_A);
free(h_B);
free(h_C);
cudaFree(d_A);
cudaFree(d_B);
cudaFree(d_C);

} 
```

- - - - -输出 - - - - - - -

矩阵 A

0.000000 1.000000 2.000000

3.000000 4.000000 5.000000

6.000000 7.000000 8.000000

矩阵 B

0.000000 1.000000 2.000000

3.000000 4.000000 5.000000

6.000000 7.000000 8.000000

矩阵 C（结果）

-1998397155538108416.000000 -1998397155538108416.000000 -1998397155538108416.000000

-1998397155538108416.000000 -1998397155538108416.000000 -1998397155538108416.000000

-1998397155538108416.000000 -1998397155538108416.000000 -1998397155538108416.000000

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T05:20:20.383

您的问题是您在 sgemm 调用中使用了未初始化的内存。`cublas_sgemm()`，就像所有 BLAS gemm 操作一样计算

```
C = alpha * op(A) * op(B) + beta * C 
```

在您的代码中，您正在传递`op(A)=A`、`op(B)=B`、`alpha=1.`和`beta=1.`。但是您从未将值设置`C`为任何值，GPU 中的内存未初始化并且可以包含随机值，从而给出您所看到的损坏结果。将您的函数调用更改为此：

```
cublasSgemm('N','N',BLOCK_SIZE,BLOCK_SIZE,BLOCK_SIZE,1.0f,d_A,
             BLOCK_SIZE,d_B,BLOCK_SIZE,0.f,d_C,BLOCK_SIZE); 
```

计算

```
C = 1.0 * A * B + 0\. * C 
```

你应该得到一个更合理的输出。一旦你得到它产生该输出，请继续发现 CUBLAS 假设矩阵以列主要顺序存储，因此您打印输出的输入的正确打印输出应该是

```
15 18 21
42 54 66
69 90 111 
```

# android - 从 android 设备上传视频并将该视频发布到服务器上

> ID：12293156
> 
> 赞同：0
> 
> 时间：2012-09-06T04:51:34.073
> 
> 标签：android, video

任何人都可以有示例/示例代码，用于通过我的 android 应用程序从 android 上传视频并将该视频存储在服务器端。

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-12T18:01:18.037

这是另一个例子。非常相似，但最大的区别是这是一个数据类，旨在允许其他 post 变量也使用它。例如，您有一个针对不同用户和组的特定文件存储。然后，您希望将该数据与视频一起发送。这个数据类实际上可以用于您网站的所有帖子。所以数据类是

```
public class MultiPartData {
    final String requestURL = "http://www.yoursite.com/some.php";
    final String charset="UTF-8";
    final String boundary="*******";
    private static final String LINE_FEED = "\r\n";
    private HttpURLConnection httpConn;
    private DataOutputStream outputStream;
    private PrintWriter writer;

    //establishes connection
    public MultiPartData() throws IOException {
        URL url = new URL(requestURL);
        httpConn = (HttpURLConnection) url.openConnection();
        httpConn.setUseCaches(false);
        httpConn.setChunkedStreamingMode(4096);
        httpConn.setDoOutput(true); // indicates POST method
        httpConn.setDoInput(true);
        httpConn.setRequestMethod("POST");
        httpConn.setRequestProperty("ENCTYPE", "multipart/form-data");
        httpConn.setRequestProperty("Content-Type",
                "multipart/form-data; boundary=\"" + boundary + "\"");
        httpConn.setRequestProperty("Connection", "Keep-Alive");
        outputStream = new DataOutputStream(httpConn.getOutputStream());
        writer = new PrintWriter(new OutputStreamWriter(outputStream, charset),true);

   }

    //adds post variables to the header body
    public void addFormField(String name, String value) {
        writer.append("--" + boundary).append(LINE_FEED);
        writer.append("Content-Disposition: form-data; name=\"").append(name).append("\"")
            .append(LINE_FEED);
        writer.append("Content-Type: text/plain; charset=" + charset).append(
            LINE_FEED);
        writer.append(LINE_FEED);
        writer.append(value).append(LINE_FEED);
        writer.flush();
    }

    //adds files to header body can be anytype of files
    public void addFilePart(String fieldName, String filePath) throws IOException {
        File uploadFile=new File(filePath);

        String fileName = uploadFile.getName();
        writer.append("--" + boundary).append(LINE_FEED);
        writer.append("Content-Disposition:form-data; name=\"")
                .append(fieldName).append("\"; filename=\"")
                .append(fileName).append("\"")
                .append(LINE_FEED);
        writer.append("Content-Type: ").append(URLConnection.guessContentTypeFromName(fileName))
                .append(LINE_FEED);
        writer.append("Content-Transfer-Encoding: binary").append(LINE_FEED);
        writer.append(LINE_FEED);
        writer.flush();

        FileInputStream inputStream = new FileInputStream(uploadFile);
        int maxBufferSize=2*1024*1024;
        int bufferSize;
        int bytesAvailable=inputStream.available();
        bufferSize = Math.min(bytesAvailable, maxBufferSize);
        byte[] buffer = new byte[bufferSize];
        int bytesRead=inputStream.read(buffer);
        do {
            outputStream.write(buffer, 0, bytesRead);
            bytesAvailable = inputStream.available();
            bufferSize = Math.min(bytesAvailable, maxBufferSize);
            bytesRead = inputStream.read(buffer, 0, bufferSize);
        }while (bytesRead >0);
        outputStream.flush();
        inputStream.close();

        writer.append(LINE_FEED);
        writer.flush();
    }

    //adds header values to body
    public void addHeaderField(String name, String value) {
        writer.append(name).append(": ").append(value).append(LINE_FEED);
        writer.flush();
    }

    //closing options you must use one of the options to close the  connection
    // finishString()  gets results as a string
    // finnishJOBJECT() gets results as an JSONObject
    // finnishJARRAY() gets results as an JSONArray
    // finnishNoResponse()  closes connection with out looking for response
    public String finishString() throws IOException {
        String response = "";

        writer.append(LINE_FEED).flush();
        writer.append("--" + boundary + "--").append(LINE_FEED);
        writer.close();

        String line;
        StringBuilder sb= new StringBuilder();
        BufferedReader br = new BufferedReader(new InputStreamReader(httpConn.getInputStream(), "UTF-8"));
        while ((line=br.readLine()) != null) {
            sb.append(line);
            response =sb.toString();
        }
        br.close();

        return response;
     }
    public JSONObject finnishJOBJECT() throws IOException, JSONException {
        JSONObject response = null;
        writer.append(LINE_FEED).flush();
        writer.append("--" + boundary + "--").append(LINE_FEED);
        writer.close();

        String line;
        StringBuilder sb= new StringBuilder();
        BufferedReader br = new BufferedReader(new InputStreamReader(httpConn.getInputStream(), "UTF-8"));
        while ((line=br.readLine()) != null) {
            sb.append(line);
            response =new JSONObject(sb.toString());
        }
        br.close();
        return response;
    }

    public JSONArray finnishJARRAY()throws IOException, JSONException {
        JSONArray response = null;
        writer.append(LINE_FEED).flush();
        writer.append("--" + boundary + "--").append(LINE_FEED);
        writer.close();

        String line;
        StringBuilder sb= new StringBuilder();
        BufferedReader br = new BufferedReader(new InputStreamReader(httpConn.getInputStream(), "UTF-8"));
        while ((line=br.readLine()) != null) {
            sb.append(line);
            response =new JSONArray(sb.toString());
        }
        br.close();
        return response;
    }
    public void finnishNoResponse(){
        writer.append(LINE_FEED).flush();
        writer.append("--" + boundary + "--").append(LINE_FEED);
        writer.close();
    }
} 
```

实现数据类的示例 AsyncTask 将是。

```
 public void storeVideoBackground(String filePath,String identifier,String vType,String vName, storeImage serverPath){
    progress.show();
    new storeVideoAsyncTask(filePath,identifier,vType,vName,serverPath).execute();
}
public class storeVideoAsyncTask extends AsyncTask<Void,Void,String>{
    String filePath; //path of the file to be uploaded
    String vType;    //variable used on server
    String vName;    //variable used on server
    String identifier;  //variable used on server
    storeImage serverPath; //interface used to get my response
    MultiPartData upload;  //declares the data class for posting

    public storeVideoAsyncTask(String filePath,String identifier,String vType,String vName, storeImage serverPath){
        this.filePath=filePath;
        this.vName=vName;
        this.vType=vType;
        this.identifier=identifier;
        this.serverPath=serverPath;
    }

    @Override
    protected String doInBackground(Void... params) {
        JSONObject result;
        String sPath="";
        try {
            upload=new MultiPartData();
            upload.addHeaderField("User-Agent", "Android-User");
            upload.addHeaderField("Test-Header","Header-Value");
            upload.addFormField("appAuth",auth); //an auth string compared on server
            upload.addFormField("action","storeVideo");//added post variable
            upload.addFormField("vName",vName);//added post variable
            upload.addFormField("identifier",identifier);//added post variable
            upload.addFormField("vType",vType);//added post variable
            upload.addFilePart("video",filePath);//added file video is the reference on server side to retrieve the file 
            sPath=upload.finishString();//returned server path to be used later
        } catch (IOException e) {
            e.printStackTrace();
        }
        return sPath;
    }

    @Override
    protected void onPostExecute(String servPath) {
        super.onPostExecute(servPath);
        progress.dismiss();
        serverPath.done(servPath);
    }
} 
```

现在我喜欢重用我的代码，所以这是另一个名为 ServerRequest 的类的一部分。我将上下文传递给它以进行进度对话框并声明其他值，例如我的 appAuth。

像这样检索文件。这是服务器端 php，您可以使用任何您喜欢的脚本与 post 变量进行交互。

```
 if(isset($_FILES['video']['error'])){
            $path = //path to store video
            $file_name = $_FILES['video']['name'];
            $file_size = $_FILES['video']['size'];
            $file_type = $_FILES['video']['type'];
            $temp_name = $_FILES['video']['tmp_name'];
            if(move_uploaded_file($temp_name, $path.'/'.$file_name)){
                $response =$path.'/'.$file_name;
            }
 } 
```

后变量将被检索常用方法 $data=$_POST['data']; 如果此代码不适用于文件，那么它将是您服务器上某些东西的结果。可能是文件大小。大多数托管服务器对帖子大小上传文件大小等都有限制。有些服务器会让您在 .htaccess 中覆盖它。要调试问题，请在服务器端的 if(isset in 下添加回显以回显错误代码，并且 php 手册对它们的含义有很好的解释。如果它显示为 1，则尝试用 .htaccess 中的 php.ini 覆盖某些内容里面这样

```
 php_value post_max_size 30M
 php_value upload_max_filesize 30M 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T05:04:09.733

```
public static int uploadtoServer(String sourceFileUri) {
String upLoadServerUri = "your remote server link";
// String [] string = sourceFileUri;
String fileName = sourceFileUri;

HttpURLConnection conn = null;
DataOutputStream dos = null;
DataInputStream inStream = null;
String lineEnd = "\r\n";
String twoHyphens = "--";
String boundary = "*****";
int bytesRead, bytesAvailable, bufferSize;
byte[] buffer;
int maxBufferSize = 1 * 1024 * 1024;
String responseFromServer = "";

File sourceFile = new File(sourceFileUri);
if (!sourceFile.isFile()) {
Log.e("My App", "Source File Does not exist");
return 0;
}
try { 
// open a URL connection to the Servlet
FileInputStream fileInputStream = new FileInputStream(sourceFile);
URL url = new URL(upLoadServerUri);
conn = (HttpURLConnection) url.openConnection(); // Open a HTTP  connection to  the URL
conn.setDoInput(true); // Allow Inputs
conn.setDoOutput(true); // Allow Outputs
conn.setUseCaches(false); // Don't use a Cached Copy
conn.setRequestMethod("POST");
conn.setRequestProperty("Connection", "Keep-Alive");
conn.setRequestProperty("ENCTYPE", "multipart/form-data");
conn.setRequestProperty("Content-Type", "multipart/form-data;boundary=" + boundary);
conn.setRequestProperty("uploaded_file", fileName);
dos = new DataOutputStream(conn.getOutputStream());

dos.writeBytes(twoHyphens + boundary + lineEnd);
dos.writeBytes("Content-Disposition: form-data; name=\"uploaded_file\";filename=\""+ fileName + "\"" + lineEnd);
dos.writeBytes(lineEnd);

bytesAvailable = fileInputStream.available(); // create a buffer of  maximum size
Log.i("My App", "Initial .available : " + bytesAvailable);

bufferSize = Math.min(bytesAvailable, maxBufferSize);
buffer = new byte[bufferSize];

// read file and write it into form...
bytesRead = fileInputStream.read(buffer, 0, bufferSize);

 while (bytesRead > 0) {
 dos.write(buffer, 0, bufferSize);
 bytesAvailable = fileInputStream.available();
 bufferSize = Math.min(bytesAvailable, maxBufferSize);
bytesRead = fileInputStream.read(buffer, 0, bufferSize);
}

// send multipart form data necesssary after file data...
dos.writeBytes(lineEnd);
dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

// Responses from the server (code and message)
serverResponseCode = conn.getResponseCode();
String serverResponseMessage = conn.getResponseMessage();

Log.i("Upload file to server", "HTTP Response is : " + serverResponseMessage + ": " + serverResponseCode);
// close streams
Log.i("Upload file to server", fileName + " File is written");
fileInputStream.close();
dos.flush();
dos.close();
} catch (MalformedURLException ex) {
ex.printStackTrace();
Log.e("Upload file to server", "error: " + ex.getMessage(), ex);
} catch (Exception e) {
e.printStackTrace();
}
//this block will give the response of upload link
try {
BufferedReader rd = new BufferedReader(new InputStreamReader(conn
 .getInputStream()));
String line;
while ((line = rd.readLine()) != null) {
Log.i("My App", "RES Message: " + line);
}
rd.close();
} catch (IOException ioex) {
Log.e("Huzza", "error: " + ioex.getMessage(), ioex);
}
return serverResponseCode;  // like 200 (Ok)

} // end uploadtoServer 
```

# java - 使用java在Selenium WebDriver（Selenium 2）中向上或向下滚动页面

> ID：12293158
> 
> 赞同：76
> 
> 时间：2012-09-06T04:51:38.987
> 
> 标签：java, selenium, selenium-webdriver, scroll, selenium-rc

我在 Selenium 1（又名 Selenium RC）中编写了以下代码，用于使用 java 进行页面滚动：

```
selenium.getEval("scrollBy(0, 250)"); 
```

Selenium 2（WebDriver）中的等效代码是什么？

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2012-09-06T04:59:34.023

*场景/测试步骤：*
1\. 打开浏览器并导航到[TestURL](https://link.testproject.io/bsg)
2\. 向下滚动一些像素并向上滚动

对于**向下滚动**：

```
WebDriver driver = new FirefoxDriver();
JavascriptExecutor jse = (JavascriptExecutor)driver;
jse.executeScript("window.scrollBy(0,250)"); 
```

或者，您可以执行以下操作：

```
jse.executeScript("scroll(0, 250);"); 
```

对于**向上滚动**：

```
jse.executeScript("window.scrollBy(0,-250)");
OR,
jse.executeScript("scroll(0, -250);"); 
```

**滚动到页面底部：**

*场景/测试步骤：*
1\. 打开浏览器并导航到[TestURL](https://link.testproject.io/bsg)
2\. 滚动到页面底部

***方式 1：通过使用 JavaScriptExecutor***

```
jse.executeScript("window.scrollTo(0, document.body.scrollHeight)"); 
```

***方式2：按ctrl+end***

```
driver.findElement(By.cssSelector("body")).sendKeys(Keys.CONTROL, Keys.END); 
```

***方式 3：通过使用 Java Robot 类***

```
Robot robot = new Robot();
robot.keyPress(KeyEvent.VK_CONTROL);
robot.keyPress(KeyEvent.VK_END);
robot.keyRelease(KeyEvent.VK_END);
robot.keyRelease(KeyEvent.VK_CONTROL); 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2015-06-20T17:33:28.163

**滚动到页面底部：**

```
JavascriptExecutor js = ((JavascriptExecutor) driver);
js.executeScript("window.scrollTo(0, document.body.scrollHeight)"); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-06-10T20:15:20.943

在 Selenium Webdriver 中有很多上下滚动的方法，我总是使用 Java Script 来做同样的事情。

如果我想向上或向下滚动，下面是总是对我有用的代码

```
 // This  will scroll page 400 pixel vertical
  ((JavascriptExecutor)driver).executeScript("scroll(0,400)"); 
```

您可以从此处获取完整代码[Scroll Page in Selenium](http://learn-automation.com/how-to-scroll-a-page-in-selenium-webdriver/)

如果你想滚动一个元素，那么下面的代码将为你工作。

```
je.executeScript("arguments[0].scrollIntoView(true);",element); 
```

您将在此处获得完整文档[Scroll for specific Element](http://learn-automation.com/how-to-scroll-into-view-in-selenium-webdriver/)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-06-04T17:26:10.130

这可能不是您问题的确切答案（就 WebDriver 而言），但我发现该`java.awt`库比`selenium.Keys`. 因此，使用前者的向下翻页操作将是：

```
Robot robot = new Robot();
robot.keyPress(KeyEvent.VK_PAGE_DOWN);
robot.keyRelease(KeyEvent.VK_PAGE_DOWN); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-07-28T09:01:50.803

```
JavascriptExecutor js = ((JavascriptExecutor) driver); 
```

**向下滚动：**

```
js.executeScript("window.scrollTo(0, document.body.scrollHeight);"); 
```

**向上滚动：**

```
js.executeScript("window.scrollTo(0, -document.body.scrollHeight);"); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-06-27T02:23:08.973

试试这个：

```
Actions dragger = new Actions(driver);
WebElement draggablePartOfScrollbar = driver.findElement(By.xpath("//*[@id='jobreslist_outercontainer']/div/div[2]/div"));

// drag downwards
int numberOfPixelsToDragTheScrollbarDown = 50;
for (int i = 10; i < 500; i += numberOfPixelsToDragTheScrollbarDown) {
    try {
        // this causes a gradual drag of the scroll bar, 10 units at a time
        dragger.moveToElement(draggablePartOfScrollbar).clickAndHold().moveByOffset(0, numberOfPixelsToDragTheScrollbarDown).release().perform();
        Thread.sleep(1000L);
    } catch(Exception e1) {}
}

// now drag opposite way (downwards)
numberOfPixelsToDragTheScrollbarDown = -50;
for (int i = 500; i > 10; i += numberOfPixelsToDragTheScrollbarDown) {
    // this causes a gradual drag of the scroll bar, -10 units at a time
    dragger.moveToElement(draggablePartOfScrollbar).clickAndHold().moveByOffset(0, numberOfPixelsToDragTheScrollbarDown).release().perform();
    Thread.sleep(1000L);
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-01-19T18:24:18.420

我不想使用 JavaScript 或任何外部库，所以这是我的解决方案（C#）：

```
IWebElement body = Driver.FindElement(By.TagName("body"));

IAction scrollDown = new Actions(Driver)
    .MoveToElement(body, body.Size.Width - 10, 15) // position mouse over scrollbar
    .ClickAndHold()
    .MoveByOffset(0, 50) // scroll down
    .Release()
    .Build();

scrollDown.Perform(); 
```

您还可以轻松地将其用作在任何元素上向上或向下滚动的扩展方法。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-03-08T06:42:39.667

1.滚动页面到底部使用 window.scrollTo(0,document.body.scrollHeight) 作为参数

//导航到底部的代码

```
WebDriver driver = new ChromeDriver();
JavascriptExecutor jsExecuter = (JavascriptExecutor)driver;
jsExecuter.executeScript(window.scrollTo(0,document.body.scrollHeight)); 
```

2.将页面滚动到顶部使用 window.scrollTo(0,document.body.scrollTop) 作为参数

//导航到顶部的代码

```
WebDriver driver = new ChromeDriver();
JavascriptExecutor jsExecuter = (JavascriptExecutor)driver;
jsExecuter.executeScript(window.scrollTo(0,document.body.scrollTop)); 
```

3.向左滚动页面使用 window.scrollTo(0,document.body.scrollLeft) 作为参数

//向左导航的代码

```
WebDriver driver = new ChromeDriver();
JavascriptExecutor jsExecuter = (JavascriptExecutor)driver;
jsExecuter.executeScript(window.scrollTo(0,document.body.scrollLeft)); 
```

4.滚动到某个点 window.scrollTo(0,500) 作为参数

//导航到某个点的代码，例如500在这里作为值传递

```
WebDriver driver = new ChromeDriver();
JavascriptExecutor jsExecuter = (JavascriptExecutor)driver;
jsExecuter.executeScript(window.scrollTo(0,500)); 
```

要直接在浏览器中检查导航，请在浏览器中打开开发人员工具并导航到控制台。在控制台 window.scrollTo(0,400) 上执行命令 [![在此处输入图像描述](../Images/04c5de00e02dcc483e6a068b201362e6.png)](https://i.stack.imgur.com/ryoDb.png)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-07-14T05:10:55.520

## Javascript

我们可以滚动到特定元素：

```
const element = await driver.findElement(...)
await driver.executeScript("arguments[0].scrollIntoView(true);", element)
await driver.sleep(500); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-08-24T16:39:31.027

您应该向页面添加滚动以使用以下方法选择所有元素：

```
Selenium.executeScript("window.scrollBy(0,450)", ""); 
```

如果您有一个大列表，请在执行过程中多次添加滚动。请注意，滚动仅会转到页面中的某个点，例如`(0, 450)`。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-11-03T09:11:12.670

```
JavascriptExecutor jse = ((JavascriptExecutor) driver);
jse.executeScript("window.scrollTo(0, document.body.scrollHeight)"); 
```

这段代码对我有用。作为我正在测试的页面，在我们向下滚动时加载。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-11-10T12:29:47.510

Javascript 执行器总是完美地完成工作：

```
((JavascriptExecutor) driver).executeScript("scroll(0,300)"); 
```

分别`(0,300)`是水平距离和垂直距离。根据您的要求放置距离。

如果您是完美主义者，并且希望在第一次尝试时获得您想要向上滚动的确切距离，请使用此工具[MeasureIt](https://addons.mozilla.org/en-US/firefox/addon/measureit/)。这是一个出色的 Firefox 插件。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-03-06T10:55:51.250

感谢 Ripon Al Wasim 的回答。我做了一些改进。由于网络问题，我重试了三遍，直到中断循环。

```
driver.get(url)
# Get scroll height
last_height = driver.execute_script("return document.body.scrollHeight")
try_times = 0
while True:
    # Scroll down to bottom
    driver.execute_script("window.scrollBy(0,2000)")

    # Wait to load page
    time.sleep(scroll_delay)
    # Calculate new scroll height and compare with last scroll height
    new_height = driver.execute_script("return document.body.scrollHeight")

    if last_height == new_height:
        try_times += 1

    if try_times > 3:
        try_times = 0
        break
    last_height = new_height 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-08-11T12:34:41.093

JavascriptExecutor 最好是向下滚动一个网页 `window.scrollTo`JavascriptExecutor 中的函数可以做到这一点

```
JavascriptExecutor js = ((JavascriptExecutor) driver);
js.executeScript("window.scrollTo(0,100"); 
```

上面的代码将向下滚动 100 y 坐标

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-09-14T00:18:33.883

```
JavascriptExecutor jse = (JavascriptExecutor)driver;
jse.executeScript("window.scrollBy(0,250)"); 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2018-10-05T06:52:21.210

1.  如果要垂直滚动页面以执行某些操作，可以使用以下 JavaScript 来完成。 **((JavascriptExecutor)driver).executeScript(“window.scrollTo(0, document.body.scrollHeight)”);**

    ```
     Where ‘JavascriptExecutor’ is an interface, which helps executing JavaScript through Selenium WebDriver. You can use the following code to import. 
    ```

**导入 org.openqa.selenium.JavascriptExecutor；**

2.如果要在特定元素处滚动，则需要使用以下 JavaScript。

**WebElement element = driver.findElement(By.xpath(“//input [@id='email']”));((JavascriptExecutor) driver).executeScript(“arguments[0].scrollIntoView();”, element) ;**

其中“元素”是您要滚动的定位器。

3.如果要在特定坐标处滚动，请使用以下 JavaScript。
**((JavascriptExecutor)driver).executeScript(“window.scrollBy(200,300)”); 其中“200,300”是坐标。**

4.如果要垂直向上滚动，可以使用下面的JavaScript。 **((JavascriptExecutor) 驱动程序).executeScript(“window.scrollTo(document.body.scrollHeight,0)”);**

5.  如果您想以正确的方向水平滚动，请使用以下 JavaScript。 **((JavascriptExecutor)driver).executeScript(“window.scrollBy(2000,0)”);**

6.  如果要向左水平滚动，请使用以下 JavaScript。 **((JavascriptExecutor)driver).executeScript(“window.scrollBy(-2000,0)”);**

# python - 美丽的汤元素访问

> ID：12293159
> 
> 赞同：0
> 
> 时间：2012-09-06T04:51:44.510
> 
> 标签：python, beautifulsoup

我正在尝试使用 BeautifulSoup 从网页中提取信息。我的代码在这里：

```
from bs4 import BeautifulSoup
import urllib2
opener = urllib2.build_opener()
opener.addheaders = [('User-agent', 'Mozilla/5.0')]
infile = opener.open('http://en.wikipedia.org/wiki/American_films_of_1971')
page = infile.read()
soup = BeautifulSoup(page)
soup.prettify().encode('utf8')
print (soup.find_all("table", "wikitable")) 
```

输出

```
[<table class="wikitable">
<tr>
<th style="width:25%;">Title</th>
<th style="width:20%;">Director</th>
<th style="width:30%;">Cast</th>
<th style="width:10%;">Genre/Note</th>
<th style="width:3%;">
<p><br/></p>
</th>
</tr>
<tr>
<td><i><a class="mw-redirect" href="/wiki/$" title="$">$</a> aka Dollars</i></td>
<td><a href="/wiki/Richard_Brooks" title="Richard Brooks">Richard Brooks</a></td>
<td><a href="/wiki/Warren_Beatty" title="Warren Beatty">Warren Beatty</a>, <a href="/wiki/Goldie_Hawn" title="Goldie Hawn">Goldie Hawn</a></td>
<td><a href="/wiki/Comedy" title="Comedy">Comedy</a>, <a href="/wiki/Crime" title="Crime">Crime</a></td>
<td></td>
</tr>
<tr>
<td><i><a href="/wiki/200_Motels" title="200 Motels">200 Motels</a></i></td>
<td><a href="/wiki/Tony_Palmer" title="Tony Palmer">Tony Palmer</a>, Charles Swenson</td>
<td><a href="/wiki/Frank_Zappa" title="Frank Zappa">Frank Zappa</a>, <a href="/wiki/Ringo_Starr" title="Ringo Starr">Ringo Starr</a>, <a href="/wiki/Theodore_Bikel" title="Theodore Bikel">Theodore Bikel</a></td>
<td><a href="/wiki/Comedy" title="Comedy">Comedy</a>, <a href="/wiki/Musical_film" title="Musical film">Musical</a></td>
<td></td>
</tr>
</table>] 
```

* * *

我想提取每个`td`元素中的每个`tr`元素。就像是

```
aka Dollars | Richard Brooks | Warren Beatty | Crime
200 Models | Tony Palmer, Charles Swenson | Frank Zappa | Comedy 
```

在获得所需的文档部分后，我不确定如何查看子标签。

我想知道 BeautifulSoup 是否是正确的工具，或者我是否应该看看其他东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T09:50:28.313

Each result in the `.find_all()` list is another element object, so you can do further searches on these:

```
for table in soup.find_all("table", "wikitable"):
    for row in table.find_all('tr'):
        cells = []
        for cell in row.find_all('td'):
            cells.append(cell.get_text())
        print(' | '.join(cells)) 
```

This gives me:

```
$ aka Dollars | Richard Brooks | Warren Beatty, Goldie Hawn | Comedy, Crime | 
200 Motels | Tony Palmer, Charles Swenson | Frank Zappa, Ringo Starr, Theodore Bikel | Comedy, Musical | 
```

# php - Ajaxplorer - HTTP 错误 404

> ID：12293165
> 
> 赞同：1
> 
> 时间：2012-09-06T04:52:30.640
> 
> 标签：php, http, http-status-code-404, pydio

我对 Ajaxplorer 有疑问。我已经将它配置为上传和下载文件，这也很好，但只是当文件小于 100M 时。当我尝试上传更大的文件时，会出现 I/O 错误和 HTTP 错误 404（上传显示为已完成，但出现错误）。

下面是配置背景：

*   PHP 在 Windows Server 2008 R2 上运行
*   最大。上传内存大小为2G（在php.ini中配置。这个值也在Ajaxplorer中显示）
*   所有相关文件夹都是可写的（我已经配置了 php 会话文件，也在
    Ajaxplorer 中配置了临时文件，每次上传错误后我在这些目录中找到一个临时文件，所以我认为它是可写的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:20:19.677

你也设置了你的 post_max_size 吗？

```
--- php.net---
Sets max size of post data allowed. This setting also affects file upload.
To upload large files, this value must be larger than upload_max_filesize.
If memory limit is enabled by your configure script, memory_limit also
affects file uploading. 
```

更多信息： [http ://www.php.net/manual/en/ini.core.php#ini.post-max-size](http://www.php.net/manual/en/ini.core.php#ini.post-max-size)

# image-processing - C++/CLI：用于应用 Alpha 阈值的 ColorMatrix

> ID：12293166
> 
> 赞同：0
> 
> 时间：2012-09-06T04:52:46.653
> 
> 标签：image-processing, c++-cli, alpha, colormatrix, mouse-picking

有谁知道如何指定 ColorMatrix（特别是 C++/CLI 中的 System::Drawing::Imaging::ColorMatrix）来设置 alpha 阈值？例如，如果我使用 10 (10/255) 作为阈值，那么任何 RGBA Alpha 为 10 或更低的像素都将具有 0.0f Alpha，并且上面的每个像素都会得到 1.0f。

我正在尝试在 2D 场景编辑器中实现 ColorID 拾取，因为我厌倦了使用当前笨拙的方法来反转我的绘图转换来确定鼠标指向给定位图的哪个像素。所以我想做的是像这里描述的那样在 OpenGL 中进行 ColorID 渲染传递[http://content.gpwiki.org/index.php/OpenGL_Selection_Using_Unique_Color_IDs](http://content.gpwiki.org/index.php/OpenGL_Selection_Using_Unique_Color_IDs)但是我不能像大多数人一样只比较屏幕上位图的位置包括大量我不想被鼠标拾取的空白空间，这让我不得不选择颜色。

现在我的 ColorMatrix 看起来像

```
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 1 0
R G B 0 1 
```

遵循 Hans 对 GDI+ 的回答[：将所有像素设置为给定颜色，同时保留现有的 alpha 值](https://stackoverflow.com/questions/2510013/gdi-set-all-pixels-to-given-color-while-retaining-existing-alpha-value)，但我希望它也将阈值应用于 Alpha 组件（假设甚至可以使用 ColorMatrix）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T22:36:40.390

也许你正在寻找[`ImageAttributes.SetThreshold`](http://msdn.microsoft.com/en-us/library/6464csbe)方法。

# eclipse - 如何从消息驱动 Bean (Eclipse) 中获取对 JCA 连接器的引用？

> ID：12293167
> 
> 赞同：1
> 
> 时间：2012-09-06T04:52:48.427
> 
> 标签：eclipse, udp, java-ee-6, jca

我的目标是监听传入的数据报包，处理它们，将信息保存在内存中并允许通过网络访问它。我是一名初级 Java EE 开发人员。我决定使用 servlet（Web 访问）、单例（内存存储）和带有资源适配器的消息驱动 bean（接入 UDP 套接字）。

我正在尝试在 Eclipse 4.2 中执行此示例：[http://www.apprigger.com/2011/06/javaee-udp-resource-adapter-example/](http://www.apprigger.com/2011/06/javaee-udp-resource-adapter-example/)，但我坚持开发 MDB。

到目前为止，我已经创建了一个连接器项目、动态 Web 项目和一个引用它们的 EAR 项目。我正在尝试在 GlassFish 3.x 上运行它。

我坚持在动态 Web 项目中创建 MDB。Eclipse 要求提供消息侦听器接口，但我无法指向 UDPMessageListener（不在类路径中），即使动态 Web 项目引用了连接器项目。我是否需要将连接器项目类导出为 JAR 并将其放在 WEB-INF/lib 文件夹中？但随后我的 EAR 将加载这些 UDP 类两次——一次来自连接器项目本身，第二次来自 jar 内部。我真的很困惑如何正确部署它。

任何帮助将不胜感激。

# android - 在 Android 中填写 pdf 表单

> ID：12293168
> 
> 赞同：-1
> 
> 时间：2012-09-06T04:53:01.887
> 
> 标签：android, pdf, pdf-generation

我正在尝试开发一个付费应用程序，其中一部分涉及填写已经存在的 pdf 表格。我正在寻找一种在Android中做到这一点的方法。我搜索了堆栈溢出，并找到了一个可以像 iText 一样使用的库，但它不能满足我的需求。我的要求如下，希望大家能帮帮我

*   我的应用程序是付费应用程序，因此我正在寻找一个库，以允许我将我用于商业目的，而不受许可证脚注中隐藏的限制
*   我需要它在 Android 中工作，因为我听说像 iText 这样的库在 Android 中有问题（不知道为什么，虽然两者都是 Java）

那么有什么建议吗？我只需要查看和编辑/填写 pdf，仅此而已。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T22:45:26.477

您可以查看 Docmosis，它具有使用模板并将数据合并为 PDF 的云服务。一些开发人员发现 从 Google 即将停用的文档转换服务过渡是合理的 ( [https://groups.google.com/forum/?fromgroups=#!topic/google-appengine/pcz5NSz_8Co )。](https://groups.google.com/forum/?fromgroups=#!topic/google-appengine/pcz5NSz_8Co)

# scheduled-tasks - 在这种循环调度的特殊情况下的进程顺序

> ID：12293170
> 
> 赞同：0
> 
> 时间：2012-09-06T04:53:14.900
> 
> 标签：scheduled-tasks, round-robin

*（这是我计算机工程学位第五学期的一个问题）*

假设使用的调度是轮询，那么在以下场景中，流程执行的顺序是什么？

量子尺寸 = 4

流程----到达时间----突发时间

A---0---3

B---1---5

C---3---2

D---9---5

E---12---5

**我真正的疑问出现在时间 9。此时，A 和 C 已完成执行。B 在队列中，而 D 刚刚进入。哪个会先被执行？B还是D？**

整体顺序应该是 ABCDEBDE 还是 ABCBDEDE？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T05:06:59.800

在循环过程中执行一个称为`Quantum`您没有提到它的时间段。仍然没有问题。`Round Robin`算法说每个进程将以循环方式获得相等的执行时间。在模棱两可的地方，它实现了`First Come First Serve`方法。您在这里提到了僵局情况。`B`应该先com。以下是一些参考资料：[Word Definition](http://whatis.techtarget.com/definition/round-robin) [一个简单的例子](http://en.wikipedia.org/wiki/Round-robin_scheduling#Process_scheduling)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T04:59:19.213

exe 的顺序将是 ABCBDEDE，因为在时间 3，即在就绪队列的 exe 之后，B、C 的顺序相同，所以 B 执行到时间 7（因为 TQ < b 的突发时间）并且 B 循环排队队列（就绪队列）如下 ABC- *B*
并且在时间 7 c 将执行到时间 10 ，而 cd 的 exe 在时间 9 到达就绪队列，因此像 ABCBD 一样排队......最终图表将是

问= | 一个 | 乙| C | 乙| D | E | D | E | T= | | | | | | | | | 0 3 7 10 11 15 19 20 21

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-04T06:58:25.327

> **Round** Robin调度类似于FCFS（**First** Come **First** **Serve**）调度，但增加了抢占。就绪队列被视为循环队列。CPU 调度程序绕过就绪队列，在最多 1 个时间片的时间间隔内为每个进程分配 CPU。 *操作系统概念（Silberschatz）*

 ***现在，在您的情况下，甘特图将如下所示：

```
A   |  B  |  C  |  D  |  E  |  B  |  D  |  E  |
0   3     7     9     13    17    18    19   20 
```

请注意，在这种情况下，首先我们考虑 FCFS 并从进程**A**（到达时间 0 毫秒）开始，然后我们根据每个进程的到达时间（与您在问题中列出的相同顺序）继续调度每个进程，持续 1 个**时间段**（每个 4 毫秒）。

如果进程的突发时间小于时间片，则它会自动释放 CPU，否则将应用抢占。

因此，调度顺序将是：

`A -> B -> C -> D -> E -> B -> D -> E`***

# c# - 如何为产品变体属性创建新的控制类型

> ID：12293171
> 
> 赞同：0
> 
> 时间：2012-09-06T04:53:15.883
> 
> 标签：c#, jquery, asp.net-mvc-3, e-commerce, nopcommerce

我是 nopCommerce 2.65 的初学者。我尝试为产品变体创建一个新的控件类型

属性。我在我的 nopCommerce 测试环境中创建了一个假冒产品。然后添加

产品变体属性**日期选择器**到产品。如何创建 jQuery Datepicker

**日期选择器**的日历控件类型 。

可能吗 ？

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:17:14.247

这是不可能的。控制类型在 Nop.Core 中定义

# php - PHP查找关联多维数组的最后一个键

> ID：12293173
> 
> 赞同：2
> 
> 时间：2012-09-06T04:53:21.130
> 
> 标签：php, arrays

这是我尝试过的：

```
foreach ($multiarr as $arr) {
   foreach ($arr as $key=>$val) {
      if (next($arr) === false) {
         //work on last key
      } else {
         //work
      }
   }
} 
```

再看一遍后，我认为`next`这里使用错误，但我不知道该怎么办。

是否可以查看我是否在该数组的最后一次迭代中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T04:59:11.110

```
$lastkey = array_pop(array_keys($arr));
$lastvalue = $arr[$lastkey]; 
```

如果你想在循环中使用它，只需`$lastkey`比较`$key`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T05:00:50.383

您将需要保持迭代计数，并根据您正在迭代的数组的长度检查它。PHP 中默认的 Iterator 实现不允许您检查下一个元素是否有效——next 有一个 void 返回，并且 api 只公开了一个方法来检查当前位置是否有效。请参阅此处[http://php.net/manual/en/class.iterator.php](http://php.net/manual/en/class.iterator.php)。要实现您正在考虑的功能，您必须使用 peek() 或 nextIsValid() 方法实现自己的迭代器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T05:01:14.550

试试这个：

```
foreach ($multiarr as $arr) {
   $cnt=count($arr);
   foreach ($arr as $key=>$val) {
      if (!--$cnt) {
         //work on last key
      } else {
         //work
      }
   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T05:04:05.653

请参阅下面的网址，我认为它对您有帮助：-

**如何获取数组中的最后一个键？**

[如何获取数组中的最后一个键？](https://stackoverflow.com/questions/2348205/how-to-get-last-key-in-an-array)

**更新：**

```
<?php

$array = array(
    array(
    'first' => 123,
    'second' => 456,
    'last' => 789),
    array(
    'first' => 123,
    'second' => 456,
    'last_one' => 789),
);

foreach ($array as $arr) {

    end($arr);         // move the internal pointer to the end of the array
    $key = key($arr);  // fetches the key of the element pointed to by the internal pointer
    var_dump($key);

} 
```

输出：

```
string(4) "last" string(4) "last_one" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-06T05:15:32.267

这个函数（理论上，我没有测试过）将返回多维关联数组中最后一个也是最深的键。给我一个机会，我想你会喜欢的。

```
function recursiveEndOfArrayFinder($multiarr){

    $listofkeys = array_keys($multiarr);
    $lastkey = end($listofkeys);
    if(is_array($multiarr[$lastkey])){
        recursiveEndOfArrayFinder($multiarr[$lastkey]);
    }else{
    return $lastkey;
    }
} 
```

# cocoa - 可可：调整拆分视图子视图大小

> ID：12293174
> 
> 赞同：0
> 
> 时间：2012-09-06T04:53:48.283
> 
> 标签：cocoa

例如，我想在单击按钮后隐藏子视图。

![在此处输入图像描述](../Images/93aacf2443165d738bc7869cf1441ee0.png)

单击隐藏按钮后，应用程序应隐藏 NSTabView，（不是 NSTableView ！！！）。但问题是顶部的 NSTableView 没有调整大小，如下所示： ![在此处输入图像描述](../Images/cb29c39144d310b3b55b37c9512b8b46.png)

隐藏 NSTabView 后如何使 NSTableView 自动调整大小以填充空白？

我关于隐藏底部子视图的代码：

```
 NSRect frame = [self.customView frame];
frame.size = NSMakeSize(0, 0);
[[self.customView  animator] setFrame:frame]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:26:55.953

在隐藏按钮的代码中，只需包含增加滚动视图（包含表格视图）框架大小的代码。

# python - 我可以使用 Node（或 Python）对 Linux 终端的备用屏幕进行编程吗？

> ID：12293177
> 
> 赞同：0
> 
> 时间：2012-09-06T04:54:20.580
> 
> 标签：python, node.js, terminal

Vim、cdargs 等 CLI 应用程序可以打开一个新屏幕，然后允许用户在那里绘制字符。我想尝试用 Node 制作一些类似的工具，并被告知它被称为“替代屏幕”（？）。

我对JS很熟悉。但如果没有解决方案，Python 可能（..）OK。想要一些代码示例：)

根据tMC的anwser找到了一个模块，试图弄清楚...
[https://github.com/mscdex/node-ncurses](https://github.com/mscdex/node-ncurses)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T07:28:09.980

Vim uses the `ncurses` library to do drawing. You have already found a Node.JS bindings, so you should have no trouble using this library within your application.

I propose you to read the [NCURSES tutorial](http://tldp.org/HOWTO/NCURSES-Programming-HOWTO/) and attempt to do it in Node.JS.

# c++ - Windows 7 中 WinSxS 中的策略文件夹

> ID：12293182
> 
> 赞同：0
> 
> 时间：2012-09-06T04:55:00.810
> 
> 标签：c++

我正在尝试运行在 Windows 7 中使用 Visual Studio 2008 构建的本机应用程序。我已经在新机器上安装了 Visual Studio 2008。我收到一条错误消息，指出并排配置不正确。因此，我将所需的可再分发文件和清单从旧系统 (Windows XP) 复制到同一位置的新机器 (Windows 7) 中。但我仍然无法运行该应用程序。实际上，我在 Windows XP 的 WinSxS 文件夹中找不到名为“Policies”的文件夹。在哪里可以找到此文件夹以及如何运行该应用程序？

谢谢，拉克什。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:04:03.323

所有 Visual Studio 版本都有一个匹配的可再发行包。这是一个可执行文件，运行时将根据需要设置 SxS 文件夹。你最好把它当作魔法。

^(我认为 SxS 是微软在 Win32 开发中最糟糕的想法之一)

# php - header() 的替代语法与 exit 之间的区别

> ID：12293185
> 
> 赞同：1
> 
> 时间：2012-09-06T04:55:15.397
> 
> 标签：php, syntax, header

我很想知道这之间有什么区别

```
header('Location:index.php'); // using  capital  `L`
exit(); // using parenthesis 
```

**和**

```
header('location:index.php');
exit; 
```

我们应该推荐使用哪一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T04:57:24.930

根据[HTTP 的实际 RFC](https://www.rfc-editor.org/rfc/rfc2616#section-14.30)，您应该使用大写的“L”和绝对 URI：

```
header('Location: http://www.mysite.com/index.php'); 
```

就`exit`vs而言`exit()`，没有区别。它是一种语言结构，而不是函数，括号是可选的。你甚至可以使用`exit 0`or `exit(0)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T04:58:53.010

退出没有区别；和退出（）；

并且位置应该用大写字母书写`L`

# c - 从汇编中确定 C 函数的参数类型

> ID：12293186
> 
> 赞同：1
> 
> 时间：2012-09-06T04:55:16.987
> 
> 标签：c, assembly, core-foundation

我正在尝试对 Core Foundation 函数进行逆向工程并在我的代码中使用它。我已确定此函数所需的参数数量仅为 1，并且我 99% 确定该函数旨在采用单个`CFStringRef`并返回`CFStringRef`. 所以我像这样声明了这个函数：

```
extern CFStringRef CPPhoneNumberCopyFormattedStringForTextMessage(CFStringRef pnString); 
```

然后我开始尝试使用它：

```
CFStringRef formattedAddress = CPPhoneNumberCopyFormattedStringForTextMessage((CFStringRef)@"test"); 
```

但是当我编译时，我得到了一个熟悉的`symbol not found`错误：

```
Undefined symbols for architecture armv7:
"CPPhoneNumberCopyFormattedStringForTextMessage(__CFString const*)", referenced from: ...
ld: symbol(s) not found for architecture armv7 
```

现在，通常我会假设我对函数签名的至少一个猜测（即参数数量、参数类型等）是错误的，但在这种情况下，我已经一次又一次地检查了程序集，唯一有意义的签名是我提供的签名。我知道我正在链接到正确的框架，并且我已经运行`nm`以确保该函数的符号确实存在。

所以我想我的问题有两个部分：

1.  我在这里缺少什么吗？
2.  有没有更好的方法来确定像这样的 C 函数满足编译器的参数数量和/或参数类型？

我不是编译器/链接器如何工作的专家，但我认为它必须做一些我可以利用的事情，如果它依赖于准确的函数声明来正确链接到该函数。它到底在检查什么？对于`sizeof`每个参数？有没有一种方法可以比有根据的猜测更容易地利用它来确定函数的参数？

如果有帮助，我可以提供汇编代码和任何其他信息。

编辑：为了清楚起见，我在 iOS 5.1 上运行，所以这是为 ARM 编译的（确切地说是 armv7）。我正在使用最新版本的 Clang 进行编译。该框架是 armv6 和 armv7 的胖二进制文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:24:15.473

看起来好像您正在使用 C++ 编译器来编译您的代码。如果你将原型`CPPhoneNumberCopyFormattedStringForTextMessage`放在一个`extern "C"`块中，它应该链接，因为名称修改不会完成。确定类型完全是另一回事。

# node.js - 注销后销毁握手。套接字.io

> ID：12293188
> 
> 赞同：4
> 
> 时间：2012-09-06T04:55:50.797
> 
> 标签：node.js, express, socket.io

您好我正在尝试将聊天构建到应用程序中。我想知道的是，当用户注销网站时，我还如何销毁与该会话关联的 socket.io 握手，以便用户在注销时无法从另一个选项卡发送消息。

如果有任何帮助，我正在使用 expressjs。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T04:18:24.103

好吧，以防有人发现这个并想知道我确实想通了。您可以访问套接字断开功能。我有用户 id 和他们的套接字 id 的对象，所以当有人注销时，我打电话给

```
app.get("/logout", function(req,res){
  //do other logging out stuff
  sockets.disconnectUser(req.session.user_id);
}

// Disconnect User function
sockets.disconnectUser = function(user_id){
  sockets.socket(users[user_id]).disconnect();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-08-27T06:10:56.617

socket.io 对象包含有关所有连接的套接字和每个套接字的 sessionID 的信息。因此，可以遍历连接的套接字并断开与正在注销的 sessionID 关联的套接字。在这种方法中，无需手动跟踪用户和套接字 ID。

使用 socket.io@2.2.0、express@4.17.1 和 express-session@1.16.2 测试的示例代码。

```
const SocketIO = require('socket.io');

let sio = new SocketIO;

app.get('/logout', function(req, res) {
  //do other logging out stuff
  logoutSocketsIO(req.sessionID);
});

// Iterate through all connected sockets and close those which are associated
// with the given sessionID
// Note: One sessionID can have multiple sockets (e.g. many browser tabs)
function logoutSocketsIO(sessionID) {    
  let connections = sio.sockets.connected;
  for(let c in connections) {
    let socketSessionID = connections[c].conn.request.sessionID;
    if(sessionID === socketSessionID) {
      connections[c].disconnect();
    }
  }
} 
```

# java - AppEngine 项目中生成的 Servlet 配置 web.xml

> ID：12293189
> 
> 赞同：0
> 
> 时间：2012-09-06T04:55:54.197
> 
> 标签：java, eclipse, google-app-engine

`web.xml`我对eclipse中我的应用程序引擎项目中生成的servlet配置感到好奇。这样做的目的是什么：

```
<servlet>
    <servlet-name>SystemServiceServlet</servlet-name>
        <servlet-class>com.google.api.server.spi.SystemServiceServlet</servlet-class>
        <init-param>
            <param-name>services</param-name>
            <param-value/>
        </init-param>
</servlet>

<servlet-mapping>
    <servlet-name>SystemServiceServlet</servlet-name>
    <url-pattern>/_ah/spi/*</url-pattern>
</servlet-mapping> 
```

# c#-4.0 - 如何在 XElement 中添加更多属性？

> ID：12293191
> 
> 赞同：6
> 
> 时间：2012-09-06T04:56:07.480
> 
> 标签：c#-4.0, linq-to-xml, xattribute

我有一个数据结构如下

```
class BasketCondition
{
        public List<Sku> SkuList { get; set; }
        public string InnerBoolean { get; set; }
}

class Sku
{
        public string SkuName { get; set; }
        public int Quantity { get; set; }
        public int PurchaseType { get; set; }
} 
```

现在让我们为其填充一些值

```
var skuList = new List<Sku>();
skuList.Add(new Sku { SkuName = "TSBECE-AA", Quantity = 2, PurchaseType = 3 });
skuList.Add(new Sku { SkuName = "TSEECE-AA", Quantity = 5, PurchaseType = 3 });

BasketCondition bc = new BasketCondition();
bc.InnerBoolean = "OR";
bc.SkuList = skuList; 
```

愿望输出是

```
<BasketCondition>
   <InnerBoolean Type="OR">
      <SKUs Sku="TSBECE-AA" Quantity="2" PurchaseType="3"/>
      <SKUs Sku="TSEECE-AA" Quantity="5" PurchaseType="3"/>
   </InnerBoolean>
</BasketCondition> 
```

到目前为止我的程序是

```
XDocument doc =
       new XDocument(
       new XElement("BasketCondition",

       new XElement("InnerBoolean", new XAttribute("Type", bc.InnerBoolean),
       bc.SkuList.Select(x => new XElement("SKUs", new XAttribute("Sku", x.SkuName)))
       ))); 
```

这给了我输出

```
<BasketCondition>
  <InnerBoolean Type="OR">
    <SKUs Sku="TSBECE-AA" />
    <SKUs Sku="TSEECE-AA" />
  </InnerBoolean>
</BasketCondition> 
```

如何将其余属性**Quantity 和 PurchaseType**添加到我的程序中。

请帮忙

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-06T04:59:43.253

我找到了

```
bc.SkuList.Select(x => new XElement("SKUs", new XAttribute("Sku", x.SkuName),
                                            new XAttribute("Quantity", x.Quantity),
                                            new XAttribute("PurchaseType", x.PurchaseType)
                                    )) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-01-15T11:30:47.493

You can simply do this:

```
yourXElement.Add(new XAttribute("Quantity", "2"));
yourXElement.Add(new XAttribute("PurchaseType", "3")); 
```

# c - h_errno 总是打印“未知主机”

> ID：12293197
> 
> 赞同：2
> 
> 时间：2012-09-06T04:57:22.950
> 
> 标签：c, unix, network-programming

我试图调用`gethostbyname()`我的程序。它运作良好。我可以获得别名和地址列表。但是当我想打电话`herror()`打印出来时`h_errno`，它总是说`"Unknown Host"`。

谁能向我解释为什么`h_errno`是 1，意思是`"Unknown Host"`，而我仍然可以通过调用获得别名和地址列表`gethostbyname()`？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T05:03:09.383

只有当 gethostby* 函数失败时，h_errno 的值才有意义。不看别的。

# jsp - Tomcat中Webapp文件夹的目录结构

> ID：12293200
> 
> 赞同：0
> 
> 时间：2012-09-06T04:58:03.580
> 
> 标签：jsp, tomcat, netbeans

我开发了一个 JSP 项目，现在想在 Tomcat 服务器上部署文件。我不想公开 JSP 代码，所以我还从 NetBeans 编译了 JSP 文件。

**现在在哪里放置已编译的 JAVA、class、smap、WAR 文件**？

编译后的当前目录结构

```
├───empty
├───generated
│   ├───classes
│   │   └───org
│   │       └───apache
│   │           └───jsp
│   └───src
│       └───org
│           └───apache
│               └───jsp
├───generated-sources
│   └───ap-source-output
└───web
├───css
├───img
├───js
├───META-INF
└───WEB-INF
    ├───classes
    │   └───cms
    └───lib 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:09:04.737

您必须将 Web 应用程序打包到 .war 文件中。

显然不需要包含 .java 文件，只需要包含 .class 文件，它们位于 WEB-INF/classes 中。为此，您可以将输出文件夹更改为 WEB-INF/classes。对于.jsp，我不记得了，但可能是一样的。

# ssis - SSIS 中查找组件的最佳缓存模式值

> ID：12293201
> 
> 赞同：0
> 
> 时间：2012-09-06T04:58:29.500
> 
> 标签：ssis

我`SSIS`用于将数据从旧数据库转换为新数据库。源数据库有大约 900 个表，目标数据库有大约 300 个表。其中一些表具有大量数据，其中一些具有静态数据。我在我的包中使用了几个（大约 100 个）`Lookup`组件，所有这些组件都使用完全缓存模式进行调整。我不知道什么时候必须使用完全缓存、部分缓存或无缓存模式。我相信查找缓存模式与查找表的行数有关，但不知道什么时候必须设置查找缓存模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:28:22.123

这可能取决于您的处理要求。如果您只是从旧系统转换到新系统，我建议使用无缓存选项。使用完整缓存可能会削弱您的包，因为包需要在开始处理之前缓冲所有行。如果这是一个生产环境，它可能会严重影响整个系统。

我认为，在较小的表上，使用完整缓存模式不会有任何伤害。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T15:52:45.543

最好选择部分缓存，因为您的包中有大量数据。如果您使用完整缓存，它需要大量内存，因此性能会下降

# java - 肥皂响应编码“？” 所有字符串中的字符而不是俄语.Net代理，Java服务器（？）

> ID：12293202
> 
> 赞同：2
> 
> 时间：2012-09-06T04:58:51.670
> 
> 标签：java, .net, soap, encoding, config

我使用 wsdl.exe 生成代理类来请求 Web 服务，这些服务可能是在 Java 平台上构建的。问题在于响应的编码。我得到'？而不是俄语字母。（**例如 '????26' 而不是 'АН26'**） **我也使用soapUI，一切正常。**我在配置 .Net 客户端方面没有经验。那么我如何确定和配置正确的响应编码。我已经玩过 app.config 如下：

我在这里附上标题信息。我不知道响应标头中的编码信息...请求标头：

```
Accept-Encoding: gzip,deflate
Content-Type: text/xml;charset=UTF-8
SOAPAction: "urn:#DCSSci_ListFlight_5"
Content-Length: 641
Host: 109.73.1.66:23022
Connection: Keep-Alive
User-Agent: Apache-HttpClient/4.1.1 (java 1.5) 
```

响应标头：

```
HTTP/1.1 200 OK
Date: Thu, 06 Sep 2012 03:47:52 GMT
Server: Apache/2.2.10 (Linux/SUSE)
200 OKX-FidelXML-Version: 2.0
Content-length: 15464
Keep-Alive: timeout=15, max=100
Connection: Keep-Alive
Content-Type: text/xml 
```

**解决方案：**

```
public class TraceExtension : SoapExtension
{
    Stream oldStream;
    Stream newStream;
    public override Stream ChainStream(Stream stream)
    {
        oldStream = stream;
        newStream = new MemoryStream();
        return newStream;
    }
    public override object GetInitializer(LogicalMethodInfo methodInfo, SoapExtensionAttribute attribute)
    {
        return null;
    }
    public override object GetInitializer(Type WebServiceType)
    {
        return null;
    }
    public override void Initialize(object initializer)
    {
    }
    public override void ProcessMessage(SoapMessage message)
    {
        switch (message.Stage)
        {
            case SoapMessageStage.BeforeSerialize:
                break;
            case SoapMessageStage.AfterSerialize:
                newStream.Position = 0;
                Copy(newStream, oldStream);
                break;
            case SoapMessageStage.BeforeDeserialize:
                message.ContentType = "application/soap+xml; utf-8";
                Copy(oldStream, newStream);
                newStream.Position = 0;
                break;
            case SoapMessageStage.AfterDeserialize:
                break;
        }
    }
    void Copy(Stream from, Stream to)
    {
        TextReader reader = new StreamReader(from, System.Text.Encoding.GetEncoding("utf-8"));
        TextWriter writer = new StreamWriter(to, System.Text.Encoding.GetEncoding("utf-8"));
        writer.WriteLine(reader.ReadToEnd());
        writer.Flush();
    }
}

[AttributeUsage(AttributeTargets.Method)]
public class TraceExtensionAttribute : SoapExtensionAttribute
{
    private int priority;
    public override Type ExtensionType
    {
        get { return typeof(TraceExtension); }
    }
    public override int Priority
    {
        get { return priority; }
        set { priority = value; }
    }
} 
```

而不仅仅是添加

```
[TraceExtension()] 
attribute for proxy invoke method 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T06:44:09.577

您可以覆盖`GetWebResponse`您的代理并更改编码

```
public class YourProxyClass : SoapHttpClientProtocol
{
    protected override WebResponse GetWebResponse(WebRequest request)
    {
        var response = base.GetWebResponse(request);
        response.Headers["Content-Type"] = "text/xml; charset=utf-8"; //<==
        return response;

    }
} 
```

# c++ - c++ 是一种独立于空格的语言，规则的例外

> ID：12293205
> 
> 赞同：1
> 
> 时间：2012-09-06T04:58:59.843
> 
> 标签：c++, whitespace

[这个维基百科页面](http://en.wikipedia.org/wiki/C%2B%2B)将 c++ 定义为“空白独立语言”。虽然与所有语言一样大部分都是正确的，但该规则也有例外。目前我能想到的只有这样一个：

```
vector<vector<double> > 
```

必须有空格，否则编译器会将 >> 解释为流运算符。周围还有什么。编译一个例外列表会很有趣。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-06T05:20:03.383

按照该逻辑，您可以使用任何两个字符的词位来为规则生成此类“例外”。例如，`+=`并且`+ =`会有不同的解释。不过，我不会称它们为例外。在许多情况下，在 C++ 中，“根本没有空格”与“一个或多个空格”完全不同。当有人说 C++ 与空间无关时，他们通常表示 C++ 中的“一个空格”通常与“多个空格”相同。

这反映在语言规范中，该规范声明（参见 2.1/1）在翻译的第 3 阶段允许实现用一个空格字符替换多个空白字符的序列。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T05:27:47.723

解析 C++ 的语法和语义规则确实相当复杂（我试图表现得很好，我认为有人有权说“一团糟”）。这一事实的证明是，多年来，不同的编译器作者只是在争论什么是合法的 C++，什么不是。

例如，在 C++ 中，您可能需要解析无限数量的记号，然后再决定第一个记号的语义是什么（可怕的[“最令人头疼的解析规则”](http://en.wikipedia.org/wiki/Most_vexing_parse)，它也经常困扰新手）。

但是，您的反对 IMO 并没有真正的意义……例如，与`++`具有不同的含义`+ +`，并且在 Pascal`begin`中与`beg in`. 这是否使 Pascal 成为一种空间依赖语言？是否有任何与空间无关的语言（brainf*ck 除外）？

关于 C++03 `>>`/的唯一问题`> >`是打字时的这个错误非常普遍，所以他们决定在语言定义中增加更多的复杂性来解决 C++11 中的这个问题。

一个空格而不是更多空格可以产生影响的情况（区分空间相关语言但在`> >`/情况下不起作用的`>>`情况）确实很少：

1.  在双引号字符串中（但每个人都想要那个，而且我知道的每一种支持字符串文字的语言都一样）

2.  在单引号内（相同，即使没有多少 C++ 程序员知道单引号内可以有多个字符）

3.  在预处理器指令中，因为它们以行为基础工作（换行符是一个空格，它在那里有所作为）

4.  stefanv 注意到的行继续：要继续单行，您可以在换行符之前放置一个反斜杠，在这种情况下，语言将忽略这两个字符（即使在标识符中间，您也可以这样做，即使典型使用只是为了使长的预处理器宏可读）。如果您在反斜杠之后和换行符之前放置其他空白字符，则无法识别行继续（一些编译器无论如何都会接受它并简单地检查一行的最后一个非空白是否是反斜杠）。也可以使用`??/`与反斜杠等效的 trigraph 来指定行继续（任何合理的编译器都应该在 IMO 找到 trigraph 时发出警告，因为它们很可能没有被程序员缩进）。

5.  在单行注释内`//`，因为在注释中间向其他空格添加换行符也会有所不同

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T07:28:08.343

Like it or not, but macro's are also part of C++ and multi-line macro's should be separated with a backslash followed by EOL, **no whitespace should be in between the backslash and the EOL**.
Not a big issue, but still a whitespace exception.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T05:08:32.913

*   嵌套模板参数：`set<set<int> >`.
*   字符文字：`' '`.
*   字符串文字：`" "`.
*   Justoposition 关键字和标识符：`else return x;`, `void foo(){}`, 等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-06T05:01:17.777

这是因为解析器在 c++11 之前的限制，这不再是这种情况。

原因是与运算符 >> 相比，难以将 >> 解析为模板的结尾

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-06T05:02:58.587

虽然 C++03在所有情况下*都*解释`>>`为移位运算符（在流中使用时已被覆盖，但它仍然是移位运算符），但 C++11 中的语言解析器现在将在合理的情况下尝试关闭大括号。

# python - 如何创建列表列表

> ID：12293208
> 
> 赞同：11
> 
> 时间：2012-09-06T04:59:15.210
> 
> 标签：python, list

我的 Python 代码每次循环时都会生成一个列表：

```
list = np.genfromtxt('temp.txt', usecols=3, dtype=[('floatname','float')], skip_header=1) 
```

但我想保存每一个 - 我需要一个列表，对吗？

所以我尝试了：

```
list[i] = np.genfromtxt('temp.txt', usecols=3, dtype=[('floatname','float')], skip_header=1) 
```

但是 Python 现在告诉我“列表”没有定义。我不确定如何定义它。另外，列表列表与数组相同吗？

谢谢！

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-06T05:03:08.967

您要创建一个空列表，然后将创建的列表附加到它。这将为您提供列表列表。例子：

```
>>> l = []
>>> l.append([1,2,3])
>>> l.append([4,5,6])
>>> l
[[1, 2, 3], [4, 5, 6]] 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-06T05:12:37.047

在您的循环之前创建您的列表，否则它将在每个循环中创建。

```
>>> list1 = []
>>> for i in range(10) :
...   list1.append( range(i,10) )
...
>>> list1
[[0, 1, 2, 3, 4, 5, 6, 7, 8, 9], [1, 2, 3, 4, 5, 6, 7, 8, 9], [2, 3, 4, 5, 6, 7, 8, 9], [3, 4, 5, 6, 7, 8, 9], [4, 5, 6, 7, 8, 9], [5, 6, 7, 8, 9], [6, 7, 8, 9], [7, 8, 9], [8, 9], [9]] 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-06T05:02:45.313

使用 append 方法，例如：

```
lst = []
line = np.genfromtxt('temp.txt', usecols=3, dtype=[('floatname','float')], skip_header=1)
lst.append(line) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-06T05:10:56.800

首先***不要***用作`list`变量名 - 这是一个内置函数。

我不是很清楚你在问什么（多一点上下文会有所帮助），但也许这会有所帮助-

```
my_list = []
my_list.append(np.genfromtxt('temp.txt', usecols=3, dtype=[('floatname','float')], skip_header=1))
my_list.append(np.genfromtxt('temp2.txt', usecols=3, dtype=[('floatname','float')], skip_header=1)) 
```

这将创建一个列表（python 中的一种可变数组），并在前 2 个索引中`my_list`使用该方法的输出调用。`np.getfromtext()`

第一个可以被引用，`my_list[0]`第二个可以被引用`my_list[1]`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-07T14:58:57.127

今天刚遇到同样的问题...

为了创建列表列表，您首先必须将数据、数组或其他类型的变量存储到列表中。然后，创建一个新的空列表并将刚刚创建的列表附加到它上面。最后，您应该得到一个列表列表：

```
list_1=data_1.tolist()
list_2=data_2.tolist()
listoflists = []
listoflists.append(list_1)
listoflists.append(list_2) 
```

# html - HTML事件和javascript事件的区别

> ID：12293210
> 
> 赞同：4
> 
> 时间：2012-09-06T04:59:29.730
> 
> 标签：html, events, javascript-events

我们可以通过多种方式在 HTML 元素上附加事件。第一种方式是：HTML属性

```
<div id="foo" onclick="print2()> My event is attached as HTML attribute</div> 
```

第二种方法是使用一些库（比如 jQuery）

```
<div id="bar"> My event is attached using jQuery </div>
<script>
    $("#bar").click(function() {
        alert("Hi this is Bar");
    }
</script> 
```

我之前认为 jQuery 可能会在内部将事件转换为相应的 HTML 属性，但这并没有发生。检查这个[http://jsfiddle.net/blunderboy/wp4RU/3/](http://jsfiddle.net/blunderboy/wp4RU/3/)

我正在记录 foo 和 bar 的所有属性，并且看到 bar 没有 onclick 属性。请解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T05:06:09.743

没有**什么**叫做 HTML 事件！您描述的两种类型的事件是内联事件和不显眼的事件，它们都是**javascript**事件。

### 内联事件

当您在元素本身上声明 javascript 代码时，它就变成了**内联事件**。您有一些常见事件（作为 HTML 元素的属性），例如`onclick`、`onkeydown`、`onkeypress`、`onkeyup`，并且所有事件都以`on`. 一个这样的例子是：

```
<a href="#" onclick="alert('You clicked me!')">Click Me!</a> 
```

### 不引人注目的事件

当事件被触发时，我们需要分配一些要执行的东西。符号总是在 JavaScript 中用于将`=`右侧的值分配给左侧的方法或属性。

窗口不是我们可以附加事件的唯一对象。我们可以将事件附加到网页中的任何对象，前提是我们有一种唯一标识该对象的方法。识别对象的一种方法是给它一个 ID 并通过引用它`document.getElementById("id_of_the_element")`。

让我们举同样的例子。

```
<a href="#" id="clickme">Click Me!</a> 
```

而不是`onclick`属性，我`ID`在同一个地方有一个唯一标识 HTML 元素的`<a>`。现在我可以通过这种方式在 javascript 中获取 ID：

```
document.getElementById('clickme'); 
```

为此，我可以附加一个事件处理程序，它与我们使用属性的方式没有太大区别。它只是没有`on`在前面。在我们之前的示例中，我们使用了`onclick`，但现在我们将使用`click`。

```
document.getElementById('clickme').click = functionName; 
```

这里，`functionName`指的是任何 javascript 的函数名，或匿名函数。因此，对于警报，如果我们创建一个名为 的函数`alertme()`，我们可以这样定义：

```
function alertme()
{
    alert('You clicked me!');
} 
```

现在可以通过这种方式将函数附加到元素：

```
document.getElementById('clickme').click = alertme; 
```

还是比较懒，可以用匿名函数的方式来做，没有名字：

```
document.getElementById('clickme').click = function () {
    alert('You clicked me!');
} 
```

希望你明白。:) 让我知道进一步澄清。

# javascript - 任何人都可以告诉我如何在 cent os 中打开扩展名为 .dat 的文件吗？

> ID：12293211
> 
> 赞同：0
> 
> 时间：2012-09-06T04:59:30.260
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3

在我的新 Ruby on rails 应用程序中，我想找到用户的国家代码。
所以我正在使用 MaxMind GeoIp。当我在 gunzip 之后下载 gzip 文件时，它给了我一个 GeoIP.dat 文件，我被困在这里。任何人都可以帮助。
如果他们是打开它的程序或使用它的某些程序。或者，如果有人可以建议我另一种方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T05:37:51.097

正如[@Kyle 指出的那样](https://stackoverflow.com/a/12293308/416630)，您可以下载“人类可读”的 CSV 文件而不是二进制 DAT 文件。MaxMind 的“GeoLite”下载在[这里](http://www.maxmind.com/app/geolite)。

[此处描述了 CSV 文件格式](http://www.maxmind.com/app/csv)。

但请注意（来自上面的链接）：

> 由于地理位置数据库的规模很大，我们通常建议将我们的二进制格式与我们的 API 之一结合使用，因为它们针对速度和磁盘空间进行了高度优化。另一方面，如果您需要将数据导入 SQL 数据库，则建议使用 CSV 格式。

[此处列出了](http://dev.maxmind.com/geoip/downloadable)API 。没有列出 Javascript API，但 Ruby 有几个选项。

因此，直接回答您的问题：您不会像电子表格文档那样直接“打开” dat 文件。相反，您将编写自己的程序，使用他们的 API 来读取 dat 文件，并执行您设计的任何任务或查询。查看他们的 API 文档，了解如何开始使用它的详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T05:11:07.253

`.dat`只是一个文件扩展名。内容可以是任何东西。文本。二进制数据等...

任何人都无法可靠地告诉您如何*打开*文件。

我会尝试从命令行查看文件的内容：

```
less file_name.dat 
```

您可以像这样在 ruby​​ 中打开文件并逐行读取：

```
IO.readlines('file_name.dat').each do |line|
  # do something with the line
end 
```

**编辑：**我想我找到了你所指的文件。为什么不去[这里](http://www.maxmind.com/download/geoip/database/)下载一个`csv`版本呢？`.dat`版本不是纯文本。

# c# - 检查根元素是否存在

> ID：12293213
> 
> 赞同：0
> 
> 时间：2012-09-06T04:59:39.420
> 
> 标签：c#, xml, linq-to-xml

该程序读取每个 XML 文件的“文件”元素的值并对其进行处理。我需要一个 if 语句首先检查根元素是否为“CONFIGURATION”（这是检查程序正在读取的 XML 是否正确的方法）。我的问题是您不能将 .Any() 添加到 .Element，只能添加到 .Elements。而且我下面的 if 语句不起作用，我需要更改它。

请参阅 if 语句之前的注释。

我的代码：

```
 static void queryData(string xmlFile)
    {
        var xdoc = XDocument.Load(xmlFile);
        var configuration = xdoc.Element("CONFIGURATION");

        //The code works except for the if statement that I added.
        //The debug shows that configuration is null if no "CONFIGURATION" element is found,
        //therefore it prompts a "NullReferenceException" error.
        if (configuration == xdoc.Element("CONFIGURATION"))
        {
            string sizeMB = configuration.Element("SizeMB").Value;
            string backupLocation = configuration.Element("BackupLocation").Value;
            string[] files = null;

            Console.WriteLine("XML: " + xmlFile);

            if (configuration.Elements("Files").Any())
            {
                files = configuration.Element("Files").Elements("File").Select(c => c.Value).ToArray();
            }
            else if (configuration.Elements("Folder").Any())
            {
                files = configuration.Elements("Folder").Select(c => c.Value).ToArray();
            }
            StreamWriter sw = new StreamWriter(serviceStat, true);
            sw.WriteLine("Working! XML File: " + xmlFile);
            foreach (string file in files)
            {
                sw.WriteLine(file);
            }
            sw.Close();
        }
        else 
        {
            StreamWriter sw = new StreamWriter(serviceStat, true);
            sw.WriteLine("XML Configuration invalid: " + xmlFile);
            sw.Close();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T05:04:35.887

一个简单的空检查在这里不起作用吗？

```
 var configuration = xdoc.Element("CONFIGURATION");

    if (configuration != null)
    {
            // code...
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T10:30:39.040

或者你可以做这样的事情:)

```
if (xdoc.Elements("CONFIGURATION").Any())
{
} 
```

# c - 使用c对链表进行选择排序

> ID：12293215
> 
> 赞同：-1
> 
> 时间：2012-09-06T04:59:51.357
> 
> 标签：c, data-structures

请让我知道这段代码有什么问题，其中我在开头添加了一些节点然后显示它们，进一步尝试排序，但我没有得到排序结果......谢谢:)

```
#include <stdio.h>
#include <conio.h>
#include <malloc.h>

 struct node
{

int data;
struct node *link;
};

void append(struct node **q,int num)
{
 struct node *temp;
 temp=malloc(sizeof(struct node));
 temp->data=num;
 temp->link=*q;
 *q=temp; 
```

}

```
void display(struct node *q)
{    struct node *temp;
 temp=q;
 printf("\n");
 while(q!=NULL)
{
    printf(" %d",q->data);
    q=q->link;
}
q=temp;
}
 void sort(struct node *q)
 {
 struct node *temp1, *temp2; int i,j,temp3;
temp1=q;
  temp2=q->link;
 for(i=0;i<6;i++)
{
    for(j=0;j<6-i;j++)
    {
        if(temp1->data>temp2->data)
        {
            temp3=temp1->data;
            temp1->data=temp2->data;
            temp2->data=temp3;
        }
        temp2=temp2->link;
    }
    temp1=temp1->link;
    temp2=temp1->link;
 }

}
void main()
{
struct node *p;
p=NULL;
append(&p,7);
append(&p,5);
append(&p,9);
append(&p,2);
append(&p,8);
display(p);
sort(p);
display(p);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:33:32.870

我没有尝试遵循整个逻辑，但您的问题是您正在取消引用 NULL 指针：

```
cristi:tmp diciu$ gdb ./a.out
GNU gdb 6.3.50-20050815 (Apple version gdb-1708) (Mon Aug  8 20:32:45 UTC 2011)
[..]
(gdb) r
Starting program: /private/tmp/a.out 

Program received signal EXC_BAD_ACCESS, Could not access memory.
Reason: KERN_INVALID_ADDRESS at address: 0x0000000000000000
0x0000000100000d68 in sort (q=0x100100970) at test.c:44
44          if(temp1->data > temp2->data)
(gdb) p temp1
$1 = (struct node *) 0x100100970
(gdb) p temp2
$2 = (struct node *) 0x0 
```

一个 hackish 修复（我没有遵循代码的逻辑，所以我不确定这是正确的）是避免取消引用 NULL 指针：

```
void sort(struct node *q)
{
     struct node *temp1, *temp2; int i,j,temp3;
     temp1=q;
     temp2=q->link;
     for(i=0;i<6;i++)
     {
         if(temp1==NULL || temp2==NULL)
                 continue;
         for(j=0;j<6-i;j++)
         {
              if(temp2 == NULL)
                  continue;
              if(temp1->data > temp2->data)
              {
                  temp3=temp1->data; 
```

[..]

正确的解决方法是正确遍历列表（当您可以遍历列表时，您似乎假设列表有 6 个元素，直到您点击 NULL 元素，因为那是列表的结尾）。

# compilation - 添加到另一个 sln 时，我的 vcproj 无法编译（已经包含其他项目）

> ID：12293224
> 
> 赞同：0
> 
> 时间：2012-09-06T05:00:59.920
> 
> 标签：compilation, solution, pango, vcproj

我有 pangoft2.vcproj。一旦我设置了包含目录等，它就会成功编译。

现在，在一个新的 .sln（我有一个 pango.vcproj）中，我添加了这个 pangoft2.vcproj。现在，当我编译程序时，它给出了 474 错误。我在这里复制了几行：

* * *

错误 20 错误 LNK2001：无法解析的外部符号 __imp_g_utf8_skip thai-shaper.obj

错误 47 错误 LNK2001：无法解析的外部符号 g_utf8_get_char thai-shaper.obj

错误 121 错误 LNK2001：无法解析的外部符号 pango_glyph_string_set_size thai-shaper.obj

错误 130 错误 LNK2001：无法解析的外部符号 pango_font_get_glyph_extents thai-shaper.obj

* * *

我必须告诉你，我已经在项目中包含了所需的库（pango-1.0.lib 和 glib-2.0.lib）。

你能告诉我这个错误的可能原因以及如何克服它吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:39:47.730

解决了错误。

该项目处于调试 x64 模式，当时我应该使用调试 win32 模式。

# php - 如何根据复选框输入更新 MySQL 列

> ID：12293226
> 
> 赞同：1
> 
> 时间：2012-09-06T05:01:03.837
> 
> 标签：php, mysql, checkbox

我是这个论坛的新成员。并使用 PHP 编码，所以作为新手，我希望得到你的所有帮助。

我面临的问题如下。

我有一个 MySQL 表“公告”，其中包含以下字段

```
id
----------
advert
----------
date
----------
file
----------
approv
---------- 
```

数据从页面填充到其中 - 除了批准之外，所有列都获得其值。要填充该字段，有一个新的 PHP 页面。字段 approv 根据其中复选框的勾号获取值“已批准”

我面临的问题是我无法读取显示 id 的文本框的值并获取相应的复选框值，以便特定记录获得批准并更新到 MySQL 表。

我写的代码如下

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org     
/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Annpouncements | Pending List</title>
<style type="text/css">
.textinput {
height: 20px;
width: 20px;
border-top-width: 0px;
border-right-width: 0px;
border-bottom-width: 0px;
border-left-width: 0px;
border-top-style: none;
border-right-style: none;
border-bottom-style: none;
border-left-style: none;
}
</style>
</head>

<body>

<table width="800" border="0" align="center" cellpadding="0" cellspacing="0">
<tr>
<td><table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td height="164"><form id="form1" name="form1" method="post" action="">
      <table width="100%" border="0" cellspacing="0" cellpadding="0">
        <tr>
          <td width="11%" height="31" align="center"><label>Id</label></td>
          <td width="15%" height="31" align="center"><label>Date</label></td>
          <td width="52%" align="center"><label>Title</label></td>
          <td width="22%" align="center"><label>Status</label></td>

        </tr>
<?php
//Open the table announce from the database and list date in descending order
$result = mysql_query("SELECT * FROM announce ORDER by date DESC" )or  
die(mysql_error());

//Define a variable to get the rows of the table
  $ann = mysql_fetch_array($result);

//Define a variable to get the no of rows 
  $num = mysql_num_rows($result);
  $i=0;

while($i<$num) {?>
    <?php $approv[$i]= mysql_result($result,$i,"approv"); ?>

        <tr>
            <?php if($approv[$i] !== "approved"){?> 
            <td height="36" align="center"><input name="id" type="text" 
            class="textinput" id="id" value="<?php echo mysql_result($result,$i,"id"); 
            ?>" /></td>
           <?php $ids = mysql_result($result,$i,"id"); 
    //$inp = $_POST["id"][$i];
    //echo 'Input value : ' .$inp. '<br/>' ?>
            <td height="36" align="center"><label>
            <?php echo  mysql_result($result,$i,"date"); ?></label></td>
            <td align="center"><label><?php echo mysql_result($result,$i,"advert"); 
             ?></label></td>

            <td align="center"></label><input type="checkbox" name="approv[]" />
              <label for="approv"></label></td>
             <?php $idan = mysql_query("SELECT * FROM announce WHERE id == $ids"); ?>
             <?php 
               if (isset($_POST['button'])) 
        {
              $apprv = $_POST["approv"];
          //echo 'id = '.$ids.'<br/>';
           $how_many = count($apprv);
         //echo 'Row selected' .$how_many. '<br/>'; 
           foreach ($_POST['approv'] as $apprValue)
           $txtvalue[] = $_POST[$apprValue];
           echo 'txtvalue = ' .$txtvalue. '<br/>';
           mysql_query("UPDATE announce SET approv = 'approved'WHERE id == 
                   $idan ");
                      }
    } 
         ?>
  <?php } ?>

        </tr>

        <?php 
        $i++;
      }
    ?>

        <tr>
          <td height="44">&nbsp;</td>
          <td>&nbsp;</td>
          <td align="center">&nbsp;</td>
          <td align="center"><input type="submit" name="button" id="button" 
           value="Submit" /></td>
        </tr>

      </table>
    </form></td>

             </tr>
           </table></td>
        </tr>
     </table> 
```

因此，请帮助我获得正确的解决方案，以便仅针对已检查的那些行使用“已批准”值更新表。

期待您尽快提供宝贵的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:23:38.170

A few issues that I found in your queries

This

```
SELECT * FROM announce WHERE id == $ids 
```

Should be

```
SELECT * FROM announce WHERE id = '$ids' 
```

And this

```
UPDATE announce SET approv = 'approved'WHERE id == $idan 
```

Should be

```
UPDATE announce SET approv = 'approved' WHERE id = '$idan' 
```

Your checkbox doesn't have a value attribute too

```
<input type="checkbox" name="approv[]" value="<echo your table row id here>" /> 
```

Then use

```
foreach($_POST['approv'] as $apprValue)
{
    mysql_query(UPDATE announce SET approv = 'approved' WHERE id = '$apprValue');
} 
```

On a completely side note, please don't use mysql_* functions anymore. They are going to be deprecated soon. Better to go for `mysqli` or `PDO`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T05:46:33.843

好的，所以这里有很多问题，但我将针对生成复选框的代码行来解决这个问题。特别是以下位：

```
 <input name="id" type="text" class="textinput" id="id" value="<?php echo mysql_result($result,$i,"id"); ?>" />
 <input type="checkbox" name="approv[]" /> 
```

出于多种原因，这并不是创建所需信息的可靠方法。

1.  `$_POST['id']`将只包含一个值。它不会创建似乎是您意图的批准状态的 id 映射。
2.  `$_POST['approv']`将是一个零索引数组，如果不保留to 循环计数`id`的映射，您将无法将复选框与 an 关联起来。`id`（但如果您要这样做，只需使用 PHP 为您提供的结构。）

好的，现在我们知道我们需要进行一些更改。首先，我们将尝试使复选框起作用。但是我们仍然会遇到一些代码结构的问题。特别是因为看起来您根本不了解请求是如何使用 PHP 工作的。

首先，我们想要一种方法来确保我们知道每个 id 的批准状态。这实际上很容易补救。我们可以改变：

```
<input type="checkbox" name="approv[]" /> 
```

至

```
<input type="checkbox" name="approv[]" value="<?= $id ?>" /> 
```

这样，当你循环时`$_POST['approv']`，你实际上得到了一个 id，而不仅仅是一个偏移量。这将允许您在底部保持相同的 for 循环。

**但仍有问题**

没有理由在渲染循环 ( `while($i<$num)`) 中查看 $_POST。使用 PHP 结构对您有利。`foreach($result_rows as $row)`比您的代码更惯用和可读：

```
//Define a variable to get the rows of the table
  $ann = mysql_fetch_array($result);

//Define a variable to get the no of rows 
  $num = mysql_num_rows($result);
  $i=0;

while($i<$num) {?>
    ... // do work
    ... // Do something with $_POST. <-- wrong!!!
<? } ?> 
```

应该更像：

```
if (empty($_POST)) {
    // Only run the query when we need to display information
    $result = mysql_query("SELECT * FROM announce ORDER by date DESC") or die(mysql_error());

    //Define a variable to get the rows of the table
    $result_rows = mysql_fetch_array($result);
    foreach($result_rows as $row) { ?>
        ... // Display form
    <? }
} else {
    $success = array();
    foreach($_POST['approv'] as $approved_id) {
        // Ideally we would combine all of these updates into one statement
        $stmt = mysqli_prepare($link, "UPDATE announce SET approv = 'approved' WHERE id = ?i");
        mysqli_stmt_bind_params($stmt, $approved_id);
        // You then can look over the $success array to see if any failed.
        $success[$approved_id] = mysqli_stmt_execute($stmt);
    }
} 
```

# c# - asp.net 网站文件下载历史

> ID：12293230
> 
> 赞同：1
> 
> 时间：2012-09-06T05:01:23.457
> 
> 标签：c#, javascript, asp.net

我有一个用 ASP.NET 开发的网站，其中包含指向 50 个不同 PDF 文件的链接。网站也具有身份验证功能。现在，当用户下载特定文件时，我需要使用用户名和文件名填充数据库。提示我如何实现这一目标。PS：我尝试过使用`sessionvariable`and`onclickevent`用于 pdf 图标，但对于 > 50 个 pdf 文件来说它太乱了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T05:08:10.107

您必须创建一个下载处理程序。您可以遍历服务器上的物理文件，或者将它们编码到某种数据库中。

在该处理程序中，您将需要一些方法来记录“单击”功能。
*注意：这不考虑取消的下载。*

标记

```
<asp:HyperLink id="hyperlink1" ... /> 
```

后面的代码

```
hyperlink1.NavigateUrl = "Downloader.ashx?file="+"filename"; 
```

处理程序

```
<%@ WebHandler Language="C#" Class="Downloader" %>

using System;
using System.Web;

public class Downloader : IHttpHandler {

    public void ProcessRequest (HttpContext context) {

        // create a file response
        HttpResponse r = context.Response;
        r.ContentType = // set the appropriate content type;

        string file = context.Request.QueryString["file"];

        // *****
        // LOG THE REQUEST
        // *****

        // write out the file
        r.WriteFile(...);
    }

    public bool IsReusable {
        get {
            return false;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T05:07:02.303

您可以创建一个用于请求所有文档的 http 处理程序。

例如，您将放在页面上的链接是`http://yoursite/pdf?name=MyFancyPDf`

然后，您可以在处理程序中进行 pdf 所需的任何处理（包括日志记录），然后将其提供给用户

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T05:06:57.550

我将创建一个 httpHandler 来获取文件以供下载，这将使您能够抽象出文件的直接链接，从而控制保护特定文件并将谁点击文件保存到您的数据库中，并使您能够将文件存储在文件系统中的任何位置，即不建立这些直接链接以增加安全性）

# actionscript-3 - 在函数之外使用变量。错误 - 参数数量不正确。预计 1

> ID：12293233
> 
> 赞同：0
> 
> 时间：2012-09-06T05:01:40.337
> 
> 标签：actionscript-3, compiler-errors

我有以下代码，所以我可以在另一个函数中使用 var "qst"。但是当我运行它时，我得到一个错误

“1136：参数数量不正确。此行按钮（）应为 1”；

我是否必须在按钮（）中输入一个参数？为此工作？非常感谢

```
var myDateDay:Date = new Date();
var dayNumber:int = myDateDay.day;
var qst:XML;
var qstLoader:URLLoader = new URLLoader();
qstLoader.load(new URLRequest("default.qst"));
qstLoader.addEventListener(Event.COMPLETE, processQST);

// Process QST file;
function processQST(e:Event):void {
qst = new XML(e.target.data);
trace(qst);
button();
}

myButton.addEventListener(MouseEvent.CLICK, button);
function button(event:MouseEvent):void {
var question:XMLList = qst.question.(@day == dayNumber).text;
trace(question);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T05:20:07.640

由于您希望从外部调用“按钮”并对事件做出反应，因此您需要为其分配一个 Event 类型的参数。因此，要么称其为，要么`button(null);`对您的声明进行调整，如下所示：

```
function button(event:MouseEvent=null):void {...} 
```

并像零参数的函数一样调用它。

# java - Java 复制构造函数银行帐户问题

> ID：12293235
> 
> 赞同：1
> 
> 时间：2012-09-06T05:02:14.750
> 
> 标签：java, banking

在我的学校开始深入学习 Java，我终于在我不知道哪里出错的地方碰壁了。我将列出 4 个类，一个是 AccountDriver 或 main 方法，BankAccount，它是 CheckingAccount 和 SavingsAccount 的父类。现在我的问题是在 SavingsAccount 中。这是代码...

帐户驱动程序

```
//Demonstrates the BankAccount and derived classes

import java.text.*;         // to use Decimal Format

public class AccountDriver
{
public static void main(String[] args)
{
    double put_in = 500;
    double take_out = 1000;

    DecimalFormat myFormat;
    String money;
    String money_in;
    String money_out;
    boolean completed;

    // to get 2 decimals every time
    myFormat = new DecimalFormat("#.00");

    //to test the Checking Account class
    CheckingAccount myCheckingAccount =
            new CheckingAccount ("Benjamin Franklin", 1000);
    System.out.println ("Account Number "
        + myCheckingAccount.getAccountNumber() +
        " belonging to " + myCheckingAccount.getOwner());
    money  = myFormat.format(myCheckingAccount.getBalance());
    System.out.println ("Initial balance = $" + money);
    myCheckingAccount.deposit (put_in);
    money_in = myFormat.format(put_in);
    money  = myFormat.format(myCheckingAccount.getBalance());
    System.out.println ("After deposit of $" + money_in
        + ",  balance = $" + money);
    completed = myCheckingAccount.withdraw(take_out);
    money_out = myFormat.format(take_out);
    money  = myFormat.format(myCheckingAccount.getBalance());
    if (completed)
    {
        System.out.println ("After withdrawal of $" + money_out
                + ",  balance = $" + money);
    }
    else
    {
        System.out.println ("Insuffient funds to withdraw $"
                + money_out + ",  balance = $" + money);
    }
    System.out.println();

    //to test the savings account class
    SavingsAccount yourAccount =
            new SavingsAccount ("William Shakespeare", 400);
    System.out.println ("Account Number "
            + yourAccount.getAccountNumber() +
            " belonging to " + yourAccount.getOwner());
    money  = myFormat.format(yourAccount.getBalance());
    System.out.println ("Initial balance = $" + money);
    yourAccount.deposit (put_in);
    money_in = myFormat.format(put_in);
    money  = myFormat.format(yourAccount.getBalance());
    System.out.println ("After deposit of $" + money_in
            + ",  balance = $" + money);
    completed = yourAccount.withdraw(take_out);
    money_out = myFormat.format(take_out);
    money  = myFormat.format(yourAccount.getBalance());
    if (completed)
    {
        System.out.println ("After withdrawal of $" + money_out
            + ",  balance = $" + money);
    }
    else
    {
        System.out.println ("Insuffient funds to withdraw $"
            + money_out + ",  balance = $" + money);
    }
    yourAccount.postInterest();
    money  = myFormat.format(yourAccount.getBalance());
    System.out.println ("After monthly interest has been posted,"
            + "balance = $" + money);
    System.out.println();

    // to test the copy constructor of the savings account class
    SavingsAccount secondAccount =
            new SavingsAccount (yourAccount,5);
    System.out.println ("Account Number "
            + secondAccount.getAccountNumber()+
            " belonging to " + secondAccount.getOwner());
    money  = myFormat.format(secondAccount.getBalance());
    System.out.println ("Initial balance = $" + money);
    secondAccount.deposit (put_in);
    money_in = myFormat.format(put_in);
    money  = myFormat.format(secondAccount.getBalance());
    System.out.println ("After deposit of $" + money_in
            + ", balance = $" + money);
    secondAccount.withdraw(take_out);
    money_out = myFormat.format(take_out);
    money  = myFormat.format(secondAccount.getBalance());
    if (completed)
    {
        System.out.println ("After withdrawal of $" + money_out
                + ",  balance = $" + money);
    }
    else
    {
        System.out.println ("Insuffient funds to withdraw $"
                + money_out + ",  balance = $" + money);
    }
    System.out.println();

    //to test to make sure new accounts are numbered correctly
    CheckingAccount yourCheckingAccount =
            new CheckingAccount ("Issac Newton", 5000);
    System.out.println ("Account Number "
            + yourCheckingAccount.getAccountNumber()
            + " belonging to "
            + yourCheckingAccount.getOwner());

}
} 
```

银行账户（父类）

```
//Defines any type of bank account

public abstract class BankAccount
{
// class variable so that each account has a unique number
protected static int numberOfAccounts = 100001;

// current balance in the account
private double balance;
// name on the account
private String owner;
// number bank uses to identify account
private String accountNumber;

//default constructor
public BankAccount()
{
    balance = 0;
    accountNumber = numberOfAccounts + "";
    numberOfAccounts++;
}

//standard constructor
public BankAccount(String name, double amount)
{
    owner = name;
    balance = amount;
    accountNumber = numberOfAccounts + "";
    numberOfAccounts++;
}

//copy constructor
public BankAccount(BankAccount oldAccount, double amount)
{
    owner = oldAccount.owner;
    balance = amount;
    accountNumber = oldAccount.accountNumber;
}

//allows you to add money to the account
public void deposit(double amount)
{
    balance = balance + amount;
}

//allows you to remove money from the account if
//enough money is available
//returns true if the transaction was completed
//returns false if the there was not enough money
public boolean withdraw(double amount)
{
    boolean completed = true;

    if (amount <= balance)
    {
        balance = balance - amount;
    }
    else
    {
        completed = false;
    }
    return completed;
}

//accessor method to balance
public double getBalance()
{
    return balance;
}

//accessor method to owner
public String getOwner()
{
    return owner;
}

//accessor method to account number
public String getAccountNumber()
{
    return accountNumber;
}

//mutator method to change the balance
public void setBalance(double newBalance)
{
    balance = newBalance;
}

//mutator method to change the account number
public void setAccountNumber(String newAccountNumber)
{
    accountNumber = newAccountNumber;
}
} 
```

支票账户

```
public class CheckingAccount extends BankAccount {

private double fee = .15;

private String accountNumber = getAccountNumber() + "-10";  

public CheckingAccount(String name, double amount) 
{

    super(name, amount);

    setAccountNumber(accountNumber);

}

public boolean withdraw(double amount)
{
    double finalAmount = amount + fee;

    super.withdraw(finalAmount);

    boolean completed = true;

    return completed;

}

} 
```

最后，SavingsAccount

```
public class SavingsAccount extends BankAccount{

double rate = .025;

static int savingsNumber = 0;

private String accountNumber = super.getAccountNumber();

//Default constructor
public SavingsAccount(String name, double amount){

    super(name, amount);

    accountNumber = accountNumber + "-" + Integer.toString(savingsNumber);

}

//Copy constructor
public SavingsAccount(SavingsAccount oldAccount, double amount)
{           

    savingsNumber++;

    accountNumber = oldAccount.accountNumber + Integer.toString(savingsNumber);
}

public void postInterest(){
    double interestAmount = getBalance() * .025/12;

    double finalAmount = getBalance() + interestAmount;

    setBalance(finalAmount);
}

public String getAccountNumber()
{
    return accountNumber;
} 
```

}

所以这里是 AccountDriver 运行时的输出......

```
Account Number 100001-10 belonging to Benjamin Franklin
Initial balance = $1000.00
After deposit of $500.00,  balance = $1500.00
After withdrawal of $1000.00,  balance = $499.85

Account Number 100002-0 belonging to William Shakespeare
Initial balance = $400.00
After deposit of $500.00,  balance = $900.00
Insuffient funds to withdraw $1000.00,  balance = $900.00
After monthly interest has been posted,balance = $901.88

Account Number 100002-01 belonging to null  **Should be 10002-1 and William Shakespeare**
Initial balance = $.00                      **Should be $5.00**
After deposit of $500.00, balance = $500.00 **Should be changed in accordance with an initial balance of $5.00
Insuffient funds to withdraw $1000.00,  balance = $500.00 **"   "**

Account Number 100004-10 belonging to Issac Newton **Should be # 10003-10 
```

所以我的问题用星号列出，我花了 2 个小时尝试不同的方法，要么得到相同的结果，要么得到更差的结果。希望有人能指出我哪里出错了。谢谢一群人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T18:37:46.840

在您的复制构造函数中，您应该初始化传递的`SavingsAccount`实例中的所有成员，例如：

```
//Copy constructor

public SavingsAccount(SavingsAccount oldAccount, double amount)
{           
    super(oldAccount,amount);  //  <--- SUPER COPY CONSTRUCTOR CALLED
    savingsNumber++;
    accountNumber = oldAccount.accountNumber + Integer.toString(savingsNumber);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T05:15:07.277

所有者是 BankAccount 类的成员。您还必须在复制 ctor 中设置所有者成员。这也适用于其他成员。

```
 //Copy constructor
public SavingsAccount(SavingsAccount oldAccount, double amount)
{           

    savingsNumber++;

    accountNumber = oldAccount.accountNumber + Integer.toString(savingsNumber);
    owner = oldAccount.getOwner();
    balance = oldAccount.getBalance();
    //...

} 
```

# java - 洗牌功能复杂性

> ID：12293248
> 
> 赞同：1
> 
> 时间：2012-09-06T05:03:19.883
> 
> 标签：java, random, hashmap, complexity-theory, big-o

我试图弄清楚下面函数的复杂性。我猜这将是 O(n)，因为 Random 类在 O(1) 和 put() 中产生一个随机数，并且`containsKey()`也是 O(1)。

但由于`do-while`循环内部有一个，我不确定复杂性是否会改变，因为如果值包含在 HashMap 中，则可以多次调用 random()。我将不胜感激任何帮助！

```
HashMap<Integer, Integer> values = new HashMap();
for(int i=0 ; i<a.length; i++){
    do{
        // set variable random to some integer between 0 and a.length using Random class in Java, 0 is included. 
    }while(values.containsKey(random) == true);
    b[i] = a[random]
    values.put(random,0);
} 
```

数组的长度约为 1000，生成的随机数在 0 到 999 之间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T05:07:52.350

```
 Building the map elements: O(n)--->for loop

 Checking if the random value is in the map: O(1+α) with a good hash function
 Trying to find a random value which your map does not have: O(n)
 (because you are using integer. Even floats would give very good resolution)

 array length=1000, random-value range=1000(from 0 to 999)
 think you are at the last element. probability of getting proper value is:
 %0.1 which takes an average of 1000 trials only for the last element (n)
 nearly same for the (n-1)st element (%0.2-->n/2 trials)
 still nearly same for (n-2)nd element (%0.3-->n/3 trials)

 what is n+n/2 + n/3 + n/4 + n/5  ... + 1 = a linear function(O(n)) +1 
 α2=1 but neglecting :) and this is on top of a O(n)

 Result: O(n*n+α*n*n) close to O(n*n) 
```

# android - 增强现实 android (andAR) 电影纹理

> ID：12293249
> 
> 赞同：0
> 
> 时间：2012-09-06T05:03:20.400
> 
> 标签：android, opengl-es, augmented-reality, andar

我正在使用andAR在android上开发一个增强现实应用程序。当检测到标记时，我想播放电影纹理而不是 3d 模型。谁能告诉我该怎么做。我是 android 新手，不了解 opengl 。我不想使用 qualcomm 或 metaio sdk，因为 metaio 有带有免费许可证的水印和 qualcomm sdk。请帮我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:20:53.243

如果您不想要水印并且可以在 AR 浏览器而不是您自己的应用程序中使用它，您应该使用[Junaio](http://www.junaio.com)。

您可以使用他们的 API 来构建它，或者使用[Creator](http://www.metaio.com/products/creator)，它可以让您将视频拖放到标记上，而无需任何编码。

如果您在 Junaio 中启动 AR 体验，则不应该有水印。您只需在他们的浏览器中打开一个频道。然后，您最终可以将其启动到您自己的应用程序中，但与 sdk 一样，您需要付费才能去除水印。

# c - 协议校验和

> ID：12293250
> 
> 赞同：1
> 
> 时间：2012-09-06T05:03:46.730
> 
> 标签：c, protocols

我有格式的onr协议

```
\003LLCCDDDD..DDXX 
```

*   LL：不包括注意字节的总包长度。
*   CC：命令代码。
*   DD：数据字节（十六进制 ASCII）。
*   XX：LLCCDDDD..DD 的校验和（不包括注意字节和校验和本身）。校验和是命令包中 ASCII 字符的简单 8 位总和。

这是一个例子：

```
Command:    “\0030611C8”    (Length=6, command=0x11, checksum=0xC8) 
```

我只想知道校验和是如何得出的 0xC8 thnx :)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T05:18:52.443

正如您对协议所述的描述，校验和是不是注意字节或校验和的字节的总和。您总共有 7 个字节的传输：

```
'\003', '0', '6', '1', '1', 'C', '8' 
```

其中，`\003`是注意字节，因此它不包含在校验和中。同样，最后两个字符*是*校验和，不包括在内。您的示例只剩下 4 个字符：

```
'0', '6', '1', '1' 
```

将这些字符转换为它们的十六进制表示（检查[ASCII 表](http://asciitable.com)）以使它们更易于添加，得到以下结果：

```
0x30, 0x36, 0x31, 0x31 
```

然后将这些值相加并得到：

```
0xC8 
```

这就是你要找的答案！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T05:27:35.500

这是我的猜测：

你校验和目标代码是 0611

让我们这样做：

ASCII(0) = 48，ASCII(6) = 54，ASCII(1) = 49；

得到 4 个 ASCII 的总和是 200 = 0xC8

# php - 从 2D RGB 数组创建图像

> ID：12293251
> 
> 赞同：0
> 
> 时间：2012-09-06T05:03:51.363
> 
> 标签：php, javascript, canvas, multidimensional-array, rgb

在我[之前的问题](https://stackoverflow.com/questions/12291992/build-2d-array-of-canvas-rgb-values)中，我设法从画布的图像数据中获取 rgb 值的二维数组（在 JavaScript 中）。现在我有了它，有没有办法使用 PHP 从 2D RGB 数组重建画布图像？具体来说，我如何将 2D JS 数组放入 PHP（我相信 JSON，但我不知道如何），然后如何使用它来重新制作图像？:-)

编辑：

我忘了提到浏览器缺少`toDataURL()`，这就是我尝试这种方法的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T06:18:39.453

使用该方法将画布图像数据转换为数据 URL 会更容易`canvas.toDataURL()`。您将获得一个可以使用标准 POST 请求轻松传输的字符串。

然后 PHP 必须`base64_decode()`将数据 URL 转换回图像流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T06:23:52.170

你应该像@devnull69 说的那样做，但是如果你绝对必须使用 PHP 在服务器端构建图像，请使用[imagecreatetruecolor](http://php.net/manual/en/function.imagecreatetruecolor.php)、[imagecolorallocate](http://php.net/manual/en/function.imagecolorallocate.php)和[imagesetpixel](http://php.net/manual/en/function.imagesetpixel.php)。

# php - drupal 7显示/隐藏角色的字段

> ID：12293252
> 
> 赞同：6
> 
> 时间：2012-09-06T05:04:01.103
> 
> 标签：php, drupal, drupal-7, drupal-modules

是否有一个模块可以显示/隐藏特定角色的字段`Drupal 7`？

我知道**字段权限**模块，但这并不是我所需要的。

**我有两个字段：**
图片
picture_premium

**和这些角色：**
匿名
认证溢价

图片字段应该是*可见的*：*匿名*和经过*身份验证*
的 picture_premium 字段应该是可见的：高级

**请注意，溢价不应看到图片字段。**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-06T06:22:51.577

您应该使用[Field Permissions 模块](http://drupal.org/project/field_permissions)。

它就是为此而建的。

希望对您有所帮助……穆罕默德。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-29T22:42:14.917

稍微扩展一下 - 在所描述的场景中，字段权限将不起作用，因为所有高级用户也将通过身份验证。您可以使用字段权限执行此操作的唯一方法是为所有非高级身份验证用户分配一个单独的角色，如“常规”。然后，您可以使图片字段对匿名和常规可见，并将图片溢价设置为高级。

我还不知道是否有更好的解决方案。

# asp.net - 带有 Google 应用登录的 ASP.Net

> ID：12293257
> 
> 赞同：1
> 
> 时间：2012-09-06T05:04:30.933
> 
> 标签：asp.net, authentication

我正在 ASP.Net 中开发我的 Web 应用程序，并提供使用 Google App ID 登录的选项。
我确实使用 Google 成功创建了我`Client_ID`的并能够使用 Google App 登录。
我现在想访问用户配置文件 ( `Google Email_ID , First Name , Last Name`) 。
但谷歌正在返回`URI`as :
`demo.aspx#state=/profileaccess_token=ya29.AHES6ZSv7tTdP7mXhdPLGq_4NvHFdHRhy9qmOnsFC0UNtr9uy4g`
并且由于`#`应该是“ ”的“ `?`”，我无法`access_token`从后面的代码中检索到。

我该如何解决这个问题？

# windows - Windows Mobile 应用程序中的页脚未修复

> ID：12293260
> 
> 赞同：0
> 
> 时间：2012-09-06T05:05:13.383
> 
> 标签：windows

我的页脚没有在我的 Windows 移动应用程序中修复。

代码：.newFooter {底部：0; 位置：绝对！重要；宽度：100%；}

注意：此代码适用于 Android、BB、Ios。

任何人都可以帮助我一些好的解决方案。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:34:52.777

解决方案 ：

```
/* Start - Used to display the footer at the bottom of the page */
html,
body {
margin:0;padding:0;height:100%;
}

#container {
min-height:100%;position:relative;
}

#header {
}

#content {
padding-bottom:100px; /* Height of the footer element */
}

#footer {
width:100%;position:absolute;bottom:0;left:0;
}
/* End - Used to display the footer at the bottom of the page */ 
```

# c# - 如何在 C#/XAML 的单个故事板中制作多个动画？

> ID：12293269
> 
> 赞同：11
> 
> 时间：2012-09-06T05:06:31.107
> 
> 标签：c#, xaml, windows-8

我正在尝试用 C# 和 XAML 制作一个简单的 Windows Store 游戏，该游戏涉及移动的六边形图块。这主要是为了帮助我学习 C# 和 XAML，因为我以前从未使用过图形甚至 UI 编码。

我有一种方法可以将单个十六进制移动到目标坐标，但是现在看它我意识到不可能一次进行多个移动，这是绝对必要的。

我觉得在我的方法中必须有一些根本性的东西，多个物体在一个画布上移动不可能是一件不寻常的事情，不是吗？我主要是在问这个问题，希望有人能指出我哪里出错了。

```
 //moves the hex hexName to coordinates x, y, over a specified duration.
    public void slideHex(int x, int y, string hexName, Duration duration)
    {

        GameStoryboard.Stop();

        Polygon hex = GameCanvas.FindName(hexName) as Polygon;

        TranslateTransform slideTransform = new TranslateTransform();
        slideTransform.X = hex.RenderTransformOrigin.X;
        slideTransform.Y = hex.RenderTransformOrigin.Y;

        hex.RenderTransform = slideTransform;

        DoubleAnimation animX = new DoubleAnimation();
        DoubleAnimation animY = new DoubleAnimation();

        animX.Duration = duration;
        animY.Duration = duration;

        GameStoryboard.Duration = duration;
        GameStoryboard.Children.Add(animX);
        GameStoryboard.Children.Add(animY);

        Storyboard.SetTarget(animX, slideTransform);
        Storyboard.SetTarget(animY, slideTransform);

        Storyboard.SetTargetProperty(animX, "X");
        Storyboard.SetTargetProperty(animY, "Y");

        animX.To = x;
        animY.To = y;

        GameStoryboard.Begin();

    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T05:08:33.820

一个故事板可以包含多个动画，每个动画可以针对不同的 UI 元素。这是一个故事板示例，它“脉冲”三个不同控件的边框颜色：

```
<Storyboard x:Name="pulseAnimation" AutoReverse="True">
    <ColorAnimation x:Name="animateLatitudeTextBoxBorderColour" Storyboard.TargetName="textBoxLatitude" From="{StaticResource PhoneTextBoxColor}" To="Green" Storyboard.TargetProperty="(TextBox.BorderBrush).(SolidColorBrush.Color)" Duration="0:0:0.4" />
    <ColorAnimation x:Name="animateLongitudeTextBoxBorderColour" Storyboard.TargetName="textBoxLongitude" From="{StaticResource PhoneTextBoxColor}" To="Green" Storyboard.TargetProperty="(TextBox.BorderBrush).(SolidColorBrush.Color)" Duration="0:0:0.4" />
    <ColorAnimation x:Name="animateHyperlinkTextColour" Storyboard.TargetName="hyperlinkButtonCurrentLocation" From="{StaticResource PhoneForegroundColor}" To="Green" Storyboard.TargetProperty="(HyperlinkButton.Foreground).(SolidColorBrush.Color)" Duration="0:0:0.4" />
</Storyboard> 
```

您的代码看起来不错 - 您已经在为 的多个属性设置动画`slideTransform`，并且由于动画的目标是动画的属性而不是情节提要，因此没有理由不能重新定位`animX`或`animY`完全重新定位到不同的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T05:23:04.507

您可以创建多个故事板并同时执行它们，以便同时为多个对象设置动画。请参阅以下文章中的示例，该示例为待办事项列表中的多个项目设置动画：

[http://www.codeproject.com/Articles/428088/A-Gesture-Driven-Windows-Phone-To-Do-List#swipe](http://www.codeproject.com/Articles/428088/A-Gesture-Driven-Windows-Phone-To-Do-List#swipe)

# iphone - iphone应用程序开发的内存问题

> ID：12293270
> 
> 赞同：1
> 
> 时间：2012-09-06T05:06:33.803
> 
> 标签：iphone, xcode, memory, dealloc, viewdidunload

我正在开发一个 iphone 应用程序，它使用非常简单的界面并在后端进行数据库处理。我也在启用 ARC OPTION。我的 viewDidLoad 方法如下：

```
 - (void)viewDidLoad
   {
    [super viewDidLoad];
// Do any additional setup after loading the view from its nib.

/*********needed to implement scroll view********/
svScroll.frame = CGRectMake(0, 0, 320, 460);
svScroll.contentSize = CGSizeMake(320, 800);
/*********************************************/

//[DataHelper openDbCompany];

NSString *date=[DataHelper getFinYr];

[btDate setTitle:[DataHelper dateSqliteToNormal:date] forState:UIControlStateNormal];

arrayUnitsMeasure=[[NSMutableArray alloc]initWithArray:[DataHelper getUnitsOfMeasure]];

//[DataHelper closeDbCompany];

tfValue.keyboardType=UIKeyboardTypeDecimalPad;
tfQuantity.keyboardType=UIKeyboardTypeDecimalPad;
tfCostUnit.keyboardType=UIKeyboardTypeDecimalPad;

//catching the notification for text field value change.
[[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(textFieldChanged:) name:UITextFieldTextDidChangeNotification object:tfQuantity];

[[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(textFieldChanged:) name:UITextFieldTextDidChangeNotification object:tfCostUnit];

    } 
```

我的 .h 文件包含定义如下的 IBOutlets：

```
 @interface
     Create_Inventory_Item:UIViewController<Date_Picker_Protocol,Picker_View_Protocol,UITextFieldDelegate>
    {
        IBOutlet UIScrollView *svScroll;
        IBOutlet UITextField *tfItemName;

IBOutlet UILabel *lbUnitsOfMeasure;
IBOutlet UIButton *btSelectUnitsMeasure;

IBOutlet UIButton *btDate;
IBOutlet UINavigationBar *btBack;

IBOutlet UITextField *tfQuantity;
IBOutlet UITextField *tfCostUnit;
IBOutlet UITextField *tfValue;

IBOutlet UIButton *btCreate;
NSMutableArray *arrayUnitsMeasure;

UIButton *btKeyboardDone;
UIView *accessoryView;
UITextField *txtActiveField;
UIButton *btMinus;
Picker_View *callPickerView;
Date_Picker *callDatePicker;
    }

    @property(nonatomic,retain) UIButton *btMinus;
    @property(nonatomic,retain)UITextField *txtActiveField;
    @property(nonatomic,retain) UIButton *btKeyboardDone;
    @property(nonatomic,retain)UIView *accessoryView;
    @property(nonatomic,retain) IBOutlet UINavigationBar *btBack;
    @property(nonatomic,retain)IBOutlet UIScrollView *svScroll;
    @property(nonatomic,retain)IBOutlet UITextField *tfItemName;
    @property(nonatomic,retain)IBOutlet UILabel *lbUnitsOfMeasure;
    @property(nonatomic,retain)IBOutlet UIButton *btSelectUnitsMeasure;
    @property(nonatomic,retain) IBOutlet UIButton *btDate;
    @property(nonatomic,retain) IBOutlet UITextField *tfQuantity;
    @property(nonatomic,retain) IBOutlet UITextField *tfCostUnit;
    @property(nonatomic,retain)IBOutlet UITextField *tfValue;
    @property(nonatomic,retain) IBOutlet UIButton *btCreate;

    -(IBAction)btSelectUnitsMeasure:(id)sender;
    -(IBAction)btDate:(id)sender;
    -(IBAction)btCreate:(id)sender;
    -(IBAction) hideKeyboard:(id)sender;
    -(IBAction)showAlerView:(NSString *)message;
    -(IBAction)btBack:(id)sender; 
```

请告诉我在dealloc和viewDidUnloadMethod中我需要做什么？我正在使用 ARC 选项。
此外，当我在模拟器中使用配置文件选项运行应用程序以进行内存分配和泄漏时，它有时会显示 MEMORY LEVEL LOW WARNING 和 MEMORY LEVEL NORMAL。这是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:26:12.333

如果您使用 ARC，您只需要一个 dealloc 来取消该类实例中所有基于对象的成员。

所有应用程序都会偶尔收到内存警告。您可以选择通过取消稍后可以延迟初始化的成员来响应。

在我的应用程序中，我在 viewWillAppear 中延迟初始化大多数可视成员（UIViews 等...），并在 viewDidDisappear 方法中积极释放。这样，只有 2 个视图可以同时初始化其成员（在视图控制器转换期间），并且当该视图是唯一可见的视图时，只有 1 个视图。

结果，除了处理大图像等时，我得到的内存警告很少。

# applescript - 在 Applescript 中执行终端命令

> ID：12293271
> 
> 赞同：0
> 
> 时间：2012-09-06T05:06:42.437
> 
> 标签：applescript

我在 AppleScript 中执行了终端命令“system_profiler SPApplicationsDataType”以获取 MAC 中已安装的应用程序，我需要解析输出，请解释如何通过 Apple 脚本或 Python 实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:12:10.893

**在 Python 中，您可以使用 subprocess -**

[http://docs.python.org/library/subprocess.html](http://docs.python.org/library/subprocess.html)

具体`check_output`方法：[http ://docs.python.org/library/subprocess.html#subprocess.check_output](http://docs.python.org/library/subprocess.html#subprocess.check_output)

所以你只需使用：

```
output = subprocess.check_output(["system_profiler", "SPApplicationsDataType"])
print output # or do something else with it 
```

您的命令将被分解为一个数组，每个参数都有一个元素。

**在 Applescript 中，您可以执行以下操作：**

```
set textReturned to (do shell script "system_profiler SPApplicationsDataType")

tell application "TextEdit"
    activate
    make new document at the front
    set the text of the front document to textReturned
end tell 
```

这将运行命令并将输出转储到 TextEdit。

# css - 如何使用css更改滚动条颜色

> ID：12293275
> 
> 赞同：41
> 
> 时间：2012-09-06T05:07:18.090
> 
> 标签：css

**[我的 jsfiddle 在这里](http://jsfiddle.net/sureshpattu/Xck2A/)**
我试图改变滚动条的颜色，但在这里它不起作用。

CSS：

```
.flexcroll {     
    scrollbar-face-color: #367CD2;
    scrollbar-shadow-color: #FFFFFF;
    scrollbar-highlight-color: #FFFFFF;
    scrollbar-3dlight-color: #FFFFFF;
    scrollbar-darkshadow-color: #FFFFFF;
    scrollbar-track-color: #FFFFFF;
    scrollbar-arrow-color: #FFFFFF;
}​ 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-09-06T05:16:17.427

您可以为 webkit 使用以下属性，这些属性可以到达*shadow DOM*：

```
::-webkit-scrollbar              { /* 1 */ }
::-webkit-scrollbar-button       { /* 2 */ }
::-webkit-scrollbar-track        { /* 3 */ }
::-webkit-scrollbar-track-piece  { /* 4 */ }
::-webkit-scrollbar-thumb        { /* 5 */ }
::-webkit-scrollbar-corner       { /* 6 */ }
::-webkit-resizer                { /* 7 */ } 
```

这是一个带有红色滚动条的工作小提琴，基于[this page](http://css-tricks.com/custom-scrollbars-in-webkit/)解释问题的代码。

[http://jsfiddle.net/hmartiro/Xck2A/1/](http://jsfiddle.net/hmartiro/Xck2A/1/)

使用这个和您的解决方案，您可以处理除 Firefox 之外的所有浏览器，我认为此时仍然需要 javascript 解决方案。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-06T05:34:58.927

你的 CSS 只能在 IE 浏览器中工作。hayk.mart 建议的 css**将**在 webkit 浏览器中运行。并且通过使用不同的 css hack，您无法使用相同的结果设置浏览器滚动条的样式。

因此，最好使用**jQuery/Javascript**插件来实现具有相同结果的跨浏览器解决方案。

**解决方案：**

通过使用[**jScrollPane**](http://jscrollpane.kelvinluck.com/)一个 jQuery 插件，可以实现跨浏览器的解决方案

[**看这个演示**](http://jsfiddle.net/akhurshid/tRbCs/)

# mod-rewrite - HTML 重写 .htaccess 文件

> ID：12293276
> 
> 赞同：0
> 
> 时间：2012-09-06T05:07:21.147
> 
> 标签：mod-rewrite, url-rewriting, rewrite

当我使用 .htaccess 文件到我的根文件夹来重写 URL 时，它发生错误并得到这个消息“服务器遇到内部错误或配置错误，无法完成您的请求。”

我在我的 .htaccess 文件中使用这个重写规则

```
Options +FollowSymLinks
RewriteEngine on

RewriteRule services services.html? 
```

[http://www.domain.com/services.html](http://www.domain.com/services.html)获取重写 url [http://www.domain.com/services](http://www.domain.com/services)

请指导我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:34:34.440

我认为它应该是

```
RewriteRule ^services$ services.html [L] 
```

或者

```
RewriteCond /%{REQUEST_FILENAME}.html -f
RewriteRule ^([a-zA-Z0-9_-\s]+)/$ /$1.html 
```

# jquery - jQuery $.inArray 不适用于 ASCII 字符

> ID：12293280
> 
> 赞同：5
> 
> 时间：2012-09-06T05:07:57.873
> 
> 标签：jquery, html

正如你在[jsfiddle](http://jsfiddle.net/venkateshwar/4ju3h/20/)中看到的，我拿了两个黑币。如果我将一枚黑色硬币放在另一枚黑色硬币上，那么它应该会显示“无法杀死自己的同类”的警报，并将硬币放在之前的位置。但正如你所见，它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T05:56:03.077

我认为您的问题是您正在寻找 UTF-8 字符的 HTML 实体编码版本。HTML 实体编码使用形式`&#XXXX;`，其中`XXXX`是实体的十进制值（在本例中为 UTF-8 字符代码）。

在 JavaScript 方面，您需要使用实体的 JavaScript 形式，即`\uXXXX`，其中`XXXX`是实体的*十六进制*值。因此，通过将十进制值转换为十六进制并将它们以正确的形式放置，您的搜索数组应该是：

```
var blackCoins = ["\u265b", "\u265c"]; 
```

我不确定游戏应该如何运行，但进行此更改确实会导致`$.inArray()`. 所以我认为这就是你要找的。

# mysql - MySQL查询涉及多行，根据最大值访问一行

> ID：12293281
> 
> 赞同：0
> 
> 时间：2012-09-06T05:08:01.293
> 
> 标签：mysql, sorting

所以我试图有一个脚本来访问基于特定 id 的表的所有值。该脚本使用 PHP 返回数组中的值：

**例子：**

```
// Select data from DB 
$query = 'SELECT * FROM experiences WHERE user_id = ' . $id; 
$result = mysqli_query($link, $query) or die (mysqli_error($link));

// Not sure this actually creates a 2D array...
$array = mysqli_fetch_array($result); 
```

但是，我意识到我需要针对特定​​任务修改结果，例如特定值最高的行。

我将如何去做，并且 $array 实际上是否包含所有行和相应的字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T05:26:49.607

尝试

`'SELECT * FROM experiences WHERE user_id ='.$id.' HAVING MAX(column_name)`

或者

```
 "SELECT max(column_name), other column...
  FROM experiences 
  WHERE user_id =".(int)$id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T05:27:06.217

假设您已`$id`正确清洁，您可以执行此操作

```
// Select data from DB 
$query = 'SELECT * FROM experiences WHERE user_id = ' . $id; 
$result = mysqli_query($link, $query) or die (mysqli_error($link));

$data = array();
while($row = mysqli_fetch_array($result)) {
  $data[] = $row;
} 
```

并将`$data`包含您正在寻找的二维数组。

如果您想要特定值最高的行，我建议您查看`ORDER BY`或`MAX()`根据您的需要。

# c# - 如何在 c# windows 应用程序中获取 windows 解锁事件？

> ID：12293286
> 
> 赞同：7
> 
> 时间：2012-09-06T05:08:14.800
> 
> 标签：c#, windows

我想在 Windows 应用程序中跟踪 Windows 解锁事件。它是如何完成的？用于此的事件是什么？我需要为此导入任何命名空间吗？

当用户解锁窗口时，应用程序需要执行一些任务。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-06T05:14:51.113

正如这个 StackOverflow 答案中所发布的：[https](https://stackoverflow.com/a/604042/700926) ://stackoverflow.com/a/604042/700926你应该看看[SystemEvents.SessionSwitch Event](http://msdn.microsoft.com/en-us/library/microsoft.win32.systemevents.sessionswitch.aspx)。

示例代码也可以在参考答案中找到。

我只是将引用的[StackOverflow 答案](https://stackoverflow.com/a/604042/700926)中显示的代码试了一下，它似乎可以在带有 .NET 框架 4.5 的 Windows 8 RTM 上运行。

为了您的参考，我已经包含了我刚刚组装的控制台应用程序的完整示例代码。

```
using System;
using Microsoft.Win32;

// Based on: https://stackoverflow.com/a/604042/700926
namespace WinLockMonitor
{
    class Program
    {
        static void Main(string[] args)
        {
            Microsoft.Win32.SystemEvents.SessionSwitch += new Microsoft.Win32.SessionSwitchEventHandler(SystemEvents_SessionSwitch);
            Console.ReadLine();
        }

        static void SystemEvents_SessionSwitch(object sender, Microsoft.Win32.SessionSwitchEventArgs e)
        {
            if (e.Reason == SessionSwitchReason.SessionLock)
            {
                //I left my desk
                Console.WriteLine("I left my desk");
            }
            else if (e.Reason == SessionSwitchReason.SessionUnlock)
            {
                //I returned to my desk
                Console.WriteLine("I returned to my desk");
            }
        }
    }
} 
```

# android - Phonegap Android 像素比问题 - 图像，页面宽度不可靠

> ID：12293298
> 
> 赞同：1
> 
> 时间：2012-09-06T05:09:35.127
> 
> 标签：android, cordova, jqtouch, pixel-ratio

当我之前创建 PhoneGap 应用程序时，页面上呈现的图像无法正确显示在高 DPI 设备上。所以我为所有设备制作了固定像素比率的网页：1，而不考虑设备 DPI。但这会降低图像的清晰度。

我计划为我的新应用程序使用流体样式，而不是在 HTML 中使用特定的宽度和高度。但是，当我为 div（在 CSS 中）指定以 px 为单位的高度时，高度在不同设备中呈现不同。

有什么方法可以使 HTML 的比例以及 CSS 的宽度和高度相同？

是否有任何未知属性可以告诉 HTML 以不同的像素比率表现。

我正在使用 HTML 标签：

```
<meta name="viewport" id="viewport" content="width=device-width, target-densitydpi=device-dpi, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0" /> 
```

我想在 device-dpi 中呈现页面以避免清晰度降低。请提供您的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T05:18:57.767

理想情况下，您应该避免使用像素并使用 em。例如：不要使用 16px，而是使用 1.1em 或任何与您的情况等效的值。这适用于我的 phonegap jquerymobile 应用程序

# android - 在Linux下设置Android设备进行开发，无需root

> ID：12293300
> 
> 赞同：1
> 
> 时间：2012-09-06T05:10:02.773
> 
> 标签：android, root

你好 StackOverflowers，

我渴望在早期尝试在我的平板电脑上尝试一些 Android 程序。但是，我没有对我正在使用的 Linux 机器 (OpenSUSE 12.1) 的 root 访问权限。因此，我无法让系统找到我的设备。

本教程[http://developer.android.com/tools/device.html](http://developer.android.com/tools/device.html)，以及我可以在网上找到的几乎所有帖子，都没有提及`51-android.rules`无需 root 即可绕过设置的方法。有些帖子甚至提到，要找到设备，该`adb`命令应该以 root 运行。

这是否意味着我没有希望进行设备调试？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:14:08.557

我认为您不需要对 adb 进行 root 访问。虽然要检测到设备，但您需要在 .AFAIK 中添加设备详细信息`rules.d`。

如果您的设备和计算机在同一网络上，则可以通过 wifi 使用 adb。但是要将设备置于 tcp 模式，您需要在手机或另一台可以检测到设备的计算机上进行 root 访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T05:19:17.477

您的设备不必植根。添加设备后`51-android.rules`，请确保使用以下命令重新启动 adb 服务器：

`adb kill-server`

`adb start-server`

还有一件事，确保你打开`Debugging Mode`

# excel - 如何使用 VBA 宏禁用 Excel 工作表中的特殊字符

> ID：12293302
> 
> 赞同：0
> 
> 时间：2012-09-06T05:10:33.133
> 
> 标签：excel, vba

嗨，我的主要目的是在用户使用 VBA 中的宏打开 Excel 工作表后禁止用户输入特殊字符

我试过怎么做。我为一个角色找到了一种方法。

```
Sub Disable_Keys()
    Dim KeysArray As Variant
    Dim Key As Variant

    KeysArray = Array("@", "!", "~")

    'Disable the StartKeyCombination key(s) with every key in the KeysArray
    For Each Key In KeysArray
        Application.OnKey Key, "myMsg"
    Next Key
End Sub

Sub myMsg()
    MsgBox "All keys are valid characters"
End Sub 
```

这个有问题，我只禁用了该数组中的两个键。如果我像“〜”一样添加3个。它不适用于那个键。

如果您还有其他解决方案，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T05:31:52.670

您的代码按书面方式工作。

问题是 OnKey 方法被解释`"~"`为 Enter 键。相反，要让波浪号实际使用`"{~}"`。这是有关[OnKey 方法的文档。](http://msdn.microsoft.com/en-us/library/office/aa191832%28v=office.10%29.aspx)

明确地说，使用这个：`KeysArray = Array("@", "!", "{~}")`。

**编辑：**由于评论，我只想添加一些你*应该*做的事情。

您需要将列出的代码移动到事件中的`ThisWorkBook`模块。`Workbook_Open`您还应该包括这样的方法：

```
Private Sub Workbook_BeforeClose(Cancel As Boolean)
        Dim KeysArray As Variant
        Dim Key As Variant

        KeysArray = Array("@", "!", "{~}")

        'Disable the OnKey settings with every key in the KeysArray
        For Each Key In KeysArray
            Application.OnKey Key, ""
        Next Key
End Sub 
```

如果您不包含此方法，您的输入键`KeysArray`将尝试运行`MyMsg`子程序，直到您关闭应用程序，即使在工作簿已关闭之后也是如此。

# asp.net - 在 ASP 中的文本框后显示文本/标签

> ID：12293303
> 
> 赞同：0
> 
> 时间：2012-09-06T05:10:41.130
> 
> 标签：asp.net

我在一个 ASPX 页面中有一个简单的表单，它有很多`<label>`配对`<asp:TextBox>`来构建表单的开销。

我需要在文本框后面添加一个字符串以指示该字段是强制性的。我尝试在字段后添加 a `<span>`、 a`<em>`或 a `<div>`，但它仍会在文本框底部显示消息。

我有什么办法可以做到这一点？

**编辑：** 我的意思是文本框的右侧，而不是水印中的后面。我的错。

**编辑示例代码：**
我已经尝试了所有建议，但仍然无法正常工作，考虑是否是我的代码问题。以下是我的代码：

```
<label>Telephone No.</label>
<asp:TextBox ID="txtTelNo" runat="server"></asp:TextBox>
<span class="afterInput">test</span> 
```

任何指针？谢谢。

**编辑答案**
事实证明，问题在于 css 属性。我使用的模板具有分配给`display: block`属性的所有输入，这使得`<input>`元素之后的任何内容都被按下。

在创建自定义 css 类`display: inline-block`并适当地分配给它们之后，我设法得到了我想要的结果。

非常感谢您提供的答案，尤其是`:after`属性和水印属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T05:26:28.957

见[http://jsfiddle.net/ekWG9/](http://jsfiddle.net/ekWG9/)

```
.required:after{
    content: "*";
    color: red;   
}​

<label>A box</label><input type="text" value="Hello" /><span class="required"></span>​

<!-- alternative HTML -->

<span class="required"><label>A box</label><input type="text" value="Hello" /></span>​ 
```

使用`:after`伪元素选择器可以让您从标记中取出文字内容（例如，您不必一遍又一遍地重复“*”）。

您还可以使用相对或绝对定位来调整`:after`伪元素内容的位置。示例：http: [//jsfiddle.net/ekWG9/1/](http://jsfiddle.net/ekWG9/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T05:20:51.387

By behind the textbox, seems you are talking of watermark text.

You could use the [TextBoxWatermark](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/TextBoxWatermark/TextBoxWatermark.aspx) from ajaxcontrol toolkit.

There are also several jQuery alternatives to implement it.

[html5 also has browser support for watermarks](http://diveintohtml5.info/forms.html):

```
<input name="q" placeholder="Go to a Website"> 
```

You could add an attribute to your control to that effect.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T05:23:36.720

Use css for this purpose:

```
span.clsRequired {
    float:left;
    margin:2px 0 0 3px;
    color:red;

} 
```

And your span before text box looks like:

```
<span class="clsRequired ">*</span> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T05:35:23.990

```
you should try something like this

 <body>
  <form id="form1">
  <asp:TextBox ID="TextBox1" runat="server"/>&nbsp;<span>Required field</span>
 </form>
 </body> 
```

# java - 在 Android 中映射空间数据

> ID：12293309
> 
> 赞同：6
> 
> 时间：2012-09-06T05:11:07.403
> 
> 标签：java, android, mapping, gis

我有一个空间表，我想从中将其对象映射到 Android 的画布上。这是在 SpatiaLite 数据库中。

我可以以 SVG 格式获取对象数据并从中创建地图，但效率不高。原始对象数据以 blob 格式保存。

我的问题是，GIS 系统如何映射他们的数据。我想映射对象并能够触摸它们以提取它们的属性信息。

这是一个非常简单的问题，但答案却很大。但我只是在寻找一个开始的地方。

我不打算建立一个 GIS 系统，只是创建一些类似的功能。

任何信息将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:29:37.000

我发现除了 svg 之外还有几个选项：

查询出数据并将其解析为JTS几何对象，如果需要，可以通过JTS将对象操作为坐标数组。JTS-1.8.jar 是最新的当前库。

使用它来解析：Geometry geometry = new WKBReader().read(stmt.column_bytes(2));

OpenGL 1 或 2 似乎不是使用 Canvas，而是更灵活地生成高度可配置的地图。要使用这个，所有几何图形必须转换为浮点数组，然后是浮点缓冲区，有很多关于 OpenGL 的教程 [Android OpenGL](http://developer.android.com/training/graphics/opengl/index.html) 和 [Android OpenGL 入门](http://www.learnopengles.com/android-lesson-one-getting-started/)是两个非常好的教程。

Habib：spatialite 和 android 的一个很好的起点是这个例子：[spatialite-android](http://code.google.com/p/spatialite-android/downloads/detail?name=spatialite.apk&can=2&q=)

为了使用 OpenGL 在地图上选择几何对象，需要混合选择单击点周围的缓冲区或区域、更改单击对象的颜色以及在可以显示的对象上创建元数据。这可能有点宽泛，但我还没有达到这一点，所以很多都是理论上的。

# c# - 正则表达式匹配 IP

> ID：12293314
> 
> 赞同：1
> 
> 时间：2012-09-06T05:11:21.350
> 
> 标签：c#, .net, regex, string

在 C# 中，给定一个格式如下的字符串：

```
http://10.242.33.210:5000

ftp://52.42.12.52:7000/ 
```

如何使用正则表达式仅检索 IP（应丢弃端口）

对于以上两个示例，正则表达式应匹配 10.242.33.210 和 52.42.12.52

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T05:13:29.217

[您可以创建一个Uri](http://msdn.microsoft.com/en-us/library/system.uri.aspx)并获取它的[Host](http://msdn.microsoft.com/en-us/library/system.uri.host.aspx)属性，而不是 Regex

```
Uri url = new Uri("ftp://52.42.12.52:7000/");
Console.Write(url.Host); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T05:12:22.643

其实很简单：

```
[\d.]+ 
```

将匹配一系列数字和点。在您的情况下，IP 地址没有端口。您可以通过尝试符合 IP 的外观（0 到 255 之间的数字，或点之间只有一到三位数字）来使其更复杂，但是如果您所期望的只是像上面那样输入，那么这应该没问题。

快速 Powershell 测试：

```
PS> $tests = 'http://10.242.33.210:5000','ftp://52.42.12.52:7000/'
PS> $tests | %{ $_ -match '[\d.]+' | Out-Null; $Matches}

Name                           Value
----                           -----
0                              10.242.33.210
0                              52.42.12.52 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T05:14:13.663

```
\b([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\b 
```

相同但更短（来自zerkms）：

```
\b\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\b 
```

# sql-server - 使用 pass through query 从 ms access 访问 oracle 数据库表

> ID：12293315
> 
> 赞同：2
> 
> 时间：2012-09-06T05:11:24.717
> 
> 标签：sql-server, database, oracle, ms-access

我正在尝试从 ms 访问访问 oracle 数据库表。最初花了很多时间（与性能问题有关）

现在我在 oracle 中有一个存储过程，我试图从 ms 访问中调用它。但我需要从 ms 访问将一些参数传递给存储过程。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:20:53.080

在 Access 2007 或 2010 中，单击页面顶部的“设计”选项卡。在“查询类型”部分中，选择“传递”。然后您将看到一个记事本视图，您可以在其中键入您的 PLSQL 代码。

# mysql - MySQL查询有什么问题？

> ID：12293316
> 
> 赞同：0
> 
> 时间：2012-09-06T05:11:29.383
> 
> 标签：mysql

```
SELECT n.nid, n.title, c.field_news_date_value, 
       c.field_news_short_text_value, c.field_news_short_text_format 
FROM node n, term_data m,  term_node p 
INNER JOIN content_type_news c 
   ON c.nid = n.nid AND c.vid = n.vid 
WHERE n.type='news' AND n.status=1 
ORDER BY c.field_news_date_value DESC. 
```

我收到一个错误

> “on 子句”中的未知列“n.nid”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T05:21:21.977

I think query must be like this. ( assuming there must be columns, name `nid` and `vid` in both tables)

**Note :** it is ambiguous to use use multiple table in `FROM` clause when we are using `JOIN`

```
SELECT n.nid, n.title, c.field_news_date_value, 
       c.field_news_short_text_value, c.field_news_short_text_format 
FROM node n
INNER JOIN content_type_news c 
ON c.nid = n.nid AND c.vid = n.vid 
WHERE n.type='news' AND n.status=1 
ORDER BY c.field_news_date_value DESC. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T05:14:26.603

尝试这个：

```
SELECT n.nid, n.title, c.field_news_date_value, c.field_news_short_text_value, c.field_news_short_text_format 
FROM term_data m, term_node p, node n INNER JOIN content_type_news c 
ON c.nid = n.nid AND c.vid = n.vid 
WHERE n.type='news' AND n.status=1 
ORDER BY c.field_news_date_value DESC 
```

基本上，搬到`node n`靠近`INNER JOIN`运营商。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T05:16:59.993

您需要`AS`在查询中使用。请使用以下查询：

```
SELECT 
 n.nid, n.title, 
 c.field_news_date_value, 
 c.field_news_short_text_value, 
 c.field_news_short_text_format 
FROM 
 node as n, term_data as m,  term_node as p 
INNER JOIN 
 content_type_news c ON c.nid = n.nid AND c.vid = n.vid 
WHERE 
 n.type='news' 
 AND n.status=1 
ORDER BY 
 c.field_news_date_value DESC 
```

# javascript - 在jquery中以序列化形式传递额外的参数

> ID：12293317
> 
> 赞同：0
> 
> 时间：2012-09-06T05:11:40.043
> 
> 标签：javascript, jquery, jquery-post

在以下示例中，我使用 post 方法提交序列化表单。它现在工作正常。但我想将更多额外参数传递给提交的页面。如何将该值传递给表单。我不喜欢将该值保存在该表单中的隐藏字段中的方式。有没有其他方法可以做到这一点？

```
var postUrl = 'myphppage.php';

$.post(postUrl,
    $('#myForm').serialize(),
    function(response) {    

        if(response.status){
        //do something
        }else{
        }

    },'json'
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T05:14:33.093

只需简单地添加，就像您如何进行字符串连接一样。例如，您想添加一个`username`带有 value的参数`praveen`，您可以这样做：

```
$.post(postUrl,
    $('#myForm').serialize() + '&username=praveen',
    function(response) {    
        if(response.status){
            //do something
        }else{

        }
    },'json'
); 
```

但只需确保您对值和键进行 URLEncode。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T05:15:25.933

你可以试试这个

```
var postUrl = 'myphppage.php?q='+variable 
```

并用于`$_GET['q']`接收价值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T05:15:57.693

您可以做的一种方法是：

```
$.post(postUrl, { form: $('#myForm').serialize(), others: 'Ramiz' }, function(response) {    
    if(response.status){
            //do something
    } else{
            //do something else
    }

  },'json'
); 
```

您还可以在表单中使用隐藏字段，然后您将不需要任何东西，只需序列化表单对象，您将拥有它们：

`<input type="hidden" name="others" id="others" value="Ramiz" />` `<input type="hidden" name="others" id="another" value="Arun" />`

# java - 对于 java 应用程序的 web 服务，哪个是更好的 apache 或 tomcat apache..？

> ID：12293318
> 
> 赞同：0
> 
> 时间：2012-09-06T05:11:40.177
> 
> 标签：java, wcf, web-services, apache, tomcat6

我已经使用 Tomcat Apache 将我的 java 桌面应用程序用作 webservice。所以这是一个不错的选择或者我需要使用 apache 服务器将我的 java 应用程序作为 web 服务？

我想要的是在使用 apachetomcat 制作 Web 服务之后。我可以使用 wcf 或 .net 的桌面应用程序调用该 Web 服务吗？

wcf服务->调用java应用程序的webservice（使用apache tomcat）->在服务器上执行java应用程序->并将resutl返回给wcf服务

wcf 服务的功能如下

调用 Javaapplication();

并且通过我可以在服务器上调用java程序吗？

可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T15:57:32.773

Apache 是一个 http 服务器。Tomcat 是一个 Java EE 环境，其中包括作为 http 服务器的功能。

Apache 本身不会运行您的 Java 应用程序。在许多情况下，Tomcat 就足够了，但在更大容量的情况下，您可能希望将 Apache 和 Tomcat 一起使用。

除此之外，看起来你需要找到一个关于 Java EE 和 Web 服务的好教程，比如[Oracle 的这个](http://docs.oracle.com/javaee/6/tutorial/doc/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T15:52:59.503

如果您正在查看 Apache 产品，那么 Axis 是用于 Web 服务的工具。为此，我会看看[Axis2](http://axis.apache.org/axis2/java/core/)。但是，我鼓励您查看那里的各种选项并选择最适合您的选项。

# paypal - 贝宝：pixel.gif - 我需要吗？

> ID：12293319
> 
> 赞同：17
> 
> 时间：2012-09-06T05:12:09.990
> 
> 标签：paypal

在我的 PayPal 按钮的末尾有这一行：

```
<img alt="" border="0" src="https://www.paypalobjects.com/en_AU/i/scr/pixel.gif" width="1" height="1"> 
```

它有点破坏了我设计的美学。任何人都知道它的目的是什么，我可以删除它吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-06T06:34:49.320

我已经设置了多个没有 pixel.gif 的 paypal 按钮。

如果需要，您可以将其删除。那里有 PayPal 可以监控流量，正如那里所说的[那样](https://www.paypal-community.com/t5/Merchant-services-Archive/Open-Paypal-link-in-New-Window-What-is-pixel-gif/td-p/2039)

> PayPal 使用这行代码供内部使用，仅用于监控流量。此代码的使用是可选的。您可以通过谷歌搜索“跟踪像素”了解更多信息。

# asp.net - Asp.NET MVC 视图中的引号

> ID：12293324
> 
> 赞同：4
> 
> 时间：2012-09-06T05:12:32.050
> 
> 标签：asp.net, asp.net-mvc, razor, view

在视图中，

```
@{
    Layout = "~/Views/Shared/site.cshtml";
    ViewBag.Title = "Organizations";

    var organizations = "";
    foreach (var org in Model)
    {
        organizations += "'" + org.Name + "':'" + org.Id + "',";
    }
    organizations = organizations.Substring(0, organizations.Length - 1);
} 
```

结果操作：`organizations = "'Passport':'14f0eac0-43eb-4c5f-b9fe-a09d2848db80','Bank':'ad1d77d8-7eb1-4a4c-9173-b0f2f7269644'";`

输出部分JS代码中的数据。但是在浏览器中查看页面的源代码时，并没有得到想要的东西。有什么问题？如何进行正常报价？

JS：`"data": "@organizations"`

结果在视图网页返回`"data": "&#39;Passport&#39;:&#39;14f0eac0-43eb-4c5f-b9fe-a09d2848db80&#39;,&#39;Bank&#39;:&#39;ad1d77d8-7eb1-4a4c-9173-b0f2f7269644&#39;"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T05:21:01.613

OK cool Q,try this source:

```
@{
    var model = Model.ToArray().Select(org => string.Format("'{0}':'{1}'", org.Name, org.Id));
    var data = string.Join(",", model);
}

@Html.Raw(data) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T05:20:51.930

What if you change

```
"data": "@organizations" 
```

to

```
"data": "@Html.Raw(organizations)" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T05:23:24.537

`@Html.Raw(content)`

And check this one out: [http://jeffreypalermo.com/blog/what-is-the-difference-in-lt-variable-gt-and-lt-variable-gt-in-asp-net-mvc/](http://jeffreypalermo.com/blog/what-is-the-difference-in-lt-variable-gt-and-lt-variable-gt-in-asp-net-mvc/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T05:26:18.510

在您的代码示例中，罪魁祸首是

```
@organizations 
```

生成引号。您可以改为使用：

```
@Html.Raw(organizations) 
```

好的，这很好，但是通过创建 JSON，您正在做框架可以为您做的工作。您可能想要一个框架可以为您序列化的模型。这样，您甚至根本不需要视图标题中的任何代码。

```
@Html.Raw(JsonConvert.SerializeObject(Model.ToDictionary(m => m.Name, m => m.Id)))) 
```

上面，请注意我正在使用 Json.NET，您可能希望将 NuGET 加入到您的项目中，因为 Microsoft 正在转向它。弄清楚如何使用旧的 JSON 序列化程序来执行此操作毫无意义。另请注意，除非您将模型用于其他目的，否则您可能会选择在视图之外进行字典转换，从而减少视图中的代码工作。

接下来，如果您在视图中嵌入 JSON，您可能需要考虑其他两个选项之一。如果数据量很小，可以考虑使用[eli (here) 提出的 join 方法](https://stackoverflow.com/questions/12293324/quotes-in-asp-net-mvc-view#12293416)，而是将其编码为 HTML 5 "data-" 元素并使用 JavaScript 加载。这样，您就可以将 javascript 排除在您的视野之外。在调试 javascript 时，寻找由动态生成的 HTML 初始化的变量，这只是一个令人困惑的步骤。

更好的是，创建一个可重用的 HTML 帮助器方法来将模型转换为数据属性：[How to use dashes in HTML-5 data-* attributes in ASP.NET MVC](https://stackoverflow.com/questions/2520487/how-to-use-html-5-data-attributes-in-asp-net-mvc#4674077)

最后，如果有许多 JSON 元素，请考虑单独发送数据。使用控制器中的简单 Json() 方法渲染它，并在客户端代码中使用简单的 jQuery $.json() 获取它。[有关示例，](http://shashankshetty.wordpress.com/2009/03/04/using-jsonresult-with-jquery-in-aspnet-mvc/)请参见此处

祝你好运！

# iphone - 从主包设置本地通知声音

> ID：12293328
> 
> 赞同：1
> 
> 时间：2012-09-06T05:12:52.737
> 
> 标签：iphone, objective-c

我为本地通知提供了自定义声音，但它不起作用。

```
notif.soundName = @"sound.caf"; 
```

为什么会播放默认声音？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T06:10:23.583

也许您没有在 Xcode 项目中添加声音文件 (*.caf)：Build Phases/Copy Bundle Resources。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T05:14:41.540

我已经使用下面的代码成功完成了通知。

```
UILocalNotification *localNotif = [[UILocalNotification alloc] init];
            if (localNotif == nil)
                return;
            /*  NSDateFormatter *formatDate=[[NSDateFormatter alloc]init];
             [formatDate setDateFormat:@"MM/dd/yyyy"];
             [formatDate setTimeZone:[NSTimeZone systemTimeZone]];
             NSDate *strDate=[formatDate dateFromString:txtDate.text];
             */
            localNotif.fireDate = itemDate;
            //localNotif.timeZone = [NSTimeZone systemTimeZone];

            NSLog(@"the item date is %@",localNotif.fireDate);

            // Notification details
            //localNotif.alertBody = [eventText text];]
            localNotif.alertBody=strEvent;
            // Set the action button
            localNotif.alertAction = @"View";

            //localNotif.soundName = @"Acoustic Noodling 01.caf";
            localNotif.soundName=@"alarm1.aif"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T05:21:03.627

关于在本地通知中播放自定义声音

**确保声音实际上在您的应用程序包中，格式正确（线性 PCM 或 IMA4**

假设通知是 UILocalNotification 类型的对象。

notification.soundName = @"sound.caf";

如果这最初不起作用，那么您可以参考这篇文章，然后参考[这个答案](https://stackoverflow.com/questions/7170475/choose-custom-sound-for-local-notifications)，告诉我们使用正确格式的声音文件（即线性 PCM 或 IMA4）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T18:38:25.703

只需使用文件的相对路径，而不是提供绝对或完整路径。

例如：

```
localNotification.soundName = @"../Documents/recordedFileName.caf"; 
```

另外，请记住文件的 recordDuration 应小于或等于 29 秒。

就是这样，希望回答。

# objective-c - Objective-C：在特殊情况下将字符串解析为数组

> ID：12293329
> 
> 赞同：-2
> 
> 时间：2012-09-06T05:12:56.790
> 
> 标签：objective-c, regex, parsing

我有一个字符串：

> [{"id":1,"gameName":"arizona","cost":"0.5E1","email":"hi@gmail.com","re​​quests":0},{"id":2 ,"gameName":"arizona","cost":"0.5E1","email":"hi@gmail.com","re​​quests":0},{"id":3,"gameName":"arizona ","cost":"0.5E1","email":"hi@gmail.com","re​​quests":0}]

但是，我想将此字符串解析为一个数组，例如：

> [{"id":1,"gameName":"arizona","cost":"0.5E1","email":"hi@gmail.com","re​​quests":0}, {"id":2 ,"gameName":"arizona","cost":"0.5E1","email":"hi@gmail.com","re​​quests":0}, {"id":3,"gameName":"arizona ","cost":"0.5E1","email":"hi@gmail.com","re​​quests":0}]

该数组由大括号之间的逗号分隔：},{

我很喜欢使用命令

```
NSArray *responseArray = [response componentsSeparatedByString:@","]; 
```

但这会将字符串分隔为每个逗号处的值，这是不可取的。

然后我尝试使用正则表达式：

```
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"\\{.*\\}" options:NSRegularExpressionCaseInsensitive error:&error];
NSArray *matches = [regex matchesInString:response options:0 range:NSMakeRange(0, [response length])]; 
```

找到一个匹配项：从第一个花括号开始到最后一个花括号。我想知道是否有人新如何有效地解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T05:15:01.800

这个字符串似乎是有效的 JSON。尝试 JSON 解析器：[NSJSONSerialization](http://developer.apple.com/library/ios/ipad/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T05:22:01.250

I agree with H2CO3's suggestion to use a parser where possible.

But looking at your attempted regex, it looks like you just need to make it non-greedy, i.e.

```
@"\\{.*?\\}"
       ^
       |
       Add this question mark for non-greedy matching. 
```

Of course, this will fail if you have deeper levels of (what I assume to be) nested arrays. Go with the JSON parser!

# share - 自定义 Surf 平台根范围 API

> ID：12293331
> 
> 赞同：2
> 
> 时间：2012-09-06T05:13:14.003
> 
> 标签：share, alfresco, alfresco-share

我想专门定制[Surf Platform Root-Scoped API](http://docs.alfresco.com/4.0/index.jsp?topic=%2Fcom.alfresco.enterprise.doc%2Freferences%2FAPISurfPlatform-intro.html)用户**对象**。这意味着**向用户对象添加新属性或方法以检查用户是否在`header.inc.ftl`[in share] 中的某个组中，例如 `<#if user.isAdmin>**

1.  我该如何实施？
2.  [Alfresco Root Scoped Objects](http://wiki.alfresco.com/wiki/4.0_JavaScript_API#Root_Scope_Objects)可以用作 Surf Platform Root-Scoped 对象吗？

我不知道自定义冲浪平台根对象。谁能帮我？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T08:24:28.647

Not quite sure what you are trying to accomplish, but the role security model is hardcoded in spring-surf/spring webscripts. There is guest, user and admin. If what you want is another analogous role you'll have to hack the spring-surf libaries, namely:

```
org/springframework/extensions/surf/mvc/PageView.java
org/springframework/extensions/webscripts/ScriptUser.java
org/springframework/extensions/webscripts/Description.java
org/springframework/extensions/webscripts/connector/User.java 
```

This is what I had to do to implement `user.isEmployee`. This approach allows you to literally treat your new role just as the others.

you can use

```
<authentication>employee</authentication> 
```

in page descriptors or

```
<item type="link" permission="employee" id="people">/people-finder</item> 
```

on the navigation.

Just checking whether the user is in a certain group in a certain webscript is a whole diffrent story and does not provide the same functionality.

If what you want is the latter, you should make a call to

```
/alfresco/service/api/groups/{shortName} 
```

miss and works through the response.

**Update:** The item permission attribute requires a little more tweaking. In `header.get.js`, propagate the new role to it gets processed properly in `header.inc.ftl`:

```
model.permissions =
{
    guest: user.isGuest,
    admin: user.isAdmin,
    employee : user.isEmployee
}; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-06T06:42:29.497

你可以试试（在JavaScript中我管理过类似的东西）：

```
user = Application.getCurrentUser(context);
       String userName = user.getUserName();
       user.isAdmin() >>> result return true if user logining is admin 
```

或在 JSP 中：

```
#{NavigationBean.currentUser.admin == true} 
```

抱歉，我现在注意到您在谈论 Surf Platform 根对象，但是您放在那里的链接对于 3.3 以上的 Alfresco 版本已弃用。你还在用这么老的东西？如果您设法使用 JavaScript API，您可以使用带有布尔 isAdmin() 的“人”根对象。

# html - 下拉菜单未显示全文且文本未对齐

> ID：12293332
> 
> 赞同：0
> 
> 时间：2012-09-06T05:13:17.253
> 
> 标签：html, css

目前，即使我在#menu li li a 中将其指定为文本对齐中心，我在子菜单中的添加主题、删除主题、删除主题、手动抓取也没有集中。子菜单的执行摘要也被切断。我可以知道如何扩展子菜单并集中所有文本吗？谢谢！

这是我的代码（我真的很抱歉，因为我没有 jsfiddle 帐户并且在等待名单上）：

HTML

```
<div id="menu">
<ul>
    <li><a href="#" >Home</a></li>
    <li><a href="#" >Executive Summary</a></li>
    <li><a href="#" > Visual Analytics</a></li> 
    <li><a href="#" >Settings</a>
        <ul>                                        
            <li><a href="#">Add Subject</a></li>
            <li><a href="#">Delete Subject</a></li>
            <li><a href="#"> Edit Subject</a></li> 
            <li><a href="#" >Manual Crawl</a></li>
            <li><a href="#" >Executive Summary</a></li>
        </ul>
    </li>
</ul> 
```

CSS

```
 #menu {
    position: relative;
    float: left;
    width: 1200px;
    height: 35px;
    font-family: Arial, Helvetica, sans-serif; 
    font-size: 13px;
    padding: 0;
    background: #000;
    text-align: center;
}

#menu ul {
    position: relative;
    list-style: none;
    display: inline-block;
    margin: 0;
    padding: 0;
}

#menu li {
    position: relative;
    float: left;
    height: 100%;
    padding: 0;
    line-height: 35px; 
}

#menu a {
    position: relative;
    height: 100%; 
    width: auto;
    float: left;
    text-decoration: none;
    padding: 0 0 0 25px; 
    margin: 0 3px;
    color: #fff;
    text-align: center;
}

#menu ul ul {
   display: none;
   width: 10em; /* Width to help Opera out */
   background-color: rgba(0,0,0,0.5);
}

#menu li:hover ul {
    display:block;
   position: absolute;
   top: 35px;
   left: 0;
   margin: 0;
   padding: 0;
   z-index: 1; 
}

#menu li li a{
    height: 35px; 
    width: 100%;
    float: left;
    text-decoration: none;
    padding: 0 0 0 25px; 
    margin: 0 3px;
    color: #fff;
    text-align: center;
}

#menu li li a:hover{
   background: rgba(255,255,255,0.5);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:21:57.587

```
 #menu {
    position: relative;
    float: left;
    width: 1200px;
    height: 35px;
    font-family: Arial, Helvetica, sans-serif; 
    font-size: 13px;
    padding: 0;
    background: #000;
    text-align: center;
}

#menu ul {
    position: relative;
    list-style: none;
    display: inline-block;
    margin: 0;
    padding: 0;
}

#menu li {
    position: relative;
    float: left;
    height: 100%;
    padding: 0;
    line-height: 35px; 
}

#menu a {
    position: relative;
    height: 100%; 
    width: auto;
    float: left;
    text-decoration: none;
     padding: 0px 10px 0px 10px;   
    margin: 0 3px;
    color: #fff;
    text-align: center;
}

#menu ul ul {
   display: none;
   width: 11em; /* Width to help Opera out */
   background-color: rgba(0,0,0,0.5);
}

#menu li:hover ul {
    display:block;
   position: absolute;
   top: 35px;
   left: 0;
   margin: 0;
   padding: 0;
   z-index: 1; 
}

#menu li li a{
    height: 35px; 
    width: 100%;
    float: left;
    text-decoration: none;
    padding: 0px 10px 0px 10px;   
    margin: 0 0px;
    color: #fff;
    text-align: center;
}

#menu li li a:hover{
   background: rgba(255,255,255,0.5);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T05:28:06.193

添加样式

```
#menu li li a{
    height: 35px; 
    width: 100%;
    float: left;
    text-decoration: none;
    padding: 0 13px; 
    margin: 0 3px;
    display: block;
    color: #fff;
    text-align: center;
} 
```

你`<a>`只有左边的填充，但它必须来自左右两边，或者你可以删除填充

# java - 谁能提供一个通过 main() 启动 OSGi 应用程序的简单示例

> ID：12293336
> 
> 赞同：0
> 
> 时间：2012-09-06T05:13:54.083
> 
> 标签：java, osgi

我正在使用 Equinox 构建一个 osgi 应用程序。为此，我从 eclipse 系列中订购了《OSGi 和 Equinox》一书。本书描述了一种使用 main() 之类的入口点启动 OSGi 应用程序的方法。

问题是，我不理解本书中的这一部分，因为本书的章节描述了一个已经完成的示例，并且没有给出如何设置这种行为的任何说明。

任何人都可以帮助我吗？

迈克尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T10:24:55.840

我写了一篇关于这个主题的博客文章：http: [//njbartlett.name/2011/03/07/embedding-osgi.html](http://njbartlett.name/2011/03/07/embedding-osgi.html)

请注意，该博客文章中使用的 API 是标准 OSGi，因此可以与包括 Equinox 在内的任何 OSGi 框架一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T07:05:50.397

也看看[http://felix.apache.org/site/apache-felix-framework-launching-and-embedding.html](http://felix.apache.org/site/apache-felix-framework-launching-and-embedding.html)

# android - 从 SimpleAdapter 获取数据

> ID：12293340
> 
> 赞同：0
> 
> 时间：2012-09-06T05:14:17.720
> 
> 标签：android, adapter

我正在尝试从 SimpleAdapter 获取数据，但我不知道它的语法。示例代码：

### 月份选择器.xml

```
<LinearLayout android:orientation="vertical">

    <TextView
        android:id="@+id/text"
        android:text="Month of birth"
        />

    <Spinner 
        android:id="@+id/spin_birthmonth"
        android:entries="@array/birthmonth"
        />

</LinearLayout> 
```

### 活动页面

```
public class SomeActivity extends Activity {

    SimpleAdapter adapter;
    ListView lv;
    protected List<HashMap<String, String>> fillMaps;
    protected String[] from;
    protected int[] to;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        lv = (ListView) findViewById(R.id.room_list_view);
        fillMaps = new ArrayList<HashMap<String, String>>();
        from = new String[] {"title", "spinner"};
        to = new int[] {R.id.text, R.id.spin_birthmonth};
        HashMap<String, String> map = new HashMap<String, String>();
        map.put("title", "Your month of birth");
        fillMaps.add(map);      

        adapter = new rSimpleAdapter(this, fillMaps, R.layout.month_selector, from, to);
        lv.setAdapter(adapter);

    }    
} 
```

我已经剪掉了一些东西以使其清晰易读，所以如果我遗漏了什么，请告诉我。我想做的是类似于...

```
Spinner month = adapter.getSpinner(R.id.spin_month); 
```

但我不知道从适配器中获取微调器的语法是什么。如果可以解决问题，我可以将其设为自定义适配器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T05:55:07.950

由于这是一个 ListView，您将在每个 ListItem 上都有一个微调器。因此，在获得行视图后，您将不得不获得微调器。我认为下面的代码应该可以工作。但我没试过

```
int first = lv.getFirstVisiblePosition();
View item = lv.getChildAt(first + rowid); //rowid is the row on which the spinner you want.    
Spinner month = (Spinner)item.findViewbyId(R.id.spin_month); 
```

编辑：从[帖子](https://stackoverflow.com/questions/257514/android-access-child-views-from-a-listview)这看起来可行

```
int firstPosition = listView.getFirstVisiblePosition() - listView.getHeaderViewsCount(); // 
int wantedChild = rowid - firstPosition;
if (wantedChild < 0 || wantedChild >= listView.getChildCount()) {
  return;
}
View item = lv.getChildAt(wantedChild);
Spinner month = (Spinner)item.findViewbyId(R.id.spin_month); 
```

# flash - 使用多个按钮控制多首歌曲

> ID：12293342
> 
> 赞同：0
> 
> 时间：2012-09-06T05:14:23.577
> 
> 标签：flash, audio

我正在尝试对歌曲进行编程以在我按下按钮时播放。我有六个按钮和六首歌曲；当我按下不同的按钮时，我希望播放不同的歌曲。如何编写 as3 编码，当我按下按钮时开始并播放每首歌曲，但也停止与上一个按钮相关联的上一首正在播放的歌曲。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T10:35:11.603

这是使用不同按钮运行库中不同歌曲的简单优化方法。请记住，这是假设它们都在您的库中命名，并遵循约定“Song1”、“Song2”等。

```
var soundchannel:SoundChannel = new SoundChannel(); //an audio channel to use to play sounds
addEventListener(MouseEvent.CLICK,handlesongs); // adds the event listener for mouse evens
function handlesongs(e:MouseEvent)
{
    if (e.target.name.indexOf("Song") >= 0) // if the button is a "Song" button
    {
        var songnumber = e.target.name.substr(4); // set the song number based on the button's name
        var getsong = getDefinitionByName("Song" + songnumber.toString()) as Class; // get the class of the song to play
        var songtoplay = new getsong(); // assign a variable to the song's class
        soundchannel.stop(); // stop all current sound
        soundchannel = songtoplay.play(); // play the selected song
    }
} 
```

此外，您的按钮必须命名为：“Song1”、“Song2”。

如果您正在制作音乐播放器，此解决方案可能并不理想，但如果您只有几个声音，那么它是理想的，因为它经过了高度优化。

（请注意：使用大声音文件会大大增加 .FLA 文件的大小）

另请注意：更改此设置非常简单，以便所有歌曲都在一个数组中，并且您可以使用上面的子字符串方法在特定数组索引处播放歌曲。这可能是最好的解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T05:25:46.420

您可以使用 SoundMixer 中的 stopAll 来取消播放 Flash 脚本中的所有声音，

```
import flash.media.SoundMixer;
SoundMixer.stopAll(); 
```

查看 API 参考以获取更多详细信息：

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/SoundMixer.html?filter_flash=cs5&filter_flashplayer=10.2&filter_air=2.6](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/SoundMixer.html?filter_flash=cs5&filter_flashplayer=10.2&filter_air=2.6)

然后您只需播放与按钮关联的歌曲，至于播放歌曲您可以使用一些可用的开源 mp3 播放器（如果这是您想要播放的格式）。我在 .fla 文件中找到的一个位于此处：

[http://hotpot.uvic.ca/howto/audio.htm](http://hotpot.uvic.ca/howto/audio.htm)（点击：开始，然后：我是程序员，给我代码）

# c# - 如何在字符串中添加点

> ID：12293344
> 
> 赞同：1
> 
> 时间：2012-09-06T05:14:27.657
> 
> 标签：c#, linq

我只想将所有这些查询作为单个查询运行。

```
string[] arrs = new string[] { ".sds", ".pps", "tbt", "dd." };

string[] val= (from string i in arrs
               where !i.StartsWith(".")
               select "."+i).ToArray();

string[] val1 = (from i in arrs
                 where i.StartsWith(".")
                 select i).ToArray();

var p = val1.Union(val);//get value in single array.e 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T05:18:09.560

```
var p = (from s in arrs
         select s.StartsWith(".") ? s : "." + s).ToArray(); 
```

或非查询语法：

```
var p = arrs.Select(s => s.StartsWith(".") ? s : "." + s)
            .ToArray(); 
```

`.Distinct()`如果您不想像`{ "foo", ".foo" }`.

```
var p = arrs.Select(s => s.StartsWith(".") ? s : "." + s)
            .Distinct()
            .ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T05:20:26.367

像这样的东西怎么样

```
var pp = arrs.Select(x => x.StartsWith(".") ? x : "." + x); 
```

# linux - 由于高 RAM 使用率，服务器不断崩溃 - 实时 IP 监控？

> ID：12293346
> 
> 赞同：4
> 
> 时间：2012-09-06T05:14:36.347
> 
> 标签：linux, apache, webserver, centos, awstats

有没有办法监控进入我的服务器的实时 IP 流量并查看正在使用多少带宽和 RAM？

每隔一段时间，我似乎就会受到 DOS 类型的攻击，我的网站变得无响应，并且在我请求托管公司硬重启之前，我什么也做不了。我希望能够在服务器由于 RAM 使用耗尽而变得无响应时查看当前在我的服务器上列出的 IP 地址，这样我可以阻止这些 IP 在将来再次访问我的网站。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T20:00:11.777

您可以使用很多工具：

1.  命令行工具：[iptraf](http://blog.nexcess.net/2011/10/04/monitoring-linux-bandwidth-utilization-with-iptraf-and-iftop/)、[iftop](http://blog.nexcess.net/2011/10/04/monitoring-linux-bandwidth-utilization-with-iptraf-and-iftop/)、[jnettop](http://jnettop.kubs.info/wiki/?id=Screenshots)

2.  Web 界面工具[Ntop](http://www.ntop.org/products/ntop/)（它作为守护进程运行，您可以看到很多关于服务器中所有流量的图表和摘要）

3.  旧的[Nagios](http://www.nagios.org/download/)（良好且强大，但您可能需要一些时间来熟悉）

您可以在此处找到一篇关于 Unix/Linux 世界中最佳监控工具的好文章：[Linux 性能监控工具](http://www.thegeekstuff.com/2011/12/linux-performance-monitoring-tools/)。

# php - 使 javascript Toggle 可拖动

> ID：12293358
> 
> 赞同：0
> 
> 时间：2012-09-06T05:15:38.437
> 
> 标签：php, javascript, jquery, javascript-events

我有这个工作正常的脚本

```
 $('a.clickMe').click(function () {
   id = $(this).attr('toggle');
   $('.text').not('#' + id).hide();
   $('#' + id).show();
  });

   <a class="clickMe" toggle="first">Text 1</a>
       </br>
   <div id="first" class="text"> - This text will be toggled</div>

   <a class="clickMe" toggle="second">Text 2</a>
   </br>
   <div id="second" class="text"> - This text will be toggled 2</div> 
```

请检查[小提琴](http://jsfiddle.net/LTYa2/53/)

但现在我正在尝试做两件事，，，

1.  如果单击屏幕上的任何位置，切换的文本应该消失并且应该返回到原始位置。
2.  被切换的文本应该可以在屏幕上拖动，还需要添加关闭按钮。

请帮我解决这个问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:23:31.997

```
$('a.clickMe').click(function () {
   id = $(this).attr('toggle');
   $('#' + id).toggle();

});​ 
```

见[编辑](http://jsfiddle.net/LTYa2/56/)

```
 $('a.clickMe').draggable(); 
```

现在看到[可拖动的](http://jsfiddle.net/LTYa2/59/)

# java - java字节码中方法表和方法体之间的间隙中包含什么信息

> ID：12293360
> 
> 赞同：0
> 
> 时间：2012-09-06T05:15:51.073
> 
> 标签：java, reverse-engineering, bytecode, decompiling

我试图弄清楚java字节码的结构。[直到方法表都按照http://en.wikipedia.org/wiki/Java_class_file](http://en.wikipedia.org/wiki/Java_class_file)中的描述流动，但在那之后，方法体之间存在巨大差距（我通过传递反编译方法指令的十六进制代码发现）

```
.....00 0300 0400 0000 00[00 02] - method count 
[00 0100 0500 0600 0100 0700 0000 2f00 0100 0100 0000 05] - unexplainable gap 
[2a b700 01b1] - method body
method body is
Code:
   Stack=1, Locals=1, Args_size=1
   0:   aload_0
   1:   invokespecial   #1; //Method java/lang/Object."<init>":()V
   4:   return 
```

同样的事情发生在第二种方法之前（不是相同的字节字符串，但与字节序列有间隙）在方法表之后还有属性计数和属性表，我也无法解释（在wiki中没有结构定义）堵塞）。

```
...[00 0000 02] - attribute count
00 0800 0000 0e00 0300 0000 0500 0400 0600 0700 0700 0900 0000 2000 0300 0000 0b00 0a00 0b00 0000 0400 0700 0e00 0f00 0100 0700 0400 1000 0f00 0200 0100 1100 0000 0200 12 
```

您能否提供任何资源来弄清楚这些细节？

源代码很简单

```
package ru.javamining.decompile;

public class ClassA {
    public int localStackTest(){
        int intVar=1500;
        int intVar1 = 198765;
        return intVar + intVar1;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T05:42:47.757

查看[文档](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.6)。A`method_info`包含的不仅仅是代码。

# html - paypal html表单发货方式

> ID：12293367
> 
> 赞同：0
> 
> 时间：2012-09-06T05:16:58.187
> 
> 标签：html, forms, variables, paypal, shipping

我目前有两种运输方式：我的购物车实施中的“快递”和“标准”。是否可以使用 HTML 变量将此信息传递给 PayPal？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T06:30:01.567

这是一个[完整列表](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_Appx_websitestandard_htmlvariables)，其中包含您可以发送到 PayPal 的所有变量。我快速阅读它，但没有找到类似“运输类型”或类似的东西。所以你必须在自定义字段上定义它，你可以在其中放置任何你想要的信息。

# clojure - 当函数名称存储为字符串值时调用函数

> ID：12293368
> 
> 赞同：4
> 
> 时间：2012-09-06T05:16:58.280
> 
> 标签：clojure

我有一个函数 a 定义为

```
(defn a [] "Hello") 
```

我有另一个变量 b

```
(def b "a") 
```

我想调用'b'的字符串值表示的函数，即应该调用'a'。我怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-06T05:19:48.790

您需要将其转换为 a`symbol`然后`resolve`它：

```
user=> ((resolve (symbol b)))
"Hello"

user=> ((-> b symbol resolve))
"Hello" 
```

只是为了澄清*一点*，这里有一个稍微冗长的解决方案：

```
(let [func (-> b symbol resolve)]
  (func arg1 arg2 arg3)) ; execute the function 
```

# iphone - 通话中断后的图像对齐问题

> ID：12293373
> 
> 赞同：0
> 
> 时间：2012-09-06T05:17:28.117
> 
> 标签：iphone, objective-c, ios, uiimageview

在我的应用程序中，呼叫中断后图像对齐出错。有人对此有所了解吗？我是否要在 **applicationWillResignActive:**中编码以在应用程序 中重新对齐我的图像。如果你知道，请告诉它的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T12:06:27.343

在笔尖中，以“尺寸”视图查看您的图像，并仔细查看您的支柱和弹簧。您可能应该设置顶部和左侧支柱，但没有弹簧。如果您设置了弹簧，那么来电时图像可能会被压扁，通话结束时图像可能会向后拉伸。

# c# - 如何在monodevelop的intellisense中隐藏标有“internal”关键字的类（来自引用的C#DLL）？

> ID：12293374
> 
> 赞同：2
> 
> 时间：2012-09-06T05:17:37.320
> 
> 标签：c#, dll, xamarin.ios, monodevelop, internal

我正在引用一个外部 C# DLL，其中包含许多在单点触控项目中标有“内部”关键字的类。但是，monodevelop 的智能感知会显示所有类，无论它们是否标有“内部”关键字。如果我在 VS2010 中引用此程序集，则仅显示未标记的类。如何在 monodevelop 中获得相同的行为（隐藏所有内部类）？

我已经检查了“InternalsVisibleTo”属性，但在这里似乎无关紧要。我也不能使用 EditorBrowsable 属性，因为我需要隐藏整个类。

# yammer - 如何在 yammer 特定组中发帖？

> ID：12293382
> 
> 赞同：0
> 
> 时间：2012-09-06T05:18:29.857
> 
> 标签：yammer

我浏览了 yammer api 并创建了一个简单的 html 来将提要发布到墙上。

但是我还没有找到一个明确的想法来发布到特定的组。

我正在使用以下代码在墙上发布。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content="HTML Tidy for Linux/x86 (vers 11 February 2007), see www.w3.org"/>
<title>A Yammer App</title>
<script src="https://assets.yammer.com/platform/yam.js" type="text/javascript">
</script>
<script type="text/javascript">
//<![CDATA[
  yam.config({appId: "hyB2pTvrL36Y50py8EWj6A"}); 
  //]]>
  </script>
<title>A Yammer App</title>
</head>
<body>
<button onclick='post()'>Post on Yammer!</button>
<script type="text/javascript">
//<![CDATA[
  function post() { yam.getLoginStatus( function(response) { if (response.authResponse) { alert(1); yam.request( { url: "https://www.yammer.com/api/v1/messages.json" , method: "POST" , data: { "body" : "HelloTest"} , success: function (msg) { alert("Post was Successful!: " + msg); } , error: function (msg) { alert("Post was Unsuccessful..." + msg); } } ); } else { alert(2); yam.login( function (response) { if (!response.authResponse) { yam.request( { url: "https://www.yammer.com/api/v1/messages.json" , method: "POST" , data: { "body" : "HelloTest"} , success: function (msg) { alert("Post was Successful!: " + msg); } , error: function (msg) { alert("Post was Unsuccessful..." + msg); } } ); } }); } }); } 
  //]]>
  </script>
<script src="https://assets.yammer.com/platform/yam.js" type="text/javascript">
</script>
<script type="text/javascript">
//<![CDATA[
  yam.config({appId: "hyB2pTvrL36Y50py8EWj6A"}); 
  //]]>
  </script>
<button onclick='post()'>Post on Yammer!</button>
<script type='' "text/javascript">
  function post() { yam.getLoginStatus( function(response) { if (response.authResponse) { alert(1); yam.request( { url: "https://www.yammer.com/api/v1/messages.json" , method: "POST" , data: { "body" : "HelloTest"} , success: function (msg) { alert("Post was Successful!: " + msg); } , error: function (msg) { alert("Post was Unsuccessful..." + msg); } } ); } else { alert(2); yam.login( function (response) { if (!response.authResponse) { yam.request( { url: "https://www.yammer.com/api/v1/messages.json" , method: "POST" , data: { "body" : "HelloTest"} , success: function (msg) { alert("Post was Successful!: " + msg); } , error: function (msg) { alert("Post was Unsuccessful..." + msg); } } ); } }); } }); } 
  </script>
</body>
</html> 
```

有人可以指导我吗？

我也用组应用程序 id 更改了应用程序 id。但是它只是用 from 和 embed-widget 发布在同一面墙上。

![在此处输入图像描述](../Images/9e59bdda3afff3a29e12908cee1269cc.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T11:58:24.897

您必须在 API 请求中包含组 ID 才能发布消息。这是 C# 中的示例

```
 StringBuilder data = new StringBuilder();
        data.Append("body=" + System.Web.HttpUtility.UrlEncode(reply));
        // the below line has the group Id encoded into the URL 
        data.Append("&group_id=" + System.Web.HttpUtility.UrlEncode(groupId));
        //Create byte array of the data that is to be sent
        byte[] byteData = UTF8Encoding.UTF8.GetBytes(data.ToString());

        //Set the content length in the request header
        request.ContentLength = byteData.Length;

        //write data
        using (Stream postStream = request.GetRequestStream())
        {
            postStream.Write(byteData, 0, byteData.Length);
        }

        JObject jsonObj = null;
        //Get response
        using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
        {
            //get the response stream
            StreamReader reader = new StreamReader(response.GetResponseStream());

            jsonObj = JObject.Parse(reader.ReadToEnd());

            //Console.WriteLine("Message posted successfully!!");
            return jsonObj["messages"][0]["id"].ToString();
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-28T06:46:09.107

这将向特定组发布消息。您应该传递组 ID。

```
 <script>
  yam.config({appId: "Your App ID"}); //Your APP ID
</script>

<button style="width:150px" onclick='post()'>Post</button>

<script>
function post() {
    yam.getLoginStatus( function(response) {
        if (response.authResponse) {
            yam.request(
              { url: "https://www.yammer.com/api/v1/messages.json"
              , method: "POST"
              , data: { "body" : "Posted to the group", "group_id":"UR GROUP ID"} // Pass ur Group ID here
              }
            );
        } else {
            yam.login( function (response) {
              if (!response.authResponse) {
                yam.request(
                  { url: "https://www.yammer.com/api/v1/messages.json"
                  , method: "POST"
                  , data: { "body" : "Posted to the group", "group_id":"UR GROPU ID"}
                  }
                );
              }
            });
        }
    });
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T10:19:37.510

我写了一个小的 API 包装器：[Yammer.SimpleAPI](https://github.com/RaynaldM/Yammer.SimpleAPI)。

您可以直接从[Nuget使用](https://www.nuget.org/packages/Yammer.SimpleAPI/)

# java - 使用 Mockito 的 GWT MVP 测试用例，包含活动和地点以及 GIN

> ID：12293388
> 
> 赞同：0
> 
> 时间：2012-09-06T05:18:59.983
> 
> 标签：java, gwt, junit, mvp, mockito

我是 GWT MVP 模式的新手，它结合了 GIN 的活动和地点。我已经开始尝试使用 Mockito 为我的 GWT 项目编写 JUnit 测试用例。很多博客建议我不要使用 GWT 测试用例，因为它的性能，所以我打算坚持使用 Mockito。我正在为其中一位演示者编写测试用例。由于我使用 GIN 为 Presenter 中的大部分内容创建实例，因此我必须模拟我的 Gin Injector 对象。我的 Junit 测试用例不允许我模拟 Gin 注射器。我在某处读到我们不能在 Junit 测试用例中使用 Gin，而是必须使用 Guice。我的问题是如何使用 Mockito 模拟我的杜松子酒注射器？我发现了一些测试用例，它使用了与我为我的项目所做的完全相同的模式，只是它们使用了客户端工厂。在测试用例中，我未能用 GIN 替换客户端工厂。我在网上找到的代码如下，我必须在我的测试用例中用 GIN 注入器替换客户端工厂。

@RunWith(MockitoJUnitRunner.class) 公共类 ContactListActivityTest {

```
@Mock
private IClientFactory clientFactoryMock;

@Mock
private PlaceController placeControllerMock;

@Mock
private IContactListView contactListViewMock;

@Mock
private AcceptsOneWidget acceptsOneWidgetMock;

@Mock
private IContactServiceAsync contactServiceAsyncMock;

@Mock
private EventBus eventBusMock;

private List<Contact> contacts;
private Contact contact1;
private Contact contact2;

@SuppressWarnings("unchecked")
@Before
public void setUp() throws Exception {
    when(clientFactoryMock.getPlaceController()).thenReturn(placeControllerMock);
    when(clientFactoryMock.getContactListView()).thenReturn(contactListViewMock);
    when(clientFactoryMock.getContactService()).thenReturn(contactServiceAsyncMock);

    Answer<Void> answer = new Answer<Void>() {
        @Override
        public Void answer(InvocationOnMock invocation) {
            Object[] args = invocation.getArguments();
            AsyncCallback<List<Contact>> asyncCallback = (AsyncCallback<List<Contact>>) args[0];
            contact1 = new Contact();
            contact1.setFirstName("Kai");
            contact1.setLastName("Toedter");
            contact1.setEmail("kai@toedter.com");
            contact2 = new Contact();
            contact2.setFirstName("Kai2");
            contact2.setLastName("Toedter2");
            contact2.setEmail("kai2@toedter.com");
            final List<Contact> contacts2 = new ArrayList<Contact>();
            contacts2.add(contact1);
            contacts2.add(contact2);
            asyncCallback.onSuccess(contacts2);
            return null;
        }
    };

    doAnswer(answer).when(contactServiceAsyncMock).getAllContacts(any(AsyncCallback.class));

    // set the real contacts object, when clientFactory.setContacts is
    // called
    Answer<Void> setContactsAnswer = new Answer<Void>() {
        @Override
        public Void answer(InvocationOnMock invocation) throws Throwable {
            contacts = (List<Contact>) invocation.getArguments()[0];
            // System.out.println("answer() to setContacts(): " + contacts);
            return null;
        }
    };

    doAnswer(setContactsAnswer).when(clientFactoryMock).setContacts(any(List.class));

    // Return the real contacts object, when clientFactory.getContacts is
    // called
    Answer<List<Contact>> getContactsAnswer = new Answer<List<Contact>>() {
        @Override
        public List<Contact> answer(InvocationOnMock invocation) throws Throwable {
            return contacts;
        }
    };

    doAnswer(getContactsAnswer).when(clientFactoryMock).getContacts();
}

@Test
public void testGotoPlace() {
    ContactListActivity contactListActivity = new ContactListActivity(new ContactPlace(null), clientFactoryMock);

    ContactPlace contactPlace = new ContactPlace("kai@toedter.com");
    contactListActivity.goTo(contactPlace);

    verify(placeControllerMock).goTo(contactPlace);
}

@Test
public void testStartWithEmptyToken() {
    clientFactoryMock.setContacts(null); // force RCP
    ContactListActivity contactListActivity = new ContactListActivity(new ContactPlace(""), clientFactoryMock);
    contactListActivity.start(acceptsOneWidgetMock, eventBusMock);

    verify(contactListViewMock).setPresenter(contactListActivity);
    verify(contactListViewMock).initialize(contacts);
}

@Test
public void testStartWithToken() {
    String token = "kai@toedter.com";
    clientFactoryMock.setContacts(null); // force RCP

    ContactListActivity contactListActivity = new ContactListActivity(new ContactPlace(token), clientFactoryMock);
    contactListActivity.start(acceptsOneWidgetMock, eventBusMock);

    verify(contactListViewMock).setPresenter(contactListActivity);
    verify(contactListViewMock).initialize(contacts);
    verify(contactListViewMock).selectInitialContact(contact1);
    verify(eventBusMock).fireEvent(any(ContactViewEvent.class));
}

@Test
public void testMayStop() {
    ContactListActivity contactListActivity = new ContactListActivity(new ContactPlace(null), clientFactoryMock);
    contactListActivity.start(acceptsOneWidgetMock, eventBusMock);
    contactListActivity.mayStop();

    verify(contactListViewMock).setPresenter(null);
}

@Test
public void clientFactoryTest() {
    List<Contact> testList = new ArrayList<Contact>();
    clientFactoryMock.setContacts(testList);
    Assert.assertNotNull(clientFactoryMock.getContacts());
} 
```

}

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:19:48.360

如果您的代码依赖于`Ginjector`，那么您有一个问题：您没有注入[直接依赖项](http://code.google.com/p/google-guice/wiki/InjectOnlyDirectDependencies)。如果您需要一个对象工厂，请注入一个`Provider`.

但在您的情况下，`IClientFactory`它也可用作*共享状态*、*值持有者*或;的*本地缓存*。`List<Contact>`这意味着`IClientFactory`违反了[单一责任原则](http://www.google.fr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCAQFjAA&url=http://en.wikipedia.org/wiki/Single_responsibility_principle&ei=RFlIUPOKMaG_0QXyz4CIAg&usg=AFQjCNFoci3JyHtoEwOx1lduCbF7IcS50Q&sig2=oO-j6HqkrtmSxNbb8_AcZQ)。

*因此，首先将本地缓存*责任提取到它自己的对象（例如`ContactListCache`对象，或更通用`ValueHolder<List<Contact>>`的 ）中，然后注入该对象的实例。
当然，直接注入`PlaceController`, view 和 GWT-RPC 服务。

但实际上，我会更进一步并重构代码以*从缓存中提取检索或将服务器职责询问*到它自己的`ContactListHolder`对象中（或者，当您使用 GWT-RPC 时，您可以将`IContactServiceAsync`接口实现为一个包装器生成`GWT.create()`并添加缓存行为；请参阅[http://www.google.com/events/io/2009/sessions/GoogleWebToolkitBestPractices.html](http://www.google.com/events/io/2009/sessions/GoogleWebToolkitBestPractices.html)以获得一些灵感）。这将大大简化活动的代码。

* * *

附带说明一下，这段代码可能过多地使用了模拟：为什么不使用 real `PlaceController`（和`spy()`它的`goTo(Place)`方法）和 a `SimpleEventBus`or `CountingEventBus`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-09T17:21:52.893

我所做的是使用**GwtMockito**，它是 Mockito 的扩展。在我使用注射器的唯一一堂课中，我的测试看起来像这样

```
@RunWith(GwtMockitoTestRunner.class)
public class AppControllerTest {

    AppController controller;

    @Mock
    EventBus eventBus;

    @Mock
    AppInjector injector;

    @Before
    public void setUp() throws Exception {
    }

    @Test
    public void shouldUseInjector() throws Exception {
        // Given
        controller = new AppController(eventBus, injector);

        // When
        controller.go();

        // Verify
        verify(injector).mainPresenter();
    }
} 
```

# java - Java 可序列化类生成的 uuid 不适用于 ehcache

> ID：12293390
> 
> 赞同：1
> 
> 时间：2012-09-06T05:19:08.720
> 
> 标签：java, ehcache, serializable

我正在开发一个项目，我需要缓存一些需要这些类实现可序列化的类。我收到的错误类似于此“classcastexception：class demo.xtyA（我序列化的任何类）无法转换为类 demo.xtyA”。我的意思是类彼此完全相同。

经过深入尝试，我发现该程序有效，当我使用实现可序列化而不是我的可序列化类的java自己的类时。我使用 netbeans 网站中建议的插件在 netbeans 中生成了 uuid。我很确定原因是我自己生成的 uuid，但为什么 uuid 不起作用？生成 uuid 后，我没有对类进行任何更改。

在 serialversionUUID 之上的 java 默认类中，有一条与此完全相同的注释“/** 使用 JDK 1.0.2 中的 serialVersionUID 以实现互操作性 */”。这是否意味着我应该使用 jdk1.0.2 生成 uuid？我尝试了很多事情并对任何解决方案持开放态度。感谢您的回复。

为了帮助可能遇到相同问题的开发人员，我有一个我不想使用的解决方案。您可以单独缓存每个变量，而不是缓存整个类。

从我的第一个问题开始，对于我写问题的任何错误，我深表歉意。

编辑：我正在使用 servlet。当我运行 servlet 时它工作正常，但在另一个部署后它失败了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T07:09:34.230

该问题可能不是由串行版本的 UID 引起的，而是由类加载器问题引起的。您可能尝试将其类由类加载器 A（EHCache 使用的类加载器）加载的对象强制转换为由类加载器 B（您的 web 应用程序的类加载器）加载的类。

如果没有更多细节，很难说出您应该做什么，但请确保您的类可以由一个且只有一个类加载器加载。例如，如果该类同时位于 webapp 的类路径 (WEB-INF/lib) 和服务器类路径中，则可能是问题所在。

# c# - 使用自动映射器忽略未使用的属性

> ID：12293391
> 
> 赞同：2
> 
> 时间：2012-09-06T05:19:15.333
> 
> 标签：c#, visual-studio-2010, automapper

我有一个相当大的对象，有很多属性。

我正在使用 Automapper 映射到网格中的属性。

只有少数属性需要映射，其余的必须忽略，因为它们稍后会使用，而不是在映射时使用

有没有办法“忽略”所有这些属性，或者我需要为每个属性写一个明确的“忽略” - 请参见下面的代码。我希望能够'.IgnoreAllNotUsed' 而不必一一忽略。这可能吗？

该类继承自另一个类，但大多数属性都在实际类本身上 [链接到代码图片](https://i.imgur.com/PxPGB.png) ![在此处输入图像描述](../Images/35d2b25ac86f1fac69aa792a726d91d5.png)

![在此处输入图像描述](../Images/43e6796ebfb9b63765ee7ce27881fdfa.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T16:11:18.873

只需忽略所有属性，然后指定 ForMember。这是示例：

```
var mapping = Mapper.CreateMap<Source, Destination>();
mapping.ForAllMembers(opt=>opt.Ignore());
mapping.ForMember(...)
       .ForMember(...); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T05:45:26.403

您可以使用此扩展方法：

```
public static void ForAllUnmappedMembers<TSource, TDestination>(
    this IMappingExpression<TSource, TDestination> mapping, 
    Action<IMemberConfigurationExpression<TSource>> memberOptions)
{
    var typeMap = Mapper.FindTypeMapFor<TSource, TDestination>();
    foreach(var memberName in typeMap.GetUnmappedPropertyNames())
        mapping.ForMember(memberName, memberOptions);
} 
```

像这样使用它：

```
Mapper.CreateMap<Source, Destination>()
      .ForMember(...)
      .ForAllUnmappedMembers(o => o.Ignore()); 
```

我没有测试过它，但它应该可以工作。

# ruby - 涉及反向抛光计算器的正则表达式问题

> ID：12293395
> 
> 赞同：2
> 
> 时间：2012-09-06T05:19:23.120
> 
> 标签：ruby, regex, calculator, rpn

我正在尝试使用正则表达式来解决逆波兰计算器问题，但在将数学表达式转换为常规形式时遇到了问题。

我写：

```
puts '35 29 1 - 5 + *'.gsub(/(\d*) (\d*) (\W)/, '(\1\3\2)') 
```

打印：

```
35 (29-1)(+5) * 
```

预期的

```
(35*((29-1)+5)) 
```

但我得到了不同的结果。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T05:34:48.670

我假设你的意思是你试过

```
puts '35 29 1 - 5 + *'.gsub(/(\d*) (\d*) (\W)/, '(\1\3\2)')
                    ^           ^ 
```

无论如何，您必须使用量词`+`而不是`*`，否则您将匹配一个空字符串`\d*`作为您的捕获之一，因此`(+5)`：

```
/(\d+) (\d+) (\W)/ 
```

我会进一步将表达式扩展/限制为：

```
/([\d+*\/()-]+)\s+([\d+*\/()-]+)\s+([+*\/-])/
 |             |  |             |   |
 |             |  |             |   Valid operators, +, -, *, and /.
 |             |  |             |   
 |             |  |             Whitespace.
 |             |  |                 
 |             |  Arbitrary atom, e.g. "35", "(29-1)", "((29-1)+5)".
 |             |                    
 |             Whitepsace.                  
 |
 Arbitrary atom, e.g. "35", "(29-1)", "((29-1)+5)". 
```

...而不是 using `gsub`，`sub`在一个`while`循环中使用，当它检测到无法进行更多替换时退出。这非常重要，否则您将违反操作顺序。例如，看看[这个 Rubular 演示](http://rubular.com/r/9mEd9LGfeV)。您可以看到，通过使用`gsub`，您可能会替换第二个原子三元组“5 + *”，而实际上第二次迭代应该在替换第一个三元组*之后*替换一个“早期”三元组！

**警告：（**`-`减号）字符必须出现在字符类中的*第一个*或*最后*一个，否则它将指定一个范围！（感谢@JoshuaCheek。）

# php - 如何在 PHP 数组中加载下一个 youtube？

> ID：12293396
> 
> 赞同：0
> 
> 时间：2012-09-06T05:19:31.573
> 
> 标签：php, javascript, arrays, youtube.net-api

我有这个 php/html 代码，每次加载页面时，它都会从 php 数组中加载一个随机的 youtube 视频。但我想要下一个和上一个按钮来加载数组中的下一个和上一个视频。任何时候都只能加载一个视频。我有这个：

```
<?php $videos = array("0jBRY_Aki9s","1czXvHSjDac","1kbiUiRfnh8","377kKBi6anQ"); 

$rand = array_rand($videos); 
$rand_key = $videos[$rand]; 
$numOfItems = count($videos);

echo "<iframe width='375' height='310' 
src='http://www.youtube.com/embed/$rand_key?&amp;fmt=22&amp;autoplay=1'> </iframe>";?> 

<span onclick="<?php $clip = next($videos); 
echo "<iframe style='float:left;' width='375' height='310' 
src='http://www.youtube.com/embed/$clip?&amp;fmt=22&amp;autoplay=1'>
</iframe>";?> ">next</span> 
```

有没有办法使用 php "next" 方法来更改 iframe 上的当前视频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:24:50.033

不！你不能像这样混合，`PHP`是服务器端，而客户端是基于浏览器的。您有 2 个选项，可用于加载下一个视频，或使用链接到下一个视频：`Javascript``PHP``Javascript``AJAX``anchor`

```
<?php
    $videos = array("0jBRY_Aki9s" , "1czXvHSjDac" , "1kbiUiRfnh8" , "1uTypnaP5X4" , "377kKBi6anQ"); 
    $rand = array_rand($videos);
    $rand_key = isset($_GET['id']) ? $_GET['id'] : $rand;

    echo "<iframe width='375' height='310' src='http://www.youtube.com/embed/".$videos[$rand_key]."?&amp;fmt=22&amp;autoplay=1'> </iframe>";

    $next = isset($videos[($rand_key+1)]) ? ($rand_key+1) : 0;
    $prev = isset($videos[($rand_key-1)]) ? ($rand_key-1) : count($videos)-1;
?> 

<a href="test.php?id=<?php echo $prev; ?>">prev</a> | <a href="test.php?id=<?php echo $next; ?>">next</a> 
```

# php - 存储多个mysql表中的数据并根据时间排序

> ID：12293400
> 
> 赞同：-4
> 
> 时间：2012-09-06T05:19:51.957
> 
> 标签：php, mysql, database

我想从 3 个表中获取数据，假设 x、y、z 3 个表都有公共字段时间戳。我想根据`timestamp`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T06:29:54.203

您可以在查询中使用 ORDER BY 以使用列对当前结果集进行排序。使用 DESC 和 ASC 可以更改排序的顺序。

请参阅[MySQL 5.0 参考 - 对行](http://dev.mysql.com/doc//refman/5.0/en/sorting-rows.html)进行排序以获取更多信息和示例。

# visual-c++ - 如何在 Windows 8 上调试 VS2011 中的输入法编辑器 DLL？

> ID：12293404
> 
> 赞同：1
> 
> 时间：2012-09-06T05:20:11.997
> 
> 标签：visual-c++, dll, windows-8

我正在尝试调试输入法编辑器 (IME) 应用程序。为了运行这个 sampleIme 应用程序生成的 DLL 文件，我必须将生成的 DLL 文件移动到 windows\system32 目录并注册生成的 dll 文件，将 Ime 添加到语言栏。

如何在VS2011 Windows 8中调试输入法编辑器DLL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-05T23:33:21.380

我不确定这是否可行，但一个相当好的解决方法是向您的 Visual Studio 项目添加代码，以便在感兴趣的点和时间将变量值写入文本文件。

# wcf - 在我的项目中使用的正确 WCF 消息传递函数是什么？

> ID：12293405
> 
> 赞同：1
> 
> 时间：2012-09-06T05:20:16.540
> 
> 标签：wcf

我是 WCF 的新手，我有一个项目需要迁移到带有客户端/服务器和服务器到服务器架构的 WCF 通信基础。

我的问题是该项目需要什么正确的消息传递功能，以确保跨网络的数据安全、可靠的连接和数据的快速交换。

我发现 WCF 有很多消息传递功能。

下面是我的项目的架构：

![在此处输入图像描述](../Images/2d954c2b8709cb3f9f33b3d9da256b4d.png)

**注意**：客户端应同时由数据处理和馈送源服务器更新。并且客户端还向服务器发送同时请求，而提要仍然由提要源服务器提供。

我将不胜感激任何建议或意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:48:13.427

我的第一个问题是，为什么要将连接管理器 (CM) 组件放在客户和他们想要使用的服务之间？它的工作是什么，这意味着它需要处于一切之中？

这最终意味着您的 CM 组件将不得不处理可能跨潜在不同传输绑定的大量双向流量并引入单个故障点。

如果客户端 A 只想接收来自 Feed Source (FS) 组件的消息怎么办？当客户端 A 只想发送订阅通知以接收来自 FS 的更新时，为什么必须与中介打交道？

同样，如果客户端 B 想要向数据处理 (DP) 组件发送消息怎么办？当然，它应该能够向 DP 发送消息吗？

我认为你想用这个架构做的大部分事情都可以通过单向消息传递来实现，在这种情况下你应该使用 netMsmqBinding（假设你在一个纯 wcf 环境中）。

# php - 如何使用我们系统中的相关用户记录登录 Facebook

> ID：12293411
> 
> 赞同：0
> 
> 时间：2012-09-06T05:20:43.850
> 
> 标签：php, facebook, codeigniter

我们有自己的注册和登录系统。

我们的许多用户都是 facebook 的用户，并且经常忘记登录我们网站的详细信息，所以如果他们可以使用他们的 FB 帐户登录我们的网站会很好。

将他们的 FB 帐户与我们系统中的用户记录相关联的最简单方法是什么？

我想有没有办法避免第一次双重登录？即登录到 facebook，然后登录到我们的系统，这样他们就可以配对了。我们将他们的 facebook id 存储在他们的用户记录中，以后的访问只需要 FB 登录。

非常欢迎任何意见或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T07:47:23.287

我认为 Philsturgeon's 的 OAuth 库可以帮助您解决问题，请查看此库

[身份验证](https://github.com/philsturgeon/codeigniter-oauth2)

还可以在这里查看文档

[Spark 的 Oauth 文档](http://getsparks.org/packages/oauth2/versions/HEAD/show)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T05:41:28.737

对于提到的场景，可能有各种建议的解决方案，少数可能如下：

1.  我希望您的数据库中目前有一个电子邮件字段，只需添加另一个字段来存储 FB id。
2.  在您的应用程序中提供一个界面，登录用户可以在其中将他们的 facebook 帐户与他们在您的应用程序中的帐户相关联。

对于未登录的用户，您可以从 FB 获取电子邮件地址，并快速查找该电子邮件是否已存在于您的系统中，如果存在，您可以更新数据库中的 FB id 字段。

如果它的另一种方式，电子邮件不存在，您可以添加一个新帐户到您的用户表。

# android - How to check a geopoint is within some geographical area

> ID：12293414
> 
> 赞同：0
> 
> 时间：2012-09-06T05:20:55.553
> 
> 标签：android

I want to make an android application in which,i want to know my current location is within which specific police station.First tell me is it possible or not ,if possible give some idea

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:30:47.910

你可以使用[`Location`](http://developer.android.com/reference/android/location/Location.html)类。创建两个 Location 对象。一个用于您当前的位置，另一个用于警察局的位置。然后你可以用 的方法`distanceTo`得到`Location`你和派出所的距离。如果距离小于您定义的阈值，您可以假设您在警察局内。

# php - 如何构建到不同版本的移动网站

> ID：12293419
> 
> 赞同：0
> 
> 时间：2012-09-06T05:21:03.720
> 
> 标签：php, mobile

哟呼。
我想为移动设备和平板电脑构建两个版本的网站。1\. 小于 7 英寸 2\. 大于 7 英寸

您知道 php 中提供此信息的任何 LIB 吗？

1.  如何在 php 中检测屏幕大小是多少？
2.  我怎么知道这实际上是一个移动客户端而不是桌面客户端。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:22:25.987

看看这个

[http://code.google.com/p/php-mobile-detect/](http://code.google.com/p/php-mobile-detect/)

这些天来，您可以再次使用可用于在桌面上模拟设备的 Firefox 扩展。

以下代码检测其移动浏览器是否

```
<?php

$mobile_browser = '0';

if (preg_match('/(up.browser|up.link|mmp|symbian|smartphone|midp|wap|phone|android)/i', strtolower($_SERVER['HTTP_USER_AGENT']))) {
    $mobile_browser++;
}

if ((strpos(strtolower($_SERVER['HTTP_ACCEPT']),'application/vnd.wap.xhtml+xml') > 0) or ((isset($_SERVER['HTTP_X_WAP_PROFILE']) or isset($_SERVER['HTTP_PROFILE'])))) {
    $mobile_browser++;
}    

$mobile_ua = strtolower(substr($_SERVER['HTTP_USER_AGENT'], 0, 4));
$mobile_agents = array(
    'w3c ','acs-','alav','alca','amoi','audi','avan','benq','bird','blac',
    'blaz','brew','cell','cldc','cmd-','dang','doco','eric','hipt','inno',
    'ipaq','java','jigs','kddi','keji','leno','lg-c','lg-d','lg-g','lge-',
    'maui','maxo','midp','mits','mmef','mobi','mot-','moto','mwbp','nec-',
    'newt','noki','oper','palm','pana','pant','phil','play','port','prox',
    'qwap','sage','sams','sany','sch-','sec-','send','seri','sgh-','shar',
    'sie-','siem','smal','smar','sony','sph-','symb','t-mo','teli','tim-',
    'tosh','tsm-','upg1','upsi','vk-v','voda','wap-','wapa','wapi','wapp',
    'wapr','webc','winw','winw','xda ','xda-');

if (in_array($mobile_ua,$mobile_agents)) {
    $mobile_browser++;
}

if (strpos(strtolower($_SERVER['ALL_HTTP']),'OperaMini') > 0) {
    $mobile_browser++;
}

if (strpos(strtolower($_SERVER['HTTP_USER_AGENT']),'windows') > 0) {
    $mobile_browser = 0;
}

if ($mobile_browser > 0) {
   // do something
}
else {
   // do something else
}   

?> 
```

代码取自[http://mobiforge.com/developing/story/lightweight-device-detection-php](http://mobiforge.com/developing/story/lightweight-device-detection-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T05:23:21.827

您可以使用 CSS 3`@media`查询轻松完成此操作。

### 标准设备的媒体查询

```
/* Smartphones (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 480px) {
/* Styles */
}

/* Smartphones (landscape) ----------- */
@media only screen 
and (min-width : 321px) {
/* Styles */
}

/* Smartphones (portrait) ----------- */
@media only screen 
and (max-width : 320px) {
/* Styles */
}

/* iPads (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) {
/* Styles */
}

/* iPads (landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : landscape) {
/* Styles */
}

/* iPads (portrait) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : portrait) {
/* Styles */
}

/* Desktops and laptops ----------- */
@media only screen 
and (min-width : 1224px) {
/* Styles */
}

/* Large screens ----------- */
@media only screen 
and (min-width : 1824px) {
/* Styles */
}

/* iPhone 4 ----------- */
@media
only screen and (-webkit-min-device-pixel-ratio : 1.5),
only screen and (min-device-pixel-ratio : 1.5) {
/* Styles */
} 
```

### 更多信息：[http ://css-tricks.com/snippets/css/media-queries-for-standard-devices/](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

# .net - winform setup proejct，如何捆绑 .net frame work 4 和 Crystal 报告依赖项？

> ID：12293420
> 
> 赞同：0
> 
> 时间：2012-09-06T05:21:13.793
> 
> 标签：.net, winforms, c#-4.0, crystal-reports, setup-project

我开发了一个小型应用程序，并希望对其进行设置。有没有可能我可以捆绑.net framework 4.0和水晶报告依赖关系。这样用户可能不必单独安装它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T05:34:42.117

右键单击您的安装项目选择属性，从弹出窗口中选择先决条件。从列表中选择 .NET Framework 4.0 和 SAP Crystal Reports Runtime Engine。

从单选按钮组中选择“从与我的应用程序相同的位置下载先决条件”。

这会将您的依赖项的安装程序与您的设置一起输出。

# actionscript - 使用重新索引从数组中删除 - AS3.0

> ID：12293421
> 
> 赞同：0
> 
> 时间：2012-09-06T05:21:20.437
> 
> 标签：actionscript

我想从我的数组中删除一个项目，之后每个项目仍然有相同的索引。

例子

```
var arr:Array = new Array();
arr[1] = 'One';
arr[2] = 'Two';
arr[3] = 'Three';

arr.splice(2, 1);

for(var index in arr) {
    trace(index+':'+arr[index]);
} 
```

输出：

```
1:One
2:Three 
```

并且应该输出

```
1:One
3:Three 
```

有人可以在这里帮助我吗？:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:16:06.347

如果从数组中拼接一个元素，则数组会被刷新，并且该索引之后的元素将被移动以填充该索引。

如果您真的希望始终将元素放在同一个索引中，那么请使用空字符串分配索引，而不是拼接它。

试试这个：

```
array[1] = ""; 
```

代替，

```
array.splice(1, 1); 
```

在我看来，拼接是一种很好的练习方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:29:10.250

您可以使用[删除](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/operators.html#delete)运算符：

```
var arr:Array = new Array();
arr[1] = 'One';
arr[2] = 'Two';
arr[3] = 'Three';

delete arr[2];

for(var index in arr) {
    trace(index+':'+arr[index]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T11:32:00.910

我找到了解决我的问题的方法。

我将使用一个对象来保存我的项目，而不是使用数组。像这样

```
var objArr = {1: 'One', 2: 'Two', 3: 'Three'}; 
```

当我删除时，我确实喜欢这样。

```
delete objArr[1]; 
```

我知道我不会得到数组函数。但就我而言，我不需要它们。

# .net - Oracle GUIDTORAW 和 RAWTOGUID 函数字节序

> ID：12293426
> 
> 赞同：5
> 
> 时间：2012-09-06T05:21:57.237
> 
> 标签：.net, oracle, guid, converter

我的应用程序内部使用通过 sys_guid() 生成的 RAW(16) guid。
最近我开始关联 Active Directory 用户，我在其中获得 guid，格式为：00000000-0000-0000-0000-00000000000

以下两个函数是否正确执行此转换？

找到以下网站：

[http://www.timvasil.com/blog14/post/2009/01/20/User-defined-function-to-convert-from-RAW(16)-to-a-GUID-in-Oracle.aspx](http://www.timvasil.com/blog14/post/2009/01/20/User-defined-function-to-convert-from-RAW(16)-to-a-GUID-in-Oracle.aspx)

```
create or replace
FUNCTION RAWTOGUID
( RawData IN RAW
) RETURN VARCHAR AS

BEGIN

declare HexData varchar(32) := rawtohex(RawData);

begin
return
    substr(HexData, 7, 2) 
    || substr(HexData, 5, 2) 
    || substr(HexData, 3, 2) 
    || substr(HexData, 1, 2) 
    || '-'
    || substr(HexData, 11, 2) 
    || substr(HexData, 9, 2) 
    || '-'
    || substr(HexData, 15, 2) 
    || substr(HexData, 13, 2) 
    || '-'
    || substr(HexData, 17, 4) 
    || '-'
    || substr(HexData, 21, 12);
end;

END RAWTOGUID; 
```

在以下站点中添加：

[http://dbaspot.com/oracle-server/69226-guid-char-conversion-function.html](http://dbaspot.com/oracle-server/69226-guid-char-conversion-function.html)

想出了这个函数来做相反的事情：

```
create or replace
FUNCTION GUIDTORAW
( HexData IN VARCHAR
) RETURN RAW AS

BEGIN

declare StringData varchar(32) := TRANSLATE(HexData,'0{-}','0');

begin

return
    hextoraw(substr(StringData, 7, 2) 
    || substr(StringData, 5, 2) 
    || substr(StringData, 3, 2) 
    || substr(StringData, 1, 2)
    || substr(StringData, 11, 2) 
    || substr(StringData, 9, 2) 
    || substr(StringData, 15, 2) 
    || substr(StringData, 13, 2)
    || substr(StringData, 17, 4)
    || substr(StringData, 21, 12));
end;

END GUIDTORAW; 
```

他们来回转换，但我真的尊重字节序还是有正确的顺序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T17:30:47.840

引用[UUID 标准](http://www.ietf.org/rfc/rfc4122.txt)：

UUID 的结构是：

```
   字段数据类型八位字节注释
                                        #

   time_low unsigned 32 0-3
                          位整数时间戳

   time_mid unsigned 16 4-5 中间字段
                          位整数时间戳

   time_hi_and_version unsigned 16 6-7 高场
                          位整数时间戳复用
                                               带有版本号

   clock_seq_hi_and_rese unsigned 8 8 的高场
   rved 位整数时钟序列
                                               与多路复用
                                               变体

   clock_seq_low unsigned 8 9 的低场
                          位整数时钟序列

   node unsigned 48 10-15 空间唯一性
                          位整数节点标识符

```

相反，在没有明确的应用程序或表示协议规范的情况下，UUID 被编码为 128 位对象，如下所示：

这些字段被编码为 16 个八位字节，具有上面定义的字段的大小和顺序，并且每个字段**首先以最高有效字节编码**（称为网络字节顺序）。请注意，字段名称（尤其是多路复用字段）遵循历史惯例。

```
   0 1 2 3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+
   | 时间_低 |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+
   | time_mid | time_hi_and_version |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+
   |clk_seq_hi_res | clk_seq_low | 节点 (0-1) |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+
   | 节点 (2-5) |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+

```

引用[Guid 文档](http://msdn.microsoft.com/en-us/library/3573497s.aspx)：

```
public Guid(int a, short b, short c, byte[] d)

Guid(1,2,3,new byte[]{0,1,2,3,4,5,6,7})
creates a Guid that corresponds to "00000001-0002-0003-0001-020304050607". 
```

根据[Wikipedia's Endianness 文章](http://en.wikipedia.org/wiki/Endianness)， Windows 以 little endian --> 最低有效字节优先存储**数字**。

映射 1,2,3,new byte[]{0,1,2,3,4,5,6,7} 到“00000001-0002-0003-0001-020304050607”，显示数字显示得很大-endian，与 UUID 标准一样，但是，字节数组以与显示相同的顺序提供 - 无需交换字节。

所以Guids显示为：

{time_low (4B) - time_mid (2B) - time_hi_and_version (2B) - clock_sq_hi_and_reserved(1B), clock_seq_low (1B) - 节点 (6B)}

在 little endian 中，这会导致字节顺序（byte[] 不计为数字，因此：

{3,2,1,0 - 5,4 - 7,6 - 8,9 - 10,11,12,13,14,15}

这导致十六进制字符顺序（每个字节是 2 个十六进制数字）：

{6,7,4,5,2,3,0,1 - 10,11,8,9 - 14,15,12,13 - 16,17,18,19 - 20,21,22,23,24 ,25,26,27,28,29,30,31}

在 Oracle 中，[substr 字符串函数](http://www.techonthenet.com/oracle/functions/substr.php)是从 1 开始的，因此 Oracle 字符串索引是：

{7,8,5,6,3,4,1,2 - 11,12,9,10 - 15,16,13,14 - 17,18,19,20 - 21,22,23,24,25 ,26,27,28,29,30,31,32}

这导致命令

```
substr(HexData, 7, 2) 
|| substr(HexData, 5, 2) 
|| substr(HexData, 3, 2) 
|| substr(HexData, 1, 2) 
|| '-'
|| substr(HexData, 11, 2) 
|| substr(HexData, 9, 2) 
|| '-'
|| substr(HexData, 15, 2) 
|| substr(HexData, 13, 2) 
|| '-'
|| substr(HexData, 17, 4) 
|| '-'
|| substr(HexData, 21, 12); 
```

并转置（删除'-'后）：

{7,8,5,6,3,4,1,2, 11,12,9,10, 15,16,13,14, 17,18,19,20, 21,22,23,24,25 ,26,27,28,29,30,31,32}

被反转回

{1,2,3,4,5,6,7,8, 9,10,11,12, 13,14,15,16, 17,18,19,20, 21,22,23,24,25 ,26,27,28,29,30,31,32}

使用相同的函数（不添加“-”） - 将 BE 转换为 LE 并将 LE 转换为 BE 具有相同的交换，因为字节只是简单地反转，而反转反转的字节会导致不反转的字节。

# java - 了解工厂方法模式

> ID：12293427
> 
> 赞同：4
> 
> 时间：2012-09-06T05:21:57.453
> 
> 标签：java, design-patterns, factory-pattern

我正在阅读有关工厂方法模式的信息。

我可以理解何时有一个工厂类，即`StoreFactory#getStore()`返回`Store`基于某个运行时或其他状态的实现。

但是，通过阅读（例如[这个链接](http://www.blackwasp.co.uk/FactoryMethod.aspx)），似乎有一种人们创建抽象工厂类的一般模式，其他工厂类扩展到该类：

```
 public abstract class AbstractFactory {
     public abstract Store getStore(int store);
 }

 public class StoreFactoryA extends AbstractFactory {
     public Store getStore(int Store) {
         if(Store == 1) { return new MyStoreImplA(); }
         if(Store == 2) { return new MyStoreImplB(); }
     }
 }

 public class StoreFactoryB extends AbstractFactory {
     public Store getStore(int Store) {
         if(Store == 1) { return new MyStoreImplC(); }
         if(Store == 2) { return new MyStoreImplD(); }
     }
 }

 public class Runner {
    public static void main(String[] args) {
        AbstractFactory storeFactory = new StoreFactoryA();
        Store myStore = storeFactory.getStore(1);
    }
 } 
```

我的示例是人为设计的，但模拟了上述链接的示例。

这个实现对我来说似乎有点像鸡蛋。使用工厂方法模式消除了客户端代码指定类类型的需要，但现在客户端代码需要选择性地选择要使用的正确工厂，`StoreFactoryA`即`StoreFactoryB`？

在这里使用抽象类的原因是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T06:03:16.350

不幸的是，您正在阅读的链接没有给出该模式的真实示例。事实上，按照最初的 GoF 设计模式，这种模式被称为**抽象工厂**（工厂方法是不同的模式）。

当您拥有可以创建一系列**对象**的工厂时，使用抽象工厂模式。例如，您可以拥有并且`AbstractGUIFactory`可以拥有方法`createButton(), createWindow(), createTitleBar`等。然后，您将拥有诸如此类的具体工厂`WindowsGUIFactory, MacGUIFactory, MotifGUIFactory`，每个工厂都将以`Button, Window, TitleBar`自己的方式生成对象。

The factory will be set to one implementation at some point in the application (probably using configuration) and then that factory will be used wherever the objects need to be created.

If you are learning Design Patterns, the best advice is to start with the classic GoF book.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T05:28:26.480

该模式变得有趣，尤其是在测试方面。现在，您可以将 an 注入`AbstractFactory`到一个类中，并为不同的环境或测试选择不同的类型，而无需更改类（如果工厂创建共享公共接口的类型）。

使用类不必依赖于工厂的具体实现，也不必依赖于所创建类型的实际实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T05:33:22.547

使用Factory方法时，方法还在对象中，需要实例化正确的对象才能访问方法。您实现的唯一抽象是因为 Abstract 类。

工厂方法模式就是这样设计的。也许，您期望它类似于抽象工厂模式，它比工厂方法具有更好的抽象。

[http://c2.com/cgi/wiki?AbstractFactoryVsFactoryMethod](http://c2.com/cgi/wiki?AbstractFactoryVsFactoryMethod)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T05:43:16.227

您通过控制反转获得可扩展性和解耦，同时仍然允许对象对实际过程和时间进行控制。

# regex - 正则表达式查找和替换 - 查找任何字符和特定长度的字符串，然后替换 1 个字符

> ID：12293432
> 
> 赞同：0
> 
> 时间：2012-09-06T05:22:25.240
> 
> 标签：regex

我有一个包含一系列数字的文档，如下所示：

```
0300010000000394001001,27
0300010000000394001002,0
0300010000000394002001,182
0300010000000394002002,51
0300010000000394003001,156
0300010000000394003002,40 
```

我需要找到换行符并根据字符串长度替换为多个空格。如果它有 24 个这样的字符 - 0300010000000394001002,0 那么我需要用 5 个空格替换末尾的换行符。如果它有 25 个这样的字符 - 0300010000000394002002,51 那么我需要用 4 个空格等替换末尾的换行符。

在我的文本编辑器中，我可以使用查找和替换。我搜索了`^(.|\s){24}$`24 个字符的行长 - 但这显然会替换整行，我只需要在末尾替换新的行字符。

我想指定一个换行符 AFTER `^(.|\s){24}$`。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T05:55:28.833

听起来你需要两件事。

1.  [多行模式](http://www.regular-expressions.info/anchors.html)（请参阅“使用 ^ 和 $ 作为行首和...”）
2.  反向引用

大多数支持正则表达式的编辑器自然支持这些，但您必须让我们知道您使用的是什么编辑器，以便我们具体说明。在不知道您使用的是什么编辑器的情况下，我只能说您想要执行以下操作的某种组合：

```
regex           subst
-----           -----
^(.{24})\n      $1     <-- there are spaces here
^(.{24})^M      \1     <-- there are spaces here
^(.{24})\s        ^^^^^ 
```

# ssis - CSV output file Error

> ID：12293439
> 
> 赞同：0
> 
> 时间：2012-09-06T05:23:18.357
> 
> 标签：ssis

I am exporting data from sql table to CSV file. Few of my columns in the table has "Comma(,)" separated data, while loading the same into CSV file, data has been splitted into two columns.

Example

data in Sql table

```
ename    desig    Industry
Roy      PM       Business,Analyst  
Rem      PL       Marketting and Production  
King     PM       Marketting, Analyst 
```

while exporting the same data to CSv File it is coming in this way

```
 ename    desig    Industry
    Roy      PM       Business                       Analyst  
    Rem      PL       Marketting and Production  
    King     PM       Marketting                     Analyst 
```

Since this is CSV format, it is delimiting after comma and taking Analyst as another column instead of same with Industry column.

My required output in CSV File

```
ename    desig    Industry
    Roy      PM       Business,Analyst  
    Rem      PL       Marketting and Production  
    King     PM       Marketting, Analyst 
```

my FaltFileConnectionManager Settings are below

in General tab

```
Header Row Delimiter    {CR}-{LF} 
```

Columns Tab

```
Row Delimiter   {CR}-{LF}
Column Delimiter  Comma{,} 
```

I changed these setting , but still facing the same issue.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T18:40:19.527

**编辑**

由于从新信息中显示您没有使用 CSV（逗号分隔值）文件，而是使用管道分隔文件，因此问题似乎是超出此文件的任何处理都同时使用 | 和 , 作为分隔符，因此在有内部逗号的最后一个字段的中间进行分隔。由于您不想在字段中使用嵌入逗号的行业标准并在该字段上使用文本限定符，因此如果没有更多定义您用于测试文件的内容，我不确定我能提出什么建议，完成后处理文件的内容等。

用更多信息更新您的问题，我将完善我的答案。没有新信息的第一个猜测是，由于您在文件上使用 .CSV 名称，因此逗号处理是由下游处理的任何内容自动处理的。

**/编辑**

将文本限定符更改为 "（双引号），这应该使用 "" 限定文本字段，以遵循引用字符串的 CSV 文件的标准做法，以便嵌入的逗号不会导致字段中断。

# oracle - Oracle中现有对象的源代码

> ID：12293444
> 
> 赞同：1
> 
> 时间：2012-09-06T05:23:36.053
> 
> 标签：oracle

我的数据库中有一个名为 f_Get_Employee_Details 的函数。我想为现有函数生成脚本。如何在 Oracle 中做到这一点？

我主要在 SQL Server 上工作，就像从 SQL Server 商店购买糖果一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T05:31:47.833

为了获取存储过程的源代码查询**user_source**或**all_source**或**dba_source**静态视图

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T06:26:49.393

另一种方法是使用`DBMS_METADATA`内置包。（我在这里假设您以函数所有者的身份登录 - 如果不是，您只需要指定正确的模式名称）

```
BEGIN
  DBMS_OUTPUT.put_line(
    DBMS_METADATA.GET_DDL
      (object_type     => 'FUNCTION'
      ,name            => 'f_Get_Employee_Details'
      ,schema          => USER
      )
    );
END; 
```

# blackberry - InitialCall 选项在黑莓设备上不起作用

> ID：12293449
> 
> 赞同：0
> 
> 时间：2012-09-06T05:23:58.950
> 
> 标签：blackberry

使用点击确定按钮时，我已将以下代码用于调用选项。

它在模拟器上工作并转到调用选项，但是当我检查设备时没有发生。我的设备型号是 9800。

```
String[] buttons = { "CALL" ,"CANCEL" };
        Dialog dialog = new Dialog("Are you sure want to call "+number+" ?", buttons, null, 1, Bitmap.getPredefinedBitmap(Bitmap.INFORMATION));
        if (dialog.doModal() == 0) 
        {
            try 
            {
                String numbers = StringUtils.replaceAll(number, "-", "");
                Phone.initiateCall(Phone.getLineIds()[0],numbers);
            }
            catch (RadioException e) 
            {
            }           
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T05:26:44.553

试试这个 -

```
PhoneArguments callArgs = new PhoneArguments(PhoneArguments.ARG_CALL,numbers);
Invoke.invokeApplication(Invoke.APP_TYPE_PHONE, callArgs); 
```

# sql-server-2008 - MS Sql Server 中的 ORDER BY 和 UNION 有什么困难？

> ID：12293451
> 
> 赞同：-1
> 
> 时间：2012-09-06T05:24:14.177
> 
> 标签：sql-server-2008

有什么困难`ORDER BY`？ `UNION`这里不支持。

显示

> 关键字“union”附近的语法不正确。

```
Select Top2 * from(SELECT * FROM xxx WHERE ID > 0) as X 
                   where ID > z  Order By ID desc
UNION 
 select Top2 * from(SELECT * FROM xxx WHERE ID < 10) as X 
                   where ID < z  Order By ID asc 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T05:27:20.907

查询只能有一个`order by`子句。由于`union`产生了一个结果集，无论如何这不应该是一个问题 - 只需将它放在最后。

```
Select Top2 * from(SELECT * FROM xxx WHERE ID > 0) as X 
               where ID > z  
UNION 

select Top2 * from(SELECT * FROM xxx WHERE ID < 10) as X 
               where ID < z  

ORDER BY ID asc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T05:27:43.057

将您的代码更改为

```
Select  Top 2 
        * 
from    (
            SELECT  * 
            FROM    xxx 
            WHERE ID > 0
        ) as X 
where   ID > z 
UNION   
select  Top 2 
        * 
from    (
            SELECT * 
            FROM xxx 
            WHERE ID < 10
        ) as X 
where   ID < z 
Order By ID asc 
```

查看[SELECT (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms189499%28v=sql.105%29.aspx)并专门查看 TSQL 语法

事务处理 SQL

```
<SELECT statement> ::=  

    [WITH <common_table_expression> [,...n]]
    <query_expression> 
    [ ORDER BY { order_by_expression | column_position [ ASC | DESC ] } 
  [ ,...n ] ] 
    [ COMPUTE 
  { { AVG | COUNT | MAX | MIN | SUM } (expression )} [ ,...n ] 
  [ BY expression [ ,...n ] ] 
    ] 
    [ <FOR Clause>] 
    [ OPTION ( <query_hint> [ ,...n ] ) ] 

<query_expression> ::= 
    { <query_specification> | ( <query_expression> ) } 
    [  { UNION [ ALL ] | EXCEPT | INTERSECT }
        <query_specification> | ( <query_expression> ) [...n ] ] 

<query_specification> ::= 
SELECT [ ALL | DISTINCT ] 
    [TOP ( expression ) [PERCENT] [ WITH TIES ] ] 

    < select_list > 
    [ INTO new_table ] 
    [ FROM { <table_source> } [ ,...n ] ] 
    [ WHERE <search_condition> ] 
    [ <GROUP BY> ] 
    [ HAVING < search_condition > ] 
```

请注意`<query_expression>`带有 0/1`ORDER BY`子句的部分。

其中，在`<query_expression>`下面的`UNION`部分中进一步定义。

# php - 切换 MongoDB 主节点时不抛出 PHP 异常

> ID：12293453
> 
> 赞同：0
> 
> 时间：2012-09-06T05:24:17.397
> 
> 标签：php, mongodb

我有一个 MongoDB 2.2 副本集设置（2 个节点），并使用 PHP 连接到测试，例如

```
$mongo = new Mongo("mongodb://192.168.1.1:27017,192.168.1.2:27017", 
                        array("replicaSet" => "testrs", 
                              "safe" => TRUE));
$db = $mongo->test;
$collection = $db->dump;

while (true) {

    echo "Result: " . 
            $collection->insert(array( "ts" => time() ));

    sleep(10);
} 
```

在执行过程中，当我`stepDown`从主节点开始时，我发现插入停止工作但**echo**仍然给我**1**，所以没有抛出异常，我上面的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:58:36.203

如您[在此处](http://www.php.net/manual/en/mongocollection.insert.php)阅读的，`insert`仅在设置选项时引发异常`safe`：

> 如果设置了“安全”选项并且插入失败，则抛出 MongoCursorException。（版本 1.0.1+）
> 
> 如果设置了“安全”选项并且操作花费的时间超过 MongoCursor::$timeout 毫秒来完成，则抛出 MongoCursorTimeoutException。这不会终止服务器上的操作，它是客户端超时。

设置`safe`选项，您应该能够看到抛出的异常。

# php - MySQL 结果不替换变量

> ID：12293455
> 
> 赞同：1
> 
> 时间：2012-09-06T05:24:22.463
> 
> 标签：php

我正在为我的网站创建一个语言文件 - 内容修改文件，以便我可以在我的管理面板中更改多个网站的文本。除了一件事，我一切正常。当我使用`lang.php`内容如下的标准文件时：

```
$error_page_title = "$sitename | PAGE ERROR"; 
```

并使用

```
<? echo $error_page_title ?> 
```

我得到：

示例.com | PAGE ERROR 出现在我的网站上。完美，正是我想要的。在我的配置文件中反映 $sitename 并输出正确的网站名称。

当我将其作为函数执行时：

```
function langString($lang_id) {
$lang_result = mysql_query("SELECT lang_string as phrase FROM lang WHERE lang_id='$lang_id'");
$lang_row = mysql_fetch_array($lang_result); 
return $lang_row[phrase];
} 
```

并使用

```
<? echo langString(3); ?> 
```

我得到：

> $网站名称 | 页面错误出现在我的网站上。不是我想要的... Arrr！

**我怎样才能得到它，以便我的输出被识别为 PHP 而不是文本？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T05:30:05.717

```
echo str_replace('$sitename', $sitename, langString(3)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T05:35:19.333

当使用你的函数 langString() 而不是

```
return $lang_row[phrase]; 
```

利用

```
return $lang_row['phrase']; 
```

也使用`<?php`代替`<?`，如果你只使用 . 有些服务器无法正确解析它`<?`。可能不是问题，但永远不知道

# android - 使用 LocalService 或 AlarmManager 执行重复且耗时的任务

> ID：12293458
> 
> 赞同：0
> 
> 时间：2012-09-06T05:24:44.580
> 
> 标签：android, service

目前，我有一个股票市场应用程序。我想执行以下股票警报任务代码，即使我的股票市场应用程序正在关闭。

> 每 30 分钟通过 HTTP 网络协议执行一次股票报价列表检索。如果某些股票达到价格警报，通过通知栏通知用户。

我想知道，我应该使用

*   [具有长时间运行线程的LocalService](http://developer.android.com/reference/android/app/Service.html#LocalServiceSample)，在无限循环中休眠 30 分钟
*   将每 30 分钟一次的任务安排到[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)

我担心的是

1.  如果我正在使用`LocalService`，假设用户通过 明确杀死股票市场应用程序`Settings -> Apps -> Running -> Stop`，该服务也将被杀死。股票警报任务代码将不再运行。
2.  是否可以`AlarmManager`确保即使用户杀死股市应用程序也会始终执行股票警报任务代码？但是，它适合`AlarmManager`执行这样耗时的任务吗？

我想知道，我应该使用`LocalService`还是`AlarmManager`在我的情况下？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T05:32:30.433

我建议您使用 AlarmManager 每 30 分钟发送一个待启动的意图来启动服务。该服务完成其工作并调用`stopSelf()`. 长时间保持服务空闲是对系统资源的浪费。

# android - Titanium 中的本机代码生成

> ID：12293460
> 
> 赞同：1
> 
> 时间：2012-09-06T05:24:51.040
> 
> 标签：android, titanium-modules

Titanium中如何生成本机代码？我已经阅读了互联网上的文档，从中我只能理解高级架构，但我需要更多关于深入工作的细节。例如。当我们使用 Ti.UI.createButton() 在 Titanium 中创建一个按钮时，它是如何与本机代码绑定的，我们如何获得与使用本机代码相同的按钮。

是 UIButton 对象创建并返回（只谈论 abt iOS）还是执行流程不同？另外我应该在哪里查看本机代码以便更好地理解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T21:01:48.010

首先，每个平台的工作方式是不同的，因此不可能有效地概括，因为平台是如此具体。

对于 iOS，Titanium 使用称为*KrollObject*的本机桥包装对象。这些代理对象形成了从 Javascript 对象到本机代码中的本机对象的桥梁。对于您的 UIButton 用例，UIButton 已创建但不会返回到 Javascript，您可以通过 Kroll 桥控制它。（作为旁注，Kroll 是提炼钛材料的过程，双关语）。

真的，你不需要知道编写模块的真正内在细节，特别是因为它需要大量的本地平台知识（在这种情况下，你没有理由使用钛）。

[这是一个很棒的视频，介绍了上一个 Codestrong 的所有工作原理。](http://vimeo.com/29807421)如果您真的想了解垃圾收集和对象生命周期的工作原理，请阅读此视频。

# sql - 使用触发器更新后更新同一表中的多行

> ID：12293465
> 
> 赞同：0
> 
> 时间：2012-09-06T05:25:27.283
> 
> 标签：sql, database, oracle10g, oracle11g

如果我更新 ACK 或 ReJ 列，它应该使用相同的 GlobalID 更新所有其他列。

```
create table t_emp(
    empid varchar2(10) not null,
    empname varchar2(50),
    Dep varchar2(50),
    ACk number(5),
    REJ number(5),
    globalID varchar2(10) default '0'
);

insert into t_emp t values ( 'TM01' , 'Logu','Java',null,null,'01');
insert into t_emp t values ( 'BT01' , 'Logu','Java' ,null,null,'01');
insert into t_emp t values ( 'Oracle01' , 'Logu','DBA' ,null,null,'01');
insert into t_emp t values ( 'Google01' , 'Logu','Design' ,null,null,'0');
insert into t_emp t values ( 'AR02' , 'Uthaya','CRM' ,null,null,'02');
insert into t_emp t values ( 'RIL02' , 'Uthaya','Java' ,null,null,'02');
insert into t_emp t values ( 'EA02' , 'Uthaya','DBA' ,null,null,'02');
insert into t_emp t values ( 'TCS02' , 'Uthaya','Java' ,null,null,null);
insert into t_emp t values ( 'P05' , 'Krish','.Net' ,null,null,'05');
insert into t_emp t values ( 'TCS06' , 'Krish','.Net' ,null,null,'06');
insert into t_emp t values ( 'IBM06' , 'Krish','.Net' ,null,null,'06');

CREATE OR REPLACE TRIGGER t_emp_update
AFTER UPDATE
    ON t_emp
    FOR EACH ROW
DECLARE
    t_Ack varchar2(15);
    t_Rej varchar2(15);
    t_globalID varchar2(10);
    t_empid varchar2(10);
BEGIN
    t_globalID := :new.globalID;
    t_Ack := :new.ACk;
    t_Rej := :new.REJ;
    t_empid := :new.empid;
    IF t_Ack is not null then
        DBMS_OUTPUT.PUT_LINE('t_Ack := ' || t_Ack || ',  t_globalID := '|| t_globalID ||', t_empid := '||t_empid);
        update t_emp set ACk = t_Ack where globalID = t_globalID and empid != t_empid;
    end if;
    IF t_Rej is not null then
        DBMS_OUTPUT.PUT_LINE('t_REJ := ' || t_Rej || ',  t_globalID := '|| t_globalID ||', t_empid := '||t_empid);
        update t_emp set Rej = t_Rej where globalID = t_globalID and empid != t_empid;
    end if;
END;

update t_emp v set Rej = 1 where empid = 'TCS06'; 
```

如果我更新`empid = 'TCS06'`它应该在内部更新所有具有相同 globalID (06) 的行。

```
select * from t_emp order by empname,globalID; 
```

我在这个触发器中遇到了一些错误。

```
ORA-04091: table TEST1.T_EMP is mutating, trigger/function may not see it
ORA-06512: at "TEST1.T_EMP_UPDATE", line 17
ORA-04088: error during execution of trigger 'TEST1.T_EMP_UPDATE' 
```

请帮助我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T06:27:12.263

[这个链接](http://www.techonthenet.com/oracle/errors/ora04091.php)和[另一个](http://www.dba-oracle.com/t_avoiding_mutating_table_error.htm)链接应该有助于理解错误以及如何纠正它。还要检查[`AFTER UPDATE`](http://www.techonthenet.com/oracle/triggers/after_update.php)触发器的样本。

在 SO 上查看[类似的问题](https://stackoverflow.com/questions/10144224/how-to-avoid-ora-04091-error-within-a-trigger)，并提供详细答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T07:51:33.600

请参考这些链接： [在同一个表中插入记录的 INSERT 触发器（Stackoverflow）](https://stackoverflow.com/questions/8167200/insert-trigger-for-inserting-record-in-same-table)

[避免变异表](http://asktom.oracle.com/pls/asktom/ASKTOM.download_file?p_file=6551198119097816936)

# opengl-es - 在opengl中以正确的比例渲染纹理

> ID：12293466
> 
> 赞同：0
> 
> 时间：2012-09-06T05:25:32.577
> 
> 标签：opengl-es, opengl-es-2.0

我试图渲染一个纹理以保持其在 openGL es 2.0 中的比例。

我想我需要计算比率并更改截锥体尺寸，这是正确的方法吗？现在我用 frustum -1,1 渲染宽度和高度，所以当它没有屏幕尺寸时纹理会被拉伸。

我如何渲染纹理让我们说宽度 = 400 高度 = 800 以该比例？

这是我的代码：

```
@Override
    public void onDrawFrame(GL10 glUnused) {

    GLES20.glClearColor(0.9f, 0.9f, 0.9f, .5f);
    GLES20.glClear(GLES20.GL_DEPTH_BUFFER_BIT | GLES20.GL_COLOR_BUFFER_BIT);
    GLES20.glEnable( GLES20.GL_BLEND );
    GLES20.glBlendFunc( GLES20.GL_SRC_ALPHA, GLES20.GL_ONE_MINUS_SRC_ALPHA );

    Matrix.setIdentityM(mMMatrix, 0);
    Matrix.rotateM(mMMatrix, 0, 270.0f, 0, 0, 1);
    Matrix.multiplyMM(mMVPMatrix, 0, mVMatrix, 0, mMMatrix, 0);
    Matrix.multiplyMM(mMVPMatrix, 0, mProjMatrix, 0, mMVPMatrix, 0);

    GLES20.glUseProgram(programTextured);

    GLES20.glActiveTexture(GLES20.GL_TEXTURE0);
    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, mTextureID);

    sqTex.getVertexBuffer().position(sqTex.VERT_OFFSET);
    GLES20.glVertexAttribPointer(
            GLES20.glGetAttribLocation(programTextured, "aPosition"), 3,
            GLES20.GL_FLOAT, false, 5 * 4, sqTex.getVertexBuffer());
    GLES20.glEnableVertexAttribArray(GLES20.glGetAttribLocation(programTextured, "aPosition"));

    sqTex.getVertexBuffer().position(sqTex.TEXT_OFFSET);
    GLES20.glVertexAttribPointer(
            GLES20.glGetAttribLocation(programTextured, "aTextureCoord"), 2,
            GLES20.GL_FLOAT, false, 5 * 4, sqTex.getVertexBuffer());
    GLES20.glEnableVertexAttribArray(GLES20.glGetAttribLocation(programTextured, "aTextureCoord"));

    GLES20.glUniformMatrix4fv(
            GLES20.glGetUniformLocation(programTextured, "uMVPMatrix"), 1, false,
            mMVPMatrix, 0);
    GLES20.glVertexAttrib4f(
            GLES20.glGetAttribLocation(programTextured, "acolor"), 
            .6f,0.3f,0.9f,.5f);
    GLES20.glDrawElements(GLES20.GL_TRIANGLES, 6, GLES20.GL_UNSIGNED_SHORT, sqTex.getIndexBuffer());

    GLES20.glDisableVertexAttribArray(GLES20.glGetAttribLocation(programTextured, "aTextureCoord"));
}

@Override
public void onSurfaceChanged(GL10 glUnused, int width, int height) {
    GLES20.glViewport(0, 0, width, height);
    float ratio = (float) width / height;
    //flaot ratio2 = (float)height / 
    //Matrix.frustumM(mProjMatrix, 0, -ratio, ratio, -1, 1, 3f, 17);

Matrix.frustumM(mProjMatrix, 0, -1, 1, -1, 1, 3, 17);

}

int mTextureID;
@Override
public void onSurfaceCreated(GL10 glUnused, EGLConfig config) {

    program = createProgram(mVertexShader, mFragmentShader);
    programTextured = createProgram(mVertexShaderTextured, mFragmentShaderTextured);

    Matrix.setLookAtM(mVMatrix, 0, 0, 0, -5, 0f, 0f, 0f, 0f, 1.0f, 0.0f);

    int[] textures = new int[1];
    GLES20.glGenTextures(1, textures, 0);

    mTextureID = textures[0];
    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, mTextureID);

    GLES20.glTexParameterf(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER,
            GLES20.GL_NEAREST);
    GLES20.glTexParameterf(GLES20.GL_TEXTURE_2D,
            GLES20.GL_TEXTURE_MAG_FILTER,
            GLES20.GL_LINEAR);

    GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_S,
            GLES20.GL_REPEAT);
    GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_T,
            GLES20.GL_REPEAT);

    InputStream is = mContext.getResources()
        .openRawResource(R.drawable.image0003);
    Bitmap bitmap;
    try {
        bitmap = BitmapFactory.decodeStream(is);
    } finally {
        try {
            is.close();
        } catch(IOException e) {
            // Ignore.
        }
    }

    GLUtils.texImage2D(GLES20.GL_TEXTURE_2D, 0, bitmap, 0);
    bitmap.recycle();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:33:44.940

我会离开截锥体，而是使用比例：

您需要 2 个因素，首先是 a `screenRatio = screenWidth/screenHeight`，然后是`imageRatio = imageWidth/imageHeight`。

现在，如果`imageRatio < screenRatio`您需要缩小宽度：

```
if (imageWidth>imageHeight) scaleM(mMMatrix, 1/(imageWidth/imageHeight), 1, 1)
else scaleM(mMMatrix, 1/(imageHeight/imageWidth), 1, 1) 
```

或者，如果`imageRatio > screenRatio`您需要按比例缩小它的高度：

```
if (imageHeight>imageWidth) scaleM(mMMatrix, 1, 1/(imageHeight/imageWidth), 1)
else scaleM(mMMatrix, 1, 1/(imageWidth/imageHeight), 1) 
```

# ruby-on-rails - HTML_SAFE 允许除 问问题

> ID：12293467
> 
> 赞同：0
> 
> 时间：
> 
> 标签：ruby-on-rails, html-safe

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:36:58.973

`sanitize`在将其标记为 html_safe 之前，您需要使用帮助程序。不幸的是，在这种情况下，黑名单功能已被删除，因此除了默认值外，您还需要逐字列出您想要的所有属性。使用正则表达式删除有问题的属性可能更容易。

此外，对于它的价值，它的`raw(event.description)`作用与 相同`event.description.html_safe`，但不会因 nil 值而崩溃（不确定您的验证规则是什么），因此通常首选它。

**编辑：**

清理示例用法（来自[http://apidock.com/rails/v3.2.8/ActionView/Helpers/SanitizeHelper/sanitize](http://apidock.com/rails/v3.2.8/ActionView/Helpers/SanitizeHelper/sanitize)）：

```
truncate( raw( sanitize(event.description, :tags => %w(table tr td), :attributes => %w(id class style) ) ), :length => 110, :omission => "...") 
```

注意：像这样截断 HTML 会导致一些奇怪且难以追踪的错误，因为会因为截断结束标签而创建无效的 HTML。

# sharepoint-2010 - 沙盒代码执行请求被拒绝，因为沙盒代码主机服务太忙而无法处理请求

> ID：12293469
> 
> 赞同：3
> 
> 时间：2012-09-06T05:25:37.873
> 
> 标签：sharepoint-2010

我正在使用 SharePoint 2010 服务器。我已经为共享点服务器部署了一个沙​​盒解决方案。但是在将 webpart 添加到页面时，它会显示如下错误。

**“沙盒代码执行请求被拒绝，因为沙盒代码主机服务太忙而无法处理请求”**

我找到了下面的文章并遵循了所有的工作，但错误仍然存​​在。

[http://blogs.msdn.com/b/sharepointdev/archive/2011/02/08/error-the-sandboxed-code-execution-request-was-refused-because-the-sandboxed-code-host-service-太忙了，无法处理请求.aspx](http://blogs.msdn.com/b/sharepointdev/archive/2011/02/08/error-the-sandboxed-code-execution-request-was-refused-because-the-sandboxed-code-host-service-was-too-busy-to-handle-the-request.aspx)

谁能告诉我我错过了什么或者我必须做什么才能摆脱这个异常？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T15:18:59.603

我们也不得不这样做：

```
$uc = [Microsoft.SharePoint.Administration.SPUserCodeService]::Local
$uc.WorkerProcessExecutionTimeout = 5000
$uc.Update()

$tier = $uc.Tiers[""]   # default Tier has no Name
$tier.MaximumWorkerProcesses = 2    # number of CPU Cores + 1
$tier.Update() 
```

# c# - 将参数传递给事件处理程序

> ID：12293471
> 
> 赞同：28
> 
> 时间：2012-09-06T05:25:54.940
> 
> 标签：c#, events, event-handling, handler

在下面的代码中，我定义了一个事件处理程序，并希望从中访问年龄和名称变量，而无需全局声明名称和年龄。有没有办法我可以说`e.age`和`e.name`？

```
void Test(string name, string age)
{
    Process myProcess = new Process(); 
    myProcess.Exited += new EventHandler(myProcess_Exited);
}

private void myProcess_Exited(object sender, System.EventArgs e)
{
  //  I want to access username and age here. ////////////////
    eventHandled = true;
    Console.WriteLine("Process exited");
} 
```

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-09-06T05:29:06.380

是的，您可以将事件处理程序定义为 lambda 表达式：

```
void Test(string name, string age)
{
  Process myProcess = new Process(); 
  myProcess.Exited += (sender, eventArgs) =>
    {
      // name and age are accessible here!!
      eventHandled = true;
      Console.WriteLine("Process exited");
    }

} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-06T05:31:48.983

如果您想访问用户名和年龄，您应该创建使用自定义 EventArgs（从 EventArgs 类继承）的处理程序，如下所示：

```
 public class ProcessEventArgs : EventArgs
{
  public string Name { get; internal set; }
  public int  Age { get; internal set; }
  public ProcessEventArgs(string Name, int Age)
  {
    this.Name = Name;
    this.Age = Age;
  }
} 
```

和代表

```
public delegate void ProcessHandler (object sender,  ProcessEventArgs data); 
```

# ruby-on-rails - 我如何设法在属于单独的控制器/模型的视图中显示表中的内容

> ID：12293473
> 
> 赞同：0
> 
> 时间：2012-09-06T05:25:57.430
> 
> 标签：ruby-on-rails, model-view-controller

基本上，如果我在控制器 A 中有一个表，我想在属于控制器 B 的视图中显示它，我将如何处理它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:48:48.260

如果您有一个`app/views/controllera/_partial.html.erb`包含您的表格的部分，则可以从`app/views/controllerb/some_action.html.erb`如下视图中呈现部分

```
<%= render partial: "controllera/partial", locals: { ... } %> 
```

# windows - 如何在 Windows 上使用 Linux-Like Shell (bash) 进行开发？

> ID：12293494
> 
> 赞同：27
> 
> 时间：2012-09-06T05:28:21.410
> 
> 标签：windows, linux, bash

我是 Windows 用户。但是根据我的项目需求，我需要编写Linux Shell Script（Bash shell）。如何在 Windows 上开发 Linux Shell？

是否有任何用于编写 Linux Shell 脚本的 IDE？请分享一些想法和资源链接。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-06T05:31:25.350

你有很多选择：

**赛格温**

安装[cygwin](http://www.cygwin.com/)。它会给你一个狂欢。

**明威**

windows的[最小 GNU](http://www.mingw.org/)。附带一组命令、编译器。这是我在 Windows 上的 Git 附带的，现在是小脚本的默认 shell

**虚拟机，例如 VirtualBox**

有大量虚拟机，VirtualBox 易于使用（它为[Boot2Docker 提供动力](https://github.com/boot2docker/boot2docker)）。您可以在真正的 Linux 发行版上进行开发和测试。

**Windows 10 上的 Ubuntu**

街区里来了一个新孩子。这允许您使用适用于 Linux 的 Windows 子系统 (WSL) 运行用户空间 Ubuntu。在[Microsoft 博客上查看更多信息](https://blogs.windows.com/buildingapps/2016/03/30/run-bash-on-ubuntu-on-windows/)

**其他说明/IDE 支持**

Shell 脚本应该很小，需要更少的 IDE 等。我使用语法高亮的 VIM。但似乎[ShellED](http://sourceforge.net/projects/shelled/)在您的情况下可能有用。我从这个问题的答案中获得了链接 - [Eclipse 的 Bash 脚本插件？](https://stackoverflow.com/questions/1356827/bash-script-plugin-for-eclipse)

IntelliJ 也有几个用于 Bash的[插件。](https://plugins.jetbrains.com/plugin/4230?pr=idea)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-06T06:07:06.720

我更喜欢[Gow](https://github.com/bmatzelle/gow/wiki)（Windows 上的 Gnu）而不是 Cygwin。两者都会在 Windows 上为您提供 bash，但 Cygwin 对文件系统访问（`/cygdive/c/some/path`而不是`c:\some\path`）有不自然的约定。

原生的 windows 命令终端很蹩脚，看看[Conemu](https://conemu.github.io/)。

我不知道有任何 bash IDE，但是有大量的 Windows 文本编辑器，它们为 bash 脚本提供了不错的语法高亮显示。我喜欢[Notepad++](http://notepad-plus-plus.org/)和[Sublime 文本](http://www.sublimetext.com/)（来自 Sublime 的多光标功能！）。我不建议将 bash 用于超过 30 行的任何内容，如果您觉得需要 IDE，也许该任务更适合 Python、Ruby 或 Perl（恕我直言，Python 更易于维护）。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-04-08T07:12:10.463

Bash shell 将在即将到来的周年更新 (Redstone) 中用于 Windows 10。

Bash shell 即将登陆 Windows。是的，真正的 Bash 即将登陆 Windows，微软的 Kevin Gallo 在 Build 2016 主题演讲中说。这不是 VM [虚拟机]。这不是交叉编译的工具。这是原生的。”

## 以下是在 Windows 10 操作系统上运行 Bash 的步骤：

1.  打开 Windows 开始菜单
2.  键入“bash” [按回车键]
3.  这会打开一个运行 Ubuntu 的控制台`/bin/bash`，可以完全访问所有 Ubuntu 用户空间

是的，你是对的，这意味着`apt`，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，纳米...... _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _在 Ubuntu 档案中！`set``ssh``rsync``find``ls``grep``awk``sed``sort``xargs``md5sum``gpg``curl``wget``apache``mysql``python``perl``ruby``ruby gem``php``gcc``tar``vim``emacs``diff``patch`

![](../Images/586990615a588696a0878dfbefa6d38a.png)

![](../Images/3a8aeafb6b4d5ba90b9061405ef0d93b.png)

## 参考

1.  [启用 Windows 10 的 Ubuntu Bash Shell 的分步指南（适用于 Linux 的 Windows 子系统）](http://www.developerinsider.in/step-vise-guide-to-enable-windows-10s-ubuntu-bash-shell-windows-subsystem-for-linux/)

2.  [Bash shell 将在即将到来的周年更新 (Redstone) 中用于 Windows 10。](http://www.developerinsider.in/2016/04/07/the-bash-shell-is-coming-to-windows-10-in-the-upcoming-anniversary-update-redstone/)

3.  [在 Windows 上的 Ubuntu 上运行本机 Bash](https://blogs.windows.com/buildingapps/2016/03/30/run-bash-on-ubuntu-on-windows/)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-06T05:49:18.807

由于您需要编写 linux shell 脚本，因此您正在学习 Linux。所以你应该在你的机器上安装 Linux（最好在它自己的分区上并从它启动，否则在 VM 中）。

使用`cygwin`或模仿 Linux shell 不是使用 Linux。`emacs`通过安装和使用 Linux（以及使用或`gedit`或`gvim`....之类的编辑器在其上进行开发），您将学到更多。此外，利用 Linux 几乎完全是[免费软件](http://www.fsf.org/)的优势，您可以研究它的源代码并改进它。

不安装 Linux 对自己不利。

我相信`cygwin`适合那些喜欢 Linux 但必须使用 Windows 的人。它不能给您整个 Linux 的感觉（例如，您将无法编写 shell 脚本来查看`/proc`Windows 中不存在的内容，即使使用 cygwin 也是如此）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-06T05:33:32.970

有 cygwin ，这是一个 Windows 的 linux 控制台。所以你可以用它执行所有的 linux 命令。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-06T08:06:31.757

如果您想使用模拟所有 Linux 环境的简单环境来替代 cygwin（更轻量级），您可以尝试[mingw](http://www.mingw.org/)，您可以使用 notepad++ 或 emacs 或 vim 在 sh 脚本上提供一些语法高亮。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-08-28T22:47:14.330

每个人都说要使用完整的 Linux 或使用各​​种模拟。如果您不需要那么多，Cloud9.io 是一个不错的选择。你可以设置一个可以在线访问的“工作区”，让你可以用任何类似于 np++ 的语言编写，但最好的部分是，它是一个在线 Linux，所以你有一个终端，里面有你所有的 shell 命令——没有模拟起来，没有双启动。

这样做的缺点是免费用户没有那么大的权力，所以如果你想执行一些高级数学或输出一个大图像，它会因为你使用太多内存而崩溃。但它仍然非常值得一试，它只在我身上崩溃过一次，而且我做了一些相当耗费内存的事情。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-09-06T05:54:46.257

安装 Cygwin 以执行命令。但是，您可以使用 NotePad++ 作为具有本机 Windows 二进制文件的编辑器。

[http://www.cygwin.com/](http://www.cygwin.com/)

[http://notepad-plus-plus.org/](http://notepad-plus-plus.org/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-03-24T10:55:00.643

对于 Eclipse Luna 应该使用这个旧版本在 UI 错误上失败

```
Help > Install New Software… > Add… 
```

名称：ShellEd

位置：http: [//sourceforge.net/projects/shelled/files/shelled/update/](http://sourceforge.net/projects/shelled/files/shelled/update/)

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2014-09-06T00:39:38.613

我有一个类似的问题。我喜欢 Linux 和 Windows，我同时在这两个系统上工作，但出于不同的原因，我使用 Windows 进行编程（通常是文本编辑）。例如，我在 Windows 上编写 C/C++ 代码，使用 Windows DevC++ IDE，然后我可以在 Linux 上编译这个项目，通过在 LAN 上共享文件。现在我必须写很长的脚本，我想以类似的方式来做。好吧，也许这是一个特殊的要求，但也许我不是唯一一个在这种混合环境中工作的人。首先，我尝试了notepad++（其他人也建议这样做），但它是否支持Linux脚本的语法高亮？我没有找到这个功能......然后我尝试了为Windows编译的gedit。它需要安装 GTK 库（实际上它已经在我的 Windows 上）。Gedit 有脚本的语法高亮！所以我建议在这种情况下使用 gedit for Windows。编辑后的脚本不能直接用它启动/测试，但用于编辑，没问题！

# html - 无法在 Opera 中的页面加载时将输入集中在嵌入式 swf 上

> ID：12293496
> 
> 赞同：0
> 
> 时间：2012-09-06T05:28:29.587
> 
> 标签：html, flash, input, focus, opera

我有一个简单的 html 文件，用于显示嵌入式闪存，我可以从一开始就直接编写，而无需提前单击它。令我失望的是，我无法在我最喜欢的浏览器中执行此操作！问题恰好发生在 Opera 上。在 FF 和 Chrome 上工作正常。

这是代码：（...）

```
<script type="text/javascript">
function setFocus()
{   
    <!-- document.getElementById("clock-countdown").tabIndex = -1; -->
    document.getElementById("clock-countdown").focus(); 
}
</script>

</head>

<body onLoad="setFocus();">

<object name="clock-countdown" tabIndex="0"  > 
<embed id="clock-countdown" wmode="opaque" src="clock-countdown.swf"> </embed>
</object>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:14:17.430

It might help to have an external script insert the object/embed into the DOM, to avoid the click-to-activate state. (Sorry about that.. :-/)

# java - 有没有办法关闭 jdbc 连接池中所有未使用的活动连接

> ID：12293503
> 
> 赞同：0
> 
> 时间：2012-09-06T05:29:19.047
> 
> 标签：java, glassfish, connection, pool

我只是在想，在一个大型 Web 应用程序中，每个使用该应用程序的客户端都与数据库建立了数十个连接，有可能很少有连接未关闭。*尽管我们必须明确关闭所有连接完全取决于我们，*但是，您知道，可能会出现错误。如果发生这种情况，那么几天后我们可能会发现我们的连接池已达到其最大大小，并且应用程序未运行而无法获得连接。

实际上，我的一个项目面临这个问题，每当连接池达到其最大大小时，我都会重新启动服务器，这并不好。

我很想知道如何以更好的方式处理这个问题，我想知道是否有这样的事情，我可以定期关闭连接池中所有未使用的活动连接，例如每 72 小时使用 java 代码?

我说的是 Java/J2ee 技术，我的服务器是 Glassfish Application Server2.1。

**编辑：**我使用的是 Glassfish 应用程序服务器提供的连接池，而不是任何第三方连接池，并使用 JNDI 数据源使用这个池。

需要你的建议…………

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:59:15.170

您可以使用 MiniConnectionPoolManager。它是一个轻量级的独立 Java JDBC 连接池管理器。

看看这篇文章[http://www.h2database.com/javadoc/org/h2/jdbcx/JdbcConnectionPool.html](http://www.h2database.com/javadoc/org/h2/jdbcx/JdbcConnectionPool.html)。和 dispose() 方法。

有很多 jdbc 驱动支持[http://www.source-code.biz/miniconnectionpoolmanager/](http://www.source-code.biz/miniconnectionpoolmanager/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T06:13:33.697

如果我要在没有提供开箱即用的良好连接池的情况下解决这个问题，我会这样做：

1.  我的应用程序获取连接的一个入口点。
2.  装饰从自维护池中获得的连接，将定时器设置为配置值（关闭未使用的活动连接）并将这个装饰连接返回给池的客户端。
3.  如果在计时器触发之前调用了 close 方法，则取消计时器，将调用委托给包装的连接。
4.  如果在计时器触发时未调用 close 方法，则关闭包装的连接并使此装饰连接对象的状态无效，以便`IllegalStateException`如果有人再次尝试使用它，它将抛出。

My two cents!

**Edit**: [C3P0](http://www.mchange.com/projects/c3p0/index.html#maxIdleTime) has `unreturnedConnectionTimeout` that can be configured to handle these kinds of connections taken out from the pool but not returned through a `close()` call.

# javascript - 我的脚本适用于 jsfiddle 但不适用于站点。不能调用null的方法hover？

> ID：12293505
> 
> 赞同：-2
> 
> 时间：2012-09-06T05:29:28.660
> 
> 标签：javascript, jquery, null

`$('#nav li a').hover(function(){`在我的 javascript 中，我收到一条错误消息，上面写着“未捕获的 typeError：无法调用 null 的方法‘悬停’” 。

网站代码：[http](http://pastebin.com/GjZBEu3s) : //pastebin.com/GjZBEu3s jsfiddle：http: [//jsfiddle.net/jenga/5rfCC/2/](http://jsfiddle.net/jenga/5rfCC/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T05:32:21.843

您的脚本应该在文档的正文中，就在结束`</body>`标记之前。如果它已加载到 中`<head>`，则它在文档中寻址的元素可能尚未加载。请参阅[此 jsfiddle](http://jsfiddle.net/5rfCC/3/)（请注意“选择框架”对话框中的“无包装（正文）”）。

顺便说一句，仅使用 css 也可以实现类似的效果。在 Chrome/webkit 浏览器中使用这个[jsfiddle 。](http://jsfiddle.net/KooiInc/vtkyt/)

# c# - 为目录中的 pdf 文件分配/写入标题

> ID：12293506
> 
> 赞同：0
> 
> 时间：2012-09-06T05:29:49.003
> 
> 标签：c#, pdf, directory, title, assign

嗨，我有一个 C# 代码片段，它将为 pdf 文件分配标题。但我正在尝试对目录中的每个 pdf 文件执行相同的操作。任何人都可以帮助我...？

以下是代码片段“ PdfReader pdfReader = new PdfReader(filePath); using (FileStream fileStream = new FileStream(newFilePath, FileMode.Create, FileAccess.Write)) { string title = pdfReader.Info["Title"] as string; Trace .WriteLine("现有标题：" + title);

```
 PdfStamper pdfStamper = new PdfStamper(pdfReader, fileStream); 

        Hashtable newInfo = pdfReader.Info; 

        newInfo["Title"] = "New title"; 

        pdfStamper.MoreInfo = newInfo; 

        pdfReader.Close(); 
        pdfStamper.Close(); 
    } 
```

"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:58:58.063

试试这个代码，希望对你有用......

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Windows.Forms;
using System.IO;
using iTextSharp.text;
using iTextSharp.text.pdf;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            string workingFolder = Environment.GetFolderPath(Environment.SpecialFolder.Desktop);
            string inputFile = Path.Combine(workingFolder, "Input.pdf");
            string outputFile = Path.Combine(workingFolder, "Output.pdf");

            PdfReader reader = new PdfReader(inputFile);
            using(FileStream fs = new FileStream(outputFile, FileMode.Create, FileAccess.Write, FileShare.None)){
                using (PdfStamper stamper = new PdfStamper(reader, fs))
                {
                    Dictionary<String, String> info = reader.Info;
                    info.Add("Title", "New title");

                    stamper.MoreInfo = info;
                    stamper.Close();
                }
            }

            this.Close();
        }
    }
} 
```

# asp.net-mvc - 使用自定义成员资格提供程序的信号器

> ID：12293508
> 
> 赞同：1
> 
> 时间：2012-09-06T05:30:11.277
> 
> 标签：asp.net-mvc, asp.net-mvc-3, signalr

所以我实现了我自己的自定义会员提供程序，目前只覆盖了ValidateUser()。我也有信号器工作，目前只是一个简单的方法，它调用发送消息，然后将其发送给所有听众。我想添加一些验证检查，以便该命令不能单独运行。到目前为止，我发现您可以使用以下方法执行此操作：Context.User.Identity.IsAuthenticated

```
[HubName("messageController")]
public class MessageController : Hub
{
    public void SendMessage(string message)
    {
        if (Context.User.Identity.IsAuthenticated)      // this line not working
        {
            Clients.addMessage(message);
        }
        else
        {
            Clients.addMessage("not authenticated");
        }
    }
} 
```

不过，我的问题是因为我目前使用的自定义会员提供程序值为 false。还有什么我应该在这里使用的吗？

目前，当我登录时，我执行：

```
 [AllowAnonymous]
    [HttpPost]
    public ActionResult Login(LoginModel model, string returnUrl)
    {
        if(Membership.ValidateUser(model.UserName, model.Password))
        {
            // Need something here to actually set the logged in user
        }
        return RedirectToAction("Index", "");
    } 
```

我在这里想念什么？我是否需要存储自己的代码来处理会话，我尝试使用`FormsAuthentication.SetAuthCookie(model.UserName, true);`哪个有效，但我很确定它是错误的。当我试图通过将角色更改为它来引入角色时，`Context.User.IsInRole("Admin")`它返回了 false。即使我使用了以下用户模型（调试时从未使用此方法）：

```
public class User : IPrincipal
{
    [Required]
    [Display(Name = "User name")]
    public string UserName { get; set; }

    [Required]
    [DataType(DataType.Password)]
    [Display(Name = "Password")]
    public string Password { get; set; }

    public long UserID;
    public string Name;
    public string ConnectionId;

    public virtual IIdentity Identity
    {
        get;
        set;
    }

    public virtual bool IsInRole(string role)
    {
       return true;
    } 
```

}

我很有信心我错过了一些东西，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T16:32:59.503

`FormsAuthentication.SetAuthCookie()`在您验证用户完全正常后使用`AccountController`，MVC3 模板创建的默认值完全相同。

您的调用`Context.User.IsInRole()`不起作用的原因是因为它不会调用您的自定义`User`类（框架不知道它），而是会尝试通过`RoleProvider`. 您需要构建一个自定义提供程序并将其连接到 Web.config 中，就像您对成员资格提供程序所做的那样。

# apache-flex - 为什么我的 mxmlc 找不到 SDK 主页？

> ID：12293511
> 
> 赞同：0
> 
> 时间：2012-09-06T05:30:58.733
> 
> 标签：apache-flex

我正在尝试使用 mxmlc 从命令行进行编译。

我正在使用一个配置文件，所以正在运行这样的东西：

```
d:\myProject>mxmlc -load-config=myProject-config.xml 
```

我的配置文件包括对位于 SDK 中 $FLEX_HOME\frameworks 下的文件的引用，例如 \themes 和 \libs 文件夹。

但是 mxmlc 抱怨它找不到这些文件。

我定义了一个 %FLEX_HOME% 环境变量并指向 SDK 的顶层，其中包括直接位于其下方的 \frameworks 和 \bin 文件夹。我在 %path% 上也有 %FLEX_HOME%\bin。

我究竟做错了什么？

# php - 处理表单操作以使用 facebox 打开它

> ID：12293513
> 
> 赞同：0
> 
> 时间：2012-09-06T05:31:06.053
> 
> 标签：php, jquery, html, css, facebox

我正在使用 facebox 来显示联系表单，但是当用户选择提交时，我希望在此示例中调用 action="contact_send.php" 的操作也可以在 facebox 中打开。目前很容易通过将 rel 属性声明为 facebox 来打开到 facebox 的链接，例如

```
<a href="contact.html" rel="facebox">Contact</a> 
```

这将在 facebox 窗口中打开contact.html，但是我希望此表单的操作也可以在灯箱中打开，有没有人有任何可能有帮助的建议？

在此先感谢-Ashutosh

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:50:32.443

**您的 HTML 表单**

```
<form id="contactfrm" method="post" onsubmit="return false;">
 ....your form elements
 <input type="submit" onclick="submitContact();" />
</form> 
```

**编辑 ：**

**你的脚本**

现在使用jquery提交表单

```
<script type="text/javascript">
function submitContact() {

    $.facebox(function() {

        $.ajax({
            data: { 'name' : $('#name').val(), 'message' : $('#message').val() },  //Make sure to change these values that reflects yours.
            error: function() {
                $.facebox('There was error sending your message.');
            },
            success: function(data) {
                $.facebox(data); // the data returned by contact_send.php
            },
            type: 'post',
            url: 'contact_send.php'
        });

    });

}
</script> 
```

当您单击页面上的提交按钮时，此代码将打开 facebox 并处理您发送到 contact_send.php 页面的变量并将该页面的输出返回到 facebox。

# iphone - iphone app-通过删除以前的视图添加视图

> ID：12293514
> 
> 赞同：0
> 
> 时间：2012-09-06T05:31:23.413
> 
> 标签：iphone, xcode, stack, addsubview

我正在使用两个视图，分别是 A 和 B。我需要在视图 A 中按下按钮时转到视图 B，所以在视图 A 中定义的按钮动作侦听器中，我写道

```
 -(IBAction)bt:(id)sender
    {
      B *mB=[[B alloc]initWithNib:@"B" bundle:nil];
      [self.view addSubView:mB.view];
    } 
```

所以这意味着视图 B 已添加到视图 A 上。因此，两个视图都保留在堆栈上，我认为这会消耗内存。
他们是否以任何方式按下视图A中的按钮，将其删除然后添加视图B？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T06:09:18.583

您可以使用 removeFromSuperview 删除视图 A

```
 [view_A_Object removeFromSuperview]; 
```

# iphone - 将图片iphone转换为ipad

> ID：12293517
> 
> 赞同：0
> 
> 时间：2012-09-06T05:31:29.377
> 
> 标签：iphone, ios, ipad

我刚刚完成我的 iPhone 应用程序，现在我必须为 iPhone 和 iPad 转换它。我可以在运行时检查设备。但问题是。我不知道自定义导航栏的大小（我在 iPhone 中使用的 320 * 44）、自定义标签栏（我在 iPhone 中使用的 320 * 44）、按钮、表格背景和我的 iPad 的更多图像尺寸。

我在谷歌上搜索，但没有在一个地方得到完美的答案。到目前为止，我只了解图像名称概念

```
devices without retina:
ImageName.png - For iPhone/iPod
ImageName~ipad.png -- For iPad

devices with retina display:
ImageName@2x.png - For iPhone/iPod
ImageName@2x~ipad.png -- For iPad 
```

任何人都可以为我提供链接，从那里我可以获取有关 iPad 和视网膜显示器的图像大小和分辨率的所有信息。比如启动画面、图标大小、导航栏大小、标签栏大小、管理 iPhone 和 iPad 按钮的自定义图像等

在这个问题中很难描述我所有的图像大小和分辨率问题，但希望你们能理解我的问题

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:33:23.997

在这里，来自 Apple 开发者文档：[自定义图标和图像创建指南](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html)

另外：[iPad 和 iPhone 上的应用程序图标](http://developer.apple.com/library/ios/#qa/qa1686/_index.html)

# python - Python 空闲语法高亮

> ID：12293523
> 
> 赞同：-1
> 
> 时间：2012-09-06T05:31:51.993
> 
> 标签：python, python-idle

我在 Windows 7 上使用 idle，因为我刚刚来自 mac，并且我使用的文本编辑器突出显示了不同的关键字，然后 idle 做什么。我知道我可以更改当前语法的颜色，例如 print 和 def，但我也可以添加其他关键字来突出显示吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T07:24:47.927

不幸的是，我认为 Idle 不能以这种方式进行扩展，而无需对其源代码进行黑客攻击。我相信它目前只突出显示一组特定的名称（加上其他容易识别的东西，如字符串文字）。

*   它以橙色（默认）突出显示[Python 语言的所有关键字](http://docs.python.org/reference/lexical_analysis.html#keywords)。

*   它以洋红色突出显示标准库中可用的所有内置函数、类型和其他对象，而无需执行任何`import`语句。（您可以通过`dir(__builtins__)`在 Python 解释器中运行或浏览[库参考](http://docs.python.org/library/index.html)的第 2-6 节来查看它们的列表。）

Idle 不做太多代码分析。这意味着它无法分辨大多数其他名称代表什么。它不能为例如类名提供特定的突出显示颜色，因为不需要以任何特定方式命名它们。您的代码中是否`foo`引用了类、模块、函数或其他内容？闲着说不出来。

如果您想要更认真的突出显示，您可能需要找到更复杂的 IDE。我最近对[​​Spyder](http://code.google.com/p/spyderlib/)非常满意（尽管我不确定它的语法高亮是否比 Idle 的更强大），还有很多其他的。官方 Python wiki 有[一个 IDE 列表](http://wiki.python.org/moin/IntegratedDevelopmentEnvironments)，可以帮助您找到最适合您的 IDE。

# php - 访问方法->和访问方法有什么区别::

> ID：12293527
> 
> 赞同：1
> 
> 时间：2012-09-06T05:32:25.550
> 
> 标签：php, methods, call

`->`使用和调用方法之间的基本区别是什么`::`

```
 class a 
  {
    function b()
     {
         echo "abc"; 
     }
  } 
```

这两者有什么区别？

1.  `a::b();`
2.  `$c = new a; $c->b();`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T06:03:32.363

在定义你的类时，你应该明确声明你的属性和方法的可见性，以及它们是否是静态的。

您示例中的类应该是：

```
class A 
{
    public static function b() {
        echo "abc"; 
    }
} 
```

方法 b() 应该是静态的，因为它不引用任何实例变量。要调用 b() 你会使用：

```
A::b(); 
```

如果您的方法要使用实例变量（非静态属性），您的类可能如下所示：

```
class Foo
{
    private $bar;   // non static instance variable

    public function __construct($bar) {
        $this->bar = $bar;  // instance variable set in the constructor
    }

    public function baz() {
        echo $this->bar;  // instance variable referred to in the non-static method
    }
} 
```

然后你会这样调用函数：

```
$x = new Foo('abc');
$x->baz(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T05:40:00.413

`->`在实例的上下文中执行方法，而`::`在类的静态上下文中访问方法。后者只能通过 via 访问类的静态成员`self::`，而前者也可以通过 via 使用实例成员`$this->`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T05:40:50.747

> ```
>  a::b(); 
> ```

上述语句用于在类的上下文中调用静态方法（独立于任何对象上下文），因此 $this 在静态方法中不可用

> ```
>  $c = new a; $c->b(); 
> ```

上述语句用于在 object($c) 的上下文中调用实例方法，因此 $this(refer to object $c) 在实例方法中可用

谢谢

# linux - .so 和 .a 文件有什么区别？

> ID：12293530
> 
> 赞同：25
> 
> 时间：2012-09-06T05:32:46.753
> 
> 标签：linux, shared-libraries

我正在尝试编译第 3 方库（在 linux 上）并看到它正在生成 libsomething.a 文件我有我的其他库是 .so 文件

但似乎 .a 也是共享库，可以像 .so 库一样使用

那么这两者有什么区别吗？或者它们只是相同的不同命名约定。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-06T05:41:41.407

文件`.a`是*静态库*，而`.so`文件是类似于Windows 上的*共享对象动态库。*`DLL`

可以 在*编译*期间*作为程序的一部分*`.a`包含在程序中，并且可以在*加载程序时**导入*。**`.so`**

 **** * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-09-06T05:35:14.070

> 但似乎 .a 也是共享库

不，它是一个静态库。

> 并且可以像 .so lib 一样使用

如果你的意思是链接到它，那么是的。但是你不能 dlopen() 一个 .a 文件，你可以用一个 .so 文件来做。

您可以随时请我们的老朋友[G叔](http://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html)为您解答。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-09-06T05:50:20.223

当您链接到 时`*.a`，库中的代码包含在可执行文件本身中，并且可执行文件可以在不需要`*.a`文件存在的情况下运行。当您链接到`*.so`时，情况并非如此，并且该`*.so`文件必须在运行时存在。***

# css - CSS 变量 2 列布局

> ID：12293531
> 
> 赞同：0
> 
> 时间：2012-09-06T05:32:53.437
> 
> 标签：css, html

因此，我在互联网上查找了所有内容，但找不到我正在寻找的答案。

我只是想为我的页面中的一部分制作一个 2 列布局，每列的宽度相同，占容器的 50%。

现在由于某种原因，当我将两个 div 都设置为 50% 和 float:left 时，第二个 div 会包裹在下面。我能得到的最接近的事情是将第二个 div 向右浮动并使宽度为 49%，但我希望它为 50%，因为我想让它们接触。

这是一个演示：

[JSFiddle 示例](http://jsfiddle.net/VbWbc/ "JSFiddle 示例")

那么我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:38:26.950

`div`边框宽度设置为 1px，因此它们将为两个s中的每一个添加额外的 2px 。因此，您的内容是 4px 太宽，不适合`div`.

您需要做的是将您`div`的 s 的内容封装在另一个 s 中`div`，并将边框应用于 inner `div`。就像在[这个小提琴](http://jsfiddle.net/4Pbfm/)中看到的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T05:38:34.483

使用 CSS3`box-sizing: border-box;`

添加这个-

```
-moz-box-sizing: border-box;
-webkit-box-sizing: border-box;
-o-box-sizing: border-box;
box-sizing:border-box; 
```

在`#inf`o 和`#textBooks`

[**小提琴**](http://jsfiddle.net/VbWbc/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T05:39:08.017

您定义DIV 的**边框。**例如为其添加宽度 5 `0% + 2px`。所以，使用**box-sizing: border-box;**

像这样写：

```
div#textBooks,
div#info{
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
} 
```

检查这个[http://jsfiddle.net/VbWbc/4/](http://jsfiddle.net/VbWbc/4/)

注意：它的工作直到 IE8 及更高版本。

适用于所有浏览器

检查这个[http://jsfiddle.net/VbWbc/5/](http://jsfiddle.net/VbWbc/5/) 像这样写：

```
div#info{
    width:50%;
    border:1px solid black;
    background-color:red;
    float:left;
}

div#textBooks{
    border:1px solid black;
    background-color:green;
    overflow:hidden;
} 
```

# javascript - 使用 Google GeoApi 获取用户的城市和国家信息

> ID：12293536
> 
> 赞同：0
> 
> 时间：2012-09-06T05:33:05.447
> 
> 标签：javascript, google-maps-api-3, google-api

我正在使用此代码获取用户的完整地址信息

```
function getGeo() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function (a) {
            $("#geoLoc").html("Determing your location..");
            $.post("https://mysite.com/getloc.php?l=" + a.coords.latitude + "," + a.coords.longitude, function (b) {
                var c = jsonParse(b);
                geo_adres = c.results[0].formatted_address;
                latitude = a.coords.latitude;
                longitude = a.coords.longitude;
                $("#geoLoc").html(c.results[0].formatted_address);
                $("#geoLoc").show("slow")
            })
        }, function (a) {
            alert(geolocationErrorMessages[a.code])
        }, {
            enableHighAccuracy: true,
            maximumAge: 12e4
        });
        return false
    } else {
        alert("Your browser doesn't support geo-location feature...")
    }
} 
```

编辑：getloc.php 包含此代码（javascript 中的 c var）

```
$data = file_get_contents("https://maps.googleapis.com/maps/api/geocode/json?latlng=". $_GET['l'] ."&sensor=false");
print $data; 
```

实际上，我想要的只是获取用户的城市和国家/地区信息`city, country`

我应该如何改变这个`c.results[0].formatted_address`来实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:58:47.300

试试这个工作的 php 代码，我希望这会对你有很大帮助:) 如果有任何查询，请让 mew 知道——

```
<?php

$data = file_get_contents("http://maps.googleapis.com/maps/api/geocode/json?latlng=40.714224,-73.961452&sensor=false");

$jsonnew =json_decode($data,true);

    echo "<pre>";
    print_r($jsonnew['results'][7]['address_components'][2]['long_name']);

echo "<pre>";
    print_r($jsonnew['results'][6]['address_components'][2]['long_name']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T07:22:40.910

你不应该需要你的`getloc`PHP 脚本。Maps Javascript API 包含一个[`Geocoder`](https://developers.google.com/maps/documentation/javascript/reference#Geocoder)类。

# objective-c - 获取 ViewController 的当前实例

> ID：12293542
> 
> 赞同：1
> 
> 时间：2012-09-06T05:33:36.790
> 
> 标签：objective-c, ios, uiviewcontroller, delegates, restkit

我正在实现一个登录系统。

`LoginViewController`处理这个系统的视图（duh！），`LoginSession`是一个处理当前会话的身份验证和存储的单例，身份验证是通过 RestKit 进行的。

```
//LoginViewController.m
- (IBAction)loginButtonPress:(id)sender {
    (...)
   [[LoginSession sharedInstance] authenticateUser:[username text] withPassword:[password text] andDomain:[domain text]];
}

//LoginSession.m
- (void) authenticateUser:(NSString *)userName withPassword:(NSString *)password andDomain:(NSString *)domain{
    (...)
     RKRequest * loginRequest = [[RKClient sharedClient] get:@"/login" queryParameters:loginData delegate:self];
    (...)
} 
```

完成此请求后，它会调用委托：

```
//LoginSession.m
- (void)request:(RKRequest *)request didLoadResponse:(RKResponse *)response; 
```

这需要回调 LoginViewController，以显示错误或允许用户访问应用程序。

我尝试`LoginViewController`使用 Storyboard 实例化，但事实证明它正在创建一个新实例：

```
//LoginSession.m
UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle: nil];

LoginViewController *loginViewController =
(LoginViewController *)[mainStoryboard instantiateViewControllerWithIdentifier: @"loginViewController"]; 
```

而且我什至尝试将`LoginViewController's` `self`属性存储在`LoginSession`: ( 出现错误)

```
//LoginSession.m
@property (strong, retain) LoginViewController *loginViewController; 
```

那么，联系当前活动实例的正确方法是`ViewController`什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:57:54.927

您可以使用

*   委托模式，在 iOS 中无处不在
*   通知模式，例如 NSNotificationCenter

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T07:04:55.000

```
//LoginSession.h
@property (strong, retain) LoginViewController *loginViewController; 

@synthesize loginViewController;

UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle: nil];
loginViewController =
(LoginViewController *)[mainStoryboard instantiateViewControllerWithIdentifier: @"loginViewController"]; 
```

推送或呈现 loginViewController

并使用 loginViewController 调用委托方法

# elasticsearch - 将 ElasticSearch Facets 查询转换为 PyES

> ID：12293544
> 
> 赞同：2
> 
> 时间：2012-09-06T05:33:44.520
> 
> 标签：elasticsearch, facets, pyes

我有以下查询，我想将该查询更改为 PyES：

```
 {
      "facets": {
        "participating-org.name": {
          "terms": {
            "field": "participating-org.name"
          },
          "nested": "participating-org"
        }
      }
    } 

```

我在 PyES 文档中搜索了以下内容：

**类 pyes.facets.TermsFacetFilter(field=None, values=None, _name=None, execution=None, **kwargs)**

而且我不知道如何使用它，而且我找不到任何与之相关的示例。希望看到 PyES 的人在未来提供带有示例的优秀文档。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T11:11:34.933

我刚刚发现自己：

```
 from pyes import *
    from pyes.facets import *

    conn = ES('localhost:9200', default_indices='org', default_types='activity')

    q2 = MatchAllQuery().search()
    q2.facet.add_term_facet('participating-org.role', nested="participating-org")

    # Displays the ES JSON query.
    print q2

    resultset = conn.search(q2)

    # To display the all resultsets.
    for r in resultset:
        print r

    # To display the facet counts.
    print resultset.facets 

```

这段代码给出了上面的 JSON 代码，并为我提供了准确的计数。

# objective-c - UIDatePicker 时间错误

> ID：12293546
> 
> 赞同：0
> 
> 时间：2012-09-06T05:33:58.630
> 
> 标签：objective-c, ios, cocoa-touch, uidatepicker

我有一个 UIDatePicker。我选择凌晨 2:30，它通过我的日期时间为早上 6:30。我究竟做错了什么？谢谢

这是代码：

```
_datePicker = [[UIDatePicker alloc] initWithFrame:CGRectMake(0, toolBar.frame.size.height, vcSize.width, 0)];
_datePicker.minimumDate = [NSDate date];
[_datePicker addTarget:self action:@selector(valueChanged:) forControlEvents:UIControlEventValueChanged];
_datePicker.minuteInterval = 15;
_datePicker.timeZone = [NSTimeZone localTimeZone];
_datePicker.calendar = [[NSLocale currentLocale] objectForKey:NSLocaleCalendar]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:54:09.393

这可能是您 [在 iOS 4 中遇到的关于时区 UIDatePicker 错误的问题](http://www.iphonedevsdk.com/forum/iphone-sdk-development/52533-uidatepicker-bug-ios-4-a.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-06T06:10:38.037

```
you  can select the date in to datePicker:

NSDate *date =  self.datePicker.date; 
```

并且您在 datepicker 中选择任何日期将显示标签：

```
 datePicker = [[UIDatePicker alloc] initWithFrame:CGRectMake(500, 160, 340, 300)];
    datePicker.datePickerMode = UIDatePickerModeDate;
    datePicker.hidden = NO;
    datePicker.date = [NSDate date];
    [datePicker addTarget:self
                   action:@selector(LabelChange:)
         forControlEvents:UIControlEventValueChanged];
    [self.view addSubview:datePicker];

-(void)LabelChange:(id)sender
{

 NSDateFormatter *df = [[NSDateFormatter alloc] init];
    df.dateStyle = NSDateFormatterMediumStyle;

    datelabel.text = [NSString stringWithFormat:@"%@",
                  [df stringFromDate:datePicker.date]];

if ([datePicker.date isEqualToDate:datePicker.date]) 
{
    NSLog(@"datePicker......");
}

[df release];

} 
```

# java - 告诉 javac 创建所有有效的类

> ID：12293547
> 
> 赞同：0
> 
> 时间：2012-09-06T05:33:59.567
> 
> 标签：java, javac

我如何告诉 javac(jdk-1.6) 创建所有有效的类？例如：

```
javac a.java b.java 
```

例如 b.java 包含错误。我想得到a.class，但是javac在b.java中没有造成语法错误的原因

谢谢

**upd**：正如我所见，eclipse java编译器解决了这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:36:42.390

这可能取决于编译器。也许您正在寻找的是增量编译器。与 Eclipse IDE 捆绑在一起的编译器是一个增量编译器，但我感兴趣的是，您为什么要以这种方式构建代码？

**编辑**

我之前有错误的想法。我看到你想通过代码来做到这一点。您可以使用此实现：

[http://www.accordess.com/wpblog/an-overview-of-java-compilation-api-jsr-199/](http://www.accordess.com/wpblog/an-overview-of-java-compilation-api-jsr-199/)

它使您可以控制要传递的编译单元。

# c# - 如何将 Excel 文档数据逐张导入 SQL 表

> ID：12293550
> 
> 赞同：0
> 
> 时间：2012-09-06T05:34:23.700
> 
> 标签：c#, sql, sql-server, ssis

我需要将数据从 excel 文件导入我的 SQL Server 数据库。数据文件包含我需要导入的大约 120,000 条记录（行）。excel文件的每一行数据由大约183个格式化的数据列组成，数据在SQL端要分散到大约13个不同的表中。将所有这些记录导入 SQL 以确保正确处理每一行的最佳方式（最简单但高性能）是什么。

另一种选择是有一个选项将数据加载到数据库中的临时数据表中，然后运行脚本将所有数据列从临时表移动到其他各种表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T06:34:55.963

我使用这种方式从 CSV 文件中获取数据：->

```
 int f = 0;
 var reader = new StreamReader(File.OpenRead(@ExcelFilePath));
                Buisness_logic bl = new Buisness_logic();

                while (!reader.EndOfStream)
                {
                       if (f == 0)
                    {
                         var line = reader.ReadLine();
                        f++;
                    }
                    else
                    {
                        var line = reader.ReadLine();
                        string[] s = line.Split(',');
                        count = s.Length;
                        if (s.Length == 3)
                        {
                            var values = line.Split(',');
                            string query = "Insert into Events_party values('" + identity + "','" + values[0] + "','" + values[1] + "','" + values[2] + "','" + time + "','" + dt + "')";
                            bl.ExecuteQuery(query);
                            count = 101;
                        }
                        else
                        {
                            MessageBox.Show("Imported File was not in defined format !! ", ".File Format Error", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
                            textBox1.BackColor = Color.Pink;
                            break;
                            count = 100;
                        }
                    }
                } 
```

# node.js - 如何使用 Passport.js 返回到当前哈希位置？

> ID：12293554
> 
> 赞同：6
> 
> 时间：2012-09-06T05:34:48.560
> 
> 标签：node.js, authentication, hash, passport.js, callbackurl

我正在使用 Passport.js 通过 OAuth 向 Google 进行身份验证（我使用的是 passport-google-oauth 策略）。它工作正常，但我目前正在将用户重定向到“/”，我想将它们发送到“/”加上当前的哈希标签。我可以在查询字符串参数中发送哈希值，但我似乎无法将该值设置为我要传递以进行身份​​验证的对象的 callbackURL 属性。

有人可以提供有关正确方法的示例或解释吗？我不喜欢使用查询字符串，这似乎是最直接的路线，但我愿意使用会话变量或其他东西，如果这样更容易或更好的话。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T04:57:03.790

您可以通过将返回 url 存储在会话中来实现此效果。

```
// server
var app, express;

express = require('express');

app = express();

app.configure(function() {
  app.use(express.cookieSession({secret: 'shh'}));
});

app.get('/auth/twitter', function(req, res, next) {
  // to return to '/#/returnHash', request this url:
  // http://example.com/auth/twitter?return_url=%2F%23%2FreturnHash

  // on the client you can get the hash value like this:
  // encodeURIComponent("/"+window.location.hash)
  req.session.return_url = req.query.return_url;
  next();
}, passport.authenticate('twitter'));

app.get('/auth/twitter/callback', passport.authenticate('twitter', {
  failureRedirect: '/login'
}), function(req, res) {
  var url = req.session.return_url;
  delete req.session.return_url;

  // redirects to /#/returnHash
  res.redirect(url);
}); 
```

# java - 如何在JAVA中显示jTable中的数据它附加旧值

> ID：12293562
> 
> 赞同：-2
> 
> 时间：2012-09-06T05:35:29.917
> 
> 标签：java, swing, netbeans, combobox, jtable

我在 netbeans 中使用 jTable。选择组合框后，如果我选择员工 id 1，它会在 jTable 中显示 emp 1 的所有数据。但是下次当我选择 emmployee id 2 jTable 时会显示 emp id 1 的单个值和 empid 2 的所有其他值。我的代码如下所示

```
Connect c       = new Connect();//connection to database
con             = (Connection) c.getConnection();
st              = (Statement)con.createStatement();
String ddate    = (String)text.getSelectedItem();
System.out.println("id " +ddate);
rs = st.executeQuery("select e.employee_id,e.`first_name`, i.outtime, i.outtime_date from tbl_employee e,tbl_outtime i  where e.employee_id=i.outtime_emp_id and i.`outtime_date` LIKE '%/"+month2+"/"+year1+"'and outtime_emp_id="+ddate);
while(rs.next())
{
    String dat1=rs.getString("outtime_date");
    String e1=rs.getString("employee_id");
    System.out.println(e1);
    st33=(Statement) con.createStatement();      
    rs33=st33.executeQuery("select i.intime, i.intime_date from tbl_employee e,tbl_intime
    i where e.employee_id=i.intime_emp_id and i.`intime_date`='"+dat1+"' and 
    i.intime_emp_id="+e1);
    if(rs33.next())
    {
        int emp=rs.getInt("employee_id");
        System.out.println(emp);
        String name=rs.getString("first_name");
        String dept=rs33.getString("intime");
        String desig=rs.getString("outtime");
        String join=rs33.getString("intime_date");
        jTable1.setValueAt(emp, cnt, 0);
        jTable1.setValueAt(name, cnt, 1);
        jTable1.setValueAt(dept, cnt, 2);
        jTable1.setValueAt(desig, cnt, 3);
        jTable1.setValueAt(join, cnt, 4);
        cnt=cnt+1;
    }
} 
```

如果有人知道，请告诉我解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T05:53:42.350

*   阅读有关[JTable的教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

*   s 视图的所有数据`JTable`都存储到[XxxTableModel](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)

*   [必须清除 XxxTableModel](https://stackoverflow.com/a/12263298/714968)，并将新行添加`JDBC`到`XxxTableModel`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T05:56:36.880

使用 TableModel 添加行。

读

[http://docs.oracle.com/javase/tutorial/uiswing/components/table.html](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

样品。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T08:06:33.277

与所有其他 Swing 组件一样，表格由两部分组成：视图部分 (the `JTable`) 和模型部分 (the `TableModel`)。当模型表明它已被抛出事件更改时，视图会更新。有关详细信息，请参阅[表格教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)。

因此，对于您的用例，您可以调整现有的`TableModel`或创建一个新的。我个人会选择创建一个新的，因为您正在使用数据库。

请注意，Swing 组件只能在 Event Dispatch 线程上访问和修改，并且不应在该线程上发生长时间运行的任务（如查询数据库）（请参阅[Swing 并发教程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)）。这就是为什么我建议创建一个新的`TableModel`. 您可以在用于查询数据库的工作线程上创建此模型，并在事件调度线程上一次性替换模型。这个`SwingWorker`类最适合这个。

# javascript - 如何从 document.getElementById() 中获取 UniqueID？

> ID：12293563
> 
> 赞同：0
> 
> 时间：2012-09-06T05:35:30.207
> 
> 标签：javascript, asp.net, dopostback, unique-id

我想使用 __doPostBack javascript 函数。

```
__doPostBack(obj.UniqueID,''); 
```

但我只知道我的对象的 ClientID -

```
ctl00_cpholder_myObjId 
document.getElementById("ctl00_cpholder_myObjId").id //This will get ctl00_cpholder_myObjId,but UniqueID is ctl00$cpholder$myObjId 
```

如何获得 PostBack 的 UniqueID？我可以简单地将“_”替换为“$”吗？
感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T05:39:24.173

如果您有客户端 ID 并想从 javascript 中获取唯一 ID，您可以尝试

```
var uniqueId = document.getElementById("ctl00_cpholder_myObjId").name; 
```

或者

```
var uniqueId = document.getElementById("ctl00_cpholder_myObjId").getAttribute("name"); 
```

name 属性将返回唯一的 id。

# wpf - WPF 文档查看器导出为 PDF

> ID：12293568
> 
> 赞同：0
> 
> 时间：2012-09-06T05:36:07.107
> 
> 标签：wpf, visual-studio-2010, c#-4.0, wpf-controls, documentviewer

您好我正在使用 WPF 文档查看器来查看文档有没有办法将文档保存为 PDF？

```
<DocumentViewer Name="documentViewer" /> 
```

我正在使用[WPFReports](http://wpfreports.codeplex.com)生成报告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T06:15:43.913

据我所知，不，你不能。但是，您可以将 DocumentViewer 渲染为 XPS，然后将其渲染为 PDF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-03T05:07:06.347

```
<Label>
  <Hyperlink Click="lnkSelectDocument_Click">
    <Label Content="{Binding ShortFielName}">
    </Label>
  </Hyperlink> 
</Label>

private void lnkSelectDocument_Click(object sender, RoutedEventArgs e) {
  try {
    System.Diagnostics.Process process = new System.Diagnostics.Process();
    string path = "d:\\test.doc";
    Uri pdf = new Uri(path, UriKind.RelativeOrAbsolute);
    process.StartInfo.FileName = pdf.LocalPath;
    process.Start();
    process.WaitForExit();
  } catch (Exception error) {
    MessageBox.Show("Could not open the file.", "Error", MessageBoxButton.OK,
      MessageBoxImage.Warning);
  }
} 
```

# perl - 在 Perl Win32::Guitest 上需要帮助

> ID：12293575
> 
> 赞同：0
> 
> 时间：2012-09-06T05:36:55.693
> 
> 标签：perl

如何使用`Win32::GuiTest`自动化在“查看可用网络”窗口中访问（连接）特定无线网络。

这是查看可用网络窗口：

![在此处输入图像描述](../Images/90e70ce0168b605cd9bb782464878a2b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:05:21.197

您是否需要使用 Win32::GuiTest 模块？

如果没有，[Win32::Wlan](http://search.cpan.org/~corion/Win32-Wlan/lib/Win32/Wlan.pm)将允许您在 Windows 上管理无线网络连接。

# iphone - 如何在 iphone 的应用程序开始时显示活动指示器

> ID：12293576
> 
> 赞同：0
> 
> 时间：2012-09-06T05:36:56.923
> 
> 标签：iphone, uiactivityindicatorview

我有一个应用程序，如果本地数据库中有数据，那么它会在启动应用程序之前先将其上传到服务器我已经在应用程序 Deleage 中编写了上传代码我希望在上传时如何显示带有警报的活动指示器。通常很容易显示 startAnimating 和 Stop ，但是在这种情况下怎么办？

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

     [self copyDatabaseIfNeeded];

     NSMutableArray *tempArray = [[NSMutableArray alloc] init];
     self.coffeeArray = tempArray;
     [tempArray release];

     [Coffee checkData:[self getDBPath]];

  int mytestcount=rowCount;
        NSLog(@"My Test ROw Count IS %d",mytestcount);

    if (mytestcount=0) {

    NSLog("No Data To Upload");

    }

   else {

    [Coffee getInitialDataToDisplay:[self getDBPath]];

    [self uploadData];
   }

   [self.window addSubview:[navigationController view]];

       [self.window makeKeyAndVisible];

       return YES;
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T06:02:53.817

显示`UIActivityIndicator`此操作需要将其放入**appDelegate的****didFinishLaunchingWithOptions**中。在不同的线程中进行上传，只要进行操作，就会显示指标。变化如下：

 **```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

        [self copyDatabaseIfNeeded];
        NSMutableArray *tempArray = [[NSMutableArray alloc] init];
        self.coffeeArray = tempArray;
        [tempArray release];
        [Coffee checkData:[self getDBPath]];
        int mytestcount=rowCount;
        NSLog(@"My Test ROw Count IS %d",mytestcount);
        if (mytestcount=0) {
            NSLog("No Data To Upload");
        }
       else {
            [Coffee getInitialDataToDisplay:[self getDBPath]];
            //Set activity indicator here and perform uploading in different thread so that indicator is displayed as long as operation is carried out.  

           [self performSelector:@selector(uploadData) withObject:nil afterDelay:0];
       }
       [self.window addSubview:[navigationController view]];
       [self.window makeKeyAndVisible];
       return YES;
      } 
```

`UIActivityIndicator`在警报中创建一个并不困难的任务。你可以这样做：

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@" " message:@" " delegate:self cancelButtonTitle:nil otherButtonTitles:nil];
UIActivityIndicatorView *progress= [[UIActivityIndicatorView alloc] initWithFrame:CGRectMake(125, 50, 30, 30)];
progress.activityIndicatorViewStyle = UIActivityIndicatorViewStyleWhiteLarge;
[alert addSubview:progress];
[progress startAnimating];   
[alert show]; 
```

您可以根据需要自定义**警报**。
希望这可以帮助。**

# android - android布局上的简单反式动画第二次不起作用

> ID：12293578
> 
> 赞同：4
> 
> 时间：2012-09-06T05:36:59.450
> 
> 标签：android, android-layout, android-animation

我的xml文件如下

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:weightSum="100" >

<!-- top -->

  <LinearLayout
    android:id="@+id/top_container"
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_weight="60"
    android:background="@drawable/xxx" >

  </LinearLayout>

<!-- bottom -->

  <TableLayout
    android:id="@+id/bottom_container"
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_weight="40"
    android:background="@drawable/yyy"
    android:padding="20dip"
    android:stretchColumns="1"
    android:weightSum="2" >

    <TableRow>

     </TableRow>
   </TableLayout>
 </LinearLayout> 
```

动画文件 trans_from_bottom.xml

```
 <translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/linear_interpolator"
    android:duration="1000"
    android:fromYDelta="100%"
    android:toYDelta="0%" /> 
```

动画文件 trans_from_top.xml

```
<translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/linear_interpolator"
    android:duration="1000"
    android:fromYDelta="-100%"
    android:toYDelta="0%" /> 
```

trans_back_to_top.xml

```
<translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/linear_interpolator"
    android:duration="1000"
    android:fillAfter="true"
    android:fromYDelta="0%"
    android:toYDelta="-100%" /> 
```

trans_back_to_bottom.xml

```
 <translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/linear_interpolator"
    android:duration="1000"
    android:fillAfter="true"
    android:fromYDelta="0%"
    android:toYDelta="100%" /> 
```

简单的类如下代码行

```
 topCont =(LinearLayout)findViewById(R.id.top_container);
    botCont =(TableLayout)findViewById(R.id.bottom_container);

    Animation   slidedown = AnimationUtils.loadAnimation(A.this, R.anim.trans_from_top);
    topCont.setAnimation(slidedown);

    Animation   slideup = AnimationUtils.loadAnimation(A.this, R.anim.trans_from_bottom);
    botCont.setAnimation(slideup);

    topCont.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View arg0) {

            Animation   slideup = AnimationUtils.loadAnimation(A.this, R.anim.trans_back_to_top);
            topCont.setAnimation(slideup);

            Animation   slidedown = AnimationUtils.loadAnimation(A.this, R.anim.trans_back_to_bottom);
            botCont.setAnimation(slidedown);

        }
    }); 
```

我试图给出一个水平进出类型的动画，点击事件动画没有得到想要的结果。请建议出了什么问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-06T05:58:24.260

我得到了答案，而不是 setAnimation 使用 startAnimation，一切都按需要正常工作。

# html - 底部表格行到顶部

> ID：12293579
> 
> 赞同：1
> 
> 时间：2012-09-06T05:37:04.640
> 
> 标签：html, html-table

我有下表代码，每一行都包含一个表单。我的问题是，输入和提交所在的底行将位于顶部表格行的顶部。我不知道为什么。有人可以帮忙解释一下为什么底行到最上面吗？

```
<table id="bet_table" width=800px cellspacing=0 cellpadding=1 border-width=1px>
    <tr bgcolor="BF1919" style="color:#fff; font-weight:bold;">
        <td><center>Time</center></td>
        <td><center>Game #</center></td>
        <td><center>Teams</center></td>
        <td><center>Run Line</center></td>
        <td><center>Money Line</center></td>
        <td><center>Total Runs</center></td>
    </tr>
    <tr bgcolor="#F0F0F0">
        <td colspan=6><center><strong>August 28, 2012</strong></center></td>
    </tr>
    <tr bgcolor="#fff">
        <form action="mlb.php?action=update&gameid=" method="post" />
        <td width="130px"><center><input type="text" size="4" name="time" value="7:00" />
        <select name="ampm">
            <option value="AM">A.M.
            <option value="PM">P.M.
        </select></center></td>
        <td width="60px"><center>306</center></td>
        <td>Los Angeles Dodgers<br />Los Angeles Angels</td>
        <td width="150px"><center>                          
        <select name="runline1frac">
            <option value="-1/2">-1&frac12;
            <option value="+1/2">+1&frac12;
        </select> &nbsp; <input type="text" size="4" name="runline1value" value="+120" /><br />
        <select name="runline2frac">
            <option value="-1/2">-1&frac12;
            <option value="+1/2">+1&frac12;
        </select> &nbsp; <input type="text" size="4" name="runline2value" value="-182" /></center></td>
        <td width="80px"><center><input type="text" size="4" name="moneyline1value" value="-132" /><br /><input type="text" size="4" name="moneyline2value" value="+132" /></center></td>
        <td align=right>Total Runs: <input type="text" size="3" name="totalruns" value="6" /> &nbsp; OV &nbsp; <input type="text" size="4" name="totalrunsOvalue" value="-178" /><br />UN &nbsp; <input type="text" size="4" name="totalrunsUvalue" value="+123" /></td>
    </tr>
    <tr colspan=6>
        <center>
            <input type="submit" value="Update" />
            </form>
        </center>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T05:42:48.870

粘贴您的代码并在此处修复：

[http://jsfiddle.net/5nNxB/](http://jsfiddle.net/5nNxB/)

您的最后一个`<tr>`没有`<td>`. 用右边添加它`colspan`。

作为旁注，您的代码不是很干净。将整个表格包裹起来，`<form>`而不是在中间随机插入标签。另外，尽量不要使用内联样式和属性等`bgcolor`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T05:50:22.380

你的代码底部：

```
<tr colspan=6>
    <center>
       <input type="submit" value="Update" />
       </form>
    </center>
</tr> 
```

应该：

```
<tr>
    <td colspan=6>
        <center>
           <input type="submit" value="Update" />
           </form>
        </center>
    </td>
</tr> 
```

标签`form`也放置不正确

# sql - 使用 SQL 中的过程从存储表行中删除空间

> ID：12293582
> 
> 赞同：2
> 
> 时间：2012-09-06T05:37:35.590
> 
> 标签：sql, sql-server, sql-server-2005, stored-procedures

我正在寻找 SQL Server 2005 的存储过程，以删除存储在表中的记录的前导、尾随和其他空格。

基本上，我需要将数据批量插入到我的数据库中，并且我正在处理的表在各种记录中包含空格。以 Pincode/Zip 代码为例，它们之间不能有空格，但我插入的数据在大多数密码中都有空格，例如“ **110 001** ”，但它应该是“ **110001** ”。在其他列中，数据是“**数据**”的形式，它应该是“**数据**”

我已经插入了数据，但是我现在需要对其进行格式化，以便以适当的形式排列它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T05:39:59.167

您应该使用[REPLACE](http://msdn.microsoft.com/en-us/library/ms186862.aspx)。尝试

`REPLACE(Pincode, ' ', '')`

**更新：**

如果需要更新表中的数据

```
UPDATE TableName
SET Pincode = REPLACE(Pincode, ' ', '') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T05:39:45.363

使用带有替换功能的更新[http://msdn.microsoft.com/en-us/library/ms186862.aspx](http://msdn.microsoft.com/en-us/library/ms186862.aspx)

# javascript - jquery使用变量中的名称按类选择元素

> ID：12293587
> 
> 赞同：6
> 
> 时间：2012-09-06T05:37:55.343
> 
> 标签：javascript, jquery, jquery-selectors

我想在 jQuery 中对与某个类名匹配的所有元素做一些事情。类名来自一个变量。如何使用我的变量按类进行选择？

```
var x = $(this).attr('href').slice(1); 
```

这将设置`x`为等于`class`我想要的名称。

现在我想选择具有该类名的所有元素

我尝试这样的东西，但它不起作用

```
$(.x.show().addClass('active').siblings().hide().removeClass('active'); 
```

基本 基本上我想影响所有元素 where`class = x`

最后，我可以在第一个变量赋值中`x`获取我的类，而不是设置类名吗？`array`

即代替

```
var x = $(this).attr('href').slice(1); 
```

我可以这样做[伪代码]：

```
var x = classname is $(this).attr('href').slice(1); 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-06T05:43:12.303

选择器只不过是一个字符串。所以你可以使用

```
$('.' + classname) 
```

where`classname`是一个包含特定类名的变量

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-06T05:45:16.543

尝试像这样更改您的代码

```
$('.' + x).show().addClass('active').siblings().hide().removeClass('active'); 
```

# intersystems-cache - 是否有将每秒全局引用转换为 IOPS 的经验法则？

> ID：12293591
> 
> 赞同：2
> 
> 时间：2012-09-06T05:38:27.720
> 
> 标签：intersystems-cache, san

在为缓存数据库调整存储大小时，我对 GREF/s 有所了解，但我需要将其转换为 IOPS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T07:25:42.930

[在mgstat](http://docs.intersystems.com/cache20121/csp/docbook/DocBook.UI.Page.cls?KEY=GCM_mgstat#GCM_C136212)
视图列中监控性能
PhyRds - 从磁盘进行的物理读取。
PhyWrs - 对磁盘的物理写入。

# java - 适用于 Android 的财务 API

> ID：12293593
> 
> 赞同：5
> 
> 时间：2012-09-06T05:38:34.143
> 
> 标签：java, android, api, yahoo-finance, google-finance

我正在尝试制作一个新应用程序，我想获得股票更新、货币兑换更新等。您能否推荐一些免费的 API 来获得这些更新？我已经尝试过：

1）**谷歌金融API**。*不使用的原因：*已弃用并即将关闭，这将使我的应用程序过时。

2)**雅虎财经 API**。*不使用的原因：*没有适当的文档。原因是 yahoo 实际上没有财务 API。似乎有些人已经对他们用来提取财务数据的 API 进行了逆向工程，但他们违反了雅虎的服务条款。我不想那样做。（从[http://developer.yahoo.com/forum/General-Discussion-at-YDN/Using-Yahoo-Finance-API-Not-RSS-/1250246255000-0b82f8f0-7f48-3af2-8fe2-e73a138cbfaa](http://developer.yahoo.com/forum/General-Discussion-at-YDN/Using-Yahoo-Finance-API-Not-RSS-/1250246255000-0b82f8f0-7f48-3af2-8fe2-e73a138cbfaa)阅读）

如果提供了指向某些资源或代码的链接，那就太好了。我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T10:55:53.927

现在用yql。

询问：`"http://query.yahooapis.com/v1/public/yql?q=select%20rate%2Cname%20from%20csv%20where%20url%3D'http%3A%2F%2Fdownload.finance.yahoo.com%2Fd%2Fquotes%3Fs%3D" + from + to + "%253DX%26f%3Dl1n'%20and%20columns%3D'rate%2Cname'&format=json&callback=parseExchangeRate"`

代码片段：

```
private static String convertStreamToString(InputStream is) {
    /*
     * To convert the InputStream to String we use the
     * BufferedReader.readLine() method. We iterate until the BufferedReader
     * return null which means there's no more data to read. Each line will
     * appended to a StringBuilder and returned as String.
     */
    BufferedReader reader = new BufferedReader(new InputStreamReader(is));
    StringBuilder sb = new StringBuilder();

    String line = null;
    try {
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            is.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    return sb.toString();
}

/*
 * This is a test function which will connects to a given rest service and
 * prints it's response to Android Log with labels "Praeda".
 */
public static String[] connect(String url) {
    HttpClient httpclient = new DefaultHttpClient();
    String[] str = new String[5];

    // Prepare a request object
    HttpGet httpget = new HttpGet(url);

    // Execute the request
    HttpResponse response;
    try {
        response = httpclient.execute(httpget);
        // Examine the response status
        Log.d(TAG, response.getStatusLine().toString());

        // Get hold of the response entity
        HttpEntity entity = response.getEntity();
        // If the response does not enclose an entity, there is no need
        // to worry about connection release

        if (entity != null) {

            // A Simple JSON Response Read
            InputStream instream = entity.getContent();
            String result = convertStreamToString(instream);
            result=result.replace("parseExchangeRate(", "").replace(");", "");
            Log.d(TAG, result);

            // A Simple JSONObject Creation
            JSONObject json = new JSONObject(result);
            Log.d(TAG, "<jsonobject>\n" + json.toString()
                    + "\n</jsonobject>");

            // A Simple JSONObject Parsing
            // JSONArray nameArray=json.names();
            // Log.i("query",nameArray.toString());
            // JSONObject query=json.getJSONObject("query");
            // Log.i("query",query.toString());
            // JSONArray results=query.getJSONArray("results");
            // Log.i("rslts",results.toString());
            // JSONArray quote=results.getJSONArray("quote");
            // JSONObject quote=results.getJSONObject("quote");
            // Log.i("quote",quote.toString());
            JSONObject query = json.getJSONObject("query");
            Log.d(TAG, query.toString());
            JSONObject results = query.getJSONObject("results");
            Log.d(TAG, results.toString());
            JSONObject quote = results.getJSONObject("row");
            Log.d(TAG, quote.toString());
            for (int i = 0; i < quote.length(); i++) {

                // Log.i("Praedafor","<jsonname"+i+">\n"+nameArray.getString(i)+"\n</jsonname"+i+">\n"
                // +"<jsonvalue"+i+">\n"+valArray.getString(i)+"\n</jsonvalue"+i+">");
                // JSONObject quotes = results.getJSONObject(i)
                // .getJSONObject("quote");
                // Log,i
                // Log.i("name",quote.getString("Name"));
                // Log.i("name","pahunch");
                // Log.i("name",quote.getString("Symbol"));

                // Log.i("name",quote.getString("DaysLow"));

                // Log.i("name",quote.getString("DaysHigh"));

                // Log.i("name",quote.getString("Open"));

                // Log.i("name",quote.getString("PreviousClose"));
                String symbol = quote.getString("rate");
                str[0] = symbol;
                String dayslow = quote.getString("DaysLow");
                str[1]=dayslow;
                // tv1.setText(quote.getString("DaysLow"));
                str[2]= quote.getString("DaysHigh");
                str[3]= quote.getString("Open");
                str[4]= quote.getString("Change");
            }

            // A Simple JSONObject Value Pushing
            // json.put("execution-start-time", "sample value");
            Log.d(TAG, "<jsonobject>\n" + json.toString()
                    + "\n</jsonobject>");
            // Log.i("Praeda12",json.get("").toString());

            // Closing the input stream will trigger connection release
            instream.close();
        }

    } catch (ClientProtocolException e) {
        Log.d(TAG, "ClientProtocolException");
        e.printStackTrace();
    } catch (IOException e) {
        Log.d(TAG, "IOException " + e.getMessage());
        e.printStackTrace();
    } catch (JSONException e) {
        Log.d(TAG, "JSONException " + e.getMessage());
        e.getMessage();
    }
    return str;
} 
```

# sql - SQL第二列依赖于第一列值

> ID：12293595
> 
> 赞同：1
> 
> 时间：2012-09-06T05:38:51.057
> 
> 标签：sql

我有两列的表格

现在，如果我插入或更新值为 0 的 column1，column2 不应该接受任何值并且应该为 null

他们有什么方法可以添加这个约束吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T05:42:14.797

如果您使用的是 SQL Server，则可以查看使用[CHECK Constraints](http://msdn.microsoft.com/en-us/library/ms188258%28v=sql.105%29.aspx)

看看下面的例子

```
CREATE TABLE #Table(
        column_1 INT,
        column_2 VARCHAR(250)
)

ALTER TABLE #Table
ADD CONSTRAINT chkRow CHECK ((column_1 = 0 AND column_2 IS NULL) OR column_1 != 0)

INSERT INTO #Table SELECT 0, NULL
INSERT INTO #Table SELECT 0, 'TEST'

INSERT INTO #Table SELECT 1, 'TEST'

UPDATE #Table
SET     column_1 = 0
WHERE   column_1 = 1

SELECT  *
FROM    #Table

DROP TABLE #Table 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T05:56:05.617

创建表时，您可以通过`CHECK`以下方式添加约束：

```
CREATE TABLE tableDemo (
   column1  int, 
   column2  varchar(50),
   CONSTRAINT CK_column1_column2 CHECK ((column1 = 0 AND column2 IS NULL) OR column1 != 0)
) 
```

查看**[SQLFIDDLE](http://sqlfiddle.com/#!3/44cea)**

# javascript - 如何将 XML 数据导入 Javascript 以用作热图层的数据？

> ID：12293599
> 
> 赞同：2
> 
> 时间：2012-09-06T05:39:12.723
> 
> 标签：javascript, xml, google-maps-api-3

我正在尝试使用 Google Maps API 在 Google Maps 上添加一个热图图层，并已成功制定了 Google 开发人员提供的默认文档。但是，我想通过使用 PHP 从 MySQL 生成的 XML 数据添加“位置”和“重量”。但我得到的只是谷歌地图图像的 HTML 输出，而热图图层没有出现。Google Maps JavaScript API v3 示例：热图层 html { height: 100% } body { height: 100%; 边距：0；填充：0 } #map_canvas{ 高度：100%;} src="link"

```
 var heatMapData=[];//empty array to store objects
 var heatmap;
 var pointArray;

    function initialize() {
    var mapOptions = {
      zoom: 2,
      center: new google.maps.LatLng(22.5697, 88.3697),
      mapTypeId: google.maps.MapTypeId.SATELLITE
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"),
        mapOptions);

         function downloadUrl(url, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
 }
 function doNothing() {}

 downloadUrl("phpsqlajax_genxml_heatmap.php", function(data) {
       var xml = data.responseXML;
       var markers = xml.documentElement.getElementsByTagName("marker");
 for (var i = 0; i<markers.length; i++) { //loop through nodes getting info
    var point = new google.maps.LatLng(
    parseFloat(markers[i].getAttribute("lat")),
    parseFloat(markers[i].getAttribute("lng")));
    var intensity = markers[i].getAttribute("intensity");
    var hObj =  { //create object
    location: point,
    weight : intensity
    };

 heatMapData.push(point); //push object onto array

          } 
 });
   pointArray = new google.maps.MVCArray(heatMapData); //convert array to MVC array
   heatmap = new google.maps.visualization.HeatmapLayer({
      data: heatMapData
    }); //create heat map object

    heatmap.setMap(map); //display heat map on map
}
function toggleHeatmap() {
    heatmap.setMap(heatmap.getMap() ? null : map);
  }

  function changeGradient() {
    var gradient = [
      'rgba(0, 255, 255, 0)',
      'rgba(0, 255, 255, 1)',
      'rgba(0, 191, 255, 1)',
      'rgba(0, 127, 255, 1)',
      'rgba(0, 63, 255, 1)',
      'rgba(0, 0, 255, 1)',
      'rgba(0, 0, 223, 1)',
      'rgba(0, 0, 191, 1)',
      'rgba(0, 0, 159, 1)',
      'rgba(0, 0, 127, 1)',
      'rgba(63, 0, 91, 1)',
      'rgba(127, 0, 63, 1)',
      'rgba(191, 0, 31, 1)',
      'rgba(255, 0, 0, 1)'
    ]
    heatmap.setOptions({
      gradient: heatmap.get('gradient') ? null : gradient
    });
  }

  function changeRadius() {
    heatmap.setOptions({radius: heatmap.get('radius') ? null : 20});
  }

  function changeOpacity() {
    heatmap.setOptions({opacity: heatmap.get('opacity') ? null : 0.2});
  }
</script>
</head>
<body onload="initialize()">
<div id="map_canvas" style="height: 600px; width: 800px;">
</div>
<button onclick="toggleHeatmap()">Toggle Heatmap</button>
<button onclick="changeGradient()">Change gradient</button>
<button onclick="changeRadius()">Change radius</button>
<button onclick="changeOpacity()">Change opacity</button>
</body>
</html> 
```

# c# - 当 BackgroundWorker() 运行时 UI 挂起

> ID：12293601
> 
> 赞同：1
> 
> 时间：2012-09-06T05:39:24.133
> 
> 标签：c#, wpf, multithreading, backgroundworker

我在我的 wpf 应用程序中使用 BackgroundWorker 进行线程处理。但这会使 UI 挂起，因为我无法单击 UI 的任何位置。这是我的代码片段：

```
private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        BackgroundWorker worker = new BackgroundWorker();
        worker.DoWork += delegate(object s, DoWorkEventArgs args)
        {
            Dispatcher.Invoke(new Action(() => ConnectFtp()));
        };
        worker.RunWorkerAsync();
    }

private void ConnectFtp()
{
     try
        {
            int port = string.IsNullOrEmpty(txtport.Text) ? 21 : Convert.ToInt32(txtport.Text);
            if (ftpserver1 == null)
            {
                ftpserver1 = new FtpClient(txtftpserver.Text, port);
                ftpserver1.ServerResponse += new EventHandler<FtpResponseEventArgs>(ftpserver2_ServerResponse);
                ftpserver1.ClientRequest += new EventHandler<FtpRequestEventArgs>(ftpserver2_ClientRequest);
                ftpserver1.TransferProgress += new EventHandler<TransferProgressEventArgs>(ftpserver2_TransferProgress);
                ftpserver1.TransferComplete += new EventHandler<TransferCompleteEventArgs>(ftpserver2_TransferComplete);
            }
            if (!ftpserver1.IsConnected)
            {
                Run r = new Run("Server1 Status:    Resolving address of " + txtftpserver.Text + "\n" + "Server1 Status:    Connection established, waiting for welcome message... \n");
                r.Foreground = System.Windows.Media.Brushes.Black;
                msg.Inlines.Add(r);
                msgscroll.ScrollToBottom();                   
                ftpserver2_OpenAsyncCompleted(ftpserver1, txtusername.Text, txtpassword.Password);
            }
        }
        catch { }
} 
```

在 ConnectFtp() 方法中，我连接到 ftp 服务器。当 ftp 服务器的连接状态为“正在连接”时，UI 不起作用。但完成连接后一切正常！请帮帮我！提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T05:42:16.977

您正在调用该方法的工作人员内的 UI 线程`ConnectFTP`。你需要有这个...

```
BackgroundWorker _worker = new BackgroundWorker();
private void Window_Loaded(object sender, RoutedEventArgs e)
{
    _worker.DoWork += delegate(object s, DoWorkEventArgs args)
    {
        ConnectFtp();
    };
    _worker.RunWorkerAsync();
}

private void ConnectFtp()
{
 //here i'm connecting to a ftp server. 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T05:56:17.987

您正在将完整的方法从后台工作人员转储到 UI 线程[Dispatcher 。](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.aspx)这里

```
Dispatcher.Invoke(new Action(() => ConnectFtp()));

private void Window_Loaded(object sender, RoutedEventArgs e)
{
        BackgroundWorker worker = new BackgroundWorker();
        worker.DoWork += delegate(object s, DoWorkEventArgs args)
        {
            ConnectFtp();
        };
        worker.RunWorkerAsync();
}

private void ConnectFtp()
{
     // Here i'm connecting to a ftp server. 
     // Do some I/O operation
     // Now time to update UI controls so we invoke on Dispatcher UI thread
     Dispatcher.Invoke(new Action(() =>
     {
         lblMessage.Text = "Process finished";
         // Some other UI updates..
     }));
} 
```

我想最好利用 .NET 4.0 中可用的[Task Parallel](http://msdn.microsoft.com/en-us/library/dd460717.aspx) Api，它在多核系统上运行良好，即真正的并行线程。使用 TPL 的优点是它对变量和 UI 元素使用闭包，因此您可以访问不同线程上的值，如果有时它不起作用，则在 Task 启动之前创建局部变量并在 Action 方法主体中使用它并使用 Dispatcher 更新 UI 控件调用..

例如：

```
using System.Threading;
using System.Threading.Tasks;

private void Window_Loaded(object sender, RoutedEventArgs e)
{
        Task TWorkOnFTP = new TaskFactory().StartNew(ConnectFtp);
}

private void ConnectFtp()
{
     // Here i'm connecting to a ftp server. 
     // Do some I/O operation
     // Now time to update UI controls so we invoke on Dispatcher UI thread
     Dispatcher.Invoke(new Action(() =>
     {
         lblMessage.Text = "Process finished";
         // Some other UI updates..
     }));
} 
```

其他相关参考：

*   [任务并行库的代码项目文章](http://www.codeproject.com/Articles/152765/Task-Parallel-Library-1-of-n)：
*   [BackgroundWorker 的任务并行库替换](https://stackoverflow.com/questions/3513432/task-parallel-library-replacement-for-backgroundworker)
*   [报告任务进度](http://nitoprograms.blogspot.in/2010/06/reporting-progress-from-tasks.html)

## 更新

根据更新的问题，TPL 可以按如下方式使用：

```
 //Closures
    var strPort = txtport.Text;
    var strFTPServer = txtftpserver.Text;
    var strUserName = txtusername.Text;
    var strPassword = txtpassword.Password;

    //Start Task thread
    Task TProcessFTP = new TaskFactory().StartNew(new Action(() =>
    {
        try
        {
            int port = string.IsNullOrEmpty(strPort) ? 21 : Convert.ToInt32(strPort);
            if (ftpserver1 == null)
            {
                ftpserver1 = new FtpClient(strFTPServer, port);
                ftpserver1.ServerResponse += new EventHandler<FtpResponseEventArgs>(ftpserver2_ServerResponse);
                ftpserver1.ClientRequest += new EventHandler<FtpRequestEventArgs>(ftpserver2_ClientRequest);
                ftpserver1.TransferProgress += new EventHandler<TransferProgressEventArgs>(ftpserver2_TransferProgress);
                ftpserver1.TransferComplete += new EventHandler<TransferCompleteEventArgs>(ftpserver2_TransferComplete);
            }
            if (!ftpserver1.IsConnected)
            {
                //Update UI Controls
                Dispatcher.Invoke(new Action(() =>
                {
                    Run r = new Run("Server1 Status:    Resolving address of " + txtftpserver.Text + "\n" + "Server1 Status:    Connection established, waiting for welcome message... \n");
                    r.Foreground = System.Windows.Media.Brushes.Black;
                    msg.Inlines.Add(r);
                    msgscroll.ScrollToBottom();
                    ftpserver2_OpenAsyncCompleted(ftpserver1, strUserName, strPassword);
                }));
            }
        }
        catch { }
    })); 
```

# python - Redhat 上的 easy_install lxml 错误

> ID：12293603
> 
> 赞同：1
> 
> 时间：2012-09-06T05:39:48.833
> 
> 标签：python, lxml, scrapy

我尝试了几种安装lxml的方法（实际上我需要安装Scrapy，这取决于安装的lxml），easy_install，pip，从源代码构建，但它们没有成功。

现在我使用：STATIC_DEPS=true easy_install lxml。但出现以下错误：

> /usr/bin/ld: /tmp/easy_install-mptFTT/lxml-3.0alpha2/build/tmp/libxml2/lib/libexslt.a(exslt.o): 重定位 R_X86_64_32 反对 `a local symbol' 制作时不能使用共享对象；使用 -fPIC /tmp/easy_install-mptFTT/lxml-3.0alpha2/build/tmp/libxml2/lib/libexslt.a 重新编译：无法读取符号：值错误

不知道错误是什么意思。我使用 Python 2.7.3。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-09-07T07:05:45.470

也许您需要在 ubuntu 中安装 libxml2-dev 和 libxslt-dev 执行 sudo apt-get install libxml2-dev libxslt-dev

# .htaccess - 子域上的 mod_rewrite

> ID：12293605
> 
> 赞同：0
> 
> 时间：2012-09-06T05:39:52.827
> 
> 标签：.htaccess, mod-rewrite, cdn, cname

**花了 12 个小时，stackoverflow 上的十几个帖子变成了紫色，但仍然不知道我做错了什么**

我试图在 .htaccess 上**使用 mod_rewrite 设置无 cookie 域**，将子域（a1、a2、a3、a4、a5）重写为 root。

这是我到目前为止所得到的..

```
RewriteCond %{HTTP_HOST} ^a1.my-domain.com [NC]
RewriteRule ^(.*)$ http://www.my-domain.com/$1 [R=301,NC] 
```

然后，我上传到根目录并使用此代码从浏览器打开一个 php 文件

```
<img src="http://a1.my-domain.com/images/imgname.jpg"> 
```

也试过直接去网址

```
http://a1.my-domain.com/images/imgname.jpg
http://a1.my-domain.com/ 
```

但两者都不起作用，图像没有显示，*而 .htaccess 中的其他代码工作正常*。您能否就此提出解决方案？

/////////////**编辑更多信息**/////////////

根据 - [http://www.stoimen.com/blog/2010/03/12/use-cookie-free-domain-and-cdn-for-static-content/](http://www.stoimen.com/blog/2010/03/12/use-cookie-free-domain-and-cdn-for-static-content/) - 我想在不移动的情况下设置一个 Cookie 免费域资源到子域并创建一个并行加载，据我了解，它会在网站加载时增加连接，同时使其无 cookie。

我想加载下面的html

```
<img src="http://www.my-domain.com/images/imageA.jpg">
<img src="http://www.my-domain.com/images/imageB.jpg">
<img src="http://www.my-domain.com/images/imageC.jpg"> 
```

使用下面的这些（将 'a*.my-domain.com' 指向 'www.my-domain.com'）

```
<img src="http://a1.my-domain.com/images/imageA.jpg">
<img src="http://a2.my-domain.com/images/imageB.jpg">
<img src="http://a3.my-domain.com/images/imageC.jpg"> 
```

通过阅读有关 Cookie-Free 的信息，我只需要创建一个子域并将其指向根 www，但是，由于我的主机提供 DirectAdmin 控制面板，我无法将子域指向任何地方，除了带有其名称的子文件夹而且我没有访问 Apache 以修改虚拟主机配置。所以，我尝试使用 .htaccess 来做到这一点。你能建议怎么做吗？我对此很陌生，所以如果我误解了，请纠正我。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:10:07.103

偏离您在评论中所说的内容，听起来您正试图通过跨多个主机名传播内容来增加加载时间，因此并行加载更多内容。

A 记录是一个主机 - 如果您想要一个物理子目录目录，您可以使用它。

CNAME 是别名，指向另一个地址。如果您愿意，它只是一个掩盖其他内容的“漂亮 URL”。

听起来您需要 CNAME，而不是 A 记录。

与我之前的评论不同，据我所知，您需要指定所有 CNAME。每个 CNAME 等都`a1` `a2`将指向您的根域。

`a1.domain.com`然后，您需要在 Web 控制面板中为您的域添加别名。

指定每个主机名并使用 .htaccess 文件将其重定向。

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^subdomain\.* [NC]
RewriteRule .* http://www.domain.tld/subdomain/ [L] 
```

我不确定，但传播在这里*可能*是一个问题，我忘记了 CNAMES 是否可以立即访问......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T05:46:20.087

而不是使用

```
RewriteCond %{HTTP_HOST} ^a1.my-domain.com [NC]
RewriteRule ^(.*)$ http://www.my-domain.com/$1 [R=301,NC] 
```

为什么不试试这个

```
RewriteRule ^a1.my-domain.com$ http://www.my-domain.com/a1 [L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T05:57:21.903

怎么样

```
RewriteCond %{HTTP_HOST}   !^www\.my-domain\.com [NC]
RewriteCond %{HTTP_HOST}   !^$
RewriteRule ^/?(.*)         http://www.my-domain.com/$1 [L,R,NE] 
```

来自[Apache 文档](https://httpd.apache.org/docs/current/rewrite/remapping.html)？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-13T12:49:53.383

```
RewriteEngine On
RewriteBase /
RewriteRule ^forums$|^forums/$ index.php [R,L]
RewriteRule ^forums/([-_a-zA-Z0-9]{3,30})$ forums/$1/ [R,L]
RewriteRule ^forums/([-_a-zA-Z0-9]{3,30})/(.*)$ phpBB3/$2?access_name=$1 [QSA,L]
```

此代码如何在子域中更改而不是 example.com/forums/test 并变得如此 test.example.com

# android - 从现有的 Apk 重新生成新的动态 Apk

> ID：12293609
> 
> 赞同：1
> 
> 时间：2012-09-06T05:40:23.613
> 
> 标签：android, apk

假设在站点上我有一个带有站点的在线 JSON 数据的 apk，现在依赖于该 apk 我想用新的 JSON 数据重新生成新的 apk 文件，并且需要来自 Manifest 文件的应用程序图标也动态更改，并且包名称也动态重命名，资源图标应该是动态变化的，想要动态的放到网站上。

怎么可能？

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T05:52:14.450

您需要使用 ant/maven 或您选择的任何构建工具，然后执行以下操作：

1）首先为您的活动创建包，它将是应用程序包名称，所有其他活动将在不同的包中（不是当前活动的子包）

2）使用正则表达式任务（我知道ant和maven有这样的）来替换清单中的包名和你的第一个活动中的包名 2.1）使用复制任务将第一个活动复制到新的包目录中

3) 现在我们需要为 json 数据复制不同的图标和 url。使用复制任务为当前配置复制新图像。我建议创建文件夹结构 config/{config_name}/drawable/icon.png 和 config/{config_name}/values/config.xml （config.xml 是具有某种 json_data_url 资源的 android 资源文件）然后对于自定义复制任务，您将有不同的 json 数据和应用程序图标。

4）创建开关配置任务，这将调用2nd和3rd来做你想要的应用程序

# android - ListView 中的 setOnItemClickListener VS setOnItemSelectedListener。

> ID：12293615
> 
> 赞同：15
> 
> 时间：2012-09-06T05:41:26.963
> 
> 标签：android, listview, android-listview, onclicklistener, onitemclicklistener

我希望在 ListView 的项目上设置一个 onClickListener，但我看到了两种方法`setOnItemClickListener`和`setOnItemSelectedListener`. 我没有在官方文档中找到对这两者的任何合理解释。哪一个用于什么目的？

要选择一个项目，用户必须单击该项目，那么不同的方法有什么用？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-06T05:54:43.150

它像是

单击项目（单选）与选择项目（用于多选）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T05:50:53.877

它们的描述中介绍了这些方法之间的区别：

```
has been selected vs has been clicked 
```

实际上，区别与Android术语中的*selected*和*clicked*之间的区别是一样的。选择它更像是高亮，请参阅[此处有关](http://developer.android.com/guide/topics/resources/drawable-resource.html)*选择*状态的更详细说明（在 android:state_selected 下）。单击与 android 术语中的*按下*相同，并在相同的链接下但在 android:state_pressed 下进行了描述。

 ** * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-06T05:45:42.673

不一定是真的。您可以拥有一个可以使用键盘或加速度计导航的 ListView。同样，单击一个项目并不一定意味着选择它 - 可能在您想要阻止选择之后选择某些内容直到发生其他事件。

出于所有目的，如果您想对项目的选择做出反应，请使用 ，`setOnItemSelectedListener`但如果您想对用户单击它们做出反应，请使用`setOnItemClickListener`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T05:46:36.120

我认为`OnItemSelectedListener`当使用键盘的导航键或使用 tackball 选择列表中的项目时调用。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-06T07:28:00.797

I am not sure but it is my opinion.Might be wrong. setOnItemClickListener:Register a callback to be invoked when an item in this AdapterView has been clicked.It always return true.

setOnItemSelectedListener:Register a callback to be invoked when an item in this AdapterView has been clicked.it return true and also false. If not selected any item then it will show nothing is selected.It is just force to user that select an option.Select an item and go next just kind of that. But when user forgot to select an item then if will remembered also user that he did not select any option.*

# android - 如何显示osm图

> ID：12293617
> 
> 赞同：1
> 
> 时间：2012-09-06T05:41:30.227
> 
> 标签：android

我有一个选项卡选项卡，单击此选项卡时，我想将内容设置为 OSM 地图（其 setContent() ）。我正在这样做：

```
View bottomMap = createBottomTabView(bottomTabHost.getContext(), "Map", R.drawable.map);
bottomTabHost.addTab(bottomTabHost.newTabSpec("Map").setIndicator(bottomMap).setContent(new Intent(this, OSMMapClass.class)));

public class MapBottomTab extends MapActivity 
{
      @Override
      public void onCreate(Bundle savedInstanceState) 
      {
         super.onCreate(savedInstanceState);
         org.osmdroid.views.MapView mapView = new org.osmdroid.views.MapView(this, 256);
         setContentView(mapView);
      }
} 
```

加载地图的更改应该是什么......？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:17:54.400

您只需要在 LinearLayout 中的 xml 中定义地图布局，例如这样

```
 <LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:id="@+id/mapLayoutFinal"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <!-- you do your map layout (<org.osmdroid.views.MapView ... /> ) -->

    </LinearLayout> 
```

然后你在你的活动中声明这个布局的创建方法是这样的：

```
 super.onCreate(savedInstanceState);
    setContentView(R.layout.main_fragment);
LinearLayout rl = (LinearLayout) findViewById(R.id.mapLayoutFinal);
    this.mOsmv.setLayoutParams(new LinearLayout.LayoutParams(
            LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
    rl.addView(mOsmv); 
```

这应该有效。PS：我使用离线 osmdroid，我只定义了活动中的所有内容，并且只定义了一个线性布局，我在那里粘贴了我的视图。

# iphone - 无法启动应用程序

> ID：12293620
> 
> 赞同：0
> 
> 时间：2012-09-06T05:41:45.590
> 
> 标签：iphone

错误：无法启动'/Users/imobdevtech/Library/Developer/Xcode/DerivedData/timesync-ajuwdrwsixqrnodrkmfmwjpptbmq/Build/Products/Debug-iphoneos/timesync.app/timesync' - 未能发送 qLaunchSuccess 数据包

这是我第一次将应用程序安装到 Devic 时遇到的错误。它安装完美，但无法启动。在第二次尝试它完美地工作。任何人都可以帮助解决这个问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T06:09:10.043

最后，我从该网站的一位初学者那里得到了答案。

解决方案是首先从设备的任务栏中删除当前正在运行的应用程序（通过双击设备的主页按钮），然后安装您的新版本。

因为我在已经运行应用程序的设备中安装应用程序，它会产生这样的问题。

# ios - 表格视图和页脚

> ID：12293636
> 
> 赞同：0
> 
> 时间：2012-09-06T05:42:59.757
> 
> 标签：ios, objective-c, uitableview

我有`UITableView`大约 40 件物品。这些项目例如是 1A、1B、1C 等。我想为所有带有 2 的行添加一个页脚，还为 2,3 和 4 添加一个页脚。我将所有项目都放在`NSDictionary`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T19:46:53.057

您需要将您的设置`UITableViewController`为 a`UITableViewDelegate`和 a `UITableViewDataSource`。

您应该阅读这些文档，并学习有关该主题的许多教程中的一些。这是我很快找到的一个：

[http://adeem.me/blog/2009/05/19/iphone-programming-tutorial-part-1-uitableview-using-nsarray/](http://adeem.me/blog/2009/05/19/iphone-programming-tutorial-part-1-uitableview-using-nsarray/)

# perl - 为什么 perl 解析 $x | $y | $z 作为 $z | ($x | $y)？

> ID：12293640
> 
> 赞同：6
> 
> 时间：2012-09-06T05:43:17.993
> 
> 标签：perl, parsing, operator-overloading

（编辑：`pipe`下面的函数应该返回一个受祝福的对象，以便重载正常工作。请参阅接受的答案。）

我正在尝试使用 perl 的`overload`功能来构建一个简单的解析树。我不需要太多——事实上，我只需要一个左结合运算符。但是 perl 解析的方式`$x op $y`与较长的链（如`$x op $y op $z op ...`.

这是我所拥有的：

```
package foo;

use overload '|' => \&pipe,
             "**" => \&pipe,
             ">>" => \&pipe;

sub pipe { [ $_[0], $_[1] ] }

package main;

my $x = bless ["x"], "foo";
my $y = bless ["y"], "foo";
my $z = bless ["z"], "foo";
my $w = bless ["w"], "foo";

                               # how perl parses it:
my $p2 = $x | $y;              # Cons x y
my $p3 = $x | $y | $z;         # Cons z (Cons x y)
my $p4 = $x | $y | $z | $w;    # Cons w (Cons z (Cons x y))
my $p5 = $z | ($x | $y);       # same as p3???

my $s2 = $x ** $y;             # Cons x y
my $s3 = $x ** $y ** $z;       # Cons x (Cons y z)
my $s4 = $x ** $y ** $z ** $w; # Cons x (Cons y (Cons z w))

sub d { Dumper(\@_) }

say "p2 = ".d($p2);
say "p3 = ".d($p3);
say "p4 = ".d($p4);
say "p5 = ".d($p5);

say "s2 = ".d($s2);
say "s3 = ".d($s3);
say "s4 = ".d($s4); 
```

输出类似于：

```
p2 = [bless( ['x'], 'foo' ),bless( ['y'], 'foo' )]
p3 = [bless( ['z'], 'foo' ),[bless( ['x'], 'foo' ),bless( ['y'], 'foo' )]]
p4 = [bless( ['w'], 'foo' ),[bless( ['z'], 'foo' ),[bless( ['x'], 'foo' ),bless( ['y'], 'foo' )]]]
p5 = [bless( ['z'], 'foo' ),[bless( ['x'], 'foo' ),bless( ['y'], 'foo' )]]

s2 = [bless( ['x'], 'foo' ),bless( ['y'], 'foo' )]
s3 = [bless( ['x'], 'foo' ),[bless( ['y'], 'foo' ),bless( ['z'], 'foo' )]]
s4 = [bless( ['x'], 'foo' ),[bless( ['y'], 'foo' ),[bless( ['z'], 'foo' ),bless( ['w'], 'foo' )]]] 
```

不应该`p2`将 x 和 y 颠倒以与其他情况一致吗？请注意`p3`并`p5`产生相同的输出 - 那么我如何区分它们呢？

我没有看到与右关联运算符相同的问题`**`。

有解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T16:02:48.450

```
use feature ":5.14";
use warnings FATAL => qw(all);
use strict;
use Data::Dump qw(dump pp);

sub foo() 
 {package foo;

  use overload '|' => \&p;

  sub p {bless [@{$_[0]},@{$_[1]}]}
 }

my $x = bless ["x"], "foo";
my $y = bless ["y"], "foo";
my $z = bless ["z"], "foo";

my $p = $x | $y | $z;

pp($p) 
```

产生：

```
bless(["x", "y", "z"], "foo") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T00:12:33.710

重载的运算符处理程序有时会以相反的顺序接收操作数，但 Perl 会在接收时通过将 swapped 参数设置为 true 来通知处理程序。

[过载](http://perldoc.perl.org/overload.html)：

> > 三个参数被传递给 use 重载指令中指定的所有子例程（有一个例外 - 参见 nomethod）。[...]当（且仅当）两个操作数已交换时，第三个参数设置为 TRUE。Perl 可以这样做以确保第一个参数 ($self) 是实现重载操作的对象，符合一般对象调用约定。[...]

您忽略了传递给处理程序的第三个参数。*根本问题是您*忘记从`pipe`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T07:21:28.940

您应该检查 Marpa，我认为解析这样的事情会更好。

[http://blogs.perl.org/users/jeffrey_kegler/2010/05/bnf-parsing-and-linear-time.html](http://blogs.perl.org/users/jeffrey_kegler/2010/05/bnf-parsing-and-linear-time.html)

[https://metacpan.org/pod/Marpa::PP](https://metacpan.org/pod/Marpa::PP)

我认为这是您脚本中的错字：

```
my $p3 = $x || $y || $z; 
```

# python - 在 twisted.web 中使用适配器而不是子类化/包装会话有什么好处？

> ID：12293643
> 
> 赞同：1
> 
> 时间：2012-09-06T05:43:58.960
> 
> 标签：python, twisted

在我看来，使用组件/适配器只是为处理会话增加了额外的臃肿，没有太多明显的好处。仅子类化或包装会话并使用此子类生成会话感觉更简单。
也许我没有看到使用组件和适配器的一些明显好处，所以如果有人可以向我解释这一点，请这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:08:32.027

session 基本上是一本字典。适配器是您可以放入其中的值，接口是您与它们一起使用的键。

子类化带来了一堆问题，没有一个是特定于 Web 或会话状态处理的。它将许多不需要混合的实现问题混合在一起。另一方面，字典只是状态的集合——正是在跟踪会话所需的状态时所需要的。

您的替代想法“只是子类化或包装会话并使用此子类生成会话”非常笼统且有些模棱两可，因此我无法详细解释为什么当前系统可能比它更好。如果您想完整详细地描述您的想法（也许通过提供实现），那么也许有人可以批评它。

# php - Joomla 菜单未显示

> ID：12293644
> 
> 赞同：0
> 
> 时间：2012-09-06T05:44:03.830
> 
> 标签：php, joomla

我对 Joomla 一无所知，但我只需要完成这件事。突然我的 Joomla 网站菜单没有出现。我在菜单管理器-> 主菜单-> 菜单项下看不到任何内容。但是 jos_menu 表中有行。为什么不显示？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T07:11:14.163

看起来 php 升级到 5.3 并且各种问题都出现了。我通过更改以下内容解决了它：

在你的joomla目录/库/joomla/html/html.php

```
return call_user_func_array( array( $className, $func ), $args ); 
```

到

```
return call_user_func_array( array( $className, $func ), &$args ); 
```

在你的joomla目录/modules/mod_mainmenu/helper.php

```
function buildXML(&$params) 
```

到

```
function buildXML($params) 
```

希望这可以帮助某人。

# c# - ObjectStateManager 中已存在具有相同键的对象

> ID：12293646
> 
> 赞同：1
> 
> 时间：2012-09-06T05:44:24.237
> 
> 标签：c#, .net, entity-framework, many-to-many

无法将**多对多**属性保存到数据库。

错误详情：

> ObjectStateManager 中已存在具有相同键的对象。ObjectStateManager 无法跟踪具有相同键的多个对象。

我试图在此操作方法中保存该属性：

```
 [HttpPost]
        public ActionResult Edit(UserRole role)
        {
            var permissionNameList=  (from per in _db.Permissions
                                               select per.Name).Distinct().ToList();
            foreach(var name in permissionNameList)
            {
                role.Permissions.Add(new permission(name, oper));
            }

            if (ModelState.IsValid)
            {
                _db.Entry(role).State = System.Data.EntityState.Modified;
                _db.SaveChanges();
                return RedirectToAction("Index");
            }
            return View(role);
        } 
```

数据库表结构是这样的：

3 表

`userRole`- `permissionsInRoles`-`permission`

```
CREATE TABLE newsmonitoringmanagement.permission
(
Id          INT NOT NULL auto_increment,
Name        VARCHAR (50) NOT NULL,
Description VARCHAR (250) NULL,
Operations  INT NOT NULL,
PRIMARY KEY (Id),
UNIQUE KEY UK_permissionIdentity (Name, Operations)
); 
```

在数据库上下文中：

```
 modelBuilder.Entity<UserRole>()
            .HasMany(usrRole => usrRole.Permissions)
            .WithMany(permisn => permisn.Roles)
            .Map(m =>
            {
                m.ToTable("permissionsInRoles");
                m.MapLeftKey("RoleId");
                m.MapRightKey("PermissionId");
            });

        modelBuilder.Entity<Permission>()
            .HasMany(per => per.Roles)
            .WithMany(role => role.Permissions)
            .Map(m =>
            {
                m.ToTable("permissionsInRoles");
                m.MapLeftKey("PermissionId");
                m.MapRightKey("RoleId");
            }); 
```

* * *

更新，这里的新代码可以工作，但似乎是有线的，因为 arg`role`的`permissions`属性是`empty`

```
var permissionNameList = (from per in _db.Permissions
                                  select per.Name).Distinct().ToList();
        var realRole = (from r in _db.UserRoles
                        where r.Id == role.Id
                        select r).First();

        foreach (var perm in realRole.Permissions)
        {
            var opert = Convert.ToInt32(Request.Form[perm.Name + "_op"]);
            if (perm.Name.InList(permissionNameList))
            {
                perm.Operations = opert;
            }
        }

        if (ModelState.IsValid)
        {
            _db.Entry(realRole).State = System.Data.EntityState.Modified;
            _db.SaveChanges();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:50:48.557

是`name field`权限表中的唯一字段吗？
如果是，那么显然您不能与`name`以前的许可相同，这就是您正在做的事情。
编辑：- 你不能只添加你从数据库获得的权限，因为
我的意思是真的有特殊需要创建
像这样的新权限

```
var permissionList=  (from per in _db.Permissions
                                               select per).Distinct();

            foreach(var permission in permissionList)
            {

                var opert = Convert.ToInt32(Request.Form[name + "_op"]);
                //var per=new Permission();
                //per.Name=name;
                permmission.Operations=opert;
                role.Permissions.Add(permission);
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T02:09:56.263

修改代码以从数据库中检索然后它可以工作。

```
public ActionResult Edit(UserRole role)
{
    var permissionNameList = (from per in _db.Permissions
                              select per.Name).Distinct().ToList();
    var realRole = (from r in _db.UserRoles
                    where r.Id == role.Id
                    select r).First();

    foreach (var perm in realRole.Permissions)
    {
        var opert = Convert.ToInt32(Request.Form[perm.Name + "_op"]);
        if (perm.Name.InList(permissionNameList))
        {
            perm.Operations = opert;
        }
    }

    if (ModelState.IsValid)
    {
        _db.Entry(realRole).State = System.Data.EntityState.Modified;
        _db.SaveChanges();
    }

    this.TempData["msg"] = "[EditRolePermissions]Saved Role Id " + role.Id;
    return RedirectToAction("Details/" + role.Id);
} 
```

# opengl - OpenGL 多纹理混合

> ID：12293649
> 
> 赞同：1
> 
> 时间：2012-09-06T05:45:06.443
> 
> 标签：opengl, shader, blend

我正在尝试实现像photoshop这样的图层功能。这是我想画的..

![http://s19.postimage.org/6n8eejbkz/image.png](../Images/274a3c93921922208834788ca064696a.png)

但它绘制如下

![http://s19.postimage.org/hpdhcz5nn/image.png](../Images/1351a6a651bc68968fd673440d17e954.png)

它使用两层。由 2 个纹理帧缓冲区制成，一个用于背景，另一个用于绘图。纹理与片段着色器混合。

```
mediump  vec4 tex0_color = texture2D(texunit0,TexCoordOut);  // bg texture
mediump  vec4 tex1_color = texture2D(texunit1,TexCoordOut);  // drawing texture 
mediump  vec4 mix_color  = mix(tex0_color,tex1_color,tex1_color.a); 
```

并且在绘图层上的每个绘制都是使用顶点精灵执行的

```
highp float a = DestinationColor.a * texture2D(texunit0,gl_PointCoord).a;
gl_FragColor  = vec4(DestinationColor.rgb,a); 
```

和混合功能设置如下..

```
glEnable    (GL_BLEND);
glBlendFunc (GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); 
```

你能给我一些建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T07:46:53.733

着色器不用于执行混合操作，因为它需要读取和写入目标纹理，这只能同步完成，导致性能非常差。这种同步目前只能在非可编程管道中实现。

您可能会考虑使用两种纹理，一种用于阅读，另一种用于书写。应用画笔后，切换它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T06:26:52.060

我想你在[这](https://stackoverflow.com/questions/5097145/opengl-mask-with-multiple-textures)之后。如果你需要通过 GLSL 实现各种 Photoshop 之类的混合模式，也可以看看[这篇](http://mouaif.wordpress.com/2009/01/05/photoshop-math-with-glsl-shaders/)文章。与使用着色器相比，使用硬件混合非常有限。

# vb.net - 似乎字体间距已更改。为什么会发生？

> ID：12293650
> 
> 赞同：0
> 
> 时间：2012-09-06T05:45:08.727
> 
> 标签：vb.net, visual-studio-2008, windows-7

我开发的 Winform 应用程序有一个奇怪的行为。字体间距变得更大了，因此它影响了按钮的外观和感觉以及整个表单：一些文本被截断，而其他一些文本由于这个额外的间距而丢失。请看一个截图（我只是用两个箭头突出了错误，但你可以看到它发生在文本框、标签等的所有字体中）

我必须说我没有更改应用程序或此主机（Windows 7）设置的任何内容。相同的应用程序在其他 Windows 7 主机上运行良好。

带有红色箭头的屏幕截图展示了它在额外间距下的外观。带有绿色箭头的屏幕截图显示了它在另一台主机上的外观（如预期的那样）。

你知道它为什么会发生以及如何回滚到以前的字体间距吗？谢谢！

![在此处输入图像描述](../Images/7d311131793e47258d726e9d021b71c4.png) ![在此处输入图像描述](../Images/c8646729ce63b8987a62f9c597438dd1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T05:58:23.483

您需要检查`Control Panel --> Appearance and Personalization --> Display`要查看字体文本大小的设置。许多具有更高分辨率显示器的较新的 PC 和笔记本电脑都设置为中等 (125%)。

* * *

编辑。

从评论看来，使用此[Microsoft 文章](http://answers.microsoft.com/en-us/windows/forum/windows_7-desktop/how-to-restore-windows-7-default-fonts/73a8eb3e-3189-4514-b87c-18fcdca4fe26)中记录的有关如何重置默认字体设置的过程有效。

来自链接：

1.  通过单击开始按钮、控制面板、外观和个性化，然后单击字体来打开字体。
2.  在左窗格中，单击字体设置。
3.  单击恢复默认字体设置。

# java - 将动态 bean 添加到 Spring Web 上下文

> ID：12293652
> 
> 赞同：7
> 
> 时间：2012-09-06T05:45:20.687
> 
> 标签：java, spring

我需要能够为在编译时可能或未在类路径中定义的类添加新的 bean 到 Spring Web 上下文（在任何范围内）。

例如，我可以动态地创建一些此类，然后为此类注册一个单例或会话 bean。

我阅读了一些有关 BeanFactoryPostProcessor 的信息，但不确定它是否可以在 Web 上下文中工作，如果我理解正确，它只会在实际加载 bean 实例之前工作，而不是之后，还是我错了？

我无法在 AnnotationConfigWebApplicationContext 中找到有关如何执行此操作的信息，并且至少在我的测试中，我动态创建的所有 bean 都没有注入到其他实例中，即使它们是我也只看到了注册 Singleton 的方法bean 但不适用于其他范围：

```
ctx.getBeanFactory().registerSingleton("dummy", dummy); 
```

PD

我发现了这个问题：[Dynamic creation of beans in Spring](https://stackoverflow.com/questions/8711560/dynamic-creation-of-beans-in-spring)但是当我尝试像这样将任何 bean、bean 定义或 bean 定义构建器添加到 web 上下文时，bean 不会被加载：

```
AnnotationConfigWebApplicationContext ctx = new AnnotationConfigWebApplicationContext();
ctx.setServletContext(servletContext);
ctx.refresh();
//
log.trace("Registering first test bean");
Test test = new Test();
test.setDummy("x1");
ctx.getBeanFactory().registerSingleton("myTestBean1", test);        

log.trace("Registering second test bean");
BeanDefinition testDef = new RootBeanDefinition(Test.class);        
testDef.setScope(BeanDefinition.SCOPE_SINGLETON);        
ctx.getBeanFactory().registerSingleton("myTestBean2", testDef);

Test dummy1 = (Test)ctx.getBean("myTestBean1");
Object dummy2 = ctx.getBean("myTestBean2");

log.trace("beans: 1: {}; 2: {}", dummy1, dummy2); //<--this works, but...
ctx.refresh();

ctx.register(MyConfig.class); //configuring other beans 
```

...当我从 MyConfig.class 中配置的另一个 bean 或使用 @Component 注释的另一个 bean 执行此操作时（它甚至可能是另一个动态组件）：

```
@Autowire Test myTestBean1;
//Or this:
Object a = this.ctx.getBean("myTestBean1"); //Or myTestBean2 
```

它抛出一个 NoSuchBeanDefinitionException

请帮我！！我环顾四周并没有找到任何有用的信息，或者也许我有，但我无法在这么短的时间内测试我在网络上找到的所有内容，而且 spring 文档似乎只适用于正常情况和 xml 配置，而不是对于我正在尝试做的这些疯狂的事情，而不是用于编程配置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T07:27:20.357

你所追求的无法完成，对不起。最初创建 bean 时会发生自动装配。在您的情况下，您希望在将 bean 添加到工厂之前连接它，这当然行不通 - Spring 不会进行时间旅行。

我认为您追求的是工厂模式。在 Spring 中，您可以通过实现[`FactoryBean`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/beans/factory/FactoryBean.html). 在这里阅读更多：

*   [http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-factory-extension-factorybean](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-factory-extension-factorybean)
*   [http://blog.springsource.org/2011/08/09/whats-a-factorybean/](http://blog.springsource.org/2011/08/09/whats-a-factorybean/)

# gwt - 如何更改我的 GWT TabPanel 的 css

> ID：12293654
> 
> 赞同：0
> 
> 时间：2012-09-06T05:45:20.797
> 
> 标签：gwt

我正在尝试更改标签面板的 CSS 这是我的代码

```
 <g:HTMLPanel>
    <div class="center">
        <g:TabLayoutPanel ui:field="tabPanel" barUnit="PX"
            barHeight="60" width="500px" height="250px" 
                                 styleName="gwt-TabPanel">
            <g:tab >
                <g:header>
                    DashBoard
        </g:header> 
```

我有这个CSS

```
 .gwt-TabPanel {
    background-color: rgb(36, 36, 36);
    }

    .roundedTab {
    background-color: red;  
    }

   .gwt-TabBar {
    background-color: rgb(36, 36, 36);
    padding-top: 5px;
    }

    .gwt-TabPanelBottom {
    background-color: rgb(64, 64, 64);
    border-top: none;

    padding-top: 1px;
    margin: 0px 0px 3px 0px;
    }

    .gwt-TabBar .gwt-TabBarFirst {
    border-bottom: 1px solid rgb(36, 36, 36);
    padding-left: 3px;
    }

   .gwt-TabBar .gwt-TabBarRest {
    border-bottom: 1px solid rgb(36, 36, 36);
    padding-right: 3px;
    }

   .gwt-TabBar .gwt-TabBarItem {           
    border-bottom: 1px solid rgb(36, 36, 36);

    margin-left: 2px;
    margin-right: 2px;

    cursor: pointer;
    cursor: hand;

    background-color: rgb(48, 48, 48);
    } 

    .gwt-TabBar .gwt-TabBarItem-selected {  
    border-bottom: 1px solid rgb(64, 64, 64);       
    background-color: rgb(64, 64, 64);
    }

    .gwt-TabBar .selectedText {
    color: white;
    background-color: rgb(64, 64, 64);
    font-weight: bold;      
    padding: 3px 7px 5px 7px;
    }

    .gwt-TabBar .unselectedText {
    color: rgb(227, 209, 13);       
    background-color: rgb(48, 48, 48);

    padding: 3px 7px 5px 7px;       
    }

   .gwt-TabBar .onMouseEnter {
    color: white;
    background-color: rgb(64, 64, 64);
    }

    .gwt-TabBar .onMouseLeave {

     }

    .deckPanel {
    margin: 5px;
   } 
```

![在此处输入图像描述](../Images/a33622c7867a500a745a2b567f7f0e11.png)

但这会使整个选项卡面板变黑，并且选项卡也消失了。我想要的是使每个选项卡（不是完整的选项卡面板）背景颜色为蓝色并删除 tabPanel 的边框

知道我怎么能做到这一点。

![在此处输入图像描述](../Images/a33622c7867a500a745a2b567f7f0e11.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T06:28:11.040

从 .gwt-TabPanel 中删除 background-color 属性并添加新的 CSS 属性，

```
.gwt-TabLayoutPanelTab {
    background-color: blue;
} 
```

.gwt-TabPanel 是整个 Tabpanel 的 CSS，但 .gwt-TabLayoutPanelTab 是应用于每个选项卡的 CSS。

# c# - MVC区域路由解析

> ID：12293657
> 
> 赞同：2
> 
> 时间：2012-09-06T05:45:27.927
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-routing

如果您的解决方案中有区域，则使用 MVC3/4，它将尝试解决区域和根级别控制器的顺序是什么？

例如：

它会先尝试根级路由，然后按字母顺序尝试区域级路由吗？

还是先按字母顺序检查区域级路由，然后再检查根级？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T06:13:01.497

MVC 解析器首先区域特定路由，然后是根级别路由。这是因为默认情况下您在 Global.asax 中有下一个代码：

```
protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas(); //1\. registers areas

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes); //2\. only after that register root routes
    } 
```

我没有尝试过，但如果你想改变这种行为，你可以尝试在你的项目中交换这些代码行。

# android - 如何实现用户密钥保护管理器类，因为某些方法已被弃用

> ID：12293659
> 
> 赞同：2
> 
> 时间：2012-09-06T05:45:39.253
> 
> 标签：android

我正在尝试开发一个可以禁用键盘保护的应用程序。得到很多错误。..请帮我整理一下：->我是否必须实现为活动或动作-> android.manifest 文件的设置（如果不同）。

# html - HTML - 从网页运行 vbscript - Active X 组件无法创建对象

> ID：12293661
> 
> 赞同：0
> 
> 时间：2012-09-06T05:45:44.663
> 
> 标签：html, vbscript, activex

我需要运行带有来自网页的参数的 vbscript。更具体地说，来自 Sharepoint 2010 页面。我要做的是打开 SuperOffice 和特定的文档模板。在这样做的过程中，我有这段代码可以做到这一点。

```
startSOTemplate("Anbudsbrev")

Public Sub startSOTemplate(parameter)
    Dim objSO
    Set objSO = CreateObject("SuperOffice.Application")

    If not (ObjSO is nothing) then
        objSO.CurrentDocument.ChangeIdentity 0
        objSO.CurrentDocument.SetDefaults

        objSO.Context.Set "superoffice: document"
        objSO.CurrentDocument.Template = objSO.Database.GetListItemByName(130, parameter)
    End if
End Sub 
```

现在，我尝试使用此代码将此脚本添加到网页（该链接稍后将替换为按钮）

```
<HTML>
<HEAD><TITLE>A Simple First Page</TITLE>
<SCRIPT LANGUAGE="VBScript">
<!--
Public Sub myVBFunction(parameter)
    Dim objSO
    Set objSO = CreateObject("SuperOffice.Application")
    If not (objSO is nothing) Then

        objSO.CurrentDocument.ChangeIdentity 0
        objSO.CurrentDocument.SetDefaults

        objSO.Context.Set "superoffice: document"

        objSO.CurrentDocument.Template = objSO.Database.GetListItemByName(130, parameter)

    end if
End Sub
-->
</SCRIPT>
</HEAD>
<BODY>
<H3>A Simple First Page</H3><HR>
<a href="#" onclick="VBscript:myVBFunction('Anbudsbrev')">link</a>
</BODY>
</HTML> 
```

发生的事情是我在网页上收到错误消息`ActiveX component can't create object: 'SuperOffice.Application'`。我知道 dll 已正确注册，因为它确实可以单独使用 vbs 脚本。

所以，我真正的问题是：是否有更好的方法来实现同样的目标？也许从文件中运行 vbscript？只需使用每个按钮上的链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T07:16:47.630

几个潜在的陷阱：

1.  你的操作系统是 64 位的吗？如果是这样，您必须确保运行正确的浏览器（Internet Explorer 带有 32 位和 64 位）。并非所有 COM 对象都可用/可见。

2.  您是否`SuperOffice.Application`访问本地注册表或文件系统？如果是这样，那么您的 COM 对象是沙盒的。解决此问题的一种方法是通过使用`.hta`文件扩展名将 HTML 页面托管在 HTML 应用程序中，而不是`.html`允许您的 HTML 页面作为“完全受信任的”应用程序执行。请参阅 Wikipedia 对[HTML Application](http://en.wikipedia.org/wiki/HTML_Application "HTML 应用程序")的定义。

# google-apps-script - 是否可以在 HTMLService 中使用 localStorage？

> ID：12293662
> 
> 赞同：4
> 
> 时间：2012-09-06T05:45:50.250
> 
> 标签：google-apps-script

是否可以使用`localStroage`Google `HtmlService`Apps 脚本？我尝试了下面的代码，但它显示错误消息，因为未定义 localStorage。

```
function doGet() {
  var ui = HtmlService.createHtmlOutputFromFile('main');
  return ui;
}

<!DOCTYPE html>
<html>
  <head>
    <script>localStorage.setItem('howGood', 'awesome');</script>
  </head>
<body>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-07-28T08:28:23.437

`IFRAME`沙盒模式现在支持本地存储：

```
function doGet() {
     return HtmlService.createHtmlOutputFromFile('Index')
        .setSandboxMode(HtmlService.SandboxMode.IFRAME);
}

<script>
    localStorage.setItem("mynote", "test msg");
    var note = localStorage.getItem("mynote");
    alert(note);
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:42:52.167

localStorage 是 HTML 5 的一部分，Apps 脚本不支持。如果您查看[文档](https://developers.google.com/apps-script/html_service#CreatingHTML)，它会说 Apps Script 当前支持 HTML 4.01。

[但是，您可以在问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)中打开增强请求以请求此功能。

作为替代方案，您可以使用 UserProperties 或 CacheService 来满足您的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T13:33:21.693

不支持本地存储。将来可能会支持它，并且问题跟踪器功能请求是合适的。

# arrays - 管理类 MovieClip

> ID：12293663
> 
> 赞同：0
> 
> 时间：2012-09-06T05:45:54.360
> 
> 标签：arrays, class, actionscript, movieclip

如何更改与类关联并导入数组的子影片剪辑的动画？

现在，当玩家击中它时，我可以让它消失，这行：

```
this.parent.removeChild(this); 
```

看看它，有2个地雷是用external as导入的。文件并在 MineList 数组中。

[http://teroute.com/stronghold/index.php?page=secret-project](http://teroute.com/stronghold/index.php?page=secret-project)

我想让那些地雷在被触碰时爆炸。

在这里，更多代码：

```
for (var i:int = 0; i < MineList.length; i++) // Here i count all mines, that are in MineList Array
{
    if(player.hitTestObject(MineList[i])) // If player touches any mine
    {
        MineList[i].removeSelf(); // If player touches a mine, 
                                  // then this mine will dissapear
    }
} 
```

这是一个在 as 中的 removeSelf 函数。外部文件：

```
public function removeSelf():void
{
    trace("Removed");
    removeEventListener(Event.ENTER_FRAME, loop) // Sustabdyti loop
    this.parent.removeChild(this); // panaikinimas
} 
```

我认为这条线应该改变：

```
this.parent.removeChild(this); 
```

类似于：

```
this.parent.gotoAndPlay(2); 
```

但是我做错了，请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T12:06:42.330

```
this.parent.gotoAndPlay(2); 
```

意味着您正在告诉闪光灯转到并从我的父母的第二帧开始播放。如果您想从第二帧开始播放地雷，那么您应该编写如下内容

```
this.gotoAndPlay(2); 
```

*始终检查范围或您正在访问的内容，以确保正确完成*。

# html - 为什么 w3c 验证器抱怨

> ID：12293664
> 
> 赞同：2
> 
> 时间：2012-09-06T05:46:00.937
> 
> 标签：html

[http://validator.w3.org/check](http://validator.w3.org/check) 抱怨 _

```
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
```

为什么？

以下是完整的 HTML。

```
<!DOCTYPE html>
    <html>
    <head>
        <meta charset="utf-8" >
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width">

        <title></title>
        <!--I dont particularly apreciate bundles in their current beta state. I used them only for big libraries only-->    
        <link href="/Content/EricMeyerReset.css" rel="stylesheet" type="text/css">
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.0.4/css/bootstrap-combined.min.css" rel="Stylesheet" type="text/css" >
        <link href="/Content/Site.css" rel="stylesheet" type="text/css" >

    </head>
    <body>
        <script src="//code.jquery.com/jquery-latest.min.js" type="text/javascript" > </script>
        <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.19/jquery-ui.min.js" type="text/javascript" ></script>
        <!--http://www.asp.net/ajaxlibrary/cdn.ashx#Knockout_Releases_on_the_CDN_10-->
        <script src="//ajax.aspnetcdn.com/ajax/knockout/knockout-2.1.0.js" type="text/javascript"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.0.4/js/bootstrap.min.js" type="text/javascript"></script>

        <!--If Jquery fails the fall back to local version--> 
        <script type="text/javascript">
            !window.jQuery && document.write('<script type="text/javascript" src="/Scripts/jquery-1.7.2.min.js"><\/script>')
        </script>
    </body>

    </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T05:54:12.847

因为它实际上是无效的。话虽如此，它并没有真正伤害任何东西，但是有一些方法可以摆脱它并获得相同的结果，使用 .htaccess 文件[https://groups.google.com/forum/#!msg/html5boilerplate/bRtrFSrKjtI /AOa44To23nMJ](https://groups.google.com/forum/#!msg/html5boilerplate/bRtrFSrKjtI/AOa44To23nMJ)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T06:07:13.967

我想不是“有效”，我认为这完全是 bs。所以在这里：在IIS中

```
 <configuration>
       <system.webServer>
          <httpProtocol>
           <customHeaders>
           <clear/>
           <add name="X-UA-Compatible" value="IE=edge, chrome=1"/>
      </customHeaders>
          </httpProtocol>
       </system.webServer>
    </configuration> 
```

在阿帕奇

```
<IfModule mod_headers.c>

        BrowserMatch MSIE ie

        Header set X-UA-Compatible "IE=Edge,chrome=1" env=ie

      IfModule>

    IfModule> 
```

# android - 尝试图库应用程序显示空白屏幕

> ID：12293668
> 
> 赞同：-1
> 
> 时间：2012-09-06T05:46:34.187
> 
> 标签：android

我正在尝试一个画廊应用程序，我找到了一个示例@ [http://raivoratsep.com/114/android-gallery-tutorial-working-example/](http://raivoratsep.com/114/android-gallery-tutorial-working-example/)我构建顺利但在模拟器中它显示一个空白的白色屏幕......在这里我发布我的代码.. public class GallaryActivity 扩展 Activity {

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_gallary);
    Gallery g = (Gallery) findViewById(R.id.gallery1);
    final Gallary_adapter ga = new Gallary_adapter(this);
    g.setAdapter(ga);

    g.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
            Toast.makeText(GallaryActivity.this, "" + position, Toast.LENGTH_SHORT).show();
/*            Intent intent= new Intent("hello");
            long id1 = ga.getItemId(position);

          intent.putExtra("key", id1);

            sendBroadcast(intent);    */
        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_gallary, menu);
    return true;
}
} 
```

Gallary_adapter 类是这样的..

```
public class Gallary_adapter extends BaseAdapter{
 int mGalleryItemBackground;
    private Context mContext;

    private Integer[] mImageIds = {
            R.drawable.sample_1,
            R.drawable.sample_2,
            R.drawable.sample_3,
            R.drawable.sample_4,
            R.drawable.sample_5,
            R.drawable.sample_6,
            R.drawable.sample_7
    };
Gallary_adapter(Context c){
    mContext=c;
    TypedArray a = c.obtainStyledAttributes(R.styleable.Gallery1);
    mGalleryItemBackground = a.getResourceId(
            R.styleable.Gallery1_android_galleryItemBackground, 0);
    a.recycle();
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public Object getItem(int arg0) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public long getItemId(int arg0) {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    ImageView i = new ImageView(mContext);

    i.setImageResource(mImageIds[position]);
    i.setLayoutParams(new Gallery.LayoutParams(150, 100));
    i.setScaleType(ImageView.ScaleType.FIT_XY);
    i.setBackgroundResource(mGalleryItemBackground);

    return i;
}

} 
```

我发现这个有用的链接可以删除“R.stylable”的所有错误[https://groups.google.com/forum/?fromgroups=#!topic/android-beginners/AJfST9YGADM](https://groups.google.com/forum/?fromgroups=#!topic/android-beginners/AJfST9YGADM)

这是xml布局文件..

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" 
android:id="@+id/lay">

<Gallery
    android:id="@+id/gallery1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="164dp" /> 
```

请帮帮我..谢谢你:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:48:16.957

您的 getCount 在您的 Gallary_adapter 类中返回零，

```
@Override
public int getCount() {
    // TODO Auto-generated method stub
    return 0;
} 
```

它必须返回，

mImageIds 长度像这样，

```
 @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return mImageIds.length;
    } 
```

GetCount 负责计算您的图库中的项目数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T05:51:23.980

你也可以使用`ACTION_PICK`意图来做到这一点

```
Intent photoPickerIntent = new Intent(Intent.ACTION_PICK);
                photoPickerIntent.setType("image/*");
                startActivityForResult(photoPickerIntent, 1); 
```

# smalltalk - Pharo smalltalk 中的十二生肖邮件发送

> ID：12293670
> 
> 赞同：6
> 
> 时间：2012-09-06T05:46:37.987
> 
> 标签：smalltalk, pharo, seaside, gemstone

我正在尝试在 CentOS 机器中使用 pharo 中的 gmail smtp 和 zodiac 发送邮件。我收到以下错误。

```
"SSL/TLS plugin initialization failed. VM missing plugin? " 
```

我已经下载并将“so.SqueakSSL”与其他.so文件一起放在虚拟机目录中，并使用了“chmod 777 so.SqueakSSL”。但仍然显示错误。我错过了什么吗？工作区代码是：

```
Gofer it
    squeaksource: 'Zodiac';
    package: 'Zodiac-Core';
    package: 'Zodiac-Tests';
    package: 'Zodiac-Extra';
    load.

  "Load extra Zinc support for Zodiac"

Gofer it
squeaksource: 'ZincHTTPComponents';
package: 'Zinc-Zodiac';
load.
| mailMessage |
mailMessage := MailMessage empty.
mailMessage setField: 'subject' toString: 'ZdcSecureSMTPClient Test'.
mailMessage body: (MIMEDocument 
                 contentType: 'text/plain' 
                 content: 'This is test from Pharo Smalltalk').
ZdcSecureSMTPClient
sendUsingGMailAccount: 'varunisacc@gmail.com' 
password: 'mypassword'
to: 'varunisacc@gmail.com' 
message: mailMessage. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T06:29:53.953

缺少 SSL 插件，因为它不包含在早期的 Pharos 中。但是，如果您下载 Pharo 1.4 Summer Release 或更高版本的一键式，它应该可以开箱即用，因为该插件位于正确的位置，正确设置并且适用于所有三个平台（Linux、OS/X 和 Windows）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T14:10:40.480

前几天我在一个ScientificLinux上也遇到过类似的问题，和CentOS很像。问题是这些库是必需的 libssl.so.0.9.8 和 libcrypto.so.0.9.8，但以 libssl.so.0.9.8e 和 libcrypto.so.0.9.8e 的形式存在。

```
# ldd /opt/smalltalk/pharovm14A/libSqueakSSL.so 
        linux-gate.so.1 =>  (0x00bfb000)
        libssl.so.0.9.8 => not found
        libcrypto.so.0.9.8 => not found
        libc.so.6 => /lib/libc.so.6 (0x006ce000)
        /lib/ld-linux.so.2 (0x0055a000)

# ls /usr/lib/libssl.so.0.9.8* /usr/lib/libcrypto.so.0.9.8*
/usr/lib/libcrypto.so.0.9.8e  /usr/lib/libssl.so.0.9.8e 
```

解决方案是创建两个符号链接：

```
# ln -s /usr/lib/libssl.so.0.9.8e /usr/lib/libssl.so.0.9.8
# ln -s /usr/lib/libcrypto.so.0.9.8e /usr/lib/libcrypto.so.0.9.8

# ldd /opt/smalltalk/pharovm14A/libSqueakSSL.so 
/opt/smalltalk/pharovm14A/libSqueakSSL.so: /usr/lib/libcrypto.so.0.9.8: no version information available (required by /opt/smalltalk/pharovm14A/libSqueakSSL.so)
/opt/smalltalk/pharovm14A/libSqueakSSL.so: /usr/lib/libssl.so.0.9.8: no version information available (required by /opt/smalltalk/pharovm14A/libSqueakSSL.so)
        linux-gate.so.1 =>  (0x0062d000)
        libssl.so.0.9.8 => /usr/lib/libssl.so.0.9.8 (0x008a8000)
        libcrypto.so.0.9.8 => /usr/lib/libcrypto.so.0.9.8 (0x00110000)
        libc.so.6 => /lib/libc.so.6 (0x00a3f000)
        libgssapi_krb5.so.2 => /lib/libgssapi_krb5.so.2 (0x0025f000)
        libkrb5.so.3 => /lib/libkrb5.so.3 (0x0029e000)
        libcom_err.so.2 => /lib/libcom_err.so.2 (0x00eee000)
        libk5crypto.so.3 => /lib/libk5crypto.so.3 (0x00374000)
        libresolv.so.2 => /lib/libresolv.so.2 (0x00e41000)
        libdl.so.2 => /lib/libdl.so.2 (0x00e0c000)
        libz.so.1 => /lib/libz.so.1 (0x00477000)
        /lib/ld-linux.so.2 (0x007f9000)
        libkrb5support.so.0 => /lib/libkrb5support.so.0 (0x003a0000)
        libkeyutils.so.1 => /lib/libkeyutils.so.1 (0x003ab000)
        libpthread.so.0 => /lib/libpthread.so.0 (0x005fd000)
        libselinux.so.1 => /lib/libselinux.so.1 (0x009b4000) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T20:17:54.083

如果您在 Linux 上，您可以从 VM 目录中的 so.SqueakSSL 文件创建一个符号链接到名为 SqueakSSL 的文件

例如

ln -s so.SqueakSSL SqueakSSL

虚拟机会找到它。

# postgresql - 在 Windows 7 32 位操作系统上安装的 postgresql 9.1 中恢复 .gz 备份文件

> ID：12293673
> 
> 赞同：2
> 
> 时间：2012-09-06T05:47:11.510
> 
> 标签：postgresql, database-restore, gzip

我有一个.gz格式的数据库备份文件。我需要在安装在windows 7 32位操作系统上的postgresql 9.1中恢复它。问题是postgresql不支持gz格式的备份文件，所以我无法恢复它。如果有人知道解决方案，请发布您的答案...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T06:25:29.960

.gz 不是备份格式，它只是表示文件已使用 gzip 压缩。winzip 或 7-zip 的副本应该可以解压。然后，您将获得可以使用 pg_restore 恢复的“自定义”格式备份或可以通过 psql 运行的原始 sql。

您也可以使用 pgadmin 代替上述工具。有关详细信息，请参阅手册。

[http://www.postgresql.org/docs/current/static/reference-client.html](http://www.postgresql.org/docs/current/static/reference-client.html)

# c# - 在嵌入式 Linux 上指定 FTP 传输的目录

> ID：12293674
> 
> 赞同：0
> 
> 时间：2012-09-06T05:47:31.627
> 
> 标签：c#, .net, ftp

我有以下代码来执行 FTP 文件：

```
 private bool InitFTPTransfer(string filePath)
    {
        Uri ipAddress = new Uri(ddcdao.ddcAddress);

        string ftpAddress = "ftp://10.175.95.11/mnt/flash" +Path.GetFileName(filePath);
        FtpWebRequest request = (FtpWebRequest)WebRequest.Create(ftpAddress);
        request.Method = WebRequestMethods.Ftp.UploadFile;

        request.Credentials = new NetworkCredential(Properties.Settings.Default.SysFTPID, Properties.Settings.Default.SysFTPPassword);

        byte[] fileContents = File.ReadAllBytes(filePath);

        request.ContentLength = fileContents.Length;

        Stream requestStream = request.GetRequestStream();
        requestStream.Write(fileContents, 0, fileContents.Length);
        requestStream.Close();

        FtpWebResponse response = (FtpWebResponse)request.GetResponse();

        response.Close();
        return true;
    } 
```

文件传输没有问题，但文件放在根目录下，而不是指定目录（/mnt/flash）。

我的印象是在 ftp 地址中指定目录应该正确设置目标，但这对于嵌入式 linux 可能并非如此。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T06:25:48.010

路径似乎是正确的。然而：

1.  URL 首先对文件名进行编码以转义任何无效字符。
2.  代码`/`在文件夹和文件名之间缺少斜杠 ( )。这可能会导致路径无效，导致它写入根文件夹。
3.  使用 using 或 try...finally 块来关闭各种流，以防引发异常。
4.  使用 stream.CopyTo（请参阅[如何将一个流的内容复制到另一个流？](https://stackoverflow.com/questions/230128/best-way-to-copy-between-two-stream-instances-c-sharp)）而不是读取整个文件。如果文件特别大，这可能会出现问题。

问题可能出在 FTP 服务器配置方面。FTP 服务器似乎将文件系统的根文件夹用作其根文件夹，这是一种不好的做法。FTP 服务器应该只提供文件应该下载或上传到的文件夹。但是，这可能是您正在使用的嵌入式 Linux 上的配置功能。

# matlab - Matlab找到y max的x值

> ID：12293675
> 
> 赞同：2
> 
> 时间：2012-09-06T05:47:34.547
> 
> 标签：matlab, graph

我有数据集 MI 和 XLead 并创建一个如下图：`plot(Xlead,MI)`

该图有一个峰值 - 我可以像这样在峰值处找到 MI 值：`maxMI = max(MI);`但是我如何找到 MI 最大时的 Xlead 值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T05:53:46.497

max 函数返回一个包含两个对象的数组：

```
[C,I] = max(...) 
```

C - 是最大值，I 是最大值的索引

所以如果你这样做：

```
[maxMi, ind] = max(MI);
maxX = Xlead(ind) 
```

那么你应该得到 maxX 中最大 MI 的 X 值

# objective-c - 将 CGPoints 从一个视图相对转换为另一个视图以用于动画

> ID：12293676
> 
> 赞同：12
> 
> 时间：2012-09-06T05:47:41.870
> 
> 标签：objective-c, ios, c

我正在尝试制作一个动画，将一个 CGPoint 从一个视图移动到另一个视图，我想找到该点相对于第一个视图的坐标，以便我可以制作动画。

因此，假设我在 view2 中有一个点 (24,15)，并且我想将其动画化到 view1，我仍然想在新视图中保留该点的值，因为我将该点添加为新视图，但对于动画，我需要知道该点所在位置的值，以便我可以进行补间。

请参考这张图：

![在此处输入图像描述](../Images/91e93dc3289c8c405dc45af4b43971a0.png)

现在这就是我想要做的：

```
customObject *lastAction = [undoStack pop];
customDotView *aDot = lastAction.dot;
CGPoint oldPoint = aDot.center;
CGPoint  newPoint = lastAction.point;

newPoint = [lastAction.view convertPoint:newPoint toView:aDot.superview];

CABasicAnimation *anim4 = [CABasicAnimation animationWithKeyPath:@"position"];
anim4.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
anim4.fromValue = [NSValue valueWithCGPoint:CGPointMake(oldPoint.x, oldPoint.y )];
anim4.toValue = [NSValue valueWithCGPoint:CGPointMake( newPoint.x,  newPoint.y )];
anim4.repeatCount = 0;
anim4.duration = 0.1;
[aDot.layer addAnimation:anim4 forKey:@"position"];

[aDot removeFromSuperview];

[lastAction.view addSubview:aDot];
[lastAction.view bringSubviewToFront:aDot];

aDot.center = newPoint; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-08T23:37:50.833

使用块动画更容易看到。我认为目标是在其坐标空间中制作 view2 子视图的动画，然后，当动画完成时，使用转换为新坐标空间的结束位置将子视图添加到 view1。

```
// assume we have a subview of view2 called UIView *dot;
// assume we want to move it by some vector relative to it's initial position
// call that CGPoint offset;

// compute the end point in view2 coords, that's where we'll do the animation
CGPoint endPointV2 = CGPointMake(dot.center.x + offset.x, dot.center.y + offset.y);

// compute the end point in view1 coords, that's where we'll want to add it in view1
CGPoint endPointV1 = [view2 convertPoint:endPointV2 toView:view1];

[UIView animateWithDuration:1.0 animations:^{
    dot.center = endPointV2;
} completion:^(BOOL finished) {
    dot.center = endPointV1;
    [view1 addSubview:dot];
}]; 
```

请注意，将点添加到 view1 会将其从 view2 中删除。另请注意，如果`clipsToBounds == NO`偏移向量将点移动到其边界之外，则 view1 是否应该具有。

# javascript - Jquery 计时问题

> ID：12293677
> 
> 赞同：-2
> 
> 时间：2012-09-06T05:47:49.833
> 
> 标签：javascript, jquery, load-order

现在我正在将车把模板附加到 div。我想在代码上使用它-

```
test = $(".someClass:onScreen") 
```

我知道 onScreen 有效，因为我在将鼠标悬停在该类上时已经记录了同一行，并且它会在屏幕上返回内容。现在，这种情况正在发生，因为我在要附加到的 div 中的内容上有一个 slideUp() 。我知道这一点，因为当我执行 slideDown() 时，该行会正确返回内容。

我该如何解决这个问题？slideUp 完成后我可以收听一些事件吗？

编辑-

我也尝试使用 Jquery slideUps 回调，但仍然无济于事 -

```
 @$el.find("#container").slideDown('fast',@appendSearchResults(resultsCollection))
    @$el.find("#container").empty()

  appendSearchResults:(resultsCollection)=>
    @$el.find("#searchContainerId").append(Handlebars.templates["resultsPage"](
      row: resultsCollection.toJSON()
      nResults: resultsCollection.length
      ))
    @genImageToolTip()
    console.log("testing ons creen")
    test = $(".carImageClass:onScreen")
    console.log(test) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:52:49.643

jQuery`.slideUp()`有一个完成函数的参数，该函数将在动画完成时调用。[jQuery doc](http://api.jquery.com/slideUp/)中的详细信息相当清楚。

传递回调时，它采用简单的函数引用，而不是函数调用。如果您在此处放置一个函数调用（在其后加上括号以使其执行），则该函数将立即执行，而不是稍后执行。您的代码看起来不像普通的 javascript，所以我不能确切地建议它应该如何工作。一个正常的 javascript 回调应该是这样的：

```
$("#whatever").slideUp(2000, function() {
   // do whatever you want to do upon completion
}); 
```

或像这样：

```
$("#whatever").slideUp(2000, slideDone);

function slideDone() {
    // do whatever you want to do upon completion of the slideUp event
} 
```

此外，jQuery 没有`:onScreen`内置的选择器。如果您已安装并按照文档说明使用它，则有一个插件可以提供该选择器。

* * *

至于您的具体代码，我不知道 CoffeeScript，但我会尝试用纯 javascript 向您展示一些相关示例。

你可以这样做：

```
$el.find("#container").slideDown('fast', function() { 
    appendSearchResults(resultsCollection)
});

function appendSearchResults(resultsCollection) {
    // code here
} 
```

你不能做这个：

```
$el.find("#container").slideDown('fast', appendSearchResults(resultsCollection));

function appendSearchResults(resultsCollection) {
    // code here
} 
```

这不起作用，因为这会立即调用 appendSearchResults，然后将该函数的返回结果传递给不是函数的 slideUp。您需要将不带任何参数的函数引用传递给 slideUp。

# php - 在 Smarty 中构建无递归函数的无限级菜单

> ID：12293678
> 
> 赞同：0
> 
> 时间：2012-09-06T05:48:02.203
> 
> 标签：php, smarty

**我能够生成输出为：**

```
Cat1
SubCat1
SubCat3 
```

**但是我需要输出为**

```
Cat1
Subcat1
 SubCat2
SubCat3 
```

为了构建我的菜单，我使用 db 结构：

```
site_id | parent_id    | site_name    | site_url  | Level
1       | 0            | Category 1   |example.com|   0
2       | 1            | Sub Cat 1    |example.com|   1
3       | 2            | Sub Cat 2    |example.com|   2
4       | 1            | Sub Cat 3    |example.com|   1 
```

我能够将我的数组生成为：

```
Array ( 
    [0] => Array ( 
        [0] => 63 
        [site_id] => 63 
        [1] => 0 
        [parent_id] => 0
        [2] => Category 1 
        [site_name] => Category 1 
        [3] => Link1 
        [site_url] => Link1 
        [4] => 0 
        [level] => 0 
        [children] => Array ( 
            [0] => Array ( 
                [0] => 66 
                [site_id] => 66 
                [1] => 63 
                [parent_id] => 63 
                [2] => Sub Cat 3 
                [site_name] => Sub Cat 3 
                [3] => 
                [site_url] => 
                [4] => 1
                [level] => 1 
                [children] => Array ( ) 
            ) 
            [1] => Array ( 
                [0] => 64
                [site_id] => 64 
                [1] => 63 
                [parent_id] => 63 
                [2] => Sub Cat 1
                [site_name] => Sub Cat 1 
                [3] => 
                [site_url] => 
                [4] => 2 
                [level] => 2
                [children] => Array ( 
                    [0] => Array ( 
                        [0] => 65 
                        [site_id] => 65 
                        [1] => 64 
                        [parent_id] => 64 
                        [2] => Sub Cat2 
                        [site_name] => Sub Cat2 
                        [3] =>
                        [site_url] => 
                        [4] => 1 
                        [level] => 1 
                        [children] => Array ( ) 
                    ) 
                ) 
            ) 
        ) 
    )
) 
```

使用来自：[https](https://stackoverflow.com/a/2795069/1137983) ://stackoverflow.com/a/2795069/1137983 的函数。我只使用了帖子中的 getTopCategories() 和 getCategories 函数

为了生成输出，我使用：

```
{foreach from=$sitemap item=c name=sitemap}
 {if $c.level==0 }
<li><h2><a title="{$c.site_name}" href="{$c.site_url}">{$c.site_name}</a></h2><ul>
    {foreach item=d from=$c.children name=sitemap} 
<li><a title="{$d.site_name}" href="{$d.site_url}">{$d.site_name}</a></li>
    {/foreach}
{else}  
<li><h2><a title="{$c.site_name}" href="{$c.site_url}">{$c.site_name}</a></h2><ul>
{/if}
</ul>
</li>
{/foreach}  
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T11:26:18.500

您可以尝试使用它 - 这是其中的一部分，`SiMan CMS`但您可以简单地为您的数据结构更改它：

```
 function siman_load_menu($menu_id, $maxlevel=-1)
        {
            global $nameDB, $lnkDB, $_servervars, $tableprefix, $_settings, $special;
            $i=0;
            $addsql='';
            if ($maxlevel>=0)
                $addsql.=' AND submenu_from=0 ';
            $sql="SELECT * FROM ".$tableprefix."menu_lines WHERE id_menu_ml=".intval($menu_id)." $addsql ORDER BY submenu_from, position";
            $result=database_db_query($nameDB, $sql, $lnkDB);
            while ($row=database_fetch_object($result))
                {
                    $menu[$i]['id']=$row->id_ml;
                    $menu[$i]['mid']=$menu_id;
                    $menu[$i]['pos']=$row->position;
                    $menu[$i]['add_param']=$menu_id.'|'.$row->id_ml;
                    $menu[$i]['level']=1;
                    $menu[$i]['submenu_from']=$row->submenu_from;
                    $menu[$i]['sublines_count']=0;
                    $menu[$i]['url']=$row->url;
                    $menu[$i]['caption']=$row->caption_ml;
                    $menu[$i]['partial']=$row->partial_select;
                    $menu[$i]['alt']=$row->alt_ml;
                    $menu[$i]['attr']=$row->attr_ml;
                    $menu[$i]['newpage']=$row->newpage_ml;
                    $line_id=$row->id_ml;
                    $i++;
                }
            $maxlev=0;
            for ($i=0; $i<count($menu); $i++)
                {
                    $pos[$i]=0;
                }
            $fistlevelposition=0;
            $fistlevellastposition=0;
            for ($i=0; $i<count($menu); $i++)
                {
                    if ($menu[$i]['submenu_from']==0)
                        {
                            $maxpos=0;
                            for ($j=0; $j<count($menu); $j++)
                                if ($maxpos<$pos[$j])
                                    $maxpos=$pos[$j];
                            $pos[$i]=$maxpos+1;
                            $fistlevelposition++;
                            $menu[$i]['submenu_position']=$fistlevelposition;
                            $fistlevellastposition=$i;
                        }
                    else
                        {
                            $rootpos=0;
                            $childpos=-1;
                            for ($j=0; $j<count($menu); $j++)
                                {
                                    if ($menu[$j]['id']==$menu[$i]['submenu_from'])
                                        {
                                            $rootpos=$pos[$j];
                                            $menu[$i]['level']=$menu[$j]['level']+1;
                                            $menu[$j]['sublines_count']++;
                                            $menu[$j]['is_submenu']=1;
                                            $menu[$i]['submenu_position']=$menu[$j]['sublines_count'];
                                        }
                                    if ($menu[$j]['submenu_from']==$menu[$i]['submenu_from'] && $j!=$i && $childpos<$pos[$j])
                                        $childpos=$pos[$j];
                                }
                            $pos[$i]=($rootpos>$childpos) ? ($rootpos+1) : ($childpos+1) ;
                            for ($j=0; $j<count($menu); $j++)
                                {
                                    if ($pos[$j]>=$pos[$i] && $j!=$i)
                                        $pos[$j]++;
                                }
                        }
                }
            if (count($menu)>0)
                {
                    $menu[0]['first']=1;
                    $menu[$fistlevellastposition]['last']=1;
                }
            for ($i=0; $i<count($menu); $i++)
                {
                    $rmenu[$pos[$i]-1]=$menu[$i];
                }
            return $rmenu;
        } 
```

在输出中，您将获得一个带有键的数组，该键`level`定义了您的菜单项的级别。

```
{section name=i loop=$menu}
{if $smarty.section.i.index eq 0}{else}<br>{/if}
{section name=j loop=$menu[i].level start=1} - {/section}
<a href="{$menu[i].url}" >{$menu[i].caption}</a>
{/section} 
```

# vb.net - 从文件中读取文本

> ID：12293680
> 
> 赞同：1
> 
> 时间：2012-09-06T05:48:20.287
> 
> 标签：vb.net, string, file, visual-studio-2012

我正在编写一些代码来搜索文件开头的文件，直到找到一个字符串。

这是有效的代码：

```
 Private Function ReadTextFileUpto(ByVal txtFile As String, ByVal searchString As String) As String
        Dim result As String = String.Empty
        Dim sb As New System.Text.StringBuilder()
        Dim previousLength As Integer = 0
        Using reader As New IO.StreamReader(txtFile)
            'Read the file 1 char at a time and append it to sb
            While reader.Peek >= 0
                sb.Append(Convert.ToChar(reader.Read))
                'store the current length of sb
                previousLength = sb.Length
                'attemp to replace the search string with an empty string. If the length changed after the replacement
                'then the following conditions must be true:
                ' 1\. we have found the search string in sb.
                ' 2\. the search string was at the end of sb.
                sb.Replace(searchString, String.Empty)
                If sb.Length < previousLength Then
                    'since we have found the search string,  exit the loop and return the string currently in sb.
                    result = sb.ToString()
                    Exit While
                End If
            End While
        End Using
        Return result
    End Function 
```

我想编辑 thsi 代码，以便我可以在文件中选择一个起始位置来开始搜索。

这是我正在处理的代码：

```
 Public Function ReadTextFileUpto(ByVal txtFile As String, ByVal searchString As String, integerStartPosition As Integer) As String
    Dim result As String = String.Empty
    Dim sb As New System.Text.StringBuilder()
    Dim previousLength As Integer = 0
    Using reader As New IO.StreamReader(txtFile)
        'Read the file 1 char at a time and append it to sb
        While reader.Peek >= integerStartPosition
            sb.Append(Convert.ToChar(reader.Read))
            'store the current length of sb
            previousLength = sb.Length
            'attemp to replace the search string with an empty string. If the length changed after the replacement
            'then the following conditions must be true:
            ' 1\. we have found the search string in sb.
            ' 2\. the search string was at the end of sb.
            sb.Replace(searchString, String.Empty)
            If sb.Length < previousLength Then
                'since we have found the search string,  exit the loop and return the string currently in sb.
                result = sb.ToString()
                Exit While
            End If
        End While
    End Using
    Return result
End Function 
```

我可以帮忙吗？

**最终代码**

```
Public Function ReadTextFileUpto(ByVal txtFile As String, ByVal searchString As String, integerStartPosition As Integer) As String
    Dim result As String = String.Empty
    Dim sb As New System.Text.StringBuilder()
    Dim tmpString As String = ""
    Dim previousLength As Integer = -1
    Dim integerCurrentPosition As Integer 
    Using reader As New IO.StreamReader(txtFile)
        While reader.Peek >= 0

            integerCurrentPosition += 1

            tmpString = Convert.ToChar(reader.Read)

            If integerCurrentPosition > integerStartPosition Then
                sb.Append(tmpString)
                previousLength = sb.Length
                sb.Replace(searchString, String.Empty)
                If sb.Length < previousLength Then
                    result = sb.ToString()
                    Exit While
                End If
            End If

        End While
    End Using
    Return result
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T06:01:17.410

您应该将位置检查放在 while 循环中。这是一个简单的例子。

```
Private Function ReadTextFileUpto(ByVal txtFile As String, ByVal searchString As String) As String
            Dim result As String = String.Empty
            Dim sb As New System.Text.StringBuilder()
            Dim previousLength As Integer = 0
            Dim currentPosition as Integer = 0

            Using reader As New IO.StreamReader(txtFile)
                'Read the file 1 char at a time and append it to sb
                While reader.Peek >= 0
                    If currentPosition < integerStartPosition Then
                       Continue While
                    End if 

                    sb.Append(Convert.ToChar(reader.Read))
                    'store the current length of sb
                    previousLength = sb.Length
                    'attemp to replace the search string with an empty string. If the length changed after the replacement
                    'then the following conditions must be true:
                    ' 1\. we have found the search string in sb.
                    ' 2\. the search string was at the end of sb.
                    sb.Replace(searchString, String.Empty)
                    If sb.Length < previousLength Then
                        'since we have found the search string,  exit the loop and return the string currently in sb.
                        result = sb.ToString()
                        Exit While
                    End If

                    currentPosition = currentPosition + 1
                End While
            End Using
            Return result
        End Function 
```

**更新：**

或者您可以尝试[StreamReader.Read Method (Char[], Int32, Int32)](http://msdn.microsoft.com/en-us/library/aa328964%28v=vs.71%29)方法将流读入数组，指定起始位置。

> 从当前流中读取最多 count 个字符到缓冲区，从 index 开始。

欲了解更多信息检查教程

[流阅读器](http://www.java2s.com/Tutorial/VB/0240__Stream-File/StreamReaderreadtoabuffer.htm)

祝你好运！

# javascript - 使用 EL (${pageContext.request.contextPath}) 时 Javascript 导入失败

> ID：12293684
> 
> 赞同：2
> 
> 时间：2012-09-06T05:49:09.757
> 
> 标签：javascript, jsp, el

下面是来自 JSP 文件的片段。之前我曾使用`scriptlet` `(<%=request.getContextPath()%>)`填充上下文路径，如`[A]`. 正在导入所有 3 个 javascript 文件。

```
[A] 
<script language="JavaScript1.2" type="text/javascript" src="<%=request.getContextPath()%>/js/a.js"></script> 
<script language="JavaScript1.2" type="text/javascript" src="<%=request.getContextPath()%>/js/b.js"></script> 
<script language="JavaScript1.2" type="text/javascript" src="<%=request.getContextPath()%>/js/c.js"></script> 
```

我使用 EL（表达语言）替换了`contextpath`总体，如 [B] 所示。我还修改了 javascript 文件 a.js 和 c.js 并添加了一些功能。我重新部署了我的应用程序耳朵。我看到新文件 a.js 在浏览器 (IE) 缓存中重新加载，但`c.js`保持不变。

[乙]

```
<script language="JavaScript1.2" type="text/javascript" src="${pageContext.request.contextPath}/js/a.js"></script> 
<script language="JavaScript1.2" type="text/javascript" src="${pageContext.request.contextPath}/js/b.js"></script> 
<script language="JavaScript1.2" type="text/javascript" src="${pageContext.request.contextPath}/js/c.js"></script> 
```

为什么会这样？我怀疑`javascript`这些外部文件之一（可能`b.js`）中的错误阻止了 c.js 加载。有没有人遇到过这样的场景。请回复 。谢谢。

# python - 使用 Django/Python 创建论坛的想法

> ID：12293689
> 
> 赞同：-1
> 
> 时间：2012-09-06T05:50:10.603
> 
> 标签：python, django, forum

我正在尝试使用 Django/Python 创建一个基本论坛。我是中级 Python 和 Django 用户。我需要关于以下事情的想法：

*   论坛所需的表格（用户、问题等）

*   在前端为不同的用户注册和登录。

我的论坛会很简单。用户无需登录即可查看问题。提问用户必须登录。登录后，他们可以提出问题和类似的东西。

给我一些关于如何使它变得更好的想法？还有另一个问题：论坛是我的应用程序还是 Django 中的项目？我真的很困惑这个应用程序和项目的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T06:05:04.990

您可以首先下载 aneroid 提到的现有 Django 论坛包。在那之后，打开他们的 models.py 给你一些想法需要什么模型。

为什么要投反对票？OP*询问***“论坛所需表格（用户、问题等）”**的一些想法，我通过现有软件包的 models.py 回答了这些表格的要求。这将给他确切的需要。它出什么问题了？

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-06T06:00:31.997

你有什么理由不想使用现有的基于 django 的论坛之一？这些给出了比较：

*   [Django 论坛包](http://www.djangopackages.com/grids/g/forums/)
*   [ForumAppsComparison](https://code.djangoproject.com/wiki/ForumAppsComparison)来自上面页面中的链接。

如果您确定要创建自己的项目，现有项目之一应该会给您一些关于数据库设计和功能的好主意。

# c# - 即使在回发之后也保持标签顺序

> ID：12293693
> 
> 赞同：0
> 
> 时间：2012-09-06T05:50:35.503
> 
> 标签：c#, asp.net, user-controls

这是一个场景，即使在回发之后，我也需要保持页面中的标签顺序。

我有一个带有 3 个文本框的用户控件，它与其他控件一起放置在一个 aspx 页面中。在测试框的 onBlur 中，我正在执行 __doPostBack 以将一些数据传递给服务器并在父页面上进行处理，因此选项卡顺序丢失。是否可以在回发中保持标签顺序，我从父页面标签到控件中的文本框，然后再次标签到下一个父页面控件。

我尝试使用下面的代码将焦点设置到用户控件中的下一个文本框，但这会导致调用代码，即使用户仅通过单击页面将焦点移出控件也是如此。

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (this.IsPostBack)
        {
            WebControl wcICausedPostBack = (WebControl)GetControlThatCausedPostBack(sender as UserControl);
            if (wcICausedPostBack != null)
            {
                int indx = wcICausedPostBack.TabIndex;
                Panel selectedPanel = null;
                if (Panel1.Visible)
                {
                    selectedPanel = Panel1;
                }
                else if (Panel2.Visible)
                {
                    selectedPanel = Panel2;
                }
                if (selectedPanel != null)
                {

                    var ctrl = from control in selectedPanel.Controls.OfType<WebControl>()
                               where control.TabIndex == (indx + 1)
                               select control;
                    if (ctrl.Count() > 0)
                    {
                        ctrl.First().Focus();
                    }
                }
            }
        }
    }

    protected Control GetControlThatCausedPostBack(UserControl page)
    {
        Control control = null;
        string ctrlname = string.Empty;
        UserAction updateAction = CurrentUserAction();
        if (updateAction != null)
        {
            if (!string.IsNullOrEmpty(updateAction.Data))
            {
                string[] splitSting = updateAction.Data.Split('$');
                ctrlname = splitSting[splitSting.Count() - 1];
            }
        }
        if (ctrlname != null && ctrlname != string.Empty)
        {
            control = page.FindControl(ctrlname);
        }
        else
        {
            foreach (string ctl in page.Request.Form)
            {
                Control c = page.FindControl(ctl);
                if (c is System.Web.UI.WebControls.Button || c is System.Web.UI.WebControls.ImageButton)
                {
                    control = c;
                    break;
                }
            }
        }
        return control;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T06:03:29.063

您可以使用 jQuery 将当前聚焦的字段 id 存储在隐藏控件中。

将其存储在隐藏控件中将在回发中保持它。
您可以使用该输入 id 来查找下一个输入并使用 jQuery 再次将焦点设置为它。

```
$("input").focus(function() {
    $("#currectFocusField").val($(this).attr("id"));
});

$(document).ready(function(){
    var lastFocusedInput = $("#currectFocusField").val();
}); 
```

# c# - 如何通过单选按钮列表显示图片？

> ID：12293695
> 
> 赞同：2
> 
> 时间：2012-09-06T05:50:40.553
> 
> 标签：c#, asp.net, sql-server, c#-4.0

我有一个项目，我想通过单选按钮列表显示数据库中的一条记录。选择一个选项并单击下一步按钮后，下一条记录加载。这是我的 Html 代码：

```
<table style ="width :800px">
        <tr>
            <td style="width: 100px">
                <asp:Image ID="Image1" runat="server" ImageUrl="~/images/stdents12.jpeg" /></td>
        </tr>
        <tr>
            <td style="width: 100px">

                <table style="width: 950px" id="TABLE1" onclick="return TABLE1_onclick()">
        <tr>
            <td colspan="8" style="color: white; height: 21px; background-color: #3366ff">
                <asp:Label ID="Label1" runat="server" Font-Bold="True" Text="Test No :" Width="82px"></asp:Label>
                <asp:Label ID="TestNo" runat="server" Text="Label" Width="100px"></asp:Label><asp:Label ID="Label2" runat="server" Font-Bold="True" Text="Test Name :" Width="84px"></asp:Label>
                <asp:Label ID="TestName" runat="server" Text="Name Of the Test" Width="501px"></asp:Label><asp:Label ID="Label3" runat="server" Font-Bold="True" Text="Question :"></asp:Label>
                <asp:Label ID="Question" runat="server" Text="N of T" Width="52px"></asp:Label></td>
        </tr>
        <tr>
            <td style="width: 23px" rowspan="5">
            </td>
            <td style="width: 100px; height: 1px;">
                &nbsp;</td>
            <td style="width: 100px; height: 1px;">  

            </td>
            <td style="width: 100px; height: 1px;">
            </td>
            <td style="width: 100px; height: 1px;">
            </td>
            <td style="width: 100px; height: 1px;">
            </td>
            <td style="width: 100px; height: 1px;">
                </td>
            <td style="width: 100px; height: 1px;">
             <div class="timerCss"> <asp:Label ID="lblTimerCount" runat="server" Height="5px" Width="232px"></asp:Label>&nbsp;</div>
                </td>
        </tr>
        <tr>
            <td colspan="7" align="right">
                <asp:Image ID="Image2"  runat="server" />
                <asp:Label ID="Questionlbl" runat="server" Height="66px" Text="Label" 
                    Width="317px"></asp:Label></td>
        </tr>
        <tr>
            <td colspan="7">
                &nbsp;</td>
        </tr>
        <tr>
            <td colspan="7">

                <asp:RadioButtonList ID="RadioButtonList1" runat="server" 
                    RepeatDirection="Horizontal">
                </asp:RadioButtonList>

                </td>
        </tr>
        <tr>
            <td style="width: 100px; height: 12px;">
                &nbsp;</td>
            <td style="width: 100px; height: 12px;">
            </td>
            <td style="width: 100px; height: 12px;">
            </td>
            <td style="width: 100px; height: 12px;">
                </td>
            <td style="width: 100px; height: 12px;">
                </td>
            <td style="width: 100px; height: 12px;">
                <asp:Button ID="Button2" runat="server"   Text="Skip" Width="55px" /></td>
            <td style="width: 100px; height: 12px;">
                <asp:Button ID="BtnNext" runat="server" onclick="BtnNext_Click" Text="Next" 
                    Width="70px" />
            </td>
        </tr>
    </table>

            </td>
        </tr>
        <tr>
            <td style="background-color: silver;" class="style1">
            </td>
        </tr>
    </table> 
```

这是我在页面后面的代码：

```
void Page_PreRender(object sender, EventArgs e)
    {

        OnlineExamEntities context = new OnlineExamEntities();
        StringBuilder bldr = new StringBuilder();
        bldr.AppendFormat("var Timer = new myTimer({0},{1},'{2}','timerData');", this.timerStartValue, this.TimerInterval, this.lblTimerCount.ClientID);
        bldr.Append("Timer.go()");
        ClientScript.RegisterStartupScript(this.GetType(), "TimerScript", bldr.ToString(), true);
        ClientScript.RegisterHiddenField("timerData", timerStartValue.ToString());
        /////////////////////////////
        List<int> a = (List<int>)Session["QnumList"];
        List<string> resulttemp = new List<string>();

        int j = a[Convert.ToInt32(Session["Click"].ToString())];

        var q3 = ((from c in context.questions
                   orderby c.QID
                   where c.QID == j
                   select c)).SingleOrDefault();
        resulttemp.Add(q3.trueAns.ToString());
        Session["result"] = resulttemp;

        Questionlbl.Text = q3.Question1.ToString();
        Image2.ImageUrl = q3.ans4.ToString();
        RadioButtonList1.Items.Clear();
        string ans1, ans2, ans3;
        ans1 = q3.ans1.ToString();
        ans2 = q3.ans2.ToString();
        ans3 = q3.ans3.ToString();
        RadioButtonList1.Items.Add(String.Format("<img src='{0}'>", ans1));
        RadioButtonList1.Items.Add(String.Format("<img src='{0}'>", ans2));
        RadioButtonList1.Items.Add(String.Format("<img src='{0}'>", ans3));

    } 
```

当我选择一个选项并单击下一步按钮加载另一条记录时，我收到此错误：

***从客户端检测到一个潜在危险的 Request.Form 值 (RadioButtonList1="***

我调整了 Validate Request ="false" 但它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T06:15:31.583

服务器警告您有人可能会插入 Html 代码 例如，如果您想获取 FirstName 但有人在里面写：“alert('Haha')”，那么当您显示输入的数据时，您可能会看到一个警告框。取消验证不是一件好事。您可以为此使用[Server.HtmlEncode](http://msdn.microsoft.com/en-us/library/w3te6wfz.aspx)：

```
RadioButtonList1.Items.Add(Server.HtmlEncode(String.Format("<img src='{0}'>", ans1))); 
```

在用户选择一个值之后，您可以使用[Server.HtmlDecode](http://msdn.microsoft.com/en-us/library/hwzhtkke)对其进行解码。

**但是**，在这种情况下，您只需要选择的 img，而不是整个`img`标签，因此您可以设置不同的值（第二个参数是值）：

```
RadioButtonList1.Items.Add(new ListItem(String.Format("<img src='{0}'>", ans1), ans1)); 
```

这样，html 表单将只保存不被视为潜在危险值的图像路径。

# php - 解释 php 中 curl 过程背后的逻辑

> ID：12293698
> 
> 赞同：4
> 
> 时间：2012-09-06T05:51:03.300
> 
> 标签：php, curl

我正在使用 PHP 并从 web 解析 url 内容，我知道 file_get_contents(url) 和 curl 有两种方法。我知道我们对 curl 有更多选择，所以我正在使用它但我只是想知道 curl 背后的过程。当我们从头开始发出 curl 请求时它是如何工作的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T06:05:13.473

PHP cURL 包只是在 PHP 中公开了 cURL/libcurl API（用 C 编写）。cURL 对于跨各种协议移动数据非常有用，并且有很多不错的选择。另一方面，file_get_contents 是基本的 PHP 文件操作之一，它依赖于内核来尝试查找请求的资源。一般来说，cURL 将是一个更好的选择，尽管它通常需要多几行代码。file_get_contents() 的一个问题是，在某些情况下，在发出请求后连接保持打开状态，因此函数调用将阻塞脚本，直到请求超时，您可能会看到很多延迟。

参考：

[http://php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)

[http://en.wikipedia.org/wiki/CURL](http://en.wikipedia.org/wiki/CURL)

[http://www.php.net/manual/en/ref.filesystem.php](http://www.php.net/manual/en/ref.filesystem.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T06:03:06.233

**curl**是使用任何支持的协议（HTTP、HTTPS、FTP、GOPHER、DICT、TELNET、LDAP 或 FILE）从服务器获取文档/文件或将文档发送到服务器的客户端。该命令旨在无需用户交互或任何类型的交互性即可工作。

**curl**提供了大量有用的技巧，例如代理支持、用户身份验证、ftp 上传、HTTP 发布、SSL (https:) 连接、cookie、文件传输恢复等。

**例子：**

```
//set POST variables
$url = 'http://domain.com/get-post.php';
$fields = array(
            'lname'=>urlencode($last_name),
            'fname'=>urlencode($first_name),
            'title'=>urlencode($title),
            'company'=>urlencode($institution),
            'age'=>urlencode($age),
            'email'=>urlencode($email),
            'phone'=>urlencode($phone)
        );

//url-ify the data for the POST
foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
rtrim($fields_string,'&');

//open connection
$ch = curl_init();

//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL,$url);
curl_setopt($ch,CURLOPT_POST,count($fields));
curl_setopt($ch,CURLOPT_POSTFIELDS,$fields_string);

//execute post
$result = curl_exec($ch);

//close connection
curl_close($ch); 
```

如需更多了解，请使用以下参考资料：

1.  [带例子的卷曲介绍](http://www.php.net/manual/en/book.curl.php)

2.  [使用 cURL 自动化 HTTP 作业](http://curl.haxx.se/docs/httpscripting.html)

3.  [卷曲的例子](https://stackoverflow.com/a/2138534/718224)

这可以帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T06:08:27.923

Curl 基本上用于发出 REST 请求。

这是使用 curl 发布请求的简单示例

```
 $curl_handle=curl_init();
        curl_setopt($curl_handle,CURLOPT_URL,$GLOBAL_SMS_URL);
        curl_setopt($curl_handle,CURLOPT_CONNECTTIMEOUT,20);
        curl_setopt($curl_handle, CURLOPT_HTTPHEADER, $headers);
        curl_setopt($curl_handle,CURLOPT_RETURNTRANSFER,1);
        $buffer = curl_exec($curl_handle);
        curl_close($curl_handle);
        $getit =  json_decode($buffer, true); 
```

现在代码的第一行用于初始化第二行中的 curl，我们正在定义远程 URL $GLOBAL_SMS_URL（在我的情况下）

第三行我以秒为单位定义超时

我在第 4 行传递标题

一件重要的事情，如果你想通过卷曲体使用这个

```
 curl_setopt($curl_handle, CURLOPT_POSTFIELDS,$json); 
```

其中 $json 将包含您的 curl 请求正文

或者如果你想通过 url 传递一些参数

```
 $data = array(
                "Username" => "56y5768",
                "Pwd" => "tr54656y",
                "PhoneNumber" => $phone,
                "PhoneMessage" => $text
        );
        $getdata =  http_build_query($data) . "\n";
        $GLOBAL_SMS_URL = $SMS_API_BASE_URL.$getdata; 
```

希望能帮助到你

# wpf - 在后面的代码中处理 Web 浏览器控制事件

> ID：12293699
> 
> 赞同：1
> 
> 时间：2012-09-06T05:51:04.987
> 
> 标签：wpf, webbrowser-control

我们可以在 Web 浏览器控件中处理事件吗？在我的情况下，我将一个**单选按钮列表**传递给网络浏览器控件，并希望在后面的代码中处理单选按钮更改事件，
我尝试用谷歌搜索它，但没有找到任何具体的例子。

```
 WebBrowser.NavigateToString("<html>
<body>
<input type='radio' name='g1' value='V1'> V1<br>
<input type='radio' name='g1' value='V2' V2<br>
</body>
</html>"); 
```

如何在代码隐藏中获取这些单选按钮更改的更改事件，我可以使用 javascript 但这不符合我的目标

任何人都可以建议如何做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T06:12:56.177

**从 Javascript 调用 C# 方法**

html 文档和 WPF 之间的通信要求您在应用程序之间具有完全信任。在 javascript 中，window.external 指向外部应用程序，您可以使用它来调用 WebBrowser 之外的方法。

为此，您需要在两者之间创建一个接口。应该使用可以使用 Javascript 直接访问的辅助方法。让我们看看如何使用 WPF WebBrowser Control 来实现这一点。

```
[PermissionSet(SecurityAction.Demand, Name = "FullTrust")]
[ComVisible(true)]
public class ObjectForScriptingHelper
{
    Mainwindow mExternalWPF;
    public ObjectForScriptingHelper(Window1 w)
    {
        this.mExternalWPF = w;
    } 
```

}

所以基本上该类允许您直接从 javascript 调用 .NET 方法。这个帮助类被设置为 FullTrust 和 ComVisible。所以我们的WebBrowser，实际上是一个Com元素，可以直接与类通信，调用ObjectForScriptingHelper类中的方法，该类是加载浏览器的父窗口。javascript 将允许使用 window.external 指向此类。

```
[PermissionSet(SecurityAction.Demand, Name = "FullTrust")]
[ComVisible(true)]
public class ObjectForScriptingHelper
{
    Mainwindow mExternalWPF;
    public ObjectForScriptingHelper(Window1w)
    {
        this.mExternalWPF = w;
    }
    public void InvokeMeFromJavascript(string jsscript)
        {
            this.mExternalWPF.tbMessageFromBrowser.Text = string.Format("Message :{0}", jsscript);
        }

} 
```

假设我在 ObjectForScriptingHelper 类中有一个方法 InvokeMeFromJavascript。要使用此类，您需要创建它的一个对象并将其传递给 WebBrowser 控件的 ObjectForScripting 属性。

所以我写，

```
ObjectForScriptingHelper helper = new ObjectForScriptingHelper(this);
this.wbMain.ObjectForScripting = helper; 
```

现在让我们导航到一个 html：

```
<input type="text" id="txtMessage" />
<input type="button" value="InvokeMe" onclick="javascript:window.external.InvokeMeFromJavascript(document.getElementById('txtMessage').value);" /> 
```

这将加载一个文本框和一个按钮。在上面的代码中，我使用 window.external 来调用我在 ObjectForScriptHelper 类中声明的相同函数。因此，当您单击 WebBrowser 内的 Button 时，您将看到消息显示在其外部的 TextBlock 中。

在上图中，当用户点击 WebBrowser 内部的 InvokeMe 时，它​​会更新放置在外部的 TextBlock。

**资料来源：[www.dotnetfunda.com/articles/article840-working-with-webbrowser-in-wpf.aspx](http://www.dotnetfunda.com/articles/article840-working-with-webbrowser-in-wpf.aspx)**

# powershell - 开始工作中无法识别的功能

> ID：12293701
> 
> 赞同：1
> 
> 时间：2012-09-06T05:51:18.350
> 
> 标签：powershell, start-job

我在模块 sysinfo.psm1 中创建了一个函数“Get-Uptime”并导入了该模块。

```
C:/pstools> get-command -Module sysinfo

CommandType     Name                                                Definition
-----------     ----                                                ----------
Function        Get-Uptime                                          ... 
```

该功能在 Powershell 中运行良好。但是，每当我在 Start-job -scriptblock {Get-Uptime $servernae} 中使用 Get-Uptime 函数时，作业都会失败并出现以下错误

```
Receive-Job : The term 'get-uptime' is not recognized as the name of a
cmdlet, function, script file, or operable program. Check the spelling of 
the name, or if a path was included, verify that the path is correct and 
try again. 
```

有人可以让我知道我错过了什么吗？我在网上搜索并找到了在脚本块中编写所有代码而不是使用函数的建议，但我尝试过并遇到了类似的错误。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T11:06:36.133

您可以使用**InitializationScript**导入模块：

```
PS II> Start-Job -InitializationScript {import-module "c:\module.psm1"} -script {Uptime} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T05:59:51.370

在调用您的函数之前，您必须在 ScriptBlock 中明确导入您的模块。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T07:01:37.840

PowerShell 作业在单独的进程中运行，为每个作业对象创建一个新的 powershell.exe，并且该进程不知道在另一个会话中导入的模块。

为了需要 Get-Uptime 功能，请在 Start-Job 命令中加载模块。

# windows-8 - 如何在 Windows 8 中获取 Microsoft vc++ 运行时包？

> ID：12293703
> 
> 赞同：0
> 
> 时间：2012-09-06T05:51:38.077
> 
> 标签：windows-8

在我的 SDK 中，我没有找到该引用。我安装了 Windows 8 发布预览版。处理 Bingmaps 示例尝试添加引用，例如右键单击解决方案-->添加引用-->Windows-->我没有的扩展找到 Microsoft VC++ 运行时包。请告诉我。在哪里可以得到这个 dll？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T22:06:35.207

查看以下文章了解更多详情：

[http://blogs.msdn.com/b/vcblog/archive/2012/09/28/10354327.aspx](http://blogs.msdn.com/b/vcblog/archive/2012/09/28/10354327.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:12:53.500

您是否安装了必应地图 SDK？这应该为您将 C++ 运行时添加到环境中。

# append - 写入同一个文件；不覆盖

> ID：12293707
> 
> 赞同：0
> 
> 时间：2012-09-06T05:52:12.523
> 
> 标签：append, threadpool, fileoutputstream

这是我的片段。

```
File file = new File(Thread.currentThread().getName());

for(each element of the list){
createStringWriterAndPopulateDataToBeWritten
FileOutputStream fo = new FileOutputStream(file);
OutputStreamWriter out = new OutputStreamWriter(fo,"UTF-8");
out.write(sw.toString());
out.close();
} 
```

现在说我有一个`newFixedThreadPool`大小`S`; 我向这个线程池传递了一个要完成的工作列表。现在每次调用线程时，它都会创建一个名称为线程名称的文件，然后写入该文件，但在循环中它只是覆盖该文件。

即使再次调用 Thread ，如何使它能够追加而不是覆盖，这在这种情况下很可能发生，因为我的线程池工作列表很长。

注意：传递给 ThreadPool 的作业列表的每个元素也是一个列表，这就是为什么在代码段中有一个 for 循环。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T06:08:03.850

> 但在循环中它只是覆盖文件。

是的 - 你正在创建`FileOutputStream` *循环*。如果您在循环*之前*`FileOutputStream`创建（和`OutputStreamWriter`），那么只需在循环中进行写入，它将为整个操作创建一个文件。

 *请注意，`close`调用应该在一个`finally`块中，因此即使代码抛出异常，您也可以关闭编写器。

如果再次调用此代码，您*还*需要附加到文件中，只需更改以下内容：

```
FileOutputStream fo = new FileOutputStream(file); 
```

至

```
FileOutputStream fo = new FileOutputStream(file, true); 
```

根据[文档](http://docs.oracle.com/javase/7/docs/api/java/io/FileOutputStream.html#FileOutputStream%28java.io.File,%20boolean%29)，第二个参数说明是追加 (true) 还是覆盖 (false)。*

# haskell - Haskell：制作一个对列表起作用的函数

> ID：12293709
> 
> 赞同：1
> 
> 时间：2012-09-06T05:52:16.337
> 
> 标签：haskell, higher-order-functions

> **可能重复：**
> [为什么在haskell中不允许这样的函数定义？](https://stackoverflow.com/questions/6168880/why-is-such-a-function-definition-not-allowed-in-haskell)

我想创建一个函数`flist`，它将一个函数`f`作为参数并返回另一个函数，其参数将是一个列表，但行为与`f`.

例如：

```
let f x1 x2 x3 = x1+ x2 + x3 
```

我想要这种行为

```
(flist f) [x1,x2,x3] = x1+x2+x3 
```

当列表的长度不是 3 时，它可能会以任何方式运行。`flist`应该处理任何函数（不仅是具有 3 个参数的函数，即 if `g x1 x2 x3 x4 = x1+x2+x3*x4`， then `(flist g) [x1,x2,x3,x4] = x1+x2+x3*x4`）。

我试过这个，

```
flist f [] = f
flist f (x:xs) = flist (f x) xs 
```

但它不起作用。我如何实现这一目标？我可以使用数据类型来做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T08:33:11.680

With type families, you can get pretty far—but it surely is not for the faint of heart:

```
{-# LANGUAGE FlexibleContexts  #-}
{-# LANGUAGE FlexibleInstances #-}
{-# LANGUAGE TypeFamilies      #-}

class FList a where
  type Point a
  flist :: a -> [Point a] -> Point a

instance FList (a -> a) where
  type Point (a -> a) = a
  flist f [x] = f x

instance (FList (a -> b), a ~ Point (a -> b)) => FList (a -> (a -> b)) where
  type Point (a -> (a -> b)) = Point (a -> b)
  flist f (x : xs) = flist (f x) xs 
```

For your example, we get:

```
> let f x y z = x + y + z
> flist f [2, 3, 5]
10 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T06:13:04.757

你不能`flist`直接创建你的，因为没有合理的类型可以给它。

```
flist :: (a -> a -> a -> ..... -> a) -> [a] -> a 
```

取决于列表的长度——你只知道`flist`列表的长度，即不是在编译时，所以你不能编译它。

使用[Template Haskell](http://www.haskell.org/haskellwiki/Template_Haskell)可以编写一个`flist`你可以使用的“函数”，`[flist| (+) [3,4] ]`但是 Template Haskell 是非常高级的东西，我认为你现在应该避免使用它，而且语法甚至比你想要的更丑，后者已经比你想要的更丑了`(+) 3 4`.

如果您知道将有多少个参数，则可以使用以下函数之一：

```
flist1 f [x] = f x
flist2 f [x,y] = f x y
flist3 f [x,y,z] = f x y z
flist4 f [a,b,c,d] = f a b c d
flist5 f [a,b,c,d,e] = f a b c d e 
```

但是如果你想对它们做一些统一的事情，比如把它们加起来，你可以使用预先编写的高阶函数，比如`sum`or`product`来相加或相乘，或者使用[`foldl`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v:foldl). （例如，语言定义`sum`是`sum = foldl (+) 0`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T07:41:03.383

这对于固定数量的参数来说并不太难，例如

```
flist3 f [a,b,c] = f a b c
flist3 _ _       = 0 
```

（我注意到您在数字上下文中使用该函数，因此默认`0`为非常好。）

在更一般的上下文中，可以通过返回一个`Maybe`值来表示匹配成功或失败，例如

```
flist3 f [a,b,c] = Just $ f a b c
flist3 _ _       = Nothing 
```

然后可以像这样使用它：

```
import Data.Maybe

exp f n = (sum . mapMaybe (flist3 f) $ booleanCube n) / 2^n 
```

（`mapMaybe`将函数映射到`a -> Maybe b`列表上，但删除`Nothing`s 并将`Just`值收集到列表中。如果删除`Nothing`s 不是所需的行为，那么可以使用`mapM`（对函数进行一些调整）。）

但是，如果`exp`应该能够采用类型等函数`a -> a -> a`，`a -> a -> a -> a`那么给出`exp`一个可用的类型签名将是困难的（在像 Haskell 这样的非依赖类型语言中可能是不可能的），因为 arity`f`不是固定的。

（正如@Mystic 所展示的，可以使用类型类在 Haskell 中创建可变参数函数，但这与您想要的行为略有不同。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T08:39:09.963

有很多关于 arity-generic 编程的论文，例如

[http://www.seas.upenn.edu/~ccasin/papers/aritygen.pdf](http://www.seas.upenn.edu/~ccasin/papers/aritygen.pdf)

但是您应该解释手头的更大任务，因为似乎不需要高级通用技术，并且可以解决您的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T07:37:11.700

```
flist f [] = f
flist f (x:xs) = flist (f x) xs 
```

像这样的东西不会起作用，因为你 f 的类型不固定。

```
f :: (? -> b) -> [a] -> b 
```

你在什么地方插入？将取决于列表中元素的数量。
那么像类型类之类的东西可以用来定义这样的函数。

一种方法是为您拥有的所有类型的函数显式定义每个函数，或者您可以使用 little type hackery。

我写了一个凌乱的 hack，只是为了表明可以使用某种类型的技巧。它仍然不是很灵活，因为您需要显式地提供所有参数的类型。添加一些功能依赖可能会解决这个问题。当元素的数量与函数 f 的顺序不匹配时，它会引发异常。

```
{-# LANGUAGE UndecidableInstances #-}
{-# LANGUAGE FunctionalDependencies #-}
{-# LANGUAGE MultiParamTypeClasses #-}
{-# LANGUAGE FlexibleInstances #-}

class FList a b c where 
    flist :: a -> b -> c

instance FList a [s] a where 
    flist x _ = x

instance (FList a [s] b) => FList (s -> a) [s] b where 
    flist f (x:xs) =  flist (f x) xs

f:: Int -> Int -> Int -> Int 
f a b c = a + b * c

test :: [Int]
test = [1,2,3]

foo :: Int 
foo = (flist f) test 
```

无论您尝试做什么，都可能不需要此类功能。我唯一的建议是重新审视你的代码并尝试看看是否有一些简单的东西适合。

# c# - 如何在 c# net 中的 datagridview 中启用/禁用更改单元格值的按钮

> ID：12293712
> 
> 赞同：1
> 
> 时间：2012-09-06T05:52:31.937
> 
> 标签：c#, .net, events, c#-4.0, datagridview

如何在c#net中的datagridview中启用/禁用更改单元格值的按钮在datagridview的哪个事件上，我应该编写我的代码？

提前致谢， 斯瓦纳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T05:58:42.313

试试这样：

```
private void DataGridView1_CellValueChanged(object sender, 
                                            DataGridViewCellEventArgs e)
{
    // enable/disable a button
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-21T11:54:15.053

```
private void dataGridView1_CellValueChanged(object sender, DataGridViewCellEventArgs e){
  if(dataGridView1.Columns[e.ColumnIndex].Name == "YourColumnName"){
    // enable/disable a button
  }
} 
```

或者

```
private void dataGridView1_CellEndEdit(object sender, DataGridViewCellEventArgs e){
  if(dataGridView1.Columns[e.ColumnIndex].Name == "YourColumnName"){
    // enable/disable a button
  }
} 
```

# eclipse - 当我搜索某些特定单词时 Eclipse 崩溃

> ID：12293713
> 
> 赞同：1
> 
> 时间：2012-09-06T05:52:44.927
> 
> 标签：eclipse

当我搜索单词“initial”时，Eclipse 会死掉并关闭它的窗口而没有任何通知（尽管您可以看到找到的条目列表正在显示片刻，然后崩溃）。

我用这个表格搜索：http: [//i.imgur.com/jxSph.png](http://i.imgur.com/jxSph.png)

例如，此错误不会影响单词“init”、“initia”、“initial”。

为什么会这样？这绝对不是内存溢出问题，因为我的代码中有大量“首字母”：即使我只搜索字母“a”的所有条目，搜索也能正常工作。是否应该报告错误？

**升级版：**

在 chrash 时，我在 Eclipse 错误日志视图中找不到任何内容。这是我运行 Eclipse 并让它崩溃时来自控制台的错误日志：

```
susei@desktop:$ eclipse -debug > ~/eclipse.log
The program 'Eclipse' received an X Window System error.
This probably reflects a bug in the program.
The error was 'BadAlloc (insufficient resources for operation)'.
  (Details: serial 61179 error_code 11 request_code 53 minor_code 0)
  (Note to programmers: normally, X errors are reported asynchronously;
   that is, you will receive the error a while after causing it.
   To debug your program, run it with the --sync command line
   option to change this behavior. You can then get a meaningful
   backtrace from your debugger if you break on the gdk_x_error() function.) 
```

eclipse.log 中生成的错误日志似乎不包含任何有趣的信息，除了有关我的文件夹结构和文件的信息:)

# iphone - 从服务器获取多个 url 图像并在 iphone 的滚动视图中显示

> ID：12293716
> 
> 赞同：0
> 
> 时间：2012-09-06T05:52:50.150
> 
> 标签：iphone, ios, objective-c, uitableview, uiscrollview

谁能告诉我如何在tableview的uiscrollview中获取url图像和显示。我从过去三天一直在挣扎，但没有输出。:(

```
<slider1>
 <item>
 <thumbNail>http://www.bizfy.com/demo/biscoot/a1.png</thumbNail>
   <contentId>img001</contentId>
   </item>
  <item>
     <thumbNail>http://www.bizfy.com/demo/biscoot/a1.png</thumbNail>
    <contentId>img002</contentId>
  </item>
  <item>
  <thumbNail>http://www.bizfy.com/demo/biscoot/a1.png</thumbNail>
    <contentId>img003</contentId>
     </item>
    <item>
    <thumbNail>http://www.bizfy.com/demo/biscoot/a1.png</thumbNail>
    <contentId>img004</contentId>
     </item>
     <item>
     <thumbNail>http://www.bizfy.com/demo/biscoot/a1.png</thumbNail>
  <contentId>img005</contentId>
   </item>
   </slider1> 
```

我想存储所有图像 url 并在 tableview 单元格的 uiscrollview 中显示。请给我建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T01:25:29.747

并发症在哪里？

解析 XML 以获取所有 url。将这些网址放在一个`NSArray`. 现在将此 NSArray 作为 a`datasource`提供给`UITableView`实例。确保其中`UITableViewCell`有一个`UIImageView`，以便您可以在滚动发生时插入图像网址。就是这样，这就是它的全部。

更重要的一点，在主 UI 线程中分配`url`将`uiimageview`挂起 UI，因为它正在主线程中下载图像。因此，您必须在生成的后台线程中进行图像下载，然后在下载图像`uimageview`后在主 UI 线程中更新。这样用户体验会很流畅。

由于您尚未发布任何代码，因此我也没有...

# java - 单击按钮时，我想显示一条 toast 消息

> ID：12293720
> 
> 赞同：0
> 
> 时间：2012-09-06T05:53:20.557
> 
> 标签：java, android

我希望仅在单击此按钮的前 3 次才显示此消息，并且即使重新启动应用程序也不会再显示此消息，我想知道实现它的最佳方法。我计划创建一个数据库并在按下按钮时在该数据库中输入值，并将我的 toast 逻辑放在 if 语句中。我想知道是否有更好的方法可以在不使用数据库的情况下做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T06:03:20.340

如果更好意味着更容易，那么您可以使用[SharedPreferences](http://developer.android.com/guide/topics/data/data-storage.html#pref)机制。

共享首选项基本上是整个活动通用的属性集，或者可以由每个活动单独使用。

```
class Listener implements OnClickListener{
    final private SharedPreferences prefs;
    Listener(SharedPreferences prefs){
         this.prefs=prefs;
    }
    public void onClick(View view) {
        int count = prefs.getInt("toastCount",0);
        if(count>=3) return;
        //do something else here
        SharedPreferences.Editor editor = prefs.edit();
        editor.putInt("toastCount", count+1);
        editor.commit();
    }
} 
```

`getPreferences()`您可以使用活动中的或`getSharedPreferences()`方法启动此侦听器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T05:55:03.300

我认为[Shared Preferences](http://developer.android.com/guide/topics/data/data-storage.html#pref)比 DB 更好。

您只需添加`count(int)`共享首选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T05:58:12.153

您可以使用以下代码：

```
button.setOnClickListener(new OnClickListener() {
public void onClick(View view) {

        Toast.makeText(app.getBaseContext(),"Your message", 
            Toast.LENGTH_SHORT).show();
} 
```

});

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T05:58:32.147

考虑将数据保存在内存中的某个位置。像这样的琐碎数据不应该进入数据库。这将是一个糟糕的决定。

# iphone - 自定义弹出警报视图

> ID：12293727
> 
> 赞同：1
> 
> 时间：2012-09-06T05:54:08.237
> 
> 标签：iphone, ios, xcode4

我们可以编辑`PopOverAlert`.... 是否可以自定义`UIAlertView`. 我也想让`UIAlertView`透明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T06:01:30.810

请参阅此处[http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-uialertview-custom-graphics/](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-uialertview-custom-graphics/)和此处[http://soulwithmobiletechnology.blogspot.in/2011/09/customized-alertview 的自定义警报视图。 html](http://soulwithmobiletechnology.blogspot.in/2011/09/customized-alertview.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T05:58:55.290

是的，您可以自定义 UIAlertView ... 取决于您实际想要做什么... 使用这些链接[更改 UIAlertView 的背景颜色？](https://stackoverflow.com/questions/883208/changing-the-background-color-of-a-uialertview)[我怎样才能拥有一个完全透明的 UIAlertView](https://stackoverflow.com/questions/12243489/how-can-i-have-a-totally-transparent-uialertview)？

# vb.net - 卢森 | 文档中短语的出现次数

> ID：12293739
> 
> 赞同：0
> 
> 时间：2012-09-06T05:55:14.953
> 
> 标签：vb.net, lucene.net

我需要在仅使用 Lucene 的文档中找到像“1 年”这样的短语的出现次数。

我知道我们可以使用 TermDocs.seek(Term) 和 TermDocs.freq() 找到任何“1”或“年”的出现。

有什么办法可以发现没有出现这样的短语吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T04:25:23.660

一点研究，哇哦，我明白了......

首先创建了一个这样的索引阅读器对象......

```
Dim indexReader As Lucene.Net.Index.IndexReader
indexReader = New Lucene.Net.Index.IndexReader.Open(INDEX_DIRECTORY, True) 
```

然后为您的每个术语创建跨度附近查询...

```
Dim spanQuery1 As SpanTermQuery = New SpanTermQuery(New Term(FIELD, "2"))
Dim spanQuery2 As SpanTermQuery = New SpanTermQuery(New Term(FIELD, "year"))

Dim near As SpanNearQuery = New SpanNearQuery(New SpanQuery() 
                                             {spanQuery1, spanQuery2},
                                              0, 
                                              False) 
```

创建一个 Span 对象来存储所有匹配的 span ....

```
 Dim spans As Spans = near.GetSpans(indexReader) 
```

遍历每个跨度以获取跨度出现的数量..

```
 Dim num As Integer = 0

        While (spans.Next)
            num += 1
        End While 
```

现在 num 包含短语“1 年”的出现次数。

目前它显示所有文档都没有出现。您可以跳到任何文档使用

```
spans.SkipTo(i) 
```

并且可以通过以下方式查找短语是否在当前文档中

```
spans.doc() 
```

我从[这个 PPT](http://www.google.co.in/url?sa=t&rct=j&q=phrase%20occurrences%20lucene.net&source=web&cd=4&ved=0CD4QFjAD&url=http://www.cnlp.org/apachecon2005/AdvancedLucene.ppt&ei=ekVIUI6RDsnVrQfb6YGQDQ&usg=AFQjCNGXYv_JuKCnIdfBy0oQ2hQth8zWYA)中得到了这个想法。也许这可以帮助你回答你的许多其他问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T07:18:42.520

我在 lucene.net 中创建了一个用于实现 shingle 过滤器功能的类文件。它就像java中的那个一样工作。它在 C# 中，但我想即使你转换它也能工作。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Lucene.Net.Analysis.Tokenattributes;
using Lucene.Net.Util;
namespace Lucene.Net.Analysis.Shingle
{

 /**
 * A ShingleFilter constructs shingles (token n-grams) from a token stream.
 * In other words, it creates combinations of tokens as a single token.
 *
 * For example, the sentence "please divide this sentence into shingles"
 * might be tokenized into shingles "please divide", "divide this",
 * "this sentence", "sentence into", and "into shingles".
 *
 * This filter handles position increments > 1 by inserting filler tokens
 * (tokens with termtext "_"). It does not handle a position increment of 0.
 */

public sealed class ShingleFilter : TokenFilter
{

    private LinkedList<State> shingleBuf = new LinkedList<State>();
    private StringBuilder[] shingles;
    private String tokenType = "shingle";

    /**
     * filler token for when positionIncrement is more than 1
     */
    public static readonly char[] FILLER_TOKEN = { '_' };

    /**
     * default maximum shingle size is 2.
     */
    public const int DEFAULT_MAX_SHINGLE_SIZE = 2;

    /**
     * The string to use when joining adjacent tokens to form a shingle
     */
    public const String TOKEN_SEPARATOR = " ";

    /**
     * By default, we output unigrams (individual tokens) as well as shingles
     * (token n-grams).
     */
    private bool outputUnigrams = true;

    /**
     * maximum shingle size (number of tokens)
     */
    private int maxShingleSize;

    /**
     * Constructs a ShingleFilter with the specified single size from the
     * {@link TokenStream} <code>input</code>
     *
     * @param input input stream
     * @param maxShingleSize maximum shingle size produced by the filter.
     */
    public ShingleFilter(TokenStream input, int maxShingleSize)
        : base(input)
    {
        SetMaxShingleSize(maxShingleSize);
        this.termAtt = AddAttribute<ITermAttribute>(); ;
        this.offsetAtt = AddAttribute<IOffsetAttribute>(); ;
        this.posIncrAtt = AddAttribute<IPositionIncrementAttribute>(); ;
        this.typeAtt = AddAttribute<ITypeAttribute>(); ;
    }

    /**
     * Construct a ShingleFilter with default shingle size.
     *
     * @param input input stream
     */
    public ShingleFilter(TokenStream input)
        : this(input, DEFAULT_MAX_SHINGLE_SIZE)
    {
    }

    /**
     * Construct a ShingleFilter with the specified token type for shingle tokens.
     *
     * @param input input stream
     * @param tokenType token type for shingle tokens
     */
    public ShingleFilter(TokenStream input, String tokenType)
        : this(input, DEFAULT_MAX_SHINGLE_SIZE)
    {
        setTokenType(tokenType);
    }

    /**
     * Set the type of the shingle tokens produced by this filter.
     * (default: "shingle")
     *
     * @param tokenType token tokenType
     */
    public void setTokenType(String tokenType)
    {
        this.tokenType = tokenType;
    }

    /**
     * Shall the output stream contain the input tokens (unigrams) as well as
     * shingles? (default: true.)
     *
     * @param outputUnigrams Whether or not the output stream shall contain
     * the input tokens (unigrams)
     */
    public void SetOutputUnigrams(bool outputUnigrams)
    {
        this.outputUnigrams = outputUnigrams;
    }

    /**
     * Set the max shingle size (default: 2)
     *
     * @param maxShingleSize max size of output shingles
     */
    public void SetMaxShingleSize(int maxShingleSize)
    {
        if (maxShingleSize < 2)
        {
            throw new ArgumentException("Max shingle size must be >= 2");
        }
        shingles = new StringBuilder[maxShingleSize];
        for (int i = 0; i < shingles.Length; i++)
        {
            shingles[i] = new StringBuilder();
        }
        this.maxShingleSize = maxShingleSize;
    }

    /**
     * Clear the StringBuilders that are used for storing the output shingles.
     */
    private void ClearShingles()
    {
        for (int i = 0; i < shingles.Length; i++)
        {
            shingles[i].Length = 0;
        }
    }

    private AttributeSource.State nextToken;
    private int shingleBufferPosition;
    private int[] endOffsets;

    /* (non-Javadoc)
     * @see org.apache.lucene.analysis.TokenStream#next()
     */
    public sealed override bool IncrementToken()
    {
        while (true)
        {
            if (nextToken == null)
            {
                if (!FillShingleBuffer())
                {
                    return false;
                }
            }

            nextToken = shingleBuf.First.Value;

            if (outputUnigrams)
            {
                if (shingleBufferPosition == 0)
                {
                    RestoreState(nextToken);
                    posIncrAtt.PositionIncrement = 1;
                    shingleBufferPosition++;
                    return true;
                }
            }
            else if (shingleBufferPosition % this.maxShingleSize == 0)
            {
                shingleBufferPosition++;
            }

            if (shingleBufferPosition < shingleBuf.Count)
            {
                RestoreState(nextToken);
                typeAtt.Type = tokenType;
                offsetAtt.SetOffset(offsetAtt.StartOffset, endOffsets[shingleBufferPosition]);
                StringBuilder buf = shingles[shingleBufferPosition];
                int termLength = buf.Length;
                char[] TermBuffer = termAtt.TermBuffer();
                if (TermBuffer.Length < termLength)
                    TermBuffer = termAtt.ResizeTermBuffer(termLength);
                buf.CopyTo(0, TermBuffer, 0, termLength);
                termAtt.SetTermLength(termLength);
                if ((!outputUnigrams) && shingleBufferPosition % this.maxShingleSize == 1)
                {
                    posIncrAtt.PositionIncrement = 1;
                }
                else
                {
                    posIncrAtt.PositionIncrement = 0;
                }
                shingleBufferPosition++;
                if (shingleBufferPosition == shingleBuf.Count)
                {
                    nextToken = null;
                    shingleBufferPosition = 0;
                }
                return true;
            }
            else
            {
                nextToken = null;
                shingleBufferPosition = 0;
            }
        }
    }

    private int numFillerTokensToInsert;
    private AttributeSource.State currentToken;
    private bool hasCurrentToken;

    private ITermAttribute termAtt;
    private IOffsetAttribute offsetAtt;
    private IPositionIncrementAttribute posIncrAtt;
    private ITypeAttribute typeAtt;

    /**
     * Get the next token from the input stream and push it on the token buffer.
     * If we encounter a token with position increment > 1, we put filler tokens
     * on the token buffer.
     * <p/>
     * Returns null when the end of the input stream is reached.
     * @return the next token, or null if at end of input stream
     * @throws IOException if the input stream has a problem
     */
    private bool GetNextToken()
    {

        while (true)
        {
            if (numFillerTokensToInsert > 0)
            {
                if (currentToken == null)
                {
                    currentToken = CaptureState();
                }
                else
                {
                    RestoreState(currentToken);
                }
                numFillerTokensToInsert--;
                // A filler token occupies no space
                offsetAtt.SetOffset(offsetAtt.StartOffset, offsetAtt.StartOffset);
                termAtt.SetTermBuffer(FILLER_TOKEN, 0, FILLER_TOKEN.Length);
                return true;
            }

            if (hasCurrentToken)
            {
                if (currentToken != null)
                {
                    RestoreState(currentToken);
                    currentToken = null;
                }
                hasCurrentToken = false;
                return true;
            }

            if (!input.IncrementToken()) return false;
            hasCurrentToken = true;

            if (posIncrAtt.PositionIncrement > 1)
            {
                numFillerTokensToInsert = posIncrAtt.PositionIncrement - 1;
            }
        }
    }

    /**
     * Fill the output buffer with new shingles.
     *
     * @throws IOException if there's a problem getting the next token
     */
    private bool FillShingleBuffer()
    {
        bool addedToken = false;
        /*
         * Try to fill the shingle buffer.
         */
        do
        {
            if (GetNextToken())
            {
                shingleBuf.AddLast(CaptureState());
                if (shingleBuf.Count > maxShingleSize)
                {
                    shingleBuf.RemoveFirst();
                }
                addedToken = true;
            }
            else
            {
                break;
            }
        } while (shingleBuf.Count < maxShingleSize);

        if (shingleBuf.Count == 0)
        {
            return false;
        }

        /*
         * If no new token could be added to the shingle buffer, we have reached
         * the end of the input stream and have to discard the least recent token.
         */
        if (!addedToken)
        {
            shingleBuf.RemoveFirst();
        }

        if (shingleBuf.Count == 0)
        {
            return false;
        }

        ClearShingles();

        endOffsets = new int[shingleBuf.Count];
        // Set all offsets to 0
        endOffsets.Initialize();

        int i = 0;
        for (IEnumerator<State> it = shingleBuf.GetEnumerator(); it.MoveNext(); )
        {
            RestoreState(it.Current);
            for (int j = i; j < shingles.Length; j++)
            {
                if (shingles[j].Length != 0)
                {
                    shingles[j].Append(TOKEN_SEPARATOR);
                }
                shingles[j].Append(termAtt.TermBuffer().Take(termAtt.TermLength()).ToArray());
            }

            endOffsets[i] = offsetAtt.EndOffset;
            i++;
        }

        return true;
    }

    public override void Reset()
    {
        base.Reset();
        nextToken = null;
        shingleBufferPosition = 0;
        shingleBuf.Clear();
        numFillerTokensToInsert = 0;
        currentToken = null;
        hasCurrentToken = false;
    }
} 
```

}

# php - CakePHP 2.2 和读取 MS SQL 二进制列

> ID：12293740
> 
> 赞同：0
> 
> 时间：2012-09-06T05:55:19.347
> 
> 标签：php, sql-server, cakephp, encoding, pdo

我最近接手了一个 PHP/CakePHP 项目。现在我想将框架从 CakePHP 1.3 更新到 CakePHP 2.2。数据库服务器是 MS SQL Server（版本 10.50）。我还尝试连接到 SQL Sever 版本 9.0 SP1。同样的问题。应用程序连接到数据库服务器，可以很好地读取文本数据。

如果我想读取 blob/binary/image 列，就会出现问题。这似乎是一个解码问题，但我不知道它可能发生在哪里。在 CakePHP 1.3 版本中，我看到类似

```
\x2 \x0\x1xÚmŽÁN„0\x10†_¥öN... 
```

在我得到的 CakePHP 2.2 版本中

```
0220000178DA6D8EC14E8430 ... 
```

存储的项目是一个压缩的 XHTML 文件，附加了一些描述标签。它是由另一个应用程序编写的。

我已将应用程序编码设置为 UTF-8，并尝试在数据库配置中设置 encoding='utf8' 字符串（即使它应该只适用于 MySQL）。我已经更新了 Microsoft 的 Native SQL Client。我正在使用带有 PHP 5.3.8 的 XAMPP 1.7.7 安装。我也尝试过使用 XAMPP 1.8 和 Microsoft 的新 SQL-PDO 驱动程序进行不同的安装。没有任何帮助。

我不知道这个问题来自哪里，即使我怀疑 PDO 层/PHP 驱动程序。

**该应用程序在 CakePHP 1.3 上运行良好。**

感谢您的帮助/时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T05:37:06.523

我已经想通了。问题是 MS 的 PDO 层中的一个已知错误。可以用litte函数修复

```
function hextostr($x) 
{
  $s='';
  foreach(explode("\n",trim(chunk_split($x,2))) as $h) $s.=chr(hexdec($h));
  return($s);
} 
```

来自 Marko Kozjak 在[http://jeremycook.ca/2010/02/21/handling-binary-data-with-pdo/的评论](http://jeremycook.ca/2010/02/21/handling-binary-data-with-pdo/)

# web-scraping - 在哪里下载电影数据集？

> ID：12293742
> 
> 赞同：4
> 
> 时间：2012-09-06T05:55:31.817
> 
> 标签：web-scraping, dataset, imdb

我想下载一个电影转储，其中包含单个文件中的电影名称和演员列表等基本信息。我寻找了几个选项，例如[http://api.themoviedb.org/2.1/](http://api.themoviedb.org/2.1/)和[http://api.themoviedb.org/2.1/](http://api.themoviedb.org/2.1/)。TheMovieDB 不提供批量下载数据的选项。IMDB 有数据，但似乎分散在文件中。此外，我无法弄清楚如何从演员、电影名称等的单独文件中拼接数据，因为它们似乎没有任何通用键。如果我在这里遗漏了什么，请告诉我。

有人可以让我知道如何下载电影数据集吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T15:14:22.567

您可以使用 Freebase 以 JSON 格式下载[电影](http://www.freebase.com/view/film/film)和[演员](http://www.freebase.com/view/film/actor)。有关更多信息，请参阅[API wiki](http://wiki.freebase.com/wiki/API)。

例如，查询：

```
GET https://www.googleapis.com/freebase/v1/mqlread?query=[{%22type%22:%22/film/actor%22,%22id%22:null,%22name%22:null}] 
```

将返回：

```
{
  "result": [{
    "type": "/film/actor",
    "id": "/en/milla_jovovich",
    "name": "Milla Jovovich"
  }, {
    "type": "/film/actor",
    "id": "/en/angus_macfadyen",
    "name": "Angus Macfadyen"
  }, {
    "type": "/film/actor",
    "id": "/en/aisha_tyler",
    "name": "Aisha Tyler"
  }, {
    "type": "/film/actor",
    "id": "/en/stephen_dorff",
    "name": "Stephen Dorff"
  }, {
    "type": "/film/actor",
    "id": "/en/vincent_laresca",
    "name": "Vincent Laresca"
  }, {
    "type": "/film/actor",
    "id": "/en/dawn_greenhalgh",
    "name": "Dawn Greenhalgh"
  }, {
    "type": "/film/actor",
    "id": "/en/nola_augustson",
    "name": "Nola Augustson"
  }, {
    "type": "/film/actor",
    "id": "/en/dudley_moore",
    "name": "Dudley Moore"
  }, {
    "type": "/film/actor",
    "id": "/en/julie_andrews",
    "name": "Julie Andrews"
  }, {
    "type": "/film/actor",
    "id": "/en/bo_derek",
    "name": "Bo Derek"
  }, {
    "type": "/film/actor",
    "id": "/en/robert_webber",
    "name": "Robert Webber"
  }, {
    "type": "/film/actor",
    "id": "/en/dee_wallace-stone",
    "name": "Dee Wallace-Stone"
  }, {
    "type": "/film/actor",
    "id": "/en/ryan_phillippe",
    "name": "Ryan Phillippe"
  }, {
    "type": "/film/actor",
    "id": "/en/salma_hayek",
    "name": "Salma Hayek"
  }, {
    "type": "/film/actor",
    "id": "/en/neve_campbell",
    "name": "Neve Campbell"
  }, {
    "type": "/film/actor",
    "id": "/en/mike_myers",
    "name": "Mike Myers"
  }, {
    "type": "/film/actor",
    "id": "/en/satoshi_tsumabuki",
    "name": "Satoshi Tsumabuki"
  }, {
    "type": "/film/actor",
    "id": "/en/masanobu_ando",
    "name": "Masanobu Ando"
  }, {
    "type": "/film/actor",
    "id": "/en/david_gahan",
    "name": "Dave Gahan"
  }, {
    "type": "/film/actor",
    "id": "/en/martin_gore",
    "name": "Martin Gore"
  }, {
    "type": "/film/actor",
    "id": "/en/andrew_fletcher_1961",
    "name": "Andrew Fletcher"
  }, {
    "type": "/film/actor",
    "id": "/en/alan_wilder",
    "name": "Alan Wilder"
  }, {
    "type": "/film/actor",
    "id": "/en/gerard_butler",
    "name": "Gerard Butler"
  }, {
    "type": "/film/actor",
    "id": "/en/lena_headey",
    "name": "Lena Headey"
  }, {
    "type": "/film/actor",
    "id": "/en/david_wenham",
    "name": "David Wenham"
  }, {
    "type": "/film/actor",
    "id": "/en/robert_de_niro",
    "name": "Robert De Niro"
  }, {
    "type": "/film/actor",
    "id": "/en/gerard_depardieu",
    "name": "G\u00e9rard Depardieu"
  }, {
    "type": "/film/actor",
    "id": "/en/dominique_sanda",
    "name": "Dominique Sanda"
  }, {
    "type": "/film/actor",
    "id": "/en/john_belushi",
    "name": "John Belushi"
  }, {
    "type": "/film/actor",
    "id": "/en/ned_beatty",
    "name": "Ned Beatty"
  }, {
    "type": "/film/actor",
    "id": "/en/dan_aykroyd",
    "name": "Dan Aykroyd"
  }, {
    "type": "/film/actor",
    "id": "/en/lorraine_gary",
    "name": "Lorraine Gary"
  }, {
    "type": "/film/actor",
    "id": "/en/murray_hamilton",
    "name": "Murray Hamilton"
  }, {
    "type": "/film/actor",
    "id": "/en/robert_downey_jr",
    "name": "Robert Downey Jr."
  }, {
    "type": "/film/actor",
    "id": "/en/kiefer_sutherland",
    "name": "Kiefer Sutherland"
  }, {
    "type": "/film/actor",
    "id": "/en/winona_ryder",
    "name": "Winona Ryder"
  }, {
    "type": "/film/actor",
    "id": "/en/john_hurt",
    "name": "John Hurt"
  }, {
    "type": "/film/actor",
    "id": "/en/richard_burton",
    "name": "Richard Burton"
  }, {
    "type": "/film/actor",
    "id": "/en/suzanna_hamilton",
    "name": "Suzanna Hamilton"
  }, {
    "type": "/film/actor",
    "id": "/en/cyril_cusack",
    "name": "Cyril Cusack"
  }, {
    "type": "/film/actor",
    "id": "/en/gregor_fisher",
    "name": "Gregor Fisher"
  }, {
    "type": "/film/actor",
    "id": "/en/tony_leung_chiu_wai",
    "name": "Tony Leung Chiu Wai"
  }, {
    "type": "/film/actor",
    "id": "/en/gong_li",
    "name": "Gong Li"
  }, {
    "type": "/film/actor",
    "id": "/en/faye_wong",
    "name": "Faye Wong"
  }, {
    "type": "/film/actor",
    "id": "/en/takuya_kimura",
    "name": "Takuya Kimura"
  }, {
    "type": "/film/actor",
    "id": "/en/zhang_ziyi",
    "name": "Zhang Ziyi"
  }, {
    "type": "/film/actor",
    "id": "/en/carina_lau",
    "name": "Carina Lau"
  }, {
    "type": "/film/actor",
    "id": "/en/chang_chen",
    "name": "Chang Chen"
  }, {
    "type": "/film/actor",
    "id": "/en/bird_mcintyre",
    "name": "Bird McIntyre"
  }, {
    "type": "/film/actor",
    "id": "/en/maggie_cheung",
    "name": "Maggie Cheung"
  }, {
    "type": "/film/actor",
    "id": "/en/chevy_chase",
    "name": "Chevy Chase"
  }, {
    "type": "/film/actor",
    "id": "/en/steve_martin",
    "name": "Steve Martin"
  }, {
    "type": "/film/actor",
    "id": "/en/martin_short",
    "name": "Martin Short"
  }, {
    "type": "/film/actor",
    "id": "/en/joe_mantegna",
    "name": "Joe Mantegna"
  }, {
    "type": "/film/actor",
    "id": "/en/jon_lovitz",
    "name": "Jon Lovitz"
  }, {
    "type": "/film/actor",
    "id": "/en/alfonso_arau",
    "name": "Alfonso Arau"
  }, {
    "type": "/film/actor",
    "id": "/en/tony_plana",
    "name": "Tony Plana"
  }, {
    "type": "/film/actor",
    "id": "/en/al_pacino",
    "name": "Al Pacino"
  }, {
    "type": "/film/actor",
    "id": "/en/carmen_maura",
    "name": "Carmen Maura"
  }, {
    "type": "/film/actor",
    "id": "/en/luis_hostalot",
    "name": "Luis Hostalot"
  }, {
    "type": "/film/actor",
    "id": "/en/veronica_forque",
    "name": "Veronica Forqu\u00e9"
  }, {
    "type": "/film/actor",
    "id": "/en/hume_cronyn",
    "name": "Hume Cronyn"
  }, {
    "type": "/film/actor",
    "id": "/en/jessica_tandy",
    "name": "Jessica Tandy"
  }, {
    "type": "/film/actor",
    "id": "/en/frank_mcrae",
    "name": "Frank McRae"
  }, {
    "type": "/film/actor",
    "id": "/en/elizabeth_pena",
    "name": "Elizabeth Pe\u00f1a"
  }, {
    "type": "/film/actor",
    "id": "/en/dennis_boutsikaris",
    "name": "Dennis Boutsikaris"
  }, {
    "type": "/film/actor",
    "id": "/en/hal_warren",
    "name": "Hal Warren"
  }, {
    "type": "/film/actor",
    "id": "/en/tom_neyman",
    "name": "Tom Neyman"
  }, {
    "type": "/film/actor",
    "id": "/en/john_reynolds_1941",
    "name": "John Reynolds"
  }, {
    "type": "/film/actor",
    "id": "/en/rajnikanth",
    "name": "Rajnikanth"
  }, {
    "type": "/film/actor",
    "id": "/en/sridevi_kapoor",
    "name": "Sridevi Kapoor"
  }, {
    "type": "/film/actor",
    "id": "/en/kantimathi",
    "name": "Kantimathi"
  }, {
    "type": "/film/actor",
    "id": "/en/konkona_sen_sharma",
    "name": "Konkona Sen Sharma"
  }, {
    "type": "/film/actor",
    "id": "/en/shabana_azmi",
    "name": "Shabana Azmi"
  }, {
    "type": "/film/actor",
    "id": "/en/soumitra_chatterjee",
    "name": "Soumitra Chatterjee"
  }, {
    "type": "/film/actor",
    "id": "/en/waheeda_rehman",
    "name": "Waheeda Rehman"
  }, {
    "type": "/film/actor",
    "id": "/en/rahul_bose",
    "name": "Rahul Bose"
  }, {
    "type": "/film/actor",
    "id": "/en/william_hopper",
    "name": "William Hopper"
  }, {
    "type": "/film/actor",
    "id": "/en/joan_taylor",
    "name": "Joan Taylor"
  }, {
    "type": "/film/actor",
    "id": "/en/frank_puglia",
    "name": "Frank Puglia"
  }, {
    "type": "/film/actor",
    "id": "/en/james_garner",
    "name": "James Garner"
  }, {
    "type": "/film/actor",
    "id": "/en/rod_taylor_1930",
    "name": "Rod Taylor"
  }, {
    "type": "/film/actor",
    "id": "/en/eva_marie_saint",
    "name": "Eva Marie Saint"
  }, {
    "type": "/film/actor",
    "id": "/en/paul_walker",
    "name": "Paul Walker"
  }, {
    "type": "/film/actor",
    "id": "/en/eva_mendes",
    "name": "Eva Mendes"
  }, {
    "type": "/film/actor",
    "id": "/en/devon_aoki",
    "name": "Devon Aoki"
  }, {
    "type": "/film/actor",
    "id": "/en/john_payne_1912",
    "name": "John Payne"
  }, {
    "type": "/film/actor",
    "id": "/en/evelyn_keyes",
    "name": "Evelyn Keyes"
  }, {
    "type": "/film/actor",
    "id": "/en/brad_dexter",
    "name": "Brad Dexter"
  }, {
    "type": "/film/actor",
    "id": "/en/frank_faylen",
    "name": "Frank Faylen"
  }, {
    "type": "/film/actor",
    "id": "/en/peggie_castle",
    "name": "Peggie Castle"
  }, {
    "type": "/film/actor",
    "id": "/en/jean-hugues_anglade",
    "name": "Jean-Hugues Anglade"
  }, {
    "type": "/film/actor",
    "id": "/en/beatrice_dalle",
    "name": "B\u00e9atrice Dalle"
  }, {
    "type": "/film/actor",
    "id": "/en/vincent_lindon",
    "name": "Vincent Lindon"
  }, {
    "type": "/film/actor",
    "id": "/en/dominique_pinon",
    "name": "Dominique Pinon"
  }, {
    "type": "/film/actor",
    "id": "/en/joaquin_phoenix",
    "name": "Joaquin Phoenix"
  }, {
    "type": "/film/actor",
    "id": "/en/james_gandolfini",
    "name": "James Gandolfini"
  }, {
    "type": "/film/actor",
    "id": "/en/catherine_keener",
    "name": "Catherine Keener"
  }, {
    "type": "/film/actor",
    "id": "/en/norman_reedus",
    "name": "Norman Reedus"
  }, {
    "type": "/film/actor",
    "id": "/en/dean_martin",
    "name": "Dean Martin"
  }]
} 
```

同样，你会这样做：

```
https://www.googleapis.com/freebase/v1/mqlread?query=[{%22type%22:%22/film/film%22,%22id%22:null,%22name%22:null}] 
```

获取电影标题。

# windows - Perl 不接收命令行参数？

> ID：12293751
> 
> 赞同：3
> 
> 时间：2012-09-06T05:56:17.967
> 
> 标签：windows, perl

我刚刚在工作中获得了一台新计算机，我正在尝试启动并在其上运行 perl。当我执行脚本时，我遇到了 Perl 没有读取命令行输入的问题。

我使用 Win7，如果我像这样从命令行调用脚本：

```
myscript.pl 1 2 3 
```

它没有收到提供的 1 2 3，但如果我这样称呼它：

```
perl myscript.pl 1 2 3 
```

确实如此。

第一个示例之前对我有用，我们在工作中使用的所有脚本都调用类似的 perl 脚本。

```
assoc .pl 
```

给我

```
.pl=Perl 
```

和 ftype perl

给我

```
perl=C:\Perl64\Bin\perl.exe "%1" %* 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T06:03:13.997

您可以尝试删除以下注册表项：

```
HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.pl 
```

它应该“重置”错误行为并使其遵循您配置的运行设置。

# cuda - 多个主机线程启动单个 CUDA 内核

> ID：12293752
> 
> 赞同：9
> 
> 时间：2012-09-06T05:56:18.423
> 
> 标签：cuda, cuda-streams

对于我的 CUDA 开发，我使用的是一台 16 核的机器和 1 个 GTX 580 GPU 和 16 个 SM。对于我正在做的工作，我计划启动 16 个主机线程（每个内核上 1 个），每个线程启动 1 个内核，每个线程有 1 个块和 1024 个线程。我的目标是在 16 个 SM 上并行运行 16 个内核。这可能/可行吗？

我试图尽可能多地阅读有关独立上下文的信息，但似乎没有太多可用的信息。据我了解，每个主机线程都可以有自己的 GPU 上下文。但是，如果我使用独立的上下文，我不确定内核是否会并行运行。

我可以将所有 16 个主机线程的所有数据读取到一个巨大的结构中，并将其传递给 GPU 以启动一个内核。但是，它会复制太多，并且会减慢应用程序的速度。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T18:45:32.583

GPU 上一次只能有一个上下文。实现所需并行性的一种方法是使用 CUDA 流。您可以在上下文中创建 16 个流，并按名称将 memcopies 和内核启动到流中。您可以在以下网址阅读有关使用流的快速网络研讨会的更多信息：http: [//developer.download.nvidia.com/CUDA/training/StreamsAndConcurrencyWebinar.pdf](http://developer.download.nvidia.com/CUDA/training/StreamsAndConcurrencyWebinar.pdf)。完整的 API 参考在 CUDA 工具包手册中。CUDA 4.2 手册可在[http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_Toolkit_Reference_Manual.pdf 获得](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_Toolkit_Reference_Manual.pdf)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T20:18:53.943

虽然多线程应用程序可以在同一个 GPU 上同时保存多个 CUDA 上下文，但这些上下文不能同时执行操作。激活时，每个上下文都只能使用 GPU，并且必须在另一个上下文（可能包括使用渲染 API 或显示管理器的操作）可以访问 GPU 之前让步。

所以总而言之，这个策略不适用于任何当前的 CUDA 版本或硬件。

# php - 如何使用分组多列 - PHP 制作 jQuery Grid？

> ID：12293753
> 
> 赞同：2
> 
> 时间：2012-09-06T05:56:27.840
> 
> 标签：php, javascript, jquery, jqgrid

如何生成一个在多列上分组的 jquery 网格？

下面是我正在使用的代码，我需要用多个列名对网格进行分组。目前，它被分组为一列。

列名称的选择菜单出现在下拉菜单中。

这是使用所选菜单项对网格进行分组的 jQuery 代码：

```
<script>
        jQuery("#chngroup").change(function()
        {
            var vl = jQuery(this).val(); 
            if(vl) 
            { 
                if(vl == "clear") 
                    jQuery("#<?php echo $grid_id ?>").jqGrid('groupingRemove',true); 
                else 
                    jQuery("#<?php echo $grid_id ?>").jqGrid('groupingGroupBy',vl); 
            } 
        });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:51:02.130

要对多列进行分组，您需要将所有列名称`groupingGroupBy`作为数组传递给方法（数组中的第一个值是第一级，第二个值是第二级等）。

例如，假设您想先按*名称*分组，然后按*日期*列分组：

```
 jQuery("#grid_id").jqGrid('groupingGroupBy', ['name', 'date']); 
```

这应该可以解决问题。您可以在附加参数中传递所有其他`groupingView`选项（作为将用于扩展 default 的 na 对象`groupingView`）。

**更新**

我在 jsFiddle -> [jqGrid multigrouping with 'groupingGroupBy' 方法上创建了一个实时示例](http://jsfiddle.net/tpeczek/pfyuS/)

# ios - 在 ios 中舍入小数部分

> ID：12293754
> 
> 赞同：10
> 
> 时间：2012-09-06T05:56:32.787
> 
> 标签：ios, nsnumberformatter

```
NSNumberFormatter *format = [[NSNumberFormatter alloc]init];
[format setNumberStyle:NSNumberFormatterDecimalStyle];
[format setRoundingMode:NSNumberFormatterRoundHalfUp];
[format setMaximumFractionDigits:2];
NSString *temp = [format stringFromNumber:[NSNumber numberWithFloat:23.4451]];
NSLog(@"%@",temp); 
```

我需要将六位小数四舍五入到小数点后两位。在 iOS 中，我尝试了上面的代码。当我输入 23.45 时，我得到答案 23.5，但是当我输入 23.445 时，答案是 23.44。

有人可以在 iOS 中清理“四舍五入”吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-06T08:29:29.250

有趣的是，至少对我来说，这*是*一个浮点精度问题。正如 rdelmar 在评论中所建议的那样。

至少在这个精度级别，通过使用双精度可以避免这个问题。例如：

```
NSNumberFormatter *format = [[NSNumberFormatter alloc]init];
[format setNumberStyle:NSNumberFormatterDecimalStyle];
[format setRoundingMode:NSNumberFormatterRoundHalfUp];
[format setMaximumFractionDigits:2];
[format setMinimumFractionDigits:2];

// With Float:
NSLog(@"%@",[format stringFromNumber:[NSNumber numberWithFloat:23.445]]); // Float
// Logs 23.44
NSLog(@"%@",[format stringFromNumber:[NSNumber numberWithDouble:23.445]]); // Double
// Logs 23.45 
```

所以你没有遭受糟糕的代码，只是不精确的变量。

# objective-c - Objective C 中的模运算符

> ID：12293757
> 
> 赞同：9
> 
> 时间：2012-09-06T05:56:45.123
> 
> 标签：objective-c

来自“Objective C 编程”（Kochan）：

程序 5.8 提示用户输入一个数字，然后从最右边到最左边的数字显示该数字的数字。

```
// Program to reverse the digits of a number
#import <Foundation/Foundation.h>

int main (int argc, char *argv[])

{
NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
int number, right_digit;

NSLog (@"Enter your number.");
scanf ("%i", &number);

while ( number != 0 ) {
right_digit = number % 10;
NSLog (@"%i", right_digit);
number /= 10;
}

[pool drain];
return 0;
} 
```

我的问题是：当用户输入个位数 1 到 9 时会发生什么？我找不到关于这种情况的任何材料。编译后，程序只需继续返回该单个数字。这是为什么？我试图为这项任务编写代码并花费 2 个小时，试图为这个“如果数字是个位数”问题合并循环和决策。解决方案是如此无知！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-06T06:11:50.027

模运算符为您提供除法后的余数。如果您有 8 % 10，则结果为 8，因为 8 / 10 为 0，余数为 8。如果您有 38 % 10，则得到相同的结果，38 / 10 为 3，余数为 8。

编辑：模数是您通常在小学第一科时学到的。有趣的是，大多数孩子对模数没有问题，但是当他们得知 8 / 10 是 0.8 时，他们对模数的理解就有问题了。

# android - ActionBar Android中的渐变动画

> ID：12293758
> 
> 赞同：1
> 
> 时间：2012-09-06T05:56:46.407
> 
> 标签：android, android-actionbar, android-animation

我正在尝试在我的 Android 应用程序中为 ActionBar 设置动画。所以我写了一个动画drawable，用作ActionBar中的背景：

```
getActionBar().setBackgroundDrawable(getResources().getDrawable(R.drawable.bad_info)); 
```

R.drawable.bad_info 看起来像：

```
<?xml version="1.0" encoding="utf-8"?>

<animation-list
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/selected"
        android:oneshot="false">

    <item android:duration="50">
        <shape>
            <gradient android:type="linear"
                      android:endColor="#630000"
                      android:startColor="#FF0202"
                      android:angle="270"/>
        </shape>
    </item>

    <item android:duration="50">
        <shape>
            <gradient android:type="linear"
                      android:endColor="#3C0000"
                      android:startColor="#FF0202"
                      android:angle="90"/>
        </shape>
    </item>

</animation-list> 
```

如何从代码中“打开”和“关闭”ActionBar 中的动画？也许你会给我一个提示，如何用另一种方式实现动画。

谢谢。

# django - nginx 缓存，staticgenerator 与 memcached

> ID：12293759
> 
> 赞同：3
> 
> 时间：2012-09-06T05:56:54.067
> 
> 标签：django, caching, nginx, memcached

我正在做的是避免请求命中 Django 并直接从 nginx 提供缓存数据。
相关问题：[Django staticgenerator vs CACHE_BACKEND](https://stackoverflow.com/questions/4988270/django-staticgenerator-vs-cache-backend)

似乎有两种选择：https:
[//github.com/torchbox/django-nginx-memcache](https://github.com/torchbox/django-nginx-memcache)
[https://github.com/mrj0/staticgenerator](https://github.com/mrj0/staticgenerator) - 这个似乎更容易使用

在尝试了 django-nginx-memcache 之后，我发现了一些缺点：

*   没有从 django 提供缓存内容的回退（可以修复）。
*   nginx 必须为 url 的 md5 sum 生成重新编译（我认为这无法修复）。
    *   **编辑：**查看其他解决方案（例如：[http](http://soyrex.com/articles/django-nginx-memcached/) ://soyrex.com/articles/django-nginx-memcached/ ）后，我发现似乎没有必要使用 md5 cache_keys。也许这应该是一个选择。
*   能够定义应该缓存的 url 模式列表会很好。到目前为止，只有装饰器可用（可以修复）。
*   在我看来，代码应该更多地模仿标准 django 缓存后端，使用**UpdateCacheMiddleware**和**FetchFromCacheMiddleware**。这将使存在标准 django 缓存解决方案的地方更容易实现 nginx 缓存。它还可以解决问题 #1（可以修复）。
*   模块的奇怪命名。虽然项目名为**django-nginx-memcache**，但包名为**Django-Memcache-for-Nginx**和应用程序**nginx_memcache**以包含在 django installed_apps 中（可以修复）。

哪个更快？
你会使用哪一个，为什么？
我应该解决我在**django-nginx-memcache**上遇到的问题，还是**静态生成器**更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T07:57:37.643

这似乎回答了我所有的问题，并提供了比**django-nginx-memcache**更优雅的解决方案，即修补 django 缓存系统： http: [//www.willmcgugan.com/blog/tech/2009/3/1/fast -caching-with-django-and-nginx/](http://www.willmcgugan.com/blog/tech/2009/3/1/fast-caching-with-django-and-nginx/)

### 来自页面评论的基准：

静态内容几乎比使用 nginx 从 memcache 提供服务快 4 倍。

请求速率：6243.8 req/s (0.2 ms/req) (静态 html)

请求速率：2285.5 req/s (0.4 ms/req)（memcache 中的相同 html）

我想我会选择**staticgenerator**但请随时发表您的想法。

### 编辑：

我意识到我正在并行运行两个网络服务器，如果我使用**staticgenerator** ，我需要一种方法来同步缓存的数据。我想我可以分叉它并让它通过网络在两台服务器上写入文件。对此有什么想法吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T06:05:06.013

您似乎想缓存生成的页面。您是否尝试过 Varnish ( [https://www.varnish-cache.org/](https://www.varnish-cache.org/) )。

以前我正在研究 Django 的缓存，我发现了这篇关于使用 Varnish 缓存来缓存生成的页面的文章。 [http://ghughes.com/blog/2011/11/11/using-varnish-with-django-for-high-performance-caching/](http://ghughes.com/blog/2011/11/11/using-varnish-with-django-for-high-performance-caching/)

可能它会为你工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T09:23:00.380

本着保持简单的精神，在 Nginx 的代理模块中使用缓存指令怎么样？

按照[https://serverfault.com/a/68160/46143](https://serverfault.com/a/68160/46143)和[http://www.rfxn.com/nginx-caching-proxy/](http://www.rfxn.com/nginx-caching-proxy/)

# mysql - 如何通过匹配Mysql中的同一张表来获取数据

> ID：12293761
> 
> 赞同：3
> 
> 时间：2012-09-06T05:57:01.257
> 
> 标签：mysql, join

我在 Mysql DB 表中有以下表结构：Mytable

```
--------------------------------
| uid | locationid | projectid |
--------------------------------
|  2  |      4     |    2     | 
|  2  |      4     |    2     | 
|  2  |      3     |    5     | 
|  2  |      3     |    5     | 
|  2  |      1     |    2     | 
|  2  |      1     |    2     | 
|  2  |      1     |    2     | 
|  2  |      1     |    1     | 
|  3  |      1     |    5     | 
|  3  |      1     |    2     | 
|  3  |      1     |    1     | 
|  3  |      1     |    1     | 
|  7  |      3     |    1     | 
|  5  |      1     |    5     | 
|  6  |      4     |    2     | 
|  5  |      1     |    5     | 
|  3  |      4     |    1     | 
|  3  |      3     |    3     | 
|  7  |      4     |    2     | 
|  7  |      4     |    3     | 
```

假设我通过了 uid=2 那么对于 uid=2 locationid 和 projectid 的唯一组合是这样的

```
|  2  |      4     |    2     | 
|  2  |      3     |    5     | 
|  2  |      1     |    2     | 
|  2  |      1     |    1     | 
```

现在我想要所有具有上述 locationid 和 projectid 组合的 uid 匹配。意味着结果应该是

```
|  3  |      1     |    2     | 
|  3  |      1     |    1     | 
|  3  |      1     |    1     | 
|  6  |      4     |    2     | 
|  7  |      4     |    2     | 
```

如果我通过 uid=3 那么结果应该是

```
|  2  |      1     |    2     | 
|  2  |      1     |    2     | 
|  2  |      1     |    2     | 
|  2  |      1     |    1     | 
|  5  |      1     |    5     | 
|  5  |      1     |    5     | 
```

为此，我使用了以下查询，但它给出了错误的结果，因为 locationid 和 projectid 组合不正确匹配

```
 SELECT a.*
 FROM Mytable a, Mytable b 
 WHERE a.locationid = b.locationid
 AND a.projectid = b.projectid
 AND a.locationid IN (SELECT DISTINCT locationid FROM Mytable WHERE uid=$pmid)
 AND a.projectid IN(SELECT DISTINCT projectid FROM Mytable WHERE uid=$pmid)
 AND a.uid !=$pmid 
```

这里 $pmid 是我传递的 uid 值。我的查询有什么问题？我的查询是否正确？请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T06:01:55.713

这应该有效：

```
SELECT a.*
FROM Mytable a
     INNER JOIN (SELECT DISTINCT locationid, projectid
                 FROM   Mytable
                 WHERE  uid = 2
                ) b
        ON a.locationid = b.locationid
           AND a.projectid = b.projectid
           AND a.uid <> 2; 
```

# 示例：[SQLFiddle](http://sqlfiddle.com/#!2/71dc7/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T06:02:51.477

尝试这个：

```
SELECT t.* 
FROM   Mytable t
JOIN
       ( SELECT distinct locationid , projectid
         FROM Mytable
         WHERE uid=<uid>)a
ON     t.locationid =a.locationid 
AND    t.projectid=a.projectid
WHERE  t.uid != <uid> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T06:10:50.870

试试这个查询 -

```
SELECT t1.* FROM mytable t1
  JOIN (SELECT * FROM mytable WHERE uid = 2 GROUP BY locationid, projectid) t2
    ON t1.uid <> t2.uid AND
       t1.locationid = t2.locationid AND
       t1.projectid = t2.projectid; 
```

指定您的`uid`in WHERE 子句（第二行）。

# javascript - 添加选项以在js中动态创建选择框

> ID：12293768
> 
> 赞同：1
> 
> 时间：2012-09-06T05:57:39.547
> 
> 标签：javascript

我正在动态创建一个选择框及其选项，现在我已经创建了类似的选项

```
"passport","license","rta","medicare" 
```

我正在单击按钮创建此选择框...

现在，如果我第一次单击该按钮，我需要创建所有选项，但是如果我下次单击该按钮，则第一个选定字段不应该出现或可以分级，如果我在第一个选择框中选择不同的字段然后这个字段应该出现在第二个选择框中，像这样，我应该能够添加三个选择了唯一选项的选择框，请帮助我，因为我无法使用动态 ID 创建它......任何帮助都会很好赞赏！！！！

# android - Android AIDL 安全性

> ID：12293780
> 
> 赞同：7
> 
> 时间：2012-09-06T05:58:36.817
> 
> 标签：android, aidl

当应用程序使用 AIDL 调用远程服务时，是否提供了任何安全性？还是只是像恶意应用程序可以读取数据一样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T06:52:46.440

在 Android 上，一个进程不能正常访问另一个进程的内存。

当您绑定到具有 AIDL 接口的应用程序时，系统将在这些进程之间建立连接。因此，只有这两个应用程序可以读取通过 AIDL 接口共享的信息。

如果您想确定，您应该在 , 中进行额外检查`onBind(Intent intent)`，以确保连接的是您自己的应用程序

提示：阅读本页第一部分：http: [//developer.android.com/guide/components/aidl.html](http://developer.android.com/guide/components/aidl.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T06:23:21.147

您可以随时过滤您的方法以限制允许的包。如果包没有权限，则抛出 SecurityException

```
Collection<String> callingpackages = getCallingPackages();

if(!callingpackages.contains("yourpackagename"){
//Throw securityException.
} 
```

和 getCallingPackages

```
private Collection<String> getCallingPackages() {
     int caller = Binder.getCallingUid();
     if (caller == 0) {
         return null;
     }
     return Lists.newArrayList(mContext.getPackageManager().getPackagesForUid(caller));
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-28T02:55:07.597

示例安全性`service`，`signature`通过使用`android:protectionLevel="signature"`，只有签署**相同签名**（相同密钥库）的应用程序才能绑定到您的服务

应用服务器`AndroidManifest.xml`

```
<manifest ...>

    <permission
        android:name="my.MyCustomPermission"
        android:protectionLevel="signature" />

    <application
        ...>

        <service
            ...
            android:permission="my.MyCustomPermission">
            ...
        </service>
    </application>

</manifest> 
```

应用客户端`AndroidManifest.xml`

```
<manifest ...>

    <uses-permission android:name="my.MyCustomPermission"/>

    <application
        ...
    </application>

</manifest> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-27T13:43:20.667

此外，在建立与远程服务的服务连接时。指定运行服务的应用程序的包名称。

像这样

Intent serviceIntent = new intent("com.android.vending.billing.InAppBillingService.BIND"); serviceIntent.setPackage("com.android.vending"); bindService(serviceIntent, mServiceConn, Context.BIND_AUTO_CREATE);

注意：为确保您的应用程序安全，请始终在启动服务时使用显式意图，并且不要为您的服务声明意图过滤器。使用隐式意图启动服务是一种安全隐患，因为您无法确定会响应该意图的服务，并且用户无法看到哪个服务启动。从 Android 5.0（API 级别 21）开始，如果您使用隐式 Intent 调用 bindService()，系统将引发异常。

# java - 现有文件的比较不如预期

> ID：12293785
> 
> 赞同：0
> 
> 时间：2012-09-06T05:58:54.157
> 
> 标签：java, file

我正在尝试将文件的内容与 String 对象进行比较。但是即使内容相同，也说明内容不同，并且一次又一次地添加相同的内容。对于此代码的每次运行，都会重写相同的内容，这不是我想要的。相同的内容不应该被重写。

```
package fileOperations;

    import java.io.BufferedReader;
    import java.io.DataInputStream;
    import java.io.File;
    import java.io.FileInputStream;
    import java.io.FileNotFoundException;
    import java.io.FileWriter;
    import java.io.IOException;
    import java.io.InputStreamReader;

public class CompareFiles {

    /**
     * @param args
     * @throws Exception 
     */
    public static void main(String[] args) throws Exception {
        // TODO Auto-generated method stub

        CompareFiles cf = new CompareFiles();

        String file1 =("new apple") ;
            System.out.println(file1);
            System.out.println("length"+file1.length());
        File f = new File("C:\\Documents and Settings\\newfile.txt");
            cf.compareFiles(file1, f);

    }

    private void compareFiles(String new_content,File f) throws IOException{

        StringBuffer old_content=new StringBuffer();
        String str;
        FileInputStream fstream = new FileInputStream(f);
        BufferedReader br = new BufferedReader(new InputStreamReader(fstream));

          while ((str = br.readLine()) != null) {
              System.out.println(str);            
              old_content.append(str);
            }
          fstream.close();
        System.out.println("length "+old_content.length());

        if(!(0==new_content.compareTo(old_content.toString()))){
            createPrivateKey(f, new_content);
        }
    }

    public void createPrivateKey(File privateKeyFile,String keyString ){

        try {
            FileWriter fs = new FileWriter(privateKeyFile);
            fs.write(keyString);
            fs.close();
            System.out.println("Private key file contents added");

        } catch (IOException e) {
            System.out.println("Unable to access  private key file and/or config file");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T06:04:05.080

我会避免尝试重新发明轮子并使用[Apache commons](http://commons.apache.org/) -[`FileUtils.contentEquals()`](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#contentEquals%28java.io.File,%20java.io.File%29)比较两个文件并将[`FileUtils.readFileToString()`](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#readFileToString%28java.io.File%29)其作为`String`对象

Apache commons 是一个开源广泛使用的库，具有非常宽松的许可证，因此使用它通常是一个不错的选择。

PS您的错误可能是您没有在每行之后附加行终止符，但是如果不知道内容就很难分辨。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T09:33:35.337

内容相同，结果符合预期。没有处理断线，即需要在 old_content.append(str) 之前或之后附加“\n”；

# google-app-engine - 上传图片有问题

> ID：12293788
> 
> 赞同：0
> 
> 时间：2012-09-06T05:59:02.680
> 
> 标签：google-app-engine

上传我的应用程序时，始终会跳过图像。我尝试过使用 GoogleAppEngineLauncher 和命令行。无论哪种方式，日志中都没有错误。该图像是一个 png 文件，大小为 267KB。我的应用程序是用 python 编写的。

有任何想法吗？

谢谢，

# php - 我想从字符串中删除特殊符号、句点、连字符、下划线和数字 - PHP

> ID：12293790
> 
> 赞同：1
> 
> 时间：2012-09-06T05:59:10.723
> 
> 标签：php, regex, string, preg-replace

我的要求是从字符串中删除除下划线以外的所有特殊符号。

我在用..

```
$string = 'text-text_text+text@text(text)text&text.text*text\text/text';
$columnName = preg_replace('/[^a-zA-Z0-9_ %\[\]\.\(\)%&-]/s', '_', $string); 
```

输出：

```
text-text_text_text_text(text)text&text.text_text_text_text 
```

但它不会删除句点、& 符号、括号和破折号。在创建这个正则表达式时，我感到很无助。请帮忙..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T06:10:11.400

当您想删除除字母、数字和下划线以外的所有字符时，只需使用

`preg_replace('/[^a-zA-Z0-9]/', '_', $string);`

像`[^...`in`PREG`函数这样的表达式意味着您希望保留所有后续字符（因此您的表达式导致 not(!) 删除＆符号、括号

BTW：我在表达式中省略了下划线，因为它会再次被下划线替换，所以不需要在正则表达式中列出它

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T06:06:11.510

尝试：

```
$string = 'text-text_text+text@text(text)text&text.text*text\text/text';
$columnName = preg_replace('/[-`~!@#$%\^&*()+={}[\]\\\\|;:\'",.><?\/]/', '_', $string); 
```

输出：

```
text_text_text_text_text_text_text_text_text_text_text_text 
```

# javascript - 想在jquery中设计一个配色方案

> ID：12293791
> 
> 赞同：0
> 
> 时间：2012-09-06T05:59:12.220
> 
> 标签：javascript, jquery-ui, jquery, jquery-selectors

我是新手`jquery`。我最近设计了一个`website`我需要在其中实现颜色选择器。并且客户要求他需要网站[http://www.dulux.in/color_pallette_start.jsp](http://www.dulux.in/color_pallette_start.jsp)中使用的颜色选择器， 请帮助我如何使用`jquery`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T06:07:46.440

我可以用一个简单的主题选择器来指导你，使用 jQuery。在完成之前，您还有几个步骤。

1.  首先，确定主题元素。
2.  单独为这些元素创建单独的样式。
3.  使用 jQuery 切换类。

### 第 1 部分：内容。

让我们以这种方式获取示例内容：

```
<ul class="links">
    <li><a href="#">Link One</a></li>
    <li><a href="#">Link Two</a></li>
    <li><a href="#">Link Three</a></li>
</ul>
<div class="content">
<p>
    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
    tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
    quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
    consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
    cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
    proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
</p>

<p>
    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
    tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
    quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
    consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
    cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
    proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
</p>
​&lt;/div>
<div class="clear">Copyright</div> 
```

为此定义布局 CSS：

```
.links {float: left; width: 25%; margin: 0; padding: 0;}
.links li a {display: block; padding: 5px; text-decoration: none;}
.content {float: left; width: 75%;}
.clear {clear: both; padding: 10px; text-align: center;} 
```

### 第二部分：主题 CSS

假设我们有三个主题。浅色、深色和蓝色。相同的CSS：

```
.light {background: #fff;}
.light .links li a {color: #09f;}
.light .content p {color: #333;}

.dark {background: #000;}
.dark .links li a {color: #00f;}
.dark .content p {color: #ccc;}

.blue {background: #00f;}
.blue .links li a {color: #f00;}
.blue .content p {color: #0ff;} 
```

### 第三部分：现在是 JavaScript/jQuery 切换器。

我们只需要添加或删除类。由于我们知道主题的名称，我们将删除所有类并添加正确的类。

```
$(document).ready(function(){
    $(".links li a").click(function(){
        var theme = $(this).attr("href");
        $("body").removeAttr("class").addClass(theme);
        return false;
    });
}); 
```

我们已将此处理程序添加到链接中。现在我们需要使用主题名称更新链接。

```
<ul class="links">
    <li><a href="dark">Dark Theme</a></li>
    <li><a href="light">Light Theme</a></li>
    <li><a href="blue">Blue Theme</a></li>
</ul> 
```

现在单击相应的主题后，文档的主题就会更改。

### 小提琴：http: [//jsfiddle.net/QSZ3R/](http://jsfiddle.net/QSZ3R/)

希望你理解，这很容易！:)

### 对于调色板，您可以考虑使用[Color Picker - jQuery Plugin](http://www.eyecon.ro/colorpicker/)。

# google-apps-script - Google 电子表格：如何添加通知规则（在脚本中）

> ID：12293793
> 
> 赞同：2
> 
> 时间：2012-09-06T05:59:21.353
> 
> 标签：google-apps-script

是否可以为下一个任务创建脚本：

*   在电子表格中选择范围
*   单击菜单中的特殊项目（该部分没有问题）
*   结果：此范围自动添加为新的通知规则（请参阅菜单工具）

我检查了电子表格类（Range、Sheet、Spreadsheet、SpreadsheetApp），并在 inet 中搜索它 - 到目前为止没有结果。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T06:45:08.290

我认为现在不可能，因为正如您所写，没有 GAS 功能来管理通知规则。此外，我还没有在[问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)上找到任何要求此功能的功能请求。请向问题跟踪器提交新功能请求，以帮助 Google 了解用户需要哪些功能。

# iphone - 如何在不损失质量的情况下显示照片

> ID：12293796
> 
> 赞同：0
> 
> 时间：2012-09-06T05:59:49.340
> 
> 标签：iphone, ios, uiimageview, camera, photolibrary

嗨，我是 iOS 新手。

我希望在我的应用程序中实现照片编辑功能。该照片将从**iPhone 照片库**中检索。我试图将照片放在 UIImageView 中。但我没有得到更好的结果。UIImageview 不会将照片显示为在相册中。有很多分辨率和质量缺失。

如果我想以原始分辨率和质量显示照片，就像它在相册中一样。我需要遵循哪些步骤。如果有人知道，请指导我正确的方式。

```
 editingPhotoContainerIMV = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 320, self.view.frame.size.height)];
    [editingPhotoContainerIMV setContentMode:UIViewContentModeScaleAspectFit]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:42:12.210

试试 ALAssetRepresentation [fullResolutionImage](http://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAssetRepresentation_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T11:17:12.567

如果问题是您使用的是 Retina 设备，那么当您加载 UIImage 时，您应该使用：

```
UIImage *photoImage = [UIImage imageWithCGImage:(CGImageRef)imageRef scale:2 orientation: UIImageOrientationUp]; 
```

编辑：假设问题出在 Retina 设备上，那么您需要获取 CGImageRef。如果您已经有了 UIImage，那么您可以将上面的 'imageRef' 替换为 'myUIimage.CGImage'。如果不是，如果他的图像在文件中，那么您可以使用 UIImage 的 initWithContentsOfFile - 查看 UIImage 类参考。关键是从 UIImage 中取出 CGImage，然后得到一个比例因子为 2 的新图像。iOS 让您这样做的唯一方法是使用我在顶部显示的方法。

# symfony - ? symfony2中url中的符号

> ID：12293800
> 
> 赞同：0
> 
> 时间：2012-09-06T06:00:06.277
> 
> 标签：symfony, url

在我的项目中，我想要一个正常的标准获取 URL，例如`www.myproject.com?search=asd`.但在 symfony2 问号（“？”）中给出错误显示 URL 未找到（404 错误）。

我能够访问`www.myproject.com/search=asd`. 配置文件中是否有任何特定设置，以便 URL 中允许使用问号（“？”）？并且在我的项目中，我正在使用注释，并且我有很多这样的 URL，需要 URL 中的问号（“？”）。所以如果可能的话，我需要一般设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T06:29:53.640

Symfony 不会阻止您在路径中使用问号。

你确定你不需要斜线`www.myproject.com?search=asd`让它看起来像`www.myproject.com/?search=asd`吗？如果您仍然获得`404`状态，则根路径没有路由`/`。

# sql - 如何将数据插入另一台服务器的数据库？

> ID：12293803
> 
> 赞同：0
> 
> 时间：2012-09-06T06:00:12.230
> 
> 标签：sql, sql-server-2005

我使用的是 Sql Server 2005。
有两个不同的 Sql Server。
我需要从一台服务器获取数据并将它们插入到另一台服务器上的数据库中。
例如，假设有两台服务器调用 A 和 B。A
有 DB 调用 ADB，B 有 DB 调用 BDB。
我需要从 ADB 获取数据并将它们插入 BDB。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T06:13:18.860

你可以做很多方法..

如果两台服务器在同一个网络中，请使用SSMS中的**COPY DATABASE选项**

[复制数据库](http://msdn.microsoft.com/en-us/library/ms188664.aspx)

如果两台服务器不在同一个网络中，那么您可以从一个数据库**生成脚本**并在另一个数据库中执行

一个详细的例子是[here](http://blog.sqlauthority.com/2009/07/29/sql-server-2008-copy-database-with-data-generate-t-sql-for-inserting-data-from-one-table-to-another-table/)

另一种选择是**备份**数据库并在另一台服务器上恢复，如果数据量很大，这将非常简单有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T07:24:49.377

在服务器 A 上添加链接服务器 (B)

[http://msdn.microsoft.com/en-us/library/ms188279.aspx](http://msdn.microsoft.com/en-us/library/ms188279.aspx)

然后，您可以在两者之间传输数据。

[将表数据从一个 SQL Server 导出到另一个](https://stackoverflow.com/questions/11009189/export-table-data-from-one-sql-server-to-another)

高温高压

# html - Google Analytics for HTML inside ios native app

> ID：12293808
> 
> 赞同：6
> 
> 时间：2012-09-06T06:00:55.083
> 
> 标签：html, ios, google-analytics

我已经构建了一个具有静态 HTML 页面的 ios 应用程序。我正在使用 uiwebview 为我的 HTML 页面创建容器。

现在我想为我的页面使用谷歌分析。我已经下载了它的 SDK 并且它正在工作。现在我想跟踪 HTML 页面上一些按钮上的事件。如果使用下面的代码

```
var _gaq = _gaq || [];
_gaq.push(['_setAccount', '<Acc no>']);

(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})(); 
```

除了`_gaq.push(['_trackEvent',...)`不跟踪所需的事件。

我可以在普通的 Web HTML 方法中使用 SDK 和事件跟踪进行页面跟踪吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:41:22.940

您应该实现 Google Analytics 原生 SDK 并使其使用 UIWebviewDelegate 或 Javascript 事件做出反应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T12:01:56.997

首先，你需要通过 JS 调用原生函数。所以实现这个函数`-(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType;`并从你的 JS 中触发一个虚拟 url，并将所有跟踪信息添加到它，用斜杠 (/) 分隔。例如：（`window.location = '#abc://something.com/'+page;`此处的# 用于其他原因，此处不相关）。现在您所要做的就是，只需在我之前编写的函数中提取 url 字符串参数并将其传递给您的 GA 代码，该代码将使用您的页面值调用其跟踪方法。

# android - 底部的选项卡与列表视图重叠

> ID：12293812
> 
> 赞同：1
> 
> 时间：2012-09-06T06:01:22.523
> 
> 标签：android

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/background"
    android:orientation="vertical" >

    <include
        android:id="@+id/include1"
        android:layout_width="fill_parent"
        android:layout_height="70dp"
        layout="@layout/header_history" >
    </include>

    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:cacheColorHint="#00000000"
        android:divider="@android:color/black"
        android:dividerHeight="1.0sp"
        android:textColor="#000000" />

</LinearLayout> 
```

header_history.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/button" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="70dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:background="@drawable/button"
        android:gravity="left|center_vertical"
        android:text="   History"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="@android:color/white"
        android:textSize="24sp"
        android:textStyle="bold" />

</RelativeLayout> 
```

选项卡.xml

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:padding="5dp" />

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:color="#000000"
            android:gravity="bottom" />
    </RelativeLayout>

</TabHost> 
```

我在列表视图上动态添加数据并显示它。我在底部有一个标签栏，所以最后一条记录与列表视图的最后一条记录重叠。请帮助我找到正确的解决方案。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T07:13:22.823

`FrameLayout`在您的内部更新`TabHost`如下：

```
<FrameLayout
  android:id="@android:id/tabcontent"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:padding="5dp"

  android:layout_above="@android:id/tabs" /> 
```

# iphone - UITableView中如何显示分数和姓名分数从高到低？

> ID：12293813
> 
> 赞同：0
> 
> 时间：2012-09-06T06:01:23.747
> 
> 标签：iphone, ios, nsuserdefaults

```
 name                  score

   -----                 -----    

   Abby                   34  
    b                     40 
    c                     70
    d                     20 
```

我的代码是

```
 -(void)btnSaveScore
 {
if(!dictWinData)
    dictWinData = [[NSMutableDictionary alloc] init];

scoreCardArray = [[[NSUserDefaults standardUserDefaults] valueForKey:@"ScoreCard"] mutableCopy];
if([scoreCardArray count] == 0)
{
    scoreCardArray = [[NSMutableArray alloc] init];
    scorearray = [[NSMutableArray alloc] init];
    playerarray = [[NSMutableArray alloc] init];
}
else
{
    scorearray = [scoreCardArray objectAtIndex:0];
    playerarray = [scoreCardArray objectAtIndex:1];
    [scoreCardArray removeAllObjects];
}

 //    NSMutableArray *strName = [NSString stringWithFormat:@"%@",strNameOFPlayer];
NSMutableArray *strScore = [NSString stringWithFormat:@"%@",[NSString stringWithFormat:@"%d",iTap]];

if([strNameOFPlayer length]==7)
{
[scorearray addObject:strScore];
[playerarray addObject:strNameOFPlayer];
}
 else if ([strNameOFPlayer length] == 6)
 {
[scorearray addObject:strScore];
[playerarray addObject:strNameOFPlayer];
 }
else if ([strNameOFPlayer length] == 5)
{
[scorearray addObject:strScore];
[playerarray addObject:strNameOFPlayer];
}
else if ([strNameOFPlayer length] == 4)
{
    [scorearray addObject:strScore];
[playerarray addObject:strNameOFPlayer];
}
else if ([strNameOFPlayer length] == 3)
{
    [scorearray addObject:strScore];
[playerarray addObject:strNameOFPlayer];
}
else if ([strNameOFPlayer length] == 2)
{
    [scorearray addObject:strScore];
[playerarray addObject:strNameOFPlayer];
}
else if ([strNameOFPlayer length] == 1)
{
     [scorearray addObject:strScore];
     [playerarray addObject:strNameOFPlayer];
     }

     [scoreCardArray addObject:scorearray];
     [playerarray addObject:playerarray];

     NSUserDefaults *dfltsData = [NSUserDefaults standardUserDefaults];
     [dfltsData setObject:scoreCardArray forKey:@"ScoreCard"];
     [dfltsData synchronize];

     NSMutableArray *sortedArray = [self sortByfloatvalue:scoreCardArray array:playerarray];
     arrScores = [sortedArray objectAtIndex:0];
     arrPlayers = [sortedArray objectAtIndex:1];
     NSLog(@" %@ \n %@",scoreCardArray,playerarray);

     UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Alert"
                                                     message:@"Score is saved."
                                                    delegate:self
                                           cancelButtonTitle:@"Ok"
                                           otherButtonTitles:nil, nil];
     [alert show];
     [alert release];
   }

  -(NSMutableArray *)sortByfloatvalue:(NSMutableArray *)scorearray1 array:(NSMutableArray *)playerarray1
     {
         NSMutableArray *sortedArr = [NSMutableArray array];
         for(int k=0;k<[scorearray1 count];k++)
         {
             for(int l=k+1;l<[scorearray1 count];l++)
             {
                 if([[scorearray1 objectAtIndex:k] floatValue] < [[scorearray1 objectAtIndex:l] floatValue])
                 {
                     [scorearray1 exchangeObjectAtIndex:k withObjectAtIndex:l];   
                     [playerarray1 exchangeObjectAtIndex:k withObjectAtIndex:l];
                 }
             }
         }
         [sortedArr addObject:scorearray1];
         [sortedArr addObject:playerarray1];
         return sortedArr;
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T06:45:15.527

我只是发布你必须考虑的事情。

请参阅[NSArray](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#)文档`sortedArrayUsingFunction:context:`中的方法。

也有类似的方法[`NSMutableArray`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)

请检查那些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T06:45:20.130

查看 NSMutableArray 上的各种 'sortUsing...' 方法 - 您不必实现自己的排序。

例如这里是一些关于如何使用'sortUsingComparator'的文档

sortUsingComparator：使用给定 NSComparator 块指定的比较方法对数组进行排序。

```
- (void)sortUsingComparator:(NSComparator)cmptr 
```

*您在比较操作中使用 NSComparator 块，例如 NSArray 的 sortedArrayUsingComparator:，例如：*

```
NSArray *sortedArray = [array sortedArrayUsingComparator: ^(id obj1, id obj2) {

    if ([obj1 integerValue] > [obj2 integerValue]) {
        return (NSComparisonResult)NSOrderedDescending;
    }

    if ([obj1 integerValue] < [obj2 integerValue]) {
        return (NSComparisonResult)NSOrderedAscending;
    }
    return (NSComparisonResult)NSOrderedSame;
}]; 
```

# android - 自定义 ListPreference RadioButton 不保存所选项目

> ID：12293814
> 
> 赞同：0
> 
> 时间：2012-09-06T06:01:28.263
> 
> 标签：android

我正在根据[listPreference 中现有的 SO 问题自定义行构建一个项目？](https://stackoverflow.com/questions/4549746/custom-row-in-a-listpreference). 在我的程序版本中，选择单选按钮不起作用；最后检查的项目没有被保存。我的模拟项目在[这里](http://s1.picofile.com/file/7491144301/CustomListPreferenceComponent.rar.html)，并且有黑色背景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T07:47:25.457

做这些改变（部分代码）：

```
public void onClick(View v)
                    {
                        for(RadioButton rb : rButtonList)
                        {
                            if(rb.getId() != position)
                                rb.setChecked(false);
                        }

                        int index = position;
                        String value = entryValues[index].toString();
                        editor.putString("yourPref", value);
                        editor.commit();
                        Dialog mDialog = getDialog();
                        mDialog.dismiss(); 
```

* * *

```
CustomHolder(View row, int position)
        {    
            text = (TextView)row.findViewById(R.id.custom_list_view_row_text_view);
            text.setText(entries[position]);
       rButton =(RadioButton)row.findViewById(R.id.custom_list_view_row_radio_button);
            rButton.setId(position);

            if(entryValues[position].toString().equalsIgnoreCase(FontSize))
            {
                rButton.setChecked(true);
            } 
```

* * *

```
if(isChecked)
                    {
                        for(RadioButton rb : rButtonList)
                        {
                            if(rb != buttonView)
                                rb.setChecked(false);
                        }

                        int index = buttonView.getId();
                        String value = entryValues[index].toString();
                        editor.putString("yourPref", value);
                        editor.commit(); 
```

和 FontSize 变量填写构造函数：

```
SharedPreferences fontsizesetting = PreferenceManager.getDefaultSharedPreferences(context);
    String temp = fontsizesetting.getString("yourPref","16"); 
```

# java - java在字符串中搜索特定单词

> ID：12293816
> 
> 赞同：0
> 
> 时间：2012-09-06T06:01:31.440
> 
> 标签：java, string

我有这样的字符串：

```
This.is.a.great.place.too.work. 
```

（或者）

```
This/is/a/great/place/too/work/ 
```

我想看看这个字符串是否有“地方”这个词。

如果它们是我使用的字符串中的单词 contains("place")。因为这是我尝试拆分的所有一个字符串，但它给出了语法错误。你能告诉我如何得到它吗？

```
string.contains("place") works
String.split(".").contains("place")   Error 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T06:10:16.377

使用`string.split("\\.").contains("place")`它应该可以工作。`.(dot)`是正则表达式中的保留字符，您需要使用`\\.`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T06:11:42.630

尝试用“//”分割。

```
 String string = "This.is.a.great.place.too.work.";
    System.out.println(string.split("\\.")[0]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T06:05:02.620

您可以使用

```
String str = "This.is.a.great.place.too.work.";
boolean exists = str.contains("place"); 
```

这将检查以查找字符串中的单词**place**，如果找到则返回 true，否则返回 false

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T06:05:36.157

试试这个

```
string.split(pattern);
String[] strings = s.split(".") 
```

Split 将给出基于参数拆分的字符串数组。

您不能在字符串数组上应用包含，而是使用以下内容

```
boolean flag = string.contains("required_pattern"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-06T06:09:14.020

您无需拆分字符串即可使用包含方法。

```
string str = "This.is.a.great.place.too.work.";

boolean found = str.contains("substring"); // should return true or false 
```

替代方案您可以使用：

`str.indexOf("substring") > 0`判断子字符串是否在字符串中

要在一行中执行此操作，您可以执行以下操作：

```
Arrays.toString(str.split(".")).Contains("substring") 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-06T06:12:32.620

除了使用`.contains`我认为最好的方法之外，您似乎还想构建一个数据结构并通过它进行搜索。要执行此类操作，您需要执行以下操作：

```
String str = "This.is.a.great.place.too.work.";
String[] splitWords = str.split("\\.");  //The . is a special character in regex language, thus needs to be escaped. Alternatively you could use \\W which will split the string where ever it finds a character which is not a letter, digit or underscore.
List<String> words = Arrays.asList(splitWords);
System.out.println(words.contains("place")); 
```

或者，您可以使用如下[`indexOf(String str)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf%28java.lang.String%29)方法：

```
if (str.indexOf("place") > 0)
{
    System.out.println("String Exists");
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-06T06:33:27.773

像这样简单地尝试......

```
String s = "This/is/a/great/place/too/work/";
String ss = "This.is.a.great.place.too.work";

System.out.println(s.contains("place"));
System.out.println(ss.contains("place")); 
```

# apache-flex - 如何在 flex 中捕捉鼠标滚轮点击事件？

> ID：12293819
> 
> 赞同：0
> 
> 时间：2012-09-06T06:01:46.133
> 
> 标签：apache-flex, flex4, click, mouseevent, mousewheel

如何在 flex 中捕捉**鼠标滚轮点击事件？**我用

```
this.addEventListener(MouseEvent.MOUSE_WHEEL,function(){}); 
```

但它不起作用，

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T06:08:18.663

[AIR 1.0、Flash Player](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/MouseEvent.html#MIDDLE_CLICK) [**11.2**](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/MouseEvent.html#MIDDLE_CLICK)[及更高版本](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/MouseEvent.html#MIDDLE_CLICK)中的MIDDLE_CLICK 事件[](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/MouseEvent.html#MIDDLE_CLICK)

 **[通过 JavaScript 在 11.1 和更早版本的 Flash Player 中支持中间点击](http://forums.adobe.com/message/1929244#1929244#1929244)**

# extjs - 将数据添加到 extjs 中的组合

> ID：12293824
> 
> 赞同：1
> 
> 时间：2012-09-06T06:02:31.430
> 
> 标签：extjs, combobox

我在向组合框添加数据时遇到问题（这是我的代码：

```
{
    xtype: 'combo',
    name: 'accounttype',
    triggerAction: 'all',
    fieldLabel: '??? ?????',
    labelWidth: 125,
    displayField: 'name_y',
    valueField: 'nzp_y',
    width: 280,
    emptyText: '??? ?????',
    listeners: {
        afterrender: function (item) {
            Ext.Ajax.request({
                url: 'account/combodata',
                method: 'POST',
                success: function (objServerResponse) {
                    var jsonResp = Ext.decode(objServerResponse.responseText);

                if (jsonResp.success == true) {

                    var mystore = new Ext.data.JsonStore({
                        fields: ['nzp_y', 'name_y'],
                        data: [{ nzp_y: 0, name_y: ' '}]
                    });

                    var myArray = new Array();

                    for (var i = 0; i < jsonResp.combolist.length; i++) 
                    {
                        if (jsonResp.combolist[i].nzp_res == 9999) 
                        {
                            myArray['nzp_y'] = jsonResp.combolist[i].nzp_y;
                            myArray['name_y'] = jsonResp.combolist[i].name_y;
                            //???
                        }
                    }
                }
            },
            failure: function (objServerResponse) {
                Ext.Msg.alert('Error', objServerResponse.responseText);
            }
        });
    }
},
store: mystore 
```

}

如何将商店添加到组合？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T06:16:42.227

> 假设您使用的是 ExtJS 4.x

我推荐你使用 Model-Proxy-Store

```
 // Set up a model to use in your Store
 Ext.define('User', {
     extend: 'Ext.data.Model',
     fields: [
         {name: 'nzp_y', type: 'int'},
         {name: 'name_y',  type: 'string'}
     ]
 }); 
```

...一些其他代码

```
{
    xtype: 'combo',
    name: 'accounttype',
    triggerAction: 'all',
    fieldLabel: '??? ?????',
    labelWidth: 125,
    displayField: 'name_y',
    valueField: 'nzp_y',
    width: 280,
    store: Ext.create('Ext.data.Store', {
         model: 'User',
         proxy: {
             type: 'ajax',
             url: '/account/combodata',
             reader: {
                 type: 'json',
                 root: 'data' // you may need to modify this
             }
         },
         autoLoad: true
     }),
    emptyText: '??? ?????'
} 
```

编辑以回答评论：

您绝对应该查看以下配置（可以在下面添加`root: 'data'`）：

```
idProperty     : 'id'  // You seem not to have a id property based on the given values
totalProperty  : 'total' // You don't have this one at all 
```

请先检查这些并发布结果。对于给定的错误，我有这样的想法。没见过这个。

# javascript - Textfield 显示它是有效的，即使它在 Ext JS 中是无效的

> ID：12293829
> 
> 赞同：1
> 
> 时间：2012-09-06T06:02:43.583
> 
> 标签：javascript, extjs, extjs3

我必须使文本字段无效。我尝试了以下代码。但它警告为“有效”。

```
 name.markInvalid('Error');
                if (name.isValid()) {
                    alert('valid');
                } 
```

任何帮助都必须感谢..thankz

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T06:28:41.797

您确实需要阅读有关此的[API 文档](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.form.TextField-method-markInvalid)。该字段在视觉上被标记为无效，但它不会测试或运行验证功能。因此，如果您在此之后运行它，如果验证没有失败，该字段肯定是有效的。如果您希望它完全无效，请应用在 markInvalid() 调用之后该字段永远不会通过的验证规则。也许最简单的方法是一个总是返回 false 的自定义验证器。

*编辑：API 链接已修复*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-29T10:52:37.910

我知道，这是愚蠢的，我们需要寻找一些方法来做到这一点......
我建议使用这样的代码：

```
if (field.getEl().hasClass(field.invalidClass)) {
    // This is an invalid field
} 
```

# image - 调整 Cinemagraph（动画 GIF）大小时的问题

> ID：12293832
> 
> 赞同：8
> 
> 时间：2012-09-06T06:02:59.207
> 
> 标签：image, image-processing, graphics, imagemagick, graphicsmagick

我在调整 Cinemagraph 的大小时遇到​​问题。如果您不知道，它们是仅对图像的一部分进行动画处理的 gif，与整个图像进行动画处理的常规 gif 相比。这是一个 node.js 示例：

```
// ![http://i.imgur.com/Qb1m0.gif][1]

var gm = require('gm')

var file = 'Qb1m0.gif',
    frags = file.split('.')

gm(file)
  //.noProfile()
  //.quality(80)
  .resize(200, 200)
  .write(frags[0] + '_200.' + frags[1], function(err) {
    if (err) console.error(err)
  })

// Result:
// ![http://i.imgur.com/eFqak.gif][2] 
```

等效的 cmd 行代码是：

```
gm convert Qb1m0.gif -resize 200x200 cinema_200.gif 
```

知道发生了什么吗？

### 原始动画GIF：

![原来的](../Images/86c352a72e054434d79cc2f93eeb79b6.png)

### 调整大小的动画 GIF：

![调整大小](../Images/a9af8aefdf252232ef121a9041bc4f4d.png)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-06T20:01:40.700

我确实比 GraphicsMagick 更了解 ImageMagick。对于 ImageMagick，以下语句适用：

*   如果 GIF 包含透明度，则几乎不可能使用简单的命令行（例如您提供的命令行）直接调整*动画GIF 的大小。*

*   如果动画 GIF 不包含透明度，甚至很难做到这一点。

我认为这对于 GraphicsMagick 是一样的，真​​的。

## 背景说明

如果您使用 来查看原始 GIF `identify`，您会发现并非每个帧都具有相同的尺寸：

```
识别 Qb1m0.gif
 Qb1m0.gif[1] GIF 720x416 720x416+0+0 8 位伪类 256c 920KB 0.000u 0:00.009
 Qb1m0.gif[1] GIF 471x122 720x416+160+75 8 位伪类 256c 920KB 0.000u 0:00.009
 Qb1m0.gif[2] GIF 471x121 720x416+160+76 8 位伪类 256c 920KB 0.000u 0:00.009
 Qb1m0.gif[3] GIF 471x123 720x416+160+75 8 位伪类 256c 920KB 0.000u 0:00.009
 Qb1m0.gif[4] GIF 471x123 720x416+160+75 8 位伪类 256c 920KB 0.000u 0:00.009
 Qb1m0.gif[5] GIF 471x123 720x416+160+75 8 位伪类 256c 920KB 0.000u 0:00.009
 Qb1m0.gif[6] GIF 471x123 720x416+160+75 8 位伪类 256c 920KB 0.000u 0:00.009
 Qb1m0.gif[7] GIF 471x123 720x416+160+75 8 位伪类 256c 920KB 0.000u 0:00.009
 Qb1m0.gif[8] GIF 471x122 720x416+160+76 8 位伪类 256c 920KB 0.000u 0:00.009
 Qb1m0.gif[9] GIF 471x123 720x416+160+75 8 位伪类 256c 920KB 0.000u 0:00.009
 Qb1m0.gif[10] GIF 471x123 720x416+160+75 8 位伪类 256c 920KB 0.000u 0:00.000
 Qb1m0.gif[11] GIF 471x123 720x416+160+75 8 位伪类 256c 920KB 0.000u 0:00.000
 Qb1m0.gif[12] GIF 471x123 720x416+160+75 8 位伪类 256c 920KB 0.000u 0:00.000
 Qb1m0.gif[13] GIF 471x122 720x416+160+76 8 位伪类 256c 920KB 0.000u 0:00.000
 Qb1m0.gif[14] GIF 471x123 720x416+160+75 8 位伪类 256c 920KB 0.000u 0:00.000
 Qb1m0.gif[15] GIF 471x123 720x416+160+75 8 位伪类 256c 920KB 0.000u 0:00.000

```

这些尺寸变化是为了减小文件大小而对动画 GIF进行*帧优化的结果。*

还有其他优化在起作用，它们确实减少了使用的颜色数量。这两种类型的优化都不能很好地与`-resize`操作结合起来。

`-resize`是为*单个*图像设计的，并使生成的单个图像看起来尽可能好。这通常会为图像添加新的颜色值。这确实与 GIF 的设计目的相矛盾：使用严格限制的颜色表（最多 256 种颜色）。在动画序列中，下一个图像/帧`-resize`可能会产生与前一个完全不同的颜色表——但对于一个工作良好的动画，您需要一个跨所有帧的通用颜色表。

`-resize`将每个帧图像与其他图像完全分开处理，并且不考虑“帧优化”（它倾向于为放置在具有自己偏移量的公共画布上的每个帧创建不同的宽度+高度）。

因此，调整大小的图像远非理想地保存为单个图像的有限 GIF 文件格式，更不用说用于动画 GIF 的多帧了。结果是在调整大小的图像中大量*减少了颜色。*

然后是透明度问题：大多数动画 GIF 确实大量使用了透明度。透明度经常用于实现压缩优化，通常图像的外观根本不需要透明度。

在这种情况下发生的情况是：`-resize`在叠加图像中创建半透明像素。当图像被保存回 GIF 文件格式时，这些像素随后被转换为完全透明或完全不透明：两者都会为生成的动画产生严重的颜色失真，远离原始颜色。

## 一般程序

通常，调整动画 GIF 大小的最佳程序是：

1.  合并（去优化）动画。这将为动画的所有帧创建相同大小的单个图像。

2.  对动画进行完整的 GIF 优化序列：不仅是*帧*优化，还有*颜色*优化。

## “简单”命令

要仍然尝试运行“简单”调整大小命令，您可以试试这个：

```
convert                        \
  http://i.imgur.com/Qb1m0.gif \
 -coalesce                     \
 -resize 200x200               \
  cinema_200.gif 
```

**结果：**

 ![结果](../Images/3319c55fdb883a07d506962289fec0b6.png)

此命令将解决帧优化问题。它将纠正由此产生的问题，但会增加文件大小。

但是，当涉及到边缘时，它可能仍会显示“阶梯”伪影，因为调整大小的帧将出现可怕的锯齿。这是因为抗锯齿需要边缘周围的半透明颜色，但 GIF 无法保存`-resize`操作员生成的半透明颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-18T18:45:16.763

您也可以尝试添加`-layers optimize` 更多详细信息 [https://imagemagick.org/script/command-line-options.php#layers](https://imagemagick.org/script/command-line-options.php#layers)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-25T12:24:01.013

还有一个非常好的与使用[gifsicle](https://www.lcdf.org/gifsicle/)工具的 ImageMagick 解决方案无关，它产生更小的结果 gif 并且没有任何闪烁问题，也没有特殊的命令行参数，因此非常简单，工作速度也更快。像这样使用它：

```
gifsicle --scale 0.25 -i input.gif > output.gif 
```

或者

```
gifsicle --resize 24x24 -i input.gif > output.gif 
```

# wcf - WCF：如何在客户端使用客户端代理和配置文件？

> ID：12293833
> 
> 赞同：1
> 
> 时间：2012-09-06T06:02:58.187
> 
> 标签：wcf, proxy, client, config

我正在尝试手动创建服务，因为它与我们的应用程序的要求有关。

我想将服务托管到控制台应用程序。我怎样才能做到这一点？

我再次有 2 个项目：

1）简单库：

它仅包含一个带有服务合同（接口）的文件：

```
[ServiceContract]
public interface IMessageManager
{
    [OperationContract]
    string ConvertToUpper(string text);
} 
```

我编译该库并创建 DLL 文件作为输出。

之后，我使用 svcutil.exe 手动生成客户端代理类 (.cs) 文件和配置文件 (output.config)。

2）控制台应用程序：

它引用了实现服务契约的库 DLL 和类：

```
public class MessageManager : IMessageManager
{
    public string ConvertToUpper(string text)
    {
        return text.ToUpper();
    }
} 
```

它还有 2 个由 svcutil.exe 生成的文件。我已将 output.config 文件中的所有内容复制到控制台应用程序的 App.config 文件中。我编写的客户端代码如下：

```
MessageManagerClient client = new MessageManagerClient();
string output = client.ConvertToUpper("aaaa");
Console.WriteLine(output); 
```

App.config 文件如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="DefaultBinding_IMessageManager" closeTimeout="00:01:00"
            openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
            allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
            maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
            messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
            useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
              maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None"
                realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint binding="basicHttpBinding" bindingConfiguration="DefaultBinding_IMessageManager"
          contract="IMessageManager" name="DefaultBinding_IMessageManager_IMessageManager" />
    </client>
  </system.serviceModel>
</configuration> 
```

那么，在这种情况下我应该指定什么地址？

也许我上面的方法有问题？

任何帮助都非常感谢。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T06:47:53.883

回答您的问题：

1.  您将地址作为属性添加`<endpoint/>`到`<client/>`. 例如：`<endpoint address="http://localhost/blah" ...`
2.  您是正确的 SOAP 信封为每个请求生成。不存在“文件”。

# c# - 使用c#使用另一个数据库shema信息生成数据库

> ID：12293834
> 
> 赞同：1
> 
> 时间：2012-09-06T06:02:59.270
> 
> 标签：c#, mysql, sql-server

我想使用 c# 从另一个数据库模式信息生成新的 sql 数据库

以下代码显示了从数据库中检索信息

```
 string connetionString = null;

        SqlConnection connection;

        SqlCommand command;

        SqlDataAdapter adapter = new SqlDataAdapter();

        DataSet ds = new DataSet();

        int i = 0;

        string sql = null;

        connetionString = @"Data Source=.\SQLEXPRESS;AttachDbFilename=E:\Database.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True";

        sql = "Select DISTINCT(name) FROM sys.Tables";

        connection = new SqlConnection(connetionString);

        try
        {

            connection.Open();

            command = new SqlCommand(sql, connection);

            adapter.SelectCommand = command;

            adapter.Fill(ds);

            adapter.Dispose();

            command.Dispose();

            connection.Close();

            DataSet dset = new DataSet();

            for (i = 0; i <= ds.Tables[0].Rows.Count - 1; i++)
            {

                listBox1.Items.Add(ds.Tables[0].Rows[i].ItemArray[0].ToString());
                SqlDataAdapter ad = new SqlDataAdapter("SELECT * FROM "+ds.Tables[0].Rows[i].ItemArray[0].ToString()+"",connection);

                ad.Fill(dset);

            }
            dset.Tables[0].WriteXml(@"E:\WindowsFormsApplication2\WindowsFormsApplication2\ds.xml");

        }

        catch (Exception ex)
        {

            MessageBox.Show("Can not open connection ! ");

        } 
```

同样，我必须从数据库中获取信息，并且必须使用此模式信息生成新数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T07:04:19.427

要将架构从一个数据库复制到另一个数据库：

1.  使用 INFORMATION_SCHEMA 表集（例如 INFORMATION_SCHEMA.TABLES）遍历源数据库中的对象以获取表列表。
2.  对于 SQL 服务器，`sp_help`在每个（或`sp_helptext`存储过程）上调用存储过程。对于 MySQL，使用`SHOW CREATE TABLE`和`SHOW CREATE PROCEDURE`类似的命令。这些返回用于创建对象的 SQL。
3.  在目标数据库上运行该 SQL。

请注意，您可以通过 SQL Server Management Studio 生成用于创建 SQL Server 数据库的 SQL 脚本。

# android - Android：lockCanvas() 和 lockCanvas(null) 有什么区别？

> ID：12293835
> 
> 赞同：2
> 
> 时间：2012-09-06T06:03:02.233
> 
> 标签：android, surfaceview

标题说得很清楚，尽管我会给出一个代码示例以防万一。这是来自 Android SDK 中的 LunarLander 示例：

```
 @Override
    public void run() {
        while (mRun) {
            Canvas c = null;
            try {
                c = mSurfaceHolder.lockCanvas(null);
                synchronized (mSurfaceHolder) {
                    if (mMode == STATE_RUNNING) updatePhysics();
                    doDraw(c);
                }
            } finally {
                // do this in a finally so that if an exception is thrown
                // during the above, we don't leave the Surface in an
                // inconsistent state
                if (c != null) {
                    mSurfaceHolder.unlockCanvasAndPost(c);
                }
            }
        }
    } 
```

的文档`lockCanvas()`说必须重新绘制所有像素，而`lockCanvas(Rect dirty)`说您只需要在`dirty`. 我看到了传递给这个函数的两种可能的解释`null`：它不需要重新绘制任何像素，或者以与`lockCanvas()`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T06:14:34.633

它是开源的

```
public Canvas lockCanvas() {
  return internalLockCanvas(null);
}
public Canvas lockCanvas(Rect dirty) {
  return internalLockCanvas(dirty);
} 
```

# sql - 查看/查询性能

> ID：12293837
> 
> 赞同：1
> 
> 时间：2012-09-06T06:03:09.760
> 
> 标签：sql, sql-server-2008-r2

我在本地服务器上创建了一个视图，它从链接服务器获取数据。在链接上，我只有读取权限。

我正在尝试提高视图的性能，我尝试使用 SCHEMABINDING 创建视图，但不允许在远程访问中使用 SCHEMABINDING。我尝试阅读物化视图，是的，我知道它是 Oracle 中的一个函数，但想知道 SQL Server 2008 r2 中是否有类似的东西。

关于如何提高查询性能的任何想法？

```
CREATE VIEW [dbo].[vw_CustomerServiceLevel]

AS
SELECT *
FROM [10.205.0.70].Freightware.dbo.CustomerServiceLevelReportEOF RF
INNER JOIN [10.205.0.70].Freightware.dbo.CustomerServiceLevelReportDetail RD 
  ON (RD.HeaderGUID=RF.HeaderGUID)
INNER JOIN [10.205.0.70].Freightware.dbo.CustomerServiceLevelReportHeader RH 
  ON (RH.HeaderGUID=RD.HeaderGUID)
LEFT JOIN SDBPHASE2DW.dbo.DimDate dd
  ON CONVERT(VARCHAR(10), RH.StartDate, 103) = CONVERT(VARCHAR(10), dd.FullDate, 103)
LEFT JOIN SDBPHASE2DW.dbo.DimDate dd2
  ON CONVERT(VARCHAR(10), RH.EndDate, 103) = CONVERT(VARCHAR(10), dd2.FullDate, 103) 
```

![执行计划](../Images/d995ba030323ff0d71622e06371e3d8b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:41:43.453

为了优化代码，您可以做一些事情：

1.  您需要所有返回列吗？如果不需要，请仅选择您需要的列。
2.  您是否需要转换进行连接的字段。看起来它们是相同的，因此您可以删除转换语句。
3.  您需要所有记录吗？如果不需要，只需使用使用定义的函数而不是视图 - 它与您的视图相同，除了您可以将一些参数传递给它，这些参数将剪切返回的数据。

# c# - C# 增强的方法重载解析

> ID：12293841
> 
> 赞同：5
> 
> 时间：2012-09-06T06:03:20.463
> 
> 标签：c#, c#-4.0

```
class Base {}
class ClassA : Base {}
class ClassB : Base {}
public static class ExtensionFunctions
{
    public static bool DoSomething(this Base lhs, Base rhs)
    {
        return lhs.DoSomethingElse(rhs);
    }

    public static bool DoSomethingElse(this Base lhs, Base rhs) { return true; }
    public static bool DoSomethingElse(this ClassA lhs, ClassA rhs) { return false; }
    public static bool DoSomethingElse(this ClassA lhs, ClassB rhs) { return false; }
    public static bool DoSomethingElse(this ClassB lhs, ClassA rhs) { return false; }
    public static bool DoSomethingElse(this ClassB lhs, ClassB rhs) { return false; }
} 
```

鉴于上面的代码块实际上除了调用第一个 DoSomethingElse 方法之外没有做任何事情，那么根据传递给 DoSomething 方法的参数的真实类型来进行正确的方法调用的聪明方法是什么？

有没有办法可以在运行时解决方法调用，或者我必须使用“if typeof”风格的代码解析？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T06:07:36.627

您可以使用以下`dynamic`关键字：

```
public static bool DoSomething(this Base lhs, Base rhs)  
{
    return DoSomethingElse((dynamic)lhs, (dynamic)rhs);  
} 
```

# python - 通过连接另一个列表的元素来创建一个字符串列表

> ID：12293842
> 
> 赞同：8
> 
> 时间：2012-09-06T06:03:20.617
> 
> 标签：python, arrays

> **可能重复：**
> [如何在 Python 中将列表拆分为大小均匀的块？](https://stackoverflow.com/questions/312443/how-do-you-split-a-list-into-evenly-sized-chunks-in-python)
> [在python中合并两个列表？](https://stackoverflow.com/questions/1720421/merge-two-lists-in-python)

数组中的原始数据：

```
a = ['1', '2', '3', '4', '5', '6', '7', '8', '9'] 
```

期望的输出：

```
['1 2 3', '4 5 6', '7 8 9'] 
```

我知道使用该`while`语句效率低下，因此我需要帮助。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-06T06:10:41.430

```
[' '.join(a[i:i+3]) for i in range(0, len(a), 3)] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T06:11:10.047

重复使用！

```
from itertools import islice

def split_every(n, iterable):
    i = iter(iterable)
    piece = list(islice(i, n))
    while piece:
        yield piece
        piece = list(islice(i, n))

a = ['1', '2', '3', '4', '5', '6', '7', '8', '9']
new_a = [' '.join(slice) for slice in split_every(3, a)] 
```

主要用[这个](https://stackoverflow.com/a/1915307/716118)。

# php - 将 file_get_contents 用于 google api 时发出警告

> ID：12293848
> 
> 赞同：3
> 
> 时间：2012-09-06T06:03:33.460
> 
> 标签：php, google-maps

我正在使用此代码查找位置的纬度

```
$api='http://maps.googleapis.com/maps/api/geocode/json?address=United States Neversink&sensor=false';

$result = file_get_contents($api);

$data = json_decode($result); 
```

但它给出警告警告：file_get_contents(http://maps.googleapis.com/maps/api/geocode/json?address=United States Neversink&sensor=false) [function.file-get-contents]: failed to open stream: HTTP 请求失败！第 139 行 C:\wamp\www\new_yellowpages\modules\mod_yellowpages_item_map\helper.php 中的 HTTP/1.0 400 错误请求

如果有人知道这个问题，请帮助我。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-06T06:16:30.210

使用 curl 而不是`file_get_contents`：

```
$address = "India+Panchkula";
$url = "http://maps.google.com/maps/api/geocode/json?address=$address&sensor=false&region=India";
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_PROXYPORT, 3128);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
$response = curl_exec($ch);
curl_close($ch);
$response_a = json_decode($response);
echo $lat = $response_a->results[0]->geometry->location->lat;
echo "<br />";
echo $long = $response_a->results[0]->geometry->location->lng; 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-06T06:17:37.347

使用[urlencode](http://php.net/manual/en/function.urlencode.php)对地址部分进行编码。（问题是地址中的空格。）

```
$address = urlencode("United States Neversink");
$api='http://maps.googleapis.com/maps/api/geocode/json?address=$address&sensor=false';

$result = file_get_contents($api); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-03T15:11:48.720

使用 urlenocde 函数对您的地址进行编码，如谷歌地图标准，并将 Http 更改为 https。希望这对你有用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-22T20:12:59.467

尝试将 HTTP 更改为 HTTPS 并将 ' ' 替换为 '+'

```
https://maps.googleapis.com/maps/api/geocode/json?address=United+States+Neversink&sensor=false 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2018-09-05T09:09:58.133

使用 curl_init() 而不是 file_get_contents()：

```
$address = "India+Panchkula";
$url = "http://maps.google.com/maps/api/geocode/json?address=$address&sensor=false&region=India";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_PROXYPORT, 3128);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
$response = curl_exec($ch);
curl_close($ch);

$response_a = json_decode($response);
echo $lat = $response_a->results[0]->geometry->location->lat;
echo "<br />";
echo $long = $response_a->results[0]->geometry->location->lng; 
```

# c# - 有没有办法使用 ASP.Net Memberships 动态授予权限？

> ID：12293849
> 
> 赞同：1
> 
> 时间：2012-09-06T06:03:34.953
> 
> 标签：c#, .net, asp.net-mvc-3, architecture

假设对于一个社交网络项目，您有一个 if 语句，例如：

`if (currentMember.IsFriendsWith(otherMember)....`

`otherMember's` 如果方法返回真值，您将如何授予当前用户仅查看个人资料的权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:10:19.427

`public IQueriable<GUID> FriendsUserKey { get; set; }`将 a 添加到用户的配置文件模型可能更简单。这样您就可以查看是否`FriendsUserKey`包含另一个用户的密钥，如果是，那么他们是朋友。

然后你可以编写一个方法来按照你想要的方式工作，`currentMember.IsFriendsWith(otherMember)`

小心不要以此为基础`UserName`，以防万一用户被删除，然后新用户使用相同的`UserName`.

回答您的标题，“有没有办法使用 ASP.Net 成员资格来动态授予权限？” 是的，从某种意义上说，您可以动态添加和创建角色，但这不是解决这种情况的方法。

要创建角色`Roles.CreateRole("roleName");`并将用户添加到该角色，`Roles.AddUserToRoles("userName", "roleNames");`

# sql - 外键冲突无法插入数据

> ID：12293850
> 
> 赞同：1
> 
> 时间：2012-09-06T06:03:45.710
> 
> 标签：sql, asp-classic, foreign-keys

我有两个具有以下字段的表：

表格1 ：

**学生硕士**

领域：

```
stu_id(primary key)
name
class
doc upload
sub_id(foreign_key) 
```

表 2：

**主题**

领域：

```
sub_id(primary key)
subject name 
```

但是当我在表单中插入条目时，会出现以下错误。

> INSERT 语句与 FOREIGN KEY 约束“FK__student_m__sub_i__0C85DE4D”冲突。冲突发生在数据库“test2”、表“dbo.subject”、列“sub_id”**

请帮助我哪里错了？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T06:05:49.490

因为您尝试在表`Student Master`中不存在的 sub_id 中插入一个值`Subject`（表中没有引用`Subject`）

如果这些是第一条记录，那么请确保您首先插入`Subject`然后`Student Master`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T06:06:34.203

这是因为您要在表中插入`Student Master`不`sub_id`存在于表中的记录`subject`。请记住，您已将 table 指定`sub_id`为`Student Master`table 的外键`subject`。这也意味着`Student Master`表依赖于`subject`表。这破坏了参照完整性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T06:09:07.377

> **FK 的工作方式是它不能在该列中具有不在引用表的主键列中的值。**

因为它是一个外键约束，它告诉您您尝试在表中插入的值在引用的表中不存在。

因此，您首先必须确保在插入到`Student`表中`sub_id`可用的`subject`表时。

编辑：

要纠正它，请在 Sql server management studio 中尝试以下命令：

```
sp_help 'dbo.subject' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T06:41:23.423

您需要先插入主记录，然后再插入子记录。首先在 Student Master 表中插入记录，然后尝试在 Subject 表中插入。如果您将您的插入语句发送给我，将会更好地帮助您。

# video - 如何使用 FFMpeg -timestamp 语法

> ID：12293853
> 
> 赞同：3
> 
> 时间：2012-09-06T06:04:05.083
> 
> 标签：video, ffmpeg, video-streaming, video-processing

![在此处输入图像描述](../Images/0c07d91d2e9b314b37108df5e4382bab.png)

大家好！

```
 ffMpeg -timstamp 
```

选项像上图一样有效吗？07:21:54 07/07/05 黑盒容器中的白色文本。

在 ubuntu 12.04 中输入这样的执行。

```
 ffmpeg -y -f video4linux2 -s vga -r 30 -fs 1M -i /dev/video0 -timestamp now -copyts ./USB1_Test_vga.mp4 
```

但它不起作用。

还有其他显示视频录制时间的选项吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-06T09:36:43.643

曾经有一个drawtext过滤器。

```
ffmpeg -i in.mp4 -vf "drawtext=fontfile=/usr/share/fonts/truetype/DroidSans.ttf: timecode='09\:57\:00\:00': r=25: \
x=(w-tw)/2: y=h-(2*lh): fontcolor=white: box=1: boxcolor=0x00000000@1" -an -y out.mp4 
```

见这里： http: [//ffmpeg.org/trac/ffmpeg/wiki/FilteringGuide](http://ffmpeg.org/trac/ffmpeg/wiki/FilteringGuide)

我相信您可以用类似 sprintf 的语法替换确切的时间码。

```
ffmpeg -f video4linux2 -i /dev/video0 -s 640x480 -r 30 -vf \
"drawtext=fontfile=/usr/share/fonts/truetype/ttf-dejavu/DejaVuSans-Bold.ttf: \
text='\%T': fontcolor=white@0.8: x=7: y=460" -vcodec libx264 -vb 2000k \
-preset ultrafast -f mp4 output.mp4 
```

见这里： [http ://einar.slaskete.net/2011/09/05/adding-time-stamp-overlay-to-video-stream-using-ffmpeg/](http://einar.slaskete.net/2011/09/05/adding-time-stamp-overlay-to-video-stream-using-ffmpeg/)

# java - 现在将日期时间插入 sql。

> ID：12293855
> 
> 赞同：0
> 
> 时间：2012-09-06T06:04:08.760
> 
> 标签：java

嗨，现在我想将日期时间插入到 sql 中。在 sql 中，数据类型是 datetime：这是我的转换：

```
java.util.Date utilDate = new Date();
// Convert it to java.sql.Date
java.sql.Date date = new java.sql.Date(utilDate.getTime()); 
```

那么现在我无法将它添加到 sql 中。因为

```
stmt.setDate(2, date); 
```

只是添加日期。我尝试 setTimestamp 但它发生错误。那么我会使用哪一个？或者我可以分开添加日期一栏和时间一栏。如何添加时间？tks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T06:37:55.373

使用 java.sql.Timestamp

查看[文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/Timestamp.html)以获取更多帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T06:49:36.503

您还可以将此参数替换为可移植的 ANSI SQL [CURRENT_TIMESTAMP()](http://users.atw.hu/sqlnut/sqlnut2-chp-4-sect-4.html)函数。

例如：

```
insert into table (ts_column, other_column, ...) values (current_timestamp(), ?, ...); 
```

# php - Shopify：创建新系列的困境

> ID：12293859
> 
> 赞同：0
> 
> 时间：2012-09-06T06:04:45.223
> 
> 标签：php, api, curl, shopify

我正在尝试使用 Sandeep Shetty 的 shopify.php 创建自定义产品集合。我已经能够进行其他功能性 API 调用 - 显示产品和购物车等。但我无法使用以下代码创建自定义集合

```
// For private apps:
$shopify = shopify_api_client(SHOPIFY_DOMAIN, NULL, SHOPIFY_API_KEY, SHOPIFY_API_PASS, true);

$charge = array
    (
        "custom_collection"=>array
        (
            "title"=>"IPods",
            "collects"=>array(
                "product_id"=>99395358,
            )
        )
    );
//        pr(json_encode($charge), 1);
$charge = '{"custom_collection": { "title": "IPods", "collects": [ {"product_id":99395358}, {"product_id":0000000} ] } }';

try
{
    // All requests accept an optional fourth parameter, that is populated with the response headers.
    $my_collect = $shopify('POST', '/admin/custom_collections.json', $charge, $response_headers);

    // API call limit helpers
    echo shopify_calls_made($response_headers); // 2
    echo shopify_calls_left($response_headers); // 298
    echo shopify_call_limit($response_headers); // 300

    pr($my_collect);

}
catch (ShopifyApiException $e) 
{ 
     pr($e);
}
catch (ShopifyCurlException $e)
{            
    echo "doh";
    pr($e);
} 
```

根据上述请求，我收到以下回复，我不确定请求有什么问题，因为它被视为错误请求

```
ShopifyApiException Object
(
[info:protected] => Array
    (
        [method] => POST
        [path] => /admin/custom_collections.json
        [params] => {"custom_collection": { "title": "IPods", "collects": [ {"product_id":99395358}, {"product_id":0000000} ] } }
        [response_headers] => Array
            (
                [http_status_message] => Bad Request
                [http_status_code] => 400
                [server] => nginx
                [date] => Thu, 06 Sep 2012 05:55:36 GMT
                [content-type] => application/json
                [transfer-encoding] => chunked
                [connection] => keep-alive
                [status] => 400 Bad Request
                [x-runtime] => 0.000986
            )

        [response] => Array
            (
                [error] => lexical error: invalid char in json text.
                                "{"custom_collection": { "title": 
                 (right here) ------^

            )

    )

[message:protected] => Bad Request
[string:Exception:private] => 
[code:protected] => 400
[file:protected] => D:\www\jim\shopify\init.php
[line:protected] => 244
[trace:Exception:private] => Array
    (
        [0] => Array
            (
                [file] => D:\www\jim\shopify\index.php
                [line] => 31
                [function] => {closure}
                [args] => Array
                    (
                        [0] => POST
                        [1] => /admin/custom_collections.json
                        [2] => {"custom_collection": { "title": "IPods", "collects": [ {"product_id":99395358}, {"product_id":0000000} ] } }
                        [3] => Array
                            (
                                [http_status_message] => Bad Request
                                [http_status_code] => 400
                                [server] => nginx
                                [date] => Thu, 06 Sep 2012 05:55:36 GMT
                                [content-type] => application/json
                                [transfer-encoding] => chunked
                                [connection] => keep-alive
                                [status] => 400 Bad Request
                                [x-runtime] => 0.000986
                            )

                    )

            )

    )

[previous:Exception:private] => 
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:14:40.630

我让它工作了

```
if(count($categories_results) > 0){

    foreach($categories_results as $cat){

            try
            {

                $charge = array
                (
                    "custom_collection"=>array
                    (
                        "title"=>$cat['name'],
                    )
                );

                try
                {

                    $recurring_application_charge = $shopify('POST', '/admin/custom_collections.json', $charge, $response_headers);

                    $shopify_cat_id = $recurring_application_charge['id'];
                    $shopify_cat_data = serialize($recurring_application_charge);
                    $db->update('categories', array( 'shopify_id' => $shopify_cat_id, 'shopify_res' => $shopify_cat_data ), "id=%d", $cat['id']);

                }
                catch (ShopifyApiException $e)
                {
                    pr($e);

                }

            }
            catch (ShopifyApiException $e)
            {
                pr($e);
            }
            catch (ShopifyCurlException $e)
            {
                pr($e);
            }

    } //end of foreach

} //end of IF 
```

# macos - OS X 应用程序在沙盒模式下运行需要什么？

> ID：12293861
> 
> 赞同：0
> 
> 时间：2012-09-06T06:04:53.407
> 
> 标签：macos, sandbox

我已经签署了包含沙盒权利的 OS X 应用程序，如下所述： [如何在没有 XCode 的情况下构建沙盒应用程序？](https://stackoverflow.com/questions/8385252/how-to-build-sandboxed-app-without-xcode)

但是当我打开应用程序时，它会在沙箱之外运行。也就是说，在活动监视器中，进程以 Sandbox = No 列出。

我还需要做什么来确保应用程序在沙盒模式下运行？

（注意：我运行的是 OS X 10.7.4）

# java - 加载 twitter4j 提要时出现 Listfragment 延迟

> ID：12293862
> 
> 赞同：0
> 
> 时间：2012-09-06T06:04:54.463
> 
> 标签：java, android, android-listfragment

我`Fragment`在我的应用程序中使用了 3 秒。第三个是`Listfragment`. `Listfragment`我在in 中加载 twitter 提要`onActvityCreated()`。

现在的问题是`ListFragment`当我移动到 2nd 时创建了 2nd `Fragment`，这意味着它开始加载 twitter 提要。直到在 3rd 收到提要`Fragment`，这在慢速连接中需要很长时间，我的 2nd`Fragment`完全没有响应。我无法单击任何图标或滑动到第一个`Fragment`。每次`Fragment`销毁时都会发生这种情况。

代码如下：

```
@Override
public void onActivityCreated(Bundle savedInstanceState) 
{
    // TODO Auto-generated method stub

    super.onActivityCreated(savedInstanceState);
    Log.d("TwitterFragment", "onActivityCreated++++++");
    try {

        // tw = new TwitterTask();
        // tw.execute(null);

        final ConnectivityManager connection = (ConnectivityManager) getActivity().getSystemService(Context.CONNECTIVITY_SERVICE);

        if (connection.getNetworkInfo(0).isConnected() || connection.getNetworkInfo(1).isConnected()) {

            AccessToken a = new AccessToken("something", "something");
            Twitter twitter = new TwitterFactory().getInstance();
            twitter.setOAuthConsumer(Values.CONSUMER_KEY, Values.CONSUMER_SECRET);
            twitter.setOAuthAccessToken(a);

            int i = (int) twitter.getId();
            User u = twitter.showUser(i);
            Log.i("twitter", "user name" + u.getName());
            statuses = twitter.getUserTimeline("something");

            listAdapter.notifyDataSetChanged();
            // Populate list with our static array of titles.

            setListAdapter(listAdapter);
            getListView().setCacheColorHint(Color.TRANSPARENT);
            getListView().setDivider(null);
            getListView().setPadding(10, 0, 10, 0);
            setRetainInstance(true);
            getListView().setClickable(false);
        }
    } catch (Exception e) {
        // TODO: handle exception
        Log.i("something", "Failed to get timeline: " + e.getMessage());
    }

} 
```

这是`getView()`适配器的代码：

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        final tweetViewHolder tweet;
        if (convertView == null) {
            LayoutInflater inflater = (LayoutInflater) getActivity().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.twitterfeed_row, null);

            tweet = new tweetViewHolder();
            tweet.twitterText = (TextView) convertView.findViewById(R.id.tweet_text);
            tweet.tweetTime = (TextView) convertView.findViewById(R.id.tweet_time);
            convertView.setTag(tweet);
        } else
            tweet = (tweetViewHolder) convertView.getTag();

        tweet.twitterText.setText(statuses.get(position).getText());
        tweet.tweetTime.setText(statuses.get(position).getCreatedAt().toString());

        return convertView;
    }

    class tweetViewHolder {
        TextView twitterText;
        TextView tweetTime;

        // TextView txtThird;

    }

@Override
    public int getCount() {
        // TODO Auto-generated method stub
        if (statuses == null)
            return 0;
        else
            return statuses.size();

    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        if (statuses != null)
            return statuses.get(position);
        else
            return null;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    } 
```

另外，如果没有网络，我会看到默认值`ProgressDialog`。`Listfragment`这怎么能控制？是否有任何方法可以被覆盖来监视它？

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T06:12:45.330

看来您正在`onActivityCreated`主线程上的回调内部进行网络连接和数据获取。这会阻塞主线程并使 UI 无响应。**您应该从 Twitter异步**加载数据。您可能应该使用`AsyncTaskLoader`它。

# hadoop - 将 Base64 解码为 jpg 图像

> ID：12293866
> 
> 赞同：0
> 
> 时间：2012-09-06T06:05:03.993
> 
> 标签：hadoop

我们有包含 Base64 编码图像的日志文件。我想处理这些日志文件并提取 base64 编码的“东西”，对其进行解码并将其存储为“真实”图像文件。

我一直在寻找如何做到这一点，因为除了使用 Sequence*OutputFormat 类之外，没有办法从 hadoop 生成图像文件。

简而言之，我的问题是，是否可以在不编写自定义 OutputFormat 的情况下从 hadoop 的 base64 编码文件生成 jpg 文件？

亲切的问候/约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T02:56:20.207

不确定“自定义输出格式”是什么意思，但这是我在我的网络应用程序中所做的（尽管与 hadoop 无关）。HTH。

```
import sun.misc.BASE64Decoder;
import java.io.FileOutputStream;
import java.io.OutputStream;
import java.io.PrintStream;

public static void storeImage(String imageBase64, String path) {
    imageBase64 = imageBase64.replace("\n", "");
    try {
        new BASE64Decoder().decodeBufferToByteBuffer(imageBase64);
        OutputStream out = new FileOutputStream(path);
        PrintStream p = new PrintStream(out);
        p.write(new BASE64Decoder().decodeBuffer(imageBase64));
        p.flush();
        p.close();

    } catch (Exception e) {
        log.error("Error storing image.", e);
        e.printStackTrace();
    }
} 
```

# php - 从数组中获取所有可能的字符串组合到一定长度的算法

> ID：12293870
> 
> 赞同：20
> 
> 时间：2012-09-06T06:05:23.593
> 
> 标签：php, arrays, algorithm, combinations

从具有最小和最大长度值的给定数组中获取所有可能的字符串组合的最佳算法是什么。

注意：这增加了复杂性，因为与这些链接到的问题不同，该值是可变的。

例如：

```
$letters = array('a','b','c','1','2','3');
$min_length = 1;
$max_length = 4;

a
b
c
1
2
3
.
.
.
aaaa
a123
b123
c123 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-25T22:14:56.680

## 几乎是基本转换

这个解决方案的动机是观察到，如果不是因为在有效组合的高位位置重复数组索引 0 处的字符的可能性，这个问题将只是从十进制到新基的基转换从 0 到 (base^length)-1 的所有整数。所以，

```
0 = a
1 = b
...
1294 = 3332
1295 = 3333 
```

困难在于这会错过与一个或多个前导“a”的组合，例如：

```
aa
...
a1
aa1
aaa1 
```

这些是*唯一*缺少的解决方案。因此，可以简单地，对于每个生成的长度小于 max_length 的组合，将“a”（或字母 [0] 处的任何内容）添加到字符串的前面，并输出*该*字符串，如有必要，重复。所以如果你生成字符串'b'，你会输出：

```
b
ab
aab
aaab 
```

这行得通，但并不令人满意，首先是因为它看起来像一个杂乱无章的解决方案。其次，它不会按字典顺序生成解决方案，这可能是也可能不是问题。第三，如果生成组合的函数是双射的，那就太好了，这样我们就可以知道任何给定十进制整数的唯一组合以及任何组合的唯一索引。这将是关键时刻。

## 想象一下没有零

如果零索引给我们带来了问题，那么为什么不取消它呢？假设我们将数组更改为：

字母 = {∅,'a','b','c','1','2','3'}

其中 ∅ 是一个永远不会使用的任意占位符。我们现在将尝试在不使用数字零的情况下以新的基数表示从 1 到 base^max_length 的十进制整数（在这种情况下仍然是 6，而不是 7）。我们将把从 1 到 base-1 的数字表示为正常的 (1, 2, 3, ...)，但是当我们得到等于底数的数字时，而不是将其表示为 10，我们将其表示为基数（例如，以 6 为基数的 6 而不是 10）。下一个数字 base+1 将是 11，然后是 12 到 16（等于十进制的 12），然后是 21。每个数字

一个[n] ,一个[n-1] ,...,一个[1] ,一个[0]

在新的基础上等于

a [n] *b ^n +a [n-1] *b ^(n-1) +...+a [1] *b ¹ +a [0] *b ⁰

十进制，其中 b 是新的基数。

正如我所了解的，这被恰当地称为[双射计数](http://en.wikipedia.org/wiki/Bijective_numeration)。举个例子，在 base 6 中，我们将有：

```
Base 10    Base 6
1          1
2          2
...
6          6
7          11
8          12
...
11         15
12         16
13         21
...
36         56 
```

从上面的维基百科链接，新基数的第一个“数字”是：

一个[0] = m - q [0] k

其中 k 是新基数，m 是要转换的整数，q [0] = ceiling(m/k)-1。请注意与普通基础转换的相似之处，其中唯一的区别是 q [0]将是 floor(m/k) 或普通整数除法。随后的“数字”以类似方式计算，使用 q [0]而不是 m 来找到[1]等。

这个公式可以分为两种情况：

*   (m mod k) == 0: a [0] = k 和 q [0] = (m div k) - 1
*   (m mod k) != 0: a [0] = (m mod k) 和 q [0] = (m div k)

这是算法的核心。对于任何整数 m，我们可以迭代地应用这个公式，直到得到 q [p] == 0。还要注意，转换自然是可逆的。给定一个`6666`以 6 为底的数字，十进制值为：

```
(6*6^3)+(6*6^2)+(6*6^1)+(6*6^0)=1554 
```

我们使用这个事实来找到要转换的整数范围，以获得一定长度的所有组合。抱歉，我的 PHP 技能不存在。希望 Java 代码足够清晰。鉴于：

```
 char [] letters = new char [] {'0','a','b','c','1','2','3'};
    int max_length = 4; 
```

我们有这个功能：

```
 int b = letters.length - 1;  // base to convert to
    int n = 0;
    for (int k = 0; k < max_length; k++)
        n = (n*b)+b;  // number of combinations

    int remainder;
    for (int i = 1; i <= n; i++) {
        int current = i;  // m and q_n in the formula
        String combination = "";
        do {
            remainder = current % b;
            if (remainder == 0) {
                combination += letters[b];
                current = current/b - 1;
            } else {
                combination += letters[remainder];
                current = current/b;
            }
        } while (current > 0);
        System.out.println(combination);
    } 
```

其中 / 表示整数除法，或 floor(a/b)。

该函数仅依赖于输入整数，而不依赖于先前计算的结果，因此并行处理的可能性非常好。

这是具有上述输入的输出。根据您的示例，最低有效位是第一位的。

```
a
b
c
1
2
3
aa
ba
ca
1a
2a
3a
ab
bb
cb
1b
2b
3b
ac
bc
cc
1c
2c
3c
a1
b1
c1
11
21
31
a2
b2
c2
12
22
32
a3
b3
c3
13
23
33
aaa
baa
caa
1aa
2aa
3aa
aba
bba
cba
1ba
2ba
3ba
aca
bca
cca
1ca
2ca
3ca
a1a
b1a
c1a
11a
21a
31a
a2a
b2a
c2a
12a
22a
32a
a3a
b3a
c3a
13a
23a
33a
aab
bab
cab
1ab
2ab
3ab
abb
bbb
cbb
1bb
2bb
3bb
acb
bcb
ccb
1cb
2cb
3cb
a1b
b1b
c1b
11b
21b
31b
a2b
b2b
c2b
12b
22b
32b
a3b
b3b
c3b
13b
23b
33b
aac
bac
cac
1ac
2ac
3ac
abc
bbc
cbc
1bc
2bc
3bc
acc
bcc
ccc
1cc
2cc
3cc
a1c
b1c
c1c
11c
21c
31c
a2c
b2c
c2c
12c
22c
32c
a3c
b3c
c3c
13c
23c
33c
aa1
ba1
ca1
1a1
2a1
3a1
ab1
bb1
cb1
1b1
2b1
3b1
ac1
bc1
cc1
1c1
2c1
3c1
a11
b11
c11
111
211
311
a21
b21
c21
121
221
321
a31
b31
c31
131
231
331
aa2
ba2
ca2
1a2
2a2
3a2
ab2
bb2
cb2
1b2
2b2
3b2
ac2
bc2
cc2
1c2
2c2
3c2
a12
b12
c12
112
212
312
a22
b22
c22
122
222
322
a32
b32
c32
132
232
332
aa3
ba3
ca3
1a3
2a3
3a3
ab3
bb3
cb3
1b3
2b3
3b3
ac3
bc3
cc3
1c3
2c3
3c3
a13
b13
c13
113
213
313
a23
b23
c23
123
223
323
a33
b33
c33
133
233
333
aaaa
baaa
caaa
1aaa
2aaa
3aaa
abaa
bbaa
cbaa
1baa
2baa
3baa
acaa
bcaa
ccaa
1caa
2caa
3caa
a1aa
b1aa
c1aa
11aa
21aa
31aa
a2aa
b2aa
c2aa
12aa
22aa
32aa
a3aa
b3aa
c3aa
13aa
23aa
33aa
aaba
baba
caba
1aba
2aba
3aba
abba
bbba
cbba
1bba
2bba
3bba
acba
bcba
ccba
1cba
2cba
3cba
a1ba
b1ba
c1ba
11ba
21ba
31ba
a2ba
b2ba
c2ba
12ba
22ba
32ba
a3ba
b3ba
c3ba
13ba
23ba
33ba
aaca
baca
caca
1aca
2aca
3aca
abca
bbca
cbca
1bca
2bca
3bca
acca
bcca
ccca
1cca
2cca
3cca
a1ca
b1ca
c1ca
11ca
21ca
31ca
a2ca
b2ca
c2ca
12ca
22ca
32ca
a3ca
b3ca
c3ca
13ca
23ca
33ca
aa1a
ba1a
ca1a
1a1a
2a1a
3a1a
ab1a
bb1a
cb1a
1b1a
2b1a
3b1a
ac1a
bc1a
cc1a
1c1a
2c1a
3c1a
a11a
b11a
c11a
111a
211a
311a
a21a
b21a
c21a
121a
221a
321a
a31a
b31a
c31a
131a
231a
331a
aa2a
ba2a
ca2a
1a2a
2a2a
3a2a
ab2a
bb2a
cb2a
1b2a
2b2a
3b2a
ac2a
bc2a
cc2a
1c2a
2c2a
3c2a
a12a
b12a
c12a
112a
212a
312a
a22a
b22a
c22a
122a
222a
322a
a32a
b32a
c32a
132a
232a
332a
aa3a
ba3a
ca3a
1a3a
2a3a
3a3a
ab3a
bb3a
cb3a
1b3a
2b3a
3b3a
ac3a
bc3a
cc3a
1c3a
2c3a
3c3a
a13a
b13a
c13a
113a
213a
313a
a23a
b23a
c23a
123a
223a
323a
a33a
b33a
c33a
133a
233a
333a
aaab
baab
caab
1aab
2aab
3aab
abab
bbab
cbab
1bab
2bab
3bab
acab
bcab
ccab
1cab
2cab
3cab
a1ab
b1ab
c1ab
11ab
21ab
31ab
a2ab
b2ab
c2ab
12ab
22ab
32ab
a3ab
b3ab
c3ab
13ab
23ab
33ab
aabb
babb
cabb
1abb
2abb
3abb
abbb
bbbb
cbbb
1bbb
2bbb
3bbb
acbb
bcbb
ccbb
1cbb
2cbb
3cbb
a1bb
b1bb
c1bb
11bb
21bb
31bb
a2bb
b2bb
c2bb
12bb
22bb
32bb
a3bb
b3bb
c3bb
13bb
23bb
33bb
aacb
bacb
cacb
1acb
2acb
3acb
abcb
bbcb
cbcb
1bcb
2bcb
3bcb
accb
bccb
cccb
1ccb
2ccb
3ccb
a1cb
b1cb
c1cb
11cb
21cb
31cb
a2cb
b2cb
c2cb
12cb
22cb
32cb
a3cb
b3cb
c3cb
13cb
23cb
33cb
aa1b
ba1b
ca1b
1a1b
2a1b
3a1b
ab1b
bb1b
cb1b
1b1b
2b1b
3b1b
ac1b
bc1b
cc1b
1c1b
2c1b
3c1b
a11b
b11b
c11b
111b
211b
311b
a21b
b21b
c21b
121b
221b
321b
a31b
b31b
c31b
131b
231b
331b
aa2b
ba2b
ca2b
1a2b
2a2b
3a2b
ab2b
bb2b
cb2b
1b2b
2b2b
3b2b
ac2b
bc2b
cc2b
1c2b
2c2b
3c2b
a12b
b12b
c12b
112b
212b
312b
a22b
b22b
c22b
122b
222b
322b
a32b
b32b
c32b
132b
232b
332b
aa3b
ba3b
ca3b
1a3b
2a3b
3a3b
ab3b
bb3b
cb3b
1b3b
2b3b
3b3b
ac3b
bc3b
cc3b
1c3b
2c3b
3c3b
a13b
b13b
c13b
113b
213b
313b
a23b
b23b
c23b
123b
223b
323b
a33b
b33b
c33b
133b
233b
333b
aaac
baac
caac
1aac
2aac
3aac
abac
bbac
cbac
1bac
2bac
3bac
acac
bcac
ccac
1cac
2cac
3cac
a1ac
b1ac
c1ac
11ac
21ac
31ac
a2ac
b2ac
c2ac
12ac
22ac
32ac
a3ac
b3ac
c3ac
13ac
23ac
33ac
aabc
babc
cabc
1abc
2abc
3abc
abbc
bbbc
cbbc
1bbc
2bbc
3bbc
acbc
bcbc
ccbc
1cbc
2cbc
3cbc
a1bc
b1bc
c1bc
11bc
21bc
31bc
a2bc
b2bc
c2bc
12bc
22bc
32bc
a3bc
b3bc
c3bc
13bc
23bc
33bc
aacc
bacc
cacc
1acc
2acc
3acc
abcc
bbcc
cbcc
1bcc
2bcc
3bcc
accc
bccc
cccc
1ccc
2ccc
3ccc
a1cc
b1cc
c1cc
11cc
21cc
31cc
a2cc
b2cc
c2cc
12cc
22cc
32cc
a3cc
b3cc
c3cc
13cc
23cc
33cc
aa1c
ba1c
ca1c
1a1c
2a1c
3a1c
ab1c
bb1c
cb1c
1b1c
2b1c
3b1c
ac1c
bc1c
cc1c
1c1c
2c1c
3c1c
a11c
b11c
c11c
111c
211c
311c
a21c
b21c
c21c
121c
221c
321c
a31c
b31c
c31c
131c
231c
331c
aa2c
ba2c
ca2c
1a2c
2a2c
3a2c
ab2c
bb2c
cb2c
1b2c
2b2c
3b2c
ac2c
bc2c
cc2c
1c2c
2c2c
3c2c
a12c
b12c
c12c
112c
212c
312c
a22c
b22c
c22c
122c
222c
322c
a32c
b32c
c32c
132c
232c
332c
aa3c
ba3c
ca3c
1a3c
2a3c
3a3c
ab3c
bb3c
cb3c
1b3c
2b3c
3b3c
ac3c
bc3c
cc3c
1c3c
2c3c
3c3c
a13c
b13c
c13c
113c
213c
313c
a23c
b23c
c23c
123c
223c
323c
a33c
b33c
c33c
133c
233c
333c
aaa1
baa1
caa1
1aa1
2aa1
3aa1
aba1
bba1
cba1
1ba1
2ba1
3ba1
aca1
bca1
cca1
1ca1
2ca1
3ca1
a1a1
b1a1
c1a1
11a1
21a1
31a1
a2a1
b2a1
c2a1
12a1
22a1
32a1
a3a1
b3a1
c3a1
13a1
23a1
33a1
aab1
bab1
cab1
1ab1
2ab1
3ab1
abb1
bbb1
cbb1
1bb1
2bb1
3bb1
acb1
bcb1
ccb1
1cb1
2cb1
3cb1
a1b1
b1b1
c1b1
11b1
21b1
31b1
a2b1
b2b1
c2b1
12b1
22b1
32b1
a3b1
b3b1
c3b1
13b1
23b1
33b1
aac1
bac1
cac1
1ac1
2ac1
3ac1
abc1
bbc1
cbc1
1bc1
2bc1
3bc1
acc1
bcc1
ccc1
1cc1
2cc1
3cc1
a1c1
b1c1
c1c1
11c1
21c1
31c1
a2c1
b2c1
c2c1
12c1
22c1
32c1
a3c1
b3c1
c3c1
13c1
23c1
33c1
aa11
ba11
ca11
1a11
2a11
3a11
ab11
bb11
cb11
1b11
2b11
3b11
ac11
bc11
cc11
1c11
2c11
3c11
a111
b111
c111
1111
2111
3111
a211
b211
c211
1211
2211
3211
a311
b311
c311
1311
2311
3311
aa21
ba21
ca21
1a21
2a21
3a21
ab21
bb21
cb21
1b21
2b21
3b21
ac21
bc21
cc21
1c21
2c21
3c21
a121
b121
c121
1121
2121
3121
a221
b221
c221
1221
2221
3221
a321
b321
c321
1321
2321
3321
aa31
ba31
ca31
1a31
2a31
3a31
ab31
bb31
cb31
1b31
2b31
3b31
ac31
bc31
cc31
1c31
2c31
3c31
a131
b131
c131
1131
2131
3131
a231
b231
c231
1231
2231
3231
a331
b331
c331
1331
2331
3331
aaa2
baa2
caa2
1aa2
2aa2
3aa2
aba2
bba2
cba2
1ba2
2ba2
3ba2
aca2
bca2
cca2
1ca2
2ca2
3ca2
a1a2
b1a2
c1a2
11a2
21a2
31a2
a2a2
b2a2
c2a2
12a2
22a2
32a2
a3a2
b3a2
c3a2
13a2
23a2
33a2
aab2
bab2
cab2
1ab2
2ab2
3ab2
abb2
bbb2
cbb2
1bb2
2bb2
3bb2
acb2
bcb2
ccb2
1cb2
2cb2
3cb2
a1b2
b1b2
c1b2
11b2
21b2
31b2
a2b2
b2b2
c2b2
12b2
22b2
32b2
a3b2
b3b2
c3b2
13b2
23b2
33b2
aac2
bac2
cac2
1ac2
2ac2
3ac2
abc2
bbc2
cbc2
1bc2
2bc2
3bc2
acc2
bcc2
ccc2
1cc2
2cc2
3cc2
a1c2
b1c2
c1c2
11c2
21c2
31c2
a2c2
b2c2
c2c2
12c2
22c2
32c2
a3c2
b3c2
c3c2
13c2
23c2
33c2
aa12
ba12
ca12
1a12
2a12
3a12
ab12
bb12
cb12
1b12
2b12
3b12
ac12
bc12
cc12
1c12
2c12
3c12
a112
b112
c112
1112
2112
3112
a212
b212
c212
1212
2212
3212
a312
b312
c312
1312
2312
3312
aa22
ba22
ca22
1a22
2a22
3a22
ab22
bb22
cb22
1b22
2b22
3b22
ac22
bc22
cc22
1c22
2c22
3c22
a122
b122
c122
1122
2122
3122
a222
b222
c222
1222
2222
3222
a322
b322
c322
1322
2322
3322
aa32
ba32
ca32
1a32
2a32
3a32
ab32
bb32
cb32
1b32
2b32
3b32
ac32
bc32
cc32
1c32
2c32
3c32
a132
b132
c132
1132
2132
3132
a232
b232
c232
1232
2232
3232
a332
b332
c332
1332
2332
3332
aaa3
baa3
caa3
1aa3
2aa3
3aa3
aba3
bba3
cba3
1ba3
2ba3
3ba3
aca3
bca3
cca3
1ca3
2ca3
3ca3
a1a3
b1a3
c1a3
11a3
21a3
31a3
a2a3
b2a3
c2a3
12a3
22a3
32a3
a3a3
b3a3
c3a3
13a3
23a3
33a3
aab3
bab3
cab3
1ab3
2ab3
3ab3
abb3
bbb3
cbb3
1bb3
2bb3
3bb3
acb3
bcb3
ccb3
1cb3
2cb3
3cb3
a1b3
b1b3
c1b3
11b3
21b3
31b3
a2b3
b2b3
c2b3
12b3
22b3
32b3
a3b3
b3b3
c3b3
13b3
23b3
33b3
aac3
bac3
cac3
1ac3
2ac3
3ac3
abc3
bbc3
cbc3
1bc3
2bc3
3bc3
acc3
bcc3
ccc3
1cc3
2cc3
3cc3
a1c3
b1c3
c1c3
11c3
21c3
31c3
a2c3
b2c3
c2c3
12c3
22c3
32c3
a3c3
b3c3
c3c3
13c3
23c3
33c3
aa13
ba13
ca13
1a13
2a13
3a13
ab13
bb13
cb13
1b13
2b13
3b13
ac13
bc13
cc13
1c13
2c13
3c13
a113
b113
c113
1113
2113
3113
a213
b213
c213
1213
2213
3213
a313
b313
c313
1313
2313
3313
aa23
ba23
ca23
1a23
2a23
3a23
ab23
bb23
cb23
1b23
2b23
3b23
ac23
bc23
cc23
1c23
2c23
3c23
a123
b123
c123
1123
2123
3123
a223
b223
c223
1223
2223
3223
a323
b323
c323
1323
2323
3323
aa33
ba33
ca33
1a33
2a33
3a33
ab33
bb33
cb33
1b33
2b33
3b33
ac33
bc33
cc33
1c33
2c33
3c33
a133
b133
c133
1133
2133
3133
a233
b233
c233
1233
2233
3233
a333
b333
c333
1333
2333
3333 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-25T05:57:27.753

解决此问题的最佳且简洁的方法是使用递归解决方案，希望行内注释足以理解解决方案：

```
<?php

// Recursive method that print all permutation of a given length
// @param $arr input array
// @param $arrLen just the length of the above array
// @param $size length or size for which we are making all permutation
// @param $perArr this is a temporary array to hold the current permutation being created
// @param $pos current position of $perArr
function printPermutation($arr, $arrLen, $size, $perArr, $pos) {
   if ($size==$pos) { //if $pos reach $size then we have found one permutation
      for ($i=0; $i<$size; $i++) print $perArr[$i];
      print ("\n");
      return;
   }
   for ($i=0; $i<$arrLen; $i++) {
      $perArr[$pos] = $arr[$i]; //put i'th char in current position
      //The recursive call that move to next position with $pos+1
      printPermutation($arr, $arrLen, $size, $perArr, $pos+1); 
   }
}

//all printPermutation method with 1 - maxLen
function showAllPermutation($letters, $maxLen) {
   $length = count($letters);
   $perArr = array();
   for ($i=1; $i<=$maxLen; $i++) {
      printPermutation ($letters, $length, $i, $perArr, 0);
   }
}

//main
$letters = array('a','b','c','1','2','3');
$max_length = 4;

showAllPermutation ($letters, $max_length);
?> 
```

如果您有兴趣，这里是上述代码的非常大的输出：stdout：

```
a
b
c
1
2
3
aa
ab
ac
a1
a2
a3
ba
bb
bc
b1
b2
b3
ca
cb
cc
c1
c2
c3
1a
1b
1c
11
12
13
2a
2b
2c
21
22
23
3a
3b
3c
31
32
33
aaa
aab
aac
aa1
aa2
aa3
aba
abb
abc
ab1
ab2
ab3
aca
acb
acc
ac1
ac2
ac3
a1a
a1b
a1c
a11
a12
a13
a2a
a2b
a2c
a21
a22
a23
a3a
a3b
a3c
a31
a32
a33
baa
bab
bac
ba1
ba2
ba3
bba
bbb
bbc
bb1
bb2
bb3
bca
bcb
bcc
bc1
bc2
bc3
b1a
b1b
b1c
b11
b12
b13
b2a
b2b
b2c
b21
b22
b23
b3a
b3b
b3c
b31
b32
b33
caa
cab
cac
ca1
ca2
ca3
cba
cbb
cbc
cb1
cb2
cb3
cca
ccb
ccc
cc1
cc2
cc3
c1a
c1b
c1c
c11
c12
c13
c2a
c2b
c2c
c21
c22
c23
c3a
c3b
c3c
c31
c32
c33
1aa
1ab
1ac
1a1
1a2
1a3
1ba
1bb
1bc
1b1
1b2
1b3
1ca
1cb
1cc
1c1
1c2
1c3
11a
11b
11c
111
112
113
12a
12b
12c
121
122
123
13a
13b
13c
131
132
133
2aa
2ab
2ac
2a1
2a2
2a3
2ba
2bb
2bc
2b1
2b2
2b3
2ca
2cb
2cc
2c1
2c2
2c3
21a
21b
21c
211
212
213
22a
22b
22c
221
222
223
23a
23b
23c
231
232
233
3aa
3ab
3ac
3a1
3a2
3a3
3ba
3bb
3bc
3b1
3b2
3b3
3ca
3cb
3cc
3c1
3c2
3c3
31a
31b
31c
311
312
313
32a
32b
32c
321
322
323
33a
33b
33c
331
332
333
aaaa
aaab
aaac
aaa1
aaa2
aaa3
aaba
aabb
aabc
aab1
aab2
aab3
aaca
aacb
aacc
aac1
aac2
aac3
aa1a
aa1b
aa1c
aa11
aa12
aa13
aa2a
aa2b
aa2c
aa21
aa22
aa23
aa3a
aa3b
aa3c
aa31
aa32
aa33
abaa
abab
abac
aba1
aba2
aba3
abba
abbb
abbc
abb1
abb2
abb3
abca
abcb
abcc
abc1
abc2
abc3
ab1a
ab1b
ab1c
ab11
ab12
ab13
ab2a
ab2b
ab2c
ab21
ab22
ab23
ab3a
ab3b
ab3c
ab31
ab32
ab33
acaa
acab
acac
aca1
aca2
aca3
acba
acbb
acbc
acb1
acb2
acb3
acca
accb
accc
acc1
acc2
acc3
ac1a
ac1b
ac1c
ac11
ac12
ac13
ac2a
ac2b
ac2c
ac21
ac22
ac23
ac3a
ac3b
ac3c
ac31
ac32
ac33
a1aa
a1ab
a1ac
a1a1
a1a2
a1a3
a1ba
a1bb
a1bc
a1b1
a1b2
a1b3
a1ca
a1cb
a1cc
a1c1
a1c2
a1c3
a11a
a11b
a11c
a111
a112
a113
a12a
a12b
a12c
a121
a122
a123
a13a
a13b
a13c
a131
a132
a133
a2aa
a2ab
a2ac
a2a1
a2a2
a2a3
a2ba
a2bb
a2bc
a2b1
a2b2
a2b3
a2ca
a2cb
a2cc
a2c1
a2c2
a2c3
a21a
a21b
a21c
a211
a212
a213
a22a
a22b
a22c
a221
a222
a223
a23a
a23b
a23c
a231
a232
a233
a3aa
a3ab
a3ac
a3a1
a3a2
a3a3
a3ba
a3bb
a3bc
a3b1
a3b2
a3b3
a3ca
a3cb
a3cc
a3c1
a3c2
a3c3
a31a
a31b
a31c
a311
a312
a313
a32a
a32b
a32c
a321
a322
a323
a33a
a33b
a33c
a331
a332
a333
baaa
baab
baac
baa1
baa2
baa3
baba
babb
babc
bab1
bab2
bab3
baca
bacb
bacc
bac1
bac2
bac3
ba1a
ba1b
ba1c
ba11
ba12
ba13
ba2a
ba2b
ba2c
ba21
ba22
ba23
ba3a
ba3b
ba3c
ba31
ba32
ba33
bbaa
bbab
bbac
bba1
bba2
bba3
bbba
bbbb
bbbc
bbb1
bbb2
bbb3
bbca
bbcb
bbcc
bbc1
bbc2
bbc3
bb1a
bb1b
bb1c
bb11
bb12
bb13
bb2a
bb2b
bb2c
bb21
bb22
bb23
bb3a
bb3b
bb3c
bb31
bb32
bb33
bcaa
bcab
bcac
bca1
bca2
bca3
bcba
bcbb
bcbc
bcb1
bcb2
bcb3
bcca
bccb
bccc
bcc1
bcc2
bcc3
bc1a
bc1b
bc1c
bc11
bc12
bc13
bc2a
bc2b
bc2c
bc21
bc22
bc23
bc3a
bc3b
bc3c
bc31
bc32
bc33
b1aa
b1ab
b1ac
b1a1
b1a2
b1a3
b1ba
b1bb
b1bc
b1b1
b1b2
b1b3
b1ca
b1cb
b1cc
b1c1
b1c2
b1c3
b11a
b11b
b11c
b111
b112
b113
b12a
b12b
b12c
b121
b122
b123
b13a
b13b
b13c
b131
b132
b133
b2aa
b2ab
b2ac
b2a1
b2a2
b2a3
b2ba
b2bb
b2bc
b2b1
b2b2
b2b3
b2ca
b2cb
b2cc
b2c1
b2c2
b2c3
b21a
b21b
b21c
b211
b212
b213
b22a
b22b
b22c
b221
b222
b223
b23a
b23b
b23c
b231
b232
b233
b3aa
b3ab
b3ac
b3a1
b3a2
b3a3
b3ba
b3bb
b3bc
b3b1
b3b2
b3b3
b3ca
b3cb
b3cc
b3c1
b3c2
b3c3
b31a
b31b
b31c
b311
b312
b313
b32a
b32b
b32c
b321
b322
b323
b33a
b33b
b33c
b331
b332
b333
caaa
caab
caac
caa1
caa2
caa3
caba
cabb
cabc
cab1
cab2
cab3
caca
cacb
cacc
cac1
cac2
cac3
ca1a
ca1b
ca1c
ca11
ca12
ca13
ca2a
ca2b
ca2c
ca21
ca22
ca23
ca3a
ca3b
ca3c
ca31
ca32
ca33
cbaa
cbab
cbac
cba1
cba2
cba3
cbba
cbbb
cbbc
cbb1
cbb2
cbb3
cbca
cbcb
cbcc
cbc1
cbc2
cbc3
cb1a
cb1b
cb1c
cb11
cb12
cb13
cb2a
cb2b
cb2c
cb21
cb22
cb23
cb3a
cb3b
cb3c
cb31
cb32
cb33
ccaa
ccab
ccac
cca1
cca2
cca3
ccba
ccbb
ccbc
ccb1
ccb2
ccb3
ccca
cccb
cccc
ccc1
ccc2
ccc3
cc1a
cc1b
cc1c
cc11
cc12
cc13
cc2a
cc2b
cc2c
cc21
cc22
cc23
cc3a
cc3b
cc3c
cc31
cc32
cc33
c1aa
c1ab
c1ac
c1a1
c1a2
c1a3
c1ba
c1bb
c1bc
c1b1
c1b2
c1b3
c1ca
c1cb
c1cc
c1c1
c1c2
c1c3
c11a
c11b
c11c
c111
c112
c113
c12a
c12b
c12c
c121
c122
c123
c13a
c13b
c13c
c131
c132
c133
c2aa
c2ab
c2ac
c2a1
c2a2
c2a3
c2ba
c2bb
c2bc
c2b1
c2b2
c2b3
c2ca
c2cb
c2cc
c2c1
c2c2
c2c3
c21a
c21b
c21c
c211
c212
c213
c22a
c22b
c22c
c221
c222
c223
c23a
c23b
c23c
c231
c232
c233
c3aa
c3ab
c3ac
c3a1
c3a2
c3a3
c3ba
c3bb
c3bc
c3b1
c3b2
c3b3
c3ca
c3cb
c3cc
c3c1
c3c2
c3c3
c31a
c31b
c31c
c311
c312
c313
c32a
c32b
c32c
c321
c322
c323
c33a
c33b
c33c
c331
c332
c333
1aaa
1aab
1aac
1aa1
1aa2
1aa3
1aba
1abb
1abc
1ab1
1ab2
1ab3
1aca
1acb
1acc
1ac1
1ac2
1ac3
1a1a
1a1b
1a1c
1a11
1a12
1a13
1a2a
1a2b
1a2c
1a21
1a22
1a23
1a3a
1a3b
1a3c
1a31
1a32
1a33
1baa
1bab
1bac
1ba1
1ba2
1ba3
1bba
1bbb
1bbc
1bb1
1bb2
1bb3
1bca
1bcb
1bcc
1bc1
1bc2
1bc3
1b1a
1b1b
1b1c
1b11
1b12
1b13
1b2a
1b2b
1b2c
1b21
1b22
1b23
1b3a
1b3b
1b3c
1b31
1b32
1b33
1caa
1cab
1cac
1ca1
1ca2
1ca3
1cba
1cbb
1cbc
1cb1
1cb2
1cb3
1cca
1ccb
1ccc
1cc1
1cc2
1cc3
1c1a
1c1b
1c1c
1c11
1c12
1c13
1c2a
1c2b
1c2c
1c21
1c22
1c23
1c3a
1c3b
1c3c
1c31
1c32
1c33
11aa
11ab
11ac
11a1
11a2
11a3
11ba
11bb
11bc
11b1
11b2
11b3
11ca
11cb
11cc
11c1
11c2
11c3
111a
111b
111c
1111
1112
1113
112a
112b
112c
1121
1122
1123
113a
113b
113c
1131
1132
1133
12aa
12ab
12ac
12a1
12a2
12a3
12ba
12bb
12bc
12b1
12b2
12b3
12ca
12cb
12cc
12c1
12c2
12c3
121a
121b
121c
1211
1212
1213
122a
122b
122c
1221
1222
1223
123a
123b
123c
1231
1232
1233
13aa
13ab
13ac
13a1
13a2
13a3
13ba
13bb
13bc
13b1
13b2
13b3
13ca
13cb
13cc
13c1
13c2
13c3
131a
131b
131c
1311
1312
1313
132a
132b
132c
1321
1322
1323
133a
133b
133c
1331
1332
1333
2aaa
2aab
2aac
2aa1
2aa2
2aa3
2aba
2abb
2abc
2ab1
2ab2
2ab3
2aca
2acb
2acc
2ac1
2ac2
2ac3
2a1a
2a1b
2a1c
2a11
2a12
2a13
2a2a
2a2b
2a2c
2a21
2a22
2a23
2a3a
2a3b
2a3c
2a31
2a32
2a33
2baa
2bab
2bac
2ba1
2ba2
2ba3
2bba
2bbb
2bbc
2bb1
2bb2
2bb3
2bca
2bcb
2bcc
2bc1
2bc2
2bc3
2b1a
2b1b
2b1c
2b11
2b12
2b13
2b2a
2b2b
2b2c
2b21
2b22
2b23
2b3a
2b3b
2b3c
2b31
2b32
2b33
2caa
2cab
2cac
2ca1
2ca2
2ca3
2cba
2cbb
2cbc
2cb1
2cb2
2cb3
2cca
2ccb
2ccc
2cc1
2cc2
2cc3
2c1a
2c1b
2c1c
2c11
2c12
2c13
2c2a
2c2b
2c2c
2c21
2c22
2c23
2c3a
2c3b
2c3c
2c31
2c32
2c33
21aa
21ab
21ac
21a1
21a2
21a3
21ba
21bb
21bc
21b1
21b2
21b3
21ca
21cb
21cc
21c1
21c2
21c3
211a
211b
211c
2111
2112
2113
212a
212b
212c
2121
2122
2123
213a
213b
213c
2131
2132
2133
22aa
22ab
22ac
22a1
22a2
22a3
22ba
22bb
22bc
22b1
22b2
22b3
22ca
22cb
22cc
22c1
22c2
22c3
221a
221b
221c
2211
2212
2213
222a
222b
222c
2221
2222
2223
223a
223b
223c
2231
2232
2233
23aa
23ab
23ac
23a1
23a2
23a3
23ba
23bb
23bc
23b1
23b2
23b3
23ca
23cb
23cc
23c1
23c2
23c3
231a
231b
231c
2311
2312
2313
232a
232b
232c
2321
2322
2323
233a
233b
233c
2331
2332
2333
3aaa
3aab
3aac
3aa1
3aa2
3aa3
3aba
3abb
3abc
3ab1
3ab2
3ab3
3aca
3acb
3acc
3ac1
3ac2
3ac3
3a1a
3a1b
3a1c
3a11
3a12
3a13
3a2a
3a2b
3a2c
3a21
3a22
3a23
3a3a
3a3b
3a3c
3a31
3a32
3a33
3baa
3bab
3bac
3ba1
3ba2
3ba3
3bba
3bbb
3bbc
3bb1
3bb2
3bb3
3bca
3bcb
3bcc
3bc1
3bc2
3bc3
3b1a
3b1b
3b1c
3b11
3b12
3b13
3b2a
3b2b
3b2c
3b21
3b22
3b23
3b3a
3b3b
3b3c
3b31
3b32
3b33
3caa
3cab
3cac
3ca1
3ca2
3ca3
3cba
3cbb
3cbc
3cb1
3cb2
3cb3
3cca
3ccb
3ccc
3cc1
3cc2
3cc3
3c1a
3c1b
3c1c
3c11
3c12
3c13
3c2a
3c2b
3c2c
3c21
3c22
3c23
3c3a
3c3b
3c3c
3c31
3c32
3c33
31aa
31ab
31ac
31a1
31a2
31a3
31ba
31bb
31bc
31b1
31b2
31b3
31ca
31cb
31cc
31c1
31c2
31c3
311a
311b
311c
3111
3112
3113
312a
312b
312c
3121
3122
3123
313a
313b
313c
3131
3132
3133
32aa
32ab
32ac
32a1
32a2
32a3
32ba
32bb
32bc
32b1
32b2
32b3
32ca
32cb
32cc
32c1
32c2
32c3
321a
321b
321c
3211
3212
3213
322a
322b
322c
3221
3222
3223
323a
323b
323c
3231
3232
3233
33aa
33ab
33ac
33a1
33a2
33a3
33ba
33bb
33bc
33b1
33b2
33b3
33ca
33cb
33cc
33c1
33c2
33c3
331a
331b
331c
3311
3312
3313
332a
332b
332c
3321
3322
3323
333a
333b
333c
3331
3332
3333 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-06T06:16:49.867

我会选择递归解决方案。
“猜测”第一个元素是什么，并递归以下元素。
重复所有可能的猜测。

伪代码：

```
findCombinations(array, candidate, length):
  //base clause:
  if (candidate.length == length):
       return
  for each i from 0to array.length:
       //i is the next char to add
       candidate.append(array[i])
       //print the candidate, since it is a unique permutation smaller then length:
       print candidate
       //recursively find permutations for the remianing elements
       findCombinations(array,candidate,length)
       //clean up 
       candidate.removeLasElement() 
```

Java 代码：

```
private static void findCombinations(char[] array, StringBuilder candidate, int length) { 
      //base clause:
      if (candidate.length() == length)
           return;
      for (int i = 0; i < array.length; i++) { 
           //i is the next char to add
           candidate.append(array[i]);
           //print the candidate, since it is a unique permutation smaller then length:
           System.out.println(candidate);
           //recursively find permutations for the remianing elements
           findCombinations(array,candidate,length);
           //clean up 
           candidate.deleteCharAt(candidate.length()-1);
      }
}
public static void findCombinations(char[] array,int length) { 
    findCombinations(array, new StringBuilder(), length);
} 
```

调用：

```
 char[] arr = "abcde".toCharArray();
    findCombinations(arr, 3); 
```

结果是：

```
a
aa
aaa
aab
aac
aad
aae
ab
aba
abb
abc
abd
abe
ac
aca
acb
acc
acd
ace
ad
ada
adb
adc
add
ade
ae
aea
aeb
aec
aed
aee
b
ba
baa
bab
bac
bad
bae
bb
bba
bbb
bbc
bbd
bbe
bc
bca
bcb
bcc
bcd
bce
bd
bda
bdb
bdc
bdd
bde
be
bea
beb
bec
bed
bee
c
ca
caa
cab
cac
cad
cae
cb
cba
cbb
cbc
cbd
cbe
cc
cca
ccb
ccc
ccd
cce
cd
cda
cdb
cdc
cdd
cde
ce
cea
ceb
cec
ced
cee
d
da
daa
dab
dac
dad
dae
db
dba
dbb
dbc
dbd
dbe
dc
dca
dcb
dcc
dcd
dce
dd
dda
ddb
ddc
ddd
dde
de
dea
deb
dec
ded
dee
e
ea
eaa
eab
eac
ead
eae
eb
eba
ebb
ebc
ebd
ebe
ec
eca
ecb
ecc
ecd
ece
ed
eda
edb
edc
edd
ede
ee
eea
eeb
eec
eed
eee 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-25T11:49:09.597

可以肯定的一件事是，无论算法使用什么，生成所有数字的最佳时间复杂度大约是 O((n^m+1)/(n-1)) （假设你不是使用任何并行编程。）。（其中 n 是数组的大小，m 是最大长度。）

对于上述任何一种算法都更适合。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-03-30T21:52:59.843

**解决方案**

```
function combinationsByLenth($arr, $len) {
    $combinations = [];
    $select = array_fill(0, $len, 0);
    $selectCount = count($select);
    $arrCount = count($arr);
    $possibleCombinations = pow($arrCount, $selectCount);

    while ($possibleCombinations-- > 0) {
        $combination = '';

        foreach ($select as $index) {
            $combination .= $arr[$index];
        }

        $combinations[] = $combination;

        for ($i = $selectCount - 1; $i >= 0; $i--) {
            if ($select[$i] !== ($arrCount - 1)) {
                $select[$i]++;
                break;
            } else {
                $select[$i] = 0;
            }
        }
    }

    return $combinations;
}

function combinationsByMinMax($arr, $min, $max) {
    $combinations = [];

    for ($i = $min; $i <= $max; $i++) {
        $combinations = array_merge($combinations, combinationsByLenth($arr, $i));
    }

    return $combinations;
}

print_r(combinationsByMinMax($arr, 1, 5)); 
```

**输出**

```
Array
(
    [0] => a
    [1] => b
    [2] => c
    [3] => 1
    [4] => 2
    [5] => 3
    [6] => aa
    [7] => ab
    [8] => ac
    [9] => a1
    ...
    [9320] => 3332c
    [9321] => 33321
    [9322] => 33322
    [9323] => 33323
    [9324] => 3333a
    [9325] => 3333b
    [9326] => 3333c
    [9327] => 33331
    [9328] => 33332
    [9329] => 33333
) 
```

**基本原理**

*   避免在 PHP 中针对此类问题使用递归解决方案（注意，我喜欢使用经过优化以更好地处理它的语言中的递归）以避免随着长度的增长而出现堆栈问题。
*   将函数分解为两个单独的函数，一个实现最小和最大长度，另一个获得特定长度的可能组合以促进重用和清晰。
*   尽可能限制 2 个函数内的函数调用以提高性能（这个算法很快就会变得很重！）

**我是如何开发这个解决方案的**

我从一个处理长度为 5 组合的特定情况的函数开始，重构以泛化算法，重构以泛化算法等。我提出了一个快速要点，以便您可以看到迭代以实现此工作版本作为如何构建此类算法的案例研究：

[https://gist.github.com/AdamJonR/5278480](https://gist.github.com/AdamJonR/5278480)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-03-25T08:42:49.387

一种基于简单计数算法的非递归 PHP 解决方案，具有尽可能多的可能*数字*，因为`$letters`数组有元素。所以对于一个由 5 个元素组成的数组，最大长度为 3，计数数组有 1（第一个）到 3 个（结束）元素，比如

```
0, 1, ..., 4 then
00, 01, ..., 04, 10, ... 14, ... 44 
```

什么时候（实际上`00`是`array(0,0)`为了优化循环，计数就像`00, 10, 20, ..., 34, 44`）

然后从那个“计数”数组构建字符串。

```
<?php

function andcounting($letters, $len) {
  $lastindex = count($letters) - 1;
  $n = array(0); // counting array

  while(true) {
    // display current result
    for ($i=count($n)-1 ; $i>=0 ; $i--) echo $letters[$n[$i]];
    echo "\n";

    // increment $n
    for ($i=count($n)-1 ; $i>=0 ; $i--) {
      if (++$n[$i] <= $lastindex) break;
      $n[$i] = 0;
    }

    // check if need to add a dim (or exit)
    if ($i < 0) {
      if (count($n) == $len) break;
      $n[] = 0;
    }
  }
} 
```

运行函数

```
andcounting( array('a','b','c','d','e'), 3); 
```

给出（*从左到右和从上到下*）

```
 a   b   c   d   e  aa  ba  ca  da  ea  ab  bb  cb  db  eb  ac  bc  cc  dc  ec
  ad  bd  cd  dd  ed  ae  be  ce  de  ee aaa baa caa daa eaa aba bba cba dba eba
 aca bca cca dca eca ada bda cda dda eda aea bea cea dea eea aab bab cab dab eab
 abb bbb cbb dbb ebb acb bcb ccb dcb ecb adb bdb cdb ddb edb aeb beb ceb deb eeb
 aac bac cac dac eac abc bbc cbc dbc ebc acc bcc ccc dcc ecc adc bdc cdc ddc edc
 aec bec cec dec eec aad bad cad dad ead abd bbd cbd dbd ebd acd bcd ccd dcd ecd
 add bdd cdd ddd edd aed bed ced ded eed aae bae cae dae eae abe bbe cbe dbe ebe
 ace bce cce dce ece ade bde cde dde ede aee bee cee dee eee 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-03-25T07:01:57.463

与最初为空的集合 S 的 k 次累积集合乘积将产生直到 k 长的所有排列，其中 n = |S| ..

**时间：O(kn^2)**

**空间：O(kn^2)**

```
// Enumerate all permutations, PHP
// by Khaled A Khunaifer, 25/3/2013

function setProduct($a, $b)
{
    $arr = array();

    foreach ($a as $s)
    {
        foreach ($b as $t)
        {
            $arr[] = $s . $t;
        }
    }

    return $arr;
}

function enumerate ($arrary, $maxLen)
{
    $enumeration = array();

    for (var $i = 1; $i <= $maxLen; $i++)
    {
        $enumeration += setProduct($enumeration, $array);
    }
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-03-27T13:33:08.063

这是一种不同的语言，但这是您最终要寻找的结果吗？

```
>>> import itertools
>>> def my_combinations(string, max_length):
    for repeat in range(1, max_length + 1):
        for result in itertools.product(string, repeat=repeat):
            yield ''.join(result)

>>> print(*my_combinations('abc123', 4), sep='\n')
a
b
c
1
2
3
aa
ab
ac
a1
a2
a3
ba
bb
bc
b1
b2
b3
ca
cb
cc
c1
c2
c3
1a
1b
1c
11
12
13
2a
2b
2c
21
22
23
3a
3b
3c
31
32
33
aaa
aab
aac
aa1
aa2
aa3
aba
abb
abc
ab1
ab2
ab3
aca
acb
acc
ac1
ac2
ac3
a1a
a1b
a1c
a11
a12
a13
a2a
a2b
a2c
a21
a22
a23
a3a
a3b
a3c
a31
a32
a33
baa
bab
bac
ba1
ba2
ba3
bba
bbb
bbc
bb1
bb2
bb3
bca
bcb
bcc
bc1
bc2
bc3
b1a
b1b
b1c
b11
b12
b13
b2a
b2b
b2c
b21
b22
b23
b3a
b3b
b3c
b31
b32
b33
caa
cab
cac
ca1
ca2
ca3
cba
cbb
cbc
cb1
cb2
cb3
cca
ccb
ccc
cc1
cc2
cc3
c1a
c1b
c1c
c11
c12
c13
c2a
c2b
c2c
c21
c22
c23
c3a
c3b
c3c
c31
c32
c33
1aa
1ab
1ac
1a1
1a2
1a3
1ba
1bb
1bc
1b1
1b2
1b3
1ca
1cb
1cc
1c1
1c2
1c3
11a
11b
11c
111
112
113
12a
12b
12c
121
122
123
13a
13b
13c
131
132
133
2aa
2ab
2ac
2a1
2a2
2a3
2ba
2bb
2bc
2b1
2b2
2b3
2ca
2cb
2cc
2c1
2c2
2c3
21a
21b
21c
211
212
213
22a
22b
22c
221
222
223
23a
23b
23c
231
232
233
3aa
3ab
3ac
3a1
3a2
3a3
3ba
3bb
3bc
3b1
3b2
3b3
3ca
3cb
3cc
3c1
3c2
3c3
31a
31b
31c
311
312
313
32a
32b
32c
321
322
323
33a
33b
33c
331
332
333
aaaa
aaab
aaac
aaa1
aaa2
aaa3
aaba
aabb
aabc
aab1
aab2
aab3
aaca
aacb
aacc
aac1
aac2
aac3
aa1a
aa1b
aa1c
aa11
aa12
aa13
aa2a
aa2b
aa2c
aa21
aa22
aa23
aa3a
aa3b
aa3c
aa31
aa32
aa33
abaa
abab
abac
aba1
aba2
aba3
abba
abbb
abbc
abb1
abb2
abb3
abca
abcb
abcc
abc1
abc2
abc3
ab1a
ab1b
ab1c
ab11
ab12
ab13
ab2a
ab2b
ab2c
ab21
ab22
ab23
ab3a
ab3b
ab3c
ab31
ab32
ab33
acaa
acab
acac
aca1
aca2
aca3
acba
acbb
acbc
acb1
acb2
acb3
acca
accb
accc
acc1
acc2
acc3
ac1a
ac1b
ac1c
ac11
ac12
ac13
ac2a
ac2b
ac2c
ac21
ac22
ac23
ac3a
ac3b
ac3c
ac31
ac32
ac33
a1aa
a1ab
a1ac
a1a1
a1a2
a1a3
a1ba
a1bb
a1bc
a1b1
a1b2
a1b3
a1ca
a1cb
a1cc
a1c1
a1c2
a1c3
a11a
a11b
a11c
a111
a112
a113
a12a
a12b
a12c
a121
a122
a123
a13a
a13b
a13c
a131
a132
a133
a2aa
a2ab
a2ac
a2a1
a2a2
a2a3
a2ba
a2bb
a2bc
a2b1
a2b2
a2b3
a2ca
a2cb
a2cc
a2c1
a2c2
a2c3
a21a
a21b
a21c
a211
a212
a213
a22a
a22b
a22c
a221
a222
a223
a23a
a23b
a23c
a231
a232
a233
a3aa
a3ab
a3ac
a3a1
a3a2
a3a3
a3ba
a3bb
a3bc
a3b1
a3b2
a3b3
a3ca
a3cb
a3cc
a3c1
a3c2
a3c3
a31a
a31b
a31c
a311
a312
a313
a32a
a32b
a32c
a321
a322
a323
a33a
a33b
a33c
a331
a332
a333
baaa
baab
baac
baa1
baa2
baa3
baba
babb
babc
bab1
bab2
bab3
baca
bacb
bacc
bac1
bac2
bac3
ba1a
ba1b
ba1c
ba11
ba12
ba13
ba2a
ba2b
ba2c
ba21
ba22
ba23
ba3a
ba3b
ba3c
ba31
ba32
ba33
bbaa
bbab
bbac
bba1
bba2
bba3
bbba
bbbb
bbbc
bbb1
bbb2
bbb3
bbca
bbcb
bbcc
bbc1
bbc2
bbc3
bb1a
bb1b
bb1c
bb11
bb12
bb13
bb2a
bb2b
bb2c
bb21
bb22
bb23
bb3a
bb3b
bb3c
bb31
bb32
bb33
bcaa
bcab
bcac
bca1
bca2
bca3
bcba
bcbb
bcbc
bcb1
bcb2
bcb3
bcca
bccb
bccc
bcc1
bcc2
bcc3
bc1a
bc1b
bc1c
bc11
bc12
bc13
bc2a
bc2b
bc2c
bc21
bc22
bc23
bc3a
bc3b
bc3c
bc31
bc32
bc33
b1aa
b1ab
b1ac
b1a1
b1a2
b1a3
b1ba
b1bb
b1bc
b1b1
b1b2
b1b3
b1ca
b1cb
b1cc
b1c1
b1c2
b1c3
b11a
b11b
b11c
b111
b112
b113
b12a
b12b
b12c
b121
b122
b123
b13a
b13b
b13c
b131
b132
b133
b2aa
b2ab
b2ac
b2a1
b2a2
b2a3
b2ba
b2bb
b2bc
b2b1
b2b2
b2b3
b2ca
b2cb
b2cc
b2c1
b2c2
b2c3
b21a
b21b
b21c
b211
b212
b213
b22a
b22b
b22c
b221
b222
b223
b23a
b23b
b23c
b231
b232
b233
b3aa
b3ab
b3ac
b3a1
b3a2
b3a3
b3ba
b3bb
b3bc
b3b1
b3b2
b3b3
b3ca
b3cb
b3cc
b3c1
b3c2
b3c3
b31a
b31b
b31c
b311
b312
b313
b32a
b32b
b32c
b321
b322
b323
b33a
b33b
b33c
b331
b332
b333
caaa
caab
caac
caa1
caa2
caa3
caba
cabb
cabc
cab1
cab2
cab3
caca
cacb
cacc
cac1
cac2
cac3
ca1a
ca1b
ca1c
ca11
ca12
ca13
ca2a
ca2b
ca2c
ca21
ca22
ca23
ca3a
ca3b
ca3c
ca31
ca32
ca33
cbaa
cbab
cbac
cba1
cba2
cba3
cbba
cbbb
cbbc
cbb1
cbb2
cbb3
cbca
cbcb
cbcc
cbc1
cbc2
cbc3
cb1a
cb1b
cb1c
cb11
cb12
cb13
cb2a
cb2b
cb2c
cb21
cb22
cb23
cb3a
cb3b
cb3c
cb31
cb32
cb33
ccaa
ccab
ccac
cca1
cca2
cca3
ccba
ccbb
ccbc
ccb1
ccb2
ccb3
ccca
cccb
cccc
ccc1
ccc2
ccc3
cc1a
cc1b
cc1c
cc11
cc12
cc13
cc2a
cc2b
cc2c
cc21
cc22
cc23
cc3a
cc3b
cc3c
cc31
cc32
cc33
c1aa
c1ab
c1ac
c1a1
c1a2
c1a3
c1ba
c1bb
c1bc
c1b1
c1b2
c1b3
c1ca
c1cb
c1cc
c1c1
c1c2
c1c3
c11a
c11b
c11c
c111
c112
c113
c12a
c12b
c12c
c121
c122
c123
c13a
c13b
c13c
c131
c132
c133
c2aa
c2ab
c2ac
c2a1
c2a2
c2a3
c2ba
c2bb
c2bc
c2b1
c2b2
c2b3
c2ca
c2cb
c2cc
c2c1
c2c2
c2c3
c21a
c21b
c21c
c211
c212
c213
c22a
c22b
c22c
c221
c222
c223
c23a
c23b
c23c
c231
c232
c233
c3aa
c3ab
c3ac
c3a1
c3a2
c3a3
c3ba
c3bb
c3bc
c3b1
c3b2
c3b3
c3ca
c3cb
c3cc
c3c1
c3c2
c3c3
c31a
c31b
c31c
c311
c312
c313
c32a
c32b
c32c
c321
c322
c323
c33a
c33b
c33c
c331
c332
c333
1aaa
1aab
1aac
1aa1
1aa2
1aa3
1aba
1abb
1abc
1ab1
1ab2
1ab3
1aca
1acb
1acc
1ac1
1ac2
1ac3
1a1a
1a1b
1a1c
1a11
1a12
1a13
1a2a
1a2b
1a2c
1a21
1a22
1a23
1a3a
1a3b
1a3c
1a31
1a32
1a33
1baa
1bab
1bac
1ba1
1ba2
1ba3
1bba
1bbb
1bbc
1bb1
1bb2
1bb3
1bca
1bcb
1bcc
1bc1
1bc2
1bc3
1b1a
1b1b
1b1c
1b11
1b12
1b13
1b2a
1b2b
1b2c
1b21
1b22
1b23
1b3a
1b3b
1b3c
1b31
1b32
1b33
1caa
1cab
1cac
1ca1
1ca2
1ca3
1cba
1cbb
1cbc
1cb1
1cb2
1cb3
1cca
1ccb
1ccc
1cc1
1cc2
1cc3
1c1a
1c1b
1c1c
1c11
1c12
1c13
1c2a
1c2b
1c2c
1c21
1c22
1c23
1c3a
1c3b
1c3c
1c31
1c32
1c33
11aa
11ab
11ac
11a1
11a2
11a3
11ba
11bb
11bc
11b1
11b2
11b3
11ca
11cb
11cc
11c1
11c2
11c3
111a
111b
111c
1111
1112
1113
112a
112b
112c
1121
1122
1123
113a
113b
113c
1131
1132
1133
12aa
12ab
12ac
12a1
12a2
12a3
12ba
12bb
12bc
12b1
12b2
12b3
12ca
12cb
12cc
12c1
12c2
12c3
121a
121b
121c
1211
1212
1213
122a
122b
122c
1221
1222
1223
123a
123b
123c
1231
1232
1233
13aa
13ab
13ac
13a1
13a2
13a3
13ba
13bb
13bc
13b1
13b2
13b3
13ca
13cb
13cc
13c1
13c2
13c3
131a
131b
131c
1311
1312
1313
132a
132b
132c
1321
1322
1323
133a
133b
133c
1331
1332
1333
2aaa
2aab
2aac
2aa1
2aa2
2aa3
2aba
2abb
2abc
2ab1
2ab2
2ab3
2aca
2acb
2acc
2ac1
2ac2
2ac3
2a1a
2a1b
2a1c
2a11
2a12
2a13
2a2a
2a2b
2a2c
2a21
2a22
2a23
2a3a
2a3b
2a3c
2a31
2a32
2a33
2baa
2bab
2bac
2ba1
2ba2
2ba3
2bba
2bbb
2bbc
2bb1
2bb2
2bb3
2bca
2bcb
2bcc
2bc1
2bc2
2bc3
2b1a
2b1b
2b1c
2b11
2b12
2b13
2b2a
2b2b
2b2c
2b21
2b22
2b23
2b3a
2b3b
2b3c
2b31
2b32
2b33
2caa
2cab
2cac
2ca1
2ca2
2ca3
2cba
2cbb
2cbc
2cb1
2cb2
2cb3
2cca
2ccb
2ccc
2cc1
2cc2
2cc3
2c1a
2c1b
2c1c
2c11
2c12
2c13
2c2a
2c2b
2c2c
2c21
2c22
2c23
2c3a
2c3b
2c3c
2c31
2c32
2c33
21aa
21ab
21ac
21a1
21a2
21a3
21ba
21bb
21bc
21b1
21b2
21b3
21ca
21cb
21cc
21c1
21c2
21c3
211a
211b
211c
2111
2112
2113
212a
212b
212c
2121
2122
2123
213a
213b
213c
2131
2132
2133
22aa
22ab
22ac
22a1
22a2
22a3
22ba
22bb
22bc
22b1
22b2
22b3
22ca
22cb
22cc
22c1
22c2
22c3
221a
221b
221c
2211
2212
2213
222a
222b
222c
2221
2222
2223
223a
223b
223c
2231
2232
2233
23aa
23ab
23ac
23a1
23a2
23a3
23ba
23bb
23bc
23b1
23b2
23b3
23ca
23cb
23cc
23c1
23c2
23c3
231a
231b
231c
2311
2312
2313
232a
232b
232c
2321
2322
2323
233a
233b
233c
2331
2332
2333
3aaa
3aab
3aac
3aa1
3aa2
3aa3
3aba
3abb
3abc
3ab1
3ab2
3ab3
3aca
3acb
3acc
3ac1
3ac2
3ac3
3a1a
3a1b
3a1c
3a11
3a12
3a13
3a2a
3a2b
3a2c
3a21
3a22
3a23
3a3a
3a3b
3a3c
3a31
3a32
3a33
3baa
3bab
3bac
3ba1
3ba2
3ba3
3bba
3bbb
3bbc
3bb1
3bb2
3bb3
3bca
3bcb
3bcc
3bc1
3bc2
3bc3
3b1a
3b1b
3b1c
3b11
3b12
3b13
3b2a
3b2b
3b2c
3b21
3b22
3b23
3b3a
3b3b
3b3c
3b31
3b32
3b33
3caa
3cab
3cac
3ca1
3ca2
3ca3
3cba
3cbb
3cbc
3cb1
3cb2
3cb3
3cca
3ccb
3ccc
3cc1
3cc2
3cc3
3c1a
3c1b
3c1c
3c11
3c12
3c13
3c2a
3c2b
3c2c
3c21
3c22
3c23
3c3a
3c3b
3c3c
3c31
3c32
3c33
31aa
31ab
31ac
31a1
31a2
31a3
31ba
31bb
31bc
31b1
31b2
31b3
31ca
31cb
31cc
31c1
31c2
31c3
311a
311b
311c
3111
3112
3113
312a
312b
312c
3121
3122
3123
313a
313b
313c
3131
3132
3133
32aa
32ab
32ac
32a1
32a2
32a3
32ba
32bb
32bc
32b1
32b2
32b3
32ca
32cb
32cc
32c1
32c2
32c3
321a
321b
321c
3211
3212
3213
322a
322b
322c
3221
3222
3223
323a
323b
323c
3231
3232
3233
33aa
33ab
33ac
33a1
33a2
33a3
33ba
33bb
33bc
33b1
33b2
33b3
33ca
33cb
33cc
33c1
33c2
33c3
331a
331b
331c
3311
3312
3313
332a
332b
332c
3321
3322
3323
333a
333b
333c
3331
3332
3333
>>> 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-03-29T09:13:47.187

它比算法更安静：）但它有效！我发现拥有序列迭代器很有用。

```
$characters = implode('', $letters_array); // string as character set
$seq = new Sequence($characters, $min_length, $max_length);
while (($s = $seq->fetch()) !== false) {
    echo $s . "\n";
} 
```

这是一个类：

```
<?php

class Sequence
{
    private $_set, $_min, $_max;
    private $_string;

    public function __construct($set, $min, $max)
    {
        $this->_set = $set;
        $this->_min = $min;
        $this->_max = $max;
        $this->_string = str_repeat($set{0}, $min);
    }

    public function fetch()
    {
        // get current value and calculate next one
        $result = $this->_string;
        // while current value is not "finish mark"
        if ($this->_string !== false) {
            $l = strlen($this->_string);
            // move from left to right and try to "increment" characters
            for ($p = 0; $p < $l; ++$p) {
                $c = $this->_string{$p};
                $i = strpos($this->_set, $c);
                if ($i < strlen($this->_set) - 1) {
                    $this->_string{$p} = $this->_set{++$i};
                    break;
                }
                // we've try all characters here, drop this and go to the next one
                $this->_string{$p} = $this->_set{0};
            }
            // if string is ended (cycle not breaked)
            if ($p == $l) {
                // $l is new string length. if it's too long, make "finish mark"
                if ($l > $this->_max)
                    $this->_string = false;
                else
                    $this->_string .= $this->_set{0};
            }
        }
        return $result;
    }
} 
```

结果是

```
a
b
c
1
2
3
aa
ba
...
23333
33333 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-03-25T17:17:19.817

这是一个简单的解决方案

**假设：**

```
$source = array(
        'a',
        'b',
        'c',
        '1',
        '2',
        '3'
); 
```

**示例 1**

```
$c = new FindCombination($source);
echo $c->find(4,true);  //returns all resul in json
echo count($c), PHP_EOL; //returns total 
```

**示例 2**

如果你想要它排序使用

```
echo $c->find(4,true); 
```

输出

```
[
    "1",
    "2",
    "3",
    "a",
    "b",
    "c",
    "12",
    "13",
    "1a",
    "1b",
    "1c",
    "21",
    "23",
    "2a",
    "2b",
    "2c",
    "31",
    "32",
    "3a",
    "3b",
    "3c",
    "a1",
    "a2",
    "a3",
    "ab",
    "ac",
    "b1",
    "b2",
    "b3",
    "ba",
    "bc",
    "c1",
    "c2",
    "c3",
    "ca",
    "cb",
    "123",
    "12a",
    "12b",
    "12c",
    "132",
    "13a",
    "13b",
    "13c",
    "1a2",
    "1a3",
    "1ab",
    "1ac",
    "1b2",
    "1b3",
    "1ba",
    "1bc",
    "1c2",
    "1c3",
    "1ca",
    "1cb",
    "213",
    "21a",
    "21b",
    "21c",
    "231",
    "23a",
    "23b",
    "23c",
    "2a1",
    "2a3",
    "2ab",
    "2ac",
    "2b1",
    "2b3",
    "2ba",
    "2bc",
    "2c1",
    "2c3",
    "2ca",
    "2cb",
    "312",
    "31a",
    "31b",
    "31c",
    "321",
    "32a",
    "32b",
    "32c",
    "3a1",
    "3a2",
    "3ab",
    "3ac",
    "3b1",
    "3b2",
    "3ba",
    "3bc",
    "3c1",
    "3c2",
    "3ca",
    "3cb",
    "a12",
    "a13",
    "a1b",
    "a1c",
    "a21",
    "a23",
    "a2b",
    "a2c",
    "a31",
    "a32",
    "a3b",
    "a3c",
    "ab1",
    "ab2",
    "ab3",
    "abc",
    "ac1",
    "ac2",
    "ac3",
    "acb",
    "b12",
    "b13",
    "b1a",
    "b1c",
    "b21",
    "b23",
    "b2a",
    "b2c",
    "b31",
    "b32",
    "b3a",
    "b3c",
    "ba1",
    "ba2",
    "ba3",
    "bac",
    "bc1",
    "bc2",
    "bc3",
    "bca",
    "c12",
    "c13",
    "c1a",
    "c1b",
    "c21",
    "c23",
    "c2a",
    "c2b",
    "c31",
    "c32",
    "c3a",
    "c3b",
    "ca1",
    "ca2",
    "ca3",
    "cab",
    "cb1",
    "cb2",
    "cb3",
    "cba",
    "123a",
    "123b",
    "123c",
    "12a3",
    "12ab",
    "12ac",
    "12b3",
    "12ba",
    "12bc",
    "12c3",
    "12ca",
    "12cb",
    "132a",
    "132b",
    "132c",
    "13a2",
    "13ab",
    "13ac",
    "13b2",
    "13ba",
    "13bc",
    "13c2",
    "13ca",
    "13cb",
    "1a23",
    "1a2b",
    "1a2c",
    "1a32",
    "1a3b",
    "1a3c",
    "1ab2",
    "1ab3",
    "1abc",
    "1ac2",
    "1ac3",
    "1acb",
    "1b23",
    "1b2a",
    "1b2c",
    "1b32",
    "1b3a",
    "1b3c",
    "1ba2",
    "1ba3",
    "1bac",
    "1bc2",
    "1bc3",
    "1bca",
    "1c23",
    "1c2a",
    "1c2b",
    "1c32",
    "1c3a",
    "1c3b",
    "1ca2",
    "1ca3",
    "1cab",
    "1cb2",
    "1cb3",
    "1cba",
    "213a",
    "213b",
    "213c",
    "21a3",
    "21ab",
    "21ac",
    "21b3",
    "21ba",
    "21bc",
    "21c3",
    "21ca",
    "21cb",
    "231a",
    "231b",
    "231c",
    "23a1",
    "23ab",
    "23ac",
    "23b1",
    "23ba",
    "23bc",
    "23c1",
    "23ca",
    "23cb",
    "2a13",
    "2a1b",
    "2a1c",
    "2a31",
    "2a3b",
    "2a3c",
    "2ab1",
    "2ab3",
    "2abc",
    "2ac1",
    "2ac3",
    "2acb",
    "2b13",
    "2b1a",
    "2b1c",
    "2b31",
    "2b3a",
    "2b3c",
    "2ba1",
    "2ba3",
    "2bac",
    "2bc1",
    "2bc3",
    "2bca",
    "2c13",
    "2c1a",
    "2c1b",
    "2c31",
    "2c3a",
    "2c3b",
    "2ca1",
    "2ca3",
    "2cab",
    "2cb1",
    "2cb3",
    "2cba",
    "312a",
    "312b",
    "312c",
    "31a2",
    "31ab",
    "31ac",
    "31b2",
    "31ba",
    "31bc",
    "31c2",
    "31ca",
    "31cb",
    "321a",
    "321b",
    "321c",
    "32a1",
    "32ab",
    "32ac",
    "32b1",
    "32ba",
    "32bc",
    "32c1",
    "32ca",
    "32cb",
    "3a12",
    "3a1b",
    "3a1c",
    "3a21",
    "3a2b",
    "3a2c",
    "3ab1",
    "3ab2",
    "3abc",
    "3ac1",
    "3ac2",
    "3acb",
    "3b12",
    "3b1a",
    "3b1c",
    "3b21",
    "3b2a",
    "3b2c",
    "3ba1",
    "3ba2",
    "3bac",
    "3bc1",
    "3bc2",
    "3bca",
    "3c12",
    "3c1a",
    "3c1b",
    "3c21",
    "3c2a",
    "3c2b",
    "3ca1",
    "3ca2",
    "3cab",
    "3cb1",
    "3cb2",
    "3cba",
    "a123",
    "a12b",
    "a12c",
    "a132",
    "a13b",
    "a13c",
    "a1b2",
    "a1b3",
    "a1bc",
    "a1c2",
    "a1c3",
    "a1cb",
    "a213",
    "a21b",
    "a21c",
    "a231",
    "a23b",
    "a23c",
    "a2b1",
    "a2b3",
    "a2bc",
    "a2c1",
    "a2c3",
    "a2cb",
    "a312",
    "a31b",
    "a31c",
    "a321",
    "a32b",
    "a32c",
    "a3b1",
    "a3b2",
    "a3bc",
    "a3c1",
    "a3c2",
    "a3cb",
    "ab12",
    "ab13",
    "ab1c",
    "ab21",
    "ab23",
    "ab2c",
    "ab31",
    "ab32",
    "ab3c",
    "abc1",
    "abc2",
    "abc3",
    "ac12",
    "ac13",
    "ac1b",
    "ac21",
    "ac23",
    "ac2b",
    "ac31",
    "ac32",
    "ac3b",
    "acb1",
    "acb2",
    "acb3",
    "b123",
    "b12a",
    "b12c",
    "b132",
    "b13a",
    "b13c",
    "b1a2",
    "b1a3",
    "b1ac",
    "b1c2",
    "b1c3",
    "b1ca",
    "b213",
    "b21a",
    "b21c",
    "b231",
    "b23a",
    "b23c",
    "b2a1",
    "b2a3",
    "b2ac",
    "b2c1",
    "b2c3",
    "b2ca",
    "b312",
    "b31a",
    "b31c",
    "b321",
    "b32a",
    "b32c",
    "b3a1",
    "b3a2",
    "b3ac",
    "b3c1",
    "b3c2",
    "b3ca",
    "ba12",
    "ba13",
    "ba1c",
    "ba21",
    "ba23",
    "ba2c",
    "ba31",
    "ba32",
    "ba3c",
    "bac1",
    "bac2",
    "bac3",
    "bc12",
    "bc13",
    "bc1a",
    "bc21",
    "bc23",
    "bc2a",
    "bc31",
    "bc32",
    "bc3a",
    "bca1",
    "bca2",
    "bca3",
    "c123",
    "c12a",
    "c12b",
    "c132",
    "c13a",
    "c13b",
    "c1a2",
    "c1a3",
    "c1ab",
    "c1b2",
    "c1b3",
    "c1ba",
    "c213",
    "c21a",
    "c21b",
    "c231",
    "c23a",
    "c23b",
    "c2a1",
    "c2a3",
    "c2ab",
    "c2b1",
    "c2b3",
    "c2ba",
    "c312",
    "c31a",
    "c31b",
    "c321",
    "c32a",
    "c32b",
    "c3a1",
    "c3a2",
    "c3ab",
    "c3b1",
    "c3b2",
    "c3ba",
    "ca12",
    "ca13",
    "ca1b",
    "ca21",
    "ca23",
    "ca2b",
    "ca31",
    "ca32",
    "ca3b",
    "cab1",
    "cab2",
    "cab3",
    "cb12",
    "cb13",
    "cb1a",
    "cb21",
    "cb23",
    "cb2a",
    "cb31",
    "cb32",
    "cb3a",
    "cba1",
    "cba2",
    "cba3"
] 
```

**示例 3**

您可以遍历结果

```
$c = new FindCombination($source);
foreach ( $c->find(4, true) as $v ) {
    echo $v . "|";
} 
```

**使用的类**

```
class FindCombination implements IteratorAggregate, JsonSerializable, Countable {
    private $source;
    private $sink = array();
    private $max = 0;

    function __construct(&$source) {
        $this->source = $source;
    }

    public function jsonSerialize() {
        return json_encode($this->sink, 128);
    }

    public function getIterator() {
        return new ArrayIterator($this->sink);
    }

    public function count() {
        return count($this->sink);
    }

    public function __toString() {
        return $this->jsonSerialize();
    }

    public function find($max = 0, $sort = false) {
        $this->sink = array(); // reset sink
        $this->max = $max;
        $this->parse($this->source);

        if ($sort) {
            usort($this->sink, function ($a, $b) {
                $al = strlen($a);
                $bl = strlen($b);
                return $al == $bl ? strcmp($a, $b) : strcmp($al, $bl);
            });
        }
        return $this;
    }

    private function parse($source, $tempString = "") {
        if ($tempString != "")
            $this->sink[] = $tempString;

        for($i = 0; $i < count($source); $i ++) {
            $copy = $source;
            $elem = array_splice($copy, $i, 1);
            $tempModified = $tempString . $elem[0];
            if (strlen($tempModified) > $this->max && $this->max > 0)
                continue;
            if (count($copy) > 0) {
                $this->parse($copy, $tempModified);
            } else {
                $this->sink[] = $tempModified;
            }
        }
    }
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-03-27T20:22:50.587

我建议你在 php 中找到 pythons itertools.product 功能的实现。（或者只是自己复制实现）。

以下代码获取指定长度的所有排列。您需要长度为 1、2、3、4。

最后一个问题是没有重复的字符，所以你可以添加“letters = set(letters)”来确保。

```
>>> letters = "abc123"
>>> length = 3
>>> from itertools import product
>>> dimensions = [letters]*length
>>> for point in product(*dimensions):
...     print "".join(point)
...
aaa
aab
aac
aa1
aa2
aa3
aba
abb
abc
ab1
ab2
ab3
aca
acb
acc
ac1
ac2
ac3
a1a
a1b
a1c
a11
a12
a13
a2a
a2b
a2c
a21
a22
a23
a3a
a3b
a3c
a31
a32
a33
baa
bab
bac
ba1
ba2
ba3
bba
bbb
bbc
bb1
bb2
bb3
bca
bcb
bcc
bc1
bc2
bc3
b1a
b1b
b1c
b11
b12
b13
b2a
b2b
b2c
b21
b22
b23
b3a
b3b
b3c
b31
b32
b33
caa
cab
cac
ca1
ca2
ca3
cba
cbb
cbc
cb1
cb2
cb3
cca
ccb
ccc
cc1
cc2
cc3
c1a
c1b
c1c
c11
c12
c13
c2a
c2b
c2c
c21
c22
c23
c3a
c3b
c3c
c31
c32
c33
1aa
1ab
1ac
1a1
1a2
1a3
1ba
1bb
1bc
1b1
1b2
1b3
1ca
1cb
1cc
1c1
1c2
1c3
11a
11b
11c
111
112
113
12a
12b
12c
121
122
123
13a
13b
13c
131
132
133
2aa
2ab
2ac
2a1
2a2
2a3
2ba
2bb
2bc
2b1
2b2
2b3
2ca
2cb
2cc
2c1
2c2
2c3
21a
21b
21c
211
212
213
22a
22b
22c
221
222
223
23a
23b
23c
231
232
233
3aa
3ab
3ac
3a1
3a2
3a3
3ba
3bb
3bc
3b1
3b2
3b3
3ca
3cb
3cc
3c1
3c2
3c3
31a
31b
31c
311
312
313
32a
32b
32c
321
322
323
33a
33b
33c
331
332
333 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-09-07T14:16:55.260

> 从数组中获取所有可能的字符串组合到一定长度的算法。

该算法基于查找索引的[Power 集](https://en.wikipedia.org/wiki/Power_set)，而这又基于查找具有大小的索引的所有[组合](https://en.wikipedia.org/wiki/Combination)（不重复）：`1, 2,..., n`。

由于我在您的偏好语言中的技能*“趋于零”*，这里有一个可以用作基准的 C# 实现：

```
using System;

namespace Combinatorics
{
  class StringPowerSet
  {
    static string[] set = { "a", "b", "c" };
    static int[] subSetIndexes;
    //-------------------------------------------------------------

    static void Main(string[] args)
    {
        PrintSet(set, "Initial set");
        FindPowerSet(set.Length);
    }
    //-------------------------------------------------------------

    private static void FindPowerSet(int n)
    {
        // Super set - all sets with size: 0, 1, ..., n - 1
        for (int k = 0; k <= n - 1; k++)
        {
            subSetIndexes = new int[k];
            CombinationsNoRepetition(k, 0, n - 1);
        }
    }
    //-------------------------------------------------------------

    private static void CombinationsNoRepetition(int k, int iBegin, int iEnd)
    {
        if (k == 0)
        {
            PrintSubSet();
            return;
        }

        for (int i = iBegin; i <= iEnd; i++)
        {
            subSetIndexes[k - 1] = i;
            ++iBegin;
            CombinationsNoRepetition(k - 1, iBegin, iEnd);
        }
    }
  }
} 
```

以下是辅助打印功能：

```
//-------------------------------------------------------------

    private static void PrintSubSet()
    {
        Console.Write("(");
        for (int i = subSetIndexes.Length - 1; i >= 0; i--)
        {
            Console.Write(set[subSetIndexes[i]]);

            if (i > 0)
            {
                Console.Write(" ,");
            }
        }
        Console.WriteLine(")");
    }
    //-------------------------------------------------------------

    private static void PrintSet(string[] arr, string label = "")
    {
        Console.WriteLine(label);

        Console.Write("(");
        for (int i = 0; i < arr.Length; i++)
        {
            Console.Write(arr[i]);

            if (i < arr.Length - 1)
            {
                Console.Write(" ,");
            }
        }
        Console.WriteLine(")");
    } 
```

输入：

```
{a, b, c} 
```

输出：

```
() (a) (b) (c) (a, b) (a, c) (b, c) 
```

变量`k`和`n`函数调用`CombinationsNoRepetition`决定了第一组和最后一组的长度，即有你的*min*和*max*。

* * *

# php - （取消）使用单独的框激活复选框列表

> ID：12293876
> 
> 赞同：-2
> 
> 时间：2012-09-06T06:05:56.390
> 
> 标签：php, javascript, checkbox, multi-select

我想创建一系列可以使用另一个复选框同时（取消）激活的复选框。当我激活“全选”复选框时，所有框都被选中。但是，如果我取消选择“全选”框，则所有框都保持选中状态。

有人可以检查这里有什么问题吗？

Javascript：

```
<script type="text/javascript">
$(function() {
    $("#Client").multiSelect({ oneOrMoreSelected: '*' });
)};
</script> 
```

HTML / PHP：

```
<div class="float-left gutter-right" style="margin-top:15px">
    <span class="label">Select Clinet</span>
    <select id="Client" name="Client[]" multiple="multiple" size="5">
        <?php
            foreach ($this->Clients as $Client) {
                echo "<option value='".$Client->Guid."'>"
                    . $Client->FirstName . " " 
                    . $Client->LastName."</option>";
            }
        ?>
    </select>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T06:28:22.653

您可以尝试`attr('checked')`用`is(':checked')`in替换`jquery.multiSelect.js`

这个解决方案似乎对某些人有用。

# spring - 不明白为什么我使用 jsp 没有出现异常，但使用速度却得到了它？

> ID：12293879
> 
> 赞同：0
> 
> 时间：2012-09-06T06:06:04.997
> 
> 标签：spring, view, velocity

我有一个spring mvc项目。对于视图，我首先使用了jsp，它工作正常，但后来我想使用velocity并得到异常。除了语法之外，两个视图都相似。我不明白为什么会这样。那是我的jsp：

```
<form:form action="updateDepartament" modelAttribute="editDepartament" method="POST">            
         <table>            
            <tr>
                <td>Id:</td>
                <td><form:input path="departamentId" readonly="true"/></td>
            </tr>
            <tr>
                <td><spring:message code="label.title"/></td>
                <td><form:input path="title"/></td>
                <td><form:errors path="title"/></td>
            </tr>
         </table>

         <input type="submit" value="submit">               
 <c:if test="${! empty editDepartament.depart_Employeers}">                        
                    <table>                            
                        <th>Id</th>                            
                        <th><spring:message code="label.firstName"/></th>
                        <th><spring:message code="label.lastName"/></th>
                        <th><spring:message code="label.salary"/></th>
                        <th><spring:message code="label.birthdate"/></th>
                        <th><spring:message code="label.active"/></th>                          
                        <tr>
                            <c:forEach var="empl" items="${editDepartament.depart_Employeers}" varStatus="status">
                                <tr>
                                <td><form:input path="depart_Employeers[${status.index}].id" readonly="true"/></td>
                                <td><form:input path="depart_Employeers[${status.index}].firstName" readonly="true"/></td>
                                <td><form:input path="depart_Employeers[${status.index}].lastName" readonly="true"/></td>
                                <td><form:input path="depart_Employeers[${status.index}].salary" readonly="true"/></td>
                                <td><form:input path="depart_Employeers[${status.index}].birthday" readonly="true"/></td>
                                <td><form:input path="depart_Employeers[${status.index}].active" readonly="true"/></td>
                                <td><a href="deleteEmployee/${empl.id}"><spring:message code="label.delete"/></a></td>
                                </tr>
                            </c:forEach>
                        </tr>
                    </table>
                </c:if>
        </form:form> 
```

这是我的速度模板：

```
<form action="updateDepartament"  method="POST">
        #springBind("editDepartament")
         <table>            
            <tr>
                <td>Id:</td>
                <td>#springFormInput("editDepartament.departamentId" 'readonly="true"')</td>
            </tr>
            <tr>
                <td><spring:message code="label.title"/></td>
                <td>#springFormInput("editDepartament.title" "")</td>
                <td>#springShowErrors("" "")</td>
            </tr>
         </table>            
         <input type="submit" value="submit">                    
                #if(!$editDepartament.depart_Employeers.isEmpty())
                     <table>
                        <th>Id</th>                            
                        <th>#springMessage("label.firstName")</th>
                        <th>#springMessage("label.lastName")</th>
                        <th>#springMessage("label.salary")</th>
                        <th>#springMessage("label.birthdate")</th>
                        <th>#springMessage("label.active")</th>                          
                        <tr>
                            #foreach($empl in $editDepartament.depart_Employeers)
                                <tr>
                                <td>#springFormInput("editDepartament.depart_Employeers[$velocityCount].id"             'readonly="true"')</td>
                                <td>#springFormInput("editDepartament.depart_Employeers[$velocityCount].firstName"      'readonly="true"') </td>
                                <td>#springFormInput("editDepartament.depart_Employeers[$velocityCount].lastName"       'readonly="true"')</td>
                                <td>#springFormInput("editDepartament.depart_Employeers[$velocityCount].salary"         'readonly="true"')</td>
                                <td>#springFormInput("editDepartament.depart_Employeers[$velocityCount].birthday"       'readonly="true"')</td>
                                <td>#springFormInput("editDepartament.depart_Employeers[$velocityCount].active"         'readonly="true"')</td>
                                <td><a href="deleteEmployee/${empl.id}">#springMessage("label.delete")</a></td>
                                </tr>
                            #end
                        </tr>
                    </table>
               #end
        </form> 
```

更改标题后出现异常：

```
HTTP Status 500 - 

--------------------------------------------------------------------------------

type Exception report

message 

description The server encountered an internal error () that prevented it from fulfilling this request.

exception 

org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.dao.InvalidDataAccessApiUsageException: object references an unsaved transient instance - save the transient instance before flushing: com.mycompany.employeers.domain.Employee; nested exception is org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: com.mycompany.employeers.domain.Employee
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:681)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:585)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:369)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:119)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:168)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)

root cause 

org.springframework.dao.InvalidDataAccessApiUsageException: object references an unsaved transient instance - save the transient instance before flushing: com.mycompany.employeers.domain.Employee; nested exception is org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: com.mycompany.employeers.domain.Employee
    org.springframework.orm.hibernate3.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:654)
    org.springframework.orm.hibernate3.HibernateTransactionManager.convertHibernateAccessException(HibernateTransactionManager.java:793)
    org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:664)
    org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754)
    org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)
    org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:393)
    org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:120)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    $Proxy723.editDepartament(Unknown Source)
    com.mycompany.employeers.web.EmployeesController.updateDepartament(EmployeesController.java:204)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:601)
    org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:669)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:585)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:369)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:119)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:168)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)

root cause 

org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: com.mycompany.employeers.domain.Employee
    org.hibernate.engine.ForeignKeys.getEntityIdentifierIfNotUnsaved(ForeignKeys.java:219)
    org.hibernate.type.EntityType.getIdentifier(EntityType.java:397)
    org.hibernate.type.ManyToOneType.nullSafeSet(ManyToOneType.java:78)
    org.hibernate.persister.collection.AbstractCollectionPersister.writeElement(AbstractCollectionPersister.java:755)
    org.hibernate.persister.collection.AbstractCollectionPersister.recreate(AbstractCollectionPersister.java:1143)
    org.hibernate.action.CollectionRecreateAction.execute(CollectionRecreateAction.java:39)
    org.hibernate.engine.ActionQueue.execute(ActionQueue.java:279)
    org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:263)
    org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:171)
    org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:298)
    org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27)
    org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1000)
    org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:338)
    org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:106)
    org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:656)
    org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754)
    org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)
    org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:393)
    org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:120)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    $Proxy723.editDepartament(Unknown Source)
    com.mycompany.employeers.web.EmployeesController.updateDepartament(EmployeesController.java:204)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:601)
    org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:669)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:585)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:369)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:119)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:168)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) 
```

并负责控制器的这个视图部分：

```
@RequestMapping(value="/updateDepartament", method= RequestMethod.POST)
    public String updateDepartament(@ModelAttribute("editDepartament")Departament dep, BindingResult result){
        departamentValidator.validate(dep, result);
        if(result.hasErrors()){
            return "editDepartament";
        }
        service.editDepartament(dep);
        return "redirect:/listDepartaments";
    } 
```

也许有人知道如何解决这个问题并可以向我解释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T07:00:26.603

仔细查看异常，然后您会发现异常在渲染时并未发生，而是在 `service.editDepartament(dep);`您的`EmployeesController.updateDepartament`方法中调用。

```
....
com.mycompany.employeers.web.EmployeesController.updateDepartament(EmployeesController.java:204)
.... 
```

对我来说，看起来被引用的实体之一`Departament dep`与您的 Hibernate Entity Manager 分离。-*但是我不能从你发布的有限数量的代码中给你更多细节。*

所以让我们总结一下：问题出在请求处理的某个地方（与休眠有关），但我强烈怀疑它与视图有关（除了有一些过滤器（如视图中的打开实体管理器）仅针对请求触发渲染 jsps 但不渲染速度模板）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:25:30.713

我找到了解决方案。我没有添加到我的实体Departament cascadeType.All：

```
@OneToMany(fetch= FetchType.EAGER,cascade= CascadeType.ALL)
    @JoinColumn(name="DEPARTAMENTID")    
    private List<Employee> depart_Employeers; 
```

现在它可以工作了，但我有点困惑..为什么应用程序可以使用 jsp 而没有定义 cascadeType？

# visual-studio-2008 - 报告查看器收到 401 Unauthorized

> ID：12293880
> 
> 赞同：1
> 
> 时间：2012-09-06T06:06:09.513
> 
> 标签：visual-studio-2008, iis-7, ssrs-2008, user-permissions, reportviewer2008

简而言之，问题是当我尝试查看嵌入在报告查看器中的报告时，我收到以下堆栈跟踪的 401 Unauthorized 错误。

```
 at Microsoft.SqlServer.ReportingServices2005.Execution.RSExecutionConnection.GetSecureMethods()
   at Microsoft.SqlServer.ReportingServices2005.Execution.RSExecutionConnection.IsSecureMethod(String methodname)
   at Microsoft.SqlServer.ReportingServices2005.Execution.RSExecutionConnection.LoadReport(String Report, String HistoryID)
   at Microsoft.Reporting.WebForms.ServerReport.GetExecutionInfo()
   at Microsoft.Reporting.WebForms.ServerReport.SetParameters(IEnumerable`1 parameters)
   at ReportingObject.RenderReport(ReportViewer reportViewer, ReportParameter[] param) in C:\Projects\RBDCReportMapIntelligence\RBDCReportMapIntelligence\ReportingObject.cs:line 41
   at Report.btnViewReport_Click(Object sender, EventArgs e) in c:\Projects\RBDCReportMapIntelligence\RBDCReportMapIntelligence\Report.aspx.cs:line 126
   at System.Web.UI.WebControls.Button.OnClick(EventArgs e)
   at System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument)
   at System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument)
   at System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument)
   at System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData)
   at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 
```

以下是更多详细信息：

1.  我的机器（运行 Windows Vista）同时运行 IIS 和报告服务。
2.  我是我机器上的本地管理员，但不是系统管理员。
3.  根据[这篇](http://www.gotknowhow.com/articles/reportserver-permissions-granted-are-insufficient-for-performing-this-operation-rsaccessdenied)文章，我已经配置了报告服务以授予自己访问权限（这似乎是一个非常常见的解决方案）。但即使这样做了，如果不以管理员身份运行 IE，我也看不到报告管理器。
4.  IIS 只为所有站点启用了 DefaultAppPool 的匿名身份验证，我不确定应该和不应该启用什么。DefaultAppPool 是集成托管管道模式，其中 NetworkService 设置为标识。
5.  我不确定 VS 上是否有需要更改的设置。
6.  我有一个实现 IReportServerCredentials 接口的类（根据网上的很多示例），用于连接到报表服务器

我也尝试在网上和 stackoverflow 上查看，并且从这些解决方案中尝试了很多东西，但似乎没有任何帮助。

如果有人可以提供帮助，那就太好了。如果我需要在问题中添加更多细节，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T00:42:50.960

我得到了这个工作：

1.  关闭 UAC，现在我可以查看报表管理器，而无需以管理员身份运行 IE
2.  创建了一个在网络服务下运行的新应用程序池，并在该应用程序池下运行应用程序
3.  在网络服务帐户下运行 Reporting Services。

希望它可以帮助别人。

# javascript - 更改 iframe src

> ID：12293882
> 
> 赞同：1
> 
> 时间：2012-09-06T06:06:12.377
> 
> 标签：javascript, jquery

例如，我在 index.html 中有一些链接：

```
<a href="message.html">Go to message page</a> 
```

在另一页 iframe.html 我有一个 iframe：

```
<iframe id="iframe" src="profile.html" frameborder="0" scrolling="no"></iframe> 
```

是否可以这样做，当我单击“转到消息页面”链接时，它会将我重定向到 iframe.html 并将 iframe src 更改为 message.html？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T06:42:47.620

**一个简单的解决方案：**

您的链接`index.html`应如下所示：

```
<a href="iframe.html?message.html">Go to message page</a> 
```

在`iframe.html`做这样的事情：

```
$(function () {
    var url = window.location.href;
    var QueryStr = url.split('?')[1];    
    $('#iframe').attr('src', QueryStr);
}); 
```

希望这将是你的答案。谢谢！

[**看演示**](http://jsfiddle.net/akhurshid/n7wNj/)

**见页面：**

*   个人资料页面：http: [//jsfiddle.net/akhurshid/8NfMy/](http://jsfiddle.net/akhurshid/8NfMy/)
*   消息页面：http: [//jsfiddle.net/akhurshid/V3Qjp/](http://jsfiddle.net/akhurshid/V3Qjp/)
*   iframe 页面：http: [//jsfiddle.net/akhurshid/YdXKK/](http://jsfiddle.net/akhurshid/YdXKK/)
*   主（索引）页面：http: [//jsfiddle.net/akhurshid/n7wNj/](http://jsfiddle.net/akhurshid/n7wNj/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T06:18:14.320

像这样在查询字符串中发送您的目标页面

```
 $('a[href="message.html"]').click(function (e) {
        e.preventDefault()
        window.location = 'iframe.html?src="message.html"';
  }) 
```

在 iframe.html 上执行此操作

```
$(function () {
    $('#iframe').attr('src', getParameterByName('src'));
});

function getParameterByName(name)
{
  name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
  var regexS = "[\\?&]" + name + "=([^&#]*)";
  var regex = new RegExp(regexS);
  var results = regex.exec(window.location.search);
  if(results == null)
    return "";
  else
    return decodeURIComponent(results[1].replace(/\+/g, " "));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T06:12:57.467

假设你有一个 id = iframeid 的 iframe，那么

```
document.getElementById("iframeid").src = "new/address/here"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T06:24:02.473

如果您真的想在客户端进行重定向..

在你的`message.html`文件中，把这个：

```
<script type="text/javascript">
 window.location = "iframe.html"
</script> 
```

然后添加您的`iframe.html`：

```
document.getElementById("iframe").src = "message.html"; 
```

没有测试过，但是你说的步骤可能会导致重定向无限循环。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T07:35:19.680

你可以像这样改变你的链接标签

```
<a href="iframe.html?ifsrc=message.html">Go to message page</a> 
```

并在 iframe.html 页面 onload functin 中编写此脚本

```
//---------------- within head tag----------of iframe.html--------
    function GET() {
       var data = [];
        for(x = 0; x < arguments.length; ++x)
                data.push(location.href.match(new RegExp("/\?".concat(arguments[x],"=","([^\n&]*)")))[1])
                return data;
        }

        //--- on iframe.html onload function
    function iframeOnload(){

    document.getElementById("iframe").src =  GET("id")[0];

    }

//---------------- within head tag----------of iframe.html-------- 
```

# c# - 如何在不模拟但使用数据库的情况下对项目进行单元测试？

> ID：12293883
> 
> 赞同：2
> 
> 时间：2012-09-06T06:06:14.600
> 
> 标签：c#, database, asp.net-mvc-3, unit-testing, mocking

我们使用 razor view、c#、MVC3、.net 4.0 开发了一个应用程序。我们想在没有模拟的情况下对控制器进行单元测试。我们的要求是：需要调用并执行Repository方法，并使用数据库进行测试。请提供一些解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T06:35:08.200

单元测试往往不使用数据库或远程服务器连接等外部资源。这就是为什么要模拟。

我相信有时让测试访问这些资源可能很有用。（但我们称它们为...验收测试？或集成测试——只是为了在这些测试和经典单元测试之间有所不同）。

看一下[MBUnit](http://www.mbunit.com/)测试框架（非常类似于 nUnit），它可以让您轻松完成它，它允许自动回滚对数据库的所有更改（因此您最终不会将数据库恢复到它的每次要运行测试时都处于“干净”状态）。看看这篇详细描述它的博客文章：http: [//blog.benhall.me.uk/2008/01/mbunit-24-rollback-rollback2-and.html](http://blog.benhall.me.uk/2008/01/mbunit-24-rollback-rollback2-and.html)

其他方法是拥有一个特殊的数据库并生成数据 - 即每次运行一堆测试时生成新的用户 ID 名称等。请注意，在这种方法中，可能会不时需要清理数据库（在某些值上发生冲突，例如名称，也可能无法使用已经填充了一些数据的 db 来测试某些场景）。

这两种方法都假设 db 模式不会改变。如果数据库架构发生变化 - 无论如何它都会涉及一些工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T07:41:31.870

您的方法称为集成测试而不是单元测试。

这取决于每个应用程序，但我用于集成测试的方法是：

1.  使用脚本删除/创建新的测试数据库和架构（在每次测试运行之前发生）

2.  运行一些脚本，将正确的数据放入数据库中以进行特定测试

3.  运行测试

4.  删除测试数据库（在每次测试运行后发生）

这可确保数据始终与测试保持一致，并强制您保持数据库脚本为最新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T07:38:45.157

看不出这个问题的意义，

1）那是您正在谈论的集成测试，而不是单元测试。

2）运行“Visual Studio单元测试框架”时，你总是可以编写一个TestMethod来使用实际的存储库而不是模拟东西，模拟只是用模拟替换存储库，你总是可以使用真实的。您只需要在测试项目应用程序配置本身等中配置您的数据库连接字符串...实际上取决于它的架构方式。

3）我注意到你没有提到任何关于 IOC/DI 的事情，所以我假设你没有使用任何东西，因此这个问题。使用 IOC/DI，您始终可以替换您在测试时使用的实际实例，无论是模拟的还是真实的，并从单个入口/代码点轻松替换您的对象。真的，您的测试项目可以设置您需要的所有依赖项。

4) 我认为 MVC 带有 IDependencyResolver，所以有搜索吗？

5）IOC容器只是让测试更容易，是我的两分钱，否则手动方式。

干杯

# android - 如何使用完成发回数据？

> ID：12293884
> 
> 赞同：25
> 
> 时间：2012-09-06T06:06:26.497
> 
> 标签：android, android-intent

就像我可以使用这个将数据从一个活动发送到另一个活动：

```
intent.putExtra("Name", Value); 
```

当我`finish()`用来返回上一个活动时，我如何发送数据。

在我的应用程序中，`Activity_A`我要去`Activity_B`。在`Activity_B`我在地图上标记一个位置，这给了我纬度和经度。然后我想用这个 lat 和 lng in `Activity_A`。但我不想重新`Activity_A`使用意图，因为我不想重新创建，`Activity_A`因为一些已经填充的数据将会丢失。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-06T06:13:42.167

当您使用`intent.putExtra("Name", Value);`时，在完成活动的同时也使用相同的东西。

例如：

从活动A，您调用活动B，例如：

```
intent.putExtra("Name", Value);
now instead of startActivity() use `startActivityForResult()` 
```

并从活动B，在完成活动时，调用：

```
setResult(RESULT_OK); 
```

现在在activityA中，你`onActivityResult`会被调用，就像：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
} 
```

因此，您可以通过这种方式处理它。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-09-06T06:19:09.583

在活动 A 中：

```
// Add more, if you call different activities from Activity A
private static final REQUEST_GET_MAP_LOCATION = 0;

void doSomething() {
    ...
    startActivityForResult(theIntentYouUseToStartActivityB, REQUEST_GET_MAP_LOCATION);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == REQUEST_GET_MAP_LOCATION && resultCode == Activity.RESULT_OK) {
        int latitude = data.getIntExtra("latitude", 0);
        int longitude = data.getIntExtra("longitude", 0);
        // do something with B's return values
    }
} 
```

在活动 B 中：

```
...
setResult(Activity.RESULT_OK, 
    new Intent().putExtra("latitude", latitude).putExtra("longitude", longitude));
finish();
... 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-07-07T16:20:43.337

用, 从你`Activity_B`的:`startActivityForResult()``Activity_A`

```
 //Starting a new Intent
 Intent nextScreen = new Intent(getApplicationContext(), Activity_B.class);
 // starting new activity
 startActivityForResult(nextScreen,1000); 
```

完成工作后`Activity_B`，调用`setResult()`设置数据，然后`finish()`像这样

```
 //Starting the previous Intent
 Intent previousScreen = new Intent(getApplicationContext(), Activity_A.class);
 //Sending the data to Activity_A 
 previousScreen.putExtra("Bla"," Blabla"); 
 setResult(1000, previousScreen);
 finish(); 
```

这将使您回到以前的`Activity_A`.

在`Activity_A`，覆盖`onActivityResult()`。

```
 @Override  
  protected void onActivityResult(int requestCode, int resultCode, Intent data)     
  {
     super.onActivityResult(requestCode, resultCode, data);
     String bla = data.getStringExtra("Bla");       
  } 
```

[在这里](https://stackoverflow.com/a/15641238/2160507)找到

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T06:10:19.300

用于在 B 和 B之前`startActivityForResult`启动 B 并在A 中处理`setResult``finish``onAcitivityResult`

# cakephp - 在 CakePHP 文件夹结构中的哪里放置 webcron 文件？

> ID：12293885
> 
> 赞同：0
> 
> 时间：2012-09-06T06:06:32.943
> 
> 标签：cakephp, cron

我有一个 PHP 脚本，它将由 cron 守护程序通过 Web 服务器间接运行。我对在 CakePHP 文件夹结构中放置这个文件的位置感到困惑。

我应该将它放在任何控制器中并从外部访问它吗？（即没有登录检查）

还是将此脚本放在我的蛋糕项目文件夹之外并将其放在本地主机中的任何位置更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T08:09:58.323

如果脚本不使用 CakePHP 的优点（纯 PHP），只需将其放在公众无法访问的目录中，例如与“App”处于同一级别的“Cron”。

如果它确实使用 CakePHP，请将它作为一个动作放在适当的控制器中。您可以为操作添加自定义前缀，例如“cron”，然后覆盖 AppController，如果前缀为“cron”，请检查 IP 地址。如果不是本地主机，则拒绝访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:10:01.253

如果它是一个独立于 CakePHP 的文件，并且您需要从公共 Internet 访问它，请将它放在该`webroot`文件夹中。

# sql - postgresql计算孩子的数量

> ID：12293888
> 
> 赞同：2
> 
> 时间：2012-09-06T06:06:57.150
> 
> 标签：sql, postgresql, tree, count, children

树的深度是无限的。例子：

```
+----+-------+--------------------+
| id | name  | parent_id |  value |
+----+-------+--------------------+
|  1 | test1 |           |    0   |
|  2 | test2 |     1     |    0   |
|  3 | test3 |     2     |    5   |
|  4 | test4 |     1     |    0   |
|  5 | test5 |     4     |    5   |
|  6 | test6 |     4     |    0   |
|  7 | test7 |     6     |    10  |
+----+-------+--------------------+ 
```

我想得到一个孩子的总价值。像这样：

```
+----+-------+--------------------+
| id | name  | parent_id |  value |
+----+-------+--------------------+
|  1 | test1 |           |    20  |  =  test2.value + test4.value
|  2 | test2 |     1     |    5   |  =  test3.value
|  3 | test3 |     2     |    5   |  
|  4 | test4 |     1     |    15  |  =  test5.value + test6.value
|  5 | test5 |     4     |    5   |
|  6 | test6 |     4     |    10  |  =  test7.value
|  7 | test7 |     6     |    10  |
+----+-------+--------------------+ 
```

有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-06T07:47:15.703

这是一个递归查询，希望能解决您的问题：

```
WITH RECURSIVE tree (id, parent_id, cnt) AS (
    -- start from bottom-level entries
    SELECT id, parent_id, 0::bigint AS cnt
    FROM tbl t
    WHERE NOT EXISTS (
        SELECT id
        FROM tbl
        WHERE parent_id = t.id
    )

    UNION ALL

    -- join the next level, add the number of children to that of already counted ones
    SELECT t.id, t.parent_id, tree.cnt + (
            SELECT count(id) 
            FROM tbl 
            WHERE parent_id = t.id
        )
    FROM tbl t JOIN tree ON t.id = tree.parent_id
)
SELECT tree.id, max(tree.cnt) AS number_of_children
FROM tree 
-- use the JOIN if you need additional columns from tbl
-- JOIN tbl ON tree.id = tbl.id 
-- use the WHERE clause if you want to see root nodes only
-- WHERE parent_id IS NULL
GROUP BY tree.id
ORDER BY tree.id
; 
```

我也做了一个[SQLFiddle](http://sqlfiddle.com/#!1/00a62/1)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-17T11:43:15.043

见 F.35.1.5。这里的connectby函数示例：

[http://www.postgresql.org/docs/current/static/tablefunc.html](http://www.postgresql.org/docs/current/static/tablefunc.html)

# google-analytics - 如何使用内容实验在谷歌分析上设置跨域跟踪

> ID：12293892
> 
> 赞同：1
> 
> 时间：2012-09-06T06:07:14.317
> 
> 标签：google-analytics, google-experiments

请帮忙。我整天都在做这件事。这是交易...

我有 2 个域。

domain1.com 和 domain2.com

我想在这些域的谷歌分析上设置跨域跟踪。

我在 domain2.com 上也有一个 A/B 内容实验设置

我已经阅读了这两页。

[http://support.google.com/analytics/bin/answer.py?hl=en&answer=2658141](http://support.google.com/analytics/bin/answer.py?hl=en&answer=2658141) [https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite#yourDomainName](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite#yourDomainName)

据我了解，我需要将以下内容放入 domain1.com 的谷歌分析代码中

```
_gaq.push(['_setDomainName', 'domain1.com']); 
```

这需要进入 domain2.com 的谷歌分析代码

```
_gaq.push(['_setDomainName', 'domain2.com']); 
```

我还需要把它放在我的实验控制脚本前面......

```
<script>
_udn = "domain2.com";
</script> 
```

从 domain1.com 链接到 domain2.com 时，我也必须使用此代码

```
<a href="domain2.com/experiment/location" onclick="_gaq.push(['_link', 'domain2.com/experiment/location']); return false;">Link to domain2</a> 
```

这是问题所在...在 1 种情况下，cookie 没有在 2 个域之间传递。在另一种情况下，它在 2 个域**之间**传递

场景 1（不起作用）

1.  导航到 domain1.com
2.  单击指向 domain2.com/experiment/location 的链接（这是控制脚本所在的位置）

场景 2（有效）

1.  导航到 domain1.com
2.  单击指向 domain2.com/some/other/page 的链接
3.  单击指向 domain2.com/experiment/location 的链接（这是控制脚本所在的位置）

在访问实验之前以某种方式访问​​ domain2.com 上的另一个页面允许传递 cookie 信息。

有任何想法吗？我难住了。

# wpf - 为我的媒体播放器使用 m3u 播放列表。

> ID：12293909
> 
> 赞同：1
> 
> 时间：2012-09-06T06:08:52.967
> 
> 标签：wpf, media, playlist, m3u

我正在从头开始制作媒体播放器的 WPF 应用程序。我添加了一个列表框，我可以在其中从一首歌曲切换到下一首歌曲。我想将此列表保存为 m3u 播放列表，并且我也希望能够读取 m3u 文件。我正在使用媒体元素。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:26:45.667

m3u 列表中的每一行代表一个 mp3 文件

```
var mru = yourFileList.OfType<YourFileListType>().Select(f => f.TheFileName);
// .Net 4.0
File.WriteAllLines("YourM3uFile.m3u", mru);
// .Net 3.5
File.WriteAllLines("YourM3uFile.m3u", mru.ToArray()); 
```

希望有帮助

# codeigniter - CodeIgniter 中的文件路径

> ID：12293910
> 
> 赞同：1
> 
> 时间：2012-09-06T06:08:56.143
> 
> 标签：codeigniter, path, directory, root

我很难在我的一个 CI 视图中链接到视频文件。

Videos 文件夹位于 CodeIgniter 根目录中。当我如下链接视频文件名时，一切正常。

```
<source type="video/mp4" src="/videos/<?= $video->filename ?>" /> 
```

但我需要能够链接 CI 根文件夹之外的文件，例如 C 盘上的其他位置，如 C:/videos。无法弄清楚如何做到这一点。提前致谢。

**编辑：**

我会更具体一点。

我的 codeigniter 应用程序将放置在 WEB 目录中的服务器上：

```
/something1/something2/web/ 
```

现在 Video Files 文件夹将被放置在与 WEB 文件夹相同的级别：

```
/something1/something2/videos/ 
```

我想链接视频文件夹中的视频，该文件夹与 WEB（CI 根）文件夹处于同一级别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:09:48.473

如果您的视频文件夹在 CI 安装之外，您可以将视频目录设置为以下配置项`/config/config.php`：

```
$config['video_dir'] = 'http://example.com/videos'; 
```

然后，您可以像这样在控制器中检索它：

```
$data['video_dir'] = $this->config->item('video_dir'); 
```

（或者你可以在 CI 目录中有一个视频文件夹......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T06:10:49.370

试试看

`<source type="video/mp4" src="<?php echo base_url(); ?>videos/<?= $video->filename ?>" />`

# android - 如何跟踪 GCM 问题？

> ID：12293911
> 
> 赞同：0
> 
> 时间：2012-09-06T06:08:55.827
> 
> 标签：android, google-cloud-messaging

我有一个问题，我只是没有收到任何 GCM 消息。我不希望弹出窗口或声音播放，它甚至不触发广播接收器中的*onReceive()*方法，据我了解，这是应用程序处理消息的第一点。

我最大的问题是我没有收到任何错误消息或提示。当我发送消息时，我会得到消息 ID、多播 ID 和“success=1”消息。我还得到一个“在任何设备上注册的设备和一个注册 ID，一个“已经注册”的第二次运行该应用程序。设备也登录到 Google Play，与 Google API 控制台上的帐户相同。但没有任何反应我发送 GCM 消息时的设备。

我发布了我完整的 android 清单，如果您需要更多代码，请告诉我。这让我发疯了。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.lottoapplicationandroid"
android:versionCode="1"
android:versionName="1.0"
android:installLocation="auto"
 >

<uses-sdk
    android:minSdkVersion="9"
    android:targetSdkVersion="9" />

<supports-screens 
android:largeScreens="true" 
android:normalScreens="true" 
android:smallScreens="true" 
android:resizeable="true" 
android:anyDensity="true" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.BROADCAST_STICKY" />
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.FLASHLIGHT" />
<permission android:name="com.lottoapplicationandroid.permission.C2D_MESSAGE"     android:protectionLevel="signature" />
<uses-permission android:name="com.lottoapplicationandroid.permission.C2D_MESSAGE" /> 
<!-- App receives GCM messages. -->
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<!-- GCM connects to Google Services. -->
<uses-permission android:name="android.permission.INTERNET" /> 
<!-- GCM requires a Google account. -->
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<!-- Keeps the processor from sleeping when a message is received. -->
<uses-permission android:name="android.permission.WAKE_LOCK" />
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main"
        android:configChanges="orientation|keyboardHidden" 
        android:screenOrientation="portrait">

        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <!-- ZXing activities -->
<activity android:name="com.google.zxing.client.android.CaptureActivity"
          android:screenOrientation="landscape"
          android:configChanges="orientation|keyboardHidden"
          android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
          android:windowSoftInputMode="stateAlwaysHidden">
  <intent-filter>
    <action android:name="com.phonegap.plugins.barcodescanner.SCAN"/>
    <category android:name="android.intent.category.DEFAULT"/>
  </intent-filter>
</activity>
<activity android:name="com.google.zxing.client.android.encode.EncodeActivity" android:label="@string/share_name">
  <intent-filter>
    <action android:name="com.phonegap.plugins.barcodescanner.ENCODE"/>
    <category android:name="android.intent.category.DEFAULT"/>
  </intent-filter>
</activity>

<receiver android:name="com.google.android.gcm.GCMBroadcastReceiver" android:permission="com.google.android.c2dm.permission.SEND" >
<intent-filter>
 <action android:name="com.google.android.c2dm.intent.RECEIVE" />
 <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
 <category android:name="com.lottoapplicationandroid" />
</intent-filter>
</receiver>

<service android:name=".GCMIntentService" />

</application> 
```

**编辑**

如果不可能，我不需要解决方案。我会非常感谢提示如何找出问题所在。例如，我发现我必须有一个开放的端口 5228。有人知道如何检查设备是否正在侦听该端口吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T09:44:39.317

问题已解决。

我不得不关闭 Wi-Fi。

> WiFi /电话网络
> 
> 关闭/关闭：不工作
> 
> 开/关：不工作
> 
> 开/开：不工作
> 
> 关闭/开启：工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T06:26:23.937

您是否缺少接收者的一些意图过滤器？

```
 <receiver android:name="com.google.android.gcm.GCMBroadcastReceiver" android:permission="com.google.android.c2dm.permission.SEND" >
      <intent-filter>
          <action android:name="com.google.android.c2dm.intent.RECEIVE" />
          <category android:name="com.lottoapplicationandroid" />
      </intent-filter>
      <intent-filter>
          <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
          <category android:name="com.lottoapplicationandroid" />
      </intent-filter>
 </receiver> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-07T05:01:14.633

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
    <uses-permission android:name="packagename.permission.C2D_MESSAGE" />     

   <receiver
                    android:name=".MyBroadcastReceiver"
                    android:permission="com.google.android.c2dm.permission.SEND" >
                    <intent-filter>
                        <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                        <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

                        <category android:name="packagename" />
                    </intent-filter>
                </receiver>

      <service android:name="Packagename.MyIntentService" >
            </service>

Try it hope so it works. 
```

# c# - 如何将 T-SQL 查询转换为 linq

> ID：12293912
> 
> 赞同：2
> 
> 时间：2012-09-06T06:08:56.127
> 
> 标签：c#, linq, entity-framework

我在 SQL 中有 4 个表：`DocumentType`, `ClearanceDocument`, `Request`, `RequestDocument`.
我希望在页面加载和用户选择一个请求时，显示所有基于文档并签入`clearanceType`以及何时设置`RequestTable``RequestDocument``exist``is_exist=true`

我已经写了这个查询以`SqlServer Query Editor`获得这个场景的结果，但是我不能把这个查询转换为 Linq

```
 select *,
    is_Orginal=
    (select is_orginal from CLEARANCE_REQUEST_DOCUMENT 
    where 
    DOCUMENT_ID=a.DOCUMENT_ID and REQUEST_ID=3)
    from 
    DOCUMENT_TYPES a
    where 
    DOCUMENT_ID in 
    (select DOCUMENT_ID from CLEARANCE_DOCUMENTS dt 
    where 
    dt.CLEARANCE_ID=
    (SELECT R.CLEARANCE_TYPE FROM CLEARANCE_REQUEST R 
    WHERE 
    R.REQUEST_ID=3)) 
```

我在 linq 中写了这个查询但不工作

```
 var list = (from r in context.CLEARANCE_REQUEST
                        where r.REQUEST_ID == 3
                        join cd in context.CLEARANCE_DOCUMENTS on r.CLEARANCE_TYPE equals cd.CLEARANCE_ID
                        join dt in context.DOCUMENT_TYPES on cd.DOCUMENT_ID equals dt.DOCUMENT_ID into outer
                        from t in outer.DefaultIfEmpty()
                        select new
                                   {
                                        r.REQUEST_ID,
                                        cd.CLEARANCE_ID,
                                        t.DOCUMENT_ID,
                                        t.DOCUMENT_NAME,
                                        is_set=(from b in context.CLEARANCE_REQUEST_DOCUMENT where 
                                                    b.REQUEST_ID==r.REQUEST_ID && b.DOCUMENT_ID==t.DOCUMENT_ID
                                                    select new{b.IS_ORGINAL})
                                   }

                       ).ToList(); 
```

我想将此查询转换为`LINQ`. 请帮我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T06:41:07.900

无需手动连接从实体框架上下文返回的对象。

请参阅[为什么在简单的一对多关系上使用 LINQ Join？](https://stackoverflow.com/questions/7229569/why-use-linq-join-on-a-simple-one-many-relationship)

如果您按预期使用该框架，您的工作会容易得多。

```
var result = var clearanceTypes = context.CLEARANCE_REQUEST
    .Single(r => r.REQUEST_ID == 3)
    .CLEARANCE_DOCUMENTS
    .SelectMany(dt => dt.DOCUMENT_TYPES)
    .Select(a => new 
    {
        DocumentType = a,
        IsOriginal = a.CLEARANCE_REQUEST_DOCUMENT.is_original
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T06:42:34.133

由于在迭代数据之前不会执行查询，因此您可以将查询拆分为多个子查询，以帮助您获得如下结果：

```
var clearanceIds = context.CLEARANCE_REQUEST
                          .Where(r => r.REQUEST_ID == 3)
                          .Select(r => r.CLEARANCE_TYPE);
var documentIds = context.CLEARANCE_DOCUMENTS
                         .Where(dt => clearanceIds.Contains(dt.CLEARANCE_ID))
                         .Select(dt => dt.DOCUMENT_ID);
var result = context.DOCUMENT_TYPES
                    .Where(a => documentIds.Contains(a.DOCUMENT_ID))
                    .Select(a => new
                    {
                        // Populate properties here
                        IsOriginal = context.CLEARANCE_REQUEST_DOCUMENT
                                            .Single(item => item.DOCUMENT_ID == a.DOCUMENT_ID &&
                                                              item.REQUEST_ID == 3)
                                            .IS_ORIGINAL
                    })
                    .ToList(); 
```

# java - 合并两个 log4j.properties 文件

> ID：12293914
> 
> 赞同：0
> 
> 时间：2012-09-06T06:09:04.473
> 
> 标签：java, properties, log4j

我有两个类和两个 log4j.properties 文件：每个类都有一个文件。一切正常。现在我想将两个属性文件合并为一个。但我仍然希望每个类都有自己的日志文件。我怎么做？我做了以下但它不工作：类 Abc.java 日志很好，但 Xyz.java 不再记录到它自己的文件。请注意，Xyz.java 获取动态日志文件名。

```
 log4j.appender.CONSOLE=org.apache.     log4j.ConsoleAppender
 log4j.appender.CONSOLE.layout=org.apache.     log4j.PatternLayout
 log4j.appender.CONSOLE.layout.ConversionPattern=%d %-5p %c{1} - %m%n

 log4j.rootLogger=INFO, CONSOLE

 log4j.appender.ABC_ERR_LOG=org.apache.     log4j.RollingFileAppender
 log4j.appender.ABC_ERR_LOG.File=/opt/mysite/var/log/allhere.error.log
 log4j.appender.ABC_ERR_LOG.MaxFileSize=4MB
 log4j.appender.ABC_ERR_LOG.MaxBackupIndex=3
 log4j.appender.ABC_ERR_LOG.layout=org.apache.     log4j.PatternLayout
 log4j.appender.ABC_ERR_LOG.layout.ConversionPattern=%d %-5p %c{1} - %m%n
 log4j.appender.ABC_ERR_LOG.Threshold = WARN

 log4j.appender.ABC_LOG=org.apache.     log4j.RollingFileAppender
 log4j.appender.ABC_LOG.File=/opt/mysite/var/log/allhere.log
 log4j.appender.ABC_LOG.MaxFileSize=8MB
 log4j.appender.ABC_LOG.MaxBackupIndex=3
 log4j.appender.ABC_LOG.layout=org.apache.     log4j.PatternLayout
 log4j.appender.ABC_LOG.layout.ConversionPattern=%d %-5p %c{1} - %m%n

 log4j.appender.XYZ_LOG=org.apache.     log4j.RollingFileAppender
 log4j.appender.XYZ_LOG.File=/opt/mysite/var/log/job-${logfilename}.log
 log4j.appender.XYZ_LOG.MaxFileSize=8MB
 log4j.appender.XYZ_LOG.MaxBackupIndex=3
 log4j.appender.XYZ_LOG.layout=org.apache.     log4j.PatternLayout
 log4j.appender.XYZ_LOG.layout.ConversionPattern=%d %-5p %c{1} - %m%n

 log4j.logger.com.mysite=DEBUG, ABC_LOG, ABC_ERR_LOG, XYZ_LOG 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:10:05.390

你的两个班级在同一个包里？

如果没有，您可能必须记录：

```
log4j.logger.com.mysite.packageAbc=DEBUG, ABC_LOG, ABC_ERR_LOG
log4j.logger.com.mysite.packageXyz=DEBUG, XYZ_LOG 
```

否则，您可以像这样设置动态日志文件：

```
public final void initParams(final String logFileName,
        final Layout logLayout, final boolean origin, final Level level) {
    FileAppender appender =
        (FileAppender) logger.getParent().getAppender(DEFAULT_APPENDER_NAME);

    if (appender != null && !logFileName.equalsIgnoreCase(appender.getFile())) {
        appender.setFile(logFileName);
        appender.setThreshold(level);
        appender.setLayout(logLayout);
        appender.activateOptions();
    }
} 
```

重要的部分是

```
 appender.activateOptions(); 
```

以便 log4j 重新加载其配置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T19:30:43.900

事实证明我的属性文件是正确的。我的文件系统有问题。

# python - from django.utils.functional import wraps 和 from functools import wraps

> ID：12293920
> 
> 赞同：0
> 
> 时间：2012-09-06T06:09:33.393
> 
> 标签：python, django

from django.utils.functional import wraps 和 from functools import wraps 在功能上有什么区别？

我使用 django 1.3 和 python 2.4。我想从帖子数据中删除敏感信息，但 django.views.decorators.debug 仅在 django 1.4 中可用。所以我复制源代码并从[https://bitbucket 放入我的项目。 org/orzel/django-1.4-production/src/507b10c2c0e3/django/views/decorators/debug.py](https://bitbucket.org/orzel/django-1.4-production/src/507b10c2c0e3/django/views/decorators/debug.py)。但是这个装饰器使用了python 2.4中不可用的functools。所以我使用django.utils.functional import wraps而不是from functools import wraps。但是敏感信息仍然出现在错误邮件中？有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T06:21:18.527

我不认为有区别。它可能是不支持`functools.wraps`.

**编辑**

实际上，由于最新的 Django 不再支持任何不支持的 Python 版本，`functools`我认为它只是因为可能的依赖问题而留在那里（在 Django 或 Django 项目中）。它实际上甚至`functools.wraps`现在直接导入： http: [//code.djangoproject.com/svn/django/trunk/django/utils/functional.py](http://code.djangoproject.com/svn/django/trunk/django/utils/functional.py)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T06:27:40.877

这是 5 年前实现的，用于使用 Django 装饰器修复幼稚的内省：

[http://code.djangoproject.com/ticket/5701](http://code.djangoproject.com/ticket/5701)

阅读错误详细信息以了解其背后的动机。

它被用作：

```
try:
    from functools import wraps
except ImportError:
    from django.utils.functional import wraps  # Python 2.3, 2.4 fallback. 
```

# java - 检查类是否实现接口

> ID：12293924
> 
> 赞同：1
> 
> 时间：2012-09-06T06:09:51.600
> 
> 标签：java, inheritance, interface

这是一个例子：

有一个基本类（A）可以处理许多不同的类（比如说 B、C、D 都扩展了 P）。在 AI 类中需要调用如下函数：

```
 public void doSmth(P variable) {
      B b = (B)variable;
      b.getSomeImportantInfo();
 } 
```

为此，我尝试添加一个接口 (I) 并定义 B、C、D 实现它。

问题是，doSmth 将适用于所有这些类（B、C、D），我不希望它们都实现这个接口。所以我正在尝试做这样的事情：

```
 public void doSmth(P variable) {
      if(variable instanceof I) {
           ((I)variable).getSomeImportantInfo();
      }
 } 
```

但这不起作用，因为它说它不能将变量转换为 I。

我怎样才能实现所需的行为？另外，我不能修改 P 并使其实现 I。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-03T15:53:28.400

我也想晚了，但是：

```
public static boolean isImplementsInterface(Class interfaze, Class clazz) {
    for (Class c : clazz.getInterfaces()) {
        if (c.equals(interfaze)) {
            return true;
        }
    }
    return false;
}

public static void main(String[] args) {
    System.out.println(isImplementsInterface(CharSequence.class, String.class));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-03T16:28:04.340

我认为您不需要将变量显式类型转换为 I。一旦您检查它是否是“I”的实例，直接调用该方法并让程序在运行时决定..这将根据实际对象被调用，参考变量是指。

# php - php邮件不发送html内容

> ID：12293927
> 
> 赞同：2
> 
> 时间：2012-09-06T06:10:04.337
> 
> 标签：php, email

由于某种原因，我的 php mail() 函数不发送 html，

而不是`<a href="mysite">link</a>`它只显示`link`为纯文本。

有任何想法吗？

这是我使用的标题：

```
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=UTF-8' . "\r\n";

// Additional headers
$headers .= 'From: My Automated Message <robot@mysite.cc>' . "\r\n"; 
```

并调用如下：

```
try {
    if (@mail($to_email, $subject, $message, $headers)){
        echo "<span style=\"color:#0D0; font:10pt Tahoma;font-weight:bold;\">{$SENT_MESSAGE}</span><br><br>"; 
        return true;
    } else {
        $tmp=error_get_last();
        throw new Exception($tmp['message']);
    }
} catch (Exception $e) {
    echo "<span style=\"color:red; font:10pt Tahoma;font-weight:bold;\">Error: ".$e->getMessage()."</span><br><br>";
} 
```

我也尝试发送没有标题的邮件，但它再次将链接显示为纯文本，如下所示：`<a href="mysite">link</a>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T06:16:20.490

试试这个标题

```
 $headers = 'From: Name<address@domain.com>' . "\r\n" .
       'Content-Type: text/html; charset=UTF-8' . "\r\n" .
       'MIME-Version: 1.0' . "\r\n" .
       'Content-Transfer-Encoding: base64' . "\r\n" .
       'X-Mailer: PHP/' . phpversion(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T06:33:24.887

检查这个

```
 $from='robot@mysite.cc';      
 $headers ='';
 $headers .= 'MIME-Version: 1.0' . "\r\n";
 $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
 $headers .= 'From: '.$from.' '. "\r\n";

 mail($to_email, $subject, $message, $headers); 
```

# objective-c - 枚举中的复制和自动释放

> ID：12293930
> 
> 赞同：0
> 
> 时间：2012-09-06T06:10:17.870
> 
> 标签：objective-c, cocoa, for-loop, enumeration

我试图在枚举时更改数组的内容。为了避免警告“在枚举时数组发生了变异”，我复制了数组并像这样完成了自动释放-

```
int iKeyArrayCount=0;
        for(NSString *keyEntity in [[keyArray copy]autorelease])
        {
            [keyArray replaceObjectAtIndex:iKeyArrayCount withObject:[keyEntity stringByReplacingOccurrencesOfString:@"\"" withString:kMPVTBlankString]];
            [keyArray replaceObjectAtIndex:iKeyArrayCount withObject:[keyEntity stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]]];
            iKeyArrayCount++;
        } 
```

我的困惑是关于 keyArray 副本的枚举。虽然枚举是这样的，但每次执行 for 循环时都会形成一个 keyArray 的副本？或者在整个枚举过程中只形成了那个keyArray的一个副本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T06:15:49.447

在该代码片段`[[keyArray copy] autorelease]`中只执行一次，结果用于被迭代的对象。

也就是说，“在整个枚举过程中只形成了那个keyArray的一个副本”是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:00:28.027

为此复制整个数组是没有意义的。您也可以只使用常规的 for 循环而不是枚举：

```
for (NSInteger i = 0; i < [keyArray count]; i++)
{
    NSString *keyEntity = [keyArray objectAtIndex:i];
    NSString *newKeyEntity = [keyEntity stringByReplacingOccurrencesOfString:@"\\" withString:@" "];
    newKeyEntity = [newKeyEntity stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
    [keyArray replaceObjectAtIndex:i withObject:newKeyEntity];
} 
```

如果您开始在循环中添加/删除对象，事情可能会变脏，但只要您只是替换它们就可以了。

您可能已经注意到这`stringByReplacingOccurrencesOfString:withString:`在您的示例中没有用，因为您再次在下一行替换它。

# perl - 在 jmeter 中使用 perl Selenium 测试脚本进行性能测试

> ID：12293932
> 
> 赞同：1
> 
> 时间：2012-09-06T06:10:19.637
> 
> 标签：perl, selenium, webdriver, jmeter, performance-testing

我有用 perl 编写的 selenium web 驱动程序测试脚本。现在我想用它们用 jmeter 进行性能测试。

谁能帮助我如何使用它进行性能测试？

我尝试了一些这样的解决方案，[但](https://stackoverflow.com/questions/7817498/running-selenium-scripts-from-jmeter/7823777#7823777)没有用，因为我的测试是在 perl 中。

# wordpress - 向访问者公开 wordpress 媒体文件

> ID：12293933
> 
> 赞同：0
> 
> 时间：2012-09-06T06:10:25.360
> 
> 标签：wordpress

我需要在我的 wordpress 网站上添加一个页面，显示通过媒体库上传的文档（理想情况下，只有特定文件，如 pdf、docx 等，而不是图像文件）。这个想法是让访问者无需登录即可直接下载此类文件。

关于如何去做的任何想法？

谢谢，马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T07:19:51.500

这是最好通过 Wordpress 插件实现的东西。看看[http://wordpress.org/extend/plugins/media-library-assistant/](http://wordpress.org/extend/plugins/media-library-assistant/)

归根结底，如果您找不到预先存在的插件，最好的选择是制作一个。插件开发的一些链接是：

[http://codex.wordpress.org/Writing_a_Plugin](http://codex.wordpress.org/Writing_a_Plugin) http://codex.wordpress.org/Plugin_API [http://codex.wordpress.org/Plugin_Resources](http://codex.wordpress.org/Plugin_Resources)

# java - 谷歌应用引擎无限重定向，过滤器映射到 /*

> ID：12293934
> 
> 赞同：0
> 
> 时间：2012-09-06T06:10:26.163
> 
> 标签：java, google-app-engine, objectify

我有一个使用基本 jsp 和 servlet 的简单 Web 应用程序。我有一个映射到 /* 的 servlet 过滤器。我有一个配置为 index.jsp 的欢迎文件

```
<filter-mapping>
    <filter-name>ObjectifyFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

...

```
<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list> 
```

我遇到的问题是，当对不存在的资源的请求并且在应用程序引擎上部署时应该返回 404 错误时，在尝试重复附加斜杠 + 欢迎文件时无休止地返回 302。

[EG：对http://myyapp.appspot.com/foo](http://myyapp.appspot.com/foo)的请求（没有为 foo 配置任何内容）会产生以下结果：

[http://myyapp.appspot.com/foo/index.jsp/index.jsp/index.jsp/index.jsp/index.jsp/index.jsp/index.jsp/index.jsp/index.jsp/index。 jsp/index.jsp/index.jsp/index.jsp/index.jsp/index.jsp/index.jsp/index.jsp/index.jsp/index.jsp/index.jsp/](http://myyapp.appspot.com/foo/index.jsp/index.jsp/index.jsp/index.jsp/index.jsp/index.jsp/index.jsp/index.jsp/index.jsp/index.jsp/index.jsp/index.jsp/index.jsp/index.jsp/index.jsp/index.jsp/index.jsp/index.jsp/index.jsp/index.jsp/)

在开发服务器上，这将返回预期的 404。如果我删除过滤器映射，它也会在应用引擎上返回 404。

这似乎相当基本，所以我猜我在某个地方错过了一些东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:05:38.553

看起来问题的一个重要因素是 web.xml 中的 jsp-config 标记。虽然我认为内容无关紧要，但我的看起来像这样：

```
<jsp-config>
    <jsp-property-group>
        <url-pattern>*.jsp</url-pattern>
        <page-encoding>UTF-8</page-encoding>
    </jsp-property-group>
</jsp-config> 
```

删除 jsp-config 标记为我解决了这个问题，即它是一种解决方法。就我而言，它并没有造成太大的伤害，因为我可以分别在每个页面上指定页面编码。但是我仍然对真正的解决方案感兴趣。

# java - 在 setLocation(mouse.getX(), mouse.getY()) 处出现 Greenfoot 错误；

> ID：12293936
> 
> 赞同：-1
> 
> 时间：2012-09-06T06:10:37.360
> 
> 标签：java, greenfoot

我正在制作一个击落鸟类的游戏。我已经制作了一个充当十字准线的演员，跟随鼠标。

这是产生错误的代码（setLocation 是第 18 行）：

```
MouseInfo mouse = Greenfoot.getMouseInfo();
setLocation(mouse.getX(), mouse.getY()); 
```

和错误代码：

```
java.lang.NullPointerException
    at Crosshair.act(Crosshair.java:18)
    at greenfoot.core.Simulation.actActor(Simulation.java:565)
    at greenfoot.core.Simulation.runOneLoop(Simulation.java:523)
    at greenfoot.core.Simulation.runContent(Simulation.java:213)
    at greenfoot.core.Simulation.run(Simulation.java:203) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T06:15:05.490

如果您编写的代码中有空指针异常，则意味着您的 mouseinfo 对象为空。

根据[文档](http://www.greenfoot.org/files/javadoc/greenfoot/Greenfoot.html#getMouseInfo())：

> 获取鼠标信息
> 
> public static MouseInfo getMouseInfo() 返回一个带有鼠标状态信息的鼠标信息对象。
> 
> 返回：有关鼠标当前状态的信息，如果鼠标光标在世界边界之外（除非被拖动），则返回 null。

基本上，这意味着当调用该方法时您的鼠标超出边界。

为了帮助您更多，请描述您希望达到的具体目标。

# php - 下拉默认值我有这个代码： if(isset($_POST['search'])) { $res1=mysql_query("SELECT * FROM aircraft where acode = '$_POST[ac]'") or die(mysql_error() ); while($row=mysql_fetch_array($res1)) { $airc=$row['acode']; $amode=$row['amodel']; $stat=$row['状态']; $rem=$ro

> ID：12293939
> 
> 赞同：8
> 
> 时间：2012-09-06T06:10:41.937
> 
> 标签：php, html, drop-down-menu, default-value

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-06T06:20:46.397

只需`selected="selected"`根据您的情况选择选项`$row['status']`，

```
<option selected="selected" value="available">Available</option> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T06:24:30.047

将可用和不可用写入数组

```
$theArray = array("Available","Not Available"); 
```

循环数组：

```
<tr><td><font face=consolas><b>Status:*</b></font></td><td><select name=st>
<?php
foreach ($theArray as $key => $value) {
    if ($value == $stat) {
        echo('<option selected="selected" value='.$value.'>'.$value.'</option>');
    } else {
        echo('<option value='.$value.'>'.$value.'</option>');
    }
}
?>
</select></td></tr> 
```

在每个循环中，我们检查数组中的值是否与变量中的值相同，如果是，我们将选择的值放在那里

明白其中的逻辑吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T06:17:11.113

```
<?php
$status = "navail";
?>
<select name="sel">
<option value="avail" <?php if($status == "avail") echo "SELECTED";?> > Avail </option>
<option value="navail" <?php if($status == "navail") echo "SELECTED";?> > Navail </option>
</select> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T06:22:43.463

您可以从数据库中设置选定的下拉选项，如下所示：

```
<select name="status"> 
<option <?php echo ($row['status'] == 'Available') ? 'selected' : '' ?> value='Available'>Available</option> 
<option <?php echo ($row['status'] == 'Not Available') ? 'selected' : '' ?> value='Not Available'>Not Available</option> 
</select> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-06T06:15:24.990

```
<select name=status>
<option value="available" <?php if($row['status']=="available") echo "selected=\"selected\""; ?>>Available</option>
<option value="unavailable" <?php if($row['status']=="unavailable") echo "selected=\"selected\""; ?>>Unvailable</option>
</select> 
```

基本上 echo selected="selected" 选项取决于相关字段的值。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-11-09T18:11:10.953

您可以使用附加选项标签定义您的变量值，并将其标记为选中，如下所示：

```
<select name="role" id="role">
<!-- This is default define value using php variable $r -->
<option selected="selected" value="<?php echo $r; ?>" disabled="disabled"><?php echo $r; ?></option>

<!-- Other options values -->
<option value="2">Option-2</option>
<option value="2">Option-2</option>
</select> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-08T10:33:48.423

在数组中声明选项，例如

$arr = array("available" => "available","unavailable" => "unavailable");

并像这样输入下拉菜单

```
echo form_dropdown("st", $arr, set_value("st", (isset($row['status'];) ? $row['status']; : "")) 
```

这是codeigniter等框架中常用的方法..我认为它也适用于核心php..

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-09-29T06:05:13.187

这是我第一次来这里，我尝试在 php 中使用基本原则，不知道这是否对您有帮助，但如果您尝试获取您在数据库中输入的默认值，然后再次编辑它，我建议您尝试这个

```
<select name="st">
<?php if($row['status']=="Available"){?><option value="Available">Available</option><?php }?>
<?php if($row['status']=="Unavailable"){?><option value="Unavailable">Unavailable</option><?php }?>
</select> 
```

> 假设您数据库中的列名是“状态”，试一试对我有用

# r - 遍历R中的列表行

> ID：12293940
> 
> 赞同：5
> 
> 时间：2012-09-06T06:10:47.390
> 
> 标签：r

我在 R 中工作，我想遍历列表的行并按名称引用列值，如下所示：

```
for(row in Data) {
    name <- row$name
    age <- row$age
    #do something cool here
} 
```

我的数据如下所示：

```
name, age, gender, weight
Bill, 23, m, 134
Carl, 40, m, 178 
```

我知道这应该是微不足道的，但我找不到帮助。提前谢谢。

所以这是我正在使用的原始数据。前面的表格就是一个例子：

```
structure(list(startingTemp = c(100L, 100L, 100L, 100L, 100L), 
    endingTemp = c(1L, 1L, 1L, 1L, 1L), movesPerStep = c(200000L, 
    100000L, 20000L, 10000L, 2000L), coolingCoefficient = c(0.99, 
    0.99, 0.99, 0.99, 0.99), numberTempSteps = c(459L, 459L, 
    459L, 459L, 459L), costPerRun = c(91800000L, 45900000L, 9180000L, 
    4590000L, 918000L)), .Names = c("startingTemp", "endingTemp", 
"movesPerStep", "coolingCoefficient", "numberTempSteps", "costPerRun"
), row.names = c(NA, 5L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-06T06:29:36.887

您可以使用以下方法执行此操作`apply`：

```
apply(Data, 1, function(row) {
    name <- row["name"]
    age <- row["age"]
    #do something cool here
}) 
```

这通常用于返回一个新的向量、矩阵或列表，这取决于函数返回的内容。例如，假设您要将函数`numberTempSteps / costPerRun`应用于每一行。你会这样做：

```
apply(Data, 1, function(row) row["numberTempSteps"] / row["costPerRun"]) 
```

（请注意，对于此示例，您也可以这样做`Data$numberTempSteps / Data$costPerRun`）。

# node.js - nodejs mongodb中的匿名错误

> ID：12293941
> 
> 赞同：0
> 
> 时间：2012-09-06T06:10:48.020
> 
> 标签：node.js, mongodb

伙计们，我正面临以下不相关的错误。

```
500 Error: Argument passed in must be a single String of 12 bytes or a string of 24 hex characters
at Function.createFromHexString (/home/r121/Desktop/nilesh/cmarin-MongoDB-Node-Express-Blog-4a5e5e9/trucy-mongodb-express-node.js-blog-37daddd/node_modules/mongodb/node_modules/bson/lib/bson/objectid.js:214:11)
at ArticleProvider.findById (/home/r121/Desktop/nilesh/cmarin-MongoDB-Node-Express-Blog-4a5e5e9/trucy-mongodb-express-node.js-blog-37daddd/articleprovider-mongodb.js:61:89)
at ArticleProvider.getCollection (/home/r121/Desktop/nilesh/cmarin-MongoDB-Node-Express-Blog-4a5e5e9/trucy-mongodb-express-node.js-blog-37daddd/articleprovider-mongodb.js:39:10)
at Db.collection (/home/r121/Desktop/nilesh/cmarin-MongoDB-Node-Express-Blog-4a5e5e9/trucy-mongodb-express-node.js-blog-37daddd/node_modules/mongodb/lib/mongodb/db.js:478:44)
at ArticleProvider.getCollection (/home/r121/Desktop/nilesh/cmarin-MongoDB-Node-Express-Blog-4a5e5e9/trucy-mongodb-express-node.js-blog-37daddd/articleprovider-mongodb.js:37:11)
at ArticleProvider.findById (/home/r121/Desktop/nilesh/cmarin-MongoDB-Node-Express-Blog-4a5e5e9/trucy-mongodb-express-node.js-blog-37daddd/articleprovider-mongodb.js:58:10)
at /home/r121/Desktop/nilesh/cmarin-MongoDB-Node-Express-Blog-4a5e5e9/trucy-mongodb-express-node.js-blog-37daddd/app.js:63:21
at callbacks (/home/r121/Desktop/nilesh/cmarin-MongoDB-Node-Express-Blog-4a5e5e9/node_modules/express/lib/router/index.js:272:11)
at param (/home/r121/Desktop/nilesh/cmarin-MongoDB-Node-Express-Blog-4a5e5e9/node_modules/express/lib/router/index.js:246:11)
at param (/home/r121/Desktop/nilesh/cmarin-MongoDB-Node-Express-Blog-4a5e5e9/node_modules/express/lib/router/index.js:243:11) 
```

虽然我只是调用`/blog/search`看起来像这样的方法

```
app.get('/blog/search', function(req, res) {

        res.render('blog_search.ejs', {
            title: 'Search Contact',
            });
                 }); 
```

我的`blog_search.ejs`长相是这样的

```
<h1><%= title %></h1>
   <form method="post" action="/blog/search">
     <input type="text" name="title">
     <input type="submit" name="submit"> 
```

请帮我解决这个错误。我在使用 URL 和 a href 访问它时遇到这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:37:06.367

是的，实际上搜索模块写在 ID 字段下，因此它无法执行任何操作。

# git - 当我可能在子目录中时如何找到本地git存储库的路径

> ID：12293944
> 
> 赞同：78
> 
> 时间：2012-09-06T06:11:05.470
> 
> 标签：git, path, environment

我正在寻找诸如打印相关存储库（目录）`git list-path`的路径之类的东西。`.git`

一些背景知识：我已经在我的很多项目/文件夹上设置了 git 版本控制。其中一些是嵌套的，因此具有 echo own 存储库的一个目录是另一个目录的子文件夹，该目录由另一个存储库跟踪。

例如，在我的主目录`~`（`~/photo/meta-mix/`现在，比如说，我在目录中建立了另一个项目 `~/photo/meta-match/`，但我不知道它是否有自己的存储库。所以我想知道这个目录是否受版本控制以及它的存储库在哪里。

如何使用 git 命令执行此操作？`git status`可以给我

```
nothing to commit 
```

在*这两种*情况下，when`~/photo/meta-match/`都有自己的存储库或仅引用`~`.

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-09-06T06:15:04.283

```
git rev-parse --show-toplevel 
```

如果在 git repo 中执行就足够了。
从[`git rev-parse`](http://git-scm.com/docs/git-rev-parse)手册页：

```
--show-toplevel 
```

> 显示顶级目录的绝对路径。

对于旧版本（1.7.x 之前），其他选项列在“ [Is there a way to get the git root directory in one command?](https://stackoverflow.com/questions/957928/is-there-a-way-to-get-the-git-root-directory-in-one-command) ”中：

```
git rev-parse --git-dir 
```

这将给出`.git`目录的路径。

* * *

OP提到：

```
git rev-parse --show-prefix 
```

它返回 git repo 根目录下的本地路径。（如果您在 git repo 根目录下，则为空）

* * *

注意：为了简单地检查一个是否在 git repo 中，我发现以下命令非常有表现力：

```
git rev-parse --is-inside-work-tree 
```

是的，如果您需要检查您是否在`.git`git-dir 文件夹中：

```
git rev-parse --is-inside-git-dir 
```

# silverlight - 在silverlight中将xml文件绑定到数据网格

> ID：12293948
> 
> 赞同：0
> 
> 时间：2012-09-06T06:11:30.227
> 
> 标签：silverlight, silverlight-4.0

我正在使用 silverlight 将 xml 文件绑定到 datagrid。我找到了很多示例，但我的 xml 文件非常复杂。那么如何读取或将其绑定到数据网格。下面是我的 xml 文件，我想读取元素“EntityType”及其子元素及其属性值。

谢谢。

```
`<?xml version="1.0" encoding="utf-8" ?>
<edmx:Edmx Version="1.0" xmlns:edmx="http://schemas.microsoft.com/ado/2007/06/edmx">
  <edmx:DataServices xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata" m:DataServiceVersion="1.0">
    <Schema Namespace="Microsoft.Crm.Sdk.Data.Services" xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices" xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata" xmlns="http://schemas.microsoft.com/ado/2007/05/edm">
      <EntityType Name="SdkMessageRequestField">
        <Key>
          <PropertyRef Name="SdkMessageRequestFieldId" />
        </Key>
        <Property Name="FieldMask" Type="Edm.Int32" Nullable="true" />
        <Property Name="Name" Type="Edm.String" Nullable="true" />
      </EntityType>
      <ComplexType Name="EntityReference">
        <Property Name="Id" Type="Edm.Guid" Nullable="true" />
        <Property Name="LogicalName" Type="Edm.String" Nullable="true" />
        <Property Name="Name" Type="Edm.String" Nullable="true" />
      </ComplexType>
    </Schema>
  </edmx:DataServices>
</edmx:Edmx>` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T06:53:34.460

XDocument x = XDocument.Load("XMLFileName.xml");

```
 var a = (from c in x.Descendants("edmx").Elements("Schema").Elements("EntityType/ComplexType") 

             select new 
             { 
                 Name = c.Parent.Attribute("Name"), 
                 PropertyName = c.Attribute("Name"),
                 PropertyType = c.Attribute("Type")
             }).ToArray(); 

    foreach (var itm in a) 
    { 
        // TODO:..... 
    } 
```

# iphone - iPhone 键盘未显示

> ID：12293949
> 
> 赞同：1
> 
> 时间：2012-09-06T06:11:34.350
> 
> 标签：iphone, objective-c, ios, keyboard

我的应用程序在登录屏幕上启动。之后，我使用下一个代码调用 TabBarViewController

```
DMMainScreenViewController *mainScreenController = [[[DMMainScreenViewController alloc]     initWithNibName:@"DMMainScreenViewController" bundle:nil] autorelease];
self.view.window.rootViewController = mainScreenController;
[self.view.window makeKeyAndVisible]; 
```

然后我通过单击移至最后一个选项卡。

有 2 个 UITextField 和一个 UITextView，然后当我触摸其中任何一个时，键盘都没有显示，我也不能更改为另一个 TextField/TextView，但我可以移动到另一个选项卡。

我该如何解决？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T07:33:29.697

要立即显示键盘，您需要使用以下行将文本字段设置为第一响应者：

```
[textField becomeFirstResponder]; 
```

但在 tabbarViewController 的这些情况下，正如 tonklon 在[他的回答](https://stackoverflow.com/a/3510412/19679)中所说：

> 如果在键盘可见时需要标签栏，您只能将标签栏移动到键盘上方，或调整标签栏控制器的大小，以便标签栏保持可见。
> 
> 您确定在键盘可见时需要标签栏吗？请记住，标签栏用于更改视图。也许你需要重新考虑你的交互设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T23:04:25.793

您是否使用 IB 来创建您的视图？如果是这样，您是否记得将您的 UITextField 连接到文件的所有者，以便视图知道将您单击 TextField 的通知发送到哪里？

# atk4 - atk4 形式的条件字段

> ID：12293965
> 
> 赞同：1
> 
> 时间：2012-09-06T06:12:58.777
> 
> 标签：atk4

我在我的应用程序中使用 atk4 表单。我想在单选字段中单击“Y”选项时显示一个文本字段。是否有任何内置函数来设置条件或需要 jquery 脚本来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T10:05:11.313

是的，这里是较旧的 3.9 版 Agile Toolkit 的演示站点。javascript 功能应该与 4.2 兼容，但要小心。

[http://demo39.agiletoolkit.org/demo.html?t=29](http://demo39.agiletoolkit.org/demo.html?t=29)

# visual-studio-2008 - ReSharper 与 VS 构建集成

> ID：12293968
> 
> 赞同：2
> 
> 时间：2012-09-06T06:13:08.917
> 
> 标签：visual-studio-2008, build, resharper, integration

我有 VS2008 专业版并安装了 ReSharper。R# 运行良好并分析代码，但我需要将 R# 分析与 VS Build 集成，这样当我进行构建（在调试/发布中）时，我应该能够看到 R 的这些建议/警告# 在 VS 错误列表窗口中。也得到同样的报告表示赞赏。任何人都可以在这方面帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T23:54:42.407

同样来自 JetBrains 的 TeamCity 是一个构建系统，能够在构建过程中提供 ReSharper 错误和警告。

不过，我知道这不是 MS Build。

# perl - 如何在perl中检查带有标题的csv文件是否为空

> ID：12293972
> 
> 赞同：0
> 
> 时间：2012-09-06T06:13:20.607
> 
> 标签：perl, csv, perl-module

我有一个`xyz.csv`包含内容的 csv 文件

```
name,age,place,phone
xyz,12,ohio,7372829
sed,23,hrh,9890908 
```

我需要解析 csv 文件并检查它是否为空文件，即它没有提供的标题的值。

一个空文件`xyz.csv`将只包含标题（标题可能会减少或增加），例如减少：

```
name,age,place,phone 
```

增加：

```
name,age,place,mob,phno,ht 
```

如何在下面的代码中检查空文件并打印是否为空？

我开发了下面的脚本来解析 csv

```
open(my $data, '<', $file_c) or die "Could not open '$file_c' $!\n";

while (my $line = <$data>) 
{
    next if ($. == 1);
    chomp $line; 
    my @fields = split "," , $line; 

    print"$fields[0] fields[1]";
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T06:18:31.473

如果我是你，我会研究处理 CPAN 的 CSV 模块之一，`Text::CSV`例如`Tie::CSV_File`或`DBD::CSV`.

检查文件是否为空将是计算文件中已解析行数的简单案例。你可以使用SQL`DBI`语句。`DBD::CSV``SELECT COUNT(*) FROM table_name`

以下链接提供了使用 perl 解析 CSV 文件的快速教程：http: [//perlmeme.org/tutorials/parsing_csv.html](http://perlmeme.org/tutorials/parsing_csv.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T07:40:00.860

您可以使用范围运算符搜索不是第一行的任何行。这应该非常有效：

```
while (<$data>) 
{
  unless (1..1) { print "not null\n"; exit 0; }
}
print "null\n";
exit 1; 
```

或者你可以一根一根地拔掉这些线——如果定义了第二个，那么它就不是空的：

```
<$data>;
print (defined <$data> ? "not null" : "null"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T07:19:38.620

你知道如何检查行数，如果你确定总是存在标题。那么第一行总是标题。

所以如果第 2 行不存在或第 2 行的长度为 0，那么它是一个空文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T07:53:10.983

这应该可行。从您的 shell 提示符检查是否`wc -l < FNAME`只返回行 cnt。

```
print "empty" if chomp(my $dummy = `wc -l < FNAME`) == 1; 
```

*不过，它可能效率低下。*

# android - 从非活动类调用另一个应用程序

> ID：12293978
> 
> 赞同：1
> 
> 时间：2012-09-06T06:13:38.627
> 
> 标签：android

我想从一个调用另一个应用程序。我对另一个应用程序的调用来自非活动类。但是`getPackageManager()`显示这样的错误`The method getPackageManager() is undefined for the type AppLauncher`。我也导入了包管理器，但它仍然显示相同的错误。

是否可以从非活动类调用另一个应用程序？提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T06:16:30.013

将您传递`activity context`给`non-activity class`. 并从该上下文中调用不同的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T06:44:54.230

你需要一个上下文来调用`getPackageManager()`它。从应用中的活动中获取上下文：

在您的主要活动的 onCreate 块中：

```
AppLauncher.setContext(this.getBaseContext)); 
```

在您的非活动类（AppLauncher）中：

```
Context context;
public static void setContext(Context context) {
    this.context = context;
} 
```

在您要调用 getPackageManager() 的非活动类中：

```
context.getPackageManager(); 
```

**提示**：如果您在 windows 上使用 eclipse 进行开发，请始终使用 Ctrl+Shift+O 自动导入缺少的和需要的包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T06:20:21.740

这些方法（例如*getPackageManager()*或*startActivity()*）是上下文的成员。您需要将您的主要活动或其上下文传递给其他类。

顺便说一句，我不明白为什么您需要包管理器来启动另一个应用程序。用相应的意图调用 startActivity() 怎么样？（但我想有充分的理由这样做）

# python - 如何使用 Bottle 返回 JSON 数组？

> ID：12293979
> 
> 赞同：37
> 
> 时间：2012-09-06T06:13:40.827
> 
> 标签：python, bottle

我正在使用[Bottle](http://bottlepy.org)编写一个 API ，到目前为止这非常棒。但是，在尝试返回 JSON 数组时遇到了一个小障碍。这是我的测试应用程序代码：

```
from bottle import route, run

@route('/single')
def returnsingle():
    return { "id": 1, "name": "Test Item 1" }

@route('/containsarray')
def returncontainsarray():
    return { "items": [{ "id": 1, "name": "Test Item 1" }, { "id": 2, "name": "Test Item 2" }] }

@route('/array')
def returnarray():
    return [{ "id": 1, "name": "Test Item 1" }, { "id": 2, "name": "Test Item 2" }]

run(host='localhost', port=8080, debug=True, reloader=True) 
```

当我运行它并请求每条路由时，我会从前两条路由中得到我期望的 JSON 响应：

**/单身的**

```
{ id: 1, name: "Test Item 1" } 
```

**/包含数组**

```
{ "items": [ { "id": 1, "name": "Test Item 1" }, { "id": 2, "name": "Test Item 2" } ] } 
```

所以，我曾期望返回一个字典列表来创建以下 JSON 响应：

```
[ { "id": 1, "name": "Test Object 1" }, { "id": 2, "name": "Test Object 2" } ] 
```

但是请求`/array`路由只会导致错误。我做错了什么，如何以这种方式返回 JSON 数组？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-09-06T06:33:10.177

Bottle 的 JSON 插件只希望返回 dicts - 而不是数组。存在与返回 JSON 数组相关的漏洞 - 例如，请参阅[这篇关于 JSON 劫持的帖子](http://haacked.com/archive/2009/06/25/json-hijacking.aspx/)。

如果你真的需要这样做，可以这样做，例如

```
@route('/array')
def returnarray():
    from bottle import response
    from json import dumps
    rv = [{ "id": 1, "name": "Test Item 1" }, { "id": 2, "name": "Test Item 2" }]
    response.content_type = 'application/json'
    return dumps(rv) 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-10-12T02:40:29.460

根据 Bottle 的 0.12 文档：

> 如上所述，Python 字典（或其子类）会自动转换为 JSON 字符串并返回到浏览器，其中 Content-Type 标头设置为 application/json。这使得实现基于 json 的 API 变得容易。也支持 json 以外的数据格式。请参阅教程输出过滤器以了解更多信息。

这意味着您不需要也不需要`import json`设置响应的 content_type 属性。

因此，代码大大减少：

```
@route('/array')
def returnarray():
    rv = [{ "id": 1, "name": "Test Item 1" }, { "id": 2, "name": "Test Item 2" }]
    return dict(data=rv) 
```

Web 服务器返回的 JSON 文档如下所示：

```
{"data": [{"id": 1, "name": "Test Item 1"}, {"id": 2, "name": "Test Item 2"}]} 
```

# java - 改变 JSlider 的外观和感觉

> ID：12293982
> 
> 赞同：6
> 
> 时间：2012-09-06T06:13:53.987
> 
> 标签：java, swing, look-and-feel, japplet, jslider

我已经浏览了这个网站[改变了外观和感觉，`JSlider`](http://www.java2s.com/Tutorial/Java/0240__Swing/CustomizingaJSliderLookandFeel.htm) 但除此之外`Slider.altTrackColor`没有其他工作。我想做一些如图 1 所示的事情，任何建议都会有很大帮助。我正在开发 JDK 1.6。

```
UIDefaults defaults = UIManager.getDefaults();    

       defaults.put("Slider.altTrackColor", Color.red);
       defaults.put("Slider.thumb", Color.red); 
```

我也试过这个：

```
 WindowUtilities.setNativeLookAndFeel();

 // WindowUtilities.setNimbuzzLookAndFeel();

 // WindowUtilities.setJavaLookAndFeel(); 
```

WindowUtilities 是告诉系统使用本机外观的类，就像在以前的版本中一样。否则，Metal (Java) LAF 是默认设置。

```
public static void setNativeLookAndFeel() {
try {
  UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
} catch(Exception e) {
  System.out.println("Error setting native LAF: " + e);
} 
```

![我希望右侧图像中的滑块像左侧](../Images/19c5b72d2aa6664192d09e72c64be698.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-06T09:50:44.860

这是第一张图片上显示的工作 UI 的完整示例：（
没有魔法 - 只需使用图形和基本 UI 知识）

```
import java.awt.BasicStroke;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import java.awt.Stroke;
import java.awt.geom.GeneralPath;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JSlider;
import javax.swing.SwingConstants;
import javax.swing.plaf.basic.BasicSliderUI;

/**
 *
 * @see http://stackoverflow.com/a/12297384/714968
 */
public class CustomSliderUI extends BasicSliderUI {

    private BasicStroke stroke = new BasicStroke(1f, BasicStroke.CAP_ROUND, 
            BasicStroke.JOIN_ROUND, 0f, new float[]{1f, 2f}, 0f);

    public CustomSliderUI(JSlider b) {
        super(b);
    }

    @Override
    public void paint(Graphics g, JComponent c) {
        Graphics2D g2d = (Graphics2D) g;
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, 
                RenderingHints.VALUE_ANTIALIAS_ON);
        super.paint(g, c);
    }

    @Override
    protected Dimension getThumbSize() {
        return new Dimension(12, 16);
    }

    @Override
    public void paintTrack(Graphics g) {
        Graphics2D g2d = (Graphics2D) g;
        Stroke old = g2d.getStroke();
        g2d.setStroke(stroke);
        g2d.setPaint(Color.BLACK);
        if (slider.getOrientation() == SwingConstants.HORIZONTAL) {
            g2d.drawLine(trackRect.x, trackRect.y + trackRect.height / 2, 
                    trackRect.x + trackRect.width, trackRect.y + trackRect.height / 2);
        } else {
            g2d.drawLine(trackRect.x + trackRect.width / 2, trackRect.y, 
                    trackRect.x + trackRect.width / 2, trackRect.y + trackRect.height);
        }
        g2d.setStroke(old);
    }

    @Override
    public void paintThumb(Graphics g) {
        Graphics2D g2d = (Graphics2D) g;
        int x1 = thumbRect.x + 2;
        int x2 = thumbRect.x + thumbRect.width - 2;
        int width = thumbRect.width - 4;
        int topY = thumbRect.y + thumbRect.height / 2 - thumbRect.width / 3;
        GeneralPath shape = new GeneralPath(GeneralPath.WIND_EVEN_ODD);
        shape.moveTo(x1, topY);
        shape.lineTo(x2, topY);
        shape.lineTo((x1 + x2) / 2, topY + width);
        shape.closePath();
        g2d.setPaint(new Color(81, 83, 186));
        g2d.fill(shape);
        Stroke old = g2d.getStroke();
        g2d.setStroke(new BasicStroke(2f));
        g2d.setPaint(new Color(131, 127, 211));
        g2d.draw(shape);
        g2d.setStroke(old);
    }

    public static void main(String[] args) {
        JFrame frame = new JFrame();
        JSlider slider = new JSlider(0, 100);
        slider.setPaintTicks(true);
        slider.setPaintLabels(true);
        slider.setMinorTickSpacing(5);
        slider.setMajorTickSpacing(25);
        slider.setUI(new CustomSliderUI(slider));
        frame.add(slider);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

您可以通过更改返回的边界轻松修改拇指（抓手）大小。拇指绘画将适应任何尺寸。您还可以轻松自定义任何其他滑块部分的绘画。

顺便说一句，这是最终视图：

![在此处输入图像描述](../Images/349c5500a21d97f6b443f0ec44401007.png)

PS 我没有为垂直滑块调整 UI，但这不应该花太长时间。

# ios - 以编程方式更新 coredata 中的重复值？

> ID：12293983
> 
> 赞同：3
> 
> 时间：2012-09-06T06:13:58.620
> 
> 标签：ios, xcode, core-data

我是核心数据的新手。我想更新重复值。例如我的桌子看起来像这样

```
 id | Name
============
 1  | Joseph  
 2  | Fernandez  
 3  | Joseph
 4  | James 
```

假设我想将 id 1 和 4 对应的 Joseph 更新为“myName”。当我尝试更新它时，它只更新第 4 行。我在任何文档中都找不到任何方法来做到这一点。谁能建议我一个解决方案？

还有一个问题，如何打印所有名称值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-19T10:52:36.107

您必须阅读文档以了解如何更新记录 [http://www.appcoda.com/core-data-tutorial-update-delete/](http://www.appcoda.com/core-data-tutorial-update-delete/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T08:11:26.713

詹姆士，

我将尝试使用示例代码回答您的两个问题。

要更新特定对象，您需要`NSFetchRequest`使用谓词设置新对象，获取对象（类型为`NSManagedObject`），更新您感兴趣的值并保存上下文。

因此，例如：

```
NSFetchRequest* fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"YourEntityName"];
// set the predicate (it's equal to set a WHERE SQL clause) filtering on the name for example
// use camel case notation if possible, so instead of Name use name (for this you have to changes your model, if you don't want to do it use Name)
[fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"name == %@", @"Joseph"]];

NSError* error = nil;
NSArray* results = [context executeFetchRequest:fetchRequest error:&error];
// do some error checking here...
for (NSManagedObject resultItem in results) {

    // use KVC (for example) to access your object properties
    [resultItem setValue:@"myName" forKey:@"name"];
}

// save your context here
// if you don't save, changes are not stored 
```

要打印，您需要创建一个新的`NSFetchRequest`，抓取对象（类型`NSManagedObject`）并使用`NSLog`.

例如：

```
NSFetchRequest* fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"YourEntityName"];

NSError* error = nil;
NSArray* results = [context executeFetchRequest:fetchRequest error:&error];
// do some error checking here...
for (NSManagedObject resultItem in results) {

    NSLog(@"%@", [resultItem valueForKey:@"name"]);
} 
```

PS 我提供的代码非常简单，我用于特定值的谓词检查`name`. 由于这可能容易出错，我会修改模型并为您需要使用的每个对象使用一种[guid](http://en.wikipedia.org/wiki/Globally_unique_identifier)（我不知道 id 是否适用，但我会将其名称更改为另一个名称，例如`userId`）。完成后，您可以对其进行检查。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T07:28:12.510

It's as simple as retrieving the `NSManagedObject` and changing the `Name` property. You can retrieve the `NSManagedObject` with a fetch request. Once you changed the property and you want to keep it changed even when you close the application you'll have to do a `save` on the `managedObjectContext`.

You'll have to read over the documentation to get up to speed on core data: [http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/Articles/cdBasics.html#//apple_ref/doc/uid/TP40001650-TP1](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/Articles/cdBasics.html#//apple_ref/doc/uid/TP40001650-TP1)

Edit: just `NSLog` whatever you want to know, for example log you fetch request results.

# struts2 - Struts 2 使用 tokenSession 拦截器在提交后无法获取表单值

> ID：12293984
> 
> 赞同：0
> 
> 时间：2012-09-06T06:13:59.150
> 
> 标签：struts2, token

我有以下用于登录和安全登录的简单代码。对于安全登录，我在提交表单时使用了 tokenSession 拦截器。在success.jsp 中，如果我提交secureLogin 但对Login 没问题，我将无法获得userId 值。任何人都可以帮助我这是什么原因。

```
<%@ taglib prefix="s" uri="/struts-tags" %>
<html>
 <body><LOGIN.JSP>
  <s:form action="login" >
  <s:textfield name="userId" label="Login Id"/><br>
  <s:password name="password" label="Password"/><br>
     <s:submit value="Login" align="center"/>
 </s:form>
  <s:form action="secureLogin" >
  <s:textfield name="userId" label="Login Id"/><br>
  <s:password name="password" label="Password"/><br>
  <s:token />
     <s:submit value="secureLogin" align="center"/>
  </s:form>
 </body>
</html>

<struts>
  <package name="default" extends="struts-default">
     <interceptors>
       <interceptor name="tokenSession" class = "org.apache.struts2.interceptor.TokenSessionStoreInterceptor" />
       </interceptors>
   <global-results>
       <result name="invalid.token">/error.jsp</result>
    </global-results>
   <action name="secureLogin" class="com.actions.HelloAction" method="secureLogin">
     <result name="success">/success.jsp</result>
     <result name="failure">/login.jsp</result>
     <interceptor-ref name="tokenSession" />
   </action>
   <action name="login" class="com.actions.HelloAction" method="login">
      <result name="success">/success.jsp</result>
      <result name="failure">/login.jsp</result>
   </action>
   </package>   
 </struts>

  package com.actions;

  public class HelloAction {
    private String userId;
    private String password;

    public String execute() {
    return "success";
    }

   public String login(){
    return "success";
   }

   public String secureLogin(){
    return "success";
   }

   public String getUserId() {
    return userId;
   }

   public void setUserId(String userId) {
    this.userId = userId;
   }

   public String getPassword() {
    return password;
   }

   public void setPassword(String password) {
    this.password = password;
   }

     }

  <%@ taglib prefix="s" uri="/struts-tags" %>

 <html>
 <head>
       <title>SUCCESS.JSP</title>
 </head>
  <body>

   Welcome <b><s:property value="userId"/></b> , you have loged  in. <br />
          </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T07:24:54.727

你需要一个`interceptor-stack`

```
<struts>
  <package name="default" extends="struts-default">
     <interceptors>
       <interceptor name="tokenSession" class = "org.apache.struts2.interceptor.TokenSessionStoreInterceptor" />
       <interceptor-stack name="yourStack">
          <interceptor-ref name="defaultStack"/>
          <interceptor-ref name="tokenSession"></interceptor-ref>
       </interceptor-stack>
       </interceptors>
       <default-interceptor-ref name="yourStack"/>
       <global-results>
           <result name="invalid.token">/error.jsp</result>
        </global-results>
   </package>   
 </struts> 
```

这是一个链接：[拦截器](http://struts.apache.org/2.3.4/docs/interceptors.html)

# iphone - 在 Xcode 4.3.2 中导航一个屏幕到另一个屏幕的问题？

> ID：12293985
> 
> 赞同：0
> 
> 时间：2012-09-06T06:14:12.777
> 
> 标签：iphone, xcode, uinavigationcontroller, push

目前我正在使用简单的 iPhone 应用程序，使用 Xcode 4.3.2 创建它，（不使用情节提要）当我将一个屏幕导航到另一个屏幕时，发现错误 Thread1: EXC_BAD_ACCESS(code=1.address=0x7669739)，同样我使用故事板将一个屏幕导航到另一个屏幕，它工作正常。如何解决这个问题，请帮助我

提前致谢

我试过这个（不使用 StoryBoard）

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.title=@"Screen 1";

    UIButton *btn =[UIButton buttonWithType:UIButtonTypeRoundedRect];
    btn.frame=CGRectMake(10, 10, 200, 40);
    [btn setTitle:@"Test" forState:UIControlStateNormal];
    [btn addTarget:self action:@selector(GoToMethod) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:btn];
    // Do any additional setup after loading the view from its nib.
}

-(void)GoToMethod
{
    sample2 *s2 =[[sample2 alloc]init];
    [self.navigationController pushViewController:s2 animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T06:20:01.687

您可以从开发人员文档或搜索 stackoverflow 中获得答案

```
 sample2 *s2 = [[sample2 alloc] initWithNibName:@"sample2" bundle:nil]; 
[self.navigationController pushViewController:s2 animated:YES]; 
```

您需要提及要加载的 nib/xib 名称。

# c++ - 编码竞赛：如何存储大数并求其所有组合模数 P

> ID：12293986
> 
> 赞同：2
> 
> 时间：2012-09-06T06:14:23.540
> 
> 标签：c++, math, combinations, modulus, largenumber

我已经开始做有竞争力的编程，大多数时候我发现数字的输入大小就像

```
 1 <= n <=  10^(500). 
```

所以我知道这就像 500 位数字，不能存储在简单的 int 内存中。我知道c和c++。

我想我应该使用一个数组。但后来我对如何找到

```
 if ( (nCr % P) == 0 )  //for all (0<=r<=n)// 
```

我认为我会将它存储在一个数组中，然后找到 nCr。这需要对数字进行乘法和除法编码，但是模数呢。

还有其他方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T06:19:29.567

我认为您不想自己编写乘法和除法代码，而是使用 GNU MP Bignum 库[http://gmplib.org/之类的东西](http://gmplib.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-31T09:11:49.233

如果我们必须计算 nCr mod p（其中 p 是素数），我们可以计算阶乘 mod p，然后使用模逆来找到 nCr mod p。如果我们必须找到 nCr mod m（其中 m 不是素数），我们可以将 m 分解为素数，然后使用中国剩余定理 (CRT) 找到 nCr mod m。

```
#include<iostream>
using namespace std;
#include<vector>

/* This function calculates (a^b)%MOD */
long long pow(int a, int b, int MOD)
{
    long long x=1,y=a; 
    while(b > 0)
    {
        if(b%2 == 1)
        {
            x=(x*y);
            if(x>MOD) x%=MOD;
        }
        y = (y*y);
        if(y>MOD) y%=MOD; 
        b /= 2;
    }
    return x;
}

/*  Modular Multiplicative Inverse
    Using Euler's Theorem
    a^(phi(m)) = 1 (mod m)
    a^(-1) = a^(m-2) (mod m) */
long long InverseEuler(int n, int MOD)
{
    return pow(n,MOD-2,MOD);
}

long long C(int n, int r, int MOD)
{
    vector<long long> f(n + 1,1);
    for (int i=2; i<=n;i++)
        f[i]= (f[i-1]*i) % MOD;
    return (f[n]*((InverseEuler(f[r], MOD) * InverseEuler(f[n-r], MOD)) % MOD)) % MOD;
}

int main()
{    
    int n,r,p;
    while (~scanf("%d%d%d",&n,&r,&p))
    {
        printf("%lld\n",C(n,r,p));
    }
} 
```

在这里，我使用 long long int 来表示数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T06:30:15.667

关于大量库，我使用[了 ttmath](http://www.ttmath.org/)，它提供了任意长度的整数、浮点数等，以及一些非常好的操作，而且体积相对较小。

但是，如果您只是想弄清楚 (n^e) mod m 是什么，即使没有非常大的数字计算，您也可以对非常大的 e 值执行此操作。下面是我添加到本地 ttmath 库中的一个函数：

```
/*!
        mod power this = (this ^ pow) % m
        binary algorithm (r-to-l)

        return values:
        0 - ok
        1 - carry
        2 - incorrect argument (0^0)
    */
    uint PowMod(UInt<value_size> pow, UInt<value_size> mod)
    {
        if(pow.IsZero() && IsZero())
        // we don't define zero^zero
        return 2;

        UInt<value_size> remainder;
        UInt<value_size> x = 1;

        uint c = 0;

        while (pow != 0)
        {
            remainder = (pow & 1 == 1);
            pow /= 2;
            if (remainder != 0)
            {
                c += x.Mul(*this);
                x = x % mod;                                
            }

            c += Mul(*this);
            *this = *this % mod;        
        }

        *this = x;
        return (c==0)? 0 : 1;
    } 
```

我不相信你需要为这个算法存储一个大于 n^2 的数字。如果您不想使用这些标头，应该很容易修改它以删除与 ttmath 相关的方面。

如果您关心的话，您可以通过查找[模幂运算在线找到数学的详细信息。](http://en.wikipedia.org/wiki/Modular_exponentiation)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-31T09:29:56.683

在许多。在这些编码比赛中，很多情况下，你的想法是你实际上并不计算这些大数字，而是在不计算的情况下弄清楚如何回答问题。例如：

```
What are the last ten digits of 1,000,000! (factorial)? 
```

这是一个超过五百万位的数字。但是，我可以不用电脑来回答这个问题，甚至不用笔和纸。或者问一个问题：什么是 (2014^2014) 模 153？这是在 C 中计算的一种简单方法：

```
int modulo = 1;
for (int i = 0; i < 2014; ++i) modulo = (modulo * 2014) % 153; 
```

同样，您避免使用 6,000 位数字进行计算。（你实际上可以更快地做到这一点，但我不是想参加比赛）。

# scala - 用于对象/类型安全配置的 Scala trait mixins

> ID：12293987
> 
> 赞同：4
> 
> 时间：2012-09-06T06:14:25.443
> 
> 标签：scala, config, akka

这是一个 OO 设计 Q。我在我的应用程序中使用类型安全配置。Config 接口非常有用，但是在我的应用程序中有几个字段；配置文件是必需的。我想做的是创建一个 Config 的子接口并添加这两个顶级方法。像这样的东西

```
trait AppConfig extends Config{
    def param1:String 
    def param2:String 
} 
```

但是，在给定 Config 实例的情况下创建 AppConfig 的真实实例似乎并不可行。（我不想创建包装器对象并复制 Config 接口上的所有方法）。理想情况下，我正在寻找可以实现接近此目标的东西

```
val conf:Config = //get config object from somewhere
return conf with AppConfig { overrider def param1 = {"blah"} } 
```

我明白最后一行是无效的。但我正在寻找具有等效功能的模式/结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T22:16:51.003

我们一直在使用[Configrity](https://github.com/paradigmatic/Configrity)来处理这样的事情。这是一个例子：

我们将用于单元测试/等的编译默认值保留在对象中

```
object DefaultConfigs {
  val defaultConfig = Configuration(
    "param1" -> "blah"
  )

  val otherConfig = Configuration(
    "param2" -> "blah"
  )

  val appConfig = defaultConfig.include(otherConfig)
} 
```

然后在运行时我们可以包含或不包含它们

```
val appConfig = Configuration.load(pathToConfig) include DefaultConfigs.appConfig 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T09:07:21.280

您正在寻找的基本上是一些人所说的“动态混合”。scala 不支持开箱即用。有人开发了一个编译器插件来支持这个：[http ://www.artima.com/weblogs/viewpost.jsp?thread=275588](http://www.artima.com/weblogs/viewpost.jsp?thread=275588)

但是它有点旧，该项目似乎不再活跃。

一个更好的选择是使用 scala 宏来实现这个特性（需要 scala 2.10，它还没有稳定的版本）。

不过，在您的情况下，所有这些都可能是矫枉过正。在一些经过良好测试的库可用之前，我建议只手动创建代理（尽管看起来很乏味）：

```
trait ConfigProxy extends Config {
  def impl: Config
  // Forward to the inner config
  def root: ConfigObject = impl.root
  def origin: ConfigOrigin = impl.origin
  //... and so on
}

val conf:Config = //get config object from somewhere
val myConf: AppConfig = new AppConfig with ConfigProxy { 
  val impl = conf
  val param1:String = "foo"
  val param2:String = "bar"
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T23:03:49.483

如何结合使用动态和反射。动态处理您的便利方法和反射处理配置上的方法。

这是一个刺：

```
class ConfigDynamic(val config: Config) extends Dynamic {
  def selectDynamic(name: String)= {
    name match {
      case "field1" => 
        config.getString("field1")
      case x @ _ =>
        // overly simplified here
        val meth = configClass.getDeclaredMethod(x)
        meth.invoke(config)
    }
  }
} 
```

# java - 为什么在这个 for 循环之后有一个分号？

> ID：12293988
> 
> 赞同：2
> 
> 时间：2012-09-06T06:14:34.313
> 
> 标签：java, for-loop

我遇到了这段代码

```
for(; tail < len;tail++){
        str[tail] = 0; 
```

为什么有一个“;” 就在“for(”之后？

当我把它拿出来时，它出现了几个错误。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-06T06:17:04.000

这意味着没有初始化（它已经在前面的行中完成了）。

通常，[for 循环](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html)具有以下语法：

```
for (initialization; termination; increment) {
    statement(s)
} 
```

所有三个表达式（初始化、终止和增量）都是可选的，但分号必须存在。您拥有的代码等效于以下 while 循环：

```
while (tail < len) {
    str[tail] = 0;
    tail++;
} 
```

* * *

在 for 循环中缺少所有三个表达式的情况也很常见：

```
for (;;) {
    // something
} 
```

这是一个无限循环，相当于：

```
while (true) {
    // something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T06:18:24.617

for 循环在其括号内接受三个参数：

第一个是启动块，您可以在其中创建仅在 for 循环范围内存在的变量（从左括号到右括号，或者在您的情况下为 for 循环之后的那一行）；

第二个是条件块，您可以在其中指定 for 循环应该运行的条件

第三是后处理块，在 for 循环中的每次迭代之后应该发生什么。

这些块用分号分隔，每一个都是可选的。

通常你有

```
for(int i=0; i<10; i++); 
```

但你可以拥有

```
int i =0;
for(; i<10; i++); 
```

你甚至可以有一个这样的循环：

```
for(;;); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T06:17:50.040

常规 for 循环的语法是`for (initialization; termination; increment)`. 因此，必须预先设置所有三个组件，以便 for 循环有效并编译。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T06:18:16.340

for 循环包含三个部分：

```
for (initialization; condition; update) 
```

其中任何部分都可以省略。

在您的示例中，没有初始化部分（假设`tail`并且`len`已经设置为合理的值）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T06:29:34.373

这是因为你有 for 循环语法

```
int tail; 
```

for(tail = 0;tail < len;tail++)
{
str[tail] = 0; }

第一个参数是初始化器，所以如果你已经初始化了变量，那么你保持空初始化器空间并放置分号。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-06T06:22:12.613

```
for(initialize the variable; condition to variable;increment in variable);

for (;condition;increment); 
```

意味着这里没有初始化。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-06T06:17:14.960

这意味着您不初始化任何东西。通常，它类似于

```
for(i=1;i<something;i++) 
```

在您的情况下，部分`i=1`（初始化）被省略，这是完全正确的。但是，必须有分号来分隔 for 循环的初始化部分和条件部分。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-06T06:17:55.747

tail 必须在代码中 for 上方的某个位置初始化。这不是语法错误，它只是一个没有初始化的 for。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-06T06:18:07.777

定义的 for 循环意味着该变量`tail`先前已被声明（并希望被初始化）

# css - css下拉问题

> ID：12293990
> 
> 赞同：-2
> 
> 时间：2012-09-06T06:14:39.157
> 
> 标签：css

那里！我被一个简单的 CSS 下拉菜单困住了。您可以在下面的链接中看到代码。我的问题是，当我在用户名之前放置一些链接时，由于悬停在下拉菜单上，它无法使用。我需要仅在将鼠标悬停在用户名而不是整个#userdrop div 时触发下拉菜单。请注意，z-index 属性不是我的解决方案。

[http://k-prim.biz/ttpm/demo.html](http://k-prim.biz/ttpm/demo.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T06:18:21.060

这是因为#user 上的绝对定位。失去它，并切换到浮动：右，带有一些边距（或其他东西），这应该会自行解决。

改变这个：

```
#user{
    position:absolute;right:30px; top:5px;  
    text-align:right;
    width: 202px;
    overflow: hidden;
} 
```

对此：

```
#user{
    float:right;right:30px; top:5px;  
    text-align:right;
    width: 202px;
    overflow: hidden;
} 
```

我刚刚更改`position:absolute`为`float:right`，它工作得很好，除了需要对边距进行微调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T06:31:31.783

根据此代码替换css和锚标记

```
#link {
    display: block;
    height: 20px;
    position: absolute;
    right: 124px;
    top: 5px;
}

#user {
    overflow: hidden;
    position: absolute;
    right: 30px;
    text-align: right;
    top: 5px;
    width: 202px;
    z-index: -1;
}

<a href="#" style="display: block; height: 28px; text-align: right; width: 76px;">Link here</a> 
```

有小提琴[http://jsfiddle.net/7jexs/2/](http://jsfiddle.net/7jexs/2/)

# core-animation - CALayer renderInContext：绘图的位置

> ID：12293996
> 
> 赞同：16
> 
> 时间：2012-09-06T06:15:09.280
> 
> 标签：core-animation, calayer, drawrect, cgcontext

我有一个`UIView`带有自定义形状的`drawRect:`. `frame`属性设置为：

```
{5.f, 6.f, 50.f, 50.f} 
```

现在，我在图像上下文中渲染视图，但它忽略了 的 frame 属性，并始终在左上角`UIView`绘制。`UIView`

```
[_shapeView.layer renderInContext:UIGraphicsGetCurrentContext()]; 
```

我试图改变 的`frame`，`CALayer`但没有任何改变。修改`bounds`属性使事情变得更糟。我发现有用的唯一解决方法是：

```
CGRect frame = _shapeView.frame;
CGContextTranslateCTM(context, frame.origin.x, frame.origin.y);
[_shapeView.layer renderInContext:context]; 
```

但是，当我处理许多形状时，这是不切实际的，我只想使用 frame 属性。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-07T14:33:05.657

使用`CGContextTranslateCTM`是正确的方法。正如`renderInContext:` [文档](https://developer.apple.com/documentation/quartzcore/calayer/1410909-renderincontext)所述：“在图层的坐标空间中渲染。” 这意味着您的图层/视图的框架原点被忽略。

关于`CGContextDrawLayer`，它不是与 一起使用的`CALayer`，而是与 一起使用的`CGLayer`。这是两个非常不同的事情，并解释了您的崩溃。

# c# - 尝试针对角色进行身份验证时出现网络相关错误？

> ID：12293998
> 
> 赞同：1
> 
> 时间：2012-09-06T06:15:14.533
> 
> 标签：c#, asp.net-mvc, forms-authentication

我觉得问这个很傻，但是嘿，它正在发生。

我正在使用以下方法验证我的 MVC 控制器：

```
Authorize[Roles="Admin"] 
```

我有一个这样的自定义身份，其中正确填充了角色：

```
public class AppIdentity : IIdentity
{
    public AppIdentity(string fullName, Guid id, string[] roles)
    {
        Name = fullName;
        Id = id;
        Roles = roles;
    }

    public AppIdentity(FormsAuthenticationTicket ticket)
    {
        if (ticket == null || ticket.Name == null)
        {
            throw new ArgumentNullException("ticket");
        }

        string[] data = ticket.Name.Split(new[] { "||" }, StringSplitOptions.None);
        Name = data[0];
        Id = new Guid(data[1]);
        Roles = data[2].Split(',');
    }

    public string[] Roles { get; set; } 
```

我像这样在我的全局中进行身份验证：

```
 protected void Application_AuthenticateRequest(object sender, EventArgs e)
    {
        var cookie = Request.Cookies[FormsAuthentication.FormsCookieName];
        var ticket = TryDecryptCookie(cookie);

        if (ticket != null)
        {
            var identity = new AppIdentity(ticket);
            var principal = new GenericPrincipal(identity, identity.Roles);

            Context.User = principal;
        } 
```

在这一点上，这一切似乎都很好，cookie 在那里，使用角色正确创建身份等。

但是当我点击控制器时，它似乎试图在我的 appdata 文件夹中创建一个数据库，但出现以下错误：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）

我已经从我的 web.config 中删除了所有 Membership 提供者的东西，所以？为什么要这样做？

谢谢。

多一点：

这是来自 AuthorizeAttribute：

```
IPrincipal user = httpContext.User;
        if (!user.Identity.IsAuthenticated || this._usersSplit.Length > 0 && !Enumerable.Contains<string>((IEnumerable<string>) this._usersSplit, user.Identity.Name, (IEqualityComparer<string>) StringComparer.OrdinalIgnoreCase) || this._rolesSplit.Length > 0 && !Enumerable.Any<string>((IEnumerable<string>) this._rolesSplit, new Func<string, bool>(user.IsInRole)))
          return false;
        else
          return true; 
```

你可以看到它询问 IPrinciple 是否在角色中。

在 GenericPrinciple 类中：

```
for (int index = 0; index < this.m_roles.Length; ++index)
        {
          if (this.m_roles[index] != null && string.Compare(this.m_roles[index], role, StringComparison.OrdinalIgnoreCase) == 0)
            return true;
        } 
```

所以它真的不应该尝试连接到数据库对吗？