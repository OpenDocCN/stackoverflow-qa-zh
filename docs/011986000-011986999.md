# StackOverflow 问答 11986000-11986999

# vb.net - NSubstitute 和模拟一个对象来触发一个事件

> ID：11986001
> 
> 赞同：3
> 
> 时间：2012-08-16T11:17:55.370
> 
> 标签：vb.net, mocking, vb.net-2010, nsubstitute

我目前正在使用 NSubstitute 作为我的模拟框架，并且我做得相当不错，除了一个例外是......

我试图模拟从我的模拟对象内部调用事件的交互，不幸的是我真的很难做到这一点。设置是这样的......

```
Public Interface IMockObject
    Event MyMockedEvent( someId as Integer )
    Sub MyRoutineThatInvokesMyMockedEvent( someId as Integer)
End Interface 
```

...所以在我的单元测试中，我需要模拟“MyRoutineThatInvokesMyMockedEvent”以接收 ID，然后引发“MyMockedEvent”。到目前为止，我已经想出了...

```
Dim mockedObject = Substitute.For(Of IMockObject)()
mockedObject.When(
    Sub(x) x.MyRoutineThatInvokesMyMockedEvent( 999 )).Do( 
        Sub(y) 'RaiseTheEventHere ) 
```

...但我坚持*实际上*提出了以下无效的事件...

```
mockedObject.When(
    Sub(x) x.MyRoutineThatInvokesMyMockedEvent( 999 )).Do( 
        Sub(y) RaiseEvent MyMockedEvent(999) ) 
```

...我确实有一个理论，这在 VB.NET 中可能是不可能的（不创建辅助例程），但很乐意感谢任何有关如何在没有辅助例程的情况下实现上述目标的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:59:55.083

好的，找到答案了。或者类似的东西。

我认为问题是由于使用的事件定义 - 通过重新配置“MyMockedEvent”以使用其自己的“MyMockedEventArgs”（继承自 System.EventArgs），可以引发事件而不会抱怨通过不适当的类型。

```
mockedObject.When(
    Sub(x) x.MyRoutineThatInvokesMyMockedEvent( 999 )).Do( 
        Sub(y) RaiseEvent IMockObject.MyMockedEventEventHandler() ) 
```

但是在这里，我怀疑 VB.NET 做了一些黑魔法，因为我知道 VB.NET 会在幕后为事件创建代表。当然，Intellisense 不显示 EventHandler 的事实也没有特别的帮助，我猜我可以手动编写委托，但这种方法似乎更快。

高温高压

# ios - ASIHTTPRequest 设置下载目标路径失败

> ID：11986004
> 
> 赞同：1
> 
> 时间：2012-08-16T11:17:59.683
> 
> 标签：ios, ipad, asihttprequest

我有一个查找某个 pdf 的方法，如果它在本地找不到它，它会使用`ASIHTTPRequest`它来异步下载它。但是，当以下行： `[request setDownloadDestinationPath:currentDetailItem];` 未注释时，请求总是失败，请求开始并且进度增加直到 100%，然后执行请求失败块。

这些是请求失败时的相关 NSLog：

```
2012-08-16 12:08:34.398 XXXX[1675:707] Request started with url :http://XXXX.com/gwas/sites/default/files/Responding%20to%20Severe%20Weather%20Events.pdf
filePath :/var/mobile/Applications/322C24CF-9664-403D-9CC5-13C396F39F84/Documents/Responding%20to%20Severe%20Weather%20Events.pdf
2012-08-16 12:08:39.018 XXXX[1675:707] Request failed:HTTP/1.1 200 OK 
```

这是该方法的代码：

```
- (void)setDetailItem:(NSString *)newDetailItem {
    NSArray *downloadPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSArray *components = [newDetailItem componentsSeparatedByString:@"/"];
    NSString *filePath = [[downloadPaths objectAtIndex:0] stringByAppendingFormat:@"/%@", [components lastObject]];
    currentDetailItem = filePath;

    if (![self fileExistsLocally:[components lastObject]]) {
        //Download the file
        [self displayProgressView];
        ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:newDetailItem]];
        [request setDownloadDestinationPath:currentDetailItem];
        [request setDownloadProgressDelegate:progressBar];
        [request setCompletionBlock:^
         {
             [self showPdf:currentDetailItem];
             [self hideProgressView];
             NSLog(@"%f, Request finished :%@", progressBar.progress, request.responseStatusMessage);
         }];
        [request setFailedBlock:^
         {
             NSLog(@"Request failed:%@", request.responseStatusMessage);
             [self hideProgressView];
             [SVProgressHUD showErrorWithStatus:@"Request failed"];
         }];
        [request startAsynchronous];

        NSLog(@"Request started with url :%@\nfilePath :%@", newDetailItem, currentDetailItem);
    }
    else {
        [self showPdf:currentDetailItem]; 
    }
} 
```

如果我注释掉该行`[request setDownloadDestinationPath:currentDetailItem];`，则请求成功。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:44:33.370

对于任何感兴趣的人，我通过切换到 NSURLConnection 解决了这个问题，代码如下：

```
- (void)setDetailItem:(NSString *)newDetailItem {
    NSArray *downloadPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSArray *components = [newDetailItem componentsSeparatedByString:@"/"];
    NSString *filePath = [[downloadPaths objectAtIndex:0] stringByAppendingFormat:@"/%@", [components lastObject]];
    currentDetailItem = filePath;

    if (![self fileExistsLocally:[components lastObject]]) {
        [self displayProgressView];
        data_ = [[NSMutableData alloc] init];
        NSURLRequest *urlRequest = [NSURLRequest requestWithURL:[NSURL URLWithString:newDetailItem] cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];
        NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:urlRequest delegate:self startImmediately:YES];
        if (!connection) {
            [SVProgressHUD showErrorWithStatus:@"Request failed"];
            return;
        }
        else {
            data_ = [[NSMutableData alloc] init];
        }
    }
    else {
        [self showPdf:currentDetailItem]; 
    }
}

#pragma mark NSURLConnectionDelegate methods

- (void)connection: (NSURLConnection*) connection didReceiveResponse: (NSHTTPURLResponse*) response
{
    if ([response statusCode] == 200) {
        currentDownloadSize = [response expectedContentLength];
    }
    [data_ setLength:0];
}

- (void) connection: (NSURLConnection*) connection didReceiveData: (NSData*) data
{
    [data_ appendData:data];
    progressBar.progress = ((float) [data_ length] / (float) currentDownloadSize);

}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    //Save file locally
    NSURL *url = [NSURL fileURLWithPath:currentDetailItem];
    NSError *error = nil;
    [data_ writeToURL:url options:0 error:&error];
    if (error) {
        NSLog(@"Write failed with error:%@", error);
    }
    else {
        NSLog(@"Request successful");
        [self showPdf:currentDetailItem];
    }

    [self hideProgressView];
}

- (void)connection:(NSURLConnection *)connection
  didFailWithError:(NSError *)error
{
    [self hideProgressView];
    [SVProgressHUD showErrorWithStatus:@"Request failed"];
    NSLog(@"Connection failed! Error - %@ %@",
          [error localizedDescription],
          [[error userInfo] objectForKey:NSURLErrorFailingURLStringErrorKey]);
} 
```

# python - 从多个线程获取结果的更好方法

> ID：11986005
> 
> 赞同：4
> 
> 时间：2012-08-16T11:18:09.417
> 
> 标签：python, multithreading, queue

我想要做的是能够调用具有多个线程的函数并获得它们的结果。

我有以下代码：

（这是一个例子，实际代码不会简单地将 str 转换为 int）

```
from threading import Thread
import time
import Queue

#an example - actual code connects to a server
def str_to_int(arg, queue):
    result = 0
    result = int(arg)
    #sleep to check that they happen at once.
    time.sleep(10)
    queue.put(result)

def combine():
    q1 = Queue.Queue()
    q2 = Queue.Queue()
    q3 = Queue.Queue()

    t1 = Thread(target = str_to_int, args=("111", q1))
    t2 = Thread(target = str_to_int, args=("222", q2))
    t3 = Thread(target = str_to_int, args=("333", q3))

    t1.start()
    t2.start()
    t3.start()

    t1.join()
    t2.join()
    t3.join()

    return (q1.get(),q2.get(),q3.get())

print combine() 
```

此代码有效。我得到了预期的结果：

```
>>> 
(111, 222, 333) 
```

但是，必须有更好的方法来做到这一点。我计划拥有比 3 更多的线程，但即使我只使用 3 - 它看起来也很丑陋。

**编辑：**我需要能够知道哪个结果来自哪个线程（即：我给函数的参数/参数）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T11:31:39.120

这里有一些建议：

1.  `Queue`是线程安全的，所以使用 1 个队列来传递结果。
2.  您可以在一个循环中创建所有线程并使用您的队列来传递结果。您不需要为每个线程都有显式变量。

因此，您的代码可能如下所示：

```
def str_to_int(arg, queue):
    result = int(arg)
    queue.put({arg: result})

def combine():
    arguments = ('111', '222', '333')
    q = Queue.Queue()
    threads = []

    for argument in arguments:
        t = Thread(target=str_to_int, args=(argument, q))
        t.start()
        threads.append(t)

    for t in threads:
        t.join()

    return [q.get() for _ in xrange(len(arguments))] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-03T21:26:35.853

> 我需要能够知道哪个结果来自哪个线程（即：我给函数的参数/参数）

我使用这样的函数来跟踪哪个结果来自哪个任务：

```
from threading import Thread
import typing

def run_together(tasks: typing.Dict[typing.Hashable, tuple],
                 except_errors: tuple = None) -> dict:
    """
    :param tasks: a dict of task keys matched to a tuple of callable and its arguments
    <pre>tasks = {'task1': (add, 1, 2), 'task2': (add, 3, 4)}</pre>

    :param except_errors: a tuple of errors that should be catched. Defaults to all errors 
    :return: a dictionary of results with the same keys as `tasks` parameter
    <pre>results = {'task1': 3, 'task2': 7}</pre>
    """
    # catch all exceptions by default
    if not except_errors:
        except_errors = (Exception,)
    threads = []
    results = dict()

    def save_results(f, key):
        def wrapped(*args, **kwargs):
            try:
                result = f(*args, **kwargs)
            except except_errors as e:
                result = e
            results[key] = result

        return wrapped

    for key, (func, *args) in tasks.items():
        thread = Thread(
            target=save_results(func, key),
            args=args
        )
        thread.start()
        threads.append(thread)

    for t in threads:
        t.join()

    return results 
```

`tasks`参数是一个键字典和一个可调用元组及其参数。如果需要，您可以修改`save`装饰器以返回 a `list`。

所以你可以这样做：

```
def add(first, second):
    return first + second

tasks = {f'result:{n}': (add, n, 1) for n in range(4)}
results = run_together(tasks)
print(results) 
```

这使：

```
{'result:0': 1, 'result:1': 2, 'result:2': 3, 'result:3': 4} 
```

# android - 滚动功能

> ID：11986007
> 
> 赞同：1
> 
> 时间：2012-08-16T11:18:19.737
> 
> 标签：android, listview, android-layout, gridview, scrollview

我需要实现这样的用户界面：

![在此处输入图像描述](../Images/1f4c665110bce6ab8cb3f65ca904c153.png)

在上面的屏幕`row needs to be scrolled horizontally`和`columns need to be scrolled vertically`.

我没有使用画廊，因为它已被弃用。以下是我尝试过的一些场景：

**1**、GridView和ListView的结合。

**2**、ListView与水平ListView的结合（自定义组件）。

`Option 1`对我不起作用，但我可以用`option 2`. 使用选项 2 性能不佳。

**解决方案：**我正在考虑实施`4-5 horizontal listviews inside scrollview with Gestures`，以便我可以通过代码或通过`subclassing the ScrollView and overriding the onScrollChanged method`.

但我正在寻找一些更优化的解决方案。

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:45:50.873

使用 webview 并通过 JS 钩子将内容推送到其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:05:32.073

如果有人可以提出更好的解决方案，我已经采用了我的解决方案，那么显然我会采用它：

**解决方案：**

> 使用手势在滚动视图内实现 4-5 个水平列表视图，并通过代码或通过子类化 ScrollView 并覆盖 onScrollChanged 方法来处理垂直滑动。

# java - Java标准限制列的总和低于值

> ID：11986011
> 
> 赞同：0
> 
> 时间：2012-08-16T11:18:31.647
> 
> 标签：java, sql, criteria, restrictions

您好我有一个关于将简单的 SQL 语句转换为 java hibernate 限制的问题。

**SQL：**

```
SELECT a + b FROM col WHERE a + b < 10 
```

当我尝试将其转换为标准时，我得到：

```
Criteria criteria = createCriteria();
criteria.createAlias("col","col").add(Restrictions.lt("a+b",10)); 
```

但似乎该字符串`"a+b"`不被接受。我如何写我的限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T11:58:06.697

这可能是因为 Hibernate 试图将*a+b*解析为您的实体的属性，而您得到

```
org.hibernate.QueryException：无法解析属性：a+b
```

可能的解决方案很少：

**第一：sql限制：**

```
//Hibernate 4.x
criteria.add(Restrictions.sqlRestriction("col_a+col_b < ?", Integer.valueOf(10), org.hibernate.type.StandardBasicTypes.INTEGER);

// Hibernate 3.x
criteria.add(Restrictions.sqlRestriction("col_a+col_b < ?", Integer.valueOf(10),       org.hibernate.Hibernate.INTEGER); 
```

有一个问题是您必须使用列名而不是属性名。

**第二：公式：**

*使用@Formula*注释向您的实体添加一个虚拟列：

```
@org.hibernate.annotations.Formula("a + b")
private int aSumB; 
```

并将其用作标准属性：

```
criteria.add(Restrictions.lt("aSumB", Integer.valueOf(10)); 
```

**第三个自定义标准：**

如果您经常使用它，请考虑通过实现*org.hibernate.criterion.Criterion创建自定义标准*

# c# - 点击webcontrol的提交数据后获取Post数据

> ID：11986012
> 
> 赞同：0
> 
> 时间：2012-08-16T11:18:34.807
> 
> 标签：c#, firebug, web-controls, postdata

我使用 webcontrol 来查看网站内容表单。例如，从任何注册站点单击任何表单的提交按钮后。如何像萤火虫一样获取帖子数据？

这是我通过萤火虫获得的示例帖子数据

> sitetitle=[$PostTitle$]¬ify=B&noprice=1&sitedescription=[$PostContent$]&sitecatid=11&subcatid=85&expire_days=29&cityid=1&subcity=Ba+%C4%90%C3%ACnh&submit_post=%C4%90%C4%83ng+tin&v=&siteid =&mode=&flag=&lptime=1345045566&quickpost=0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:57:56.583

```
var context = HttpContext.Current;
var data = context.Request["expire_days"]; 

//Theses lines permit your to return expire_day 
```

# javascript - chrome.storage.local["mykey"] is undefined

> ID：11986013
> 
> 赞同：8
> 
> 时间：2012-08-16T11:18:39.197
> 
> 标签：javascript, google-chrome, google-chrome-extension

I am making a Chrome extension where I will store the password from the user in local storage. I am storing it in `popup.js` using

```
chrome.storage.local["mykey"] = "xxx"; 
```

When I use `chrome.storage.local["mykey"]`, I'm getting `undefined`. Can you tell me how to store and retrieve user data in a Chrome extension?

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-16T13:28:53.800

根据[`chrome.storage`API](http://developer.chrome.com/dev/extensions/apps/storage.html)，存储值的正确方法是`.set`：

```
chrome.storage.local.set({"mykey": someData}, optionalCompletionCallback); 
```

稍后要访问该值，请`.get`与接受数据的回调一起使用：

```
chrome.storage.local.get("mykey", function(fetchedData) {
    alert("fetched: " + fetchedData.mykey);
}); 
```

# javascript - Data binding issue with knockout and revealing module pattern

> ID：11986020
> 
> 赞同：0
> 
> 时间：2012-08-16T11:19:09.913
> 
> 标签：javascript, knockout.js

I am having trouble getting data binding to work with Knockout when using revealing module pattern.

my javascript is like this

```
var HMS = HMS || {};

$(function () {

    HMS.PatientModel = function () {
        this.Patient_Name = ko.observable();
        this.Patient_Address = ko.observable();
    };

    HMS.PatientViewModel = function () {
        var patient = ko.observable(),
        loadPatient = function () {
            patient = new HMS.PatientModel();
            patient.Patient_Name("Premkumar");
        };
        return {
            patient: patient,
            loadPatient: loadPatient
        };
    } ();

    HMS.PatientViewModel.loadPatient();
    ko.applyBindings(HMS.PatientViewModel);

}); 
```

I am unable to get the data binding to work with patient name properly. The HTML div tag has `data-bind="text:patient.Patient_Name"`.

Please refer to the code in jsFiddle [http://jsfiddle.net/stprem/pp9ym/1/](http://jsfiddle.net/stprem/pp9ym/1/). I would appreciate if you could tell me what I am doing wrong in data binding.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T11:57:46.773

在您的`loadPatient`函数中，您正在用`patient`新对象替换变量，但您的模块已经返回了对原始 observable 的引用。因此，以这种方式更新它不会更新对象返回的内容。

这是一个选项：http: [//jsfiddle.net/rniemeyer/pp9ym/6/](http://jsfiddle.net/rniemeyer/pp9ym/6/)

基本上，您将其保留`patient`为可观察对象，然后在您的`loadPatient`函数中对其进行更新。在您看来，使用`with`绑定可以帮助您防止对象为空，以防您在调用`ko.applyBindings`.

# objective-c - 将大量联系人添加到 iPhone 联系人列表中

> ID：11986022
> 
> 赞同：0
> 
> 时间：2012-08-16T11:19:18.257
> 
> 标签：objective-c, contacts

我正在开发 1 iPhone 联系人相关的应用程序。要检查开销，我必须添加大量联系人。有没有办法在不手动输入数据的情况下做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:27:30.103

[您可以使用此解决方案](https://stackoverflow.com/questions/901132/importing-addressbook-data-into-the-iphone-simulator?answertab=votes#tab-top)将许多联系人添加到您的模拟器，将许多联系人添加到您的设备，只需在 mac 上设置它们并通过 gmail oder iCloud 同步它们。

# c++ - C ++如何执行添加新值并可以删除现有值的循环

> ID：11986030
> 
> 赞同：0
> 
> 时间：2012-08-16T11:20:06.603
> 
> 标签：c++

感谢您阅读这个问题。

基本上我正在尝试做一个可以实现以下目标的代码：

用户将看到这样的详细信息列表

终端视图：

```
Please select the department you want to add participant: 
1\. Admin 
2\. HR 
3\. Normal 
4\. Back to Main Menu 

Selection: 3
normal's Department
 UserID: 85 [ Name: Andrew, Department:  normal ]
 UserID: 86 [ Name: Jacky, Department:  normal ]
 UserID: 90 [ Name: Baoky, Department:  normal ]

Current Selected Participant : 

Usage: 
Type exit to return to main menu
Type remove userid to remove participant
Type add userid to add participant

Selection: 
```

问题是：我希望能够让用户添加任意​​数量的参与者，直到他决定“退出”到主菜单，但是我如何将它存储在字符串参与者中。

如何检测用户输入是“删除用户标识”或“添加用户标识”，然后获取用户标识

例如加 86 然后他加 90

然后他决定删除90

字符串如何跟上它

下面是我的代码：

```
do
{
cout << "Current Selected Participant : " << participant << endl; 
cout << "" << endl;

do
{
if(counter>0)
{
//so it wont print twice
cout << "Usage: " << endl; 
cout << "Type exit to return to main menu" << endl;
cout << "Type remove userid to remove participant" << endl;
cout << "Type add userid to add participant" << endl;
cout << "" << endl;
cout << "Selection: ";
}

getline(cin,buffer);
counter++;
}while(buffer=="");

if(buffer.find("remove"))
{
str2 = "remove ";
buffer.replace(buffer.find(str2),str2.length(),"");

if(participant.find(buffer))
{
//see if buffer is in participant list
buffer = buffer + ",";
participant.replace(participant.find(buffer),buffer.length(),"");
}
else
{
cout << "There no participant " << buffer << " in the list " << endl;
}
}//buffer find remove keyword

if(buffer=="exit")
{
done=true;
}
else
{
sendToServer = "check_account#"+buffer;

write (clientFd, sendToServer.c_str(), strlen (sendToServer.c_str()) + 1);
//see if server return found or not found
readFromServer = readServer (clientFd);

if(readFromServer=="found")
{
//add to participant list
participant += buffer;
participant += ",";
}

}//end if not exit

}while(done!=true); 
```

一些用户建议我存储在字符串集中，如何存储在字符串集中，以及如何使终端能够识别选择中的“删除”和“添加”等关键字

然后获取由空格分隔的用户ID。

接下来是如果我存储在字符串集中如何删除以及如何将新值推入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:23:45.093

不要将其存储在字符串中。将其存储在一个易于插入和删除的集合中，例如`std::set<int>`. 该过程完成后，您可以将集合转换为您认为需要的任何表示形式。

这是一个非常简单的示例（未检查它是否编译和运行；留给读者作为练习！）

```
void handle_command(const std::string& command, std::set<std::string>& userids)
{
    if (command.substr(0, 4) == "add ")
    {
        std::string uid = command.substr(4);

        if (userids.find(uid) == userids.end())
            userids.insert(uid);
        else
            std::cout << "Uid already added" << std::endl;

        return;
    }
    else
        throw std::exception("Unsupported command, etc");
} 
```

# internet-explorer - Hide standard background when using AlphaImageLoader filter in IE

> ID：11986034
> 
> 赞同：1
> 
> 时间：2012-08-16T11:20:43.237
> 
> 标签：internet-explorer, css

please how to hide standard background image from IE when `filter: progid:DXImageTransform.Microsoft.AlphaImageLoader()` is applied? I am using it for bacground-size support in IE..CSS looks like this

```
 background: url('../img/visit_ok.png') no-repeat center center;
    .background-size(contain);   //LESS mixin   
    filter:  progid:DXImageTransform.Microsoft.AlphaImageLoader(
            src='img/visit_ok.png',
            enabled=true,
            sizingMethod='scale');
    -ms-filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(
            src='img/visit_ok.png',
            enabled=true,
            sizingMethod='scale'); 
```

The problem is in IE both images are displayed..On top is correctly scaled background form the filter, but underneath is the standard non-scaled png..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:42:46.220

您也许可以在仅 IE 的样式表中隐藏常规背景。将此代码放在页面的 HEAD 中，并包含一个 IE 样式表链接或将 CSS 直接放在页面上。

```
<!--[if IE]>
    Special instructions for IE here
<![endif]--> 
```

# mysql - 选择使用不同的 mysql 进行更新

> ID：11986038
> 
> 赞同：1
> 
> 时间：2012-08-16T11:20:56.543
> 
> 标签：mysql, sql

我有下表：

```
ID, initials, surname, company, active
1, p, abc, com1, 0
2, p, abc, com1, 0
3, c, acb, com1, 0
4, c, def, com1, 0
5, c, def, com1, 0 
```

现在我想将“姓名首字母、姓氏、公司”的重复组合更新为状态1，结果如下：

```
ID, initials, surname, company, active
1, p, abc, com1, 0
2, p, abc, com1, 1
3, c, acb, com1, 0
4, c, def, com1, 0
5, c, def, com1, 1 
```

选择正在工作：

```
SELECT DISTINCT initials, surname, company
FROM table 
```

我试过这个，但不工作：

```
UPDATE table
SET active = 1
WHERE EXISTS( SELECT DISTINCT initials, surname, company) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T11:25:12.253

```
UPDATE table AS t
  JOIN table AS tt
    ON t.initials = tt.initials
     AND t.surname = tt.surname
     AND t.company = tt.company
     AND t.id > tt.id
SET t.active = 1; 
```

也就是说，对于每一行，如果存在具有较低 id 且具有相同首字母、姓氏和公司的另一行，则对其进行更新。

这是一个[sqlfiddle](http://sqlfiddle.com/#!2/6e46b/1)。

# ios - 相同的代码一个给出错误，另一个在 iOS 中没有

> ID：11986041
> 
> 赞同：0
> 
> 时间：2012-08-16T11:21:10.430
> 
> 标签：ios, error-handling

对于我自己的项目，我使用了`AGImagePickerController`.

我将所有必要的文件复制到我的项目中。奇怪的是我收到了一些错误。

我已将它们注释掉并决定稍后修复它们。错误没有意义，因为在演示项目中，没有这样的错误。例如，我想修复的第一件事是取消按钮。

当它被点击时，`AGImagePickerCOntroller`应该被解雇.. `[((AGImagePickerController *)self.navigationController) performSelector:@selector(didCancelPickingAssets)];`

错误是`'undeclared selector didCancelPickingAssets`'。

为什么它在示例项目中没有出现错误，而我却遇到了一些错误？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:44:15.880

如果您检查[AGImagePickerController](https://github.com/arturgrigor/AGImagePickerController)的代码，您会看到它在 .m 文件`-(void)didCancelPickingAssets;`中声明，`@interface`因此它可以用作*私有*方法。

为了避免错误，您将声明移动到`@interface`.h 文件中的部分中——但这可能会导致其他问题。

# authentication - Successfully mailing joomla contact form stopped mailing, now giving SMTP error

> ID：11986043
> 
> 赞同：1
> 
> 时间：2012-08-16T11:21:16.203
> 
> 标签：authentication, joomla, smtp

using joomla 1.7.2 & google app mailing which is working fine in the web client.

the contact form was sending mails successfully until 23 july, now it stopped mailng & giving the error

> "SMTP Error! Could not authenticate".

when using TLS its gives error:

> "SMTP Error! Could not authenticate. Language string failed to load: tls Language string failed to load: smtp_errorSTARTTLS command used when not advertised"

Here is the joomla Mail Setting in the global configuration that was working earlier:

```
Mailer                 SMTP
From email             email@mydomain.com
From Name              email@mydomain.com
Sendmail Path          /usr/sbin/sendmail
SMTP Authentication    Yes
SMTP Security          TLS
SMTP Port              587
SMTP Username          email@mydomain.com
SMTP Password          ******
SMTP Host              smtp.gmail.com 
```

everything is same as it was when the mailing was working.

Now tried changing

```
smtp ports to: 465 & 587, with both SSL & TLS; 
smtp host to: ssl://smtp.gmail.com:465, SMTP Security: None, SMTP Port: 25 
```

Same mailing problem occurred few months back also but then just by using SMTP TLS/587 & full email id in the 'From Name' started the mailing.

BUT NOW NO SETTING SEEMS TO BE WORKING.

i also checked this post [How to configure Joomla 1.7 SMTP email with a google apps email address](https://stackoverflow.com/questions/7600390/how-to-configure-joomla-1-7-smtp-email-with-a-google-apps-email-address) and found openssl is enabled in my php_info.

Did google changed anything or my hosting server? What should i look for if my hosing server changed anything?

i could not find any other setting to try! Anyone plz provide some clue!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T21:04:43.197

我得到了问题的解决方案并再次开始邮寄。需要更新 TXT DNS 记录以包含 Google Mail 的 SPF 条目。

所以我将我的 TXT DNS 记录更新为：

```
"v=spf1 +a +mx +ip4:<my_domain_ip> +include:_spf.google.com ?all" 
```

> ### 因此，为了能够使用我们域中的 Google App Mailing 发送电子邮件，我们必须至少有一个 TXT DNS 记录
> 
> “v=spf1 +include:_spf.google.com ~all”`

# ms-access - Filter for Text with spaces

> ID：11986047
> 
> 赞同：0
> 
> 时间：2012-08-16T11:21:40.910
> 
> 标签：ms-access, filtering

Using Microsoft Access I want to set a filter for records which include spaces. I tried double escaping by using `'""'` to no avail.

I have a table like so:

```
ID    Title
1     Green
2     Blue Yacht 
3     Yellow 
```

and a form just displaying these records. When I now set the filter:

```
Form.Filter = "TestTable.Title LIKE '*Yellow*'" 
```

it works like a charm. But when trying to filter for *"Blue Yacht"*

```
Form.Filter = "TestTable.Title LIKE '*Blue Yacht*'" 
```

I get an empty result. Filtering for just *Blue* works like it is supposed to. Somehow Access doesn't like the spaces in the filter. How can I filter for e.g. *"Blue "* or *"Blue Yacht"*?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:29:56.370

这是非常奇怪的行为，它应该可以正常工作，您可以尝试使用 Chr 代码而不是空格：

```
Form.Filter = "TestTable.Title LIKE '*Blue" & Chr(32) & "Yacht*'" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-20T22:47:46.070

我在寻找相同问题的解决方案时偶然发现了这个旧线程。到目前为止我没有找到。我想知道这是否是 Access 上的错误或什么。

所以，这是我的情况，我尝试了下面的两个过滤器。我正在过滤和填充数据表子表单。过滤器位于组合框中：柠檬酸盐、Paxgene、Herapin 钠。

Dim sTType as string ... ... 1\. sTType = "[Tube Type] LIKE '" & Me.txtTubeType & "*'" 2\. sTType = "[Tube Type] ='" & Me.txtTubeType & "' " ... me.Filter = sTType

When Sodium Herapin is selected and applied as filter , the filter comes up with nothing, while I've no problem with the other word filters.

Sol.：我将这段代码向上插入

me.txtTubeType = iif(InStr(Trim(Me.txtTubeType), "Sod") > 0, "Sodium*", me.txtTubeType)

```
 ...
  ...
  sTType = "[Tube Type] LIKE '" & Me.txtTubeType & "'"
  me.Filter =  sTType 
```

解决方法有点粗糙，但它适用于我的情况。

干杯!

# c# - 如何使用 C# 在 asp.net 中创建以下模型下拉列表

> ID：11986048
> 
> 赞同：1
> 
> 时间：2012-08-16T11:21:41.270
> 
> 标签：c#, asp.net

![在此处输入图像描述](../Images/e918d456ec7c5f834075e83b8ff4aeb1.png)

我只是在学习.net，我想知道是否可以创建像上面显示的那样的下拉列表，或者有一个列表类型的项目，如果按下 +，项目会展开，当再次按下 - 时，它会最小化。！ [](https://i.stack.imgur.com/wnN3j.png) 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:53:02.217

您可以尝试使用：

1\. [ASP.Net Ajax 手风琴控件](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Accordion/Accordion.aspx)

Accordion 是一种 Web 控件，允许您提供多个窗格并一次显示一个。这就像有几个 CollapsiblePanel，一次只能展开一个。Accordion 被实现为一个包含 AccordionPane web 控件的 web 控件。每个 AccordionPane 控件都有一个用于其 Header 和 Content 的模板。我们跟踪选定的窗格，使其在回发中保持可见。

2\. [ASP.Net 多视图控件](http://msdn.microsoft.com/en-us/library/ms227665%28v=vs.100%29.aspx)

MultiView 和 View Web 服务器控件充当其他控件和标记的容器，并为您提供一种轻松呈现信息的替代视图的方法。

您可以使用 MultiView 和 View 控件执行以下任务：

根据用户选择或其他条件提供备用控件集。例如，您可能允许用户从提要列表中进行选择，每个提要都在单独的视图控件中进行配置。然后，您可以显示包含用户选择的提要的 View 控件。您可以使用 MultiView 和 View 控件作为创建多个 Panel 控件的替代方法。

创建一个多页表单。MultiView 和 View 控件可以提供类似于 Wizard 控件的行为。Wizard 控件特别适合创建用户逐步填写的表单。Wizard 控件还包括对更多内置 UI 元素的支持，例如页眉和页脚、上一个和下一个按钮以及模板。如果您想创建一个根据条件（而不是按顺序）更改的显示，或者如果您不需要向导控件支持的额外功能，则可以使用 MultiView 控件代替向导。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T11:23:30.380

你应该阅读`TreeView`结构。

[读这个](http://msdn.microsoft.com/en-us/library/d4fz6xk2%28v=vs.80%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T11:50:29.150

您可以在后面的代码中执行此操作，但我建议您考虑为此使用 jQuery 插件。取决于你想要哪个，你只需要渲染内容，然后让插件让它漂亮:)

我总是喜欢使用：http: [//jquery.bassistance.de/treeview/demo/](http://jquery.bassistance.de/treeview/demo/)

# android - 显示当收到推送通知时，我在 BroadcastReceiver 的 onReceive 中打开我的活动

> ID：11986052
> 
> 赞同：0
> 
> 时间：2012-08-16T11:21:51.707
> 
> 标签：android, push-notification, android-c2dm, google-cloud-messaging

使用 Android 推送通知时，设备收到通知时会调用`onReceive`已注册的 。`BroadcastReceiver`

问题是我应该立即在方法内打开我的活动`onReceive`吗？因为有时应用程序可能会关闭，所以`activity`在收到通知时强行打开似乎很粗鲁，对吧？

有什么最佳做法吗？

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:16:22.557

好吧，一旦收到推送就打开活动是不礼貌的，因为用户可能正在做一些重要的事情。

最佳做法是发布一个[状态通知](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)，单击该通知应将其带到与推送消息相关的活动。

# x11 - Xterm 在命令行停止，XQuartz 反复崩溃和重启

> ID：11986054
> 
> 赞同：0
> 
> 时间：2012-08-16T11:22:01.107
> 
> 标签：x11, gimp, xterm, inkscape

直到几天前，我还在 OSX 10.7 上正常使用 Gimp，没有任何问题。然后我安装了 Inkscape，但由于语言设置问题（系统当前设置为日语）而无法启动它。我安装了 XQuartz 看看是否有什么不同，但没有，所以我把它留在了那里。今天来和 Gimp 做一些工作吧，看起来我在 Inkscape 中遇到的同样的问题也出现在了 Gimp 中（除了这次它与语言无关）。以下是详细信息：

*   X11 和 XQuartz 在正常运行时都会在短暂地窥视扩展坞后崩溃。查看活动监视器表明 XQuartz 正在幕后尽力启动，因为它正在运行但不可见，并且在我强制退出它时再次启动。
*   当我从终端运行 X11 和 XQuartz 时，X11 工作，但给了我这个：

> X11.app: DISPLAY ("/tmp/launch-qlRWSF/org.macosforge.xquartz:0") 与我们的 id ("org.x") 不匹配，取消设置。X11.app: main(): argc=1 argv[0] = ./X11.bin
> 
> 通过 Mach IPC 等待启动参数。X11.app：无法连接到服务器（未设置显示）。启动 X 服务器。X11.app: 启动 /usr/X11/bin/startx: argv[0] = /bin/sh argv[1] = -c
> argv[2] = /usr/X11/bin/startx
> 
> font_cache：扫描用户字体目录以生成 X11 字体缓存 font_cache：更新 FC 缓存 xauth：文件 /Users/christopher/.serverauth.22530 不存在 launch_msg("CheckIn") IPC 故障：不允许操作 X11.app：没有启动套接字移交，取消设置 DISPLAY X11.app: do_start_x11_server(): argc=6 argv[0] = /usr/X11/bin/X argv[1] = :0 argv[2] = -nolisten argv[3] = tcp argv [4] = -auth argv[5] = /Users/christopher/.serverauth.22530
> 
> Xquartz 开始：X.Org X Server 1.10.6 构建日期：20120513 X11.app：DarwinProcessFDAdditionQueue_thread：休眠以允许 xinitrc 赶上。(EE) 加载键盘映射 /tmp/server-0.xkm 时出错 (EE) XKB：加载键盘映射失败。而是加载默认键盘映射。/usr/X11/bin/xinit：XFree86_VT 属性意外地有 0 个项目而不是 1 个 font_cache：完成

但是，XQuartz 从终端启动时没有问题。

*   最后，我发现当我从终端调用 xterm 时，它只是坐在那里，没有输出任何东西或接收任何输入。我认为这是不寻常的行为。

我从 X11 输出中检查了几个关键词，即显示部分和键映射部分，但没有发现任何异常。$DISPLAY 值应该是这样，并且键盘映射似乎与远程服务器问题的联系比我的情况（这些是本地问题）更多。

我很感激任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T05:30:33.783

好吧，我只是在创造性地愚蠢。我最近一直在尝试更多终端，结果，把

```
exec $SHELL 
```

在我的`.bash_profile`. 删除那条线解决了我的问题。

很长一段时间没有影响任何东西，所以我从来没有抓住它。显然这也会影响 X11 进程。

# stderr - 阅读 php://stderr

> ID：11986060
> 
> 赞同：3
> 
> 时间：2012-08-16T11:22:44.993
> 
> 标签：stderr

我想读书`php://stderr`。怎么办？

执行`php://stderr`并`STDERR`写入同一个文件？因为在写信后`php://stderr`我尝试阅读`STDERR`使用`stream_get_contents`但我没有得到任何数据？

此外，在写入`php://stderr`using`file_put_contents`时，我们是否需要使用`APPEND`标志，以便数据不会被覆盖。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:58:24.203

> 建议您简单地使用常量 STDIN、STDOUT 和 STDERR，而不是使用这些包装器手动打开流。

[http://www.php.net/manual/en/wrappers.php.php](http://www.php.net/manual/en/wrappers.php.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-15T11:21:27.143

您无法从`php://stderr`.

基于@user647772 的回答：

> 建议您简单地使用常量 STDIN、STDOUT 和 STDERR，而不是使用这些包装器手动打开流。
> 
> ...
> 
> `php://stdin`是只读的，而`php://stdout`和 `php://stderr`是只写的。

来源：[http ://www.php.net/manual/en/wrappers.php.php](http://www.php.net/manual/en/wrappers.php.php)

此外，由于`php://stderr`本质上不需要使用 APPEND 指向流，因为没有什么可以覆盖（因为它不是文件）。流不能被自然覆盖。您只需将一些东西放入或从流中取出一些东西。

# git - 在（上游）开源项目之上维护附加功能

> ID：11986061
> 
> 赞同：4
> 
> 时间：2012-08-16T11:23:00.260
> 
> 标签：git, version-control, open-source

在我的工作中，我们为我们的一些产品使用了开源软件，并在主线项目提供的基础上开发了一些额外的特性和功能。开源项目正在积极开发中，我打算将其中一些更改贡献回主线开源项目。

但是，我还添加了我们产品所需的其他一些功能。这些功能具有安全隐患，这对于我的用例来说是完全可以接受的，但一般来说是不可接受的。因此，开源项目永远不会接受这些功能作为主线开发的一部分，所以我必须自己维护这些功能。

我希望能够偶尔发布主线开发的新版本，但这似乎需要我每隔一段时间将本地维护的功能“重新修补”到主线中。

如何以最小的开销将我需要的功能作为与主线分开的开发线来维护？我想避免每次主线项目发生变化时都必须重写本地维护的功能，但我不想“分叉”整个项目，因为我想继续贡献补丁并拉取从主线更新。

最好维护我自己的一组“补丁”文件来实现我的单独功能（我尝试在其中应用这些补丁）到主线项目的未来版本？（注意：开源项目使用 git 进行版本控制，如果有任何 git 工具可以帮助解决这个问题。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T12:20:10.833

只需使用主题分支。在编码时，请确保您可以回馈给项目的代码与您的特定实现所需的代码位于不同的主题分支中。私下里，对于您的雇主，将所有这些合并到`master`一起以使您的软件正常工作。公开地，只发布和拉取请求（或通过电子邮件或任何项目所做的补丁）不包含您的站点特定代码的那些。

该工作流程根本没有什么不寻常的地方。主题分支，也就是特征分支，也是一个很好的 git 习惯；工作流程将有其他好处。

# sql-server - 使用 Linq-to-SQL 查询 XML

> ID：11986062
> 
> 赞同：0
> 
> 时间：2012-08-16T11:23:04.643
> 
> 标签：sql-server, xml, linq-to-sql

有没有办法`Xml`使用 Linq-to-SQL 查询 SQL Server 中的列？

我希望能够在 XML 中的特定节点上执行 contains 或 Like 运算符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:28:05.340

似乎没有直接/简单的方法可以使用 XPath api 查询数据库的 xml 列，除了 contains/like 构造，它被应用于 xml 的字符串内容。

# django - 如何使用带有外部数据库值的 Django 表单 ModelChoiceField

> ID：11986063
> 
> 赞同：0
> 
> 时间：2012-08-16T11:23:12.003
> 
> 标签：django, forms

我正在尝试使用 ModelChoiceField 来获取从外部数据库填充的值。

我在我的 setting.py 中添加了一个额外的数据库，并在我的应用程序中设置了一个 externaldb.py 文件，如下所示：

```
from django.db import connections

def Location():

    rs = []

    cursor = connections['mydb'].cursor()
    cursor.execute("SELECT city FROM db.data_center WHERE removed is null;")
    zones = cursor.fetchall()

        for v in zones[::]:
            rs.append(v) 
```

使用 python manage.py shell 我可以做到这一点

```
>>>from platform.externaldb import Location
>>>print Location()
>>>[(u'India-01',), (u'Singapore-01',), (u'Europe-01',)] 
```

所以我得到了值，但是如何让它出现在下拉框中.. 这是我的 forms.py

表格.py

```
from platform.externaldb import Location

zone = forms.ModelChoiceField(Location(), label='Zone') 
```

但这对我不起作用.. 我该怎么做才能使 3 个值出现在 ModelChoiceField 下拉列表中？

谢谢 - 奥利

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:26:32.473

您可以使用[`ChoiceField`](https://docs.djangoproject.com/en/dev/ref/forms/fields/#choicefield)表单字段而不是[`ModelChoiceField`](https://docs.djangoproject.com/en/dev/ref/forms/fields/#modelchoicefield). 使用 a 的问题`ModelChoiceField`是它需要一个 QuerySet。`ChoiceField`允许您改为通过列表添加项目。

```
locations = forms.ChoiceField(choices=Locations(), label="Zone") 
```

**编辑**

以前，我使用过`ModelChoiceField`：

```
locations = forms.ModelChoiceField(queryset=Location.objects.all(), label="Zone") 
```

只要`Location`是模型就可以工作（根据您的代码我不确定）

# mysql - Mysql-在内部连接条件下建立索引

> ID：11986069
> 
> 赞同：1
> 
> 时间：2012-08-16T11:23:29.647
> 
> 标签：mysql, indexing, inner-join

我有 2 个如下表

```
inv_ps
--------
inv_fkid  ps_fkid
1         2
1         4
1         5

other_table
----------
id   ps_fkid  amt  other_data
1     2       20   xxx
2     NULL    10   xxx
3     NULL    5    xxx 
4     5       6    xxx
5     4       7    xxxx 
```

这是查询

```
SELECT inv_ps.ps_fkid, ot.amt FROM invoice_ps inv_ps INNER JOIN other_table ot ON ot.ps_fkid = inv_ps.ps_fkid WHERE inv_ps.inv_fkid=1 GROUP BY inv_ps.ps_fkid 
```

这确实工作正常，但是当我查看 EXPLAIN Sql

```
id  select_type       table     type        possible_keys       key        key_len      ref         rows        Extra
1   SIMPLE           inv_ps     ref         inv_fkid,ps_fkid    inv_fkid      4     const            1            Using where; Using temporary; Using filesort
1   SIMPLE            ot        ref         ps_fkid             ps_fkid       5     inv_ps.ps_fkid  3227       Using where 
```

这应该只扫描 3 行，但为什么即使我在两个连接列上都添加了索引，它也在 3227 行中搜索？是因为**ot.ps_fkid**列设置为**NULL**吗？

请解释

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:27:35.653

根据我的知识，索引`GROUP BY`仅在它是[覆盖索引时才在子句中使用](https://stackoverflow.com/questions/11578241/is-there-any-way-to-check-the-performance-of-mysql-indexing/11578264#11578264)

`covering indexs`尝试在表格上解释以下内容：

```
ALTER TABLE other_table ADD INDEX ix1 (ps_fkid, amt);
ALTER TABLE invoice_ps ADD INDEX ix1 (inv_fkid, ps_fkid);

SELECT a.ps_fkid, b.amt
FROM  (SELECT ps_fkid
       FROM invoice_ps
       WHERE inv_fkid = 1
       GROUP BY ps_fkid
      )a
      INNER JOIN other_table b
         ON a.ps_fkid = b.ps_fkid; 
```

# php - 使用 php 的 Linux 终端用户认证

> ID：11986072
> 
> 赞同：0
> 
> 时间：2012-08-16T11:23:33.003
> 
> 标签：php, linux

如何使用php检查linux终端的用户名和密码？

我的要求是，命令提示符输出显示在网页中。我已经写了这段代码。我的问题是如何使用 php 检查终端用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:08:11.550

我已经使用[posix_getpwnam](http://php.net/manual/en/function.posix-getpwnam.php) php 函数满足了我的要求。

# sql - 公告板/论坛是否有明显的数据库设计？

> ID：11986073
> 
> 赞同：-3
> 
> 时间：2012-08-16T11:23:33.540
> 
> 标签：sql, database, forum

如果我想编写一个代码，是否应该将某种明显的数据库用于公告板？我想我知道如何编写其余部分，我知道处理逻辑的命令式代码，但我对数据库还不太了解。这个我当然可以学，我只是想知道除了sql 101之外，一开始我是否应该知道一些明显的东西，或者一个明显的开始学习的地方。另外，请不要建议阅读开源的代码项目。我知道那个选项在那里。用您不太了解的语言很难破译代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:29:44.160

你可以看看这个地方，他们有大量的数据库样本，你可以用它来启动一个项目[http://www.databaseanswers.org/data_models/](http://www.databaseanswers.org/data_models/)

# javascript - 在 Backbone 中跨不同类触发和监听事件 - 在 CoffeeScript 中

> ID：11986075
> 
> 赞同：2
> 
> 时间：2012-08-16T11:23:43.477
> 
> 标签：javascript, jquery, backbone.js, coffeescript, backbone-events

基本上我是 Backbone 的新手。从我的角度来看，我正在更改我的集合中名为“limit”的属性。然后我试图触发一个事件（当一个属性刚刚被更改时），让我能够监听事件并执行其他操作。

但是，当某些东西发生变化时从我的集合中触发一个事件，并在它发生时监听该变化是行不通的。我认为这与视图和集合相互通信有关。任何帮助将不胜感激！谢谢

触发事件的代码（在我的收藏中）是：

```
@trigger("change") #TRIGGER THE EVENT 
```

更改我的集合中的属性的代码（有效）是：

```
@Properties.attr("limit", "1000") #Change the limit attr to "1000" 
```

监听变化的代码（不起作用）是：

```
@Properties.on("change", ->
     alert("Attribute has been changed!")
) 
```

完整的代码是：

```
class PropertyCollection extends Backbone.Collection
        model: Property

        constructor: ->
            super

        initialize: ->
            @_attr = {}

        #Function to change attribute of collection 
        attr: (prop, value) ->
            if value is undefined
                @_attr[prop]
            else
                @_attr[prop] = value
                @trigger("change") #TRIGGER THE EVENT

        limit: "0" #Attribute - default is set to 0

    class HomeView extends Backbone.View
        constructor: ->
            super

        initialize: ->
                @Properties = new PropertyCollection

                @Properties.attr("limit", "1000") #Change the limit attr to "1000"

                #Listen for the change
            @Properties.on("change", ->
                 alert("Attribute has been changed!")
            )

        template: _.template($('#home').html())

        render: ->
            $(@.el).html(@template) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T11:30:48.963

您进行更改后注册以监听该更改

更改属性->触发事件->无人监听->注册监听

所以改变这个：

```
initialize: ->
  @Properties = new PropertyCollection

  @Properties.attr("limit", "1000") #Change the limit attr to "1000"

  #Listen for the change after the firing of the change (why?!!!)
  @Properties.on("change", ->
    alert("Attribute has been changed!")
  ) 
```

对此

```
initialize: ->
  @Properties = new PropertyCollection

  #Listen for the change BEFORE you make it (yes yes yes!!!)
  @Properties.on("change", ->
    alert("Attribute has been changed!")
  )

  @Properties.attr("limit", "1000") #Change the limit attr to "1000" 
```

希望这可以帮助！

# java - 转换列表的最佳方法是什么 列出

> ID：11986078
> 
> 赞同：1
> 
> 时间：2012-08-16T11:23:52.533
> 
> 标签：java, generics

哪种是最好的转换方法目前我正在使用类似下面的东西

```
List<Byte> bytes = new ArrayList<Byte>();
List<Object> integers = Arrays.asList(bytes.toArray()); 
```

然后整数内的每个对象都需要转换为整数。有没有其他方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T11:26:57.043

使用标准 JDK，这里是如何做到的

```
List<Byte> bytes = new ArrayList<Byte>();
// [...] Fill the bytes list somehow

List<Integer> integers = new ArrayList<Integer>();
for (Byte b : bytes) {
  integers.add(b == null ? null : b.intValue());
} 
```

如果您确定，您在 中没有任何`null`值`bytes`：

```
for (byte b : bytes) {
  integers.add((int) b);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T17:15:21.293

如果 Google 的 Guava 在您的项目中可用：

```
// assume listofBytes is of type List<Byte>
List<Integer> listOfIntegers = Ints.asList(Ints.toArray(listOfBytes)); 
```

# javascript - 如何使用 jQuery 只允许定义的字符作为输入？

> ID：11986079
> 
> 赞同：0
> 
> 时间：2012-08-16T11:23:53.130
> 
> 标签：javascript, jquery

我如何允许特殊字符，如连字符、逗号、斜杠、空格键、退格键、删除键以及字母数字值并限制 jQuery 中的其余字符？

由于此标准（允许的字符/输入值）因字段而异，我想将其作为一种实用方法，接受输入字段 id 和允许的字符作为参数。例如：limitCharacters(textid, pattern)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T11:26:37.073

​您只需检查 keyCode`keydown`并`preventDefault()`在匹配时运行：

```
$('input').keydown(function(e) {
    if (e.which == 8) { // 8 is backspace
        e.preventDefault();
    }
});​ 
```

[http://jsfiddle.net/GVb6L/](http://jsfiddle.net/GVb6L/)

如果您需要限制某些字符和 keyCodes + 使其成为 jQuery 插件，请尝试以下操作：

```
$.fn.restrict = function( chars ) {
    return this.keydown(function(e) {
        var found = false, i = -1;
        while(chars[++i] && !found) {
            found = chars[i] == String.fromCharCode(e.which).toLowerCase() || 
                    chars[i] == e.which;
        }
        found || e.preventDefault();
    });
};

$('input').restrict(['a',8,'b']);​ 
```

[http://jsfiddle.net/DHCUg/](http://jsfiddle.net/DHCUg/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T11:34:00.320

我做了类似的事情，但使用的是 jQuery 插件格式。这个例子只允许数字和句号。

您可以通过以下方式调用它：

```
$("input").forceNumeric(); 
```

和插件：

```
 jQuery.fn.forceNumeric = function () {

             return this.each(function () {
                 $(this).keydown(function (e) {
                     var key = e.which || e.keyCode;

                     if (!e.shiftKey && !e.altKey && !e.ctrlKey &&
                     // numbers   
                        key >= 48 && key <= 57 ||
                     // Numeric keypad
                        key >= 96 && key <= 105 ||
                     // comma, period and minus, . on keypad
                        key == 190 || key == 188 || key == 109 || key == 110 ||
                     // Backspace and Tab and Enter
                        key == 8 || key == 9 || key == 13 ||
                     // Home and End
                        key == 35 || key == 36 ||
                     // left and right arrows
                        key == 37 || key == 39 ||
                     // Del and Ins
                        key == 46 || key == 45)
                        return true;

                    return false;
                });
            });
        } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-16T11:46:36.860

我建议对*退格键*和*删除键等修饰键使用***David**解决方案，下面的代码用于字符：

 **```
var chars = /[,\/\w]/i; // all valid characters
$('input').keyup(function(e) {
  var value = this.value;
  var char = value[value.length-1];
  if (!chars.test(char)) {
    $(this).val(value.substring(0, value.length-1));
  }
}); 
```

另外，我遇​​到了一些问题，`keydown`所以我会在`keyup`.

**演示： http:** [//jsfiddle.net/elclanrs/QjVGV/](http://jsfiddle.net/elclanrs/QjVGV/)（尝试输入点`.`或分号`;`）**

# jquery - phonegap android ajax 调用不起作用

> ID：11986082
> 
> 赞同：0
> 
> 时间：2012-08-16T11:24:01.757
> 
> 标签：jquery, ajax, cordova

我试图从带有phonegap平台和jquery库的eclipse android模拟器向我的开发计算机进行ajax调用。这是我的服务器在我的计算机上运行的场景，与模拟器相同。当我尝试像这样使用 ajax 调用时：

```
$.ajax({
            type : "POST",
            url : "http://10.4.40.235/API.public/index.php",
            success : function(data)
            {
                alert(data);
            }
 }); 
```

它不起作用。我假设是因为跨域 ajax 请求，但我该怎么做。我也尝试使用 10.0.2.2 IP，但效果不佳。花了几个小时，似乎没有得到任何地方......我的电脑上的模拟器和服务器已连接，因为如果我使用浏览器访问 10.4.40.235/API.public/index.php 它可以工作......

在 LogCat 中，我收到以下错误：

```
WEb Console: Uncaught SyntaxError: Unexpected indetifier at: http://10.0.2.2/API.public/index.php?calback=jQuery[some numbers]
enter code here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:43:48.083

经过 3 个小时的工作，我得到了解决方案……这对我有用

```
$.get('http://10.0.2.2/API.public/index.php', function (data) {
    alert(data);
}); 
```

# workflow-foundation-4 - 我应该如何处理 AsyncCodeActivity 中的异常？

> ID：11986084
> 
> 赞同：0
> 
> 时间：2012-08-16T11:24:08.323
> 
> 标签：workflow-foundation-4

我遇到了工作流程中未发现的异常问题。我有一个由 TryCatch 包围的自定义 AsyncCodeActivity；无论如何，异常没有被捕获，更糟糕的是，我托管工作流的 IIS 池有时会重新启动。看着这个问题/答案（[尽管 TryCatch 活动，异常从工作流中逃脱](https://stackoverflow.com/questions/3772557/exception-escapes-from-workflow-despite-trycatch-activity)），我认为问题在于我重新抛出异常的方式。这就是我通常编写异步代码活动的方式：

```
 protected override IAsyncResult BeginExecute(AsyncCodeActivityContext context, AsyncCallback callback, object state)
    {
        Action<object> execute = s => this.Execute();
        var task = new Task(execute, state, CancellationToken.None, TaskCreationOptions.PreferFairness);
        task.ContinueWith(s => callback(s));
        task.Start();
        return task;
    }

    protected override void EndExecute(AsyncCodeActivityContext context, IAsyncResult result)
    {
        var task = result as Task;
        Contract.Assert(task != null);
        if (task.IsFaulted && task.Exception != null)
        {
            Contract.Assert(
                task.Exception.InnerException != null,
                "It is expected that the inner exception in a task is not null");
            const string Message = "An exception was thrown while doing something";
            Logger.ErrorException(Message, task.Exception.InnerException);
            throw new WorkflowApplicationException(Message, task.Exception.InnerException);
        }
    }

    private void Execute()
    {
         // Do something here
    } 
```

这是处理异步代码活动中异常的正确方法吗？如果是，我应该如何防止我的工作流中止（有时重新启动 IIS）？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:16:41.210

我不认为 WorkflowApplicationException 是由您的代码抛出的。如果我们在某个地方以不同的方式处理此异常而不调用 TryCatch 块，我不会感到惊讶，因为此异常（及其子类）通常由工作流运行时抛出，并且如果在活动中捕获它们就没有意义运行时间被冲洗掉了。

您可以尝试抛出一个不同的异常，看看是否会有所不同。

# c# - 是否可以更改 Func 的泛型类型参数 代表？

> ID：11986085
> 
> 赞同：4
> 
> 时间：2012-08-16T11:24:08.977
> 
> 标签：c#, generics, delegates, func, type-parameter

我想这个问题的答案是“不”，但无论如何。

基本上，我有一个`Linq2Sql`数据提供者及其生成的类型。我还有一些业务对象，其属性名称（为了这个问题）与其相关生成类型的属性名称完全匹配。业务类型在整个应用程序中使用，生成的类型仅用于访问数据库 - 出于多种原因，此设置是可取的，因此请不要建议需要对此进行任何更改的答案。

在 UI 层中，有各种控件允许用户调整搜索的方式，例如。要搜索的字段、搜索词等。使用这些控件，我可以创建一个很好的`Func<T, bool>`委托来封装搜索条件/查询。我遇到的问题是`Func`委托是使用`T`作为业务对象的类型参数创建的，当它被传递给数据访问层时，我需要它是相关的生成类型。

所以我的问题是，**是否可以在保持相同条件的同时将 Func 委托的泛型类型参数从业务对象类型更改为相关的生成类型？**

```
eg. can Func<MasterTrack, bool>   =>   Func<DbMasterTrack, bool> when properties match? 
```

另请注意，我可以将所有用户选择的搜索参数传递给数据访问层，但其中有很多，所以我希望避免这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T11:40:02.683

我不相信这是可能的，但你可以做以下事情：

*   隐`DbMasterTrack`式转换为`MasterTrack`;
*   查询时只需将您包装`Func<MasterTack,bool>`在一个`Func<DbMasterTrack,bool>`.

我还必须注意，如果您使用`Func<T, bool>`而不是使用`Expression<Func<T, bool>`它，那么您并没有真正在数据库级别过滤结果集，但这可能是您已经知道的事情。

示例如下：

```
class MasterTrack
{
    public int Id { get; set; }
    public string Name { get; set; }
}
class DbMasterTrack
{
    public int Id { get; set; }
    public string Name { get; set; }
    public static implicit operator MasterTrack(DbMasterTrack @this)
    {
        return new MasterTrack { Id = @this.Id, Name = @this.Name };
    }
}
class Program
{
    static void Main(string[] args)
    {
        var tracks = new List<DbMasterTrack>
        {
            new DbMasterTrack { Id = 1, Name = "T1" },
            new DbMasterTrack { Id = 2, Name = "T2" },
        };

        Func<MasterTrack, bool> query = t => t.Id == 1;

        var result = tracks.Where((Func<DbMasterTrack, bool>)(t => query(t)));

        foreach (var item in result)
        {
            Console.WriteLine("{0}|{1}", item.Id, item.Name);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T11:45:46.987

几件事

1.  Linq2Sql 也可以使用 an`Expression<Func<T, bool>>`而不是`Func<T, bool>`.

2.  无法**更改**a 的类型`Expression<Func<T, bool>>`

3.  是否可以复制/重新创建`Expression<Func<T, bool>>`将类型 T 替换为另一种类型的位置。

4.  Linq2Sql 不会**在**其表达式中接受接口类型。因此，如果您考虑创建接口来“抽象”实际类型，那将是行不通的。

现在，`Expression<Func<T2, bool>>`要从一个`Expression<Func<T, bool>>`我曾经创建过的代码中创建一个。它不是“完整的”，因为并非支持表达式中的所有可能路径。但是，您检查值属性的基本和/或组合（< > = != 或组合）当时工作正常。

使用此代码，您可以执行以下操作：

```
Expression<Func<MasterTrack, bool>> criteria = m => m.Id == 1;
Expression<Func<DbMasterTrack, bool>> dbCriteria = ExpressionRewriter.CastParam<MasterTrack, DbMasterTrack>(criteria); 
```

开始了。

```
public static class ExpressionRewriter {
    /// <summary>
    /// Casts the param of an expression.
    /// </summary>
    /// <typeparam name="TIn">The type of the in.</typeparam>
    /// <typeparam name="TOut">The type of the out.</typeparam>
    /// <param name="inExpr">The in expr.</param>
    /// <returns></returns>
    public static Expression<Func<TOut, bool>> CastParam<TIn, TOut>(Expression<Func<TIn, bool>> inExpr) {
        if (inExpr.NodeType == ExpressionType.Lambda &&
            inExpr.Parameters.Count > 0) {

            var inP = inExpr.Parameters[0];
            var outP = Expression.Parameter(typeof(TOut), inP.Name);

            var outBody = Rewrite<TIn, TOut>(
                inExpr.Body,
                expr => (expr is ParameterExpression) ? outP : expr
            );
            return Expression.Lambda<Func<TOut, bool>>(
                    outBody,
                    new ParameterExpression[] { outP });
        } else {
            throw new NotSupportedException();
        }
    }

    /// <summary>
    /// Rewrites the specified expression.
    /// </summary>
    /// <typeparam name="TIn">The type of the in.</typeparam>
    /// <typeparam name="TOut">The type of the out.</typeparam>
    /// <param name="exp">The exp.</param>
    /// <param name="c">The c.</param>
    /// <returns></returns>
    private static Expression Rewrite<TIn, TOut>(Expression exp, Func<Expression, Expression> c) {
        Expression clone = null;
        var be = exp as BinaryExpression;
        switch (exp.NodeType) {
            case ExpressionType.AndAlso:
                clone = Expression.AndAlso(Rewrite<TIn, TOut>(be.Left, c), Rewrite<TIn, TOut>(be.Right, c), be.Method);
                break;
            case ExpressionType.OrElse:
                clone = Expression.OrElse(Rewrite<TIn, TOut>(be.Left, c), Rewrite<TIn, TOut>(be.Right, c), be.Method);
                break;
            case ExpressionType.Equal:
                clone = Expression.Equal(Rewrite<TIn, TOut>(be.Left, c), Rewrite<TIn, TOut>(be.Right, c), be.IsLiftedToNull, be.Method);
                break;
            case ExpressionType.GreaterThan:
                clone = Expression.GreaterThan(Rewrite<TIn, TOut>(be.Left, c), Rewrite<TIn, TOut>(be.Right, c), be.IsLiftedToNull, be.Method);
                break;
            case ExpressionType.GreaterThanOrEqual:
                clone = Expression.GreaterThanOrEqual(Rewrite<TIn, TOut>(be.Left, c), Rewrite<TIn, TOut>(be.Right, c), be.IsLiftedToNull, be.Method);
                break;
            case ExpressionType.LessThan:
                clone = Expression.LessThan(Rewrite<TIn, TOut>(be.Left, c), Rewrite<TIn, TOut>(be.Right, c), be.IsLiftedToNull, be.Method);
                break;
            case ExpressionType.LessThanOrEqual:
                clone = Expression.LessThanOrEqual(Rewrite<TIn, TOut>(be.Left, c), Rewrite<TIn, TOut>(be.Right, c), be.IsLiftedToNull, be.Method);
                break;
            case ExpressionType.NotEqual:
                clone = Expression.NotEqual(Rewrite<TIn, TOut>(be.Left, c), Rewrite<TIn, TOut>(be.Right, c), be.IsLiftedToNull, be.Method);
                break;
            case ExpressionType.Not:
                var ue = exp as UnaryExpression;
                clone = Expression.Not(Rewrite<TIn, TOut>(ue.Operand, c));
                break;
            case ExpressionType.MemberAccess:
                var me = exp as MemberExpression;

                MemberInfo newMember = me.Member;
                Type newType = newMember.DeclaringType;
                if (newType == typeof(TIn)) {
                    newType = typeof(TOut);
                    MemberInfo[] members = newType.GetMember(me.Member.Name);
                    if (members.Length == 1) {
                        newMember = members[0];
                    } else {
                        throw new NotSupportedException();
                    }
                }
                clone = Expression.MakeMemberAccess(Rewrite<TIn, TOut>(me.Expression, c), newMember);
                break;
            case ExpressionType.Constant:
                var ce = exp as ConstantExpression;
                clone = Expression.Constant(ce.Value);
                break;
            case ExpressionType.Parameter:
                var pe = exp as ParameterExpression;
                Type peNewType = pe.Type;
                if (peNewType == typeof(TIn)) {
                    peNewType = typeof(TOut);
                }
                clone = Expression.Parameter(peNewType, pe.Name);
                break;
            case ExpressionType.Call:
                MethodCallExpression mce = exp as MethodCallExpression;
                if (mce.Arguments != null && mce.Arguments.Count > 0) {
                    List<Expression> expressionList = new List<Expression>();
                    foreach (Expression expression in mce.Arguments) {
                        expressionList.Add(Rewrite<TIn, TOut>(expression, c));
                    }
                    clone = Expression.Call(Rewrite<TIn, TOut>(mce.Object, c), mce.Method, expressionList.ToArray());
                } else {
                    clone = Expression.Call(Rewrite<TIn, TOut>(mce.Object, c), mce.Method);
                }
                break;
            case ExpressionType.Invoke:
                InvocationExpression ie = exp as InvocationExpression;
                List<Expression> arguments = new List<Expression>();
                foreach (Expression expression in ie.Arguments) {
                    arguments.Add(Rewrite<TIn, TOut>(expression, c));
                }
                clone = Rewrite<TIn, TOut>(ie.Expression, c);
                //clone = Expression.Invoke(Rewrite<TIn, TOut>(ie.Expression, c), arguments);
                break;
            case ExpressionType.Convert:
                var ue2 = exp as UnaryExpression;
                //clone = Expression.Not(Rewrite<TIn, TOut>(ue2.Operand, c));
                clone = Expression.Convert(ue2.Operand, ue2.Type, ue2.Method);
                break;
            default:
                throw new NotImplementedException(exp.NodeType.ToString());
        }
        return c(clone);
    }
} 
```

# git - 将克隆上的分支合并到原点

> ID：11986099
> 
> 赞同：0
> 
> 时间：2012-08-16T11:25:25.857
> 
> 标签：git, branching-and-merging, smartgit

![在此处输入图像描述](../Images/ca2609cde7c481da01008734f508669e.png)![在此处输入图像描述](../Images/de4054c2bed6c1218c9242c6d533dda7.png)![git-当前日志](../Images/2f6e38f320e1d2f2649e65c32199fc52.png)

使用智能 git，我正在尝试将所有来自 'admin_aps' 的提交合并到源中并把它弄得一团糟。'Released_V1' 是否充当两者之间的桥梁？我无法从我在主要问题中考虑的原始存储库访问 Released_V1？我该如何实现这种合并？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:12:24.063

我在这里没有看到一团糟。事实上，我只看到一个主线分支，然后是两个合并，一个看起来像`git pull`. 但是，在您习惯之前，这些图表可能会有些混乱。

您的`HEAD`提交，在图表中显示为“Released_V1”的分支提示，是`origin/Released_V1`. 这可能有几种方式，最有可能是`git pull`on `Released_V1`，该分支设置为 track `origin`。

`HEAD~1`是从合并`admin_aps`到的合并提交`Released_V1`。这里没有什么奇怪的。这些线条只是表明它的合并基础比您的图表片段更早。

然后，您将获得`Released_V1`最新的历史记录，除了“先前提交的一部分”和“重新定位的头这些都是...之后的旧更改”。

“origin/Released_V1”文本只是显示你的本地提交指针，用于源的副本`Released_V1`，在你最后一次获取或拉取时建立。

总之，这看起来完全正常。历史表明你这样做了：

```
git merge admin_aps
git pull ;# could also be git fetch && git merge origin/Released_V1 
```

有什么问题？要将其推送回您的遥控器，您可以发出（在几个选项中）：，`git push origin Released_V1`这应该是一个快进推送。

# actionscript-3 - 如何将字节数组发送到服务器并检测进度？

> ID：11986106
> 
> 赞同：2
> 
> 时间：2012-08-16T11:26:00.007
> 
> 标签：actionscript-3, file-upload, http-post, progress-indicator

我正在使用 Flash 运行时（Flash 播放器 10）。我有一个 flv 编码的字节数组，我需要将它发送到服务器（简单的 php，没有 FMS 或套接字服务器）并保存在那里。我可以使用 urlLoader 并发布所有内容，但我不会获得进度百分比，所以我尝试使用如下文件引用保存它：

```
var url_ref:URLRequest = new URLRequest("save_vid.php");    
url_ref.contentType = "multipart/form-data; boundary="+getBoundary();
url_ref.data = _baFlvEncoder.byteArray;
url_ref.method = URLRequestMethod.POST;

var upfileRef:FileReference = new FileReference();
upfileRef.addEventListener(ProgressEvent.PROGRESS, onUploadProgress);
upfileRef.addEventListener(Event.COMPLETE, videoUploadComplete);
upfileRef.upload(url_ref); 
```

但是当我尝试这个时，我收到一个错误：

```
Error #2037: Functions called in incorrect sequence, or earlier call was unsuccessful. 
```

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:16:23.227

尝试这个：

```
var vars :URLVariables = new URLVariables();
vars.bytearray  = _baFlvEncoder.byteArray;

var req :URLRequest = new URLRequest("save_vid.php");
req.method = URLRequestMethod.POST;
req.data = vars;

var ldr :URLLoader = new URLLoader();
ldr.addEventListener( Event.COMPLETE, onLoaded );
ldr.addEventListener( IOErrorEvent.IO_ERROR, onIOError );
ldr.addEventListener( ProgressEvent.PROGRESS, onProgress );
ldr.load( req );

function onProgress( e:ProgressEvent ):void 
{           
    trace( "Progress: " + e.bytesLoaded / e.bytesTotal );
} 
```

在 PHP 中

```
$bytearray = $_POST['bytearray'] 
```

# sql - SQL Server：从包含格式为 YYYYMMDD 的日期的文件中批量插入

> ID：11986111
> 
> 赞同：0
> 
> 时间：2012-08-16T11:26:11.510
> 
> 标签：sql, sql-server, bulkinsert, date-format, bcp

> **可能重复：**
> [将 YYYYMM 格式的日期批量插入 MS SQL 表中的日期字段](https://stackoverflow.com/questions/10414995/bulk-insert-a-date-in-yyyymm-format-to-date-field-in-ms-sql-table)

我正在使用 SQL Server 2012 Express。

我在使用包含格式为 YYYYMMDD 的日期的文件中使用 BULK INSERT 时遇到问题（无法更改格式，它是来自不同软件的输出）。我使用格式文件，因为我有一个在插入值时应该跳过的标识列。表结构和 BULK INSERT 命令在这里：

```
CREATE TABLE [dbo].[daily](
[id] [bigint] IDENTITY(1,1) NOT NULL,
[ticker] [varchar](15) NOT NULL,
[ddate] [date] NOT NULL,
[dopen] [decimal](16, 8) NOT NULL,
[dhigh] [decimal](16, 8) NOT NULL,
[dlow] [decimal](16, 8) NOT NULL,
[dclose] [decimal](16, 8) NOT NULL,
[dvol] [int] NOT NULL,
[dopenint] [int] NOT NULL
);

BULK INSERT daily
FROM 'C:\IBM.TXT'
WITH (
FORMATFILE = 'C:\dailyformat.xml',
TABLOCK,
FIRSTROW = 2); 
```

制表符分隔的数据文件 (IBM.TXT) 在这里：

```
Symbol  Date     Open    High    Low     Close   Total Volume    Total Open Interest
IBM 19620102     2.57000000  2.57000000  2.54000000  2.54000000    11704           0
IBM 19620103     2.54000000  2.56000000  2.54000000  2.56000000     8778           0
IBM 19620104     2.56000000  2.56000000  2.54000000  2.54000000     7878           0
IBM 19620105     2.53000000  2.53000000  2.48000000  2.49000000    11029           0
IBM 19620108     2.49000000  2.49000000  2.42000000  2.44000000    16431           0
IBM 19620109     2.45000000  2.50000000  2.45000000  2.47000000    14855           0 
```

bcp 生成的格式文件（dailyformat.xml）在这里：

```
<?xml version="1.0"?>
<BCPFORMAT xmlns="http://schemas.microsoft.com/sqlserver/2004/bulkload/format" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
 <RECORD>
  <FIELD ID="1" xsi:type="CharTerm" TERMINATOR="\t" MAX_LENGTH="15"/>
  <FIELD ID="2" xsi:type="CharTerm" TERMINATOR="\t" MAX_LENGTH="11"/>
  <FIELD ID="3" xsi:type="CharTerm" TERMINATOR="\t" MAX_LENGTH="41"/>
  <FIELD ID="4" xsi:type="CharTerm" TERMINATOR="\t" MAX_LENGTH="41"/>
  <FIELD ID="5" xsi:type="CharTerm" TERMINATOR="\t" MAX_LENGTH="41"/>
  <FIELD ID="6" xsi:type="CharTerm" TERMINATOR="\t" MAX_LENGTH="41"/>
  <FIELD ID="7" xsi:type="CharTerm" TERMINATOR="\t" MAX_LENGTH="12"/>
  <FIELD ID="8" xsi:type="CharTerm" TERMINATOR="\r\n" MAX_LENGTH="12"/>
 </RECORD>
 <ROW>
  <COLUMN SOURCE="1" NAME="ticker" xsi:type="SQLVARYCHAR"/>
  <COLUMN SOURCE="2" NAME="ddate" xsi:type="SQLDATE"/>
  <COLUMN SOURCE="3" NAME="dopen" xsi:type="SQLDECIMAL" PRECISION="16" SCALE="8"/>
  <COLUMN SOURCE="4" NAME="dhigh" xsi:type="SQLDECIMAL" PRECISION="16" SCALE="8"/>
  <COLUMN SOURCE="5" NAME="dlow" xsi:type="SQLDECIMAL" PRECISION="16" SCALE="8"/>
  <COLUMN SOURCE="6" NAME="dclose" xsi:type="SQLDECIMAL" PRECISION="16" SCALE="8"/>
  <COLUMN SOURCE="7" NAME="dvol" xsi:type="SQLINT"/>
  <COLUMN SOURCE="8" NAME="dopenint" xsi:type="SQLINT"/>
 </ROW>
</BCPFORMAT> 
```

我收到以下错误：

```
Msg 206, Level 16, State 2, Line 1
Operand type clash: numeric is incompatible with date. 
```

请帮助修复它，而不是将日期作为数字插入到临时表中，然后通过将其选择到其他表中将其转换为日期。我的代码应该有一些修复。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T07:21:48.557

问题解决了。我用了

```
INSERT INTO daily 
SELECT a.* FROM OPENROWSET(
BULK 'C:\IBM.TXT',
FORMATFILE = 'C:\dailyformat.xml',
FIRSTROW = 2
) as a 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T11:47:12.370

尝试`SET DATEFORMAT ymd`在“批量插入”之前调用

# c# - WCF Contract 首先基于 xsd 数据类型

> ID：11986112
> 
> 赞同：1
> 
> 时间：2012-08-16T11:26:12.473
> 
> 标签：c#, .net, wcf, xsd, contract-first

我们将数据类型创建为 XSD 定义。然后将这些 xsd 文件导入 WebSphere Application Server。

我们希望 WebSphere Application Server 能够使用这些数据类型调用 WCF Web 服务。

原来的xsd如下：

```
 <xs:simpleType name="Stillingsprosent">
         <xs:restriction base="xs:double"/>
    </xs:simpleType>

    <xs:element name="gjennomsnittStillingsprosent" type="Stillingsprosent" minOccurs="0" maxOccurs="1"/> 
```

通过 xsd.exe 运行它会生成以下 C# 代码：

```
public partial class GjennomsnittStillingsprosent {

private double gjennomsnittField;

private bool gjennomsnittFieldSpecified;

/// <remarks/>
[System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
public double gjennomsnitt {
    get {
        return this.gjennomsnittField;
    }
    set {
        this.gjennomsnittField = value;
    }
}

/// <remarks/>
[System.Xml.Serialization.XmlIgnoreAttribute()]
public bool gjennomsnittSpecified {
    get {
        return this.gjennomsnittFieldSpecified;
    }
    set {
        this.gjennomsnittFieldSpecified = value;
    }
}
} 
```

然后，当我们在 WCF 合同中使用此数据类型时，它会生成以下 xsd：

```
<xs:complexType name="GjennomsnittStillingsprosent">
 <xs:sequence>
  <xs:element name="gjennomsnittField" type="xs:double"/>
  <xs:element name="gjennomsnittFieldSpecified" type="xs:boolean"/>
 </xs:sequence>
</xs:complexType>
<xs:element name="GjennomsnittStillingsprosent" nillable="true" type="tns:GjennomsnittStillingsprosent"/> 
```

*   我们希望数据合约与​​原始 xsd 相同。
*   我们也希望在生成后不需要编辑文件。（数据模型很大）

问题与 minoccurs=0 的可选字段有关，这些字段确实可以为空，但 xsd.exe 是在 .net 具有可空类型之前创建的。

我们如何确保 WCF 合约中使用的数据类型与 XSD 中指定的数据类型完全相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:35:45.010

像这样声明它：

```
[DataContract]
public class Stillingsprosent{
[DataMember]
public double stillingsprosent;
} 
```

然后在某处使用它：

```
[DataMember(EmitDefault=false)]
public Stillingsprosent? gjennomsnittStillingsprosent; 
```

EmitDefault=false 表示默认时不会发出（即这里为null）

# python - Python 字典重组

> ID：11986114
> 
> 赞同：0
> 
> 时间：2012-08-16T11:26:13.577
> 
> 标签：python, dictionary, generator

给定以下数据结构：

```
out = {
  'foo': { 'public':{}, 'private':{}, 'other':{} },
  'bar': { 'public':{}, 'private':{}, 'other':{} }
} 
```

我正在尝试*切*出部分子结构以创建一个新的`dict`. *我的用途是用除了*标记的所有数据来响应请求`private`。

做相反的事情是微不足道的：

```
response = {x,y['private'] for x,y in out.iteritems()} 
```

它为每个构造一个字典，`foo`并且`bar`只包含标记的数据`private`。但是标准库（也许是 itertools）中是否有一些功能会产生以下内容：

```
out = {
  'foo': { 'public':{}, 'other':{} },
  'bar': { 'public':{}, 'other':{} }
} 
```

我尝试了以下方法：

```
{x:(y['public'], y['other']) for x,y in out.iteritems()} 
```

尽管我更愿意不使用元组，并且不明确命名每个子结构，因为这不是可重用或可扩展的。

```
def remove(name, obj):
    return {x:y for x,y in obj.iteritems() if x is not name}
{x:remove('private',y) for x,y in out.iteritems()} 
```

这似乎有效，但有更好的方法吗？有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:55:06.333

您可以将其分解为多个部分；你想要一个删除了一些部分的新字典。因此，创建一个函数，该函数可以返回没有相关元素的字典，并将其称为迭代器的一部分。

您正在使用字典理解，所以这样的事情会起作用：

```
def remove_items(d, *items):
    """
    Return dictionary copy with some items removed.
    """
    return { a: b for a, b in d.iteritems() if a not in items }

print { x: remove_items(y, 'private') for x, y in out.iteritems() } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T11:41:24.740

这就是你的意思吗？

`respose = {x:{'public': y['public'], 'other': y['other']} for x,y in out.iteritems()}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T11:58:02.777

尝试这个：

```
response = {}
for x,y in out.iteritems():
    response[x] = dict(y)
    del response[x]['private'] 
```

如果您不介意破坏原始字典，则只需对其`del`“私有”元素进行迭代，否则您需要复制第二级字典，然后复制`del`不需要的项目。

# c# - 返回 wpf Grid.Column 中的所有元素

> ID：11986115
> 
> 赞同：1
> 
> 时间：2012-08-16T11:26:17.237
> 
> 标签：c#, wpf, grid

是否可以遍历 wpf`Grid`列中存在的所有 UI 元素？

例如

```
<Grid.ColumnDefinitions>
    <ColumnDefinition Width="35*" Name="basicColumn"/>
    <ColumnDefinition Width="65*" />
</Grid.ColumnDefinitions>

foreach (UIElement elem in basicColumn.Elements)
{
    //do something
} 
```

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T11:30:16.373

在 WPF 中，控件/ `UIElement`s 在`Grid`而不是在 Column/Rows 中。所以你应该迭代`Grid.Children`

```
int index = mygrid.ColumnDefinitions.IndexOf(basicColumn);

foreach (UIElement uie in mygrid.Children)
{
    if(Grid.GetColumn(uie) == index)
    {
        //do something
    }
} 
```

# winapi - 使用 DirectShow 一次运行多个网络摄像头

> ID：11986119
> 
> 赞同：1
> 
> 时间：2012-08-16T11:26:51.227
> 
> 标签：winapi, usb, webcam, directshow, directshow.net

我正在使用 Windows 7 操作系统。使用 Visual Studio 2010。这里我使用 DirectShow2005-Lib.dll。在这里，我可以一次运行两个网络摄像头。但是当我要连接并运行第三个网络摄像头时..我无法一次运行所有三个。我一次只能跑两个。并得到一个错误：找不到中间过滤器的组合来建立连接。

如何使用 DirectShow 一次运行多个网络摄像头？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T11:49:15.813

USB 带宽是一种有限的资源，您不能运行太多的相机。有时，在某些模式下，您一次只能运行一台摄像机。

看：

*   [一个 USB 集线器上的两个网络摄像头 - 带宽问题](https://stackoverflow.com/questions/6664605/two-webcams-on-one-usb-hub-bandwidth-issues)
*   [2个USB摄像头不适用于opencv](https://stackoverflow.com/questions/11222813/2-usb-cameras-not-working-with-opencv)
*   [使用许多 USB 网络摄像头的影响](https://stackoverflow.com/questions/2519057/implications-of-using-many-usb-web-cameras)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T12:20:58.227

问题已经解决了。我用过 PCI 卡 USB 插槽。两个摄像头连接到 PCI USB 插槽，一个连接到普通 USB 插槽。因此，所有三个摄像机同时运行。

我们也可以为此使用 USB 集线器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T13:18:38.583

当我收到相同的错误时，我注意到 2 个实例：

1）我正在尝试连接到已经在运行图表的网络摄像头。（大多数网络摄像头驱动程序只能打开一个实例，就像 Deana 提到的那样）

2）您连接到错误的引脚，或者您需要为该特定相机设置智能 T 过滤器。

您是否使用相同的相机（如果是，请注意不要两次使用相同的相机）？如果您输出低分辨率，则 USB 带宽不会成为问题，但如果您的帧超过 3MP，则只有在使用同一个 USB 端口时才会遇到问题……<br> 逐步浏览图表，确切位置它失败了吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T12:35:09.160

我遇到的一些（大多数？）驱动程序不允许加载多个实例。由于您已经加载了 2 个，因此不太可能出现这种情况，但这是供将来参考。

# jasper-reports - 登录 JasperReports Scriptlet

> ID：11986126
> 
> 赞同：0
> 
> 时间：2012-08-16T11:27:17.820
> 
> 标签：jasper-reports, jasperserver

我想登录 JasperReports scriptlet。我只是想知道是否有可用的 Jasper 日志？

我知道 JasperReports 使用 Apache log4j 进行日志记录。

那么有没有 JasperReports 的自定义日志 API，或者我可以直接使用 Apache log4j API 来登录 JasperReports Scriptlet？

我还看到 JasperReports 使用 slf4j 外观来包装 log4j。我可以直接使用 slf4j API 进行日志记录吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:32:16.193

在图表定制器中，我遵循了直接使用 log4j 的标准模式。您应该能够在 scriptlet 中执行相同的操作：

```
import org.apache.log4j.Logger;
...
private final static Logger logger = Logger.getLogger(BetterBarLabels.class);
if (logger.isDebugEnabled()) {
  logger.debug("################## DEBUG info from BetterBarLabels ##################");
} 
```

# iphone - 使用 UINavigationController 获取 UIViewController 内的视图框架

> ID：11986128
> 
> 赞同：0
> 
> 时间：2012-08-16T11:27:24.903
> 
> 标签：iphone, uiviewcontroller, uitabbarcontroller, uinavigationbar

我有一个视图控制器，它有一个`UINavigationController`, 和一个`UITabController`附加的。

我想知道是否有办法获得可用的屏幕空间？我真的很想说`CGPoint(0,0);`绝对在左上角，就在下方`UINavigationController`，那`self.view.frame.size.height`是我只剩下可以画的空间了。

我试过: `self.view.bounds`和`self.view.frame`，但都认为可用空间是 320x460，而不是我期望的 320x367。

除了对数字进行硬编码之外，最正确的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T11:48:52.227

如果您尝试记录边界`viewDidAppear`而不是`viewDidLoad`，您将获得预期的结果。

# git - 使用 git config --global 会更改预先存在的 git 存储库的设置吗？

> ID：11986136
> 
> 赞同：1
> 
> 时间：2012-08-16T11:27:50.587
> 
> 标签：git, version-control

假设我做了一个回购

```
cd repo1
git init
git config user.name "Jack"
git config user.email jack@hill.com 
```

然后我再做一个

```
cd ../repo2
git init
git config --global user.name "Jill"
git config --global user.email jill@hill.com 
```

我会在 repo1 中成为 Jack 还是 Jill？如果这两个步骤以相反的顺序完成，我假设我将成为 repo1 中的 Jack？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T11:56:29.360

无论您运行命令的顺序如何，您都将成为 Jack in`repo1`和 Jill in 。`repo2`从`git config`手册页：

```
 If not set explicitly with --file, there are four files where git config will search for configuration options:

   $GIT_DIR/config
       Repository specific configuration file.

   ~/.gitconfig
       User-specific configuration file. Also called "global" configuration file.

   $XDG_CONFIG_HOME/git/config
       Second user-specific configuration file. If $XDG_CONFIG_HOME is not set or empty, $HOME/.config/git/config will be used. Any single-valued variable
       set in this file will be overwritten by whatever is in ~/.gitconfig. It is a good idea not to create this file if you sometimes use older versions of
       Git, as support for this file was added fairly recently.

   $(prefix)/etc/gitconfig
       System-wide configuration file. 
```

Git 按该顺序加载这些文件。您的本地存储库的, `.git/config`, 优先于`~/.gitconfig`, 优先于`$HOME/.config/git/config`, 优先于`/etc/gitconfig`. 而且：

```
All writing options will per default write to the repository specific configuration file. Note that this also affects options like --replace-all and
--unset. git config will only ever change one file at a time. 
```

该`--global`标志不会更改`.git/config`您系统上的所有内容，只是`~/.gitconfig`.

# php - php PDO 和 mysql：如何插入地理点类型？

> ID：11986141
> 
> 赞同：3
> 
> 时间：2012-08-16T11:28:14.877
> 
> 标签：php, mysql, geolocation, pdo, geometry

这是我将值插入表的（简化）代码：

```
function myInsert($pdo, $sql, $values) {
    $pdo->prepare($sql);
    foreach ($values as $key=>$value) {
        $stmt->bindValue($key, $value);
    }   
}

myInsert(
    $pdo,
    'INSERT INTO mytable (a,b,c) VALUES (:a,:b,:c)',
    array(
        ':a' => 'valuea',
        ':b' => 'valueb',
        ':c' => 'valuec',
    )
); 
```

什么是正确`'valuea'`的可以代表 MySQL 地理点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T18:11:03.970

您应该遵循以下格式： `POINT( a.latitude, a.longitude )`

但由于某种原因，我在这样做时遇到了麻烦，所以我只是重用了`:lat`& `:lng`，我可以轻松地将其放入我的数据库中。当我的线路在连接之前，由于某种原因，我收到了一个 HY000（无法连接到数据库）错误`$newPosition = "POINT(" . $newlat . ", " . $newlng . ")";`，但是有了一点 PDO/SQL，我不再需要为 $newPosition 操心了：

`SET lat = :lat, lng = :lng, position = POINT( :lat, :lng)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-01T08:04:16.623

采用

> GeomFromText('POINT(1 1)')

```
$valuea = "$lat $lng";

GeomFromText('POINT($valuea)')", //Example: GeomFromText('POINT(31.95635 35.945843)') 
```

并注意表列类型它应该是*point*的类型。

例子：

```
CREATE TABLE mytable(
    id int(11) NOT NULL AUTO_INCREMENT,
    geo_point point DEFAULT NULL,
    PRIMARY KEY (id),
) 
```

# tizen - 在 tizen 中创建文件

> ID：11986143
> 
> 赞同：3
> 
> 时间：2012-08-16T11:28:19.027
> 
> 标签：tizen

我正在尝试在 tizen 中创建新文件。我的代码是

```
var dir;
var newDir = dir.createDirectory("vij"); 
```

但它越来越像错误

```
TypeError: 'undefined' is not an object (evaluating 'dir.createDirectory') 
```

我尝试了 Tizen 文档中给出的相同示例。请给个思路

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-24T13:40:01.270

`dir`像这样声明：

```
var dir = tizen.filesystem; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T13:10:55.143

因为`var dir;`在您的代码中，您实际上声明了一个未定义的`dir`变量，您会收到该错误，因为`dir`将是`undefined`.

如果您检查文档中的 API，这是执行此操作的方法：

```
 var documentsDir;
 function onsuccess(files) {
   for(var i = 0; i < files.length; i++) {
     console.log("File Name is " + files[i].name); // displays file name
   }

   var testFile = documentsDir.createFile("test.txt");
   if (testFile != null) {
     testFile.openStream(
         "w",
         function(fs){
           fs.write("HelloWorld");
           fs.close();
         }, function(e){
           console.log("Error " + e.message);
         }, "UTF-8"
     );
   }
 }

 function onerror(error) {
   console.log("The error " + error.message + " occurred when listing the files in the selected folder");
 }

 tizen.filesystem.resolve(
     'documents',
     function(dir){
       documentsDir = dir; dir.listFiles(onsuccess,onerror);
     }, function(e) {
       console.log("Error" + e.message);
     }, "rw"
 ); 
```

您在文档中找到的以下两个示例在上面的上下文中是有意义的，即调用了 tizen.filesystem.resolve。

```
var newDir = dir.createDirectory("newDir");
var anotherNewDir = dir.createDirectory("newDir1/subNewDir1"); 
```

所以如果你想创建一个文件，你执行上面的代码（完全是第一个）如果文件是在 listFiles 的 onsuccess 回调中创建的，如果你想创建一个目录，你需要这样做：

```
tizen.filesystem.resolve(
       'documents', 
       function(dir){
        var newDir = dir.createDirectory("vij");
       }, function(e){
         console.log("Error" + e.message);
       }, "rw"
     ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-20T21:41:19.277

首先，您需要 config.xml 中的 2 个权限来写入文件：
`<tizen:privilege name="http://tizen.org/privilege/filesystem.write"/> <tizen:privilege name="http://tizen.org/privilege/filesystem.read"/>`
可以手动添加，或者使用“previlages”选项卡。之后，您应该使用[文件系统 API 方法 - createDirectory](https://developer.tizen.org/dev-guide/2.2.1/org.tizen.web.device.apireference/tizen/filesystem.html#createDirectoryidp346592)

`tizen.filesystem.resolve( 'images', function(dir) { var dir; //Directory object obtained from filesystem API var newDir = dir.createDirectory("newDir"); console.log("Mount point Name is " + dir.path); }, function(e) { console.log("Error: " + e.message); }, "rw" );` 结果，您的文件夹将位于 /opt/usr/media/Images/

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-01T08:54:41.530

这是在 tizen Web 应用程序中添加文件的方式：

创建文件：

> 在相对于目录的指定位置创建一个空的新文件。“文件创建文件（DOMString 相对文件路径）；”

例子：

```
tizen.filesystem.resolve(
   absolute_path, 
   function(dir){
    dir.createFile(<filename>);
   }, function(e) {
     console.log("Error" + e.message);
   }, "rw"
); 
```

更多信息可以在下面的链接中找到：http: [//howdoudoittheeasiestway.blogspot.in/2015/02/writing-and-reading-from-file-system.html](http://howdoudoittheeasiestway.blogspot.in/2015/02/writing-and-reading-from-file-system.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-02-24T02:02:18.570

在使用目录对象之前，您需要从 tizen.filesystem.resolve API 解析文件或目录对象。

在您的代码中，您的 dir 对象仅包含空字符串。

因此，首先从 tizen.filesystem.resolve API 获取 File(file&dir) 对象。

下面是 tizen.filesystem.resolve api，您可以在 FileSuccessCallback onsuccess 方法上获取文件对象。

```
void resolve(DOMString location, FileSuccessCallback onsuccess, optional ErrorCallback? onerror, optional FileMode? mode); 
```

像下面的代码。

```
tizen.filesystem.resolve(
   'images',
   function(dir) {
     //do something what you want
     console.log("Mount point Name is " +  dir.path);
   }, function(e) {
     console.log("Error: " + e.message);
   }, "r"
 ); 
```

API 参考上有有用的教程和示例代码。

文件系统教程 [https://developer.tizen.org/development/tutorials/web-application/tizen-features/base/filesystem#create](https://developer.tizen.org/development/tutorials/web-application/tizen-features/base/filesystem#create)

文件系统 API 参考 [https://developer.tizen.org/dev-guide/latest/org.tizen.web.apireference/html/device_api/mobile/tizen/filesystem.html](https://developer.tizen.org/dev-guide/latest/org.tizen.web.apireference/html/device_api/mobile/tizen/filesystem.html)

下面是虚拟根表

```
images - the location for images
videos - the location for videos
music - the location for sounds
documents - the location for documents
downloads - the location for downloaded items
ringtones - the location for ringtones (read-only location)
camera - the location for the pictures and videos taken by a device (supported since Tizen 2.3)
wgt-package - the location for widget package which is read-only
wgt-private - the location for a widget's private storage
wgt-private-tmp - the location for a widget's private volatile storage 
```

# php - MySQL根据日期计算价格变化的太阳能收入

> ID：11986144
> 
> 赞同：0
> 
> 时间：2012-08-16T11:28:28.873
> 
> 标签：php, mysql

我有一个问题，我似乎无法理解，希望有人可以帮助给我一些建议。

自从在我的屋顶上安装太阳能光伏电池以来，我一直在发电，并且根据一些（相当慷慨的）激励措施来做这种事情，我每发电一千瓦时就赚钱。看到这有点像一个数据库项目，我开始编写一些 PHP/MySQL 来跟踪每日发电量，现在有近一年的每日 kWh 读数，这些读数以图形形式很好地呈现给我，都在一个月内- 按月查看，并作为年度（按月分组）图表。

我现在想扩展系统以显示货币收入，而不是千瓦时的电力。目前，这个数字是每千瓦时 0.454 英镑，尽管这个数字在每年 4 月 1 日都会发生变化（之前是 0.433 英镑）。

这是我当前的 MySQL 结构：

```
Table feedin:
  year (year4)   rate (float)
  2010           0.433
  2011           0.433
  2012           0.454

Table generation:
  day (DATE)     reading (float)
  2011-12-01     7.682
  2011-12-02     5.747
  2011-12-03     4.982
  ...            ...
  2012-08-13     8.022
  2012-08-14     19.449
  2012-08-15     5.484 
```

我的第一次尝试非常麻烦，因为 PHP 和 MySQL 查询非常混杂，大部分逻辑都是在 PHP 中完成的（我的 MySQL 技能充其量是“有限的”）。然而，随着时间的推移，我发现如果整个事情都在 MySQL 中完成，那将是理想的。

我真的不知道如何解决这个问题。我最初的想法是，我们需要选择每年的数据块（嗯，日期范围从一年的 4 月 1 日到下一年的 3 月 31 日），并将其乘以适当的年率。并且“适当的年利率是在该日期范围开始时适用的利率，即截至 4 月 1 日）。

理想情况下，我希望查询能够处理多个年度边界，因此，例如，几年后，我希望能够查询迄今为止产生的绝对总收入。最终，我只想向查询传递开始和结束日期，它会返回正确的数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:33:47.600

将发电日期的年份链接到上网电价的年份

```
SELECT *, generation.reading*feedin.rate AS profit
 FROM generation, feedin
 WHERE YEAR(generation.day)=feedin.year 
```

但是因为这必须与 4 月 1 日的年初有关

```
SELECT *, generation.reading*feedin.rate AS profit
 FROM generation, feedin
 WHERE YEAR(DATE_SUB(generation.day, INTERVAL 3 MONTH))=feedin.year 
```

这也会将记录的日期向后移动 3 个月，使它们成为 1 月至 12 月而不是 4 月至 3 月，这将与饲养年相匹配

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T11:35:59.397

这些方面的东西：

```
select year, sum(reading) as total_generation, (total_generation*feedin.rate) 
FROM feedin 
LEFT JOIN generation on feedin.year = YEAR(generation.day)
GROUP BY year 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T11:54:23.853

希望这能满足您的要求（经过测试并正常工作） `SELECT (a.rate*b.reading),a.year as amount from generation as b, feedin as a where Year(b.day)=a.year`

# java - Android、Google Play - “服务器无法处理您的 apk。再试一次。” 错误

> ID：11986147
> 
> 赞同：0
> 
> 时间：2012-08-16T11:28:39.823
> 
> 标签：java, android, android-manifest, google-play

我反复尝试上传我的应用程序，但每次上传都崩溃了。在上传之前，我清理并构建了项目，然后我将其导出。

这是我的清单：

```
<?xml version="1.0" encoding="utf-8"?>    
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.android.inzerujem"    
    android:versionCode="1"
    android:versionName="1.0" >    
    <uses-permission android:name="android.permission.INTERNET" />    
    <uses-permission android:name="android.permission.SEND_SMS" />     
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />     
    <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="8" />    
    <application
        android:icon="@drawable/icon"
        android:label="@string/app_name" >    
        <activity
            android:name=".InzerujemActivity"
            android:label="@string/app_name" >    
            <intent-filter>    
                <action android:name="android.intent.action.MAIN" />    
                <category android:name="android.intent.category.LAUNCHER" />    
            </intent-filter>    
        </activity>    
        <activity
            android:name="TopicActivity"
            android:screenOrientation="portrait" >    
        </activity>    
    </application>    
</manifest> 
```

谢谢你的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:48:05.277

```
package="com.android.inzerujem" 
```

有你的问题。不允许使用 com.android 作为包名*。*

# javascript - 在 radTreeView 中选择一个节点

> ID：11986149
> 
> 赞同：1
> 
> 时间：2012-08-16T11:28:57.337
> 
> 标签：javascript, asp.net, telerik

你好，这是我的代码，我希望你能帮助我，因为 Telerik 支持论坛很烂

代码：

```
 function SearchClick() {

            var search = $get("<%= ApplicationSearchResult.ClientID %>").value;
            var treeView = $find("<%= MainTree.ClientID %>");
            var nodes = treeView.get_allNodes();
            var NextNode = document.getElementById("<%=NextNode.ClientID %>");
            NextNode.style.display = "block";
            for (var i = 0; i < nodes.length; i++) {
                var node = nodes[i];
                if (node.get_text() == search) {
                    node.select();
                    expandAllAncestors(node);
                    return;
                }
            }

         } 
```

标记：

```
<telerik:RadTreeView ID="MainTree" runat="server" CssClass="NewClass" OnNodeClick="NodeClick" 
    Skin="Office2010Silver">
<Nodes>
<telerik:RadTreeNode Selected="true" Text="Hello"  Value="0">
    <Nodes>
        <telerik:RadTreeNode runat="server" Text="Hi" Value="1">
        </telerik:RadTreeNode>
    </Nodes>
    </telerik:RadTreeNode>
<telerik:RadTreeNode  Text="Hellooooooooooooo" Value="2">
    <Nodes>
        <telerik:RadTreeNode runat="server" Text="helloooo" Value="3">
        </telerik:RadTreeNode>
    </Nodes>
    </telerik:RadTreeNode> 
```

```
 <Nodes>
    <telerik:RadTreeNode  Text="Hi" Value="7"></telerik:RadTreeNode>
    <telerik:RadTreeNode  Text="Hiiiiiiiiiiiiiii" Value="8"></telerik:RadTreeNode>
    <telerik:RadTreeNode  Text="Hello" Value="9"></telerik:RadTreeNode> 
    </Nodes>
    </telerik:RadTreeView>
    <telerik:RadTextBox ID="ApplicationSearchResult" runat="server"></telerik:RadTextBox>
    <asp:Image src="Magnifier.png" ToolTip="search" onclick="SearchClick();"  style="cursor:pointer;" runat="server" height="17" width="17" ID="Search" /> 
```

我的问题是当达到 node.select() 时它会自动执行 NodeClick 服务器事件我怎样才能防止这种情况发生并且当用户单击节点时执行 NodeClick

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T11:33:17.027

更改`node.select();`为`node.set_selected(true)`

也许 Telerik 支持真的很烂，但是您是否尝试过阅读文档？

# iphone - 我应该为开发/生产 iOS 推送通知证书使用相同的 CSR 吗？

> ID：11986150
> 
> 赞同：13
> 
> 时间：2012-08-16T11:28:58.350
> 
> 标签：iphone, objective-c, ios, xcode, apple-push-notifications

**更新：**

我发现在为 iOS 推送通知创建证书时，我可以为开发和生产提交相同的 CSR。

对于单个应用程序，我需要创建 2 个证书（开发/生产），因此对于 10 个应用程序，我需要创建 20 个证书 - 这是证书管理的噩梦并污染我的钥匙串，所以我想通过提交相同的 CSR（因此相同的私钥）..只是更容易维护这些东西。

我想知道是否有任何缺点，您是否也在采取同样的方式来减少密钥/证书管理的工作量？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-19T17:43:12.403

您不一定必须使用不同的私钥进行开发和生产，但您应该使用，尤其是在大型团队中或与外部开发人员一起工作时。

每个必须测试通知代码的开发人员都需要访问开发证书的私钥。如果您对生产证书使用相同的密钥，您还可以授予他们在生产系统中发送通知的权限。这一切都归结为信任——您是否相信您团队中的每个开发人员都不会使用密钥对您的付费客户进行恶作剧，无论是现在还是永远？

如果您是独自工作，或者如果您真的完全信任团队中的每个人，请继续使用单个密钥。但是想想如果有人误用了钥匙的后果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T07:42:01.157

看这里[ProvisioningDevelopment](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/RemoteNotificationsPG/ProvisioningDevelopment/ProvisioningDevelopment.html)

> 您必须获得沙盒（开发）环境和生产环境的单独证书。证书与作为推送通知接收者的应用程序标识符相关联；此标识符包括应用程序的捆绑 ID。当您为其中一种环境创建配置文件时，必要的权利会自动添加到配置文件中，包括特定于推送通知的权利，. 这两个配置文件称为开发和分发。分发配置文件是将您的应用程序提交到 App Store 的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T08:11:13.233

改写shannoga的答案。虽然您可以在开发阶段使用相同的证书，但每个应用程序在提交到应用商店时都需要适当的证书。最好在这两个阶段为应用程序创建适当的证书，这样您就可以确保满足 Apple 标准。

仅仅因为某事有效，并不能使它正确。通过在开发阶段正确维护证书，当您必须过渡到生产时，它会变得更容易，因为您的代码不会依赖捷径。

# java - 字符串实例化与字符串缓冲区实例化

> ID：11986152
> 
> 赞同：4
> 
> 时间：2012-08-16T11:29:04.107
> 
> 标签：java

我不知道如果

```
String ab = "hello";        //straight initialization

String ab_1 = new String ("hello_1");  //initializing using new 
```

两者都有效，但是

```
StringBuffer bfr = new StringBuffer("hi");   //works only with new 
```

仅在使用 new 创建时才有效。

为什么 String 可以直接实例化，而 StringBuffer 需要 new 运算符。有人可以解释一下主要原因吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T11:32:09.790

所有对象都需要用`new`. 只有原语可以从文字 ( `int i = 0;`) 中实例化。

唯一的例外是：

*   字符串，它允许特殊的初始化构造：

```
 String s = "abc"; //can be instantiated from a literal, like primitives 
```

*   空实例化：`Object o = null;`

它在[Java 语言规范 #3.10](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10)中定义：

> 文字是原始类型、字符串类型或空类型的值的源代码表示。

注意：数组也有一个专用的初始化模式，但这不是文字：

```
 int[][] a = { { 00, 01 }, { 10, 11 } }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T12:01:49.093

使用`String s1 = "hello";`和`String s2 = new String("hello");`有细微差别。

```
 public static void main(String[] arg ) {
    String s1 = "Java";
    String s2 = "Java";
    String s3 = new String("Java");
    System.out.println(s1==s2); //true
    System.out.println(s1==s3); //false

    StringBuilder sb = new StringBuilder(25); //initial capacikacity
    sb = new StringBuilder(10);
    sb.append(s1).append(" uses immutable strings.");
    sb.setCharAt(20, 'S');
    System.out.println(sb);
} 
```

在上面的代码中，“Java”被称为字符串文字。为了节省内存，这两次出现在代码中，都是**同一个**String字面量，所以s1和s2实际上指的是内存中的同一个对象。虽然`s1.equals(s3)`是真的，但它们不会引用内存中的相同对象，如上所示。

在实践中，我们总是`.equals`用来比较字符串，它们是不可变的，所以我们不能改变 s1 引用的数据（至少不容易）。但是如果我们能够改变 s1 引用的数据，那么 s2 也会随之改变。

StringBuilder 确实允许您修改底层数据：我们经常使用它来将一个字符串附加到另一个字符串，如上图所示。我们很高兴这`StringBuilder sb2 = "what?"`是非法的，因为在 StringBuilders 的情况下，让它们中的两个引用相同的数据（意味着 sb1==sb2）更有可能导致 sb1 的更改导致 sb2 的意外更改的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T11:36:27.433

```
 String ab = "hello";        //straight initialization
 String ac = "hello";  // create one more reference ac 
```

`String`是一种特殊情况，当您使用 new 关键字时，将创建一个新的 String 对象。请注意，对象总是在堆上——字符串池不是与堆分开的单独内存区域。字符串池就像一个缓存。

之所以这样，是因为字符串是 java 大量使用的东西，使用 new 关键字创建字符串对象是昂贵的，这也是 java 引入`StringPool`概念的原因。

如果您声明一个`ac`具有相同值的变量，java 将不会创建新对象（字符串），它只会引用`hello`池中已经存在的相同对象（）。

```
 String ab_1 = new String ("hello_1");  //initializing using new 
```

它将简单地在内存中创建对象并`ab_1`引用该对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T11:36:49.370

字符串在 Java 中是一个非常特殊的情况（在我看来这并不是一件好事，但这并不重要）。

与其他对象不同，字符串可以像常量一样直接实例化。执行此操作时，String 常量将添加到 String 常量池中，并像处理原语一样处理。让我举个例子吧。

```
String a = "abc";
String b = "abc"; 
```

当您实例`a`化为“原始”字符串时，它会被添加到池中，当您实例化时`b`，会从池中返回相同的对象，因此如果您这样做：

```
a == b; 
```

你会得到... `true`，因为它实际上是同一个对象。如果你用 实例化两者`new`，你会得到错误的，因为你正在比较两个不同对象的引用（新的强制创建一个不同的对象）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-16T11:39:19.253

基于“存储”字符串的“位置”还有另一个区别 - 内存或字符串常量池。

> 为了提高 Java 的内存效率，JVM 预留了一个特殊的内存区域，称为“字符串常量池”。当编译器遇到字符串字面量时，它会检查池以查看是否已经存在相同的字符串。如果找到匹配项，则对新文字的引用将定向到现有字符串，并且不会创建新的字符串文字对象。（现有的字符串只是有一个额外的参考。）

```
String s = "abc"; // creates one String object and one reference variable 
```

在这个简单的例子中，“abc”将进入池中，s 将引用它。

```
String s = new String("abc"); // creates two objects, and one reference variable 
```

在这种情况下，因为我们使用了 new 关键字，Java 将在普通（非池）内存中创建一个新的 String 对象，s 将引用它。此外，文字“abc”将被放入池中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-16T11:40:44.990

字符串由 java 编译器专门处理。当您键入诸如`"hello"`之类的字符串文字时，编译器会在`String`内部为您创建一个新对象。

没有为`StringBuffer`s 执行这样的事情（尽管 Java`StringBuffer`在内部将 s 用于另一个目的 - 用于实现字符串连接）。

有关更多详细信息，请参阅[字符串对象和字符串文字之间的区别](https://stackoverflow.com/questions/3297867/difference-between-string-object-and-string-literal)。

其他指针：

*   [String、StringBuffer 和 StringBuilder](https://stackoverflow.com/questions/2971315/string-stringbuffer-and-stringbuilder)
*   [+ Java中字符串的运算符](https://stackoverflow.com/questions/2328483/operator-for-string-in-java)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-16T11:44:47.393

String 是一个可变类，并且具有内置构造函数，可以从字符串文字创建 String 对象。

在 String 的情况下也不例外（就像像原始 .eg int i =0 一样创建它）。String 还执行构造函数来初始化以下（只是它的抽象而不是直接可见的区别）：

```
String str = "ABC"; 
```

因为这里的“ABC”也代表一个字符串对象，程序员不能直接使用，但它驻留在字符串池中。并且当这条语句将被执行时，JVM 将在内部调用私有构造函数以使用位于池中的“ABC”对象创建对象。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-02-11T15:12:43.713

基本上，由于字符串被大量使用，Java 提供了一种用于实例化字符串的速记解决方案。

而不是总是使用这个，

```
String str = new String ("hello"); 
```

Java 使它能够做到这一点：

```
String str = "hello"; 
```

# java - 允许应用程序使用网络发送或接收数据？

> ID：11986158
> 
> 赞同：2
> 
> 时间：2012-08-16T11:29:34.550
> 
> 标签：java, java-me, network-programming, midp

我的 J2me 应用程序遇到问题。

“允许应用程序使用网络发送或接收数据？”......用按钮选择“是”或“否”。

如果我选择“否”，那么什么也不会发生。（我的应用程序在步行中，在这种情况下没有网络连接我想关闭不在步行中的应用程序）

如果我选择“是”，则会出现一个新屏幕，（应用程序工作正常）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:48:48.810

MIDP 规范附录中涵盖了您所询问的内容：[适用于 GSM/UMTS 兼容设备的推荐安全策略](http://jcp.org/aboutJava/communityprocess/maintenance/jsr118/MIDP_2.0.1_MR_addendum.pdf)。

上述文件相当冗长和复杂。为了更容易理解（虽然不太精确）的解释，请查看这篇文章：[了解 MIDP 2.0 的安全架构](http://www.oracle.com/technetwork/systems/index-156128.html)：

> ... 本文介绍了保护用户及其设备免受恶意软件侵害的其他 MIDP 2.0 功能。您将使用 J2ME Wireless Toolkit 2.0... 来了解如何使用 MIDP 2.0 的安全架构。
> 
> ### 什么是敏感操作？
> 
> MIDP 2.0 规范定义了一个开放式的权限系统。要进行任何类型的网络连接，MIDlet 必须具有适当的权限...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T12:13:07.197

如果在“允许应用程序使用网络发送或接收数据？”中单击“否” alert ，它会在尝试打开连接时**抛出 SecurityException 。**只需**捕获**SecurityException。在 catch 块中，调用**notifyDestroyed()**以关闭应用程序。

```
StreamConnection s = null;

try {
s = (StreamConnection) Connector.open(searchContactUrl);
//your code
} catch (SecurityException se) {
   this.notifyDestroyed();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T13:49:35.193

您正在访问应用程序中的受限 API。要使用此应用程序，您的应用程序必须使用[VesiSign](https://www.verisign.com/)或[Thawte](https://www.thawte.com)等签名证书进行签名。现在你的问题是

*   当你按**no**时：

    因此，当您按“**否**”时，它会自动假定您的选择也将是“否”，因此下次不会询问。当您下一次在单次运行中访问相同的 api 时，您的应用程序将无法在下次出现时访问此类 api。

*   当你按下**是**

    因此，当您按下**是**时，您的申请会继续进行。但是当您再次访问受限 api 时，它会再次警告您是否可以访问它。有些 api 需要一次用户输入（是），而有些则需要每次访问它们。

因此，要避免此消息，唯一的方法是签署您的应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T11:45:08.780

在 Java ME 应用程序中，访问网络数据的安全消息将显示给用户。要删除此消息，应从制造商处签署/证明申请

现在选项是 YES 和 NO 是由你放置的，选项不关闭只使用代码：

```
// Arrange for the MIDlet to be destroyed
this.notifyDestroyed(); // where this is an instance of the MIDlet 
```

有关申请认证的更多信息：

[http://www.developer.nokia.com/Distribute/Packaging_and_signing.xhtml](http://www.developer.nokia.com/Distribute/Packaging_and_signing.xhtml)（诺基亚）

# java - Java - WEKA - 向训练集添加新类别

> ID：11986159
> 
> 赞同：2
> 
> 时间：2012-08-16T11:29:40.020
> 
> 标签：java, attributes, weka, instances

我正在使用 WEKA 来训练分类 Java 程序。最初有几个类别，比如说 10 个，系统必须处理这些初始类别并开始训练。为了做到这一点......：

```
String [] categories = {"cat1", "cat2", ..., "cat10"};

public SomeClassifier(String[] categories) {

// Creates a FastVector of attributes.
FastVector attributes = new FastVector(3);

// Add attribute for holding property one.
attributes.addElement(new Attribute(P1_ATTRIBUTE, (FastVector) null));

// Add attribute for holding property two.
attributes.addElement(new Attribute(P2_ATTRIBUTE, (FastVector) null));

// Add values attribute.
FastVector values = new FastVector(categories.length);
for (int i = 0; i < categories.length; i++) {
    values.addElement(categories[i]);
}

attributes.addElement(new Attribute(CATEGORY_ATTRIBUTE, values));

// Create dataset with initial capacity of 25, and set index
Instances myInstances = new Instances(SOME_NAME, attributes, 25);
myInstances.setClassIndex(myInstances.numAttributes() - 1);
} 
```

好的，现在，时间过去了，我想在我的训练集中添加一个新类别（比如说“cat11”），它已经在训练中取得了一些成功。我怎样才能做到这一点？WEKA 文档说“一旦创建了属性，就无法更改”。所以，也许我可以从 Instances 对象中取出 Attribute，重新创建 Attribute，然后再次插入它......或者这会搞砸一切吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:37:05.087

好的，显然，没有办法使用这种朴素贝叶斯实现来做这样的事情。这是因为在初始化分类器时，附加到分类器的所有类别的总和必须为 1，而在训练分类器时，概率 != 0 的新类别将导致分类器以总和 > 1 的奇怪方式运行。 ，分类器可能会根据类别数量的影响来初始化其算法（计算条件概率和迭代），并且在创建后添加一个新的将意味着以某种方式重建算法。

所以，这就留下了一个问题……我可以使用什么分类机制来让我随着时间的推移引入新的类别？

# jsf-2 - 如何存储富状态：手风琴项目？

> ID：11986165
> 
> 赞同：0
> 
> 时间：2012-08-16T11:29:50.400
> 
> 标签：jsf-2, richfaces

我想使用丰富的手风琴制作像[http://showcase.richfaces.org/这样的导航页面。](http://showcase.richfaces.org/)当用户单击链接时，我希望用户能够保存丰富的手风琴状态，如 exadel 演示中的那样。我怎样才能实现这种行为？使用 Richfaces 4。

```
<rich:accordion switchType="ajax">
                            <rich:accordionItem header="Daily Sales" >                           
                                <h:outputLink value="../GKPI/R.xhtml">1\. R</h:outputLink> <br></br>                                                              
                            </rich:accordionItem>

                            <rich:accordionItem  header="Weekly Sales" > 
                                <h:outputLink value="../GKPIW/CR.xhtml">1\. CR</h:outputLink> <br></br>                              
                            </rich:accordionItem>
  </rich:accordion> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T06:30:17.660

解决方案是添加 activeItem="#{bean.activeItem}" 其中 activeItem 是托管 bean 中的字符串变量。

```
<rich:accordion switchType="ajax" activeItem="#{kpilist.activeItem}" >
</rich:accordion> 
```

# magento - Magento 不向未登录的用户显示产品

> ID：11986167
> 
> 赞同：3
> 
> 时间：2012-08-16T11:30:07.233
> 
> 标签：magento, magento-1.7

使用 Magento CE 1.7，我上传了多个 csv 文件来创建类别，创建大量产品，并将产品分配到正确的类别。我不知道它究竟是什么时候发生的，但大约两周前，我注意到类别列表页面将停止在前端显示产品。我为这个项目花费了近一半的开发时间，试图让类别页面始终如一地展示产品。

今天我再次注意到，类别页面不再显示产品。我再次登录管理部分并仔细检查产品是否处于活动状态、有库存、有数量以及是否刷新了索引（我已关闭缓存，所以这不是问题）。当通常的修复都不起作用时，我继续执行当天的原始任务。我登录了会员区并在那里进行了调整。就在那时，我回到分类页面，发现产品又回来了。通过登录和注销，我可以使类别页面显示/隐藏产品。我一直在通过管理部分寻找一个选项，该选项可能会向未登录的用户隐藏产品但无法找到一个。

为什么我的产品在用户未登录时不显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T11:30:07.233

在浏览管理面板的客户组部分时，我注意到有一个“未登录”用户条目。不过，这其中有些可疑之处。ID是'5'。其他客户组从 1 上升到 3，没有 id 为 4 的条目。

我的解决方案是更改我的数据库以将“未登录”客户组的 id 设置为 0：

```
 UPDATE customer_group SET customer_group_id = 0 WHERE customer_group_code = 'NOT LOGGED IN' 
```

# html - 您 view.aspx 中使用的 Html

> ID：11986170
> 
> 赞同：0
> 
> 时间：2012-08-16T11:30:11.273
> 
> 标签：html, asp.net-mvc

我不太确定。我有一个由 2 个 foreach 循环（2 个报告）组成的表，并将每一行呈现在`<tr>`

在报告的数据之间我想插入一个开放的行来拆分数据，更容易阅读，我插入了一个空的`<tr>`，但这似乎不起作用。我也试过`</ br>`并得到警告。

我知道普通的 html 和 php..这有什么不同吗？

我的观点.aspx

```
 <%@ Page Title="" Language="C#" MasterPageFile="~/Views/Report/Report.Master" Inherits="System.Web.Mvc.ViewPage<IEnumerable<TradeUK.Entities.Reporting.KPIResults>>" %>

 <asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
     TradeUK KPI Searches Data
 </asp:Content>

 <asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

 <h2>TradeUK KPI Searches Data</h2>

<p>
<%: Html.ActionLink("Export as CSV...", "TradeUKKPIDataExport", "Report", new { @date = ViewBag.jobSortedReportDate}, null )%>    
</p>

<table>
<tr>
    <th style="width: 400px;">
        Title
    </th>
    <th style="width: 150px;">
        Total
    </th>
    <th style="width: 150px;">
        Week 6
    </th>
    <th style="width: 150px;">
        Week 5
    </th>
    <th style="width: 150px;">
        Week 4
    </th>
    <th style="width: 150px;">
        Week 3
    </th>
    <th style="width: 150px;">
        Week 2
    </th>
    <th style="width: 150px;">
        Week 1
    </th>
</tr>

<% foreach (var item in Model)
  {
%>
  <tr>
    <td>
        <%: item.Title%>
    </td>
    <td>
        <%: item.Total%>
    </td>
    <td>
        <%: item.Week6%>
    </td>
    <td>
        <%: item.Week5%>
    </td>
    <td>
        <%: item.Week4%>
    </td>
    <td>
        <%: item.Week3%>
    </td>
    <td>
        <%: item.Week2%>
    </td>
    <td>
        <%: item.Week1%>
    </td>
</tr>  

<%} %>

<tr></tr><tr></tr><tr></tr>    
<tr>
    <th style="width: 400px;">
        Title
    </th>
    <th style="width: 150px;">
        Total
    </th>
    <th style="width: 150px;">
        Week 6
    </th>
    <th style="width: 150px;">
        Week 5
    </th>
    <th style="width: 150px;">
        Week 4
    </th>
    <th style="width: 150px;">
        Week 3
    </th>
    <th style="width: 150px;">
        Week 2
    </th>
    <th style="width: 150px;">
        Week 1
    </th>
</tr>

<% foreach (var item2 in ViewBag.jobSortedModel)
{
%>
  <tr>
    <td>
        <%: item2.Title %>
    </td>
    <td>
        <%: item2.Total %>
    </td>
    <td>
        <%: item2.Week6 %>
    </td>
    <td>
        <%: item2.Week5 %>
    </td>
    <td>
        <%: item2.Week4 %>
    </td>
    <td>
        <%: item2.Week3 %>
    </td>
    <td>
        <%: item2.Week2 %>
    </td>
    <td>
        <%: item2.Week1 %>
    </td>
</tr>  
<% 
  } %>

 </table>
 </asp:Content> 
```

我不太明白？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:36:10.413

你可以试试这个。

而不是`<tr></tr><tr></tr><tr></tr>`use `<tr><td colspan="8">&nbsp;</td></tr>`，您可以为此 td 设置一些样式，以制作更多垂直空间，例如`<tr><td colspan="8" style="height:2em;">&nbsp;</td></tr>`

# python - python smbus/i2c 频率

> ID：11986178
> 
> 赞同：1
> 
> 时间：2012-08-16T11:30:45.060
> 
> 标签：python, i2c, raspberry-pi

我想更改 i2c 总线频率以允许使用稍长的电缆。

我正在使用 python-smbus 包，它工作得很好，但是，我无法找到如何设置总线频率。

我浏览了[文档](http://wiki.erazor-zone.de/wiki%3alinux%3apython%3asmbus%3adoc)，但找不到任何与设置总线参数相关的东西。

这是可以在 python 中完成的任何事情，还是我需要更低级别的东西？

我正在使用 Raspberry PI，它是一种 ARM 架构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-02-22T08:04:42.867

在带有最新 Jessie 映像的 Raspberry Pi 上，您可以使用它来检查当前的 I2C 频率：
`sudo cat /sys/module/i2c_bcm2708/parameters/baudrate`.

要更改频率，您可以添加/更改此参数：

`dtparam=i2c_baudrate=50000`

（将 50000 替换为所需的频率）在：

`/boot/config.txt`

并重新启动以更改频率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T12:26:41.677

你必须在较低的层次上做一些事情。通常这些东西是由内核中的[板文件设置的。](https://github.com/raspberrypi/linux/blob/rpi-3.2.27/arch/arm/mach-bcm2708/bcm2708.c)除了分配资源之外，我没有看到 i2c 有什么特别的事情，所以它可能只是使用默认的时钟除数。[如果您查看数据表](http://www.element14.com/community/docs/DOC-43016/l/broadcom-datasheet-for-bcm2835-soc-used-in-raspberry-pi)的第 28 页，您会看到默认值为 0x5dc。您需要使用不同的值（可能更大）设置该寄存器以应对更长的电缆。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T16:22:27.573

我现在已经花费了大量时间研究所有选项。事实证明，确实存在其他帖子中指定的低级寄存器，但是，Raspberry-Pi 的驱动程序在每次使用时都会重置它们的值，对它们进行任何修改都几乎没有用。解决方案是编写自定义 i2c 驱动程序或只是等待更新版本。

一些较低级别的信息可以在[byval 论坛](http://www.byvac.com/forum/read.php?4,71)中找到。

# jsf-2 - JSF 2 基本 @RequestScoped CRUD

> ID：11986181
> 
> 赞同：2
> 
> 时间：2012-08-16T11:30:55.377
> 
> 标签：jsf-2, crud, managed-bean

我有这些简单的页面：

列表.xhtml

```
<h:form id="form">  
    <h:dataTable value="#{testBean.model}" var="elem">
        <h:column>
            <f:facet name="header">code</f:facet>
            #{elem.code}
        </h:column>
        <h:column>
            <f:facet name="header">description</f:facet>
            #{elem.description}
        </h:column>
        <h:column>
            <f:facet name="header">action</f:facet>
            <h:commandButton action="#{testBean.edit(elem)}" value="edit"/>
        </h:column>
    </h:dataTable>
</h:form> 
```

编辑.xhtml

```
<h:form id="form">
    <h:panelGrid columns="2">
        <h:outputLabel value="code"/>
        <h:inputText value="#{testBean.selection.code}"/>

        <h:outputLabel value="description"/>
        <h:inputText value="#{testBean.selection.description}"/>
    </h:panelGrid>

    <h:commandButton action="#{testBean.update}" value="update"/>
</h:form> 
```

这个豆子：

```
@ManagedBean
public class TestBean implements Serializable
{
    private static final long serialVersionUID = 1L;

    @EJB
    private PersistenceService service;
    private Object selection;
    private List<UnitType> model;

    @PostConstruct
    public void init()
    {
        model = service.findAll(UnitType.class);
    }

    public String edit(Object object)
    {
        System.out.println(Tracer.current(object));
        setSelection(object);
        return "edit";
    }

    public String update()
    {
        System.out.println(Tracer.current(selection));
        return "list";
    }

    // getters and setters
} 
```

所以表格被渲染，当我单击“编辑”按钮之一时，它导航到“edit.jsf”显示填充输入，但是当我单击“更新”按钮时，它给了我这个错误：

```
javax.el.PropertyNotFoundException: /test2/edit.xhtml @27,54 value="#{testBean.selection.code}": Target Unreachable, 'null' returned null 
```

请注意，我知道如何实现 @ViewScoped 接口来管理 CRUD 操作，但这是一个简单的概念证明，我需要更好地理解 JSF 生命周期。

**所以我希望“testBean”成为@RequestScoped**

* * *

**更新**尝试`f:viewParam`，仍然不明白......

列表.xhtml

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core">
    <h:head>
        <title>test list</title>
    </h:head>

    <h:body>
        <h:messages/>

        <h:form id="form">
            <h:dataTable value="#{testBean2.model}" rows="10" var="elem">
                <h:column>
                    <f:facet name="header">converterString</f:facet>
                    #{elem.converterString}
                </h:column>
                <h:column>
                    <f:facet name="header">first name</f:facet>
                    #{elem.firstName}
                </h:column>
                <h:column>
                    <f:facet name="header">last name</f:facet>
                    #{elem.lastName}
                </h:column>
                <h:column>
                    <f:facet name="header">action</f:facet>
                    <h:commandButton action="#{testBean2.edit}" value="edit">
                        <f:param name="entity" value="#{elem.converterString}"/>
                    </h:commandButton>
                    <h:commandButton action="#{testBean2.edit2}" value="edit2">
                        <f:param name="entity" value="#{elem.converterString}"/>
                    </h:commandButton>
                </h:column>
            </h:dataTable>
        </h:form>
    </h:body>
</html> 
```

编辑.xhtml

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core">
    <f:metadata>
        <f:viewParam id="entityParam" name="entity" value="#{testBean2.selection}" converter="entityConverter" required="true"/>
    </f:metadata>

    <h:head>
        <title>test edit</title>
    </h:head>

    <h:body>
        <h:messages/>

        <h:form id="form">
            <h:panelGrid columns="2">
                <h:outputLabel value="selection"/>
                <h:outputText value="#{testBean2.selection.converterString}"/>

                <h:outputLabel value="firstName"/>
                <h:inputText value="#{testBean2.selection.firstName}"/>

                <h:outputLabel value="lastName"/>
                <h:inputText value="#{testBean2.selection.lastName}"/>
            </h:panelGrid>

            <h:commandButton action="#{testBean2.update}" value="update" ajax="false">
                <f:param name="entity" value="#{testBean2.selection.converterString}"/>
            </h:commandButton>
        </h:form>
    </h:body>
</html> 
```

testBean2.java

```
@ManagedBean
public class TestBean2 implements Serializable
{
    private static final long serialVersionUID = 1L;

    @EJB
    private PersistenceService service;

    private Object selection;
    private List<Person> model;

    @PostConstruct
    public void init()
    {
        Tracer.out();
        model = service.queryAll(Person.class);
    }

    public String edit()
    {
        JsfUtils.addSuccessMessage("edited");
        return "edit";
    }

    public String edit2()
    {
        JsfUtils.addSuccessMessage("edited");
        return "edit?faces-redirect=true&amp;includeViewParams=true";
    }

    public void update()
    {
        Tracer.out(selection);
        JsfUtils.addSuccessMessage("updated");
    }

    // getters and setters
} 
```

如果我按“编辑”按钮，它会转到`edit`页面，但选择为空，并且没有显示任何消息。

如果我按下“edit2”按钮，它会转到`edit`页面，但选择为空，显示所需的消息并且 url 是`edit.jsf?entity=`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:05:49.730

据我了解，当您的第二个请求来到 testBean 时，选择对象为空。如果您使用会话 bean 运行它，您可能不会收到此错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T03:45:46.087

在我看来，没有干净的方法可以实现您想要的。

我建议您只需在请求之间传递一个 Id attr 作为一个简单的请求参数。因此，在您的后期构造函数中，检查是否设置了参数值并基于此，在您的持久层中执行查看。

或者，使用您已有的设置，绑定：

```
<h:inputText value="#{testBean.selection.code}"/> 
```

组件到您的支持 bean 并`getValue()`在必要时调用它。无论哪种方式，仍然不整洁。

如果您发现任何其他方式，请告诉我们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-04T09:02:44.170

最后我找到了一种方法：数据将在一个长范围内，简称为bean。

请注意，这只是概念证明，而不是真实用例。并且在处理`@RequestScope`bean时要注意[PrimeFaces 惰性 DataTable 模型范围](https://stackoverflow.com/questions/11918834/primefaces-datatable-lazy-loading-and-commandbutton-per-row/12003577#12003577)

```
@ManagedBean
public class TestBean
{
    @EJB
    private PersistenceService service;

    @ManagedProperty("#{viewScope.item}")
    private Item item;

    @ManagedProperty("#{sessionScope.model}")
    private EntityDataModel<Item> model;

    @PostConstruct
    public void init()
    {
        if(model == null)
        {
            model = new EntityDataModel<Item>(Item.class);
            Faces.setSessionAttribute("model", model);
        }
    }

    public String update()
    {
        Faces.getFlash().setKeepMessages(true);

        try
        {
            item = service.update(item);
            Faces.setViewAttribute("item", item);

            JsfUtils.addSuccessMessage("updated");

            return "view?faces-redirect=true&includeViewParams=true";
        }
        catch(Exception e)
        {
            e.printStackTrace();
            JsfUtils.addErrorMessage(e);
        }

        return null;
    }

    // getters and setters, other actions, ...
} 
```

列表.xhtml

```
<p:dataTable value="#{testBean.model}" var="elem" ...>
    ...

    <p:column exportable="false" toggleable="false" headerText="#{bundle.actions}">

        <!-- two techniques available for navigation -->

        <p:button outcome="view?id=#{elem.converterString}" icon="#{icons.view}" />

        <p:commandButton rendered="#{user.isEditAllowed(elem)}"
            action="edit?faces-redirect=true&amp;includeViewParams=true" process="@form"
            icon="#{icons.edit}">
            <f:param name="id" value="#{elem.converterString}" />
        </p:commandButton>
    </p:column>
</p:dataTable> 
```

视图.xhtml

```
<f:metadata>
    <o:viewParam id="itemId" name="id" value="#{viewScope.item}" required="true"
        converter="entityConverter" />
</f:metadata>

<ui:composition template="/WEB-INF/templates/template.xhtml">
    <ui:define name="content">
        <p:panelGrid columns="2">
            <h:outputLabel value="#{bundle.name}" />
            <h:outputText value="#{item.name}" />

            ...
        </p:panelGrid>

        <p:button outcome="list" value="#{bundle.list}" icon="#{icons.list}" />

        <p:button rendered="#{user.isEditAllowed(item)}" 
            outcome="edit?id=#{item.converterString}" value="#{bundle.edit}"
            icon="#{icons.edit}" />
    </ui:define>
</ui:composition> 
```

编辑.xhtml

```
<f:metadata>
    <o:viewParam id="itemId" name="id" value="#{viewScope.item}" required="true"
        converter="entityConverter" />
</f:metadata>

<ui:composition template="/WEB-INF/templates/template.xhtml">
    <ui:define name="content">
        <p:panelGrid columns="2">
            <h:outputLabel value="#{bundle.name}" />
            <h:panelGroup>
                <p:inputText id="name" value="#{item.name}" />
                <p:message for="name" />
            </h:panelGroup>

            ...
        </p:panelGrid>

        <p:commandButton process="@form" update="@form" action="#{testBean.update}" 
            value="#{bundle.update}" icon="#{icons.update}" />

        <p:button outcome="view?id=#{item.converterString}" value="#{bundle.cancel}" 
            icon="#{icons.cancel}" />
    </ui:define>
</ui:composition> 
```

# tdd - 行为驱动开发 (BDD) 和验收测试驱动开发 (ATDD) 有什么区别？

> ID：11986187
> 
> 赞同：8
> 
> 时间：2012-08-16T11:31:07.343
> 
> 标签：tdd, bdd

我正在写一篇简短的论文来阐述单元测试和 TDD 的好处。我在最后包含了一个名为“超越 TDD”的小节，我希望在其中特别介绍一些基于 TDD、BDD 和 ATDD 的不同方法。

我对 BDD 有点熟悉（我玩过 SpecFlow），但是在阅读了 ATDD 之后，它听起来非常相似。BDD 和 ATDD 是否只是本质上相同过程的两个名称——用“普遍存在的”语言记录行为，生成自动化验收测试套件，然后着手让验收测试通过？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T18:48:08.747

虽然我*大体上*同意gishu 的帖子，但有几个方面我不同意。在恕我直言部分，他将 BDD 规范介绍为 Rachel Davies 等人开发的用户故事规范：作为……我想要……这样。

BDD 规范是给定的......当......然后......如

> 假设用户已登录，当用户点击 x 时，我们应该会看到 Y。

这是关于*条件、行动和期望*的，是 BDD 的核心。

正如 gishu 所建议的那样，ATDD 是通过使用验收测试规范来推动开发的实践，作为可执行的验收标准来实施。BDD 形式的规范既不是必需的，也不是“最佳实践”。然而，在实践中，将思维和语言集中在如何验证工作是否已令人满意地完成并满足要求是有效的。

请注意，BDD 并不是特别基于 TDD。ATDD 松散地基于 TDD，因为它是在开发完成之前完成的测试。除此之外，它不关注开发人员的工作，而是关注项目的整体方向和验证。ATDD 与 Story Mapping 相得益彰，因为它在编写更高级别需求的发现阶段运行良好，重要的是要知道“我们如何知道它何时已正确完成？”

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-17T05:23:14.970

BDD（Dan North、Dave Astels、Dave Chelimsky*等人*）是一项使整个交付过程变得敏捷的运动。

也就是说，做 BDD 的团队将采用 ATDD 的实践——即从可接受标准的可执行规范开始的过程。[一个有效的说明图](http://eggsonbread.netlify.com/2009/07/22/behavior-driven-development-in-a-nutshell/)是 ATDD 包装 TDD 的内部循环的地方。

ATDD 只是在开发之前从可执行的验收标准开始并使用它来塑造底层代码库的设计（很像 TDD，但在更粗略的级别）的实践。

*以下内容完全是一种观点，可能并不完全准确：* 您可能正在做 ATDD，但仍然没有做 BDD：

例如，我可能正在编写自动化验收测试，但它们不可读.. 不传达意图。我可能正在编写一套全面的自动化“回归”测试，但它并没有告诉我系统做什么/它是如何工作的。

*   BDD 非常强调语言和交流。例如指定行为，而不是说

> **测试**XDoesY

BDD 会将其指定为

> 作为利益相关者，X**应该**做 Y，这样我才能做 Z。

所以最后，我认为主要的区别（可能发生但不是必须的）是 ATDD 可以变成一个全面的自动化套件，它只是作为主动开发 + 回归的目标。BDD 会恳请您**通过可执行示例进一步推动问题和解决方案域之间的****共享语言**+活文档，以实现未来的建设性对话

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-29T21:06:47.520

ATDD 通常与行为驱动开发 (BDD)、故事测试驱动开发 (SDD) 和示例规范同义使用。与其他敏捷方法相比，ATDD 的主要区别在于，它专注于让开发人员、测试人员、业务、产品所有者和其他利益相关者协作，并清楚地了解需要实施的内容。

我个人喜欢 ATDD 的概念，因为它符合“<a href="https://insights.sei.cmu.edu/sei_blog/2015/03/four-types-of-shift-left-testing.html” rel="nofollow noreferrer">Shift Left 范式”，在 SDLC 中应尽早开始开发和测试。当我们从 SDLC 开始就开始编写自动化测试时，它有助于提高自动化的可见性，进而有助于增强团队内部的协作。

请记住，ATDD 并不是一种万能的解决方案。它是敏捷方法之一。还有许多其他方法可以帮助改进团队中的流程，但我特别发现这种方法专注于更好的验收测试，最重要的是它强调协作；这是这种方法的组成部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T11:56:14.463

我会说没什么。我的第一个假设是 ATDD、BDD、示例规范、敏捷验收测试等都意味着同样的事情。如果有人使用这些术语来表示不同的事物，那么他们可以更好地解释该上下文中的差异。**

# javascript - 添加 onClick 事件

> ID：11986189
> 
> 赞同：0
> 
> 时间：2012-08-16T11:31:15.547
> 
> 标签：javascript, onclick

我在将`onClick`事件添加到脚本时遇到了真正的麻烦。这是我的代码，基本上显示了 Instagram 照片。我想添加`onclick="panel_five.show();return false"`一个

```
<a href='" + data.data[i].images.standard_resolution.url +"' >
    <img src='" + data.data[i].images.thumbnail.url +"' />
</a> 
```

我在语法上遇到了真正的麻烦。这是我的完整代码：

```
...
$('.ttl').first().parent().append('<div class="ttl"><div class="ttlpadding"><div class="item">' + "<a href='" + data.data[i].images.standard_resolution.url +"' ><img src='" + data.data[i].images.thumbnail.url +"' /></a>" +"</div></div></div>");
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:33:21.813

这是你想要的吗。

```
$('.ttl').first().parent().append('<div class="ttl"><div class="ttlpadding"><div class="item">' + "<a href='" + data.data[i].images.standard_resolution.url +"' onclick='panel_five.show();' ><img src='" + data.data[i].images.thumbnail.url +"' /></a>" +"</div></div></div>"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T11:34:59.987

```
$(function () {
     var parent = $('.ttl').first().parent();
     parent.append('<div class="ttl"><div class="ttlpadding"><div class="item">'
          + "<a href='" + data.data[i].images.standard_resolution.url
          +"' ><img src='"+ data.data[i].images.thumbnail.url +"' /></a>"
          +"</div></div></div>"
     );
     parent.find('a').click(function() {
        // some code here
     });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T12:01:18.017

试试这个我已经用我的 url 和图像 src 进行了测试，它工作正常

```
$('.ttl').first().parent().append('<div class="ttl"><div class="ttlpadding"><div class="item">' + "<a href='" + data.data[i].images.standard_resolution.url +"' ><img src='" + data.data[i].images.thumbnail.url +"' onclick='panel_five.show();return false;' /></a>" + '</div></div></div>'); 
```

编辑：如果您对 " 和 ' 感到困惑，您可以使用 " 和 \" 代替 OR ' 和 \'

```
$("body").append("<a href=\"http://stackoverflow.com\">Stackoverflow</a>");
$('body').append('<a href=\'http://stackoverflow.com\'>Stackoverflow</a>'); 
```

它在body标签中的视图结果为

```
<a href="http://stackoverflow.com">Stackoverflow</a>
<a href='http://stackoverflow.com'>Stackoverflow</a> 
```

# c++ - 如何在 VS 2008 中包含 Lua 库

> ID：11986192
> 
> 赞同：0
> 
> 时间：2012-08-16T11:31:16.670
> 
> 标签：c++, visual-studio-2008, lua

我不确定这个位置。

**在“属性”>“链接器”>“常规”>“附加依赖项”中**

我必须在**Additional Library Directories**中包含一些库，不是吗？

或者我必须在我的电脑上安装一些程序？

问题是我不能使用 luaL_dofile，但我可以在我的电脑被格式化之前使用它。

这就是为什么我不确定图书馆的原因。我在我之后编译并运行我的代码

电脑突然被格式化了。我很确定我的代码没有问题

因为它可以在我的电脑被格式化之前运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:59:05.133

那么，从你获得它的地方获得图书馆。将它放在您知道它不会被移动的某个地方（或者如果提供了安装程序，则安装它），然后执行以下操作：

选择菜单项项目 -> 属性 -> 配置属性 -> 链接器 -> 输入。

现在在“Additional Dependencies”编辑控件中添加库的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:49:39.050

你需要做两件事：

1.  将库目录添加到库目录
2.  将库名称（不带路径，但带扩展名）添加到 Linker->Input->Additional Dependencies

# python - 使用 mongoengine 将文件上传到 DEFAULT_FILE_STORAGE 而不是 GridFs

> ID：11986196
> 
> 赞同：1
> 
> 时间：2012-08-16T11:31:36.133
> 
> 标签：python, django, mongodb, gridfs, mongoengine

我希望能够将文件存储在 amazon s3 中。mongoengine 中的 FileField 似乎是用 gridfs 硬编码的。

我能做些什么来实现这一目标？

是否有一个自定义文件字段，其行为类似于常规 django FileField？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:57:32.763

我还没有看到与 MongoEngine 一起使用的 S3 FileField - 所以目前，你必须推出自己的实现 - 你可以使用 a`StringField`来存储位置，或者你可以创建自己的位置，`proxy_class`但`ImageField`它非常适合 GridFs 但我如果需要，很乐意将其抽象出来。

一如既往地欢迎请求请求！ [https://github.com/MongoEngine/mongoengine](https://github.com/MongoEngine/mongoengine)

# mysql - Mysql INT 带字符

> ID：11986199
> 
> 赞同：1
> 
> 时间：2012-08-16T11:31:58.333
> 
> 标签：mysql, int, varchar

我有一个 mysql 数据库，其中字段“order_number”在奇数情况下设置为 INT，订单号需要有一个尾随 r，例如 2100r，显然 INT 只会接受数字，如果我使用 VARCHAR，它将正确地对数字进行 ASC 或 DESC 排序为了克服这个限制，它将正确接受尾随的 r 字符，但不会按数字顺序正确排序数字，有没有办法强制 INT 选项接受一个字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:08:10.203

如果其中任何一个包含字母，您需要将您的帐户 ID 存储为字符串。但只要字母始终是后缀，您就可以正确排序。无论您的 AccountID 值是否有前导空格，这都有效。

```
 SELECT *
     FROM Account
 ORDER BY CAST(AccountID as UNSIGNED INTEGER), AccountID 
```

这将按数字排序，然后通过词法排序来处理任何相等的数字。

[http://sqlfiddle.com/#!2/a16bf/8/0](http://sqlfiddle.com/#!2/a16bf/8/0)

如果您希望“r”订单以相同的数字显示在他们朴素的朋友面前，您可以这样做：

```
 SELECT *
     FROM Account
 ORDER BY CAST(AccountID as UNSIGNED INTEGER), AccountID DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T11:33:48.023

您可以`CAST`在 MySQL 中使用函数，但`order_number`在将新数据插入表中之前使用类型转换将其存储为 int 是一个好习惯。

```
SELECT CAST(int_col AS CHAR);

SELECT CAST(char_col AS unsigned INTEGER); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T12:51:05.960

不，不可能。正如@Jon 所说，没有其他选项可以强制`INT`字段保留`VARCHAR`数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T11:35:03.410

不，没有这样的选择。

您可能应该使用一`VARCHAR`列作为订单号，并使用单独的列（可能`INT`）仅用于排序；在插入和更新行时，根据订单号填充辅助列。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T12:30:26.543

尝试使用这种方式（number_string * 1）将字符串转换为数字，例如 -

```
SELECT * FROM table ORDER BY column * 1; 
```

# iphone - iOS 中基于 URL 的导航，如three20 的 TTNavigator

> ID：11986204
> 
> 赞同：3
> 
> 时间：2012-08-16T11:32:25.463
> 
> 标签：iphone, objective-c, ios, xcode, three20

有没有像three20那样 提供[的基于URL的导航的](http://three20.info/article/2010-10-06-URL-Based-Navigation)替代方法`TTNavigator`？

缺点是three20，因为它不再维护，所以我们正在寻找替代品。

基于 URL 的导航非常好用，例如

例如

```
[TTNavigator navigator] openURLAction:
  [[TTURLAction actionWithURLPath:@"tt://restaurant/Chotchkie's"] 
   applyAnimated:YES]] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T20:34:50.580

是的，jverkoey，three20 的最后一个维护者为名为 sockit 的对象编写了一个带有 url 映射的简单框架[https://github.com/jverkoey/sockit](https://github.com/jverkoey/sockit)。

# ios - 针对 IIS7 和 Windows 2008 的 iOS“didReceiveAuthenticationChallenge”

> ID：11986206
> 
> 赞同：4
> 
> 时间：2012-08-16T11:32:35.513
> 
> 标签：ios, iis, iis-7

我在 iOS 编程中遇到了一些身份验证问题。我有一个代码可以在 Windows 2003 上完美地对抗 IIS6，但不能在带有 IIS7 的 Windows Server 2008 上工作。两台服务器上的安全选项相同（无匿名访问和“集成 Windows 身份验证”）。

这是“didReceiveAuthenticationChallenge”委托的代码：

```
-(void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:
(NSURLAuthenticationChallenge *)challenge 
{
//USE STORED CREDENTIALS
Credentials* cred = [[Credentials alloc] init];
NSString* userName = cred.userName;
NSString* pass = cred.pass;

NSString* authMethod = [[challenge protectionSpace] authenticationMethod];

//Kerberos (Negotiate) needs "user@realm" as username
//NTLM Needs domain\\username
if ([authMethod isEqualToString:NSURLAuthenticationMethodNTLM]) {
    userName = [NSString stringWithFormat:@"%@%@", @"es\\" , userName];
}
if ([authMethod isEqualToString:NSURLAuthenticationMethodNegotiate]) {
    userName = [NSString stringWithFormat:@"%@%@", userName, @"@subdomain.domain.com"];
}

NSLog(@"Auth method in use: %@" , authMethod);
NSLog(@"User: %@" , userName);
NSLog(@"Pass: %@" , pass);

if ([challenge previousFailureCount] <= 1) {
    NSLog(@"received authentication challenge");
    NSURLCredential *credential;
    credential = [NSURLCredential 
                     credentialWithUser:userName 
                     password:pass
                     persistence:NSURLCredentialPersistenceForSession];        

    [[challenge sender] useCredential:credential forAuthenticationChallenge:challenge];

}
else {
    NSLog(@"Authentication error");
    NSLog(@"Failed login with status code: %d", [(NSHTTPURLResponse*)[challenge failureResponse]statusCode]);
    [[challenge sender] cancelAuthenticationChallenge:challenge];   
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T13:02:01.837

最后，我发现了这个错误......问题与Windows 2008 IIS7 Servers上的身份验证方法有关。

当您使用“集成 Windows 身份验证”时，服务器可以使用 NTLM 或 Kerberos。我的 2008 服务器总是使用 kerberos，即使这些机器上没有配置 Kerberos。

解决方案是编辑 IIS 元数据库以强制 NTML 身份验证。

# sql - 如何构建这个 SQL 总结？

> ID：11986207
> 
> 赞同：0
> 
> 时间：2012-08-16T11:32:39.567
> 
> 标签：sql, ruby-on-rails, activerecord

```
a project has_many tasks
a task can be assigned to many members 
```

例如：

```
Project   Task  Member
-------   ----  ------
   P1      T1     M1
   P1      T2     M2
   P2      T1     M1
   P2      T2     M2
   P2      T3     M1
   P3      T1     M2 
```

我想获得以下摘要，即按成员划分的项目的最后一项任务：

```
 ------ ---
 T1      3
 - M1    2
 - M2    1
 T2      2
 - M2    2
 T3      1
 - M1    1 
```

如何构建 SQL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:41:43.603

使用以下 SQL

```
 select task, null as member, COUNT(*) as count from yourtable group by task
   union
   select task, member, COUNT(*) from yourtable group by task, member
   order by task, member 
```

# jquery - ASP.NET MVC 3 JQuery'Uncaught TypeError'：对象没有方法'roundabout'

> ID：11986208
> 
> 赞同：1
> 
> 时间：2012-08-16T11:32:45.393
> 
> 标签：jquery, asp.net-mvc, razor

我一直在努力解决我试图使用 JQuery Roundabout Carousel 来显示一些图像的问题。

在布局页面中，我有以下代码：

```
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- Stylesheets -->
<link rel="stylesheet" href="~/Content/reset.css" />
<link rel="stylesheet" href="~/Content/styles.css" />
<!-- Scripts -->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="~/Scripts/jquery.roundabout.js"></script>
<script type="text/javascript" src="~/Scripts/jquery.easing.1.3.js"></script>
<script type="text/javascript">
    $(document).ready(function () { //Start up the Carosuel on the child page
        $('#images ul').roundabout({ //images list on the child page which uses this layout page.
            easing: 'easeOutInCirc',
            duration: 1500
        });
    });
</script> 
```

这会在视图中调用轮播：

```
@{
ViewBag.Title = "Home Page";
Layout = "~/Views/Shares/_layout.cshtml" 
```

}

```
 <!-- Image Slider -->
    <div id="images" class="fixed grid_12">
        <ul> 
            <li>
                <a href="info.html">
                    <img src="images/testImage.gif" alt="" />
                </a>
            </li>  
            <li>
                <a href="info.html">
                    <img src="images/testImage1.gif" alt="" />
                </a>    
            </li>  
            <li>
                <a href="info.html">
                    <img src="images/testImage2.gif" alt="" />
                </a>    
            </li> 
        </ul> 
    </div> 
```

尽管尝试了不同版本的 jquery，但在布局页面中移动脚本的位置和顺序，我仍然无法克服这个错误。我已经在子页面的页眉、页脚中尝试了 JQuery。我已经尝试过从 1.3 到 1.7 的 JQuery 版本。

最后，当我在标准 .html 文件中尝试此操作时，一切正常。是否可能与 MVC 如何处理 jquery 有关？也许这就是 Razor 的行为方式？

关于我做错了什么以及如何解决这个问题的任何想法？

干杯，

莫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:38:04.107

尝试使用

```
@Url.Content("~/Scripts/jquery.roundabout.js") 
```

在路径中使用`~`char 时，请始终使用`Url.Content`

还尝试观察浏览器的调试工具对文件的说明？例如，如果无法从服务器加载文件，您可以在 chrome 的 devtools 的网络选项卡中看到它。

# php - php全局变量范围？

> ID：11986213
> 
> 赞同：0
> 
> 时间：2012-08-16T11:33:13.293
> 
> 标签：php

更新：

我在下面放置的代码将被其他网页上的表单调用。所以这就是为什么我没有创建一个 obj 的实例。

更详细的代码：

```
$serverloc='serverURL';

class Aclass{

           function push(){
             global $serverloc;
             echo $serverloc;
             funNotinClass();
           } 

           function otherFunction(){

              echo $serverloc;

           }
}

funNotinClass(){

      echo $serverloc;
} 
```

有一个类包含 2 个函数“push()”和“otherFunction()”，并且有一个独立的函数“funNotinClass()”和 push() 调用它。该类用于其他页面中的 Web 表单。当用户单击提交表单时，调用该类并使用 push() 函数。我发现一个奇怪的事情是全局变量 $serverloc 对 push() 和 funNotinClass() 是不可见的（它们不会打印出任何东西），但是 otherFuction() 是一个类似于 Aclass 内部的 puch() 的函数可以只使用 $serverloc（我什至没有在它前面添加全局）。多么奇怪……有人知道这是什么原因造成的吗？

++++++++++++++++++++++++++++++++++++++++++++++++++++++ ++++++++++++++++++++++++++++++++

我阅读了许多关于 php 中全局变量范围的信息。他们都说全局变量是在函数或类之外定义的，您可以使用 global this 关键字来使用它。

所以这是我的代码

```
$serverloc='serverURL';

class Aclass{

function Afunction(){
 global $serverloc;
 echo $serverloc;

} 
} 
```

但是当我运行这个类时，它没有打印出任何东西。那是因为我做错了什么还是全局变量不能以这种方式工作。由于我之前阅读的所有示例都只是直接访问函数中的全局变量，而不是类中的函数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T11:39:19.247

根据 DaveRandom 的评论 - 您实际上并没有创建 Aclass 对象的实例。

这可以正常工作并按预期显示数据：

```
<?php 
    $serverloc='serverURL';

    class Aclass{
        global $serverloc;      
        function Afunction()
        {
            echo  $serverloc;
        } 
    }

    $me = new Aclass();

    $me->Afunction(); // output: serverURL

?> 
```

编辑：DaveRandom 似乎将 asnwers 作为评论发布。去投票他的一些其他答案，代表属于他而不是我。今晚我是他的代笔。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T11:41:42.473

如果它是类全局变量，您可以这样做

```
class myClass
{    
  private $globVar = "myvariable";

  function myClass()
  {
    return $this->globVar;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T11:55:12.627

> 但是当我运行这个类时它没有打印出任何东西

**在执行**它们的意义上，您不运行[类。](https://en.wikipedia.org/wiki/Class_%28computer_programming%29)类只是一个[数据结构](http://en.wikipedia.org/wiki/Data_structure)，其中包含相关的数据和函数（称为方法）。

 **与大多数传统数据结构一样，您创建它们的实例（称为对象），然后对它们执行操作。对对象（类的实例）执行操作的一种方法是传递一条消息让它做某事：即调用一个方法。

所以，在你的情况下，你可以这样做：

```
$obj = new Aclass(); // create an object, instance of Aclass
$obj->Afunction();   // ask it to perform an action (call a method) 
```

话虽如此，有时您只想创建一个仅用于对相关函数进行分组的类，而这些函数实际上从未真正在对象内共享数据。他们通常可以通过全局变量（例如：、、等）共享`$_SERVER`数据`$_GET`。您的设计可能就是这种情况。

这样的类可以在不实例化它们的情况下执行其方法，如下所示：

```
Aclass::Afunction(); 
```

虽然依赖全局变量通常是快速设计的指标，但在某些情况下它确实是最好的权衡。我会说一个`$serverlocation`或`$baseurl`很可能是这些情况之一。:)

**看更多：**

*   [PHP 手册中的类和对象基础知识](http://www.php.net/manual/en/language.oop5.basic.php)
*   [关于 static 关键字](http://www.php.net/manual/en/language.oop5.static.php)**

# asp.net-mvc - 如何解决 jqueryUi 错误：'Microsoft Jscript runtimeerror'？

> ID：11986217
> 
> 赞同：1
> 
> 时间：2012-08-16T11:33:29.807
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jquery-ui, jquery

你好; 我有一个大问题jqueryui。我想使用 jqueryui 选项卡，但错误返回 öe。这个错误：

Microsoft Jscript 运行时错误：属性“$”的值为 null 或未定义，不是函数对象。我有最新版本 1.8 。这个错误不可思议。如何解决？

![在此处输入图像描述](../Images/e8cb0a8f9e0ad9eb8919d6308693772f.png)

```
 <%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/ChildSite_FullExtNet.Master" Inherits="System.Web.Mvc.ViewPage<GenSystem.Models.MinuteSchedule>" %>
<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
  <script type="text/javascript">

      $(function () {
          $("#tabs").tabs();
      });

  </script>

<%=Html.ValidationSummary("Please correct the erros and try again.") %>
  <% using (Html.BeginForm())
     { 
  %>

     <%=Html.HiddenFor(q=>q.JobSchedulerId) %>
     <span><%:Html.LabelFor(m=>m.JobName) %>: <%:Html.TextBoxFor(m=>Model.JobName) %></span>
     <span><%:Html.LabelFor(m=>m.StartDateTime) %>: <%:Html.TextBoxFor(m=>Model.StartDateTime) %></span>
     <span><%:Html.LabelFor(m=>m.EndDateTime) %>: <%:Html.TextBoxFor(m=>Model.EndDateTime) %></span>
     <span><%:Html.LabelFor(m=>m.RepeatCount) %>: <%:Html.TextBoxFor(m=>Model.RepeatCount) %></span>
     <span><%:Html.LabelFor(m=>m.RepeatInterval) %> :  <%:Html.TextBoxFor(m=>Model.RepeatInterval)%></span>

 <div id="tabs">
    <ul>
        <li><a href="#tabs-1">Nunc tincidunt</a></li>
        <li><a href="#tabs-2">Proin dolor</a></li>
        <li><a href="#tabs-3">Aenean lacinia</a></li>
    </ul>
    <div id="tabs-1">
        <p>Proin elit arcu, rutrum commodo, vehicula tempus, commodo a, risus. Curabitur nec arcu. Donec sollicitudin mi sit amet mauris. Nam elementum quam ullamcorper ante. Etiam aliquet massa et lorem. Mauris dapibus lacus auctor risus. Aenean tempor ullamcorper leo. Vivamus sed magna quis ligula eleifend adipiscing. Duis orci. Aliquam sodales tortor vitae ipsum. Aliquam nulla. Duis aliquam molestie erat. Ut et mauris vel pede varius sollicitudin. Sed ut dolor nec orci tincidunt interdum. Phasellus ipsum. Nunc tristique tempus lectus.</p>
    </div>
    <div id="tabs-2">
        <p>Morbi tincidunt, dui sit amet facilisis feugiat, odio metus gravida ante, ut pharetra massa metus id nunc. Duis scelerisque molestie turpis. Sed fringilla, massa eget luctus malesuada, metus eros molestie lectus, ut tempus eros massa ut dolor. Aenean aliquet fringilla sem. Suspendisse sed ligula in ligula suscipit aliquam. Praesent in eros vestibulum mi adipiscing adipiscing. Morbi facilisis. Curabitur ornare consequat nunc. Aenean vel metus. Ut posuere viverra nulla. Aliquam erat volutpat. Pellentesque convallis. Maecenas feugiat, tellus pellentesque pretium posuere, felis lorem euismod felis, eu ornare leo nisi vel felis. Mauris consectetur tortor et purus.</p>
    </div>
    <div id="tabs-3">
        <p>Mauris eleifend est et turpis. Duis id erat. Suspendisse potenti. Aliquam vulputate, pede vel vehicula accumsan, mi neque rutrum erat, eu congue orci lorem eget lorem. Vestibulum non ante. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Fusce sodales. Quisque eu urna vel enim commodo pellentesque. Praesent eu risus hendrerit ligula tempus pretium. Curabitur lorem enim, pretium nec, feugiat nec, luctus a, lacus.</p>
        <p>Duis cursus. Maecenas ligula eros, blandit nec, pharetra at, semper at, magna. Nullam ac lacus. Nulla facilisi. Praesent viverra justo vitae neque. Praesent blandit adipiscing velit. Suspendisse potenti. Donec mattis, pede vel pharetra blandit, magna ligula faucibus eros, id euismod lacus dolor eget odio. Nam scelerisque. Donec non libero sed nulla mattis commodo. Ut sagittis. Donec nisi lectus, feugiat porttitor, tempor ac, tempor vitae, pede. Aenean vehicula velit eu tellus interdum rutrum. Maecenas commodo. Pellentesque nec elit. Fusce in lacus. Vivamus a libero vitae lectus hendrerit hendrerit.</p>
    </div>
</div>

    <%} %>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:08:03.533

很可能您没有以正确的顺序包含 java 脚本文件。jquery 库必须在 ui 的库之前加载。如果您以正确的顺序包含文件，则可以解决此问题。

# liferay - Liferay：如何在 AssetPublisher portlet 中查找具有特定 JournalArticle 的所有布局？

> ID：11986218
> 
> 赞同：0
> 
> 时间：2012-08-16T11:33:31.627
> 
> 标签：liferay

要求很简单。有人发布了带有一些标签（TagA、TagB）的 JournalArticle。在其他页面（布局）上，我们有 AssetPublisher 门户，显示所有带有这些标签（例如 TagA 或 TagB）的 JournalArticles。问题是，如何以编程方式获取此布局？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T13:31:06.177

我用递归解决它`DynamicQuery`，享受：

```
public static Set<Layout> getLayoutsWithThisTags(SortedSet<String> tags) throws SystemException, PortalException {
    Set<Layout> layouts = new HashSet<Layout>();

    //build DynamicQuery that contains "assetTags" as "queryName0", see configuration of AssetPublisher
    DynamicQuery query = DynamicQueryFactoryUtil.forClass(com.liferay.portal.model.PortletPreferences.class, PortalClassLoaderUtil.getClassLoader())
            .add(PropertyFactoryUtil.forName("preferences").like("%<preference><name>queryName0</name><value>assetTags</value></preference>%"))
            .add(getTagConditions(tags));

    Set<PortletPreferences> preferences = new HashSet<PortletPreferences>(PortletPreferencesLocalServiceUtil.dynamicQuery(query));
    for (PortletPreferences portletPreferences : preferences) {
        long plid = portletPreferences.getPlid();
        layouts.add(LayoutLocalServiceUtil.getLayout(plid));
    }

    return layouts;
}

private static Criterion getTagConditions(SortedSet<String> tags) {
    //create recursive OR-Criterion that contains any of the tags
    Criterion criterion = RestrictionsFactoryUtil.or(
            PropertyFactoryUtil.forName("preferences").like("%<preference><name>queryValues0</name>%<value>" + tags.first() +"</value>%"),
            (tags.size() > 2) ? getTagConditions(tail(tags)) :
                PropertyFactoryUtil.forName("preferences").like("%<preference><name>queryValues0</name>%<value>" + tags.last() +"</value>%"));
    return criterion;
}

private static SortedSet<String> tail(SortedSet<String> tags) {
    tags.remove(tags.first());
    return tags; 
} 
```

对于具有 250 个页面（布局）的门户，此代码需要 12 毫秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:49:45.663

我突然想到了这个:-)

* * *

```
 List assetPublisherLayouts;
        List<Layout> layouts = LayoutLocalServiceUtil.getLayouts(groupId, privateLayout);
        for (Layout layout : layouts)
        {
            if(layout.getTypeSettings().contains("101_INSTANCE")) {
                assetPublisherLayouts.add(layout);
            }
        } 
```

* * *

虽然 101 是资产发布者的 protlet ID，但它是可实例化的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T10:12:35.997

我可以想到两种方法：

1.  用于`DynamicQuery`获取`Layouts`包含`Asset Publisher`portlet，然后处理为具有&`Layout`的特定布局检索到的列表。 代码可能是这样的（*免责声明：它只是伪代码***:-)**）：`Asset Publisher``TagA``TagB`

     ***```
    layoutDynamicQuery.add(RestrictionFactoryUtil.ilike("typeSettings","%101_INSTANCE%"));

    List<Layout> layoutList = LayoutLocalServiceUtil.dynamicQuery(layoutDynamicQuery);

    List<Layout> finalLayoutList = new ArrayList<Layout>();

    for (Layout layout : layoutList) {
        // 1) fetch portletIds for this layout
        // 2) fetch relevant PortletPreferences for the instance-id for the AssetPublisher portlet, can use PortletPreferencesLocalServiceUtil
        // 3) Check if the tags (TagA & TagB) are present in the preference retrieved.
        // 4) if point-3 is true then: finalLayoutList.add(layout);
    } 
    ```*** 
****   用于在单个复杂的 sql 查询中`custom-sql`获取s，方法是加入/子查询所需的表，如 ,等。`Layout``AssetTags``Layout``PortletPreferences`***

 ***这不是 liferay 中的一般需求场景，因此很明显不会有直接的方法来执行此操作。

希望这被证明会有所帮助。***

# javascript - 使用简单的 JavaScript 或 jQuery 分别识别每个选择选项并在 DIV 中显示

> ID：11986221
> 
> 赞同：-1
> 
> 时间：2012-08-16T11:33:44.160
> 
> 标签：javascript, jquery, css, html

我有一个 PHP 代码，它主动生成一个 Select 输入，其中包含 5 个不同的选项。

现在，我还想在 div 中将数字 2、3、4 和 5 显示为文本。

请注意，我想在我的 DIV 中省略第一个选项。

```
<select>
<option>1</option>
<option>2</option>
<option>3</option>
<option>4</option>
<option>5</option>
</select> 
```

也相应地显示：

```
<div><img src="#" /> 2</div>
<div><img src="#" /> 3</div>
<div><img src="#" /> 4</div>
<div><img src="#" /> 5</div> 
```

我尝试使用 document.forms[0].select.value; 但它只显示所选值而不是所有选项。此外，我想过滤第一个选项，我该怎么办？任何帮助表示赞赏。

* * *

`select`OP 在对答案的评论中提供的元素的实际 HTML ：

```
<select class="last" id="property_types" name="property_types">
    <option selected="selected" value="0">View all Property Types</option>
    <option value="96" class="level-0">Apartment</option>
    <option value="9" class="level-0">Building</option>
    <option value="3" class="level-0">Land</option>
    <option value="97" class="level-0">Office</option>
</select> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T11:37:21.563

我建议：

```
$('option').slice(1).each(
    function(){
        var text = $(this).text(),
            outputTo = $('#output'),
            div = $('<div />').text(text),
            img = $('<img />', {'src' : '#'}).prependTo(div);
        div.appendTo(outputTo);
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/wJUVm/)。

请注意，这假设使用特定`div`的方法来包含此方法的输出，显然要根据口味进行调整。

修改上述代码以提供特定的选择器，以响应 OP 在对此答案的评论中的发布代码：

```
$('#property_types option').slice(1).each(
    function(){
        var text = $(this).text(),
            outputTo = $('#output'),
            div = $('<div />').text(text),
            img = $('<img />', {'src' : '#'}).prependTo(div);
        div.appendTo(outputTo);
    });​ 
```

参考：

*   [`appendTo()`](http://api.jquery.com/appendTo/).
*   [`each()`](http://api.jquery.com/each/).
*   [`prependTo()`](http://api.jquery.com/prependTo/).
*   [`slice()`](http://api.jquery.com/slice/).

# postgresql - PostgreSQL 触发器将更改从一个表复制到另一个表

> ID：11986225
> 
> 赞同：0
> 
> 时间：2012-08-16T11:33:51.533
> 
> 标签：postgresql, stored-procedures

我有一个名为 info 的数据库。在数据库中，我有 4 个不同的表`info1`、和。`info2``info3``info4`

我想创建一个存储过程，以便每当我在表中进行更改`info1`（如`INSERT`、`DELETE`或`UPDATE`）时，其他三个表中都会出现相同的更改。

我为此使用 PostgreSQL，但我不知道如何执行此查询。

请举例说明。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:52:46.513

基本上，您需要阅读手册以了解您在做什么。@Michael 提供了链接。

有很多不同的方法可以解决这个问题。以下是`UPDATE`和的两个典型示例`DELETE`：

为 UPDATE 创建触发器函数：

```
CREATE OR REPLACE FUNCTION trg_info1_upaft()
  RETURNS trigger AS
$BODY$
BEGIN
    UPDATE info2
    SET col1 = NEW.col1
    --more?
    WHERE info2.info1_id = NEW.info1_id;

    UPDATE info3
    SET col1 = NEW.col1
    --more?
    WHERE info3.info1_id = NEW.info1_id;

    -- more?
    RETURN NULL; -- because trigger is meant for AFTER UPDATE
END;
$BODY$
  LANGUAGE plpgsql; 
```

使用它创建触发器：

```
CREATE TRIGGER upaft
  AFTER UPDATE
  ON info1
  FOR EACH ROW
  EXECUTE PROCEDURE trg_info1_upaft(); 
```

对于删除：

```
CREATE OR REPLACE FUNCTION trg_info1_delaft()
  RETURNS trigger AS
$BODY$
BEGIN
    DELETE FROM info2
    WHERE info1_id = OLD.info1_id;

    -- more?
    RETURN NULL; -- because trigger is meant for AFTER DELETE
END;
$BODY$
  LANGUAGE plpgsql;

CREATE TRIGGER delaft
  AFTER DELETE
  ON info1
  FOR EACH ROW
  EXECUTE PROCEDURE trg_info1_delaft(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T11:47:56.747

对于此类更改，您应该使用触发器：[http ://www.postgresql.org/docs/current/interactive/triggers.html](http://www.postgresql.org/docs/current/interactive/triggers.html)

您将必须创建将新数据插入/更新/删除到其他表中的函数，然后使用`CREATE TRIGGER` [http://www.postgresql.org/docs/current/interactive/sql-createtrigger.html](http://www.postgresql.org/docs/current/interactive/sql-createtrigger.html)显示 PostgreSQL 以 在每次数据时调用该函数在源表中更改。

# ef-code-first - 部署 Code First 时“从数据库获取提供程序信息时出错”

> ID：11986226
> 
> 赞同：1
> 
> 时间：2012-08-16T11:33:52.577
> 
> 标签：ef-code-first, asp.net-mvc-4, connection-string

将 ASP.NET MVC 4 应用程序（代码优先）部署到 IIS 时出现以下错误：

“从数据库获取提供程序信息时出错。这可能是由于实体框架使用了不正确的连接字符串造成的。请检查内部异常以获取详细信息并确保连接字符串正确。”

我一直在寻找答案，但没有一种情况与我的情况相符：

我有 2 个项目

*   后端（使用 Code First + WCF 服务的数据访问）
*   FrontEnd MVC 4 应用程序（仅对 WCF 服务的服务引用）

在我的本地 IIS + SQL Server 2008 上它工作正常。即使我将连接字符串更改为生产数据库，一切都按预期工作。

将 BackEnd + FrontEnd 部署到 IIS 时会出现此问题。

访问 db 的唯一连接字符串位于我的后端应用程序中：

```
 <?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <appSettings>
    <add key="fromMail" value="xxx@gmail.com" />
  </appSettings>
  <connectionStrings>
    <add name="TTCWestelDbContext" connectionString="Data Source=192.168.2.14\SQLSERVER2008;Initial Catalog=TTCWestel001;Persist Security Info=True;User ID=XXX;Password=XXX" providerName="System.Data.SqlClient" />
  </connectionStrings>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
    <httpRuntime maxRequestLength="102400" executionTimeout="3600" />
  </system.web>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="" maxReceivedMessageSize="2147483647">
          <readerQuotas maxDepth="64" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
        </binding>
      </basicHttpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true" />
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true" />
          <dataContractSerializer maxItemsInObjectGraph="2147483646" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
    <directoryBrowse enabled="true" />
  </system.webServer>
  <system.diagnostics>
    <sources>
      <source name="System.ServiceModel"
              switchValue="Information, ActivityTracing"
              propagateActivity="true">
        <listeners>
          <add name="traceListener"
              type="System.Diagnostics.XmlWriterTraceListener"
              initializeData= "c:\Temp\WCFTracesTTCWestel.svclog" />
        </listeners>
      </source>
    </sources>
  </system.diagnostics>

</configuration> 
```

任何帮助表示赞赏！

谢谢

米克洛

# ms-access - 输入时更新文本框

> ID：11986227
> 
> 赞同：5
> 
> 时间：2012-08-16T11:33:54.800
> 
> 标签：ms-access, textbox, vba, auto-update

在 Access 中，我有一个包含三个文本框的表单。我正在尝试使用两者的组合更新一个名为*tbxCombinedName*的文本框：

*   文本框*tbxLastName*（人的姓氏）
*   文本框*tbxFirstName*（人的名字）

我的问题是：我使用什么文本框属性，所以当我在*tbxLastName*中输入文本时，CombinedName 文本框会**立即**更新，然后保存在表*Contacts*中。

在[微软的网站上](http://msdn.microsoft.com/en-us/library/office/aa211341%28v=office.11%29.aspx)，我发现输入文本框时的步骤如下：

**KeyDown → KeyPress → BeforeInsert → 更改 → KeyUp**

我尝试使用 OnChange 和 OnKeyDown 属性，但无济于事。哪个属性，结合什么代码，将允许 update-as-you-type 操作起作用？

这是我之前写的，没有用：

```
Private Sub tbxLName_change()

Dim lastName As String
Dim nameCode As String

lastName = tbxLName.Value
Debug.Print lastName
nameCode = tbxNameCode.Value
nameCode = lastName
Debug.Print nameCode

End Sub 
```

感谢您提前提供的所有帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T11:35:28.723

这是您应该参考 .text 属性的少数情况之一。

在更改事件中：

```
lastName = tbxLName.Text 
```

.text 属性仅在控件具有焦点并且引用控件的可见内容时可用。

但是，这是一个数据库，一般规则是您不能不存储计算字段。可以很容易地从查询中获得全名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T13:56:59.320

只是几个注意事项：

您可能想要使用 KeyPress，因为它提供了更改或否定用户按下的键的能力。

在下面的示例中，只允许使用字母，并且小写字母为大写：

```
Private Sub tbxLName_KeyPress(ByVal KeyAscii As MSForms.ReturnInteger)
        Const ASCII_LOWER_RANGE = 65
        Const ASCII_UPPER_RANGE = 122
        Const ASCII_LOWER_A = 97
        Const ASCII_LOWER_Z = 122
        Const UPPER_MODIFIER = -32
        Const ASCII_CANCEL_CODE = 0

        Select Case KeyAscii
            Case ASCII_LOWER_RANGE To ASCII_UPPER_RANGE
                If KeyAscii >= ASCII_LOWER_A And KeyAscii <= ASCII_LOWER_Z Then
                    KeyAscii = KeyAscii + UPPER_MODIFIER
                End If
            Case Else
                KeyAscii = ASCII_CANCEL_CODE  'Cancel Key Press
        End Select
End Sub 
```

# xamarin.ios - 相当于 UIImage.AsPNG() 的 Tiff

> ID：11986228
> 
> 赞同：2
> 
> 时间：2012-08-16T11:33:59.817
> 
> 标签：xamarin.ios, uiimage, tiff

有没有办法`NSData`从实例中获取 TIFF 表示`UIImage`，就像您可以分别使用`UIImage.AsPNG()`和`UIImage.AsJPEG()`方法获得 PNG 和 JPEG 表示一样？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:03:15.277

iOS 没有本机 TIFF 库。你可以试试

*   使用第三方服务
*   找到一个开源 C# 库并移植它
*   找到一个obj-c库并绑定它

有关 ImageMagick 的 Obj-C 端口的信息，请参阅[此问题](https://stackoverflow.com/questions/8714753/how-to-create-a-tiff-on-the-ipad)。

# c# - 证书内存泄漏

> ID：11986232
> 
> 赞同：3
> 
> 时间：2012-08-16T11:34:38.620
> 
> 标签：c#, .net, memory-leaks, ssl-certificate

我正在使用.NET 3.5。

创建对 X509Certificate 的引用时，我遇到了内存泄漏。我正在使用 ANTS 探查器来分析结果，并且私有字节正在增加，而堆中的字节保持静态（表明这是由于非托管代码导致的内存泄漏）。

我正在使用 CRYPT32 dll 来管理证书。我打开对证书存储的引用以获取作为内部指针 (intptr) 的存储句柄。然后我使用这个存储处理程序在存储中查找证书（保存在本地）。获得证书后，我关闭证书存储并将证书返回给调用程序。我在 certclosestore 中使用标志 0，它在调用关闭存储后保持打开的资源打开。我相信这是导致内存泄漏的原因，因为它在这里提到：http: [//msdn.microsoft.com/en-us/library/ms937035.aspx](http://msdn.microsoft.com/en-us/library/ms937035.aspx)

但是，当我将关闭标志更改为：

```
CertCloseStore(storeHandle, 2) 
```

这应该释放分配的资源。然而，它只会导致服务爆炸。

该应用程序的工作原理是验证证书等。唯一的问题是内存使用量正在缓慢上升，并且需要每周左右重新启动服务。任何想法或想法将不胜感激。

```
public static X509Certificate CreateFromRegistry(string certificateIdent)
{
  X509Certificate certificate = null;
  IntPtr storeHandle = CertificateStore.CertOpenStore(CERT_STORE_PROV_SYSTEM, 
      0, 0,CERT_SYSTEM_STORE_LOCAL_MACHINE, "MY");;

  certificate = new X509Certificate(CertificateStore.
  FindCertInStore(certificateIdent, storeHandle));
  CertificateStore.CertCloseStore(storeHandle, 0);
  return certificate;
}

public class CertificateStore
{
    const int CERT_STORE_PROV_SYSTEM = 10;
    private static int CERT_SYSTEM_STORE_LOCAL_MACHINE = (2 << 16);
    const uint PKCS_7_ASN_ENCODING = 0x00010000;
    const uint X509_ASN_ENCODING = 0x00000001;
    const uint CERT_FIND_SUBJECT_STR = 0x00080007;
    const uint CERT_FIND_ISSUER_STR = 0x00080004;
    static uint MY_ENCODING_TYPE = PKCS_7_ASN_ENCODING | X509_ASN_ENCODING;

    [DllImport("CRYPT32", EntryPoint = "CertOpenStore",
        CharSet = CharSet.Unicode, SetLastError = true)]
    public static extern IntPtr CertOpenStore(
        int storeProvider, int encodingType,
        int hcryptProv, int flags, string pvPara);

    [DllImport("CRYPT32", EntryPoint = "CertCloseStore",
        CharSet = CharSet.Unicode, SetLastError = true)]
    public static extern bool CertCloseStore(
        IntPtr storeProvider,
        int flags);
}

public static X509Certificate FindCertInStore
        (string trustedRootIssuerName, IntPtr storeHandle)
    {
        IntPtr hCertCntxt;
        X509Certificate theActualCertificate = null;

        if (storeHandle != IntPtr.Zero)
        {
            hCertCntxt = CertFindCertificateInStore(
               storeHandle,
               MY_ENCODING_TYPE,
               0,
               CERT_FIND_ISSUER_STR,
               trustedRootIssuerName,
               IntPtr.Zero);

            if (hCertCntxt != IntPtr.Zero)
            {
                theActualCertificate = new X509Certificate(hCertCntxt);
            }
        }
        return theActualCertificate;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T12:37:03.997

好吧，您当然是在泄漏 CRYPT32 资源。我在您的代码段中看到的一个直接候选者是 CertFindCertificateInStore() 的返回值。它必须通过显式调用 CertFreeCertificateContext() 来释放，我没有看到。

X509Certification(IntPtr) 构造函数没有很好地记录，它没有描述上下文需要多长时间有效。我看到它调用了一个名为 X509Utils._DuplicateCertContext() 的内部方法，这样的可能性非常高，以至于您可以在创建对象后立即调用释放函数。

请用细齿梳检查其余代码，并三次检查从 CRYPT32 获得的所有句柄和指针是否已释放。

# objective-c - iOS - 从主拆分视图撤消推送

> ID：11986239
> 
> 赞同：0
> 
> 时间：2012-08-16T11:34:59.003
> 
> 标签：objective-c, ios, push, master-detail

我有一个主从视图，当您在主视图中选择某行时，来自详细信息的数据会发生变化。

从详细视图中，您可以推送到另一个视图。

问题是，当您在最后一个视图中时，如果您从主视图中选择一个新行，则不会发生任何事情，因为没有显示主要细节。

我已经看到这段代码可以帮助我：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

但前提是它是从最后一个视图中调用的。我正在尝试撤消主视图中的推送。我该如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:04:48.950

```
[detailViewController.navigationController popToRootViewControllerAnimated:YES]; 
```

# android - Android 中基于 URL 的导航，如 iOS three20 的 TTNavigator

> ID：11986244
> 
> 赞同：0
> 
> 时间：2012-08-16T11:35:22.047
> 
> 标签：android, android-intent, android-activity

是否有任何类似的库提供`URL-Based-Navigation`类似的库`iOS' three20's TTNavigator`？

基于 URL 的导航非常方便，并且比 Android 的要好得多`intent`（如果您不需要外部功能来调用您的活动）

例如在 iOS 中

```
[TTNavigator navigator] openURLAction:
  [[TTURLAction actionWithURLPath:@"tt://restaurant/Chotchkie's"] 
   applyAnimated:YES]] 
```

单个语句允许您跳转到任何定义的视图，这非常易于使用。

[1] [http://three20.info/article/2010-10-06-URL-Based-Navigation](http://three20.info/article/2010-10-06-URL-Based-Navigation)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:47:46.530

我不确定为什么你会发现这比：

```
Intent myIntent = new Intent(this, MyActivity.class);
startActivity(myIntent); 
```

你能详细说明你想要达到的目标吗？

# objective-c - 为 NSThread 休眠

> ID：11986245
> 
> 赞同：1
> 
> 时间：2012-08-16T11:35:23.170
> 
> 标签：objective-c, thread-sleep

当 NSStream 连接失败或出现流错误并尝试在睡眠后重新连接时，我正在尝试在下面的代码中使用睡眠。睡眠正在工作，但它使整个应用程序进入睡眠状态。

我已经将 NSStream 作为线程启动，但是当收到 NSStreamEvent 时，handleEvent 似乎作为同步方法工作。

关于在这段代码中使用睡眠的任何想法..？我只想让睡眠单独为流线程工作。

```
- (void)stream:(NSStream *)stream handleEvent:(NSStreamEvent)event 
{
        case NSStreamEventErrorOccurred:
        {
            NSError *streamErr = [stream streamError];
            NSString *strErr = [streamErr localizedFailureReason];
            [self CloseStream];
            NSLog(@"Stream Error ::: %@",strErr);
            //[NSThread sleepForTimeInterval : 15];
            sleep(15);
            [self Initialize];
            [self OpenStream];
            break;
        }

        case NSStreamEventEndEncountered:
        {
            NSLog(@"Connection Closed by the Server");
            [self CloseStream];
            usleep(15000);
            [self Initialize];
            [self OpenStream];
            break;
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:50:24.010

您应该使用 GCD（Grand Central Dispatch）。您的代码正在后台执行，您的应用程序不会冻结。

阅读：[GCD 参考](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)

基本上，您创建一个队列并添加一个在后台执行的代码块。这是我的代码示例

```
dispatch_queue_t backgroundQueue = dispatch_queue_create("some_identifier", NULL);
dispatch_async(backgroundQueue, ^(void) {   
        //do your background stuff

        dispatch_sync(dispatch_get_main_queue(), ^{
            //update the gui (if needed)
        });

    }); 
```

# android - 正常使用手机（未连接电脑）时，能否捕捉到LogCat消息？

> ID：11986247
> 
> 赞同：4
> 
> 时间：2012-08-16T11:35:30.610
> 
> 标签：android, logcat

当我在真实环境中使用真实手机测试我的应用程序时，我想知道是否有任何方法可以记录 logcat 的消息。我想要实现的是将我的手机带到别处，如果我的应用程序出现任何问题，请追溯它出现问题的原因。特别是如果我将我的应用程序交给朋友（或老板）试用，他们无法就问题给我很多反馈。

我可以将所有输出打印到 .txt 然后阅读它，但我想要更好的东西

有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-16T11:37:08.223

是的 ！安装一个Logcat！很有用 ：）

[一个Logcat应用程序](https://play.google.com/store/apps/details?id=org.jtb.alogcat&feature=search_result#?t=W251bGwsMSwxLDEsIm9yZy5qdGIuYWxvZ2NhdCJd)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T11:40:06.473

一种方法是创建您自己的 Log.java 函数，然后只需更改导入函数以匹配您的类。在您的 Log.java 中，您可以将所有日志写入某个缓冲区并定期将其保存到 sdcard。

另一种方法是

打开亚行外壳

```
logcat > \sdcard\log.txt & 
```

这将继续运行，直到手机重新启动。

# iphone - 何时停止 avcapturesession 以使预览中的图像和拍摄的图像之间的差异最小？

> ID：11986249
> 
> 赞同：0
> 
> 时间：2012-08-16T11:35:38.760
> 
> 标签：iphone, objective-c, avcapturesession

我正在向用户显示预览，并在 3 秒后拍摄图像。

```
 [stillImageOutput captureStillImageAsynchronouslyFromConnection:videoConnection completionHandler: ^(CMSampleBufferRef imageSampleBuffer, NSError *error)
 {
 [session stopRunning]; 
     NSData *imageData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageSampleBuffer];

 }]; 
```

因为 captureStillImageAsynchronouslyFromConnection 需要一些时间，如果我在 3 秒过去之前移动手机，拍摄的照片将与预览中显示的照片 (AVCaptureVideoPreviewLayer) 不同。

我可以避免这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T17:00:35.843

您应该尝试冻结/渲染您的预览层，而不是停止 AVCaptureSession。

您可以尝试使用此代码从 CALayer 创建 UIImage 并在预览层上的 UIImageView 中显示图像。我不知道这个渲染是否足够快，但值得一试。

```
- (UIImage *)imageFromLayer:(CALayer *)layer
{
  UIGraphicsBeginImageContext([layer frame].size);

  [layer renderInContext:UIGraphicsGetCurrentContext()];
  UIImage *outputImage = UIGraphicsGetImageFromCurrentImageContext();

  UIGraphicsEndImageContext();

  return outputImage;
} 
```

此代码取自：

[来自 CALayer 的 UIImage - iPhone SDK](https://stackoverflow.com/questions/3454356/uiimage-from-calayer-iphone-sdk)

# java - 从 ByteBuffer 获取多语言数据

> ID：11986252
> 
> 赞同：0
> 
> 时间：2012-08-16T11:35:48.007
> 
> 标签：java, utf-8, character-encoding, udp

我在 UDP Java 应用程序中接收 ByteBuffers。

现在，这个 ByteBuffer 中的数据可以是任何语言的任何字符串或任何以**零**分隔的特殊字符。

我使用以下代码从中获取字符串。

```
public String getString() {
byte[] remainingBytes = new byte[this.byteBuffer.remaining()];
this.byteBuffer.slice().get(remainingBytes);
String dataString = new String(remainingBytes);
int stringEnd = dataString.indexOf(0);

if(stringEnd == -1) {
    return null;
} else {
    dataString = dataString.substring(0, stringEnd);
    this.byteBuffer.position(this.byteBuffer.position() + dataString.getBytes().length + 1);

    return dataString;
}
} 
```

这些字符串存储在 MySQL DB 中，所有内容都设置为**UTF8**。

如果我在 Windows 中运行应用程序，则会显示像 ® 这样的特殊字符，但不会显示中文。

在添加 VM 参数**时 -Dfile.encoding=UTF8**显示中文，但像 ® 这样的字符显示为 ?? 等等

请帮忙。

编辑：

UDP 数据包中的输入字符串是**可变长度字节字段，以 UTF-8 编码，以 0x00 结尾**

对于 JDBC，我也使用**useUnicode=true&characterEncoding=UTF-8**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:06:05.580

`String dataString = new String(remainingBytes);`是错的。你几乎不应该那样做。您应该找出用于将字节放入 UDP 数据包的编码，并在该行使用相同的编码：

```
String dataString = new String(remainingBytes, encoding); // e.g. "UTF-8" 
```

编辑：根据您更新的问题，`encoding`应该是`"UTF-8"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:04:04.533

不确定，但 dataString 只包含直到这个零的数据，因为 stringEnd 显示在第一个零位置而不是后面。

dataString = dataString.substring(0, stringEnd+1);

或者

char specChar = dataString.substring(stringEnd, stringEnd+1); 它应该只返回特殊字符，但正如我在 biggining 中所说，不确定......

# java - 我如何使用 facebook app_token 将照片或视频分享给某人，因为它需要用户 acc_token ？

> ID：11986258
> 
> 赞同：0
> 
> 时间：2012-08-16T11:36:09.620
> 
> 标签：java, facebook-graph-api, access-token

我这里有问题；

我想用我的 facebook 应用程序令牌在某人的墙上分享照片或视频。但是，例如，当我尝试将视频或照片上传到我的墙上时，它会要求验证用户访问令牌以执行此操作。是因为墙是个人的，没有人可以在某人的墙上分享视频或照片吗？有没有办法用应用程序令牌做到这一点？我在java中使用facebook grahp Api

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:48:36.473

正如您所说，这取决于权限。执行某些操作需要用户访问令牌，否则应用程序几乎总是会向人们发送垃圾邮件。基本上，用户访问令牌验证他们已授予您的应用适当的 publish_stream 权限

[https://developers.facebook.com/docs/authentication/permissions/](https://developers.facebook.com/docs/authentication/permissions/)

底部有一点关于访问令牌的信息，但基本上您的应用程序 access_token 并不知道特定用户已授予某些权限。

# css - 无法获得 div 背景颜色来填充视口的整个宽度

> ID：11986272
> 
> 赞同：0
> 
> 时间：2012-08-16T11:37:13.433
> 
> 标签：css, html, viewport

我正在尝试用背景颜色填充页面的某个部分。我希望背景颜色填充视口的整个宽度，但具有固定的高度。这是我尝试过的：

```
<div id="theDiv" style="width: 100%; height:200px; background-color:black;">
    Blah blah blah, content goes here.
</div> 
```

但无论我尝试什么，这总是在 div 的两侧，在 div 的边缘和视口的边界之间给我一个小的白色边距。如何使 div 填充视口的*整个*宽度？

我不想更改`<body>`标签的背景颜色，因为我只需要填充屏幕的某个垂直部分。

我唯一能想到的我还没有尝试过的就是创建一个 1px 宽的 bg 图像并将其设置为 x-repeat ......没有比这更优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T11:39:35.120

尝试将`body`和的宽度设置`html`为 100%，并将填充和边距设置为 0。

此外，您可能希望将 CSS 重置规则应用于样式表的开头。您可以使用这个 CSS 重置[http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)或谷歌另一个。

# audio - ffmpeg 可以将音频从原始 PCM 转换为 WAV 吗？

> ID：11986279
> 
> 赞同：46
> 
> 时间：2012-08-16T11:37:37.927
> 
> 标签：audio, ffmpeg, wav, pcm

我可以将wav文件转换为pcm

```
ffmpeg -i file.wav -f s16le -acodec pcm_s16le file.pcm 
```

如何恢复此操作？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-08-16T15:38:50.167

wav 容器只是向原始 PCM 数据添加一个简单的标头。标头包括格式、采样率和通道数。由于原始 PCM 数据不包含此信息，因此您需要在命令行中指定它。选项在它们适用的文件之前指定，因此输入文件之前的选项可用于指定输入文件的格式，输入文件之后和输出文件之前的选项可用于指定所需的输出格式文件。如果您想要输出文件中相同的位/样本、采样率和通道数，那么在这种情况下您不需要任何输出选项；wav 容器格式已由文件扩展名指示。

**将原始 PCM 转换为 WAV 的示例：**

```
ffmpeg -f s16le -ar 44.1k -ac 2 -i file.pcm file.wav 
```

*   `-f s16le`… 签名的 16 位 little endian 样本
*   `-ar 44.1k`… 采样率 44.1kHz
*   `-ac 2`… 2 个通道（立体声）
*   `-i file.pcm`… 输入文件
*   `file.wav`… 输出文件

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-09-12T11:42:23.693

注意RAW数据格式

-f u8 是无符号的 8 位，s16 是有符号的以防万一

```
 $ ffmpeg -formats | grep PCM
 DE alaw            PCM A-law
 DE f32be           PCM 32-bit floating-point big-endian
 DE f32le           PCM 32-bit floating-point little-endian
 DE f64be           PCM 64-bit floating-point big-endian
 DE f64le           PCM 64-bit floating-point little-endian
 DE mulaw           PCM mu-law
 DE s16be           PCM signed 16-bit big-endian
 DE s16le           PCM signed 16-bit little-endian
 DE s24be           PCM signed 24-bit big-endian
 DE s24le           PCM signed 24-bit little-endian
 DE s32be           PCM signed 32-bit big-endian
 DE s32le           PCM signed 32-bit little-endian
 DE s8              PCM signed 8-bit
 DE u16be           PCM unsigned 16-bit big-endian
 DE u16le           PCM unsigned 16-bit little-endian
 DE u24be           PCM unsigned 24-bit big-endian
 DE u24le           PCM unsigned 24-bit little-endian
 DE u32be           PCM unsigned 32-bit big-endian
 DE u32le           PCM unsigned 32-bit little-endian
 DE u8              PCM unsigned 8-bit 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-04-14T12:00:27.947

```
ffmpeg -f s16le -ar 8000 -ac 2 -i out.pcm -ar 44100 -ac 2 out.wav 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2017-06-23T16:36:59.213

下面的代码应该可以工作：

```
ffmpeg -f s16le -ar 8000 -ac 2 -i out.pcm -ar 44100 -ac 2 out.wav 
```

# c++ - 将图标添加到状态栏 - Qt

> ID：11986280
> 
> 赞同：1
> 
> 时间：2012-08-16T11:37:42.060
> 
> 标签：c++, qt, icons

我有一个以以下格式保存的图标：

```
//icon.h
extern const unsigned char icon[];

//icon.cpp
const unsigned char icon[]={0x17,0x3f,0x0c,....,0x10,0x06} 
```

现在我想将此图标添加到状态栏。

我该怎么做？

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T11:49:47.043

首先创建一个加载图标数据的小部件，例如您设置[QPixmap](http://qt-project.org/doc/qt-4.8/qlabel.html#pixmap-prop)的 QLabel 。那张图片是什么格式的？您必须使用其中一个构造函数将其加载到您的像素图中，或者您可以尝试使用[`loadFromData()`](http://qt-project.org/doc/qt-4.8/qpixmap.html#loadFromData).

然后将该小部件添加到状态栏，如下所示：

```
statusBar()->addWidget(yourIconWidget); 
```

看看[`statusBar()`](http://qt-project.org/doc/qt-4.8/qmainwindow.html#statusBar)，[`addWidget()`](http://qt-project.org/doc/qt-4.8/qstatusbar.html#addWidget)和[`addPermanentWidget()`](http://qt-project.org/doc/qt-4.8/qstatusbar.html#addPermanentWidget)。

如何创建小部件的示例可能是：

```
QPixmap *pixmap = new QPixmap;

// Note that here I don't specify the format to make it try to autodetect it, 
// but you can specify this if you want to. 
pixmap->loadFromData(icon, sizeof(icon) / sizeof(unsigned char));

QLabel *iconLbl = new QLabel;
iconLbl->setPixmap(pix);

statusBar()->addWidget(iconLbl); 
```

如上所述，指定格式在[此处](http://qt-project.org/doc/qt-4.8/qpixmap.html#reading-and-writing-image-files)进行了详细说明。

# javascript - 如何将 ASP.NET 控件名称传递给 Javascript 函数？

> ID：11986282
> 
> 赞同：2
> 
> 时间：2012-08-16T11:37:49.270
> 
> 标签：javascript, asp.net, variables

我已经用谷歌搜索死了，找到了很多“答案”，但没有一个对我有用，所以也许你们聪明的人可以给我一个“明确”的答案？

我有一个 Javascript 函数：

```
function enableSaveLink() {
    document.getElementById('<%= btnSaveLink.ClientID %>').removeAttribute('disabled');
} 
```

这很好用，但显然它是硬编码的，可以在我的页面上启用特定控件。我想要的是能够从页面上的任何控件调用此函数，并将我想要启用的控件的名称作为变量传递。所以，在一个理想的世界里，我的 Javascript 函数应该是这样的：

```
function enableControl(ctl) {
    document.getElementById(ctl).removeAttribute('disabled');
} 
```

我会这样称呼它：

```
<asp:button id="btnTestButton" runat="server" Text="Click Me" onclientclick="enableControl('txtTestTextbox') />
<asp:button id="txtTestTextbox" runat="server" enabled="false /> 
```

我知道我传递控件名称的方式永远行不通，但我尝试以各种不同的方式传递它，但没有任何工作，所以这只是为了说明。谁能告诉我如何真正做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T11:39:43.573

您需要使用控件的[ClientID](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientid%28v=vs.110%29.aspx)属性。

这将有助于：

```
<asp:button id="btnTest" runat="server" Text="Click Me" 
            onclientclick="enableControl('<%= lblTest.ClientID %>') /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T11:39:49.767

使用`this`参考（[更多信息在这里](http://www.quirksmode.org/js/this.html)）：

```
<asp:button id="btnTest" runat="server" Text="Click Me" onclientclick="enableControl(this);" /> 
```

然后在你的脚本中：

```
function enableSaveLink(elem) {
    elem.removeAttribute('disabled');
} 
```

在这里，您将调用函数的对象的引用传递给函数，然后您可以只在元素上设置属性，而不是在 DOM 中查找它。

* * *

**编辑**- 刚刚意识到您的预期用途是什么。如果您希望在单击时从禁用的元素触发事件，那么您不能从该元素执行此操作。它需要从其他一些启用的元素处理。如果您打算在单击时禁用元素，则上述方法可以正常工作 - 但在单击时不启用元素。

* * *

**编辑**- 只是为了配合我的评论，如果你有这样的统一结构（即所有输入都有相应的标签 - 甚至按钮），那么：

```
<div>
    <label onclick="activateSibling(this);">Input One:</label>
    <input type="text" />
</div> 
```

你可以试试这个：

```
function activateSibling(label) {
    label.nextSibling.removeAttribute("disabled");
} 
```

我制作了一个[jsFiddle 来](http://jsfiddle.net/4SqjH/)展示我在 jQuery 中的概念，它似乎工作正常。

* * *

**编辑**- 好的，最后一个想法。[自定义属性](http://javascript.info/tutorial/attributes-and-custom-properties)呢。`target`您可以向包含您要启用的 Id 的可点击元素添加一个属性，如下所示：

```
<label target="active_me" onclick="activate(this);">Click to activate</label>

<input type="text" id="active_me" disabled="disabled" /> 
```

还有你的脚本：

```
function activate(label) {
    var inputId = this.getAttribute("target");
    var input = document.getElementById(inputId);
    input.removeAttribute("disabled");
} 
```

虽然，它开始感觉我们正在与技术作斗争，而且我们离`ctrlInput.ClientID`. 但我想这会让你的标记更清晰一些，并为你提供一个可以整体绑定的函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T14:42:13.523

好的，我已经破解了。可能有不止一种方法可以做到这一点，但这相当优雅。

我的 Javascript 函数：

```
 function enableControl(ctl) {
        document.getElementById(ctl).removeAttribute('disabled');
    } 
```

我的 ASP.NET 标记：

```
<asp:Button ID="btnTestButton" runat="server" Text="Click to enable" OnClientClick="enableControl('txtTestTextbox');" />
<asp:TextBox ID="txtTestTextBox" runat="server" enabled="false" ClientIDMode="Static" /> 
```

关键是 ClientIDMode 属性，当设置为静态时，意味着控件的客户端 ID 在呈现时将与您在标记中提供的 ID 匹配。如果它在命名容器中，您可能需要将其包含在函数调用中传递的变量中。有关 ClientIDMode 的更多信息，请参见[此处](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx)。

无论如何，这对我有用！谢谢大家的意见。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T12:23:14.033

**ClientID**用于获取对 javascript 的服务器端控制。

```
var element=document.getElementById('<%=lblTest.ClientID%>'); 
```

# c++ - 来自外部类的 boost::asio::async_write

> ID：11986284
> 
> 赞同：0
> 
> 时间：2012-08-16T11:37:54.243
> 
> 标签：c++, boost, boost-asio, shared-ptr, boost-thread

如果使用 echo 服务器的示例使用 boost.asio 对 tcp 服务器进行编程，我已经修改了它的一些代码以满足我想要处理传入数据并发回结果的要求，我使用了一个用于套接字处理的类“ socket.h”，我想为文件“handler.h”中的数据创建另一个处理程序，我现在的问题是如何将数据传递给 handler.h 中的函数并通过套接字从这个函数发送回数据。H ？？

***套接字.h***

```
#include <cstdlib>
#include <iostream>
#include <boost/bind.hpp>
#include <boost/asio.hpp>
#include <json/json.h>
#include "handler.h"

using namespace std;
using boost::asio::ip::tcp;

class session {
public:
    session(boost::asio::io_service& io_service) : socket_(io_service) {}
    tcp::socket& socket() { return socket_; }

    /* listen for first input data after connection established */
    void start() {
        socket_.async_read_some(boost::asio::buffer(data_, max_length),
        boost::bind(&session::handleIncome,this,
        boost::asio::placeholders::error,
        boost::asio::placeholders::bytes_transferred)); }

    /* handle incoming data */
    void handleIncome(const boost::system::error_code& error, size_t bytes_transferred) {
        /* data is recieved in var data_ */
            if (!error) {   
            /********************* Data Handler ****************************/

                     callHandler(data_); //this is in handler.cpp

            /**************************************************************/
        } else { delete this; } }

    /* get more input */
    void getIncome(const boost::system::error_code& error) {
        if (!error) {
            socket_.async_read_some(boost::asio::buffer(data_, max_length),
            boost::bind(&session::handleIncome, this,
            boost::asio::placeholders::error,
            boost::asio::placeholders::bytes_transferred)); }
    else { delete this; } }

    /* send outcome back to client */
    void sendOutcome(const std::string dout, size_t bytes_out) {
        boost::asio::async_write(socket_,boost::asio::buffer(dout, bytes_out),
        boost::bind(&session::getIncome, this,boost::asio::placeholders::error)); }

private:
    tcp::socket socket_;
    enum { max_length = 1024 };
    char data_[max_length];
};

class DServer {
public:
    DServer(boost::asio::io_service& io_service, short port)
    :io_service_(io_service),
    acceptor_(io_service, tcp::endpoint(tcp::v4(), port))

    {
        session* new_session = new session(io_service_);
        acceptor_.async_accept(new_session->socket(),
        boost::bind(&DServer::handle_accept,this,new_session,boost::asio::placeholders::error));
    }

    void handle_accept(session* new_session,const boost::system::error_code& error) {
    if (!error) {
        new_session->start();
        new_session = new session(io_service_);
        acceptor_.async_accept(new_session->socket(),boost::bind(&DServer::handle_accept, this, new_session,boost::asio::placeholders::error));}
    else { delete new_session; } }

private:
    boost::asio::io_service& io_service_;
    tcp::acceptor acceptor_;
}; 
```

***处理程序.cpp***

```
void callHandler(string data) {
    /* here i want to process data and after that i want to send back the result to the same client ofcourse using the function sendOutcome() in the socket.h file */
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:58:15.297

从函数返回数据的最常见方法是返回它：

```
string callHandler(string data);

sendOutcome(callHandler(data_)); 
```

如果您需要更大的灵活性（例如，发送多个响应，或对套接字执行其他操作），则要么传递对套接字的引用，要么传递对`session`对象的引用（可能使用抽象接口将其与类解耦执行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T10:54:58.900

首先，您必须确保您已收到所需的所有数据。您的处理程序应该处理这样的情况：handleIncome() 回调被调用且 bytes_transferred 为 1，即使整个请求要大得多。

当然，您不应该*将*读取回调用作 async_write() 函数的参数。

# c# - 使用 Thread.Interrupt 取消线程池工作项

> ID：11986285
> 
> 赞同：2
> 
> 时间：2012-08-16T11:37:59.627
> 
> 标签：c#, task-parallel-library

我们使用 TPL 将长时间运行的任务排队到线程池中。有些任务可能会阻塞一段时间，所以我们使用以下模式来取消它们：

```
private void RunAction(Action action, CancellationTokenSourceWithException cts)
{

    try
    {
        s_logger.Info("Starting action on thread ID: {0}", Utils.GetCurrentNativeThreadId());

        Thread taskThread = Thread.CurrentThread;
        cts.Token.Register(() => InterruptTask(taskThread));

        s_logger.Info("Running next action");
        action();
    }
    catch (Exception e)
    {
        cts.Cancel(e);
        throw;
    } 
```

这样，调用`cts.Cancel()`将导致任务线程被中断，以防它被阻塞。然而，这导致了一个问题：我们不知道线程是否真的得到了 ThreadInterruptedException。有可能我们调用`Thread.Interrupt()`它，但线程将运行到完成，任务将简单地结束。在这种情况下，线程池线程将有一个 ThreadInterruptedException 形式的定时炸弹，当另一个任务在该线程上运行并试图阻塞时，它就会得到这个异常。

一种`Thread.ResetInterrupted()`方法（类似于`Thread.ResetAbort()`）在这里会有所帮助，但它似乎不存在。我们可以使用类似下面的东西：

```
try
{
    someEvent.Wait(10);
}
catch (ThreadInterruptedException) {} 
```

吞下ThreadInterruptedException，但它看起来很难看。

任何人都可以提出替代方案吗？我们在线程池线程上调用 Thread.Interrupt 是错误的吗？这似乎是取消任务的最简单方法：使用事件等的协作取消使用起来要麻烦得多，并且必须从任务传播到我们使用的所有类中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T11:48:58.323

**您不能这样做，因为您不知道线程池的线程是否/何时会在不运行您自己的代码时阻塞！**

除了您提到的问题之外，如果一个线程决定在不运行您自己的代码时阻塞，那么该线程将未被`ThreadInterruptException`处理并且应用程序将立即终止。这是您无法使用`try`/block/`catch`守卫解决的问题，因为存在竞争条件：守卫可能在`Thread.Interrupt`被调用时刚刚完成，因此如果运行时决定此时让线程阻塞，您将遇到崩溃。

因此，使用`Thread.Interrupt`不是一个可行的选择，您肯定必须设置合作取消。

除此之外，您可能首先不应该将线程池用于这些任务（尽管没有足够的数据可以使用。引用[文档](http://msdn.microsoft.com/en-us/library/0ka9477y.aspx)（强调我的）：

> 如果您有需要后台处理的**短任务**，托管线程池是一种利用多个线程的简单方法。
> 
> 有几种情况适合创建和管理自己的线程而不是使用线程池线程：
> 
> *   ...
> *   您的任务会导致线程长时间阻塞。线程池具有最大线程数，因此大量阻塞的线程池线程可能会阻止任务启动。
> *   ...

因此，您可能要考虑使用自己的线程池（这里有一个显然非常有声望的实现[）](http://smartthreadpool.codeplex.com/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T12:08:07.763

简单的。您需要将 CancellationToken 传递给被调用的操作，并在发出取消信号时对其进行操作。与 TPL 线程`Interrupt`混淆绝对是错误的行为，并且会使 TPL 处于“混乱”状态。一路采用取消模式。

# android - Android：在数组 ListView 中添加新条目

> ID：11986286
> 
> 赞同：0
> 
> 时间：2012-08-16T11:37:59.447
> 
> 标签：android, arrays, listview

我正在做一个有 2 个屏幕的项目。第一个屏幕包含一个 ListView，其中包含所有最畅销的电影。每行包含：

a.) 电影名称 b.) 收入 c.) 发行年份

所有这些都由 XML 排列，并且每部电影都在 strings.xml 资源中的字符串数组中声明，由编码本身内的 for 循环访问。单击菜单按钮，您可以选择添加另一个条目。单击此按钮会将用户重定向到另一个包含 3 个空编辑文本字段的屏幕。这些分别对应于电影名称、收入和发行年份，用户可以在其中输入他们的电影。

这是字符串 .xml （因为太长的片段）：

```
 <string-array name="title_array">
        <item>Avatar</item>
        <item>Titanic</item>
        <item>The Lord of the Rings: The Return of the King</item>
        <item>Pirates of the Caribbean: Dead Mans Chest</item>
        <item>Toy Story 3</item>
        <item>Pirates of the Caribbean: On Stranger Tides</item>
    </string-array> 
```

假设我也有相应的总数组和年份数组。

这是正确的 for 循环（通过自定义适配器）：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        String[] titleList = getResources().getStringArray(R.array.title_array);
        String[] grossList = getResources().getStringArray(R.array.gross_array);
        String[] dateList = getResources().getStringArray(R.array.date_array);

        ArrayList<Lab6_082588FetchDetails> results = new   ArrayList<Lab6_082588FetchDetails>();

    for (int i = 0; i < titleList.length; i++) {
        Lab6_082588FetchDetails sr = new Lab6_082588FetchDetails();
        sr.setTitle(titleList[i]);
        sr.setGross(grossList[i]);
        sr.setDate(dateList[i]);
        results.add(sr);
    } 
```

我的问题是，当然，我可以添加另一个条目并使用 set notifyDataSetChanged(); 但是如果用户退出并重新打开应用程序，这不会“永久”保存新条目。我的假设是可以通过代码更改 .xml 字符串资源文件，但我不知道如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:45:36.533

如果您将电影信息存储在 SQLite 数据库中会更好。

然后，您可以使用 a `CursorAdapter`with you `ListView`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:42:14.230

无法更改资源文件。您将不得不使用其他方法来持久化数据。

为此使用 SQLite 或文件。

由于您还没有上 SQLite 课程，您可以尝试文件，如果不是文件，那么您可以尝试共享首选项。

# ms-access - MS Access 数据库更新

> ID：11986290
> 
> 赞同：0
> 
> 时间：2012-08-16T11:38:15.750
> 
> 标签：ms-access

我有一个应用程序，它使用带有密码加密的 ms 访问数据库。登录信息存储在数据库中（用户名和密码）。我双击数据库文件并输入密码以查看表列表。在消息栏中有一条消息指出“此数据库已以只读方式打开”。然后我尝试将密码设置为一个新值，比如说“password1”。但是，当我重新运行我的应用程序并尝试使用新密码登录但它失败（仅适用于旧密码）。

这是否意味着应用程序不使用这里的数据库？或者在某处有数据库的副本并被引用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T17:07:14.407

我想可能有密码加密，这种情况下不能只修改数据库中的密码来登录。检查您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T10:03:18.647

你说的各种各样的东西是互不相容的。使用加密保存数据库不需要用户名，只需要密码。如果密码错误或不提供密码，则数据库不会以只读方式打开，根本不会打开。如果您使用用户级安全性，则用户名和密码不会存储在“数据库内”，而是存储在 .mdw 文件中。

尝试在打开数据库的同时按住shift键，如果完全打开则必须一直按住直到数据库完全打开，即按住shift键，打开数据库，输入密码，继续按住shift键。

如果按住 shift 键时**未**要求您输入密码，但文件仍为只读，请检查：

*   右键单击该文件并检查属性
*   检查文件夹权限
*   如果有剩余的 .ldb 或 .laccdb 锁定文件

# java - System.out 在 servlet 中写入的位置在哪里？

> ID：11986296
> 
> 赞同：12
> 
> 时间：2012-08-16T11:38:42.320
> 
> 标签：java, jsp, servlets, system.out

我只是想知道，在 servlet 中调用 System.out.print() 会发生什么？
它在哪里写文本？

还是在 servlet 中对 System.out 有任何重要用途？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-16T11:49:27.293

这取决于您的 servlet 容器。

对于[Tomcat](http://tomcat.apache.org/tomcat-6.0-doc/logging.html#Console)：

> 在 unix 上运行 Tomcat 时，控制台输出通常重定向到名为 catalina.out 的文件。该名称可使用环境变量进行配置。（请参阅启动脚本）。写入 System.err/out 的任何内容都将被捕获到该文件中。

对于[码头](http://docs.codehaus.org/display/JETTY/StdErrStdOut)，您可以将标准输出重定向到文件：

> 可以将发送到 stderr 和 stdout 的所有输出重定向到可以翻转的文件 [...]

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T11:39:53.880

System.out.print() 写在`Server Console`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T12:06:54.717

它将写入控制台。System.out 一般用于 servlet 以验证某些代码是否正常工作，我们可以在控制台中参考。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T12:13:34.967

不，System.out 在`servlet`. 因为，Servlet 是一种用于生成动态网页的网络技术。通常，它返回对`HTML` 页面的响应。因此，不需要在`Console`.

对于控制台打印，除了`Servlet`. 但是，如果我们想在控制台上打印数据，那么您也可以在里面编写`service(),doGet(),doPost()`其他方法：-

```
System.out.println("YOUR MESSAGE"); 
```

但是，建议避免这种情况。

# c++ - 类成员未附加c ++

> ID：11986301
> 
> 赞同：0
> 
> 时间：2012-08-16T11:39:15.413
> 
> 标签：c++, xml, class, types, members

我从 XML 文件中读取数据，根据 xml 文件中的标签，数据被附加到类成员变量。

例如，如果 xml 文件中的一个值包含“！”是否有可能，在这种情况下它是无效的，因此我不能接受该值。因此该值的成员变量为空。

但是一些成员变量的类型是其他类或整数或布尔值。如何检查是否设置了这些值？因为这些没有功能`emtpy()`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:41:35.037

如果它们不是可选的，那么当它们不存在时，您必须使解析机制出错。否则，您可以使用类似`boost::optional`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T11:56:37.303

无法在运行时检测变量是否已显式设置。这就是为什么有些编译器在怀疑某个变量可能未初始化使用时会向您发出警告（不是错误）的原因。

跟踪已设置的变量是程序员的责任。执行此操作的低级方法是使用指针，将它们初始化为 0，在它们应该指向一些已初始化的内存时更改它们，并在它们指向的对象被删除时将它们更改回 0。

在 C++ 中，您可以使用[Boost.Optional](http://www.boost.org/doc/libs/1_50_0/libs/optional/doc/html/index.html)来避免以这种方式处理指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T11:53:02.940

您可以在 XML 读取期间检查 XML 值，如果它包含`"!"`，则将默认值分配给它的任何变量。

例如，将 ptr 设置为`nullptr`、 boolean to`false`和 int 设置为`0`or `-1`。

尽可能使用`const`默认值，这将使您的代码更清晰，更易于维护。

# c++ - 使用 Boost 参数库进行谓词检查时出现问题

> ID：11986305
> 
> 赞同：1
> 
> 时间：2012-08-16T11:39:29.353
> 
> 标签：c++, boost, boost-graph, boost-parameter

我对使用 Boost（实际上是 Boost Graph Library）相当陌生，并且正在尝试编写我的第一个图形算法。由于我的算法需要将几个可选和可默认参数传递给它，我想我会尝试使用 Boost::Parameter 库。据我了解，这是对在 BGL 中广泛使用的旧 BGL 命名参数系统的改进。

我一直在学习[这里](http://www.boost.org/doc/libs/1_47_0/libs/parameter/doc/html/index.html)的教程。本教程中的第一个简单示例运行良好，但是当我尝试使用谓词要求检查我的参数是否与算法前置条件匹配时，我得到了很多难以理解的编译器错误。

以下测试代码是本教程中谓词检查示例的精简版本。

```
#include <iostream>
#include <boost/graph/adjacency_list.hpp>
#include <boost/parameter/keyword.hpp>
#include <boost/parameter/name.hpp>
#include <boost/parameter/preprocessor.hpp>

namespace graphs
{
  BOOST_PARAMETER_NAME(graph)

  BOOST_PARAMETER_FUNCTION(
    (void), my_algorithm, tag,

    (required
      (graph,
        *(boost::mpl::and_<
               boost::is_convertible<
                   boost::graph_traits<_>::traversal_category
                 , boost::incidence_graph_tag
               >
             , boost::is_convertible<
                   boost::graph_traits<_>::traversal_category
                 , boost::vertex_list_graph_tag
              >
           >)
      )
    )
  )
  {
    // ... body of function goes here...
    std::cout << "graph=" << graph << std::endl;
  }
}

int main(int argc, char* argv[])
{
  typedef boost::adjacency_list<boost::vecS, boost::vecS, boost::bidirectionalS> Graph;

  Graph g(3); // Create a graph with 3 vertices.

  boost::add_edge(0, 1, g);
  boost::add_edge(1, 2, g);

  graphs::my_algorithm(graphs::_graph = g);

  return 0;
} 
```

这些是来自编译器的错误消息：

t 用作模板参数 'T2' 的模板参数，预期一个真实类型错误 C2955：'boost::is_convertible'：使用类模板需要模板参数列表错误 C2065：'_'：未声明的标识符错误 C2955：'boost ::graph_traits'：使用类模板需要模板参数列表错误 C2065：'_'：未声明的标识符错误 C2955：'boost::graph_traits'：使用类模板需要模板参数列表错误 C1903：无法从先前的错误中恢复（ s); 停止编译 使用类模板需要模板参数列表错误 C2065：'_'：未声明的标识符错误 C2955：'boost::graph_traits'：使用类模板需要模板参数列表错误 C1903：无法从先前的错误中恢复；停止编译 使用类模板需要模板参数列表错误 C2065：'_'：未声明的标识符错误 C2955：'boost::graph_traits'：使用类模板需要模板参数列表错误 C1903：无法从先前的错误中恢复；停止编译

我认为问题与括号中的下划线有关： boost::graph_traits<_>::traversal_category

但是我真的不知道发生了什么，并且非常感谢有关如何纠正问题的任何建议。一些指向更多代码示例和用户文档的指针也将非常有帮助。参数库看起来很强大，我准备花一些时间学习如何有效地使用它。

我将 Boost 1.47 与 Microsoft Visual Studio 2010 一起使用。

# sql - 如何在 SQL 中拆分字符串值

> ID：11986307
> 
> 赞同：0
> 
> 时间：2012-08-16T11:39:37.863
> 
> 标签：sql, sql-server, sql-server-2008, split

我的数据库中有一个 SQL 表。此表有一个按此名称的列：标题

该列的值为 : `A + B + CC` , `D + EEE`, `F + G + H + I`,`HHHH`

我需要拆分这个值并选择这个值的最后一个索引。

我怎样才能选择这个结果：`CC`,,,, ？`EEE``I``HHHH`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T11:44:44.163

据推测，这些字母可能不止一个字符。为此，您需要 reverse 和 charindex：

```
select (case when charindex('+', title) > 0
             then right(title, charindex('+', reverse(title))-1)
             else title
        end) as lastone 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T11:42:40.793

```
select 
     right(Title,case CHARINDEX('+',reverse(Title)) when 0 then LEN(Title) else CHARINDEX('+',reverse(Title))-1 end ) 
```

# solr - Solr Suggestion (Spellcheck) 多词查询的动态字段选择

> ID：11986311
> 
> 赞同：6
> 
> 时间：2012-08-16T11:39:49.743
> 
> 标签：solr, lucene, solr-schema

我正在使用具有以下配置的 solr 建议组件：

架构.xml

```
<fieldType name="textSpell" class="solr.TextField">
 <analyzer>
   <tokenizer class="solr.StandardTokenizerFactory"/>
   <filter class="solr.LowerCaseFilterFactory"/>
 </analyzer>
</fieldType>
<field name="image_memo" type="text_general"/>
<field name="username" type="text_general"/>
<field name="image_memo" type="text_general"/>
<field name="image_text" type="text_general"/>
<!-- More fields included here -->
<field name="spell" type="textSpell" indexed="true" stored="true" multiValued="true"/>
<copyField source="*" dest="spell"/> 
```

solrconfig.xml

```
<searchComponent class="solr.SpellCheckComponent" name="suggest">
    <lst name="spellchecker">
        <str name="name">suggest</str>
        <str name="classname">org.apache.solr.spelling.suggest.Suggester</str>
        <str name="lookupImpl">org.apache.solr.spelling.suggest.tst.TSTLookup</str>
        <str name="field">spell</str>
        <str name="buildOnCommit">true</str>
    </lst>
</searchComponent>

<requestHandler class="org.apache.solr.handler.component.SearchHandler"
    name="/suggest">
    <lst name="defaults">
        <str name="spellcheck">true</str>
        <str name="spellcheck.dictionary">suggest</str>
        <str name="spellcheck.onlyMorePopular">true</str>
        <str name="spellcheck.count">6</str>
        <str name="spellcheck.collate">true</str>
        <str name="spellcheck.collateExtendedResults">true</str>
        <str name="spellcheck.collate">true</str>
        <str name="spellcheck.maxCollations">6</str>
        <str name="spellcheck.maxCollationTries">1000</str>
        <str name="spellcheck.extendedResults">true</str>
        <str name="spellcheck.collateParam.mm">100%</str>
    </lst>
    <arr name="components">
        <str>suggest</str>
        <str>query</str>
    </arr>
</requestHandler> 
```

如您所见，`spell`我正在使用一个字段进行建议查询。即使对于多个术语查询，这也很有效。

但我需要的是仅搜索选定的字段。
因此，例如，我只想要字段的有效建议，`image_memo`并且`username` 用户可以动态添加和删除要搜索的字段。

我知道我可以做这样的事情：

> q=(image_memo:*search* OR image_username:*search*)

但是，如果您有很多字段和多个术语查询，这将大大减慢速度。

示例：在字段`memo, username, field, field1 and field2`中搜索`term, term1 and term2.`

> （（备忘录：*术语*或用户名：术语*或*字段：*术语*或字段1 ：*术语*或字段2：*术语*）AND（备忘录：*术语1或用户名：**术语1或字段：**术语1或字段1：**术语1或字段2：**术语1）和（备忘录：**术语2*或用户名：*term2*或字段：*term2*或 field1：*term2*或 field2：*term2*））

有没有办法动态选择`spell`字段。或者有没有一种方法可以只在多值字段中搜索特定字段

我正在使用 Apache Solr 4 Alpha。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T12:55:50.300

您需要做的就是使用[Dismax](http://wiki.apache.org/solr/DisMaxQParserPlugin)或[eDismax](http://wiki.apache.org/solr/ExtendedDisMax)。SpellcheckComponent 使用您的查询参数自动运行每个建议。

所以，你必须像这样查询：

```
/suggest?q={!dismax}term1 term2 term3&qf=memo username field field1 field2 
```

或者

```
/suggest?q=term1 term2 term3&defType=dismax&qf=memo username field field1 field2 
```

如果您不想使用 (e)dismax，则可以实现自定义查询解析器。

# iphone - iPhone 的 Http Live Streaming 以及我们为什么使用 .m3u8 文件

> ID：11986313
> 
> 赞同：5
> 
> 时间：2012-08-16T11:39:55.160
> 
> 标签：iphone, ios, html, webserver, http-live-streaming

我已经完成了所有[这](https://stackoverflow.com/questions/6592485/http-live-streaming)一切， 我还制作了 .ts 和 m3u8 文件。在本地服务器和实时服务器中，我可以播放 mp4 文件，例如

```
 <video width="320" height="240" controls="controls" autoplay="autoplay">
 <source src="movie.mp4" type="video/mp4" />
 </object>
 </video> 
```

**但我在播放 .m3u8 文件时遇到问题**

```
 <video width="320" height="240" controls="controls" autoplay="autoplay">
 <source src="movie.m3u8" type="video/m3u8" />
 </object>
 </video> 
```

我的 mediafilesegmenter 创建了两个 .ts 文件和一个 .m3u8 。我的 m3u8 文件是

```
 #EXTM3U
 #EXT-X-TARGETDURATION:10
 #EXT-X-VERSION:4
 #EXT-X-MEDIA-SEQUENCE:0
 #EXT-X-PLAYLIST-TYPE:VOD
 #EXT-X-I-FRAMES-ONLY
 #EXTINF:1.0117,    
 #EXT-X-BYTERANGE:8084@376
 fileSequence0.ts
 #EXTINF:1.0117,    
 #EXT-X-BYTERANGE:7332@36096   and so on.... 
```

那么在 mime.types 中是否有任何问题，因为我在 mime.types 中写下了所有的混淆，如下所示 -

```
 application/x-mpegURL                          m3u8
 video/MP2T                                     ts

 AddType appliction/x-mpegURL                   m3u8
 AddType video/MP2T                             ts

 #application/x-mpegURL                          m3u8
 #video/MP2T                                     ts

 application/x-mpegURL.m3u8
 video/MP2T.ts

 #application/x-mpegURL.m3u8
 #video/MP2T.ts

 #AddType application/x-mpegURL                   m3u8
 #AddType video/MP2T                             ts

 #AddType application/x-mpegURL.m3u8
 #AddType video/MP2T.ts

 AddType application/x-mpegURL.m3u8
 AddType video/MP2T.ts 
```

**我无法在 VLC 中播放 .m3u8 文件**并收到错误[链接](http://codeviewer.org/view/code:28ff)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T14:48:58.070

只要你的 conf 是

```
AddType application/x-mpegURL .m3u8
AddType video/MP2T .ts 
```

它应该适用于apache。我不确定是你的 .ts 还是 .m3u8 问题，所以我建议如下：

*   从 Apple 下载示例 .ts 和 .m3u8 文件并在您的服务器上进行测试
*   检查索引文件中是否有空行，作为[这个问题](https://stackoverflow.com/questions/6438680/http-live-streaming-not-working-on-apache)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T13:08:22.330

视频标签源类型在 iOS 平台上`video/m3u8`无效*。*我建议您简单地省略声明源属性，这不是必需的。

如果您真的想指定源类型，即允许不兼容的客户端选择另一个源，我发现这是`audio/x-mpegurl`可行的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-24T00:13:10.870

The m3u8 you're using was generated for seeking only. See `EXT-X-I-FRAMES-ONLY` as described here: [https://developer.apple.com/library/ios/technotes/tn2288/_index.html#//apple_ref/doc/uid/DTS40012238-CH1-I_FRAME_PLAYLIST](https://developer.apple.com/library/ios/technotes/tn2288/_index.html#//apple_ref/doc/uid/DTS40012238-CH1-I_FRAME_PLAYLIST)

# facebook - 定制的facebook登录页面

> ID：11986314
> 
> 赞同：2
> 
> 时间：2012-08-16T11:39:58.043
> 
> 标签：facebook, login, customization

我们可以自定义 facebook 登录/认证页面吗？

我想使用我自己的自定义弹出窗口来接收来自用户的“电子邮件”和“密码”输入，以便它与我的应用程序的 GUI 一致。是否有一个 facebook API 可以传递从用户那里收到的电子邮件/密码详细信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:54:22.153

查看[https://developers.facebook.com/docs/reference/api/user/#permissions](https://developers.facebook.com/docs/reference/api/user/#permissions) 您无法“创建”新权限。这必须通过 Facebook，以便他们知道已授予哪些权限。这可确保您不仅仅代表用户授予权限，而无需他们主动授予权限。因此，这有理由认为您无法为他们的页面设置样式。

或者，您可以确保用户通过您网站上的帐户注册（您需要密码，所以我假设您不是指他们的 Facebook 密码），然后要求他们将他们的 Facebook 帐户连接到该帐户。您需要在表单中询问他们的电子邮件，让他们登录，然后通过 facebook 连接并将他们的 facebook id 与他们在您网站上的帐户相关联。

# php - 如果有很多请求如何获取数据

> ID：11986317
> 
> 赞同：5
> 
> 时间：2012-08-16T11:39:59.653
> 
> 标签：php, mysql, json, time

这个[主题](https://dba.stackexchange.com/posts/22533/edit)与我在 dba.stackexchange.com 上的其他问题有点相似，但问题不同

我的数据库中有两张表，一张是 user_app 表，其中存储了用户信息，表如下：

```
+--------------+--------------+------+-----+-------------------+-----------------------------+
| Field        | Type         | Null | Key | Default           | Extra                       |
+--------------+--------------+------+-----+-------------------+-----------------------------+
| id           | int(11)      | NO   | PRI | NULL              | auto_increment              |
| apikey       | varchar(32)  | NO   |     | NULL              |                             |
| app_id       | varchar(16)  | NO   |     | NULL              |                             |
| appidt       | varchar(100) | NO   |     | NULL              |                             |
| imei_num     | varchar(32)  | NO   | MUL | NULL              |                             |
| app_version  | varchar(20)  | NO   |     | NULL              |                             |
| package_name | varchar(100) | NO   | MUL | NULL              |                             |
| stamp        | timestamp    | NO   |     | CURRENT_TIMESTAMP | on update CURRENT_TIMESTAMP |
| sdk_version  | float        | NO   |     | NULL              |                             |
+--------------+--------------+------+-----+-------------------+-----------------------------+ 
```

其他表是创意表，我通过它向用户检索广告：

```
+--------------+--------------+------+-----+---------+----------------+
| Field        | Type         | Null | Key | Default | Extra          |
+--------------+--------------+------+-----+---------+----------------+
| id           | int(11)      | NO   | PRI | NULL    | auto_increment |
| campaign_id  | tinyint(4)   | NO   |     | NULL    |                |
| status       | tinyint(4)   | NO   |     | NULL    |                |
| type         | varchar(20)  | NO   |     | NULL    |                |
| title        | varchar(40)  | NO   |     | NULL    |                |
| description  | varchar(100) | NO   |     | NULL    |                |
| iconlink     | text         | NO   |     | NULL    |                |
| marketlink   | text         | NO   |     | NULL    |                |
| app_id       | varchar(16)  | YES  |     | NULL    |                |
| package_name | varchar(200) | YES  | MUL | NULL    |                |
+--------------+--------------+------+-----+---------+----------------+ 
```

这是我的php代码：

```
 $rss = $mysqli->query(" SELECT id as cid,
                        title, description, 
                        iconlink, marketlink, 
                        package_name FROM `creative` 
                        WHERE package_name <> '".$pkg."' AND id = 16 "
                    );

$arr = array();

while($obj = $rss->fetch_object()) {
    $arr = $obj;
    }
        //$uappid = $arr -> uid; //user app id for track
        $cid = $arr -> cid; // creative id
        //$campid = $arr -> campaign_id;
        $title = $arr -> title;
        $desc = $arr -> description;
        $ilink = $arr -> iconlink;
        $mlink = $arr -> marketlink;

$data = array('id'=>"$cid", 'title'=> "$title", 'description'=> "$desc", 'iconlink'=> "$ilink",'marketlink'=>"$mlink");

        $creative = json_encode($data); //return creative json if imei is there

        $response = array('success' => "true", 'result'=>"$creative", 'delay'=>"120000"); 

        echo json_encode($response); //return ad in json 
```

在这种情况下，我必须每 24 小时向用户发送一次广告，我以 json 格式发送。此外，如果用户安装了我们不同的应用程序，我必须在一整天内只向他们发送一个广告。在此，package_name 代表我们的应用程序，我试图通过使用时间标志条目来实现这一点，如下所示：

```
$flag = date('dmy'); 
```

但是如何实现每天一个广告，我只是在研究这个。请看这个问题。

**更新：**我很抱歉，我之前没有提到它，但我想在很多广告请求中只向用户发送一个广告。例如，用户可以发送请求数量并安装我们的应用程序，然后他不会在每个请求上获得相同的广告。他一整天只收到一个广告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:46:10.553

尝试添加结果查询的多维数组：

```
while($obj = $rss->fetch_object()) {
     $array[$obj->cid]['cid'] = $obj->cid;
     $array[$obj->cid]['title'] = $obj->title;
     $array[$obj->cid]['description'] = $obj->description;
     $array[$obj->cid]['iconlink'] = $obj->iconlink;    
     $array[$obj->cid]['marketlink'] = $obj->marketlink; 
     $array[$obj->cid]['package_name'] = $obj->package_name; 
    }

    echo '<pre>';
    var_dump(json_encode($array)); //return ad in json
    echo '</pre>'; 
```

# mysql - group by 到底是做什么的？

> ID：11986321
> 
> 赞同：4
> 
> 时间：2012-08-16T11:40:07.513
> 
> 标签：mysql, group-by

从[here](http://www.roseindia.net/sql/mysql-example/mysql-group-by.shtml)的一个例子中，我试图了解究竟`GROUP BY`做了什么：

鉴于此`employee`表：

```
+-------+----------+--------+------------+
| Empid | Empname  | Salary | DOB        |
+-------+----------+--------+------------+
| 1     | Habib    | 2014   | 2004-12-02 |
| 2     | Karan    | 4021   | 2003-04-11 |
| 3     | Samia    | 22     | 2008-02-23 |
| 4     | Hui Ling | 25     | 2008-10-15 |
| 5     | Yumie    | 29     | 1999-01-26 |
+-------+----------+--------+------------+ 
```

执行后`mysql> select * from employee group by empname;`

我们得到：

```
+-------+----------+--------+------------+
| Empid | Empname  | Salary | DOB        |
+-------+----------+--------+------------+
| 1     | Habib    | 2014   | 2004-12-02 |
| 4     | Hui Ling | 25     | 2008-10-15 |
| 2     | Karan    | 4021   | 2003-04-11 |
| 3     | Samia    | 22     | 2008-02-23 |
| 5     | Yumie    | 29     | 1999-01-26 |
+-------+----------+--------+------------+ 
```

那么，这是否意味着 GROUP BY 只是按键对表进行排序？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-16T11:47:07.860

GROUP BY 启用摘要。具体来说，它控制对 COUNT()、SUM()、AVG()、MIN()、MAX() 等汇总函数的使用。在您的示例中没有太多要总结的内容。

但是，假设您有一个 Deptname 列。然后您可以发出此查询并按 Deptname 获取平均工资。

```
SELECT AVG(Salary) Average,
       Deptname
  FROM Employee
 GROUP BY Deptname
 ORDER BY Deptname 
```

如果您希望您的结果集按特定顺序排列，请使用 ORDER BY。

# hadoop - 使用 Oozie 工作流和协调器 - E0302：无效参数错误

> ID：11986324
> 
> 赞同：2
> 
> 时间：2012-08-16T11:40:42.603
> 
> 标签：hadoop, oozie, oozie-coordinator

我正在尝试使用协调器运行工作流，但是当我尝试将工作流和协调器 XML 文件路径设置在一起时，出现错误。这就是我的 jobs.properties 文件的样子：

```
nameNode=hdfs://10.74.6.155:9000
jobTracker=10.74.6.155:9010
queueName=default
oozie.use.system.libpath=true
oozie.wf.application.path=${nameNode}/user/${user.name}/examples/apps/test/
oozie.coord.application.path=${nameNode}/user/${user.name}/examples/apps/test/ 
```

当我使用命令行运行我的工作流程时：

```
bin\oozie job -oozie http://localhost:11000/oozie -config examples\apps\test\job.properties -run 
```

我收到以下错误：

```
Error: E0302 : E0302: Invalid parameter [{0}] 
```

我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-31T08:03:09.373

job.properties 中不能同时存在工作流和协调路径。您可以将作业作为工作流或协调运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-27T05:00:06.617

仅在属性文件中使用您的协调器路径，并在 Coordinator.xml 文件中使用您的工作流路径。

`**oozie.use.system.libpath=true workflowpath=${nameNode}/user/${user.name}/examples/apps/test/ oozie.coord.application.path=${nameNode}/user/${user.name}/examples/apps/test/**`

在你的 coordinator.xml 文件中添加这一行

' `<app-path>${workflowpath}</app-path>`'

# jsf - 使用 openldap 的 JBOSS ldapExtLoginModule 身份验证失败，密码不正确

> ID：11986326
> 
> 赞同：1
> 
> 时间：2012-08-16T11:40:47.487
> 
> 标签：jsf, authentication, jboss, passwords, openldap

我在 debian 6 vm (192.168.1.150:389) 上设置了 OpenLdap

我已经使用 Jboss AS7.1 创建了一个 JSF 项目，并且正在尝试针对上面的 ldap 服务器进行身份验证。问题是 jboss 显示一条消息，指示我的**密码无效**，所以我不知道如何继续调试这个问题，因为我看不到其他相关输出。

我已经为 org.jboss.security 配置了 TRACE 调试级别

我尝试了无数教程，但没有任何相关错误，我无法继续调试它。

除了提供错误的密码之外，还有什么会导致上述错误（密码错误）？这是一些输出和配置文件。如果我忘记了，我会附上您要求的任何内容。

我的 jboss Standalone.xml 配置如下：

```
319                 <security-domain name="CrudJSFRealm">
320                     <authentication>
321                         <login-module code="org.jboss.security.auth.spi.LdapExtLoginModule" flag="required">
322                             <module-option name="java.naming.factory.initial" value="com.sun.jndi.ldap.LdapCtxFactory"/>
323                             <module-option name="java.naming.provider.url" value="ldap://192.168.1.150:389"/>
324                             <module-option name="java.naming.security.authentication" value="simple"/>
325                             <module-option name="bindDN" value="cn=admin"/>
326                             <module-option name="bindCredential" value="passwd"/>
327 
328                             <module-option name="baseCtxDN" value="ou=People,dc=nps2,dc=local"/>
329                             <module-option name="rolesCtxDN" value="ou=Roles,dc=nps2,dc=local"/>
330 
331                             <module-option name="baseFilter" value="(uid={0})"/><!--ok-->
332                             <module-option name="roleFilter" value="(member={1})"/><!--ok-->
333                             <module-option name="roleAttributeID" value="cn"/><!--ok-->
334                             <module-option name="roleAttributeIsDN" value="false"/>
335                             <module-option name="uidAttributeID" value="member"/>
336                             <module-option name="roleNameAttributeID" value="cn"/>
337 
338                             <module-option name="roleRecursion" value="0"/><!--ok-->
339                             <module-option name="allowEmptyPasswords" value="false"/>
340                             <!--<module-option name="throwValidateError" value="true"/>-->
341                             <module-option name="java.naming.referral" value="follow"/>
342                         </login-module>
343                     </authentication>
344                 </security-domain> 
```

我在 jboss-web.xml 文件中正确引用了 CrudJSFRealm，因为正在使用 ldap 连接：

```
<!-- Realm that will be used -->
<security-domain>java:/jaas/CrudJSFRealm</security-domain> 
```

这是我的openldap结构：

```
dn: dc=nps2,dc=local
objectClass: top
objectClass: dcObject
objectClass: organization
o: nps2.local
dc: nps2

dn: ou=People,dc=nps2,dc=local
ou: People
objectClass: top
objectClass: organizationalUnit

dn: uid=sm0ke,ou=People,dc=nps2,dc=local
uid: sm0ke
cn: Dimitrios Kordas
objectClass: account
objectClass: posixAccount
objectClass: top
objectClass: shadowAccount
shadowLastChange: 15149
shadowMax: 99999
shadowWarning: 7
loginShell: /bin/bash
uidNumber: 1000
gidNumber: 1000
homeDirectory: /home/sm0ke
gecos: Dimitrios Kordas,,,
userPassword:: ***

# Roles, nps2.local
dn: ou=Roles,dc=nps2,dc=local
objectClass: top
objectClass: organizationalUnit
ou: Roles

# users, Roles, nps2.local
dn: cn=users,ou=Roles,dc=nps2,dc=local
objectClass: top
objectClass: groupOfNames
member: uid=sm0ke,ou=People,dc=nps2,dc=local
member: uid=nobody,ou=People,dc=nps2,dc=local
cn: users

# root, Roles, nps2.local
dn: cn=root,ou=Roles,dc=nps2,dc=local
objectClass: top
objectClass: groupOfNames
member: uid=sm0ke,ou=People,dc=nps2,dc=local
member: uid=nobody,ou=People,dc=nps2,dc=local
cn: root 
```

所以基本上我有2个用户（sm0ke和nobody）和2个角色root和用户。每个角色都有一个成员属性。

这是尝试在我的 JSF 项目中通过身份验证时的输出：

```
14:30:32,196 TRACE [org.jboss.as.web.security] (http--127.0.0.1-8080-1) Begin invoke, caller=null
14:30:32,204 DEBUG [org.apache.catalina.authenticator.AuthenticatorBase] (http--127.0.0.1-8080-1) Security checking request POST /CrudJSF/j_security_check
14:30:32,206 DEBUG [org.apache.catalina.authenticator.FormAuthenticator] (http--127.0.0.1-8080-1) Authenticating username 'sm0ke'
14:30:32,211 TRACE [org.jboss.security.authentication.JBossCachedAuthenticationManager] (http--127.0.0.1-8080-1) Begin isValid, principal:sm0ke, cache entry: null
14:30:32,211 TRACE [org.jboss.security.authentication.JBossCachedAuthenticationManager] (http--127.0.0.1-8080-1) defaultLogin, principal=sm0ke
14:30:32,213 TRACE [org.jboss.security.auth.login.XMLLoginConfigImpl] (http--127.0.0.1-8080-1) Begin getAppConfigurationEntry(CrudJSFRealm), size=5
14:30:32,216 TRACE [org.jboss.security.auth.login.XMLLoginConfigImpl] (http--127.0.0.1-8080-1) End getAppConfigurationEntry(CrudJSFRealm), authInfo=AppConfigurationEntry[]:
[0]
LoginModule Class: org.jboss.security.auth.spi.LdapExtLoginModule
ControlFlag: LoginModuleControlFlag: required
Options:
name=baseFilter, value=(uid={0})
name=uidAttributeID, value=member
name=java.naming.referral, value=follow
name=bindDN, value=cn=admin
name=rolesCtxDN, value=ou=Roles,dc=nps2,dc=local
name=roleNameAttributeID, value=cn
name=roleRecursion, value=0
name=baseCtxDN, value=ou=People,dc=nps2,dc=local
name=java.naming.factory.initial, value=com.sun.jndi.ldap.LdapCtxFactory
name=java.naming.security.authentication, value=simple
name=allowEmptyPasswords, value=false
name=roleFilter, value=(member={1})
name=java.naming.provider.url, value=ldap://192.168.1.150:389
name=bindCredential, value=****
name=roleAttributeIsDN, value=false
name=roleAttributeID, value=cn

14:30:32,226 TRACE [org.jboss.security.auth.spi.LdapExtLoginModule] (http--127.0.0.1-8080-1) initialize
14:30:32,227 TRACE [org.jboss.security.auth.spi.LdapExtLoginModule] (http--127.0.0.1-8080-1) Security domain: CrudJSFRealm
14:30:32,228 TRACE [org.jboss.security.auth.spi.LdapExtLoginModule] (http--127.0.0.1-8080-1) login
14:30:32,230 TRACE [org.jboss.security.auth.spi.LdapExtLoginModule] (http--127.0.0.1-8080-1) Logging into LDAP server, env={uidAttributeID=member, baseFilter=(uid={0}), allowEmptyPasswords=false, java.naming.referral=follow, java.naming.security.credentials=***, jboss.security.security_domain=CrudJSFRealm, java.naming.security.authentication=simple, baseCtxDN=ou=People,dc=nps2,dc=local, roleAttributeIsDN=false, rolesCtxDN=ou=Roles,dc=nps2,dc=local, java.naming.security.principal=cn=admin, roleRecursion=0, java.naming.factory.initial=com.sun.jndi.ldap.LdapCtxFactory, roleFilter=(member={1}), java.naming.provider.url=ldap://192.168.1.150:389, roleNameAttributeID=cn, roleAttributeID=cn, bindDN=cn=admin, bindCredential=***}
14:30:32,251 DEBUG [org.jboss.security.auth.spi.LdapExtLoginModule] (http--127.0.0.1-8080-1) Bad password for username=sm0ke
14:30:32,253 TRACE [org.jboss.security.auth.spi.LdapExtLoginModule] (http--127.0.0.1-8080-1) abort
14:30:32,253 ERROR [org.jboss.security.authentication.JBossCachedAuthenticationManager] (http--127.0.0.1-8080-1) Login failure: javax.security.auth.login.FailedLoginException: Password Incorrect/Password Required
    at org.jboss.security.auth.spi.UsernamePasswordLoginModule.login(UsernamePasswordLoginModule.java:270) [picketbox-4.0.7.Final.jar:4.0.7.Final]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [classes.jar:1.6.0_33]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [classes.jar:1.6.0_33]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [classes.jar:1.6.0_33]
    at java.lang.reflect.Method.invoke(Method.java:597) [classes.jar:1.6.0_33]
    at javax.security.auth.login.LoginContext.invoke(LoginContext.java:769) [classes.jar:1.6.0_33]
    at javax.security.auth.login.LoginContext.access$000(LoginContext.java:186) [classes.jar:1.6.0_33]
    at javax.security.auth.login.LoginContext$4.run(LoginContext.java:683) [classes.jar:1.6.0_33]
    at java.security.AccessController.doPrivileged(Native Method) [classes.jar:1.6.0_33]
    at javax.security.auth.login.LoginContext.invokePriv(LoginContext.java:680) [classes.jar:1.6.0_33]
    at javax.security.auth.login.LoginContext.login(LoginContext.java:579) [classes.jar:1.6.0_33]
    at org.jboss.security.authentication.JBossCachedAuthenticationManager.defaultLogin(JBossCachedAuthenticationManager.java:449) [picketbox-infinispan-4.0.7.Final.jar:4.0.7.Final]
    at org.jboss.security.authentication.JBossCachedAuthenticationManager.proceedWithJaasLogin(JBossCachedAuthenticationManager.java:383) [picketbox-infinispan-4.0.7.Final.jar:4.0.7.Final]
    at org.jboss.security.authentication.JBossCachedAuthenticationManager.authenticate(JBossCachedAuthenticationManager.java:371) [picketbox-infinispan-4.0.7.Final.jar:4.0.7.Final]
    at org.jboss.security.authentication.JBossCachedAuthenticationManager.isValid(JBossCachedAuthenticationManager.java:160) [picketbox-infinispan-4.0.7.Final.jar:4.0.7.Final]
    at org.jboss.as.web.security.JBossWebRealm.authenticate(JBossWebRealm.java:214) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.authenticator.FormAuthenticator.authenticate(FormAuthenticator.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:381) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
    at java.lang.Thread.run(Thread.java:680) [classes.jar:1.6.0_33]

14:30:32,272 TRACE [org.jboss.security.authentication.JBossCachedAuthenticationManager] (http--127.0.0.1-8080-1) End isValid, false
14:30:32,273 TRACE [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/CrudJSF]] (http--127.0.0.1-8080-1) Username sm0ke NOT successfully authenticated
14:30:32,481 DEBUG [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/CrudJSF].[Faces Servlet]] (http--127.0.0.1-8080-1)  Disabling the response for futher output
14:30:32,486 DEBUG [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/CrudJSF].[Faces Servlet]] (http--127.0.0.1-8080-1)  The Response is vehiculed using a wrapper: org.apache.catalina.connector.Response
14:30:32,495 DEBUG [org.apache.catalina.authenticator.AuthenticatorBase] (http--127.0.0.1-8080-1)  Failed authenticate() test ??/CrudJSF/j_security_check
14:30:32,504 TRACE [org.jboss.as.web.security] (http--127.0.0.1-8080-1) End invoke, caller=null
14:30:32,506 TRACE [org.jboss.security.SecurityRolesAssociation] (http--127.0.0.1-8080-1) Setting threadlocal:null
14:30:32,514 TRACE [org.jboss.as.web.security] (http--127.0.0.1-8080-1) Begin invoke, caller=null
14:30:32,515 DEBUG [org.apache.catalina.authenticator.AuthenticatorBase] (http--127.0.0.1-8080-1) Security checking request GET /CrudJSF/javax.faces.resource/main.css.xhtml
14:30:32,518 DEBUG [org.apache.catalina.realm.RealmBase] (http--127.0.0.1-8080-1)   Checking constraint 'SecurityConstraint[Restricted Area - ADMIN Only]' against GET /javax.faces.resource/main.css.xhtml --> false
14:30:32,522 DEBUG [org.apache.catalina.realm.RealmBase] (http--127.0.0.1-8080-1)   Checking constraint 'SecurityConstraint[Restricted Area - USER and ADMIN]' against GET /javax.faces.resource/main.css.xhtml --> false
14:30:32,527 DEBUG [org.apache.catalina.realm.RealmBase] (http--127.0.0.1-8080-1)   Checking constraint 'SecurityConstraint[Restricted Area - ADMIN Only]' against GET /javax.faces.resource/main.css.xhtml --> false
14:30:32,528 DEBUG [org.apache.catalina.realm.RealmBase] (http--127.0.0.1-8080-1)   Checking constraint 'SecurityConstraint[Restricted Area - USER and ADMIN]' against GET /javax.faces.resource/main.css.xhtml --> false
14:30:32,529 DEBUG [org.apache.catalina.realm.RealmBase] (http--127.0.0.1-8080-1)   Checking constraint 'SecurityConstraint[Restricted Area - ADMIN Only]' against GET /javax.faces.resource/main.css.xhtml --> false
14:30:32,530 DEBUG [org.apache.catalina.realm.RealmBase] (http--127.0.0.1-8080-1)   Checking constraint 'SecurityConstraint[Restricted Area - USER and ADMIN]' against GET /javax.faces.resource/main.css.xhtml --> false
14:30:32,531 DEBUG [org.apache.catalina.realm.RealmBase] (http--127.0.0.1-8080-1)   Checking constraint 'SecurityConstraint[Restricted Area - ADMIN Only]' against GET /javax.faces.resource/main.css.xhtml --> false
14:30:32,532 DEBUG [org.apache.catalina.realm.RealmBase] (http--127.0.0.1-8080-1)   Checking constraint 'SecurityConstraint[Restricted Area - USER and ADMIN]' against GET /javax.faces.resource/main.css.xhtml --> false
14:30:32,533 DEBUG [org.apache.catalina.realm.RealmBase] (http--127.0.0.1-8080-1)   No applicable constraint located
14:30:32,533 DEBUG [org.apache.catalina.authenticator.AuthenticatorBase] (http--127.0.0.1-8080-1)  Not subject to any constraint
14:30:32,538 TRACE [org.jboss.as.web.security] (http--127.0.0.1-8080-1) End invoke, caller=null
14:30:32,538 TRACE [org.jboss.security.SecurityRolesAssociation] (http--127.0.0.1-8080-1) Setting threadlocal:null 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:27:41.773

我刚刚发现我的 bindDN 不完整。我把它改成了完整的：“cn=admin,dc=nps2,dc=local”，它起作用了。

但是，当日志中没有适当的输出时很难发现。

# ios - 我可以将自定义 Google 地图导入 iOS MapKit 吗？

> ID：11986329
> 
> 赞同：0
> 
> 时间：2012-08-16T11:40:53.107
> 
> 标签：ios, cocoa-touch, map, mapkit, customizing

假设我有一个使用 Google 地图创建的自定义虚构地图。这不是一个真实的地方，而是一个定制的地方。有点像指环王位置的地图，魔多之类的。在浏览器上用作谷歌地图，带有图钉、自定义图像等。有没有办法将它导入 iOS MapKit 以显示在我自己的 iOS 应用程序中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:39:39.020

您可以尝试以 KML 格式导出谷歌地图，然后使用库来解析 KML 数据并在 MKMapView 中查看。

这似乎很有用：http: [//kmlframework.com](http://kmlframework.com)

# ssl - 无法连接到 APNS：返回代码 20（无法获取本地颁发者证书）

> ID：11986330
> 
> 赞同：18
> 
> 时间：2012-08-16T11:40:54.453
> 
> 标签：ssl, push-notification, ssl-certificate, apple-push-notifications

我正在尝试使用 PyAPNS 将推送通知发送到 iPhone 应用程序。我们已经完成了从 Apple 开发中心获取证书的过程，效果很好；但是，我们遵循了几个不同的教程，了解如何将证书和私钥放在一个 .pem 文件中，并且对于所有这些教程，尝试使用生成的证书从我们的 Web 服务器使用 OpenSSL 连接到 APNS 服务器这个错误：

```
$ openssl s_client -connect gateway.sandbox.push.apple.com:2195 -cert apns.pem
CONNECTED(00000003)
depth=1 C = US, O = "Entrust, Inc.", OU = www.entrust.net/rpa is incorporated by  reference, OU = "(c) 2009 Entrust, Inc.", CN = Entrust Certification Authority - L1C
verify error:num=20:unable to get local issuer certificate
verify return:0
[...certificate chain, server certificate, etc.] 
```

有时我们可以在这一切结束时输入一些东西，并且在我们按下回车之前连接不会关闭，有时不会（它立即关闭），但即使我们看起来有连接，当我们尝试时 PyAPNS 总是失败发送推送通知，给出错误“故障 500：'无法连接到 APNS 服务器。'”，我只能假设与“无法获取本地颁发者证书”的原因相同——尽管我不知道这可能是什么原因。

我们一直关注的教程包括：

[http://blog.serverdensity.com/how-to-build-an-apple-push-notification-provider-server-tutorial/](http://blog.serverdensity.com/how-to-build-an-apple-push-notification-provider-server-tutorial/)

[http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)

[http://www.nasoni.net/2010/12/02/apns-client-development-certificate/](http://www.nasoni.net/2010/12/02/apns-client-development-certificate/)

[http://thebirdytoldmeso.com/%28S%28l131v3jmvpdh5255u1jayp20%29%29/userActions/thread/Question.aspx?id=10302792](http://thebirdytoldmeso.com/%28S%28l131v3jmvpdh5255u1jayp20%29%29/userActions/thread/Question.aspx?id=10302792)

是的，我们一直在从私钥中删除密码，当我们尝试连接 OpenSSL 时它不会要求它，所以大概这部分工作正常。

我们不知道出了什么问题。令人恼火的是，所有这些教程（显然还有 Apple）都认为您使用的是 Mac，而我正在 Windows 上开发，而服务器（我正在开发的服务器）是 Ubuntu；在将结果文件发送给我以上传到服务器并执行最后步骤之前，我在 Mac 上的同事一直在为第一步做各种前缀。这可能与它有关吗？或者是否有一个必要的服务器设置步骤在任何地方都被省略了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:59:35.533

使用来自 raywenderlich.com 的教程中的 simplepush php 脚本测试您的证书，然后我们可以从那里继续。有时看起来证书很好，但苹果对所有这些东西都非常挑剔。

错误二十我认为意味着您的私钥有问题，我认为您的配置文件也可能有问题，根据此：[http ://www.raywenderlich.com/forums/viewtopic.php?f=2&t=380&start =100](http://www.raywenderlich.com/forums/viewtopic.php?f=2&t=380&start=100)。

确保您正确导出所有内容，如果需要，请撤销并制作新证书。希望你能解决这个问题！:)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-05-07T20:11:40.873

正如 Ray Wenderlich 所说，您可能需要将其添加到您的 php 文件中：

```
stream_context_set_option($ctx, 'ssl', 'cafile', 'entrust_2048_ca.cer'); 
```

您可以在此处下载证书颁发机构文件： [https ://www.entrust.net/downloads/binary/entrust_2048_ca.cer](https://www.entrust.net/downloads/binary/entrust_2048_ca.cer)

# android - 将多个参数放入 ContentResolver.requestSync

> ID：11986331
> 
> 赞同：5
> 
> 时间：2012-08-16T11:40:55.413
> 
> 标签：android, serialization, android-intent, android-contentresolver, android-syncadapter

我正在制作一个具有同步适配器的应用程序。

我希望能够与将通过其捆绑发送的一些参数一起执行 requestSync 。原因是我希望选择 syncAdapter 实例会做什么。

出于某种原因，putSerializable 和 putIntArray 都会导致 ContentResolver 抛出异常：

```
08-16 14:34:49.080: E/AndroidRuntime(10318): java.lang.IllegalArgumentException: unexpected value type: java.util.MiniEnumSet
08-16 14:34:49.080: E/AndroidRuntime(10318):    at android.content.ContentResolver.validateSyncExtrasBundle(ContentResolver.java:1144)
08-16 14:34:49.080: E/AndroidRuntime(10318):    at android.content.ContentResolver.requestSync(ContentResolver.java:1111)
08-16 14:34:49.080: E/AndroidRuntime(10318):    at com.sciatis.syncer.syncing.SyncAdapter.requestSync(SyncAdapter.java:100)
08-16 14:34:49.080: E/AndroidRuntime(10318):    at 
... 
```

为什么会这样？有没有办法克服这个？放一个整数工作正常，但这些操作没有。

难道我做错了什么 ？有没有更好的方法来实现从活动向同步适配器发送参数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T13:38:20.453

[ContentResolver.requestSync](http://bit.ly/P0tUNf) 说：

> 在 extras 包中只能使用以下类型的值： Integer Long Boolean Float Double String

在这种情况下，您可以尝试：

```
Bundle extras = new Bundle(); 
int[] arr = new int[] {1,2,3,4};
extras.putInt("arrlen", arr.length);
for (int i = 0; i < arr.length; i++) { 
  extras.putInt("arr"+ i, arr[i]);
} 
```

然后在 SyncAdapter 中读取这些值：

```
Bundle extras; //taken from method params
int[] arr = new int[extras.getInt("arrlen")];
for (int i = 0; i < arr.length; i++) { 
  arr[i] = extras.getInt("arr"+ i);
} 
```

# xml - 这个阻止 linq 工作的 XML 有什么问题？

> ID：11986332
> 
> 赞同：0
> 
> 时间：2012-08-16T11:40:55.053
> 
> 标签：xml, linq

```
 Dim root As XElement = XElement.Load(xmlFile)
    Dim stuff =
        From item In root.Elements("abc") Select item

    Debug.Print(stuff.Count) 
```

XML的内容是：

```
<?xml version="1.0"?>
<?mso-application progid="Excel.Sheet"?>
<Workbook
 xmlns="urn:schemas-microsoft-com:office:spreadsheet"
 xmlns:o="urn:schemas-microsoft-com:office:office"
 xmlns:x="urn:schemas-microsoft-com:office:excel"
 xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet"
 xmlns:html="http://www.w3.org/TR/REC-html40">
  <abc xmlns="foo">1</abc>
  <abc xmlns="foo">2</abc>
  <abc xmlns="foo">3</abc>
</Workbook> 
```

如果我删除**xmlns="urn:schemas-microsoft-com:office:spreadsheet"****工作簿**标记的开头，我会得到正确的结果**3**

**ETA**如果我嵌入了另一个命名空间，在本例中为“foo”，我该怎么办

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:44:01.880

您正在尝试查找名称`abc` *没有任何命名空间*的元素。`xmlns=...`父元素的部分设置子元素的默认命名空间。

你需要：

```
Dim ns As XNamespace = "urn:schemas-microsoft-com:office:spreadsheet"
...
Dim stuff = root.Elements(ns + "abc") 
```

请注意，在这里使用查询表达式没有意义 - 如果您只是这样做`From x in y Select x`，您可以使用`y`...

# android - 在android webview中使用apk扩展文件中的图像

> ID：11986335
> 
> 赞同：2
> 
> 时间：2012-08-16T11:41:21.537
> 
> 标签：android, image, webview, apk, expansion

我有一个显示地图的 android 应用程序。这些地图是高分辨率图像，每张地图切成 100 个图块以保持分辨率。我目前将每张地图放在资产文件夹中的单独文件夹中。由于这使我的 apk 很大，我想将这些图像移动到我的主 apk 扩展文件中。目前，我正在使用以下代码在 webview 中显示图像，以便在 webview 中将图块拼接在一起：

```
class ShowMapTask extends AsyncTask<String, Void, String> {

    @Override
    protected String doInBackground(String... maps) {
        String html = "<html><table cellpadding=\"0\" border=\"0\" cellspacing=\"0.0\">";
        for (int i = 0; i < 10; i++) {
            html += "<tr>";
            for (int j = 0; j < 10; j++)
                html += "<td><img src=\"maps/" + maps[0] + "/slice_" + i
                        + "_" + j + ".png\"></td>";
            html += "</tr>";
        }
        return html + "</table></html>";
    }

    @Override
    protected void onPostExecute(String result) {
        WebView wv = (WebView) context.findViewById(R.id.webView);
        wv.getSettings().setSupportZoom(true);
        wv.getSettings().setBuiltInZoomControls(true);
        wv.getSettings().setUseWideViewPort(true);
        wv.getSettings().setLoadWithOverviewMode(true);
        wv.loadDataWithBaseURL("file:///android_asset/", result,
                "text/html", "utf-8", null);
        super.onPostExecute(result);
    }
} 
```

如何迁移到 apk 扩展文件？是否可以在不将 obb 解压缩到 sdcard 的情况下使用图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T22:22:47.263

由于我的原始答案已降级为评论，因此我将尝试使用新答案进行回复。我不知道为什么，但我现在确实有针对 API 10 及以下以及 API 11 及以上的解决方案。我将发布代码以澄清。

对于 API 11 及以上版本，只需在您的 webview 客户端中覆盖 ShouldInterceptRequest，

对于 API 10 及以下使用此 http 侦听[器 http://elonen.iki.fi/code/nanohttpd/](http://elonen.iki.fi/code/nanohttpd/)，

将这两种方法放在一起，对我来说相关的代码是：

```
final String assetPrefix = "file:///android_asset/";
final String httpPrefix = "http://localhost:8001";

// for me this part is in onCreateView after the webview settings bit...
{

    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB)
        webView.setWebViewClient(new HoneyCombWebViewClient());
    else
        webView.setWebViewClient(new MyWebViewClient());    

    webViewLoadUrl();
}

private void webViewLoadUrl() {
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {

        curURL = assetPrefix + curFileName;

        webView.loadUrl(curURL);
    }
    else
    {
        curURL = httpPrefix + '/' + curFileName;

        String str = assetFileToString(curFileName);        
        webView.loadDataWithBaseURL(httpPrefix, str, "text/html", "UTF-8", null);    
    }
}

// then for the WebViewClient
private class HoneyCombWebViewClient extends MyWebViewClient {

    public WebResourceResponse shouldInterceptRequest(WebView view, String url)
    {
                    // remove the asset prefix from the url
        String fileName = url.substring(assetPrefix.length() - 1);

                    // ExpansionFiles is the pointer to your ZipResourceFile
        InputStream inputStream = ExpansionFiles.getWebResource(fileName);

        if (url.endsWith("jpg") || url.endsWith("png"))
            return new WebResourceResponse("image/*", "base64", inputStream);

        return super.shouldInterceptRequest(view, url);
    }
}

private class MyWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {

            else if (url.startsWith(httpPrefix)) {

            curURL = url;

            String str = assetFileToString(url.substring(httpPrefix.length() + 1));

            webView.loadDataWithBaseURL(httpPrefix, str, "text/html", "UTF-8", null); 
            return true;
        }
        else if (url.startsWith(assetPrefix)){
            curURL = url;

            view.loadUrl(url);
            return true;        
        }
        // else.....
    }
} 
```

最后，要使用 NanoHTTPD，找到方法 serve 并将输入流从扩展文件返回到您的文件：

```
public Response serve( String uri, String method, Properties header, Properties parms, Properties files )
{
    InputStream data = ExpansionFiles.getWebResource(uri);

    String mimeType;
    if (uri.endsWith("jpg") || uri.endsWith("png"))
        mimeType = "base64";
    else if (uri.endsWith("css"))
        mimeType = "text/css";
    else if (uri.endsWith("js"))
        mimeType = "text/javascript";
    else
        mimeType = "text/html";

    return new Response( HTTP_OK, mimeType, data );
} 
```

在顶层某处调用构造函数：

```
if (Build.VERSION.SDK_INT < Build.VERSION_CODES.HONEYCOMB) {
    // this for loading images from expansion file under webview in API 10
    try
    {
        webServer = new NanoHTTPD(8001, new File("."));
    }
    catch( IOException ioe )
    {
        System.err.println( "Couldn't start server:\n" + ioe );
        System.exit( -1 );
    }
} 
```

哦，你需要从 NanoHTTPD 中删除 main 方法

我希望你觉得这有帮助。对我来说这是一个漫长而痛苦的过程......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-05T16:06:29.717

[使用JOBB](http://developer.android.com/tools/help/jobb.html)工具打包扩展文件并使用[StorageManager](http://developer.android.com/reference/android/os/storage/StorageManager.html)挂载是一个不错的选择。之后，扩展文件中的文件应该可以作为文件系统中的常规文件访问。这种情况下不需要解压扩展文件。

# objective-c - 如何从 nsarray 中删除空格、括号和“

> ID：11986337
> 
> 赞同：1
> 
> 时间：2012-08-16T11:41:32.353
> 
> 标签：objective-c, ios, xcode, nsarray

我有一个数组，我试图从 nsarray 中删除访问空格、括号和 " 以便使用`componentsSeparatedByString:@";"`

```
NSArray *paths = [dic valueForKey:@"PATH"];

    for(NSString *s in paths)
    {
        NSLog(@"String: %@", s);
    }

String: (
"29858,39812;29856,39812;29800,39819;29668,39843;29650,39847;29613,39855;29613,39855;29613,39856;29605,39857;29603,39867;29603,39867;29599,39892;29596,39909;29587,39957;29571,40018;29563,40038;29560,40043"
) 
```

这是输出，因为显示有空格、括号和“我怎么能删除它们？因为这条线是该数组内的一个字符串`"29858,39812;29856,39812;29800,39819;29668,39843;29650,39847;29613,39855;29613,‌​39855;29613,39856;29605,39857;29603,39867;29603,39867;29599,39892;29596,39909;295‌​87,39957;29571,40018;29563,40038;29560,40043" this line is a string inside the path array`，我尝试使用`componentsSeparatedByString:@";"`它不能被溢出所有有空格括号和”里面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T11:48:28.480

试试 stringByTrimmingCharactersInSet：

```
NSCharacterSet *charsToTrim = [NSCharacterSet characterSetWithCharactersInString:@"()  \n\""];
s = [s stringByTrimmingCharactersInSet:charsToTrim]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:04:44.403

尝试使用：

```
s = [s stringByReplacingOccurrencesOfString:@";"
                                     withString:@""]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T13:11:30.523

它为您分隔数字，您可以将它们作为 ie`NSInteger`值使用。

```
NSString *_inputString = @"29858,39812;29856,39812;29800,39819;29668,39843;29650,39847;29613,39855;29613,39855;29613,39856;29605,39857;29603,39867;29603,39867;29599,39892;29596,39909;29587,39957;29571,40018;29563,40038;29560,40043";
NSString *_setCommonSeparator = [_inputString stringByReplacingOccurrencesOfString:@";" withString:@","];
NSArray *_separetedNumbers = [_setCommonSeparator componentsSeparatedByString:@","];

for (NSString *_currentNumber in _separetedNumbers) {
    NSInteger _integer = [_currentNumber integerValue];
    NSLog(@"number : %d", _integer);
} 
```

# acceleo - Acceleo 的第一个生成器模型教程

> ID：11986339
> 
> 赞同：2
> 
> 时间：2012-08-16T11:41:34.867
> 
> 标签：acceleo

我是 Eclipse 和 Acceleo 的新手，我一直在尝试完成第一个生成器模型教程。我正在使用 Juno 4.2 和 Acceleo 3.3。

这是我到目前为止所做的：

1.  我使用 UML 元模型和生成类型类创建了一个 Accelo 项目。

2.  我为生成文件添加了提供的代码，并将 [comment @main/] 放在模板行下方。

3.  我对清单文件进行了更改。在 Bundle SymbolicName 下，我添加了 singleton:=true。我添加了运行时文件，添加了所有必要的插件，在扩展下，我添加了 UML 生成和动态包。

4.  然后我创建了一个新的 Java 项目，然后选择了 UML 模型并将其制成一个包。然后我通过右键单击包创建一个类，选择 New Child，然后选择类。

5.  我去启动生成文件。我选择了 uml 模型和目标作为新 Java 项目下的 src 文件。它说它正在启动它，但我看不到生成的文件，或者它实际上并没有生成它。

我真的很感激任何帮助或反馈。我真的坚持这一点！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T06:54:43.963

我对 Acceleo 也很陌生，但我可以试一试：您的 generate.mtl 文件中有 [file] 构造吗？因为没有它，Acceleo 不会生成任何文件。

这是在 generate.mtl 文件中使用 [file] 的示例。它创建一个 myFile.txt 文件，里面有一个类名：

```
[comment encoding = UTF-8 /]
[module genAFile('http:///org/eclipse/uml.... etc ')/]

[template public genAFile(aClass : Class)]
    [file ('myFile.txt', false, 'UTF-8')]
        [aClass.name/]
    [/file]
[/template] 
```

希望能帮助到你

# iphone - UIScrollview：具有三个内部垂直uiscrollview的水平分页uiscrollview

> ID：11986340
> 
> 赞同：0
> 
> 时间：2012-08-16T11:41:35.833
> 
> 标签：iphone, xcode, uiscrollview

在我看来，我有上面一堆 uiscrollviews..

当用户水平滑动时，我在一个水平 scollview 中添加了三个滚动视图，他们可以在三个垂直滚动视图之间切换。

当用户垂直滑动时，他们可以在垂直滚动视图之一中看到更多数据。

在我的应用程序中，当用户水平滑动时，他们可以根据向左或向右水平滑动获取下一个日期或上一个日期的信息

我有一个名为 createScrollview 的方法，该方法返回带有必要标签图像视图等的整个滚动视图...

垂直滚动视图按如下方式放置在水平滚动视图上

```
first vertical scrollview at (0,0,320,480)

second vertical scrollview at (320,0,320,480)

third vertical scrollview at (640,0,320,480)

the Contentsize of horizontal scroll-view is (320*3,480) 
```

当加载视图时，horizo​​ntalscrollview 的 contentoffset 设置为 (320,0)，这意味着用户在加载页面时查看中心垂直滚动视图

加载页面时，三个滚动视图以下列方式加载其数据

```
in first scroll-view previous date's data,
in second scroll-view current  date's data &
in third scroll-view next date's data, 
```

现在实际上我想要的是这个......

当用户向右滑动时，用户应该从当前日期切换到下一个日期，当用户向左滑动时，用户应该从当前日期切换到上一个日期

此时，当用户切换日后的数据时，应该加载下一次滑动..

我想让无限滑动成为可能......并且只有三个滚动视图......

& 一件重要的事情是用户可以在一个方向上无限滑动，比如向左或向右......

我已经看到以下关于无限图像滚动的问题....

[无限图像缩放](https://stackoverflow.com/questions/8357018/animation-with-infinite-scrollview)&

[IOS：具有无限分页视图的 UIScrollView](https://stackoverflow.com/questions/6891958/ios-uiscrollview-with-an-infinite-paging-view)

我想要三个垂直滚动视图相同的东西

# python - 多处理的Python不清楚错误

> ID：11986344
> 
> 赞同：1
> 
> 时间：2012-08-16T11:41:50.387
> 
> 标签：python, multiprocessing

我测试 python 多处理并编写简单的程序：

```
from multiprocessing import Process
from time import sleep

def f(name):
    print 'hello', name
    x=1
    while True:
        x+=1
        sleep(1)
        print 'subprocess '+str(x)

        if x==10:
            quit()

if __name__ == '__main__':
    p = Process(target=f, args=('bob',))
    p.start()
    x=1
    while True:
        x+=1
        sleep(0.1)
        print 'main process '+str(x)
        if x==100:
            quit() 
```

它的工作，但我几乎没有错误：

```
Traceback (most recent call last):
      File "ttt.py", line 17, in <module>
        p.start()
      File "/usr/lib64/python2.6/multiprocessing/process.py", line 104, in start
        self._popen = Popen(self)
      File "/usr/lib64/python2.6/multiprocessing/forking.py", line 99, in __init__
        code = process_obj._bootstrap()
      File "/usr/lib64/python2.6/multiprocessing/process.py", line 242, in _bootstrap
        sys.stderr.write(e.args[0] + '\n')
    TypeError: unsupported operand type(s) for +: 'NoneType' and 'str' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:56:23.510

使用`sys.exit()`而不是`quit()`. 后者仅用于交互式解释器。

正如 Kevin 所说，您可以使用`return`in`f`正常退出该功能。这也许更合适。

# java - 在注解中使用字符串常量

> ID：11986346
> 
> 赞同：0
> 
> 时间：2012-08-16T11:42:01.513
> 
> 标签：java, annotations

我看到一篇 Java 文章说最好在注解中使用字符串常量（您可以在[此处](http://javahowto.blogspot.ro/2009/04/use-string-constants-in-annotations.html)查看文章）。为什么这是一个好习惯？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T11:44:41.057

最明显的用途是查找对常量的所有引用比查找所有出现的字符串更容易。您的 IDE 将立即帮助您处理前者，但后者需要您自己完成。

然后，如果您需要更改值（始终如一，无处不在），还有可维护性问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T11:49:17.967

使用常量总是比直接使用字符串文字更好，因为信息应该只在代码中出现一次。如果您`"foo"`在 2 个不同的位置使用字面量，则您可能会更改其中一个位置而忘记更改另一个位置。这可能会破坏您的代码。

在注释中同样甚至更重要。注释通常仅与特定环境相关。在理想情况下，我们有 100% 的测试覆盖率，所以问题会很快被发现。在现实生活中，单元测试通常在不依赖于一些用代码编写的注释的环境中运行，因此您只会在实际环境中看到可能是工具迟到的问题。

# api - WebDriver Selenium API：在 XPath 中识别 WebElement

> ID：11986349
> 
> 赞同：2
> 
> 时间：2012-08-16T11:42:10.617
> 
> 标签：api, selenium, webdriver, selenium-webdriver

我最近开始使用 Selenium，我决定只使用 Selenium 2 / WebDriver。在我的测试代码中，我经常在[`WebElement`](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebElement.html)不知道它在页面中的什么位置的情况下到达。

我想要代码，给定一个 WebElement，构造一个 XPath 表达式来唯一地选择它。

用于 Selenium 的 FireFox 记录器插件可以做到这一点；我想要的是在 Selenium 2 中执行此操作的代码。

我可以自己编写这样的代码，方法是使用`WebElement`'s[沿着树向上走](https://stackoverflow.com/questions/9021074/how-to-find-all-parent-elements-using-selenium-c-sharp-webdriver)`findElement`并找到我们来自的孩子，但是想出一些快速（重复调用似乎很糟糕）和完整的东西（例如，由于命名空间）并非易事。`findElements``By.xpath`

（[一个相关的问题](https://stackoverflow.com/questions/7415960/selenium-webdriver-xpath-generation)建议改用 CSS 选择器——这对我来说很好。）

有没有人为我这样做过？最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T12:00:52.873

也许这会有所帮助：我正在测试一个动态生成 id 的网站，因此它们一直在变化。为了获得他们的 xpath 并使用它，我使用了这个函数：

```
 /**
 * Gets the absolute xPath for elements with dynamic ids.
 * 
 * @param driver - the current WebDriver instance
 * @param element - the element for which the xPath will be found
 * @return the absolute xPath for this element
 */
public static String getElementXPath(WebDriver driver, WebElement element) {
    return (String)((JavascriptExecutor)driver).executeScript(
            "gPt=function(c)" +
            "{" +
            "if(c.id!=='')" +
            "{return c.tagName + '[@id=\"'+c.id+'\"]'}" +
            "if(c===document.body)" +
            "{return c.tagName}" +
            "var a=0;" +
            "var e=c.parentNode.childNodes;" +
            "for(var b=0;b<e.length;b++)" +
            "{var d=e[b];" +
            "if(d===c)" +
            "{return gPt(c.parentNode)+'/'+c.tagName+'['+(a+1)+']'}" +
            "if(d.nodeType===1&&d.tagName===c.tagName)" +
            "{a++}" +
            "}" +
            "};" +
            "return gPt(arguments[0]);", element);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T19:27:27.547

这很简单：顺便说一句，css 是要走的路；xpath 应仅用作最后手段。[http://sauceio.com/index.php/2010/01/selenium-totw-css-selectors-in-selenium-demystified/](http://sauceio.com/index.php/2010/01/selenium-totw-css-selectors-in-selenium-demystified/)比我在这里提供的空间更深入地解释了 css 定位器。

最佳方法：如果您使用的是 firefox 下载 firebug，那会让您查看您的 html。按下 cmd+Shift+c，它会用元素荧光笔打开。找到你的 html 元素，也许它看起来像这样

```
<input type="submit" tabindex="110" value="Post Your Answer" id="submit-button"> 
```

然后你可以很简单地找到你的元素

```
WebElement element = driver.findElement(By.cssSelector("input[id='submit-button']")) 
```

请注意，我们将标记名放在“input”前面，然后是括号“input[id='submit-button']”中的某种唯一标识符。在大多数情况下，这将涵盖您使用的所有 css 定位器的 75%。其他 25% 需要在我放置在页面顶部的链接中包含一些更棘手的内容。

您可能会问“除了 id 我还可以使用哪种唯一标识符”，这在此处进行了介绍：[http ://release.seleniumhq.org/selenium-remote-control/0.9.2/doc/dotnet/Selenium.html](http://release.seleniumhq.org/selenium-remote-control/0.9.2/doc/dotnet/Selenium.html)

祝你好运开始

*编辑*

祝你好运首先找到你的元素......如果你需要，你可以通过部分定位器文本搜索元素，如 input[id*='submit']。当您使用部分文本作为定位器的一部分时，使用它对动态生成的元素很有帮助，不会因元素而异。

你提到走上 html 树也许我在第一次阅读这个问题时没有看到。我认为你遇到了手头的问题。不建议走上 html 树，因为它会使您的测试更容易受到 html 更改的影响。从长远来看，它还会使您的代码不可读。一般来说，如果您的 id 丢失或无法预测，我建议您与 proj 交谈。关于让开发人员编写实际上可以自动化的代码的管理（例如：在关键元素上实现标识符）。从长远来看，这实际上将为您和开发人员节省大量精力，并且还将提高测试的速度和可靠性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-07T05:25:28.823

我们可以使用 ID 找到提交按钮：

1.driver.findElement（By.id（“提交按钮”））

ID > 名称 > CSS > XPATH

# javascript - Node.js 读写文件行

> ID：11986350
> 
> 赞同：26
> 
> 时间：2012-08-16T11:42:12.090
> 
> 标签：javascript, node.js

我尝试使用 Node.js 逐行读取文件，并将其输出到另一个文件。

我的问题是由于 Node.js 的异步特性，有时会导致行序列混乱。

例如我的输入文件是这样的：第 1 行第 2 行第 3 行

但输出文件可能是：第 1 行第 3 行第 2 行

下面是我的代码。

```
var fs  = require("fs");
var index = 1;

fs.readFileSync('./input.txt').toString().split('\n').forEach(
function (line) { 
    console.log(line);
        fs.open("./output.txt", 'a', 0666, function(err, fd) {
            fs.writeSync(fd, line.toString() + "\n", null, undefined, function(err, written) {
            })});
    }
); 
```

任何想法将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-16T12:36:43.757

如果您正在编写同步代码，请仅使用同步函数：

```
var fs  = require("fs");

fs.readFileSync('./input.txt').toString().split('\n').forEach(function (line) { 
    console.log(line);
    fs.appendFileSync("./output.txt", line.toString() + "\n");
}); 
```

对于异步方法，您可以编写类似

```
var fs = require('fs'),
    async = require('async'),
    carrier = require('carrier');

async.parallel({
    input: fs.openFile.bind(null, './input.txt', 'r'),
    output: fs.openFile.bind(null, './output.txt', 'a')
}, function (err, result) {
    if (err) {
        console.log("An error occured: " + err);
        return;
    }

    carrier.carry(result.input)
        .on('line', result.output.write)
        .on('end', function () {
            result.output.end();
            console.log("Done");
        });
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T12:39:23.263

我想您想在每一行上执行一些计算和/或转换。如果没有，简单的复制是单行的（看看[createReadStream 文档](http://nodejs.org/api/fs.html#fs_fs_createreadstream_path_options)）

```
fs.createReadStream('./input.txt').pipe(fs.createWriteStream('./output.txt')); 
```

现在，您每次想要写行时都试图打开文件，是的，这里的顺序是不可预测的。更正确的代码版本：

```
var lines = fs.readFileSync('./input.txt').toString().split('\n')
function writeLineFromArray(lines) {
    var line = arr.shift();
    fs.open("./output.txt", 'a', 0666, function(err, fd) {
        fs.writeSync(fd, line + '\n', null, undefined, function(err, written) {
           writeLineFromArray(lines);
        });
    }); 
}
writeLinesFromArray(); 
```

我可能会使用“给定输入流，在每一行通知我”模块之一，例如[node-lazy](https://github.com/pkrumins/node-lazy/)或[byline](https://github.com/jahewson/node-byline)：

```
var fs = require('fs'),
    byline = require('byline');

var stream = byline(fs.createReadStream('sample.txt'));
stream.on('line', function(line) { 
    // do stuff with line
});
stream.pipe(fs.createWriteStream('./output'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T12:02:15.167

为什么不使用相同的 node.js 插件：[https ://github.com/pvorb/node-read-files](https://github.com/pvorb/node-read-files)

**安装：** npm install read-files

**用法：**

```
 var fs = require("fs");
      require("read-files");

  fs.readFiles([ "file1", "file2" ], "utf8", function(err, data) {
      if (err) throw err;

      console.log(data);
  }); 
```

# c - 即使 if 表达式在 C 中的计算结果为 false，if 块中的变量也被分配为零

> ID：11986352
> 
> 赞同：0
> 
> 时间：2012-08-16T11:42:31.053
> 
> 标签：c

```
#include<stdio.h>
int main(void) {
    int a = 123,b,c;
    if(a>300) {
        b=200;
    }
    c=4556;
    printf("b = %d\n",b);
    return 0;
} 
```

现在好像块评估为假，所以 if 块不应该被执行，但是代码将 b 的值打印为 0。此外，如果在 if 块结束后没有分配 c 的值，那么代码会显示一些垃圾值湾。谁能告诉我为什么会这样，据我所知 b 也必须为第一种情况显示一些垃圾值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T11:45:14.250

除非您初始化变量，否则您将无法确定它们的值是什么，因此这并不奇怪。如果您希望`b`变量包含有意义的值，请使用该值对其进行初始化。

# php - PHP中的切换函数

> ID：11986354
> 
> 赞同：1
> 
> 时间：2012-08-16T11:42:40.903
> 
> 标签：php, switch-statement

我必须在`case`s（`switch`PHP 中的函数）中写什么来制作`if $number > 0 && $number < 15`？

我试过：

```
<?php
    $number = rand("0","100");
    switch($number) {
        case: $number > 0 && $number < 15;
            $output = 1;
            break;
        case: $number > 15 && $number < 50;
            $output = 2;
            break;
    }
    return $output;
?> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-16T11:44:13.283

试试下面的。你的冒号放错地方了！

```
<?php
  $number = rand("0", "100");
  switch(true) {
    case $number > 0 && $number < 15:
      $output = 1;
      break;
    case $number > 15 && $number < 50:
      $output = 2;
      break;
  }
?> 
```

来自下面 DaveRandom 的评论。请注意，如果 $number 等于 15，则不会发生任何事情。我建议您更改其中一个`switch`语句。也许通过将您的第一个案例更改为：

```
 case $number > 0 && $number <= 15: 
```

# entity-framework - 使用 EF 5.0 Code first 和 Visual Studio 2012 RTM 创建 WCF 数据服务时出现请求错误

> ID：11986362
> 
> 赞同：1
> 
> 时间：2012-08-16T11:43:22.853
> 
> 标签：entity-framework, wcf-data-services

我正在尝试使用 VS2012 RTM 位中的 EF 5.0 创建 WCF 数据服务。我有一个简单的 DbContext、两个实体和单独的 WCF 项目，并添加了 WCF 数据服务（代码如下）。如果我尝试调试服务，我只会收到一条请求错误消息。事件日志充满了以下错误：

“尝试访问 LocalDB 实例注册表配置时发生意外错误。有关错误详细信息，请参阅 Windows 应用程序事件日志。”

我想我在做一些愚蠢的事情 - 任何帮助表示赞赏。代码如下：

命名空间数据模型 {

```
public class Farm
{
    public Guid Id { get; set; }
    public String Name { get; set; }
    public List<WebApplication> WebApplications { get; set; }
}

public class WebApplication
{
    public Guid Id { get; set; }
    public String Name { get; set; }
    public Farm Farm { get; set; }
}

public class DADataContext: DbContext
{
    public DbSet<Farm> Farms { get; set; }
    public DbSet<WebApplication> WebApplications { get; set; }
} 
```

}

在服务中

```
namespace WcfService2
{
    public class FarmDataService : DataService<DADataContext>
    {
        // This method is called only once to initialize service-wide policies.
        public static void InitializeService(DataServiceConfiguration config)
        {
            config.DataServiceBehavior.MaxProtocolVersion = DataServiceProtocolVersion.V3;
            config.SetEntitySetAccessRule("Farms", EntitySetRights.All);
           config.SetEntitySetAccessRule("WebApplications", EntitySetRights.All);
        }

   } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:42:29.713

我有类似的问题，我能够通过使用以下属性装饰 Service 类来跟踪确切的异常，如下所示：

```
 [System.ServiceModel.ServiceBehavior(IncludeExceptionDetailInFaults = true)]
    public class FarmDataService : DataService<DADataContext>
    {
... 
```

这应该提供有关错误的更多详细信息。

# php - 不允许错误的 URI 或跨站点访问

> ID：11986364
> 
> 赞同：0
> 
> 时间：2012-08-16T11:43:33.367
> 
> 标签：php, codeigniter, cross-site

在我的 codeigniter 网站中，我使用了 edwardian script 字体。

但是当我使用它时，我在错误和网站设计中遇到了这个错误：

```
downloadable font: download failed (font-family: "Edwardian Script" style:normal weight:normal stretch:normal src index:0): bad URI or cross-site access not allowed 
```

该站点在更改服务器之前运行良好。

这意味着客户端将站点移动到新服务器以获取 ssl 功能，之后该 codeigniter 站点无法正常工作。

我在错误中得到了上述错误。

那么我该如何解决呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:44:11.123

在 application/config/config.php 确保以下设置

```
$config['csrf_protection'] = FALSE; 
```

应该会发现这可以解决您的问题。

# android - 传递给 ContentObserver 以在 Jelly Bean 中发送 SMS 的正确 URI 是什么？

> ID：11986365
> 
> 赞同：0
> 
> 时间：2012-08-16T11:43:35.380
> 
> 标签：android, sms, contentobserver

我正在尝试统计用户发送的传出 SMS 的数量。目前，我的代码是这样的：

```
class SentSMSObserver extends ContentObserver {
....
}

SentSMSObserver sso = new SentSMSObserver(new Handler());
ContentResolver cr = this.getContentResolver();
cr.registerContentObserver(Uri.parse("content://sms"), true, sso); 
```

我尝试在运行 Jelly Bean 的模拟器中运行该应用程序，由于某种原因，当我通过本机 SMS 应用程序发送短信时，它会将我的计数**增加 3**。

现在，我决定替换`content://sms`为`content://sms/sent`相关的 StackOverflow 问答建议，但是当我使用该设置运行应用程序时，它甚至**不会**执行我的内容观察者的`onChange()`. 我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:09:20.983

当数据库更新程序调用您已注册的确切 uri 时，将调用 registerContentObserver 上的回调。但是在您的情况下，彩信应用程序不使用 content://sms/sent ，而是使用类似的东西`content://sms/10`并不断将其从 QUEUED 类型移动到 OUTBOX ，然后再到 SENT 。所以我想这就是为什么你在注册时会收到 3 个更新`content://sms/`

MMS App 每次排队后都会更改 TYPE 列。

解决此问题的一种方法是每次获取 uri 的内容更改回调查询，然后获取“类型”列并检查其值是否为`Telephony.Sms.MESSAGE_TYPE_SENT`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T08:01:08.453

从 Lalit Poptani 建议的[答案](https://stackoverflow.com/questions/11980788/differentiate-inbox-and-sentsms-from-all-sms/11980856#11980856)中，您需要获取光标当前指向的记录“类型”的值。

```
// cr is the content resolver
Cursor cursor = cr.query(Uri.parse("content://sms"), null, null, null, null);
int columnIndex = cursor.getColumnIndex("type");

while (cursor.moveToNext()) {
    int type = cursor.getInt(columnIndex);
    if (type == 2) {
        // do your stuff here
    }
} 
```

正如我在与 nandeesh 的讨论中提到的，消息类型不是公共 API 的一部分，但可以在[此处](http://www.androidjavadoc.com/m5-rc15/constant-values.html#android.provider.Telephony.TextBasedSmsColumns.MESSAGE_TYPE_SENT)找到。

目前，我正在修复一个错误，即 Android 在发送给多个收件人时对单条发送的 SMS 消息进行不准确的计数（发送给两个人计为 3，发送给三个人计为 5）。似乎即使您过滤掉了消息类型，内容观察者也会被多次调用，即使只是一条消息。修复后，我将发布对此答案的更新。

# java - 为什么不序列化呢？

> ID：11986366
> 
> 赞同：0
> 
> 时间：2012-08-16T11:43:39.640
> 
> 标签：java

> **可能重复：**
> [为什么 Java 需要 Serializable 接口？](https://stackoverflow.com/questions/441196/why-java-needs-serializable-interface)

序列化对象的负面后果是什么？必须有某个地方或 Sun 所有可序列化的对象。Serializable 接口甚至不需要存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:47:52.600

如果没有额外的代码，某些对象无法安全地序列化，例如，如果它们有一个打开的套接字。如果您序列化和反序列化对象，套接字将不会神奇地再次打开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T11:50:34.253

序列化提供了第二种方法（在构造函数之后）实例化对象。如果您创建了一个单例类，这可能会导致在您不期望的情况下存在多个对象。

# python - 希望在两个字符串之间提取数据

> ID：11986389
> 
> 赞同：0
> 
> 时间：2012-08-16T11:44:56.613
> 
> 标签：python

在 Python 中，我试图在两个字符串之间使用正则表达式提取信息。我认为最好举个例子。

```
<stuff>
1
2
3
4
</stuff>

<stuff>
5
7
8
9
</stuff> 
```

我试图一次拉出其中一个容器*并将它们放在一个单独的文件中。我已经找到了如何在例如 5 6 7 8 之间提取内容，并同时提取所有记录（在 bash 中），但还没有得到完整的容器，包括放置在变量或文件中的正则表达式，我可以使用的东西。

所以我想收集 <stuff> 和 </stuff>

任何建议将不胜感激。我正在为此尝试在 python2 中工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:13:06.597

如果您需要解析 XML 格式的数据，可以尝试使用[xml.etree.ElementTree](http://docs.python.org/library/xml.etree.elementtree.html)模块中的工具。

```
from xml.etree.ElementTree import XML
single_item_data = XML("<stuff>1 2 3</stuff>").text 
```

如果您有一些嵌套元素，则可以执行以下操作：

```
from xml.etree.ElementTree import XML

test_input_xml = '''
<lotsOfStuff>
   <stuff>
   1
   2
   3
   4
   </stuff>

   <stuff>
   5
   7
   8
   9
   </stuff>
</lotsOfStuff>
'''

test_input = XML(test_input_xml)
stuffs = test_input.findall("stuff")

for stuff in stuffs:
   element_text = stuff.text
   print element_text 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T12:27:33.063

如果您试图展示从 HTML 页面中获取数据的简化图片，那么我强烈建议您不要使用正则表达式 [在 SO 中查找，原因是什么]。

使用[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)或[lxml](http://lxml.de/)。更好，更强大。

# android - android上的WCF .svc服务出错

> ID：11986390
> 
> 赞同：1
> 
> 时间：2012-08-16T11:44:57.643
> 
> 标签：android, wcf, web-services

我在 andorid 中使用 web 服务 .svc WCF .net webservice 来获取登录详细信息。

```
private static final String SOAP_ACTION = "http://tempuri.org/IJobSeekerService/Authenticate";
private static final String METHOD_NAME = "Authenticate";
private static final String URL ="http://dev.spotjobs.com.au/api/SpotJobs.WebServices.JobSeekerService.svc" ;
private static final String  NAMESPACE = "http://tempuri.org/"; 
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

    request.addProperty("apiSecret", "bksnd");
    request.addProperty("apiKey","{abcdhhyyrt}");
    request.addProperty("userID", "payal jain");
    request.addProperty("userPassword","11111111");
    request.addProperty("deviceType","Android");
    request.addProperty("deviceToken","abcd");
    request.addProperty("registrationID","12345a");
    Log.e("", "u urlenvelop-enevlop----" + request);
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
   // envelope.dotNet = true;
    envelope.setOutputSoapObject(request);
    Log.e("", "u urlenvelop-enevlop-...............................---" + envelope);
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

    try {

        Log.e("", "u urlenvelop-enevlop-................rrreeeeeeeeeeeeeee...............---" + envelope);
        androidHttpTransport.call(SOAP_ACTION, envelope);  
        if (envelope.bodyIn instanceof SoapFault) {
            String str= ((SoapFault) envelope.bodyIn).faultstring;
            Log.i("", str);

            // Another way to travers through the SoapFault object
        /*  Node detailsString =str= ((SoapFault) envelope.bodyIn).detail; 
            Element detailElem = (Element) details.getElement(0) 
                         .getChild(0); 
            Element e = (Element) detailElem.getChild(2);faultstring; 
            Log.i("", e.getName() + " " + e.getText(0)str); */
        } else {
            SoapObject resultsRequestSOAP = (SoapObject) envelope.bodyIn;
            Log.d("WS", String.valueOf(resultsRequestSOAP));
        }
        /*SoapObject resultsRequestSOAP = (SoapObject) envelope.bodyIn;
        Log.i("myApp", resultsRequestSOAP.toString());*/

    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

但我收到一个错误：

```
DEBUG/dalvikvm(1809): DexOpt: not verifying 'Lorg/xmlpull/v1/XmlSerializer;':
multiple definitions
08-16 15:51:35.196: WARN/System.err(1848): org.xmlpull.v1.XmlPullParserException: unterminated entity ref (position:TEXT �������������`I�...@1:18 in java.io.InputStreamReader@44e9baa0) 
08-16 15:51:35.258: WARN/System.err(1848):     at org.kxml2.io.KXmlParser.exception(KXmlParser.java:273)
08-16 15:51:35.258: WARN/System.err(1848):     at org.kxml2.io.KXmlParser.error(KXmlParser.java:269)
08-16 15:51:35.258: WARN/System.err(1848):     at org.kxml2.io.KXmlParser.pushEntity(KXmlParser.java:787)
08-16 15:51:35.258: WARN/System.err(1848):     at org.kxml2.io.KXmlParser.pushText(KXmlParser.java:855)
08-16 15:51:35.258: WARN/System.err(1848):     at org.kxml2.io.KXmlParser.nextImpl(KXmlParser.java:354)
08-16 15:51:35.266: WARN/System.err(1848):     at org.kxml2.io.KXmlParser.next(KXmlParser.java:1385)
08-16 15:51:35.266: WARN/System.err(1848):     at org.kxml2.io.KXmlParser.nextTag(KXmlParser.java:1415)
08-16 15:51:35.266: WARN/System.err(1848):     at org.ksoap2.SoapEnvelope.parse(SoapEnvelope.java:127)
08-16 15:51:35.266: WARN/System.err(1848):     at org.ksoap2.transport.Transport.parseResponse(Transport.java:100)
08-16 15:51:35.266: WARN/System.err(1848):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:214)
08-16 15:51:35.276: WARN/System.err(1848):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:96)
08-16 15:51:35.276: WARN/System.err(1848):     at com.example.sample.MainActivity.onCreate(MainActivity.java:44) 
```

谁能告诉我解决方案谢谢

# extjs - Ext.ComboBox 选项选择

> ID：11986401
> 
> 赞同：0
> 
> 时间：2012-08-16T11:45:15.567
> 
> 标签：extjs

**ExtJS 4.1**

我有`Ext.ComboBox`一个绑定它的商店。

如何`selection`从代码模拟其中一个选项，以便`select`调用事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:29:49.497

选择选项使用`combo.select(1); combo.fireEvent('select', combo);`

# c - 哪些工具可以检查完整 C 项目中的缓冲区溢出？

> ID：11986404
> 
> 赞同：0
> 
> 时间：2012-08-16T11:45:37.813
> 
> 标签：c, buffer-overflow

我需要一个工具来查找 C 项目中可能的缓冲区溢出。它不仅应该寻找易受攻击的函数`strcpy()`，还应该尽量减少误报的数量。例如，`strcpy(buffer,"")`不应将类似调用识别为缓冲区溢出，并且还应识别出良好的内存分配。

您知道满足这些要求的工具吗？

我刚刚找到了用于单个文件（不是完整项目）的工具，或者它们显示出许多误报。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:50:01.100

[clang 静态分析器](http://clang-analyzer.llvm.org)对边界问题进行了许多测试。您可以在整个项目中使用它，将其称为：

```
scan-build make 
```

其中“make”是构建项目的命令。这是相当保守的，所以你不应该得到很多误报。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T11:51:41.473

我发现 Gimpel 的 FlexeLint (Unix) == PC-Lint (Windows) 是用于此类检查的有价值的工具。他们有一个[在线演示检查器](http://www.gimpel-online.com/OnlineTesting.html)，您可以在其中输入您的示例并查看它生成的警告。这应该让您了解它的功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T11:50:25.033

看看[KLEE，一个符号虚拟机](http://klee.llvm.org/)。它使用符号执行来确定每个可能的执行路径上的所有可能的变量值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T12:27:01.597

尝试[IBM Rational Purify](http://www.ibm.com/developerworks/rational/library/06/0822_satish-giridhar/)；它是静态代码分析器，有关更多详细信息，请参阅[wiki](http://en.wikipedia.org/wiki/IBM_Rational_Purify)。

# objective-c - 为什么 clang 优化会破坏我的内联汇编代码？

> ID：11986411
> 
> 赞同：5
> 
> 时间：2012-08-16T11:46:04.583
> 
> 标签：objective-c, c, assembly, arm, clang

为了学习一些关于 ARM 汇编的知识，我编写了一个简单的测试项目来使用内联汇编和 NEON 指令执行图像缩小。你可以在这里看到它：

[https://github.com/rmaz/NEON-Image-Downscaling](https://github.com/rmaz/NEON-Image-Downscaling)

经过一番努力，我设法让它工作，快乐的日子。除了它仅适用于小于 -O2 的优化级别。我查看了生成的 ASM，但我看不出有任何明显的原因会发生这种情况。谁能提供任何见解？这是负责内联汇编部分的函数：

```
static void inline resizeRow(uint32_t *dst, uint32_t *src, uint32_t pixelsPerRow)
{
    const uint32_t * rowB = src + pixelsPerRow;

    // force the number of pixels per row to a mutliple of 8
    pixelsPerRow = 8 * (pixelsPerRow / 8);    

    __asm__ volatile("Lresizeloop:                      \n" // start loop
                     "vld1.32       {d0-d3}, [%1]!      \n" // load 8 pixels from the top row
                     "vld1.32       {d4-d7}, [%2]!      \n" // load 8 pixels from the bottom row
                     "vhadd.u8      q0, q0, q2          \n" // average the pixels vertically
                     "vhadd.u8      q1, q1, q3          \n"
                     "vtrn.32       q0, q2              \n" // transpose to put the horizontally adjacent pixels in different registers
                     "vtrn.32       q1, q3              \n"
                     "vhadd.u8      q0, q0, q2          \n" // average the pixels horizontally
                     "vhadd.u8      q1, q1, q3          \n"
                     "vtrn.32       d0, d1              \n" // fill the registers with pixels
                     "vtrn.32       d2, d3              \n"
                     "vswp          d1, d2              \n"
                     "vst1.64       {d0-d1}, [%0]!      \n" // store the result
                     "subs          %3, %3, #8          \n" // subtract 8 from the pixel count
                     "bne           Lresizeloop         \n" // repeat until the row is complete
                     : "=r"(dst), "=r"(src), "=r"(rowB), "=r"(pixelsPerRow)
                     : "0"(dst), "1"(src), "2"(rowB), "3"(pixelsPerRow)
                     : "q0", "q1", "q2", "q3"
                     );
} 
```

在 O1 处为周围函数和循环生成的功能输出如下：

```
.align  2
    .code   16                      @ @"\01-[BDPViewController downscaleImageNeon:]"
    .thumb_func "-[BDPViewController downscaleImageNeon:]"
"-[BDPViewController downscaleImageNeon:]":
    .cfi_startproc
Lfunc_begin4:
    .loc    1 86 0                  @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:86:0
@ BB#0:
    .loc    1 86 1 prologue_end     @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:86:1
    push    {r4, r5, r6, r7, lr}
    add r7, sp, #12
    push.w  {r8, r10, r11}
    sub sp, #20
    @DEBUG_VALUE: -[BDPViewController downscaleImageNeon:]:self <- R0+0
    @DEBUG_VALUE: -[BDPViewController downscaleImageNeon:]:_cmd <- R1+0
    @DEBUG_VALUE: -[BDPViewController downscaleImageNeon:]:image <- R2+0
    .loc    1 88 20                 @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:88:20
Ltmp41:
    movw    r0, :lower16:(L_OBJC_SELECTOR_REFERENCES_2-(LPC4_0+4))
Ltmp42:
    mov r6, r2
Ltmp43:
    @DEBUG_VALUE: -[BDPViewController downscaleImageNeon:]:image <- R6+0
    movt    r0, :upper16:(L_OBJC_SELECTOR_REFERENCES_2-(LPC4_0+4))
LPC4_0:
    add r0, pc
    ldr.w   r11, [r0]
    mov r0, r6
    blx _objc_retain
    mov r4, r0
    mov r0, r6
    mov r1, r11
Ltmp44:
    blx _objc_msgSend
    blx _CGImageGetWidth
    mov r5, r0
Ltmp45:
    @DEBUG_VALUE: width <- R5+0
    .loc    1 89 21                 @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:89:21
    mov r0, r6
    mov r1, r11
    str r5, [sp, #16]           @ 4-byte Spill
    blx _objc_msgSend
    blx _CGImageGetHeight
    mov r10, r0
Ltmp46:
    @DEBUG_VALUE: height <- R10+0
    .loc    1 90 26                 @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:90:26
    mov r0, r6
    mov r1, r11
    blx _objc_msgSend
    blx _CGImageGetBytesPerRow
    str r0, [sp, #12]           @ 4-byte Spill
Ltmp47:
    @DEBUG_VALUE: bytesPerRow <- [sp+#12]+#0
    .loc    1 91 35                 @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:91:35
    mov r0, r6
    mov r1, r11
    blx _objc_msgSend
    blx _CGImageGetAlphaInfo
    str r0, [sp, #4]            @ 4-byte Spill
Ltmp48:
    @DEBUG_VALUE: imageAlpha <- [sp+#4]+#0
    .loc    1 94 45                 @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:94:45
    mov r0, r6
    mov r1, r11
    blx _objc_msgSend
    mov r6, r0
Ltmp49:
    mov r0, r4
    blx _objc_release
    mov r0, r6
    .loc    1 98 29                 @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:98:29
    mul r8, r10, r5
Ltmp50:
    @DEBUG_VALUE: width <- [sp+#16]+#0
    .loc    1 94 45                 @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:94:45
    blx _CGImageGetDataProvider
    blx _CGDataProviderCopyData
Ltmp51:
    @DEBUG_VALUE: data <- R0+0
    str r0, [sp, #8]            @ 4-byte Spill
Ltmp52:
    @DEBUG_VALUE: data <- [sp+#8]+#0
    .loc    1 95 29                 @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:95:29
    blx _CFDataGetBytePtr
    mov r4, r0
Ltmp53:
    @DEBUG_VALUE: buffer <- R4+0
    .loc    1 98 29                 @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:98:29
    lsr.w   r0, r8, #2
    movs    r1, #4
    blx _calloc
    mov r5, r0
Ltmp54:
    @DEBUG_VALUE: outputBuffer <- R5+0
    mov r0, r10
Ltmp55:
    @DEBUG_VALUE: height <- R0+0
    .loc    1 101 29                @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:101:29
    cmp r0, #0
Ltmp56:
    @DEBUG_VALUE: rowIndex <- 0+0
    beq LBB4_3
@ BB#1:                                 @ %.lr.ph
Ltmp57:
    @DEBUG_VALUE: -[BDPViewController downscaleImageNeon:]:self <- R0+0
    @DEBUG_VALUE: -[BDPViewController downscaleImageNeon:]:_cmd <- R1+0
    @DEBUG_VALUE: width <- [sp+#16]+#0
    @DEBUG_VALUE: height <- R0+0
    @DEBUG_VALUE: bytesPerRow <- [sp+#12]+#0
    @DEBUG_VALUE: imageAlpha <- [sp+#4]+#0
    @DEBUG_VALUE: data <- [sp+#8]+#0
    @DEBUG_VALUE: buffer <- R4+0
    @DEBUG_VALUE: outputBuffer <- R5+0
    @DEBUG_VALUE: rowIndex <- 0+0
    ldr r1, [sp, #12]           @ 4-byte Reload
Ltmp58:
    @DEBUG_VALUE: bytesPerRow <- R1+0
    mov.w   r8, #0
    lsl.w   r11, r1, #1
    .loc    1 104 74                @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:104:74
Ltmp59:
    lsr.w   r10, r1, #1
Ltmp60:
    @DEBUG_VALUE: bytesPerRow <- [sp+#12]+#0
LBB4_2:                                 @ =>This Inner Loop Header: Depth=1
    @DEBUG_VALUE: -[BDPViewController downscaleImageNeon:]:self <- R0+0
    @DEBUG_VALUE: -[BDPViewController downscaleImageNeon:]:_cmd <- R1+0
    @DEBUG_VALUE: width <- [sp+#16]+#0
    @DEBUG_VALUE: height <- R0+0
    @DEBUG_VALUE: bytesPerRow <- [sp+#12]+#0
    @DEBUG_VALUE: imageAlpha <- [sp+#4]+#0
    @DEBUG_VALUE: data <- [sp+#8]+#0
    @DEBUG_VALUE: outputBuffer <- R5+0
    @DEBUG_VALUE: rowIndex <- 0+0
    lsr.w   r1, r8, #1
Ltmp61:
    mov r6, r0
Ltmp62:
    @DEBUG_VALUE: height <- R6+0
    mla r0, r1, r10, r5
Ltmp63:
    @DEBUG_VALUE: destRow <- R1+0
    .loc    1 105 9                 @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:105:9
    ldr r2, [sp, #16]           @ 4-byte Reload
    mov r1, r4
Ltmp64:
    bl  _resizeRow
    mov r0, r6
Ltmp65:
    @DEBUG_VALUE: height <- R0+0
    .loc    1 101 50                @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:101:50
    add.w   r8, r8, #2
Ltmp66:
    @DEBUG_VALUE: rowIndex <- R8+0
    .loc    1 101 29                @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:101:29
    add r4, r11
    cmp r8, r0
    blo LBB4_2
Ltmp67:
LBB4_3:                                 @ %._crit_edge
    @DEBUG_VALUE: -[BDPViewController downscaleImageNeon:]:self <- R0+0
    @DEBUG_VALUE: -[BDPViewController downscaleImageNeon:]:_cmd <- R1+0
    @DEBUG_VALUE: width <- [sp+#16]+#0
    @DEBUG_VALUE: height <- R0+0
    @DEBUG_VALUE: bytesPerRow <- [sp+#12]+#0
    @DEBUG_VALUE: imageAlpha <- [sp+#4]+#0
    @DEBUG_VALUE: data <- [sp+#8]+#0
    @DEBUG_VALUE: outputBuffer <- R5+0
    .loc    1 109 28                @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:109:28
    ldr r1, [sp, #4]            @ 4-byte Reload
Ltmp68:
    lsrs    r2, r0, #1
    str r1, [sp]
    mov r6, r5
Ltmp69:
    @DEBUG_VALUE: outputBuffer <- R6+0
    ldr r1, [sp, #16]           @ 4-byte Reload
    ldr r0, [sp, #12]           @ 4-byte Reload
Ltmp70:
    lsrs    r1, r1, #1
    lsrs    r3, r0, #1
    mov r0, r5
    bl  _createBitmapContext
    mov r4, r0
Ltmp71:
    @DEBUG_VALUE: context <- R4+0
    .loc    1 110 30                @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:110:30
    blx _CGBitmapContextCreateImage
    .loc    1 111 66                @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:111:66
    movw    r1, :lower16:(L_OBJC_SELECTOR_REFERENCES_4-(LPC4_1+4))
    .loc    1 110 30                @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:110:30
    mov r5, r0
Ltmp72:
    @DEBUG_VALUE: scaledImage <- R5+0
    .loc    1 111 66                @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:111:66
    movt    r1, :upper16:(L_OBJC_SELECTOR_REFERENCES_4-(LPC4_1+4))
    movw    r0, :lower16:(L_OBJC_CLASSLIST_REFERENCES_$_-(LPC4_2+4))
    movt    r0, :upper16:(L_OBJC_CLASSLIST_REFERENCES_$_-(LPC4_2+4))
LPC4_1:
    add r1, pc
LPC4_2:
    add r0, pc
    mov r2, r5
    ldr r1, [r1]
    ldr r0, [r0]
    blx _objc_msgSend
Ltmp73:
    @DEBUG_VALUE: returnImage <- R0+0
    @ InlineAsm Start
    mov r7, r7      @ marker for objc_retainAutoreleaseReturnValue
    @ InlineAsm End
    blx _objc_retainAutoreleasedReturnValue
Ltmp74:
    mov r8, r0
    .loc    1 112 5                 @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:112:5
    mov r0, r5
    blx _CGImageRelease
    .loc    1 113 5                 @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:113:5
    mov r0, r4
    blx _CGContextRelease
    .loc    1 114 5                 @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:114:5
    ldr r0, [sp, #8]            @ 4-byte Reload
    blx _CFRelease
    .loc    1 115 5                 @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:115:5
    mov r0, r6
    blx _free
Ltmp75:
    .loc    1 118 1                 @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:118:1
    mov r0, r8
    add sp, #20
    pop.w   {r8, r10, r11}
    pop.w   {r4, r5, r6, r7, lr}
Ltmp76:
    b.w _objc_autoreleaseReturnValue
Ltmp77:
Lfunc_end4:
    .cfi_endproc

    .align  2
    .code   16                      @ @resizeRow
    .thumb_func _resizeRow
_resizeRow:
    .cfi_startproc
Lfunc_begin5:
    .loc    1 26 0                  @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:26:0
@ BB#0:
    @DEBUG_VALUE: resizeRow:dst <- R0+0
    @DEBUG_VALUE: resizeRow:src <- R1+0
    @DEBUG_VALUE: resizeRow:pixelsPerRow <- R2+0
    .loc    1 27 47 prologue_end    @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:27:47
    add.w   r3, r1, r2, lsl #2
Ltmp78:
    @DEBUG_VALUE: rowB <- R3+0
    .loc    1 30 5                  @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:30:5
    bic r2, r2, #7
Ltmp79:
    .loc    1 32 5                  @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:32:5
    @ InlineAsm Start
    Lresizeloop:                      
vld1.32       {d0-d3}, [r1]!      
vld1.32       {d4-d7}, [r3]!      
vhadd.u8      q0, q0, q2          
vhadd.u8      q1, q1, q3          
vtrn.32       q0, q2              
vtrn.32       q1, q3              
vhadd.u8      q0, q0, q2          
vhadd.u8      q1, q1, q3          
vtrn.32       d0, d1              
vtrn.32       d2, d3              
vswp          d1, d2              
vst1.64       {d0-d1}, [r0]!      
subs          r2, r2, #8          
bne           Lresizeloop         

    @ InlineAsm End
Ltmp80:
    .loc    1 51 1                  @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:51:1
    bx  lr
Ltmp81:
Lfunc_end5:
    .cfi_endproc 
```

O2 处的非正常输出如下：

```
 .align  2
    .code   16                      @ @"\01-[BDPViewController downscaleImageNeon:]"
    .thumb_func "-[BDPViewController downscaleImageNeon:]"
"-[BDPViewController downscaleImageNeon:]":
    .cfi_startproc
Lfunc_begin4:
    .loc    1 86 0                  @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:86:0
@ BB#0:
    .loc    1 86 1 prologue_end     @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:86:1
    push    {r4, r5, r6, r7, lr}
    add r7, sp, #12
    push.w  {r8, r10, r11}
    sub sp, #20
    @DEBUG_VALUE: -[BDPViewController downscaleImageNeon:]:self <- R0+0
    @DEBUG_VALUE: -[BDPViewController downscaleImageNeon:]:_cmd <- R1+0
    @DEBUG_VALUE: -[BDPViewController downscaleImageNeon:]:image <- R2+0
    .loc    1 88 20                 @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:88:20
Ltmp41:
    movw    r0, :lower16:(L_OBJC_SELECTOR_REFERENCES_2-(LPC4_0+4))
Ltmp42:
    mov r6, r2
Ltmp43:
    @DEBUG_VALUE: -[BDPViewController downscaleImageNeon:]:image <- R6+0
    movt    r0, :upper16:(L_OBJC_SELECTOR_REFERENCES_2-(LPC4_0+4))
LPC4_0:
    add r0, pc
    ldr.w   r11, [r0]
    mov r0, r6
    blx _objc_retain
    mov r4, r0
    mov r0, r6
    mov r1, r11
Ltmp44:
    blx _objc_msgSend
    blx _CGImageGetWidth
    mov r5, r0
Ltmp45:
    @DEBUG_VALUE: width <- R5+0
    .loc    1 89 21                 @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:89:21
    mov r0, r6
    mov r1, r11
    str r5, [sp, #16]           @ 4-byte Spill
    blx _objc_msgSend
    blx _CGImageGetHeight
    mov r10, r0
Ltmp46:
    @DEBUG_VALUE: height <- R10+0
    .loc    1 90 26                 @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:90:26
    mov r0, r6
    mov r1, r11
    blx _objc_msgSend
    blx _CGImageGetBytesPerRow
    str r0, [sp, #12]           @ 4-byte Spill
Ltmp47:
    @DEBUG_VALUE: bytesPerRow <- [sp+#12]+#0
    .loc    1 91 35                 @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:91:35
    mov r0, r6
    mov r1, r11
    blx _objc_msgSend
    blx _CGImageGetAlphaInfo
    str r0, [sp, #4]            @ 4-byte Spill
Ltmp48:
    @DEBUG_VALUE: imageAlpha <- [sp+#4]+#0
    .loc    1 94 45                 @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:94:45
    mov r0, r6
    mov r1, r11
    blx _objc_msgSend
    mov r6, r0
Ltmp49:
    mov r0, r4
    blx _objc_release
    mov r0, r6
    .loc    1 98 29                 @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:98:29
    mul r8, r10, r5
Ltmp50:
    @DEBUG_VALUE: width <- [sp+#16]+#0
    .loc    1 94 45                 @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:94:45
    blx _CGImageGetDataProvider
    blx _CGDataProviderCopyData
Ltmp51:
    @DEBUG_VALUE: data <- R0+0
    str r0, [sp, #8]            @ 4-byte Spill
Ltmp52:
    @DEBUG_VALUE: data <- [sp+#8]+#0
    .loc    1 95 29                 @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:95:29
    blx _CFDataGetBytePtr
    mov r4, r0
Ltmp53:
    @DEBUG_VALUE: buffer <- R4+0
    .loc    1 98 29                 @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:98:29
    lsr.w   r0, r8, #2
    movs    r1, #4
    blx _calloc
    mov r5, r0
Ltmp54:
    @DEBUG_VALUE: outputBuffer <- R5+0
    mov r0, r10
Ltmp55:
    @DEBUG_VALUE: height <- R0+0
    .loc    1 101 29                @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:101:29
    cmp r0, #0
Ltmp56:
    @DEBUG_VALUE: rowIndex <- 0+0
    beq LBB4_3
@ BB#1:                                 @ %.lr.ph
Ltmp57:
    @DEBUG_VALUE: -[BDPViewController downscaleImageNeon:]:self <- R0+0
    @DEBUG_VALUE: -[BDPViewController downscaleImageNeon:]:_cmd <- R1+0
    @DEBUG_VALUE: width <- [sp+#16]+#0
    @DEBUG_VALUE: height <- R0+0
    @DEBUG_VALUE: bytesPerRow <- [sp+#12]+#0
    @DEBUG_VALUE: imageAlpha <- [sp+#4]+#0
    @DEBUG_VALUE: data <- [sp+#8]+#0
    @DEBUG_VALUE: buffer <- R4+0
    @DEBUG_VALUE: outputBuffer <- R5+0
    @DEBUG_VALUE: rowIndex <- 0+0
    ldr r1, [sp, #12]           @ 4-byte Reload
Ltmp58:
    @DEBUG_VALUE: bytesPerRow <- R1+0
    mov.w   r8, #0
    lsl.w   r11, r1, #1
    .loc    1 104 74                @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:104:74
Ltmp59:
    lsr.w   r10, r1, #1
Ltmp60:
    @DEBUG_VALUE: bytesPerRow <- [sp+#12]+#0
LBB4_2:                                 @ =>This Inner Loop Header: Depth=1
    @DEBUG_VALUE: -[BDPViewController downscaleImageNeon:]:self <- R0+0
    @DEBUG_VALUE: -[BDPViewController downscaleImageNeon:]:_cmd <- R1+0
    @DEBUG_VALUE: width <- [sp+#16]+#0
    @DEBUG_VALUE: height <- R0+0
    @DEBUG_VALUE: bytesPerRow <- [sp+#12]+#0
    @DEBUG_VALUE: imageAlpha <- [sp+#4]+#0
    @DEBUG_VALUE: data <- [sp+#8]+#0
    @DEBUG_VALUE: outputBuffer <- R5+0
    @DEBUG_VALUE: rowIndex <- 0+0
    lsr.w   r1, r8, #1
Ltmp61:
    mov r6, r0
Ltmp62:
    @DEBUG_VALUE: height <- R6+0
    mla r0, r1, r10, r5
Ltmp63:
    @DEBUG_VALUE: destRow <- R1+0
    .loc    1 105 9                 @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:105:9
    ldr r2, [sp, #16]           @ 4-byte Reload
    mov r1, r4
Ltmp64:
    bl  _resizeRow
    mov r0, r6
Ltmp65:
    @DEBUG_VALUE: height <- R0+0
    .loc    1 101 50                @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:101:50
    add.w   r8, r8, #2
Ltmp66:
    @DEBUG_VALUE: rowIndex <- R8+0
    .loc    1 101 29                @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:101:29
    add r4, r11
    cmp r8, r0
    blo LBB4_2
Ltmp67:
LBB4_3:                                 @ %._crit_edge
    @DEBUG_VALUE: -[BDPViewController downscaleImageNeon:]:self <- R0+0
    @DEBUG_VALUE: -[BDPViewController downscaleImageNeon:]:_cmd <- R1+0
    @DEBUG_VALUE: width <- [sp+#16]+#0
    @DEBUG_VALUE: height <- R0+0
    @DEBUG_VALUE: bytesPerRow <- [sp+#12]+#0
    @DEBUG_VALUE: imageAlpha <- [sp+#4]+#0
    @DEBUG_VALUE: data <- [sp+#8]+#0
    @DEBUG_VALUE: outputBuffer <- R5+0
    .loc    1 109 28                @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:109:28
    ldr r1, [sp, #4]            @ 4-byte Reload
Ltmp68:
    lsrs    r2, r0, #1
    str r1, [sp]
    mov r6, r5
Ltmp69:
    @DEBUG_VALUE: outputBuffer <- R6+0
    ldr r1, [sp, #16]           @ 4-byte Reload
    ldr r0, [sp, #12]           @ 4-byte Reload
Ltmp70:
    lsrs    r1, r1, #1
    lsrs    r3, r0, #1
    mov r0, r5
    bl  _createBitmapContext
    mov r4, r0
Ltmp71:
    @DEBUG_VALUE: context <- R4+0
    .loc    1 110 30                @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:110:30
    blx _CGBitmapContextCreateImage
    .loc    1 111 66                @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:111:66
    movw    r1, :lower16:(L_OBJC_SELECTOR_REFERENCES_4-(LPC4_1+4))
    .loc    1 110 30                @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:110:30
    mov r5, r0
Ltmp72:
    @DEBUG_VALUE: scaledImage <- R5+0
    .loc    1 111 66                @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:111:66
    movt    r1, :upper16:(L_OBJC_SELECTOR_REFERENCES_4-(LPC4_1+4))
    movw    r0, :lower16:(L_OBJC_CLASSLIST_REFERENCES_$_-(LPC4_2+4))
    movt    r0, :upper16:(L_OBJC_CLASSLIST_REFERENCES_$_-(LPC4_2+4))
LPC4_1:
    add r1, pc
LPC4_2:
    add r0, pc
    mov r2, r5
    ldr r1, [r1]
    ldr r0, [r0]
    blx _objc_msgSend
Ltmp73:
    @DEBUG_VALUE: returnImage <- R0+0
    @ InlineAsm Start
    mov r7, r7      @ marker for objc_retainAutoreleaseReturnValue
    @ InlineAsm End
    blx _objc_retainAutoreleasedReturnValue
Ltmp74:
    mov r8, r0
    .loc    1 112 5                 @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:112:5
    mov r0, r5
    blx _CGImageRelease
    .loc    1 113 5                 @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:113:5
    mov r0, r4
    blx _CGContextRelease
    .loc    1 114 5                 @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:114:5
    ldr r0, [sp, #8]            @ 4-byte Reload
    blx _CFRelease
    .loc    1 115 5                 @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:115:5
    mov r0, r6
    blx _free
Ltmp75:
    .loc    1 118 1                 @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:118:1
    mov r0, r8
    add sp, #20
    pop.w   {r8, r10, r11}
    pop.w   {r4, r5, r6, r7, lr}
Ltmp76:
    b.w _objc_autoreleaseReturnValue
Ltmp77:
Lfunc_end4:
    .cfi_endproc

    .align  2
    .code   16                      @ @resizeRow
    .thumb_func _resizeRow
_resizeRow:
    .cfi_startproc
Lfunc_begin5:
    .loc    1 26 0                  @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:26:0
@ BB#0:
    @DEBUG_VALUE: resizeRow:dst <- R0+0
    @DEBUG_VALUE: resizeRow:src <- R1+0
    @DEBUG_VALUE: resizeRow:pixelsPerRow <- R2+0
    .loc    1 27 47 prologue_end    @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:27:47
    add.w   r3, r1, r2, lsl #2
Ltmp78:
    @DEBUG_VALUE: rowB <- R3+0
    .loc    1 30 5                  @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:30:5
    bic r2, r2, #7
Ltmp79:
    .loc    1 32 5                  @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:32:5
    @ InlineAsm Start
    Lresizeloop:                      
vld1.32       {d0-d3}, [r1]!      
vld1.32       {d4-d7}, [r3]!      
vhadd.u8      q0, q0, q2          
vhadd.u8      q1, q1, q3          
vtrn.32       q0, q2              
vtrn.32       q1, q3              
vhadd.u8      q0, q0, q2          
vhadd.u8      q1, q1, q3          
vtrn.32       d0, d1              
vtrn.32       d2, d3              
vswp          d1, d2              
vst1.64       {d0-d1}, [r0]!      
subs          r2, r2, #8          
bne           Lresizeloop         

    @ InlineAsm End
Ltmp80:
    .loc    1 51 1                  @ NEON-Image-Downscaling/ImageResize/BDPViewController.m:51:1
    bx  lr
Ltmp81:
Lfunc_end5:
    .cfi_endproc 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-30T21:11:00.810

这是我从您的 Xcode 项目中获得的汇编代码片段`-O2`。（构建 with`-O1`不会费心内联函数，所以我并不惊讶它可以正常工作。）

```
Ltmp55:
    @DEBUG_VALUE: rowIndex <- R3+0
    .loc    1 101 29                @ /tmp/NEON-Image-Downscaling/ImageResize/BDPViewController.m:101:29
    add r8, r12
    cmp r3, r11
    .loc    1 32 5                  @ /tmp/NEON-Image-Downscaling/ImageResize/BDPViewController.m:32:5
Ltmp56:
    @ InlineAsm Start
    Lresizeloop:                      
vld1.32       {d0-d3}, [r4]!      
vld1.32       {d4-d7}, [r5]!      
vhadd.u8      q0, q0, q2          
vhadd.u8      q1, q1, q3          
vtrn.32       q0, q2              
vtrn.32       q1, q3              
vhadd.u8      q0, q0, q2          
vhadd.u8      q1, q1, q3          
vtrn.32       d0, d1              
vtrn.32       d2, d3              
vswp          d1, d2              
vst1.64       {d0-d1}, [r6]!      
subs          r2, r2, #8          
bne           Lresizeloop         

    @ InlineAsm End
Ltmp57:
    blo LBB2_2 
```

看到`blo`最后一行的 (branch-if-lower) 指令了吗？`cmp r3, r11`它使用装配块顶部设置的条件代码。但是当然，那时您的内联汇编代码已经完全破坏了条件代码寄存器。那么这是编译器错误吗？...*不！*您只是忘记*告诉*编译器您的内联汇编代码会破坏条件代码。代替

```
 : "=r"(dst), "=r"(src), "=r"(rowB), "=r"(pixelsPerRow)
                 : "0"(dst), "1"(src), "2"(rowB), "3"(pixelsPerRow)
                 : "q0", "q1", "q2", "q3"
                 ); 
```

和

```
 : "=r"(dst), "=r"(src), "=r"(rowB), "=r"(pixelsPerRow)
                 : "0"(dst), "1"(src), "2"(rowB), "3"(pixelsPerRow)
                 : "q0", "q1", "q2", "q3", "cc"
                 ); 
```

并且程序集输出会自行修复。我还没有运行该应用程序，但我敢打赌你会发现它现在好多了。:)

# bash - FFmpeg 通过文件输入计算出 mp3 持续时间，但使用管道失败？

> ID：11986414
> 
> 赞同：1
> 
> 时间：2012-08-16T11:46:15.970
> 
> 标签：bash, shell, ffmpeg, pipe

我正在尝试使用 ffmpeg 从 mp3 获取 PCM 数据，但这些文件存储在数据库 gridfs 中，因此我尝试使用管道为 ffmpeg 提供一些成功的数据，但是如果馈送，ffmpeg 会处理一个文件文件名作为输入，并且在将文件作为管道给出时不正确:(知道为什么吗？

```
ffmpeg -i - -f s16le -acodec pcm_s16le output.raw < testMp3s/test-corrupt.mp3 
```

给

```
ffmpeg version 0.11.1 Copyright (c) 2000-2012 the FFmpeg developers
built on Jun  9 2012 13:50:13 with gcc 4.7.0 20120505 (prerelease)
configuration: --prefix=/usr --enable-libmp3lame --enable-libvorbis --enable-libxvid --        enable-libx264 --enable-libvpx --enable-libtheora --enable-libgsm --enable-libspeex -- enable-postproc --enable-shared --enable-x11grab --enable-libopencore_amrnb --enable-libopencore_amrwb --enable-libschroedinger --enable-libopenjpeg --enable-librtmp --enable-libpulse --enable-libv4l2 --enable-gpl --enable-version3 --enable-runtime-cpudetect --  disable-debug --disable-static
libavutil      51\. 54.100 / 51\. 54.100
libavcodec     54\. 23.100 / 54\. 23.100
libavformat    54\.  6.100 / 54\.  6.100
libavdevice    54\.  0.100 / 54\.  0.100
libavfilter     2\. 77.100 /  2\. 77.100
libswscale      2\.  1.100 /  2\.  1.100
libswresample   0\. 15.100 /  0\. 15.100
libpostproc    52\.  0.100 / 52\.  0.100
[mp3 @ 0x16d7100] Unknown attached picture mimetype: JPG, skipping.
[mp3 @ 0x16d7100] max_analyze_duration 5000000 reached at 5015510
[mp3 @ 0x16d7100] Estimating duration from bitrate, this may be inaccurate
Input #0, mp3, from 'pipe:':
Metadata:
album           : FreshNewMusik.Com
encoded_by      : iTunes 10.6.3
title           : No Lie (Freestyle)
artist          : Lil Wayne
album_artist    : Lil Wayne
genre           : Hip-Hop/Rap
TT3             : twitter.com/jakejarvis
date            : 2012
Duration: N/A, start: 0.000000, bitrate: 320 kb/s
Stream #0:0: Audio: mp3, 44100 Hz, stereo, s16, 320 kb/s 
```

然而

```
ffmpeg -i testMp3s/test-corrupt.mp3 -f s16le -acodec pcm_s16le output.raw 
```

给

```
ffmpeg version 0.11.1 Copyright (c) 2000-2012 the FFmpeg developers
built on Jun  9 2012 13:50:13 with gcc 4.7.0 20120505 (prerelease)
configuration: --prefix=/usr --enable-libmp3lame --enable-libvorbis --enable-libxvid --    enable-libx264 --enable-libvpx --enable-libtheora --enable-libgsm --enable-libspeex --enable-postproc --enable-shared --enable-x11grab --enable-libopencore_amrnb --enable-libopencore_amrwb --enable-libschroedinger --enable-libopenjpeg --enable-librtmp --enable-libpulse --enable-libv4l2 --enable-gpl --enable-version3 --enable-runtime-cpudetect --disable-debug --disable-static
libavutil      51\. 54.100 / 51\. 54.100
libavcodec     54\. 23.100 / 54\. 23.100
libavformat    54\.  6.100 / 54\.  6.100
libavdevice    54\.  0.100 / 54\.  0.100
libavfilter     2\. 77.100 /  2\. 77.100
libswscale      2\.  1.100 /  2\.  1.100
libswresample   0\. 15.100 /  0\. 15.100
libpostproc    52\.  0.100 / 52\.  0.100
[mp3 @ 0xf33100] Unknown attached picture mimetype: JPG, skipping.
[mp3 @ 0xf33100] max_analyze_duration 5000000 reached at 5015510
[mp3 @ 0xf33100] Estimating duration from bitrate, this may be inaccurate
Input #0, mp3, from 'testMp3s/test-corrupt.mp3':
Metadata:
album           : FreshNewMusik.Com
encoded_by      : iTunes 10.6.3
title           : No Lie (Freestyle)
artist          : Lil Wayne
album_artist    : Lil Wayne
genre           : Hip-Hop/Rap
TT3             : twitter.com/jakejarvis
date            : 2012
Duration: 00:02:33.86, start: 0.000000, bitrate: 320 kb/s
Stream #0:0: Audio: mp3, 44100 Hz, stereo, s16, 320 kb/s 
```

如何获得管道的持续时间？（数据在 python 应用程序的内存中可用）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T12:55:07.710

```
[mp3 @ 0xf33100] Estimating duration from bitrate, this may be inaccurate 
```

当给定一个真实文件时，ffmpeg 可以使用 stat 获取文件的大小。持续时间是大小/比特率。但是当它得到 stdio 时，它无法判断需要多少数据。事实上，如果它正在获取流，甚至可能没有明确定义的持续时间。我记得，MP3 可以在文件开头的 id3 标签中提供持续时间，这就是为什么您的某些文件确实显示持续时间的原因。

# sql - 推荐 SQL 文档工具？

> ID：11986415
> 
> 赞同：2
> 
> 时间：2012-08-16T11:46:21.040
> 
> 标签：sql, documentation-generation

谁能推荐我一个 SQL 文档工具，我可以：

1.  记录 SQL Server 数据库；
2.  添加注释以生成表、视图、存储过程、函数及其列、字段和参数的描述。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:54:41.507

在我看来，对于 SQL Server，基本上是两个有效的竞争者：

*   [Red-Gate SQL Doc](http://www.red-gate.com/products/sql-development/sql-doc/)
    查看他们的[在线 AdventureWorks 示例](http://www.red-gate.com/products/sql-development/sql-doc/browse-sql-doc/main)以了解这些文档的外观

*   [ApexSQL ApexSQL 文档](http://www.apexsql.com/sql_tools_doc.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T11:51:25.453

Sybase Power Designer，Oracle SQL 开发者数据建模器（看起来很奇怪，但它可以为 mssql 创建数据模型）

# python - 在python中动态构造appengine模型名称

> ID：11986419
> 
> 赞同：-1
> 
> 时间：2012-08-16T11:46:42.713
> 
> 标签：python, google-app-engine

我有一组模型 Day1, ... ,Day7 。如何使用整数 1-7 来使用正确的模型？

```
class Day1 (db.Model):    #Monday
    courtday = db.ReferenceProperty(CourtDays)
    startTime = db.TimeProperty()
    endTime = db.TimeProperty()
    startTimeLunch = db.TimeProperty()
    endTimeLunch = db.TimeProperty()
    day = "Monday"

class Day2 (db.Model):    #Tuesday
    courtday = db.ReferenceProperty(CourtDays)
    startTime = db.TimeProperty()
    endTime = db.TimeProperty()
    startTimeLunch = db.TimeProperty()
    endTimeLunch = db.TimeProperty()
    day = "Tuesday" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:24:12.977

你一天只需要一个模型，因为它们都是一样的。

```
class Day (db.Model):
    courtday = db.ReferenceProperty(CourtDays)
    startTime = db.TimeProperty()
    endTime = db.TimeProperty()
    startTimeLunch = db.TimeProperty()
    endTimeLunch = db.TimeProperty()
    name = db.StringProperty()

days = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"]
for dayname in days:
  newday = Day(name=dayname)
  newday.put() 
```

# ruby-on-rails-3 - RubyOnRails3 - event_calendar

> ID：11986420
> 
> 赞同：0
> 
> 时间：2012-08-16T11:46:46.063
> 
> 标签：ruby-on-rails-3

我使用 event_calendar gem，它可能对我有用，但我面临如何按类型更改事件颜色的问题，我的意思是如何制作例如生日或蓝色旅行等个人活动以及红色会议等工作活动..这可以通过css或代码来完成吗？我希望你能帮助我——谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T20:40:07.700

[http://dev.elevationblog.com/2009/07/23/event-calendar-rails-plugin/](http://dev.elevationblog.com/2009/07/23/event-calendar-rails-plugin/)

在加载了几乎所有评论后，我找到了该问题的答案。

只需覆盖事件模型中的颜色方法。

```
def color
# color logic based on event type
# or maybe associated calendar?, ie
# self.calendar.color
   if self.type = correct_type 
      return "#3399BB" #any html acceptable color  
   end
end 
```

杰夫回答

做你的逻辑然后返回你想要使用的颜色

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T19:50:50.397

根据我在这个网站上找到的信息，我做了一些不同的事情以获得更大的灵活性。

**输出**

```
 <div class="btn-group event_color" data-toggle="buttons-radio">
    <button type="button" class="btn btn-success" value="#00a651">Active</button>
    <button type="button" class="btn btn-warning" value="#ecef0b">Pending</button>
    <button type="button" class="btn btn-danger" value="#ef0b0b">On Hold</button>
    <%=f.hidden_field :color %>
    <%=f.hidden_field :event_status %>
  </div> 
```

**JS**

```
 $(".event_color .btn").click(function() {
   // whenever a button is clicked, set the hidden helper
   $('#event_color').val($(this).val());
   }); 

   $(".event_color .btn").click(function() {
   // whenever a button is clicked, set the hidden helper
   $("#event_event_status").val($(this).text());
   }); 
```

# android - 使用动画设计复杂的 android UI

> ID：11986423
> 
> 赞同：2
> 
> 时间：2012-08-16T11:46:50.743
> 
> 标签：android, gridview, user-interface, tile

我必须为 Android 应用程序设计一个 UI，其中我有 10 个包含图像和文本的垂直图块（图片中的 2 个大框），并且在单击图块时，它会消失并被包含 6 个元素的可滚动网格视图所取代（如图所示在下图的中心）在同一页上。（由动画显示）

这是我试图解释的视图的快照。此图像仅显示 10 个图块中的 2 个，以及单击时出现的 gridview 每个白框都包含图像和文本。我不擅长设计，因此将不胜感激实现这一点的详细答案。谢谢。 ![在此处输入图像描述](../Images/c9a0af57a1f7c17a5c1e2b920f819fc1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T06:33:19.677

您的问题没有太多细节，即使图片也没有说明一切，但这里是一个刺。

不确定当您说瓷砖进一步“扩展”时是什么意思，您是否希望看到中间的六个瓷砖在那个时候出现或者它们总是在那里？如果它们出现，那会是动画吗？

要获得您所拥有的图片，您可能应该`RelativeLayout`在顶层获得 a。那只是因为你`TextView`在右上角有这个日期，`SlidingDrawer`在底部有一个句柄。您可以使用墙纸主题设置该 RelativeLayout 的背景，如果那是静态的，我猜顶部的蓝色条。

然后在这个顶级的 RelativeLayout 里面，你有`LinearLayout`一个水平方向的。这个将包含图片上的三个“窗口”。

在那个水平的LinearLayout中，首先你有另一个垂直方向的LinearLayout，然后是一个ViewPager，然后是另一个类似于第一个的垂直LinearLayout（不确定右侧部分与左侧部分有何不同，或者应该是一个完整的镜像...？）。

总而言之：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    android:id="@+id/top_level"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent">

    <TextView
        android:id="@+id/date_text"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:paddingTop="..." // fill in some space to offset from the top of the screen
        android:paddingRight="..." // same thing to keep it off the right edge
        />
    <LinearLayout
        android:layout_height="..." // set the height of your content in the center of your screen
        android:layout_width="fill_parent"
        android:layout_below="@+id/date_text"
        android:orientation="horizontal" >

        <LinearLayout
            android:layout_height="fill_parent"
            android:layout_width="wrap_content"
            android:orientation="vertical" >

            < add here some of the stuff you have above your tile like that RSS icon and so on />
            <ListView
                android:id="@+id/tile_list"
                android:layout_height="fill_parent"
                android:layout_width="fill_parent"/>
        </LinearLayout>

        <ViewPager
            android:id="@+id/pager"
            android:layout_height="fill_parent"
            android:layout_width="0dp"
            android:layout_weight="1" // so that will fill the remaining space between the left and the right parts
            />

        <LinearLayout
            android:layout_height="fill_parent"
            android:layout_width="wrap_content"
            android:orientation="vertical" >

            < add here some of the stuff you have above your tile like that RSS icon and so on />
            <ListView
                android:id="@+id/tile_list"
                android:layout_height="fill_parent"
                android:layout_width="fill_parent"/>
        </LinearLayout>

    </LinearLayout>

    <SlidingDrawer
        android:id="@+id/drawer"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:handle="@+id/drawer_handle"
        android:content="@+id/drawer_contents">

        <ImageView
            android:id="@+id/drawer_handle"
            android:src="@drawable/image for the tab..."
            android:layout_width="fill_parent"
            android:layout_height="wrap_content">
        </ImageView>

        <Another Layout for the content of the drawer
            android:id="@+id/drawer_contents"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
        >
            ....
        </Close that layout>

    </SlidingDrawer>

</RelativeLayout> 
```

从那里开始，还有很多东西要填充，还有一些代码要编写来填充图块列表（左侧和右侧），处理用户单击项目时的处理，然后还显示 ViewPager 的内容在屏幕中间。您可能希望在那里的每个页面中使用 GridLayout。

如果您需要在用户单击某个图块之前隐藏该 ViewPager，您可以将可见性设置为隐藏并在代码中进行更改。

**更新** 现在有更多关于如何移动的信息......

好的，所以保持顶层的 RelativeLayout 与日期和底部的 SlidingDrawer。

中间部分可以使用这个人整理的Horizo​​ntalListView：[How can I make a Horizo​​ntal ListView in Android?](https://stackoverflow.com/questions/3877040/how-can-i-make-a-horizontal-listview-in-android) ，代码和说明和示例可以在这里找到：http: [//www.dev-smart.com/archives/34](http://www.dev-smart.com/archives/34)

然后您需要创建自己的适配器来填充该列表。您可以将其基于 BaseAdapter（该决定更多地取决于您的图像/信息的存储方式）。

在该 Adapter 的 getView 函数中，可以有一个布局，其中折叠视图和展开视图合并为一个 FrameLayout，但一次只能看到一个。它看起来像这样：

```
<FrameLayout
    android:layout_width="wrap_content"
    android:layout_height="fill_parent" // assuming the HorizontalListView is set with the right height
    >

    <LinearLayout
        android:id="@+id/collapsed_view"
        android:layout_height="fill_parent"
        android:layout_width="wrap_content"
        android:orientation="vertical" >

        < add here some of the stuff you have above your tile like that RSS icon and so on />
     </LinearLayout>

    <ViewPager
        android:id="@+id/expanded_view"
        android:layout_height="fill_parent"
        android:layout_width="0dp"
        android:layout_weight="1" // so that will fill the remaining space between the left and the right parts
        android:visibility="gone"
        />

</FrameLayout> 
```

在列表适配器中，您需要为不同的视图设置适当的标签，这样当用户点击一张图片时，您就知道点击了哪一张。要展开一个视图，请将 LinearLayout 的可见性更改为已消失，并将 ViewPager 的可见性更改为可见。

如果一次只能展开一个，您可以在适配器中有一个状态变量来说明它是哪一个，并为列表中的所有视图正确设置可见性属性。然后你在 ListView 上调用 invalidate 来刷新它。

有相当多的代码要编写来完成所有这些，但如果你保持它的组织，它应该不会太糟糕......

# matlab - 带有normcdf的Matlab符号函数

> ID：11986428
> 
> 赞同：0
> 
> 时间：2012-08-16T11:47:11.807
> 
> 标签：matlab

我有以下函数，我想使用 matlab 找到它的极值。

![在此处输入图像描述](../Images/c1d9bfe3e4d506c97f171e122506ee1e.png)

该函数必须使用 matlab 中的“normcdf”函数才能获得结果，但是当我尝试创建符号函数时，我得到了一些错误。

我给出的输入如下：

```
syms z fz t sz
fv = 1000 * ((z * fz * normcd(t,fz,sz)) / (20 * 50 * normcd(t,50,20))) + 1000 * normcdf((20 * 50 * normcd(t,50,20) + z * fz * normcd(t,fz,sz)) / 2000, 50 * normcd(t,50,20), 20) - 10 * z 
```

我得到的错误如下：

```
??? Error using ==> sym.le at 11
Function 'le' is not implemented for MuPAD symbolic objects.

Error in ==> normcdf at 57
sigma(sigma <= 0) = NaN; 
```

有谁知道我怎么能解决这个问题？提前致谢。

我忘了提到我使用的是matlab版本R2009a。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:01:49.117

它似乎对我有用：

```
>> syms z fz t sz
>> fv = 1000 * ((z * fz * normcdf(t,fz,sz)) / (20 * 50 * normcdf(t,50,20))) + 1000 * normcdf((20 * 50 * normcdf(t,50,20) + z * fz * normcdf(t,fz,sz)) / 2000, 50 * normcdf(t,50,20), 20) - 10 * z

>> subs(fv,{fz,sz,t,z},{1,2,3,4});

ans =

 809.2922 
```

看看[潜艇](http://www.mathworks.com/help/toolbox/symbolic/subs.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T10:16:45.693

我找到了解决方法。而不是使用`normcdf`一个可以使用它的等效方程`erf`，然后可以正常工作。

```
normcdf(x,mu,sig) = (1+erf((x-mu)/sig/sqrt(2)))/2 
```

# c# - BusyIndi cator 到数据网格

> ID：11986431
> 
> 赞同：-2
> 
> 时间：2012-08-16T11:47:25.767
> 
> 标签：c#, wpf, xaml

单击按钮时，我将数据加载到我的数据网格

```
MySqlCommand cmd1m = new MySqlCommand("select * from table", conn);
DataTable dt1m = new DataTable();
dt1m.Load(cmd1m.ExecuteReader());
System.Windows.Forms.BindingSource source = new System.Windows.Forms.BindingSource();
source.DataSource = dt1m;
dataGrid1.ItemsSource = source; 
```

命名空间：

```
xmlns:wpf="http://schemas.microsoft.com/winfx/2006/xaml/presentation/toolkit/extended" 
```

和 xml：

```
<wpf:BusyIndicator Name="loading" IsBusy="False">
<DataGrid>...</DataGrid>
</<wpf:BusyIndicator> 
```

但指标不工作，为什么？我应该怎么做才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:05:36.837

您应该在执行操作时切换“IsBusy”属性。

```
 loading.IsBusy = true;
    // ... perform actions ...
    loading.IsBusy = false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T11:55:53.667

对于我的 WPF 应用程序，我创建了自己的等待光标类

```
public class WaitCursor: IDisposable
{
    private Cursor _previousCursor;

    public WaitCursor()
    {
        _previousCursor = Mouse.OverrideCursor;
        Mouse.OverrideCursor = Cursors.Wait;
    }

    public void Dispose()
    {
        Mouse.OverrideCursor = _previousCursor;
    }
} 
```

并这样称呼它

```
// Some code for which you do not want wait cursor
// ...

using(new WaitCursor())
{
    dataGrid1.ItemsSource = source;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T11:58:16.870

在 BusyIndi​​cator 中设置**IsBusy="True"**将使其显示指标。

在您的情况下，将**布尔**属性绑定到 IsBusy 并在加载数据时使其为 True。加载完成后将其设置为 False。

# java - 自定义文件系统提供程序的目的是什么？

> ID：11986432
> 
> 赞同：2
> 
> 时间：2012-08-16T11:47:27.517
> 
> 标签：java, java-7

我正在寻找自定义文件系统提供程序的示例，请提供我可以通过的示例或链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T11:56:20.553

在 UNIX 等操作系统中，您可以在文件系统中挂载各种设备。有虚拟文件系统，如`/proc`、`/dev`、网络文件系统、由 SSH ( `sshfs`) 支持的文件系统等。这为用户提供了熟悉且同质的信息访问方式。

现在将其应用于 Java。您可以编写文件系统提供程序来访问任何数据/信息/系统。熟悉文件 API 的用户可以使用已知且易于使用的 API*连接到各种文件/系统/设备。*更不用说现在可以使用单个 URI 来定位各种不同设备上的资源。

例如检查[Zip File System Provider](http://docs.oracle.com/javase/7/docs/technotes/guides/io/fsp/zipfilesystemprovider.html)。

# .net - 对象引用未设置为用于在 vb.net 中加载用户控件的对象实例

> ID：11986433
> 
> 赞同：0
> 
> 时间：2012-08-16T11:47:28.187
> 
> 标签：.net, vb.net

我的代码是

```
Public Function resload()
    Dim conn As MySqlConnection = New MySqlConnection(ConfigurationManager.ConnectionStrings("connectionrms").ConnectionString) ''line 18
    Dim comm As MySqlCommand = New MySqlCommand()
    Dim dr As MySqlDataReader
    conn.Open()
    comm = New MySqlCommand("Select distinct name from restaurant", conn)
    dr = comm.ExecuteReader()
    While dr.Read() <> Nothing
        headresnamecombo.Items.Add(dr(0).ToString())
    End While
    dr.Close()
    headresnamecombo.SelectedIndex = 0
    conn.Close()
    Return Nothing
End Function 
```

我的错误

> > 在 C:\Users\Azinova7\Documents\Visual Studio 2008\Projects\Rest\Rest\billingBody.vb:line 18 中的 Rest.billingBody.resload()
> > 
> > 在 C:\Users\Azinova7\Documents\Visual Studio 2008\Projects\Rest\Rest\billingBody.vb:line 229 中的 Rest.billingBody.billingBody_Load(Object sender, EventArgs e)
> > 
> > 在 System.Windows.Forms.UserControl.OnLoad（EventArgs e）
> > 
> > 在 System.Windows.Forms.UserControl.OnCreateControl()
> > 
> > 在 System.Windows.Forms.Control.CreateControl（布尔 fIgnoreVisible）
> > 
> > 在 System.Windows.Forms.Control.CreateControl()
> > 
> > 在 System.Windows.Forms.Control.ControlCollection.Add（控制值）
> > 
> > 在 System.Windows.Forms.Form.ControlCollection.Add（控制值）
> > 
> > 在 System.Windows.Forms.Design.ControlDesigner.DesignerControlCollection.Add（控制 c）

之后都是相同的连接代码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T11:56:39.883

我强烈怀疑这是问题所在：

```
ConfigurationManager.ConnectionStrings("connectionrms").ConnectionString 
```

我怀疑您的配置中没有名为“connectionrms”的连接字符串。

如果未找到给定的连接字符串，[`ConnectionStringSettingsCollection`索引器](http://msdn.microsoft.com/en-us/library/c6t3b6f3.aspx)将返回。`Nothing`

不过，这只是您的代码的一个问题。此外，您应该使用`Using`连接和阅读器的语句，并且您的`While`循环条件应该只是`While dr.Read()`. 哦，我会在第一次使用时声明变量，而不是在顶部声明所有内容。

# vb.net - vb.net 中的“字符串类型的值不能转换为 system.data.datatable”

> ID：11986434
> 
> 赞同：0
> 
> 时间：2012-08-16T11:47:31.057
> 
> 标签：vb.net

这是我的代码。我一直有一个错误“字符串类型的值无法转换为 system.data.datatable”

```
Function GetTable() As DataTable
        Dim SQLConnection As New SqlConnection(ConfigurationManager.ConnectionStrings("Zeinchatconnection").ToString())
        Dim CommSQL As New SqlClient.SqlCommand
        Dim ChatDataAdapter As SqlDataAdapter
        Dim paramSQL As SqlClient.SqlParameter
        Dim DStable As DataSet
        Dim table As New DataTable
        Dim szName As String = ""
        Dim szNumber As String = ""
        Try
            If SQLConnection.State = ConnectionState.Closed Then
                SQLConnection.Open()
            End If
            CommSQL.Connection = SQLConnection
            CommSQL.CommandType = CommandType.StoredProcedure
            CommSQL.CommandText = "spc_newselect"

        CommSQL.ExecuteNonQuery()

        ChatDataAdapter = New SqlDataAdapter(CommSQL)
        ChatDataAdapter.Fill(DSTable)

        table.Rows.Clear()
        table.Clear()
        table = DStable.Tables(0)

        Dim i As Integer = 0

        For i = 0 To table.Rows.Count - 1
            szName = szName & "  " & table.Rows(i).Item(0) & table.Rows(i).Item(1)
            szNumber = szNumber & "  " & table.Rows(i).Item(0) & table.Rows(i).Item(1)
        Next

        GetTable = "1"
    Catch ex As System.Data.SqlClient.SqlException
        GetTable = "0"
    Catch ex As Exception
        GetTable = "0"

        If (IsNothing(ChatDataAdapter) = False) Then ChatDataAdapter.Dispose()
        If (IsNothing(CommSQL) = False) Then CommSQL.Dispose()
        SQLConnection.Close()
    End Try
    Return table

End Function 
```

错误所在的部分是 gettable="1" 及以下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:56:15.727

`GetTable = "1"`表示要设置函数的 returnValue。由于您的函数被定义为`Function GetTable() As DataTable`您的编译器显示错误！

下面几行有一个正确的 return stmt( `Return table`) 所以我不太确定你的目标是`GetTable = "1"`什么？

我假设您希望有一个额外的 returnValue 来指示您的函数调用是否成功。但事实上，函数可能只有一个 returnValue。

您可以选择将 table var 设置为空，或使用 ref 参数 ...

```
' possible solution 1 - using nothing value
Function GetTable() As DataTable
    Try
        ' your code goes here
        ' remove GetTable = "1" 
    Catch ex as Exception
        ' change GetTable = "0" to 
        table = nothing
    End Try
    ' other code ...
End Function

' possible solution 2 - ref param
Function GetTable(ByRef status as integer) as DataTable
   Try
        ' your code goes here
        ' remove GetTable = "1" 
        status = 1
    Catch ex as Exception
        ' change GetTable = "0" to 
        status = 0
    End Try
    ' other code ...
End Function 
```

在解决方案 2 中，您还可以选择一个**布尔参数**来指示您的呼叫是否成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T11:55:43.843

您的函数`GetTable`返回一个`DataTable`

您无法转换`"1"`为 a`DataTable`正如消息所暗示的那样，这就是在线上正在发生的事情`GetTable = "1"`

如果要返回一个`DataTable`并设置一个标志来查看状态；更改您的函数定义，如下所示：

```
Function GetTable(byref result as Integer) As DataTable 
```

然后，而不是将其`GetTable = "1"`更改为`result = 1`. 这样您就可以检查结果值并返回一个 DataTable：

```
Dim res as Integer
Dim dt as DataTable = GetTable(res)
If res = 1 then
    'It worked!
End If 
```

旁注：**打开 Option Strict**

# python - 比萨是否完全暴露了加密？

> ID：11986436
> 
> 赞同：0
> 
> 时间：2012-08-16T11:47:35.020
> 
> 标签：python, django, pisa

我需要能够允许用户保存和预览 PDF 文件，但 *不能*打印它。reportlab 的说明看起来很简单，但我在比萨的文档中没有看到它。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:20:36.173

以前我使用的是 POD Appy 框架。处理起来非常容易和干净。您可以查看文档[http://appyframework.org/pod.html](http://appyframework.org/pod.html)

# java - 使用 Java 从 XML 中删除 XML 节点

> ID：11986440
> 
> 赞同：-3
> 
> 时间：2012-08-16T11:47:52.710
> 
> 标签：java, xml, parsing, nodes

我有一个 XML 文档

```
<ns1:Product>
<ns1:ProductDetails>
    <ns1:StationID>1</ns1:StationID>
    <ns1:ProductGroup>1</ns1:ProductGroup>
    <ns1:AccountCode>1</ns1:AccountCode>
    <ns1:Amount>1345</ns1:Amount>
    </ns1:ProductDetails>
<ns1:ProductDetails>
    <ns1:StationID>1</ns1:StationID>
    <ns1:ProductGroup>1</ns1:ProductGroup>
    <ns1:AccountCode>2</ns1:AccountCode>
    <ns1:Amount>35471</ns1:Amount>
    </ns1:ProductDetails>
<ns1:ProductDetails>
    <ns1:StationID>1</ns1:StationID>
    <ns1:ProductGroup>1</ns1:ProductGroup>
    <ns1:AccountCode>3</ns1:AccountCode>
    <ns1:Amount>31897</ns1:Amount>
    </ns1:ProductDetails>
<ns1:ProductDetails>
    <ns1:StationID>1</ns1:StationID>
    <ns1:ProductGroup>1</ns1:ProductGroup>
    <ns1:AccountCode>4</ns1:AccountCode>
    <ns1:Amount>143647</ns1:Amount>
    </ns1:ProductDetails>
<ns1:ProductDetails>
    <ns1:StationID>1</ns1:StationID>
    <ns1:ProductGroup>1</ns1:ProductGroup>
    <ns1:AccountCode>5</ns1:AccountCode>
    <ns1:Amount>34531</ns1:Amount>
</ns1:ProductDetails> 
```

我能够将使用 Java 的记录总数计算为 5。我几乎没有要求在进一步处理之前必须删除一些记录。例如，我必须从 XML 中删除第 3 和第 5 个 ProductDetails

根据记录位置详细信息我必须删除 2 记录

最终输出

```
<ns1:Product>
<ns1:ProductDetails>
    <ns1:StationID>1</ns1:StationID>
    <ns1:ProductGroup>1</ns1:ProductGroup>
    <ns1:AccountCode>1</ns1:AccountCode>
    <ns1:Amount>1345</ns1:Amount>
</ns1:ProductDetails>
<ns1:ProductDetails>
    <ns1:StationID>1</ns1:StationID>
    <ns1:ProductGroup>1</ns1:ProductGroup>
    <ns1:AccountCode>2</ns1:AccountCode>
    <ns1:Amount>35471</ns1:Amount>
</ns1:ProductDetails>
<ns1:ProductDetails>
    <ns1:StationID>1</ns1:StationID>
    <ns1:ProductGroup>1</ns1:ProductGroup>
    <ns1:AccountCode>4</ns1:AccountCode>
    <ns1:Amount>143647</ns1:Amount>
    </ns1:ProductDetails>
 </ns1:Product> 
```

有人可以帮助在 Java 代码中激活它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:00:15.880

使用标准库。很抱歉，您必须阅读[Java 教程](http://docs.oracle.com/javase/tutorial/jaxp/dom/readingXML.html)：

> “要删除节点，请使用其父节点的 removeChild 方法。”

# javascript - 由 JQuery 动态添加后从 URL 获取变量值

> ID：11986445
> 
> 赞同：1
> 
> 时间：2012-08-16T11:48:20.403
> 
> 标签：javascript, jquery

我在下面使用此代码

```
var delLink = $('#deleteItem').attr('href'); 
```

获取由`(href)`标识的链接的 URL `#deleteItem`。

当我使用 JQuery 将新变量添加到此 URL 时会出现问题，并且我想查看上面代码也显示的新动态添加的变量。

如何做到这一点，现在它只显示原始 URL 而没有任何新变量。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:00:02.423

delLink 包含查询的结果。它不是对 href 的引用。

```
// Assigns the value of href to delLink
var delLink = $('#deleteItem').attr('href');

// Changes the href value on the DOM element
$('#deleteItem').attr('href',delLink+','+allVals); 
```

delLink 不知道更新，要更新 delLink 你需要再次执行：

```
delLink = $('#deleteItem').attr('href'); 
```

你可以让它更容易一点的是缓存 jQuery 对象引用到 DOM 中的锚元素，并简单地继续从中访问 href 属性：

```
// Create a jQuery object reference to the anchor element in the DOM
var $delLink = $('#deleteItem');

// Changes the href value in on DOM element
var currentHref = $delLink.attr('href');
$('#deleteItem').attr('href', currentHref + ',' + allVals); 

// Results are available through your reference
$delLink.attr('href'); 
```

# jquery - 将 div 复制到文本文件

> ID：11986449
> 
> 赞同：0
> 
> 时间：2012-08-16T11:48:42.440
> 
> 标签：jquery, file, html, clone

在这里需要一些关于 jquery 的帮助。我有一个要复制到文本文件的 div。这个 div 有一个类，在这个 div 内部，还有一些其他 div 和一些其他元素，但没有一个与主 div 具有相同的 .class。我不确定我是否能够使用 .clone() 所以我需要的是这样的：

```
$('.myClass').misteriousCopyFunction('toTextFile');
//as i said, i'm not sure about this. 
```

我的html看起来像这样

```
...
<div class="myClass">
  *lots of stuff*
  *lots of stuff*
  *lots of stuff*
</div>
... 
```

它只是一小段 Html 代码，用于输出到当前文件夹中的新文件。对不起，如果我说了什么愚蠢的话 =P

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:58:50.453

我相信您可以使用目前仅在 Chrome 中可用的一些[新 HTML 功能来做到这一点。](http://updates.html5rocks.com/2011/08/Downloading-resources-in-HTML5-a-download)基本上，您使用 FileSystem APi 保存 DIV 的内容，然后创建一个具有`download`指向该文件的属性的链接。

# ubuntu - 为 WAN 打开的端口不起作用（出了什么问题）？

> ID：11986453
> 
> 赞同：-1
> 
> 时间：2012-08-16T11:48:55.923
> 
> 标签：ubuntu, port, openerp

我需要在外部 IP 上打开端口 8069。从路由器点开始，设置了内部 IP 和端口 8069（转发到该本地 IP）。所以应该可以从external-ip:8069连接到internal-ip:8069？但由于某种原因，它不起作用。

在本地，我可以使用 internal-ip:8069 连接到 openerp 服务器（通过浏览器或 gtk 客户端）。我错过了什么吗？因为在局域网之外，无法连接到该端口（虽然可以连接到其他端口（但在不同的内部 IP 上）。

/etc/网络/接口：

```
auto eth0
iface eth0 inet static
address 192.168.1.170
netmask 255.255.255.0
gateway 192.168.1.115 
```

/etc/deny.hosts：

```
#there is no hosts to be denied 
```

/etc/allow.hosts：

```
sshd: ALL:ALLOW 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T11:24:00.933

在您的 openerp 服务器计算机中无需进行特定设置，您只需配置您的 Internet 路由器以将`8069`您机器的内部端口转发`192.168.1.170`到您选择的路由器的外部端口。

请使用“如何配置端口转发 YOURROUTERBRAND”进行谷歌搜索以找到一些简单的教程。

否则，请转到您的路由器配置页面 ( `http://192.168.1.115`) 并自行尝试。

# android - Android Multiple AnimatorSet 重置

> ID：11986455
> 
> 赞同：2
> 
> 时间：2012-08-16T11:49:04.490
> 
> 标签：android, animation

嗨，我正在使用 AnimatorSet 和 ValueAnimator 将多个动画应用于视图。

当用户触摸视图时，连续的动画将应用于视图。当用户在视图上移动手指时，我这样做是为了产生“缩放效果”。

该视图是一个自定义库。

这是动画的代码：

```
private void createAnim(final View v) {
    animating = true;
    if (D)
        Log.i(TAG, "sarting animation");
    try {
        v.clearAnimation();
        v.getAnimation().reset();
    } catch (Exception e) {

    }

    set = new AnimatorSet();

    set.addListener(new AnimatorListener() {

        @Override
        public void onAnimationStart(Animator animation) {

        }

        @Override
        public void onAnimationRepeat(Animator animation) {

        }

        @Override
        public void onAnimationEnd(Animator animation) {
            if (D)
                Log.i(TAG, "Animation ended");
            animating = false;
        }

        @Override
        public void onAnimationCancel(Animator animation) {
            animating = false;
            if (D)
                Log.i(TAG, "Animation cancelled");

        }
    });     

    set.setDuration(100);

    ValueAnimator v1 = ObjectAnimator.ofFloat(v, "scaleX", mScaleFactor);
    ValueAnimator v2 = ObjectAnimator.ofFloat(v, "scaleY", mScaleFactor);

    animationList.add(v1);
    animationList.add(v2);
    set.playTogether(v1, v2);

set.start()
} 
```

我有一个 onTouchListener 并且在动作移动时我连续调用这个方法来增加或减少 mScaleFactor。

当用户松开手指时，我希望视图回到以前的状态，我的意思是删除所有应用的动画，就好像它们从未应用于视图一样。问题是你可以很容易地为一个动画做到这一点，但对于许多这样的动画，我就是找不到正确的方法。这是我尝试过的：

- 将动画添加到 ArrayList 并在每个动画上执行 animation.reverse()，每个动画都添加 +100 的延迟，因此一个接一个地执行，但最终结果似乎与以前不完全相同动画。

v.clearAnimation(); 只取消最后一个动画 v.getAnimation().reset(); 仅适用于最后/活动动画。有没有一种方法可以让视图恢复到任何动画开始之前的状态？非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T12:57:43.927

`AnimatorSet`仅仅因为没有“reverse”方法，逆转 an 的效果可能会很棘手。在这种情况下，最简单的方法可能只是另一种`AnimatorSet`与原始方法相反的方法。这里的问题是你`AnimatorListener`可能不同步。如果您这样做并且想要保留布尔值，那么您必须将其实现为某种信号量。

```
public static class AnimatorTracker implements AnimatorListener{
    int counter;

    public AnimatorTracker() {
      counter = 0;
    }

    public boolean isAnimating() {
      return counter == 0;
    }

    @Override
    public void onAnimationStart(Animator animation) {
      counter++;
    }

    @Override
    public void onAnimationRepeat(Animator animation) {
    }

    @Override
    public void onAnimationEnd(Animator animation) {
      counter--;
    }

    @Override
    public void onAnimationCancel(Animator animation) {
      // Canceling an animation invokes onAnimationEnd, so nothing needs to be done.
    }
  } 
```

然后按照您刚才的方式制作套装：

```
AnimatorTracker tracker = new AnimatorTracker(); // or make it a global reference
AnimatorSet set = new AnimatorSet();
AnimatorSet reverseSet = new AnimatorSet();

ValueAnimator v1 = ObjectAnimator.ofFloat(v, "scaleX", mScaleFactor);
ValueAnimator v2 = ObjectAnimator.ofFloat(v, "scaleY", mScaleFactor);
ValueAnimator reverseV1 = ObjectAnimator.ofFloat(v, "scaleX", 1.0f);
ValueAnimator reverseV2 = ObjectAnimator.ofFloat(v, "scaleY", 1.0f);

set.addListener(tracker);
set.setDuration(100);
set.playTogether(v1, v2);

reverseSet.addListener(tracker);
reverseSet.setDuration(100);
reverseSet.playTogether(reverseV1, reverseV2); 
```

`set.start()`当你想向前动画时调用。`reverseSet.start()`当你想要动画回来时调用。

# directshow - Directshow 直播源过滤器设计

> ID：11986456
> 
> 赞同：0
> 
> 时间：2012-08-16T11:49:07.063
> 
> 标签：directshow, directshow.net

我正在开发一个 Live DirectShow 过滤器。

我有一个 H264 流源，我可以通过 SDK API 获取流。

在我的过滤器中，我有一个队列，我将来自线程的传入流入队（推送）。然后我在过滤器FillBuffer中消耗（出列，弹出）这些流......

所以我做了一个线程安全的队列......但这会导致一些问题......

在 FillBuffer，如果我检查是否有任何传入数据包，如果有，则流程逻辑如下：

```
 ...
    bool hasElement = SynchronizedQueue.pop(element);

    if(!hasElement)
    {
        return S_OK
    }
    ... 
```

**...这会消耗很多 CPU ...**

Howewer 使用 boost lib 实现带条件变量的锁

```
...
SynchronizedQueue.waitAndPop(element) ;// which wait until we have some 
```

**哪个有情人CPU...但是有时候Queue中没有数据的时候，这个block的FillBuffer函数和filter可能不会停止**...

***那么对于从远程机器获取输入流并将其传递给解码器的实时源过滤器的任何设计理念替代方案？或者我怎样才能让我的设计更好......降低CPU并且可以停止？***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:10:00.813

源过滤器拥有一个推送线程，因此您需要使用同步对象（事件、互斥锁）在那里等待以产生控制，直到有新帧可用于推送输出引脚。

每当您从 SDK 接收帧并将其放入队列时，您将使用同步对象指示此可用性，例如您将[设置一个事件](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686211%28v=vs.85%29.aspx)。工作线程将看到事件并开始处理帧。

工作线程至少需要能够响应两个事件：新帧和过滤器/图形停止。因此，您将需要[`WaitForMultipleObjects`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686360%28v=vs.85%29.aspx)等待多个事件并在第一次发生时唤醒。

# ios - 为什么 UIPopoverController 不是 UIViewController 的子类？

> ID：11986457
> 
> 赞同：6
> 
> 时间：2012-08-16T11:49:07.077
> 
> 标签：ios, cocoa-touch, uiviewcontroller, uipopovercontroller

你能想到 Apple 选择将 UIPopoverController 实现为普通 NSObject 子类的特殊原因吗？对我来说，一个 UIViewController 子类会更有意义，以实现适当的 UIViewController 包含。

但也许有我没有想到的原因，为什么苹果的聪明工程师做出了他们的选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T12:02:23.903

~~我认为这是因为，就像 UIAlertView 一样，它呈现在一个新的 UIWindow 中，所以 windowLevel 属性保证它呈现在所有内容上。~~

~~无论它是否在新的 UIWindow 中，就视图控制器的包含而言，在 UIPopoverController 中显示的视图控制器中使用复杂的父子视图控制器容器层次结构应该没有问题。[对于某些弹出框，我在Pillboxie](http://www.pillboxie.com)中有至少三层嵌套的视图控制器，没有任何问题。~~

更新：我通过在示例项目中记录视图层次结构的前三个级别的类来检查层次结构，当弹出框可见时如下所示（我的根视图控制器有两个 UIButtons）：

一个窗口：

_SUBVIEW 类：UIView

___SUBSUBVIEW 类：UIRoundedRectButton

**_** _SUBSUBSUBVIEW 类：UIButtonLabel

___SUBSUBVIEW 类：UIRoundedRectButton

**_** _SUBSUBSUBVIEW 类：UIButtonLabel

_SUBVIEW 类：UIDimmingView

___SUBSUBVIEW 类：_UIPopoverView

**_** _SUBSUBSUBVIEW 类：_UIPopoverStandardChromeView

**_** _SUBSUBSUBVIEW 类：UIView

Apple 的文档指出，UIWindow 中的根视图控制器的视图不应有由其他视图控制器管理的同级视图，因为这些同级视图控制器不会接收旋转事件（参见[此处](http://developer.apple.com/library/ios/#qa/qa1688/_index.html)，第二个项目符号）。

因此，如果 Apple 将 UIPopoverController 设为 UIViewController 子类，则必须将其添加为 rootViewController 层次结构的子视图/子视图。但是，如果根视图控制器（无论如何都是*您的*代码）决定呈现一个干扰 UIPopoverController 视图层次结构的视图怎么办？Apple 似乎决定完全管理 UIPopoverController 的呈现，而不是让我们搞砸它，但他们不必为 UIWindow 的 no-sibling-view-controllers 政策授予例外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:33:29.323

因为`UIPopoverController`对象不与用户交互，这就是为什么它不是*视图*层的一部分，你`UIViewController`能够与用户通信，`UIPopoverController`它本身不做任何类似的工作。

快速浏览一下*Controller*的通用[定义](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)：

 *> 控制器可以向其关联视图发送命令以更改视图对模型的表示（例如，通过滚动文档）。它可以向模型发送命令以更新模型的状态（例如编辑文档）。

它解释了为什么它不是*视图*层的一部分，我希望它有所帮助。*

# ios - iOS 闪烁效果文本

> ID：11986461
> 
> 赞同：1
> 
> 时间：2012-08-16T11:49:19.137
> 
> 标签：ios

如何实现类似于滑动解锁图像或在 Paypal 应用程序中的文本闪烁效果？

是否可以使用透明文本并为其后面移动某种白色形状设置动画？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:59:24.333

请参考[MTAnimatedLabel](https://github.com/mturner1721/MTAnimatedLabel)，它做同样的事情。

他使用 CATextLayer 来遮罩 CAGradientLayer，然后为渐变层设置动画以获得所需的效果。

您可以在链接中找到使用详情。您甚至可以更改色调颜色。

# java - 从 java GWT 代码调用 .js 文件的 Javascript 函数

> ID：11986462
> 
> 赞同：15
> 
> 时间：2012-08-16T11:49:20.337
> 
> 标签：java, javascript, gwt

我在 Java GWT 代码中有一个按钮。我在脚本文件夹中有一个 javascript 文件。我想在按钮单击时访问该 js 文件的功能。

那么如何从 Java GWT 代码（按钮的单击事件）中调用该方法..？

谁能告诉我访问js文件功能的代码或方式。

提前致谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-16T14:37:59.533

由于您的代码不应依赖于 gwt 链接器（以及它如何加载代码），因此您需要在调用前加上正确的窗口对象。Reapp 没有考虑到这一点。所以它实际上需要是：

```
public static native void onMyButtonClick() /*-{
    $wnd.myJSfunction();
}-*/; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-16T12:01:21.330

1.  在 .html 文件中导入 JS Lib。
2.  创建一个这样的方法：

    ```
    public static native void onMyButtonClick() /*-{
        myJSfunction();
    }-*/; 
    ```

3.  像这样绑定你的按钮：

    ```
    myButton.addClickHandler(new ClickHandler() {

        @Override
        public void onClick(ClickEvent event)
        {
            onMyButtonClick();
        } 

    }); 
    ```

4.  完毕！

只需确保在生成的 GWT javascript 之前加载包含您的函数的 javascript。

别客气！

# javascript - 如何为单个元素的 jQuery 组合框设置 minLength

> ID：11986465
> 
> 赞同：2
> 
> 时间：2012-08-16T11:49:32.943
> 
> 标签：javascript, jquery, jquery-ui

如何在不影响其他元素的情况下为单个元素设置 minLength

**编辑：**

这是插件代码

```
(function ( $ ) {
        $.widget( "ui.combobox", {
            _create: function() {
                var input,
                    self = this,
                    select = this.element.hide(),
                    selected = select.children( ":selected" ),
                    value = selected.val() ? selected.text() : "",
                    wrapper = this.wrapper = $( "<span>" )
                        .addClass( "ui-combobox" )
                        .insertAfter( select );

                input = $( "<input>" )
                    .appendTo( wrapper )
                    .val( value )
                    .addClass( "ui-state-default ui-combobox-input" )
                    .autocomplete({
                        delay: 300,
                        minLength: 2,
                        source: function( request, response ) {
                            var matcher = new RegExp( $.ui.autocomplete.escapeRegex(request.term), "i" );
                            response( select.children( "option" ).map(function() {
                                var text = $( this ).text();
                                if ( this.value && ( !request.term || matcher.test(text) ) )
                                    return {
                                        label: text.replace(
                                            new RegExp(
                                                "(?![^&;]+;)(?!<[^<>]*)(" +
                                                $.ui.autocomplete.escapeRegex(request.term) +
                                                ")(?![^<>]*>)(?![^&;]+;)", "gi"
                                            ), "<strong>$1</strong>" ),
                                        value: text,
                                        option: this
                                    };
                            }) );
                        },
                        select: function( event, ui ) {
                            ui.item.option.selected = true;
                            self._trigger( "selected", event, {
                                item: ui.item.option
                            });
                        },
                        change: function( event, ui ) {
                            if ( !ui.item ) {
                                var matcher = new RegExp( "^" + $.ui.autocomplete.escapeRegex( $(this).val() ) + "$", "i" ),
                                    valid = false;
                                select.children( "option" ).each(function() {
                                    if ( $( this ).text().match( matcher ) ) {
                                        this.selected = valid = true;
                                        return false;
                                    }
                                });
                                if ( !valid ) {
                                    // remove invalid value, as it didn't match anything
                                    $( this ).val( "" );
                                    select.val( "" );
                                    input.data( "autocomplete" ).term = "";
                                    return false;
                                }
                            }
                        }
                    })
                    .addClass( "ui-widget ui-widget-content ui-corner-left" );

                input.data( "autocomplete" )._renderItem = function( ul, item ) {
                    return $( "<li></li>" )
                        .data( "item.autocomplete", item )
                        .append( "<a>" + item.label + "</a>" )
                        .appendTo( ul );
                };

                $( "<a>" )
                    .attr( "tabIndex", -1 )
                    .attr( "title", "Show All Items" )
                    .appendTo( wrapper )
                    .button({
                        icons: {
                            primary: "ui-icon-triangle-1-s"
                        },
                        text: false
                    })
                    .removeClass( "ui-corner-all" )
                    .addClass( "ui-corner-right ui-combobox-toggle" )
                    .click(function() {
                        // close if already visible
                        if ( input.autocomplete( "widget" ).is( ":visible" ) ) {
                            input.autocomplete( "close" );
                            return;
                        }

                        // work around a bug (likely same cause as #5265)
                        $( this ).blur();

                        // pass empty string as value to search for, displaying all results
                        input.autocomplete( "search", "" );
                        input.focus();
                    });
            },

            destroy: function() {
                this.wrapper.remove();
                this.element.show();
                $.Widget.prototype.destroy.call( this );
            }
        });
    })( jQuery ); 
```

我正在选择必须将哪些选择标签制作成这样的组合框。

```
$("#tracklisting").combobox({
    selected: function(event, ui) {
        var tracklisting = $("#tracklisting").val();
        var id = $("#id").val();

        $.post('writeToDB.php', {
            id: id,
            tracklisting: tracklisting
        });
    }
}) 
```

我在哪里`$("#tracklisting").autocomplete( "option", "minLength", 0 );`设置长度。我尝试了多种方法，但无济于事。

**编辑：这是该项目的 jsfiddle 链接。组合框可以保持默认值，但组合框 2 的最小长度必须为 0。[http://jsfiddle.net/5cMjk/4/](http://jsfiddle.net/5cMjk/4/)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:50:16.330

jQuery UI 中的 .combobox() 小部件是对 .autocomplete() 的修改，似乎没有那么多选项。

但是从它的代码中你可以注意到它动态创建了一个输入标签，你可以尝试再次对其重新应用 .autocomplete() 方法。输入放置在旧选择标记之后的跨度中，我使用 .next() 来选择跨度：

```
var myMinLength = 10;
$("#tracklisting").next().children("input").autocomplete({
                    delay: 0,

                    minLength: myMinLength ,

                    source: function( request, response ) {
                        var matcher = new RegExp( $.ui.autocomplete.escapeRegex(request.term), "i" );
                        response( select.children( "option" ).map(function() {
                            var text = $( this ).text();
                            if ( this.value && ( !request.term || matcher.test(text) ) )
                                return {
                                    label: text.replace(
                                        new RegExp(
                                            "(?![^&;]+;)(?!<[^<>]*)(" +
                                            $.ui.autocomplete.escapeRegex(request.term) +
                                            ")(?![^<>]*>)(?![^&;]+;)", "gi"
                                        ), "<strong>$1</strong>" ),
                                    value: text,
                                    option: this
                                };
                        }) );
                    },
                    select: function( event, ui ) {
                        ui.item.option.selected = true;
                        self._trigger( "selected", event, {
                            item: ui.item.option
                        });
                    },
                    change: function( event, ui ) {
                        if ( !ui.item ) {
                            var matcher = new RegExp( "^" + $.ui.autocomplete.escapeRegex( $(this).val() ) + "$", "i" ),
                                valid = false;
                            select.children( "option" ).each(function() {
                                if ( $( this ).text().match( matcher ) ) {
                                    this.selected = valid = true;
                                    return false;
                                }
                            });
                            if ( !valid ) {
                                // remove invalid value, as it didn't match anything
                                $( this ).val( "" );
                                select.val( "" );
                                input.data( "autocomplete" ).term = "";
                                return false;
                            }
                        }
                    }
                }) 
```

如果您的组合框在此之后中断，您还可以尝试添加后面的这些行：

```
$("#tracklisting").next().children("input").addClass( "ui-widget ui-widget-content ui-corner-left" );

            $("#tracklisting").next().children("input").data( "autocomplete" )._renderItem = function( ul, item ) {
                return $( "<li></li>" )
                    .data( "item.autocomplete", item )
                    .append( "<a>" + item.label + "</a>" )
                    .appendTo( ul );
            }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:43:52.813

你试过这个：

```
$("#tracklisting").autocomplete({ minLength: 2 }); 
```

另请参阅：http: [//jqueryui.com/demos/autocomplete/#option-minLength](http://jqueryui.com/demos/autocomplete/#option-minLength)

演示：http: [//jsfiddle.net/5cMjk/1/](http://jsfiddle.net/5cMjk/1/)

# php - Web 应用程序在看似正确的路径中找不到文件

> ID：11986469
> 
> 赞同：0
> 
> 时间：2012-08-16T11:49:59.577
> 
> 标签：php, facebook, localhost

我试图将我的 facebook 应用程序文件重新组织到更好的文件夹中，现在当我尝试在 facebook 上加载我的应用程序时，它会引发以下错误：

```
Warning: require_once(../scripts/mysql_connect.php) [function.require-once]: failed to open stream: No such file or directory in C:\xampp\htdocs\<root folder>\Model\Database.php on line 3

Fatal error: require_once() [function.require]: Failed opening required '../scripts/mysql_connect.php' (include_path='.;C:\xampp\php\PEAR') in C:\xampp\htdocs\<root folder>\Model\Database.php on line 3 
```

第二个错误是我认为第一个错误的结果。奇怪的是，当我通过浏览器中的 localhost url 访问时，我的程序运行良好，但是当我通过 facebook 运行它时，它会抛出这个错误。

在我的根文件夹中，我有一个保存 Database.php 文件的“模型”文件夹和一个保存 mysql_connect.php 文件的“脚本”文件夹。我尝试清除浏览器上的缓存并使用隐私浏览，但它仍然抛出此错误。

有谁知道可能出了什么问题？

**编辑：对不起，这似乎也不适用于本地主机！我认为奇怪的一件事是它说“无法打开流：没有这样的文件或目录”，然后列出了 database.php 路径。为什么要往里面看？**

我使用`require_once('../scripts/mysql_connect.php');`我的 Database.php 文件顶部的行来包含它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:59:04.353

您是否有权编辑您的 php.ini 文件？一种解决方案是找到包含路径的行（您会注意到它已经有 C:\xampp\php\PEAR）。包括您引用的“脚本”文件夹的完整路径，然后您可以将 php 代码更改为：

```
require_once('mysql_connect.php'); 
```

PHP 将能够找到此文件，因为它位于包含路径中。只要确保如果您开始添加多个包含路径，则不应在两个或多个不同的包含路径中包含名为 mysql_connect.php 的文件，因为您很可能会遇到错误。希望这可以帮助。它肯定会产生一些更简洁的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:14:16.747

好的，我已经解决了这个问题，但我仍然不确定为什么会出现问题。在我的根文件夹中，我有两个文件夹：脚本和模型。我的模型文件夹中有一个 database.php 文件，其中包含以下代码行：

```
require_once('../scripts/mysql_connect.php'); 
```

由于某种原因，这不起作用，但是通过将行替换为：

```
require_once('/scripts/mysql_connect.php'); 
```

这又开始工作了！只是想我会发布解决方案。有谁知道为什么其他方式失败了？我认为“..”只是让它在文件夹层次结构中上升一级，即在这种情况下到根文件夹，然后按照将它带到文件的路径...

编辑：这似乎只为本地主机解决了它，而不是通过 Facebook ......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T11:52:35.530

似乎在服务器上有一个不同的工作目录。像下面这样的东西应该是一个快速修复

`dirname(__FILE__) . '/../scripts/mysql_connect.php'`

# memcached - Memcached incr/decr 限制

> ID：11986471
> 
> 赞同：0
> 
> 时间：2012-08-16T11:50:01.850
> 
> 标签：memcached

根据[https://github.com/memcached/memcached/blob/master/doc/protocol.txt#L309](https://github.com/memcached/memcached/blob/master/doc/protocol.txt#L309)，使用 incr 和 decr 操作的数字“将环绕 64 位标记”。

1）由于下限似乎为0，这是否意味着最高可能值为18446744073709551615，还是9223372036854775807？

2) 这是 32 位和 64 位操作系统的限制吗？在 32 位操作系统上，incr/decr 的限制是否为 4294967295？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T19:00:43.003

1）下限为0，上限为2^64。

2) Cas 保存为 uint64_t，因此这意味着 cas 在 32 位和 64 位系统上都应该是 64 位。

# iphone - 在objective c iPhone中绘制标尺

> ID：11986474
> 
> 赞同：3
> 
> 时间：2012-08-16T11:50:23.630
> 
> 标签：iphone, objective-c, ios, xcode

我正在尝试使用Brad Larson的[这篇文章中的代码创建一个动态标尺](https://stackoverflow.com/questions/2532805/how-to-draw-an-animatable-ruler-with-quartz2d)

```
NSInteger majorTickInterval = 5;
    NSInteger totalTravelRangeInMicrons = 1000;
    NSInteger minorTickSpacingInMicrons = 50;
    CGFloat currentHeight = 100;
    int leftEdgeForTicks = 10;
    int majorTickLength = 15;
    int minorTickLength = 10;

    NSInteger minorTickCounter = majorTickInterval;
    NSInteger totalNumberOfTicks = totalTravelRangeInMicrons / minorTickSpacingInMicrons;
    CGFloat minorTickSpacingInPixels = currentHeight / (CGFloat)totalNumberOfTicks;

    CGContextSetStrokeColorWithColor(context, [[UIColor blackColor] CGColor]);

    for (NSInteger currentTickNumber = 0; currentTickNumber < totalNumberOfTicks; currentTickNumber++)
    {
        CGContextMoveToPoint(context, leftEdgeForTicks + 0.5, round(currentTickNumber * minorTickSpacingInPixels) + 0.5);

        minorTickCounter++;
        if (minorTickCounter >= majorTickInterval)
        {
            CGContextAddLineToPoint(context, round(leftEdgeForTicks + majorTickLength) + 7**.5, round(currentTickNumber * minorTickSpacingInPixels) + 0.5);
            minorTickCounter = 0;               
        }
        else
        {
            CGContextAddLineToPoint(context, round(leftEdgeForTicks + minorTickLength) + 0.5, round(currentTickNumber * minorTickSpacingInPixels) + 0.5);
        }

    }

    CGContextStrokePath(context); 
```

但问题是它垂直而不是水平地创建刻度，如下图所示：

![截屏](../Images/44e9af2cfbf5aff23163cf2d04812b9b.png)

虽然我想画这样的尺子：

![截图2](../Images/d4983ba4e26f2d661f994fb1d88e5d0b.png)

它也没有给我超过 25 个滴答声，我玩过代码但仍然不成功。

任何指导如何解决此问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:58:35.277

这是一个实现，从我的头顶开始......我认为保持它的**可读性**很重要。

```
CGFloat leftMargin= 10;
CGFloat topMargin = 10;
CGFloat height = 30;
CGFloat width = 200;
CGFloat minorTickSpace = 10;
int multiple = 5;              // number of minor ticks per major tick
CGFloat majorTickLength = 20;  // must be smaller or equal height, 
CGFloat minorTickLength = 10;  // must be smaller than majorTickLength

CGFloat baseY = topMargin + height;
CGFloat minorY = baseY - minorTickLength;
CGFloat majorY = baseY - majorTickLength;
CGFloat majorTickSpace = minorTickSpace * multiple;

int step = 0;
for (CGFloat x = leftMargin; x <= leftMargin + width, x += minorTickLength) {
   CGContextMoveToPoint(context, x, baseY);
   CGFloat endY = (step*multiple*minorTickLength  == x) ? majorY : minorY;
   CGContextAddLineToPoint(context, x, endY);
   step++;  // step contains the minorTickCount in case you want to draw labels
}
CGContextStrokePath(context); 
```

# c# - 以编程方式写入数据库

> ID：11986479
> 
> 赞同：1
> 
> 时间：2012-08-16T11:50:42.347
> 
> 标签：c#, asp.net, sql-server, vb.net, vb.net-to-c#

我有一个连接到 SQL Server 的 ASP.Net 网站。在以前的项目（VB）中，我使用以下代码写入我的数据库：

```
Dim connectionString As String = ConfigurationManager.ConnectionStrings("DBConnection").ConnectionString
                Dim insertSql As String = "INSERT INTO tblProfile(UserID, UserName, Title, FirstName, LastName, MiddleName, DateofBirth, Gender, HomePhoneNumber, MobilePhoneNumber, Address, StreetName, StreetType, Suburb, PostCode, State, Country) VALUES(@UserID, @UserName, @Title, @FirstName, @LastName, @MiddleName, @DateofBirth, @Gender, @HomePhoneNumber, @MobilePhoneNumber, @Address, @StreetName, @StreetType, @Suburb, @PostCode, @State, @Country)"

                Using myConnection As New SqlConnection(connectionString)
                    myConnection.Open()
                    Dim myCommand As New SqlCommand(insertSql, myConnection)
                    myCommand.Parameters.AddWithValue("@UserID", newUserGuid)
                    myCommand.Parameters.AddWithValue("@UserName", newUserName)
                    myCommand.Parameters.AddWithValue("@Title", Title.SelectedItem.Text)
                    myCommand.Parameters.AddWithValue("@FirstName", FirstName.Text)
                    myCommand.Parameters.AddWithValue("@LastName", LastName.Text)
                    If MiddleNames.Text = String.Empty Then
                        myCommand.Parameters.AddWithValue("@MiddleName", DBNull.Value)
                    Else
                        myCommand.Parameters.AddWithValue("@MiddleName", MiddleNames.Text)
                    End If
                    DateofBirth.Text = YearofBirth.Text + "-" + MonthofBirth.Text + "-" + DayofBirth.Text
                    myCommand.Parameters.AddWithValue("@DateofBirth", DateofBirth.Text)
                    myCommand.Parameters.AddWithValue("@Gender", Gender.SelectedItem.Text)
                    If HomePhoneNumber.Text = String.Empty Then
                        myCommand.Parameters.AddWithValue("@HomePhoneNumber", DBNull.Value)
                    Else
                        myCommand.Parameters.AddWithValue("@HomePhoneNumber", HomePhoneNumber.Text)
                    End If
                    If MobilePhoneNumber.Text = String.Empty Then
                        myCommand.Parameters.AddWithValue("@MobilePhoneNumber", DBNull.Value)
                    Else
                        myCommand.Parameters.AddWithValue("@MobilePhoneNumber", MobilePhoneNumber.Text)
                    End If
                    myCommand.Parameters.AddWithValue("@Address", AddressNumber.Text)
                    myCommand.Parameters.AddWithValue("@StreetName", StreetName.Text)
                    myCommand.Parameters.AddWithValue("@StreetType", StreetType.SelectedItem.Text)
                    myCommand.Parameters.AddWithValue("@Suburb", Suburb.Text)
                    myCommand.Parameters.AddWithValue("@PostCode", Postcode.Text)
                    myCommand.Parameters.AddWithValue("@State", State.SelectedItem.Text)
                    myCommand.Parameters.AddWithValue("@Country", Country.SelectedItem.Text)

                    myCommand.ExecuteNonQuery()
                    myConnection.Close()
                End Using 
```

我现在已更改为 C#，并且在更改此代码时遇到了问题。到目前为止，我有：

```
String connectionString = ConfigurationManager.ConnectionStrings["LocalSqlServer"].ConnectionString;

String insertSql = "INSERT INTO tbl_UserProfiles VALUES(@UserID, @FirstName, @LastName, @YearOfBirth, @Country)";
SqlCommand myCommand = new SqlCommand(insertSql, connectionString);
myCommand.Parameters.AddWithValue("@UserID", newUserGuid);
myCommand.Parameters.AddWithValue("@FirstName", FirstNameTB.Text);
myCommand.Parameters.AddWithValue("@LastName", LastNameTB.Text);
myCommand.Parameters.AddWithValue("@YearOfBirth", YearDDL.SelectedItem.Text);
myCommand.Parameters.AddWithValue("@Country", CountryDDL.SelectedItem.Text);

try
{
    connectionString.Open();
    myCommand.ExecuteNonQuery();
}

finally
{
    connectionString.Close();
} 
```

在查看了一些教程网站和我自己以前的代码后，我尝试创建它。但是，我相信我在这里做错了：

```
String connectionString = ConfigurationManager.ConnectionStrings["LocalSqlServer"].ConnectionString; 
```

当我得到弯曲的红色下划线时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:54:05.750

试试这个....使用`SqlConnection`

**使用 myConnection As New SqlConnection(connectionString) 您没有将此行转换为 C#**

```
 String connectionString = ConfigurationManager.ConnectionStrings["LocalSqlServer"].ConnectionString;
 SqlConnection con = new Sqlconnection(connectionString);
            String insertSql = "INSERT INTO tbl_UserProfiles VALUES(@UserID, @FirstName, @LastName, @YearOfBirth, @Country)";
            SqlCommand myCommand = new SqlCommand(insertSql, con);
            myCommand.Parameters.AddWithValue("@UserID", newUserGuid);
            myCommand.Parameters.AddWithValue("@FirstName", FirstNameTB.Text);
            myCommand.Parameters.AddWithValue("@LastName", LastNameTB.Text);
            myCommand.Parameters.AddWithValue("@YearOfBirth", YearDDL.SelectedItem.Text);
            myCommand.Parameters.AddWithValue("@Country", CountryDDL.SelectedItem.Text);

            try
            {
                con.Open();
                myCommand.ExecuteNonQuery();

            }

            finally
            {
                con.Close();
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T11:56:57.897

看起来您正在尝试`Open()`连接字符串:)

翻译

```
 Using myConnection As New SqlConnection(connectionString)
                    myConnection.Open()
      Dim myCommand As New SqlCommand(insertSql, myConnection) 
```

到

```
 using (var myConnection = new SqlConnection(connectionString))
  using (var myCommand = new SqlCommand(insertSql, myConnection))
  {
      myConnection.Open();
      ...
      myCommand.ExecuteNonQuery();
  } 
```

在你的 C# 中使用，`SqlConnection`并且`SqlCommand`将保证`Dispose()`在两个对象上都调用它，无论是成功还是失败（以及关闭连接、清理等）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T11:57:33.450

确保你有

```
using System.Configuration 
```

在文件的顶部。您的 web.config 文件是否还包含配置 > configSections > configSections 部分？

# winforms - Winform treeview 排序属性很慢

> ID：11986480
> 
> 赞同：3
> 
> 时间：2012-08-16T11:50:46.700
> 
> 标签：winforms, treeview

我有一个[属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.treeview.sorted.aspx)设置为 true的 winforms`TreeView`控件。我还通过为属性分配和实例来覆盖默认排序器。[`Sorted`](http://msdn.microsoft.com/en-us/library/system.windows.forms.treeview.sorted.aspx)`IComparer``TreeViewNodeSorter`

`AddRange`不幸的是，使用该函数添加几千个节点可能需要 10 秒。如果我设置`Sorted`为 false，则`AddRange`函数小于 1/2 秒。（请不要讨论添加这么多节点的有效性）

啊哈，我听到你说.. 我的`IComparer`对象有问题。不是根据探查器。几乎没有时间花在排序对象上，但该`AddRange`函数位于慢速函数列表的顶部。

这个问题很容易在测试项目中复制。只需创建一个`TreeNode`s 列表并使用该函数将其添加到现有的扩展树节点中`AddRange`。这将在树文本上使用默认排序 - 再次慢得不成比例。

为了演示如果我`Sorted`在测试 probject 中禁用该属性并在`List<T>.Sort`将节点添加到树之前在我的节点列表上使用该函数（带有一个比较节点文本的委托），那么它的速度有多慢，几乎没有延迟。

这导致在使用之前手动对节点进行排序的解决方法`AddRange`。没关系，但是在将节点添加到现有的一组子节点时找到正确的插入点意味着做很多工作——而不是简单地设置`Sorted`为 true 方便。

有没有办法加快这种行为？

编辑 - 似乎唯一的方法是在添加之前进行排序。这有点麻烦，但我想出了以下扩展方法：

```
public static void AddSortedRange(this TreeNodeCollection existingNodes, IList<TreeNode>    nodes, TreeView treeView, IComparer sorter)
    {
        TreeNode[] array = new TreeNode[nodes.Count + existingNodes.Count];

        existingNodes.CopyTo(array, 0);

        nodes.CopyTo(array, existingNodes.Count);

        Array.Sort(array, sorter);

        treeView.BeginUpdate();

        existingNodes.Clear();

        existingNodes.AddRange(array);

        treeView.EndUpdate();
    } 
```

将现有节点复制到数组、附加新节点、对数组进行排序然后替换尝试在树视图中内联操作节点的操作更快 - 上述代码中最慢的操作是`existingNodes.Clear()`调用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T09:48:12.997

您遇到的性能问题与您将项目添加到排序的**TreeView**的事实有关。当您添加到排序列表时，幕后发生的事情是，对于您添加的**每个**项目，它都会尝试找到它的位置，这意味着它需要为**每个项目遍历****整个列表**，现在想象一下有多少次迭代为每个新项目做准备:)

 **你可以做的是：

```
TreeView tv = new TreeView(); // Just so I have a TreeView variable
TreeNode[] nodes = ... // Well, your list of nodes that you want to add
tv.SuspendLayout();
tv.Sorted = false;
tv.Nodes.Clear();
tv.Nodes.AddRange( nodes );
tv.Sorted = true;
tv.ResumeLayout(); 
```

出于性能原因，我们使用**SuspendLayout/ResumeLayout**方法来禁用**TreeView**在操作它的项目时使用的绘制过程，我们将通过删除项目然后添加它们来导致，因为它需要重新绘制以添加新的您正在添加的项目（对于每个项目）。

***在我们对节点集合***进行任何更改之前，我们必须调用***Sorted = false;*** **禁用排序（这只是暂时的 - 由于SuspendLayout**，用户不会看到任何更改）。然后只需将项目添加到集合中（因为**TreeView**暂时没有排序，它应该非常快）。然后我们通过调用***Sorted = true***再次启用排序；将 Sorted 属性设置为 true 将导致集合进行排序。这样，排序将只执行一次（因此**TreeView**将只通过项目一次）。

还有一件事，如果您为 ListView (tv.ListViewItemSorter) 定义了自定义排序器，请在添加项目之前将其设置为 null，当然只是暂时的，在 ResumeLayout 调用之前再次重新启用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-06T13:37:57.563

我使用 Sort() 方法遇到了锁定情况。

它工作了好几个星期，然后一次，它卡住了，我的应用程序在任务管理器中卡住了 25% 的 CPU。

```
var allTags = _TagEngine.GetTags(1, force);

try
{
    TagTree.BeginUpdate();
    TagTree.Nodes.Clear();
    foreach (var rec in allTags)
    {
       ... adding nodes in the tree
    }

    TagTree.Sort(); // <= stuck here !
}
finally
{
    TagTree.EndUpdate();
} 
```

所以我使用反编译器观察 Sort() 方法，我注意到它已经在内部处理了 BeginUpdate/EndUpdate 功能。

然后我将 TagTree.Sort() 移到 BeginUpdate/EndUpdate 之外，并且它工作正常。

```
var allTags = _TagEngine.GetTags(1, force);

try
{
    TagTree.BeginUpdate();
    TagTree.Nodes.Clear();
    foreach (var rec in allTags)
    {
       ... adding nodes in the tree
    }
}
finally
{
    TagTree.EndUpdate();
}

TagTree.Sort(); 
```

我几乎不明白这里发生了什么。为什么它在过去起作用，然后突然停止了。坦率地说，我没有足够的时间进一步挖掘，无论如何，最重要的是在这里：它再次起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-08T07:16:01.343

我对 TreeView 控件做了一个简单的扩展。它非常快。它将内部存储移动到字典中，这会产生巨大的影响。在我的真实示例中，我需要加载 100000 条记录。之前是37分钟，现在是2.2秒！！

您可以在 CodeProject 上找到示例和代码：http: [//www.codeproject.com/Articles/679563/Fast-TreeView](http://www.codeproject.com/Articles/679563/Fast-TreeView)**

# jquery - 如何使用 jquery 或 js 在 mvc 中进行拖放

> ID：11986484
> 
> 赞同：0
> 
> 时间：2012-08-16T11:50:55.097
> 
> 标签：jquery, asp.net-mvc, razor

我有一个网页： ![在此处输入图像描述](../Images/9dc015e0bc74e8097e78988992a4077e.png)

然后我做一个点击箭头向右改变下一个artikel细节然后我做一个点击箭头向左显示一个预览artikel。我现在想这样做，然后左右拖放以更改artikel。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T19:53:53.250

这可能是您正在寻找的内容 ==> [James Lin's Blog on js swipe demo](http://james.lin.net.nz/2010/09/27/javascript-swipe-demo-works-both-with-finger-ipad-and-mouse-pc/)。

# wpf - ListView 和触发器；用鼠标单击时未选择项目

> ID：11986486
> 
> 赞同：2
> 
> 时间：2012-08-16T11:51:18.980
> 
> 标签：wpf, xaml

问题可以通过以下代码重现：

```
<ListView>

    <ListView.ItemContainerStyle>
        <Style TargetType="{x:Type ListViewItem}">
            <Setter Property="VerticalContentAlignment" Value="Center" />
            <Setter Property="HorizontalContentAlignment" Value="Left" />
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{x:Null}" />
                    <Setter Property="BorderBrush" Value="{x:Null}" />
                </Trigger>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="#FFEDC4" />
                    <Setter Property="BorderBrush" Value="{x:Null}" />
                </Trigger>
            </Style.Triggers>
        </Style>
    </ListView.ItemContainerStyle>

    <ListView.Items>
        <ListViewItem Height="70">Some item</ListViewItem>
        <ListViewItem Height="70">Some item</ListViewItem>
        <ListViewItem Height="70">Some item</ListViewItem>
        <ListViewItem Height="70">Some item</ListViewItem>
    </ListView.Items>

</ListView> 
```

控件无法正确单击鼠标。单击项目文本效果很好并选择项目。单击文本之外的任何位置（因此在外部`TextBox`但在内部`ListViewItem`）有 80% 的时间有效，但每 5 次无效。该项目没有被选中。这不仅是视觉样式错误，而且该项目确实没有被选中，可以使用键盘箭头键进行检查。

一切都是在添加触发器后开始的。删除`IsMouseOver`触发器有帮助。

这里有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T11:55:08.003

利用

```
<Setter Property="Background" Value="Transparent" /> 
```

而不是`{x:Null}`. 否则鼠标事件将不会被捕获。

# highcharts - 更改 Highcharts 图例的内容

> ID：11986492
> 
> 赞同：3
> 
> 时间：2012-08-16T11:51:49.433
> 
> 标签：highcharts, legend, scatter

使用 Highcharts 时，是否可以更改图例的内容以显示系列以外的内容？

例如，我有一个只有一个系列但包含许多元素的散点图，因此元素标签相互阻碍并且难以辨认：是否可以使用图例来显示元素名称而不是系列？（系列中的每个成员都有不同的颜色，因此在这种情况下可以使用图例）

* * *

**编辑：**

事实证明没有什么好的方法可以做到这一点，所以我编写了自己的自定义图例。你可以在这里找到代码：http: [//pastie.org/5115536](http://pastie.org/5115536)

希望对你有帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T11:30:16.440

Highcharts 允许在图例中显示数据点而不是系列名称。但是，不幸的是它只适用于饼图`type:pie`。

尽管 API 中没有记录，但饼图有一个默认选项可用。

```
legendType: 'point', 
```

如果您尝试为其他类型的图表设置它，则不会呈现 Legend。

# jquery - 使用 jquery 将 xml 节点附加到另一个 xml

> ID：11986500
> 
> 赞同：1
> 
> 时间：2012-08-16T11:52:40.583
> 
> 标签：jquery

如何使用 jquery 将 xml 的节点附加到另一个 xml？找到下面的要求。

第一个 XML

```
<?xml version="1.0" ?>
<Root>
  <First>
   <a>a</a>
   <b>b</b>
  </First>
</Root> 
```

第二个 XML

```
<?xml version="1.0" ?>
<Root>
  <Test>
   <a>aa</a>
   <b>bb</b>
  </Test>
   <Test>
   <a>aaa</a>
   <b>bbb</b>
  </Test>
</Root> 
```

预期的

```
<?xml version="1.0" ?>
    <Root>
      <First>
       <a>a</a>
       <b>b</b>
      </First>
      <Test>
       <a>aa</a>
       <b>bb</b>
      </Test>
       <Test>
       <a>aaa</a>
       <b>bbb</b>
      </Test>
    </Root> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:58:58.177

尝试这个：

```
$('Root:first').children().prependTo($('Root:eq(1)'));
$('Root:first').remove(); 
```

[演示](http://jsfiddle.net/NDXx8/2)

# windows-phone-7 - AutoCompleteBox 奇怪的弹出位置行为

> ID：11986501
> 
> 赞同：1
> 
> 时间：2012-08-16T11:52:43.547
> 
> 标签：windows-phone-7, silverlight-toolkit

我正在使用 AutoCompleteBox 向新应用程序添加自动完成功能。我注意到弹出位置的一些奇怪行为。有时（大约 70%）它会弹出得稍微高一些并挡住一半的文本框，而有时它可以正常工作。我的应用程序中有两个 AutoCompleteBoxes，它们都有这种行为。以前有人经历过吗？

我正在使用 2011 年 11 月的工具包。

![在此处输入图像描述](../Images/dde4433b9de43052b6129be6b8c46452.png)

# javascript - Javascript的粘性侧边栏问题

> ID：11986502
> 
> 赞同：0
> 
> 时间：2012-08-16T11:52:44.687
> 
> 标签：javascript, css, position

我正在尝试实现一个粘性侧边栏，当用户向下滚动页面时，它始终位于窗口顶部。

我让它在正确的时间粘在顶部，但由于某种原因它不再向左浮动......有人请让我知道我可以做些什么来让它在粘住时保持在相同的位置？

我的网站在[这里](http://edharrisondesign.com/portfolio-site2/)。提前致谢！

```
<script type="text/javascript">
$(function(){ // document ready

    if (!!$('.sticky').offset()) { // make sure ".sticky" element exists
        var stickyTop = $('.sticky').offset().top; // returns number 
        $(window).scroll(function(){ // scroll event
            var windowTop = $(window).scrollTop(); // returns number 
            if (stickyTop < windowTop){
                $('.sticky').css( { position:'fixed', top: 0, marginLeft: "30px" } );
            }
            else {
                $('.sticky').css('position','static');
            }
        });
    }

});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:59:20.890

不要发明轮子。只需获取类似[此插件的](https://github.com/bigspotteddog/ScrollToFixed)内容即可享受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:04:26.663

你似乎没有告诉它在屏幕的左侧。

尝试将此行更改为：

```
$('.sticky').css( { position:'fixed', top: 0, left:0, marginLeft: "30px" } 
```

# html - 在 Metro 应用程序中将 JSON 字符串绑定到 ListView？

> ID：11986503
> 
> 赞同：-1
> 
> 时间：2012-08-16T11:52:46.187
> 
> 标签：html, data-binding, microsoft-metro, winjs

我有一个地铁应用程序（HTML5 和 WinJS），正在尝试显示服务数据。实际上，这里是从我的服务中检索 JSON 数据，但无法将此数据绑定到 listview 。任何人都给我一些工作的例子。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-25T15:31:06.487

你可以使用`WinJS.xhr()`这个。[您可以在此链接https://msdn.microsoft.com/pt-br/library/windows/apps/br229787.aspx](https://msdn.microsoft.com/pt-br/library/windows/apps/br229787.aspx)上阅读有关它的更多信息，这是一个示例：

```
var path = "data/file.json";
function getData(path) {
    WinJS.xhr({ url: path }).then(
        function (response) {
            var json = JSON.parse(response.responseText);

            // Since this is an asynchronous function, you can't
            // return the data, so you can:
            // 1) retrieve the data to a namespace once the app loads.
            var list = new WinJS.Binding.List(json);
            Somenomespace.data = list;

            // 2) or do all the binding inside the function.
            var listView = document.getElementById("listViewID");
            listView.winControl.itemDataSource = list.dataSource;
        });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:20:20.400

如果您使用内置的 JSON.parse(jsonString) 函数，您可以使用普通的 for 循环遍历内容，因为它是一个普通的对象并照常添加它。只要记住处理或渲染数据。

她是我在使用列表视图的搜索页面中的代码示例：

```
var response = JSON.parse(data) ; 
var originalResults = new WinJS.Binding.List();

for (x in response) {
    originalResults.push(response[x]); 
}

this.populateFilterBar(element, originalResults); 
this.applyFilter(this.filters[0], originalResults); 
```

# workflow - 如何在 Liferay 6.1 的 Kaleo Workflow 中将博客和页面评论作为电子邮件发送？

> ID：11986506
> 
> 赞同：0
> 
> 时间：2012-08-16T11:53:03.293
> 
> 标签：workflow, liferay, liferay-6

我可以发送有关新评论的通知，但我想将评论作为电子邮件的一部分发送。这是我到目前为止得到的：

```
<notification>
    <name>Notification</name>
    <description>Notifies about new blog or page comments</description>
    <template>

    <![CDATA[
    <p>
    There's a new comment at page ${page_url} by ${user_name} :
    <#if comment != "" >
    <br /><strong>${comment}</strong>
    </#if>
    </p>

    <p>With Love,<br /><strong>Liferay</strong></p>

    ]]>

    </template>
    <template-language>freemarker</template-language>
    <notification-type>email</notification-type>            
    <recipients>
        <role>
            <role-type>regular</role-type>
            <name>Portal Content Reviewer</name>
            <auto-create>false</auto-create>
        </role> 
    </recipients>
    <execution-type>onEntry</execution-type>
</notification> 
```

我将如何分配 ${page_url}、${user_name} 和 ${comment}？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:30:44.333

好的，$serviceContext 有我需要的一切。请注意，我将模板语言更改为速度。例如：

```
<template>

<![CDATA[
## All attributes 
##set ( $debug = ${serviceContext.getAttributes()} )
## URL to page:
#set ( $url = ${serviceContext.getAttribute("contentURL")} )
##Latest comment
#set ( $body = ${serviceContext.getAttribute("body")} )
<p>
There's a new comment at page $url :
<br /><strong>$body</strong>
</p>
]]>

</template> 
```

# asp.net - 在启用排序的情况下单击按钮上下移动 asp.net gridview 行

> ID：11986507
> 
> 赞同：0
> 
> 时间：2012-08-16T11:53:09.100
> 
> 标签：asp.net, c#-4.0

我想通过单击按钮上下移动gridview行，我遵循了这个

[http://www.aspdotnet-suresh.com/2012/06/move-aspnet-gridview-rows-up-and-down.html](http://www.aspdotnet-suresh.com/2012/06/move-aspnet-gridview-rows-up-and-down.html)

它工作正常。但是，我在我的 gridview 上启用了排序。对列进行排序时，行不会上下移动。有人可以建议如何实现它，以便即使对列进行排序，gridview 行也会上下移动。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T06:01:29.283

这是在网格视图中向上和向下移动行的另一种方法。

```
if (e.CommandName == "UP")
        {
        Button btnup = (Button)sender;
        GridViewRow row = (GridViewRow)btnup.NamingContainer;
        var rows = id.Rows.Cast<GridViewRow>().Where(a => a != row).ToList();
        switch (e.CommandName)
        {
            case "UP":
                if (row.RowIndex.Equals(0))
                    rows.Add(row);
                else
                    rows.Insert(row.RowIndex - 1, row);
                break;
            case "Down":
                if (row.RowIndex.Equals(id.Rows.Count - 1))
                    rows.Insert(0, row);
                else
                    rows.Insert(row.RowIndex + 1, row);
                break;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-04T10:50:56.567

旧帖子但没有足够的代表发表评论，Pratiks 的回答只会触发 UP 命令，因为 Down 命令是在第一个 if 语句中构建的......它需要。

```
Button btnup = (Button)sender;
GridViewRow row = (GridViewRow)btnup.NamingContainer;
var rows = id.Rows.Cast<GridViewRow>().Where(a => a != row).ToList();
if (e.CommandName == "UP")
    {
            if (row.RowIndex.Equals(0)) {
                rows.Add(row);}
            else {
                rows.Insert(row.RowIndex - 1, row); }
    }
}
else if (e.CommandName == "DOWN")
{
            if (row.RowIndex.Equals(id.Rows.Count - 1)) {
                rows.Insert(0, row);}
            else {
                rows.Insert(row.RowIndex + 1, row);}
} 
```

# search - Solr：索引短语短于查询时的短语搜索

> ID：11986510
> 
> 赞同：2
> 
> 时间：2012-08-16T11:53:30.150
> 
> 标签：search, solr, lucene, full-text-search, phrase

如果索引字段是查询短语的一部分，是否可以找到文档？

在搜索“**棕狐**”或“**懒狗**”时，很容易找到“**快棕狐跳过懒狗**”。但是，如果我需要反之亦然怎么办？

 ****这是我的情况：我在文档中有一个短字段，例如“ **brown fox** ”或“ **lazy dog** ”，我希望通过搜索较长的短语（例如“ **Quick brown fox** ”或“ **jump over lazy dog** ”）来找到此文档。

注意：它应该是一个短语匹配，因此在查询中将所有术语设为可选是行不通的。像“ **brown dog** ”这样的查询不应该匹配。

你会如何在 Solr 中做到这一点？是否可以仅通过调整 Solr 来实现此目标，而无需在客户端解析和修改请求的短语？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T12:08:40.257

看看[ShingleFilterFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters/)。如果您仅将其应用于查询端，则可以实现您正在寻找的东西。****

# jquery - 将图像上传到网页并在屏幕上缩放/移动/旋转

> ID：11986515
> 
> 赞同：0
> 
> 时间：2012-08-16T11:53:56.070
> 
> 标签：jquery, image, upload

我需要做这样的事情已经有一段时间了，过去我使用 Flash 来实现这一点。

现在有什么最好的解决方案来做到这一点？我在想jQuery？我还不想使用 HTML5，因为我正在构建的网站是一个电子商务网站，因此必须满足所有浏览器的需求。

有人有什么好的建议吗？

谢谢，

克里斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:00:50.427

不幸的是，还没有办法在支持所有浏览器的 JavaScript 中做到这一点。[这](http://www.html5rocks.com/en/tutorials/file/xhr2/)是一个关于如何使用 JavaScript 上传文件的好教程。它不使用 jQuery，但它相当简单。[本教程](http://www.html5rocks.com/en/tutorials/file/dndfiles/)适用于拖放文件。使用这两个我设法创建了一个拖放上传脚本，但不幸的是并非所有浏览器都支持这个。Chrome 和 Firefox 会，IE 不会，我不确定其他的。简短的回答？没有 JS 唯一的**方法**可以为所有浏览器上传文件

# ruby-on-rails - 无法获取包含和连接以在 Ruby on Rails 中工作

> ID：11986518
> 
> 赞同：0
> 
> 时间：2012-08-16T11:54:06.577
> 
> 标签：ruby-on-rails, join

我正在构建一个 Rails 3.2.6 应用程序，在这个应用程序中我得到了用户、事件和签到。我也在使用 Postgres。

**用户**

```
has_many :events

has_many :checkins 
```

**活动**

```
belongs_to :user

has_many :checkins 
```

**签到**

```
belongs_to :user

belongs_to :event 
```

当我调用用户进行的所有签入（使用下面的代码）时，我还想获取签入所附加的事件的所有基本数据，但它不起作用。我只得到签到的数据，没有得到关于事件的任何信息。怎么了？

```
current_user.checkins.includes(:event) 
```

我也试过这个：

```
current_user.checkins.joins(:event) 
```

**更新**

我这样做是为了获取所有事件数据而不是签入数据。这是正确的做法吗？

```
checkins = current_user.checkins

@array = Array.new

@array = checkins.collect {|checkin| checkin.event}

render :json => {:results => @array} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:57:51.983

你没有做错任何事情`current_user.checkins.includes(:event)`，但你可能期待与 Rails 应该做的不同的事情。为了访问每个事件，您需要通过签入来完成。这是您可能会做的事情的一个例子：

```
checkins = current_user.checkins.includes(:event)
checkins.each do |checkin|
  puts "I'm at the event: #{checkin.event}"
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:10:18.520

听起来你想要的是一个有很多通过关系。将此添加到用户模型（在您声明签入关联之后）

```
has_many :checked_in_events, :through => :checkins, :source => :event 
```

然后你可以做

```
current_user.checked_in_events 
```

# extjs - 如何使用 Ext.example 中的文件

> ID：11986519
> 
> 赞同：2
> 
> 时间：2012-08-16T11:54:08.333
> 
> 标签：extjs, extjs4

我浏览[了文档](http://docs.sencha.com/ext-js/4-0/#!/api)以找到一个`Ext.example.msg`但是，我无法找到它。

根据这个例子，他们已经成功地使用了`Ext.example.msg`. 这怎么样 ？

我对 SO 有另一个与[此](https://stackoverflow.com/questions/11975911/set-path-in-ext-js-typeerror-ext-example-is-undefined#comment15976840_11975911)相关的问题。

**更新**

我正在尝试在我的应用程序中使用以下代码；

```
Ext.example.msg('Button Click', 'You clicked ta button'); 
```

当我执行代码时，我收到一条错误消息`TypeError: Ext.example is undefined`。

为了克服这个错误，我做了以下事情；

1.)`<script type="text/javascript" src="app/extjs/examples/shared/examples.js"/>`在我的 app.html 文件中添加

2.) 在我的 app.js 文件中添加以下内容

```
Ext.Loader.setPath('Ext.example', 'app/extjs/examples/shared');

Ext.require(['Ext.container.Viewport',
'Ext.example.*']
); 
```

以上方法均无效，我仍然收到相同的错误消息。

我的项目文件夹结构如下；

```
Project_Name
->app (folder)
--> app.html
--> app.js
--> extjs
  ---> examples
     ---->shared
         ----->example.js 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:40:49.210

当您在 index.html 中包含 js 脚本时，就像在 1 中所做的那样：

```
<script type="text/javascript" src="app/extjs/examples/shared/examples.js"/> 
```

您不再需要 loader 或要求它 - 您已明确包含它，并且很明显脚本内容将在范围内。

在我看来，您的路径不正确：没有，将文件夹作为应用程序的同级文件夹是`app/extjs`有意义的。`extjs`因此这应该有效：

```
<script type="text/javascript" src="extjs/examples/shared/examples.js"/> 
```

# c++ - 如何在 Linux 中将 SDL 窗口居中？

> ID：11986520
> 
> 赞同：4
> 
> 时间：2012-08-16T11:54:17.497
> 
> 标签：c++, linux, sdl

我试图找到一种方法来创建一个以屏幕为中心的 SDL 窗口，我发现了这段代码

```
#ifdef WIN32
#include <SDL_syswm.h>
SDL_SysWMinfo i;
SDL_VERSION( &i.version );
if ( SDL_GetWMInfo ( &i) ) {
HWND hwnd = i.window;
SetWindowPos( hwnd, HWND_TOP, x, y, width, height, flags );
}
#endif // WIN32 
```

但它仅适用于 Windows。我怎样才能在 Linux 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T14:53:18.377

[`putenv()`](http://sdl.beuc.net/sdl.wiki/SDL_envvars)在初始化 SDL 和创建窗口之前使用：

```
#include <SDL.h>
#include <SDL_getenv.h>

int main( int argc, char* argv[] )
{
    putenv("SDL_VIDEO_CENTERED=1"); 
    // init SDL, create window, main loop, etc.
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T11:57:30.610

[http://www.libsdl.org/docs/html/sdlenvvars.html](http://www.libsdl.org/docs/html/sdlenvvars.html)

> SDL_VIDEO_CENTERED
> 
> 如果设置，则在 X11 窗口模式下运行或使用 Cyber​​Grafix 驱动程序时尝试将 SDL 窗口居中。

可以帮助你

# asp.net - .net 本地化消息在 xml 配置文件而不是资源中

> ID：11986524
> 
> 赞同：0
> 
> 时间：2012-08-16T11:54:23.073
> 
> 标签：asp.net, .net, xml, resources

如果为了灵活性而使用 xml 配置文件（如 castle.windsors 组件 xmls）来存储我的本地化字符串和消息而不是资源文件，我会徘徊。我可能需要经常更改消息，而频繁的构建让我感到害怕。作为文档的大小，我可以说我将根据语言将数千个字符串存储在多个 xml 文件中。这样做是一个好习惯吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:08:45.353

您可以实现 MVP RIck Strahl 提供的这个全球化系统，它应该很好地满足您的需求并同时提供一个可爱的界面 - 还使用数据库作为后备存储而不是 XML 文件，这应该更容易在后备方面进行跟踪起来等等。

在 NuGet 上 [https://nuget.org/packages/Westwind.Globalization](https://nuget.org/packages/Westwind.Globalization)

这是项目页面和直接来自它的摘要（请参阅数据驱动的本地化资源提供程序部分）。 [http://www.west-wind.com/westwindwebtoolkit/](http://www.west-wind.com/westwindwebtoolkit/)

# java - 调用 interrupt() 时线程不抛出 InterruptedException

> ID：11986529
> 
> 赞同：1
> 
> 时间：2012-08-16T11:54:34.293
> 
> 标签：java, multithreading, interrupt

我正在开发一个通过网络读取和处理数据的应用程序。在测试程序的连接/断开逻辑时，我注意到我的消费者线程在达到关闭条件时没有关闭。下面是消费者类的剥离版本。

```
import java.io.InputStream;

public class Consumer implements Runnable
{
   private final InputStream input;
   public Consumer(InputStream input)
   {
      this.input = input;
   }
   @Override
   public void run()
   {      
      byte readBuffer[];
      readBuffer = new byte[1];
      int goodData;

      try
      {
         while(input.available() > 0)
         {
            goodData = input.read(readBuffer);
            while (goodData > 0 )
            {
               System.out.println(readBuffer[0]);
               if ( readBuffer[0] == 27 )
               {
                  System.out.println("Consumer: found closing byte and closing thread "+Thread.currentThread().getName());
                  //this is the last packet, so interupt thread to close
              Thread.currentThread().interrupt();
              //return;
              //Thread.currentThread().stop(new InterruptedException("Attempting to close"));
               }
               goodData = input.read(readBuffer);
            }
         }
      }
      catch(Exception e)
      {
         System.out.println("closing "+Thread.currentThread().getName() +" because of an exception "+e.getClass());
         return;
      }
      System.out.println("closing "+Thread.currentThread().getName());
   }
} 
```

我创建了一个演示该问题的虚拟主类。

```
public class ExampleOfInterruptNotWorking
{
   public static void main(String[] args)
   {
      byte[] bytesToWrite = new byte[]{0, 1, 2,3,4,5,6,65,23,65,21,54,13,54,1,76};
      Consumer C;
      Thread ConsumerThread;
      PipedInputStream PIS = null;
      PipedOutputStream POS = null;
      try
      {
         PIS = new PipedInputStream();
         POS = new PipedOutputStream(PIS);
         C = new Consumer(PIS);
         ConsumerThread = new Thread(C);

         ConsumerThread.start();

         POS.write(bytesToWrite);
         POS.write(bytesToWrite);
         bytesToWrite[1] = 27;
         POS.write(bytesToWrite);

         ConsumerThread.join();

      }
      catch(Exception e)
      {
         System.err.println("Unexpected exception in main");
         e.printStackTrace(System.err);
      }
      finally
      {
         try
         {
            PIS.close();
            POS.close();
         }
         catch(Exception ex)
         {
        //shouldn't happen in example
         }
         System.out.println("exiting main");
      }
   }
} 
```

当您按照编写的方式运行此代码时，消费者会检测到中断，但不会停止执行，直到管道为空（不是我想要的）。只是为了尝试，我改为执行我想要的 Thread.stop() 调用，但我不想将其留在生产代码中。我意识到我可以使用一个简单的 return 语句，但这不是线程可以退出的唯一点，我希望有一些通用的退出代码来清理资源。所以，我的问题是，为什么消费者线程没有被中断？有没有让我能够拥有通用退出代码的好方法？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T12:04:07.100

当线程处于睡眠状态、等待连接等（基本上是任何可中断的阻塞调用）并调用 interrupt() 时，会抛出 InterruptedExceptions。

如果您的线程正在运行，则将设置线程中断标志但不会抛出异常，您应该使用 . 检查标志`myThread.isInterrupted()`。

您可以在此处找到更多信息：http: [//www.ibm.com/developerworks/java/library/j-jtp05236/index.html](http://www.ibm.com/developerworks/java/library/j-jtp05236/index.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T12:02:28.290

您希望抛出哪种方法`InterruptedException`？[`Thread.interrupt()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#interrupt%28%29)不是扔它，也不是你的任何方法。那么你期望这个*检查*异常应该来自哪里？

您的代码不起作用，因为`interrupt()`几乎没有`interrupted`在线程上设置标志。您必须使用 . 显式检查该标志[`Thread.isInterrupted()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#isInterrupted%28%29)。`InterruptedException`仅当相关线程当时正在休眠或阻塞时才抛出。因此，如果您中断**不同的**线程并且该线程正在休眠，`sleep()`则会抛出`InterruptedException`.

现在详细解决您的问题。**例外是针对特殊情况**。您的线程完成处理的事实并非例外，这是您绝对期望的。出于同样的原因，在文件末尾读取文件不会引发异常 - 文件结束是您绝对应该期待的 - 所有文件都有结束。此外，您不应该使用异常来控制程序流程。

在您的情况下，要么使用`return`语句（`run()`返回时，线程死亡），要么以其他方式中断循环。您发布了太多无法分析的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T09:51:01.347

您可以简单地使用 break 来标记

```
OUTER:
     while(input.available() > 0)
     {
        goodData = input.read(readBuffer);
        while (goodData > 0 )
        {
           System.out.println(readBuffer[0]);
           if ( readBuffer[0] == 27 )
           {
              System.out.println("Consumer: found closing byte and closing thread "+Thread.currentThread().getName());
              //this is the last packet, so interupt thread to close
          //Thread.currentThread().interrupt();
          break OUTER;
          //return;
          //Thread.currentThread().stop(new InterruptedException("Attempting to close"));
           }
           goodData = input.read(readBuffer);
        }
     } 
```

# scala - scala案例模式是一流的吗？

> ID：11986531
> 
> 赞同：8
> 
> 时间：2012-08-16T11:54:37.167
> 
> 标签：scala, pattern-matching, first-class

是否可以将案例模式作为参数传递给其他函数？像这样的东西：

```
def foo(pattern: someMagicType) {
  x match {
    pattern => println("match")
  }
}

def bar() {
  foo(case List(a, b, c))
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T12:20:20.997

所以你想将模式匹配块传递给另一个函数？这可以用`PartialFunction`s 来完成，如下例所示：

```
def foo(f:PartialFunction[String, Int]) = {
  f("")
}

foo {
  case "" => 0
  case s => s.toInt
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T15:49:30.100

我认为 Kim Stebel 的第一个答案接近你想要的。“模式匹配本身”在 Scala 中不是孤立的实体。匹配可以*定义为*a`Function1`或`PartialFunction`。

```
def foo[A, B](x: A)(pattern: PartialFunction[A, B]): Unit =
  if(pattern.isDefinedAt(x)) println("match")

def bar(list: List[String]): Unit =
  foo(list){ case List("a", "b", "c") => } 
```

测试：

```
bar(Nil)
bar(List("a", "b", "c")) 
```

或者使用组合物：

```
def foo[A, B](x: A)(pattern: PartialFunction[A, B]): Unit = {
  val y = pattern andThen { _ => println("match")}
  if (y.isDefinedAt(x)) y(x)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T14:45:51.543

您的魔法类型可以写成具有 unapply 方法的结构类型。根据您需要的提取器类型，您将需要不同类型的`unapply`or `unapplySeq`。下面是一个简单的例子。

```
def foo(x:Int, Pattern: { def unapply(x:Int):Boolean }) {
  x match {
    case Pattern => println("match")
  }
}

foo(1, new { def unapply(x:Int) = x > 0 }) 
```

这就是列表的处理方式：

```
foo(List(1,2,3), new { def unapplySeq(x:List[Int]):Option[List[Int]] = if (x.size >= 3) Some(x) else None })

def foo(x:List[Int], Pattern: { def unapplySeq(x:List[Int]):Option[List[Int]] }) {
  x match {
    case Pattern(a,b,c) => println("match: " + a + b + c)
  }
} 
```

# css - SyntaxError: 在元素列表 ([object Object]) 之后缺少 ]

> ID：11986532
> 
> 赞同：0
> 
> 时间：2012-08-16T11:54:38.823
> 
> 标签：css, json, eval

我从 PHP 返回 JSON，它工作正常，但是当数据为空时，我填写默认 JSON 数据，用于在 jQuery 选定元素上应用 .css，如下所示：

```
db.data = { "blocks" :  {"css" : {"background-color" : "purple" }}}; 
```

（编辑：我的数据库中的 css 实际上包含斜杠并且可以与 eval() 一起使用`"css":"{ \"background-color\" : \"grey\" }`：）

如果我 console.log 它，FF 会将它显示为一个对象（全是绿色和红色，并且在 firebug 中格式化和可点击/可扩展：

```
Object { background-color= "purple" } 
```

`eval()`在将其传递给 css 之前，我将其传递给它。我尝试`$.evalJSON`使用 jQuery JSON 插件，但它会给出：

```
SyntaxError: JSON.parse: unexpected character 
```

编辑：我在没有 eval() 的情况下尝试过，但会抛出相同的错误，但当我使用带有斜杠的 css 时不会

我尝试在某处手动添加一个`]`，但显然不起作用，如果我添加两个，它将创建一个我不想要的数组。

我将 CSS 应用于这样的元素：

```
DOMID = $('#target');
var CSS = eval(" (" +db.data.blocks.css+") ");
this.DOMID.css(CSS); 
```

尝试不带`" ("`, 不带空格, `"("`.

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:59:22.300

您发布的代码永远不会起作用，因为它被误导了。不需要`eval`任何东西，即使`db.data.blocks.css`对字符串进行强制转换（为了放入括号）也会给你返回完全错误的值。

相反，你应该简单地写

```
this.DOMID.css(db.data.blocks.css); 
```

# sql - 在分层查询中查找“最深”的孩子

> ID：11986533
> 
> 赞同：3
> 
> 时间：2012-08-16T11:54:39.057
> 
> 标签：sql, oracle, oracle11g, connect-by, transitive-closure-table

我需要一些帮助来查询分层数据。这是一个简单的表，其中对根条目的`parent_id`引用`id`和可能为空。

```
 create table edition (
      id           NUMBER(20),
      parent_id    NUMBER(20)
  ); 
```

对于表中的每条记录，我需要找到具有最大 id 的最深的孩子。如果记录没有孩子，则应返回其自己的 id。我自己尝试过，但使用`START WITH A.id = B.id`where A 和 B 是子查询失败了，看起来 Oracle 不允许这样的连接。

这是示例数据：

```
 id      parent_id
   ----------------------
      1        NULL
      2           1
      3           1
      4           1
      5           4
      6           5
      7           5 
```

和样本结果

```
 id      result
   ----------------------
      1           7
      2           2
      3           3
      4           7
      5           7
      6           6
      7           7 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T12:26:04.970

我相信你想试试

```
create table tq84_edition (
  id        number primary key,
  parent_id number references tq84_edition
);

insert into tq84_edition values (  1, null);
insert into tq84_edition values (  2,    1);
insert into tq84_edition values (  3,    1);
insert into tq84_edition values (  4,    1);
insert into tq84_edition values (  5,    4);
insert into tq84_edition values (  6,    5);
insert into tq84_edition values (  7,    5);

with x (root, id, parent_id, lvl) as (
               select id    root,
                      id,
                      parent_id,
                      1 lvl
                from  tq84_edition
        UNION ALL
               select x.root  root,
                      tq84_edition.id,
                      tq84_edition.parent_id,
                      x.lvl + 1 lvl
                 from x,
                      tq84_edition
                where x.id = tq84_edition.parent_id
)
select  root, max(id) keep (dense_rank last order by lvl, id)
  from x
 group by root; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T12:57:02.867

我能想到的另一种方法，在其他 RDBMS 上移植更容易：[http ://www.sqlfiddle.com/#!4/da0a3/19](http://www.sqlfiddle.com/#!4/da0a3/19)

```
with parent(root_node, child_of, parent_id, depth)  as
(
  select id, id, parent_id, 1
  from edition
  union all
  select p.root_node, e.id, e.parent_id, p.depth + 1
  from edition e
  join parent p on p.child_of = e.parent_id
)
select root_node, max(child_of)
from parent
where (root_node,depth) in
     (select root_node,max(depth) from parent group by root_node)
group by root_node
order by root_node 
```

输出：

```
| ROOT_NODE | MAX(CHILD_OF) |
-----------------------------
|         1 |             7 |
|         2 |             2 |
|         3 |             3 |
|         4 |             7 |
|         5 |             7 |
|         6 |             6 |
|         7 |             7 | 
```

现在，我喜欢 Oracle（也喜欢[http://sqlfiddle.com](http://sqlfiddle.com)），它非常简洁。现在我知道 KEEP DENSE_RANK 中 MIN 和 MAX 的用途。而在此之前，我没有看到任何[在 KEEP DENSE_RANK 中明确指定 MIN/MAX 的](https://stackoverflow.com/questions/10545098/getting-first-line-of-a-left-outer-join/10545403#10545403)实用程序。现在我知道它有一个实用程序，如果在深度上有一些**联系**，你可以通过使用 MIN 和 MAX 来查看谁是第一个和最后一个。

例如[http://www.sqlfiddle.com/#!4/da0a3/24](http://www.sqlfiddle.com/#!4/da0a3/24)

```
with parent(root_node, child_of, parent_id, depth)  as
(
  select id, id, parent_id, 1
  from edition
  union all
  select p.root_node, e.id, e.parent_id, p.depth + 1
  from edition e
  join parent p on p.child_of = e.parent_id
)
select root_node, 

  min(child_of) keep(dense_rank last order by depth) as first_in_deepest,
  max(child_of) keep(dense_rank last order by depth) as last_in_deepest

from parent
group by root_node;

| ROOT_NODE | FIRST_IN_DEEPEST | LAST_IN_DEEPEST |
--------------------------------------------------
|         1 |                6 |               7 |
|         2 |                2 |               2 |
|         3 |                3 |               3 |
|         4 |                6 |               7 |
|         5 |                6 |               7 |
|         6 |                6 |               6 |
|         7 |                7 |               7 | 
```

# ios - 使用 Event Kit 为日历添加时间

> ID：11986535
> 
> 赞同：0
> 
> 时间：2012-08-16T11:54:41.217
> 
> 标签：ios, xcode4

我需要使用 EventKit 在特定日期和时间添加一些事件。例如，我想添加 2012 年 9 月 2 日下午 1:00 的事件。

如果哪位知道的解释一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:12:11.253

要指定特定日期，您应该使用日期组件：

```
NSCalendar *greg = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *comps = [[NSDateComponents alloc] init];
comps.day = 2;
comps.month = 9;
comps.year = 2012;
comps.hour = 13;

NSDate *eventDate = [greg dateFromComponents:comps]; 
```

要通过 EventKit 添加事件，请使用`eventWithEventStore:`并修改属性`startDate`。

# iphone - 将字符串文本字段的值分配给 char*

> ID：11986540
> 
> 赞同：0
> 
> 时间：2012-08-16T11:55:14.010
> 
> 标签：iphone, objective-c, c, char

在我的项目中，如果我这样做

```
char *string =@"hello"; 
```

它工作正常。但是当我在 a 中输入一些内容`UITextField`并将其分配给 时`char`，它没有显示正确的值。

即使我声明

```
 NSString *string ;
 self.stringVariable = mobileNumberTextField.text;
 char * mobile = string;
 char *c[]= {Enc,Mac,Mobile}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:59:16.480

尝试使用转换：

当您从文本字段获取字符串值到您的字符时：

```
const char *myCharString = [your_textField.text UTF8String]; 
```

并根据需要使用该字符。

反之亦然，当您想将该字符显示回文本字段时：

```
[your_textField setText:[NSString stringWithUTF8String:myCharString]]; 
```

就这样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:07:13.437

NSString 是一个 Objective-C 对象，而 char 指针只是一个普通的 C 指针类型。您不能互换使用它们，否则您会遇到运行时错误（很可能是段错误）。您必须从 NSString 创建一个 char 指针（反之亦然）；

```
const char *str = "Something as a C string";
NSString *nsStr = [NSString stringWithCStrint:str encoding:NSUTF8StringEncoding]; // or ASCII 
```

# regex - 使用正则表达式拆分给定字符串

> ID：11986546
> 
> 赞同：-8
> 
> 时间：2012-08-16T11:55:53.160
> 
> 标签：regex

我需要拆分以下字符串

```
Carlos Molina;#1294;#Mary Balicki;#354;#Pascal Saura;#1211;#Niko 
```

成以下格式：

```
Carlos Molina
Mary Balicki
Pascal Saura
Niko 
```

请提供正确的正则表达式来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:00:40.647

```
/([^#;\d]+)/g 
```

可以用于这个例子

工作示例：[http ://gskinner.com/RegExr/?31rph](http://gskinner.com/RegExr/?31rph)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:05:08.243

如果您想允许数字在文本中（例如“hello2world”），请使用：

```
/(?:^|(?<=#))(?!\d+(?=;|$)).*?(?=;|$)/g 
```

[在这里](http://regexr.com?31rqu)测试一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T12:05:41.803

使用这个正则表达式`(?<=^|#)([^#]+?)(?=(;#\d+)|($))`

# sql - 如何正确检查 SQL Server 2005 中是否存在临时表？

> ID：11986552
> 
> 赞同：33
> 
> 时间：2012-08-16T11:56:12.363
> 
> 标签：sql, sql-server, sql-server-2005

我有一个查询，我从表中插入一些值：

```
SELECT ID, NAME INTO #tmpTable1
FROM TableOriginal 
```

第一次执行没问题，如果我在 MSSMS（Microsoft Sql Server Management Studio）中按 F5（运行），就会出现错误：

> *消息 2714，级别 16，状态 6，第 4 行
> 数据库中已经有一个名为“#tmpTable1”的对象。*

好的。我决定在插入数据之前检查`TableOriginal`一下`#tmpTable1`：

```
IF OBJECT_ID('tempdb.#tmpTable1') IS NOT NULL  
  DROP TABLE #tmpTable1 
```

不起作用，错误再次显示如上。

我在`tempdb`数据库中看到以下临时表名：

```
dbo.#tmpTable1__________________0000007 
```

为什么？每次创建临时表（使用第一个查询）时，表名会在 MSSMS 中自动生成？

如何删除现有的临时表以创建具有新值的新表？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-08-16T11:57:58.853

您非常接近 - 您需要在支票中使用两个点：

```
IF OBJECT_ID('tempdb..#tmpTable1') IS NOT NULL  
                    ** 
                    |
                  use two dots here! 
```

基本上，这就是说：*签入`tempDB`并且我不在乎表在什么模式中*

正如乔正确地说：这不是 100% 正确的：它不会检查每个模式 - 它只会检查默认所有者的模式 - 通常`dbo`。所以这也可以：

```
IF OBJECT_ID('tempdb.dbo.#tmpTable1') IS NOT NULL 
```

如果您碰巧在默认所有者以外的模式中创建对象，那么您需要明确指定您所指的模式。但是其中的临时表`tempDB`确实是在`dbo`模式中创建的。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-16T12:43:30.857

这不是问题的答案，只是想在引用#temp 表时临时发布关于放置`.dbo.`与放置的位的回复。`..`

我找不到让#temp 表实际上归dbo 以外的任何人所有的方法。试试看：

```
CREATE SCHEMA blat;
GO

CREATE TABLE blat.#pound(id INT);
GO

SELECT 
   OBJECT_ID('tempdb..#pound'), 
   OBJECT_ID('tempdb.dbo.#pound'), 
   OBJECT_ID('tempdb.blat.#pound');

USE tempdb;
GO

SELECT [object_id], SCHEMA_NAME([schema_id]) 
  FROM sys.objects 
  WHERE name LIKE '#pound%'; 
```

结果：

```
-1222354987    -1222354987    -1222354987

-1222354987    dbo 
```

这是在 SQL Server 2012 上。我在 SQL Server 2005 上进行了测试，唯一的区别是 object_id 值为正。我也尝试过：

*   tempdb 中实际存在的架构称为`blat`
*   `blat.#pound`由默认架构为的用户创建的表`blat`
*   以上两者

在所有三种情况下，都获得了与上述相同的结果。

您也不能在不同的架构中创建两个具有相同名称的 #temp 表：

```
CREATE TABLE blat.#flab(id INT);
CREATE TABLE dbo.#flab(id INT); 
```

结果：

> 消息 2714，级别 16，状态 6
> 数据库中已经有一个名为“#flab”的对象。

这不是解析问题（就像许多#temp 表问题一样）；您可以分别运行这两个语句并收到相同的错误。

因此，这是一种冗长的说法，在解析#temp 表名时，您永远不需要指定架构，它将始终在下面创建`dbo`并且解析至少在下面`OBJECT_ID`将忽略您指定的架构（`OBJECT_SCHEMA_NAME`也总是在#tempdb 的上下文中运行时返回`dbo`，但不在任何其他数据库中）。如果您尝试`schema_id`在`tempdb.sys.objects`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-11T09:23:57.243

```
CREATE TABLE #temptable (col1 int);
GO
INSERT INTO #temptable
VALUES (10);
GO
SELECT * FROM #temptable;
GO
IF OBJECT_ID(N'tempdb..#temptable', N'U') IS NOT NULL 
DROP TABLE #temptable;
GO
--Test the drop.
SELECT * FROM #temptable; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-16T12:03:59.050

只要创建它的连接打开，以这种方式定义的临时表就会存在。通常不需要检查它是否存在或手动删除它，因为你可以完全控制你的连接，但如果你真的需要检查它，你可以检查 tempdb.dbo.#tempTable。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-02-02T20:58:22.930

如果 OBJECT_ID('tempdb.dbo.#tmpTable1%') 不为 NULL :)

# php - 遍历一个数组，然后遍历另一个给出奇怪的值

> ID：11986572
> 
> 赞同：1
> 
> 时间：2012-08-16T11:57:36.870
> 
> 标签：php, function, foreach

我将两个数组传递给一个函数，然后我想遍历第一个数组并对照第二个数组检查一些值。问题是第二个数组给出了奇怪的值并破坏了逻辑。请有人指出我在哪里愚蠢吗？

功能

```
function completion($check, $values){

$num = count($values);
$i=0;
foreach($values as $a){
    foreach($check as $b){
       if($b[$a] == ''){
          return '<span class="w"><i>incomplete</i></span>';
          break;
       }
    }

    $i++;
}
if ($i == $num);
   return;

}

$values = array('short_bio', 'industry_sector', 'profile_status', 'country', 'locations', 'noe');

$check = ( [row] => 1 [user_id] => 2 [company_name] => mylittlefish [industry_sector] => Automotive / Aerospace [job_title] => Director [profile_status] => [first_name] => Joe [last_name] => Hodgson [package] => [sector] => Catering [recruitment_status] => Keeping an ear to the ground [country] => UK [locations] => Doncaster [noe] => 5 [user_recruitment_status] => [user_endorsements] => [short_bio] => test [previous_job_title] => [summary] => [profile] => [cover] => ) 
```

如果我回应`$b[$a]`我会得到这样的东西：

> 612mADJHCKUD5t12mADJHCKUD5t12mADJHCKUD5t12mADJHCKUD5t12mADJHCKUD5t12mADJHCKUD5t6

希望你能帮忙

乔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:04:27.577

我认为你的循环应该是：

```
foreach($values as $a){
       if(!isset($check[$a]) || empty($check[$a])) {
          return '<span class="w"><i>incomplete</i></span>';
          break;
       }
    $i++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:16:56.837

```
function completion($check, $values){
    foreach($values as $a){
       foreach($check as $b=>$value){
           if($b == $a && $value == ''){
               return '<span class="w"><i>incomplete</i></span>';                   
           }
       }

    }
} 
```

或者

```
function completion($check, $values){
    foreach($values as $a){
        if (array_key_exists($a,$check) && $check[$a] == '') return '<span class="w"><i>incomplete</i></span>'; 
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T12:21:35.177

1.  CompanyInfo 数组未定义
2.  $check 数组缺少逗号且字符串值未包含在引号中

    ```
    $companyInfos = array();
    $companyInfo[0] = array( "row" => 1, 
                     "short_bio" => "Painter", "status" => "Single");

    $companyInfo[0] = array( "row" => 2, 
                     "short_bio" => "Designer", "status" => "Married");

     $values = array('short_bio', 'industry_sector',
                'profile_status', 'country', 'locations', 'note');

    foreach($companyInfos as $companyInfo)
    foreach($values as $val)
    {
        if($companyInfo[$val] =='')
         echo '<span class="w"><i>incomplete</i></span>';

    } 
    ```

# c# - 通过 DOTCMIS 连接到 Sharepoint 2010：异常身份验证提供程序

> ID：11986573
> 
> 赞同：1
> 
> 时间：2012-08-16T11:57:39.740
> 
> 标签：c#, apache, sharepoint, cmis, dotcmis

我正在尝试使用 C# 中的 DOTCMIS 连接到 sharepoint 2010。以与这个问题非常相似的方式：

[通过 CMIS (dotCMIS) 连接到 SP2010：异常未授权](https://stackoverflow.com/questions/10941809/connecting-via-cmis-dotcmis-to-sp2010-exception-unauthorised)

（但是，我的代码在 MSCRM 2011 自定义工作流活动中运行）

我的代码是：

```
 var parameters = new Dictionary<string, string>();

        parameters[SessionParameter.BindingType] = BindingType.AtomPub;
        parameters[SessionParameter.AtomPubUrl] = "http://mySPServer/sites/scans/_vti_bin/cmis/rest/MyRepositoryIDGUID?getRepositoryInfo";
        parameters[SessionParameter.User] = "MyUser";
        parameters[SessionParameter.Password] = "MyPassword";
        parameters[SessionParameter.AuthenticationProviderClass] = "DotCMIS.Binding.NtlmAuthenticationProvider";

        var sessionFactory = SessionFactory.NewInstance();
        return sessionFactory.GetRepositories(parameters)[0].CreateSession(); 
```

**但是，每当我运行它时，我目前都会遇到以下异常：**

Sif 一般错误：DotCMIS.Exceptions.CmisRuntimeException：无法加载身份验证提供程序：值不能为空。参数名称：类型---> System.ArgumentNullException：值不能为空。`2 sessionParameters, AbstractAuthenticationProvider authenticationProvider) --- End of inner exception stack trace --- at DotCMIS.Binding.Impl.CmisBinding..ctor(IDictionary`参数名称：DotCMIS.Binding.Impl.CmisBinding..ctor(IDictionary 2 sessionParameters, AbstractAuthenticationProvider authenticationProvider) 处的 System.Activator.CreateInstance(Type type, Boolean nonPublic) 处的类型DotCMIS.Client.Impl.CmisBindingHelper.CreateAtomPubBinding(IDictionary`2 parameters, AbstractAuthenticationProvider authenticationProvider) at DotCMIS.Client.Impl.SessionFactory.GetRepositories(IDictionary`2个参数，IObjectFactory objectFactory, AbstractAuthenticationProvider authenticationProvider, ICache cache) at TPR.SIF.WorkflowActivity.SessionService.CreateNewSession(String dmWebServiceUrl, String userName, String password) at TPR.SIF.WorkflowActivity.SifService.SetUpServices(CodeActivityContext codeActivityContext) at TPR.SIF .WorkflowActivity.SifService.Execute(CodeActivityContext codeActivityContext)

错误发生在以下行：

```
 sessionFactory.GetRepositories(parameters)[0].CreateSession(); 
```

在 CMIS 库中调用此行

```
 if (sessionParameters.TryGetValue(SessionParameter.AuthenticationProviderClass, out authenticationProviderClass))
            {
                try
                {
                    Type authProvType = Type.GetType(authenticationProviderClass);
                     authenticationProvider = (AbstractAuthenticationProvider)Activator.CreateInstance(authProvType); 
```

有谁知道为什么不能创建**“DotCMIS.Binding.NtlmAuthenticationProvider” ？**

非常感谢。

肖恩。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:23:55.607

NTLM 支持将随 DotCMIS 0.5 一起发布。如果您使用的是 DotCMIS 0.4，它就无法工作。

# r - 将 R 对象（代码）保存在 .R 文件中（R 基因编程）

> ID：11986574
> 
> 赞同：2
> 
> 时间：2012-08-16T11:57:43.213
> 
> 标签：r

我正在使用 R 与 RGP 包进行基因编程。环境创造了解决问题的功能。我想将这些函数保存在他们自己的 .R 源文件中。我无法为我的生活弄清楚如何。我尝试过的一种方法是：

```
bf_str = print(bf)
save(bf_str,file="MyBestFunction.R")) 
```

bf 只是最佳拟合函数。我也试过这样：

```
save(bf,file="MyBestFunction.R")) 
```

输出的文件非常奇怪。它只是一群疯狂的角色

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T12:29:03.920

你可以用`dump`这个。它将保存分配和定义，以便您`source`以后可以使用。

```
R> f <- function(x) x*2
R> dump("f")
R> rm(f)
R> source("dumpdata.R")
R> f
function(x) x*2 
```

更新以在另一个答案的评论中响应 OP 的附加请求：

您可以向函数添加属性以存储您想要的任何内容。您可以添加一个`score`属性：

```
R> f <- function(x) x*2
R> attr(f, 'score') <- 0.876
R> dump("f")
R> rm(f)
R> source("dumpdata.R")
R> f
function(x) x*2
attr(,"score")
[1] 0.876
R> readLines("dumpdata.R")
[1] "f <-"                                     
[2] "structure(function(x) x*2, score = 0.876)" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-16T12:09:53.097

我理解您的问题的方式是，您希望获得函数的文本表示并将其保存到文件中。为此，您可以使用该`sink`函数转移 R 控制台的输出。

```
sink(file="MyBestFunction.R")
bf_str
sink() 
```

然后，您可以`source`通过操作系统使用 R 或其他程序打开文件或打开它。

**编辑：**

要将注释附加到文件末尾，您可以执行以下操作：

```
theScore <- .876

sink(file = "MyBestFunction.R", append = TRUE)
cat("# This was a great function with a score of", theScore, "\r\n")
sink() 
```

根据您的设置，您可能需要进行更改`\r\n`以反映适当的行尾字符。这至少应该在 DOS/Windows 上工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-17T06:42:03.693

虽然这个问题已经得到解答，但我应该提到它`dump`有一些陷阱，IMO 你最好通过 . 以二进制格式保存你的函数`save`。

特别是`dump`只保存函数代码本身，*不*保存任何关联的环境。这在这里可能不是问题，但可能会在某些时候咬你。例如，假设我们有

```
e <- new.env()
e$x <- 10
f <- function(y) y + x
environment(f) <- e 
```

然后`dump("f")`只会保存 的函数定义`f`，而不是它的环境。如果你再`source`生成的文件，`f`将不再正常工作。`save`如果您使用and ，则不会发生这种情况`load`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-16T12:05:11.270

您可以通过参数传递`save`要保存的对象的名称`list`

```
save(list="bf_str", file="MyBestFunction.R") 
```

或者，您可以使用 dput

```
dput(bf_str, file='MyFun.R') 
```

并`dget`检索

```
bf_str <- dget("MyFun.R") 
```

# wpf - 列表框像 windows phone 一样滚动

> ID：11986577
> 
> 赞同：0
> 
> 时间：2012-08-16T11:57:49.117
> 
> 标签：wpf, listbox, scroll, listboxitem, smooth-scrolling

我尝试使用（在 WPF 应用程序中）列表框，就像我在 Windows Phone 7.1 应用程序中使用的那样。

在我的 Wp7 应用程序中，滚动很流畅，我可以按住一个列表框并滚动它！

WPF可以做到吗？如果是，如何？例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:02:20.020

看一下[SurfaceListBox](http://msdn.microsoft.com/en-us/library/microsoft.surface.presentation.controls.surfacelistbox.aspx)类。它是在 Windows 7 上运行的[Microsoft Surface 2.0 SDK的一部分。](http://msdn.microsoft.com/en-us/library/ff727815)

# sql - 右连接有效，内连接有效，左连接无效？为什么？

> ID：11986579
> 
> 赞同：0
> 
> 时间：2012-08-16T11:57:52.127
> 
> 标签：sql, ms-access, join

我有一些 SQL 加入 Access 中的多个表。尝试运行它时，“JOIN”中出现错误（特别是“不支持 JOIN 表达式”）。我相信我已经将问题缩小到一个加入，但为什么它不起作用对我来说没有任何意义。因此，原始的完整 SQL FROM 子句是：

```
FROM  (
     (
      Customers RIGHT JOIN 
            (
            Sales LEFT JOIN SaleType ON Sales.SalesForID = SaleType.SalesForID
            ) 
      ON Customers.CustomerID = Sales.CustomerID
     ) LEFT JOIN 
          (
           StudentContracts LEFT JOIN
               (
               StudentsClasses INNER JOIN Classes ON StudentsClasses.ClassID = Classes.ClassID
                )
            ON StudentContracts.CustomerID = StudentsClasses.CustomerID
           ) 
       ON Customers.CustomerID = StudentContracts.CustomerID   
 ) 
```

我认为查询失败的部分是在这个“LEFT”连接上：

```
(
  StudentContracts LEFT JOIN
          (
          StudentsClasses INNER JOIN Classes ON StudentsClasses.ClassID = Classes.ClassID
          )
   ON StudentContracts.CustomerID = StudentsClasses.CustomerID
) 
```

我尝试将“LEFT”切换为“INNER”并且它有效。我已将其切换为“RIGHT”并且可以正常工作。为什么它不适用于“LEFT”加入但适用于其他加入？我需要的是一个结果，显示连接到 StudentContracts 的连接“Classes”表中的记录，以及在 Classes 表中没有记录的 StudentContracts。根据这篇文章的答案：[SQL Server 中左连接和右连接之间的区别](https://stackoverflow.com/questions/4715677/difference-between-left-join-and-right-join-in-sql-server)我相当肯定我想要一个左连接，这应该可以工作。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T12:41:46.443

你有太多的括号，事情的顺序不正确。在 MS Access 的查询设计窗口中构建这个是最简单的，然后一切都会为您生成，您可以切换到 SQL 视图查看。

例如，上面的内容应该是这样的：

```
SELECT * 
FROM (Customers 
RIGHT JOIN Sales 
ON Customers.CustomerID = Sales.CustomerID)
LEFT JOIN SaleType 
ON Sales.SalesForID = SaleType.SalesForID 
```

这是避免 RIGHT JOIN 的惯例，因为它们可以很容易地写成 LEFT JOIN，所以它避免了任何混淆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:46:07.953

我想我应该回答我自己的问题，因为这两个建议并不是真正的答案，而是关于故障排除的建议（有效），我现在找到了答案。

这确实是先前定义的连接的问题。StudentsClasses 在 DB 关系中以多对一的方式加入到 Classes 中。这就是整个数据库中的大多数连接将这两个表视为链接的方式。只有在这种情况下，我希望它们的连接方式略有不同。当我的 SQL 要求进行内连接时，访问程序似乎混淆了我的意思（内连接或外连接）。通过将其更改为适当的外连接，程序开始运行良好。

虽然内部联接确实是我想要的，但在这种情况下，这并不重要，因为具有额外记录的一侧将被其他联接减少，因此无论如何都不会在 Class 表中产生任何没有匹配的记录（至少据我所知）。

所以，非常感谢[Remou](https://stackoverflow.com/users/2548/remou)和[Matt Donnan](https://stackoverflow.com/users/1066861/matt-donnan)为我指明了正确的方向！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T14:49:32.413

访问对括号连接很挑剔。通常，它希望看到这样写的查询：

```
FROM (((((Sales
LEFT JOIN Customers ON Sales.CustomerID = Customers.CustomerID)
LEFT JOIN SaleType ON Sales.SalesForID = SaleType.SalesForID)
LEFT JOIN StudentContracts ON Customers.CustomerID = StudentContracts.CustomerID)
LEFT JOIN StudentsClasses ON StudentContracts.CustomerID = StudentsClasses.CustomerID)
LEFT JOIN Classes ON StudentsClasses = Classes.ClassID) 
```

在不知道表的确切结构的情况下，很难知道这是否会为您提供所需的输出；但是我希望类似的东西会起作用。你说：

> 我想要一个结果，显示连接到 StudentContracts 的连接“Classes”表中的记录，但也显示没有 Classes 表中记录的 StudentContracts

在我看来，这是一种令人费解的说法`StudentContracts LEFT JOIN Classes`

（毫无疑问，如果我错了，有人会纠正我。）

# iphone - 可读性 API 和 RestKit - 响应状态码 500

> ID：11986589
> 
> 赞同：1
> 
> 时间：2012-08-16T11:58:29.500
> 
> 标签：iphone, ios, cocoa-touch, oauth, restkit

您好我正在尝试在我的应用程序中实现[可读性 API](http://www.readability.com/developers/api "可读性 API") ，但我得到的只是状态码 500 - “未知问题”。我的响应正文是一个 html 页面，上面写着“页面不可用”。

我正在使用 RestKit。

这是我尝试连接的方式：

```
-(void)sendRequests
{
    NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:
                            @"myconsumerkey", @"oauth_consumer_key",
                            [NSString stringWithFormat:@"%f", [[NSDate date] timeIntervalSince1970]], @"oauth_timestamp",
                            [self uuid], @"oauth_nonce",
                            @"HMAC-SHA1", @"oauth_signature_method",
                            @"mysecretkey", @"oauth_consumer_secret",
                            @"1.0",@"oauth_version",
                            @"username", @"x_auth_username",
                            @"password", @"x_auth_password",
                            @"client_auth", @"x_auth_mode", nil];
    RKClient *client = [RKClient clientWithBaseURL:[NSURL URLWithString:@"https://www.readability.com/api/rest/v1"]];

    [client post:@"/oauth/access_token" params:params delegate:self];
} 
```

十分感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:20:31.283

您应该使用带有 RestKit 的 GCOAuth 包之一来帮助您简化事情。这是[他们使用 GCOAuth 进行 xauth 的示例](https://github.com/RestKit/RestKit/blob/master/Vendor/cocoa-oauth/GCOAuth.h)：

```
NSURLRequest *xauth = [GCOAuth URLRequestForPath:@"/oauth/access_token"
POSTParameters:[NSDictionary dictionaryWithObjectsAndKeys:
username, @"x_auth_username",
password, @"x_auth_password",
@"client_auth", @"x_auth_mode",
nil]
host:@"api.twitter.com"
consumerKey:CONSUMER_KEY
consumerSecret:CONSUMER_SECRET
accessToken:nil
tokenSecret:nil]; 
```

# solr - 如何将 pdfdocument 的每一页索引为单独的 Solr 文档

> ID：11986590
> 
> 赞同：0
> 
> 时间：2012-08-16T11:58:29.110
> 
> 标签：solr, solrj

我正在尝试从 solr 中找到搜索结果的位置检索页码。我发现将每个页面索引为单独的 solr 文档是可行的。但我似乎找不到从 pdf 文件中索引单个页面的方法。

有没有人找到一种方法来用 solr 索引文档的单页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:04:29.527

您可以使用任何库，例如[pdfbox](http://pdfbox.apache.org/)，以便分别从每个页面中提取文本并将不同的文档提交给 Solr

# javascript - 根据属性值显示/隐藏 div（复选框值）

> ID：11986591
> 
> 赞同：0
> 
> 时间：2012-08-16T11:58:32.503
> 
> 标签：javascript, jquery, ruby-on-rails, view-helpers

是否有任何可用的辅助方法可以根据模型属性的值显示/隐藏指定的 div？

这是我想显示 div 的部分内容，如果是，则包装`openid_domain_name`文本字段，否则在编辑记录时隐藏。`openid_enabled``true`

```
<%= form_for @application do |f| %>
    <%= render "shared/error_messages", target: @application %>
    <p>
      <%= f.label :name %>
      <%= f.text_field :name %>
    </p>
    <p>
      <%= f.label :description %>
      <%= f.text_field :description %>
    </p>   
    <p>
      <%= f.check_box :openid_enabled %>
      <%= f.label 'openid', 'OpenID' %>
      <div id="application_openid_domain" style="display: none;">
        <%= f.label :openid_domain_name %>
        <%= f.text_field :openid_domain_name %>
      </div>
    </p>
    <p><%= f.submit class: "btn btn-primary" %></p>
<% end %> 
```

这是当用户选中/取消选中复选框时显示/隐藏 div 的 javascript。

```
<script type="text/javascript">
     $(function() {
        $(':checkbox').click(function () {
          if ($(this).is(':checked'))
            $("#application_openid_domain").show();
          else
            $("#application_openid_domain").hide();            
        });
    });
</script> 
```

**编辑** 生成的 HTML 源代码：

```
<form accept-charset="UTF-8" action="/applications" class="new_application" id="new_application" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="Cq2rYF1qkjnsobimMTAUvle9Hi82LwdvghcVWRtC/I0=" /></div>
  <p>
    <label for="application_name">Name</label>
    <input id="application_name" name="application[name]" size="30" type="text" />
  </p>
  <p>
    <label for="application_description">Description</label>
    <input id="application_description" name="application[description]" size="30" type="text" />
  </p>
  <p>
    <input name="application[openid_enabled]" type="hidden" value="0" /><input id="application_openid_enabled" name="application[openid_enabled]" type="checkbox" value="1" />
    <label for="application_openid">OpenID</label>
    <div id="application_openid_domain" style="display: none;">
      <label for="application_openid_domain_name">Openid domain name</label>
      <input id="application_openid_domain_name" name="application[openid_domain_name]" size="30" type="text" />
    </div>
  </p>
  <p><input class="btn btn-primary" name="commit" type="submit" value="Create Application" /></p>
</form>

<script type="text/javascript">
     $(function() {
        $(':checkbox').click(function () {
          if ($(this).is(':checked'))
            $("#application_openid_domain").show();
          else
            $("#application_openid_domain").hide();            
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T12:08:31.333

你可以使用[**`jQuery.toggle()`**](http://api.jquery.com/toggle/)函数。

**HTML：**

```
​&lt;div id="div">123</div>
<input type="checkbox" vlalue="show-hide" checked="checked" id="box"> 
```

**JavaScript：**

```
$('#box').change(function() {
    $('#div').toggle(this.checked);
}); 
```

[**​演示**](http://jsfiddle.net/f0t0n/DZP2h/)[](http://jsfiddle.net/f0t0n/DZP2h/)

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:33:25.450

我已经编写了自定义助手来做同样的事情。请建议它是否是正确的解决方案。

**app/helper/application_helper.rb**

```
def show_hide(show)
  show ? 'block' : 'none'
end 
```

**应用程序/视图/应用程序/_form.html.erb**

```
<div id="application_openid_domain" style="display: <%= show_hide(@application.openid_enabled?)%>;">
  <%= f.label :openid_domain_name %>
  <%= f.text_field :openid_domain_name %>
</div> 
```**

# java - Java：如何将 String[] 转换为 List 或 Set

> ID：11986593
> 
> 赞同：82
> 
> 时间：2012-08-16T11:58:31.857
> 
> 标签：java, arrays, collections, converter

如何将 String[] (Array) 转换为 Collection，如 ArrayList 或 HashSet？

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2012-08-16T12:02:02.627

Arrays.asList() 在这里可以解决问题。

```
String[] words = {"ace", "boom", "crew", "dog", "eon"};   

List<String> wordList = Arrays.asList(words); 
```

要转换为 Set，您可以执行以下操作

```
Set<T> mySet = new HashSet<T>(Arrays.asList(words)); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-16T12:00:04.233

最简单的方法是：

```
String[] myArray = ...;
List<String> strs = Arrays.asList(myArray); 
```

使用方便的[Arrays](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html)实用程序类。请注意，您甚至可以这样做

```
List<String> strs = Arrays.asList("a", "b", "c"); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-07-03T13:31:29.400

Collections.addAll 提供最短（单行）收据

有

```
String[] array = {"foo", "bar", "baz"}; 
Set<String> set = new HashSet<>(); 
```

您可以执行以下操作

```
Collections.addAll(set, array); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-16T12:01:43.577

这是一个旧代码，无论如何，尝试一下：

```
import java.util.Arrays;
import java.util.List;
import java.util.ArrayList;
public class StringArrayTest
{
   public static void main(String[] args)
   {
      String[] words = {"word1", "word2", "word3", "word4", "word5"};

      List<String> wordList = Arrays.asList(words);

      for (String e : wordList)
      {
         System.out.println(e);
      }
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-16T12:04:54.097

如果你真的想使用一个集合：

```
String[] strArray = {"foo", "foo", "bar"};  
Set<String> mySet = new HashSet<String>(Arrays.asList(strArray));
System.out.println(mySet); 
```

输出：

```
[foo, bar] 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-09-11T13:29:48.193

虽然这并不是对这个问题的严格回答，但我认为它很有用。

数组和集合可以麻烦转换为 Iterable，这样可以避免执行硬转换的需要。

例如，我写这个是为了将列表/数组加入到带有分隔符的字符串中

```
public static <T> String join(Iterable<T> collection, String delimiter) {
    Iterator<T> iterator = collection.iterator();
    if (!iterator.hasNext())
        return "";

    StringBuilder builder = new StringBuilder();

    T thisVal = iterator.next();
    builder.append(thisVal == null? "": thisVal.toString());

    while (iterator.hasNext()) {
        thisVal = iterator.next();
        builder.append(delimiter);
        builder.append(thisVal == null? "": thisVal.toString());
    }

    return builder.toString();
} 
```

Using iterable means you can either feed in an ArrayList or similar aswell as using it with a `String...` parameter without having to convert either.

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-16T12:00:08.883

```
java.util.Arrays.asList(new String[]{"a", "b"}) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-16T12:00:13.547

最简单的方法是通过

```
Arrays.asList(stringArray); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-16T12:02:57.633

```
String[] w = {"a", "b", "c", "d", "e"};  

List<String> wL = Arrays.asList(w); 
```

# iphone - CGPointMake！编码错误信息

> ID：11986594
> 
> 赞同：1
> 
> 时间：2012-08-16T11:58:35.413
> 
> 标签：iphone, xcode, message

我正在构建一个简单的游戏应用程序，您必须在其中将一个球从另一个球上移开。但是我的代码有问题，请帮忙。当我构建并运行它时，我收到 2 条错误消息。我不明白问题是什么。

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad {
[super viewDidLoad];
//(X speed, Y speed) vvv
pos = CGPointMake(5.0,4.0);///////// this part here I get an error message saying assigning to CGPoint * (aka 'struct CGPoint*') from incompatible type 'CGPoint' (aka 'struct CGPoint')
}

- (IBAction)start {
[startbutton setHidden:YES];
randomMain = [NSTimer scheduledTimerWithTimeInterval:(0.03) target:(self) selector:@selector(onTimer) userInfo:nil repeats:YES];

}

-(void)onTimer {
[self checkCollision];

enemy.center = CGPointMake(enemy.center.x+pos->x,enemy.center.y+pos->y);

if (enemy.center.x > 320 || enemy.center.x < 0)
    pos->x = -pos->x;

if (enemy.center.y > 480 || enemy.center.y < 0)
    pos->y = -pos->y;

}

-(void)checkCollision {

if( CGRectIntersectsRect(player.frame,enemy.frame))
{

[randomMain invalidate];
[startbutton setHidden:NO];

CGRect frame = [player frame];
frame.origin.x = 137.0f;
frame.origin.y = 326.0;
[player setFrame:frame];

CGRect frame2 = [enemy frame];
frame2.origin.x =137.0f;
frame2.origin.y = 20.0;
[enemy setFrame:frame2];

UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"You Lost!" message:[NSString stringWithFormat:@"You Were Hit! Try Again"] delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil];
    [alert show];
    [alert release];

}

}

-(void)touchesMoved: (NSSet *)touches withEvent: (UIEvent *)event {
UITouch *myTOuch = [[event allTouches] anyObject];
player.center = [myTouch locationInView:self.view];      /////// Here also I get an error message saying Assigning to 'CGPoint' (aka struct CGPoint') form incompatible type 'id'

////////////////// Also with that error message is Class method '+locationalView' not found (return type defaults to 'id')
}

@end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T12:03:16.417

在您的 .h 文件中，您是如何创建`pos`变量的？我想你加了一个 * ：

```
CGPoint *pos; 
```

去除那个 * ：

```
CGPoint pos; 
```

*编辑*（感谢乔纳森格林斯潘）

为什么使用 -> 运算符？我个人从未在 Objective-C 代码中见过它。尝试将它们更改为点：

```
if (enemy.center.x > 320 || enemy.center.x < 0)
    pos.x *= -1; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T12:18:25.817

在您的 ViewController.h 文件中，编写此声明。

```
CGPoint pos; 
```

在您的 ViewController.m 文件中，替换 pos.x 而不是 pos->x 和 pos.y 而不是 pos->y。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T12:04:51.750

当您在 var 名称和您尝试实例化对象的 Class 之间看到 * 时，这意味着它是该对象的指针。当 * 不存在时，它不是指针而是硬值。

你把这些东西弄混了，忘了从 .h 文件中的 CGPoint 属性中删除 * 。修复它，错误就消失了。

CGPoint *pos ---> CGPoint pos

# json - R 中的基本 JSON 文件管理

> ID：11986595
> 
> 赞同：1
> 
> 时间：2012-08-16T11:58:39.300
> 
> 标签：json, r

**背景**

我有一个非常好的关于 ALS 的数据集，我需要访问它，这样我就可以测试一些非常有趣的机器学习方法。问题是数据集的支持很差，我在处理复杂的数据结构或 R 中的 JSON 时缺乏经验

**我需要的**

如果有人可以通过实际的 R 代码示例（最好使用 RJSON 或 rjsonio）帮助我了解我应该如何访问代码，那就太好了。任何关于如何在 R 中使用 JSON 的基本教程/描述也将不胜感激，因为 JSON.org 更适合有编程经验的人使用它来编写 AJAX/SQL 应用程序。

显示我的具体问题的数据（字典文件和文本文件中的数据） 我无法从字典文件中发布文本，所以这里是 Flrickr [http://flic.kr/p/cSNbpm上发布的屏幕截图](http://flic.kr/p/cSNbpm)

实际数据有几千行，但看起来像这样：

```
649|144|Demographics|5AC60165-78AA-4E1D-8CCF-F1A21B944A8B|1203|Demographics Delta|0
649|144|Demographics|5AC60165-78AA-4E1D-8CCF-F1A21B944A8B|1204|Ethnicity| 
649|144|Demographics|5AC60165-78AA-4E1D-8CCF-F1A21B944A8B|1207|Race - Asian|
649|144|Demographics|5AC60165-78AA-4E1D-8CCF-F1A21B944A8B|1208|Race - Black/African American|
649|144|Demographics|5AC60165-78AA-4E1D-8CCF-F1A21B944A8B|1211|Race - Caucasian|1
649|144|Demographics|5AC60165-78AA-4E1D-8CCF-F1A21B944A8B|1257|Age|48
649|144|Demographics|5AC60165-78AA-4E1D-8CCF-F1A21B944A8B|1393|Race - Other|
649|145|ALSFRS(R)|B2F1F8AC-6BEA-483C-9BC8-F13C51ED6FFB|1213|1\. Speech|3
649|145|ALSFRS(R)|B2F1F8AC-6BEA-483C-9BC8-F13C51ED6FFB|1214|10\. Respiratory|4
649|145|ALSFRS(R)|B2F1F8AC-6BEA-483C-9BC8-F13C51ED6FFB|1215|2\. Salivation|3
649|145|ALSFRS(R)|B2F1F8AC-6BEA-483C-9BC8-F13C51ED6FFB|1216|3\. Swallowing|2
649|145|ALSFRS(R)|B2F1F8AC-6BEA-483C-9BC8-F13C51ED6FFB|1217|4\. Handwriting|4
649|145|ALSFRS(R)|B2F1F8AC-6BEA-483C-9BC8-F13C51ED6FFB|1218|5a. Cutting without Gastrostomy|4 
```

它似乎被分成几个不同的部分，所以进一步向下，一般结构被改变了几次

```
727029|146|Laboratory Data|67962337-62FA-42E3-9E22-1C36965088D6|1234|Laboratory Delta|448
727029|146|Laboratory Data|67962337-62FA-42E3-9E22-1C36965088D6|1250|Test Name|Urea
727029|146|Laboratory Data|67962337-62FA-42E3-9E22-1C36965088D6|1251|Test Result|4.50
727029|146|Laboratory Data|67962337-62FA-42E3-9E22-1C36965088D6|1252|Test Unit|mmol/L
727029|146|Laboratory Data|C2F387B2-00B5-4645-9B2A-03F43117C44B|1234|Laboratory Delta|448 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:57:14.867

我建议在 CRAN 中使用[rjson 包。](http://cran.r-project.org/web/packages/rjson/index.html)

# php - 数组输出并添加一个字符

> ID：11986597
> 
> 赞同：0
> 
> 时间：2012-08-16T11:58:41.567
> 
> 标签：php

当用户点击提交时，我希望将发布数据保存到 cvs 文件中。我想在每个变量之后用“，”将 $valid[$var] 输出到 $cvsData... 我在哪里做这样的事情？我也在看`fputcsv`这是否会给我同样的结果，把“，”

```
 $valid = true; 
    foreach($_POST as $var => $value) { 
        if(empty($value)) { 
            $valid[$var] = false;
        } else {
            $valid[$var] = true;
        }
    } 
```

// $cvsData = $phone . “，”。$fn 。“，”。$ln 。“，”。$sos 。“，”。$e1 ."\n";

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:05:30.190

```
header("Content-type: application/csv");
header("Content-Disposition: attachment; filename=file.csv");
header("Pragma: no-cache");
header("Expires: 0");

$line = "";
foreach($_POST as $value)
{
    if(!empty($value))
    {
        echo '"" . str_replace('"', '\"', $value) . '", ';
    }
}
$line = trim($line, '", ');
echo $line; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T12:03:01.330

您是否正在寻找这样的东西：

```
$valid = true;
$csvHeaders=""; 
$csvData="";
foreach($_POST as $var => $value) 
{ 
    if(!empty($value)) 
    {
        $csvHeaders.=$var.",";
        $csvData.=$value.",";
    }
}

echo $csvHeaders;
echo $csvData; 
```

# php - Symfony2 项目的想法

> ID：11986598
> 
> 赞同：1
> 
> 时间：2012-08-16T11:58:45.513
> 
> 标签：php, symfony

我不确定我的问题是否适合这里，如果不适合请告诉我并原谅我，我将删除它。

我对使用 PHP 开发 Web 应用程序很感兴趣，目前我正在学习如何将 Symfony2 与 Twig 和 Doctrine2 一起使用。请你给我一些简单有趣的项目的想法，我可以尝试做，这样我就可以更好地学习和记住事情，因为我发现当我只阅读时，我不记得很多东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:03:33.030

这个框架可以应用于一切——所以不可能有一个单一的想法。

你应该开始使用它...

如果你需要想法来实施——问问你的朋友，他们是否需要个人网站、作品集、论坛，然后就去做。然后 - 添加编辑其内容的能力。当然，还有安全性。

将你的知识应用到实践中——这是提高技能的唯一正确方法。

做点什么:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T12:03:27.990

我的建议是实施一些你已经知道如何去做的事情。这个想法是，思考要做*什么*和*如何*去做是压倒性的。常见的建议是建立一个博客，因为每个人都知道它是什么。它也可能是一个任务管理器。

实现你或其他人真正需要的东西会更好，因为你会解决一个真正的问题，而且会更有回报。

# java - Struts - 为一个表单使用多个提交按钮？（如何知道哪个被点击了）

> ID：11986599
> 
> 赞同：2
> 
> 时间：2012-08-16T11:58:48.517
> 
> 标签：java, struts

我要提交的表单有 3 个按钮。我是struts的新手，我想知道，有没有办法找到点击了哪个按钮？在我的 html 中我有这个

```
<html:form action="myAction.jspa">
    <div align="right">
        <html:submit value="back" />
        <html:submit value="continue Later" />
        <html:submit value="submit"  />
    </div>
</html:form> 
```

在方法中的 Java`Action`类中`execute()`，我尝试使用`request.getParameter("back")`来检查是否按下了后退按钮，但它不起作用。如何处理struts中的多个提交按钮？

提前感谢您的帮助:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T12:06:10.487

使用标签上的`property`属性`<html:submit>`来指定您将在操作中检查的请求参数的名称。

JSP

```
<html:submit property="back">back</html:submit> 
```

行动

```
if(request.getParameter("back") != null) {
    // back button was clicked
} 
```

或者，您可以为所有提交按钮赋予**相同**的属性，然后检查操作中参数的值。但是，这增加了额外的国际化问题（您需要检查同一字符串的非英语翻译）。

有关更多信息，请参阅[Struts API](http://struts.apache.org/release/1.2.x/userGuide/struts-html.html#submit)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:07:06.217

使用[DispatchAction](http://struts.apache.org/1.x/struts-extras/apidocs/org/apache/struts/actions/DispatchAction.html) 或使用 javascript 并在隐藏参数中传递值 actontype（返回，稍后继续）。

[http://unnisworld.wordpress.com/2008/02/14/struts-tip-how-to-organize-related-operations-into-a-single-action-class/](http://unnisworld.wordpress.com/2008/02/14/struts-tip-how-to-organize-related-operations-into-a-single-action-class/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T12:17:29.283

您可以通过 jquery 获取按钮 ID。然后你就知道点击了哪个按钮。根据Click按钮调用struts Action。

# php - 使用 OpenSSL 的 PHP 加密/解密对我不起作用

> ID：11986604
> 
> 赞同：2
> 
> 时间：2012-08-16T11:59:01.077
> 
> 标签：php, openssl

我正在尝试使用 PHP 和 OpenSSL 使用公钥加密一些数据，然后再次解密。

我使用以下代码生成了 public.key 和 private.key：

```
// generate private key
$privateKey = openssl_pkey_new(array(
    'private_key_bits' => 1024,
    'private_key_type' => OPENSSL_KEYTYPE_RSA,
));
// write private key to file
openssl_pkey_export_to_file($privateKey, 'private.key');
// generate public key from private key
$publicKey = openssl_pkey_get_details($privateKey);
// write public key to file
file_put_contents('public.key', $publicKey['key']);
// clear key
openssl_free_key($privateKey); 
```

我的加密和解密代码基本上直接来自 PHP 文档：

```
// data to encrypt
$data = "This is a long string or other bit of data that i want to encrypt";

// ==== ENCRYPT ====

// read public key
$publicKey =  file_get_contents("public.key");
$publicKey = openssl_get_publickey($publicKey);

// encrypt data using public key into $sealed
$sealed = '';
openssl_seal($data, $sealed, $ekeys, array($publicKey));
openssl_free_key($publicKey);

// ==== DECRYPT ====

// get private key to decrypt with
$privateKey = file_get_contents("private.key");
$privateKey = openssl_get_privatekey($privateKey);

// decrypt data using private key into $open
$open = '';
openssl_open($sealed, $open, $env_key, $privateKey);
openssl_free_key($privateKey);

// display decrypted data:
echo "<p>Decrypted data: ".$open; 
```

任何人都知道为什么它不起作用，或者至少有一种方法可以找出发生了什么错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:30:12.907

你忘了这句话吗？

```
$env_key = $ekeys[0]; 
```

我通过阅读示例代码找到了答案[`openssl_seal()`](http://au2.php.net/manual/en/function.openssl-seal.php)

# javascript - 使用 Jasmine 测试 Backbone 视图时，浏览器页面不断刷新

> ID：11986605
> 
> 赞同：5
> 
> 时间：2012-08-16T11:59:01.443
> 
> 标签：javascript, backbone.js, jasmine

运行以下 Jasmine 测试（1），测试成功执行，但我面临主测试页面的递归加载。

这是我的测试（1），这里是我运行测试的模块（2）：

有任何想法吗？我该如何解决这个问题？

PS：
这个问题只涉及 Chrome 和 Safari 浏览器。
这是一个例子：jsfiddle.net/shioyama/EXvZY

* * *

(1)

```
describe('When Submit button handler fired', function () {
    beforeEach(function () {
        spyOn(MyView.prototype, 'submitForm');
        this.view = new MyView();
        this.view.render();
        this.view.$el.find('form').submit();
    });

    it('submitForm should be called', function () {
        expect(MyView.prototype.submitForm).toHaveBeenCalled();
    });
}); 
```

* * *

(2)

```
var MyView = Backbone.View.extend({
    events: {
        'submit form' : 'submitForm'
    },

    submitForm: function (event) {
        event.preventDefault();
        // some code
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T10:44:38.807

Backbone 使用*委托事件*，在创建视图时绑定。您的 view.el 在创建时不包含表单，而是在 render 方法中创建一个。这就是提交委托事件未绑定的原因，而是您在页面上提交表单的原因。该表单提交到相同的 URL，这会触发 Jasmine 套件再次运行，从而导致循环。

如果你稍微修改一下你的代码，你会发现这个版本可以工作，因为*<form>*元素在视图生成之前就已经存在了。

```
var MyView = Backbone.View.extend({
    events: {
        'submit form' : 'submitForm'
    },

    submitForm: function (event) {
        event.preventDefault();
        // some code
    }
});

//start test runner right after we're done defining our tests in this script
window.setTimeout( function(){
    jasmine.getEnv().addReporter(new jasmine.TrivialReporter());
    jasmine.getEnv().execute();
}, 0 );

//TESTS GO HERE
describe('When Submit button handler fired', function () {
    beforeEach(function () {
        spyOn(MyView.prototype, 'submitForm').andCallThrough();
        this.view = new MyView({
            el: $('<div><form><input type="submit" value="Submit" /></form></div>')
        });
        this.view.$el.find('form').submit();
    });

    it('submitForm should be called', function () {
        expect(MyView.prototype.submitForm).toHaveBeenCalled();
    });
});​ 
```

​</p>

# sql-server - SQL Server 代理作业中的类别是什么意思？

> ID：11986611
> 
> 赞同：13
> 
> 时间：2012-08-16T11:59:20.940
> 
> 标签：sql-server, sql-server-2008, sql-server-2005, sql-job

这是我第一次尝试使用**SQL 作业代理**...我**试图创建示例作业**，但在选择下面屏幕截图**中突出显示的类别**时，我感到很困惑

![在此处输入图像描述](../Images/bea664dc7bcc309467cf74b23901c521.png)

我是**SQL Server**的新手，你能解释一下上面提到的类别的含义吗？或任何链接将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T12:11:35.793

类别用于组织您的工作。如果您右键单击工作文件夹并选择“管理类别”，您可以看到所有可用的类别、按类别过滤等。

这里有一个很好的细分：

[http://www.mssqltips.com/sqlservertip/1484/custom-job-categories-to-organize-your-sql-agent-jobs/](http://www.mssqltips.com/sqlservertip/1484/custom-job-categories-to-organize-your-sql-agent-jobs/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-16T12:08:34.500

它们根本不影响工作——它们只是组织工作的一种方式——如果你在一台服务器上有很多工作，这很有帮助。

[`sp_add_category`](http://msdn.microsoft.com/en-us/library/ms181597.aspx)您可以使用in添加自己的类别`msdb`。

当您设置 SQL Server 的其他部分时，许多内置类别将自动使用，它会添加作业。例如，如果您设置合并复制，您会发现在该`REPL-Merge`类别下添加了一些作业。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-16T12:04:31.757

尝试查看[Tim Ford 关于类别的文章](http://www.mssqltips.com/sqlservertip/1484/custom-job-categories-to-organize-your-sql-agent-jobs/)：

编辑：

其实，对不起。它描述了如何添加类别，但没有描述现有类别是什么。

*   **数据收集器**是 SQL Server 中的一个选项，[用于收集有关系统的信息](http://msdn.microsoft.com/en-us/library/bb677248%28v=sql.105%29.aspx)
*   **调优顾问**旨在找到最佳执行路径
*   **数据库维护**适用于执行维护的作业（如重新索引或统计更新）
*   **全文**涉及全文索引，允许搜索文本字段
*   **MSX**是多服务器管理（即在主服务器上安排作业，然后将作业传播到其他服务器）
*   **日志传送**是一种高可用性系统，其中事务日志记录会定期发送到备用服务器，以便在紧急情况下联机
*   **REPL**是复制的缩写

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-16T12:08:45.463

工作类别可帮助您组织工作以便轻松过滤和分组。
如果您有多个相同类型的任务或操作的工作，那么您可以根据工作性质对工作进行分类

[从http://msdn.microsoft.com/en-us/library/ms191128.aspx](http://msdn.microsoft.com/en-us/library/ms191128.aspx)阅读更多内容

# python - *parameters 调用是懒惰的吗？

> ID：11986616
> 
> 赞同：10
> 
> 时间：2012-08-16T11:59:43.687
> 
> 标签：python, lazy-evaluation, generator-expression

> **可能重复：**
> [python 的可变长度参数（*args）是否在函数调用时扩展生成器？](https://stackoverflow.com/questions/5182758/do-pythons-variable-length-arguments-args-expand-a-generator-at-function-cal)

假设您有这样的功能：

```
def give_me_many(*elements):
   #do something... 
```

你这样称呼它：

```
generator_expr = (... for ... in ... )
give_me_many(*generator_expr) 
```

元素会被延迟调用，还是生成器会在函数执行之前遍历所有可能的数百万个元素？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-16T12:06:18.777

参数总是作为元组和/或字典传递给函数，因此传入的任何内容`*args`都将转换为元组或`**kwargs`转换为字典。如果`kwargs`已经是字典，则制作副本。元组是不可变的，因此`args`不需要复制，除非它发生变化（通过包含其他位置参数或删除命名位置参数的一些参数），但它将从任何其他序列类型转换为元组。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-16T12:03:41.993

不，他们不是：

```
>>> def noisy(n):
...   for i in range(n):
...     print i
...     yield i
... 
>>> def test(*args):
...   print "in test"
...   for arg in args:
...     print arg
... 
>>> test(*noisy(4))
0
1
2
3
in test
0
1
2
3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T12:41:50.273

[文档](http://docs.python.org/tutorial/controlflow.html#arbitrary-argument-lists)说

> 这些参数将被包裹在一个元组中

这意味着生成器被提前评估。

# mysql - 从 mysql 表中的同一列获取计数？

> ID：11986617
> 
> 赞同：6
> 
> 时间：2012-08-16T11:59:44.360
> 
> 标签：mysql, sql, database

我想计算不同值的相同字段，例如：

> 用户{user_id, 性别}

性别可以有明显的男性或女性:)

我想计算所有男性和女性的数量，即

```
COUNT(male)   COUNT(female)  
   4               16 
```

但我很困惑，因为它们来自同一个`gender coloumn`谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-16T12:01:42.533

试试这个逐行结果：

```
SELECT gender, COUNT(User_id) AS count
FROM User
GROUP BY gender; 
```

输出：

```
| gender | count |
|--------|-------|
|      F |     4 |
|      M |     2 | 
```

试试这个以获得总计的行明智的结果：

```
SELECT  (IFNull(gender,'Total')) AS gender,
COUNT(User_id) AS Count
FROM User
GROUP BY gender
WITH rollup; 
```

输出：

```
| gender | Count |
|--------|-------|
|      F |     4 |
|      M |     2 |
|  Total |     6 | 
```

试试这个列明智的结果：

```
SELECT
  COUNT(CASE WHEN gender = 'M' THEN User_id END) AS males,
  COUNT(CASE WHEN gender = 'F' THEN User_id END) AS females,
  COUNT(*) AS Total
FROM User; 
```

输出：

```
| males | females | Total |
|-------|---------|-------|
|     2 |       4 |     6 | 
```

### [*看到这个 SQLFiddle*](http://sqlfiddle.com/#!9/65058/1)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T12:07:43.300

根据您的评论，您需要计算男性、女性和总人数：

```
SELECT sum(case when gender = 'M' then 1 else 0 end) males,
  sum(case when gender = 'F' then 1 else 0 end) females,
  count(*) total
FROM  yourTable 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/5e4b4/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T12:03:42.093

试试这个查询 -

```
SELECT
  COUNT(IF(gender = 'M', User_id, NULL) males,
  COUNT(IF(gender = 'F', User_id, NULL) females
FROM
  User 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T12:09:01.020

试试这个：总计数：

```
Select gender,count(*) as count
From User
Group by gender
with rollup 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!3/c0c88/1)

# eclipse - Eclipse“构建路径”和 m2e。Maven -->“更新项目配置”总是重新排序我的构建路径

> ID：11986618
> 
> 赞同：4
> 
> 时间：2012-08-16T11:59:45.340
> 
> 标签：eclipse, m2eclipse, buildpath

我正在开发一个 CXF Web 服务使用者，我不得不使用一个相当老的 Java 版本（RHEL6 上的 1.6.0_24）。

我添加了各种 Maven 依赖项来补偿 Java 系统库中各种对象的旧版本。

因此，在构建路径（在 Eclipse 中）中，顺序很重要：它需要在命中 JRE 系统库之前命中 Maven 依赖项，否则会发生编译错误。

如果我在修改 POM 文件等后右键单击我的项目并选择“Maven”->“更新项目配置”，m2e 似乎重新排序构建路径库，以便 Maven 依赖项位于 JRE 系统库之后，*我*不想要。

有什么方法可以在某处（例如在 POM 等中）指定构建路径顺序以使其保持不变吗？

谢谢。

# javascript - 如何使用javascript添加和删除带有选项的选择框和带有标签和样式的文本框

> ID：11986619
> 
> 赞同：0
> 
> 时间：2012-08-16T11:59:50.833
> 
> 标签：javascript

```
<html>
<head>
    <title>something</title>
    <link rel="stylesheet" href="../../style/global.css">
        <link rel="stylesheet" href="../../style/local.css">
        <link rel="stylesheet" href="../../calendarControl.css">
        <script Language="JavaScript" src="../jscripts/util.js"></script>
    <script language="JavaScript" src="../../calendarControl_modi.js"></script>
    <style>
    input.normal
    {
    text-transform:uppercase;
    }
    </style>
    <script>

    function addBox()
    {   
        //y;
        y=2;
        alert(y);
        var form=document.frm;

        var _items = [ 'NA', 'Storage Device', 'Imaging Device'];

        var label, textbox,lable2,select,div;

        label = document.createElement('label');

        label.appendChild(document.createTextNode('Belonging Type '+y+ ':'));

        select = document.createElement('select');

            for ( var x = 0; x < _items.length; x++ ) 
            {
             _option = document.createElement('option');
             var _text = document.createTextNode(_items[x]);
             _option.appendChild(_text);
             select.appendChild(_option); 
             _option.value = _items[x];
            }

        label2 = document.createElement('label');

        label2.appendChild(document.createTextNode('Belonging '+y+ ':'));

        textbox = document.createElement('input');
        textbox.type = 'text';

        label.appendChild(select);
        label.appendChild(label2);
        label.appendChild(textbox);

        div=document.createElement('div');
        div.appendChild(label);
        document.getElementById('frm').appendChild(div);

        y=y+1;
        alert(y);

        }

        function removeBox() 
        {
        var form = document.frm;
        if (form.lastChild.nodeName.toLowerCase() == 'div')
        form.removeChild(form.lastChild);

        }

        function incrementCount() 
        {
        document.frm.count.value = parseInt(document.frm.count.value) + 1;
        addBox();
        }

        function decCount() 
        {
        document.frm.count.value = parseInt(document.frm.count.value) - 1;
        removeBox();
        }

    </script>

</head>

<body leftmargin="2" topmargin="2" marginwidth="2" marginheight="0" onload="">
<table border = "0" cellspacing="0" cellpadding="0" width = "100%">
            <tr>
                <td class = "normal" align = "left" colspan = "100%" >
                    <!-- Put the Header Image over here-->
                <!--<img src="../../images/ts.gif" width="10%" >-->
                <td>
            </tr>
    </table>
    <!--<img src="../../images/line.bmp" width="100%" height="2">-->

    <form name  = "frm" method = "post" action="" >
    <table>
    <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td><input type="hidden" name="count" value="0" readonly ></td></tr>
    <tr>
        <td><a href="javascript:incrementCount();" onclick="" class="underline_small">Add more</a></td>
    </tr>
    <tr>
        <td><a class="underline_small" href="javascript:decCount();" onclick="">Remove<a></td>
    </tr>

</table>
</form>
</body>
</html> 
```

我得到的输出如下

![在此处输入图像描述](../Images/0f70e7461a40aad12ca0d26557bf4da1.png)

单击删除后，我可以删除添加的元素，但是当我再次按下时，添加更多的 y 值保持不变，我想在下次单击添加时增加它应该显示属于类型 3 以及我们如何动态应用样式当我应用于超链接 Addmore 并删除时添加了元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:11:52.690

我认为问题在于您设置了`y = 2`内部`addBox()`功能。将其更改为 `y=document.getElementsByName('count')[0].value;`

演示：http: [//jsfiddle.net/pEAH8/](http://jsfiddle.net/pEAH8/)

# mongodb - Mongoose - 更新模型的实例方法，这是一种好习惯吗？

> ID：11986620
> 
> 赞同：5
> 
> 时间：2012-08-16T11:59:52.903
> 
> 标签：mongodb, mongoose

我正在使用一些猫鼬模型[实例方法](http://mongoosejs.com/docs/guide.html#methods)来尝试封装一些业务逻辑，而不是散布在我的应用程序中。一个例子：

```
 MySchema.methods.doSomethingAndUpdateCount = function (somedata) {
        //Do something to model here using somedata
        this.someCount ++;
        this.save();
 }; 
```

不过，我今天又在看这个，我不确定这是否真的是一个好习惯。一方面，它并没有真正为使用这种方法的应用程序部分提供处理错误的方法。也许问题是`this.save();`- 也许这不应该在实例方法中，而是由方法的使用者调用。所以...

*   拥有更新实例数据的实例方法是一种好习惯吗？
*   如果是这样，您应该`this.save();`从实例方法中调用，还是在使用代码时这样做？
*   在这种情况下，您应该如何处理错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T13:49:52.337

一般概念很好，但是您的实例方法应该支持您可以提供保存的回调参数，`this.save(callback);`以便可以通知客户端错误。

# git - git push 致命错误：远端意外挂断

> ID：11986622
> 
> 赞同：1
> 
> 时间：2012-08-16T11:59:53.203
> 
> 标签：git, push

我在本地存储库中创建了一个新分支，经过一些提交后，我想将其推送到远程存储库。

`git push origin new_branch`

上个月我做了类似的事情（推送一个新分支），以前我从来没有遇到过问题，但现在我遇到了这个错误：

`Counting objects: 39, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (23/23), done.
Writing objects: 100% (23/23), 14.30 KiB, done.
Total 23 (delta 16), reused 0 (delta 0)
Unpacking objects: 100% (23/23), done.
fatal: Unable to create '/mnt/server.Annax/git/voipsrv_anxsvn/.git/refs/heads/new_branch.lock': Permission denied
fatal: The remote end hung up unexpectedly
fatal: The remote end hung up unexpectedly`

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:44:29.903

我在这篇博文中找到了答案：http: [//www.btaz.com/misc/fatal-the-remote-end-hung-up-unexpectedly/](http://www.btaz.com/misc/fatal-the-remote-end-hung-up-unexpectedly/)但我会在这里总结一下，以防链接因某种原因而断开.

尝试做一个`git config –list`. 如果您的 remote.origin.url 属性如下所示`remote.origin.url=git://git.some-domain.com/my-project`，则问题在于您有一个只读 URL。

用于`git config –edit`更改 url 所以类似的东西`git@git.some-domain.com:/my-project`。

这解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:04:33.817

可能是一个愚蠢的问题，但是您是以 root 用户还是超级用户身份登录的？在这种情况下，git 会挂断你，因为它没有为 root 用户帐户配置（这一切都假设你在 Linux 或 Mac 机器上运行，不确定它如何在 Windows 上工作）。除此之外，如果您可以通过 SSH 连接到 git 远程计算机，请检查那里的文件和文件夹的权限，看看那里是否有不一致的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T07:46:33.227

这是一个访问权限问题。

您用来执行此操作的用户`push`没有足够的权限来创建`/mnt/server.Annax/git/voipsrv_anxsvn/.git/refs/heads/new_branch.lock`.

如果您过去成功地做到了这一点，那么您要么使用了不同的用户，要么`origin`从那时起您的访问权限发生了变化。

# css - 使用 YUI 查看图像

> ID：11986625
> 
> 赞同：0
> 
> 时间：2012-08-16T11:59:56.617
> 
> 标签：css, yui, yahoo, yahoo-api

我创建了一个在网格视图中显示 Instagram 图像的页面。当我单击特定图像时，会打开一个新页面，显示原始 Instagram 链接中的特定图像。我希望在原始页面中打开图像，而不是仅使用 Yahoo YUI 的任何新页面。[这里](http://icant.co.uk/sandbox/yuipanel/)有一个例子。（在 panel_five 下）。我没有YUI的经验。我的整个代码是：//它在 10 个不同的框中显示 10 个图像

```
$(function() {

 $.ajax({
        type: "GET",
        dataType: "jsonp",
        cache: false,
        url: "https://api.instagram.com/v1/media/popular?client_id=70fd1ce846d641928bf0a047053cf62d",
        success: function(data) {

            for (var i = 0; i < 10; i++) {
                $('.ttl').first().parent().append('<div class="ttl"><div class="ttlpadding"><div class="item">' + "<a href='" + data.data[i].images.standard_resolution.url +"' ><img src='" + data.data[i].images.thumbnail.url +"' /></a>" +"</div></div></div>");
            }     

        }
    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:03:27.187

我在[http://jsbin.com/welcome/12864/edit有一个工作示例](http://jsbin.com/welcome/12864/edit)

```
YUI().use('jsonp', 'node', function(Y) {
    var list = Y.one('#output');

    Y.jsonp(
        "https://api.instagram.com/v1/media/popular?client_id=70fd1ce846d641928bf0a047053cf62d&callback={callback}",
        function(data) {
            for (var i = 0; i < 10; i++) {
                list.append('<div class="ttl"><div class="ttlpadding"><div class="item">' + "<a href='" + data.data[i].images.standard_resolution.url +"' ><img src='" + data.data[i].images.thumbnail.url +"' /></a>" +"</div></div></div>");
            }
        }
    );
}); 
```

如您所见，它与 jquery 示例并没有太大区别。除非您在 SSL 下运行应用程序，否则您不需要下载和托管任何文件。雅虎！不提供基于 SSL 的组合加载器，但是在 SSL 下自己运行一个非常容易。

# asp.net-mvc-3 - 如何在发布功能中获取选定记录的价值

> ID：11986629
> 
> 赞同：1
> 
> 时间：2012-08-16T12:00:05.030
> 
> 标签：asp.net-mvc-3, checkbox

我有一个记录表，显示用户完成的活动

我还有与每条记录相关联的复选框，用户可以通过它一次选择多个活动

我想要用户选中复选框的那些记录的ID

我可以显示多条记录，但无法在控制器的发布功能中获得价值

这是我的代码

```
 public ActionResult DisplayList()
    {
     //do activities to fetch record from database
 return View(modelList);//modelList is a viewmodel's Icollection list
    } 
```

看法：-

```
 @using (Html.BeginForm())
 {
      @Html.ValidationSummary(false)
      <div style=" width:900px; height:400px;">
<div class="textcontent"><b>List of activities</b></div>

<div class="table" style="vertical-align:middle;">
    <div class="row">
        <div class="cell" style="width:auto;">SrNo</div>
        <div class="cell" style="width:auto;">Select Activity</div>
        <div class="cell" style="width:auto;">Learner Name</div>
    </div>
    @foreach (var item in Model.Select((x, i) => new { Data = x, Index = i + 1 }))
    {

    <div class="row1">

        <div class="cell" style="width:auto;">@item.Index</div>
        <div class="cell" style="width:auto;"> <input type="checkbox" name="chkexi" id="selected" onclick="checked()"/></div>
        <div class="cell" style="width:auto;">@Html.DisplayFor(modelItem => item.Data.persn.FirstName)</div>

    </div>    
    }
</div>
     <div class="table">
    <div class="row1">
        <div class="cell">
            <center>
               <button type="submit">Submit</button>//on click of this my controller function is called 
            </center>
        </div>
    </div>
  </div> 
```

```
 <script>
    function checked() {
if (document.getElementById('selected').checked) {
    document.getElementById('chkstatus') = true;
}
 </script>

     } 
```

我的视图模型:::

```
 public class PublishViewModule
{
    public virtual myclass obj { get; set; }
           public virtual bool chkstatus { get; set; }
}
     [HttpPost]
    public ActionResult DisplayList(ExhibitionViewModel model,FormCollection form)
    {
        //here i get model as null
        return View();
    } 
```

有人可以帮我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T06:45:40.623

好吧，我得到了答案.... :)

我再次发布了这个问题，我试图通过 ajax 传递这些值，这就是答案

[如何接受通过ajax传递的值](https://stackoverflow.com/questions/12002930/how-to-accept-value-passed-through-ajax/12003045#12003045)

:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:33:06.113

在您的回发操作中，替换

```
[HttpPost]
public ActionResult DisplayList(ExhibitionViewModel model,FormCollection form) 
```

任何更适合您的需求：

```
[HttpPost]
public ActionResult DisplayList(ExhibitionViewModel model) 
```

或者

```
[HttpPost]
public ActionResult DisplayList(FormCollection form) 
```

或根据您要查找的内容进行一些自定义绑定。但这两个是最明显的回发操作。

这是它背后的理论：[ASP.NET MVC – Think Before You Bind](http://www.codethinked.com/ASPNET-MVC-Think-Before-You-Bind)

**编辑**

几个注意事项：

1.  您的视图在最顶部没有任何模型，因此不确定它是否甚至应该将其发回，也许这就是为什么它为空？

2.  尝试调查一下：您的视图模型类称为`PublishViewModule`，但您`ExhibitionViewModele`在控制器中接受回发操作。那是问题吗？

希望这可以帮助

# c++ - 如何找出哪个嵌套的 for 循环更好？

> ID：11986632
> 
> 赞同：3
> 
> 时间：2012-08-16T12:00:14.217
> 
> 标签：c++, c, loops, nested-loops

有人问我一个问题：以下两种情况中哪一种最快：

## 情况 1：假设 int count = 0；

```
for (int i = 0; i < 10; i++)
{
    for (int j = 0; j < 5; j++)
    {
        count++;
    }
} 
```

## 情况 2：假设 int count = 0；

```
for (int i = 0; i < 5; i++)
{
    for (int j = 0; j < 10; j++)
    {
        count++;
    }
} 
```

在这两种情况下，计数的最终值都是 50。但我不确定哪个会更快？我认为 CASE II 更快，但不确定......

如果有人能对此有所了解，那就太好了。哪个更快，为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-16T12:05:41.360

这是我能想到的唯一例子，你在哪里迭代哪个变量很重要

```
int array[n][m];
//fast
for (int i=0;i<n;i++)
{ for(int j=0;j<m;j++)
  { count+=array[i][j];
  }
}
//slow
for (int i=0;i<m;i++)
{ for(int j=0;j<n;j++)
  { count+=array[j][i];
  }
} 
```

第二个速度较慢，因为您不会一个接一个地迭代内存中的位置，而是因为您`m`一次跳转多个位置。处理器缓存紧跟在访问位置之后的内存位置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T12:07:08.867

好的，在我的系统上测试了这个。完全优化后，编译器只设置了 count = 50，没有问任何问题。如果没有优化，第二个版本通常会稍微快一点，但完全可以忽略不计。

反汇编：两个循环都有完全相同的代码，除了比较一次是 100，一次是 50（我稍微增加了一些数字以允许更长的执行时间）

```
 for(int i = 0; i< 100; i++) {
00F9140B  mov         dword ptr [i],0  
00F91412  jmp         main+5Dh (0F9141Dh)  
00F91414  mov         eax,dword ptr [i]  
00F91417  add         eax,1  
00F9141A  mov         dword ptr [i],eax  
00F9141D  cmp         dword ptr [i],64h  
00F91421  jge         main+88h (0F91448h)  

        for(int j = 0; j< 50; j++)
00F91423  mov         dword ptr [j],0  
00F9142A  jmp         main+75h (0F91435h)  
00F9142C  mov         eax,dword ptr [j]  
00F9142F  add         eax,1  
00F91432  mov         dword ptr [j],eax  
00F91435  cmp         dword ptr [j],32h  
00F91439  jge         main+86h (0F91446h)  
        {
            count++;
00F9143B  mov         eax,dword ptr [count]  
00F9143E  add         eax,1  
00F91441  mov         dword ptr [count],eax  
        }
00F91444  jmp         main+6Ch (0F9142Ch)  
    }
00F91446  jmp         main+54h (0F91414h) 
```

外面的大循环，里面的小循环，里面的小循环，外面的大循环之间的唯一区别是你必须多久做一次跳跃

```
00F91439  jge         main+86h (0F91446h)  
to
00F91446  jmp         main+54h (0F91414h) 
```

以及循环变量的初始化：

```
00F91423  mov         dword ptr [j],0  
00F9142A  jmp         main+75h (0F91435h) 
```

对于每个新循环，同时跳过以下部分。

```
00F9142C  mov         eax,dword ptr [j]  
00F9142F  add         eax,1  
00F91432  mov         dword ptr [j],eax 
```

内循环每次迭代的附加命令：mov、add、mov，但没有 mov / jmp

初始化每个内部循环的附加命令：mov、jmp，更常见的是让 JGE 为真。

因此，如果您运行内循环 50 次，那么 JGE 只会实现 50 次，因此在那里进行 50 次跳跃，而当内循环运行 100 次时，您将必须跳跃 100 次。这是代码中*唯一*的区别。在这种情况下，几乎没有什么区别，而且大多数情况下，您会遇到内存访问问题，这会导致比循环排序更慢的事情。唯一的例外：如果您知道可以正确排序循环以避免分支预测。因此，有两件事值得以一种或另一种方式订购您的循环：

- 内存访问

-分支预测

对于其他一切，影响完全可以忽略不计。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T12:05:32.513

实际上，尝试针对这些细节进行优化通常不是一个好主意，因为大多数情况下编译器在这方面做得更好（只要算法没有改变）。

循环数相等。

可能是第二个更快一些，因为第二个循环的初始化只发生了 5 次而不是 10 次，但我怀疑这真的会获得一些显着的变化。

最好的方法是使用分析器，甚至更好：分析生成的汇编代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T12:05:52.297

如果您真的想知道，请使您的外循环成为具有最大循环计数（5 或 10）的单个参数的函数，使您的内循环成为具有最大内循环计数（10 或 5）的单个参数的函数，然后在没有任何优化的情况下编译，运行一百万次，并为它们计时。

通过任何优化，您的编译器将内联函数，扩展循环，并`count`作为优化过程的一部分进行计算。我的猜测是他们会做完全相同的工作量，你会看到完全相同的时间。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-16T12:05:57.883

你真的试过了吗？

我*假设*理论上情况 II 会稍微快一些，因为在外部循环中只有一半的基于堆栈的变量创建/销毁比情况 I 的情况要好，但更好（更清晰）的是：

```
for(int k = 0; k < 50; k++)
{
     count++;
} 
```

确切地说，您的示例非常抽象，以至于答案可能几乎没有用。这在很大程度上取决于上下文。

# c# - 获取所有打开的 Word 应用程序的集合

> ID：11986636
> 
> 赞同：0
> 
> 时间：2012-08-16T12:00:38.970
> 
> 标签：c#, .net, ms-word

我想知道是否有办法获取用户机器上打开的所有 Word 实例的列表？

我试过这个：

```
Process[]wordProcesses = Process.GetProcessesByName("WINWORD"); 
```

上面的行似乎总是只返回一个进程，我想是因为只有一个 MS Word 进程正在运行，但许多 Word 应用程序是打开的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:43:29.003

这里的一种方法是联系并使用`AccessibleObjectFromWindow()`从每个正在运行的 Word 实例获取 Microsoft.Office.Interop.Word.Application 实例。这样就可以轻松地查询他们的 Documents 集合并执行您需要执行的任何其他操作。

这个 SO 问题的答案会让你非常接近：[如何使用后期绑定访问 Microsoft Word 现有实例](https://stackoverflow.com/questions/2203968/how-to-access-microsoft-word-existing-instance-using-late-binding)。该答案使用 IDispatch 引用来操作从中获得的 Application 实例，`AccessibleObjectFromWindow()`但您应该能够执行以下操作：

```
if (hr >= 0)
{
    var app = ptr.Application;
    foreach (var item in app.Documents)
        {
            var doc = (Document) item;
            Console.WriteLine(doc.FullName);
    }
} 
```

# ipad - 如何使用 monotouch 在 uitableviewcell 中添加 uipickerview 作为子视图？

> ID：11986642
> 
> 赞同：0
> 
> 时间：2012-08-16T12:01:05.840
> 
> 标签：ipad, c#-4.0, uitableview, xamarin.ios, uipickerview

*   我已经为 iPad 实现了一个网格结构（比如 5 行和 10 列）。我通过在 UItableViewCell 的单行中添加许多 UITextFileds（通过创建框架）作为子视图（每个单元格都是可编辑的，就像一个 excel 表）来做到这一点。

*   现在我的任务是当用户点击任何单元格时有一个下拉菜单。我发现这很难实现，因为我是单触的新手。所以我决定选择默认的 UIPicker（鼓状结构）。

*   **所以这就是我现在想要实现的目标，当用户单击 iPad 屏幕下半部分的单元格时，我希望显示选取器元素（鼓）并且用户可以单击要选择的值一个值（不同的字段可能有不同的值范围）。**

*   **BottomLine 我想使用单点触控将 UIPicker 添加到 UItableViewcell**（使用单点触控对话框的 NB 正常过程在根元素下的部分中声明选择器元素，我想我不能在这里这样做。）

所以请告诉我如何去做，或者是否有更好的方法来实现这种下拉体验，保持网格完好无损。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:08:15.557

对于列表中的第 3 项：您可以在 iPad 上使用 UIPopoverController，您可以在其中放置 UIPicker 或任何其他控件。演示：[https](https://github.com/xamarin/monotouch-samples/tree/master/Popovers) ://github.com/xamarin/monotouch-samples/tree/master/Popovers将为您提供帮助。

![演示截图](../Images/edf079c18d92113fd62d6a6eba908fee.png)

您可以在 RowSelected 事件的 UITableViewSource (UITableViewDelegate) 子类中触发 UIPopoverController。

对于列表中的第 4 项：如果您想在 UITableViewCell 中添加 UIPicker，例如在最后一项中，您应该执行以下操作：

*   声明你自己的 UITableViewCell 子类，它在自己内部创建 UIPicker；
*   在 UITableView.GetCell 事件中检查 indexPath 是否指向最后一个单元格。如果是这样，请创建您的自定义 UITableViewCell。

# php - 将一个数组附加到另 一个具有相同键的数组

> ID：11986646
> 
> 赞同：0
> 
> 时间：2012-08-16T12:01:18.423
> 
> 标签：php, arrays

我有两个数组

```
$array1 = array(33=>'abc,bcd,cde,def');
$array2 = array(33=>'fgh,ghi,hij,ijk'); 
```

如何添加两个数组以获得以下结果？

```
$array3 = array(33=>'abc,bcd,cde,def,fgh,ghi,hij,ijk'); 
```

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:08:48.680

我想您想为多个键自动执行此操作。尝试这样的事情：

```
$newArray = array();
foreach ($array1 as $key => $value) {
    $newArray[$key] = $array1[$key] . ',' . $array2[$key];
} 
```

请记住，如果数据不完全匹配，您将需要检查数据是否在两个数组中。

# sql - 选择查询良好性能的主键选择

> ID：11986649
> 
> 赞同：1
> 
> 时间：2012-08-16T12:01:29.913
> 
> 标签：sql, sqlite, database-design

我有一个看起来像这样用 sqlite 创建的表。

```
CREATE TABLE Cars ( 

POWER DOUBLE ,
CAPACITY DOUBLE,
SPEED DOUBLE,   
TIME INTEGER  NOT NULL,
TYPE INTEGER  NOT NULL, 
MODEL INTEGER  NOT NULL,

PRIMARY KEY ( TIME, TYPE, MODEL )); 
```

TYPE有15个不同的值，每个类型有20个不同的MODEL值。对于每个模型，每 10 秒插入一个新记录。

一个小例子：

```
POWER----TIME----TYPE----MODEL
45.6     2588     3       14
46.8     2588     3       15
44.7     2588     3       16 
```

这张表真的很大，有数百万行。

如您所见，我的主键是`(TIME, TYPE, MODEL)`因为那是一个唯一标识符。

我的应用程序多次运行选择查询，当时间范围很大时，或者我为多个模型运行查询时，这可能需要很长时间。

例如，我经常运行这种类型的查询：

```
SELECT power, time, type, model 
FROM CARS 
WHERE type = 3 AND model = 14 AND time BETWEEN 2588 and 13550; 
```

我尝试过使用主键，例如`(TYPE, MODEL, TIME)`在某些情况下提高了性能，但不是在很长的时间间隔内。

我的问题是如何优化这种记录检索，以及哪种主键似乎最适合这种情况？

插入和更新在性能方面不是问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:10:11.520

主键中字段的顺序应该反映每个字段的选择性（最选择性优先）。

从表面上看，时间应该是第一位的，因为在特定时间选择会比特定类型或模型返回更少的记录。

但是，如果您的大部分或所有查询都将选择一个时间*范围*，那么最好将时间放在主键的*末尾*，因为范围选择的选择性不如特定值。

我建议将主键更改为 (model, type, time) - 按此顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T12:11:47.273

MSDN 上提供的关于复合键的一般指导是将具有最高基数（即最唯一值）的列放在键/索引的根部。

所以在你的情况下，关键应该是你所拥有的 - 即：

```
CREATE TABLE Cars ( 
  PRIMARY KEY ( TIME, TYPE, MODEL ),
  POWER DOUBLE ,
  CAPACITY DOUBLE,
  SPEED DOUBLE,   
  TIME INTEGER NOT NULL,
  TYPE INTEGER NOT NULL, 
  MODEL INTEGER NOT NULL
); 
```

这*仅*适用于您知道 TIME 值的查询。

# android - 在谷歌地图屏幕上消费动作

> ID：11986650
> 
> 赞同：0
> 
> 时间：2012-08-16T12:01:31.597
> 
> 标签：android, google-maps, onclick

我正在尝试获取用户在谷歌地图上单击的位置（纬度，经度），如何做到这一点？

我试着在网上找到它还没有运气..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:07:54.203

关于下面提到的 HelloItemizedOverlay 类，具体实现请参考这个[谷歌地图教程](https://developers.google.com/maps/documentation/android/hello-mapview)。这将在您单击标记的任何位置创建标记，并且还允许用户拖动地图并寻找可以窥视的地方。

```
class HelloGoogleMaps extends MapActivity
{
@Override
public void onCreate(Bundle savedInstanceState)
{
List<Overlays> mapOverlays = map.getOverlays();
//This is going to be your pointer (you can use whatever image you want as your indicator
final Drawable drawable = this.getResources().getDrawable(R.drawable.indicator);
map.setOnTouchListener(new View.OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        if(event.getAction() == MotionEvent.ACTION_UP)
        {
        HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable, HelloGoogleMaps.this);
        GeoPoint p = mapView.getProjection().fromPixels(
            (int) event.getX(), (int) event.getY());
        String lat = Double.toString(p.getLatitudeE6() / (Math.pow(10,6)));
        String lon = Double.toString(p.getLongitudeE6() / (Math.pow(10,6)));
        OverlayItem overlayitem = new OverlayItem(p, "Title text", "Body Text");
        itemizedoverlay.addOverlay(overlayitem);
        mapOverlays.add(itemizedoverlay);
        map.postInvalidate();
        return true;
        }
    }
});
} 
```

# javascript - 在 Magento 的后端块（选项卡编辑表单）中添加额外的 js

> ID：11986651
> 
> 赞同：2
> 
> 时间：2012-08-16T12:01:36.993
> 
> 标签：javascript, magento, block, backend

我正在尝试向管理块添加一个额外的 js 文件，我想通过 php 代码来做到这一点。

**场景**
我的块是管理员编辑表单的选项卡块，因此它扩展`Mage_Adminhtml_Block_Widget_Form`和实现`Mage_Adminhtml_Block_Widget_Tab_Interface`

**我的方法**
在选项卡块类 __prepareLayout() 方法中，我添加了这一行：

```
 $this->getLayout()->getBlock('head')->addJs('folder/gallery.js'); 
```

这应该没问题，但实际上没有导入任何 js。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T12:48:08.750

为什么不使用布局 XML 执行此操作？理想情况下，您会为您的模块指定一个 adminhtml 布局更新文件，但您可以将 local.xml 文件添加到该`adminhtml/default/default/layout`文件夹​​并在其中进行正常`<reference name="head"><action method="addJs">...</reference>`调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:35:15.387

正如@benmarks 所建议的，这是一种特殊情况，但类似于[如何在 Magento 中以编程方式添加 JS？](https://stackoverflow.com/questions/11937348/how-to-add-js-programmatically-in-magento)

问题是已经渲染了相同的“头”块。

我找到了针对这种特殊情况的解决方案（在后端的编辑选项卡表单块中添加 js）：

为了解决这个问题，我在`_prepareLayout()`扩展块的方法中添加了上述行`Mage_Adminhtml_Block_Widget_Form`

# android - phonegap 从服务器加载页面

> ID：11986652
> 
> 赞同：0
> 
> 时间：2012-08-16T12:01:36.777
> 
> 标签：android, cordova

我是 phongeap 的新手。我看到您可以在更改当前页面时从服务器加载页面，对我来说这是最好的解决方案，但我想知道这在真实设备上的现实生活中有多慢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:18:51.183

您可以从您的服务器请求您想要的任何页面并通过 Javascript 显示它。但是，这看起来不像原生应用程序，因为加载页面时会有延迟。因此解决方案是将整个布局存储在客户端应用程序中，有几个 JavaScript 框架可以简化此任务，例如 jQuery Mobile 或 Sencha。这并不意味着您不能从任何服务器检索数据，但您可以以任何您想要的格式（Json、XML ...）请求它来提供您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T12:29:50.893

你在地铁、巴士、船、厕所里有真实的设备和使用过的移动互联网吗（^^）？
从技术上讲，加载其他页面只是将源代码传输到设备的问题。HTML、CSS JavaScript、资源等。
所以速度真的取决于实际情况、网络覆盖范围、可用带宽等。

*为什么您认为加载网页是最适合您的解决方案？*（如果你问这个问题，你可能不太相信它实际上是**最好**的解决方案，不是吗？）
如果你的内容经常变化，为什么不只下载必要的部分到你的应用程序，同时提供包中的所有布局信息.

特别是 JSON 非常轻量级（就数据大小而言），这就是为什么它通常是我首选的武器。

# sql - EntityFramework：在两个不同的上下文中检索具有条件的数据

> ID：11986656
> 
> 赞同：7
> 
> 时间：2012-08-16T12:01:43.593
> 
> 标签：sql, linq, entity-framework, datacontext, cross-database

我正在两个不同的数据库（具有不同的上下文）之间导入数据。

所以我有两种不同的背景。目标是将上下文 A 的一些数据导入到上下文 B 中。

上下文 B 中的数据从不直接编辑，它们仅从上下文 A 导入。在上下文 B 中，我复制了从中导入它的 ID。

现在我正在尝试检索不在上下文 B 中或具有更新版本的所有数据的列表。

我在两个表中有一个 ModifiedAt" 字段，让我知道该字段是否已被修改。

这是我当前的代码：

```
//Here I get all my current data in the context B with their modification time
Dictionary<int,DateTime> currentItems = contextB.Dossiers.ToDictionary(d=>d.MatchingReferenceId, d=>d.ModifiedAt);

//And here the pain starts:
contextA.Dossiers.Where(da=> !currentItems.Keys.Contains(da.Id) || currentItems.FirstOrDefault(db=>db.Key == da.Id).Value <da.ModifiedAt)//And I'm looping on it with a foreach. 
```

第一部分（我检查上下文 B 是否有元素）有效，第二部分，我得到了这个异常：

```
Unable to process the type 'System.Collections.Generic.KeyValuePair`2[]', because it has no known mapping to the value layer. 
```

但是我不能更简单地在 Id 和修改时间之间建立这种联系（一开始，我有一个来自其他上下文的 POCO 类，我也尝试过使用匿名类型，结果相同）

我错过了什么？

**编辑 1**

我还尝试了完全相同的结果： contextA.Dossiers.Where(da=> !currentItems.Keys.Contains(da.Id) || currentItems.Any(db=>db.Key == da.Id && db.价值

**编辑 2**

我尝试了 lambda，但在这里它不喜欢同时使用两个上下文：

```
var myList = (from db in contextB.Dossiers
                      let dstId = newContext.Dossiers.Select(d=>d.MatchingReferenceId)
                      from da in contextA.Dossiers
                      where !db.Contains(dSource.ID)|| (db.MatchingReferenceId == da.Id && db.ModifiedAt< da.ModifiedAt) 
                      select new {NewId =db.Id, OldId = da.Id}); 
```

-->

> 指定的 LINQ 表达式包含对与不同上下文关联的查询的引用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-16T12:37:31.860

据我所知，你没有遗漏任何东西。

您不能创建使用来自另一个上下文或任何内存引用对象的查询。这两件事都不能翻译成 SQL。只能使用简单的值类型，因为它们可以转换为 SQL 参数。

您正在使用字典，它是键值对的集合，而这些 kvp 无法翻译成 SQL。此外，您的简单 POCO 类是一个无法使用的 .net 对象。

我知道的唯一例外是 .Contains() 方法与某种值类型的集合/列表相结合，可以在查询中翻译。例如：

```
List<int> someIds = ...
var result = context.Data.Where(d => someIds.Contains(d.Id)).ToList(); 
```

除了在每条记录基础上处理事情之外，我没有看到单一查询解决方案。

# c# - 在 Caliburn.Micro 约定绑定的 TextBox 中自定义字符串格式

> ID：11986661
> 
> 赞同：7
> 
> 时间：2012-08-16T12:01:59.857
> 
> 标签：c#, wpf, mvvm, binding, caliburn.micro

我有一个通过*Caliburn.Micro*命名约定`TextBox`绑定到视图模型编号属性的 WPF。我希望能够自定义字符串格式，同时保留*Caliburn.Micro*设置的约定绑定。我该怎么做？`Distance`*`TextBox`*

 **从我的*视图模型*：

```
public double Distance
{
    get { return _distance; }
    set
    {
        _distance = value;
        NotifyOfPropertyChange(() => Distance);
    }
} 
```

从我的*角度来看*：

```
<TextBox x:Name="Distance"/> 
```

当`Distance`非零时，我想用一组固定的小数显示数字，当`Distance`是零时，我希望文本框为空。

使用显式绑定我可以将`TextBox.Text`属性绑定到`Distance`，然后我可以`StringFormat`同时设置：

```
<TextBox x:Name="Distance" Text="{Binding Distance, StringFormat=0.000;;#}"/> 
```

但是，显式绑定随后会使*Caliburn.Micro*命名约定绑定`Text`短路。是否可以自定义字符串格式而不必同时设置属性的绑定路径，以便我可以完全依靠*Caliburn.Micro*来处理-to-绑定？*`TextBox.Text`*`Distance``TextBox`**

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-23T04:05:33.353

你想做什么是不可能的。最简单的方法是你自己提供。第二种方法是在 ViewModel 中公开字符串属性并在 getter 中对其进行预格式化。****

# c# - Visual Studio 2010 中的构建问题

> ID：11986663
> 
> 赞同：4
> 
> 时间：2012-08-16T12:02:08.633
> 
> 标签：c#, setup-project

如果不检查我的安装项目，我无法在 Visual Studio 2010 中构建我的解决方案。我可以做些什么来纠正这个问题吗？

这是错误消息：

> 您尝试的命令无法完成，因为文件 'FooSetup.vdproj' 受源代码控制且未检出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:10:21.217

问题是因为未检出文件“FooSetup.vdproj”。这意味着它是一个**只读文件**。

如果您不想签出文件，请脱机工作（项目未连接到源代码管理）

[这是VS2010 SP1](http://connect.microsoft.com/VisualStudio/feedback/details/650587/vs-2010-sp1-changes-packagecode-in-vdproj-on-each-build-but-fails-as-source-controlled)的问题。您可以检查 Microsoft Connect 中提到的任何解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-01T14:32:17.697

1.  右键单击解决方案资源管理器中的设置项目。
2.  从上下文菜单中选择**签出以进行编辑...。**
3.  在出现的窗口中按**Check Out**按钮。

问题应该得到解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T13:04:38.347

在进行进一步研究时，我发现一篇文章解释了升级到 SP1 会导致此问题，并且有一个可用的修补程序。我的同事没有遇到问题，也没有升级到 VS2010 SP1。

这是描述我的问题以及安装项目中发生的情况的摘录：

我刚刚从 VS 2010 升级到 VS 2010 SP1，现在在构建受源代码控制的设置 (.vdproj) 项目时，我遇到了对话框的“无限循环”。如果未签出 .vdproj 并且我构建了项目，我会在开始构建安装项目时收到一条消息，提示“您尝试的命令无法完成，因为文件 'XXX.vdproj' 受源代码控制且不受检查过了。” 对话框上有确定和帮助按钮，但如果我按下确定按钮，对话框就会关闭并重新出现。然后我必须使用任务管理器来杀死 devenv.exe。

如果我在构建之前检查 .vdproj，我可以看到文件已更改。它总是会更改安装程序的 PackageCode 属性，但有时也会重新排序文件的各个部分。

我的问题是，在所有以前版本的 VS 中，简单地构建安装程序并没有对文件进行更改，我不想一直检查我的安装项目才能构建它们. 我还有一个运行 devenv 的脚本构建，但由于与上述相同的原因而失败。

[http://connect.microsoft.com/VisualStudio/feedback/details/650587/vs-2010-sp1-changes-packagecode-in-vdproj-on-each-build-but-fails-as-source-controlled](http://connect.microsoft.com/VisualStudio/feedback/details/650587/vs-2010-sp1-changes-packagecode-in-vdproj-on-each-build-but-fails-as-source-controlled)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T10:34:57.523

Microsoft 已修复此问题，此修复程序可在此处获得

微软连接：[http ://connect.microsoft.com/VisualStudio/Downloads/DownloadDetails.aspx?DownloadID=35848](http://connect.microsoft.com/VisualStudio/Downloads/DownloadDetails.aspx?DownloadID=35848)

代码库： http: [//archive.msdn.microsoft.com/KB2529927](http://archive.msdn.microsoft.com/KB2529927)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T12:11:12.950

安装项目因与源代码管理不兼容而臭名昭著。如果*FooSetup.vdproj*中的任何内容在构建期间需要/更改，它将失败并显示该消息。

每次签入后，我总是立即签出安装项目。AFAIK 这是一个 PITA。

# javascript - 允许在自定义事件上“查找用法”的 IDE？

> ID：11986664
> 
> 赞同：3
> 
> 时间：2012-08-16T12:02:13.890
> 
> 标签：javascript, jquery, events, javascript-events

这是一个经常发生在我身上的场景：

我读了代码，偶然发现了这样的一行

```
$('#gotham').trigger('batman_arrived'); 
```

现在，我应该如何知道代码的哪些部分实际监听了这个事件？我不想对我的整个项目进行自由文本搜索。

任何人都知道是否存在可以让我做这样的事情的 IDE？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:07:08.783

我不知道这是否可以做到，但对我来说唯一可用的 Javascript IDE 是 Web Storm...这是 Intelij Idea 的子集，用于使用 Javascript 和 Html，试试吧（如果你还没有)...

# java - java定义名称为Object的类

> ID：11986667
> 
> 赞同：4
> 
> 时间：2012-08-16T12:02:21.677
> 
> 标签：java

我`Object`在 package 中创建了一个名为 name 的类`java.lang`。在另一个包中，我创建了`Main`类。现在在 Main 类的 main 方法中，当我编写`new Main()`并在之后放置一个点时，我看不到`equals()`，`wait()`等等。即实际 Object 类的方法。

我的问题是你不认为创建一个名为 Object 的类（特别是 java.lang 包）是不允许的。由于 Object 类默认情况下由所有类继承，所以在我的情况下，我定义的任何类都会自动继承我的类而不是实际的对象类，因为我的对象类的类名和包名与实际对象类的相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T12:06:16.370

这是一个相当开放的问题。

应该允许吗？为什么不呢，如果你知道自己在做什么，那就发疯吧。

我同意这在理论上有点危险，但我不明白有人会如何错误地做到这一点。如果有人出于某种原因（例如学术原因）真的想重新定义整个 Object 类，那么他/她可以自行承担风险。

没有任何语言可以完全阻止您将箭射中自己的膝盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:32:45.260

我可以确认，即使您编写一个它也不会有用（至少对于通常的 java 类加载） java.lang 中的那些具有优先权，因为它们已经由系统类加载器加载，并且您的 Object 类将永远不会被选中并调用任何自定义方法只会导致运行时错误（java.lang.NoSuchMethodError）

但是我不确定当您使用自定义类加载器并覆盖其 loadClass 方法时的行为，即它显式加载您的类字节但不在父类加载器中进行查找。可能是家庭作业:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T13:37:01.457

如果我无法将第三方库包装起来，我经常使用这个技巧（在我们的类路径中有一些第三方相同的包和类名）来覆盖第三方库的功能。
在任何情况下，所有系统类都必须在客户端程序（我们的应用程序）加载之前加载到 jvm 中。这一切都是为了处理`ClassLoader`，编译器允许它，因为它真的不太关心所有的类，但是在运行时，JVM类加载器会考虑这些东西，如果你看一下默认的源代码`ClassLoader`（oracle jdk） , 你可以看到会有一个检查你不应该有任何包开头`java.`

```
private ProtectionDomain preDefineClass(String name,
                        ProtectionDomain protectionDomain)
    {
    ...
    if ((name != null) && name.startsWith("java.")) {
        throw new SecurityException("Prohibited package name: " +
                    name.substring(0, name.lastIndexOf('.')));
    }
...
} 
```

即使使用著名的代码检测工具（例如`javaassist`会限制这种行为），它们也会检查一个类是否可以检测`Instrumentation.isModifiableClass`。
最后，这一切都取决于`ClassLoader`实现，并且由于它必须遵守规范，您需要考虑从类路径到加载的类的顺序。

# routing - 如何通过 symfony 1.4 routing.yml 中的参数传递动态值

> ID：11986669
> 
> 赞同：0
> 
> 时间：2012-08-16T12:02:26.977
> 
> 标签：routing, symfony-1.4, paramarray

我想像这样显示外部网址：

```
www.abc.com/username 
```

此页面需要`group_id`, `ticket_id`，但我不想在外部 url 中显示这些变量。

我的`routing.yml`：

```
my_profile:
  url:   /:username
  param: { module: profile, action: index, grp_id: GRRf3eedfb7-842d-4cbd-a17f-141334cd1b4d, ticket: UAe25d7784-7b9f-499a-8e53-57f5aee91d95, display: true } 
```

`indexSuccess.php`

```
echo url_for('@my_profile?module=profile&action=index&username='.$username.'&grp_id='.$groupID.'&ticket='.$ticket) 
```

请注意，在`routing.yml` `params`has static`grp_id`和`ticket`. 它很好地输出。

但是，我想让它动态化。`grp_id`并且`ticket`应该是动态值，它们不应该在 URL 中可见。

# hadoop - 成功后如何保存 PIG 作业日志文件。

> ID：11986679
> 
> 赞同：2
> 
> 时间：2012-08-16T12:03:09.897
> 
> 标签：hadoop, apache-pig

我注意到，当运行 PIG 脚本出错时，会生成并保存一个日志。但是当没有错误时，日志文件被删除。即使作业成功，有没有办法保留日志文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T15:29:32.410

默认情况下会记录错误（例如：脚本解析错误）`pig.logfile`，可以在`$PIG_HOME/conf/pig.properties`. 如果您也想记录状态消息，请准备一个有效`log4j.properties`文件并将其设置在`log4jconf`属性中。

例如：将 $PIG_HOME/conf 中的 log4j.properties.template 重命名为 log4j.properties 并设置以下内容：

```
log4j.logger.org.apache.pig=info, B

# ***** A is set to be a ConsoleAppender.
#log4j.appender.A=org.apache.log4j.ConsoleAppender
# ***** A uses PatternLayout.
#log4j.appender.A.layout=org.apache.log4j.PatternLayout
#log4j.appender.A.layout.ConversionPattern=%-4r [%t] %-5p %c %x - %m%n

# ***** B is set to be a FileAppender.
log4j.appender.B=org.apache.log4j.FileAppender
#log4j.appender.B.File=/home/user/pig-distrib/logs/pig_success.log
log4j.appender.B.File=/home/user/pig-distrib/logs/pig.log
log4j.appender.B.layout=org.apache.log4j.PatternLayout
log4j.appender.B.layout.ConversionPattern=%-4r [%t] %-5p %c %x - %m%n
log4j.appender.B.Append=true 
```

使用 Pig v0.10.0 (r1328203) 时，我发现成功的 pig 任务不会将作业的历史日志写入 hdfs 上的输出目录。
( `hadoop.job.history.user.location=${mapred.output.dir}/_logs/history/`)

如果您想通过各种方式获取这些历史记录，请以这种方式在您的 pig 脚本中设置 mapred.output.dir：

```
set mapred.output.dir '/user/hadoop/test/output'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-29T04:50:27.860

准备好 log4j.properties 文件后，打开 pig.properties 文件并取消注释以下内容：

log4jconf=$PIG_HOME/conf/log4j.properties

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-11T06:04:24.260

*撞旧线*

简单的方法是重定向输出

```
pig -f pig-file 2> xyz.log  -- this will give just the logs
pig -f pigfile &> xyz.log -- logs + stdout(dumps) 
```

# drupal - 如何在drupal 7中发送电子邮件

> ID：11986683
> 
> 赞同：4
> 
> 时间：2012-08-16T12:03:19.723
> 
> 标签：drupal, drupal-7

有没有人可以帮助提供在 drupal 7 中发送电子邮件的示例源代码。任何人都可以通过 contact_submit 函数帮助使用**drupal_mail()**。我正在使用自定义模块：

```
function contact_menu() {
  $items['contact'] = array(
    'title' => 'contact form',
    'page callback' => 'drupal_get_form',
    'page arguments' => array('contact_form'),
    'access arguments' => array('access content'),
  );

  return $items;
}

function contact_form() {
  $form['intro'] = array(
    '#markup' => t('Use this form to send a message to an e-mail address. No spamming!'),
  );
  $form['email'] = array(
    '#type' => 'textfield',
    '#title' => t('E-mail address'),
    '#required' => TRUE,
  );
  $form['message'] = array(
    '#type' => 'textarea',
    '#title' => t('Message'),
    '#required' => TRUE,
  );
  $form['submit'] = array(
    '#type' => 'submit',
    '#value' => t('Submit'),
  );

  return $form;
}

    function contact_validate($form, &$form_state) {
      if (!valid_email_address($form_state['values']['email'])) {
        form_set_error('email', t('That e-mail address is not valid.'));
      }
    }
function contact_form_submit($form, &$form_state) {
//What i should write here ???
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-02-08T11:14:31.207

放入contact_form_Submit函数

```
$message = 'New signup email address'; // Body of your email here.
 $params = array(
           'body' => $message,
           'subject' => 'Website Information Request',
           'headers'=>'simple',
     );
     $to = "Your Email Address";
    drupal_mail('contactform', 'send_link', $to, language_default(), $params, 'demo@demo.com', TRUE); 
```

和创建新功能

```
function contact_mail($key,&$message,$params) 
{

       switch ($key) {
             case 'send_link':
                  $message['subject']=t($params['subject']);
                  $message['body'][]=$params['body'];
                  $message['headers']['Content-Type'] = 'text/html; charset=UTF-8; format=flowed';
       break;
          }
 } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T12:13:11.003

示例模块包含许多入门示例，包括电子邮件。[在此处](http://api.drupal.org/api/examples/email_example!email_example.module/group/email_example/7)的 api 站点中查看 参见[drupal_mail()](http://api.drupal.org/api/drupal/includes!mail.inc/function/drupal_mail/7)函数以查看函数参数和用户示例以及函数使用。

GIYF。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T22:55:26.340

请参阅示例模块的电子邮件示例。它为大多数核心功能提供了一些非常好的示例

[http://drupal.org/project/examples](http://drupal.org/project/examples)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-24T09:05:46.820

您可以在自定义模块中使用您自己选择的挂钩中的此代码：

```
function yourmodulename_mail($from = 'default_from', $to, $subject, $message) {
        $my_module = 'yourmodulename';
        $my_mail_token = microtime();
        if ($from == 'default_from') {
            // Change this to your own default 'from' email address.
            $from = variable_get('system_mail', 'admin@yoursite.com');
        }
        $message = array(
            'id' => $my_module . '_' . $my_mail_token,
            'to' => $to,
            'subject' => $subject,
            'body' => array($message),
            'headers' => array(
                'From' => $from,
                'Sender' => $from,
                'Return-Path' => $from,
            ),
        );
        $system = drupal_mail_system($my_module, $my_mail_token);
        $message = $system->format($message);
        if ($system->mail($message)) {
            return TRUE;
        } else {
            return FALSE;
        }
    } 
```

然后你可以像这样使用上面的函数：

```
 $user = user_load($userid); // load a user using its uid
    $usermail = (string) $user->mail; // load user email to send a mail to it OR you can specify an email here to which the email will be sent 
    customdraw_mail('default_from', $usermail, 'You Have Won a Draw -- this is the subject',  'Congrats! You have won a draw --this is the body'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-13T13:23:27.543

如果您是 drupal 新手，那么您可以使用内置的 php 发送邮件而不使用 drupal 函数：

例如：

```
function contact_form_submit($form, &$form_state) {
to=$user->mail;    
$subject="";
$headers="mail-id";    
$message="your message here";
$sentmail = mail($to,$subject,$message,$headers);    
} 
```

# python - python中的url验证器和缩短器

> ID：11986686
> 
> 赞同：0
> 
> 时间：2012-08-16T12:03:31.160
> 
> 标签：python, url, validation

我在 python 中编写了一个简单的 url 验证器和缩短器，如何从网站 url 保存小尺寸的图像？并认识到它不是像 .rar 或 .zip 这样的“文件”？如果您编辑我的代码以获得更好的性能，我很感激..

```
from urllib2 import Request, urlopen, URLError
from urlparse import urlparse
import string
import random

url = raw_input('plZ enter the url: ').lower()      #get input and convert to lowercase
while True:
    if url[0:7] == 'http://' or url[0:8] == 'https://' or url[0:6] =='ftp://':          #check the url protocol
        try:                                        #try to open url
            response = urlopen(url)
            parsed_url = urlparse(url)
            rand_url = ''.join(random.choice(string.ascii_uppercase + string.digits + string.ascii_lowercase) for x in range(6))
            print " The shortened url is: http://url.com/" + rand_url
            print "\n Original URL is: "+url
            exit()
        except URLError, e:                         #except the error by asking the address again
            if hasattr(e, 'reason'):
                print "URL is not valid or server is NOT responsive..plZ try again.."
                url = raw_input('plZ enter the url: ').lower()
            #print 'Reason: ', e.reason
            elif hasattr(e, 'code'):
                print 'The server couldn\'t fulfill the request.'       #message in case of server or connection error
                print 'Error code: ', e.code
    else:
        print "\n protocol missing, using HTTP instead.. \n"
        url = "http://"+url 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:25:28.073

1) 如果您想抓取图像并调整大小，请考虑使用 PIL 或 PyImageMagik [优​​秀 ImageMagik 的 Python 绑定]

2）如果你想抓取页面的截图，那么很多人之前也有同样的问题。抓取屏幕截图调整大小后，您始终可以使用上面第 1) 点中提到的解决方案。Webkit2png 是实现相同功能的好工具。

[http://www.paulhammond.org/webkit2png/](http://www.paulhammond.org/webkit2png/)

# asp.net-mvc-3 - 在按钮提交的asp.net mvc3中，不会导致执行操作

> ID：11986688
> 
> 赞同：0
> 
> 时间：2012-08-16T12:03:34.563
> 
> 标签：asp.net-mvc-3

单击提交按钮时，我被卡住了。单击提交按钮后，它不会返回到 HttpPost 操作。我正在共享我的代码。

**控制器：** 公共类 AccountController：控制器 {

```
 public ActionResult Index()
        {
            return View();
        }

        //
        // GET: /Account/LogOn
        public ActionResult UserLogin()
        {
            return View();
        }

        [HttpPost]
        public ActionResult UserLogin(LogOn model)
        {
            if (ModelState.IsValid)
            {
                return View("Compltete", model);
            }

            // If we got this far, something failed, redisplay form
            return View(model);
        }

    } 
```

**看法：**

```
@model SanjiviniAnalytics.Models.LogOn

<h2>User Login</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script> 
```

@using (Html.BeginForm("UserLogin", "Account", FormMethod.Post)) {

```
 <div>
        <fieldset>
            <legend>Sign In</legend>

            <div class="editor-label">
                @Html.LabelFor(m => m.UserName)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(m => m.UserName)
                @Html.ValidationMessageFor(m => m.UserName)
            </div>

            <div class="editor-label">
                @Html.LabelFor(m => m.Password)
            </div>
            <div class="editor-field">
                @Html.PasswordFor(m => m.Password)
                @Html.ValidationMessageFor(m => m.Password)
            </div>
            <p>
                <input type="submit" value="Log In" />
            </p>
        </fieldset>
    </div>

} 
```

**模型：**

```
public class LogOn
{
    [Required]
    [Display(Name="User Name")]
    public string UserName { get; set; }

    [Required]
    [Display(Name="Password")]
    [DataType(DataType.Password)]
    public string Password { get; set;}
} 
```

谁能帮我找出我哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:05:49.783

从表格中取出`Controller`.. MVC 不要求您在控制器名称中包含 Controller 部分：

```
@using (Html.BeginForm("UserLogin","Account")) 
```

另外，尝试将 POST 指定为方法：

```
@using (Html.BeginForm("UserLogin", "Account", FormMethod.Post)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T12:17:17.503

试试这个：

```
@using (Html.BeginForm("UserLogin","Account", FormMethod.Post)) 
```

（刚刚看到西蒙打败了我：））

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T13:01:18.273

正如西蒙所说，以下将起作用。HttpPost 操作将从 FormMethod.Post 方法中发生。

```
@using (Html.BeginForm("UserLogin", "Account", FormMethod.Post)) 
```

# android - 删除 android webview 上的 youtube 视频标题

> ID：11986689
> 
> 赞同：0
> 
> 时间：2012-08-16T12:03:35.150
> 
> 标签：android, webview, youtube

我正在编写一个使用 WebView 从 youtube 播放视频的应用程序。播放没有问题，但视频有它自己的标题，这对我来说不是那么有用。怎么能去掉呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:04:18.847

您可以拥有一个 javascript 文件来完成此操作，然后在 onPageFinished[参考上使用 loadUrl 方法将其注入](http://lexandera.com/2009/01/injecting-javascript-into-a-webview/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-04T07:41:01.537

我有 youtube 视频定制 iframe 的完整解决方案

```
WebView webView;
    ProgressBar progressBar;
    ImageView back_btn;

    String video_url = "KK9bwTlAvgo", html = "";

@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.full_screen_youtube_video_screen);

        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

        back_btn = (ImageView) findViewById(R.id.full_videoview_btn);
            back_btn.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    webView.loadData("", "text/html", "UTF-8");
                    finish();
                }
            });

            webView = (WebView) findViewById(R.id.webView);
               progressBar = (ProgressBar) findViewById(R.id.progressBar);

            if (video_url.equalsIgnoreCase("")) {
                finish();
                return;
            }

            WebSettings ws = webView.getSettings();
            ws.setLayoutAlgorithm(WebSettings.LayoutAlgorithm.SINGLE_COLUMN);
            ws.setPluginState(WebSettings.PluginState.ON);
            ws.setJavaScriptEnabled(true);
            webView.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);
            webView.reload();

            if (networkUtil.isConnectingToInternet(Act_VideoPlayer.this)) {
                html = getHTML(video_url);
            } else {
                html = "" + getResources().getString(R.string.The_internet_connection_appears_to_be_offline);
                CustomToast.animRedTextMethod(Act_VideoPlayer.this, getResources().getString(R.string.The_internet_connection_appears_to_be_offline));
            }

            webView.loadData(html, "text/html", "UTF-8");

            WebClientClass webViewClient = new WebClientClass(progressBar);
            webView.setWebViewClient(webViewClient);
            WebChromeClient webChromeClient = new WebChromeClient();
            webView.setWebChromeClient(webChromeClient);
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        try {
            webView.loadData("", "text/html", "UTF-8");
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    @Override
    public void onBackPressed() {
        super.onBackPressed();
        try {
            webView.loadData("", "text/html", "UTF-8");
            finish();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public class WebClientClass extends WebViewClient {
        ProgressBar ProgressBar = null;

        WebClientClass(ProgressBar progressBar) {
            ProgressBar = progressBar;
        }

        @Override
        public void onPageStarted(WebView view, String url, Bitmap favicon) {
            super.onPageStarted(view, url, favicon);
            ProgressBar.setVisibility(View.VISIBLE);
        }

        @Override
        public void onPageFinished(WebView view, String url) {
            super.onPageFinished(view, url);
            ProgressBar.setVisibility(View.GONE);
        }

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            LogShowHide.LogShowHideMethod("webview-click :", "" + url.toString());
            view.loadUrl(getHTML(video_url));
            return true;
        }
    }

    public String getHTML(String videoId) {
        String html = "<iframe class=\"youtube-player\" " + "style=\"border: 0; width: 100%; height: 96%;"
                + "padding:0px; margin:0px\" " + "id=\"ytplayer\" type=\"text/html\" "
                + "src=\"http://www.youtube.com/embed/" + videoId
                + "?&theme=dark&autohide=2&modestbranding=1&showinfo=0&autoplay=1\fs=0\" frameborder=\"0\" "
                + "allowfullscreen autobuffer " + "controls onclick=\"this.play()\">\n" + "</iframe>\n";
        LogShowHide.LogShowHideMethod("video-id from html url= ", "" + html);
        return html;
    } 
```

# android - Android按钮有时很小

> ID：11986690
> 
> 赞同：-1
> 
> 时间：2012-08-16T12:03:36.783
> 
> 标签：android, android-camera, android-button

我有一个有按钮的布局。在图形布局编辑器中，按钮填充宽度并具有 wrap_content 高度，这为文本提供了一些填充（就像通常的按钮一样）。然而，当使用这种布局启动一个活动时，按钮有时会决定将文本紧紧地包裹起来，从而形成一个非常小的细按钮。

当我说有时，我的意思是有时，在我的应用程序中执行完全相同的操作可能会也可能不会产生这个结果。

我认为这个问题与启动它的活动有关，这是一个带有相机预览的活动。像其他人所做的那样，这个应用程序使用带有垂直组件的横向布局，以使其在纵向握住手机时看起来正确（我知道它一团糟，但我们希望支持 api7）。

因此，我的有问题的活动/布局是从此启动的`cameraActivity`，并且在此过程中，方向发生了变化。我相信这是问题的根源。

有按钮布局：

```
<Button android:id="@+id/ContinueBtn"
    android:text="@string/btn_continue"
    style="@style/main_button"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:typeface="normal"
    android:onClick="onButtonAction"
    android:background="@drawable/button_animated" >
</Button> 
```

作为参考，在设置包含此按钮的布局之前，活动将自身设置为纵向。

总而言之，有时我会得到一个又薄又宽的按钮。其他时候我得到一个正常、健康、不挨饿的按钮。我相信这是由于屏幕方向发生了变化——随着方向的变化，布局引擎有时会设法错过按钮的默认填充。我的问题首先是，这是什么原因造成的？我对吗？其次：我该如何防止这种情况？

* * *

我还应该补充一点，我*认为*这与我的图像自定义背景有关 - 我无法使用默认按钮实现它。

此外，这里有一些问题的图像： ![饥饿的按钮](../Images/1407e9996e43bfcb4b9d731fd939cd71.png) ![谁吃了所有的馅饼按钮](../Images/6ba521514b612566d65d7ea17f3b9c27.png) EDIT2：所以，在下面的评论中提出了一些解决方案。但谁能解释为什么这种效果如此不一致？有某种比赛条件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:10:45.747

感谢 Espiandev 和 Wasaig 为这个问题提出了一些解决方案。我的问题原来是按钮选择器中的 'constantSzie="true"' （诚然，我没有在原始问题中提供。

关闭此功能将解决问题（评论中提到的其他两种解决方案中的任何一种）。

然而，就目前而言， constantSize 不起作用（据我所知）。我相信代码中的某个地方存在一个错误，它获得了恒定的大小（我在这里查看了源代码，并不能立即发现任何错误： http: [//grepcode.com/file/repository.grepcode.com/ java/ext/com.google.android/android/4.0.3_r1/android/graphics/drawable/DrawableContainer.java#DrawableContainer.DrawableContainerState.computeConstantSize%28%29](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/graphics/drawable/DrawableContainer.java#DrawableContainer.DrawableContainerState.computeConstantSize%28%29)）。我怀疑intrinsicSize 被返回为'-1'。

我在这里提交了一个 android 错误报告，其中包括一个生成错误的示例项目： [http ://code.google.com/p/android/issues/detail?id=36432](http://code.google.com/p/android/issues/detail?id=36432)

# android - 我无法停止 ProgressDialog Android

> ID：11986695
> 
> 赞同：0
> 
> 时间：2012-08-16T12:03:46.900
> 
> 标签：android, progressdialog

您好，我有一个 Android 应用程序，在我的应用程序 webview 中，我尝试制作 ProgressDilog。当网站正在加载时，在活动标题中每件事都很好，但在进度对话框中我无法停止它。这是我的代码：

```
mainWebView.setWebChromeClient(new WebChromeClient() {

           public void onProgressChanged(WebView view, int progress)
            {
                activity.setTitle("Loading...");
                activity.setProgress(progress * 100);
                 progressDialog = ProgressDialog.show(MainActivity.this, "", "Loading...");

                if(progress == 100)
                {   
                  activity.setTitle(mainWebView.getTitle());
                      progressDialog.dismiss();
                }   

            }

        }); 
```

但是progressDialog.dismiss(); 不工作:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T12:09:19.180

我认为你应该`PD.show()`只做一次，而不是每次`onProgressChanged()`。您可能有十几个 PD 正在运行。

**编辑：**更准确地说：`pd.show()`当你开始你正在做的事情时，你会做。在`onProgressChanged()`你用一些内容（加载百分比或其他）更新你的进度条`setProgress()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T13:40:40.097

请参阅这个简单的演示，它将在每个步骤中显示 ProgressDialog。

```
public class AsyntaskActivity extends Activity {
 final Activity activity = this;
 private WebView webView; 
 private AlertDialog alert; 
 private Builder builder;
 protected void onCreate(Bundle savedInstanceState) {     
     super.onCreate(savedInstanceState);  
     setContentView(R.layout.main);
     webView = (WebView)findViewById(R.id.tview);

     webView.setWebViewClient(new WebViewClient(){          
         @Override         
         public void onLoadResource(WebView view, String url) {             
             super.onLoadResource(view, url);         
         }          
         @Override         
         public void onPageFinished(WebView view, String url) {             
             super.onPageFinished(view, url);             
             alert.setTitle("Finish Loading. . ."); 
             alert.dismiss();
         }          
         @Override         
         public void onPageStarted(WebView view, String url, Bitmap favicon) {             
             super.onPageStarted(view, url, favicon);             
             alert.setTitle("Start Loading. . . ");         
        }      
    });     
     webView.setWebChromeClient(new WebChromeClient(){});     
     webView.loadUrl("http://www.google.com");     
     builder=new AlertDialog.Builder(this);     
     builder.setTitle("Loading...");     
     alert=builder.create();     
     alert.show(); 
} 

@Override protected void onDestroy() {     
    super.onDestroy();  
}  
@Override protected void onPause() {     
    super.onPause(); 
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T12:29:16.077

```
public void onProgressChanged(WebView view, int progress)
        {
            activity.setTitle("Loading...");
            activity.setProgress(progress + 100);
             progressDialog = ProgressDialog.show(MainActivity.this, "", "Loading...");

            if(progress == 100)
            {   
              activity.setTitle(mainWebView.getTitle());
                  progressDialog.dismiss();
            }   

        }

    }); 
```

# javascript - 如何删除样式属性

> ID：11986697
> 
> 赞同：1
> 
> 时间：2012-08-16T12:03:54.100
> 
> 标签：javascript, jquery

> **可能重复：**
> [jQuery - 删除使用 .css() 函数添加的样式](https://stackoverflow.com/questions/4036857/jquery-remove-style-added-with-css-function)

我想从 div 中删除 style 属性，我不能使用 removeAttribute 和 removeProperty，因为 removeAttribute 会删除整个样式并且 remove Property 在 ie 中不起作用。有没有其他方法可以做到这一点。

```
<div style="visiblity:hidden;margin-right:10px;margin-left:10px"> 
```

我只想删除可见性样式属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:07:05.773

像这样使用[.css](http://api.jquery.com/css/)

```
$(elementSelect).css('marginRight', null); 
```

或者

```
$(elementSelect).css('marginRight', '0px').css('visibility', 'visible'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:07:17.043

您可以使用 jQuery 的 css 功能

```
$('div').css({'visibility':'visible'}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T12:09:20.163

你可以试试这个：

```
$('div').css('visibility', '') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T12:09:56.463

你的意思是：

```
<div id="testDiv" style="visiblity:hidden;margin-right:10px;margin-left:10px">Here</div>

$('#testDiv').attr('style', function(i, style) {
    return style.replace(/visiblity[^;]+;?/g, '');
}); 
```

示例：[jsFiddle](http://jsfiddle.net/cThKf/5/)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-08-16T12:06:53.987

添加 runat="server" 然后您可以从代码隐藏中覆盖 Visibility 参数

# java - maven 和 spring 应用程序部署错误：无法找到命名空间的 NamespaceHandler [http://www.springframework.org/schema/context]

> ID：11986705
> 
> 赞同：2
> 
> 时间：2012-08-16T12:04:24.170
> 
> 标签：java, spring, maven

我有一个多模块 Maven 应用程序，有两个子模块。一个模块用于 Web 服务，另一个是使用这些服务的模拟器。

我有一个奇怪的问题，当我想部署我昨天开始的应用程序时，Tomcat7 出现以下错误：

```
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Unable to locate NamespaceHandler for namespace [http://www.springframework.org/schema/context]
Offending resource: ServletContext resource [/WEB-INF/application-context.xml] 
```

我的 application-context.xmls 顶部看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

    <context:component-scan base-package="com.company">
        <context:exclude-filter type="annotation" expression="org.springframework.stereotype.Controller"/>
    </context:component-scan> 
```

它说它找不到弹簧上下文的命名空间处理程序。但是我在我的父 pom.xml 中有这样的依赖项：

```
 <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>3.1.2.RELEASE</version>
    </dependency> 
```

我还可以看到 Tomcat 中的 Web 应用程序在应用程序的 lib 文件夹中也有 spring-context jar。我已经在谷歌上搜索了两个小时，所以任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:33:24.287

看一下[maven-shade-plugin](http://maven.apache.org/plugins/maven-shade-plugin/examples/resource-transformers.html#AppendingTransformer)文档的这一部分，它明确地讨论了 Spring 命名空间处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T11:47:16.667

我在我的 pom.xml 上发现了错误，我正在为自己写下来，以备将来我可能会再次遇到:)

我有这样的 pom.xml

```
 <dependency>
            <groupId>org.jvnet.jax-ws-commons.spring</groupId>
            <artifactId>jaxws-spring</artifactId>
            <version>1.8</version>
        </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${springFrameworkVersion}</version>
    </dependency> 
```

因此，jaxws-spring 已经依赖于 Spring 2.0。这使得 maven 也将 jar spring-2.0 放到了战争中。所以我遇到了某种图书馆冲突。

当我像下面这样排除时，问题解决了：

```
<dependency>
            <groupId>org.jvnet.jax-ws-commons.spring</groupId>
            <artifactId>jaxws-spring</artifactId>
            <version>1.8</version>
            <exclusions>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>*</artifactId>
                </exclusion>
            </exclusions>
        </dependency> 
```

# java - H2在使用Oracle模式时是否支持PLSQL？

> ID：11986713
> 
> 赞同：4
> 
> 时间：2012-08-16T12:04:34.627
> 
> 标签：java, oracle, plsql, h2

我正在尝试使用 H2 内存数据库为我们的 java 应用程序编写一些功能测试。因为我们使用 Oracle 作为我们的生产数据库，所以一些代码是用 PL/SQL 编写的。所以我打开了 Oracle 兼容模式，现在我的 url 看起来像这样：`jdbc:h2:mem:test;MODE=Oracle`.

我遇到问题的**实际应用程序代码如下所示（注意，在调用之前已经创建了序列和表）：**

```
CallableStatement = con.prepareCall(
    " begin insert into profiles(" + PROFILE_FIELDS + ") " +
    " values (sq_profiles.nextval, ?, ?, ?, ?, ?) " + 
    " returning profile_id into ?; end;"); 
```

它失败并出现与我为测试行为而编写的**示例**代码相同的错误：`begin ... end;`

```
Connection con = connectionProvider.getConnection()
con.prepareStatement("CREATE TABLE test (id INT NOT NULL)").execute()
con.prepareStatement("INSERT INTO test SELECT 1 FROM dual").execute()
con.prepareStatement("BEGIN INSERT INTO test SELECT 2 FROM dual; END;").execute() 
```

我得到的错误：

```
Syntax error in SQL statement "BEGIN INSERT[*] INTO TEST SELECT 2 FROM DUAL; END; "; SQL statement:
BEGIN INSERT INTO test SELECT 2 FROM dual; END; [42000-167] 
```

所以我的问题是：`begin ... end;`H2 支持块吗？如果是，上面的代码可能有什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T12:20:35.457

不，H2 Oracle 兼容模式并不意味着支持这样的 PL/SQL。如[H2 文档](http://www.h2database.com/html/features.html#compatibility)中所述，Oracle 兼容模式带来以下内容：

> *   对于别名列，ResultSetMetaData.getColumnName() 返回别名，getTableName() 返回 null。
> *   使用唯一索引时，允许所有列中的多行为 NULL，但其他情况下不允许多行具有相同的值。
> *   将 NULL 与另一个值连接会产生另一个值。

# javascript - 如果项目不匹配，则显示 var

> ID：11986719
> 
> 赞同：1
> 
> 时间：2012-08-16T12:05:10.470
> 
> 标签：javascript, jquery, html, variables, indexing

我正在使用 Feedburner 来显示提要。有时，提要具有相同的文本。我想“隐藏”某个提要的任何“重复”。我已经将 feedburner 脚本包装在一个 div 'unique' 中，如下所示：[jsFiddle](http://jsfiddle.net/NHEKd/3/)

我为提要设置了 display:none，因为我只想显示与“索引”匹配的提要。我不明白为什么 var 没有“显示”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:48:28.657

我认为`.text()`查询不正确。

```
var a = $('.unique a').text(); 
```

以上仅返回文本：

> 男人DOOD娜的Val liftschacht RotterdamBulgarije geeft照片vrij面包车tweede verdachte bomaanslagStraat ontruimd BIJ格罗特品牌OverdinkelAsiel阿桑奇verandert niets VOOR LondenMoordenaar honkballer Halman运维杰voetenGrote品牌Overdinkel'Broer vermoorde honkballer ontoerekeningsvatbaar'Boete VOOR RET OM studentenreisgegevensDode BIJ崩溃vliegtuigje BiddinghuizenMinder tienermoeders丹ooit在荷兰

没有什么`a`可以迭代的。

我想你可能想做：

```
var a = $('.unique a'); 
```

这将返回您现在可以迭代的项目列表。

我可以看到的下一个问题是您的过滤器方法只是遍历 12 个项目的数组并仍然返回相同的 12 个项目，索引处的项目将始终与当前项目匹配。

试试这个解决方案：

```
$(document).ready(function() {
    var $a = $('.unique a');
    var unique = {};

    for (i = 0; i < $a.length; i++) {
        var itemText = $($a[i]).text();
        if (unique[itemText]) {
            $($a[i]).remove();
        }
        else {
            unique[itemText] = true;
        }
    };

    $('.unique').show();
}); 
```

见[**演示**](http://jsfiddle.net/82Q4x/)

我声明`unique`为一个对象。该对象将记录我们已经处理的每个锚文本值，方法是将 添加`itemtext`为分配 of 的属性`true`。这是可能的，因为 JavaScript 的动态特性允许您动态地将属性分配给对象。

> Boete voor RET om studentenreisgegevens **true** ,
> Bulgarije geeft afbeelding vrij van verdachte aanslag **true** ,
> Ecuador verleent Wikileaks-baas Julian Assange politiek asiel **true**

调用时，`unique[itemText]`我们要求`unique`对象为我们提供名称与 in 匹配的属性的值`itemText`。

如果属性存在，`true`则返回值，因为这是我们分配给属性的值。我们现在将从源中删除我们已经处理过的值。
如果未找到该属性，则`undefined`返回，我们将属性动态添加到`unique`对象，为其分配`true`.

现在去掉了源中的重复项，我们使容器再次可见。

# performance - 我们如何从 Apache Jmeter 测量服务器处理时间、页面加载时间、页面渲染时间和页面大小

> ID：11986721
> 
> 赞同：4
> 
> 时间：2012-08-16T12:05:15.370
> 
> 标签：performance, apache, jmeter, qa, performance-testing

如何测量以下几点

*   服务器处理时间
*   页面加载时间
*   页面渲染时间
*   页面大小

来自 Apache Jmeter？

有没有合适的听众来衡量所有这些点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T12:44:51.473

通过汇总报告或 csv / xml 结果，您可以获得几乎所有关于响应时间的信息，但是：

*   服务器处理时间：你不能得到这个，因为 jmeter 在客户端操作它包括网络时间，所以你需要添加一些分析数据或查看访问日志
*   页面加载时间：如果是页面响应时间是
*   页面渲染时间：不，因为 jmeter 不是浏览器，而且渲染发生在客户端，所以您在负载测试中感兴趣的是获得响应的时间。
*   页面大小：是

我建议你阅读：

*   [http://jmeter.apache.org/usermanual/index.html](http://jmeter.apache.org/usermanual/index.html)

*   [http://jmeter.apache.org/usermanual/test_plan.html](http://jmeter.apache.org/usermanual/test_plan.html)

*   [http://jmeter.apache.org/usermanual/component_reference.html#Aggregate_Report](http://jmeter.apache.org/usermanual/component_reference.html#Aggregate_Report)

问候

菲利普·M。

[http://www.ubik-ingenierie.com/-Solutions-](http://www.ubik-ingenierie.com/-Solutions-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T12:41:46.337

```
Server processing time = time to first byte - request sent
Page loading time = time to last byte - time to first byte
Page size = Response size

Page rendering time - you'll have to use GUI testing tools for this one.
E.g. 
  Chrome has Ctrl+Shift+i > Timeline tab
  Firefox has Firebug > Net tab. 
```

有关上述这些短语的更多信息，请参见[此处。](https://stackoverflow.com/questions/8397700/jmeter-response-time-calculation)

# jquery - 使用类选择器获取多个跨度的文本

> ID：11986722
> 
> 赞同：-1
> 
> 时间：2012-08-16T12:05:17.930
> 
> 标签：jquery

我有一个页面，其中有多个跨度标签应用了相同的 css 类。我想获取所有这些跨度标签的文本。我用 $('.clsname').text(); 但问题是，它将所有跨度标签文本作为单个字符串返回。我需要它到一个数组/分隔

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T12:06:52.720

尝试这个：

```
var text = [];
$('.clsname').each(function(){
    text.push( $(this).text());
}); 
```

`.each()`迭代所有选定的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T12:08:22.563

```
 var arr = [];
  $('.clsname').each(function(){
      arr.push($(this).text());
   }); 
```

# html - 带有 IE9 的 HTML 5 / 拖放

> ID：11986724
> 
> 赞同：0
> 
> 时间：2012-08-16T12:05:23.877
> 
> 标签：html, internet-explorer

我正在运行这里提到的一个非常简单的示例

[http://www.w3schools.com/html5/html5_draganddrop.asp](http://www.w3schools.com/html5/html5_draganddrop.asp)

只是尝试在 IE 9 上拖放。我可以看到拖动，但是当我将文件拖放到该区域时，IE 只是呈现文件而不是执行事件。

如果我需要更改 IE 中的任何配置，请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:08:21.817

我不认为这是为您设计的拖放文件。相反，您可以将 w3school 徽标从左侧框拖到右侧框。如果您正在寻找拖放文件，请查看[http://html5demos.com/file-api/](http://html5demos.com/file-api/)以获取演示

# .htaccess - 使用 .htaccess 保护特定目录

> ID：11986729
> 
> 赞同：0
> 
> 时间：2012-08-16T12:05:34.467
> 
> 标签：.htaccess, access-control

是否可以使用单个 .htaccess 和 .htpasswd 文件保护特定目录？

我只能找到保护单个文件或整个目录（及其子目录）的能力？

例如 /public_html/myfolder 中的 .htpasswd

并保护

/public_html/myfolder/secret
/public_html/myfolder/admin

但不是

/public_html/myfolder/mypublicfiles

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T17:52:43.193

htaccess 文件是每个目录的选项，它有点像一个`<Directory>`块，但由放置 htaccess 文件的位置定义。因此，您不能在 htaccess 文件所在目录以外的目录上随意设置 HTTP 身份验证。

# command-line - 在 C 中使用 execl() 函数调用将结构作为命令行参数传递给进程

> ID：11986737
> 
> 赞同：0
> 
> 时间：2012-08-16T12:05:50.767
> 
> 标签：command-line, struct, arguments

我正在尝试将 SSL 功能添加到我现有的 TCP 回显客户端-服务器应用程序中。

早些时候，在我的简单服务器中，我为每个传入的客户端连接生成了一个新的子节点。对于这个孩子，我将 conn-fd (char*) 作为命令行参数传递。（如下图）

```
execl("./simple_server_instance", conn_fd, NULL); 
```

现在，对于我的安全服务器，我需要传递一个 CYASSL 对象（一个有效的结构）而不是 conn_fd。（如下图）

```
ssl = CyaSSL_new(ctx);
CyaSSL_set_fd(ssl, connfd); 
```

这里的“ssl”是需要传递给子进程的对象。我尝试了以下方法来实现它，但没有成功。有没有简单的替代方案，还是我应该采用序列化方式？

1.  将 ssl 对象类型转换为 char*

2.  创建一个缓冲区并对整个结构进行 memcpy。（如下图）

> ```
> unsigned char sslobjbuf[sizeof(ssl)];
> memcpy(&sslobjbuf, ssl, sizeof(ssl));
> execl("./secure_server_instance", "hello", "25", sslobjbuf, NULL ); 
> ```

sdsd

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:30:17.670

当你`execl()`是一个进程时，你完全用执行的进程替换正在运行的进程。`exec`函数系列需要一系列以空字符结尾的字符串，这些字符串将在`arvg[]`生成的应用程序中可用。您不能只通过此接口传递任意对象。

当您可能想要使用`fork`系统调用时，它会为您提供一个新的子进程，该子进程与父进程共享其代码/数据。的代码`./simple_server_instance`将与主服务器代码合并。您可以`ssl = CyaSSL_new(ctx);`在父进程中进行调用以获取所需的对象，然后`fork`. `ssl`然后，父级可以在子级运行对象时继续为新请求提供服务。

像这种控制流这样的东西可能会起作用：

```
while (1) {
    wait_connection();
    pid_t child_pid = -1;
    ssl = CyaSSL_new(ctx);
    child_pid = fork();
    if (child_pid == 0) {
        /* We're now running the child process which also has access to ssl.
         * Run simple_server_instance handler code
         */
    }
    else {
        /* Code running in parent.  Do housekeeping, save child_pid if necessary.
         * clean up ssl, object, get ready for next connection, handle finished
         * child processes.
         */
    }
} 
```

# hadoop - 如何查看 PIG 作业的整体进度

> ID：11986739
> 
> 赞同：1
> 
> 时间：2012-08-16T12:05:53.933
> 
> 标签：hadoop, apache-pig

一个 pig 脚本可以翻译成多个 MR 作业，我想知道是否有一个界面或方法可以查看整个 PIG 脚本的进度，例如计划、执行了多少作业等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T07:20:19.853

我们在 Twitter 也遇到了同样的问题，因为我们的一些 Pig 脚本启动了数十个 Map-Reduce 作业，有时很难判断其中哪些在做什么，计划效率的原因，了解有多少将并行运行，等等

所以我们创建了 Twitter Ambrose：[https ://github.com/twitter/ambrose](https://github.com/twitter/ambrose)

它启动了一个小型码头服务器，为您提供了一个漂亮的 Web ui，显示作业 DAG，在作业完成时为节点着色，为您提供有关作业的统计信息，并告诉您每个作业试图计算哪些关系。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T13:21:23.567

有一个命令***说明***，但它在我的部署中引发异常。所以我使用另一种方法。

***您可以通过使用说明***命令并查看说明报告末尾的“物理计划”部分来获取有关计划了多少 MR 作业的信息。要获取脚本的 MR 作业数，我执行以下操作：

```
./pig -e 'explain -script ./script_name.pig' > ./explain.txt
grep MapReduce ./explain.txt | wc -l 
```

现在我们已经计划好了 MR 作业的数量。要监控脚本执行，在运行之前，您需要访问 Hadoop 的 jobtracker 页面（通过“http://(IP_or_node_name):50030/jobtracker.jsp”）并记下最后一个作业的名称（已完成作业部分）。提交脚本。刷新 jobtracker 页面并计算有多少正在运行的作业以及在您记录的作业之后完成了多少。现在您可以了解还有多少作业需要执行。单击每个作业并查看其统计数据和进度。

一个更简单的方法是在一个小数据集上运行脚本，记下作业的数量，它会在脚本执行后显示在控制台输出中。由于 pig 不会更改其执行计划，因此与大数据集相同。通过在 Hadoop 的 jobtracker 页面上查看每个作业的统计信息（通过“http://(IP_or_node_name):50030/jobtracker.jsp”），您可以了解每个 MR 作业所花费的时间比例。比您可以使用它来近似地插入大型数据集的执行时间。如果您有偏斜的数据和一些笛卡尔积，执行时间预测可能会变得很棘手。

# javascript - 在 JavaScript 中，有没有一种方法可以解析 JSON 将数字转换为字符串？

> ID：11986740
> 
> 赞同：3
> 
> 时间：2012-08-16T12:05:55.400
> 
> 标签：javascript, json, floating-point

由于 JavaScript 对所有数字都使用浮点数学，这在所有情况下都不能保持精度，所以我想解析一个包含数字的 JSON 对象，但在返回的 JavaScript 对象而不是数字对象中生成字符串。有没有办法使用标准或第三方库来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:19:59.120

您可以尝试正则表达式，例如：

```
 var numstrings = JSON.parse(json.replace(/\:([0-9.]+)(,?)/g,':\"$1\"$2')); 
```

[http://jsfiddle.net/rmwcZ/](http://jsfiddle.net/rmwcZ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:32:07.907

你可以做这样的事情。这可能不是一个完美的解决方案（尤其是 reg 表达式），但希望它能帮助您解决这个问题。

```
var json = '{"num1":123.89075576575775676575, "num2":89.5564764646476444844, "num3":56.4353454354353535435435435}';

json = json.replace(/\d+.\d+/g, function(a, b){ 
    return '\"' + a + '\"';
});

console.log($.parseJSON(json )); // I have used jQuery. Any JSON parser can be used 
```

# android - Android jelly bean 在视频开始时发送 CLOSE_WRITE 事件，而不是在视频结束时发送

> ID：11986745
> 
> 赞同：1
> 
> 时间：2012-08-16T12:06:06.477
> 
> 标签：android, video, android-4.2-jelly-bean, fileobserver

我的代码使用[FileObserver](http://developer.android.com/reference/android/os/FileObserver.html)监听 DCIM 文件夹。

我使用的所有 Android 版本，除了 4.1.1，只发送了 1 个事件 - 当视频完成拍摄时。我认为这是正确的行为 - 持续写入并在完成后关闭。

不过，在 4.1.1（Galaxy Nexus 和 Nexus S）中，事件[FileObserver.CLOSE_WRITE](http://developer.android.com/reference/android/os/FileObserver.html#CLOSE_WRITE)被发送 **两次 - 视频开始时和结束时**。

照片也一样——事件被发送了两次——尽管它不是那么重要。

问题是我无法区分视频的开始事件和结束事件。

我可以尝试检查文件的大小，但由于事件可能已延迟（慢/忙设备），大小可能非常大。

知道为什么行为会改变吗？你知道相机的app源码在哪里吗？我可以试着看看历史来理解这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T06:52:44.743

正如我在我的[一条评论](https://stackoverflow.com/questions/11986745/android-jelly-bean-sends-a-close-write-event-when-a-video-starts-instead-of-just#comment15987089_11986745)中所写的，4.1 和以前的 Android 版本之间的区别在于，在 4.1.1 中，文件被写入和关闭两次。当创建一个空的视频文件时。然后将视频写入 tmp 文件。那么tmp文件的重命名/拷贝就是第二个write_close事件。

在以前的版本中，没有 tmp 文件——只有原始文件——因此只有一个 close_write 事件。

如果您认为这是一个错误，请发表评论。我不确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T22:02:04.473

我自己有一个应用程序，它通过 FileObserver 监控 DCIM/Camera 目录。我注意到并且可能对您有所帮助的是，第一个操作是 CLOSE_WRITE，但最终操作是从 .tmp 到真实文件的 MOVED_TO，这意味着您可以识别视频何时（真正）准备好.

由于我的应用程序的要求，我的真实代码更复杂，但总体思路是这样的：

```
/* My FileObserver implementation field */
private HashSet<String> jbCache = new HashSet(...)

...

protected void onEvent(int event, String path) {
   boolean isJellyBean = Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLYBEAN;

   if ((event & FileObserver.CLOSE_WRITE) > 0) {
      if (isJellyBean) {
         jbCache.add(path);
      } else {
         performYourWork(path);
      }
   } else if ((event & FileObserver.MOVED_TO) > 0 && isJellyBean && jbCache.contains(path)) {
      performYourWork(path);
      jbCache.remove(path);
   }
} 
```

显然，当您注册要捕获的事件时，您必须同时收听 CLOSE_WRITE 和 MOVED_TO。

尽管我为您的错误加了星标，但我怀疑 Google 是否会承认这一点，因为看起来更改背后可能有一些（令人不快的）原因。无论如何，相机应用程序大多是非标准的废话（例如：假 DCIM 标准合规性）

# cakephp - Cakephp 查找多个模型上的所有查询

> ID：11986746
> 
> 赞同：2
> 
> 时间：2012-08-16T12:06:08.193
> 
> 标签：cakephp, cakephp-2.0, models, containable

我尝试以下方法来获取属于 MenuItem 6 并且文章 content_type 为“博客”的所有文章。它确实找到了所有带有`content_type='blog'`. 但我只希望它返回属于 Menuitem 7 的文章。现在它在不是 7 时返回 MenuItem 的空值。

我怎样才能做到它只会从 MenuItem 7 加载文章？

MenuItem 与 A​​rticle 具有 HABTM 关系

代码：

```
 $d=$this->Article->find('all' , array('contain' => array(
        'MenuItem' => array(
            'conditions' => array(
                'MenuItem.id ' => 7,        
             ),
                'fields'=>'id'
        ),
        'Tag'=>array(
            'conditions'=>array(
                'Tag.name'=>'tag1'
            ),
            'fields'=>'name'
        )
      ),
      'conditions'=>array('Article.content_type' => 'blog'),
      'fields'=>array('id','content_type'),
      'recursive'=>1
     ));

     debug($d); 
```

大批：

```
 array(
      (int) 10 => array(
    'Article' => array(
        'id' => '15',
        'content_type' => 'blog'
    ),
    'Tag' => array(),
    'MenuItem' => array()
),
     (int) 11 => array(
    'Article' => array(
        'id' => '16',
        'content_type' => 'blog'
    ),
    'Tag' => array(),
    'MenuItem' => array(
        (int) 0 => array(
            'id' => '7',
            'MenuItemsArticle' => array(
                'id' => '18',
                'title' => '',
                'article_id' => '16',
                'menu_item_id' => '7'
            )
        )
    )
      )
 ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:03:39.953

我认为对于这种类型的查找条件，您最好的选择是修改您的模型以使用[hasMany through (The Join Model)](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasmany-through-the-join-model)。这是我测试的一个示例，可以满足您的要求：

**文章.php**

```
class Article extends AppModel {
    public $hasMany = array('ArticleMenuItem');
} 
```

**菜单项.php**

```
class MenuItem extends AppModel {
    public $hasMany = array('ArticleMenuItem');
} 
```

**文章菜单项.php**

```
class ArticleMenuItem extends AppModel {
    public $useTable = 'articles_menu_items';

    public $belongsTo = array(
        'Article',
        'MenuItem'
    );
} 
```

**寻找电话**

```
$articles = $this->ArticleMenuItem->find('all', array(
    'conditions' => array(
        'menu_item_id' => 7,
        'Article.content_type' => 'blog'
    ),
    'contain' => array(
        'Article' => array(
            'fields' => array(
                'id',
                'title'
            )
        ),
        'Tag'
    )
)); 
```

这是它产生的结果：

```
array(
    (int) 0 => array(
        'ArticleMenuItem' => array(
            'article_id' => '1',
            'menu_item_id' => '7'
        ),
        'Article' => array(
            'id' => '1',
            'content_type' => 'blog',
            'title' => 'test blog'
        )
    ),
    (int) 1 => array(
        'ArticleMenuItem' => array(
            'article_id' => '4',
            'menu_item_id' => '7'
        ),
        'Article' => array(
            'id' => '4',
            'content_type' => 'blog',
            'title' => 'another'
        )
    )
) 
```

这是它生成的查询：

```
SELECT `ArticleMenuItem`.`article_id`, `ArticleMenuItem`.`menu_item_id`, `Article`.`id`, `Article`.`content_type`, `Article`.`title` FROM `caketest`.`articles_menu_items` AS `ArticleMenuItem` LEFT JOIN `caketest`.`articles` AS `Article` ON (`ArticleMenuItem`.`article_id` = `Article`.`id`) WHERE `menu_item_id` = 7 AND `Article`.`content_type` = 'blog' 
```

我也设置`$recursive = -1`了我的 AppModel。我建议您也这样做，因为您使用的是可包含的行为，它更有效，因为它只会拉回您需要的数据。:)

希望这会有所帮助，有任何问题请告诉我。

# java - 测试Java串口程序

> ID：11986748
> 
> 赞同：1
> 
> 时间：2012-08-16T12:06:10.977
> 
> 标签：java, serial-port

我已经完成了从串行端口读取字节流的代码。问题是我无法测试代码，因为我没有与这些端口交互的设备。

**我已经使用了模拟器**，但是在运行代码和模拟器**时没有任何反应。没有进展，也没有错误。**

**这是代码**

```
class SimpleRead implements Runnable, SerialPortEventListener{
    CommPortIdentifier portId;
    Enumeration       portList;
    InputStream           inputStream;
    SerialPort            serialPort;
    Thread            readThread;

    /**
     * Method declaration
     *
     *
     * @param args
     *
     * @see
     */
    public void main(String[] args) {
    boolean           portFound = false;
    String            defaultPort = "/dev/term/a";

    if (args.length > 0) {
        defaultPort = args[0];
    } 

    portList = CommPortIdentifier.getPortIdentifiers();

    while (portList.hasMoreElements()) {
        portId = (CommPortIdentifier) portList.nextElement();
        if (portId.getPortType() == CommPortIdentifier.PORT_SERIAL) {
        if (portId.getName().equals(defaultPort)) {
            jTextArea1.setText("Found port: "+defaultPort);
            portFound = true;
            SimpleRead reader = new SimpleRead();
        } 
        } 
    } 
    if (!portFound) {
        jTextArea1.setText("port " + defaultPort + " not found.");
    } 

    } 

    /**
     * Constructor declaration
     *
     *
     * @see
     */
    public SimpleRead() {
    try {
        serialPort = (SerialPort) portId.open("SimpleReadApp", 2000);
    } catch (PortInUseException e) {}

    try {
        inputStream = serialPort.getInputStream();
    } catch (IOException e) {}

    try {
        serialPort.addEventListener(this);
    } catch (TooManyListenersException e) {}

    serialPort.notifyOnDataAvailable(true);

    try {
        serialPort.setSerialPortParams(9600, SerialPort.DATABITS_8, 
                       SerialPort.STOPBITS_1, 
                       SerialPort.PARITY_NONE);
    } catch (UnsupportedCommOperationException e) {}

    readThread = new Thread(this);

    readThread.start();
    }

    /**
     * Method declaration
     *
     *
     * @see
     */
    public void run() {
    try {
        Thread.sleep(20000);
    } catch (InterruptedException e) {}
    } 

    /**
     * Method declaration
     *
     *
     * @param event
     *
     * @see
     */
    public void serialEvent(SerialPortEvent event) {
    switch (event.getEventType()) {

    case SerialPortEvent.BI:

    case SerialPortEvent.OE:

    case SerialPortEvent.FE:

    case SerialPortEvent.PE:

    case SerialPortEvent.CD:

    case SerialPortEvent.CTS:

    case SerialPortEvent.DSR:

    case SerialPortEvent.RI:

    case SerialPortEvent.OUTPUT_BUFFER_EMPTY:
        break;

    case SerialPortEvent.DATA_AVAILABLE:
        byte[] readBuffer = new byte[20];

        try {
        while (inputStream.available() > 0) {
            int numBytes = inputStream.read(readBuffer);
        } 

        jTextArea1.setText(new String(readBuffer));
        } catch (IOException e) {}

        break;
    }
    } 

} 
```

**注意：**我使用的是 javax.comm 和 Netbeans IDE。谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:12:09.617

> 问题是我无法测试代码，因为我没有与这些端口交互的设备..

唯一真正的解决方案是获得一些设备。说真的，使用模拟器进行测试只会让你到目前为止，即使假设模拟器可以工作。出售或交付您没有在真实设备上测试过的代码是完全不负责任的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T12:32:38.883

您可以在计算机上的 2 个串行端口之间放置一根空调制解调器电缆（交叉电缆），或者如果您只有一个，则从另一台计算机运行电缆。

现在要么创建一个发送程序，通过空调制解调器电缆推送数据，要么使用其他方法推送数据。例如，在 linux 中，您可以将文件 cat 到串行端口： cat data.dat > /dev/ttyS0

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T12:15:03.453

您必须使用真实设备进行测试，否则测试几乎毫无价值。只需购买带串口的 PCI 卡，大约 5 美元即可获得。

# android - 访问 apk 文件中的本地 xml 文件时出现问题 - Air for Android

> ID：11986749
> 
> 赞同：1
> 
> 时间：2012-08-16T12:06:15.123
> 
> 标签：android, flash, air

这是我第一次真正接触到 Air for Android，所以如果这个问题已经被覆盖，请原谅我。如果有，那么我一直找不到它。

所以我有一个加载和显示 xml 数据的应用程序。在应用程序中，我有代码来检查 wifi 或等效设备是否可用，如果可用，则提取实时 xml 文件，如果没有，则提取与应用程序打包的本地 xml 文件。如果我从实时 url 中提取 xml，则该应用程序可以正常工作，但如果从本地提取则不能。

在做了一些研究之后，我发现当拉入本地文件时，Air for Android 的工作方式略有不同。所以我需要解析应用程序目录。我这样做了，但仍然没有快乐。

经过更多研究后，我读到一些帖子说我应该使用 fileStream()

在 Flash IDE 中进行测试时，它始终按预期工作。

如果我还有更多的头发，我会马上拔掉它！本地xml文件在“includes”中设置

下面我用于测试的示例代码

```
var subURL:String = "xml_feeds/myxmlfile.xml"
var fileStream:FileStream = new FileStream();
var file:File = File.applicationDirectory.resolvePath(subURL);
fileStream.addEventListener(Event.COMPLETE, processXMLData);
fileStream.openAsync(file, FileMode.READ);
MovieClip(parent).txStates.text = file.url+" - TRYING"
var prefsXML:XML = new XML()
function processXMLData(event:Event):void{
    MovieClip(parent).txStates.text = file.url+" - OPEN"
    prefsXML = XML(fileStream.readUTFBytes(fileStream.bytesAvailable));
    var tempArr:Array = new Array();
    var reportCount:Number = prefsXML.row.column.length()
    for (var i = 0; i < reportCount; i++) {
        var rName:String = prefsXML.row.column[i].@name.toString();
        var rValue:String = prefsXML.row.column[i].toString();
        var rTitle:String = prefsXML.row.column[i].@name.toString()
        tempArr.push([rName, rValue, rTitle]);
    }
    showData()
    fileStream.close();
} 
```

有什么我错过的吗？

**更新：21/08/12** 不知道这是怎么回事。这是我现在必须使用的代码才能加载到本地 xml 文件中。似乎有点啰嗦

```
function listing():void{
var folders:Array = new Array();
folders = File.applicationDirectory.getDirectoryListing();
for(var i:Number =0;i<folders.length;i++){
    if(folders[i].isDirectory){ 
        if(folders[i].name=="xml_feeds"){
            var files:Array = new Array();
            files = folders[i].getDirectoryListing();
            for(var j:Number=0;j<files.length;j++){
                if(files[j].name=="CTSection2.xml"){
                    fileStream.openAsync(files[j], FileMode.READ);
                    fileStream.addEventListener(Event.COMPLETE, processXMLData);
                    fileStream.addEventListener(IOErrorEvent.IO_ERROR, localXMLFailLoad);
                }
            }
        }
    }
} 
```

}

# algorithm - 寻找启发式和识别旅行推销员的算法（有一些变化）

> ID：11986753
> 
> 赞同：0
> 
> 时间：2012-08-16T12:06:25.720
> 
> 标签：algorithm, path-finding, heuristics, traveling-salesman, motion-planning

我需要一个具有以下更改的旅行商问题的启发式方法：

• 我们只需要访问V 的一个子集（给定V 的一个子集我们必须访问）。V=城市。

• 我们不需要在起始顶点（城市）结束旅行。

这个问题有已知的名称吗？我能找到一个很好的启发式方法来解决它吗？

感谢先进:)

# asp.net-mvc-3 - .Select() 在 LINQ

> ID：11986754
> 
> 赞同：0
> 
> 时间：2012-08-16T12:06:32.990
> 
> 标签：asp.net-mvc-3, linq, linq-to-sql

我有以下 LINQ 查询

```
public List<RoleResource> GetAllRoleResources()
    {
        return this.GetAll<RoleResource>().ToList();
    } 
```

我只需要选择几个列，如 Column1、Column2 和属性 BColumns，它是另一个表并且与主表有关系。我将如何使用 .Select() 检索它....我使用了以下内容：

```
.Select(row => {row.Column1, row.Column2, row.BColumns}).ToList() 
```

它不工作并且也显示错误。.Select() 的正确语法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T12:09:50.990

定义一个包含您感兴趣的列的视图模型：

```
public class MyViewModel
{
    public string Column1 { get; set; }
    public string Column2 { get; set; }
    public string BColumns { get; set; }
} 
```

接着：

```
.Select(row => new MyViewModel 
{
    Column1 = row.Column1, 
    Column2 = row.Column2, 
    BColumns = row.BColumns
}).ToList() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:32:02.803

应为实例化添加“ **new ”关键字。**以下是 .Select() 在 LINQ 中正常工作的**正确语法和代码**。

```
.Select(row => new{
        row.Column1, 
        row.Column2, 
        row.BColumns})
.ToList() 
```

它会正常工作。

# sql-server-2012 - SQL Server 2012 中 varbinary 的格式

> ID：11986764
> 
> 赞同：0
> 
> 时间：2012-08-16T12:07:04.917
> 
> 标签：sql-server-2012

我的数据库表包含一个`Image`datatype列`Varbinary(50)`，我想将该列的值动态输入到表中，那么 varbinary 将值输入到`Image`列的格式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T23:27:22.763

varbinary 列包含二进制数据。为了将二进制数据插入列，您可以使用各种 OLEDB/ADO 驱动程序将其流式传输，将数据定义为二​​进制，或者您可以使用二进制表示法将数据插入列。

例如，如果我想将“A”的二进制值插入列中，我需要插入：

```
 CREATE TABLE Binarytest
 ( id INT
 , note VARBINARY(500)
 )
 ;
 INSERT BinaryTest SELECT 1, 0x41
 INSERT BinaryTest SELECT 1, CAST( 'A' AS VARBINARY)

 SELECT note, CAST( note AS VARCHAR) FROM BinaryTest

 DROP TABLE binarytest 
```

请注意，我这样做有两种方式。

# html - 使 HTML 表格单元格的内容适合 - 不换行？

> ID：11986773
> 
> 赞同：0
> 
> 时间：2012-08-16T12:07:24.780
> 
> 标签：html, css, html-table, row, word-wrap

这是我的情况：

*   我目前正在完成一个相当大的 Web 应用程序（PHP 与 CodeIgniter、MySQL、Javascript+Ajax+Jquery 并使用各种 Javascript 库 - 例如 dataTables）

**问题 ：**

*   假设我们有一个**固定宽度的表格**。
*   第一**列**也是**固定宽度**。（假设在`200px`）
*   当表格被填充时：
    *   如果第一列的内容占用不到 200px 的空间，就可以了。
    *   如果内容超过 200 像素，则**内容将被包装**，从而创建“双线”效果和比我希望的*更高的行。*

**暗示 ：**

*   “缩小” a`very very very long line`到类似的东西`very very very ...`是我的想法。这样的事情可能吗？服务器端？

你会怎么处理呢？*（最好以一种优雅的方式 - '因为，是的，我承认我有一些解决方案，但似乎都没有......用户友好......哈哈）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:18:05.860

我认为在服务器端进行字符串截断是不可能的，如果您不使用等宽字体，那么相同数量的字符始终具有相同的宽度。您可以做的是客户端字符串截断：

[（使用 JavaScript 计算文本宽度的](https://stackoverflow.com/questions/118241/calculate-text-width-with-javascript)好代码）：

CSS：

```
#testing-div
{
    position: absolute;
    visibility: hidden;
    height: auto;
    width: auto;
} 
```

JS：

```
var test = document.getElementById("testing-div");
test.style.fontSize = fontSize;
var height = (test.clientHeight + 1) + "px";
var width = (test.clientWidth + 1) + "px"; 
```

您可以遍历字符串的整个长度，并继续向 的主体添加一个字符`#testing-div`，计算宽度并检查它是否合适。`...`如果字符串太长，请确保添加。

# asp.net - 如何在自己的网络服务器中打开网站

> ID：11986778
> 
> 赞同：0
> 
> 时间：2012-08-16T12:07:44.017
> 
> 标签：asp.net, iis, iis-7.5

我有一个安装了 Windows 2008 R2、IIS 7.5 的网络服务器，

1 个专用 IP 地址

从这里我托管几个网站....比如 www.abc.com www.efg.com www.hkl.com

通过绑定我正在路由网站，它工作正常。我可以从其他 PC 访问这些网站。

所以直到这里它工作正常......

但我喜欢从它自己的网络服务器访问这些网站。我怎样才能做到这一点？

例如我试过了。214.xxx.xxx.xxx\abc.com 我也试过 localhost\abc.om

但我得到下面的错误......

# 问题：

所以我的问题是如何在自己的WEBSERVER中访问这些域......所有这些域都被创建为网站并且独立运行应用程序池......（不在默认网站中）

所有这些都是 ASP.NET Web 应用程序。V2.0 和 V4.0

## “/”应用程序中的服务器错误。

配置错误描述：处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。

解析器错误消息：在应用程序级别之外使用注册为 allowDefinition='MachineToApplication' 的部分是错误的。此错误可能是由未在 IIS 中配置为应用程序的虚拟目录引起的。

源错误：

第 116 行： 第 117 行： 第 118 行： 第 119 行： 第 120 行：

源文件：C:\inetpub\wwwroot\abc\web.config 行：118

显示其他配置错误：

在应用程序级别之外使用注册为 allowDefinition='MachineToApplication' 的部分是错误的。此错误可能是由未在 IIS 中配置为应用程序的虚拟目录引起的。（C:\inetpub\wwwroot\abc\web.config 第 202 行）在应用程序级别之外使用注册为 allowDefinition='MachineToApplication' 的部分是错误的。此错误可能是由未在 IIS 中配置为应用程序的虚拟目录引起的。（C:\inetpub\wwwroot\abc\web.config 第 261 行）在应用程序级别之外使用注册为 allowDefinition='MachineToApplication' 的部分是错误的。此错误可能是由未在 IIS 中配置为应用程序的虚拟目录引起的。（C:\inetpub\wwwroot\abc\web.config 第 262 行）

* * *

版本信息：Microsoft .NET Framework 版本：2.0.50727.5456；ASP.NET 版本：2.0.50727.5456

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:58:46.267

尝试添加应用程序，而不是虚拟目录。听起来您的虚拟目录是一个应用程序。

我认为错误正在发生，因为虚拟目录文件夹中的 web.config 是应用程序的根 web.config。此配置与默认网站级别的 web.config 冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T12:14:31.077

您在 Web 服务器上的网站是通过虚拟目录配置的。您需要将文件夹的名称放在服务器名称之后。尝试：

```
http://localhost/SiteVirtaulDirectory 
```

或者您可以尝试从 Internet 信息服务器 (IIS) 打开站点

打开 Internet Information Server，（键入 inetmgr 并在开始 -> 运行时按 enter）。展开`Default Web sites`，然后选择任何站点，右键单击它并选择`Browse`。

# codeigniter - 使用 set_value 以 codeigniter 形式填充下拉列表

> ID：11986786
> 
> 赞同：2
> 
> 时间：2012-08-16T12:08:05.717
> 
> 标签：codeigniter, drop-down-menu, validation, setvalue

我有一个使用下拉列表的表单，并且我使用 codeigniter、表单助手和表单验证，所以当我在表单中收到验证错误时，所有正确输入的字段都使用 codeigniter 的 set_value 填充，但是这不适用于下拉列表

我正在做 ：

```
<?php echo form_dropdown('mid', $id_map, set_value('mid'), 'id="mid"') ?> 
```

当表单出现错误时，始终选择下拉列表的第一个值并且之前未设置

任何想法，我做错了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-16T13:22:21.307

正确的使用方法`set_select()`是

```
<select name="myselect">
<option value="one" <?php echo set_select('myselect', 'one', TRUE); ?> >One</option>
<option value="two" <?php echo set_select('myselect', 'two'); ?> >Two</option>
<option value="three" <?php echo set_select('myselect', 'three'); ?> >Three</option>
</select> 
```

所以 Andras Ratz 方法/答案不起作用。

你的方法是正确的。

```
<?php echo form_dropdown('mid', $id_map, set_value('mid'), 'id="mid"') ?> 
```

但是请记住，`set_value()`如果您为它设置了验证规则，那么只有在您的情况下才会返回该值`mid`。您可以尝试如下 -

```
<?php echo form_dropdown('mid', $id_map, (isset($_POST['mid']) ? $_POST['mid'] : ''), 'id="mid"') ?> 
```

`mid`或者只是设置一个验证规则

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T12:22:12.767

这是因为您必须使用 set_select() 函数，而不是 set_value();

你可以在这里查看：http: [//codeigniter.com/user_guide/helpers/form_helper.html](http://codeigniter.com/user_guide/helpers/form_helper.html)

和正确的语法：

**编辑 ：**

```
<?php echo form_dropdown('mid', $id_map,  set_select('mid'), 'id="mid"'); ?> 
```

如果你有一个默认值，那应该放在 set_select 的 2\. 参数中。

我希望这会奏效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-16T06:06:48.243

```
 <?php // Change the values in this array to populate your dropdown as required
                    $options = array(
                    'active' => 'Active',
                    'inactive' => 'Inactive',
                    );
                    echo form_dropdown('mid', $options,$id_map, ' id="mid"');
                    ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-01T19:20:24.660

如果表单选择内容是从这样的 foreach 循环中选择的呢？

```
<?php foreach ($roles as $role) {
        echo "<option value=" . $role->id . ">" . $role->role_name . "</option>";
                      }
      ?> 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2017-04-29T01:07:44.567

如果您在实际下拉字段中没有验证规则，则

```
echo form_dropdown('mid',$id_map); 
```

足够了。

# ruby-on-rails - 非持久 ActiveRecord 模型属性

> ID：11986792
> 
> 赞同：44
> 
> 时间：2012-08-16T12:08:26.320
> 
> 标签：ruby-on-rails, activerecord

我想向现有模型添加一些不需要持久化的属性，甚至不需要映射到数据库列。有没有解决方案来指定这样的事情？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-08-16T12:49:16.650

当然使用好的旧红宝石`attr_accessor`。在您的模型中：

```
attr_accessor :foo, :bar 
```

您将能够：

```
object.foo = 'baz'
object.foo #=> 'baz' 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-12-06T06:07:30.933

我遇到了同样的问题，但我需要引导模型，因此在调用 to_json 后属性必须保持不变。你需要为此做一件额外的事情。

正如 apneadiving 所说，最简单的开始方法是转到您的模型并添加：

```
attr_accessor :foo 
```

然后你可以分配你想要的属性。但是要使属性保持不变，您需要更改属性方法。在您的模型文件中添加此方法：

```
def attributes
  super.merge('foo' => self.foo)
end 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-01-20T16:53:59.280

如果有人想知道如何将其渲染到视图，请使用 render 方法的方法参数，如下所示：

```
render json: {results: results}, methods: [:my_attribute] 
```

请注意，这仅在您在模型上设置 attr_accessor 并在控制器操作中设置属性时才有效，如所选答案所述。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-01-10T15:41:29.797

从 Rails 5.0 开始，您可以使用`attribute`：

```
class StoreListing < ActiveRecord::Base
  attribute :non_persisted
  attribute :non_persisted_complex, :integer, default: -1
end 
```

属性将`attribute`像被持久化的属性一样创建，即您可以定义类型和其他选项，将其与`create`方法一起使用等。

如果您的数据库表包含匹配列**，它将被持久化**，因为`attribute`它也用于影响现有列与 SQL 之间的转换。

见：[https ://api.rubyonrails.org/classes/ActiveRecord/Attributes/ClassMethods.html#method-i-attribute](https://api.rubyonrails.org/classes/ActiveRecord/Attributes/ClassMethods.html#method-i-attribute)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-28T13:01:09.890

就我而言，我想使用左连接来填充自定义属性。如果我不添加任何东西，它就可以工作，但我也希望能够在新对象上设置属性，当然它不存在。如果我添加`attr_accessor`，那么它总是`nil`在 a 之后返回`select`。这是我最终采用的方法，可用于设置新对象并从左连接中检索。

```
after_initialize do
  self.foo = nil unless @attributes.key?("foo")
end

def foo
  @attributes["foo"]
end

def foo=(value)
  @attributes["foo"] = value
end 
```

# api - 无法在 magento 模块中更新产品

> ID：11986793
> 
> 赞同：0
> 
> 时间：2012-08-16T12:08:30.783
> 
> 标签：api, magento, module

使用模块从前端更新 magento 产品时遇到问题，该模块的功能是让客户创建自己的产品并在启用之前让管理员批准（这部分工作）。

问题是当客户尝试更新其管理员批准的产品时（与批准之前一样，产品声明新创建的产品处于待处理状态，但他们仍然可以更新在产品创建功能期间创建的数据/属性，相同的属性未更新使用控制器）

首先，我有一个控制器，可以更新已批准/待定的客户产品

```
public function editPostAction() {

        $id = $this->getRequest()->getParam('productid');

        if ( $id !== false ) {

            list($data, $errors) = $this->validatePost();
            if ( !empty($errors) ) {
                foreach ($errors as $message) {
                    $this->_getSession()->addError($message);
                }
                $this->_redirect('customer/products/edit/', array(
                        'id'    => $id
                    ));
            } else {

                $customerId = $this->_getSession()->getCustomer()->getid();
                $product = Mage::getResourceModel('customerpartner/customerpartner_product_collection')
                            ->addAttributeToSelect('*')
                            ->addAttributeToFilter('customer_id', $customerId)
                            ->addAttributeToFilter('entity_id', $id)
                            ->load()
                            ->getFirstItem();

                $product->setName($this->getRequest()->getParam('name'));
                $product->setSku($this->getRequest()->getParam('sku'));
                $product->setDescription($this->getRequest()->getParam('description'));
                $product->setShortDescription($this->getRequest()->getParam('short_description'));
                $product->setPrice($this->getRequest()->getParam('price'));
                $product->setWeight($this->getRequest()->getParam('weight'));
                $product->setStock($this->getRequest()->getParam('stock'));
                $product->save();

                if ( isset($_FILES) && count($_FILES) > 0 ) {
                    foreach($_FILES as $image ) {
                        if ( $image['tmp_name'] != '' ) {
                            if ( ( $error = $this->uploadImage($image, $id) ) !== true ) {
                                $errors[] = $error;
                            }
                        }

                    }
                }

                if ( empty($errors) ) {
                    $this->_getSession()->addSuccess($this->__('Your product was successfully updated'));
                } else {
                    $this->_getSession()->addError('Product info was saved but was imposible to save the image');
                    foreach ($errors as $message) {
                        $this->_getSession()->addError($message);
                    }
                }

                $this->_redirect('customer/products/');

            }
        }
} 
```

以及提交时应该更新产品属性和图像的表单，但页面在提交时重新加载并显示成功保存的消息，但属性未更新并返回到该产品的编辑表单（对于创建的每个产品）更新表单中的值具有我们刚刚提交的更新的值，但产品属性也没有在目录中更新（它们与在创建新过程中输入的值保持相同）

不要不继续找出问题所在，或者只是转而使用 api 或直接 sql 来完成工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T05:51:41.570

**更新为在 .phtml 中调用的新操作，请参见下文，因为它似乎正在根据需要更新产品数据，但仍希望改进.. 使用 /frontendname/editApprovedPost/ 以形式调用**

```
public function editApprovedPostAction() {

        $id = $this->getRequest()->getParam('productid');
        $idproduct = $this->getRequest()->getParam('product_id');

        if ( $id !== false ) {

            list($data, $errors) = $this->validatePost();
            if ( !empty($errors) ) {
                foreach ($errors as $message) {
                    $this->_getSession()->addError($message);
                }
                $this->_redirect('customer/products/edit/', array(
                        'id'    => $id
                    ));
            } else { 
```

**- 现在在 } else {... 之后添加了更多的 php 代码来操作（按此顺序）**

```
 require_once 'app/Mage.php'; 
```

**然后为前端产品更新添加管理商店...**

```
Mage::app()->setCurrentStore(Mage_Core_Model_App::ADMIN_STORE_ID); 
```

**然后获取客户ID...**

```
$customerId = Mage::getSingleton('customer/session')->getCustomerId(); 
```

**然后使用表单产品 ID 获取要更新的产品 ID...**

```
$product = Mage::getModel('catalog/product')->load("".$idproduct.""); 
```

**然后使用 setName() 更新/保存从表单输入值中获取的属性值...**

```
$product->setName($this->getRequest()->getParam('name'));//use whatever attributes need (only text and text area tested so far) 
```

**然后使用...保存/更新产品数据**

```
$product->save(); 
```

**然后添加以运行错误...**

```
 if ( empty($errors) ) {
                    $this->_getSession()->addSuccess($this->__('Your product was successfully updated'));

                } else {

                    $this->_getSession()->addError('Product info was saved but was imposible to save the image');
                    foreach ($errors as $message) {
                        $this->_getSession()->addError($message);
                    }
                }

                $this->_redirect('customer/products/');

            }
    }
} 
```

然后在客户登录和客户组配置的情况下在前端提交表单

*   自定义表单仅对客户组 2 可见（默认为批发）

下面的表格......

抱歉，无法将表格粘贴到此处，以任何方式粘贴代码

```
Mage::app()->setCurrentStore(Mage_Core_Model_App::ADMIN_STORE_ID); 
```

我在一些帖子中读到的是，要在前端更新产品，您需要成为“管理员”，这似乎很好。如前所述，脚本没有更新，这是因为当要更新的数据是实际产品（已使用不同的模型数据批准和创建）并且它正在更新时，它试图将数据保存到不同的模型使用

```
$product = Mage::getResourceModel('customerpartner/customerpartner_product_collection') 
```

其他人的评论会很好，希望这对某人有所帮助，因为是时候关闭这个构建了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:54:11.730

see this post [Magento 1.7: Non-system product attribute not saving in PHP script](https://stackoverflow.com/questions/11968335/magento-1-7-non-system-product-attribute-not-saving-in-php-script/11970788#11970788) the problem maybe different but the solution can be found in that post

# search - 在 BlackBerry-KeywordFilterField 上创建搜索字段

> ID：11986806
> 
> 赞同：2
> 
> 时间：2012-08-16T12:09:08.800
> 
> 标签：search, blackberry, field

我想创建一个搜索字段，我在 Blackberry 的示例中找到了 KeyworldFilterDemo。但由单个文本输入字段（顶部）和可选字符串元素列表组成。有没有办法将列表创建为包含大量信息的图形组件，例如我们的姓名电子邮件......如果任何人键入一个字符，它会显示以它开头的所有名称。

# ruby-on-rails - Rails - 带有 ActiveAdmin gem 的未初始化常量 AdminUser

> ID：11986808
> 
> 赞同：3
> 
> 时间：2012-08-16T12:09:13.393
> 
> 标签：ruby-on-rails, activeadmin

我是 Rails 的新手，我会尝试将 ActiveAdmin 安装到我现有的项目（Rails 3.2.1）中。

我的 gemfile 中有 activeadmin、meta_search、devise 和 sass-rails。需要在 configuration/application.rb 中进行设计。

当我尝试运行“rails generate active_admin:install”或“rails server”时，出现错误：

C:/RailsInstaller/Ruby1.9.3/live_support/inflector/methods connstant AdminUser (NameError)

我不知道如何解决。

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-12-16T06:06:47.823

只需删除以下行`routes.rb`

`devise_for :admin_users, ActiveAdmin::Devise.config`

然后重新运行

`rails g active_admin:install`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-05T11:08:34.997

卸载并重新安装 activeadmin 后，我遇到了同样的错误（因为我想将其从 admin_user 中删除以将其安装到我自己的用户中）。

解决方案是在我的项目中搜索“admin”，并注释掉 activeadmin 卸载后留下的所有代码。

我发现 activeadmin 代码的文件是：

```
routes.rb
schema.rb 
```

# c# - 在 C# 中每小时检查一次网页

> ID：11986813
> 
> 赞同：-3
> 
> 时间：2012-08-16T12:09:28.350
> 
> 标签：c#, visual-studio-express

我想编写一个每小时检查一次网页的脚本。我一直在看关于 SO 的其他问题，每个人都在谈论使用：

```
static System.Windows.Forms.Timer t; 
```

有人可以帮帮我吗？

很长一段时间以来，我都没有在 C# 中进行过多的编码，因为我最近一直在研究 Unix 和 Linux。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T12:13:19.850

```
using System;
using System.Net;
using System.Timers;

class Program
{
    static void Main()
    {
        Timer t = new Timer(TimeSpan.FromHours(1).TotalMilliseconds);
        t.Elapsed += (sender, e) =>
        {
            // This code will execute every hour
            using (var client = new WebClient())
            {
                // Send an HTTP request to download the contents of the web page
                string result = client.DownloadString("http://www.google.com");

                // do something with the results
                ...
            }
        };
        Console.WriteLine("press any key to stop");
        Console.ReadKey();
    }
} 
```

# autohotkey - Alt + Space + 自动热键中的键

> ID：11986814
> 
> 赞同：4
> 
> 时间：2012-08-16T12:09:30.957
> 
> 标签：autohotkey

如何在自动热键中创建`Alt + Space + C`快捷方式？Alt + Space 是`!space`，但我不知道如何添加第三个键而不会出错。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T17:46:32.850

您可以将`#If`指令（需要 AHK_L）与`GetKeyState()`函数结合使用：

```
#If GetKeyState("Alt", "p")

Space & c::Traytip,, % a_thishotkey

#If 
```

或者您可以使用以下`Keywait`命令：

```
!space::
keywait, c, d, t0.6
If ErrorLevel
    Traytip,, Alt and space
Else
    Traytip,, Alt space and c
Return 
```

如果您不按 ，这也会在 0.6 秒后触发`Alt`+结果。 如果这是不可取的，你可以这样写：`space``C`

```
!space::
keywait, c, d, t0.6
If (!ErrorLevel) {
    Traytip,, Alt space and c
    Sleep, 2000
    Traytip,, % a_thishotkey
} Return 
```

`!ErrorLevel`意思是“不是错误级别”

# pdf - 将色带应用于 PDF 中的 TIFF

> ID：11986816
> 
> 赞同：1
> 
> 时间：2012-08-16T12:09:37.840
> 
> 标签：pdf, itext, tiff, afp

• 背景 ：

我们正在开发 AFP 到 PDF 工具。它涉及将 AFP（高级功能处理）文件转换为 PDF。

• 详细的问题陈述：

我们有嵌入 TIFF 图像的 AFP 文件。图像对象在功能集 45 中进行了描述，有点像这样 -

```

```
Image Content
 Begin Tile
  Image Encoding Parameter – TIFF LZW
   Begin Transparency Mask
      Image Encoding Parameter – G4MMR
      Image Data Elements 
   End Transparency Mask
   Image Data Elements (IDE Size 32) – 4 bands: CMYK
End Tile
End Image Content 
```

我们想使用 Java /iText API 将此平铺图像写入 PDF。到目前为止，我们可以编写 G4MMR 图像。但是，我们无法将 CMYK 色带数据（蓝色）应用于此图像。

• 尝试的解决方案：

编写 G4MMR 图像的代码如下：

```

```
ByteArrayOutputStream decode = saveAsTIFF(<width>,<height>,<imageByteData>);                                    
RandomAccessFileOrArray ra=new RandomAccessFileOrArray(saveAsTIFF.toByteArray());          
int pages = TiffImage.getNumberOfPages(ra); 
for(int i1 = 1; i1 <= pages; i1++){
img1 = TiffImage.getTiffImage(ra, i1);                     
}
img1.scaleAbsolute(256, 75);      
document.add(img1); 
```

此处给出了 saveAsTIFF 方法 –
 [http://www.jpedal.org/PDFblog/2011/08/ccitt-encoding-in-pdf-files-converting-pdf-ccitt-data-into-a-tiff/](http://www.jpedal.org/PDFblog/2011/08/ccitt-encoding-in-pdf-files-converting-pdf-ccitt-data-into-a-tiff/)
如前所述，我们无法将 CMYK 4 波段图像颜色数据应用于此 G4MMR 图像。

• 每个组件版本的技术堆栈：

1\. JDK 1.6 

2\. itextpdf-5.1

——乌梅什·帕塔克

            回答 #1

赞同：2

时间：2012-09-07T08:54:38.473

您显示的 AFP 资源是用 LZW 压缩的 TIFF CMYK 图像。此图像还使用了“透明蒙版”，该蒙版使用 G4MMR 压缩（与传统传真样式 G4 略有不同的编码）。

因此图像数据已经使用 CMYK 颜色空间，每个波段 (C,M,Y,K) 都使用简单的 LZW 编码单独压缩，提取和存储为基本 TIFF CMYK 文件应该不会太难。您还必须将透明度蒙版转换为 G4 或原始数据，以在 pdf 文件中使用它来制作 CMYK 图像。

如果你想要更好的 PDF 输出控制，我建议你看看 pdflib

            回答 #2

赞同：0

时间：2012-08-17T13:24:31.263

在将图像添加到 PDF 文件之前，您需要为图像添加 CMYK 颜色空间。但是，恐怕[iText 可能不完全支持](http://support.itextpdf.com/node/82)这一点。
一种解决方法是在将图像添加到 PDF 文件之前将其转换为默认的 RGB 颜色空间，但这可能意味着图像的质量会有所损失。

```

```

# ios - 在装有 Windows 的 iOS 设备上测试应用程序

> ID：11986817
> 
> 赞同：0
> 
> 时间：2012-08-16T12:09:46.740
> 
> 标签：ios, testing, provisioning

我正在尝试将我的应用分发给 beta 测试人员。其中一名测试人员有一台电脑。现在我注意到这里的说明[https://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/YourFirstAppStoreSubmission/TestYourApponManyDevicesandiOSVersions/TestYourApponManyDevicesandiOSVersions.html](https://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/YourFirstAppStoreSubmission/TestYourApponManyDevicesandiOSVersions/TestYourApponManyDevicesandiOSVersions.html) 在 To install the app on a device 下。. . 参考 Mac。我的测试员试图在他的电脑上做同样的事情（打开 mobileprov 文件，将 ipa 拖到 iTunes 并同步，但他收到了一个不确定的错误，说“~我的应用程序名称~无法安装在这个设备上”。

有没有一种**方法可以在*Windows*上执行该过程并设法让应用程序在 iDevice 上启动并运行？**，虽然网站上没有提到？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:13:15.670

对于 beta 测试，我推荐[Testflight](https://testflightapp.com/)或使用[Beta Builder](http://www.hanchorllc.com/betabuilder-for-ios/)，您可以上传到您的保管箱并将链接邮寄给您的测试人员。测试人员在手机上打开链接并从手机安装应用程序，无需使用 iTunes。

Testflight 的好处是您可以获得符号化的崩溃报告，并查看您的应用程序经过了多少小时的测试。它是免费且简单的。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:21:48.557

也有临时分发，[这里](https://developer.apple.com/programs/ios/distribute.html)有一个讨论它的链接，但实际上并没有太多其他内容。

# java - 运行此 Java 应用程序时，非分页内核内存疯狂增加

> ID：11986818
> 
> 赞同：0
> 
> 时间：2012-08-16T12:09:46.523
> 
> 标签：java, windows, memory-leaks, ram, file-locking

我使用 JNetPcap 库制作了一个数据包嗅探器。它是一个 .jar，从另一个监视系统资源（RAM、磁盘使用、活动网络接口、正在运行的进程等）的应用程序执行。我希望嗅探器在监视应用程序终止（由用户或不由用户终止）时自行关闭，我考虑使用监视应用程序创建一个文件并使用 fileLock 锁定它。然后在嗅探器的每个循环中，我都会检查文件是否仍然被锁定，如果不是（意味着监视器应用程序终止），那么我会调用 System.exit(0);

问题是当它们都在执行时，非分页内核内存使用量（实际上，不仅仅是非分页内核内存）上升得非常快。当我单独执行它们时不会发生这种情况。

当我同时运行它们时也不会发生这种情况，**但是在嗅探器应用程序中注释了以下代码**（负责检查监视器创建的文件是否仍然被锁定）

```
 private void checkReleasedLock() throws IOException{
            File file = new File("config\\file.lock");
            FileChannel channel = new RandomAccessFile(file, "rw").getChannel();
            FileLock lock = null;

            try {
                 lock = channel.tryLock();

                 if(lock != null){ //It acquired the lock => the other application is terminated.
                     System.exit(0);
                 } else {
                     file = null;
                     channel = null;
                     lock = null;
                 }
            } catch (Exception e) {
                file = null;
                channel = null;
                lock = null;
            }
        } 
```

只是为了向您展示内存使用量的增加，这是记录系统资源的监视器应用程序的输出：

```
######################################
# Beginning log: 2012-08-03 10:14:26 #
######################################
__________
RAM USAGE:

Total: 2040 MB
Free: 1260 MB (63.31 %)
Used: 720 MB (36.69 %)

Swap total: 4125 MB
Swap used: 1104 MB
Swap free: 3021 MB

Kernel Memory Total: 75876 KB
Paged: 52536 KB
Nonpaged: 23340 KB 
```

几个小时后...

```
######################################
# Beginning log: 2012-08-03 12:14:27 #
######################################
__________
RAM USAGE:

Total: 2040 MB
Free: 1000 MB (50.37 %)
Used: 980 MB (49.63 %)

Swap total: 4125 MB
Swap used: 1307 MB
Swap free: 2818 MB

Kernel Memory Total: 213724 KB
Paged: 173724 KB
Nonpaged: 40000 KB 
```

那个代码有问题吗？这可能是内存泄漏的原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:17:29.383

> 那个代码有问题吗？

看起来每次调用该方法时都会创建一个未关闭的 FileChanel 对象。分配`null`不会导致任何东西被关闭。

您应该这样编码以确保 FileChanel 始终关闭：

```
 private void checkReleasedLock() throws IOException {
        File file = new File("config\\file.lock");
        FileChannel channel = new RandomAccessFile(file, "rw").getChannel();
        FileLock lock;

        try {
            lock = channel.tryLock();
            if (lock != null) {
                System.exit(0);
            }
        } finally {
            channel.close();
        }
    } 
```

请注意，我还修复了一个导致所有异常被压扁的错误。

> 这可能是内存泄漏的原因吗？

是的，它可能是。使用原始形式的代码，打开的文件通道只会在 Java 垃圾收集器最终确定对象时关闭。在那之前，每个人都会占用操作系统资源，这可以很好地解释未分页内核内存使用量的增加。

# objective-c - 注释和表格视图

> ID：11986820
> 
> 赞同：1
> 
> 时间：2012-08-16T12:09:51.427
> 
> 标签：objective-c, ios, uitableview, mkmapview

我正在尝试使用我的注释数组填充我的表格视图，但 XCode 似乎在我添加此代码时给我一个断点。

```
if (cell == nil)
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
}

NSMutableArray *annotations = [[NSMutableArray alloc] init];

if(indexPath.section == 0)
{
    for(Location *annotation in [(MKMapView *)self annotations])
    {
        if(![annotation isKindOfClass:[MKUserLocation class]])
        {
    }
    }
    cell.textLabel.text = [[annotations objectAtIndex:indexPath.row] title];
}
return cell; 
```

我的注释：

```
CLLocationCoordinate2D thecoordinate59;

thecoordinate59.latitude = 51.520504;
thecoordinate59.longitude = -0.106725; 
Location *ann1 = [[Location alloc] init];
ann1.title =@"Antwerp";
ann1.coordinate = thecoordinate1;

NSMutableArray *annotations = [NSMutableArray arraywithObjects: ann.. ann59, nil];

[map addAnnotations:annotations]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:55:36.903

In `cellForRowAtIndexPath`, you are declaring a new, local variable named `annotations` which has nothing to do with the `annotations` array you are creating in `viewDidLoad` (I assume that's where you're adding the annotations).

Then in `cellForRowAtIndexPath`, this line:

```
for(Location *annotation in [(MKMapView *)self annotations]) 
```

fails because there is no `annotations` property in `self`. In `viewDidLoad`, you declared a local variable named `annotations` but it is not visible or accessible outside that method.

The other issue with the above line is that you're casting `self` as an `MKMapView *`. Most likely `self` is a `UIViewController`. It contains a map view but is not itself one.

You need to first declare your `annotations` array at the detail view's class level so it's available across all methods. In the detail view .h file:

```
@property (nonatomic, retain) NSMutableArray *annotations; 
```

By the way, I'd name it something different so it's not confused with the map view's own `annotations` property.

In the .m, synthesize it:

```
@synthesize annotations; 
```

In `viewDidLoad`, create it like this:

```
self.annotations = [NSMutableArray arraywithObjects...
[map addAnnotations:self.annotations]; 
```

In the `numberOfRowsInSection` method, return the array's count:

```
return self.annotations.count; 
```

Then in `cellForRowAtIndexPath`:

```
if (cell == nil)
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
}

if(indexPath.section == 0)
{
    cell.textLabel.text = [[self.annotations objectAtIndex:indexPath.row] title];
}
return cell; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:36:42.183

您正在报告那条线上的崩溃（我假设）

我看到的问题是崩溃原因是

```
cell.textLabel.text = [[annotations objectAtIndex:indexPath.row] title]; 
```

`annotations`数组只是在本地初始化，上面的几个语句不包含任何值..??

# c++ - C/C++：将 char 中的十六进制值转换为整数

> ID：11986822
> 
> 赞同：3
> 
> 时间：2012-08-16T12:09:53.720
> 
> 标签：c++, c, char

我将十六进制值存储为字符：

```
char A = '0';
char B = '6';
char C = 'E'; 
```

...我需要将它们转换为整数。我知道'atoi'，但这仅适用于十进制编码的字符值。有没有类似的功能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T12:13:25.973

```
int v = (A > '9')? (A &~ 0x20) - 'A' + 10: (A - '0'); 
```

对 ASCII 是正确的。对于其他字符集，类似的方法会起作用，但你会想要`toupper`而不是`&~ 0x20`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T12:13:38.627

你可以试试`strtol`。但`strtol`需要一个 0 终止`char *`，所以：

```
long x = strtol((char[]){A, 0}, NULL, 16); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-16T14:04:41.460

在 C 中：

```
const char chrs[] = "0123456789ABCDEF";

int value = -1; // sentinel
const char *loc = strchr(chrs, ch);
if (loc)
    value = loc - chrs; 
```

或者，使用 C++：

```
const std::string chrs("0123456789ABCDEF");
int value = chrs.find(ch); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T12:17:05.130

您可以明确声明您想使用 base 16`strtol`

```
char C = 'E';
int num = strtol (&C ,NULL,16); // 14 
```

请注意，这`C`不是一个以**空结尾的数组**，如果您可以将字符更改为以下内容，则可以轻松解决：

```
char C[] = "E";
int num = strtol(C, NULL, 16); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T12:35:23.500

显而易见的解决方案是制作一个字符串，并在其上使用标准转换技术：

```
std::istringstream tmp( std::string( 1, A ) );
tmp >> anInt; 
```

但是，它有点重（轻描淡写），并且在运行时可能效率不高（如果我听说过的话，那就是 litote）。

一个简单而强大的解决方案是表查找：

```
static char const digits[] = "0123456789ABCDEF";
int value = std::find(digits, digits + 16, A) - digits;
if (value >= 16) {
    //  A wasn't a hex digit...
} 
```

或者（并且更快）是使用字符作为表的索引：

```
static signed char const values[] =
{
    -1, -1, -1, -1, -1, -1, -1, -1,     //  0x00-0x07
    //  ...
     0,  1,  2,  3,  4,  5,  6,  7,     //  0x30-0x37
     8,  9, -1, -1, -1, -1, -1, -1,     //  0x38-0x3F
    -1, 10, 11, 12, 13, 14, 15, -1,     //  0x40-0x47
    //  ...
    -1, 10, 11, 12, 13, 14, 15, -1,     //  0x60-0x67
    //  ...
};

int value = values[static_cast<unsigned char>( A )]; 
```

请注意，这**非常**依赖于编码；您可能希望在运行时从数字列表中构建它，以避免任何编码问题。就像是：

```
struct ValueTable
{
    signed char values[256];
    ValueTable()
    {
        std::fill( begin(values), end(values), -1 );
        static char const digits[] = "0123456789ABCDEF";
        for ( int i = 0; i < 16; ++ i ) {
            values[ digits[i] = i;
            values[ tolower( digits[i] ) ] = i;
        }
    }
};
static ValueTable const map;

//   ...
int value = map.values[ static_cast<unsigned char>( A ) ]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-16T12:46:47.940

```
#include <stdio.h>
#include <stdlib.h>

int xtoi(char c)
{
    int v = -1;
    char w=toupper(c);
    if(w >= 'A' && w <= 'F'){
        v = w - 'A' + 0x0A;
    }else if (w >= '0' && w <= '9'){
        v = w - '0';
    }

    return v;
}

int main(int argc,char **argv)
{
    printf("v:%p\n",argc == 2 ? xtoi(argv[1][0]):-1);
    return 0;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-11T14:58:09.703

我有一个类似的问题，但我也涉及验证它是一个有效的十六进制字符。下面是我将十六进制字符转换为二进制半字节的解决方案。（注意：您可能需要将 uint8_t 更改为 int）。

这种方法的好处是，而不是根据查找表单独检查每个字符。在输出答案之前，最多只有 6 次比较（除了空指针保护）。

```
/**-----------------------------------------------------------------------------
  @brief Converts Hexidecimal Char Value Into Binary Nibble Format
  Converts 0-9 & a-f & A-F Hex notation to binary nibble between 0x00 to 0x0F
  Return: True if valid nibble is avaliable at nibble_out else it returns false
------------------------------------------------------------------------------*/
bool char_to_nibble(const char ch, uint8_t *nibble_out)
{ /* Assumes char ch is encoded in ascii */
  if (!nibble_out)
  { /* Output Pointer Cannot Be Null */
    return false;
  }
  if ( '0' <= ch && ch <= '9' )
  { /* Integer Character */
    *nibble_out = ch - '0';
    return true;
  }
  if ( 'a' <= ch && ch <= 'f' )
  { /* Lowercase Letter Character */
    *nibble_out = ch - 'a' + 10;
    return true;
  }
  if ( 'A' <= ch && ch <= 'F' )
  { /* Upper Case Character */
    *nibble_out = ch - 'A' + 10;
    return true;
  }
  return false;
} 
```

确认上述功能正常运行。下面的测试程序中的证明。

# 测试程序

该程序演示了 char_to_nibble() 及其用法。

```
/*******************************************************************************
  Parse Hexidecimal Char to binary Nibble ( In C Language )
  Brian Khuu 2017
*******************************************************************************/
// Tip: tcc -run ${This File}
#include <stdint.h>  // Standard Integer (e.g. uint8_t )
#include <stdbool.h> // Standard Boolean
#include <stdio.h>   // printf()
#include <ctype.h>   // isprint()
#include <stdio.h>   // sscanf()

/**-----------------------------------------------------------------------------
  @brief Converts Hexidecimal Char Value Into Binary Nibble Format
  Converts 0-9 & a-f & A-F Hex notation to binary nibble between 0x00 to 0x0F
  Return: True if valid nibble is avaliable at nibble_out else it returns false
------------------------------------------------------------------------------*/
bool char_to_nibble(const char ch, uint8_t *nibble_out)
{ /* Assumes char ch is encoded in ascii */
  if (!nibble_out)
  { /* Output Pointer Cannot Be Null */
    return false;
  }
  if ( '0' <= ch && ch <= '9' )
  { /* Integer Character */
    *nibble_out = ch - '0';
    return true;
  }
  if ( 'a' <= ch && ch <= 'f' )
  { /* Lowercase Letter Character */
    *nibble_out = ch - 'a' + 10;
    return true;
  }
  if ( 'A' <= ch && ch <= 'F' )
  { /* Upper Case Character */
    *nibble_out = ch - 'A' + 10;
    return true;
  }
  return false;
}

/*******************************************************************************
  Demonstration of char_to_nibble()
*******************************************************************************
  - Running this program without an argument will spit out the full table.
  - Running this program with one char per argument will run a partial test.
*/

void test(const char ch)
{ /* Runs a test on this char and display the result */
  uint8_t nibble = 0;
  /* Function Under Test */
  bool result = char_to_nibble(ch, &nibble);
  /* Print Result */
  printf("| 0x%02X, `%c` | %2u     | %s |\r\n", (uint8_t) ch, (isprint(ch)?ch:' '), nibble, (result?"**TRUE**":" FALSE  ") );
}

#define ARGTOINT(arg, var) if((argc-1) >= arg){sscanf(argv[arg], "%d", &var);}

int main(int argc, char *argv[])
{
  printf("| Input     | Output | Is Hex?  |\r\n");
  printf("|-----------|--------|----------|\r\n");
  if (argc == 1)
  { /* self test on no param */
    for (uint16_t i = 0 ; i < 256 ; i++) test((char)i);
    return 0;
  }
  for (int i = 1 ; i < argc ; i++)
  { /* Process user input (e.g. "a b c d e ..." )*/
    char ch = *(argv[i]);
    test(ch);
  }
  return 0;
} 
```

# 全表输出

该表是通过运行上述测试程序（空 arg 模式）生成的。这表明此功能按预期工作。

```
| Input     | Output | Is Hex?  |
|-----------|--------|----------|
| 0x00, ` ` |  0     |  FALSE   |
| 0x01, ` ` |  0     |  FALSE   |
| 0x02, ` ` |  0     |  FALSE   |
| 0x03, ` ` |  0     |  FALSE   |
| 0x04, ` ` |  0     |  FALSE   |
| 0x05, ` ` |  0     |  FALSE   |
| 0x06, ` ` |  0     |  FALSE   |
| 0x07, ` ` |  0     |  FALSE   |
| 0x08, ` ` |  0     |  FALSE   |
| 0x09, ` ` |  0     |  FALSE   |
| 0x0A, ` ` |  0     |  FALSE   |
| 0x0B, ` ` |  0     |  FALSE   |
| 0x0C, ` ` |  0     |  FALSE   |
| 0x0D, ` ` |  0     |  FALSE   |
| 0x0E, ` ` |  0     |  FALSE   |
| 0x0F, ` ` |  0     |  FALSE   |
| 0x10, ` ` |  0     |  FALSE   |
| 0x11, ` ` |  0     |  FALSE   |
| 0x12, ` ` |  0     |  FALSE   |
| 0x13, ` ` |  0     |  FALSE   |
| 0x14, ` ` |  0     |  FALSE   |
| 0x15, ` ` |  0     |  FALSE   |
| 0x16, ` ` |  0     |  FALSE   |
| 0x17, ` ` |  0     |  FALSE   |
| 0x18, ` ` |  0     |  FALSE   |
| 0x19, ` ` |  0     |  FALSE   |
| 0x1A, ` ` |  0     |  FALSE   |
| 0x1B, ` ` |  0     |  FALSE   |
| 0x1C, ` ` |  0     |  FALSE   |
| 0x1D, ` ` |  0     |  FALSE   |
| 0x1E, ` ` |  0     |  FALSE   |
| 0x1F, ` ` |  0     |  FALSE   |
| 0x20, ` ` |  0     |  FALSE   |
| 0x21, `!` |  0     |  FALSE   |
| 0x22, `"` |  0     |  FALSE   |
| 0x23, `#` |  0     |  FALSE   |
| 0x24, `$` |  0     |  FALSE   |
| 0x25, `%` |  0     |  FALSE   |
| 0x26, `&` |  0     |  FALSE   |
| 0x27, `'` |  0     |  FALSE   |
| 0x28, `(` |  0     |  FALSE   |
| 0x29, `)` |  0     |  FALSE   |
| 0x2A, `*` |  0     |  FALSE   |
| 0x2B, `+` |  0     |  FALSE   |
| 0x2C, `,` |  0     |  FALSE   |
| 0x2D, `-` |  0     |  FALSE   |
| 0x2E, `.` |  0     |  FALSE   |
| 0x2F, `/` |  0     |  FALSE   |
| 0x30, `0` |  0     | **TRUE** |
| 0x31, `1` |  1     | **TRUE** |
| 0x32, `2` |  2     | **TRUE** |
| 0x33, `3` |  3     | **TRUE** |
| 0x34, `4` |  4     | **TRUE** |
| 0x35, `5` |  5     | **TRUE** |
| 0x36, `6` |  6     | **TRUE** |
| 0x37, `7` |  7     | **TRUE** |
| 0x38, `8` |  8     | **TRUE** |
| 0x39, `9` |  9     | **TRUE** |
| 0x3A, `:` |  0     |  FALSE   |
| 0x3B, `;` |  0     |  FALSE   |
| 0x3C, `<` |  0     |  FALSE   |
| 0x3D, `=` |  0     |  FALSE   |
| 0x3E, `>` |  0     |  FALSE   |
| 0x3F, `?` |  0     |  FALSE   |
| 0x40, `@` |  0     |  FALSE   |
| 0x41, `A` | 10     | **TRUE** |
| 0x42, `B` | 11     | **TRUE** |
| 0x43, `C` | 12     | **TRUE** |
| 0x44, `D` | 13     | **TRUE** |
| 0x45, `E` | 14     | **TRUE** |
| 0x46, `F` | 15     | **TRUE** |
| 0x47, `G` |  0     |  FALSE   |
| 0x48, `H` |  0     |  FALSE   |
| 0x49, `I` |  0     |  FALSE   |
| 0x4A, `J` |  0     |  FALSE   |
| 0x4B, `K` |  0     |  FALSE   |
| 0x4C, `L` |  0     |  FALSE   |
| 0x4D, `M` |  0     |  FALSE   |
| 0x4E, `N` |  0     |  FALSE   |
| 0x4F, `O` |  0     |  FALSE   |
| 0x50, `P` |  0     |  FALSE   |
| 0x51, `Q` |  0     |  FALSE   |
| 0x52, `R` |  0     |  FALSE   |
| 0x53, `S` |  0     |  FALSE   |
| 0x54, `T` |  0     |  FALSE   |
| 0x55, `U` |  0     |  FALSE   |
| 0x56, `V` |  0     |  FALSE   |
| 0x57, `W` |  0     |  FALSE   |
| 0x58, `X` |  0     |  FALSE   |
| 0x59, `Y` |  0     |  FALSE   |
| 0x5A, `Z` |  0     |  FALSE   |
| 0x5B, `[` |  0     |  FALSE   |
| 0x5C, `\` |  0     |  FALSE   |
| 0x5D, `]` |  0     |  FALSE   |
| 0x5E, `^` |  0     |  FALSE   |
| 0x5F, `_` |  0     |  FALSE   |
| 0x60, ``` |  0     |  FALSE   |
| 0x61, `a` | 10     | **TRUE** |
| 0x62, `b` | 11     | **TRUE** |
| 0x63, `c` | 12     | **TRUE** |
| 0x64, `d` | 13     | **TRUE** |
| 0x65, `e` | 14     | **TRUE** |
| 0x66, `f` | 15     | **TRUE** |
| 0x67, `g` |  0     |  FALSE   |
| 0x68, `h` |  0     |  FALSE   |
| 0x69, `i` |  0     |  FALSE   |
| 0x6A, `j` |  0     |  FALSE   |
| 0x6B, `k` |  0     |  FALSE   |
| 0x6C, `l` |  0     |  FALSE   |
| 0x6D, `m` |  0     |  FALSE   |
| 0x6E, `n` |  0     |  FALSE   |
| 0x6F, `o` |  0     |  FALSE   |
| 0x70, `p` |  0     |  FALSE   |
| 0x71, `q` |  0     |  FALSE   |
| 0x72, `r` |  0     |  FALSE   |
| 0x73, `s` |  0     |  FALSE   |
| 0x74, `t` |  0     |  FALSE   |
| 0x75, `u` |  0     |  FALSE   |
| 0x76, `v` |  0     |  FALSE   |
| 0x77, `w` |  0     |  FALSE   |
| 0x78, `x` |  0     |  FALSE   |
| 0x79, `y` |  0     |  FALSE   |
| 0x7A, `z` |  0     |  FALSE   |
| 0x7B, `{` |  0     |  FALSE   |
| 0x7C, `|` |  0     |  FALSE   |
| 0x7D, `}` |  0     |  FALSE   |
| 0x7E, `~` |  0     |  FALSE   |
| 0x7F, ` ` |  0     |  FALSE   |
| 0x80, ` ` |  0     |  FALSE   |
| 0x81, ` ` |  0     |  FALSE   |
| 0x82, ` ` |  0     |  FALSE   |
| 0x83, ` ` |  0     |  FALSE   |
| 0x84, ` ` |  0     |  FALSE   |
| 0x85, ` ` |  0     |  FALSE   |
| 0x86, ` ` |  0     |  FALSE   |
| 0x87, ` ` |  0     |  FALSE   |
| 0x88, ` ` |  0     |  FALSE   |
| 0x89, ` ` |  0     |  FALSE   |
| 0x8A, ` ` |  0     |  FALSE   |
| 0x8B, ` ` |  0     |  FALSE   |
| 0x8C, ` ` |  0     |  FALSE   |
| 0x8D, ` ` |  0     |  FALSE   |
| 0x8E, ` ` |  0     |  FALSE   |
| 0x8F, ` ` |  0     |  FALSE   |
| 0x90, ` ` |  0     |  FALSE   |
| 0x91, ` ` |  0     |  FALSE   |
| 0x92, ` ` |  0     |  FALSE   |
| 0x93, ` ` |  0     |  FALSE   |
| 0x94, ` ` |  0     |  FALSE   |
| 0x95, ` ` |  0     |  FALSE   |
| 0x96, ` ` |  0     |  FALSE   |
| 0x97, ` ` |  0     |  FALSE   |
| 0x98, ` ` |  0     |  FALSE   |
| 0x99, ` ` |  0     |  FALSE   |
| 0x9A, ` ` |  0     |  FALSE   |
| 0x9B, ` ` |  0     |  FALSE   |
| 0x9C, ` ` |  0     |  FALSE   |
| 0x9D, ` ` |  0     |  FALSE   |
| 0x9E, ` ` |  0     |  FALSE   |
| 0x9F, ` ` |  0     |  FALSE   |
| 0xA0, ` ` |  0     |  FALSE   |
| 0xA1, ` ` |  0     |  FALSE   |
| 0xA2, ` ` |  0     |  FALSE   |
| 0xA3, ` ` |  0     |  FALSE   |
| 0xA4, ` ` |  0     |  FALSE   |
| 0xA5, ` ` |  0     |  FALSE   |
| 0xA6, ` ` |  0     |  FALSE   |
| 0xA7, ` ` |  0     |  FALSE   |
| 0xA8, ` ` |  0     |  FALSE   |
| 0xA9, ` ` |  0     |  FALSE   |
| 0xAA, ` ` |  0     |  FALSE   |
| 0xAB, ` ` |  0     |  FALSE   |
| 0xAC, ` ` |  0     |  FALSE   |
| 0xAD, ` ` |  0     |  FALSE   |
| 0xAE, ` ` |  0     |  FALSE   |
| 0xAF, ` ` |  0     |  FALSE   |
| 0xB0, ` ` |  0     |  FALSE   |
| 0xB1, ` ` |  0     |  FALSE   |
| 0xB2, ` ` |  0     |  FALSE   |
| 0xB3, ` ` |  0     |  FALSE   |
| 0xB4, ` ` |  0     |  FALSE   |
| 0xB5, ` ` |  0     |  FALSE   |
| 0xB6, ` ` |  0     |  FALSE   |
| 0xB7, ` ` |  0     |  FALSE   |
| 0xB8, ` ` |  0     |  FALSE   |
| 0xB9, ` ` |  0     |  FALSE   |
| 0xBA, ` ` |  0     |  FALSE   |
| 0xBB, ` ` |  0     |  FALSE   |
| 0xBC, ` ` |  0     |  FALSE   |
| 0xBD, ` ` |  0     |  FALSE   |
| 0xBE, ` ` |  0     |  FALSE   |
| 0xBF, ` ` |  0     |  FALSE   |
| 0xC0, ` ` |  0     |  FALSE   |
| 0xC1, ` ` |  0     |  FALSE   |
| 0xC2, ` ` |  0     |  FALSE   |
| 0xC3, ` ` |  0     |  FALSE   |
| 0xC4, ` ` |  0     |  FALSE   |
| 0xC5, ` ` |  0     |  FALSE   |
| 0xC6, ` ` |  0     |  FALSE   |
| 0xC7, ` ` |  0     |  FALSE   |
| 0xC8, ` ` |  0     |  FALSE   |
| 0xC9, ` ` |  0     |  FALSE   |
| 0xCA, ` ` |  0     |  FALSE   |
| 0xCB, ` ` |  0     |  FALSE   |
| 0xCC, ` ` |  0     |  FALSE   |
| 0xCD, ` ` |  0     |  FALSE   |
| 0xCE, ` ` |  0     |  FALSE   |
| 0xCF, ` ` |  0     |  FALSE   |
| 0xD0, ` ` |  0     |  FALSE   |
| 0xD1, ` ` |  0     |  FALSE   |
| 0xD2, ` ` |  0     |  FALSE   |
| 0xD3, ` ` |  0     |  FALSE   |
| 0xD4, ` ` |  0     |  FALSE   |
| 0xD5, ` ` |  0     |  FALSE   |
| 0xD6, ` ` |  0     |  FALSE   |
| 0xD7, ` ` |  0     |  FALSE   |
| 0xD8, ` ` |  0     |  FALSE   |
| 0xD9, ` ` |  0     |  FALSE   |
| 0xDA, ` ` |  0     |  FALSE   |
| 0xDB, ` ` |  0     |  FALSE   |
| 0xDC, ` ` |  0     |  FALSE   |
| 0xDD, ` ` |  0     |  FALSE   |
| 0xDE, ` ` |  0     |  FALSE   |
| 0xDF, ` ` |  0     |  FALSE   |
| 0xE0, ` ` |  0     |  FALSE   |
| 0xE1, ` ` |  0     |  FALSE   |
| 0xE2, ` ` |  0     |  FALSE   |
| 0xE3, ` ` |  0     |  FALSE   |
| 0xE4, ` ` |  0     |  FALSE   |
| 0xE5, ` ` |  0     |  FALSE   |
| 0xE6, ` ` |  0     |  FALSE   |
| 0xE7, ` ` |  0     |  FALSE   |
| 0xE8, ` ` |  0     |  FALSE   |
| 0xE9, ` ` |  0     |  FALSE   |
| 0xEA, ` ` |  0     |  FALSE   |
| 0xEB, ` ` |  0     |  FALSE   |
| 0xEC, ` ` |  0     |  FALSE   |
| 0xED, ` ` |  0     |  FALSE   |
| 0xEE, ` ` |  0     |  FALSE   |
| 0xEF, ` ` |  0     |  FALSE   |
| 0xF0, ` ` |  0     |  FALSE   |
| 0xF1, ` ` |  0     |  FALSE   |
| 0xF2, ` ` |  0     |  FALSE   |
| 0xF3, ` ` |  0     |  FALSE   |
| 0xF4, ` ` |  0     |  FALSE   |
| 0xF5, ` ` |  0     |  FALSE   |
| 0xF6, ` ` |  0     |  FALSE   |
| 0xF7, ` ` |  0     |  FALSE   |
| 0xF8, ` ` |  0     |  FALSE   |
| 0xF9, ` ` |  0     |  FALSE   |
| 0xFA, ` ` |  0     |  FALSE   |
| 0xFB, ` ` |  0     |  FALSE   |
| 0xFC, ` ` |  0     |  FALSE   |
| 0xFD, ` ` |  0     |  FALSE   |
| 0xFE, ` ` |  0     |  FALSE   |
| 0xFF, ` ` |  0     |  FALSE   | 
```

# ruby - 在数据库中查找大量数据的词频

> ID：11986825
> 
> 赞同：1
> 
> 时间：2012-08-16T12:09:58.863
> 
> 标签：ruby, ruby-on-rails-3, algorithm, full-text-search

如果我们在一个文件中有一个巨大的字符串数据，我们通常可以使用算法，比如（hash + heap）或（trie + heap）等来有效地找到高频的前“k”个单词。如果我的“数据库”中有大量字符串数据，我该怎么做。现在我知道的唯一方法是查询整个数据集，然后对其进行频率操作。但是查询庞大的数据集是一项非常昂贵的操作。有没有有效/更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:23:46.470

通过并行化并使用集群而不是单台机器来查找有关海量数据的信息。

您所描述的是一个经典的[map-reduce](http://en.wikipedia.org/wiki/MapReduce)问题，可以使用以下函数（在伪代码中）处理：

```
map(doc):
  for each word in doc:
      emitIntermediate(word,"1")
reduce(list<word>):
  emit(word,size(list)) 
```

以多种语言实现的 map reduce 框架允许您轻松扩展问题并使用巨大的集群，无需太多努力，为您处理故障和工作人员管理。

在这里： doc 是单个文档，它通常假设是文档的集合。如果您只有一个大文档，您当然可以将其拆分为较小的文档并调用相同的算法。

# .net - 如何在 .NET 中获取系统插入符句点？

> ID：11986832
> 
> 赞同：1
> 
> 时间：2012-08-16T12:10:12.330
> 
> 标签：.net, wpf, caret

我如何知道某个 Windows 系统上插入符号闪烁的确切时间？（以编程方式使用 .NET）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T12:12:34.823

您可以 P/Invoke 它。

[http://www.pinvoke.net/default.aspx/user32.getcaretblinktime](http://www.pinvoke.net/default.aspx/user32.getcaretblinktime)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T12:12:28.320

您总是可以简单地 P/Invoke [`GetCaretBlinkTime`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648401%28v=vs.85%29.aspx)（丹尼尔的回答给出了复制/粘贴签名）。

如果您不介意参考 Windows 窗体，还有[`SystemInformation.CaretBlinkTime`](http://msdn.microsoft.com/en-us/library/system.windows.forms.systeminformation.caretblinktime.aspx). 不幸的是，类似的[`SystemParameters`](http://msdn.microsoft.com/en-us/library/system.windows.systemparameters.aspx)类似乎没有公开这个设置。

# javascript - Youtube Chromeless Player - 更改大开始播放按钮

> ID：11986838
> 
> 赞同：4
> 
> 时间：2012-08-16T12:10:37.400
> 
> 标签：javascript, youtube, youtube-api

[我创建了像这样](https://code.google.com/apis/ajax/playground/?exp=youtube#chromeless_player)的无铬播放器。我可以更改播放器状态为-1（未播放视频）时显示的大红色播放按钮吗？我想添加我的图像而不是经典。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T15:52:29.153

你可以试试这个黑客..

```
function onYouTubePlayerReady(playerId){
    document.getElementById(playerId).playVideo();
    document.getElementById(playerId).pauseVideo();
} 
```

如果您播放视频并暂停视频，红色大按钮会消失。

（请记住，onYouTubePlayerReady 在本地主机上不起作用。您需要在在线服务器上对其进行测试）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T10:26:51.017

我找到了最好的方法。

感谢@crazyphoton 破解：

```
function onYouTubePlayerReady(playerId){
    document.getElementById(playerId).playVideo();
    document.getElementById(playerId).pauseVideo();
} 
```

使用该代码，很容易删除默认按钮。

我的问题是关于添加自己的按钮。[这个演示](http://demo.tutorialzine.com/2010/07/youtube-api-custom-player-jquery-css/youtube-player.html)是对那部分的回答。带有`position: absolute`以视频为中心的播放/暂停/重复按钮的图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-13T10:33:43.177

如果您需要在视频开头自定义播放图标，那么您可以首先加载缩略图+缩略图前面的播放图标。当用户单击此播放按钮时，删除缩略图并使用自动播放加载 YouTube 视频。例如通过 nirvanatikku/jQuery-TubePlayer-Plugin

缩略图您可以加载：[https ://img.youtube.com/vi/dQw4w9WgXcQ/maxresdefault.jpg](https://img.youtube.com/vi/dQw4w9WgXcQ/maxresdefault.jpg)

# c# - WPF TreeView 刷新

> ID：11986840
> 
> 赞同：10
> 
> 时间：2012-08-16T12:10:42.143
> 
> 标签：c#, wpf, xml, treeview

我有问题。我`TreeView`在我的 WPF 项目中使用来可视化我的 XML 数据。问题是，当我编辑它时`XmlDocument`，它不会在`TreeView`. 但我注意到，当我检查时`SelectedNode`，它是我的编辑和`XmlNode`. 所以我的“编辑”方法工作正常，但我的树的视觉刷新只有一个问题。`.Refresh()`或者`.Items.Refresh()`也不工作。

这是我的树的模板：

```
<DataTemplate x:Key="AttributeTemplate">
    <StackPanel Orientation="Horizontal"
            Margin="3,0,0,0"
            HorizontalAlignment="Center">
        <TextBlock Text="{Binding Path=Name}"
             Foreground="{StaticResource xmAttributeBrush}" FontFamily="Consolas" FontSize="8pt" />
        <TextBlock Text="=&quot;"
             Foreground="{StaticResource xmlMarkBrush}" FontFamily="Consolas" FontSize="8pt" />
        <TextBlock Text="{Binding Path=Value, Mode=TwoWay}"
             Foreground="{StaticResource xmlValueBrush}" FontFamily="Consolas" FontSize="8pt" />
        <TextBlock Text="&quot;"
             Foreground="{StaticResource xmlMarkBrush}" FontFamily="Consolas" FontSize="8pt" />
    </StackPanel>
</DataTemplate>

<HierarchicalDataTemplate x:Key="NodeTemplate">
    <StackPanel Orientation="Horizontal" Focusable="False">
        <TextBlock x:Name="tbName" Text="?" FontFamily="Consolas" FontSize="8pt" />
        <ItemsControl
            ItemTemplate="{StaticResource AttributeTemplate}"
            ItemsSource="{Binding Path=Attributes}"
            HorizontalAlignment="Center">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal"/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
        </ItemsControl>
    </StackPanel>
    <HierarchicalDataTemplate.ItemsSource>
        <Binding XPath="*" />
    </HierarchicalDataTemplate.ItemsSource>
    <HierarchicalDataTemplate.Triggers>
        <DataTrigger Binding="{Binding Path=NodeType}" Value="Text">
            <Setter TargetName="tbName" Property="Text" Value="{Binding Path=Value, Mode=TwoWay}"/>
        </DataTrigger>
        <DataTrigger Binding="{Binding Path=NodeType}" Value="Element">
            <Setter TargetName="tbName" Property="Text" Value="{Binding Path=Name}"/>
        </DataTrigger>
    </HierarchicalDataTemplate.Triggers>
</HierarchicalDataTemplate>

<Style x:Key="TreeViewAllExpandedStyle"  TargetType="{x:Type TreeView}">
    <Style.Resources>
        <Style TargetType="TreeViewItem">
            <Setter Property="IsExpanded" Value="True" />
        </Style>
    </Style.Resources>
</Style>

<Style x:Key="TreeViewAllCollapsedStyle" TargetType="{x:Type TreeView}">
    <Style.Resources>
        <Style TargetType="TreeViewItem">
            <Setter Property="IsExpanded" Value="False" />
        </Style>
    </Style.Resources>
</Style> 
```

这里是`Window.Resources`：

```
<Window.Resources>
    <XmlDataProvider x:Key="XmlData" />
</Window.Resources> 
```

这是我的树：

```
<TreeView x:Name="XmlTree" Grid.Row="1"
      ItemsSource="{Binding Source={StaticResource XmlData}, XPath=., Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
      ItemTemplate="{StaticResource NodeTemplate}"
      SelectedItemChanged="XmlTree_SelectedItemChanged" /> 
```

这是我背后的代码：

```
private XmlDocument _xml;
private XmlElement _selectedElement;
private XmlDataProvider _xmlDataProvider;

private void MainWindow_Load(object sender, EventArgs e)
{
    XmlTree.Style = (Style)FindResource("TreeViewAllExpandedStyle");
    _xmlDataProvider = FindResource("XmlData") as XmlDataProvider;
}

private void OpenXmlFile(string filePath)
{
    _xml = new XmlDocument();
    _xml.Load(filePath);

    _xmlDataProvider.Document = _xml;
}

private void SaveChangesButton_Click(object sender, EventArgs e)
{
    Dictionary<string, string> newAttributes = GetChangedAttributes();
    foreach (KeyValuePair<string, string> pair in newAttributes)
    {
        _selectedElement.SetAttribute(pair.Key, pair.Value);
    }

    RefreshViews();
}

private void RefreshViews()
{
    // now I don't know what to do here, any Refresh doesn't work:S
} 
```

第二件事是，如何清除我的树以便能够再次将其用于其他数据（我`NullReferenceException`在尝试`XmlTree.Items.Clear();`

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-16T13:52:53.397

经过几个小时终于找到了解决方案！

```
private void RefreshViews()
{
    XmlEditor.Clear();
    XmlEditor.Text = IndentXml();

    UnselectSelectedItem();

    XmlTree.Items.Refresh();
    XmlTree.UpdateLayout();
}

private void UnselectSelectedItem()
{
    if (XmlTree.SelectedItem != null)
    {
        var container = FindTreeViewSelectedItemContainer(XmlTree, XmlTree.SelectedItem);
        if (container != null)
        {
            container.IsSelected = false;
        }
    }
}

private static TreeViewItem FindTreeViewSelectedItemContainer(ItemsControl root, object selection)
{
    var item = root.ItemContainerGenerator.ContainerFromItem(selection) as TreeViewItem;
    if (item == null)
    {
        foreach (var subItem in root.Items)
        {
            item = FindTreeViewSelectedItemContainer((TreeViewItem)root.ItemContainerGenerator.ContainerFromItem(subItem), selection);
            if (item != null)
            {
                break;
            }
        }
    }

    return item;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-24T13:15:06.430

出于某种原因，在阳光下没有任何东西对我有用，如果该项目被更改，我所需要的只是刷新我的树上的图像。所以我做了一些荒谬的事情，但效果很好。首先，我在图像中添加了一个 Loaded 事件，并将 Tag 设置为数据库中记录的唯一 ID

```
Tag="{Binding ObjectId}" Loaded="imgCheckComment_Loaded" 
```

在该加载事件的代码隐藏中，我构建了每个图像的列表

```
private List<Image> commentColors = new List<Image>();
    private void imgCheckComment_Loaded(object sender, RoutedEventArgs e)
    {
        var si = sender as Image;
        if (si != null)
            commentColors.Add(si);
    } 
```

然后每当我对任何内容进行更改时，我都会更新 Item 的 Image 属性（Item 是我绑定到我的树的自定义类）我蛮力更新了对象

```
 public void RefreshContext(Item selectedItem)
    {
        commentColors.ForEach(si => { 
            if (selectedItem.ObjectId == Convert.ToInt32(si.Tag))
            {
                si.Source = new BitmapImage(new Uri(selectedItem.Image, UriKind.Relative));
                return;
            }
        });
    } 
```

# vba - Microsoft Word 宏来计算评论

> ID：11986842
> 
> 赞同：2
> 
> 时间：2012-08-16T12:10:55.400
> 
> 标签：vba, windows, ms-word, ms-office

我是一名教学设计师；我通过添加评论来编辑word文档。我在问是否可以找到一个 Word 宏来帮助我计算这些评论并对其进行分类。感谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T05:32:16.520

这是`Sub`根据您的类别计算项目：

```
Sub CountComments()
    Dim spelling, grammar, rephrasing, technical, other As Integer
    spelling = 0
    grammar = 0
    rephrasing = 0
    technical = 0
    other = 0

    Dim comment As comment
    For Each comment In ActiveDocument.Comments

        Dim firstWord As String
        firstWord = Split(comment.Range.Text, " ")(0)

        Select Case LCase(firstWord)
            Case "spelling"
                spelling = spelling + 1
            Case "grammar"
                grammar = grammar + 1
            Case "rephrasing"
                rephrasing = rephrasing + 1
            Case "technical"
                technical = technical + 1
            Case Else
                other = other + 1
        End Select
    Next

    MsgBox _
        "Spelling:" & spelling & _
        "; Grammar:" & grammar & _
        "; Rephrasing:" & rephrasing & _
        "; Technical:" & technical & _
        "; Other:" & other, , "Comment category summary"
End Sub 
```

# c# - 无法在 C# 中使用 SharpSSH 更改 sftp 远程目录？

> ID：11986846
> 
> 赞同：1
> 
> 时间：2012-08-16T12:11:19.267
> 
> 标签：c#, sharpssh

我已经尝试了我能想到的路径字符串的每一种组合，但我仍然回来了`"The requested file does not exist"?` 我在过去的几个小时里搜索了互联网，但我找不到一个例子。谁能指出我做错了什么。我已经尝试过以下方法。

`ls`从根目录使用命令。我得到了可用目录和文件的列表。所以说它返回了以下列表。

`Outbound Inbound`

到目前为止我已经尝试过了。

`cd ./Inbound/
cd /Inbound/
cd Inbound
cd //Inbound//
cd //Inbound
cd Inbound/
cd ../Inbound/
cd \Inbound\
cd \\Inbound\\
cd ..\\Inbound\\`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:56:07.197

我曾经在 SharpSSH 库 (bitbucket.org/mattgwagner/SharpSSH) 上做一些维护工作，但老实说，我建议您查看 sshnet.codeplex.com 以获得设计合理且功能更好的库。我相信，最初的 SharpSSH 是 Java 库到 .NET 1.1 的直接端口，并且受到翻译的影响。

# java - Java EE 6 @javax.annotation.ManagedBean 与 @javax.inject.Named 与 @javax.faces.ManagedBean

> ID：11986847
> 
> 赞同：108
> 
> 时间：2012-08-16T12:11:30.140
> 
> 标签：java, jakarta-ee, java-ee-6, cdi

我觉得 Java EE 6 规范有些混乱。有几组注释。

我们有像和用于创建 EJB的`javax.ejb`注解。`@Stateful``@Stateless`

还有一个`@javax.annotation.ManagedBean`创建托管bean。

`javax.enterprise.context`like`@SessionScoped`和中有注解`@RequestScoped`。

`@ManagedBean`更重要的是，包中还有`@SessionScoped`/`@RequestScoped`注释`javax.faces.bean`。

为了让事情变得更复杂，有一个`javax.inject`带有`@Named`注释的包。

有人可以描述它们之间的关系吗？

我在哪里可以使用`@EJB`，`@Inject`或`@ManagedPropery`注入其他 bean？

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2012-08-17T20:20:24.907

首先让我做一些澄清：

**托管 bean 定义**：通常托管 bean 是一个对象，其生命周期（构造、销毁等）由容器管理。

在 Java ee 中，我们有许多容器来管理其对象的生命周期，例如 JSF 容器、EJB 容器、CDI 容器、Servlet 容器等。

所有这些容器都是独立工作的，它们在应用程序服务器初始化中启动，并在部署时扫描所有工件的类，包括 jar、ejb-jar、war 和 ear 文件，并收集和存储一些关于它们的元数据，然后当你需要一个对象时在运行时，他们会给你这些类的实例，完成工作后，他们会销毁它们。

所以我们可以说我们有：

*   JSF 托管 bean
*   CDI 托管 bean
*   EJB 托管 bean
*   甚至 Servlet 也是托管 bean，因为它们是由一个容器实例化和销毁的，该容器是一个 servlet 容器。

因此，当您看到 Managed Bean 一词时，您应该询问它的上下文或类型。（JSF、CDI、EJB 等）

然后你可能会问为什么我们有很多这样的容器：AFAIK，Java EE 的人想要一个依赖注入框架，但他们无法将所有需求收集到一个规范中，因为他们无法预测未来的需求，他们制作了 EJB 1.0，然后2.0，然后是 3.0，现在是 3.1，但 EJB 的目标只是满足一些需求（事务、分布式组件模型等）。

同时（同时）他们意识到他们也需要支持 JSF，然后他们制作了 JSF 托管 bean 和另一个 JSF bean 容器，他们认为它是一个成熟的 DI 容器，但它仍然不是完整和成熟的容器。

在那之后，Gavin King 和其他一些好人;) 制作了 CDI，这是我见过的最成熟的 DI 容器。CDI（受 Seam2、Guice 和 Spring 启发）是为了填补 JSF 和 EJB 之间的空白以及许多其他有用的东西，如 pojo 注入、生产者方法、拦截器、装饰器、集成 SPI、非常灵活等，它甚至可以做EJB 和 JSF 托管 bean 正在做什么，那么我们就可以拥有一个成熟且强大的 DI 容器。但是出于一些向后兼容性和政治原因，Java EE 的人想要保留它们！！！

在这里，您可以找到每种类型的区别和用例：

**JSF 托管 Bean、CDI Bean 和 EJB**

JSF 最初是使用自己的托管 bean 和依赖注入机制开发的，该机制在 JSF 2.0 中得到了增强，包括基于注释的 bean。当 CDI 与 Java EE 6 一起发布时，它被认为是该平台的托管 bean 框架，当然，EJB 已经过时了，它们已经存在了十多年。

问题当然是知道使用哪一个以及何时使用它们。

让我们从最简单的 JSF 托管 bean 开始。

**JSF 托管 Bean**

简而言之，如果您正在为 Java EE 6 开发并使用 CDI，请不要使用它们。它们为依赖注入和为网页定义支持 bean 提供了一种简单的机制，但它们远不如 CDI bean 强大。

它们可以使用`@javax.faces.bean.ManagedBean`带有可选名称参数的注释来定义。此名称可用于从 JSF 页面引用 bean。

范围可以使用`javax.faces.bean`包中定义的不同范围之一应用于 bean，包括请求、会话、应用程序、视图和自定义范围。

```
@ManagedBean(name="someBean")
@RequestScoped
public class SomeBean {
    ....
    ....
} 
```

如果没有某种手动编码，JSF bean 不能与其他类型的 bean 混合。

**CDI 豆**

CDI 是作为 Java EE 6 的一部分发布的 bean 管理和依赖注入框架，它包括一个完整、全面的托管 bean 工具。CDI bean 比简单的 JSF 托管 bean 更加先进和灵活。他们可以使用拦截器、会话范围、事件、类型安全注入、装饰器、原型和生产者方法。

要部署 CDI bean，您必须将名为 beans.xml 的文件放在类路径上的 META-INF 文件夹中。一旦执行此操作，包中的每个 bean 都将成为 CDI bean。CDI 中有很多特性，这里就不一一赘述了，但作为 JSF 类特性的快速参考，您可以使用`javax.enterprise.context`包中定义的范围之一定义 CDI bean 的范围（即请求、会话，会话和应用范围）。如果要使用 JSF 页面中的 CDI bean，可以使用`javax.inject.Named`注释为其命名。要将一个 bean 注入到另一个 bean 中，请使用注解对字段进行`javax.inject.Inject`注解。

```
@Named("someBean")
@RequestScoped
public class SomeBean {

    @Inject
    private SomeService someService;
} 
```

像上面定义的自动注入可以通过使用限定符来控制，它可以帮助匹配你想要注入的特定类。如果您有多种付款类型，您可以添加一个限定符来判断它是否是异步的。虽然您可以将`@Named`注释用作限定符，但您不应该使用它，因为它是为在 EL 中公开 bean 而提供的。

CDI 通过使用代理来处理具有不匹配范围的 bean 的注入。因此，您可以将请求范围的 bean 注入到会话范围的 bean 中，并且该引用对每个请求仍然有效，因为对于每个请求，代理都会重新连接到请求范围 bean 的实时实例。

CDI 还支持拦截器、事件、新的会话范围和许多其他特性，这使其成为比 JSF 托管 bean 更好的选择。

**EJB**

EJB 早于 CDI bean，在某些方面与 CDI bean 相似，而在其他方面则非常不同。首先，CDI bean 和 EJB 之间的区别在于 EJB 是：

*   事务性的
*   远程或本地
*   能够钝化有状态的 bean 以释放资源
*   能够使用定时器
*   可以是异步的

这两种类型的 EJB 被称为无状态和有状态。无状态 EJB 可以被认为是线程安全的一次性 bean，它不维护两个 Web 请求之间的任何状态。有状态的 EJB 确实保持状态，并且可以在需要时被创建和保留，直到它们被处理掉。

定义 EJB 很简单，您只需在类中添加一个`javax.ejb.Stateless`或`javax.ejb.Stateful`注释。

```
@Stateless
public class BookingService {

  public String makeReservation(Item Item, Customer customer) {
    ...
    ...
  }
} 
```

无状态 bean 必须具有依赖范围，而有状态会话 bean 可以具有任何范围。默认情况下它们是事务性的，但您可以使用事务属性注释。

虽然 EJB 和 CDI bean 在特性方面非常不同，但编写代码来集成它们非常相似，因为 CDI bean 可以注入到 EJB 中，而 EJB 可以注入到 CDI bean 中。将一种注入另一种时无需区分。同样，CDI 通过使用代理来处理不同的范围。一个例外是 CDI 不支持远程 EJB 的注入，但可以通过为其编写一个简单的生产者方法来实现。

`javax.inject.Named`注释以及任何限定符都可以在 EJB 上使用，以将其与注入点匹配。

**什么时候使用哪个bean**

你怎么知道什么时候使用哪个bean？简单的。

除非您在 servlet 容器中工作并且不想尝试让 CDI 在 Tomcat 中工作，否则永远不要使用 JSF 托管 bean（尽管有一些 Maven 原型，所以没有任何借口）。

通常，您应该使用 CDI bean，除非您需要 EJB 中可用的高级功能，例如事务功能。您可以编写自己的拦截器来使 CDI bean 事务化，但是现在，使用 EJB 更简单，直到 CDI 获得即将到来的事务性 CDI bean。如果您被困在 servlet 容器中并使用 CDI，那么手写事务或您自己的事务拦截器是没有 EJB 的唯一选择。

如果你需要`@ViewScoped`在 CDI 中使用，你应该

*   使用[seam-faces](http://seamframework.org/Seam3/FacesModule)或[MyFaces CODI](http://myfaces.apache.org/extensions/cdi/download.html)模块。只需将其中一个添加到您的类路径中即可`@ViewScoped`在 CDI 中工作。MyFaces CODI 对@ViewScoped 的支持更加稳固
*   使用 MyFaces CODI's `@ViewAccessScoped`，它是 Apache 在 CDI 之上编写的扩展，只需[下载](http://myfaces.apache.org/extensions/cdi/download.html)它并使用`@ViewAccessScoped`注释而不是`@ViewScoped`.
*   使用 CDI`@ConversationScoped`并使其长期运行。请参阅[此处了解更多信息](http://www.andygibson.net/blog/tutorial/pattern-for-conversational-crud-in-java-ee-6/)。
*   使用[Omnifaces](http://showcase.omnifaces.org/cdi/ViewScoped) @ViewScoped 注解

有些零件是从[这里](http://www.andygibson.net/blog/article/comparing-jsf-beans-cdi-beans-and-ejbs/)偷来的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-16T13:43:14.013

是的，这可能会令人困惑。

由于某些*ehm*历史原因，JSF 和 CDI 对范围使用相同的注释，但来自不同的包。

正如您可能猜到的那样，这些来自`javax.faces.bean`JSF 规范，与 CDI 无关。除非您有充分的理由这样做，否则不要使用它们。并且永远不要将它们与来自`javax.ejb`. 这将产生无穷无尽的错误和细微异常列表。

[我通常建议您浏览出色的Weld 文档](http://docs.jboss.org/weld/reference/latest/en-US/html/)的前几页（甚至更多页）。这应该会让您走上 Java EE 6 的轨道。

并随时在此处发布更多问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-06-17T11:19:12.100

由于没有专门针对 的回复`@javax.annotation.ManagedBean`，这里有一个类似问题的答案的链接：[Backing beans (@ManagedBean) or CDI Beans (@Named)?](https://stackoverflow.com/questions/4347374/backing-beans-managedbean-or-cdi-beans-named/4397444#4397444) . 该规范可在[http://download.oracle.com/otndocs/jcp/managed_beans-1.0-fr-eval-oth-JSpec/](http://download.oracle.com/otndocs/jcp/managed_beans-1.0-fr-eval-oth-JSpec/)找到。所以在我看来，`@javax.annotation.ManagedBean`这应该是对`@javax.faces.bean.ManagedBean`.

从我收集到的信息来看，JSF Managed Beans 正在逐步淘汰，取而代之的是 CDI Beans（可能从 JSF 2.3 中被弃用？），所以我想`@javax.annotation.ManagedBean`现在变得更加过时了。

# iphone - 当用户单击“主页”按钮时，如何播放我的网络服务器上的声音文件并在后台运行......？

> ID：11986848
> 
> 赞同：0
> 
> 时间：2012-08-16T12:11:30.927
> 
> 标签：iphone, ios, audio

我是 ios 中音频处理的新手。1.我想知道我是否有网络服务器，上面有一些音频文件。并且通过我的 iOS 应用程序，用户可以播放该文件，允许他们前进或后退功能，暂停等。 2.当用户单击“主页”按钮时，声音文件不会暂停或停止，文件在后台播放直到用户不会正确关闭应用程序...

主要是应用程序在线播放文件，而不是在用户设备上下载整个文件

如果任何一个答案是可能的请帮助

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:30:13.417

在此处搜索内容后，我使用 answer.for 在后台播放歌曲时运行应用程序，步骤如下

1.  在您的应用程序 info.plist 文件中将“应用程序不在后台运行”添加到“是”
2.  在您的应用程序 info.plist 文件中添加“YES”必需的背景模式”并设置“应用程序播放音频”
3.  在你的 .m 文件中

    ```
    - (void)viewDidLoad
    {
        [super viewDidLoad];
        NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"select" ofType:@"mp3"]];

        NSError *error;
        audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:nil];

        if (error)
        {
            NSLog(@"Error in audioPlayer: %@", [error localizedDescription]);
        } else {
            [[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil];
            [[AVAudioSession sharedInstance] setActive: YES error: nil];
            [[UIApplication sharedApplication] beginReceivingRemoteControlEvents];

            [audioPlayer play];
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:29:46.793

流式音频服务是可能的。您应该使用`AVPlayer`（不是`AVAudioPlayer` `AVAuioPlayer`不可用的流媒体服务。）

这个苹果示例代码[StitchedStreamPlayer](http://developer.apple.com/library/ios/#samplecode/StitchedStreamPlayer/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010092)对你有好处。

此代码 Streaming Movie Play Sample，还提供 Audio Service。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T12:31:19.440

您最好的选择是使用这个 github 项目[https://github.com/jfricker/AudioStreamer](https://github.com/jfricker/AudioStreamer) 您可以控制其中的音频的正向和反向。我在我的一个项目中使用了它，性能非常好。

# ios - 在 UIImageView 上执行双重操作时

> ID：11986870
> 
> 赞同：1
> 
> 时间：2012-08-16T12:12:30.967
> 
> 标签：ios, ipad, xamarin.ios

这次我在 UIImageView 上执行双重操作时遇到问题意味着

```
1) Zoom+Flip the Image 

2)Zoom + Reverse the Image 

3)Zoom + Flip or Reverse + Rotate(+- 90)deg 
```

所以请帮助找出这个问题的解决方案。在这种情况下，对于缩放，我使用 GuestureRecognizer 进行翻转+Revesing+Rotating UIImageView 我使用 UIButton 进行这些操作，所以我如何通过 UIImage 上的组合来处理这些操作

究竟是什么问题当我放大或缩小图像的同时我想旋转（+-90 度）或翻转或反转图像在精确的放大或缩小位置但那个时候图像被重置然后执行我想在 UIImage 上同时进行旋转、翻转、反转等相应的操作

我的代码为

```
if (btnNames == "Rotate R") 
 {
 Angle = deg + 90;
 imgview.Transform = CGAffineTransform.MakeRotation (Angle * (float)Math.PI / 180); 
 return Angle;
 } else
 { 
 Angle = deg - 90; 
 imgview.Transform = CGAffineTransform.MakeRotation (Angle * (float)Math.PI / 180); 
  return Angle; 
```

# }

对于反向

```
CGAffineTransform transform = CGAffineTransform.MakeScale (-1, 1); 
imgView.Transform = transform;
return  true; 
```

============ 用于翻转

```
if (flips == false) 
 { 
CGAffineTransform transform = CGAffineTransform.MakeScale (1, -1); 
 imgView.Transform = transform; 
return  true; 
 } 
```

我实现的这段代码可以很好地单独执行操作。但我想同时在 UIImage 上工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:23:13.967

我会推荐：

*   放置`UIImage`在一个`UIScrollView`带缩放的设置中
*   修改您`UIImage`的 's`Transform`以进行反向、旋转等。

要设置缩放：

```
yourScroller.MaximumZoomScale = 5;
yourScroller.MinimumZoomScale = 1;
yourScroller.ViewForZoomingInScrollView = _ => yourImage; 
```

旋转的一个例子是：

`yourImage.Transform.Rotate (Math.PI / 2)`

玩弄它，`UIScrollView`应该在图像上修改相同`Transform`的内容，所以一切都应该协同工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:22:35.233

我不确定我是否真的理解你的意思，但听起来你试图通过像这样设置`UIView`'`transform`属性来对图像进行更多的转换（示例）：

```
myView.transform = scale;
myView.transform = flip;
myView.transform = rotate; 
```

然后发生的事情是，只有最后一个“是活动的：在视图上。

你应该做的是“保持/保存”当前的转换，并在新的转换后附加`CGAffineTransformConcat`如下：

```
myView.transform = scale;
myView.transform = CGAffineTransformConcat(myView.transform, flip);
myView.transform = CGAffineTransformConcat(myView.transform,rotate); 
```

请记住，对于某些转换，连接顺序很重要！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T13:36:50.663

可以通过将转换应用于现有转换来组合转换：

```
CGAffineTransform transform = CGAffineTransformIdentity;

// Rotate
if (btnNames == "Rotate R") {
    Angle = deg + 90;
    transform = CGAffineTransformRotate(transform, Angle * (CGFloat)Math.PI / 180);
} else {
    Angle = deg - 90;
    transform = CGAffineTransformRotate(transform, Angle * (CGFloat)Math.PI / 180);
}

// Reverse
transform = CGAffineTransformScale(transform, -1, 1);

// Flip
if (!flips) {
    transform = CGAffineTransformScale(transform, 1, -1);
}

// Apply combined transformation
imgView.transform = transform; 
```

# typo3 - 如何删除扩展配置中的选项卡？

> ID：11986872
> 
> 赞同：1
> 
> 时间：2012-08-16T12:12:36.757
> 
> 标签：typo3, typoscript

这是一个扩展，我需要知道如何删除我在下面标记的这个？

![http://i.imgur.com/ioBvV.png](../Images/9012941b745bc470746afbd6cd9f58bf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:00:25.233

您可以通过向 TCA 添加新的内容类型来做到这一点（请注意，您还必须处理 FE 渲染）：

```
t3lib_div::loadTCA('tt_content');
$TCA['tt_content']['columns']['CType']['config']['items'][] = array('New Title', 'tx_newkey');
$TCA['tt_content']['types']['tx_newkey']['showitem'] = '--div--;Social Media Buttons,type,language,--div--;LLL:EXT:cms/locallang_ttc.xml:tabs.access,--palette--;LLL:EXT:cms/locallang_ttc.xml:palette.visibility;visibility'; 
```

创建类似的东西：

![在此处输入图像描述](../Images/9b1ab54736fee71c1f1e34a473fbad46.png)

但是，有一个扩展通过本质上创建新的内容元素来修改 TCA，并允许您还定义 FE 渲染：[http ://typo3.org/extensions/repository/view/wec_contentelements](http://typo3.org/extensions/repository/view/wec_contentelements)

# sql - 创建具有一个唯一字段的表

> ID：11986876
> 
> 赞同：0
> 
> 时间：2012-08-16T12:12:59.703
> 
> 标签：sql, sqlite, android-sqlite

我想创建一个包含 1 个文本列的表，并且我希望它是唯一的。

这是我所做的：

```
CREATE TABLE Fav {
Category_Name TEXT,
UNIQUE (Category_Name)
} 
```

但是这个 SQL 不会执行。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:19:02.647

`{`将和更改`}`为`(`和`)`。

```
CREATE TABLE Fav (
Category_Name TEXT,
UNIQUE (Category_Name)
) 
```

# asp.net-mvc-3 - 无法使用 Packag Manager 控制台安装“Enable-Migrations -EnableAutomaticMigrations”

> ID：11986879
> 
> 赞同：0
> 
> 时间：2012-08-16T12:13:07.527
> 
> 标签：asp.net-mvc-3, entity-framework-4, console, migration, nuget-package

我正在尝试安装`Enable-Migrations -EnableAutomaticMigrations`使用包管理器控制台来为我的上下文启用迁移。

但是，它给出的错误如下：

```
PM> Enable-Migrations -EnableAutomaticMigrations
Get-Package : A parameter cannot be found that matches parameter name 'ProjectName'.
At D:\Projects\MVC\WITL CMS\CmsV1.0\WCMS\packages\EntityFramework.5.0.0\tools\EntityFramework.psm1:611 char:40
+     $package = Get-Package -ProjectName <<<<  $project.FullName | ?{ $_.Id -eq 'EntityFramework' }
    + CategoryInfo          : InvalidArgument: (:) [Get-Package], ParameterBindingException
    + FullyQualifiedErrorId : NamedParameterNotFound,NuGet.PowerShell.Commands.GetPackageCommand

The EntityFramework package is not installed on project 'WCMS'. 
```

我的实体框架版本是 5.0

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-03T11:58:09.353

正如它所说的“EntityFramework 包**未安装**在项目'WCMS'上。”。您在解决方案中还有其他项目吗？如果是这样，请注意**PM Console**中的第二个组合框，它允许选择应用更改的项目，即安装了 EntityFramework 的项目。

另外，您说您安装了 EF 5.0。EF 6.x 附带自动迁移（不是代码优先迁移）。*虽然我不确定 EF 版本，但除非您有一些非常重要的理由坚持使用 EF 5.0，否则最好升级到 6.x。*只需使用 Nuget。

无论如何，首先在**PM 控制台中检查正确的****ProjectName**。

# c# - 无法发送此 HttpWebRequest

> ID：11986882
> 
> 赞同：0
> 
> 时间：2012-08-16T12:13:15.450
> 
> 标签：c#, httpwebrequest

我制作了一个显示 Google 验证码的弹出框，例如：`http://www.google.com/sorry/?continue=http://www.google.com/ajax/rd%3Fsky%3Deeuiphp%26ludocid%3D6083833001863340802%26rdu%3DCNzphIbM6rECFWkGtAodP3UAGQ%26sig%3DaY3%26q%3Dtandl%25C3%25A4kare%252Cg%25C3%25B6teborg%2BSweden`

然后我在程序中的框中输入验证码并将信息发送到下面的下一个函数，它应该将数据提交给谷歌。我试图用 Fiddler 跟踪它，但我似乎无法弄清楚出了什么问题。该请求仅返回另一个验证码图像。

在 Fiddler 中，我可以看到当我转到浏览器并提交它是 GET 类型的请求时，我该如何提交数据呢？我尝试将我的 POST 切换为 GET 等等，但总是得到相同的错误，只是另一个验证码图像。

有什么想法可能是错的吗？

```
public string submitGoogleCaptcha(string html, string captchaCode)
    {
        CookieContainer cookieCont = new CookieContainer();

        HttpWebRequest _wReq;
        HttpWebResponse _wResp;
        System.IO.StreamReader _sr;
        System.Text.ASCIIEncoding _enc = new System.Text.ASCIIEncoding();

        string continueValue = Regex.Match(html, @"<input type=""hidden"" name=""continue"" value=""\s*(.+?)\s*"">", RegexOptions.IgnoreCase).Groups[1].Value;
        string idFromGoogle = Regex.Match(html, @"<input type=""hidden"" name=""id"" value=""\s*(.+?)\s*"">", RegexOptions.IgnoreCase).Groups[1].Value;

        string _html = "";
        string postData = "continue=" + continueValue + "&id=" + idFromGoogle + "&captcha=" + captchaCode + "&submit=Submit";

        try
        {
            byte[] _data = _enc.GetBytes(postData);
            _wReq = (HttpWebRequest)WebRequest.Create("http://www.google.com/sorry/Captcha?");

            _wReq.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
            _wReq.Referer = "http://www.google.com/sorry/?continue=" + HttpUtility.UrlEncode(continueValue);
            _wReq.KeepAlive = true;

            _wReq.Method = "POST";
            _wReq.ContentType = "application/x-www-form-urlencoded";
            _wReq.ContentLength = _data.Length;
            _wReq.CookieContainer = cookieCont;
            _wReq.AllowAutoRedirect = true;
            _wReq.UserAgent = "Mozilla/5.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)";
            System.IO.Stream _outStream = _wReq.GetRequestStream();
            _outStream.Write(_data, 0, _data.Length);
            _outStream.Close();
            _wResp = (HttpWebResponse)_wReq.GetResponse();
            _sr = new System.IO.StreamReader(_wResp.GetResponseStream());
            _html = _sr.ReadToEnd();
            _sr.Close();
            _wResp.Close();
        }
        catch (Exception ee)
        {

        }

        return _html;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:05:57.943

当我尝试您发布的代码时，您会遇到异常。你会知道，如果你没有用`catch(Exception ee){}`. 您得到的异常是试图告诉您服务器发回了 503 错误“服务器不可用”。

我建议你学习一些基本的异常处理原则。

另外，我在 Fiddler 中看到了请求。

# android - Android Google Drive 集成

> ID：11986886
> 
> 赞同：1
> 
> 时间：2012-08-16T12:13:31.340
> 
> 标签：android

我需要从 android 设备 SDCARD 将文件上传到谷歌云，我在互联网上谷歌了很长时间，但我找不到正确版本的 Api 来实现云上的文件共享。使用示例代码帮助我使用正确的 api 在云上登录和共享文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:20:19.873

我没有这方面的经验，但这里似乎有一些文档： [https](https://developers.google.com/drive/get-started) ://developers.google.com/drive/get-started 你已经看过了吗？

编辑：这似乎适用于 Chrome 应用程序。这里有一个类似的问题：[Android API for Google Drive？](https://stackoverflow.com/questions/10306456/android-api-for-google-drive)

看起来简短的答案是解决方案很长（人们提到必须手动完成：（）

# java - 在 Spring MVC 中存储用户凭据的推荐方法是什么？

> ID：11986890
> 
> 赞同：0
> 
> 时间：2012-08-16T12:13:55.287
> 
> 标签：java, spring, jakarta-ee, spring-mvc, spring-security

我正在创建一个 Spring MVC 应用程序，它是一个 SOAP 客户端。为了与 SOAP Web 服务通信，我想传递登录凭据。我的应用程序不需要动态存储任何详细信息，因此我没有为此应用程序使用任何数据库。因此，请建议一种推荐的做法来存储我的应用程序的敏感凭据。该凭证将由系统管理员管理，并且必须易于他根据要求进行更改。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T12:23:24.783

将用户名和密码存储在 webapp spring 上下文外部的属性文件中。这样，系统管理员可以轻松地将属性文件的读取权限锁定给相关方（例如您的应用程序和他自己）。那应该停止窥探看到密码。

在您的春季环境中，有类似的东西：

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
  <property name="location">
    <list>
      <value>/path/to/config.properties</value>
    </list>
  </property>
  <property name="ignoreUnresolvablePlaceholders" value="true"/>
</bean>

<bean id="myBean" class="...">
    <property name="username" value="{usernameFromExternalPropFile}" />
    <property name="password" value="{passwordFromExternalPropFile}" />
</bean> 
```

然后，系统管理员还可以独立于构建更改用户名/密码。

见[http://www.javaworld.com/community/node/8309/](http://www.javaworld.com/community/node/8309/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T12:18:02.003

最简单的选择是将它们存储在您的应用程序上下文 XML 配置文件中，作为与 SOAP Web 服务通信的 bean 的属性。

# scala - Scala - 模式匹配相关类型的元组

> ID：11986892
> 
> 赞同：24
> 
> 时间：2012-08-16T12:13:58.900
> 
> 标签：scala, pattern-matching, tuples

我有以下类层次结构：

```
class A
class B extends A
class C extends A 
```

然后，有另一个类接受这些类的实例，并且有一个方法，其中可能有两种模式匹配情况，如下所示：

```
class D (one: A, two: A) {

  def work {
    (one, two) match {
      case (o, t): (B, B) => ... blablabla
      case (o, t): (B, C) => ... blablabla
      case _ =>
    }
  }
} 
```

但是，当它应该解决匹配以支持第二种情况`(B, C)`时，它会尝试将其解析为`(B, B)`并提出类转换异常`C cannot be cast to B`。为什么？该怎么办？我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-16T12:31:18.693

您的语法不太正确（无法编译）。

这虽然有效：

```
object Matcher extends App {

  class A
  class B extends A
  class C extends A

  class D(one: A, two: A) {

    def work {
      (one, two) match {
        case (o: B, t: B) => println("B")
        case (o: B, t: C) => println("C")
        case _ =>
      }
    }
  }

  val d1 = new D(new B, new B)
  val d2 = new D(new B, new C)

  d1.work
  //B
  d2.work
  //C
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-16T12:31:20.113

与往常一样，问题是擦除类型。`(B,C)`是 的语法糖，在运行时`Tuple2[B,C]`被擦除。`Tuple2`case 语句验证`(B,C)`匹配`Tuple2`，但随后无法转换它。

在您的情况下，最简单的解决方案是分别匹配“一”和“二”，而不是将它们包装在一个元组中：

```
one match {
  case o : B => two match {
    case p : C => ...
    case p : B => ...
  }
  ... 
} 
```

它不是那么漂亮，但它不会遇到同样的问题。

编辑：实际上，我会选择 Brian Smith 的解决方案——在元组内部而不是外部匹配。它以类似的方式避免了这个问题，但看起来更好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-16T12:30:17.493

我使这个代码工作。
首先，我在您的类定义中添加了一个案例。

```
case class A
case class B extends A
case class C extends A 
```

其次，我改变了`work`.

```
class D(one: A, two: A) {
  def work {
    (one, two) match {
      case (o: B, t: B) => println("BB")
      case (o: B, t: C) => println("BC")
      case (o: C, t: C) => println("CC")
      case _ => println("AA")
    }
  }
} 
```

现在我得到了什么：

```
new D(B(),B()).work      => BB
new D(B(),C()).work      => BC
new D(C(),C()).work      => CC
new D(A(),B()).work      => AA 
```

添加了`case`一个 apply 和一个 unapply 方法。

# asp.net-web-api - Microsoft ASP.NET Web API Odata nuget 包安装失败

> ID：11986894
> 
> 赞同：1
> 
> 时间：2012-08-16T12:14:05.650
> 
> 标签：asp.net-web-api, odata, nuget-package

```
Attempting to resolve dependency 'Microsoft.Data.Edm (= 5.0.1)'.
Attempting to resolve dependency 'Microsoft.Data.OData (= 5.0.1)'.
Attempting to resolve dependency 'System.Spatial (≥ 5.0.1)'.
Attempting to resolve dependency 'Microsoft.Net.Http (≥ 2.0.20710.0 && < 2.1)'.
Attempting to resolve dependency 'System.Spatial (= 5.0.1)'.
Already referencing a newer version of 'System.Spatial'. 
```

有人有什么想法吗？为什么这个包没有安装？[谷歌搜索为空](https://www.google.com/#hl=en&sclient=psy-ab&q=%22Already+referencing+a+newer+version+of+%27System.Spatial%27.%22&oq=%22Already+referencing+a+newer+version+of+%27System.Spatial%27.%22&gs_l=hp.3...959.4746.0.5288.7.7.0.0.0.0.112.663.6j1.7.0.les;..0.0...1c.Kem4qXSjOus&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=9f3de7f9ee57ed80&biw=1120&bih=572)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:31:32.913

Alex James posted on [his blog](http://blogs.msdn.com/b/alexj/archive/2012/08/15/odata-support-in-asp-net-web-api.aspx) that this has been fixed.

The issue was that ODataLib was released after this OData package was released and that broke the dependencies (version numbers didn't add up). Everything works now, at least for me.

# r - R：ggplot2 读取 csv 数据文件时遇到问题，对象和映射错误

> ID：11986899
> 
> 赞同：0
> 
> 时间：2012-08-16T12:14:21.907
> 
> 标签：r, csv, ggplot2

我是使用 ggplot2 包的新手，不幸的是在基础知识方面遇到了麻烦。我的数据集在一个 csv 逗号分隔文件中，该文件一直在使用绘图函数在 R 中工作，但似乎在 ggplot2 中不起作用。我的 csv 文件如下所示：

```
Depth Min Max Average Mode
34    2   38  5.64    2
44    2   25  6.27    2
etc.... 
```

我正在使用的代码如下：

```
Statsnineteen <- read.csv(file="C:/Users/Holly/Documents/Software Manuals/R
Stuff/Stats_nineteen.csv", header=TRUE, sep=",")
p1 <- ggplot(Max, Depth, data = Statsnineteen)
p1 <- p1 + layer(geom="path") + coord_flip() 
```

然后它会在两条 p1 行之间出现以下错误消息：

```
Error in inherits(mapping, "uneval") : object 'Max' not found 
```

我知道它可以像我使用时一样读取表格：

```
Statsnineteen <- read.table(file.....)
head(Statsnineteen, n=52) 
```

它带来了我的数据表。不要以为有人知道我是否错过了某个命令，或者我的代码是否有问题？在此先感谢您的帮助，冬青

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:16:54.977

我想你需要的是

```
p1 <- ggplot(data = Statsnineteen, aes(x=Max, y=Dept)) 
```

# ios - 在 ios 中以编程方式锁定和解锁屏幕

> ID：11986900
> 
> 赞同：0
> 
> 时间：2012-08-16T12:14:24.323
> 
> 标签：ios, xcode, locking, screen

我是 Xcode 的新手。

在我的魔术应用程序中，我想锁定并立即解锁屏幕，如何操作？

示例代码会有所帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:01:17.623

您无法以编程方式锁定和解锁 iPhone，但您可以在应用程序内显示幻灯片以解锁和锁定动画，查看此示例代码，它显示锁定和解锁动画

[https://github.com/iosdeveloper/SlideToCancel](https://github.com/iosdeveloper/SlideToCancel)

[https://github.com/mattlawer/MBSliderView](https://github.com/mattlawer/MBSliderView)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:26:00.677

你不能用官方的 iPhone sdk 做到这一点。但是正如您所说，这是一个神奇（或有趣）的应用程序，我建议您在图像帧中创建动画并运行它..（如果您只想向用户显示动画）。

没有办法做到这一点。

# iphone - 当用户单击视图中的提交按钮时，向 xcode 中的电话号码发送消息

> ID：11986901
> 
> 赞同：1
> 
> 时间：2012-08-16T12:14:27.613
> 
> 标签：iphone

我有一个视图，它有文本字段和提交按钮。在文本字段中输入电话号码后，用户单击提交按钮。然后我需要在不打开 mfmessagecomposeviewcontroller 的情况下将消息发送到电话号码。如果您需要更多详细信息，请告诉我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:22:47.343

如果您不想打开，`MFMessageComposeViewController`那么我建议您使用 clickatell.com 短信网关发送短信。您可以在您的服务器上实现他们的 api，并在您想要发送短信时在您的服务器上访问 Web 服务。

但问题是您必须为每个用户发送的短信付费。好像您打开`MFMessageComposeViewController`用户为该短信付费一样。

# asp.net - 如何进行分页（ListView）

> ID：11986910
> 
> 赞同：0
> 
> 时间：2012-08-16T12:15:09.707
> 
> 标签：asp.net

我正在做一个博客网站，我想要的是当用户发布新页面列表的某个帖子将在我使用 ListView 时可用我该怎么做？有人可以给我一个教程或告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:21:42.413

您必须使用[DataPager](http://msdn.microsoft.com/en-us/library/cc295263%28v=expression.30%29.aspx)控件

*要使用户能够对 ListView 控件或
实现 IPageableItemContainer 接口的控件中的数据进行分页，您可以使用 DataPager 控件。DataPager 控件可以位于 LayoutTemplate 模板内，也可以位于 ListView 控件之外的页面上。如果 DataPager 控件不在 ListView 控件中，则必须
将 PagedControlID 属性设置为 ListView 控件的 ID。*

# c# - 比较数据库值时的显式转换

> ID：11986927
> 
> 赞同：-1
> 
> 时间：2012-08-16T12:16:34.360
> 
> 标签：c#, asp.net-mvc, linq

我正在尝试通过 ID 在我的数据库中选择一行，然后选择所有“位置”值高于 ID 选择的行的行，如下所示：

```
int id = Convert.ToInt32(Request.QueryString["id"]);
MyDataContext d = new MyDataContext
Item itemID = d.Items.Single(row => row.ID == id);
Item itemPos = d.Items.Select(row => row.Position > itemID.Position); 
```

底线是说存在显式转换，但我似乎无法修复它

到目前为止，已经阅读了答案，代码现在看起来像这样：

```
int id = Convert.ToInt32(Request.QueryString["id"]);
MyDataContext d = new MyDataContext
Item itemID = d.Items.Single(row => row.ID == id);
var itemPos = d.Items.Where(row => row.Position > itemID.Position); 
```

但是当我尝试编辑所选行的位置时，似乎我做错了：

```
itemPos.Position = itemPos.Position - 1; 
```

我原以为那条线会将当前位置减少 1。
我对这一切还是很陌生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:18:17.330

您的 select 语句将返回一个`IEnumerable<Item>`，而您指定的类型是单个`Item`。您可以尝试以下方法。

```
 var itemPos = d.Items.Where(row => row.Position > itemID.Position); 
```

将[var](http://msdn.microsoft.com/en-us/library/bb383973.aspx)用于隐式类型，或`IEnumerable<Item>`用于显式类型，因为您是根据条件进行选择的，您可以使用`Where`子句而不是`Select`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:18:42.643

```
IEnumerable<Item> itemPos = d.Items.Select(row => row.Position > itemID.Position); 
```

但最好的方法是使用`var`.

# import - 在 Liferay 6.1 中从 LDAP 导入用户和用户组

> ID：11986928
> 
> 赞同：1
> 
> 时间：2012-08-16T12:16:39.473
> 
> 标签：import, ldap, liferay

我正在尝试将 LDAP 用户和组导入 Liferay 6.1。

以下`portal-ext.properties`，只能导入不`Usergroups`来自 LDAP 的用户

请问有什么建议吗。

**`portal-ext.properties`**

```
ldap.auth.enabled=true
ldap.export.enabled=false
ldap.import.method=user
ldap.user.impl=com.liferay.portal.security.ldap.LDAPUser
ldap.server.ids=1

ldap.server.name.1=STAFF
ldap.base.provider.url.1=ldap://X.X.X.X:XXX
ldap.base.dn.1=ou=ABCD,ou=wdf,o=aaa
ldap.security.principal.1=cn=XXXX,ou=users,o=aaa
ldap.security.credentials.1=XXXXX

ldap.auth.search.filter.1=(mail=@email_address@)
ldap.import.user.search.filter.1=(&(objectClass=inetOrgPerson)(!(loginDisabled=true)))
ldap.user.mappings.1=screenName=cn\npassword=userPassword\nemailAddress=mail\nfirstName=givenName\nlastName=sn\ngroup=groupMembership\njobTitle=title
ldap.user.custom.mappings.1=university=company

ldap.import.group.search.filter.1=(&(objectClass=inetOrgPerson)(!(loginDisabled=true)))
ldap.group.mappings.1=groupName=company\ndescription=description\nuser=groupMembership 
```

错误消息：得到错误：

```
 ERROR [liferay/scheduler_dispatch-2][PortalLDAPImporterImpl:698] Unable to import user cn=xxxx: null:null:{cn=cn: xxxx}
java.lang.NullPointerException
at com.liferay.portal.security.ldap.PortalLDAPImporterImpl.importGroup(PortalLDAPImporterImpl.java:753)
at com.liferay.portal.security.ldap.PortalLDAPImporterImpl.importGroups(PortalLDAPImporterImpl.java:849)
at com.liferay.portal.security.ldap.PortalLDAPImporterImpl.importFromLDAPByUser(PortalLDAPImporterImpl.java:693)
at com.liferay.portal.security.ldap.PortalLDAPImporterImpl.importFromLDAP(PortalLDAPImporterImpl.java:198)
at com.liferay.portal.security.ldap.PortalLDAPImporterImpl.importFromLDAP(PortalLDAPImporterImpl.java:135)
at com.liferay.portal.security.ldap.PortalLDAPImporterImpl.importFromLDAP(PortalLDAPImporterImpl.java:95)
at com.liferay.portal.security.ldap.PortalLDAPImporterUtil.importFromLDAP(PortalLDAPImporterUtil.java:39)
at com.liferay.portlet.admin.messaging.LDAPImportMessageListener.doReceive(LDAPImportMessageListener.java:28)
at com.liferay.portal.kernel.messaging.BaseMessageListener.receive(BaseMessageListener.java:25)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.liferay.portal.kernel.bean.ClassLoaderBeanHandler.invoke(ClassLoaderBeanHandler.java:67)
at $Proxy285.receive(Unknown Source)
at com.liferay.portal.kernel.scheduler.messaging.SchedulerEventMessageListenerWrapper.receive(SchedulerEventMessageListenerWrapper.java:73)
at com.liferay.portal.kernel.messaging.InvokerMessageListener.receive(InvokerMessageListener.java:63)
at com.liferay.portal.kernel.messaging.ParallelDestination$1.run(ParallelDestination.java:114)
at com.liferay.portal.kernel.concurrent.ThreadPoolExecutor$WorkerTask._runTask(ThreadPoolExecutor.java:671)
at com.liferay.portal.kernel.concurrent.ThreadPoolExecutor$WorkerTask.run(ThreadPoolExecutor.java:582)
at java.lang.Thread.run(Thread.java:619) 
```

用户正在导入，但用户组仍未导入

提前感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:29:03.090

您可能想检查一下： [https ://www.liferay.com/community/forums/-/message_boards/message/15751010](https://www.liferay.com/community/forums/-/message_boards/message/15751010)

我也有同样的错误，将屏幕名称映射从 cn 更改为 uid 解决了我的问题。cn 可以包含空格，我认为这是我的问题。

问候， 巴林特

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T07:35:19.963

I think you need to pay special attention to the following properties in `portal.properties`:

```
#
# Set either user or group for import method. If set to user, the portal
# will import all users and the groups associated with those users. If set
# to group, the portal import all groups and the users associated those
# groups. This value should be set based on how your LDAP server stores
# group membership information.
#
ldap.import.method=user
#ldap.import.method=group // may be you can use this

#
# If set to true, the group filter will be applied, but only to groups in
# the specified base DN. If set to false, the filter will not be applied and
# all groups that are associated with the imported users will be imported
# regardless of the base DN.
#
ldap.import.group.search.filter.enabled=true 
```

Also I think you can test whether groups are being imported or not by going to the Control panel and then ...

1.  Control Panel
2.  Portal Settings
3.  `Authentication` tab
4.  `LDAP` tab
5.  Click "Add" or "Edit" (if LDAP already added)
6.  Go to `Groups` section and add relevant mapping information, click `Test LDAP Groups` (screen shot attached).

![enter image description here](../Images/d6a0bcdca1f601cb25246c898fcdb7a4.png)

Hope this may help you in some way.

# java - PHP java bridge安装错误HTTP Status 500 -

> ID：11986931
> 
> 赞同：0
> 
> 时间：2012-08-16T12:17:04.460
> 
> 标签：java, php, tomcat, parallels, php-java-bridge

我正在尝试在 Windows 服务器上安装 php java bridge。服务器已预先安装了 Parallels 面板（已安装 IIS 和 php） 我已经安装了最新版本的 tomcat 和 JRE 但是当我尝试运行 php-java 桥接时，我总是收到以下错误消息。我错过了什么？

```
HTTP Status 500 - php.java.bridge.http.FCGIConnectException: Could not connect to server

type Exception report

message php.java.bridge.http.FCGIConnectException: Could not connect to server

description The server encountered an internal error (php.java.bridge.http.FCGIConnectException: Could not connect to server) that prevented it from fulfilling this request. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T15:04:36.640

您的服务器中没有安装 Fast CGI 模块，您必须安装它。之后，Java Bridge 将正常运行。

# java - Felix 如何从更新的包中获取所有依赖包的列表

> ID：11986935
> 
> 赞同：1
> 
> 时间：2012-08-16T12:17:12.337
> 
> 标签：java, osgi, bundle, apache-felix

> **可能重复：**
> [在运行时在 Eclipse 中查找依赖包](https://stackoverflow.com/questions/4153421/find-the-dependent-bundles-in-eclipse-at-runtime)

如何从更新的包中获取所有依赖包的列表？例如，某些应用程序加载相同包的情况。有一次我会更新一个包。如何获取依赖于更新包的所有包？为了重新启动依赖于更新包的所有包，这是必要的，因此他们可以看到更新包的新对象。对不起我的英语不好。最好的问候，亚瑟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T21:12:39.093

使用[FrameworkWiring.getDependencyClosure](http://www.osgi.org/javadoc/r4v43/core/org/osgi/framework/wiring/FrameworkWiring.html#getDependencyClosure%28java.util.Collection%29)方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:01:19.963

如果您[在运行时看到 Find thedependent bundles in Eclipse](https://stackoverflow.com/questions/4153421/find-the-dependent-bundles-in-eclipse-at-runtime)：

akr 写道：

> 没有简单的方法来确定依赖关系。最好的方法是通过 PackageAdmin 界面。请参阅 PackageAdmin 和 getImportingBundles 的 OSGi 规范：[http://www.osgi.org/javadoc/r4v42/org/osgi/service/packageadmin/ExportedPackage.html#getImportingBundles()](http://www.osgi.org/javadoc/r4v42/org/osgi/service/packageadmin/ExportedPackage.html#getImportingBundles())
> 
> 您需要确定所有已安装的捆绑包，哪一个会导出一个或多个您的捆绑包正在导入的包。实现此目的的最简单方法是调用 PackageAdmin.getExportedPackages(Bundle bundle) 并设置 bundles = null。这将返回一个包含所有导出包的数组。然后，您需要迭代此数组并调用 ExportPackage.getImportingBundles()。

# c++ - Windows 8 拼写检查提供程序

> ID：11986936
> 
> 赞同：2
> 
> 时间：2012-08-16T12:17:13.507
> 
> 标签：c++, windows, windows-8, spell-checking, provider

[我正在尝试为 Windows 8 实现自己的拼写检查提供程序。我有一个接收单词并返回正确单词的类，但是，我在 Microsoft 的Spell Checking Provider Sample](http://code.msdn.microsoft.com/windowsdesktop/spell-checking-provider-4cbec195)中找不到类或函数，我收到了用户输入字符串并为其返回更正。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T17:32:04.297

由于您正在实现拼写检查提供程序，因此您将实现[ISpellCheckProvider](http://msdn.microsoft.com/en-us/library/windows/desktop/hh869789%28v=vs.85%29.aspx)接口。（在您参考的示例中，这是由 SampleSpellCheckProvider 类实现的）

拼写检查实际上有两个阶段。第一个是检查某些文本是否包含任何错误，第二个是提供建议。

第一阶段发生在对[Check](http://msdn.microsoft.com/en-us/library/windows/desktop/hh869794%28v=vs.85%29.aspx)的调用中。在此为您提供要检查的文本，并返回一个实现[IEnumSpellingError的类，该类应缓存文本并返回它在调用](http://msdn.microsoft.com/en-us/library/windows/desktop/hh869751%28v=vs.85%29.aspx)[Next](http://msdn.microsoft.com/en-us/library/windows/desktop/hh869752%28v=vs.85%29.aspx)时发现的任何错误。（您可以在示例的 EnumSpellingError 类中找到 IEnumSpellingError 的实现。在示例中，它最终在提供程序（内部方法）上调用 EngineCheck，该提供程序在 SampleEngine 上调用 FindFirstError - 实际检查并建议被隔离到 SampleEngine .h 文件，而其他文件则专注于基础架构）

第二阶段发生在对[Suggest](http://msdn.microsoft.com/en-us/library/windows/desktop/hh869804%28v=vs.85%29.aspx)的调用中。在此，您将获得一个单词并将建议集作为实现[IEnumString](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687257%28v=vs.85%29.aspx)的类返回。

# ruby-on-rails - 无法在 Rails 中验证 CSRF 令牌的真实性

> ID：11986939
> 
> 赞同：8
> 
> 时间：2012-08-16T12:17:21.607
> 
> 标签：ruby-on-rails, csrf, paypal-adaptive-payments

我正在使用 PaypalAdaptive。它正确发送 ipn_notification。ipnNotification 操作方法如下 -

```
def ipn_notification
    ipn = PaypalAdaptive::IpnNotification.new
    ipn.send_back(request.raw_post.to_json)

    print "=====================request.raw_post#{request.raw_post}=============="

    if ipn.verified?
        PaymentMailer.notify_unknown(request.raw_post).deliver
    else
        logger.info "IT DIDNT WORK"
    end
    render :nothing => true
end 
```

但它返回错误

```
WARNING: Can't verify CSRF token authenticity rails 
```

对这个问题有任何帮助。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-16T12:44:46.373

在您的控制器中：

```
skip_before_filter :verify_authenticity_token, :only => [:ipn_notification] 
```

对于快速阅读并分发 -1 的人（跳过一个重要部分：这不是来自客户端的 POST 调用......）：

*   是的，它跳过了安全性，但是……阅读后……

*   是的，这是外部网站 POST 请求的唯一方式

*   是的，这很安全：当您接到 Paypal 或类似的电话时，您显然会检查参数和密钥。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-09T21:57:49.787

在不影响安全性的情况下解决此问题的正确方法

在您的 ajax 请求中，将 csrf 令牌值作为标头发送。

```
var csrfToken = $("meta[name='csrf-token']").attr("content");
$.ajaxSetup({
  headers: {
    'X-CSRF-Token': csrfToken
  }
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-25T13:45:51.183

在 application.js 中添加以下行

```
//= require jquery_ujs 
```

并尝试。

# c# - 需要停止计时器，因为它一遍又一遍地循环和打开同一个窗口

> ID：11986941
> 
> 赞同：1
> 
> 时间：2012-08-16T12:17:26.737
> 
> 标签：c#

我有这个正在启动的屏幕，基本上就像一个飞溅，但它不是。我在上面放了一个计时器。几秒钟后，窗口必须消失，然后必须显示登录。我已经展示了新表格，但它是在循环中。它一次又一次地打开新表格！这是我的代码。我在哪里做错了？

**定时器**

```
int count;
count = 0;

public Windowsplash()
{
    System.Windows.Threading.DispatcherTimer dispatcherTimer = new System.Windows.Threading.DispatcherTimer();

    dispatcherTimer.Interval = new TimeSpan(0,0,0,0,2500);
    dispatcherTimer.Tick += new EventHandler(dispatcherTimer_Tick);
    dispatcherTimer.Start();
}
private void dispatcherTimer_Tick(object sender, EventArgs e)
{
    System.Windows.Threading.DispatcherTimer dispatcherTimer = sender as System.Windows.Threading.DispatcherTimer;

    dispatcherTimer.Stop();
    MainWindow _new = new MainWindow();
    _new.Show();
    this.Close();
} 
```

我想停止计时器，这样新窗口就可以一直停止打开！谢谢！

PS：我把它编辑成我现在拥有的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:23:46.377

您正在 _Tick 处理程序中创建一个新的 DispatcherTimer 实例。然后你停止那个实例。旧的原始实例将继续运行。

从处理程序中删除此行；

```
System.Windows.Threading.DispatcherTimer dispatcherTimer = new System.Windows.Threading.DispatcherTimer(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T12:27:44.247

为了改进 IvoTops 的答案，看起来您可能正在为构造函数创建本地计时器，因此在滴答处理程序中将无法访问它。将您的刻度事件处理程序的第一行更改为：

```
System.Windows.Threading.DispatcherTimer dispatcherTimer
    = sender as System.Windows.Threading.DispatcherTimer; 
```

通过这种方式，您可以获得被触发的原始​​计时器，而不是创建一个新计时器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T06:38:38.943

```
int count; 
count = 0; 

public Windowsplash 

    System.Windows.Threading.DispatcherTimer dispatcherTimer = new System.Windows.Threading.DispatcherTimer();
    dispatcherTimer.Interval = new TimeSpan(0,0,0,500); 
    dispatcherTimer.Tick += new EventHandler(dispatcherTimer_Tick); 
    dispatcherTimer.Start(); 

private void dispatcherTimer_Tick(object sender, EventArgs e) 
{ 
    System.Windows.Threading.DispatcherTimer dispatcherTimer = sender as System.Windows.Threading.DispatcherTimer; 

        dispatcherTimer.Stop(); 
        MainWindow _new = new MainWindow(); 
        _new.Show(); 
        this.Close(); 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T12:24:44.437

与其`DispatcherTimer`在循环中每次都创建一个新的，不如重用`sender`原来的`DispatcherTimer`. 您的问题是旧计时器继续运行而没有任何进一步的交互。

# c# - 如何获取整个数据库的 MD5 并使用它来轮询更改？

> ID：11986945
> 
> 赞同：0
> 
> 时间：2012-08-16T12:17:34.343
> 
> 标签：c#, sql-server, linq-to-sql

我正在尝试进行某种轮询以收听数据库上发生的更新。到目前为止，我正在考虑获取数据库（或几个表）的 MD5 散列（或任何类型或散列），将其存储在一个变量中，然后运行一个线程，一遍又一遍地循环这个过程，将它与最后的结果进行比较。如果有不同，则将一个按钮设置为“启用”，该按钮会触发数据库加载功能。

这是一个好方法吗？如果不是，为什么？如果是，如何？

我真的不知道如何实现的部分是在数据库一侧获取 MD5 哈希。我可以轻松获取所有数据，然后获取它的 md5 哈希，所有客户端，但是......是的。

我正在使用 LINQ to SQL，但恐怕我只能使用上下文来运行原始查询。这是在 WinForms、.NET 3.5 上（但这并不重要……）。

非常感谢任何提示。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T12:25:07.480

不要重新发明轮子。为工作使用正确的工具：

> > *   [更改跟踪](http://msdn.microsoft.com/en-us/library/cc280462(v=sql.105).aspx)SQL Server 2008 中的更改跟踪使应用程序能够仅获取对用户表所做的更改以及有关这些更改的信息
> >     
> >     
> > *   [更改数据捕获](http://msdn.microsoft.com/en-us/library/bb522489(v=sql.105))更改数据捕获旨在捕获应用于 SQL Server 表的插入、更新和删除活动，并以易于使用的关系格式提供更改的详细信息。变更数据捕获使用的变更表包含反映跟踪源表的列结构的列，以及了解已发生的变更所需的元数据。

请注意，上述两种技术都针对偶尔连接的系统（例如，移动用户连接到棒以刷新其本地快照）。对于永久连接并需要在后端发生更改时刷新其显示的系统，正确的技术是[查询通知](http://rusanu.com/2006/06/17/the-mysterious-notification/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T12:25:54.280

通过轮询**所有数据**来检测对数据库的修改几乎是最糟糕的想法。如果您无法控制进行实际修改的客户端，那么 AFAIK 就没有理智的方法可以做到这一点（如果您的应用程序需要这种级别的信息，每个人都应该合作）。

作为一种听起来仍然很糟糕的解决方法，您可以[`rowversion`](http://msdn.microsoft.com/en-us/library/ms182776%28v=sql.105%29.aspx)通过选择最大值并将其与本地缓存的“旧最大值”进行比较，为所有表和每个表轮询添加一列。每当更新一行时，它`rowversion`就会发生变化，因此您不仅会知道某些内容已更新，而且如果需要，您还可以从表中仅选择更新的记录。

# c# - 如何将 JSON 字符串映射到 C# 方法的调用

> ID：11986947
> 
> 赞同：6
> 
> 时间：2012-08-16T12:17:43.730
> 
> 标签：c#, json

我想实现一个框架来将 JSON 字符串映射到 C# 方法的调用。例如，我有一个 C# 类计算器，定义如下。

```
// C# class
class Calculator
{
public:
    int add (int x, int y);
    int sub (int x, int y);
} 
```

有一个 JSON 字符串，如下所示。当框架接收到这个字符串时，它会创建/新建一个类 Calculator 的对象。然后调用它的函数add。并将值 12 和 43 作为参数传递给函数。

```
// JSON string
"{
\"class\":\"Calculator\",
\"method\":\"add\",
\"parameters\": {
    \"x\" : \"12\", \"y\" : \"43\"
    }
}" 
```

是否有任何第三方库来实现这一点？或者我怎样才能自己实现它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-16T12:30:32.220

一个小的工作样本。当然，很多支票都不见了。（使用[Json.Net](http://json.codeplex.com/)）

```
string jsonstring = "{\"class\":\"Calculator\",\"method\":\"add\",\"parameters\": { \"x\" : \"12\", \"y\" : \"43\" }}";

var json = (JObject)JsonConvert.DeserializeObject(jsonstring);

Type type = Assembly.GetExecutingAssembly()
                    .GetTypes()
                    .First(t => t.Name==(string)json["class"]);

object inst = Activator.CreateInstance(type);
var method =  type.GetMethod((string)json["method"]);
var parameters = method.GetParameters()
        .Select(p => Convert.ChangeType((string)json["parameters"][p.Name], p.ParameterType))
        .ToArray();
var result =  method.Invoke(inst, parameters);

var toReturn = JsonConvert.SerializeObject(new {status="OK",result=result }); 
```

-

```
class Calculator
{
    public int add(int x, int y)
    {
        return x + y;
    }
} 
```

# css - 文字装饰：无；不适用于一个简单的例子

> ID：11986948
> 
> 赞同：2
> 
> 时间：2012-08-16T12:17:57.633
> 
> 标签：css, html, text-decorations

我很好奇为什么`"Should not be underlined"`下面的代码中仍然有下划线：

```
<html>
<head>
<style type="text/css">
.badge1-link { text-decoration: none; }
.badge1 { text-decoration: underline; }

.badge2-link {text-decoration: underline;}
.badge2 {text-decoration: none;}

</style> 
</head>
<body>
<a href="#" class="badge1-link"><span class="badge1">Underlined</span> | not underlined</a>
<br/>
<a href="#" class="badge2-link"><span class="badge2"> Should not be underlined</span> | Underlined</a>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T12:29:43.203

一旦一个锚标签被赋予了下划线，它就不能被部分删除，就像你建议的**badge2**

请参阅此链接：[从链接中删除顽固的下划线](https://stackoverflow.com/questions/2789703/css-remove-stubborn-underline-from-link)。接受的答案有一些相同的评论。

您的问题的解决方案是从锚标记中删除下划线，然后像使用**badge1一样添加部分下划线**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-01-30T10:49:25.360

**display:inline-block**可以解决问题。它对我有用。改变你的风格如下

```
.badge2 {display:inline-block;text-decoration: none;} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T12:20:04.757

请使用`:link`伪类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T12:25:25.437

锚正在装饰跨度。文本装饰也可以是“上划线”，因此可以覆盖带下划线的文本。所以在这种情况下，css 的行为与预期的一样：锚没有在下划线的跨度下划线。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-31T05:21:59.383

我一直有一个类似的问题：一个链接有一个蓝色的下划线，`{text-decoration: underline;}`什么也没做。我试过`{text-decoration: underline;}`了，虽然这确实摆脱了蓝线，但它用黑线代替了它。以我 200 的智商，我决定将下划线涂成白色：`{text-decoration: underline white;}`这解决了问题，哈哈。

# image - 从 wordpress 内容中删除图像并放置在模板中的其他位置

> ID：11986952
> 
> 赞同：2
> 
> 时间：2012-08-16T12:18:23.673
> 
> 标签：image, wordpress, wordpress-theming

我有一个 wordpress 网站，它使用插件从 PhotoShelter 页面和帖子中插入图像。如果我想将图像直接插入到内容中，那么这很好，但是，我目前无法使用它来设置特色图像。

该插件基本上允许您通过标准图像上传屏幕浏览 PhotoShelter 上的所有照片，然后当您单击“插入帖子”时，它会热链接到 PhotoShelter 上的图像。它不会以任何方式将其附加到帖子中，并且图像不会出现在媒体库中。

有没有办法在 the_content() 中查找图像，将其剥离（我不希望图像显示在内容区域中）并将其与帖子 ID 一起保存到数组中？这样我就可以将它用于存档模板中的博客缩略图以及我的页面模板循环中的其他地方。或者也许有一种方法可以更改特色图像功能以允许我从 PhotoShelter 中选择图像？

这是我正在使用的插件：[http ://wordpress.org/extend/plugins/photoshelter-official-plugin/](http://wordpress.org/extend/plugins/photoshelter-official-plugin/)

愿意接受有关如何实现这一目标的任何建议。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:50:35.940

如果在您的循环中使用下面的代码，则会将内容中使用的所有图像捕获到一个数组中，并将它们从内容中删除。

```
/* get the post_content */
$content = get_the_content();

/* makes an array of images and stores them in $matches */
preg_match("/<img[^>]+\>/i", $content, $matches, PREG_OFFSET_CAPTURE, 3);

/* removes all images from the content */
$content = preg_replace("/<img[^>]+\>/i", "", $content);

/* display the content as normal */
echo wpautop($content); 
```

这样做的问题是数组将填充 img 标签的条目，实际上您只需要图像的 src。获取 src 很棘手，请参阅这个[问题](https://stackoverflow.com/questions/1196570/using-regular-expressions-to-extract-the-first-image-source-from-html-codes)。

即使您确实设法使所有这些工作正常，它仍然是您问题的一个时髦的解决方案。除了特色图片之外，您的用户将无法将其他图片上传到他们的内容中。

一个更好的解决方案是制作一个看起来像“特色图像”元框的自定义元框，但单击时会加载 PhotoShelter 模式，然后允许您将选取的图像保存为发布元。

它会输出什么样的图像到您的内容中？它们是普通的图片链接还是里面塞满了变量？

# php - 使用 GD 调整 PHP 图像大小

> ID：11986954
> 
> 赞同：1
> 
> 时间：2012-08-16T12:18:29.163
> 
> 标签：php, image, upload, resize, gd

所以我正在处理一个上传脚本（这是我在 PHP 中的第一次体验），我遇到了一个问题：

上传工作正常，文件被上传到'../images/'而不是重命名为mysql ID。完成后，我想将图像大小调整为 96px x 96px。比问题开始：

我确实正确安装了 GD（用脚本测试），这是我的“调整大小”代码：

```
$orig_image = imagecreatefromjpeg("../image/$newname");
$sm_image = Imagecreate(96,96);
Imagecopyresized($sm_image,$orig_image,0,0,0,0,50,50,imagesx($orig_image),imagesy($orig_image));
imageJPEG($sm_image); 
```

我得到的结果不是调整大小的图像，图像文件完全相同，但我得到：

```
RÃ©ussiÿØÿàJFIFÿþ>CREATOR: gd-jpeg v1.0 (using IJG JPEG v62), default quality ÿÛC       $.' ",#(7),01444'9=82<.342ÿÛC     2!!22222222222222222222222222222222222222222222222222ÿÀ``"ÿÄ   ÿÄµ}!1AQa"q2‘¡#B±ÁRÑð$3br‚ %&'()*456789:CDEFGHIJSTUVWXYZcdefghijstuvwxyzƒ„…†‡ˆ‰Š’“”•–—˜™š¢£¤¥¦§¨©ª²³´µ¶·¸¹ºÂÃÄÅÆÇÈÉÊÒÓÔÕÖ×ØÙÚáâãäåæçèéêñòóôõö÷øùúÿÄ     ÿÄµw!1AQaq"2B‘¡±Á  #3RðbrÑ $4á%ñ&'()*56789:CDEFGHIJSTUVWXYZcdefghijstuvwxyz‚ƒ„…†‡ˆ‰Š’“”•–—˜™š¢£¤¥¦§¨©ª²³´µ¶·¸¹ºÂÃÄÅÆÇÈÉÊÒÓÔÕÖ×ØÙÚâãäåæçèéêòóôõö÷øùúÿÚ?ðØãÍYK}Ýªh"Éé]6‹¥B¢;Ë¦M§%bqôÇ×9¯>¾!SWgÔá0Ö¹‘iáûÛÑ˜-Ý†3é‘ê3Ö¤“ÃW‘Åæ4nHÈ ôëÒ½ÍÞpÐ[4~n îRÆ:€~ƒÚ¢¹žrbV,O žyFqŒcvéŸzò´*¹ZÈõ–ŠÑ£Ë®,ŠŽeË    Bx¯HÕ¬âž2èŒ²©çqáò2ñ÷®>þØuƒ^®Îµ<œÇ+Š‹œAÒ–œëµÈ#Úôœµ´ (¢Q@N›n.."‰†UœnÇËÔóÛŒ×|ó[,o¹ŒoŒ°øSÓë\.™(‚D”…&lt;çÐŒç]m»\_Û—´¼Æh‹$c®O9Á==}>s›’od}ö)SL œ‘ÜK4xGb´}Kìù³ô Ÿò+AnæOÜ„SI½U;rFpO$ƒƒž¤˜¬‹†¸³VØ²Jd ácÂ°n€8Ïõïšµ é¹“ÊXæg9@™Þ¨§9À8ãon•É8I¤Þ¦îÌ•ü©'Øˆ©FeG'°àçƒùŒ’Er:ý´+©O¢±ˆ¶PHÏ8üë§û@0•XÊü¡¦’ry°{qšlí´»{SSlÌü[B3¸Œ`ç¦oÀãµkBn”¯øw"¬T£fyü oxñ?ÞIöÈúÕj¹ªÌ×”Ò±Éb?ªuôÔïÈ®|!%Zj;]þaEU˜…Q@>z‘Œ0‚=«®ÐutFrÊÞx‘6õ|ƒÎîÇÿ­é^e ÑCZ0ê3Çzòñ8?h™õx<Òœ £3Ò Žæò%–u+3LÏ2Œ”q’ON„c¸Ï"­K$«t³Fö±Èîùjw‡+‚1Æ}xõõâ¸[oÞ[¬j$"}êæÁçüMMqâÛé”(tˆàE¯_p3^d°5œºXôþ³IësPÕ`µÛ@O›&amp;w;Ôã9ãõÈ®sXÕ¥»|¼ŒÄn,IosšÍ¸Ô¤˜îfÉ¬ù®wµÝ‡Á¨Y½ÎLN>œbÔJWGuËŸ§ò¨iÎw94Úö²>>¤¹¦ßvQE2Š( À§‡aÐÓh iÛbA4ƒø¨óåþ÷éQÑK•í'Ý’yÒ{ô¦cÔÒQEœä÷aES$(¢Š(¢Š(¢Š(¢Š(¢Š(¢Š(¢Š(¢Š(¢Š(¢Š(¢Š(¢Š(¢Š(¢ŠÿÙ 
```

关于让它工作的任何提示？

提前致谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T12:19:53.227

不要忘记添加`headers`

```
header("Content-Type: image/jpeg"); 
```

既然你想要 96x96 它应该是：

```
imagecopyresized($sm_image,$orig_image,0,0,0,0,96,96,imagesx($orig_image),imagesy($orig_image)); 
```

# hibernate - 如何在 JPA/Play 框架的 LIKE 子句中使用百分比？

> ID：11986956
> 
> 赞同：2
> 
> 时间：2012-08-16T12:18:34.570
> 
> 标签：hibernate, jpa, playframework, playframework-1.x

我想找到所有其电子邮件包含该字符串的用户`middle`。

以下代码失败 - JPA 似乎无法将其识别`?`为参数，因为它被引号括起来。

```
List<User> users = User.findAll("email like '%?%'", middle); 
```

以下代码有效，但对 SQL 注入开放：

```
List<User> users = User.findAll("email like '%" + middle + "%'"); 
```

你有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:22:33.797

尝试将您的字符串操作移至 Java 端，并保留 SQL 参数：

```
List<User> users = User.findAll("email like ?", "%"+middle+"%"); 
```

# java - java中的安卓游戏

> ID：11986957
> 
> 赞同：-2
> 
> 时间：2012-08-16T12:18:35.350
> 
> 标签：java, android, eclipse

我是android新手，我正在尝试在其中制作游戏，但是当我在模拟器中运行代码时，它会显示消息“强制关闭”。我正在同一个类中编写启动画面和菜单代码。当我没有在代码中添加 onclicklistner 但当我想在主代码中添加按钮操作时，它运行良好。

这是我的主要课程代码

```
package com.gillidanda;

import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ProgressBar;
import android.widget.TextView;
import android.widget.ViewSwitcher;

public class GilliActivity extends Activity implements OnClickListener{

//creates a ViewSwitcher object, to switch between Views
    private ViewSwitcher viewSwitcher;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);

        //Initialize a LoadViewTask object and call the execute() method
        new LoadViewTask().execute();
       // setContentView(R.layout.activity_gilli);

        Button b1 = (Button) findViewById(R.id.button1);
        b1.setOnClickListener(this);
    }

    public void onClick(View v) {
        // TODO Auto-generated method stub
        if(v.getId()==R.id.button1){
            //Log.d("Amit","Button clicked");

                       startActivity(new Intent(GilliActivity.this,StartGame.class));
        }
    }

    //To use the AsyncTask, it must be subclassed
    private class LoadViewTask extends AsyncTask<Void, Integer, Void>
    {
        //A TextView object and a ProgressBar object
        private TextView tv_progress;
        private ProgressBar pb_progressBar;

        //Before running code in the separate thread
        @Override
        protected void onPreExecute() 
        {
            //Initialize the ViewSwitcher object
            viewSwitcher = new ViewSwitcher(GilliActivity.this);
            /* Initialize the loading screen with data from the 

                      'loadingscreen.xml' layout xml file. 
             * Add the initialized View to the viewSwitcher.*/

                     viewSwitcher.addView(ViewSwitcher.inflate(GilliActivity.this,         

                     R.layout.activity_gilli, null));

            //Initialize the TextView and ProgressBar instances -     

                              IMPORTANT: call findViewById() from viewSwitcher.
            tv_progress = (TextView) 

                            viewSwitcher.findViewById(R.id.tv_progress);
            pb_progressBar = (ProgressBar) 

                            viewSwitcher.findViewById(R.id.pb_progressbar);
            //Sets the maximum value of the progress bar to 100             
            pb_progressBar.setMax(100);

            //Set ViewSwitcher instance as the current View.
            setContentView(viewSwitcher);
        }

        //The code to be executed in a background thread.
        @Override
        protected Void doInBackground(Void... params) 
        {
            /* This is just a code that delays the thread execution 4 

                              times, 
             * during 850 milliseconds and updates the current 

                                 progress. This 
             * is where the code that is going to be executed on a 

                                background
             * thread must be placed. 
             */
            try 
            {
                //Get the current thread's token
                synchronized (this) 
                {
                    //Initialize an integer (that will act as a 

                                              counter) to zero
                    int counter = 0;
                    //While the counter is smaller than four
                    while(counter <= 4)
                    {
                        //Wait 850 milliseconds
                        this.wait(850);
                        //Increment the counter 
                        counter++;
                        //Set the current progress. 
                        //This value is going to be passed 

                                                    to the onProgressUpdate() method.
                        publishProgress(counter*25);
                    }
                }
            } 
            catch (InterruptedException e) 
            {
                e.printStackTrace();
            }
            return null;
        }

        //Update the TextView and the progress at progress bar
        @Override
        protected void onProgressUpdate(Integer... values) 
        {
            //Update the progress at the UI if progress value is 

                             smaller than 100
            if(values[0] <= 100)
            {
                tv_progress.setText("Progress: " + 

                                    Integer.toString(values[0]) + "%");
                pb_progressBar.setProgress(values[0]);
            }
        }

        //After executing the code in the thread
        @Override
        protected void onPostExecute(Void result) 
        {
            /* Initialize the application's main interface from the 

                                     'main.xml' layout xml file. 
             * Add the initialized View to the viewSwitcher.*/

                         viewSwitcher.addView(ViewSwitcher.inflate(GilliActivity.this, 

                              R.layout.mainmenu, null));
            //Switch the Views
            viewSwitcher.showNext();
        }
    }

    //Override the default back key behavior
    @Override
    public void onBackPressed() 
    {
        //Emulate the progressDialog.setCancelable(false) behavior
        //If the first view is being shown
        if(viewSwitcher.getDisplayedChild() == 0)
        {
            //Do nothing
            return;
        }
        else
        {
            //Finishes the current Activity
            super.onBackPressed();
        }
    }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_gilli, menu);
    return true;
} 
```

}

这是启动画面代码

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/images" >

<ProgressBar
    android:id="@+id/pb_progressbar"
    style="?android:attr/progressBarStyleHorizontal"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_marginBottom="18dp" />

<TextView
    android:id="@+id/tv_progress"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/pb_progressbar"
    android:layout_centerHorizontal="true"
    android:shadowColor="#000000"
    android:shadowDx="2.0"
    android:shadowDy="2.0"
    android:shadowRadius="3.0"
    android:text="Progress: 0%"
    android:textAppearance="?android:attr/textAppearanceSmall"
    android:textColor="#ffffffff" />

<TextView
    android:id="@+id/tv_loadingtext"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/pb_progressbar"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="19dp"
    android:text="Loading, please wait..."
    android:textAppearance="?android:attr/textAppearanceMedium" />

</RelativeLayout> 
```

这是主菜单代码

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/tile" >

    <Button
        android:id="@+id/button1"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="81dp"
        android:text="Start Game" />

    <Button
        android:id="@+id/button2"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/button1"
        android:layout_alignRight="@+id/button1"
        android:layout_below="@+id/button1"
        android:layout_marginTop="15dp"
        android:text="Help" />

    <Button
        android:id="@+id/button3"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/button2"
        android:layout_alignRight="@+id/button2"
        android:layout_below="@+id/button2"
        android:layout_marginTop="14dp"
        android:text="Setting" />

    <Button
        android:id="@+id/button4"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/button3"
        android:layout_alignRight="@+id/button3"
        android:layout_below="@+id/button3"
        android:layout_marginTop="14dp"
        android:text="Credits" />

    <Button
        android:id="@+id/button5"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/button4"
        android:layout_alignRight="@+id/button4"
        android:layout_below="@+id/button4"
        android:layout_marginTop="16dp"
        android:text="Exit" />

</RelativeLayout> 
```

这是清单代码

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.gillidanda"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".GilliActivity"
        android:label="@string/title_activity_gilli" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name=".StartGame"
        android:label="@string/title_activity_gilli" >
        <intent-filter>
            <action android:name="android.intent.action.StartGame" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

请给我一些有用的答案。感谢您的回复。

这是我的日志代码

```
08-13 16:05:02.257: D/AndroidRuntime(450): Shutting down VM
08-13 16:05:02.257: W/dalvikvm(450): threadid=1: thread exiting with uncaught exception   

(group=0x40015560)
08-13 16:05:02.276: E/AndroidRuntime(450): FATAL EXCEPTION: main
08-13 16:05:02.276: E/AndroidRuntime(450): java.lang.RuntimeException: Unable to start  

activity ComponentInfo{com.gillidanda/com.gillidanda.GilliActivity}:  

java.lang.NullPointerException
08-13 16:05:02.276: E/AndroidRuntime(450):  at  

android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
08-13 16:05:02.276: E/AndroidRuntime(450):  at  

android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
08-13 16:05:02.276: E/AndroidRuntime(450):  at 

android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-13 16:05:02.276: E/AndroidRuntime(450):  at 

android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
08-13 16:05:02.276: E/AndroidRuntime(450):  at  

android.os.Handler.dispatchMessage(Handler.java:99)
08-13 16:05:02.276: E/AndroidRuntime(450):  at android.os.Looper.loop(Looper.java:123)
08-13 16:05:02.276: E/AndroidRuntime(450):  at 

android.app.ActivityThread.main(ActivityThread.java:3683)
08-13 16:05:02.276: E/AndroidRuntime(450):  at 

java.lang.reflect.Method.invokeNative(Native Method)
08-13 16:05:02.276: E/AndroidRuntime(450):  at   

java.lang.reflect.Method.invoke(Method.java:507)
08-13 16:05:02.276: E/AndroidRuntime(450):  at 

com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-13 16:05:02.276: E/AndroidRuntime(450):  at 

com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-13 16:05:02.276: E/AndroidRuntime(450):  at dalvik.system.NativeStart.main(Native 

Method)
08-13 16:05:02.276: E/AndroidRuntime(450): Caused by: java.lang.NullPointerException
08-13 16:05:02.276: E/AndroidRuntime(450):  at com.
gillidanda.GilliActivity.onCreate(GilliActivity.java:27)
08-13 16:05:02.276: E/AndroidRuntime(450):   at 

android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-13 16:05:02.276: E/AndroidRuntime(450):  at 

android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
08-13 16:05:02.276: E/AndroidRuntime(450):  ... 11 more
08-13 16:05:49.157: D/AndroidRuntime(459): Shutting down VM
08-13 16:05:49.176: W/dalvikvm(459): threadid=1: thread exiting with uncaught exception 

(group=0x40015560)
08-13 16:05:49.216: E/AndroidRuntime(459): FATAL EXCEPTION: main
08-13 16:05:49.216: E/AndroidRuntime(459): java.lang.RuntimeException: Unable to start  

activity ComponentInfo{com.gillidanda/com.gillidanda.GilliActivity}: 

java.lang.NullPointerException
08-13 16:05:49.216: E/AndroidRuntime(459):  at  

android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
08-13 16:05:49.216: E/AndroidRuntime(459):  at 

android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
08-13 16:05:49.216: E/AndroidRuntime(459):  at  

android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-13 16:05:49.216: E/AndroidRuntime(459):  at 

android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
08-13 16:05:49.216: E/AndroidRuntime(459):  at 

android.os.Handler.dispatchMessage(Handler.java:99)
08-13 16:05:49.216: E/AndroidRuntime(459):  at android.os.Looper.loop(Looper.java:123)
08-13 16:05:49.216: E/AndroidRuntime(459):  at 

android.app.ActivityThread.main(ActivityThread.java:3683)
08-13 16:05:49.216: E/AndroidRuntime(459):  at  

java.lang.reflect.Method.invokeNative(Native Method)
08-13 16:05:49.216: E/AndroidRuntime(459):  at 

java.lang.reflect.Method.invoke(Method.java:507)
08-13 16:05:49.216: E/AndroidRuntime(459):  at 

com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-13 16:05:49.216: E/AndroidRuntime(459):  at 

com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-13 16:05:49.216: E/AndroidRuntime(459):  at dalvik.system.NativeStart.main(Native  

Method)
08-13 16:05:49.216: E/AndroidRuntime(459): Caused by: java.lang.NullPointerException
08-13 16:05:49.216: E/AndroidRuntime(459):  at 

com.gillidanda.GilliActivity.onCreate(GilliActivity.java:27)
08-13 16:05:49.216: E/AndroidRuntime(459):  at 

android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-13 16:05:49.216: E/AndroidRuntime(459):  at andr
oid.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
08-13 16:05:49.216: E/AndroidRuntime(459):  ... 11 more
08-13 16:05:53.677: I/Process(459): Sending signal. PID: 459 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:21:50.243

您还没有在 oncreate 中完成 setcontentView ，因此 findviewbyid 失败。

```
setContentView(R.layout.mainmenu) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:44:58.743

我已经运行了你的代码。我收到空指针异常

```
b1.setOnClickListener(this) 
```

findViewById 返回 null 的唯一原因是您要查找的按钮不属于当前视图。如果你添加

```
setContentView(R.layout.mainmenu) 
```

对于您的 onCreate() 它应该毫无例外地工作。

# c# - 更改 WinForms ListView.View 的按钮的标准图标

> ID：11986965
> 
> 赞同：0
> 
> 时间：2012-08-16T12:19:05.673
> 
> 标签：c#, winforms, listview, icons, windows-explorer

我有一个包含控件的自定义控件`ListView`，它以 Windows 资源管理器的方式显示文件。我想添加 Windows Explorer 用于更改的相同按钮`ListView.View`（即“详细信息”、“列表”、“小图标”等按钮），但找不到图标（我一直在搜索`C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\VS2010ImageLibrary\1033\VS2010ImageLibrary.zip`）。有谁知道我在哪里可以找到这些？谢谢。

（我怀疑没有带有用于每个视图的滑块和按钮的 Vista/Win7 样式下拉按钮的预制控件，但如果有，那就太好了！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:52:52.467

我怀疑这些图标嵌入在一个 Windows 程序集中（我不知道是哪一个，但我猜是 Shell32 之类的）。为了得到它们，您需要从程序集中提取它们。

提取它们有很多选项，您可以使用诸如此类的工具[或](http://www.nirsoft.net/utils/iconsext.html)使用[ExtractIconEx API](http://www.pinvoke.net/default.aspx/shell32.extracticon)。

如果你[用谷歌搜索](https://www.google.com/search?q=extracting+icons+from+dll&aq=2&oq=extracting+icons+from+&sugexp=chrome,mod=2&sourceid=chrome&ie=UTF-8)，你也会看到很多其他选项。

注意：我不确定这些图标的许可，因此根据您使用它们的方式/位置，我建议研究这些图标的可接受用途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:13:38.083

[http://www.fatcow.com/free-icons](http://www.fatcow.com/free-icons)上的Fatcow 托管图标拥有您需要的所有图标。还有一些图标用于展示 listview 的 view 属性，好在它对包括商业在内的各种用途都是免费的。

# extjs - 如何用 extjs 网格中的另一条记录替换行？

> ID：11986969
> 
> 赞同：0
> 
> 时间：2012-08-16T12:19:12.500
> 
> 标签：extjs

如果我的网格中有 5 行

```
a 30
b 35
c 47
d 50
f 70 
```

我怎样才能用 ca 12,cb 14,cc 20 替换 c 47 就是这样

```
a 30
b 35
ca 12
cb 14
cc 20 
d 50
f 70 
```

提前致谢 .... ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T07:35:15.140

最合适的方法是更改​​存储。

```
var store = grid.getStore();

store.on('load', changeRowC ,this);

var changeRowC = function(){

    //loop on your data of store and insert records ca, cb, cc 

} 
```

# jquery - jQuery .submit() 没有触发

> ID：11986972
> 
> 赞同：3
> 
> 时间：2012-08-16T12:19:27.447
> 
> 标签：jquery, html, submit

我做了很多搜索，但找不到我的 jQuery`.submit()`不会触发的原因。我也尝试过`.click()`提交按钮。

我目前有一个 div 模板（包括一个表单）：

```
<div class="reply-to-existing-message" style="display: none">
        <form class="reply-message-form">
            <textarea id="post-reply-message-textarea" name="PostReplyMessage[message]" rows="3" cols="40" style="resize: none"></textarea>
            <input class="reply-to-message-id" type="hidden" name="PostReplyMessage[id]" />
            <input class="post-reply-message-submit" type="submit" value="Reply"/>
        </form>
    </div> 
```

当单击回复按钮时，我使用 jQuery 将其附加到消息中（生成下拉回复表单，以便用户可以回复消息）。这工作正常（也使用萤火虫仔细检查）。

但是，当我单击提交按钮时，我的 jQuery 代码不会产生警报，因此它甚至没有触发。有人可以解释为什么会发生这种情况，谢谢！jQuery代码：

```
$(document).ready(function() {
    $('.reply-message-form').submit(function() {
        alert('test');
        return false;
    }) ;
}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-16T12:22:56.920

如果您要动态添加内容，则该静态调用`.submit()`对您不起作用。这只会将事件处理程序绑定到在*运行时*与选择器匹配的元素，因此此后添加的任何元素都不会绑定事件处理程序。

解决方案是**事件委托**，使用以下[`.on()`](http://api.jquery.com/on/)功能：

```
$(document).on('submit', '.reply-message-form', function(e) {
    alert('test');
    return false;
}); 
```

`document`理想情况下，您应该选择包含所有动态内容的最接近的静态（即在页面加载时存在）元素，而不是使用。

或者，如果您使用的是 1.7 之前的 jQuery 版本，因此无法访问该`.on()`函数，则可以使用该[`.delegate()`](http://api.jquery.com/delegate/)函数：

```
$(document).delegate('.reply-message-form', 'submit', function(e) {
    alert('test');
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T12:22:26.877

对于动态生成的元素，你应该委托事件，你可以使用`on`方法，尝试以下：

```
$(document).ready(function() {
    $(document).on('click', 'input[type=submit]', function() {
        alert('test');
        return false;
    });
}); 
```

# authorization - 如何为asp.net mvc 4 web api进行基于角色的授权

> ID：11986974
> 
> 赞同：10
> 
> 时间：2012-08-16T12:19:39.403
> 
> 标签：authorization, asp.net-mvc-4, asp.net-web-api

我正在尝试制作一个安全的 asp.net web api。为此，我遵循了以下链接

[令牌的消息处理程序](http://codebetter.com/johnvpetersen/2012/04/04/moving-from-action-filters-to-message-handlers/)

所以现在每个 api 请求都需要一个令牌，我在请求标头中提供了一个令牌，例如

```
public class TestController : Controller
{

    public string GetProducts()
    {
        Uri myUri = new Uri("http://localhost:420420/api/products");
        WebRequest myWebRequest = WebRequest.Create(myUri);

        myWebRequest.Method = "GET";
        myWebRequest.ContentType = "application/json";
        myWebRequest.Headers.Add("Authorization-Token", RSAClass.accessToken);

        using (WebResponse response = myWebRequest.GetResponse())
        {
            using (var responseStream = response.GetResponseStream())
            {
                var reader = new StreamReader(responseStream);
                return reader.ReadToEnd();
            }
        }
    }    
  } 
```

所以我现在可以发出每个 api 请求，检查标头中的令牌。但是我如何完成授权，我的意思是我怎么能不允许这个令牌不能访问同一个控制器中的某些操作。我只需要一个想法。希望我解释得足够好。

**编辑：**

```
public class TestController : Controller
{
    public string GetProducts()
    {
        Uri myUri = new Uri("http://localhost:420420/api/products");         

        WebRequest myWebRequest = WebRequest.Create(myUri);

        myWebRequest.Method = "GET";
        myWebRequest.ContentType = "application/json";
        myWebRequest.Headers.Add("Authorization-Token", RSAClass.accessToken);

        **using (WebResponse response = myWebRequest.GetResponse())
        {
            using (var responseStream = response.GetResponseStream())
            {
                var reader = new StreamReader(responseStream);
                return reader.ReadToEnd();
            }
        }**
 } 
```

我正在使用 webrequest 向控制器上方的“api”控制器发出请求（稍后我将其更改为 HttpClient）。在上面 ** ** 之间的代码中，我得到 404 page not found for ***myWebRequest.GetResponse()***

下面是我的 api 控制器

```
public class ProductsController : ApiController
{

    TestModelContainer testModel = new TestModelContainer();

    [Authorize(Roles="Users")]
    public IEnumerable<Products> GetProducts()
    {
        IEnumerable<Products> products = (from prods in testModel.Products
                        select prods);
        return products;        
    }        
 }
} 
```

现在在委托处理程序中，我有以下代码

```
public class TokenValidationHandler : DelegatingHandler
{
    protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request,
     CancellationToken cancellationToken)
    {
        TestModelContainer testModel = new TestModelContainer();

        var token = "";
        try
        {

            if (request.Headers.Contains("Authorization-Token"))
            {

                token = request.Headers.GetValues("Authorization-Token").FirstOrDefault();

                if (String.IsNullOrEmpty(token))
                {
                    return Task<HttpResponseMessage>.Factory.StartNew(() =>
                    {
                        return new HttpResponseMessage(HttpStatusCode.BadRequest)
                        {
                            Content = new StringContent("Missing Authorization-Token")
                        };
                    });
                }
            }
            else
            {
                return Task<HttpResponseMessage>.Factory.StartNew(() =>
                {
                    return new HttpResponseMessage(HttpStatusCode.BadRequest)
                    {
                        Content = new StringContent("You need to include Authorization-Token " +
                        "header in your request")
                    };
                });
            }

            var decryptedToken = RSAClass.Decrypt(token);
            var foundUser =  (from user in testModel.Users
                                where user.Name == decryptedToken
                                select user).Any();              

            if (!foundUser)
                return Task<HttpResponseMessage>.Factory.StartNew(() =>
                {
                    return new HttpResponseMessage(HttpStatusCode.Forbidden)
                    {
                        Content = new StringContent("Unauthorized User")
                    };
                });

      var identity = new GenericIdentity(decryptedToken);
              string[] roles = new string[] { "Users", "Testers" };

              var principal = new GenericPrincipal(identity, roles);
              Thread.CurrentPrincipal = principal;
        }
        catch (Exception ex)
        {
            return Task<HttpResponseMessage>.Factory.StartNew(() =>
            {
                return new HttpResponseMessage(HttpStatusCode.InternalServerError)
                {
                    Content = new StringContent("Error encountered while attempting to process authorization token")
                };
            });
        }
        return base.SendAsync(request, cancellationToken);
    } 
```

如果我从 api 控制器中删除 Authorize 属性，则不会出现 404 错误，然后我就可以访问它。

**更新（我也相信解决方案）：**

这就是问题得到解决的方式

**我已经按照Darin Dimitrov**的建议更改了 TestController 方法

 **```
public class TestsController : Controller
{
    public ActionResult GetProducts()
    {
        var productsUrl = Url.RouteUrl("DefaultApi", new { httproute = "", controller = "products" }, "http");
        using (var client = new HttpClient())
        {
            client.DefaultRequestHeaders.Add("Authorization-Token", RSAClass.accessToken);

         var products = client
               .GetAsync(productsUrl)
                 .Result;

            if (products.StatusCode == HttpStatusCode.Unauthorized)
            {
                return Content("Sorry you are not authorized to perform this operation");
            }

            var prods = products.Content
                .ReadAsAsync<IEnumerable<Products>>()
                .Result;

            return Json(prods, JsonRequestBehavior.AllowGet);
        }
    } 
```

问题是我不知道如何调用 api，感谢**Darin**的大力支持（他也很快）。

谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-16T12:26:38.337

您在以下位置注册处理程序`Global.asax`：

```
GlobalConfiguration
    .Configuration
    .MessageHandlers
    .Add(new TokenValidationHandler()); 
```

然后用`[Authorize]`属性装饰需要授权的控制器/动作：

```
public class MyController : ApiController
{
    [Authorize]
    public string Get(string id)
    {
        ...          
    }
} 
```

* * *

对于基于角色的授权，您可以查看以下示例：[https ://stackoverflow.com/a/11536349/29407](https://stackoverflow.com/a/11536349/29407)

它使用 SSL 上的基本身份验证，并依赖于内置的成员资格和角色提供程序。

* * *

更新：

根据留下的众多评论，我的印象是我的答案不够清楚。让我详细说明。

1.  使用空模板创建一个新的 ASP.NET MVC 4 项目
2.  定义模型：

    ```
    public class Product
    {
        public int Id { get; set; }
        public string Name { get; set; }
    } 
    ```

3.  定义一个 ApiController：

    ```
    public class ProductsController : ApiController
    {
        // GET /api/products => only users having the Users role can call this
        [Authorize(Roles = "Users")]
        public HttpResponseMessage Get()
        {
            var products = Enumerable.Range(1, 5).Select(x => new Product
            {
                Id = x,
                Name = "product " + x
            });
            return Request.CreateResponse(HttpStatusCode.OK, products);
        }

        // GET /api/products => only users having the Admin role can call this
        [Authorize(Roles = "Admin")]
        public void Post(Product product)
        {
        }
    } 
    ```

4.  定义一个`RSAHelper`：

    ```
    public class RSAClass
    {
        private static string _privateKey = "<RSAKeyValue><Modulus>poQS/c9tLkgg84xYZpnUBHP6fy24D6XmzhQ8yCOG317hfUNhRt6Z9N4oTn+QcOTh/DAnul4Q901GrHbPrMB8tl1LtbpKbvGftPhyR7OLQVnWC1Oz10t2tHEo7mqyPyAVuYsq8Q1E3YNTh2V6+PRvMiAWGUHGyyG7fKjt/R9W+RE=</Modulus><Exponent>AQAB</Exponent><P>4G09wYejA4iLakpAcjXbE/zV9tXTNsYqVIWeXF4hzwMmwmin7ru/WQzXu2DdapXXOJIKqrkfzXlcPwCsW5b9rQ==</P><Q>vfEq13Et+cP4eGgsR+crDQH0Mi+G6UW5ACfuDs/zam1o+CE70pLgeWawfqW4jRN30/VHDnTF9DZuotH6zihNdQ==</Q><DP>JoZaHYidERQ1am+IlJJuIwY57H9UHIjz50JwpsZ540FVO/YfLboI5M5xkfbUy2EhatKXBit1LB5zGVWSQL6wmQ==</DP><DQ>Gxk7KX2GN6oT2unR13hNlg9/TWGmd8VwvWr09bwJWFe/sBbduA8oY2mZKJhwGgB7CgxmVNOoIk1Zv3UBuUPauQ==</DQ><InverseQ>ZwJpSUZ09lCfiCF3ILB6F1q+6NC5hFH0O4924X9B4LZ8G4PRuudBMu1Yg0WNROUqVi3zfihKvzHnquHshSL56A==</InverseQ><D>pPQNRDVpeQGm8t1C7VDRwR+LNNV7krTMMbXGiJT5FOoPAmHvSZ9WcEZrM2gXFF8IpySlFm/86p84tbx0+jMs1niU52VsTscsamGbTzbsxeoHAt1fQUvzYveOGoRezotXblboVB2971r6avMHNtAk0FAdjvh4TjGZJCGTqNHD0mE=</D></RSAKeyValue>";
        private static string _publicKey = "<RSAKeyValue><Modulus>poQS/c9tLkgg84xYZpnUBHP6fy24D6XmzhQ8yCOG317hfUNhRt6Z9N4oTn+QcOTh/DAnul4Q901GrHbPrMB8tl1LtbpKbvGftPhyR7OLQVnWC1Oz10t2tHEo7mqyPyAVuYsq8Q1E3YNTh2V6+PRvMiAWGUHGyyG7fKjt/R9W+RE=</Modulus><Exponent>AQAB</Exponent></RSAKeyValue>";
        private static UnicodeEncoding _encoder = new UnicodeEncoding();

        public static string Decrypt(string data)
        {
            try
            {
                var rsa = new RSACryptoServiceProvider();
                var dataArray = data.Split(new char[] { ',' });

                byte[] dataByte = new byte[dataArray.Length];
                for (int i = 0; i < dataArray.Length; i++)
                {
                    dataByte[i] = Convert.ToByte(dataArray[i]);
                }

                rsa.FromXmlString(_privateKey);
                var decryptedByte = rsa.Decrypt(dataByte, false);
                return _encoder.GetString(decryptedByte);
            }
            catch (Exception)
            {
                throw new RSAException();
            }
        }

        public static string Encrypt(string data)
        {
            try
            {
                var rsa = new RSACryptoServiceProvider();
                rsa.FromXmlString(_publicKey);
                var dataToEncrypt = _encoder.GetBytes(data);
                var encryptedByteArray = rsa.Encrypt(dataToEncrypt, false).ToArray();
                var length = encryptedByteArray.Count();
                var item = 0;
                var sb = new StringBuilder();
                foreach (var x in encryptedByteArray)
                {
                    item++;
                    sb.Append(x);

                    if (item < length)
                        sb.Append(",");
                }

                return sb.ToString();

            }
            catch (Exception ex)
            {
                throw new RSAException();
            }
        }

        public class RSAException : Exception
        {
            public RSAException() : base("RSA Encryption Error") { }
        }
    } 
    ```

5.  定义一个`TokenValidationHandler`：

    ```
    public class TokenValidationHandler : DelegatingHandler
    {
        protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
        {
            try
            {
                if (!request.Headers.Contains("Authorization-Token"))
                {
                    return Task<HttpResponseMessage>.Factory.StartNew(() =>
                    {
                        return new HttpResponseMessage(HttpStatusCode.BadRequest)
                        {
                            Content = new StringContent("You need to include Authorization-Token header in your request")
                        };
                    });
                }

                var token = request.Headers.GetValues("Authorization-Token").FirstOrDefault();
                if (string.IsNullOrEmpty(token))
                {
                    return Task<HttpResponseMessage>.Factory.StartNew(() =>
                    {
                        return new HttpResponseMessage(HttpStatusCode.BadRequest)
                        {
                            Content = new StringContent("Missing Authorization-Token")
                        };
                    });
                }

                var decryptedToken = RSAClass.Decrypt(token);

                // TODO: do your query to find the user
                var user = decryptedToken;

                var identity = new GenericIdentity(decryptedToken);
                string[] roles = new[] { "Users", "Testers" };

                var principal = new GenericPrincipal(identity, roles);
                Thread.CurrentPrincipal = principal;
            }
            catch
            {
                return Task<HttpResponseMessage>.Factory.StartNew(() =>
                {
                    return new HttpResponseMessage(HttpStatusCode.InternalServerError)
                    {
                        Content = new StringContent("Error encountered while attempting to process authorization token")
                    };
                });
            }

            return base.SendAsync(request, cancellationToken);
        }
    } 
    ```

6.  定义一个测试控制器：

    ```
    public class TestsController : Controller
    {
        public ActionResult GetProducts()
        {
            var productsUrl = Url.RouteUrl("DefaultApi", new { httproute = "", controller = "products" }, "http");
            using (var client = new HttpClient())
            {
                var token = RSAClass.Encrypt("john");
                client.DefaultRequestHeaders.Add("Authorization-Token", token);

                var products = client
                    .GetAsync(productsUrl)
                    .Result
                    .Content
                    .ReadAsAsync<IEnumerable<Product>>()
                    .Result;

                return Json(products, JsonRequestBehavior.AllowGet);
            }
        }

        public ActionResult PostProduct()
        {
            var productsUrl = Url.RouteUrl("DefaultApi", new { httproute = "", controller = "products" }, "http");
            using (var client = new HttpClient())
            {
                var token = RSAClass.Encrypt("john");
                client.DefaultRequestHeaders.Add("Authorization-Token", token);

                var product = new Product 
                {
                    Id = 1,
                    Name = "test product"
                };

                var result = client
                    .PostAsync<Product>(productsUrl, product, new JsonMediaTypeFormatter())
                    .Result;
                if (result.StatusCode == HttpStatusCode.Unauthorized)
                {
                    return Content("Sorry you are not authorized to perform this operation");
                }

                return Json(true, JsonRequestBehavior.AllowGet);
            }
        }
    } 
    ```

7.  测试：

    ```
    * /tests/getproducts => success
    * /tests/postproduct => 401 
    ```**

# maven - jslint-maven-plugin 1.0.2-SNAPSHOT 存储库

> ID：11986983
> 
> 赞同：2
> 
> 时间：2012-08-16T12:20:09.150
> 
> 标签：maven, jslint

我只能找到 1.0.1 - 这是一个 git 世界，我*真的*希望我不必安装 subversion 来检查代码并自己构建它:-(

使用页面[http://www.mojohaus.org/jslint-maven-plugin/usage.html](http://www.mojohaus.org/jslint-maven-plugin/usage.html)说 1.0.2-SNAPSHOT - maven 存储库在哪里~~，一个**洞~~？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:49:32.767

我正在使用 jslint4java 代替：

```
<plugin>
    <groupId>com.googlecode.jslint4java</groupId>
    <artifactId>jslint4java-maven-plugin</artifactId>
    <version>2.0.2</version> 
```

这种懈怠只会吓跑潜在用户，CodeHaus/Mojo ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:44:14.383

AFAIK，1.0.2-SNAPSHOT 尚未发布。

因此，如果您不想安装 SVN 客户端，请使用[git-svn](http://www.kernel.org/pub/software/scm/git/docs/git-svn.html)：

```
git-svn clone http://svn.example.com/svn/project 
```

# performance - 在 .htaccess 文件中寻找有关 Apache 指令效率的评论

> ID：11986984
> 
> 赞同：0
> 
> 时间：2012-08-16T12:20:10.160
> 
> 标签：performance, wordpress, .htaccess

我有一个非常缓慢的 WordPress 网站——与我正在运行的大多数其他 WP 网站不同。

我有条不紊地尝试将其分解并逐步构建站点/页面，以检测哪些地方有机会为我们的用户社区获得速度和性能改进。

请查看我的基本 .htaccess 文件中的指令，以评估其中的任何内容是否会导致服务器性能不佳。

注意：我们正在运行 100 多个其他静态和基于应用程序的站点，并且它们都没有表现不佳，所以我已经排除了服务器和网络。我还运行了 HTTP Live Headers 插件和 Google Page Speed 插件来观察网络活动和页面构建和返回。我可以看到页面请求从哪里传到网络，快如闪电。但是页面返回需要 3-10 时钟秒。这种情况一直发生在早上 6 点、上午 10 点、下午 3 点、晚上 8 点等。

谢谢！

```
Options +FollowSymLinks

RewriteEngine On
RewriteBase /insider/
RewriteRule ^index\.php$ - [L]

# uploaded files
RewriteRule ^([_0-9a-zA-Z-]+/)?files/(.+) wp-includes/ms-files.php?file=$2 [L]

# add a trailing slash to /wp-admin
RewriteRule ^([_0-9a-zA-Z-]+/)?wp-admin$ $1wp-admin/ [R=301,L]

RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]
RewriteRule  ^[_0-9a-zA-Z-]+/(wp-(content|admin|includes).*) $1 [L]
RewriteRule  ^[_0-9a-zA-Z-]+/(.*\.php)$ $1 [L]
RewriteRule . index.php [L]

# added per BuddyBoss Site Speed Optimization Techniques
# Image and Flash content Caching for One Month
<FilesMatch ".(flv|gif|jpg|jpeg|png|ico|swf)$">
    Header set Cache-Control "max-age=2592000"
</FilesMatch>

# added to increase file upload size
<IfModule mod_php5.c>
    php_value post_max_size 10M
    php_value upload_max_filesize 10M
</IfModule> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:49:28.180

> 这种情况一直发生在早上 6 点、上午 10 点、下午 3 点、晚上 8 点等。

你真的只是在没有意识到的情况下回答了你的问题。我建议这与问题无关，`.htaccess`而与您的 VFAT（文件系统）缓存被某些定期批处理/cron 作业（应用程序或系统）（例如备份或同步）刷新有关。

WP 加载 PHP 模块的存储，如果您没有启用诸如 APC 或 Xcache 之类的操作码缓存（即使您启用并启用了文件统计），那么这些都需要大量 I/O。如果您的文件缓存已被刷新，那么这将生成大量物理 I/O，这里我们谈论的是每个 I/O 10 毫秒的毫秒数，因为涉及旋转金属。更糟糕的是，就像一场足球比赛结束上厕所一样，你会发现每次去都需要大量的排队，不知不觉已经过去了 3-10 秒。

*   确保您启用了操作码缓存。
*   查看其他批次负载并确保其“不错”
*   设置您的操作码缓存大小和过滤器，以确保任何每 3 小时一次（或其他）模块不会将高使用事务代码从操作码缓存中清除。

# javascript - 在javascript中将数组添加到数组？

> ID：11986990
> 
> 赞同：0
> 
> 时间：2012-08-16T12:20:20.510
> 
> 标签：javascript, arrays, multidimensional-array

如何将数组添加到带有变量和函数的数组？

```
var ranges = new Array();
fulldate='2012/06/11:2012/10/23|2012/03/11:2012/05/23'.split('|');

for(var i=0; i<fulldate.length; i++) {
    adate=fulldate[i].toString().split(':');

    startdate=adate[0].toString().split('/');
    enddate=adate[1].toString().split('/');

    //***This area****************************
    ranges.push = ({ start: new Date(startdate[0],startdate[1]-1,startdate[2]), end: new Date(enddate[0],enddate[1]-1,enddate[2]) });
    //***This area****************************
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T12:22:24.957

`push`是一种方法，你必须像这样使用它：

```
ranges.push({ start: new Date(startdate[0],startdate[1]-1,startdate[2]), end: new Date(enddate[0],enddate[1]-1,enddate[2]) }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:59:53.327

挑剔的是，您并没有真正尝试将数组添加到另一个数组。为此，您可以使用`array.concat()`：

```
var cArray = aArray.concat(bArray). 
```

看起来您想将一个数组转换为另一个数组。你可以使用`array.map()`：

```
var fulldate='2012/06/11:2012/10/23|2012/03/11:2012/05/23'.split('|');
var ranges = fulldate.map(function(x) {
    var adate=x.toString().split(':');
    var startdate=adate[0].toString().split('/');
    var enddate=adate[1].toString().split('/');
    return { 
        start: new Date(startdate[0],startdate[1]-1,startdate[2]),
        end: new Date(enddate[0],enddate[1]-1,enddate[2])
    };
}); 
```

# jquery - jQuery $.wait() for *all* deferred's 被拒绝？

> ID：11986997
> 
> 赞同：3
> 
> 时间：2012-08-16T12:20:41.683
> 
> 标签：jquery, jquery-deferred

`Deferred`jQuery 的API有一个很好的特性，`$.wait()`可以处理多个`Deferred`s/ `Promise`s。它在以下情况下返回：

*   **所有**的`Deferred`s 都已经`resolve()`d

*或者*

*   **其中**一个`Deferred`已`reject()`编辑

大多数时候这是你想要的，但有时你想知道它们什么时候**都**被`reject()`编辑了。

**有没有一种简单或优雅的方式来做类似`$.wait()`但只有当所有`Deferred`s 都被拒绝时？**

（可能还有其他用例，但我的是将其与[等待几个 Deferred 中的第一个解决](https://stackoverflow.com/questions/11977192/wait-for-the-first-of-multiple-jquery-deferreds-to-be-resolved/11977529#comment15968825_11977529)。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-03-05T22:00:00.293

本着 Promise 规范未来如何使用`PromiseInspection`对象的精神，这里有一个 jQuery 附加函数，它告诉你所有承诺何时完成，无论是履行还是拒绝：

```
// pass either multiple promises as separate arguments or an array of promises
$.settle = function(p1) {
    var args;
    if (Array.isArray(p1)) {
          args = p1;
    } else {
        args = Array.prototype.slice.call(arguments);
    }

    function PromiseInspection(fulfilled, val) {
        return {
            isFulfilled: function() {
                return fulfilled;
            }, value: function() {
                return fulfilled ? val: undefined;
            }, reason: function() {
                return !fulfilled ? val: undefined;
            }
        };
    }
    return $.when.apply($, args.map(function(p) {
        // if incoming value, not a promise, then wrap it in a promise
        if (!p || (!(typeof p === "object" || typeof p === "function")) || typeof p.then !== "function") {
            p = $.Deferred().resolve(p);
        }
        // Now we know for sure that p is a promise
        // Make sure that the returned promise here is always resolved with a PromiseInspection object, never rejected
        return p.then(function(val) {
            return new PromiseInspection(true, val);
        }, function(reason) {
            // convert rejected promise into resolved promise
            // this is required in jQuery 1.x and 2.x (works in jQuery 3.x, but the extra .resolve() is not required in 3.x)
            return $.Deferred().resolve(new PromiseInspection(false, reason));
        });
    })).then(function() {
          // return an array of results which is just more convenient to work with
          // than the separate arguments that $.when() would normally return
        return Array.prototype.slice.call(arguments);
    });
} 
```

然后，您可以像这样使用它：

```
$.settle(promiseArray).then(function(inspectionArray) {
    inspectionArray.forEach(function(pi) {
        if (pi.isFulfilled()) {
            // pi.value() is the value of the fulfilled promise
        } else {
            // pi.reason() is the reason for the rejection
        }
    });
}); 
```

请记住，`$.settle()`将始终履行（从不拒绝）并且履行的值是一个`PromiseInspection`对象数组，您可以询问每个对象以查看它是履行还是拒绝，然后获取相应的值或原因。有关示例用法，请参见下面的演示：

工作演示：[https ://jsfiddle.net/jfriend00/y0gjs31r/](https://jsfiddle.net/jfriend00/y0gjs31r/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-07T13:16:36.157

我最近遇到了同样的问题：我认为这是因为`$.when`更多的是一种`Promise.all`实现。

我无法`Promise.allSettled`在 jQuery 文档和整个网络中找到替代方案，所以这是我的尝试：

```
const deferredsAllSettled = deferreds => {
    const settlements = [];

    deferreds.forEach(deferred => {
        const settlement = jQuery.Deferred();

        deferred.always(settlement.resolve);

        settlements.push(settlement);
    });

    const returnedDeferred = $.Deferred();

    jQuery.when
        .apply(jQuery, settlements)
        .then(() =>
            returnedDeferred.resolve(
                deferreds.map(deferred => deferred.promise())
            )
        );

    return returnedDeferred.promise();
}; 
```

注意：我已经为 utils 文件编写了该文件，因此`Promise.allSettled`唯一的*可迭代*参数签名对我来说是可以的，如果您想在`$.when`精神上编写它（将`$.Deferred`s 作为单独的参数传递和获取），您必须编写一个再多一点...

# c - select() 似乎不适用于 TTY

> ID：11986998
> 
> 赞同：3
> 
> 时间：2012-08-16T12:20:42.893
> 
> 标签：c, linux, embedded, serial-port

我目前正在编写一个需要通过 UART 接口（操作系统是 Linux）与 AT 接口通信的程序。但是我在使用`select()`文件描述符时遇到了麻烦。出于某种原因，选择不认为文件描述符已准备好读取，但为了缩小问题范围，我使用了以下程序。

```
int main()
{
    char buffer[BSIZE];
    fd_set rfds;
    int ret;
    struct termios cnf;
    struct timeval tv;

    fd = open("/dev/ttyO1", O_RDWR);
    // Have also tried to set fd = 0 for stdin, as a reference
    signal(SIGINT, sig_handler);
    tcgetattr(fd, &cnf);
    old = cnf;
    cfmakeraw(&cnf);
    tcsetattr(fd, TCSANOW, &cnf);
    while (1) {
        tv.tv_sec = 5;
        tv.tv_usec = 0;
        FD_ZERO(&rfds);
        FD_SET(0, &rfds);
        write(fd, "AT\r", 3);
        ret = select(fd+1, &rfds, NULL, NULL, &tv);
        printf("ret = %d\n", ret);
        if (ret < 0) {
            perror("select()");
        }
        else {
            ret = read(fd, buffer, BSIZE-1);
            buffer[ret] = '\0';
            printf("read: \"%s\"\n", buffer);
        }
    }
    return 0;
} 
```

跑步看起来像这样

```
 root@linux:~# ./stuff
    ret = 0
    read: "AT
    OK
    " 
```

这表明select认为没有数据，但是在尝试读取时有数据。这对我来说似乎很奇怪。另外，我尝试将 tty 与 stdin 交换，效果很好。

该代码正在德州仪器 EZSDK PSP 内核上运行，但这不应该是问题。此外，`stty`设置如下所示

```
 root@linux:~# stty -aF /dev/ttyO1
    speed 9600 baud; rows 24; columns 80;
    intr = ^C; quit = ^\; erase = ^?; kill = ^U; eof = ^D; eol = <undef>;
    eol2 = <undef>; start = ^Q; stop = ^S; susp = ^Z; rprnt = ^R; werase = ^W;
    lnext = ^V; flush = ^O; min = 1; time = 0;
    -parenb -parodd cs8 hupcl -cstopb cread clocal -crtscts
    -ignbrk -brkint -ignpar -parmrk -inpck -istrip -inlcr -igncr icrnl ixon -ixoff
    -iuclc -ixany -imaxbel
    opost -olcuc -ocrnl onlcr -onocr -onlret -ofill -ofdel nl0 cr0 tab0 bs0 vt0 ff0
    isig icanon iexten echo echoe echok -echonl -noflsh -xcase -tostop -echoprt
    echoctl echoke 
```

我错过了一些重要的标志`open()`吗？或者可能需要使用设置一些设置`termios`？这种方法是否需要一些特殊的硬件

编辑：我在尝试运行程序时遇到了同样的问题`/dev/ttyUSB0`，这也恰好是一个 AT 接口。在我看来，这是`tty`相关的。

将 fd 更改为我实际使用并想知道的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T13:14:04.687

您不要将串行端口的文件描述符添加到 fd 集。

换线：

```
FD_SET(0, &rfds); 
```

至：

```
FD_SET(fd, &rfds); 
```

如果您需要 fd zero 在集合中，或者添加以下行。

```
FD_SET(fd, &rfds); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:27:57.323

我相信它应该是 /dev/ttyS1 而不是 /dev/tty01。您正在尝试在恰好连接到嵌入式板中的 UART 的 VT（虚拟终端）上进行选择，但这不是一回事，