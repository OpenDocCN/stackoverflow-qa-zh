# StackOverflow 问答 10162000-10162999

# jquery - HTML5离线谷歌地图访问

> ID：10162016
> 
> 赞同：2
> 
> 时间：2012-04-15T12:27:28.247
> 
> 标签：jquery, html, google-maps, jquery-mobile

我们正在开发一个 HTML5 应用程序，它有一个谷歌地图来改变搜索的位置。现在这个应用程序也有一个离线版本。有什么办法可以缓存谷歌地图，当应用程序离线时，它会显示离线版本？

我们如何才能让用户再次更改位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T14:59:43.730

目前没有任何用于谷歌地图的缓存机制，事实上，下载的地图瓦片明确指定了 nocache 标头（有趣的是，正在为 Android 版本的地图进行缓存工作，但仍处于试验阶段） . 为了离线利用地图，您可能需要推出自己的缓存方案。

随着移动设备的爆炸式增长，以及在使用移动设备时有时会断开连接的可能性，如果谷歌在未来的某个时候确实为地图添加了离线浏览功能（也许是 v4？），我不会感到惊讶。

**更新**：

公共问题跟踪器中有一个功能请求：

[https://code.google.com/p/gmaps-api-issues/issues/detail?id=8914](https://code.google.com/p/gmaps-api-issues/issues/detail?id=8914)

请对此功能请求加注星标以表达您的兴趣并接收来自 Google 的进一步更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T18:09:58.963

我制作了一个带有缓存地图的 HTML5 应用程序，但它不是谷歌地图。[我使用来自http://search.cpan.org/~rotkraut/Geo-OSM-Tiles-0.02/downloadosmtiles.pl](http://search.cpan.org/~rotkraut/Geo-OSM-Tiles-0.02/downloadosmtiles.pl)的 tiledownloader并使用 Mapquest 的 Open tile 服务器下载了我需要的区域，因为它们没有命中限制。然后，我使用脚本遍历所有切片并将它们添加到 cache.manifest 文件中。然后我只使用 Cloudmade 的 Leaflet 来映射瓷砖。

# objective-c - 在 Objective C 中发送消息实际上是异步的吗？

> ID：10162019
> 
> 赞同：2
> 
> 时间：2012-04-15T12:27:39.900
> 
> 标签：objective-c

消息的概念通常与异步调用相关联。Objective C 是这种情况吗？即，当调用者向被调用者发送消息以对其执行方法时，调用者是立即继续还是被阻塞，直到被调用者完成执行请求的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T12:29:39.730

它肯定被阻止了。因为消息实际上是用纯 C 语言翻译的。

```
[myObj myMethod]; 
```

变成

```
objc_msgSend(myObj, @selector(myMethod)); 
```

在运行时。

但是，有些方法被实现为异步的。参见`-[NSTask launch]`,`-[NSThread start]`等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T12:28:57.233

不，当你在 Objective-c 中阅读“发送消息”时，你必须将其视为调用方法。所以，发送消息就是调用一个方法，有些是同步的，有些是异步的，你必须查看文档才能看到。

# c++ - tbb 并发容器性能

> ID：10162023
> 
> 赞同：0
> 
> 时间：2012-04-15T12:27:59.463
> 
> 标签：c++, multithreading, parallel-processing, containers, tbb

我现在有这个程序使用vector和unordered_map，当我构建它们时，我正在从串行文件中读取，所以实际上我无法并行化构建过程，但是当我在程序中进一步使用它们时，我可以并行读取它们“注意：我不会修改这些容器上的任何值”

因此，我将在阅读使用 intel tbb 提供的并发容器是否有用时并行化该程序。因为我已经在没有它们的情况下对我的算法进行了串行计时，并且需要 1.4 秒才能完成，但是当我在没有任何并行性的情况下集成它们时，程序的性能是 4 秒！

任何人都可以解释为什么会出现这种退化，我应该使用它们，因为它们在某种程度上是线程安全的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T12:38:53.740

如果您不更改容器和值，则可以通过使用串行版本来避免额外的“并发”开销。小心使用地图，`operator[]`如果您正在查找的值不在地图中，则不要使用它可以更改容器。

请注意，您的时间差异可能来自不同的来源，例如过多的线程生成、锁定开销、错误的测量......

# iphone - 将一些 UIImages 转换为 GIF 文件图像

> ID：10162024
> 
> 赞同：0
> 
> 时间：2012-04-15T12:28:44.867
> 
> 标签：iphone, ios

在 iOS 中，我需要通过程序将一些 png 图像转换为 gif 图像，并确保输出的 gif 格式图像的尺寸尽可能小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T13:51:56.387

我假设您想在代码中而不是在您的 Mac 上执行此操作，对吗？

我要尝试的第一件事是[ImageIO](https://developer.apple.com/library/ios/#documentation/graphicsimaging/Conceptual/ImageIOGuide/)框架。它可以将 png 文件转换为 CGImageRef 对象，然后将 CGImageRefs 导出为 gif 文件。

# iphone - 点击手势识别器不适用于 UIScrollView 内的 UIWebiew，它位于 UIView 内

> ID：10162029
> 
> 赞同：5
> 
> 时间：2012-04-15T12:29:35.110
> 
> 标签：iphone, ios, ipad, ios5, ios4

我已将 WebView 放置在 Scrollview 中，而后者又放置在 viewcontroller 的视图中。点击 web 视图时，不会调用“tapRecognized”方法。

这是我的代码：

```
 UITapGestureRecognizer *oneFingerTwoTaps = 
      [[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapRecognized)] autorelease];

    [oneFingerTwoTaps setNumberOfTapsRequired:1];

// Add the gesture to the view

[[self view] addGestureRecognizer:oneFingerTwoTaps]; 
```

我也尝试过以下方法：

```
[scrollview addGestureRecognizer:oneFingerTwoTaps];

[webview addGestureRecognizer:oneFingerTwoTaps]; 
```

请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T12:43:45.083

尝试添加以下语句：

```
//.h
...
@interface yourclass <UIGestureRecognizerDelegate>
...

//.m
...
[oneFingerTwoTaps setDelegate:self];
...

- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer {
    return YES;
} 
```

我希望它可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T13:07:55.700

手势识别器只能添加到单个视图中。视图不能共享手势识别器。虽然 UIView 可以附加多个手势识别器，但 UIGestureRecognizer 只能附加一个视图。这是当您将手势添加到任何基于 UIView 的视图时在 UIGestureRecognizer 上设置的属性。

```
view
The view the gesture recognizer is attached to. (read-only)

@property(nonatomic, readonly) UIView *view

Discussion
 You attach (or add) a gesture recognizer to a UIView object using the addGestureRecognizer: method.

Availability
 Available in iOS 3.2 and later.
Declared In
 UIGestureRecognizer.h 
```

# jpa - 带有 RCP 插件和 Derby 数据库的 Eclipselink

> ID：10162033
> 
> 赞同：2
> 
> 时间：2012-04-15T12:29:51.130
> 
> 标签：jpa, eclipselink, derby, rcp

我有一个使用 eclipse indigo 3.7.2 制作的 RCP 应用程序，我想使用 eclipselink 与 Derby 数据库进行通信。但我不能让它工作。我的问题是 eclipselink，我尝试包含 jars 并尝试使用 bundles.By 包含 jars 我得到了

java.lang.NoClassDefFoundError: javax/persistence/Persistence

通过包含来自产品的捆绑包，它找不到 import javax.persistence 并且在产品的依赖选项卡中我看到了版本为 (0.0.0) 的插件，例如 org.eclipse.persistence.jpa(0.0.0)

我的 persistence.xml 位于 META-INF 文件夹中，并且是：

* http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd" version="2.0" xmlns="http://java.sun.com/xml/ns/persistence">

```
 <class>org.encryption.steganography.model.User</class>

    <properties>
        <property name="javax.persistence.jdbc.driver" value="org.apache.derby.jdbc.EmbeddedDriver" />
            <property name="javax.persistence.jdbc.url"
            value="jdbc:derby:C:\Users\Paner\Desktop\Steganography\relationsshipDb;create=true" />
        <property name="javax.persistence.jdbc.user" value="test" />
        <property name="javax.persistence.jdbc.password" value="test" />
        <!-- EclipseLink should create the database schema automatically -->
        <property name="eclipselink.ddl-generation" value="create-tables" />
        <property name="eclipselink.ddl-generation.output-mode"
            value="database" />
    </properties>
</persistence-unit> 
```

*

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:51:58.867

您的类路径中是否有 JPA javax.persistence.jar 或 persistence.jar？

# html - 在 noscript 元素中加载资产

> ID：10162034
> 
> 赞同：0
> 
> 时间：2012-04-15T12:30:12.507
> 
> 标签：html, xhtml, cross-browser, noscript

我希望标准行为是不在`<noscript>`元素中加载任何资产，并且在 FF 和 Chrome 中进行的快速粗略测试证明了这一点。但是，在`<noscript>`启用脚本时是否会加载元素中的资产（例如图像）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T15:20:02.807

我想这取决于你的意思。采取这个标记：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Test Case</title>
  </head>
  <body>
    <noscript id="ns">
    </noscript>
    <script>
      var ns = document.getElementById("ns");
      ns.innerHTML = "</noscript><img src='http://www.alohci.net/dummy'>";
    </script>
  </body>
</html> 
```

在 Firefox 中，这将导致`<img>`元素内有一个`<noscript>`元素，并且引用的图像是从服务器获取的。

笔记：
 1\. 我不知道为什么会这样。
 2\. 似乎只有 Firefox 能做到这一点。
 3\. 我想不出这个有什么用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T12:43:05.350

根据**[W3 规范](http://www.w3.org/TR/html4/interact/scripts.html#h-18.3.1)**：

> NOSCRIPT 元素允许作者在未执行脚本时提供替代内容。NOSCRIPT 元素的内容只能在以下情况下由可识别脚本的用户代理呈现： 用户代理被配置为不评估脚本。用户代理不支持由文档前面的 SCRIPT 元素调用的脚本语言。不支持客户端脚本的用户代理必须呈现此元素的内容。

所以我想就像你的测试证明的那样：`<noscript>`当客户端支持元素时，一个部分内的元素根本不会被渲染（即下载）`<script>`。

我还刚刚在我的一个页面上进行了测试，该页面内部使用了图像`<noscript>`，Chrome、FF、Opera 或 IE 都没有表现出对下载图像的兴趣。

# android - 使用osmDroid映射api的android映射

> ID：10162043
> 
> 赞同：0
> 
> 时间：2012-04-15T12:31:31.117
> 
> 标签：android, api, map, osmdroid

我想使用具有离线和在线功能的 osmDroid 映射 api 开发 android 映射应用程序，但我找不到很多关于它的教程，所以如果有人有任何链接到使用 osmdroid 映射 api 离线或在线的教程。我写了一个小应用程序只是为了显示来自默认提供程序的地图，但是应用程序运行但没有显示地图（仅显示）有什么问题？编码：

```
MapView map = new MapView(this, 256);
    map.setClickable(true);
    map.setBuiltInZoomControls(true);
    setContentView(map); 
```

控件显示出来了！！！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T14:06:06.890

它可能缺少平铺源。下面是我拥有的最小的代码示例，它将使用 osmdroid 向您显示 OSM 映射：

```
import org.osmdroid.tileprovider.tilesource.TileSourceFactory;
import org.osmdroid.util.GeoPoint;
import org.osmdroid.views.MapController;
import org.osmdroid.views.MapView;
import android.app.Activity;
import android.os.Bundle;

// This is all you need to display an OSM map using osmdroid
public class OsmdroidDemoMap extends Activity {

    private MapView         mMapView;
    private MapController   mMapController;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
            setContentView(R.layout.osm_main);
        mMapView = (MapView) findViewById(R.id.mapview);
        mMapView.setTileSource(TileSourceFactory.MAPNIK);
        mMapView.setBuiltInZoomControls(true);
        mMapController = mMapView.getController();
        mMapController.setZoom(13);
        GeoPoint gPt = new GeoPoint(51500000, -150000);
        //Centre map near to Hyde Park Corner, London
        mMapController.setCenter(gPt);

    }
}
/* HAVE THIS AS YOUR osm_main.xml
---------------------------------------------------------- XML START
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
    <org.osmdroid.views.MapView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent"
        android:id="@+id/mapview"
        ></org.osmdroid.views.MapView>
</LinearLayout>
---------------------------------------------------------- XML END
Include slf4j-android-1.5.8.jar and osmdroid-android-3.0.5.jar in the build path
(Google search for where to get them from)
*/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T07:46:01.113

或者可能缺少清单文件中的 INTERNET（或其他）权限？

[如何使用Jar](http://code.google.com/p/osmdroid/wiki/HowToUseJar)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-18T18:54:40.507

您还需要添加

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

到你的清单。Osmdroid 尝试缓存切片并在没有存储访问时失败。

# c# - 如何使用正则表达式删除一些没有特定属性的 css 属性？

> ID：10162046
> 
> 赞同：0
> 
> 时间：2012-04-15T12:31:46.967
> 
> 标签：c#, css, regex

示例：只保留颜色属性。

鉴于：

`<span style="margin-left: 2em;color: #008000;font-size:14px;">some text</span>`

输出：

`<span style="color: #008000;">some text</span>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T12:38:29.860

This answer was written on the assumption that JavaScript was being used. While this answer is still useful (under that assumption) the language has since been specified as C#. So this answer has become incorrect.

* * *

Given the HTML:

```
<span style="margin-left: 2em;color: #008000;font-size:14px;">some text</span> 
```

The following JavaScript should work (currently untested):

```
var spans = document.getElementsByTagName('span'),
    color;

for (var i=0,len=spans.length;i<len;i++){
    color = spans[i].style.color;
    spans[i].removeAttribute('style');
    spans[i].style.color = color;
}​ 
```

[JS Fiddle demo](http://jsfiddle.net/davidThomas/jjAP6/1/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T12:56:23.713

这是使用 Xml.Linq 的解决方案草图：

```
XElement Load(string xml)
{
    using (var reader = new StringReader(xml))
        return XElement.Load(reader);
}

string ProcessStyles(string input)
{
    var root = Load(input);
    var allElements = root.Descendants();
    var styleAttributes = allElements.Select(e => e.Attribute(XName.Get("style"))).Where(a => a != null);
    foreach (var styleAttribute in styleAttributes)
    {
        var value = styleAttribute.Value;
        var newValue = ProcessCss(value);
        styleAttribute.SetValue(newValue);
    }

    return root.ToString();
}

string ProcessCss(string value)
{
    var cssTokens = value.Split(';').Select(t => t.Trim());

    // implement your filtering rules here
    var filtered = cssTokens.Where(t => t.StartsWith("color"));

    return String.Join(";", filtered);
} 
```

该解决方案假定“样式”属性的某些结构。它不适用于更复杂的 CSS（例如，带有注释）。

另请注意，输入字符串必须是格式良好的 XML 文档。（HTML5 通常不必是格式良好的 XML）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T11:47:54.517

如果您确实想使用正则表达式来完成这项工作，这里有一些代码片段；但我仍然建议你用`style`object 来处理这个问题。

搜索`style=\"[^\"]*?([cC]olor:\s#[0-9a-fA-F]{1,6};?)[^\"]*?\"`

用。。。来代替`style="$1"`

# javascript - 无法在 jQuery 选择器中使用变量

> ID：10162048
> 
> 赞同：0
> 
> 时间：2012-04-15T12:32:18.297
> 
> 标签：javascript, jquery, selector, lightbox

我已经尝试解决这个问题很长时间了。我不知道我做错了什么。

我知道您可以在 jQuery 选择器中使用变量并且它可以工作，如下所示：

```
var dude = "_world";
 $("#hello" + dude).hide(); 
```

所以我想在这段代码中将它用于 jQuery 灯箱：

```
$(document).ready(
function()
{
    $('.gallery_image_preview').click(
    function(e)
    {
        id = e.target.id;
        $('#lightbox_background').fadeIn();

        $(".lightbox_content#image_" + id).fadeIn();

    });

    $('.lightbox_content').find('.lightbox_close').click(
    function()
    {
        $('#lightbox_background, .lightbox_content').fadeOut();
    });

}); 
```

它基本上用图像为 div 设置动画。但是，我无法让它工作。当我用数字替换“id”变量时，它的工作方式与预期的一样，但该变量似乎没有返回任何值。

任何帮助，将不胜感激。我花了几个小时在这个上:)

请记住，我是一名初学者，正在成为一名伟大的程序员。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T12:34:56.877

选择器`".lightbox_content#image_" + id`永远不会有意义。如果您有带有“id”值的图像，您只需要`"#image_" + id`. 只有当“lightbox_content”元素本身具有您要查找的 id 时，您现在所拥有的才有效。您可以在“#”之前放置一个空格，但这（可能）毫无意义。（查看您的实际 HTML 将有助于确认这一点。）

但是，由于您已经获得了对目标 DOM 元素的引用（在`this`和中`e.target`），您可以直接使用它：

```
 $(this).fadeIn(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T12:43:10.457

首先，您不需要通过在其前面添加类名来过滤您的 id 选择器，它不会提高性能。你也做错了，可能这就是它失败的原因。

要么做：

```
$("#image_" + id).fadeIn();  // the correct way

or

$(".lightbox_content #image_" + id).fadeIn();  //which will work but is useless prepending the class selector 
```

见：http: [//jsfiddle.net/KpUZX/](http://jsfiddle.net/KpUZX/)

同样从您的评论中，问题可能出在检索 id 上。您为什么不尝试：

```
id = $(this).attr("id"); 
```

# collections - rdf:sparql 中的集合

> ID：10162052
> 
> 赞同：6
> 
> 时间：2012-04-15T12:33:23.787
> 
> 标签：collections, rdf, sparql, semantic-web

我在 RDF 文件中有一个`rdf:collection`. 当我有一个作者的集合时，以下查询不返回任何内容。但是，该查询适用于两个或多个作者，但只返回两个作者。我能做些什么来写出所有作者？

```
<bibo:authorList rdf:parseType="Collection">
 <rdf:Description rdf:about="http://openlibrary.org/authors/OL113143A"/>
 <rdf:Description rdf:about="http://openlibrary.org/authors/OL6784959A"/>
</bibo:authorList> 
```

```
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX dc: <http://purl.org/dc/terms/>

select ?title ?author ?author2
where { 
  ?x dc:title ?title . 

  ?x bibo:authorList ?object.
  ?object rdf:first ?name. 
  ?name rdf:value ?author.

  ?object rdf:rest ?object2.
  ?object2 rdf:first ?name2.
  ?name2 rdf:value ?author2 . 
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T14:55:58.023

您的问题是您正在尝试进行半递归，因此您的结果会因 RDF 列表的长度而异。所写的查询仅适用于长度为 2 或更长的列表，长度为 1 的列表将不起作用，因为您的查询的第二部分将没有任何匹配项。

如果你想访问一个集合，最好的方法是使用这样的属性路径（需要 SPARQL 1.1）：

```
SELECT * WHERE
{
  ?list rdf:rest*/rdf:first ?member .
} 
```

您可以调整此通用模式以适应您认为合适的查询。

# c# - DataGridView + DataTable，处理大量列表的最佳方式？

> ID：10162054
> 
> 赞同：0
> 
> 时间：2012-04-15T12:33:50.987
> 
> 标签：c#, datagridview, datatable

我有一个 DataTable 将包含大约几千行，每行大约有 20 个字段。

此外，单元格中的值将实时更改。此外，一些行将在运行时被删除，一些行将被添加。

**我面临的第一个问题**是，当我打开应用程序并调用 DataGrid.DataSource = .. DataGrid 最初不显示数据时，我必须最小化应用程序，然后将其重新打开以显示数据，为什么会这样？

**第二个问题**是每一行都会从一个单独的线程中更新。我不断收到“索引损坏”异常，然后我发现我无法从单独的线程更新数据表，因此我创建了一个包含所有单元格的类，创建了列表并让线程直接更新类数据，然后另一个单线程更新数据表，这似乎工作正常，但有没有更好的方法呢？

基本上我需要一个DataGrid，它支持几千行，这些行将被实时更新/删除/添加（通过线程，而不是用户）。实现这一目标的最佳方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T12:56:07.770

摆脱数据表将是我的第一个想法，如果您想将线程（或其他任何人）完成的所有这些更改应用到后端，那么您真正需要它的唯一时间。

这个列表类你敲了。如果你得到它来实现 IList，你可以像它是一个 DataTable 一样绑定它

一旦你控制了使用你的类而不是 DataTable，你可以查看 BindingNotifications 的时间和方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T13:01:58.263

UI 未更新的第一个问题可以（可能）通过更新`DataGridView`using来解决`myDataGridView.Update()`，这将仅刷新/更新此控件，并且比刷新整个表单更有效（我假设您正在使用 WinForms）。

第二个问题的解决方案取决于您采用哪种线程（您没有说明）。`DataGridView`假设您使用的是 TPL，则可以使用[`TaskSheduler`](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28SYSTEM.THREADING.TASKS.TASKSCHEDULER%29%3bk%28TargetFrameworkMoniker-%22.NETFRAMEWORK%2cVERSION%3dV4.0%22%29%3bk%28DevLang-CSHARP%29&rd=true)您在单独线程上运行的方法中的 so将数据插入到

```
Task.Factory.StartNew(() =>
    {
        source1.DataSource = dtAll;
        dataGridView1.DataSource = source1;
    }, CancellationToken.None, TaskCreationOptions.None, _uiScheduler); 
```

其中`TaskScheduler`是通过 UI 线程定义的

```
TaskScheduler _uiScheduler = TaskScheduler.FromCurrentSynchronizationContext(); 
```

并传递给您的异步方法。我希望这有帮助。

# php - 搜索 XML 项目 PHP XPath

> ID：10162057
> 
> 赞同：2
> 
> 时间：2012-04-15T12:34:08.810
> 
> 标签：php, xml, search, xpath

我有一个 XML 文档：

```
 <items>
     <item>
     <id>1</id>
     <title>Title ABC Defg</title>
     <author>Author Name</author>
     <description>Description text </description>
     </item>
     ...
     </items> 
```

我想做一个搜索并检查标题、作者、描述是否包含短语

我不知道如何立即执行并按相关性排序。但它并不像搜索“Word”和“word”那么重要。我使用了php代码：

```
 <?php
    $xml=simplexml_load_file(file.xml); 
    $query=$_GET['query'];
    $nodes= $xml->xpath("//item[contains(title,'$query')]");

    $count = count($nodes);
    for ($i=1;$i<=$count;$i++){

    $nodes= $xml->xpath("//item[contains(title,'$query')][$i]"); 
    foreach($nodes as $node) {
    $title = $node->title;
    $desc= $node->description;
    $auth= $node->auth;
    $id= $node->id;
    echo "id: $id<br />title: $title<br />author: $auth<br />desc: $desc<p>&nbsp;</p>
    ?> 
```

我知道它只搜索标题，但问题是当我搜索 Word 时它找不到单词，我想同时获得：单词和 Word

如果您还可以帮助我在作者标题和描述中“连接”搜索并以某种方式订购它，我真的会很高兴。

编辑：

我已经设法搜索所有标签（不仅指定，而且对我来说还可以）

所以我有这样的代码：

```
 $query=strtolower(rawurldecode($_GET['s']));
    $nodes= $xml->xpath("//item[contains(translate(., 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz'),'$query')]") // . - all i suppose 
```

我也使用 $query 的一种验证

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T13:52:30.910

所以你想知道，如何选择`<items><item>`包含使用 xpath 搜索的文本的元素的所有子元素（我不区分大小写，你可以在链接的答案中找到）。首先，所有项目元素：

```
//items/item 
```

你已经有了。要仅返回包含某些文本的内容，请添加谓词：

```
//items/item[contains(., 'XYZ')] 
```

如果您只想在`<title>`子元素中搜索：

```
//items/item[contains(title, 'XYZ')] 
```

这基本上是你已经拥有的，但是你让你的生活变得不必要地困难：你不需要这样做两次，你可以直接迭代匹配：

```
$nodes = $xml->xpath("//items/item[contains(title, 'XYZ')]");
foreach ($nodes as $node)
{
    foreach ($node as $name => $prop) {
        printf("%s: %s\n", $name, $prop);
    }
    echo "\n";
} 
```

输出：

```
id: 3
title: Title XYZ
author: Author Name
description: Description text 
```

要了解如何将输入转义到 xpath（它是只读的，因此它不像 SQL 注入那样危险），请考虑以下示例：

```
$query = 'XYZ';
$expression = sprintf("//item[contains(title,'%s')]", $query);
$nodes = $xml->xpath($expression); 
```

它将创建以下表达式：

```
//item[contains(title,'XYZ')] 
```

但是如果那里有一些单引号会发生什么？它将终止字符串并因此产生错误：

```
$query = 'd\'oh'; 
```

会给：

```
Warning: SimpleXMLElement::xpath(): Invalid expression in ... 
```

[您可以通过在此处进行概述](https://stackoverflow.com/q/642125/367456)来防止这种情况，特别是为文档分配值并与之进行比较：

```
$query = 'd\'oh';
$xml['query'] = $query;
$nodes = $xml->xpath("//item[contains(title, /*/@query)]"); 
```

* * *

**旧：**你一次问多个问题：

1.  如何使用不区分大小写的 xpath 进行搜索
2.  如何找出相关性（因此按相关性对其进行排序）

相关性未定义。对一个人可能相关的内容可能对其他人无关，因此如果没有关于如何衡量相关性的具体定义，很难回答您问题的这一部分。

对于不区分大小写的搜索，已经链接了重复的问题，因此您应该可以这样做。我眼中最好的第一次重复：

*   [php中不区分大小写的xpath搜索](https://stackoverflow.com/q/3238989/367456)

但在这里，下限和上限的情况仍然未定义。您还没有指定一件事，因此您的问题无法真正得到回答。

此外，您并没有真正验证您的输入：

```
$query = $_GET['query'];
$nodes = $xml->xpath("//item[contains(title,'$query')]"); 
```

可以使用 GET 参数在此处注入 xpath。小心，否则你根本不会做任何搜索。

# c# - Linq“类型不支持序列运算符”异常

> ID：10162060
> 
> 赞同：2
> 
> 时间：2012-04-15T12:35:14.727
> 
> 标签：c#, linq, linq-to-sql

我正在尝试编写一个填充 dataGridView 的 linq 查询：

```
dataGridViewNorthWind.DataSource = (from products in dc.Products where 
         products.ProductName.StartsWith("C") && products.ProductName.Contains('a') 
         select new { products.ProductName, products.Category }); 
```

但我得到一个“不支持类型字符串的序列运算符”异常。这里有什么问题？

PS。欢迎任何有关构建更好查询的提示，这是我第一次接触 Linq :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T12:39:59.793

我认为问题在于您不能以您希望的方式使用 Contains 方法。但是，你可以试试这个，我将 Contains 方法的参数从 char 更改为 string

```
dataGridViewNorthWind.DataSource = (from products in dc.Products where 
         products.ProductName.StartsWith("C") && products.ProductName.Contains("a") 
         select new { products.ProductName, products.Category }); 
```

# php - php deprecation magic_quotes 错误不会消失

> ID：10162063
> 
> 赞同：0
> 
> 时间：2012-04-15T12:35:47.977
> 
> 标签：php, apache2, debian, magic-quotes-gpc

我知道不久前还有另一个话题，但那里从来没有真正可靠的答案。

我正在运行 Debian 6、Apache 2.2 和 PHP 5.3.3。当我查看服务器上的 phpinfo() 输出时，它显示 magic_gpc_quotes 设置为关闭。尽管每次有人访问页面时，我的 error.log 文件都会收到此错误的垃圾邮件。

我已经搜索了每一个 .ini 文件，并且在其中的每一个文件中，magic_quotes_gpc 都设置为关闭。

我正在使用受 Suhosin 保护的 mod_fastcgi 和 php。我不确定其中任何一个是否会影响 magic_quotes_gpc 的行为，但我真的不知道该怎么做。任何解决此问题的帮助将不胜感激。

我也运行了 apt-get update 并且一切都是最新的。

运行`grep -r 'magic_quotes_gpc' /`返回 3 个 php.ini 文件，所有文件都显示`magic_quotes_gpc = off`

我认为可能是 mod_fastcgi 导致了这个问题，所以我禁用了我的脚本使用它，但仍然出现错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T16:40:45.433

检查某些 PHP 文件是否使用`set_magic_quotes_runtime()`.

# game-engine - 智能手机上的子弹物理？(安卓 / iPhone)

> ID：10162064
> 
> 赞同：1
> 
> 时间：2012-04-15T12:36:13.350
> 
> 标签：game-engine, gamekit, smartphone, game-physics, bulletphysics

这可以在智能手机（Android / iPhone）上实现吗？我认为这叫做子弹物理。

我的意思是在应用程序中实时。用户设置球，然后爆炸/破坏。

一定不能那么完美。简单的颜色。只有物理是重要的。

只有爆炸/破坏对我来说很重要。

[视频 1](http://youtu.be/pGn3kNCPpHk)

[视频 2](http://youtu.be/OPUAtihkiwM)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T22:43:16.180

我使用子弹物理开发 iOS 和 Android 应用程序（使用 Marmalade）。子弹物理没有“毁灭”

你必须把所有的部分放在一起，让它们睡觉

```
body->forceActivationState(ISLAND_SLEEPING); 
```

然后你用一个球射击，你就会得到这样的画面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T18:54:40.907

这绝对是可能的。这是一篇很好的文章，解释了如何为 iOS 开发设置 BulletPhysics：http: [//www.informit.com/articles/article.aspx? p=1914612](http://www.informit.com/articles/article.aspx?p=1914612)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T13:14:50.423

看起来你可以在 iPhone 上使用它[http://www.voyce.com/index.php/2011/11/18/creating-a-physics-based-opengl-ios-app/](http://www.voyce.com/index.php/2011/11/18/creating-a-physics-based-opengl-ios-app/)

我自己正在尝试找出如何让它工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-13T19:37:46.823

我刚开始在我的 Android 项目中使用 Bullet。关注此页面时设置相对简单：http: [//jackietutorial.blogspot.com/2013/05/how-to-port-bullet-for-android.html](http://jackietutorial.blogspot.com/2013/05/how-to-port-bullet-for-android.html)

如果此链接无效，您始终可以在网上搜索“bullet4droid”，这基本上是该文章中步骤的结果。

至于让 Fracturing 在 Android/iOS 上运行，我不明白为什么不这样做，尽管您可能需要根据设备的处理能力来限制分片的数量。

您可以在此处下载 Bullet： [https ://code.google.com/p/bullet/](https://code.google.com/p/bullet/)

我没有尝试过引擎附带的 VoronoiFractureDemo.cpp 文件，但理论上它应该在任何设备上执行相同的操作。你只需要调用你自己的绘图函数。

请注意，上面提到的教程是为以后的 2.X 版本设计的。看起来 3.X 的设计主要考虑了 OpenCL/硬件加速，所以我猜由于 Android/iOS 上缺乏对 OpenCL 的支持，它现在将不受支持。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-02T16:41:33.460

使用**Jbullet**（子弹的 java 端口）为 android [下载 jbullet](http://jbullet.advel.cz/)

# java - JTable 中第一个不必要的空行。如何删除它？

> ID：10162071
> 
> 赞同：1
> 
> 时间：2012-04-15T12:37:44.083
> 
> 标签：java, swing, null, jtable, row

当我编译我的程序时，它是第一行，它是空的。我认为这是Java中的默认设置。如何删除它？这是一个 MySQL 数据库客户端程序，我们可以在其中查看数据库中的数据。但这第一行很烦人。

```
String dbtime;
String query = "Select * FROM EMP";
String[][] celDatas = null;
String[] celNames = null;
try {
    // Load the JDBC driver
    String driverName = "org.gjt.mm.mysql.Driver"; // MySQL MM JDBC driver
    Class.forName(driverName);

    // Create a connection to the database
    String serverName = "localhost";
    String mydatabase = "TestyNaukalne";
    String url = "jdbc:mysql://" + serverName +  "/" + mydatabase; // a JDBC url
    String username = "root";
    String password = "";
    connection = DriverManager.getConnection(url, username, password);

    Statement stmt = connection.createStatement();
    ResultSet rs = stmt.executeQuery(query);
    ResultSetMetaData rsmd = rs.getMetaData();

    int NumOfCol = rsmd.getColumnCount();
    rs.last();
    int rowCount = rs.getRow();
    rs = stmt.executeQuery(query);
    celNames = new String[NumOfCol];
    celDatas = new String[rowCount+1][NumOfCol];

    for(int weq=1; weq<=NumOfCol; weq++) {
        System.out.println(rsmd.getColumnName(weq));                   
        celNames[weq-1] = rsmd.getColumnName(weq);
        int tmp = 1;
        while (rs.next()) {
            dbtime = rs.getString(weq);
            System.out.println(dbtime);
            celDatas[tmp][weq-1] = dbtime;
            tmp++;
        } //end while
        rs = stmt.executeQuery(query);                   
        System.out.println();
    }
} catch (ClassNotFoundException e) {
    e.printStackTrace();
} catch (SQLException e) {
    e.printStackTrace();
}

final JTable source = new JTable(celDatas,celNames);
        JScrollPane pane = new JScrollPane(source);
        pane.setSize(f.getSize().width-60,300);
        pane.setLocation(30,20); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T12:51:56.083

```
 int tmp = 1; // ******
        while (rs.next()) {
           dbtime = rs.getString(weq);
           System.out.println(dbtime);
           celDatas[tmp][weq - 1] = dbtime;
           tmp++;
        } // end while 
```

数组基于 0，使数组的 celDatas[0] 行为空。解决方案：不要那样做；将 tmp 初始化为 0。

# php - Every third post pull from excluded category. WordPress

> ID：10162073
> 
> 赞同：0
> 
> 时间：2012-04-15T12:38:22.490
> 
> 标签：php, wordpress

I was hoping for some advice on the following.

On my homepage, I want to list all posts from all categories except one (category 11) and insert category 11 posts each third post.

e.g.

> POST 1 (Post from category '2')
> 
> POST 2 (Post from category '7')
> 
> **POST 3 (Post from '11')**
> 
> POST 4 (Post from category '5')
> 
> POST 5 (Post from category '7')
> 
> **POST 6 (Post from '11')**
> 
> POST 7 (Post from category '7')
> 
> POST 8 (Post from category '1')
> 
> **POST 9 (Post from '11')**

It all needs to live within while posts for pagination etc.

Could someone advise on the best way to do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T13:15:16.660

您需要[多个循环](http://codex.wordpress.org/The_Loop#Multiple_Loops)来实现这一点。您必须创建另一个实例，`WP_Query`该实例将从类别 11 中获取帖子。然后，正常循环所有其他帖子，同时计数并检查是否显示类别 11 中的帖子。

```
$page_query_var = 'page';
$post_cat_10 = new WP_Query('cat=10' . '&paged=' . get_query_var($page_query_var));
$other_posts = new WP_Query('cat=-10' . '&paged=' . get_query_var($page_query_var));
for ($i = 1; $other_posts->have_posts(); $i++)
{
    if ($i % 3 === 0 AND $post_cat_10->have_posts())
    {
        $post_cat_10->the_post();
    }
    else
    {
        $other_posts->the_post();
    }
    the_title();
    the_content();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T13:15:18.557

您只需输出每个 POST 但数组中的数字可以除以 3。向您显示可能更容易：

```
<?php

//Make your SQL-statement within the $result variable

$i = 0;
while( $row = mysql_fetch_assoc($result)) {
    $i++;
    if( $i % 3 > 0) {
        $output[] = $row['COLUMN_NAME'];
    }
}

echo implode("<br>\n", $output);

?> 
```

# c# - .Net ReportViewer change textbox location runtime

> ID：10162075
> 
> 赞同：1
> 
> 时间：2012-04-15T12:38:51.450
> 
> 标签：c#, reportviewer

I'm using c# with visual studio 2008 and developing an application targeting framework 3.5

I have a reportviewer and using this report to print invoices. I need to be able change textboxes locations in runtime. Somehow i will let users to change layout of invoices so each user will be able print acording to their own printed papers designs ( each user has a different formatted prints, logos, company infos, signatures..). Implementing design user interface is out of my questions scope for now, but i need to be able say to *textBoxCompanyName* to position here, *textBoxCompanyAddress* here...

is this possible ?

# iphone - Facebook 通过对话框将消息发布到墙上

> ID：10162077
> 
> 赞同：-1
> 
> 时间：2012-04-15T12:38:58.807
> 
> 标签：iphone, objective-c, ios, cocoa-touch, facebook-graph-api

我正在为我的 iphone 应用程序使用新的 SDK FACEBOOK API 连接。使用此代码，我的字符串直接发布到墙上，没有任何对话框。

```
 NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               @"test message",  @"message",
                               nil]; 
 [facebook requestWithGraphPath:@"/me/feed" andParams:params andHttpMethod:@"POST" andDelegate:self]; 
```

我想在打开对话框登录的用户墙中发布一个简单的字符串，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T13:45:26.903

如果您想设置他的状态，认为您的 FB 应用程序不显示对话框，您可以这样做

```
NSString *message = @"some text";
NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:message, message,nil];                          
[fb requestWithGraphPath:@"me/feed" andParams:params andHttpMethod:@"POST" andDelegate:self]; //fb here is the FaceBook instance. 
```

并且您肯定会在用户登录并授权权限后执行此操作。

授权权限

```
if (![fb isSessionValid]) {
    NSArray *permissions = [[NSArray alloc] initWithObjects:@"user_likes", @"read_stream", nil];
    [fb authorize:permissions];
    [permissions release];
} 
```

**重要提示：** 如果您的意思是使用帖子对话框发布消息实际上那是不可能的，我遇到了同样的问题，我在 Facebook 文档中找到了这个

> 该字段旨在供用户表达自己。预先填写此字段会削弱用户语音的真实性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T13:07:31.320

用这个：

```
 [facebook dialog:@"feed" andParams:params andDelegate:self]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T16:03:36.857

不能在对话框中预填充用户文本区域，只能设置预填充帖子的消息、名称、链接、图片，但对话框会添加一个文本区域供用户添加附加消息，这是不可自定义的一点也不。

# java - 在 facebook usig facebook Graph API 中按阿拉伯语单词搜索

> ID：10162081
> 
> 赞同：0
> 
> 时间：2012-04-15T12:39:17.363
> 
> 标签：java, facebook, facebook-graph-api

我正在尝试开发一个在 Facebook 中搜索的应用程序。问题是，当使用阿拉伯语单词进行搜索时，我得到了不正确的结果（非阿拉伯语帖子）我尝试在使用以下编码（UTF-8、ISO-8859-6 和 Windows）将阿拉伯语单词传递给搜索 URL 之前对其进行编码-1256)，结果发生了变化，但仍然不正确。

以下是我使用的 JAVA 代码：

```
public JSONObject search(String strSearchPhrase, String strType) throws MalformedURLException, IOException {

    strSearchPhrase = URLEncoder.encode(strSearchPhrase, "ISO-8859-6");

    URL searchURL = new URL("https://graph.facebook.com/search?q=" + strSearchPhrase + "&type=" + strType + "&access_token=" + strAccessToken);

    URLConnection urlCon = searchURL.openConnection();

    BufferedReader buffReader = new BufferedReader(new InputStreamReader(urlCon.getInputStream()));

    String strInputLine;

    String strOutput = "";

    while ((strInputLine = buffReader.readLine()) != null) {
        strOutput = strOutput + strInputLine;
    }
    buffReader.close();
    Object objOutput = JSONValue.parse(strOutput);
    JSONObject jsonOutput = (JSONObject)objOutput;

    //return data;
    return jsonOutput;
} 
```

它适用于英语但不适用于阿拉伯语

任何帮助或想法将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T14:52:57.693

我不知道，我试过这个：

```
curl "https://graph.facebook.com/search?q=محمود‎&amp;type=user&access_token=xxxx" 
```

它似乎工作正常，所有结果都以这种形式出现：“\u0645\u062d\u0645\u0648\u062f”

当我尝试这个时：

```
curl "https://graph.facebook.com/search?q=bob&type=user&access_token=xxxx" 
```

结果有常规的英文字符。

我在想也许你的编码有问题，也许试试：

```
URL searchURL = new URL("https://graph.facebook.com/search?q=محمود‎&amp;type=" + strType + "&access_token=" + strAccessToken); 
```

那是将阿拉伯字符串硬编码到 url 中，检查是否有效。

# database - IBM DB2 管理服务器已激活，但未激活

> ID：10162082
> 
> 赞同：3
> 
> 时间：2012-04-15T12:39:27.893
> 
> 标签：database, db2

我正在使用 IBM db2 v 9.7。我尝试使用控制中心创建一个 DDL 脚本，它给出了一个错误，说 db 管理服务器处于非活动状态。但是，当我尝试使用 db2admin start 从 cmd 处理器启动它时，它说，它已经积极的。实际发生了什么？

谢谢

![在此处输入图像描述](../Images/f42fbe6ee1f18726bc57cf0e53958c29.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T04:40:58.667

您能否确认您的 services.msc 列表中的以下服务是否已启动？

1.  DB2 远程命令服务器
2.  DB2 管理服务

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T15:21:35.383

当我尝试从**控制中心**创建数据库时，我得到了同样的错误，但是当我尝试**从命令行**创建数据库时它可以工作！

![在此处输入图像描述](../Images/2c20d94eb49e55a9b73af5755316d047.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-22T17:50:41.700

使用以下命令重新创建 DAS 服务。我会帮你的

db2admin 停止、db2admin 删除、db2admin 创建、db2admin 启动

# java - 用模式设计风格的抽象方法定义抽象类

> ID：10162084
> 
> 赞同：0
> 
> 时间：2012-04-15T12:39:35.023
> 
> 标签：java, oop, abstract-class, abstract-methods

如何使用设计模式在抽象类中定义抽象方法，而某些方法方法可能会*覆盖*或更改其在子类中的行为？在这个例子中，`public abstract class GameCharacter`有`attack`一个应该是模式的方法（定义一些方法，`GameCharacter`一些留空，在子类中被*覆盖*）。

```
public abstract class GameCharacter{

public void attack(GameCharacter opponent){

while(opponent.hitPoints > 0 && this.hitPoints > 0){

// some abstract method which behavior can be *redefined* 
//if specific class is *overrides* 
// some of this functions
// it should be pattern design

public void doDamageToOpponent{ 

doAttackOne(){ .... }; // cannot change
doAttackTwo(); // can change, be overridden in child class

}

public void doDamageToThis{ // counterattack

doAttackOne(){ .... }; // cannot change
doAttackTwo(); // can change, be overriden in child class

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T12:47:07.640

我想你想要的是这样的：

```
public abstract class GameCharacter{

    protected abstract doAttackTwo();

    protected final doAttackOne() { ... implement here ... }

    ...
} 
```

`doAttackTwo()`必须由子类实现，`doAttackOne()`而不能被覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T12:45:37.327

如果您声明一个方法，因为`final`它不能在子类中被覆盖。当然，如果你不给一个方法一个定义，那么任何（具体的）子类都必须实现它。

# android - 仅更新一个 AppWidget 实例

> ID：10162086
> 
> 赞同：3
> 
> 时间：2012-04-15T12:39:42.027
> 
> 标签：android, android-appwidget

我正在创建带有可点击按钮的 Android 主屏幕小部件。单击按钮后，我将使用 SharedPreferences 中的数据更新 TextView。我不知道我做错了什么，但是在单击按钮后，每个小部件实例都会更新。如何更新仅单击的小部件？

测试小部件配置：

```
public class TestWidgetConfiguration extends Activity {
    Button confirm;
    EditText edit;
    int mAppWidgetId = AppWidgetManager.INVALID_APPWIDGET_ID;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setResult(RESULT_CANCELED);
        setContentView(R.layout.testwidgetconfiguration);

        confirm = (Button)findViewById(R.id.button1);
        confirm.setOnClickListener(confirmListener);

        edit = (EditText)findViewById(R.id.editText1);

        Intent intent = getIntent();
        Bundle extras = intent.getExtras();

        if(extras != null) {
            mAppWidgetId = extras.getInt(AppWidgetManager.EXTRA_APPWIDGET_ID, AppWidgetManager.INVALID_APPWIDGET_ID); 
        }

        if(mAppWidgetId == AppWidgetManager.INVALID_APPWIDGET_ID) {
            finish();
        }
    }

    private Button.OnClickListener confirmListener = new Button.OnClickListener() {
        @Override
        public void onClick(View v) {
            Intent resultValue = new Intent();
            resultValue.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, mAppWidgetId);

            SharedPreferences prefs = getSharedPreferences("prefs", 0);
            SharedPreferences.Editor editor = prefs.edit();
            editor.putInt("id:"+mAppWidgetId, Integer.parseInt(edit.getText().toString()));
            editor.commit();

            AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(TestWidgetConfiguration.this);
            TestWidget.updateAppWidget(TestWidgetConfiguration.this, appWidgetManager, mAppWidgetId);

            setResult(RESULT_OK, resultValue);
            finish();
        }
    };
} 
```

测试小部件：

```
public class TestWidget extends AppWidgetProvider {
    public static String ACTION = "TestAction";
    public static String URI_SCHEME ="ASD";

    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
        super.onUpdate(context, appWidgetManager, appWidgetIds);

        Toast.makeText(context, "onUpdate()", Toast.LENGTH_SHORT).show();
    }

    public static void updateAppWidget(Context context, AppWidgetManager appWidgetManager, int appWidgetId) {
        SharedPreferences prefs = context.getSharedPreferences("prefs", 0);
        int id = prefs.getInt("id:"+appWidgetId, 0);

        RemoteViews updateViews = new RemoteViews(context.getPackageName(), R.layout.testwidget);
        updateViews.setTextViewText(R.id.textView2, "[" + String.valueOf(appWidgetId) + "]" + id);

        Intent intent = new Intent(context, TestWidget.class);
        intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);
        intent.setAction(ACTION);

        PendingIntent pendingIntent = PendingIntent.getBroadcast(context, appWidgetId, intent, 0);
        //Uri data = Uri.withAppendedPath(
        //      Uri.parse(URI_SCHEME + "://widget/id/")
        //      ,String.valueOf(appWidgetId));
        //intent.setData(data);

        updateViews.setOnClickPendingIntent(R.id.button1, pendingIntent);
        appWidgetManager.updateAppWidget(appWidgetId, updateViews);

        Toast.makeText(context, "updateAppWidget(): " + String.valueOf(appWidgetId) + "\n", Toast.LENGTH_LONG).show();
    }

    @Override
    public void onReceive(Context context, Intent intent) {
        super.onReceive(context, intent);

        Toast.makeText(context, "onReceive()", Toast.LENGTH_SHORT).show();

        if (ACTION.equals(intent.getAction())) {
            int idd = 0;
            Bundle extras = intent.getExtras();

            if(extras != null) {
                idd = extras.getInt(AppWidgetManager.EXTRA_APPWIDGET_ID); 
            }

            Toast.makeText(context, "id: " + idd, Toast.LENGTH_SHORT).show();

            SharedPreferences prefs = context.getSharedPreferences("prefs", 0);
            int id = prefs.getInt("id:"+idd, 0);

            RemoteViews rv = new RemoteViews(context.getPackageName(), R.layout.testwidget);
            rv.setTextViewText(R.id.textView1, "lala" + id);

            ComponentName testWidget = new ComponentName(context, TestWidget.class);
            AppWidgetManager manager = AppWidgetManager.getInstance(context);
            manager.updateAppWidget(testWidget, rv);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-28T23:27:34.010

在`TestWidget#onReceive`更改以下行：

```
manager.updateAppWidget(testWidget, rv); 
```

到

```
manager.updateAppWidget(idd, rv); 
```

正如齐姆在评论中所写的那样，它不是**idd 。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-21T11:16:04.997

解决方案：

```
Bundle extras = intent.getExtras(); 
if(extras != null) { 
    idd = extras.getInt(AppWidgetManager.EXTRA_APPWIDGET_ID); 
} 

... 

manager.updateAppWidget(id, rv); // change 
```

# jquery - 页面加载时的jQuery背景颜色动画

> ID：10162089
> 
> 赞同：1
> 
> 时间：2012-04-15T12:40:09.150
> 
> 标签：jquery, jquery-animate, background-color

这可能非常简单且易于修复（或不可能），但我一直在尝试在页面加载时实现悬停效果。

我有一个带有 div 框的导航系统，以及以下 jQuery 以在悬停时为其背景颜色设置动画：

```
<script type="text/javascript" src="http://jqueryjs.googlecode.com/files/jquery-1.3.2.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js"></script>

<script type="text/javascript">
var $jq = jQuery.noConflict();  
/* Menu buttons fade */
      $jq(document).ready(function() {
                $jq("#box").hover(function() {
                $jq(this).stop().animate({ backgroundColor: "#FF9933"}, 400);
                },function() {
                $jq(this).stop().animate({ backgroundColor: "navy" }, 400);
                });

      $jq("#box2").hover(function() {
                $jq(this).stop().animate({ backgroundColor: "#9DE263"}, 400);
                },function() {
                $jq(this).stop().animate({ backgroundColor: "navy" }, 400);
                });

      $jq("#box3").hover(function() {
                $jq(this).stop().animate({ backgroundColor: "#0099FF"}, 400);
                },function() {
                $jq(this).stop().animate({ backgroundColor: "navy" }, 400);
                });

      $jq("#box4").hover(function() {
                $jq(this).stop().animate({ backgroundColor: "#8B0099"}, 400);
                },function() {
                $jq(this).stop().animate({ backgroundColor: "navy" }, 400);
                });

      $jq("#box5").hover(function() {
                $jq(this).stop().animate({ backgroundColor: "#336666"}, 400);
                },function() {
                $jq(this).stop().animate({ backgroundColor: "navy" }, 400);
                });
      });
</script> 
```

然而，我想要做的是重复相同的效果，但是它发生在页面加载时 - 一个动画紧随其后。一个很好的例子是[css-tricks](http://css-tricks.com/) - 导航栏按钮颜色动画一个接一个。

谁能帮我吗？

谢谢！

mlazim14

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T13:11:22.857

也许像这样的东西就是你要找的东西：

```
var $jq = jQuery.noConflict();

$jq(document).ready(function() {
    var colors = ["", "#FF9933", "#9DE263", "#0099FF", "#8B0099", "#336666"];

    $jq("[id^='box']").hover(function() {
       $jq(this).stop().animate({ backgroundColor: colors[this.id.replace('box','')]}, 400);
    },function() {
       $jq(this).stop().animate({ backgroundColor: "navy" }, 400);
    });
}); 
```

[小提琴](http://jsfiddle.net/adeneo/qwp49/)

请注意，像这样的彩色动画需要 jQuery UI，或者最好只需要更小的彩色动画脚本。

编辑：要使盒子在加载时动画，请执行以下操作：

```
$jq("[id^='box']").each(function() {
      $jq(this).stop().delay(time).animate({ backgroundColor: colors[this.id.replace('box','')]}, speed, function() {
          $jq(this).stop().animate({ backgroundColor: "navy" }, speed);
      });
      time=time+(speed*2);
}); 
```

[小提琴](http://jsfiddle.net/qwp49/1/)

# ruby-on-rails - 开发中的rails服务管理？（工头没有启动所有服务）

> ID：10162097
> 
> 赞同：0
> 
> 时间：2012-04-15T12:40:55.800
> 
> 标签：ruby-on-rails, service, ruby-on-rails-3.2, god, foreman

我的工头 gem 没有加载我所有的服务。这是我的 Procfile：

```
search: redis-server
search: bundle exec rake resque:start  &&> log/resque_worker_queue.log
search: bundle exec rackup private_pub.ru -s thin -E production & &> log/private_pub.log
search: bundle exec rake sunspot:solr:run 
```

是否有可能解决这个问题或者即使在开发模式下我也应该更好地使用 GOD gem？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T20:35:28.950

进程类型都必须具有唯一的名称。从您看来`Procfile`，您已经命名了所有进程`search`。尝试以下作为您的 Procfile：

```
redis:  redis-server
worker: bundle exec rake resque:start  &&> log/resque_worker_queue.log
web:    bundle exec rackup private_pub.ru -s thin -E production & &> log/private_pub.log
solr:   bundle exec rake sunspot:solr:run 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T09:02:54.650

您需要指定有关未加载哪些服务以及错误/控制台输出的更多详细信息。

问题很可能是您正在后台启动进程（使用该`&`选项），而工头不支持这一点（请参阅[此 wiki 页面](https://github.com/ddollar/foreman/wiki/Process-immediately-terminating)。此外，最好（至少对于开发）不将输出重定向到日志文件 - 工头以一种很好的方式为您处理日志输出。

我也相信你需要使用`resque:work`而不是`resque:start`.

你可以试试这个：

```
redis:  redis-server
worker: QUEUE=* bundle exec rake resque:work
web:    bundle exec rackup private_pub.ru -s thin -E production
solr:   bundle exec rake sunspot:solr:run 
```

如果其中任何一个仍然不起作用，请检查如果您直接在控制台中使用它们，这些命令是否有效，并且它们是否停留在前台。

# android - 在 Eclipse 上调试 Android 应用程序时出错

> ID：10162099
> 
> 赞同：0
> 
> 时间：2012-04-15T12:41:09.890
> 
> 标签：android, eclipse, compiler-errors

每当我创建一个新的 Android 应用程序并使用 Eclipse 对其进行调试时，都会返回以下错误：

```
[Emulator] unknown option: -n 
```

问题是我不知道它为什么通过-n。有没有办法查看 Eclipse 试图输入控制台的内容，以便让我纠正这个错误？

编辑：我意识到在首选项中，默认参数是“-n 最新”。我不知道为什么会这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T15:00:57.107

我刚刚发现了问题。这是因为 Android SDK 设置的默认设置。我找到了改变它的方法。

# ruby-on-rails - 具有祖先的模型的 Rails 路线

> ID：10162105
> 
> 赞同：1
> 
> 时间：2012-04-15T12:42:06.680
> 
> 标签：ruby-on-rails, routes, ancestry

我有一个模型类别：

```
class Category < ActiveRecord::Base
  has_many :item_categories, :dependent => :destroy
  has_many :items, :through => :item_categories
  has_ancestry
end 
```

和型号项目：

```
class Item < ActiveRecord::Base
  has_many :item_categories, :dependent => :destroy
  has_many :categories, :through => :item_categories, :uniq => true
end 
```

我使用这个宝石 - [https://github.com/stefankroes/ancestry](https://github.com/stefankroes/ancestry)

因此，网站上的 URL 可以是：

```
/category-slug/ - "categories#show"
/category-slug/subcategory-slug
/category-slug/subcategory-slug/subsubcategory-slug
/category-slug/item-slug - "items#show"
/category-slug/subcategory-slug/item-slug
/category-slug/subcategory-slug/subsubcategory-slug/item-slug 
```

这个网址的路线看起来如何？这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T16:26:57.353

我建议你这样解决问题：

```
/category1/ - "categories#show"
/category1/category2
/category1/category2/category3
/category1/item - "items#show"
/category1/category2/item
/category1/category2/category3/item-slug 
```

我会通过以下途径解决这个问题：

```
resources :categories do
  resources :categroies
  resources :items
end 
```

这给出了：

```
category_categroie GET /categories/:category_id/categroies/:id(.:format) {:action=>"show", :controller=>"categroies"}
     category_item GET /categories/:category_id/items/:id(.:format)      {:action=>"show", :controller=>"items"}
          category GET /categories/:id(.:format)                         {:action=>"show", :controller=>"categories"} 
```

这解决了以下六个问题：

```
/categories/1
/categories/1/categories/2
/categories/2/categories/3
/categories/1/item/4
/categories/2/item/5
/categories/3/item/6 
```

也许你可以让你的程序使用这个解决方案。

# ruby-on-rails - 在我的 Rails 应用程序中添加谷歌地图 - 需要帮助在不使用 Gem 的情况下开始 - 想编写自定义代码

> ID：10162107
> 
> 赞同：2
> 
> 时间：2012-04-15T12:42:36.347
> 
> 标签：ruby-on-rails, ruby, google-maps

我有一个带有列表数据库的 Rails 应用程序：其中包含坐标的地址。目前我使用 index 方法在应用加载时在主页上显示列表：

```
<h1>Listings</h1>

<table>
  <tr>
    <th>id</th>
    <th>Name</th>
    <th>Phone Number</th>
    <th>Latitude</th>
    <th>Longitude</th>
    <th>Cuisine</th>
  </tr>

<% count = 0 %>
<% @listings.each do |listing| %>

 <!--<%count = count.to_i + 1 %> -->
  <tr>
    <td><%= listing.id %></td>
    <td><%= listing.name %></td>
    <td><%= listing.telephone %></td>
    <td><%= listing.latitude %></td>
    <td><%= listing.longitude %></td>
    <td><%= listing.cuisine %></td>
    <td><%= link_to 'Details', listing %></td>
    <td><%= link_to 'Edit', edit_listing_path(listing) %></td>
    <td><%= link_to 'Delete', listing, confirm: 'Are you sure?', method: :delete %></td>
    <td><%= link_to 'Around', around_listings_path(:latitude => listing.latitude, :longitude => listing.longitude) %></td>
    <td><%= link_to 'Menus', %></td>
    </tr>
<% end %>
</table>

<br />

<%= link_to 'New Listing', new_listing_path %>

<br/>
    <%= debug(params) if Rails.env.development? %>
    <br/> 
```

我想做的是添加一个在地图上显示列表的新页面。关于从哪里开始的任何建议？我对Javascript不是很熟悉，我想我可能必须知道吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T13:07:49.460

首先，为什么要使用纬度和经度？我不会对必须在其上输入有关我的列表的详细信息的页面有很好的看法。

也就是说，让我解释一下使用谷歌地图的最简单方法。

只需使用带有此链接的图像标签作为`src`

`https://maps.googleapis.com/maps/api/staticmap?center=#{address}&zoom=14&size=300x300&markers=#{address}&sensor=false`

在哪里`address`，`51+Wall+St, NY`或者无论它在哪里。您只需将空格替换为地址中的加号。请注意，我还使用带有`&markers=`的标记来标记标记的位置。

现在关于那个 javascript，您可能想在地址更改（或纬度或经度）时更改图像。

这很容易用 jQuery 完成。

假设您的地图图像是 this `<img id="map_image" src="https://maps.googleapis.com/maps/api/staticmap?center=51+Wall+Street,NY&zoom=14&size=300x300&sensor=false"/>`。

`src`如果地址更改的`img`某些文本输入，只需更改

```
$('input#listing_address').live('change',function(){
address = $(this).val().replace(/ /g,"+");
$('#map_image').attr("src","https://maps.googleapis.com/maps/api/staticmap?center=" + address + "&zoom=14&size=300x200&sensor=false");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T16:31:11.060

使用 gmaps4rails，它非常简单：

在控制器中：

```
def yourmap
  @json = YourModel.all.to_gmaps4rails
end 
```

在您看来：

```
<%= gmaps({"markers" => {"data" => @json , "auto_adjust"=>false, }}} ) %> 
```

它比我所展示的要多一些，但只是为了说明使用 gmaps4rails 的基本概念！YourModel 必须添加 lat 和 lon 属性。

# android - 适用于 Android 的 Galaxy Tab 模拟器

> ID：10162109
> 
> 赞同：0
> 
> 时间：2012-04-15T12:42:52.623
> 
> 标签：android, emulation

您如何为正确适合我的项目的 Galaxy 选项卡制作模拟器。这是 Eclipse 中 xml 中布局的图片... [http://s12.postimage.org/5xki5p43h/Correct_Tab.png](http://s12.postimage.org/5xki5p43h/Correct_Tab.png)这是我在模拟器中运行时的布局... [http： //postimage.org/image/iicfmxfpn/](http://postimage.org/image/iicfmxfpn/)。你知道为什么会这样吗？我将 traget 作为“GALAXY TAB Addon - API Level 8”运行，并且我使用的是内置皮肤

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T12:53:04.423

您安装了正确的模拟器并使用了正确的模拟器（如果您想要 7 英寸 Galaxy Tab）。只需要在 res 中添加一个新文件夹 drawable-xhdpi，因为 Galaxy Tab API Level 8 在运行时使用来自 drawable-xhdpi 的布局。不是来自drawable-hdpi。创建一个新文件夹添加尝试。

# c# - System.Windows.Forms.Keys.HasFlag 行为怪异

> ID：10162110
> 
> 赞同：1
> 
> 时间：2012-04-15T12:42:56.743
> 
> 标签：c#, .net

我有以下代码，旨在防止用户在备忘录文本编辑器中编写换行符：

```
private void m_commentMemoEdit_KeyDown(object sender, KeyEventArgs e)
{
    if (e.KeyData.HasFlag(Keys.Enter))
    {
        e.SuppressKeyPress = true;
    }
} 
```

它确实阻止了 Enter 被插入，但奇怪的是它也阻止了其他键被插入。到目前为止，我们发现键：'O'、'M'、'/' 和 '-' 也被“捕获”了。

更新：以下代码可以满足我的需要：

```
private void m_commentMemoEdit_KeyDown(object sender, KeyEventArgs e)
{
  if (e.KeyValue == (int)Keys.Return)
  {
    e.SuppressKeyPress = true;
  }
} 
```

但是我仍然不明白以前的代码不起作用，而这确实起作用。

我查看了`System.Windows.Forms.Keys`枚举，但没有找到任何线索（尽管我必须说这是一个构造奇特的枚举）。谁能解释为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T13:34:14.543

HasFlags() 继承自 Enum.HasFlags()。它对使用 [Flags] 属性声明的枚举很有用。它使用 & 运算符对位值进行测试。麻烦的是， Keys.Enter 不是标志值。它的值为 0x0d，设置了 3 位。因此，*任何*具有打开位 0、2 或 3 的值的键都将返回 true。与 Keys.O 一样，它的值为 0x4f。0x4f & 0x0d = 0x0d 所以 HasFlags() 返回真。

您应该只将它与实际代表标志值的键值一起使用。它们是 Keys.Alt、Keys.Control 和 Keys.Shift。请注意，这些是*修饰*键。因此，您可以使用 HasFlags 来查看 F 和 Ctrl+F 之间的区别。

要检测 Keys.Enter 你应该做一个简单的比较。正如你所发现的。请注意，您的 if() 语句也适用于 Alt+Enter 等，这可能不是您想要的。而是使用

```
if (e.KeyData == Keys.Return) e.SuppressKeyPress = true; 
```

仅当未按下任何修改键时才会抑制 Enter 键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T13:21:53.577

我怀疑它与`System.Windows.Forms.Keys`直接映射到键盘代码的枚举的基础值有关，它们并不总是相互排斥的。文档说你不应该对它们使用任何类型的按位运算，并举例说明为什么不这样做（[当心枚举上的 FlagsAttribute！](http://msdn.microsoft.com/en-us/library/system.windows.forms.keys.aspx)）。

[MSDN](http://msdn.microsoft.com/en-us/library/system.enum.hasflag.aspx)还说该`HasFlag`函数返回 this: 的结果`thisInstance And flag = flag`，因此您可以设置一个断点并查看输入的实际二进制代码，看看该操作是否会为您列出的键集提供一个 true。

最后，您更新的代码是做您想做的事情的正确方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T13:30:01.577

HasFlag 用于标志 - 这意味着是否设置了一个位

键值是一个序数值，因此与标志完全不同的是使用比较运算符，一切都应该没问题。

一些枚举字段被定义为标志，例如

```
enum SomeFlag
{
   BitOne = 1, 
   BitTwo = 2, 
   Bitthree = 4
}; 
```

在这里使用“HasFlag”是有意义的

# java - 在视图中同时实现 OnTouchListener 和 LongPressListener

> ID：10162111
> 
> 赞同：1
> 
> 时间：2012-04-15T12:43:03.497
> 
> 标签：java, android, android-view

我试图将多个听众添加到我的视图中。OnTouchListener 事件会被触发，但不会触发长按事件。有什么理由吗？我该如何解决？:)

这是我的来源：

```
bookFlipper.setOnLongClickListener(new OnLongClickListener() {
    public boolean onLongClick(View v){ //not fired
        Log.d(tag, "Long press invoked!");
        //selectText();
        return true;
    }
});

bookFlipper.setOnTouchListener(new View.OnTouchListener() {

    public boolean onTouch(View v, MotionEvent event){

        if(!menuShown && !selectionMode){
            bookFlipper.onTouchEvent(event);
        }

        switch(event.getAction()){

        case MotionEvent.ACTION_MOVE:
            if(selectionMode){

            }
            return false;
        case MotionEvent.ACTION_DOWN:
            lastDownX = event.getX();
            lastDownY = event.getX();
            touchingBook = true;
            break;
        case MotionEvent.ACTION_UP:
            touchingBook = false;
            if(!selectionMode){
                float diff = event.getX() / screenWidth;
                float diffOld = lastDownX / screenWidth;
                if(diff <= 0.33 && diffOld <= 0.33 && !menuShown){ // left
                    prevPage();
                }else if(diff >= 0.66 && diffOld >= 0.66 && !menuShown){// right
                    nextPage();
                }else if(diff < 0.66 && diff > 0.33 && diffOld < 0.66 && diffOld > 0.33){ // middle
                    showOverlay(!menuShown);
                }
            }
            break;
        default:
            break;
        }
        return false;
    }
}); 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-05T09:24:41.290

解决了这个使用`GestureDetectorCompat`

请参阅：[https ://developer.android.com/reference/android/view/GestureDetector.html](https://developer.android.com/reference/android/view/GestureDetector.html)

示例： [https ://developer.android.com/training/gestures/detector.html](https://developer.android.com/training/gestures/detector.html)

# mysql - 本地创建数据库时如何指定mySQL主机？

> ID：10162117
> 
> 赞同：1
> 
> 时间：2012-04-15T12:43:29.153
> 
> 标签：mysql, database, windows, host

连接到 mysql 数据库时，您通常会使用 --host=somehost。使用 mySQL 的 Windows 安装程序在本地创建数据库时，如何指定？是否可以？

我想澄清一下，我希望能够对其进行自定义 - 例如，我希望它类似于“CUSTOMNAME-HOST”，而不仅仅是“localhost”

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T13:23:09.277

这可以通过从您的操作系统更改主机文件来实现。

如果您使用的是 Windows 操作系统，请打开您的操作系统安装目录，然后：`Windows>System32>drivers>etc`

然后打开您的主机文件并将其更改`127.0.0.1 localhost` 为

```
127.0.0.1        CUSTOMNAME-HOST 
```

保存。

# javascript - 通过 jQuery 或 Js 禁用 Printscreen

> ID：10162120
> 
> 赞同：0
> 
> 时间：2012-04-15T12:43:45.957
> 
> 标签：javascript, jquery, flash

如何将图像放入我的网页并阻止用户将其保存在他们的计算机中？我需要阻止用户使用键盘上的 Print Screen 按钮并为我的 Flash 应用程序拍照……我如何使用 jQuery 或 JavaScript（或类似的东西）来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T13:13:58.333

我不确定如何阻止用户截屏。但是有一种方法可以防止右键单击并保存您的图像。不使用js，而是使用css。只需将图像设置为`background-image`而不是设置图像标签`src`。

我已经使用了一段时间了。这个对我有用。它有一些优点和缺点。

**优点：**

1.  仅当元素可见时，浏览器才会加载图像。它将节省您页面的初始加载时间。（我主要使用单页应用程序。所以，它对我有用。）

**缺点：**

1.  如果元素的图像也应设置相同的高度和宽度，如果您希望图像的分辨率与其相同。（我使用属性克服了这个问题`background-size`。见下文。但`background-size`浏览器支持不好。）

如果需要，用户仍然可以保存图像（使用一些开发人员工具 &&|| 等），但所有用户都不知道这一点。

您也可以使用`background-size: auto | contain | cover;`属性。

我希望这可以帮助你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T12:44:38.870

不幸的是你不能。它是操作系统的内置功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T12:44:55.093

可以肯定地说你不能。总是有可能阻止js中的右键单击，但这是你能做到的。

# php - Mysql查询失败让我失望

> ID：10162123
> 
> 赞同：1
> 
> 时间：2012-04-15T12:43:48.407
> 
> 标签：php, mysql, sql, database

在我在服务器上升级我的 mysql 版本之前，一切正常。

但现在它给出错误并显示查询失败。我没有改变任何代码。

```
SELECT id,frequency,speed FROM signal where active='Y' 
```

它在 from 子句中显示错误。为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T12:46:16.727

`SIGNAL`显然是[MySQL 的保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)。将其括在反引号中。

```
SELECT id,frequency,speed FROM `signal` where active='Y' 
```

每当我在`FROM`子句或其他地方遇到错误时，当查询似乎在语法上正确时，我会查阅保留字列表以查找我不知道已保留的内容（并且我承认我不知道`SIGNAL`已保留直到我检查了列表）。

一些研究尚未确定何时[`SIGNAL`](http://dev.mysql.com/doc/refman/5.5/en/signal.html)添加，但我怀疑它是在 MySQL 5.5 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T12:46:29.810

似乎您在 Mysql5.5 中升级，是 Mysql5.5`SIGNAL`中的新[保留关键字](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)。 您的表名在查询中`Escape`带有**反引号（`） 。**

试试下面：

```
 SELECT id,frequency,speed FROM `signal` where active='Y' 
```

# wpf - Windows 8 XAML 多列文本

> ID：10162125
> 
> 赞同：5
> 
> 时间：2012-04-15T12:44:12.947
> 
> 标签：wpf, xaml, windows-8, multiple-columns

有没有办法在文本中制作列？我有一个带有我必须显示的文本的大字符串，并且我有一个固定的文本块高度，并且必须使文本显示在列中。像这张图片：![在此处输入图像描述](../Images/7fb45448d2272e96f7d5e083cddc7cbd.png)

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T15:17:04.670

您是否查看过默认解决方案模板的“common”文件夹？IIRC 有一个名为 ColumnTextBlock （或类似名称）的控件，可以为您执行此操作。如果它不在您使用的默认模板中，请尝试创建一个新的网格应用程序并在其中查看 - 它在项目详细信息 XAML 页面中使用。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:38:36.997

该组件被调用`RichTextColumns`，它应该位于`Common`您的默认项目目录结构的文件夹中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-28T16:40:42.607

对于 Windows 8.1 查看 msdn 中的示例：

[http://code.msdn.microsoft.com/windowsapps/XAML-text-display-sample-2593ba0a/sourcecode?fileId=58034&pathId=615966648](http://code.msdn.microsoft.com/windowsapps/XAML-text-display-sample-2593ba0a/sourcecode?fileId=58034&pathId=615966648)

# django - 使用模型的 __unicode__ 作为管理表单中的搜索字段

> ID：10162129
> 
> 赞同：2
> 
> 时间：2012-04-15T12:45:05.130
> 
> 标签：django, django-models, django-admin

有没有办法将模型的**__unicode__**方法包含到**search_fields**元组中？我不想在模型中创建特殊字段来存储**__unicode__**的结果，因为这个值取决于其他几个模型......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T12:53:21.520

不，不可能，因为`search_fields`tuple中提到的字段是用来构造sql查询的

看[https://github.com/django/django/blob/master/django/contrib/admin/views/main.py](https://github.com/django/django/blob/master/django/contrib/admin/views/main.py)第349-370行

**UPD。**`__unicode__`好吧，您可以创建另一个字段并在那里存储方法的值。可能它看起来丑陋且效率低下，但这允许您过滤数据库列。给我更多信息`__unicode__`方法的外观。

**UPD2**您的`unicode`方法：

```
def __unicode__(self):
    return "%s%s%s%s-%s%s" % (
        self.factory.republic.code.upper(),
        self.factory.location.region and self.factory.location.region.code or '00', 
        self.factory.location.code, 
        self.factory.code, 
        self.kind.code, 
        self.code
    ) 
```

Django`search_fields`操作他的 ORM 方法，因此如果您无法执行 `Catalog.objects.filter(**lookup_queries)`，您将无法`search_fields`在管理员中执行此操作。很遗憾。

您`unicode`的方法非常具体，包含 6 个表和其他程序逻辑的连接。在 SQL 语言中搜索该字段会很复杂，并且不会使用索引。尝试将结果保存在 db 列中，并在相关字段也更新时进行更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T12:48:44.980

嘿，我最近确实需要类似的东西。如[本答案](https://stackoverflow.com/a/3730547/1211429) `search_fields` *中所述，仅适用于表示数据库中列的属性，而不适用于 properties*。

但是，如果您的`__unicode__`功能*取决于 [fields within] 其他几个模型*，请查看 [这个其他答案](https://stackoverflow.com/a/2106162/1211429)，它解释了如何在管理员 search_fields 中指定[相关字段搜索](https://docs.djangoproject.com/en/1.1/ref/contrib/admin/#django.contrib.admin.ModelAdmin.search_fields)，就像在 Django 查询集上一样。

# ruby - Ruby 数组切片，看不懂这个简单的代码片段

> ID：10162130
> 
> 赞同：0
> 
> 时间：2012-04-15T12:45:26.637
> 
> 标签：ruby, arrays

> **可能重复：**
> [Ruby 中的数组切片：寻找不合逻辑行为的解释（取自 Rubykoans.com）](https://stackoverflow.com/questions/3568222/array-slicing-in-ruby-looking-for-explanation-for-illogical-behaviour-taken-fr)

我有一个简单的数组对象：

```
array = [:peanut, :butter, :and, :jelly] 
```

它的长度显然是 4！

现在，看看这些陈述：

```
array[4,0] == []
array[5,0] == nil 
```

从第 4 个索引开始切片数组，它返回一个空数组，但从第 5 个元素开始，它返回 nil。为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T13:30:01.160

实际上，您发现“奇怪”的事情的原因应该始终在于源代码。[我只是从https://github.com/ruby/ruby/blob/trunk/range.c](https://github.com/ruby/ruby/blob/trunk/range.c)中挑选相关的片段

```
...
if (beg < 0) {
beg += len;
if (beg < 0)
    goto out_of_range;
}
if (err == 0 || err == 2) {
if (beg > len)
    goto out_of_range;
if (end > len)
    end = len;
}
... 
```

在这里，如果起始索引`beg`小于 -length，则返回 out of range `Qnil`。否则，如果起始索引大于数组的长度（`len`在代码片段中），它也会返回超出范围（`Qnil`）。注意这里，它大于不大于或等于，这就是为什么你得到`[]`（虽然`array[4,0]`4 超出范围）但是`nil``array[5,0]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T13:16:35.843

有一秒钟，我以为你发现了一个错误，但我想我可以解释这种行为。您给出的起始索引在该索引处的元素**之前**`slice`被考虑。所以 index被认为是数组的**最后**（就在 index 之前，就在 index 之后）。下面的例子应该清楚地说明：**`4`**`4``3`****

 ****```
> [1,2,3,4][0, 3]
 # => [1, 2, 3] 
> [1,2,3,4][1, 3]
 # => [2, 3, 4] 
> [1,2,3,4][2, 3]
 # => [3, 4] 
> [1,2,3,4][3, 3]
 # => [4] 
> [1,2,3,4][4, 3]
 # => [] 
> [1,2,3,4][5, 3]
 # => nil 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T12:50:54.997

`slice(start, length)`（这是访问时调用的方法）返回一个从 index 开始`array[]`的长度数组。这就解释了为什么return 。`length``start``array[4,0]``[]`

但是，这种方法存在一个极端情况。[slice 的 Ruby 文档](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-slice)说：

> 如果索引（或起始索引）超出范围，则返回 nil。

在您的第二个示例`5`中，超出了`array`. 这会导致方法返回`nil`。****

# c# - 限制在 WPF 中扩展 TreeNode 时 TreeView 的深度

> ID：10162132
> 
> 赞同：4
> 
> 时间：2012-04-15T12:45:41.020
> 
> 标签：c#, wpf, xaml, treeview

我正在使用通过 MVVM 绑定到我的类的 WPF TreeView 来显示大量多级数据。因此，当我展开 TreeNode 时，需要一些时间和大量内存。

我认为，内存需求来自于 TreeView 侦察出的节点，而不仅仅是第一代的孩子，迫使这些节点加载数据。

有没有办法将这种“侦察”行为限制在第一代子节点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T17:01:01.977

WPF 仅在显示 TreeViewItem(s) 时才生成它们，即在其父项展开之前不会生成任何项目。所以，我认为问题不在于“侦察”。

无论如何，您可以尝试通过使用 TwoWay Binding 添加与 TreeViewItem.IsExpanded 的同步来在 ViewModel 中实现动态加载。看看[这个](https://stackoverflow.com/questions/4756657/lazy-loading-in-tabcontrols-mvvm/4756755#4756755)。您可以对 IsExpanded 属性使用相同的解决方案。不要忘记添加假项目来告诉 TreeViewItem 它是可扩展的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T17:46:06.353

检查 TreeView 是否正在使用 VirtualizingStackPanel。我相信它在 .NET 4.0 中默认使用，但您必须在以前的 .NET 版本中显式设置它。

有关更多信息，请参阅[如何：提高 TreeView 的性能](http://msdn.microsoft.com/en-us/library/cc716882.aspx)。

# mysql - mysql SUM(column) 不会对列联合上的元素求和

> ID：10162134
> 
> 赞同：0
> 
> 时间：2012-04-15T12:46:28.597
> 
> 标签：mysql, sum, union

谁能告诉我为什么这段代码：

```
SELECT t.prob FROM 
(SELECT e1.evaled/IFNULL(NULLIF(e2.total,0),1) AS prob FROM 
    (SELECT COUNT(*) AS evaled FROM els WHERE evals=0) AS e1 
     INNER JOIN (SELECT COUNT(*) AS total FROM els) AS e2) AS t
 UNION ALL (SELECT e1.evaled/IFNULL(NULLIF(e2.total,0),1) AS prob FROM 
    (SELECT COUNT(*) AS evaled FROM els2 WHERE evals=0) AS e1 
     INNER JOIN (SELECT COUNT(*) AS total FROM els2) AS e2)
 UNION ALL (SELECT e1.evaled/IFNULL(NULLIF(e2.total,0),1) AS prob FROM 
    (SELECT COUNT(*) AS evaled FROM els3 WHERE evals=0) AS e1 
     INNER JOIN (SELECT COUNT(*) AS total FROM els3) AS e2); 
```

产生与此相同的输出而不是“概率”的总和？

```
SELECT SUM(t.prob) FROM 
(SELECT e1.evaled/IFNULL(NULLIF(e2.total,0),1) AS prob FROM 
    (SELECT COUNT(*) AS evaled FROM els WHERE evals=0) AS e1 
     INNER JOIN (SELECT COUNT(*) AS total FROM els) AS e2) AS t
 UNION ALL (SELECT e1.evaled/IFNULL(NULLIF(e2.total,0),1) AS prob FROM 
    (SELECT COUNT(*) AS evaled FROM els2 WHERE evals=0) AS e1 
     INNER JOIN (SELECT COUNT(*) AS total FROM els2) AS e2)
 UNION ALL (SELECT e1.evaled/IFNULL(NULLIF(e2.total,0),1) AS prob FROM 
    (SELECT COUNT(*) AS evaled FROM els3 WHERE evals=0) AS e1 
     INNER JOIN (SELECT COUNT(*) AS total FROM els3) AS e2); 
```

（代码基本上为三个表 els、els2 和 els3 中的每一个创建一个仅包含一个值的列 prob，然后将它们中的三个组合成一个列，我希望从中得到它的 3 个元素的总和）

我想出了这个其他代码。它有效，而且是一个更清晰的陈述，所以没关系：

```
SELECT SUM(t.evaled/IFNULL(NULLIF(t.total,0),1)) as sumatory FROM
(SELECT evaled,total FROM
 (SELECT COUNT(*) AS evaled FROM els WHERE evals=0) AS e1 
     INNER JOIN (SELECT COUNT(*) AS total FROM els) AS e2
UNION ALL SELECT * FROM
 (SELECT COUNT(*) AS evaled FROM els2 WHERE evals=0) AS e1 
     INNER JOIN (SELECT COUNT(*) AS total FROM els2) AS e2
UNION ALL SELECT * FROM
 (SELECT COUNT(*) AS evaled FROM els3 WHERE evals=0) AS e1 
     INNER JOIN (SELECT COUNT(*) AS total FROM els3) AS e2) as t; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T13:10:07.713

不知道你的解决方案出了什么问题，但我想我明白了你想要达到的目标。像这种方法怎么样：

```
SELECT 
 (SELECT COUNT(*)/(SELECT COUNT(*) FROM els) AS evaled FROM els WHERE evals=0)
 +
 (SELECT COUNT(*)/(SELECT COUNT(*) FROM els2) AS evaled FROM els2 WHERE evals=0) 
 +
 (SELECT COUNT(*)/(SELECT COUNT(*) FROM els3) AS evaled FROM els3 WHERE evals=0)
 /3 
```

编辑：如果你想要平均，我猜你`/3`最后需要一个..

# php - 如何为比价网站匹配类似产品

> ID：10162136
> 
> 赞同：3
> 
> 时间：2012-04-15T12:46:30.073
> 
> 标签：php, mysql, comparison, match, product

我正在开发一个小型价格/产品比较网站，它是一个与笔记本电脑和平板电脑相关的利基网站，内置 php。

我的问题/问题是如何执行以下操作：“匹配来自不同商家的类似产品”。我的意思是，当产品有 EAN/ISBN 时，一个简单的 %LIKE% 就可以做到。但是我得到的数据馈送中有很多产品缺少 ean 或任何其他唯一 ID。比价网站如何处理这个问题？

我正在考虑搜索产品名称之间的字符串相似性，但我不想匹配： **Acer iconia tab a500**

和**acer iconia tab a500 机箱**为同类产品。有任何想法吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T13:24:24.317

要进行比较，您必须为产品添加一些标签。当人们搜索产品时，列出具有相同标签的其他产品。

例如：对于笔记本电脑，标签如笔记本电脑、宏碁、14 英寸、500 美元（价格）等。

因此，当有人搜索笔记本电脑时，请列出所有笔记本电脑。这样他就可以选择其中的两个。并进行比较。

希望你明白这个概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T14:26:15.740

我遇到了类似的问题。有不同的解决方案。

您可以使用一些搜索技术（全文搜索引擎可能会有所帮助）或使用一些数据挖掘方法（查看用于识别品牌、型号、颜色等的命名实体识别，尤其是机器学习方法文本挖掘）。如果你做得好，后者会更准确。

在这两种方法中，您可以使用一些额外的模糊逻辑来比较可以以不同方式编写的单词的字符串。以及消除错误项目的一般预定义规则。例如，考虑到价格可以区分物品及其配件，尽管它们的标题非常相似。

# c# - 带触发器的 UpdateProgress 不起作用

> ID：10162138
> 
> 赞同：2
> 
> 时间：2012-04-15T12:46:53.130
> 
> 标签：c#, asp.net, asp.net-ajax, updateprogress

我正在尝试将 UpdateProgress 与触发器一起使用（参见下面的代码），但是当单击分配为 asyncPostBackTrigger 的按钮时，UpdateProgress 不起作用。如果我删除 AssociatedUpdatePanelID 属性，UpdateProgress 控件将起作用。但是我想配置独立的UpdateProgress，所以我需要指定UpdateProgress控件的AssociatedUpdatePanelID属性。

这种行为是应该的吗？

> **注意：**我不想拦截 Sys.WebForms.PageRequestManager 实例并操纵异步请求以手动显示和隐藏 UpdateProgress 元素。有没有办法做到这一点？

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
    CodeBehind="Default.aspx.cs" Inherits="AjaxExtensionsTest._Default" %>
<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <asp:ScriptManager ID="ScriptManager1" EnablePartialRendering="true"  runat="server">
    </asp:ScriptManager>
    <h2>
        Ajax Extensions Test
    </h2>
        <asp:UpdatePanel ID="up1" UpdateMode="Conditional" runat="server">
            <ContentTemplate>
                <div id="content">
                    <asp:TextBox ID="txtDataHora" runat="server"></asp:TextBox>
                    <asp:UpdateProgress ID="progress1"  AssociatedUpdatePanelID="up1"  DynamicLayout="true" DisplayAfter="0" runat="server">
                        <ProgressTemplate>
                            <div>
                                <img alt="progress" src="loading.gif" />
                            </div>
                        </ProgressTemplate>
                    </asp:UpdateProgress>
                </div>
            </ContentTemplate>
            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="btnSubmit"  EventName="Click" />
            </Triggers>
        </asp:UpdatePanel>
    <asp:Button ID="btnSubmit" Text="Get Current Date/Time" runat="server" onclick="btnSubmit_Click" />
    <p>
    </p>
</asp:Content>
<script runat="server" language="csharp">

    protected void Page_Load(object sender, EventArgs e)
    {
        ScriptManager1.RegisterAsyncPostBackControl(btnSubmit);
    }

    protected void btnSubmit_Click(object sender, EventArgs e)
    {
        txtDataHora.Text = DateTime.Now.ToString("dd/MM/yyyy hh:mm:ss");
        System.Threading.Thread.Sleep(2000);
    }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T17:14:43.433

如果您需要使用 AsyncPostBackTrigger 和 AssociatedUpdatePanelID，那么您唯一的选择是处理 Sys.WebForms.PageRequestManager 实例上的事件并手动显示和隐藏 UpdateProgress 元素。那里有在服务器上运行的代码，并注入必要的 JavaScript，这些 JavaScript 可以封装到控件中以使执行此操作非常整洁。

# java - 制作用户定义的地图

> ID：10162142
> 
> 赞同：0
> 
> 时间：2012-04-15T12:47:22.237
> 
> 标签：java

我有一个名为 Employee 的 pojo，现在我想创建一个用户定义的集合，并将其放在地图上。请告诉我如何实现这一目标。

```
public class Employee {
    String name,job;
    int salary;

    public Employee(String n , String j, int t) {
        this.name= n;
        this.job=j;
        this.salary= t;          
    }

    @Override
    public int hashCode() {      
        return name.hashCode()+job.hashCode()+salary;        
    }

    @Override
    public boolean equals(Object obj) {  
        Employee e = (Employee) obj;    
        return this.name.equals(e.name) && this.job.equals(e.job)
                   && this.salary == e.salary;
    }   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T12:50:26.133

不确定你在找什么。如果您想将员工与键（例如，他们的姓名）相关联，您可以执行以下操作：

```
Map<String, Employee> employeeMap = new HashMap<String, Employee>(); 
```

如果您想将员工映射到其他值，您可以执行以下操作：

```
Map<Employee, MyOtherType> employeeMap = new HashMap<Employee, MyOtherType>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T12:52:28.200

类似于以下内容：（？）

```
Collection<Employee> employees = new LinkedList<Employee>();
Map<String, Collection<Employee>> map = new HashMap<String, Collection<Employee>>();

...........

//Now fill the map as following:
List<Employee> employeesOfTheDepartment = new LinkedList<Employee>();
employeesOfTheDepartment.add(employee);
map.put(employee.getDepartment(), employeesOfTheDepartment); 
```

# python - 调用 Python 3.x 命令的跨平台方式

> ID：10162144
> 
> 赞同：4
> 
> 时间：2012-04-15T12:48:03.277
> 
> 标签：python, windows, linux, macos, command-line

`python`命令通常映射到跨不同操作系统的最新 Python 2.x 编译器。但是，是否有这样的标准方法来调用 Python 3.x 解释器（安装任何或最新版本）？

...因此可以将您的 Python 3.x 兼容脚本运行为：

```
 python3 yourscript.py 
```

作为奖励，是否还存在调用 virtualenv 命令为 Python 3 创建本地安装的跨平台方法？

*   Ubuntu 似乎提供了 python3 命令，似乎没有为 Python 3.x 提供预打包的 virtualenv

*   OSX（Macports、BSD？）更喜欢 python-3.2、python-3.1 命令，提供 virtualenv-3.2、virtualenv-3.1

目前我正在尝试一些试错法来完成工作

*   [https://github.com/miohtama/vvv/blob/master/vvv/sysdeps.py#L80](https://github.com/miohtama/vvv/blob/master/vvv/sysdeps.py#L80)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T14:43:11.593

对此没有完整的解决方案。客户端可能未安装 Python3。那你会怎么做？您可以先在脚本执行时检查 Python 版本。

```
print sys.version_info
sys.version_info(major=2, minor=7, micro=2, releaselevel='final', serial=0) 
```

如果执行的 Python 不是 Python3，那么您可以要求用户安装它或使用 Python3 解释器调用您的脚本等。当用户使用 Python2 调用您的脚本时，您可能决定根本无法运行。有很多方法（常见问题解答、系统要求等）通知用户脚本需要 Python3，然后让他们处理该问题，而不是您尝试在代码中这样做。

我已经在 Microsoft .Net 运行时中看到了这一点。当用户没有所需的 .Net 版本时，程序会在继续之前要求用户安装它，并将用户指向一个 URL。

另一个建议是，在 Linux 系统上，您可以通过将其添加到脚本顶部来更喜欢 Python3（如果已安装）：

```
#!/usr/local/bin/python3 
```

当然，您必须确定该路径存在。您也可以使用`env`更灵活的方式来执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T17:40:43.693

在阅读[PEP 394 The "python" Command on Unix-Like Systems](http://www.python.org/dev/peps/pep-0394/)和[PEP 397 Python launcher for Windows](http://www.python.org/dev/peps/pep-0397/)之后，我想你最好的选择是`#! /usr/bin/python3`在脚本中使用 shebang 并指导 Windows 用户安装和使用*Python 启动器*（`py`命令）而不是`python`命令。

# css - CSS3移动然后动画

> ID：10162145
> 
> 赞同：2
> 
> 时间：2012-04-15T12:48:21.150
> 
> 标签：css, css-transitions

我正在尝试使用 css3 转换为我的页面设置动画。我需要能够移动一个元素，然后使用 css3 制作动画。例如，将隐藏的 div 移出屏幕，然后将其动画化回到屏幕上。我知道这听起来很奇怪，但我已经简化了我的解释并且确实需要这个功能。所以在下面的代码中，我想将元素向左移动 400px，然后将其设置为 0。所以....没有动画移动 400px，添加 CSS3 过渡类并将动画设置为 0px。希望我已经解释过了...感谢您的帮助。

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>My test page</title>
<style type="text/css">
    .box{
        height:100px;
        width:100px;
        background-color:green;
        position:absolute;
        top:100px;
    }
    .animator{
        -webkit-transition: all 1.5s ease;
        -moz-transition: all 1.5s ease;
        transition: all 1.5s ease;
    }
</style>
<script type="text/JavaScript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
        $('.box').css({left:'400px'});
        $('.box').addClass('animator');
        $('.box').css({left:'0px'});

    });

</script>
</head>
<body>
<div class="box">1</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T12:59:54.277

在这个页面上有一个关于如何使用 CSS3 动画的很好的解释

[https://developer.mozilla.org/en/CSS/CSS_animations](https://developer.mozilla.org/en/CSS/CSS_animations)

我认为您可能正在寻找的是“关键帧”，它在该页面上对其进行了解释，无论如何您似乎都在寻找什么，也许您可​​以进一步澄清您的问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T13:04:12.313

我认为这应该做

```
$('.box').animate({left:'400px'}).fadeIn().addClass('animator').animate({left:'0px'}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T20:54:49.130

动画在应用程序堆栈的末尾执行。所以如果你写：

```
// initial state -> elment has left 0
$('.box').css({left:'400px'}); // set left to 400
$('.box').addClass('animator');// set animation duration to 1.5s
$('.box').css({left:'0px'});   // set left to 0
// perform animation from 0 to 0 
```

如果你想打破堆栈并执行浏览器操作，你可以使用 window.setTimeout：

```
$('.box').css({left:'400px'}); // set left to 400
// move element from 0 to 400
window.setTimeout(function(){  
     $('.box').addClass('animator');// set animation duration to 1.5s
     $('.box').css({left:'0px'});   // set left to 0
},1)
// perform animation from 400 to 0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-25T03:44:53.030

几毫秒的简单 Javascript 超时将允许浏览器重新定位元素，然后应用转换。

```
$(document).ready(function(){

    $('.box').css({left:'400px'})
       .addClass('animator');
    setTimeout(function(){
       $('.box').css({left:'0px'});
    },15);

}); 
```

# c# - 这个 VBA 代码会异步执行吗

> ID：10162146
> 
> 赞同：2
> 
> 时间：2012-04-15T12:48:33.280
> 
> 标签：c#, ms-access

好的，所以我正在尝试从 C# 自动化 Microsoft Access。显然，您不能在 VBA 本身中异步执行 VBA 代码，但我的想法是使用委托从 C# 强制执行此操作。

我们有一个遗留报告系统，它运行数百个设计不良的查询来获取信息，这些查询在宏内部同步运行。每个查询都是使用 MS Access 查询设计器设计的，并通过 ODBC 查询 MySql 数据库。它们需要 2-3 分钟才能运行，并且宏可能包含 <=20 个查询，这意味着宏将需要一个小时的大部分时间来运行。如果我运行这些异步，我可以在几分钟内运行整个宏。

我的完整 C# 代码如下：

```
using System;
using Microsoft.Office.Interop.Access;

namespace AsyncVBA
{
    class Program
    {
        private static Application ap;
        private delegate void ExportThread(string queryName, string exportLocation);

        private static int count;

        static void Main(string[] args)
        {
            var dbName = @"C:\Users\JMK\Desktop\MyDatabase.accdb";
            count = 0;

            ExportThread queryThread = new ExportThread(ExportQuery);

            ap = new Application();
            ap.OpenCurrentDatabase(dbName);

            queryThread.BeginInvoke("qryOne", @"C:\Users\JMK\Desktop\x\one.xlsx", null, null);
            queryThread.BeginInvoke("qryTwo", @"C:\Users\JMK\Desktop\x\two.xlsx", null, null);
            queryThread.BeginInvoke("qryThree", @"C:\Users\JMK\Desktop\x\three.xlsx", null, null);
            queryThread.BeginInvoke("qryFour", @"C:\Users\JMK\Desktop\x\four.xlsx", null, null);
            queryThread.BeginInvoke("qryFive", @"C:\Users\JMK\Desktop\x\five.xlsx", null, null);
            queryThread.BeginInvoke("qrySix", @"C:\Users\JMK\Desktop\x\six.xlsx", null, null);
            queryThread.BeginInvoke("qrySeven", @"C:\Users\JMK\Desktop\x\seven.xlsx", null, null);
            queryThread.BeginInvoke("qryEight", @"C:\Users\JMK\Desktop\x\eight.xlsx", null, null);
            queryThread.BeginInvoke("qryNine", @"C:\Users\JMK\Desktop\x\nine.xlsx", null, null);
            queryThread.BeginInvoke("qryTen", @"C:\Users\JMK\Desktop\x\ten.xlsx", null, null);

            while (count < 10)
            {
                Console.ReadLine();
            }

            ap.CloseCurrentDatabase();
        }

        private static void ExportQuery(string queryName, string exportLocation)
        {
            ap.DoCmd.TransferSpreadsheet(AcDataTransferType.acExport, AcSpreadSheetType.acSpreadsheetTypeExcel9, queryName, exportLocation);
            count++;
        }

    }
} 
```

我目前有两个问题，第一个是我的代码似乎仍在同步执行，这可能与 MS Access 的限制有关。我猜 MS Access 在收到请求或其他请求时正在对请求进行排队。第二个不太重要的问题是我的计数似乎没有增加。

我哪里错了？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T18:04:20.727

仅从使用Access作为前端的大量经验来看，最好的是将所有查询更改为Pass-through查询并用mySQL语法重写它们。

当前方法花费这么长时间的原因可能是通过网络传递的数据集远远大于它需要的大小。Access 会传递 mySQL DB 可以解释的内容，然后在到达时应用其余的 sql 语法。对于大型数据集，它的效率非常低。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T21:44:08.413

实际上，启动 word、Excel、power point 或任何办公套件都不会异步运行任何东西。事实上，如果你创建了一个 SQL server 实例，你会发现同样的事情。（将 SQL 命令发送到 SQL SEPARATE 进程与创建进程内实例之间存在很大差异。

我会考虑将这些数据写入一个文本文件，甚至是一个临时表，然后 shell() 输出一个正在启动的应用程序实例，运行一系列查询。您甚至可以在这里创建一个执行这些命令的 windows 脚本。这样您就可以获得一个单独的实例和线程，因此您的应用程序将不必等待。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T13:27:19.923

Microsoft Access 中没有任何东西被设计为与其他任何东西同时运行。我很确定，当您成功打开 Access 数据库时，您将获得对所有系统表的排他锁。我看不出它如何以任何其他方式工作。

更好的方法是从 Access 数据库中提取 SQL。您说每个查询都是使用查询设计器设计的（我认为您的意思是设计视图），但它仍然具有您可以使用的 SQL。只需从设计视图切换到 SQL 视图，就可以了

# c - 如何使用 C 结构中的字符串字段？

> ID：10162152
> 
> 赞同：26
> 
> 时间：2012-04-15T12:50:14.113
> 
> 标签：c, string, linked-list, structure

我在基于 C 中的单链表创建数据库时遇到问题，不是因为链表概念，而是因为结构本身中的字符串字段。

这是 C 中的一项任务，据我所知（我是新手），C 不将“字符串”识别为数据类型。

这是我的结构代码的样子：

```
typedef struct 
{
  int number;
  string name;
  string address;
  string birthdate;
  char gender;
} patient;

typedef struct llist
{
  patient num;
  struct llist *next;
} list; 
```

我正在考虑为字符串本身制作一个结构，以便我可以在结构中使用它们，如下所示：

```
typedef struct string 
{ 
  char *text;
} *string; 
```

`malloc()`然后，当需要创建字符串类型（char 数组）的新数据时，我将它们中的每一个。

```
typedef struct string
{
  char *text;
} *string;

int main()
{
    int length = 50;
    string s = (string) malloc(sizeof string);
    s->text = (char *) malloc(len * sizeof char);
    strcpy(s->text, patient.name->text);
} 
```

有人可以帮我解决这个问题吗？
谢谢你。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-04-15T13:02:50.050

**关于字符串和内存分配：**

C 中的字符串只是`char`s 的序列，因此您可以在任何您想使用字符串数据类型的地方使用`char *`或数组：`char`

```
typedef struct     {
  int number;
  char *name;
  char *address;
  char *birthdate;
  char gender;
} patient; 
```

然后你需要为结构本身和每个字符串分配内存：

```
patient *createPatient(int number, char *name, 
  char *addr, char *bd, char sex) {

  // Allocate memory for the pointers themselves and other elements
  // in the struct.
  patient *p = malloc(sizeof(struct patient));

  p->number = number; // Scalars (int, char, etc) can simply be copied

  // Must allocate memory for contents of pointers.  Here, strdup()
  // creates a new copy of name.  Another option:
  // p->name = malloc(strlen(name)+1);
  // strcpy(p->name, name);
  p->name = strdup(name);
  p->address = strdup(addr);
  p->birthdate = strdup(bd);
  p->gender = sex;
  return p;
} 
```

如果您只需要几个`patient`s，则可以避免内存管理，但会分配比实际需要更多的内存：

```
typedef struct     {
  int number;
  char name[50];       // Declaring an array will allocate the specified
  char address[200];   // amount of memory when the struct is created,
  char birthdate[50];  // but pre-determines the max length and may
  char gender;         // allocate more than you need.
} patient; 
```

**在链表上：**

一般来说，链表的目的是证明对有序元素集合的快速访问。如果您`llist`包含一个名为的元素`num`（可能包含患者编号），您需要一个额外的数据结构来保存实际`patient`的 s 本身，并且您每次都需要查找患者编号。

相反，如果您声明

```
typedef struct llist
{
  patient *p;
  struct llist *next;
} list; 
```

然后每个元素都包含一个指向`patient`结构的直接指针，您可以像这样访问数据：

```
patient *getPatient(list *patients, int num) {
  list *l = patients;
  while (l != NULL) {
    if (l->p->num == num) {
      return l->p;
    }
    l = l->next;
  }
  return NULL;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-10-21T01:21:05.237

我认为这个解决方案使用的代码更少，即使对于新手来说也很容易理解。

对于结构中的字符串字段，您可以使用指针并将字符串重新分配给该指针将变得简单明了。

定义结构的定义：

```
typedef struct {
  int number;
  char *name;
  char *address;
  char *birthdate;
  char gender;
} Patient; 
```

使用该结构的类型初始化变量：

```
Patient patient;
patient.number = 12345;
patient.address = "123/123 some road Rd.";
patient.birthdate = "2020/12/12";
patient.gender = 'M'; 
```

就是这么简单。希望这个答案可以帮助许多开发人员。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T13:07:54.103

如果您确实想使用 typedef，虽然 Richard's 是您想要的，但我建议在这种情况下这可能不是一个特别好的主意，因为您忽略了它是一个指针，而没有获得任何东西。

如果您将其视为计数字符串或具有附加功能的东西，那可能会有所不同，但我真的建议在这种情况下，您只需熟悉“标准”C 字符串实现是“char *”即可。 ..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T12:53:38.177

这不起作用：

```
string s = (string)malloc(sizeof string); 
```

`string`指的是指针，你需要结构体本身的大小：

```
string s = malloc(sizeof (*string)); 
```

请注意也缺少强制转换（隐式执行从`void*`(`malloc`的返回类型的转换）。

此外，在您的 中`main`，您有一个全局的 delcared `patient`，但它是未初始化的。尝试：

```
 patient.number = 3;     
 patient.name = "John";     
 patient.address = "Baker street";     
 patient.birthdate = "4/15/2012";     
 patient.gender = 'M'; 
```

在您读取其任何成员之前

此外，**`strcpy`本质上是不安全**的，因为它没有边界检查（将复制直到`'\0'`遇到第一个，如果源太长则写入过去分配的内存）。改为使用`strncpy`，您至少可以指定复制的最大字符数 - 阅读文档以确保您传递正确的值，很容易出错。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-15T12:58:09.130

您可以使用更简单的`typedef`：

```
typedef char *string; 
```

然后，你的 malloc 看起来就像一个普通的 malloc：

```
string s = malloc(maxStringLength); 
```

# asp.net - 在数据访问层使用 Httpcontext

> ID：10162155
> 
> 赞同：2
> 
> 时间：2012-04-15T12:50:33.303
> 
> 标签：asp.net, entity-framework, c#-4.0, entity-framework-4.1

我想在 dataAceess 层中使用 HttpContext 但我无法从 HttpContext 创建对象

```
 HttpContext httpContext = HttpContext.Current; 
```

我创建了一个 Web 应用程序和一个 libery 项目，我想在 libery 项目中使用 HttpContext，如下所示：

```
public static Context GetContextPerRequest()
   {

       HttpContext httpContext = HttpContext.Current;
       if (httpContext == null)
       {
           return new Context();
       }
       else
       {
           int contextId = Thread.CurrentContext.ContextID;
           int hashCode = httpContext.GetHashCode();
           string key = string.Concat(hashCode, contextId);

           Context context = httpContext.Items[key] as Context;
           if (context == null)
           {
               context = new Context();
               httpContext.Items[key] = context;
           }

           return context;
       }
   } 
```

我使用.net 4。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T13:08:22.563

您可以从表示层解析`HttpContext.Current`并更改您的方法，如下所示。如果您需要找到访问当前 http 上下文的方法，[此](http://www.codeproject.com/Tips/314393/ASP-NET-Accessing-HttpContext-Current-and-Other-Sy)链接将为您提供帮助。

```
 public static Context GetContextPerRequest(HttpContext httpContext)
   {
      ------
      ------
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T13:09:13.250

我不确定您的问题是什么，但您的代码显示了一些非常糟糕的概念。

你期望这会做什么？

```
int contextId = Thread.CurrentContext.ContextID;
int hashCode = httpContext.GetHashCode();
string key = string.Concat(hashCode, contextId);

Context context = httpContext.Items[key] as Context;
if (context == null)
{
    context = new Context();
    httpContext.Items[key] = context;
} 
```

`HttpContext`是您在 ASP.NET 中处理 HTTP 请求的安全存储。`HttpContext.Current`为每个请求返回唯一的实例，并且此实例独立于处理请求的线程 - 即使在异步处理中`HttpContext`，您的请求也会在线程之间流动，但您永远不会有两个线程处理同一个请求（除非您尝试生成您的自己的线程）。如果您尝试生成自己的线程，则根本无法使用这种方式，因为`HttpContext`实例仅在处理请求之前存在，但您的自定义线程生命周期可能更长。

所以你使用的代码只是这个的过于复杂的版本：

```
Context context = httpContext.Items["Context"] as Context;
if (context == null)
{
    context = new Context();
    httpContext.Items["Context"] = context;
} 
```

此外，如果此代码来自您的数据访问层，则设计错误。数据访问层处理数据访问，应该独立于上层处理——包括HTTP请求处理。这意味着您的`GetContextPerRequest`方法不属于数据访问层。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-16T18:47:00.823

我以这种方式解决了我的问题：

1.  添加对 system.web 的引用
2.  使用 system.web；在我的数据访问层
3.  在方法承包商中从 GetContextPerRequest() 创建一个对象

# iphone - iPhone：如何在完整的字符串中查找字符串

> ID：10162157
> 
> 赞同：-1
> 
> 时间：2012-04-15T12:50:40.967
> 
> 标签：iphone

如何从完整的字符串中获取某个字符串。

例如：我有一个完整的字符串，如下所示。

```
"http://serverurl.com/mediadata/Album.wav"; 
```

我需要从上面的字符串中获取“Album.wav”。名称因不同的 url 字符串而异。如何得到它？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T12:56:14.823

您可以使用路径组件：

```
NSString fileName = [URLstring lastPathComponent]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T12:52:01.967

您可能需要使用 NSScanner 并扫描到第 4 个斜线。扫描后剩下的就是你想要的字符串。

**已编辑**

然而，正如理查德所说，如果你的 url 不会改变一个简单的路径组件将起作用，因为 NSString 会为你解析文件路径。这是一个例子。

```
NSArray *urlStrings = [NSArray arrayWithObjects:@"http://serverurl.com/mediadata/Album.wav",
                                                @"http://serverurl.com/mediadata/NewAlbum.wav",
                                                @"http://serverurl.com/mediadata/OtherAlbum.mp3", nil];

for (NSString *url in urlStrings) {
    NSLog(@"%@",[url lastPathComponent]);
} 
```

**输出**

```
2012-04-15 09:01:15.878 NSScanner[6448:f803] Album.wav
2012-04-15 09:01:15.880 NSScanner[6448:f803] NewAlbum.wav
2012-04-15 09:01:15.881 NSScanner[6448:f803] OtherAlbum.mp3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T12:54:29.797

您还可以使用以 rangeOfString 开头的 NSString 类方法：

```
- (NSRange)rangeOfString:(NSString *)aString;
- (NSRange)rangeOfString:(NSString *)aString options:(NSStringCompareOptions)mask;
- (NSRange)rangeOfString:(NSString *)aString options:(NSStringCompareOptions)mask range:(NSRange)aRange;
- (NSRange)rangeOfString:(NSString *)aString options:(NSStringCompareOptions)mask range:(NSRange)searchRange locale:(NSLocale *)locale; 
```

# macos - 适用于 Mac/Windows 的 Java 7 安装程序

> ID：10162158
> 
> 赞同：3
> 
> 时间：2012-04-15T12:50:44.757
> 
> 标签：macos, installation, java, java-7

我正在使用 Java 7 编写软件。该软件的用户并非都是最新的（尤其是 Mac 用户）。因此，我需要一个可以轻松与软件安装集成的安装程序（Windows/OSX）。Windows 7 有一个普通的安装程序，所以我特别专注于为 Mac 寻找一个。如果它也可以检查 XCode 和其他要求，则可以加分）。

我在想另一种选择是只使用 Java 7 中的一些库（例如文件系统库）。但是，我认为由于编译类中的版本号，这可能是不可能的？我也不能使用 Java 6 编译器来编译这些库（因为它们是 Java 7 代码）。

我不认为我是唯一一个有这个问题的人。一定有解决方案，但我还没有找到。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T12:58:33.890

Mac OS X 上尚未正式支持 JAva 7，如果您正在寻找 mac Os X 的 JAva 7 安装程序，请查看 Google Code 上的[openjdk-osx-build](http://code.google.com/p/openjdk-osx-build/)项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T13:13:19.610

为了获得最佳用户体验，我建议使用[PackageMaker](http://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/PackageMakerUserGuide/Introduction/Introduction.html)创建一个 .pkg 文件，然后您可以将其提供给您的 Mac 用户。这使他们可以单击安装您的应用程序。

在包中，您将捆绑您的应用程序存档（JAR 文件）、任何必要的资源和两个脚本，一个用于检查目标系统上是否存在 Java 7，另一个用于在未找到时安装它。我建议将最新版本的 OpenJDK7 与您的 pkg 捆绑在一起，至少在为 Mac 发布官方 Java 7 SDK 之前。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-15T13:22:17.810

**更新：**您的工作不需要 Java 7。

更好的解决方案是使用 Java 6 + 第三方 JNI 库（即：[JNotify](http://jnotify.sourceforge.net/macos.html)、[JavaXT](http://www.javaxt.com/javaxt-core/io/File/Extended_File_Attributes#Last_Access_Time) ...）

*   [使用 JNotify 的 Java 目录监听器](https://stackoverflow.com/a/4941947/515359)

至于**上次访问日期**，您可能需要编写一小部分 Objective-C 并通过 JNI 将其传回

*   [Mac OS X 上的 JNI 开发](http://developer.apple.com/library/mac/#technotes/tn2147/_index.html)

* * *

Mac OS X 已经在 Snow Leopard (JRE6) 上附带了 Java 运行时

在 Lion 上，如果应用程序需要，它将自动下载 JRE6

![通过软件更新](../Images/c82321e13daf33112c43ca25cb862f2b.png)

您当然可以从 Oracle 下载 JDK7 的预览版，但请记住这是**预览版软件**，有些部分仍然无法使用（例如：Java Web Start）

*   [Oracle JDK7u4 Mac OS X 端口开发者预览版发布](http://jdk7.java.net/macportpreview/)

**编辑：** Oracle JDK 1.7 Preview Release 仅支持**Mac OS X Lion**

# c# - 即使“if”为真，“else”也会完成

> ID：10162160
> 
> 赞同：0
> 
> 时间：2012-04-15T12:50:48.870
> 
> 标签：c#, if-statement, split, line, translate

我在搞乱某种字典，它应该将单词从一个文本框翻译到另一个文本框，反之亦然，但它并没有像我想要的那样。按钮的代码是：

```
private void button1_Click(object sender, EventArgs e)
    {
        string[] lines = File.ReadAllLines("C:/words.txt");
        int i = 0;
        var items = from line in lines
                    where i++ != 0
                    let words = line.Split('|')
                    where words.Count() > 1
                    select new
                    {
                        word = words[0],
                        translation = words[1]
                    };

        foreach (var item in items)
        {
            if (textBox1.Text == item.word)
            {
                textBox2.Text = item.translation;
            }
            if (textBox2.Text == item.translation)
            {
                textBox1.Text = item.word;
            }
            else
            {
                label3.Text = ("not found");
            }
        }
    } 
```

编辑：也不适用于“else if”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T12:54:24.853

您需要一个`else if`，否则只有在以下情况下才会发生 else ：

```
 if (textBox1.Text == item.word)
  {
     textBox2.Text = item.translation;
  }
  else if (textBox2.Text == item.translation)
  {
     textBox1.Text = item.word;
  }
  else
  {
     label3.Text = ("not found");
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T12:59:35.760

尝试使用`else if (textBox2.Text == item.translation)`而不是`if (textBox2.Text == item.translation)`.

`ELSE IF`！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T13:10:49.927

据我所知，没有 else if，第二个 if 只有在第一个 if 为真时才有效。试试这个：

```
foreach (var item in items)
    {
        if (textBox1.Text = item.word)
        {
            textBox2.Text = item.translation;
        }

        else if (textBox2.Text = item.translation)
        {
            textBox1.Text = item.word;
        }
        else
        {
            label3.Text = ("not found");
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T13:36:47.763

我发现最好尽可能避免使用 if 语句，尤其是尽量避免使用 else 和 else if。这样做的原因是，当有多个条件要尝试和遵循时，它只会变得混乱。这可能是一种更简洁的方式来了解正在发生的事情并解决您的问题。

```
 foreach (var item in items)
        {
            if (textBox1.Text == item.word)
            {
                textBox2.Text = item.translation;
                continue;  // Don't process anything else in this loop.
            }
            if (textBox2.Text == item.translation)
            {
                textBox1.Text = item.word;
                continue;  // Don't process anything else in this loop.
            }
            label3.Text = ("not found");
        } 
```

由于如果我们的一个 if 语句为真，我们不希望执行任何其他逻辑（我的假设），我们只需使用*continue*跳过 foreach 中的其余逻辑并移至下一项。

为什么这是一个循环呢？第一次迭代中的文本不会被后续迭代覆盖吗？

# android - Arduino + 蓝牙模块 + 安卓

> ID：10162169
> 
> 赞同：8
> 
> 时间：2012-04-15T12:52:12.230
> 
> 标签：android, bluetooth, arduino

我正在想办法做一个简单的家庭自动化项目，其中涉及 Arduino、蓝牙模块和 Android 手机。我的想法是我家的不同地方有两个 Arduino 板。如果我走进一个房间，发现我手机的板上的 LED 会亮起。如果我走出蓝牙范围，LED 应该会熄灭。

我用路由器尝试过 DomoticHome 项目，但它仅用于手动开/关，它基于以太网模块。

我不想从头开始制作 Android 应用程序，但我想采用一些现有的开源应用程序，我可以将其扩展为使用蓝牙和/或自动打开 LED。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T15:21:46.487

实际上，您可能会跳过该 Android 应用程序要求。只需让 Arduino 板定期通过蓝牙[连接](http://linuxcommand.org/man_pages/l2ping1.html)您的手机，并根据成功或失败切换您的 LED。

作为副作用，您可以使用任何支持蓝牙的手机实现自动化。但魔鬼在细节中。最初可能需要配对电路板和电话。

此外，大多数 Android 手机会在一两分钟后关闭可见性。因此，您必须检查 ping 是否可以正常工作。（我不知道 l2ping 是否可以在 Arduino 上开箱即用，但它应该很容易携带。）尝试在移动设备上打开蓝牙端口可能是 l2ping 的替代方法。所以一个无应用程序的解决方案应该是可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T05:42:58.227

最好的方法是每 1 秒或 2 秒使用一次握手信号。如果手机收到我应该回复 HI，蓝牙模块应该发送 HI。一旦手机没有回复，它应该关灯。如果它收到 HI 它应该重新打开灯..我有一个可以使用串行通信连接到这些蓝牙模块的代码..它使用起来非常简单..我会检查并将代码发送给你..一切顺利..

# asp.net-mvc - IControllerActivator 优于 DefaultControllerFactory.CreateController

> ID：10162172
> 
> 赞同：3
> 
> 时间：2012-04-15T12:52:29.067
> 
> 标签：asp.net-mvc

当控制器已经可以通过覆盖 DefaultControllerFactory 的 CreateController 方法进行自定义创建（并使用 DI 解析）时，IControllerActivator.Create（MVC4 中的新功能）提供了哪些额外优势？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-11T17:17:26.233

控制器激活逻辑被拉出默认控制器工厂，并放入控制器激活器；所以这样做是为了让它更灵活一点，并遵循单一责任模式。根据您使用的 MVC 版本，它现在使用控制器激活器来创建控制器。两人齐心协力完成工作；因此，您可以自定义其中任何一个，它的功能也类似。我不认为一个比另一个有优势。

请参阅[Brad Wilson 的博客文章](http://bradwilson.typepad.com/blog/2010/10/service-location-pt10-controller-activator.html)。

# php - MATCH (somefeald) AGAINST ('+".$_GET['search']."' IN BOOLEAN MODE) 不起作用

> ID：10162176
> 
> 赞同：0
> 
> 时间：2012-04-15T12:53:21.717
> 
> 标签：php, mysql, sql

为什么此 SQL 查询返回空白结果？

```
select
 webs.title,webs.disc,webs.logo,webs.id
from 
 webs
 JOIN rel ON rel.webid=webs.id
 JOIN catagory on catagory.id=rel.catid 
where 
  webs.app!=0 
  AND MATCH (webs.title,webs.city,webs.state,webs.url,catagory.catname) AGAINST ('+".$_GET['search']."' IN BOOLEAN MODE) 
```

这是在多个表和字段中进行多次搜索的查询。我还想按最佳匹配词对结果进行排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-21T06:13:02.550

如果要使用“MATCH() ... AGAINST”，首先在要匹配的字段上创建全文索引。

# python - Python将数据添加到帖子正文

> ID：10162177
> 
> 赞同：0
> 
> 时间：2012-04-15T12:53:30.663
> 
> 标签：python, rest, urllib2

我正在努力让 Rest API Post 与供应商 api 一起工作，希望有人能给我指点。

目的是将 cli 命令提供给帖子正文并传递给返回输出的设备。

呼叫看起来像这样：（这适用于所有其他呼叫，但由于发布到正文而有所不同）

```
 def __init__(self,host,username,password,sid,method,http_meth):
   self.host=host
   self.username= username
   self.password= password
   self.sid=sid
   self.method=method
   self.http_meth=http_meth

  def __str__(self):
   self.url = 'http://' + self.host + '/rest/'
   self.authparams = urllib.urlencode({ "session_id":self.sid,"method":  self.method,"username": self.username,
        "password": self.password,
    })

 call = urllib2.urlopen(self.url.__str__(), self.authparams).read()
 return (call) 
```

无论我如何尝试，我都无法使其正常工作。以下是解释如何使用此方法的 API 文档的摘录：

要处理这些 API，请将 CLI 命令放在 HTTP 发布缓冲区中，然后将方法名称、会话 ID 和其他参数放在 URL 中。

谁能给我一个如何正确执行此操作的想法。我不是开发人员，我正在尝试正确学习这一点。例如，如果我想在帖子正文中发送命令“帮助”？

感谢您的任何指导

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:12:56.747

好吧，这太简单了，我想多了。我发现有时我可以看到比问题实际和腰部时间更高的水平。无论如何，这就是它应该如何工作：

```
 def cli(self,method):
     self.url = ("http://" + str(self.host) + "/rest//?method=" +str(method)+ "&username=" +str(self.username)+ "&password=" +str(self.password)+ "&enable_password=test&session_id="+str(self.session_id))
     data="show ver"
     try:
      req = urllib2.Request(self.url)
      response = urllib2.urlopen(req,data)
      result = response.read()
      print result

     except urllib2.URLError, e:
      print e.reason 
```

cli 命令只是放在缓冲区中而不是编码....

# c# - AssemblyInfo 文件损坏 VS2010

> ID：10162181
> 
> 赞同：0
> 
> 时间：2012-04-15T12:54:08.603
> 
> 标签：c#, visual-studio-2010, assemblies

我有一个非常奇怪的问题，当我在 VS2010 中创建一个新项目时，`AssemblyInfo.cs`文件被损坏：文件中间的某行分为两行。

为什么会这样？

```
using System.Reflection;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;

// General Information about an assembly is controlled through the following 
// set of attributes. Change these attribute values to modify the information
// associated with an assembly.
[assembly: AssemblyTitle("RSAConfiguration")]
[assembly: AssemblyDescription("")]
[assembly: AssemblyConfiguration("")]
[assembly: AssemblyCompany("
            ")]
[assembly: AssemblyProduct("RSAConfiguration")]
[assembly: AssemblyCopyright("Copyright © 
             2012")]
[assembly: AssemblyTrademark("")]
[assembly: AssemblyCulture("")]

// Setting ComVisible to false makes the types in this assembly not visible 
// to COM components.  If you need to access a type in this assembly from 
// COM, set the ComVisible attribute to true on that type.
[assembly: ComVisible(false)]

// The following GUID is for the ID of the typelib if this project is exposed to COM
[assembly: Guid("4aebd189-5b6f-4f5b-a029-63c6dffe4bfa")]

// Version information for an assembly consists of the following four values:
//
//      Major Version
//      Minor Version 
//      Build Number
//      Revision
//
// You can specify all the values or you can default the Build and Revision Numbers 
// by using the '*' as shown below:
// [assembly: AssemblyVersion("1.0.*")]
[assembly: AssemblyVersion("1.0.0.0")]
[assembly: AssemblyFileVersion("1.0.0.0")] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T13:00:42.973

在注册表中[更改您的公司名称。](http://support.microsoft.com/kb/310441)

# android - 如何在 Android 中使用蓝牙以编程方式配对和连接设备？

> ID：10162183
> 
> 赞同：1
> 
> 时间：2012-04-15T12:54:11.090
> 
> 标签：android, bluetooth

好吧，在 StackOverflow 上已经有很多关于如何将远程蓝牙设备与 android 配对和连接的问题。我已经尝试了所有这些，没有找到任何有关与远程设备配对的正确链接或文档。

另外关于我尝试以编程方式将笔记本电脑与android连接，但出现以下错误：

```
java.io.IOException: Service discovery failed
at android.bluetooth.BluetoothSocket$SdpHelper.doSdp(BluetoothSocket.java:395)
at android.bluetooth.BluetoothSocket.connect(BluetoothSocket.java:209) 
```

连接 android 设备有很多参考资料，我遵循的是[这个](https://stackoverflow.com/questions/6369585/how-to-connect-with-paired-bluetooth-device-programmatic-in-android)。但在我的情况下它不起作用。我正在尝试连接我的 vaio 笔记本电脑，并且我有三星 Galaxy S 安卓设备。

如果有人知道如何以编程方式配对和连接设备，请告诉我解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T13:23:35.173

如果服务器实际上不可发现，您的客户端将永远不会发现服务器。您的服务器代码的注释说“确保它可发现的设备”，但在套接字上侦听并不意味着该设备是可发现的。您可以通过调用使服务器可发现：

```
Intent discoverableIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE);
discoverableIntent.putExtra(BluetoothAdapter.EXTRA_DISCOVERABLE_DURATION, 300);
startActivity(discoverableIntent); 
```

这在 Android 开发指南中有详细介绍：http: [//developer.android.com/guide/topics/wireless/bluetooth.html](http://developer.android.com/guide/topics/wireless/bluetooth.html)

您的应用程序必须在清单文件中具有以下蓝牙权限：

```
android.permission.BLUETOOTH_ADMIN
android.permission.BLUETOOTH 
```

# android - 编辑文本背景图片

> ID：10162186
> 
> 赞同：3
> 
> 时间：2012-04-15T12:54:34.057
> 
> 标签：android

当我用“setBackgroundResource”设置我的editText的背景时，一切正常。当我对相同的图像使用“setBackgroundDrawable”时，它最终会被拉伸......

左侧为“setBackgroundResource”，右侧为“setBackgroundDrawable”的结果：

[http://i.stack.imgur.com/yQi5n.jpg](http://i.stack.imgur.com/yQi5n.jpg) （对不起，我不允许在这里发布图片......）

编码 ：

```
View chips = EditChipsActivity.this.findViewById(mydID);
chips.setBackgroundResource(R.drawable.chips_filter); 
```

VS：

```
View chips = EditChipsActivity.this.findViewById(mydID);
Bitmap bkg = ((BitmapDrawable) getResources().getDrawable(R.drawable.chips_filter)).getBitmap();
BitmapDrawable bkg = new BitmapDrawable(bkg);
chips.setBackgroundDrawable(bkg); 
```

（我必须创建自己的位图并使用 setBackgroundDrawable 因为我想在背景上绘制）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T13:20:44.277

试试这个：

```
View chips = (EditText) findViewById(R.id.editText1);
    Bitmap bkg = ((BitmapDrawable) getResources().getDrawable(R.drawable.chips_filter)).getBitmap();
    BitmapDrawable bkgbt = new BitmapDrawable(getResources(),bkg);
    chips.setBackgroundDrawable((Drawable) bkgbt); 
```

还有你的 EditText：

```
<EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </EditText> 
```

如果这做你想要的，我不是......

# c++ - C++ 菜单。菜单中的无限循环

> ID：10162187
> 
> 赞同：0
> 
> 时间：2012-04-15T12:54:37.267
> 
> 标签：c++

嘿，谁能看到我在 while 循环中的菜单有什么问题，如果我在无限循环中按 1，它会不断打印出 dixie。我在菜单周围有一个 while 循环，这样菜单总是在那里供用户返回选择。这是我的代码：

```
#include <iostream>
using namespace std;

int main()
{
    int choice;
    bool menu = true;
    cout <<"========Welcome to the database menu========\n";

    cout << "Press 1 to insert a new record at a particular position\n"
            "Press 2 to delete a record from a particular position\n"
            "Press 3 to search the database  and print results\n"
            "Press 5 to find the average experience points of players at a particular level\n"
            "Press 6 to find and remove all duplicate entries\n"
            "Press 0 to quit\n\n\n\n\n\n\n\n\n";

    cout << "Choice: ";
    cin >> choice;
    //*****************************************************************************
    // Switch menu to display the menu.
    //*****************************************************************************
    while(menu)
    {
        switch (choice)
        {
            case 1:
                cout << "dixie";
                break;
            case 2:
                cout << "bexie";
                break;
            default:
                cout<< "That is not a choice!!!\n";
        }
    }    
    getchar();
    getchar();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T12:58:14.987

没有任何代码可以更改`menu`或`choice`在您的`while`循环内更改。所以一旦开始，它就永远不会停止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T12:58:19.597

它说`while (menu)`，这意味着它会一直这样做，直到你将菜单设置为`false`。

另外，我认为您想`cin >> choice`在循环中添加，否则它只会一次又一次地重复选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T12:58:33.453

我想while循环应该包括打印菜单选项并让用户选择一个选项，如下所示：

```
while (menu)
{
    cout <<"========Welcome to the database menu========\n";
    cout << "Press 1 to insert a new record at a particular position\n"
            "Press 2 to delete a record from a particular position\n"
            "Press 3 to search the database  and print results\n"
            "Press 5 to find the average experience points of players at a particular level\n"
            "Press 6 to find and remove all duplicate entries\n"
            "Press 0 to quit\n\n\n\n\n\n\n\n\n";

    cout<< "Choice: ";
    cin>> choice;

    switch (choice)
    {
        case 1:
            cout << "dixie";
            break;
        case 2:
            cout << "bexie";
            break;
        default:
            cout<< "That is not a choice!!!\n";
    }
} 
```

另一种可能性是在该行之前启动 while 循环`cout << "Choice: "`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T13:21:43.353

`menu`变量总是`true`在循环内。和现在一样`while(true)`。

# vb.net - VB.NET RowUpdating 事件不起作用

> ID：10162195
> 
> 赞同：1
> 
> 时间：2012-04-15T12:55:36.553
> 
> 标签：vb.net, gridview

以下代码运行成功，没有错误，但是我还是没有从网格中获取新数据，通过添加断点，再往前走，变量中的数据是原始数据，而不是更新数据，这是什么我失踪了？

```
 Private Sub grvSample_RowUpdating(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewUpdateEventArgs) Handles grvSample.RowUpdating
    Dim row As GridViewRow = DirectCast(grvSample.Rows(e.RowIndex), GridViewRow)
    Dim passportNumber As TextBox = DirectCast(row.FindControl("txtNumber"), TextBox)
    Dim expiry As TextBox = DirectCast(row.FindControl("txtExpiry"), TextBox)
    Dim type As TextBox = DirectCast(row.FindControl("txtType"), TextBox)
    Dim name As TextBox = DirectCast(row.FindControl("txtName"), TextBox)
    Dim cinvnum As TextBox = DirectCast(row.FindControl("txtCINVNUM"), TextBox)
    Dim last As TextBox = DirectCast(row.FindControl("txtLast"), TextBox)
    Dim drplist As DropDownList = DirectCast(row.FindControl("DDLNat"), DropDownList)

    Dim Conn As New SqlConnection("Data Source=ADMIN-PC;Initial Catalog=T1INV;Integrated Security=True")

    Dim cmd As New SqlCommand("update pass_details set passnat='" & drplist.SelectedValue & "', passno='" & passportNumber.Text.Trim() & "', passexp='" & expiry.Text.Trim() & "', passtype='" & type.Text.Trim() & "', nameonpass='" & name.Text.Trim() & "', namelast='" & last.Text.Trim & "'  where cinvnum='" & cinvnum.Text.Trim() & "'", Conn) ' where cinvnum='" & grvSample.Rows(e.RowIndex) & "'")

    Try
        Conn.Open()
        cmd.ExecuteNonQuery()
        ' Refresh the data
        grvSample.EditIndex = -1
        Dim SSQL = "select * from pass_details"
        Dim ds As New DataSet("GET_HIS")
        Dim adp As New SqlDataAdapter(SSQL, Conn)
        adp.Fill(ds, "TAB_SMT")
        grvSample.DataSource = ds.Tables("TAB_SMT")
        grvSample.DataBind()
    Catch ee As SqlException

    Finally
        cmd.Dispose()
        Conn.Close()
        Conn.Dispose()
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T13:29:18.330

我假设您正在`GridView`对回发进行数据绑定。这将覆盖更改的值。

所以在Page_Load中检查如下：

```
If Not Page.IsPostBack Then
    BindGrid()
End If 
```

除此之外`GridViewUpdateEventArgs`还包含一个字典[`NewNalues`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridviewupdateeventargs.newvalues.aspx)。

```
Dim passportNumber = e.NewValues("passno") 
```

请注意，它们也在数据绑定上被覆盖。

# html - 记录 Paper.js 路径对象，稍后再重绘

> ID：10162206
> 
> 赞同：2
> 
> 时间：2012-04-15T12:57:09.467
> 
> 标签：html, canvas, paperjs

我用鼠标 Paper.js 绘制。我需要保留这些笔画并以与视频重播相同的速度重播它们。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T03:38:39.310

在 paper.js 中，[onFrame()](http://paperjs.org/tutorials/animation/creating-animations/#creating-animations)函数每秒最多调用 60 次，而[onMouseMove()](http://paperjs.org/reference/tool#onmousemove)函数“在鼠标在项目视图中移动时调用”，并包含鼠标的位置。通过使用这两个功能，您可以存储鼠标动作并稍后在位置之间几乎相同的时间重播它们。

```
var mousePosition = null;
function onMouseMove(event) {
    if (mousePosition != null) {
        var path = new Path();
        path.strokeColor = 'black';
        path.moveTo(mousePosition);
        path.lineTo(event.point);
    }
    mousePosition = event.point;
}

var recordedPositions = [];
var delayFrames = 60;
function onFrame(event) {
    if (mousePosition != null) {
        recordedPositions.push(mousePosition);
        if (recordedPositions.length > delayFrames) {
            var path = new Path();
            path.strokeColor = 'red';
            delayedPositionIndex = recordedPositions.length - delayFrames;
            path.moveTo(recordedPositions[delayedPositionIndex - 1]);
            path.lineTo(recordedPositions[delayedPositionIndex]);
        }
    }
} 
```

我不知道 onFrame() 的计时精度/分辨率/可靠性。或者，您可以在此答案中使用 javascript 计时事件：[如何使用 javascript 计时来控制鼠标停止和鼠标移动事件](https://stackoverflow.com/questions/219322/how-can-i-use-javascript-timing-to-control-on-mouse-stop-and-on-mouse-move-event#219473)

# .net - 如何在实体框架中执行 SQL BETWEEN 命令

> ID：10162223
> 
> 赞同：5
> 
> 时间：2012-04-15T12:58:38.637
> 
> 标签：.net, sql, entity-framework

正如标题所说，我想要一些类似的东西：

```
SELECT * FROM TABLE WHERE YEAR BETWEEN 2011 AND 2005; 
```

这里有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T13:01:08.677

linq中没有`BETWEEN`语法。所以你可能不得不使用这样的东西：

```
var result=(
   from t in db.TABLE
   where t.YEAR>=2005 && t.YEAR=<2011
   select t 
); 
```

其中 db 是 linq 数据上下文

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T13:02:09.340

我不知道`BETWEEN`sql 中的命令，但你总是可以做类似的事情

```
where year >= 2005 AND year <= 2011 
```

# mysql - 我应该担心 MySQL 数据库的负载吗？

> ID：10162224
> 
> 赞同：1
> 
> 时间：2012-04-15T12:58:39.600
> 
> 标签：mysql, database, load

我正在开发一个高度动态并不断使用 MySQL 数据库的站点。我的问题是——我应该担心数据库的负载吗？
例如，网站的一部分有一个实时聊天，它使用 AJAX 每秒为每个用户联系数据库。根据连接的用户数量，有很多查询！

这是 MySQL 数据库可以处理的事情，还是我在推动它？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T13:06:31.827

你实际上是在推动它。根据您的服务器和在线用户数，MySQL 在某些时候可以处理。

MySQL 和其他数据库管理系统是数据存储系统，而您实际上并不是在存储数据！您只是通过 MySQL 在客户端之间发送数据，效率不高。

但是为了加快速度，您可以将 MySQL 内存表用于即时消息，并将离线消息保存在另一个 MyISAM 或 InnoDB 表中（将存储数据）

但是拥有聊天基础设施的最佳方式是拥有一个后端应用程序，它将所有消息保存在内存中，并在一定的限制后将未收到的消息作为离线消息发送到 MySQL。这与 MySQL 内存表非常相似，但您将对数据有更多的控制权。这样做的问题是您需要实现具有良好内存管理的逻辑和高效的数据结构，如果您不做商业产品，这是一项非常艰巨的任务，如果您不考虑销售该聊天系统，那么这是一项不必要的任务，因此我建议使用 MySQL正如我所描述的内存表。

更新
Mysql 内存表是易失的（将在服务/服务器重启时重置），所以不要用于存储，仅用于在短时间内保存数据以用于即时消息。

# c - Applescript 或 Automator 从网站逐步保存 Mandelbrot 图像

> ID：10162229
> 
> 赞同：0
> 
> 时间：2012-04-15T12:59:06.533
> 
> 标签：c, webserver, applescript, automator, mandelbrot

您好，我最近为我的 UNI Computing 课程创建了一个 C 程序，它在 localhost:2020 生成一个 Web 服务器，并发送一个 Mandelbrot 集的 bmp 文件。如果您不知道那是什么，请不要担心，它的 url 部分很重要。URL 格式如下

`http://X_(x coordinate)_(y coordinate)_(Zoom Level).bmp`

所以
`http://localhost:2020/X_-0.15_1.03_56.bmp`

返回

x：-0.15
y：1.03
缩放：56

我的目标是有一个自动化过程，它可以在 x,y 位置（在代码中很好）并重复从服务器加载图像，每次缩放级别增加 0.01 并将其保存到文件夹，或者最好将它们全部加载到要作为视频呈现的文件中。我很清楚这在 C 中会更容易做到，只需将其保存到文件中，但我的目标是让自己熟悉 applescript/automator 或类似的程序来完成这样的任务。它旨在为我自己提供一次有趣的学习体验，我将非常感谢我能得到的任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T14:18:45.110

这样的事情可能对您的部分任务有用。我们正在使用 unix 命令行实用程序“curl”下载所有图像（在每个缩放级别）。每个图像都以 url 中的名称保存到您选择的文件夹中。我们将这段代码放在一个重复循环中，这样我们就可以增加缩放级别。

该脚本显示了很多东西，特别是如何将变量直接插入到一个applescript（例如硬编码）以及如何从用户那里获得输入。它还展示了如何从一个applescript（例如curl）中运行命令行实用程序。

所以这个脚本应该让你开始。看看有没有帮助。

```
-- hard-coded variables
set minZoomLevel to 0
set maxZoomLevel to 10
set zoomIncrement to 0.1

-- get user input variables
set outputFolder to choose folder with prompt "Pick the output folder for the images"
set xDialog to display dialog "Enter the X coordinate" default answer ""
set yDialog to display dialog "Enter the Y coordinate" default answer ""

set posixStyleOutputFolder to POSIX path of outputFolder
set x to text returned of xDialog
set y to text returned of yDialog

set i to minZoomLevel
repeat while i is less than or equal to maxZoomLevel
    set fileName to "X_" & x & "_" & y & "_" & (i as text) & ".bmp"
    set theURL to "http://localhost:2020/" & fileName
    do shell script "curl " & theURL & " -o " & quoted form of (posixStyleOutputFolder & fileName)
    set i to i + zoomIncrement
end repeat 
```

# android - Android XML 解析器不工作

> ID：10162230
> 
> 赞同：2
> 
> 时间：2012-04-15T12:59:09.847
> 
> 标签：android, xml, parsing

我正在编写一个带有 XML 解析器的 android 应用程序。我有一个曾经可以工作的解析器，但是当我运行它时它什么也没做。这是我的课：

```
import java.net.URL;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;

import android.app.Activity;
import android.os.Bundle;
import android.widget.LinearLayout;
import android.widget.TextView;
import android.widget.Toast;

public class XMLParsingUsingDomeActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);

LinearLayout layout = new LinearLayout(this);
layout.setOrientation(1);

TextView ID[];
TextView vraag[];
TextView category[];
TextView a1[];
TextView p1[];
TextView a2[];
TextView p2[];
TextView a3[];
TextView p3[];

try {

URL url = new URL(
"http://128.140.217.126/vragen.xml");
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
DocumentBuilder dbu= dbf.newDocumentBuilder();
Document doc = dbu.parse(new InputSource(url.openStream()));
doc.getDocumentElement().normalize();

NodeList nodeList = doc.getElementsByTagName("item");

ID = new TextView[nodeList.getLength()];
vraag = new TextView[nodeList.getLength()];
category = new TextView[nodeList.getLength()];
a1 = new TextView[nodeList.getLength()];
p1 = new TextView[nodeList.getLength()];
a2 = new TextView[nodeList.getLength()];
p2 = new TextView[nodeList.getLength()];
a3 = new TextView[nodeList.getLength()];
p3 = new TextView[nodeList.getLength()];
for (int i = 0; i < nodeList.getLength(); i++) {

Node node = nodeList.item(i);

ID[i] = new TextView(this);
vraag[i] = new TextView(this);
category[i] = new TextView(this);
a1[i] = new TextView(this);
p1[i] = new TextView(this);
a2[i] = new TextView(this);
p2[i] = new TextView(this);
a3[i] = new TextView(this);
p3[i] = new TextView(this);

Element fstElmnt = (Element) node;
NodeList nameList = fstElmnt.getElementsByTagName("ID");
Element nameElement = (Element) nameList.item(0);
nameList = nameElement.getChildNodes();
ID[i].setText(((Node) nameList.item(0)).getNodeValue());

NodeList vraagList = fstElmnt.getElementsByTagName("vraag");
Element vraagElement = (Element) vraagList.item(0);
vraagList = vraagElement.getChildNodes();
vraag[i].setText(((Node) vraagList.item(0)).getNodeValue());

NodeList a1List = fstElmnt.getElementsByTagName("a1");
Element a1Element = (Element) a1List.item(0);
a1List = a1Element.getChildNodes();
a1[i].setText(((Node) a1List.item(0)).getNodeValue());

NodeList p1List = fstElmnt.getElementsByTagName("p1");
Element p1Element = (Element) p1List.item(0);
p1List = p1Element.getChildNodes();
p1[i].setText(((Node) p1List.item(0)).getNodeValue());

NodeList a2List = fstElmnt.getElementsByTagName("a2");
Element a2Element = (Element) a2List.item(0);
a2List = a2Element.getChildNodes();
a2[i].setText(((Node) a2List.item(0)).getNodeValue());

NodeList p2List = fstElmnt.getElementsByTagName("p2");
Element p2Element = (Element) p2List.item(0);
p2List = p2Element.getChildNodes();
p2[i].setText(((Node) p2List.item(0)).getNodeValue());

NodeList a3List = fstElmnt.getElementsByTagName("a3");
Element a3Element = (Element) a3List.item(0);
a3List = a3Element.getChildNodes();
a3[i].setText(((Node) a3List.item(0)).getNodeValue());

NodeList p3List = fstElmnt.getElementsByTagName("p3");
Element p3Element = (Element) p3List.item(0);
p3List = p3Element.getChildNodes();
p3[i].setText(((Node) p3List.item(0)).getNodeValue());

layout.addView(category[i]);
Toast.makeText(this,
        "ID:  " + i + "\n" +
        "Vraag: " + ((Node) vraagList.item(0)).getNodeValue() + "\n" +
        "A1: " + ((Node) a1List.item(0)).getNodeValue() + "\n" +
        "P2: " + ((Node) p1List.item(0)).getNodeValue() + "\n" +
        "A2: " + ((Node) a2List.item(0)).getNodeValue() + "\n" +
        "P2: " + ((Node) p2List.item(0)).getNodeValue() + "\n" +
        "A3: " + ((Node) a3List.item(0)).getNodeValue() + "\n" +
        "P3: " + ((Node) p3List.item(0)).getNodeValue(),
        Toast.LENGTH_LONG).show();

}
} catch (Exception e) {
System.out.println("XML Pasing Excpetion = " + e);
}

/** Set the layout view to display */
setContentView(layout);

}
} 
```

我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="your.pace.namace"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />
    <uses-permission android:name="android.permission.INTERNET"></uses-permission>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".XMLParsingUsingDomeActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

而且 logcat 输出毫无价值。我没有更改代码，但它不再工作了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T22:35:36.620

有什么例外？

可能会发生几件事。可能是当您尝试从 Web 服务获取 URL 时。可能是因为您必须在 AsyncTask 中执行代码。我建议您右键单击您怀疑的行并切换断点，然后在包资源管理器中继续您的课程，右键单击它并转到“调试为”，然后转到“调试配置”。检查您正在调试正确的项目后，单击“调试”按钮。

欢迎进入调试模式，试试看是哪一行导致了异常。

# c# - Add Mime Type to a virtual directory

> ID：10162237
> 
> 赞同：2
> 
> 时间：2012-04-15T13:00:10.537
> 
> 标签：c#, iis, mime-types, virtual-directory

I want to add a MIME type to the newly created virtual directory, which is under 'Default Web Site'.

```
using (ServerManager manager = new ServerManager())
{
ServerManager manager = new ServerManager();
var vdir = manager.Sites["Default Web Site"].Applications["/"].VirtualDirectories["VDir"];
} 
```

I haven't been able to find appropriate examples/documentation where I can do it for a virtual directory (and not for a website), without using `DirectoryServices`. Any suggestions?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T13:10:15.340

Have you tried it like this (slight modification of [the example on IIS.NET](http://www.iis.net/ConfigReference/system.webServer/staticContent/mimeMap)):

```
using System;
using System.Text;
using Microsoft.Web.Administration;

internal static class Sample
{
   private static void Main()
   {
      using (ServerManager serverManager = new ServerManager())
      {
         Configuration vDirConfig = serverManager.GetWebConfiguration("Default Web Site", "/VDir");
         ConfigurationSection staticContentSection = vDirConfig.GetSection("system.webServer/staticContent");
         ConfigurationElementCollection staticContentCollection = staticContentSection.GetCollection();

         ConfigurationElement mimeMapElement = staticContentCollection.CreateElement("mimeMap");
         mimeMapElement["fileExtension"] = @"bla";
         mimeMapElement["mimeType"] = @"application/blabla";
         staticContentCollection.Add(mimeMapElement);

         ConfigurationElement mimeMapElement1 = staticContentCollection.CreateElement("mimeMap");
         mimeMapElement1["fileExtension"] = @"tab";
         mimeMapElement1["mimeType"] = @"text/plain";
         staticContentCollection.Add(mimeMapElement1);

         serverManager.CommitChanges();
      }
   }
} 
```

# javascript - 如何在 JavaScript 中进行日期验证？

> ID：10162238
> 
> 赞同：0
> 
> 时间：2012-04-15T13:00:17.857
> 
> 标签：javascript, validation, date

我正在用 JavaScript 编写生日验证表单，但它不能正常工作。例如，40/40/2012 是无效的，但它不会发出任何警报。

JavaScript

```
function onFormSubmit(form_element) {

    var birthday = form_element.birthday.value;
    if ( !/\d{2}\/\d{2}\/\d{4}/.test(form_element.birthday.value) )
    {
        alert("This field is required. Please enter date mm/dd/yyyy!");
        return false;
    }
    return true;
} 
```

HTML

```
<form onsubmit="return onFormSubmit(this)">
    Birthday:<input type="text" name="birthday" /><br />
    <input type="submit" value="submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T13:15:26.873

我喜欢做的是：

```
var birthday = form_element.birthday.value;
var match = /^(\d\d)\/(\d\d)\/(\d\d\d\d)$/.exec(birthday);
if (!match || match.length < 4) return false;

var d = new Date(match[3] - 0, (match[2] - 0) - 1, match[1] - 0);
if (d.getFullYear() != match[3] || d.getMonth() + 1 != match[2] || d.getDate() != match[1])
  return false;

return true; 
```

如果您从有效的年/月/日创建日期，然后在 Date 对象上检查这些值，您应该得到相同的值。如果您不这样做，则意味着 Date 对象调整了虚假值以表示有效日期，这意味着虚假值是虚假的。

*编辑*——对不起，我的代码是为日/月/年编写的；如果你想要月/日/年，交换`match[2]`和`match[1]`在上面。

# c# - 如何检查字符串是否为正整数？

> ID：10162239
> 
> 赞同：7
> 
> 时间：2012-04-15T13:00:21.063
> 
> 标签：c#, parsing, int

我是说 ：

```
1231 YES
121.1241 NO
121,1241 NO
-121 NO
124a NO 
```

我怎样才能在 C# 中更快地做到这一点？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-15T13:01:25.330

```
int x;
if (int.TryParse(str, out x) && x > 0) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-15T13:06:48.417

您可以检查它是否仅包含数字：

```
if (theString.All(Char.IsDigit)) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-15T13:06:36.963

*实际解析*它的另一种方法是检查字符串是否为非空且*仅*`+`包含数字，如果您愿意，可以选择带前导符号。

请注意，这不会执行任何范围检查 - 因此 9999999999999999999999999999999999 将是有效的，即使它不适合 a`int`或 a `long`。

您可以为此使用正则表达式，或者可能使用 LINQ：

```
var nonNegative = text.Length > 0 && text.All(c => c >= '0' && c <= '9'); 
```

（这类似于 Guffa 的`Char.IsDigit`方法，但仅限于 ASCII 数字。Unicode 中有许多非 ASCII 数字。）

请注意，这会将其限制*为非负值*- 而不仅仅是*正值*。您想如何处理“0”和“0000”？

# php - 发送电子邮件时的 smtp 错误：发件人地址必须包含域

> ID：10162245
> 
> 赞同：1
> 
> 时间：2012-04-15T13:01:20.940
> 
> 标签：php, email, smtp, phpmailer

嗨，当我尝试发送电子邮件时收到此错误

```
SMTP -> ERROR: MAIL not accepted from server: 501 : sender address must contain a domain 
```

它曾经工作正常我不确定我使用 php mailer 发生了什么，但我认为这并不重要

```
 $smtp = setting::get_smtp( 1 , 'support');      

   $mail   = new PHPMailer(); 
   $mail->IsSMTP(); 
   $mail->Host       = $smtp->address;  //localhost
   $mail->CharSet    = "utf-8";                              
   $mail->SMTPAuth   = true;                 
   $mail->Port       = $smtp->port;    // 25                  
   $mail->Username   = $smtp->username; 
   $mail->Password   = $smtp->password;   
   $mail->From       =  $smtp->from ; // www.mysite.com
   $mail->AddReplyTo ($smtp->username , $smtp->from ); // noreply@mysite.com //www.mysite.com
   $mail->Subject    = $title;
   $mail->AltBody    = "To view the message, please use an HTML compatible email viewer!"; 

       $mail->MsgHTML($msg);
       $mail->SMTPDebug = 1;
       if( filter_var( $admin_email , FILTER_VALIDATE_EMAIL ) == TRUE ){
       $mail->AddAddress($admin_email , "John Doe");
           $mail->Send();
       } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T13:03:54.470

错误消息有点误导，但问题很清楚。标`From:`头必须包含一个域作为完整的电子邮件地址。如果您的`$smtp->from`contains `www.mysite.com`，那是一个无效的电子邮件地址，缺少 . 之后的部分`@`。邮寄者将您的域名误解为只是电子邮件地址的第一部分（用户部分），并抱怨它需要`@domain`与它一起使用。`$smtp->from`向您的物业提供完整的发件人电子邮件地址。

```
 // Should be something like sender@example.com
 $mail->From       =  $smtp->from ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T13:03:29.723

不应该将 $mail->From 设置为电子邮件地址吗？

# javascript - 在 django 模板中包含 javascript 的最佳实践

> ID：10162247
> 
> 赞同：6
> 
> 时间：2012-04-15T13:01:38.803
> 
> 标签：javascript, django, templates

以前我曾经在模板中这样做

```
<html>
...
<script>
 {% include "myapp/includes/jquery-1.7.1.min.js" %}
{% include "myapp/includes/myscript.js" %}
</script>
... 
```

但这会导致页面源上显示所有 js 代码。

我没有在我的模板中使用任何表单，那么我可以使用 Media 类来添加 js 吗？

我应该只使用`<script src=".."` 或链接 ref=".." 来添加 javascript 文件吗？哪个是更好的方法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-15T13:03:04.023

`<script src="yourscript.js"></script>`照常使用，不带`include`模板标签。

Django`include`模板标签并不意味着加载 JavaScript 源代码。它用于包含*子模板*，其标记可以访问*包含模板*的模板上下文。[在这里](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#include)阅读。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-04-15T07:36:43.940

我知道这个问题已有 6 年历史，答案是该问题的准确答案。但不知何故，这在我的谷歌搜索结果中出现了如此高的位置，我想我会在这里发布更多信息，以帮助像我这样的人，寻找最佳实践。对内容、css 和 javascript 使用模板继承和块。

文件：

[https://docs.djangoproject.com/en/2.0/ref/templates/language/#template-inheritance](https://docs.djangoproject.com/en/2.0/ref/templates/language/#template-inheritance)

和一个 stackoverflow 示例，展示了如何使用 block.super 将另一个 js 文件添加到原始 js 块：

[如何在 Django 中组织 JS 文件？](https://stackoverflow.com/questions/34586259/how-to-organize-js-files-in-django)

# java - 用户如何（安全地）用 Java 编写自己的过滤器

> ID：10162251
> 
> 赞同：2
> 
> 时间：2012-04-15T13:01:58.430
> 
> 标签：java, dynamic, groovy, rhino

我希望我的用户在用 Java 请求列表时能够编写自己的过滤器。

**选项 1)**我正在考虑使用 Rhino 编写 JavaScript。
我将用户的过滤器作为 javascript 字符串获取。然后调用`isAccepted(myItem)`这个脚本。
根据我是否接受该元素的回复。

**选项 2）**我正在考虑 Groovy。
我的用户可以在文本字段中编写 Groovy 脚本。当我的用户使用此过滤器进行搜索时，Groovy 脚本会在 Java 中编译（如果第一次调用）并调用 Java 方法`isAccepted()` ，具体取决于我是否接受该元素的回复。

我的应用程序在很大程度上依赖于这种功能，它将在我的服务器上被密集调用。
所以我相信速度是关键。

**选项 1 思考：** 如果我错了，请纠正我，但我认为 Groovy 的主要优势是速度，但我的用户可以在我的服务器上编译和运行不需要的代码......（任何解决方法？）

**选项 2 思考：** 我认为在大多数人看来 JavaScript 更像是一个玩具。即使这根本不是我的主意**，**也可能是因为我的客户不会那么信任它。你认为是吗？
根据我在网上的阅读，我期望的另一个坏点是速度。
再次，我的用户可以[访问 Java](http://www.mozilla.org/rhino/ScriptingJava.html)并在我的服务器上运行不需要的代码......（任何解决方法？）

更多信息：我正在 Google App Engine 上为我的应用程序的主要网络服务运行我的应用程序。
过滤器将通过调用应用 20 次。
过滤器（大多数时候）很简单。

有什么想法可以让这个过滤器对我的服务器安全吗？
还有其他方法可以使它工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T15:22:24.413

一些想法：

*   无论您使用 JavaScript 还是 Groovy，它都将在您提供给脚本的上下文中运行，因此脚本应该无法访问您不希望它访问的任何内容（当然，您应该对其进行广泛测试以一定要走这条路）。

*   如果可能的话，将过滤器表达式指定为数据而不是可执行代码可能会更安全。当然，这取决于过滤器表达式的复杂程度。也许您可以将表示分解为字段、比较器和值之类的东西，或者类似的东西，可以将其视为数据并以常规方式进行评估？

*   如果您担心用户可以通过脚本语言注入什么，那么使用 JavaScript 可能更安全。我不认为性能应该是一个问题，但我再次建议进行广泛的测试以确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T22:20:59.853

我的想法：

*   在编译脚本时，您必须使用自己的类加载器，以避免从脚本中访问任何其他类。不确定在 GAE 中是否可行。
*   您必须使用 Java 的 SecurityManager 功能来避免脚本能够访问文件系统、网络等。不确定在 GAE 中是否可行。

只看上面的两个项目，对我来说它看起来非常复杂和脆弱。如果你找不到现有的沙盒功能作为现有项目，你应该远离它。

设计一种允许您认为合法的表达式的领域特定语言要安全得多，并且查看上述项目，无论如何您都必须非常努力地思考您想要允许的内容。从那里到设计语言并不是一个很大的步骤。

注意不要使用 groovy 闭包（内部 DSL）来实现 DSL，因为那只是 groovy，而且你也可以破解。您需要定义一种外部语言并对其进行解析。我推荐使用解析器组合器 jparsec 来定义语法。在这种情况下不需要编译器编译器。

[http://jparsec.codehaus.org/](http://jparsec.codehaus.org/)

仅供参考，这是我用 jparsec 编写的一个小解析器（常规代码）：

```
 //import some static methods, this will allow more concise code
    import static org.codehaus.jparsec.Parsers.*
    import static org.codehaus.jparsec.Terminals.*
    import static org.codehaus.jparsec.Scanners.*

    import org.codehaus.jparsec.functors.Map as FMap
    import org.codehaus.jparsec.functors.Map4 as FMap4
    import org.codehaus.jparsec.functors.Map3 as FMap3
    import org.codehaus.jparsec.functors.Map2 as FMap2

    /**
     * Uses jparsec combinator parser library to construct an external DSL parser for the following grammar:
     * <pre>
     *     pipeline := routingStep*
     *     routingStep := IDENTIFIER '(' parameters? ')'
     *     parameters := parameter (',' parameter)*
     *     parameter := (IDENTIFIER | QUOTED_STRING)  ':' QUOTED_STRING
     * </pre>
     */
    class PipelineParser {
        //=======================================================
        //Pass 1: Define which terminals are part of the grammar
        //=======================================================
        //operators
        private static def OPERATORS = operators(',', '(', ')', ':')
        private static def LPAREN = OPERATORS.token('(')
        private static def RPAREN = OPERATORS.token(')')
        private static def COLON = OPERATORS.token(':')
        private static def COMMA = OPERATORS.token(',')

        //identifiers tokenizer
        private static def IDENTIFIER = Identifier.TOKENIZER
        //single quoted strings tokenizer
        private static def SINGLE_QUOTED_STRING = StringLiteral.SINGLE_QUOTE_TOKENIZER

        //=======================================================
        //Pass 2: Define the syntax of the grammar
        //=======================================================
        //PRODUCTION RULE: parameter := (IDENTIFIER | QUOTED_STRING) ':' QUOTED_STRING
        @SuppressWarnings("GroovyAssignabilityCheck")
        private static def parameter = sequence(or(Identifier.PARSER,StringLiteral.PARSER), COLON, StringLiteral.PARSER, new FMap3() {
            def map(paramName, colon, paramValue) {
                new Parameter(name: paramName, value: paramValue)
            }
        })

        //PRODUCTION RULE: parameters := parameter (',' parameter)*
        @SuppressWarnings("GroovyAssignabilityCheck")
        private static def parameters = sequence(parameter, sequence(COMMA, parameter).many(), new FMap2() {
            def map(parameter1, otherParameters) {
                if (otherParameters != null) {
                    [parameter1, otherParameters].flatten()
                } else {
                    [parameter1]
                }
            }
        })

        //PRODUCTION RULE: routingStep := IDENTIFIER '(' parameters? ')'
        @SuppressWarnings("GroovyAssignabilityCheck")
        private static def routingStep = sequence(Identifier.PARSER, LPAREN, parameters.optional(), RPAREN, new FMap4() {
            def map(routingStepName, lParen, parameters, rParen) {
                new RoutingStep(
                    name: routingStepName,
                    parameters: parameters ?: []
                )
            }
        })

        //PRODUCTION RULE: pipeline := routingStep*
        @SuppressWarnings("GroovyAssignabilityCheck")
        private static def pipeline = routingStep.many().map(new FMap() {
            def map(from) {
                new Pipeline(
                    routingSteps: from
                )
            }
        })

        //Combine the above tokenizers to create the tokenizer that will parse the stream and spit out the tokens of the grammar
        private static def tokenizer = or(OPERATORS.tokenizer(), SINGLE_QUOTED_STRING, IDENTIFIER)

        //This parser will be used to define which input sequences need to be ignored
        private static def ignored = or(JAVA_LINE_COMMENT, JAVA_BLOCK_COMMENT, WHITESPACES)

        /**
         * Parser that is used to parse extender pipelines.
         * <pre>
         *     def parser=PipelineParser.parser
         *     Pipeline pipeline=parser.parse(pipelineStr)
         * </pre>
         * Returns an instance of {@link Pipeline} containing the AST representation of the parsed string.
         */
        //Create a syntactic pipeline parser that will use the given tokenizer to parse the input into tokens, and will ignore sequences that are matched by the given parser.
        static def parser = pipeline.from(tokenizer, ignored.skipMany())
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T05:08:32.090

我永远不会让用户输入任意代码。它脆弱、不安全且用户体验不佳。对你的用户一无所知，我猜你会花很多时间回答问题。如果你的大多数过滤器都很简单，为什么不为他们创建一个小的过滤器构建器呢？

就 groovy 与 JavaScript 而言，我认为 groovy 更容易理解并且更适合编写脚本，但这只是我的看法。

# php - 无论我输入是否正确，验证码检查都会失败

> ID：10162252
> 
> 赞同：0
> 
> 时间：2012-04-15T13:01:58.647
> 
> 标签：php, captcha

我正在使用secureImage，这是一种实现验证码的简单方法，我按照那里的指南添加代码，但是，即使我输入了正确的值，检查也总是无效

它是那个插件的[网站](http://www.phpcaptcha.org/documentation/quickstart-guide/)，在十行代码之内：

这是我的代码：

**以html形式**

```
<img id="captcha" src="http://www.phpcaptcha.org/securimage3/securimage_show.php?0.6905195268336684" alt="CAPTCHA Image">

<input type="text" class="required" name="captcha_code" size="10" maxlength="6"> 
```

**在验证 php**

```
include_once '../plugin/securimage/securimage.php';

$securimage = new Securimage();

if ($securimage->check($_POST['captcha_code']) == false) {
  die ("<div class='alert alert-success'><strong>The security code entered was incorrect.</strong><br /><br />Please go <a href='javascript:history.go(-1)'>back</a> and try again.</div>");
} 
```

我检查了 post 值，这正是我输入的。我想知道插件用来与我的输入比较的数据，但是，我不能通过回显 $secureimage 来做到这一点

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T16:25:45.960

如果你懒得写代码，也许你可以在[http://www.google.com/recaptcha](http://www.google.com/recaptcha)试试。它被广泛使用，我认为它比secureimage更好。[您可以在此站点](https://developers.google.com/recaptcha/docs/php)获得 php 实现。如果我不直接回答您的问题，我很抱歉，这是因为 Mr.GolezTrol 建议不要使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T16:29:28.650

要将随机生成的图像与用户输入的代码进行比较，需要一个有效的会话。请查看此[快速入门指南](http://www.phpcaptcha.org/documentation/quickstart-guide/)并阅读有关将**session_start()**置于 PHP 脚本之上的部分。

# python - 从一个网站爬取多个网页

> ID：10162257
> 
> 赞同：0
> 
> 时间：2012-04-15T13:02:50.030
> 
> 标签：python, scrapy, web-crawler

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector

class DmozSpider(BaseSpider):
    name = "dmoz"
    allowed_domains = ["dmoz.org"]
    start_urls = [
        "www.dmoz.org/Computers/Programming/Languages/Python/Books/",
        "www.dmoz.org/Computers/Programming/Languages/Python/Resources/"
    ]

    def parse(self, response):
        hxs = HtmlXPathSelector(response)
        sites = hxs.select('//ul/li')
        for site in sites:
            title = site.select('a/text()').extract()
            link = site.select('a/@href').extract()
            desc = site.select('text()').extract()
            print title, link, desc 
```

这是我的代码。我想要大量的 URL 来使用循环抓取。那么我应该怎么做这些呢？我确实在那里放了多个网址，但我没有从所有网址中获得输出。某些 URL 停止响应。那么如何使用此代码确定获取数据呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T13:21:58.980

你的代码看起来不错，但你确定不`start_urls`应该从`http://`

```
start_urls = [
    "http://www.dmoz.org/Computers/Programming/Languages/Python/Books/",
    "http://www.dmoz.org/Computers/Programming/Languages/Python/Resources/"
] 
```

**UPD**

`start_urls`是一个scrapy开头的url列表。通常它有一个或两个链接。很少更多。这些页面必须具有相同的 HTML 结构，因为 Scrapy 蜘蛛以相同的方式处理它们。

> 看看我是否在 start_urls 中放置了 4-5 个 url，它为前 2-3 个 url 提供了输出。

我不相信这一点，因为scrapy 不在乎`start_urls`列出了多少链接。

> 但它停止响应并告诉我如何为此实现 GUI。

Scrapy 有[调试外壳](http://doc.scrapy.org/en/latest/topics/shell.html)来测试你的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T13:19:48.523

您刚刚发布了[教程](http://readthedocs.org/docs/scrapy/en/latest/intro/tutorial.html)中的代码。您应该做的是实际*阅读*整个文档，尤其是[基本概念](http://readthedocs.org/docs/scrapy/en/latest/#basic-concepts)部分。您基本上想要的是[爬虫](http://readthedocs.org/docs/scrapy/en/latest/topics/spiders.html#crawlspider)，您可以在其中定义蜘蛛将遵循并使用给定代码处理的规则。

用示例引用文档：

```
from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.selector import HtmlXPathSelector
from scrapy.item import Item

class MySpider(CrawlSpider):
    name = 'example.com'
    allowed_domains = ['example.com']
    start_urls = ['http://www.example.com']

    rules = (
        # Extract links matching 'category.php' (but not matching 'subsection.php')
        # and follow links from them (since no callback means follow=True by default).
        Rule(SgmlLinkExtractor(allow=('category\.php', ), deny=('subsection\.php', ))),

        # Extract links matching 'item.php' and parse them with the spider's method parse_item
        Rule(SgmlLinkExtractor(allow=('item\.php', )), callback='parse_item'),
    )

    def parse_item(self, response):
        self.log('Hi, this is an item page! %s' % response.url)

        hxs = HtmlXPathSelector(response)
        item = Item()
        item['id'] = hxs.select('//td[@id="item_id"]/text()').re(r'ID: (\d+)')
        item['name'] = hxs.select('//td[@id="item_name"]/text()').extract()
        item['description'] = hxs.select('//td[@id="item_description"]/text()').extract()
        return item 
```

# vb.net - 将文本从 .txt 分离到列表视图中的列（VB.net 移动版）

> ID：10162262
> 
> 赞同：0
> 
> 时间：2012-04-15T13:03:12.770
> 
> 标签：vb.net, windows-mobile

我想在 VB.net 中将每个文本分成它们自己的列。

我如何实现这一目标？

![屏幕截图](../Images/24cc1ecbd0965058336c3f1f96af61bf.png)

每个主菜都用“|”分隔 . 我的代码：

```
 Private Sub MenuItem3_Click_1(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MenuItem3.Click
    Dim folder As String = Environment.GetFolderPath(Environment.SpecialFolder.Personal)
    Using sw As StreamWriter = File.AppendText("\My Expenses.txt")

        sw.WriteLine(DateTimePicker.Text + Space(1) & "|" & Subject.Text + Space(4) & "|" & Category.Text + Space(5) & "|" & Amount.Text + Space(4) & "|" & Peyment.Text)
        sw.Close()

    End Using
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T00:51:50.147

目前我没有任何移动应用程序可供试验，但我相信你所追求的是这样的：

```
Private Sub MenuItem3_Click_1(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MenuItem3.Click
  Using sw As StreamWriter = File.AppendText("\My Expenses.txt")
    For Each item As ListViewItem in ListView1
      Dim line As String = Nothing
      For Each entry As String in item.SubItems
        line.Append(entry & "|")
      Next For
      sw.WriteLine(line)
    Next For
    sw.Close()
  End Using
End Sub 
```

我可能误解了您要执行的操作，但我认为您正在尝试获取列条目。

**更新：**

既然您已将设置保存到文件中，您将如何取回它们？

```
Private Sub PopulateListView()
  ListView1.Items.Clear()
  Using sr As StreamReader = File.OpenText("\My Expenses.txt")
    While (-1 < sr.Peek())
      Dim line As String = sr.ReadLine()
      Dim item As New ListViewItem(line.Split("|"c))
      ListView1.Items.Add(item)
    End While
    sr.Close()
  End Using
End Sub 
```

当然，您的代码可能需要进行特殊处理，但这涵盖了基本的读写操作。

# java - Android：重建现在需要编译器合规级别 5.0 或 6.0。而是找到了“1.7”。为什么要删除@Override？

> ID：10162265
> 
> 赞同：6
> 
> 时间：2012-04-15T13:03:38.010
> 
> 标签：java, android

> **可能重复：**
> [Android 要求编译器合规级别为 5.0 或 6.0。而是找到了“1.7”。请使用 Android 工具 > 修复项目属性](https://stackoverflow.com/questions/7637144/android-requires-compiler-compliance-level-5-0-or-6-0-found-1-7-instead-plea)

重建我的电脑后，我在导入我的项目时收到此错误。

```
Android requires compiler compliance level 5.0 or 6.0\. Found '1.7' instead. Please use Android Tools > Fix Project Properties. 
```

我在 SO 上看到了这个问题，我可以通过修复项目来修复我的项目，然后删除我所有的 @OVerrides。

**这个问题是为什么我现在需要删除@Overrides？这会改变我的项目吗？**

干杯

***编辑以添加演练信息。***

我导入一个项目，我收到上面显示的错误。然后我做`Android Tools > Fix Project Properties`. 现在将 Project>Properties Java Compile 设置为 Compiler Compliance Level 1.5

在此之后，我的 java 文件中出现了一系列错误。在这个特定项目上，我的错误出现在

```
@Override 
public void run() {... 
```

错误读取左侧的错误标记...

```
Multiple markers at this line
    - The method run() of type new Runnable(){} must override a superclass 
     method
    - implements java.lang.Runnable.run 
```

eclipse 中的错误悬停表明我删除了@Override 来解决这个问题，如果我删除了@Override，它确实解决了这个问题，我的项目现在可以编译并运行。这是不正确的吗？

**ps 我刚刚写了所有这些，将 Java 合规级别更改为 1.6，所有覆盖错误都消失了！有人可以解释（我完全理解这可能完全偏离主题）为什么？**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-15T13:08:03.963

不要删除任何@overide 符号。

您必须将项目兼容性设置为 Java 5.0 或 Java 6.0。

为此，有 2 个选项：

1）右键单击您的项目并选择`"Android Tools -> Fix Project Properties"`（如果这不起作用，请尝试第二个选项）

2）右键单击您的项目并选择`"Properties -> Java Compiler"`，选中**“启用项目特定设置”并从****“编译器合规性设置”**选择框中选择1.5或1.6 。

请参阅此[链接](http://kyleclegg.com/android-requires-compiler-compliance-level-5-0/)以供参考

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T01:11:14.523

第一次更新一切....

现在右键单击您的项目并选择“Android工具”然后选择“添加支持库”它将更新然后尝试我从上面复制的东西......

1）右键单击您的项目并选择“Android工具->修复项目属性”（如果这不起作用，请尝试第二个选项）

2）右键单击您的项目并选择“Properties -> Java Compiler”，选中“Enable project specific settings”并从“Compiler compliance settings”选择框中选择1.5或1.6。

非常感谢 Agarwal Shankar 的开始......

# c - 如何将此结构数组传递给函数，我的代码有什么问题？

> ID：10162268
> 
> 赞同：-1
> 
> 时间：2012-04-15T13:03:59.020
> 
> 标签：c, arrays

**问题是：**

一门课程具有以下特点：

```
Course Name: cName (string of 32 characters)
Course Number: cNumber (integer)
Number of Students enrolled: nStudents (integer)
Level: Level (character: ‘G’ for graduate, ‘U’ for undergraduate)
Grades: sGrades (array of 40 integers)

Define a structure, called CourseType, which includes the above properties.

In the main program: use the structure you defined to declare an array of 5 courses, and store in this array the information below about these courses (the information below specify the course name, number, number of students, and level:

“Introduction to Programming”, 230, 37, ‘U’
“Computer Networks”, 450, 44, ‘U’
“Data Structures & Algorithms”, 330, 38, ‘U’
“Distributed Databases”, 630, 18, ‘G’
“Mobile Ad hoc Networks”, 656, 34, ‘G’ 
```

关于成绩，对于每门课程，生成与学生数量一样多的随机值，并将它们存储在成绩数组 (sGrades) 中。这些值应介于 50 和 100 之间。

```
Write a function DisplayCourseStatistics that takes as input a course structure, and computes the average grade, minimum grade, and maximum grade in the course. After computing these three values, the function displays them.

In the main program: after defining the structure and the five courses in part c, and populating these courses with the data (including the grades), ask the user to specify the course number. Then call the function DisplayCourseStatistics and pass it the corresponding course structure in order for it to display the grade statistics (average, minimum, and maximum). 
```

**我写的代码我**仍然有错误=[

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
typedef struct CourseType CourseType;
struct CourseType
{
char cName[32];
int cNumber;
int nStudents;
char Level;
int sGrades[44];
};
void DisplayCourseStatistics(CourseType course[],int n);
int main()
{
int i;
CourseType course[5];
strcpy(course[0].cName,"Introduction to Programming");
course[0].cNumber=230;
course[0].nStudents=37;
course[0].Level='U';
for(i=0;i<37;i++)
{
course[0].sGrades[i]=50+rand()%(50);
}
strcpy(course[1].cName,"Computer Networks");
course[1].cNumber=450;
course[1].nStudents=44;
course[1].Level='U';
for(i=0;i<44;i++)
{
course[1].sGrades[i]=50+rand()%(50);
}
strcpy(course[2].cName,"Data Structures & Algorithms");
course[2].cNumber=330;
course[2].nStudents=38;
course[2].Level='U';
for(i=0;i<38;i++)
{
course[2].sGrades[i]=50+rand()%(50);
}
strcpy(course[03].cName,"Distributed Databases");
course[3].cNumber=630;
course[3].nStudents=18;
course[3].Level='G';
for(i=0;i<18;i++)
{
course[3].sGrades[i]=50+rand()%(50);
}
strcpy(course[4].cName,"Mobile Ad hoc Networks");
course[4].cNumber=656;
course[4].nStudents=34;
course[4].Level='G';
for(i=0;i<34;i++)
{
course[4].sGrades[i]=50+rand()%(50);
}
int n;
printf("enter the course number that you'd like to display its stat");
scanf("%d",&n); 
DisplayCourseStatistics(CourseType course[n],n);
}
void DisplayCourseStatistics(CourseType course[n],int n)
{
int average_grade;
int minimum_grade;
int maximum_grade;
int sum=0;
int i;
for(i=0;i<course[n].nStudents;i++)   
{
sum+=course[n].sGrades[i];
if(course[n].sGrades[i]>course[n].sGrades[i+1])
{  
minimum_grade=course[n].sGrades[i+1];
maximum_grade=course[n].sGrades[i];
}
else if(course[n].sGrades[i]<course[n].sGrades[i+1])
{
minimum_grade=course[n].sGrades[i];
maximum_grade=course[n].sGrades[i+1];
}
}
printf("The Average Grade is %d\nThe Maximum Grade is %d\nThe Minimum Grade is %d\n",average_grade=(sum/course[n].nStudents),maximum_grade,minimum_grade); 
```

}

怎么了，我该怎么办谢谢！！！

对于评论，它应该是 40，但我使用的是 44，因为在一门课程中，学生人数是 44，大于 40，所以对于错误，实际上我一直在使用键盘，所以我不确定它是否说**错误：函数“DisplayCourseStatistics”的参数太少**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:11:58.977

在这里，您需要像传递数组一样传递结构数组。考虑这一行：

```
DisplayCourseStatistics(CourseType course[n],n); 
```

这是错误的。您可以编写类似于数组，只需将结构的名称传递为：

```
DisplayCourseStatistics(course,n); 
```

现在你需要定义你的函数：

```
void DisplayCourseStatistics(CourseType course[n],int n) 
```

这应该是

```
void DisplayCourseStatistics(CourseType course[],int n) 
```

现在得出结论，如果您需要传递一个结构或其数组，则需要将指向该结构的指针或指向第一个成员的指针传递给结构数组（如果是数组）。这就是您可以将结构变量传递给函数的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T13:16:51.020

***符合文字***

任务是询问课程编号并显示该课程。到目前为止，您正在请求数组索引并显示它。此外，您不应该同时发送索引和数组，只发送`DisplayCourseStatistics()`函数的特定过程。

*正如您在问题“如何将这个结构数组传递给函数 […]”*的标题中所说的那样；- 但这与任务中断，

你应该有：

```
 +--- Struct, not array of struct
                                           |
void DisplayCourseStatistics(CourseType course)
{
    ... 
```

主要：

```
/* You can't specify type when calling */
DisplayCourseStatistics(CourseType course[n], n);
                        \__________________/
                                 |
                                 +--- Why do you do this?

/* Becomes: */
DisplayCourseStatistics(course); 
```

然后您必须更改原型和签名`DisplayCourseStatistics()`以符合此要求；如上图所示。

完成此操作后，您必须修复该函数以不使用数组。

除此之外，您在*Display* -function 中也有一个错误：正如您所说，您超出了数组的范围，`.sGrades[i+1]`同时您使`i`成为`.sGrades[]`.

* * *

附带说明：在 ie 上使用换行符没有问题：

```
printf("The Average Grade is %d\n"
       "The Maximum Grade is %d\n"
       "The Minimum Grade is %d\n",
       average_grade=(sum/course[n].nStudents),
       maximum_grade,minimum_grade); 
```

* * *

另外：您应该`scanf()`通过确保它返回 1 来验证（对于成功解析的 1 个项目，即“%d”）。

如果有人输入一个非整数，您将无法“访问”`n`它，因为它没有被初始化。

成功读取数字后，您需要找到一种方法来“翻译”该数字以更正`course`数组的课程索引，并将其传递给“计算和打印”函数。

IE

用户输入 330，您需要找到正确的索引，到目前为止`course[2]`并通过该索引。

# jakarta-ee - 无法让 jdbcRealm 工作

> ID：10162270
> 
> 赞同：2
> 
> 时间：2012-04-15T13:04:09.980
> 
> 标签：jakarta-ee, glassfish, jdbcrealm

我正在尝试让 jdbcRealm 为我的应用程序工作。这是我到目前为止所拥有的：

在我的 web.xml 中，我有：

```
<login-config>
    <auth-method>FORM</auth-method>
    <realm-name>jdbcRealm</realm-name>
    <form-login-config>
        <form-login-page>/user/login.jsf</form-login-page>
        <form-error-page>/user/error.jsf</form-error-page>
    </form-login-config>
</login-config>

<security-constraint>
    <web-resource-collection>
        <web-resource-name>Admin Console</web-resource-name>
        <url-pattern>/admin/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>admin</role-name>
    </auth-constraint>
</security-constraint> 
```

在 glassfish 我定义了一个领域：

```
Realm Name: jdbcRealm
Class Name: com.sun.enterprise.security.auth.realm.jdbc.JDBCRealm

JAAS Context: jdbcRealm
JNDI: jdbc/imagineSecurity
User Table: realm_user
User name column: username
Password column: password
Group table: realm_user_role_viw
Group name column: rolename
Digest algorithm: none
others fields are blank 
```

我已启用安全管理器和默认主体到安全设置下的角色映射。我还设置了 jdbcDigest 的默认领域，只是为了确保我相信在 web.xml 中设置它就足够了。

我已经创建了 jdbc 资源并测试了我可以从我的 web 应用程序中访问它们，所以那里不应该有问题。

当我尝试登录时，我的表单按预期显示，但是我收到以下错误：

> 警告：WEB9102：Web 登录失败：com.sun.enterprise.security.auth.login.common.LoginException：登录失败：管理员文件登录失败。警告：com.sun.enterprise.security.auth.login.common.LoginException 异常：登录失败：管理员文件登录失败。在 com.sun.enterprise.security.auth.login.LoginContextDriver.doPasswordLogin(LoginContextDriver.java:394) 在 com.sun.enterprise.security.auth.login.LoginContextDriver.login(LoginContextDriver.java:240) 在 com.sun .enterprise.security.auth.login.LoginContextDriver.login(LoginContextDriver.java:153) 在 com.sun.web.security.RealmAdapter.authenticate(RealmAdapter.java:512) 在 com.sun.web.security.RealmAdapter.authenticate (RealmAdapter.java:453) 在 org.apache.catalina.authenticator.FormAuthenticator.authenticate(FormAuthenticator.java:268) 在 org. SelectionKeyContextTask.call(SelectionKeyContextTask.java:59) 在 com.sun.grizzly.ContextTask.run(ContextTask.java:71) 在 com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532) 在 com .sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513) at java.lang.Thread.run(Thread.java:722) 原因：javax.security.auth.login.LoginException：文件登录失败对于管理员。在 com.sun.enterprise.security.auth.login.FileLoginModule.authenticate(FileLoginModule.java:84) 在 com.sun.enterprise.security.auth.login.PasswordLoginModule.authenticateUser(PasswordLoginModule.java:117) 在 com.sun .appserv.security.AppservPasswordLoginModule.login(AppservPasswordLoginModule.java:148) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect。

让我特别担心这个错误的是它说的部分：管理员的文件登录失败，这似乎表明它仍在使用文件领域。

我还有以下警告：警告：没有映射到角色 [admin] 的主体。但我相信默认主体到角色映射设置应该负责该映射。

我确实使用密码 admin 在我的数据库中插入了一个管理员用户和角色

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T14:31:31.313

在 server-config 节点下添加领域而不是 default-config 会有所帮助。

# java - 计算二维点的几何中值

> ID：10162273
> 
> 赞同：0
> 
> 时间：2012-04-15T13:04:46.563
> 
> 标签：java, median

我正在计算java中某些点的[几何中位数。](http://en.wikipedia.org/wiki/Geometric_median)`(x,y)`要计算`Geometric median`，首先我要计算`centroid`所有点，然后`centroid`用它来计算`Geometric median`。我的代码工作正常，但有时它会进入无限循环（我认为。）。问题在于我的`while`情况。这个`while`条件应该根据输入点改变，但我不知道怎么做。下面我放完整的代码。

```
import java.util.ArrayList;

public class GeometricMedian {

    private static ArrayList<Point> points = new ArrayList<Point>();

    private class Point {
        private double x;
        private double y;

        Point(double a, double b) {
            x = a;
            y = b;
        }
    }

    public static void main(String[] args) {
        GeometricMedian gm = new GeometricMedian();
        gm.addPoints();
        Point centroid = gm.getCentroid();
        Point geoMedian = gm.getGeoMedian(centroid);
        System.out.println("GeometricMedian= {" + (float) geoMedian.x + ", "
                + (float) geoMedian.y + "}");
    }

    public void addPoints() {
        points.add(new Point(0, 1));
        points.add(new Point(2, 5));
        points.add(new Point(3, 1));
        points.add(new Point(4, 0));
    }

    public Point getCentroid() {
        double cx = 0.0D;
        double cy = 0.0D;
        for (int i = 0; i < points.size(); i++) {
            Point pt = points.get(i);
            cx += pt.x;
            cy += pt.y;
        }
        return new Point(cx / points.size(), cy / points.size());
    }

    public Point getGeoMedian(Point start) {
        double cx = 0;
        double cy = 0;

        double centroidx = start.x;
        double centroidy = start.y;
        do {
            double totalWeight = 0;
            for (int i = 0; i < points.size(); i++) {
                Point pt = points.get(i);
                double weight = 1 / distance(pt.x, pt.y, centroidx, centroidy);
                cx += pt.x * weight;
                cy += pt.y * weight;
                totalWeight += weight;
            }
            cx /= totalWeight;
            cy /= totalWeight;
        } while (Math.abs(cx - centroidx) > 0.5
                || Math.abs(cy - centroidy) > 0.5);// Probably this condition
                                                    // needs to change

        return new Point(cx, cy);
    }

    private static double distance(double x1, double y1, double x2, double y2) {
        x1 -= x2;
        y1 -= y2;
        return Math.sqrt(x1 * x1 + y1 * y1);
    }
} 
```

请帮我修复这个错误，如果有更好的方法来计算`Geometric median`一些 2D 点，请写在这里。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T13:08:47.930

我不明白为什么你需要两个循环。您只需要遍历所有点。在您看来，另一个原因是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T02:17:03.600

解决此问题的一种方法是迭代一定次数。这类似于 K-Means 方法，它要么收敛到特定阈值，要么在预定义的迭代次数后停止。

# php - php 获取文件的根目录

> ID：10162277
> 
> 赞同：3
> 
> 时间：2012-04-15T13:05:32.767
> 
> 标签：php, include, require

如何获取主文件夹的根目录？例如我在这个位置运行文件：

```
public_html/admin/user/etc/index.php 
```

我想包含来自的文件

```
public_html/includes/user/etc/function.php 
```

所以我想做这样的事情：

```
include(get_first_default_folder().'includes/user/etc/function.php'); 
```

代替：

```
include('../../../includes/user/etc/function.php'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T14:31:02.407

您可以使用 $_SERVER['DOCUMENT_ROOT'] 中的文档根目录。

您可以在 index.php 文件中包含这一行。

```
          include("{$_SERVER['DOCUMENT_ROOT']}includes/user/etc/function.php");

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T14:41:47.830

我通常会这样做。`$myDir = dirname(__FILE__);`（或者您可以`__DIR__`在 PHP v5.3+ 上使用）是特定文件所在的目录名称。您知道这是在层次结构中的哪个位置，因此您可以使用`$myBaseDir = realpath('../../../'.$mydir)`'. [Realpath](http://php.net/realpath)将路径扩展到其规范版本，不包括任何符号链接。在包含或以其他方式查找文件时，拥有完整路径还可以加快速度。

我这样做而不是使用 的原因`$_SERVER['DOCUMENT_ROOT']`是，如果我从命令行运行脚本，则该环境变量可能不存在 - 它是由网络服务器设置的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T13:26:14.460

我想这有点笨拙，但它对我有用。在每个文件的开头我定义了一个变量`$root`。第一级变量是`$root = './'`（这不是必需的思想），第一个子文件夹是`$root = '../'`，第二个子文件夹是`$root = '../../'`等等。`$root`总是把我带到我网站的根文件夹。

当我需要提供路径时，我只需执行类似的操作`include("{$root}includes/user/etc/function.php");`

这帮助我摆脱了“没有这样的索引或文件”警告，所以我会坚持下去，直到找到更好的方法来做同样的事情。

或者，您可以为每个文件夹级别定义一个常量，这样您就不必`$root`在每个文件的顶部添加。（尚未对其进行测试，因此我不知道以下语法是否正确。）相反，您可以执行以下操作：

*   {ROOT}includes/user/etc/function.php");` // 根级文件
*   {SUBFOLDER_LEVEL_ONE}includes/user/etc/function.php");` // 第一个子文件夹级别的文件

在某处定义常量后：

*   定义（“根”，“./”）；
*   定义（“SUBFOLDER_LEVEL_ONE”，“../”）；

# javascript - 不能从外部事件更改对象变量

> ID：10162279
> 
> 赞同：1
> 
> 时间：2012-04-15T13:05:34.573
> 
> 标签：javascript, dom-events, setinterval

我正在玩用 JS 制作游戏。并撞上了无法从主 html 文件中的事件更改变量的砖墙。即说`offSetX`。为什么不改变？

```
var game = new Game();
window.addEventListener("keyup", game.input);
game.start('myCanvas'); 
```

游戏对象如下所示：

```
function Game() {

    this.offSetX = 0;

    this.init = function (id) {

        this.canvas = document.getElementById(id);
        this.context = this.canvas.getContext('2d');
        this.blocks = [];
        this.blocks.push(new block());

    };

    this.logic = function () {
        for (var i in this.blocks) {
            this.blocks[i].update(this.offSetX);
        }
    };

    this.draw = function () {
        for (var i in this.blocks) {
            this.blocks[i].draw(this.context);
        }
    };

    this.main = function () {
        this.logic();
        this.draw();
        console.log(this.offSetX);
    };
    this.input = function (key) {

        if (key.keyCode == 37) {
            this.offSetX--;
            console.log(this.offSetX);
        }
        if (key.keyCode == 39) {
            this.offSetX++;
            console.log(this.offSetX);
        }

    };

    this.start = function (id) {
        var _this = this;

        this.init(id);
        this.interval = setInterval(function () {
            _this.canvas.width = _this.canvas.width;
            _this.main();
        }, 30);
    }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T13:10:09.583

试试这个：

```
window.addEventListener("keyup", function(key){
   game.input.apply(game,[key]);
}); 
```

问题出`window.addEventListener("keyup", game.input)`在行上，您正在为`window`对象添加处理程序，这就是为什么在`input`方法中`"this"`是`window`对象（没有任何`"offSetX"`方法），而不是`game`对象。

# java - java：单词提取大写字母

> ID：10162281
> 
> 赞同：2
> 
> 时间：2012-04-15T13:05:41.857
> 
> 标签：java, regex

如何使用java从单词中提取大写字母？

```
example:
enter your words:Hello I Am Heyman
output:HIAH 
```

感谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-15T13:07:07.477

你可以试试replaceAll

```
String text2 = text.replaceAll("[^A-Z]", ""); 
```

正如@Vic 评论，包括所有英文/非英文大写字母。

```
String text2 = text.replaceAll("[^\p{Lu}]", ""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T13:15:08.327

这是在 String 上带有 for 循环的解决方案：

```
 String myString = "Hello I Am Heyman";
    String outPutString = "";
    for(int i = 0; i < myString.length(); i++) {
        char c = myString.charAt(i);
        if (Character.isUpperCase(c))
        {
            // it is Capital Letter
            outPutString += c;
        }
    }
    System.out.println(outPutString); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T13:26:05.970

```
Pattern p = Pattern.compile("[A-Z]");
Matcher m = p.matcher(textToLookInto);
String outString="";
while(m.find()){
 outString+=m.group();
}
System.out.println(outString); 
```

由于您已标记为正则表达式，因此考虑添加仅正则表达式的解决方案。

# visual-studio - 在 Visual Studio 中显示可能的和弦延续

> ID：10162282
> 
> 赞同：11
> 
> 时间：2012-04-15T13:05:42.653
> 
> 标签：visual-studio, visual-studio-2010, keyboard-shortcuts, chord

Visual Studio（有甚至没有插件）有很多和弦键。我所说的“和弦”是指几个连续的按，比如

*   格式化文档`Ctrl`+ `D`,`F`

*   提取方法 (resharper) `Ctrl`+ `R`, `Ctrl`+`M`

当我按下第一个组合时，状态栏显示：

> (Ctrk+K) 被按下。等待和弦的第二个键...

我记得当我按下和弦的第一个键时，Eclipse 会显示一个**弹出窗口，列出所有可能的延续。**

是否也可以在 Visual Studio 中实现这一点？可能是插件？有很多和弦，我很想看到一个快速列表，在我按下 ReSharper 的 Ctrl+R 等后重构延续。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T09:02:39.967

我刚刚找到[IntelliCommand extension](http://visualstudiogallery.msdn.microsoft.com/83f59659-abc1-4bfa-9779-42f687af0481)，它似乎完全符合您的要求。[您可以在此博文](http://outcoldman.com/en/blog/show/326)中找到更多信息：

> 当您按下和弦快捷键的第一个组合时，它还会显示可能的组合列表，如 Ctrl+K、Ctrl+C

# html - 是一种将 jQuery Mobile 标题列表分隔符固定在顶部的方法吗？

> ID：10162283
> 
> 赞同：2
> 
> 时间：2012-04-15T13:06:06.877
> 
> 标签：html, list, jquery-mobile, iphone-web-app

有没有办法让 jquery 移动列表分隔符标题固定在页面顶部，直到下一个字母或列表分隔符出现并取代它，就像在 iPhone UITableView 中一样？

（http://jquerymobile.com/test/docs/lists/lists-divider.html，列表分隔符不会停留在顶部，而是随着页面上下滚动。）

我已经在 SO（http://stackoverflow.com/questions/7814088/how-to-make-jquery-mobile-list-dividers-fixed-at-top）上搜索，但链接似乎已关闭。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T00:15:24.157

有一个很棒的插件可以做到这一点，并为您提供自定义事件等。该项目[在 GitHub 上可用](http://github.com/teamdf/jquery-list)，还有一篇关于它的[展示文章](http://www.teamdf.com/web/showcasing-jquery-list-with-a-fake-iphone/147/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T15:10:15.630

你必须移植这个： [stickySectionHeaders](http://polarblau.github.com/stickySectionHeaders/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T19:07:41.550

这是同一件事吗：[https](https://github.com/jquery/jquery-mobile/blob/master/experiments/scrollview/lists-divider.html) ://github.com/jquery/jquery-mobile/blob/master/experiments/scrollview/lists-divider.html ？

# c# - 访问 DataTemplate 中的当前项目

> ID：10162288
> 
> 赞同：1
> 
> 时间：2012-04-15T13:06:43.060
> 
> 标签：c#, wpf, xaml

以下控件绑定到用户列表：

```
<ItemsControl x:Name="Users">
      <ItemsControl.ItemTemplate>
        <DataTemplate> 
```

在这种情况下，我如何将用户传递给转换器，而不仅仅是它的属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T13:33:18.500

我假设你指的是一个`IValueConverter`实例？只需省略 Binding 的 Path 参数，它将传入当前`DataContext`（在您的情况下为`User`实例）。

此示例假定您的`IValueConverter`被称为`MyValueConverter`：

```
<ItemsControl x:Name="Users">
      <ItemsControl.ItemTemplate>
        <DataTemplate>
           <TextBox Text="{Binding Converter={StaticResource MyValueConverter}}" />
        </DataTemplate>
      <ItemsControl.ItemTemplate>
</ItemsControl> 
```

# python - 尝试使用 Python 脚本将字符串添加到文件中

> ID：10162292
> 
> 赞同：2
> 
> 时间：2012-04-15T13:06:57.567
> 
> 标签：python, file-manipulation

我有一本西班牙小说，在一个纯文本文件中，我想制作一个 Python 脚本，将翻译放在困难单词后面的括号中。我有一个单词列表（带有翻译），我想在一个单独的文本文件中执行此操作，我已尝试正确格式化。我已经忘记了我所知道的关于 Python 的一切，因为它一开始就很少，所以我很挣扎。这是有人帮助我的脚本：

```
bookin = (open("C:\Users\King Kong\Documents\_div_tekstfiler_\coc_es.txt")).read() 
subin = open("C:\Users\King Kong\Documents\_div_tekstfiler_\cocdict.txt")
for line in subin.readlines():
    ogword, meaning = line.split()
    subword = ogword + " ("  + meaning + ")"
    bookin.replace(ogword, subword)
    ogword = ogword.capitalize()
    subword = ogword + " ("  + meaning + ")"
    bookin.replace(ogword, subword)
subin.close()
bookout = open("fileout.txt", "w")
bookout.write(bookin)
bookout.close() 
```

当我运行它时，我收到了以下错误消息：

```
Traceback (most recent call last):
File "C:\Python27\translscript_secver.py", line 4, in <module>
ogword, meaning = line.split()
ValueError: too many values to unpack 
```

小说很大，我做的字典大约有一万个键值对。

这是否意味着字典有问题？还是太大了？一直在研究这个很多，但我似乎无法理解它。任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T13:08:09.310

`line.split()`in`ogword, meaning = line.split()`返回一个[list](http://docs.python.org/tutorial/datastructures.html)，在这种情况下它可能返回超过 2 个值。以可以处理两个以上值的方式编写代码。例如，通过分配`line.split()`给一个列表，然后断言该列表有两个项目：

```
mylist = line.split()
assert len(mylist) == 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T13:08:48.707

```
ogword, meaning = line.split()[:2] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-15T13:27:18.107

`line.split()`返回行中的单词列表（空格分隔的标记）。您收到的错误表明在某个地方，您的字典不仅仅包含对。您可以添加跟踪消息来定位错误（见下文）。

如果您的字典包含比同义词更丰富的定义，您可以使用以下行，将第一个单词放在 ogword 中，然后将后面的单词放在含义中。

```
words =  line.split()
ogword, meaning = words[0], " ".join(words[1:]) 
```

如果您的字典语法更复杂（组合 ogword），则必须依赖显式分隔符。您仍然可以使用 split 来划分行（`line.split("=")`将在“=”字符上划分行）

编辑：忽略并显示坏行，替换`ogword, meaning = line.split()`为

```
try:
    ogword,meaning = line.split()
except:
    print "wrong formated line:", line
    continue 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-15T13:09:51.643

```
split() 
```

返回一个列表，即一项，您正试图将这一项分配给两个变量。

如果列表中的项目数等于赋值语句左侧的变量数，它将起作用。即，解包列表并将各个部分分配给左侧的变量。

在这种情况下，正如@Josvic Zammit 所指出的，如果列表中有超过 2 个项目并且无法正确“解包”和分配，则可能会出现问题。

# ruby-on-rails - 我在哪里放置 $.mobile.hidePageLoadingMsg(); 禁用所有 jQuery Mobile 加载消息？

> ID：10162299
> 
> 赞同：0
> 
> 时间：2012-04-15T13:07:41.097
> 
> 标签：ruby-on-rails, jquery-mobile

Rails 应用程序的那行代码到底在哪里？哪个文件，是否有任何额外的语法？有没有人有一个完整的例子来说明如何禁用 jQuery 加载消息？我已经阅读了文档，但我认为我缺少一些非常基本的东西，但文档中没有明确涵盖。

谢谢

应用程序.js

```
//= require jquery
//= require jquery_ujs
//= require jquery.mobile 
```

应用程序.mobile.js

```
//= require jquery.mobile 
```

应用程序.css

```
*= require_self
*= require jquery.mobile
*= require scaffolds.css 
```

应用程序.mobile.css

```
*= require_self
*= require jquery.mobile 
```

宝石文件

```
source 'http://rubygems.org'

gem 'rails', '3.2.2'

# Bundle edge Rails instead:
# gem 'rails',     :git => 'git://github.com/rails/rails.git'

gem 'pg'
gem 'thin'

group :assets do
 gem 'sass-rails',   '~> 3.2.3'
 gem 'coffee-rails', '~> 3.2.1'
 gem 'uglifier'
end

gem 'jquery-rails'
gem 'mobylette'
gem 'jquery_mobile_rails'

group :test, :development do
 gem 'rspec'
 gem 'rspec-rails'
 gem 'sqlite3'
end 
```

应用程序.html.erb

```
<!DOCTYPE html>
<html>
<head>
  <title>Mobile Version!</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>

  <%= javascript_include_tag "application" %>
  <script type='text/javascript'>
    $.mobile.hidePageLoadingMsg();
  </script>
  <%= stylesheet_link_tag    "application" %>

  <%= javascript_include_tag "application.mobile.js" %>
  <%= stylesheet_link_tag    "application.mobile.css" %>

  <%= csrf_meta_tags %>

</head>
<body>
<div data-role="page">

    <%= yield %>

  <div data-role="footer" data-position="fixed">
    <div data-role="navbar">
      <ul>
        <li>
          <%= link_to notes_path, :class => ("ui-btn-active" if action_name == 'index'), :"data-icon" => "home", :"data-iconpos" => "top" do %>
            Home
          <% end %>
        </li>
        <li>
          <%= link_to new_note_path, :class => ("ui-btn-active" if action_name == 'new'), :"data-icon" => "plus", :"data-iconpos" => "top" do %>
        New Note
          <% end %>
         </li>
        </ul>
    </div>
  </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T00:36:57.373

我想你可能`$.mobile.hidePageLoadingMsg();`有点误解了这个方法。不过，我当然可以理解这种困惑。在 JQM 中，您可以使用编程方式显示加载消息`$.mobile.showPageLoadingMsg();`，然后您可以使用`$.mobile.hidePageLoadingMsg();`隐藏消息。您可以在自己的某些内容的 ajaxing 中使用它。

要禁用加载消息，您可以在此处使用我的示例。

```
<script src="//code.jquery.com/jquery-1.7.1.min.js" type="text/javascript"></script>
<script>
$(document).bind("mobileinit", function(){
  $.mobile.loadingMessage = false;
});
</script>
<script src="//code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script> 
```

移动初始化绑定用于配置 JQM 的默认值。它必须放在您的 jQuery 和 JQM 引用之间才能正常工作。[您可以在此处](http://jquerymobile.com/demos/1.1.0/docs/api/globalconfig.html)找到更多默认设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T15:16:07.880

要让它在所有页面上始终运行，最好的选择可能是在 app/views/layouts/application.html.erb 中。这假设您正在使用应用程序范围的布局。如果您刚刚使用 3.X 创建了一个新的 rails 应用程序，那么您就应该这样做。

让它工作的最简单的方法就是把它放在布局的头部，（暂时忽略资产管道）。

听起来（我不确定）这是一个 jquery，你不想在运行这段代码之前等待 DOM 加载。所以我会在rails应用程序生成器放置在布局中的默认javascript_include_tag之后放入一个脚本标签：

```
 <%= javascript_include_tag "application" %>
  <script type='text/javascript>
    $.mobile.hidePageLoadingMsg();
  </script> 
```

如果这仍然不能解决问题，您必须深入研究 app/assets/javascripts/application.js 清单，并在加载 jquery 的那一行之后输入一个新行，该行将调用一个 javascript 文件包含那一行代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T19:07:29.137

好的，基本上，这里的故事的寓意是不要为 jQuery Mobile 用户 Gems。说他们不工作是轻描淡写的……他们完成了 95% 的工作，但随后他们吐得如此壮观，以至于认为你一开始就尝试使用它们几乎是可笑的。这些 gem 似乎 (1) 在任何与 Rails 和/或 jQuery Mobile 远程相关的内容更新时具有天生的爆炸能力，(2) 被他们的 github 所有者突然且莫名其妙地除名，(3) 抛出非常罕见和自动错误，以及 (4) 与最初仅使用 jQuery Mobile 热链接相比，包含更多代码行（顺便说一句，对中断非常敏感）带来了巨大的好处。

为自己省去很多麻烦，只需使用热链接。如果不是这样，您将赢得一个由 jQuery Mobile Gems, Inc 赞助的全部费用的带薪假期。

应用程序.html.erb

```
 <title>Hello</title>

    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>

    <%= stylesheet_link_tag    "application", :media => "all" %>
    <%= javascript_include_tag "application" %> 
```

# android - Android：如何将画布添加到 FrameLayout？

> ID：10162305
> 
> 赞同：0
> 
> 时间：2012-04-15T13:08:02.107
> 
> 标签：android, android-layout

我正在尝试将绘制和编辑图像的画布添加到我的 FrameLayout 中。

DrawMap.java 扩展了 View 并包含了我的 onDraw(Canvas c)。首先，每次调用 onLocationChanged 时，我都会尝试调用此方法。这意味着 Canvas 需要被召回/更新。我怎么做？

这是另一件事。我正在尝试将带有图片的画布添加到我的 FrameLayout 中。位图由以下方式绘制：

```
c.drawBitmap(resizedBitmap, newX, newY, paint); 
```

这是使我的应用程序崩溃并应将画布添加到框架中的内容：

```
DrawMap d = new DrawMap(this);

FrameLayout frame_map = (FrameLayout) findViewById(R.id.frame_map);
frame_map.addView(d);
setContentView(frame_map); 
```

我正在使用两个 FrameLayouts 来分割屏幕。左边的（frame_map）应该显示一张地图，右边的（frame_info）显示相关信息（效果很好）。

我究竟做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T16:57:30.710

我相信问题是`setContentView(frame_map);`。如果`frame_map`是父视图的子视图，则必须将 frame_map 的父视图作为参数传递给`setContentView(View view);`.

这只是从您的代码模拟中得出的猜测。因此，我需要您的错误报告中的一些附加信息来提供明确的解决方案。

# mysql - MySQL 不更新重复键

> ID：10162311
> 
> 赞同：0
> 
> 时间：2012-04-15T13:08:38.817
> 
> 标签：mysql, indexing, duplicates, unique

嗨，我在处理这个查询时遇到了问题：

```
$size = isset($_POST['size'])
  ? "'".mysql_real_escape_string($_POST['size'])."'"
  : "NULL";

$color = isset($_POST['color'])
  ? "'".mysql_real_escape_string($_POST['color'])."'"
  : "NULL";

if (is_numeric($_POST['productID']) && is_numeric($_POST['amount']))
{           
  mysql_query("INSERT INTO usercart VALUES ('', '"
  .mysql_real_escape_string($_SESSION['user_ID'])."', '"
  .mysql_real_escape_string($_POST['productID'])."', "
  .$size." , ".$color." , '".mysql_real_escape_string($_POST['amount'])."')"
  ." ON DUPLICATE KEY UPDATE amount = amount + '"
  .mysql_real_escape_string($_POST['amount'])."'") or die(mysql_error());
} 
```

在我的 MySQL 表中，我有一个名为、`"product"`和的唯一索引。但是当我运行这个查询时，它只是插入而不是更新数量。阅读 MySQL 文档，我可以而且不必指定索引名称。`productID``userID``size``color`

几个小时以来一直在摆弄这个。所以有人知道怎么回事吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T13:36:30.763

看来您有一个代理键“cart_id”，它也作为第一个字段自动递增。您的片段可能会导致 DBMS 尝试将 user_id 输入第一个字段，即 cart_id。尝试使用指定的插入，省略 cart_id，例如：

```
INSERT INTO usercart(user_id, product_id, ... )
VALUES (user_id, product_id, ...)
   ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T13:43:11.263

NULL is always considered unique. So if you set either color or size to null the tuple you're inserting will be considered unique as far as your unique constraints are concerned.

# vba - Excel：在“kx + m”文本字符串中查找 k 和 m

> ID：10162316
> 
> 赞同：7
> 
> 时间：2012-04-15T13:09:26.483
> 
> 标签：vba, excel, excel-formula

有没有一种巧妙的方法`VBA`或公式在 a 中找到“k”和“m”变量`kx+m string`？

kx+m 字符串的外观有多种情况，例如：

```
312*x+12
12+x*2
-4-x 
```

等等。我很确定我可以通过在 Excel 中编写非常复杂的公式来解决这个问题，但我想也许有人已经解决了这个问题和类似的问题。这是迄今为止我最好的镜头，但它还不能处理所有情况（比如当 kx+m 字符串中有两个减号时：

`=TRIM(IF(NOT(ISERROR(SEARCH("~+";F5))); IF(SEARCH("~+";F5)>SEARCH("~*";F5);RIGHT(F5;LEN(F5)-SEARCH("~+";F5));LEFT(F5;SEARCH("~+";F5)-1)); IF(NOT(ISERROR(SEARCH("~-";F5))); IF(SEARCH("~-";F5)>SEARCH("~*";F5);RIGHT(F5;LEN(F5)-SEARCH("~-";F5)+1);LEFT(F5;SEARCH("~*";F5)-1));"")))`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T04:10:42.020

而不是`LINEST`在 VBA 中运行一个简单的解析。

`StrFunc`根据需要更换

```
Sub Extract()
Dim strFunc As String
Dim X(1 To 2) As Variant
Dim Y(1 To 2) As Variant
Dim C As Variant

X(1) = 0
X(2) = 100

strFunc = "312*x+12"
'strFunc = "12+x*2 "
'strFunc = "-4-X"

Y(1) = Evaluate(Replace(LCase$(strFunc), "x", X(1)))
Y(2) = Evaluate(Replace(LCase$(strFunc), "x", X(2)))
C = Application.WorksheetFunction.LinEst(Y, X)

MsgBox "K is " & C(1) & vbNewLine & "M is " & C(2)

End Sub 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-15T14:08:50.077

> > > 它比看起来更复杂。如果我没记错的话，kx+m 最多可以有 7 个运算符，最少可以有 1 个运算符。在这种情况下，获取“K”和“M”值变得非常复杂。– Siddharth Rout 33 分钟前

基于我在 duffymo 帖子中的评论

此快照显示了“kx + m”可以具有的不同组合

![在此处输入图像描述](../Images/c1069cec3efcf8a741f651ba878f1297.png)

如前所述，实现您想要的东西非常复杂。这是我目前仅提取“ **K ”的****微弱尝试**。***这段代码在任何方面都不是优雅的***:(我还没有测试过不同场景的代码，所以它可能会在其他情况下失败。但是它让你对如何解决这个问题有一个公平的想法。你将不得不对其进行更多调整以得到你想要的确切结果。

 *****代码**（我正在测试此代码中的 7 种可能组合。它适用于这 7 种，但可能/将对其他人失败）

```
Option Explicit

Sub Sample()
    Dim StrCheck As String
    Dim posStar As Long, posBrk As Long, pos As Long, i As Long
    Dim strK As String, strM As String
    Dim MyArray(6) As String

    MyArray(0) = "-k*(-x)+(-m)*(-2)"
    MyArray(1) = "-k*x+(-m)*(-2)"
    MyArray(2) = "-k(x)+(-m)*(-2)"
    MyArray(3) = "-k(x)+(-m)(-2)"
    MyArray(4) = "-kx+m"
    MyArray(5) = "kx+m"
    MyArray(6) = "k(x)+m"

    For i = 0 To 6
        StrCheck = MyArray(i)
        Select Case Left(Trim(StrCheck), 1)

        Case "+", "-"
            posBrk = InStr(2, StrCheck, "(")
            posStar = InStr(2, StrCheck, "*")

            If posBrk > posStar Then            '<~~ "-k*(-x)+(-m)*(-2)"
                pos = InStr(2, StrCheck, "*")
                If pos <> 0 Then
                    strK = Mid(StrCheck, 1, pos - 1)
                Else
                    strK = Mid(StrCheck, 1, posBrk - 1)
                End If
            ElseIf posBrk < posStar Then        '<~~ "-k(-x)+(-m)*(-2)"
                pos = InStr(2, StrCheck, "(")
                strK = Mid(StrCheck, 1, pos - 1)
            Else                                '<~~ "-kx+m"
                '~~> In such a case I am assuming that you will never use
                '~~> a >=2 letter variable
                strK = Mid(StrCheck, 1, 2)
            End If
        Case Else
            posBrk = InStr(1, StrCheck, "(")
            posStar = InStr(1, StrCheck, "*")

            If posBrk > posStar Then            '<~~ "k*(-x)+(-m)*(-2)"
                pos = InStr(1, StrCheck, "*")
                If pos <> 0 Then
                    strK = Mid(StrCheck, 1, pos - 2)
                Else
                    strK = Mid(StrCheck, 1, posBrk - 1)
                End If
            ElseIf posBrk < posStar Then        '<~~ "k(-x)+(-m)*(-2)"
                pos = InStr(1, StrCheck, "(")
                strK = Mid(StrCheck, 1, pos - 2)
            Else                                '<~~ "kx+m"
                '~~> In such a case I am assuming that you will never use
                '~~> a >=2 letter variable
                strK = Mid(StrCheck, 1, 1)
            End If
        End Select

        Debug.Print "Found " & strK & " in " & MyArray(i)
    Next i
End Sub 
```

**快照**

![在此处输入图像描述](../Images/805a09134629dcf4e82cb2b471be1aa5.png)

这并不多，但我希望这能让你走上正确的道路......

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-15T18:27:40.677

我相信这会对你有所帮助:)

将此函数放在一个模块中：

```
Function FindKXPlusM(ByVal str As String) As String
    Dim K As String, M As String
    Dim regex As Object, matches As Object, sm As Object

    '' remove unwanted spaces from input string (if any)
    str = Replace(str, " ", "")

    '' create an instance of RegEx object.
    '' I'm using late binding here, but you can use early binding too.
    Set regex = CreateObject("VBScript.RegExp")
    regex.IgnoreCase = True
    regex.Global = True

    '' test for kx+m or xk+m types
    regex.Pattern = "^(-?\d*)\*?x([\+-]?\d+)?$|^x\*(-?\d+)([\+-]?\d+)?$"
    Set matches = regex.Execute(str)
    If matches.Count >= 1 Then
        Set sm = matches(0).SubMatches
        K = sm(0)
        M = sm(1)
        If K = "" Then K = sm(2)
        If M = "" Then M = sm(3)
        If K = "-" Or K = "+" Or K = "" Then K = K & "1"
        If M = "" Then M = "0"
    Else
        '' test for m+kx or m+xk types
        regex.Pattern = "^(-?\d+)[\+-]x\*([\+-]?\d+)$|^(-?\d+)([\+-]\d*)\*?x$"
        Set matches = regex.Execute(str)
        If matches.Count >= 1 Then
            Set sm = matches(0).SubMatches
            M = sm(0)
            K = sm(1)
            If M = "" Then M = sm(2)
            If K = "" Then K = sm(3)
            If K = "-" Or K = "+" Or K = "" Then K = K & "1"
            If M = "" Then M = "0"
        End If
    End If
    K = Replace(K, "+", "")
    M = Replace(M, "+", "")

    '' the values found are in K & M.
    '' I output here in this format only for showing sample.
    FindKXPlusM = " K = " & K & "         M = " & M
End Function 
```

然后您可以从宏中调用它，例如：

```
Sub Test()
    Debug.Print FindKXPlusM("x*312+12")
End Sub 
```

或者像公式一样使用它。例如，将其放入单元格中：

```
=FindKXPlusM(B1) 
```

我喜欢第二种方式（更少的工作：P）

我用各种值对其进行了测试，这是我得到的截图：

![Find KX+M 公式截图](../Images/26f88eedb70cf12ac1e1b834383fbc7e.png)

希望这可以帮助 ：）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-15T13:11:51.643

我会使用正则表达式来搜索一个或多个数字；在“*x”之后表示 m，在“+”之后表示 k。

您的示例显示整数值。如果斜率和截距是浮点数怎么办？签名值？它比您的示例所建议的要复杂。

我建议最通用的解决方案是编写一个带有简单语法的词法分析器/解析器来为你处理它。我不知道 VB 或 .NET 为您提供什么。ANTLR 是 Java 领域的一种解决方案；有一个 ANTLR.NET。

我不确定所有这些努力能给你带来什么。您将如何处理提取的内容？我认为用户为 k 和 m 填写数字类型单元格并`y = m*x + k`从中计算而不是插入字符串并提取它们同样容易。

如果您的目标只是评估字符串，那么`eval()`您的答案可能是：

[如何将字符串公式转换为“真实”公式](https://stackoverflow.com/questions/4471884/turn-a-string-formula-into-a-real-formula)***

# jquery - 页面顶部的 div 在其他顶部 div 之前

> ID：10162318
> 
> 赞同：0
> 
> 时间：2012-04-15T13:09:44.120
> 
> 标签：jquery, css, twitter-bootstrap

即使第一类具有相同的最高值，如何在第一类之前强制第二类？如果可能的话，使用 jquery 或只是 css hack。firstClass 的值可能与此示例中的不同，但 secondClass 的值是固定的。

```
<html>
    <body>
        <div class="firstClass">Hello</div>
        <div class="secondClass">This is Warning!</div>
    </body>
</html> 
```

和CSS

```
.firstClass {
    position: fixed;
    top: 0px;
}

.secondClass {
    position: fixed;
    top: -25px;
} 
```

在线演示[http://jsfiddle.net/AQUgk/](http://jsfiddle.net/AQUgk/)

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T13:19:41.120

只需使用 CSS 将其移动到屏幕上：

```
$(".firstClass").css('top', $(".secondClass").height());
$(".secondClass").css('top', 0); 
```

如果移动 DOM 中的元素是您所追求的：

```
$(".firstClass").before($(".secondClass")); 
```

[小提琴](http://jsfiddle.net/adeneo/AQUgk/2/)

# xcode - 地图上的 Xcode 草图

> ID：10162320
> 
> 赞同：1
> 
> 时间：2012-04-15T13:09:54.970
> 
> 标签：xcode, google-maps, kml

我想在 Xcode 中创建一个应用程序来绘制或显示我在地图视图上行走的轨迹。我进行了很多搜索，但找不到任何关于该主题的内容。我已经阅读了很多有关 KML 的信息，但找不到我的答案。所以请你能告诉我如何画出我走的路吗？是否有教程或示例代码。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T13:26:17.290

这是一个非常酷的开源应用程序，基本上可以完成您所说的以及更多，而且它是开源的。该应用程序是[AntiMap Log](http://itunes.apple.com/us/app/antimap-log/id486524181?mt=8)，它的来源可以在[这里](https://github.com/trentbrooks/AntiMap/tree/master/AntiMapLog)找到。

# c# - 上下文菜单绑定

> ID：10162325
> 
> 赞同：0
> 
> 时间：2012-04-15T13:10:25.653
> 
> 标签：c#, .net, wpf, xaml, data-binding

如果菜单项的数量大于 1，我想在鼠标左键单击按钮上调用 ContextMenu。这是我的 XAML：

```
<Button Content="Items" Click="Button_Click">
<Button.ContextMenu>
    <ContextMenu ItemsSource="{Binding Items}">
        <ContextMenu.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding Name}"/>
            </DataTemplate>
        </ContextMenu.ItemTemplate>
    </ContextMenu>
</Button.ContextMenu></Button> 
```

这是后面的代码：

```
 private void Button_Click(object sender, RoutedEventArgs e)
    {
        Button senderButton = sender as Button;
        if (senderButton == null) return;
        var items = senderButton.ContextMenu.Items;
        if (items.Count < 2) return;
        senderButton.ContextMenu.PlacementTarget = senderButton;
        senderButton.ContextMenu.IsOpen = true;
    } 
```

问题是物品。计数始终等于 0，即使当我删除`if (items.Count < 2) return;`行时它也能很好地显示项目

# javascript - 单击按钮时如何取消文件上传

> ID：10162327
> 
> 赞同：1
> 
> 时间：2012-04-15T13:10:31.217
> 
> 标签：javascript, jquery

我有一个包含文件输入、上传按钮和取消按钮的表单：

```
<form action='imageupload.php' method='post' 
 enctype='multipart/form-data' target='upload_target' 
 onsubmit='stopImageUpload(this);' class='imageuploadform' >
   <p class='imagef1_upload_form' align='center'>
      <label>Image File: 
        <input name='fileImage' type='file' class='fileImage' />
      </label>
      <input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' />   
      </label>
   </p>
   <p class='imagef1_cancel' align='center'>
     <label>
       <input type='button' name='imageCancel' class='imageCancel' value='Cancel' />
     </label>
   </p> 
   <iframe class='upload_target' name='upload_target' src='#' style='width:0;height:0;border:0px;solid;#fff;'>
   </iframe>
</form> 
```

我想知道的是当用户点击取消按钮时如何取消文件上传？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T14:09:46.247

我认为更改目标 iframe“src”属性或内容会中止上传。

```
$(".imageCancel").click(function() {
    $(".upload_target").attr("src","#");
});​​ 
```

# ios - Adobe Air App 最低 IOS 版本

> ID：10162328
> 
> 赞同：1
> 
> 时间：2012-04-15T13:10:37.990
> 
> 标签：ios, air, stage3d

我正在使用 Adob​​e Air 3.2 使用新的 stage 3D 功能为 IOS 编写应用程序。我可以定位的最低 IOS 版本是多少？

此外，为了以新的 Ipad 3 为目标，您似乎需要指示编译器引用 IOS 5.1。这是否意味着如果我使用该设置进行编译，我将无法在较低的 IOS 版本上运行我的应用程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T08:59:15.773

在 AIR SDK 3.3 和更高版本中，您现在可以在应用程序描述符的 iphone 添加标签中指定支持的最低版本。这些设置被传递到 .ipa 文件中的 Info.plist 文件中。

如果您在应用程序中使用 iOS 5.0 sdk 特定功能，您可以在空中应用程序描述符 .xml 文件中将此值设置为 5.0：

```
<iPhone>
    <InfoAdditions><![CDATA[
        <key>UIDeviceFamily</key>
        <array>
            <string>1</string>
            <string>2</string>
        </array>
        <key>MinimumOSVersion</key>
        <string>5.0</string>
    ]]></InfoAdditions>
    <requestedDisplayResolution>high</requestedDisplayResolution>
</iPhone> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T14:56:08.860

1) iOS 4 及以上版本[在规格中说明](http://www.adobe.com/products/air/tech-specs.html)

2) 你可以在高于你的部署目标的任何版本上运行，我假设是 iOS 4.0，因为上面的技术规范说明了什么，不管你编译的版本是什么。

# c# - 如果两个线程正在写入同一个串行端口，是否会发生冲突？

> ID：10162332
> 
> 赞同：0
> 
> 时间：2012-04-15T13:11:07.847
> 
> 标签：c#, multithreading, serial-port, collision

我正在用 c# 编码。如果两个线程正在写入同一个串行端口，是否会发生冲突？如果是，我该如何处理？另外，我想优先考虑其中一个线程。

例如，如果两个线程正在写入串行端口，那么当我从线程 2 写入数据时，我想停止线程 1 的传输（即，在写入端口时，线程 2 的优先级高于线程 1）。

* * *

非常感谢您的回答。但我的一个问题仍未得到解答。一旦我从线程 1 获得要写入的数据。它应该暂停从其他线程读取/写入并传输此数据，然后继续暂停功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T13:32:35.007

msdn 文档告诉：

“线程安全这种类型的任何公共静态（在 Visual Basic 中共享）成员都是线程安全的。不保证任何实例成员都是线程安全的。” - [http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.aspx](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.aspx)

所以你需要自己让它线程安全。例如

```
void thread1()
{
    lock(serialPort1)
    { 
         serialPort1.Write(something);
    }
}
void thread2()
{
    lock(serialPort1)
    { 
         serialPort1.Write(somethingelse);
    }
} 
```

# sql-server - 在sql中的条件下选择

> ID：10162333
> 
> 赞同：-3
> 
> 时间：2012-04-15T13:11:22.563
> 
> 标签：sql-server, select, case

亲爱的我正在写 sql select 语句：

```
SELECT 
  CourtCode,
 CourtName+ ' '+ CourtType AS Court 
from  table 
```

CourtType 是可为空的 int 列

我希望当我的选择栏`CourtType=null`返回“法院”时

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T20:06:03.310

这个问题的编写方式很难理解你的需求，但如果我猜的话，我认为你只需要一个左外连接和一个 CASE 语句。左外连接确保返回 Diw_Tb_Court 表中的行，即使 Diw_tb_CourtType 表中没有匹配的行。CASE 语句让您询问是否发生了 Diw_Tb_courtType 连接，如果发生了，则将其名称附加到您的“名称”列。

```
SELECT
   c.Fd_CourtCode,
   name = c.Fd_CourtName + 
      CASE WHEN ct.Fd_CourtType is not null THEN ' ' + ct.Fd_CourtType ELSE '' END
FROM
   Diw_Tb_Court c 
   left outer join Diw_Tb_CourtType ct on ct.id = c.courtType 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T21:03:02.303

似乎是[`ISNULL()`](http://msdn.microsoft.com/en-us/library/ms184325.aspx "ISNULL (Transact-SQL)")or的工作[`COALESCE()`](http://msdn.microsoft.com/en-us/library/ms190349.aspx "合并 (Transact-SQL)")：

```
SELECT 
  Diw_Tb_Court.Fd_CourtCode,
  COALESCE(Diw_Tb_Court.Fd_CourtName + ' ', '')
  + COALESCE(Diw_Tb_CourtType.Fd_CourtType, '') AS Court 
FROM … 
```

# javascript - 如何将字符串参数从 HTML（使用 JavaScript）传递到 Java 可执行 Jar？

> ID：10162342
> 
> 赞同：0
> 
> 时间：2012-04-15T13:13:05.163
> 
> 标签：javascript, java, command-line-arguments

我的项目将查询字符串作为参数并使用 LSI 搜索目录。我想设置一个本地服务器并将查询字符串从 HTML 文件传递​​到 Jar。

我将使用 JavaScript 来创建按钮和处理事件，例如，在按下搜索按钮时，文本框中的字符串应该像命令之类的参数一样传递给 .Jar 文件。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T13:26:49.153

你不应该有任何问题这样做。要将查询发送到本地服务器上的 java 应用程序，您可以使用表单或 AJAX，然后一旦在 java 服务器上接收到字符串，您就可以执行需要在本地计算机上运行的任何代码。

如果您在设置时有任何其他问题，请不要犹豫，问好吗？

# php - PHP 将随机数放入目录名称中。为什么？

> ID：10162349
> 
> 赞同：0
> 
> 时间：2012-04-15T13:14:13.617
> 
> 标签：php, random, mkdir

我正在尝试使用 mkdir () 在 PHP 中创建一个目录。它可以工作，但 PHP 将随机数放在名称的末尾：

```
mkdir (testdir); 
```

创建一个目录 testdir511。有没有什么办法解决这一问题 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T13:19:17.380

`.`在分隔参数时，您可能使用了 (the concatenation thingy) 而不是逗号：

```
$ php
<?php
mkdir("test" . 655); // should be mkdir("test", 655);
?>
$ ls
test655/ 
```

# css - 引导模式如何在里面加载http文件

> ID：10162352
> 
> 赞同：3
> 
> 时间：2012-04-15T13:14:49.723
> 
> 标签：css, twitter-bootstrap

有没有办法将 http:// 定位的文件加载到模态窗口中？

类似的东西：

```
<a class="btn btn-info btn-large" data-toggle="modal" href="#http://localhost/login.html"> <i class="icon-user icon-white"></i> Login </a> 
```

显然我可以使用单独的 js 方法（如 jquery load()）来做到这一点，但我想知道是否有可能在不实现任何新 js 的情况下做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T22:00:14.880

使用 ID制作一个`iFrame`并将您的加载`login.html`到其中。将 iFrame 的 ID 提供给该模态，例如`href="#iFrameId"`. 此 iFrame 应与您的锚点位于同一 HTML 文件中。

# ios - 如何记录俄语文本或非拉丁语文本？

> ID：10162355
> 
> 赞同：1
> 
> 时间：2012-04-15T13:15:03.617
> 
> 标签：ios, character-encoding, internationalization, xcode4.3, nslog

在以前版本的 XCode 中一切正常。但是今天在 XCode 4.3.2 中我遇到了问题。如何记录俄语文本或非拉丁语文本？

```
NSLog(@"russian text: русский текст");

NSString *text = @"russian text: русский текст";
const char *textC = [text UTF8String];    
NSString *getText = [NSString stringWithCString:textC encoding:NSUTF8StringEncoding];
NSLog(@"___text: %@", getText); 
```

我的日志

```
russian text: —Ä—É—Å—Å–∫–∏–π —Ç–µ–∫—Å—Ç
___text: russian text: —Ä—É—Å—Å–∫–∏–π —Ç–µ–∫—Å—Ç 
```

**更新：**

该错误仅发生在真实设备上（ipod touch 5.1）。它在iphone模拟器上正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T13:38:24.660

在 Xcode 4.2 中对我来说工作正常，所以它要么是 4.3.2 错误，要么是您的源文件编码错误。

检查“首选项/文本编辑/编辑选项卡/默认文本编码”设置并确保它设置为 Unicode (UTF-8)。

如果是，请在 BBEdit 中打开文件并仔细检查其编码。文件上可能有旧的 MacRoman 或其他编码集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T13:47:23.010

**更新：**

对我来说在模拟器中工作正常。

然而，在运行 iOS 5.1 的真实设备上，我得到了和你一样的错误、干扰的输出。所以它可能是一个 XCode 4.3.2 错误。

* * *

我在 XCode 4.3.2 上测试了你的代码，它对我来说很好。

我的日志：

```
2012-04-15 15:44:28.545 test[25799:15203] russian text: русский текст
2012-04-15 15:44:28.548 test[25799:15203] ___text: russian text: русский текст 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T13:16:54.877

我找到了解决方案。您需要在 Product->Edit Sheme 中将调试器从 LLDB 更改为 GDB。LLDB 不能在俄语中正常工作。

# .htaccess - 创建 .htaccess 以删除扩展名

> ID：10162369
> 
> 赞同：1
> 
> 时间：2012-04-15T13:16:32.883
> 
> 标签：.htaccess, web

我在一个名为 .htaccess 的文件中获取了此代码，以删除我的 url 中的扩展名。我已经尝试将 .htaccess 放在根文件夹以及脚本所在的文件夹中，但都不起作用..有人知道为什么吗？

```
RewriteCond %{ENV:REDIRECT_STATUS} 200
RewriteRule ^ - [L]

RewriteRule (.+)\.php$ $1 [R,L]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^(.*)$ $1.php [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T13:28:11.710

如果我在哪里，我不会使用它，而是应该创建动态 URL。

但是，错误是您尚未打开 RewriteEngine。您应该添加：

```
RewriteEngine On 
```

所以你的最终文件应该是这样的：

```
RewriteEngine On
RewriteCond %{ENV:REDIRECT_STATUS} 200
RewriteRule ^ - [L]

RewriteRule (.+)\.php$ $1 [R,L]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^(.*)$ $1.php [L] 
```

# php - 检测用户是否来自 Smarty PHP 中的子域

> ID：10162372
> 
> 赞同：0
> 
> 时间：2012-04-15T13:16:36.967
> 
> 标签：php, subdomain, smarty, detection, whmcs

所以我将WHMCS 用于我的托管网站，并且我创建了一个也运行WHMCS 的子域。（例如：mydomain.com 是托管站点，然后我有一个子域，例如 designs.mydomain.com）。

正如我所说，两个域都运行 WHMCS，因此当您访问它们时会显示完全相同的网站。子域链接到 WHMCS，这是一个从其位置返回的目录（它不只是被复制）。

**问题：**

现在，我想设置 WHMCS 在子域上运行不同的模板，但要做到这一点，我需要用 Smarty PHP 以某种方式检测用户在子域或普通域上的天气？

是否有可能做到这一点，如果可以，怎么做？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T13:32:57.737

PHP 以`$_SERVER['HTTP_HOST']`. Smarty 映射`{$smarty.server}`到`$_SERVER`（就像它映射任何其他超全局（_GET，_POST，_COOKIE，_SESSION，...））。因此，您可以尝试以下方法：

```
{if $smarty.server.HTTP_HOST == "designs.mydomain.com"}
  I was called from the subdomain designs.
{else}
  I was not called from the subdomain designs. 
  maybe via the regular domain or some other subdomain
{/if} 
```

# jquery - ajax调用完成后开始下载文件

> ID：10162380
> 
> 赞同：3
> 
> 时间：2012-04-15T13:18:50.463
> 
> 标签：jquery

```
$.ajax({
                    type: "POST",
                    url: "processform.php",
                    dataType: "json",
                    data: {name: name, email: email, city: city, country: country, day: day, month: month, year: year}
                    }).done(function(msg){

                        if(msg.success == 1){
                            $("#success_msg").append('<p>'+msg.message+'</p>');
                            window.location.href = './music/song.mp3';
                        }

                    }); 
```

上面的代码只是加载了一个带有音乐播放器的新页面。我希望它像文件一样下载。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T13:23:40.930

您可以通过 PHP 执行此操作，创建一个带有正确标题的 PHP 文件，然后重定向到该页面，它将强制浏览器下载该文件。

```
<?php
header('Content-disposition: attachment; filename=song.mp3');
header('Content-type: audio/mpeg3');
readfile('song.mp3');
?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T13:22:54.517

尝试这样做：

```
header("Content-Disposition: attachment; filename=somefile.mp3;"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-15T13:43:35.513

如果您在 ajax 调用后放弃自动下载，您可以这样做。浏览器将以自己的方式处理这种情况。

```
 $.ajax({
                type: "POST",
                url: "processform.php",
                dataType: "json",
                data: {name: name, email: email, city: city, country: country, day: day, month: month, year: year}
                }).done(function(msg){

                    if(msg.success == 1){
                        $("#success_msg").append('<p>'+msg.message+'</p>');
                       // window.location.href = './music/song.mp3';
                        $('<a/>', {target:'_blank', href:'./music/song.mp3'}).appendTo($("#success_msg")).html('Click To Download <Filename>');
                    }

                }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T13:22:24.470

这取决于浏览器。如果您的浏览器有媒体插件，它可能会直接在浏览器中打开媒体文件，而不是提供下载对话框。

# android - 链接意图 Android

> ID：10162383
> 
> 赞同：1
> 
> 时间：2012-04-15T13:19:04.953
> 
> 标签：android, android-intent, share

在我的 android 浏览器中，我可以与 google+、什么是应用程序等共享当前链接。现在我希望我的应用程序可以在那里列出。所以我使用意图过滤器：

```
<intent-filter>
                 <action android:name="android.intent.action.VIEW" />
                 <category android:name="android.intent.category.SEND" />
                 <data android:scheme="http"/> 
            </intent-filter> 
```

但是现在我的应用程序仅在我单击链接时列在意图选择器中。我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T13:23:31.677

```
<activity android:name=".ShareLink">
        <intent-filter>
            <action android:name="android.intent.action.SEND" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:mimeType="text/plain" />
        </intent-filter>
    </activity> 
```

# jsf-2 - JSF 2 - 如何销毁会话范围的 bean

> ID：10162391
> 
> 赞同：5
> 
> 时间：2012-04-15T13:20:12.460
> 
> 标签：jsf-2

如何销毁会话范围的 bean？

这样做的目的是控制 bean 的生命周期，使其仅在 Web 应用程序中的选项卡处于活动状态时才存在。（在 webapp 中使用基于 Ajax 的选项卡导航）

有没有更好的方法来做到这一点？（自定义范围的 Bean？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T15:21:30.853

**会话范围**的 bean 是在第一次`HttpRequest`涉及此 bean 时创建的。`session`失效时销毁。您也可以通过将其从`HttpSession`, 或`sessionMap`(get through `FacesContext`) 中删除来手动销毁它。

事实是，创建仅在选项卡视图期间存在的**Session 范围bean 是****不合逻辑的。**为此，定义**自定义范围**bean 会更好，但请先考虑一下：

 *****   为什么需要这样的功能？因为记忆？

好吧，这可能非常棘手，想象一下用户只是经常在选项卡之间切换，而您正在一遍又一遍地重新创建 bean。更糟糕的是，如果您从数据库中**获取数据**`constructor`或`@PostConstruct`. 它不会真正有效。

我的意见是您应该忘记它（除非您出于其他目的需要它）并选择一个**View 范围**的bean。这个bean在访问视图后被初始化并一直存在，直到你不切换到另一个视图——所以在每个选项卡开关上都没有数据库获取（仍然是相同的视图）。IMO最好一次获取大量数据而不是例如。15 次...如果您不获取任何数据，那么一定要使用**View scoped**。但这只是我所说的我的意见。

如果您买不起**View scoped**，请选择**Custom scoped** bean，但绝对不是**Session scoped**。

进一步阅读：[JSF 2.0 上的 BalusC](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html)

希望它有所帮助！****

# php - 我可以使用 PHP 提供自定义协议吗？

> ID：10162393
> 
> 赞同：4
> 
> 时间：2012-04-15T13:20:43.053
> 
> 标签：php

我使用共享主机，我想使用自定义协议。让我们将协议命名为“foo”。有人可以与 foo://mydomain.com/moo.blo 交流吗？是否可以使用套接字或其他东西来做这样的事情？我不知道套接字的用途。我可以通过特定端口提供服务吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T13:33:13.040

有可能，我不确定这是否是你处理这个问题的方式，但它应该是这样的：

*   在服务器 ( `/etc/services`) 上添加一个新协议以侦听特定端口 (即：`foo`= `1500`)
*   在 PHP 中编写一个新的守护进程来监听和回复那个端口
*   在客户端注册相同的协议/端口并让它与服务器通信

请记住，协议不需要是 HTTP，您可能无法在客户端上使用常规浏览器。抱歉答案含糊不清，但我真的不知道更好。

[ServerFault](https://serverfault.com/)可能是询问此类问题的更合适的地方。

# mysql - 选择和分组范围

> ID：10162399
> 
> 赞同：1
> 
> 时间：2012-04-15T13:21:23.083
> 
> 标签：mysql, sql

我有一些这样的数据：

```
+----+--------+-------+
| id | height | width |
+----+--------+-------+
|  1 |   1000 |   300 |
|  2 |   1024 |   330 |
|  3 |    600 |   200 |
|  4 |    624 |   311 |
|  5 |    724 |   511 |
|  6 |    300 |   200 |
+----+--------+-------+ 
```

有更多的行。

我想运行一个执行以下操作的查询：

```
Count how many rows have a height between 0 and 400, between 401 and 600, between 601 and 1000, and 1000+ 
```

在这种情况下，我希望它返回如下内容：

```
+-------+---------+----------+-------+
| 0-400 | 401-600 | 601-1000 | 1000+ |
+-------+---------+----------+-------+
|     1 |       1 |        3 |     1 |
+-------+---------+----------+-------+ 
```

我将对范围进行硬编码。

目前，我计划对每个范围进行查询，有没有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T13:25:05.137

```
select  sum(case when height between 0 and 400 then 1 end) as [0-400]
,       sum(case when height between 401 and 600 then 1 end) as [401-600]
,       ...
from    YourTable 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T13:26:38.840

尝试这样的事情：

```
select sum(if(height<400,1,0)) '<400', sum(if(height>=400 and height<600,1,0)) '400-600'... 
```

G

# ruby-on-rails - 访问我的 API 规范中的会话

> ID：10162409
> 
> 赞同：3
> 
> 时间：2012-04-15T13:22:37.310
> 
> 标签：ruby-on-rails, rspec

我正在开发一个 API 并想测试登录方法。API 的规范位于`spec/api/`而不是`spec/controller`. 我正在使用 rspec-rails。现在我有一个这样的规范：

```
describe "/api/login.json", :type => :api do
  let(:user) { FactoryGirl.create(:user) }

  context "when called with correct credentials" do
    before(:all) do
      post "/api/v1/passenger/login.json",:email => user.email, :password => user.password
    end

    it "responds with HTTP 200" do
      last_response.status.should == 200
    end

    it "sets the session correctly" do
      session[:user_id].should == user.id # <-- ### Here ###
    end
  end
end 
```

它失败。`session`是零。如何访问会话变量？

我想我必须在我的`RSpec.configure`块中包含一些东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:40:21.770

如果您的会话已启用，我想您可以使用`env['rack.session']`.

我也会向你推荐这个 tut [http://railscasts.com/episodes/280-pry-with-rails](http://railscasts.com/episodes/280-pry-with-rails)`binding.pry`使用 pry 有很多优点，你可以在你的规范 中编写并调试它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T23:05:44.820

大约后。200 小时的谷歌搜索，我自己找到了答案。

它归结为这些神奇的词：

```
module FoobarHelper
  def session
    last_request.env['rack.session']
  end
end

RSpec.configure do |c|
  c.include FoobarHelper, :type => :api
end 
```

# php - Windows 上的计划任务以运行 PHP 文件

> ID：10162411
> 
> 赞同：0
> 
> 时间：2012-04-15T13:23:07.197
> 
> 标签：php, batch-file, scheduled-tasks

我们分发的 PHP 应用程序需要创建计划任务来运行 PHP 脚本。我知道该怎么做。我正在努力解决的问题是让安装软件的管理员尽可能简单地进行设置（理想情况下几乎是一键式）。

问题：

i) 我们不知道 PHP 安装在哪里 ii) 我们不知道他们在哪里安装了我们需要运行的文件。

我最初的计划是创建一个 .bat 文件，其中包含 PHP 的路径（因此他们需要编辑此文件），这会加载我们的 PHP 脚本，因此他们需要创建一个要运行的计划任务。然后会有第二个 .bat 文件来创建计划任务本身（不完全确定如何执行该部分）。

这似乎是最好的方法吗？如果是这样，有关如何使用 .bat 文件创建计划任务的任何指示 - 我找不到此信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T13:33:50.473

您可以在 .bat 文件中使用命令“at”来创建计划任务，但它需要以管理员身份运行。

编辑： schtasks 做同样的事情，可以在没有管理员权限的情况下使用。

您可以搜索 php.exe，但这有点棘手 - 基本上您需要使用带有 /s 参数的 dir。

为什么不设置例如？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T13:58:42.817

要从 bat 文件运行 PHP 脚本，您只需创建“.bat”文件并添加文件路径即可。下面是例子：

1.  创建“your_file_name.bat”
2.  在editplus或记事本中打开并输入：

> 在下面的示例中重命名您的文件名

```
"D:\Program Files (x86)\EasyPHP-5.3.8.0\php\php.exe" "D:\Program Files (x86)\EasyPHP-5.3.8.0\www\project_name\your_script_name.php" >> log_new.txt
rem "D:\Program Files (x86)\EasyPHP-5.3.8.0\php\php.exe" your_script_name.php
pause 
```

*   就是这样，你完成了。
*   log.txt 将记录 php 文件生成的任何输出或错误。

希望这能解决你的问题:)

# network-programming - stacklesssocket 影响其他基于套接字的模块

> ID：10162421
> 
> 赞同：1
> 
> 时间：2012-04-15T13:25:16.973
> 
> 标签：network-programming, couchbase, python-stackless

我有一个使用 Stackless Python 和 stacklesssocket.py 的项目。我最近决定将 Couchbase 添加到我的项目中作为我的数据库后端服务器。我按照（[Couchbase 站点](http://www.couchbase.com/docs/couchbase-sdk-python-1.0/couchbase-sdk-python-getting-started-installation.html)）的说明进行了此操作。但是它似乎与我的项目不兼容，并且进一步调查似乎与stacklesssocket发生冲突。

显示我的项目的源代码会过于复杂，但我将代码提炼成一个完全重现我得到的错误的案例：

```
import couchbase

# Monkeypatch in the 'stacklesssocket' module, so we get blocking sockets
# which are Stackless compatible.  This example code will avoid any use of
# the Stackless sockets except through normal socket usage.
import stacklesssocket
stacklesssocket.install()
import socket

# connect to a couchbase server
cb = couchbase.Server('localhost:8091', username='username', password='password')

# use default bucket
default_bucket = cb['default']

# fetch a key with a function
print 'test = ' + str(default_bucket.get('test')) 
```

如您所见，我正在添加 stacklesssocket，然后尝试连接到 Couchbase 服务器。症状是下面的堆栈跟踪。我不确定 stacklesssocket 究竟做了什么，但我知道它取代（或增强）了普通 python 套接字的功能。所以看起来 Couchbase 正在使用一个套接字并且它的行为不像预期的那样：

```
Traceback (most recent call last):
  File "/Users/mark/Programming/MarkTestSite/server/src/dbteststackless.py", line 12, in <module>
    cb = couchbase.Server('localhost:8091', username='username', password='password')
  File "/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/couchbase/client.py", line 50, in __init__
    config = ServerHelper.parse_server_config(server_config_uri, username, password)
  File "/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/couchbase/client.py", line 334, in parse_server_config
    response = urlopener.open(uri)
  File "/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/urllib.py", line 205, in open
    return getattr(self, name)(url)
  File "/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/urllib.py", line 344, in open_http
    h.endheaders()
  File "/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/httplib.py", line 904, in endheaders
    self._send_output()
  File "/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/httplib.py", line 776, in _send_output
    self.send(msg)
  File "/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/httplib.py", line 735, in send
    self.connect()
  File "/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/httplib.py", line 716, in connect
    self.timeout)
  File "/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/socket.py", line 514, in create_connection
    raise error, msg
IOError: [Errno socket error] [Errno 61] Connection refused 
```

为了证明 Couchbase 通常对我有用（总是一个很好的完整性检查），这里是有效的代码。我只是删除了导入stacklesssocket的代码：

```
import couchbase

# connect to a couchbase server
cb = couchbase.Server('localhost:8091', username='username', password='password')

# use default bucket
default_bucket = cb['default']

# fetch a key with a function
print 'test = ' + str(default_bucket.get('test')) 
```

它按预期工作并生成以下输出：

```
test = (0, 5, 'hello world') 
```

我正在使用无堆栈 python 2.6.5。有没有我可以使用的解决方法？还是 Couchbase 模块只是简单且与 stacklesssocket 不兼容？我真的很想继续使用 stackless python 和 stacklesssocket，因为我的项目是一个具有许多并发连接的网络服务器。我很欣赏人们的任何想法。

# excel - 将字符串变量转换为日期

> ID：10162424
> 
> 赞同：1
> 
> 时间：2012-04-15T13:25:45.837
> 
> 标签：excel, date-format, vba

我需要将字符串变量转换为 VBA 宏中的日期变量，以处理日期以获取 mMonth 和 year 以便命名工作表

```
Call GetMonthandYear(MonthYear, FileDate)
    ActiveSheet.Name = MonthYear 
```

我希望创建一个名为 GetMonthandYear 的方法。FileDate 是日期格式的字符串，`dd.MM.yyyy HH-mm-ss`. 如果我可以将变量更改为日期，我可以将格式更改为`MMMM/yyyy`然后使用`ToString`，我认为，并将其分配给`MonthYear`。

有没有办法将字符串更改为日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T19:45:05.880

您提出的方法存在几个问题：

1.  将字符串转换为日期序列可能会出现问题，不确定 Excel 是否会将日期解释为`dd.MM`或`MM.dd`。由于您事先知道格式，因此直接提取月份和年份。
2.  `\`不是工作表名称的有效字符。我用过`_`，随意替换

* * *

```
Function GetMonthandYear(FileDate As String) As String
    Dim dot1 As Long, dot2 As Long
    Dim m As String, y As String

    dot1 = InStr(FileDate, ".")
    dot2 = InStr(dot1 + 1, FileDate, ".")
    m = Mid$(FileDate, dot1 + 1, dot2 - dot1 - 1)
    y = Mid$(FileDate, dot2 + 1, InStr(FileDate, " ") - dot2 - 1)

    GetMonthandYear = Format$(DateSerial(y, m, 1), "MMMM_yyyy")
End Function 
```

像这样称呼它

```
Sub Test()
    Dim FileDate As String
    FileDate = "15.04.2012 16-31-18"

    ActiveSheet.Name = GetMonthandYear(FileDate)

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T13:30:57.877

您是否尝试过使用 CDate 和 Format 函数？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T13:38:10.640

您可以使用 CDate 函数获取日期，但它需要`-`替换为.`:``.``/`

```
Dim yourStringDate, sBuf As String
Dim yourDateVariable As Date

yourStringDate = "15.04.2012 16-31-18"
sBuf = Replace$(yourStringDate,"-", ":")
sBuf = Replace$(sBuf, ".", "/")
yourDateVariable = CDate(sBuf)

MsgBox yourDateVariable 
```

# ruby-on-rails - 我在这里寻找什么轨道关系？

> ID：10162427
> 
> 赞同：3
> 
> 时间：2012-04-15T13:25:54.080
> 
> 标签：ruby-on-rails, model

我有多个要搜索的模型，以便结果可以包含所有模型的结果。假设我想搜索“靴子”，我希望它返回靴子类别以及销售靴子和实际靴子的零售商。我有一个类别、供应商和产品的模型。

在这种情况下，我宁愿不必创建连接表，因为每个对象都需要连接，这不是必需的，因为所有对象都将包含在搜索中。

我正在考虑使用 ransack gem，但我认为这对这个问题并不重要，因为无论我的搜索过程如何，它都是一样的。

也许composed_of 关系是有道理的，但我不能完全理解它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T15:46:54.527

假设您`Product` `belongs_to`的 a`Vendor`和`belongs_to`a`Category`是您的查询：

```
string_to_search = 'boots'
@products = Product.where("title LIKE ?", "%#{string_to_search}%").includes(:vendor, :category).all 
```

它将获取具有所需标题内容的所有产品及其所有类别和供应商。您可以遍历结果数据，无需额外查询来获取特定产品的类别/供应商。

如果您需要，例如，从`@products`-- 中提取供应商列表，只需使用：

```
@vendors = @products.map &:vendor 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T14:57:11.050

我认为您需要在手工制作的 SQL 查询中使用 UNION 运算符。您可以使用 ActiveModel 创建一个伪模型，它可以充当聚合器，从真实模型中收集搜索结果，并为您的查询呈现一个类似于 ActiveRecord 的界面。

# c++ - 调用函数时找不到 std::function 构造函数

> ID：10162431
> 
> 赞同：1
> 
> 时间：2012-04-15T13:26:09.520
> 
> 标签：c++, c++11

我有一个声明如下的函数；它的确切工作与此无关。

```
template<typename T>
std::pair<int, int>
partition3(T *pT, const int N, const T &Kq, const int w,
           std::function<int(const T&, const T&, int)> P); 
```

在呼叫站点，我尝试执行以下操作：

```
bool partition3_test()
{
  struct cmp
  {
    int operator()(int x, int y, int) const
    { return x-y; }
  };

  int V1[11] = { 3, 7, 1, 7, 7, 8, 10, 2, 16, 4, 3 },
      V2[11] = { 3, 6, 1, 6, 6, 8, 10, 2, 16, 4, 3 };

  std::function<int(const int&, const int&, int)> F = cmp();

  std::pair<int, int>
    p1  = partition3(V1, 11, 7, 0, cmp()),
    p2  = partition3(V2, 11, 7, 0, cmp());

  return false;
} 
```

对于`partition3`编译器的两次调用（MSVC 2010）抱怨它无法推断出最后一个参数的模板参数。如果我替换`cmp()`为`F`，则代码可以编译并正常工作。

我有两个问题：

1.  为什么我会收到错误消息？[编译器错误或一些神秘的 C++ 规则？]
2.  如果不首先明确构造，我怎样才能达到相同的效果`F`？

（目前，我已经通过引入另一个模板参数`partition3`并声明`P`为该模板类型来解决该问题。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T13:34:37.367

`cmp()`实际上根本不是`std::function`。复制初始化工作的事实可能会使问题感到困惑，但是它使用了一个必须使用某种包装器对象的转换构造函数，我很惊讶它对一个临时仿函数对象起作用（啊，检查它的标准显然制作仿函数的副本）。

最重要的是，函数参数不匹配（按值传递和按常量传递是源兼容的，但不是运行时调用兼容的），这又需要一个适配器。

最好的解决方案是使模板函数更通用，这样它也可以与原始函数指针和任意仿函数对象一起使用，而不仅仅是`std::function`：

```
template<typename T, typename Functor>
std::pair<int, int> partition3(T *pT, const int N, const T &Kq, const int w,
                               const Functor& P); 
```

* * *

如果出于某种原因您真的想使用`std::function`（例如，您需要虚拟调度），您可以。与 Nawaz 写的完全相反的错误是，这*是*一个可推导的上下文，但不止一种类型适合（这是适配器/包装器性质`std::function`变得重要的地方，因为类型不必与参数完全匹配，它只需要兼容。 `std::function<int(const long&, const long&, int)>`也会匹配。）

改为使用不可推导的上下文，这样编译器甚至不会尝试使用仿函数来推导`T`.

```
template<typename T, typename Functor>
std::pair<int, int> partition3(T *pT, const int N, const T &Kq, const int w,
                               std::function<std::identity<const T>::type&, std::identity<const T>::type&, int> P); 
```

# visual-studio-2010 - Visual Studio 2010 - 不会将部署时的文件夹复制到“Out”目录

> ID：10162436
> 
> 赞同：2
> 
> 时间：2012-04-15T13:26:48.610
> 
> 标签：visual-studio-2010, unit-testing, deployment

嗨，我需要将包含单元测试项目中 IoC 的 XML 配置文件的文件夹复制到 TestResults“输出”目录。我使用 Visual Studio 2010。

Visual Studion 解决方案具有以下结构：

*   我的项目（解决方案）
    *   MyProject.Tests（单元测试项目）
        *   CoreSettings（包含 XML 文件的文件夹，我需要将此文件夹复制到**MyProject.Tests\bin\debug\TestResults\test_XXX\out**）

首先，我尝试编辑这两个文件：

*   本地.testsettings
*   TraceAndTestImpact.testsettings

我在VS中打开了这两个配置文件：

*   选择部署 >> 添加目录并添加到两个配置文件文件夹 CorreSettings。

我运行了测试，但**文件夹 CoreSettings**没有复制到**MyProject.Tests\bin\debug\TestResults\test_XXX\out**。

我用谷歌搜索并找到了这个[https://stackoverflow.com/a/3588829/1110195](https://stackoverflow.com/a/3588829/1110195)。

所以我编辑了这些文件：

*   本地.testsettings
*   TraceAndTestImpact.testsettings

并添加了这个：

```
<DeploymentItem filename="MyProject.Tests\CoreSettings\" outputDirectory="CoreSettings\"> 
```

但这没有帮助。

我尝试了使用属性方式。

在我添加的测试课上。

```
 [DeploymentItem(@"MyProject.Tests\CoreSettings, @"CoreSettings\")] 
```

但这种方式也没有将文件夹 CoreSettings 复制到 TestRestults\test_XXX\out。

在 TestRestults\test_XXX\out 中，我找到了 DLL，但没有找到 CoreSettings 文件夹。

CoreSettings 文件夹中的所有 XML 文件都有：

*   构建操作：内容
*   复制到输出目录：始终复制

我做什么坏事？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:45:31.887

我遇到了类似的问题，并从链接的问题中得到了答案。我不得不改变（使用你的例子）

```
<DeploymentItem filename="MyProject.Tests\CoreSettings\" outputDirectory="CoreSettings\"> 
```

至

```
<DeploymentItem filename="CoreSettings\" outputDirectory="CoreSettings\"> 
```

# ruby - Ruby 1.9.3 和 mac 堆栈大小问题

> ID：10162438
> 
> 赞同：1
> 
> 时间：2012-04-15T13:26:51.500
> 
> 标签：ruby, macos, recursion, stack-overflow, depth-first-search

几天前，我在一个巨大的图（几乎一百万个顶点和六百万条边）上运行[Kosaraju 的算法时遇到了一个问题。](http://en.wikipedia.org/wiki/Kosaraju%27s_algorithm)问题出在算法的[DFS（深度优先搜索）](http://en.wikipedia.org/wiki/Depth-first_search)部分，即递归**堆栈级别太深**。我在 Ruby 中实现了算法，我使用的 Ruby 版本是 1.9.3。

为了检查堆栈大小，我决定运行简单的程序：

```
def r n
  p n
  r n+1
end

r 1 
```

表示终止前的堆栈大小。我用了

```
ulimit -a 
```

命令检查堆栈大小和

```
ulimit -s 32768     # Seems like this is the maximum stack size for mac OS
ulimit -s unlimited # => Invalid argument error 
```

更改堆栈大小。即使在我更改堆栈大小后，r-procedure 仍显示相同的数字 - 8193。在我将 Ruby 更改为 1.8.7 后，最后一个数字变为 19177。

最终我找到了一个使用 Ubuntu 的朋友，并且堆栈大小没有限制。我成功运行了 Kosaraju 的算法。

我怎样才能在mac上做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T13:30:31.967

更改堆栈大小限制的正确语法是：

```
ulimit -S -s 32768 
```

在 OS X 10.7.3`ulimit -S -s unlimited`上，将限制设置为 65532。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-23T16:53:27.597

除了 OS X值之外，`ulimit`Ruby 程序中的堆栈大小还可以通过以下环境变量来控制：`RUBY_THREAD_VM_STACK_SIZE`、`RUBY_THREAD_MACHINE_STACK_SIZE`和. 您可以检查 irb 会话中的默认值：`RUBY_FIBER_VM_STACK_SIZE``RUBY_FIBER_MACHINE_STACK_SIZE`

```
RubyVM::DEFAULT_PARAMS
=> {:thread_vm_stack_size=>1048576,
    :thread_machine_stack_size=>1048576,
    :fiber_vm_stack_size=>131072,
    :fiber_machine_stack_size=>524288} 
```

因此，如果要将 VM 堆栈大小更改为 2097152，例如：

```
RUBY_THREAD_VM_STACK_SIZE=2097152 ruby script.rb 
```

但是，在这种特定情况下，我在 Ruby 中实现了完全相同的算法并且遇到了同样的问题，并且增加堆栈大小是不够的。对我有用的解决方案是在没有递归的情况下实现算法。

# java - Java: Fastest way to change brightness of an image

> ID：10162448
> 
> 赞同：1
> 
> 时间：2012-04-15T13:28:30.627
> 
> 标签：java, image, bufferedimage, brightness

I was wondering what the fastest way to alter the brightness of an image. I have implemented the 'RescaleOp' method but I don't know if this is the fastest method or there are others. Here is my implementation where I input an Image, change the brightness, and return an Image:

```
public static Image setBrightness(Image i) {
    BufferedImage buff = new BufferedImage(i.getWidth(null), i.getHeight(null), BufferedImage.TYPE_INT_ARGB);
    buff.createGraphics().drawImage(i, 0, 0, null);
    RescaleOp op = new RescaleOp(brightness, offsets, null);
    BufferedImage buff1 = new BufferedImage(i.getWidth(null), i.getHeight(null), BufferedImage.TYPE_INT_ARGB);
    buff1.createGraphics().drawImage(buff, op, 0, 0);
    return Toolkit.getDefaultToolkit().createImage(buff1.getSource());
} 
```

PS: I also need to convert the BufferedImage back into an Image because my computer doesn't like rendering BufferedImages.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T13:38:33.330

Everything I've read leads me to believe that RescaleOp is the best, fastest option

# windows - 如何在 Windows 7 上从头实现 IPX/SPX 传输协议？

> ID：10162451
> 
> 赞同：0
> 
> 时间：2012-04-15T13:29:21.967
> 
> 标签：windows, networking, protocols, driver

我想在 Windows 7 上实现 IPX/SPX 网络协议。我已经安装了 WDK 并获取了所有需要的 IPX/SPX RFC，但我不知道使用 WDK 之后该怎么办？你有什么建议？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T18:14:01.647

WinDDK 在 src\network\ndis\ndisprot 有一个示例协议驱动程序。您可以将其用作起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-26T01:19:32.230

多年以后...

我发现这个 IPXWrapper 是一个包装器库，它在通过 UDP 隧道传输数据包时模拟 IPX 支持

关于 IPXWrapper： [https ://www.solemnwarning.net/ipxwrapper/](https://www.solemnwarning.net/ipxwrapper/)

来源-Github： [https ://github.com/solemnwarning/ipxwrapper](https://github.com/solemnwarning/ipxwrapper)

# entity-framework - 尝试执行 SQL 脚本，但找不到如何将其连接到我的 SQL Server CE 数据库

> ID：10162452
> 
> 赞同：1
> 
> 时间：2012-04-15T13:29:26.397
> 
> 标签：entity-framework, sql-server-ce, visual-studio-2012

我已经`edmx.sqlce`使用实体框架中的模型生成方法生成了我的脚本，但无法弄清楚如何针对我的数据库执行脚本。

请注意，该方法需要与 Visual Studio 11 Beta 一起使用。

谁能让我知道如何将它连接到紧凑的数据库文件然后执行 sql 脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T16:08:55.540

您可以为此使用我的 SQL Server Compact Toolbox Visual Studio 加载项（通过 Visual Studio 11 中的扩展管理器安装）

# python - python自定义异常：在哪里？

> ID：10162453
> 
> 赞同：-2
> 
> 时间：2012-04-15T13:29:39.007
> 
> 标签：python, exception, pep

我在哪里可以写我的自定义异常？

我的软件中是否有类似的文件`execeptions.py`，或者我必须在与它们相关的类中编写它们？

有没有关于这方面的 PEP？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T15:14:53.477

一般来说，我发现我有两种例外。

一个用于非常具体的错误，并且只在代码的一部分中抛出。在这种情况下，我将异常定义为接近使用它的位置。这样，当开发人员看到异常并搜索代码时，他们也会找到原因（并希望在评论中找到一些有用的文档）。

另一个是跨库在多个地方引发的异常 - 一种“此库已失败”异常。然后我在库的顶级模块中定义它（在用户最有可能用作系统“主要入口点”的任何模块中）。

有时第一种可以继承第二种。

这只是我自己的用途 - 我不知道任何 peps 或其他指导方针。

# php - Wordpress - 侧边栏中的 3 个小部件，将“last”类应用于第三个小部件

> ID：10162455
> 
> 赞同：2
> 
> 时间：2012-04-15T13:29:45.913
> 
> 标签：php, css, widget, wordpress

我在我的 wordpress 网站中创建了一个自定义侧边栏

```
register_sidebar(array(
    'name' => 'Home Widgets',
    'before_widget' => '<div id="%1$s" class="blurb %2$s">',
    'after_widget' => '</div> <!-- end .widget -->',
    'before_title' => '<h4 class="widgettitle">',
    'after_title' => '</h4>',
)); 
```

我已经使用管理页面中的小部件面板添加了 3 个小部件。

这是CSS

`.blurb { float: left; margin-right: 96px; width: 256px; }`

我还声明了一个“最后一个”类来删除最后一个（第三个）小部件的边距。

`.last { clear: right; margin-right: 0 !important; }`

如何将“最后一个”类应用于最后一个小部件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T13:38:39.540

你不需要。将边距更改为`margin-left`上课`.blurb:first-child {margin-left: 0;}`，你应该没问题。IE7+ 兼容。

# java - 如何在 WebSphere MQ 上跟踪对消息的回复？

> ID：10162457
> 
> 赞同：1
> 
> 时间：2012-04-15T13:29:48.227
> 
> 标签：java, mq, ibm-mq, wtx

我使用 Websphere MQ 作为代理应用程序流中的输入和输出。该流程中还包含 Websphere Transformation Extender Maps。

我想使用 java 在输入队列上发送具有唯一标识符的消息，并在输出队列上接收回复。我应该能够使用该唯一标识符从输出队列中选择消息。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T03:58:17.547

执行此操作的简单方法是使用 CorrelationID。

正在处理请求的应用程序在响应时需要将 MessageID 复制到回复消息的 CorrelationID。请求者应用程序在接收消息时将 CorrelationID 指定为消息选择器，并提供请求消息的 MessageID 作为选择器的值。

如果您打算使用 JMS，那么它会简单得多。使用 JMSMessageID 和 JMSCorrelationID 属性并使用 JMSCorrelationID 作为选择器创建消费者

QueueReceiver queueReceiver = session.createReceiver(destination, "JMSCorrelationID='+ requestMsg.JMSMessageID +"'");

# objective-c - NSAttributedString 与 CFAttributedStringRef 的组件/属性所有权

> ID：10162462
> 
> 赞同：1
> 
> 时间：2012-04-15T13:30:10.153
> 
> 标签：objective-c, ios, cocoa, memory, nsattributedstring

当我使用项目的 Cocoa 部分时，我可以这样做：

```
[[self.aTextView textStorage] appendAttributedString:attrstg]; // textStorage is a mutable attributed string
// release attrstg and all its components
[attrstg release];
[dict release];
[paragStyle release];
[colorHSV release]; 
```

但是在 iOS 对应部分中，使用 Core Foundation 属性字符串，除非我挂在要附加的字符串及其属性字典以及进入属性字典的样式组件上，否则我会遇到访问错误的异常。

我已经进行了必要的更改以挂起 iOS 中的所有内容，并且一切正常——但是发生了什么？为什么这里有 Cocoa 和 iOS 的区别？任何一个属性字符串类的类 refs 中都没有提到这个问题。我是否遗漏了一些会在以后引起问题的东西？

# mysql - MySql 不使用带有 ORDER BY 的索引

> ID：10162463
> 
> 赞同：2
> 
> 时间：2012-04-15T13:30:14.397
> 
> 标签：mysql, indexing, sql-order-by

我有一个具有这种结构的表（有 50k 个字段）：

```
CREATE TABLE IF NOT EXISTS `comments` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `imageid` int(10) unsigned NOT NULL DEFAULT '0',
  `uid` bigint(20) unsigned NOT NULL DEFAULT '0',
  `content` text CHARACTER SET utf8,
  `adate` datetime DEFAULT NULL,
  `ip` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `ids` (`imageid`,`adate`) USING BTREE
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=52236 ; 
```

我想通过 imageid 选择数据并使用 adate 对其进行排序，所以我添加了 ( `imageid`, `adate`) 键。

但是这个查询的解释结果说 MuSQL 仍然使用表扫描。为什么？！

```
EXPLAIN SELECT   comments.*
FROM comments
WHERE comments.imageid=50
ORDER BY
comments.adate DESC LIMIT 10 
```

结果：

```
id  select_type     table   type    possible_keys   key     key_len     ref     rows    Extra
1   SIMPLE  comments    ref     ids     ids     4   const   203     Using where 
```

并使用此索引：

```
KEY `ids` (`imageid`,`adate`,`id`) USING BTREE 
```

此查询的结果：

```
EXPLAIN SELECT   comments.id
FROM comments
WHERE comments.imageid=50
ORDER BY
comments.adate DESC LIMIT 10 
```

是：

```
id  select_type     table   type    possible_keys   key     key_len     ref     rows    Extra
1   SIMPLE  comments    ref     ids     ids     4   const   203     Using where; Using index 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T14:24:02.493

您**没有**正确阅读解释的结果。

`using index`表示查询是索引覆盖的——数据只从索​​引中读取，不使用实际行。这不是因为索引不同，而是因为在第二个查询中您只选择了 id。

如果 MySQL 不使用索引来解决问题，则说明中`ORDER BY`会有`using filesort`。在这两个查询中，`ids`都使用了键并且 MySQL**不**执行表扫描

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T13:53:24.847

对于 InnoDB 创建一个像这样的键 (imageid,adate,id); 索引中列的顺序很重要。

然后试试这个 -

```
EXPLAIN SELECT   comments.id
FROM comments
WHERE comments.imageid=50
ORDER BY
comments.adate DESC LIMIT 10 
```

让我知道输出是什么。

感谢您的输出。在下面添加以下部分。

如果您需要的不仅仅是 id ，请尝试这样的事情

```
EXPLAIN 
SELECT c1.* from comments as c1
JOIN
(
   SELECT comments.id
   FROM comments
   WHERE comments.imageid=50
   ORDER BY
   comments.adate DESC LIMIT 10
) as c2 ON (c1.id=c2.id) 
```

但这一次不要依赖Explain。无论如何，解释仍然会显示一行带有索引。而是在 phpmyadmin 或 mysql 查询浏览器中检查执行时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T13:56:09.407

[直接出手册：](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)

> 在某些情况下，MySQL 不能使用索引来解析 ORDER BY，尽管它仍然使用索引来查找与 WHERE 子句匹配的行。这些情况包括： ––– 您在键的非连续部分上使用 ORDER BY： SELECT * FROM t1 WHERE key2=constant ORDER BY key_part2;

也许这适用于您的查询，因为您有一个组合`KEY ids (imageid,adate)`并且您没有`imageid`在`ORDER BY`. 您可以尝试为`adate`only 添加一个密钥，看看是否有帮助。

# c - 函数 itoa 的隐式声明在 c99 中无效

> ID：10162465
> 
> 赞同：18
> 
> 时间：2012-04-15T13:30:23.407
> 
> 标签：c

当我尝试使用该功能`itoa()`时，我收到警告：

> 函数的隐式声明在 c99 中无效。

我在标题中包含了 stdlib.h。我试图在一个函数中调用这个函数，我不确定这是否被允许。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-15T13:41:08.650

问题是 itoa() 不是标准函数。

您应该查看[此链接](http://www.strudel.org.uk/itoa/)，它为您提供了一些替代实现

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T13:52:18.220

常用的替代方法`itoa`是`sprintf`/ `snprintf`。这些是`stdio.h`.

# php - 您在 Web 应用程序身份验证库中寻找什么？

> ID：10162466
> 
> 赞同：6
> 
> 时间：2012-04-15T13:30:23.500
> 
> 标签：php, security, codeigniter, authentication, oauth

我目前正在写关于网络安全的论文。我专注于在 Web 应用程序中使用身份验证库。作为其中的一部分，我正在为 CodeIgniter 编写一个库，目的是通过实现对许多 OAuth 提供者的支持来提供单点登录类型的身份验证。

我对你的问题，社区如下：

*   什么是好的身份验证库？
*   它应该如何构建以及它应该在多大程度上抽象身份验证过程？
*   哪些因素会影响您选择一个图书馆而不是另一个图书馆的决定？

到目前为止，我对此的考虑是关于速度、代码的简单性、应用程序开发人员的实现简单性以及最重要的是产品的实际安全性。

任何反馈都会受到高度重视。非常感谢。

# c - C中的矩阵乘法

> ID：10162467
> 
> 赞同：5
> 
> 时间：2012-04-15T13:30:31.030
> 
> 标签：c, math, matrix

我正在尝试用 C 解决矩阵乘法问题。问题中给出的矩阵大小 (2x2) 我写了这段代码，但它没有按我的预期打印结果。我想我错过了关于 C 规则的一点。

我在这段代码中的错误是什么？

```
#include <stdio.h>
int main() {
    int matA[2][2]={0,1,2,3};
    int matB[2][2]={0,1,2,3};
    int matC[2][2];
    int i, j, k;
    for (i = 0; i < 2; i++) {
        for(j = 0; j < 2; j++) {
            for(k = 0; k < 2; k++) {
                matC[i][j] += matA[i][k] * matB[k][j];
            }
            printf("%d\n",matC[i][j]);
        } 
    }
} 
```

打印结果：

```
2 
3 
4195350
11 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-15T13:39:36.340

这是我使用的矩阵乘法代码：

```
for(i=0;i<M;i++){
    for(j=0;j<K;j++){
        matC[i][j]=0;
        for(k=0;k<N;k++){
            matC[i][j]+=matA[i][k]*matB[k][j];
        }
    }
} 
```

重要的是将答案矩阵设置为零（正如其他人所说的没有代码）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-15T13:45:42.123

问题是在行

```
matC[i][j] += matA[i][k] * matB[k][j]; 
```

你正在向 matC 添加东西，但是当你创建它时，你没有初始化它，所以它有垃圾。

你应该做这样的事情：

`int matC[2][2] = {0}`这将用 0 初始化所有矩阵

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-15T13:36:09.567

matC 最初包含一些垃圾值。将矩阵初始化为全零。这可能会解决您的问题

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-01-10T15:41:51.473

您可以通过以下方式由用户进行任何给定大小的矩阵乘法：

```
#include<stdio.h>
void main()
{
    int r1, c1, r2, c2;

    printf("Enter number of rows and columns for matrix A : ");
    scanf("%d %d",&r1,&c1);

    printf("Enter number of rows and columns for matrix B : ");
    scanf("%d %d",&r2,&c2);

    int a[r1][c1], b[r2][c2], ab[r1][c2], ba[r2][c1],i,j,k,temp;

    if(c1==r2 && r1==c2)
    {
        printf("\nEnter element in matrix A : ");
        for(i=0;i<r1;i++)
        {
            for(j=0;j<c1;j++)
            {
                printf("\n Enter element : ");
                scanf("%d",&a[i][j]);
            }
        }
        printf("\nEnter element in B : ");
        for(i=0;i<r2;i++)
        {
            for(j=0;j<c2;j++)
            {
                printf("\nEnter element : ");
                scanf("%d",&b[i][j]);
            }
        }
        for(i=0;i<r1;i++)
        {
            for(j=0;j<c2;j++)
            {
                temp=0;
                for(k=0;k<r2;k++)
                {
                    temp+=a[i][k]*b[j][k];
                }
                ab[i][j]=temp;
            }
        }
        for(i=0;i<r2;i++)
        {
            for(j=0;j<c1;j++)
            {
                temp=0;
                for(k=0;k<r1;k++)
                {
                    temp+=b[i][k]*a[k][j];
                }
                ba[i][j]=temp;
            }
        }
        printf("\nMatrix A : ");
        for(i=0;i<r1;i++)
        {
            printf("\n\t");
            for(j=0;j<c1;j++)
            {
                printf("%d",a[i][j]);
            }
            printf("\n");
        }
        printf("\nMatrix B : ");
        for(i=0;i<r2;i++)
        {
            printf("\n\t");
            for(j=0;j<c2;j++)
            {
                printf("%d",b[i][j]);
            }
        }
        printf("\nMatrix multiplication of A*B : ");
        for(i=0;i<r1;i++)
        {
            printf("\n\t");
            for(j=0;j<c2;j++)
            {
                printf("\t%d",ab[i][j]);
            }
            printf("\n");
        }
        printf("\nMatrix multiplication of B*A : ");
        for(i=0;i<r2;i++)
        {
            printf("\n\t");
            for(j=0;j<c1;j++)
            {
                printf("\t%d",ba[i][j]);
            }
            printf("\n");
        }
    }
    else
        printf("\nMatrix Multiplication is not possible...!!!");
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-15T13:35:08.093

您必须首先将元素初始化`C`为零。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-15T13:48:16.897

如果大小和依赖关系无关紧要，我建议使用 GNU Scientific Library。请参阅此处了解功能：[http ://en.wikipedia.org/wiki/GNU_Scientific_Library](http://en.wikipedia.org/wiki/GNU_Scientific_Library)

它包含用于数学计算的优化例程，并且通过一些编译器优化非常快。

已经成功地将它用于 3D 开发中的矩阵运算。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-15T13:38:21.590

您应该初始化`matC`为全零。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-12-22T00:02:44.463

您可能希望为结果矩阵动态分配内存。如果是这样，请用于`calloc()`分配和清除元素。 `printMatrix()`被调用来打印结果，但这里没有定义。

```
/* matrix1: [rows1 x cols1];  matrix2: [rows2 x cols2]; product is
matrix3: [rows1 x cols2] if (cols1 == rows2) is true.  calloc to 
allocate / clear memory for matrix3\.  Algorithm is O(n^3) */

float ** matrix3;
if (cols1 == rows2) {  // product matrix can be calculated
    // calloc product matrix3
    matrix3 = (float **)calloc(rows1, sizeof(float *));
    for (int i = 0; i < rows1; i++)
        matrix3[i] = (float *)calloc(cols2, sizeof(float));

    int i, j, k;
    float tmp;
    for (i = 0; i < rows1; i++) {
        for (j = 0; j < cols2; j++) {
            tmp = 0.0;
            for (k = 0; k < rows2; k++)
                tmp += matrix1[i][k] * matrix2[k][j];
            matrix3[i][j] = tmp;
        }
    }
    printMatrix(matrix3, rows1, cols2, 3);
    free(matrix3);
} else {   // cols1 != rows2
    puts("dimensional mismatch; can't multiply matrices");
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-07-19T05:50:35.770

```
//
//  main.c
//  Matrix Multiplicatiion.
//
//  Created by Devansh on 15/07/21.
// THIS WORKS FOR ANY MATRIX multiplication 
//

#include <stdio.h>

int main()
{
    int arow,acolumn,brow, bcolumn,i,j;
    int MAX=100;
    int a[MAX][MAX];
    int b[MAX][MAX];
    printf("enter rows of matrix a: ");
    scanf("%d", &arow);
    printf("enter columns of matrix a: ");
    scanf("%d", &acolumn);
    printf("enter rows of matrix b: ");
    scanf("%d", &brow);
    printf("enter columns of matrix b: ");
    scanf("%d", &bcolumn);
    if(brow != acolumn){
        printf("sorry we cannot multiply matrix a and b");
    } else {
        printf("enter the elements of matrix a:\n");
        for (i=0;i<arow;i++) {
            for(j=0;j<acolumn;j++) {
                scanf("%d", &a[i][j]);
            }
        }

        printf("enter the elements of matrix b:\n");
        for (i=0;i<brow;i++) {
            for (j=0;j<bcolumn;j++) {
                scanf("%d", &b[i][j]);
            }
        }
        int product[MAX][MAX];
        int sum=0;
        for (i=0;i<arow;i++) {
            for(j=0;j<bcolumn;j++){
                for(int k=0;k<brow;k++){
                    sum += a[i][k] * b[k][j];
                }
                product[i][j]= sum;
            }
        }
        for (i=0;i<arow;i++) {
            for (j=0;j<bcolumn;j++) {
                printf("%d   ", product[i][j]);
            }
            printf("\n");
        }
    }
    return 0;
} 
```

# android - 意图活动无法正常工作。安卓

> ID：10162469
> 
> 赞同：0
> 
> 时间：2012-04-15T13:30:47.603
> 
> 标签：android, android-intent, android-listview, ddms

[http://img861.imageshack.us/img861/7999/64339196.png](http://img861.imageshack.us/img861/7999/64339196.png)

我不明白问题是什么...

我创建了这么多 java 和 xml 文件，但从未遇到过这个问题......

在 DDMS 中有以下错误....

[http://img822.imageshack.us/img822/352/83236788.png](http://img822.imageshack.us/img822/352/83236788.png)

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T13:34:47.000

如果你有`Listview`布局改变它......

```
<ListView android:id="@android:id/list"....></ListView> 
```

如果不，

比`extends Activity`

**代替**

`extends ListActivity`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T13:36:47.883

在您提供的图像中没有 listView 但在某些 xml 文件中您有 listview 只需更改该 listView 的 id。

在 XML 文件中没有列表视图。只需将扩展 ListActivity 更改为扩展 Activity。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T13:37:29.463

[ListActivity](http://developer.android.com/reference/android/app/ListActivity.html)的 XML 布局文件必须包含一个 ListView

```
<ListView android:id="@android:id/list"
           android:layout_width="match_parent"
           android:layout_height="match_parent"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T13:05:01.243

当我创建我的类时，我将使用它来列出项目......也就是说，我准备该类为 ListView 工作......

所以我在我的班级中扩展了ListView ..，在清单文件中，班级战争被重新定义为ListActivity ..

但是后来，我改变了我的层次结构，并且我不在同一个类中使用 listView ...但我忘记扩展 Activity 而不是 ListActivity ..

这造成了一个问题......

感谢帮助....

# android - 双模块定义错误

> ID：10162472
> 
> 赞同：4
> 
> 时间：2012-04-15T13:31:55.613
> 
> 标签：android, c, android-ndk

我正在尝试使用 Android NDK 编译我的 C 代码。[我按照Android 开发者 NDK Page](http://developer.android.com/sdk/ndk/index.html)上的建议下载并安装，并尝试按规定编译，但似乎有一些问题，我似乎不知道它是什么。

```
 *** Command Line compile code **
C:\cygwin\android-ndk-r7c>ndk-build -C C:\Users\BoosterJack\workspace\workAndroid
    Android NDK: Trying to define local module 'stdc++' in C:/cygwin/android-ndk-r7c/sources/cxx-stl/system/Android.mk.
    Android NDK: But this module was already defined by C:/cygwin/android-ndk-r7c/sources/cxx-stl/system/Android.mk.
    make: Entering directory `C:/Users/BoosterJack/workspace/workAndroid'
    C:/cygwin/android-ndk-r7c/build/core/build-module.mk:34: *** Android NDK: Aborting.    .  Stop.
    make: Leaving directory `C:/Users/BoosterJack/workspace/workAndroid' 
```

我的make文件也是一个简单的。任何帮助将不胜感激。

```
# Include makefiles here.
include $(LOCAL_PATH)/Android.mk 

   LOCAL_PATH := $(call my-dir)

   include $(CLEAR_VARS)

   LOCAL_MODULE    := NativeLibjni
   LOCAL_SRC_FILES := NativeLib.c

   include $(BUILD_SHARED_LIBRARY) 
```

# 更新

当我从我的 makefile 中删除该行时，包括 $(LOCAL_PATH)/Android.mk，我得到了正确的输出，即

```
C:\Users\BoosterJack>ndk-build -C C:\Users\BoosterJack\workspace\workAndroid
make: Entering directory `C:/Users/BoosterJack/workspace/workAndroid'
"Compile thumb : NativeLibjni <= NativeLib.c
SharedLibrary  : libNativeLibjni.so
Install        : libNativeLibjni.so => libs/armeabi/libNativeLibjni.so
make: Leaving directory `C:/Users/BoosterJack/workspace/workAndroid' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T13:35:41.557

你为什么使用 Android.mk 本身包含在内`include $(LOCAL_PATH)/Android.mk`

# html - 如何在不增加 div 大小的情况下在 HTML 中应用填充？

> ID：10162476
> 
> 赞同：4
> 
> 时间：2012-04-15T13:32:30.480
> 
> 标签：html, css

我想在 div 中应用一些填充，但是当应用填充属性时，div 大小会增加，因为填充大小会添加到 div。

```
<div id="someDiv">
    someContent
</div>

#someDiv{
    padding: 1em;
} 
```

有什么方法可以在不增加 div 大小的情况下应用填充？我有一个解决方案，其中包括在#someDiv 中添加另一个内容div 并对其应用边距，但我不知道这是否是最佳解决方案。

像这样的东西：

```
<div id="someDiv">
    <div idi="anotherDiv">
        someContent
    </div>
</div>

#anotherDiv{
    margin: 1em;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T13:34:06.510

```
div { box-sizing: border-box; } 
```

尽管某些版本的 IE 不支持此功能！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T13:34:26.280

添加内部 div 或多或少是一个很好的解决方案。有财产，`box-sizing`但缺乏支持。

这是一篇关于这个主题的文章：

[http://www.quirksmode.org/css/box.html](http://www.quirksmode.org/css/box.html)

这是旧 IE 版本的 polyfill（补丁）——尽管我不确定它如何影响性能；我建议小心使用它。

[https://github.com/Schepp/box-sizing-polyfill](https://github.com/Schepp/box-sizing-polyfill)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T13:37:19.603

如果你有`<div>`一个自动宽度，即它会自动增长到其父元素的宽度，添加填充不会增加宽度。它会增加高度，这当然是不可避免的。如果您为元素设置了固定宽度，宽度只会增加，那么总宽度将为`width + padding`. 在这种情况下，从设置的宽度中减去添加的填充。

# c# - WPF Dispatcher.Run 在 Win 7 64 上引发空异常

> ID：10162477
> 
> 赞同：3
> 
> 时间：2012-04-15T13:32:32.937
> 
> 标签：c#, .net, wpf, windows-7-x64

我有以下代码在 .NET 3.5 应用程序上创建一个新的 UI 线程。

```
 private void OnCreateNewWindow(object sender, RoutedEventArgs e)
        {
            var rect = this.RestoreBounds;
            double l = rect.Left;
            double wth = rect.Width;
            double t = rect.Top;
            double ht = rect.Height;
            var progressThread = new Thread(() =>
            {

                progressWindow = new ProgressWindow(Visibility.Collapsed) { Height = 50, Width = 50 };
                progressWindow.WindowStartupLocation = WindowStartupLocation.Manual;
                progressWindow.Left = l + (wth - progressWindow.Width) / 2;
                progressWindow.Top = t - 35 + (ht - progressWindow.Height) / 2;

                progressWindow.Show();
                progressWindow.Activate();
                Dispatcher.Run();
            });

            progressThread.SetApartmentState(ApartmentState.STA);
            progressThread.Start();
        } 
```

此处演示了崩溃： ![在此处输入图像描述](../Images/6c62ebb15313f592b6957a340f5fbc01.png)

这在 32 位版本的 Windows 上完美运行。我第一次在 64 位 Windows 7 上重新启动 PC 时运行此程序时，如果通过 Visual Studio 运行或 Visual Studio 之外的应用程序崩溃，我会得到一个空异常。

异常细节是干的：

```
System.NullReferenceException was unhandled 
```

堆栈跟踪如下：

```
 [Managed to Native Transition]  
    WindowsBase.dll!MS.Win32.HwndWrapper.DestroyWindow(object args) + 0xfc bytes    
    WindowsBase.dll!MS.Win32.HwndWrapper.Dispose(bool disposing, bool isHwndBeingDestroyed) + 0xce bytes    
    WindowsBase.dll!MS.Win32.HwndWrapper.Dispose() + 0x15 bytes 
    PresentationCore.dll!System.Windows.Media.MediaContextNotificationWindow.DisposeNotificationWindow() + 0x22 bytes   
    PresentationCore.dll!System.Windows.Media.MediaContext.Dispose() + 0xba bytes   
    [Native to Managed Transition]  
    [Managed to Native Transition]  
    WindowsBase.dll!System.Windows.Threading.Dispatcher.ShutdownImplInSecurityContext(object state) + 0x47 bytes    
    mscorlib.dll!System.Threading.ExecutionContext.runTryCode(object userData) + 0x178 bytes    
    [Native to Managed Transition]  
    [Managed to Native Transition]  
    mscorlib.dll!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state) + 0x62 bytes    
    WindowsBase.dll!System.Windows.Threading.Dispatcher.ShutdownImpl() + 0x87 bytes 
    WindowsBase.dll!System.Windows.Threading.Dispatcher.PushFrameImpl(System.Windows.Threading.DispatcherFrame frame) + 0x121 bytes 
>   EMS.Controls.Dictionary.dll!EMS.Controls.Dictionary.Views.AuthenticateWindow.OnCreateNewWindow.AnonymousMethod() Line 56 + 0x5 bytes    C#
    mscorlib.dll!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state) + 0x9b bytes    
    mscorlib.dll!System.Threading.ThreadHelper.ThreadStart() + 0x4d bytes 
```

如果我继续再次运行该程序，我会从 Program Compatibility Assitant 收到一条消息，指示已应用了一些兼容性设置。下次我运行该程序时，我不再遇到此异常。有人经历过吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:38:02.717

此问题与应用程序启动顺序有关。进度窗口是在单独的 UI 线程上创建的，因此可以在 UI 线程上完成应用程序启动所需的对 Web 服务的身份验证。[根据MSDN](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/fb82a762-8703-4eee-9858-2a276966f96c)上的这个线程，在主 UI 线程上调用 webservice 方法似乎是有问题的。

幸运的是，这是应用程序中唯一在 UI 线程上同步调用 Web 服务方法的地方。

在对后台线程上的 web 服务进行身份验证时，在主 UI 线程上启动进度窗口进行更改后，到目前为止还没有出现问题。有趣的是，包括 Windows 7 x32 在内的其他版本的 Windows 并未出现此问题。

# r - 将许多列从一个 data.frame 复制到另一个

> ID：10162480
> 
> 赞同：1
> 
> 时间：2012-04-15T13:33:02.343
> 
> 标签：r, dataframe

我有以`test`500 列命名的 data.frame。我需要创建`test1`具有 7 列的 data.frame，从`test`（它们的编号是 1,2、52、121、123、344、401 等）我怎样才能轻松做到这一点？（我的意思是很快）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-15T13:43:26.740

一个简短的例子。取一个小数据框的第 1,3 列：

```
d <- data.frame(a=c(1,2,3), b=c(4,5,6), c=c(7,8,9),d=c(2,3,4))
d[,c(1,3)]

  a c
1 1 7
2 2 8
3 3 9 
```

# stackexchange - 其他 stackexchange 页面的 RSS 提要

> ID：10162482
> 
> 赞同：1
> 
> 时间：2012-04-15T13:33:11.710
> 
> 标签：stackexchange

我用

```
http://stack2rss.stackexchange.com/stackoverflow/users/429540/favorites?body=true 
```

接收有关 stackoverflow 更新的信息。

我试着做同样的事情

```
tex.stackexchange.com 
```

和

```
askubuntu.com 
```

通过以明显的方式修改 url（替换 stackoverflow），但它似乎不起作用。知道是否，如果是，我如何接收这些页面的 rss 更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:38:23.017

您的用户 ID 在每个站点上都不同：

```
http://stack2rss.stackexchange.com/tex.stackexchange/users/13403/favorites?body=true
http://stack2rss.stackexchange.com/askubuntu/users/53910/favorites?body=true 
```

# java - Java - 无法为最终变量查询赋值。这是最终的字符串

> ID：10162489
> 
> 赞同：0
> 
> 时间：2012-04-15T13:33:55.300
> 
> 标签：java, jbutton

我对最终字符串有疑问。它是一个mysql数据库客户端。我想通过单击 JButton 来更改查询。

```
public void run() {
final String query;
(...)
start.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e)
    {
if(firstSel==null || selchose.getText().equals(selchose_str) || selbase.getText().equals(base_str)) {
            query = "Select * FROM EMP";
        }
(...) 
```

问题在于

```
query = "Select * FROM EMP"; 
```

它向我展示

无法为最终变量查询赋值

如何解决问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T13:34:36.813

将查询字符串设为私有类字段或匿名内部 ActionListener 类的本地变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T13:48:15.183

```
class YOurClassName{

private String query; //make here.....<<<<<<<<

public void run() {

(...)
start.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e)
    {
if(firstSel==null || selchose.getText().equals(selchose_str) || selbase.getText().equals(base_str)) {
            query = "Select * FROM EMP";
        }
(...)

} 
```

# hadoop - hadoop崩溃后如何格式化和添加文件？

> ID：10162499
> 
> 赞同：5
> 
> 时间：2012-04-15T13:35:55.667
> 
> 标签：hadoop

我正在使用 hadoop 版本 1.0.1 和 Ubuntu linux 11.10 运行单节点集群。当它崩溃时，我正在运行一个简单的脚本，可能是因为我的计算机进入了睡眠状态。我尝试使用重新格式化文件系统

bin/hadoop 名称节点格式

并得到以下错误：

错误namenode.NameNode：java.io.IOException：无法锁定存储/app/hadoop/tmp/dfs/name。该目录已被锁定。在 org.apache.hadoop.hdfs.server.common.Storage$StorageDirectory.lock(Storage.java:602)

我尝试使用以下命令添加输入文件：

bin/hadoop fs -copyFromLocal dataDirectory/*.txt inputDirectory

并得到错误：

12/04/15 09:05:21 WARN hdfs.DFSClient: DataStreamer Exception: org.apache.hadoop.ipc.RemoteException: java.io.IOException: File /home/hduser/input/book1.txt 只能复制到0 个节点，而不是 1 个

2015 年 12 月 4 日 09:05:21 警告 hdfs.DFSClient：块 null 坏数据节点 [0] 节点的错误恢复 == null 12/04/15 09:05:21 警告 hdfs.DFSClient：无法获取块位置。源文件“/home/hduser/input/book1.txt” - 中止...

之后，我在输入目录中看到文件，但它们的大小为 0。关于如何添加文件的任何想法？我能够在 hadoop 崩溃之前添加文件，所以我可以重新安装 linux 和 hadoop，但这似乎有点矫枉过正。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T16:44:26.443

您需要先使用停止 hadoop

bin/stop-all.sh

然后尝试格式化文件系统，因为hadoop（名称节点和数据节点仍在运行）它锁定了文件系统，是否会出现该错误。

因此，如果在给出命令 bin/stop-all.sh 之后只是杀死该进程，那么您可以做的是在 shell 中给出命令“ jps ”，这将向您显示进程（java 进程）并将有一个 pid与每个进程相关的，你可以给命令“kill processno”，比如“kill 23232”，像这样杀死所有进程，并使用你说的命令删除你指定的hdfs文件系统文件夹。

***还要检查磁盘空间是否足够可用，假设您已经在 Windows 中安装了 ubuntu，您可以通过在 /host/ 和某个文件夹中指定文件系统来获得更多空间。***

**注意：您不需要格式化hdfs，因为您可以停止所有namenode和数据节点并再次启动hadoop进程，因为它不会经常被破坏，在停止并启动hadoop之后如果它给出任何错误然后你格式化文件系统。**

希望对你有帮助......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T15:55:02.693

1.  尝试手动删除为您的名称节点存储数据的目录。这是由`mapred-site.xml`like`mapred.local.dir`等中的属性配置的`mapred.system.dir`。在此之后，停止 hadoop，重新格式化 namenode 并重试。如果仍然遇到问题，请转到第 2 步

2.  尝试将名称节点配置设置为其他路径而不是当前路径。在此之后，停止 hadoop，重新格式化 namenode 并重试。如果仍然遇到问题，请转到第 3 步

3.  验证是否存在足够的磁盘空间。如果没有，则在配置 namenode 的分区中创建一些空间。如果仍然遇到问题，请转到第 4 步

4.  在`hdfs.site.xml`中，设置`dfs.replication`为 0。在此之后，停止 hadoop，重新格式化 namenode 并重试。

如果仍然面临问题，请告诉我您遇到的错误/异常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-15T16:16:48.283

我过去遇到过这种问题，对我来说这是因为我的磁盘分区已满。所以我建议你检查你的磁盘，看看是否相关。

如果是这种情况，只需释放一些空间，重新启动您的守护程序（您可能必须手动杀死它，有时会发生这种情况），然后重新启动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-07T06:16:54.097

最重要的是，检查 /etc/hadoop/conf/hdfs-site.xml 并确保您没有在以下方面使用相同的值：

dfs.name.dir & dfs.data.dir。

两者应该有不同的值。

阿比

# php - PHP 欧元符号 htmlentities

> ID：10162501
> 
> 赞同：1
> 
> 时间：2012-04-15T13:36:22.587
> 
> 标签：php

```
$string = 'ab!:;c+12,.3 €def-x/';
$string = preg_replace('/[^a-zA-Z0-9\s€+-]+/', '', $string);
$val=htmlentities($string, ENT_NOQUOTES, );
echo $string,"\n"; 
```

回声

```
abc+123 �def-x 
```

并不是

```
abc+123 €def-x 
```

我需要通过正则表达式获取欧元符号并进入数据库，而不是作为欧元符号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T13:41:54.863

尝试：

```
$string = 'ab!:;c+12,.3 €def-x/';
$string = preg_replace('/[^a-zA-Z0-9\s€+-]+/u', '', $string);
$val=htmlentities($string, ENT_NOQUOTES, 'UTF-8');
echo $string,"\n"; 
```

应该修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T13:42:27.243

您需要`u`为正则表达式提供修饰符，否则它不处理 Unicode 字符：

```
preg_replace('/.../u', ...) 
```

如果这样做，请确保源代码和文本以 UTF-8 编码。

# python - AppEngine id/key/from_path 非常令人困惑我应该使用什么

> ID：10162510
> 
> 赞同：4
> 
> 时间：2012-04-15T13:37:14.183
> 
> 标签：python, google-app-engine, python-2.7

我又回到了 AppEngine 开发中。我对数据存储很感兴趣。

我习惯于“ids”，使用“/view?id=322345”之类的链接构建网站，让我获得了带有这个 id 的留言簿条目。

但是在 AppEngine 中，我总是看到调用 db.Key.from_path() 方法以及其他诸如“祖先”和“父母”之类的东西。

在我的项目中，我有简单的关系，比如用户->电话号码，我想通过 GET url 附加一些类似 id 的东西来检查每个用户。我应该使用 User models key() 还是在 AppEngine 中如何实现？

目前，如果我想向用户添加一个电话号码，我会写以下内容：

```
class JoinHandler(webapp2.RequestHandler):
    def get(self):
        user_key = self.request.get('rlm')
        fon_number = PhoneNumber()
        fon_number.country = "deDE"
        fon_number.user = db.Key(user_key)
        fon_number.put()
        self.redirect("/") 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-15T17:02:23.790

如果您使用`put`实体时数据存储区自动分配的数字 ID，则可以使用模型的`get_by_id`方法检索实体：

```
class User(db.Model):
    name = db.StringProperty()
    # etc.

def AddUser(webapp2.RequestHandler):
    def get(self):
        newUser = User()
        newUser.name = self.request.get('name')
        # etc. assign all model properties
        newUser.put()
        # now, newUser.Key().id() contains the auto-assigned numeric id.
        # we can pass this value to our template and get it back via
        # a form paramter for subsequent operations.

def ShowUser(webapp2.RequestHandler):
    def get(self):
        user_to_show_id = self.request.get('id')
        user_to_show = User.get_by_id(user_to_show_id)
        if user_to_show is not None:
            # populate the template parameters with the users's data
            # and render the template
        else:
            # The requested user does not exist, so
            # render an error message/page. 
```

现在，如果您还想存储属于给定用户的电话号码实体，您可以将它们存储为它们的父级是用户实体。这会将它们放在用户的实体组中，并且与将它们与父项一起存储相比，可以更快地一起查询实体组中的实体。

假设任何用户都可以有任何给定数量的 Phonenumber 实体与之关联：

```
class Phonenumber(db.Model):
    number_type = db.StringProperty()
    number = db.StringProperty() 
```

我们将向 User 类添加一个方法：

```
def AddNumber(self, new_number_type, new_number):
    new_number = Phonenumber(parent=self, number_type=new_number_type, number=new_number)
    # In this case, self is the User entity, and by saying parent=self, we're putting
    # this Phonenumber entity into User's entity group.
    new_number.put()

def GetPhoneNumber(self):
    # Now, getting all of User's phone numbers is a simple as a query with an
    # Ancestor clause:
    users_numbers = Phonenumber.all().ancestor(self).fetch(1000)

   return users_numbers 
```

显然，这些类是幼稚的，直接从我的脑海中浮现出来，但我希望它们能帮助你理解 id 和祖先的关系。通常，您根本不必`Key()`手动创建密钥。除非你真的需要，否则不要走那条路。尽管如此，了解 Keys 的工作原理对于真正了解 AppEngine 还是很有帮助的，因此如果您愿意，可以深入研究并进行试验。

我认为这是你的两个主要问题，是吗？如果您还有其他人，请继续发表评论，我将编辑我的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-23T04:35:40.297

至于您`db.Key.from_path()`要做什么的问题，请查看[Key Class 文档](https://developers.google.com/appengine/docs/python/datastore/keyclass#Key_from_path)，您会看到第一个参数`from_path()`是您要检索的数据存储对象的**类型。**

Args 是这样列出的：

`Key.from_path(kind, id_or_name, parent=None, namespace=None)`

在我的一个基本博客应用程序中，我有以下行：

`key = db.Key.from_path('BlogPost', int(post_id), parent=blog_key())`

这是在寻找一个类型为 的对象`BlogPost`，其 id 为`post_id`，并且其父对象等于该`blog_key()`方法的返回值。

`blog_key()`定义为：

```
def blog_key(name = 'default'):
return db.Key.from_path('blogs', name) 
```

老实说：我还没有弄清楚这部分（从[udacity cs253](https://www.udacity.com/course/viewer#!/c-cs253/)逐字复制），但我认为它建立的是数据存储中所有`BlogPost`对象的祖先值。

我只在 GAE 工作了几个星期，完成了 cs253 课程，所以我非常感谢对此的任何澄清，或者更清楚地解释“正在发生的事情”

# php - 如何使用 mod_rewrite 生成干净的 URL

> ID：10162512
> 
> 赞同：-3
> 
> 时间：2012-04-15T13:37:21.010
> 
> 标签：php, url, mod-rewrite

我有一个由 PHP 脚本生成的网站，我真的很喜欢使用 mod_rewrite 看起来专业和干净的 URL。

我当前的网址：

> site.com/view.php?category=bags§ion=computer_bags&gallery=don_rolege

我想把那个丑陋的 URL 变成这样的东西：

> site.com/bags/computer_bags/don_rolege

我在整个互联网上搜索了一个解决方案，但我无法让代码特别适用于此。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T13:49:50.433

我假设你的 URL 总是有类别、部分和画廊，不多也不少。

```
RewriteRule ^(.+)/(.+)/(.+)$ /view.php?category=$1&section=$2&gallery=$3 [NC,L] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-15T14:08:48.343

这是一个非常清晰和详细的教程，说明如何根据自己的喜好进行设置：

[http://www.youtube.com/watch?v=ZgCW2x5QCXo](http://www.youtube.com/watch?v=ZgCW2x5QCXo)

它还可以解决您在途中发现的任何服务器错误。

# iphone - OCR - 使用 iphone 识别价格标签（openCV/Tesseract/其他方法？）

> ID：10162513
> 
> 赞同：2
> 
> 时间：2012-04-15T13:37:25.667
> 
> 标签：iphone, ios, opencv, ocr, tesseract

以前有人问过这个问题，但是每个解决方案似乎都是根据其目的量身定制的，所以我想知道是否有任何了解 OCR 的人可以帮助我找到合适的解决方案。

我希望用 iPhone 相机识别价格标签。我尝试过将 tesseract 与“仅数字”模式（没有任何修改/培训）一起使用，但它在 99% 的情况下都失败了。

那么，这里有什么合适的呢？用大量价格标签/字体的图像训练 tesseract？

也许使用 openCV 并用数千张图像对其进行训练？

也许你知道另一个可以做到这一点的引擎？

这个有很多方向，我不知道从哪里开始......

**（编辑：我正在寻找一个开源解决方案。不是远程服务..**）

谢谢，罗伊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T15:08:26.730

我可以告诉你，训练不是你的解决方案，因为它将输入转换为直方图，与实际的文本识别无关。不过，我认为 openCV 确实有一些 OCR 特定的方法，而且我确信它在[这里](http://code.google.com/p/opencv-ios/)有一个与 iOS 兼容的框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-29T06:53:10.430

您是否尝试过使用带有 tesseract 的 GPUImage 开源库。GPUImage 库的链接是[https://github.com/BradLarson/GPUImage](https://github.com/BradLarson/GPUImage)。为什么不能尝试一些图像处理库，例如[https://code.google.com/p/simple-iphone-image-processing](https://code.google.com/p/simple-iphone-image-processing)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-12-29T10:27:31.323

是的，还有其他引擎可以做到这一点，甚至是免费的。看这里：[RTRSDK.com](http://rtrsdk.com)。

免责声明：我为 ABBYY 工作

# c# - 如何在具有多个 id 的 div 上获取 JavaScript 函数

> ID：10162518
> 
> 赞同：1
> 
> 时间：2012-04-15T13:37:50.537
> 
> 标签：c#, javascript, jquery, asp.net

我正在 ASP.net 中实现一个讨论面板，在其中我将评论 ID 分配给评论。

我想`click`在每个评论点击事件上调用 jQuery 函数。我如何调用 click 函数，因为在评论中`div`我分配了 id 1,2,3.... 而且我不知道范围，所以我不能使用`$("#1 || #2").click()`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T13:41:20.110

为每个评论 div 分配相同的类，然后执行 $(".commentdiv").click

像这样的jQuery很棒。

如果需要知道后面被点击的元素的id，可以通过this.id获取。

```
$(".commentdiv").click(function() {
   alert(this.id);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T13:42:23.207

使用[类选择器](http://api.jquery.com/class-selector/)

```
$(".panel").click(clickfunction);

function clickfunction()
{
    //do something
    id = $(this).attr('id');
    alert(id);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T13:42:44.103

在 html 中添加许多这样的 div

```
<div id="div1" onclick="Myfun(this)">
<div id="div2" onclick="Myfun(this)"> 
```

在 JavaScript 中

```
function MyFun(currentDiv)
{
alert(currentDiv.id);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-15T13:48:32.323

分配相同的类是答案，如果你想计算 div 的数量，那么试试这个

var top_level_div = document.getElementById('id_of_first_div');

var count = top_level_div.getElementsByTagName('div').length;

getElementsByTagName() 不仅是一种文档方法，而且可以在任何 DOM 元素上运行。

```
element.getElementsByTagName is similar to document.getElementsByTagName, except that its search is restricted to those elements which are descendants of the specified element 
```

我在[这里找到了](https://stackoverflow.com/a/2249702/1242357)

# css - 在 CSS 中使用 ul#test 和 #test ul 有什么区别

> ID：10162520
> 
> 赞同：0
> 
> 时间：2012-04-15T13:38:04.700
> 
> 标签：css, css-selectors

有人可以阐明这两种类型的 CSS 声明之间的区别：

```
ul#test {
}

#test ul {
} 
```

我已经看过并且似乎找不到差异，但是当我在测试页面上使用它们时它们的行为不同。据我所知，他们做同样的事情，即仅将#test ID 与分配给它的 UL 标记相关联。但是，在实际使用中，当我在样式表中使用 ul#test 时，格式可以正常工作。另一方面，如果我使用 #test ul 它不会。

你可以看到我在这里指的是：

[http://jsbin.com/awixib/2/edit#source](http://jsbin.com/awixib/2/edit#source)

ul#test 方法是否意味着 ID 是专门分配给一个 UL 标记的，而 #test ul 是否意味着 UL 在另一个分配了 ID 的标记内？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T13:40:03.400

```
ul#test {
} 
```

这个适用于`ul`id 为`test`

```
#test ul {
} 
```

这适用`ul`于其祖先是具有 id 的元素`test`

# objective-c - Apple CameraUI 代码的内存泄漏

> ID：10162522
> 
> 赞同：1
> 
> 时间：2012-04-15T13:38:20.960
> 
> 标签：objective-c, ios, memory-management, memory-leaks, camera

我使用了 Apple 的“iOS 相机编程主题”指南中的一些代码，如下所示：

```
UIImagePickerController *cameraUI = [[UIImagePickerController alloc] init];
cameraUI.sourceType = UIImagePickerControllerSourceTypeCamera;

// Displays a control that allows the user to only take picture:
cameraUI.mediaTypes = [[NSArray alloc] initWithObjects: (NSString *) kUTTypeImage, nil];

// Hides the controls for moving & scaling pictures, or for trimming movies. To instead show the controls, use YES.
cameraUI.allowsEditing = NO;

cameraUI.delegate = delegate;

[controller presentModalViewController: cameraUI animated: YES];
[cameraUI release]; 
```

但是，当我“分析”我的代码时，Xcode 说我有可能从以下行泄漏：

```
cameraUI.mediaTypes = [[NSArray alloc] initWithObjects: (NSString *) kUTTypeImage, nil]; 
```

`release`除了上面显示的命令外，我没有其他命令。鉴于有问题的数组是 cameraUI 的一个属性（已发布），我不确定我应该做什么（如果有的话）。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T13:47:30.757

除非`cameraUI.mediaTypes`属性是用 定义的`assign`，否则这里确实存在泄漏。将生产线分成多个步骤可能会有所帮助，仅用于指导。

```
NSArray* mediaTypes = [[NSArray alloc] initWithObjects: (NSString *) kUTTypeImage, nil];
cameraUI.mediaTypes = mediaTypes; 
```

如果`cameraUI`照顾自己的记忆，那么分配什么或何时分配都无关紧要。但是，在第一行中，您正在构造一个变量，但从未释放它。那么，你如何解决这个问题？修复它的标准方法是在构建过程中自动释放。

```
cameraUI.mediaTypes = [[[NSArray alloc] initWithObjects: (NSString *) kUTTypeImage, nil] autorelease]; 
```

如果您正在处理必须尽快释放的非常大的对象，则需要在传递给它后手动释放它`cameraUI`：

```
NSArray* mediaTypes = [[NSArray alloc] initWithObjects: (NSString *) kUTTypeImage, nil];
cameraUI.mediaTypes = mediaTypes;
[mediaTypes release]; 
```

仅在需要时才使用第二种形式——它更容易出错。

# javascript - 在 Django 中，如果存在的话，根据视图名称动态加载一些 JavaScript 的更聪明的方法是什么？

> ID：10162528
> 
> 赞同：0
> 
> 时间：2012-04-15T13:38:40.990
> 
> 标签：javascript, django, view

每次使用模板调用视图时，在 Django 中，我想加载一个具有相同名称的 JavaScript 文件（如果存在）。

因此，如果我调用 view `foo`，我想`foo.js`在特定（公共）目录中自动加载（如果存在）。

在模板中抽象这个很容易，假设我将向模板传递一个 JavaScript 列表以加载并将其加载到基本模板中。

但是如何在不为每个视图编写代码的情况下为每个视图获得这个通用的呢？使用上下文处理器？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T03:24:20.277

在基于类的视图中，您可以添加一个 mixin 以将类名添加到上下文中。或者您可以使用中间件`process_view`并将视图的名称放在某处`request`

# grails - 找不到 GSP 页面

> ID：10162529
> 
> 赞同：0
> 
> 时间：2012-04-15T13:38:42.863
> 
> 标签：grails, gsp

我有一个项目（Grails 2.0.3）和一个位于文件夹中的 gsp 页面：Proj/grails-app/views/folder/page.gsp

我有一个链接到该 gsp 页面的页面，如下所示：`<a href="page.gsp">page</a>`

当我单击该链接时，我收到一个 HTTP 404 错误：

```
HTTP Status 404 - "/folder/page.gsp" not found. 
```

我最近从 Grails 1.3.7 升级，它运行良好 - 我至少能够看到该页面！

我在这里想念什么？

# jquery - 使用 jQuery 隐藏 div（长度选项）不起作用

> ID：10162530
> 
> 赞同：2
> 
> 时间：2012-04-15T13:39:08.637
> 
> 标签：jquery, css, drupal

我正在使用 Drupal 7.0 和 Galleria Javascript Image Gallery（全屏主题）。我的主题有 2 个导航按钮。那是css代码：

```
.galleria-image-nav {
  height: 159px;
  opacity: 0.8;
  position: fixed;
  right: 0;
  top: 65%;
  width: 82px;
  z-index: 11000;
} 
```

我想当浏览器获得 960 像素时，这个导航按钮会以淡出效果隐藏。还有我的js代码：

```
if ( $(".galleria-image-nav").length > 0 ) {
  if ( w_width < 960 ) {
    $(".galleria-image-nav").fadeOut(400);
  } else {
    $(".galleria-image-nav").fadeIn(400);
  }
} 
```

但是这个功能不起作用。什么问题？谢谢。（对不起我的英语。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T14:39:43.543

```
$(window).resize(function() {
  if ( $(".galleria-image-nav").length > 0 ) {
     if ( $(window).width() < 960 ) {
       $(".galleria-image-nav").fadeOut(400);
       }
     else {
       $(".galleria-image-nav").fadeIn(400);
       } 
     }
});​ 
```

像这样的东西应该工作

# android - 当 USB 未连接时 ScheduledExecutorService 停止

> ID：10162532
> 
> 赞同：1
> 
> 时间：2012-04-15T13:39:18.427
> 
> 标签：android, service, scheduled-tasks

在我的应用程序中，我有一项服务正在向服务器查询数据。该服务每 x 分钟查询一次服务器，可以配置。当我运行应用程序时，连接到 USB 电缆，

```
timer.schedule(new MyTimerTask(), delayInSec, TimeUnit.SECONDS); 
```

完美运行。但是当设备没有连接到USB（电脑）时，它就停止了。

当设备重新连接到 USB 时，它会恢复工作。

如何解决？

谢谢，埃亚尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T13:53:54.247

> 如何解决？

第 1 步：删除现有的`ScheduledExecutorService`实现。

步骤＃2：`AlarmManager`用于设置您的计划工作，让工作由 a 执行[`WakefulIntentService`](https://github.com/commonsguy/cwac-wakeful)，因此设备将唤醒以完成工作，保持清醒足够长的时间以完成工作，然后在完成后重新进入睡眠状态（并让您的服务在作业之间关闭，因此它不会不断占用用户的 RAM）。

# android - 活动在 HOME 按钮上结束

> ID：10162534
> 
> 赞同：1
> 
> 时间：2012-04-15T13:39:24.017
> 
> 标签：android, android-activity, android-homebutton

我的主页按钮有奇怪的问题。我有两个活动A和B。

A 总是以 B 开头...像这样：

```
startActivityForResult(new Intent("com.test.B"), 0); 
```

并听取完成整个应用程序的结果......但我认为这并不重要。

当我在 B 活动中，并点击 HOME 按钮......并长按 HOME 按钮返回。显示的是活动 A 而不是 B...

为什么会这样？任何的想法？我应该在清单中设置一些东西吗？看起来活动 B 已经完成了……但我不想那样做。我想显示B...

以下是 A 活动的一些代码：

```
// Start new activity
Intent intent = new Intent(getApplicationContext(),B.class);
startActivityForResult(intent, 0); 
```

这是清单中的一些代码：

```
<activity
        android:label="A"
        android:name=".A"
        android:screenOrientation="portrait" >
        <intent-filter >
            <action android:name="com.uno_manager.A" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:label="B"
        android:name=".B"
        android:noHistory="true"
        android:screenOrientation="portrait" >
        <intent-filter >
            <action android:name="com.uno_manager.B" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

我在这两个活动之前有一个活动......代表启动画面。

在活动中，BI 已被覆盖`onRestoreInstance`和`onInstanceSave`方法。并且单击我会调用`setResult`并`finish()`退出应用程序。但我认为这与此无关。

我试图从 B 活动中评论整个代码。我只留下`setContentView`了`onCreate`方法。同样的事情也发生在 HOME 按钮上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T14:35:18.090

在您的清单文件中，将 launchMode 属性添加到您的活动中。[有关重用http://developer.android.com/guide/topics/manifest/activity-element.html#lmode](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)的更多信息，请参阅此链接

我认为除此之外的任何东西都`standard`可以满足您的要求，但请参阅文档以获取完整信息或尝试使用它们以找出正确的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-13T07:59:20.030

您应该`android:noHistory="true"`从活动 B 中删除。从[文档](https://developer.android.com/guide/topics/manifest/activity-element.html)中：“当用户导航离开它并且它不再在屏幕上可见时，将调用活动的 finish() 方法”

# join - 教义 orm 计数 1:n 加入关系

> ID：10162536
> 
> 赞同：3
> 
> 时间：2012-04-15T13:39:41.537
> 
> 标签：join, symfony, count, doctrine, query-builder

我正在使用来自 symfony2 的 admingenerator 模块的教义 orm，我无法进行涉及两个表的选择计数。 **我真的很感激对此的任何想法。提前非常感谢！**

这是查询**构建器**表达式：

```
class ListController extends BaseListController
{
protected function getQuery()
    {
        $query = $this->getDoctrine()
                    ->getEntityManager()
                    ->createQueryBuilder()
                    ->select('q, count(f.fbid) AS no')
                    ->from('Shlomi\UsersBundle\Entity\users', 'q')
                    ->leftJoin('q.fbid' , 'f')
                    ->groupBy('q.fbid');

        $this->processSort($query);
        $this->processFilters($query);
                $this->processScopes($query);

        return $query->getQuery();
    }
} 
```

我使用的两个实体是：

```
class Users
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;

    /**
     * @var bigint $fbid
     *
     * @ORM\OneToMany(targetEntity="Friendships", mappedBy ="fbid")
     * @ORM\JoinColumns({
     *   @ORM\JoinColumn(name="fbid", referencedColumnName="fbid")
     * })
     */
    private $fbid;
   .... 
```

和

```
class Friendships
{
    /**
     * @var integer $Id
     *
     * @ORM\Column(name="id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $Id;

   /**
     * @var Users
     *
     * @ORM\ManyToOne(targetEntity="Users", inversedBy="fbid")
     * @ORM\JoinColumns({
     *   @ORM\JoinColumn(name="fbid", referencedColumnName="fbid")
     * })
     */
    private $fbid;
.... 
```

虽然 Friendships 中的关联注释是由学说自动生成的：generate-entities（包含来自 Users.fbid 的 fbid 的外键引用），但据我所知，Users(1:n) 中的注释是手动插入的。

我已经尝试一遍又一遍地编辑查询生成器和注释，但最后我得到了这个：

> 渲染模板期间抛出异常（“Catchable Fatal Error: Object of class Doctrine\ORM\PersistentCollection could not be convert to string in C:\xampp\htdocs\symfony2\app\cache\dev\twig\ea \85\2b678090e942db52cc01e3950dbc.php 第 225 行") 在第 92 行的 Admingenerated/ShlomiUsersBundle/Resources/views/UsersList/index.html.twig 中。

谢谢，离子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T01:32:46.217

尝试：

```
 $qb = $this->getDoctrine()
               ->getEntityManager()
               ->createQueryBuilder();
    $query = $qb->select('q', $qb->expr()->count('f.fbid'))
                ->from('Shlomi\UsersBundle\Entity\users', 'q')
                ->leftJoin('q.fbid' , 'f')
                ->groupBy('q.fbid'); 
```

制作 querybuilder ($qb) 然后形成查询的两步过程很重要，因此您可以使用 $qb 方法（例如 expr() 和 count() ）

# linux - 递归重命名文件并删除一个字符

> ID：10162537
> 
> 赞同：2
> 
> 时间：2012-04-15T13:39:54.423
> 
> 标签：linux, bash, rename, xargs

有一些文件名包含“？” 如您所知，Windows 存在此类字符的问题。我想使用递归重命名文件夹中的所有文件`xarg`。例如

```
09 - grand hall?_10.mp3 
```

应该

```
09 - grand hall_10.mp3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T13:54:04.153

`for file in $(find *folder* -name '*.mp3'); do
  mv -v "$file" $(echo "$file" | tr ? _);
done`

* * *

以上有空格问题；这个更好：

`find *folder* -name '*.mp3' -exec echo "'{}'" \; |
  while read file; do
    echo -n "mv -v $file " && echo $file | tr ? _;
done | sh`

这个想法是找到所有文件，然后用引号回显它们。将输出传递到为每个文件`while`构造`mv`命令的循环中，然后将其传递*到*新的 shell 中。

丑陋，但如果你不喜欢这个答案，你就不应该问这个问题。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T13:48:37.567

这非常难看，但我认为找到一个可行的单线是一种个人挑战。:-)

`find *folder* -name '*.mp3' -exec \
  sh -c "echo -n 'mv \"{}\" ' && echo \'{}\' | tr ? _" \; | sh`

策略是找到文件，用引号为每个文件`echo`构造一个`mv`命令，然后将输出通过管道传输到 shell。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T16:34:22.267

即使文件名包含单/双引号和空格，这个单行也应该工作：

```
(IFS=\0;find . -name \*\\?\* -type f -print0| while read -d '' f;do mv -v $f $(echo $f|tr -d \?);done) 
```

解释：

1.  `find`仅搜索名称包含“？”的文件
2.  在, (by ) 和(by ) 中设置`\0`为分隔符可以处理包含特殊字符的文件名，如单引号、双引号、空格等。`IFS``find``-print0``read``-d ''`
3.  最外面的括号将整个命令放在子 shell 中执行，因此保持当前 shell 的`IFS`完整。
4.  脚本中的`.`可以替换为任何其他目录。
5.  不过，这个脚本有一个非常小的问题：如果文件名和它的父名之一都包含“？”，它可能会中断。这可以处理，但脚本会变得有点丑陋和可读性差。

# scala - Scala 中的构造函数局部变量

> ID：10162539
> 
> 赞同：18
> 
> 时间：2012-04-15T13:40:11.597
> 
> 标签：scala

我在“不耐烦的 Scala”的练习 5.7 中，我需要创建一个类 Person，它在构造函数上采用*name:String*并具有 2 个属性*firstName*和*lastName*填充的名称由空格分隔。我的第一次试验是：

```
class Person(name:String) {
  private val nameParts = name.split(" ")

  val firstName = nameParts(0)
  val lastName = nameParts(1)
} 
```

问题是，现在*nameParts*仍然作为一个私有字段在类中始终可见，而实际上应该只存在于构造函数的本地环境中。我想要的Java等价物是：

```
 class Person{
    private final String firstName;
    private final String lastName;

    Person(String name){
        final String[] nameParts = name.split(" ");
        firstName = nameParts[0];
        lastName = nameParts[1];
    }
 } 
```

在这里，*nameParts*仅存在于构造函数中，这是我的目标。关于如何在 Scala 中完成此操作的任何提示？

注意：我最终找到了一种更“Scalesque”的方式：

```
class Person(name:String) {
    val firstName::lastName::_ = name.split(" ").toList 
} 
```

但我仍然想得到我的问题的答案。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-15T13:56:25.983

有一种方法可以避免`private val`。只需使用以下提取器`Array`：

```
class Person(name: String) {
  val Array(first, last) = name.split(" ")
} 
```

编辑：

您想要做的事情可以通过伴随的工厂方法和默认构造函数来实现，该构造函数将 first 和 last 作为参数：

```
class Person(val first: String, val last: String)

object Person {
  def apply(name: String) = {
    val splitted = name.split(" ")
    new Person(splitted(0), splitted(1))
  }
}

scala> Person("Foo Bar")
res6: Person = Person@37e79b10

scala> res6.first 
res7: String = Foo

scala> res6.last
res8: String = Bar 
```

但是对于这个简单的案例，我更喜欢我的第一个建议。

您链接中的示例也可以使用，但这与我的第一个示例相同。Afaik 无法在构造函数中创建临时变量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T15:53:51.123

我的想法很简单

```
class Person(n: String) {
  val firstName = n.split(" ")(0)
  val lastName = n.split(" ")(1)
} 
```

如果您想排除通用代码，那么 drexin 对数组的回答非常好。但它需要读者在第 5 章中没有的知识。但是，带元组的 var 已在第 4 章中介绍，因此以下内容触手可及：

```
class Person(n: String) {
  val (firstName, lastName) = { val ns = n.split(" "); (ns(0), ns(1)) }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-15T14:52:31.050

只是对@drexin 答案的补充。在您的示例`class Person(name:String)`中，构造函数参数仍然存储为`private[this] val name: String`并且可以在类中访问，例如：

```
class Person(name:String) {
  def tellMeYourName = name
} 
```

如果你真的想避免这种情况，你可以创建一个伴生对象并将主构造函数设为私有：

```
class Person private (val fName: String, val lName: String)

object Person {
  def apply(name: String) = {
    val Array(fName, lName) = name split " "
    new Person(fName, lName)
  }
} 
```

`Person`另一种方法是使用伴随对象创建特征：

```
trait Person {
  val lName: String
  val fName: String
}
object Person {
  def apply(name: String) = new Person {
    val Array(lName, fName) = name split " "
  }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-12T12:16:26.307

一种避免定义提取器或需要伴随对象方法的方法是

```
class Person(name: String) {    
  val (firstName, lastName) = {
    val nameParts = name.split(" ")
    (nameParts(0), nameParts(1))
  } 
}
object Example {
  println(new Person("John Doe").firstName)
} 
```

包含在其中的 scala 表达式`{..}`具有其中最后一个子表达式的值

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-24T12:31:32.847

执行此操作的常见 scala 方法是使用伴随对象（如先前答案中所述）。

但是，在某些情况下，这可能是一个问题（例如，如果我们继承类并希望在不知道内部逻辑的情况下调用相关的构造函数，或者如果我们想通过反射实例化该类）。

我知道如果直接在课堂上做这件事的唯一方法有点复杂：

```
class Person(name: String, x: Seq[String]) {
  val firstName = x(0)
  val lastName = x(1)

  def this(name: String) {
    this(name, name.split(" "))
  }
} 
```

这个想法是 x（与 name 相同）没有 var 或 val，因此被转换为 private[this] val。

优化器知道，由于它们没有在构造函数之外使用，它可以将它们用作普通函数参数并且它们不会被保存。内部调用使这成为可能。

javap -private Person.class 的结果：

```
public class com.rsa.nw_spark.Person {
  private final java.lang.String firstName;
  private final java.lang.String lastName;
  public java.lang.String firstName();
  public java.lang.String lastName();
  public com.rsa.nw_spark.Person(java.lang.String, scala.collection.Seq<java.lang.String>);
  public com.rsa.nw_spark.Person(java.lang.String);
} 
```

多次提到的解决方案如下所示：

```
class Person(name: String) {    
  val (firstName, lastName) = {
    val nameParts = name.split(" ")
    (nameParts(0), nameParts(1))
  } 
} 
```

实际上不起作用。它创建一个保存的临时元组。javap -private Person.class 的结果：

```
public class com.rsa.nw_spark.Person {
  private final scala.Tuple2 x$1;
  private final java.lang.String firstName;
  private final java.lang.String lastName;
  public java.lang.String firstName();
  public java.lang.String lastName();
  public com.rsa.nw_spark.Person(java.lang.String);
} 
```

# javascript - Contenteditable div 与 iframe 制作富文本/所见即所得编辑器

> ID：10162540
> 
> 赞同：32
> 
> 时间：2012-04-15T13:40:32.160
> 
> 标签：javascript, jquery, wysiwyg, contenteditable, execcommand

我正在尝试权衡在制作我自己的富文本/所见即所得编辑器时使用`<div>`vs.的利弊。`<iframe>`

在这样做时，为什么我不能只使用*contenteditable* `<div>`，为什么这么多人更喜欢`<iframe>`?

背景讨论：据我所知，制作所见即所得编辑器的一种常见方法是使 div 或 iframe*内容*可编辑，然后`execCommand`在包含 div 或 iframe 正文的文档上执行以使其文本粗体或其他内容。

这是HTML：

```
<html><!--parent doc-->
  <body><button type="button" class="btn-bold">Bold</button>
       <div contenteditable="true"></div>
  </body>
</html> 
```

与：

```
<html><!--parent doc-->
  <body><button type="button" class="btn-bold">Bold</button>
    <iframe>
       <body contenteditable="true"></body>
    </iframe>
  </body>
</html> 
```

和JS：

```
$(document.body).on('click', '.btn-bold', function(){
     document.execCommand('bold', false, null); 
}); 
```

与：

```
$(document.body).on('click', '.btn-bold', function(){
     window.frames[0].document.body.execCommand('bold', false, null); 
}); 
```

看起来大多数制作精良的富文本编辑器都使用 iframe。虽然我可以轻松地让这个*contenteditable* /`execCommand`组合在 Webkit 浏览器中的 div/iframe 上工作，但我在尝试让 iframe 在 Firefox 中工作时遇到了地狱般的时光。我不得不求助于将脚本和样式表加载到 iframe 和各种废话来复制我可以使用基于 div 的版本轻松完成的任务。因此，`<div>`基于 - 的方法似乎更可取。我重新考虑有什么强有力的理由吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-13T23:03:02.230

首先...如果您正在考虑商业用途，请不要尝试制作自己的所见即所得编辑器。对于个人项目来说，这是一个很酷的想法，因为您可以学到**很多东西**，但是您需要数年时间来创建编辑器，您将能够将其出售给关心它是否真的有效的人，而不仅仅是外观。我最近看到了一些看起来很酷的新编辑器，但它们确实不起作用。真的。这并不是因为他们的开发人员很糟糕——而是因为浏览器很糟糕。

好的，这是一个很棒的介绍，现在是一些事实：

1.  我是 CKEditor 的开发人员之一。
2.  它已经开发了大约 10 年。
3.  我们的 Trac 上仍有大约 1000 个活跃问题。
4.  我们不喜欢网络开发：P。

现在答案 - 除了 Tim Down 在这里写的[构建所见即所得编辑器](https://stackoverflow.com/questions/4426478/building-a-wysiwyg-editor)之外，您还可以阅读我在这个问题下写[的内容 HTML WYSIWYG edtor:Why is the editable content move in an iFrame](https://stackoverflow.com/questions/11202534/html-wysiwyg-edtor-why-is-the-editable-content-moved-in-an-iframe)

基本上，在 iframe 中你更安全，你有整个文档，内容不会从你的可编辑元素中泄漏出来，你可以使用样式等。iframe 方法也有一些缺点 - 它更重，引导代码是......真的很棘手，你不能继承编辑器所附加的网站的样式，我想在这种情况下管理焦点可能会更困难，你必须注意你在哪个文档中创建新元素（仅在 IE<8) 中相关。

请记住 - 不要编写自己的编辑器，除非您已准备好解决此类问题[粘贴为纯文本 Contenteditable div & textarea (word/excel ...)](https://stackoverflow.com/questions/11240602/paste-as-plain-text-contenteditable-div-textarea-word-excel/) :D

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-12T11:36:26.643

## 原因`iframe`

### 优点

1.  CSS 隔离
2.  安全隔离（我无法详细说明这一点，我重复我阅读的内容）

### 缺点

1.  较重（但不是显着/明显的点）
2.  更难从 JavaScript 访问。

就个人而言，我开发了自己的编辑器，并选择将其放入`iframe`.

# scala - Scala 中的惰性 val 和隐式参数

> ID：10162541
> 
> 赞同：8
> 
> 时间：2012-04-15T13:40:36.427
> 
> 标签：scala, parameters, implicit, lazy-evaluation

我一直试图了解隐式参数在 Scala 中是如何工作的。据我所知，隐式参数解析是这样的：

1.  将对象显式传递给方法。
2.  范围内定义的隐式定义。
3.  用作隐式参数的类的伴随对象

然而，当我开始与懒惰的 vals 一起玩这个时，我有点吃惊。似乎懒惰的 val 只使用最后的解析规则。下面是一些示例代码来说明：

```
class Bar(val name:String)
object Bar { implicit def bar = new Bar("some default bar") }

class Foo {
  lazy val list = initialize
  def initialize(implicit f:Bar) = {
    println("initialize called with Bar: '" + f.name + "' ...")
    List[Int]()
  }
}

trait NonDefaultBar extends Foo {
  implicit def f = new Bar("mixed in implicit bar")
  def mixedInInit = initialize
  lazy val mixedInList = list
}

object Test {
    def test = {
      println("Case 1: with implicitp parameter from companion object")
      val foo1 = new Foo
      foo1.list
      foo1.initialize

      println("Case 2: with mixedin implicit parameter overriding the default one...")
      val foo2 = new Foo with NonDefaultBar 
      foo2.mixedInList

      val foo3 = new Foo with NonDefaultBar 
      foo3.mixedInInit

      println("Case 3: with local implicit parameter overriding the default one...")
      implicit def nonDefaultBar = new Bar("locally scoped implicit bar")
      val foo4 = new Foo 
      foo4.list
      foo4.initialize
    }
} 
```

调用`Test.test`给出以下输出：

```
Case 1: with implicitp parameter from companion object 
initialize called with Bar: 'some default bar' ... 
initialize called with Bar: 'some default bar' ... 
Case 2: with mixedin implicit parameter overriding the default one... 
initialize called with Bar: 'some default bar' ... 
initialize called with Bar: 'mixed in implicit bar'... 
Case 3: with local implicit parameter overriding the default one... 
initialize called with Bar: 'some default bar' ... 
initialize called with Bar: 'locally scoped implicit bar' ... 
```

为什么编译器在案例 2 中调用 mixInList 时没有发现混入了隐式 Bar。在案例 3 中，它在访问列表时也错过了本地定义的隐式 Bar。

**有什么方法可以将隐式参数与不使用伴随对象中定义的隐式定义的惰性 val 一起使用？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T14:07:44.400

那是因为没有其他`implicit Bar`的，当编译器编译 Foo 类时。Java中的反编译代码如下所示：

```
public class Foo
  implements ScalaObject
{
  private List<Object> list;
  public volatile int bitmap$0;

  public List<Object> list()
  {
    if (
      (this.bitmap$0 & 0x1) == 0);
    synchronized (this)
    {
      if (
        (this.bitmap$0 & 0x1) == 0) {
        this.list = initialize(Bar..MODULE$.bar()); this.bitmap$0 |= 1; } return this.list;
    }
  }
  public List<Object> initialize(Bar f) { Predef..MODULE$.println(new StringBuilder().append("initialize called with Bar: '").append(f.name()).append("' ...").toString());
    return Nil..MODULE$;
  }
} 
```

这`lazy val`只是一个检查变量是否已经设置并返回它的方法，或者设置它然后返回它。所以你的mixin根本没有被考虑在内。如果需要，您必须自己处理初始化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-22T15:12:28.260

尽管 scala 不支持带有隐式参数的惰性 val，但您可以使用选项自己定义。因此，一个解决方案是替换：

```
lazy val list = initialize 
```

经过

```
private var _list: Option[List[Int]] = None
def list(implicit f: Bar) = 
  _list.getOrElse{
    _list = Some(initialize)
    _list.get
  } 
```

然后运行`Test.test`显示预期结果：

```
Case 1: with implicitp parameter from companion object
initialize called with Bar: 'some default bar' ...
initialize called with Bar: 'some default bar' ...
Case 2: with mixedin implicit parameter overriding the default one...
initialize called with Bar: 'mixed in implicit bar' ...
initialize called with Bar: 'mixed in implicit bar' ...
Case 3: with local implicit parameter overriding the default one...
initialize called with Bar: 'locally scoped implicit bar' ...
initialize called with Bar: 'locally scoped implicit bar' ... 
```

请注意，如果您有[mutable options](https://stackoverflow.com/questions/26475493/scala-mutable-option)，您可以只用两行替换您的 lazy val 以获得相同的结果。

```
private val _list: MutableOpt[List[Int]] = MutableOpt.from(None)
def list(implicit f: Bar) = _list.getOrSet(initialize) 
```

就个人而言，我希望有一天 Scala 能让我们用一行代码来写这个：

```
lazy val list(implicit f: Bar) = initialize 
```

这将是非常有意义的：任何时候你想访问变量列表的值，你都需要一个范围内的 Bar ，尽管只有第一次计算很重要。

# php - 检索 POST 数据返回 AJAX / jQuery

> ID：10162546
> 
> 赞同：-1
> 
> 时间：2012-04-15T13:41:10.593
> 
> 标签：php, jquery, ajax, json

`post.js`

```
$.post(
  "/scripts/update.php",
  {id: testId, age: testAge},
  function(data) {
    $(".testDiv").html(data.testId);
    $(".testDiv2").html(data.testAge);
  },
  "json"
); 
```

`update.php`

```
$userId = $_POST["id"];
$userAge = $_POST["age"];

// contact database and retrieve user Id and user name...

echo json_encode(array("testId"=>$userId, "testAge"=>$userAge)); 
```

我如果我把`, "json");`代码拿出来我可以传递信息`update.php`就好了，但是不能检索任何数据。添加 json 后，我无法检索或发送数据...

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T13:58:39.707

我认为 $.ajax 函数会更适合您的需求：

```
$.ajax({
    type: "POST",
    url: "/scripts/update.php",
    data: {id: testId, age: testAge},
    dataType: "json",
    success: function(data) {
        $(".testDiv").html(data['testId']);
        $(".testDiv2").html(data['testAge']);
    }
}); 
```

您的 PHP 脚本将保持不变。我提供代码是因为您几乎没有提供有关您收到的错误的信息。正如加缪已经说过的，请提供更多关于错误是什么的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T14:34:45.123

我会按照@gimg1 所说的去做，但是像这样：

```
var form_data = {
            testId: $("#testIdForm").val(),
            testAge: $("#testAgeForm").val()
        };
$.ajax({
    type: "POST",
    url: "/scripts/update.php",
    data: {id: testId, age: testAge},
    dataType: form_data,
    success: function(response) {
        if(response == 'success'){
            //do success function here
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T13:57:47.257

如果您正在访问`data.testId`，这意味着您正在访问您从 update.php 收到的响应（存储在您的示例中称为 data 的变量中），作为您的 jQuery post 调用的结果。通过将数据类型提及为`jSon`，您可以确保来自服务器的响应将转换为 JSON 格式。

如果您的 update.php 页面返回这样的 json

```
{ "id": "3","age":"53"} 
```

然后您可以访问单独的值，例如`data.id`和`data.age`。

如果您有从服务器页面返回的有效 json，则下面的代码应该可以工作，就像上面一样

```
$.post("/scripts/update.php", {  id: testId, age: testAge}, dataType:"json",function(data) {
   $(.testDiv).html(data.id);
}); 
```

# git - Git 提交和推送

> ID：10162551
> 
> 赞同：3
> 
> 时间：2012-04-15T13:41:41.327
> 
> 标签：git, github

我对 Git 很陌生，我想得到一些建议。

我从 github 分叉了一个项目 project/project.git，并且我的远程副本存储库为 myname/project.git。我的机器上也有这个 repo 的本地副本。我做了一些提交，将它们推送到我的远程仓库，但我的问题是作者如何知道我做了这些提交并将它们拉入原始项目仓库？是否有这样做的自动通知？我应该如何从命令行向他发送拉取请求？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T13:43:56.863

您将从 GitHub Web 界面本身而不是您的本地计算机向原始作者发送拉取请求。请参阅GitHub 上的
“[发送拉取请求”。](http://help.github.com/send-pull-requests/)

![插图](../Images/cfda5376ad372b6e490d0eb836c905f4.png)

请注意，您最好先从原始存储库中提取（以确保您在分叉后将所有内容都发布在所述原始存储库中），然后，如果一切正常（您的本地修改+原始存储库的演变），推到你的叉子并提出你的拉取请求。
有关更多信息，请参阅“ [github 中的 origin 和 upstream 有什么区别](https://stackoverflow.com/questions/9257533/what-is-the-difference-between-origin-and-upstream-in-github/9257901#9257901)”。

在这个过程中没有什么“自动”的：你只在你的拉取请求中选择你想要的提交（即你所有的新提交*不一定*是你的拉取请求的一部分）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T13:45:53.123

原作者的另一种可能是时不时地看看“Fork Queue”；但是，如果您想自己通知作者，请继续创建拉取请求。

见[https://github.com/blog/270-the-fork-queue](https://github.com/blog/270-the-fork-queue)

由原始仓库的作者完成的重要部分是：

> 需要明确一点——建议的工作流程是**使用该工具将补丁从分支拉入测试分支，并忽略那些尚未准备好或不适用的补丁**。
> **然后，您会想要获取该分支并在将代码合并或重新定位到您的主分支之前测试代码**。
> 
> 这使您可以执行电子邮件补丁样式的工作流程，而无需实际处理电子邮件补丁或每次有人提交内容时都必须将远程添加到本地存储库。

但是，没有与在这些分叉上进行的新提交相关的自动通知，这可能就是为什么`Fork + Pull Model`已经实施了。

# c++ - 将类插入数组会导致奇怪的访问错误

> ID：10162554
> 
> 赞同：0
> 
> 时间：2012-04-15T13:42:03.377
> 
> 标签：c++, xcode, exc-bad-access

我在标题中定义了一组 Tile 对象

```
Tile* tiles; 
```

然后，当我尝试在数组中引用的类上运行函数时，我收到一个错误代码，即 EXC_BAD_ACCESS。

```
Tile* tiles[100][100];

for (int x=0;x<40;x++){
    for(int y=0;y<40;y++){
        tiles[x][y] = new Tile("tile_grass.png");
        tiles[x][y]->setPositionWorld(WorldPos::posWithPosition(x, y)); // error comes when this is ran
        this->addChild(tiles[x][y]);

    }
} 
```

如果我使用普通指针而不是指针数组，它似乎工作正常，但我必须以某种方式存储坐标 x 和 y 保存特定的 Tile 对象。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T14:20:27.877

我尝试了下面的代码，它工作得很好。

`

```
int* test[100][100];
for(int i=0;i<40;i++)
{
    for(int j=0;j<40;j++)
    {
        test[i][j]=new int(1);
        cout<<*test[i][j];
    }
}` 
```

我认为问题出在您的构造函数或函数调用中。

# c# - 使用 C# 比较 XML 中的值

> ID：10162555
> 
> 赞同：0
> 
> 时间：2012-04-15T13:42:04.253
> 
> 标签：c#, linq-to-xml, nullreferenceexception

我试图让我的代码说“如果模块中没有组件 4，则不显示任何内容”。我正在从提供模块详细信息（名称、信用、评估等）的 XML 文件中读取值，并使用 LINQ 查询命令将这些值写出。

一切正常，但我遇到了关于我要设置的要求的问题。基本上，每个模块都有不同数量的评估，有些有 2,3 或 4。当我需要显示总共有 4 个评估的模块的详细信息时，代码运行良好，但是当有 2 或 3 个评估时，我得到此行的 nullreferenceexception：

```
var assessmentFour = from d in document.Descendants("moduleTitle")
                                 where d.Value == (String)comboBoxTab4Mod1.SelectedItem
                                 select d.Parent.Element("assessmentFour").Value; //exception thrown here 
```

我知道它为什么被抛出，因为我在组合框中选择的模块没有assessmentFour 值，所以我尝试使用以下方法解决它：

```
foreach (var item in assessmentFour)
        {
            if (assessmentFour != null)
            {
                labelTab4Mod1Cmpt4.Text = "";
            }
            else
            {
                labelTab4Mod1Cmpt4.Text = item.ToString();
            }
        } 
```

但它不起作用。我不知道如何避免空引用异常，如果有人可以为我指出，我将不胜感激。

如果需要理解，这里是 XML 文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<SoftwareEngineering>
  <Module>
    <moduleCode>ECSE401</moduleCode>
    <moduleTitle>Programming Methodology</moduleTitle>
    <credits>15</credits>
    <assessmentOne>Coursework</assessmentOne>
    <assessmentOneWeight>40</assessmentOneWeight>
    <assessmentTwo>Coursework</assessmentTwo>
    <assessmentTwoWeight>40</assessmentTwoWeight>
    <assessmentThree>Test</assessmentThree>
    <assessmentThreeWeight>20</assessmentThreeWeight>
  </Module>
  <Module>
    <moduleCode>ECSC404</moduleCode>
    <moduleTitle>Computer Systems Fundamentals</moduleTitle>
    <credits>15</credits>
    <assessmentOne>Test1</assessmentOne>
    <assessmentOneWeight>30</assessmentOneWeight>
    <assessmentTwo>Test2</assessmentTwo>
    <assessmentTwoWeight>30</assessmentTwoWeight>
    <assessmentThree>Test3</assessmentThree>
    <assessmentThreeWeight>40</assessmentThreeWeight>
  </Module>
  <Module>
    <moduleCode>EBSY401</moduleCode>
    <moduleTitle>Information and Data Modelling</moduleTitle>
    <credits>15</credits>
    <assessmentOne>Test</assessmentOne>
    <assessmentOneWeight>25</assessmentOneWeight>
    <assessmentTwo>Coursework1</assessmentTwo>
    <assessmentTwoWeight>10</assessmentTwoWeight>
    <assessmentThree>Coursework2</assessmentThree>
    <assessmentThreeWeight>35</assessmentThreeWeight>
    <assessmentFour>Coursework3</assessmentFour>
    <assessmentFourWeight>30</assessmentFourWeight> 
  </Module>
  <Module>
    <moduleCode>ECSC405</moduleCode>
    <moduleTitle>Software Development Principles</moduleTitle>
    <credits>15</credits>
    <assessmentOne>Test1</assessmentOne>
    <assessmentOneWeight>30</assessmentOneWeight>
    <assessmentTwo>Coursework</assessmentTwo>
    <assessmentTwoWeight>40</assessmentTwoWeight>
    <assessmentThree>Test2</assessmentThree>
    <assessmentThreeWeight>30</assessmentThreeWeight>
  </Module>
  <Module>
    <moduleCode>ECSC407</moduleCode>
    <moduleTitle>Web Technology</moduleTitle>
    <credits>15</credits>
    <assessmentOne>Tutorials</assessmentOne>
    <assessmentOneWeight>20</assessmentOneWeight>
    <assessmentTwo>Coursework</assessmentTwo>
    <assessmentTwoWeight>20</assessmentTwoWeight>
    <assessmentThree>Exam</assessmentThree>
    <assessmentThreeWeight>60</assessmentThreeWeight>
  </Module>
  <Module>
    <moduleCode>ECSC409</moduleCode>
    <moduleTitle>Software Engineering Principles</moduleTitle>
    <credits>15</credits>
    <assessmentOne>Coursework1</assessmentOne>
    <assessmentOneWeight>40</assessmentOneWeight>
    <assessmentTwo>Coursework2</assessmentTwo>
    <assessmentTwoWeight>30</assessmentTwoWeight>
    <assessmentThree>Coursework3</assessmentThree>
    <assessmentThreeWeight>30</assessmentThreeWeight>
  </Module>
  <Module>
    <moduleCode>ECSC408</moduleCode>
    <moduleTitle>Mathematics for Computing</moduleTitle>
    <credits>15</credits>
    <assessmentOne>Coursework</assessmentOne>
    <assessmentOneWeight>50</assessmentOneWeight>
    <assessmentTwo>Exam</assessmentTwo>
    <assessmentTwoWeight>50</assessmentTwoWeight>
  </Module>
  <Module>
    <moduleCode>EBSY400</moduleCode>
    <moduleTitle>Communication and Learning Skills</moduleTitle>
    <credits>15</credits>
    <assessmentOne>Coursework</assessmentOne>
    <assessmentOneWeight>30</assessmentOneWeight>
    <assessmentTwo>Coursework</assessmentTwo>
    <assessmentTwoWeight>70</assessmentTwoWeight>
  </Module>
</SoftwareEngineering> 
```

注意每个模块没有相同数量的评估，这就是我收到错误的原因。我知道我可以为每个模块添加一个assessmentFour 元素并这样做，但这真的很便宜。如果有人可以帮助我，我会很感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T13:55:27.140

你可以试试这个...

```
from d in document.Descendants("moduleTitle")
where d.Value == (String)comboBoxTab4Mod1.SelectedItem
select CheckNullElement(d.Parent.Element("assessmentFour")) 
```

然后在你的类中进一步定义这个函数

```
private string CheckNullElement(XElement x)
{
  if (x == null) return string.Empty;

  return x.Value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T14:55:46.237

这是另一种似乎对我有用的方法：

```
 var assessmentFour = from d in doc.Descendants("Module")
                             where (string)d.Element("moduleTitle") == (String)comboBoxTab4Mod1.SelectedItem
                                         let el = d.Elements("assessmentFour").FirstOrDefault()
                                         select (el == null ? String.Empty : (string)el); 
```

# c++ - 为什么 skb_transport_header 计算不正确？

> ID：10162556
> 
> 赞同：2
> 
> 时间：2012-04-15T13:42:22.373
> 
> 标签：c++, c, linux-kernel, netfilter

我用`netfilter hooks`.

似乎`skb_transport_header`函数计算不正确（有时但并非总是如此）：

```
struct tcphdr* tcp_header = NULL;
tcp_header = (struct tcphdr*)skb_transport_header(skb); // somtimes incorrect address.
tcp_header = (struct tcphdr*)((char*)ip_header + (ip_header->ihl * 4));// always correct address. 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-01T11:56:20.123

你可以在这里查看： [http](http://www.roman10.net/how-to-filter-network-packets-using-netfilterpart-2-implement-the-hook-function/) ://www.roman10.net/how-to-filter-network-packets-using-netfilterpart-2-implement-the-hook-function/ 问题是netfilter在网络层实现，当数据包从物理层上升时，您在数据包到达 tcp 层之前捕获数据包，某些功能未处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T13:07:48.097

内核版本是非常重要的信息。在Linux网络内核中，SKB的transport_header（和许多其他属性）在第一次创建时（由驱动程序）是没有设置的，SKB在移动SKB的数据指针的同时被逐层处理。因此，如果您的挂钩较低，也就是桥级别，则可能在您访问它时尚未设置。

# wordpress - 建议 joomla/wordpress

> ID：10162561
> 
> 赞同：-1
> 
> 时间：2012-04-15T13:43:09.177
> 
> 标签：wordpress, joomla

## 我有两种选择来学习 CMS 的新域

1.  Joomla
2.  WordPress

请建议我哪个更好且更容易学习，以便我做出相应的决定？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T13:46:09.080

Wordpress 更容易学习如何自定义。

但是，如果您想添加更多功能，例如网上商店，Joomla 会更强大。

# c# - Web 服务实例化对象 C#.NET

> ID：10162564
> 
> 赞同：4
> 
> 时间：2012-04-15T13:43:34.217
> 
> 标签：c#, web-services, constructor, instance

我对 Web 服务、C# 和 .NET 还是很陌生。我想在我的 web 方法中使用一个连接对象，以便在数据库中写入数据，但是我没有在哪里实例化这个对象，实例化它然后在 web 方法中销毁它是非常荒谬的。我希望我的连接实例每次都可以访问，所以是否有一种构造函数或其他东西可以正确地做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T13:53:00.537

您将需要在您的 web 方法中实例化数据库连接类。我认为在你的网络方法中实例化这样一个对象没有什么可笑的：

*   C# 是一种`object-orientated`语言。如果不创建对象，您将不会取得太多成就；和
*   大多数 ADO.NET 连接对象（包括 SQL Server 和 Oracle）都实现了连接池，因此您不会在每次创建新连接对象时都创建到服务器的物理连接。相反，数据库库将为您管理一个连接池。

我会推荐这样的东西，以确保您在 web 服务调用后释放连接：

```
// This example uses SQL-Server connections, but most
// ADO.NET database drivers are similar.
using(SqlConnection conn = new SqlConnection(MyConnStr)) 
{
   UseConnection(conn);
} 
// connection released to pool here automatically. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T14:07:30.340

我知道你的意思：你不想在每个方法中重复连接管理代码。确实，那将是荒谬的。

我这样做：我使用[这种技术](http://blog.caraulean.com/2008/02/13/httpcontext-idiom-for-windows-communication-foundation/)来创建每个请求的连接。当 WCF 调用结束时，我会破坏连接。

因此，在通话期间，我可以依靠此连接。它将被正确清理。

不幸的是，WCF 没有内置的 HttpContext.Items 等效项，因此我们必须使用扩展来破解它。

# php - 如何在 MySQL 中执行多个计算？

> ID：10162568
> 
> 赞同：0
> 
> 时间：2012-04-15T13:45:04.740
> 
> 标签：php, mysql, function, sum

鉴于这些数据，我想求和 (tbl_basket subt)，乘以折扣，加上运费。

```
# tbl_basket  order_id  qty    price     subt
                     1    1    10.00    10.00
                     1    4     5.00    20.00
                     1    3    12.00    36.00

# tbl_coupon        id          name discount
                     1     "10% off"    10.00

# tbl_shipping      id                   cost
                     1                   4.99

# tbl_order  coupon_id   shipping_id    total  
                     1             1        ?  # I want to update total 
```

我想查询篮子：

```
SELECT * FROM tbl_basket WHERE order_id = $order_id 
```

总结项目，我是这样想的？

```
SELECT SUM(subt) FROM tbl_basket WHERE order_id = $order_id 
```

查询折扣

```
SELECT discount FROM tbl_coupon AS coupon
          INNER JOIN tbl_order AS order
               WHERE coupon.id = order.coupon_id 
```

问）如何将此查询合并到 MySQL 中的另一个查询中？

Q) 折扣后的值如何设置（新的总计=总计*（100-折扣）/100）

我觉得通过直接汇总数据库中的总数会使系统更加健壮，这就是我想这样做的原因。

问）有没有更好的方法来做到这一点？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T14:09:45.997

我同意 evan - 在 PHP 中进行计算要好得多。如果没有别的，你可以更好地看到你在做什么！

但是如果你真的想看看它在 SQL 中的样子，你可以尝试这样的事情：

```
SELECT ((select total price query)*(select discount query) + (select shipping query)) 
```

当然，使用子查询，您可能会将所有内容都放入单个查询语句中。但是，添加的越多，调试就越困难。在 PHP 中，组装这些部件要容易得多。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T14:27:08.570

我也倾向于同意其他人的观点，他们说您应该坚持在 PHP 中执行此操作，尽管开销差别不大。只要所有必要的索引都到位，您就可以使用以下查询以最小的开销计算最终总数。

```
SELECT (SUM(b.subt) * ((100 - MIN(c.discount)) / 100)) + MIN(s.cost) AS final_total
FROM tbl_order o
INNER JOIN tbl_basket b
    ON o.id = b.order_id
INNER JOIN tbl_shipping s
    ON s.id = o.shipping_id
INNER JOIN tbl_coupon c
    ON c.id = o.coupon_id
WHERE o.id = 1
GROUP BY o.id; 
```

# c#-4.0 - 如何根据数据库中的值显示选中的复选框？

> ID：10162571
> 
> 赞同：0
> 
> 时间：2012-04-15T13:45:36.310
> 
> 标签：c#-4.0, c#-3.0

我是 C# 新手，你能帮我解决我的问题吗？我正在尝试显示根据其在数据库中的值选中的复选框。

我有两个复选框

1.  全额付款
2.  电磁干扰

当我从数据库中检索数据时，它应该自动选中复选框。

如果是全额付款，则应检查全额付款复选框，如果是 EMI，则应检查 emi 复选框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T14:42:06.180

取决于是否必须选中其中一个您添加一个布尔列，在 Sql Server 中输入位类型，将其称为 FullPayment 那么您将 FullPayment 复选框设置为该复选框，并将 EMI 复选框设置为！FullPayment

如果在新记录上说既不检查用户必须选择一个），那么您仍然可以使用 FullPayment 布尔值并在数据库中使用它为空来不设置。

如果两者都可以是两个布尔值或我首选的解决方案，但方案 1 使用整数说 PaymentState

```
0 = neither set
1 = Full Payment
2 = EMI
3 = Both 
```

然后`FullPaymentCheckbox.Checked = (PaymentState & 1) > 0;` 和`EMICheckbox.Checked = (PaymentState & 2) > 0;`

# android - SQLite 数据库

> ID：10162573
> 
> 赞同：-3
> 
> 时间：2012-04-15T13:45:49.100
> 
> 标签：android, sqlite

我不知道目前什么对我最好。如果用户在字段框中输入他们的邮政编码，我想在我的应用程序中加入一部分。一旦输入，数据将呼叫他们附近的公司。

所以我不知道从哪里开始，因为我一直在阅读 android 中的数据库。有人说 SQLite 不好。如果你能帮助我并告诉我什么是最好的使用。

感谢人们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T13:51:29.377

使用网络服务而不是 SQlite 。

使用 json 或 xml Web 服务访问 MySQL 或任何其他数据库。

为此，您必须使用 php、ruby on rails、.NET 或任何其他服务器端编程语言来制作 web 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T14:33:12.910

当数据类型是静态的时，在您的设备上使用本地 SQLite 是一个不错的选择，这意味着它不会发生很大变化或扩展。您不会产生太多的网络流量。但是考虑到您必须从服务器下载一次数据，处理服务器上所做的更改等。因此，如果您的数据更改很多，查询服务器数据库可能会更好。

# jquery - 如何在 phonegap/jquery 移动 iOS 应用程序中运行加载功能

> ID：10162576
> 
> 赞同：0
> 
> 时间：2012-04-15T13:46:15.023
> 
> 标签：jquery, ios, jquery-mobile, cordova

在我实现 jquery mobile 之前，我有以下代码可以正常工作。现在，我没有收到任何测试警报，所以它让我认为它没有执行 onbodyload 函数。我怎样才能让它工作？

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />

    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <link rel="stylesheet" href="style.css" type="text/css" />      

    <!-- iPad/iPhone specific css below, add after your main css >
    <link rel="stylesheet" media="only screen and (max-device-width: 1024px)" href="ipad.css" type="text/css" />        
    <link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="iphone.css" type="text/css" />       
    -->
    <!-- If your application is targeting iOS BEFORE 4.0 you MUST put json2.js from http://www.JSON.org/json2.js into your www directory and include it here -->
    <script type="text/javascript" charset="utf-8" src="cordova-1.5.0.js"></script>
    <script type="text/javascript" charset="utf-8" src="functions.js"></script>

    <script type="text/javascript" charset="utf-8" src="articles.js"></script>
    <link rel="stylesheet" type="text/css" href="jquery/jquery.mobile-1.1.0.min.css" />

         <script type="text/javascript" src="jquery/jquery-1.7.1.min.js"></script> 

         <!-- <script type="text/javascript" src="main.js"></script> -->

         <script type="text/javascript" src="jquery/jquery.mobile-1.1.0.js"></script>

    <script type="text/javascript" charset="utf-8">

    function onBodyLoad()
    {       
        document.addEventListener("deviceready",onDeviceReady,false);
        alert('body');
    }

    /* When this function is called, PhoneGap has been initialized and is ready to roll */
    /* If you are supporting your own protocol, the var invokeString will contain any arguments to the app launch.
    see http://iosdevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html
    for more details -jm */
    function onDeviceReady()
    {
    alert('device');

        // do your thing!
        parms = getUrlVars();
        type = parms['type'];
        page = parms['page'];
        if(page=='') {
         page = 0;
        }
        filter_value = parms['filter_val'];

        vars = articles_get_info(type,page,filter_value);

        document.getElementById('pagetitle').innerHTML = vars['title'];
        document.getElementById('pagecontent').innerHTML = vars['page'];

    }

    </script>
  </head>
  <body onload="alert('hello');onBodyLoad()">
  <div data-role="page">
  <div data-role="header" id="header"><a href="index.html" style="float:right;" class="btn">Back</a>
      <h1 id="pagetitle"></h1>
      </div>
      <div data-role="content" id="pagecontent">

      </div>
      </div>
  </body>
</html> 
```

我尝试用以下内容替换 onbodyload() 并删除 onload="" ，但它仍然不起作用：

```
window.addEventListener('load', function () {
    document.addEventListener('deviceready', onDeviceReady, false);
}, false); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T16:18:38.297

根据[PhoneGap 文档](http://wiki.phonegap.com/w/page/36868306/UI%20Development%20using%20jQueryMobile)，您可以这样做：

```
$( function() {
     document.addEventListener("deviceready", onDeviceReady, false);
}); 
```

函数 onDeviceReady () { ... }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T14:23:09.670

在加载文档时使用 jQuery 简写符号：

```
$(function(){
    //The document is loaded. Put your code here
}); 
```

# linux - Wordpress 在更新中使用“www-data”作为用户 - 我如何将其更改为另一个用户？

> ID：10162578
> 
> 赞同：1
> 
> 时间：2012-04-15T13:46:28.300
> 
> 标签：linux, apache, wordpress, ubuntu, amazon-ec2

我在 Amazon EC2 Ubuntu 实例上安装了 Wordpress 3.2.1。我的 Wordpress 安装在

/var/www/blog/

除了我在权限等方面遇到的许多问题之外，让我感到难过的一件事是，在尝试进行插件更新时，我会看到一个窗口询问 FTP 凭据。这被使用覆盖

```
if(is_admin()) {
    add_filter('filesystem_method', create_function('$a', 'return "direct";' ));
    define( 'FS_CHMOD_DIR', 0751 );
} 
```

在 wp-config.php 的末尾。

但是，尽管这允许完整的插件更新 - 没有 FTP 凭据 - 我在 CLI 上注意到，而不是我的普通用户`ubuntu`拥有更新插件的文件/文件夹，现在它是`www-data`（Apache 的守护进程）。

这是有问题的，因为我从未以`www-data`（也不想）登录，然后无法对更新的插件进行任何更改。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T15:58:50.630

您可以安装核心控制插件，这将帮助您很多并节省您的时间。

在这里可以下载核心控制插件：

[http://wordpress.org/extend/plugins/core-control/](http://wordpress.org/extend/plugins/core-control/)

希望这会有所帮助。

# android - 使用 Python 编写使用 GPS 数据的 Android 应用程序

> ID：10162579
> 
> 赞同：0
> 
> 时间：2012-04-15T13:46:34.560
> 
> 标签：android, python, gps, sl4a, kivy

我想使用 Python 编写一个 Android 应用程序。我为此找到了 2 个选项：[kivy](http://kivy.org/#home)和[SL4A](https://code.google.com/p/android-scripting/)。在 kivy 中，至少目前，我无法使用 GPS 数据。任何人都知道我是否可以使用带有 Python 的 SL4A 获取 GPS 数据？据我了解，可以使用 kivy 编写商业应用程序。另一方面，对于 SL4A，您必须首先在您的 Android 设备上安装 SL4A 和 python，所以我不确定它是否适合商业应用程序。最后一个，我可以在 python中使用[funf吗？](http://funf.media.mit.edu/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:36:00.700

您可以将[SL4A](http://code.google.com/p/android-scripting/)应用程序打包为 APK，并通过 Play 商店进行分发。在这方面，它就像 kivy 一样松散。

至于质量，这真的取决于。Java 应用程序是高效使用电池等的最佳方法，再加上 SL4A 中的 GUI 总是非常简单或非本地 web 视图，因此复杂的 GUI 看起来对应用程序来说是独一无二的，尽管使用[jQuery Mobile](http://jquerymobile.com/)之类的东西可以帮助你减少一半很快就体面了。

归根结底，你没有理由不能用 Python 做一个商业上成功的 Android 应用程序。只是亲Android的开发者通常不会尝试。

我使用了 SL4A 和 kivy，但倾向于使用 SL4A。其他人倾向于使用kivy。您必须真正考虑每个应用程序的需求，或者只使用 Java。

**更新**：*您现在可以使用* *SL4A 渲染本机用户界面，但它是实验性的，我还没有使用它来说明它的工作情况。*[`FullScreenUI`](http://code.google.com/p/android-scripting/wiki/FullScreenUI)

# c++ - 相互依赖的类声明

> ID：10162580
> 
> 赞同：2
> 
> 时间：2012-04-15T13:46:37.520
> 
> 标签：c++, compiler-errors

我试图弄清楚这个编译错误是什么意思，我希望我能很好地解释这一点。

```
In file included from sys/charon.cpp:4:0: 
```

接下来将我带到上面的那个 ^ 文件，并用黄色下划线：

```
#include "../headers/charon.h" 
```

以及类型标识符“charon_”，它是在头文件 charon.h 中定义的一个类，也用黄色下划线可能是一个不同的错误。

```
sys/../headers/charon.h:17:9: error: redefinition of ‘class charon::charon_’
sys/../headers/chio.h:86:9: error: previous definition of ‘class charon::charon_’
sys/charon.cpp:12:20: error: definition of implicitly-declared ‘charon::charon_::charon_()’ 
```

但是我希望它们都与第一个错误有关，我认为这与我正在尝试做的事情有关。

```
//File 1.h
/**********/
class I
{
private:
B* my_private_b;

public:
I(B& handle);
} 
```

不幸的是，我需要在“文件 1”开始定义“I”之前声明“B”。但同时，我需要为 B 定义 I。所以我不知道如何在另一个之前定义两者。我我猜我需要一个更高级的解决方案，但我不知道。

```
//File 2.h
/***********/
class B
{
private:
I i;
O o;

public:
B();
} 
```

因此，如果我能找到答案，那么也许我可以自己检查下一部分。如果您认为最好检查一下我是否朝着正确的方向前进，我将在下面粘贴所有有问题的代码。

# .#.#.#.#.#.#.#.#.#.#.#.#.#.#.#.#.#.#.#.#.#.#.#.#.# .#.

时间不够长，没读吗？这里是所有四个文件中代码的所有行，除了注释。按照感知的重要性排序。

```
//////////////////////////////////////
/////
/////////////
/////
/////
/////
//File: chio.h

#ifndef CHIO_H
#define CHIO_H
#include <deque>
#include <queue>
#include <iostream>

using namespace std;

namespace charon
{
  class charon_
  {

  };
}
namespace chio
{ 
  class chout_
  {
  private:

  public:
    chout_();
    ~chout_();
  };

  class chin_
  {
  private:
    charon::charon_* engine;

  public:
    chin_(charon::charon_& handle);
    chin_();
    ~chin_();
  };
}

#endif  /* CHIO_H */

//////////////////////////////////////
/////
/////////////
/////
/////
/////
//File: charon.h/* 
//
 * File:   charon.h
 * Author: josh
 *
 * Created on 11 April 2012, 22:26
 */

#ifndef CHARON_H
#define CHARON_H
//#include "boost/thread.hpp"
#include "chio.h"

using namespace std;
using namespace chio;
namespace charon
{
  class charon_ {
  private:
    chout_ engine_output;
    chin_ engine_input;
    //boost::thread input_thread;
    //boost::thread output_thread;
    void start_threads();
    void stop_threads();

  public:
    charon_();
    charon_(charon_ &orig);
    ~charon_();
    void run();
  };
}

#endif  /* CHARON_H */ 
```

这些是构造函数/cpp 文件。

```
charon.cpp
#include <iostream>
//#include <boost/thread.hpp>
//#include <boost/date_time.hpp>
#include "../headers/charon.h"

using namespace std;
using namespace charon;
using namespace chio;

namespace charon
{
  charon_::charon_(){
    engine_input = chio::chin_((charon_*)this);
  }
};

//^^charon.cpp^^
---------
//chin.cpp

#include <iostream>
#include <borland/conio.h>
#include <ncurses.h>
#include <deque>
#include "../headers/charon.h"

using namespace std;
using namespace charon;
using namespace chio;
namespace chio
{
  chin_::chin_(charon::charon_& handle) {
    engine = handle;
  }
  chin_::~chin_() {
  }
} 
```

对于结局，我个人讨厌阅读，所以我一直在推迟向任何人询问所有这些。所以如果你已经走到这一步，你可能也想要这个。

```
"/usr/bin/gmake" -f nbproject/Makefile-Debug.mk QMAKE= SUBPROJECTS= .build-conf
gmake[1]: Entering directory `/home/josh/Projects/Maze/Charon'
"/usr/bin/gmake"  -f nbproject/Makefile-Debug.mk dist/Debug/GNU-Linux-x86/charon
gmake[2]: Entering directory `/home/josh/Projects/Maze/Charon'
mkdir -p build/Debug/GNU-Linux-x86/sys
rm -f build/Debug/GNU-Linux-x86/sys/charon.o.d
g++    -c -g -MMD -MP -MF build/Debug/GNU-Linux-x86/sys/charon.o.d -o build/Debug/GNU-Linux-x86/sys/charon.o sys/charon.cpp
In file included from sys/charon.cpp:4:0:
sys/../headers/charon.h:17:9: error: redefinition of ‘class charon::charon_’
sys/../headers/chio.h:86:9: error: previous definition of ‘class charon::charon_’
sys/charon.cpp:12:20: error: definition of implicitly-declared ‘charon::charon_::charon_()’
gmake[2]: *** [build/Debug/GNU-Linux-x86/sys/charon.o] Error 1
gmake[2]: Leaving directory `/home/josh/Projects/Maze/Charon'
gmake[1]: *** [.build-conf] Error 2
gmake[1]: Leaving directory `/home/josh/Projects/Maze/Charon'
gmake: *** [.build-impl] Error 2 
```

我很高兴能回答我的简单版本。我已经没有解决编译错误的想法了，我翻阅了我巨大的 C++ 参考，验证了我能想到的一切。所有的语法看起来都是正确的，我认为只是我还没有专门学习如何操纵编译器来做这样的事情。

我不知道，我现在可能只是在闲逛。至少在过去的 3 天里，这让我很沮丧。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T13:51:30.637

似乎`File1.h`在前向声明中`B`就足够了，而不是包含它，因为您只使用引用和指向`B`. 添加：

```
class B; // << Forward declaration of B

class I
{
private:
B* my_private_b;

public:
I(B& handle);
} 
```

在。。。之初`File1.h`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T14:14:55.953

一个问题是这不是一个声明，而是一个定义：

```
namespace charon
{
  class charon_
  {

  };
} 
```

您不仅说这`charon_`是 namespace 中的类`charon`，还说它是空的。然后，您以后就不能再添加班级成员了。

更好的方法是

```
namespace charon
{ class charon_; } 
```

它只是告诉编译器该类存在，但忽略了细节。

# javascript - 是否有更短的方法来检查是否允许所有视频格式？

> ID：10162582
> 
> 赞同：0
> 
> 时间：2012-04-15T13:46:45.367
> 
> 标签：javascript, jquery, case

在我的案例陈述中，它会检查某些视频格式的文件扩展名，但我想知道的是，除了创建一个巨大的列表以仅允许以下这些视频格式之外，是否有一种简短的编码方法来仅允许所有视频格式？

以下是演员表：

```
function videoValidation(videouploadform) {

    var val = $(videouploadform).find(".fileVideo").val();
    switch(val.substring(val.lastIndexOf('.') + 1).toLowerCase()){
        case 'mpg':
        case 'mov': 
        case 'wmv':
        case 'rm':
        case '3g2':
        case '3gp':
             return true;

        case '':
            $(videouploadform).find(".fileVideo").val();
            alert("To upload an video, please select an Video File");
            return false;

        default:
            alert("To upload an video, please select a valild file extension.");
            return false;

    }

    return false;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T13:54:47.920

您可以通过检查文件的 mimetype 来实现这一点，几乎每种视频格式 mimetype 都以 video/ 开头，例如在 mp4 视频 (video/mp4) 的情况下

您可以通过以下方式检查文件的 MIME 类型

```
var mimetype = document.getElementById('file').files[0].type;
var reg = /video/;
if (reg.test(mimetype) {
    // valid video format
} else {
    // not valid video format
} 
```

# jquery - 安全问题：当使用带有 json 的 jQuery 从服务请求时

> ID：10162583
> 
> 赞同：1
> 
> 时间：2012-04-15T13:46:49.547
> 
> 标签：jquery, json

如果您正在使用如下所示的 jQuery 调用服务，在这种情况下，您的服务调用将显示给用户，允许他使用 fiddler 或任何自定义 Web 应用程序调用此类服务

```
$.ajax({
   url: SERVICE_URL?Q1=eee&Q2=sss,
   dataType: "application/json",
   data: {...},
   ......
}) 
```

gmail、facebook 或 twitter 采用了什么技术来解决这个问题，因为我发现脚本中没有这种类型的调用。

我发现他们正在使用 oAuth 身份验证提供程序来生成访问令牌，以便在他们每次需要从 jQuery 访问任何内容时传递...

请任何人帮助我们检查不显示服务网址甚至对其进行编码的最佳做法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T15:10:55.747

尝试将您的数据类型更改为“jsonp”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-07T10:33:43.850

我认为如果我们应用以下内容会更好，但仍然不确定它是否足以保护您的服务。

*   所有后端服务都应该打包在 API 中。
*   在系统组件的任何存储中使用共享会话（如 memcache 或 redis，后者最好保持持久性，以防记住我功能（如果存在）），防止在未经身份验证或授权的情况下调用您的服务
*   通过使用每秒最大命中数来管理您的服务以防止命中...（如果您使用的是 redis，则可以应用此技术）

提示：这里详细描述了 Redis 持久性[http://redis.io/topics/persistence](http://redis.io/topics/persistence)

**更新：**例如，AWS 现在正在通过 API 网关和 Amazon Cognito 实现这一点，这就是所谓的无服务器应用程序 :)

# javascript - 本机 JavaScript 函数是否类似于“超全局”？

> ID：10162585
> 
> 赞同：1
> 
> 时间：2012-04-15T13:47:07.003
> 
> 标签：javascript, types, constructor, scope, native

原生 JavaScript 构造函数/函数（如`Function`, `Object`, ）`Array`是否始终在任何范围内可用？它们是由全局对象继承还是在同一级别甚至更高级别？

例如，MooTools 在其自执行函数中包含以下行：

```
var Function = this.Function; 
```

所以我问自己，有没有什么情况会导致这些原生构造函数不可用？也许在服务器端或严格的 JS？还是缓存本地引用只是一个性能问题？但如果是这样，为什么不这样做：

```
var Function = Function; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T13:52:00.150

它们具有相同的名称，因此您不能这样做。

```
(function() {
    var Function = Function;

    return Function;
})(); // undefined 
```

至于为什么首先完成它？据说是为了防止用户错误或重新定义，并减少引擎必须查找的范围链的数量。相关博文：[http ://blog.minite.ch/?p=47](http://blog.minite.ch/?p=47)

当然，`Function`它不是只读的，所以即使有人`Function`在全局命名空间中重新定义了也无济于事。任何这样做的人都应该得到它，尽管=）

* * *

编辑：如果他们确实想防止用户错误，一个万无一失的方法是：

```
var Function = (function() {}).constructor; 
```

但这毫无意义，如上所述。

# objective-c - 父类中的方法/属性从子类返回对象

> ID：10162586
> 
> 赞同：0
> 
> 时间：2012-04-15T13:47:18.723
> 
> 标签：objective-c, oop

这很可能是一个愚蠢的问题，但无论如何。在目标 c 中，在子类的启动方法中，通常设置 self=[super init]。现在， self 属于子类，不需要转换，这意味着（或不......）父类的 init 方法以某种方式返回一个实际上属于子类的对象。

所以我的问题是：我可以在父类中定义其他方法或属性，当从子类调用时返回子类的对象？我认为Java中有类似的东西称为工厂方法，所以也许这个问题并不太离谱..

**编辑 1.**让我更好地解释我的意思：我知道我可以在 ParentClass 方法中找到，我实际上是在对 ChildClass 类的对象进行操作。这是通过查看[self class]。但是，我想在 ParentClass 中声明一个从子类*返回*对象的方法，而无需事先知道子类将是哪个类。更好的是，我希望返回的对象甚至不需要正式的转换。

例如，我想要父类中的一个方法，它执行以下操作：

```
-(ChildClass *) partialCopyOfSelf {
//returns an object which is a partial copy of self (only copying properties that also
// exist in parent class, but such that applying [result class] will yield the child class
// and will require no further conversion

(ChildClass *) copy=[[ChildClass alloc] init];
//now copy stuff
return copy;
} 
```

现在在子类中，我希望能够实现以下类型的东西：

```
-(MyClass *) copyOfSelf {
MyClass *copy=[super partialCopyOfSelf];
// now copy properties that only exist in my child class
return copy;
} 
```

**编辑 2（来自我写给@wbyoung 的评论）。**我想要这个的原因是，在某些时候我可能想将父类的属性从 ivars 更改为可能只是计算一些值，例如，所以孩子不知道如何正确复制它们。我写这篇文章是因为有人可能对如何完成相同的任务有更好的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T14:24:24.577

该`init`方法实际上只是使用已经创建的子类的对象。这是对它的调用`alloc`。那是使用您向其发送消息的类来确定如何分配对象。

话虽如此，您可以覆盖子类中的方法。消息总是发送到对象和方法查找从最顶层的类开始。

你也可以做一些事情，比如`[self class]`在父类中找出你的类型。不过，这只会让你到目前为止。`[[self class] displayColor]`将允许您执行诸如在基类中实现方法和默认类方法实现之类的操作，但根据需要覆盖子类中的类方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T14:28:25.033

> 这很可能是一个愚蠢的问题，但无论如何。在目标 c 中，在子类的启动方法中，通常设置 self=[super init]。现在， self 属于子类，不需要转换，这意味着（或不......）父类的 init 方法以某种方式返回一个实际上属于子类的对象。

嗯，不完全是。`-init`默认返回`id`几乎任何对象。它告诉编译器它是一个对象并让它假设你知道你在做什么，所以你不需要强制转换它。

* * *

> 所以我的问题是：我可以在父类中定义其他方法或属性，当从子类调用时返回子类的对象？我认为Java中有类似的东西称为工厂方法，所以也许这个问题并不太离谱..

当您`self`在超类的实现中返回时，您将返回与调用该方法的对象相同的对象。所以答案是肯定的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T14:22:34.307

是的 。Obj-C 遵守大多数 OO 语言中的所有子类化规则。

例如..

```
@interface Foo : NSObject

@property (readonly) BOOL thing1;
@property (readonly) CGFloat width;

@end

@implementation Foo

-(BOOL)thing1
{
 return YES;
}

-(CGFloat)width
{
 return 30.0f;
}

@end 
```

的接口`Bar`不需要 or 的声明或`thing1`实现`width`。

```
@interface Bar : Foo

@end

@implementation Bar

-(BOOL)thing1
{
if(test) return YES; 
else return NO;
}

-(CGFloat)width
{
 return [super width] + 20.0f;
}

@end 
```

但是，您可以实现`thing1`和/或`width`在子类中提供不同的值。

父类的实例总是返回`YES`属性`thing1`，而其子类 Bar 可以根据测试结果返回 YES 或 NO（例如）。

另一个属性`width`使用父类值并更改它。

# java - Java 语言空指针异常错误

> ID：10162589
> 
> 赞同：0
> 
> 时间：2012-04-15T13:47:31.580
> 
> 标签：java, nullpointerexception

我分别在 Main 和 getRank() 的第 23 行和第 78 行收到空指针异常错误。这发生在我重新组织代码并创建方法 getRank() 时。此代码在我将代码移动到 getRank() 方法之前编译并运行，我相信此错误是由于变量未正确初始化造成的。

```
import java.io.*;
import java.util.*;

public class NameRecord
{
    private static String num, name = "dav";
    private static String [] fields;
    private static int [] yearRank;
    private static boolean match;
    private static int getInts, marker, year, max;

        public static void main( String[] args)
        {
            java.io.File file = new java.io.File("namesdata.txt");
            try
            {
                Scanner input = new Scanner(file);
                while (input.hasNext())
                {
                    String num = input.nextLine();
                    if(match = num.toLowerCase().contains(name.toLowerCase()))
                    {
                        getRank();//My Problem I believe
                        getBestYear(marker);
                        System.out.printf("%s     %d     %d\n",fields[0],year,max);
                    }
                }
            }
            catch(FileNotFoundException e)
            {
                System.err.format("File does not exist\n");
            }
        }

    public static int getRank()
    {
        fields = num.split(" ");
        max = 0;
        for (int i = 1; i<12; i++)
        {   
            getInts = Integer.parseInt(fields[i]);
            if(getInts>max)
            {
                max = getInts;
                marker = i;
            }
        }
        return max;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T13:49:37.423

全局 num 未初始化，因此等于 null。在 mailn() 中，您创建了一个不暴露给 getRank() 的新局部变量。如果要使用它，请将其作为参数传递 getRank(num)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T13:51:36.363

您的问题在于`num`，您在 main 中声明了一个局部变量，该变量隐藏了您的实例成员：

```
String num = input.nextLine(); 
```

你可能的意思是：

```
num = input.nextLine(); 
```

# c# - 盲文印刷

> ID：10162591
> 
> 赞同：0
> 
> 时间：2012-04-15T13:47:43.527
> 
> 标签：c#, printing, printers, braille

有人有打印盲文脚本的经验吗？我正在制作盲文编辑器，目前我被此功能所困扰。我一直在尝试通过 PrintDialog 和 DocumentPaginator，但没有运气。打印机里全是胡说八道。有没有人做过这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T19:46:59.427

普通打印机不可能工作。普通打印机将墨水或碳粉放在纸上。他们没有压花纸的能力，这正是您所需要的。然而，盲文打印机确实存在。 [例如](http://www.viewplus.com/products/braille-printers/)

# android - 启动其他活动后更改布局的背景颜色

> ID：10162601
> 
> 赞同：0
> 
> 时间：2012-04-15T13:49:41.573
> 
> 标签：android, android-layout

我是 Android 新手，我无法正确执行此操作。

我有一个布局，它有一个 setOnTouchListener，

```
 arg0.setBackgroundColor(Color.parseColor("#4096EE"));
 Intent i = new Intent(getApplicationContext(), AddWebsiteActivity.class);
 NewsRecoveryActivity.this.startActivity(i); 
```

但是我想在我开始其他活动后恢复我的布局的背景，因为如果我回去，就像我正在触摸我的布局......我该怎么做？

先感谢您

编辑：选择器结果：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/add_website_layout"
    android:padding="8dp"
    android:background="@drawable/selector_add_website"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
 > 
```

当我删除背景线时，它正在工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T22:04:07.093

谢谢Agarwal帮助我，解决方案：

在视图中添加

```
android:background="@drawable/selector_add_website" 
```

可绘制文件夹中的 selector_add_website

```
<selector
 android:id="@+id/selector_add_website"
 xmlns:android="http://schemas.android.com/apk/res/android">
<!-- Non focused states -->
<item
    android:state_focused="false"
    android:state_selected="false"
    android:state_pressed="false"
    android:drawable="@color/black" />
<!-- Pressed -->
<item
    android:state_pressed="true"
    android:drawable="@color/bluefocused" />
</selector> 
```

值文件夹中的 color.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
 <color name="black">#ff000000</color> 
 <color name="bluefocused">#4096EE</color>
</resources> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T13:52:38.983

您可以使用选择器并设置该选择器。使触摸时颜色自动变化并恢复。

```
<selector
    android:id="@+id/myselector"
    xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- Non focused states -->
    <item
        android:state_focused="false"
        android:state_selected="false"
        android:state_pressed="false"
        android:drawable="#FF0000" />
    <item
        android:state_focused="false"
        android:state_selected="true"
        android:state_pressed="false"
        android:drawable="#FF0000" />

    <!-- Focused states -->
    <item
        android:state_focused="true"
        android:state_selected="false"
        android:state_pressed="false"
        android:drawable="#FF0000" />
    <item
        android:state_focused="true"
        android:state_selected="true"
        android:state_pressed="false"
        android:drawable="#FF0000" />

    <!-- Pressed -->
    <item
        android:state_pressed="true"
        android:drawable="#FF0000" />
</selector> 
```

可以根据需要改变颜色。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" 
        android:drawable="@color/blue" />
    <item android:state_selected="true" 
        android:drawable="@color/red" />
</selector> 
```

使用上面的选择器

# c# - 输入字符串的格式不正确

> ID：10162603
> 
> 赞同：8
> 
> 时间：2012-04-15T13:50:00.777
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我需要一些帮助来解决标题中显示的错误，我的代码如下所示。错误出现在这一行：

```
@Html.EditorForModel() 
```

代码：

```
@model Assignment2.Models.Order

@{
    ViewBag.Title = "Address And Payment";
} 

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm())
{

    <h2>Address And Payment</h2>
    <fieldset>
        <legend>Shipping Information</legend>

        @Html.EditorForModel()
    </fieldset> 
    <fieldset>
        <legend>Payment</legend>
        <p>We're running a promotion: all tickets free with the promo code: "FREE"</p>

        <div class="editor-label">
            @Html.Label("Promo Code")
        </div>
        <div class="editor-field">
            @Html.TextBox("PromoCode")
        </div>
    </fieldset>

<input type="submit" value="Submit Order" />
} 
```

控制器：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using Assignment2.Models;

namespace Assignment2.Controllers
{
    [Authorize]
    public class CheckoutController : Controller
    {
        TicketBookingEntities storeDB = new TicketBookingEntities();
        const string PromoCode = "FREE";

        //
        // GET: /Checkout/AddressAndPayment

        public ActionResult AddressAndPayment()
        {
            return View();
        }

        //
        // POST: /Checkout/AddressAndPayment
        [HttpPost]
        public ActionResult AddressAndPayment(FormCollection values)
        {
            var order = new Order();
            TryUpdateModel(order);

            try
            {
                if (string.Equals(values["PromoCode"], PromoCode,
                    StringComparison.OrdinalIgnoreCase) == false)
                {
                    return View(order);
                }

                else
                {
                    order.Username = User.Identity.Name;
                    order.OrderDate = DateTime.Now;

                    //Save Order
                    storeDB.Orders.Add(order);
                    storeDB.SaveChanges();

                    //Process the order
                    var cart = ShoppingCart.GetCart(this.HttpContext);
                    cart.CreateOrder(order);

                    return RedirectToAction("Complete",
                        new { id = order.OrderId });
                }
            }

            catch
            {
                //Invalid - redisplay with errors
                return View(order);

            }
        }

        //
        // GET: /Checkout/Complete
        public ActionResult Complete(int id)
        {
            // Validate customer owns this order
            bool isValid = storeDB.Orders.Any(
                o => o.OrderId == id &&
                o.Username == User.Identity.Name);
            if (isValid)
            {
                return View(id);
            }
            else
            {
                return View("Error");
            }
        }
    }
} 
```

看法：

```
@model Assignment2.ViewModels.ShoppingCartViewModel

@{
    ViewBag.Title = "Shopping Cart";
}

<script src="/Scripts/jquery-1.4.4.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(function () {
        // Document.ready -> link up remove event handler
        $(".RemoveLink").click(function () {
            // Get the id from the link
            var recordToDelete = $(this).attr("data-id");

            if (recordToDelete != '') {

                // Perform the ajax post
                $.post("/ShoppingCart/RemoveFromCart", { "id": recordToDelete },
                    function (data) {
                        // Successful requests get here
                        // Update the page elements
                        if (data.ItemCount == 0) {
                             $('#row-' + data.DeleteId).fadeOut('slow');
                        } else {
                             $('#item-count-' + data.DeleteId).text(data.ItemCount);
                         }

                        $('#cart-total').text(data.CartTotal);
                        $('#update-message').text(data.Message);
                        $('#cart-status').text('Cart (' + data.CartCount + ')');
                    });
            }
        });
        });

    function handleUpdate() {
        // Load and deserialize the returned JSON data
        var json = context.get_data();
        var data = Sys.Serialization.JavaScriptSerializer.deserialize(json);
        // Update the page elements
        if (data.ItemCount == 0) {
            $('#row-' + data.DeleteId).fadeOut('slow');
        } else {
            $('#item-count-' + data.DeleteId).text(data.ItemCount);
        }
        $('#cart-total').text(data.CartTotal);
        $('#update-message').text(data.Message);
        $('#cart-status').text('Cart (' + data.CartCount + ')');
    }
</script>
<h3>
    <em>Review</em> your cart:
</h3>
<p class="button">
    @Html.ActionLink("Checkout >>", "AddressAndPayment", "Checkout")
</p>
<div id="update-message">
</div>
<table>
    <tr>
        <th>
            Production Name
        </th>
        <th>
            Price (each)
        </th>
        <th>
            Quantity
        </th>
        <th></th>
</tr> 
@foreach (var item in Model.CartItems)
{ 
    <tr id="row-@item.RecordId">
        <td>
            @Html.ActionLink(item.Performance.Title, "Details", "Store", new { id = item.PerformanceId }, null)
        </td>
        <td>
             @item.Performance.Price
        </td>
        <td id="item-count-@item.RecordId">
             @item.Count
        </td>
        <td>
            <a href="#" class="RemoveLink" data-id="@item.RecordId">Remove from cart</a>
        </td>
    </tr>
}
    <tr>
        <td>
            Total
        </td>
        <td>
        </td>
        <td>
        </td>
        <td id="cart-total">
            @Model.CartTotal
        </td>
    </tr>
</table> 
```

堆栈跟踪：

```
[FormatException: Input string was not in a correct format.]
   System.Text.StringBuilder.AppendFormat(IFormatProvider provider, String format, Object[] args) +9358943
   System.String.Format(IFormatProvider provider, String format, Object[] args) +107
   System.ComponentModel.DataAnnotations.ValidationAttribute.FormatErrorMessage(String name) +76
   System.Web.Mvc.DataAnnotationsModelValidator.get_ErrorMessage() +30
   System.Web.Mvc.RequiredAttributeAdapter.GetClientValidationRules() +45
   System.Web.Mvc.HtmlHelper.<.ctor>b__1(ModelValidator v) +10
   System.Linq.<SelectManyIterator>d__14`2.MoveNext() +238
   System.Web.Mvc.HtmlHelper.GetUnobtrusiveValidationAttributes(String name, ModelMetadata metadata) +632
   System.Web.Mvc.Html.InputExtensions.InputHelper(HtmlHelper htmlHelper, InputType inputType, ModelMetadata metadata, String name, Object value, Boolean useViewData, Boolean isChecked, Boolean setId, Boolean isExplicitValue, IDictionary`2 htmlAttributes) +807
   System.Web.Mvc.Html.DefaultEditorTemplates.StringTemplate(HtmlHelper html) +135
   System.Web.Mvc.Html.ActionCacheCodeItem.Execute(HtmlHelper html, ViewDataDictionary viewData) +30
   System.Web.Mvc.Html.TemplateHelpers.ExecuteTemplate(HtmlHelper html, ViewDataDictionary viewData, String templateName, DataBoundControlMode mode, GetViewNamesDelegate getViewNames, GetDefaultActionsDelegate getDefaultActions) +330
   System.Web.Mvc.Html.TemplateHelpers.TemplateHelper(HtmlHelper html, ModelMetadata metadata, String htmlFieldName, String templateName, DataBoundControlMode mode, Object additionalViewData, ExecuteTemplateDelegate executeTemplate) +1117
   System.Web.Mvc.Html.TemplateHelpers.TemplateHelper(HtmlHelper html, ModelMetadata metadata, String htmlFieldName, String templateName, DataBoundControlMode mode, Object additionalViewData) +66
   System.Web.Mvc.Html.DefaultEditorTemplates.ObjectTemplate(HtmlHelper html, TemplateHelperDelegate templateHelper) +575
   System.Web.Mvc.Html.DefaultEditorTemplates.ObjectTemplate(HtmlHelper html) +47
   System.Web.Mvc.Html.TemplateHelpers.ExecuteTemplate(HtmlHelper html, ViewDataDictionary viewData, String templateName, DataBoundControlMode mode, GetViewNamesDelegate getViewNames, GetDefaultActionsDelegate getDefaultActions) +714
   System.Web.Mvc.Html.TemplateHelpers.TemplateHelper(HtmlHelper html, ModelMetadata metadata, String htmlFieldName, String templateName, DataBoundControlMode mode, Object additionalViewData, ExecuteTemplateDelegate executeTemplate) +1117
   System.Web.Mvc.Html.TemplateHelpers.TemplateHelper(HtmlHelper html, ModelMetadata metadata, String htmlFieldName, String templateName, DataBoundControlMode mode, Object additionalViewData) +66
   System.Web.Mvc.Html.EditorExtensions.EditorForModel(HtmlHelper html) +60
   ASP._Page_Views_Checkout_AddressAndPayment_cshtml.Execute() in c:\Users\Ian\Desktop\Assignment2\Assignment2\Assignment2\Views\Checkout\AddressAndPayment.cshtml:19
   System.Web.WebPages.WebPageBase.ExecutePageHierarchy() +207
   System.Web.Mvc.WebViewPage.ExecutePageHierarchy() +81
   System.Web.WebPages.StartPage.RunPage() +19
   System.Web.WebPages.StartPage.ExecutePageHierarchy() +65
   System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage) +76
   System.Web.Mvc.RazorView.RenderView(ViewContext viewContext, TextWriter writer, Object instance) +220
   System.Web.Mvc.BuildManagerCompiledView.Render(ViewContext viewContext, TextWriter writer) +115
   System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context) +303
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult) +13
   System.Web.Mvc.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19() +23
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) +260
   System.Web.Mvc.<>c__DisplayClass1e.<InvokeActionResultWithFilters>b__1b() +19
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult) +177
   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +343
   System.Web.Mvc.Controller.ExecuteCore() +116
   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +97
   System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10
   System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +37
   System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +21
   System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +12
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
   System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +50
   System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8970061
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

模型：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.ComponentModel;
using System.ComponentModel.DataAnnotations;
using System.Web.Mvc;

namespace Assignment2.Models
{
    [Bind(Exclude = "OrderId")]
    public partial class Order
    {
        [ScaffoldColumn(false)]
        public int OrderId { get; set; }

        [ScaffoldColumn(false)]
        public System.DateTime OrderDate { get; set; }

        [ScaffoldColumn(false)]
        public string Username { get; set; }

        [Required(ErrorMessage = "First Name is required")]
        [DisplayName("First Name")]
        [StringLength(160)]
        public string FirstName { get; set; }

        [Required(ErrorMessage = "Last Name is required")]
        [DisplayName("Last Name")]
        [StringLength(160)]
        public string LastName { get; set; }

        [Required(ErrorMessage = "Please enter Address")]
        [StringLength(70)]
        public string Address { get; set; }

        [Required(ErrorMessage = "Please enter City")]
        [StringLength(40)]
        public string City { get; set; }

        [Required(ErrorMessage = "Please enter County")]
        [StringLength(40)]
        public string County { get; set; }

        [Required(ErrorMessage = "Please enter {Postal Code")]
        [DisplayName("Postal Code")]
        [StringLength(10)]
        public string PostalCode { get; set; }

        [Required(ErrorMessage = "Please enter Country")]
        [StringLength(40)]
        public string Country { get; set; }

        [Required(ErrorMessage = "Please enter Phone Number")]
        [StringLength(24)]
        public string Phone { get; set; }

        [Required(ErrorMessage = "Email Address is required")]
        [DisplayName("Email Address")]
        [RegularExpression(@"[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}",
        ErrorMessage = "Email is is not valid.")]
        [DataType(DataType.EmailAddress)]
        public string Email { get; set; }

        [ScaffoldColumn(false)]
        public decimal Total { get; set; }

        public List<OrderDetail> OrderDetails { get; set; }
    }
} 
```

如果您需要任何其他信息，请告诉我，谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-15T14:19:48.990

您的错误消息中有一个不必要`{`的内容：`PostalCode` `RequiredAttribute`

```
[Required(ErrorMessage = "Please enter {Postal Code")] 
```

删除它，它应该可以工作。

你得到了例外，因为框架使用`ErrorMessage`作为[格式字符串](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)并且一个未关闭`{`的这是无效的。

# math - GPS的欠定线性系统

> ID：10162606
> 
> 赞同：0
> 
> 时间：2012-04-15T13:50:38.193
> 
> 标签：math

当我正在阅读Dan Kalman的论文[An Underdetermined Linear System for GPS](http://mathdl.maa.org/images/upload_library/22/Polya/Kalman.pdf)

并求解方程，这一切都很好，直到第 388 页，在页面下方，它是根据这个方程写的 $$0.02t2-1.88t+43.56=0$$ 这句话，

“导致两个解，**43.1 和 50.0**。如果我们选择第一个解，则 (x, y, z) = (1.317, 1.317, 0.790)，其长度约为 2。我们使用地球半径单位，所以这个点在地球表面上方大约 4000 英里处。t 的第二个值导致 (x, y, z) = (.667, .667, .332)，长度为 0.9997。这将点放在地球表面（精确到小数点后四位），并为我们提供了船的位置。”

我的问题是他如何得到 43.1 和 50.0 的值？每次我使用二次公式求解时，我得到的 41.4 和 52.5 是不同的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T19:27:55.903

答案 43.1 和 50.0 是前面等式的正确答案：

```
(5.41 − .095t − 1)^2 + (5.41 − .095t − 2)^2 + (3.67 − .067t)^2
= .047^2(t − 19.9)^2 
```

二次方程是这个方程的扩展。

正确的展开由下式给出：

```
43.67031391 - 1.8896618*x + 0.02033*x**2 
```

仍然有相同的答案。

但是，文本中包含的扩展精度稍差（实际上是在扩展原始方程之前将 0.047 替换为 0.05 时给出的），这就是它具有不同解的原因。

我的猜测是作者以很高的精度解决了它，然后在写论文的时候觉得中间步骤是合理的，但在计算简化的二次方程时没有使用相同的精度。

# javascript - 拉斐尔模糊插件

> ID：10162608
> 
> 赞同：1
> 
> 时间：2012-04-15T13:50:51.230
> 
> 标签：javascript, svg, raphael

> **可能重复：**
> [如何向 Raphael.js 对象添加阴影？](https://stackoverflow.com/questions/3878436/how-can-one-add-drop-shadows-to-raphael-js-objects)

我在这里看到：

[如何在 raphael js 中使用 svg 过滤器？](https://stackoverflow.com/questions/6485115/how-to-use-svg-filters-with-raphael-js)

已经为 Raphael 创建了一个模糊插件，尽管它现在已经从 gitHub 中消失了。有谁知道类似的插件吗？或者也许是另一种在 raphael 中使用 svg 过滤器的方法。

raphael.glow() 函数不适合我想要的。谢谢

# java - 线程间消息传递实现

> ID：10162615
> 
> 赞同：2
> 
> 时间：2012-04-15T13:51:38.473
> 
> 标签：java, multithreading

我正在尝试做的是让一个线程将从其父线程接收到的消息写入 OutputStream，侦听 InputStream 以获取回复，然后将回复通知父线程。我编写了两个测试类，它们以不同的方式做类似但更简单的事情。方法 1 仅在`"before loop"`调试语句未注释时有效，方法 2 仅打印`"message from child"`调试语句。我究竟做错了什么？

**方法一**

```
public class Parent {
    private static int out = 0;
    private static int in = 0;

    public static void main(String[] args) {
        final Object locker = new Object();
        Thread t = new Thread(new Runnable() {          
            @Override
            public void run() {
                while (true) {
                    synchronized (locker) {
                        try {
                            locker.wait();
                            System.out.println("Message from parent " + out);
                            in = out + 10;
                            locker.notify();
                        } catch (InterruptedException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                    }
                }
            }
        });
        t.start();

        System.out.println("before loop");
        while (out < 10) {
            synchronized (locker) {
                locker.notify();
                try {
                    locker.wait();
                    out++;
                    System.out.println("Message from child " + in);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }               
            }   
        }       
    }
} 
```

**方法二**

```
public class Parent {

    /**
     * @param args
     * @throws InterruptedException 
     */
    public static void main(String[] args) throws InterruptedException {
        final BlockingQueue<Integer> q = new ArrayBlockingQueue<Integer>(1);

        Thread t = new Thread(new Runnable() {          
            @Override
            public void run() {
                while (true) {
                    try {
                        Integer i = q.take();               
                        System.out.println("Message from parent: " + i.intValue());
                        q.put(i.intValue() + 10);
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }               
            }
        });

        for (int i = 0; i < 10; i++) {
            q.put(i);
            Integer j =  q.take();
            System.out.println("Message from child: " + j);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T14:38:20.350

Java API 已经提供了该功能；你有充分的理由重新发明轮子吗？

```
public static void main(String[] args) throws Exception {
    // start a worker thread
    ExecutorService exec = Executors.newFixedThreadPool(1);

    // ask the worker thread to execute a task (
    Future<String> future = exec.submit(() -> {
        Thread.sleep(500); // simulate waiting for I/O
        return "hello from child";
    });

    // get the return value from the worker thread (waiting until it is available)
    String greeting = future.get();
    System.out.println(greeting);

    // terminate the worker thread (otherwise, the thread will wait for more work)
    exec.shutdown();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T14:16:46.747

在方法 1 中，您有一个很好的死锁方法，因为父线程可以在子线程执行其 first`notify()`之前执行它的 first `wait()`。这将导致他们双方都在等待，而双方都无法通知。由于它是一种竞争条件，因此诸如打印语句之类的琐碎事情可能会影响实践中的行为。

方法 2 同样设计不佳，因为您有两个线程从同一个队列写入和读取。尝试使用两个队列，一个是父级写入，子级读取，另一个是子级写入，父级读取。

# python - 谷歌应用引擎中的 BeautifulSoup 错误

> ID：10162616
> 
> 赞同：0
> 
> 时间：2012-04-15T13:51:47.990
> 
> 标签：python, google-app-engine

我在使用 Beautiful Soup 的 Google 应用引擎中创建了一个应用程序。我正在使用它的最新版本，[http://www.crummy.com/software/BeautifulSoup/bs4/download/4.0/](http://www.crummy.com/software/BeautifulSoup/bs4/download/4.0/)。一切正常，直到我将其上传到 GAE。然后发生的事情是我收到了这个错误：

```
Traceback (most recent call last):
  File "/base/python_runtime/python_lib/versions/1/google/appengine/ext/webapp/_webapp25.py", line 701, in __call__
    handler.get(*groups)
  File "/base/data/home/apps/s~app/1.358226218191077920/main.py", line 285, in get
    self.response.out.write(self.makeQuery("9147094591"))
  File "/base/data/home/apps/s~app/1.358226218191077920/main.py", line 191, in makeQuery
    from bs4 import BeautifulSoup
  File "/base/data/home/apps/s~app/1.358226218191077920/bs4/__init__.py", line 29, in <module>
    from .builder import builder_registry
  File "/base/data/home/apps/s~app/1.358226218191077920/bs4/builder/__init__.py", line 279, in <module>
    from . import _htmlparser
  File "/base/data/home/apps/s~app/1.358226218191077920/bs4/builder/_htmlparser.py", line 23, in <module>
    from bs4.element import (
  File "/base/data/home/apps/s~app/1.358226218191077920/bs4/element.py", line 6, in <module>
    from bs4.dammit import EntitySubstitution
  File "/base/data/home/apps/s~app/1.358226218191077920/bs4/dammit.py", line 254
    smart_quotes_re = b"([\x80-\x9f])"
                                     ^
SyntaxError: invalid syntax 
```

当我查看 dammit.py 中的第 254 行时，我发现：

```
if (self.smart_quotes_to is not None
    and proposed.lower() in self.ENCODINGS_WITH_SMART_QUOTES):
    smart_quotes_re = b"([\x80-\x9f])"
    smart_quotes_compiled = re.compile(smart_quotes_re)
    markup = smart_quotes_compiled.sub(self._sub_ms_char, markup) 
```

我真的看不出有什么问题。我尝试过其他版本的 BS，但它们不起作用，因为我使用的是 soup.select("CSS SELECTOR")，它似乎只能在最新版本中使用。

但是，正如我之前所说，它在我的计算机上运行良好，但在云中却不行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T13:57:57.887

BeautifulSoup 4 需要 Python 2.7 或更高版本，但 Appengine 默认使用 Python 2.5。您可以：

*   [在 Appengine 上使用 Python 2.7](https://developers.google.com/appengine/docs/python/python27/using27)（编辑：不需要付费应用。感谢 Grewe。）

*   现在使用 BeautifulSoup 3。

# matlab - 在MATLAB中计算符号方程的值

> ID：10162619
> 
> 赞同：0
> 
> 时间：2012-04-15T13:52:03.340
> 
> 标签：matlab

我有以下 MATLAB 代码：

```
>> syms x
>> z = 20.*exp(x)+cos(x)
>> derivative = diff(z) 
```

如何计算任何数字（例如 6）的衍生值？

以下命令

```
>> clear all
>> x = 6
>> derevative = 20*exp(x)-sin(x) 
```

工作正常，但如果 x 是符号我不使用 x = 6 如上面的例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T23:27:49.057

正确的方法如下：

```
syms x
z = 20.*exp(x)+cos(x)
derivative = diff(z)
subs(derivative, 6) 
```

你需要在最后一行`subs(derivative, 6)`完成工作的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T15:21:28.757

你可以试试这个：

```
syms x;
z = 20.*exp(x)+cos(x);
derivative = diff(z);
x = 5;
result = eval(derivative) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-21T09:04:38.703

您可以使用下面给出的功能：

```
syms a b
subs(cos(a) + sin(b), [a, b], [sym('alpha'), 2]) 
```

它完美无缺。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T14:10:27.747

有一个[关于如何在 MATLAB 中进行符号计算的教程。](http://www.math.colostate.edu/~strickla/M340/sym.html)不过，据我了解，使用 MATLAB 进行符号计算有点不合常规。

# jquery - 复杂的分析+网站优化器跟踪

> ID：10162621
> 
> 赞同：0
> 
> 时间：2012-04-15T13:52:13.773
> 
> 标签：jquery, web, analytics, tracking, optimization

我有一种复杂的跟踪脚本。:-) 基本上，我想跟踪用户对链接的点击（=这是一个转换）。所以链接有一个 javascript onClick 事件：

```
<a href='http://convertingpage.com' onClick='trackConversion(this)'>BUY NOW</a> 
```

该函数包含多个跟踪脚本：

```
function trackConversion(that){
// CPC network tracking script (not important)
// another CPV network tracking script (not important)

----- HERE SHOULD COME THE GOOGLE WEBSITE OPTIMIZER SCRIPT -----

// tracking for google analytics goals (NOT website optimizer):
_gaq.push(['_trackPageview', '/clicked.php']);
} 
```

您可能知道，网站优化器转换脚本如下所示：

```
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['gwo._setAccount', 'UA-1234567-2']);
  _gaq.push(['gwo._trackPageview', '/2462373171/goal']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script> 
```

**您如何将此脚本（上图）放入 trackConversion() 函数中？**

我试图删除所有*不必要*的（我猜是:-)）代码并留下这个：

```
 var _gaq = _gaq || [];
  _gaq.push(['gwo._setAccount', 'UA-1234567-2']);
  _gaq.push(['gwo._trackPageview', '/2462373171/goal']);
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); 
```

我删除了 (function(){...})(); *部分原因是我觉得在函数内部有一个函数*似乎很奇怪。这行得通吗？

顺便说一句，当你尝试：

```
alert(_gaq.push(['gwo._trackPageview', '/2462373171/goal'])); // returns 2 
```

在上面的脚本中，它返回数字**2**。当您评论第一行时，它返回**0**：

```
//var _gaq = _gaq || [];
alert(_gaq.push(['gwo._trackPageview', '/2462373171/goal'])); // returns 0** 
```

这有什么用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:19:35.520

首先，`(function() {})();`是一个匿名函数，没什么奇怪的。如果您已经在页面上使用了 Analytics，则可以删除所有这部分（它调用相同的跟踪代码）。

简单的说

```
var _gaq = _gaq || [];
_gaq.push(['gwo._setAccount', 'UA-1234567-2']);
_gaq.push(['gwo._trackPageview', '/2462373171/goal']); 
```

在你的`function trackConversion()`，它应该工作正常！

# javascript - 如何以编程方式将 CSS 定义应用于整个页面？

> ID：10162622
> 
> 赞同：7
> 
> 时间：2012-04-15T13:52:14.467
> 
> 标签：javascript, css

我确定信息已经存在，但我找不到；对不起 ：-/

我想使用 JavaScript 创建 CSS 规则，并将它们应用于整个页面，就好像它们位于文档头部的样式元素中一样。我不想通过生成 CSS 文本来做到这一点——我想将规则保留为可以更改的实体（JavaScript 变量），从而稍后更改页面的外观。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T00:01:41.673

我找到了我想要的：[http](http://www.javascriptkit.com/dhtmltutors/externalcss3.shtml) ://www.javascriptkit.com/dhtmltutors/externalcss3.shtml 。

（感谢所有回答和评论的人。我想要的——最终找到，见上面的链接——是一个实际的 CSS 规则对象，我可以动态使用它，比如 HTML 元素。虽然有些答案很接近，他们都不是。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T16:57:56.077

根据您的需要，如果您需要一种快速而肮脏的方式来编辑 css，那么这里可能对您有用。您可以对其进行一些简化，甚至对其进行扩展。

```
function css(){
  rules={};
  ref=//get a reference to a style element
  function setRules(){
    var out='';
    for(var x in rules){
      out+=x+'{'+rules[x]+'}';
    }
    ref.innerHTML=out;
  }
  this.addRule=function(ident,styles,values){
    var a;
    if(rules[ident]){
      a=rules[ident];
    }
    else{
      a = new cssR();
      rules[ident]=a;
    }
    if(styles.push){
      var i=0;len=styles.length;
      for(i;i<len;i++){
        a[styles[i]]=values[i];
      }
    }
    else{
      a[styles]=values;
    }
    rules[ident]=a;
    setRules();
  }
  function cssR(){

  }
  cssR.prototype.toString=function(){
    var out='';
    for(var x in this){
      typeof this[x]=='function'?'':out+=x+':'+this[x]+';';
    }
    return out;
  }
}
var a=new css();
a.addRule('#main','color','red');
a.addRule('#main','top','0px');
a.addRule('div .right','float','left');
a.addRule('div .right',['float','width'],['right','100px']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T14:01:53.810

我不完全确定你的意思，一个实际的例子会很有用。无论如何，您可以轻松地在 JS 中创建 CSS 规则和样式表。它会是这样的：

```
var elHead = document.getElementsByTagName('head')[0]
  , elStyle = document.createElement('style')
  ;

elStyle.type= 'text/css';
elHead.appendChild( elStyle );
elStyle.innerHTML = 'body { background : red; }'; //for example 
```

那么样式表只是您写入的另一段 HTML。

我并不是说这是一个好主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T14:07:01.970

正如 Govind 所提到的，LessCSS 是满足您需求的最有前途的库。以下是它的使用方法：

1.  创建 2 种不同类型的 less 文件。一个包含您想通过 javascript 更改以更改整体外观的 Less 变量。第二个文件应该包含较少的样式，这些样式将使用第一个文件的较少变量来生成 css。
2.  启用“[观看模式](http://lesscss.org/#-client-side-usage)”，这是一项客户端功能，可让您的样式在更改时自动刷新。

现在，当您需要更改外观时，只需用新变量覆盖第一个文件中的 Less 变量。（使用 js 删除第一个 Less 文件并添加这个新文件）。Less JS 会自动创建一组新的 CSS 样式来改变外观。

请记住，从 Less 或 SASS 创建的 CSS 无法缓存，因为它们是动态生成的。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-15T16:59:38.793

您可以简单地嵌入 jQuery（无论如何都应该检查 jQuery）并像这样执行 JavaScript：

```
$("h2").css("margin-bottom", "5px"); 
```

# java - 使用 BufferedWriter 写入时丢失数据

> ID：10162629
> 
> 赞同：0
> 
> 时间：2012-04-15T13:53:46.947
> 
> 标签：java, file-io, bufferedreader, bufferedwriter

我想逐行读取一个大的 ASCII 文本文件（20GB）并将这些行的一部分复制到一个单独的文件中。以下示例代码在写入输出文件时会丢失数据。我用一些 printlns 测试了 Reader 并按预期工作。我试图增加 BufferedWriter 的缓冲区，但没有任何改善。flush() 也不起作用。在这种情况下，输出文件应该是 40MB 左右。

我希望你能帮助我，问候蒂姆

```
public void split() throws Exception{
    BufferedReader inStream = new BufferedReader(new FileReader("input.txt"));      
    BufferedWriter outStream = new BufferedWriter(new FileWriter("output.txt"));

    for(int i=0;i<700000;i++){
        String tempString = inStream.readLine().trim();
        if(doOtherStuff(tempString,i)){
            break;
        }
        outStream.write(tempString);
        outStream.newLine();
    }
    inStream.close();
    outStream.close();  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T14:01:45.850

也许你是这个意思？

```
for (;;) {
    String tempString = inStream.readLine();
    if (tempString == null)
        break;
    tempString = tempString.trim();
    if(doOtherStuff(tempString,i)){
        continue; // Skip writing, continue with next line
    }
    outStream.write(tempString);
    outStream.newLine();
} 
```

如果没有 null 测试，EOF 会引发异常。

# android - 安卓换语言

> ID：10162632
> 
> 赞同：1
> 
> 时间：2012-04-15T13:54:27.843
> 
> 标签：android, onchange

我有两个文件：（`strings.xml`我的母语）和`string2.xml`（英语）。有没有办法在单击按钮时加载其中一个文件？

例如，如果我使用文件，则单击按钮，`strings.xml`然后将默认值更改为`string2.xml`. 或者，如果我使用`string2.xml`，然后单击更改为`string.xml`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T14:00:19.323

```
Resources res = context.getResources();
DisplayMetrics dm = res.getDisplayMetrics();
android.content.res.Configuration conf = res.getConfiguration();
conf.locale = new Locale(language_code.toLowerCase());
res.updateConfiguration(conf, dm); 
```

使用上面的代码更新应用程序的语言环境。只需在 res 中有两个文件夹作为 values-en 和 values-yournativelanguge 并将您的 string.xml 放在名称为 string.xml 的每个文件夹中。

参考这个[链接](http://adrianvintu.com/blogengine/post/Force-Locale-on-Android.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T14:01:29.600

对于使用多种语言，您可以使用本地化概念。

这是 developer.android.com 的链接

[http://developer.android.com/resources/tutorials/localization/index.html](http://developer.android.com/resources/tutorials/localization/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T14:01:32.377

查看在[Spinner 更改时加载不同的 strings.xml 资源](https://stackoverflow.com/questions/7305928/load-different-strings-xml-resource-on-spinner-change) 似乎有可能，但您必须更改应用程序的整个区域设置语言。

# php - 数据库输出使 php 注释

> ID：10162633
> 
> 赞同：-1
> 
> 时间：2012-04-15T13:54:27.867
> 
> 标签：php, database, comments

谢谢你帮我解决这个问题。出现以下问题：

我有一个名为“news()”的函数。此功能正常工作。但是，当我尝试从数据库调用此函数时，就会出现问题。

我的数据库中存储了以下数据：

```
Table MENU
menu_id (int) -> 1, menu_name(varchar(255)) -> Home, menu_content (longtext) -> <?php news() ?>, menu_status (varchar(255)) -> visible, menu_rank (varchar(255)) -> active. 
```

如您所见，我将以下 PHP 语句存储在我的数据库“ `<?php news() ?>`”中。

当我使用以下查询从数据库中收集数据时：

```
$content_query = mysql_query ("SELECT * FROM MENU WHERE menu_id = '".$var."') or die (mysql_error()); 
$content = mysql_fetch_assoc($content_query);
$menu_content = $content['menu_content'];
$menu_title = ['menu_title']; 
```

当我回显我的 $menu_title 时，它​​会正确显示数据。如果我回显我的 $menu_content，它不会显示任何内容。当我尝试调试时，似乎已经为该数据添加了 HTML 注释。像这样：

```
<!--?php news();?--> 
```

有谁知道如何解决这个问题？谢谢你帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T13:57:02.597

您在`"`SQL 语句的末尾缺少一个结束引号：

```
"SELECT * FROM MENU WHERE menu_id = '".$var."' 
```

应该：

```
"SELECT * FROM MENU WHERE menu_id = '".$var."'" 
```

（注意结尾的引号字符）

更简洁：

```
"SELECT * FROM MENU WHERE menu_id = '$var'" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T14:16:25.023

为了做你想做的事，你必须 eval() 返回的数据。当你决定使用 eval 函数时，你必须非常小心。绝对确保没有用户数据成为您的 eval 语句的方式！不过，不确定“<！--”。试试看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T14:25:06.070

你的第一行缺少一个结束的'"'。要解决这个问题，只需替换这个：

```
$content_query = mysql_query ("SELECT * FROM MENU WHERE menu_id = '".$var."') or die (mysql_error()); 
```

有了这个：

```
$content_query = mysql_query ("SELECT * FROM MENU WHERE menu_id = '".$var."') or die (mysql_error()); 
```

如果这是用户输入，我还建议在 $var 变量周围添加 intval() 。否则，恶意用户可能会注入 SQL 来编辑您的数据库。这只会将任何文本值转换为整数。

另外，只是为了确认一下，您是否使用 PHP 服务器，因为当有人尝试在 .html 文件或未安装 PHP 的 .php 文件中输出 PHP 函数时，我看到了此错误。

# sql - 如何在列上创建索引以增加查询的执行

> ID：10162634
> 
> 赞同：-1
> 
> 时间：2012-04-15T13:54:29.323
> 
> 标签：sql, sql-server, database, tsql

我不会在这里添加查询，因为查询没有什么特别之处。
在查询中，我在 10 个表上留下了连接。

```
...left join tableB b on a.UserId = b.UserId
left join tableC c on a.UserId = c.UserId
left join tableD d on a.UserId = d.UserId 
```

此查询的执行时间为**23 秒**。那已经太多了。
所有表都通过`UserId`类型为 的外键连接`uniqueidentifier`。
现在我想我可能需要添加索引，但我是第一次这样做，我不确定我做对了。
在管理工作室中，`table design > manage keys indexes > add index > in dropdown I select UserId (ASC)`
我在所有 10 个表中执行此操作，并且在运行查询后，查询的执行时间为**45 秒**。这比以前更糟。
我在添加索引时做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T17:08:33.823

这个想法是为每个 FK 和 PK 创建索引（这个是自动创建的）这样做，你的加入会加快

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T15:50:44.290

它是按问题分组的。我以不同的方式组织组，现在执行时间以毫秒为单位 :) 这就是我所做的。我`count()`逐节从选择和整个组中删除，并在其中写道：

```
select S3.TotalCheckIns
...
left join (select userid, count(CheckInId) as TotalCheckIns
   FROM dbo.checkins
   GROUP BY UserId) S3 on p.UserId = S2.UserId
   where p.UserId = @m_UserId 
```

我已使用此链接中的技术[http://weblogs.sqlteam.com/jeffs/archive/2005/12/14/8546.aspx](http://weblogs.sqlteam.com/jeffs/archive/2005/12/14/8546.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T14:51:46.987

如果您选择除用户 ID 之外的任何其他列，则在用户 ID 上添加索引将无济于事。为了获得最佳性能，您可以在按用户 ID 排序的每个表上创建一个非聚集索引，并且还包含查询所需的所有其他列。

这将为您提供最佳性能，但维护所有这些索引有很多开销，因此您必须考虑到这一点。

# gcc - 如何处理 *.h.cmake 文件

> ID：10162636
> 
> 赞同：0
> 
> 时间：2012-04-15T13:54:40.410
> 
> 标签：gcc, makefile, cmake, mingw, sox

我正在尝试构建[pysox](http://pypi.python.org/pypi/pysox) （在 Python中使用[SoX的模块）。](http://sox.sourceforge.net/Main/HomePage)但是 mingw32-gcc 显示错误：“soxstdint.h：没有这样的文件”。SoX 源代码不分发“soxstdint.h”，仅分发“soxstdint.h.cmake”。我和它有什么关系？我不知道[CMake](http://www.cmake.org/)是否可以帮助我。

我需要得到“soxstdint.h”。好的，如果有人可以告诉我一些背景信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T18:51:19.590

[我刚刚从您提供](http://pypi.python.org/pypi/pysox#downloads)的链接下载了 pysox 0.3.6.alpha 源代码，并且字符串 soxstdint 没有出现在它的任何文件中。同样，也没有 soxstdint.h.cmake 文件。你从哪里得到你的资源？顺便说一句，我还下载[了 SoX 14.4.0](http://sourceforge.net/projects/sox/files/sox/14.4.0/)，它也不包含字符串 soxstdint。

话虽如此，stdint.h 是一个标准的 C 库文件，它被我下载的 sox 和 pysox 发行版中的几个文件#included。现在 stdint.h[直到最近才](https://stackoverflow.com/questions/126279/c99-stdint-h-header-and-ms-visual-studio)包含在 Visual Studio 中，所以也许 SoX 人创建了一个自定义版本作为解决方法，并且由于您在 Windows 上，正在寻找它，但由于它是 MinGW 而不是 Visual Studio，解决方法失败。

如果这些东西可用于 MinGW，我建议下载最新的 pysox 和 sox 源或预构建的二进制包。如果您已经拥有，那么 SoX 的 CMakeLists.txt 文件中可能存在一个小错误，该错误可能将“sox”和“stdint.h”连接起来，而没有斜杠 (/) 或其他重要字符将它们分开。如果失败了，我认为您需要向 SoX 和 PySoX 开发人员求助。他们应该有兴趣看到他们的代码在 MinGW 等平台上运行。

# asp.net-mvc - 在 asp.net mvc 中迭代模型时创建具有唯一 ID 的超链接

> ID：10162638
> 
> 赞同：0
> 
> 时间：2012-04-15T13:54:59.080
> 
> 标签：asp.net-mvc

```
<%var i=1;%>
<%foreach (var commentitem in item.commentsModelList)
   { 
    <table border="0"  class="commentbox">
     <tr>
        <td>
           <%: Html.DisplayFor(modelItem => commentitem.CommentClob)%>
        </td>

     </tr>
     <tr>
        <%var rid = "reply" + i;%>
        <td>  <input id="<%:rid %>" type="button" value="reply"/>
     </td>
       <td>

      <%--addded--%>
        <div id="<%:rboxid %>">
            <input id="Text1" type="text" />
            <input id="postreply" type="button" value="postreply" />

        </div>
    </td>

     </tr>
  </table>
<% i++;}%> 
```

我有以下查询

1.我想在点击不同回复ID的不同超链接时显示警告框。

**已编辑**

2\. 我想在页面加载时隐藏这些 div，并在单击带有 id reply1 的链接时显示带有 id replybox1 的 div，其他 div 也一样

3.有没有办法动态创建div并执行相同的功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T14:01:01.743

用于`modelItem.Id`消除链接的歧义，而不是用于循环计数器；

```
 <tr>
        <%var rid = "reply" + modelItem.Id ;%>
        <td>  <input id="<%:rid %>" type="button" value="reply"/>
     </td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T14:04:25.950

要在单击输入按钮时获得 id 警报，您可以使用此脚本。（假设您的页面中有可用的 jQuery）

```
 $(function(){
      $(".commentbox input[type='button']").click(function(){
        var id=$(this).attr("id");
        alert(id);
      });
    }); 
```

正如哈桑已经提到的。你可能应该使用`comentItemId`而不是使用`i`变量

**编辑** 根据有问题的更新，此脚本将隐藏页面加载中的所有 div，并在单击`replybox1`输入时仅显示具有 id 的那些 div `reply1`。

```
 $(function(){
      $(".commentbox div").hide();
      $(".commentbox input[type='button']").click(function(){
        var id=$(this).attr("id");
        var replyBoxId=id.substring(5);
        $("#replybox"+replyBoxId).show();
      });
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T13:58:07.413

您已经在循环`i` *内*定义了变量。`for`这意味着您为每次迭代分配一个值为 1 的新整数。

尝试将定义移到`i`循环之外。

# ios - transitionFromView 不起作用

> ID：10162641
> 
> 赞同：1
> 
> 时间：2012-04-15T13:55:34.523
> 
> 标签：ios

在我以前的项目中，我成功使用了 transitionFromView，现在我今天创建了新项目，这次它启用了 ARC，我复制了旧代码并粘贴了它，但它不起作用。我放了一个断点，一步一步地执行它，但没有工作。

工作代码

```
quiz *quizObj = [[quiz alloc]init];
self.vc = quizObj;
[quizObj release];

[UIView transitionFromView:self.view toView:self.vc.view duration:1 options:UIViewAnimationOptionTransitionCurlUp completion:^(BOOL finished) {
}]; 
```

不工作的代码

```
EnterPhoneNumber *epnObj = [[EnterPhoneNumber alloc]init];

        [UIView transitionFromView:self.view toView:epnObj.view duration:1 options:UIViewAnimationOptionTransitionCurlUp completion:^(BOOL finished) {
        }]; 
```

项目没有警告或错误，但此代码仍然无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T14:38:36.147

尝试将方法放入 performSelector

```
...
[self performSelector:@selector(actionView) withObject:nil afterDelay:3];
...

- (void)actionView {
    [UIView transitionFromView:self.view toView:self.vc.view duration:1 options:UIViewAnimationOptionTransitionCurlUp completion:^(BOOL finished) {
}];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-23T17:00:20.243

以下是有关当您将其延迟到运行循环的另一轮时它为何起作用的更多信息：http: [//andrewmarinov.com/working-with-uiviews-transition-animations/](http://andrewmarinov.com/working-with-uiviews-transition-animations/)

# sql - 动态光标

> ID：10162643
> 
> 赞同：1
> 
> 时间：2012-04-15T13:56:08.090
> 
> 标签：sql, oracle, select, plsql, cursor

我对语句使用**游标：**

```
SELECT NAME FROM STUDENT WHERE ROLL = 1; 
```

我用了：

```
CURSOR C IS SELECT NAME FROM STUDENT WHERE ROLL = roll;
--roll is a variable I receive via a procedure, and the procedure works fine for the received parameter. 
```

执行此操作后，我可以检索 roll = 1 的所有记录。

现在，我需要检索一个组的记录**（可能通过游标）**，就像：

```
SELECT NAME FROM STUDENT WHERE ROLL IN (2, 4, 6); 
```

但是 IN 子句中的值只有在**运行**时才知道。我该怎么做？也就是说，有什么方法可以将参数分配给游标的**WHERE子句？**

我尝试在游标的声明中使用数组，但弹出一个错误，告诉类似：**标准类型不能使用**。

我用了：

```
CURSOR C IS SELECT NAME FROM STUDENT WHERE ROLL IN (rolls);
--rolls is an array initialized with the required roll numbers. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T17:52:21.693

首先，我假设您的过程的参数实际上与`STUDENT`表中列的名称不匹配。如果您实际编写了您发布的语句，`roll`将被解析为列的名称，而不是参数或局部变量，因此该语句将返回该列`STUDENT`所在的表中的每一行。`ROLL``NOT NULL`

```
CURSOR C 
    IS SELECT NAME 
         FROM STUDENT 
        WHERE ROLL = roll; 
```

其次，虽然可以像@Gaurav Soni 建议的那样使用动态 SQL，但这样做会生成一堆不可共享的 SQL 语句。这将淹没共享池，可能会使缓存中的其他语句老化，并且每次都使用大量 CPU 硬解析语句。Oracle 构建的前提是你要解析一次 SQL 语句，一般使用绑定变量，然后以不同的绑定变量值多次执行该语句。Oracle 可以只执行一次解析查询、生成查询计划、将查询放入共享池等过程，然后在您再次执行查询时重用所有这些。如果您生成了一堆永远不会再次使用的 SQL 语句，因为您使用的是没有绑定变量的动态 SQL，

此外，您已经向 SQL 注入攻击敞开了大门。攻击者可以利用该过程从任何表中读取任何数据或执行存储过程所有者有权访问的任何函数。即使您的应用程序没有特别的安全意识，这也将是一个主要的安全漏洞。

你最好使用一个集合。这可以防止 SQL 注入攻击并生成单个可共享的 SQL 语句，因此您不必进行持续的硬解析。

```
SQL> create type empno_tbl is table of number;
  2  /

Type created.

SQL> create or replace procedure get_emps( p_empno_arr in empno_tbl )
  2  is
  3  begin
  4    for e in (select *
  5                from emp
  6               where empno in (select column_value
  7                                 from table( p_empno_arr )))
  8    loop
  9      dbms_output.put_line( e.ename );
 10    end loop;
 11  end;
 12  /

Procedure created.

SQL> set serveroutput on;
SQL> begin
  2    get_emps( empno_tbl( 7369,7499,7934 ));
  3  end;
  4  /
SMITH
ALLEN
MILLER

PL/SQL procedure successfully completed. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T16:28:19.487

```
create or replace procedure dynamic_cur(p_empno VARCHAR2) IS
cur     sys_refcursor;
v_ename emp.ename%type;
 begin
  open cur for 'select ename from emp where empno in (' || p_empno || ')';
  loop
   fetch cur into v_ename;
   exit when cur%notfound;
    dbms_output.put_line(v_ename);
  end loop;
  close cur;
end dynamic_cur; 
```

创建的程序

运行`procedure`dynamic_cur

```
declare
v_empno   varchar2(200) := '7499,7521,7566';
begin
  dynamic_cur(v_empno);
end; 
```

**输出**

```
ALLEN
WARD
JONES 
```

**注意**：如前所述`XQbert`，`dynamic cursor`导致`SQL injection`，但如果您没有处理任何关键要求，并且不涉及安全性，那么您可以使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T16:37:06.920

也许您可以将 rolls 作为一组带引号的逗号分隔值传递。例如'1'、'2'等如果这个值被传递到一个varchar输入变量的过程中，它可以用来根据表匹配来获取多行。

因此光标 SELECT NAME FROM STUDENT WHERE ROLL IN (rolls);

将被评估为 SELECT NAME FROM STUDENT WHERE ROLL IN ('1','2');

希望能帮助到你

# eclipse - 使 StatET 与 R 2.15.0 一起工作

> ID：10162648
> 
> 赞同：3
> 
> 时间：2012-04-15T13:56:15.743
> 
> 标签：eclipse, r, statet

我似乎在 Eclipse、R、RJ 和 StatET 之间存在阻抗不匹配。我在用：

*   一个香草 Eclipse 3.7 经典（靛蓝）
*   R 2.15.0

都在 Windows 7 32 位机器上，我想使用 StatET。为了做到这一点，我安装了：

*   RJ 1.0.3-7（但适用于 R 2.14.0）
*   RJ.gd 1.0.3-3（但适用于 R 2.14.0）
*   StatET 2.0

StatET 似乎还没有 R-2.15.0 的 RJ 版本，所以我使用了 R-2.14 的版本，但它对我不起作用。我收到一个错误（“R ddl 版本不匹配：DLL：2.15.0 JRI:2.14.1”）我应该降级我的 R 版本，还是有我不知道的更新的 StatET + RJ 版本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T13:43:52.140

带有 RJ 1.1 的 StatET 3.0 的测试版本目前适用于 R 2.15。

RJ 1.1 的二进制文件最近可用，可以安装：

```
install.packages(c("rj", "rj.gd"), repos="http://download.walware.de/rj-1.1") 
```

或者，可以从以下位置下载 RJ 的二进制文件或源代码：

[http://www.walware.de/it/downloads/rj.mframe](http://www.walware.de/it/downloads/rj.mframe)

StatET 3.0 的更新站点是：

[http://download.walware.de/eclipse-3.7/testing](http://download.walware.de/eclipse-3.7/testing)

或者

[http://download.walware.de/eclipse-3.6/testing](http://download.walware.de/eclipse-3.6/testing)

取决于您的 Eclipse 版本。有关 StatET 3.0 的更多详细信息，请参阅以下两个线程：

[http://lists.r-forge.r-project.org/pipermail/statet-user/2012-May/001408.html](http://lists.r-forge.r-project.org/pipermail/statet-user/2012-May/001408.html)

[http://lists.r-forge.r-project.org/pipermail/statet-user/2012-February/001284.html](http://lists.r-forge.r-project.org/pipermail/statet-user/2012-February/001284.html)

# linux - 一个坏的 USB 设备应该能够让一个没有错误的 Linux 内核崩溃吗？

> ID：10162657
> 
> 赞同：8
> 
> 时间：2012-04-15T13:57:05.130
> 
> 标签：linux, usb

我知道我的问题相当广泛，但我一直在想这个问题。

一点背景。我在一个物理实验室工作，那里所有的实验室计算机都在运行 Debian（旧版本和 Lenny 的混合）或最近的 Ubuntu 10.4 LTS。我们编写了许多定制软件来与实验硬件和其他计算机进行交互。

我们有很多 FPGA 板来控制实验的各个部分，它们通过 USB 连接到不同的计算机。升级控制实验的计算机后，我们开始看到运行所有激光器的计算机崩溃/锁定。这曾经是完全稳定的。

我的问题是：如果整个计算机由于 a) Python/GTK 软件 gui b) USB 设备驱动程序或 c) 的问题而锁定，这可以归咎于 Linux 内核（或其他级别的操作系统） ?

即使我在软件/硬件的实现中犯了错误，要求 linux 内核不要惊慌是不公平的。

我自己的猜测：任何用户级应用程序都不应该使整个系统崩溃，因为它们应该只能访问自己的东西。

任何设备驱动程序都成为内核本身的一部分，因此能够使其崩溃。我的推理合理吗？

额外的问题：有没有办法以某种方式隔离设备和内核，这样无论硬件犯了什么愚蠢的错误，Linux 都能继续愉快地运行。这将非常有用，原因有两个：1) 运行系统更容易调试，2) 出于实验的目的，我们确实需要较长的正常运行时间，并且只有系统的一部分崩溃比系统的一部分崩溃要好得多系统传播到其余部分。

任何有关此主题的链接和阅读材料将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T17:26:15.540

您是正确的，除非存在内核错误，否则非特权代码不应该能够关闭系统。然而，非特权和特权之间的界限与用户空间与内核并不完全相同。如果用户帐户具有超级用户权限，则用户模式程序可以打开`/dev/kmem`和丢弃操作系统的内部数据结构。

要将主内核与设备驱动程序问题隔离开，请在虚拟机中运行设备驱动程序。

包括 VMWare Workstation 在内的几种流行的 VM 系统支持将任意 USB 设备从主机转发到来宾，而主机上没有特定于设备的驱动程序。

# python - Python的OpenGL矩阵数学实用程序？

> ID：10162659
> 
> 赞同：11
> 
> 时间：2012-04-15T13:57:49.303
> 
> 标签：python, opengl, matrix

在我自己做之前，是否有任何 Python 库可用于 4x4 矩阵上的 OpenGL 特定/兼容矩阵数学？[基本上，我需要 Android 的android.opengl.Matrix](http://developer.android.com/reference/android/opengl/Matrix.html)类提供的功能集。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-09-14T11:37:28.590

我创建了[Pyrr](https://github.com/adamlwgriffiths/Pyrr)库来提供 Core OpenGL 所需的所有数学功能。它具有矩阵、向量和四元数以及对其他基元（矩形、射线、线等）的基本支持。

它既有过程 API，也有最近非常强大的面向对象 API。

它在 PyPi`pip install pyrr`和上面的 github 链接上可用。

欢迎提供反馈、问题和新功能！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-15T15:57:40.187

您可以使用[numpy](http://numpy.scipy.org/)生成与 OpenGL 兼容的数据。许多[PyOpenGL](http://pyopengl.sourceforge.net/)调用可以直接采用 numpy 数据结构（假设它是正确的类型）。此外，numpy 数组通常在内存中排列良好，因此您可以对数据做您想做的事情（并且很容易检查它们的排列方式）*。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-03-08T14:07:13.487

[PyGLM](https://pypi.org/project/PyGLM/)也可能值得关注。作者声称是 numpy 的 2 倍到 10 倍。它基于流行的[OpenGL 数学](https://glm.g-truc.net/0.9.9/index.html)，仅 C++ 头文件库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T17:51:32.083

如果您已经知道在 OpenGL 中想要什么，为什么不使用[PyOpenGL](http://pyopengl.sourceforge.net/)呢？我相信你想要的所有功能都应该在那里，[这里有一些关于进行矩阵转换](http://pyopengl.sourceforge.net/context/numeric_arrays.html)和与 NumPy 接口的文档。

# objective-c - 什么是 Xcode 中的异常断点

> ID：10162664
> 
> 赞同：3
> 
> 时间：2012-04-15T13:58:43.917
> 
> 标签：objective-c, xcode, xcode4

已经有关于如何在 Xcode 中使用异常断点的帖子。但我的问题是那到底是什么？当我为所有异常启用异常断点时，似乎我得到了一个非常完整的堆栈跟踪。为什么呢？此外，我不再收到错误消息。我真的很好奇异常断点是如何工作的。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T14:02:58.940

它只是一个围绕在`objc_exception_throw`.

`objc_exception_throw`只是一个用于引发所有异常的 C 函数。所以这就像打破任何功能一样。

您不会再收到日志消息，因为调试器会在抛出异常时停止。如果您从那里继续，该异常最终将由默认记录它的应用程序处理。但是，如果您不继续，您将不会获得任何日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T14:03:15.887

有[一篇关于断点的维基百科文章。](http://en.wikipedia.org/wiki/Breakpoint)

Xcode 只是提供了一个 GUI 来使用标准调试器 gdb。因此，您可能还想阅读[debuggers](http://en.wikipedia.org/wiki/Debugger)和[gdb](http://www.unknownroad.com/rtfm/gdbtut/gdbtoc.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-20T23:02:23.030

因为开发人员通常不知道程序中的 bug 隐藏在哪里，所以有时您希望 Xcode 告诉您哪一行代码导致了未捕获的异常，从而导致崩溃。这是异常断点有用的时候。

要添加一个，打开断点导航器并单击窗口左下角的 +。从上下文菜单中，选择异常断点。创建一个新的异常断点并出现一个弹出窗口。设置它以便它捕获所有抛出异常。

[![在此处输入图像描述](../Images/0dfda9e72b1ee58be0244ccdcaa689b9.png)](https://i.stack.imgur.com/kitg1.png)

现在，当您的应用程序抛出异常时，Xcode 会将您带到直接导致引发异常的行。

但是，正如您所指出的，它不会将有关异常的详细信息记录到控制台。这是因为应用程序还没有崩溃。要查看崩溃和任何相关的控制台消息，请在调试栏中继续执行程序，直到看到崩溃。

> 资料来源：iOS 编程：The Big Nerd Ranch Guide，第 6 版

# svn - SVN多次将同一分支重新集成到主干

> ID：10162665
> 
> 赞同：16
> 
> 时间：2012-04-15T13:58:56.753
> 
> 标签：svn, version-control, tortoisesvn

**SVN 书指出以下内容：**

> 执行重新集成合并后，您不应继续将其用于开发。这样做的原因是，如果您稍后尝试从主干重新同步现有分支，合并跟踪会将您的重新集成视为尚未合并到分支中的主干更改，并将尝试合并分支到主干合并回分支！解决这个问题的方法很简单，就是从主干创建一个新分支来继续下一阶段的开发。

就我而言，我想在重新集成到主干后继续使用分支并继续多次重新集成到主干。我已经这样做了，我遇到了两个主要问题：

1.  当我尝试重新整合时，我不断遇到奇怪的树冲突。
2.  我不断收到一条消息，上面写着“只有在以前的修订版 280 到 325 之前才能使用重新集成”

如果我希望能够多次从分支重新集成，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-15T14:50:30.680

您可以使用 --record-only 合并选项，如 SVN 书，[保持重新集成的分支部分中所述](http://svnbook.red-bean.com/en/1.7/svn.branchmerge.advanced.html#svn.branchmerge.advanced.reintegratetwice)

请注意，从 Subversion 1.8 开始，这不再需要，因为引入了[自动重新集成合并](http://subversion.apache.org/docs/release-notes/1.8.html#auto-reintegrate)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T03:17:26.423

我在 Google 上看到了许多解决方法，但它们让我感到紧张，因为它们是“黑客”。为了解决这个问题，我决定只做消息中暗示的颠​​覆。我回到我的分支并明确合并了指定的修订：

```
~/python/orb $ svn merge -r 650:693 https://paulwhippconsulting.slsapp.com/source/orb/trunk
~/python/orb $ svn commit -m 'merged revisions 650:693 from trunk'
Sending        occl

Committed revision 695. 
```

一旦我这样做了，我就能够返回到主干的工作副本并重新集成分支而没有任何问题。

我希望这有帮助

# iphone - 从 ABRecordCopyValue 声明 NSString 时内存泄漏

> ID：10162668
> 
> 赞同：0
> 
> 时间：2012-04-15T13:59:33.547
> 
> 标签：iphone, objective-c, ios, memory-leaks, abaddressbook

我正在使用以下代码行...

```
NSString *clientFirstName = (NSString *)ABRecordCopyValue(person, kABPersonFirstNameProperty); 
```

Xcode 上的“分析”功能表明这会导致潜在的内存泄漏。我根本没有发布 clientFirstName，因为我既没有也没有发布`alloc`它`retain`。

但是，我意识到 ABRecordCopyValue 可能不会像命令那样返回对象，`[NSMutableArray arrayWithArray:someArray]`这可能意味着我确实在创建一个我控制并且必须释放的新对象。

渴望听到想法...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T14:03:46.307

任何类型的副本都会返回一个 a`retainCount`为 1 的对象，因此您需要`release`通过`CFRelease()`.

请参阅[文档](http://developer.apple.com/library/mac/#documentation/UserExperience/Reference/AddressBook/C/ABRecordRef/Reference/reference.html)：

> 您有责任释放此对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T14:23:42.227

请参阅此链接。它和你的一样：

[NSString 潜在泄漏](https://stackoverflow.com/questions/2638129/nsstring-potential-leak)

参考**KennyTM**的回答：

> `ABMultiValueCopyValueAtIndex`是一个“复制”功能，它遵循 [“创建规则”](http://developer.apple.com/mac/library/DOCUMENTATION/CoreFoundation/Conceptual/CFMemoryMgmt/Concepts/Ownership.html#//apple_ref/doc/uid/20001148-103029)。`CFRelease`使用完毕后需要调用释放。
> 
> ```
> NSString *contactEmail = (NSString *)ABMultiValueCopyValueAtIndex(emailInfo, 0);
> ...
> if (contactEmail != nil)
>   CFRelease((CFTypeRef) contactEmail); 
> ```

`clientFirstName`使用释放您的对象`CFRelease`。

添加以下代码：

```
if(clientFirstName != nil)
{
     CFRelease((CFTypeRef) clientFirstName);
} 
```

**注意：**不要忘记检查是否`clientFirstName`不为零。最好在对它执行任何函数之前检查对象是否不在`nil`，因为它可以使我们免于潜在的崩溃，尽管在这种情况下不是，但在许多情况下

**编辑：**

正如@Dondragmer 在以下评论之一中所说：

我什至认为

```
[clientFirstName release]; 
```

应该解决问题。

如果您需要更多帮助，请告诉我。

希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-08T12:29:32.247

我不完全理解 ObjectiveC 引用计数是如何工作的，但是代码中的一个小更新修复了分析警告：

前：

```
NSString *firstName = (__bridge NSString*) ABRecordCopyValue(person, kABPersonFirstNameProperty); 
```

后

```
NSString *firstName = (__bridge_transfer NSString*) ABRecordCopyValue(person, kABPersonFirstNameProperty); 
```

# sip - 如何通过 Wireshark 解码 SIP/TLS（非默认 SIPS 端口）数据包？

> ID：10162669
> 
> 赞同：3
> 
> 时间：2012-04-15T13:59:36.060
> 
> 标签：sip, ssl, wireshark

我使用 SIP 服务器通过端口 5070 侦听 SIP/TLS 请求。我正在尝试跟踪和分析为什么我的拨号器没有通过 Wireshark 在网络上注册。

我已经在 Wireshark 的首选项中编辑了所有需要的字段，添加了服务器的私钥，编辑了 SIP TCP 和 TLS 端口（它们是 5070 而不是 5061），我现在清楚地得到的是 TLS 客户端 Hello 和服务器响应，但没有 SIP 出现，只有 TCP SYN 和 ACK。

我已经搜索并尝试了所有可能的方法，但无济于事 - 任何帮助将不胜感激。

提前致谢。

//M

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T15:04:59.950

TLS 会话是否使用具有完美前向保密性的密码套件？如果是这种情况，即使使用服务器私钥，Wireshark 也无法解密 TLS。检查服务器在 ServerHello 消息中选择的密码套件中的子字符串`EDH`or `EECDH`，在这种情况下使用完美前向保密。您必须在客户端或服务器中配置密码套件以不使用任何`EDH`和`EECDH`套件。对于 OpenSSL，请使用`ALL:-EDH:-EECDH`或类似的密码套件设置。

通过完美的前向保密，客户端和服务器将使用 Diffie-Hellman (DH) 就共享会话密钥达成一致；服务器私钥仅用于签名。如果没有完美的前向保密，共享密钥由客户端使用服务器的公钥加密，因此可以由服务器（和 Wireshark）使用服务器的私钥（假设服务器使用 RSA 密钥）解密。

# asp.net - 浏览器处理图像

> ID：10162672
> 
> 赞同：1
> 
> 时间：2012-04-15T14:00:06.947
> 
> 标签：asp.net, image, file-upload

我在浏览器正确显示图像时遇到了一些问题。除 Chrome 外，大多数浏览器都会受到影响。

这里的问题似乎是图像的缓存问题。我不太确定是不是这样，所以我会告诉你们我做了什么。

我的页面允许用户上传他们的照片。所以这些上传的照片将被保存到一个文件夹中。然后，用户将使用裁剪工具根据自己的喜好裁剪图像，并再次将它们保存回同一文件夹。如果他们选择使用相同的名称，则图像将被覆盖。

问题来了。在 Chrome 中，浏览器将显示新裁剪的图像，但不会显示其他浏览器。如果图像被重命名，那么这也不会发生。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T14:09:31.350

尝试在文件名的末尾添加一个新的 guid**`image.jpg?id=asdf`**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T15:32:30.903

每次保存时更改文件名。您确实*需要*缓存，但您不希望它在错误的时间发生。添加随机数将完全阻止浏览器缓存图像，阻止 http.sys 级别缓存，并阻止您实施的任何边缘缓存工作。

# php - Zend_Config_Xml 的zend 导航问题

> ID：10162673
> 
> 赞同：0
> 
> 时间：2012-04-15T14:00:12.133
> 
> 标签：php, zend-framework, zend-navigation

我正在尝试实现 Zend_Navigation – 通过本[教程创建菜单和面包屑](http://www.zendcasts.com/zend_navigation-dynamically-creating-a-menu-a-sitemap-and-breadcrumbs/2009/06/)

在引导文件中，

```
...
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap {

    protected $_config;
    protected $_layout;

    protected function _initConfig() {
        $this->_config = new Zend_Config_Ini(APPLICATION_PATH . '/configs/application.ini'); 
        Zend_Registry::set("config", $this->_config);
        if ($this->_config->debug) {
            error_reporting(E_ALL | E_STRICT);
            ini_set('display_errors', 'on');
        }
        $request = new Zend_Controller_Request_Http();
        $uri = $request->getRequestUri(); 
        if (preg_match("/admin/", $uri)) {
            //echo $this->_config->layout->admin->layout; exit;
            $this->_layout = Zend_Layout::startMvc(
                            array(
                                'layoutPath' => $this->_config->layout->layoutPath,
                                'layout' => $this->_config->layout->admin->layout
                            )
            );
        } else { 
            $this->_layout = Zend_Layout::startMvc(
                            array(
                                'layoutPath' => $this->_config->layout->layoutPath,
                                'layout' => $this->_config->layout->layout)
            );
            //echo $this->_view = $this->_layout->getView(); exit;
        }
    }
    /**
     * used for handling top-level navigation
     * @return Zend_Navigation
      */
    protected function _initNavigation()
    {
            $view = $this->_layout->getView();   
           /*
            $this->bootstrap('layout');
            $layout = $this->getResource('layout');
            $view = $layout->getView();
            */
            $config = new Zend_Config_Xml(APPLICATION_PATH . '/configs/navigation.xml','nav');

            $container = new Zend_Navigation($config);

            $view->navigation($container);
    }   
... 
```

下面还有 application/config 文件夹下的 navigation.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<configdata>
    <nav>
        <home>
            <label>Home</label>
            <uri>/</uri>

            <pages>
                <index>
                    <label>Home</label>
                    <uri>/index/index</uri>     
                </index>
                <index>
                    <label>Product</label>
                    <uri>/index/product</uri>       
                </index>

            </pages>        
        </home>
    </nav>
</configdata> 
```

在布局文件中

```
...
            <div class="breadcrumbs">
            <?= $this->navigation()->breadcrumbs()->setMinDepth(0)->setLinkLast(true)->setSeparator(" : "); ?>
        </div>
... 
```

当我运行该站点时，出现以下错误，

> 致命错误：在 C:\xampp\htdocs\enit\library\Zend\Navigation\Page.php:235 中包含消息“无效参数：无法确定要实例化的类”的未捕获异常“Zend_Navigation_Exception”：235 堆栈跟踪：#0 C:\ xampp\htdocs\enit\library\Zend\Navigation\Container.php(117): Zend_Navigation_Page::factory(Array) #1 C:\xampp\htdocs\enit\library\Zend\Navigation\Container.php(164): Zend_Navigation_Container->addPage(Array) #2 C:\xampp\htdocs\enit\library\Zend\Navigation\Container.php(179): Zend_Navigation_Container->addPages(Array) #3 C:\xampp\htdocs\enit\library \Zend\Navigation\Page.php(852): Zend_Navigation_Container->setPages(Array) #4 C:\xampp\htdocs\enit\library\Zend\Navigation\Page.php(295): Zend_Navigation_Page->set('pages ', 数组) #5 C:\xampp\htdocs\enit\library\Zend\Navigation\Page.php(250): Zend_Navigation_Page->setOptions(Array) #6 C:\xampp\htdocs\enit\library\Zend\Navigation\Page.php(232) : Zend_Navigation_Page->__construct(Array) #7 C:\xampp\htdocs\enit\library\Zend\Navigation\Container.php(117): Zend_Navigation_P in C:\xampp\htdocs\enit\library\Zend\Navigation\Page .php 在第 235 行

我在stackoverflow和google上搜索了一些解决方案，但我找不到它。我做错了什么？好心劝告

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:57:22.700

我已经运行了你的代码。错误在配置中。你有两个同名的兄弟姐妹，Zend_Config_Xml 将其标记为这种形式

```
array
  'label' => string 'Home' (length=4)
  'uri' => string '/' (length=1)
  'pages' => 
    array
      'index' => 
        array
          0 => 
            array
              'label' => string 'Home' (length=4)
              'uri' => string '/index/index' (length=12)
          1 => 
            array
              'label' => string 'Product' (length=7)
              'uri' => string '/index/product' (length=14) 
```

当您查看 Zend_Mvc_Page 第 235 行时，您可以弄清楚为什么会抛出异常。

```
 $hasUri = isset($options['uri']);
        $hasMvc = isset($options['action']) || isset($options['controller']) ||
                  isset($options['module']) || isset($options['route']);

        if ($hasMvc) {
            require_once 'Zend/Navigation/Page/Mvc.php';
            return new Zend_Navigation_Page_Mvc($options);
        } elseif ($hasUri) {
            require_once 'Zend/Navigation/Page/Uri.php';
            return new Zend_Navigation_Page_Uri($options);
        } else {
            require_once 'Zend/Navigation/Exception.php';
            throw new Zend_Navigation_Exception(
                'Invalid argument: Unable to determine class to instantiate');
        } 
```

所以最后的解决方案是更改第二个兄弟姐妹的名字。

# java - 单个集合的多线程搜索重复项

> ID：10162677
> 
> 赞同：2
> 
> 时间：2012-04-15T14:00:28.313
> 
> 标签：java, multithreading, collections, duplicates

使用我不能分成segads。至于我上面的例子，如果设置了 5 个线程，那么第一个段将采用 2 个第一个对象，第二个第 3 个和第 4 个，所以他们找不到 dups，但是如果我们合并它们，它的第 2 个和第 3 个有 dups。

从第一个线程可能会有更复杂的策略.. 啊没关系，很难解释。

当然，问题本身也在我的计划中。

编辑 **：**

InChunk，然后继续分析该块直到结束。;/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T14:14:03.893

我认为划分要重复数据删除的项目的过程将不得不查看该部分的末尾并继续前进以涵盖过去的重复数据。例如，如果您有：

```
1  1  2 . 2  4  4 . 5  5  6 
```

然后你分成 3 个块，然后分割过程需要`1 1 2`，但看到有另一个块`2`，所以它会`1 1 2 2`作为第一个块生成。它会再次向前移动 3 并生成`4 4 5`，但看到有 dups forward 和 generate `4 4 5 5`。第三个线程将只有`6`. 它会变成：

```
1  1  2  2 . 4  4  5  5 . 6 
```

块的大小将不一致，但随着整个列表中的项目数量变大，这些小的变化将是微不足道的。最后一个线程可能几乎没有什么可做的，或者完全改变了，但同样，随着元素的数量变大，这不应该影响算法的性能。

我认为这种方法比让一个线程处理重叠块更好。使用这种方法，如果您有很多 dup，如果您在放置 dup 时不走运，您可能会看到它必须处理超过 2 个连续的块。例如：

```
1  1  2 . 2  4  5 . 5  5  6 
```

由于 2s 和 5s，一个线程必须处理整个列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T14:27:04.930

我会使用基于块的划分、任务队列（例如`ExecutorService`）和私有哈希表来收集重复项。

池中的每个线程都会按需从队列中取出块，并将对应于私有哈希表中项的键的值加 1。最后，它们将与全局哈希表合并。

最后只需解析哈希表并查看哪些键的值大于 1。

例如，块大小为 3 和项目：

```
1 2 2 2 3 4 5 5 6 6 
```

假设池中有 2 个线程。线程 1 将占用 1 2 2，线程 2 将占用 2 3 4。私有哈希表如下所示：

```
1 1
2 2
3 0
4 0
5 0
6 0 
```

和

```
1 0
2 1
3 1
4 1
5 0
6 0 
```

接下来，线程 1 将处理 5 5 6，线程 2 将处理 6：

```
1 1
2 2
3 0
4 0
5 2
6 1 
```

和

```
1 0
2 1
3 1
4 1
5 0
6 1 
```

最后，重复项是 2、5 和 6：

```
1 1
2 3
3 1
4 1
5 2
6 2 
```

由于每个线程的私有表，这可能会占用一些空间，但会允许线程并行操作，直到最后的合并阶段。

# python - Python：从堆中删除元素

> ID：10162679
> 
> 赞同：57
> 
> 时间：2012-04-15T14:00:35.473
> 
> 标签：python, heap

Python 有`heapq`实现堆数据结构的模块，它支持一些基本操作（push、pop）。

如何在 O(log n) 中从堆中删除第 i 个元素？甚至有可能`heapq`还是我必须使用另一个模块？

请注意，文档底部有一个示例： [http](http://docs.python.org/library/heapq.html) ://docs.python.org/library/heapq.html ，它提出了一种可能的方法——这不是我想要的。我希望删除元素，而不仅仅是标记为已删除。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-04-15T15:35:11.330

您可以很容易地从堆中删除第 i 个元素：

```
h[i] = h[-1]
h.pop()
heapq.heapify(h) 
```

只需将要删除的元素替换为最后一个元素并删除最后一个元素，然后重新堆化堆。这是 O(n)，如果你愿意，你可以在 O(log(n)) 中做同样的事情，但你需要调用几个内部 heapify 函数，或者更好，因为 larsmans 指出只需复制源_siftup/_siftdown 从 heapq.py 到你自己的代码中：

```
h[i] = h[-1]
h.pop()
if i < len(h):
    heapq._siftup(h, i)
    heapq._siftdown(h, 0, i) 
```

请注意，在每种情况下，您都不能这样做`h[i] = h.pop()`，因为如果`i`引用最后一个元素，则会失败。如果您在特殊情况下删除最后一个元素，那么您可以结合覆盖和弹出。

请注意，根据堆的典型大小，您可能会发现仅`heapify`在理论上效率较低时调用可能比重新使用`_siftup`/更快`_siftdown`：一点内省会发现这`heapify`可能是在 C 中实现的，但内部函数的 C 实现没有暴露。如果性能对您很重要，那么考虑对典型数据进行一些时序测试，看看哪个是最好的。除非你有非常大的堆，否则 big-O 可能不是最重要的因素。

**编辑：**有人试图编辑此答案以删除对的呼叫，`_siftdown`并附有以下评论：

> _siftdown 不是必需的。新 h[i] 保证是旧 h[i] 的孩子中最小的，它仍然大于旧 h[i] 的父级（新 h[i] 的父级）。_siftdown 将是无操作的。我必须编辑，因为我没有足够的代表来添加评论。

他们在此评论中错过的是，这`h[-1]`可能根本不是孩子`h[i]`。插入的新值`h[i]`可能来自堆的完全不同的分支，因此可能需要在任一方向进行筛选。

还有评论询问为什么不只使用`sort()`来恢复堆：调用`_siftup`和`_siftdown`都是O（log n）操作，调用heapify是O（n）。调用`sort()`是一个 O(n log n) 操作。调用 sort 很可能会足够快，但对于大堆来说这是不必要的开销。

**编辑**以避免@Seth Bruder 指出的问题。当`i`引用结束元素时，`_siftup()`调用会失败，但在这种情况下，从堆的末尾弹出一个元素不会破坏堆不变量。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-15T14:03:01.753

(a) 考虑一下为什么不想延迟删除。在很多情况下，这是正确的解决方案。

(b) 堆是一个列表。您可以按索引删除元素，就像任何其他列表一样，但是您将需要重新堆化它，因为它不再满足堆不变量。

# solr - Solr：如何将布尔字段映射到 1 和 2 以进行提升

> ID：10162691
> 
> 赞同：2
> 
> 时间：2012-04-15T14:01:57.433
> 
> 标签：solr, boolean

我想以以下方式提升 inStock:true 且价格高的文档：

*   inStock:true 为 1
*   inStock:false 为 2

这样我就可以使用 price 和 inStock 数字表示的生成作为 boost 函数：

```
document boost = (inStock == true ? 2 : 1) * price 
```

这可能吗？已经有一个[关于 boolean field boosting](https://stackoverflow.com/questions/10113144/boosting-boolean-fields-in-solr)的问题，但它不符合我的要求。

**更新1**：

[Solr 4 中实现的SOLR-2136](https://issues.apache.org/jira/browse/SOLR-2136)用于条件函数 (if)，这使我的案例变得简单。由于 Solr 4 尚未发布，是否有任何解决方法？

**UPDATE2**：尽量不要在 Solr 中使用布尔字段类型。它存储 'T' 为真，'F' 为假，您需要使用 map() 和 ord() 以便将 true 映射为 1，将 false 映射为 0。只需将 int 用于布尔值，如果你不这样做' t 在布尔字段中允许 null，不要为您的字段索引错误值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T19:09:48.467

是的，有一个解决方法：

使用[ord() 函数](http://wiki.apache.org/solr/FunctionQuery#ord)，它将基于一组索引字段值返回一个序数。

这意味着，如果您只为 inStock 字段的“真”值编制索引（并将假值排除在索引之外），则可以确保 inStock 字段只有一个值，这意味着该值将具有索引位置1 并且 ord(inStock) 将为所有具有 inStock==true 的文档返回 1。另一方面，如果 inStock 字段在文档中不可用，ord() 将返回 0。

如果您现在想映射到 true=1 和 false=2，您还可以使用[map](http://wiki.apache.org/solr/FunctionQuery#map)函数来更改数字。

# c# - 想把这样的php系统转成C#怎么办？

> ID：10162692
> 
> 赞同：1
> 
> 时间：2012-04-15T14:02:07.073
> 
> 标签：c#, php, mysql, webmatrix

我一直在为我的项目开发一个 php web 系统并且我已经完成了 PHP v 系统但是我的讲师拒绝标记它并说我应该使用带有 web 矩阵的 C# 而不是 php 和带有 Dreamweaver 的 MySQL。现在我已经完成了任务，但是以不同的格式我想问一下是否有任何方法可以更改脚本而不是重做整个项目。

另一件事是，在我的 PHP 系统中，我的页面如下：

login.php > login_now.php > home.php

其中 login_now.php 是处理器页面。

C# 是否也允许我拥有与此类似的处理器页面？

如果不介意有人可以建议我该怎么做吗？非常感谢……我迷路了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:04:10.577

您唯一的选择是从头开始重写应用程序。Luxspes 提到的迁移助手几乎没有用，因为它是为 .NET v 1.1（Web 窗体）编写的，而 Web Pages 框架在 v 4.0 上运行。

您可以像在 PHP 中一样在网页中使用“处理器”页面，但我的偏好是将处理逻辑与表单放在同一页面中，然后使用 Post - Redirect - Get 模式成功重定向（ PRG），无论我使用的是 PHP 还是 ASP.NET。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T14:40:19.027

如果您需要让它在 .NET 上运行，您可以使用 PHP .NET 编译器：Phalanger：[http ://www.php-compiler.net/](http://www.php-compiler.net/)

如果您想实际翻译代码，可以使用：[http ://www.asp.net/downloads/archived-v11/migration-assistants/php-to-aspnet](http://www.asp.net/downloads/archived-v11/migration-assistants/php-to-aspnet)

# ios - 对通用应用程序/iPad 目标的困惑

> ID：10162693
> 
> 赞同：1
> 
> 时间：2012-04-15T14:02:08.377
> 
> 标签：ios, target, universal

有很多类似的问题，但我还没有真正找到答案。

我正在制作一个大型 iPhone 应用程序的 iPad 版本。分发时最好的方法是什么？据我了解，将应用程序转换为“通用”应用程序时，iPad 版本的所有资源（图像等）也会下载到 iPhone。

这可能是不希望的，所以对我来说，使用内置的 XCode 函数将目标复制到 iPad 目标听起来更好。（这很好，因为它将生成所有 NIB 文件的 iPad 特定版本）

但是，恐怕这会将应用程序拆分为应用商店上的两个版本。我想让它看起来像应用商店上的通用应用程序，带有小“+”号。当它实际上是两个不同的目标时，是否有可能让它看起来像一个通用应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T14:21:02.773

我不认为两个版本中都存在的图像等是一个如此严重的问题。
它们被压缩并且主要可以用于两个版本。

我宁愿在我的所有设备上拥有一个通过 iCloud 同步的通用应用程序，而不是下载该应用程序的两个版本……Apple 也这样做，例如在 iBooks 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T14:41:04.920

在通用应用程序中，只有一个二进制文件。

如果您创建目标，您可以为 iPhone 或 iPad 编译，但是您将拥有两个不同的应用程序。

所以，不，不可能让两个应用程序看起来和行为像一个通用应用程序。

# javascript - 在 OpenLayers 地图中查看矢量叠加

> ID：10162694
> 
> 赞同：2
> 
> 时间：2012-04-15T14:02:31.860
> 
> 标签：javascript, openlayers

我是使用 HTML 创建地图的新手，我一直在尝试将两个矢量图层（地点、点）添加到基本地图（道路）中，但是我看不到地图上的矢量图层。图层应显示为基本地图的矢量叠加层。图层在那里，因为它们在图层切换器中显示，但没有显示在屏幕上。我认为问题与调用向量层的方式有关。什么是要显示矢量图层的解决方案。谢谢

```
var map = new OpenLayers.Map("map-id");

    var roads= new OpenLayers.Layer.WMS(
    "roads",
    "http://localhost:8080/geoserver/wms",
    {layers: "roads"});

var points= new OpenLayers.Layer.Vector(
    "points",
    "http://localhost:8080/geoserver/wms",
    {layers: "points"});

var places= new OpenLayers.Layer.Vector(
    "places",
    "http://localhost:8080/geoserver/wms",
    {layers: "places"});

map.addLayer(roads);
map.addLayer(points);
map.addLayer(places);
map.addControl(new OpenLayers.Control.LayerSwitcher()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T04:42:52.660

您正在尝试通过 WMS 协议显示您的矢量数据。为此，您应该使用 OpenLayers.Layer.WMS 实例而不是 OpenLayers.Layer.Vector。要将 WMS 图层显示为叠加层，请使用 isBaseLayer 选项：

```
map = new OpenLayers.Map('map'); 
var places = new OpenLayers.Layer.WMS('places',
  "http://localhost:8080/geoserver/wms",
  {layers: "places", transparent: true},
  {isBaseLayer: false, opacity: 1, singleTile: true, visibility: true}
);
map.addLayers([places]); 
```

# python - Git预提交钩子：获取已更改文件的列表

> ID：10162695
> 
> 赞同：11
> 
> 时间：2012-04-15T14:02:52.843
> 
> 标签：python, git, pre-commit-hook, pre-commit

我正在开发验证和 linting 实用程序以与各种提交挂钩集成，包括 Git 一个

[https://github.com/miohtama/vvv](https://github.com/miohtama/vvv)

目前，每次提交时都会针对整个项目代码库运行验证器和 linter。但是，仅针对更改的文件运行它们会更加优化。为此，我需要知道我的 Git 预提交挂钩中的更改文件列表（在 Python 中）

[https://github.com/miohtama/vvv/blob/master/vvv/hooks/git.py](https://github.com/miohtama/vvv/blob/master/vvv/hooks/git.py)

我必须提取哪些选项来提取更改的文件列表（如果重要的话，在 Python 中）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T17:09:32.260

如果你真的想让事情“正确”工作，那么 pre-commit 钩子有点痛苦，因为工作树中的内容不一定与要提交的内容相同：

```
$ echo morestuff >> file1; echo morestuff >> file2
$ git add file1 # but not file2
$ git commit -m 'modified two files but check in just one' 
```

您可以使用`git diff-index --cached HEAD`获取“即将签入的内容”的列表。另见，例如[http://newartisans.com/2009/02/building-a-better-pre-commit-hook-for-git/](http://newartisans.com/2009/02/building-a-better-pre-commit-hook-for-git/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2022-02-15T10:45:09.130

这不是一个直接的答案——但我在使用 npm 为 JavaScript 寻找类似的解决方案时遇到了这个问题。

通过进一步的搜索，我相信这现在是 npm 使用[lint-staged library](https://github.com/okonet/lint-staged)解决的问题。这将仅对*暂存*文件进行 lint。

我在搜索时遇到的问题是我一直在搜索“预提交”钩子 linting 而不是“暂存文件”linting。所以我把这个答案放在这里给像我这样来这里寻找 JavaScript 解决方案的人。

希望 npm 包也可以对 Python 世界有所启发。

# css - 奇怪的 CSS 页脚错误

> ID：10162699
> 
> 赞同：1
> 
> 时间：2012-04-15T14:03:02.953
> 
> 标签：css, html, size, wrapper, footer

嘿，我主页上的页脚 div 有问题

[http://kelteseth.net/2012/04/einsteigerhilfe-unterschied-ubuntu-kubuntu-und-xubuntu/](http://kelteseth.net/2012/04/einsteigerhilfe-unterschied-ubuntu-kubuntu-und-xubuntu/)

问题是**包装器 div与****内容 div**的高度不同。页脚 div 位于我网站的中心：/ 如何根据**内容 div的大小****更改****包装 div**的大小？

 **```
<div id="wrapper">
<div id="content">
<!-- My content... -->
</div>
</div>
<div id="footer">
<!-- My footer stuff... -->
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T14:10:50.430

添加`clear: both;`到您的`#footer`风格。

`#content`和div 是浮动的`#primary`，因此它们不会影响`#wrapper`div 的高度。

编辑：这个方法不会改变`#wrapper`div 的高度，所以如果你打算给它一个边框或背景图像，Lars Nyström 的`overflow: auto;`方法会更适合你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T14:10:14.043

设置`overflow: auto;`为`#wrapper`

发生这种情况的原因是浮动元素的父元素折叠。有许多技术可以解决它。我提到的一种叫做溢出方法。更多信息在这里：[http ://css-tricks.com/all-about-floats/](http://css-tricks.com/all-about-floats/)**

# iphone - 加载 TableViewController 时出现非 Fetch 请求和 managedObjectContext 错误

> ID：10162704
> 
> 赞同：1
> 
> 时间：2012-04-15T14:03:43.240
> 
> 标签：iphone, objective-c, xcode, ios4, core-data

这是我的情况：

我有一个应用程序，它在我的应用程序的初始视图中从 Core Data 加载一个表。让我们称之为 View1TVC。AppDelegate.m 已设置，因此 View1TVC 是初始视图。

现在在 View2TVC 中，我正在尝试加载 SAME TABLE（在 View1TVC 中过滤），但应用程序崩溃并出现以下错误：

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“NSFetchedResultsController 的实例需要非零 fetchRequest 和 managedObjectContext

为 View1TVC 和 View2TVC 加载表格的相关代码是相同的！！它适用于 View1TVC，但不适用于 View2TVC。这是 View2TVC 代码：

```
 -(void)setupFetchedResultsController
{
     NSString *entityName = @"Task";
     NSLog(@"Setting up a Fetched Results Controller for the Entity named %@", entityName);

// REQUEST:
     NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:entityName];

// SORT:
     request.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor
                             sortDescriptorWithKey:@"name" 
                                         ascending:YES 
                                          selector:@selector(localizedCaseInsensitiveCompare:)]];

// FETCH: 
     self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request 
                                               managedObjectContext:self.managedObjectContext
                                                 sectionNameKeyPath:nil 
                                                          cacheName:nil];
     [self performFetch];
 }

 -(void)viewWillAppear:(BOOL)animated
 {
     [super viewWillAppear:animated];
     [self setupFetchedResultsController];
 }

 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
 {
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

// Configure the cell...

Task *task = [self.fetchedResultsController objectAtIndexPath:indexPath];
cell.textLabel.text = task.name;

return cell;
} 
```

该应用程序在转到 View2TVC 并到达 setupFetchedResultsController 方法的 SORT 行时会特别挂起：

```
 request.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"name" ascending:YES selector:@selector(localizedCaseInsensitiveCompare:)]]; 
```

有人知道吗？该错误是否与我在 AppDelegate.m 中将 View1TVC 标识为我的默认应用程序有关？这是 AppDelegate.m 中的代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
// Override point for customization after application launch.
UINavigationController *navigationController = (UINavigationController *)self.window.rootViewController;
View1TVC *controller = (View1TVC *)navigationController.topViewController;
controller.managedObjectContext = self.managedObjectContext;
return YES;
} 
```

我非常感谢任何人可以提供的任何见解！谢谢。

# python - 如何正确关闭 IPython Notebook？

> ID：10162707
> 
> 赞同：137
> 
> 时间：2012-04-15T14:04:10.143
> 
> 标签：python, jupyter-notebook, ipython, jupyter

如何正确关闭 IPython Notebook？

目前，我只是关闭浏览器选项卡，然后`Ctrl+C`在终端中使用。
不幸的是，`exit()`滴答作响`Kill kernel upon exit`都没有帮助（它们确实会杀死内核但不会退出 iPython）。

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2012-04-15T14:08:41.127

目前没有比终端中的 Ctrl+C 更好的方法了。

我们正在考虑如何显式关闭，但是笔记本作为单用户应用程序（用户可以自由停止它）和作为多用户服务器（只有管理员应该能够）之间存在一些紧张关系阻止它。我们还没有完全弄清楚如何处理这些差异。

（对于未来的读者，这是 0.12 发布和 0.13 正在开发的情况。）

**2017 年 12 月更新**

IPython Notebook 已成为 Jupyter Notebook。最近的版本添加了一个`jupyter notebook stop`shell 命令，它将关闭在该系统上运行的服务器。如果不是默认端口 8888，您可以在命令行中传递端口号。

您还可以使用[nbmanager](https://github.com/jupyter/nbmanager)，这是一个桌面应用程序，可以显示正在运行的服务器并关闭它们。

最后，我们正在努力添加：

*   如果您在指定时间内不使用服务器，则自动关闭服务器的配置选项。
*   用户界面中用于关闭服务器的按钮。（我们知道花了这么长时间有点疯狂。更改 UI 是有争议的。）

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-09-23T16:43:22.473

如果你像我一样在后台运行 jupyter：

```
jupyter notebook &> /dev/null & 
```

然后要完全退出 jupyter，而不是 Ctl-C，请创建一个别名命令：

```
echo 'alias quitjupyter="kill $(pgrep jupyter)"' >> ~/.bashrc 
```

重启你的终端。杀死所有 jupyter 实例：

```
quitjupyter 
```

注意：如上所示，在单引号内使用双引号。另一种方法将在将表达式写入 .bashrc 之前评估表达式（您希望编写命令本身而不是“kill 1430”或任何可能与当前 jupyter 实例相关联的进程号）。当然，您可以使用任何您想要的别名。我实际上使用'qjup'：

```
echo 'alias qjup="kill $(pgrep jupyter)"' >> ~/.bashrc 
```

重启你的终端。杀死所有 jupyter 实例：

```
qjup 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2017-08-28T19:14:16.467

我认为接受的答案已经过时并且不再有效。

您可以从文件菜单项的 Web 界面终止 jupyter notebook。

[![在此处输入图像描述](../Images/d69e2b8536f875559594242c4887c617.png)](https://i.stack.imgur.com/iO9Qn.png)

当您将鼠标光标移动到“关闭并停止”时，您将看到以下说明。

[![在此处输入图像描述](../Images/64d2db03613991b1cf54e737bfdb435d.png)](https://i.stack.imgur.com/27QNX.png)

当您单击“关闭并停止”时，您将在终端屏幕上看到以下消息。

[![在此处输入图像描述](../Images/7d9b7cc1fa8dc1b35e532a93d7076eed.png)](https://i.stack.imgur.com/bZ5ZW.png)

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2018-09-13T13:42:23.657

第一步是保存所有打开的笔记本。然后考虑关闭正在运行的 Jupyter Notebook。您可以使用这个简单的命令：

```
$ jupyter notebook stop 
Shutting down server on port 8888 ... 
```

它还将端口号作为参数，您可以优雅地关闭 jupyter notebook。

例如：

```
jupyter notebook stop 8889 
Shutting down server on port 8889 ... 
```

此外，要了解您当前正在运行的 jupyter 实例，请检查以下命令：

```
shell> jupyter notebook list 
Currently running servers:
http://localhost:8888/?token=ef12021898c435f865ec706de98632 :: /Users/username/jupyter-notebooks [/code] 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2018-10-11T14:09:09.617

这些命令对我有用：

```
jupyter notebook list # shows the running notebooks and their port-numbers
                      # (for instance: 8080)
lsof -n -i4TCP:[port-number] # shows PID.
kill -9 [PID] # kill the process. 
```

这个答案改编自[这里](https://github.com/jupyter/notebook/issues/2844#issuecomment-385882596)。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-07-19T08:49:06.983

如果没有其他方法，请尝试从任务管理器（如果是 Windows）中终止 pythonw 进程。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-04-24T21:14:31.623

```
Linux (Ubuntu 14.04) 
```

如前所述，尝试通过首先转到 ipynb/jupyter 浏览器会话中的“运行”选项卡来正确终止 ipython 笔记本进程，然后检查控制台上打开的终端并使用 ctrl-c 关闭。如果可能，应避免后者。

如果您运行`ipython notebook list`并继续看到在不同端口上运行 ipython 服务器，请记下现有笔记本正在服务于哪些端口。然后关闭你的 TCP 端口：

```
fuser -k 'port#'/tcp 
```

我不确定这样做是否还有其他风险。如果是这样，请告诉我。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-07-27T02:07:49.430

实际上，我相信有一种比使用 kill 或任务管理器杀死进程更清洁的方法。

在 Jupyter Notebook 仪表板（首次启动“jupyter notebook”时看到的浏览器界面）中，浏览到您在浏览器中关闭但其内核可能仍在运行的笔记本文件的位置。

iPython Notebook 文件带有一个书本图标，如果内核正在运行，则显示为绿色，如果内核未运行，则显示为灰色。

只需选择正在运行的文件旁边的复选框，然后单击出现在其上方的 Shutdown 按钮。

这将正确关闭与该特定笔记本关联的内核。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-03-27T08:12:24.727

**环境**

* * *

我的操作系统是 Ubuntu 16.04，而 jupyter 是 4.3.0。

**方法**

* * *

首先，我在浏览器的主页上注销了 jupyter（注销按钮在右上角）

其次，`Ctrl + C`在您的终端中输入，它会显示：

> [I 15:59:48.407 NotebookApp] 从本地目录中断服务笔记本：/home/Username 0 个活动内核
> 
> Jupyter Notebook 运行在： [http://localhost:8888/?token=a572c743dfb73eee28538f9a181bf4d9ad412b19fbb96c82](http://localhost:8888/?token=a572c743dfb73eee28538f9a181bf4d9ad412b19fbb96c82)
> 
> 关闭此笔记本服务器 (y/[n])？

最后一步，`y`在 5 秒内输入，如果显示：

> [C 15:59:50.407 NotebookApp] 确认关闭
> [I 15:59:50.408 NotebookApp] 关闭内核

恭喜！您成功关闭了 jupyter。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-11-17T15:12:32.060

**选项1**

打开不同的控制台并运行

```
jupyter notebook stop [PORT] 
```

默认 [PORT] 为 8888，因此，假设 Jupyter Notebooks 在端口 8888 上运行，只需运行

```
jupyter notebook stop 
```

如果它在端口 9000 上，则

```
jupyter notebook stop 9000 
```

* * *

**选项 2**（[来源](https://github.com/jupyter/notebook/issues/2844#issuecomment-505763830)）

1.  检查运行时文件夹位置

    ```
    jupyter --paths 
    ```

2.  删除运行时文件夹中的所有文件

    ```
    rm -r [RUNTIME FOLDER PATH]/* 
    ```

3.  用于`top`查找任何剩余的 Jupyter Notebook 运行进程，如果是，则终止其 PID。

    ```
    top | grep jupyter &
    kill [PID] 
    ```

可以[归结](https://github.com/jupyter/notebook/issues/2844#issuecomment-517982785)为

```
TARGET_PORT=8888
kill -9 $(lsof -n -i4TCP:$TARGET_PORT | cut -f 2 -d " ") 
```

* * *

**注意**：如果想在特定 IP/端口上启动自己的笔记本

```
jupyter notebook --ip=[ADD_IP] --port=[ADD_PORT] --allow-root & 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-11-20T22:05:33.390

现在最好的方法是使用“退出”按钮左侧的“退出”按钮。我不得不承认我不了解注销按钮的实用性。但是，我很高兴他们添加了非常有用的退出按钮。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-08-25T14:29:20.823

如果您在 Mac 上并使用 Jupyter 实验室，您可以在终端中执行以下操作

```
jupyter list 
```

以上将为您提供所有正在运行的服务器。了解帖子后，只需使用 jupyter lab stop。例如，如果服务器在 8888 上运行，只需执行

```
jupyter lab stop 8888 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-02-23T07:44:09.260

在浏览器会话中，您也可以转到`Kernel`然后单击`Restart and Clear Output`。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-07-12T06:01:50.287

我从 2018 年 2 月 13 日发布的 Jupyter/IPython Notebook 快速入门指南文档中复制粘贴。 [http://jupyter-notebook-beginner-guide.readthedocs.io/en/latest/execute.html](http://jupyter-notebook-beginner-guide.readthedocs.io/en/latest/execute.html)

1.3.3 关闭笔记本：内核关闭 当笔记本打开时，它的“计算引擎”（称为内核）会自动启动。关闭笔记本浏览器选项卡不会关闭内核，而是内核将继续运行，直到显式关闭。要关闭内核，请转到相关的笔记本并单击菜单 File -> Close and Halt。或者，Notebook Dashboard 有一个名为 Running 的选项卡，它显示所有正在运行的 notebook（即内核）并允许关闭它们（通过单击 Shutdown 按钮）。

**摘要：首先关闭并停止正在运行的笔记本。**

1.3.2 关闭 Jupyter Notebook App 关闭浏览器（或选项卡）不会关闭 Jupyter Notebook App。要完全关闭它，您需要关闭关联的终端。更详细地说，Jupyter Notebook App 是一个服务器，它显示在您的浏览器中的默认地址 ( [http://localhost:8888](http://localhost:8888) )。关闭浏览器不会关闭服务器。您可以重新打开之前的地址，Jupyter Notebook App 将重新显示。您可以运行 Jupyter Notebook App 的多个副本，它们将显示在类似的地址（只有“：”后面的数字，即端口，将随着每个新副本递增）。由于使用单个 Jupyter Notebook App 已经可以打开许多笔记本，因此我们不建议运行多个 Jupyter Notebook App 副本。

**摘要：其次，退出您启动 Jupyter 的终端。**

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-05-31T20:50:22.290

第 1 步 - 在 shell 上只需执行 control+z (control+c) 第 2 步 _ 关闭 Web 浏览器

# c# - WCF 中的并发管理

> ID：10162708
> 
> 赞同：2
> 
> 时间：2012-04-15T14:04:13.983
> 
> 标签：c#, wcf, web-services

我已经实现了一个相当简单的 wcf 服务，它处理从我的客户端到服务器的文件传输问题是当客户端发送文件请求时。所有带宽都分配给该单个客户端，其他客户端必须等到请求的文件传输完成。所以我的问题是如何让服务更高效，让用户共享带宽

```
[ServiceBehavior(IncludeExceptionDetailInFaults = true, InstanceContextMode =InstanceContextMode.PerCall,
    ConcurrencyMode=ConcurrencyMode.Multiple)] 
```

我将 InstanceContextMode 属性设置为 PerCall 但这并没有成功

更新：这个[项目](http://www.codeproject.com/Articles/33825/WCF-TCP-based-File-Server)类似于我的 [http://www.codeproject.com/Articles/33825/WCF-TCP-based-File-Server](http://www.codeproject.com/Articles/33825/WCF-TCP-based-File-Server)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T14:50:51.387

WCF 没有适当的负载平衡，您必须自己开发一个。如果您正在传输文件，假设下载，您应该一次发送数据包而不是整个文件。执行此操作时，向进程添加“延迟/睡眠”以限制服务器在每个时间窗口发送的字节数，这将为其他请求腾出空间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-15T18:33:20.877

是否希望通过 WCF 端点提供文件是值得怀疑的。反对这样做的原因几乎正是您遇到的问题。它一次适用于几个客户端 - 但横向扩展需要在负载均衡器后面托管新的服务实例。

值得考虑使用某种存储服务托管您的文件，并让您的 WCF 服务简单地返回文件的链接或句柄。然后可以离线检索文件。Microsoft 已为此目的创建了[Azure Blob 存储。](http://www.windowsazure.com/en-us/develop/net/how-to-guides/blob-storage/)

欣赏这并没有解决您最初的问题，并了解您的要求范围可能无法容纳大量的返工。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T21:01:10.260

如果要传输大文件，另一种选择是使用分块通道。示例：[MSDN](http://msdn.microsoft.com/en-us/library/aa717050.aspx)、[codeplex](http://archive.msdn.microsoft.com/WCFResources/Release/ProjectReleases.aspx?ReleaseId=1546)。

虽然我同意@hugh 的立场。

# javascript - 复选框 javascript

> ID：10162709
> 
> 赞同：1
> 
> 时间：2012-04-15T14:04:17.693
> 
> 标签：javascript, validation, checkbox

有两种选择；英语或非英语。当您不选择其中任何一个或同时选择两者时，它应该给出错误但它没有给出。你能帮忙吗？谢谢。ps：即使我将其设置为条款和条件的复选框，警报也不起作用。

JavaScript

```
function onFormSubmit(form_element) {

        if (form_element.click.checked == false)
                {
                alert("Please check language");
                return false;
                }
    return true;
}

HTML

<form onsubmit="return onFormSubmit(this)">
        Language: <input type="checkbox" name="click" value="english">english
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T14:10:46.763

条件应该...

```
if ((form_element.click_1.checked == true && form_element.click_2.checked == true) || (form_element.click_1.checked == false && form_element.click_2.checked == false)) 
```

**编辑**

这是我用的。

```
<script>
function onFormSubmit(form_element) {

        if ((form_element.click_1.checked == true && form_element.click_2.checked == true) || (form_element.click_1.checked == false && form_element.click_2.checked == false))
                {
                alert("Please check language");
                return false;
                }
    return true;
}
</script>

<form onsubmit="return onFormSubmit(this)">
        Language: <input type="checkbox" name="click_1" value="english">english
                  <input type="checkbox" name="click_2" value="non english">non english</p>
<input type="submit">
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T14:20:47.570

问题是“onFormSubmit(this)”——当事件被调用时，“this”不会引用表单。如果您从文档中查找表单，它将正常工作。

```
<!doctype html>
<html>
<head>
<script type="text/javascript">
function validateForm() {
        var form = document.getElementById("myForm");
        if (!form.language.checked) {
                alert("Please check language");
                return false;
        }
        return true;
}
</script>
</head>
<body>
<form id="myForm" onsubmit="return validateForm()">
        Language: <input type="checkbox" name="language">English</input><br />
        <input type="submit" />
</form>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T14:22:51.743

```
<form onsubmit="return onFormSubmit(this)">
        Language: <input type="checkbox" name="click_1" value="english">english
                  <input type="checkbox" name="click_2" value="non english">non english</p>
        <input type="submit" />
</form>
<script type="text/javascript">
function onFormSubmit(form_element) {
  if ((form_element.click_1.checked == true && form_element.click_2.checked == true)) {
      alert("Please check only one choice!");
      return false;
  } else if ((form_element.click_1.checked == false && form_element.click_2.checked == false)) {
      alert("Please check your choice!");
      return false;
    }
    return true;
}
</script>
​ 
```

[http://jsfiddle.net/ocanal/3AWUp/](http://jsfiddle.net/ocanal/3AWUp/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T14:23:32.747

我在每个元素的 HTML 和 id 中添加了一个提交按钮

HTML

```
<form id="myForm">
        Language: <input id="english" type="checkbox" name="click_1" value="english">english
                  <input id="nonEnglish" type="checkbox" name="click_2" value="non english">non english</p>
<button type="submit">Submit</button>
</form> 
```

我将一个函数附加到执行验证的 onsubmit 事件。Javascript

```
document.getElementById("myForm").onsubmit =
function () {
        if ((document.getElementById("english").checked == false && document.getElementById("nonEnglish").checked == false) || (document.getElementById("english").checked == true && document.getElementById("nonEnglish").checked == true))
                {
                alert("Please check language");
                return false;
                }
    return true;
} 
```

演示：http: [//jsfiddle.net/j3J4E/](http://jsfiddle.net/j3J4E/)

# feed - 关于 Googles PubSubHubbub 的缺点

> ID：10162713
> 
> 赞同：0
> 
> 时间：2012-04-15T14:04:25.510
> 
> 标签：feed, polling, rss-reader, atom-feed, websub

我正在阅读一篇题为“通用提要类型的优化 Web 提要聚合方法”的论文，并讨论了谷歌的 PubSubHubbub 协议，该论文指出了它的缺点，例如

> 此外，还有一些补丁系统，例如 pubsubhubbub (Google 2010)，它可以被视为提要阅读器和服务器之间的调节器。所有这些解决方案只有在客户端和服务器都支持扩展时才有效，这种情况很少见。例如，Pubsubhubbub 仅受我们数据集中 2% 的提要支持。

我从来没有真正与这个协议进行过交互，它是否需要客户端（订阅者）在他们的系统上安装某种软件，比如客户端（订阅者）需要订阅源侦听器来获取订阅源（这就是上面的意思）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T02:57:42.140

我不确定他们从哪里得出了 2% 的数字，但这可能是不正确的。例如，**所有主要的博客平台都**支持 PubSubHubbub。许多新闻媒体（HuffPo、Gawker、Foxnews、ABCLocal...）也支持该协议。许多其他服务，例如 Craigslist、Getglue（甚至 StackOverflow）。许多其他服务，如 Github 或 Instagram 确实支持 JSON 资源的类似 PubSubHubbub 的 API，即使这超出了当前 (0.3) 规范。名单还在继续。

现在就复杂性而言，要获得巨大的利益真的并不难。“客户端”（从技术上讲，这些是 Web 服务器）需要在防火墙外*可见、可访问。*对于发布者来说，这更容易，因为他们只需要 ping（一个简单的 HTTP POST 请求）他们之前选择的集线器。

# google-app-engine - GAE 任务和执行率

> ID：10162715
> 
> 赞同：0
> 
> 时间：2012-04-15T14:04:30.923
> 
> 标签：google-app-engine, task-queue

无论我设置什么 rate 和 bucket_size 我总是看到只有一两个任务同时运行。有谁知道可能是什么原因？

我的队列配置是：

*   名称：MyQueue 速率：30/s bucket_size：50

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T23:47:21.000

请注意，文档中提到

> 为确保任务队列系统不会使您的应用程序不堪重负，它可能会限制发送请求的速率。这种受限制的速率称为强制速率。当您的应用程序返回 503 HTTP 响应代码，或者没有实例能够在较长时间内执行请求时，强制速率可能会降低。

在这种情况下，管理控制台将显示低于您请求的 30/s 的强制速率。

# php - 输出对象 HTMLLIElement 而不是期望值

> ID：10162718
> 
> 赞同：-3
> 
> 时间：2012-04-15T14:05:06.263
> 
> 标签：php, javascript

嘿，我在传递我的 php 代码的 Javascript-PHP 变量中有问题：

`<li id="' . $todo1 . '" class="items">' . $todo1 . '<button onclick="ajaxdelete(' . $todo1 . ')">Delete</button></li>`

继承人的javascript函数

```
 function ajaxdelete(x){
var hr = new XMLHttpRequest();
var url = "ajaxtododelete.php";
var vars = "todo="+x;
hr.open("POST", url, true);

hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
hr.onreadystatechange = function() {
if(hr.readyState == 4 && hr.status == 200) {
var return_data = hr.responseText;
document.getElementById("status").innerHTML = return_data;
}
 }
 hr.send(vars); // Actually execute the request

} 
```

还有我的 ajax 文件：

```
<?php
session_start();
include_once "connect_to_mysql.php";
$todo = $_POST['todo'];
print "$todo";

$sql = mysql_query("DELETE FROM todo WHERE todo='$todo'");
?> 
```

因此，它不是输出“$todo1”的值（这是我想要的），而是输出： object HTMLLIElement.Any way around this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T14:13:19.877

首先，您的应用程序中有一个用于 SQL 注入的主要漏洞。其次，您需要引用标识符，以便在函数调用中传递 id 的值，而不是对元素本身的引用。第三，您可能应该为此使用一个框架并以不显眼的方式应用处理程序。

```
'<li id="' . $todo1 . '" class="items">' . $todo1 . '<button onclick="ajaxdelete(\'' . $todo1 . '\')">Delete</button></li>' 
```

更好（使用 jQuery）

```
'<li id="' . $todo1 . '" class="items">' . $todo1 . '<button>Delete</button></li>'

<script type="text/javascript">
     $(function() {
           $('.items').on('click', function() {
               var $li = $(this).closest('li');
                   id = $li.attr('id');
               $.post( "ajaxtodelete.php", { "todo" : id }, function() {
                       $li.remove();
               });
           });
     });
</script> 
```

并修复您的 PHP 以使用参数化查询而不是字符串连接，以防有人决定使用浏览器调试器修改 id 并将 id 更改为 SQL 命令，该命令将删除您的整个数据库 - 或检索其内容用于更邪恶的目的.

# python - 如何在上传视频之前检测视频的文件大小？

> ID：10162725
> 
> 赞同：0
> 
> 时间：2012-04-15T14:07:02.583
> 
> 标签：python, django, django-models, django-forms, django-1.3

[我最近](https://stackoverflow.com/questions/9960099/how-to-configure-django-uploadify-for-videos-upload-only)一直在问这个问题。

我创建了我的上传表单

**模型.py**

```
from django.db import models
from app.extra import ContentTypeRestrictedFileField

class upload(models.Model):
    """ upload """
    name = models.CharField(max_length=100)
    description = models.CharField(max_length=250)
    file = ContentTypeRestrictedFileField(
        upload_to='/media/videos,'
        content_types=['video/avi', 'video/mp4', 'video/3gp', 'video/wmp', 'video/flv', 'video/mov'],
        max_upload_size=104857600
    )
    created = models.DateTimeField('created', auto_now_add=True)
    modified = models.DateTimeField('modified', auto_now=True)

    def __unicode__(self):
        return self.name 
```

**表格.py**

```
from django.db.models import FileField
from django.forms import forms
from django.template.defaultfilters import filesizeformat
from django.utils.translation import ugettext_lazy as _

class ContentTypeRestrictedFileField(FileField):
    """
    Same as FileField, but you can specify:
        * content_types - list containing allowed content_types. Example: ['application/pdf', 'image/jpeg']
        * max_upload_size - a number indicating the maximum file size allowed for upload.
            2.5MB - 2621440
            5MB - 5242880
            10MB - 10485760
            20MB - 20971520
            50MB - 5242880
            100MB 104857600
            250MB - 214958080
            500MB - 429916160
    """
    def __init__(self, content_types=None,max_upload_size=104857600, **kwargs):
        self.content_types = kwargs.pop('video/avi', 'video/mp4', 'video/3gp', 'video/wmp', 'video/flv', 'video/mov')
        self.max_upload_size = max_upload_size

        super(ContentTypeRestrictedFileField, self).__init__(**kwargs)

    def clean(self, *args, **kwargs):        
        data = super(ContentTypeRestrictedFileField, self).clean(*args, **kwargs)

        file = data.file
        try:
            content_type = file.content_type
            if content_type in self.content_types:
                if file._size > self.max_upload_size:
                    raise forms.ValidationError(_('Please keep filesize under %s. Current filesize %s') % (filesizeformat(self.max_upload_size), filesizeformat(file._size)))
            else:
                raise forms.ValidationError(_('Filetype not supported.'))
        except AttributeError:
            pass        

        return data

        from south.modelsinspector import add_introspection_rules
        add_introspection_rules([], ["^app\.extra\.ContentTypeRestrictedFileField"]) 
```

并添加这一行是**settings.py**

```
FILE_UPLOAD_MAX_MEMORY_SIZE = 157286400 # 157286400 bytes = 150 MB 
```

我被告知要使用[这个片段](http://djangosnippets.org/snippets/977/)，我找到[了这个片段](http://djangosnippets.org/snippets/2206/)

但是有一个我没有看到的问题，一个 djangosnippets 用户说

```
If you're ok with letting people use up all your bandwidth for uploading 1GB 
files to your servers just to delete them as soon as the upload finishes, 
sure it's a great solution. 
```

看到[这个问题](https://stackoverflow.com/questions/674651/uploading-files-past-asp-net-request-length-limit/679427#679427)。这个问题是关于asp.net的，我用的是django，那么在你上传视频之前如何在django中检测视频的文件大小

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T14:13:13.347

你需要在它到达 Django 之前切断 HTTP 上传，你通常在你的前端 Web 服务器上执行此操作，它可能是 Apache、Nginx 或任何东西，所以这个问题不是 Django 特定的。

然而最终的解决方案是使用 HTML5 Javascript File API 在客户端读取文件大小并防止用户在`<form>`选择太大文件时点击提交按钮：

[https://developer.mozilla.org/en/DOM/File.size](https://developer.mozilla.org/en/DOM/File.size)

因为旧的浏览器不支持这两种方法，你仍然需要回退 webserver cut 并假设不是在每个浏览器上都执行 Javascript 验证。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-15T14:16:33.250

**在上传之前**检测视频文件大小的唯一**方法**是使用**客户端编程**，您必须在 Silverlight 中编写上传管理器，或者作为 Java Applet（或 Flash），或者使用一些 ActiveX o 自定义浏览器特定 API

# ios - 将数据写入设备上的文件并从设备（iPhone）中读取

> ID：10162730
> 
> 赞同：3
> 
> 时间：2012-04-15T14:07:38.063
> 
> 标签：ios, iphone, nsfilehandle

在您的设备上以编程方式创建 file.txt 的最简单方法是什么，然后在您的应用程序中写下一些数据，然后将这些数据发送到您的计算机？

我猜最后一部分可以通过编程方式完成，就像在计算机上使用某些程序从设备获取数据一样。

直到现在我正在做这样的事情

```
NSFileHandle *infile;
NSFileManager *fm;
fm=[NSFileManager defaultManager];
NSString *strings=[@"/Downloads/file.txt" stringByExpandingTildeInPath];

if (![fm fileExistsAtPath:strings]) {
 [fm createFileAtPath:strings contents:nil attributes:nil];
 infile=[NSFileHandle fileHandleForWritingAtPath:strings];
 [infile writeData:[[NSString stringWithFormat:@"lalala japierdole\n", [NSDate date]] dataUsingEncoding:NSUTF8StringEncoding]];
}else {
 infile=[NSFileHandle fileHandleForWritingAtPath:strings];
 [infile seekToEndOfFile];
}
[infile writeData:[[NSString stringWithFormat:@"lulukukuioio.\n", [NSDate date]] dataUsingEncoding:NSUTF8StringEncoding]]; 
```

如果文件不存在，这只是创建文件并写下一些数据，但路径有问题。当我在我的设备上尝试使用模拟器时，这段代码运行良好，然后我真的不知道我是否创建了文件以及以后如何从它接收。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T14:23:40.707

用于将原始数据读取和写入文件的最简单 API：

```
NSData *data = [NSData dataWithContentsOfFile:path];
[data writeToFile:path atomically:NO]; 
```

您遇到问题的原因是您的路径在设备上无效。尝试这个：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
if ( paths.count > 0 )
{
  NSString *path = [[paths objectAtIndex:0] stringByAppendingPathComponent:@"file.txt"];
  NSData *data = [NSData dataWithContentsOfFile:path];
  ...
} 
```

# javascript - OnClick 函数不适用于 HTML 按钮

> ID：10162732
> 
> 赞同：1
> 
> 时间：2012-04-15T14:07:57.430
> 
> 标签：javascript, html

我有两个按钮，用于在单击时激活我的 JavaScript 函数，但它们似乎不起作用。但是，当我将 JavaScript 函数内容移到函数之外时，它们可以正常工作。所以按钮肯定是问题所在。

JavaScript：

```
$(document).ready(function() 
{

function recordjourney() 
{
var journey = JSON.parse(localStorage.getItem('journey'))||[];
journey.push(location.protocol + '//' + location.host + location.pathname);

localStorage.setItem('journey', JSON.stringify(journey));

document.write(journey);
}

function resetjourney() 
{
localStorage.clear()
}

}); 
```

HTML：

```
<p><button name="record" type="button" onclick="recordjourney()">Record Journey</button</p>

<p><button name="reset" type="button" onclick="resetjourney()">Reset Journey</button></p> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T14:14:03.947

按钮不是问题，您有一个范围问题，因为您调用的函数与按钮不在同一级别。

您可以通过绑定到就绪调用中的按钮来解决此问题并使代码更简洁，如下所示

```
$(document).ready(function() {
   $('[name="record"]').click(recordjourney);
   $('[name="reset"]').click(resetjourney);    

});

function recordjourney() {
    var journey = JSON.parse(localStorage.getItem('journey')) || [];
    journey.push(location.protocol + '//' + location.host + location.pathname);

    localStorage.setItem('journey', JSON.stringify(journey));

    document.write(journey);
}

function resetjourney() {
    localStorage.clear()
}​

<p><button name="record" type="button">Record Journey</button</p>

<p><button name="reset" type="button">Reset Journey</button></p>​ 
```

在这里小提琴 - [http://jsfiddle.net/7eYNn/](http://jsfiddle.net/7eYNn/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T14:11:47.107

初始化你的函数`$(document).ready()`。

```
$(document).ready(function() 
{

});

function resetjourney() 
{
   localStorage.clear()
}

function recordjourney() 
{
  var journey = JSON.parse(localStorage.getItem('journey'))||[];
  journey.push(location.protocol + '//' + location.host + location.pathname);

  localStorage.setItem('journey', JSON.stringify(journey));

  document.write(journey);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T14:13:49.650

是的，没错。如果你在函数内部定义一个函数，它将是该函数私有的。您需要创建一个全局变量

```
var recordjourney;
$(document).ready(function(){
 ...
recordjourney = {
  var journey =
 ... etc 
```

虽然，当然，鉴于您使用的是 JQuery，我会这样做

```
$(document).ready(function(){
 ...
    $( 'button[name=record]' ).bind( function(){ 
       //put your function here 
    }) 
```

并从按钮标签中删除丑陋的 onclick="recordjourney。

# c - atoi 是一个标准函数。但 itoa 不是。为什么？

> ID：10162733
> 
> 赞同：11
> 
> 时间：2012-04-15T14:07:57.923
> 
> 标签：c, function, posix, standards, itoa

为什么会有这种区别？我遇到了可怕的问题，假设我最终将自定义版本`itoa`与不同的原型链接起来，从而产生了一些疯狂的错误。`stdlib.h``itoa`

那么，为什么不是`itoa`标准功能呢？它出什么问题了？为什么标准偏向其孪生兄弟`atoi`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T14:21:34.200

No`itoa`从未被标准化，因此要将其添加到标准中，您需要一个令人信服的理由和一个良好的界面来添加它。

我见过的大多数`itoa`接口要么使用具有可重入性和生命周期问题的静态缓冲区，要么分配调用者需要释放的动态缓冲区，要么要求用户提供一个缓冲区，这使得接口不比`sprintf`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T14:26:09.730

“itoa”函数必须返回一个字符串。由于字符串不是一流的对象，调用者必须传递一个缓冲区 + 长度，并且该函数必须有某种方式来指示它是否已用完空间。当你走到那一步时，你已经创建了与 sprintf 足够相似的东西，因此不值得复制代码/功能。“atoi”函数的存在是因为它比完整的“scanf”调用更简单（并且可以说更安全）。“itoa”功能不会有足够的不同而值得。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-30T20:44:31.477

该`itoa`功能不是标准的，原因可能是它没有一致的定义。不同的编译器和库供应商已经引入了不同的版本，可能是作为对`atoi`.

如果一些非标准功能被供应商广泛提供，标准的工作就是对其进行*编码*：基本上是在标准中添加对现有功能的描述。如果函数具有或多或少一致的参数约定和行为，这是可能的。

因为已经有多种风格，`itoa`所以不能将这样的函数添加到 ISO C 中。无论描述什么行为都会与某些实现不一致。

`itoa`以如下形式存在：

```
void itoa(int n, char *s); /* Given in _The C Programming Language_, 1st ed. (K&R1) */

void itoa(int input, void (*subr)(char)); /* Ancient Unix library */

void itoa(int n, char *buf, int radix);
char *itoa(int in, char *buf, int radix); 
```

Microsoft 在其 Visual C 运行时库中以更改的名称提供它：`_itoa`.

不仅 C 实现历史上在不同的定义下提供了它，C*程序*还为自己提供了一个名为`itoa`function 的函数，这是可能发生冲突的另一个来源。

**基本上，`itoa`就标准化作为外部名称或宏而言，标识符是“放射性的”。**如果这样的功能是标准化的，它必须使用不同的名称。

# android - eclipse中的android aapt

> ID：10162734
> 
> 赞同：-1
> 
> 时间：2012-04-15T14:08:05.837
> 
> 标签：android, eclipse, adt, android-library, aapt

我在几个线程中看到了一些关于这个问题的信息，但不适合我的情况。
我有一个 android 应用程序，我现在需要自定义一些资源和代码。
目前我在使用 android 库时遇到了一些问题，所以我有一个 ant 构建，它将基础资源和资产以及特定资源复制到我的 android 项目中，然后根据需要更改清单中的包名称。我所有的活动都有恒定的路径并且与包名无关，所以这不是问题。
问题在于 aapt 中生成的 gen 文件夹中的 R 对象。aapt 确实有一个参数不使用 android manifest 包，而是另一个，但它只有在我使用 ant 构建文件时才可用，ADT 的参数在插件中是硬编码的。

有没有人找到解决方案？我的意思是我总是可以使用 ant 任务来更改所有 R 引用（导入），但它看起来很容易出错。除了不会在 Windows 上自定义 aapt 的包装脚本之外的任何方式？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-16T13:15:49.373

再次......我的问题没有答案，我会开始认为你们对我有什么不满。简而言之，我看到没有解决方案，我可以做的事情：

1.  使用正则表达式所有导入 com....R 的 ant 任务；到新包 - 缺点：即使是正则表达式的最小问题，我也可能在代码中弄乱一些只会在运行时显示的东西。
2.  在 aapt.exe 或 aapt 二进制文件周围使用包装脚本添加 --custom-package my.package.name 即使我更改清单包也会保留原始 R 文件，对于 ant 和 eclipse - 缺点，一些：1\. on windows 这需要是一个 exec 文件，因为 eclipse 寻找一个我花了一段时间在 C 中正确构建一个，在 linux\mac 这可能是任何类型的脚本，所以我们需要它的 2 个版本\ 2\. 每次更新到我们需要重新安装包装器的 SDK。
3.  编辑 ant 任务 jar 代码以允许 --custom-package 并编辑 adt 源代码以在菜单自定义参数中启用 - 这是应该包含的很棒的功能！但缺点是在代码被接受（如果被接受）并添加到 SDK 本身之前，我需要在每个新 SDK 出现时合并我的更改，与 #2 不同，这要困难得多。

我选择了选项#2，现在我有 Windows 的可执行文件，一旦我在那里，我将检查 Linux 和 mac 的选项（可能是简单的 bash 脚本），我将创建一个 python 安装脚本并将其全部保存在svn 连同我的构建项目。

祝大家好运......

# python - 当 models.py 代码有错误时，“python manage.py sql polls”或“python manage.py syncdb”是否应该返回错误？

> ID：10162743
> 
> 赞同：0
> 
> 时间：2012-04-15T14:08:59.477
> 
> 标签：python, django, django-models

我正在关注[Django 教程](https://docs.djangoproject.com/en/1.4/intro/tutorial01/#activating-models)，当我开始运行“ [python manage.py sql polls](https://docs.djangoproject.com/en/1.4/intro/tutorial01/#activating-models) ”时，它没有打印任何输出。它没有打印任何错误，也没有打印预期的 SQL 语句。我认为因为“确切的输出会因您使用的数据库而异”所以我没问题，所以我继续。然后我运行了“python manage.py syncdb”，它没有给出任何错误。最终，我发现我有一个错误，因为我进入shell并尝试导入“民意调查”和“选择”并得到错误。我回去发现“民意调查/模型.py”中有一个错字并修复它。

**我的问题：**当 models.py 代码有错误时，“python manage.py sql polls”甚至“python manage.py syncdb”是否应该返回错误？

我昨天询问了 Django 用户列表，但还没有收到回复，所以我想我会在这里发帖。我正在使用 Django 1.4、Python 2.7.2、Amazon Linux。

# python - 解析维基百科列表并将结果存储到二维数组中

> ID：10162744
> 
> 赞同：2
> 
> 时间：2012-04-15T14:09:04.867
> 
> 标签：python, html, parsing, beautifulsoup

[这是](http://en.wikipedia.org/wiki/List_of_company_name_etymologies)我有兴趣解析的页面。解析后，我想将结果存储到二维数组中。任何人都可以请阐明我应该如何解决这个问题吗？这是我尝试使用 BeautifulSoup 的代码。`html`包含来自上述 url 的 html。

```
from bs4 import BeautifulSoup

soup = BeautifulSoup(html)
temp = soup.find_all('li')
#for x in temp :
#    print x.text

table = []
for x in temp :
    row = []
    index = x.text.find(' - ',0)
    row.append(x.text[0:index-1])
    row.append(x.text[index+3:])
    table.append(row)

for row in table :
    print row 
```

# delphi - 为什么不能在 64 位 Delphi 中获取嵌套本地函数的地址？

> ID：10162749
> 
> 赞同：17
> 
> 时间：2012-04-15T14:09:44.380
> 
> 标签：delphi, delegates, nested, delphi-xe2, 32bit-64bit

作为。自结束相关问题以来 - 下面添加了更多示例。

下面的简单代码（查找顶级 Ie 窗口并枚举其子窗口）适用于“32 位 Windows”目标平台。早期版本的 Delphi 也没有问题：

```
procedure TForm1.Button1Click(Sender: TObject);

  function EnumChildren(hwnd: HWND; lParam: LPARAM): BOOL; stdcall;
  const
    Server = 'Internet Explorer_Server';
  var
    ClassName: array[0..24] of Char;
  begin
    Assert(IsWindow(hwnd));            // <- Assertion fails with 64-bit
    GetClassName(hwnd, ClassName, Length(ClassName));
    Result := ClassName <> Server;
    if not Result then
      PUINT_PTR(lParam)^ := hwnd;
  end;

var
  Wnd, WndChild: HWND;
begin
  Wnd := FindWindow('IEFrame', nil); // top level IE
  if Wnd <> 0 then begin
    WndChild := 0;
    EnumChildWindows(Wnd, @EnumChildren, UINT_PTR(@WndChild));

    if WndChild <> 0 then
      ..    

end; 
```

我插入了一个`Assert`以指示在“64 位 Windows”目标平台上失败的地方。*如果我取消嵌套*回调，则代码没有问题。

我不确定随参数传递的错误值是垃圾还是由于一些错误放置的内存地址（调用约定？）。嵌套回调实际上是我一开始就不应该做的事情吗？或者这只是我必须忍受的缺陷？

**编辑：**
为了回应大卫的回答，同样的代码已经`EnumChildWindows`声明了一个类型化的回调。适用于 32 位：（

*编辑：以下内容并未真正测试 David 所说的内容，因为我仍然使用 '@' 运算符。它适用于运算符，但如果我删除它，它确实无法编译，除非我取消-嵌套回调）*

```
type
  TFNEnumChild = function(hwnd: HWND; lParam: LPARAM): Bool; stdcall;

function TypedEnumChildWindows(hWndParent: HWND; lpEnumFunc: TFNEnumChild;
    lParam: LPARAM): BOOL; stdcall; external user32 name 'EnumChildWindows';

procedure TForm1.Button1Click(Sender: TObject);

  function EnumChildren(hwnd: HWND; lParam: LPARAM): BOOL; stdcall;
  const
    Server = 'Internet Explorer_Server';
  var
    ClassName: array[0..24] of Char;
  begin
    Assert(IsWindow(hwnd));            // <- Assertion fails with 64-bit
    GetClassName(hwnd, ClassName, Length(ClassName));
    Result := ClassName <> Server;
    if not Result then
      PUINT_PTR(lParam)^ := hwnd;
  end;

var
  Wnd, WndChild: HWND;
begin
  Wnd := FindWindow('IEFrame', nil); // top level IE
  if Wnd <> 0 then begin
    WndChild := 0;
    TypedEnumChildWindows(Wnd, @EnumChildren, UINT_PTR(@WndChild));

    if WndChild <> 0 then
      ..

end; 
```

* * *

实际上，此限制并非特定于 Windows API 回调，但是当将该函数的地址放入变量`procedural type`并将其传递时也会发生相同的问题，例如，作为自定义比较器传递给`TList.Sort`.

[http://docwiki.embarcadero.com/RADStudio/Rio/en/Procedural_Types](http://docwiki.embarcadero.com/RADStudio/Rio/en/Procedural_Types)

```
procedure TForm2.btn1Click(Sender: TObject);
var s : TStringList;

  function compare(s : TStringList; i1, i2 : integer) : integer;
  begin
    result := CompareText(s[i1], s[i2]);
  end;

begin
  s := TStringList.Create;
  try
    s.add('s1');
    s.add('s2');
    s.add('s3');
    s.CustomSort(@compare);
  finally
    s.free;
  end;
end; 
```

它在编译为 32 位时按预期工作，但`Access Violation`在为 Win64 编译时失败。对于函数中的 64 位版本`compare`，`s = nil` 并且`i2`= 一些随机值；

即使在 Win64 目标中，它也可以按预期工作，如果在`compare`函数之外提取`btn1Click`函数。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-15T14:25:20.433

该语言从未正式支持此技巧，并且由于 32 位编译器的实现细节，您迄今为止一直没有使用它。[文档](http://docwiki.embarcadero.com/RADStudio/en/Procedural_Types#Method_Pointers)很清楚：

> 嵌套过程和函数（在其他例程中声明的例程）不能用作过程值。

如果我没记错的话，一个额外的隐藏参数被传递给嵌套函数，并带有指向封闭堆栈帧的指针。如果没有对封闭环境进行引用，则在 32 位代码中将省略此项。在 64 位代码中，总是传递额外的参数。

当然，问题的很大一部分是 Windows 单元对其回调参数使用了无类型的过程类型。如果使用了类型化的过程，编译器可能会拒绝您的代码。事实上，我认为这是你使用的伎俩从不合法的理由。即使在 32 位编译器中，使用类型化回调也永远不能使用嵌套过程。

无论如何，底线是您不能将嵌套函数作为参数传递给 64 位编译器中的另一个函数。

# php - redbeanphp中的多个where子句

> ID：10162752
> 
> 赞同：2
> 
> 时间：2012-04-15T14:10:00.713
> 
> 标签：php, redbean

我正在使用 readbeanphp 作为我的 php 项目的 ORM。我正在尝试加载一个带有额外 where 子句的 bean。但我不知道该怎么做。

通常我会得到一个像这样的“bean”：

```
$book = R::load('book', $id); 
```

这基本上就像说：

```
SELECT * FROM book WHERE id = '$id' 
```

但我需要在 where 子句中添加另一个条件：

```
SELECT * FROM book WHERE id = '$id' AND active = 1 
```

我怎么能用 redbeanphp 做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T14:45:09.753

`R::find()`并且`R::findOne()`是您正在寻找的：

```
$beans=R::find("books","active=? AND id=?",array(1,1)); 
```

或者，如果您只想要一个 bean：

```
$bean=R::findOne("books","active=? AND id=?",array(1,1)); 
```

`R::find()`将返回多个 bean，而`R::findOne()`只返回一个 bean。

从技术上讲，您可以使用`R::load()`但必须在`active`加载 bean 后使用 PHP 来检查字段以测试它是否有效：

```
$bean=R::load("book",$id);
if($bean->active==1){//valid
   //do stuff
}else{//not valid
   //return error
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T14:13:59.860

`RedBean_Facade::load`仅用于主键。

如果您想通过复杂的查询获取 bean，请使用

`R::find`像，

```
$needles = R::find('needle',' haystack = :haystack 
                                  ORDER BY :sortorder', 
    array( ':sortorder'=>$sortorder, ':haystack'=>$haystack )); 
```

阅读更多关于 R::find

[http://www.redbeanphp.com/manual/finding_beans](http://www.redbeanphp.com/manual/finding_beans)

尝试使用 getAll 直接使用参数编写查询

```
R::getAll( 'select * from book where 
id= :id AND active = :act', 
array(':id'=>$id,':act' => 1) ); 
```

阅读有关查询的更多信息，

[http://www.redbeanphp.com/manual/queries](http://www.redbeanphp.com/manual/queries)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T21:18:20.350

这些答案很好，但可以简化。你应该使用的是：

```
$book = R::find('books', id =:id AND active =:active, array('id' => $id, 'active' => 1)); 
```

然后你可以做你的标准 foreach 循环遍历返回的数据数组。

# php - 创建一个 GZipped tar 文件并通过 PHP 动态流式传输它？

> ID：10162759
> 
> 赞同：6
> 
> 时间：2012-04-15T14:10:42.017
> 
> 标签：php, zip, archive, tar, zlib

是否有像 ZipArchive 之类的简单界面用于 tar.gz 存档，它允许我将存档流式传输到客户端而不是将其保存在服务器上？如果是这样，有人可以告诉我怎么做吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T14:26:39.093

您可以使用 passthru() 或 exec() 指示 tar 命令将 tar.gz 文件发送到标准输出。例如

```
tar cfz - name1 name2 ... 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-15T14:28:47.813

此链接可能对您有用。您能否更具体地说明不希望文件暂时在文件系统上？

[http://www.clker.com/blog/2008/03/27/creating-a-tar-gz-on-the-fly-using-php/](http://www.clker.com/blog/2008/03/27/creating-a-tar-gz-on-the-fly-using-php/)

# delphi - （delphi 应用程序）发现错误的位置

> ID：10162764
> 
> 赞同：1
> 
> 时间：2012-04-15T14:11:14.423
> 
> 标签：delphi, google-maps-api-3, delphi-xe2

我有一对坐标：

```
GpsLatitude     GpsLongitude
32.012919       34.547592,
32.012798       34.54763,
32.012827       34.547584,
32.012814       34.547608,
32.01273        34.54765,
32.012868       34.547631,
32.012834       34.547577, 
```

我已经在delphi应用程序的谷歌地图上显示了它。

我在[这里](http://theroadtodelphi.wordpress.com/2010/08/07/using-the-google-maps-api-v3-from-delphi-part-i-basic-functionality/)找到了一个例子，一个delphi代码示例，它可以工作。但是当我尝试将它与我的坐标一起使用时，它指向错误的位置，但是当我在浏览器中打开它时，就像这样

> “32 01.2834,34 54.7577”

它工作得很好，不幸的是它在delphi中不起作用。

有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T16:50:36.713

如果您查看[文章](http://theroadtodelphi.wordpress.com/2010/08/07/using-the-google-maps-api-v3-from-delphi-part-i-basic-functionality/)`GotoLatLng`中使用的 javascript 函数，

```
function GotoLatLng(Lat, Lang) { 
  var latlng = new google.maps.LatLng(Lat,Lang);
  map.setCenter(latlng);
  var marker = new google.maps.Marker({
  position: latlng, 
  map: map,
  title:Lat+","+Lang
  });
  } 
```

您可以看到对 [google.maps.LatLng()](https://developers.google.com/maps/documentation/javascript/reference#LatLng)函数的调用，这需要以十进制格式给出两个数字。您正在使用这样的值`32 01.2919, 34 54.7592`，它采用度和分格式，因此**必须将该格式转换为十进制**，然后才能传递给 javascript 函数。现在，该值在谷歌地图页面中起作用的原因是该页面在内部解析了作为参数传递的字符串并返回标记集合作为结果。

# .net - cmd.executeNonQuery() 更新

> ID：10162765
> 
> 赞同：1
> 
> 时间：2012-04-15T14:11:41.873
> 
> 标签：.net, vb.net, ms-access

我有一个程序，用户可以通过在文本框中输入旧密码并在单独的文本框中输入新密码来更新密码。

然后更新查询使用新密码更新数据库。

```
Try
            If tbOldPassword.Text <> "" Then
                For Each Row In ds.Tables("sqlAddNewDetails").Rows
                    If Row.Item(0) = gblstrUserID Then
                        If Row.Item(1) = tbOldPassword.Text Then
                            If tbPassword.Text = tbRePassword.Text Then

                                'Updates the database
                                sqlUpdate = ("UPDATE Users SET Password = '" & tbPassword.Text & "' WHERE userID = " & Row.Item(0))
                                Dim cmd As New OleDbCommand(sqlUpdate, con)
                                cmd.ExecuteNonQuery()
                                MsgBox("Password successfully changed")
                            Else : MsgBox("The passwords are not the same")
                            End If
                        Else : MsgBox("Invalid old password")
                        End If
                    End If
                Next
            End If
        Catch ex As Exception
            MsgBox(ex.Message)
        End Try 
```

但是，每次代码到达 cmd.ExecuteNonQuery() 时，它都会抛出一个错误，指出更新查询中存在语法错误。但是，如果我在 Microsoft Access 中使用此查询，它可以正常工作，因此更新查询本身可以正确编写。有什么问题？

注意：我在同一个 Sub 例程中的另一段代码中使用 UPDATE 查询，它在那里工作。它与此查询有关。

再次注意：如果我将更新查询更改为 UPDATE Users SET EMAIL = '" & tbPassword.Text & "' WHERE userID = " & Row.Item(0)" 它可以工作。关于密码的一些东西会引发该错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T14:41:25.713

密码是一个关键字，所以用方括号括起来，如下所示，

`UPDATE Users SET [Password] =.....`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T14:21:00.410

我必须看到错误消息，直到我注意到两件事：

1 - con.Open() 不存在!!!，它可能没有打开 2 - 在查询中如果 UserId 是一个数字，那么查询字符串应该是： `"' WHERE userID = " & CStr(Row.Item(0))`

如果 UserID 是字符串，则查询字符串应为： `"' WHERE userID = '" & Row.Item(0) & "'"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T14:55:41.937

在执行发生之前，我可能会检查 sqlUpdate 变量包含的内容。它可能不包含您认为的内容。我会复制字符串值并将其粘贴到 SQL Server Management Studio 中，然后尝试直接运行它来验证它。

话虽如此，我**真的**不会使用字符串连接来编写这段代码。您正在向 SQL 注入攻击敞开大门。如果用户的密码中有单引号会发生什么？请改用 SQL 参数，如下所示：

```
sqlUpdate = "UPDATE Users SET Password = ? WHERE userID = ?"
cmd.Parameters.Add(tbPassword.Text)
cmd.Parameters.Add(Row.Item(0)) 
```

嗯...我也可能不会使用 OleDb。我会使用本机客户端。

当然，我必须链接到经典的[XKCD Bobby Tables](http://xkcd.com/327/)。

# cocoa-touch - 分别动画视图及其子视图

> ID：10162767
> 
> 赞同：0
> 
> 时间：2012-04-15T14:12:23.127
> 
> 标签：cocoa-touch, uiview, uiviewanimation, uianimation

我有一个`interface`包含 subview 的视图`touchWheel`。单击最小化按钮时，`interface`我想执行转换并将视图发送到屏幕的右下角。问题是我想“分离”`touchWheel`视图并将其与父视图分开发送到角落`interface`，紧随其后（实际上是淡出）。

当我尝试这个时，我遇到了一个问题。我的动画最初效果很好`touchWheel`，并根据需要发送到底角。什么时候`touchWheel`到它的目的地大约一半时，我制作动画`interface`以便它跟随`touchWheel`。

一旦`interface`开始动画，它似乎可以控制`touchWheel`和`touchWheel`改变路线。

由于它是其父视图，因此似乎`interface`仍然保留了控制权。`touchWheel`

```
- (void)hideInterfaceButtonClicked : (id) sender
{

    [[NSNotificationCenter defaultCenter] postNotificationName:@"RemoveGrey" object:self];

   //Remove Views & transform
   [touchWheel removeViews];
   interfaceHidden = YES;

      //Send Interface to corner

[UIView animateWithDuration:1.25
                  delay:0.0
                options:UIViewAnimationCurveEaseIn
             animations:^{
                 // Move to the right

                 CGAffineTransform translateInterface = CGAffineTransformMakeTranslation(437,200); 
                 // Scale
                 CGAffineTransform scale = CGAffineTransformMakeScale(0.135,0.135);   

                 // Apply them to the view
                 self.transform = CGAffineTransformConcat(scale, translateInterface);

                self.alpha = 0.0;

             } completion:^(BOOL finished) {
                 NSLog(@"Animation Has Stopped");
                 [[NSNotificationCenter defaultCenter] postNotificationName:@"hiddenInterfaceViewNeeded" object:self]; //after MoveView finishes

             }]; 

} 
```

对其他事物进行`touchWheel`子视图`interface`会产生其他问题，这会使事情进一步复杂化。

任何想法如何解决这个问题？非常感谢任何提示:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T10:50:59.667

您可以执行以下操作：

1.  移动`touchWheel`到`interface`的超级视图，使用它重新计算其框架，`convertRect:toView:`以便`touchWheel`看起来具有相同的窗口坐标。
2.  将两个视图动画化到它们的最终位置。
3.  在动画的完成块中，与第 1 步相反：制作`touchWheel`的子视图`interface`，再次重新计算其帧。

It doesn't seem too complicated, but there's a caveat: you may want to temporarily disable the maximize button (or whatever the appropriate control is) to prevent the maximize action during the animation. Otherwise, this approach will cause unpredictable results.

# jquery - 使用 ajax 的 .load 方法将数据传递到 php 页面只能由 $_REQUEST 方法使用

> ID：10162776
> 
> 赞同：0
> 
> 时间：2012-04-15T14:14:03.733
> 
> 标签：jquery, ajax

是否可以使用 $_POST 或 $_GET 而不是 $_REQUEST 将传递的数据处理到 php 页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T14:21:42.830

您可以使用[$.get()](http://api.jquery.com/jQuery.get/)获取 http get 请求，使用[$.post()](http://api.jquery.com/jQuery.post/)获取 http post 请求，并在服务器端使用 $_GET 处理 get 请求，使用 $_POST 处理 post 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T14:37:00.723

是的，有可能。
如果你做这样的事情：

```
$('#result').load('ajax/test.html?var1=somevar&var2=someothervar', function() {
  alert('Load was performed.');
}); 
```

您可以使用 检索它`$_GET[''];`。

如果你做这样的事情：

```
$.ajax({
    url:'/',
    data: {var1:"somevar", etc.}, // I'm not really sure about that syntax
    type:'POST', // note the type
    success:function(html){ alert(html) }
}); 
```

您可以使用 检索它`$_POST[''];`。

POST 和 GET 还有其他方法，这是我在 google 上找到的第一个方法；）您始终可以使用它来检索它，`$_REQUEST[''];`因为它会同时查找 POST 和 GET 数据，以防您还不知道。

# android - Listview 显示来自数据库的大量内容

> ID：10162779
> 
> 赞同：0
> 
> 时间：2012-04-15T14:14:13.400
> 
> 标签：android

我有一个包含很多项目的庞大数据库。所有文字。我可以使用适配器查询它并在 ListView 中显示它。由于数据库很大（超过 2000 个项目），因此最初显示列表需要很长时间。我想知道是否有一种方法可以一点一点地查询数据库并在列表视图中显示项目。由于屏幕上最多只会显示 15 个项目，因此查询整个数据库似乎没有意义。有人可以指点我如何继续这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T14:21:27.763

您可以使用 SQL`LIMIT`来限制从数据库中获取的行数：

这将显示来自数据库的前 5 个结果：

```
SELECT * FROM `your_table` LIMIT 0, 5 
```

要获得第二页的第 2 5 个结果，使用它，它将显示记录 6、7、8、9 和 10：

```
SELECT * FROM `your_table` LIMIT 5, 5 
```

# java - 从 PHP 脚本调用 Swing Java 应用程序

> ID：10162780
> 
> 赞同：1
> 
> 时间：2012-04-15T14:14:21.020
> 
> 标签：java, php, linux, swing, apache2

我需要从 Linux 中的 PHP 脚本调用 Swing Java 应用程序。Java应用程序使用swing但它的主框架是不可见的，所以在设置DISPLAY env之后。变量我能够从 tty2 运行它（从没有 x11 的终端）。问题是我不能从 PHP 脚本做同样的事情。我使用以下代码段：

```
$sys = system("export DISPLAY=:0.0", $output);
$sys = system("java -jar scheduler.jar -i7.txt -q2 -a6 -s -e ", $output); 
```

我在 /var/log/apache2/error.log 中得到以下信息：

```
 Exception in thread "main" java.awt.HeadlessException
at java.awt.GraphicsEnvironment.checkHeadless(GraphicsEnvironment.java:159)
at java.awt.Window.<init>(Window.java:432)
at java.awt.Frame.<init>(Frame.java:403)
at java.awt.Frame.<init>(Frame.java:368)
at javax.swing.JFrame.<init>(JFrame.java:158)
at net.sukharevd.cssw.scheduler.view.AppFrame.<init>(AppFrame.java:51)
at net.sukharevd.cssw.scheduler.Main.main(Main.java:11) 
```

我还尝试在 -Djava.awt.headless=true 之后添加参数`java`，但没有成功：

```
Exception in thread "main" java.awt.HeadlessException: 
No X11 DISPLAY variable was set, but this program performed an operation which requires it.
at java.awt.GraphicsEnvironment.checkHeadless(GraphicsEnvironment.java:159)
at java.awt.Window.<init>(Window.java:432)
at java.awt.Frame.<init>(Frame.java:403)
at java.awt.Frame.<init>(Frame.java:368)
at javax.swing.JFrame.<init>(JFrame.java:158)
at net.sukharevd.cssw.scheduler.view.AppFrame.<init>(AppFrame.java:51)
at net.sukharevd.cssw.scheduler.Main.main(Main.java:11) 
```

帮助我以正确的方式从 PHP 执行 Java 应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T08:43:20.457

好吧，事实是您得到 HeadlessException 意味着您正在无头环境中启动应用程序（例如，没有显示支持）。

所以添加“-Djava.awt.headless=true”也一样。

它甚至在文档中解释：http: [//docs.oracle.com/javase/6/docs/api/java/awt/HeadlessException.html](http://docs.oracle.com/javase/6/docs/api/java/awt/HeadlessException.html)

> **公共类 HeadlessException 扩展 UnsupportedOperationException**
> 
> 在不支持键盘、显示器或鼠标的环境中调用依赖于键盘、显示器或鼠标的代码时引发。

所以基本上你必须从应用程序代码中删除任何依赖于显示的代码（例如 JFrames 创建和其他类似的东西）。之后，您将能够正常执行它而不会出现 HeadlessException。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-20T10:00:48.623

不要将它安装在 tomcat 上，只需在 .jar 文件夹中执行 JavaBridge.jar，然后执行以下操作：

```
include("localhost:8080/Java.inc");
java_require(".");
$class = java("yourpackage.Class"); 
```

我成功打开了碧玉报告

# jpa - 在 jboss 运行时增强 OpenJPA 实体

> ID：10162783
> 
> 赞同：1
> 
> 时间：2012-04-15T14:14:51.000
> 
> 标签：jpa, spring-mvc, jboss, jboss7.x, openjpa

我无法在 Windows 笔记本电脑的 jboss AS 7.1.x 上运行我的 spring mvc+openjpa 应用程序。部署后，当我执行它时，它说 -

```
org.apache.openjpa.persistence.ArgumentException: Attempt to cast instance "com.caobusiness.selfcare.entity.DummyTable@1698b9" to PersistenceCapable failed.  Ensure that it has been enhanced. 
```

经过搜索，我发现打开的 jpa 实体需要在构建时或运行时进行增强。我试图在运行时使用 javaagent 增强实体，但它失败了。

我的 jboss Standalone.conf 看起来像

```
#
# Specify options to pass to the Java VM.
#
if [ "x$JAVA_OPTS" = "x" ]; then
   JAVA_OPTS="-Xms64m -Xmx512m -XX:MaxPermSize=256m -Djava.net.preferIPv4Stack=true -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000"
   JAVA_OPTS="$JAVA_OPTS -Djboss.modules.system.pkgs=$JBOSS_MODULES_SYSTEM_PKGS -Djava.awt.headless=true"
   JAVA_OPTS="$JAVA_OPTS -Djboss.server.default.config=standalone.xml"
   JAVA_OPTS="$JAVA_OPTS -javaagent:D:\openjpa-2.2.0.jar"   
else
   echo "JAVA_OPTS already set in environment; overriding default settings with values: $JAVA_OPTS"
fi 
```

到目前为止，我不想进行内置时间增强。我已经浏览了[stackoverflow帖子](https://stackoverflow.com/questions/7294906/openjpa-2-1-1-enhancement-problem-on-glassfish-3-1-1/7336781#7336781)以及[为什么需要增强](http://webspherepersistence.blogspot.in/2009/02/openjpa-enhancement.html)

会欣赏一些线索。

# python - Django 在 vi rtualenv 中找不到包

> ID：10162784
> 
> 赞同：1
> 
> 时间：2012-04-15T14:14:53.640
> 
> 标签：python, django, google-app-engine, virtualenv, django-nonrel

我正在尝试使用 Google App Engine 和 django-nonrel 为本地开发设置 virtualenv。我现在只是尝试运行 django-nonrel 提供的测试应用程序。

我第一次尝试时，我开始`python manage.py runserver`工作，但是当我尝试从中获取页面时`localhost:8080`，它错误地告诉我，说它找不到`pdb`模块：

```
Traceback (most recent call last):
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver.py", line 2755, in _HandleRequest
    self._Dispatch(dispatcher, self.rfile, outfile, env_dict)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver.py", line 2643, in _Dispatch
    base_env_dict=env_dict)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver.py", line 682, in Dispatch
    base_env_dict=base_env_dict)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver.py", line 1717, in Dispatch
    self._module_dict)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver.py", line 1619, in ExecuteCGI
    reset_modules = exec_py27_handler(config, handler_path, cgi_path, hook)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver.py", line 1425, in ExecutePy27Handler
    import pdb
ImportError: No module named pdb 
```

我尝试从我的主要 Python 安装中复制模块，并且我还尝试创建一个可以访问站点包的新 virtualenv。两种方法都达到了一定程度 -`python manage.py runserver`最终无法找到`urllib`。

另一方面，`python manage.py shell`然后例如`import pdb`或`import urrlib`（或任何其他标准库，就此而言）工作正常。我应该做些什么？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-18T23:45:06.353

解决办法：根本不用`virtualenv`，把你需要的库（比如`django`）放到你的项目目录下。无论如何，您将需要它来将您的应用程序部署到 GAE。

# windows-phone-7 - Windows Phone 应用程序的多个实例

> ID：10162786
> 
> 赞同：4
> 
> 时间：2012-04-15T14:14:57.290
> 
> 标签：windows-phone-7, windows-phone

是否可以在 Windows Phone 7.5 上运行同一应用程序的多个实例？当我停用当前实例并尝试通过“开始”菜单运行新实例时，后台应用程序会消失，而新应用程序会以初始屏幕在前台启动。

在这种“重启”之间是否保留了应用程序状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T14:20:56.653

不，不可能在 WP 中运行应用程序的多个实例。当您按照您的描述启动应用程序时，它会被视为应用程序的重新启动，并且不会保存任何状态。有关详细信息，请查看[http://msdn.microsoft.com/en-us/library/ff817008(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/ff817008(v=vs.92).aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T14:26:29.147

当您启动应用程序的实例然后将其停用（通过使用“开始”按钮）时，您有机会保存应用程序状态（您可以使用 Deactivated 事件）

因此，当从菜单启动新实例时，应用程序的前一个实例会被终止，此时您可以重新加载以前保存的状态（如果有的话！）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T14:19:36.560

据我所知（根据我目前的经验），每个应用程序只能有一个实例。

# java - 禁用FlowLayout中多行的使用？

> ID：10162789
> 
> 赞同：1
> 
> 时间：2012-04-15T14:15:42.517
> 
> 标签：java, swing, layout, flowlayoutpanel, flowlayout

[`Flowlayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/flow.html)在重新调整容器大小时，我找不到如何禁用自动创建行。文档中提到：

> 如果容器中的水平空间太小，无法将所有组件放在一行中，则 FlowLayout 类使用多行。

如何禁用此功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T14:19:36.437

不要使用 FlowLayout。相反，您是否尝试过 BoxLayout，组织为 BoxLayout.LINE_AXIS。

# java - 在 Java Servlet 中有效接收大量数据

> ID：10162791
> 
> 赞同：2
> 
> 时间：2012-04-15T14:16:09.790
> 
> 标签：java, google-app-engine, servlets

我使用 POST 方法从 HTML 表单中获取大量数据。

```
req.getParameter(); 
```

将值作为字符串返回，但我得到的值太大以至于需要 StringBuilder。

我该怎么办 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T19:16:45.733

POST 参数大小似乎有各种限制，具体取决于 servlet 实现。看

[Tomcat POST 参数限制（默认 2mb）](https://stackoverflow.com/questions/2943477/is-there-a-max-size-for-post-parameter-contenthttp://)

[设置 Jetty POST 参数限制（默认 <200k）](http://wiki.eclipse.org/Jetty/Howto/Configure_Form_Size)

GAE servlet 容器基于 Jetty 6，但具体的实现限制是 AFAIK 未知的。谷歌伙计们，有人知道最大 POST 参数大小的具体数字吗？

# java - 查看两个对象是否具有相同的类型

> ID：10162802
> 
> 赞同：26
> 
> 时间：2012-04-15T14:18:57.033
> 
> 标签：java, instanceof

假设我有一个类 A，并且 B、C、D 是从 A 派生的。
如果我想知道引用的对象的类型是什么，我可以声明：

```
// pseudo-code
if(obj instanceof B)
    < is B>
else if(obj instanceof C)
    < is C>
else
    <is D> 
```

这是因为我确信从 A 派生的类只有 B、C 和 D。
但是如果我只想检查两个引用是否指向同一种对象呢？
所以像：

```
if(obj1 instanceof obj2)
   <do something> 
```

但是当然语法是错误的。如何在没有一千个 if-else 的情况下检查这个？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-04-15T14:22:14.013

你的意思是

```
obj1.getClass().equals(obj2.getClass()) 
```

仅当两者都属于同一特定类时，`obj1`这才应返回 true 。`obj2`

`A`但是，如果您与 进行比较，这将不起作用`B extends A`。如果您想要返回 true 的相等性，即使一个是另一个的子类型，您将不得不编写一个更强大的比较函数。我认为你可以通过循环`getSuperClass()`向上层级树来做到这一点。

我认为一个简单的解决方案也可以做`A.getClass().isAssignableFrom(B.getClass())`，假设`B extends A`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-15T14:21:42.823

你可以做

```
if (obj1.getClass() == obj2.getClass()) { ... } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T14:28:13.383

像这样的东西：

```
if(classA.getClass().getName().equals(classB.getClass().getName()))
     <do something> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T14:26:55.870

由于 B、C 和 D 是 A 的子类，并且您想对这些类做点什么，我不会使用`instanceOf`运算符。这个只有在别无他法的时候才有用。

您可以更好地覆盖超级方法和/或变量，因此您可以使用相同的所有对象，但它们会做不同的事情（例如打印它自己的类型）。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-15T14:23:54.927

instanceof 需要指向一个类，而不是另一个对象。要检查两个对象是否都来自同一类型的对象，请执行以下操作..

```
if((obj1 instanceof ClassName) && (obj2 instanceof ClassName)) {
  do whatever
} 
```

# orchardcms - AsideFirst 上的高级菜单被切断

> ID：10162803
> 
> 赞同：0
> 
> 时间：2012-04-15T14:19:10.270
> 
> 标签：orchardcms

我的 Orchard CMS 项目中有一个高级菜单。首先我把它放在导航区，一切都很好，直到它变得太宽，所以我决定把它移到 AsideFirst Zone 并使其垂直。但是当我移动它时，我发现我的菜单被 AsideFirst 区域截断，确切地说，是具有“zone-aside-first”类的 div 元素。无论您做什么，它都会保留在该 div 中，并且应该像在 navzone 中那样覆盖其他区域的菜单项被切断。我尝试过使用 css 风格，但没有帮助。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:17:34.763

答案很简单。

为了解决这个问题，我刚刚在 AsideFirst Zone 中添加了一个 CSS 样式。

```
#aside-first { overflow: visible !important; } 
```

# matlab - 在 Matlab 中检查像素

> ID：10162805
> 
> 赞同：2
> 
> 时间：2012-04-15T14:19:21.157
> 
> 标签：matlab

我在 matlab 中有一个具有 3 种颜色的图像，其值为`0`、`128`和`255`。例如：

```
255  255  255   255  128  255   0   255  255  128   0   255
255   0   255   255  128  255  255   0   255  128  255  255
255   0   255    0   128  255  255  255  255  128  255   0     
255  255   0    255  128  255  255   0   255  128  255  255
255   0    0    255  128   0   255  255   0   128  255   0 
```

首先，我想检查索引的像素`(1,1)`到`(1,5)`.

如果有像素值`0`（黑色），则索引`(1,1)`到的像素`(1,5)`变为`128`（灰色），如果没有，则将像素变为`0`（白色）。

其次，我想再次执行这些步骤，检查索引`(2,1)`到`(2,5)`，`(3,1)`到`(3,5)`，到底部，然后继续下一个，到索引`(1,6)`到`(1,10)`，`(2,6)`到`(2,10)`，到底部，然后到索引`(1,11)`到`(1,end)`，`(2,11)`到`(2,end)`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T14:47:23.777

您绝对需要按顺序执行此操作吗？听起来您需要为每组表单 (n, (5*m : 5*m +1)) 执行此操作。如果是这样，您可以通过将矩阵重塑为 5 个元素宽的块的 3d 矩阵来同时进行所有测试。另外我假设您的意思是“如果没有，则像素更改为`255`（白色）”，而不是`0`.

假设您的图像被称为`myImage`，那么

```
numBlocks = numel(myImage)/(5*size(myImage,1));
% Generate a 3D matrix each of which is 5 elements long in dimension 2\. Note reshape will throw an error if numblocks is fractional
foo = reshape(myImage,size(myImage,1),5,numBlocks); 
blackTest = any(foo==0,2);
result = blackTest * 128 + ~blackTest*255; % result for each block
output = reshape(repmat(result,[1 5 1]),size(myImage)); 
```

这会将您的图像重新组织成一个 3d 矩阵，其中与 3d 矩阵的每个“层”对应的每个子矩阵都是 5 个元素宽。对于整个 3d 矩阵，它检查第 2 维中的任何元素是否为零，在第 2 维中留下`foo`长度为 1的逻辑矩阵。`foo`由逻辑 1 和 0 组成，在 MATLAB 中也可以将其视为数字 1 和 0。所以它乘以`foo`128（对于灰度输出值）并加上`foo`乘以 255 的逻辑逆，得到你的白色输出值。最后，它将矩阵重复回 5 元素宽的块并将其恢复到其原始尺寸。

编辑：请注意，如代码注释中所述，如果您的原始图像不是 5 像素宽的倍数，则此代码将不起作用。要解决此问题，您必须创建一个特殊情况，或使用循环来逐步遍历每个 5 元素宽的块。事实上，这可能是一个更好的方法：

```
index = 1;
output = zeros(size(myImage));

while index < size(myImage,2)
blockEnd = min(index+4,size(myImage,2));
blackTest = any(myImage(:,index:blockEnd)==0,2);
blackTest = blackTest(:,ones(1,5));
output(1:end,index:blockEnd) = blackTest * 128 + ~blackTest*255;
index = index+5;
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T15:06:15.847

```
% generate matrix
rand_data = randi(10,10);
I = zeros(10);
I(rand_data < 6 & rand_data > 3) = 128;
I(rand_data >= 6) = 255;

% here's the code
I = reshape(I',5,[])';
mask = repmat(any(I == 0,2),5,1);
I(mask) = 128;
I(~mask) = 255;
I = reshape(I',10,[])'; 
```

# entity-framework - 使用实体框架将两个相关表连接到一个实体中

> ID：10162806
> 
> 赞同：2
> 
> 时间：2012-04-15T14:19:27.297
> 
> 标签：entity-framework, entity-framework-4

我的问题与 ADO.NET 实体框架中的“表连接”功能有关。想象一个包含一个表“Product”和另一个表“ProductPrice”的数据库。价格表存储产品所有价格变化的历史记录，包括开始日期和结束日期，其中包含当前价格的行由结束日期列中的 NULL 值指示。该数据库结构可用于统计目的，例如，可以将平均每日销售量映射到产品价格的每次变化。但是，对于在线订购网站，只需要当前价格。

这是两个表的结构：

```
Product
ProductID (PK, int, NOT NULL, auto increment)
Name (varchar 50, NOT NULL)

ProductPrice
ProductPriceID (PK, int, NOT NULL, auto increment)
ProductID (INT, NOT NULL)
StartDate (DATETIME, NOT NULL)
EndDate (DATETIME)
Price (MONEY, NOT NULL) 
```

下面是一个用于检索产品和当前价格的 SQL 语句示例：

```
SELECT Product.ProductID, Product.Name, ProductPrice.Price AS CurrentPrice
FROM Product
LEFT JOIN ProductPrice
ON Product.ProductID = ProductPrice.ProductID
AND ProductPrice.EndDate IS NULL 
```

我想使用实体框架将实体 Product 和 ProductPrice 连接在一起，这样我就可以直接从 Product 实体访问当前价格，如下例所示：

```
var product = (from p in context.Product where p.ProductID == 2 select p).FirstOrDefault();
Console.WriteLine(product.Name);
Console.WriteLine(product.CurrentPrice); 
```

不幸的是，我遇到了无法解决的错误。

以下是存储模型中的实体：

```
<EntityType Name="Product">
  <Key>
    <PropertyRef Name="ProductID" />
  </Key>
  <Property Name="ProductID" Type="int" Nullable="false" StoreGeneratedPattern="Identity" />
  <Property Name="Name" Type="varchar" Nullable="false" MaxLength="50" />
</EntityType>
<EntityType Name="ProductPrice">
  <Key>
    <PropertyRef Name="ProductPriceID" />
  </Key>
  <Property Name="ProductPriceID" Type="int" Nullable="false" StoreGeneratedPattern="Identity" />
  <Property Name="ProductID" Type="int" Nullable="false" />
  <Property Name="Price" Type="money" Nullable="false" />
  <Property Name="StartDate" Type="datetime" Nullable="false" />
  <Property Name="EndDate" Type="datetime" />
</EntityType>
<Association Name="FK_ProductPrice_Product">
  <End Role="Product" Type="TestingModel.Store.Product" Multiplicity="1" />
  <End Role="ProductPrice" Type="TestingModel.Store.ProductPrice" Multiplicity="*" />
  <ReferentialConstraint>
    <Principal Role="Product">
      <PropertyRef Name="ProductID" />
    </Principal>
    <Dependent Role="ProductPrice">
      <PropertyRef Name="ProductID" />
    </Dependent>
  </ReferentialConstraint>
</Association> 
```

从概念模型：

```
<EntityType Name="Product">
  <Key>
    <PropertyRef Name="ProductID" />
  </Key>
  <Property Name="ProductID" Type="Int32" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
  <Property Name="Name" Type="String" Nullable="false" MaxLength="50" Unicode="false" FixedLength="false" />
  <Property Name="SKU" Type="String" Nullable="false" MaxLength="50" Unicode="false" FixedLength="false" />
  <Property Type="Decimal" Name="CurrentPrice" Nullable="false" Precision="19" Scale="4" />
</EntityType> 
```

最后是两者之间的映射：

```
<EntitySetMapping Name="Product">
  <EntityTypeMapping TypeName="TestingModel.Product">
    <MappingFragment StoreEntitySet="Product">
      <ScalarProperty Name="ProductID" ColumnName="ProductID" />
      <ScalarProperty Name="Name" ColumnName="Name" />
      <ScalarProperty Name="SKU" ColumnName="SKU" />
    </MappingFragment>
  </EntityTypeMapping>
  <EntityTypeMapping TypeName="IsTypeOf(TestingModel.Product)">
    <MappingFragment StoreEntitySet="ProductPrice">
      <ScalarProperty Name="CurrentPrice" ColumnName="Price" />
      <Condition ColumnName="EndDate" IsNull="true" />
    </MappingFragment>
  </EntityTypeMapping>
</EntitySetMapping> 
```

以下是我目前正在努力解决的错误消息：

```
Error   1   Error 3024: Problem in mapping fragments starting at line 76:Must specify mapping for all key properties (Product.ProductID) of the EntitySet Product.
Error   2   Error 3025: Problem in mapping fragments starting at line 76:Must specify mapping for all key properties (ProductPrice.ProductPriceID) of table ProductPrice. 
```

我不确定实体框架是否可以做到这一点，也许我应该自己在 LINQ 中手动进行连接。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T20:35:18.807

您不符合[实体拆分条件](http://msdn.microsoft.com/en-us/library/bb896233.aspx)：

> 仅当满足以下条件时，才应将实体类型映射到多个表：
> 
> *   您要映射到的表共享一个公共键。
>     
>     
> *   被映射的实体类型在每个基础表中都有条目。也就是说，实体类型表示的是两个表之间一一对应的数据；实体类型表示两个表的内部连接。

你比EF聪明。您知道该条件会`EndDate == null`产生一条记录。EF 不知道这一点，因此永远不知道它可以从两个表中创建一个对象。就异常消息而言：`PriceId`并且`EndDate == null`应该以某种方式传递记录的*所有关键属性*，`ProductPrice`这显然是不可能的。

## 备择方案：

A. 您可以在两者之间创建一对多关联并进行查询：

```
products.Where(p => p.ProductId == 2)
    .Select(p => new
      {
        Product = p,
        CurrentPrice = p.ProductPrices.Where(pp => pp.EndDate == null)
                       .FirstOrDefault()
      }) 
```

不像您希望的那样方便，但在包装在存储库中时可能还不错。

B. 创建数据库视图并使用单独的路径进行查看和更新​​（这并不罕见）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T14:24:08.567

您需要在两个表之间做一个外键（即在列 ProductID 上）

然后要检索所有产品及其价格，您需要执行以下操作：

```
var x = from p in context.Product where p.ProductID == 2 && p.ProductPrice.EndDate == null select new { p.ProductID, p.Name, p.ProductPrice.Price }.FirstOrDefault(); 
```

# .net - 使用通过 MEF 组成的参数创建类的实例

> ID：10162812
> 
> 赞同：1
> 
> 时间：2012-04-15T14:20:03.463
> 
> 标签：.net, mef, composition

我有以下情况。在装配 AI 中有以下内容：

```
public class Service : IService
{
   private readonly IDependency dependency;

   public Service(IDependency dependency)
   {
       this.dependency = dependency;
   }
} 
```

在程序集中 B 和 CI 有不同的实现`IDependency`：

```
[Export(typeof(IDependency)]
public class Dependency1 : IDependency { }

[Export(typeof(IDependency)]
public class Dependency2 : IDependency { } 
```

如何指示 MEF`Service`为每个导出的实例创建一个实例`IDependencies`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T19:50:24.993

MEF 不支持开箱即用。你有两个选择：

1.  大概您计划在`[ImportMany(typeof(IService))]`某个地方导入所有服务实例。相反，您可以导入这样`ServiceProvider`实现的对象：

    ```
    [Export]
    public class ServiceProvider
    {
        [ImportMany]
        public IEnumerable<IDependency> Dependencies { get; set; }

        public IEnumerable<IService> GetServices()
        {
           return Dependencies.Select(x => new Service(x));
        }
    } 
    ```

2.  您可以使用自己的导出提供程序实现来扩充 MEF。我玩弄了添加`[ExportMany]`这样一个自定义导出提供程序可以识别的属性的想法。它似乎有效，但它只是一个概念证明。请参阅[https://bitbucket.org/wcoenen/mefexportmany/](https://bitbucket.org/wcoenen/mefexportmany/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T08:59:46.637

正如 Wim 所说，这并不是开箱即用的原生支持。如果您希望能够执行以下操作：

```
[ImportMany]
public IEnumerable<Service> _services { get; set; } 
```

...不使用工厂（如`ServiceProvider`Wim 详述的），则出口提供者将起作用，例如：

```
public class ServiceExportProvider : ExportProvider
{
  private const string ContractName = AttributedModelServices.GetContractName(typeof(Service));

  public ExportProvider SourceProvider { get; set; }

  protected override IEnumerable<Export> GetExportsCore(ImportDefinition def, AtomicComposition ac)
  {
    if (SourceProvider == null)
      throw new InvalidOperationException("SourceProvider property must be set.");

    if (def.ContractName.Equals(ContractName))
    {
      return SourceProvider
        .GetExports<IDependency>()
        .Select(e => new Export(def.ContractName, () => new Service(e.Value)));
    }

    return Enumerable.Empty<Export>();
  }
} 
```

您不需要`[Export]`您的`Service`类型（实际上这可能会导致问题），但如果您已使用容器向提供者注册并设置`[Import]`属性，则可以`[ImportMany]`使用实例：`Service``SourceProvider`

```
var catalog = // create catalogs/
var provider = new ServiceExportProvider();
var container = new CompositionContainer(catalog, provider);
provider.SourceProvider = container; 
```

# javascript - 如何在javascript中移动图像

> ID：10162822
> 
> 赞同：2
> 
> 时间：2012-04-15T14:21:08.420
> 
> 标签：javascript, image, keyboard

我想移动我使用向左箭头创建的板向左移动，向右箭头向右移动。但我不知道如何用语法写左/右箭头，所以我只使用'a'和'd'来左右移动（就像在反击中一样）。有人可以帮我吗？这是我的代码

```
function moveObj(name, Xpix) 
{    
    obj = document.getElementById(name);

    px = parseInt(obj.style.left) + Xpix;       
    obj.style.left = px;
}

function ProcessKeypress(e)
{
    var myObj = "pantul";
    var moveBy = 10;
    obj = document.getElementById(myObj);
    x=parseInt(obj.style.left);

    if (e.keyCode) keycode=e.keyCode;
    else keycode=e.which;
    ch=String.fromCharCode(keycode);

    if(x > 220 || x <720)
    {
        if(ch=='a')         moveObj(myObj, -moveBy);
        else if(ch=='d')    moveObj(myObj, moveBy);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T14:26:58.327

```
Character codes:

37 - left

38 - up

39 - right

40 - down 
```

所以你可以使用键码（不是字符），

```
function ProcessKeypress(e)
{
    var myObj = "pantul";
    var moveBy = 10;
    obj = document.getElementById(myObj);
    x=parseInt(obj.style.left);

    if (e.keyCode) keycode=e.keyCode;
    else keycode=e.which;

    if(x > 220 || x <720)
    {
        if(keycode == 37)         moveObj(myObj, -moveBy);
        else if(keycode == 39)    moveObj(myObj, moveBy);
    }
} 
```

# c++ - 为什么我不能将指向派生类成员函数的指针转换为相同但属于类Base？

> ID：10162823
> 
> 赞同：5
> 
> 时间：2012-04-15T14:21:11.900
> 
> 标签：c++, member-function-pointers

`void(Derived::*)()`对我来说，将 a转换为 a看起来非常安全`void(Base::*)()`，就像在这段代码中一样：

```
#include <iostream>
#include <typeinfo>
using namespace std;
struct Base{
    void(Base::*any_method)();
    void call_it(){
        (this->*any_method)();
    }
};
struct Derived: public Base{
    void a_method(){
        cout<<"method!"<<endl;
    }
};
int main(){
    Base& a=*new Derived;
    a.any_method=&Derived::a_method;
    a.call_it();
} 
```

但是编译器抱怨在`a.any_method=&Derived::a_method;`. 这是防止微妙的编程错误的障碍，还是只是让编译器编写者的生活更轻松？是否有解决方法让`Base`类有一个指向`Derived` *没有类型知识*的成员函数的指针（也就是说，我不能`Base`使用模板参数制作模板`Derived`）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T14:24:30.870

如果您`Derived::a_method()`尝试使用仅存在于`Derived`中而不存在于 中的数据成员`Base`，并且您在`Base`对象（或派生自`Base`但不相关的对象`Derived`）上调用它，会发生什么情况？

反过来的转换是有道理的，这个没有。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T14:26:00.763

不，这有潜在的危险。

派生类函数可以使用所有派生类属性`*this`。可以在任何基类实例上调用指向基类函数的指针，即使是那些不属于派生类型的实例。

访问不是派生类的实例的派生类属性是行不通的，因此不允许将派生类函数的指针转换为指向基类指针的指针。

另一方面，将指向基类函数的指针转换为指向派生类函数的指针是安全且合法的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T14:28:36.233

您需要使用`std::function<void()>`. 这可以是任何类的任何成员，一个 lambda，一个自由函数，一个函数对象，任何你需要的，超级方便。

```
#include <iostream>
#include <typeinfo>
using namespace std;
struct Base{
    std::function<void()> any_method;
    void call_it(){
        any_method();
    }
};
struct Derived: public Base{
    void a_method(){
        cout<<"method!"<<endl;
    }
};
int main(){
    Derived* d = new Derived;
    Base& a= *d;
    a.any_method = [d] { d->a_method(); };
    a.call_it();
} 
```

在这里您可以看到 的实际实现`any_method`完全从 中抽象出来，我可以提供*一个*`struct Base`函数对象，它可以做任何事情，包括方便地调用 Derived 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T14:54:22.773

我想这可能有点令人惊讶。但是，如果您考虑一下，它是有道理的。

为了使两种类型之间的强制转换是自动的，以下关系应该成立：第一种类型的任何实例都应该可以在第二种类型中表示。

例如，如果`d`是 的一个实例`Derived`，那么它可以自动转换为 a`Base&`因为任何 的实例`Derived`也是 的一个实例`Base`。这是继承。

现在，当涉及到指向成员函数的指针时，这种关系实际上是相反的。很明显，任何方法都`Base`存在于 的实例中，`Derived`但反之则不成立。毕竟，推导的全部意义在于更频繁地添加新功能。

另一种可视化的方法是使用自由函数。`this`只是常规函数中的隐式参数，如果我们明确表示，我们会​​得到：

```
void Base@call_it(Base& self);

void Derived@a_method(Derived& self); 
```

现在，如果我有两个`d`type`Derived`和`b`type 的实例，`Base`那么：

*   `Base@call_it(d)`说得通
*   `Derived@a_method(b)`是编译错误

后者可能是`Derived@a_method(dynamic_cast<Derived&>(b))`，但这引入了运行时检查来实际验证属性。静态地它是不可判定的。

# asp.net-mvc - 将属性传递给 ActionLink

> ID：10162824
> 
> 赞同：0
> 
> 时间：2012-04-15T14:21:19.060
> 
> 标签：asp.net-mvc

我有以下代码用于生成`a`标签：

```
<ul>
    @foreach (var schedule in scheduleGroup)
    {
        <li>
        @Html.ActionLink(string.Format("{0:HH\\:mm}", schedule.RecurrenceStart), "EventOverview", "BaseEvent", new { id = schedule.BaseEvent.OID, type = schedule.BaseEvent.XPObjectType}, new Dictionary<string, object>
                {
                   {"session", schedule.SessionId},
                   {"hall",schedule.HallId},
                   {"client",schedule.BasePlace.PremieraClientId}                                                                       
                })
    } 
</ul> 
```

但是，html 属性在`a`标签中显示不正确。这是生成的标记：

```
<a href="/Film/Event/36" values="System.Collections.Generic.Dictionary`2+ValueCollection[System.String,System.Object]" keys="System.Collections.Generic.Dictionary`2+KeyCollection[System.String,System.Object]" count="3" comparer="System.Collections.Generic.GenericEqualityComparer`1[System.String]">20:15</a> 
```

哪里有错误？
谢谢。

**更新：** 我想要以下内容：

```
<a client="1" hall="1" session="15" href="/BaseEvent/EventOverview?id=36&type=Film"> 20:15 </a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T03:58:45.440

你的代码：

```
@Html.ActionLink(string.Format("{0:HH\\:mm}", schedule.RecurrenceStart), "EventOverview", "BaseEvent", 
                new { id = schedule.BaseEvent.OID, type = schedule.BaseEvent.XPObjectType},
                new Dictionary<string, object>
                                {
                                   {"session", schedule.SessionId},
                                   {"hall",schedule.HallId},
                                   {"client",schedule.BasePlace.PremieraClientId}                                                                       
                                }) 
```

如果您的意图是像@Tommy 所说的那样生成一个链接，即 'session'、'hall'、'schedule' 作为 queryStirng 参数，那么代码应该是：

```
@Html.ActionLink(string.Format("{0:HH\\:mm}", "schedule.RecurrenceStart"), "EventOverview", "BaseEvent",
        new { id = schedule.BaseEvent.OID, type = schedule.BaseEvent.XPObjectType, 
                session= schedule.SessionId, hall =schedule.HallId,  client =schedule.BasePlace.PremieraClientId},
        null) 
```

否则，如果您希望将 'session'、'hall'、'schedule' 作为 html 属性（根据您给定的代码），则有两个匹配的[ActionLink](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.linkextensions.actionlink.aspx)方法签名：

```
public static MvcHtmlString ActionLink(
    this HtmlHelper htmlHelper,
    string linkText,
    string actionName,
    string controllerName,
    Object routeValues,
    Object htmlAttributes
) 
```

和

```
public static MvcHtmlString ActionLink(
    this HtmlHelper htmlHelper,
    string linkText,
    string actionName,
    string controllerName,
    RouteValueDictionary routeValues,
    IDictionary<string, Object> htmlAttributes
) 
```

You have to choose one of them. That is send both parameters 'routeValues' and 'htmlAttributes' as anonymous object (1st one) or as typed object, 'RouteValueDictionary' for 'routeValues' and '`IDictionary<string, Object>`' for 'htmlAttributes'. Your given code matched the 1st one, that is why the 'htmlAttributes' of type `IDictionary<string, Object>` treat as Object and generating the incorrect tag.

Correct code should be:

```
@Html.ActionLink(linkText: string.Format("{0:HH\\:mm}", "schedule.RecurrenceStart"), actionName: "EventOverview", controllerName: "BaseEvent",
        routeValues: new { id = schedule.BaseEvent.OID, type = schedule.BaseEvent.XPObjectType },
        htmlAttributes: new
        {
            session = schedule.SessionId,
            hall = schedule.HallId,
            client = schedule.BasePlace.PremieraClientId
        } ) 
```

Or

```
@Html.ActionLink(string.Format("{0:HH\\:mm}", "schedule.RecurrenceStart"), "EventOverview", "BaseEvent",

        new RouteValueDictionary(new { id = schedule.BaseEvent.OID, type = schedule.BaseEvent.XPObjectType }),

        new Dictionary<string, object>
            {
                {"session", schedule.SessionId},
                {"hall", schedule.HallId},
                {"client", schedule.BasePlace.PremieraClientId}                                                                       
            }) 
```

# c# - 如果我使用 BLL，我还应该访问 DAL 吗？

> ID：10162826
> 
> 赞同：1
> 
> 时间：2012-04-15T14:21:25.837
> 
> 标签：c#, data-access-layer, n-tier-architecture, bll

我想使用存储库模式创建 n 层架构。我想知道通过 BLL 层复制所有调用然后通过 BLL 访问仅数据调用是否有意义？或者我可以通过 DAL 直接访问一些东西，而通过 BLL 访问一些东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T14:43:00.357

**IMO 仅仅为了它而复制是没有意义的**。
（虽然实际上每种方法都有其优点和缺点，但没有什么总是错的或好的）

通常，尽管数据层处理例如（简化）一些与表完全匹配的“粒度”数据等。

虽然您的业务层可以将其结合起来，并且更多地围绕“逻辑”和您的逻辑模型（然后是数据模型和数据）。

如果您发现自己在 biz 层中拥有 DAL 的精确副本，那么您很可能错过了一些要点。有些事情可能需要重新组织、丢弃或简化。

或者例如问自己以下 - 如果您想替换 DAL 以使用不同类型的存储（不同的事物组织或任何需要您更改数据/DAL 操作方式的东西） - 您的 BLL 将如何看起来像? 相同？你的业务层不应该“遵循数据”——它应该有自己的规则，更多的是关于你的领域的逻辑，你在做什么。而数据应该是关于数据的。

所以，简而言之，问题主要是你如何设计你的系统——如果你很好地利用了一个业务层（通常你应该使用它，除非它相对简单，或者你决定使用完全不同的架构）然后使用它，如果不是没有需要复制。

希望这可以帮助。

# ext-direct - 您的 Ext.Direct 数据缓存策略是什么？

> ID：10162846
> 
> 赞同：1
> 
> 时间：2012-04-15T14:23:43.137
> 
> 标签：ext-direct

我最近开始大量使用 Ext.Direct，但是我似乎不清楚如何将缓存策略与 directFn 请求集成？例如：当数据没有改变等时返回 304

# html - 尝试在 textarea 控件中显示 HTML 文本

> ID：10162847
> 
> 赞同：0
> 
> 时间：2012-04-15T14:23:51.540
> 
> 标签：html, apache-flex, textarea

我创建了一个 textArea 元素，但无法显示我的 HTML 内容。如果我只显示常规文本，它可以工作，或者如果我将 textArea 元素更改为 RichEditableText 元素，它可以正常工作。由于这是针对移动应用程序，我更喜欢使用 Adob​​e 推荐的 textArea 元素。

这是 textArea 的 MXML 代码。我得到的只是边框，没有显示任何内容。

```
<s:TextArea id="myHelp" editable="false" width="100%" height="100%">
<s:textFlow>
  <s:TextFlow>
    <s:p fontSize="20">Version: 1.0.0.1</s:p>
       </s:TextFlow>
     </s:textFlow>
</s:TextArea> 
```

任何帮助，将不胜感激。

干杯，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T18:09:20.433

```
<s:TextArea id="txt_ar"  textAlign="justify"
borderAlpha="0" editable="false"> 
```

然后写你的html字符串

```
textrichtml:String = "your html string" 
```

然后使用以下代码。

```
txt_ar.textFlow = TextConverter.importToFlow(textrichtml,TextConverter.TEXT_FIELD_HTML_FORMAT); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T07:52:54.263

在 Flex 4.0 中，在 TextArea 中删除了 htmlText 属性，您可以使用 content 属性或 TextConverter。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
    <s:layout>
        <s:BasicLayout />
    </s:layout>
    <fx:Script>
        <![CDATA[
            import flashx.textLayout.conversion.TextConverter;
        ]]>
    </fx:Script>
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
        <fx:String id="htmlSample">
            <![CDATA[This is <font color="#EE1122">HTML text</font> in a <b>TextArea control</b>. Use the <u>textFlow property</u> of the <font color="#22A050">TextArea control</font> to include basic HTML markup in your text.</s:a>.
        ]]></fx:String>
    </fx:Declarations>
    <s:VGroup left="10" right="10" top="10" bottom="10">
        <s:TextArea id="htmlDisplay" width="400" height="100" editable="false">
            <s:content>This is <s:span color="#FF0000">HTML text</s:span>
                in an <s:span fontWeight="bold">Spark TextArea control</s:span>.
                Use the <s:span textDecoration="underline">content</s:span> property
                of the <s:span color="#008800">Spark TextArea control</s:span> 
                to include basic HTML markup in your text, including
                <s:a href="http://www.adobe.com" target="_blank">links</s:a>.
            </s:content>
        </s:TextArea>

        <s:TextArea width="400" height="100" editable="false" textFlow="{TextConverter.importToFlow(htmlSample, TextConverter.TEXT_FIELD_HTML_FORMAT)}">
        </s:TextArea>
    </s:VGroup>
</s:Application> 
```

或者在 TextArea 中使用 htmlText 属性

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="vertical">
    <mx:Script>
        <![CDATA[
            [Bindable]
            private var _htmlText:String = "This is 14 point blue italic text.<br><b><font color='#000000' size='10'>This text is 10 point black, italic, and bold.</font></b>";
        ]]>
    </mx:Script>

    <mx:TextArea width="400" height="60" color="0x323232">
        <mx:htmlText><![CDATA[This is <font color="#EE1122">HTML text</font> in a <b>TextArea control</b>. Use the <u>htmlText property</u> of the <font color="#22A050">TextArea control</font> to include basic HTML markup in your text.]]></mx:htmlText>
    </mx:TextArea>

    <mx:TextArea width="100%" height="60" color="blue" fontStyle="italic" fontSize="14" htmlText="{_htmlText}"
                 editable="false" selectable="false"/>

</mx:Application> 
```

# php - 在线学生成绩设计

> ID：10162848
> 
> 赞同：0
> 
> 时间：2012-04-15T14:23:52.587
> 
> 标签：php, sql

我正在编写关于在线学生成绩的项目，该项目将计算成绩点、平均成绩点和累积成绩点。所需的输出是：

```
Name: Shakira Abdullahi
Adm.No: 096784657    
Department: Information Technology
Semester: 1st semester
Level: 200

Course title                     Course code    Course unit    score     Grade
Computer programming II            Csc 201        3             45        D
Introduction to file procesing     Csc 204        2             57        C
Introduction to the internet       Int 201        3             34        F
Linear algebra II                  Mth 205        2             60        B
Real Analysis I                    Mth 207        3             76        A
Numeric Analysis                   Mth 209        2             42        E
Nigerian people and culture        Gst 201        2             80        A

Units this session:17
Units to date:35
G.P this session:47
G.P.A last session:3.43
G.P.A to date:2.87
Remarks: To repeat Int 201

Examination grading
Score(%)    grade   Grade points     
70-100        A       5
60-69         B       4
50-59         C       3
45-49         D       2
40-44         E       1
0-39          F       0 
```

解释：

*   `Units this session`: 本期课程总学分
*   `Units to date`: 到本次会话为止的每个会话单元的累积
*   `G.P this session`：总和（每门课程（学分 x 单元））
*   `G.P to date`: 到本次会话为止的每个会话 GP 的累积
*   `G.P.A last session`: 平均 GP 上次会话
*   `G.P.A to date`: 迄今为止的平均 GP。
*   `level`：我们最多有 4 个级别：100、200、300 和 400

在访问结果之前，用户还需要：姓名、主管编号、部门、学期和会话。会议采用年份形式，例如 2010-2011。

那么请问，我该如何进行这个项目呢？我的问题是：

*   我可以为此维护一张桌子吗？
*   我该如何进行查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T14:35:13.797

我建议创建一个数据库，其中包含与学生链接到主表的不同表。

这是我要创建的表的结构：

*   学生
*   培训班
*   分数
*   等级

在其中的每一个中，我都会创建所需的列。

**学生桌**

在学生表中为以下内容创建列：

*   ID（主要、INT、11、自动增量）
*   姓名（瓦查尔，256）
*   AdmNo (INT, 11)
*   部门 (Varchar, 256)
*   学期（可以是具有相应值的 ID 或最多 256 个字符的 Varchar）
*   等级（智力，11）
*   会话单元（INT，11）
*   日期单位（INT，11）
*   这个GP (INT,11)
*   LastGPA（浮动）
*   TDGPA（浮动）
*   备注 (Varchar, 256)

**培训班**

*   ID（主要、INT、11、自动增量）
*   姓名（瓦查尔，256）
*   课程代码（Varchar，256）

**分数**

*   ID（主要、INT、11、自动增量）
*   学生证 (ID, 11)
*   课程 ID（ID，11）
*   分数（ID，11）
*   课程单元 (ID,11)
*   等级（Varchar，256）

**等级**

*   ScoreMinPercent (INT,11)
*   ScoreMaxPercent (INT,11)
*   等级（Varchar，256）
*   成绩点 (INT, 11)

包含值的 SQL 如下所示：

```
CREATE TABLE IF NOT EXISTS `student` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `Name` varchar(256) NOT NULL,
  `AdmNo` int(11) NOT NULL,
  `Department` varchar(256) NOT NULL,
  `Semester` varchar(256) NOT NULL,
  `Level` int(11) NOT NULL,
  `SessionUnits` int(11) NOT NULL,
  `DateUnits` int(11) NOT NULL,
  `ThisGP` int(11) NOT NULL,
  `LastGPA` float NOT NULL,
  `TDGPA` float NOT NULL,
  `Remarks` varchar(256) NOT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=2 ;

INSERT INTO `student` (`ID`, `Name`, `AdmNo`, `Department`, `Semester`, `Level`, `SessionUnits`, `DateUnits`, `ThisGP`, `LastGPA`, `TDGPA`, `Remarks`) VALUES
(1, 'Shakira Abdullahi', 96784657, 'Information Technology', '1st semester', 200, 17, 35, 47, 3.43, 2.87, 'To repeat Int 201');

CREATE TABLE IF NOT EXISTS `courses` (
  `ID` int(11) NOT NULL DEFAULT '0',
  `Name` varchar(256) NOT NULL,
  `CourseCode` varchar(256) NOT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

INSERT INTO `courses` (`ID`, `Name`, `CourseCode`) VALUES
(1, 'Computer programming II', 'Csc 201'),
(2, 'Introduction to file procesing', 'Csc 204'),
(3, 'Introduction to the internet', 'Int 201'),
(4, 'Linear algebra II', 'Mth 205'),
(5, 'Real Analysis I', 'Mth 207'),
(6, 'Numeric Analysis', 'Mth 209'),
(7, 'Nigerian people and culture', 'Gst 201');

CREATE TABLE IF NOT EXISTS `scores` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `StudentID` int(11) NOT NULL,
  `CourseID` int(11) NOT NULL,
  `Score` int(11) NOT NULL,
  `CourseUnit` int(11) NOT NULL,
  `Grade` varchar(256) NOT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=8 ;

INSERT INTO `scores` (`ID`, `StudentID`, `CourseID`, `Score`, `CourseUnit`, `Grade`) VALUES
(1, 1, 1, 45, 3, 'D'),
(2, 1, 2, 57, 2, 'C'),
(3, 1, 3, 34, 3, 'F'),
(4, 1, 4, 60, 2, 'B'),
(5, 1, 5, 76, 3, 'A'),
(6, 1, 6, 42, 2, 'E'),
(7, 1, 7, 80, 2, 'A');

CREATE TABLE IF NOT EXISTS `grading` (
  `ScoreMinPercent` int(11) NOT NULL AUTO_INCREMENT,
  `ScoreMaxPercent` int(11) NOT NULL,
  `Grade` varchar(256) NOT NULL,
  `GradePoints` int(11) NOT NULL,
  PRIMARY KEY (`ScoreMinPercent`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=77 ;

INSERT INTO `grading` (`ScoreMinPercent`, `ScoreMaxPercent`, `Grade`, `GradePoints`) VALUES
(40, 44, 'E', 1),
(45, 49, 'D', 2),
(50, 59, 'C', 3),
(60, 69, 'B', 4),
(70, 100, 'A', 5),
(71, 39, 'F', 0); 
```

# java - Spring 无法定位 OSGi 命名空间处理程序

> ID：10162853
> 
> 赞同：18
> 
> 时间：2012-04-15T14:24:23.007
> 
> 标签：java, spring, osgi, eclipse-virgo, spring-dm

我有一个运行在 eclipse virgo OSGi 平台上的 spring MVC 项目。当我尝试使用`<osgi:reference>`标签导入 OSGi 服务时，出现以下异常：

```
Servlet /Web threw load() exception org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Unable to locate Spring NamespaceHandler for XML schema namespace [http://www.springframework.org/schema/osgi] 
```

这是我的应用程序上下文文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:beans="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:osgi="http://www.springframework.org/schema/osgi"
xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/osgi http://www.springframework.org/schema/osgi/spring-osgi.xsd">

<annotation-driven />

<resources mapping="/resources/**" location="/resources/" />

<beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <beans:property name="prefix" value="/WEB-INF/views/" />
    <beans:property name="suffix" value=".jsp" />
</beans:bean>

<context:component-scan base-package="com.apptivit.web" />

<osgi:reference id="entityService" interface="com.apptivit.db.service.AbstractEntityService"/>  
</beans:beans> 
```

最后在我的 MANIFEST.MF 文件中，我正在这样做：

```
Manifest-Version: 1.0
Export-Package: com.apptivit.web;uses:="org.springframework.stereotype
 ,org.springframework.ui,org.springframework.web.bind.annotation"
Tool: Bundlor 1.0.0.RELEASE
Import-Package: com.apptivit.db.service,
 org.apache.log4j,
 org.slf4j,
 org.springframework.context;version="[3.0.5.RELEASE,3.0.5.RELEASE]",
 org.springframework.stereotype,
 org.springframework.ui,
 org.springframework.web.bind.annotation,
 org.springframework.web.context,
 org.springframework.web.servlet,
 org.springframework.web.servlet.view
Bundle-SymbolicName: webs
Bundle-Version: 0.0.1
Bundle-Name: WebSample
Bundle-Vendor: ApptivIT
Import-Bundle: org.springframework.osgi.core;version="[1.2.1,1.2.1]",
 org.springframework.beans;version="[3.0.5.RELEASE,3.0.5.RELEASE]",
 org.springframework.core;version="[3.0.5.RELEASE,3.0.5.RELEASE]" 
```

我究竟做错了什么 ？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-10T02:36:59.097

尝试将其更改为：

```
xsi:schemaLocation=
http://www.springframework.org/schema/osgi/spring-osgi.xsd" 
```

至：

```
xsi:schemaLocation=
http://www.springframework.org/schema/osgi/spring-osgi-1.2.xsd 
```

该错误表明您的 osgi`schemaLocation`错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:26:27.870

我怀疑您是否需要 import `org.springframework.osgi.core`，因此请尝试删除该导入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-25T12:37:36.687

如果您使用的是maven，则需要添加依赖项

```
<dependency>
    <groupId>org.springframework.osgi</groupId>
    <artifactId>spring-osgi-core</artifactId>
    <version>1.2.1</version>
</dependency> 
```

由于您使用的是 OSGi jar 版本 1.2.1，因此架构位置中的架构路径需要更改为

> [http://www.springframework.org/schema/osgi](http://www.springframework.org/schema/osgi)
> 
> [http://www.springframework.org/schema/osgi/spring-osgi-1.2.xsd](http://www.springframework.org/schema/osgi/spring-osgi-1.2.xsd)

# c# - 使用带有存储过程的本地数据库的 C# 应用程序

> ID：10162861
> 
> 赞同：0
> 
> 时间：2012-04-15T14:25:35.090
> 
> 标签：c#, sql-server, database, visual-studio, stored-procedures

我正在尝试开发一个使用数据库的简单 C# 应用程序。我目前正在使用**MS Server 2008**，但我发现了一个可移植性问题，因为在不同的计算机上运行该应用程序需要安装 MS Server。此外，我的数据库使用存储过程。

为了克服这个问题，我可以使用哪些其他数据库类型（注意它必须使用存储过程）？

如果我要使用 MS Server 2008，假设它安装在每台电脑上，我如何复制我的 .mdf 文件以便访问？（即在应用程序加载时安装它？）

更新

从[这个网站](http://connectionstrings.com/sql-server-2008)，我找到了以下连接字符串：

在连接到本地 SQL Server Express 实例时附加数据库文件...

```
Server=.\SQLExpress;AttachDbFilename=c:\asd\qwe\mydbfile.mdf;Database=dbname; Trusted_Connection=Yes; 
```

我认为这将从我的文件夹中复制 .mdf 文件。因此，我正在使用以下连接字符串，但没有成功......

```
Server=.\SQLExpress;AttachDbFilename=...... database path.... ;Database=TrieDB.mdf; Trusted_Connection=Yes;

Directory lookup for the file "... database path... " failed with the operating system error 5(Access is denied.).
Cannot attach the file '... database path...' as database 'TrieDB.mdf' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T14:50:17.050

大多数“经过认证”的数据库引擎都要求您实际安装引擎。
大多数“经过认证”的数据库引擎都支持使用存储过程。

为了在更多机器上拥有 .mdf 文件，您可以简单地复制它，然后使用 sql management studio 将文件附加到引擎，但如果您计划在许多地方分发应用程序，这不是一个理想的解决方案，理想的解决方案是创建一个安装包并修复它是从安装中自动完成并在您卸载时撤消。

*恕我直言：您坚持使用去中心化解决方案的存储过程 - 请注意这是一种相当罕见的策略 - 它有错误路径的味道。但除非您提供更多信息，否则我无法确定。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T15:33:20.660

确实有两种通用设计可以执行您所描述的操作。要么拥有一个应用程序（和/或多个应用程序）的所有副本都可以访问的集中式数据库，要么创建一个包含数据库的完整安装包（通常只能由单个应用程序访问）。

就个人而言，如果您不想或不能使用集中式数据库解决方案，我建议您改变您对存储过程的理念并研究[SQL Server Compact](http://www.microsoft.com/download/en/details.aspx?id=17876)。我发现[这篇文章](http://blogs.msdn.com/b/stevelasker/archive/2008/02/11/stored-procedures-and-sql-server-compact-the-great-debate.aspx)讨论了 SQL Server Compact 没有存储过程的原因，我认为这对你很有用，即使你决定你真的需要它们。

也就是说，如果你需要在你的应用程序中安装一个数据库，你可以在 Visual Studio 中创建一个[安装包](http://msdn.microsoft.com/en-us/library/wx3b589t.aspx)，你也可以考虑使用[WiX](http://wix.sourceforge.net/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T14:34:37.797

您可以分离数据库，复制并附加目标数据库上的 mdf 文件。

# android - 使用选择器设置 imageView 背景问题

> ID：10162862
> 
> 赞同：0
> 
> 时间：2012-04-15T14:25:43.127
> 
> 标签：android, android-layout, android-listview, selector

我在列表视图项中设置单击事件时遇到问题。

这是列表在默认情况下的显示方式：

![在此处输入图像描述](../Images/9c4644923b4bd0f3bd8fc734a50c4f36.png)

这是我按下红色图像时的样子（红色变成蓝色）： ![在此处输入图像描述](../Images/b2ef3d240d647e7cb556c4252012ce6d.png)

这是当我按下列表项时： ![在此处输入图像描述](../Images/a35072fad5305a45406e46f8b36ed73d.png)

如您所见，即使我没有按下按钮，红色图像也会变成蓝色。我想要的是，当我按下列表项时，红色图像没有变化，并且保持不变。

我试图`android:drawSelectorOnTop="true"`在 listview 部分添加到 xml 文件，但它没有用。我也尝试使用选择器参数修复它，但仍然没有成功。

我上传了一些代码，接下来的部分在不同的 xml 文件中，所以不要混淆。

**编辑：**我想使用 OS 项目列表背景颜色而不是我自己的颜色`android:listSelector`，因为我已经这样做了。

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="true" android:drawable="@color/blue" />
    <item android:drawable="@color/red"/> 

</selector> 
```

- - - - - - - - - - - -新文件 - - - - - - - - - - - - - --------

```
<ListView android:id="@+id/list_theme"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_above="@id/contbtn_themelist"
    android:stackFromBottom="false"
    android:transcriptMode="disabled"/> 
```

- - - - - - - - - - - -新文件 - - - - - - - - - - - - - --------

```
<RelativeLayout android:id="@+id/edit_back"
    android:layout_width="80dp"
    android:layout_height="77dp"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_alignParentBottom="true"
    android:background="@drawable/edit_skin_selector2"  >

    <ImageView
        android:id="@+id/skinEdit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:scaleType="fitXY"
        android:src="@android:drawable/ic_menu_edit"
        android:layout_centerInParent="true" />
</RelativeLayout> 
```

**编辑：** row.xml

```
 <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:paddingBottom="5dip"
        android:paddingLeft="2dip"
        android:paddingRight="2dip"
        android:paddingTop="5dip" >

        <ImageView
            android:id="@+id/itemlist_checkedd"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:adjustViewBounds="true"
            android:src="@drawable/ic_checkitem" />

        <ImageView
            android:id="@+id/skinpreview"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_toRightOf="@id/itemlist_checkedd"
            android:scaleType="fitXY" />

        <RelativeLayout android:id="@+id/edit_back"
            android:layout_width="60dp"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:background="@drawable/edit_skin_selector2"
            android:layout_centerVertical="true"
            android:layout_centerHorizontal="true">

            <ImageView 
                android:id="@+id/skinEdit"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:src="@android:drawable/ic_menu_edit"
                android:layout_centerInParent="true" />
        </RelativeLayout>

        <ImageView
            android:id="@+id/separator"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_marginRight="5dip"
            android:layout_toLeftOf="@id/edit_back"
            android:src="@drawable/separator" />

        <TextView
            android:id="@+id/title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_marginLeft="2dip"
            android:layout_marginRight="15dip"
            android:layout_toLeftOf="@id/separator"
            android:layout_toRightOf="@id/skinpreview"
            android:textAppearance="?android:attr/textAppearanceLarge" />

 </RelativeLayout> 
```

任何帮助都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T18:24:08.183

我也遇到了这个问题，我用这里的技术解决了：

[http://android.cyrilmottier.com/?p=525](http://android.cyrilmottier.com/?p=525)

看“不要按所有东西！”这一段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T10:44:51.863

您应该尝试使用`android:duplicateParentState="false"`来指示不要为其子级使用父级的可绘制状态。

```
<ImageView
    android:id="@+id/skinEdit"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:scaleType="fitXY"
    android:src="@android:drawable/ic_menu_edit"
    android:layout_centerInParent="true" 

    android:duplicateParentState="false"
   /> 
```

## 更新

使您的按钮的直接父级不可点击，即`android:clickable="false"`在 row.xml 中添加它，看看是否能解决问题。现在点击项目不会改变按钮状态。但是我猜点击按钮应该仍然有效。

## 更新

```
 <ImageButton 
            android:id="@+id/skinEdit"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"

            android:src="@android:drawable/ic_menu_edit"
            android:scaleType="center"
            android:background="@android:drawable/state_redblue_drawable"
            android:padding=10dp
            android:clickable="true"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T18:36:00.483

我之前找到了这个解决方案。我没有链接，但你必须这样做。为包含您的按钮的线性布局创建一个自定义类，然后覆盖 setPressed 状态以不执行任何操作；

```
public class UnpresseableLinearLayout extends LinearLayout
{
    public UnpresseableLinearLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

@Override
    public void setPressed(boolean pressed)
    {
        // Do nothing here. Specifically, do not propagate this message along
        // to our children so they do not incorrectly display a pressed state
        // just because one of their ancestors got pressed.
    }
} 
```

这将解决问题，因为 android:duplicateParentState="false" 在这种情况下将不起作用。

然后用这个替换你的xml中的线性布局，它不能接收新闻操作

编辑：对不起，我刚刚看到你正在使用RelativeLayout ..但我想那是一样的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T06:16:21.137

尝试使 imageView 可点击...

```
<ImageView
        android:id="@+id/skinEdit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:scaleType="fitXY"
        android:src="@android:drawable/ic_menu_edit"
        android:layout_centerInParent="true"
           android:focussable="false"
           android:focussableInTouchMode="false"
           android:clickable="true" /> 
```

或者..

将选择器状态更改为

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_selected="true" android:drawable="@color/blue" />
    <item android:drawable="@color/red"/> 

</selector> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-21T06:10:16.150

行。首先很抱歉回复晚了。

在继续解决方案之前，让我们看看我从你的问题中得到了什么。

您想要的是，当您单击列表项时，红色图像不会转换为蓝色，如果用户单击红色图像，则它应该转换为红色。但不是整个列表项对吗？？？

如果是这样，那就没有什么可做的了。

不要放置选择器。选择器基本上适用于，只要您想在单击该特定视图时更改背景颜色。

是的，如果您想在用户单击它时更改 RedImage 的颜色，那么再次不要在那里使用选择器。但只需在运行时更改该图像的颜色。

就像：

```
@Override 
        public void onClick(View view) { 
                 YOUR_VIEW.setBackgroundColor(0xffff0000);

        } 
```

希望它会帮助你。如果它不能按您的意愿工作，请告诉我。

我愿意帮助你。

享受。：）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-23T12:16:04.643

你用什么来连接列表一个simpleAdapter。要完成您所说的，需要一个扩展 BaseAdapter 的新类并更改该类的 getView 事件的背景图像。

然后在您的主要活动上，您可以设置一个 onlistItemClick 来处理列表项的点击事件。

# graphics - 如何“软化”折线的边缘？

> ID：10162864
> 
> 赞同：2
> 
> 时间：2012-04-15T14:25:52.937
> 
> 标签：graphics, geometry, polygon

给定一条由多个点组成的线，如何通过添加中间点使线更平滑/更曲线/更柔和——同时保持原始点完全完整且不动？

为了说明，我想在这个插图中从上到下：

![在此处输入图像描述](../Images/bfe69a9a079f39444253353ed1bcbed1.png)

请注意，在上图中，如果我们从底部开始，将会有一个更陡峭的右转。然而，在底部图像中，通过添加一个位于两点中间的中间点并使用其他线的角度平均值，使这个急剧的右转变得有点“柔和”。（换句话说，想象一下赛车会行驶的路线，因为它不会突然改变方向。）但是请注意，原始点都没有被“触及”，我只是添加了更多点。

谢谢！！对于它的价值，我正在使用 JavaScript 和 Canvas 来实现它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T15:43:37.937

与每个“中间”边缘（我）相邻的每个边缘（e1和e2）做

*   让 X = '我' 的一半
*   找到超出 e1 和 e2 的“我”的末端的 2 个点 X 距离（见下文）
*   让这两个点成为贝塞尔控制点。
*   使用 DeCasteljau 算法（[此处为示例](https://stackoverflow.com/a/8405756/359538)）找到三次贝塞尔曲线的中点（2 个控制点和“我”的每一端）
*   在我的两个坐标之间插入新的“中点”。

![例子](../Images/9976d98616c93581585f7ba9eeb5b061.png)

```
FloatPoint ExtendLine(const FloatPoint A, const FloatPoint B, single distance)
{
  FloatPoint newB;
  float lenAB =  sqrt((A.x - B.x) * (A.x - B.x) + (A.y - B.y) * (A.y - B.y));
  newB.X = B.x - (B.x - A.x) / lenAB * distance;
  newB.Y = B.Y - (B.Y - A.Y) / lenAB * distance;
  return newB;
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-16T22:56:32.827

在我正在使用的 JavaScript-Canvas 的特定上下文中，在[此处其他地方](https://stackoverflow.com/a/7058606/34170)找到的以下代码为我完成了这项工作——但请参阅 Angus 的答案以获得更通用的方法：

```
var max = points.length;
context.beginPath();
var i = 0;
context.moveTo(points[i].x, points[i].y);
for (i = 1; i < max - 2; i++) {
    var xc = (points[i].x + points[i + 1].x) * .5;
    var yc = (points[i].y + points[i + 1].y) * .5;
    context.quadraticCurveTo(points[i].x, points[i].y, xc, yc);
}
context.quadraticCurveTo(points[max - 2].x, points[max - 2].y, points[max - 1].x,points[max - 1].y);
context.closePath();
context.stroke(); 
```

# php - 处理mysql Insert语句中的重复记录

> ID：10162868
> 
> 赞同：0
> 
> 时间：2012-04-15T14:26:18.950
> 
> 标签：php, mysql

我有一个 php 表单来将数据输入到 mysql 数据库中，我的问题是我如何处理重复记录，例如如果 ID 号已经存在，我如何检查是否存在然后如果它确实抛出错误消息，用于 expale 说“ ID 已在数据库中”，这是插入语句的示例，但是我希望它在输入之前检查数据库中的重复记录

```
$values = $_POST;
foreach ($values as &$value) {
    $value = mysql_real_escape_string($value);
}

$sql1="INSERT INTO loan (loan_id)
VALUES ('$values[loan_id]')";

$result = mysql_query($sql1);
if (!$result) {
    die('Invalid query: ' . mysql_error());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T14:31:13.433

只要在需要唯一的字段上有合适的 UNIQUE KEY 或 PRIMARY KEY，当您尝试插入重复记录时，您就会收到错误消息。然后，您可以在代码中测试此错误。

```
$values = $_POST;
foreach ($values as &$value) {
    $value = mysql_real_escape_string($value);
}

$sql1="INSERT INTO loan (loan_id) VALUES ('$values[loan_id]')";

$result = mysql_query($sql1);
if (!$result) {
    if (mysql_errno() == 1586) {
        echo "ID is already in the database";
    } else {
        die('Invalid query: ' . mysql_error());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T14:30:11.523

做一个选择： select count(loan_id) from load where load_id=$values[loan_id] than if result>0 don't insert and give error message "ID is already in the database" 给用户，否则插入它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T14:30:17.217

在loan_id 列上添加[唯一索引约束。](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)当您的应用程序尝试插入具有相同值的另一行时，MySQL 将抛出错误。

SQL 将类似于：

```
CREATE UNIQUE INDEX loan_id_index ON table_name (loan_id); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T14:33:34.453

在插入或执行和更新之前检查。

**查看**

```
"SELECT COUNT(*) FROM loan WHERE loan_id = '" . $values['load_id'] . "'" 
```

**更新**

```
"INSERT INTO loan (loan_id, some_field) VALUES ('". $values['loan_id'] ."', '". $values['some_field'] ."') ON DUPLICATE KEY UPDATE some_field = VALUES(some_field)"; 
```

# android - 关于 XML Layout 标签属性的 Android SDK 信息

> ID：10162870
> 
> 赞同：3
> 
> 时间：2012-04-15T14:26:28.857
> 
> 标签：android, android-layout, android-xml

我正在研究 Android SKD 文档，我想知道在哪里可以找到有关定义应用程序界面布局时使用的 XML 标记属性的信息，例如*android:name*、*android:id*、*class:*属性片段标记等。我在参考文档中找不到它们，它只列出了 Java 类的文档。有没有关于 XML 标记和属性的特定文档，像 Java 参考文档那样组织？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T15:03:28.080

简短的回答是：它就在那里。特定于类的布局标签通常位于子类*LayoutParams*中，例如[RelativeLayout.LayoutParams](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html)。然而，由于我们使用的大多数类都派生自一些（伟大的伟大的）父类，我们爬上层次结构来查找，直到找到我们想要的标签。最简单的方法是查找您感兴趣的属性的详细信息是搜索它。

如果您找到主列表，请告诉我。在那之前，我依靠 Eclipse 等具有自动完成功能的 IDE 来快速参考。

# objective-c - 什么是类方法中的“自我”

> ID：10162875
> 
> 赞同：0
> 
> 时间：2012-04-15T14:26:59.707
> 
> 标签：objective-c, class, object

> **可能重复：**
> [关于`self`](https://stackoverflow.com/questions/6146660/about-the-keyword-of-self)[目标 c 的静态上下文中允许的关键字](https://stackoverflow.com/questions/6325453/why-is-self-allowed-in-static-context-in-objective-c)
> [Why is allowed`self`](https://stackoverflow.com/questions/6325453/why-is-self-allowed-in-static-context-in-objective-c)

类方法中的对象是什么类型的对象`self`？

例子：

```
+ (void)test {
 NSLog(@"class self: %@", self); 
} 
```

类方法中的`self`对象是类的完全初始化对象还是只是重要元数据的类包装对象？

最好的祝福

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T14:28:25.913

`self`in class 方法具有类型`Class`并指向类对象。您可以向它发送消息，就像将消息发送给班级一样：

```
+ (void) classMethod; {
    // the same
    MyClass* a = [[self alloc] init];
    MyClass* b = [[MyClass alloc] init];
} 
```

# java - 线程在 run() 中挂起和恢复

> ID：10162878
> 
> 赞同：1
> 
> 时间：2012-04-15T14:27:21.900
> 
> 标签：java

我通过实现`runnable`和覆盖实现了多线程`run()`。我想暂停里面的线程`run()`。

请帮我

我应该做什么`void run(){ }`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T14:35:14.867

不知道更多细节很难说。但你的选择是：

*   `Thread.sleep()`- 并且无条件的睡了一会儿

*   `wait/notify`配对等待某个对象

*   阻塞数据结构，例如[`BlockingQueue`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html)，当集合中出现某些内容时唤醒线程

*   `Thread.join()`等待其他线程

*   Java 5 并发抽象，如,[`Semaphore`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Semaphore.html)和许多其他[`CountDownLatch`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CountDownLatch.html)[`CyclicBarrier`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CyclicBarrier.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T14:34:57.377

执行此操作的常用方法是调用`wait`某个对象，然后另一个线程可以通知该对象。这将是您的代码的模式：

```
public void run() {
    . . .
    // decide to suspend thread execution:
    synchronized (LOCK) {
        try {
            LOCK.wait();
        } catch (InterruptedException e) {
            // thread was interrupted -- time to return?
        }
    }
    // execution resumes here after interrupt or notify
} 
```

然后其他一些线程执行此代码：

```
synchronized (LOCK) {
    LOCK.notify(); // or notifyAll();
} 
```

在这些代码片段中，`LOCK`有一些对象可供两段代码访问。如果使用可用对象来完成这项工作是有意义的，则不需要单独的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T14:31:52.440

您可能需要`Object.wait()`then `Object.notifyAll()`，但正确使用它是一件棘手的事情。阅读它。一个很好的来源是 Josh Bloch 的 Effective Java。

# java - 拆分数组列表中的值并存储在不同的数组列表中

> ID：10162881
> 
> 赞同：-1
> 
> 时间：2012-04-15T14:28:10.330
> 
> 标签：java, android

我在 android 中做一个项目，我有一个问题我的数组列表值是这样的

[名称1，地址1，地点1，名称2，地址2，地点2]

如何拆分这些值并希望将名称、地址、位置存储在不同的数组列表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T14:36:46.213

```
ArrayList<String> allInfo, names, addresses, places;
//init everythin
for(int i=0; i<allInfo.size();i++)
  switch( i % 3 ){
     case 0:
        names.add(allInfo.get(i));
        break;
     case 1:
        addresses.add(allInfo.get(i));
        break;
     case 2:
        places.add(allInfo.get(i));
        break;
  } 
```

或者更有效的方法

```
for(Iterator itr=allInfo.iterator(), int i=0; itr.hasNext(); i++)
    switch( i % 3 ){
         case 0:
            names.add(itr.next());
            break;
         case 1:
            addresses.add(itr.next());
            break;
         case 2:
            places.add(itr.next());
            break;
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T14:42:41.587

您可以通过以下方式将数组拆分为不同的数组。

```
 ArrayList<String> mainArray = new ArrayList<String>();
    //mainArray Has Data now we want to shift it into different arrays
    ArrayList<String> name = new ArrayList<String>();
    ArrayList<String> address = new ArrayList<String>();
    ArrayList<String> place = new ArrayList<String>();
    for(int i=0;i<mainArray.size();i++){
        switch(i%3){
        case 0:
            name.add(mainArray.get(i));
            break;
        case 1:
            address.add(mainArray.get(i));
            break;
        case 2:
            address.add(mainArray.get(i));
            break;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T14:51:43.607

```
ArrayList<String> yourArrayList; //this is you array list which have names, addresses and places in it

ArrayList<String> names = new ArrayList<String>();
ArrayList<String> addresses = new ArrayList<String>();
ArrayList<String> places = new ArrayList<String>();

for(int i =0;i<yourArrayList.length;i++){ //iterate yourArrayList and for every element, add it in a seperate array list 
    if(i%3==0)
        names.add(yourArrayList[i])

    else if(i%3==1)
        addresses.add(yourArrayList[i]);

    else if(i%3==2)
        places.add(arraylist[i]);
} 
```

# java - 使用java代码将目录的多媒体文件下载到我的本地机器中

> ID：10162888
> 
> 赞同：0
> 
> 时间：2012-04-15T14:28:57.130
> 
> 标签：java, file-io, ftp

我有一个 java 代码，我将使用它从远程机器的目录中下载文件。现在使用可用的 ftp 类来做同样的事情。当我运行导致所有文件被下载的代码时出现问题但是当我看到它们的大小时，我发现它们都是零字节并且不包含任何东西。如果你能分析一下这背后的可能原因，请提供帮助？

```
package login.multiple;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.net.SocketException;

import org.apache.commons.*; 
import org.apache.commons.net.ftp.FTPClient;
import org.apache.commons.net.ftp.FTPFile;

public class Downloader {

    /**
     * @param args
     * @throws FTPException 
     * @throws FTPIllegalReplyException 
     * @throws IOException 
     * @throws IllegalStateException 
     * @throws FTPListParseException 
     * @throws FTPAbortedException 
     * @throws FTPDataTransferException 
     */
    public static void main(String[] args)  {
        // TODO Auto-generated method stub
        FTPFile[] list = null;
        String fileNames[];
        String path = "\\Users\\XXX\\Documents\\Downloads\\Coldplay - Mylo Xyloto [mp3-vbr-2011]";
        int i = 0;
        FileOutputStream fos = null;
        FTPClient client = new FTPClient();
        //client.connect("192.168.1.2");
        try {
            client.connect("127.0.0.1");
            client.login("xxx", "yyy");
            list = client.listFiles(path);
            for(i=0;i<list.length;i++){
            //for(i=0;i<1;i++){
                fos = new FileOutputStream(list[i].getName());
                client.retrieveFile(path + list[i].getName(), fos);
            }
        } catch (SocketException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        try {
            client.disconnect();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T14:34:43.877

由于您正在打开`FileOutputStream`，因此很有可能您也有责任关闭它。`fos.close()`之后添加`client.retrieveFile`。你的尝试捕捉设计也是一团糟。如果你做对了，它将有助于诊断。将所有内容放入 a并将您的**方法** 声明为. 这会给你一个快速失败的行为。`client.connect``try {...} finally { client.disconnect(); }``main``throws Exception`

# wpf - 更改扩展箭头

> ID：10162889
> 
> 赞同：0
> 
> 时间：2012-04-15T14:29:07.813
> 
> 标签：wpf, xaml

所以玩了扩展器控件，我遇到了这段代码来在关闭时设置扩展器颜色。但是我注意到扩展器的箭头部分仍然是白色的。有没有办法删除箭头或为该区域着色？

截屏：

![在此处输入图像描述](../Images/c38974a4520bedcf8d7bfc72c9cb4039.png)

请记住，我根本没有这方面的经验，而且我不知道如何编辑模板等

```
<Page
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Width="400" OpacityMask="#91000000">
    <StackPanel>
        <StackPanel.Resources>

            <Style TargetType="Border" x:Key="RacePitBorderStyle" >
                <Style.Resources>
                    <LinearGradientBrush x:Key="BackBrush" StartPoint="0.5,0" EndPoint="0.5,1">
                        <GradientStop Color="#EF3132" Offset="0.1" />
                        <GradientStop Color="#D62B2B" Offset="0.9" />
                    </LinearGradientBrush>
                </Style.Resources>
                <Setter Property="Background" Value="{StaticResource BackBrush}"/>
            </Style>

            <DataTemplate x:Key="titleText">
                <Border Style="{StaticResource RacePitBorderStyle}" Height="24">
                    <TextBlock Text="{Binding}" 
                        Margin="4 0"
                        VerticalAlignment="Center"
                        Foreground="White"
                        FontSize="11" 
                        FontWeight="Normal"
                        Width="{Binding
                        RelativeSource={RelativeSource
                        Mode=FindAncestor,
                        AncestorType={x:Type Expander}},
                        Path=ActualWidth}"
                        TextWrapping="Wrap"/>
                </Border>
            </DataTemplate>

            <Style TargetType="{x:Type Expander}">
                <Setter Property="HeaderTemplate" Value="{StaticResource titleText}"/>
            </Style>

        </StackPanel.Resources>

        <Expander Name="hcontCtrl" Header="This is the header.">
            <StackPanel>
                <TextBox>This is a textbox</TextBox>
                <Button>A button</Button>
            </StackPanel>
        </Expander>

    </StackPanel>
</Page> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T15:24:37.440

箭头是[默认控件模板](https://stackoverflow.com/questions/1559261/control-template-for-existing-controls-in-wpf)的一部分，您可以复制并修改它，也可以从头开始创建自己的。

# ant - 尝试编译 Red5 服务器示例时出现 Java 错误

> ID：10162891
> 
> 赞同：1
> 
> 时间：2012-04-15T14:29:13.993
> 
> 标签：ant, jar, log4j, red5

我正在尝试使用[此处](http://sunil-gupta.blogspot.com/2007/03/how-to-create-sample-application-using.html)的教程构建 Red5 服务器示例。我已经完成了所有的事情，包括添加`red5.jar`，`commons-logging-1.1.1.jar`但是当我尝试使用我构建自己的 jar 文件时`ant`，出现以下错误！

```
Buildfile: C:\Users\MediaStudio\workspace\Sample\build.xml
clean:
compile:
    [javac] C:\Users\MediaStudio\workspace\Sample\build.xml:8: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds
    [javac] Compiling 1 source file to C:\Users\MediaStudio\workspace\Sample\classes
    [javac] warning: [options] bootstrap class path not set in conjunction with -source 1.5
    [javac] C:\Users\MediaStudio\workspace\Sample\src\org\xyz\Application.java:4: error: package org.apache.commons.logging does not exist
    [javac] import org.apache.commons.logging.Log;
    [javac]                                  ^
    [javac] C:\Users\MediaStudio\workspace\Sample\src\org\xyz\Application.java:5: error: package org.apache.commons.logging does not exist
    [javac] import org.apache.commons.logging.LogFactory;
    [javac]                                  ^
    [javac] C:\Users\MediaStudio\workspace\Sample\src\org\xyz\Application.java:6: error: package org.red5.server.adapter does not exist
    [javac] import org.red5.server.adapter.ApplicationAdapter;
    [javac]                               ^
    [javac] C:\Users\MediaStudio\workspace\Sample\src\org\xyz\Application.java:7: error: package org.red5.server.api does not exist
    [javac] import org.red5.server.api.IConnection;
    [javac]                           ^
    [javac] C:\Users\MediaStudio\workspace\Sample\src\org\xyz\Application.java:8: error: package org.red5.server.api does not exist
    [javac] import org.red5.server.api.IScope;
    [javac]                           ^
    [javac] C:\Users\MediaStudio\workspace\Sample\src\org\xyz\Application.java:12: error: cannot find symbol
    [javac] public class Application extends ApplicationAdapter{
    [javac]                                  ^
    [javac]   symbol: class ApplicationAdapter
    [javac] C:\Users\MediaStudio\workspace\Sample\src\org\xyz\Application.java:14: error: cannot find symbol
    [javac] private static final Log log = LogFactory.getLog(Application.class);
    [javac]                      ^
    [javac]   symbol:   class Log
    [javac]   location: class Application
    [javac] C:\Users\MediaStudio\workspace\Sample\src\org\xyz\Application.java:17: error: cannot find symbol
    [javac] public boolean appStart(IScope app){
    [javac]                         ^
    [javac]   symbol:   class IScope
    [javac]   location: class Application
    [javac] C:\Users\MediaStudio\workspace\Sample\src\org\xyz\Application.java:26: error: cannot find symbol
    [javac] public boolean roomStart(IScope room){
    [javac]                          ^
    [javac]   symbol:   class IScope
    [javac]   location: class Application
    [javac] C:\Users\MediaStudio\workspace\Sample\src\org\xyz\Application.java:35: error: cannot find symbol
    [javac] public boolean roomConnect(IConnection conn, Object params[]){
    [javac]                            ^
    [javac]   symbol:   class IConnection
    [javac]   location: class Application
    [javac] C:\Users\MediaStudio\workspace\Sample\src\org\xyz\Application.java:44: error: cannot find symbol
    [javac] public void roomDisconnect(IConnection conn){
    [javac]                            ^
    [javac]   symbol:   class IConnection
    [javac]   location: class Application
    [javac] C:\Users\MediaStudio\workspace\Sample\src\org\xyz\Application.java:50: error: cannot find symbol
    [javac] public void appDisconnect(IConnection conn){
    [javac]                           ^
    [javac]   symbol:   class IConnection
    [javac]   location: class Application
    [javac] C:\Users\MediaStudio\workspace\Sample\src\org\xyz\Application.java:14: error: cannot find symbol
    [javac] private static final Log log = LogFactory.getLog(Application.class);
    [javac]                                ^
    [javac]   symbol:   variable LogFactory
    [javac]   location: class Application
    [javac] C:\Users\MediaStudio\workspace\Sample\src\org\xyz\Application.java:18: error: cannot find symbol
    [javac] if(super.appStart(app) == false){
    [javac]    ^
    [javac]   symbol:   variable super
    [javac]   location: class Application
    [javac] C:\Users\MediaStudio\workspace\Sample\src\org\xyz\Application.java:27: error: cannot find symbol
    [javac] if(super.roomStart(room) == false){
    [javac]    ^
    [javac]   symbol:   variable super
    [javac]   location: class Application
    [javac] C:\Users\MediaStudio\workspace\Sample\src\org\xyz\Application.java:36: error: cannot find symbol
    [javac] if(super.roomConnect(conn, params) == false){
    [javac]    ^
    [javac]   symbol:   variable super
    [javac]   location: class Application
    [javac] C:\Users\MediaStudio\workspace\Sample\src\org\xyz\Application.java:45: error: cannot find symbol
    [javac] super.roomDisconnect(conn);
    [javac] ^
    [javac]   symbol:   variable super
    [javac]   location: class Application
    [javac] 17 errors
    [javac] 1 warning

BUILD FAILED
C:\Users\MediaStudio\workspace\Sample\build.xml:8: Compile failed; see the compiler error output for details. 
```

我正在使用 Eclipse 的经典版本（不确定它是否重要，但是！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:07:06.387

我通过将`classpath`属性添加到`javac`构建文件中指向正确 jar 文件的命令来解决这个问题，如下行：

```
classpath="${lib.dir}/red5.jar:${lib.dir}/commons-logging-1.1.1.jar" 
```

# javascript - 停止收集对自身进行排序，但仍然能够对 i 进行排序

> ID：10162893
> 
> 赞同：0
> 
> 时间：2012-04-15T14:29:27.623
> 
> 标签：javascript, backbone.js, underscore.js

我有一个问题，我在 Freenode 上的#documentcloud 中寻求帮助并得到了一些建议，但仍然没有帮助我解决我的问题。

基本上我有一个集合，非常大，最多可容纳 2-3 千个项目，并且它 - 必须 - 进行排序，但它只需要在特定时间进行排序。使用比较器功能很好，它可以保持排序，但是当所有项目都添加到集合中时会花费更长的时间，因为每次添加 2-3000 个项目中的一个时它都会重新使用整个集合。

我尝试了一些建议，其中一个是：

```
collection.comparator = function(object) { object.get('sortBy'); };
collection.sort();
collection.comparator = undefined; 
```

这惨遭失败并且根本不排序，我也尝试过使用`collection.sortBy(...)`它似乎返回排序后的集合，但它对我没有用，因为当我尝试`collection = collection.sortBy(...)`它只是将排序后的集合作为数组转储到变量`collection`中。当我尝试使用收集函数或实用程序时，我收到错误，例如 .each 未定义收集等。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T15:54:23.307

这不能仅仅因为 Collection.sort 实际上调用 Collection.comarator 就可以做到。

你基本上有三个选择

### 选项一

您可以强制您的排序方法不带模型本身的比较器（与调用集合的 .sort 基本相同，但没有 .comarator

```
// in your collection class

_comparator: function(a,b) { /* comparator code */ }

sorter: function() {
   // Of course you should bind this to your collection at this function 
   // and your comparator

   this.models.sort( _comparator ) // .models gives you the array of all models
} 
```

### 选项二

每次向集合中添加内容时删除比较器

```
_comparator = function(a,b) { /* comparator code */ }
collection.comparator = undefined
collection.fetch({ success: function() { collection.comparator = _comparator }) 
```

### 选项三

如果你想的有点超前于你的代码，并且只是因为你想以这种方式显示它而只想对你的集合进行排序，你可以简单地在显示时对其进行排序

```
collection.returnSorted = function () { return collection.sortBy( _comparator ) } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-11T08:07:06.030

试试这个：

```
collection.add(model, {sort: false}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T14:42:22.357

将[`_.sortedIndex()`](http://underscorejs.org/#sortedIndex)单个项目添加到已排序的列表中时是否可以使用？

你可以很容易地找出基于该索引的列表，然后`sortedIndex`：part1 + new_entry + part2。`slice``splice`

这可以防止您每次都对整个列表进行排序。您只是在正确的位置插入一个新条目。

我的回答假设您已经能够进行 2000 多个项目集合的初始排序，并且您只是试图克服一次添加一个新项目时的求助问题。您的问题缺乏关于您的问题到底在哪里的具体性。

# c++ - 使用来自 QtSDK 的 mingw 构建提升

> ID：10162895
> 
> 赞同：2
> 
> 时间：2012-04-15T14:29:36.950
> 
> 标签：c++, qt, boost, mingw

我想在 QtCreator 中使用 boost。我正在使用 Windows 7 并安装了带有 mingw 的 QtSDK。当我执行时，`bootstrap.bat`我收到以下错误

```
C:\boost\boost_1_49_0>bootstrap
Building Boost.Build engine
'cl' is not recognized as an internal or external command,
operable program or batch file.

Failed to build Boost.Build engine.
Please consult bootstrap.log for furter diagnostics.

You can try to obtain a prebuilt binary from

   http://sf.net/project/showfiles.php?group_id=7586&package_id=72941

Also, you can file an issue at http://svn.boost.org
Please attach bootstrap.log in that case. 
```

bootstrap.log 包含以下内容

```
###
### Using 'msvc' toolset.
###

C:\boost\boost_1_49_0\tools\build\v2\engine>if exist bootstrap rd /S /Q bootstrap 

C:\boost\boost_1_49_0\tools\build\v2\engine>md bootstrap 

C:\boost\boost_1_49_0\tools\build\v2\engine>cl /nologo /GZ /Zi /MLd /Fobootstrap/ /Fdbootstrap/ -DNT -DYYDEBUG kernel32.lib advapi32.lib user32.lib /Febootstrap\jam0  command.c compile.c debug.c execnt.c expand.c filent.c glob.c hash.c hdrmacro.c headers.c jam.c jambase.c jamgram.c lists.c make.c make1.c newstr.c option.c output.c parse.c pathunix.c regexp.c rules.c scan.c search.c subst.c timestamp.c variable.c modules.c strings.c filesys.c builtins.c md5.c pwd.c class.c w32_getreg.c native.c modules/set.c modules/path.c modules/regex.c modules/property-set.cmodules/sequence.c modules/order.c 
```

我的第一个猜测是 boost 尝试使用 MSVC 而不是 mingw 构建，但我不知道如何改变这种行为。一些帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T15:47:40.737

找到这个[问题](https://stackoverflow.com/questions/5299468/unable-to-build-boost-libraries-with-gcc)后，我尝试`bootstrap.bat gcc`了导致错误，因为没有找到 gcc。简要查看`path`环境变量表明`QtSDK\mingw\bin`缺少路径，因为 QtSDK 没有添加它。

解决方案很简单

```
path = %PATH%;C:\QtSDK\mingw\bin
bootstrap.bat gcc
.\b2 --toolset=gcc 
```

# linux-kernel - 关于guest在kvm中处理外部中断和外部中断

> ID：10162896
> 
> 赞同：0
> 
> 时间：2012-04-15T14:29:52.630
> 
> 标签：linux-kernel, virtualization, kvm

我是kvm的新手，当客人处理外部中断或模拟设备中断时，有人可以解释它的过程吗？

谢谢阿莫斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-03T14:34:17.000

在 x86 架构中，Intel 在这种情况下，大部分中断都会导致 CPU VM 退出，这意味着 CPU 的控制权将从 guest 回到主机。

所以过程是

1.  来宾操作系统在 VMX 非根模式下使用 CPU。

2.  CPU 知道中断即将到来。

3.  CPU 的控制权返回给以 VMX 根模式运行的主机。（虚拟机退出）

4.  主机 (KVM) 处理中断。

5.  主机执行 VMLAUNCH 指令让 CPU 再次转换到 VMX 非 root 模式以运行来宾代码。

6.  重复 1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T15:01:31.897

如果您是 kvm 新手，您应该首先阅读一些关于 kvm 模块如何工作的论文（我假设您了解虚拟化的基本概念）。它如何使用 qemu 进行 i/o 仿真等。我建议您阅读这些论文：

kvm：Linux 虚拟机监视器：[https](https://www.kernel.org/doc/mirror/ols2007v1.pdf#page=225) : //www.kernel.org/doc/mirror/ols2007v1.pdf#page=225 基于内核的虚拟机技术：[http ://www.fujitsu.com/downloads/MAG/ vol47-3/paper18.pdf](http://www.fujitsu.com/downloads/MAG/vol47-3/paper18.pdf) KVM：基于内核的虚拟化驱动程序：[http ://www.linuxinsight.com/files/kvm_whitepaper.pdf](http://www.linuxinsight.com/files/kvm_whitepaper.pdf)

这些是开始 kvm 的人写的论文。（它们简短而甜蜜:)）
在此之后，您应该开始查看源代码中的 kvm 文档，尤其是文件 api.txt，它非常好。

然后我认为您可以跳入源代码以了解事物的实际工作方式。

干杯

# java - 用文件编写的 C 结构，用 Java 打开

> ID：10162897
> 
> 赞同：4
> 
> 时间：2012-04-15T14:30:05.713
> 
> 标签：java, c++, c

例如在 CI 中具有结构：

```
typedef struct {
    int number;
    double x1;
    double y1;
    double x2;
    double y2;
    double x3;
    double y3;
} CTRstruct;` 
```

然后我将它写入文件`fwrite(&tr, 1, sizeof(tr), fp);`（tr - 它的 CTRstruct var，fp - 文件指针）；

然后我需要用Java阅读它！我真的不知道如何从文件中读取结构......我试图用 阅读它`ObjectInputStream()`，最后一个想法是用 阅读，`RandomAccessFile()`但我也不知道如何......（`readLong(), readDouble()`也不起作用，它可以正常工作但不读取正确的数据）。那么，知道如何用 Java 从二进制文件中读取 C 结构吗？

* * *

如果它很有趣，我的版本读取整数（但它很丑，我不知道该怎么做`double`）：

公共类 MyDataInputStream 扩展 DataInputStream{

```
public MyDataInputStream(InputStream AIs) {
    super(AIs);
}

public int readInt1() throws IOException{
    int ch1 = in.read();
    int ch2 = in.read();
    int ch3 = in.read();
    int ch4 = in.read();
    if ((ch1 | ch2 | ch3 | ch4) < 0)
        throw new EOFException();
    return ((ch4 << 24) + (ch3 << 16) + (ch2 << 8) + (ch1 << 0));
} 
```

* * *

使用 double 我们可以以相同的方式处理（例如使用 int 或使用 long (8bytes)，然后使用本机 func 转换为 double ）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T14:38:41.530

您不应该使用`fwrite`整个`struct`，因为您将不可避免地遇到*填充*和*字节序*的问题。`struct`C 端将按照它在内存中的全部方式转储，以及编译器为性能等而放入的所有差距。这就是“不可移植性之母”！

相反，您应该使用协议缓冲区、JSON 或其他可移植序列化方式来完成您的任务。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-15T14:42:29.173

使用[将数据序列化到磁盘的库](https://stackoverflow.com/questions/371371/serialize-data-structures-in-c)。这将使将其读回 Java 变得容易得多。确保库使用有据可查的存储格式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-15T14:32:19.513

您必须找出在您执行程序的架构中使用了这些 C 类型（int、double）的大小和字节序（感谢 andrew cooke），并在 Java 中使用相同大小的类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-15T14:33:31.347

[`DataInputStream`](http://docs.oracle.com/javase/6/docs/api/java/io/DataInputStream.html)是在 Java 中读取原始输入的典型方法——我*认为*你应该能够做到

```
int number = dataInputStream.readInt();
double x1 = dataInputStream.readDouble();
...
double y3 = dataInputStream.readDouble(); 
```

但我不能 100% 确定字节顺序和其他问题是否兼容。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-15T14:53:03.160

好吧，万一您可以选择 JNI，您可以在 C 中读回它。使用[swig](http://www.swig.org/)，您可以轻松地公开您的结构，以及它从文件中读取的函数。当然，JNI 带来的所有麻烦都不值得单独解决这个问题，但您可能已经在使用它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-22T08:29:07.840

我使用[http://javolution.org/](http://javolution.org/)（或[https://github.com/javolution/javolution](https://github.com/javolution/javolution)）。即使该项目看起来“死”了，我也没有发现任何比“结构”更简单有效的东西。

看看这里了解如何创建一个映射缓冲区的类： [Struct Javadoc](https://javadoc.io/static/org.javolution/javolution-core-java/6.0.0/javolution/io/Struct.html)

# php - 管理员搜索查询

> ID：10162901
> 
> 赞同：0
> 
> 时间：2012-04-15T14:30:44.610
> 
> 标签：php, mysql

我有一个搜索表单，用户可以在其中查找他拥有的庄园（按数字或关键字搜索）。

表中的每个庄园都有一个用户 ID 来识别所有者。

```
$userID variable (from login session).
$accessLevel variable (from login session). / checks if user is admin
$req variable (keyword from form input)

SELECT esName, esID, esAddress FROM estates WHERE
    (esName LIKE '$req' OR esID LIKE '$req')
    AND userID='$userID'" 
```

现在，我的问题是如何创建管理员访问权限。管理员可以检查所有现有的庄园，无论谁拥有它们。除了管理员的独立查询之外，还有其他选择吗？

我对不同的数据库有 7 个不同的查询（取决于单选按钮的选择（例如：房地产、付款等）），对每个数据库进行另一个查询将是一团糟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T14:42:20.063

```
$qry = "SELECT esName, esID, esAddress FROM estates WHERE
    (esName LIKE '$req' OR esID LIKE '$req')" .
    ($accessLevel == 'admin' ? "" : " AND userID='$userID'"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T14:52:47.163

如果您正在寻找一种适用于管理员和普通用户的查询。

```
$admin_access = 'true'; // if user is administrator
$admin_access = 'false'; // if user is not administrator

$query = "SELECT esName, esID, esAddress FROM estates WHERE
    (esName LIKE '$req' OR esID LIKE '$req')
    AND (userID='$userID' OR $admin_access)"; 
```

# c# - 如何在 ASP.Net 中的自定义 ServerControl 的 HTML 输入中呈现新属性

> ID：10162902
> 
> 赞同：0
> 
> 时间：2012-04-15T14:30:46.877
> 
> 标签：c#, .net, custom-controls

我是自定义 asp.net 服务器控件的新手，似乎找不到任何我认为应该是相当容易的任务的示例。我正在尝试编写一个自定义文本框服务器控件，它允许我传入一个名为 placeholder 的新自定义属性，如下所示：

```
<bs:BootstrapTextbox ID="BootstrapTextboxTest" CssClass="span2" placeholder="This is a Test" runat="server"></bs:BootstrapTextbox> 
```

并渲染：

```
<input name="BootstrapTextboxTest" type="text" id="BootstrapTextboxTest" class="span2" placeholder="This is a Test"> 
```

占位符标记在 Twitter 的 Bootstrap JQuery 框架中用于在控件中呈现文本。我想通过我的代码隐藏访问它以进行本地化。

这是我目前的自定义服务器控件：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Linq;
using System.Text;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace BootstrapControls
{
public class BootstrapTextbox : TextBox
{
    [Bindable(false)]
    [Category("Properties")]
    [DefaultValue("")]
    [Localizable(true)]
    public string Placeholder
    {
        get
        {
            String placeholder = (String)ViewState["placeholder"];
            return ((placeholder == null) ? String.Empty : placeholder);
        }
        set
        {
            ViewState["placeholder"] = value;
        }
    }
    protected override void RenderContents(HtmlTextWriter writer)
    {
        writer.Write(Placeholder);
    }
  }
} 
```

再次。我是新手，所以任何方向/示例将不胜感激。提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T15:42:43.147

您的方法看起来不错，应该可行。您能否告诉我们您是否只是在实施之前确认您的方法或面临任何问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:29:26.577

好的，整理好了。我没有意识到我只需要添加我的属性并渲染它：

```
 protected override void AddAttributesToRender(System.Web.UI.HtmlTextWriter writer)
    {
        writer.AddAttribute("placeholder", Placeholder);
        base.AddAttributesToRender(writer);
    } 
```

以前，占位符属性不会在 HTML 中呈现。现在工作。

# php - 是否存在这样的 SQL 查询？

> ID：10162903
> 
> 赞同：1
> 
> 时间：2012-04-15T14:30:47.387
> 
> 标签：php, mysql, sql

我在谷歌上发现了一些东西，上面说 MySql 允许我做这样的事情：

```
$sql = "IF(EXISTS(SELECT api_key, username FROM credentials WHERE id = 0)) 
    THEN UPDATE credentials SET api_key = ?, username = ? WHERE id = 0 ELSE
    INSERT INTO credentials (api_key, username) VALUES (?, ?) END IF"; 
```

这是查询构成的功能：

```
protected function store_credentials($config_file_path = 'envato_credentials_config.json') {
    $credentials_config = $this->get_envato_config($config_file_path);
    $sql = "INSERT INTO credentials (api_key, username, last_update) VALUES (?, ?, NOW()) ON DUPLICATE KEY UPDATE api_key = values(api_key), username = values(username), last_update = values(last_update)";
    if ($stmt = $this->connect->prepare($sql)) {
        $stmt->bind_param('ss', $credentials_config['API'], $credentials_config['User']);
        $stmt->execute();
        $stmt->close();
    } else {
        return false;
    }
} 
```

我可以做这样的事情吗？我是否清楚地理解了该语句，如果在这两列中找不到值，则将插入新值，否则只会更新？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T14:33:59.627

[您可以在重复键语法上](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)使用 MySQL ：

```
INSERT INTO credentials (api_key, username) VALUES (?, ?)
    ON DUPLICATE KEY UPDATE api_key = values(api_key), username = values(username); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T14:34:47.213

mysql 具有执行此操作的 REPLACE 语法。如果记录存在，它会更新它（实际上删除旧行并插入新行），否则插入。

[http://dev.mysql.com/doc/refman/5.0/en/replace.html](http://dev.mysql.com/doc/refman/5.0/en/replace.html)

```
13.2.7\. REPLACE Syntax
REPLACE [LOW_PRIORITY | DELAYED]
    [INTO] tbl_name [(col_name,...)]
    {VALUES | VALUE} ({expr | DEFAULT},...),(...),...
Or:

REPLACE [LOW_PRIORITY | DELAYED]
    [INTO] tbl_name
    SET col_name={expr | DEFAULT}, ...
Or:

REPLACE [LOW_PRIORITY | DELAYED]
    [INTO] tbl_name [(col_name,...)]
    SELECT ...
REPLACE works exactly like INSERT, except that if an old row in the table has the same value as a new row for a PRIMARY KEY or a UNIQUE index, the old row is deleted before the new row is inserted. See Section 13.2.5, “INSERT Syntax”.

REPLACE is a MySQL extension to the SQL standard. It either inserts, or deletes and inserts. For another MySQL extension to standard SQL—that either inserts or updates—see Section 13.2.5.3, “INSERT ... ON DUPLICATE KEY UPDATE Syntax”.

Note that unless the table has a PRIMARY KEY or UNIQUE index, using a REPLACE statement makes no sense. It becomes equivalent to INSERT, because there is no index to be used to determine whether a new row duplicates another.

Values for all columns are taken from the values specified in the REPLACE statement. Any missing columns are set to their default values, just as happens for INSERT. You cannot refer to values from the current row and use them in the new row. If you use an assignment such as SET col_name = col_name + 1, the reference to the column name on the right hand side is treated as DEFAULT(col_name), so the assignment is equivalent to SET col_name = DEFAULT(col_name) + 1.

To use REPLACE, you must have both the INSERT and DELETE privileges for the table. 
```

# vb.net - Visual Basic 列表框

> ID：10162907
> 
> 赞同：2
> 
> 时间：2012-04-15T14:31:25.333
> 
> 标签：vb.net, listbox

我试图将列表框中的每个项目都放入一个字符串数组中。但是，我不断收到索引错误，我不知道为什么。我这样做是为了可以在阵列上执行 LINQ。这是错误和有问题的代码。感谢您提前提供任何帮助。

错误：InvalidArgument=“16”的值对“索引”无效。参数名称：索引

代码：

```
 Dim size As Integer = lstBoxSeats.Items.Count()
    Dim seats(size) As String

    For i = 0 To size
        seats(i) = lstBoxSeats.Items(i).ToString()
    Next 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T14:36:23.090

您的数组是从零开始的，计数是实际的项目数。您需要从索引的计数中减去 1。

IE

**更正：** 刚刚意识到您正在使用 count 来确定您的座位数组的尺寸，这在您的座位数组中留下了一个空位置

```
Dim size As Integer = lstBoxSeats.Items.Count()-1  'Subtract 1 here instead of in the For statement
Dim seats(size) As String 

For i = 0 To size 
    seats(i) = lstBoxSeats.Items(i).ToString() 
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:29:38.283

这是因为索引是从零开始的，即从 0 开始，而 Count 是从 1 开始的项目数量，所以如果有 16 个项目，则意味着最大索引为 15 (0-15)，计数为 16(1-16)

# android - 有谁知道 AIR 是否支持 iOS 或 Android 上的本地多人游戏？

> ID：10162919
> 
> 赞同：0
> 
> 时间：2012-04-15T14:33:08.030
> 
> 标签：android, ios, actionscript-3, air, multiplayer

我目前正在考虑构建多人应用程序的最佳多平台语言，我只是想知道是否有人知道 AIR 是否支持设备之间的本地多人游戏，即通过 LAN 或蓝牙？我需要通过服务器运行游戏的某些方面吗？

不想透露太多（游戏理念），但它类似于“西蒙”类型的游戏，唯一的信息是传递给每个设备的得分/要击败的移动数量或其他简单的数据。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T17:17:58.227

Adobe AIR 支持[ServerSocket](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/ServerSocket.html?filter_flash=cs5&filter_flashplayer=10.1&filter_air=2)类，所以是的，它是不可能的。

**编辑**
正如@davivid 准确指出的那样，ServerSocket 似乎没有在移动设备上实现。虽然您不是 SOL，但您可以使用 Native Extensions 或 AIR 并仍然实现您的最终目标。有关更多信息和大量可下载示例，请参阅[此官方 adobe 页面。](http://www.adobe.com/devnet/air/native-extensions-for-air.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T20:12:42.543

Adobe AIR 支持连接到同一本地网络的设备上的多人游戏，**包括iOS 和 Android。**你用[`NetConnection.connect()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetConnection.html#connect%28%29).

带有源代码的[示例。](http://www.jamesward.com/2010/12/06/p2p-in-desktop-mobile-and-tablet-flex-apps/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T18:37:22.977

如果你在 iOS 上开发。最好使用 iOS 自带的 GameKit。GameKit 也连接到 GameCenter。因此，玩家可以挑战他们身边的朋友或通过互联网与某人对战。这一切都由 API 为您处理，因此您无需担心匹配甚至低级别的套接字通信。

AIR 不支持开箱即用的 GameKit，但有一些原生扩展支持多人游戏。我使用的是：[http ://airextensions.net/shop/extensions/game-kit-by-vitapoly/](http://airextensions.net/shop/extensions/game-kit-by-vitapoly/)

# jquery - 修改 jQuery 脚本以删除一个函数（不破坏它......）

> ID：10162924
> 
> 赞同：0
> 
> 时间：2012-04-15T14:33:51.640
> 
> 标签：jquery, html

我已经安装了一个不错的小 jQuery 邮件脚本，其中包含我不想要的必填字段（主题），并且想将其删除。首先，我只是简单地删除了 html，忘记了验证并得到了一个错误。然后我尝试删除验证是否`<select>`选择了主题 (a) 的脚本部分，但出现错误，现在正在寻求帮助。这是脚本：

html:

```
<form id="contact-form" name="contact-form" method="post" action="submit.php">
      <table width="100%" border="0" cellspacing="0" cellpadding="5">
        <tr>
          <td width="25%" style="text-align:right;"><label for="name">Name</label></td>
          <td width="65%" style="text-align:left;"><input type="text" class="validate[required,custom[onlyLetter]]" name="name" id="name" value="<?=$_SESSION['post']['name']?>" /></td>
          <td width="10%" id="errOffset" style="text-align:right;">&nbsp;</td>
        </tr>
        <tr>
          <td style="text-align:right;"><label for="email">Email</label></td>
          <td><input type="text" class="validate[required,custom[email]]" name="email" id="email" value="<?=$_SESSION['post']['email']?>" /></td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td><label for="subject">Subject</label></td>
          <td><select name="subject" id="subject">
            <option value="" selected="selected"> - Choose -</option>
            <option value="Question">Question</option>
            <option value="Business proposal">Business proposal</option>
            <option value="Advertisement">Advertising</option>
            <option value="Complaint">Complaint</option>
          </select>          </td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td valign="top" style="text-align:right;"><label for="message">Message</label></td>
          <td><textarea name="message" id="message" class="validate[required]" cols="35" rows="5"><?=$_SESSION['post']['message']?></textarea></td>
          <td valign="top">&nbsp;</td>
        </tr>
        <tr>
          <td><label for="captcha"><?=$_SESSION['n1']?> + <?=$_SESSION['n2']?> =</label></td>
          <td><input type="text" class="validate[required,custom[onlyNumber]]" name="captcha" id="captcha" /></td>
          <td valign="top">&nbsp;</td>
        </tr>
        <tr>
          <td valign="top">&nbsp;</td>
          <td colspan="2"><input type="submit" name="button" id="button" value="Submit" />
          <input type="reset" name="button2" id="button2" value="Reset" />

          <?=$str?>          <img id="loading" src="img/ajax-load.gif" width="16" height="16" alt="loading" /></td>
        </tr>
      </table>
      </form> 
```

以及我想从中删除“主题”验证功能的脚本：

```
 $(document).ready(function(){
    $('#contact-form').jqTransform();

    $("button").click(function(){

        $(".formError").hide();

    });

    var use_ajax=true;
    $.validationEngine.settings={};

    $("#contact-form").validationEngine({
        inlineValidation: false,
        promptPosition: "centerRight",
        success :  function(){use_ajax=true},
        failure : function(){use_ajax=false;}
     })

    $("#contact-form").submit(function(e){

        if(!$('#subject').val().length)
            {
            $.validationEngine.buildPrompt(".jqTransformSelectWrapper","* This field is required","error")
            return false;
        }

            if(use_ajax)
            {
                $('#loading').css('visibility','visible');
                $.post('submit.php',$(this).serialize()+'&ajax=1',

                    function(data){
                        if(parseInt(data)==-1)
                            $.validationEngine.buildPrompt("#captcha","* Wrong verification number!","error");

                        else
                        {
                            $("#contact-form").hide('slow').after('<h1>Thank you!</h1>');
                        }

                        $('#loading').css('visibility','hidden');
                    }

                );
            }
            e.preventDefault();
    })

}); 
```

我试过删除上面代码中指示的区域。该脚本有一个“你是人类吗”的简单数学函数，删除代码后，我收到一条警告，指出简单数学的答案是错误的，尽管它是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T12:11:18.633

根据您在此处显示的内容，您需要做的就是删除主题测试的代码块：

```
if(!$('#subject').val().length) {
    $.validationEngine.buildPrompt(".jqTransformSelectWrapper","* This field is required","error")
    return false;
} 
```

如果您在执行此操作后遇到错误，可能是因为服务器端有更多验证。没有你的`submit.php`档案，我们不可能知道。但是您的问题似乎是文件正在返回`data: -1`并被此块捕获：

```
function(data) {
    if (parseInt(data) == -1)
        $.validationEngine.buildPrompt("#captcha","* Wrong verification number!","error"); 
```

如果您发布提交代码，我们可能会为您提供更多帮助。

# python - 将字符串转换为日期时间

> ID：10162931
> 
> 赞同：1
> 
> 时间：2012-04-15T14:34:48.130
> 
> 标签：python, string, datetime

我有一个像“2012/04/08 13:31:00 UTC”这样的 python 字符串如何将其转换为日期时间对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T14:41:03.637

使用[datetime.strptime](http://docs.python.org/library/datetime.html#datetime.datetime.strptime)。

```
from datetime import datetime
datetime.strptime("2012/04/08 13:31:00 UTC", "%Y/%m/%d %H:%M:%S %Z") 
```

返回日期时间对象：

```
datetime.datetime(2012, 4, 8, 13, 31) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T14:37:26.613

这个怎么样？

```
from dateutil.parser import parse
parse('2012/04/08 13:31:00 UTC') 
```

给

```
datetime.datetime(2012, 4, 8, 13, 31, tzinfo=tzutc()) 
```

# database - 使用复合键的数据库规范化？

> ID：10162934
> 
> 赞同：0
> 
> 时间：2012-04-15T14:35:07.847
> 
> 标签：database, normalization

嗨，我一直在思考我要解决的数据库规范化问题几个小时。在我的问题中，我有一个复合主键，并且该键的一列中的数据具有多个值。主键的一列中的多个值是主要问题。我想知道在第一范式中是否只删除除主键以外的重复组，或者也将删除具有多个值的主键列。对于你们人们来说，理解起来可能还是很模糊。所以我发布了表格的截图：

[http://tinypic.com/view.php?pic=ev47jr&s=5](http://tinypic.com/view.php?pic=ev47jr&s=5)

（请打开上图查看表格）

在这里我想问的问题是，在第一种范式中，是否仅删除第 4、5、6、7 列或第 2 列也将被删除（因为它还包含多个值）？

如果我不删除第二列，那么它不会进入 1NF，但如果我也删除它，那么它将直接进入 3NF。帮助？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T11:12:48.143

> 这里我想问的问题是，在第一个范式中，是否只删除第 4、5、6、7 列，或者第 2 列也将被删除

所有包含多个值的列都将被更改。这包括第 2 列。

> 如果我不删除第二列，那么它不会进入 1NF，但如果我也删除它，那么它将直接进入 3NF。

规范化不是这样工作的：

*   确定在 1NF 中但*尚未*在 2NF 中*的结构。*
**   确定在 2NF 中但*尚未*在 3NF 中*的结构。***   确定在 3NF 中但*尚未*在 BCNF 中*的结构。***   确定在 BCNF 中但*尚未*在 4NF 中*的结构。***   确定在 4NF 中但*尚未*在 5NF 中*的结构。***   确定在 5NF 中但*尚未**在*6NF 中的结构。*****

 **关系模型并没有说对于每个在 1NF 中的关系 R，都存在一个*在*2NF 中但还*没有*在 3NF 中的分解。它只是没有这么说，但这是一个常见的误解。

在实践中，移除部分密钥依赖以达到 2NF 并发现结果在 5NF 中并不罕见。**

# django - 如何在基于类的通用视图中访问 RequestContext？

> ID：10162940
> 
> 赞同：17
> 
> 时间：2012-04-15T14:35:22.730
> 
> 标签：django, django-generic-views, requestcontext, django-class-based-views

我的 urls.py 中有这条路径：

```
archive_index_dict = {
    'queryset': News.objects.filter(show=True),
    'date_field': 'date',
    'template_object_name': 'object_list',
}

...

url(r'^$', 'django.views.generic.date_based.archive_index',
        archive_index_dict, name='news_archive_index'
    ), 
```

现在我想在模板中检测页面是否为当前页面（这是用于菜单样式）。既不 工作`{{ request.path }}`也不`{{ request.get_full_path }}`在模板中工作。

我应该改用什么？

**解决方案**

为了`request`在模板中可用，我必须添加`django.core.context_processors.request`到`TEMPLATE_CONTEXT_PROCESSORS`. 这不是默认设置的（从 django 1.3 开始）。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-17T03:39:57.733

您是否`'django.core.context_processors.request'`设置了上下文处理器？几乎所有 CBV`RequestContext`默认使用

# node.js - 密码重置后自动登录用户

> ID：10162941
> 
> 赞同：1
> 
> 时间：2012-04-15T14:35:29.330
> 
> 标签：node.js, everyauth

我在我的 node.js 应用程序中使用everyauth 密码身份验证进行注册和登录。现在，当用户重置密码时，他们必须在保存密码后登录。我希望everyauth 在设置密码后自动登录用户。这可能吗？怎么做到呢？

# knockout.js - 可观察数组长度始终为零

> ID：10162943
> 
> 赞同：3
> 
> 时间：2012-04-15T14:35:50.963
> 
> 标签：knockout.js

这是js：

```
var view = function(){
    self.arry = ko.observable();

    self.arry(ko.mapping.fromJS([{prop:'Test'},{prop:'Test'}]));

    console.log(self.arry().length);       
}
var v = new view(); 
```

可观察的数组长度始终为零。如何获得正确的长度？

编辑：
更新了 JS 并修复了错误。 [http://jsfiddle.net/eRHTv/](http://jsfiddle.net/eRHTv/)

```
var view = function(){
  var self = this;
  self.arry = ko.observableArray();

  self.load_items = function(){
    setTimeout(function(){
    self.arry(ko.mapping.fromJS([{prop:'Test'},{prop:'Test'}]));
    }, 100);
  }
  self.no_items_visible = ko.computed(function(){
     return (self.arry().length == 0);
  });

  self.load_items();

  ko.applyBindings(self);
}

var v = new view(); 
```

当您运行此程序时，不会始终显示任何项目 div，如果您执行 self.arry = data，则视图将不会更新。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T14:49:53.870

第一件事是：你永远不会定义变量`self`：

```
var self = this; 
```

第二：如果输入是一个数组，ko.mapping.fromJS() 返回一个可观察的数组：

```
self.arry = ko.mapping.fromJS(...); 
```

总共：

```
var view = function() {
    var self = this;

    self.arry = ko.mapping.fromJS([ {prop:'Test1'}, {prop:'Test1'} ]);

    console.log(self.arry().length);
}

var v = new view(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-10T20:55:02.063

这篇文章解释了为什么可观察数组的长度总是等于 0。实际上，可观察数组（由 ko.observableArray(...) 返回）是一个函数。任何函数都有长度属性。

更多在这里：

[https://github.com/knockout/knockout/issues/4](https://github.com/knockout/knockout/issues/4)

因此，您应该始终使用：myObservableArray().length 而不是 myObservableArray.length。

# php - 文件下载实际完成时触发动作

> ID：10162944
> 
> 赞同：2
> 
> 时间：2012-04-15T14:35:53.033
> 
> 标签：php

现在有很多文件托管网站 ( `uploading websites`)，例如每次完整下载某个文件的点数。

**我的问题** 我想了解他们使用的想法是什么！

***它如何***只依靠***文件的完整***下载？！我的意思是如果我***在文件开始后取消下载***文件，它不会计分！它是怎么知道的！是否有任何 php 函数能够知道我是否取消了下载某些确切的文件！

这个问题一直在我脑海中思考并思考，但我无法理解它是如何工作的，或者它背后的想法是什么。~ 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:49:51.090

这可以通过使用我的其他答案作为基础来完成[如何授予对 public_html 目录之外的文件的下载访问权限？](https://stackoverflow.com/a/10273048/1338846)并替换`readfile( $filename )`
为`readfileWhileConnected( $filename )`：

## 读取文件直到 EOF 或断开连接：

```
/** Read $filename until EOF or disconnect, 
 * if disconnect then error_log() count of bytes read already 
 */
function readfileWhileConnected( $filename ) {
    // Save and set ini values:
    $user_abort = ignore_user_abort();
    ignore_user_abort(false);
    // Get file size and set bytes_sent to zero:
    $fsize = filesize($filename);
    $bytes_sent = 0;
    // Open file:
    $f = fopen($filename, 'r');
    // Read file:
    while($chunk = fread($f, 1024)) {
        // Check if connection is still open:
        if(!connection_aborted()) {
            // Send $chunk to buffer (if any), then flush() buffers:
            echo $chunk;
            flush();
            // Add $chunk length to $bytes_sent
            $bytes_sent += strlen($chunk);
        } else {
            // Close file:
            fclose($f);
            error_log("Connection closed at $bytes_sent/$fsize");
            exit();
        }
    // Close file:
    fclose($f);
    // Reset ini values:
    ignore_user_abort($user_abort);
    return $bytes_sent;
    }
} 
```

在您`class myNewSuperDownloadHandlerClass { ... }`准备好新的闪亮之后，请确保您仅通过[此处](https://stackoverflow.com/a/10273048/1338846)`filedownload.php`描述的方式提供下载，或者如果做得很好，然后使用它，只需确保用于需要连接状态轮询的每个下载。`myNewSuperDownloadHandlerClass()``readfileWhileConnected()`

如果用户关闭连接，您可以轻松添加要触发的回调，这里只有 2 个退出点。*（看到了很多经常有的功能`return false; return true; return null; return false; return true;`等等..）*

# spring - Spring ReloadableResourceBundleMessageSource 配置

> ID：10162946
> 
> 赞同：2
> 
> 时间：2012-04-15T14:36:24.300
> 
> 标签：spring, configuration

我开发了一个简单的 Spring 应用程序，这是我的大学任务。有 3 个配置文件：web.xml、core-context.xml、dispatcher-servlet.xml 和 1 个具有默认属性的文件，称为 messages.properties，位于 /WEB-INF/ 文件夹中。

在我的应用程序中，我有 ReloadableResourceBundleMessageSource 的以下配置，它工作正常：

**核心上下文.xml**

```
<bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
  <property name="basenames" value="/WEB-INF/messages" />
  <property name="useCodeAsDefaultMessage" value="true" />
</bean> 
```

**web.xml**

```
<context-param>
  <param-name>contextConfigLocation</param-name>
  <param-value>classpath*:core-context.xml</param-value>
</context-param>
<servlet>
  <servlet-name>dispatcher</servlet-name>
  <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
  <load-on-startup>1</load-on-startup>
</servlet> 
```

但事实证明，我的任务指令说我应该在 dispatcher-servlet.xml 中配置 ReloadableResourceBundleMessageSource bean。问题是，每当我从 core-context.xml 中删除上述配置并将其放入 dispatcher-servlet.xml 时，我的本地人都不再显示。

你能解释一下为什么会出现这个问题吗？将 bean 配置放入 core-context.xml 和 dispatcher-servlet.xml 有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T05:17:03.443

您还没有发布您的 dispatcher-servlet.xml 但我相信它没有被 spring 容器初始化，因为它没有在任何地方声明。如果您必须指定另一个名为 dispatcher-servlet.xml 的文件，则只需将其导入 core-context.xml 即可。这应该可以解决您的问题。

# iphone - iPhone 应用程序使用什么编程语言？

> ID：10162948
> 
> 赞同：0
> 
> 时间：2012-04-15T14:36:36.423
> 
> 标签：iphone

所以基本上，我想知道，我可以制作 iPhone 应用程序的编程语言和编译器是什么？

基本上，目前我的编程知识是 -

PHP、HTML、CSS、JAVASCRIPT、Jquery、AJAX、C++、Pascal 和一点点 JAVA。

iPhone 应用程序使用什么编程语言？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T14:38:53.547

语言是[Objective-C](http://en.wikipedia.org/wiki/Objective-C)。如果您了解 HTML 和 JavaScript，则可以查看[PhoneGap](http://phonegap.com/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-15T14:41:20.543

*   本机语言是 Objective-C，但您也可以使用 C、C++ 和 JS
*   [或者您可以通过PhoneGap SDK](http://phonegap.com/)使用 HTML/CSS + Javascript
*   或者您可以使用 C# 和[Monotouch SDK](http://xamarin.com/monotouch)
*   或者您可以将 JS 与[Titanium Appcelerator一起使用](http://www.appcelerator.com/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-11-25T12:49:58.610

Swift 是 Apple 为 iOS 和 OS X 开发创建的多范式编译编程语言。Swift 在 Apple 的 2014 年全球开发者大会上推出，旨在与 Apple 的 Cocoa 和 Cocoa Touch 框架以及为 Apple 产品编写的大量现有 Objective-C 代码一起工作。

检查以下链接以获取更多参考： [https ://developer.apple.com/swift/](https://developer.apple.com/swift/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-15T14:40:23.267

原生 iPhone 应用程序使用的是 Objective C。您也可以在其中注入 C++ 和 C。但如果你精通 Javascript，你可能想看看[appcelerator](http://www.appcelerator.com/)，它基本上会将 javascript 编译成 Objective-C 和或[phonegap](http://phonegap.com/)，它将 webapps 嵌入 iPhone 应用程序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-15T14:38:34.577

你需要[目标 C](http://en.wikipedia.org/wiki/Objective-C)

# java - Java - 使用 fireTableDataChanged() 更新 JTable；

> ID：10162950
> 
> 赞同：1
> 
> 时间：2012-04-15T14:36:58.563
> 
> 标签：java, swing, jtable, jbutton

我的程序中有一个 JTable。我想在点击 JButton 后更新它。我写了这个：

```
DefaultTableModel myTable = new DefaultTableModel(celDatas,celNames);
        JTable source = new JTable(myTable){public boolean isCellEditable(int rowIndex, int colIndex) {
  return false;}};
        JScrollPane pane = new JScrollPane(source);

(...)
    start.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e)
        {
                    query = "Select sal FROM EMP";
    myTable =(DefaultTableModel)source.getModel();
                myTable.fireTableDataChanged();
} 
```

问题是 id 不会更新我在 JTable 上的数据。如何解决这个问题？

* * *

编辑： JTable 通过 JScrollPane 显示在我的人身上。我现在做这个：

```
 source = new JTable(myTable){public boolean isCellEditable(int rowIndex, int colIndex) {return false;}};
   pane = new JScrollPane(source); 
```

我还创造了一个新的空白，从数据库中获取数据+在那里我定义了myTable：

```
void queryConnection() {
   (...)
        myTable = new DefaultTableModel(celDatas,celNames); 
```

}

我添加了一个 JButton，它更新了我的 JTable（当我们更改查询时。

```
start.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e)
    {
          query = "Select sal FROM EMP";
          queryConnection();
    }
} 
```

==================================================== ===============================

```
public class Application2 implements Runnable {
private JTable source;
   private JScrollPane pane;
   private DefaultTableModel myTable;

   private JPanel panel;

   private String[][] celDatas = null;
   private String[] celNames = null;

   public void run() {

(...)

start.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e)
        {
            if(...) {

                query = "Select sal FROM EMP";
                queryConnection();
            }
}

if(query == null) {
            query = "Select * from EMP";
            queryConnection();
        }

        source = new JTable(myTable){public boolean isCellEditable(int rowIndex, int colIndex) {return false;}};
        pane = new JScrollPane(source);
        pane.setSize(f.getSize().width-60,300);
        pane.setLocation(30,20);

panel.add(pane);
f.add(panel);
        f.pack();
}
void queryConnection() {

//here is connection and downloading datas

myTable = new DefaultTableModel(celDatas,celNames);

} 
```

我希望现在更方便？;)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T14:42:25.413

如果您正在创建新的 TableModel，则不需要调用任何`fireXXX()`方法，但如果您正在基于 AbstractTableModel 编写 TableModel（您不是），则主要需要调用这些方法。

我认为你的问题出在其他地方。您似乎正在创建一个新的 JTable 并将其添加到一个新的 JScrollPane。您是否将这些组件添加到您的 GUI（您没有显示）？如果是这样，您要添加到的容器是否能够顺利接受新组件？您是否重新验证并重新绘制容器？您新创建的 JTable 是否显示在 GUI 中？

或者，您的 GUI 中是否已经显示了 JTable？如果是这样，也许您想要做的就是设置它的模型而不是创建一个新的 JTable。我喜欢这个解决方案，因为它是最简单的。

**编辑 1**
我会这样做：

*   在后台线程中访问数据库并从中获取信息。
*   创建一个新的 DefaultTableModel 对象，用从数据库中提取的数据填充它。
*   如果一个已经存在，我不会创建一个新的 JTable。相反，我只需调用`setTableModel(...)`当前显示的 JTable 并传入我新创建的 DefaultTableModel 对象。
*   然后我会坐下来享受我成功的大笔钱和其他成果。

**编辑 2**
Ganjira，为了让我们能够最好地帮助您，我们需要更好地理解问题，这就是为什么我要求对您的问题或[sscce](http://sscce.org)进行全面澄清，但我都没有看到。我在理解您的问题方面遇到的问题包括：

*   同样，您的 GUI 中是否已经显示了 JTable，现在您正试图根据从数据库中提取的数据更改 JTable 中显示的数据？
*   如果是这样，为什么不简单地改变现有 JTable 的模型，而不是创建一个全新的 JTable？
*   如果您在应用程序中还没有 JTable 而现在想要显示一个，您声明您的数据没有显示，但不显示代码来帮助我们理解原因。
*   如果您可以回答前两个问题，我们可能不需要 sscce，但如果没有，请理解您当前的帖子与[sscce 相差甚远](http://sscce.org)，因为我们无法运行它，我们无法编译它，它不需要t为我们重现您的问题，...我想知道您是否已经阅读过该链接，因为它解释了为什么所有这些条件都很重要（并且简洁，以免将我们淹没在大量不相关的代码中）。
*   不，您不需要发布 SSCCE，但如果我们无法根据您的问题中的文本和您的代码片段为您提供帮助，它确实提供了更好的机会让我们了解问题并找到解决方案你。

**编辑 3**
你说：

> JTable 已经在 GUI 中，因为它显示了“程序的开始”。单击 JButton 后，我想更改 JTable 中的值。它不会改变现有 JTable 的模型——它不会改变任何东西。

这让我感到困惑，因为最好的解决方案是我一直建议的——不要创建新的 JTable，而是创建一个新的 DefaultTableModel 并更改现有 JTable 的模型。你还没有提到你为什么不尝试这个，或者如果你已经尝试过，它是如何不适合你的。

# iphone - cordova/phonegap 1.6 在第二次发布时崩溃

> ID：10162952
> 
> 赞同：0
> 
> 时间：2012-04-15T14:37:06.370
> 
> 标签：iphone, cordova, crash, xcode4.3

**我使用 xcode 4.3.2 和 phonegap 1.6。我的应用程序第一次运行良好，但如果我在 ios 模拟器中关闭该应用程序并第二次启动它，它就会崩溃。为什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T14:56:05.690

这可能只在模拟器中。我在模拟器中遇到过几次，但在设备上从来没有发生过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-23T05:55:19.970

我目前遇到这个问题，除了在 Android 中。这与发布标志有关。更多信息可以在这里找到：[https ://forum.ionicframework.com/t/v2-android-second-app-start-doesnt-work-for-release-version/125583](https://forum.ionicframework.com/t/v2-android-second-app-start-doesnt-work-for-release-version/125583)

但如果链接断开，这是一个复制面食：

> ### 概要：
> 
> 我的应用程序在页面 html 上有一个画布。在初始安装的第二次启动时，应用程序启动不显示画布。我知道是因为 body 标签有背景，而画布有不同的背景。该页面没有为其定义的模块。***这仅在使用 --release 构建时***
> 
> ### 环境：
> 
> *   离子：3.20
> *   科尔多瓦：7.1.0
> *   角度：5.2.9
> *   Android：6.1.2（我认为构建目标 25）
> *   京东：1.8
> 
> ### 附加信息：
> 
> 我在做一些最前沿的事情，但我现在已经无法自己解决这个问题了。我正在使用 pixi.js，特别是来自一个名为 angular2pixi 的附加接口库。A2p 不支持 --aot 构建。
> 
> 在我继续之前，让我重申*一切正常，即使在多个应用程序重新启动时，除了 --release 之外的所有内容*。
> 
> 顶层架构相当简单：
> a2p 提供具有 pixi 实例的服务。我的应用程序使用该服务，并有一个带有画布的页面等待 Pixi 的渲染。当应用程序初始化时，它启动 pixi 服务，将画布引用传递给它，瞧：html5ified angular。
> 
> 我已将渲染的实际初始化卸载到用户单击的按钮，以确保它与生命周期无关，但这也不起作用。更有趣的是，当应用程序未加载时，我制作的按钮没有显示。很可能，这意味着离子含量本身没有显示出来！
> 
> 最有趣的是，**如果我进入应用信息并删除存储（不是缓存），那么它会在下一个应用启动时起作用！**我正在使用 localstorage，但我尝试删除所有提及它并且没有运气。***此外***，在第二次安装时，或者更确切地说是技术上的更新，该应用程序在此后的每次启动时都可以运行。
> 
> 这发生在android上，除了我第一次尝试之外，我似乎无法在iOS中复制它。因为它是发布版本，所以很难调试。我尝试使用 Ionic Pro Monitoring 无济于事。
> 
> 到目前为止，我的倾向是：
> 
> *   某种类型的缓存导致画布本身出现错误
> *   导致 cordova 或 ionic 终止的错误
> *   我的构建过程有问题
> *   a2p 的架构（鉴于我对 cordova/ng2 的底层机制知之甚少 -> 本机编译，我该如何进行调试？）
> *   一个科尔多瓦插件（可能导致上述情况之一）
> 
> 因此，您可能从我的格式中可以看出，我介于书呆子天堂和地狱之间。如此有趣的问题……但请停止

# windows - 如何找到要包含在 MFC VS 项目中的所有 DLL？

> ID：10162954
> 
> 赞同：1
> 
> 时间：2012-04-15T14:37:15.573
> 
> 标签：windows, dependencies, release

我已经静态链接了 MFC，但是当我将 EXE 提供给任何人时，会发生错误。

我使用 Dependency Walker 来查找我需要的所有外部 DLL。我在配置文件模式 (F7) 下运行 Dependency Walker。在包含所有列出的文件后运行应用程序，会出现以下错误：

> 未找到 msvc100.dll

在文件夹中添加此文件后，应用程序将启动。但是我无法以这种方式找到所有外部 DLL 依赖项。还有另一种（更好的）方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T14:54:07.947

有一个[关于如何重新分发 MFC 库的教程](http://msdn.microsoft.com/en-us/library/ms235264%28v=vs.90%29.aspx)。你看过了吗？

# visual-c++ - 如何从不同的 HeaderFile 类声明 KeyEventArgs？

> ID：10162955
> 
> 赞同：0
> 
> 时间：2012-04-15T14:37:16.677
> 
> 标签：visual-c++, c++-cli

我有一个 HeaderFile Common_Datas.h

```
//Common_Datas.h

public ref class MyDBDatas
{
//blah...blah...blah...

public: static System::Void Material_Name( System::Object^ Sender, System::Windows::Forms::KeyEventArgs^ e) {
//blah...blah...blah...
}

public: static System::Void Supplier_Name( System::Object^ Sender, System::Windows::Forms::KeyEventArgs^ e) {
//blah...blah...blah...
}
}; 
```

现在从我的 Form2 - textBox2 我想声明

```
textBox2->KeyDown += gcnew KeyEventHandler(MyDBDatas, &MyDBDatas::Supplier_Name); 
```

1.  我没有得到上面的线......
2.  另外我想学习相同的语句，如何在“代表”语句中使用？

    谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T16:04:25.597

委托构造函数中的第一个参数是应该调用委托的对象，而不是类型。在 MyDBDatas 构造函数中试试这个：

```
MyDBDatas()
{
    textBox2->KeyDown += gcnew KeyEventHandler(this, &MyDBDatas::Supplier_Name);
}                                              ^^^^ 
```

# for-loop - AWK - 在循环中打印行？

> ID：10162958
> 
> 赞同：0
> 
> 时间：2012-04-15T14:37:28.467
> 
> 标签：for-loop, awk

我有这个命令：

```
$ awk 'BEGIN{c="1"; for(i=NF; i<9; i++) print c++, "_"}'
1 _
2 _
3 _
4 _
5 _
6 _
7 _
8 _
9 _ 
```

我希望这个命令打印结果：

```
1 _ _ _ _ _ _ _ _ _
2 _ _ _ _ _ _ _ _ _
3 _ _ _ _ _ _ _ _ _
4 _ _ _ _ _ _ _ _ _
5 _ _ _ _ _ _ _ _ _
6 _ _ _ _ _ _ _ _ _
7 _ _ _ _ _ _ _ _ _
8 _ _ _ _ _ _ _ _ _
9 _ _ _ _ _ _ _ _ _ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T14:42:57.423

```
awk '
  BEGIN { 
    for (i=0; i<9; ++i) {
      printf("%d",i+1);
      for (j=0; j<9; ++j) {
        printf(" _");
      }
      printf("\n");
    }
  }
' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T16:20:03.210

这类似于 Vaughn 的回答，但如果这很重要，可能会快一点。

```
awk 'BEGIN { str = ""; for (i = 1; i <= 9; i++) str = str" _";
             for (i = 1; i <= 9; i++) printf("%d%s\n", i, str) }' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T00:53:27.387

为什么要编写代码来生成一小段简单的文本？

你已经有了你想要的输出，因为你输入了它。只需使用那段文字。

以下 shell 脚本直接来自您的预期输出：

```
cat <<EOF
1 _ _ _ _ _ _ _ _ _
2 _ _ _ _ _ _ _ _ _
3 _ _ _ _ _ _ _ _ _
4 _ _ _ _ _ _ _ _ _
5 _ _ _ _ _ _ _ _ _
6 _ _ _ _ _ _ _ _ _
7 _ _ _ _ _ _ _ _ _
8 _ _ _ _ _ _ _ _ _
9 _ _ _ _ _ _ _ _ _
EOF 
```

# javascript - 如何在在线文本编辑器中包含色轮以编辑 css 文件

> ID：10162960
> 
> 赞同：1
> 
> 时间：2012-04-15T14:38:05.093
> 
> 标签：javascript, colorbox

我想在 onchange 或 onkeyup/onkeydown 事件中的在线文本编辑器中包含一个色轮，当一个人移动到“**颜色**”之类的特定工作时，它将显示色轮以选择颜色并传递值。请让我知道是否有类似的东西可用，或者请给我有关如何执行此操作的建议？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T14:43:07.677

这是一个 jQuery 插件，可以做到这一点：
[Farbtastic Color Picker](http://acko.net/blog/farbtastic-jquery-color-picker-plug-in/)

# android - TextView 上标显示不正确

> ID：10162961
> 
> 赞同：1
> 
> 时间：2012-04-15T14:38:07.337
> 
> 标签：android, textview, superscript

我在第一个答案中使用了找到的代码：[Subscript and Superscript a String in Android](https://stackoverflow.com/questions/3543454/subscript-and-superscript-a-string-in-android/3543625#3543625)，但是将它与以前的字符串连接起来，所以我的代码类似于：

```
TextView text = (TextView) findViewById(R.id.text);
text.setText(text.getText().toString()+Html.fromHtml("<sup>-2</sup>")); 
```

比如说，文本的内容是“3x”，使用 setText 设置文本后，它的格式为“3x-2”，没有下标。

TextView 的 XML 是：

```
<TextView
            android:id="@+id/text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_marginLeft="55dp"
            android:layout_marginTop="210dp"
            android:text="3x"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textSize="14pt"
            android:visibility="VISIBLE" 
/> 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T15:41:55.270

而不是这条线..

```
text.setText(text.getText().toString()+Html.fromHtml("<sup>-2</sup>")); 
```

试试这样

```
 text.setText(Html.fromHtml(text.getText().toString()+"<sup>-2</sup>")); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-02T18:47:22.193

请检查以下对我来说工作正常

```
"TEXT<sup><small>TM</small></sup> TEXT" 
```

上面的代码将使 TM 变为下标，并使文本大小变小

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-09-18T06:48:10.127

同样对于小尺寸，您可以使用 -

```
text.setText(Html.fromHtml(text.getText().toString()+"<sup><small>-2</small></sup>")); 
```

将您的整个文本只放入一个`Html.fromHtml("Your whole string")`

来自strings.xml

```
<string name="superscript_str">YourString&lt;sup&gt;&lt;small&gt;SuperScriptString&lt;/small&gt;&lt;/sup&gt;</string> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T10:29:46.287

如果你想显示小作为超级文本使用

```
text.setText(Html.fromHtml(text.getText().toString()+"<sup>small>-2</small>/sup>")); 
```

# eclipse - 导出到 JAR 后没有 JFrame 标题

> ID：10162978
> 
> 赞同：1
> 
> 时间：2012-04-15T14:40:19.473
> 
> 标签：eclipse, jar, export, frame, title

在 Eclipse 中运行 JAVA 应用程序时，会显示 JFrame 标题，但在运行导出的 JAR 文件时，框架上没有显示标题。

```
public void mouseMoved(MouseEvent e) {
  f.setTitle("X: " + location.x + " , Y: " + location.y);
  recenterMouse();
}
public void init() {
  // add frame
  f = new JFrame("Muis Meet");
  f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
  f.setSize(screensizex, screensizey);
  f.getContentPane().add(this, FlowLayout.LEFT);
  f.setVisible(true);

  centerLocation.x = getWidth() / 2;
  centerLocation.y = getHeight() / 2;
  recenterMouse();
  addMouseListener(this);
  addMouseMotionListener(this);
}

public static void main(String[] args) {
  java.awt.EventQueue.invokeLater(new Runnable() {
  @Override
  public void run() {
    MuisMeet muismeet = new MuisMeet();
    muismeet.init();
  }});
}

@Override
public void mousePressed(MouseEvent arg0) {
  recenterMouse();
  location.x = 0;
  location.y = 0;
  f.setTitle("X: 0 , Y: 0");
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T04:58:39.737

发现了问题。在“导出”对话框中，在“启动配置”下自动选择了另一个项目——而不是我右键单击的项目。

# c - 这个递归 C 代码是如何工作的？

> ID：10162982
> 
> 赞同：0
> 
> 时间：2012-04-15T14:40:35.493
> 
> 标签：c, recursion

有很多递归问题，我基本上了解一些简单的递归算法，例如数组元素的总和。但是，我的朋友给了我这个反转数组的代码：

```
void r(int a[], int s)
{
     if(s <=2 ) return;
     int t = a[0];
     a[0] = a[s-1];
     a[s-1] = t;

     r(&a[1], s-2); //  this line confused me, why &a[1]
} 
```

我知道如何使用普通的 for 循环来反转数组。但是这段代码真的让我对递归感到困惑。

任何人都可以解释上面的代码行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T14:59:55.323

它相当于

```
void r(int *arr, size_t len)
{
     for ( ; len >= 2; arr+=1,len-=2 ) {
       int t = arr[0];
       arr[0] = arr[len-1];
       arr[len-1] = t;
       }

} 
```

，其中递归调用被循环替换。循环（`arr+=1,len-=2`）的“增量”部分与递归调用的参数完全相同；结束条件 ( `len >= 2`) 等价于递归停止器（原来是错误的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T15:25:08.557

这个算法背后的想法是在每一步：

-：交换数组的最后一个元素`a[s-1]`和第一个元素：`a[0]`

```
 int t = a[0];
    a[0] = a[s-1];
    a[s-1] = t; 
```

-: 并递归交换中间：

```
 r(&a[1], s-2); 
```

要理解语法，请记住这是给定数组的第 th 个元素的`&a[n]`地址。`n+1`如果你有`int *b = &a[1]`，那么`b[0] == a[1]`，，`b[1] == a[2]`等等。

所以：

*   `&a[1]`指从 array 的第二个元素开始的数组`a`。
*   `s - 2`意味着您递归传递的数组的长度短了 2 个元素。

如果你有一个数组`[1 2 3 4 5 6 7 8 9 10]`，递归进行时会发生以下情况：

```
[1 2 3 4 5 6 7 8 9 10] // r(&a[0], 10)
10 [2 3 4 5 6 7 8 9] 1 //   r(&a[1], 8
10 9 [3 4 5 6 7 8] 2 1 //     r(&(&a[1])[1], 6)
10 9 8 [4 5 6 7] 3 2 1 //       r(&(&(&a[1])[1])[1], 4)
10 9 8 7 [5 6] 4 3 2 1 //         r(&(&(&(&a[1])[1])[1])[1], 2) 
```

很酷的是，这个分析告诉我们终止条件`s <= 2`是错误的：偶数数组中最里面的 2 个元素永远不会被交换。应改为`s < 2`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T16:02:24.250

~~简化~~的疯狂步行槽；

```
void reverse(int a[], int s)
{
    int temp;              /* temporary value */

    if (s <= 2) return;    /* trigger done */

    t        = a[0];       /* temp = first index of a */
    a[0]     = a[s - 1];   /* a[0] = a[end - 1] (end including \0) */
    a[s - 1] = t;          /* a[end - 1] = temp */

    r(&a[1], s - 2);       /* pass address of a[1] and end - 2 */
} 
```

* * *

给定 char 数组`"ABCDEFG"`

简化的内存表可以是：

```
Address  Value
      7      A
      8      B
      9      C
      a      D
      b      E
      c      F
      d      G

/* Or as used here: */

789abcd <- Simplified memory address
ABCDEFG 
```

我们得到；`main()`来电`reverse(ABCDEFG, 7)`

^(清单 1)

*   地址参考。被`A`压入堆栈 (A{BCDEFG})
*   7 被压入堆栈
*   调用者的返回地址被压入堆栈
*   等等
*   函数调用

和类似的东西

```
#::::::::::::::::::::::::::::::::::::::::::::::::::::

reverse(ABCDEFG, 7); # Push to STACK 0xB (As List 1)
#====================================================
789abcd <- Memory address.
ABCDEFG <- Values.
0123456 <- Indexes for a in recursion 1.

if (7 <= 2) return;
temp = A
               +     .
a[0] = a[6] => ABCDEFG = GBCDEFG
                     +
a[6] = temp => GBCDEFG = GBCDEFA 
```

* * *

```
reverse(BCDEFA, 5); # Push to STACK 0xC (As in List 1)
#====================================================
 7 89abcd <- Memory addresses.
[G]BCDEFA <- Values
   012345 <- Indexes for a in recursion 2.

if (5 <= 2) return;
temp = B
               +   .
a[0] = a[4] => BCDEFA = FCDEFA
                   +
a[4] = temp => FCDEFA = FCDEBA 
```

* * *

```
reverse(CDEBA, 3); # Push to STACK 0xD (As in List 1)
#====================================================
 78 9abcd <- Memory addresses.
[GF]CDEBA <- Values.
    01234 <- indexes for a in recursion 3.

if (3 <= 2) return;
temp = C
               + .
a[0] = a[2] => CDEBA = EDEBA
                 +
a[2] = temp => EDEBA = EDCBA 
```

* * *

```
reverse(DCBA, 1); # Push to STACK 0xE (As in List 1)
#====================================================
 789 abcd <- Memory addresses.
[GFE]DCBA <- Values.
     0123 <- Indexes for a in recursion 4.
if (1 <= 2) return; YES! 
```

* * *

```
#:::: roll back stack ::::

Pop STACK 0xE
Pop STACK 0xD
Pop STACK 0xC
Pop STACK 0xB
We are back in main() and memory region 789abcd has 
been altered from ABCDEFG to GFEDCBA. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T14:43:14.857

要实现的重要一点是，它`a`是指向数组第一个元素的指针，因此`a`与`&a[0]`. `&a[1]`是指向数组第二个元素的指针。因此，如果您使用`&a[1]`作为参数调用该函数，它将在以第二个元素开头的子数组上工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-15T14:43:20.733

`&a[1]`等价于`a + 1`，即指向数组第二个元素的指针。函数调用反转数组的“中间”`s-2`元素。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-15T15:11:54.803

该函数必须通过以下方式调用：

*   指向数组第一个元素的指针。在 C 中，它可以通过使用数组的名称来引用。
*   数组的大小。

第一个“if”检查数组是否至少有两个元素。接下来，该函数所做的是交换数组的第一个和最后一个元素的位置。

递归调用改变了下一步必须工作的界限。它将数组的开头增加一个位置，并将数组的结尾减少一个位置；因为这两个元素在本次迭代中被颠倒了。

# android - 活动布局：片段类：vs android:name 属性

> ID：10162983
> 
> 赞同：68
> 
> 时间：2012-04-15T14:40:37.223
> 
> 标签：android, android-fragments, android-xml, xml-attribute

我已经阅读了 Android 开发人员指南中有关[Fragments](http://developer.android.com/guide/topics/fundamentals/fragments.html)的文档，并且我看到有时他们指定要使用 Fragment 标签属性*android:name*实例化的类，有时他们使用*class:*属性：

```
<fragment
    android:name="com.example.news.ArticleReaderFragment"
    android:id="@+id/viewer"
    android:layout_weight="2"
    android:layout_width="0dp"
    android:layout_height="match_parent" />

<fragment
    class="com.example.android.apis.app.FragmentLayout$TitlesFragment"
    android:id="@+id/titles" 
    android:layout_weight="1"
    android:layout_width="0px" 
    android:layout_height="match_parent" /> 
```

*android:name*和*class:*可以互换吗？如果我在 Eclipse 中使用自动完成功能，它们都会显示相同的文档提示（即属性提供要实例化的类名）。当要实例化的类的名称与java文件名不同时，也许您必须使用第二个，例如*FragmentLayout.java*文件中的*TitlesFragment*？或者我可以将语法*package.fileDOTjava$Class*也与*android:name*属性一起使用吗？

 ***我想要一些关于 Android Java 类的 XML 标记和属性的文档（我已经在另一个[问题](https://stackoverflow.com/q/10162870/925001)中询问过它）。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-12-19T10:43:43.450

正如 Activity.onCreateView 源所说：

```
String fname = attrs.getAttributeValue(null, "class");
TypedArray a = context.obtainStyledAttributes(attrs, com.android.internal.R.styleable.Fragment);
if (fname == null) {
    fname = a.getString(com.android.internal.R.styleable.Fragment_name);
} 
```

这似乎意味着程序首先看起来“类”属性。并且在失败时看起来“名称”属性。因此，如果更有效的话，使用“类”是真的。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-04-15T15:40:55.760

> android:name 和 class: 可以互换吗？

大概，是的。我只使用`class`了 ，这似乎是大多数 Google 示例使用的，但我确实看到了它们`android:name`在某些示例中的使用位置。不幸的是，没有正式和完整的`<fragment>`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-04T09:20:47.417

抱歉，所有专家都在这里，我可能错了，但据我所知，当我们使用 fragmentManager 类的**getFragmentByTag()**方法时，片段的**android:name**属性用于查找片段。**android:class**属性也用于查找我们通常包含在**静态片段**中的片段类。

 ******希望这会有所帮助..谢谢*********

# android - MIT App Inventor 中的 XML 解析

> ID：10162984
> 
> 赞同：0
> 
> 时间：2012-04-15T14:40:44.173
> 
> 标签：android, app-inventor

我试图制作一个应用程序，该应用程序具有一个可以发出 HTTP 请求并接收 XML 文件的组件。我需要解析文件以显示一些数据。我正在使用 MIT App Inventor。如何使用应用程序发明者做到这一点？如果这种方法不可能，那么我怎么能以传统方式做到这一点？

是否可以将 MIT App Inventor 项目导入另一个 IDE，如 Eclipse？

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:31:36.910

您必须像 JSON 一样对其进行硬编码-

[https://imagnity.com/tutorials/app-inventor/web-component-json-response-on-app-inventor](https://imagnity.com/tutorials/app-inventor/web-component-json-response-on-app-inventor)

不，您不能在 Eclipse 中导入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T21:31:40.040

Taifun 的链接已损坏，但可以在此处找到新链接：[App Inventor Developers](https://groups.google.com/forum/?fromgroups=#!category-topic/app-inventor-developers-library/libraryprojectsai-with-support-documents/D5HTBzgyoDE)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-20T17:36:53.377

将应用程序发明者导入 Eclipse 项目是可能的，但有一些限制。它是一个 java 桥项目（使用 Java 桥库），它将现有的 MIT 应用程序发明者项目转换为 Java。

按照链接进行转换： [https ://appinventortojava.appspot.com/login/](https://www.youtube.com/watch?v=FqNTc4DVYW8)

视频链接： [https ://www.youtube.com/watch?v=FqNTc4DVYW8](https://www.youtube.com/watch?v=FqNTc4DVYW8)

# android - Android：立即停止播放声音文件

> ID：10162990
> 
> 赞同：0
> 
> 时间：2012-04-15T14:41:23.450
> 
> 标签：android, file, audio, media-player

在我目前正在编写的应用程序中，用户可以从数据库中选择一个条目并播放该条目的内容：一个条目由许多声音文件组成（没有限制）。在我的应用程序中，我在一个列表中返回一个条目（已存储在我的数据库中）的声音文件的 URI 位置。代码如下：

```
public void audioPlayer() {
    // set up MediaPlayer
    MediaPlayer mp = new MediaPlayer();
    DatabaseHandler db = new DatabaseHandler(this);
    Entry retrieveEntry = new Entry();

    retrieveEntry = db.getEntry();

    List<String> path = retrieveEntry.getAudioUri();

    path.size();

    System.out.println("PATH SIZE: " +path.size());

    System.out.println("FILEZ: " + path);

    Iterator<String> i = path.iterator();
    String myAudio;
    int count = 0;

    while (i.hasNext()) {
        System.out.println(count);
            myAudio = i.next();
            System.out.println("MY AUDIO: " + myAudio);

            MediaPlayer player = MediaPlayer.create(this, Uri.parse(myAudio));
            player.start();
            player.stop();
            player = MediaPlayer.create(this, Uri.parse(myAudio));
            player.start();

            count++;
        }
} 
```

我的用户要求有用户输入来播放文件 - 有没有办法播放第一个文件，然后等待用户按下按钮，然后播放第二个文件，然后等待用户按下按钮等.? 此刻，当按下播放按钮时，所有返回的声音文件都会同时播放，而不是一个接一个。

提前感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T14:58:39.053

您可以使用此类播放播放列表。这将开始一个音频，当该音频结束时，它将开始播放下一个音频，直到列表末尾。如果你想循环播放播放列表，即在到达结束后开始第一个音频，然后传入 isLooping=true`startPlayingPlaylist(list,looping)`

```
 AudioPlayer player = new AudioPlayer();
    player.startPlayingPlaylist(list, false); 
```

班级

```
public class AudioPlayer{
    MediaPlayer player = null;
    ArrayList<String> playlist = null;
    int position = 0;

    public AudioPlayer() {
        super();
        // TODO Auto-generated constructor stub
    }
    public void startPlayingPlaylist(ArrayList<String> list, boolean looping){
        playlist = list;
        if(player!=null){
            player.release();
        }
        if(playlist!=null && playlist.size()>0){
            player = MediaPlayer.create(LMApplicaton.getInstance(),Uri.parse(playlist.get(position)));
            player.setWakeMode(LMApplicaton.getInstance(), PowerManager.PARTIAL_WAKE_LOCK);
            player.setLooping(looping);
            player.start();
            // Set onCompletion listener
            player.setOnCompletionListener(new OnCompletionListener() {

                @Override
                public void onCompletion(MediaPlayer mp) {
                    position = position+1;
                    if(position<playlist.size()){
                        try {
                            player.reset();
                            player.setDataSource(playlist.get(position));
                            player.prepareAsync();
                        } catch (IllegalArgumentException e) {
                            e.printStackTrace();
                        } catch (IllegalStateException e) {
                            e.printStackTrace();
                        } catch (IOException e) {
                            e.printStackTrace();
                        }

                    } else if(player.isLooping()==true){
                        position = position%playlist.size();
                        try {
                            player.reset();
                            player.setDataSource(playlist.get(position));
                            player.prepareAsync();
                        } catch (IllegalArgumentException e) {
                            e.printStackTrace();
                        } catch (IllegalStateException e) {
                            e.printStackTrace();
                        } catch (IOException e) {
                            e.printStackTrace();
                        }
                    }
                    else if(player.isLooping()==false){
                        player.release();
                        player = null;
                    }
                }
            });
            player.setOnPreparedListener(new OnPreparedListener() {

                @Override
                public void onPrepared(MediaPlayer mp) {
                    player.start();
                }
            });
        }
    }
    public void pause(){
        if(player!=null && player.isPlaying()){
            player.pause();
        }
    }
    public void play(){
        if(player!=null && player.isPlaying()==false){
            player.start();
        }
    }
    public boolean isPlaying(){
        return player.isPlaying();
    }
    public void release(){
        if(player!=null){
            player.release();
        }
    }

} 
```

**编辑：** 下面的类接收音频列表，然后播放第一个音频。它在用户呼叫时播放下一个音频`startNextAudio()`您可以根据您的要求使用其中任何一个

公共类 AudioPlayer{ MediaPlayer player = null; ArrayList 播放列表 = null; 整数位置 = 0；

```
public AudioPlayer() {
    super();
    // TODO Auto-generated constructor stub
}
public void startPlayingPlaylist(ArrayList<String> list){
    playlist = list;
    if(player!=null){
        player.release();
    }
    if(playlist!=null && playlist.size()>0){
        player = MediaPlayer.create(LMApplicaton.getInstance(),Uri.parse(playlist.get(position)));
        player.setWakeMode(LMApplicaton.getInstance(), PowerManager.PARTIAL_WAKE_LOCK);
        player.start();
        // Set onCompletion listener
        player.setOnPreparedListener(new OnPreparedListener() {

            @Override
            public void onPrepared(MediaPlayer mp) {
                player.start();
            }
        });
    }
}
public void startNextAudio(){
    position = position+1;
    if(position<playlist.size()){
        try {
            player.reset();
            player.setDataSource(playlist.get(position));
            player.prepareAsync();
        } catch (IllegalArgumentException e) {
            e.printStackTrace();
        } catch (IllegalStateException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

    } else if(player.isLooping()==true){
        position = position%playlist.size();
        try {
            player.reset();
            player.setDataSource(playlist.get(position));
            player.prepareAsync();
        } catch (IllegalArgumentException e) {
            e.printStackTrace();
        } catch (IllegalStateException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }else{
        Log.i("AudioPlayer","Playlist reached at the end");
    }
}
public void pause(){
    if(player!=null && player.isPlaying()){
        player.pause();
    }
}
public void play(){
    if(player!=null && player.isPlaying()==false){
        player.start();
    }
}
public boolean isPlaying(){
    return player.isPlaying();
}
public void release(){
    if(player!=null){
        player.release();
    }
} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T15:05:58.097

一种方法是实现 MediaPlayer.OnCompletionListener 接口。这为您提供了 MediaPlayer.onCompletion() 回调方法，您可以像这样使用它：

```
@Override
public void onCompletion(MediaPlayer mp) {
  if (i.hasNext) {
    // ...hand mp the next file
    // ...show the user the 'play next' button
  }
} 
```

请注意，您还需要`MediaPlayer.setOnCompletionListener()`在设置中调用该方法。

# php - 将数据插入多个表

> ID：10162994
> 
> 赞同：0
> 
> 时间：2012-04-15T14:41:59.627
> 
> 标签：php, mysql

我正在努力掌握 PHP 中多查询的概念，并且一定做错了什么，但我不确定是什么。我将数据存储在来自其他形式的会话中。

```
<?php 
    $conn=mysql_connect("database","username","password");
    mysql_select_db("host",$conn);

    session_start();

    $insert_query=("INSERT INTO testone_tbl 
                      (age,hours,flexibility,fastpaced,retailexp,workedus,conviction,permit,education)
                    VALUES 
                      ('$age','$hours','$flexibility','$fastpaced','$retailexp','$workedus','$conviction,'$permit','$education') 
                    INSERT INTO equality_tbl 
                      (age,ethnic,disability)
                    VALUES ('$age','$ethnic'.'$disability')");

    mysql_multiquery($insert_query);
?> 
```

还有更多表格要插入，但不想用不必要的重复来“解决”问题。如果有人能解释我做错了什么，将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T14:45:16.480

要使多查询起作用，所有查询都必须用分号分隔`;`，因此在您的情况下：

```
$insert_query = "
    INSERT INTO testone_tbl (age,hours,flexibility,fastpaced,retailexp,
    workedus,conviction,permit,education)
    VALUES ('$age','$hours','$flexibility','$fastpaced','$retailexp','$workedus',
    '$conviction,'$permit','$education'); <--Semicolon
    INSERT INTO equality_tbl 
    (age,ethnic,disability)
    VALUES ('$age','$ethnic'.'$disability')"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T14:46:48.690

试试这个，删除括号并在查询之间添加分号

```
$insert_query="
    INSERT INTO testone_tbl (age,hours,flexibility,fastpaced,retailexp,
    workedus,conviction,permit,education)
    VALUES ('$age','$hours','$flexibility','$fastpaced','$retailexp','$workedus',
    '$conviction,'$permit','$education');
    INSERT INTO equality_tbl 
    (age,ethnic,disability)
    VALUES ('$age','$ethnic'.'$disability');"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-17T09:15:44.003

没有这样的东西`mysql_multiquery()`，这就是它返回这个的原因：

> 致命错误：在...上调用未定义的函数 mysql_multiquery()

该函数`mysql_multiquery()`未定义，这意味着它不存在。

相反，使用`mysqli_multi_query`，但因此您必须使用更安全的 mysql **i**方法。还要尝试养成以分号 ( `;`) 结束查询的习惯。

```
// Create mysqli connection
$conn = mysqli_connect("server", "user", "password", "database");

$query  = "INSERT INTO testone_tbl 
             (age,hours,flexibility,fastpaced,retailexp,workedus,conviction,permit,education)
           VALUES 
             ('$age','$hours','$flexibility','$fastpaced','$retailexp','$workedus','$conviction,'$permit','$education');";
$query .= "INSERT INTO equality_tbl 
             (age,ethnic,disability)
           VALUES 
             ('$age','$ethnic'.'$disability');";

// Execute queries
if(mysqli_multi_query($conn, $query)) 
    echo "Success!";
else
    echo "Error"; 
```