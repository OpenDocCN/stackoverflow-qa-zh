# StackOverflow 问答 11985000-11985999

# iphone - IOS5 - AFNetworking 处理请求

> ID：11985001
> 
> 赞同：0
> 
> 时间：2012-08-16T10:11:28.410
> 
> 标签：iphone, objective-c, ios, request, afnetworking

我正在制作一个应用程序，我必须在其中调用一些网络服务。我选择与[AFNetworking 合作](https://github.com/AFNetworking/AFNetworking/)。

我遵循了库中提供的 Twitter 示例。一切都很好，除了我在通知栏中永久有一个小“处理圈”（见下图）。

![iPhone 顶栏](../Images/80145366b49959b6a02c14dec2293117.png)

这是我的请求的代码：

```
- (id)initWithAttributes:(NSDictionary *)attributes
{
    self = [super init];
    if (!self) {
        return nil;
    }

    _name = [attributes valueForKeyPath:@"name"];
    return self;
}

+ (void)itemsListWithBlock:(void (^)(NSArray *items))block
{
    NSUserDefaults *defaults        = [NSUserDefaults standardUserDefaults];
    NSDictionary *user              = [defaults objectForKey:@"user"];
    NSDictionary *company           = [defaults objectForKey:@"company"];

    NSMutableDictionary *mutableParameters = [NSMutableDictionary dictionary];

    /*
    ** [ Some stuff to set the parameters in a NSDictionnary ]
    */    

    MyAPIClient *client = [MyAPIClient sharedClient];
    [[AFNetworkActivityIndicatorManager sharedManager] setEnabled:YES];
    [[AFNetworkActivityIndicatorManager sharedManager] incrementActivityCount];

    NSURLRequest *request = [client requestWithMethod:@"POST" path:@"getMyList" parameters:mutableParameters];

    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
        NSMutableArray *mutableItems = [NSMutableArray arrayWithCapacity:[JSON count]];
        for (NSDictionary *attributes in JSON) {
            ListItem *item = [[ListItem alloc] initWithAttributes:attributes];
            [mutableItems addObject:item];
        }
        if (block) {
            block([NSArray arrayWithArray:mutableItems]);
        }
    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON){
        [[[UIAlertView alloc] initWithTitle:@"Error" message:[error localizedDescription] delegate:nil cancelButtonTitle:nil otherButtonTitles:@"Ok", nil] show];
        if (block) {
            block(nil);
        }
    }];
    [operation start];
} 
```

这是否意味着我的请求尚未完成？我并没有真正理解我在这里做错了什么......

如果有人可以提供帮助，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T10:22:39.350

不要称 `[[AFNetworkActivityIndicatorManager sharedManager] incrementActivityCount];`这将活动计数增加 1，并且`[operation start];`也会调用它。现在活动计数为 2，操作完成后将减少。但是由于您调用了它，`incrementActivityCount`它会将其恢复为 1 而不是 0。

只需调用`[[AFNetworkActivityIndicatorManager sharedManager] setEnabled:YES];`一次，例如将其放在`application:applicationdidFinishLaunchingWithOptions:`应用程序 appDeletage 的方法中。

* * *

另外我建议将操作添加到 a`NSOperationQueue`而不仅仅是调用 start 。

# facebook - 没有标题 - Wordpress facebook 分享

> ID：11985005
> 
> 赞同：1
> 
> 时间：2012-08-16T10:11:40.033
> 
> 标签：facebook, facebook-graph-api, wordpress

我已经使用 wordpress 3.4.1 创建了我的网站，并且我尝试在 facebook 中分享我的网页。我没有在 facebook 帖子中获得任何缩略图或基本博客描述。相反，我得到“无标题”。我知道这个问题已经在 wordpress 论坛中被问过很多次了。但是，它们中的大多数都导致了死胡同。有人可以在这方面帮助我。

PS：我尝试使用 facebook 调试器（http://developers.facebook.com/tools/debug）我得到以下

解析 URL 时出错：解析输入 URL 时出错，没有数据被抓取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:19:16.233

您需要将 OpenGraph 标签添加到您的页面，或者更简单的是，找到一个 WordPress 插件来为您完成。再次通过调试器运行页面，问题应该得到修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:38:28.637

就像 Niraj 所说的那样，您需要确保您的博客上有开放的图形元标记。这是一个插件，它将添加它们[http://wordpress.org/extend/plugins/facebook-open-graph-meta/](http://wordpress.org/extend/plugins/facebook-open-graph-meta/)。

# ubuntu - 将带有 SCP 的大文件发送到某个服务器时恰好 2112 kB 停止

> ID：11985008
> 
> 赞同：47
> 
> 时间：2012-08-16T10:11:42.170
> 
> 标签：ubuntu, ssh, scp

有一个特定的 ubuntu 10.04 服务器，如果我从该服务器所在办公室之外的任何服务器将文件 ssh 到它上（意味着任何使用 scp-ing 从该服务器内部通过 LAN 到该服务器上的任何使用总是出于某种原因） ，然后 scp-ing 对任何大小超过 2112 kB 的文件都失败，并停留在 2112 kB。所以

```
scp -vvv /home/attila-szeremi/aszeremi.tar.gz  attila@server.hu:~/aszeremi.tar.gz 
```

最后显示类似`1% 2112KB 909.2KB/s - stalled -`动态的东西，其中 KB/s 变得越来越低。

有谁知道这可能是什么原因以及我该如何解决？

到目前为止我已经尝试过：

*   用 scp -l 2000 限制速度。它只是让文件发送速度变慢，在 2112 kB 时又卡住了。
*   使用 -C 启用压缩。它仍然停滞在相同的大小。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-19T08:05:06.273

我设法摆脱这个问题的唯一方法是[禁用 TCP SACK](http://linuxsecure.blogspot.com.es/2008/05/scp-stalled-through-firewall-ssh-no.html)：

```
$ sudo sysctl -w net.ipv4.tcp_sack=0 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-08-16T11:00:29.577

我似乎找到了解决办法。我必须通过以下方式将 LAN 卡的 mtu 设置为 1492：

```
# ifconfig eth0 mtu 1492 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-06-03T15:55:23.447

在较新的 Linux 系统上，**ifconfig**命令可能已被**ip替换**

设置 mtu 的命令变为：

```
# ip link set dev eth0 mtu 1492 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-21T21:13:54.733

我在**Mac OS X**上遇到了同样的问题，**@dav.garcia 的回答**为我做了一个小小的改动：

```
 $ sudo sysctl -w net.inet.tcp.sack=0 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-10T19:18:14.153

我看到了同样的问题。以上建议都不适合我，但它们让我走上了正确的道路。我在防火墙后面，MTU 设置为 1300。将我的 LAN 卡的 MTU 设置为非常低（576，有点随机）导致我的数据包停止被丢弃。

```
$ sudo ifconfig eno1 mtu 576 
```

我必须在我的每个 Linux 客户端上执行此操作。由于某种原因，同一子网上的 windows 机器没有问题。

# javascript - 将数量文本框转换为下拉列表？

> ID：11985012
> 
> 赞同：0
> 
> 时间：2012-08-16T10:11:57.797
> 
> 标签：javascript, jquery

如何使用 jquery 将此文本框转换为具有值 1-99 的下拉列表，并选择默认项目 1？

```
<input type="text" maxlength="4" size="3" onkeyup="if(typeof(getShipping) == 'function'){getShipping()}" onchange="if(typeof(getShipping) == 'function'){getShipping()}" id="Quantity" name="Quantity" value="1"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:10:19.240

直截了当：创建一个新元素，使用 1-99 的值`select`附加元素，设置属性和处理程序，然后将元素替换为.`option``onchange``input``select`

```
var select = $("<select>");
for (var i = 1; i <= 99; ++i) {
    select.append($("<option>").val(i).html(i));
}
select.val(1).attr({id: "Quantity", name: "Quantity"}).change(function(){
    if (typeof getShipping == "function") {
        getShipping();
    }
});
$("#Quantity").replaceWith(select); 
```

[在这里测试它（JSFiddle）......](http://jsfiddle.net/Aletheios/w78G4/)

# javascript - 控件的浏览器视点位置

> ID：11985018
> 
> 赞同：0
> 
> 时间：2012-08-16T10:12:23.543
> 
> 标签：javascript

我需要获取 java 脚本代码以根据浏览器屏幕查找 HTML 控件位置。

有没有人对此有所了解或可以指出我正确的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:36:19.510

试试`element.getBoundingClientRect()`。

[MDN 文档](https://developer.mozilla.org/en-US/docs/DOM/element.getBoundingClientRect)

# javascript - 当行增加时自动增加序列号并在jquery中删除行时自动重新调整编号顺序

> ID：11985021
> 
> 赞同：0
> 
> 时间：2012-08-16T10:12:39.390
> 
> 标签：javascript, jquery

我希望序列号：每当动态插入一行时增加。并且当任何行被删除时，无论是在开头还是结尾或中间，数字都应该以正确的顺序重新排列。我是一个新鲜人，无法理解如何做到这一点。任何人都可以指导我。提前感谢您的支持。

我在下面给出了我的示例编码。单击**“(+)”** 按钮时，该行会自动增加。发生这种情况时，我希望序列号也自动增加。并且当任何行被删除时（即使在表格中间），数字应该会自动以正确的顺序自行调整。请指导我。

```
<html>
<head>
<script type="text/javascript" src="jquery-1.7.2.min.js"></script>
<script type="text/javascript">
$(document).ready( function() {
id=1;
var serial =1;

$('#butVal').click(function(){

        var master = $(this).parents("#table-2");
        id++;
        var sample = master.find('.tabRow').clone();
        sample.attr("id", id + "item"); 
        master.find('.tabRow').removeClass('tabRow');
        master.find('tbody').append(sample);
        //alert(master);
        //alert(sample);
        //alert(sample.html());
      //alert(master.html());

var rowLen =  $('#table-2 > tbody >tr').length;

//alert(rowLen);
if(rowLen>9)
{
alert("no of row is reached 10");
}

   }

);

$('table#table-2 button.remove').live('click', function(){

 if($("table#table-2 tbody tr").length > 1)
  {
     if($("table#table-2 tbody tr").index($(this).parents('tr')) ==$("table#table-2 tbody tr").length -1)
     {
       $(this).parents('tr').prev().addClass("tabRow");
     }
     $(this).parents('tr').remove();
  }
 else
 {
    alert("you can.t remove this record");
 }

} );

});

//jquery ends here

</script>

<style type="text/css">
.total
{
border:1px solid black;
width:90%;
height:1250px;
margin-left:auto;
margin-right:auto;
}
.add
{
width:100%; 
}
.add select,input
{
width:100%;
}
</style>
</head> 
<body>

<div class="total">

<table id="table-2" class="add" border ="1">

<thead>

<tr><th class="small"> S.No</th><th> Product Status </th> <th> Stock Status</th> <th class="sizing"> Description</th> <th> Quantity </th> <th> Price </th> <th>  Total </th >
<th> <button id="butVal"> + </button></th></tr> 
</thead>

<tbody>
<tr class="tabRow" id="1item">
<td class="sno">  </td>
<td><select><option> New </option><option> Old </option></select> </td>
<td><select><option> In Stock </option><option> Out Of Stock </option></select> </td>
<td> <input type="text" name="desc"/>  </td>
<td> <input type="text" name="qty"/> </td>
<td> <input type="text" name="price"/> </td>
<td> <input type="text" name="total"/> </td>
<td><button class="remove">Remove</button></td>
</tr>
</tbody>

<tfoot>
<tr>

<td>&nbsp;  </td>
<td>&nbsp;  </td>
<td>&nbsp;  </td>
<td>&nbsp;  </td>
<td>&nbsp;  </td>
<td> Grand Total </td>
<td>&nbsp;  </td>
<td>  <button id="proceed" onClick="payment();"> Proceed </button>   </td>

</tr>
</tfoot>

</table>

</div>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T00:52:26.503

我在 jsfiddle.net 上对您的代码进行了一些更改。链接是：http: [//jsfiddle.net/2nzgG/30/](http://jsfiddle.net/2nzgG/30/)。我的所有评论都可以在 javascript 部分中找到。我希望这就是你要找的。需要帮助请叫我。

编辑：

我还添加了下面的代码，但评论将在链接中找到......

```
$(document).ready( function() {

$('#butVal').click(function(){
   var rowLen =  $('tr.tabRow').length;

    if(rowLen>9)
    {
          alert("no of row is reached 10");
    }
    else
    {
   $("tr.tabRow:first").clone(true).appendTo("#table-2>tbody");  
    $(".tabRow:last").children("td").children("input").each(function(index, element){
        $(element).val("");
    });
    }
    });

$(document).on("click", "button.remove", function(){

 if($(this).parents("tr").siblings("tr.tabRow").length > 0)
  {
     $(this).closest("tr.tabRow").remove();        
  }
 else
 {
    alert("you can.t remove this record");
 }
});

//FOR Serial Number- use ON 
    $(document).on("click", ".add, .remove", function(){

       $("td.sno").each(function(index,element){                 
           $(element).text(index + 1); 
        });
    });
}); 
```

# android - Android获取静态错误位置

> ID：11985022
> 
> 赞同：0
> 
> 时间：2012-08-16T10:12:49.837
> 
> 标签：android, gps, location

我有一个文本视图来显示我的纬度和经度，现在问题是我总是得到这对夫妇（32,35）（我认为这是在某个海洋的某个地方），我什至出去散步给 gps机会，但我一无所获。

我想看看它是否与我的手机或手机中的 gps 有关，所以我继续打开 Waze 应用程序，发现它确实有效。

可能是什么问题？

这是我的简单代码片段：

```
public class Main extends Activity implements LocationListener {
    private LocationManager manager;
    private TextView tv;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        tv = (TextView) findViewById(R.id.textView1);
        tv.setText("Hello There");
        manager = (LocationManager) this.getSystemService(LOCATION_SERVICE);
        manager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);

    }

    @Override
    public void onLocationChanged(Location location) {
        tv.setText((int)location.getLatitude()+ ","+ (int)location.getLongitude());
    }
...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:20:43.780

尝试这个

```
tv.setText(location.getLatitude()+ ","+location.getLongitude()); 
```

代替

```
tv.setText((int)location.getLatitude()+ ","+ (int)location.getLongitude());
            ^^^                               ^^^ 
```

因为您正在转换`latitude`，并且`longitude`在`int`您的情况下，您可能会得到微小的变化。

喜欢

```
32.110 35.500  you will get (32,35)
32.120 35.540  you will get (32,35)
32.180 35.580  you will get (32,35)
32.200 35.900  you will get (32,35)
32.290 35.880  you will get (32,35)
   ^^^    ^^^ 
```

# mysql - Mysql达到最大限制

> ID：11985023
> 
> 赞同：0
> 
> 时间：2012-08-16T10:12:55.487
> 
> 标签：mysql, max

我每 15 分钟运行一次 cron 作业，这会引入提要，然后将它们存储到数据库中，从一个全新的数据库中这工作正常，我可以看到我的数据库每 15 分钟填充一次。

但是说两周后，数据库似乎达到了最大限制，并且不再存储数据，我当然无法通过我的代码点火器应用程序将其拉下来，处理大量数据的最佳方法是什么？

我正在使用专用服务器，并且以前对 mysql 的高数据需求了解有限。这是我的 /etc/my.cnf 中的设置

```
[client]
port            = 3306
socket          = /var/lib/mysql/mysql.sock

[mysqld_safe]
log-error=/var/log/mysqld.log
pid-file=/var/run/mysqld/mysqld.pid

innodb_buffer_pool_size=2M
innodb_additional_mem_pool_size=500K
innodb_log_buffer_size=500K
innodb_thread_concurrency=2

[mysqld]
local-infile=0
datadir=/var/lib/mysql
user=mysql
symbolic-links=0

max_connections = 100
wait_timeout = 60
query-cache-type = 1
query-cache-size = 8M
query_cache_limit = 2M
thread_cache_size = 8
tmp_table_size = 16M
max_heap_table_size = 16M
join_buffer_size = 1M
table_open_cache = 64

port            = 3306
socket          = /var/lib/mysql/mysql.sock
skip-external-locking
key_buffer_size = 16M
max_allowed_packet = 1M
sort_buffer_size = 512K
net_buffer_length = 8K
read_buffer_size = 256K
read_rnd_buffer_size = 512K
myisam_sort_buffer_size = 8M

innodb_buffer_pool_size = 16M
innodb_additional_mem_pool_size = 2M
innodb_log_buffer_size = 8M

[mysqldump]
quick
max_allowed_packet = 16M

[mysql]
no-auto-rehash

[myisamchk]
key_buffer_size = 20M
sort_buffer_size = 20M
read_buffer = 2M
write_buffer = 2M

[mysqlhotcopy]
interactive-timeout 
```

我可以设置的最大合理设置是什么，以使我的 sql 持续很长时间，是的，我对此不太了解，只是真的需要保持运行，因为我无法清除数据，然后再次开始填充数据库，我需要它来继续存储。

谢谢是提前;）

更新

哇，我不知道这意味着什么看起来不太好

```
120803 08:45:19 mysqld_safe Starting mysqld daemon with databases from /var/lib/mysql
120803  8:45:19 [Note] Plugin 'FEDERATED' is disabled.
120803  8:45:19  InnoDB: Initializing buffer pool, size = 8.0M
120803  8:45:19  InnoDB: Completed initialization of buffer pool
InnoDB: The first specified data file ./ibdata1 did not exist:
InnoDB: a new database to be created!
120803  8:45:19  InnoDB: Setting file ./ibdata1 size to 10 MB
InnoDB: Database physically writes the file full: wait...
120803  8:45:19  InnoDB: Log file ./ib_logfile0 did not exist: new to be created
InnoDB: Setting log file ./ib_logfile0 size to 5 MB
InnoDB: Database physically writes the file full: wait...
120803  8:45:19  InnoDB: Log file ./ib_logfile1 did not exist: new to be created
InnoDB: Setting log file ./ib_logfile1 size to 5 MB
InnoDB: Database physically writes the file full: wait...
InnoDB: Doublewrite buffer not found: creating new
InnoDB: Doublewrite buffer created
InnoDB: Creating foreign key constraint system tables
InnoDB: Foreign key constraint system tables created
120803  8:45:19  InnoDB: Started; log sequence number 0 0
120803  8:45:19 [Note] Event Scheduler: Loaded 0 events
120803  8:45:19 [Note] /usr/libexec/mysqld: ready for connections.
Version: '5.1.54'  socket: '/var/lib/mysql/mysql.sock'  port: 3306  MySQL Community Server (GPL) by Remi
120803  8:45:21 [Note] /usr/libexec/mysqld: Normal shutdown

120803  8:45:21 [Note] Event Scheduler: Purging the queue. 0 events
120803  8:45:21  InnoDB: Starting shutdown...
120803  8:45:25  InnoDB: Shutdown completed; log sequence number 0 721938
120803  8:45:25 [Note] /usr/libexec/mysqld: Shutdown complete

120803 08:45:25 mysqld_safe mysqld from pid file /var/run/mysqld/mysqld.pid ended
120803 08:45:25 mysqld_safe Starting mysqld daemon with databases from /var/lib/mysql
120803  8:45:25 [Note] Plugin 'FEDERATED' is disabled.
120803  8:45:25 [Warning] option 'innodb-additional-mem-pool-size': signed value 512000 adjusted to 524288
120803  8:45:25  InnoDB: Initializing buffer pool, size = 2.0M
120803  8:45:25  InnoDB: Completed initialization of buffer pool
120803  8:45:25  InnoDB: Started; log sequence number 0 721938
120803  8:45:25 [Note] Event Scheduler: Loaded 0 events
120803  8:45:25 [Note] /usr/libexec/mysqld: ready for connections.
Version: '5.1.54'  socket: '/var/lib/mysql/mysql.sock'  port: 3306  MySQL Community Server (GPL) by Remi
120803  8:47:37 [Note] /usr/libexec/mysqld: Normal shutdown

120803  8:47:37 [Note] Event Scheduler: Purging the queue. 0 events
120803  8:47:37  InnoDB: Starting shutdown...
120803  8:47:40  InnoDB: Shutdown completed; log sequence number 0 1357212
120803  8:47:40 [Note] /usr/libexec/mysqld: Shutdown complete

120803 08:47:40 mysqld_safe mysqld from pid file /var/run/mysqld/mysqld.pid ended
120803 08:47:41 mysqld_safe Starting mysqld daemon with databases from /var/lib/mysql
120803  8:47:41 [Note] Plugin 'FEDERATED' is disabled.
120803  8:47:41  InnoDB: Initializing buffer pool, size = 16.0M
120803  8:47:41  InnoDB: Completed initialization of buffer pool
120803  8:47:41  InnoDB: Started; log sequence number 0 1357212
120803  8:47:41 [Note] Event Scheduler: Loaded 0 events
120803  8:47:41 [Note] /usr/libexec/mysqld: ready for connections.
Version: '5.1.54'  socket: '/var/lib/mysql/mysql.sock'  port: 3306  MySQL Community Server (GPL) by Remi
120803  8:47:44 [Note] /usr/libexec/mysqld: Normal shutdown

120803  8:47:44 [Note] Event Scheduler: Purging the queue. 0 events
120803  8:47:44  InnoDB: Starting shutdown...
120803  8:47:46  InnoDB: Shutdown completed; log sequence number 0 1357212
120803  8:47:46 [Note] /usr/libexec/mysqld: Shutdown complete

120803 08:47:46 mysqld_safe mysqld from pid file /var/run/mysqld/mysqld.pid ended
120803 08:48:08 mysqld_safe Starting mysqld daemon with databases from /var/lib/mysql
120803  8:48:08 [Note] Plugin 'FEDERATED' is disabled.
120803  8:48:08  InnoDB: Initializing buffer pool, size = 16.0M 
```

抱歉，这个问题越来越长了，但只是想用下面我需要的内容进行更新，这是我在 codeignitor 中的插入，我应该如何正确地连接和断开连接

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Cron_model extends CI_Model {

    function addResults($data){

       $this->db->select('*');
       $this->db->from('articles');
       $this->db->limit(5);
       $this->db->like('title', $data['title']);
       $this->db->order_by("date", "desc"); 
       $query=$this->db->get();

       if(!$query->num_rows()){

            $this->db->insert('articles', $data);

            return $data['title'];

       }

    }   

} 
```

感谢大家的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:16:40.557

你是如何连接到数据库的？对于您描述的过程，您应该每次都连接和断开连接。

# javascript - jQuery发现不存在的对象

> ID：11985024
> 
> 赞同：2
> 
> 时间：2012-08-16T10:12:57.050
> 
> 标签：javascript, jquery, select, option, exists

我尝试检测是否存在一些：

```
var listBoxSelector = $("div#selectors select:eq(1)");
var option = listBoxSelector.find("option[value=" + value + "]:eq(0)");
alert(option); 
```

但是，如果不存在这样的选项，无论如何我都会收到 Object 。有什么更好的方法来检测是否存在某种价值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T10:15:18.997

您可以使用[`length`](http://api.jquery.com/length/)jQuery 对象的属性：

> jQuery 对象中的元素数。

```
if (listBoxSelector.find("option[value="+value+"]").length) {
     alert('Exists')
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T10:15:30.413

检查对象`length`的：`option`

```
var listBoxSelector = $("div#selectors select:eq(1)");
var option = listBoxSelector.find("option[value=" + value + "]:eq(0)");
if (option.length>0){
   alert(option);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-02T17:43:38.550

[**我在这里**](https://stackoverflow.com/questions/31044/is-there-an-exists-function-for-jquery#answer-13313296)用以下插件回答了同样的问题。有关创建插件的完整详细信息，请访问答案。

* * *

如果元素存在，以下插件将允许您使用回调功能（与 jQuery 样式标记保持内联）。因此，对于您的示例，您可能会执行以下操作：

```
listBoxSelector.exist(function() { // will ONLY fire if this element even exist
    alert($(this).find("option[value=" + value + "]:eq(0)"));
}) 
```

## 插入

```
(function($) {
    if (!$.exist) {
        $.extend({
            exist: function() {
                var ele, cbmExist, cbmNotExist;
                if (arguments.length) {
                    for (x in arguments) {
                        switch (typeof arguments[x]) {
                            case 'function':
                                if (typeof cbmExist == "undefined") cbmExist = arguments[x];
                                else cbmNotExist = arguments[x];
                                break;
                            case 'object':
                                if (arguments[x] instanceof jQuery) ele = arguments[x];
                                else {
                                    var obj = arguments[x];
                                    for (y in obj) {
                                        if (typeof obj[y] == 'function') {
                                            if (typeof cbmExist == "undefined") cbmExist = obj[y];
                                            else cbmNotExist = obj[y];
                                        }
                                        if (typeof obj[y] == 'object' && obj[y] instanceof jQuery) ele = obj[y];
                                        if (typeof obj[y] == 'string') ele = $(obj[y]);
                                    }
                                }
                                break;
                            case 'string':
                                ele = $(arguments[x]);
                                break;
                        }
                    }
                }

                if (typeof cbmExist == 'function') {    //  has at least one Callback Method
                    var exist =  ele.length > 0 ? true : false; //  strict setting of boolean
                    if (exist) {    // Elements do exist
                        return ele.each(function(i) { cbmExist.apply(this, [exist, ele, i]); });
                    }
                    else if (typeof cbmNotExist == 'function') {
                        cbmNotExist.apply(ele, [exist, ele]);
                        return ele;
                    }
                    else {
                        if (ele.length <= 1) return ele.length > 0 ? true : false;
                        else return ele.length;
                    }
                }
                else {  //  has NO callback method, thus return if exist or not based on element existant length
                    if (ele.length <= 1) return ele.length > 0 ? true : false; //   strict return of boolean
                    else return ele.length; //  return actual length for how many of this element exist
                }

                return false; //    only hits if something errored!
            }
        });
        $.fn.extend({
            exist: function() {
                var args = [$(this)];
                if (arguments.length) for (x in arguments) args.push(arguments[x]);
                return $.exist.apply($, args);
            }
        });
    }
})(jQuery); 
```

[`jsFiddle`](http://jsfiddle.net/SpYk3/cEUR5/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T10:17:37.560

```
if(listBoxSelector.find("option[value=" + value + "]:eq(0)") == 0){
  //nothing found
} 
```

# mysql - 按每个玩家的时间长度排序最大得分

> ID：11985037
> 
> 赞同：1
> 
> 时间：2012-08-16T10:13:50.763
> 
> 标签：mysql, sql

我的数据库结构

```
Table 'Player'   : column 'id'
Table 'Score'    : column 'player_id' , 'score' , 'time' 
```

表“分数”中的示例数据

```
 player_id       score             time
     1001           100      2000-01-01 00:00:00
     1001             3      2012-08-01 00:00:00
     1001            11      2012-08-02 00:00:00
     1002            80      2012-07-01 00:00:00
     1002             5      2012-08-01 00:00:00
     1003            90      2012-07-01 00:00:00 
```

我尝试使用

```
SELECT * FROM Score WHERE MONTH(time) = MONTH(NOW()) ORDER BY score DESC 
```

玩家 1001 的结果将是分数 11 和 3 的多行。
如何排序并仅获得时间长度上的最大分数，这应该只是玩家 1001 的分数 11

结果应该是

```
 player_id       score             time
     1001            11      2012-08-02 00:00:00
     1002             5      2012-08-01 00:00:00 
```

不是

```
 player_id       score             time
     1001            11      2012-08-02 00:00:00
     1001             3      2012-08-01 00:00:00
     1002             5      2012-08-01 00:00:00 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T10:15:23.870

```
SELECT player_id, max(score) as max_score
FROM Score 
WHERE MONTH(time) = MONTH(NOW()) 
group by player_id
ORDER BY max_score DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T10:15:35.127

试试这个：

```
SELECT player_id, max(score) as score, month(time)
FROM Score 
WHERE MONTH(time) = MONTH(NOW()) 
GROUP BY Player_id, month(time)
ORDER BY score DESC 
```

# android - 如何在 Facebook 上分享我的应用程序的图像切换器图像？

> ID：11985038
> 
> 赞同：0
> 
> 时间：2012-08-16T10:13:52.810
> 
> 标签：android, facebook, image, share

我正在为Android制作一个应用程序。我有一个照片库，**我想提供在 Facebook 上单击按钮共享图像切换器的可能性**（只有那一刻显示的照片）。我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:45:02.710

如果您熟悉 Android 版 Facebook SDK，请尝试以下操作：

```
//Getting the image
    Bitmap bm = theImageViewToUpload.getDrawingCache();
    byte[] bArray = null;
    ByteArrayOutputStream baoStream = new ByteArrayOutputStream();
    bm.compress(Bitmap.CompressFormat.JPEG, 100, baoStream);
    bArray = baoStream.toByteArray();

    Bundle bund = new Bundle();
    bund.putString(Facebook.TOKEN, access_token);
    bundle.putString("caption", "This is your image-caption on Facebook");
    bund.putByteArray("picture", bArray);

    //Uploading to Facebook
    try {
        fb.request("me/photos", bund, "POST");
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

如果您不熟悉 Facebook SDK，我不打算在这里的答案中教您一切，但请查看他们的参考：http: [//developers.facebook.com/docs/reference/androidsdk/](http://developers.facebook.com/docs/reference/androidsdk/)

编辑：将此代码添加到您计划使用的按钮的 onClick 中。

# c++ - 带有信号、线程和网络、Qt 或 POCO 的控制台应用程序

> ID：11985041
> 
> 赞同：4
> 
> 时间：2012-08-16T10:14:00.423
> 
> 标签：c++, multithreading, qt, console, poco-libraries

我必须开发一个通过 IPC 与 Qt Gui 交互的控制台应用程序。我已经对 Qt 框架有很好的体验，我对 POCO 完全陌生。我还需要一个好的 SQLite 包装器。

对于我的情况，Qt vs Poco 的优缺点是什么？

到目前为止，我列出了：

Qt 优点：

*   非常好的文档
*   活跃的社区
*   就我而言，经验
*   便于使用
*   跨平台
*   SQLite 包装器很好
*   通过信号和插槽轻松线程化（不需要互斥锁）

Qt 缺点：

*   缺乏与标准 C++ 的集成，一切都适用于 Qt 对象（QString 等）
*   元对象编译器 (MOC)
*   新开发者必须学习 Qt 框架来编码
*   坚持在 Mac 上使用 GCC 4.2.1，而不是从现在开始随 Mac 发布的最新 clang
*   必须从 QObject 继承才能使用信号、线程等。

Poco 优点：

*   便于使用 ？
*   网络更快（在我的例子中是 Http）？
*   不需要MOC
*   与 Clang 无缝构建？
*   跨平台
*   容易穿线？

Poco 缺点：

*   缺乏文件！
*   小社区
*   ?

我希望 Qt5 可以在 mac 上与 clang、llvm 一起使用？

我非常感谢您对此的见解。

谢谢。

# c++ - 在 C++ 中使用 boost:regex_error 时未定义符号？

> ID：11985045
> 
> 赞同：1
> 
> 时间：2012-08-16T10:14:08.303
> 
> 标签：c++, boost

我正在使用 boost 库进行正则表达式，我使用 boost::regex() 函数来编译正则表达式。我必须捕获此函数调用引发的异常。所以我`boost:regex_error`在catch()中使用了。

但是使用此功能会出现以下错误：

```
undefined symbol: _ZTIN5boost11regex_errorE 
```

上述错误的原因是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T10:20:33.153

您必须与 链接`boost_regex`。在 GCC 上，添加`-lboost_regex`到您的链接器调用。其他编译器将具有等效选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T10:18:14.000

```
$ c++filt _ZTIN5boost11regex_errorE
typeinfo for boost::regex_error 
```

所以 typeinfo 丢失了。我认为您应该在启用 RTTI（运行时类型信息）的情况下编译您的项目。

或者

[g ++未定义对typeinfo的引用](https://stackoverflow.com/questions/307352/g-undefined-reference-to-typeinfo)

# php - 使用钩子和过滤器在数据库中创建和更新检查值

> ID：11985046
> 
> 赞同：0
> 
> 时间：2012-08-16T10:14:09.083
> 
> 标签：php, wordpress, checkbox, filter, hook

我有两个功能，一个是钩子，另一个是过滤器。钩子函数显示所有具有输入类型（复选框）的类别，这很简单。但是我在检查过滤器功能时遇到问题，它已更新并存储在数据库中，但是当我取消选中它时，我无法更新该字段以取消选中（要在数据库中更新）

## 下面是钩子函数的代码：

```
function my_account_add_extra_field_kategorija() {
    global $current_user;

    $taxonomy     = 'category';
    $orderby      = 'name'; 
    $show_count   = 1;      // 1 for yes, 0 for no
    $pad_counts   = 1;      // 1 for yes, 0 for no
    $hierarchical = 1;      // 1 for yes, 0 for no
    $title        = '';
    $fcats        = '';
    $i            = 0;
    $args = array(
    'taxonomy'     => $taxonomy,
    'orderby'      => $orderby,
    'show_count'   => $show_count,
    'pad_counts'   => $pad_counts,
    'hierarchical' => $hierarchical,
    'title_li'     => $title,
    'hide_empty'    => 0
    );
    $cats  = get_categories( $args );
    print '<ul>';
    foreach($cats as $cat){   if($cat->parent == 0){ $fcats .= $cat->cat_ID.",";
    $cat_name = $cat->cat_name;
    $userID = $current_user->ID;
    $get_meta_value = get_the_author_meta( $cat_name, $userID );
    if($i%2){ $ex ="space"; }else{ $ex =""; }
    if($i == 10){ print '<div class="clearfix"></div>'; $ex =""; $i=0;}

    print '<li>';       
    if($get_meta_value == 1 ) {
        print '<input type="checkbox" name="sel_cat[]" value="'.$cat_name.'" checked="checked" ';
        print '/>'.$cat_name;
    } else {
        print '<input type="checkbox" name="sel_cat[]" value="'.$cat_name.'" ';
        print '/>'.$cat_name;
    }
    print '</li>';
    $i++; } }
    print '</ul>';

    print '<div class="clearfix"></div>'; 
```

}

## 这是过滤器功能：

```
function my_account_update_extra_field_kategorija() {
global $current_user;
$user_id = $current_user->ID;
if(isset($_POST['sel_cat'])){
    foreach($_POST['sel_cat'] as $check) {
        update_user_meta($user_id, $check, '1');
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:39:03.460

由于复选框值仅在选中时提交（即无法指定未选中的值），因此您将不得不使用用于创建复选框的数据。然后，您可以通过将它们与提交（选中）的数据进行比较来判断哪些未选中。

由于您使用 [] (array) 命名复选框，因此这是最好的方法。

但是，如果您使用诸如 name="bob" 或 name="bob[1]" 之类的固定名称，那么使所有值可提交的最简单方法是在隐藏输入前面添加相同名称和未检查值。勾选复选框将覆盖隐藏的值。

IE

```
<input type="hidden" name="bob" value="0" />
<input type="checkbox" name="bob" value="1" /> 
```

# amazon-mws - 亚马逊列表订单产品未通过 MWS 显示？

> ID：11985047
> 
> 赞同：0
> 
> 时间：2012-08-16T10:14:19.073
> 
> 标签：amazon-mws

我正在使用亚马逊 MWS 将所有亚马逊订单导入我们的内部数据库。我可以通过 php 和 mysql 导入数据库中的所有订单，但无法获取订单产品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T21:20:28.933

我可以导入您的订单。这意味着你已经`AmazonOrderId`在你的数据库中。

[使用Orders API PHP Client Library](https://developer.amazonservices.com/doc/orders/orders/v20110101/php.html/185-9116211-9356539)中的示例`/src/MarketplaceWebServiceOrders/Samples/ListOrderItemsSample.php`从您的`AmazonOrderId`

# iphone - UIScrollView 内容未更新

> ID：11985053
> 
> 赞同：0
> 
> 时间：2012-08-16T10:14:55.063
> 
> 标签：iphone, ios, cocoa-touch, ipad

我已`UIScrollView`启用舞台和分页功能以向后/向下移动。

我已经添加了 10 个子视图`UIScrollView`。当我修改子视图内的内容时，它不会反映在`UIScrollView`.

```
Book.m

- (void) initializeWithXML:(NSString *)XMLURLString {
    NSData  *xmlData;
    NSString *url;
    if ( ![applicationData getMode] ) {
        resourceRootURL = [[applicationData getAssetsPath] stringByAppendingPathComponent:@"phone/"];
    } else {
        resourceRootURL = [applicationData getAssetsPath];
    }
    url = [resourceRootURL stringByAppendingPathComponent:XMLURLString];    
    //NSLog(@"Root URL...%@", url);

    if ([url rangeOfString:@"http"].location != NSNotFound) {
        xmlData = [NSData dataWithContentsOfURL:[NSURL URLWithString:url]];
    } else {
        xmlData = [NSData dataWithContentsOfFile:url];
    }
    bookContentArray = [self grabXML:xmlData andQuery:@"//page"];
    // view controllers are created lazily
    // in the meantime, load the array with placeholders which will be replaced on demand
    NSMutableArray *controllers = [[NSMutableArray alloc] init];
    for (unsigned i = 0; i < kNumberOfPages; i++) {
        [controllers addObject:[NSNull null]];
    }
    self.viewControllers = controllers;
    [controllers release];

    for(int i = 0; i < [bookContentArray count]; i++) {
        [viewControllers addObject:[NSNull null]];
    }

    if ( isTwoPage ) { 
        kNumberOfPages = [bookContentArray count];
    } else {
        kNumberOfPages = [bookContentArray count]/2;
    }
    CGRect pagingScrollViewFrame = [self frameForPagingScrollView];
    scrollView = [[UIScrollView alloc] initWithFrame:pagingScrollViewFrame];
    scrollView.pagingEnabled = YES;
    scrollView.backgroundColor = [UIColor blackColor];
    scrollView.showsVerticalScrollIndicator = NO;
    scrollView.showsHorizontalScrollIndicator = NO;
    scrollView.contentSize = [self contentSizeForPagingScrollView];
    scrollView.contentSize = CGSizeMake(scrollView.contentSize.width,scrollView.frame.size.height);
    scrollView.delegate = self;
    self.view = scrollView;

    kNumberOfPages = [bookContentArray count];
    pageControl.numberOfPages = kNumberOfPages;
    pageControl.currentPage = 0;

    // pages are created on demand
    // load the visible page
    // load the page on either side to avoid flashes when the user starts scrolling
    [self loadPage:0];
}

- (void) loadPage:(int)number {
    // Calculate which pages are visible
    int firstNeededPageIndex = MAX(number-1, 0);
    int lastNeededPageIndex  = MIN(number+1, [viewControllers count] - 1);
    //NSLog(@"%d,%d",firstNeededPageIndex,lastNeededPageIndex);
    // Recycle no-longer-visible pages 
    for(int i = 0; i < [viewControllers count]; i++) {
        ImageScrollView *page = [viewControllers objectAtIndex:i];
        if ((NSNull *)page != [NSNull null]) {
            if (page.index < firstNeededPageIndex || page.index > lastNeededPageIndex) { 
                //NSLog(@"removed page %d", page.index);
                [page removeImages];
                [page removeFromSuperview];
                page = nil;
                [viewControllers replaceObjectAtIndex:i withObject:[NSNull null]];
            }
        }
    }

    // load the visible page and the page on either side of it (to avoid flashes when the user starts scrolling)
    if ( number == 0 ) {
        [self loadScrollViewWithPage:number];
        [self loadScrollViewWithPage:number+1];
    } else if ( number == [bookContentArray count]-1) {
        [self loadScrollViewWithPage:number-1];
        [self loadScrollViewWithPage:number];
    } else {
        [self loadScrollViewWithPage:number-1];
        [self loadScrollViewWithPage:number];
        [self loadScrollViewWithPage:number+1];
    }

}

- (void)loadScrollViewWithPage:(int)page {
    ImageScrollView *pageController = [[ImageScrollView alloc] initWithFrame:CGRectMake(0, 0, 768, 1024)];
    pageController.index = page;
    pageController.myDelegate = self;
    pageNumber = pageControl.currentPage;
    pageController.isTwoPage = isTwoPage;
    if ( pageNumber == page ) {        
        pageController.isCurrentPage = YES;
    } else {
        pageController.isCurrentPage = NO;
    }
    [controller setImageURL:leftURL andRightURL:rightURL andPriority:0];
    [scrollView addSubview:controller];
}

ImageScrollView.m
- (void) setImageURL:(NSString *)leftURL andRightURL:(NSString *)rightURL andPriority:(int)priority {

    [imageView removeFromSuperview];
    [imageView release];
    imageView = nil;
    if ( !isTwoPage ) {
        imageView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 768, 1024)];
    } else {
        imageView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 1024, 768)];
    }

    if ( isTwoPage ) {
        leftImage = [[FBEPage alloc] initWithNibName:@"FBEPage" bundle:nil];
        leftImage.view.frame = CGRectMake(0, 43, 512, 682);
        rightImage = [[FBEPage alloc] initWithNibName:@"FBEPage" bundle:nil];
        rightImage.view.frame = CGRectMake(512, 43, 512, 682);
    } else {
        leftImage = [[FBEPage alloc] initWithNibName:@"FBEPage" bundle:nil];
        leftImage.view.frame = imageView.frame;
        rightImage = [[FBEPage alloc] initWithNibName:@"FBEPage" bundle:nil];
        rightImage.view.frame = imageView.frame;        
    }
    leftImage.delegate = self;
    rightImage.delegate = self;
    if ( isFirstPage ) {
        [leftImage.view setHidden:YES];
        [rightImage.view setHidden:NO];
    } else if ( isLastPage ) {
        [leftImage.view setHidden:NO];
        [rightImage.view setHidden:YES];
    } else if ( !isTwoPage ) {
        [leftImage.view setHidden:NO];
        [rightImage.view setHidden:YES];
    } else {
        [leftImage.view setHidden:NO];
        [rightImage.view setHidden:NO];
    }

    imageView.backgroundColor = [UIColor whiteColor];

    [self addSubview:imageView];

    [leftImage setImageURL:leftURL];
    [rightImage setImageURL:rightURL];

    [imageView addSubview:leftImage.view];
    [imageView addSubview:rightImage.view];

}

FBPage.m
- (void) setImageURL:(NSString *)url {
    imageView = [[UIImageView alloc] init];
    imageView.frame = CGRectMake(0, 0, 768, 1024);    
    imageView.center = self.view.center;       
    imageView.userInteractionEnabled = TRUE;
    [container addSubview:imageView];
    [activityIndicator setHidden:YES];
    if ([url rangeOfString:@"http"].location != NSNotFound) {
            SDWebImageManager *manager = [SDWebImageManager sharedManager];
            UIImage *cachedImage = [manager imageWithURL:[NSURL URLWithString:url]];
            if (cachedImage) {
                [imageView setImage:cachedImage];
                isImageLoaded = YES;
                [self addScrollView];
            } else {
                [activityIndicator setHidden:NO];
                [activityIndicator startAnimating];
                [manager downloadWithURL:[NSURL URLWithString:url] delegate:self options:0 success:^(UIImage *image){
                [activityIndicator stopAnimating];
                [activityIndicator setHidden:YES];
                [imageView setImage:image];
                isImageLoaded = YES;
                [self addScrollView];
            } failure:nil];
        }
        imageURL = url;
    } else {
        imageView.image = [UIImage imageWithContentsOfFile:url];
        isImageLoaded = YES;
        [self addScrollView];
    } 
}
- (void) setHotspotURL:(NSString *)URL {
    [hotspot.view removeFromSuperview];
    [hotspot release];
    hotspot = nil;
    hotspot = [[FBHotspot alloc] initWithNibName:@"FBHotspot" bundle:nil];   
    hotspot.view.frame = CGRectMake(0, 0, 768, 1024);
    hotspot.delegate = self;
    [hotspot setURL:URL];
    [container addSubview:hotspot.view]; 
}

**When I am calling setHotspotURL and it’s not updating to the scrollview.** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:20:49.783

确保您将内容插入到滚动视图中的正确位置。相应地设置`contentSize`。尝试调用`layoutSubviews`实例`UIScrollView`

# c# - 实际面试：关于会议的一点

> ID：11985067
> 
> 赞同：0
> 
> 时间：2012-08-16T10:15:59.013
> 
> 标签：c#, php, asp.net, session

在电子商务网站上，会有数百万用户，我们如何为所有用户处理（优化）会话。我认为我们为每个会话添加了超时，因此优化似乎没有必要。但事实证明这并不完全正确。我很想知道我们为什么以及如何回答这个简单的问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:45:10.157

会话存储在文件系统中，因此实际上除非您的应用程序需要在硬盘驱动器上进行大量烧坏，否则会话是可以的。

3种可能性：

1.  RAMDISK - Windows 上的完美替代品。多功能 RAM 上的磁盘。除了您的内存释放必须在您的应用程序中良好之外没有任何后果。

2.  COOKIES - 当你可以在客户的机器上存储信息时，你会打扰会话吗？好好消毒饼干。

3.  数据库 - 您可以将信息存储在“临时”数据库中而不是会话中。但是，这将是一种替代方法，并且不能回答问题，因此，我将在此停止。

会话就像有两个面的硬币。

# internet-explorer-9 - openlayers IE9 不刷新

> ID：11985068
> 
> 赞同：1
> 
> 时间：2012-08-16T10:15:59.457
> 
> 标签：internet-explorer-9, openlayers

我在使用 IE9 的 openlayers 页面时遇到问题，更新后地图无法正确刷新。该页面适用于 firefox 和 chrome，并且不会产生 javascript 错误。

在有问题的页面上：

[http://rabeca.org/?ip=buscar](http://rabeca.org/?ip=buscar)

输入搜索字符串“xote”并单击“buscar”应返回 11 个结果并将它们绘制为地图上的图标。在 IE9（可能还有其他 IE 版本）中，不会绘制图标，即使地图正在通过以下函数刷新：

```
 function UpdateFeatureLayer() {
           layer.loaded = false;
           layer.setVisibility(true);
           layer.refresh({ force: true });
    } 
```

为了显示图标，必须用鼠标拖动地图，以便巴西先出去，然后再回到视线。

关于如何解决这个问题的任何想法？

干杯，

# javascript - 从外部 .js 文件在 .html 文件中设置一个值

> ID：11985069
> 
> 赞同：0
> 
> 时间：2012-08-16T10:16:01.757
> 
> 标签：javascript, html

我有一个处理按键的 main.js。我有一个 index.html，我想从 main.js 接收一些变量并做出决定。例如，我想将一个 url 从 main.js 发送到 index.html .. 我在 main.js 中尝试了这段代码，但没有成功。

```
document.getElementById("url").value = "http://example.com"; 
```

在我的 index.html 中，我有：

```
<form name="Params">
<input id="url" type="hidden" value="">
</form> 
```

我只想从 main.js 设置我的 url 输入对象的值。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:21:13.017

您何时调用值分配很重要。它必须在 DOM 加载之后。为此，您可以尝试以下方法之一。

1.  最简单的方法是将您的 main.js 脚本标签放在`/body`关闭标签之后。它应该工作。

2.  在 main.js 中的函数中分配值并调用该函数`onload`事件。

--main.js

```
function assignValue()
{
    document.getElementById("url").value = "http://example.com";
} 
```

--index.html

```
<body onload="assignValue()" > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:21:31.037

您的代码对我来说看起来不错，但触发它的代码可能没有被触发。您尚未包含触发 URL 设置的代码的其他部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T10:23:55.870

I'm guessing the reason it hasn't worked is because you're not waiting for [DOM to initialize](http://yuilibrary.com/yui/docs/event/domready.html) and the Web Browser has finished parsing the HTML.

The simplest 'fix' for this problem would be to hook into the `window.onload` callback in your `main.js` file:

```
// Wait for the DOM to finish loading.
var previousOnload = window.onload;
window.onload = function () {

    // Execute any other `onload` function which may have been bound previously.
    if (typeof previousOnload === 'function') {
        previousOnload();
    }

    document.getElementById("url").value = "http://example.com";
}); 
```

However, it is preferred to listen for the DOM Ready event instead; if you're using jQuery then you can simply write:

```
// Wait for the DOM to initialize first.
$(function () { 
    document.getElementById("url").value = "http://example.com";    
}); 
```

If you don't want to depend on jQuery then you could have a look into the super-lightweight [DOMReady.js](https://github.com/ded/domready/)

# c++ - Objective-C 编码器迁移到 C++ - 方法命名约定

> ID：11985077
> 
> 赞同：3
> 
> 时间：2012-08-16T10:16:45.597
> 
> 标签：c++, objective-c

作为一名 Objective-C 编码员，我习惯于描述方法名称，例如

```
[car insertFuelWithAmount:fuelAmount
                     type:fuelType
  causesCarToSelfDestruct:NO]; 
```

大多数程序员如何在 C++ 中命名相应的方法？我特别有两个问题：

1.  我的“C++ Primer”第 4 版副本提到（第 46 页）这`gosh_this_is_an_impossibly_long_name_to_type`是一个“非常糟糕的标识符名称”。这与 Objective-C 中的心态不同，后者鼓励描述性很强的名称，即使它们很长。为什么 C++ 编码人员不喜欢长的？

2.  也许这不是一味的迁移，而是彻底改变一个人的心态？如果是这样，需要进行哪些更改？

如果您不介意，请随意允许您自己提出一些进一步的一般性想法。（我知道这不是一个讨论笼统和模糊问题的论坛。因此，我试图在上面说得更具体一些。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T10:27:53.370

正如费尔南德斯指出的那样，您需要找到某种平衡。但请记住，这完全取决于品味，尽管大多数 C++ 程序员都倾向于使用较短但有点描述性的方法名称。

对任何事情都使用极长的名称是不可取的，因为代码实际上将变得不可读。我个人觉得这对我的程序员来说非常令人不安。

当然，语言是不同的，但过渡阶段的重点是删除无关的名称。就像你上面的方法一样。我注意到 Obj-C 程序员到处使用“WithSomething”扩展。例如，这里要改变的一件事是通过使用重载来摆脱那些。

你描述的方法我可能会这样写：

```
car.insertFuel<int>(amount, false); 
```

如果以整数形式假设一定量的燃料。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T10:27:38.677

作为一名 Objective-C 编码人员，我个人在其他编程语言中创建了长方法名称。当我需要从别人那里改变游戏时，我真的很难理解一些代码，因为它使用不可读的方法和变量名称加密。

现在我们不必留意大的源文件，让我们为自己和可能需要更改代码的其他人清楚。

所以对于你的例子，我个人会写：

```
car.insertFuelTypeAndSelfDestruct(fuelAmount, fuelType, NO); 
```

或者如果你能看到我可以考虑的方法描述`car.insert`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T10:42:40.780

函数参数的这种级别的描述性最好通过为它们定义类型来完成，并使函数名称本身简短易读，例如：

```
enum class fuel_type { petrol, diesel, coal, coffee };
enum class self_destruct { no, yes };

car.insert(amount, fuel_type::petrol, self_destruct::no); 
```

由于可以为不同的参数类型重载函数，这允许通过不同的重载插入其他内容：

```
car.insert(amount, oil_type::crude, self_destruct::yes); 
```

您可能想更进一步，并引入数字参数的类型；特别是如果您没有要重载的“类型”参数：

```
struct fuel_amount {double litres;};
struct oil_amount {double litres;};

car.insert(fuel_amount{100});
car.insert(oil_amount{3}); 
```

请注意，这些技术依赖于新的 C++11 特性（范围枚举和统一初始化）。在旧版本的语言中，类似的技术是可能的，但更麻烦。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T10:29:17.240

我个人（以及迄今为止我工作的所有地方）鼓励在 C++ 代码中使用描述性方法和变量名。然而，大多数程序员倾向于不喜欢太长的名字。在这种情况下，通常必须做出妥协——牺牲一些描述性或考虑一些其他更短或更具描述性的词，以减少长度。

在你的情况下，我会这样做：

```
car.insertFuelWithAmount(fuelAmount, fuelType, safeDestruct); 
```

将方法的名称保留为 id 并跳过最后一个参数的“causesCarTo”前缀。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T10:54:23.710

如果您想坚持使用简单的方法调用，我会执行以下操作：

```
car.insertFuel(amount, type, false); 
```

或者，您可以`Fuel`使用简单的构造函数创建一个类：

```
class Fuel {
public:
    Fuel(int amount, int type, bool selfDestruct)
        : amount(amount), type(type), selfDestruct(selfDestruct) {}

    int amount;
    int type;
    bool selfDestruct;
};

car.insert(Fuel(amount, type, false)); 
```

您还可以创建一个`Fuel`实现命名参数习语的类：

```
class Fuel {
public:
    Fuel() : amount(0), type(0), selfDestruct(false) {}

    Fuel& Amount(int amount) {
        this->amount = amount;
        return *this;
    }
    Fuel& Type(int type) {
        this->type = type;
        return *this;
    }
    Fuel& SelfDestruct(bool selfDestruct) {
        this->selfDestruct = selfDestruct;
        return *this;
    }

    int amount;
    int type;
    bool selfDestruct;
};

car.insert(Fuel().Amount(amount).Type(type).SelfDestruct(false)); 
```

# iphone - UIImage 大小取决于 UITableViewCell 高度

> ID：11985078
> 
> 赞同：0
> 
> 时间：2012-08-16T10:16:45.573
> 
> 标签：iphone, ios, uitableview, uiimageview

我有一个 UITableView，其单元格具有动态高度。我想要做的基本上是有一个图像作为每个 tableview 行的容器，如下图所示。由于每行的内容不同，因此应调整图像的高度以包含单元格的文本。

![单元格的图像容器](../Images/947c54e962206d3446039bbc392f026b.png)

我想知道实现它的最佳实践是什么。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T10:52:22.410

有一个单元格的背景图像视图，并根据您必须放置在单元格内的内容设置框架大小。然后你可以使用“stretchableImageWithLeftCapWidth:topCapHeight:”方法来创建你想要设置单元格背景的图像。

```
 UIImage *backgroundImg = [[UIImage imageNamed:@"test.png"] stretchableImageWithLeftCapWidth:30  topCapHeight:20];

[cell.bgImageView setFrame:CGRectMake(a, b, c, d];
cell.bgImageView.image = backgroundImg; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:17:29.377

你可以对这个图像使用 sizeToFit 方法。否则使用图像类型作为中心或 scaleToFit。

# ruby - 打印变量

> ID：11985079
> 
> 赞同：4
> 
> 时间：2012-08-16T10:16:46.293
> 
> 标签：ruby, oop

我的问题可能很简单，但我无法在任何地方找到答案。

创建类时，例如：

```
class Book
  @author = "blabla"
  @title = "blabla"
  @number_of_pages" 
```

我想创建一种方法来打印出我的变量。当我尝试时，我遇到了一个问题：

```
def Print
  puts @author, @title, @number_of_pages
end 
```

我什么也得不到。

当我尝试：

```
def Print
  puts "@author, @title, @number_of_pages"
end 
```

我直截了当：“@author，@title，@number_of_pages”

如何使该`Print`方法打印出变量的值？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T10:19:43.720

您应该将变量初始化移动到`initialize`：

```
class Book
  def initialize
    @author = "blabla"
    @title = "blabla"
    @number_of_pages = 42 # You had a typo here...
  end
end 
```

在你的问题中，变量是类实例变量（如果你对它感到好奇，你可以谷歌，但它在这里并不真正相关）。

初始化为（普通）实例变量，`Print()`如果您只是想转储状态，则您的第一个版本可以工作——它将每个参数打印在自己的行上。

为了使您的第二个版本`Print()`工作，您需要将变量包装起来`#{}`以进行插值：

```
def print # It's better not to capitalize your method names
  puts "#{@author}, #{@title}, #{@number_of_pages}"
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T12:09:01.490

除了 Darshan 已经非常出色的答案之外，这里是您可以做到的最佳方式

```
class Book

  attr_accessor :author, :title, :number_of_pages 
  #so that you can easily read and change the values afterward

  def initialize author, title, number_of_pages = nil 
    #so that you don't really need to provide the number of pages
    @author = author
    @title = title
    @number_of_pages = number_of_pages
  end

  def print
    puts "#{@author}, #{@title}, #{@number_of_pages}" 
  end 
end 

my_book = Book.new("blabla", "blabla", 42)
my_book.title = "this is a better title"
my_book.print

#=>blabla, this is a better title, 42 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T14:35:24.627

我认为*达​​山计算*已经很好地解决了你的问题。但在这里，我想为您提供实现这一目标的替代方法。

我假设您想打印出类中的所有实例变量。方法**instance_variables**可以返回符号中所有 instance_variables 的数组。然后你可以迭代它们做任何你想做的事情。请注意：instance_variable_get 非常方便，但不是最佳实践。

```
class Book
  attr_reader :author, :title, :number_of_pages

  def initialize(author, title, number_of_pages)
    @author = author
    @title = title
    @number_of_pages = number_of_pages
  end

  def print_iv(&block)
    self.instance_variables.each do |iv|
      name = iv
      value = send(iv.to_s.gsub(/^@/, ''))
      # value = instance_variable_get(iv) # Not recommended, because instance_variable_get is really powerful, which doesn't actually need attr_reader
      block.call(name, value) if block_given?
    end
  end
end

rb = Book.new("Dave Thomas", "Programming Ruby - The Pragmatic Programmers' Guide", 864)

# rb.instance_variables #=> [:@author, :@title, :@number_of_pages]
rb.print_iv do |name, value|
  puts "#{name} = #{value}"
end
#=> @author = Dave Thomas
#=> @title = Programming Ruby - The Pragmatic Programmers' Guide
#=> @number_of_pages = 864

# You can also try instance_eval to run block in object context (current class set to that object)
# rb.instance_eval do
#   puts author
#   puts title
#   puts number_of_pages
# end 
```

# android - 从应用程序内部测量 Android 网络性能

> ID：11985080
> 
> 赞同：0
> 
> 时间：2012-08-16T10:16:48.927
> 
> 标签：android, networking

是否可以从应用程序内部测量 Android 网络性能？还是来自Android shell？

我正在尝试测量同时使用 Android HTTP API 和 WebView 的应用程序的网络性能。我希望看到每秒比特数会流向不同的 IP 地址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:51:26.033

看看 AT&T 提供的 ARO 工具。它是免费使用和开源的。它可以让您分析您的网络活动、电池消耗和 CPU 使用情况。分析选项很详细，列出了各个地址和 IP 地址，以及有关两次获取相同数据的位置的信息。 [http://developer.att.com/aro](http://developer.att.com/aro)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T12:44:55.380

您可以使用 mobify 但警告，它需要很多设置：[http ://www.akamai.com/html/about/press/releases/2012/press_032012.html](http://www.akamai.com/html/about/press/releases/2012/press_032012.html)

# django - 无法使用工头和 gunicorn 运行 django 应用程序

> ID：11985082
> 
> 赞同：4
> 
> 时间：2012-08-16T10:16:57.460
> 
> 标签：django, heroku, foreman

我正在尝试使用 gunicorn 和工头运行我的 django 应用程序。我可以使用`python manage.py server`. 但是，当使用 forman 运行它时，它会失败 -

```
15:32:01 web.1  | started with pid 29188
15:32:01 web.1  | 2012-08-16 15:32:01 [29191] [INFO] Starting gunicorn 0.14.6
15:32:01 web.1  | 2012-08-16 15:32:01 [29191] [INFO] Listening at: http://127.0.0.1:8000 (29191)
15:32:01 web.1  | 2012-08-16 15:32:01 [29191] [INFO] Using worker: sync
15:32:01 web.1  | 2012-08-16 15:32:01 [29194] [INFO] Booting worker with pid: 29194
15:32:01 web.1  | 2012-08-16 15:32:01 [29194] [INFO] Worker exiting (pid: 29194)
15:32:02 web.1  | 2012-08-16 15:32:02 [29191] [INFO] Shutting down: Master
15:32:02 web.1  | 2012-08-16 15:32:02 [29191] [INFO] Reason: Worker failed to boot.
15:32:02 web.1  | exited with code 3 
```

以下是 Procfile 的内容 -

```
web: gunicorn tms.wsgi 
```

我一直按照 heroku 上的说明进行设置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T16:41:51.400

你遵循什么指示？我使用这个在 Heroku 上运行 Django 应用程序：

```
web: python django_project/manage.py run_gunicorn -b "0.0.0.0:$PORT" -w 3 -k gevent --preload 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-05T15:23:55.787

如果您在遵循 Heroku 文档时遇到问题，那么您可以查看我部署到 Heroku 的示例应用程序[https://github.com/shinigamiryuk/Django-Heroku-Sample-Application](https://github.com/shinigamiryuk/Django-Heroku-Sample-Application)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T20:25:40.720

`'gunicorn'`您添加到的settings.py 文件位于哪个目录`INSTALLED_APPS`？我假设您正在关注 Heroku Getting Started with Django 教程。您在其中声明的 .wsgi 文件`Procfile`应与您的 settings.py 所在的目录匹配。

你`Procfile`应该是：

```
 web: gunicorn <directory_containing_settings.py_file>.wsgi -b 0.0.0.0:$PORT 
```

# java - 关于在 TableXYDataset 中添加系列

> ID：11985084
> 
> 赞同：1
> 
> 时间：2012-08-16T10:17:31.053
> 
> 标签：java, jfreechart

我`ChartFactory.createStackedXYAreaChart()`在我的应用程序中使用`JFreeChart`. 该图表`TableXYDataset`在创建时需要在它的参数中。我的问题是我使用不同的系列来添加图表，但它不允许我将不同的系列添加到`XYDataset`. 我正在使用以下代码：

```
XYSeries series1 = new XYSeries("First");

series1.add(0.1,25);
series1.add(0.2,43);
series1.add(0.5,70);
series1.add(0.64,94);
series1.add(0.9,112);

XYSeries series2 = new XYSeries("Second");

series2.add(0.9,112);
series2.add(1.1,150);
series2.add(1.3,175);
series2.add(1.5,200);
series2.add(1.7,225);
series2.add(1.9,250);

XYSeriesCollection dataset = new XYSeriesCollection();
dataset.addSeries(series1);
dataset.addSeries(series2);

return dataset; 
```

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T10:57:01.580

[`DefaultTableXYDataset`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/data/xy/DefaultTableXYDataset.html)是一个`TableXYDataset`有`addSeries(XYSeries series)`方法的。

附录：请注意，*不允许*重复。例如，

![在此处输入图像描述](../Images/3248b2c54cfd4721687c0a1a65238994.png)

```
XYSeries series1 = new XYSeries("First", true, false);
series1.add(0.1, 25);
series1.add(0.2, 43);
series1.add(0.5, 70);
series1.add(0.64, 94);
series1.add(0.9, 112);

XYSeries series2 = new XYSeries("Second", true, false);
series2.add(0.9, 112);
series2.add(1.1, 150);
series2.add(1.3, 175);
series2.add(1.5, 200);
series2.add(1.7, 225);
series2.add(1.9, 250);

DefaultTableXYDataset dataset = new DefaultTableXYDataset();
dataset.addSeries(series1);
dataset.addSeries(series2);
return dataset; 
```

# visual-studio - 如何修复 Visual Studio 2010 中的错误 MSB4018？

> ID：11985085
> 
> 赞同：8
> 
> 时间：2012-08-16T10:17:31.163
> 
> 标签：visual-studio

> 错误 MSB4018：“VCMessage”任务意外失败。System.FormatException：索引（从零开始）必须大于或等于零且小于参数列表的大小。在 System.Text.StringBuilder.AppendFormat(IFormatProvider provider, String format, Object[] args) 在 System.String.Format(IFormatProvider provider, String format, Object[] args) 在 Microsoft.Build.Shared.ResourceUtilities.FormatString(String Microsoft.Build.Utilities.TaskLoggingHelper.FormatResourceString(String resourceName, Object[] args) 在 Microsoft.Build. Microsoft.Build.CPPTasks 上的 Utilities.TaskLoggingHelper.LogWarningWithCodeFromResources(String messageResourceName, Object[] messageArgs)。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-07-21T10:00:55.983

我有同样的问题。我有一个旧的 Visual Studio 2005 C++ 项目，我用 Visual Studio 2010 C++ 重新打开了它。[对我来说， Microsoft Connect](http://connect.microsoft.com/VisualStudio/feedback/details/521318/error-msb4018-the-vcmessage-task-failed-unexpectedly)提出的第一个建议奏效了：

> 问题源于在 Link->OutputFile 下的属性页中发现意外的 $(TargetDir)。在构建过程中，我们尝试将 OutputFile 扩展为完整路径，但只得到一个空值。因此，它导致了索引越界异常。
> 
> 我们不太可能在 VS2010 发布之前修复这些问题。解决方法是更正 OutputPath 或从父级继承。

右键单击项目并转到属性 > 链接器 > 常规。然后将“输出文件”设置为“<从父级或项目默认值继承>”

希望也能为您解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-29T16:51:20.800

我不知道出了什么问题。为我解决此错误的唯一方法是删除配置并创建一个新配置。因此，在配置管理器中，我删除了不会构建的那个，然后我从一个类似的中重新创建了它。

# encoding - SMPP 中“data_coding”字段的含义

> ID：11985088
> 
> 赞同：6
> 
> 时间：2012-08-16T10:17:37.137
> 
> 标签：encoding, sms, decoding, smpp

[SMPP](https://en.wikipedia.org/wiki/Short_Message_Peer-to-Peer "SMPP")协议中的**“data_coding”**字段是什么意思？

我搜索了这个，但找不到任何有用的资源。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-16T12:11:11.893

简而言之，数据编码包含有关如何对 smpp SubmitSM（即典型的 SMS 消息）消息中的文本进行编码的信息。SubmitSM 数据包包含一个二进制编码的正文，dataCoding 是文本在此正文中的存储方式。

最重要的价值观是：

*   **00000000** (0) - 通常是[GSM7](http://en.wikipedia.org/wiki/GSM_03.38)（消息的默认 7 位编码，有几个字符被编码为两个字节），但从技术上讲可能是别的东西
*   **00000011** (3) 用于标准 ISO-8859-1
*   **00001000** (8) 用于通用字符集——事实上的 UTF-16

其他可能的值（很少使用）：

*   **00000001** - IA5_CCITT_T_50_ASCII_ANSI_X3_4
*   **00000010** - OCTET_UNSPECIFIED_8BIT_BINARY_1
*   **00000100** - OCTET_UNSPECIFIED_8BIT_BINARY_2
*   **00000101** - JIS_X_02081990
*   **00000110** - CYRLLIC_ISO88595
*   **00000111** - LATIN_HEBREW_ISO88598
*   **00001001** - PICTOGRAM_ENCODING
*   **00001010** - ISO2022JP_MUSIC_CODES
*   **00001101** - EXTENDED_KANJI_JISX_02121990
*   **00001110** - KS_C_5601

还有两个留作特殊用途：

*   **00001011** - 保留 #1
*   **00001100** - 保留 #2

简而言之，如果您的二进制正文是 unicode (UTF-16)，您将 dataCoding 设置为 8。如果您的消息存储为 GSM7，那么它将（通常）为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:23:22.220

这意味着文本如何转换为字节，因为 SMPP 是二进制协议，但应用程序通常处理文本字符串。谷歌第一次点击“smpp 数据编码”很好地解释了它[http://sourceforge.net/apps/trac/smstools/raw-attachment/wiki/MiscWikiFiles/smppv34_gsmumts_ig_v10.pdf](http://sourceforge.net/apps/trac/smstools/raw-attachment/wiki/MiscWikiFiles/smppv34_gsmumts_ig_v10.pdf)在第 2.2.2 节中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T19:56:47.973

这绝对有帮助： [ETSI GSM 03.38 Specification](http://www.etsi.org/deliver/etsi_gts/03/0338/05.00.00_60/gsmts_0338v050000p.pdf)

# c# - T4模板生成解决方案文件的相对路径

> ID：11985091
> 
> 赞同：1
> 
> 时间：2012-08-16T10:17:45.690
> 
> 标签：c#, visual-studio-2010, visual-studio, t4

我需要一个 T4 模板或其他东西来与 Visual Studio 集成以在解决方案中生成文件的相对路径。

他们有任何插件或t4吗？我正在使用 Visual Studio 2012。

像这样的东西：

```
 public static class Scripts
    {
        public static class AdminSkin
        {
            public static class Css
            {
                public const string Site = "/Scripts/adminskin/css/site.css";
                public const string SiteFa = "/Scripts/adminskin/css/site-fa.css"; 
                public const string Reset = "/Scripts/adminskin/css/reset.css";
                public const string SimpleList = "/Scripts/adminskin/css/simple-lists.css";
                public const string SpecialPages = "/Scripts/adminskin/css/special-pages.css";

            }

            public static class Js
            {
                public const string Site = "/Scripts/adminskin/js/site.js";
                public const string JqueryaccessibleList = "/Scripts/adminskin/js/jquery.accessibleList.js";
                public const string Jquerytip = "/Scripts/adminskin/js/jquery.tip.js";
                public const string List = "/Scripts/adminskin/js/list.js";
                public const string Oldbrowsers = "/Scripts/adminskin/js/old-browsers.js";
                public const string LiveControl = "/Scripts/adminskin/js/live-control.js";
            }
        }

        public static class Calendar
        {
            public static class Js
            {
                public const string Calendar = "/Scripts/calendar/calendar.js";
                public const string CalendarSetup = "/Scripts/calendar/calendar-setup.js";

                public const string CalendarFa = "/Scripts/calendar/calendar-fa.js";
                public const string CalendarEn = "/Scripts/calendar/calendar-en.js";
            }

            public static class Css
            {
                public const string Theme = "/Scripts/calendar/aqua/theme.css";
            }
        }

        public static class HighChart
        {
            public static class Js
            {
                public const string Highstock = "/Scripts/highchart/highstock.js";
                public const string HighstockModified = "/Scripts/highchart/highstock.src.js";
                public const string Theme = "/Scripts/highchart/themes/mytheme.js";
                public const string Exporting = "/Scripts/highchart/modules/exporting.src.js";
            }
        }

        public static class ImageGallery
        {
            public static class Js
            {
                public const string JqueryEasing = "/Scripts/ImageGallery/js/jquery.easing.1.3.min.js";
                public const string JqueryWtRotator = "/Scripts/ImageGallery/js/jquery.wt-rotator.min.js";
                public const string Preview = "/Scripts/ImageGallery/js/preview.js";
            }

            public static class Css
            {
                public const string Preview = "/Scripts/ImageGallery/preview.css";
                public const string JqueryWtRotator = "/Scripts/ImageGallery/wt-rotator.css";
            }
        }

        public static class JQuery
        {
            public static class Js
            {
                public const string JqueryCdn = "http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.2.min.js ";
                public const string JqueryUiCdn = "http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.20/jquery-ui.min.js";
                public const string JqueryUiCssCdn = "http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.20/themes/ui-lightness/jquery-ui.css";

                public const string JqueryLocal = "/Scripts/jquery/jquery-1.7.min.js";
                public const string JqueryUiLocal = "/Scripts/jquery-ui/js/jquery-ui-1.8.20.custom.min.js";
                public const string JqueryUiCssLocal = "/Scripts/jquery-ui/css/ui-lightness/jquery-ui-1.8.20.custom.css";
            }
        }

        public static class Linq
        {
            public static class Js
            {
                public const string Linq = "/Scripts/linq.js/linq.min.js";
            }
        }

        public static class Moment
        {
            public static class Js
            {
                public const string Moment = "/Scripts/moment/moment.min.js";
            }
        }

        public static class Lang
        {
            public static class Js
            {
                public const string Jalali = "/Scripts/lang/jalali.js";
                public const string LangFa = "/Scripts/lang/lang-fa.js";
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T16:30:39.303

[T4MVC](http://t4mvc.codeplex.com/)可能是您正在寻找的。它是[用于 ASP.NET MVC 应用程序的 T4 模板，用于](http://t4mvc.codeplex.com/documentation)创建强类型帮助程序。它将生成一组您可以使用而不是使用字符串的类。对于 javascript 文件等静态文件，将有一组类，例如：

```
Links.Scripts.jquery_validate_js 
```

这将返回格式为“~/Scripts/jquery.validate.js”的字符串。

对于 WebForms 项目，[David Ebbo 创建了一个](http://blogs.msdn.com/b/davidebb/archive/2009/07/12/asppathguru-a-little-t4-love-for-asp-net-webforms.aspx)名为 AspPathGuru.tt 的简单 T4 模板。目前仅支持 .aspx、.ascx 和 .master 文件。但是，如果您编辑 IgnoreFile 方法，如下所示，您可以为其他文件生成代码：

```
bool IgnoreFile(FileInfo file) {
    // Only look for a few specific extensions
    switch (file.Extension.ToLowerInvariant()) {
        case ".aspx":
        case ".ascx":
        case ".js":
        case ".css":
        case ".master":
            return false;
    }

    return true;
} 
```

这将生成一个您可以使用的 Paths 类，如下所示：

```
Paths.Scripts.jquery_1_4_1_js 
```

# model-view-controller - Zend Framework 基本请求工作流

> ID：11985092
> 
> 赞同：0
> 
> 时间：2012-08-16T10:17:46.310
> 
> 标签：model-view-controller, zend-framework

我正在浏览这个 PDF (http://nethands.de/download/zenddispatch_en.pdf)，它详细说明了 Zend Framework 请求的详细工作流程。

这对我来说似乎很困惑，所以想知道是否有人可以对我简单地逐步列出这些？

提前谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:36:50.107

步骤很简单：

1.  路由
2.  派遣

PDF 看起来很复杂，因为它列出了您可以连接到此过程的所有位置，以及受它影响的所有对象。例如，使用控制器插件，您可以编写一些将在路由（`routeStartup`）之前和路由（ ）之后运行的代码`routeShutdown`。在 PDF 中，您将看到这些表示为红色“路由”框上方和下方的绿色框。

手册中的图表可能更清晰一些：http: [//framework.zend.com/manual/en/zend.controller.basics.html](http://framework.zend.com/manual/en/zend.controller.basics.html)

# django - Django sentry 安装错误

> ID：11985094
> 
> 赞同：1
> 
> 时间：2012-08-16T10:17:51.017
> 
> 标签：django, sentry

我正在尝试为我的应用程序安装 django sentry，但在安装时出现以下错误：-

```
In file included from Modules/_billiard/multiprocessing.c:9:
Modules/_billiard/multiprocessing.h:12:20: error: Python.h: No such file or directory
Modules/_billiard/multiprocessing.h:13:26: error: structmember.h: No such file or directory
Modules/_billiard/multiprocessing.h:14:22: error: pythread.h: No such file or directory
In file included from Modules/_billiard/multiprocessing.c:9:
Modules/_billiard/multiprocessing.h:127: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
Modules/_billiard/multiprocessing.h:133: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
Modules/_billiard/multiprocessing.h:134: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
Modules/_billiard/multiprocessing.h:135: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
Modules/_billiard/multiprocessing.h:136: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
Modules/_billiard/multiprocessing.h:137: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘BilliardSemLockType’
Modules/_billiard/multiprocessing.h:138: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘BilliardConnectionType’
Modules/_billiard/multiprocessing.h:139: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘BilliardPipeConnectionType’
Modules/_billiard/multiprocessing.h:171: error: expected specifier-qualifier-list before ‘PyObject_HEAD’
Modules/_billiard/multiprocessing.c:17: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
Modules/_billiard/multiprocessing.c:19: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
Modules/_billiard/multiprocessing.c:20: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
Modules/_billiard/multiprocessing.c:26: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
Modules/_billiard/multiprocessing.c:101: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
Modules/_billiard/multiprocessing.c:136: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
Modules/_billiard/multiprocessing.c:181: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
Modules/_billiard/multiprocessing.c:199: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘Billiard_module_methods’
Modules/_billiard/multiprocessing.c:222: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘init_billiard’
error: Setup script exited with error: command 'gcc' failed with exit status 1 
```

Django 版本是 1.2.5，python 是 2.6。我已经尝试了所有方法（easy_install，pip，下载和安装），但仍然是同样的错误。

请任何人就此提出建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T09:18:51.320

问题是 GCC 找不到 Python 头文件。

如果您使用由某种包系统安装的 Python，请尝试安装 Python 的开发者包。它应该被命名为 python-dev 或类似的东西。

# scala - 我们应该直接使用 ScalaSignature 吗？

> ID：11985096
> 
> 赞同：10
> 
> 时间：2012-08-16T10:17:53.483
> 
> 标签：scala, reflection, annotations, jvm, .class-file

ScalaSignature 是一个注解。它包含元信息。

*   [https://github.com/scala/scala/blob/v2.9.2/src/library/scala/reflect/ScalaSignature.java](https://github.com/scala/scala/blob/v2.9.2/src/library/scala/reflect/ScalaSignature.java)

然后提供解析器。但`scala-library.jar`不包含解析器。这似乎是秘密 API。

*   [https://github.com/scala/scala/blob/v2.9.2/src/scalap/scala/tools/scalap/scalax/rules/scalasig/ScalaSig.scala](https://github.com/scala/scala/blob/v2.9.2/src/scalap/scala/tools/scalap/scalax/rules/scalasig/ScalaSig.scala)

但我知道一些使用 ScalaSignature 的库。

*   [https://github.com/lift/framework/blob/2.4-release/core/json/src/main/scala/net/liftweb/json/ScalaSig.scala](https://github.com/lift/framework/blob/2.4-release/core/json/src/main/scala/net/liftweb/json/ScalaSig.scala)
*   [https://github.com/msgpack/msgpack-scala/blob/version-0.6.6/src/main/scala/org/msgpack/scalautil/ScalaSigUtil.scala](https://github.com/msgpack/msgpack-scala/blob/version-0.6.6/src/main/scala/org/msgpack/scalautil/ScalaSigUtil.scala)
*   [https://github.com/havocp/beaucatcher/blob/v0.5.0/caseclass/src/main/scala/org/beaucatcher/caseclass/ClassAnalysis.scala](https://github.com/havocp/beaucatcher/blob/v0.5.0/caseclass/src/main/scala/org/beaucatcher/caseclass/ClassAnalysis.scala)

顺便说一句，我找不到 ScalaSignature 的正式规范。我担心 ScalaSignature 的规范可能会因 Scala 版本的变化而改变。此外，我认为使用 ScalaSignature 存在一些其他风险，因为规范不存在。

此外，Scala2.10 将提供新的反射 API。我认为使用 ScalaSignature 的原因会随着 2.10 的发布而减少。

因此，应该使用 ScalaSignature 吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T11:45:25.380

Scala 2.10 中的反射 API 提供了官方支持的对 Java 反射 + Scala 签名的抽象。如果 ScalaSignature 格式改变，反射也会相应改变。

# regex - 正则表达式如果包含 XXX 但不包含 XXX

> ID：11985097
> 
> 赞同：0
> 
> 时间：2012-08-16T10:18:04.853
> 
> 标签：regex, regex-negation

尝试归档正则表达式以过滤退回的电子邮件，将它们与垃圾邮件或临时无法投递不同。

我们的想法是抓取表达式可能包含的某些单词（代码 + 单词），但如果它包含其他单词，例如（SPAM|暂时无法投递|超出磁盘配额）等，则忽略整行，因为这不会被视为永久退回。我们已经管理了第一部分，并在此处找到了一些关于负正则表达式的答案（http://stackoverflow.com/questions/1153856/string-negation-using-regular-expressions），但将两者混合在一个组中完全不成功句到此为止。

就像是：

```
.*(5.3.0|5.1.0).*(User unknown|invalid|Unknown address|doesn't have a) 
```

但如果同一行的其他任何地方包含 xxx 个单词，则不匹配。就像是：

```
^(?!(SPAM|temporarily undeliverable|disk quota exceeded)).*$ 
```

所以下面的第一行会匹配，但第二行不应该

> 诊断代码：smtp；5.3.0 - 其他邮件系统问题 554-“投递错误：dd 此用户没有 btinternet.com 帐户 (xxxxxxxx@xxxxxinternet.com) [0] - mta1000.bt.mail.ird.yahoo.com” (交付尝试：0)
> 
> 诊断代码：smtp；5.1.0 - 未知地址错误 550-'RCPT TO：邮箱磁盘配额超出'（传递尝试：0）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T10:29:54.293

You are searching only at the start of the string for your negation. You just need to add a `.*`

try

```
^(?!.*(SPAM|temporarily undeliverable|disk quota exceeded)).*(5.3.0|5.1.0).*(User unknown|invalid|Unknown address|doesn't have a) 
```

See it [here on Regexr](http://regexr.com?31ro4)

# javascript - 如何使用谷歌地图 api v3 旋转地图方向

> ID：11985107
> 
> 赞同：19
> 
> 时间：2012-08-16T10:18:36.683
> 
> 标签：javascript, jquery, google-maps-api-3

非常简短的问题 - 因为我在 google maps api V3 文档中找不到答案

我正在寻找一个控件，它允许我控制/修改 api 地图的方向，以便北方不在顶部。

这可能吗？如果是这样，怎么做？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T12:10:08.867

您可以使用[45 度想象](https://developers.google.com/maps/documentation/javascript/maptypes#45DegreeImagery)来做到这一点，但它仅适用于特定位置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-31T09:03:55.407

[OpenLayers](https://openlayers.org)是一个免费、轻量级且非常完整的 javascript 映射 API。看看他们的示例页面，它看起来很棒（旋转示例：[https](https://openlayers.org/en/latest/examples/rotation.html) ://openlayers.org/en/latest/examples/rotation.html ）。

OpenLayers 也可以显示谷歌地图图块，然后可以旋转[https://gis.stackexchange.com/a/277606/114599](https://gis.stackexchange.com/a/277606/114599)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-13T16:37:08.740

作为一种解决方法，您可以使用 CSS 转换来旋转其包装器 div：rotate()

*你需要禁用DefaultUI，因为里面的每个元素也会被旋转

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-02-07T15:05:49.350

目前，Google-Maps-API 没有旋转地图的选项（我希望这个功能很快就会出现）。

### 旋转地图的唯一方法是：

1.  mapTypeId 是`satellite`或`hybrid`

2.  地图缩放设置为高值（大约 18 或更多）

3.  通过设置启用地图倾斜`tilt: 45`。此参数将通过将地图倾斜 45 度，将地图显示从 2D 地图视图更改为类似 3D 的视图。

4.  `heading`参数设置为您想要的旋转（0、90、180 和 270 度）。这仅在启用时才有效`tilt`。

5.  地图上的可见区域是支持地图倾斜操作的地方（这些位置有 4 个不同的卫星图像，用于 4 个方向（北、南、东、西）。并非地图上的所有地方都有这 4 个图像，因此不是所有地方地图上可以旋转。

```
 function initMap() {
      map = new google.maps.Map(document.getElementById('map'), {
        center: { lat: 45.518, lng: -122.672 }, // try to put different location and rotation may not work
        zoom: 18, // use a smaller zoom level and rotation may not work
        mapTypeId: 'satellite', // use TERRAIN or ROADMAP and rotation will not work
        heading: 90,
        tilt: 45
      });
    } 
```

有关更多信息，请参阅：[https ://developers.google.com/maps/documentation/javascript/examples/aerial-rotation](https://developers.google.com/maps/documentation/javascript/examples/aerial-rotation)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T11:42:53.627

谷歌地图不这样做。不幸的是，它总是要面对北方。

我似乎确实记得 OpenStreetMaps 确实在旋转，我正在寻找一些东西来证实这种怀疑。过几天会回复你的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-07T19:40:23.553

在Google Map Javascript API的**Beta版中，如果您使用新的矢量地图格式，则支持***倾斜*和*航向*（关于方向）。

*   首先创建[一个新的 MapId](https://developers.google.com/maps/documentation/javascript/cloud-based-map-styling#get-map-id)
*   在您的 API 脚本标签中使用 v=beta

    ```
    <script
    src="https://maps.googleapis.com/maps/api/js?key=API_KEY&v=beta&callback=initMap">
    </script> 
    ```

*   在初始化地图时包括标题和倾斜属性，也包括 MapId
*   如果使用 Chrome，请记住在设置中启用**使用硬件加速**

完整的说明可以在[这里](https://developers.google.com/maps/documentation/javascript/webgl)找到。

# c - 像 Safari Web Inspector 中使用 libxml2 的 DOM 树

> ID：11985108
> 
> 赞同：2
> 
> 时间：2012-08-16T10:18:41.173
> 
> 标签：c, html-parsing, libxml2

如何使用 libxml2 在 Safari 的网络检查器中获取特定 DOM 对象的 DOM 树

![Safari 截图](../Images/b51b61d10e5bec21f819dc5165c39c5b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T07:40:49.400

使用此示例代码，您可以请求一个**TAG**，如果它存在于您的 HTML 中，程序将转储它（我在这里使用了来自 stackoverflow 的 head 标签，在您的代码中，您可能需要使用它`libcurl`来获取您的 HTML 缓冲区）：

```
/* Compile like this :
 * gcc -Wall html_dom_dump.c -o html_dom_dump `xml2-config --cflags` `xml2-config --libs` 
 */
#include <stdio.h>
#include <libxml/HTMLparser.h>
#include <libxml/tree.h>
#include <stdlib.h>

char stackoverflow_html_head[] = "<head>\
    <title>Stack Overflow</title>\
    <link rel=\"shortcut icon\" href=\"http://cdn.sstatic.net/stackoverflow/img/favicon.ico\">\
    <link rel=\"apple-touch-icon\" href=\"http://cdn.sstatic.net/stackoverflow/img/apple-touch-icon.png\">\
    <link rel=\"search\" type=\"application/opensearchdescription+xml\" title=\"Stack Overflow\" href=\"/opensearch.xml\">\
\
\
        StackExchange.init({\"stackAuthUrl\":\"https://stackauth.com\",\"serverTime\":1345183802,\"styleCode\":true,\"enableUserHovercards\":true,\"site\":{\"name\":\"Stack Overflow\",\"description\":\"Q\\u0026A for professional and enthusiast programmers\",\"isNoticesTabEnabled\":true,\"newTitleSearchBoxEnabled\":false,\"enableSocialMediaInSharePopup\":true},\"user\":{\"isAnonymous\":true,\"fkey\":\"52eb3bfedea6eccd9936d40e8ca0c8de\",\"notificationsUnviewedCount\":0,\"inboxUnviewedCount\":-1}});        StackExchange.using.setCacheBreakers({\"js/prettify-full.js\":\"d1cd9a23171c\",\"js/moderator.js\":\"8c49fc268737\",\"js/full-anon.js\":\"945170d238e3\",\"js/full.js\":\"c60de8021771\",\"js/wmd.js\":\"93b92575f8bc\",\"js/third-party/jquery.autocomplete.min.js\":\"e5f01e97f7c3\",\"js/mobile.js\":\"6eb68240242f\",\"js/help.js\":\"fc9fb0517db2\",\"js/tageditor.js\":\"c1ba807b32aa\",\"js/tageditornew.js\":\"bd66fabe1c71\",\"js/inline-tag-editing.js\":\"be882e188985\",\"js/revisions.js\":\"8c6bcd93b7fe\",\"js/suggested-edits.js\":\"46c4696efca5\",\"js/probes.js\":\"beb933322ff0\",\"js/review.js\":\"fca067ef962b\"});\
    </script>\
\
</head>";

int found = 0;

int walk_tree(xmlNode *node, xmlDocPtr doc, char *pattern)
{
        xmlNode *cur_node = NULL;

        for (cur_node = node; cur_node; cur_node = cur_node->next)
        {
                if ((!xmlStrcmp(cur_node->name, (const xmlChar *)pattern)))
                {
                        found++;
                        fprintf(stdout, "\n----> WE GOT IT\n\n");
                        xmlElemDump(stdout, doc, cur_node);
                        fprintf(stdout, "\n<----\n");
                }
                walk_tree(cur_node->children, doc, pattern);
        }

        return found;
}

int main(int argc, char **argv)
{
        int ret;
        /* Create a parser context*/
        htmlParserCtxtPtr html_parser = htmlCreatePushParserCtxt(NULL, NULL, NULL, 0, NULL, 0);

        if (argc != 2)
        {
                fprintf(stderr, "Usage : ./html_dom_dump TAG");

                exit(EXIT_FAILURE);
        }

        /* remove blank nodes
         * suppress error reports
         * suppress warning reports
         * Forbid network access
         * more on this options: http://xmlsoft.org/html/libxml-HTMLparser.html#htmlParserOption
         */
        htmlCtxtUseOptions(html_parser, HTML_PARSE_NOBLANKS | HTML_PARSE_NOERROR | HTML_PARSE_NOWARNING | HTML_PARSE_NONET);
        /* parsing our stackoverflow html header */
        htmlParseChunk(html_parser, stackoverflow_html_head, sizeof(stackoverflow_html_head), 0);
        /* Traverse all the tree to find the given TAG (pattern) */
        ret = walk_tree(xmlDocGetRootElement(html_parser->myDoc), html_parser->myDoc, argv[1]);
        if (!ret)
                fprintf(stdout, "No luck, this tag does not exit!\n");

        return 0;
} 
```

使用 libxml2 编译和链接：

```
gcc -Wall html_dom_dump.c -o html_dom_dump `xml2-config --cflags` `xml2-config --libs` 
```

你可以像这样运行它：

```
toc@UnixServer:~$ ./html_dom_dump head

----> WE GOT IT

<head>
<title>Stack Overflow</title>
<link rel="shortcut icon" href="http://cdn.sstatic.net/stackoverflow/img/favicon.ico">
<link rel="apple-touch-icon" href="http://cdn.sstatic.net/stackoverflow/img/apple-touch-icon.png">
<link rel="search" type="application/opensearchdescription+xml" title="Stack Overflow" href="/opensearch.xml">
</head>

<----
toc@UnixServer:~$ ./html_dom_dump link

----> WE GOT IT

<link rel="shortcut icon" href="http://cdn.sstatic.net/stackoverflow/img/favicon.ico">

<----

----> WE GOT IT

<link rel="apple-touch-icon" href="http://cdn.sstatic.net/stackoverflow/img/apple-touch-icon.png">

<----

----> WE GOT IT

<link rel="search" type="application/opensearchdescription+xml" title="Stack Overflow" href="/opensearch.xml">
<----
toc@UnixServer:~$ ./html_dom_dump TAG
No luck, this tag does not exit! 
```

如果你不知道你也可以`libcurl + LibTidy`用来获取和解析你的 HTML： [http ://curl.haxx.se/libcurl/c/htmltidy.html](http://curl.haxx.se/libcurl/c/htmltidy.html)

# c# - Entity Framework 5 导航属性插入性能

> ID：11985109
> 
> 赞同：0
> 
> 时间：2012-08-16T10:18:42.077
> 
> 标签：c#, asp.net, entity-framework

我有两个通过多对多关系相互绑定的类。

```
public class A{
    public int ID { get; set; }
    public ICollection<B> bList { get; set; }
}

public class B{
    public int ID { get; set; }
    public ICollection<A> aList { get; set; }
} 
```

现在的问题是我创建了一个A的新对象，初始化bList，将3000个对象添加到bList中并调用Context.SaveChanges()。但是，操作真的很慢，花了50秒左右，甚至bList中的每个对象都已经在数据库中。我该如何改进这个插件？我查看了我的 sql 探查器，我看到的是 EF 为每个 A_ID 和 B_ID 对调用 insert 语句。

请注意，每次使用 using 语句创建一次时，我都不会创建上下文，并执行所有操作 init。除此之外，我尝试禁用 LazyLoading 和 AutoDetect = false 但它也不起作用。

此致，

凯末尔

# crystal-reports - 停止交叉表摘要显示字符串计数在每页上重置

> ID：11985110
> 
> 赞同：0
> 
> 时间：2012-08-16T10:18:43.310
> 
> 标签：crystal-reports, crystal-reports-xi

我在 Crystal Reports XI 中有一个交叉表，其显示字符串显示每次满足条件时的计数：

基本上，我有一个汇总列金额，我需要将其与 avblcredit 进行比较，并计算每个客户组的金额（汇总）超过 avblcredit 的每个订单。然后，我必须显示超出可用信用额度的该客户的订单总量。

由于我无法在 Crystal Xi 中使用计算成员，因此经过了很多努力。我为项目 exditures 创建了第二个重复摘要，并编辑了第二个摘要的显示字符串以将其自身与 avbl credit 进行比较，然后计算：

```
global numbervar count;
 if currentvalue > avblcredit
    then count := count + 1; 
count; 
```

然后，在找到当前值（项目总和）> 可用信用的任何地方，计数都会增加。

如果交叉表完全打印在页面上，这将正常工作，但是如果交叉表扩展到下一页，则计数重置回 0。

所以基本上作为示例页面 1 如下所示：

```
customer 1
orders avblcredit amountspent count itema itemb itemc
ord1    4000         6000        1   2000  3000  1000
ord2    3734         5001        2   1000  2000  2001
ord3    4123         5000        3   4000  1000  0
ord4    2321         5000        4   5000  0     0
ord5    4000         5003        5   1200  3800  3
ord6    4000         6000        6   1000  2000  3000 
```

客户 1 组的第 2 页续：

```
orders avblcredit amountspent count itema itemb itemc
ord7    4000         6000        1   2000  3000  1000
ord8    3734         5001        2   1000  2000  2001
ord9    4123         5000        3   4000  1000  0
ord10   2321         5000        4   5000  0     0 
```

我的问题是如何在每个新页面上重置我的计数？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:48:21.387

如果您可以修改数据源，则可以在上游进行计算。只需使用一个新字段扩展您现有的数据集，该字段名称**为**0 或 1。 ，并且您不依赖于 Crystal 的全局变量。

# javascript - 用 JS 重新定位一个 div

> ID：11985114
> 
> 赞同：0
> 
> 时间：2012-08-16T10:18:56.890
> 
> 标签：javascript, html

有没有一种方法可以使用 JS 重新定位 div，以便在页面上方的 HTML 中拥有最相关的副本。但是，当涉及到最终用户所看到的内容时，可以灵活地在您喜欢的任何地方显示相同的副本吗？IE...

HTML：

```
<div id="three">Three(to be at the top of HTML but display at bottom in browser)</div>
<div id="one">One</div>
<div id="two">Two</div> 
```

浏览器：

```
One
Two 
Three(to be at the top of HTML but display at bottom in browser) 
```

是否有任何地方的教程，我需要使用什么功能？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:22:46.963

把这个写在你的 CSS 中，不需要 JS：

```
#three {
    position: fixed;
    bottom: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:27:31.847

您可以使用这种 javascript 来修改 CSS 属性。为了与名为 Safari 的用户的想法相同，我们可以想出这样的代码：

```
<script>
  document.getElementById('three').style.position = 'fixed';
  document.getElementById('three').style.bottom = 0;
</script> 
```

# php - PHP：用两个 foreach 循环分解两个分隔符

> ID：11985115
> 
> 赞同：1
> 
> 时间：2012-08-16T10:18:59.063
> 
> 标签：php, loops, foreach, explode

我试图通过使用两个定界符爆炸来获得两个 foreach 循环`<>`，`"\n"`但出现错误。`Warning: Invalid argument supplied for foreach()`

这是我的代码

```
<?php

    $specifications = $scooter_meta->get_the_value('specifications');

    $titles = explode('<>', $specifications);

    $descs = explode("\n", $specifications);

    echo '<dl>';

    foreach($titles as $title => $descs){

        echo '<dt>' . $title . '</dt>';

        foreach($descs as $desc){
            echo '<dd>' . $desc . '</dd>';
        }

    }

    echo '</dl>';

?> 
```

进入textarea的值是这样的`Title here<>this is the first scooter ever made. Title here 2<>another line for specification`事实上我想让它像`<title 1> here detail text`

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T10:24:02.127

该`$descs`变量不是数组，因为第一个 foreach 循环设置`$descs`.

看到这一行：

```
foreach($titles as $title => $descs){ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T10:28:11.530

实际上你应该做这样的事情

```
<?php

$specifications = $scooter_meta->get_the_value('specifications');

$descs = explode("\n", $specifications);

echo '<dl>';

foreach($descs as $desc){

    $title = explode('<>', $desc);

    echo '<dt>' . $title[0] . '</dt>';
    for($i=1; $i<=count($title); $i++){
        echo '<dd>' . $title[$i] . '</dd>';
    }

}

echo '</dl>';

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T10:26:27.910

```
$specifications = $scooter_meta->get_the_value('specifications');

$titles = explode('<>', $specifications);

echo '<dl>';

foreach($titles as $title => $descs){

    echo '<dt>' . $title . '</dt>';

    $descs = explode("\n", $descs);

    foreach($descs as $desc){
        echo '<dd>' . $desc . '</dd>';
    }

}

echo '</dl>'; 
```

# jquery - 使用 jQuery 从字符串创建 ul 列表

> ID：11985117
> 
> 赞同：0
> 
> 时间：2012-08-16T10:19:06.373
> 
> 标签：jquery, jquery-ui, list

我有这个工作但是我不能让它在我现有的代码中工作。

我需要发生的是：http: [//jsfiddle.net/uJcB7/176/](http://jsfiddle.net/uJcB7/176/)

因此，当我将复选框中的功能添加到 div 中时，它会将它们放在一个列表中。我让每个功能都可以工作，但不知道如何将两者结合起来。

因此，当您将复选框中的功能添加到 div 中时，它会将功能字符串添加为列表，我可以拖动它。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T10:33:09.250

我想最简单的回答方法是演示？

## [jsFiddle 演示](http://jsfiddle.net/uJcB7/177/)

希望这就是你所追求的，我会为你分解代码。

首先，我合并了您的文档就绪函数调用，并在适当的时候折叠了所有使用相同选择器的 jQuery 语句。这导致了初始化代码，即：

```
$(function() {

    $("#sortable").sortable().disableSelection();
    $('#cblistp input').click(additionalFeatures);

    additionalFeatures();
}); 
```

`allVals`然后我把原来的数组折叠起来，换成jQuery的`map`函数。`map`函数本质上就是函数`each`，结果的额外好处是返回的任何元素的数组。在`map`函数中，我们只是一一返回`.value`所有选定的 HTML 输入。然后我`join`用一个稍微好一点的`,`加入他们。这给了我们：

```
// add additional features
function additionalFeatures() {   
    // map the selected items
    var text = $.map($('#cblistp :checked'), function(input) {
        return input.value;
    }).join(', ');

    $('#additionalFitFeatures').text(text);
}; 
```

除此之外，如前所述，`map`函数的作用类似于`each`函数。这允许我们在选择要显示在`div`. 首先我们需要清除旧的 sortable，然后我们将添加选定的项目，最后我们将构造一个新的 sortable。这给了我们以下信息：

```
// add additional features
function additionalFeatures() {
    // clear out the old sortable
    var sortableList = $('#sortable').sortable('destroy').find('li').remove().end();

    // map the selected items
    var text = $.map($('#cblistp :checked'), function(input) {
        sortableList.append('<li>' + input.value + '</li>');            
        return input.value;
    }).join(', ');

    $('#additionalFitFeatures').text(text);
    sortableList.sortable();
}; 
```

# javascript - 移动浏览器、地理位置和自动填充地址

> ID：11985125
> 
> 赞同：0
> 
> 时间：2012-08-16T10:19:33.530
> 
> 标签：javascript, html, geolocation

这就是我想做的事情：在 HTML5 中，我知道有地理位置“选项”。

我想制作一个带有“您的姓名，您的地址”的表格，以及一个带有 JavaScript 代码的按钮，上面写着“自动填写我的地理位置”，如果用户点击它，则自动填写表格。

我想我可能会调用第三方 API，如谷歌地图或 OpenStreetMap。

有人做过吗？任何建议如何做到这一点/在哪里看（那里有很多工具我已经检查了很多，但似乎没有我想做的样本）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T01:57:17.627

您想使用浏览器的 GeoLocation 功能 (HTML5) 吗？如果是这样，只需调用 navigator.geolocation.getCurrentPosition()（参见[此处](http://www.tutorialspoint.com/html5/geolocation_getcurrentposition.htm)）。

这将为您提供纬度和经度，您可以使用各种映射库在地图上放置一个点。

如果您想输入他们的地址，您需要使用 Google、MapQuest 等进行反向 geoLocation API 调用。所有这些都非常简单。

请记住，这仅适用于相当现代的浏览器。另一种选择是获取访问者的 IP 地址并使用它来根据数据库估计他们的位置（@DanielNova 建议的 MaxMind 是一个不错的选择）。

希望这可以帮助..

格雷格

# css - Facebook Tab App - IE8 中的滚动和定位问题

> ID：11985126
> 
> 赞同：0
> 
> 时间：2012-08-16T10:19:40.317
> 
> 标签：css, facebook, internet-explorer, tabs

我正在为 Facebook 页面构建一个应用程序。它适用于除 IE 以外的所有浏览器。

它有两个问题。首先，定位全部关闭。在其他浏览器中，“流派”、“艺术家”和“详细信息” div 都在标题图像的正下方。在 IE 中，'details' div 提高了大约 20 像素。

其次，主 div（以天、#friday、#saturday、#sunday 为标记的那些）不会一直滚动到底部。它在它应该停止之前大约 120 像素。确实很奇怪。

我附上了代码，但不幸的是，与页面相比，它在应用程序中的呈现方式不同（关于元素的定位）。同样，我不确定这是为什么。

我是一个真正的初学者，所以如果其中一些问题不清楚，或者同样糟糕，非常明显，我很抱歉！

这是代码：[https ://gist.github.com/5ea583adcbc4eef7558b](https://gist.github.com/5ea583adcbc4eef7558b)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:47:59.540

我假设您正在“预览模式”下查看您的标签，并怀疑 Facebook 贴在您的标签顶部（上面写着“预览模式已开启。只有管理员可以看到此标签的内容。”）是搞砸你的`position: absolute`布局。

我建议你重新排列你的代码，使`#fridaylistings`,`#saturdaylistings`和`#sundaylistings` `div`位于它们各自的`#friday`,`#saturday`和`#sunday` `div`s 内。

然后设置`position: relative`在`#friday`etc上`div`。这将允许您控制每个孩子相对于自身而不是整个页面的位置。请参阅此处以获取对此的解释：

[http://css-tricks.com/absolute-positioning-inside-relative-positioning/](http://css-tricks.com/absolute-positioning-inside-relative-positioning/)

# android - 在android中使用广播接收器处理未接来电

> ID：11985130
> 
> 赞同：1
> 
> 时间：2012-08-16T10:19:46.927
> 
> 标签：android, broadcastreceiver

有没有办法在android中处理未接来电？`CALL_STATE_CHANGED`我多次遇到动作。但是我如何才能具体检查它是否是未接来电？我想要的是在用户未接电话时执行一些操作。我怎样才能做到这一点？每次通话后是否需要查看通话记录，是否有未接来电？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-16T10:31:34.557

我想你可以使用[PhoneStateListener](http://developer.android.com/reference/android/telephony/PhoneStateListener.html)来监听呼叫状态的变化`CALL_STATE_RINGING`，`CALL_STATE_IDLE`这表明电话没有被拿起。

# javascript - 如何在Javascript中的对象数组中找到属性的最小值和最大值

> ID：11985132
> 
> 赞同：7
> 
> 时间：2012-08-16T10:19:57.427
> 
> 标签：javascript, jquery

我有以下 javascript 对象：

```
Person1.Name = "John";
Person1.Age = 12;

Person2.Name = "Joe";
Person2.Age = 5; 
```

然后我有一组人，我如何根据人的年龄找到最小值/最大值？

Javascript 或 Jquery 中的任何解决方案都是可以接受的。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-16T10:27:02.280

假设您的数组如下所示：

```
var persons = [{Name:"John",Age:12},{Name:"Joe",Age:5}]; 
```

那么你也能：

```
var min = Math.min.apply(null, persons.map(function(a){return a.Age;}))
   ,max = Math.max.apply(null, persons.map(function(a){return a.Age;})) 
```

[**编辑**] 添加 ES2015 方法：

```
const minmax = (someArrayOfObjects, someKey) => {
  const values = someArrayOfObjects.map( value => value[someKey] );
  return {
      min: Math.min.apply(null, values), 
      max: Math.max.apply(null, values)
    };
};

console.log(
  minmax( 
    [ {Name: "John", Age: 12},
      {Name: "Joe", Age: 5},
      {Name: "Mary", Age: 3},
      {Name: "James sr", Age: 93},
      {Name: "Anne", Age: 33} ], 
    'Age') 
);
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T10:23:10.347

[首先，您使用自定义排序函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)对数组进行排序：

```
var sorted = persons.sort(function(a, b) {
  if(a.Age > b.Age) return 1;
  else if(a.Age < b.Age) return -1;
  else return 0;
}); 
```

然后你可以只取第一个和最后一个：

```
var min = sorted[0],
    max = sorted[sorted.length - 1]; 
```

# sql-server - linux 上的 Cakephp2 不适用于 Sql Server (mssql)

> ID：11985134
> 
> 赞同：0
> 
> 时间：2012-08-16T10:20:08.243
> 
> 标签：sql-server, linux, cakephp, ubuntu, debian

我很难为 ODB Mssql 安装驱动程序。我需要它让我的 php 与 Sql server (2005) 通信。

驱动程序：http: [//www.microsoft.com/en-us/download/details.aspx?id=28160](http://www.microsoft.com/en-us/download/details.aspx?id=28160)

有人知道替代解决方案吗？还是一个工作示例？请注意我使用的是 cakePhp 版本 2+。不是 1.3 .. 已经为 1.3 编写了很多关于这个问题的文档。

MS 的 Mssql 驱动程序有问题。它需要很多库，但仍然无法在它自己的安装程序中生存..

我的配置是 Ubuntu 12+（带 gui）、Lampp（xampp for linux）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T04:40:07.963

我不确定，但检查它对你有用：

[http://www.mindfiresolutions.com/Configuring-MSSQL-Server-to-talk-to-PHP-in-Ubuntu-1810.php](http://www.mindfiresolutions.com/Configuring-MSSQL-Server-to-talk-to-PHP-in-Ubuntu-1810.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:35:47.233

除了安装驱动程序有问题之外，CakePHP2 没有 PDO 和 ODBC 的数据源。

您可以使用此数据源从 CakePHP 2 连接到 SQL 2005，而无需 PDO 和驱动程序。这是 1.3 源的移植版本：[https ://github.com/rchavik/datasources/tree/mssql-2.0](https://github.com/rchavik/datasources/tree/mssql-2.0)

# c# - ASP.NET 4.0（不是 MVC）中的 URL 子域路由

> ID：11985139
> 
> 赞同：1
> 
> 时间：2012-08-16T10:20:34.560
> 
> 标签：c#, asp.net, iis

我想像子域一样进行 URL 路由。

例如，假设我的网站是 website.com。我想做 URL 重写

```
client1.website.com,
client2.website.com,
client3.website.com,
clientN.website.com 
```

在我的网站上有一个客户列表。每当我点击客户端时，我的 URL 如下所示：

```
website.com/client.aspx?client=client1
website.com/client.aspx?client=client2
website.com/client.aspx?client=client3
website.com/client.aspx?client=clientN 
```

现在我希望 URL 重写使其看起来像这样：

```
client1.website.com
client2.website.com
client3.website.com
clientN.website.com 
```

此外，每当注册一个客户时，该客户应该能够直接打开网站。

# iphone - CIHueAdjust 核心图像滤镜设置

> ID：11985150
> 
> 赞同：1
> 
> 时间：2012-08-16T10:21:34.000
> 
> 标签：iphone, ios, xcode, core-image, hue

当我尝试实施 CIHueAdjust 时出现错误。应用程序以如下错误终止：-[CIImage doubleValue]: unrecognized selector sent to instance 0xd6606d0

这是整个项目：[owolf.net/uploads/StackOverflow/HueAdjustProject.zip](http://owolf.net/uploads/StackOverflow/HueAdjustProject.zip)

这是 .m 代码：

```
- (void)viewDidLoad
{
    context = [CIContext contextWithOptions:nil];
    hueFilter = [CIFilter filterWithName:@"CIHueAdjust"];
    inputCGImage = imageView.image.CGImage;
    [super viewDidLoad];
}

- (IBAction)hueSliderValueChanged:(id)sender {
    [hueFilter setValue:[NSNumber numberWithFloat:hueSlider.value] forKey: @"inputAngle"];
    [self filterImage];
}

-(void)filterImage {
    adjustedImage = [CIImage imageWithCGImage:inputCGImage];
    [hueFilter setValue:adjustedImage forKey:@"inputAngle"];
    adjustedImage = [hueFilter outputImage];
    CGImageRef cgimg = [context createCGImage:adjustedImage fromRect:[adjustedImage extent]];
    adjustedUIImage = [UIImage imageWithCGImage:cgimg];
    CGImageRelease(cgimg);
    [imageView setImage:adjustedUIImage]; 
} 
```

错误日志：

2012-08-16 17:14:02.062 HueAdjustProject[3333:707] -[CIImage doubleValue]：无法识别的选择器发送到实例 0xd6606d0 2012-08-16 17:14:02.065 HueAdjustProject[3333:707] *** 由于未捕获而终止应用程序异常'NSInvalidArgumentException'，原因是： ' - [CIImage的doubleValue]：无法识别的选择发送到实例0xd6606d0' ***第一掷调用堆栈：（0x3544088f 0x377e7259 0x35443a9b 0x35442915 0x3539d650 0x36b09a3f 0xed0c5 0xed017 0x3539a3fd 0x32e8fe07 0x32e8fdc3 0x32e8fda1 0x32e8fb11 0x33085d07 0x32e8f6a5 0x32e8e8a1 0x32e8e319 0x32e74695 0x32e73f3b 0x3703322b 0x35414523 0x354144c5 0x35413313 0x353964a5 0x3539636d 0x37032439 0x32ea2cd5 0xecb17 0xecabc) 终止调用抛出异常

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T16:27:22.460

```
[hueFilter setValue:adjustedImage forKey:@"inputAngle"]; 
```

应该

```
[hueFilter setValue:adjustedImage forKey:@"inputImage"]; 
```

# javascript - 克隆 并更改 id

> ID：11985156
> 
> 赞同：39
> 
> 时间：2012-08-16T10:22:10.830
> 
> 标签：javascript, jquery

我如何使用 javascript 克隆一些`<div>`并将他的 id 设置为与原始不同。Jquery 也会很好。

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-08-16T10:25:15.637

```
var div = document.getElementById('div_id'),
    clone = div.cloneNode(true); // true means clone all childNodes and all event handlers
clone.id = "some_id";
document.body.appendChild(clone); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-16T10:27:01.800

用它：

**jQuery**

```
var clonedDiv = $('#yourDivId').clone();
clonedDiv.attr("id", "newId");
$('#yourDivId').after(cloneDiv); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-06-13T15:28:50.550

我有同样的问题。我已经通过设置一个计数器并将其附加到 ID 来解决这个问题。希望对你也有帮助：

```
<script type="text/javascript">
     var counter = 1; //Set counter

function clone(sender, eventArgs) {
     var $row = $('#yourID');

     var $clone = $row.clone(); //Making the clone                      
     counter++; // +1 counter

     //Change the id of the cloned elements, append the counter onto the ID 
     $clone.find('[id]').each(function () { this.id += counter });
}
</script> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-16T10:25:07.243

jQuery 有方法 clone()

```
var original = $("#original");
var newClone = original.clone(); 
```

# java - Java 代码兼容性问题（我的二进制文件也不起作用）

> ID：11985157
> 
> 赞同：2
> 
> 时间：2012-08-16T10:22:11.207
> 
> 标签：java, swing, sqlite, miglayout

我在 Fedora 17 上使用 Eclipse Juno 编写了一个 Java 应用程序。我安装了 JRE 1.7，但我相信我将 Java 构建路径更改为 1.6。那里一切正常。然后，我可以构建一个在 Windows 7 虚拟机上运行而没有问题的 .jar 文件。但是，如果我尝试在学校计算机上运行它（Windows 7 `java version "1.6.0_18" Java(TM) SE Runtime Environment (build 1.6.0_18-b07) Java HotSpot(TM) Client VM (build 16.0-b13, mixed mode, sharing)`）

它给出了一个例外，如：`java.lang.IllegalArgumentException: cannot add to layout: constraint must be a string`。这显然与 CardLayout 有关，我相信它是一个标准的 Swing 组件。

如果可能相关，我正在使用[miglayout](http://miglayout.com)库和[sqlite-jdbc 驱动程序。](http://code.google.com/p/sqlite-jdbc/)

我真的很感激这方面的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:20:37.433

我发现了问题。

cardLayoutPanel 是一个 JPanel cardLayout 是明显的标识符是一个字符串

```
cardLayoutPanel.add(container);
cardLayout.addLayoutComponent(container, identifier); 
```

事实证明，在 Java 1.6 中这并没有真正起作用，因为它实际上应该是：

```
cardLayoutPanel.add(container, identifier); 
```

没有第二行，Java 1.7 不会因为某种原因而抱怨。奇怪的。

# qt - Qt Creator 发布模式未定义对 std::out_of_range 的引用

> ID：11985165
> 
> 赞同：0
> 
> 时间：2012-08-16T10:22:41.223
> 
> 标签：qt, boost, mingw, release, qt-creator

我正在使用 Qt Creator 编写一个小型 C++ 程序（带有 GUI）并使用 MinGW 进行编译。当我在调试模式下编译项目时一切正常，但是一旦我进入发布模式，我就会得到编译器错误：

```
undefined reference to 'std::out_of_range::~out_of_range()'         thread.cpp 
```

当我点击错误时，我也得到：

```
File not found: thread.cpp 
```

我查看了我的 Boost 安装并找到了 thread.cpp，它应该在我的项目的包含路径上。

有任何想法吗？

编辑：这是我的 .pro 文件：

```
#-------------------------------------------------
#
# Project created by QtCreator 2012-08-10T12:09:39
#
#-------------------------------------------------

QT       += core gui

TARGET = GeneDropWin
TEMPLATE = app

SOURCES += main.cpp \
    genedrop.cpp \
    mainbody.cpp \
    biofunctions.cpp \
    fileio.cpp \
    settings.cpp

HEADERS  += genedrop.h \
    geneclasses.h \
    paramclass.h \
    mainbody.h \
    biofunctions.h \
    fileio.h \
    geneclasses.h \
    settings.h

FORMS    += genedrop.ui \
    settings.ui

#Stuff I've added
INCLUDEPATH += "C:\\Program Files\\boost_1_50_0"
LIBS += -L"C:\\Program Files\\boost_1_50_0\\stage\\lib" -lboost_thread-mgw46-mt-1_50 -lboost_system-mgw46-mt-1_50 -lboost_date_time-mgw46-mt-1_50 -lboost_chrono-mgw46-mt-1_50
CONFIG += static \
    release

RESOURCES += \
    NIABLogo.qrc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:12:58.010

好的，问题已解决，但可能还没有完全理解。我通过将编译器切换到 MSVC 并更改链接器选项的语法（例如 -lboost_thread-mgw46-mt-1_50 -> -llibboost_thread-vc100-mt-1_50）来修复它，现在编译没有问题。我将就我认为可能是问题的原因提出我的推理，但如果错了，我将不胜感激：

1.  虽然我认为我在查看安装时已经使用 MinGW 构建了 Boost 库，但我发现许多文件夹提到了 msvc（例如 ...boost\bin.v2\libs\date_time\build_msvc-10.0），这表明我已经用 MSVC 构建了它。
2.  链接器错误声称无法找到与 thread.cpp 关联的文件。
3.  查看构建目录的线程文件夹，所有 .obj 和 .lib 文件的路径中都有 msvc-10.0 文件夹。
4.  因此，我认为 MinGW 编译器正在寻找一个不存在的 MinGW 文件夹中的 boost 对象，因此失败了。我猜它在调试模式下工作的事实与对文件的限制较少有关。

# ios - UITableViewCell 子视图问题

> ID：11985172
> 
> 赞同：0
> 
> 时间：2012-08-16T10:23:13.187
> 
> 标签：ios, ipad, uitableview

我从xib加载单元。我在单元格中添加了 3 个垂直分隔符（尝试从 xib 和代码中添加）。在我选择单元格之前一切正常。当我选择卖出时，分隔符消失了。

以下是图片： 未选中： ![在此处输入图像描述](../Images/056956c47ca5a5764746fb97636f3f9c.png)

已选中 ![在此处输入图像描述](../Images/38855cb05f6538be6c75cb6fed836acc.png)

添加分隔符的代码：

```
- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];
    if (self) {
        self.topSeparator = [[[UIView alloc] initWithFrame:CGRectMake(0, 0, self.bounds.size.width, 1)] autorelease];
        [self addSubview:topSeparator];

        self.bottomSeparator = [[[UIView alloc] initWithFrame:CGRectMake(0, self.bounds.size.height - 1, self.bounds.size.width, 1)] autorelease];
        [self addSubview:bottomSeparator];

        // Initialization code
        CGFloat xOffset = 314;
        UIView *imageView1 = [[[UIView alloc] initWithFrame:CGRectMake(xOffset, 0, 1, self.bounds.size.height)] autorelease];
        imageView1.tag = kTagBorder1;
        imageView1.backgroundColor = [UIColor blackColor];
        [self addSubview:imageView1];

        xOffset = 487;
        imageView1 = [[[UIView alloc] initWithFrame:CGRectMake(xOffset, 0, 1, self.bounds.size.height)] autorelease];
        imageView1.tag = kTagBorder2;
        imageView1.backgroundColor = [UIColor blackColor];
        [self addSubview:imageView1];

        xOffset = 573;
        imageView1 = [[[UIView alloc] initWithFrame:CGRectMake(xOffset, 0, 1, self.bounds.size.height)] autorelease];
        imageView1.tag = kTagBorder3;
        imageView1.backgroundColor = [UIColor blackColor];
        [self addSubview:imageView1];
    }
    return self;
} 
```

我什至试过这个：

```
- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];
    [self bringSubviewToFront:[self viewWithTag:kTagBorder1]];
    [self bringSubviewToFront:[self viewWithTag:kTagBorder2]];
    [self bringSubviewToFront:[self viewWithTag:kTagBorder3]];
    [self setNeedsDisplay];

    // Configure the view for the selected state
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:27:58.427

您不应将这些行添加为`self`( `UITableViewCell`) 的子视图。相反，将其添加为`self.contentView`- 的子级，它是包含`UITableViewCell`.

[本文包含有关如何正确自定义 UITableView 的提示](http://cocoawithlove.com/2009/04/easy-custom-uitableview-drawing.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T09:20:17.560

我修好了它。我使用带有黑色图像的 UIImageView 而不是带有黑色背景的 uiview。在这种情况下，视图不会消失。

# c++ - using clamp function in OpenCL code

> ID：11985173
> 
> 赞同：2
> 
> 时间：2012-08-16T10:23:13.733
> 
> 标签：c++, opencl

In my OpenCL code (which is not coded by myself, it's just an example code from internet), there is the following sentence to use the function of clamp.

```
return clamp(color,0,1); 
```

However it seems that this makes error during compilation, so I got the error info message by using CL_PROGRAM_BUILD_LOG from clGetProgramBuildInfo.

```
Error during compilation! (-11)
4483
build log
:211:9: error: call to 'clamp' is ambiguous
        return clamp(color,0,1);
               ^~~~~
<built-in>:3558:26: note: candidate function
float4  __OVERLOADABLE__ clamp(float4 x, float min, float max)   ;
                         ^
<built-in>:3577:25: note: candidate function
float4 __OVERLOADABLE__ clamp(float4, float4, float4);
                        ^
<built-in>:3556:26: note: candidate function
float3  __OVERLOADABLE__ clamp(float3 x, float min, float max)   ;
                         ^
<built-in>:3575:25: note: candidate function
float3 __OVERLOADABLE__ clamp(float3, float3, float3);
                        ^
:296:52: error: address expression must be an lvalue or a function designator
                                r.origin = matrixVectorMultiply(viewTransform, &(float3)(0, 0, -1));
                                                                               ^~~~~~~~~~~~~~~~~~
:297:62: error: address expression must be an lvalue or a function designator
                                r.dir    = normalize(matrixVectorMultiply(viewTransform, &(float3)(x, y, 0)) - r.origin);
                                                                                         ^~~~~~~~~~~~~~~~~ 
```

Is there any necessary keyword for using clamp function in OpenCL code? BTW, I'm using the environment of the Linux Ubuntu 10.04 64bit.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T10:56:02.633

尝试以下

```
return clamp(color,0.0f,1.0f); 
```

这样我们就可以确定第二个和第三个参数没有歧义，并且您正在尝试调用该函数：

```
clamp(float4 color, float min, float max); 
```

如果这不起作用，请查看您的颜色参数，但现在第二个和第三个参数应该没问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T11:56:47.923

OpenCL中有几个重载的clamp内置函数；编译器需要根据参数的类型准确选择一个。有效的组合是

```
T clamp(T,T,T) and T clamp(T,S,S) 
```

其中 T 是 OpenCL 整数或浮点类型之一，当 T 是向量类型时，S 是 T 的元素的标量类型。

您的示例代码似乎在调用中非法混合了浮点和整数参数。常量 1 和 0 是 type `int`，不像 0.0f 和 1.0f 是 type `float`。

有关详细信息，请参阅[快速参考卡](http://www.khronos.org/files/opencl-quick-reference-card.pdf)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-14T11:49:04.883

我在同一段代码（[http://www.gamedev.net/blog/1241/entry-2254210-realtime-raytracing-with-opencl-ii/](http://www.gamedev.net/blog/1241/entry-2254210-realtime-raytracing-with-opencl-ii/)）上遇到了同样的问题。它写得不好，设法挂了我的电脑。

通过确保最后两个参数是浮点数，clamp() 问题确实得到了解决。

matrixVectorMultiply() 问题通过更改该函数的签名来解决。原来是：

```
float3 matrixVectorMultiply(__global float* matrix, float3* vector){ 
    float3 result;
    result.x = matrix[0]*((*vector).x)+matrix[4]*((*vector).y)+matrix[8]*((*vector).z)+matrix[12];
    result.y = matrix[1]*((*vector).x)+matrix[5]*((*vector).y)+matrix[9]*((*vector).z)+matrix[13];
    result.z = matrix[2]*((*vector).x)+matrix[6]*((*vector).y)+matrix[10]*((*vector).z)+matrix[14];
    return result;
} 
```

但是，绝对没有理由将 vector 用作指针，因此您可以`*`在每次出现`vector`.

然后代码应该编译，但程序可能仍然崩溃。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-14T21:19:34.983

可能不是您的问题，但值得注意的是：OpenCL 1.0 和 1.1 之间的钳位略有变化，因此如果您不小心，您的代码可能会在一个版本而不是另一个版本中编译。具体来说，在 OpenCL 1.1 规范中，“附录 F – 变更”、“F.1 OpenCL 1.0 变更摘要”中说“OpenCL C 编程语言中添加了以下功能（第 6 节）：”，然后是“新内置函数”，然后是“在第 6.11.3 节中定义的钳位整数函数”

所以你最好完全限定你的参数。

与此相关，在 OpenCL 1.1 中添加了整数函数 min 和 max 的 (vector, scalar) 变体，因此不要使用 1.0 中的变体（将标量参数转换为向量）。

# c# - Fill GridView with TextBoxes and Dropdownlist from DataTable

> ID：11985176
> 
> 赞同：0
> 
> 时间：2012-08-16T10:23:21.390
> 
> 标签：c#, asp.net, gridview, textbox

I have GridView:

```
 <asp:GridView ID="MyGridView" runat="server" ShowFooter="true"
                                     AutoGenerateColumns="False" Visible="True">
<Columns>
<asp:BoundField DataField="id" ItemStyle-HorizontalAlign="center"/>
<asp:BoundField DataField="fullName"  />
<asp:TemplateField HeaderText="situation>">
<ItemTemplate>
  <asp:DropDownList ID="dl_situation" runat="server" AppendDataBoundItems="true">
   </asp:DropDownList>
</ItemTemplate>
</asp:TemplateField>

<asp:TemplateField HeaderText="procesVerbal">
 <ItemTemplate>
         <asp:TextBox ID="tbNr" runat="server"></asp:TextBox>
</ItemTemplate>
</asp:TemplateField>  

<asp:TemplateField HeaderText="Data">
<ItemTemplate>
               <asp:TextBox ID="tbDate" runat="server"></asp:TextBox>
 </ItemTemplate>
</asp:TemplateField>     
</Columns>
</asp:GridView> 
```

Now I want to fill this Grid with data from database, I have one method that returns datatable with all my data

when I fill mygrid:

```
 MyGridView.DataSource = dataTable;
 MyGridView.Databind(); 
```

in this case all TextBoxes and DropDownList are null.

In the code below I'm trying to create a function that receives DataTable from database and populates gridview with data. How do I make a foreach statement for dataTable.Rows that will assign text values to TextBox elements and selectedIndex value to DropDownList?

```
protected bool FillGridWithData(DataTable dataTable)
       {bool result;
       try
       {
           foreach (GridViewRow row in MyGridView1.Rows)
           {
               if (row.RowType != DataControlRowType.DataRow) break;
               var ddl = (DropDownList)row.FindControl("dl_situation");
               if (ddl != null)
               {
                 ddl.DataSource = PublicStatic.Situation;
                 ddl.DataTextField = PublicStatic.Name;
                 ddl.DataValueField = PublicStatic.Code;
                 ddl.DataBind();
                 ddl.Items.Insert(0, new ListItem(String.Empty, String.Empty));
                 ddl.SelectedIndex = //data from datatable;
               }
               var tb1 = (TextBox)row.FindControl("tbNr");
               if (tb1 != null)
                   tb1.Text =//data from datatable;

               var tb2 = (TextBox)row.FindControl("tbDate");
               if (tb2 != null)
                   tb2.Text = //data from datatable;
           }
           result = true;
       }
       catch (Exception exception)
       {
           result = false;
       }
       return result;
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:28:25.180

The `DataField` attribute in the bound field must equal to the `column name` in the datatable. For binding textboxes in the template field you can use the Eval or Bind Method.

**Example:**

```
<asp:TemplateField HeaderText="procesVerbal">
 <ItemTemplate>
     <asp:TextBox ID="tbNr" Text='<%# Eval("ColumnName") %>' runat="server"></asp:TextBox>
 </ItemTemplate>
</asp:TemplateField> 
```

and for binding the dropdown in the gridview, you can use a separate sql datasource. and specify dropdownlist DataSourceID,DataTextField and DataValueField property.

**Dropdownlist Example:**

```
<asp:TemplateField>
     <ItemTemplate>
        <asp:DropDownList ID="ddl" runat="server"  DataSourceID="SqlDataSource1" DataTextField="ProductName" DataValueField="ProductID" ></asp:DropDownList>
        <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:NorthwindConnectionString %>" SelectCommand="SELECT [ProductName], [ProductID] FROM [Alphabetical list of products]"></asp:SqlDataSource>
     </ItemTemplate>
</asp:TemplateField> 
```

and if you want to bind the datasource from code behind then you can use `RowDataBound` event of gridview

```
protected void GridView1_RowDataBound(Object sender, GridViewRowEventArgs e)
{

    if(e.Row.RowType == DataControlRowType.DataRow)
    {           
        TextBox t = (TextBox)e.Row.FindControl("ControlID"); 
        t.Text = "Some Text";
    } 
```

}

# iphone - Google analytics IOS - Several trackevents between two dispatch

> ID：11985177
> 
> 赞同：0
> 
> 时间：2012-08-16T10:23:34.700
> 
> 标签：iphone, ios, google-analytics, dispatch

I have a little problem with the google analytics API on IOS.

When I try to track two events, or two page views, between two dispatches (called automatically with the dispatchedPeriod), the second event is never fired. When I set the debug flag to YES, it shows that the dispatcher is busy...

Moreover, if I try to restart the app, every new event will be added on the event stack but never called neither.

Everything is working fine if I call the dispatch methods of the shared GANTracker just after the tracking calls, but with this solution, the dispatchedPeriod just become useless...

Anyone has encountered the same issue ?

Thanks !

EDIT : it seems to work with 3G connection but not with WIFI

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:31:16.583

问题已经解决了 ！

这是一个网络配置问题。

谢谢 ！

# javascript - Javascript Showing Image

> ID：11985179
> 
> 赞同：0
> 
> 时间：2012-08-16T10:23:47.040
> 
> 标签：javascript

Can someone please tell me how to display an image instead of this showing as text. I am using this part of a html table script. Thanks!

```
 cell.appendChild(document.createTextNode("<img src='menubar/ico_delete16.gif' width='16' height='16'>")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:39:47.950

一位发布者回答了他的答案，但他的答案是正确的！谢谢！！

```
cell.innerHTML = "<img src='menubar/ico_delete16.gif' width='16' height='16'>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:27:12.153

尝试用“innerHTML”替换“createTextNode”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T10:31:57.770

优雅的方式：

```
var imgEl = document.createElement("img");
imgEl.setAttribute("src", "menubar/ico_delete16.gif");
imgEl.setAttribute("width", 16);
imgEl.setAttribute("height", 16);

cell.appendChild(imgEl); 
```

和原始的方式：

```
cell.innerHTML += "<img src='menubar/ico_delete16.gif' width='16' height='16'>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T10:33:13.610

这只是另一种方式。

```
var element1 = document.createElement("img");
element1.src= "menubar/ico_delete16.gif";
element1.width = 16;
element1.height = 16;
cell.appendChild(element1); 
```

# android - Issue with encoding a JSON array

> ID：11985186
> 
> 赞同：0
> 
> 时间：2012-08-16T10:24:08.430
> 
> 标签：android, json, encoding, utf-8, iso-8859-1

I have this JSON object I get from server:

```
 [
 {
  "Cliente":"AS' MEIGAS BAR",
  "Direccion":"C\/ Diego La\u00ednez, 8",
  "Telefono":"975 301 451",
  "Microsite":"www.guiacolor.com\/empresa\/772068",
  "URL":"",
  "Latitud":"41.486416",
  "Longitud":"-2.533894",
  "Logo":"http:\/\/www.guiacolor.com\/logo\/772068.gif",
  "Aque":"Bar ubicado en el centro de Almaz\u00e1n",
  "Imagenes":"",
  "ClienteTecnologico":"N",
  "QuienesSomos":"",
  "Mail":"",
  "TipoCliente":"B"
  },
 {
  "Cliente":"BAR AS'MEIGAS",
  "Direccion":"C\/ Diego La\u00ednez, 8 Bajo",
  "Telefono":"975301451",
  "Microsite":"www.guiacolor.com\/empresa\/809905",
  "URL":"",
  "Latitud":"41.553699",
  "Longitud":"-2.519793",
  "Logo":"http:\/\/www.guiacolor.com\/logo\/809905.gif",
  "Aque":"",
  "Imagenes":"",
  "ClienteTecnologico":"N",
  "QuienesSomos":"",
  "Mail":"",
  "TipoCliente":"C"
 },
 {
  "Cliente":"BAR MEIGAS",
  "Direccion":"C\/ Alcalleres, 2",
  "Telefono":"983335395",
  "Microsite":"www.guiacolor.com\/empresa\/735825",
  "URL":"",
  "Latitud":"",
  "Longitud":"",
  "Logo":"http:\/\/www.guiacolor.com\/logo\/735825.gif",
  "Aque":"",
  "Imagenes":"",
  "ClienteTecnologico":"N",
  "QuienesSomos":"",
  "Mail":"",
  "TipoCliente":"D"
  },
 {
  "Cliente":"EL PUCHERO DE LAS MEIGAS",
  "Direccion":"C\/ Monast. San Millan Cogolla, 8",
  "Telefono":"983335555",
  "Microsite":"www.guiacolor.com\/empresa\/751329",
  "URL":"",
  "Latitud":"",
  "Longitud":"",
  "Logo":"http:\/\/www.guiacolor.com\/logo\/751329.gif",
  "Aque":"",
  "Imagenes":"",
  "ClienteTecnologico":"N",
  "QuienesSomos":"",
  "Mail":"",
  "TipoCliente":"D"
 },
 {
  "Cliente":"MEIGAS TAPERIA BAR",
  "Direccion":"C\/ Danier Ortega, 1",
  "Telefono":"921182665",
  "Microsite":"www.guiacolor.com\/empresa\/780705",
  "URL":"",
  "Latitud":"",
  "Longitud":"",
  "Logo":"http:\/\/www.guiacolor.com\/logo\/780705.gif",
  "Aque":"",
  "Imagenes":"",
  "ClienteTecnologico":"N",
  "QuienesSomos":"",
  "Mail":"",
  "TipoCliente":"D"
}
] 
```

So, there's an item called

```
AS' MEIGAS BAR 
```

and other one called

```
BAR AS'MEIGAS 
```

However, in my app, they show up as

```
AS&#039; MEIGAS BAR 
```

and

```
BAR AS'MEIGAS 
```

Is this some encoding issue? How can it be solved? I've tried to encode it to UTF-8 and ISO-8859-1 and I couldn't solve it.

Edit: It's just the first one who gives the `&#039;`, the other one shows allright.

# c# - How to display a pop-up?

> ID：11985188
> 
> 赞同：-1
> 
> 时间：2012-08-16T10:24:15.090
> 
> 标签：c#, wpf, popup

I created a pop-up and want to show it when a button has been clicked. But it doesn't work because it waits for finishing button's duty.

I don't want to use "timer, thread and background worker" because I already can do it with that. I am looking for an another solution…</p>

Here is my code:

```
void btnSearch_Click(object sender, RoutedEventArgs e)
{
    LoadingOpen();

    if (cmbvideoserver.Text == "Youtube")
        SearchInYoutube();
    else if (cmbvideoserver.Text == "Vimeo")
        SearchInVimeo();

    LoadingClose();
}

public void LoadingOpen()
{
    myPopup.IsOpen = true;
    Common.Popup = true;
    window.Opacity = 0.3;
}

public void LoadingClose()
{
    myPopup.IsOpen = false;
    Common.Popup = false;
    window.Opacity = 1;
} 
```

and the XAML:

```
<Window Name="window" x:Class="youtube.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525" Loaded="window_Loaded">
  <Canvas Name="main">
    <Popup Name="myPopup" IsOpen="False" PopupAnimation="Slide"
           Margin="100,10,20,0"  Placement="Center" >  
      <Label Content="Loading..."></Label>
    </Popup>
  </Canvas>
</Window> 
```

How can I show popup on my main window ? (without any thread,timer and background controls/classes)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:29:39.627

You can show Windows as dialogs by useing the [ShowDialog()](http://msdn.microsoft.com/en-us/library/system.windows.window.showdialog%28v=vs.100%29.aspx) method.

# html - HTML TODOs in Netbeans 7.1

> ID：11985190
> 
> 赞同：2
> 
> 时间：2012-08-16T10:24:38.587
> 
> 标签：html, netbeans, netbeans-7.1

I wanted to add some TODO: tags in my .html file, but it does not seem to work properly.

I'm using Netbeans 7.1.

This seemed to work (added PHP comments):

```
<!-- // TODO: foo -->
<!-- /* TODO: foo */ --> 
```

However, in both cases Netbeans says:

> TODO: foo -->

Is there some way to avoid the "-->" ?

Thanks,
Niklas

edit: [I've opened a thread in the netbeans forums](http://forums.netbeans.org/viewtopic.php?p=134343#134343)

# android - 如何在不同的屏幕上显示相同的广告横幅？

> ID：11985193
> 
> 赞同：1
> 
> 时间：2012-08-16T10:24:49.210
> 
> 标签：android, android-activity, admob, banner-ads

我在应用的第一个屏幕上添加了一个 AdMob 横幅。现在我需要它在其他一些屏幕上（不同的活动）。如何在不重新加载横幅的情况下实施它以避免额外使用流量？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-05-20T06:10:31.813

对于想要演示代码的人，我在我的应用程序中实现了这一点。

使用一个 Activity + 多个 Fragments

1.  创建一个MainActivity，这个activity管理所有的fragment。在下面的布局文件中，FrameLayout 是您的片段的容器（显示您的应用的实际内容），片段是 Admob 广告横幅的容器。

===

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent">
        <FrameLayout
            android:id="@+id/container"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_above="@+id/adFragment"/>
        <fragment
            android:id="@+id/adFragment"
            android:name="com.jiyuzhai.wangxizhishufazidian.MainActivity$AdFragment"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true" />
</RelativeLayout> 
```

===

2.  在 MainActivity 中添加第一个 Fragment，这是您应用启动时的第一个屏幕。

==

```
public class MainActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        if (savedInstanceState == null) {
            getFragmentManager().beginTransaction()
                    .add(R.id.container, new MainFragment())
                    .commit();
        }
    }
} 
```

==

3.  根据需要切换片段，横幅将一直存在（在所有屏幕的底部）。

==

```
FragmentManager fragmentManager = getFragmentManager();
FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
fragmentTransaction.replace(R.id.container, fragment);
fragmentTransaction.addToBackStack("null");
fragmentTransaction.commit(); 
```

==

广告横幅的布局

==

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <com.google.android.gms.ads.AdView
        android:id="@+id/adView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        ads:adSize="SMART_BANNER"
        ads:adUnitId="@string/banner_ad_unit_id">
    </com.google.android.gms.ads.AdView>
</RelativeLayout> 
```

==

注意：请确保在使用此方法时确实想要这样做，例如，在某些页面（如设置和关于）上显示横幅不是很好的用户体验。您可以通过将 AdView 的可见性设置为 VISIBLE/INVISIBLE/GONE 来轻松隐藏/显示广告横幅。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T10:54:05.287

我将 Admob 放在它自己的片段中，然后在活动中重用该片段。

# html - html体高问题

> ID：11985194
> 
> 赞同：0
> 
> 时间：2012-08-16T10:24:59.130
> 
> 标签：html, css, height

没有为 body 标签指定高度，但是为什么当我在检查元素中看到它时会占用一些高度？

这是代码

[http://jsfiddle.net/9TzEC/3/](http://jsfiddle.net/9TzEC/3/)

这是示例屏幕 ![在此处输入图像描述](../Images/7755adfac4857d87949fb6e8371511bf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:26:05.293

查看 jsFiddle 屏幕的左侧，取消选中“Normalized CSS”

[http://jsfiddle.net/Kyle_Sevenoaks/LwBLH/1/](http://jsfiddle.net/Kyle_Sevenoaks/LwBLH/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:34:48.027

@Sowmya 每个具有自动高度的块标签/元素，如果内容会明显增加元素高度会增加，更少的内容=更少的高度，大的内容=长的高度！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T10:52:05.420

我得到了解决方案。发生这种情况是因为在“content_wrap”div 中添加了表格。这没有考虑其中的表格，所以我在表格周围添加了一个空白 div，然后它作为 div“content_wrap”的子级工作。

更新了小提琴[http://jsfiddle.net/9TzEC/7/](http://jsfiddle.net/9TzEC/7/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T12:11:00.157

将此 css 添加到 css 文件的末尾

```
.content_wrap {overflow:auto;} 
```

这是因为这个 div 中的浮动表。如果您需要，我会详细解释，请询问；）

# twitter-bootstrap - The easiest most sensible way to deal with padding in a container in Twitter Bootstrap

> ID：11985195
> 
> 赞同：3
> 
> 时间：2012-08-16T10:24:59.413
> 
> 标签：twitter-bootstrap, padding

I quite often build websites whose container acts as like a white page on a different coloured background and the site's content sits within that white page with a little bit of padding so that it doesn't touch the sides.

This is quite challenging when using a responsive grid. If I add say 50px of padding to the container, at certain resolutions things work perfectly but at other sizes, the page becomes too big for the screen, this is obviously to do with the widths defined in bootstrap's CSS for certain media queries.

I started going into each media query and doing some mathematics to figure out exactly how many pixels needed to be subtracted from each span and each offset in order for the page to display correctly at any given resolution but then I stopped myself and thought, there must be a better way!

I'm not averse to doing the necessary work but as I see myself coming across this problem on many if not all TB projects, I'd like to feel that I'm approaching the process in the most logical and easily-repeatable way.

Would you manually change pixel sizes for each span and offset? Or perhaps there is another more sensible way to approach a padded container?

I would much appreciate your thoughts! Thanks.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T13:39:08.600

您可以将 box-sizing 设置为border-box。问题是 12 个跨度的 with 大于容器的 with。您可以通过使用*.row-fluid*来解决这个问题，它使网格相对。

```
.container { box-sizing: border-box; padding: 50px; } 
```

[http://www.w3schools.com/cssref/css3_pr_box-sizing.asp](http://www.w3schools.com/cssref/css3_pr_box-sizing.asp) [http://twitter.github.com/bootstrap/scaffolding.html#fluidGridSystem](http://twitter.github.com/bootstrap/scaffolding.html#fluidGridSystem)

# sql - 在 Sql Server 中除以 2 个数字

> ID：11985196
> 
> 赞同：6
> 
> 时间：2012-08-16T10:25:00.067
> 
> 标签：sql, sql-server

我正在做 SQL Server 查询计算，除法总是给我零。

```
SUM(sl.LINES_ORDERED) 
, SUM(sl.LINES_CONFIRMED)
, SUM(sl.LINES_CONFIRMED) / SUM(sl.LINES_ORDERED) AS 'Percent' 
```

返回的样本数据集是：

![在此处输入图像描述](../Images/ccb3a0e124249a581cb92981ba609e9c.png)

在此示例中，第三行的除法值应为 1.02，但显示为零。这是为什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-16T10:26:25.450

尝试

```
SUM(sl.LINES_CONFIRMED) * 1.0 / SUM(sl.LINES_ORDERED) 
```

整数除法只能返回整数，不能返回浮点数。您可以像上面的示例一样强制进行浮点除法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T10:26:28.800

试试这样：

```
SUM(sl.LINES_ORDERED) 
, SUM(sl.LINES_CONFIRMED)
, SUM(sl.LINES_CONFIRMED)*1.0 / SUM(sl.LINES_ORDERED) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T10:28:00.157

这两个问题是你

1.  执行整数除法（`SUM`返回整数），并且
2.  你交换了除数和除数（这就是你得到零而不是一的原因）。

这就是你可以修复它的方法（注意`LINES_ORDERED`和`LINES_CONFIRMED`被交换）：

```
SUM(sl.LINES_ORDERED) 
, SUM(sl.LINES_CONFIRMED)
, (1.0*SUM(sl.LINES_ORDERED)) / SUM(sl.LINES_CONFIRMED) AS 'Percent' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T10:27:14.867

这将是因为您要对两个整数进行除法。

首先将除法中的两个值转换为小数：

```
, SUM(convert(decimal(12,2),sl.LINES_CONFIRMED)) 
/ SUM(convert(decimal(12,2),sl.LINES_ORDERED)) AS 'Percent' 
```

# batch-file - 获取命令行参数的批处理脚本

> ID：11985197
> 
> 赞同：2
> 
> 时间：2012-08-16T10:25:01.830
> 
> 标签：batch-file

我对 Windows 批处理脚本完全陌生。我想编写一个获取命令行参数的批处理脚本，如下所示；

myscript -parameter1 param1 -parameter2 param2

它应该在脚本中将 parameter1 设置为 param1，将 parameter2 设置为 param2。有人有执行上述操作的代码块吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T10:28:23.327

您可以通过循环遍历参数并尝试以下操作：

```
:argloop
  set "arg=%~1"
  if "%arg:~0,1%"=="-" (
    set "%arg:~1%=%~2"
    shift
  )
  shift
if not "%1"=="" goto argloop

echo parameter 1: %parameter1%
echo parameter 2: %parameter2% 
```

这将逐个查看参数，如果参数以 a 开头，`-`它将设置一个同名的环境变量，并将下一个参数作为其值：

```
H:\>args.cmd -parameter1 param1 -parameter2 param2
parameter 1: param1
parameter 2: param2 
```

如果您稍后需要原始参数，那么您应该将循环上方移动到子例程并将其`%*`作为参数调用。

# qt - QDialog with label that I'm trying to paint

> ID：11985202
> 
> 赞同：0
> 
> 时间：2012-08-16T10:25:16.790
> 
> 标签：qt, class, label

from my main window I am launching a dialog which has a label, in which I am trying to paint.

So, the dialog's header file (.h) has two classes, one for the dialog itself and one for my label. So, my label's class is this:

```
class MyImage : public QLabel
{
    Q_OBJECT

public:
        explicit MyImage(QWidget *parent = 0);

protected:
    void paintEvent(QPaintEvent *e);
}; 
```

and in the .cpp, along with the constructor of my QDialog I have the constructor of my MyImage class and the paintEvent function:

```
MyImage::MyImage(QWidget *parent)
: QLabel(parent)
{
    /*...*/
}

void MyImage::paintEvent(QPaintEvent *e)
{
    QLabel::paintEvent(e);
    QPainter painter(image_label);
    painter.setPen(QPen(QBrush(QColor(0,0,0,180)),1,Qt::DashLine));
    painter.setBrush(QBrush(QColor(255,255,255,120)));
    painter.drawRect(selectionRect);
} 
```

The `image_label` is a MyImage object. On the constructor of my QDialog I do the following so as to add it to my QDialog's layout:

```
mainLayout->addWidget(image_label); 
```

But it is null. I get an error message on output (`cannot add null widget`) and when I try to add a pixmap to the `image_label` the program crashes.

Thanks in advance for any answers!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:47:42.247

```
void MyImage::paintEvent(QPaintEvent *e)
{
    // QPainter painter(image_label); <- Only paint onto yourself.
    QPainter painter(this);
    painter.setPen(QPen(QBrush(QColor(0,0,0,180)),1,Qt::DashLine));
    painter.setBrush(QBrush(QColor(255,255,255,120)));
    painter.drawRect(selectionRect);
} 
```

不要调用基类，因为任何输出都会被新的`QPainter`. 它正在崩溃，因为它`image_label`是空的。

# android - 如何绘制/渲染子弹物理碰撞体/形状？

> ID：11985204
> 
> 赞同：5
> 
> 时间：2012-08-16T10:25:23.513
> 
> 标签：android, c++, android-ndk, opengl-es-2.0, bulletphysics

我已经使用 NDK 在我的 android 程序中实现了 Bullet Physics 引擎（我正在使用[Vuforia 的](https://ar.qualcomm.at/qdevnet/sdk/android)imagetarget 示例 for android），它已设置并正常工作，但是我想渲染/绘制我的碰撞框/飞机以查看我的刚体（btRigidBody）/碰撞形状（btCollisionShape），我很肯定这是可能的，但我找不到任何关于如何做到这一点的教程！

我已经[在他们的 wiki 页面上获取了 hello world Bullet 物理教程并对其](http://bulletphysics.org/mediawiki-1.5.8/index.php/Hello_World)进行了修改，以将下落物理体的转换应用到我在 opengl es 2.0 中拥有的 3d 对象以查看碰撞体，这是我用来渲染的代码反对：

```
void drawRigidBody(btRigidBody* body,QCAR::Matrix44F modelViewMatrix, unsigned int textureID)
{
btTransform trans;
body->getMotionState()->getWorldTransform(trans);
    LOG("sphere pos: (x %f , y %f, z %f)",trans.getOrigin().getX(),trans.getOrigin().getY(),trans.getOrigin().getZ());

    float physicsMatrix[16];
    trans.getOpenGLMatrix(physicsMatrix);

    SampleUtils::scalePoseMatrix(kObjectScale, kObjectScale, kObjectScale,
            &modelViewMatrix.data[0]);

    QCAR::Matrix44F modelViewProjection, objectMatrix;
    SampleUtils::multiplyMatrix(&modelViewMatrix.data[0], physicsMatrix, &objectMatrix.data[0]);
    SampleUtils::multiplyMatrix(&projectionMatrix.data[0], &objectMatrix.data[0], &modelViewProjection.data[0]);

    glVertexAttribPointer(vertexHandle, 3, GL_FLOAT, GL_FALSE, 0,
            (const GLvoid*) &signVerts[0]);
    glVertexAttribPointer(normalHandle, 3, GL_FLOAT, GL_FALSE, 0,
            (const GLvoid*) &signNormals[0]);
    glVertexAttribPointer(textureCoordHandle, 2, GL_FLOAT, GL_FALSE, 0,
            (const GLvoid*) &signTexCoords[0]);

    glEnableVertexAttribArray(vertexHandle);
    glEnableVertexAttribArray(normalHandle);
    glEnableVertexAttribArray(textureCoordHandle);

    glActiveTexture(GL_TEXTURE0);
    glBindTexture(GL_TEXTURE_2D, textureID);
    glUniformMatrix4fv(mvpMatrixHandle, 1, GL_FALSE,
            (GLfloat*)&modelViewProjection.data[0] );
    glDrawArrays(GL_TRIANGLES, 0, signNumVerts);
} 
```

编辑：查看 btBoxShape 的代码，我注意到您可以获取框顶点和法线：

```
btVector3** vertices= wallShape->getVertices();
btVector3**normals = wallShape->getNormals(); 
```

但是您无法获取索引列表以按特定顺序绘制顶点！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-16T16:58:35.143

如果我没记错的话，这不是在 Bullet 中绘制调试形状的正确方法。您是否阅读了第 16 页的[用户手册 (PDF)](http://bulletphysics.com/ftp/pub/test/physics/Bullet_User_Manual.pdf)？

您应该实现自己的实现 的调试抽屉类`btIDebugDraw`，并在此类中实现该`drawLine`方法。

您将此调试抽屉传递给项目符号`setDebugDrawer`，然后使用`world->getDebugDrawer->setDebugMode(debugMode);`

要绘制世界，请调用`world->debugDrawWorld()`；

`drawLine`然后，这会多次调用您的自定义函数，直到绘制出物理世界的线框模型。

# c# - Is there a way to loop the nesting of loops non-recursively?

> ID：11985212
> 
> 赞同：2
> 
> 时间：2012-08-16T10:26:20.037
> 
> 标签：c#

As the title says, is there a way to loop the nesting of loops non-recursively? That is, let's say I wanted to do this:

```
while (condition)
{
    while (condition)
    {
         while (condition)
         {
             .... //<- more whiles
         }
     }
} 
```

with 100 nested while loops. Is there a way to do this without hard-coding it and without using recursion?

Edit: Just to be clear, the 100 is meant for demonstrative purposes.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:07:27.227

我知道您特别说过**no recursion**，但我假设这是因为您希望能够在层次结构的下降过程中调用不同的函数/方法。

那么，如果您可以递归调用相同的函数，但让*该*函数依次使用委托调用各种其他函数，那会怎样？是否可以传递要调用的委托函数列表，以及条件的另一个委托列表（是否继续循环）？

我只花了几分钟的时间，这是一种抽象的想法/思想实验，而不是具体的解决方案；我什至不确定这是否可能，但这应该显示基本概念：

```
public delegate void CallableFunctionDelegate();
public delegate bool CallableCondition();

public void CallDelegatesRecursively(
                        List<CallableFunctionDelegate> methodsToCall, 
                        List<CallableCondition> conditionsToCall){

    var currentDelegate = delegatesToCall[0];

    while(conditionsToCall()){

        currentDelegate();  // Call current function

        // (Verify that the list is not empty, etc...)

        var restOfList = methodsToCall.GetRange(1, methodsToCall.length);
        var restOfConditions = 
                   conditionsToCall.GetRange(1, conditionsToCall.length);

        // Call next function in the "hierarchy" / list:
        CallDelegatesRecursively(restOfList, restOfConditions);
    }
} 
```

现在它应该（理论上！；））可以调用该函数，并将函数列表传递给它`F`，只要某些相应的条件`C`评估为真，每个函数都可以在 while 循环中调用。在每次调用 之后，还将调用`F`一些“子函数” （列表中的下一个）（但前提是它的相应条件在递归调用中计算为真......）。`F2``C2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T11:06:42.650

如果你有 100 个嵌套循环，我认为你的算法可能有问题。

至少，您可以尝试使您的方法递归。像这样的东西（它可能会根据您实际尝试做的事情而大不相同）：

```
private void RecursiveWhile(int nestedLevel)
{
    // some logic
    if (nestedLevel == 0)
    {
        // some logic
    }
    else
    {     
        // some logic, maybe a while
        RecursiveWhile(nestedLevel - 1);
        // some logic, maybe breaking out of the while
    }
} 
```

例如，您将使用`RecursiveWhile(100)`100 个级别的 while。

但我非常鼓励您退后一步，思考您的算法以及为什么需要 100 级迭代。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T10:31:45.363

由于没有其他任何事情发生：

```
while ({conditionA} && {conditionB} && {conditionC})
{
   /// ...
} 
```

如果你有*100*，我怀疑你可能做错了什么。如果没有更多上下文，我们无法对此发表评论。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T10:31:55.803

我不确定 100 个 while 循环是否有有效用例，但这里有。

我能想到的就是结合while条件。就像是：

```
while(x == 1)
{
    while(y == 2)
    {
    }
} 
```

可能变成：

```
while(x == 1 && y == 2)
{
} 
```

如果您的病情开始变得太长，我可能会将其提取到另一种方法中。

```
while(ShouldLoop(x, y))
{
}

private bool ShouldLoop(int x, int y)
{
    return x == 1 && y == 2;
} 
```

当然，这只有在您没有在非嵌套循环中做任何工作时才有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T10:55:21.147

您是否考虑过使用[BitArray](http://msdn.microsoft.com/en-us/library/system.collections.bitarray.aspx)类？可以用作条件掩码，例如...

# jsp - Fetching unique Value and no. of times of the Value

> ID：11985219
> 
> 赞同：2
> 
> 时间：2012-08-16T10:26:27.393
> 
> 标签：jsp, servlets, jdbc

In a (using mysql)table one of my column(i.e. colour) is like :

```
|Color|
======
|Red  |
|Blue |
|Green|
|Red  |
|Green|
|Green|
|Red  |
|Red  | 
```

After establishing,jdbc connection in my current jsp page: I'm trying to show the value in a pie chart(it's wriien in jscript,where I'll putting the value from mysql) like :

```
|Color|no. of Times|
====================
|Red  |   4        |
|Blue |   1        |
|Green|   3        | 
```

Buy I am not able to put values into the graph(I guess there is problem in by code):

```
<%
Class.forName("com.mysql.jdbc.Driver");
Connection con = DriverManager.getConnection("jdbc:mysql://localhost/apps","root","root");
Statement stmt = con.createStatement();
String sql2="select distinct(color) as COLOR from user_management order by device;";
ResultSet rs2 = stmt.executeQuery(sql2);
String s = rs2.getString("color");
while(rs2.next()){
    String device = rs2.getString("color");
    List<String> list=new ArrayList<String>();
    list.add(device);
    }
// I guess here will be some code for device value in String, say "s" 

String sql1 = "select count(case when color='"+s+"' then 1 end) as COLOR from user_management";
ResultSet rs1 = stmt.executeQuery(sql1);
System.out.println(sql1);
%> 
```

then putting the resultset in piechart table

```
<table id="chartData">
  <% while(rs2.next()){ %>
  <% while(rs1.next()){ %>
    <tr>
      <th>DEVICE</th><th>NUMBER</th>
     </tr>

    <tr style="color: #0DA068">
      <td><%= rs2.getString("device")%></td><td><%= rs1.getString(1)%></td>
    </tr>

   <% }     
   %>
   <% }     
   %>
 </table> 
```

Any inputs that how to fetch the column value in a chart where color-name as well as no. of color happens at a same time.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:36:31.277

使用`GROUP BY`：

```
SELECT Color, count(*) AS times FROM colors GROUP BY Color; 
```

# c# - 集成其EntityObject和EntityModel

> ID：11985221
> 
> 赞同：0
> 
> 时间：2012-08-16T10:26:30.037
> 
> 标签：c#, asp.net-mvc, entity-framework

我有实体对象，例如：从 EF 自动生成的文章。如果我将按照以下方式创建模型（用于创建、编辑实体对象）：

```
public class ArticleModel
{
    // properties
} 
```

在创建、编辑操作中，我将从模型中设置实体的每个属性。通常，我使用以下类从模型到实体自动设置属性，并从实体到模型自动加载属性：

```
public interface IEntityModel<TEntity> where TEntity : EntityObject
{
    void LoadEntity(TEntity t);
    TEntity UpdateEntity(TEntity t);
    TEntity CreateEntity();
}

public class EntityModel<TEntity> : IEntityModel<TEntity> where TEntity : EntityObject
{
    public virtual void LoadEntity(TEntity t)
    {
        var entityType = typeof(TEntity);
        var thisType = this.GetType();
        PropertyInfo[] entityProperties = entityType.GetProperties();
        PropertyInfo[] thisProperties = thisType.GetProperties();
        PropertyInfo temp = null;

        lock (this)
        {
            thisProperties.AsParallel()
                   .ForAll((p) =>
                   {
                       if ((temp = entityProperties.SingleOrDefault(a => a.Name == p.Name)) != null)
                           p.SetValue(this, temp.GetValue(t, null), null);
                   }); 
        }
    }

    public virtual TEntity UpdateEntity(TEntity t)
    {
        var entityType = typeof(TEntity);
        var thisType = this.GetType();
        PropertyInfo[] entityProperties = entityType.GetProperties();
        PropertyInfo[] thisProperties = thisType.GetProperties();
        PropertyInfo temp = null;

        lock (t)
        {
            entityProperties.AsParallel()
                   .ForAll((p) =>
                   {
                       if (p.Name.ToLower() != "id" && (temp = thisProperties.SingleOrDefault(a => a.Name == p.Name)) != null)
                           p.SetValue(t, temp.GetValue(this, null), null);
                   }); 
        }

        return t;
    }

    public virtual TEntity CreateEntity()
    {
        TEntity t = Activator.CreateInstance<TEntity>();

        var entityType = typeof(TEntity);
        var thisType = this.GetType();
        PropertyInfo[] entityProperties = entityType.GetProperties();
        PropertyInfo[] thisProperties = thisType.GetProperties();
        PropertyInfo temp = null;

        lock (t)
        {
            entityProperties.AsParallel()
                   .ForAll((p) =>
                   {
                       if (p.Name.ToLower() != "id" && (temp = thisProperties.SingleOrDefault(a => a.Name == p.Name)) != null)
                           p.SetValue(t, temp.GetValue(this, null), null);
                   }); 
        }

        return t;
    }

} 
```

这样，如果模型是从 EntityModel 继承的并且属性名称与实体属性匹配，则在创建和编辑操作中我可以编写：

```
 // for create entity
        Article a = model.CreateEntity();
        // for update entity
        a = model.UpdateEntity(a);
        // for load from entity
        model.LoadEntity(a); 
```

我知道我的班级弱点。例如，如果某些属性未从视图中编辑，则在 UpdateEntity() 方法中，实体的旧值将被删除。

**问题**：是否存在我不知道的另一种方式或常见方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:36:42.480

基本上，您正在自己编写整个更新模型与更改从发布的网页。MVC 可以开箱即用地做到这一点。控制器有一个名为[UpdateModel](http://www.brettnagy.com/post/2009/07/21/ASPNET-MVC-Collections-Forms-with-UpdateModel.aspx)的方法，用于更新模型。

可以在[此处](http://www.brettnagy.com/post/2009/07/21/ASPNET-MVC-Collections-Forms-with-UpdateModel.aspx)、[此处](http://www.joe-stevens.com/2010/02/17/asp-net-mvc-using-controller-updatemodel-when-using-a-viewmodel/)和[此处](http://forums.asp.net/t/1687833.aspx/1?asp%20net%20)找到示例。有关其工作原理的更多信息，请[点击此处](https://stackoverflow.com/questions/1230069/what-does-the-mvc-controller-updatemodeltt-actually-try-to-do)。

# c - 如何判断我的 Windows 应用程序何时被终止？

> ID：11985222
> 
> 赞同：1
> 
> 时间：2012-08-16T10:26:29.893
> 
> 标签：c, windows

当我的 Windows 程序 (C/C++) 从 Taskmgr.exe 被杀死时，有什么方法可以收到通知吗？它似乎没有收到任何特殊的 Windows 消息 - 它只是终止。

我不想阻止它终止，我只想写一个它被手动终止的通知。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T10:35:40.637

如果它是一个完整的 Windows 应用程序，您应该在应用程序退出之前在消息泵中获取 WM_QUIT。

正如 MSDN 所述：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms632641 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632641(v=vs.85).aspx)

这不会发布到窗口的消息队列中，您只能在主消息泵中检索它。

只有当它干净地退出时。如果进程被杀死，这永远不会发生。

您可以检测到它在下次启动时被杀死的一种方法是在启动时创建一个文件并在关闭时销毁，如果该文件在下次启动时仍然存在，则您知道该进程已被杀死，但不知道它是否由于错误或应用户请求而被杀死。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T11:29:42.443

如果您需要立即知道您的进程何时被杀死，我知道的唯一方法是使用另一个进程作为看门狗。如果您使用 OpenProcess() 来获取相关进程的句柄，则可以等待该句柄（通过 WaitForSingleObject 或类似方法），并且在进程终止时会发出该句柄的信号。您需要与目标进程进行一些协调，以跟踪关闭是干净的还是强制的。

# android - Android：每 2 秒轮询一次

> ID：11985223
> 
> 赞同：0
> 
> 时间：2012-08-16T10:26:41.170
> 
> 标签：android, json, long-polling

我的应用程序的一项功能是每 2 秒检索一次实时数据（JSON 对象）并显示它（仅当应用程序处于前台时）。我每 2 秒执行一次异步任务。但这使应用程序变慢。我已经寻找替代方案，但我只有 C2DM 选项。由于服务器限制，我无法使用它。
*你能告诉我一种替代或有效的投票方式吗？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:00:52.090

将异步任务的执行从每两秒更改为在获得先前更新的响应后，您可以在 onpostexecute 函数中启动它...这将使您的 ui 更快也尝试使用 gzip 以便更快地传输数据 不要池异步任务

你的 ui 变得越来越慢，因为在前一个矿石完成之前完成了一个异步任务

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:36:31.607

一种选择是，如果您可以控制您的服务器，您可以切换到 Comet（长期持有的 http 请求）之类的东西，以避免持续轮询请求的必要性。

# php - 通过 Ajax 调用 PHP 函数

> ID：11985224
> 
> 赞同：0
> 
> 时间：2012-08-16T10:26:40.903
> 
> 标签：php, javascript, ajax

我是网站的新手。我的页面中有一个文本框，我需要的是当 onBlur 那个文本框时，调用一个包含 sql 查询的 php 方法。我在网上找到了类似的东西，但仍然可以上网.我做错了吗？

```
<?php
if(isset($_POST['Greet']))
   {
      echo $_POST['Greet'];
  }
?>
<html>
<body>
<script type="text/javascript">

function sayHi()
{
     var value = $.ajax({
        type: "POST",
         url: "page.php",
        data: "Greet="+$("#Greeting").val(),
        async: false
        }).responseText;
}

</script>

<input type="text" name="Greeting" id="Greeting" onblur="sayHi()">

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T10:30:44.990

退出您的 php 以在同一脚本中使用，ajax 将返回整个 html。

```
<?php
    if(isset($_POST['Greet']))
    {
        echo $_POST['Greet'];
        die;
    }
?> 
```

`value`会有你的回应`alert(value)`

稍后编辑：

```
<?php
    if(isset($_POST['Greet']))
    {
        echo $_POST['Greet'];
        die;
    }
?><html>
<body>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script type="text/javascript">
function sayHi()
{
    var value = $.ajax({
        type: "POST",
        url: "index.php",
        data: "Greet="+$("#Greeting").val(),
        async: false
    }).responseText;
    $('#result').html(value);
}

</script>
<span id="result"></span>
<input type="text" name="Greeting" id="Greeting" onblur="sayHi()">
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T10:31:00.667

您应该在页面中包含 jQuery 脚本以使 $.ajax 工作。

像这样：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script> 
```

# ios - 我如何更改 CCLabelBMFont 文本颜色

> ID：11985225
> 
> 赞同：1
> 
> 时间：2012-08-16T10:26:43.043
> 
> 标签：ios, cocoa-touch, cocos2d-iphone

我如何更改 CCLabelBMFont 文本颜色。

```
highScoreLabel = [CCLabelBMFont  labelWithString:highScore fntFile:@"markerFelt.fnt"]; 
```

![在此处输入图像描述](../Images/aee3f4781dee7e194520fc16ff3fc6ac.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T10:30:24.907

使用颜色属性，例如：

```
highScoreLabel.color = ccc3(240, 40, 40); 
```

这只有在原始颜色是白色的情况下才能正常工作。

# node.js - MongoDB节点检查objectid是否有效

> ID：11985228
> 
> 赞同：63
> 
> 时间：2012-08-16T10:26:47.820
> 
> 标签：node.js, mongodb

如何使用 Node 的驱动程序检查 ObjectID 是否有效

我试过 ：

```
var BSON = mongo.BSONPure;
console.log("Validity: "  + BSON.ObjectID.isValid('ddsd')) 
```

但我不断收到异常，而不是真假。（例外只是一个 'throw e; // process.nextTick 错误，或第一次滴答时的 'error' 事件'

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-08-16T14:18:06.600

**这是一个简单的检查**- 并非 100% 万无一失

如果要检查 24 个十六进制字符的字符串，可以使用此正则表达式。

```
var checkForHexRegExp = new RegExp("^[0-9a-fA-F]{24}$")

checkForHexRegExp.test("i am a bad boy")
// false
checkForHexRegExp.test("5e63c3a5e4232e4cd0274ac2")
// true 
```

正则表达式取自[github.com/mongodb/js-bson/.../objectid.ts](https://github.com/mongodb/js-bson/blob/v4.2.0/src/objectid.ts#L9)

* * *

为了更好地检查使用：

```
var ObjectID = require("mongodb").ObjectID

ObjectID.isValid("i am a bad boy")
// false
ObjectID.isValid("5e63c3a5e4232e4cd0274ac2")
// true 
```

`isValid`代码[github.com/mongodb/js-bson/.../objectid.ts](https://github.com/mongodb/js-bson/blob/v4.2.0/src/objectid.ts#L301)

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2014-08-26T03:11:54.183

`isValid()`在[js-bson](https://github.com/mongodb/js-bson/) ( [`objectid.ts`](https://github.com/mongodb/js-bson/blob/v4.2.0/src/objectid.ts#L301)) 库中，它是[node-mongodb-native](https://github.com/mongodb/node-mongodb-native/)的依赖项。

对于发现此问题的人，我不建议按照其他答案中的建议重新创建此方法。相反，继续使用原始海报使用的方法`node-mongodb-native`，以下示例将访问.`isValid()``js-bson`

```
var mongodb = require("mongodb");
var objectid = mongodb.BSONPure.ObjectID;

console.log(objectid.isValid('53fbf4615c3b9f41c381b6a3')); 
```

**2018 年 7 月更新：**当前执行此操作的方法是：

```
var mongodb = require("mongodb")
console.log(mongodb.ObjectID.isValid(id)) 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2015-02-25T16:06:07.563

作为 Eat at Joes 答案的扩展...这在 node-mongodb-native 2.0 中有效

```
var objectID = require('mongodb').ObjectID

objectID.isValid('54edb381a13ec9142b9bb3537') - false
objectID.isValid('54edb381a13ec9142b9bb353') - true
objectID.isValid('54edb381a13ec9142b9bb35') - false 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2019-04-13T16:54:09.207

如果您正在使用，`mongoose`那么您可以使用 mongoose 进行验证，而不是依赖于任何其他库。

```
if (!mongoose.Types.ObjectId.isValid(req.id)) {
    return res.status(400).send("Invalid object id");
} 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-08-31T11:07:26.880

@GianPaJ 的片段很棒，但需要稍微扩展以涵盖非十六进制 objectID。同一文件的第 32 行表示 objectID 的长度也可以是 12 个字符。这些键由 mongodb 驱动程序转换为 24 个字符的十六进制 ObjectID。

```
function isValidObjectID(str) {
  // coerce to string so the function can be generically used to test both strings and native objectIds created by the driver
  str = str + '';
  var len = str.length, valid = false;
  if (len == 12 || len == 24) {
    valid = /^[0-9a-fA-F]+$/.test(str);
  }
  return valid;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-11-29T10:20:12.103

下面是我尝试使用 JOI 验证 objectId 数据类型的主题 ID 的模型`(Joi.objectId().required())`：

```
const Joi = require('joi');
const mongoose = require('mongoose');

const Category = mongoose.model('Category', new mongoose.Schema({
  name: String
}));

function validateCategory(category) {
  const schema = {
    name: Joi.string().min(5).max(50).required(),
    subject_id: Joi.objectId().required(),
  };

  return Joi.validate(category, schema);
}

exports.Category = Category;
exports.validate = validateCategory; 
```

![如果有人尝试发送无效的 objectId，它将像这样进行验证](../Images/549d3d0eac712d049e0f44508b4fb7a4.png)

`joi-objectid`验证该值是一个长度为 24 个字符的字母数字字符串。

[Joi 的 MongoDB ObjectId 验证器。](https://www.npmjs.com/package/joi-objectid)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-03-27T07:46:49.780

遵循这个正则表达式：

在js中

新正则表达式("^[0-9a-fA-F]{23}$").test("5e79d319ab5bfb2a9ea4239")

在java中

Pattern.compile("^[0-9a-fA-F]{23}$").matcher(sanitizeText(value)).matches()

[![在此处输入图像描述](../Images/b407b4242eea35604492461c3dc756fd.png)](https://i.stack.imgur.com/N4JlS.jpg)

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2015-06-23T23:02:34.497

您可以使用[Cerberus](http://cerberus.readthedocs.org)并创建自定义函数来验证和 ObjectId

```
from cerberus import Validator
import re

class CustomValidator(Validator): 
    def _validate_type_objectid(self, field, value):
        """ 
        Validation for `objectid` schema attribute.

        :param field: field name.
        :param value: field value.
        """
        if not re.match('[a-f0-9]{24}', str(value)):
            self._error(field, ERROR_BAD_TYPE % 'ObjectId')

## Initiate the class and validate the information
v = CustomValidator()

schema = {
    'value': {'type': 'objectid'}
}
document = {
    'value': ObjectId('5565d8adba02d54a4a78be95')
}

if not v(document, schema):
    print 'Error' 
```

# java - 谁在篡改我的数据流？

> ID：11985236
> 
> 赞同：5
> 
> 时间：2012-08-16T10:27:14.087
> 
> 标签：java, sockets, ftp

下面的代码从某个 URL 下载文件并将其保存到本地文件。小菜一碟。这里可能有什么问题？

```
protected long download(ProgressMonitor montitor) throws Exception{
    long size = 0;
    DataInputStream dis = new DataInputStream(is);
    int read = 0;
    byte[] chunk = new byte[chunkSize];
    while( (read = dis.read(chunk)) != -1){
        os.write(chunk, 0, read);
        size += read;
        if(montitor != null)
            montitor.worked(read);
    }

    chunk = null;
    dis.close();
    os.flush();
    os.close();
    return size;
} 
```

我在这里发布问题的原因是因为它在 99.999% 的时间内都可以正常工作，并且只要运行此代码的计算机上安装了防病毒软件或其他一些保护软件，它就无法按预期工作。我这样盲目地指指点点，因为每当我停止（或禁用）它时，代码都会再次完美运行。这种干扰的最终结果是下载文件的MD5与预期不符，一个全新的传奇开始了。

所以，问题是 - 是否真的有可能一些智能“保护”软件会在我不知道的情况下改变来自 URL 的实际流？如果是的话 - 你如何处理这个？（*经卡巴斯基和诺顿产品验证*）。

* * *

**EDIT-1：** 显然我已经控制了这个问题，它与防病毒软件无关。下载从 FTP 服务器（特别是 FileZilla）进行，我们在客户端使用 apache commons ftp。我所做的是转到 FTP 服务器并在下载过程中终止连接（将其踢出）。我预计 is.read(..) 会在客户端抛出一个 IOException ，但这从未发生过。相反， is.read(..) 返回 -1 意味着没有更多数据来自流。这绝对是出乎意料的，并解释了为什么有时我会得到部分文件。然而，这并不能解释为什么有时数据也会被更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:47:54.180

是的，这一直发生在我身上。就我而言，这是由 Websense 在我的公司网络上进行的透明 HTTP 代理引起的。最严重的问题是由返回 200 OK 的块页面引起的。

您是否每次都遇到相同或类似的腐败？例如，您是否得到一些 HTML 来解释请求被阻止的原因？您可以做的最好的可能是将下载数据的前几个字节与块页面中的某些文本进行比较，并在这种情况下抛出异常。

编辑：根据您的更新，您是否将 FTP 客户端设置为图像/二进制模式？

# performance - 生成 sha1 哈希需要多长时间？

> ID：11985238
> 
> 赞同：2
> 
> 时间：2012-08-16T10:27:13.903
> 
> 标签：performance, hash, sha1

生成一个 SHA1 哈希需要多长时间（大约 60 个字节？）
并与其他哈希相比？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T10:36:53.447

当然，生成哈希的实际时间很大程度上取决于您的硬件，因此无法提供具体的时间。

也就是说，可以表明 SHA1 哈希算法相对于其他哈希算法的性能。

以下链接提供了许多不同流行哈希算法的性能比较：

[Crypto++ 5.6.0 基准测试](http://www.cryptopp.com/benchmarks.html)

[MD5 与 SHA-1，性能和谱系](http://www.sandelman.ottawa.on.ca/ipsec/1996/05/msg00116.html)

[性能比较：安全设计选择](http://msdn.microsoft.com/en-us/library/ms978415.aspx)
（检查大约一半，在标题“ComputeHash”下）

从最后一个链接：

> 计算哈希
> 
> 该方法计算存储在文件中的数据的哈希值。我们使用 4 KB、135 KB 和 1 MB 的数据大小进行了测试，以了解数据大小如何影响性能。
> 
> ![在此处输入图像描述](../Images/31b5c6acb104cdf9fd723985d860184e.png)
> 
> 图 4\. 哈希算法 (4 KB)：RPS 和响应时间
> 
> 笔记：
> 
> .NET Framework 支持多种哈希算法，包括 MD5、SHA1、SHA256、SHA384 和 SHA512。各种 SHA 实现之间的唯一区别是它们产生的散列大小。我们选择在我们的测试中仅包含 SHA1 和 SHA512。我们使用了 System.Security.Cryptography，它提供了 SHA1 和 MD5 的各种实现。System.Security.Cryptography 中只有一种 MD5 实现：封装 CAPI 的 MD5CryptoServiceProvider。SHA256、SHA384 和 SHA512 目前在 CryptoAPI 中不可用。这些算法直接在托管代码中实现。添加这些算法只是为了支持 AES 的新密钥生成要求，而不是提供比 SHA1 更强大的算法。当前的信念是 SHA1 足以用于散列数据。对于 SHA1 和 SHA512，我们分别使用 System.Security.Cryptography 中提供的托管实现，SHA1Managed 和 SHA512Managed。如图 4 所示，所有算法在性能上都非常相似，但 SHA512 略落后。MD5 生成大小为 128 位的散列。SHA 中的计算过程非常模仿 MD5。它产生一个 160 位的散列。

# c# - ActionScript 3 客户端和 C# 服务器之间的加密

> ID：11985240
> 
> 赞同：0
> 
> 时间：2012-08-16T10:27:21.263
> 
> 标签：c#, .net, actionscript-3, encryption, client-server

我正在构建一个与 WCF Web 服务通信的基于 Flash 的游戏。游戏会将分数上传到服务器，我需要让用户尽可能地破解通信。我需要一种简单的加密方法，该方法将使用来自服务器的不断变化的（半公开？）密钥加密点，该密钥在每次请求时都会更改，即使对于同一用户也是如此。我知道这也可以及时破解，但我的目标是让它更难。*过去，我在 C# 服务器和*客户端上使用过非常相似的方法 (SHA256) ，但这次，我的客户端是 ActionScript 3，因此我需要一个在 .NET 和 AS3 中都能以完全相同的方式工作的库。有内置的吗？我不是数学专家，我真的不想自己写。我[在 ActionScript3 中找到了 Encrypt，在 asp 中找到了 Decrypt。](https://stackoverflow.com/questions/3308781/encrypt-in-actionscript3-and-decrypt-in-asp-net-c-sharp)没有回答，[在 C# 中加密并在 Flex 中解密，](https://stackoverflow.com/questions/9993707/encrypt-in-c-sharp-and-decrypt-in-flex)但它使用一些外部库，我只想在必要时使用它们。

那么，AS3 包和 .NET 中是否有任何内置库相互兼容？

# function - LLVM 插入内在函数 Cos

> ID：11985247
> 
> 赞同：4
> 
> 时间：2012-08-16T10:27:58.783
> 
> 标签：function, insert, llvm, trigonometry

我正在尝试将内部 cos() 函数调用插入 LLVM 传递。我在 FunctionPass 中的代码：

```
std::vector<Type *> arg_type;
arg_type.push_back(Type::getFloatTy(getGlobalContext()));
Function *fun = Intrinsic::getDeclaration(F.getParent(), Intrinsic::cos, arg_type);
CallInst* callInst = CallInst::Create(fun, args, Twine("cos"), (Instruction *)&I); 
```

当我遗漏最后一行时，生成的 IR 是：

```
define i32 @main() nounwind uwtable {
entry:
...
}

declare float @llvm.cos.f32(float) nounwind readonly 
```

，但包含 CallInst 后，我​​得到的只是：

```
0  opt                0x000000000094f4bf
1  opt                0x000000000094f9c9
2  libpthread.so.0    0x00007fb92b652cb0
3  opt                0x00000000008be244 llvm::Instruction::Instruction(llvm::Type*, unsigned int, llvm::Use*, unsigned int, llvm::Instruction*) + 148
4  LLVMObfuscation.so 0x00007fb92a66c52f
5  LLVMObfuscation.so 0x00007fb92a66c9a5
6  LLVMObfuscation.so 0x00007fb92a66df21
7  opt                0x00000000008e921f llvm::FPPassManager::runOnFunction(llvm::Function&) + 591
8  opt                0x00000000008e9293 llvm::FPPassManager::runOnModule(llvm::Module&) + 51
9  opt                0x00000000008e8f34 llvm::MPPassManager::runOnModule(llvm::Module&) + 532
10 opt                0x00000000008ea4fb llvm::PassManagerImpl::run(llvm::Module&) + 171
11 opt                0x0000000000496208 main + 4104
12 libc.so.6          0x00007fb92a89376d __libc_start_main + 237
13 opt                0x000000000049cfe5 
```

我还需要做什么？我想我不需要在模块中定义这个函数。

发送到函数的 args 是这样定义的：

```
std::vector<Value *> args;
args.push_back(fp); 
```

其中 fp 是先前插入的指令：

```
Instruction *fp = BinaryOperator::Create(Instruction::FSub, ... 
```

变量 I 是 inst_iterator，但我在外面这样做是为了循环。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T09:15:23.147

我建议你使用`IRBuilder`. 它简化了 LLVM pass 中的 IR 生成。在您的情况下，您可以像这样使用它：

```
std::vector<Type *> arg_type;
arg_type.push_back(Type::getFloatTy(getGlobalContext()));
Function *fun = Intrinsic::getDeclaration(F.getParent(), Intrinsic::cos, arg_type);
IRBuilder<> Builder(&I);
Builder.CreateCall(fun, args); 
```

# c# - 清除 __eventArgument

> ID：11985250
> 
> 赞同：4
> 
> 时间：2012-08-16T10:28:03.590
> 
> 标签：c#, javascript, updatepanel

我有一个带有一个`<asp:UpdatePanel>`和 2 个`<asp:button>`控件的表单来保存和重置表单。如果面板应该重置，我正在触发`<asp:UpdatePanel>`使用 javascript`__doPostBack()`函数并在其中传递一个值。`__EVENTARGUMENT`

我的代码隐藏通过检查 PreRender 上的值

```
Request.Params.Get("__EVENTARGUMENT") 
```

确定是否使用原始数据重置表单。

如果面板先前已重置，则在`__EVENTARGUMENT`按下保存按钮时似乎会徘徊，因此在回发时再次重置我的表单。

我试图清除使用`__EVENTARGUMENT`中的`Page_Load`：

```
Request.Params.Clear(); 
```

和

```
Request.Params.Set("__EVENTARGUMENT", ""); 
```

但该集合是只读的。我在另一篇文章中发现，使用 javascript：

```
window.document.getElementById('__EVENTARGUMENT').value = ''; 
```

但这似乎也不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T12:45:24.570

刚刚想通了。

**解决方案**

可以通过以下`__EVENTARGUMENT`方式简单地清除：

```
theForm.__EVENTARGUMENT.value = ''; 
```

如果每次`<asp:UpdatePanel>`加载都需要执行此操作，则将以下内容*放入*UpdatePanel 中：

```
<script type="text/javascript">
    Sys.Application.add_load(function () {
        theForm.__EVENTARGUMENT.value = '';
    });
</script> 
```

* * *

**原因：**

大多数 .Net 控件使用 javascript`__doPostBack`函数来处理回发，因此在生成页面时会自动将以下代码添加到页面中：

```
<script type="text/javascript">
//<![CDATA[
var theForm = document.forms['form'];
if (!theForm) {
    theForm = document.form;
}
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
    theForm.__EVENTTARGET.value = eventTarget;
    theForm.__EVENTARGUMENT.value = eventArgument;
    theForm.submit();
    }
}
//]]>
</script> 
```

这是为 设置值的地方`__EVENTARGUMENT`，因此是从代码隐藏中引用的内容。

# android - 如何以编程方式访问设备设置？

> ID：11985251
> 
> 赞同：17
> 
> 时间：2012-08-16T10:28:04.560
> 
> 标签：android

有没有办法以编程方式访问设备设置？

例如：设置 > 开发人员选项 > USB 调试 > True/False

提前致谢。

编辑：USB调试只是一个例子。我可以访问设备设置中存在的所有设置吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-16T10:34:57.643

> Settings.Secure.putInt(getActivity().getContentResolver(),Settings.Secure.ADB_EN​​ABLED, 1);

但是您需要 root 访问权限才能执行此操作。只有系统应用有权更改安全设置

编辑：试试这个以显示所有 ANR

> Settings.Secure.putInt(ContentResolver,Settings.Secure.ANR_SHOW_BACKGROUND,0);

并且对于不要保留活动

> ActivityManagerNative.getDefault().setAlwaysFinish(true)

但 ActivityManagerNative 隐藏在标准 api 集中。您将需要进行反射或使用此[方法](http://devmaze.wordpress.com/2011/01/18/using-com-android-internal-part-1-introduction/)来获取 android.jar。我再次猜想这需要root访问权限

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T10:35:06.593

尝试如下：

```
int adb = Settings.Secure.getInt(context.getContentResolver(),
  Settings.Secure.ADB_ENABLED, 0);
 // toggle the USB debugging setting
 adb = adb == 0 ? 1 : 0;
 Settings.Secure.putInt(context.getContentResolver(), 
Settings.Secure.ADB_ENABLED, adb); 
```

在 AndroidManifest.xml 中：

```
<uses-permission android:name="android.permission.WRITE_SETTINGS"></uses-permission>
<uses-permission android:name="android.permission.WRITE_SECURE_SETTINGS"></uses-permission> 
```

最后看看这个例子

[http://code.google.com/p/secure-settings-widget/source/browse/src/com/lieryan/adbwidget/ADBAppWidgetProvider.java?r=eb23b2d6989ccade05f095806db5888f1ba62737](http://code.google.com/p/secure-settings-widget/source/browse/src/com/lieryan/adbwidget/ADBAppWidgetProvider.java?r=eb23b2d6989ccade05f095806db5888f1ba62737)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-25T09:07:19.747

我知道这个问题很老但很有趣。

Nandeesh 的解决方案效果很好。但如果您想更改某些设置（例如 USB 调试），它就不起作用。您必须使用以下权限。

```
<uses-permission android:name="android.permission.WRITE_SECURE_SETTINGS"/> 
```

但是，它不适用于非系统应用程序。但是，**如果您具有 root 访问权限，则可以执行此操作**。您可以尝试[这个](http://lifepluslinux.blogspot.com/2015/10/using-writesecuresettings-permission-on.html)解决方案，作者解决了完全相同的问题。

你也可以试试[https://github.com/alseambusher/adb-toggle](https://github.com/alseambusher/adb-toggle)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-29T11:34:11.883

如果您的应用程序是系统应用程序，那么您只需执行此操作即可启用/禁用 USB 调试

> Settings.Secure.putInt(getActivity().getContentResolver(),Settings.Secure.ADB_EN​​ABLED, 1);

您还需要 root 访问权限才能执行此操作。我有根设备，我只是简单地执行**SU**来启用/禁用 USB 调试。

> Process proc = Runtime.getRuntime().exec(new String [] { "su", "-c", "setprop", "persist.service.adb.enable", "0"});
> 
> proc.waitFor();
> 
> 进程 proc2 = Runtime.getRuntime().exec(new String [] { "su", "-c", "stop", "adbd"});
> 
> proc2.waitFor();

好消息是您**不需要**将您的应用程序放在**(/system/priv-app/)** 您的简单应用程序即**(/data/app)**可以做到这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-17T05:41:17.417

**除非您的应用是系统应用**，否则您无法打开 USB 调试。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-25T06:47:44.123

这行代码可能会有所帮助：

```
Settings.Global.putInt(getContentResolver(), Global.ADB_ENABLED, 1); 
```

你需要这个权限：

`<uses-permission android:name="android.permission.WRITE_SECURE_SETTINGS"/>`

但在清单中添加此权限后，您将收到此错误：**权限仅授予系统应用程序**

这意味着**您的应用程序必须是系统应用程序**。

# jquery - jquery 上滑菜单

> ID：11985261
> 
> 赞同：1
> 
> 时间：2012-08-16T10:29:07.683
> 
> 标签：jquery

我想首先隐藏所有子菜单，然后单击 span.expand 后应显示所有子菜单。

这是我的 HTML：

```
<div class="ym-gbox">
    <ul>
        <li>menu1</li>
        <li>menu2</li>
        <ul>
            <li>submenu1</li>
            <li>submenu2</li>
        </ul>
        <ul>
            <li>submenu1</li>
            <li>submenu2</li>
        </ul>  
    </ul>
</div>

<div id="expandbutton">
    <span class="button expand">expand</span>
</div> 
```

和我的 jQuery：

```
jQuery(document).ready(function($) {
    $('.ym-gbox ul li ul li').hide();

        $('.expand').click(function() {
        if ($(this).hasClass('act')) {
            $(this).removeClass('act');
            $('.ym-gbox ul li').not('.menuactive').children('ul').children('li').slideUp('fast');
        } else {
            $(this).addClass('act'); 
            $('.ym-gbox ul li ul li').slideDown('fast');  
        }

    });
}); 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:46:15.460

您的选择器没有选择您期望的元素，我已经修改了标记，请尝试以下操作：

```
<div class="ym-gbox">
    <ul>
        <li class='expand'>menu1</li>
        <ul>
            <li>submenu1</li>
            <li>submenu2</li>
        </ul>
        <li class='expand'>menu2</li>
        <ul>
            <li>submenu1</li>
            <li>submenu2</li>
        </ul>
    </ul>
</div> 
```

```
jQuery(document).ready(function() {
    $('.ym-gbox > ul ul').hide();
    $('.ym-gbox li.active').next().show();

    $('.expand:not(.active)').click(function() {
         $(this).addClass('active').siblings('li').removeClass('active')
         $(this).siblings('ul').slideUp();
         $(this).next('ul').slideDown()                
    });
}); 
```

[http://jsfiddle.net/U5P5Y/](http://jsfiddle.net/U5P5Y/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:35:07.963

这是因为您的 html 无效。它应该是这样的：

```
<div class="ym-gbox">
    <ul>
        <li>menu1
            <ul>
                <li>submenu1</li>
                <li>submenu2</li>
            </ul>  
        </li>
        <li>menu2
            <ul>
                <li>submenu1</li>
                <li>submenu2</li>
            </ul>
        </li>
    </ul>
</div>

<div id="expandbutton">
    <span class="button expand">expand</span>
</div>​ 
```

代码：http: [//jsfiddle.net/HCE9j/4/](http://jsfiddle.net/HCE9j/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T10:37:31.663

为什么不给你的子菜单一个自己的 id 并调用类似的东西：

```
$(".expand").toggle(function(e){
 $("#submenu).slideUp("slow");
}, function(){
 $("#submenu").slideDown("slow");
}) 
```

# ruby - Stucked with ruby or { || } operator with if condition

> ID：11985263
> 
> 赞同：1
> 
> 时间：2012-08-16T10:29:19.733
> 
> 标签：ruby

My code is

```
if @site.Name != ("B.A.P." || "Cir." || "10th")
  do this if part
else
  do this else part
end 
```

`if @site.name = "B.A.P"` is working fine but for others two it's not working properly. I also used one more syntax which is:

```
if ["B.A.P." , "Cir." , "10th"].include? (@site.Name) 
```

Again facing the same problem. Can any one suggest me proper way to implement logical `or operator with if condition?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T10:51:38.170

你的第二个版本应该可以工作

```
1.9.3p194 :027 > ["B.A.P." , "Cir." , "10th"].include? "Cir."
 => true 
1.9.3p194 :028 > ["B.A.P." , "Cir." , "10th"].include? "10th"
 => true 
1.9.3p194 :029 > ["B.A.P." , "Cir." , "10th"].include? "B.A.P."
 => true 
```

检查@site.Name 中是否有任何终止符等

在您的第一个版本中，会发生这种情况

```
1.9.3p194 :033 > ("B.A.P." || "Cir." || "10th")
 => "B.A.P." # always evaluates to first arg 
```

对于第一个版本使用这个

```
if @site.Name == "B.A.P." || @site.Name == "Cir." || @site.Name == "10th" 
```

或者更红宝石的方式

```
@site.Name.eql? "B.A.P." or @site.Name.eql? "Cir." or @site.Name.eql? "10th" 
```

我将使用数组包含版本。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T10:53:57.370

第一个版本的工作方式与您说英语的方式相同，但大多数编程语言的工作方式并非如此。相反，您必须这样做：

```
if @site.Name != "B.A.P." && @site.Name != "Cir." && @site.Name != "10th" 
```

如果您实际上正在测试是否`@site.Name` *确实*等于其中一个，这就是您的第二个版本的样子，您会这样做：

```
if @site.Name == "B.A.P." || @site.Name == "Cir." || @site.Name == "10th" 
```

我更喜欢你的第二个版本，这是完全有效的。（再次假设您的条件`@site.Name` *等于*这三个值之一。）如果它对您不起作用，那么您的意思似乎很可能是`@site.name`而不是`@site.Name`（大写很重要）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T11:50:53.147

您的代码使问题变得模棱两可。

在第一部分中，您使用了`!=`. 所以，如果你想看看是否`@site.Name` *没有*“BAP”、“Cir”。或“10th”，第二部分必须为否定形式，即：

```
unless ["B.A.P." , "Cir." , "10th"].include? (@site.Name) 
```

我会用那个。

# css - Can CSS check if the element is breaking?

> ID：11985265
> 
> 赞同：3
> 
> 时间：2012-08-16T10:29:21.703
> 
> 标签：css

Is there a way to check(in CSS) if an element is breaking/new lining? I can't know the width of the divs or the parent. I only want to know the first element after the break, so I can add special CSS to this element

Like this:

```
<div>
  first
</div>    
<div>
  second
</div>  
<div>
  third
</div>  
<div>
  fourth
</div> 
```

the css:

```
div {
    float:left;
    width:200px;
    height:20px;
}
div:not(:first-child) {
    padding-left:10px;
} 
```

here i need a check if the element is on a new line so I can remove the padding :

```
div:first-after-break {
    padding-left:0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T12:07:46.273

我认为在这种情况下，您可能可以通过使用`padding-right`来分隔元素，而不是`padding-left`. 这样，元素在新行开始时不会缩进。如果`padding-right`在行尾导致问题，您可以考虑使用`:last-child`伪选择器（[有关更多信息`:last-child`](http://www.quirksmode.org/css/firstchild.html)），并在`padding-right: 0;`那里设置。

不过，这并没有放弃这个问题。我可以想到`:first-after-break`您描述的伪的合法用途。例如：使用浮动块级元素的完全响应式布局。在这种情况下，人们可能想知道某个元素是否位于窗口的左侧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T10:41:55.557

您可以使用`::first-line`伪元素来获取 div 的第一行。如果要将样式规则应用于*不是*第一行的行，则可以将这些样式应用于整个元素，然后将其从第一行中删除。但是如果你想专门使用该`padding`属性，你也可以`text-indent`在整个元素上设置（没有任何伪元素）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T10:36:40.383

不，我认为 CSS 中没有一种方法可以满足您的要求。

除非指定宽度，否则 DIV 会自动占据其父级的整个宽度，因为它是 BLOCK 级别元素，因此如果未指定宽度，那么您的第二个 DIV 无论如何都会在新行上。

# entity-framework - 实体框架选项来映射字符串列表或 int 列表（列表 )

> ID：11985267
> 
> 赞同：44
> 
> 时间：2012-08-16T10:29:40.780
> 
> 标签：entity-framework, list, orm, mapping

我想使用 EF 存储一个包含原语列表的对象。

```
public class MyObject {
    public int Id {get;set;}
    public virtual IList<int> Numbers {get;set;}
} 
```

我知道**EF 不能存储**这个，但我想知道解决这个问题的可能解决方案。

我能想到的2个解决方案是：

1.**创建一个**具有 Id 和 Integervalue 的 Dummy 对象，例如

```
public class MyObject {
    public int Id {get;set;}
    public virtual IList<MyInt> Numbers {get;set;}
}

public class MyInt {
    public int Id {get;set;}
    public int Number {get;set;}
} 
```

2.**将列表值存储为 blob**，例如

```
public class MyObject {
    public int Id {get;set;}

    /// use NumbersValue to persist/load the list values
    public string NumbersValue {get;set;}

    [NotMapped]
    public virtual IList<int> Numbers {
         get {
              return NumbersValue.split(',');
         }
         set {
             NumbersValue = value.ToArray().Join(",");
         }
    }
} 
```

2\. 方法的问题是，如果有人修改了返回的集合，我必须创建一个自定义 IList 实现来跟踪。

**有没有更好的解决方案**？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-08-16T15:41:48.650

虽然我不喜欢回答我自己的问题，但这是解决我的问题的方法：

在我找到这个关于[**复杂类型**](http://msdn.microsoft.com/en-us/library/bb738472.aspx)的链接后，我尝试了几种实现，经过一些头痛后，我最终得到了这个。

列表值直接作为字符串存储在表中，因此无需执行多个连接即可获取列表条目。实现者只需将每个列表条目的对话实现为可持久字符串（参见代码示例）。

大多数代码在基类（PersistableScalarCollection）中处理。您只需从每个数据类型（int、string 等）派生并实现该方法来序列化/反序列化该值。

重要的是要注意，**您不能直接使用泛型基类**（当您删除抽象时）。似乎 EF 无法使用它。您还必须确保使用`[ComplexType]`属性注释派生类。

另请注意，似乎**不可能实现 ComplexType，`IList<T>`**因为 EF 抱怨索引器（因此我继续使用 ICollection）。

还需要注意的是，由于所有内容都存储在一列中，因此您**无法**在 Collection 中搜索值（至少在数据库中）。在这种情况下，您可以跳过此实现或对数据进行非规范化以进行搜索。

整数集合的示例：

```
 /// <summary>
    /// ALlows persisting of a simple integer collection.
    /// </summary>
    [ComplexType]
    public class PersistableIntCollection : PersistableScalarCollection<int> {
        protected override int ConvertSingleValueToRuntime(string rawValue) {
            return int.Parse(rawValue);
        }

        protected override string ConvertSingleValueToPersistable(int value) {
            return value.ToString();
        }
    } 
```

使用示例：

```
public class MyObject {
    public int Id {get;set;}
    public virtual PersistableIntCollection Numbers {get;set;}
} 
```

这是通过将列表条目存储在字符串中来处理持久性方面的基类：

```
 /// <summary>
    /// Baseclass that allows persisting of scalar values as a collection (which is not supported by EF 4.3)
    /// </summary>
    /// <typeparam name="T">Type of the single collection entry that should be persisted.</typeparam>
    [ComplexType]
    public abstract class PersistableScalarCollection<T> : ICollection<T> {

        // use a character that will not occur in the collection.
        // this can be overriden using the given abstract methods (e.g. for list of strings).
        const string DefaultValueSeperator = "|"; 

        readonly string[] DefaultValueSeperators = new string[] { DefaultValueSeperator };

        /// <summary>
        /// The internal data container for the list data.
        /// </summary>
        private List<T> Data { get; set; }

        public PersistableScalarCollection() {
            Data = new List<T>();
        }

        /// <summary>
        /// Implementors have to convert the given value raw value to the correct runtime-type.
        /// </summary>
        /// <param name="rawValue">the already seperated raw value from the database</param>
        /// <returns></returns>
        protected abstract T ConvertSingleValueToRuntime(string rawValue);

        /// <summary>
        /// Implementors should convert the given runtime value to a persistable form.
        /// </summary>
        /// <param name="value"></param>
        /// <returns></returns>
        protected abstract string ConvertSingleValueToPersistable(T value);

        /// <summary>
        /// Deriving classes can override the string that is used to seperate single values
        /// </summary>        
        protected virtual string ValueSeperator {
            get {
                return DefaultValueSeperator;
            }
        }

        /// <summary>
        /// Deriving classes can override the string that is used to seperate single values
        /// </summary>        
        protected virtual string[] ValueSeperators {
            get {
                return DefaultValueSeperators;
            }
        }

        /// <summary>
        /// DO NOT Modeify manually! This is only used to store/load the data.
        /// </summary>        
        public string SerializedValue {
            get {
                var serializedValue = string.Join(ValueSeperator.ToString(),
                    Data.Select(x => ConvertSingleValueToPersistable(x))
                    .ToArray());
                return serializedValue;
            }
            set {
                Data.Clear();

                if (string.IsNullOrEmpty(value)) {
                    return;
                }

                Data = new List<T>(value.Split(ValueSeperators, StringSplitOptions.None)
                    .Select(x => ConvertSingleValueToRuntime(x)));
            }
        }

        #region ICollection<T> Members

        public void Add(T item) {
            Data.Add(item);
        }

        public void Clear() {
            Data.Clear();
        }

        public bool Contains(T item) {
            return Data.Contains(item);
        }

        public void CopyTo(T[] array, int arrayIndex) {
            Data.CopyTo(array, arrayIndex);
        }

        public int Count {
            get { return Data.Count; }
        }

        public bool IsReadOnly {
            get { return false; }
        }

        public bool Remove(T item) {
            return Data.Remove(item);
        }

        #endregion

        #region IEnumerable<T> Members

        public IEnumerator<T> GetEnumerator() {
            return Data.GetEnumerator();
        }

        #endregion

        #region IEnumerable Members

        IEnumerator IEnumerable.GetEnumerator() {
            return Data.GetEnumerator();
        }

        #endregion
    } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2021-05-31T15:24:15.273

我正在使用 EF Core 并且遇到了类似的问题，但以更简单的方式解决了它。

这个想法是将整数列表作为逗号分隔的字符串存储在数据库中。我通过`ValueConverter`在我的实体类型构建器中指定 a 来做到这一点。

```
public class MyObjectBuilder : IEntityTypeConfiguration<MyObject>
{
    public void Configure(EntityTypeBuilder<MyObject> builder)
    {
        var intArrayValueConverter = new ValueConverter<int[], string>(
            i => string.Join(",", i),
            s => string.IsNullOrWhiteSpace(s) ? new int[0] : s.Split(new[] { ',' }).Select(v => int.Parse(v)).ToArray());

        builder.Property(x => x.Numbers).HasConversion(intArrayValueConverter);
    }
} 
```

更多信息可以在这里找到：[https ://entityframeworkcore.com/knowledge-base/37370476/how-to-persist-a-list-of-strings-with-entity-framework-core-](https://entityframeworkcore.com/knowledge-base/37370476/how-to-persist-a-list-of-strings-with-entity-framework-core-)

# java - Sometimes throw NullPointerException, and sometimes not. How to fix?

> ID：11985268
> 
> 赞同：0
> 
> 时间：2012-08-16T10:29:41.107
> 
> 标签：java, nullpointerexception, collision-detection

Here's an excerpt of the init of the object:

```
 ...
            Rectangle b1 = tenBullets.getBounds();
    ... 
```

Here's the getBounds() method:

```
public Rectangle getBounds() {
    return new Rectangle(x, y, 200, 25);
} 
```

And here is the console message:

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at test.game.Board.checkCollisions(Board.java:75)
at test.game.Board.actionPerformed(Board.java:53)
at javax.swing.Timer.fireActionPerformed(Unknown Source)
at javax.swing.Timer$DoPostEvent.run(Unknown Source)
at java.awt.event.InvocationEvent.dispatch(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$000(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source) 
```

Board.java:75 is when the getBounds() method is called. Sometimes the exception is thrown, and 1 out of the 10th time it's not. Any fixes?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:37:40.727

被`NullPointerException`抛出是因为`tenBullets`当`null`该方法被调用时——并且您试图在空对象上调用一个方法（这是不可能的，并且会导致异常）。

为了解决这个问题，您需要做以下两件事之一：

1.  更改前面的行为，以便`tenBullets`在调用它之前始终为其分配一个值`getBounds()`。这是选择的选项，*此时*`tenBullets`不应为空。
**   使问题中的代码能够容忍 null 检查`if (tenBullets == null)`，如果这是真的，请采取一些替代措施。这是选择是否 null 可能是一个合理的值的选项（也许它可能会或可能不会被初始化）；如果是这样，您必须应对这种可能性。*

 *如果不了解代码的意图或上下文，就不可能给出具体的建议。但是，如果`tenBullets`是一个字段（而不是局部变量），请考虑取消设置（或修改）它*是否*有意义；如果没有，请声明它`final`。这将保证它在构造函数中初始化并始终保持该值。

通常，减少可变字段/变量的数量可以更容易地推理程序，因为您需要较少了解它在执行时可能处于或可能不处于什么状态。听起来这是您的问题`tenBullets`，在某些时候由其他一些代码分配，并且没有确定的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:37:52.073

从您所展示的内容来看，我不能肯定地说，但是当我重命名文件和代码片段时，有时我会在 Eclipse 中遇到不一致的情况。即使一切都正确，Eclipse 已经缓存了一些旧名称，这可能会发生冲突。

要解决此问题，请转到项目 -> 清理并删除所有已编译的文件。

同样，不确定这是否是您的问题，但我以前见过*

# android - ts file not playing in android tablet

> ID：11985276
> 
> 赞同：0
> 
> 时间：2012-08-16T10:30:00.763
> 
> 标签：android

I am trying to play a file i have recorded. The file plays well in vlc(linux pc) and in Moboplayer(android tablet). While using the default player in the android tablet it shows this in logcat.

```
I/ActivityManager(  201): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.example.mymediaplayer/.MyVideoView bnds=[656,246][752,342]} from pid 417
I/System.out(20286): MyVideoView.onCreate()
I/System.out(20286): MyVideoView.onResume()
V/TabletStatusBar(  281): setLightsOn(true)
I/AwesomePlayer(  141): setDataSource_l('/sdcard/video/TunerOut.ts')
I/avc_utils(  141): found AVC codec config (720 x 480, Baseline-profile level 3.1)
I/MPEG2TSExtractor(  141): haveAudio=1, haveVideo=1
E/OMXCodec(  141): Attempting to allocate OMX node 'OMX.TI.DUCATI1.VIDEO.DECODER'
E/OMXCodec(  141): Attempting to allocate OMX node 'OMX.Nvidia.h264.decode'
E/OMXCodec(  141): Attempting to allocate OMX node 'OMX.qcom.7x30.video.decoder.avc'
E/OMXCodec(  141): Attempting to allocate OMX node 'OMX.qcom.video.decoder.avc'
E/OMXCodec(  141): Attempting to allocate OMX node 'OMX.TI.Video.Decoder'
E/OMXCodec(  141): Attempting to allocate OMX node 'OMX.SEC.AVC.Decoder'
E/OMXCodec(  141): Successfully allocated OMX node 'OMX.SEC.AVC.Decoder'
I/OMXCodec(  141): [OMX.SEC.AVC.Decoder] AVC profile = 66 (Baseline), level = 31
E/OMXCodec(  141): [OMX.SEC.AVC.Decoder] Video O/P format.eColorFormat 0x40b452b1
I/OMXCodec(  141): [OMX.SEC.AVC.Decoder] video dimensions are 720 x 480
D/OpenGLRenderer(  417): Flushing caches (mode 1)
I/ActivityManager(  201): Displayed com.example.mymediaplayer/.MyVideoView: +323ms
W/InputManagerService(  201): Starting input on non-focused client com.android.internal.view.IInputMethodClient$Stub$Proxy@4106dc38 (uid=10036 pid=20503)
W/IInputConnectionWrapper(20503): showStatusIcon on inactive InputConnection
E/OMXCodec(  141): Attempting to allocate OMX node 'OMX.Nvidia.mp2.decoder'
**E/MediaPlayer(20286): error (1, -2147483648)
E/MediaPlayer(20286): Error (1,-2147483648)
D/VideoView(20286): Error: 1,-2147483648**
D/OpenGLRenderer(  417): Flushing caches (mode 0)
W/InputManagerService(  201): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@41033300
D/AudioHardware(  141): AudioHardware pcm playback is going to standby. 
```

what is error 1,-2147483648

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T16:36:12.117

我也有这个错误。原因（在我的情况下）是 mp3 格式错误，即

```
MPEG ADTS, layer II, v1, 192 kbps, 44.1 kHz, Stereo 
```

而“好”的 mp3 具有以下格式：

```
MPEG ADTS, layer III, v1, 128 kbps, 44.1 kHz, JntStereo 
```

# jquery - Google 样式 Ajax 页面加载

> ID：11985278
> 
> 赞同：1
> 
> 时间：2012-08-16T10:30:17.600
> 
> 标签：jquery, ajax

有人可以给我更多关于这是如何实现的信息。当您从一个页面转到另一个页面时，内容变灰，然后在加载内容时会暂停，然后内容被新内容替换，您将被带到页面顶部。

我想为我的网站实现相同的效果，所以我想知道我的步骤是否正确：

*   用户点击“下一页”。
*   使用 Jquery 包含内容的 Div 变得半透明
*   使用 Ajax 引入新内容并替换当前内容
*   使用“scroll-to”滚动到页面顶部</li>

我在正确的轨道上吗？谁能提供更多信息让我开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:47:23.783

我认为你混淆了两种可能性。

1.  非常基本，如果您面临页面之间的主要加载时间，您可以像您说的那样显示一个框，上面写着“请等待下一页加载”。完成后，浏览器将切换到新页面。但是，鉴于人们使用标签式浏览等，我建议不要这样做，因为它会破坏前一页。如果您在新选项卡中打开链接，则必须在返回后重新加载上一页。

2.  如果使用Ajax，浏览器不会切换页面；只有页面内容会被换出。同样，您可以在页面中添加“加载”框，直到收到新的 HTML 内容。

**编辑** 根据您的问题，这是一个示例：

```
$("#contents").ajaxStart(function() { 

    $(this).fadeTo("slow", 0.33);

}); 
```

# iphone - AFNetworking 检查进度

> ID：11985279
> 
> 赞同：3
> 
> 时间：2012-08-16T10:30:20.063
> 
> 标签：iphone, ios, afnetworking

我正在使用 AFNetworking 框架下载文件并将它们写入本地文件系统。

但是由于文件可能很大，我想添加一个`UIProgressView`，但我似乎找不到任何可以随着进度更新的方法。

我看到人们在谈论 setProgressBlock，但我在文档中找不到任何相关信息：http: [//afnetworking.org/Documentation/Classes/AFHTTPRequestOperation.html](http://afnetworking.org/Documentation/Classes/AFHTTPRequestOperation.html)

有没有一种方法可以做到这一点？我只是`AFHTTPRequestOperation`用来下载文件。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-16T10:39:02.323

参考以下代码。这是使用 AFNetworking 代码下载的一些文件。

```
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://blahblah.com/blahblah.mp3"]];
AFURLConnectionOperation *operation =   [[AFHTTPRequestOperation alloc] initWithRequest:request];

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *filePath = [paths objectAtIndex:0] stringByAppendingPathComponent:@"blahblah.mp3"];
operation.outputStream = [NSOutputStream outputStreamToFileAtPath:filePath append:NO];
[operation setDownloadProgressBlock:^(NSInteger bytesRead, long long totalBytesRead, long long totalBytesExpectedToRead)
{
    myProgressView.progress = (float)totalBytesRead / totalBytesExpectedToRead;
}];
[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject)
{
    NSLog(@"downloadComplete!");
}];
[operation start]; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-16T10:34:17.107

该`setDownloadProgressBlock`方法是 的一部分`AFURLConnectionOperation`，从中`AFHTTPRequestOperation`继承 - 这就是您在`AFHTTPRequestOperation`文档中看不到它的原因。您需要的文档在这里：

[http://cocoadocs.org/docsets/AFNetworking/1.3.1/Classes/AFURLConnectionOperation.html](http://cocoadocs.org/docsets/AFNetworking/1.3.1/Classes/AFURLConnectionOperation.html)

# java - using Activity in Android Widget

> ID：11985282
> 
> 赞同：0
> 
> 时间：2012-08-16T10:30:33.323
> 
> 标签：java, android, android-widget

i need an Activity in my Widget Provider. Is there any way to realize that? The problem is: I want to write a little Facebook Widget but: The Facebook API needs an Activity in the Authorize Function... without this function i get an Facebook Error. Xan i call a Object in my Activity from this Widget ? Or, can i "share" this Object global?

```
Facebook facebook = new Facebook("X X X");
facebook.authorize(this, new String[] {}, new DialogListener() { }); 
```

[https://developers.facebook.com/docs/reference/androidsdk/authentication/](https://developers.facebook.com/docs/reference/androidsdk/authentication/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:07:26.817

Facebook api 需要一个 Activity 来显示带有身份验证的对话框，您应该在您的应用中创建一个 Activity 并启动它以显示身份验证对话框。

# microcontroller - conversion of decimal to hexadecimal in Embedded C

> ID：11985284
> 
> 赞同：-3
> 
> 时间：2012-08-16T10:30:39.407
> 
> 标签：microcontroller

I want to convert decimal number to hexadecimal in Embedded C.

Actually in my project input to controller is decimal which will be subtracted from hexadecimal value, so I need a conversion.

I tried to write it but after converting a number (`75` for example) to its hexadecimal equivalent it will be (`411`). The trouble is that I did not know how to convert a number like `11` to `b` in hexadecimal as you know that there is no `11` in hexadecimal, it is `b`; so please help.

I want to save the converted value in a flag (for subtracting), not for printing. I can print a hex value by simple put a condition like:

```
(if (a > 10) printf("b")) 
```

but this is not a solution for Embedded.

So please give me a complete solution.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:35:27.177

我不确定你的意思，但你的整数只是“解释类型”。在你的记忆中，它只是一堆 0 和 1，因此你也可以用十进制、十六进制的方式表示“数据”。

如果您需要它作为寄存器的输入，您可以将其传递给它。还是我误解了你的问题？

# string - 获取 VB6 变量的名称作为字符串值

> ID：11985293
> 
> 赞同：4
> 
> 时间：2012-08-16T10:31:09.097
> 
> 标签：string, debugging, parsing, vb6

我想获取一个 VB6 变量的名称作为字符串值，以便在我使用的日志工具中处理它，如下所示（请检查 !!!VariableName !!!）。

有什么办法可以做到这一点？我对 VB6 很陌生，我应该维护和调试现有的旧 VB6 代码。

```
Public Sub AddVariableValue2Log(ByVal checkDebug, _
                                ByVal sFunctionName As String, _
                                ByVal sVariableValue As String, _
                                ByVal sTimeStamp As String)

  If checkDebug Then
    Dim sLogPath As String
    sLogPath = "C:\Temp\Log_" & sTimeStamp & ".txt"

    Dim fn As Integer
    fn = FreeFile

    Open sLogPath For Append As #fn
    Write #fn, Now & "|" & sFunctionName & "|>>>!!!VariableName!!! value: [" & sVariableValue & "]"
    Close #fn
  End If

End Sub 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T10:57:40.303

这在 VB6 中是不可能的。您必须传递变量的名称。

```
AddVariableValue2Log(True, "MyFunction", "MyVariable", MyVariable, Now()) 
```

# sql-server - CAST 为十进制，还是 *1.0？

> ID：11985296
> 
> 赞同：1
> 
> 时间：2012-08-16T10:31:18.457
> 
> 标签：sql-server, casting

以下两个查询都会给我相同的结果，而且我已经看到过去使用这两种技术来确保`decimal`返回数据类型。

```
select CAST(5 as decimal(18,2))/2

select 5*1.0/2 
```

哪种方法最好使用？

为什么人们会使用`*1.0`过度投射？这仅仅是因为它的打字速度更快吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T10:41:57.883

如果要控制结果的精度或比例，则必须使用`CAST`or `CONVERT`。但是我相信，如果您只想要“小数”，那么正如您所建议的那样，键入`* 1.0`.

# php - call php function and using global variable inside php function

> ID：11985298
> 
> 赞同：-5
> 
> 时间：2012-08-16T10:31:23.637
> 
> 标签：php, html

I want to enable a control based on the user input.. if user click yes i want to display it else hide it.. so i called a function and assigned value based on that i want to display the control..

This is the php Function

```
<?
$hscEnable="false";
function HSControl($val) 
{
    if($val=="yes")
    {
        return("true");
    }
    else
    {
        return("false");    
    }
}
?> 
```

I have called it from html form

```
<input type="radio" name="twelthStudiedStatus" value="no" id="twelthStudiedStatus_1" checked onClick= <? $hscEnable=HSControl("no"); ?> >

  <? if($hscEnable=="true"){ ?>
  <tr>
    <td>Percentage :</td>
    <td><input type="text" name="twelthPercentage" /></td>
  </tr>
  <?  } ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T10:37:37.783

您不能直接通过 JavaScript 调用 PHP 函数，因为您的 PHP 在服务器上，而 JavaScript 在调用网页的客户端上。您可以使用**Ajax**解决此问题。或者，如果您只想禁用或启用控件 - 您可以直接使用 JavaScript 而不是 PHP！

如果没有 Ajax，您将无法在没有服务器请求的情况下执行 PHP。因此，另一种解决方案可以是重新加载整个页面并通过 PHP 将带有新控件的新页面发送回客户端！

看这张图了解“php: server, javascript: client”的逻辑 ![在此处输入图像描述](../Images/c7fd689684df112e553772dbaac6c60f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T11:42:42.863

```
<script type="text/javascript">
    function HSControl(value) {
        document.getElementById("twelthPercentage").style.display = (value == 'no') ? "none" : "block";
    }
</script>
<input type="radio" name="twelthStudiedStatus" value="no" id="twelthStudiedStatus_1" checked onClick=HSControl('no')>
<input type="radio" name="twelthStudiedStatus" value="yes" id="twelthStudiedStatus_1" onClick=HSControl('yes')>
<tr>
    <td>Percentage :</td>
    <td><input type="text" id="twelthPercentage" name="twelthPercentage" hidden/></td>
</tr> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T10:38:56.373

您可以使用 AJAX 调用服务器端函数，jQuery 使这非常容易。

见，[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# mysql - SQL - SELECT query with priority filter

> ID：11985300
> 
> 赞同：1
> 
> 时间：2012-08-16T10:31:35.710
> 
> 标签：mysql, sql

I have a multiple table query that looks something like:

```
SELECT tree.name, tree.type, branch.name, branch.type, leaf.name, leaf.type 
FROM tree, branch, leaf 
WHERE leaf.branch_id = branch.id 
   AND branch.tree_id = tree.id
ORDER by field(tree.type, 'Poplar', 'Birch', 'Hazelnut') 
```

So this gives me all leaf entries that belong to any of the three tree entries.

Now, I would really only like to return the leaf entries that belong to ONE tree, in the order specified.

So if there are leaf entries belonging to a Poplar tree, only display these. However, if there are no Poplar leaf entries, only display leaf entries belonging to the Birch tree.

There could be any number of leaf entries. I just want the ones on a tree that appears in my priority list. Ideally just using one query.

Any ideas? Thanks in advance....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:47:28.370

尝试这个：

```
SELECT * FROM
(
    SELECT tree.name, tree.type, branch.name, branch.type, leaf.name, leaf.type, 
           IF(@var_type = '' OR a.type = @var_type, a.type := @var_type, 0) AS check_flag
    FROM tree, branch, leaf, (SELECT @var_type := '')
    WHERE leaf.branch_id = branch.id
          AND branch.tree_id = tree.id
    ORDER by field(tree.type, 'Poplar', 'Birch', 'Hazelnut')
) a
WHERE check_flag <> 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:50:09.000

我建议使用[http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)

有了它，你可以做到

```
 SELECT * FROM (
    SELECT find_in_set(tree.type, "Poplar,Birch,Hazelnut") as sequence, tree.name, tree.type,    branch.name, branch.type, leaf.name, leaf.type 
    FROM tree, branch, leaf 
    WHERE leaf.branch_id = branch.id 
       AND branch.tree_id = tree.id
    ORDER by sequence
    ) WHERE sequence = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T10:51:38.890

这是一种方法。此查询首先为每个叶子找到适当的树类型。然后它将这些信息重新加入：

```
select tree.name, tree.type, branch.name, branch.type, leaf.name, leaf.type
from (SELECT leaf.id,
             min(case when tree.type = 'Poplar' then tree.id end) as poplarid,
             min(case when tree.type = 'Birch' then tree.id end) as birchid,
             min(case when tree.type = 'Hazelnut' then tree.id end) as hazelid
      FROM leaf join
           branch
           on leaf.branch_id = branch.id join
           tree
           on branch.tree_id = tree.id join
      group by leaf.id
     ) lt join
     leaf
     on leaf.leaf_id = lt.leaf_id join
     branch
     on leaf.branch_id = branch.id join
     tree
     on tree.id = branch.tree_id
where tree.id = coalesce(lt.poplarid, lt.birchid, lt.hazelid)
ORDER by field(tree.type, 'Poplar', 'Birch', 'Hazelnut') 
```

# c# - 正则表达式的替代品

> ID：11985304
> 
> 赞同：0
> 
> 时间：2012-08-16T10:32:10.483
> 
> 标签：c#, regex

我目前正在将参数传递给这样的`SQL`字符串 -

```
grid=0& 
```

我正在使用 a`RegEx`来获得这样的`0`价值-

```
Match match = Regex.Match(input, @"grid=([A-Za-z0-9\-]+)\&$",
            RegexOptions.IgnoreCase);

string grid = match.Groups[1].Value; 
```

效果很好。

然而，随着开发的进展，很明显更多参数将像这样添加到字符串中 -

```
grid=0&hr=3&tb=0 
```

每次这些参数在字符串中的顺序可能不同，因此很明显我当前使用的 RegEx 将无法正常工作。我已经研究过了，认为`Split`可能是一种选择，但不确定。

最好的方法是什么，我如何将它应用于我当前的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T10:40:26.207

如果您正在解析查询字符串并寻找替代方法`Regex`，则有一个专门的类和方法，它会返回参数集合：

```
 string s = "http://www.something.com?grid=0&hr=3&tb=0";
        Uri uri = new Uri(s);
        var result = HttpUtility.ParseQueryString(uri.Query); 
```

您必须包括`System.Web`命名空间。您可以使用它的键访问每个参数的值：

```
 foreach (string key in result.Keys)
        {
            string value = result[key];
            // action...
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T10:38:22.413

在这里仍然可以使用正则表达式。考虑添加另一个捕获组来捕获属性名称，然后使用 Matches 而不是 Match 循环所有结果，或者多次调用 Match。

# jsf - Primefaces DataGrid - CommandLink 不起作用

> ID：11985305
> 
> 赞同：2
> 
> 时间：2012-08-16T10:32:22.870
> 
> 标签：jsf, jsf-2, primefaces

我遇到了嵌套 UI 组件的问题，这可能是 PrimeFaces 和 Mojara 中的一个已知错误。但是我不知道我该如何解决它。

我们有一个带有上传器的图片库，我希望能够从数据网格中删除图片，所以

XHTML：

```
<h:form enctype="multipart/form-data">

            <p:fileUpload fileUploadListener="#{pictureManagementBean.handleFileUpload}"  
                    mode="advanced"  
                    update="gallery messages"  
                    auto="true"                    
                    allowTypes="/(\.|\/)(gif|jpe?g|png)$/"
                    />  

            <p:growl id="messages" showDetail="true"/>  

            <p:dataGrid var="item" value="#{pictureManagementBean.pictures}" id="gallery">  
                <p:panel header="#{item.pictureName}" style="text-align:center">  
                    <h:panelGrid columns="1" style="width:100%">  

                        <p:graphicImage value="#{item.thumbnailDir}" />                             
                        <h:outputText value="#{item.createdate.toString()}" />                           
                        <p:commandLink value="Delete" 
                                       action="#{pictureManagementBean.removePicture(item.idpicture)}" ajax="false"/>

                    </h:panelGrid>  
                </p:panel>  
            </p:dataGrid>  

        </h:form> 
```

基本上，目前根本不起作用的是DataGrid中的commandLink Delete。其余的都很好。

有什么解决方法吗？我试过：列，ajax，没有 ajax ......没有任何效果。我所能做的就是在 DataGrid 之外获取按钮。但这并不是我真正想要的。

任何帮助表示赞赏。

**[小事：令人惊讶的是，我在 DataTable 和 Columns 中使用 commandLink 没有问题！]**

来自 maven 的 Primefaces 3.4RC1。（也没有在 3.3.1 上工作）

好的，所以我发现了一件事： 如果我**在里面`<p:dataGrid>`使用任何东西但 p:columns 它不起作用。但是视图很糟糕......我应该只使用CSS来修复它吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T11:58:51.300

@Maple_shaft 你说的太对了！

正确的代码：

```
<p:dataGrid var="item" value="#{pictureManagementBean.pictures}" id="gallery">  
                <p:column>
                    <p:panel header="#{item.pictureName}" style="text-align:center"> 
                    <h:panelGrid columns="1" style="width:100%"> 

                        <p:graphicImage value="#{item.thumbnailDir}" />                             
                        <h:outputText value="#{item.createdate.toString()}" />                           
                        <p:commandLink value="Delete" 
                                       action="#{pictureManagementBean.removePicture(item.idpicture)}" ajax="false"/>

                    </h:panelGrid>
                    </p:panel>
                </p:column>
            </p:dataGrid> 
```

所以只是简单的列元素。我之前只是放错了地方。非常感谢。

当然，支持 bean 是 @ViewScoped！

# asp.net - linqtosql 对象是否可序列化？

> ID：11985306
> 
> 赞同：1
> 
> 时间：2012-08-16T10:32:23.087
> 
> 标签：asp.net, web-services, linq-to-sql, serialization

嗨，我正在通过 asp.net 3.5 开发 Web 服务，我想知道我是否使用 lintosql 作为 ORM，然后我用来返回的不同数据类型（数据表、对象、列表、类成员等）默认情况下是可序列化的？或者我需要修改 linqtosql 类以使其可序列化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T10:43:18.023

可以通过将 Serialization Mode 属性设置为`Unidirectional`. 但是，我建议您创建自己的 DTO 并在您的 Web 服务中公开它们，而不是自动生成的 linq 实体。它将更好地控制您的 API。

有关该主题的更多信息：[LINQ to SQL 序列化功能](http://msdn.microsoft.com/en-us/library/bb546184.aspx)

# objective-c - Objective-C 中的静态、外部和内联

> ID：11985307
> 
> 赞同：30
> 
> 时间：2012-08-16T10:32:24.210
> 
> 标签：objective-c, static, inline, llvm, extern

`static`使用 LLVM 编译器在 Objetive-C 中,`extern`和`inline`(及其组合) 是什么意思？

另外，我注意到有`CG_EXTERN`和`CG_INLINE`宏。我们应该改用那些吗？

*（我找不到有明确解释的来源，所以我认为在这里创建一个可能很有用，或者如果有人知道，请指出它）*

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-16T10:37:42.917

> 使用 LLVM 编译器的 Objetive-C 中的 static、extern 和 inline（及其组合）是什么意思？

与 C 中的相同，除非您编译为 ObjC++——那么它们的含义与 C++ 中的相同。

所以这里是 C 的介绍，但如果你准备好使用这些链接，请阅读链接，因为细节很重要：

* * *

**外部**

摘要：*表示标识符在别处定义。*

详情：[http ://tigcc.ticalc.org/doc/keywords.html#extern](http://tigcc.ticalc.org/doc/keywords.html#extern)

**静止的**

摘要（值）：*保留变量值以在其范围结束后继续存在。*

总结（函数）：有效地发出未命名的副本 - 对于 C 中的私有函数很有用，并且在与内联函数一起使用时可用于转义多个定义错误。

详情：[http ://tigcc.ticalc.org/doc/keywords.html#static](http://tigcc.ticalc.org/doc/keywords.html#static)

**排队**

摘要：建议将函数体移到调用者中。

详情：[http ://tigcc.ticalc.org/doc/gnuexts.html#SEC93](http://tigcc.ticalc.org/doc/gnuexts.html#SEC93)

* * *

请注意，内联和静态在 C++ 中要复杂得多（就像 C++ 中的几乎所有东西一样）。

> 我还发现有 CG_EXTERN 和 CG_INLINE 宏。我们应该改用那些吗？

不。

相反，如果您需要这种类型的功能，您应该使用您自己的含义指定您自己的。`CG_EXTERN`并且`CG_INLINE`具有特定的含义（可能会改变），并且旨在在其定义的上下文中使用——此外，您不希望在何时包含一大堆框架（所有 CoreGraphics/ApplicationServices/CoreFoundation/等）你想指定的东西是`extern`在 C 和 C++ 中工作的方式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T11:24:44.687

贾斯汀涵盖了大部分内容，但我为那些想要深入挖掘的人找到了一些其他不错的资源：

通过声明**内联**函数，您可以告诉编译器将该函数的完整代码直接替换到调用它的位置。这是一个相当高级的功能，需要了解较低级别的编程。

[内联函数](http://www.drdobbs.com/the-new-c-inline-functions/184401540)

* * *

[这个 SO question对](https://stackoverflow.com/questions/1433204/what-are-extern-variables-in-c)**外部**变量有一个巨大的答案——变量定义在“其他地方”——但也需要在“这里”使用。

* * *

**静态**保留范围之外的变量生命。变量在它声明的范围内是可见的。

[静态变量是什么意思？](http://wiki.answers.com/Q/What_does_static_variable_mean)

* * *

# c# - Windows服务中的多个线程

> ID：11985308
> 
> 赞同：1
> 
> 时间：2012-08-16T10:32:31.303
> 
> 标签：c#, multithreading, timer, windows-services, thread-safety

我有 Windows 项目和一个表单，每 5 秒有一个计时器。

它从名为 table time wise 和 condition wise 的请求中调用和处理方法。

但是我有一些方法类型需要太多时间来响应并且希望这些方法在单独的线程中。这样我就可以在单独的线程和同步中运行这两种请求类型。

我如何使用线程将它们分开 - 多异步线程？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T10:35:54.033

我建议您查看 .NET 4.0`Task`类。每次都触发完整的线程可能是矫枉过正。任务与计时器一起使用底层线程池并行执行工作。

使用 a`Task`很简单：

```
Task t = Task.Factory.StartNew(
       () => 
       {
           // task code here
       }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T10:36:23.520

```
using System;
using System.Threading;

class Program
{
    static void Main()
    {
    Thread thread1 = new Thread(new ThreadStart(A));
    Thread thread2 = new Thread(new ThreadStart(B));
    thread1.Start();
    thread2.Start();
    thread1.Join();
    thread2.Join();
    }

    static void A()
    {
    Thread.Sleep(100);
    Console.WriteLine('A');
    }

    static void B()
    {
    Thread.Sleep(1000);
    Console.WriteLine('B');
    }
} 
```

[线程教程](http://www.dotnetperls.com/thread)

# html - 在图像上覆盖文本

> ID：11985311
> 
> 赞同：2
> 
> 时间：2012-08-16T10:32:41.477
> 
> 标签：html, css

我刚刚进入网络开发（主要是 iOS、Java、c# 程序员）。我有一个简单的问题，它很烦人。

```
<div id="banner">
    <img src="Styles/Banner.jpg" alt="banner" />
   <div id="bannerText">
    User ID
    </div>
</div> 
```

我有一个横幅，它是一个简单的图像 (.jpg)，我想覆盖一些文本。问题是将文本定位在横幅上。我真的不想使用绝对定位。我希望图像和文本都居中。问题是我似乎能够在使用绝对定位时将文本重叠在图像上，如果调整窗口大小，这将受到影响。什么是最好/最简单的方法来做到这一点。

* * *

只是想感谢你们所有人的帮助。GC

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T10:36:40.793

***[现场演示](http://tinkerbin.com/rrsv4HYv)***

嘿，现在我想你应该想要这个

**HTML**

```
<div id="banner">
    <img src="http://rapidgator.net/images/pict-download.jpg" alt="banner" />
   <div id="bannerText">
    User ID
    </div>
</div> 
```

**CSS**

```
#banner{
position:relative;
  background:green;
  padding:10px;
}
img{
vertical-align:top;
}
#bannerText{
position:absolute;
  top:20px;
  left:10px;
  background:red;
} 
```

**[演示](http://tinkerbin.com/rrsv4HYv)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T10:36:31.867

您必须给父元素 ( `#banner`) a`position: relative;`以使其子元素 ( ) 的绝对位置`#bannerText`取决于横幅位置而不是窗口边框。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T10:40:39.353

如果您可以使用图像作为背景而不是`<img>`使用 css 的标签，如下例所示

```
#bannerText
  {
    background: url("Styles/Banner.jpg") no-repeat center center;
    width: 123px;
    height: 123px;
    text-align: center;
  } 
```

如果您不想使用`Position:` ，如果您想使用`<img>`，请使用“feeela's”ans

# iphone - 从本机联系人应用程序中检索选定的组

> ID：11985317
> 
> 赞同：0
> 
> 时间：2012-08-16T10:33:02.960
> 
> 标签：iphone, objective-c, ios, ipad

我正在开发一个应用程序，我需要在其中显示联系人应用程序中的联系人。

我已经成功实现了该功能，但现在我只需要显示在本机联系人应用程序中选择的组中的联系人，类似于 Magic Jack（[http://itunes.apple.com/us/app/free-calls-with-magicjack /id463926997?mt=8](http://itunes.apple.com/us/app/free-calls-with-magicjack/id463926997?mt=8) ) iPhone 应用程序。

我试图在谷歌、论坛、苹果的文档上搜索，但找不到解决方案。谁能帮我？

我正在使用下面的代码来获取所有联系信息。

```
ABAddressBookRef addressBook = ABAddressBookCreate(); 
ABRecordRef source = ABAddressBookCopyDefaultSource(addressBook); 
NSArray *persons = (NSArray *)(ABAddressBookCopyArrayOfAllPeopleInSourceWithSortOrdering(addressBook, source, kABPersonSortByFirstName)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T06:54:03.387

ABGroupCopyArrayOfAllMembers 不适合你想要的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T11:33:32.827

这是您可以使用的代码，它获取名字和姓氏。

```
-(IBAction)handlingClick:(id)sender
{
    ABPeoplePickerNavigationController *peopleController = [[ABPeoplePickerNavigationController alloc] init];
    peopleController.peoplePickerDelegate = self;
    [self presentModalViewController:peopleController animated:YES];
    [peopleController release];

}

-(void)peoplePickerNavigationControllerDidCancel:(ABPeoplePickerNavigationController *)peoplePicker
{
    [peoplePicker  dismissModalViewControllerAnimated:YES];
}

-(BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker
     shouldContinueAfterSelectingPerson:(ABRecordRef)person 
                               property:(ABPropertyID)property 
                             identifier:(ABMultiValueIdentifier)identifier
{
    return NO;
}

-(BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker
     shouldContinueAfterSelectingPerson:(ABRecordRef)person
{
    self.firstName.text = (NSString*)ABRecordCopyValue(person, kABPersonFirstNameProperty);
    self.lastName.text = (NSString*)ABRecordCopyValue(person, kABPersonLastNameProperty);

    [self dismissModalViewControllerAnimated:YES];
    return NO;

} 
```

# text-editor - Visual Studio 2012 文本编辑器中的丑陋选择

> ID：11985319
> 
> 赞同：4
> 
> 时间：2012-08-16T10:33:05.490
> 
> 标签：text-editor, visual-studio-2012, appearance

我已经开始使用 Visual Studio 2012 并且有一个功能让我非常沮丧：文本编辑器中的选择方式。出于某种原因，变量和所有其他文本看起来不同。断点高亮也是如此：

![Visual Studio 2012 选择](../Images/67a52c241261705860b7a0278eb47110.png)

是否有设置使选择和断点线在所有以前版本的 VS 和所有其他编辑器中看起来一致？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T10:53:47.403

对此没有设置，但为什么您的选择看起来很难看是因为您为给定的（标识符）类型设置了背景颜色。在`Tools*Options*Environment*Fonts and Colors`选择`Identifiers`并设置`Item Background`为`Default`

# iphone - 如何获得动画结束通知

> ID：11985321
> 
> 赞同：4
> 
> 时间：2012-08-16T10:33:08.440
> 
> 标签：iphone, objective-c, ios, xcode

动画结束后我想做一些动作。

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.80f];
self.view.transform = 
CGAffineTransformMakeTranslation(
                                 self.view.frame.origin.x, 
                                 480.0f + (self.view.frame.size.height/2)  // move the whole view offscreen
                                 );
[self.view setAlpha:0];
[UIView commitAnimations]; 
```

我已经完成了上面的动画，如何找出动画结束，这样我就可以在那之后做我的动作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T10:37:38.157

用这个：

```
 [UIView animateWithDuration:0.80f animations:^{
    self.view.transform =
    CGAffineTransformMakeTranslation(
                                     self.view.frame.origin.x,
                                     480.0f + (self.view.frame.size.height/2)  // move the whole view offscreen
                                     );
    [self.view setAlpha:0];
    }
    completion:^(BOOL finished){
        // your code
    }]; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-16T10:38:13.493

将此添加到您的动画中：

```
[UIView setAnimationDidStopSelector:@selector(myAnimationEnded)];
[UIView setAnimationDelegate:self]; 
```

这个方法会告诉你什么时候停止；

```
- (void)myAnimationEnded{
     NSLog(@"animation ended");
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-16T10:40:25.590

使用`UIView`'s`-animateWithDuration:animations:completion:`类方法。

```
[UIView animateWithDuration:0.8 animations:^{
        CGAffineTransformMakeTranslation(
                                         self.view.frame.origin.x, 
                                         480.0f + (self.view.frame.size.height/2)  // move the whole view offscreen
                                         );
        [self.view setAlpha:0];

    } completion:^(BOOL finished) {
        //this block is called when the animation is over
    }]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T10:36:15.723

之后写你的代码`[UIView commitAnimations];`。动画保持在`beginAnimations`和之间`commitAnimations`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-17T19:13:10.233

不是那个`setAnimationDelegate`

> 在 iOS 4.0 及更高版本中不鼓励使用此方法。如果您使用基于块的动画方法，您可以直接在块中包含代理的开始和结束代码。

# php - 从 db 获取多个结果

> ID：11985324
> 
> 赞同：0
> 
> 时间：2012-08-16T10:33:22.243
> 
> 标签：php, foreach

我正在开发一个相当大的（面向对象的）PHP 项目，其中包括一个网上商店，用户可以在其中购买产品和额外的许可证和服务。采购流程分为四步：

*   **第 1 步**：用户选择产品，然后`product_id`进入*第 2 步*
*   **第 2 步**：获取并输出所有基于许可证类型的许可证`product_id`，然后`product_id`转到*第 3 步*
*   **第 3 步**：获取并输出基于 的所有服务`product_id`，以带有名为的复选框的形式`services[$service_id]`

所以现在，在结账时`step 4`，我从数据库中获取正确的产品和许可证，但我还必须根据服务数组从数据库中获取正确的服务，并计算输出的价格。最后，我必须将服务数组分配给 Smarty 模板。

最合适的方法是什么？我真的希望有人能在这里帮助我，因为我很难做到这一点。

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:03:09.847

尝试使用

```
    $resulter = 数组（）；
    $i = 0;
     foreach($product_id 作为 $value) {
     $query = "从产品中选择 product_id = $value";

     你的执行代码

    $resulter[$i] = $result; //$result 可以是一个关联数组
    $i++
     }

```

如果我知道你，我会使用上面显示的多维数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T10:37:32.557

听起来你需要一个[JOIN](http://en.wikipedia.org/wiki/Join_%28SQL%29)。

类似于 'products' 表和 'licences' 表上的 JOIN 使用 'product_id' 字段进行连接。

示例查询类似于：

```
SELECT <required_fields_here>
FROM products
JOIN licences ON licences.product_id = products.product_id
WHERE product_id = <product_id_here> 
```

请注意，在 SELECT 部分中，您可以从“products”和“licences”表中选择字段，您只需在表前加上一个点，例如“product.product_id”

如果您需要进一步的帮助，我认为您需要更具体。希望能帮助到你。

# ruby-on-rails - Rails 3 find_or_create 由多个属性 mongoid

> ID：11985325
> 
> 赞同：5
> 
> 时间：2012-08-16T10:33:29.750
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, mongodb, mongoid

在这个链接[Rails find_or_create by more than one attribute？](https://stackoverflow.com/questions/3046607/rails-find-or-create-by-more-than-one-attribute)可以将多个属性与活动记录一起使用。

如何在 mongoid 中使用多个属性？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T11:19:05.620

If you look at the source in lib/mongoid/finders.rb:

```
# Find the first +Document+ given the conditions, or creates a
# with the conditions that were supplied.
    ...
# @param [ Hash ] attrs The attributes to check.
#
# @return [ Document ] A matching or newly created document.
def find_or_create_by(attrs = {}, &block)
    find_or(:create, attrs, &block)
end 
```

you can see that find_or_create_by accepts a `{}` as the first argument. You can just pass in several conditions at once

```
something.find_or_create_by(name: 'john', age: 20) 
```

and it should work.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T11:12:04.267

从[查询](http://mongoid.org/en/mongoid/docs/querying.html)的 mongoid 文档中：

> `Model.find_or_create_by`
> 
> 通过提供的属性查找文档，如果没有找到，则创建并返回一个新持久的文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-21T04:37:15.200

克里斯托弗，

我最近遇到了一个类似的问题，并在阅读了 mongoid git 存储库中的源代码后最终解决了这个问题：

在 mongoid 3.1.0 稳定分支中，这有效

```
 @new_object = NewObject.find_or_create_by(indexed_attribute: my_unique_value,
                                                        :attributeA => value,
                                                        :attributeB => value) 
```

# jquery - 显示六个滑块图像后的jquery重定向

> ID：11985327
> 
> 赞同：0
> 
> 时间：2012-08-16T10:33:34.647
> 
> 标签：jquery, jquery-ui, jquery-plugins

嗨，我正在关注[本教程](http://net.tutsplus.com/articles/news/how-to-build-a-simple-content-slider-jquery-plugin/)

为了构建一个 jquery 滑块，我需要的是在显示六张幻灯片后重定向到另一个网页，目前它正在重复幻灯片。

一些代码

```
$('ul').jwSlider({
    speed : 2500,
    pause : 3000
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:47:27.660

目前它会删除第一个元素并将其添加到`ul`. 所以没有六个。

您需要添加另一个选项并在和的函数中`slideShown`调用它`slide``fade``jwSlider`

```
...
    var defaults = {
            speed : 1000,
            pause : 2000,
            transition : 'fade',
            slideShown: $.noop
        },
...
        function slide() {
            setInterval(function() {
                // Animate to the left the width of the image/div
                $this.animate({'left' : '-' + $this.parent().width()}, options.speed, function() {
                    // Return the "left" CSS back to 0, and append the first child to the very end of the list.
                    $this
                       .css('left', 0)
                       .children(':first')
                       .appendTo($this); // move it to the end of the line.
                    options.slideShown(); // <------ added call
                })
            }, options.pause);
        } // end slide

        function fade() {
            setInterval(function() {
                $this.children(':first').animate({'opacity' : 0}, options.speed, function() {   
                    $this
                       .children(':first')
                       .css('opacity', 1) // Return opacity back to 1 for next time.
                       .css('zIndex', $this.children(':last').css('zIndex') - 1) // Reduces zIndex by 1 so that it's no longer on top.                  
                       .appendTo($this); // move it to the end of the line.
                    options.slideShown(); // <------ added call
                })
            }, options.pause);
        } // end fade 
```

然后打电话

```
var slidesShown = 0;
$('ul').jwSlider({
    speed : 2500,
    pause : 3000,
    slideShown: function(){
        slidesShown++;
        if (slidesShown == 6)
            window.location = "http://go.to/somewhere";
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:46:30.123

jwSlider 似乎没有为此目的包含任何回调。您需要为这个特殊用例扩展插件。

但是，您可以使用一个简单的解决方法来计算重定向发生之前的秒数：

```
var timeUntilRedirect = numberOfSlides * (speedInMilliseconds + pauseInMilliseconds)

setTimeout(function() {

  // redirect, e.g.:
  window.top.location.href="http://yourdomain.com"

}, timeUntilRedirect); 
```

# sql - 使用 SQL Server 2008 防止插入重复行

> ID：11985328
> 
> 赞同：2
> 
> 时间：2012-08-16T10:33:35.163
> 
> 标签：sql, sql-server-2008, tsql

我正在尝试将一些数据从一个表插入到另一个表中，但我想防止插入重复的行。我目前有以下查询：

```
INSERT INTO Table1
(
    Table1Col1,
    Table1Col2,
    Table1Col3,
    Table1Col4,
    Table1Col5
)
SELECT
    Table2Col1,
    Table2Col2 = constant1,
    Table2Col3 = constant2,
    Table2Col4 = constant3,
    Table2Col5 = constant4
FROM Table2
WHERE
    Condition1 = constant5
AND
    Condition2 = constant6
AND
    Condition3 = constant7
AND
    Condition4 LIKE '%constant8%' 
```

我不知道的是，我试图从 Table2 插入 Table1 的行可能已经存在，我想防止这种可能的重复发生并跳过插入，然后继续插入下一个唯一行。

我已经看到我可以使用 WHERE NOT EXISTS 子句并使用 INTERSECT 关键字，但我不完全了解如何将其应用于我的特定查询，因为我只想使用 Table2 中的一些选定数据，然后使用一些常量值插入表 1。

编辑：

我应该补充一点，从 TableCol2 到 TableCol5 的列实际上并不存在于结果集中，我只是在返回的 Table2Col1 旁边填充这些列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T10:36:08.390

由于您使用的是 SQL Server 2008，因此可以使用[合并](http://technet.microsoft.com/pt-br/library/bb510625.aspx)语句。

您可以根据键轻松检查行是否存在

像这样的东西：

```
merge TableMain  AS target
using TableA as source 
ON <join tables here>
WHEN MATCHED THEN <update>
WHEN NOT MATCHED BY TARGET <Insert>
WHEN NOT MATCHED BY SOURCE <delete> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T13:31:02.057

`Intersect`（减去 Sql Server 的术语）是没有问题的，因为它比较整行。其他两个选项是`not in/not exists/left join`和`merge`。`Not In`仅用于单列主键，因此在这种情况下是没有问题的。`In/Exists/Left join`应该在 Sql Server 中具有相同的性能，所以我将只使用存在：

```
INSERT INTO Table1
(
    Table1Col1,
    Table1Col2,
    Table1Col3,
    Table1Col4,
    Table1Col5
)
SELECT
    Table2Col1,
    Table2Col2 = constant1,
    Table2Col3 = constant2,
    Table2Col4 = constant3,
    Table2Col5 = constant4
FROM Table2
WHERE
    Condition1 = constant5
AND
    Condition2 = constant6
AND
    Condition3 = constant7
AND
    Condition4 LIKE '%constant8%'
AND NOT EXISTS
    (
       SELECT *
         FROM Table1 target
        WHERE target.Table1Col1 = Table2.Table2Col1
          AND target.Table1Col2 = Table2.Table2Col2
          AND target.Table1Col3 = Table2.Table2Col3
    ) 
```

[Merge](http://technet.microsoft.com/en-us/library/bb510625.aspx)用于同步两个表；它具有插入、更新和删除记录的能力`target table`。

```
merge into table1 as target
using table2 as source
   on target.Table1Col1 = source.Table2Col1
  AND target.Table1Col2 = source.Table2Col2
  AND target.Table1Col3 = source.Table2Col3
when not matched by target then
  insert (Table1Col1,
          Table1Col2,
          Table1Col3,
          Table1Col4,
          Table1Col5)
  values (Table2Col1,
          Table2Col2,
          Table2Col3,
          Table2Col4,
          Table2Col5); 
```

如果在传输期间计算 table2 中的列，`not exists()`以防您可能使用派生表代替 table2，这同样适用于`merge`示例 - 只需将您的查询放置在 table2 的引用位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T03:34:03.547

我们检查了表中是否已经存在数据。为此，我们必须使用[If 条件来避免重复插入](https://stackoverflow.com/questions/11985328/prevent-the-insertion-of-duplicate-rows-using-sql-server-2008)

# c++ - uninitialized_copy() 异常安全吗？

> ID：11985330
> 
> 赞同：0
> 
> 时间：2012-08-16T10:33:53.410
> 
> 标签：c++, exception, exception-safety

[MSDN](http://msdn.microsoft.com/en-us/library/ctht4stc.aspx)和[其他地方](http://books.google.com/books?id=gYNVsCaxfYgC&lpg=PA380&ots=KLUIn19QsP&dq=uninitialized_copy%20exception&pg=PA380#v=onepage&q=uninitialized_copy%20exception&f=false)都说`uninitialized_copy`提供了强大的异常保证，但[其他](http://www.sgi.com/tech/stl/uninitialized_copy.html)C++ 引用[却没有](http://www.cplusplus.com/reference/std/memory/uninitialized_copy/)。

这实际上是由 C++ 保证的，还是不保证的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T10:33:53.410

是的，C++03 确实提供了这种保证，但**值得仔细检查**您的实现。

从我的机器上的草稿副本，20.4.4：

> 在以下算法中用作形式模板参数的所有迭代器都必须`operator*`返回一个定义了 operator& 的对象并返回一个指向 的指针`T`。
> 在算法`uninitialized_copy`中，形式模板参数`InputIterator`需要满足输入迭代器（24.1.1）的要求。
> 在以下所有算法中，形式模板参数`ForwardIterator`既要满足前向迭代器（24.1.3）的要求，又要满足可变迭代器（24.1）的要求，并且要求具有无异常的性质从有效迭代器的递增、赋值、比较或取消引用中抛出。
> **在以下算法中，如果抛出异常，则不会产生任何影响。**
> 
> *   `uninitialized_copy` （ETC。）

所以是的，这意味着您在[某些页面](http://en.cppreference.com/w/cpp/memory/uninitialized_copy_n)上看到的“可能的实现”可能是不正确的。

# php - Azure 上的 PHP 应用程序作为“控制台应用程序”

> ID：11985332
> 
> 赞同：0
> 
> 时间：2012-08-16T10:33:55.273
> 
> 标签：php, azure, websocket

有没有办法从 Windows Azure 上的命令行轻松运行 PHP 应用程序？

我有一个标准的 Web 应用程序（在 Azure 上），我想使用 WebSockets 进行通信。所以我需要在 Azure 上一直运行一个 WebSocket 服务器。

我使用需要“一直”运行的[Wrench 项目](https://github.com/varspool/Wrench/)来监听某个端口并处理来自 JavaScript 发送的 WebSocket 的消息。

再说一遍 -在 Azure 上运行*“持久”* PHP 应用程序有多容易？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:07:42.977

Sandrino 的回答很好，但我更喜欢[ProgramEntryPoint](http://msdn.microsoft.com/en-us/library/windowsazure/gg557552.aspx#ProgramEntryPoint)来做这种事情。后台任务的问题在于（除非您自己构建一些东西）没有任何东西可以监控它。使用`ProgramEntryPoint`，Windows Azure 将监视该进程，如果它因任何原因退出，角色实例将重新启动。

**编辑**：

Sandrino 指出 PHP 程序并不是唯一运行的程序。（还有一个网站。）在这种情况下，我建议`Run()`在`WebRole.cs`. `Process.Start`它然后对它做一个`.WaitForExit()`。这样，如果进程退出，角色本身也会退出`Run()`，导致角色实例重新启动。有关示例，请参见[http://blog.smarx.com/posts/using-other-web-servers-on-windows-azure 。](http://blog.smarx.com/posts/using-other-web-servers-on-windows-azure)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:25:59.760

这是 Azure 上的 WebSockets 服务。- 实时 XSockets.NET

查看[http://live.xsockets.net](http://live.xsockets.net)，这是一种简单的入门方式，但这取决于您将在“服务器端”做什么。我提到的这项服务可以用作“消息”调度程序，以通知“客户”的变化等。嗯，换句话说，它是一种提升“常规”网络应用程序的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T11:04:03.557

为了将您的 PHP 脚本作为命令行应用程序运行，您应该使用[PHP CLI（命令行界面）](http://php.net/manual/en/install.windows.commandline.php)。

```
php.exe -f "yourWebSocketServce.php" -- -arg1 -arg2 -arg3 
```

现在，为了在 Windows Azure 中运行它，您需要定义一个运行此命令的[启动任务。](http://msdn.microsoft.com/en-us/library/windowsazure/hh124132.aspx)您会看到默认任务类型是**simple**，这意味着您的角色的启动将被阻止，直到任务完成。但是在您的情况下，在 PHP 中运行 WebSocket 将是一个阻塞过程，这就是您应该将类​​型更改为**背景**的原因（这将确保实例在您的 WebSocket 服务器运行时继续启动）。

# jquery - 我们如何计算在一秒钟内调用 setInterval() 函数的次数

> ID：11985334
> 
> 赞同：1
> 
> 时间：2012-08-16T10:34:13.863
> 
> 标签：jquery

我正在学习 HTML 5 游戏编程。我遇到一个代码

```
var pingpong = {};
pingpong.pressedKeys = [];

$(function(){

    pingpong.timer = setInterval(gameloop,30);

    function gameloop() {
        movePaddles();

    } //end of gameloop()

}); //end of $(fn) 
```

然后作者说

```
We have a timer to execute some game-related code every 30 milliseconds, so this 
code is executed 33.3 times per second. 
```

我想问一下，每秒33.3次是怎么回事？我们如何计算它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:37:36.863

**1 秒**是**1000 毫秒**。

因此，如果代码每**30 毫秒**运行一次，则代码每秒执行 1000/30 = **33.3**次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:38:14.850

一秒是 1000 毫秒，并`setInterval(gameloop, 30)`确保代码每 30 毫秒运行一次，因此，`1000 / 30 = 33.3`.

# c# - 读取有效 XML 的单声道错误：“只能按顺序读取编码/裸格式”

> ID：11985337
> 
> 赞同：0
> 
> 时间：2012-08-16T10:34:24.937
> 
> 标签：c#, .net, mono, monodevelop, xmlreader

使用 Mono读取[此有效 XML](http://pastebin.com/XHKVuEkL)`System.Xml.XmlReader`时，出现以下错误：

```
System.InvalidOperationException: Read by order only possible for encoded/bare format
  at System.Xml.Serialization.ClassMap.GetElement (Int32 index) [0x00000] in <filename unknown>:0 
  at System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadMembers (System.Xml.Serialization.ClassMap map, System.Object ob, Boolean isValueList, Boolean readBySoapOrder) [0x00000] in <filename unknown>:0 
  at System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadClassInstanceMembers (System.Xml.Serialization.XmlTypeMapping typeMap, System.Object ob) [0x00000] in <filename unknown>:0 
  at System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadClassInstance (System.Xml.Serialization.XmlTypeMapping typeMap, Boolean isNullable, Boolean checkType) [0x00000] in <filename unknown>:0 
  at System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadObject (System.Xml.Serialization.XmlTypeMapping typeMap, Boolean isNullable, Boolean checkType) [0x00000] in <filename unknown>:0 
  at System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadObjectElement (System.Xml.Serialization.XmlTypeMapElementInfo elem) [0x00000] in <filename unknown>:0 
  at System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadMembers (System.Xml.Serialization.ClassMap map, System.Object ob, Boolean isValueList, Boolean readBySoapOrder) [0x00000] in <filename unknown>:0 
  at System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadClassInstanceMembers (System.Xml.Serialization.XmlTypeMapping typeMap, System.Object ob) [0x00000] in <filename unknown>:0 
  at System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadClassInstance (System.Xml.Serialization.XmlTypeMapping typeMap, Boolean isNullable, Boolean checkType) [0x00000] in <filename unknown>:0 
  at System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadObject (System.Xml.Serialization.XmlTypeMapping typeMap, Boolean isNullable, Boolean checkType) [0x00000] in <filename unknown>:0 
  at System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadRoot (System.Xml.Serialization.XmlTypeMapping rootMap) [0x00000] in <filename unknown>:0 
  at System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadRoot () [0x00000] in <filename unknown>:0 
  at System.Xml.Serialization.XmlSerializer.Deserialize (System.Xml.Serialization.XmlSerializationReader reader) [0x00000] in <filename unknown>:0 
```

问题是什么？

首先是什么`Read by order only possible for encoded/bare format`意思？

*Monodevelop 2.8.6.3 on Ubuntu 2012.04 运行平台 Mono / .NET 3.5
Mono JIT 编译器 2.10.8.1*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T10:40:58.093

单声道崩溃`<xsd:choice>`

请参阅[https://bugzilla.xamarin.com/show_bug.cgi?id=2907](https://bugzilla.xamarin.com/show_bug.cgi?id=2907)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T09:28:43.197

我已经发布了修复这个问题的补丁。它适用于主干版本（3.0.？）。如果你不想接触用户的单声道，你可以简单地将新的 System.Xml.dll 复制到你的程序所在的文件夹中。Mono 将使用您的 dll 而不是用户的。

该补丁附加到此错误：[https ://bugzilla.xamarin.com/show_bug.cgi?id=2907](https://bugzilla.xamarin.com/show_bug.cgi?id=2907)

# perl - 如何从 URL 读取和存储电子表格

> ID：11985338
> 
> 赞同：-4
> 
> 时间：2012-08-16T10:34:24.947
> 
> 标签：perl

> **可能重复：**
> [使用 Perl 下载文件](https://stackoverflow.com/questions/3191950/download-files-with-perl)

我是 Perl 的新手，我需要访问一个 url 来读取和存储 url 中存在的 excel 文件，即 url 的类型为 www.abc.com/xyz.xls。你能提供一个简单的例子吗？我在工作中迫切需要它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T10:45:04.583

要下载文件，请使用 LWP::Simple：

```
use LWP::Simple qw(getstore);
getstore( "http://www.example.com/foo.xls", "foo.xls" ); 
```

这就是下载文件所需的全部内容。 **更新：**无法正常工作？以下是添加一些错误处理的方法：

```
use strict;                     #standard good practice
use warnings;                   #ditto
use LWP::Simple qw(getstore);
use HTTP::Status;               #Get the HTTP error messages

my $status = getstore( "http://www.example.com/foo.xls", "foo.xls" );
print status_message($status); 
```

如果您需要在 Perl 中访问文件的内容，这有点复杂。查看[`Spreadsheet::ParseExcel`](http://search.cpan.org/~kwitknr/Spreadsheet-ParseExcel-0.2603/ParseExcel.pm)或[`Win32::OLE`](http://search.cpan.org/~jdb/Win32-OLE-0.1709/lib/Win32/OLE.pm)。

# javascript - 在 JavaScript 中从数组中获取最大值和最小值

> ID：11985341
> 
> 赞同：56
> 
> 时间：2012-08-16T10:34:41.420
> 
> 标签：javascript, jquery, arrays, position

我正在从数据属性创建以下数组，我需要能够从中获取最高和最低值，以便稍后将其传递给另一个函数。

```
var allProducts = $(products).children("li");
prices = []
$(allProducts).each(function () {
    var price = parseFloat($(this).data('price'));
    prices[price] = price;
});
console.log(prices[0]) <!-- this returns undefined 
```

我的列表项看起来像这样（为了便于阅读，我已经减少了）：

```
<li data-price="29.97"><a href="#">Product</a></li>
<li data-price="31.00"><a href="#">Product</a></li>
<li data-price="19.38"><a href="#">Product</a></li>
<li data-price="20.00"><a href="#">Product</a></li> 
```

一个关于价格的快速 console.log 向我展示了我的数组，该数组似乎已排序，因此我可以获取我假设的第一个和最后一个元素，但目前数组中的名称和值是相同的，所以每当我尝试执行价格 [0 ]，我得到*未定义*

```
[]
19.38   19.38
20.00   20.00
29.97   29.97
31.00   31.00 
```

感觉这是一个愚蠢的简单问题，所以请善待:)

* * *

## 回答 #1

> 赞同：169
> 
> 时间：2012-08-16T10:58:21.407

要获取数组中的最小值/最大值，您可以使用：

```
var _array = [1,3,2];
Math.max.apply(Math,_array); // 3
Math.min.apply(Math,_array); // 1 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-16T10:36:13.550

为什么不将其存储为价格数组而不是对象？

```
prices = []
$(allProducts).each(function () {
    var price = parseFloat($(this).data('price'));
    prices.push(price);
});
prices.sort(function(a, b) { return a - b }); //this is the magic line which sort the array 
```

这样你就可以

```
prices[0]; // cheapest
prices[prices.length - 1]; // most expensive 
```

请注意，您可以`shift()`分别`pop()`获取最低和最高价格，但它会从数组中扣除价格。

更好的选择是使用下面的 Sergei 解决方案，分别使用`Math.max`和`min`。

编辑：

我意识到如果你有类似`[11.5, 3.1, 3.5, 3.7]`as的东西`11.5`被视为字符串，并且会出现在字典顺序**之前**，那将是错误的`3.x`，你需要传入自定义排序函数以确保它们确实被视为浮点数：

```
prices.sort(function(a, b) { return a - b }); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-08-21T08:26:02.020

而不是 .each，另一种（可能更简洁）获取所有这些价格的方法可能是：

```
var prices = $(products).children("li").map(function() {
    return $(this).prop("data-price");
}).get(); 
```

此外，您可能需要考虑过滤数组以消除空或非数字数组值，以防它们应该存在：

```
prices = prices.filter(function(n){ return(!isNaN(parseFloat(n))) }); 
```

然后使用上面谢尔盖的解决方案：

```
var max = Math.max.apply(Math,prices);
var min = Math.min.apply(Math,prices); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-11-24T16:31:07.390

```
arr = [9,4,2,93,6,2,4,61,1];
ArrMax = Math.max.apply(Math, arr); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-12-10T10:37:20.973

如果您有“分散”（不在数组内）值，您可以使用：

```
var max_value = Math.max(val1, val2, val3, val4, val5); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-01-03T09:16:06.320

**[使用lodash](https://lodash.com/docs/4.17.11#over)**查找数组中的最大和最小数字。

```
var array = [1, 3, 2];
var func = _.over(Math.max, Math.min);
var [max, min] = func(...array);
// => [3, 1]
console.log(max);
console.log(min);
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.11/lodash.js"></script>
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-04-24T10:22:51.490

使用它，它适用于静态数组和动态生成的数组。

```
var array = [12,2,23,324,23,123,4,23,132,23];
var getMaxValue = Math.max.apply(Math, array ); 
```

当我尝试从下面的代码中查找最大值时遇到了问题

```
$('#myTabs').find('li.active').prevAll().andSelf().each(function () {
            newGetWidthOfEachTab.push(parseInt($(this).outerWidth()));
        });

        for (var i = 0; i < newGetWidthOfEachTab.length; i++) {
            newWidthOfEachTabTotal += newGetWidthOfEachTab[i];
            newGetWidthOfEachTabArr.push(parseInt(newWidthOfEachTabTotal));
        }

        getMaxValue = Math.max.apply(Math, array); 
```

我在`'NAN'`使用时得到

```
 var max_value = Math.max(12, 21, 23, 2323, 23); 
```

用我的代码

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-05-09T08:23:53.313

如果需要在不使用数学库或排序逻辑的情况下找到解决方案，以下解决方案可能会有所帮助。

要在 javascript 中找到最大值，

```
var max = -Infinity;
 for (var i = 0; i < arr.length; ++i) {
    if (arr[i] < max) continue;
    if (arr[i] > max) {
        max = arr[i];
 }
}
return max; 
```

要找到最小值，

```
 var min = +Infinity;
 for (var i = 0; i < arr.length; ++i) {
    if (arr[i] > min) continue;
    if (arr[i] < min) {
        min = arr[i];
 }
}
return min; 
```

要查找所有出现的最大值，（更改比较以获取所有最小值）

```
 var max = -Infinity, result = [];
  for (var i = 0; i < arr.length; ++i) {
   if (arr[i] < max) continue;
   if (arr[i] > max) {
      result = [];
      max = arr[i];
    }
   result.push(max);
  }
 return result; // return result.length to return the number of occurrences of max values. 
```

# asp.net-mvc - jQuery 从未调用过

> ID：11985342
> 
> 赞同：1
> 
> 时间：2012-08-16T10:34:43.133
> 
> 标签：asp.net-mvc, jquery

我正在尝试在此处实施此问题中提供的解决方案： [如何通过 ActionLink 传递模型值](https://stackoverflow.com/questions/11956831/how-to-pass-model-value-through-actionlink/11957013#comment15960860_11957013)

所以在我看来，我有一个动作链接

```
@Html.ActionLink("Look up registration", "RegLookup", "Vehicle",  new {@id="check"},null) 
```

在一个 Javascript 文件中，我有：

```
$(function () 
{
    $("#check").click(function (e) {
        e.preventDefault();
} 
```

我已将功能缩减为仅阻止操作链接的默认操作。

在视图中，我还引用了 java 脚本文件

```
<script src="~/Scripts/jquery-1.6.2.min.js" type="text/javascript"></script>
<script src="~/Scripts/jquery.unobtrusive-ajax.js" type="text/javascript"></script>
<script src="~/Scripts/GetRegistrationPlate.js" type="text/javascript"></script> 
```

但是，当我单击操作链接时，默认方法会继续触发。我可能错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:40:37.000

一方面有很多语法错误。尝试这个

```
$(function () {
    $("#check").click(function (e) {
        e.preventDefault();
        return false;
    });
}); 
```

编辑：另外，将 ActionLink 更改为

```
@Html.ActionLink("Look up registration", "RegLookup", "Vehicle", new { @id = "check" }, new { @id = "check" }) 
```

第一个 id 用于路由，第二个 id 用于 html 元素。

# git - 合并后的Git rebase对已删除的文件感到困惑

> ID：11985346
> 
> 赞同：8
> 
> 时间：2012-08-16T10:34:57.840
> 
> 标签：git, git-merge, git-rebase

我的 Git 存储库有两个文件，`alpha`和`beta`，内容相同。

如果我`alpha`在我的主分支中删除，并在我的功能分支中对其进行编辑，那么当我将主分支合并到功能时，我会收到有关冲突的警告。假设我通过删除来解决这个问题`alpha`。

如果我随后使用 将我的功能分支重新设置为 master `git rebase master`，`alpha`则会删除，但我`alpha`在功能分支上所做的更改现在将应用于`beta`！我收到一个冲突警告，但它很高兴通过自动合并解决，而不会阻止提交让我查看。

有趣的是，如果我执行 a`git rebase -i`并且只接受默认值，`beta`则不会对其进行编辑，并且我可以解决我在合并时解决的相同冲突。

那么三个相关的问题：

1.  为什么 Git 认为我应用于一个文件的更改应该应用于另一个文件，而另一个文件尚未被任何提交编辑？
2.  我怎样才能避免这种情况？
3.  为什么即使我采用默认选项，交互式 rebase 的行为也会有所不同？

我在 Win7 上的 Cygwin 上运行 Git 1.7.9。[如果有人想自己查看详细信息，我已经在 pastebin 上](http://pastebin.com/Lfb9jRy0)放了一个成绩单，以`git init`在一个空目录中显示此内容（由于篇幅原因，我不在这里发布）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-16T10:40:05.317

从[文档中`git-rebase`](http://git-scm.com/docs/git-rebase)：

> -m
> --merge
> 使用合并策略来变基。当使用递归（默认）合并策略时，这允许 rebase 知道上游端的重命名。

当一个文件被删除时，Git 会考虑一个重命名的候选者，并尝试将重新定位的补丁应用于相应的重命名文件。听起来你的情况可能是一个糟糕的猜测。

您可以使用该`-m`选项来选择不同的合并策略。例如，`resolve`合并策略可以通过自动检测重命名来避免这个问题（[`git-merge`](http://git-scm.com/docs/git-merge)有关合并策略的详细信息，请参阅）。

# c# - 使用streamreader char by char读取和输出文本文件

> ID：11985348
> 
> 赞同：3
> 
> 时间：2012-08-16T10:34:58.637
> 
> 标签：c#

我要做的是读取文件 a.txt 并在一行中输出每个字符更清楚，因为我是初学者。谢谢

```
namespace ConsoleApplication13
{
    class Program
    {
        static void Main(string[] args)
        {
            using (StreamReader r = new StreamReader("a.txt"))
            {

               string @char;
               while((@char = r.ReadBlock() != null))
                foreach(char i in @char)
                {
                    Console.WriteLine(i);

                }

            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T10:44:51.780

> 我想读取文件并按字符输出所有文件字符，每个字符都在新行中

好的; 有很多方法可以做到这一点；最简单的是（对于小文件）：

```
string body = File.ReadAllText("a.txt");
foreach (char c in body) Console.WriteLine(c); 
```

用于`ReadBlock`以块（而不是行）处理文件：

```
using (StreamReader r = new StreamReader("a.txt"))
{
    char[] buffer = new char[1024];
    int read;
    while ((read = r.ReadBlock(buffer, 0, buffer.Length)) > 0)
    {
        for (int i = 0; i < read; i++)
            Console.WriteLine(buffer[i]);
    }
} 
```

这一次读取*最多*1024 个字符的块，然后写出我们读取的任何内容，每个字符在一个新行上。该变量`read`告诉我们在该迭代中读取了多少个字符；`read > 0`测试（稍微隐藏，但它就在那里）询问“我们是否已到达文件末尾？” -`ReadBlock`最后将返回 0。

# regex - 正则表达式排除精确的多词匹配

> ID：11985353
> 
> 赞同：1
> 
> 时间：2012-08-16T10:35:26.453
> 
> 标签：regex

我需要一个正则表达式来排除不区分大小写的完全匹配（整个字符串）。如果整个字符串是“United States”（不区分大小写），那么我需要拒绝该字符串。如果只有部分字符串包含“United States”（不区分大小写），那就没问题了。

我还需要字符串的最小长度为 6 个字符，如果少于 6 个则需要拒绝该字符串。

由于单词之间的空格，我遇到了麻烦，因为我只需要排除该字符串的完全匹配而不是部分匹配。

这是针对 vBulletin 的，我只允许此表单使用单行正则表达式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T10:54:39.367

您的要求仍然有点模糊，但请尝试

```
^(?i)(?!United States$).{6,}$ 
```

[在 Regexr 上](http://regexr.com?31rod)查看

`^`锚定到字符串的开头

`$`锚定到字符串的末尾

`(?i)`内联选项，使正则表达式匹配不区分大小写

`(?!United States$)`负前瞻，使整个表达式失败，如果字符串从头到尾只有“美国”

`.{6,}`匹配 6 个或更多字符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T11:44:56.767

为什么是正则表达式？

我会做（在 perl 中）：

```
reject() if (uc($str) eq 'UNITED STATES' or length($str) < 6); 
```

# excel - 在 excel 列中应用正则表达式进行验证

> ID：11985357
> 
> 赞同：-2
> 
> 时间：2012-08-16T10:35:45.093
> 
> 标签：excel, excel-2007

我想在 excel.so 上应用正则表达式验证，以便如果有人在单元格中输入错误的值，则应显示错误消息。例如，如果我在有效条目的列上应用正则表达式“(\d{10},)*\d{10}”，并且如果有人在该列的单元格中输入值“asdfgh”，则错误消息应该是抛出

我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:46:59.263

在数据 > 数据验证中选择“个性化”，您可以输入公式。它的工作原理很像条件格式的公式。您可以在那里使用任何 Excel 函数。

至于正则表达式部分，我很确定 Excel 中没有集成正则表达式。您可能需要查看插件。

编辑：似乎有一个 VBA 模块可用于正则表达式支持：

[http://support.microsoft.com/kb/818802/en-us](http://support.microsoft.com/kb/818802/en-us)

请注意，我花了几秒钟才找到此信息。谷歌是你的朋友。

# ant - 如何配置 Jenkins 以使用 ant 和自定义参数构建项目

> ID：11985358
> 
> 赞同：4
> 
> 时间：2012-08-16T10:35:44.737
> 
> 标签：ant, jenkins

使用 ant 构建下一个项目版本的程序太多了。该例程位于几个属性文件中，必须在运行 ant 任务之前对其进行编辑。我将 Jenkins 视为构建构建（包括夜间构建）的系统，但我在更改属性时遇到了问题。

是否可以（如果是，我该怎么做）在构建之前在 Jenkins 配置中键入参数，以便将它们传递给 ant？

我真正的意思是以下模式（我在手动构建中使用）：

*   有 2 个属性文件，其中包含有关构建版本、src 目标、通知新构建的电子邮件等数据。

*   Ant 任务中使用相应属性的键，这些属性在构建之前手动更改。

*   一些属性由 Java util 读取并在构建期间用于它们自己的部分。

*   在 build.xml 中还导入了 3 或 4 个 ant XML，这些 xml 还从提到的文件中读取属性。

我想做的是：

*   更改 Jenkins 中的关键属性

*   新闻建设项目

*   我的数据将覆盖属性文件中的数据，或者将作为 ant vars 值直接传递给 ant 的任务。

*   结果，我收到了带有相应通知的新版本（它们是通过 ant 制作的）

是否有允许通过 Jenkins 使这种模式工作的机制？

先感谢您。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T10:47:36.863

在 Jenkins 中，您可以使用[参数化构建](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Build)功能来指定需要替换到构建中的那些参数。

例如，如果指定一个名为的参数`server`，当单击“立即构建”时，输入`test`，将使用您可以访问的环境变量执行构建`${server}`。

然后，在您的“Invoke Ant”构建步骤中，如果您按下`Advanced...`，则会显示一个“Properties”字段。在这里可以输入`my.ant.property=${server}`。
这相当于调用`ant -Dmy.ant.property=${server}`，并将扩展为`ant -Dmy.ant.property=test`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T09:01:05.870

[另一种选择：使用此Env 插件](https://wiki.jenkins-ci.org/display/JENKINS/EnvInject+Plugin)为构建范围设置环境变量。因此，如果您使用的属性是环境变量或者可以设置为环境变量，那么您想使用这个。虽然它可能需要在更改构建脚本方面付出一些努力，但它可能是一个不错的选择：

**Q :**为什么我要使用这个，因为我已经有参数化的构建插件

**A :**因为参数化构建插件需要人工交互，如果有超过 1 个选择。例如为版本 1 或版本 2 或测试分支构建。

在 Env 插件中，您可以为每个选项设置一次属性，然后为每个选项创建一个相应的作业。然后只需安排工作，从而消除人为因素。

# wordpress - Woocommerce 产品搜索未检查“product_tag”？

> ID：11985363
> 
> 赞同：2
> 
> 时间：2012-08-16T10:36:08.123
> 
> 标签：wordpress, search, tags, product, woocommerce

似乎 WooCommerce 产品的搜索功能不检查“product_tag”分类术语，也不检查 SKU 字段？我将 SKU 作为产品标签添加到它们各自的产品中，但是当我搜索 SKU 时它仍然没有返回任何内容......如何使搜索功能检查 product_tag 条款？我已经尝试了很多很多东西，从添加 tax_query 到 pre_get_post 过滤器，到一个全新的 WP_Query 循环，它只是因为某种原因无法搜索 product_tags ......那么产品标签的意义何在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:37:18.653

我已经尝试了 woo 和其他人的代码来搜索 SKU，但没有结果。但是，从存储库下载的插件 search-everything 可以完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-11T09:06:29.307

> **我得到了按 SKU 代码搜索产品的解决方案。**

太简单了，把下面的代码粘贴到function.php中就可以看到搜索结果的变化了。

```
function search_by_id_only( $search, &$query_vars ) {
    global $wpdb, $pagenow;

    if ( 'edit.php' == $pagenow || empty($search) ) {
        return $search;
    }

    $args = array(
        'posts_per_page'  => -1,
        'post_type'       => 'product',
        'meta_query' => array(
            array(
                'key' => '_sku',
                'value' => $query_vars->query['s'],
                'compare' => 'LIKE'
            )
        )
    );
    $posts = get_posts( $args );
    if ( empty( $posts ) ) return $search;
    $get_post_ids = array();
    foreach($posts as $post){
        $get_post_ids[] = $post->ID;
    }
    if ( sizeof( $get_post_ids ) > 0 ) {
        $search = str_replace( 'AND (((', "AND ((({$wpdb->posts}.ID IN (" . implode( ',', $get_post_ids ) . ")) OR (", $search);
    }
    return $search;
}
add_filter( 'posts_search', 'search_by_id_only', 999, 2 ); 
```

# asp.net-mvc-3 - 如何将 ASP.NET MVC 3 应用程序连接到 SQL Server 2008 数据库

> ID：11985373
> 
> 赞同：1
> 
> 时间：2012-08-16T10:36:30.787
> 
> 标签：asp.net-mvc-3, sql-server-2008

我是 ASP.NET MVC 应用程序的新手用户。我正在尝试学习 mvc，但无法将数据库连接到我的应用程序。每当我要添加带有模型的控制器时，它都会显示图像中显示的错误![在此处输入图像描述](../Images/cea0a95e41583ec5212f1ca679c87e3d.png)

我的服务器名称是`winultimate-PC`，数据库名称是`content`

所以请帮助我如何将这个应用程序与 SQL Server 连接起来。

我还附加了我想附加我的数据库的模型类

提前致谢

![在此处输入图像描述](../Images/2c88dcefeadd0cc1b9cb7911fdc2202c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:59:46.083

您缺少`[Key]`焊机实体中的注释。

```
[Key]
public int ID 
{ 
    get; 
    set; 
} 
```

您还需要添加以下`using`语句：

`System.ComponentModel.DataAnnotations;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:49:13.570

以下链接提供了有关如何将 MS SQL SERVER 2008 数据库连接到 asp.net MVC 应用程序的详细信息

[http://www.w3schools.com/aspnet/mvc_database.asp](http://www.w3schools.com/aspnet/mvc_database.asp)

# jakarta-ee - 图像加密

> ID：11985377
> 
> 赞同：0
> 
> 时间：2012-08-16T10:36:42.480
> 
> 标签：jakarta-ee

输入图像为 .jpeg 格式。我正在逐像素读取图像。然后通过硬编码键值（例如 101）对每个像素执行 X-OR 运算，并将损坏的像素写入其他文件。同时尝试取回原始图像图像，图像不一样它会失真。我怎样才能得到原始图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:45:27.610

JPEG 图像格式使用有损压缩算法。这意味着当您保存“加密”图像时会丢失一些信息，这可能会导致失真。为避免失真，请使用未压缩或无损压缩的图像格式，例如 PNG。

# android - 将 DISTINCT 子句与 android 内容提供程序一起使用时出现异常

> ID：11985383
> 
> 赞同：2
> 
> 时间：2012-08-16T10:37:10.420
> 
> 标签：android, android-contentprovider

当我使用下面的代码时，我遇到了异常。

```
String  contactId;  // contactId retrieved from Contacts content provider
private static final Uri        PURI  = ContactsContract.CommonDataKinds.Phone.CONTENT_URI; 
private static final String     PCID  = ContactsContract.CommonDataKinds.Phone.CONTACT_ID;
private static final String     PNUM  = ContactsContract.CommonDataKinds.Phone.NUMBER;
private static final String     PTYPE = ContactsContract.CommonDataKinds.Phone.TYPE;
ContentResolver cr = getContentResolver();
Cursor puri = cr.query(PURI, new String[]{"DISTINCT "+PNUM, PTYPE}, PCID+"="+contactId, null, null); 
```

如果我在上面的代码中删除`"DISTINCT "+`它工作正常。但我需要 DISTINCT 子句，如何解决这个问题。

如果有人成功解决了这个问题，请为我的问题提供解决方案。

# jquery - 谷歌地图 | jQuery | 缩放级别产生错误

> ID：11985385
> 
> 赞同：0
> 
> 时间：2012-08-16T10:37:29.400
> 
> 标签：jquery, google-maps

我在我的页面中创建了一个谷歌地图对象，我想通过在文本框中输入缩放级别来更改谷歌地图的缩放级别。

我使用的代码如下：

```
var zoom = parseInt($('#gm_zoom').val(), 10);
map.setZoom(zoom); 
```

`#gm_zoom`我输入缩放级别的文本输入在哪里，并且是`map`我的谷歌地图对象。

你看到这段代码有什么问题吗？当我取消注释这部分代码时，我在 Chrome 控制台中得到以下信息：

```
<error>
    Vd
    Q.trigger
    Af
    H.set
    (anonymous function)
    Af
    (anonymous function)
    Q.trigger
    Af
    (anonymous function)
    Q.trigger
    Af
    H.set
    ...
    (repeated many times)
    ...
    (anonymous function)
    gmap_build_sc
    manage_events
    Q.trigger
    Af
    H.set
    (anonymous function) 
```

关于如何解决该问题的任何想法？

**注意**：在同一个函数中，我尝试更新缩放级别，我还更改了地图类型、纬度和经度，没有错误。只有上面的代码会产生问题！

# macos - 在osx上双击不执行二进制文件

> ID：11985389
> 
> 赞同：1
> 
> 时间：2012-08-16T10:37:36.450
> 
> 标签：macos, executable

我已经从其他人的源代码编译了一个可执行文件，但只有当我启动一个 shell 并 cd 到正确的目录然后到`./executable.name`. 但是，如果我双击可执行文件，我会收到此错误“没有设置打开文档的应用程序”。

我试过这样做`sudo chmod -x executable.name`，但没有这样做。

有没有人认识到这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:00:07.913

我发现问题是`.`文件名中有一个混淆了系统。我已经删除了`.`它现在运行良好

# c# - 在 sharepoint 中创建文档的编辑链接

> ID：11985393
> 
> 赞同：6
> 
> 时间：2012-08-16T10:37:41.260
> 
> 标签：c#, sharepoint, sharepoint-2010

我在 sharepoint 中有一个文档库，用于存储 word 文档。

如果我点击文档的链接，我会看到一个对话框，上面写着“你想以只读或编辑模式等方式打开这个文件”，并且可以在编辑模式下打开它，更改它，直接保存在 word 中，更改保存在文档库。

文档库中文件的链接如下所示：

```
<a onfocus="OnLink(this)" 
   href="/test/DocLib2/wordtest.docx" 
   onmousedown="return VerifyHref(this,event,'1','SharePoint.OpenDocuments','')"     
   onclick="return DispEx(this,event,'TRUE','FALSE','FALSE',
            'SharePoint.OpenDocuments.3','1', 'SharePoint.OpenDocuments',
            '','','','1','0','0','0x7fffffffffffffff','','')"
>wordtest</a> 
```

如何在我拥有文件和文档库名称的自己的 Web 部件中创建此链接？如果不只是复制上面的代码，那不是一个好主意......

是否有一些“官方”方法来实现这一目标？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-09T20:16:01.200

不幸的是，似乎没有更好的选择。但至少你可以弄清楚函数定义是什么。DispEx 函数在 core.js 文件中定义（但在 core.debug.js 中更容易阅读）。两者都在 14\Templates\Layouts\1033 目录中。

这是函数定义：

```
function DispEx(ele, objEvent, fTransformServiceOn, fShouldTransformExtension,
    fTransformHandleUrl, strHtmlTrProgId, iDefaultItemOpen, strProgId, strHtmlType, 
    strServerFileRedirect, strCheckoutUser, strCurrentUser, strRequireCheckout, 
    strCheckedoutTolocal, strPermmask) 
```

这是我对它们含义的猜测。请随时添加评论以纠正任何错误或遗漏：

*   ele - [obj] 元素
*   objEvent - [obj] 事件对象
*   fTransformServiceOn - [bool]（未知功能）默认为 True
*   fShouldTransformExtension - [bool]（未知功能）默认为 False
*   fTransformHandleUrl - [bool]（未知功能）默认为 False
*   strHtmlTrProgId - [字符串] ActiveXControl 的名称，尝试将默认值加载到 SharePoint.OpenDocuments.3
*   iDefaultItemOpen - [int] 默认编辑或读取指示符默认为 1
*   strProgId - ActiveX 控件的 [字符串] 名称
*   strHtmlType [string]（未知功能）默认为空
*   strServerFileRedirect - [字符串]（未知功能）
*   strCheckoutUser [string] 签出文档的用户 ID
*   strCurrentUser - [string] 当前用户的 ID
*   strRequireCheckout - [字符串] 指示是否强制结帐
*   strCheckedoutTolocal - [字符串] 指示是否使用本地草稿文件夹
*   strPermmask - 当前用户的 [string] 权限掩码默认为 0x7fffffffffffffff

在使用字符串和整数表示布尔值方面显然存在一些不一致之处。你的代码有 17 个参数也很奇怪，但我只能找到一个有 15 个参数的函数定义，所以我不确定最后两个空字符串是做什么用的。其中一些是 JavaScript 的本质，但它在 Microsoft 方面看起来也很草率。

这并不能真正回答问题，希望它可以帮助您或其他人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-23T07:59:21.653

Chad Schroeder 发表了一篇关于如何在 C# 中构造 javascript 函数调用的博客文章。考虑到一些设置，例如强制结帐和在浏览器或客户端中打开。

```
private string GetFileViewScript(SPFile file)
    {
        string text = SPUtility.MapToControl(SPContext.Current.Web, file.Name, string.Empty);
        string text2 = (file.Item.ParentList.DefaultItemOpen == DefaultItemOpen.Browser) ? "1" : "0";
        SPFieldLookupValue sPFieldLookupValue = file.Item["CheckedOutUserId"] as SPFieldLookupValue;
        string scriptLiteralToEncode = (sPFieldLookupValue == null) ? string.Empty : sPFieldLookupValue.LookupValue;
        string text3 = (SPContext.Current.Web.CurrentUser != null) ? SPContext.Current.Web.CurrentUser.ID.ToString(CultureInfo.InvariantCulture) : string.Empty;
        string text4 = file.Item.ParentList.ForceCheckout ? "1" : "0";

        return string.Format(CultureInfo.InvariantCulture, "return DispEx(this,event,'{0}','{1}','{2}','{3}','{4}','{5}','{6}','{7}','{8}','{9}','{10}','{11}','{12}')", new object[]
        {
            "TRUE",
            "FALSE",
            "FALSE",
            text,
            text2,
            text,
            string.Empty,
            string.Empty,
            SPHttpUtility.EcmaScriptStringLiteralEncode(scriptLiteralToEncode),
            text3,
            text4,
            (string)file.Item["IsCheckedoutToLocal"],
            (string)file.Item["PermMask"]
        });
    } 
```

[在指向 SharePoint 文档的链接中使用 DispEx](http://chadschroeder.blogspot.be/2013/09/using-dispex-in-link-to-sharepoint.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T12:43:44.987

我最终添加了这段代码

```
return DispEx(this,event,'TRUE','FALSE','FALSE', 
'SharePoint.OpenDocuments.3','1', 'SharePoint.OpenDocuments','','','',
'1','0','0','0x7fffffffffffffff','','') 
```

到我的链接标签，因为我找不到更好的解决方案。

如果有，请告诉我。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-21T07:41:30.140

DispEx 在 Chrome 中不起作用，除非链接位于一个 div 中，该 div 包含名为 app 的属性中的文档类型：

```
<div class="ms-vb  itx" ctxname="ctx19" id="2" app="ms-word">
    <a onfocus="OnLink(this)" 
       href="/test/DocLib2/wordtest.docx" 
       onmousedown="return VerifyHref(this,event,'1','SharePoint.OpenDocuments','')"     
       onclick="return DispEx(this,event,'TRUE','FALSE','FALSE',
            'SharePoint.OpenDocuments.3','1', 'SharePoint.OpenDocuments',
            '','','','1','0','0','0x7fffffffffffffff','','')">wordtest</a>
    <span class="ms-newdocument-iconouter">
        <img class="ms-newdocument-icon" src="/_layouts/15/images/spcommon.png?rev=23" alt="new" title="new">
    </span>        
</div> 
```

您需要将其包装在这样的 div 中，并确保插入将打开文件的正确应用程序，或者通过查看文件扩展名来制作自己的列表：

```
$('.test_links').click(function(e) {
    e.preventDefault();
    if (!!window.chrome) {
        var extenstion = this.href.substr(this.href.lastIndexOf('.') + 1);
        var prefix = '';
        switch (extenstion) {
            case 'doc':
            case 'docx':
                prefix = 'ms-word:ofv|u|';
                break;
            case 'xls':
            case 'xlsx':
                prefix = 'ms-excel:ofv|u|';
                break;
        }
        window.location.href = prefix + this.href;
    } else {
        DispEx(this, e, 'TRUE', 'FALSE', 'FALSE', 'SharePoint.OpenDocuments.3', '0', 'SharePoint.OpenDocuments', '', '', '', _spPageContextInfo.userId + '', '0', '0', '0x7fffffffffffffff');
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T11:40:02.507

我不记得是否有官方的能力可以用 JavaScript COM 做到这一点，但你可以使用 ASP.NET HyperLink 控件来生成类似的链接。例如放入布局

```
<asp:HyperLink ID="EditHl" runat="server" Text="Edit document"/> 
```

在代码隐藏中

```
EditHl.Attributes["attribute name"] = "attribute value"; 
```

只需使用来自 OOTB 链接的相同值，但要更改

> /test/DocLib2/wordtest.docx

到您的文档的 URL。

# android - 用按钮交换 ViewPager 中的图像

> ID：11985396
> 
> 赞同：0
> 
> 时间：2012-08-16T10:37:53.393
> 
> 标签：android, android-viewpager

当用户按下此向左或向右按​​钮时，图像应根据 ViewPager 中的左侧或右侧交换，该按钮位于 ViewPager 之外。任何人都可以帮助我如何做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T20:46:54.143

这很简单，您需要在每个按钮的“onclick”上添加代码来执行此操作：

```
ViewPager mPager = new ViewPager(mContext);  //replace mContext with "this" if in activity
int newPosition = mPager.getCurrentItem() + 1;  //- 1 if is the left button
newPosition = newPosition < (mPager.getAdapter().getCount() - 1) ? newPosition : newPosition - 1;
//And again this is for right, for left you need to compare 'newPosition >= 0'
mPager.setCurrentItem(newPosition); 
```

# c++ - 指针指向 LSB 还是 MSB？

> ID：11985399
> 
> 赞同：15
> 
> 时间：2012-08-16T10:38:07.093
> 
> 标签：c++, c, pointers, void-pointers

如果我有以下代码：

```
int i = 5;
void * ptr = &i;
printf("%p", ptr); 
```

我会得到 i 的 LSB 地址还是 MSB？
平台之间的行为会有所不同吗？
C和C++之间有区别吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-17T11:01:28.970

考虑大小`int`为 4 个字节。总是`&i`会给你这 4 个字节的第一个地址。

如果架构是小端，那么低地址将具有如下所示的 LSB。

```
        +------+------+------+------+
地址 | 1000 | 1001 | 1002 | 1003 |
        +------+------+------+------+
价值 | 5 | 0 | 0 | 0 |
        +------+------+------+------+

```

如果架构是大端，那么低地址将具有如下所示的 MSB。

```
        +------+------+------+------+
地址 | 1000 | 1001 | 1002 | 1003 |
        +------+------+------+------+
价值 | 0 | 0 | 0 | 5 |
        +------+------+------+------+

```

所以`&i`会给出`i`if little endian的LSB地址，或者给出`i`if big endian的MSB地址

在混合端模式下，将为每个任务动态选择小端或大端。

下面的逻辑会告诉你字节序

```
int i = 5; 
void * ptr = &i; 
char * ch = (char *) ptr;

printf("%p", ptr); 
if (5 == (*ch))
    printf("\nlittle endian\n");
else
    printf("\nbig endian\n"); 
```

这种行为对于两者都是相同`c`的`c++`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-16T10:41:48.627

> 我会得到 i 的 LSB 地址还是 MSB？

这取决于平台：它将是*最低寻址字节*，可能是 MSB 或 LSB，具体取决于您平台的*字节序*。

虽然这没有直接写在标准中，但这是第 6.3.2.3.7 节所暗示的内容：

> 当指向对象的指针转换为指向字符类型的指针时，结果指向对象的最低寻址字节。

* * *

> 平台之间的行为会有所不同吗？

是的

* * *

> c和c ++之间有区别吗？

否：它在 C 和 C++ 中都依赖于平台

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-16T10:42:25.550

这取决于平台的字节顺序；如果是 little-endian 平台，您将获得指向 LSB 的指针，如果是 big-endian 平台，它将指向 MSB。甚至还有一些混合端平台，在这种情况下，~~愿上帝怜悯你，~~检查编译器/CPU 的特定文档。

不过，您可以在运行时执行快速检查：

```
uint32_t i=0x01020304;
char le[4]={4, 3, 2, 1};
char be[4]={1, 2, 3, 4};
if(memcmp(&i, le, 4)==0)
    puts("Little endian");
else if(memcmp(&i, be, 4)==0)
    puts("Big endian");
else
    puts("Mixed endian"); 
```

顺便说一句，要打印指针，您必须使用`%p`占位符，而不是`%d`.

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-16T10:42:19.387

ptr 存储整数对象的起始字节的地址。这是存储最高有效字节还是最低有效字节的位置取决于您的平台。一些奇怪的平台甚至使用混合字节序，在这种情况下它既不是 MSB 也不是 LSB。

在这方面，C 和 C++ 没有区别。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-16T10:42:37.750

它指出的是我的 VC++ 2010 和 Digital Mars 的 MSB。但它与字节序有关。

这个问题的答案为您提供了一些信息： [Detecting endianness programmatically in a C++ program](https://stackoverflow.com/questions/1001307/detecting-endianness-programmatically-in-a-c-program)。

在这里，用户“none”说：

```
#define BIG_ENDIAN      0
#define LITTLE_ENDIAN   1
 int TestByteOrder()
{
   short int word = 0x0001;
   char *byte = (char *) &word;
   return(byte[0] ? LITTLE_ENDIAN : BIG_ENDIAN);
} 
```

这提供了一些字节顺序信息

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-16T10:58:43.647

> > 那么我得到i的LSB地址还是MSB？

这取决于机器和操作系统。在大端机器和操作系统上，您将获得 MSB，在小端机器和操作系统上，您将获得 LSB。

Windows 总是小端。x86 上的所有（大多数？）Linux/Unix 风格都是小端。摩托罗拉机器上的 Linux/Unix 是大端。x86 机器上的 Mac OS 是小端。在 PowerPC 机器上它是大端。

> > 那么它在平台之间的行为不同吗？是的，它会。
> > 
> > c和c ++之间有区别吗？可能不是。

# asp.net - 有没有更好的方法或ajax控制（用于日历）

> ID：11985404
> 
> 赞同：0
> 
> 时间：2012-08-16T10:38:26.190
> 
> 标签：asp.net, .net, ajax, ajaxcontroltoolkit

我需要在文本框中显示日历。

> 这可以使用 ajaxToolkit: Calendar 控件来实现。
> 
> 我可以使用 FilteredTextBoxExtender 来确保它只输入有效字符。
> 
> 我也可以使用 jQuery 来确保日期仅为有效日期（13/13/20123 是无效日期）。

但是有没有更好的方法或 ajax 控件（在工具包中）呢？

注意：我正在寻找使用 ajax 控制工具包的解决方案。对于我的项目，不允许使用 jQuery-UI。

```
<ajaxToolkit:Calendar runat="server"
TargetControlID="Date1"
CssClass="ClassName"
Format="MMMM d, yyyy"
PopupButtonID="Image1" />

<ajaxToolkit:FilteredTextBoxExtender ID="ftbe" runat="server"
TargetControlID="txtDate"         
FilterType="Custom, Numbers"
ValidChars="1234567890/" /> 
```

参考：

1.  [http://forums.asp.net/p/1825929/5076051.aspx/1?Re+How+to+disable+future+dates+in+ajax+calendar+extender+](http://forums.asp.net/p/1825929/5076051.aspx/1?Re+How+to+disable+future+dates+in+ajax+calendar+extender+)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:46:57.517

**尝试使用 jQuery UI 日期选择器：**

```
<script>
    $(function() {
        $( "#datepicker" ).datepicker();
    });
</script>

<div class="demo">
   <p>Date: <input id="datepicker" type="text"></p>
</div> 
```

[jQuery UI 日期选择器](http://jqueryui.com/demos/datepicker/)

# javascript - 通过 https 服务的 AJAX 调用不起作用

> ID：11985407
> 
> 赞同：0
> 
> 时间：2012-08-16T10:38:35.177
> 
> 标签：javascript, jquery, node.js

我正在开发一个 node.js REST 服务，该服务被一个带有 javascript 的 web 客户端使用。我目前正在通过 HTTP 提供此服务。**现在我已更改服务器以通过HTTPS**提供它们，并且 ajax 调用已停止工作。

当我将服务器设置为通过 http 时，此客户端代码有效（显示“成功！”警报）：

```
<html>
<head>
    <title>Client</title>
    <script src="http://code.jquery.com/jquery-1.8.0.min.js"></script>
    <script type="text/javascript">
        $(function () {
            $("#go").click(function (e) {
                $.ajax({
                    type: "GET", 
                    url: "http://localhost:3010/users", 
                    data: { username: "test", password: "12345" },
                    success: function(data) {
                        alert("success!");
                   }
                }).error(function (data) {
                    alert("error");
                });
                e.preventDefault();
            });
        });
    </script>
</head>
<body>
    <a id="go" href="#">go!</a>
</body>
</html> 
```

当我将服务器更改为使用 HTTPS 并更改客户端代码中的 url 时：

```
$.ajax({
   type: "GET", 
   url: "http://localhost:3010/users",
   ... 
```

当我使用 CURL 通过 https 调用测试服务器时，它确实可以正常工作：

```
curl --insecure "https://localhot:3010/users?username=test&password=12345" 
```

我不明白为什么在使用 https 服务时 ajax 调用会失败。

# c# - MVC3 C# + SQL Server：如何使用多个 sum() 运行 sql 查询

> ID：11985408
> 
> 赞同：0
> 
> 时间：2012-08-16T10:38:38.157
> 
> 标签：c#, asp.net-mvc, entity-framework-4, sql-server-2008-r2, dbcontext

我有的：

*   带有数据的数据库并通过以下方式连接到它

    ```
    public class VMMExtDBContext : DbContext {...} 
    ```

*   在这里面完美地工作是这样的：

    ```
    public DbSet<VirtualMachine> VirtualMachines { get; set; } 
    ```

*   现在我需要一个从 MSSMS 完美运行的运行查询：

    ```
    select SUM(CPUCount), SUM(RAMSizeGB), SUM(PrimaryHDDVolumeGB) 
    from TempVMs 
    where VMCloudID='f51b73b5-fdb3-4af2-956b-b27fccc5e19d' 
    ```

所以我写了代码：

```
public QuotaPresenter(VMMExtDBContext db, Guid CloudID)
{
        string entitySQL = "select SUM(CPUCount), SUM(RAMSizeGB), SUM(PrimaryHDDVolumeGB) from TempVMs where VMCloudID='"+CloudID.ToString()+"'";
        //or = "select SUM(CPUCount), SUM(RAMSizeGB), SUM(PrimaryHDDVolumeGB) from dbo.TempVMs where VMCloudID='"+CloudID.ToString()+"'";

        var objectContext = (db as IObjectContextAdapter).ObjectContext;

        var query=objectContext.CreateQuery<UsedQuotaValue>(entitySQL);

        query.MergeOption = System.Data.Objects.MergeOption.NoTracking;
        var QuoteValues=query.ToList(); //<--Exception here
        if (QuoteValues.Count > 0) {
            //На случай если нет ни одной виртуальной машины - оставляем по нулям
            UQV.CPU = QuoteValues[0].CPU;
            UQV.RAM = QuoteValues[0].RAM;
            UQV.PrimaryHDDGB = QuoteValues[0].PrimaryHDDGB;
        }
} 
```

当我运行时出现异常：

> *[System.Data.EntitySqlException] 'TempVMs' 无法在当前范围或上下文中解析。确保所有引用的变量都在范围内，加载了所需的模式，并且正确地引用了命名空间。接近简单标识符，第 1 行，第 68 列。*

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:59:56.027

我认为问题在于您正在尝试使用常规 transact-sql 代替实体 sql，它们实际上并不相同。看看[Aggregate Functions](http://msdn.microsoft.com/en-us/library/bb399163%28v=vs.100%29.aspx)，这*可能会对*你有所帮助（我自己无法测试）

```
SELECT VALUE SqlServer.SUM(p.ListPrice) 
FROM AdventureWorksEntities.Products as p 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:46:52.367

我认为问题是您缺少表名中的模式标识符。如果我是正确的，如果没有 group by 语句，查询将无法工作。

# asp.net - 实体数据源一对多对一

> ID：11985409
> 
> 赞同：1
> 
> 时间：2012-08-16T10:38:39.500
> 
> 标签：asp.net, c#-4.0, one-to-many, edmx, entitydatasource

我正在尝试使用 entitydatasource 和查询构建一个下拉列表。我收到以下错误消息，我不确定我做错了什么：

> 'UserId' 不是'Transient.collection [WebAppModel. UserSite(Nullable=True, DefaultValue=)]'。要提取集合元素的属性，请使用子查询来迭代集合。接近简单标识符，第 6 行，第 69 列。

实体数据源

```
<asp:EntityDataSource ID="edsSites" runat="server" 
                ConnectionString="name=WebAppEntities" 
                DefaultContainerName="WebAppEntities" 
                EntitySetName="Sites" 
                Include="Sites, UserSites" 
                Where="EXISTS(SELECT Sites.SiteId, Sites.Domain FROM Sites 
                            WHERE UserSites.UserId=@UserId)">
    <WhereParameters>
        <asp:Parameter Name="UserId" DbType="Guid" />
    </WhereParameters>
</asp:EntityDataSource> 
```

**edm(站点) - 表(站点)**

*   站点 ID - PK
*   项目清单
*   组织
*   名
*   姓
*   领域
*   地址1
*   地址2
*   城市
*   状态
*   邮政编码
*   国家 ID
*   电话号码
*   电子邮件

**edm(Us​​erSite) - 表(UserSite)**

*   用户 ID FK
*   站点 ID FK

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T03:38:52.190

问题解决了！

```
<asp:EntityDataSource ID="edsSites" runat="server" 
                                    ConnectionString="name=WebAppEntities" 
                                    DefaultContainerName="WebAppEntities" 
                                    EntitySetName="Sites"
                                    Where="EXISTS(SELECT VALUE u FROM it.UserSites AS u WHERE u.UserId = @UserId)" EnableFlattening="False" Select="it.[SiteId], it.[Domain]">
                                    <WhereParameters>
                                        <asp:Parameter Name="UserId" DbType="Guid" />
                                    </WhereParameters>
</asp:EntityDataSource> 
```

# c# - 在 GMap.NET 中隐藏或更改“本地切片缓存中没有数据”消息

> ID：11985411
> 
> 赞同：1
> 
> 时间：2012-08-16T10:38:56.997
> 
> 标签：c#, wpf, gmap.net

我正在使用 GMap.NET。当在地图上缩放太多并且该区域没有可用的图像时，地图上会打印一个异常方块。没关系，我不想改变行为。我只是想弥补GmapControl，我几乎完成了。我现在只需要更改或删除异常消息：“异常：本地切片缓存中没有数据”。但是我找不到合适的房产...

对于有兴趣的人，我已经询问了 GMAP 官方主题，我得到了一些有趣的答案，除了这一部分： http: [//greatmaps.codeplex.com/discussions/389159](http://greatmaps.codeplex.com/discussions/389159)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-11T15:14:35.497

正如[http://greatmaps.codeplex.com/discussions/389159](http://greatmaps.codeplex.com/discussions/389159)中已经提到的，我开始了类似的任务：

```
mapControl.EmptytileBrush = new SolidBrush(Color.Gainsboro);
mapControl.EmptyTileText = String.Empty;
mapControl.EmptyTileBorders = new Pen(Color.Gray); 
```

但是，GMap 没有暴露任何属性来隐藏异常文本，并且在删除了里面有问题的 DrawString 之后（GMAP v1.6，GMapControl.cs 的第 753 行），我重新编译，发现二进制文件与源代码不一样！

重新编译的源代码现在根本不显示异常文本（仅在使用缓存模式时）。

结果 - 在我的情况下，所有必要的就是重建或核心和 WinForms。放大时，GMAP 现在尽可能使用以前的地图数据，然后在缩放比以前可用的级别低大约 10 级时，最终默认绘制一个空白的白色瓦片。

这种行为是可以接受的——毕竟，除了调试器/开发人员之外，谁会希望看到明亮的异常文本而不是空白图像？:)

# scala - Play 中的电子邮件验证！2.0

> ID：11985412
> 
> 赞同：2
> 
> 时间：2012-08-16T10:38:57.933
> 
> 标签：scala, playframework, playframework-2.0

用户在我的网站上注册后，我需要实施电子邮件验证机制。

我试图了解什么是最好的架构，这是我的猜测：

*   定义电子邮件验证的特殊路由
*   当用户注册时生成一个令牌并使用令牌 -> 用户映射将其保存在缓存中。
*   发送包含 url 的电子邮件，该 url 指向提供令牌作为参数的路由
*   在特殊路由控制器中，使用令牌从缓存中检索用户，验证电子邮件并将其存储在数据库中。

我的方法对吗？有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:09:24.307

有一些模块可以为 Play 2.x 提供此功能。您可能想看看[Secure Social](http://securesocial.ws)或[Play Authenticate](http://joscha.github.com/play-authenticate/)（如@biesior 对问题的评论中所述）。

# android - 带有图像的 Android ICS 选项菜单

> ID：11985417
> 
> 赞同：4
> 
> 时间：2012-08-16T10:39:10.273
> 
> 标签：android, android-layout

我是安卓新手。

如何创建没有图像的选项菜单，如附加图像中的图像？我需要使用操作栏还是正常`onCreateOptionMenu`会做？

![在此处输入图像描述](../Images/04176a898e13cc7ca85b96a4dbacdcd1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:56:18.570

> 如果您为 Android 3.0（API 级别 11）及更高版本开发了应用程序，则选项菜单中的项目可在操作栏中使用。默认情况下，系统会将所有项目置于操作溢出中，用户可以使用操作栏右侧的操作溢出图标（或按下设备菜单按钮，如果可用）来显示它们。为了能够快速访问重要的操作，您可以通过将 android:showAsAction="ifRoom" 添加到相应的元素来提升一些项目以显示在操作栏中。

您可以参考此[文档](http://developer.android.com/guide/topics/ui/menus.html#options-menu)以获取更多详细信息。

# c++ - qt mysql连接错误

> ID：11985419
> 
> 赞同：0
> 
> 时间：2012-08-16T10:39:21.777
> 
> 标签：c++, linux, qt, centos

我正在测试 QT 上的数据库连接，但出现此错误

```
[root@server env]# make
g++ -c -m64 -pipe -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -Wall -W -D_REENTRANT -DQT_NO_DEBUG -DQT_GUI_LIB -DQT_CORE_LIB -I../../../lib64/qt4/mkspecs/linux-g++-64 -I. -I../../../include/QtCore -I../../../include/QtGui -I../../../include -I. -I. -o test.o test.cpp
test.cpp: In function ‘int main()’:
test.cpp:20: error: cannot convert ‘QSqlDatabase’ to ‘int’ in return
test.cpp: At global scope:
test.cpp:23: error: ‘Database’ has not been declared
make: *** [test.o] Error 1 
```

这是代码：

```
#include <stdlib.h>
#include <iostream>
#include "/usr/include/mysql/mysql.h"
#include <QDebug>
#include <QtSql/QtSql>

using namespace std;

int main() {

    cout << "SHELL = " << getenv("SHELL") << endl;
    cout << "SHELL = " << getenv("TERM") << endl;

    QSqlDatabase db = QSqlDatabase::addDatabase("QMYSQL");
    db.setHostName("xxx.xxxx.xxxx.xxx");
    db.setDatabaseName("SAMS");
    db.setUserName("xxxxxxxx");
    db.setPassword("xxxxxxxxxx");
    if (!db.open()) qDebug() << "Failed to connect to mysql as user testuser";
    return db;
}

void Database::closeDb(){
    QSqlDatabase::removeDatabase("QMYSQL");
} 
```

任何想法？？？

**更新：**

```
#include <stdlib.h>
#include <iostream>
#include "/usr/include/mysql/mysql.h"
#include <QDebug>
#include <QtSql/QtSql>

using namespace std;

void conn() {

    cout << "SHELL = " << getenv("SHELL") << endl;
    cout << "SHELL = " << getenv("TERM") << endl;

    QSqlDatabase db = QSqlDatabase::addDatabase("QMYSQL");
    db.setHostName("xxxxxxxx");
    db.setDatabaseName("xxxxxxxx");
    db.setUserName("xxxxx");
    db.setPassword("xxxxxxxxxx");
    if (!db.open()) qDebug() << "Failed to connect to mysql as user testuser";
}

void closeDb(){
    QSqlDatabase::removeDatabase("QMYSQL");
}

[root@server env]# make
g++ -c -m64 -pipe -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -Wall -W -D_REENTRANT -DQT_NO_DEBUG -DQT_GUI_LIB -DQT_CORE_LIB -I../../../lib64/qt4/mkspecs/linux-g++-64 -I. -I../../../include/QtCore -I../../../include/QtGui -I../../../include -I. -I. -o test.o test.cpp
g++ -m64 -Wl,-O1 -o env test.o     -lQtGui -lQtCore -lpthread 
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../lib64/crt1.o: In function `_start':
(.text+0x20): undefined reference to `main'
test.o: In function `closeDb()':
/usr/local/dev/env/test.cpp:23: undefined reference to `QSqlDatabase::removeDatabase(QString const&)'
test.o: In function `QString':
/usr/include/QtCore/qstring.h:683: undefined reference to `QSqlDatabase::defaultConnection'
test.o: In function `conn()':
/usr/local/dev/env/test.cpp:14: undefined reference to `QSqlDatabase::addDatabase(QString const&, QString const&)'
/usr/local/dev/env/test.cpp:15: undefined reference to `QSqlDatabase::setHostName(QString const&)'
/usr/local/dev/env/test.cpp:16: undefined reference to `QSqlDatabase::setDatabaseName(QString const&)'
/usr/local/dev/env/test.cpp:17: undefined reference to `QSqlDatabase::setUserName(QString const&)'
/usr/local/dev/env/test.cpp:18: undefined reference to `QSqlDatabase::setPassword(QString const&)'
/usr/local/dev/env/test.cpp:19: undefined reference to `QSqlDatabase::open()'
/usr/local/dev/env/test.cpp:19: undefined reference to `QSqlDatabase::~QSqlDatabase()'
/usr/local/dev/env/test.cpp:19: undefined reference to `QSqlDatabase::~QSqlDatabase()'
/usr/local/dev/env/test.cpp:14: undefined reference to `QSqlDatabase::~QSqlDatabase()'
collect2: ld returned 1 exit status
make: *** [env] Error 1 
```

**更新：**

这有效..

```
#include <stdlib.h>
#include <iostream>
#include "/usr/include/mysql/mysql.h"
#include <QDebug>
#include <QtSql/QtSql>

using namespace std;

void conn() {

    QSqlDatabase db = QSqlDatabase::addDatabase("QMYSQL");
    db.setHostName("xxxxxxxxxxx");
    db.setDatabaseName("SAMS");
    db.setUserName("xxxxxxxx");
    db.setPassword("xxxxxxxx");
    if (!db.open()) {
        qDebug() << "Failed to connect to mysql as user testuser";
    }
    else {
        qDebug() << "hello";
    }
}

void closeDb() {
    QSqlDatabase::removeDatabase("QMYSQL");
}

int main() {

    cout << "SHELL = " << getenv("SHELL") << endl;
    cout << "SHELL = " << getenv("TERM") << endl;
    conn();
    return 0;

} 
```

我不得不补充

```
QT += core gui sql 
```

到项目文件..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:41:46.713

您正在返回您`QSqlDatabase`的`int main()`函数，这是无效的，因为`QSqlDatabase`is not `int`。你为什么要退货？例如，如果您希望返回类型描述成功，则使用`-1`and 否则`0`。

至于第二个错误，您没有定义任何类，`Database`因此您无法定义方法`Database::closeDb()`。而是创建一个函数来做你想做的事：

```
void closeDb() {
  QSqlDatabase::removeDatabase("QMYSQL");
} 
```

但是我看不出`closeDb()`你不使用它的目的。

# html - 我在 CSS 中的页脚不关注我的左右内容，只关注中间内容

> ID：11985424
> 
> 赞同：0
> 
> 时间：2012-08-16T10:39:57.463
> 
> 标签：html, css, layout

好的，这是我的问题：左浮动和右浮动不知何故没有放入我的容器中，页脚只关注中间内容部分。我究竟做错了什么？我可以用图片展示它，但我不能添加一个，因为我没有 10 个代表。这必须是一个简单的修复，我已经阅读了 clear:both 等，但不幸的是，这一切都不起作用。

```
#container
{
    position: relative;
    width: 58.5%;
    background: #FFFFFF;
    margin: 0 auto;
    border: 1px solid #336600;
    text-align: left;

    }
#header
{
    height: 160px;
    background-image:url(images/bannerboven.jpg);
}
#sideleft
{
    position: absolute;
    top: 160px;
    left: 0;
    float: left;
    width: 22%;
    background: #CCFFFF;
    padding: 15px 10px 15px 20px;
}

#sideright
{
    position: absolute;
    top: 160px;
    right: 0;
    float:right;
    width: 23%;
    background: #CCFFFF;
    font-size: 0.8em;
    padding: 15px 10px 15px 20px;
}
#mainContent
{
    margin: 0 26% 0 26%;
    padding: 0 10px;
    background:  #0F0;
    }
#footer
{
    padding: 0 10px 0 20px;
    background: #DDDDDD;
    text-align: center;
    font-weight: bold;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:37:16.180

我不确定在不知道您的 html 结构的情况下您要实现什么，但问题源于您在左右容器上具有绝对定位以及浮动定位的事实。

html 元素的默认定位是静态的，因此您可以浮动所有内容或绝对定位所有内容。这里有一些东西可以帮助您更好地理解定位，它非常简单，您将在 5 分钟内上路：[http ://www.barelyfitz.com/screencast/html-training/css/positioning/](http://www.barelyfitz.com/screencast/html-training/css/positioning/)

此外，您应该发布一个包含 html 的[jsfiddle](http://jsfiddle.net/)链接，这样如果您需要进一步的帮助，我们将更好地了解您想要实现的目标。我的猜测是 Rohit Azad 的解决方案是正确的，你只是很难理解定位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T11:09:54.273

嗨，我检查你的代码，我认为你想要这个

**HTML**

```
<div id="container">
  <div id="header">Header</div>

  <div id="mainContent">
    <div id="sideleft">Left</div>
    <div id="sideright">Right</div>
  </div>

  <div id="footer">Footer</div>

</div> 
```

**CSS**

```
#container
{

    width: 58.5%;
    background: #FFFFFF;
    margin: 0 auto;
    border: 1px solid #336600;

    }
#header
{
    height: 160px;
  background:red;
    background-image:url(images/bannerboven.jpg);
}
#sideleft
{
float:left;    width: 22%;
    background: #CCFFFF;
    padding: 15px 10px 15px 20px;
}

#sideright
{
float:right;
  width: 23%;
    background: #CCFFFF;
    font-size: 0.8em;
    padding: 15px 10px 15px 20px;
}
#mainContent
{
    padding: 20px 10px;
    background: green;
overflow:hidden;
    }
#footer
{
    padding: 0 10px 0 20px;
    background: #DDDDDD;
    text-align: center;
    font-weight: bold;
    } 
```

***[现场演示](http://tinkerbin.com/5H2yspUE)***

# javascript - 如果 html 相同则隐藏

> ID：11985427
> 
> 赞同：0
> 
> 时间：2012-08-16T10:40:09.250
> 
> 标签：javascript, jquery, html, events, if-statement

我正在使用 Feedburner 来显示提要。有时提要具有相同的标题。在这种情况下，我只想显示第一个标题并隐藏具有相同文本的所有其他标题。我试过这个：[JsFiddle](http://jsfiddle.net/NHEKd/1/)

没运气。我可以将它们称为“a”，但我不明白如何将它们彼此区分开来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T17:33:07.023

`filter`您可以使用一个对象来收集所有提要标题及其 jQuery 元素，而不是使用该函数。该对象的行为与`HashMap`Java 中的 a 类似，因为对象不能包含重复的键 - 因此重复的提要标题会自动消除。

```
var unique = { };
// Reverse elements to keep first occurence of feed title (and not the last one)
$($(".feedburnerFeedBlock li").get().reverse()).each(function(){
    // Use feed title as key and jQuery element as value
    unique[$(this).find("a").text()] = $(this);
}).hide();
// Show all unique elements
for (title in unique) {
    unique[title].show();
} 
```

JSFiddle：http: [//jsfiddle.net/Aletheios/9GKBH/1/](http://jsfiddle.net/Aletheios/9GKBH/1/)

此外，由于多种原因，您的代码无法正常工作。其中，jQuery 的`.html()`函数只返回集合中第一个元素的 HTML 字符串（[参见文档](http://api.jquery.com/html/)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:32:13.907

尝试从显示的所有链接和这个 javascript 开始：

```
$(function() {
    var $feeds = $(".feedburnerFeedBlock li a");
    $feeds.each(function(i) {
        var $that = $(this);
        $feeds.each(function(j) {
            var $this = $(this);
            if (j <= i) {
                return true;//continue
            };
            if ($this.text() == $that.text()) {
                $this.hide();
            }
        });
    });
}); 
```

**[演示](http://jsfiddle.net/NHEKd/7/)**

# php - 用 if 语句改变 td 的颜色

> ID：11985428
> 
> 赞同：0
> 
> 时间：2012-08-16T10:40:09.530
> 
> 标签：php, mysql

我正在尝试使用`if`-statement 来更改`<td>`-s 颜色。

基本上，我有一个简单的查询来从数据库中检索信息。另外，我在那里有一列，其中保留了任务是否完成等信息。当我检索信息时，我得到了所有信息，但我需要完成的任务是绿色的，而其他的则没有任何颜色。

我一直在寻找答案，但我找不到任何让我满意的东西。

例如：

* * *

```
$qry = mysql_query("select * from table");
$recs = array();
while($row = mysql_fetch_array($qry))
$recs[]=$row;
mysql_free_result($qry); 
```

* * *

我试图在上面的代码中添加 while 语句，但我很困惑，它不起作用:(

我正在使用 heredoc 打印结果：如何在这里给它们颜色？

* * *

```
<?php 
$last_id=0;
foreach($recs as $rec)
{   
    $html=<<<HTML
<tr>
<td><b>Номер</b></td>
<td>$rec[0]</td>
</tr>
<tr>
<td><b>Номер документа</b></td>
<td>$rec[1]</td>
</tr>
<tr>
<td><b>Дата регистрации</b></td>
<td>$rec[8]</td>
</tr>
<tr>
<td><b>От кого</b></td>
<td>$rec[2]</td>
</tr>
<tr>
<td><b>По</b></td>
<td>$rec[4]</td>
</tr>
<tr>
<td><b>Краткое содержание</b></td>
<td>$rec[3]</td>
</tr>
<tr>
<td><b>Исполнитель</b></td>
<td>$rec[5]</td>
</tr>
<tr>
<td><b>Срок исполнения</b></td>
<td>$rec[6]</td>
</tr>
<tr>
<td><b>Срок исполнения продлен до</b></td>
<td><b>$rec[10]</b></td>
</tr>
<tr>
<td><b>Прислан</b></td>
<td>$rec[9]</td>
</tr>
<tr>
<td><b>Примечание</b></td>
<td>$rec[7]</td>
</tr>
<tr>
<td bgcolor="#838B83">&nbsp;</td>
<td bgcolor="#838B83">&nbsp;</td>
</tr>
HTML;
    print $html;        
    if($rec[0]>$last_id)
        $last_id=$rec[0];
};
$new_id=$last_id+1;
?> 
```

* * *

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T10:42:05.427

而不是颜色使用一个类，所以你可以在 CSS 中改变它

```
<td<?php if($row['complete']) echo ' class="complete"'; ?>>data</td> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T10:51:34.443

```
<table>
    <tr>
        <td>column heading</td>
    </tr>
    <?php
    $qry=mysql_query("select * from table");
    while($row=mysql_fetch_array($qry)) {
        if($row['urcolumnn']==1)
        {
        echo "<tr bgcolor=green>";
        }
        else
        {
            echo "<tr>";
        }
        ?>

        <td>
            <?php echo $row['urcolumn']; ?>
        </td>
    </tr>
    <?php } ?>
</table> 
```

这是一个示例代码。认为这会对你有所帮助。`<tr>`如果你想给颜色来`<td>`使用它，我在这里给背景颜色来喜欢这个`<td style="background-color:green;">`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T11:06:58.347

首先，您应该更改列值，将其结构更改为 int 并将默认值设置为“0”。因此，当您的任务完成时，字段值应更改为“1”。

现在来到你的代码：

```
$qry = mysql_query("select * from table");
while($row = mysql_fetch_assoc($qry)){
    if($row['status']==1){
     echo "<td color="green">Data</td>"
    }
    else{
       echo "<td color="white">Data</td>";
    } 
 } 
```

因此，您可以获得状态为==1 的绿色行表示完成，白色表示未完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T11:37:49.777

我建议您使用三元运算符，而不是使用 IF 语句，或者您可以使用另一种解决方法来使用数组来定义颜色，这将帮助您为每个状态值全局定义各种颜色，请在下面找到一个示例：

```
$aryColor = array(
 'complete' => 'green',
 'incomplete' => "red",
 'pending' => 'orange'
 .....
);
//you can specify values for all of your status, or leave them blank for no color, the keys in the array are the possible values from your status field
foreach($recs as $rec) {
 echo '<tr bgcolor="'.$aryColor[$rec['status_field']].'">
 <td>'.$rec['title_field'].'</td>
 </tr>';
} 
```

我希望这对您有所帮助，您可以轻松地为 HEREDOC 编辑它。

# c# - 使按钮在 DataGrid 中可见

> ID：11985429
> 
> 赞同：0
> 
> 时间：2012-08-16T10:40:11.877
> 
> 标签：c#, wpf, datagrid, wpfdatagrid

我在 WPF 中创建了一个 Datagrid 控件。我怎样才能使按钮仅对

我选择它的行，以便我的 Button 将显示在 Button-Column-Cell 中。

```
XAML:
<DataGridTemplateColumn x:Name="Button-Column" Header="H." Width="50">
  <DataGridTemplateColumn.CellTemplate>
    <DataTemplate>
      <DataTemplate.Triggers>
        <DataTrigger Binding="{Binding Path=ObjectType}" Value="E">
           <Setter Property="Visibility" Value="Hidden" />
        </DataTrigger>
        <DataTrigger Binding="{Binding Path=ObjectType}" Value="F">
           <Setter Property="Visibility" Value="Hidden" />
        </DataTrigger>
        <DataTrigger Binding="{Binding Path=ObjectType}" Value= "P">
            <Setter Property="Visibility" Value="Hidden" />
        </DataTrigger>
      </DataTemplate.Triggers>              
      <Button Name="btnTable" Visibility="{Binding Path=ObjectType}" Height="20"  
              Width="25" Click="Button_Table_Click">
      </Button>
     </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
  </DataGridTemplateColumn> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:41:02.363

这是使用 multibinding 的解决方案：

xml:

```
 <Window x:Class="WpfApplication8.MainWindow"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:WpfApplication8="clr-namespace:WpfApplication8"
            Title="MainWindow" Height="350" Width="525">
        <Window.Resources>
            <WpfApplication8:ButtonVisibilityConverter x:Key="buttonVisibilityConverter"/>
        </Window.Resources>
        <DataGrid x:Name="dataGrid" SelectedItem="{Binding MySelectedItem}" ItemsSource="{Binding MyObjectList}" SelectionMode="Single">
            <DataGrid.Columns>
                <DataGridTemplateColumn Header="H." Width="50">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Button 
                                    Height="20"  
                                    Width="25">
                                <Button.Visibility>
                                    <MultiBinding Converter="{StaticResource buttonVisibilityConverter}">
                                        <Binding Path="Parent.MySelectedItem"/>
                                        <Binding></Binding>
                                    </MultiBinding>
                                </Button.Visibility>
                            </Button>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
    </Window> 
```

后面的代码：

```
namespace WpfApplication8
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window, INotifyPropertyChanged
    {
        #region INotifyPropertyChanged Members

        public event PropertyChangedEventHandler PropertyChanged;

        #endregion

        public class Toto
        {
            public object Parent { get; set; }

            public string Name { get; set; }
            public string Content { get; set; }

            public Toto(string name, string content, object parent)
            {
                this.Name = name; this.Content = content; this.Parent = parent;
            }
        }

        private object _mySelectedItem;

        public object MySelectedItem
        {
            get { return _mySelectedItem; }
            set
            {
                _mySelectedItem = value;
                if (this.PropertyChanged != null)
                {
                    this.PropertyChanged(this, new PropertyChangedEventArgs("MySelectedItem"));
                }
            }
        }

        private List<Toto> _myObjectList;

        public List<Toto> MyObjectList
        {
            get { return _myObjectList; }
            set { _myObjectList = value; }
        }

        public MainWindow()
        {
            this.MyObjectList = new List<Toto>
            {
                new Toto("toto1", "content toto1", this),
                new Toto("toto2", "content toto2", this)
            };

            InitializeComponent();

            this.DataContext = this;
        }
    }
} 
```

转换器：

```
class ButtonVisibilityConverter : IMultiValueConverter
{
    #region IMultiValueConverter Members

    public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (values[0] == values[1])
        {
            return Visibility.Visible;
        }
        else
        {
            return Visibility.Hidden;
        }
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    #endregion
} 
```

# asp.net-mvc - 为什么我的 CSS 捆绑不适用于 bin 部署的 MVC4 应用程序？

> ID：11985431
> 
> 赞同：68
> 
> 时间：2012-08-16T10:40:18.610
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-optimization

根据此处给出的建议和一两个即时修复，我已经将一个 MVC4 应用程序部署到我的托管服务提供商，但最明显的问题是 css 的捆绑不起作用。当我用显式文件引用替换捆绑引用时，我的 css 再次工作。

我正在使用来自 VS2012 的标准 MVC4 RTM 项目模板。该提供程序正在运行 IIS 7.5 和 ASP.NET 4，而我之前的同一应用程序的 MVC3 版本运行良好。我猜我在某个版本太低的地方获取了依赖项，这也可能导致我[的基于区域的操作链接问题](https://stackoverflow.com/questions/11531046/what-is-wrong-with-my-area-routing-in-my-bin-deployed-mvc4-app)。

技术症状是：

该行`@Styles.Render("~/Content/css")`呈现为`<link href="/Content/css?v=" rel="stylesheet"/>`

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-11-28T03:10:52.877

2013 年 11 月 4 日更新：

发生这种情况的原因是您的包名称末尾有**.js**或**.css ，这导致 ASP.NET 无法通过 MVC 和 BundleModule 运行请求。**

解决此问题以获得更好性能的推荐方法是从包名称中删除**.js**或**.css 。**

所以**/bundle/myscripts.js**变成**/bundle/myscripts**

或者，您可以修改**system.webServer**部分中的 web.config 以通过 BundleModule 运行这些请求（这是我的原始答案）

```
<modules runAllManagedModulesForAllRequests="true">
  <remove name="BundleModule" />
  <add name="BundleModule" type="System.Web.Optimization.BundleModule" />
</modules> 
```

编辑：我还注意到，如果名称以“css”（不带点）结尾，这也是一个问题。我不得不将我的包名称从“DataTablesCSS”更改为“DataTablesStyles”来解决我的问题。

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2012-08-22T18:40:52.123

无论 .NET 运行的是 4.0 还是 4.5，CSS 和脚本捆绑都应该有效。我正在运行 .NET 4.0，它对我来说很好。但是，为了使缩小和捆绑行为正常工作，您的 web.config 必须设置为不在调试模式下运行。

```
<compilation debug="false" targetFramework="4.0"> 
```

使用 _Layout.cshtml 文件中的 jQuery UI 示例的这个包。

```
@Styles.Render("~/Content/themes/base/css") 
```

如果我运行，`debug="true"`我会得到以下 HTML。

```
<link href="/Content/themes/base/jquery.ui.core.css" rel="stylesheet"/>
<link href="/Content/themes/base/jquery.ui.resizable.css" rel="stylesheet"/>
<link href="/Content/themes/base/jquery.ui.selectable.css" rel="stylesheet"/>
<link href="/Content/themes/base/jquery.ui.accordion.css" rel="stylesheet"/>
<link href="/Content/themes/base/jquery.ui.autocomplete.css" rel="stylesheet"/>
<link href="/Content/themes/base/jquery.ui.button.css" rel="stylesheet"/>
<link href="/Content/themes/base/jquery.ui.dialog.css" rel="stylesheet"/>
<link href="/Content/themes/base/jquery.ui.slider.css" rel="stylesheet"/>
<link href="/Content/themes/base/jquery.ui.tabs.css" rel="stylesheet"/>
<link href="/Content/themes/base/jquery.ui.datepicker.css" rel="stylesheet"/>
<link href="/Content/themes/base/jquery.ui.progressbar.css" rel="stylesheet"/>
<link href="/Content/themes/base/jquery.ui.theme.css" rel="stylesheet"/> 
```

但是，如果我运行`debug="false"`. 我会得到这个。

```
<link href="/Content/themes/base/css?v=myqT7npwmF2ABsuSaHqt8SCvK8UFWpRv7T4M8r3kiK01" rel="stylesheet"/> 
```

这是一项功能，因此您可以轻松调试脚本和 CSS 文件的问题。我正在使用 MVC4 RTM。

如果您认为这可能是 MVC 依赖问题，我建议您进入 Nuget 并删除所有与 MVC 相关的包，然后搜索该`Microsoft.AspNet.Mvc`包并安装它。我正在使用最新版本，它以 v.4.0.20710.0 的形式出现。这应该会获取您需要的所有依赖项。

此外，如果您曾经使用 MVC3 而现在尝试使用 MVC4，您将需要进入您的 web.config(s) 并更新它们的引用以指向 MVC 的 4.0 版本。如果您不确定，您可以随时创建一个新的 MVC4 应用程序并从那里复制 web.config。如果您这样做，请不要忘记 Views/Areas 文件夹中的 web.config。

**更新：**我发现你需要的是`Microsoft.AspNet.Web.Optimization`安装在你的项目中的 Nuget 包。无论您将目标框架指定为 4.5 还是 4.0，它都默认包含在 MVC4 RTM 应用程序中。这是包含捆绑类的命名空间，并且似乎不依赖于框架。我已经部署到没有安装 4.5 的服务器上，它仍然可以按预期工作。只需确保 DLL 与您的应用程序的其余部分一起部署即可。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-08-24T17:56:28.683

只是为了澄清一些事情，`System.Web.Optimization`（又名捆绑/缩小）将适用于 4.0。它不依赖于 4.5 中的任何内容，因此那里应该没有问题。

如果脚本捆绑工作正常，并且它只是 CSS 的问题，那么问题可能出在相对 URL 上？

我会首先查看呈现的页面，看看您是否正在获取对 CSS 捆绑包的引用，例如：

```
<link href="/app/Content/css?v=oI5uNwN5NWmYrn8EXEybCI" rel="stylesheet"/> 
```

如果你是，那么捆绑是有效的，但是你的 CSS 捆绑中的某些东西被搞砸了。这通常是由于您的 CSS 包中的相对 URL 不正确，即如果您的图像位于 ~/Content 下，但您将包命名`~/bundles/css`为 ，浏览器将错误地在`~/bundles`.

此外，默认行为是在`debug=true`. 因此，如果您确实希望即使在 时也启用优化`debug=true`，则需要强制：

```
BundleTable.EnableOptimizations = true 
```

**更新：**有了新信息`v=""`，这意味着捆绑包是空的，您应该验证您正在正确地将文件添加到捆绑包中，并且它找到了它们。您如何将文件包含到捆绑包中？

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-05-23T15:50:59.300

省略`runAllManagedModulesForAllRequests="true"`也对我有用。在 中添加以下配置`web.config`：

```
<modules>
  <remove name="BundleModule" />
  <add name="BundleModule" type="System.Web.Optimization.BundleModule" />
</modules> 
```

`runAllManagedModulesForAllRequests`如果使用不当，将对您的网站造成性能影响。看看[这篇文章](http://bartwullems.blogspot.com/2012/06/optimize-performance-of-your-web.html)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-01-14T21:40:59.560

要考虑的另一件事是引用不能具有相同的名称。例如，如果您在`libraries`目录中有 jQuery UI，并像这样捆绑其 JavaScript 文件：

```
bundles.Add(new ScriptBundle("~/libraries").Include("~/libraries/jquery-ui/jqyery-ui.js")); 
```

然后尝试像这样捆绑它的 CSS 文件：

```
bundles.Add(new StyleBundle("~/libraries").Include("~/libraries/jquery-ui/jqyery-ui.css"));
... 
```

它会失败。他们必须有唯一的名字。所以做一些类似`ScriptBundle("~/libraries/js")...`和`ScriptBundle("~/libraries/css")...`或其他的事情。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-22T21:06:23.573

作为现有答案的附录，其中没有一个对我有用，我在这里找到了我的解决方案：

[https://bundletransformer.codeplex.com/discussions/429707](https://bundletransformer.codeplex.com/discussions/429707)

解决方案是

1.  右键单击 Visual Studio 中的 .less 文件
2.  选择属性
3.  标记`Build Action`为`Content`
4.  重新部署

我不需要删除无扩展处理程序（可以在互联网上的其他解决方案中找到）

我不必添加`<add name="BundleModule" type="System.Web.Optimization.BundleModule" />`web.config 设置。

希望这可以帮助！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-09-20T19:35:34.910

我的一个 css 文件的文件名中有一个“_”字符，这导致了问题。

将 your_style.css 重命名为 yourstyle.css

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-04-11T09:08:46.403

我知道这是一个老问题，但人们可能仍然会面临这个问题。

下面检查 BundleModule 是否存在于 web.config 中并加载，并根据其存在设置 EnableOptimizations。

这样无论是否可用，css/js 引用都可以正常工作。换句话说：

*   **如果 BundleModule 可用，则将启用捆绑/优化。**

*   **如果 BundleModule 不可用，捆绑/优化将被禁用，并自动使用完整引用。**

代码：

```
public static void RegisterBundles(BundleCollection bundles)
{
   // bundeling code here
   // ...
   // bundeling code here

   bool bundelingModuleIsAvailable = false;
   try { 
       bundelingModuleIsAvailable = HttpContext.Current.ApplicationInstance.Modules.AllKeys.Contains("BundleModule"); 
   }
   catch { }
   if (!bundelingModuleIsAvailable)
       System.Diagnostics.Debug.WriteLine("WARNING : optimization bundle is not added to Web.config!");

   BundleTable.EnableOptimizations = bundelingModuleIsAvailable && !Debug_CheckIsRunning();
   //Debug_CheckIsRunning is optional, incase you want to disable optimization when debugging yourself
   BundleTable.EnableOptimizations = true;
}

private bool Debug_CheckIsRunning()
{//Check if debug is running
    string moduleName = System.Diagnostics.Process.GetCurrentProcess().MainModule.ModuleName;
    return (moduleName.Contains("iisexpress.exe") || moduleName.Contains(".vshost") || moduleName.Contains("vstest.executionengine") || moduleName.Contains("WebDev.WebServer"));
    } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-11-11T12:29:21.213

我在实时环境中遇到了与 CSS 相同的问题。我遵循了这里的所有建议，并调查了捆绑在幕后的工作方式。这导致我请求清除 .Net 缓存（我无权访问应用服务器），这导致捆绑开始在应用服务器上运行。但是，当通过配置了 CDN 的负载均衡器访问站点时，尽管在 url 中更新了捆绑包标识符，但捆绑包包含旧的 CSS。只需刷新 CDN 即可解决问题。

我希望这有助于帮助可能遇到这种情况的其他人

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-12-19T01:31:12.580

我遇到了同样的问题，结果证明是一个愚蠢的错误，css 文件未包含在项目中，因此未发布，请确保查看解决方案中的所有文件并将它们添加到项目中。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-11-26T07:35:32.433

只为历史：

检查捆绑中所有提到的less/css文件是否具有Build Action =“Content”。

如果目标服务器上缺少捆绑包中的某些文件，则不会出现错误。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-06-24T13:45:10.397

css 名称必须一致。

jqueryUI css 的名称不是 Contents/themes/base 文件夹中的“jquery.ui.XXX”。

所以应该是：

错误的：

```
 bundles.Add(new StyleBundle("~/Content/themes/base/css").Include(
                                    "~/Content/themes/base/jquery.ui.core.css",
                                    "~/Content/themes/base/jquery.ui.resizable.css",
                                    "~/Content/themes/base/jquery.ui.selectable.css",
                                    "~/Content/themes/base/jquery.ui.accordion.css",
                                    "~/Content/themes/base/jquery.ui.autocomplete.css",
                                    "~/Content/themes/base/jquery.ui.button.css",
                                    "~/Content/themes/base/jquery.ui.dialog.css",
                                    "~/Content/themes/base/jquery.ui.slider.css",
                                    "~/Content/themes/base/jquery.ui.tabs.css",
                                    "~/Content/themes/base/jquery.ui.datepicker.css",
                                    "~/Content/themes/base/jquery.ui.progressbar.css",
                                    "~/Content/themes/base/jquery.ui.theme.css")); 
```

正确的 ：

```
 bundles.Add(new StyleBundle("~/Bundles/themes/base/css").Include(
                                    "~/Content/themes/base/core.css",
                                    "~/Content/themes/base/resizable.css",
                                    "~/Content/themes/base/selectable.css",
                                    "~/Content/themes/base/accordion.css",
                                    "~/Content/themes/base/autocomplete.css",
                                    "~/Content/themes/base/button.css",
                                    "~/Content/themes/base/dialog.css",
                                    "~/Content/themes/base/slider.css",
                                    "~/Content/themes/base/tabs.css",
                                    "~/Content/themes/base/datepicker.css",
                                    "~/Content/themes/base/progressbar.css",
                                    "~/Content/themes/base/theme.css")); 
```

我在 MVC5 中尝试过并成功运行。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-02-02T17:59:22.437

为了在对话中添加有用的信息，我在部署中遇到了捆绑包的 404 错误（在本地开发环境中很好）。

对于捆绑包名称，我包括如下版本号：

```
bundles.Add(new ScriptBundle("~/bundles/jquerymobile.1.4.3").Include(
...
); 
```

一时兴起，我删除了所有的点，一切又神奇地工作了：

```
bundles.Add(new ScriptBundle("~/bundles/jquerymobile143").Include(
...
); 
```

希望这可以帮助某人节省一些时间和挫败感。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-04-21T03:19:07.520

我在从 nuget 添加一些软件包时遇到了这个问题，但忘记了更新

所以首先对项目中安装的所有包进行更新

```
Update-Package 
```

在 Global.asax.cs 添加以下内容

```
BundleTable.EnableOptimizations = true; 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-07-24T12:44:07.933

我在 Azure 网站中部署代码时遇到了这个问题。当我从 visualstudio.com 部署构建时它确实有效，而当我尝试从 Visual Studio 2013 发布构建时却没有。主要问题是 CSS 缩小。我完全同意对这个问题的第一个回答。但是想到共享对我有用的解决方案，可能会帮助您修复它。

基本上，当我们通过 VSO 部署时，它会通过启动 system.web.Optimization 为 css、js 生成缩小文件，但是当我们从 VS 2013 发布构建时，我们必须注意以下事项。 [捆绑和缩小](http://www.asp.net/mvc/overview/performance/bundling-and-minification) 1\. 确保文件夹结构和您的捆绑器命名约定应该不同。像这样的东西。

```
bundles.Add(new StyleBundle("~/Content/materialize/mcss").Include(
                  "~/Content//materialize/css/materialize.css")); 
```

2\. 在你的 bundleconfig 定义的底部添加

```
public static void RegisterBundles(BundleCollection bundles)
{
  bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
             "~/Scripts/jquery-{version}.js"));

   // Code removed for clarity.
   BundleTable.EnableOptimizations = true;
} 
```

3.确保在web.config中添加debug false（当你开始本地调试时VS2013会给你一个弹出窗口，说你需要确保在部署到prod之前把它放回去。这本身就解释了很多。

```
<system.web>
  <compilation debug="true" />
  <!-- Lines removed for clarity. -->
</system.web> 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-01-22T21:24:03.263

尝试这个：

```
 @System.Web.Optimization.Styles.Render("~/Content/css")
    @System.Web.Optimization.Scripts.Render("~/bundles/modernizr") 
```

它对我有用。我还在学习，我还没有弄清楚为什么会这样

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-03-06T12:25:56.780

您需要在共享视图中添加此代码

```
 @*@Scripts.Render("~/bundles/plugins")*@
    <script src="/Content/plugins/jQuery/jQuery-2.1.4.min.js"></script>
    <!-- jQuery UI 1.11.4 -->
    <script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
    <!-- Kendo JS -->
    <script src="/Content/kendo/js/kendo.all.min.js" type="text/javascript"></script>
    <script src="/Content/kendo/js/kendo.web.min.js" type="text/javascript"></script>
    <script src="/Content/kendo/js/kendo.aspnetmvc.min.js"></script>
    <!-- Bootstrap 3.3.5 -->
    <script src="/Content/bootstrap/js/bootstrap.min.js"></script>
    <!-- Morris.js charts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
    <script src="/Content/plugins/morris/morris.min.js"></script>
    <!-- Sparkline -->
    <script src="/Content/plugins/sparkline/jquery.sparkline.min.js"></script>
    <!-- jvectormap -->
    <script src="/Content/plugins/jvectormap/jquery-jvectormap-1.2.2.min.js"></script>
    <script src="/Content/plugins/jvectormap/jquery-jvectormap-world-mill-en.js"></script>
    <!-- jQuery Knob Chart -->
    <script src="/Content/plugins/knob/jquery.knob.js"></script>
    <!-- daterangepicker -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.2/moment.min.js"></script>
    <script src="/Content/plugins/daterangepicker/daterangepicker.js"></script>
    <!-- datepicker -->
    <script src="/Content/plugins/datepicker/bootstrap-datepicker.js"></script>
    <!-- Bootstrap WYSIHTML5 -->
    <script src="/Content/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js"></script>
    <!-- Slimscroll -->
    <script src="/Content/plugins/slimScroll/jquery.slimscroll.min.js"></script>
    <!-- FastClick -->
    <script src="/Content/plugins/fastclick/fastclick.min.js"></script>
    <!-- AdminLTE App -->
    <script src="/Content/dist/js/app.min.js"></script>
    <!-- AdminLTE for demo purposes -->
    <script src="/Content/dist/js/demo.js"></script>
    <!-- Common -->
    <script src="/Scripts/common/common.js"></script>
    <!-- Render Sections -->
    @RenderSection("scripts", required: false)
    @RenderSection("HeaderSection", required: false) 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-01-05T18:33:34.917

在 Visual Studio 2015 中，我发现问题是由在 web.config 中设置 debug=true 时在 BundleConfig 中引用 .min 版本的 javascript 文件引起的。

例如，使用 jquery 在 BundleConfig 中指定以下内容：

```
bundles.Add(new ScriptBundle("~/bundles/jquery").Include("~/Scripts/jquery-{version}.min.js")); 
```

当在 web.config 中设置 debug=true 时，导致 jquery 根本无法正确加载。

参考未缩小的版本：

```
bundles.Add(new ScriptBundle("~/bundles/jquery").Include("~/Scripts/jquery-{version}.js")); 
```

纠正问题。

设置 debug=false 也可以解决问题，但当然这并不完全有帮助。

还值得注意的是，虽然一些缩小的 javascript 文件正确加载，而另一些则没有。我最终删除了所有缩小的 javascript 文件，以支持 VS 为我处理缩小。

* * *

## 回答 #19

> 赞同：-2
> 
> 时间：2016-03-06T12:30:25.893

这解决了我的问题。我在 _layout.cshtml 中添加了这些行

```
@*@Scripts.Render("~/bundles/plugins")*@
<script src="/Content/plugins/jQuery/jQuery-2.1.4.min.js"></script>
<!-- jQuery UI 1.11.4 -->
<script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
<!-- Kendo JS -->
<script src="/Content/kendo/js/kendo.all.min.js" type="text/javascript"></script>
<script src="/Content/kendo/js/kendo.web.min.js" type="text/javascript"></script>
<script src="/Content/kendo/js/kendo.aspnetmvc.min.js"></script>
<!-- Bootstrap 3.3.5 -->
<script src="/Content/bootstrap/js/bootstrap.min.js"></script>
<!-- Morris.js charts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
<script src="/Content/plugins/morris/morris.min.js"></script>
<!-- Sparkline -->
<script src="/Content/plugins/sparkline/jquery.sparkline.min.js"></script>
<!-- jvectormap -->
<script src="/Content/plugins/jvectormap/jquery-jvectormap-1.2.2.min.js"></script>
<script src="/Content/plugins/jvectormap/jquery-jvectormap-world-mill-en.js"></script>
<!-- jQuery Knob Chart -->
<script src="/Content/plugins/knob/jquery.knob.js"></script>
<!-- daterangepicker -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.2/moment.min.js"></script>
<script src="/Content/plugins/daterangepicker/daterangepicker.js"></script>
<!-- datepicker -->
<script src="/Content/plugins/datepicker/bootstrap-datepicker.js"></script>
<!-- Bootstrap WYSIHTML5 -->
<script src="/Content/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js"></script>
<!-- Slimscroll -->
<script src="/Content/plugins/slimScroll/jquery.slimscroll.min.js"></script>
<!-- FastClick -->
<script src="/Content/plugins/fastclick/fastclick.min.js"></script>
<!-- AdminLTE App -->
<script src="/Content/dist/js/app.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="/Content/dist/js/demo.js"></script>
<!-- Common -->
<script src="/Scripts/common/common.js"></script>
<!-- Render Sections --> 
```

* * *

## 回答 #20

> 赞同：-6
> 
> 时间：2014-06-14T05:06:23.730

我有同样的问题 。我只是转换

```
@Styles.Render("~/Content/css")
and @Scripts.Render("~/bundles/modernizr") to 
    @Styles.Render("/Content/css")
    @Scripts.Render("/bundles/modernizr") 
```

和它的工作。只是不要忘记转换

```
 @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")
to 
    @Scripts.Render("/bundles/jquery")
    @Scripts.Render("/bundles/bootstrap") 
```

玩得开心

# regex - find -exec 上的多个 sed 操作

> ID：11985432
> 
> 赞同：0
> 
> 时间：2012-08-16T10:40:19.897
> 
> 标签：regex, sed

我正在尝试对 find -exec 操作执行多个 sed 操作。我的代码如下所示：

```
find . -name '*.html.haml' -exec sed -i '' 's/restaurant_id/company_id/g' && sed -i '' 's/restaurants/companies/g' && sed -i '' 's/restaurant/company/g' && sed -i '' 's/Restaurants/Companies/g' && sed -i '' 's/Restaurant/Company/g' "{}" \; 
```

这似乎不起作用。我怎么能那样做？

错误：

```
find: -exec: no terminating ";" or "+" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T10:49:32.927

正如其他人所说，问题在于在命令完成*后*`&&`执行 sed 命令，而不是传递要在每个文件上执行的一串命令。*`find`*

 *实现所需结果的最简单方法是将所有这些组合成一个`sed`带有分号的命令。像这样：

```
$ find . -name '*.html.haml' -exec sed -i 's/restaurant_id/company_id/g;s/restaurants/companies/g;s/restaurant/company/g;s/Restaurants/Companies/g;s/Restaurant/Company/g' "{}" \; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:45:34.383

`&&`s 将由 shell 解释。引用它们以防止这种情况`'&&'`

您需要添加`"{}"`到每个 sed 命令。

或者，您可以使用`-e`sed 选项仅使用多个脚本执行一次 sed。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-11T08:08:06.090

也可以有多个`ecex`s，例如：

```
find . -name '*.html.haml' \
-exec sed -i '' 's/restaurant_id/company_id/g' "{}" \; \
-exec sed -i '' 's/restaurants/companies/g' "{}" \; \
-exec sed -i '' 's/restaurant/company/g' "{}" \; \
-exec sed -i '' 's/Restaurants/Companies/g' "{}" \; \
-exec sed -i '' 's/Restaurant/Company/g' "{}" \; 
```

（尽管在这种特定情况下，单个`sed`更好，例如接受的答案）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-16T10:45:19.950

您的外壳可能将此命令拆分为`find . -name '*.html.haml' -exec sed -i '' 's/restaurant_id/company_id/g'`和`&&``sed -i ...`

尝试引用 exec 命令`find . -name '*.html.haml' -exec "sed -i '' 's/restaurant_id/company_id/g' && sed -i ..."`

另一种方法是外部 sed 脚本，您可以使用来自 exec 的单个命令调用*

# java - 从java代码调用过程

> ID：11985445
> 
> 赞同：0
> 
> 时间：2012-08-16T10:41:22.540
> 
> 标签：java, call, procedure

我从java代码调用程序：

```
private String processData(Integer time, String jndiName) {
    CallableStatement cs = null;
    Connection conn = null;
    try {
        InitialContext ctxt = new InitialContext();
        DataSource ds = (DataSource) ctxt.lookup(jndiName);
        conn = ds.getConnection();
        cs = conn.prepareCall("{call PROC(?)}");
        cs.setInt(1, time);
        cs.execute();
    } catch (Exception e) {

    } 
```

这个过程只是等待我设置为参数的 X 秒。

**问题是：**

当我用参数调用这个过程时，这个java函数需要多长时间`time=30`？
它会等到这个过程结束还是java会运行它并继续下一个命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:45:04.253

是的，它会等待，这是一个阻塞操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T10:45:21.903

CS.execute 是一个阻塞调用，等待数据库完成过程调用然后才返回。

# android - 如何在android中检查手机是否静音、振动或响亮

> ID：11985448
> 
> 赞同：28
> 
> 时间：2012-08-16T10:41:41.470
> 
> 标签：android

这是我静音/取消静音电话的代码。但我想检查电话是否已经静音，如果不是，我将静音。如果是在振动，那么我会让它正常。

我可以以某种方式检查这些状态吗？

```
public void changeRingerMode(Context context){

AudioManager audio = (AudioManager) context.getSystemService(Context.AUDIO_SERVICE);

    /**
    * To Enable silent mode.....
    */
    audio.setRingerMode(AudioManager.RINGER_MODE_SILENT);

    /**
    * To Enable Ringer mode.....
    */
    audio.setRingerMode(AudioManager.RINGER_MODE_NORMAL);

} 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-08-16T10:48:29.000

尝试这个：

```
switch( audio.getRingerMode() ){
case AudioManager.RINGER_MODE_NORMAL:
   break;
case AudioManager.RINGER_MODE_SILENT:
   break;
case AudioManager.RINGER_MODE_VIBRATE:
   break;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-09-03T03:37:21.333

就我而言，我发现即使我的手机设置为振动，它也会`AudioManager.RINGER_MODE_SILENT`在静音时返回，所以我找到了一种检查振动模式的方法：

```
public static boolean checkVibrationIsOn(Context context){
    boolean status = false;
    AudioManager am = (AudioManager)context.getSystemService(Context.AUDIO_SERVICE);
    if(am.getRingerMode() == AudioManager.RINGER_MODE_VIBRATE){
        status = true;
    } else if (1 == Settings.System.getInt(context.getContentResolver(), "vibrate_when_ringing", 0)) //vibrate on
        status = true;
    return status;
} 
```

并获得完整的图片，以确定振铃器是否打开：

```
public static boolean checkRingerIsOn(Context context){
    AudioManager am = (AudioManager)context.getSystemService(Context.AUDIO_SERVICE);
    return am.getRingerMode() == AudioManager.RINGER_MODE_NORMAL;
} 
```

# java - 将 varchar 读取为 char 数组

> ID：11985450
> 
> 赞同：1
> 
> 时间：2012-08-16T10:41:46.907
> 
> 标签：java, database, type-conversion, mybatis

是否可以从 varchar 类型的数据库列中读取数据作为 java 中的 char 数组？

我必须补充一点，我正在使用 MyBatis。到目前为止，我的互联网拖网还没有带来任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T10:44:05.253

为什么你不能把它读成 a`String`然后转换成 a `char[]`？

```
char[] chars = rs.getString("VARCHAR_COLUMN").toCharArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:52:59.123

我决定提供 SqlSessionDaoSupport 的实现并使用 ResultHandler 将字符串数据转换为 char 数组以存储在简单的 POJO 中。

这并没有提供完美的解决方案，因为我想从数据库中读取数据作为 char 数组并且永远不会构造字符串。然而，这是朝着正确方向迈出的良好一步。

# binding - 在多层应用程序中定位 Ninject 模块的位置

> ID：11985452
> 
> 赞同：14
> 
> 时间：2012-08-16T10:41:48.220
> 
> 标签：binding, module, ninject

我的应用程序包括许多后端程序集（包括实体框架数据存储库层），这些程序集由许多前端程序集（包括 Windows 服务和 MVC3 Web 应用程序）共享。

我对 Ninject 绑定过程的理解是，每个包含可注入类型的程序集还应该包含一个 Ninject 模块，该模块定义了这些类型的默认绑定。然后将定义的模块集加载到消费程序集的 Ninject Kernel 中。

但是，我遇到了问题，因为所需的绑定范围并不总是一致的。例如，我的 MVC 项目需要绑定到数据上下文`InRequestScope`，而 Windows 服务绑定到同一个类`InThreadScope`。

我显然可以通过将所有模块重新定位到前端项目中来解决这个问题，从而为每个使用场景维护每个模块的单独副本，但这似乎很老套，因为它在多个项目中复制了大部分模块内容。

是否有关于模块应位于多层应用程序中的什么位置的最佳实践，以及如何将其与我对项目之间绑定差异的需求相协调？

非常感谢您的建议，

蒂姆

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-16T18:10:26.927

对于具有单个应用程序的解决方案，一般建议是在应用程序项目（您的 Web 应用程序或 Web 服务项目）中注册您的容器。对于 Web 应用程序，这通常是 Global.asax `Application_Start`。这个将所有东西连接在一起的地方在 DI 术语中称为[合成根。](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)

使用多应用程序解决方案，每个应用程序项目仍然有一个组合根。这是必须的，因为每个应用程序都有其独特的配置。另一方面，重复的代码总是不好的。当你引入一个新的抽象时，你不想改变三个地方。

诀窍是将所有注册移到项目层次结构中。例如，您可以定义一个依赖于您的业务层程序集（及以下）的“引导程序集”，并让它拥有那些不会更改的程序集的所有注册。然后应用程序的组合根可以使用该程序集来获取默认注册并使用应用程序特定的依赖项对其进行扩展。

这样的事情可能看起来像这样：

```
// MVC Composition root
public static void Bootstrap()
{
    var container = new Container();

    // Default registrations
    BusinessLayerBootstrapper.Bootstrap(container);

    // Application specific registrations
    container.Bind<IUserContext>().To<AspNetUserContext>();

    DependencyResolver.Current = 
        new ContainerDependencyResolver(container);
}

// Windows Service Composition root
public static void Bootstrap()
{
    var container = new Container();

    // Default registrations
    BusinessLayerBootstrapper.Bootstrap(container);

    // Application specific registrations
    container.Bind<IUserContext>().To<SystemUserContext>()
        .SingleScoped();

    // Store somewhere.
    Bootstrapper.Container = container;
}

// In the BL bootstrap assembly
public static class BusinessLayerBootstrapper
{
    public static void Bootstrap(Container container)
    {
        container.Bind<IDepenency>().To<RealThing>();
        // etc
    }
} 
```

尽管您不需要单独的引导程序程序集（您可以将此代码放在 BL 本身中），但这使您可以使业务层程序集免受容器的任何依赖。

另请注意，我只是调用静态`Bootstrap()`方法，而不是使用 (Ninject) 模块。我试图让我的答案独立于框架，因为您的问题是一般性的，并且所有 DI 框架的建议都是相同的。但是，如果您愿意，当然可以使用 Ninject 模块功能。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-16T17:12:03.820

关于范围，MVC 应用程序需要具有与 Windows 服务不同的 CompositionRoot。我建议您尝试通过功能模块（对于那些与应用程序无关的部分）和所有其他直接在 MVC 或 WindowsService 项目的 CompositionRoot 中的绑定进行组织。

另一个非常好的方法是定义一组通用的约定，它可以帮助您在几行中表达最具约束力的问题。因此，您的应用程序可能具有以下绑定：

MVC 应用程序

```
Bind(c => c.FromAssemblyContaining<IRepository>()
           .SelectAllClasses()
           .InheritedFrom<IRepository>()
           .Configure(b => b.InRequestScope())); 
```

您的 Windows 服务应用程序

```
Bind(c => c.FromAssemblyContaining<IRepository>()
           .SelectAllClasses()
           .InheritedFrom<IRepository>()
           .Configure(b => b.InThreadScope())); 
```

在我看来，结合面向特征的结构，约定方法是最干净的。

# android - 在 ViewPager 中显示时如何刷新 ListView？

> ID：11985454
> 
> 赞同：0
> 
> 时间：2012-08-16T10:41:50.883
> 
> 标签：android, listview, android-viewpager

我在 ViewPager 中有 2 个活动。活动 A 将项目添加到数据库，活动 B 在 ListView 中显示这些添加的项目。我有一个名为的方法`GetFavs()`，它连接到数据库并提取数据并显示项目。每次在 ViewPager 中显示活动 B 时，
如何调用方法？`GetFavs()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:51:33.163

我认为您可以在 B 中创建静态适配器，并且每次在 A 中添加新项目时，您都可以这样做

```
if (B.adapter != null){
    ...//Add items to your adapter
    B.adapter.notifyDataSetChange();
} 
```

使用此代码，您每次看到 B 时都无法加载完整数据。您还可以传递整个 B 上下文并创建方法以在其中添加新项目。

```
B parent;
parent.addItemToList(Item item); 
```

# c# - 模拟错误

> ID：11985457
> 
> 赞同：0
> 
> 时间：2012-08-16T10:41:55.893
> 
> 标签：c#, .net

模拟后，我在 c# 代码中收到以下错误。

{“用于模拟的令牌无效 - 不能复制。”}

它是普通的 WPF Windows 应用程序。在应用程序开始时模拟了不同的用户。在随机位置出现此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-04T17:12:26.547

我有类似的问题，解决方案是在实际任务级别设置模拟上下文，而不是在单个模拟上下文下执行所有任务。早些时候，当我直接从按钮单击事件中使用模拟上下文时，我正在执行所有相关任务，但意识到模拟上下文在任务之间失败了。因此，一旦我将上下文分离为专门用于每个任务，一切正常！祝你好运。

# javascript - 如何在jQuery中删除异常类

> ID：11985461
> 
> 赞同：0
> 
> 时间：2012-08-16T10:42:15.877
> 
> 标签：javascript, jquery, addclass, removeclass, getelementsbyclassname

我有一个小 jQuery 案例。所以，我想删除所有的块类，但几乎没有例外——如果这个 div/块有一些类，它们中的每一个都会被删除，但没有一个指定。我尝试过这样的事情，但它不起作用。

```
$('#rounded_items').removeClass(function(){
    $('#rounded_items').not.getElementsByClassName('small_menu');
}).addClass('main_menu'); 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T10:45:18.580

有点不清楚你到底想做什么，但我最好的猜测是这样的：

```
$('#rounded_items:not(.small_menu)').removeClass().addClass('main_menu'); 
```

...这会将所有类名替换`main_menu`为所有具有 ID `rounded_items`(!!!) 的项目，除了那些具有 class 的项目`small_menu`。

请注意，ID**应该是唯一的**。怎么强调都不过分。*因此，按 ID 选择并期望多个元素*是没有意义的，以便您可以进一步按类过滤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T10:45:45.833

ID 应该是唯一的，因此您所要做的就是在删除类之前检查您所针对的**单个**元素是否没有类：

```
var isSmall = $('#rounded_items').is('.small_menu');
$('#rounded_items').attr('class', isSmall ? 'main_menu' : ''); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T10:52:16.967

您不能只检查对象是否具有不应删除的此类。如果有 - 删除所有类并添加所需的类。像这样的东西：

```
if ($("#item").hasClass("neededClass")){
   $("#item").removeClass();
   $("#item").addClass("neededClass");
} 
```

我不确定这是否是您想要做的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T10:45:55.877

使用以下代码

```
$('#rounded_items').removeClass(function(){
     var el = $('.small_menu');
    $('#rounded_items').not(el);
}).addClass('main_menu'); 
```

# vb.net - 使用 WebForms 处理 500 错误

> ID：11985462
> 
> 赞同：0
> 
> 时间：2012-08-16T10:42:16.667
> 
> 标签：vb.net, error-handling

我在 VB.NET 中工作时遇到 500 错误处理问题。

我的问题是，当抛出 500 错误时，我的网站会重定向到我的错误页面。但是，如果我检查 Chrome 中的“网络”选项卡，我会看到抛出错误的页面得到 200（OK），然后被重定向到的页面又得到 200。

我是否认为应该在引发错误的页面上返回 500 错误，并为重定向页面返回 200？

我的 web config 的错误处理设置如下：

```
<customErrors defaultRedirect="~/error.aspx" mode="On">
      <error statusCode="400" redirect="~/400Error.aspx" />
      <error statusCode="500" redirect="~/error.aspx?code=500" />
    </customErrors>

<httpErrors errorMode="Custom" existingResponse="Replace">
      <clear />
      <remove statusCode="404" subStatusCode="-1" />
      <error statusCode="404" prefixLanguageFilePath="" path="/error.aspx" responseMode="ExecuteURL" />
      <remove statusCode="500" subStatusCode="-1" />
      <error statusCode="500" prefixLanguageFilePath="" path="/error.aspx?code=500" responseMode="ExecuteURL" />
      <remove statusCode="400" subStatusCode="-1" />
      <error statusCode="400" prefixLanguageFilePath="" path="/400Error.aspx" responseMode="ExecuteURL" />
    </httpErrors> 
```

但仅此一项就导致了我上面描述的问题。

我想也许我可以通过在 Global.asax 文件中使用 Application_Error 在页面上返回 500：

```
Sub Application_Error(ByVal sender As Object, ByVal e As EventArgs)
        Response.StatusCode = System.Net.HttpStatusCode.InternalServerError
        Server.ClearError()
        Server.Transfer("error.aspx?code=500")
    End Sub 
```

或者通过在我的母版页中添加类似的代码在页面级别：

```
 Protected Sub Page_Error(ByVal sender As Object, ByVal e As System.EventArgs) Handles MyBase.Error
        Response.StatusCode = System.Net.HttpStatusCode.InternalServerError
        Server.ClearError()
        Server.Transfer("error.aspx?code=500")
    End Sub 
```

通过在页面级别捕获错误，我被重定向到错误页面，其结果与处理 web.config 文件中的错误所产生的结果相同。而在应用程序级别捕获错误似乎会返回错误页面而不执行重定向（？），并且在这种情况下只返回一个 200。

我已经尝试了上面代码的组合 - 我知道 Server.ClearError() 将阻止错误从“冒泡”到 web.config 级别？但是我尝试过使用和不使用那条线，但没有取得多大成功。

谁能告诉我在抛出错误的页面上返回 500 是否正确，如果是，我能做些什么来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:50:16.210

我发现如果我在应用程序级别抛出异常，那么我实现了返回错误页面而不重定向，以及返回500错误的结果：

```
Sub Application_Error(ByVal sender As Object, ByVal e As EventArgs)
        Dim ex = Server.GetLastError()
        //log error details
        Response.StatusCode = System.Net.HttpStatusCode.InternalServerError
        Server.ClearError()
        Throw New Exception
    End Sub 
```

我不确定这是否是解决我的问题的最佳方法，但如果其他人觉得这很有用，我会放弃。

# flash - Flash Builder 4.6 错误

> ID：11985465
> 
> 赞同：0
> 
> 时间：2012-08-16T10:02:56.763
> 
> 标签：flash, actionscript

我正在 FB 中开发一个 actionscript3 项目，我遇到了以下错误。一旦我写了一个代码，它会遇到一些错误，例如`TypeError: Error #1009: Cannot access a property or method of a null object reference.`我不能删除这个代码！我的意思是，我确实删除了它，但是编译器说在线出错，*不再存在*。

难道只有我一个？如何修复此错误？

```
package
{
    import flash.display.MovieClip;

    public class AirHockey extends MovieClip
    {

        public function AirHockey():void
        {

        }
    }
} 
```

编译器说第 200 行有错误，但我已经删除了整个代码并且没有**第 200 行**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:57:01.807

我在 4.6 中见过几次。我找到的唯一解决方案是删除整个类文件（从磁盘中）并创建一个新文件。从来没有发现为什么会这样，但确实如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:14:42.087

无法修复的错误...已安装开源`Flash Develop`

# php - Oracle 持久连接从异步 PHP 脚本中最大化服务器

> ID：11985468
> 
> 赞同：0
> 
> 时间：2012-08-16T10:42:26.243
> 
> 标签：php, oracle, persistence, oracle-call-interface

我在 PHP 中编写了一个简单的 OCI 包装类，它使用持久连接 ( `oci_pconnect`)。类析构函数调用`oci_close`.

这个类用于我所有的 AJAX PHP 脚本，因此被大量调用。但是，尽管使用了持久连接并且`oci_close`没有从缓存中删除它们（根据我的理解），但与数据库的打开连接数已达到最大值，导致系统失败。我期望打开的连接数只是整个应用程序的一个！

我在做一些明显错误的事情吗？

* * *

骨架代码：

```
class Oracle {
  private $connection;
  private $connected;

  function __construct($connectionString, $username, $password) {
    if (!($this->connection = @oci_pconnect($username, $password, $connectionString))) {
      echo 'Cannot connect to '.$username.'@'.$connectionString;
      $this->connected = false;
    } else {
      $this->connected = true;
    }
  }

  function __destruct() {
    if ($this->connected) {
      oci_close($this->connection);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:13:10.067

如果您希望它持久，请不要关闭连接。

# mysql - Mysql LEFT OUTER JOIN with LIMIT？

> ID：11985469
> 
> 赞同：1
> 
> 时间：2012-08-16T10:42:27.483
> 
> 标签：mysql, sql, join

这是我的查询

```
SELECT `t`.`id` AS `t0_c0`
 , `news`.`id` AS `t2_c0`
 , `news`.`title` AS `t2_c1`
 , `news`.`url` AS `t2_c2`
 , `news`.`date` AS `t2_c3`
 , `news`.`hash` AS `t2_c4`
 , `news`.`list_id` AS `t2_c5`
FROM
`words` `t`
LEFT OUTER JOIN `words_news` `news_news`
ON (`t`.`id` = `news_news`.`word_id`)
LEFT OUTER JOIN `news` `news`
ON (`news`.`id` = `news_news`.`news_id`)
WHERE
  (`t`.`id` IN (8229, 8574, 7901)) 
```

我只需要从`news`表中选择 5 个新闻，但不知道如何，我应该如何编写查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:44:04.567

试试这个：

```
 SELECT `t`.`id` AS `t0_c0`
     , `news`.`id` AS `t2_c0`
     , `news`.`title` AS `t2_c1`
     , `news`.`url` AS `t2_c2`
     , `news`.`date` AS `t2_c3`
     , `news`.`hash` AS `t2_c4`
     , `news`.`list_id` AS `t2_c5`
FROM
  `words` `t`
LEFT OUTER JOIN `words_news` `news_news`
ON (`t`.`id` = `news_news`.`word_id`)
LEFT OUTER JOIN (SELECT * FROM `news` LIMIT 5) `news`
ON (`news`.`id` = `news_news`.`news_id`)
WHERE
  (`t`.`id` IN (8229, 8574, 7901)); 
```

或者

```
SELECT `t`.`id` AS `t0_c0`
 , `news`.`id` AS `t2_c0`
 , `news`.`title` AS `t2_c1`
 , `news`.`url` AS `t2_c2`
 , `news`.`date` AS `t2_c3`
 , `news`.`hash` AS `t2_c4`
 , `news`.`list_id` AS `t2_c5`
FROM
  `words` `t`
LEFT OUTER JOIN `words_news` `news_news`
ON (`t`.`id` = `news_news`.`word_id`)
LEFT OUTER JOIN `news` `news`
ON (`news`.`id` = `news_news`.`news_id`)
JOIN (SELECT @var_ctr := 0) a
WHERE IF(`news`.`id` IS NOT NULL, @var_ctr := @var_ctr + 1, @var_ctr) <= 5
      AND (`t`.`id` IN (8229, 8574, 7901)); 
```

# jquery - 更改 next('input') 的 attr 失败

> ID：11985470
> 
> 赞同：0
> 
> 时间：2012-08-16T10:42:28.420
> 
> 标签：jquery, input, attr, next

我正在尝试将 dom 中的下一个输入设置为只读但出错了。

继承人的jQuery：

```
$('select.expense-code').change(function(e) {

    // If expense code is travel mileage
    if ($(this).val() == '5') {
        // Set miles to read only
        var currentRowAmount = $(e.target).next("input.amount");
        currentRowAmount.attr('readonly', true);
    }

}); 
```

这是dom的那一部分：

![DOM](../Images/12fda1c07362ef3eb98f51c09a8321fe.png)

我试过只设置 bg 颜色等，但没有任何效果，我确定它到 .next() 位，但需要一个正确方向的刺激。Console.log() 只是给你[]。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T10:47:48.280

`.next()`抓取紧邻的下一个兄弟，它不搜索任何东西，过滤器参数只是为了确保下一个兄弟在过滤器内。

来自[文档](http://api.jquery.com/next/)：

> 描述：获取匹配元素集中每个元素的紧随其后的兄弟。如果提供了选择器，**则仅当它与该选择器匹配时，它才会检索下一个兄弟。**

由于您已经在目标上有 id ，您可以这样做：

```
// current id ($(this).prop('id')) is Expense0ExpenseCode
var curId = $(this).prop('id');

// you are targetting Expense0Amount, which has the same Expense0 as the prefix
// so replace the suffix (ExpenseCode -> Amount):
var targetId = curId.replace('ExpenseCode', 'Amount');

// do the prop change
$('#' + targetId).prop('readonly', true); 
```

一个班轮：

```
$('#' + $(this).prop('id').replace('ExpenseCode', 'Amount')).prop('readonly', true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:51:55.193

您的元素根本不是兄弟姐妹，它们位于两个不同的父`.span1`元素中：

```
$('select.expense-code').on('change', function(e) {
    if ($(this).val() == '5') {
        $(this).closest('.span1')
               .next('.span1')
               .find('input.amount')
               .prop('readonly', true);
    }
}); 
```

# javascript - 登陆页面时IE onFocus不起作用

> ID：11985474
> 
> 赞同：0
> 
> 时间：2012-08-16T10:42:45.400
> 
> 标签：javascript, input, onclick, onblur, onfocus

我已经使用 JS 阅读了一些关于此的主题。[当用户登陆页面](http://dev.assessmentday.co.uk/aptitudetests_numerical.htm.)时，有没有办法使用 JS 让 onFocus 在 IE 中工作？

如果您单击搜索框并再次关闭，`search site...`则会出现 。它在所有其他浏览器中都能正常工作。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:53:06.003

将 value 属性添加到搜索输入字段

```
<input value="search site..." class="searchBox" id="q" onfocus="this.value = this.value=='search site...'?'':this.value;" onblur="this.value = this.value==''?'search site...':this.value;" type="text" size="70"/> 
```

# silverlight - 在 OOB Silverlight 应用程序中使用 JsonServiceClient

> ID：11985475
> 
> 赞同：3
> 
> 时间：2012-08-16T10:42:46.540
> 
> 标签：silverlight, silverlight-5.0, servicestack

运行 OOB（浏览器外）时是否可以在 Silverlight 中使用 JsonServiceClient？

我有一个后端系统，它使用 ServiceStack 公开了许多 web 服务，我也想在系统的客户端使用 ServiceStack。

我正在 Silverlight 5 中开发客户端。当我测试在浏览器中运行的客户端时，JsonServiceClient 以 expexted 的方式工作 - 但在运行 OOB（要求）时，它会引发异常，指出“DOM/脚本桥已禁用”。- 发生这种情况是因为在运行 OOB 时您无权访问浏览器 API - 但是有什么解决方法吗？

在浏览器中工作但抛出异常 OOB 的代码：

```
var restClient = new JsonServiceClient("http://127.0.0.1:1030");
restClient.GetAsync<AgentModelResponse>("/agents",
  r =>
  {
    r.Agents.ForEach(x => Agents.Add(x));
  },
  (r, ex) =>
  {
    throw ex;
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-17T23:08:54.603

我知道这是一个旧问题，但由于我刚刚遇到同样的问题，也许它仍然可以帮助其他人。所以这个问题可以通过将客户端的 ShareCookiesWithBrowser 属性设置为 false 来解决：

restClient.ShareCookiesWithBrowser = false;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:52:49.983

您需要使用 SSL 托管和访问您的 Web 服务，以便 Web 服务调用在 OOB Silverlight 应用程序中工作。

[http://msdn.microsoft.com/en-us/library/dd550721(VS.96).aspx](http://msdn.microsoft.com/en-us/library/dd550721(VS.96).aspx)

# java - 重新安装 CA 证书 - Tomcat

> ID：11985476
> 
> 赞同：0
> 
> 时间：2012-08-16T10:43:01.697
> 
> 标签：java, tomcat, ssl, ssl-certificate, keytool

我犯了一个错误，我不知道如何扭转。

我将 Tomcat 配置为使用 HTTPS，首先使用 keytool 使用自签名证书成功测试。

然后我生成了一个发送给证书颁发机构的 CSR，我收到了一组 4 个证书。

我成功安装了这个证书链，但我忘了先删除自签名证书，服务器安全扫描失败。

根据建议，然后我尝试删除自签名并重新安装 CA 证书，但我不再从 keytool “证书回复已安装在密钥库中”得到正确响应 - 它只是以“证书添加到密钥库”进行响应

我假设 CSR 已经得到响应，那么有没有办法重新安装这些证书而无需生成新的 CSR 并为新证书付费？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:08:30.043

如果您`keytool`在密钥库中创建了 CSR，它会同时在该条目中生成自签名证书（至少供临时使用）。不要删除该证书的条目，因为它还包含私钥，您需要将其与您获得的证书一起使用。

当您导入在该密钥库中颁发给您的证书时，要替换自签名证书并将其与用于 CSR 的私钥相关联，您需要根据正确的别名将其导入回，可能使用链，如[本答案](https://stackoverflow.com/a/9300727/372643)所述。

# c# - 如何获取某个用户或组使用的某个文件系统对象的所有权限列表？

> ID：11985477
> 
> 赞同：1
> 
> 时间：2012-08-16T10:43:04.630
> 
> 标签：c#, .net, directoryservices, system.security

我在 C# winh .NET4 中执行此操作。很容易获得任何文件或文件夹的*当前*用户凭据（[像这样](http://social.msdn.microsoft.com/forums/en-US/clr/thread/2a621122-6bf3-48bb-88a9-d121ee5310dd)）。但问题是要获得**任何给定**用户或组的权限集合（读取、读取属性、写入等），我找不到解决方案。文件和文件夹位于网络共享资源中。用户和组基于 Active Directory。使用 System.DirectoryServices 管理帐户非常容易。但是文件系统对象的权限不在 Active Directory 中，这就是问题所在。

我将非常感谢您的帮助！

# java - 我可以为 spring 提供我自己的变量插值器吗？

> ID：11985479
> 
> 赞同：3
> 
> 时间：2012-08-16T10:43:10.033
> 
> 标签：java, spring, configuration, apache-commons-config

我了解到我可以为 Spring 提供一个`<context:property-placeholder>`元素，该元素似乎使用[PropertyPlaceholderConfigurer](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/beans/factory/config/PropertyPlaceholderConfigurer.html)`${foo}`针对属性文件插入变量（即替换标记，如）。

有没有办法自定义用于解析令牌的类？特别是，我很想使用[Apache Commons Config](http://commons.apache.org/configuration/) [`Configuration`](http://commons.apache.org/configuration/apidocs/org/apache/commons/configuration/Configuration.html)对象来提供令牌的值，而不是使用属性文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:00:04.997

是的，子类`PropertyPlaceholderConfigurer`化并覆盖该`loadProperties`方法。此方法传递一个`Properties`对象，您可以根据需要填充值。或者，您可以定义一个替代实现`PropertiesPersister`并将其插入普通的`PropertyPlaceholderConfigurer`.

在 Spring 3.1 中，您可以通过创建自己的`PropertySource`实现并将其注册到应用程序上下文（通常使用`ApplicationContextInitializer`. [这篇博客文章](http://scottfrederick.blogspot.co.uk/2012/05/custom-property-source-in-spring-31.html)很好地概述了该过程。 `<context:property-placeholder>`在 Spring 3.1 中，将从注册`PropertySources`的以及您指定的任何属性文件中提取值。

# eclipse - 在 eclipse helios 中找不到 web 项目选项

> ID：11985486
> 
> 赞同：0
> 
> 时间：2012-08-16T10:43:43.917
> 
> 标签：eclipse

谁能告诉我如何在 eclipse helios 中获得 web 项目选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:50:37.767

你有 Java EE 版本吗？

如果不从这里下载：http: [//www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/heliossr2](http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/heliossr2)

您仍然可以将旧的 Helios Java 工作区与 Java EE 一起使用。

# iphone - 自定义 UITableViewCell 给我：这个类不符合键值编码

> ID：11985487
> 
> 赞同：31
> 
> 时间：2012-08-16T10:44:02.023
> 
> 标签：iphone, ios, uitableview

**首先，**这个讨论并没有解决我的问题。

[自定义 UITableViewCell 子类：该类不符合键值编码](https://stackoverflow.com/questions/9713651/custom-uitableviewcell-subclass-this-class-is-not-a-key-value-coding-compliant)

**设置：**

我有一个 Person 对象数组`MainViewController`。想要显示 in 中的`UITableView`对象`AllContactsViewController`。

**问题：**

使用默认值时，一切都按预期工作`UITableViewCell`。当我使用我的自定义时`TableCell`，我收到一个错误，指出这个类不符合键值编码。

在我将我的三个`outlets`中`IB`的任何一个连接到我的`TableCell`班级后，立即发生此错误。

**笔记：**

`TableCell`具有三个属性： a `name`& `email`label + `imageView`。

希望你能帮忙。

**表格单元格.h**

```
#import <UIKit/UIKit.h>

@interface TableCell : UITableViewCell

@property (weak, nonatomic) IBOutlet UILabel *nameLabel;
@property (weak, nonatomic) IBOutlet UILabel *emailLabel;
@property (weak, nonatomic) IBOutlet UIImageView *imageView;

@end 
```

**表格单元格.m**

```
#import "TableCell.h"

@implementation TableCell
@synthesize nameLabel, imageView, emailLabel; 
```

**AllContactsViewController.m**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdent = @"TableCell";

    TableCell *cell = (TableCell *)[tableView dequeueReusableCellWithIdentifier:cellIdent];

    if (cell == nil) {

        NSArray *array = [[NSBundle mainBundle]loadNibNamed:@"TableCell" owner:self options:nil];
        cell = [array objectAtIndex:0];
    }

    NSString *firstAndLastnameString =
    [NSString stringWithFormat:@"%@ %@",
     [(NewContact *)[self.allContactsArray objectAtIndex:[indexPath row]] firstName],
     [(NewContact *)[self.allContactsArray objectAtIndex:[indexPath row]] lastName]];

    cell.nameLabel.text = firstAndLastnameString;

    cell.emailLabel.text =
    [(NewContact *)[self.allContactsArray objectAtIndex:[indexPath row]] eMail];

    cell.imageView.image =
    [(NewContact *)[self.allContactsArray objectAtIndex:[indexPath row]] contactPicture];

    return cell;
} 
```

更新：

也许IB的截图会有所帮助。

![在此处输入图像描述](../Images/34325a104af6f1c234dd8d0cf0ed0b5c.png)

添加了完整的 AllContactsViewController.h

```
#import <UIKit/UIKit.h>
#import "VCDelegate.h"
#import "TableCell.h"

@interface AllContactsViewController : UIViewController <UITableViewDataSource, UITableViewDelegate>

@property (weak, nonatomic) id <VCDelegate>delegate;

@property (weak, nonatomic) IBOutlet UITableView *allContactsTableView;

@property (strong, nonatomic) NSMutableArray *allContactsArray;

@property (assign) int currentArrayIndexNumber;

- (IBAction)closeBtnTapped:(id)sender;

@end 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-08-16T11:04:35.007

如果您要连接文件所有者的插座，您应该做不同的事情：

1 - 将 UITableViewCell 的类定义为您的 TableCell 类：

![在此处输入图像描述](../Images/dcf49f142306e9328a69d679d1914bff.png)

**2 - 连接不是来自文件所有者**的插座，而是来自对象列表中的 TableCell：

 **![连接插座](../Images/6b8ebbd0fa9d0d06d98cc044636154c9.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-10-12T13:15:57.253

一切都在我的项目中完成，并且在尝试使用自定义单元格及其属性时仍然收到。这是我如何解决我的问题。

```
CustomUITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"CustomUITableViewCell" forIndexPath:indexPath]; 
```

真正击中我的只是`CustomUITableViewCell`从自定义单元格的“**身份检查器**”中删除类并重新输入它..你会看到一个变化

1.  模块值
2.  从目标继承模块

让它们成为自动出现的值...不要尝试继承它或更改继承或模块值...

[![在此处输入图像描述](../Images/69b9bda67bedb67348a5de890b78bc82.png)](https://i.stack.imgur.com/xmx3Y.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-30T05:40:31.297

如果您使用的是 Xcode 6 GM，则 IB 中存在可能导致此错误的错误。我不认为 OP 有这个问题，因为它更明显（你可以在日志中看到“未定义的类 MyXXXCell”）但是因为你像我一样从谷歌得到这个问题，只需尝试在 IB 中输入类名然后再次按回车键，一旦它真正保存在 storyboard/xml 文件中就可以了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-07T10:20:44.900

我遇到了同样的问题，这里或其他讨论中的任何评论都对我有帮助……最后我做了一个干净的原因，我很确定我做的一切都是正确的，是的……神奇地工作！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-05T08:19:19.643

在 Git 合并并解决了一些冲突之后，这发生在我身上。它搞砸了我的 XCode 项目。

我尝试了整个 StackOverflow。起初我以为我的自定义类 .m 文件尚未添加到编译源类列表中。但这是一种情况，但是即使添加了它，它也给了我同样的问题。

我是如何解决的：

1.  我保留了我的 .xib 文件及其支持的自定义类 .m 和 .h 文件的备份。
2.  然后清理项目并尝试通过 XCode 运行应用程序（这可能不起作用）
3.  然后将文件重新添加回 XCode 项目，它将起作用。

干杯!

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-09T18:05:19.813

使用 Xcode 12 也有同样的问题。它只需在 Identity Inspector 上重新键入类即可。似乎是一个错误。**

# javascript - 将此事件添加到工具栏

> ID：11985493
> 
> 赞同：1
> 
> 时间：2012-08-16T10:44:14.823
> 
> 标签：javascript, tinymce

`TinyMCE`如何将此事件添加到工具栏 ID ？

```
// Adds a click handler to the current document
tinymce.dom.Event.add(document.getElementById('test'), 'click', function (e) {
    alert('test - tool bar clicked');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:17:13.707

我想这个问题与您的另一个问题具有相同的目标。我的回答可能对那个特殊目的没有帮助。好吧，这里是：

```
$('#' + your_editor_id + '_toolbargroup').bind('click', function(){
    alert('test - tool bar clicked');
}) 
```

# android - Android：java.lang.OutOfMemoryError：位图大小超出 VM 预算

> ID：11985497
> 
> 赞同：-8
> 
> 时间：2012-08-16T10:44:30.437
> 
> 标签：android, android-layout

> **可能重复：**
> [java.lang.OutOfMemoryError：位图大小超出 VM 预算 - Android](https://stackoverflow.com/questions/1949066/java-lang-outofmemoryerror-bitmap-size-exceeds-vm-budget-android)

我目前正在开发一个 Android 应用程序，它显示从 URL 下载的图像并将它们放在 ListView 中。当它被点击时，会为点击的图像创建一个新的 ImageView。单击较小的图像（7kb）时，它运行良好。甚至可以正常运行到 200kb。但是比这更大的，我得到一个错误“应用程序已意外停止。请重试。”。查看 LogCat，问题似乎与 Android 内存不足有关。有针对这个的解决方法吗？还是只是将图像的分辨率降低到 200kb 范围的问题？当然，图像大小不应该超过 1 或 2 兆字节？加载可能需要更长的时间，但不明白为什么会引发错误。

任何帮助将非常感激！

缩放.java

```
public class Zoom extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.gallery_zoom);

        String selection = getIntent().getExtras().getString("image");
        Toast.makeText(this, selection, Toast.LENGTH_LONG).show();

        new backgroundLoader().execute();
    }

    public class backgroundLoader extends AsyncTask<Void, Void, Void> {
        Bitmap bmp;

        @Override
        protected Void doInBackground(Void... params) {
            BitmapFactory.Options bmpOptions;
            bmpOptions = new BitmapFactory.Options();
            bmpOptions.inSampleSize = 1;
            bmp = LoadImage(getIntent().getExtras().getString("image"), bmpOptions);
            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            ImageView image = (ImageView) findViewById(R.id.imageZoom);
            image.setImageBitmap(bmp);
            super.onPostExecute(result);
        }

    }

    private Bitmap LoadImage(String URL, BitmapFactory.Options options) {
        Bitmap bitmap = null;
        InputStream in = null;
        try {
            in = OpenHttpConnection(URL);
            bitmap = BitmapFactory.decodeStream(in, null, options);
            in.close();
        } catch (IOException e1) {
        }
        return bitmap;

    }

    private InputStream OpenHttpConnection(String strURL) throws IOException {
        InputStream inputStream = null;
        URL url = new URL(strURL);

        HttpURLConnection connection = (HttpURLConnection) url.openConnection();
        try {
            InputStream in = new BufferedInputStream(connection.getInputStream());
            return in;
        } catch (Exception exception) {
            exception.printStackTrace();
            return null;
        }
    }

} 
```

LogCat 日志

```
08-13 07:35:01.798: E/dalvikvm-heap(1132): 48064000-byte external allocation too large for this process.
08-13 07:35:01.888: E/GraphicsJNI(1132): VM won't let us allocate 48064000 bytes
08-13 07:35:01.888: D/dalvikvm(1132): GC_FOR_MALLOC freed 1K, 54% free 2694K/5831K, external 2229K/3423K, paused 19ms
08-13 07:35:01.888: D/skia(1132): --- decoder->decode returned false
08-13 07:35:01.888: W/dalvikvm(1132): threadid=14: thread exiting with uncaught exception (group=0x40015560)
08-13 07:35:01.898: E/AndroidRuntime(1132): FATAL EXCEPTION: AsyncTask #1
08-13 07:35:01.898: E/AndroidRuntime(1132): java.lang.RuntimeException: An error occured while executing doInBackground()
08-13 07:35:01.898: E/AndroidRuntime(1132):     at android.os.AsyncTask$3.done(AsyncTask.java:200)
08-13 07:35:01.898: E/AndroidRuntime(1132):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
08-13 07:35:01.898: E/AndroidRuntime(1132):     at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
08-13 07:35:01.898: E/AndroidRuntime(1132):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
08-13 07:35:01.898: E/AndroidRuntime(1132):     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
08-13 07:35:01.898: E/AndroidRuntime(1132):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
08-13 07:35:01.898: E/AndroidRuntime(1132):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
08-13 07:35:01.898: E/AndroidRuntime(1132):     at java.lang.Thread.run(Thread.java:1019)
08-13 07:35:01.898: E/AndroidRuntime(1132): Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
08-13 07:35:01.898: E/AndroidRuntime(1132):     at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
08-13 07:35:01.898: E/AndroidRuntime(1132):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:470)
08-13 07:35:01.898: E/AndroidRuntime(1132):     at com.example.example.mobile.application.gallery.Zoom.LoadImage(Zoom.java:72)
08-13 07:35:01.898: E/AndroidRuntime(1132):     at com.example.example.mobile.application.gallery.Zoom.access$0(Zoom.java:67)
08-13 07:35:01.898: E/AndroidRuntime(1132):     at com.example.example.mobile.application.gallery.Zoom$backgroundLoader.doInBackground(Zoom.java:54)
08-13 07:35:01.898: E/AndroidRuntime(1132):     at com.example.example.mobile.application.gallery.Zoom$backgroundLoader.doInBackground(Zoom.java:1)
08-13 07:35:01.898: E/AndroidRuntime(1132):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
08-13 07:35:01.898: E/AndroidRuntime(1132):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
08-13 07:35:01.898: E/AndroidRuntime(1132):     ... 4 more
08-13 07:35:01.908: W/ActivityManager(61):   Force finishing activity com.example.example.mobile.application/.gallery.Zoom 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:49:50.950

我建议考虑一种更复杂的缓存方法，以确保您永远不会达到 VM 的内存限制。Android 自己的高级课程网站是资源的绝佳去处。本教程最关键的部分是创建一个 LRUCache，该 LRUCache 限制为 VM 内存限制的百分比。

[http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T11:03:16.583

一些想法

1.  不要在 AsyncTask 中保留对位图的引用，通过将位图定义为参数而不是 Void 来正确使用它。[在这里](http://developer.android.com/guide/components/processes-and-threads.html#Threads)学习。

2.  您可能需要回收位图。[请参阅此处](http://developer.android.com/training/displaying-bitmaps/index.html)的Android 开发人员培训，了解如何处理位图。

3.  [在此处](http://android-developers.blogspot.se/2011/03/memory-analysis-for-android.html)学习内存分析工具 (MAT) 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T10:53:22.210

首先你要知道你的 200Kb 是压缩的 jpg 格式。Android 以位图非压缩格式存储图像。根据照片的大小，每张照片最多可以添加几兆字节。

要尽量减少问题，您可以查看 BitmapFactry insamplesize 方法：

[http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inSampleSize](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inSampleSize)

它允许您打开图像，但分辨率较低（2 的幂）。

也尝试积极地打电话：

```
mybitmap = null;
System.gc;
System.runFinalization;
System.gc; 
```

每次都可以。

# c# - Signing a user in through ASP.NET Membership?

> ID：11985498
> 
> 赞同：-1
> 
> 时间：2012-08-16T10:44:31.780
> 
> 标签：c#, asp.net, sql-server-2008

As mentioned in [this link](http://chandradev819.wordpress.com/2011/04/11/how-to-encrypt-and-decrypt-password-in-asp-net-using-c/)

I have hashed the password and stored LogIn details in my Database table.

Now I'm using LogIn page of already existing ASP.NET page (through Account folder that is in-built).. How do I make this page to interact with my DB and redirect to his/her profile?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:58:14.013

If you are using `asp.net membership` provider

After you obtain the username and password you can call [Membership.ValidateUser](http://msdn.microsoft.com/en-us/library/system.web.security.membership.validateuser.aspx) method.

eg

```
if (Membership.ValidateUser(userName.Text, password.Text))
{
  if (Request.QueryString["ReturnUrl"] != null)
  {
    FormsAuthentication.RedirectFromLoginPage(userName.Text, false);
  }
  else
  {
    FormsAuthentication.SetAuthCookie(userName.Text, false);
  }
}
else
{
  Response.Write("Invalid UserID and Password");
} 
```

Read more about [Use Membership in ASP.NET](http://msdn.microsoft.com/en-us/library/ff648345.aspx)

# sql - 带条件的 WHERE 子句

> ID：11985501
> 
> 赞同：0
> 
> 时间：2012-08-16T10:44:49.120
> 
> 标签：sql

好的，问题来了

```
 SELECT CTE.TECHNICIANID, SUM(TLEVEL) AS TLEVEL, TECH.PASSEDDRUGTEST, TECH.PASSEDBACKGROUNGCHECK, TECH.FIRSTNAME, TECH.LASTNAME, 
        CM.CITYID, CM.ADDRESS, CM.EMAIL, CM.PHONENUMBER, CM.ZIPCODE, CNTRY.COUNTRYNAME, SM.STATENAME,
         CM.LATITUDE, CM.LONGITUDE FROM CTE
        INNER JOIN TECHNICIAN TECH ON CTE.TECHNICIANID = TECH.TECHNICIANID 
        INNER JOIN SERVICEORDER SO ON SO.SERVICEORDERID = @SERVICEORDERID
        INNER JOIN CONTRACT CONT ON SO.CONTRACTID = CONT.CONTRACTID
        INNER JOIN CONTACTMASTER CM ON CM.CONTACTID = TECH.CONTACTID
        INNER JOIN COUNTRYMASTER CNTRY ON CM.COUNTRYID = CNTRY.COUNTRYID
        INNER JOIN STATEMASTER SM ON SM.STATEID = CM.STATEID
        --WHERE CONT.DRUGSCREENINGREQUIRED = CASE CONT.DRUGSCREENINGREQUIRED  WHEN 'TRUE' THEN TECH.PASSEDDRUGTEST END AND
        --CONT.BACKGROUNDCHECKREQUIRED = CASE CONT.BACKGROUNDCHECKREQUIRED WHEN 'TRUE' THEN TECH.PASSEDBACKGROUNGCHECK END
        GROUP BY CTE.TECHNICIANID, TECH.PASSEDDRUGTEST, TECH.PASSEDBACKGROUNGCHECK,CM.LATITUDE, TECH.FIRSTNAME, TECH.LASTNAME, 
        CM.CITYID, CM.ADDRESS, CM.EMAIL, CM.PHONENUMBER, CM.ZIPCODE, CNTRY.COUNTRYNAME, SM.STATENAME, CM.LONGITUDE ORDER BY TLEVEL DESC 
```

使用 where 子句查看查询中的注释部分，我想要的是在`drugscreening`需要时`true`我想要所有记录，`passeddrugtest`否则`true`我不想应用任何条件

编辑：当`CONT.DRUGSCREENINGREQUIRED`and`CONT.BACKGROUNDCHECKREQUIRED`为真时，我只想用`TECH.PASSEDDRUGTEST`and过滤记录`TECH.PASSEDBACKGROUNGCHECK`。`TECH.PASSEDDRUGTEST`如果它们不是真的，我想要所有记录，无论`TECH.PASSEDBACKGROUNGCHECK`是真还是假。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:48:07.063

也许我误解了这个问题，但你能不能不这样做？

```
WHERE CONT.DRUGSCREENINGREQUIRED = 'FALSE' OR CONT.DRUGSCREENINGREQUIRED = 'TRUE' AND TECH.PASSEDDRUGTEST = 'TRUE' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T11:48:38.400

如果这些标志是独立的（与问题相反，但在我看来应该如此），您可能会检索不需要检查或通过检查的记录，简而言之如下：

```
WHERE (CONT.DRUGSCREENINGREQUIRED = 'FALSE' OR TECH.PASSEDDRUGTEST = 'TRUE')
  AND (CONT.BACKGROUNDCHECKREQUIRED = 'FALSE' OR TECH.PASSEDBACKGROUNGCHECK = 'TRUE') 
```

如果你真的想检查`passed`两个标志是否都被提升了，那么你可以使用这个模式：

```
WHERE (    CONT.DRUGSCREENINGREQUIRED = 'FALSE' 
        OR CONT.BACKGROUNDCHECKREQUIRED = 'FALSE'
        OR (     TECH.PASSEDDRUGTEST = 'TRUE' 
             AND TECH.PASSEDBACKGROUNGCHECK = 'TRUE'
           )
      ) 
```

# ios - 无法使用 iOS SDK 和本机 Facebook 应用程序对 Facebook 进行身份验证

> ID：11985502
> 
> 赞同：6
> 
> 时间：2012-08-16T10:44:50.400
> 
> 标签：ios, facebook, authorization

我有什么以及发生了什么问题：

1.  我有一个带有游戏应用程序的 Facebook 帐户（每天人们都在玩）
2.  我还有一个带有测试应用程序的 Facebook 帐户，该帐户最近使用默认设置创建。
3.  我的 iPod 上有本机 Facebook 应用程序
4.  我正在开发使用 Facebook iOS SDK 的 iOS 应用程序。

无效流量：

如果我使用第一个应用程序的 App ID/API 密钥，我会打开我的应用程序并尝试登录。Facebook SDK 打开本机 FB 应用程序并向我显示该屏幕![在此处输入图像描述](../Images/42502e5912f13c6c24ac7a40053e268e.png)

我按 OK 并返回我的 iOS 并出现此类错误且没有访问令牌：

```
(NSError *) $0 = 0x001710f0 Error Domain=com.facebook.sdk Code=2 "The operation couldn’t be completed. (com.facebook.sdk error 2.)" UserInfo=0x16d4b0 {com.facebook.sdk:ErrorLoginFailedOriginalErrorCode=210} 
```

有效流程：

如果我使用第二个（测试）应用程序中的 App ID/API 密钥，我会打开我的应用程序并尝试登录。Facebook SDK 打开本机 FB 应用程序并向我显示该屏幕![在此处输入图像描述](../Images/a8adc6d20f7e260eda24325451012784.png)

我按 OK 并使用有效的访问令牌返回我的 iOS。

应用程序的设置是相同的，我没有看到任何差异。如果我有本机 Facebook 应用程序，则会出现此问题。如果我没有，Facebook SDK 会打开浏览器，授权将通过第一个和第二个 App ID 成功。

如果有人遇到这样的问题，请帮忙。非常感谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-22T08:37:13.593

我解决了这个问题。

实际上，在这里和那里更改后，我发现我的捆绑包 ID 不匹配。我在以下 3 个地方保持捆绑 ID 相同并且它有效：

1.  项目的包标识符。
2.  在您的 FB a/c 中，名为“iOS Bundle ID：”的文件位于 Native iOS App 标题下。
3.  AppDelegate.m 中的通知字符串值

    `NSString *const FBSessionStateChangedNotification = @"yourbundleid:FBSessionStateChangedNotification";`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T20:04:42.460

我发现我在请求权限时收到了同样的错误：“offline_access”。当我停止请求此权限时，错误消失了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T23:47:02.860

我遇到了同样的问题，我的 BundleId 在 FB 和我的项目中都是正确的。

检查您的 FB 应用程序是否已在设置 -> Facebook 中启用。我的被​​禁用（即使我不记得禁用它），一旦我启用它，它就被修复了。

在我的测试过程中，我已经从我的 FB 帐户中多次添加和删除了我的 FB 应用程序，该帐户与我的 iPhone 相关联。它可以解释为什么我的应用程序神奇地被禁用了。

# sql - 将一行与整个字段进行比较

> ID：11985504
> 
> 赞同：0
> 
> 时间：2012-08-16T10:44:53.213
> 
> 标签：sql, ms-access

我有一张高尔夫成绩表，如下所示：

```
name           r1    r2    r3    r4    event
Tiger Woods    71    68    67    72    Buick Invitational 2006
Nathan Green   67    70    69    72    Buick Invitational 2006
J.M. Olazabal  74    64    71    69    Buick Invitational 2006
Arjun Atwal    70    67    71    71    Buick Invitational 2006 
```

我希望能够以百分比计算每个球员在给定的一天/回合中得分比对手高的频率。

例如，在上面显示的四名球员中，Tiger 在第 1 轮的得分低于仅 JM Olazabal。1/3 = 33%。

在第三轮他得分最低，所以 100%。

Arjun Atwal 在 r3 中的得分并列最高，无人击败，因此 =0%。

等等...

基本上我想检查每一行与事件字段相同的每一行。非常感谢任何帮助！

编辑：为了清楚起见，我所追求的输出如下所示：

```
Tiger Woods    33%    33%    100%   0%     Buick Invitational 2006
Nathan Green   100%   0%     67%    0%     Buick Invitational 2006
J.M. Olazabal  0%     100%   0%     100%   Buick Invitational 2006
Arjun Atwal    67%    67%    0%     67%    Buick Invitational 2006 
```

再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:15:54.387

如果您的数据存储在名为 Table1 的 MS Access 表中，则下面的 SQL 将完成此操作。您可以通过使用 count(*)-1 而不是 3 来概括这一点，以消除您有 4 个竞争对手的假设。

将以下内容粘贴到新查询的 SQL 视图中。

```
SELECT T.name, Sum(IIf(T2.r1>T.r1,1,0)*100/3), Sum(IIf(T2.r2>T.r2,1,0)*100/3), Sum(IIf(T2.r3>T.r3,1,0)*100/3), Sum(IIf(T2.r4>T.r4,1,0)*100/3)
FROM Table1 AS T, Table1 AS T2
GROUP BY T.name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:01:47.733

因为我认为这可能很有趣，所以这里的 SQL 将为您提供您描述的确切结果：

```
SELECT t.name, 
Format((Select Count(*) from [Table] where [Table].r1 > T.r1 And [Table].event = t.event)/3,"0%") as r1,
Format((Select Count(*) from [Table] where [Table].r2 > T.r2 And [Table].event = t.event)/3,"0%") as r2, 
Format((Select Count(*) from [Table] where [Table].r3 > T.r3 And [Table].event = t.event)/3, "0%") as r3, 
Format((Select Count(*) from [Table] where [Table].r4 > T.r4 And [Table].event = t.event)/3, "0%") as r4,
event
FROM [Table] as T; 
```

# ember.js - Ember js动画插入

> ID：11985509
> 
> 赞同：1
> 
> 时间：2012-08-16T10:45:04.923
> 
> 标签：ember.js

我将先解释我想要实现的目标，然后再解释我尝试了什么。我想显示 10 个条目，并制作一个动画，所以它不会只是“出现”为一个整体，而是一个接一个地呈现一个条目。即出现第一个条目，然后在 100 毫秒后出现第二个条目，依此类推。

我累的是给每个入口对象的css规则：“显示：隐藏”，然后覆盖入口视图的didInsertElement，并使用jquery淡入元素。但这并没有帮助，它只是延迟了**所有**条目的渲染。

以下是部分代码：

```
var inserted = 0;

EntryView = Ember.View.extend({
   classNames : [ 'hide' ], // hide is display:none
   didInsertElement : function(){
       this._super();
       this.$().fadeIn( inserted * 100 );
       inserted++;
   }
}) 
```

所以这里发生的情况是，添加到 DOM 的每个条目都在淡入（传递给 fad​​eIn 的值增加，使其看起来像是一个接一个地添加）

但正如我所说，它不起作用..想法？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T12:10:06.153

~~这项工作可以在`willInsertElement`处理程序~~中完成。

***更新***

好吧，我已经更新了小提琴，使用 didInsertElement （正如你所做的那样），但`this.$().hide()`首先添加了语句。我认为这并不理想，但似乎有效

[http://jsfiddle.net/Sly7/bHL66/](http://jsfiddle.net/Sly7/bHL66/)

***更新（二）***

我认为问题中提出的方法是好的，经过一番思考，我想知道为什么这不起作用......事实上，它确实如此！你确定你的css定义正确吗？

[http://jsfiddle.net/Sly7/mKvER/](http://jsfiddle.net/Sly7/mKvER/)

# drupal - 如何将日期字段添加到 Drupal？

> ID：11985512
> 
> 赞同：1
> 
> 时间：2012-08-16T10:45:10.277
> 
> 标签：drupal

有办法在 Drupal 的帖子中添加日期吗？例如[这里](http://nineteenfifteen.prototype-interactive.com/node/68)，图像下有日期（静态日期，我把这个日期放在编辑器中），但也许有办法配置drupal自动添加这个日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T16:59:37.600

将类似的内容添加到您的`node-blog.tpl.php`主题文件中。

```
'<span class="date">'.format_date($node->created, 'custom', "d F Y").'</span>' 
```

# android - Android : 以 mp3 格式录制声音

> ID：11985518
> 
> 赞同：21
> 
> 时间：2012-08-16T10:45:30.650
> 
> 标签：android, mp3, record

我正在构建一个 android 应用程序，具有通过麦克风捕获声音并通过耳机播放的功能。为此，我使用了“AudioRecord”和“AudioTrack”。以下是我正在使用的部分代码，（仅供理解）

```
mInBufferSize = AudioRecord.getMinBufferSize(mSampleRate,
            AudioFormat.CHANNEL_CONFIGURATION_MONO, mFormat);
mOutBufferSize = AudioTrack.getMinBufferSize(mSampleRate,
            AudioFormat.CHANNEL_CONFIGURATION_MONO, mFormat);
mAudioInput = new AudioRecord(MediaRecorder.AudioSource.MIC,
            mSampleRate, AudioFormat.CHANNEL_CONFIGURATION_MONO, mFormat,
            mInBufferSize);
mAudioOutput = new AudioTrack(AudioManager.STREAM_MUSIC, mSampleRate,
            AudioFormat.CHANNEL_CONFIGURATION_MONO, mFormat,
            mOutBufferSize, AudioTrack.MODE_STREAM); 
```

但主要问题是我想以 mp3 格式录制传入的声音？请帮助我，我将非常感激......

提前致谢

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2015-10-10T14:01:48.400

有一种使用 MediaRecorder 保存 .mp3 文件的解决方法。就是这样：

```
recorder = new MediaRecorder();
recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
recorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
recorder.setOutputFile(Environment.getExternalStorageDirectory()
        .getAbsolutePath() + "/myrecording.mp3");
recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);
recorder.prepare();
recorder.start(); 
```

这里重要的部分是`setOuputFormat`和`setAudioEncoder`。如果您一起使用 MediaRecorder 显然可以录制可播放的`MediaRecorder.OutputFormat.MPEG_4`mp3 `MediaRecorder.AudioEncoder.AAC`。希望这可以帮助某人。

当然，如果您更愿意使用 AudioRecorder 类，我认为下面链接的源代码 Chirag 应该可以正常工作 - [https://github.com/yhirano/Mp3VoiceRecorderSampleForAndroid](https://github.com/yhirano/Mp3VoiceRecorderSampleForAndroid)（尽管您可能需要将其中一些从日语翻译成英语)

**编辑：**正如布鲁诺和其他一些人在评论中指出的那样，这不会对MP3 中的文件*进行编码。*编码仍然是AAC。但是，如果您尝试播放通过上述代码使用 .mp3 扩展名保存的声音，它仍然可以毫无问题地播放，因为大多数媒体播放器都足够智能，可以检测到真正的编码。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-16T10:58:41.407

在 git 上，您可以找到 Mp3 Voice Recorder Sample For Android 的源代码。

[签出](https://github.com/yhirano/Mp3VoiceRecorderSampleForAndroid)此源代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-13T18:07:27.040

我知道这是一个老问题。但如果它可以帮助我创建一个带有 android java full recording app demo 的存储库，那么输出文件是一个 mp3 文件。请记住，如果不需要请求用户权限，我将目标 sdk 设置为 21。这仅用于演示目的。您可以克隆并使用它。

我使用的大部分代码都来自这个 repo：[this](https://github.com/GinRyan/AndroidMp3LameRecorderCompat64)

我的演示仓库： [mp3 录音应用](https://github.com/eliranRP/MP3Recording)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-10T05:25:08.157

将您`outputformat`的录音机设置为`MediaRecorder.OutputFormat.DEFAULT`. 我用过这个，生成的音频文件是 mp3。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-06-05T07:52:44.257

这对我有用

```
mediaRecorder = new MediaRecorder();
mediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
mediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.DEFAULT);
mediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.DEFAULT);
mediaRecorder.setOutputFile(Environment.getExternalStorageDirectory()
    .getAbsolutePath() + "/record.mp3");
mediaRecorder.prepare();
mediaRecorder.start(); 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2015-03-28T08:52:26.753

这对我来说是工作

```
outputFile = Environment.getExternalStorageDirectory()
            .getAbsolutePath() + "/myrecording.mp3";
    myAudioRecorder = new MediaRecorder();
    myAudioRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    myAudioRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
    myAudioRecorder.setAudioEncoder(MediaRecorder.OutputFormat.AMR_NB);
    myAudioRecorder.setOutputFile(outputFile);` 
```

myAudioRecorder.prepare(); myAudioRecorder.start();`

# frege - 如何在 frege 中导入不同的模块

> ID：11985527
> 
> 赞同：2
> 
> 时间：2012-08-16T10:46:37.457
> 
> 标签：frege

有人可以帮助我在haskell for Data中使用相当于导入命令的frege。我希望访问 Data.Typeable 或 Data.Time.Calendar ......以及此类模块/内置程序。

我们是否有办法知道 frege 中的可用模块......一般来说，如果我执行“import.frege._ *”*，是否有任何自动填充类型的功能或某种类型的列表表明可用的各种选项。

非常感谢您的时间和帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:15:10.527

抱歉，您想要的模块目前还没有实现。

要查看可用的内容，请点击[frege 项目页面](http://www.frege-lang.org/)`standard library`上的链接。

请记住，像这样的包名称`Data.Typeable`是缩写，`frege.data.Typeable`因此您必须`Typeable.html`在子目录中查找`data`。

还没有自动填充功能（在 eclipse 插件中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T13:04:20.927

我已经看过 Haskell 的日期和时间库，我不得不说翻译它的工作量令人生畏。Java 的内置日期和时间支持很糟糕，虽然其他 Java 库（Joda Time，JSR 310）更好，但相当庞大，并且仅部分适合纯语言。我试图从一个简单的日期（没有时间）模块开始，但它仍然有问题。我已经有一段时间没有研究这个问题了，但是人们提出这个问题是有动力的。

关于其他缺失的库，我真的鼓励您尝试至少部分自己翻译它们，这通常并不像看起来那么难。大多数代码可以“机械地”翻译，主要问题通常是其他引用的模块也丢失了。

# objective-c - 地图注释数组

> ID：11985528
> 
> 赞同：0
> 
> 时间：2012-08-16T10:46:41.013
> 
> 标签：objective-c, xcode4.3

如何在 Xcode 的 mapview 中创建一组注释？我试过 NSMutableArray *ann = [NSMutableArray alloc]init];

注释

```
CLLocationcoordinate2D thecoordinate;
thecoordinate.latitude =92.3;
thecoordinate.longitude = 12.78;
MyAnnotationClass *ann = [MyAnnotationClass alloc];
region.coordinate = thecoordinate;
[mapview addannotation: ann]; 
```

我有 57 个这些我如何将它们放在一个数组中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T10:51:40.287

将消息 addObject 发送到 NSMutableArray。

```
NSMutableArray* annotationArray = [[NSMutableArray alloc] init];
[annotationArray addObject:ann]; //ann is an instance of MyAnnotationClass. Call this method for every MyAnnotationClass object you have. 
```

另一种选择是用对象初始化数组：

```
NSMutableArray* annotationArray =[NSMutableArray arrayWithObjects: arr1, arr2, arr3, arr4, nil]; //arr1,arr2... are your MyAnnotationClass objects. 
```

然后，您可以一次将注释添加到地图视图中：

```
[mapview addAnnotations:annotationArray]; 
```

# concurrency - 是否应该在事务中读取多个 Clojure 引用以保持一致性？

> ID：11985534
> 
> 赞同：6
> 
> 时间：2012-08-16T10:47:01.887
> 
> 标签：concurrency, clojure, stm, refs

这是一个理论问题，我希望更好地理解 Clojure 的并发性。

假设我正在写 boids。假设每个 boid 是一个单独的绿色线程，它在表示世界网格的向量或 refs 中改变位置。想想希基的蚁群。

现在，Clojure.org 上的文档指出“所有对 Refs 的读取都将看到从事务起点（它的‘读取点’）开始的‘参考世界’的一致快照。”

这是否意味着我只能通过读取事务中的引用向量（即在 dosync 上下文中）来获得模拟的一致快照，例如绘制它？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T11:11:51.103

如果你想要一个一致的快照，你需要一个事务。

如果您在事务之外读取参考，那么您将在读取每个参考时获得瞬时值。您无法保证另一个事务不会在您的读取之间更改一个或多个参考，因此您最终可能会得到不一致的视图。

# sql - DateTime 类型的 SQL LIKE 语句

> ID：11985536
> 
> 赞同：11
> 
> 时间：2012-08-16T10:47:08.153
> 
> 标签：sql, sql-server-2008, datetime

如何在 SQL Server`LIKE`中对数据类型的列执行语句？`DateTime`

如果我运行以下 SQL，它会返回 2009 年的所有日期。

```
SELECT * FROM MyTable where CheckDate LIKE '%2009%' 
```

但是，如果我想要所有 10 月、11 月和 12 月的日期，我希望能够执行以下操作：

```
SELECT * FROM MyTable where CheckDate LIKE '%2009-1%' 
```

但这没有给我任何回报！

我为用户提供了一个过滤选项，他们在其中键入日期字符串，并在他们键入时过滤数据。因此，如果他们输入“20”，我想返回日期内所有带有“20”的日期（所以这可能是所有 2012 年的日期或像 06/20/1999 这样的日期值）

有人可以帮忙吗？

我正在使用 SQL Server 2008。

提前致谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-16T10:49:25.863

您可以使用该[`DATEPART`](http://msdn.microsoft.com/en-us/library/ms174420.aspx)功能提取日期的一部分。它还应该使您的查询更明确地说明您要实现的目标：

```
SELECT * FROM MyTable
where DATEPART(year,CheckDate)=2009 and
      DATEPART(month,CheckDate) between 10 and 12 
```

（也有专门命名的函数，例如`MONTH`and `YEAR`，但我更喜欢`DATEPART`一致性，因为它可以访问 a 的所有组件`datetime`）

您应该尽量避免将`datetime`s 视为具有任何类型的字符串格式。将它们视为字符串是我们遇到的最大错误来源之一。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-16T10:50:39.810

如果您需要使用`Like`运算符（出于某种原因），您必须将`DateTime`列转换为`varchar`.

```
SELECT * 
FROM MyTable 
WHERE CONVERT(VARCHAR, CheckDate, 120) LIKE '%2009-1%' 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-16T10:50:07.173

*你可以使用这样的东西：*

```
SELECT * 
FROM MyTable 
WHERE CheckDate >= '2009-10-01' AND CheckDate < '2010-01-01'; 
```

# java - 将多个上下文根映射到 application.xml 中的一个 web-uri

> ID：11985537
> 
> 赞同：5
> 
> 时间：2012-08-16T10:47:09.810
> 
> 标签：java, web-applications, mapping, contextroot

我有这样的application.xml。

> ```
>  <module>
>     <web>
>       <web-uri>services-inboxService.war</web-uri>
>       <context-root>/services/inboxService</context-root>
>     </web>
>   </module> 
> ```

我想将不同的上下文根映射到一个 web-uri。但是有一些限制，每个**模块**应该只包含一个**web**部分，每个**web** - 只有一个**context-root**部分。除了复制这个以不同名称命名的war文件之外，还有其他方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T12:53:35.670

Yegoshin Maxim - 我相信您必须清楚基于 Java EE 的 Web 应用程序中的 URI 概念：

```
<hostname:port/context-root/resource-path?parameters> 
```

现在，如果有人想使用不同的主机名+端口组合来为同一个已安装的应用程序提供服务，他们应该使用虚拟主机的概念，该概念主要由 Tomcat、WebSphere 等应用程序服务器支持。

如果有人想使用不同的资源路径映射到 Web 应用程序中的相同资源，可以通过在 web.xml 中配置 url-pattern 来完成

现在，如果有人想为应用程序的单个安装使用不同的上下文根，这是不可能的。即使您从类加载器的角度考虑。上下文导致创建上下文类加载器，它是应用服务器类加载器的子级。一个 Web 应用程序不能有多个上下文类加载器，否则无法解析资源/类引用。因此，唯一的解决方案是让应用程序的多个实例在不同的上下文根下运行。

# java - 如何禁用 JWebBrowser 中的栏？

> ID：11985538
> 
> 赞同：1
> 
> 时间：2012-08-16T10:47:10.043
> 
> 标签：java, swing

我在我的 Swing 应用程序中使用[chrriis.dj.nativeswing.swtimpl.components.JWebBrowser](http://djproject.sourceforge.net/ns/documentation/javadoc/chrriis/dj/nativeswing/swtimpl/components/JWebBrowser.html)打开网页。现在我的问题是我在浏览器中打开页面（url）但是点击任何像facebook这样的按钮它将打开浏览器的其他窗口。我希望它打开，但里面没有菜单栏。我的代码片段如下：

```
final JWebBrowser webBrowser = new JWebBrowser(JWebBrowser.destroyOnFinalization());
webBrowser.setBarsVisible(false);
webBrowser.setMenuBarVisible(false);
webBrowser.navigate("http://www.xyz.com/product/myproducts-2");
webBrowser.setFocusable(false); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T19:41:00.797

你可以试试这个：

```
webBrowser.addWebBrowserListener(new WebBrowserAdapter() {

    @Override
    public void windowWillOpen(WebBrowserWindowWillOpenEvent e) {

        e.getNewWebBrowser().addWebBrowserListener(new WebBrowserAdapter() {
                    @Override
                    public void locationChanging(WebBrowserNavigationEvent e) {
                        final JWebBrowser webBrowser = e.getWebBrowser();
                        webBrowser.removeWebBrowserListener(this);
                        webBrowser.setMenuBarVisible(false);
                        webBrowser.setBarsVisible(false);
                        webBrowser.setFocusable(false);

                    }
                });
        }
    } 
```

我从[片段](http://djproject.sourceforge.net/ns/documentation/Snippets.html)中获取它，特别是[导航控制](http://djproject.cvs.sourceforge.net/%2acheckout%2a/djproject/DJNativeSwing-SWTDemo/src/chrriis/dj/nativeswing/swtimpl/demo/examples/webbrowser/NavigationControl.java?pathrev=R-1_0_1)（直接下载）片段。

您还可以查看[DJ Native Swing 文档](http://djproject.sourceforge.net/ns/documentation/javadoc/index.html)中的 WebBrowserAdapter javadoc 。

# html - jQueryMobile：非页面元素是否允许作为 body 标签的直接子元素？

> ID：11985539
> 
> 赞同：0
> 
> 时间：2012-08-16T10:47:14.163
> 
> 标签：html, jquery-mobile

我为我的 jQueryMobile 应用程序使用以下标记：

```
<body>
    <div id="someDiv">Foo</div>

    <div id="portrait" style="display:none">
        <div data-role="page" data-fullscreen="true">
            <!-- Portrait content goes here -->
            Hello user!
        </div>
    </div>

    <div id="landscape">
        <div data-role="page" data-fullscreen="true">
            <!-- Landscape content goes here -->
            Sorry, this app does not support landscape mode. Please rotate your device.
        </div>
    </div>
</body> 
```

为了在纵向和横向模式（运行应用程序的智能手机设备）显示不同的内容，我打开和关闭了相应的 div：

```
if (deviceIsInLanscapeMode() == true){
    $("#landscape").css("display", "block");
    $("#portrait").css("display", "none");
}
else{
    $("#landscape").css("display", "none");
    $("#portrait").css("display", "block");
} 
```

现在，这让我想到了两个问题：

1.  到目前为止，在我阅读的所有 jQueryMobile 示例代码中，我注意到页面（= div's with `data-role="page"`set）是标签的**直接子代。**`<body>`正如您在上面的 html 标记中看到的那样，我将页面包装到容器 div 中。这对 jQM 应用程序来说是一个“坏主意”吗？
2.  第一个子 div（id="someDiv"）只是一个没有我不时启用或禁用（显示：无）的页面的 div。这可能是 jQueryMobile 的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:32:53.587

我认为这是一个坏主意，因为您将不再能够充分利用 jQM 功能。（您甚至不再根据 jQM 标准进行编码。）

具有 data-role="page" 属性的多个 div 应该用于多页模板结构，其中 "... 每个 "page" 块需要一个唯一的 id (id="foo")，用于在 " pages" (href="#foo")。当一个链接被点击时，框架会寻找一个带有 id 的内部 "page" 并将其转换为 view..." 请检查[http://jquerymobile.com/demos /1.2.0-alpha.1/docs/pages/page-anatomy.html](http://jquerymobile.com/demos/1.2.0-alpha.1/docs/pages/page-anatomy.html)。在任何给定时间，只有一个“页面”处于活动状态，由 $.mobile.activePage 标识。

根据您的要求，我建议只使用一个带有 data-role="page" 的 div，如下所示：

```
<body> 
    <div data-role="page" data-fullscreen="true">
        <div data-role="content">
            <div class="portrait-content">
                Hello User!
            </div>
            <div class="landscape-content">
                Not Supported.
            </div>
        </div>
    </div>
</body> 
```

并使用 CSS3 媒体查询如下：

```
<style type="text/css">

    @media screen and (orientation: landscape) {
        div.portrait-content {
            display: none;
        }
        div.landscape-content {
            display: block;
        }
    }
    @media screen and (orientation: portrait) {
        div.portrait-content {
            display: block;
        }
        div.landscape-content {
            display: none;
        }
    }
</style> 
```

# c# - ASP.NET MVC4 教程/脚手架 - 验证和显示使用几种不同的语言环境

> ID：11985545
> 
> 赞同：4
> 
> 时间：2012-08-16T10:47:32.117
> 
> 标签：c#, asp.net, asp.net-mvc-4, scaffolding

我正在使用 VS 2012 RC 并尝试从此处遵循 MVC4 教程：

[http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/accessing-your-model%27s-data-from-a-controller](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/accessing-your-model%27s-data-from-a-controller)

我进入“输入有关电影的一些详细信息，然后单击“创建”按钮。然后得到一个错误：

```
"The value '9.99' is not valid for Price." 
```

所以我认为它需要一个十进制逗号，并尝试使用 9,99 来代替，结果如下：

```
"The field Price must be a number." 
```

所以我不知道如何输入数字并满足验证检查。好像有好几个。所以我输入另一个数字 9（没有任何小数或小数字符），然后它就可以工作了。

然后我按“编辑”看看我现在是否可以更改数字。价格现在显示为

```
9,00 
```

带小数逗号，日期为

```
01.11.1989 00:00:00 
```

只需将日期和价格字段复制到剪贴板后，就会立即显示以下错误：

```
The field ReleaseDate must be a date. 
```

和

```
The field Price must be a number. 
```

并且再次无法保存。

所以我猜想，ASP.NET MVC 脚手架自动要求使用文化不变量（小数点）和我的（德语）文化来格式化数字，这需要十进制逗号。它进一步要求将日期格式化为文化不变，我猜这是美国日期格式。

然后在显示时，默认使用当前（德语）文化。

不幸的是，我正在使用具有德语区域设置的计算机。

我希望使用当前文化来显示值，它已经这样做了。但我也希望验证器（其中似乎有几个）接受任何有效格式，或者至少是在当前文化中有效的格式。

对于实际应用程序（与教程相反），最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T07:25:21.753

事实证明，本教程稍后将介绍如何解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:14:13.217

您很可能使用默认来自您的 PC 文化的文化。如果您愿意，您可以声明默认文化，即 us-EN。

见 [http://everymanprogrammer.com/index.php/asp-net-easily-make-your-web-application-multilingual-part-2/](http://everymanprogrammer.com/index.php/asp-net-easily-make-your-web-application-multilingual-part-2/)

# svn - 部分结账时需要手动结账标签/发布/分支目录

> ID：11985554
> 
> 赞同：1
> 
> 时间：2012-08-16T10:48:00.320
> 
> 标签：svn, directory, release, partial

我有一个档案，里面满是不受欢迎的东西，压缩文件是各种不应该在那里的二进制文件。

但是，我希望源文件通过代码检查器运行并将检查器日志添加到存档中。

存档太大了，我在 30GB 的初始结帐后放弃了。所以，我被一个档案卡住了，我最初无法结帐。

为了“分割”重要和不重要的文件，我提出了以下步骤：

1.  在存档上执行 svn 列表
2.  在列表中过滤我想要的文件（大约 200.000 个源文件文件）。
3.  使用这个列表来构造一个`.bat`文件`svn update --force --parents`
4.  执行`svn checkout --depth empty`（初始工作副本）
5.  使用 3) 中的命令文件。
6.  运行代码检查器和 cvs 将文件添加和更新到存档。（我知道最好只建立一个新的存储库，但我需要说服代码的所有者先检查他们的代码。）

我的问题是：在第 3 步）我是否也应该包括像 tag/releases/branch 这样的 SVN 目录？或者我可以忽略它们并仍然执行第`cvs-add-and-update`6 步）吗？

在此先感谢，马丁

# android - 如何在 Eclipse for Android 项目中使用 Subversive 进行团队开发和代码管理？

> ID：11985555
> 
> 赞同：0
> 
> 时间：2012-08-16T10:48:00.510
> 
> 标签：android, eclipse, svn, version-control, subversive

我使用 VSS（Visual Source Safe）进行 C# 项目代码管理。

该项目在本地服务器上，团队的每个成员在他的 PC 上都有一个副本，通过 VSS，我们能够轻松地签入、签出和代码合并。

是否可以像 VSS 一样使用 Eclipse IDE 的“颠覆”插件来管理 Android 项目？最终，我安装了插件并开始处理它。

如果不是，那么最好的工具或插件是什么？

感谢您的帮助，并在此先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:54:37.130

*Subversive*仅适用于 Apache Subversion。

据我所知，Eclipse IDE 没有好的 Visual SourceSafe 插件。我知道[这个](http://sourceforge.net/projects/vssplugin/)，但没有尝试。

我可以同意@Romiox 的建议。如果可以，请移至 Apache Subversion。TortoiseSVN 是作为 Windows Shell 扩展实现的出色客户端，您还可以使用 Subversive 或 Subclipse 插件。

参考：[SVNBook](http://svnbook.red-bean.com/)和[TortoiseSVN 手册](http://tortoisesvn.net/support.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T11:31:35.313

我自己尝试使用颠覆性插件（不过对于 Subversion 存储库），但不知道如何让它集成到现有环境中（它无法识别存储库，我找不到方式告诉它有一个）。

如果您的代码管理非常灵活，请尝试使用[Apache Subversion](http://subversion.apache.org/)。[TortoiseSVN](http://tortoisesvn.net/)客户端可以轻松集成到 Windows 中，超级好用也超级简单，并提供了您需要的功能（签入（在 svn 中称为“提交”）、签出、更新、合并差异等）。

此外，互联网上有很多提供存储库服务器（共享主机）的服务。当我想熟悉源代码管理时，我在 assembla.com 上建立了一个帐户，他们为无限成员提供了一个免费的存储库，拥有高达 1GB 的存储空间。您可能想尝试一下。

# php - 将文件上传到服务器，然后附加到电子邮件并发送一个 php 文件

> ID：11985558
> 
> 赞同：2
> 
> 时间：2012-08-16T10:48:19.150
> 
> 标签：php, email, upload, attachment

我设法用我糟糕的 php 技能制作了一个脚本，将图像上传到我的网络服务器上的文件夹。我现在希望脚本在上传后发送一封附有图片的电子邮件。

这是我的脚本。也许我的问题是在文件完全上传之前发送了电子邮件。它曾经用一张小图片工作..但现在什么也没发生......（除了文件上传......）

```
<?php
print_r($_FILES);
$new_image_name = "image".rand(10, 20).".jpg";
move_uploaded_file($_FILES["file"]["tmp_name"], "/home/virtual/domain.com/public_html/upload/".$new_image_name);

//define the receiver of the email 
$to = 'sender@domain.com'; 
//define the subject of the email 
$subject = 'Upload: '.$_GET["album"]; 
//create a boundary string. It must be unique 
//so we use the MD5 algorithm to generate a random hash 
$random_hash = md5(date('r', time())); 
//define the headers we want passed. Note that they are separated with \r\n 
$headers = "From: reciver@domain.com\r\nReply-To: reciver@domain.com"; 
//add boundary string and mime type specification 
$headers .= "\r\nContent-Type: multipart/mixed; boundary=\"PHP-mixed-".$random_hash."\""; 
//read the atachment file contents into a string,
//encode it with MIME base64,
//and split it into smaller chunks
$attachment = chunk_split(base64_encode(file_get_contents('upload/'.$new_image_name))); 
//define the body of the message. 
ob_start(); //Turn on output buffering 
?> 
--PHP-mixed-<?php echo $random_hash; ?>  
Content-Type: multipart/alternative; boundary="PHP-alt-<?php echo $random_hash; ?>" 

--PHP-alt-<?php echo $random_hash; ?>  
Content-Type: text/plain; charset="iso-8859-1" 
Content-Transfer-Encoding: 7bit

Hello World!!! 
This is simple text email message. 

--PHP-alt-<?php echo $random_hash; ?>  
Content-Type: text/html; charset="iso-8859-1" 
Content-Transfer-Encoding: 7bit

<h2>Hello World!</h2> 
<p>This is something with <b>HTML</b> formatting.</p> 

--PHP-alt-<?php echo $random_hash; ?>-- 

--PHP-mixed-<?php echo $random_hash; ?>  
Content-Type: application/jpg; name="attachment.jpg"  
Content-Transfer-Encoding: base64  
Content-Disposition: attachment  

<?php echo $attachment; ?> 
--PHP-mixed-<?php echo $random_hash; ?>-- 

<?php 
//copy current buffer contents into $message variable and delete current output buffer 
$message = ob_get_clean(); 
//send the email 
$mail_sent = @mail( $to, $subject, $message, $headers ); 
//if the message is sent successfully print "Mail sent". Otherwise print "Mail failed" 
echo $mail_sent ? "Mail sent" : "Mail failed"; 
?>
ge is sent successfully print "Mail sent". Otherwise print "Mail failed" 
echo $mail_sent ? "Mail sent" : "Mail failed"; 
};
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:01:38.207

使用任何邮件库，而不是像 phpMailer

[http://phpmailer.worxware.com/](http://phpmailer.worxware.com/)

这将使您更好地控制电子邮件发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:23:50.480

在 Waygood 的一点逻辑帮助下。我发现我可以在附加并发送后移动文件。我发现这个脚本对我有用：http: [//netsperience.org/content/blog/attach-a-file-email-with-php-code-actually-works](http://netsperience.org/content/blog/attach-a-file-email-with-php-code-actually-works)

通过我的修改，它现在就像一个魅力！

```
print_r($_FILES);

$new_image_name = "image".rand(10, 20).".jpg";
$email_to = "reciver@domain.com"; // The email you are sending to (example)
$email_from = "sender@domain.com"; // The email you are sending from
$email_subject = "Upload: ".$_GET["album"]; // The Subject of the email
$email_txt = "the body text"; // Message that the email has in it
$fileatt = $_FILES["file"]["tmp_name"]; // Path to the tmp file
$fileatt_type = "image/jpeg"; // File Type
$fileatt_name = "upload.jpg"; // Filename that will be used for the file as the attachment
$file = fopen($fileatt,'rb');
$data = fread($file,filesize($fileatt));
fclose($file);
$semi_rand = md5(time());
$mime_boundary = "==Multipart_Boundary_x{$semi_rand}x";
$headers="From: $email_from"; // Who the email is from (example)
$headers .= "\nMIME-Version: 1.0\n" .
"Content-Type: multipart/mixed;\n" .
" boundary=\"{$mime_boundary}\"";
$email_message .= "This is a multi-part message in MIME format.\n\n" .
"--{$mime_boundary}\n" .
"Content-Type:text/html; charset=\"iso-8859-1\"\n" .
"Content-Transfer-Encoding: 7bit\n\n" . $email_txt;
$email_message .= "\n\n";
$data = chunk_split(base64_encode($data));
$email_message .= "--{$mime_boundary}\n" .
"Content-Type: {$fileatt_type};\n" .
" name=\"{$fileatt_name}\"\n" .
"Content-Transfer-Encoding: base64\n\n" .
$data . "\n\n" .
"--{$mime_boundary}--\n";

mail($email_to,$email_subject,$email_message,$headers);

if (mail($email_to,$email_subject,$email_message,$headers)) {

       move_uploaded_file($_FILES["file"]["tmp_name"], "/home/virtual/domain.com/public_html/upload/".$new_image_name);

    } else {
       echo "[B]email could not be sent[/B]";
    } 
```

# java - 如何在 Tomcat 服务器中托管 ADF 应用程序？

> ID：11985559
> 
> 赞同：0
> 
> 时间：2012-08-16T10:48:20.403
> 
> 标签：java, tomcat, jdeveloper, oracle-adf

我需要在 Tomcat 服务器中托管 ADF 应用程序。是否可以 ？如何做呢 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:59:32.297

我认为 ADF 框架在 Java EE 5 堆栈上运行。在 Tomcat 上构建自己的 Java EE 堆栈是一项相当艰巨的任务。我宁愿按预期在 WebLogic 服务器上运行它。更重要的是，Oracle ADF 许可证绑定到 Oracle 应用服务器许可证。我认为在 ADF 框架上获得许可并在 Weblogic 以外的任何其他堆栈上运行它在法律上是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T06:09:52.470

“更重要的是，Oracle ADF 许可证与 Oracle 应用服务器许可证绑定。我认为在 ADF 框架上获得许可证并在 Weblogic 以外的任何其他堆栈上运行它在法律上是不可能的。”

这并不完全正确。WebLogic Server 和 Websphere 是 ADF 认证的两个服务器。这并不意味着它在其他服务器上不受支持。ADF 有一个许可证，允许您在其他服务器上运行它。随着即将推出的 JDeveloper 版本，我们增加了认证服务器的数量。

# java - 如何将 Java 后端与 JavaFX 2 前端连接起来？

> ID：11985561
> 
> 赞同：0
> 
> 时间：2012-08-16T10:48:28.730
> 
> 标签：java, javafx-2

我有一个 Java 代码业务逻辑和一个 JavaFX2 代码 GUI。Java类通过 EventBroker 和侦听器`Game.java`与 FX 类交互。`GameGUI.java`主要的类在后端包`Main.java`和前端包中`MainGUI.java`，所以应用程序是从类中的*start*方法启动的`MainGUI`。

如何连接后端（Main）和前端（MainGUI）？有没有一种方法可以将 Java 后端类设置为 GUI 的模型？我刚刚开始使用 JavaFX ......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:10:58.357

由于它是一个 GUI 库，而不是一个应用程序框架，JavaFX 中没有模型/视图的概念。

您必须手动连接您的课程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T11:58:41.997

`MainGUI`是一个扩展的常规 java 类`javafx.application.Application`。您可以实例化`Main`该类并在其中使用其方法。

此外，要了解 JavaFX 的类似 MVC 的模式，请参阅以下链接：
[掌握 FXML](http://docs.oracle.com/javafx/2/fxml_get_started/why_use_fxml.htm)部分“FXML 简介”。
[JavaFX 中的 MVC 模式与 Scene Builder](https://stackoverflow.com/q/10872444/682495)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-23T05:23:42.640

两种方法：1）前端将产生一个线程到后端 2）您可以手动创建一个可以访问的方法对象

# javascript - jQuery noConflict 不起作用

> ID：11985563
> 
> 赞同：1
> 
> 时间：2012-08-16T10:48:33.540
> 
> 标签：javascript, jquery

我有以下 JavaScript 片段，将从客户的网站引用。它使用 jQuery 1.5，所以我的问题是如果客户端已经加载了一个 jQuery 实例怎么办？还是替代的 JavaScript 库？

我正在使用 noConflict() 来尝试解决这个问题，但它似乎不起作用，我不知道为什么。任何帮助表示赞赏

主要问题是我收到一个错误返回，告诉我 jQueryMH 未定义，但我什至在设置 keepAlive 函数的时间间隔之前就明确定义了它。

```
var head    = document.getElementsByTagName('head')[0];
var script  = document.createElement('script');
script.src  = '//ajax.googleapis.com/ajax/libs/jquery/1.5.0/jquery.min.js';
script.type = 'text/javascript';
script.onload = script.onreadystatechange = function() {
                                                var jQueryMH = jQuery.noConflict(true);
                                                setInterval(keepAlive(), 5000);
                                            };
head.appendChild(script);
function keepAlive() {
    var mhProtocol      = ((document.location.protocol == "https:") ? "https://" : "http://");
    var randomNumber    = Math.floor(Math.random()*10000);
    var mhVisitorId     = document.cookie.match('mhVisitorId=(.*?)(;|$)');
    var urlParamString  = "";
    if(mhVisitorId) { 
        urlParamString = "&mhVisitorId=" + encodeURIComponent(mhVisitorId[1]); 
    }
    var mhUrl = "www.urlishere.com";
    //var jQueryMH = jQuery.noConflict();
    jQueryMH.ajax({
        url: mhUrl,
        dataType: 'jsonp'
    });
} 
```

除此之外，我尝试在函数本身中设置 noConflict() 并且这有效并且允许我引用 jQueryMH，但是我们遇到了以下问题，可能是因为它在每次函数运行时设置 noConflict（每 5 秒）

我设置的外部包含此 JS 脚本的测试页面已经加载了 jQuery 1.8，然后它加载了上面的脚本。因此，由于我的 noConflict，我希望 jQueryMH.fn.jquery 返回 1.5.0 和 jQuery.fn.jquery 返回 1.8；但是它们都返回 1.5.0，这意味着我的 noConflict 无法正常工作，因为 jQuery 不会保留为已加载到客户端网站的 1.8 版库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:52:54.453

在加载第二个版本之前，您实际上需要`noconflict`第*一个版本的 jQuery，否则第二个版本将覆盖第一个版本。*

除此之外，您的未定义变量问题是由于您在`.noconflict`函数内调用并将 jQuery 分配给仅在*该函数范围内*的备用变量而引起的。

我认为您需要首先执行以下操作：

```
var origjQuery = jQuery.noconflict(); 
```

然后像上面一样加载新的jQuery，然后`noconflict`：

```
var jQueryMH = jQuery.noconflict(); 
```

然后恢复原来的jQuery：

```
var jQuery = origjQuery.noconflict(); 
```

在全局范围内执行上述所有操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-24T10:59:20.740

我构建了 jQuery 的自定义构建，修改了将 jQuery 分配给全局变量的代码行。

具体来说，我将那行代码从：

```
window.jQuery = window.$ = jQuery; 
```

至

```
window.myCustomJquery = jQuery; 
```

这样，即使页面中包含 jQuery 脚本，我也可以毫无问题地注入我的自定义 jQuery 构建，并且无需密封/冻结实际的全局 jQuery 或不使用 .noConflict()，这两种解决方案都导致上面的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T11:27:54.950

在任何其他主机上注入脚本时，我实际上遇到了这个问题。

正如 Alnitak 所说，`noConflict`如果您先加载 jQuery，然后覆盖`$`变量，则可以工作，而不是相反。

我设法构建的解决方法使用了ECMAScript 5 中的[`Object.freeze`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/freeze)和[`Object.seal`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/seal)方法。

问题是将要在现有站点上覆盖的变量（例如`$`）复制到最终将冻结的对象中。
通过在重写变量之前（在加载 jQuery 之前）冻结该对象，您可以确保原始变量的副本（在您的情况下`$`）将存储在您的对象中，并且它们不能被任何其他脚本以任何方式更改。
加载所需的库后，您只需将已冻结的对象属性复制回全局对象，主机环境保持不变。
这是一个使事情更清晰的示例代码：

```
var aux = {'jQuery' : window.jQuery};
if(Object.freeze)
    // prevent anyone from deleting any of the `aux` props
    Object.freeze(aux);
if(Object.seal)
    // prevent anyone from altering the initial jQuery
    // this is necessary because `aux.jQuery` is a copy by reference of the
    // window.jQuery, thus any modification in the global jQuery object
    // would be reflected in our jQuery copy
    Object.seal(aux.jQuery);

var head    = document.getElementsByTagName('head')[0];
var script  = document.createElement('script');
script.src  = '//ajax.googleapis.com/ajax/libs/jquery/1.5.0/jquery.min.js';
script.type = 'text/javascript';
script.onload = script.onreadystatechange = function() {
    var jQueryMH = jQuery.noConflict(true);
    // restore the initial jquery
    window.jQuery = aux.jQuery;
    alert(jQuery === jQueryMH);
}; 
```

而且，当然，您可以扩展功能并将其用于您使用的任何其他库：

```
var __globalLibs = {},
    libsThatYouWantToPreserve = '$ jQuery otherLib'.split(' '),
    key;

for(var i=0,l=libsThatYouWantToPreserve.length;i<l;i++)
    {
        key = libsThatYouWantToPreserve[i];
        // copy the contents of the global variable into your object
        __globalLibs[key] = window[key];
        if(Object.seal)
            Object.seal(__globalLibs[key]);
    }

if(Object.freeze)
    Object.freeze(__globalLibs);

// load jquery and all the other libs

// make copies of your update libs

var jQueryMH = jQuery;

// and then restore the initial variables to the global context
 for(var i=0,l=libsThatYouWantToPreserve.length;i<l;i++)
    {
        key = libsThatYouWantToPreserve[i];
        // copy the contents of the global variable into your object
        window[key] = __globalLibs[key];
    }

// after that, you can just delete your object
delete window.__globalLibs; 
```

唯一的缺点是IE8及更低版本不支持。
希望这可以帮助！

PS：您可能应该更改`setInterval(keepAlive(), 5000);`为`setInterval(keepAlive, 5000);`，因为您的构造意味着每 5 秒重复一次对`keepAlive` **返回值**（即`undefined`）的评估 - 而不是函数本身。

# c# - PowerShell Select-Object propertyName 在对象数组上

> ID：11985564
> 
> 赞同：1
> 
> 时间：2012-08-16T10:48:43.300
> 
> 标签：c#, powershell-2.0

我有一个用 C# 编写的自定义 CmdLet，它返回一个对象数组。出于测试目的，它们是匿名的。

```
 protected override void ProcessRecord()
    {
        var anonType1 = new { name = "Mikey", description = "Brown" };
        var anonType2 = new { name = "Davo", description = "Green" };

        List<object> stuff = new List<object>();
        stuff.Add(anonType1);
        stuff.Add(anonType2);

        this.WriteObject(stuff.ToArray());
    } 
```

这在 PS2 中给出了以下输出：

```
name       description
----       -----------
Mikey      Brown
Davo       Green 
```

如果我使用**Select-Object 名称**，我希望只排除“描述”属性并将 Mikey 和 Davo 堆叠在一起，但没有！我得到：

```
name
---- 
```

我的数据呢！？

谢谢

卢克

顺便说一句：有没有人知道用于编程 CmdLets 和使用 PS 内部（而不是大多数书籍所涉及的 PS 使用）的良好学习资源？塔

更新

即使我制作了强大的类型，新的一些并将它们放在 PSDataCollection 中，它也不能像我预期的那样工作。我的期望显然是错误的。如何正确地将数据集合输出到管道？

**解决了**

我们必须设置 enumerateCollection = true。听起来很愚蠢，但我们没有使用 WriteObject 保护方法，而是我们自己的 WriteToAvailableOutput，它从 Visual Studio 中转移到调试器！所以我们看不到 WriteObject 上的额外重载 - dhuurr！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T17:22:46.173

答案是使用WriteObject 重载并将enumerateCollection 参数设置为true。

```
this.WriteObject(stuff.ToArray(), true); 
```

愚蠢的我。

# struts - struts 1.2 - 将值从一个动作传递到另一个动作

> ID：11985568
> 
> 赞同：2
> 
> 时间：2012-08-16T10:48:55.833
> 
> 标签：struts, struts-1

我们使用的是struts 1.2.2，这里有一个情况。所以我们有 2 个表格 FormA 和 FormB。我们还有 2 个动作 ActionA 和 ActionB。

现在 ActionA 在被调用时将 FormA 作为提交的 bean。它完成所有处理，保存表单，创建 OrderId，如果成功，它会转发给 ActionB。ActionB 然后根据 OrderId 填充 FormB，然后转发到下一个 jsp。

我们不希望这 2 个动作共享一个表单，因为内容非常不同，我们希望表单仅代表它在 jsp 页面上所代表的内容。同样在每个页面上，我们都将内容保存在 Db 中。流程有 5 页，2 页后可以离开 - 再次返回并从第 1 页开始。但第 1 页和第 2 页应该从数据库中检索数据并显示。因此，如果存在 orderID，我们会根据该 orderId 通过从数据库中获取数据来填充表单。

但是，我没有找到一种简单的方法将此 orderId 从一个操作传递到另一个操作。

我不能`request.setAttribute()`在 ActionA 的末尾使用，因为当控件到达 ActionB 时，它现在有一个全新的请求对象。我猜测从一个动作到另一个动作的转发会刷新请求。但是，如果它转发到 jsp，请求将被保留。

不想将 orderId 存储在 session 中，`session.setAttribute()`因为有人可能会尝试添加书签的 URL，然后该页面会简单地获取 session 中最后存储的 OrderId 并尝试处理它。

我们也无法将它放在 formbeans 中，因为它不是共享的。

一种选择是在 URL 中将其作为参数传递，例如 ActionB?OrderId=89 。然而，缺点是有人可以更改 URL 中的 orderId 并尝试获取该随机 orderId 的数据。虽然我们总是可以进行检查以防止未经授权的人查看属于另一个客户的订单，但目前这是一个复杂的过程。同样在 Struts 1.2.2 中，我认为我必须以编程方式创建一个新的 ActionForward 对象，然后在当前路径的末尾显式附加“？OrderId = 89”。

有帮助的朋友吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:21:14.913

实际上，我会把它放在会话中。然后，当您从 ActionB 中检索它时，只需立即将其删除。

```
Integer orderId = session.getAttribute("myapp.OrderId");
session.removeAttribute("myapp.OrderID"); 
```

这通常称为 Flash 范围变量。Struts 中没有官方的 Flash 作用域，但这是对其进行模拟的。

基本上，这里不再担心重新加载 OrderId，因为 ActionA 会在 session 中设置这个变量，转发给 ActionB，ActionB 会将其从 session 中取出并删除。有人可能会卡在他们的会话中的唯一方法是，如果他们在 ActionA 完成后但在 ActionB 运行之前停止请求，这是极不可能的，并且一旦他们查看 ActionB 就会被删除，这可能不会那么糟糕。

这也让您放入 ActionB 以检查以确保 OrderID 在会话中，如果没有，则转发回 ActionA。

# php - 通过参数传递对象的键

> ID：11985569
> 
> 赞同：4
> 
> 时间：2012-08-16T10:49:04.100
> 
> 标签：php

我有这个代码：

```
function cmp_asc($a, $b){
    $ta = date_create_from_format('Y/m/d', $a['props']['t']); //  Y/n/j  si no tienen 0 inicial
    $tb = date_create_from_format('Y/m/d', $b['props']['t']);
    $interval = date_diff($ta, $tb);

    if($interval->days != 0){
        if($interval->invert == 1){
            return 1;
        }else{
            return -1;
        }
    }else{
        return 0;
    }
}

$arr1 = array(
    'props' => array('t' => '2012/05/20')
);

$arr2 = array(
    'props' => array('t' => '2012/05/21')
);

$arr3 = array(
    'props' => array('t' => '2012/04/14')
);

$arr = array($arr1, $arr2, $arr3);

uasort($arr, 'cmp_asc'); 
```

我想知道我是否可以通过`['props']['t']`via 参数。所以，它最终会像：

```
function cmp_asc($a, $b, $key){
    $ta = date_create_from_format('Y/m/d', $a <-- $key -->);
    ...
... 
```

我正在考虑可变变量，但我不太确定这是正确的方法。还有其他想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T10:57:20.083

不是真正的参数，因为您不是自己调用函数，但您可以使用[闭包](http://php.net/manual/en/functions.anonymous.php)将其他变量传递给函数：

```
$key1 = 'props';
$key2 = 't';

uasort($arr, function ($a, $b) use ($key1, $key2) {
    $ta = date_create_from_format('Y/m/d', $a[$key1][$key2]);
    ...
}); 
```

这只是一个简单的例子。如果您需要动态键深度，则需要更多代码，如下所示：

```
function getValue(array $value, $key) {
    $keys = explode('.', $key);
    foreach ($keys as $k) {
        $value = $value[$k];
    }
    return $value;
}

$arr = array('foo' => array('bar' => 'baz'));
echo getValue($arr, 'foo.bar'); 
```

另一个想法是使用一个类，其用法如下所示：

```
$cmp = new ComparisonClass;
$cmp->key = 'props.t';

uasort($arr, array($cmp, 'compare')); 
```

我会让你弄清楚`ComparisonClass`.

一个更好的解决方案可能是简单地标准化您要排序的数组的格式。

# django - 无法在 Django 中注册到 user_logged_in 信号的回调函数中引用模型

> ID：11985572
> 
> 赞同：1
> 
> 时间：2012-08-16T10:49:22.057
> 
> 标签：django, django-signals

当用户登录时，我需要编写一个 DB 行。以下代码在 models.py 中（在文件末尾，在模型定义之后）；

**模型.py**

```
from django.contrib.auth.signals import user_logged_in
from utils import *
def rec_login(sender, request, user, **kwargs):
    u_audit('some text here', user)    

user_logged_in.connect(rec_login) 
```

在 modules.py 中导入了一个实用程序模块。上面的函数在 utils.py 中调用了以下代码；

**实用程序.py**

```
from app.models import *
def u_audit(msg,u):
    ua=UserLog(action=msg, user=u, actiontime=datetime.now())
    ua.save() 
```

我在其他几个地方（登录后）重用了 u_audit() 函数。

当用户登录时，我得到 UserLog 对象的 NameError （即看起来模型定义不能被信号回调函数访问）。

上面提到的UserLog对象只是一个简单的models.Model。

有人知道我错过了什么吗？

我尝试在 models.py 的回调函数中写入一个简单的文件，并在 u_audit() 函数中尝试了同样的事情。相反，它工作正常，所以我知道它被正确调用了。我已经注册了其他信号回调函数（所有登录后），它们正在使用模型并且工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:24:33.177

不是循环导入？Utils 将模型和模型引用到 utils - 它不起作用。请将 utils.py 更改为：

```
def u_audit(msg,u):
    from app.models import UserLog
    ua=UserLog(action=msg, user=u, actiontime=datetime.now())
    ua.save() 
```

但也有类似的情况表明，models.py 可能是 u_audit 的好地方，你应该把它移到那里。

# scala - Boot.scala 适合哪里？

> ID：11985577
> 
> 赞同：4
> 
> 时间：2012-08-16T10:50:06.433
> 
> 标签：scala, akka

有时我会看到包含 boot.scala 或 Boot.scala 文件的项目。虽然这似乎不是一个硬性的 Scala 规则，但在其中包含一个 Boot.scala 文件似乎是一种民间传说一些项目。这个特定的项目使用 Akka 和 Spray，它们可以转换为 Actor 模式和 REST 服务。

有人能解释一下在这样的文件中通常可以预期什么类型的功能，如果这是一种常见的模式？

作为这个问题的扩展（请先回答第一位 :-)，我很高兴知道如何阅读此代码，该代码位于具有多个 Boot.scala 文件的项目中。

Web 包中的 Boot.scala：

```
trait Web {
  this: Api with Core =>
....
} 
```

api 包中的 Boot.scala：

```
trait Api {
  this: Core =>
....
} 
```

核心包中的 Boot.scala：

```
trait Core {
  implicit def actorSystem: ActorSystem
  implicit val timeout = Timeout(30000)

  val application = actorSystem.actorOf(
    props = Props[ApplicationActor],
    name = "application"
  )

  Await.ready(application ? Start(), timeout.duration)

} 
```

可以得出一个包依赖于另一个包，并且 Boot.scala 文件可能是基于角色的系统中的常见现象，但是如何“读取”关系呢？例如，我如何用英文阅读 trait Web {this: Api with Core =>...}？

在特定实例中，应用程序的起点位于主文件中：

```
object Main extends App {
  implicit val system = ActorSystem("RESTService")

  class Application(val actorSystem: ActorSystem) extends Core with Api with Web {

  }

  new Application(system)

  sys.addShutdownHook {
    system.shutdown()
  }

} 
```

我意识到我的问题对某些人来说似乎微不足道，但我正试图在这里进入 Scala 部落，并且“秘密密码”不在任何手册中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T11:18:46.650

我不知道 Boot.scala 是否是一个常见的模式，但它是在 Lift 中使用的，并且包含了应用程序的主要配置。由于 Lift 相当古老（相对于其他 scala 项目），它可能已经设定了一个约定。

对于另一个问题，您应该阅读[蛋糕图案](http://jonasboner.com/2008/10/06/real-world-scala-dependency-injection-di/)和[自我类型](http://www.scala-lang.org/node/124)。例如

```
trait Web {
  this: Api with Core =>
....
} 
```

定义了一个特征，该特征`Web`只能混合到继承自或将其作为其自身类型的一部分的类或特征`API`中`Core`。因此

```
class Application(val actorSystem: ActorSystem) extends Core with Api with Web {

} 
```

如果`Api`没有混入特征，则不会进行类型检查，因为它是`Web`特征所必需的。

# java - 使用 java、nlp 的短语级依赖解析器

> ID：11985585
> 
> 赞同：0
> 
> 时间：2012-08-16T10:50:49.260
> 
> 标签：java, dependency-injection, nlp, stanford-nlp

有人可以详细说明如何使用斯坦福大学的自然语言处理词法分析器-开源 Java 代码获得“短语级别的依赖”吗？ [http://svn.apache.org/repos/asf/nutch/branches/branch-1.2/src/plugin/lib-http/src/java/org/apache/nutch/protocol/http/api/RobotRulesParser.java](http://svn.apache.org/repos/asf/nutch/branches/branch-1.2/src/plugin/lib-http/src/java/org/apache/nutch/protocol/http/api/RobotRulesParser.java)

[http://docs.mongodb.org/manual/reference/sql-comparison/](http://docs.mongodb.org/manual/reference/sql-comparison/)

如

阶段依赖

事故-------->发生了

下降 ---------> 作为

夜 ----------> 坠落

诸如此类...

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:17:52.437

您可以将单词分组到一个标记中，这样您就可以获得短语级别的依赖。至少，这涵盖了多词表达式 (MWE) 和命名实体。这也可以提高依赖解析期间的准确性（特别是对于将命名实体分组为一个标记）。

在您的示例中，在将确定器组合在一起时，我认为您可以做的就是对它们进行后处理。得到依赖解析树后，可以将“the”添加到“accident”中。如果需要，您可以从组成分析树中建立它，

```
(NP (DT The) (NN accident)) 
```

查看属于同一名词短语或其他短语的那些。不太确定这将如何有用，或者这种方法可能会出现什么问题。[您可以使用斯坦福解析器](http://nlp.stanford.edu/software/lex-parser.shtml)( [demo](http://nlp.stanford.edu:8080/parser/index.jsp) )进行一些实验。

# iphone - 适用于 iOS 的 LinkedIn API 身份验证权限

> ID：11985587
> 
> 赞同：1
> 
> 时间：2012-08-16T10:51:25.287
> 
> 标签：iphone, objective-c, ios

我为 LinkedIn 设计了应用程序并使用了 SDK：OAuth Starter Kit

我设置了API Key和Secret Key，登录后我尝试发布文本，但我不能，因为我没有访问...如何设置权限？？？

关于它：[https ://developer.linkedin.com/documents/authentication#granting](https://developer.linkedin.com/documents/authentication#granting)

# windows - 关于 W3wP.exe - IIS 8 的基本知识

> ID：11985601
> 
> 赞同：1
> 
> 时间：2012-08-16T10:52:12.927
> 
> 标签：windows, iis

对不起，如果它看起来很简单。

我试图找出何时`W3wp.exe`会出现在进程列表中。我正在使用带有 IIS 8 的 Windows 2012 beta。我在其中部署了 web 和 wcf 应用程序。我试图在本地浏览页面。但我没有看到过程。

如果遗漏了什么，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T07:09:03.997

最后它奏效了。但我之前没有确切的根本原因

1.  重新启动机器
2.  使用管理员权限打开 VS
3.  我能够看到列出的过程

加起来 - W3wp.exe 出现在进程列表中的实例应该已经运行了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-26T20:14:36.360

确保检查

显示所有会话中的所有进程![](../Images/a36337d0b8365f3a9634cb89e03f5bda.png)

# php - 图片上传不上传

> ID：11985603
> 
> 赞同：0
> 
> 时间：2012-08-16T10:52:13.953
> 
> 标签：php, image, file

我正在尝试将图像上传到我的服务器，现在代码非常简单，但它从未通过 if 测试，它总是直接进入 else 语句并在那里执行代码，即；无效文件。下面如果表单代码...

```
<form action="take.php" method="get" onsubmit='return chequer()' enctype="multipart/form-data">
<input type="file" name="image1"/>
</form> 
```

上传图片的php脚本如下，当然是在take.php文件中：

```
if ($_GET["image"] == Null)
{
$sql = "INSERT INTO postable (description, dated, posterid, country, state, city, area)
VALUES
('$_GET[Desc]',NOW(),'$row[0]','$_GET[Country]','$_GET[State]','$_GET[City]','$_GET[area]')";
}
else {
$sql = "INSERT INTO postable (description, dated, image, posterid, country, state, city, area)
VALUES
('$_GET[Desc]',NOW(),'$_GET[image]','$row[0]','$_GET[Country]','$_GET[State]','$_GET[City]','$_GET[area]')";
$allowedExts = array("jpg", "jpeg", "gif", "png");
$extension = end(explode(".", $_FILES["image1"]["name"]));
if ((($_FILES["image1"]["type"] == "image/gif")
|| ($_FILES["image1"]["type"] == "image/jpeg")
|| ($_FILES["image1"]["type"] == "image/pjpeg"))
&& ($_FILES["image1"]["size"] < 65536)
&& in_array($extension, $allowedExts))
  {
  if ($_FILES["image1"]["error"] > 0)
    {
    echo "Return Code: " . $_FILES["image1"]["error"] . "<br />";
    }
  else
    {
    echo "Upload: " . $_FILES["image1"]["name"] . "<br />";
    echo "Type: " . $_FILES["image1"]["type"] . "<br />";
    echo "Size: " . ($_FILES["image1"]["size"] / 1024) . " Kb<br />";
    echo "Temp file: " . $_FILES["image1"]["tmp_name"] . "<br />";

    if (file_exists("upload/" . $_FILES["image1"]["name"]))
      {
      echo $_FILES["image1"]["name"] . " already exists. ";
      }
    else
      {
      move_uploaded_file($_FILES["image1"]["tmp_name"],
      "upload/" . $_FILES["image1"]["name"]);
      echo "Stored in: " . "upload/" . $_FILES["image1"]["name"];
      }
    }
  }
else
  {
  echo "Invalid file";
  } 
```

任何帮助将不胜感激。

提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T10:57:38.783

要上传文件，您的表单方法应始终为 POST，因此在表单方法中将 GET 转换为 POST

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T11:16:31.837

检查您要上传的文件类型。使用：

```
echo $_FILES["image1"]["type"]; 
```

因为有时我们尝试上传的图像类型不同。或者您可以尝试其他图像。

# c++ - luaL_dofile 错误

> ID：11985604
> 
> 赞同：0
> 
> 时间：2012-08-16T10:52:15.567
> 
> 标签：c++, lua

“luaL_dofile”行出错，调试器未显示任何有关错误的信息。

我可以使用命令“luaL_dostring”，但我不知道为什么我不能 dofile。

我的代码如下：

```
const char* file = "/app_home/data/minigames/mg_hint_machine_2.lua";
ret = luaL_dofile(LS, file);
if(ret != 0){
    PRINTF("Error occurs when calling luaL_dofile() Hint Machine 0x%x\n",ret);
    }
else PRINT("\nDOFILE SUCCESS"); 
```

并且调试器在这一行显示错误，“ret”仍然没有从 dofile 获得返回值。

如果您想查看调试器中的错误

**02C2D304 7C21016A stdux r1,r1,r0 03 (02C2D300) REG PIPE LSU**

调试器点在这一行，我无法理解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T06:08:07.137

作为对 superzilla 答案的详细说明（赞成该答案而不是这个答案），要获得错误消息，您的代码需要如下所示：

```
const char* file = "/app_home/data/minigames/mg_hint_machine_2.lua";
ret = luaL_dofile(LS, file);
if(ret != 0){
  PRINTF("Error occurs when calling luaL_dofile() Hint Machine 0x%x\n",ret);
  PRINTF("Error: %s", lua_tostring(LS,-1));
}
else PRINT("\nDOFILE SUCCESS"); 
```

Your change (in the comments) changed the `luaL_dofile` to a `luaL_dostring`, which is why you're getting unexpected error message ( as mentioned [here](https://stackoverflow.com/questions/11999606/error-lual-dostring-unexpected-symbol-near) ).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T01:56:26.727

将其放在 if 语句的正文中将有助于我们缩小问题范围：

```
printf("%s\\n",lua_tostring(LS,-1)); 
```

它会告诉我们 Lua 在崩溃时报告了什么。

# python - high chart graph doesnt start from the correct month

> ID：11985605
> 
> 赞同：0
> 
> 时间：2012-08-16T10:52:15.483
> 
> 标签：python, django, highcharts, django-templates

I have a chart in my django based project wher I need to display two series of data (previsions and consommations) over the twelve months of the year

The problem is that when my data doesnt start from january (for example) , I still have to display january with empty data

This works for one of the series (prvisiosns) but not the other meaning that previsions start frm february as it should be but consommations start from january in the chart althought its data is starting from february

please take a look at my code below speacially the section {% block graph_data %}

Here is my code:

```
<script type="text/javascript">
$(document).ready(function() {
   {% if data %}
   var chart = new Highcharts.Chart({
      chart: {
         renderTo: 'graph',
         {% block graph_type %}defaultSeriesType: 'column',{% endblock %}
         marginRight: 125,
         marginBottom: 25
      },
      title: {
         text: '{% block graph_title %}Consommation{% endblock %}',
         x: -20 //center
      },
      xAxis: {
         {% block graph_xaxis %}
categories: [{% for i in xaxis %}'{{ i|title }}'{% if not forloop.last %},{% endif %}{% endfor %}]
{% endblock %},
      },
      yAxis: {
         title: {
            text: 'Consommation (MWh)'
         },
         plotLines: [{
            value: 0,
            width: 1,
            color: '#808080'
         }]
      },
      {% block tooltip %}
      tooltip: {
         formatter: function() {
                   return '<b>'+ this.series.name +'</b><br/>'+
               this.x +'{% block graph_tooltip_unite %}{% endblock %}: '+ this.y.toFixed(2) +' MWh';
         }
      },
      {% endblock %}
      legend: {
         layout: 'vertical',
         align: 'right',
         verticalAlign: 'top',
         x: 20,
         y: 100,
         borderWidth: 0
      },
      series: [

  {% block graph_data %}
 {
 name: 'Consommations',
 data: [
        {% for h in data|dictsort:"date__mois" %}
            {{ h.quantite|safe }}/1000
            {% if not forloop.last %},{% endif %}
        {% endfor %}
       ]
  }
     {% if user.profil.is_gold %}
  ,{
 name: 'Prévisions',
 data: [
        {% for h in previsions|dictsort:"mois" %}
            {{ h.mwh|safe }}
            {% if not forloop.last %},{% endif %}
        {% endfor %}
       ]
  }
 {% endif %}
{% endblock %}

      ]

});
{% else %}
    {% if request.POST %}
        $('#graph').html('<div class="aucune_donnee">Aucune donnée disponible pour les critères sélectionnés.</div>');
    {% endif %}
{% endif %}
var blanco = "<div class='blanco'></div>";
$("#graph").append(blanco);
}); 
```

This is driving me crazy since a week but I can see whats the problem, but it's my frist time with highcharts..so any help would be greatly appreciated,Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:53:06.120

Define your categories in the xAxis

```
 xAxis: {
            categories: [
                'Jan',
                'Feb',
                'Mar',
                'Apr',
                'May',
                'Jun',
                'Jul',
                'Aug',
                'Sep',
                'Oct',
                'Nov',
                'Dec'
            ]
        } 
```

Use index of the month (base 0) instead of the month literal in your series' data (should be easy to do, either on the server or JS)

```
 series: [{
             name: 'Consommations',
            data: normalizeData([[1,5],[9,10],[5,0]])

        }, {
            name: 'Prévisions',
            data: normalizeData([[1,2],[2,4],[5,8]])

        }] 
```

Normalize your data with javascript to add data for missing months

```
function normalizeData(data){
  var normalizedData=[];
  var i;
  for(i=0;i<12;i++){
    if(data[i])
        normalizedData[i]=data[i];
    else
        normalizedData[i]=0;
  }
  return normalizedData;
} 
```

jsFiddle solution: [http://jsfiddle.net/jugal/zDnS2/](http://jsfiddle.net/jugal/zDnS2/)

**Alternate solution** Add the missing month data in the normalizeData method
just create the months array to represent the possible months

```
var months=[
                'Jan',
                'Feb',
                'Mar',
                'Apr',
                'May',
                'Jun',
                'Jul',
                'Aug',
                'Sep',
                'Oct',
                'Nov',
                'Dec'
            ]; 
```

and add data as 0 where data is not present

```
function normalizeData(data){
var existingMonths=[];
var normalizedData=[];
var i;
for(i=0;i<data.length;i++){
    var datum=data[i];
    datum[0]=  $.inArray(datum[0],months);
    existingMonths.push(datum[0]);
    normalizedData.push(datum);
}
for(i=0;i< months.length;i++){
    if($.inArray(i,existingMonths)==-1)
        normalizedData.push([i ,0]);
}
return normalizedData;
} 
```

set xAxis categories to the months array

```
 xAxis: {
            categories: months
        } 
```

@ [http://jsfiddle.net/jugal/vYK7H/](http://jsfiddle.net/jugal/vYK7H/)

# css - 根据列数划分百分比

> ID：11985608
> 
> 赞同：0
> 
> 时间：2012-08-16T10:52:19.373
> 
> 标签：css, compass-sass, sass

我正在设计一个条形图。可能有无限的条，我需要它们每个都具有与其父容器成比例的宽度 - 目前我有类似的东西：

```
.one-column  {
    width: (100% / 1);
}

.two-columns {
    width: (100% / 2);
}

.three-columns {
    width: (100% / 3);
}

etc 
```

...我会添加到每个栏。

谁能想到一种巧妙的方法来解决这个问题，并且只有一个可以处理无限列的规则——也许与数据属性有关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:55:38.880

看看[LessCSS](http://lesscss.org/) - 它支持数学运算。否则，我建议您使用 Javascript 来处理条形的样式。也许使用像[Raphael](http://raphaeljs.com/)这样的图形库？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T11:06:29.610

通过一些复杂的 CSS3 选择器组合，您可以找出正在使用的列数以及容器的宽度取决于该样式：

```
div:first-child:last-child {
width: 100%;
}
div:first-child:nth-last-child(2), div:last-child:nth-first-child(2) {
width: 50%;
}
div:first-child:nth-last-child(3), div:first-child:nth-last-child(3) ~ div {
width: 33.33%;
}
div:first-child:nth-last-child(4), div:first-child:nth-last-child(4) ~ div {
width: 25%;
} 
```

如您所见，您仍然需要为每个可能的 div 数量添加规则，但您不再需要检测有多少 div 并相应地设置类。

但在您的情况下，还有另一种可能的解决方案。您可以以适当的方式在 div 和父元素上使用等`display: table`。`display: table-cell`然后，如果您将父项`100%`的宽度和容器的宽度设置为所有相同的值（例如`1%`），您将得到您想要的。

# format - Jxl CellType 在打开文档时被 setCellFormat 覆盖

> ID：11985610
> 
> 赞同：1
> 
> 时间：2012-08-16T10:52:25.670
> 
> 标签：format, jxl

我使用 Jxl (v2.6.10) 库来生成 xls 文档。我想要格式化 DateTime 单元格。如果不使用单元格格式，则一切正常：

```
WritableCell wc = new jxl.write.DateTime(5, 5, new java.util.Date()); 
sheet.addCell(wc); 
```

在文档中，单元格具有日期格式并显示为“8/16/2012”。但是当我添加：

```
WritableCell wc = new jxl.write.DateTime(5, 5, new java.util.Date()); 
wc.setCellFormat(new WritableCellFormat());
sheet.addCell(wc); 
```

然后只显示“41137.4459694444”（我使用的是 LibreOffice，但它与 Google 文档相同）。当我在电子表格中手动更改单元格格式时，数字按预期变为 8/16/2012。

我认为 setCellFormat 会覆盖 wc.getCellType() 但事实并非如此：

```
jxl.write.DateTime wc = new jxl.write.DateTime(5, 5, new java.util.Date());
System.out.println(wc.getType());
wc.setCellFormat(new WritableCellFormat());
System.out.println(wc.getType());
wc.setDate(new java.util.Date());
System.out.println(wc.getType()); 
```

产量：

```
Date
Date
Date 
```

我想知道这里发生了什么，因为现在我很困惑。

# objective-c - 找不到与应用程序标识符“”匹配的有效配置文件

> ID：11985611
> 
> 赞同：4
> 
> 时间：2012-08-16T10:52:28.933
> 
> 标签：objective-c, ios, xcode, ipad, provisioning-profile

大家好，我是 Xcode 等的新手……我现在制作了一个应用程序，我正在尝试临时分发它我为企业许可证付费，我发现这是其他人的问题，我只是太陌生了，无法发现要改变什么。找不到与应用程序标识符“4R7B8RY6Z1.com.LaneBob”匹配的有效配置文件是错误我创建了配置文件“4R7B8RY6Z1.com.LaneBob。*”我在代码或 Xcode 中更改什么来解决这个问题所以我能建吗？我正在构建而不是存档到设备，所以我不确定该怎么做。

谢谢你的帮助！

***编辑*** 我检查了这些地方：

1) info.plist 确保您的 Bundle 标识符与您在 Provisioning 门户中的标识符相匹配。它应该包含您在线输入的内容，而不是您的公司名称。

2) 您的目标 右键单击​​您的构建目标并选择“获取信息”。然后在 Build 选项卡下，找到 Code Signing 部分。应该有一项说代码签名身份。您可以在此处选择使用哪个签名身份进行签名，并且您希望确保它与预期的配置文件匹配。如果您没有看到列出的配置文件，则说明您没有正确安装它。您的配置文件需要安装在设备上才能运行，并且需要在 Xcode 中安装，以便它可以使用配置文件对应用程序进行签名。

还是行不通

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-10T18:06:52.390

当我尝试在我的 iPhone 上构建应用程序时，我收到了同样的错误消息。一切似乎都井井有条，即证书都是有效的并且存在等等，但我就是无法让它工作。

**我只是在Project** > **Build Settings** > **Code Signing** > **Code Signing Identity**中找不到“iOS 团队配置文件”选项——这是解决方案的主要线索。如果您在那里看不到该选项，请检查您的 Xcode **Organizer**。

在其中，转到**Library** > **Provisioning Profiles**：

![省概况](../Images/d4b9e13000bd8280400d1a5cf47278ad.png)

现在，如果一切正确，您*应该看到的是：*

![如果一切顺利](../Images/1214ae1c0ce4a157a9490b398e3321ea.png)

但另一方面，如果您看到一个空列表，请单击管理器右下角的**刷新按钮：**

![在此处输入图像描述](../Images/4689de8ae1f0eb42ababebde70515854.png)

在上述过程之后，Xcode 开始大量输出“添加”和“完成”的精彩消息，然后我的应用程序出现在我的 iPhone 上。结束。

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T14:52:23.870

对于你的两点：

1) 你应该在 info.plist 文件中有 com.LaneBob.yourappName。对于 Ad-hoc 分发，您不能使用带有通配符的“通用”名称。您不需要开始 HASH 部分（4R7B8RY6Z1。在您的情况下）

2）您在 XCode 目标首选项中选择代码签名身份。“左”单击项目，然后转到您的应用程序的目标。在里面，有不同配置的“代码签名身份”。当您构建和存档时，您通常会构建发布模式并使用分发证书。

如果您的 mac 中没有安装配置文件，所有这些都无法解决您的问题。只需从门户网站下载并双击它即可安装。此外，使用较新的 XCode，您只需在此处输入用户/密码即可从管理器下载所有配置门户。

顺便说一句，我发现您有时需要重新启动 xcode 才能“获取”钥匙串更新。

希望能帮助到你！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T23:04:33.883

就我而言，我必须首先使用 Cmd-B 构建应用程序。

这弹出了一个钥匙串窗口访问，要求我“允许”（或“始终允许”）Xcode 访问钥匙串。

只有这样我才能真正运行该程序以在我的 iPhone 上启动它。

显然，只打跑步并没有奏效。

（顺便说一句，请记住首先使用“iPhone Developer: Your Name ()”键为您的应用程序签名。

# windows-8 - 我们如何在服务器端验证 Windows 8 应用内帐单收据？

> ID：11985618
> 
> 赞同：3
> 
> 时间：2012-08-16T10:53:10.320
> 
> 标签：windows-8, windows-runtime, store, in-app

我目前正在为 Windows 8 工作的应用程序中实现应用程序内购买。

阅读[文档](http://msdn.microsoft.com/en-us/library/windows/apps/hh694067.aspx#Y959)后：

1.  请求应用程序的许可证信息：msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.store.licenseinformation.aspx

这会告诉您应用程序是否处于试用状态，以及使用应用程序内购买的产品列表。

1.  要执行购买，您需要使用以下对象：

CurrentApp：在实时环境中。这仅在应用程序在商店中被批准时才有效，因此您需要在打包提交到商店之前进行此更改。

CurrentAppSimulator：调试和测试。

2.a. 如果您在试用模式下运行应用程序，则购买应用程序调用：CurrentApp.RequestAppPurchaseAsync (true)

该参数请求获取一个包含 XML 的字符串，该字符串表示应用程序的所有收据和任何应用程序内购买。如果 includeReceipt 设置为 false，则此字符串为空。

2.b。从您的服务器验证购买。[参考](http://blogs.msdn.com/b/windowsstore/archive/2012/07/20/making-money-with-your-apps-through-the-windows-store.aspx)

我们要验证从服务器 2.a 获得的收据是否真实。要验证收据的真实性，您可以使用公共证书检查收据的签名。要获取此证书，请使用以下 URL：go.microsoft.com/fwlink/?LinkId=246509&cid= 收据的 CertificateId 在哪里。

这是来自 CurrentAppSimulator 的真实收据：

```
<?xml version="1.0" encoding="utf-8"?>
    <Receipt Version="1.0" ReceiptDate="2012-08-23T14:21:40Z" CertificateId="" ReceiptDeviceId="9d6b1f28-cab8-421f-8f8d-23df2dc3abbe">
    <ProductReceipt Id="d9437a12-4f91-4ef0-b0bf-527ab9da2ec9" AppId="Zolmo.JamiesRecipes_40cj6885yhw56" ProductId="JMPK_0004" PurchaseDate="2012-08-23T14:21:40Z" ProductType="Durable" />
</Receipt> 
```

没有 CertificateId，如何实现服务器端验证？如果在商店中没有应用程序，我如何测试所有这些？

谢谢，佩德罗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T22:34:00.553

没有沙盒环境可以对`Windows Store`. 不过，这应该可以帮助您走得更远：

当前`CertificateId`使用的`Store`是`b809e47cd0110a4db043b3f73e83acd917fe1336`（这可能会随着时间而改变，因此您的代码应该以编程方式从签名的收据中获取）

证书下载 URL 变为： `https://go.microsoft.com/fwlink/?LinkId=246509&cid=b809e47cd0110a4db043b3f73e83acd917fe1336`

这是一个示例收据，您可以测试解析上述`CertificateId`值`URL`的代码，以及使用上述返回的证书验证签名是否有效的代码`URL`：

```
<Receipt Version="1.0" ReceiptDate="2012-08-28T22:11:33Z" CertificateId="b809e47cd0110a4db043b3f73e83acd917fe1336" ReceiptDeviceId="4e362949-acc3-fe3a-e71b-89893eb4f528">
<AppReceipt Id="8ffa256d-eca8-712a-7cf8-cbf5522df24b" AppId="55428GreenlakeApps.CurrentAppSimulatorEventTest_z7q3q7z11crfr" PurchaseDate="2012-06-04T23:07:24Z" LicenseType="Full" />
<ProductReceipt Id="2559fa9a-9f86-0525-e655-536a6c96fac6" ProductId="Product1" PurchaseDate="2012-06-04T23:07:50Z" ExpirationDate="2012-06-07T23:07:49Z" ProductType="Durable" AppId="55428GreenlakeApps.CurrentAppSimulatorEventTest_z7q3q7z11crfr" />
<Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
    <SignedInfo>
        <CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
        <SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" />
        <Reference URI="">
            <Transforms>
                <Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature" />
            </Transforms>
            <DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256" />
            <DigestValue>npmBq7pdtq9FkfILSsHuVyD+QWiZg6J/klBKsyWhrw8=</DigestValue>
        </Reference>
    </SignedInfo>
    <SignatureValue>LKZSHmk6XjLaEHoJPFBB1GxVsFf2eilOXeyf2RvYtVvqjU4EIdOUfNM46sVifq3MyeE4N2s77iJmvdzgxmOM9tCimebiL7jsdpWakO0A9daImHESMPIrwZNham6jPCWaBUEOFT6PNy1v5MS+cdX25Wenk702L0wVQ6R8oGPlk5Im6Q62K69cvAFA3q/kiLHOyTZWHoIGw5lvFvAYI/aZhVoFQLv1FjK0Syg5nbMA19UrzwZ39jnJjcfuw/VX51uSv5Ze2x36HDXTpiw8wHoTzauGYzt9MXd4+qbiJ4AQys22AgO+cfAbDrTuH5duZ6DMeuFeEv8nu2p9PiVyBEOlZw==</SignatureValue>
</Signature> 
```

# ember.js - 让 emberjs 事件只被调用一次

> ID：11985619
> 
> 赞同：2
> 
> 时间：2012-08-16T10:53:13.863
> 
> 标签：ember.js

我有一个应用程序，其中的项目可以包含子项目等。

每个项目都有一个 mouseDown 事件，我希望能够使用该事件来单击并选择一个项目。

问题是，当我单击子项时，也会调用父项 mouseDown 事件。

我如何停止这个，所以 mouseDown 事件只被调用一次，或者如果那不可能，我实际上希望在 mouseDown 事件中调用的函数只被调用一次。

这是一个非常简单地展示这一点的jsfiddle。[http://jsfiddle.net/rmossuk/W9vmW/1/](http://jsfiddle.net/rmossuk/W9vmW/1/)

如果您单击 no 单击此处，它的鼠标按下事件将被调用两次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T12:11:53.593

你必须`return false;`在 mouseDown 函数中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T22:04:51.110

或者你可以使用 event.stopPropagation()。我更新了你的小提琴，见[http://jsfiddle.net/W9vmW/2/](http://jsfiddle.net/W9vmW/2/)。

这里有更多关于 ember 中的事件冒泡如何工作的信息 - [http://emberjs.com/guides/view_layer/#toc_event-bubbling](http://emberjs.com/guides/view_layer/#toc_event-bubbling)

事件将在视图层次结构中冒泡，直到事件到达根视图。事件处理程序可以使用与普通 jQuery 事件处理程序相同的技术来停止传播：

从方法 event.stopPropagation 返回 false

# javascript - 用动力学 js 更新画布

> ID：11985620
> 
> 赞同：2
> 
> 时间：2012-08-16T10:53:15.247
> 
> 标签：javascript, html5-canvas

我正在使用 Kinetic JS 拖动一个矩形“left_handle”。在拖动过程中，我还想将另一个矩形“框”的左边缘放在它上面。我没有收到任何错误，所以我假设我正在做的事情是有效的，但我认为我需要做一些事情来更新画布或......？

left_handle 矩形按预期移动，但盒子没有任何反应。

```
 var STAGE_WIDTH = 500;    

    var stage = new Kinetic.Stage({
      container: "container",
      width: STAGE_WIDTH,
      height: 200
    });
    var layer = new Kinetic.Layer();
    var rectX = 80;
    var rectY = stage.getHeight() / 2 - 25;

    var box = new Kinetic.Rect({
      x: rectX,
      y: rectY,
      width: 100,
      height: 50,
      fill: "#00D2FF",
      stroke: "black",
      strokeWidth: 4
    });

    var handle_left = new Kinetic.Rect({
        x: rectX,
        y: rectY,
        height: 50,
        width: 10,
        fill:'#FFC400',
        stroke:'black',
        strokeWidth:3,
        draggable:true,
        dragConstraint:'horizontal',
        dragBounds: {
            left: 10, right: STAGE_WIDTH - 20
        }
    });    

    // - - - - - - - this is the bit that doesn't work - - - - - 
    handle_left.on('dragmove', function(evt) {
      box.setX(handle_left.x);
      layer.draw();
    });
    // - - - - - - - - - - - - 

    layer.add(box);
    layer.add(handle_left);
    stage.add(layer); 
```

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T04:44:17.657

你很接近，试试这个：

```
box.setX(handle_left.getX()); 
```

供参考：http: [//jsfiddle.net/jHCRm/](http://jsfiddle.net/jHCRm/)

# php - 计算新的图像大小 - 我怎样才能使它更有效/更短

> ID：11985623
> 
> 赞同：3
> 
> 时间：2012-08-16T10:53:20.857
> 
> 标签：php, image-resizing, dimensions

我有一个脚本，这对于一个实际的简单任务来说非常庞大，因为它经常嵌套。它的作用是这样的：

*   获取图像的当前大小
*   获取新的最大尺寸
*   计算图像要调整到的尺寸（始终保持纵横比）：
    *   如果图像小于新尺寸：保持原始尺寸
    *   如果最大新维度具有 x 和 y 值：缩放图像以适合这两个值
    *   如果最大新维度只有一个 x 值：缩放以至少适合 x
    *   如果最大新维度只有一个 y 值：缩放以至少适合 y

这是脚本：

```
//example values, whereas 'new' is the maximum range for the new image
$dimensions = array(1920,1200);
$dimensionsNew  = array(160, 0);
// percentage the image must be scaled
$percentages    = array(0,0);

//calculate scale range
if ($dimensionsNew[0] != 0) $percentages[0] = $dimensions[0] / $dimensionsNew[0];
if ($dimensionsNew[1] != 0) $percentages[1] = $dimensions[1] / $dimensionsNew[1];

//get new dimensions
if ( ($dimensions[0] <= $dimensionsNew[0]) && ($dimensions[1] <= $dimensionsNew[1]) ) {
    $dimensionsNew[0]       = $dimensions[0];
    $dimensionsNew[1]       = $dimensions[1];
} elseif ($dimensionsNew[0] == 0) {
    if ($dimensions[1] <= $dimensionsNew[1]) {
        $dimensionsNew[0]   = $dimensions[0];
        $dimensionsNew[1]   = $dimensions[1];
    } else {
        $dimensionsNew[0]   = ceil($dimensions[0] / $percentages[1]);
    }
} elseif ($dimensionsNew[1] == 0) {
    if ($dimensions[0] <= $dimensionsNew[0]) {
        $dimensionsNew[0]   = $dimensions[0];
        $dimensionsNew[1]   = $dimensions[1];
    } else {
        $dimensionsNew[1]   = ceil($dimensions[1] / $percentages[0]);
    }
} elseif ($percentages[0] < $percentages[1]) {
    $dimensionsNew[1]       = ceil($dimensions[1] / $percentages[1]);
} else {
    $dimensionsNew[0]       = ceil($dimensions[0] / $percentages[0]);
} 
```

它做它应该做的事情。但是有没有更简单的方法来做到这一点？我想我看这段代码太频繁了，找不到优化的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:26:20.713

您应该在尺寸的口粮上使用“min”来计算所需的比例。如果是 >1 则不需要收缩，如果 <1 则收缩适当的量

```
//example values, whereas 'new' is the maximum range for the new image
$dimensions = array(1920,1200);
$dimensionsNew  = array(160, 0);   // NOTE: 0 won't work, but it's your example ;)

// What scale do we need to go to
$scaleRequired = min($dimensionsNew[0] / $dimensions[0], $dimensionsNew[1] / $dimensions[1]);

if ($scaleRequired < 1) {
    $finalDimensions = array (
         $dimensions[0] * $scaleRequired, 
         $dimensions[1] * $scaleRequired);

    // Resize to $finalDimensions

} else {
    // Do nothing
} 
```

# python - 从 django-admin 中的查询集中获取属性

> ID：11985626
> 
> 赞同：0
> 
> 时间：2012-08-16T10:53:35.060
> 
> 标签：python, django, django-admin

我想在 django-admin 中使用查询集（查询集[）](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/)来获取所有对象。根据实现的查询集，我想显示查询集的某些属性以供查看。例如，我想显示此人的 id、此人的父母、此人的父母姓名、电子邮件等。

Django 文档中提供的示例是：

```
class MyModelAdmin(admin.ModelAdmin):
    def queryset(self, request):
        qs = super(MyModelAdmin, self).queryset(request)
        if request.user.is_superuser:
            return qs
        return qs.filter(author=request.user) 
```

我肯定想改进这一点。

我尝试过这样的事情：

```
class ChildParentAdmin(admin.ModelAdmin):
    list_display = ('displayname', 'StudentID',)
    search_fields = ['displayname',]

    def queryset(self, request):
        qs = super(MyModelAdmin, self).queryset(request)
    def StudentID(self,queryset):
        for student in queryset:
            return student.pk 
```

我的重点是如何使用查询集并执行进一步的操作，例如获取每个孩子的 id、每个孩子的父母姓名等等......想要一些关于这样做的指导。非常感谢任何这方面的帮助..谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:02:11.173

```
def StudentID(self, obj):
  return '%s' % obj.pk
StudentID.short_description = 'StudentID'
def Student_Name(self, obj):
    return '%s' % obj.name 
```

这是正确的做法。您不必查询查询集中的所有对象。只需要传递obj。它将为所有对象运行它。还有其他方法可以做到这一点，不涉及类本身。要了解更多信息，请查看 list_display [Django Admin](https://docs.djangoproject.com/en/dev/ref/contrib/admin/)。例子很清楚。

# tomcat - capistrano部署后tomcat刷新目录

> ID：11985627
> 
> 赞同：1
> 
> 时间：2012-08-16T10:53:41.040
> 
> 标签：tomcat, capistrano

我已成功配置 capistrano 以在 tomcat 虚拟主机中更新我的 Coldfusion 项目。

问题是Tomcat看不到capistrano链接的新“当前”目录，tomcat看到旧目录。

有没有办法让tomcat刷新目录来查找文件？唯一的解决方案是重新启动 tomcat，我想在每次部署后避免这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T14:17:52.943

正如Tomcat的文档所说：

“如果将符号链接用于 docBase，则对符号链接的更改仅在 Tomcat 重新启动或取消部署和重新部署上下文后才会生效。上下文重新加载是不够的。”

因此以标准方式使用 capistrano 不起作用，需要重新启动 tomcat。

一种解决方法是将“生产”目录放在部署目录中，并在部署后与当前目录同步：

```
 task :after_deploy do
     run "rsync -a #{release_path}/* /your/www/directory/production/"
 end 
```

这样就不需要重新启动 Tomcat。

# python - Python regex - 忽略括号作为索引？

> ID：11985628
> 
> 赞同：8
> 
> 时间：2012-08-16T10:53:45.357
> 
> 标签：python, regex, findall

我目前编写了一个 nooby 正则表达式模式，其中涉及过度使用“（”和“）”字符，但我将它们用于“或”运算符，例如 (A|B|C) 表示 A 或 B 或C。

我需要在字符串中找到模式的每个匹配项。
尝试使用该`re.findall(pattern, text)`方法并不好，因为它将括号字符解释为索引符号（或任何正确的行话），因此生成的 List 的每个元素不是显示匹配文本部分的字符串，而是一个元组（其中包含非常难看的模式匹配片段）。

有没有我可以传递的论点`findall`来忽略括号作为索引？
或者我将不得不使用一个非常丑陋的组合`re.search`, 和`re.sub`

（这是我能想到的唯一解决方案；找到 re.search 的索引，将匹配的文本部分添加到列表中，然后将其从原始字符串中删除{通过使用丑陋的索引技巧}，继续此操作直到没有更多匹配。显然，这是可怕的和不可取的）。

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-16T11:03:51.360

是的，添加`?:`到组以使其不被捕获。

```
import re
print re.findall('(.(foo))', "Xfoo")   # [('Xfoo', 'foo')]
print re.findall('(.(?:foo))', "Xfoo") # ['Xfoo'] 
```

有关详细信息，请参阅[re 语法](http://docs.python.org/library/re.html#regular-expression-syntax)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T11:10:02.217

```
re.findall(r"(?:A|B|C)D", "BDE") 
```

或者

```
re.findall(r"((?:A|B|C)D)", "BDE") 
```

# c# - 实体框架 - 使用 Web.Config 连接字符串

> ID：11985632
> 
> 赞同：2
> 
> 时间：2012-08-16T10:54:01.330
> 
> 标签：c#, asp.net, entity-framework-4

设置 - ASP.Net Web 应用程序引用了一个单独的项目，其中包含 dbml（即将成为 edmx）和业务逻辑类。

几年来，我一直在使用 Linq-To-SQL，并且一直使用与此处描述的相同设置用于从 web.config 传递的连接字符串。

[Entity Framework 的提供者连接字符串是否可以替换为已经在 web.config 中定义的数据库连接字符串？](https://stackoverflow.com/questions/4876880/can-the-provider-connection-string-of-entity-framework-be-substituted-with-a-db)

所以我们添加了另一个对象上下文部分类，并使用构造函数传入连接字符串。

但这有强迫我在每次重建时从 dbml 设计器类的顶部手动删除两个构造函数的刺激。我们很快就会转向实体框架。是否为 EF 推荐相同的方法？而且您是否还必须在每次重建时手动删除两个构造函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:05:37.890

[http://www.connectionstrings.com/](http://www.connectionstrings.com/)

您可以在那里找到任何您想要的特定连接字符串。这取决于您使用的是哪种类型的数据库，我无法进一步解释，因为我不知道您使用的是哪一种。

# jquery - 使用 jquery 或 css 删除字符串

> ID：11985637
> 
> 赞同：0
> 
> 时间：2012-08-16T10:54:24.513
> 
> 标签：jquery, css

我有一些html：

```
 <span class="variantprice"><span class="pricelabel">
Preis&nbsp;</span>€ 240,00 (CHF)</span> 
```

使用 jquery 删除（CHF）的最佳方法是什么？甚至是 CSS ？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T10:56:22.347

使用 jQuery：

```
 $(".variantprice").html(function(){
        return $(this).html().replace(" (CHF)", ""); 
    }); 
```

见演示：http: [//jsfiddle.net/AYZEs/](http://jsfiddle.net/AYZEs/)

# javascript - 如何在渲染页面后使用 Java Script 检测 dom 元素值的值是否有任何变化（例如，任何输入或复选框值已更改）

> ID：11985638
> 
> 赞同：0
> 
> 时间：2012-08-16T10:54:30.130
> 
> 标签：javascript, jquery

在这种情况下，挑战是 dom 元素是为不同的请求动态创建的，并且 dom 元素的总数不是固定的[例如，可能是 1 行或多行]。

例如，当有来自 Web 服务的响应时，会创建 table/dom 元素。网页上有一个保存按钮，但仅当其中一个元素发生任何更改时才会启用[更改不应与最后一个值相同]。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:57:41.683

使用[`.on()`](http://api.jquery.com/on/)函数的**事件委托**语法将`change`事件处理程序绑定到您的输入。像这样的东西：

```
$(document).on('input', 'change', function() {
    // enable your 'Save' button
}); 
```

在链接的 API 页面中有更多关于事件委托的信息，特别是*直接和委托事件*部分。

请注意，该`.on()`函数是在 jQuery 1.7 中引入的。如果您使用的是之前的版本，则可以使用该[`.delegate()`](http://api.jquery.com/delegate/)函数获得相同的结果 - 只需切换前两个参数。

# maven - 使用 Maven 在 Intellij IDEA 中运行单元测试时 zmq 失败

> ID：11985641
> 
> 赞同：0
> 
> 时间：2012-08-16T10:54:42.073
> 
> 标签：maven, intellij-idea, zeromq, java.library.path, jzmq

当我在 Intellij IDEA (Ultimate) 11.1 中使用 maven 运行单元测试时。我得到了以下异常。

```
-------------------------------------------------------------------------------
Test set: myapp.messaging.MQServiceTest
-------------------------------------------------------------------------------
Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.026 sec <<< FAILURE!
testEnqueueAndDequeue(myapp.messaging.MQServiceTest)  Time elapsed: 0.024 sec  <<< ERROR!
java.lang.UnsatisfiedLinkError: no jzmq in java.library.path
    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1856)
    at java.lang.Runtime.loadLibrary0(Runtime.java:845)
    at java.lang.System.loadLibrary(System.java:1084)
    at org.zeromq.ZMQ.<clinit>(ZMQ.java:34)
    at myapp.messaging.MQClient.<init>(MQClient.java:34)
    at myapp.messaging.MQServiceTest.testEnqueueAndDequeue(MQServiceTest.java:34)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53)
    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
    at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)
    at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:107)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68) 
```

从互联网搜索后，似乎 zmq 缺少 java.library.path - usr/local/lib。所以我尝试在 maven 的 vm 选项中添加“-Djava.library.path=/usr/local/lib”，但还是不行。

笔记：

1.  我可以在 bash 中使用“mvn test”通过测试。（我在 ~/.profile 中添加了“export LD_LIBRARY_PATH=/usr/local/lib”）

2.  我在 pom 而不是 jzmq 中配置了这个，因为我需要在我的项目中使用storm并且storm引用了jzmq。

> ```
> <dependency>
>     <groupId>storm</groupId>
>     <artifactId>storm</artifactId>
>     <version>0.7.4</version>
> </dependency> 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T03:27:59.963

我尝试从终端启动 Intellij，它工作正常。当我从 Ubuntu 的启动面板启动它时，它不是从我的任何登录环境变量开始的。检查[http://blog.bluecalyx.org/2009/07/02/missing-environment-variables-in-intellij/后，我使用](http://blog.bluecalyx.org/2009/07/02/missing-environment-variables-in-intellij/)**bash --login IDEAPATH/bin/idea.sh**更新了 Intellij 桌面文件中的 exec ，然后世界变得和平。

我仍然感到困惑的一件事是，即使我在 Intellij maven runner 设置中添加了*-Djava.library.path=/usr/local/lib*，它也不起作用。

最后提醒一下，在开始使用 ZMQ 和 jzmq 之前，必须先安装它。请参阅 www.zeromq.org/intro:get-the-software 和 www.zeromq.org/bindings:java

# jquery - 如何为多个按钮使用一键事件处理程序

> ID：11985642
> 
> 赞同：4
> 
> 时间：2012-08-16T10:54:42.790
> 
> 标签：jquery

我有 4 个不同 ID 的按钮。当我点击它们时，我需要执行一项功能。所以我需要这样的东西：

```
$('#button #button').click(function() 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-16T10:59:46.197

要一次选择 4 个按钮，请编写以下内容：

```
$('#button1, #button2, #button3, #button4').click(function(event){ /* code here */ }); 
```

如果您需要确定按下了哪个按钮，请编写如下内容：

```
$('#button1, #button2, #button3, #button4').click(function(event){ 
    if($(event.target).attr('id')=='button1'){
        /* specific code for button1 */
    } else if($(event.target).attr('id')=='button2'){
        /* specific code for button2 */
    } else if($(event.target).attr('id')=='button3'){
        /* specific code for button3 */
    } else if($(event.target).attr('id')=='button4'){
        /* specific code for button4 */
    } 
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-16T10:57:09.610

最简单的方法是为所有按钮添加一个类，如下所示：

```
$('.button_action').click(function() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T10:56:50.950

使用逗号：

```
$('#button1, #button2').click(function()... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T10:56:45.667

`id`用逗号分隔每个：

```
$('#button1, #button2, #button3, #button4').click(...) 
```

# c# - 找不到方法

> ID：11985643
> 
> 赞同：1
> 
> 时间：2012-08-16T10:54:52.267
> 
> 标签：c#, reflection, methodinfo

嗨，我有包含方法的对象：

```
{Boolean Deserialize(System.String, HardwareItemDescriptionControlDriver ByRef)} 
```

当我试图找到这种方法时：

```
 Type elementType = typeof(HardwareItemDescriptionControlDriver);

 typesParameters = new Type[] { typeof(String), elementType.MakeByRefType() };
 methodInfo = elementType.GetType().GetMethod("Deserialize", typesParameters); 
```

方法信息为空

我看不出问题出在哪里-我还尝试使用参数找到此方法：

```
typesParameters = new Type[] { typeof(String), elementType }; 
```

但它也不起作用，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:01:40.423

你有一个多余的`GetType()`；`elementType`已经是：*_*`Type`

```
 methodInfo = elementType.GetMethod("Deserialize", typesParameters); 
```

使用 extra `GetType()`，您正在询问是否`System.Type`（或更可能`RuntimeType`）具有该方法（哪个：它没有）。

# emacs - 使用 Yasnippet 的 Emacs 显示效果

> ID：11985649
> 
> 赞同：1
> 
> 时间：2012-08-16T10:55:13.570
> 
> 标签：emacs, colors, background, yasnippet

Yasnippet 有一个很好的“运行......退出片段后”。

我想做的是在每个结尾片段之后加入一些视觉效果（改变背景颜色，比如说第二个或更复杂的东西）。

我通过在那个钩子中来回切换背景颜色来做到这一点，但它真的很短而且效率不高，而且也很丑陋。

但是，如何使用计时器完成此操作或类似操作？

可选：欢迎提出花哨效果（包括计时器）的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T11:37:02.490

您可以更改背景一次，然后在 1 秒后使用以下命令再次更改`run-with-timer`：

```
(run-with-timer 1 nil 'my-fun) 
```

`my-fun`你想要的动作在哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T22:16:01.013

我的第一个想法是让 Emacs 发出“哔”声。我实际上讨厌那种声音，所以我让它闪烁框架。

```
(setq visible-bell t)
(add-hook 'yas-whatever-hook (lambda () (beep t))) 
```

# asp.net - HtmlEncode 在 asp.net 中不起作用

> ID：11985652
> 
> 赞同：0
> 
> 时间：2012-08-16T10:55:26.323
> 
> 标签：asp.net, html, gridview

我在使 HtmlEncode 在 ASP.Net 的 GridView 中正常工作时遇到问题。基本上，我使用 TemplateField 来切换 ItemTemplate 和 EditItemTemplate 以在 GridView 本身上输入数据。我正在寻找一些关于如何在 ASP.Net 中编码 Eval 和 Bind 方法的资源，但它们最终都不起作用。

下面是我的代码：

```
<div id="dvShowContent" runat="server" style="text-align: center">
    <asp:GridView ID="dgvSortKey" runat="server" AllowSorting="True" OnRowDataBound="gv_drb"
        AutoGenerateColumns="False" AllowPaging="True" BackColor="White" BorderColor="#336666"
        BorderStyle="Double" BorderWidth="3px" CellPadding="4" GridLines="Horizontal"
        Height="73px" AutoGenerateEditButton="True" OnRowEditing="dgvSortKey_RowEditing"
        OnRowUpdating="dgvSortKey_RowUpdating" OnRowCancelingEdit="dgvSortKey_RowCancelingEdit"
        OnSelectedIndexChanging="dgvSortKey_SelectedIndexChanging" OnPageIndexChanged="dgvSortKey_PageIndexChanged"
        OnPageIndexChanging="dgvSortKey_PageIndexChanging" OnRowCommand="dgvSortKey_RowCommand"
        OnRowDeleted="dgvSortKey_RowDeleted" OnRowUpdated="dgvSortKey_RowUpdated" Width="561px"
        PageSize="15" DataKeyNames="KeyCode,KeyDescription">
        <FooterStyle BackColor="White" ForeColor="#333333" />
        <RowStyle BackColor="White" ForeColor="#333333" />
        <PagerStyle BackColor="#336666" ForeColor="White" HorizontalAlign="Center" />
        <SelectedRowStyle BackColor="#339966" Font-Bold="True" ForeColor="White" />
        <HeaderStyle BackColor="#336666" Font-Bold="True" ForeColor="White" HorizontalAlign="Center" />
        <AlternatingRowStyle BackColor="LightCyan" />
        <Columns>
            <asp:TemplateField HeaderText="">
                <ItemTemplate>
                    <asp:LinkButton ID="lnkdelete" runat="server" OnClick="lnkdelete_Click">Delete</asp:LinkButton>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Instruction Key Code">
                <ItemTemplate>
                    <asp:Label ID="lblValKeyCode" runat="server" Text='<%# Server.HtmlEncode((string)Eval("KeyCode")) %>'></asp:Label>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox ID="txtValKeyCode" runat="server" Text='<%#Bind("KeyCode") %>' MaxLength="10"></asp:TextBox>
                    <%--<asp:TextBox ID="txtValKeyCode" runat="server" Text='<%#System.Web.HttpUtility.HtmlEncode(Eval("KeyCode").ToString()) %>' MaxLength="10"></asp:TextBox>--%>
                </EditItemTemplate>
                <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" CssClass="GvBorderGreen" />
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Description">
                <ItemTemplate>
                    <asp:Label ID="lblValKeyDescription" runat="server" Text='<%# Server.HtmlEncode((string)Eval("KeyDescription")) %>'></asp:Label>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox ID="txtValKeyDescription" runat="server" Text='<%#Bind("KeyDescription") %>'
                        MaxLength="10"></asp:TextBox>
                    <%--<asp:TextBox ID="txtValKeyDescription" runat="server" Text='<%#System.Web.HttpUtility.HtmlEncode(Eval("KeyDescription").ToString()) %>'
                        Width="300" MaxLength="20"></asp:TextBox>--%>
                </EditItemTemplate>
                <ItemStyle CssClass="GvBorderGreen" />
            </asp:TemplateField>
            <%--<asp:BoundField DataField="KeyCode" HeaderText="Instruction Key Code" HtmlEncode="true" />
            <asp:BoundField DataField="KeyDescription" HeaderText="Description" HtmlEncode="true" />--%>
        </Columns>
    </asp:GridView>
</div> 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:33:44.683

正如 Waqar 建议的那样，答案在他提供的链接中——为了更清楚地说明这一点，您需要更改这一行：

```
<asp:TextBox ID="txtValKeyCode" runat="server" Text='<%#Bind("KeyCode") %>' MaxLength="10"></asp:TextBox> 
```

对此：

```
<asp:TextBox ID="txtValKeyCode" runat="server" Text='<%#System.Web.HttpUtility.HtmlEncode((string)Eval("KeyCode")) %>' MaxLength="10"></asp:TextBox> 
```

# .net - 使用 SDK 执行构建和运行应用程序

> ID：11985653
> 
> 赞同：4
> 
> 时间：2012-08-16T10:55:27.820
> 
> 标签：.net, winapi

当我安装适用于 Windows 8 的 Windows 软件开发工具包 (SDK) 时，如何在我的构建服务器上执行构建并在我的应用服务器上运行应用程序。

我不想在这些机器上安装 Visual Studio。

它指出“Windows SDK 不再附带完整的命令行构建环境。Windows SDK 现在需要单独安装编译器和构建环境。”

# .net - Azure 上的 .NET 4.5 RTM？

> ID：11985654
> 
> 赞同：21
> 
> 时间：2012-08-16T10:55:35.787
> 
> 标签：.net, azure, .net-4.5

现在 .NET 4.5 和 Visual Studio 2012 具有 RTM，有没有办法在 Windows Azure 上使用它？我知道人们用于 .NET 4.5 RC 的黑客攻击，但我正在寻找一个干净的解决方案。

如果还不可能，有谁知道工具等何时会更新以支持它？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-16T11:17:09.043

目前还没有办法在 Windows Azure 上使用 .NET 4.5 开箱即用。您可以使用[Windows Azure Bootstrapper](http://bootstrap.codeplex.com/)下载 .NET 4.5 并安装它：

```
bootstrapper.exe -get http://download.microsoft.com/download/B/A/4/BA4A7E71-2906-4B2D-A0E1-80CF16844F5F/dotNetFx45_Full_setup.exe -lr $lr(temp) -run $lr(temp)\dotNetFx45_Full_setup.exe -args /q /norestart -block 
```

除此之外，我会留意[Guest OS Releases 页面](http://msdn.microsoft.com/en-us/library/windowsazure/ee924680)上与 .NET 4.5 相关的更新。

**2012 年 9 月 3 日更新**：您是否看到此消息：“*从 2012 年 10 月 3 日开始，Windows Azure 将不再支持部署在来宾操作系统 2.9 或更早版本和 1.17 或更早版本上的云服务（托管服务）。* ”。这可能表明来宾操作系统版本在 10 月 3 日发生了变化（可能支持 .NET 4.5）...

**2012 年 9 月 18 日更新**：[Scott Guthrie](http://weblogs.asp.net/scottgu/archive/2012/09/17/announcing-great-improvements-to-windows-azure-web-sites.aspx)确认 .NET 4.5 支持将于 2012 年 10 月到期。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-29T16:07:53.227

Scott Gu 的推特回复： [https ://twitter.com/scottgu/status/240567829802414081](https://twitter.com/scottgu/status/240567829802414081)

> 我们正在努力工作 - 我应该很快就会有一个更精确的 eta

**更新（9 月 17 日）：**

> ...我们将在下个月使用 Windows Server 2012 和 .NET 4.5 启用新的 Web 和辅助角色映像

[http://weblogs.asp.net/scottgu/archive/2012/09/17/announcing-great-improvements-to-windows-azure-web-sites.aspx](http://weblogs.asp.net/scottgu/archive/2012/09/17/announcing-great-improvements-to-windows-azure-web-sites.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T00:32:02.233

Azure Facebook Group 的负责人回复我：

> “我们正在努力根据客户的反馈来提供这个。我们还没有确切的时间来分享，但请继续关注！”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T15:52:40.720

Sandrino 是正确的，它还没有得到官方支持，并且在用于云服务的图像上提供框架之前不会支持。如果您只想寻找干净的解决方案，那么您需要等待；但是，我认为您不会等太久。

我没有看到官方发布日期公布；然而，在Jason Zander 的博客上[留下](https://blogs.msdn.com/b/jasonz/archive/2012/08/15/visual-studio-2012-and-net-framework-4-5-released-to-the-web.aspx?Redirected=true&PageIndex=2#comments)的关于 VS 2012 发布的评论中，Scott Hanselman 做出了这样的回应：

> James，您应该在 RTM 发布后不久在 Azure VM 中看到 Windows Server 2012，然后是云服务，然后是网站。它很快就会到来。

过去，当我们看到新的 .NET Frameworks 发布时，它们在几个月内就可以在 Azure 上使用（如果我没记错的话，不到 90 天）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T13:34:35.380

这是投票支持将 .Net 4.5 添加到 Azure 的链接。这似乎不是任何人都需要投票的事情，但它可能有助于让 Azure 项目经理意识到，如果它获得了很多选票，那么有多少人想要这个：

[http://www.mygreatwindowsazureidea.com/forums/34192-windows-azure-feature-voting/suggestions/2598170-iis8-and-asp-net-4-5-support-in-azure-platform](http://www.mygreatwindowsazureidea.com/forums/34192-windows-azure-feature-voting/suggestions/2598170-iis8-and-asp-net-4-5-support-in-azure-platform)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-20T08:17:41.110

来自微软的公告：

“我们很高兴地宣布，Windows Azure 网站将**很快**支持基于 .NET 4.5 构建的应用程序。”

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-26T08:15:45.740

Azure 现在支持 Azure 网站的 4.5，请参阅 Scott Gus 帖子[http://weblogs.asp.net/scottgu/archive/2012/10/25/net-4-5-now-supported-with-windows-azure-web-sites .aspx](http://weblogs.asp.net/scottgu/archive/2012/10/25/net-4-5-now-supported-with-windows-azure-web-sites.aspx)

几天后将支持 Worker/Web 角色

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-29T16:22:43.027

最新版本的 Azure 工具 SDK 现在支持 .Net 4.5：

[http://msdn.microsoft.com/en-us/library/windowsazure/ff683673.aspx#BK_October2012](http://msdn.microsoft.com/en-us/library/windowsazure/ff683673.aspx#BK_October2012)

在这里下载：

[http://www.microsoft.com/en-us/download/details.aspx?id=35448](http://www.microsoft.com/en-us/download/details.aspx?id=35448)

# tomcat - 如何在 tomcat-users.xml 中添加组？

> ID：11985656
> 
> 赞同：0
> 
> 时间：2012-08-16T10:55:36.730
> 
> 标签：tomcat

如何在 tomcat-users.xml 中添加组，这个文件有很多版本。在某些文件中只有，在某些文件中有

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:10:38.190

Tomcat 只有用户和角色：所有权限都是基于“角色”给出的，我想这可能意味着“组”。

为了向 中添加角色`tomcat-users.xml`，您需要做的就是输入它。这是`tomcat-users.xml`Tomcat (7.0.29) 附带的库存文件：

```
<tomcat-users>
<!--
  <role rolename="tomcat"/>
  <role rolename="role1"/>
  <user username="tomcat" password="tomcat" roles="tomcat"/>
  <user username="both" password="tomcat" roles="tomcat,role1"/>
  <user username="role1" password="tomcat" roles="role1"/>
-->
</tomcat-users> 
```

请注意，所有内容都被 XML 注释包围，因此它实际上是空的。

假设您要添加角色“myGroup”并将自己（“kad”）放入其中：

```
<tomcat-users>
<!--
  <role rolename="tomcat"/>
  <role rolename="role1"/>
  <user username="tomcat" password="tomcat" roles="tomcat"/>
  <user username="both" password="tomcat" roles="tomcat,role1"/>
  <user username="role1" password="tomcat" roles="role1"/>
-->
  <role rolename="myGroup" />
  <user username="kad" password="secret" roles="myGroup" />
</tomcat-users> 
```

现在您只需要配置您的 webapp 以在允许访问各种资源时检查“myGroup”角色。您可以在 webapp 的`web.xml`文件中执行此操作，也可以使用该方法以编程方式执行此操作`ServletRequest.isUserInRole("myGroup")`。

请注意，`tomcat-users.xml`除了可能使用 Tomcat 的“管理器”webapp 之外，您不应该真正在生产环境中使用身份验证：它对于任何工业强度来说都太不灵活了。

# node.js - 在 Node.JS Web 应用程序中使用 mongoDB

> ID：11985658
> 
> 赞同：3
> 
> 时间：2012-08-16T10:55:43.783
> 
> 标签：node.js, mongodb, web-applications

我正在用 Node.JS 编写一些简单的 Web 应用程序，并希望使用 mongoDB 作为主要数据存储。
Node-mongodb-native 驱动程序需要进行链式调用，然后才能真正查询或存储数据（打开数据库连接、身份验证、获取集合）。
在初始化应用程序时，在每个请求处理程序中或全局范围内进行此初始化的最佳位置在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:07:09.223

您最好将 Mongo 初始化放在您的请求处理程序之外 - 否则它将为每个提供的页面重新连接：

```
var mongo = require('mongodb');

// our express (or any HTTP server)
var app = express.createServer();

// this variable will be used to hold the collection for use below
var mongoCollection = null;

// get the connection
var server = new mongo.Server('127.0.0.1', 27017, {auto_reconnect: true});

// get a handle on the database
var db = new Db('testdb', server);
db.open(function(error, databaseConnection){
    databaseConnection.createCollection('testCollection', function(error, collection) {

      if(!error){
        mongoCollection = collection;
      }

      // now we have a connection - tell the express to start
      app.listen(80);

    });
});

app.use('/', function(req, res, next){
    // here we can use the mongoCollection - it is already connected
    // and will not-reconnect for each request (bad!)
}) 
```

# asp.net - UserID 作为属性

> ID：11985659
> 
> 赞同：0
> 
> 时间：2012-08-16T10:55:46.643
> 
> 标签：asp.net, oop, userid

我在下面的班级有问题：

我想在没有 Session 的情况下保存 UserID，当然还有 Querystring，我想我可以将它存储在我的 UserClass 中。

因此，当我尝试获取 ID 时，例如：Default.aspx：

```
MyUserClass  userclass=new MyUserClass();//global

//(at button click)
userclass.GetUser(TextBox1.Text, TextBox2.Text);
int UserID=userclass.UserID; 
```

当我重新加载页面 UserID=0 时，我可以了。然后我尝试为此使用静态变量。例子：

```
static MyUserClass  userclass=new MyUserClass(); //global
//(at button click)
    userclass.GetUser(TextBox1.Text, TextBox2.Text);
    int UserID=userclass.UserID; 
```

当我也重新加载页面时，我得到了 ID，但是当其他人登录时，我的 ID 将更改为另一个 ID

我怎么能用这种方式做到这一点，或者我的意思是用属性？

课程是：

```
public class MyUserClass
{
    private  int _UserID;
    public  int UserID
    {
        get
        {
            return _UserID;
        }
    }

    public int  GetUser(string UserName, string Pass)
    {
        int UserID=0;
        try
        {

            DB.conn.Close();

            SqlCommand command = new SqlCommand("pUserkontrol", DB.conn);
            command.CommandType = CommandType.StoredProcedure;
            command.Parameters.AddWithValue("@puserName", UserName);
            command.Parameters.AddWithValue("@pPass", Pass);
            DataTable dt = new DataTable();
            DB.conn.Open();
            SqlDataReader dr = command.ExecuteReader();

            dt.Load(dr);
            DB.conn.Close();
            if (dt.Rows.Count < 1)
            {

            }

            else
            {
                foreach (DataRow datarow in dt.Rows)
                {
                    _UserID = Convert.ToInt32(datarow["UserID"]);
                    //UserID = _UserID;

                }

            }
        }
        catch (Exception ex)
        {

        }

        return UserID;

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:19:32.273

网络本质上是无状态的，因此每个新请求都“覆盖”了 UserId 值，因为它没有任何东西可以将请求绑定回您的类。您需要使用某种存储机制。正如您使用会话和查询字符串打折的那样，我建议滚动您自己的轻量级 ASP.NET 成员资格提供程序并实现 IIdentity 和 IPrincipal 并通过提供程序创建身份验证票证 (Cookie) 以保留您的登录后详细信息 (userId)。看看 Brady Gasters 博客和那里发布的关于如何做到这一点的评论。

[http://www.bradygaster.com/custom-authentication-with-mvc-3.0](http://www.bradygaster.com/custom-authentication-with-mvc-3.0)

这篇文章使用 Sessions 实现了 MVC 3 中的成员资格，但是页面上的评论和其他链接显示了如何操作代码和使用 cookie 身份验证。在 Web 表单中实现它（如果您使用的是 Web 表单）也应该相当简单。

# javascript - Javascript测试中的假日期对象

> ID：11985660
> 
> 赞同：0
> 
> 时间：2012-08-16T10:55:46.970
> 
> 标签：javascript, unit-testing

我使用[buster.js](http://busterjs.org/)并且我想测试一个函数，该函数从她的出生年份返回一个人的年龄。我的测试如下所示：

```
"Should get correct age from year": function () {
    assert(getAgeFromYear(1990) === 22);
} 
```

这只会在 2012 年底之前保持绿色。如何伪造 buster.js 中的日期对象，以便它在未来几年内有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:58:05.527

制作一个函数`getAgeFromYearDate(int, Date)`并对其进行测试。然后制作一个`getAgeFromYear(int)`使用当前日期的函数。该方法将如下所示：

```
function getAgeFromYear(year) {
    return getAgeFromYearDate(year, new Date());
} 
```

如果`getAgeFromYearDate`工作正常，您可以假设它`getAgeFromYear`工作正常。

# java - 输入文件和自动提交 - Play framework 2

> ID：11985662
> 
> 赞同：-1
> 
> 时间：2012-08-16T10:55:57.713
> 
> 标签：java, javascript, html, playframework, playframework-2.0

如何编写自动提交表单（用于文件上传）？我试图`onchange`在`<input>`字段中添加：

```
@form(action = routes.Application.upload, 'enctype -> "multipart/form-data") {
    <div class="fileupload fileupload-new" data-provides="fileupload">
        <span class="btn btn-large btn-primary btn-file">
            <span class="fileupload-new">Select file</span>
            <span class="fileupload-exists">Change</span>
        <input type="file" name="file" onchange="@routes.Application.upload()"/>
        </span>
        <span class="fileupload-preview"></span>
        <a href="#" class="close fileupload-exists" data-dismiss="fileupload" style="float: none">&times;</a>

        <input class="btn btn-success btn-large"  type="submit" value="Submit!"> 

     </div>
    } 
```

但它不起作用。有任何想法吗？我正在使用带有 Java 的 Play Framework 2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:30:42.287

您应该亲眼检查它在代码中的外观。在您的`onchange`属性中，您只放置了一个 url，而对于浏览器来说，它没有任何意义。

相反，您应该将一些 JavaScript 方法的名称放在那里以执行，即：

```
<input type="file" name="file" onchange="this.form.submit()"/> 
```

# tags - 创建可表示的标签签名

> ID：11985671
> 
> 赞同：0
> 
> 时间：2012-08-16T10:56:27.400
> 
> 标签：tags, compression, signature

可以说我有分配给它们的标签的项目，例如“蓝色”、“大”、“灵活”。可以说我还有一本包含所有可能标签的字典。

现在的问题是：如何将所有标签压缩为单个小*签名*，比如说一个浮点数。要求是具有相似标签的项目具有相似的签名。

所有的标签都是永远已知的。签名应该相对较小，例如浮点数，或一组少数整数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:01:44.900

坦率地说，我认为将其归结为一个数字的计划是不值得的。只需使用 16 位 int 或 32 位 int 来表示标签。并为要应用于项目的每个标签使用其中一个字段。您对节省空间的追求只会不必要地增加复杂性。

为每个标签分配一个 ID 号。您可能希望将标签到 ID 的映射存储在单独的表中。将标签总数称为 N 和给定项目可以具有的标签数 M。标签签名将是作为 M 位基数 N 数的 ID。

所以如果 N = 50k 并且 M = 3

标签 1 = 49,999 标签 2 = 1 标签 3 = 2

标签签名 = 49,999 + 1 * 50,000 ^ 1 + 2 * 50,000 ^ 2 = 5,000,099,999

您需要超过 64 位来表示这一点。使用足够大的整数类型来表示这个值。如有必要，请使用多个整数。不要使用浮点数，你会失去精度。

# java - 杰克逊相当于@XmlSeeAlso

> ID：11985680
> 
> 赞同：1
> 
> 时间：2012-08-16T10:57:12.813
> 
> 标签：java, json, jersey, jackson

我正在使用 Java 和 Jersey 编写一个 RESTful Web 服务，该服务将接受 XML 或 JSON 输入。Jackson 用作 JSON 反序列化器，并集成到 Jersey 配置中。

其中一个端点是对 URL 的 POST 请求，其中的内容可以是几个不同的 Java 类之一，并且有一个公共基类。这些带有 XML 注释的类是：

```
@XmlRootElement(name = "action")
@XmlAccessorType(XmlAccessType.NONE)
@XmlSeeAlso({ FirstAction.class, SecondAction.class, ThirdAction.class })
public abstract class BaseAction {
}

@XmlRootElement(name = "first-action")
@XmlAccessorType(XmlAccessType.NONE)
public class FirstAction extends BaseAction implements Serializable {
}

// Likewise for SecondAction, ThirdAction 
```

在我的资源中，我可以声明一个方法，例如：

```
@POST
@Path("/{id}/action")
public Response invokeAction(@PathParam("id") String id, BaseAction action) {...} 
```

然后我可以发布一个看起来像的 XML 片段，`<firstAction/>`我的方法将被一个`FirstAction`实例调用。到现在为止还挺好。

我苦苦挣扎的地方是让 JSON 反序列化与 XML 反序列化一样无缝地工作。在`@XmlSeeAlso`注释对于使 XML 反序列化正常工作至关重要的地方，似乎 JSON 的等价物是`@JsonSubTypes`. 所以我这样注释类：

```
// XML annotations removed for brevity, but they are present as in the previous code snippet
@JsonSubTypes({ @JsonSubTypes.Type(name = "first-action", value = FirstAction.class),
    @JsonSubTypes.Type(name = "second-action", value = SecondAction.class),
    @JsonSubTypes.Type(name = "third-action", value = ThirdAction.class) })
public abstract class BaseAction {
}

@JsonRootName("first-action")
public class FirstAction extends BaseAction implements Serializable {
}

// Likewise for SecondAction, ThirdAction 
```

然后我给它我的测试输入：`{ "first-action": null }`但我能得到的是：

“org.codehaus.jackson.map.JsonMappingException：根名称'first-action'与类型[简单类型，类com.alu.openstack.domain.compute.server.actions.BaseAction]的预期（'action'）不匹配"

不幸的是，因为我试图与其他人的 API 兼容，所以我无法更改我的示例输入 -`{ "first-action": null }`必须工作，并向我的方法提供 FirstAction 类的对象。（该操作没有任何字段，这就是为什么 null 不应该成为问题的原因——重要的是类的类型）。

让 JSON 反序列化以与 XML 反序列化相同的方式工作的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:01:35.103

如果您使用的是 Jackson，那么您正在寻找`@JsonTypeInfo`和`@Type`. 请参阅[此处](http://wiki.fasterxml.com/JacksonPolymorphicDeserialization)了解更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T17:14:49.963

JSON 不像 XML 那样工作，因此解决方案并不相同。

您需要使用的是（就像其他答案所说）`@JsonTypeInfo`，. 这只会触发类型标识符的包含和使用。如果是这样，那么“@JsonSubTypes”将用于反序列化。

必须使用此指标的原因很简单：如果您有多个要反序列化的替代类型，则必须有一些区别。

还要注意，这不一定是属性——虽然大多数用户选择“As.PROPERTY”包含，但它不是（IMO）最好的方法。“WRAPPER_OBJECT”可能是您正在寻找的，因为它添加了一个额外的中间 JSON 属性，这有点类似于 XML 所做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T09:45:38.050

我调查了使用`@JsonTypeInfo`但遇到了问题，因为我无法更改输入格式。解析器绝对必须能够处理输入`{ "first-action":null }`。这排除了添加`@type`or`@class`属性的可能性。使用包装器对象可能有效，但它在`null`有效负载上阻塞。

一个关键点是我使用了 UNWRAP_ROOT_PROPERTY 配置选项。杰克逊绝对坚持要找到一`action`处房产，我无法让它考虑其他任何事情。因此，我必须有选择地为某些域对象禁用 UNWRAP_ROOT_PROPERTY，以便杰克逊对解析替代方案持开放态度。我修改了项目的 ContextResolver.getContext(...) 实现以检查`@JsonRootName`注释 - 因为这仅在启用包装时才有意义，所以我使用此注释的存在来确定是否返回配置了根属性包装的对象映射器，或关闭。

在这个阶段，我可能已经能够使用`@JsonTypeInfo(include=JsonTypeInfo.As.WRAPPER_OBJECT, ...)`，除了`null`上面提到的有效负载问题（这用于指示子对象没有属性 - 如果我正在使用的规范给出了一个空对象 {}那么就不会有问题）。所以要继续，我需要一个自定义类型解析器。

我创建了一个扩展的新类，`org.codehaus.jackson.map.TypeDeserializer`目的是每当调用 Jackson 来反序列化一个`BaseAction`实例时，它都会调用这个自定义反序列化器。反序列化器将获得一个子类型数组，用于 BaseAction 将`first-action`、`second-action`等映射到 FirstAction.class 等。反序列化器读取输入流的字段名称，然后将名称与类匹配。如果下一个标记是一个对象，那么它会找到并委托给该类的适当反序列化器，或者如果它是 null，它会找到无参数构造函数并调用它来获取一个对象。

需要一个实现 org.codehaus.jackson.map.jsontype.TypeResolverBuilder 的类，它可以构建这个前一个类的实例，然后将 TypeResolverBuilder 作为类`@JsonTypeResolver`上的注释给出`BaseAction`。

# ios - CGImageCreateWithPNGDataProvider 给出空白图像

> ID：11985681
> 
> 赞同：1
> 
> 时间：2012-08-16T10:57:18.143
> 
> 标签：ios

请检查此代码并帮助我，，，

```
CGImageRef cRef = CGImageRetain(im.CGImage);

NSData* pixelData = (NSData*) CGDataProviderCopyData(CGImageGetDataProvider(cRef));

// return pointer to data
unsigned char* pixelBytes = (unsigned char *)[pixelData bytes];

// step through char data
for(int k = 0; k < [pixelData length]; k += 4) {
  // change accordingly
  pixelBytes[k] = pixelBytes[k];
  pixelBytes[k+1] = pixelBytes[k+1];
  pixelBytes[k+2] = pixelBytes[k+2];
  pixelBytes[k+3] = 255;
}

NSData* newPixelData = [NSData dataWithBytes:pixelBytes length:[pixelData length]];
CFDataRef imgData = (CFDataRef)pixelData;
CGDataProviderRef imgDataProvider = CGDataProviderCreateWithCFData(imgData);
CGImageRef throughCGImage = CGImageCreateWithPNGDataProvider(imgDataProvider, NULL, YES, kCGRenderingIntentDefault);

UIImage* newImage = [UIImage imageWithCGImage:throughCGImage];
NSLog(@"newImage: %@", newImage); 
```

一些数据即将到来，但它没有被添加到 UIImageView..它显示为空白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:03:09.670

问题 0)

您正在改变不可变数据，这应该是未定义的行为。

问题 1)

无论如何，PNG 是一种真正的文件格式，而不是具有固定样本格式的位图 blob。PNG 可以以多种方式表示图像——您的程序只是覆盖了好的数据。

# jquery - Jquery：从不在DIV标签中的字符串中查找文本

> ID：11985687
> 
> 赞同：0
> 
> 时间：2012-08-16T10:57:46.947
> 
> 标签：jquery

```
if x = 'FName LName<div class="soc-net-not" id="social_network_notification_853">3</div>'; 
```

如何从上述字符串中仅提取“FName LName”部分。我不想要 div 标签或其 innerHTML

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:00:17.617

```
var s = 'FName LName<div class="soc-net-not" id="social_network_notification_853">3</div>';
var text = s.substring(0, s.indexOf("<") - 1); // FName LName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T11:01:34.303

```
var x = 'FName LName<div class="soc-net-not" id="social_network_notification_853">3</div>';

var y = x.split('<')[0]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T11:01:37.613

与往常一样，如果它变得更复杂，请解析 HTML

```
var text = $('<div />').html(x).contents().filter(function() {
    return this.nodeType === 3; // only get text nodes
}).text(); 
```

或者在你的情况下，这也足够了：

```
var text = $('<div />').html(x).contents().first().text(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T11:03:39.207

尝试这个：

```
var text = $('<div/>').html(x).find('div').remove().end().text() 
```

[演示](http://jsfiddle.net/8PGht/)

# php - 无法将数据输入mysql

> ID：11985696
> 
> 赞同：0
> 
> 时间：2012-08-16T10:58:22.157
> 
> 标签：php, mysql

旨在将数据输入数据库的 php 脚本正在选择性地工作。5 年级和 10 年级的数据进入，但所有其他年级的数据不会显示。我已经检查了 if else 块，并且逻辑工作正常，它执行内部块，因为它应该不会将任何数据输入数据库。对于 5 年级或 10 年级以外的年级，第二个块被执行，我已经检查过它是否反映了它应该进入数据库的正确值。并在 sql() 查询后使用 echo 我还发现它也可以正常工作，所以有点卡住了，不知道出了什么问题，请帮忙。

这是代码，如果你们也需要html，请告诉我

```
<?php
$roll=$_POST['roll'];
$marks=$_POST['marks'];
$dbase=$_POST['std'];
$sec=$_POST['sec'];
$sec1=$_POST['sec1'];
$expire= time()+60;
if (empty($roll) || empty($marks) || ($dbase==0))
{

echo '<p align="center">You did not enter all data. Please go back and enter them.</p>';
echo '<FORM><p align="center"><INPUT TYPE="button" VALUE="Go Back" onClick="history.go(-1);return true;"></p></FORM>';
die();
}
else
{
    if($dbase==5)
    {
        $temp="five";
    }
    if($dbase==6)
    {
        $temp="six";
    }
    if($dbase==7)
    {
        $temp="seven";
    }
    if($dbase==8)
    {
        $temp="eight";
    }
    if($dbase==9)
    {
        $temp="nine";
    }
    if($dbase==10)
    {
        $temp="ten";
    }
    if($dbase==11)
    {
        $temp="eleven";
    }
    if($dbase==12)
    {
        $temp="twelve";
    }
if(($dbase==5)&&($sec=="0"))
{
    echo '<p align="center">You did not enter all data. Please go back and enter them. 2</p>';
    echo '<FORM><p align="center"><INPUT TYPE="button" VALUE="Go Back" onClick="history.go(-1);return true;"></p></FORM>';
    die();
}
else
{
    if($dbase<6)
    {
    $sect=$sec;
    setcookie("tab", $temp, $expire, "/","skc-hs.com");
    $host="127.0.0.1"; // Host name
    $username="root"; // Mysql username
    $password=""; // Mysql password
    $db_name="data"; // Database name
    $tbl_name=$temp; // Table name
    // Connect to server and select databse.
    mysql_connect("$host", "$username", "$password")or die("cannot connect");
    mysql_select_db("$db_name")or die("cannot select DB");

    // To protect MySQL injection (more detail about MySQL injection)
    $roll = stripslashes($roll);
    $marks = stripslashes($marks);
    $roll = mysql_real_escape_string($roll);
    $marks = mysql_real_escape_string($marks);
    $sql="insert into $tbl_name (roll , marks, std, sec) values ('$roll' , '$marks' , '$dbase' , '$sect')";
    mysql_query($sql);
    header( 'Location: dcreate.html');
    die();
    }
}
if(($dbase!=10)&&($dbase!=5)&&($sec1=="0"))
{
    echo '<p align="center">You did not enter all data. Please go back and enter them. 3</p>';
    echo '<FORM><p align="center"><INPUT TYPE="button" VALUE="Go Back" onClick="history.go(-1);return true;"></p></FORM>';
    die();
}
else
{
    if(($dbase!=5)&&($dbase!=10))
    {
    $sect=$sec1;
    setcookie("tab", $temp, $expire, "/","skc-hs.com");
    $host="127.0.0.1"; // Host name
    $username="root"; // Mysql username
    $password=""; // Mysql password
    $db_name="data"; // Database name
    $tbl_name=$temp; // Table name
    // Connect to server and select databse.
    mysql_connect("$host", "$username", "$password")or die("cannot connect");
    mysql_select_db("$db_name")or die("cannot select DB");

    // To protect MySQL injection (more detail about MySQL injection)
    $roll = stripslashes($roll);
    $marks = stripslashes($marks);
    $roll = mysql_real_escape_string($roll);
    $marks = mysql_real_escape_string($marks);
    $sql="insert into $tbl_name (roll , marks, std, sec) values ('$roll' , '$marks' , '$dbase' '$sect')";
    mysql_query($sql);
    header( 'Location: dcreate.html');
    die();
    }
}

if($dbase==10)
{
    setcookie("tab", $temp, $expire, "/","skc-hs.com");
    $host="127.0.0.1"; // Host name
    $username="root"; // Mysql username
    $password=""; // Mysql password
    $db_name="data"; // Database name
    $tbl_name=$temp; // Table name
    // Connect to server and select databse.
    mysql_connect("$host", "$username", "$password")or die("cannot connect");
    mysql_select_db("$db_name")or die("cannot select DB");
    // To protect MySQL injection (more detail about MySQL injection)
    $roll = stripslashes($roll);
    $marks = stripslashes($marks);
    $roll = mysql_real_escape_string($roll);
    $marks = mysql_real_escape_string($marks);
    $sql="insert into $tbl_name (roll , marks, std) values ('$roll' , '$marks' , '$dbase')";
    mysql_query($sql);
    header( 'Location: dcreate.html');
    die();
}

}
?> 
```

表结构（除了“十”表）

列类型 归类属性 Null 默认 ExtraAction id int(11) 否 无 AUTO_INCREMENT
roll varchar(3) latin1_swedish_ci 否 无
标记 smallint(6) 否 无 std varchar(2) latin1_swedish_ci 否 无
sec varchar(1) latin1_swedish_ci 否 无

表十结构

列类型 归类属性 Null 默认 ExtraAction id int(11) 否 无 AUTO_INCREMENT
roll varchar(3) latin1_swedish_ci 否 无
标记 smallint(6) 否 无 std varchar(2) latin1_swedish_ci 否 无

当我像这样修改第二个 if 块时

```
if(($dbase!=5)&&($dbase!=10))
    {
    $sect=$sec1;
            echo "roll- ";
            echo $roll;
            echo "  marks- ";
            echo $marks;
            echo " std- ";
            echo $dbase;
            echo " section- ";
            echo $sect;
            setcookie("tab", $temp, $expire, "/","skc-hs.com");
    $host="127.0.0.1"; // Host name
    $username="root"; // Mysql username
    $password=""; // Mysql password
    $db_name="data"; // Database name
    $tbl_name=$temp; // Table name
    // Connect to server and select databse.
    mysql_connect("$host", "$username", "$password")or die("cannot connect");
    mysql_select_db("$db_name")or die("cannot select DB");

    // To protect MySQL injection (more detail about MySQL injection)
    $roll = stripslashes($roll);
    $marks = stripslashes($marks);
    $roll = mysql_real_escape_string($roll);
    $marks = mysql_real_escape_string($marks);
    $sql="insert into $tbl_name (roll , marks, std, sec) values ('$roll' , '$marks' , '$dbase' '$sect')";
    mysql_query($sql);
    echo " done";
    die();
    } 
```

当我在 html 表单中输入这些值时，它会回显“滚动 - 12 标记 - 454 std- 7 部分 - B 完成”。我不明白为什么它不会只在数据库中输入这些值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:04:35.977

`exit()`如果使用此代码的任何内容都不是 10 或 5，那么您似乎对脚本：

```
if(($dbase!=10)&&($dbase!=5)&&($sec1=="0"))
{
    echo '<p align="center">You did not enter all data. Please go back and enter them. 3</p>';
    echo '<FORM><p align="center"><INPUT TYPE="button" VALUE="Go Back" onClick="history.go(-1);return true;"></p></FORM>';
    die();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T12:22:00.167

`$dbase`您忘记在查询和 查询之间放置逗号`$sect`。

将查询从

```
 $sql="insert into $tbl_name (roll , marks, std, sec) 
          values ('$roll' , '$marks' , '$dbase' '$sect')"; 
```

到

```
 $sql="insert into $tbl_name (roll , marks, std, sec)
          values ('$roll' , '$marks' , '$dbase' , '$sect')"; 
```

# c++ - 对全局运算符重载规则的误解

> ID：11985701
> 
> 赞同：1
> 
> 时间：2012-08-16T10:58:45.183
> 
> 标签：c++, g++, operator-overloading

我发现下面的[网址](http://msdn.microsoft.com/en-us/library/4x88tzx0%28v=vs.80%29.aspx)说

```
 If an operator can be used as either a unary or a binary 
 operator (&, *, +, and -), you can overload each use separately. 
```

我在 Linux 中使用 g++，我尝试了以下操作，但它没有编译。

```
int operator+ (const int a,const int b){
   std::cout << "MINE"<<std::endl;
   return 0;
}

int main(){
   char c='c';
   std::cout << c+2 << std::endl;
} 
```

错误说

```
error: ‘int operator+(int, int)’ must have an argument 
of class or enumerated type 
```

我愿意玩并看到整数促销规则的实际效果。

我是不是做错了什么，或者该 URL 仅对 MS 有效，或者我误解了促销规则？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T11:00:34.990

错误消息间接地告诉您需要知道的内容——不允许重载仅作用于内置类型的运算符（二元或一元）。

对于用户定义的类型`T`，您可以分别重载二进制 +（例如 by `T operator+(T lhs, T rhs)`）和一元 +（例如 by `T operator+(T t)`）。您也可以定义`operator+(T lhs, int rhs)`，但不能重载两个整数的加法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T11:01:15.613

自 n3337 13.5/6 以来示例不正确

> 操作符函数要么是非静态成员函数，要么是非成员函数，并且至少有一个类型为类、类引用、枚举或枚举引用的参数。

# c# - 如何指定 Memcached 选项以使用 C#.Net 压缩缓存数据？

> ID：11985704
> 
> 赞同：1
> 
> 时间：2012-08-16T10:58:54.383
> 
> 标签：c#, .net, memcached, enyim

我有 ASP.Net 项目，我正在使用 Memcached 进行数据和会话缓存。我还需要使用 Memcached 的压缩选项。如果您能与我分享您的意见，我将不胜感激！我找到了一些站点，但它们没有任何 c#.Net 代码示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:14:06.487

根据memcached 客户端的[比较](http://sysdot.wordpress.com/tag/enyim/)，Enyim 不提供内置的压缩​​支持。

但是 beitmemcached 库有。[功能描述](http://code.google.com/p/beitmemcached/wiki/Features)说它会自动压缩所有超过某个阈值的对象。

> 压缩
> 
> 客户端还支持存储大对象的压缩。它使用内置的 DeflateStream 压缩，将数据压缩成 Deflate 格式。如果要存储的 bytearray 大于属性 CompressionThreshold 中指定的值，则数据将在存储到 memcached 服务器之前进行压缩，并在检索时自动解压缩。CompressionThreshold 的默认值为 128 kB。

# java - 如何从java中的图像创建mpeg视频

> ID：11985706
> 
> 赞同：0
> 
> 时间：2012-08-16T10:58:57.517
> 
> 标签：java, jpeg, mpeg-4

> **可能重复：**
> [Java：如何从一组图像创建电影？](https://stackoverflow.com/questions/8856757/java-how-do-i-create-a-movie-from-an-array-of-images)

我有一组 JPEG 格式的图像，我想用 Java 将它们转换成 MPEG 视频。怎么做到呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:11:50.917

看 Xuggler 项目：[http ://www.xuggle.com/xuggler/](http://www.xuggle.com/xuggler/)

# java - 没有表单登录的 Spring 安全性

> ID：11985709
> 
> 赞同：6
> 
> 时间：2012-08-16T10:59:11.197
> 
> 标签：java, spring, rest, spring-security

我在我的应用程序 Spring 控制器中实现了 Spring Security Expression：

```
@Controller
@RequestMapping("init")
public class InitController {
    @PreAuthorize("hasRole('ROLE_ADMIN')")
    @RequestMapping(value = "/", method = RequestMethod.GET)
    public @ResponseBody String home(){
        return "This is the init page";
    }
} 
```

使用此安全配置：

```
<http auto-config="true" create-session="stateless" use-expressions="true">
    <intercept-url pattern="/_ah*" access="permitAll" />
    <intercept-url pattern="/init/*" access="hasRole('ROLE_ADMIN')"/>
    <intercept-url pattern="/init*" access="hasRole('ROLE_ADMIN')"/>
</http> 
```

访问此资源时，会显示默认的 Spring 登录表单`http://localhost:8888/spring_security_login`（适合这种情况。

对此有什么可能的解决方案？

*   将 x-authorization-key 放在请求中是否很好
*   如果是这样，它如何与 Spring 安全机制相匹配，即它如何与“hasRole”表达式相匹配
*   我的网络服务是无状态的，并且每个请求都经过身份验证，这一点很重要
*   最后，如何在不处理Spring登录表单的情况下处理Spring安全

标题

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T12:23:34.613

您可能应该阅读有关做什么的说明[，](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#ns-minimal)[然后`auto-config`](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#ns-minimal)将其删除以禁用`form-login`。如果您专门配置要使用的内容，您的配置会更清晰。

从您的问题中不清楚您希望在`x-authorization-key`标题中包含什么。如果您只是使用客户端 ID 和共享密钥进行身份验证，那么您不妨使用基本身份验证，因为它已经支持开箱即用，您可以添加`<http-basic />`到您的配置中。如果您有更多自定义的想法，那么您可能必须实现自定义过滤器并将[其添加到 Spring Security 过滤器链](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#ns-custom-filters)中以提取凭据并处理它们。

您的身份验证机制如何适合也取决于它实际包含的内容。通常，您的用户将分配角色，这些角色在他们进行身份验证时加载，通常来自某种数据库。该`hasRole`表达式只是检查当前用户是否具有指定的角色。通常您只需要创建一个`UserDetailsService`以易于插入框架的标准格式加载您的用户信息的方法。这在别处有详细介绍。如果您真的需要更多定制的东西，这篇关于 GAE 集成的[博客文章](http://blog.springsource.org/2010/08/02/spring-security-in-google-app-engine/)将详细介绍如何与更复杂的系统进行集成。

如果您使用Spring Security 将[不会创建或使用会话](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#nsa-http)`create-session='stateless'`。

PS 您实际上并不需要在 URL 级别和处理相同 URL 的控制器上包含相同的安全属性。

# sql-server - 在 SQL Server 数据库视图中格式化数据

> ID：11985710
> 
> 赞同：0
> 
> 时间：2012-08-16T10:59:14.297
> 
> 标签：sql-server, view, formatting

抱歉这个愚蠢的问题，但我对 SQL 很陌生，我正在尝试做一些非常简单的事情。我创建了一个由 3 个表组成的视图，并且效果很好。但是，我要求某些字段使用某种格式的格式。我正在使用 SQL Server Management Studio GUI 创建此视图。

我在视图中有 2 列需要验证：`Gender`和`DOB`

性别包含“M”、“F”或空白，我需要在视图中将其更改为输出`'Male'`或`'Female'`。

`DOB`包含一个未格式化的日期字符串，我需要将其格式化为`DD/MM/YYYY`.

我应该在哪里创建这个验证，为了把我所有的卡片都放在桌子上，这里是创建视图脚本：

```
CREATE VIEW [dbo].[PMIPatient]
AS
   SELECT     
      dbo.refPasPatientRec8Master.Patient_Internal_number AS HospitalNumber, 
      dbo.refPasPatientRec1Master.[H+C_Number] AS NHSNumber, 
      dbo.refPasPatientRec1Master.Patient_Title AS Salutation, 
      dbo.refPasPatientRec1Master.Surname, 
      dbo.refPasPatientRec1Master.Forenames AS Forename, 
      dbo.refPasPatientRec1Master.Sex_Code AS Gender, 
      dbo.refPasPatientRec1Master.Date_of_Birth AS Dob, 
      dbo.refPasPatientRec1Master.Date_of_Death AS Dod, 
      dbo.refPasPatientRec1Master.Address_Line_1 AS Address1, 
      dbo.refPasPatientRec1Master.Address_Line_2 AS Address2, 
      dbo.refPasPatientRec1Master.Address_Line_3 AS Address3, 
      dbo.refPasPatientRec1Master.Address_Line_4 AS Address4, 
      dbo.refPasPatientRec1Master.[Postcode/Pseudo_postcode] AS Postcode, 
      dbo.refPasPatientRec8Master.Patients_Phone_Number AS Telephone1, 
      dbo.refPasPatientRec39Master.Work_Telephone_Number AS Telephone2, 
      dbo.refPasPatientRec1Master.GP_Code AS GPGMCode, 
      dbo.refPasPatientRec1Master.Death_Indicator AS deceasedFlag
FROM         
      dbo.refPasPatientRec1Master 
INNER JOIN
      dbo.refPasPatientRec39Master ON dbo.refPasPatientRec1Master.Patient_Internal_number = dbo.refPasPatientRec39Master.Patient_Internal_number 
INNER JOIN
      dbo.refPasPatientRec8Master ON dbo.refPasPatientRec1Master.Patient_Internal_number = dbo.refPasPatientRec8Master.Patient_Internal_number 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:06:49.097

所有这些都假设您使用的是 MS-SQL！

要更改 Sex_Code 的返回值，请使用`CASE`语句。有关更多信息，请参阅[此链接](http://msdn.microsoft.com/en-us/library/ms181765.aspx)。

改变这个：

```
dbo.refPasPatientRec1Master.Sex_Code AS Gender 
```

对此：

```
CASE dbo.refPasPatientRec1Master.Sex_Code
     WHEN 'M' THEN 'Male' 
     WHEN 'F' THEN 'Female'
     ELSE 'Unknown'
END AS Gender 
```

要格式化 Date_of_Birth 值，然后使用该`CONVERT`方法将其转换为`NVARCHAR`具有指定样式（103 参数）的值。有关更多详细信息，请参阅[此链接](http://msdn.microsoft.com/en-us/library/ms187928.aspx)。

改变这个：

```
dbo.refPasPatientRec1Master.Date_of_Birth AS Dob 
```

至：

```
CONVERT(NVARCHAR(10), dbo.refPasPatientRec1Master.Date_of_Birth, 103) AS Dob 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T11:11:47.997

使用 CASE 表达式将性别转换为您想要的形式。

使用带有适当字符格式数字的 CONVERT 函数将日期转换为特定数字，例如：

```
SELECT CONVERT(varchar(8), dbo.refPasPatientRec1Master.Date_of_Birth, 112) 
```

我不知道您的“SQL 管理工作室”是否允许您编辑单个选定的列表达式...

# javascript - 如何将jquery代码组合成一个javascript函数

> ID：11985713
> 
> 赞同：0
> 
> 时间：2012-08-16T10:59:27.633
> 
> 标签：javascript, jquery

我需要将 jquery 脚本添加到 javascript 函数中，然后在`#sortby`添加到 url 时调用该函数。这可能吗？

**jQuery**

```
$("#myselect option[value='availability']").attr("selected","selected"); 
```

**Javascript**

```
function sortBy(){
    performanceQuery(perfpage);
    tourQuery(tourpage);
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:03:27.210

jQuery 只是一个提供一些新函数的 Javascipt 库（是的，这`$`只是一个包含函数的变量的时髦名称）。您可以在任何地方使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T11:05:50.183

```
$(window).on('hashchange', function() {
    if (document.location.hash == '#sortby') sortBy();
});

function sortBy(){
    $("#myselect option[value='availability']").prop("selected", true);
    performanceQuery(perfpage);
    tourQuery(tourpage);
    return false;
} 
```

# visual-studio-2010 - 如何将“windows.github.com”与 Visual Studio 2010 或 Visual Studio 2012 集成？

> ID：11985714
> 
> 赞同：0
> 
> 时间：2012-08-16T10:59:29.833
> 
> 标签：visual-studio-2010, github-for-windows

我最近发现了关于[Github For Windows](http://haacked.com/archive/2012/05/21/introducing-github-for-windows.aspx)的黑客文章。但是在这篇文章中，他没有提到如何将它与 VS 2010 或 2012 一起使用/集成。任何人都能做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:54:16.407

in MSVC 2010

(tools)(extension manager)(online gallery)

search for git

pick the git source control provider and install it.

restart msvc and you are good to go.

# android - 资源中每个选项卡的 Android 操作栏 Sherlock 选项卡图标

> ID：11985717
> 
> 赞同：3
> 
> 时间：2012-08-16T10:59:40.043
> 
> 标签：android, tabs, actionbarsherlock

我正在使用 Action Bar Sherlock Fragment Tabs Pager 中的示例。我想要做的是为每个选项卡设置不同的图标图像。每个选项卡的文本不是必需的，它可以包含在图像文件中。这个问题有没有简单的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T16:54:12.500

这就是我的工作和工作。创建选项卡菜单并添加文本（在您的情况下不需要）、要打开的片段和图标：

```
ActionBar actionBar = getSupportActionBar();
actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
actionBar.setDisplayShowTitleEnabled(true);
Tab tab = actionBar.newTab()
     .setText("Tab title")
     .setTabListener(new ResultadosSorteosFragment())
     .setIcon(R.drawable.resultados_sorteos); 
```

我的问题是我想把图像放在文本下面。我希望这是你需要的

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T17:59:08.080

如果您遵循 ABS *FragmentTabsPager*中的示例，您可以执行以下操作：

**这只是显示图标+标签文本：**

```
mTabsAdapter.addTab(mTabHost.newTabSpec("category").setIndicator("my label text", getResources().getDrawable(R.drawable.collections_labels) ),
            CategoryFragmentActivity.CategoryFragment.class, null); // 
```

**这仅显示图标：**

```
mTabsAdapter.addTab(mTabHost.newTabSpec("category").setIndicator("", getResources().getDrawable(R.drawable.collections_labels) ),
            CategoryFragmentActivity.CategoryFragment.class, null); // 
```

# vim - Vim-snipmate 不会扩展代码片段而是删除触发器

> ID：11985718
> 
> 赞同：0
> 
> 时间：2012-08-16T10:59:45.647
> 
> 标签：vim, snipmate

在 Windows 7 和 Vim 7.3.107 上使用 Vim-snipmate(garbas vim-snipmate fork) 我有以下问题。如果我在指示的位置按 Tab（Java 脚本中的示例）：

```
var foo = function() {
    var fum = 0;

    for<press-tab-here>
}; 
```

我最终得到了这个：

```
var foo = function() {
    var fum = 0;

}; 
```

我已经将 tab 和 Ctrl-j 绑定到 snipmate 并且都产生了同样的问题。找到了片段，我可以列出它们并且加载 snippmate 不会产生错误。

我加载了以下脚本：

```
mayansmoke
vim-colors-solarized
vim-pyte
mru
peaksea
set_tabline
vim-irblack-forked
vim-peepopen
yankring
vim-bundle-mako
vim-coffee-script
vim-less
vim-markdown
ack.vim
bufexplorer.zip
ctrlp.vim
nerdtree
open_file_under_cursor.vim
syntastic
tlib
vim-addon-mw-utils
vim-powerline
vim-snipmate
vim-snippets
vim-surround
web-indent 
```

我的 vimrc 设置是来自[https://github.com/amix/vimrc.git的几乎不变的分支](https://github.com/amix/vimrc.git)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-16T17:35:38.920

试试`$ vim -u NONE`。*如果问题消失了，请考虑用您*需要的东西自己填充您自己的 vimrc，而不是盲目地使用其他人的。

# java - Apache jackrabbit：使用 JNDI 检索存储库时出错

> ID：11985721
> 
> 赞同：0
> 
> 时间：2012-08-16T10:59:49.333
> 
> 标签：java, linux, jackrabbit

我正在 Linux 机器上设置 Apache jackrabbit 存储库，当我的服务器启动时，我收到以下错误消息

> *错误*RepositoryAccessServlet：使用 JNDI (name=jackrabbit.repository) (RepositoryAccessServlet.java，第 210 行) 和 NameNotFoundException 检索存储库时出错。

完整的堆栈跟踪如下

> 14.08.2012 16:35:37*错误*293) 在 org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602) 在 org.apache.tomcat.util 的 org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859) .net.JIoEndpoint$Worker.run(JIoEndpoint.java:489) at java.lang.Thread.run(Unknown Source) 14.08.2012 16:35:37 *INFO * RepositoryAccessServlet：尝试使用 rmi 检索存储库。uri=//localhost:1099/jackrabbit.repository (RepositoryAccessServlet.java, line 231) 14.08.2012 16:35:37 *INFO * RepositoryAccessServlet：通过 RMI 获取的存储库。（RepositoryAccessServlet.java，第 243 行）JioEndpoint$Worker.run(JIoEndpoint.java:489) at java.lang.Thread.run(Unknown Source) 14.08.2012 16:35:37 *INFO * RepositoryAccessServlet：尝试使用 rmi 检索存储库。uri=//localhost:1099/jackrabbit.repository (RepositoryAccessServlet.java, line 231) 14.08.2012 16:35:37 *INFO * RepositoryAccessServlet：通过 RMI 获取的存储库。（RepositoryAccessServlet.java，第 243 行）JioEndpoint$Worker.run(JIoEndpoint.java:489) at java.lang.Thread.run(Unknown Source) 14.08.2012 16:35:37 *INFO * RepositoryAccessServlet：尝试使用 rmi 检索存储库。uri=//localhost:1099/jackrabbit.repository (RepositoryAccessServlet.java, line 231) 14.08.2012 16:35:37 *INFO * RepositoryAccessServlet：通过 RMI 获取的存储库。（RepositoryAccessServlet.java，第 243 行）

在谷歌上搜索抛出的异常后，我找不到任何相关的东西。

一些身体可以指出哪里出了问题吗？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T08:40:34.797

好吧，我已经解决了这个问题。

问题在于目录结构的权限。Tomcat 没有足够的权限来访问所需的目录结构。在我的情况下，我收到了名为 jackrabbit.reposiory 的存储库的错误，并且我的目录结构类似于 jackrabbit/repository。

一旦我确定 Tomcat 对这些目录有足够的权限（在我的情况下，写权限是缺失的），事情就开始朝着正确的方向发展。

# android - 将创建线程的类转换为服务

> ID：11985723
> 
> 赞同：0
> 
> 时间：2012-08-16T10:59:57.207
> 
> 标签：android, multithreading, service

我有这个`class`创建线程，但我想将其转换`class`为`Service`希望它不会在方向改变时被破坏。

这是课程：

```
public class Getter {

    private final String ip;
    private final int amount, poolSize;
    private Vector<Integer> results = new Vector<Integer>();
    private final ExecutorService es;
    private Collection<Future<?>> futures = new LinkedList<Future<?>>();

    public Getter(String ip, int amount, int poolSize) {
        this.ip = ip;
        this.amount = amount;
        this.poolSize = poolSize;
        es = Executors.newFixedThreadPool(this.poolSize);

    }

    public boolean working() {
        boolean work = false;
        for (Future<?> future : futures) {
            if (!future.isDone()) {
                work = true;
            }
        }
        return work;
    }

    public Vector<Integer> getResults() {
        Collections.sort(results);
        return results;
    }

    public int threads(){
        return poolSize;
    }

    public void start() {

        for (int i = 0; i <= amount; i++) {
            futures.add(es.submit(new Get(ip)));
        }

        es.shutdown();

    }

    public void stop(){
        for (Future<?> future : futures) {
            future.cancel(true);
        }
    }

    private class Get implements Runnable { 

        private String ip;

        private Get(String ip) {
            this.ip = ip;
        }

        public void run() {
            try {
                // network stuff
                // adds result to results Vector.
            } catch (Exception ex) {

            }
        }
    }                                       
} 
```

那么这是否`class`有可能转换成`Service`这样，一旦启动，它无论如何都会在后台运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:14:12.353

您可以将其添加到清单文件中，以阻止您的应用在方向更改时被破坏：

```
android:configChanges="orientation" 
```

但是，如果您想创建服务，则只需复制此示例： [http://developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html) 您可以将类添加到服务中，然后只需将访问器添加到您的服务中联系。

您还可以在清单文件中添加一些内容，让您的服务在设备打开时启动，请参阅此处 [尝试在 Android 上启动服务](https://stackoverflow.com/questions/2784441/trying-to-start-a-service-on-boot-on-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T11:17:34.283

如果您想要一个`Service`“无论如何”运行的，您可能希望将其设置为*[foreground](http://developer.android.com/guide/components/services.html#Foreground)*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T11:04:35.320

是的。我认为这将是一个很好的[IntentService](http://developer.android.com/guide/components/services.html#ExtendingIntentService)。您的下一个最佳选择可能是[AsyncTask](http://developer.android.com/guide/components/processes-and-threads.html)。

更多的：

一般来说，我会说，如果后台任务的行为与启动它的任何东西（例如，Activity、Fragment、Service 等）密切相关，那么将其设为 AsyncTask。如果它是自包含的并且旨在以模块化方式为多个不同的组件提供服务，则将其设为服务。无论哪种情况，AsyncTask 或 IntentService 都很容易制作。

# c++ - std::vector 的 std::shared_ptr 用法

> ID：11985726
> 
> 赞同：2
> 
> 时间：2012-08-16T11:00:04.170
> 
> 标签：c++, visual-studio-2010

以下代码：

```
class Something
{
public:
     ~Something()
    {
    }
};

int main()
{
    Something* s = new Something[1]; // raw pointer received from C api
    std::shared_ptr<Something> p = std::shared_ptr<Something>(s);
    std::vector<std::shared_ptr<Something>> v(&p,&p+1);

    return 0;
} 
```

在 VS Express 2010 中出现以下错误：

```
---------------------------
Microsoft Visual C++ Debug Library
---------------------------
Debug Assertion Failed!

File: f:\dd\vctools\crt_bld\self_x86\crt\src\dbgdel.cpp
Line: 52

Expression: _BLOCK_TYPE_IS_VALID(pHead->nBlockUse)

For information on how your program can cause an assertion
failure, see the Visual C++ documentation on asserts. 
```

从Something中删除析构函数，错误消失，为什么我会收到这个错误？

**更新：**

稍后我会有类似的东西：

```
Something* s = new Something[100]; 
```

并且各个共享指针将被传递给其他对象

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T11:05:40.090

```
Something* s = new Something[1]; // raw pointer received from C api
std::shared_ptr<Something> p = std::shared_ptr<Something>(s); 
```

是不正确的用法，因为

```
~shared_ptr(); 
```

> 效果： — 如果 *this 为空或与另一个 shared_ptr 实例共享所有权（use_count() > 1），则没有副作用。
> 
> — 否则，如果 *this 拥有一个对象 p 和一个删除器 d，则调用 d(p)。
> 
> — 否则，*this 拥有指针 p，并调用 delete p。

默认删除器是`operator delete`，但您`Something* s = new Something[1];`已由 array-new 运算符分配，应该使用 array-delete 运算符 (delete[]) 删除，否则它是未定义的行为。您应该使用特定的删除器构造 shared_ptr，或者为数组使用一些东西，例如`boost::shared_array`.

例如这段代码是正确的。

```
template<typename T>
void deleter(T* p)
{
   delete[] p;
}

Something* s = new Something[1]; // raw pointer received from C api
std::shared_ptr<Something> p = std::shared_ptr<Something>(s, deleter<Something>); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T11:33:10.470

假设你有一个充满动态分配指针的 C 数组，shared_ptr 向量的使用就大大简化了：

```
#include <vector>
#include <memory>

struct Foo { };

int main() {

  Foo* foos[5]; // simulate the array of pointers from C API
  foos[0] = new Foo();
  foos[1] = new Foo();
  foos[2] = new Foo();
  foos[3] = new Foo();
  foos[4] = new Foo();

  // create vector of shared_ptrs to C pointers
  std::vector<std::shared_ptr<Foo>> v(foos, foos+5);

} 
```

# c++ - 从 B 转换为基类 A

> ID：11985730
> 
> 赞同：1
> 
> 时间：2012-08-16T11:00:14.747
> 
> 标签：c++, casting, operator-keyword, base, derived

我有以下课程：

```
template<typename T>
class Vector { ... };

template<typename T>
class Vector2 : public Vector<T> { ... }; 
```

现在，我希望能够将 Vector 转换为 Vector2 - 即使对象不是真正的 Vector2- （我的意思是，dynamic_cast 不是我想要的）

我应该实施什么？

1.  Vector 上的强制转换运算符 `operator Vector2 ()`
2.  Vector2 上的构造函数`Vector2(const Vector<T> &)`
3.  两个都

如果我应该同时实现这两个，什么时候会转换操作符，什么时候调用构造函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:44:17.563

您想将**Vector 转换为 Vector2 - 即使该对象不是真正的 Vector2**？如果不制作新副本，您真的无法做到这一点。你可以这样做：

```
class Vector2 { public: void test() {} };

Vector foo;
Vector2* bad = reinterpret_cast<Vector2*>(&foo);

bad->test(); 
```

但是，您将只是根据`Vector2`类定义的偏移量调用方法。如果它让你满意，你可以将任何类转换为`Vector2`这样的指针，但不要指望任何工作。

```
int stackInteger = 42;
Vector2* reallyBad = reinterpret_cast<Vector2*>(&stackInteger);

reallyBad->test(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:19:11.100

我将实现一个显式构造函数`Vector2`，它采用`Vector<U>`-- 因为您可能想要使用可以从一个转换为另一个的不相关类型。

```
template <typename T>
class Vector2 : public Vector< T >
{
public:
    template <typename U>
    explicit Vector2(const Vector< U >& copyFrom)
    {
        // ...
    }
}; 
```

隐式转换可能会导致不可预知的行为。*孩子们，不要在家里尝试这个*。

# javascript - Javascript 计数器不会超过 1

> ID：11985731
> 
> 赞同：0
> 
> 时间：2012-08-16T11:00:16.180
> 
> 标签：javascript, function, input

因此，当我单击添加按钮时，它会检查输入字段中是否有文本，然后为其创建一个 div，然后将 +1 添加到计数器。问题是计数器；它只会添加+1，然后再次单击时什么也不做。当我删除一个 div 时，它 -1 就好了。所以是的，不会超过 1 或 -1。

**地点：**

[http://web-owl.com/todo/](http://web-owl.com/todo/)

**功能：**

```
 function validateForm() 
            {
                var x=document.forms["forming"]["texting"].value;
                if (x==null || x=="")
                {
                alert("Get it together! You need to have text in there!");
                return false;
                } 
                else 
                {

            var clone = $('#theDiv')
                .clone()
                .attr('id','')
                .show()
                .append(
                $('<div>').html(
                $('#textI2').val()
                ).addClass('futureEditor')
                 );
                $('#hold').append(clone)
                var x = 0;
            x += 1;
            document.getElementById( "clicked" ).value = x;
              return false;
              }

            } 
```

**点击链接：**

```
<form id="forming" name="forming"  onsubmit="return validateForm()" method="post"> 
```

**柜台：**

```
<p>You have <input id="clicked" size="3" onfocus="this.blur();" value="0" > Stuffs. </p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:04:52.357

使您的计数变量全局化

```
var count = 0;
function validateForm() {
    var x = document.forms["forming"]["texting"].value;
    if (x == null || x == "") {
        alert("Get it together! You need to have text in there!");
        return false;
    }
    else {

        var clone = $('#theDiv').clone().attr('id', '').show().append(
        $('<div>').html(
        $('#textI2').val()).addClass('futureEditor'));
        $('#hold').append(clone)
        count++;
        document.getElementById("clicked").value = count;
        return false;
    }

 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T11:05:13.133

`var x = 0;`导致问题。您将 x 声明为 0 并在每次调用时添加 1 `validateForm()`。所以文本框的值每次都设置为 1。这是固定代码：

```
var x = 0;
function validateForm() {
  if (x==null || x=="") {
    alert("Get it together! You need to have text in there!");
    return false;
  } 
  else {
    var clone = $('#theDiv')
      .clone()
      .attr('id','')
      .show()
      .append(
        $('<div>').html(
          $('#textI2').val()
        ).addClass('futureEditor')
      );
    $('#hold').append(clone)
    x++;
    document.getElementById( "clicked" ).value = x;
    return false;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T11:06:04.660

你总是将 x 初始化为 0

```
var x = 0; 
```

这就是为什么它总是显示 1。

所以创建一个全局变量并使用它。喜欢

```
var itemsCount = 0; 
```

并在 validateForm() 函数中替换代码行

```
var x = 0;
x += 1;
document.getElementById( "clicked" ).value = x; 
```

至

```
itemsCount += 1;
document.getElementById( "clicked" ).value = itemsCount ; 
```

# c# - 存储库模式逐步说明

> ID：11985736
> 
> 赞同：286
> 
> 时间：2012-08-16T11:00:30.267
> 
> 标签：c#, asp.net, design-patterns, repository

有人可以向我解释.NET中的存储库模式，逐步给出一个非常简单的示例或演示。

我知道这是一个非常常见的问题，但到目前为止我还没有找到满意的答案。

* * *

## 回答 #1

> 赞同：205
> 
> 时间：2012-08-16T11:15:14.763

作为总结，我将描述存储库模式的更广泛影响。它允许您的所有代码使用对象，而不必知道对象是如何被持久化的。所有关于持久性的知识，包括从表到对象的映射，都安全地包含在存储库中。

很多时候，您会发现 SQL 查询分散在代码库中，当您向表中添加列时，您必须搜索代码文件以尝试查找表的用法。变革的影响是深远的。

使用存储库模式，您只需要更改一个对象和一个存储库。影响非常小。

考虑一下为什么要使用存储库模式可能会有所帮助。以下是一些原因：

*   您只有一个地方可以更改您的数据访问权限

*   你有一个地方负责一组表（通常）

*   很容易用虚假实现替换存储库以进行测试 - 因此您不需要有一个可用于单元测试的数据库

还有其他好处，例如，如果您使用 MySQL 并想切换到 SQL Server - 但我实际上从未在实践中看到过这一点！

* * *

## 回答 #2

> 赞同：184
> 
> 时间：2012-08-16T11:04:33.713

这是一个很好的例子：[C# 中的存储库模式示例](http://web.archive.org/web/20150404154203/https://www.remondo.net/repository-pattern-example-csharp/)

基本上，存储库隐藏了数据是如何从数据库中获取/保存到数据库的详细信息。在封面下：

*   对于阅读，它创建满足提供的条件的查询并返回结果集
*   对于写入，它发出使底层持久性引擎（例如 SQL 数据库）保存数据所需的命令

# wordpress - 如何在 wordpress 中访问 magento 会话？

> ID：11985738
> 
> 赞同：0
> 
> 时间：2012-08-16T11:00:38.133
> 
> 标签：wordpress, session, magento, integration

我读过很多类似的问题，

但没有找到答案

我必须在 wordpress 博客中显示客户姓名和购物车项目

我已经安装了 Mage Enabler 。但它总是显示无效的 URL。本地电脑的有效网址是什么？

所以我也做过，

```
 require_once ("../app/Mage.php");
umask(0);
Mage::app();
Mage::getSingleton("core/session", array('name' => 'frontend'));
    $session = Mage::getSingleton("customer/session");

    if($session->isLoggedIn())
      {echo "YES";}
    else {echo "NO";} 
```

我总是得到“不”.. :(

谁能帮我如何在wordpress中访问magento会话

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:37:26.767

代替：

```
$session = Mage::getSingleton("customer/session"); 
```

尝试：

```
$session=Mage::getSingleton('customer/session', array('name'=>'frontend') ); 
```

祝你好运

# linux - 使用正则表达式命令的 shell 替换命令

> ID：11985740
> 
> 赞同：0
> 
> 时间：2012-08-16T11:00:43.027
> 
> 标签：linux, ubuntu, fedora

我有一个价值为的文件

```
 [1] => 3192592
        [2] => 4365943
        [3] => 4679044
        [4] => 5413434
        [5] => 5686682
        [6] => 6104529
        [7] => 6373851
        [8] => 7247848
        [9] => 7281395
        [10] => 7349817 
```

我需要一个 shell 脚本命令来替换所有 [] 代码，如 [1] [2] [3]。

即输出将是 3192592,4365943,4679044,5413434 等等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:23:13.947

如果您的“测试”文件如下所示：

```
[1] => 3192592
[2] => 4365943
[3] => 4679044
[4] => 5413434
[5] => 5686682 
```

比你可以实现的输出：

```
3192592,4365943,4679044,5413434,5686682 
```

执行命令：

```
 cat test | cut -d " " -f 3 | sed 's/$/,/' | tr -d '\n' | sed '$s/.$//' 
```

`cut -d " " -f 3`- 削减第三列

`sed 's/$/,/'`- 将逗号放在每行的末尾

`tr -d '\n'`- 删除换行符

`sed '$s/.$//'`- 删除最后一个条目后的逗号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T11:11:31.283

简单使用

```
:1,$s/.* => \(.*\)/\1/g 
```

# java - Spring 3 MVC 与带注释的 DWR 集成

> ID：11985742
> 
> 赞同：3
> 
> 时间：2012-08-16T11:00:43.653
> 
> 标签：java, ajax, spring-mvc, dwr

谁能帮我找到关于集成**Spring3-MVC**和**DWR**的任何好的教程/示例代码。我在互联网上搜索了几个小时，但找不到任何有用的东西。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T11:06:34.087

看看以下教程/文章：

1.  [Spring MVC 3 和 DWR 3 集成教程](http://krams915.blogspot.com/2011/01/spring-mvc-3-and-dwr-3-integration.html)

2.  [将 DWR 3 与 Spring 3 @MVC 集成](http://forum.springsource.org/showthread.php?98529-Integrating-DWR-3-with-Spring-3-MVC)

3.  [DWR 和 Spring](http://directwebremoting.org/dwr/documentation/server/integration/spring.html)

4.  [Spring 教程 - 使用 DWR 启用 Spring 服务的 AJAX](http://www.youtube.com/watch?v=olT4HMeru58)（视频教程）

5.  [Spring 和 DWR 2.0 (Ajax) 工作示例](http://manmalikmachine.wordpress.com/2007/11/27/spring-and-dwr-20-ajax-working-example/)

# jquery - jQuery - 背景位置动画缓动不起作用

> ID：11985743
> 
> 赞同：0
> 
> 时间：2012-08-16T11:00:56.757
> 
> 标签：jquery, jquery-ui, animation, jquery-animate

我正在尝试更改图像的背景位置，例如里程表。除了缓动之外，一切似乎都有效，除了“摆动”之外，它只是在“线性”中发生变化。非常烦人，我搜索了高低，一无所获。

```
 col.animate({
            'background-position': '0 ' + ((newDigit * settings.heightNumber * -1) + zeroSet)
        }, 
        1000, 
        'swing');
      } 
```

我也需要这个才能跨浏览器工作。它目前确实可以跨浏览器工作而不会放松。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:20:21.643

"swing" is the default parameter. passing "swing" is like passing no parameter. you can use jquery ui which has a lot more easing styles. [http://jqueryui.com/demos/effect/easing.html](http://jqueryui.com/demos/effect/easing.html)

# silverlight-4.0 - silverlight 4.0 滚动查看器未更新

> ID：11985744
> 
> 赞同：0
> 
> 时间：2012-08-16T11:01:02.480
> 
> 标签：silverlight-4.0, scrollviewer

我是 Silverlight 的新手。我正在尝试与inkpresenter 一起提供放大功能。我正在使用 Silverlight 4、c#、asp.net。我可以将滑块绑定到画布，它确实会放大，但我遇到了滚动查看器布局没有更新的问题。有很多帖子提到我需要使用布局转换。任何人都可以让我知道我做错了什么或任何其他建议。

```
<Slider x:Name="slider" Maximum="2" Minimum="0" Value="1" Width="100"/>
</StackPanel>

<ScrollViewer x:Name="scrollBar"  VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" Grid.Column="1" Margin="6,1,1,1" Grid.Row="1">
    <ScrollViewer.Content>
        <toolkit:LayoutTransformer Name="TheTransformer" Background="{x:Null}">
            <toolkit:LayoutTransformer.LayoutTransform>
                <ScaleTransform  x:Name="contentScale" ScaleX="{Binding ElementName=slider,Path=Value}" ScaleY="{Binding ElementName=slider,Path=Value}" />
            </toolkit:LayoutTransformer.LayoutTransform>

            <toolkit:LayoutTransformer.Content>
                <Canvas x:Name="cnsImageEditable" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" OpacityMask="#FFE89E9E">

                    <!--The following commented bit does work i can zoomin and out but scroller not updating -->                
                    <!--<Canvas.RenderTransform>
                        <ScaleTransform x:Name="scale" ScaleX="{Binding ElementName=slider,Path=Value}" ScaleY="{Binding ElementName=slider,Path=Value}"/>
                    </Canvas.RenderTransform>-->

                <InkPresenter x:Name="inkCanvas" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                    <Image x:Name="imgEditableImage" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"></Image>
                </InkPresenter>

                </Canvas>
            </toolkit:LayoutTransformer.Content>
        </toolkit:LayoutTransformer>
    </ScrollViewer.Content>
</ScrollViewer> 
```

任何帮助都非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:28:07.687

查看[https://stackoverflow.com/questions/9899729/layouttransformer-in-silverlight-not-working](https://stackoverflow.com/questions/9899729/layouttransformer-in-silverlight-not-working)，为我工作。具体来说：

> 我发现 Silverlight 中的变换发生在 Layout 之后，所以我只更改了一次 CanvasWidth 属性，直到滚动条显示，然后缩放就可以完美地工作，

# javascript - 使用模块模式的 JavaScript 类原型设计

> ID：11985745
> 
> 赞同：0
> 
> 时间：2012-08-16T11:01:05.947
> 
> 标签：javascript, design-patterns, module, this, prototype

我正在寻找在 JavaScript 中定义类的方法。我想出了混合模块和原型模式，但不确定我是否错过了一些东西。基本上我想使用'this'关键字。例子：

```
var A = function()
    {
    this.x = 10;
    };

A.prototype = (function()
    {
    function privatePrint()
        {
        alert("Printing from private! x:" + this.x);
        }
    this.print = function()
        {
        privatePrint.call(this);
        };
    return this;
    }).apply(A.prototype);

var a = new A();
a.print(); 
```

返回值只是为了可读性 - A.prototype 可以在开始时使用。

我也尝试过的模式：

*   模块：不能使用“新”关键字。
*   Prototype，Revealing Prototype：如果在原型声明中声明了私有函数（对象返回的公共方法），则不扩展

我的方法可以接受吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:07:21.543

```
**Public**

function Constructor(...) {
   this.membername = value;
}
Constructor.prototype.membername = value;

**Private**

function Constructor(...) {
   var that = this;
   var membername = value;
   function membername(...) {...}

}

Note: The function statement

function membername(...) {...}

is shorthand for

var membername = function membername(...) {...};

**Privileged**

function Constructor(...) {
   this.membername = function (...) {...};
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-31T05:30:25.457

自您问起已经两年多了，但是在谷歌搜索类似的方法时，我最终来到了这里。除了（因为您本质上是在征求意见）之外，我没有看到您的实现有任何缺点，为什么您将原型作为导入在 IIFE 上传递似乎有点令人困惑。

否则，您所得到的看起来与我所看到的**“显示原型模式”的其他“标准”实现非常相似：**

```
(function (NS) {

    'use strict';

    // constructor for the Person "Class", attached to your global namespace
    var Person = NS.Person = function (name) {
        // set properties unique for each instance
        this.name = name;
    };

    // may not be necessary, but safe
    Person.prototype.constructor = Person;

    // private method
    var _privateMethod = function() {
        // do private stuff
        // use the "_" convention to mark as private
        // this is scoped to the modules' IIFE wrapper, but not bound the returned "Person" object, i.e. it is private
    };

    // public method
    Person.prototype.speak = function() {
        console.log("Hello there, I'm " + this.name);
    };

    return Person;

})(window.NS = window.NS || {}); // import a global namespace

// use your namespaced Person "Class"
var david = new NS.Person("David");
david.speak(); 
```

还有一个类似的模块模式，其结构可能**更像**您所追求的“类”实现：

```
(function (NS) {

    'use strict';

    // constructor for the Person "Class", attached to your global namespace
    var Person = NS.Person = function (name) {

        // reset constructor (the prototype is completely overwritten below)
        this.constructor = Person;

        // set properties unique for each instance
        this.name = name;
    };

    // all methods on the prototype
    Person.prototype = (function() {

        // private method
        var _privateMethod = function() {
            // do private stuff
            // use the "_" convention to mark as private
            // this is scoped to the IIFE but not bound to the returned object, i.e. it is private
        };

        // public method
        var speak = function() {
            console.log("Hello there, I'm " + this.name);
        };

        // returned object with public methods
        return {
            speak: speak
        };
    }());

})(window.NS = window.NS || {}); // import a global namespace

// use your namespaced Person "Class"
var david = new NS.Person("David");
david.speak(); 
```

要点：[https ://gist.github.com/dgowrie/24fb3483051579b89512](https://gist.github.com/dgowrie/24fb3483051579b89512)

# codeigniter - 使用 set_value 的 Textarea 未填充 Codeigniter

> ID：11985750
> 
> 赞同：7
> 
> 时间：2012-08-16T11:01:18.093
> 
> 标签：codeigniter, textarea, validation, setvalue

我认为有一个简单的表单，它有一个文本区域：

```
<textarea name="description" value="<?php echo   set_value('description'); ?>"></textarea> 
```

在我的控制器中，我使用 form_validation 库验证了这个文本区域

```
$this->form_validation->set_rules('description', 'Description', 'trim|required'); 
```

验证工作完美，即如果文本区域为空白，它会给我错误，但它不会重新填充 textarea，如果 textarea-description 正确填写但其他字段中有一些错误

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-16T11:03:09.207

Textarea 没有 value 属性。

```
<textarea name="description"> 
      <?php echo set_value('description'); ?> 
</textarea> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-15T07:34:54.667

如果值仅返回 form_validation：

```
<?=form_textarea(array('name'=>'description'),set_value('description'));?> 
```

如果该值在其他地方：

```
<?=form_textarea(array('name'=>'description'),set_value('description',$value));?> 
```

文档 CodeIgniter： [https ://www.codeigniter.com/user_guide/helpers/form_helper.html](https://www.codeigniter.com/user_guide/helpers/form_helper.html)

> form_textarea() 这个函数在所有方面都与上面的 form_input() 函数相同，除了它生成一个“textarea”类型。注意：您将指定“rows”和“cols”，而不是上面示例中的“maxlength”和“size”属性。

# c++ - 转换 std::vector 的优雅解决方案 > 进入 std::vector

> ID：11985753
> 
> 赞同：0
> 
> 时间：2012-08-16T11:01:23.870
> 
> 标签：c++, boost, std

我没有找到完全相同的问题。

有没有办法转换a：

```
std::vector<boost::shared_ptr<T>> 
```

进入非安全版本：

```
std::vector<T*> 
```

不对原始向量的每个元素执行 for 循环并使用 .get() ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T11:07:04.490

```
std::transform(safe.begin(), safe.end(), std::back_inserter(unsafe),
               boost::bind(&boost::shared_ptr<T>::get, _1)); 
```

# javascript - 虽然循环不能正常工作 - 它有时会跳过

> ID：11985756
> 
> 赞同：2
> 
> 时间：2012-08-16T11:01:31.497
> 
> 标签：javascript, jquery, while-loop

简单的 while 循环无法正常工作。我编写了一个脚本来将文本限制为 3 行。这很简单。我检查元素（div）的高度是否高于 3 行（硬编码的字体大小和行高），如果是，我删除最后一个单词并添加省略号。我正在这样做，而字符串很快就可以放在 3 行上。

它随机工作，有时有效，有时无效。如果不工作，我在第 4 行只有 1 个字。所以它只跳过最后一次迭代，而不是每次都跳过。

```
$('div.prod-description').each(function(){
    var obj = $(this);

    if(obj.height() > 60) { // line-height: 18px;
        var ellipses = '...';
        var new_text = null;
        while(obj.height() > 60) {
            new_text = obj.text().slice(0, obj.text().lastIndexOf(' '));
            obj.text(new_text+ellipses);
        }
    }
}); 
```

我试图删除`if statement`，我试过`do while statement`但它是一样的。

编辑：我发现了问题！但不知道如何解决。如果我在浏览器的地址栏上按 Enter，或者我从菜单进入页面，它就可以正常工作。如果我刷新`F5`它会跳过最后一次迭代。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:25:11.100

在我幸运地发现脚本仅在使用 F5 刷新页面时无法正常工作后，我找到了解决方案。 [https://stackoverflow.com/a/8310308/1333512](https://stackoverflow.com/a/8310308/1333512)

要纠正此问题，请使用：

```
$(window).load(function() {}); 
```

出而不是：

```
$(document).ready(function() {}); 
```

# sharepoint - SharePoint 2010 客户端对象模型 - 需要代理身份验证

> ID：11985757
> 
> 赞同：1
> 
> 时间：2012-08-16T11:01:31.420
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-clientobject

全部，

一个小而烦人的问题。

我正在尝试创建一个使用客户端对象模型来更改站点磁贴的 DLL

```
 Microsoft.SharePoint.Client.ClientContext myCContext = new Microsoft.SharePoint.Client.ClientContext(lsiteurl);

                System.Net.NetworkCredential ReqCredential = new NetworkCredential("user", "pwd", "domain");
                System.Net.WebProxy ReqProxy = new System.Net.WebProxy("IP:8080", false);
                myCContext.Credentials = ReqCredential;
                ReqProxy.Credentials = ReqCredential;
                WebRequest.DefaultWebProxy = ReqProxy;
                //GlobalProxySelection.Select = ReqProxy;

                Microsoft.SharePoint.Client.Web lWeb = myCContext.Web;

                myCContext.Load(lWeb);
                lerror = "Load SPWeb";
                myCContext.ExecuteQuery(); 
```

但是我尝试的是，每次它在**myCContext.ExecuteQuery()上引发异常**

每次出现同样的错误“需要407代理验证”，请帮我解决这个问题

[如何将代理凭据传递给 SharePoint 客户端上下文对象](https://stackoverflow.com/questions/4151714/how-do-i-pass-my-proxy-credentials-to-a-sharepoint-client-context-object-sh)中的解决方案...？[（SharePoint 客户端对象模型）](https://stackoverflow.com/questions/4151714/how-do-i-pass-my-proxy-credentials-to-a-sharepoint-client-context-object-sh)什么都不做，即使是创建新的网络凭据、代理、...

感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:36:57.853

如果您进入 Internet 选项 -> 连接 -> Internet Explorer 中的 LAN 设置，您应该能够从那里获取您的代理设置

在您的网络配置中与上面的链接相同

```
<system.net>
    <defaultProxy>
 <proxy proxyaddress="address:port" bypassonlocal="True" />
    </defaultProxy>
  </system.net> 
```

给您的站点驻留在回收站或 IISreset 上的应用程序池，看看这是否有效。

这解决了您当前遇到的相同问题

还要检查您是否在正确的网络配置中执行此操作，听起来很愚蠢，但我以前见过有人这样做。

# php - 获取访问者的 IP，然后以访问者的名字命名一个 .txt 文件？

> ID：11985762
> 
> 赞同：0
> 
> 时间：2012-08-16T11:01:39.113
> 
> 标签：php

我正在尝试创建一个系统，该系统将获取访问者 IP，包含一些信息，然后将该信息保存在一个 .txt 文件中，文件名为... 10.0.0.1.txt。

我有一些问题。

这是一些代码：

```
$logfile = fopen($client_IP, 'a+');
fwrite($logfile, "\n".$_GET['c']);
fclose($logfile); 
```

$client_IP 基本上是：

```
 $client_IP = $_Server['REMOTE_ADDR']; 
```

谁能帮我吗？

输出文件要么总是以空结尾，并导致错误提示文件名不能为空，要么只输出 .txt。

我尝试了多种变体，但到目前为止没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:06:06.037

它是

*   `$client_IP = $_SERVER['REMOTE_ADDR'];`和`$_SERVER`
*   确保您对该文件夹具有权限

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T11:06:00.577

我认为 $_Server['REMOTE_ADDR']; 必须是 $_SERVER['REMOTE_ADDR'];
不完全确定，但我认为这可行。

# .net - LINQ 查询的索引

> ID：11985764
> 
> 赞同：3
> 
> 时间：2012-08-16T11:01:42.607
> 
> 标签：.net, linq, where, indexing

请告知是否有一种标准方法可以更快地进行这样的查询

```
var res = qlist.Where(o => o.left >= x && o.right >= x).ToList() 
```

qlist 对象可以包含多达一百万个元素，这样的查询可能非常慢。是否有 linq 或类似的索引？

谢谢

更新：抱歉无法在评论中回答。它是linq-to-objects，目的是缓存DB。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T11:14:52.390

除了告诉您为此使用数据库（如前所述）之外，您还可以通过两种方式提高性能：

1.  使用 AsParallel：

    var res = qlist.AsParallel().Where(o => o.left >= x && o.right >= x).ToList();

2.  您可以将项目插入到两个不同的排序列表中，一个是 by `left`，另一个是 by `right`。对于给定的 x，通过二分搜索找到等于（或几乎等于）它的项目，并从两个列表中获取该项目之后的所有项目。最终结果应该是从两个列表中选择的项目。不知道是不是更有效率。这取决于你做了多少插入以及你会找到多少项目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T11:06:33.100

尽管针对数据库执行的 LINQ2SQL 查询享有可能在数据库中定义的索引，但是在内存中执行的 LINQ 查询没有索引。

不幸的是，您需要自己动手：对列表进行排序，[`List.BinarySearch`](http://msdn.microsoft.com/en-us/library/3f90y839.aspx)用于获取初始位置和最后位置，然后使用 LINQ 获取介于两者之间的所有条目。

# sql-server - 将 nvarchar 值转换为数据类型 int 时转换失败

> ID：11985767
> 
> 赞同：0
> 
> 时间：2012-08-16T11:01:48.067
> 
> 标签：sql-server, tsql

我有一个带有主键的数据表，其格式通常为`$$$$#####$$`，尽管有一些没有数字的例外情况。我想提取键的数字部分，然后使用它，以便生成唯一的主键。

因此，我创建了一个视图，其中包含一个仅显示数值的列，并忽略了任何无法转换为数字的项目。

当我编写查询以从视图中选择特定项目时，我得到

> *将 nvarchar 值转换为数据类型 int 时转换失败。*

并且看起来尽管我特别忽略了视图中的异常，但它们仍然以某种方式被引用。

任何帮助将不胜感激。

马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:12:25.640

> 我想提取键的数字部分，然后使用它，以便生成唯一的主键。

使用这种[最快的方法从 SQL Server 中的 VARCHAR 中删除非数字字符](https://stackoverflow.com/questions/106206/fastest-way-to-remove-non-numeric-characters-from-a-varchar-in-sql-server)：

```
CREATE Function [fnRemoveNonNumericCharacters](@strText VARCHAR(1000))
RETURNS VARCHAR(1000)
AS
BEGIN
    WHILE PATINDEX('%[^0-9]%', @strText) > 0
    BEGIN
        SET @strText = STUFF(@strText, PATINDEX('%[^0-9]%', @strText), 1, '')
    END
    RETURN @strText
END 
```

将您的列值传递给函数，然后将其转换为整数。在应用上述函数后，您可以创建另一个函数来转换此检查列值是否包含任何数值。

另一个[参考](http://www.sqlservercentral.com/Forums/Topic470379-338-1.aspx)。

希望这有帮助

# javascript - 全局变量未更新

> ID：11985768
> 
> 赞同：0
> 
> 时间：2012-08-16T11:01:48.580
> 
> 标签：javascript, node.js, coffeescript, scope

我是新手`coffeescript`。而我又掉进了 JavaScript 的变量作用域的坑里。

我正在尝试开发简单的控制台脚本`node.js`，没有类（还），最少的功能编程糖（还）。它是这样的：

```
fs      = require 'fs'
code    = "test"

fs.readFile 'COD99000430.TXT', (err, contents) ->
    code = contents.toString()

console.log code 
```

它编译为以下 JavaScript：

```
// Generated by CoffeeScript 1.3.3
(function() {
  var code, fs;

  fs = require('fs');

  code = "test";

  fs.readFile('COD99000430.TXT', function(err, contents) {
    return code = contents.toString();
  });

  console.log(code);

}).call(this); 
```

问题是在运行该代码控制台后只显示 word `test`，这显然是`code`变量的初始值。但我希望看到`COD99000430.TXT`文件的内容。实际上我可以看到它，如果我`console.log code`在调用中放入匿名回调函数的范围内`fs.readFile`。

我查看了[coffieescript 文档](http://coffeescript.org/#lexical_scope)，并描述了完全相同的情况。但由于某种原因，它对我不起作用。

我在 Windows 7版本 1.3.3上使用`node.js`版本 0.8.2 。`coffeescript`

在我的情况下是否可以有“全局脚本”变量？我如何通过咖啡脚本实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T04:10:37.887

你的问题的评论是正确的，我只是想我会提供一些工作代码。

示例 1：只需在`fs.readFile`回调中记录文件内容。

```
fs = require 'fs'

fs.readFile 'COD99000430.TXT', (err, contents) ->
  console.log contents.toString() 
```

示例 2：将文件处理代码分解为函数并提供回调以打印内容。

```
fs = require 'fs'

processFile = (filename, callback) ->
  fs.readFile filename, (err, contents) ->
    callback contents.toString()

processFile 'COD99000430.TXT', (data) -> console.log data 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T22:58:37.183

我稍微修改了你的代码，这样我就可以让它在 jsfiddle 中运行（不得不放弃节点，因为它没有安装在这台机器上）。我认为您需要将 readFile 行更改为函数，然后稍后调用该函数。

```
code = "test"

read = (err, contents) ->
    code = "XZY".toString()

console.log code
alert(code)

code = read()
alert(code) 
```

全局变量被认为是“要避免的”。您链接到的咖啡脚本页面确实有一个替代方案：

> 如果您想创建顶级变量供其他脚本使用，请将它们作为属性附加到窗口或 CommonJS 中的导出对象上。存在运算符（如下所述）为您提供了一种可靠的方法来确定在何处添加它们；如果您同时针对 CommonJS 和浏览器：exports ? 这个

# objective-c - Clang 与 XCode 4.4.1 的兼容性

> ID：11985769
> 
> 赞同：1
> 
> 时间：2012-08-16T11:01:58.380
> 
> 标签：objective-c, xcode4, clang, static-analysis

我正在使用 XCode 4.4.1 并希望通过 CLang 手动进行静态分析。

我下载了 Clang 检查器 build 267。

使用 xcodebuild 我能够构建我的项目，但是在使用 scan-build xcodebuild 时，我得到了错误。

```
Details: Unable to get message category info for tool '/Users/vinay/checker-267/libexec/ccc-analyzer'.
Reason: Can't execute "clang": No such file or directory at line /Users/vinay/checker-267/libexec/ccc-analyzer 428 
```

我可以将 Clang 与 XCode 4.4 版一起使用吗？或者我可以使用其他任何静态分析工具吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T05:26:57.170

Clang 的静态分析器可在 Xcode 中使用：使用 Product→Analyze，或点击 shift-cmd-b 以在您的项目中使用它。

# php - XDebug、Eclipse 和发布

> ID：11985770
> 
> 赞同：4
> 
> 时间：2012-08-16T11:02:00.937
> 
> 标签：php, eclipse, xdebug

我正在尝试调试注册表单。

有没有一种简单的方法来调试带有请求随附的发布数据的页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T07:52:56.483

> 如果要调试 PHP 页面的“POST”方法，请确保在 Run->Open Debug Dialog;PHP Web Page/New Configuration;Advanced 选项卡中选中了“Debug all pages”。然后，您应该让 PHP 脚本运行以显示带有表单的网页。当您将数据放入表单并提交时，调试器现在将允许您使用 POST 数据调试此页面。

希望这可以帮助。

资料来源：[如何使用 Eclipse PDT + XDebug 设置免费的 PHP 调试器](http://robsnotebook.com/php_debugger_pdt_xdebug)

# html - 编辑器中的代码看起来不错，在浏览器中它会改变

> ID：11985773
> 
> 赞同：1
> 
> 时间：2012-08-16T11:02:29.207
> 
> 标签：html

我有这个奇怪的问题。

当我将锚标记包裹在 div 周围时，html 标记会完全改变.. 清除缓存和所有内容。

它关于带有类传出链接的锚点

代码编辑器中的 Html（正确代码）：

```
<a class="outgoing-link" href="#">
    <div id="content-element">
        <div class="top-info">
            <span class="title-provider">Vodafone</span>
            <img src="phone-placeholder.png" 
                 alt="placeholder" 
                 width="58px" 
                 height="50px"/>
            <div class="bg-circle"></div>
            <span class="dur-discount">1e 3 maand</span>
            <span class="price-discount">&#8364; 16,50</span>
            <span class="dur-normal">Daarna</span>
            <span class="price-normal">&#8364; 20,00</span>
        </div>
        <a href="#" title=""><h3>iPhone 4GS abonnement</h3></a>
        <p><span>100</span> min & sms <span>500</span> mb</p>
        <p><span>2 jr</span>telefoon abonnement</p>
        <p>Prijs telefoon: <span>Gratis</span></p>
        <div class="hover-extra-info">
             <p>Aansluitkosten: <span>&#8364; 24,95</span></p>
             <p>Vodafone abonnement</p>
             <p>aanbieder: Student Mobiel</p>
             <p>Totale kosten over 2 jaar</p>
             <p>&#8364; 547,22</p>
        </div>
    </div><!-- end content-element-->   
</a> 
```

浏览器中的代码：

```
<a class="outgoing-link" href="#"></a>
    <div id="content-element">
        <a class="outgoing-link" href="#">
            <div class="top-info">
                <span class="title-provider">Vodafone</span>
                <img src="phone-placeholder.png" 
                     alt="placeholder" 
                     width="58px" 
                     height="50px"/>
                 <div class="bg-circle"></div>
                 <span class="dur-discount">1e 3 maand</span>
                 <span class="price-discount">&#8364; 16,50</span>
                 <span class="dur-normal">Daarna</span>
                 <span class="price-normal">&#8364; 20,00</span>
             </div>
         </a>
         <a href="#" title=""><h3>iPhone 4GS abonnement</h3></a>
         <p><span>100</span> min & sms <span>500</span> mb</p>
         <p><span>2 jr</span>telefoon abonnement</p>
         <p>Prijs telefoon: <span>Gratis</span></p>
         <div class="hover-extra-info">
         <p>Aansluitkosten: <span>&#8364; 24,95</span></p>
         <p>Vodafone abonnement</p>
         <p>aanbieder: Student Mobiel</p>
         <p>Totale kosten over 2 jaar</p>
         <p>&#8364; 547,22</p>
     </div>
</div><!-- end content-element--> 
```

它添加了另一个链接并将它们放在错误的位置。

关于发生了什么的任何想法？或者我只是错过了什么。

任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:06:56.570

我认为这是因为嵌套的锚标签是非法的

见：[http ://www.w3.org/TR/html401/struct/links.html#h-12.2.2](http://www.w3.org/TR/html401/struct/links.html#h-12.2.2)

在保持功能不变的情况下，不用嵌套锚标记应该很容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T11:08:13.430

可以尝试自动修复无效的 HTML（=> Quirksmode ？），因为 achor-tag 不应包含 -Tags。

尝试在文件开头添加 DOCTYPE 语句，这会改变行为吗？

Doctype-Statement（必须在 HTML 文件/输出的第一行）可能是这样的：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/html4/loose.dtd"> 
```

# c++ - char 是默认提升的吗？

> ID：11985774
> 
> 赞同：15
> 
> 时间：2012-08-16T11:02:37.843
> 
> 标签：c++, c, language-lawyer, integer-promotion

这可能是一个愚蠢的问题，但有人可以提供 C++11 和 C11 的标准参考：

**`char`默认提升`int`为?**

这里有一点背景：C 和 C++ 都有*默认参数提升*的概念（C++11：5.2.2/7；C11：6.5.2.2/6）。这需要在以下调用中提升参数：

```
void f(int, ...);

float a = 1; short int b = 2; char c = 'x';

f(0, a, b, c); 
```

对于函数调用，`a`转换为`double`并`b`转换为`int`. 但是会发生什么`c`？一直觉得自己`char`也升职了`int`，但是在标准里找不到相关的说法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-16T11:07:36.007

一、默认参数提升

> 6.5.2.2
> 
> 如果表示被调用函数的表达式具有不包含原型的类型，则**对每个参数执行整数提升**，并将浮点类型的参数提升为双精度。这些被称为*默认参数提升*。

现在进行整数促销：

> 6.3.1.1
> 
> 可以在可以使用 int 或 unsigned int 的表达式中使用以下内容：
> 
> *   具有整数类型（除 int 或 unsigned int 之外）的对象或表达式，其整数转换等级小于或等于 int 和 unsigned int 的等级。
> 
> 如果 int 可以表示原始类型的所有值（受宽度限制，对于位域），则该值将转换为 int；否则，它将转换为无符号整数。这些被称为 *整数促销*。

因此，对于 C，至少 a`char`默认提升为`int`or `unsigned int`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-09T12:16:34.900

## C++

在 C++ 2011 (ISO/IEC 14882:2011) 中，相关部分似乎是：

> ### §5.2.2 函数调用 [expr.call]
> 
> ¶6一个函数可以被声明为接受更少的参数（通过声明默认参数（8.3.6））或更多的参数（通过使用省略号，...，或函数参数包（8.3.5））函数定义（8.4）中的参数。[注意：这意味着，除了使用省略号 (...) 或函数参数包的地方，每个参数都有一个参数可用。——尾注]
> 
> ¶7当给定参数没有参数时，参数的传递方式使得接收函数可以通过调用 va_arg (18.10) 获取参数的值。[注意：本段不适用于传递给函数参数包的参数。函数参数包在模板实例化 (14.5.3) 期间扩展，因此在实际调用函数模板特化时，每个这样的参数都有一个对应的参数。—end note] 对参数表达式执行左值到右值 (4.1)、数组到指针 (4.2) 和函数到指针 (4.3) 标准转换。具有（可能是 cv 限定的）类型 std::nullptr_t 的参数被转换为类型 void* (4.10)。在这些转换之后，如果参数没有算术、枚举、指针、指向成员的指针或类类型，该程序格式不正确。传递具有非平凡复制构造函数、非平凡移动构造函数或非平凡析构函数的类类型（第 9 条）的潜在评估参数，没有相应的参数，由实现定义的语义有条件地支持。
> 
> 如果参数具有受整数提升 (4.5) 约束的整数或枚举类型，或受浮点提升 (4.6) 约束的浮点类型，则在调用之前将参数的值转换为提升的类型. 这些提升称为默认参数提升。

我将最后两句分开以强调它们。它们是标准第 7 段的连续部分。

> ### §4.5 整体促销 [conv.prom]
> 
> ¶1 一个除`bool`, `char16_t`,之外的整数类型的纯右值`char32_t`，或者`wchar_t`其整数转换等级 (4.13) 小于 的等级，如果可以表示源类型的所有值，则`int`可以转换为类型的纯右值；否则，源纯右值可以转换为类型的纯右值。`int``int``unsigned int`
> 
> ¶2 、 或 (3.9.1) 类型的纯`char16_t`右`char32_t`值`wchar_t`可以转换为以下第一种类型的纯右值，该类型可以表示其基础类型的所有值：`int`、`unsigned int`、`long int`、 `unsigned long int`、`long long int`或`unsigned long long int`。如果该列表中的任何类型都不能表示其基础类型的所有值，则类型为`char16_t`,`char32_t`或的纯右`wchar_t`值可以转换为其基础类型的纯右值。

等等。

* * *

## C

C 有两个上下文，其中参数被默认提升。一种是函数范围内没有原型（首先由另一个答案覆盖），第二种是有省略号的原型。当然，C++ 根本不允许第一种情况。这些引用来自另一个答案选择的标准的相同部分，但这里的片段有点长。它们是通过对标准的独立分析发现的，只有在交叉检查时我才注意到这些部分是相同的。

在 C 2011 (ISO/IEC 9899:2011) 中，相关部分似乎是：

> ### §6.5.2.2 函数调用
> 
> ¶6 如果表示被调用函数的表达式具有不包含原型的类型，则对每个参数执行整数提升，并将浮点类型的参数提升为双精度。这些称为默认参数提升。如果参数的数量不等于参数的数量，则行为未定义。如果函数是使用包含原型的类型定义的，并且原型以省略号 (`, ...`) 或提升后的参数类型与参数类型不兼容，则行为未定义。如果函数定义的类型不包含原型，并且提升后的参数类型与提升后的参数类型不兼容，则行为未定义，但以下情况除外：
> 
> — 一种提升类型是有符号整数类型，另一种提升类型是对应的无符号整数类型，并且值可以在两种类型中表示；
> 
> — 两种类型都是指向字符类型或 void 的限定或非限定版本的指针。
> 
> ¶7 如果表示被调用函数的表达式具有包含原型的类型，则参数将隐式转换为相应参数的类型，就像通过赋值一样，将每个参数的类型视为它声明的类型。函数原型声明器中的省略号会导致参数类型转换在最后一个声明的参数之后停止。默认参数提升是在尾随参数上执行的。

“整数促销”在 §6.3.1.1 中定义：

> ### §6.3.1 算术操作数
> 
> ### §6.3.1.1 布尔值、字符和整数
> 
> ¶1 每个整数类型都有一个整数转换等级，定义如下：
> 
> — 任何两个有符号整数类型都不应具有相同的等级，即使它们具有相同的表示。
> 
> — 有符号整数类型的等级应大于任何精度较低的有符号整数类型的等级。
> 
> — long long int 的rank 大于long int 的rank，long int 的rank 大于int 的rank，short int 的rank 大于signed char 的rank。
> 
> — 任何无符号整数类型的等级应等于相应的有符号整数类型的等级，如果有的话。
> 
> — 任何标准整数类型的秩应大于任何具有相同宽度的扩展整数类型的秩。
> 
> — char 的等级应等于signed char 和unsigned char 的等级。
> 
> — _Bool 的等级应小于所有其他标准整数类型的等级。
> 
> — 任何枚举类型的等级应等于兼容整数类型的等级（见 6.7.2.2）。
> 
> — 任何扩展有符号整数类型相对于另一个具有相同精度的扩展有符号整数类型的等级是实现定义的，但仍受制于确定整数转换等级的其他规则。
> 
> — 对于所有整数类型 T1、T2 和 T3，如果 T1 的秩大于 T2，并且 T2 的秩大于 T3，则 T1 的秩大于 T3。
> 
> ¶2 可以在表达式中使用`int`或`unsigned int`使用以下内容：
> 
> — 具有整数类型（除`int`or之外`unsigned int`）的对象或表达式，其整数转换等级小于或等于`int`and 的等级`unsigned int`。
> 
> `_Bool`— 、`int`、`signed int`或类型的位域`unsigned int`。
> 
> 如果 an`int`可以表示原始类型的所有值（受宽度限制，对于位域），则该值转换为`int`; 否则，将其转换为`unsigned int`. 这些被称为*整数促销*。^(58))整数提升不会改变所有其他类型。
> 
> ^(58))整数提升仅适用于：作为通常算术转换的一部分，适用于某些参数表达式，适用于一元 +、- 和 ~ 运算符的操作数，以及移位运算符的两个操作数，由它们各自指定子条款。

* * *

我注意到有一次，问题列出了 function `void f(...);`，它是 C++ 函数而不是 C 函数；C 不允许省略号作为函数的唯一参数出现。该问题已更新为`void f(int, ...);`在 C 和 C++ 中都有效的问题。

# git - 安装 Gitzilla 时的 PyBugz 版本

> ID：11985777
> 
> 赞同：2
> 
> 时间：2012-08-16T11:02:49.953
> 
> 标签：git, bugzilla, pybugz

我正在尝试安装 Gitzilla，但遇到了[此处](https://groups.google.com/forum/?fromgroups#!topic/gitzilla-talk/zbM4AH6g1ts%5B1-25%5D)提到的“没有名为 Bugz 的模块”问题。

任何人都知道在哪里获取上面链接中提到的 0.9.3 PyBugz 版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:40:49.780

在 Ubuntu 上：

*   下载 PyBugs:`git clone https://github.com/williamh/pybugz.git`和 cd 到新的 pybugz 目录
*   验证标签 0.9.3 是否存在：`git tag`
*   签出 0.9.3 标签：`git checkout 0.9.3`
*   安装库：`sudo python setup.py install`

# wcf - WCF 可靠会话示例

> ID：11985786
> 
> 赞同：2
> 
> 时间：2012-08-16T11:03:32.560
> 
> 标签：wcf, session

有人知道 WCF Reliable 会话的好示例吗？如何实现 WCF 可靠会话？最好的例子包括主要的funda

如何在客户端获得消息确认？如何获取消息顺序和序列号？如何实现不同的三种可靠会话？

# forms - 如何在 Ember.js 应用程序中获取输入值？

> ID：11985787
> 
> 赞同：2
> 
> 时间：2012-08-16T11:03:33.137
> 
> 标签：forms, input, ember.js

`Ember.TextField`提交按钮后，从 获取输入值的最佳解决方案是什么？

假设我有一个简单的应用程序来发送消息。我指定了一个视图，它代表用户输入他的消息的输入表单：

```
App.TextView = Ember.View.extend({
    templateName: 'text',

    submit: function(event) {
        console.log(event);
    }
}); 
```

然后，这个视图有 Handlebars 模板：

```
<script type="text/x-handlebars" data-template-name="text">
    <h1>Send the message:</h1>
    <div class="send_form">
        {{view Ember.TextField}}
        <button type="submit">Done</button>
    </div>
</script> 
```

基本上，我只需要一件事。当用户点击按钮时，我需要收到通知（在提交功能或我的应用程序的其他任何地方），我需要从`TextField`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-16T12:21:46.207

例如，您可以将文本字段的值绑定到视图中的消息属性。

也许还有其他解决方案，但我认为这很简单：http: [//jsfiddle.net/Sly7/vfaF3/](http://jsfiddle.net/Sly7/vfaF3/)

```
<script type="text/x-handlebars">
  {{view App.TextView}}
</script>

<script type="text/x-handlebars" data-template-name="text">
  <h1>Send the message:</h1>
  <div class="send_form">
    {{view Ember.TextField value=view.message}}
    <button type="submit" {{action "submit" target=view}}>Done</button>
  </div>
</script>​ 
```

```
App = Ember.Application.create({});

App.TextView = Ember.View.extend({
  templateName: 'text',
  message: '',

  actions: {
    submit: function(event) {
      console.log(this.get('message'));
    }
  }
}); 
```

# ruby-on-rails - 在嵌套数组中查找对象的位置

> ID：11985789
> 
> 赞同：1
> 
> 时间：2012-08-16T11:03:42.777
> 
> 标签：ruby-on-rails, ruby

在下面的数组中，我如何找到 id = 71 的产品的位置？

```
[[[#<Product id: 71>, #<BigDecimal:x>], 0], [[#<Product id: 73>, #<BigDecimal:x>], 1]] 
```

或者，如果我有`@product = Product.find(71)`，我将如何发现该对象与数字相关联`0`而不是`1`在上述数组中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T11:16:21.127

您可以使用`Array#index`with 块，使用块参数解构（这里使用符号而不是您的自定义对象）：

```
arr = [[[:a, :b], 5], [[:c, :d], 7]]
# => [[[:a, :b], 5], [[:c, :d], 7]] 
arr.index{|((a, b), c)| c == 7}
# => 1 
arr.index{|((a, b), c)| b == :a}
# => nil 
arr.index{|((a, b), c)| b == :b}
# => 0 
```

如果您对特定元素感兴趣，而不是它的索引，只需使用`find`代替`index`（块参数将相同）。

# objective-c - stringByReplacingOccurrencesOfString：在 AppleScript Obj-C 中

> ID：11985791
> 
> 赞同：0
> 
> 时间：2012-08-16T11:04:00.483
> 
> 标签：objective-c, cocoa, nsstring, applescript

有什么方法可以在 AppleScript Obj-C 中使用下面的方法或类似的方法？

```
NSString *request = [urlString stringByReplacingOccurrencesOfString:@"{query}"
                                                        withString:queryString]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:40:00.033

您可以使用文本项目分隔符

```
set theReplacementString to "-----"
set {theOriginal, text item delimiters} to {text item delimiters, "{query}"}
set theParts to every text item of "{query}asd{query}sadsa{query}"
set text item delimiters to theReplacementString
set theResult to theParts as string
set text item delimiters to theOriginal
return theResult 
```

给你

```
"-----asd-----sadsa-----" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T03:00:44.670

要回答您问题的第一部分，您可以转换 Cocoa 方法并使用等效的 ASOC 语句（请参阅[AppleScriptObjC 发行说明](https://developer.apple.com/library/mac/#releasenotes/ScriptingAutomation/RN-AppleScriptObjC/_index.html)）：

```
set urlString to current application's NSString's stringWithString_("{query}asd{query}sadsa{query}") -- create an NSString to use with the Cocoa method
set queryString to "-----" -- the replacement string
set request to urlString's stringByReplacingOccurrencesOfString_withString_("{query}", queryString) -- the NSString method in ASOC
display dialog request as text 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T12:01:04.513

这是有效的代码：

```
set theText to "01 01 2005"
set AppleScript's text item delimiters to " "
set theTextItems to text items of theText
set AppleScript's text item delimiters to "/ "
set theText to theTextItems as string
set AppleScript's text item delimiters to {""}
theText 
```

# ruby - 1.8 不支持的编码选项：r:UTF-8

> ID：11985795
> 
> 赞同：0
> 
> 时间：2012-08-16T11:04:08.673
> 
> 标签：ruby, uglifyjs

我正在尝试使用 Ruby Uglifier gem，但它给出了这个警告并且输出的 javascript 没有被缩小：

> /usr/lib/ruby/gems/1.8/gems/uglifier-1.2.7/lib/uglifier.rb:51：警告：1.8 不支持编码选项：r:UTF-8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:20:45.557

最简单的答案是您需要升级到 ruby​​ 1.9。1.8 不支持指定字符编码。

Tl;博士

制作此 gem 的人在构建 gem 时没有正确指定支持的 Ruby 版本`gemspec`，因此它允许您安装它，但由于硬编码编码，它将无法运行`UTF-8`。您可以编辑 gem 以删除它，但不能保证它会起作用，因为他们可能在某处的 gem 中使用 UTF-8 特定字符。我强烈建议升级到 1.9。

# sql-server-2008 - 透视动态列，无聚合

> ID：11985796
> 
> 赞同：5
> 
> 时间：2012-08-16T11:04:09.907
> 
> 标签：sql-server-2008, pivot, transpose

我在 SQL Server 2008 中有问卷数据，我想将其转置为矩阵。
我看到了几篇关于同一主题的帖子，但我就是不明白。

给出了下表：

`Question table`

`Answer table`

`Customer table`

**列：**
`[CustomerID]` , `[QuestionName_1]`, .., `[QuestionName_n]`<-问题列的**动态**数量）
**数据：**
`CustomerID` , `Answer_1`, ..,`Answer_n`

检索列的代码：

```
DECLARE @columns VARCHAR(8000)

SELECT @columns = COALESCE(@columns + ',[' + cast(QuestionName as varchar) + ']',
'[' + cast(QuestionName as varchar)+ ']')
FROM Answer A 
INNER JOIN Question Q ON A.QuestionID = Q.QuestionID
INNER JOIN Customer C ON A.CustomerID = C.CustomerID
GROUP BY Q.QuestionName

SET @columns = '[CustomerID],' + @columns

DECLARE @query VARCHAR(8000)
SET @query = 'Some PIVOT query without aggregation'

EXECUTE(@query) 
```

最初的查询想法来自[具有动态列的枢轴](http://www.simple-talk.com/blogs/2007/09/14/pivots-with-dynamic-columns-in-sql-server-2005/ "具有动态列的枢轴")。

可以做到吗？旋转查询会是什么样子？
ps：我不想使用具有最大列数的排名。

问候，

米歇尔

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-16T11:14:00.960

是的，您可以执行动态枢轴。有时，首先使用静态版本更容易处理[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)查询，这样您就可以看到查询和结果的显示方式。然后将查询转换为动态版本。

以下是查询的静态与动态版本的示例：

静态（[SQL 小提琴](http://sqlfiddle.com/#!3/86cd2/1)）：

```
select *
from 
(
    select u.userid,
        u.fname,
        u.lname,
        u.mobile,
        r.question,
        r.choice
    from users u
    left join results r
        on u.questionid = r.questionid
        and u.choiceid = r.choiceid
) x
pivot
(
    min(choice)
    for question in([are you], [from])
) p 
```

动态（[SQL 小提琴](http://sqlfiddle.com/#!3/7f092/1)）：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

SET @cols = STUFF((SELECT distinct ',' + QUOTENAME(c.question) 
            FROM results c
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT userid, fname, lname, mobile, ' + @cols + ' from 
            (
                select u.userid,
                    u.fname,
                    u.lname,
                    u.mobile,
                    r.question,
                    r.choice
                from users u
                left join results r
                    on u.questionid = r.questionid
                    and u.choiceid = r.choiceid
           ) x
            pivot 
            (
                min(choice)
                for question in (' + @cols + ')
            ) p '

execute(@query) 
```

如果您可以提供有关当前表结构的更多详细信息，然后提供一些示例数据。我们应该能够帮助您创建适合您的情况所需的版本。

正如我所说，有时从静态版本开始会更容易，您可以先在需要转换的列中硬编码，然后再转到动态版本。

# api - Google Reader Api 将所有项目标记为已读

> ID：11985797
> 
> 赞同：6
> 
> 时间：2012-08-16T11:04:16.490
> 
> 标签：api, url, google-reader

这就是我的网址的样子：

```
https://www.google.com/reader/api/0/mark-all-as-read?s=http://www.campionatoseriea.net&ts=1345114937 
```

我不明白为什么它不起作用！我已成功登录。

***** 编辑*******

 **```
https://www.google.com/reader/api/0/mark-all-as-read?s=feed/http://www.campionatoseriea.net/feed&ts=1346843394 
```

我也试过这个查询，但它不起作用！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T11:20:05.967

尝试包含令牌参数 (T)。

`https://www.google.com/reader/api/0/mark-all-as-read?s=feed/http://www.campionatoseriea.net/feed&ts=1346843394&T=//cDr2ct8ynZS2I-P4x4cn1A`

[本文档](http://undoc.in/googlereader.html#api-0)描述了如何获取令牌。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T08:34:23.110

```
?s=http://www.campionatoseriea.net 
```

在 s 中，您必须传递提要 ID，而不是 url。这是示例：

```
?s=feed/http://www.gsmarena.com/rss-news-reviews.php3 
```**

# r - 在R中将日期转换为星期几

> ID：11985799
> 
> 赞同：24
> 
> 时间：2012-08-16T04:00:41.380
> 
> 标签：r

> **可能重复：**
> [在 R 中查找星期几](https://stackoverflow.com/questions/9216138/find-the-day-of-a-week-in-r)

我有 11-01-2011 等天的数据。但我想添加与日期对应的数据，如星期一、星期二等。有没有包含日期​​信息的 R 包？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-08-16T07:02:33.673

```
weekdays(as.Date('16-08-2012','%d-%m-%Y'))
[1] "Thursday" 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-16T11:13:00.727

这个`lubridate`包非常适合这种东西。

```
> wday(as.Date('16-08-2012','%d-%m-%Y'))
[1] 5
> wday(as.Date('16-08-2012','%d-%m-%Y'), label=TRUE)
[1] Thurs
Levels: Sun < Mon < Tues < Wed < Thurs < Fri < Sat
> wday(as.Date('16-08-2012','%d-%m-%Y'), label=TRUE, abbr = FALSE)
[1] Thursday
Levels: Sunday < Monday < Tuesday < Wednesday < Thursday < Friday < Saturday 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-08-16T05:59:09.647

*以下是创建您自己的库或例程的一些信息*

**常数：**

**day_of_month**

```
 the day of the month
    e.g. if input mm-dd-yyy then dd 
```

**月**：

```
march = 1
april = 2
may = 3
... 
```

**年**

```
yy[yy]  (last to digits from yyyy)
   *subtract 1 if month jan or feb
    e.g. if input date is 02-01-2012 (mm-dd-yyyy)
         year =  (12-1) = 11 
```

**世纪**

```
[yy]yy  (first two digits from yyyy)
     e.g. if input year is 2012 then 20 = century
     * year 2000, 1900, ... are 20-1, 19-1 respectively 
```

**算法**

```
step1: floor(century / 4)

step2: year

step3: floor(year/4)

step4: floor(month*2.6 -0.2)  #this is the leap year correction

step5: day_of_month

step6: add step1...step5

step7: divide by 7  # modulo 7 in codespeak

step8: the remainder is the day of the week 
```

**解释结果：**

```
Sun = 0, Mon = 1, Tues = 3, etc.. 
```

不是图书馆，而是随着公共服务的叮当声……

“阅读：你知道的越多”

**参考：[http ://bit.ly/PqF0M0](http://bit.ly/PqF0M0)**

# ruby-on-rails - 如何使按钮作为erb中的链接？

> ID：11985810
> 
> 赞同：9
> 
> 时间：2012-08-16T11:04:51.997
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

```
<%= link_to 'New Post', new_post_path %> 
```

这会产生指向`new_post_path`. 以前我用过`<input type="submit" class="new" name="Addlist" value="Add New" />`它就像一个按钮。那么如何使链接看起来像 erb 中的按钮？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-16T11:35:07.930

只是为了抛出另一个选项，因为我遇到了 button_to 选项不起作用的情况。这看起来有点像那个。

```
<%= link_to '<button type="button">New Post</button>'.html_safe, new_post_path %> 
```

我基本上想要的是一个不会变成提交的按钮，因为我在页面上有多个与表单无关的按钮，我真的只是希望它只是转到另一个页面。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-16T11:08:53.183

看看[**button_to**](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-button_to)。总而言之，它将与此类似：

```
<%= button_to "New Post", { :action => "new" }, :method => :get %> 
```

尽管请注意，此方法接受文档中描述的`:method`and`:confirm`修饰符。`link_to`如果没有`:method`给出修饰符，它将默认执行一个`POST`操作。你也可以通过传入来禁用`:disabled => true`按钮`html_options`。如果您使用的是 RESTful 路由，则可以传递`:method`来更改用于提交表单的 HTTP 动词。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-12-16T13:59:33.247

@Ryan 的回答很好，但遗憾的是html 验证*失败*[http://validator.w3.org/](http://validator.w3.org/)

**错误：元素按钮不得作为 a 元素的后代出现。**

为什么不简单地将（CSS）***类***应用于您的链接并使其*显示*为按钮。

erb：

`<%= link_to "Button Text", new_post_path, class: 'button' %>`

产生（*有效*和*语义*）HTML：

`<a class="button" href="/post/new">Button Text</a>`

然后您可以将其*设置*为**看起来**像一个按钮。

示例： http: [//jsfiddle.net/nelsonic/FQK​​9M /7/](http://jsfiddle.net/nelsonic/FQK9M/7/)

# android - Android 媒体播放器错误 (100,0)

> ID：11985815
> 
> 赞同：7
> 
> 时间：2012-08-16T11:05:19.830
> 
> 标签：android, android-mediaplayer, android-video-player

我已经阅读了网上给出的所有错误代码。

错误指定：

> 常量 PVMFStatus PVMFInfoLast = 100; “范围结束的占位符”

但我无法处理此错误，感谢您的帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-16T11:45:15.660

将 OnErrorListener 实现到您的类。

在类体内写

```
video_view.setOnErrorListener(this); 
```

然后用这个方法覆盖方法 OnError(MediaPlayer mp , int what , int extra)

```
@Override
public boolean onError(MediaPlayer mp, int what, int extra) 
{
    if (what == 100)
    {
        video_view.stopPlayback();
        Intent inn = new Intent(HelloInterruptVideoStream.this,TabAct.class);
        startActivity(inn);
    }
    else if (what == 1)
    {
        pb2.setVisibility(View.GONE);
        Log.i("My Error ", "handled here");
        video_view.stopPlayback();
        Intent inn = new Intent(HelloInterruptVideoStream.this,TabAct.class);
        startActivity(inn);
    }
    else if(what == 800)
    {
        video_view.stopPlayback();
        Intent inn = new Intent(HelloInterruptVideoStream.this,TabAct.class);
        startActivity(inn);
    }
    else if (what == 701)
    {
        video_view.stopPlayback();
        Intent inn = new Intent(HelloInterruptVideoStream.this,TabAct.class);
        startActivity(inn);
    }
    else if(what == 700)
    {
        video_view.stopPlayback();

        Toast.makeText(getApplicationContext(), "Bad Media format ", Toast.LENGTH_SHORT).show();
        Intent inn = new Intent(HelloInterruptVideoStream.this,TabAct.class);
        startActivity(inn);
    }

    else if (what == -38)
    {
        video_view.stopPlayback();
        Intent inn = new Intent(HelloInterruptVideoStream.this,TabAct.class);
        startActivity(inn);
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-13T06:28:49.910

我在 Android 1.5 上遇到了这个问题。

```
mMP = new MediaPlayer();
mMP.setOnCompletionListener(new CompletionListener());
mMP.setOnErrorListener(new ErrorListener());    
final FileInputStream fileInStream = new FileInputStream(mFileName);    
mMP.setDataSource(fileInStream.getFD());        
mMP.prepare();
mMP.play(); 
```

```
01-14 01:57:26.248: W/MediaPlayer(1971): MediaPlayer server died!
01-14 01:57:26.258: E/MediaPlayer(1971): error (100, 0)
01-14 01:57:26.258: E/MediaPlayer(1971): Error (100,0) 
```

当 mp3 文件持续时间小于 1 秒时会发生这种情况。这是一个`android.media.MediaPlayer`错误。

解决方案是让 mp3 文件的持续时间超过 1 秒。

# css - CSS：内联块与内联文本

> ID：11985816
> 
> 赞同：0
> 
> 时间：2012-08-16T11:05:21.357
> 
> 标签：css

我希望我的块被设置`line-height`（就像我对文本所做的那样）。我知道我应该`display: inline-block`在这种情况下使用，但这对我不起作用。为什么？

**HTML：**

```
<div class="block">
    <div></div>
</div>
<div class="block">
    test
</div> 
```

**CSS：**

```
.block {
    line-height: 50px;
    height: 50px;
    width: 50px;
    border: 1px solid black;
}
.block div {
    height: 40px;
    width: 28px;
    background-color: #f0f;
    display: inline-block;
} 
```

**现场演示：[jsFiddle](http://jsfiddle.net/5E7eP/)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:13:38.967

嗨，现在在你的**CSS中添加你的****div** `aertical-align middle`

 **```
.block div {
     vertical-align: middle;
} 
```

***[演示](http://jsfiddle.net/5E7eP/3/)***

- **--------------------------------------------------------** 如果你想居中这个盒子比`text-align center`像这样添加

```
.block {
    text-align: center;
} 
```

***[演示](http://jsfiddle.net/5E7eP/7/)***

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T11:15:10.777

我猜你是想把紫色块垂直居中？

在那种情况下，你把事情搞混了：

a `<div>` is a block-level element, where text is not. so if you say `line-height`, you specify text-alignment of the content for that element, not positioning of a block element, to solve the centering of that purple block, use padding or margin:

```
.block div {
    height: 40px;/* 50 - 40 = 10pixel/2 = 5px space */
    width: 28px;
    background-color: #f0f;
    margin-top: 5px;
} 
```

[Demo over here jsFiddle](http://jsfiddle.net/5E7eP/5/)**

# javascript - Div 打破了 jQuery 手风琴

> ID：11985818
> 
> 赞同：0
> 
> 时间：2012-08-16T11:05:24.323
> 
> 标签：javascript, jquery, html, css, jquery-ui-accordion

我有一个 jQuery 手风琴，当我需要在其中一个滑动开放区域放置一个 div 标签时它会中断。我该如何解决这个问题？我需要放置一个 div 标记，因为我无法用跨度标记制作一个漂亮的盒子。有谁知道解决这个问题的方法？？

请在此处查看我的演示，看看它在哪里中断:(

[http://jsfiddle.net/zRqYM/](http://jsfiddle.net/zRqYM/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:10:42.837

这似乎有点蹩脚，但您可以使用 a`span`并将其设置为`display: block`. 那么它本质上是一个：http `div`: [//jsfiddle.net/zRqYM/5/](http://jsfiddle.net/zRqYM/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T11:12:10.337

为什么你不能把它放在一个跨度中并将跨度设置为一个带有显示块的漂亮盒子？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T11:13:04.200

您可以使用跨度标签。您需要做的就是在 css 中为您的 span-tag 类添加以下样式

```
.whatever {
    border: 1px solid #000;
    display: inline-block;
    margin: 0 5px;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T11:16:27.603

你可能应该改变这个：

```
$(this).next("p").slideToggle("slow")
       .siblings("p:visible").slideUp("slow"); 
```

到：

```
$(this).next("div").slideToggle("slow")
       .siblings("div:visible").slideUp("slow"); 
```

和CSS：

```
.accordion2 > div {
    background: #f7f7f7;
    /* etc... */ 
```

如果要将其他元素放入可扩展内容中，则使用 a`DIV`而不是更有意义：http: [//jsfiddle.net/zRqYM/13/](http://jsfiddle.net/zRqYM/13/)`P`

或者只是在标签内使用内联元素`P`并将它们设置为`display:block;`，但这对我来说没有语义意义。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-16T11:16:59.560

有一种不同的方式来尝试你的手风琴而不用乱搞 CSS

完成`HTML`以下工作；

```
<div id='accordion'>
 <h3>Title of the view</h3>
 <div>
  all the stuff you want to do here
 </div>
 <h3>Title of the view</h3>
 <div>
  all the stuff you want to do here
 </div>
</div> 
```

并使您的脚本文件为

```
 $('#accordion').accordion({ active: 0 }); 
```

欲了解更多信息：请访问[http://jqueryui.com/demos/accordion](http://jqueryui.com/demos/accordion)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-16T11:22:02.503

我已经更新了您的 jsfiddle： http: [//jsfiddle.net/zRqYM/21/](http://jsfiddle.net/zRqYM/21/)并将您的`p`标签更改为`div`标签，因为它允许最多标签嵌套。

作为一般规则，`div`标签不能位于`p`标签内部，因为它会导致`p`标签自行关闭。

# c# - 除某些模式外，如何将整个文本大写？

> ID：11985819
> 
> 赞同：0
> 
> 时间：2012-08-16T11:05:29.563
> 
> 标签：c#, regex

我有一个我想要的全部大写的文本（字符串），但以下内容除外：

1.  以：（冒号）开头的词
2.  用双引号括起来的单词或字符串，“”
3.  用单引号括起来的单词或字符串，''

其他所有内容都应替换为其大写对应项，并且应保留格式（空格、换行符等）。

我将如何使用正则表达式（C# 样式/语法）来执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T11:12:18.657

我想你正在寻找这样的东西：

```
text = Regex.Replace(text, @":\w+|""[^""]*""|'[^']*'|(.)",
                     match => match.Groups[1].Success ?
                              match.Groups[1].Value.ToUpper() : match.Value); 
```

*   `:\w+`- 用冒号匹配单词。
*   `"[^"]*"|'[^']*'`- 匹配引用的文本。对于转义引号，您可以使用：

    ```
    "[^"\\]*(?:\\.[^"\\]*)*"|'[^'\\]*(?:\\.[^'\\]*)*' 
    ```

*   `(.)`- 捕捉其他任何东西（你也可以尝试`([^"':]*|.)`，它可能会更快）。

接下来，我们使用[Regex.Replace](http://msdn.microsoft.com/en-us/library/ht1sxswy.aspx)的回调来做两件事：

*   确定我们是否需要保持文本原样，或者
*   返回文本的大写版本。

工作示例：http: [//ideone.com/ORFU8](http://ideone.com/ORFU8)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T11:13:52.023

你可以从这个 RegEx 开始：

```
\b(?<![:"'])(\w+?)(?!["'])\b 
```

当然，如果还不够的话，你必须自己改进它。例如，这也不会找到“dfgdfg”（不等引号）找到的单词在第一个匹配项中（$1）

# php - 表单自动处理 $_POST 到变量

> ID：11985823
> 
> 赞同：6
> 
> 时间：2012-08-16T11:05:49.560
> 
> 标签：php

我有大约 40 个项目，我`FORM`正在尝试为所有`Name=`属性提供一个用于处理的变量，而不必手动写出每一个。我在这里遗漏了什么，因为下面的代码不起作用。(name="comp1", name="comp2"... $comp1, $comp2)

```
$en = array_merge($em, $_POST);
$valid = true; 
foreach($_POST as $value) { 
    if(!isset($value)) { 
        $valid = false;
    } 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T11:08:15.460

如果某些内容不在 中`$_POST`，则 foreach 将不会循环遍历它。`Isset()`将始终返回 true，因为 foreach 循环遍历`$_POST`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T11:19:48.930

```
 foreach($_POST as $k=>$val) { 
    //$$k = $val;
       if(!isset($$k)){
         echo "==NO==";
       }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T11:27:11.223

POST 将始终设置，除非您使用以下内容禁用该字段：

`<input disabled="disabled"/>`

如果 filds 没有此属性，则检查该字段是否已填充的唯一方法是使用空字符串进行比较，`$value == ''`这样：

```
foreach($_POST as $key => $value) {
   if($value == '') { 
        $valid[$key] = false;
   }else{
        $valid[$key] = true;
   }
} 
```

您现在将拥有一个如下所示的数组 ($valid)：

```
var_dump($valid['field1']); //prints true, the field was filled
var_dump($valid['field2']); //prints false, the field was NOT filled 
```

# java - 内存分析器 - 适用于 Java 的 Google App Engine

> ID：11985832
> 
> 赞同：3
> 
> 时间：2012-08-16T11:06:32.310
> 
> 标签：java, google-app-engine, memory-leaks

我正在使用 Google App Engine（Java 版本）。有没有办法找出我的代码的哪些部分导致高内存消耗？

我需要某种内存分析器。据我所知，谷歌的 Appstats 不提供此功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:32:26.543

使用以下工具；

*   [Java VisualVM](http://docs.oracle.com/javase/6/docs/technotes/guides/visualvm/profiler.html)
*   [JMP（Java 内存分析器）](http://www.khelekore.org/jmp/)

# javascript - 如何使用 在 IE9 中？

> ID：11985834
> 
> 赞同：2
> 
> 时间：2012-08-16T11:06:32.413
> 
> 标签：javascript, html, css, svg, internet-explorer-9

我可以`<foreignobject>`在 SVG 中使用。它支持 Firefox 14、Safari。但它不支持IE9。我的代码在[这里](http://jsfiddle.net/sAnwv/)。如何`<foreignobject>`在 IE 9 中使用？或在 SVG 中的 HTML 元素中使用的任何其他方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:47:37.567

IE9 不支持[foreignObject](http://en.wikipedia.org/wiki/Comparison_of_layout_engines_%28SVG%29)你可以做的是创建一个 html 或 xhtml 页面，然后在其中嵌入你需要的 svg。与你现在正在做的事情相反。

# .net - GAC 似乎包含两个具有相同名称、版本和公钥令牌的程序集

> ID：11985847
> 
> 赞同：5
> 
> 时间：2012-08-16T11:07:11.743
> 
> 标签：.net, gac, .net-assembly

我目前正在关注[这个页面](http://gacviewer.cloudapp.net/Default.aspx)，该页面声称在典型的 Azure VM 上列出了 GAC 的内容。请注意，以下程序集和许多其他程序集列出了两次。

```
AuditPolicyGPManagedStubs.Interop, Version=6.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35 TWICE
CustomMarshalers, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a TWICE
CustomMarshalers, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a TWICE
ISymWrapper, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a TWICE
ISymWrapper, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a TWICE
Microsoft.GroupPolicy.AdmTmplEditor, Version=6.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35 TWICE 
```

对于这些程序集，似乎有两个不同的程序集具有相同的三元组“名称+版本+令牌”。

这怎么可能？这可能是网页中的错误还是可能没问题？取决于这些程序集的软件将如何选择它想要的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T11:11:12.787

这是由于处理器架构（最有可能是 x86 或 x64）。该页面没有列出与每个程序集相关的处理器架构，但这也是 GAC 的一个因素。

您可以拥有与特定处理器体系结构或平台无关的程序集。如果您在`C:\Windows\assembly`资源管理器对该文件夹的自定义处理中检查本地 GAC 的内容，您将可以看到程序集列表和相关的处理器架构。

# emacs - 如何防止 emacs 为我在此会话中打开的缓冲区打开新窗口？

> ID：11985848
> 
> 赞同：2
> 
> 时间：2012-08-16T11:07:14.913
> 
> 标签：emacs, elisp

我通常会同时打开两个 emacs 框架。

当我运行时`vc-diff`，会创建一个新窗口，无论窗口是否已经显示该缓冲区。

有没有防止这种情况发生的一般方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:42:07.137

我认为您需要`display-buffer-base-action`通过`display-buffer--other-frame-action`添加来自定义

```
(custom-set-variables
 '(display-buffer-base-action display-buffer--other-frame-action)) 
```

给你的`.emacs.el`或者也许

```
(custom-set-variables
 '(display-buffer-base-action 
   '(display-buffer-reuse-window (reusable-frames . t)))) 
```

我建议阅读上述所有变量 ( `C-h v`) 和函数 ( ) 的帮助。`C-h f`

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:43:58.750

设置`pop-up-frames`为非零值将阻止`pop-to-buffer`打开新窗口。相反，`*vc-diff*`缓冲区将成为显示它的框架中的活动窗口。

```
(setq pop-up-frames t) 
```

更改此变量也会影响其他使用`pop-to-buffer`的函数。

# windows-mobile - WinCE 6.0 设备不响应 ping

> ID：11985853
> 
> 赞同：0
> 
> 时间：2012-08-16T11:07:30.920
> 
> 标签：windows-mobile, windows-ce, activesync, tcp-ip

我正在开发基于 WinCE 6.0（在 ARM9 上）的（无头）设备。我在我的桌面（XP-SP3）和 WinCE 设备之间建立了以太网（EMACB1）连接。设备显示网络已建立，但 wince 设备未响应 ping。

以下是我的 TCP/IP 设置：

```
Desktop:
IP Address:       192.168.1.176
SubnetMask:       255.255.255.0
Default Gateway : 192.168.1.1

WinCE Device:
IP Address:       192.168.1.21
SubnetMask:       255.255.255.0
Default Gateway : 192.168.1.1 
```

我为两者设置了相同的初级和备用 DNS。

我的目标是从 WinCE 设备收集任何数据。由于 Activesync 不安全（无身份验证），我希望使用以太网（TCPIP）连接。

我错过了什么？

我也有一些疑问：1）TCPIP 的 NIC 是 mondatory 吗？因为我没有使用任何网卡。2) 有什么方法可以授权 Activesync。3) 哪种协议更适合通过以太网在 PC 和 WinCE 设备（无头）之间进行本地通信。（如 VPN 或 TFTP 或 TCPIP 等）

任何建议，将不胜感激

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:16:58.500

您的 Linksys 路由器`192.168.1.1`可能会阻止 ActiveSync。

此外，确保设置中的 USB 连接设置为 ActiveSync（启用高级网络功能），而不是海量存储。

以下是从[PocketPC 常见问题解答](http://www.pocketpcfaq.com/pocketpc.com/syncethernet.htm)中复制的一些注释：（在此处重新发布，以防网站消失）

在为以太网加载新组件之前，您必须执行几个初步步骤。

*   与要使用 ActiveSync 的 PC 建立串行电缆、红外线或 USB 连接。这是将 PC 的计算机名称放入 Pocket PC 以与以太网一起使用所必需的。
*   从以太网供应商的安装盘安装以太网驱动程序。这将添加一个网络控制面板以及其他相关文件。此安装需要少于 250 KB 的可用内存用于存储。如果您喜欢节省存储空间，也可以使用内置的 NE-2000 驱动程序。
*   重置设备以加载新组件。

接下来，在 Pocket PC 上为以太网配置网络控制面板。

*   单击开始。
*   单击设置。
*   单击网络。

![图。1](../Images/5c347ff71686df32802d1bc7f7c97670.png)

*图 1：Socket 的低功耗以太网 CF+ 卡的 TCP/IP 属性示例。*

*   输入 Pocket PC 的 IP 地址。我建议使用子网掩码为 255.255.255.0 的 TCP/IP 地址 192.168.1.2，以及 WINS 服务器地址，即 PC 的 IP 地址（使用我推荐的设置为 192.168.1.1）。
*   将其他字段留空。

![在此处输入图像描述](../Images/8caa8d635f3f5fd25905e6dcc08ab9e1.png)

*图 2：Pocket PC 上正确配置的网络控制面板设置。*

**连接**

*   将 Pocket PC 和 PC 都插入集线器。（如果您使用交叉电缆，您可以直接连接 Pocket PC 和 PC，无需集线器。）
*   打开 PC 和 Pocket PC 并将以太网 PC 卡插入 Pocket PC。
*   要启动 ActiveSync 会话，请在 Pocket PC 上选择**ActiveSync （依次选择****Start**、**Programs**和**Connections**）。确保方法设置为**网络连接**并且**连接到**与 PC 计算机的名称相匹配。然后单击**连接**以启动 ActiveSync 通信。

如果您启用连续 ActiveSync 同步，您的 Pocket PC 将保持最新状态，只要它连接到您的台式 PC，就会下载新的电子邮件、任务、联系人和其他文件和数据。

**明白了**

将以太网 PC 卡插入 Pocket PC 后，检查 PC 以太网卡上的链接指示灯。如果它不亮，则说明您遇到了电缆或集线器问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:42:24.457

网线和设备是如何连接的？您是否使用集线器或交换机（它们是否支持 MDI/X？）。我问，通常你不能简单地用标准电缆连接两个设备。最好是使用支持 Auto-MDI/X 的小型交换机，并正确切换以使用正常或反向布线。

# css - chrome中固定div的奇怪情况

> ID：11985854
> 
> 赞同：1
> 
> 时间：2012-08-16T11:07:31.947
> 
> 标签：css, google-chrome, css-position

我的网站顶部有一个固定的 div，但是在 Google Chrome 中滚动时，div 消失了。当我更改选项卡时， div 在正确的位置，但是当我再次滚动时，它又消失了。

您可以从[http://www.fillyo.com](http://www.fillyo.com)看到它，只需在 chrome 中向下滚动，您就会明白我的意思（滚动时右栏和顶栏都会消失）

我搜索但找不到与此相关的任何内容。

**第一张图片**：在页面加载时，您可以看到顶部的灰色条和右侧条上的文本位置：固定

**第二张图片**：滚动时，灰色条仍然存在，但不能像右边的条一样看到（只有 AdSense 代码停留在正确的位置，因为它可以在第二张图片上看到） ![在页面加载时，您可以看到顶部的灰色栏和右侧栏上的文本位置：固定](../Images/e0340d3f9fe66660c2032fa4ab8b6a7d.png)

![滚动时，灰色条仍然存在，但就像右边的条一样看不到](../Images/d31fe99df721576623faa7c82f0510fb.png)

# c++ - 对字符串向量进行排序：普通 C 与惯用 C++11

> ID：11985859
> 
> 赞同：22
> 
> 时间：2012-08-16T11:07:47.940
> 
> 标签：c++, c, sorting, c++11, benchmarking

我目前正在尝试学习 C++11 及其花哨的功能。具体来说，我正在寻找高效的通用性。所以我很高兴地用 C++11 编写了一个程序来对输入文件的行进行排序，以测试我的新技能。由于 C++ 编译器的内联和很好的特性，我期望这个小例子有高性能。为了了解我的程序有多快，我使用该函数在 C 中破解了完全相同的程序`qsort`，因为它是原始 C，因此没有对此函数执行内联，并且我的比较函数被间接调用，并且需要执行两个间接访问`char *`表示字符串的指针。

# 事实

然而，我对结果感到非常惊讶，C 似乎比 C++ 快 4 倍。在 8Mb 文件上，我得到以下结果：

```
$ g++ -O3 -std=c++11 -o sort sort.C
$ time ./sort < huge > /dev/null

real    0m0.415s
user    0m0.397s
sys     0m0.013s

$ cc -O3 -Wall -o sortc sort.c
$ time ./sortc < huge  > /dev/null

real    0m0.104s
user    0m0.097s
sys     0m0.010s

$ wc -l huge
140190 huge 
```

请注意，我尽量做到公平，编译选项相同，我的 C 程序（稍后转储）的行为方式与 C++ 程序相同：输入行的大小没有限制，输入的数量没有限制线。

我还注意到，虽然我的 C 程序`malloc`几乎为每个输入行调用一次，但 C++ 程序的每个输入行分配比例为 10！

# 编码

这是我用来比较的两个程序。

```
#include <iostream>
#include <string>
#include <vector>
#include <algorithm>
#include <memory>

int main () {
    typedef std::vector<std::string> svec;
    svec a;
    std::string s;

    for (;;) {
        getline(std::cin, s);
        if (std::cin.eof()) {
            if (s != "")
                a.push_back(std::move(s));
            break;
        }
        a.push_back(std::move(s));
    }
    std::sort(a.begin(), a.end());
    for (std::string &s : a) {
        std::cout << s << "\n";
    }
} 
```

还有我更冗长的 C 版本。

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

#define BUFSZ 100
size_t getl(char **line, size_t len) {
        char buf[BUFSZ];
        size_t i, n;

        for (i=0; i<BUFSZ; i++) {
                int c = getchar();

                if (c == EOF || c == '\n') {
                        *line = malloc(len+i+1);
                        memcpy(&(*line)[len], buf, i);
                        (*line)[len+i] = 0;
                        return i;
                }
                buf[i] = c;
        }

        n = getl(line, len+i);
        memcpy(&(*line)[len], buf, i);
        return i+n;
}

#define ARRAYSZ 30
struct Array {
        char **lv;
        size_t li, lc;
};

void addline(struct Array *a, char *line) {
        if (a->li == a->lc) {
                a->lc *= 2;
                a->lv = realloc(a->lv, a->lc * sizeof *a->lv);
        }
        a->lv[a->li++] = line;
}

int cmp(const void *a, const void *b) {
        return strcmp(*(const char **)a, *(const char **)b);
}

int main(void) {
        char *line;
        struct Array a;
        size_t i;

        a.li = 0;
        a.lc = ARRAYSZ;
        a.lv = malloc(a.lc * sizeof *a.lv);

        for (;;) {
                getl(&line, 0);
                if (feof(stdin)) {
                        if (line[0] != 0)
                                addline(&a, line);
                        else
                                free(line);
                        break;
                }
                addline(&a, line);
        }
        qsort(a.lv, a.li, sizeof *a.lv, cmp);
        for (i=0; i<a.li; i++) {
                printf("%s\n", a.lv[i]);
                free(a.lv[i]);
        }
        free(a.lv);
        return 0;
} 
```

# 问题

有人能告诉我必须在哪里更改我的 C++ 程序（而不是变成纯 C）以更快吗？我试图保持非常地道，这是破解 C++ 的好方法，还是当我想要高性能时应该倾向于编写类似 C 的代码？为什么 C++ 程序在堆上分配那么多，我怎样才能减少这个？

# 编辑

根据大众的需求，我展示了我的 C++ 程序的分析结果。这是我的 C++ 程序的分析器的有趣输出（前两行）：

```
Each sample counts as 0.01 seconds.
 %   cumulative   self              self     total           
time   seconds   seconds    calls  ms/call  ms/call  name    
40.03      0.02     0.02  1198484     0.00     0.00  __gnu_cxx::__normal_iterator<std::string*, std::vector<std::string, std::allocator<std::string> > >::operator--()
30.02      0.04     0.02  2206802     0.00     0.00  bool std::operator< <char, std::char_traits<char>, std::allocator<char> >(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) 
```

当我读到它时，似乎分配不是唯一的原因。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-16T11:32:24.207

原因在于 c++ std io 同步。以下代码：

```
int main () {
    typedef std::vector<std::string> svec;
    svec a;
    std::string s;

    // note
    std::ios_base::sync_with_stdio(false);

    for (;;) {
    getline(std::cin, s);
    if (std::cin.eof()) {
        if (s != "")
            a.push_back(std::move(s));
        break;
    }
        a.push_back(std::move(s));
    }
    std::sort(a.begin(), a.end());
    for (std::string &s : a) {
        std::cout << s << "\n";
    }
} 
```

给

```
 real   0m0.106s
 user   0m0.104s
 sys    0m0.004s 
```

C版本给出了这个：

```
 real   0m0.167s
 user   0m0.164s
 sys    0m0.000s 
```

编辑：正如 RiaD 正确提到`sync_with_stdio`的当然是静态函数，所以它足以为所有 std io 流调用一次函数。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-16T11:26:11.257

您还使用了两个不同的 I/O 库。这将完全搞砸任何时序信息，因为 C 和 C++ I/O 库非常不同。IOstreams 显然不是为速度而设计的。

此外，I/O 是完全不同步的。如果 I/O 数据源只是碰巧有一次进入较慢，则无论排序时间如何，一个程序似乎都会变慢 - 例如，如果操作系统碰巧将它放在缓存中以供一次运行，但在另一次运行时没有.

`std::vector<std::string>`比如说，您需要计算排序一个预先存在的时间所花费的时间。

哦，是的，你`getl`的内存泄漏。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-16T11:14:06.330

我的猜测是您不测量排序速度，而是测量内存重新分配。不要一次做`a.push_back`一个元素，而是尝试像使用 C 程序一样预先分配向量内存

```
a.reserve(num_lines); 
```

根据您的编译器是否使用扩展因子为`1.5`(VC++) 或`2`(g++) 的重新分配，您可以使用文件中的行`29`进行`17`重新分配`140,190`（即`log(total lines) / log(expansion factor)`）。

R. Martinho Fernandes 的评论也一针见血：在两个程序中使用`std::chrono::high_resolution_clock::now()`围绕`sort`语句来获得时间差异。这将您与内存和 IO 差异隔离开来。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-16T15:21:39.330

其他人已经注意到，您测量的大部分内容是 I/O 库的速度。然而，我认为值得注意的是，与这里所做的一些陈述相反，C++ iostream 可以与使用 C`FILE *`的 I/O 完全竞争。所以，你测量的主要是“gcc 的 iostreams 有多糟糕？”，而不是“一般来说 iostreams 有多糟糕？”

例如，我首先将我在一个目录中的所有 .txt 文件连接在一起，以创建一个相当大的文本文件。然后，我使用 VC++ 10 编译了您的 C 代码，并使用它对该文件进行排序（将输出写入另一个文件）。运行时间为 3.2 秒。

我还写了我认为合理惯用的 C++ 来完成相同的任务：

```
#include <iostream>
#include <vector>
#include <algorithm>
#include <string>
#include <iterator>

class line { 
    std::string data;
public:
    friend std::istream &operator>>(std::istream &is, line &l) { 
        return std::getline(is, l.data);
    }
    operator std::string() const { return data; }
};

int main() { 
    std::vector<std::string> vec(
        (std::istream_iterator<line>(std::cin)),
        std::istream_iterator<line>());

    std::sort(vec.begin(), vec.end());
    std::copy(vec.begin(), vec.end(), 
        std::ostream_iterator<std::string>(std::cout, "\n"));

    return 0;
} 
```

这与您的 C++ 代码的长度大致相同，但（我声称）比您的任何一个程序都简单。如果你真的在乎，让它更短一点会很容易。它根本没有特别尝试优化。使用 VC++ 10 编译（与我在 C 代码中使用的优化标志相同`-O2b2 -GL`），它在 2.8 秒内运行，比 C 代码快大约 10%。

我希望如果你在 Linux 上运行它，你会发现它比你的 C 代码慢。添加这两个`sync_with_stdio(false);`调用可能会解决这个问题，就像他们对您的 C++ 代码所做的那样。这些`sync_with_stdio(false);`调用通常在 Linux 上产生相当大的差异，但我从来没有能够衡量在 Windows 上使用它们的任何改进（使用我尝试过的任何编译器——最近的 VC++ 和 MinGW，以及更早之前的英特尔、Comeau 、CygWin 和 Borland 也是如此）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-16T14:15:00.800

除了 I/O 问题（并不是说这些不是真实的），这两种方法做两种不同的事情。C++ 版本移动`string`对象，C 版本移动指针。后者通常（见下文）会更快。重写 C++ 代码以移动指针而不是对象，即使用 a `std::vector<std::string*>`，并显式地新建每个`string`对象。是的，这不是惯用的，但这是一个更公平的速度比较。

如果`std::sort`是移动感知的，则移动琴弦会变得更快，并且`std::vector<std::string>`不会受到任何影响。但是移动语义在 C++11 中是新的，即使你有 C++11 编译器，移动语义也可能没有迁移到`std::sort`.

# html - IE - 状态栏显示不断加载

> ID：11985860
> 
> 赞同：0
> 
> 时间：2012-08-16T11:07:51.640
> 
> 标签：html, asp.net-mvc, razor, portable-areas

我有一个 razor MVC 页面 - 它是通过 MVC Portable Areas 加载的。当我浏览到索引操作时，一切正常，并且按预期工作。

...但有时 Internet Explorer 会不断在状态栏中显示加载栏。加载永远不会完成，但页面功能工作正常（所以它一定已经加载了我所有的资源）

我无法在 firefox 中复制它，并且我检查了 firebug 上的 Net 选项卡以查找加载缓慢的资源，但一切看起来都很好。

我想尝试让加载栏在设定的时间后停止（我知道这可能掩盖了一个问题，但我似乎无法找出页面出了什么问题！！）有没有办法做这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:32:48.730

IE有时会这样做。就像你说的那样，除了显示加载栏之外没有任何实际问题。

要确认一切正常，`alert("loaded")`请在您的`$(document).ready();`. 如果它提醒您，页面已成功加载，它只是 IE 是一个有问题的小... bugger。

编辑：我错过了一点。继续：

当然，只有在页面上没有 ajax 调用等可以在文档加载后启动加载序列时才会出现这种情况。在这种情况下，请使用调试器检查打开的连接。

# c# - 解析 URL/网络服务

> ID：11985862
> 
> 赞同：1
> 
> 时间：2012-08-16T11:07:59.037
> 
> 标签：c#, asp.net, xml, xml-parsing

我向第三方 API 发出请求，它以 XML 格式给我以下响应。

```
<?xml version="1.0" ?>
<abc>
<xyz>
<code>-112</code>
<message>No such device</message>
</xyz>
</abc> 
```

我使用此代码阅读了此内容。

```
 XmlDocument doc = new XmlDocument();
    doc.Load("*** url ***");

    XmlNode node = doc.SelectSingleNode("/abc/xyz");
    string code = node.SelectSingleNode("code").InnerText;
    string msg = node.SelectSingleNode("message").InnerText;

    Response.Write("Code: " + code);
Response.Write("Message: "+ msg); 
```

但我在这一行得到一个错误：

```
string code = node.SelectSingleNode("code").InnerText; 
```

错误是：

> 你调用的对象是空的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T11:14:25.810

我将您的 XML 文件的第一行更改为：

```
<?xml version="1.0"?> 
```

使其成为有效的 XML。通过此更改，您的代码对我有用。如果没有更改，解析器将引发异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T11:14:44.310

正如你所给予的，~~您的代码似乎没有任何问题~~ *编辑：您的声明是错误的，正如 svinja 指出的那样，您的 xml 甚至不会加载到 XmlDocument 中。*

但是，我猜测您的 xml 更复杂，并且至少涉及一个命名空间，这会导致选择失败。

它并不漂亮，但您可以做的是使用与命名空间无关的 xpath 来定位您的节点以避免使用`XmlNamespaceManager`：

```
XmlDocument doc = new XmlDocument();
doc.Load("*** url ***");

XmlNode node = doc.SelectSingleNode("/*[local-name()='abc']/*[local-name()='xyz']");
string code = node.SelectSingleNode("*[local-name()='code']").InnerText;
string msg = node.SelectSingleNode("*[local-name()='message']").InnerText;

Response.Write("Code: " + code);
Response.Write("Message: "+ msg); 
```

**编辑 - 细化**

如果您将声明更正为`<?xml version="1.0"?>`

但是，如果您在混合中引入命名空间，除非您适当地使用命名空间管理器，否则您的代码将会失败。

我上面的不可知 xpath 也将解析一个 xml 文档，如下所示：

```
<?xml version="1.0"?>
<abc xmlns="foo">
    <xyz xmlns="bar">
        <code xmlns="bas">-112</code>
        <message xmlns="xyz">No such device</message>
    </xyz>
</abc> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T11:35:35.953

**您可以使用 LINQ to XML（如果方便的话）：**

```
 XDocument doc = XDocument.Load(url);
  var selectors = (from elements in  doc.Elements("abc").Elements("xyz")
                  select elements).FirstOrDefault();
  string code = selectors.Element("code").Value;
  string msg = selectors.Element("message").Value; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T11:16:56.823

```
[XmlRoot("abc")]
public class Entity
{
    [XmlElement("xyz")]
    public SubEntity SubEntity { get; set; }
}

public class SubEntity
{
    [XmlElement("code")]
    public string Code { get; set; }
    [XmlElement("message")]
    public string Message { get; set; }
} 
```

并使用标准`xmlserializer`

```
 var xmlSerializer = new XmlSerializer(typeof(Entity));
       var result = xmlSerializer.Deserialize(new XmlTextReader("*** url ***"));
       Response.Write("Code: " + result.SubEntity.Code);
       Response.Write("Message: "+ result.SubEntity.Message); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T11:35:03.013

```
<?xml version="1.0">
<abc>
  <xyz>
    <code>-112</code>
    <message> No such device </message>
  </xyz>
</abc> 
```

尝试设置一个列表：

```
XmlNodeList nodeList = root.SelectNodes("/abc/xyz"); 
```

然后读取所有节点并获取它们的文本：

```
foreach(XmlNode node in nodeList)
{
  if(node.Name == "code")
  {
    string code = node.InnerText;
  }
  else
  if(node.Name == "message")
  {
    string msg = node.InnerText;
  }
} 
```

# angularjs - 如何在 AngularJs 中对字典使用 ng-repeat？

> ID：11985863
> 
> 赞同：287
> 
> 时间：2012-08-16T11:08:01.907
> 
> 标签：angularjs, json, dictionary, angularjs-ng-repeat

我知道我们可以轻松地将*ng-repeat*用于 json 对象或数组，例如：

```
<div ng-repeat="user in users"></div> 
```

但是我们如何将 ng-repeat 用于字典，例如：

```
var users = null;
users["182982"] = "{...json-object...}";
users["198784"] = "{...json-object...}";
users["119827"] = "{...json-object...}"; 
```

我想将它与用户字典一起使用：

```
<div ng-repeat="user in users"></div> 
```

是否可以？。如果是，我该如何在AngularJs中做到这一点？

我的问题示例：在 C# 中，我们定义的字典如下：

```
Dictionary<key,value> dict = new Dictionary<key,value>();

//and then we can search for values, without knowing the keys
foreach(var val in dict.Values)
{
} 
```

是否有一个内置函数可以从 C# 中的字典中返回值？

* * *

## 回答 #1

> 赞同：561
> 
> 时间：2012-08-16T11:37:35.290

您可以使用

```
<li ng-repeat="(name, age) in items">{{name}}: {{age}}</li> 
```

请参阅[ngRepeat 文档](https://docs.angularjs.org/api/ng/directive/ngRepeat)。示例：http: [//jsfiddle.net/WRtqV/1/](http://jsfiddle.net/WRtqV/1/)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-12-17T16:59:52.790

我还想提一下[AngularJS`ng-repeat`](http://docs.angularjs.org/api/ng.directive:ngRepeat)的一个新功能，即特殊的重复**起点**和**终点**。添加该功能是为了重复*一系列*HTML 元素，而不仅仅是*单个*父 HTML 元素。

为了使用中继器起点和终点，您必须分别使用`ng-repeat-start`和`ng-repeat-end`指令来定义它们。

该`ng-repeat-start`指令的工作方式与指令非常相似`ng-repeat`。不同之处在于它将重复**所有**HTML 元素（包括定义它的标签）直到`ng-repeat-end`放置的结束 HTML 标记（包括带有 的标记`ng-repeat-end`）。

**示例代码（来自控制器）：**

```
// ...
$scope.users = {};
$scope.users["182982"] = {name:"John", age: 30};
$scope.users["198784"] = {name:"Antonio", age: 32};
$scope.users["119827"] = {name:"Stephan", age: 18};
// ... 
```

**示例 HTML 模板：**

```
<div ng-repeat-start="(id, user) in users">
    ==== User details ====
</div>
<div>
    <span>{{$index+1}}. </span>
    <strong>{{id}} </strong>
    <span class="name">{{user.name}} </span>
    <span class="age">({{user.age}})</span>
</div>

<div ng-if="!$first">
   <img src="/some_image.jpg" alt="some img" title="some img" />
</div>
<div ng-repeat-end>
    ======================
</div> 
```

输出类似于以下内容（取决于 HTML 样式）：

```
==== User details ====
1\.  119827 Stephan (18)
======================
==== User details ====
2\.  182982 John (30)
[sample image goes here]
======================
==== User details ====
3\.  198784 Antonio (32)
[sample image goes here]
====================== 
```

如您所见，`ng-repeat-start`重复所有 HTML 元素（包括带有 的元素`ng-repeat-start`）。所有`ng-repeat`特殊属性（在本例中为`$first`和`$index`）也可以按预期工作。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-16T11:39:29.373

JavaScript 开发人员倾向于将上述数据结构称为对象或哈希，而不是字典。

上面的语法是错误的，因为您将`users`对象初始化为 null。我认为这是一个错字，因为代码应该是：

```
// Initialize users as a new hash.
var users = {};
users["182982"] = "..."; 
```

要从哈希中检索所有值，您需要使用 for 循环对其进行迭代：

```
function getValues (hash) {
    var values = [];
    for (var key in hash) {

        // Ensure that the `key` is actually a member of the hash and not
        // a member of the `prototype`.
        // see: http://javascript.crockford.com/code.html#for%20statement
        if (hash.hasOwnProperty(key)) {
            values.push(key);
        }
    }
    return values;
}; 
```

如果您打算在 JavaScript 中使用数据结构做大量工作，那么[underscore.js](http://underscorejs.org/)库绝对值得一看。Underscore 附带了一个[`values`方法](http://underscorejs.org/#values)，它将为您执行上述任务：

```
var values = _.values(users); 
```

我自己不使用 Angular，但我很确定会内置一种方便的方法来迭代哈希值（啊，我们走了，Artem Andreev 提供了上面的答案:)）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-01-17T17:15:39.293

在 Angular 7 中，以下简单示例可以工作（假设字典位于名为 的变量中`d`）：

我的.component.ts：

```
keys: string[] = [];  // declaration of class member 'keys'
// component code ...

this.keys = Object.keys(d); 
```

my.component.html: （将显示键：值对列表）

```
<ul *ngFor="let key of keys">
    {{key}}: {{d[key]}}
</ul> 
```

# mysql - 如何计算 MySQL 中每月每天的综合浏览量？

> ID：11985864
> 
> 赞同：2
> 
> 时间：2012-08-16T11:08:02.570
> 
> 标签：mysql

考虑以下`pageviews`（左）和`daterange`（右）表：

```
_date       pageviews       _date
---------------------       ----------
2011-01-01  21331           2011-01-01
2011-01-02  32143           2011-01-02
2011-01-04  23434           2011-01-03
.                           .
.                           .
2011-08-30  32322           2011-08-30 
```

该表包含具有相应网站综合浏览量的日期。请注意，有些日子没有任何综合浏览量（例如`2011-01-03`）。

我需要的是一个查询来计算当月每天的总浏览量。所以它应该添加 1 月 1 日 + 2 月 1 日 + ... + 11 月 1 日的浏览量作为第一个值，然后 1 月 2 日 + 2 月 2 日 + ... 2 月 3 日作为第二个值。因此，查询的输出将是 31 天（编号为 1 到 31）以及相应的总浏览量。

我不知道如何开始。我创建了一个`daterange`表格，其中包含所有日期，`2011-01-01`并且`2011-08-30`能够 CAOLESCE 并在`pageviews`表格中缺少的天数返回 0。但我从那里开始就迷路了。

你知道如何解决这个问题吗？任何帮助是极大的赞赏 ：-）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T11:13:34.030

```
SELECT DAY(_date),SUM(pageviews) FROM pageviews GROUP BY DAY(_date) 
```

希望以上查询能解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T11:13:22.680

我认为这就是你要找的：

```
SELECT a._date, SUM(IFNULL(b.pageviews, 0)) AS total_pageviews
FROM daterange a
     LEFT JOIN pageviews b
         ON DAYOFMONTH(a._date) = DAYOFMONTH(b._date)
GROUP BY DAYOFMONTH(a._date) 
ORDER BY a._date; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T11:16:24.933

像这样的东西？

```
SELECT DAY(daterange._date),SUM(pageviews)
FROM daterange 
LEFT JOIN pageviews ON daterange._date = pageviews._date
GROUP BY DAY(daterange._date) 
```

# linq-to-objects - Linq Group By 通过 C#.net

> ID：11985873
> 
> 赞同：0
> 
> 时间：2012-08-16T11:08:48.903
> 
> 标签：linq-to-objects

1.  我创建了一个 Emp 类

    ```
    class Emp
    {
        public Emp()
        {
        }
        public Emp(Int64 empId, string empName, double empSalary,int empDeptId)
        {
            this.EmpID = empId;
            this.EmpName = empName;
            this.EmpSalary = empSalary;
            this.EmpDeptId = empDeptId; 
        }
        public Int64 EmpID { get; set; }
        public string EmpName { get; set; }
        public double EmpSalary { get; set; }
        public Int32 EmpDeptId { get; set; }
    } 
    ```

2.  我只是将 Group by 命令应用到 EmpList 然后在返回语句中我得到运行时异常

> ConsoleApplication5.exe 中发生了“System.InvalidCastException”类型的未处理异常

附加信息：

> 无法转换类型为“WhereSelectEnumerableIterator `2[System.Linq.IGrouping`2[System.Int32,ConsoleApplication5.Emp],<>f__AnonymousType0 `3[System.Int32,System.Double,System.Double]]' to type 'System.Collections.Generic.IEnumerable`1[ConsoleApplication5.EmpGroup]”的对象。

我还分享了我编写的代码。

```
public IEnumerable<EmpGroup> GroupByDeptId()
        {

            var numberGroups =from result in empList
                              group result by result.EmpDeptId into groupingData
                              select new 
                              {
                                  EmpDeptId = groupingData.Key,
                                  SalarySum = groupingData.Sum(p => p.EmpSalary),
                                  AverageSalary = groupingData.Average(p => p.EmpSalary) 
                              };

               return (IEnumerable<EmpGroup>)numberGroups;

        } 
```

`3。我还为 EmpGroup 创建了一个类来处理分组数据。

```
class EmpGroup
    {
        public Int32 EmpDeptId { get; set; }

        public double SalarySum { get; set; }

        public double AverageSalary { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:20:48.633

您不能从匿名转换为您的类型，即使它们具有相同的字段。您应该编辑您的 LINQ`select`以创建一个新的`EmpGroup`：

```
public IEnumerable<EmpGroup> GroupByDeptId()
        {

            var numberGroups =from result in empList
                              group result by result.EmpDeptId into groupingData
                              select new EmpGroup() // here
                              {
                                  EmpDeptId = groupingData.Key,
                                  SalarySum = groupingData.Sum(p => p.EmpSalary),
                                  AverageSalary = groupingData.Average(p => p.EmpSalary) 
                              };

               return (IEnumerable<EmpGroup>)numberGroups;

        } 
```

# ios - 在标签栏控制器中重新加载所有视图控制器

> ID：11985875
> 
> 赞同：4
> 
> 时间：2012-08-16T11:09:00.263
> 
> 标签：ios, cocoa-touch, ios5, uitabbarcontroller, uitabbar

我有一个带有 7 个视图控制器的 UITabBarController 的 iPad 应用程序。

这是在我的 applicationDidFinishLaunching 中：

```
// Override point for customization after application launch.
self.tabBarController = [[UITabBarController alloc] init];
self.tabBarController.delegate = self;
self.tabBarController.viewControllers = [self createViewControllers];
self.window.rootViewController = self.tabBarController; 
```

这也在我的 appDelegate 中：

```
- (NSArray *)createViewControllers
{
    MyView1 *viewController1 = [[MyView1 alloc] initWithNibName:@"MyView1" bundle:nil];
    MyView2 *viewController2 = [[MyView2 alloc] initWithNibName:@"MyView2" bundle:nil];
    MyView3 *viewController3 = [[MyView3 alloc] initWithNibName:@"MyView3" bundle:nil];
    MyView4 *viewController4 = [[MyView4 alloc] initWithNibName:@"MyView4" bundle:nil];
    MyView5 *viewController5 = [[MyView5 alloc] initWithNibName:@"MyView5" bundle:nil];
    MyView6 *viewController6 = [[MyView6 alloc] initWithNibName:@"MyView6" bundle:nil];
    MyView7 *viewController7 = [[MyView7 alloc] initWithNibName:@"MyView7" bundle:nil];

    NSArray *views = [NSArray arrayWithObjects:viewController1, viewController2, viewController3, viewController4, viewController5, viewController6, viewController7, nil];

    return views;
} 
```

在任何时候，我都希望用户能够完全重新加载这些视图控制器，因此所做的任何更改、正在进行的任何动画、任何子视图等都会从内存中刷新，并且视图控制器都会重新加载。

我发现最简单的方法是在 appDelegate 中添加摇晃手势。摇动手势会弹出一个 UIAlertView，询问“你想重置所有内容吗？” 如果是，则会发生这种情况：

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if (buttonIndex == 1) {

        self.tabBarController.viewControllers = [self createViewControllers]; // <-- this happens

        // some of the other things I've tried
//        [self.tabBarController setViewControllers:[self createViewControllers] animated:YES]; // same as above but with animation

//        self.tabBarController = [[UITabBarController alloc] init]; // allocations go crazy!
//        self.tabBarController.delegate = self;
//        self.tabBarController.viewControllers = [self createViewControllers];
//        self.window.rootViewController = self.tabBarController;
    }
} 
```

我用新创建的集合替换了视图控制器数组。你也可以看到我尝试过的其他一些事情。

我不明白为什么每次执行重置时，仪器中的分配都会增加（并保持不变）并且应用程序开始变慢。我重置的越多，它就越慢，直到它变得无法使用。

我正在使用 ARC，我希望每次刷新选项卡栏控制器中的视图控制器时它都能处理内存管理。然而，无论我怎么做，每次刷新都会消耗更多的内存。

是什么让一切都变慢了？

# django - 了解 django.shortcuts.reverse，第 2 部分

> ID：11985876
> 
> 赞同：1
> 
> 时间：2012-08-16T11:09:05.940
> 
> 标签：django

在[了解 django.shortcuts.redirect 中](https://stackoverflow.com/questions/11938458/understading-django-shortcuts-redirect)`reverse`，我开始了一个关于and的线程`redirect_to`。

`reverse`当第一个参数是字符串时，我仍然无法理解如何工作。我多次阅读[https://docs.djangoproject.com/en/1.4/topics/http/shortcuts/#django.shortcuts.redirect](https://docs.djangoproject.com/en/1.4/topics/http/shortcuts/#django.shortcuts.redirect)`reverse`和相应的部分。但我仍然有一个`NoReverseMatch`例外。

在我的`ROOT_URLCONF`我有

```
urlpatterns = patterns('',
    url(r'^$', redirect_to, {'url': '/monitor/'}),
    url(r'^monitor/', include('monitor.urls')),
) 
```

在`monitor.urls`我有

```
urlpatterns = patterns('monitor.views',
    (r'^$', 'index'),
    (r'^list', 'listall'),
) 
```

并且`monitor.urls`我已经为这两个函数定义了代码，`index`并且`listall`. 在`listall`我添加了以下几行：

```
def listall(request):
    <more code goes here>
    print "reversing 1 index: %s " % reverse(index)
    print "reversing 2 index: %s " % reverse('index')
    render_to_response("monitor/list.htmld", params) 
```

如果我访问 localhost:3000/monitor/list 那么我可以看到

```
reversing 1 index: /monitor/ 
```

仅此而已，第二个`reverse`引发了异常。为什么？我错过了什么？

我追踪到 djangos 代码`django.core.urlresolvers.callable`和`django.core.urlresolvers.get_mod_func`. `get_mod_func`似乎期待像“ab”这样的东西，这就是为什么在`callable`第一行返回“index”`func_name`但一个空字符串`mod_name`。我将第二行更改为

```
 print "reversing 2 index: %s " % reverse('monitor.views.index') 
```

它按预期工作。那么，为什么我需要`reverse`使用完整的模块和函数名称（当我使用字符串时）调用而文档不需要呢？我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:26:10.777

你应该做类似的事情

```
reverse('monitor:index') 
```

在`ROOT_URLCONF`我有

```
urlpatterns = patterns('',
   (r'^$', redirect_to, {'url': '/monitor/'}),
   (r'^monitor/', include('monitor.urls'),namespace='monitor'),
) 
```

并在`monitor.url.py`：

```
urlpatterns = patterns('monitor.views',
   url(r'^$', 'index',name='index'),
) 
```

有关更多详细信息，请查看[https://docs.djangoproject.com/en/1.4/topics/http/urls/#django.core.urlresolvers.reverse](https://docs.djangoproject.com/en/1.4/topics/http/urls/#django.core.urlresolvers.reverse)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T17:45:01.113

我不确定您挂断了文档的哪一部分，但`reverse`的第一个参数是一些获取视图的识别方法：它可以是 urlpattern 名称、视图的完整虚线路径，或者查看自己

因此，根据您的示例，第一种方法已失效，因为您没有为 urlpattern 定义名称。您的第一次尝试成功了，`reverse(index)`因为您确实通过了视图。您的第二次尝试`reverse('index')`不起作用，因为它需要完整的导入上下文，即`'monitor.views.index'`. 两者之间的区别在于，当它是一个字符串时，Django 必须解释该字符串来为视图创建一个导入——而“索引”不足以确定导入路径。

但是，如果您打算反转它们，最好只命名您的视图，并且您还应该命名您包含的 urlpatterns，这样两个不同的应用程序就不会最终发生冲突。所以在项目级 urls.py 中：

```
urlpatterns = patterns('',
    url(r'^$', redirect_to, {'url': '/monitor/'}),
    url(r'^monitor/', include('monitor.urls', namespace='monitor', app_name='monitor')),
) 
```

然后，在 monitor/urls.py 中：

```
urlpatterns = patterns('monitor.views',
    (r'^$', 'index', name='index'),
    (r'^list', 'listall', name='listall'),
) 
```

然后，反转就像`reverse('monitor:index')`.

# hadoop - 如何查看特定 hadoop 任务的输入记录？

> ID：11985878
> 
> 赞同：0
> 
> 时间：2012-08-16T11:09:05.690
> 
> 标签：hadoop

我正在运行一个 hadoop 工作。全部完成，但完成了 4 个任务。我在思考为什么处理这些块需要这么长时间。我的猜测是，我的工作“难以”处理这些输入记录。要在本地测试，我想检索那些输入记录。我该怎么做？

任务的状态列显示 hdfs://10.4.94.75:8020/user/someuser/myfilename:154260+3

但是这是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:21:47.897

状态的最后一部分为您提供有关拆分的信息。进一步来说：

```
 hdfs://10.4.94.75:8020/user/someuser/myfilename:154260+3 
```

告诉您具有此状态的任务处理了“myfilename”的拆分，该拆分从“myfilename”中的字节偏移量 154260 开始，长度为 3。

给定这条信息，您可以通过在文件中跳到字节 154260 并读取 3 个字节来检测分配给此任务的记录。

# html - 通过 Html 页面查看源代码

> ID：11985880
> 
> 赞同：0
> 
> 时间：2012-08-16T11:09:12.353
> 
> 标签：html

嗨，我正在演示**CSS3中的新****html**标签，我正在制作一个文档，以便在比较源代码和输出时轻松查看和解释。而且它真的很难让我去源代码然后选择文件并在浏览器上浏览

 **如果我可以在同一个 html 页面上查看源代码和输出，那就太好了。

例如（我在下面附上的页面上说话）如果我选择源代码，则源代码必须显示在屏幕上或任何文本编辑器中。

我不知道是否可以这样做，如果可以的话，如果你们中的任何人能指导我，那就太好了。

![单击源代码链接时，必须查看源代码](../Images/f590861ddeb4824e6824bb7659f85e66.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:16:16.157

要仅获取一个元素的来源，请执行以下操作：

HTML: `<div id="one"><span id="two"></span></div>`
JS:

```
document.getElementById('one').innerHTML // returns <span id="two"></span>
document.getElementById('one').outerHTML // returns <div id="one"><span id="two"></span></div> 
```

要获取整个页面的来源，请执行以下操作：

```
document.doctype + document.documentElement.outerHTML 
```

`document.doctype`返回文档类型，并`document.documentElement.outerHTML`返回标签的`<html>`代码和其中的所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T14:42:02.283

使用所有现代浏览器中的开发工具（最先进的是 Chrome 和 Firefox）。

您通常使用 Ctrl-Uppercase-i 快捷方式打开此类工具集。

然后你就有了很多有用的工具，就像[这里描述的 Chrome](https://developers.google.com/chrome-developer-tools/docs/)或[这里的 Firefox](http://blog.mozilla.org/blog/2012/01/31/firefox-adds-powerful-new-developer-tools/)一样。

其中之一似乎正是您所需要的。例如，在 Chrome 中，第一个选项卡称为“元素”，[它向您展示了包含很多好东西的源代码](https://developers.google.com/chrome-developer-tools/docs/elements)（解释了带有原因的 css、鼠标悬停时显示的元素、搜索等）。

我建议您花时间阅读链接的文档，因为这是任何 Web 开发人员必不可少的工具。一旦您深入了解 javascript 或 css，您将无法停止使用这些工具。**

# android - gcm 通知没有在 android 手机上获取，服务器上的类型不匹配错误

> ID：11985881
> 
> 赞同：2
> 
> 时间：2012-08-16T11:09:16.050
> 
> 标签：android

伙计们，我在我的 android 应用程序中实现 GCM 时遇到问题，在我的应用程序中，当第一次实现 gcm 时，我收到了来自服务器的通知，但是当我更改了导致新 SHA1 的调试密钥存储时，我删除并重新创建了一个新的 gcm api那时我无法从我的自定义服务器接收通知。在我的服务器端，当我向 Google 发送通知时，我在 Microsoft dot net 中实现的自定义服务器导致类型不匹配错误，我已尽我所能找出这种类型不匹配是什么。

我制作了另一个测试应用程序并在那里尝试了通知，它运行成功，但不适用于我的应用程序

任何帮助，将不胜感激。

# javascript - 本地存储适配器简介

> ID：11985882
> 
> 赞同：1
> 
> 时间：2012-08-16T11:09:20.250
> 
> 标签：javascript, jquery, backbone.js, local-storage

在 Web 应用程序开发方面，我是一个新手。到目前为止，我所做的项目纯粹是由客户端和 Jquery 驱动的。

最近我发现 Javascript 有一个 MVC 框架（[http://backbonejs.org/](http://backbonejs.org/)）

这真的让我很兴奋，因为迄今为止我大约 90% 的经验都是使用 Javascript，因此在熟悉的编码语言中使用 MVC 框架的可能性实际上非常棒。

经过更多阅读和探索后，我发现了一个用于骨干网的本地存储适配器： [http ://documentcloud.github.com/backbone/docs/backbone-localstorage.html](http://documentcloud.github.com/backbone/docs/backbone-localstorage.html)

基本上，如果我正确理解了这一点 - 它将在 cookie 中存储和检索数据

因此，上述框架（骨干网）和插件（本地存储）将允许 Web 应用程序在“无服务器”环境中运行。

在我被任何技术人员钉死在十字架上之前——我确实明白这是一个非常慷慨、通用和简化的声明——但我现在只是想找出一些事情：

1.  我对框架的理解正确吗？
2.  有没有人有上述的开发经验？
3.  我在哪里可以获得有关开发使用 Backbone.js 的 MVC Web 应用程序的新手级教程

期待讨论和您的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:35:42.513

> 我对框架的理解正确吗？

首先，除了 Backbone.js 之外，还有几个类似“mvc”的 Javascript 框架（假设您认为backbone.js 是一个 mvc 框架，请查看这个 SO[问题](https://stackoverflow.com/questions/10745782/is-backbone-js-really-an-mvc)以及[官方文档](http://documentcloud.github.com/backbone/#FAQ-mvc)），例如[Ember.js](http://emberjs.com/)和[Knockout。 js](http://knockoutjs.com/) , [JavascriptMVC](http://javascriptmvc.com/) . 也就是说，本地存储是 HTML5 的一项功能，并不特定于主干.js（因此浏览器需要支持它，这是一个带有更多信息的 SO[问题](https://stackoverflow.com/questions/2800238/javascript-html5-localstorage)`localStorage`），主干.js localStorage 适配器所做的是保存将backbone.js 数据发送到localStorage 而不是服务器。

> 有没有人有上述的开发经验？

是的（对于初学者来说，您可以在 SO 上查看带有backbone.js 标记的问题......）。

> 我在哪里可以获得有关开发使用 Backbone.js 的 MVC Web 应用程序的新手级教程

查看此[站点](http://backbonetutorials.com/)以获取一些主干.js 教程。

# python-2.7 - Python：读取文件-修改行-写入输出

> ID：11985891
> 
> 赞同：0
> 
> 时间：2012-08-16T11:10:03.503
> 
> 标签：python-2.7

我有一个文件中的术语列表，我想阅读、修改每个术语并将新术语输出到新文件。新术语应如下所示：将原始术语的前两个字符放在引号中，添加“=>”，然后将原始术语放在引号和逗号中。

这是我正在使用的代码：

```
def newFile(newItem):
    original = line
    first = line[0:2]
    newItem = first+'=>'+original+',' 
    return newItem
input = open('/Users/george/Desktop/input.txt', 'r')
output = open('/Users/george/Desktop/output.txt', 'w')
collector = ''
for line in input: 
   if len(line) != 0:
       collector = newFile(input)
       output.write(''.join(collector))
   if len(line) == 0:
       input.close()
output.close() 
```

例如：如果 input.txt 文件中的术语是： term 1 term 2 term 3 term 4

输出是这样的：

```
te=>term 1
,te=>term 2
,te=>term 3
,te=>term 4    
, 
```

如何添加`''`前两个字母和术语？而为什么第二、三、四项都`,te`不像`te`它应该的样子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T11:21:34.207

而不是使用`collector`and`newFile()`你可以使用新变量：

```
modified_line = "'%s'=>'%s',"  % (line[:2], line.strip()) 
```

在你的循环中试试这个：

```
...
if len(line) > 2:
    output.write('%s\n' % (modified_line)) 
```

还：

*   如果可能，不要在程序中硬编码文件名，使用`sys.argv`标准输入/输出或配置文件；当然，如果您确定输入/输出名称，请使用它们
*   在`line[0:2]`你可以省略 0 并使用 line`[:2]`
*   你应该使用`try:`- 打开文件 - 读取文件等`finally:`关闭文件
*   你不需要检查 if `len(line) == 0`，`for`循环已经做了，你会收到带有 CRLF 的空行，但是输入文件的结尾是`for`循环结束的时候

# javascript - javascript让iframe成为父级

> ID：11985892
> 
> 赞同：0
> 
> 时间：2012-08-16T11:10:07.303
> 
> 标签：javascript, iframe

我的页面上有一个 iframe，它的域与我网站的域不同。我知道我无法从父窗口访问 iframe 内的任何内容，但我可以让 iframe 接管我的整个页面 - 即将父级重定向到 iframe 的 url？

到目前为止，我已经尝试过类似的事情

```
window.location.href = iframe.contentWindow.location.href; 
```

但是浏览器不允许这样做-我想它还不够聪明，无法意识到`=`分配是为了重定向而不是存储以供以后检查。

在所有现代浏览器上还有另一种方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:19:45.263

怎么样：

```
window.location = iframe.src; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T11:21:50.370

为什么不尝试使用 iframe src 属性？

用jQuery：

```
window.location.href = $('#iframeid').attr('src'); 
```

或者：

```
window.location.href = document.getElementById('#iframeid').src; 
```

# ios - 如何以编程方式在 iPad 的工具栏中添加 UISegmentedControl

> ID：11985894
> 
> 赞同：-1
> 
> 时间：2012-08-16T11:10:08.860
> 
> 标签：ios, ipad, uitoolbar, uisegmentedcontrol

我在 iPad 的工具栏中添加 UISegmentedControl 时遇到了一些奇怪的问题。我用根控制器创建了一个 UINavigationController，它具有以下方法：

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    UINavigationController *navigationController = [self navigationController];
    navigationController.toolbar.barStyle = UIBarStyleBlackOpaque;
    navigationController.toolbarHidden = NO;
}

- (NSArray *)toolbarItems
{
    UIBarButtonItem *flexibleSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:NULL];
    return [NSArray arrayWithObjects:[self segmentedControlItem], flexibleSpace, nil];
}

- (UISegmentedControl *)segmentedControl
{
    if (_segmentedControl) {
        return _segmentedControl;
    }

    NSArray *items = [NSArray arrayWithObjects:@"Segment 1", @"Segment 2", nil];
    _segmentedControl = [[UISegmentedControl alloc] initWithItems:items];
    _segmentedControl.segmentedControlStyle = UISegmentedControlStyleBar;

    return _segmentedControl;
}

- (UIBarButtonItem *)segmentedControlItem
{
    UIBarButtonItem *buttonItem = [[UIBarButtonItem alloc] initWithCustomView:self.segmentedControl];
    buttonItem.style = UIBarButtonItemStyleBordered;
    return buttonItem;
} 
```

但是在控制器出现后，segmentedControl 在工具栏上不可见。如何解决？我已经检查了segmentedControl 是否存在于工具栏项目中，它有大小，它没有隐藏，但是我看不到它。

```
(lldb) po [[[[[self navigationController] toolbar] items] objectAtIndex:0] customView]
(id) $3 = 0x08e39a10 <UISegmentedControl: 0x8e39a10; frame = (7 8; 300 30); opaque = NO; layer = <CALayer: 0x8e63230>> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:04:26.840

我有一个解决方法。`- (NSArray *)toolbarItems`如果要在工具栏中添加，覆盖似乎是不安全`UISegmentedControl`的。最好在控制器加载后添加一些方法来配置工具栏。

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    [self configureToolbar];
}

- (void)configureToolbar
{
    UINavigationController *navigationController = [self navigationController];
    navigationController.toolbar.barStyle = UIBarStyleBlackOpaque;
    navigationController.toolbarHidden = NO;
    // Add toolbar items here
    UIBarButtonItem *flexibleSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:NULL];
    self.toolbarItems = [NSArray arrayWithObjects:[self segmentedControlItem], flexibleSpace, nil];
} 
```

这种方法可以让你得到结果

# java - Java 服务器能否在一个端口上同时接受 SSL 和明文连接？

> ID：11985896
> 
> 赞同：3
> 
> 时间：2012-08-16T11:10:10.060
> 
> 标签：java, ssl, port

标题说了算。

如果我尝试将 ServerSocket 和 SSLServerSocket 绑定到同一个端口，我会收到错误消息。如果客户端尝试在没有 SSL 的情况下连接到 SSLServerSocket，accept() 方法将引发错误。如果客户端尝试通过 SSL 连接到 ServerSocket，我不知道如何建立安全连接。

甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T11:19:01.460

You can accept a normal socket connection and upgrade it to SSL/TLS at a later stage, using [`SSLSocketFactory.createSocket(Socket s, String host, int port, boolean autoClose)`](http://docs.oracle.com/javase/7/docs/api/javax/net/ssl/SSLSocketFactory.html#createSocket%28java.net.Socket,%20java.lang.String,%20int,%20boolean%29) (and `SSLSocket.setUseClientMode(false)` on the server side).

You'll need to defined a command in your plaintext protocol so that both sides can agree about an upgrade taking place (similarly to `STARTTLS` commands in SMTP or LDAP for example).

Alternatively, you could use port unification (as it [can be done with Grizzly](http://jfarcand.wordpress.com/2006/11/07/one-tcp-port-to-rule-them-all/)), whereby you try to detect whether the client initiates the connection with an SSL/TLS Client Hello message. It can be trickier to do, since you'd have to read ahead to detect the packet type (so you'd probably need to keep that buffer and pass its content into an `SSLEngine`, instead of being able to use the `SSLSocket` directly).

# javascript - 无法为 Highstock API 设置系列中的单个点颜色，它适用于 Highchart API

> ID：11985901
> 
> 赞同：1
> 
> 时间：2012-08-16T11:10:31.837
> 
> 标签：javascript, highcharts, highstock

我正在研究 Highstock，我正在尝试将颜色设置为 Highstock 中“数据”中的特定点，就像在[示例](http://www.highcharts.com/demo/spline-symbols/gray)中一样，它使用 Highchart API，但无论如何我都无法让它与 Highstock API 一起使用我设置了颜色，它没有显示在图表上。

有人可以帮忙吗？ [这是我到目前为止尝试过的](http://jsfiddle.net/Ey666/8/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T14:38:26.403

Highstock 默认禁用点标记，您需要明确启用它们，如下所示，

```
 plotOptions: {
        series: {
            marker: {
                enabled: true    
            }
        }
    }, 
```

API 参考：[http](http://api.highcharts.com/highstock#point.marker.enabled)
://api.highcharts.com/highstock#point.marker.enabled 示例：http: [//jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/ master/samples/stock/plotoptions/series-marker/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/plotoptions/series-marker/)

jsFiddle 为您的代码：http: [//jsfiddle.net/jugal/nrRDg/](http://jsfiddle.net/jugal/nrRDg/)

# objective-c - Objective C 中的默认列表？

> ID：11985910
> 
> 赞同：0
> 
> 时间：2012-08-16T11:11:27.280
> 
> 标签：objective-c

我想在运行时存储数据，我可以有一个链表并在运行时添加，但是由于我是 IOS 和目标 C 的新手，我们是否有任何可以添加数据的默认列表，（数据是两个和一个整数）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:15:12.257

Cocoa 提供了[`NSArray`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/cl/NSArray)和[`NSMutableArray`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)，一对类似于 Java`ArrayList`和 C#的有序容器`List`。您可以向 中添加值`NSMutableArray`，它会随着您添加更多元素而增长；`NSArray`是只读的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T11:16:44.000

您可以使用 .plist 文件来存储您的数据。阅读更多[“从 .plist 文件加载数据”](http://www.icodeblog.com/2009/02/14/loading-data-from-plist-files/)、[“如何在 iphone 中使用 plist？”](http://www.edumobile.org/iphone/iphone-programming-tutorials/how-to-use-plist-in-iphone/) 或像“从 .plist 加载数据”一样使用谷歌搜索。但是，您可以`NSArray`在运行时创建或类似的东西。如果你想深入了解，你必须阅读[ObjC Collections Programming Topics](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Collections/Collections.html#//apple_ref/doc/uid/10000034i)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T11:17:54.513

您可以根据需要使用[NSArray](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)或[NSMutableArray](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)或[NSDictionary](https://developer.apple.com/library/mac/#documentation/cocoa/reference/foundation/classes/nsdictionary_class/Reference/Reference.html)或[NSMutableDictionary](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsmutabledictionary_Class/Reference/Reference.html)。

NSArray：

```
NSArray *myArray;
NSDate *aDate = [NSDate distantFuture];
NSValue *aValue = [NSNumber numberWithInt:5];
NSString *aString = @"a string";
myArray = [NSArray arrayWithObjects:aDate, aValue, aString, nil]; 
```

NSMutableArray：

```
NSMutableArray *myArray = [[NSMutableArray alloc] init];
NSDate *aDate = [NSDate distantFuture];
NSValue *aValue = [NSNumber numberWithInt:5];
NSString *aString = @"a string";
[myArray addObject:aDate];
[myArray addObject:aValue];
[myArray addObject:aString]; 
```

NS词典：

```
NSDictionary * myDict = [NSDictionary dictionaryWithObjects:aDate, aValue, aString forKeys:firstDate, firstValue, firstString]; 
```

NSMutable字典：

```
NSString *aString = @"a string";
NSDate *aDate = [NSDate distantFuture];
NSValue *aValue = [NSNumber numberWithInt:5];
myDict = [[NSMutableDictionary alloc] init];
[myDict setObject:aString forKey:firstString];
[myDict setObject:aDate forKey:firstDate];
[myDict setObject:aValue forKey:firstValue]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T11:17:59.770

使用默认属性为您的数据创建一个类，并确保它继承 NSObject 然后使用 NSMUtableArray 向列表中添加/删除元素。

```
// in the .h file of your object
@interface MyObject : NSObject {
    NSString* strAttribute1;
    // add more attributes as you want
}

@property (nonatomic, retain) NSString* strAttribute1;

@end

// then in the .m file
// do not forget the #import ""
@implement MyObject
@synthesize strAttribute1;

// override the dealloc to release the retained objects
@end 
```

然后在你想要列出这个对象的代码中

```
NSMutableArray* myArray = [[NSMutableArray alloc] init];

// add elements and iterate through them

// do not forgot to free the memory if you are not using ARC
[myArray release]; 
```

# scala - Scala - 类型擦除？

> ID：11985912
> 
> 赞同：0
> 
> 时间：2012-08-16T11:11:29.690
> 
> 标签：scala, types, type-erasure

> **可能重复：**
> [如何绕过 Scala 上的类型擦除？或者，为什么我不能获取我的集合的类型参数？](https://stackoverflow.com/questions/1094173/how-do-i-get-around-type-erasure-on-scala-or-why-cant-i-get-the-type-paramete)

我运行了以下代码：

```
scala>  var s = new Stack()push(1)
s: scalatest.Stack[Int] = 1 

scala>  s match { case s : Stack[String] => print("Hello")}
<console>:12: warning: non variable type-argument String in type pattern scalatest.Stack[String] is unchecked since it is eliminated by erasure
              s match { case s : Stack[String] => print("Hello")
} 
```

Stack 是取自[http://www.scala-lang.org/node/129](http://www.scala-lang.org/node/129)的类。如果我在没有`-unchecked`标志的情况下运行此代码，它将打印“Hello”。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:26:09.213

问题是你匹配`s`的是 type `Stack[String]`。在运行时，可以确定 if `s`is of type `Stack`，但由于 Java 的[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)，无法确定 if `s`is of type`Stack[String]`等`Stack[Int]`。所以无论类型参数是什么，它都会被`case`表达式匹配。这就是 Scala 发出警告的原因。就像你匹配一样

```
s match { case s : Stack[_] => print("Hello")} 
```

（这将在没有警告的情况下编译）。

* * *

**编辑：**一种解决方法（也适用于 Java）是创建一个不再具有类型参数的特定类。例如：

```
import scala.collection.mutable.Stack;

object Test extends App {
  class MyStack extends Stack[Int];
  class MyOtherStack extends Stack[String];

  val s: Stack[_] = new MyStack().push(1);

  s match {
    case s : MyOtherStack => print("Hello String");
    case s : MyStack => print("Hello Int");
  }
} 
```

它有一个缺点，您不能将它用于不可变容器，因为它们的方法会创建新对象，并且它们不会是这些特定子类的实例。

# php - 如何将数据从 JSON 检索到组合框？

> ID：11985914
> 
> 赞同：1
> 
> 时间：2012-08-16T11:11:36.133
> 
> 标签：php, json

下面的代码是 json(a part only) ，我必须将整个货币放入一个组合框中。

```
{
    "AED": "United Arab Emirates Dirham",
    "AFN": "Afghan Afghani",
    "ALL": "Albanian Lek",
    "AMD": "Armenian Dram",
    "ANG": "Netherlands Antillean Guilder",
    "AOA": "Angolan Kwanza",
    "ARS": "Argentine Peso"
} 
```

我已经尝试到这里...

```
$ch2 = curl_init("http://openexchangerates.org/api/currencies.json");
curl_setopt($ch2, CURLOPT_RETURNTRANSFER, 1);

// Get the data:
$json2 = curl_exec($ch2);
curl_close($ch2);

$currency->LKR; // Here I can retreive a single line

// Decode JSON response:
$currency = json_decode($json2); 
```

我必须将整个货币放入组合框中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T11:15:23.810

假设您的 $currency 数组看起来像

```
$currency = array('AED' => 'United Arab Emirates Dirham' ...... ); 
```

//然后只做foreach

```
$opts = '';
foreach($currency as $key => $val)
{

$opts .= '<option value="'.$key.'">'.$val.'</option>';
}

echo  '<select name="currency">'.$opts.'</select>; 
```

这应该输出类似...

```
<select name="currency">
<option value="AED">United Arab Emirates Dirham</option>
<option value="AFN">Afghan Afghani</option>

.....

</select> 
```

# javascript - 调用 javascript / jQuery 函数

> ID：11985915
> 
> 赞同：0
> 
> 时间：2012-08-16T11:11:38.043
> 
> 标签：javascript, jquery, html, image, slider

我正在使用以下使用一些 jQuery 的 javascript，我对此都不了解。这是一个简单的图像滑块：

```
/*!
 * jQuery wmuSlider v2.1
 * 
 * Copyright (c) 2011 Brice Lechatellier
 * http://brice.lechatellier.com/
 *
 * Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php
 */

;(function($) {

$.fn.wmuSlider = function(options) {

    /* Default Options
    ================================================== */       
    var defaults = {
        animation: 'fade',
        animationDuration: 600,
        slideshow: true,
        slideshowSpeed: 7000,
        slideToStart: 0,
        navigationControl: true,
        paginationControl: true,
        previousText: 'Previous',
        nextText: 'Next',
        touch: false,
        slide: 'article',
        items: 1
    };
    var options = $.extend(defaults, options);

    return this.each(function() {

        /* Variables
        ================================================== */
        var $this = $(this);
        var currentIndex = options.slideToStart;
        var wrapper = $this.find('.wmuSliderWrapper');
        var slides = $this.find(options.slide);
        var slidesCount = slides.length;
        var slideshowTimeout;
        var paginationControl;
        var isAnimating;

        /* Load Slide
        ================================================== */ 
        var loadSlide = function(index, infinite, touch) {
            if (isAnimating) {
                return false;
            }
            isAnimating = true;
            currentIndex = index;
            var slide = $(slides[index]);
            $this.animate({ height: slide.innerHeight() });
            if (options.animation == 'fade') {
                slides.css({
                    position: 'absolute',
                    opacity: 0
                });
                slide.css('position', 'relative');
                slide.animate({ opacity:1 }, options.animationDuration, function() {
                    isAnimating = false;
                });
            } else if (options.animation == 'slide') {
                if (!infinite) {
                    wrapper.animate({ marginLeft: -$this.width() / options.items * index }, options.animationDuration, function() {
                        isAnimating = false;
                    });
                } else {
                    if (index == 0) {
                        wrapper.animate({ marginLeft: -$this.width() / options.items * slidesCount }, options.animationDuration, function() {
                            wrapper.css('marginLeft', 0);
                            isAnimating = false;
                        });
                    } else {
                        if (!touch) {
                            wrapper.css('marginLeft', -$this.width() / options.items * slidesCount);
                        }
                        wrapper.animate({ marginLeft: -$this.width() / options.items * index }, options.animationDuration, function() {
                            isAnimating = false;
                        });
                    }
                }
            }

            if (paginationControl) {
                paginationControl.find('a').each(function(i) {
                    if(i == index) {
                        $(this).addClass('wmuActive');
                    } else {
                        $(this).removeClass('wmuActive');
                    }
                });
            }    

            // Trigger Event
            $this.trigger('slideLoaded', index);             
        };

        /* Navigation Control
        ================================================== */ 
        if (options.navigationControl) {
            var prev = $('<a class="wmuSliderPrev">' + options.previousText + '</a>');
            prev.click(function(e) {
                e.preventDefault();
                clearTimeout(slideshowTimeout);
                if (currentIndex == 0) {
                    loadSlide(slidesCount - 1, true);
                } else {
                    loadSlide(currentIndex - 1);
                }
            });
            $this.append(prev);

            var next = $('<a class="wmuSliderNext">' + options.nextText + '</a>');
            next.click(function(e) {
                e.preventDefault();
                clearTimeout(slideshowTimeout);
                if (currentIndex + 1 == slidesCount) {    
                    loadSlide(0, true);
                } else {
                    loadSlide(currentIndex + 1);
                }
            });                
            $this.append(next);
        }

        /* Pagination Control
        ================================================== */ 
        if (options.paginationControl) {
            paginationControl = $('<ul class="wmuSliderPagination"></ul>');
            $.each(slides, function(i) {
                paginationControl.append('<li><a href="#">' + i + '</a></li>');
                paginationControl.find('a:eq(' + i + ')').click(function(e) {    
                    e.preventDefault();
                    clearTimeout(slideshowTimeout);   
                    loadSlide(i);
                });                
            });
            $this.append(paginationControl);
        }

        /* Slideshow
        ================================================== */ 
        if (options.slideshow) {
            var slideshow = function() {
                if (currentIndex + 1 < slidesCount) {
                    loadSlide(currentIndex + 1);
                } else {
                    loadSlide(0, true);
                }
                slideshowTimeout = setTimeout(slideshow, options.slideshowSpeed);
            }
            slideshowTimeout = setTimeout(slideshow, options.slideshowSpeed);
        }

        /* Resize Slider
        ================================================== */ 
        var resize = function() {
            var slide = $(slides[currentIndex]);
            $this.animate({ height: slide.innerHeight() });
            if (options.animation == 'slide') {
                slides.css({
                    width: $this.width() / options.items
                });
                wrapper.css({
                    marginLeft: -$this.width() / options.items * currentIndex,
                    width: $this.width() * slides.length
                });                    
            }    
        };

        /* Touch
        ================================================== */
        var touchSwipe = function(event, phase, direction, distance) {
            clearTimeout(slideshowTimeout);              
            if(phase == 'move' && (direction == 'left' || direction == 'right')) {
                if (direction == 'right') {
                    if (currentIndex == 0) {
                        wrapper.css('marginLeft', (-slidesCount * $this.width() / options.items) + distance);
                    } else {
                        wrapper.css('marginLeft', (-currentIndex * $this.width() / options.items) + distance);
                    }
                } else if (direction == 'left') {
                    wrapper.css('marginLeft', (-currentIndex * $this.width() / options.items) - distance);
                }
            } else if (phase == 'cancel' ) {
                if (direction == 'right' && currentIndex == 0) {
                    wrapper.animate({ marginLeft: -slidesCount * $this.width() / options.items }, options.animationDuration);                
                } else {
                    wrapper.animate({ marginLeft: -currentIndex * $this.width() / options.items }, options.animationDuration);  
                }
            } else if (phase == 'end' ) {
                if (direction == 'right') {
                    if (currentIndex == 0) {
                        loadSlide(slidesCount - 1, true, true);
                    } else {
                        loadSlide(currentIndex - 1);
                    }
                } else if (direction == 'left')    {        
                    if (currentIndex + 1 == slidesCount) {
                        loadSlide(0, true);
                    } else {
                        loadSlide(currentIndex + 1);
                    }
                } else {
                    wrapper.animate({ marginLeft: -currentIndex * $this.width() / options.items }, options.animationDuration);
                }
            }            
        };
        if (options.touch && options.animation == 'slide') {
            if (!$.isFunction($.fn.swipe)) {
                $.ajax({
                    url: 'jquery.touchSwipe.min.js',
                    async: false
                });
            }
            if ($.isFunction($.fn.swipe)) {
                $this.swipe({ triggerOnTouchEnd:false, swipeStatus:touchSwipe, allowPageScroll:'vertical' });
            }
        }

        /* Init Slider
        ================================================== */ 
        var init = function() {
            var slide = $(slides[currentIndex]);
            var img = slide.find('img');
            img.load(function() {
                wrapper.show();
                $this.animate({ height: slide.innerHeight() });
            });
            if (options.animation == 'fade') {
                slides.css({
                    position: 'absolute',
                    width: '100%',
                    opacity: 0
                });
                $(slides[currentIndex]).css('position', 'relative');
            } else if (options.animation == 'slide') {
                if (options.items > slidesCount) {
                    options.items = slidesCount;
                }
                slides.css('float', 'left');                    
                slides.each(function(i){
                    var slide = $(this);
                    slide.attr('data-index', i);
                });
                for(var i = 0; i < options.items; i++) {
                    wrapper.append($(slides[i]).clone());
                }
                slides = $this.find(options.slide);
            }
            resize();

            $this.trigger('hasLoaded');

            loadSlide(currentIndex);
        }
        init();

        /* Bind Events
        ================================================== */
        // Resize
        $(window).resize(resize);

        // Load Slide
        $this.bind('loadSlide', function(e, i) {
            clearTimeout(slideshowTimeout);
            loadSlide(i);
        });

    });
}

})(jQuery); 
```

我想要做的是使用某种“onclick”事件更改滑块图像索引。例如：

```
<a href="javascript:void(0);" onclick="loadSlide(3, false);"><img src="images/IMG_5137_s.jpg" width="100%" /></a> 
```

然而，这并没有调用 javascript 文件中的“loadslide”函数，可能是因为我不知道我在做什么......对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:27:36.917

您可以检查 jQuery 插件创作的这个答案： [如何创建简单的 jQuery 插件？](https://stackoverflow.com/questions/11338967/jquery-issue-on-extending-jquery-functionality/11339046#11339046)

这是简单的[jsFiddle 示例，上面有解释](http://jsfiddle.net/ult_combo/5yKr6/6/)。

# objective-c - 确定 NSDate 的季节

> ID：11985919
> 
> 赞同：2
> 
> 时间：2012-08-16T11:12:00.557
> 
> 标签：objective-c, nsdate, foundation

我正在尝试编写一个类别方法来告诉我给定的 NSDate 属于哪个季节。例如：

```
if ([myDate season] == dateSeasonWinter) {
     [self bringJacket]
} 
```

这个想法很简单，但它需要与年份无关的事实使事情变得更加复杂，但我无法弄清楚如何优雅地做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:34:29.193

非常酷的想法，但你必须以多种方式对其进行本地化。这是我能想到的几个例子：

*   与欧洲的冬天相比，澳大利亚的冬天有不同的温度
*   根据[维基百科的文章](http://en.wikipedia.org/wiki/Season)，印度有 6 个不同的季节，而欧洲有 4 个
*   在某些地区，动物[可以延长季节](http://en.wikipedia.org/wiki/Punxsutawney_Phil)

所以，再一次，这是一个好主意，但我认为你必须改进范围以使这项任务可行 直接实施会`switch`超过`NSDateComponents` `month`财产，但我认为这不是你要找的:)

# mercurial - TortoiseHg - 在 Win7 上似乎很慢

> ID：11985925
> 
> 赞同：0
> 
> 时间：2012-08-16T11:12:19.160
> 
> 标签：mercurial, dvcs, tortoisehg

我最近在我们的网络上设置了一个带有 TortoiseHg 的 Mercurial 克隆 - 添加文件、执行提交等似乎需要很长时间。它通常一次挂起 3-5 分钟 & 似乎它真的不喜欢任何类型在 TortoiseHg 中单击鼠标右键。

我对 Mercurial 还很陌生，所以可能有一些设置可以加快这一切，但我不确定如何最好地解决这个问题，我的电脑规格如下：Intel Core 2 Quad CPU Q8300 @ 2.50Ghz 4GB RAM（3GB 可用）

实际的克隆相当大 - 总共只有 200MB 左右，我不确定这个大尺寸是否会导致速度变慢，或者克隆本身不在我的机器上而是在我们的本地网络上。

关于如何最好地优化一切的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:31:25.260

首先，我会尝试从命令行执行相同的反复无常的操作，以排除缓慢的 GUI。

在我的工作中，我们有相同的设置。“主”存储库位于映射的网络驱动器上。访问它很慢，所以我制作了一个本地克隆以便快速访问，并且只在必要时进行同步。

现在当我想到它时，为什么不在本地机器上克隆？这不是 dvcs 的全部意义吗？

# php - 在 mail() 函数中，'From:' 只显示第一个世界

> ID：11985927
> 
> 赞同：-1
> 
> 时间：2012-08-16T11:12:28.400
> 
> 标签：php, email

我有这个代码，它应该发送邮件到一个地址。问题是：在标题中我应该得到像“Bob Marley”这样的名字，但如果名字大于一个单词，它会说“（未知发件人）”。如果名称恰好是一个词，它就可以工作。如果我将 $_POST['nume'] 值连接到 $message，它就在那里。出于某种原因，在标题中，它不能正常工作。

```
<form name="contact" method="post" class="clearfix" id="formular">
   <input class="inputC" type="text" placeholder="Full Name" id="numeCo" onClick="clearValue(this.id)" onBlur="testValue(this.id)" name="nume"/>

   <input class="inputC" type="text" placeholder="E-mail Address" id="adresaCo" onClick="clearValue(this.id)" onBlur="testValue(this.id)" name="adrMail"/>

   <input class="inputC" type="text" placeholder="What services do you need?" id="serviciiCo" onClick="clearValue(this.id)" onBlur="testValue(this.id)" name="servicii"/>

   <div class="sumarise">
   <textarea class="textAreaC" placeholder="Please summarize your project..." id="textArCo" onClick="clearValue(this.id)" onBlur="testValue(this.id)" name="descriere"></textarea>
   </div>
   <div class="sB clearfix">
   <input class="submitC" type="submit" value="Send Message" />
   </div>                              
   </form>
   <?php
   if(isset($_POST['nume'], $_POST['adrMail'], $_POST['descriere']))
    {
     /*echo "<script> return checkForm();</script>";*/
     $to = "radu.mircea.andrei@gmail.com";                                                                              
     $subject = $_POST['servicii'];
     $message = $_POST['descriere'];                                        
     $name = $_POST['nume'];
     $headers= "From: ".$name."\n".'Reply-To: '.$_POST['adrMail'];
     mail($to,$subject,$message,$headers);                                      
    }
  ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:21:43.563

“to”地址需要符合[RFC 2822](http://www.faqs.org/rfcs/rfc2822.html) - 也许 from 地址也可以：

```
From: Birthday Reminder <birthday@example.com> 
```

请参阅[PHP 邮件示例](http://www.php.net/manual/en/function.mail.php)。

PHP 文档还指出`\n`应该是有效的，如果您遇到问题，建议您这样做`\r\n`- 所以我认为这不太可能是问题，尽管尝试这样做也没有害处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T11:24:27.027

我将把它作为答案，因为我认为这对你来说非常重要。

`mail()`像使用用户定义的标头一样使用该功能时存在漏洞`From`。在这里看到这个问题：[正确防止 PHP 中的邮件注入](https://stackoverflow.com/questions/11952473/proper-prevention-of-mail-injection-in-php/11952659#comment15926336_11952659)

但是要解决您的实际问题：

*   也尝试使用 \r\n （就像@Sudhir 说的那样）（我发现 \r\n 更符合某些邮件客户端）
*   也像@Sohnee 说的那样输入电子邮件

# jquery - 如何让 jQuery .html() 与 jquery prettyPhoto 灯箱交互？

> ID：11985929
> 
> 赞同：0
> 
> 时间：2012-08-16T11:12:30.510
> 
> 标签：jquery, prettyphoto

我有一个名为 toprightbox 的 div，我正在使用 jquery 在单击时更改其 html：

```
$(".icon").click(function(){
$("#toprightbox").html('<a rel="prettyPhoto[artwork]" href="large.jpg">
<img src="thumbnail.jpg"  width="100" height="100" /></a>'); 
} 
```

上面通过 jQuery 对 html 的更改调用了 prettyPhoto 灯箱以在 prettyPhoto 灯箱中打开更大的图像...

我想知道为什么这不起作用。生成了链接（）和 html，但显然在 jQuery 代码中进行 jQuery 调用似乎是不可能的。PrettyPhoto 灯箱不工作...请帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:19:15.470

It works. The problem is the order in which you call the code.

1.  Your page is loaded, all initial html is being rendered.
2.  The plugin you are using is called in the `$(document).ready(function() { .... });` part of your page (I hope!). If you call your lightbox plugin there (say, on the items with a certain class), it will apply it to all items **currently falling within the bounds of that selector**.
3.  Afterwards, at some point in time, the user clicks an ".icon" element. Therefore, the new link is added. Your plugin does not work because it was never applied to that newly created link.

So you'll have to call your plugin again in a new step 4.

# java - 如果文件 java 中有一个以上 (\t)，则 StringTokenizer 从下一行开始

> ID：11985937
> 
> 赞同：-2
> 
> 时间：2012-08-16T11:13:13.690
> 
> 标签：java, file, stringtokenizer

我正在根据`\t` 我想要的内容解析文件数据，如果发现不止一个`\t`，则从下一个新行开始解析并从 0 开始 arraylist 单词。

```
public static void readFile() throws IOException {
  String line;
  ArrayList<String> words = new ArrayList<String>();

  try {
    BufferedReader inFile = new BufferedReader (new FileReader ("/weather.txt"));

    while ((line = inFile.readLine()) != null) {
      StringTokenizer token= new StringTokenizer(line,"\t");
      while (token.hasMoreTokens()) {   
        words.add(token.nextToken());
      }

      /*
       * function to print the values
       */                   
      getMetadataTriple(words);
    }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:56:55.483

尝试以下正则表达式解决方案：

```
public static void readFile() throws IOException
{
    String line;
    ArrayList<String> words = new ArrayList<String>();    
    try
    {
        BufferedReader inFile = new BufferedReader(new FileReader("weather.txt"));

        while ((line = inFile.readLine()) != null)
        {
            String[] temp = line.split("\\t");
            for (String s : temp)
            {
                if(!s.isEmpty())
                {
                    words.add(s);
                }
                else //another \t
                {
                    words.clear();
                    break;
                }   
            }

            /*
             * function to print the values
             */
            getMetadataTriple(words);
        }
    }
    catch (Exception e)
    {
        e.printStackTrace();
    }

} 
```

# ios - 为什么当我点击具有自己处理程序的元素时，委托调用 didSelectRowAtIndexPath？

> ID：11985938
> 
> 赞同：0
> 
> 时间：2012-08-16T11:13:16.743
> 
> 标签：ios, uitableview

我有一种情况，`UITableViewCell`子类中的元素要么具有轻击手势识别器，要么具有`UIButtons`.

当我点击这些时，不仅它的处理程序被调用，而且`didSelectRowAtIndexPath:`委托方法也被调用。

现在，理想情况下，如果用户没有点击任何这些元素，则应该将其传递到下面的视图（即表格视图或表格单元格）并进行处理。

为什么这些元素不吞噬触摸并阻止 TableView 委托方法触发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:27:21.053

您需要覆盖以下功能..

```
-(BOOL) gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch 
```

在这里，您可以检查触摸是否是从您选择的控件启动的，如果是这种情况，您需要返回 NO 以防止在此处发生默认操作。如果要调用之前定义的处理程序，则返回 YES

```
-(BOOL) gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch{
    if(touch.view == self.playButton ) {
        return NO;
    }
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:05:31.520

我“破解”了一个解决方案，它在我的 UITableViewCell 子类的 contentView 上放置了一个 tapGesture 识别器，其委托是我的自定义 UITableViewController 子类。我使用一个空的 didSelectRowAtIndexPath: 实现。委托方法是

```
- (void)didSelectTableCell:(MyTableViewCell*)aCell; 
```

这就是工作。只需要记住何时创建单元格以确保我设置了委托。

不优雅，但工作正常。

# ssrs-2008 - 如何限制页面中的行数和列数

> ID：11985941
> 
> 赞同：1
> 
> 时间：2012-08-16T11:13:24.280
> 
> 标签：ssrs-2008

我使用矩阵来显示数据。现在我想限制页面中显示的行数和列数。我试过 Ceiling(Fields!RowNumber(Nothing)/20) 但只有一列会显示 20 行。我想要每页 5 列和 10 行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:04:44.707

我有一个类似的问题，终于在这里找到了答案：

[http://blogs.msdn.com/b/robertbruckner/archive/2008/10/13/repeat-header-and-visible-fixed-header-table.aspx](http://blogs.msdn.com/b/robertbruckner/archive/2008/10/13/repeat-header-and-visible-fixed-header-table.aspx)

另外这里是这个问题的另一个链接：

[http://www.sqlchick.com/entries/2010/8/17/repeating-column-headings-other-advanced-tablix-member-prope.html](http://www.sqlchick.com/entries/2010/8/17/repeating-column-headings-other-advanced-tablix-member-prope.html)

这不是很清楚，但是在单击高级模式后，请确保在“行组”部分下突出显示 STATIC，然后更改提供的属性。

再次不确定这是否正是您想要的，但我认为它值得一看。

# java - 将 ImageReader 从 jar 添加/删除到 ImageIO-registry

> ID：11985945
> 
> 赞同：1
> 
> 时间：2012-08-16T11:13:56.763
> 
> 标签：java, javax.imageio, jai

在 jar jai_imageio.jar 中有类：

```
com.sun.media.imageioimpl.plugins.jpeg.CLibJPEGImageReader 
```

所以我将 jai_imageio.jar（和 jai_core.jar、jai_codec.jar）添加到类路径中。但是 ImageIO 似乎无法访问此类。所以这段代码：

```
ImageIO.scanForPlugins();
IIORegistry.getDefaultInstance().registerApplicationClasspathSpis();
Iterator<ImageReader> ir = ImageIO.getImageReadersByFormatName("jpeg");
while(ir.hasNext()) {
    ImageReader r = ir.next();
    System.out.println("can read raster: " + r.canReadRaster());
    System.out.println(r);
} 
```

结果如下输出：

```
can read raster: true
com.sun.imageio.plugins.jpeg.JPEGImageReader@54520eb 
```

在 99% 的机器上。但在一台机器上，它会产生以下输出：

```
Can read raster: false
com.sun.media.imageioimpl.plugins.jpeg.CLibJPEGImageReader@163e9a1
Can read raster: true
com.sun.imageio.plugins.jpeg.JPEGImageReader@10cecb2 
```

为什么会发生？我应该做更多的事情，只是将带有 ImageIO 插件的 jar 放在类路径上吗？我可以以某种方式从 ImageIO-Registry 卸载 ImageReader 吗？

**背景**

实际上我的问题是一些外部不可更改的代码应该使用 ImageIO Registry 中的第一个 ImageReader 来读取光栅。但不幸的是，在一台 PC 上，第一个 ImageReader 是 CLibJPEGImageReader。JDK 和类路径是相同的，因此 CLibJPEGImageReader 应该始终在注册表中，如果在类路径上放置一个带有插件的 jar 足以使其对 ImageIO 可见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T03:48:43.893

最可能的原因是您使用 CLibJPEGImageReader 的机器安装了 JAI ImageIO 库 ( [http://java.net/projects/jai-imageio](http://java.net/projects/jai-imageio) )。

为什么其他不起作用（除了显而易见的）是因为您在 64 位系统上安装了 32 位版本的库，而没有安装 multilib 库（[https://wiki.archlinux.org/ index.php/Arch64_FAQ](https://wiki.archlinux.org/index.php/Arch64_FAQ)）。

# php - Doctrine 2 坚持在多对一关系中保留已管理的实体

> ID：11985953
> 
> 赞同：8
> 
> 时间：2012-08-16T11:14:34.507
> 
> 标签：php, doctrine-orm

我有一个包含部门的数据库表。我有另一张桌子，里面有人。正如您所期望的那样，一个部门包含很多人，而一个人属于一个部门。

当我想将一个新人持久保存到数据库时，我创建了一个 Person 对象并尝试将其 Department 属性设置为由实体管理器管理的**现有Department 对象。**但是，当我尝试坚持我的新 Person 时，我得到一个异常：

> 通过关系 'Entities\Person#department' 找到了一个新实体，该关系未配置为实体的级联持久化操作：Entities\Department@0000000016abe202000000000d29dd37。要解决这个问题：要么在这个未知实体上显式调用 EntityManager#persist()，要么配置级联在映射中保持此关联，例如 @ManyToOne(..,cascade={"persist"})。

我不完全理解该部门是“未知实体”的异常部分，因为我通过实体管理器提取了它。

`cascade: ["persist"]`正如异常所暗示的，我在 yml 元数据 ( ) 中插入了一个级联。然后我的人被保存了，但我最终在部门表中得到了一个**重复**的部门，并带有一个新的 ID。

这一定是一个非常常见的用例。我在下面包含了我的代码和元数据。我应该做出哪些改变？

元数据：

```
Entities\Person
  type: entity
  table: people
  fields:
    ...
    departmentId:
      type: integer
      unsigned: false
      nullable: false
      column: department_id
    ...
  manyToOne:
    department:
      targetEntity: Entities\Department
      joinColumn: department_id
      referenceColumnName: id 
```

代码：

```
$department = $em->getRepository('Department')->findOneBy(array('name' => $departmentName);

$person = new Person();
$person->setName('Joe Bloggs');
$person->setDepartment($department);

$em->persist($person);
$em->flush(); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-17T10:34:06.930

该问题是由于使用实体管理器的不同实例首先获取部门，然后持久化人员而引起的。

我的实体管理器现在是一个单例，因此无论哪个类请求实体管理器，都会获得相同的实例。

# java - 在 Spring MVC 中启用完整的路径日志记录

> ID：11985954
> 
> 赞同：0
> 
> 时间：2012-08-16T11:14:35.827
> 
> 标签：java, spring, debugging, spring-mvc, log4j

我在我的 log4j.properties 文件中写了以下内容

`log4j.appender.stdout=org.apache.log4j.ConsoleAppender log4j.appender.stdout.Target=System.out log4j.appender.stdout.layout=org.apache.log4j.PatternLayout log4j.appender.stdout.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n`

`log4j.logger.org.springframework.web = TRACE, stdout`

但我只是得到初始化记录。我应该怎么做才能获得详细的日志记录，以便每当我在浏览器中输入 url 时都可以得到跟踪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:39:55.767

记录程序的执行非常简单：

1) 在 pom.xml 中添加 log4j 依赖

```
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-log4j12</artifactId>
    <version>1.4.2</version>
</dependency> 
```

2）在web.xml中添加一个Listner类

```
<listener>
    <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
</listener> 
```

3）然后在web.xml中添加log4jConfigLocation

```
<context-param>
    <param-name>log4jConfigLocation</param-name>
    <param-value>/WEB-INF/classes/log4j.properties</param-value>
</context-param> 
```

然后按如下方式添加您的 log4j 属性：

```
# Direct log messages to a log file
log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.File=C:\\loging.log
log4j.appender.file.MaxFileSize=1MB
log4j.appender.file.MaxBackupIndex=1
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n

# Direct log messages to stdout
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Target=System.out
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n

# Root logger option
log4j.rootLogger=debug, file, stdout 
```

4) 转到您的应用程序导入 log4j 包中的特定 java 文件，然后实现您的日志记录机制

5）现在您应该能够跟踪日志

# windows - 在 Windows 8 中安装 Visual Studio 2012

> ID：11985957
> 
> 赞同：2
> 
> 时间：2012-08-16T11:14:54.490
> 
> 标签：windows, visual-studio

我最近安装了 Windows 8 Preview。我想安装 Visual Studio 2012。问题是 VS 2012 正在寻找 .Net 4.5.x。当我安装 .Net 4.5.x 时，它告诉我它已经是操作系统的一部分。任何解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T00:01:17.580

最新的 Visual Studio RTM 版本不会安装在 Windows 8 Release Preview 上。您可以尝试其中一种 RC 版本：

Microsoft Visual Studio Ultimate 2012 RC [http://www.microsoft.com/en-us/download/details.aspx?id=29917](http://www.microsoft.com/en-us/download/details.aspx?id=29917)

适用于 Windows 8 的 Microsoft Visual Studio Express 2012 RC [http://www.microsoft.com/en-us/download/details.aspx?id=29915](http://www.microsoft.com/en-us/download/details.aspx?id=29915)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T07:12:07.940

请格式化系统并安装 WINDOWS 8 和 VS 2012 的 RTM Builds

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T15:08:05.360

为了解决这个问题，通过 Microsoft Dream Spark 下载 Visual Studio 2012，而不是任何其他来源，我在两台不同的机器上遇到了同样的问题......这两个都解决了。

Dream Spark 链接：[https ://www.dreamspark.com/Product/Product.aspx?productid=44](https://www.dreamspark.com/Product/Product.aspx?productid=44)

我希望这对每个人都有帮助。

谢谢安德鲁。

# html - 自定义渲染器添加的自定义属性出现在错误的 HTML 元素中

> ID：11985959
> 
> 赞同：1
> 
> 时间：2012-08-16T11:15:04.437
> 
> 标签：html, jsf, jsf-2, renderer

我必须为`<h:commandLink/>`标签编写一个自定义渲染器来支持`data-*`为了将 JSF 2.1 与 jQuery 移动框架一起使用，

我的 JSF 标记和此标记生成的输出如下：

```
 <h:commandLink value="Prev" data-theme="e" data-role="button" data-inline="true" data-mini="true" data-icon="arrow-l"/>
           <h:commandLink value="Page 1 of 3" data-theme="e" data-role="button" data-inline="true" data-mini="true"/>
           <h:commandLink value="Next" data-theme="e" data-role="button" data-inline="true" data-mini="true" data-icon="arrow-r" data-iconpos="right"/> 
```

![在此处输入图像描述](../Images/4dc8a65b14385bbe5bd7c677648f60cb.png)

很明显，我的自定义渲染器正确渲染了第二个和第三个`<h:commandLink/>`标签，但不是第一个。似乎`data-*`属于第一个标签的属性是用直接父级呈现的`<div/>`标签呈现的。这似乎是 Mojarra 的一个奇怪（和错误）的行为（我使用`V 2.1.11`）。请告诉我如何克服这个问题？

我的自定义渲染器代码如下：

```
public class MyCommandLinkRenderer extends CommandLinkRenderer {

    @Override
    public void encodeBegin(FacesContext context, UIComponent component) {

        String[] attributes = {"data-theme", "data-role", "data-icon", "data-inline", "data-mini", "data-iconpos"};

        ResponseWriter writer = context.getResponseWriter();
        try {
            for (String attribute : attributes) {
                String value = (String) component.getAttributes().get(attribute);
                if (value != null) {
                    writer.writeAttribute(attribute, value, attribute);
                    System.out.println(attribute + " " + value);
                }
            }
            super.encodeBegin(context, component);
        } catch (Exception e) {
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T11:18:43.093

You must call `super.encodeBegin()` **before** writing the attributes.

Otherwise you're writing the attributes to the previous HTML element, as confirmed by the generated HTML output. The `super.encodeBegin()` starts the new HTML element.

This is just a bug in your own code, not in Mojarra.

* * *

**Update**: also, overriding the `encodeBegin()` was not right in first place. You should rather be overriding the `LinkRenderer#writeCommonLinkAttributes()` method.

```
@Override
protected void writeCommonLinkAttributes(ResponseWriter writer, UIComponent component) throws IOException {
    super.writeCommonLinkAttributes(writer, component);

    // ...
} 
```

It does by the way then not matter if you call `super` before or after your job.

# winapi - CopyItems 函数挂钩崩溃

> ID：11985969
> 
> 赞同：1
> 
> 时间：2012-08-16T11:15:49.857
> 
> 标签：winapi, visual-c++, api-hook

我正在尝试挂钩 CopyItems 函数，它工作正常，但是当我尝试在回调函数中调用 Real CopyItems 函数时，它会崩溃，我的代码如下，请帮助我。

```
 PVOID GetInterfaceMethod(PVOID intf, DWORD methodIndex)
 {
  return *(PVOID*)(*(DWORD*)intf + methodIndex * 4);
 }

typedef HRESULT (WINAPI  *CopyItemsNext)(IUnknown *punkItems,IShellItem *psiDestinationFolder);
CopyItemsNext Real_CopyItems = NULL;
CopyItemsNext Actual_CopyItems;

HRESULT WINAPI CopyItemsCallback(IUnknown *punkItems,IShellItem *psiDestinationFolder)
{

    MessageBoxW(NULL,L"CopyItems Function Called", L"HookedCopyItemS", MB_OK);
    return Real_CopyItems(punkItems, psiDestinationFolder);
}

HRESULT WINAPI CoCreateInstanceCallback(REFCLSID rclsid, LPUNKNOWN pUnkOuter, DWORD dwClsContext, REFIID riid, LPVOID *ppv)
{
   const char *IFileOperation_GUID = "{3AD05575-8857-4850-9277-11B85BDB8E09}";
   char GUIDString[64];

   HRESULT HR = Real_CoCreateInstance(rclsid, pUnkOuter, dwClsContext, riid, ppv);

   sprintf_s(GUIDString,64, "{%08X-%04X-%04X-%02X%02X-%02X%02X%02X%02X%02X%02X}\0",
    rclsid.Data1, rclsid.Data2, rclsid.Data3,
    rclsid.Data4[0], rclsid.Data4[1],
    rclsid.Data4[2], rclsid.Data4[3],
    rclsid.Data4[4], rclsid.Data4[5],
    rclsid.Data4[6], rclsid.Data4[7]);

   if(strcmp(GUIDString, IFileOperation_GUID) == 0)
   {
       MessageBoxA(NULL, "IFileOperation_GUID Found", GUIDString, MB_OK);

       if(Real_CopyItems == NULL)
       {
        Actual_CopyItems = (CopyItemsNext)GetInterfaceMethod(*ppv, 17);
        MessageBoxA(NULL,"AFTER GetInterfaceMethod", "TEST", MB_OK);

        if (MH_CreateHook(Actual_CopyItems, &CopyItemsCallback, reinterpret_cast<void**>(&Real_CopyItems)) != MH_OK)
        {
            MessageBoxW(NULL, L"Failed CreateHook Real_CopyItem", L"Info!", MB_ICONWARNING|MB_OK);
        }
        if (MH_EnableHook(Actual_CopyItems) != MH_OK)
        {
            MessageBoxW(NULL, L"Failed EnableHook Real_CopyItem", L"Info!", MB_ICONWARNING|MB_OK);
        }
    }
}
return HR;
}

//DllMain Function 
BOOL APIENTRY DllMain(HMODULE hModule, DWORD  ul_reason_for_call, LPVOID lpReserved)
{
switch (ul_reason_for_call)
{
case DLL_PROCESS_ATTACH:
    if (MH_Initialize() != MH_OK)
    {
        MessageBoxW(NULL, L"Failed Initialize", L"Info!", MB_ICONWARNING|MB_OK);    
    }
    if (MH_CreateHook(&CoCreateInstance, &CoCreateInstanceCallback, reinterpret_cast<void**>(&Real_CoCreateInstance)) != MH_OK)
    {
        MessageBoxW(NULL,L"Failed MH_CreateHook CoCreateInstance",L"Info!",MB_ICONWARNING|MB_OK);
    }
    if (MH_EnableHook(&CoCreateInstance) != MH_OK)
    {
        MessageBoxW(NULL,L"Failed MH_EnableHook StartDocA",L"Info!",MB_ICONWARNING|MB_OK);
    }
    break;

case DLL_PROCESS_DETACH:
    if (MH_Uninitialize() != MH_OK)
    {               
    }
    if (MH_DisableHook(Actual_CopyItems) != MH_OK)
    {
    }
    if (MH_DisableHook(&CoCreateInstance) != MH_OK)
    {
    }

    break;
}
return TRUE;
} 
```

在 CopyItemsCallback 函数内的上述代码中，我正在显示消息框只是为了确认天气该函数没有得到钩子，所以我在调用 Real CopyItems 函数之后得到了那个消息框，但它正在崩溃，所以请检查是什么我的代码的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T06:14:22.767

IFileOperation::CopyItems 是 COM 方法，而不是常规的 Win32 函数，因此您需要区别对待 CoCreateInstance，后者是普通的 Win32 API。

当您使用 C++ 语法调用 COM 方法时，您看不到的是作为隐藏参数在幕后传递的“this”指针（与接口指针相同）。但是如果你想使用 C 风格的代码调用 COM 方法，你必须手动处理这个问题。

因此，您对 CopyItems 函数的定义应如下所示：

```
typedef HRESULT (STDMETHODCALLTYPE *CopyItemsNext)(IFileOperation * pThis, IUnknown *punkItems, IShellItem *psiDestinationFolder); 
```

...并且当您调用“真正的”时，您必须将该 pThis 作为第一个参数传递。

请注意，此技巧是特定于 COM 的，通常不能以这种方式处理 C++ 方法。碰巧 COM 被设计为可以从普通 C 中使用，因此 COM 要求像普通参数一样传递“this”指针。（COM 方法用 STDMETHODCALLTYPE 标记，这告诉编译器将它们与没有它的方法区别对待。）但是，对于非 COM C++ 类，编译器可能会做其他事情，例如在寄存器中传递 this 指针。

--

顺便说一句，请注意 GetInterfaceMethod 中的 DWORD 仅适用于 32 位窗口；如果您想要一个始终是指针大小的类型，然后可以使用 32 位或 64 位代码，请使用 DWORD_PTR。

# ruby-on-rails-3 - RubyOnRails3 - 全日历

> ID：11985971
> 
> 赞同：0
> 
> 时间：2012-08-16T11:16:03.750
> 
> 标签：ruby-on-rails-3

我想在我的项目中使用日历，我已经使用了 table_builder gem 和 event_calendar gem，但是 fullcalendar gem 更适合我。问题是我找不到任何分步教程来使用它，而且不知何故我是 RubyOnRails 的新手。任何人都可以帮助我了解如何使用它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:46:33.543

**我想出了如何使用完整日历 - 只需访问[fullcalendar 网站](http://arshaw.com/fullcalendar/docs/)并下载所需版本的 fullcalendar JavaScript 和 css 文件 - 在布局的标题中包含 fullcalendar.js 和 fullcalendar.css - 创建一个名为 calendar 的新 js 文件和编写以下代码：**

```
$(document).ready(function() {

var date = new Date();
var d = date.getDate();
var m = date.getMonth();
var y = date.getFullYear();

$('#my_calendar').fullCalendar({
    editable: true,
    droppable: true,
    theme: true,      
    header: {
        left: 'prev,next today',
        center: 'title',
        right: 'month,agendaWeek,agendaDay'
    },
    defaultView: 'month',
    height: 500,
    slotMinutes: 15,

    loading: function(bool){
        if (bool) 
            $('#loading').show();
        else 
            $('#loading').hide();
    },

    // a future calendar might have many sources.        
    eventSources: [{
        url: '/events/index/',
        color: 'yellow',
        textColor: 'black',
        ignoreTimezone: false
    }],

    dragOpacity: "0.5",

    //http://arshaw.com/fullcalendar/docs/event_ui/eventDrop/
    eventDrop: function(event, dayDelta, minuteDelta, allDay, revertFunc){
         updateEvent(event);
    },

    // http://arshaw.com/fullcalendar/docs/event_ui/eventResize/
    eventResize: function(event, dayDelta, minuteDelta, revertFunc){
        updateEvent(event);
    },

    // http://arshaw.com/fullcalendar/docs/mouse/eventClick/
    eventClick: function(event, jsEvent, view){
      window.location = ('/events/show?id=' + event.id)
    },
}); 
```

});

函数更新事件（the_event）{

```
$.ajax({  
  type: 'POST',                                    
  url: '/events/update_js?id='+ the_event.id +"&startd=" + the_event.start+"&endd=" + the_event.end,                  //the script to call to get data          
  data: {end: the_event.end, start: the_event.start } ,                      //you can insert url argumnets here to pass to api.php
                                   //for example "id=5&parent=6"
  dataType: 'json',                //data format      
  success: function()          //on receive of reply
  {
    alert("done!")
  } 
}); 
```

};

模型和视图中还有其他代码会出现日历。我还更改了编辑事件函数的代码，因为它不适用于我并且在事件控制器中运行以进行编辑 - 任何帮助我随时都在这里。希望你能像我一样使用它

# c# - 在注册页面自动分配角色

> ID：11985972
> 
> 赞同：0
> 
> 时间：2012-08-16T11:16:05.420
> 
> 标签：c#, asp.net

我有一个简单的注册页面，在提交页面内容（用户名和密码）后，我需要为用户分配一个角色。我从 WSAT GUI 创建了 2 个角色（管理员和成员）。

那我怎么给他分配“成员角色”

这是我的注册表..

```
protected void Button1_Click(object sender, EventArgs e)
    {
        string EPass = Helper.ComputeHash(TextBox2.Text, "SHA512", null);
        String var = System.Configuration.ConfigurationManager.ConnectionStrings["KKSTechConnectionString"].ConnectionString;
        SqlConnection conn = new SqlConnection(var);
        String str = @"insert into Users (Username, Pass, EmpID, Rolename)
                                    values(@Username, @Pass, @EmpID, @Rolename)";
        SqlCommand cmd = new SqlCommand(str, conn);
        cmd.CommandText = str;
        cmd.CommandType = CommandType.Text;

        try
        {
            var userName = TextBox1.Text;
            conn.Open();
            cmd.Parameters.AddWithValue("@Username", TextBox1.Text);
            cmd.Parameters.AddWithValue("@Pass", EPass.ToString());
            cmd.Parameters.AddWithValue("@EmpID", DropDownList1.SelectedValue);
            cmd.Parameters.AddWithValue("@Rolename", DropDownList2.SelectedValue); 
            cmd.ExecuteNonQuery();

        }

        finally
        {
            conn.Close();
        }

    } 
```

dbo.Users：用户名（PK）| 通行证 | EmpID (FK) | 角色名

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:20:02.283

As i got you right [Roles.AddUserToRoles](http://msdn.microsoft.com/en-us/library/system.web.security.roles.addusertoroles.aspx) will help you.

```
var userName = TextBox1.Text;
Roles.AddUserToRole(userName, "member"); 
```

To get users in role you can use [Roles.GetUsersInRole](http://msdn.microsoft.com/en-us/library/system.web.security.roles.getusersinrole) (Note: it will returns their names only).

PS

It better to use standart `membership` from the box. [My previous answer](https://stackoverflow.com/questions/11658714/authentication-from-session-into-members-folder/11782999#11782999) can help you.

# android - 绘制我自己的自定义视图

> ID：11985976
> 
> 赞同：0
> 
> 时间：2012-08-16T11:16:26.493
> 
> 标签：android

我已经创建了自己的视图（我在画布上绘制），并且我想在它上面创建另一个层（带有按钮等）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:28:06.360

创建一个 FrameLayout 并在其中添加所需的视图 - FrameLayout 允许覆盖控件。

只需确保顶部设置了一些不透明度，否则您将看不到它下方的控件 - 还要注意添加视图的顺序。

```
FrameLayout layers = new FrameLayout(this);
CustomViewBottom bottom = new CustomViewBottom(this);
CustomViewOverlay overlay = new CustomViewOverlay(this);
//the overlay class must set the ALPHA property 
//of the PAINT object that it uses to draw

layers.addView(bottom);
layers.addView(overlay);
this.setContentView(layers); 
```

[如何在 Android 上的 Camera 使用的 SurfaceView 上绘制叠加层？](https://stackoverflow.com/questions/2933882/how-to-draw-an-overlay-on-a-surfaceview-used-by-camera-on-android)

# django - 如何在 Tastypie API 中创建对象？

> ID：11985979
> 
> 赞同：4
> 
> 时间：2012-08-16T11:16:33.787
> 
> 标签：django, api, post, tastypie

我正在为我的 Django 项目创建一个 Tastypie API。我在 django models.py 中有一个模型，如下所示：

```
class User(models.Model):
    nick = models.CharField(max_length = 255)
    email = models.CharField(max_length = 511)
    password = models.CharField(max_length = 63)
    reg_date = models.DateTimeField('register date')
    od_user = models.CharField(max_length = 1024)

    def __unicode__(self):
        aux = self.nick + " " + self.email
        return aux 
```

我也有一个用于我的 Tastypie API 的 ModelResource，如下所示：

```
class UserResource(ModelResource):
   class Meta:
      queryset = User.objects.all()
      resource_name = 'user'
      excludes = ['password']
      allowed_methods = ['get', 'post', 'put', 'delete']
      authorization = Authorization()
      always_return_data=True

   def obj_create(self, bundle, request=None, **kwargs):
      username, password = bundle.data['nick'], bundle.data['password']
      try:
          bundle.obj = User(nick, "email@test", password,timezone.now(),"od_test")
          bundle.obj.save()
      except IntegrityError:
          raise BadRequest('That username already exists')
      return bundle 
```

但这不起作用。我看过[如何以编程方式使用 django-tastypie API 创建或注册用户？](https://stackoverflow.com/questions/8889153/how-to-create-or-register-user-using-django-tastypie-api-programmatically)但我不知道如何在我的数据库中创建用户。

我用：

```
 curl -v -H "Content-Type: application/json" -X POST --data '{"nick":"test2", "password":"alparch"}' http://127.0.0.1:8000/api/v1/user/?format=json 
```

做POST方法。

如何使用 Tastypie API 创建对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:44:06.987

您不能以您的方式创建具有位置参数的用户：

```
User(nick, "email@test", password,timezone.now(),"od_test") 
```

相反，您必须使用关键字参数：

```
User(nick=nick,
     email="email@test",
     ...
     ) 
```

# cucumber - Rails 黄瓜步骤定义

> ID：11985983
> 
> 赞同：0
> 
> 时间：2012-08-16T11:16:46.050
> 
> 标签：cucumber, definition

场景：然后我应该看到显示评级为 PG 和 R 的电影

步骤定义：然后 /^I 应该会看到显示有评分 (.*) 的电影$/ do |ratings| page.should have_content(Movie.find_all_by_ratings) 结束

黄瓜：

```
DEPRECATION WARNING: Calling dynamic finder with less number of arguments than the number of attributes in method name is deprecated and will raise an ArguementError in the next version of Rails. Please passing `nil' to the argument you want it to be nil.
 (called from block (2 levels) in <top (required)> at /home/saasbook/hw3_rottenpotatoes/features/step_definitions/movie_steps.rb:44)
    Then I should see movies with ratings PG and R displayed # features/step_definitions/movie_steps.rb:42
      expected there to be content "[]" in "Rotten Potatoes!\nRotten Potatoes!\n\nAll Movies\n\n\n\nInclude:\nG\n\nPG\n\nPG-13\n\nNC-17\n\nR\n\n\nMovie Title\nRating\nRelease Date\nMore Info\nThe Terminator\nR\n1984-10-26 00:00:00 UTC\nMore about The Terminator\nWhen Harry Met Sally\nR\n1989-07-21 00:00:00 UTC\nMore about When Harry Met Sally\nAmelie\nR\n2001-04-25 00:00:00 UTC\nMore about Amelie\nThe Incredibles\nPG\n2004-11-05 00:00:00 UTC\nMore about The Incredibles\nRaiders of the Lost Ark\nPG\n1981-06-12 00:00:00 UTC\nMore about Raiders of the Lost Ark\nAdd new movie\n\n\n" (RSpec::Expectations::ExpectationNotMetError)
      ./features/step_definitions/movie_steps.rb:44:in `block (2 levels) in <top (required)>'
      ./features/step_definitions/movie_steps.rb:43:in `each'
      ./features/step_definitions/movie_steps.rb:43:in `/^I should see movies with ratings (.*) displayed$/'
      features/filter_movie_list.feature:34:in `Then I should see movies with ratings PG and R displayed' 
```

请帮我纠正这里的错误。

我感谢 NSS 改进了格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:52:39.230

问题是`Movie.find_all_by_ratings`想要一个参数，而你没有传递任何参数。您可能打算这样做：

```
Moving.find_all_by_ratings(ratings) 
```

# html - CSS 选择器 > 不工作

> ID：11985984
> 
> 赞同：1
> 
> 时间：2012-08-16T11:16:48.730
> 
> 标签：html, css, css-selectors

我有一个表，其第二行第一列包含另一个表。我想为父表行设置背景颜色，但不应将其应用于子表行。为此，我正在尝试使用 CSS Child-selector (>)。但它不起作用......谁能告诉我原因。

这是我的一段代码：

```
<!DOCTYPE HTML PUBLIC>
<html>
 <head>
   <style>
   table.tab > tr{
     background:red;
   }
  </style>
 </head>

 <body>
  <table class="tab">
   <tr>
    <td>asdf</td><td>afda</td><td>asdfdsa</td>
   </tr>

   <tr>
    <td colspan="3">
      <table>
       <tr>
          <td>afds</td><td>Trkaladf</td><td>inner Tab</td>
       </tr>
      </table>
    </td>
   </tr>

  </table>
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T11:19:43.817

I think some browsers like to auto-render a `tbody` element nested between `table` and `tr` which will cause your direct-child selector to not work.

```
table.tab > tbody > tr, table.tab > tr{
     background:red;
   }​ 
```

[http://jsfiddle.net/vppXL/](http://jsfiddle.net/vppXL/)

* * *

However, if this content is for layout and **not** tabular data, you should [not be using a table element](https://stackoverflow.com/questions/83073/why-not-use-tables-for-layout-in-html).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T11:24:12.177

最好的办法是自己设置`<thead>`和`<tbody>`部分，如下所示：

```
<table class="tab">
    <thead>
        <tr>
            <td>asdf</td>
            <td>afda</td>
            <td>asdfdsa</td>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td colspan="3">
                <table>
                    <tr>
                        <td>afds</td>
                        <td>Trkaladf</td>
                        <td>inner Tab</td>
                    </tr>
                </table>
            </td>
        </tr>
    </tbody>
</table>​ 
```

然后您可以选择将您的标记设置为目标行中的 tbody，但不是 thead：

```
table.tab tbody {
    background: red;
}​ 
```

但是，最好将您`background-color`的`<td>`元素设置为：

```
table.tab > tbody > tr > td {
    background: red;
}​ 
```

这里有一个[jsFiddle 示例](http://jsfiddle.net/VSgWK/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T11:33:03.817

`table.tab > tbody > tr`确实只将样式赋予第一行。如果你用 firebug 看一下 DOM，你可以确认它。子表的第一行没有以相同的方式设置样式。

**但是**，由于您的子表位于具有红色背景的表行内，并且子表没有指定背景，因此子表将没有背景 - 因此您仍然可以“通过”子表看到红色背景。

可能的解决方案 - 设置子表的样式以及不同的背景：

```
table.tab > tbody >  tr {
 background:red;
}

table.tab table > tbody > tr{
 background:white;
} 
```

# java - 在 Java Swing 中向 JPanel 添加按钮

> ID：11985987
> 
> 赞同：2
> 
> 时间：2012-08-16T11:17:01.643
> 
> 标签：java, swing

我将 JLabel 和 JCombobox 附加到 JPanel。这工作正常。但是当我再添加两个按钮时，我看不到这些按钮。

下面是我的代码：

```
JPanel jPanel=new JPanel();
jPanel.setLayout(null);
JLabel label = new JLabel("Welcome");                       
label.setFont(new Font("Helvetica", Font.ROMAN_BASELINE, 13));          
jPanel.add(label);     
JComboBox combo = new JComboBox(comboboxbean);
combo.setPreferredSize(new Dimension(285, 20));
combo.setFont(new Font("Helvetica", Font.ROMAN_BASELINE, 13));          
jPanel.add(combo);           
startButton = new JButton("Start");
stopButton = new JButton("Stop");
startButton.addActionListener(this);
startButton.setActionCommand("enable");
jPanel.add(startButton);
stopButton.addActionListener(this);
stopButton.setActionCommand("enable");
jPanel.add(stopButton); 
Insets insets = jPanel.getInsets();              

Dimension size = label.getPreferredSize();
        label.setBounds(20 + insets.left, 30 + insets.top,
                     size.width, size.height);

Dimension size1 = combo.getPreferredSize();
     combo.setBounds(20 + insets.left, 65 + insets.top,
                     size1.width, size1.height);

Dimension size2 = startButton.getPreferredSize();
    startButton.setBounds(20 + insets.left, 100 + insets.top,
                size2.width, size2.height);

Dimension size3 = stopButton.getPreferredSize();
     stopButton.setBounds(20 + insets.left, 130 + insets.top,
             size3.width, size3.height);        

frame.add(jPanel);  
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
frame.setVisible(true); 
```

最后，我将 JPanel 添加到 JFrame。我已将 JPanel 的布局设置为空。我找不到按钮不显示的原因。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:25:50.373

如果布局为空，则意味着您必须使用该`setBounds()`方法来定位添加到您的`JPanel`. 您目前没有这样做，所以我认为按钮是在 . 之外`JPanel`还是在`JComboBox`.
无论如何，如果你想让你的按钮在你必须告诉他们的特定位置，这不会像使用`Layout`null 以外的那样是自动的。

# javascript - 用 Instagram 提要填充网页并调整大小

> ID：11985989
> 
> 赞同：0
> 
> 时间：2012-08-16T11:17:05.347
> 
> 标签：javascript, jquery, json, instagram

我已经在网上搜索了几个小时，试图找到从我的 Instagram 提要中提取相关标记图像到一个完全填满屏幕的页面的最佳选择。我设法在[http://www.gezzamondo.co.uk/jennifer找到](http://www.gezzamondo.co.uk/jennifer)[了这个用于 jQuery 的 Instagram 插件](http://potomak.github.com/jquery-instagram/)。

缩略图真的很小，只有几个显示......我如何修改它以使平方图像更大并且将无休止地填满屏幕直到没有更多图像显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:03:47.087

显示更大图像的快速修复是更新**jquery.instagram.js的第 33 行**

`.attr('src', photo.images.thumbnail.url)`

至

`.attr('src', photo.images.standard_resolution.url)`

20 张照片限制是 Instagram API 的限制，请参阅[jquery-instagram 自述文件的替代方法部分](https://github.com/potomak/jquery-instagram#alternative-method)

也许您可以将其视为替代选择？[florinpopa.net/load-instagram-pictures-with-jquery](http://florinpopa.net/load-instagram-pictures-with-jquery/)。他们似乎提供了一个`count`允许更大图像结果的参数。

# database - 如何为访问控制和跟踪创建数据库设计？

> ID：11985993
> 
> 赞同：0
> 
> 时间：2012-08-16T11:17:15.173
> 
> 标签：database, database-design, relational-database, database-schema

规划创建门禁系统。牢记教育机构，我创建了外围表，例如大门，区域，建筑物，级别，部分，房间（每个表都具有外键关系）.....现在我希望创建部门表和员工表，但是如何我可以将部门定义为特定的边界吗？因为作为用户，部门可以是一个房间或整个建筑物。我猜将所有外围表外键都放入部门表中不是一个合适的方法。如果用户通过不同的点到达检查点，我也希望访问在路径中，不想授权。我是数据库设计的新手，可能有一种我没有想到的简单方法。请帮助提供最佳设计理念来创建上述内容。提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:52:34.620

由于创建安全位置的层次结构的目的是管理谁应该有权访问哪些位置，因此最好使用内卷外键（自引用关系） 在**单个表中管理所有这些位置。**

考虑以下 ERD：

![ERD](../Images/3370ca90ca2043ef7193e66b1a7d6866.png)

这里有可以包含其他安全区域的安全区域。人们被授予访问适当区域的权限。访问较低级别区域意味着访问包含较低级别区域的所有区域。

使用内卷外键意味着必须处理分层数据，这在 SQL 中可能是个麻烦事。为了简化层次结构导航，我建议使用我在回答[这个问题](https://stackoverflow.com/questions/7420885/how-do-i-design-a-database-to-store-properties-selecting-attributes-by-synonyms/7423459#7423459)时详细描述的**访问次数**。

在任何类型的访问控制系统中要考虑的一件事是最大限度地减少安全管理员维护的数据量。许多人将具有相同的访问规则。出于这个原因，您可能希望扩展上述 ERD 以使用**基于角色的安全性**，其中*组*而不是*个人*被授予对区域的访问权限，并且个人被授予对组的访问权限。有关基于角色的安全性的更多信息，请参阅我[在 dba.se 上对此问题的回答。](https://dba.stackexchange.com/questions/12046/what-is-a-basic-model-for-making-a-database-with-users-and-groups/12107#12107)如果可能有帮助，您可以混合使用基于角色的访问规则和个人访问规则。

要考虑的另一个选项是您的 ACCESS 表可以同时包含*允许*和*禁止*标志。这些可用于允许访问更大的区域，同时特别禁止访问包含在其中的较小区域。这种方法可以减少需要为每个人管理的数据量。

# actionscript-3 - 为什么有多个具有 3D 旋转的对象会导致显着的性能损失

> ID：11985994
> 
> 赞同：1
> 
> 时间：2012-08-16T11:17:16.947
> 
> 标签：actionscript-3, flash

目前我正在开发一款原型赛车游戏，旨在获得尽可能接近 3D 图形，而无需使用 Flash Player 11 和/或 DirectX。为此，我选择使用 RotationX、RotationY 和 RotationZ 来给我想要的效果。为了使建筑物变为 3D，我创建了同一对象的四个实例并适当地旋转/索引它们。

这很有效，直到舞台上有很多这些旋转对象 - 然后问题从性能开始。即，没有。

一个例子在这里： http: [//www.hosted101.net/car/Racing3D.html](http://www.hosted101.net/car/Racing3D.html)

如果您跟随周围的轨道，您会发现舞台上的表演越多，表演就越差。

我已采取的尝试和纠正此问题的阶段包括：

1）禁用 Z 排序 - 这并没有提高性能（令我惊讶）

2) 禁用对象 RotationZ 以跟随相机 - 同样，性能没有提高

3) 用矢量图形交换位图图形 - 再次遗憾的是，性能没有提高

究竟是什么导致了这些戏剧性的表现？

只是舞台上有这么多带有3D旋转的物体吗？

![大量 FPS 损失的示例](../Images/e5d7427d676d49c34a5632e4cecfd781.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:19:52.390

在这里回答我自己的问题，以防有人遇到类似的泡菜：

该问题与游戏的FPS有关。低端机器无法将其设置为（最初）120，因为可以看到如此不同的结果。当下降到 60 时，它仍然太高，因此当舞台上有多个旋转物体时，FPS 下降得太低，产生了断断续续的效果。

将 FPS 最大值设置为 24 并将最大速度/转弯加倍后，游戏现在可以正常运行了。

道德：如果您的目标是低规格机器，则较低的 FPS 更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:18:36.927

您发布的链接以恒定的 60 FPS 为我运行。

如果这些更改都没有帮助，您的性能瓶颈可能在其他地方，请尝试使用[TheMiner 之](http://www.sociodox.com/theminer/index.html)类的东西进行分析。

您也可以尝试将 wmode 设置为“direct”或“gpu”，我注意到您使用的是“window”。

由于您不需要任何这些建筑物和树木上的任何鼠标事件，请确保在所有这些精灵上将 mouseEnabled mouseChildren 设置为 false。

这些是我想到的事情，希望有所帮助。

# c++ - CLSID_WICPngDecoder 上的 REGDB_E_CLASSNOTREG

> ID：11985999
> 
> 赞同：0
> 
> 时间：2012-08-16T11:17:50.160
> 
> 标签：c++, visual-c++, com, png, wic

我正在尝试为 HBITMAP 加载 PNG。我从stackoverflow找到了这篇[文章。](http://code.logos.com/blog/2008/09/displaying_a_splash_screen_with_c_part_i.html)当我运行代码时，我会`REGDB_E_CLASSNOTREG`继续`CoCreateInstance(CLSID_WICPngDecoder, NULL, CLSCTX_INPROC_SERVER, __uuidof(ipDecoder), reinterpret_cast<void**>(&ipDecoder)`。我正在使用 Visual Studio 2012 RC，我已经完成了`CoInitlaize`，但我仍然遇到同样的错误，这可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:01:30.083

WIC API 建议您从工厂创建解码器，而不是直接使用它的`CLSID`. 请参阅那里的[IWICImagingFactory 接口](http://msdn.microsoft.com/en-us/library/windows/desktop/ee690281%28v=vs.85%29.aspx)和示例代码。

您可以选择从文件、流或指定容器格式创建`GUID`。